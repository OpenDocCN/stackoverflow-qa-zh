# StackOverflow 问答 10633000-10633999

# java - 为 hashcode、equals 和 toString 方法生成单元测试

> ID：10633004
> 
> 赞同：10
> 
> 时间：2012-05-17T09:28:21.400
> 
> 标签：java

是否有任何工具/库可以自动为我的哈希码生成测试，并查看这些方法中涉及的实例变量的 equals 方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T09:51:18.730

Guava 使用[这个](https://github.com/google/guava/blob/master/guava-testlib/src/com/google/common/testing/EqualsTester.java)测试生成器来测试`equals`和`hashCode`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T09:31:47.450

`toString()`不应该有任何“合同”要尊重，所以单元测试会很奇怪而且没用。

您可以[查看](http://code.google.com/p/equalsverifier/)有关`equals()`.

还有一个 JUnit 插件[EqualsHashCodeTestCase](http://junit-addons.sourceforge.net/junitx/extensions/EqualsHashCodeTestCase.html)

* * *

**在同一主题上：**

*   [如何进行单元测试 hashCode 函数？](https://stackoverflow.com/questions/4449728/how-can-i-do-unit-test-hashcode-function)
*   [一个单元应该如何测试 hashCode-equals 合约？](https://stackoverflow.com/questions/188311/how-should-one-unit-test-the-hashcode-equals-contract)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-19T12:03:23.337

[EqualsVerifier](http://jqno.nl/equalsverifier/ "等于验证器")是一个很棒的库。我经常将它与[Reflections](https://code.google.com/archive/p/reflections/ "思考")库结合使用，以自动扫描某些类并立即测试所有类的合约：

```
 @Test
  public void validateEqualsHashCodeToString() {
    final Reflections dtoClassesReflections = new Reflections(new ConfigurationBuilder()
      .setUrls(ClasspathHelper.forPackage("my.base.package"))
      .filterInputsBy(new FilterBuilder()
        .include(".*Dto.*") // include all Dto classes
        .exclude(".*Test.*")) // exclude classes from tests which will be scanned as well
      .setScanners(new SubTypesScanner(false)));

    final Set<Class<?>> allDtoClasses = dtoClassesReflections.getSubTypesOf(Object.class);

    allDtoClasses.forEach(dtoClass -> {
      logger.info("equals/hashCode tester testing: " + dtoClass);
      EqualsVerifier.forClass(dtoClass).verify();

      try {
        dtoClass.getDeclaredMethod("toString");
      } catch (NoSuchMethodException e) {
        fail(dtoClass + " does not override toString() method");
      }
    });
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-28T10:54:03.887

我会推荐[EqualsVerifier](http://jqno.nl/equalsverifier/)来测试哈希码和 equals 方法。

我会推荐[ToStringVerifier](https://github.com/jparams/to-string-verifier)来测试 toString 方法

这是一个例子：

```
@Test
public void testToString()
{
    ToStringVerifier.forClass(User.class).verify();
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-17T10:44:58.017

您可以使用 Apache EqualsBuilder 和 HashCodeBuilder 来实现 equals 和 hashCode，从而最大限度地降低不正确执行的风险。

测试equals很简单，创建两个实例值相同的实例（您会期望它们相等）并在一个实例上调用equals并将另一个作为参数传递，您应该期望它返回true：D

# iphone - xml解析时如何占用更少的内存

> ID：10633005
> 
> 赞同：0
> 
> 时间：2012-05-17T09:28:25.217
> 
> 标签：iphone, objective-c

我正在开发一个应用程序。其中我执行 xml 解析并获得 400 个问题。为了获得这些问题，我创建了一个具有该问题属性的类。当问题标签被触发时，我为该类创建了一个对象并保存了该属性信息当为该类触发 didendelement 时，我将该类对象添加到一个数组中。像这样，我为每个问题创建一个对象。当我这样做时，它会占用大量内存并且过程也很慢。如果我运行这个在后台它需要相同的时间。所以请告诉我如何用更少的内存来做这个。我的解析代码就像

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict  
{
    if([elementName isEqualToString:@"question"])
    {
        questions=[[Questions alloc]init];
        questions.content=[attributeDict valueForKey:@"content"];
        questions.id=[attributeDict valueForKey:@"id"];
        questions.answer=[attributeDict valueForKey:@"answers"];
        questions.type=[attributeDict valueForKey:@"type"];
        questions.markertext=[attributeDict valueForKey:@"marker_text"];
        questions.markertop=[attributeDict valueForKey:@"marker_top"];
        questions.markerleft=[attributeDict valueForKey:@"marker_left"];
    }
 }

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
   [qshns addObject:questions];
} 
```

这里 qshns 是一个数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:45:24.473

只有一种方法可以占用更少的内存，即只点击一次 XML 类并将其存储到任何单例类的数组或数据库中。然后在任何你想要的地方使用它。永远不要一次又一次地点击 XML 类，它会占用你的大量内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:23:07.940

将您的 XML 文件复制到 Core Data 数据存储中。然后，您将获得超快速访问，几乎没有任何内存使用。

# jquery - 如何通过 jQuery 设置灵活的盒子 CSS？css(display, '-moz-box') 似乎不起作用？

> ID：10633007
> 
> 赞同：0
> 
> 时间：2012-05-17T09:28:27.907
> 
> 标签：jquery, css

这有效：

```
display: box;
display: -webkit-box;
display: -moz-box; 
```

这也有效：

```
.attr('style','display: -moz-box') 
```

这不是:-(

```
css( display, '-moz-box') 
```

演示：http: [//jsfiddle.net/TomasReichmann/K3nQg/](http://jsfiddle.net/TomasReichmann/K3nQg/)

我正在构建一个插件，它显示一个类似于窗口的**可调整大小**的模式框，其标题可以具有可变的高度和内容，它适合框内并在内容太长时显示滚动条。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:29:56.133

你错过了周围的报价`display`；将属性和值传递给 时[`.css()`](http://api.jquery.com/css)，两者都必须是字符串：

```
.css('display', '-moz-box') 
```

[jsFiddle 演示](http://jsfiddle.net/BoltClock/K3nQg/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:34:03.607

尝试

```
css( 'display', '-moz-box !important') 
```

# php - ReflectionClass 或 class_exists 方法？

> ID：10633017
> 
> 赞同：0
> 
> 时间：2012-05-17T09:29:04.893
> 
> 标签：php, reflection

这是使用 ReflectionClass 方法而不是 class_exists 方法检查类是否存在的主要区别

我知道使用 ReflectionClass 我获​​得了 OOP 功能（异常、从类创建新实例等），问题是将来什么会给我更大的灵活性？

使用与开销相关的 ReflectionClass 会出现性能问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:32:29.223

如果您只想检查是否存在，请使用*，*`class_exists`它还具有能够按需自动加载类的功能（请参阅第二个参数）。

`ReflectionClass`更昂贵，但它也提供了其他方式无法提供的功能。如果你需要它，那么你需要它。

# git - Git 和数据库状态

> ID：10633020
> 
> 赞同：2
> 
> 时间：2012-05-17T09:29:16.493
> 
> 标签：git

Git 是一个很好的工具：您可以切换到以前的版本之一并将历史一分为二来定位错误。

但实际上您不能，因为当您切换到旧版本时，您的数据库仍处于其最新状态，因此您的**Web 应用程序**根本无法运行。

有没有关于如何解决这个问题的通用解决方案？

一些想法：

*   我无法将整个数据库添加到每个提交中
*   我不能使用前后迁移，因为我在向后迁移中丢失了数据。数据不是结构的一部分，但便于调试。
*   当然，我需要一些与 Git 同步的东西（一个钩子？），否则我会得到额外的时间费用，这并不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:31:41.403

最干净的解决方案是使用一个脚本来创建一个包含虚拟/测试数据的数据库。由于此脚本和您的数据库结构将被版本化，它总是会创建正确的。

但是，您无法自动执行*反向迁移*，因为当前提交后发生的结构更改信息不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-26T16:17:24.557

试试这个工具

[https://hub.docker.com/r/arelis/gitdb](https://hub.docker.com/r/arelis/gitdb)

它是对 mysql 的版本控制，并使用 git 控制版本

# objective-c - cocos2d 视图作为 UIView 的一部分

> ID：10633026
> 
> 赞同：0
> 
> 时间：2012-05-17T09:29:47.990
> 
> 标签：objective-c, ios, cocos2d-iphone

我必须创建一个动画进度条（就像一棵基于进度生长的树）。我使用 COOCOS2D 做过这样的事情。但我现在想将 cocos2d 场景作为 UIView 的一部分。（要明确页面视图过程是由一些 UIKit 元素完成的，进度指示应该是我创建的 cocos2d 场景。）

谁能帮我将 cocos2d 场景作为 UIView 的一部分？

我知道我们必须使用 EAGLView，但是在将 cococ2d 包类添加到项目时有很多困惑。你能详细解释一下..或任何教程链接吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:36:31.170

尝试将`[CCDirector sharedDirector].openGLView`子视图添加到您的 main `UIView`：

```
 [view addSubview:[CCDirector sharedDirector].openGLView]; 
```

在您的应用程序委托中，请务必正确设置边界，否则视图将覆盖整个屏幕：

```
EAGLView *glView = [EAGLView viewWithFrame:myRect ... ]; 
```

# git - 当本地仓库尚未合并原始 HEAD 时，在 git 中推送提交

> ID：10633032
> 
> 赞同：3
> 
> 时间：2012-05-17T09:30:13.630
> 
> 标签：git, version-control

假设我的本地存储库当前是源之后的一个提交。假设我在本地存储库中提交了与源不冲突的更改。如何在不先从原点拉/合并更改的情况下将此更改推送到原点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T04:30:54.787

好的，因此您因非快进推送而被拒绝，并且您有理由不想从远程拉取最新更新。我认为很明显你需要分支你的改变。

因此，让我们在公共点 HEAD~n 处创建一个分支，在您的情况下为 HEAD~1：

```
git branch myfeat HEAD~1 
```

然后快进：

```
git checkout myfeat
git merge master 
```

现在新分支有一个共同点，所以只需：

```
git push origin myfeat 
```

远程仓库现在看起来像这样：

```
--X---X--X--Xbug      (master)
          \
           \--Xfeat   (myfeat) 
```

现在其他人可以合并/重新定位您的功能。最终，您将不得不修复错误并将其拉到本地，或者您设计一个稍微不同的工作流程，因为您要保留一个自定义的本地主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:35:21.333

你不能做你所描述的，但我想你想要的是：

```
git pull --rebase
git push 
```

上面的命令将优雅地合并您的本地仓库和远程仓库（不创建合并提交）并将您的本地提交推送到远程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:45:58.890

他可能只想推送到遥控器纯粹是为了备份他的更改，如果是这样的话，他可以这样做

```
git push origin HEAD:refs/heads/some_branchname_not_in_use 
```

我通常`trash/somebranchname`用于这些东西，目的很明显。

# macos - Mac 开发中的本地主机

> ID：10633037
> 
> 赞同：0
> 
> 时间：2012-05-17T09:30:29.800
> 
> 标签：macos, apache, webserver

我正在开发一个 MAC 应用程序，其中我必须使用 api 解码一些图像我在 MAC 上启用了 Web 共享，并在提供路径 http://IPaddress/~User_name 时能够看到存储在路径 Mac HD/ 中的浏览器上的图像用户/用户名/站点/图像。我使用与上述相同的路径，但 api 给出了错误，我怀疑是由于路径中的 ~。我尝试提供另一个 weburl（托管在网络上）并且它有效。另外，我也尝试提供绝对路径（http://IP 地址/HD Mac/users/username/sites/images），但仍然出现错误。如何以及在哪里可以更改此设置？它在apache设置文件中吗？或者我怎样才能得到可行的绝对路径？我想通过我系统本地的api解码这些图像，不想通过网络上传它们请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:15:30.047

您遇到了简单的网络问题。您在自己的 Intranet 中，从您自己的计算机访问您自己的计算机。您的计算机及其 Web 服务器只能从您自己的计算机或同一子网中的其他计算机访问。来自您子网之外的计算机，即不在您家庭路由器后面的任何人，都无法访问您网络内的任何内容。他们也不应该，因为您当然不想在互联网上向公众公开您的计算机。寻找其他方式将这些文件上传到 API。

# java - 将 JAXB 注释应用于现有数据模型

> ID：10633038
> 
> 赞同：1
> 
> 时间：2012-05-17T09:30:34.590
> 
> 标签：java, jaxb

我有以下问题。对于网络服务，我使用现有的数据模型。所以我需要在现有的源类上应用 JAXB 注释。这需要大量的手动操作。

有谁知道可以帮助自动化此过程的工具？为清楚起见，通过 an 生成 java 源代码`xsd`不是目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:49:50.053

您可以首先获取数据模型包中的所有类，然后在运行时使用 Javassist 在每个这些类上添加注释。

*   查看如何获取包[教程中的所有类](http://www.dzone.com/snippets/get-all-classes-within-package)
*   查看有关在运行时添加注释的Javassist[教程](http://ayoubelabbassi.blogspot.com/2011/01/how-to-add-annotations-at-runtime-to.html)

如果您想避免此过程而只是更改源代码，我认为在您的数据模型包中搜索/替换将是可行的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:58:00.673

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)是异常配置。这意味着您只需要注释所需表示不同于默认表示的模型：

*   [http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted/TheBasics](http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted/TheBasics)

如果您有一个正在尝试将域模型映射到的 XML 模式，那么您可能会发现[Eclipse中的](http://www.eclipse.org/)[Dali](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFgQFjAA&url=http://www.eclipse.org/dali/&ei=J8q0T63QNube2QXTlfEO&usg=AFQjCNE8YOhy5bc2PJGKyx2g1hplAedYsg) JAXB 工具很有帮助。我建议试用 Juno 的预发布版本。

# binary - 16 位数字乘法

> ID：10633039
> 
> 赞同：0
> 
> 时间：2012-05-17T09:30:39.433
> 
> 标签：binary, logic, vhdl

在这段代码中，我试图将 16 位数字相乘并获得 32 位输出。代码有错误。在线

```
 c<=c+a; 
```

编译器给出错误：“无法读取模式输出的端口'c'。我的错误是什么？谢谢。

```
 library ieee;
    use ieee.std_logic_1164.all;
    use ieee.std_logic_arith.all;
    use ieee.std_logic_unsigned.all;

    entity circ is
    port (  a    :in std_logic_vector (15 downto 0);
    b    :in std_logic_vector (15 downto 0);
    c    :out  std_logic_vector (31 downto 0)
        );

    end entity;

    architecture data of circ is
    begin
process(a,b)
begin
c<= '0';   
for i in 15 to 0 loop
if (b(i) = '1') then
c<=c+a;
end if;
END LOOP;

end process;
    end data; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:13:19.513

该错误正是编译器告诉您的

> 无法读取模式的端口“c”

您无法读取输出。您在`c`写作时正在阅读，`c <= c + a`因为`c`出现在作业的右侧。您必须像这样重写代码：

```
signal s : std_logic_vector(31 downto 0);

process(a,b)
begin
  s <= (others => '0');   
  for i in 15 to 0 loop
    if (b(i) = '1') then
      s <= s + a; -- Use a local signal that we can read and write
    end if;
  end loop;
  c <= s; -- Assign the output to the local signal.
end process; 
```

# android - 如何使按钮不透明？

> ID：10633040
> 
> 赞同：17
> 
> 时间：2012-05-17T09:30:43.373
> 
> 标签：android, styles, transparency, z-order

我写了一个画一个圆圈的自定义视图。然后我把它放在相对布局上。我还把标准按钮放在那里，以便它们重叠。我看到那个按钮是透明的。如何让它不透明？

![在此处输入图像描述](../Images/fc5c253029f1bb2ab7bc135590a88006.png)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-18T04:57:27.163

将背景设置`@android:drawable/btn_default`为摆脱holo主题的透明度

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T09:38:12.640

标准的 Holo 主题按钮是部分透明的。您可以创建一个新的按钮 9.png 图像以在按钮中使用，也可以使用 drawable 创建一个新按钮。

这是有关如何执行后者的链接：

[http://droidapp.co.uk/?p=309](http://droidapp.co.uk/?p=309)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T09:36:50.230

您可以将按钮放在单独的框架布局中，这样您的视图就不会影响按钮，这就是我的想法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T09:57:01.493

将以下代码保存为可绘制文件夹中的 xml，并将此 xml 作为按钮背景

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <stroke android:width="0dp" android:color="#ffffff" />
    <solid android:color="#000000"/>
    <corners android:radius="1px"/>
    <padding android:left="5dp" android:top="3dp" android:right="5dp" android:bottom="3dp" /> 
</shape> 
```

前任：

```
android:background="@drawable/<< your file name>>" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-05T06:23:00.057

我遇到了同样的问题，但使用了 ToggleButton。一个丑陋但快速的解决方案是在按钮后面放置一个 ImageView 并更改它`margin`的 s，`background`并`alpha`适合按钮。例如，在 RelativeLayout 内部：

```
<ImageView
    android:layout_alignLeft="@+id/toggleButton"
    android:layout_alignBottom="@+id/toggleButton"
    android:layout_alignRight="@+id/toggleButton"
    android:layout_alignTop="@+id/toggleButton"
    style="@style/HackBackgroundToggleButton" />

<ToggleButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/toggleButton"
    ... /> 
```

而且，为了减少可见的 hack，提取的样式：

```
<style name="HackBackgroundToggleButton">
    <item name="android:layout_width">84dp</item>
    <item name="android:layout_height">42dp</item>
    <item name="android:background">#FFFFFF</item>
    <item name="android:layout_marginTop">4dp</item>
    <item name="android:layout_marginLeft">4dp</item>
    <item name="android:layout_marginRight">4dp</item>
    <item name="android:layout_marginBottom">4dp</item>
    <item name="android:alpha">0.75</item>
</style> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T13:17:34.290

全息透​​明度实际上是内置在 PNG 文件中的。所以改变它的唯一真正方法是编辑PNG并使它们不透明。这实际上一点也不容易。您需要将图像的 Alpha 通道乘以 255/102。这并不容易！

但是因为我是个天才，所以我找到了一种方法来做到这一点。基本上我将所有相关的 PNG 和 XML 复制到它们自己的目录结构中（按钮只有`-mdpi`,`-hdpi`和`-xhdpi`版本）。然后我运行了这个：

对于文件`find . -name *.png`；做 mogrify -evaluate Multiply 2.5 -channel Alpha $FILE ；完毕

任务完成！实际上，由于某种原因，它对禁用的按钮不太有效——我认为是因为中心是超透明的，但我不太在乎这些。如果您希望它们完全不透明，则必须为这些图像使用高于 2.5 的值。

结果就[在这里](https://docs.google.com/open?id=0BxBsaeNc0igKQ0pjdTJyenBqTjg)。

# c# - C# 关于 Equals 实现的不同 MSDN 指南

> ID：10633041
> 
> 赞同：3
> 
> 时间：2012-05-17T09:30:43.800
> 
> 标签：c#, equals, equality, msdn

为什么以下文档在实现方法时会谈论不同的`Equals`方法？

*   [`[MSDN]`覆盖 Equals() 和运算符 == 的指南（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173147.aspx)
*   [`[MSDN]`实现 Equals 方法](http://msdn.microsoft.com/en-us/library/336aedhh.aspx)

第二个文档*（更新的）*没有显式实现`Equals`(like `public bool Equals(MySuperTrooperClass o)`) 的强类型版本。

从其中一个准则中删除强类型方法的根本原因是什么？我应该在生产代码中使用哪种方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:37:46.133

删除强类型版本没有任何好处。恰恰相反，正如第一页本身所提到的

> 还建议除了实现 Equals（对象）之外，任何类也为自己的类型实现 Equals（类型），以提高性能。

这对于值类型来说是双重的。

我假设第二页根本不关心这个，因为只有弱类型的版本被定义在`System.Object`. 强类型版本通常与实现密切相关`IEquatable<T>`，其[文档](http://msdn.microsoft.com/en-us/library/ms131187.aspx)中提到了 和 之间的`Equals(T)`交互`Equals(object)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T00:04:09.113

Microsoft 决定在许多原始类型中重载的一个不幸的副作用`Equals`是，在许多情况下，由于隐式转换，即使`((Object)X).Equals(Y)`将表现为等价关系（它应该如此），`X.Equals(Y)`也不会。例如，`3.Equals(3.0)`将返回 false，但`(3.0).Equals(3)`将返回 true。虽然`==`运算符没有那么糟糕（通常是 if `X==Y`, `Y==X`），但它仍然没有指定等价关系（例如，如果 X = Int64.MaxValue、Y=X-1 和 Z=(Double)X，则 X== Z 和 Y==Z 但 X!=Y)。

微软放弃关于提供与`Equals()`行为相同的重载的建议的原因`Equals(Object)`可能是，虽然隐式强制转换可能会使前者无法表现为等价关系，但后者应该表现为等价关系，没有例外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:39:22.470

您应该实现强类型的 Equals 以提高性能。正如第一篇文章中所写

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T10:18:33.663

当你想检查两个事物是否具有相同的值时，你使用 ==
当你想检查两个事物是否真的引用同一个实例时，你使用 Equals()。

请记住，只有当 Equals() 为真时，== 也必须为真。

关于 GetHashCode() - 在某些情况下包含结构（如 Dictionary）使用此特定方法来区分数据。由您决定如何区分您的数据，但 GetHashCode() 在更改对象的值以使其正常工作时不得更改。这意味着它应该在对象生命周期内保持相同的值。

当你做这样的事情时：

```
MyClass A = new MyClass();
MyClass B = A; 
```

当您检查 if (A==B) 时，您实际上检查的是指针 A 地址是否与指针 B 地址具有相同的值。
所以，在 99.99% 的共同开发中，你不需要实现 Equals()。

# c++ - g++ 预期';' 返回前

> ID：10633048
> 
> 赞同：-1
> 
> 时间：2012-05-17T09:31:08.290
> 
> 标签：c++, g++, return

我得到了以下代码，因为我试图了解 getopt_long 的用法。一切似乎都很好，但我得到“预期的”；回来之前”。我错过了什么？谢谢你们。

```
int next_option;
const string short_options = "a:bcde";
const struct option long_options[] = 
{
    {"op1", 1, NULL, 'a'},
    {"op2", 1, NULL, 'b'},
    {"op3", 1, NULL, 'c'},
    {"op4", 0, NULL, 'd'},
    {"op5", 0, NULL, 'e'},
    { NULL,0, NULL, 0}
};

do
{
    next_option = getopt_long(argc,argv,short_options.c_str(),long_options,NULL);

    switch(next_option)
    {
        case 'a':
        cout <<" ";
        break;

        case 'b':
        cout <<" ";
        break;

        case 'c':
        cout <<" ";
        break;

        case 'd':
        cout <<" ";
        break;

        case 'e':
        cout <<" ";
        break;

        case '?': // invalid option
        cout <<" ";
        break;

        case -1:  //no more option
        cout <<" ";
        break;

        default:
        cout <<" ";
        break;
    }

}
while(next_option!=-1)
return 0; 
```

我必须遵循什么程序来帮助我解决此类错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T09:32:48.883

我的水晶球告诉我你错过了一个`;`前一个`return`

```
while(next_option!=-1); // <--- semi-colon
return 0; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T09:32:49.640

错误消息*准确地*告诉您问题所在 - 您缺少`;`.

改变：

```
while(next_option!=-1) 
```

至：

```
while(next_option!=-1); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-17T09:32:50.830

你需要一个`;`after `while(next_option!=-1)`。

要遵循的过程是阅读错误消息，然后修复它警告您的事情（在这种情况下，缺少分号）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-17T09:33:57.603

do-while 语句

```
do {

} while (condition); 
```

需要一个终止分号。就在您的`return`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-17T09:33:34.500

你的 do/while() 是一个语句，所以你需要用分号终止它。寻找你可能错过的地方:)

# jquery - Jquery .after不在IE9中工作

> ID：10633049
> 
> 赞同：1
> 
> 时间：2012-05-17T09:31:27.247
> 
> 标签：jquery, html

我基本上有一个包含动态数据的普通表。出于样式目的，我在每个 tr 下方插入表头，这样我就可以在我的表上获得双边框的效果。从语义的角度来看，我认为这有点糟糕，但这是我让效果按我想要的方式工作的唯一方法。我的 tr 有一个边框顶部，但边框底部没有显示，因为我需要`border-collapse: collapse;`在我的桌子上。所以我的想法是在每个 tr 之后插入一些东西，我可以应用边框或背景颜色来实现我想要的外观。

我现在的问题是在 IE 中 .after 似乎没有插入额外的 th 因此我没有得到我的双边框。

首先，我有更好的方法来获得我想要的效果，其次，为什么 .after 不能工作 IE？

这是我的jQuery：

```
$(document).ready(function() {
$('.details tr, .detailsinner tr').after('<th class="line" colspan="2"></th>');
}); 
```

问候米

# expressionengine - 表达式引擎模板重用

> ID：10633050
> 
> 赞同：0
> 
> 时间：2012-05-17T09:31:34.577
> 
> 标签：expressionengine

我正在使用 EE 构建一个站点，并且想知道人们对我的情况有何看法。

基本上我有 3 个不同的频道，它们的数据相似，查看时需要在同一个模板上显示。所以我有一个新闻、艺术家和产品频道。当我单击这些通道中的任何一个中的项目时，无论如何我都需要在同一模板中显示该数据。

我可以想到两种方法来做到这一点，但想知道是否有人有更优雅的解决方案。

1.  检查 URL 并使用适当的频道打开我的条目标签，然后仅在模板中为该频道使用正确的自定义字段。（但这意味着我需要为每个频道复制代码）。
2.  打开我的条目标签并提供所有频道，然后将所有 3 个自定义字段放在模板中我需要它们的位置。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T22:28:40.653

您可以使用[embed variables 将变量](http://expressionengine.com/user_guide/templates/embedding.html#embed-variables-for-the-embedded-template)传递到您的嵌入中。

需要注意的另一件事是，在确定要加载的内容时，请使用 Mark Croxton 的 Switchee 和/或 IfElse。高级条件对性能来说很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:36:42.437

通常，您会[嵌入模板](http://expressionengine.com/user_guide/templates/embedding.html)或使用[片段](http://expressionengine.com/user_guide/templates/globals/snippets.html)来克服这一点。

对于我的解决方案，我有一个名为**global_embeds**的模板组，它用作我想重用的模板视图的容器。这可能是我的一般页面布局的页眉部分和页脚部分。

然后是一些更琐碎的东西的片段（如项目显示）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:51:38.767

```
{exp:channel:entries channel="news|artists|products"}

   ...shared content...

   {if channel_short_name == "news"}
       {my_custom_field_for_news}
   {if:elseif channel_short_name == "artists"}
       {my_custom_field_for_artists}
   {if:elseif channel_short_name == "products"}
       {my_custom_field_for_products}
   {/if}

   ...shared content...

{/exp:channel:entries} 
```

# mongodb - 在需要执行逻辑的集合中运行

> ID：10633060
> 
> 赞同：0
> 
> 时间：2012-05-17T09:32:03.630
> 
> 标签：mongodb

在 SQL 中，我们有一个创建表的方案脚本，该脚本具有一些逻辑，它将基于某些东西设置值，例如，我们根据环境设置一个 url 字段的商家表，即对于开发环境，它将设置为 dev.com，例如qa 环境将设置为 qa.com

我知道您可以使用 mongoimport 在集合数据中运行，但这仅适用于静态数据。您如何在需要执行一些逻辑以在集合中设置值的集合中运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:37:56.567

您可以[编写](http://www.mongodb.org/display/DOCS/Scripting+the+shell)像在[shell](http://www.mongodb.org/display/DOCS/mongo+-+The+Interactive+Shell)中一样执行的脚本。在那里，您可以根据需要处理您的操作。脚本使执行大量指令和逻辑变得更容易（当然你需要用 Javascript 编写）

# c# - 必须声明标量变量“@LoggedInUser”。尝试向 SqlDataSource 添加参数时出错

> ID：10633065
> 
> 赞同：4
> 
> 时间：2012-05-17T09:32:24.807
> 
> 标签：c#, sqldatasource

我正在使用 SqlDataSource 根据登录用户显示记录，

```
<asp:SqlDataSource ID="ModifyCustomerDataSource" SelectCommand="SELECT cApplicationNo,cFirstName,cMiddleName,cLastName,nTelNo,nMobileNo,cPanGirNo from Data_Customer_Log where cAddedBy=@LoggedInUser" ConnectionString="<%$ ConnectionStrings:CwizDataConnectionString %>"   runat="server"></asp:SqlDataSource> 
```

在页面加载中，我添加了如下参数

```
protected void Page_Load(object sender, EventArgs e)
        {
            string user = HttpContext.Current.User.Identity.Name;
            ModifyCustomerDataSource.SelectParameters.Clear();
            ModifyCustomerDataSource.SelectParameters.Add("@LoggedInUser", user.Trim());
        } 
```

但这给了我错误

```
Must declare the scalar variable "@LoggedInUser".
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.SqlClient.SqlException: Must declare the scalar variable "@LoggedInUser". 
```

谁能指出我哪里出错了。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T09:37:19.467

添加参数时不需要，`@`例如：

```
ModifyCustomerDataSource.SelectParameters.Add("LoggedInUser", user.Trim()); 
```

查询中的`@`符号表示以下文本是参数名称，但`@`不被视为参数名称的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:36:30.500

```
<asp:SqlDataSource ID="ModifyCustomerDataSource" SelectCommand="SELECT cApplicationNo,cFirstName,cMiddleName,cLastName,nTelNo,nMobileNo,cPanGirNo from Data_Customer_Log where cAddedBy=@LoggedInUser" ConnectionString="<%$ ConnectionStrings:CwizDataConnectionString %>"   runat="server">

        <SelectParameters>

            <asp:Parameter Name="LoggedInUser" />

        </SelectParameters>

</asp:SqlDataSource> 
```

验证您是否在 Sqldatasource 中定义了 SelectParameter 作为上述示例。

您可以通过两种方式设置参数的值：

```
ModifyCustomerDataSource.SelectParameters["LoggedInUser"].DefaultValue = "some value";

or

ModifyCustomerDataSource.SelectParameters.Add("@LoggedInUser", user.Trim()); //@is must here with the parameter name 
```

# php - 页面不接受登录信息

> ID：10633074
> 
> 赞同：0
> 
> 时间：2012-05-17T09:33:02.147
> 
> 标签：php, cakephp, login

我一直在创建一个简单的登录/注册页面。注册页面确实将信息传递到数据库中，但是当我尝试使用该信息登录时，页面不断出现无效的密码/用户名。我一直在关注 Andrew Perkins 教程（cakephp 2.0 auth），我的代码与他的相同。

--我的数据库用户是存储我所有数据的地方

-用户控制器

```
<?php

class UsersController extends AppController{

    function index(){
        $this->User->recursive = 0;
        $this->set('users', $this->User->find('all'));
        }

    public function beforeFilter(){
        parent::beforeFilter();
        $this->Auth->allow('add');
    }

    public function isAuthorize($user){
        if(in_array($this->action, array('edit',delete))){
        if($user['id'] !=$this->request->params['pass'][0]){
            return false;
        }
        }
        return true;
    }
    public function login(){
        if($this->request->is('post')){
            if($this->Auth->login()){
                $this->redirect($this->Auth->redirect());
            }else{
                $this->Session->setFlash('Your username/password was incorrect');

            }

        }
    }

    public function logout(){
    $this->redirect($this->Auth->logout());
    }

    function add(){
        $this->set('title_for_layout', 'Individual Registration');
        $this->set('stylesheet_used', 'style');
        $this->set('image_used', 'eBOXLogo.jpg');   
 if($this->request->is('post')){
 { $this->User->create(); 
 if ($this->User->save($this->request->data)) 
 { 
    $this->Session->setFlash('The user has been saved');  

 }
  else { $this->Session->setFlash('The user could not be saved. Please, try again.'); } 
  } 

  } 

  }
} 
```

-应用控制器

```
<?php

App::uses('Controller', 'Controller');

class AppController extends Controller {
    public $components = array(
        'Session', 
        'Auth'=>array(
            'longinRedirect'=>array('controller'=>'users', 'action'=>'index'),
            'longoutRedirect'=>array('controller'=>'users', 'action'=>'index'),
            'authError'=>"You can't access this page",
            'authorize'=>array('Controller')
        )
    );

    public function isAuthorized($user){
        return true;
    }

    public function beforeFilter(){
    $this->Auth->allow('index','view');
    $this->set('logged_in', $this->Auth->loggedIn());
    $this->set('current_user',$this->Auth->user());

    }

} 
```

-用户模块

```
<?php
class User extends AppModel {
    public $name = 'User';
    public $displayField = 'name';

    public $validate = array(
        'name'=>array(
            'Please enter your name.'=>array(
                'rule'=>'notEmpty',
                'message'=>'Please enter your name.'
            )
        ),
        'username'=>array(
            'The username must be between 5 and 15 characters.'=>array(
                'rule'=>array('between', 5, 15),
                'message'=>'The username must be between 5 and 15 characters.'
            ),
            'That username has already been taken'=>array(
                'rule'=>'isUnique',
                'message'=>'That username has already been taken.'
            )
        ),
        'email'=>array(
            'Valid email'=>array(
                'rule'=>array('email'),
                'message'=>'Please enter a valid email address'
            )
        ),
        'password'=>array(
            'Not empty'=>array(
                'rule'=>'notEmpty',
                'message'=>'Please enter your password'
            ),
            'Match passwords'=>array(
                'rule'=>'matchPasswords',
                'message'=>'Your passwords do not match'
            )
        ),
        'password_confirmation'=>array(
            'Not empty'=>array(
                'rule'=>'notEmpty',
                'message'=>'Please confirm your password'
            )
        )
    );

    public function matchPasswords($data) {
        if ($data['password'] == $this->data['User']['password_confirmation']) {
            return true;
        }
        $this->invalidate('password_confirmation', 'Your passwords do not match');
        return false;
    }

    public function beforeSave() {
        if (isset($this->data['User']['password'])) {
            $this->data['User']['password'] = AuthComponent::password($this->data['User']['password']);
        }
        return true;
    }
}
?> 
```

- 登录视图

```
<h2>Login</h2>
<?php
echo $this->Form->create();
echo $this->Form->input('username');
echo $this->Form->input('password');
echo $this->Form->end('Login');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:44:13.663

您在添加功能中有额外的括号......试试这个

```
if ($this->request->is('post')) {

    $this->User->create();

    if ($this->User->save($this->request->data)) {
        $this->Session->setFlash('The user has been saved');
    } else {
        $this->Session->setFlash('The user could not be saved. Please, try again.');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:53:39.020

数据库将其存储为 20 字符长的字符串，网站正在发送 40 字符长的字符串，它不会正确保存在数据库中。

使用 debugkit 插件，它工作

# css - 浏览器没有随着 div 宽度的增加而扩展

> ID：10633075
> 
> 赞同：1
> 
> 时间：2012-05-17T09:33:08.803
> 
> 标签：css, html, width

我在 div 中有一个菜单控件。最初我将 div 宽度设置为 100% 并将 min-width 设置为 1200px 以与浏览器宽度相同。菜单中的项目数量可能会根据将来的要求增加。我刚刚通过增加菜单中的项目来测试浏览器的行为，这里最后的项目正在下降。我在这里期待的是，当 div 宽度增加时，浏览器应该提供一个水平条，所以菜单中的所有项目都将显示在一行中。

CSS 代码：

`.maindiv{ position: relative;width: auto !important;width: 100%;min-width: 1200px;}`

我的菜单结构是

```
<div class="maindiv" >
   <ul><li></li></ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:14:07.980

您需要以下 CSS

```
.maindiv { 
    position: relative;
    width: 100%; 
    min-width: 1200px;
    overflow: auto;
    white-space: nowrap;
} 
```

我假设您已经将列表项显示为内联或内联块...

```
.maindiv li {
    display: inline-block;
} 
```

我的最后一个建议是你真的想要`min-width`- 如果人们在下面调整他们的浏览器大小，那么他们将在浏览器窗口上获得一个水平滚动条以及 div 上的滚动条，如果他们的项目多于适合的话。

# android - Android 在主 Activity 中获取 AsyncTask 的结果并将视图添加到 onCreate 方法之外的 XML 布局

> ID：10633076
> 
> 赞同：2
> 
> 时间：2012-05-17T09:33:08.930
> 
> 标签：android, android-layout, android-asynctask

我正在尝试获取`Youtube`要显示在我的`Activity`. 我`MediaActivity.java`用两个方法创建了主要活动，`onCreate`它们`getResult`是从类`onPostExecute`中的方法调用的`AsyncTask`。这是`MediaActivity`代码：

```
 public class MediaActivity extends Activity {
    YoutubeConnect youtubeRequest = new YoutubeConnect(); 
    ViewGroup media;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        youtubeRequest.execute();
        setContentView(R.layout.media);
        media = (ViewGroup) this.findViewById(R.layout.media);

    }

    public void getResult(String result) throws JSONException {

        JSONObject jsonObj = new JSONObject(result);

        JSONObject jsonObj2 = jsonObj.getJSONObject("feed");
        JSONArray the_json_array = jsonObj2.getJSONArray("entry");

        int size = the_json_array.length();

        for (int i = 0; i < size; i++) {

            //get all infos
               [...]
            LinearLayout main = new LinearLayout(this);
            main.setOrientation(0);
            main.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

            //thumb
            WebView thumb = new WebView(this);
            thumb.loadUrl(video_thumb);
            main.addView(thumb);

            LinearLayout right = new LinearLayout(this);
            right.setOrientation(1);
            right.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

            //title
            TextView title = new TextView(this);
            title.setText(video_title);
            right.addView(title);

            //description
            TextView description = new TextView(this);
            description.setText(video_description.substring(100)+"...");
            right.addView(description);

            //views
            TextView views = new TextView(this);
            views.setText("Views: "+video_views);
            right.addView(views);

            main.addView(right);                

            this.media.addView(main);
        }

     }      

} 
```

这是我的自定义`AsyncTask`类代码：

```
 public class YoutubeConnect extends AsyncTask<String, String, String> {

    public YoutubeConnect() {
    }

    @Override
    protected String doInBackground(String... params) {
         try {
             String APIurl = "https://gdata.youtube.com/feeds/api/videos?author=author&alt=json";
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpGet request = new HttpGet(APIurl);
                HttpResponse response = httpClient.execute(request);
                BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
                StringBuilder builder = new StringBuilder();
                for (String line = null; (line = reader.readLine()) != null;) {
                    builder.append(line).append("\n");
                }
                return builder.toString();

            } catch (Exception e) {
                return null;
            }

    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        MediaActivity mainthread = new MediaActivity();
        try {
            mainthread.getResult(result);
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

 } 
```

这是日志：

```
 05-17 11:01:26.383: E/AndroidRuntime(2687): FATAL EXCEPTION: main
05-17 11:01:26.383: E/AndroidRuntime(2687): java.lang.NullPointerException
05-17 11:01:26.383: E/AndroidRuntime(2687):     at android.content.ContextWrapper.getResources(ContextWrapper.java:81)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at android.view.View.<init>(View.java:2696)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at android.view.ViewGroup.<init>(ViewGroup.java:374)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at android.widget.LinearLayout.<init>(LinearLayout.java:166)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at wachipi.palio.MediaActivity.getResult(MediaActivity.java:47)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at wachipi.palio.YoutubeConnect.onPostExecute(YoutubeConnect.java:41)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at wachipi.palio.YoutubeConnect.onPostExecute(YoutubeConnect.java:1)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at android.os.AsyncTask.finish(AsyncTask.java:602)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at android.os.AsyncTask.access$600(AsyncTask.java:156)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at android.os.Looper.loop(Looper.java:137)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at java.lang.reflect.Method.invokeNative(Native Method)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at java.lang.reflect.Method.invoke(Method.java:511)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-17 11:01:26.383: E/AndroidRuntime(2687):     at dalvik.system.NativeStart.main(Native Method) 
```

在各种尝试之前，`setContenView`和`ViewGroup`线在`getResult`方法内部，但它给了我其他错误。我也尝试使用调试器，但它给了我错误`"source not found"`，我认为我的安装中缺少一些东西。我真的不明白为什么它会抛出这个错误并且找不到任何关于它的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T09:44:19.463

该异常可能来自您实例化一个新`MediaActivity`的而不是使用`Activity`您启动线程的实例：

```
MediaActivity mainthread = new MediaActivity();//don't do this 
```

`MediaActivity`而是在任务中传递您的引用`YoutubeConnect`并使用该引用调用`getResult`：

```
private MediaActivity activityRef;

public YoutubeConnect(MediaActivity activityRef) {
     this.activityRef = activityRef;
} 
```

并在`onPosteExecute`方法中：

```
@Override
protected void onPostExecute(String result) {
    try {
        activityRef.getResult(result); // you should have some ckecks to see if the activity is still available.
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

然后做一个新`YoutubeConnect`任务：

```
 YoutubeConnect youtubeRequest;
    ViewGroup media;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.media);
        youtubeRequest = new YoutubeConnect(this); 
        youtubeRequest.execute();
        media = (ViewGroup) this.findViewById(R.layout.media);
    } 
```

另外，有了这个：

```
media = (ViewGroup) this.findViewById(R.layout.media); 
```

您正在`View`通过布局文件名而不是`id`. 它应该是这样的：

```
media = (ViewGroup) this.findViewById(R.id.view_id_from_the_layout); 
```

# asp.net-mvc - asp.net mvc webgrid 更新选定的行（复选框）

> ID：10633080
> 
> 赞同：0
> 
> 时间：2012-05-17T09:33:20.553
> 
> 标签：asp.net-mvc, entity-framework, razor, asp.net-mvc-4, webgrid

我正在使用带有 EF 的 ASP.NET MVC 4。

我想在每一行的末尾添加 CheckBox。（这个复选框不在我的模型中）

```
grid.Column("Verified", format: @<text><input name="cbVerify" type="checkbox" value="@??"/></text>)
...
@Html.ActionLink("Verified", "Verified", "Items") 
```

以及我要更新所有选定记录的选定行

```
 [HttpPost]
    public ActionResult Edit(items items)
    {
        if (ModelState.IsValid)
        {
            db.items.Attach(items);
            items.status = 4 ; //verified
            items.date_verif = Datetime.Now;
            db.ObjectStateManager.ChangeObjectState(items, EntityState.Modified);
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(items);
    }
    public ActionResult Verified()
    {
        //var req = Request[""];??
        foreach(// selected rows)
        {
           //Edit(items); ?
        }
        return RedirectToAction("Index");
    } 
```

**问：**如何从一个按钮更新多个选定的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:26:58.937

您可以做的只是将值设置为您要更新的项目的 ID（或者如果您甚至没有该 ID，则为从 1 到行数的计数器），在视图中如下所示：

```
 @using (Html.BeginForm()) {
    <input type="checkbox" name="verify" value="1" />
    <input type="checkbox" name="verify" value="2" />

    <input type="submit" value="Submit" />
} 
```

然后在控制器发布操作中，只需获取一个（在我的情况下）整数数组，并根据问题的 ID 或行号是否发布在数组中。

所以 action 方法对我来说看起来像这样（但你显然会有其他参数，比如你的视图模型）：

```
 [HttpPost]
public ActionResult Index(int[] verify)
{
    return View();
} 
```

# jquery - Google Maps JavaScript API v3 动态信息窗口

> ID：10633097
> 
> 赞同：0
> 
> 时间：2012-05-17T09:34:13.360
> 
> 标签：jquery, google-maps, google-maps-api-3

我正在像这样动态添加标记：

```
var oldMarkers = null;
    return function(map, locations){
        //Clearing markers, if they exist
        if(oldMarkers && oldMarkers.length !== 0){
            for(var i = 0; i < oldMarkers.length; ++i){
                oldMarkers[i].setMap(null);
            }
        }
        //Adding new markers
        oldMarkers = [];
        for (var i = 0; i < locations.length; i++) {
            var newmarker = locations[i];
            var myLatLng = new google.maps.LatLng(newmarker[1], newmarker[2]);
            var marker = new google.maps.Marker({
               position: myLatLng,
               map: map,
               shape: shape,
               title: newmarker[0],
               zIndex: newmarker[3],
               clickable: true
            });
oldMarkers.push( marker );
 } 
```

基于 jQuery“点击”功能运行良好。我现在想做的是为每个标记添加一个信息窗口。好的，我有这个来自谷歌的代码，应该/确实在之前`oldMarkers.push( marker )`：

```
var j = i + 1;
marker.setTitle(j.toString());
attachSecretMessage(marker, j); 
```

这个功能：

```
function attachSecretMessage(marker, number) {
  var message = ["This","is","the","secret","message"];
  var infowindow = new google.maps.InfoWindow(
      { content: message[number],
        size: new google.maps.Size(50,50)
      });
  google.maps.event.addListener(marker, 'click', function() {
    infowindow.open(map,marker);
  });
} 
```

它有点工作，因为信息框出现了 2 个应该做的标记，但不是全部。这是我不明白的地方/地方：如果我有一个数组来制作这样的新标记（仅作为示例）：

```
var essentials = [
['Marker 1', 12.254181, 12.649962 , 9],
['Marker 2', 12.254181, 12.649962 , 9],
['Marker 3', 12.254181, 12.649962 , 9],
['Marker 4', 12.254181, 12.649962 , 9],
} 
```

我需要/想要做的是为信息窗口的内容添加一个数组键，有点像这样：

```
 var essentials = [
    ['Marker 1', 12.254181, 12.649962 , 9, 'Info Window content'] 
```

我如何传递`newmarker[4]`到信息窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:06:05.250

天哪，我在想！- 只需添加 `attachSecretMessage ( marker, newmarker[4] );`哎呀！正如所说的厚！对不起

# visual-studio-2010 - executenonquery 连接属性尚未初始化

> ID：10633099
> 
> 赞同：0
> 
> 时间：2012-05-17T09:34:21.820
> 
> 标签：visual-studio-2010

每次单击保存按钮时都会出现该错误。那是什么意思？

谢谢你的任何回应..这是我的代码。;;;

Private Sub ButtonSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) 处理 ButtonSave.Click If con.State = ConnectionState.Closed Then con.Open() End If

```
 cmd.CommandText = "INSERT INTO tablephotometry(pCode, lampcode, costumer, proddate, line/shift, watts, volts, filam, base, basepos, lumen, life, atm, fuse, exp, type, testcode, testvolt, datestart, timestart, LNWatts1, LNWatts2, LNWatts3, LNWatts4, LNWatts5, LNLumen1, LNLumen2, LNLumen3, LNLumen4, LNLumen5, LNLPW1, LNLPW2, LNLPW3, LNLPW4, LNLPW5, RLWatts1, RLWatts2, RLWatts3, RLWatts4, RLWatts5, RLLumen1, RLLumen2, RLLumen3, RLLumen4, RLLumen5, LPWF1, LPWF2, LPWF3, LPWF4, LPWF5, InspectionTime1, InspectionTime2, InspectionTime3, InspectionTime4, InspectionTime5, InspectionDate1, InspectionDate2, InspectionDate3, InspectionDate4, InspectionDate5, TH1, TH2, TH3, TH4, TH5, EL1, EL2, EL3, EL4, EL5, Dispo1, Dispo2, Dispo3, Dispo4, Dispo5, CF1, CF2, CF3, CF4, CF5, Reason1, Reason2, Reason3, Reason4, Reason5, TorqueTest, 0Hour, EndOfLife, PFCPTime1, PFCPTime2, PFCPTime3, PFCPTime4, PFCPTime5, PFCPDate1, PFCPDate2, PFCPDate3, PFCPDate4, PFCPDate5, LNAve1, LNAve2, LNAve3, LNAve4, LNAve5, LNAve6, LNAve7, LNAve8, LNAve9, LNAve10, LNAve11, LNAve12, LNAve13, LNsd1, LNsd2, LNsd3, LNsd4, LNsd5, LNsd6, LNsd7, LNsd8, LNsd9, LNsd10, LNsd11, LNsd12, LNsd13) " & _
    "VALUES( " & TextBoxPCode.Text & "','" & TextBoxLampCode.Text & "','" & TextBoxCostumer.Text & "','" _
     & TextBoxProdDate.Text & "','" & TextBoxLS.Text & "','" & TextBoxWatts.Text & "','" & TextBoxVolt.Text & "', '" _
     & TextBoxFilam.Text & "','" & TextBoxBase.Text & "','" & TextBoxBPos.Text & "','" & TextBoxLumen.Text & "','" _
     & TextBoxLife.Text & "','" & TextBoxAtm.Text & "','" & TextBoxFuse.Text & "','" & TextBoxEXPONENT.Text & "','" _
     & TextBoxSampleSize.Text & "','" & TextBoxType.Text & "','" & TextBoxTCode.Text & "','" & TextBoxTVolt.Text & "','" _
     & TextBoxDStart.Text & "','" & TextBoxTStart.Text & "','" & TextBoxLNWatts1.Text & "','" & TextBoxLNWatts2.Text & "','" _
     & TextBoxLNWatts3.Text & "','" & TextBoxLNWatts4.Text & "','" & TextBoxLNWatts5.Text & "','" & TextBoxLNLumen1.Text & "','" _
     & TextBoxLNLumen3.Text & "','" & TextBoxLNLumen4.Text & "','" & TextBoxLNLumen5.Text & "','" & TextBoxLNLPW1.Text & "','" _
     & TextBoxLNLPW2.Text & "','" & TextBoxLNLPW3.Text & "','" & TextBoxLNLPW4.Text & "','" & TextBoxLNLPW5.Text & "','" _
     & TextBoxRLWatts1.Text & "','" & TextBoxRLWatts2.Text & "','" & TextBoxRLWatts3.Text & "','" & TextBoxRLWatts4.Text & "','" _
     & TextBoxRLWatts5.Text & "','" & TextBoxRLLumen1.Text & "','" & TextBoxRLLumen2.Text & "','" & TextBoxRLLumen3.Text & "','" _
     & TextBoxRLLumen4.Text & "','" & TextBoxRLLumen5.Text & "','" & TextBoxLPWF1.Text & "','" & TextBoxLPWF2.Text & "','" _
     & TextBoxLPWF3.Text & "','" & TextBoxLPWF4.Text & "','" & TextBoxLPWF5.Text & "','" & TextBoxInspectionTime1.Text & "','" _
     & TextBoxInspectionTime2.Text & "','" & TextBoxInspectionTime3.Text & "','" & TextBoxInspectionTime4.Text & "','" & TextBoxInspectionTime5.Text & "','" _
     & TextBoxInspectionDate1.Text & "','" & TextBoxInspectionDate2.Text & "','" & TextBoxInspectionDate3.Text & "','" & TextBoxInspectionDate4.Text & "','" _
     & TextBoxInspectionDate5.Text & "','" & TextBoxTH1.Text & "','" & TextBoxTH2.Text & "','" & TextBoxTH3.Text & "','" _
     & TextBoxTH4.Text & "','" & TextBoxTH5.Text & "','" & TextBoxEL1.Text & "','" & TextBoxEL2.Text & "','" _
     & TextBoxEL3.Text & "','" & TextBoxEL4.Text & "','" & TextBoxEL5.Text & "','" & TextBoxDispo1.Text & "','" _
     & TextBoxDispo2.Text & "','" & TextBoxDispo3.Text & "','" & TextBoxDispo4.Text & "','" & TextBoxDispo5.Text & "','" _
     & TextBoxCF1.Text & "','" & TextBoxCF2.Text & "','" & TextBoxCF3.Text & "','" & TextBoxCF4.Text & "','" _
     & TextBoxCF5.Text & "','" & TextBoxReason1.Text & "','" & TextBoxReason2.Text & "','" & TextBoxReason3.Text & "','" _
     & TextBoxReason4.Text & "','" & TextBoxReason5.Text & "','" & TextBoxLNAve1.Text & "','" & TextBoxLNAve2.Text & "','" _
     & TextBoxLNAve3.Text & "','" & TextBoxLNAve4.Text & "','" & TextBoxLNAve5.Text & "','" & TextBoxLNAve6.Text & "','" _
     & TextBoxLNAve7.Text & "','" & TextBoxLNAve8.Text & "','" & TextBoxLNAve9.Text & "','" & TextBoxLNAve10.Text & "','" _
     & TextBoxLNAve11.Text & "','" & TextBoxLNAve12.Text & "','" & TextBoxLNAve13.Text & "','" & TextBoxLNsd1.Text & "','" _
     & TextBoxLNsd2.Text & "','" & TextBoxLNsd3.Text & "','" & TextBoxLNsd4.Text & "','" & TextBoxLNsd5.Text & "','" _
     & TextBoxLNsd6.Text & "','" & TextBoxLNsd7.Text & "','" & TextBoxLNsd8.Text & "','" & TextBoxLNsd9.Text & "','" _
     & TextBoxLNsd10.Text & "','" & TextBoxLNsd11.Text & "','" & TextBoxLNsd12.Text & "','" & TextBoxLNsd13.Text & "','" _
     & TextBoxTorqueTest.Text & "','" & TextBox0Hour.Text & "','" & TextBoxEndOfLife.Text & "','" & TextBoxPFCPDate1.Text & "','" _
     & TextBoxPFCPDate2.Text & "','" & TextBoxPFCPDate3.Text & "','" & TextBoxPFCPDate4.Text & "','" & TextBoxPFCPDate5.Text & "','" _
     & TextBoxPFCPTime1.Text & "','" & TextBoxPFCPTime2.Text & "','" & TextBoxPFCPTime3.Text & "','" & TextBoxPFCPTime4.Text & "','" _
     & TextBoxPFCPTime5.Text & "','" & TextBoxBatchNum.Text & "'," con)

    cmd.ExecuteNonQuery()*************************i always got an error in this part////
    MessageBox.Show("Data Succesfully Added!")
    con.Close()
    RefreshData()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:59:08.957

它没有给出任何具体的错误吗？你可能想给我们这个错误。

但是，您在第一个值参数中缺少单引号。

```
VALUES( " & TextBoxPCode.Text & "',' 
```

应该

```
VALUES( '" & TextBoxPCode.Text & "',' 
```

# php - 无法显示数据库中的文本

> ID：10633103
> 
> 赞同：-3
> 
> 时间：2012-05-17T09:34:46.177
> 
> 标签：php, database

我在我的网站上有一个新闻提要。您可以在 post.php 网站上发布新闻，当您发布新闻时，新闻就会出现在这个 news.php 上。代码如下所示：

```
<!DOCTYPE html>
<html lang='en'>
<head>
<style type="text/css">
element {
color: black;
}

body {
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-attachment: fixed;
background-image: url(bgn1.png);
background-repeat: no-repeat;
background-position: center top;
 }
.news {
font-family: Rough_Typewriter;
font-size: 36px;
 }
 </style>

 <meta charset="UTF-8">
 <title>iWrite</title>
 <meta name="view" content="width-device-width, initial-scale=1.0">
 <meta name="description" content="">
 <meta name="keywords" content="">

 <link href="css/bootstrap.css" rel="stylesheet">
 </head>

 <h1 class="news">iWrite</h1>
 <p>
 <hr>
  <p>
 <p>
    <p>
    <p>
  <p>
   <p>
  <p>
  <p>
   <p>
  <a href='post.php'>Want to post a text?</a>
  <?php

   //connect

   mysql_connect("myserver","username","password") or die(mysql_error());
    mysql_select_db("databasename") or die(mysql_error());

    //query the database
    $getnews = mysql_query("SELECT * FROM news ORDER BY id DESC") or die(mysql_query());

     while ($row = mysql_fetch_assoc($getnews))
     {

//get data
$id = $row['id'];
$title = $row['title'];
$body = $row['body'];
$date = $row['date'];

echo "
<b>$title posted on $date</b><br>
";

echo nl2br($body);

echo "<hr>
";

    }

    ?> 
```

但是当它在 index.html 网站上显示它时，它只是回显在 $date 上发布的 $title ......请帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:37:40.597

如果要嵌入要解析的 PHP 代码，则必须使用 PHP 文件扩展名。如果您需要使用 .html，请尝试`mod_rewrite`在您的 .htaccess 中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:38:42.047

你不应该在 PHP 中回显变量。让它们远离字符串

```
echo "<b>". $title ." posted on ". $date ."</b><br />" 
```

另外：这是不好的做法，`or die()`因为这会杀死脚本。改为使用适当的错误处理。

# sharepoint - Sharepoint 2010 无法在浏览器中打开 Word 文档

> ID：10633104
> 
> 赞同：0
> 
> 时间：2012-05-17T09:34:49.087
> 
> 标签：sharepoint, sharepoint-2010

我们安装并运行了 Sharepoint 2010（企业客户端访问）服务器。我尝试在上面上传一些文档，包括 Word 和 Excel。我在浏览器中打开 Excel 文档，它显示但功能区中缺少工具（仅文件和数据选项卡）。但我无法在浏览器中打开 Word 文档。我们是否必须在服务器上安装一些东西才能打开这些文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:38:03.153

您需要安装 Office Web Apps 才能使其正常工作。

# python - django 1.2 modelAdmin 继承类，错误“get_form() 恰好需要 3 个参数（给定 2 个）”

> ID：10633105
> 
> 赞同：0
> 
> 时间：2012-05-17T09:34:50.580
> 
> 标签：python, django, django-forms

我正在尝试构建一个管理面板，用户可以在其中使用一些规则填充数据库；对于某些实体/模型，每个用户只能查看和编辑自己的数据。

为此，我以这种方式继承了 modelAdmin 类

```
#my models

class Product(models.Model):
    name = models.CharField(max_length=80)
    description = models.TextField()
    author = models.ForeignKey(User)

    def __unicode__(self):
        return self.name

class Variant(models.Model):
    size = models.DecimalField(max_digits=3, decimal_places=0)
    author = models.ForeignKey(User)
    super_product = models.ForeignKey(Product)

    def __unicode__(self):
        return "%s %s" % (self.size)

#in urls.py

class FilterProduct(admin.ModelAdmin):
    def queryset(self, request):
        qs = super(FilterProduct, self).queryset(request)
        if request.user.is_superuser:
            return qs
        return qs.filter(author=request.user)

    def save_model(self, request, obj, form, change):
        if not request.user.is_superuser:
            obj.author = request.user

        obj.save()

class FilterVariant(admin.ModelAdmin):
    def queryset(self, request):
        qs = super(FilterVariant, self).queryset(request)
        if request.user.is_superuser:
            return qs
        return qs.filter(author=request.user)

    def save_model(self, request, obj, form, change):
        if not request.user.is_superuser:
            obj.author = request.user

        obj.save()

    def get_form(self, request, obj, **kwargs):
        form = super(FilerVariant,self).get_form(self,request, obj,**kwargs)

        if not request.user.is_superuser:
            form.base_fields['super_product'].queryset = form.base_fields['super_product'].queryset.filter(author=request.user)

        return form

admin.site.register(Product,FilterProduct)
admin.site.register(Variant,FilterVariant) 
```

当我尝试添加变体时，出现此错误

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/admin/prodotti/varianti/add/
Django Version: 1.2.3
Python Version: 2.6.6
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'prodotti',
 'django.contrib.admin']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/lib/pymodules/python2.6/django/core/handlers/base.py" in get_response
  100\.                     response = callback(request, *callback_args, **callback_kwargs)
File "/usr/lib/pymodules/python2.6/django/contrib/admin/options.py" in wrapper
  265\.                 return self.admin_site.admin_view(view)(*args, **kwargs)
File "/usr/lib/pymodules/python2.6/django/utils/decorators.py" in _wrapped_view
  76\.                     response = view_func(request, *args, **kwargs)
File "/usr/lib/pymodules/python2.6/django/views/decorators/cache.py" in _wrapped_view_func
  69\.         response = view_func(request, *args, **kwargs)
File "/usr/lib/pymodules/python2.6/django/contrib/admin/sites.py" in inner
  190\.             return view(request, *args, **kwargs)
File "/usr/lib/pymodules/python2.6/django/utils/decorators.py" in _wrapper
  21\.             return decorator(bound_func)(*args, **kwargs)
File "/usr/lib/pymodules/python2.6/django/utils/decorators.py" in _wrapped_view
  76\.                     response = view_func(request, *args, **kwargs)
File "/usr/lib/pymodules/python2.6/django/utils/decorators.py" in bound_func
  17\.                 return func(self, *args2, **kwargs2)
File "/usr/lib/pymodules/python2.6/django/db/transaction.py" in _commit_on_success
  299\.                     res = func(*args, **kw)
File "/usr/lib/pymodules/python2.6/django/contrib/admin/options.py" in add_view
  799\.         ModelForm = self.get_form(request)

Exception Type: TypeError at /admin/prodotti/varianti/add/
Exception Value: get_form() takes exactly 3 arguments (2 given) 
```

也许是一个愚蠢的问题，错误在哪里？我是否为函数提供了所有需要的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:47:29.060

这里有几个错误。

首先，该`get_form`方法的原始签名是`def get_form(self, request, obj=None, **kwargs)`- 也就是说，`obj`参数是可选的（这是有道理的，因为当您创建一个新项目时，没有现有对象）。然而，你已经用这个覆盖了它：`def get_form(self, request, obj, **kwargs)`- 即现在`obj`参数是必需的。

除非您可以完全控制如何调用您的方法 - 在这种情况下您没有，因为它是由管理员完成的 - 您应该确保您的方法至少可以接受与原始方法相同的参数.

您的第二个错误在下一行：

```
form = super(FilerVariant,self).get_form(self,request, obj,**kwargs) 
```

在这里，您复制了`self`参数 - 您不能在方法调用中显式传递它，因为它已经作为第一个参数传递。

最后，你绝对应该考虑升级——Django 1.2 是在两年前发布的，从那以后发生了很多变化。

# sql - 从远程表插入数据需要很长时间才能完成

> ID：10633107
> 
> 赞同：2
> 
> 时间：2012-05-17T09:34:52.387
> 
> 标签：sql, oracle, dblink

当我执行这个查询

```
Select * 
  from remote_tabe@my_db_Link 
 where Update_Date >= to_Date( sysdate - 1/24 ) 
```

它在 30 秒内返回大约 4000 行

但是当我执行插入语句时

```
Insert into my_table 
    select * 
      from remote_tabe@my_db_Link 
     where Update_Date >= to_Date( sysdate - 1/24 ) 
```

需要3个多小时！有人可以帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:48:14.393

两个查询的执行计划可能不同。你检查过，使用 DBMS_Xplan 吗？

# php - 运行 Yii 功能测试时打开 'SiteTest: Firefox.php' 失败

> ID：10633108
> 
> 赞同：4
> 
> 时间：2012-05-17T09:35:05.857
> 
> 标签：php, selenium, yii, phpunit

```
Warning: include(): Failed opening 'SiteTest: Firefox.php' for inclusion 
... \yii\framework\YiiBase.php on line 418 
```

Yii
v1.1.10 PHPUnit v3.6.10
PHPUnit_Selenium v​​ 1.2.6

我在尝试运行“使用 Yii 1.1 和 PHP5 进行敏捷 Web 开发”一书中的示例时遇到此错误，我觉得这句话有问题`SiteTest:`，它不应该存在。但是，我该如何解决这个问题？

**更新（已解决）：**
显然，问题不在于上面显示的警告，但接下来还有另一个错误。它说“curl_init()”是未定义的。我已经启用了 php_curl 扩展，但是 CLI 中的 PHP 没有使用与 apache 相同的 .ini 文件。因此，在我在 CLI 版本的 ini 中启用 php_curl 后，它现在可以正常工作（仍然发出警告，但测试正在运行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:12:11.827

这些警告的显示取决于 php.ini 设置：

```
error_reporting
display errors 
```

如果您不想显示此警告，则必须设置

```
error_reporting(E_ALL & ~E_WARNING | E_STRICT) 
```

或者

```
ini_set('display_errors','off'); 
```

WebTestCase.php 中的指令

并且不要关闭错误日志记录到文件以保存&&检查错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:10:37.813

有一些解决方法可以消除[Yii 框架论坛](http://www.yiiframework.com/forum/index.php/topic/30511-firefoxphp-faild-to-include-in-yiibase/)上的警告。

其中之一涉及编辑 PHPUnit 核心文件`Framework/TestSuite.php`以抑制警告：放在[Dmitriy K 发布的](http://www.yiiframework.com/forum/index.php/topic/30511-firefoxphp-faild-to-include-in-yiibase/page__p__148261#entry148261)`@`前面。`method_exists($this->name, 'setUpBeforeClass')`

另一种更便携，更合适。就是在phpunit.xml中注释浏览器行：

```
 <selenium>
    <!--        <browser name="Internet Explorer" browser="*iexplore" />-->
    <!--        <browser name="Firefox" browser="*firefox" />-->
    </selenium> 
```

并放入测试脚本：

```
 parent::setUp();
    $this->setBrowser('*iexplore');
    $this->setBrowserUrl(TEST_BASE_URL); 
```

[由 Vitalets 发表](http://www.yiiframework.com/forum/index.php/topic/30511-firefoxphp-faild-to-include-in-yiibase/page__p__149323#entry149323)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-31T09:26:58.537

我在尝试测试我的应用程序时遇到了同样的问题。

您应该下载并启动 selenium 服务器 [http://selenium.googlecode.com/files/selenium-server-standalone-2.22.0.jar](http://selenium.googlecode.com/files/selenium-server-standalone-2.22.0.jar)

警告将保留在那里，但测试将开始！

# vb.net-2010 - 安装应用程序 vb.net 时检查计算机规格和用户名

> ID：10633110
> 
> 赞同：0
> 
> 时间：2012-05-17T09:35:12.360
> 
> 标签：vb.net-2010

我有个问题

我正在制作一个 VB.NET 应用程序，我想让我的应用程序只在特定的计算机名或用户名中运行，所以当有人想在其他计算机上安装我的应用程序时，应用程序安装将被中止。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:05:43.777

您可以尝试环境类。

用户名：

```
Environment.UserName 
```

机器名称

```
Environment.MachineName 
```

用户可以轻松地操纵它。您应该基于 HWID，尽管他们仍然可以破解它:)

# python - 如何检测所有打开的文件处理程序以便关闭？

> ID：10633111
> 
> 赞同：0
> 
> 时间：2012-05-17T09:35:12.737
> 
> 标签：python, file-handling, ulimit

我想修补 python popen2，它试图通过在`[3, SC_OPEN_MAX]`.

这意味着，如果有人将使用上限`ulimit`增加到 1,000,000 之类的巨大值，它将使任何使用 popen 有效阻塞的 python 应用程序。

问题的重点是：如何获取进程的打开文件处理程序列表。该解决方案至少应该适用于 linux 和 Windows。

注意：这是为了重新修复[http://bugs.python.org/issue1663329](http://bugs.python.org/issue1663329)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:40:28.327

您的方法不适用于 Windows。实际上 windows 甚至没有可枚举的文件句柄。您的 for-loop 方法经常在 Unix 选择轮询循环中使用，但在 Windows 中却惨遭失败，因为套接字句柄通常 > 0x80000000。

而且，如果我没记错的话，文件句柄在linux中默认是通过exec调用关闭的，我认为在windows中也会发生类似的事情。您必须明确要求获得通过 exec 保持打开状态的句柄。

更新：

这可能很有趣[http://bugs.python.org/issue1663329](http://bugs.python.org/issue1663329)

直到现在我才注意到你在说 popen2 - 如果 python 足够新，你真的应该`subprocess`使用

# c# - 变量属性

> ID：10633119
> 
> 赞同：0
> 
> 时间：2012-05-17T09:36:07.720
> 
> 标签：c#

这两者是否相同：

```
private int x;
public int X
{
    get { return x; }
    set { x = value; }
} 
```

和

```
public int X
{
    get { return x; }
    set { x = value; }
} 
```

我的意思是使用第二种情况就足够了，还是有特殊情况我应该使用第一种情况？

因为我有时会看到第一种情况的代码，有时会看到第二种情况的代码，所以我很困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:40:46.633

第二个不会编译，因为**x**没有声明！如果您不想对**x**进行任何控制，那么您可以编写：

```
public int X { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:38:21.603

`x`如果当前定义范围内不存在，则不能使用第二种情况！

如果您在第二种情况下没有看到`x`任何地方的声明，那么它可能是某个父/基类中的受保护字段，尽管这*不太可能*。

还是您的意思是创建一个没有显式支持字段的[自动属性？](http://msdn.microsoft.com/en-us/library/bb384054.aspx)这种情况或第一种情况是通常发生的情况：

```
public int X { get; set; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T09:38:46.770

第二个片段是否成功编译。

以下在概念上相同

```
private int x;
public int X
{
    get { return x; }
    set { x = value; }
} 
```

和

```
public int X {get;set;} 
```

为什么在概念上相同：因为第二条语句将创建一个具有任意名称的支持 int 字段（不一定是 x）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T09:39:24.583

您的第二种情况无法编译 - 因为未定义“x”（小写）。

另一种选择是使用“自动属性”

```
public int X {get; set;} 
```

所有这一切都是让编译器在幕后自动生成一个支持字段，您无法直接访问该字段，但与您的第一个示例大致相同。

# iphone - 从 Facebook API iOS 的另一个视图控制器调用方法

> ID：10633120
> 
> 赞同：0
> 
> 时间：2012-05-17T09:36:12.983
> 
> 标签：iphone, ios, facebook, uiviewcontroller

我在一个外部视图控制器`APICallsViewController.m`中有这个方法，当用户触摸另一个视图控制器的按钮时我想调用它`MoreInfoCtrl.m`。我该怎么做呢？

我已经在`MorInfoViewController.m` `#import "APICallsViewController.h"`

这是为了将 Facebook API 集成到 iOS 应用程序中。

```
/*
 * Dialog: Request - send to a targeted friend.
 */
- (void)apiDialogRequestsSendTarget:(NSString *)friend {
    currentAPICall = kDialogRequestsSendToTarget;
    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"Learn how to make your iOS apps social.",  @"message",
                                   friend, @"to",
                                   nil];

    HackbookAppDelegate *delegate = (HackbookAppDelegate *)[[UIApplication sharedApplication] delegate];
    [[delegate facebook] dialog:@"apprequests"
                      andParams:params
                    andDelegate:self];
    NSLog(@"Request - send to a targeted friend");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:37:44.370

用于`NSNotification`添加观察者，然后在该按钮触摸时发布通知。

# c# - 我的会话将值存储在服务器上而不是客户端中？

> ID：10633127
> 
> 赞同：0
> 
> 时间：2012-05-17T09:36:33.093
> 
> 标签：c#, asp.net, vb.net, session, session-state

我面临着购物车中的一个大问题！

我用这种方式来制作我的购物车系统：

[单击此处查看示例](http://net.tutsplus.com/tutorials/other/build-a-shopping-cart-in-aspnet/)

当我将产品添加到购物车时，它会很好地添加它，但问题出在会话中，它将它存储在服务器中而不是客户端浏览器中。

因此，如果有人从另一台计算机访问该网站，他可以在他的浏览器上看到添加的产品，而它应该是空的。

有没有办法将它保存在客户端而不是服务器端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:55:16.223

将某种 id 存储在 cookie 中，然后当访问者返回站点时检查 cookie 以查看它是否存在以及它是否使用该 Id 从数据库中检索所需的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:03:05.357

如果我要买东西，我必须搬到另一台电脑上，我希望我的购物车也能在这台电脑上看到以前的产品，如果我不得不重新输入所有东西，我肯定会去别的地方买。 .

也就是说，您可以使用几种方法来实现您的目标。Cookies、导航器 LocalStorage，甚至是闪存插件。

我非常喜欢这个 javascript 库，它以一致的方式很好地处理了所有这些情况：

[http://pablotron.org/software/persist-js/](http://pablotron.org/software/persist-js/)

此致。

# java - Java - 将字符或字符串转换为形状/区域

> ID：10633129
> 
> 赞同：4
> 
> 时间：2012-05-17T09:36:45.033
> 
> 标签：java, string, graphics, shape, graphics2d

我希望能够将任何字符或字符串转换为形状或区域，以便我可以以我喜欢的任何大小、样式、效果等绘制该字符。

更具体地说，我将使用视差来绘制它，以便仅在某个角度清楚地定义它（这就是为什么我不能使用 html 或任何类似性质的东西）。我已经设置了视差，我只需要形状。

所以简而言之，`public Shape convert(char c){...}`.

或者，如果您能想到另一种实现此目的的方法，请告诉我。

* * *

只是给你一个粗略的想法：

![写在云端](../Images/c313acf6f32c7525aab2af37b9717767.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:50:48.173

根据[先前的答案](https://stackoverflow.com/questions/2466233/java-swing-converting-a-text-string-to-a-shape)，您似乎可以按如下方式进行管理（假设此方法是在 的子类上定义的`JPanel`）：

```
public Shape convert(char c) {
    Font f = getFont();
    // Optionally change font characteristics here
    // f = f.deriveFont(Font.BOLD, 70);

    FontRenderContext frc = getFontMetrics(f).getFontRenderContext();
    GlyphVector v = f.createGlyphVector(frc, new char[] { c });
    return v.getOutline();
} 
```

声明采用 String 参数的方法可能更容易，因为您可以将 String 作为第二个参数传递给`createGlyphVector()`- 另外，如果您需要执行多个操作，这可能比单独转换每个字符更有效。

# c# - 使用 SMTP 发送带有附件的邮件

> ID：10633137
> 
> 赞同：3
> 
> 时间：2012-05-17T09:37:18.360
> 
> 标签：c#, asp.net, smtp

```
protected void Button1_Click(object sender, EventArgs e)
{
    var fromAddress = new MailAddress(fromid.Text, fromname.Text);
    var toAddress = new MailAddress(toid.Text, toname.Text);
    string fromPassword = pswd.Text;
    string subject = subjectbox.Text;
     string body = bodybox.Text;
     Attachment at = new Attachment(Server.MapPath("~/Penguins.jpg"));

    var smtp = new SmtpClient
    {
        Host = "smtp.gmail.com",
        Port = 587,
        EnableSsl = true,
        DeliveryMethod = SmtpDeliveryMethod.Network,
        Credentials = new NetworkCredential(fromAddress.Address, fromPassword),
        Timeout = 20000,

    };
    using (var message = new MailMessage(fromAddress, toAddress)
    {
        Subject = subject,
        Body = body,
        IsBodyHtml = false,

    })
    {
        message.Attachments.Add(at);
        smtp.Send(message);
    }

} 
```

没有错误，但是在发送邮件时需要一些时间并显示“连接超时”并且不发送邮件...:(任何人都可以告诉问题出在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T08:28:02.063

为您的带有附件问题的 smtp 邮件尝试此代码

```
post.From = new MailAddress(From);
post.To.Add(To);
post.DeliveryNotificationOptions = DeliveryNotificationOptions.OnFailure;
post.Subject = Subject;
post.Body = Body;

var htmlView = AlternateView.CreateAlternateViewFromString(post.Body, null, "text/html");
post.AlternateViews.Add(htmlView);

if (attachments != null && attachments.Count > 0)
{
    foreach (var at in attachments)
    {
        post.Attachments.Add(at1);
    }
}

post.IsBodyHtml = true;

//if you have relay privilege you can use only host data; 
//var host = "Your SMTP Server IP Adress";
//var postman = new SmtpClient(host);

//you dont have relay privilege you must be use Network Credential
var postman = new SmtpClient("Host Server Name", Port);
NetworkCredential cred = new NetworkCredential(mail adress, password);
postman.UseDefaultCredentials = false;
postman.Credentials = cred;
postman.Send(post);
post.Dispose();
return true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:44:00.337

```
using System.Net;
using System.Net.Mail;
using System.Net.Mime;
using System.Net.Configuration;

 MailMessage message = new MailMessage(FromMailId, ToMaiId, "YourMessage");
 SmtpClient emailClient = new SmtpClient(mailsmtp.Trim());
 System.Net.NetworkCredential SMTPUserInfo = new System.Net.NetworkCredential(FromMailId,                                          
 FromMailIdpwd);
 emailClient.UseDefaultCredentials = false;
 emailClient.Credentials = SMTPUserInfo;
  emailClient.Send(message); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:55:27.790

我认为您的问题出在 Gmail smtp 服务器上。试试这个：

```
 MailMessage message = new MailMessage(new MailAddress(txtSenderMail.Text, txtSenderName.Text), new MailAddress(txtToAdd.Text);
                message.IsBodyHtml = true;
                message.Subject = txtSubject.Text;
                message.Body = txtMail.Text;
                message.Priority = MailPriority.High;
                SmtpClient smtp = new SmtpClient(YOUR SMTP ADDRESS, YOUR SMTP PORT);
                smtp.EnableSsl = false;
                smtp.UseDefaultCredentials = false; //you can use this line if you have your own SMTP server if not set it **True** (also you can get server address of your internet service company. like mine is: smtp.datak.ir  but it only works on your own computer not Web server. webservers could have SMTP too.) 
                smtp.Send(message); 
```

# ios - 如何自定义 UITabBarController 的标签栏？

> ID：10633139
> 
> 赞同：1
> 
> 时间：2012-05-17T09:37:19.970
> 
> 标签：ios, xcode, ipad, ios5

我有一个使用 UITabBarController 的 iPad 项目。我想自定义显示在底部的标签栏。我想创建等长的标签，这不是默认情况。如果您创建 3 个选项卡，则中间的一个会占用一点空间，而另外两个会占用很多空间。如何使这三个标签长度相等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:11:30.577

查看[JBTabBarConroller](https://github.com/jinthagerman/JBTabBarController)。它使您可以对显示的标签栏进行大量控制。您可以轻松自定义它以使距离相等。

# android - NullPointerException 使用 ShareActionProvider + actionbarsherlock

> ID：10633140
> 
> 赞同：1
> 
> 时间：2012-05-17T09:37:29.503
> 
> 标签：android, android-layout, actionbarsherlock

我正在尝试将 ShareActionProvider 与 actionbarsherlock 一起使用，但我得到了：

```
java.lang.NullPointerException
at com.iuculano.tvitaliane.Start.onCreateOptionsMenu(Start.java:387)
at com.actionbarsherlock.app.SherlockActivity.onCreatePanelMenu(SherlockActivity.java:167
at com.actionbarsherlock.ActionBarSherlock.callbackCreateOptionsMenu(ActionBarSherlock.java:542) 
```

onCreateOptionsMenu(Menu menu) 上的相关代码是这样的：

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
    // TODO Auto-generated method stub
    super.onCreateOptionsMenu(menu);
    MenuItem menuItem = menu.findItem(R.id.share);

    //MenuInflater blowUp = getSupportMenuInflater();
    //getSupportMenuInflater().inflate(R.menu.menuhome, menu);

    ShareActionProvider mShareActionProvider =  (ShareActionProvider) menuItem.getActionProvider();  //line 387

    Intent shareIntent = new Intent(Intent.ACTION_SEND);
    shareIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
    shareIntent.setType("text/plain");

    shareIntent.putExtra(Intent.EXTRA_TEXT, getString(R.string.sharesubject));
    shareIntent.putExtra(Intent.EXTRA_SUBJECT,getString(R.string.sharetext));

    mShareActionProvider.setShareIntent(shareIntent); 
```

menuhome.xml 有这个：

```
<item
    android:id="@+id/share"
    android:actionProviderClass="com.actionbarsherlock.widget.ShareActionProvider"
    android:enabled="true"
    android:showAsAction="ifRoom"
    android:visible="true">
</item> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T08:25:28.547

固定...我需要在调用 findItem 之前给菜单充气

# php - 使用explode仅显示一个实例关闭返回数组

> ID：10633146
> 
> 赞同：0
> 
> 时间：2012-05-17T09:37:47.883
> 
> 标签：php, explode

嗨，我正在运行以下代码。

```
foreach ($response as $object) {

$basename = basename($object);

$structure = explode("/", $object);

echo $structure[0] . '<br>';

} 
```

这将返回以下内容。

```
MINOFSOUDUB412
MINOFSOUDUB412
MINOFSOUDUB412
MotionTracker.zip
MotionTracker
MotionTracker
MotionTracker
MotionTracker
MotionTracker
MotionTracker
MotionTracker
MotionTracker
MotionTracker
MotionTracker
MotionTracker
MotionTracker
MotionTracker
MotionTracker
MotionTracker 
```

我只希望它返回一个唯一的名称，如下所示

```
MINOFSOUDUB412
MotionTracker.zip
MotionTracker 
```

有人可以帮我弄这个吗

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T09:44:52.760

`array_unique`将是正确的选择。只需将分解后的数组传递给这个函数，你就会得到你需要的。

你可以在这里查看：http: [//php.net/manual/en/function.array-unique.php](http://php.net/manual/en/function.array-unique.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T09:41:33.600

使用该值作为数组键，您将获得最佳性能：

```
$unique = array();
while (...) {
    $unique[$name] = true;
}
print_r(array_keys($unique); 
```

起初这似乎有点疯狂。毕竟，为什么要使用字符串作为数组键呢？

好吧：`$unique[$name]`是 O(1) （意味着无论数组有多大，它都需要相同的时间）而 in_array($name, $unique) 是 O(n) 意味着它随着数组中有多少条目而增长。

仅供参考，您的代码中的完整版本将是：

```
$unique = array();

foreach ($response as $object) {
    $basename = basename($object);
    $structure = explode("/", $object);
    $unique[$structure[0]] = true;
    //You could also do: $unique[$structure[0]] = $structure[0];
    //Then your second foreach could be:
    //foreach ($unique as $name)
}

foreach ($unique as $name => $fake) { echo $name . '<br>'; } 
```

O(n)（较慢的版本）将是：

```
$unique = array();
foreach ($response as $object) {
    $basename = basename($object);
    $structure = explode("/", $object);
    if (!in_array($structure[0], $unique)) {
        $unique[] = $structure[0];
    }
} 
```

较慢的版本速度较慢，但​​不熟悉 PHP 数组的人可能会发现它更易于阅读。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T10:15:04.277

```
foreach ($response as $object) {
    $basename = basename($object);
    $structure = explode("/", $object); 
    echo $structure[0] . '<br>';
    ...
} 
```

如果您想防止在 echo'ing out 中出现重复`$structure[0]`，您需要检查您是否已经拥有它，例如通过保留历史记录：

```
$history = array();
foreach ($response as $object) {
    $name = strstr($object, "/", true);
    if ($name !== false && !isset($history[$name])) {
        $history[$name] = 1;
        echo $name . '<br>';
    }
    ...
} 
```

您可能想要简化您的代码。我们来复习：

```
foreach ($response as $object) {

    $basename = basename($object);

    $structure = explode("/", $object);

    echo $structure[0] . '<br>';

} 
```

该线路`$basename = basename($object);`未使用。它可以被删除：

```
foreach ($response as $object) {

    $structure = explode("/", $object);

    echo $structure[0] . '<br>';

} 
```

然后你只需要字符串的一部分直到第一个`"/"`，这个`strstr`函数很方便：

```
foreach ($response as $object) {

    $part = strstr($object, "/", true);
    FALSE === $part && $part = $object;

    echo $part . '<br>';

} 
```

现在我们已经简化了很多，我们可以创建一个简单的映射函数：

```
$map = function($v) {
    $k = strstr($v, "/", true);
    FALSE === $k && $k = $v;
    return $k;
}; 
```

并映射`$response`：

```
$mapped = array_map($map, $response); 
```

然后独一无二：

```
$unique = array_unique($mapped); 
```

并完成了工作。代码更容易阅读：

```
$map = function($v) {
    $k = strstr($v, "/", true);
    FALSE === $k && $k = $v;
    return $k;
};

$mapped = array_map($map, $response);

$unique = array_unique($mapped);

foreach ($unique as $name) {
    echo $name, "<br>\n";
} 
```

额外的好处就在这里，在您关心输出的那一刻，要输出的数据已经井井有条并且可以正确使用。由于输出本身算作应用程序的一部分，因此不应将其与数据处理混为一谈。请参阅[IPO 模型](http://en.wikipedia.org/wiki/IPO_Model)。

# javascript - 在注册表单上设置限制

> ID：10633148
> 
> 赞同：0
> 
> 时间：2012-05-17T09:37:58.703
> 
> 标签：javascript, xml, xml-parsing

我有一个 asp 经典事件注册 jquery 表单。我想做的是在用户填写表格后在我的注册页面上显示一个可用的数字空间，例如“可用空间：20”，他们将收到一封电子邮件，并且我们有一个 XML 文件，该信息存储在那里。有没有办法用 JS、JQ 或 ASP 读取 XML 文件，并显示有多少可用的写在 xml 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:45:01.547

好吧，如果你想学习基础知识，那么你可以[在这里搜索，你也可以在](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&sqi=2&ved=0CFsQFjAC&url=http%3A%2F%2Fwww.w3schools.com%2Fxml%2Fxml_parser.asp&ei=vse0T6aoL9GGrAehhLiqDA&usg=AFQjCNGX91XKsNjBfmNt9otkl28DgENJmg&sig2=pUOKvldXcuWjZ7VlMtPI2g)[这里](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&sqi=2&ved=0CFsQFjAC&url=http%3A%2F%2Fwww.w3schools.com%2Fxml%2Fxml_parser.asp&ei=vse0T6aoL9GGrAehhLiqDA&usg=AFQjCNGX91XKsNjBfmNt9otkl28DgENJmg&sig2=pUOKvldXcuWjZ7VlMtPI2g) 找到一个工作示例

# asp.net-mvc - asp.net webapi 主干 fetch() 怪癖？

> ID：10633150
> 
> 赞同：0
> 
> 时间：2012-05-17T09:38:07.627
> 
> 标签：asp.net-mvc, backbone.js, httpresponse

我有一个使用 ASP.NET Web API 实现的服务点。它返回一个列表，一个`IEnumerable`嵌入在 .dto 中的 dto `HttpResponseMessage`。

但是，通过骨干集合获取实现的我的客户端代码总是以错误告终。在错误方法中，当我传递并观察参数时，我看到集合出现在`ResponseText`属性下。

虽然我直接通过`IEnumerable<dto>`而不用 包裹它`HttpResponseMessage`，但它工作正常。

我的问题：正确的方法是什么？如何让我的骨干集合引用内部`ResponseText`属性？

我尝试尝试获取单个模型，并覆盖 fetch 方法。

```
categories = new Categories({ url: 'http://localhost:6685/category' });

$.when(categories.fetch())
    .then(
        function() {
               app.init({ 'categories': categories, 'cart': cart });

               }); 
```

这不断给我模棱两可的错误。然后当我切换到

```
categories.fetch({
            success: function() {... },
            error: function(err) {

                console.log(err);
            }
        }); 
```

我可以在错误的类别列表中看到。属性名称是`responsetext`。

```
var Categories = Backbone.Collection.extend({

    model: Category,

    initialize: function (options) {
        this.url = options.url;
    },

    parse:function (response) {
        return response.categories;
    }, 
```

## 服务器端

```
HttpResponseMessage<IEnumerable<category>> httpresponse = null;

 var response= _catalogueservice.getcategories();

            if (response.success)
            {

                httpresponse =  new HttpResponseMessage<IEnumerable<category>>(response.categories, response.categories.Count()>0?HttpStatusCode.Found:HttpStatusCode.NotFound);
            }
            else
            {
                httpresponse = new HttpResponseMessage<IEnumerable<category>>( HttpStatusCode.NotFound);

            }

        return httpresponse; 
```

我可以在 fiddler 下看到 JSON 正在返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:45:15.337

始终让您的服务保持简单。当您发现大多数 api 用户仅仅因为您的方便而不得不使用另一个数据包装器时，您就陷入了噩梦。不管怎样，把它放在一边是你所要做的

```
var todos = Backbone.Collection.extend({
url:"todoapi/gettodos",
parse:function(response){
   return response.Todos
}
}); 
```

考虑到您的回复如下所示

```
{Error:"NULL",Todos:[{Id:1,Todo:"Welcome"},{Id:2,Todo:"Eat"...}]} 
```

# c - 无法使用 fopen(file, "r,ccs=UTF-8") 读取 UTF8 编码文件

> ID：10633157
> 
> 赞同：4
> 
> 时间：2012-05-17T09:38:18.763
> 
> 标签：c, windows, visual-studio, fopen

使用 fopen 打开文件时，我使用 ccs=encoding（如[MSDN](http://msdn.microsoft.com/en-us/library/yeby3zcb%28v=vs.80%29.aspx)中所述）将编码设置为 UTF-8。

写入文件时它工作正常

```
wchar_t* unicode_text = L"こんにちは";
FILE* f = fopen("C:\\test.txt", "w,ccs=UTF-8");
fwprintf(f, L"%s\n", unicode_text);
fclose(f); 
```

当我在文本编辑器中打开文件时，unicode 会按原样显示。但是当尝试从创建的文件中读取时，未检测到 UTF-8 编码：

```
wchar_t buffer[1000];
FILE* f = fopen("C:\\test.txt", "r,ccs=UTF-8");
fgetws(buffer, 1000, f);
fclose(f);

MessageBoxW(0, buffer, 0, 0); 
```

这将在消息框中显示“ï»¿ããã«ã¡ã¯”。

为什么会这样？ccs=UTF-8 仅在打开文件进行写入时有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:51:17.890

该文档暗示 UTF-8 编码仅可用于写作（强调我的）：

> 在 Visual C++ 2005 中，fopen 支持 Unicode 文件流。**在打开新文件**或**覆盖现有文件**时，可以将指定所需编码的标志传递给 fopen ，如下所示：

请注意，“读取现有文件”明显不存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T11:13:56.990

尝试这个

```
#include <locale.h>

setlocale(LC_ALL, "Japanese"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:06:09.380

参见[fgets,fgetws](http://msdn.microsoft.com/en-us/library/c37dh6kf%28v=vs.80%29.aspx)

> fgetws 根据流是以文本模式还是二进制模式打开，将宽字符参数 str 读取为多字节字符串或宽字符串，

如果你尝试“rb”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T19:31:33.513

这可能就像从文本中剥离 BOM 一样简单。看起来您的文本框中显示的前三个字符（“ï»¿”）是 UTF-8 文件的 BOM：

[http://en.wikipedia.org/wiki/Byte_order_mark#Representations_of_byte_order_marks_by_encoding](http://en.wikipedia.org/wiki/Byte_order_mark#Representations_of_byte_order_marks_by_encoding)

# ios - 更改 UITableview 中的链接 didSelectRowAtIndexPath

> ID：10633160
> 
> 赞同：0
> 
> 时间：2012-05-17T09:38:23.060
> 
> 标签：ios, didselectrowatindexpath

我有一个列出新闻项目的提要，单击其中一个，您将进入详细视图。我通过`didSelectRowAtIndexPath`声明详细视图控制器等的方法来做到这一点。

是否可以使用混合提要，其中一些链接将是视频，而其他链接将保持链接到详细视图。因此，如果用户点击视频链接，那么视频播放器就会启动，否则就照常营业，他们会进入另一个视图。

源是 JSON 提要，因此我需要根据读取其中一个 JSON 节点并查看文件结尾是另一个页面还是视频文件来切换目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:48:27.157

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{   

    if([YourOptiontype isEqual:@"video"])
    {
        // Push to Video View   
        }
    else if([YourOptiontype isEqual:@"business"])
    {
        // Push to business View    
    }

    NSIndexPath *tableSelection = [theTableView indexPathForSelectedRow];
    [theTableView deselectRowAtIndexPath:tableSelection animated:NO];
} 
```

# php - as3 php 变量

> ID：10633161
> 
> 赞同：1
> 
> 时间：2012-05-17T09:38:24.980
> 
> 标签：php, actionscript-3

as3代码：

```
public function exists(uid:String):void {
        request = new URLRequest("http://localhost/index.php");
        request.method = URLRequestMethod.POST;

        variables = new URLVariables();
        variables.uid = uid;
        request.data = variables;

        loader = new URLLoader();
        loader.dataFormat = URLLoaderDataFormat.VARIABLES;
        loader.addEventListener(Event.COMPLETE, urlLoader_existsHandler);
        loader.load(request);
    }

    protected function urlLoader_existsHandler(event:Event):void {
        trace(event);
        //var variables:URLVariables = URLLoader(event.target).data;
        //trace(variables);
        //trace(variables.success);
    } 
```

PHP输出是

成功=1®istration_id=1

错误是：

![错误图像](../Images/d2f9390b62b1502fa2aec9ff22dd161d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:29:47.227

使用 TEXT 格式而不是 VARIABLES

```
loader.dataFormat = URLLoaderDataFormat.TEXT; 
```

以下是相关文档：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html#dataFormat](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html#dataFormat)

# interface - WSDL 存储库

> ID：10633171
> 
> 赞同：1
> 
> 时间：2012-05-17T09:39:01.620
> 
> 标签：interface, wsdl, standards

我希望我的数据驱动的网络应用程序能够连接到广泛的消费者。是否有任何开放标准可以实施？

我没有考虑像 WSDL、SOAP、XML 等低级标准。如果我用 WSDL 定义自己的接口，它仍然需要任何想要连接的客户端进行自定义编程。

我正在寻找的是现成的 WSDL 文档，这些文档描述了一些客户端已经实现的一些标准，因此他们只需将客户端指向我的主机名并使用公开的功能。

目前我对任何类型的互操作性持开放态度——不同类型的看门狗、基于日历的服务、分析套装、基于地图的服务等。

**编辑：**

提出一个中肯的问题：*是否存在存储和维护互操作性标准的存储库？*（最好在 WSDL 中定义）。

# python - django密码加密背后的逻辑是什么

> ID：10633173
> 
> 赞同：1
> 
> 时间：2012-05-17T09:39:05.067
> 
> 标签：python, django, authentication, encryption, sha

我需要使用 sencha 作为客户端和 django 作为服务器来制作移动应用程序

我正在向服务器发送如下请求

```
url: 'http://localhost:8000/api/user/?format=jsonp',
                method: 'GET',
        headers : {'Authorization' : CryptoJS.HmacSHA256("password", "1154590211545902"),'Content-Type':'application/json;charset=utf-8'
         } 
```

我需要使用数据库中的密码查询**request.META.get('HTTP_AUTHORIZATION') 。**

**request.META.get('HTTP_AUTHORIZATION')**返回密码的加密值，如 ea121221rtrtrt7878237878787 这是不可逆的

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:05:18.067

*   Django 身份验证模块不会将密码作为纯文本存储在数据库中。
*   而是在密码上应用诸如“SHA1”之类的哈希算法并将其存储（作为哈希值）。
*   从哈希值中，您无法以纯文本形式获取密码。
*   您可以对给定的密码应用相同的散列算法并检查存储的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:49:32.147

假设您使用的是内置的身份验证框架，这是完整的文档：[Manually checks a user's password](https://docs.djangoproject.com/en/1.3/topics/auth/#manually-checking-a-user-s-password)。

# java - 为什么在struts2操作中使用验证时动态方法调用失败

> ID：10633174
> 
> 赞同：0
> 
> 时间：2012-05-17T09:39:05.387
> 
> 标签：java, struts2

我正在尝试在 strust2 s:select 标记中填充国家/地区列表 我的注册操作包含两种方法，即 execute() 和 populatecountry() execute() = 获取表单数据并放入数据库 populatecountry() = 在向用户显示表单之前填充从数据库中选择带有国家值的框。

我已经为此操作使用了验证。

```
 <action name="registration" 
            class="com.controller.Registration">
            <result name="success">pages/package.jsp</result>
            <result name="error">pages/registration.jsp</result>
            <result name="input">pages/registration.jsp</result>            
        </action>

        <action name="populateregistration" method="populate" 
            class="com.controller.Registration">
            <result name="populate">test.jsp</result>
            <result name="error">pages/error.jsp</result>

        </action> 
```

因此，当我点击 populateregisration 时，我收到错误，因为找不到**“输入”的映射**

那么有人可以告诉我应该如何填充我的选择框吗？

```
public String populate()
    {
        System.out.println("----I am in Registration populate method -----");
        return "populate";
    }
public String execute()
    {
    return SUCCESS;
    } 
```

样本方法

# jquery - Facebook api 正在打开两个弹出窗口

> ID：10633175
> 
> 赞同：1
> 
> 时间：2012-05-17T09:39:13.373
> 
> 标签：jquery, facebook

我正在使用 facebook api，但发生的情况是，当我单击**“使用 facebook 登录”**时，它会**打开两个弹出窗口而不是一个。**

就像**用户**已经**登录 facebook**一样，单击按钮会**打开一个弹出窗口，**并在几秒钟内通过**检查会话****返回**，我的**网站在这种情况下运行完美**，但**如果用户未登录**，在这种情况下***会出现两个弹出窗口***，现在当用户输入**正确的凭据**并在弹出的窗口中**按 Enter键时会发生什么，它会关闭，但由于****第二个（已经存在）窗口，**我的脚本不起作用，但我的**会话变量如何保存**使用用户**ID** ******************（实际上我想要什么）*，**（我知道这件事，因为当我在关闭不需要的弹出窗口后刷新我的网站索引页面时，我会正常进入我的个人资料页面）。*******************

 *****我也提到[了这个页面](https://stackoverflow.com/questions/7982358/facebook-fb-login-two-popups)来解决但没有用。请阐明仅打开一个弹出窗口。

我将此代码用作：

```
<script src="http://connect.facebook.net/en_US/all.js"></script>

<!-- Start of facebook login -->
<div id="fb-root"></div>
<fb:login-button size="large" id='login'">
      Login with Facebook
</fb:login-button>
<script>
  // initialize the library with the API key
  window.fbAsyncInit = function() {
      try{
        FB.init({
            apiKey      : 'API KEY',
            status      : true, 
            cookie      : true,
            xfbml       : true,
            oauth       : true
        }); 

        FB.getLoginStatus(function(response){
            loginHandler(); 
        });
      }catch(error){}
  };  
    function loginHandler(response,fail)
    {
        try{
            if(response && response.authResponse){
                FB.api('/me', function(response,fail) {

                    var email=response.email;
                    var firstName=response.first_name;
                    var lastName=response.last_name;
                    var gender=response.gender;
                    var dob=response.birthday;
                    var remainLogin=$('#remainLogin').val();

                    $('#login').attr("disabled", true);

                    $.ajax({
                        url: "loginViaFacebook",
                        type: "POST",
                        data: {email:email,firstName:firstName,lastName:lastName,gender:gender,dob:dob,remainLogin:remainLogin},
                        success: function (data) {

                            if (data.indexOf("true") != -1){ 
                                location.href = 'MainHome.jsp';
                            }
                            else 
                                jAlert('Email not registered ... ','Email not found',ERROR);

                            $('#login').attr("disabled", false);
                        },
                        error: function(xhr, ajaxOptions, thrownError){
                            if(xhr.status==404)//Wrong url
                                jAlert('Check the url','ERROR',ERROR);
                            else if(xhr.status==500)//Exception in server side coding
                                jAlert('Exception in server coding, check your email or try one more time','ERROR',ERROR);
                            else if(xhr.status==408)//timeout
                                jAlert('Server taking time to respond','ERROR',ERROR);
                            else 
                                jAlert('Some error occured ' + thrownError,'ERROR',ERROR);

                            $('#login').attr("disabled", false);
                        },
                        timeout : 5000
                    });

                });
            }
        }catch(error){alert(error);}
    }
    var popUp;
    $('#login').bind('click', function(response) {
        try{
            FB.login(loginHandler, {scope: 'email,user_birthday'});
        }catch(error){}
    });

    $('#logout').bind('click', function() {
        try{
            FB.logout(function(response){});
        }catch(error){}
      });

  </script>

<!-- End of facebook login --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:42:21.867

您在“window.fbAsyncInit”以及单击按钮时调用“loginHandler”，在您的 fbinit 方法中替换它并尝试

```
 FB.getLoginStatus(function(response){
  if (response.status === 'connected') {
           loginHandler();

        }             
   }); 
```*****

# ios - UIView 的循环子视图

> ID：10633180
> 
> 赞同：0
> 
> 时间：2012-05-17T09:39:26.007
> 
> 标签：ios, loops, subview

我正在 UIView 中创建一堆 STlater 类型的子视图（STlater 也是 UIView 类型）

并且有带有以下点击事件的 UIButton，我想循环遍历所有子视图并设置一些值，但它给出了 SIGABRT 错误。请帮忙。

`enter code here`

```
-(IBAction)nextClick:(id)sender
{
    for (STlater *stv in self.subviews) {
        //stv.lblTime.text=@"7:00";
        [stv setInitValues:@"hello"];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:48:06.300

我认为您应该检查*stv*是否是 STlater的实例，因为子视图中的 UIButton 实例可能没有*setInitValues:*方法。

```
for (STlater *stv in self.subviews) {
    if ( [stv isKindOfClass:[STLater class]] ) {
         [stv setInitValues:@"hello"];
    }
} 
```

# javascript - Javascript：IE8 中的全局变量行为

> ID：10633187
> 
> 赞同：4
> 
> 时间：2012-05-17T09:40:13.917
> 
> 标签：javascript, requirejs

我正在为我当前的项目使用 Require.js。

我曾经使用 require 变量加载 Require.js 配置，例如

```
require = {
  paths: {
    backbone: "libs/backbone-min",
    bootstrap: "libs/bootstrap.min",
    jquery: "libs/jquery-1.7.2.min",
    underscore: "libs/underscore-min",
    order: "plugins/order",
    text: "plugins/text",
    use: "plugins/use"
  }
};
<script src="http://local.gungroo.com/app/js/config.js"></script> 
```

这在所有浏览器中运行良好。

最近，我切换到 Coffescript，生成的代码类似于

```
(function() {
  window.require = {
    paths: {
      backbone: "libs/backbone-min",
      bootstrap: "libs/bootstrap.min",
      jquery: "libs/jquery-1.7.2.min",
      underscore: "libs/underscore-min",
      order: "plugins/order",
      text: "plugins/text",
      use: "plugins/use"
    }
  };

}).call(this); 
```

但第二个在 IE8 中中断。

IE8 对变量 'var require' 和 'window.require' 的处理方式不同吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T21:22:52.453

从关于[配置选项](http://requirejs.org/docs/api.html#config)的 requirejs 文档中：

> 注意：最好使用 var require = {} 而不要使用 window.require = {}，它在 IE 中将无法正常运行。

此问题已报告给 github 上的 requirejs[项目](https://github.com/jrburke/requirejs/issues/125)。问题报告者 (dtanabe) 提供了一些示例 html 和脚本来说明问题。我在[这里](http://jsfiddle.net/eric_brenden/H22cr/)创建了一个包含该示例代码的小提琴。请注意，对于 IE 9，它与其他浏览器（例如 Chrome、Firefox）的工作方式相同，但是当我将开发人员工具中的文档模式更改为 IE 8 时，问题就出现了。针对这个问题，jrburke（詹姆斯伯克）添加了我上面提到的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:49:02.103

在网络浏览器中：

```
window.require = 'herp';
// is equivalent to
require = 'derp'; 
```

`window`作为最高水平。

# ipv6 - 通过 ipv4 网络访问 ipv6 网站

> ID：10633188
> 
> 赞同：-1
> 
> 时间：2012-05-17T09:40:23.917
> 
> 标签：ipv6, ipv4

如果网站的服务器内部使用 IPv6 协议，那么普通的 IPv4 计算机如何访问该网站？我很好奇有哪些协议等可以实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:04:29.927

您需要支持 IPv4 和 IPv6 以及某种翻译或代理方式的中间框。不同协议之间的端到端通信是不可能的。

例如，如果 Web 服务器仅支持 IPv6，则具有 IPv4 和 IPv6 的外部反向（第 7 层）代理可以接受 IPv4 上的请求并将它们代理到 IPv6 服务器。您也可以使用在第 3 层执行[IP/ICMP 转换](https://www.rfc-editor.org/rfc/rfc6145)的盒子做类似的事情。

然后服务器的 IPv6 地址和反向代理或转换器的 IPv4 地址都应该在 DNS 中公布。

# c# - 在不使用浏览器控件的情况下从字符串获取 HtmlDocument

> ID：10633189
> 
> 赞同：2
> 
> 时间：2012-05-17T09:40:26.363
> 
> 标签：c#, browser, dom

我使用 WebClient 获取网页的 html 代码（作为字符串）。

但是我想把它变成一个 HtmlDocument 对象，这样我就可以使用这个类提供的 DOM 特性。目前我知道如何做到这一点的唯一方法是使用浏览器控件，如下所示：

```
 string pageHtml = client.DownloadString(url);

            browser.ScriptErrorsSuppressed = true;

            browser.DocumentText = pageHtml;

            do
            {
                Application.DoEvents();

            } while (browser.ReadyState != WebBrowserReadyState.Complete);

            return browser.Document; 
```

还有另一种方法吗？我知道还有其他可用的浏览器控件，但有更简单的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T09:41:57.233

您可以使用[HtmlAgilityPack](http://html-agility-pack.net/?z=codeplex) .... 例如：

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var results = doc.DocumentNode
    .Descendants("div")
    .Select(n => n.InnerText); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-30T19:30:11.550

我知道这是一篇旧帖子，但我的回复是为像我一样来到这里的其他人

如果您想使用代码 .NET 执行[此操作，您必须这样做](http://www.codewithasp.net/2015/10/get-htmldocument-from-string-in-c-sharp.html)

```
public System.Windows.Forms.HtmlDocument GetHtmlDocument(string html)
        {
            WebBrowser browser = new WebBrowser();
            browser.ScriptErrorsSuppressed = true;
            browser.DocumentText = html;
            browser.Document.OpenNew(true);
            browser.Document.Write(html);
            browser.Refresh();
            return browser.Document;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-16T15:38:47.527

我知道这是一个老话题，我的解决方案：

```
public static class HtmlHelpr{

        public static HtmlDocument HtmlDocumentFromFile(this string PathToHtml){
            using(WebBrowser wb = new WebBrowser()){            
                string s = File.ReadAllText(PathToHtml);
                wb.ScriptErrorsSuppressed = true;
                wb.DocumentText = s;
                var hd = wb.Document;
                hd.Write(s);
                return  hd;
            }
        }
    } 
```

# android - 有没有一种程序化的方式来确定我的应用是否已被评分？

> ID：10633198
> 
> 赞同：12
> 
> 时间：2012-05-17T09:41:16.353
> 
> 标签：android

在我的 android 应用程序中，我想显示一个对话框，要求用户在 Play 商店/市场上对我的应用程序进行评分。我只想在用户尚未评分的情况下这样做。请让我知道是否有办法这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:44:34.143

不，您不能访问市场活动。您可以在 Play 中查看评论。

# php - SQL-JOIN 错误 => 多个表中的相同列名

> ID：10633200
> 
> 赞同：1
> 
> 时间：2012-05-17T09:41:28.983
> 
> 标签：php, mysql, sql, mysql-error-1064

我在尝试为时间预订系统加入几张桌子时遇到了一些麻烦。

数据库如下所示：

## **数据库表：**

tbl_events

```
- int_eventID (INT)
- int_serviceID (INT)
- date_eventDueDate (DATETIME)
- date_eventCreationDate (DATETIME)
- int_userID (INT)
- int_customerID (INT)
- int_eventOnlineBooked (INT) 
```

tbl_customers

```
- int_customerID (INT)
>>> - int_userID (INT) <= this one gives me headache << 
- str_customerFirstName (VARCHAR)
- str_customerLastName (VARCHAR)
- str_customerEmail (VARCHAR)
- str_customerPassword (VARCHAR)
- str_customerCellPhone (VARCHAR)
- str_customerHomePhone (VARCHAR)
- str_customerAddress (VARCHAR) 
```

tbl_services

```
int_serviceID (INT)
str_serviceName (VARCHAR)
str_serviceDescription (VARCHAR)
int_servicePrice (INT)
int_serviceTimescale (TIME) 
```

tbl_users

```
int_userID   (INT)
str_userFirstName (VARCHAR)
str_userLastName (VARCHAR)
str_userEmail (VARCHAR)
str_userPassword (VARCHAR)
str_userCellPhone (VARCHAR) 
```

* * *

我的一切都按 SQL 查询的预期工作（见下文）。它为我提供了特定周内特定“用户”的所有事件。

## **SQL查询：**

```
SELECT  int_customerID as customerID,
    int_serviceID as serviceID,
    int_eventID as eventID,
    date_eventDueDate as eventDueDate,
    date_eventCreationDate as eventCreationDate,
    int_eventOnlineBooked as eventOnlineBooked,
    str_serviceName as serviceName,
    int_serviceTimescale as serviceTimescale,
    str_customerFirstName as customerFirstName,
    str_customerLastName as customerLastName,
    str_customerCellPhone as customerCellPhone,
    str_customerHomePhone as customerHomePhone
FROM tbl_events
JOIN tbl_services USING (int_serviceID)
JOIN tbl_customers USING (int_customerID)
WHERE
int_userID = 1 AND
YEARWEEK(date_eventDueDate,1) = 201219 
```

* * *

问题是，我在 tbl_customers 表中没有指定该客户属于哪个用户的列。当我将“int_userID”添加到 tbl_customers 时，SQL 停止工作并给了我错误消息：

```
<b>Warning</b>:  mysql_num_rows() expects parameter 1 to be resource, boolean given in     <b>/Library/WebServer/Documents/calendar/api/calender_getWeekGetEvents.php</b> on line <b>46</b><br /> 
```

第 46 行：

```
if(mysql_num_rows($result)) {
    while($event = mysql_fetch_assoc($result)) {
        $events[] = $event;
    }
} 
```

有任何想法吗？:)

谢谢/L

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:45:58.440

如果列名发生冲突，请尝试指定您尝试使用哪个表。

```
...
WHERE
tbl_Events.int_userID = 1 AND
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:47:55.943

在多个表中使用相同字段名的 JOIN 查询中，最好使用别名作为表名。

# eclipse - “绑定”和“激活”有什么区别

> ID：10633211
> 
> 赞同：1
> 
> 时间：2012-05-17T09:42:13.930
> 
> 标签：eclipse, osgi, declarative-services

我开始在 eclipse 中使用 OSGI。在声明式服务下，我发现一旦服务被激活，就会执行两种方法。即激活和绑定..这两者有什么区别？

如果我想在我的服务启动时执行某些操作，我应该把它放在Bind方法还是Activate方法中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:07:20.040

绑定方法用于将服务引用注入到组件实例中，即组件所依赖的服务。当组件满足时，激活方法（如果已声明）在激活过程的最后一步调用。

所以，我想你想在 activate 方法中编写你的操作，知道你所有的强制依赖项都已经解决了。

另请注意，声明式服务组件本身不是服务，但它可能提供服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:13:37.320

该`activate`方法在您的组件被激活时被调用。因此，这是执行任何初始化活动的好时机。`bind`为您的组件引用的每个服务调用一次方法。因此，如果您的组件具有对 的引用`LogService`，则您的`bind`方法 for`LogService`将被调用，每个`LogService`对象都绑定到您的组件。然后该方法可以将 存储`LogService`在一个字段中。

# php - 发送长 XMLHttpRequest 后导航到另一个页面

> ID：10633226
> 
> 赞同：0
> 
> 时间：2012-05-17T09:42:43.727
> 
> 标签：php, javascript, ajax, asynchronous, xmlhttprequest

我有一个 XMLHttpRequest 将大量数据插入 MySQL 数据库，需要 5-10 秒。这是请求的代码：

```
function sendRequest(url, params, divToChange)
{
   // code for IE7+, Firefox, Chrome, Opera, Safari
   if (window.XMLHttpRequest)
   {
       var httpRequest = new XMLHttpRequest();
   }      
   else // code for IE6, IE5
   {
       var httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
   }

   // Stage 3 - open the request and prepare variables for the PHP method being  
      activated on server side//
   httpRequest.open("POST", url, true); 

   //Set request headers for POST command//
   httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
   httpRequest.setRequestHeader("Content-length", params.length);
   httpRequest.setRequestHeader("Connection", "close");

   httpRequest.onreadystatechange=function()
   {
       if(httpRequest.readyState==3)
       {     
           document.getElementById(divToChange).innerHTML='please wait';
       }
       if(httpRequest.readyState==4 && httpRequest.status==200)
       {
           document.getElementById(divToChange).innerHTML=httpRequest.responseText;
       }
   }

   httpRequest.send(params); // Stage 4 - sending the request to the server//

   //end when the server will responde we will execute the        
   "document.getElementById("txtHint").innerHTML=xmlhttp.responseText;" //

}

//Calling the request with this function//
function createEventList() 
{   

   var url = "grid-update_event_list.php";
   var params = "firstLoad=1";

   //Create the httpRequest and send it to the server//
   sendRequest(url,params, "eventsList");  
} 
```

这是在我的 html 中定义的以获取响应文本：

```
<p>Events List Status: <b id='eventsList'>  </b></p> 
```

我无法理解浏览器中的两种行为：

1-“请稍候”文本永远不会显示在浏览器上。当我添加了一个`alert(httpRequest.readyState)`来测试正在发生的事情时，我得到了预期的“3”弹出窗口，但我在`readyState==3`它转到`readyState==4`. 似乎它们同时发生。我确实看到了在 of 中返回的`httpRequest.responseText;`文本`readyState==4`。

2-发送请求后我无法导航到另一个页面，当前页面是响应式的（我可以更改组合框）但是当我尝试导航到另一个链接时，浏览器等待到 readyState==4，然后它才会继续链接。我也无法理解，因为请求定义为`asynchronous = true`.

我做错了什么导致这两种行为吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:58:30.870

1.- 您需要了解 ajax 调用的就绪状态。有 5 种不同的就绪状态。有关更多信息，请查看此链接：

[就绪状态](http://www.w3schools.com/Ajax/ajax_xmlhttprequest_onreadystatechange.asp)

因此您可以使用不同的就绪状态（我会使用 1 或 2）在请求开始时显示对话框。否则，只需在发送 httpRequest 之前更改 div。

2.- 即使 ajax 调用是异步的，它们也是顺序的。也就是说，如果您发送请求，则在收到该请求的响应之前，您无法发送另一个请求。更改页面是另一个请求/响应周期，因此在收到第一个请求的响应之前，您将无法更改页面。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-18T00:02:52.960

我找到了这篇文章，真的很失望。我的意思是在 21 世纪，异步后台请求如何阻止整个浏览器进行导航？这只是没有意义，现在应该有人解决了这个问题。

事实证明，至少在我的情况下，它不是浏览器。浏览器确实对并发请求的数量有限制，通常在六个附近。但这可以防止恶意网页的 DoS 攻击。真正的问题是 PHP。

如果 PHP 使用默认的基于文件的会话系统，那么会话将被锁定，直到它被页面退出或调用 session_write_close() 关闭；

正在发生的事情是基本页面打开会话，做它的事情然后关闭，一切都很好而且干净。现在浏览器想要在页面的一部分中进行 AJAX 处理，并回调到提供基本页面的同一服务器，该服务器重新打开会话并保持打开状态，直到 AJAXing 完成。同时，页面的另一部分也希望从具有相同会话的同一服务器动态加载某些内容。PHP 说：“不，你必须等待。会话已经被那个人打开了。” 一旦第一个 AJAX 关闭会话，第二个 AJAX 就会通过并完成它的工作。现在假设第一个电话需要 15 分钟。第二次调用和使用同一会话对同一服务器的任何链接点击都将被阻止，直到完成之前的所有加载和点击以及其他内容。恶梦！它使您的页面看起来像被冻结并且您的 AJAX 调用正在按顺序执行。嗯，他们是，但不是因为浏览器或因为 XmlHttpRequest。

我们如何解决这个问题？最简单的方法是打了就跑。如果您的页面不需要在前几行代码之后读取或写入会话，那么一旦您获取数据，请调用 session_write_close()。这将解锁会话，其他人可以使用它。我正在猜测下一部分，但我认为它会起作用。如果您稍后需要写入会话，而不是将其保持打开状态，请将其关闭以便其他人可以使用它，然后保存您的会话 ID 并稍后使用 session_start($id) 重新打开它。

The harder way is to write your own session handler that doesn't lock. This is actually what I did. I have a Cassandra based session handler that does not lock. The down side is that I'm subject to "Last in wins" concurrency, but in my case only my base pages actually write into the session, my AJAX calls don't write anything in so it is not a problem. Can't clobber your data if you don't have a hammer.

Hope this helps, because while the original answer was helpful in fixing my problem, it is a complete misunderstanding of what is actually going on. Asynchronous XmlHttpRequests are not sequential.

# crystal-reports - 在水晶报表的列中显示数据

> ID：10633227
> 
> 赞同：0
> 
> 时间：2012-05-17T09:42:48.157
> 
> 标签：crystal-reports, report

我想以列模式显示水晶报表。我已成功从学生表中检索数据（使用存储过程）。但想以这种模式显示

**学生姓名 | 学生姓名**

第一个学生姓名 | 第二个学生姓名
第三个学生姓名 | 第四学生姓名

请告诉我我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:00:01.197

这可以通过几个步骤完成，这仅在您不需要为每个学生显示其他字段时才有效。

第 1 步 - 按要在两列上显示的名称对数据进行排序。

第 2 步 - 添加以下公式：

```
IF (NOT(OnLastRecord)) THEN
  {StudentName} + ", " + Next({StudentName})
ELSE
  "" 
```

第 3 步 - 将公式添加到详细信息部分。

第 4 步 - 进入部分专家并将详细部分的抑制公式设置为：

```
RecordNumber MOD 2 = 1 
```

# c++ - 模板类与类模板

> ID：10633228
> 
> 赞同：0
> 
> 时间：2012-05-17T09:43:06.987
> 
> 标签：c++, class, templates

> **可能重复：**
> [模板类和类模板有什么区别？](https://stackoverflow.com/questions/879535/what-is-the-difference-between-a-template-class-and-a-class-template)

我看到了[这个](https://stackoverflow.com/questions/879535/what-is-the-difference-between-a-template-class-and-a-class-template)问题，也看到了接受的答案。然后我用谷歌搜索了一下，在[这里找到了以下内容](http://technopark02.blogspot.com/2004_10_01_archive.html)

*模板类与类模板*

*模板类：在客户端提供所需信息之前不实例化的泛型定义或参数化类；普通模板的术语*

*类模板：类模板指定如何构造单个类，就像类指定如何构造单个对象一样；普通类的行话*

现在我很困惑哪一个是真的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:10:27.177

在 C++ 中，没有模板类之类的东西。只有类模板。

也就是说，从字面上看，是用于创建*类的**模板*。

 *`template <typename T> std::vector<T>`不是一个类，例如。它是一个模板，如果您提供适当`T`的 ，则可以从中生成一个类。

当然，人们常说“模板类”的意思是“类模板”，所以没有真正的区别。但形式上，一个存在于C++中，另一个不存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T11:16:50.763

在英语中，顺序通常是修饰符修饰的，因此*类模板*是定义类的模板，其中作为*模板类*是由模板定义的类——换句话说，类模板的实例化。在早期，一些文献使用了这种区别，但有一次，制定标准的人认为它可能会造成混淆，并决定系统地使用术语*实例*化来表示模板的实例化。因此，在标准的语言中，您永远不会看到“模板类”（除非不小心滑入）。（在更大的上下文中，“模板类”可能是指实现或控制某种“模板”的类。在我当前的应用程序中，`class Template {...};`， 例如。但是，这与 C++ 模板无关。）*

# php - All columns being set to the same value

> ID：10633229
> 
> 赞同：1
> 
> 时间：2012-05-17T09:43:07.487
> 
> 标签：php, mysql

I am totally lost as to what is wrong with my script. The JSON data is coming in correctly and the variables $i and $current are all what they should be at every stage in the forloop.

It seems to keep updating my database with the id, so in the case where id is 11, it will update all columns with the number 11.

Here is my script:

```
if($mode == 'SAVE_BUYING_ROW')
{   
    $JSON = (array)$JSON ;

    include('pdoconnect.php') ;
    $result = $dbh->prepare("UPDATE parts_trading_instructions
                 SET quantity = ?, supplierRef = ?, currencyRef = ?, 
                             net = ?, vat = ?, shippingNet = ?,
                 shippingVat = ?, direct = ?, ebayItemNumber = ?
                 WHERE id = ?") ;
    $i = 0 ;
    foreach($JSON as $current) {
        $current = (string)$current ;
        if($i == 0)
        {
            $i++ ;
            continue ;
        }

            $result->bindParam($i, $current, PDO::PARAM_STR) ;  
        $i++ ;
    }

$result->execute() ;

} 
```

Can anyone see where I am going wrong?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T09:45:46.127

Use [`bindValue`](http://us.php.net/manual/en/pdostatement.bindvalue.php) instead of [`bindParam`](http://us.php.net/manual/en/pdostatement.bindparam.php). `bindParam` takes a *reference* to a variable and only reads its value when executing the query. `bindValue` takes a *value* immediately.

# jgit - JGIT pull 错误：在配置中没有找到 key branch.master.merge 的值

> ID：10633230
> 
> 赞同：1
> 
> 时间：2012-05-17T09:43:16.987
> 
> 标签：jgit, tooltwist

使用 jgit，我正在 ToolTwist 控制器上编写代码，该控制器会自动将本地存储库同步（拉取和推送）到 github，但是在尝试调用拉取命令时出现此错误：

```
org.eclipse.jgit.api.errors.InvalidConfigurationException: No value for key branch.master.merge found in configuration 
```

记下 push 命令可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T19:37:48.550

我认为这是由不正确的初始化引起的。从下面的资源来看，您的分支的远程似乎没有设置（即在初始化时，您没有在您的 Repository/Git 对象上调用 setRemote(your_remote)）。

如果这不起作用，请查找目标提交，可能没有（例如，如果刚刚创建存储库）。

您将在此页面上找到更准确的答案：http: [//www.kernel.org/pub/software/scm/git/docs/v1.7.3/git-config.html](http://www.kernel.org/pub/software/scm/git/docs/v1.7.3/git-config.html)

`branch.<name>.merge`在此页面上搜索。

我希望它会帮助你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T15:25:16.960

我今天遇到了这个错误，这是由于第一个克隆是在裸存储库中完成的。如果克隆完成到已经提交的存储库中，.Pull 工作正常（我正在使用 NGit）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T07:05:18.753

您只需要设置此配置的值。

```
StoredConfig config = git.getRepository().getConfig();
config.setString("remote", "origin", "fetch", "+refs/*:refs/*");
config.save(); 
```

# java - Android以编程方式设置在xml文件中声明的按钮边距？

> ID：10633235
> 
> 赞同：2
> 
> 时间：2012-05-17T09:43:38.703
> 
> 标签：java, android

> **可能重复：**
> [以编程方式在 LinearLayout 中设置边距](https://stackoverflow.com/questions/2481455/set-margins-in-a-linearlayout-programmatically)

我的布局中有一堆小部件。我在布局文件中设置了 layout_marginTop 但我想在活动中调用这两个按钮并设置 layout_marginLeft 并以编程方式更改值。我尝试使用 getLayoutParams() 但无法设置边距。是否可以以编程方式更改在 xml 文件中声明的小部件的边距（在活动中调用布局之后）？

//oncreate方法

```
setContentView(R.layout.gamelayout); 
```

//xml布局

```
 <ImageView
        android:id="@+id/gameImage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
     >
    </ImageView>

    <Button
        android:id="@+id/lButton"
        android:layout_width="wrap_content"
        android:layout_height="140dip"
        android:layout_marginTop="10dip"
        android:layout_gravity="center_vertical|center_horizontal" />

    <Button
        android:id="@+id/rButton"
        android:layout_width="wrap_content"
        android:layout_height="140dip"
        android:layout_marginTop="10dip" 
        android:layout_gravity="center_vertical|center_horizontal" />

    <ImageView
        android:id="@+id/levelImage"
        android:layout_width="60dip"
        android:layout_height="60dip"
        android:layout_gravity="bottom|left"
        android:src="@drawable/ic_launcher" />

    <Button
        android:id="@+id/homeButton"
        android:layout_width="60dip"
        android:layout_height="60dip"
        android:layout_gravity="bottom|right"
        android:background="@drawable/home_btn" />
</FrameLayout> 
```

请帮我

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T10:26:03.457

Android 中的每个布局都有它自己的 general 子类`ViewGroup.LayoutParams`，您应该使用它来设置其中的小部件的布局参数。在您的情况下，它是`FrameLayout.LayoutParams`.

正如其他人提到的：

```
FrameLayout layout = (FrameLayout) findViewById(R.layout.frame_layout);
FrameLayout.LayoutParams params = new FrameLayout.LayoutParams( 
            FrameLayout.LayoutParams.FILL_PARENT, 
            FrameLayout.LayoutParams.WRAP_CONTENT); 
params.setMargins(30, 10, 0, 0); 
Button btn = (Button) findViewById(R.id.rbutton);
btn.setLayoutParams(params);
btn.requestLayout(); 
```

另请参阅以下文档`setMargins`：

> 需要调用 requestLayout() 以便考虑新的边距。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T09:51:24.363

尝试这样的事情：

```
 Button button = (Button)findViewById(R.id.widget111); 
 button.setText("foobar"); 
 FrameLayout.LayoutParams blp = new FrameLayout.LayoutParams(0, 0); 
 blp.leftMargin = 20; 
 blp.rightMargin= 30;
 button.setLayoutParams(blp); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T09:51:57.667

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
     LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);

params.setMargins(10, 20, 30, 40);

Button button = new Button(this);
button.setText("some text");
layout.addView(button, params); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T09:52:02.903

这个代码片段可以帮助你

```
LinearLayout ll = new LinearLayout(this);
ll.setOrientation(LinearLayout.VERTICAL);

LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
     LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);

layoutParams.setMargins(30, 20, 30, 0);

Button okButton=new Button(this);
okButton.setText("some text");
ll.addView(okButton, layoutParams); 
```

您必须在 LinearLayout.LayoutParams 对象上调用 setMargins()。

您只需将其调整为您的 FrameLayout

# sencha-touch - 在无线电场检查中调用事件

> ID：10633238
> 
> 赞同：1
> 
> 时间：2012-05-17T09:43:41.680
> 
> 标签：sencha-touch, extjs, sencha-touch-2, radio

我正在创建一个无线电场，我需要在检查无线电场时创建一个事件。

正在使用的代码是：

```
items : [ {
            xtype : 'toolbar',
            docked : 'top',
            //id:'popupTitle',
            title : 'Send options',
            height : 30
        }, {
            xtype : 'radiofield',
            //  ui:'plain',
            id : 'r1',
            name : 'sendDoc',
            value : 'Default',
            label : 'Default',
            labelWidth : '50%',
            checked : true,
            //baseCls: 'x-plain',

            listeners : {
                check : function() {
                    var rad = Ext.getCmp('r1');
                    if (rad.isChecked()) {
                    }
                }

            }
        }, 
        {
            xtype : 'radiofield',
            name : 'sendDoc',
            id : 'r2',
            value : 'Source Workstep',
            label : 'Source Workstep',
            labelWidth : '50%',
            listeners : {
                check : function() {
                    var rad2 = Ext.getCmp('r2');
                    if (rad2.isChecked())   {
                        //alert("hi");
                        if (!this.workstepOverlay) {
                        this.workstepOverlay = Ext.Viewport.add({
                            xtype : 'workstepOverlay'
                        });
                        this.workstepOverlay.show();
                    }

                    }

                }

            }
        } ] 
```

但这似乎不起作用。

我收到一条错误消息，提示“请求的键值不是对象”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:57:42.710

监听[检查](http://docs.sencha.com/touch/2-0/#!/api/Ext.field.Radio-event-check)事件。

> 当复选框被选中时触发。

```
...
listeners : { 
   check : function( radioFld, event, obj) {
         console.log(radioFld.isChecked());
   }
}
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:51:40.400

如果事件被触发，请尝试像这样访问您的无线电场：

```
check( radiofield, event, opts ){
    if(radiofield.isChecked()){

    }
} 
```

希望这可以帮助

# spring - Spring，JPA 事务仅适用于 JUnit 测试，但不适用于应用程序

> ID：10633240
> 
> 赞同：5
> 
> 时间：2012-05-17T09:43:47.220
> 
> 标签：spring, web-applications, transactions, junit, spring-data-jpa

我的交易有点问题。我将 Spring 3.1.1.RELEASE、Spring Data 1.0.3.RELEASE JPA 与 Hibernate 提供程序一起使用。当我开始一个 junit 测试时，在哪里用`@Transactional`它注释的方法似乎很好，但是当我启动整个应用程序时，没有错误，但事务不起作用。这是我的配置和示例代码：

应用程序上下文.xml

```
<context:annotation-config />
    <context:component-scan base-package="com.sheedo.upload" />
    <jpa:repositories base-package="com.sheedo.upload.repository" />
    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath*:messages/*.properties</value>
                <value>classpath*:*.properties</value>
            </list>
        </property>
    </bean>

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="persistenceUnit" />
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <bean id="dataSource" class="com.mysql.jdbc.jdbc2.optional.MysqlDataSource">
        <property name="url" value="${jdbc.url}" />
        <property name="user" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
    </bean> 
```

持久性.xml

```
<persistence-unit name="persistenceUnit" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLInnoDBDialect" />
        <property name="hibernate.hbm2ddl.auto" value="update" />
        <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy" />
        <property name="hibernate.connection.charSet" value="UTF-8" />
        <property name="hibernate.show_sql" value="true" />
    </properties>
</persistence-unit> 
```

用户存储库.java

> 公共接口 UserRepository 扩展 CrudRepository<User, Long>{ }

UserServiceImpl.java

```
@Service("userService")
public class UserServiceImpl implements UserService {

    @Autowired
    private UserRepository userRepository;

    @Override
    @Transactional
    public void addUser(String name, String surname) {
        User u = new User(name, surname);
        userRepository.save(u);
        throw new RuntimeException(); // to invoke a rollback
    }
} 
```

用户服务测试.java

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:/META-INF/spring/root-context.xml" })
public class UserServiceTest {

    Logger log = LoggerFactory.getLogger(getClass());

    @Autowired
    private UserService userService;

    @Test
    public void testUserAdd() {
        userService.addUser("John", "Doe");
    }

} 
```

在这种 JUnit 测试的情况下，尽管服务方法使用`@Transactional`. 当我将此注释添加到`testUserAdd()`方法时，我会在控制台中得到它：

```
2012-05-17 11:17:54,208 INFO [org.springframework.test.context.transaction.TransactionalTestExecutionListener] - Rolled back transaction after test execution for test context [[TestContext@23ae2a testClass = UserRepositoryTest, testInstance = com.sheedo.upload.repository.UserRepositoryTest@7f52c1, testMethod = testUserAdd@UserRepositoryTest, testException = java.lang.RuntimeException, mergedContextConfiguration = [MergedContextConfiguration@111fd28 testClass = UserRepositoryTest, locations = '{classpath:/META-INF/spring/root-context.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']]] 
```

我想这是正确的。那么，注释怎么可能`@Transactional`只在 Junit 测试类中有效，而在其他 spring bean 中无效呢？

我的理论是，它`SpringJUnit4ClassRunner`以某种方式提供了这种交易。我的 Spring 配置中是否有问题，即事务在我的应用程序中不起作用，而仅在 Junit 测试类中起作用？appContext 中缺少什么？

*编辑：* 日志：

```
2012-05-17 12:46:10,770 DEBUG [org.springframework.orm.jpa.JpaTransactionManager] - Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2012-05-17 12:46:10,770 DEBUG [org.springframework.orm.jpa.JpaTransactionManager] - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@e4080] for JPA transaction
2012-05-17 12:46:10,979 DEBUG [org.springframework.orm.jpa.JpaTransactionManager] - Not exposing JPA transaction [org.hibernate.ejb.EntityManagerImpl@e4080] as JDBC transaction because JpaDialect [org.springframework.orm.jpa.DefaultJpaDialect@1f87491] does not support JDBC Connection retrieval
Hibernate: insert into user (name, surname) values (?, ?)
2012-05-17 12:46:11,062 DEBUG [org.springframework.orm.jpa.JpaTransactionManager] - Initiating transaction commit
2012-05-17 12:46:11,062 DEBUG [org.springframework.orm.jpa.JpaTransactionManager] - Committing JPA transaction on EntityManager [org.hibernate.ejb.EntityManagerImpl@e4080]
2012-05-17 12:46:11,142 DEBUG [org.springframework.orm.jpa.JpaTransactionManager] - Closing JPA EntityManager [org.hibernate.ejb.EntityManagerImpl@e4080] after transaction
2012-05-17 12:46:11,142 DEBUG [org.springframework.orm.jpa.EntityManagerFactoryUtils] - Closing JPA EntityManager 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:04:07.933

我有完全相同的问题。另外，请阅读`<tx:annotation-driven/>`在我的 Web 配置中添加标签的解决方案（`spring-servlet.xml`，而不是`applicationContext.xml`），并为我工作。

但我不认为这是一个好的解决方案，所以我试图理解为什么会发生这种情况......

好吧，事实证明，`<context:component-scan>`我在我的标签`spring-servlet.xml`中也包含了`@Service`扫描中的类（`base-package`规范太笼统了）。这很奇怪，因为我有一个`include-filter`就地引用`@Controller`注释......但无论如何，似乎 Web 层的应用程序上下文是创建`@Service`实例的上下文，而不是创建的应用程序上下文 -`applicationContext.xml`这是定义业务层——因为前者没有启用事务性……我没有任何事务。

解决方案（好一个）：更好（更具体）`component-scan`的配置`spring-servlet.xml`

# jquery - 如何在不考虑浏览器高度的情况下删除滚动条

> ID：10633241
> 
> 赞同：0
> 
> 时间：2012-05-17T09:43:58.140
> 
> 标签：jquery, html, css

我正在设计一个网站，我不想在其中有任何垂直滚动条并使页面完全填满。该页面由其中的 div 和图像组成。我可以根据 div 的尺寸调整图像的大小。

我查看了 css 媒体查询，但我不能在这里使用范围，因为我必须使用精确的屏幕高度并适当地放置 div。这要怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:48:42.527

听起来您对如何做到这一点的想法比实际情况要复杂得多。:D 我一直坚持`overflow:hidden`通过 CSS 在`body`元素上声明以删除垂直滚动条。

# assembly - 汇编说明：按位运算符

> ID：10633243
> 
> 赞同：0
> 
> 时间：2012-05-17T09:44:03.070
> 
> 标签：assembly, bitwise-operators

这是供参考的代码：

```
 8048e3c:       55                      push   %ebp 
 8048e3d:       89 e5                   mov    %esp,%ebp
 8048e3f:       83 ec 28                sub    $0x28,%esp
 8048e42:       8d 45 f8                lea    0xfffffff8(%ebp),%eax
 8048e45:       89 44 24 0c             mov    %eax,0xc(%esp) 
 8048e49:       8d 45 fc                lea    0xfffffffc(%ebp),%eax
 8048e4c:       89 44 24 08             mov    %eax,0x8(%esp)
 8048e50:       c7 44 24 04 22 a3 04    movl   $0x804a322,0x4(%esp)
 8048e57:       08 
 8048e58:       8b 45 08                mov    0x8(%ebp),%eax
 8048e5b:       89 04 24                mov    %eax,(%esp)
 8048e5e:       e8 ad fc ff ff          call   8048b10 <sscanf@plt>
 8048e63:       83 f8 01                cmp    $0x1,%eax
 8048e66:       7f 05                   jg     8048e6d <level_2+0x31>
 8048e68:       e8 13 11 00 00          call   8049f80 <explode_bomb>
 8048e6d:       8b 45 f8                mov    0xfffffff8(%ebp),%eax
 8048e70:       8b 55 fc                mov    0xfffffffc(%ebp),%edx
 8048e73:       01 d0                   add    %edx,%eax
 8048e75:       3d 56 24 00 00          cmp    $0x2456,%eax
 8048e7a:       74 07                   je     8048e83 <level_2+0x47>
 8048e7c:       e8 ff 10 00 00          call   8049f80 <explode_bomb>
 8048e81:       eb 29                   jmp    8048eac <level_2+0x70>
 8048e83:       8b 55 fc                mov    0xfffffffc(%ebp),%edx
 8048e86:       8b 45 f8                mov    0xfffffff8(%ebp),%eax
 **8048e89:       09 d0                   or     %edx,%eax
 8048e8b:       25 00 01 00 00          and    $0x100,%eax
 8048e90:       85 c0                   test   %eax,%eax
 8048e92:       75 07                   jne    8048e9b <level_2+0x5f>**
 8048e94:       e8 e7 10 00 00          call   8049f80 <explode_bomb>
 8048e99:       eb 11                   jmp    8048eac <level_2+0x70>
 8048e9b:       8b 45 fc                mov    0xfffffffc(%ebp),%eax
 8048e9e:       8b 55 f8                mov    0xfffffff8(%ebp),%edx
 8048ea1:       31 d0                   xor    %edx,%eax
 8048ea3:       85 c0                   test   %eax,%eax
 8048ea5:       7e 05                   jle    8048eac <level_2+0x70>
 8048ea7:       e8 d4 10 00 00          call   8049f80 <explode_bomb>
 8048eac:       c9                      leave  
 8048ead:       c3                      ret 
```

基于此，我提出了适用于此代码的两个整数的三个规则。我不确定最后一个: `x+y = 9302`: `x|y != 256 & y`: `x^y <= 0` 我确定如何组合粗体的行。我将 0x100 转换为 256，因为命令 jne 跟随我使用！=。我不确定的部分是 & 或者我什至需要转换为 256 的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:06:54.603

您突出显示的行可以这样读取：

```
eax |= edx;
if( (eax & 256) == 0 ) {
  explode_bomb();
} 
```

# c++ - 无法遍历树 - 节点被重新遍历了很多次，但仍然是非周期性的

> ID：10633245
> 
> 赞同：0
> 
> 时间：2012-05-17T09:44:03.897
> 
> 标签：c++, tree

我决定认输。[这](http://ideone.com/T9Z32)是我的代码。它应该为单个块 512 位输入构建 SHA-2 算法的执行树，无需预处理。但是，我将其从 64 次迭代降低到 4 次迭代，因为遍历树从未完成 64 次迭代。即使在 4 次迭代中，它也会遍历 10,000 个节点——即使只分配了 1000 个节点，包括一堆常量，它们是叶子，甚至不计入遍历计数。此外，断言保证是非周期性的，如果它是周期性的，它就永远不会返回，不会永远等待然后返回。

我到底对这段代码做了什么，导致它需要永远遍历这么小的无周期树？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:17:14.630

嗯，这是可以预料的。树可能以非常紧凑的方式存储，但它有很多很多重复的部分。它非常大。

例如，考虑以下序列：

```
auto s0 = la.rotate(2) ^ la.rotate(13) ^ la.rotate(22); 
```

现在，`s0`树下面有三个原始`la`表达式。

```
auto t2 = s0 + maj; 
```

……那棵树进去了`t2`……

```
la = t1 + t2; 
```

...`la`最终在循环结束时再次出现。所以，`la`现在（至少）有三个对`la`上一次迭代树的引用。下一次迭代将再次将其重复三次。而且一遍又一遍。由此我们可以得出最终树中原始实例的 3^64 个实例的下限`la`（即使存储中仅存在一个实例）。3^64 是 3.43368382 × 10^30，即大约 3 亿。

树的生成采用简单的路线，只是重用子树。另一方面，遍历函数最终会多次遍历同一个子树。

# java - Glassfish端口统一导致Web服务部署异常

> ID：10633246
> 
> 赞同：6
> 
> 时间：2012-05-17T09:44:07.997
> 
> 标签：java, web-services, glassfish, ejb, ear

使用以下命令将端口统一应用到我的 glassfish 域后

```
asadmin create-protocol --securityenabled=false http-redirect
asadmin create-http-redirect --redirect-port 8181 --secure-redirect true http-redirect
asadmin create-protocol --securityenabled=false pu-protocol
asadmin create-protocol-finder --protocol pu-protocol --target-protocol http-listener-2 --classname com.sun.grizzly.config.HttpProtocolFinder http-finder
asadmin create-protocol-finder --protocol pu-protocol --target-protocol http-redirect --classname com.sun.grizzly.config.HttpProtocolFinder http-redirect
asadmin set configs.config.server-config.network-config.network-listeners.network-listener.http-listener-1.protocol=pu-protocol 
```

我无法部署包含多个 .war 和 ejb 的 .ear。其中一个包包含一个似乎导致部署异常的 Web 服务。

```
[#|2012-05-17T10:30:28.118+0100|SEVERE|glassfish3.1.2|javax.enterprise.system.core.com.sun.enterprise.v3.server|_ThreadID=96;_ThreadName=Thread-2;|org.glassfish.deployment.common.DeploymentException
    at org.glassfish.javaee.full.deployment.EarDeployer.prepare(EarDeployer.java:166)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:410)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:214)
    at org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:207)
    at org.glassfish.admin.rest.resources.TemplateListOfResource.createResource(TemplateListOfResource.java:148)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer._service(GrizzlyContainer.java:182)
    at com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer.service(GrizzlyContainer.java:147)
    at org.glassfish.admin.rest.adapter.RestAdapter.service(RestAdapter.java:148)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.RuntimeException
    at org.glassfish.webservices.WebServicesDeployer.prepare(WebServicesDeployer.java:193)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
    at org.glassfish.javaee.full.deployment.EarDeployer.prepareBundle(EarDeployer.java:290)
    at org.glassfish.javaee.full.deployment.EarDeployer.access$200(EarDeployer.java:86)
    at org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:141)
    at org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:138)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnBundles(EarDeployer.java:215)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnAllTypedBundles(EarDeployer.java:224)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnAllBundles(EarDeployer.java:250)
    at org.glassfish.javaee.full.deployment.EarDeployer.prepare(EarDeployer.java:138)
    ... 53 more
Caused by: java.lang.NullPointerException
    at com.sun.enterprise.deployment.WebServiceEndpoint.composeEndpointAddress(WebServiceEndpoint.java:698)
    at com.sun.enterprise.deployment.WebServiceEndpoint.composeEndpointAddress(WebServiceEndpoint.java:690)
    at com.sun.enterprise.deployment.WebServiceEndpoint.composeFinalWsdlUrl(WebServiceEndpoint.java:753)
    at org.glassfish.webservices.WebServicesDeployer.doWebServicesDeployment(WebServicesDeployer.java:634)
    at org.glassfish.webservices.WebServicesDeployer.prepare(WebServicesDeployer.java:184)
    ... 62 more
|#]

[#|2012-05-17T10:30:28.184+0100|SEVERE|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=96;_ThreadName=Thread-2;|Exception while preparing the app
java.lang.RuntimeException
    at org.glassfish.webservices.WebServicesDeployer.prepare(WebServicesDeployer.java:193)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
    at org.glassfish.javaee.full.deployment.EarDeployer.prepareBundle(EarDeployer.java:290)
    at org.glassfish.javaee.full.deployment.EarDeployer.access$200(EarDeployer.java:86)
    at org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:141)
    at org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:138)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnBundles(EarDeployer.java:215)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnAllTypedBundles(EarDeployer.java:224)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnAllBundles(EarDeployer.java:250)
    at org.glassfish.javaee.full.deployment.EarDeployer.prepare(EarDeployer.java:138)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:410)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:214)
    at org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:207)
    at org.glassfish.admin.rest.resources.TemplateListOfResource.createResource(TemplateListOfResource.java:148)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer._service(GrizzlyContainer.java:182)
    at com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer.service(GrizzlyContainer.java:147)
    at org.glassfish.admin.rest.adapter.RestAdapter.service(RestAdapter.java:148)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
    at com.sun.enterprise.deployment.WebServiceEndpoint.composeEndpointAddress(WebServiceEndpoint.java:698)
    at com.sun.enterprise.deployment.WebServiceEndpoint.composeEndpointAddress(WebServiceEndpoint.java:690)
    at com.sun.enterprise.deployment.WebServiceEndpoint.composeFinalWsdlUrl(WebServiceEndpoint.java:753)
    at org.glassfish.webservices.WebServicesDeployer.doWebServicesDeployment(WebServicesDeployer.java:634)
    at org.glassfish.webservices.WebServicesDeployer.prepare(WebServicesDeployer.java:184)
    ... 62 more
|#] 
```

这个包在没有端口统一的情况下部署得很好，所以似乎有什么东西在 glassfish 中引起了问题。有没有其他人遇到过这个或知道如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T21:27:02.377

最终结果证明这是因为试图部署一个不强制 Web 服务使用 SSL 的应用程序。

为了解决这个问题，我需要包含一个 glassfish-ejb-jar.xml（用于带有 Web 服务的***.war***文件）或一个 sun-ejb-jar.xml（用于带有 Web 服务的***ejb 模块***）。

**示例 glassfish-ejb-jar.xml**

```
<!DOCTYPE glassfish-ejb-jar PUBLIC "-//GlassFish.org//
DTD GlassFish Application Server 3.1 EJB 3.1//EN" 
"http://glassfish.org/dtds/glassfish-ejb-jar_3_1-1.dtd">
<glassfish-ejb-jar>
    <enterprise-beans>
        <ejb>
            <ejb-name>MyEJB</ejb-name>
            <webservice-endpoint>
                <port-component-name>MyWebService</port-component-name>
                <transport-guarantee>CONFIDENTIAL</transport-guarantee>
            </webservice-endpoint>
        </ejb>
    </enterprise-beans>
</glassfish-ejb-jar> 
```

**示例 sun-ejb-jar.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sun-ejb-jar PUBLIC '-//Sun Microsystems, Inc.//DTD 
Application Server 9.0 EJB 3.0//EN' 
'http://www.sun.com/software/appserver/dtds/sun-ejb-jar_3_0-0.dtd'>
<sun-ejb-jar>
    <enterprise-beans>
        <ejb>
            <ejb-name>MyEJB</ejb-name>
            <webservice-endpoint>
                <port-component-name>MyWebService</port-component-name>
                <transport-guarantee>CONFIDENTIAL</transport-guarantee>
            </webservice-endpoint>
        </ejb>
    </enterprise-beans>
</sun-ejb-jar> 
```

# iphone - iOS 支持哪些动画文件类型？

> ID：10633255
> 
> 赞同：2
> 
> 时间：2012-05-17T09:44:20.963
> 
> 标签：iphone, ios, animation

我只想在我的应用程序中添加一个动画文件。

我读过的大多数帖子都使用 UIImageViews 或多个图像的集合。我不想那样做。

我只想知道哪些动画文件格式适用于 iOS（我知道`.gif`但`.swf`不适用于 iOS）。

那么是否有任何其他文件格式可以在我的应用程序中使用，或者让我知道是否有任何其他框架可以使用动画文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:52:46.270

您可以使用 gif。你需要在里面显示`UIWebView`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:01:37.160

我们不能使用任何动画文件，例如 .gif、.swf，因为苹果不允许我们使用。如果您想为图像设置动画，就这样做。

```
 UIImageView* campFireView = [[UIImageView alloc] initWithFrame:self.view.frame];

   // load all the frames of our animation
   campFireView.animationImages = [NSArray arrayWithObjects:   
                             [UIImage imageNamed:@"campFire01.png"],
                             [UIImage imageNamed:@"campFire02.png"],
                             [UIImage imageNamed:@"campFire03.png"],
                             [UIImage imageNamed:@"campFire04.png"],
                             [UIImage imageNamed:@"campFire05.png"],
                             [UIImage imageNamed:@"campFire06.png"],
                             [UIImage imageNamed:@"campFire07.png"],
                             [UIImage imageNamed:@"campFire08.png"],
                             [UIImage imageNamed:@"campFire09.png"],
                             [UIImage imageNamed:@"campFire10.png"],
                             [UIImage imageNamed:@"campFire11.png"],
                             [UIImage imageNamed:@"campFire12.png"],
                             [UIImage imageNamed:@"campFire13.png"],
                             [UIImage imageNamed:@"campFire14.png"],
                             [UIImage imageNamed:@"campFire15.png"],
                             [UIImage imageNamed:@"campFire16.png"],
                             [UIImage imageNamed:@"campFire17.png"], nil];

 // all frames will execute in 1.75 seconds
 campFireView.animationDuration = 1.75;
 // repeat the annimation forever
 campFireView.animationRepeatCount = 0;
 // start animating
 [campFireView startAnimating];
 // add the animation view to the main window
 [self.view addSubview:campFireView]; 
```

或查看该链接 www.appsamuck.com/day2.html

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T09:59:07.060

默认情况下，GIF 不会在 UIImageView 中正确设置动画。但是，只要付出一点额外的努力，您就可以让它们发挥作用。

这个项目看起来最有前途，因为它似乎可以实际解码 gif 并为您显示个人帧。

[https://github.com/arturogutierrez/Animated-GIF-iPhone/](https://github.com/arturogutierrez/Animated-GIF-iPhone/)

否则，我看到的其他解决方案就是您提到的。（手动将gif分成多张图片）

[http://www.alterplay.com/ios-dev-tips/2010/12/making-gif-animating-on-ios.html](http://www.alterplay.com/ios-dev-tips/2010/12/making-gif-animating-on-ios.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T09:57:00.823

你可以使用 cocos2D 来制作这个动画。与 CCSpriteSheet 一起使用。

# jquery - Jquery Datatable Checkbox选中计数错误

> ID：10633258
> 
> 赞同：1
> 
> 时间：2012-05-17T09:44:24.303
> 
> 标签：jquery, checkbox, jquery-datatables

我正在使用数据表列出我网页中的项目。所有行都与一个复选框相关联。选中的复选框数量在单页中变得正确。如果我在第一页选中一个复选框，它会提醒计数 1，如果使用分页链接移动到第二页并在那里选中一个复选框..仍然显示计数为 1。为什么它不首先考虑选中的列页。我怎样才能在这个场景中获得计数 2？

# java - 我想根据属性值选择评论节点

> ID：10633259
> 
> 赞同：1
> 
> 时间：2012-05-17T09:44:27.793
> 
> 标签：java, xml, xpath

XML 节点

```
 <!-- url path="/jsp/Admin_BetaSignup.jsp" roles="ZohoCampaignAdmin" authentication="optional" description="Page used to add the Beta users">
        <param name="zuid" xss="throwerror" max-len="300"/>
</url --> 
```

我想通过 xpath 选择这个节点。我在 java 中使用下面的代码。

```
Document document = DocumentBuilderFactory.newInstance()
    .newDocumentBuilder()
    .parse("/home/local/ZOHOCORP/bharathi-1397/build/AdventNet/Sas/webapps/zcadmin/WEB-INF/security.xml");
XPath xpath = XPathFactory.newInstance().newXPath();
System.out.println(
    xpath.evaluate("//comment()[@path='/jsp/Admin_BetaSignup.jsp']",
    document,XPathConstants.NODE)
); 
```

输出：空。

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:49:39.413

评论不是元素节点，它不包含属性。所以你必须得到所有的评论节点，然后解析它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:55:23.963

**使用**：

```
//comment()[contains(., 'path="/jsp/Admin_BetaSignup.jsp"')] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "//comment()
         [contains(., 'path=&quot;/jsp/Admin_BetaSignup.jsp&quot;')]
    "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<!-- url path="/jsp/Admin_BetaSignup.jsp" roles="ZohoCampaignAdmin" authentication="optional" description="Page used to add the Beta users">         <param name="zuid" xss="throwerror" max-len="300"/> </url -->
<t>
 <!-- Another comment -->
</t> 
```

**选择想要的评论节点并将其复制到输出：**

```
<!-- url path="/jsp/Admin_BetaSignup.jsp" roles="ZohoCampaignAdmin" authentication="optional" description="Page used to add the Beta users">         <param name="zuid" xss="throwerror" max-len="300"/> </url --> 
```

# java - 休眠 hbm2ddl.auto 默认值

> ID：10633263
> 
> 赞同：33
> 
> 时间：2012-05-17T09:44:35.680
> 
> 标签：java, mysql, database, hibernate

什么是默认值

```
hibernate.hbm2ddl.auto 
```

在hibernate cfg文件映射中

是否可以删除

```
<property name="hibernate.hbm2ddl.auto">update</property> 
```

这个来自配置文件的映射

如果我删除此属性是否会影响我的数据库

？？？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-17T11:38:03.770

这就是答案：当您从配置中省略设置时，不会发生*验证**、*更新、*创建*和*删除。*hibernate 源代码是关于 Hibernate 的最佳文档：

```
// from org.hibernate.cfg.SettingsFactory line 332 (hibernate-core-3.6.7)      
String autoSchemaExport = properties.getProperty(Environment.HBM2DDL_AUTO);
if ( "validate".equals(autoSchemaExport) ) settings.setAutoValidateSchema(true);
if ( "update".equals(autoSchemaExport) ) settings.setAutoUpdateSchema(true);
if ( "create".equals(autoSchemaExport) ) settings.setAutoCreateSchema(true);
if ( "create-drop".equals(autoSchemaExport) ) {
  settings.setAutoCreateSchema(true);
  settings.setAutoDropSchema(true);
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-17T09:51:39.167

只是省略 hibernate.hbm2ddl.auto 默认为 Hibernate 不做任何事情。

已经问过 SO 。[关联](https://stackoverflow.com/questions/3179765/how-to-turn-off-hbm2ddl)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-17T10:00:19.303

创建 SessionFactory 时自动验证模式 DDL 或将其导出到数据库。使用 create-drop，当 SessionFactory 显式关闭时，数据库模式将被删除。

```
validate | update | create | create-drop 
```

*   验证现有模式
*   更新 - 仅在创建后更新您的架构
*   create - 每次都创建模式

# java - 如何编写我的应用程序以接收来自其他应用程序的内容

> ID：10633264
> 
> 赞同：-1
> 
> 时间：2012-05-17T09:44:35.993
> 
> 标签：java, android, android-contentprovider

我按照**Android Developers的**[本教程](http://home.cofares.net/androidDocs/training/sharing/receive.html)编写我的应用程序以接收从其他应用程序发送的文本（特别是处理从浏览器共享发送的文本）。

 **我希望共享文本出现在我的应用程序的 EditText 框中（因为它会在调用 Messaging 进行共享时自动出现在 New Message 的正文中）。

这是我所做的：

```
Intent intent = getIntent();
    String action = intent.getAction();
    String type = intent.getType();

    if (Intent.ACTION_SEND.equals(action) && type != null) {
        if ("text/plain".equals(type)) {
            handleSendText(intent); // Handle text being sent
        } 
    } 
    else {
        // Handle other intents, such as being started from the home screen
    } 
```

* * *

```
void handleSendText(Intent intent) {
    String sharedText = intent.getStringExtra(Intent.EXTRA_TEXT);
    if (sharedText != null) {
        this.edWord.setText(sharedText);

    }
} 
```

我已经`private EditText edWord = null;`根据需要声明并更新了 Manifest。但是，Eclipse 总是抛出以下错误：

```
05-17 16:32:08.239: E/AndroidRuntime(1507): FATAL EXCEPTION: main
05-17 16:32:08.239: E/AndroidRuntime(1507): java.lang.RuntimeException: Unable to start activity ComponentInfo{doyle.myapp/doyle.myapp.Myapp}: java.lang.NullPointerException
05-17 16:32:08.239: E/AndroidRuntime(1507):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-17 16:32:08.239: E/AndroidRuntime(1507):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-17 16:32:08.239: E/AndroidRuntime(1507):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-17 16:32:08.239: E/AndroidRuntime(1507):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-17 16:32:08.239: E/AndroidRuntime(1507):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-17 16:32:08.239: E/AndroidRuntime(1507):     at android.os.Looper.loop(Looper.java:137)
05-17 16:32:08.239: E/AndroidRuntime(1507):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-17 16:32:08.239: E/AndroidRuntime(1507):     at java.lang.reflect.Method.invokeNative(Native Method)
05-17 16:32:08.239: E/AndroidRuntime(1507):     at java.lang.reflect.Method.invoke(Method.java:511)
05-17 16:32:08.239: E/AndroidRuntime(1507):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-17 16:32:08.239: E/AndroidRuntime(1507):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-17 16:32:08.239: E/AndroidRuntime(1507):     at dalvik.system.NativeStart.main(Native Method)
05-17 16:32:08.239: E/AndroidRuntime(1507): Caused by: java.lang.NullPointerException
05-17 16:32:08.239: E/AndroidRuntime(1507):     at doyle.myapp.Myapp.handleSendText(Myapp.java:573)
05-17 16:32:08.239: E/AndroidRuntime(1507):     at doyle.myapp.Myapp.onCreate(Myapp.java:437)
05-17 16:32:08.239: E/AndroidRuntime(1507):     at android.app.Activity.performCreate(Activity.java:4465)
05-17 16:32:08.239: E/AndroidRuntime(1507):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-17 16:32:08.239: E/AndroidRuntime(1507):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-17 16:32:08.239: E/AndroidRuntime(1507):     ... 11 more 
```

**我想知道我的代码有什么问题。我应该怎么做才能解决问题？你能帮忙吗？**

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:51:27.543

您是否尝试过调试并查看 的值`sharedText`？

***更新***

刚注意到你说

> 我已经声明了私有 EditText edWord = null;并根据需要更新了 Manifest。

如果您不创建新视图或扩展 xml 布局视图，则 EditText 将不会连接到任何东西。尝试做这样的事情：

```
edWord = (EditText) findViewById(R.id.edText); 
```

或在您的上下文中创建一个新的编辑文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:52:13.867

您是否通过 findViewById 初始化 edWord 请检查它是否为空？**

# javascript - 使用 jQUery 的 HTML 表头样式

> ID：10633265
> 
> 赞同：0
> 
> 时间：2012-05-17T09:44:36.220
> 
> 标签：javascript, jquery

我有一张如下表。我只需要为第一个标题列提供背景颜色（黄色）。此外，标题中的所有文本颜色都应为蓝色（对于两列）。使用 jQuery 实现它的方法是什么？

注意：我正在尝试学习 jQuery。因此解决方案应该使用 jQuery。

```
 <table id = "myTable">
        <thead>
            <tr>
                <th>
                     <a href="http://www.Lijo.com">Name</a>
                </th>
                <th>
                    Address
                </th>
            </tr>
        </thead>
        <tr>
            <td>
                Lijo
            </td>
            <td>
                India
            </td>
        </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:46:15.660

Hiya**演示** [http://jsfiddle.net/r3jMv/1/](http://jsfiddle.net/r3jMv/1/)（更新）（旧 =>）[http://jsfiddle.net/Zarhu/2/](http://jsfiddle.net/Zarhu/2/)

并在此处使用蓝色： http: [//jsfiddle.net/r3jMv/6/](http://jsfiddle.net/r3jMv/6/)下面评论的另一个更新版本：http: [//jsfiddle.net/cC6hk/](http://jsfiddle.net/cC6hk/)

以下应该可以解决问题。

这可能是一个很好的游乐场：http: [//vkanakaraj.wordpress.com/2009/06/18/select-a-column-of-a-table-using-jquery/](http://vkanakaraj.wordpress.com/2009/06/18/select-a-column-of-a-table-using-jquery/)

**jQuery代码**

```
$(function(){
  // Change first column background color.

  $("table thead tr th:first-child").css("background-color","#ff0000");
}); 
```

​</p>

```
$("#myTable > thead > tr >th").css("background-color","yellow");​ 
```

**html**

```
<table id = "myTable">
        <thead>
            <tr>
                <th>
                    Name
                </th>
                <th>
                    Address
                </th>
            </tr>
        </thead>
        <tr>
            <td>
                Lijo
            </td>
            <td>
                India
            </td>
        </tr>
    </table>
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:47:20.953

您可以像这样选择第一个标题列：

```
var firstColumnHeader = $('#myTable thead th:first-child'); 
```

然后您可以使用该`css`方法更新背景颜色，如下所示：

```
firstColumnHeader.css('background', '#FCD116'); 
```

这是一个[jsfiddle](http://jsfiddle.net/9FdBc/)演示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T09:48:35.283

这是第一个标题，其中类名应该做所有的样式。选择器获取#mytable 中的所有“th”，并使用 eq(0) 带来第一个 th 并将类添加到其中

```
$("#myTable th").eq(0).addClass("ClassName") 
```

这适用于类名 2 应该为您设置样式的所有标题

```
$("#myTable th").addClass("ClassName2") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T09:53:39.070

```
$("#myTable th:first").css({
    "background-color": "yellow"
});
$("#myTable th").css({
    "color": "blue"
});​ 
```

您也可以在一行中实现相同的目的：

```
$("#myTable th")
    .css({"color": "blue"})
    .filter(":first")
    .css({"background-color": "yellow"});​ 
```

# kernel - Linux 内核 add_timer

> ID：10633280
> 
> 赞同：1
> 
> 时间：2012-05-17T09:45:27.303
> 
> 标签：kernel, time.h

我正在为内核编写一个模块。我需要等待一段时间（例如；20 秒）只是测试一些东西。该过程应在 20 秒后继续。在我的 module_init 函数中，我使用了这样的计时器：

```
init_timer(&timer);
timer.expires = jiffies + HZ*20;//timer expires in delay ticks
timer.data = 0;//zero is passed to the timer handler
timer.function = timer_handle;//function to run when timer expires 
```

“计时器”是一个这样定义的结构

```
static struct timer_list timer; 
```

timer_handle 是我在计时器到期时运行的函数：

```
void timer_handle (unsigned long data){

 } 
```

现在在我的功能中：

```
ssize_t write(struct file *filp, const char *buff, size_t count, loff_t *offp) { 
    unsigned long ret;

    printk(KERN_INFO "pid : .%d  \n", task->pid);
    down_write(&rwsem);
    if ( (filp->f_flags & O_ACCMODE) == O_RDONLY)
    {
        printk(KERN_INFO "The reader thread is not able to write. \n");
        return -EINVAL;
    }
    printk(KERN_INFO "Inside write 1 \n");
    add_timer(&timer);
    ret = copy_from_user(bufferr, buff, count);
    up_write(&rwsem);
    printk("Inside write 2 \n");
    return count;
} 
```

"printk(KERN_INFO "里面写\n");"之后 我想让进程等待 20 秒。消息“Inside write 2 \n”必须在 20 秒后写入消息“Inside write 1 \n”。我使用了 add_timer(&timer); 他们之间，但它不起作用。我在终端中输入“dmesg”，消息立即连续写入。

我希望我清楚地解释了我的问题:) 有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:52:05.120

两条消息是立即连续写入的*，*因为它们是*立即连续*写入的。您正在编写计时器而不是延迟，因此 20 秒后内核运行**timer_handle()**函数，在您的情况下该函数为空。

如果你需要延迟一些代码执行，请阅读[Linux Device Driver 3th](http://www.makelinux.net/ldd3/chp-7-sect-3) Chapter 7 section 3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:02:58.147

你打印错了，因为它是用户触发读取时的写回调。

你想什么时候注册定时器？我不明白你为什么要写。

该计时器应该定期计时还是根据某些事件触发计时？

# tcl - 使用 tcl 验证 IP 地址

> ID：10633281
> 
> 赞同：0
> 
> 时间：2012-05-17T09:45:34.443
> 
> 标签：tcl

您好 frnds m 在这个程序中面临问题..cn 有没有告诉我哪里出错了？？m nt 能够验证 255.255.255.255 ip 地址

```
puts "Enter a valid ip address:"
set string [gets stdin]
if {[regexp {^([1-9]|[1]\d{2}|[2][0-4]\d|25[0-5])((\.\d{0,2}|1\d{2}|2[0-4]\d|25[0-5]){3})$} $string match]} {
    puts $string
} else {
    puts "INVALID-ADDRESS"
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T10:06:17.867

不要重新发明轮子。有许多关于如何验证 IP 地址的工作示例。见这里一些[http://wiki.tcl.tk/989](http://wiki.tcl.tk/989)

此外，如果您有 TCLlib，您可以使用**::ip::version**命令，例如

```
% package require ip
1.2
% ::ip::version 192.168.0.1
4
% ::ip::version www.google.com
-1
% ::ip::version 192.168.0.333
-1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-11T06:54:58.370

```
set ip "1.2.3.4"
if { [ catch[regexp {(\d+)\.(\d+)\.(\d+)\.(\d+)} $ip man]] } {
    set flag 0
}
set cut [split $ip "."]
set flag "" 
if {[llength $cut] == 4} {
    set flag 1
} else {
    set flag 0 
}
if {[lindex $cut 0] == 0} { 
    set flag  0 
}
foreach nut $cut {
    if {[string length $nut] > 3} {
        set flag 0
    }
    if {$nut > 255} {
        set flag 0 
    }
    set a [split $nut ""]
    if { [lindex $a 0] == 0 } {
        set flag 0
    }
    #set int [lappend mat $nut]
}
if {$flag == 0} { 
    puts "Not a valid IP"
} else {
    puts "IP IS VALID:$man"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T08:54:35.297

I am just giving the easiest pattern for beginners understanding.

```
pattern: /^([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T15:02:33.687

```
proc validateIP {IP} {
    if {[regexp {^(?:(\d{1,2})|(1\d{2})|(2[0-4]\d)|(25[0-5]))(?:\.((\d{1,2})|(1\d{2})|(2[0-4]\d)|(25[0-5]))){3}$} $IP]} {
        puts "$IP is a valid IP"
    } else {
        puts "INVALID-ADDRESS"
    }
} 
```

您的正则表达式存在一些错误，特别是点的位置仅与第一种可能性分组

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T10:40:22.987

```
% set ip "192.168.123.23"
192.168.123.23
% regexp {([0-9]+\.)([0-9]+\.)([0-9]+\.)([0-9]+)} $ip match a b c d
1
% if {$a <= 255 & $b <= 255 & $c <= 255 & $d <= 255} {
  puts "this is a valid ip address"
  } else {
  puts "this not a valid ip address"
 } 
```

这是一个有效的 IP 地址

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-23T07:03:07.760

```
puts "enter your ip address"
set ip [gets stdin]
regexp {([0-9]+)\\.([0-9]+)\\.([0-9]+)\\.([0-9]+)} "$ip" match 1st 2nd 3rd 4rth

if {$1st < 256 & $2nd < 256 & $3rd <256 & $4rth<256} { // numbers in range?
  puts "valid IP address"
} else { 
  puts "not valid IP address"
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-01T16:18:04.140

```
set ip 100.12.230.250

set mat [regexp -nocase {(([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$} $ip match]

if {$mat == 1} {
    puts "Valid Ip"
} else {
   puts "Invalid Ip"
} 
```

# entity-framework - 实体框架中的模型兼容性异常

> ID：10633282
> 
> 赞同：3
> 
> 时间：2012-05-17T09:45:35.367
> 
> 标签：entity-framework, code-first

当我执行我的网络应用程序并尝试将数据保存到数据库中时，会发生此异常：

> 无法检查模型兼容性，因为数据库不包含模型元数据。只能检查使用 Code First 或 Code First 迁移创建的数据库的模型兼容性。

我尝试了很多问题来解决这个问题，但它仍然存在！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:11:28.027

如果您在本地机器上开发，则不需要使用迁移。您只需将数据库初始化程序设置为始终删除数据库，运行一些与数据库交互的代码，然后您将看到数据库将被重新创建并且错误将消失。

应该可以，我就是这么干的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T07:48:07.963

手动删除数据库，然后使用以下命令重新启动项目：

```
public class DbDataContext : DbContext
{
    public IDbSet<FlightType> FlightTypes { get; set; }

    public DbDataContext()
    {
        //Validates if database Exists or if is CompatibleWithModel
        //Using when Databes is productive - use code first migrations for db changes in this case
        //Database.SetInitializer(new ValidateDatabase<DbDataContext>());

        //Custom Initializer - crates databse with required entries
        //Using while developing
        Database.SetInitializer<DbDataContext>(new DatabaseInitializer<DbDataContext>());
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }
} 
```

数据库初始化器：

```
public class DatabaseInitializer<T> : DropCreateDatabaseIfModelChanges<DbDataContext>
{
    protected override void Seed(DbDataContext dbDataContext)
    {
        dbDataContext.FlightTypes.Add(new FlightType { FlightTypeNummer = "axd", Name = "AXD_LX", IsDefault = true });

        base.Seed(dbDataContext);
     }
 } 
```

验证数据库：

```
public class ValidateDatabase<TContext> : IDatabaseInitializer<TContext> where TContext : DbContext
{
    public void InitializeDatabase(TContext context)
    {
        if (!context.Database.Exists())
        {
            throw new InvalidOperationException("Database does not exist");
        }
        if (!context.Database.CompatibleWithModel(true))
        {
            throw new InvalidOperationException("The database is not compatible with the entity model.");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:49:45.330

您是否尝试使用代码优先迁移？如果是这样，您是否在包管理器控制台中运行了以下命令？

```
PM> Enable-Migrations 
```

# c# - 如何保存矩阵 到 XML 文件？

> ID：10633284
> 
> 赞同：0
> 
> 时间：2012-05-17T09:45:38.517
> 
> 标签：c#, xml, matrix, emgucv, surf

我正在尝试在 C# 中使用 emguCV 的 SURF 特征检测器来检测图像的关键点。我正在使用这段代码：

```
Image<Gray, Byte> myImage = new Image<Gray, byte>("test.png");
SURFDetector surf = new SURFDetector(500, false);
VectorOfKeyPoint myKeyPoints = surf.DetectKeyPointsRaw(myImage, null);
Matrix<float> myDescriptors = surf.ComputeDescriptorsRaw(myImage, null, myKeyPoints); 
```

所以我在那个矩阵中有关键点。我想要做的是将这些关键点保存/导出到 .xml 文件中。有人可以帮助我如何做到这一点吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:07:10.897

您可以使用 XxmlSerializer 和 StringBuilder 来完成

```
String filePath = "";
StringBuilder sb = new StringBuilder();
(new XmlSerializer(typeof(Matrix<float>))).Serialize(new StringWriter(sb), modelDescriptors); 

System.IO.File.WriteAllText(filePath , sb.ToString()); 
```

参考：

[http://www.emgu.com/wiki/index.php/Working_with_Matrices](http://www.emgu.com/wiki/index.php/Working_with_Matrices)

# silverlight - Silverlight 在循环中测试 EnqueueCallback

> ID：10633287
> 
> 赞同：0
> 
> 时间：2012-05-17T09:45:47.910
> 
> 标签：silverlight, unit-testing

我正在编写依赖于测试开始时加载的数据的 Silverlight 测试，如下所示：

```
string[] testVectors = new string[20];
EnqueueCallback( Load some data );
EnqueueConditional( Wait for loading of data to finish );
EnqueueCallback( Populate testVectors using the loaded data ); 
```

接下来，我想使用测试向量将更多回调和条件排入队列。但是我怎么循环？？？？？？

我不能这样做：

```
for(int iTest=0; iTest<20; iTest++ )
{
   EnqueueConditional( Run test for testVector[iTest] );
   EnqueueConditional( Wait for test to finish );
} 
```

...因为当 for 循环运行时测试向量字符串不存在。

有任何想法吗？

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:48:01.180

您要做的就是将另一个动作排队等待稍后执行，只是碰巧这个动作包括排队一些更依赖的动作。

您可以做的是将一个回调排入队列，该回调将嵌套您的测试的其余部分，直接或通过链接到另一个方法。

```
EnqueueCallback(...);
...
EnqueueCallback(() => 
{
    for(int iTest=0; iTest<20; iTest++ )
    {
        EnqueueConditional( ... );
    }
}); 
```

只是可能不想在嵌套回调下方放置任何未嵌套的内容 - 它可以在嵌套的事物之前执行/排队。

# javascript - Jquery 不分配 CSS 类

> ID：10633290
> 
> 赞同：0
> 
> 时间：2012-05-17T09:45:55.693
> 
> 标签：javascript, jquery, css

如果点击了这个，我想将一个类分配给一个href标签，换句话说，如果地址栏中有一个地址，则将一个类分配给这个标签..

我的css中有这种样式..

```
ul#menu li a {
padding: 10px 20px;
font-weight: bold;
text-decoration: none;
line-height: 2.8em;
color: #465c71;
}

ul#menu li a.selected {
padding: 10px 20px;
font-weight: bold;
text-decoration: none;
line-height: 2.8em;
color: #FFFFFF;
} 
```

哪里只改变字体颜色..

我的 mvc3 项目的布局页面中的这个 jquery 脚本..

我有这个功能。。

```
<script type="text/javascript">
  $(function () {
      var pgurl = window.location.href.substr(window.location.href.lastIndexOf("/") + 1);
      $("#menu li a").each(function () {
      var addr = $(this).attr("href").lastIndexOf("/") + 1;
      if (addr == pgurl)
          $(this).addClass("selected");
  })
 });
 </script> 
```

其中 pgurl 是粗体值[http://local.host:81/Home/](http://local.host:81/Home/) **Services**（当然，因为我使用并在另一个 jquery 函数中工作）

我有这样的 aa href 链接..

```
<li><a href="@Url.Action("Services", "Home")">@MvcWebRole1.Resources.Shared.Layout.Services</a></li> 
```

而这上面生成的链接是这样的..

```
<a href="/Home/Services">Services</a> 
```

如果第一个变量与我的页面相同，我想在此标签中添加一个类。我通过 firebug 或类似方法（手动添加类）按预期工作。

最后，两个变量应该具有粗体值（服务），但没有在标记处添加类，我使用 Visual Studio 2010 并且我无法测试这个值，我不能在其上放置任何断点来查看它们的值.. 并且作为上面评论过，我有另一个类似的功能，可以完美地与另一个列表的标签配合使用。

有人能帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:50:27.517

```
var addr = $(this).attr("href").lastIndexOf("/") + 1; 
```

上面将`number`+ 1 分配给`addr`. 然后您继续测试此数字是否等于字符串，因此除非您的操作是数字（不确定是否可以），否则它将始终失败。

也许您也打算从链接中获取子字符串

```
 var addr = $(this).attr("href").substr($(this).attr("href").lastIndexOf("/") + 1); 
```

# email - 使用 twig 在电子邮件正文中设置字体大小

> ID：10633295
> 
> 赞同：0
> 
> 时间：2012-05-17T09:46:24.847
> 
> 标签：email, symfony, twig

我正在使用树枝模板来生成我要发送的电子邮件的正文。

我想将字体大小设置为比正常大，我该怎么做？

我的树枝文件：email.txt.twig 非常简单：

```
{% if email == false %}
    {{ userName }} had made this poem just for you.
{% else %}
    {{ userName }} at {{ email }} had made this poem just for you.
{% endif %} 
```

如何自定义字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:46:28.377

如果您想发送纯文本电子邮件，那是不可能的。一些电子邮件客户端在星号 ( `like *in this* example`) 之间制作文本，但您不能真正依赖它。

如果您可以发送 html 电子邮件（最好作为多部分消息，其中包含与不支持 html 电子邮件的客户端的纯文本相同的内容），您可以使用基本 html，但请记住，您需要使用通常在网络上不受欢迎的技术，例如 good ol'`<font>`标签。

# java - javac中的流分析-变量a可能尚未初始化

> ID：10633297
> 
> 赞同：3
> 
> 时间：2012-05-17T09:46:32.567
> 
> 标签：java, javac

在下面的代码中，我希望**不必**在最后一个 else 块中初始化变量`a`，`b`但是编译器不喜欢它。

```
import java.util.Random;

public class Foo {

    private void foo () {

    double a,b;
    boolean c;

    double r = (new Random()).nextDouble();

    if(r < 0.25) {
        a = 1;
        b = 2;
        c = true;
    } else if(r >= 0.25 && r < 0.75) {
        a = 3;
        b = 3;
        c = true;
    } else {
        // why is it necessary to init a and b here?
        // given that c is set to false
        c = false;
    }

    if(c) {
        double k = a + b;
    }

  }

} 
```

使用上面的代码，编译器*确实会*抱怨。

```
bash-3.2$ javac Foo.java
Foo.java:25: variable a might not have been initialized
        double k = a + b;
                   ^
Foo.java:25: variable b might not have been initialized
        double k = a + b;
                       ^
2 errors 
```

我原以为编译器可以进行静态分析以找出如果设置为 false`k`将不会被评估。`c`所以我的问题是为什么编译器要求我初始化`a`和`b`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T09:53:52.533

编译器不够聪明，无法理解遍历该`else`块将设置`c`为`false`，因此下一个`if`块将永远不会被执行。静态分析比您预期的更有限，这也使编译更快/

而且这可能是件好事，因为更改`else`块的代码会突然使下一个`if`块无法编译，这会很烦人。

# android - SQLiteDatabase 的插入方法

> ID：10633299
> 
> 赞同：3
> 
> 时间：2012-05-17T09:47:08.313
> 
> 标签：android, sqlite

SQLiteDatabase 的 insert 方法的第二个参数是`"nullColumnHack"`. 这是指什么。应该将什么值传递给此参数。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T10:01:41.583

假设您有一个名为 foo 的表，其中所有列都允许`NULL`值或具有默认值。

在某些`SQL`实现中，这将是有效的`SQL`：

```
`INSERT INTO `foo; 
```

这在`SQLite`. 您必须至少指定一列：

```
INSERT INTO foo (somecol) VALUES (NULL); 
```

因此，如果您将空传递`ContentValues`给`insert()`Android 并`SQLite`需要一些可以安全分配`NULL`的列。如果您有多个此类列可供选择，请通过您选择的选择机制选择一个：掷骰子、Magic 8-Ball(TM)、硬币翻转、小隔间翻转等。

就个人而言，我只是将空传递给 是非法的`ContentValues`，`insert()`但他们没有问我...... :-)

礼貌的公共软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:12:14.983

nullColumnHack 是已知的，不能插入空行。如果未设置为 null，则 nullColumnHack 参数提供可空列名称的名称，以便在您的值为空的情况下显式插入 NULL。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-17T09:56:15.813

简要说明..

nullColumnHack

选修的; 可能为空。SQL 不允许插入一个完全空的行而不命名至少一个列名。如果您提供的值为空，则表示不知道列名并且无法插入空行。如果未设置为 null，则 nullColumnHack 参数提供可空列名称的名称，以便在您的值为空的情况下显式插入 NULL。

# emacs - 在 Emacs 中定义多字符括号

> ID：10633301
> 
> 赞同：7
> 
> 时间：2012-05-17T09:47:12.417
> 
> 标签：emacs, verilog, parentheses

在 Verilog 中，您将代码块放在单词“开始”和“结束”之间，如下所示：

```
if(foo) begin
   x <= 1'b0;
   y <= 1'b0;
end else begin
   x <= x_d;
   y <= y_d;
end 
```

有没有办法在 Emacs 中将 begin 和 end 设置为括号，以便您可以使用 check-parens 或类似方法来查找任何不匹配的内容？

我已经尝试将这个（及其变体）添加到我的 ~/.emacs 文件中，但它不喜欢它......

```
(modify-syntax-entry ?begin "(end" )
(modify-syntax-entry ?end ")begin" ) 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T19:22:51.190

遗憾的是，Emacs 的括号匹配基础结构并不能理解很多多字符标记。在 Emacs-23.4 中添加的新库 SMIE 部分是为了解决这个问题。它让主要模式描述语言的语法（在一种非常有限的语法中），之后像 CMf 和 CMb 之类的东西将知道如何跳过逻辑元素，例如从 a 跳到`begin`它的匹配项`end`。正如 LindyDancer 所指出的，缩进通常需要这些东西，而 SMIE 背后的主要动机确实是提供一个通用的缩进引擎。

现在 Verilog 不使用 SMIE，但它确实实现了类似的导航命令。所以你可能会尝试类似

```
(defun sm-verilog-check-parens ()
  (save-excursion
    (goto-char (point-min))
    (while (not (eobp))
      (verilog-forward-sexp)))) 
```

我不知道如果`verilog-forward-sexp`它在意外的时刻撞到缓冲区的末尾，是否会给你适当的警告/错误。

# jquery - 如何验证格式为 *** *** **** 的数字？

> ID：10633307
> 
> 赞同：0
> 
> 时间：2012-05-17T09:47:23.300
> 
> 标签：jquery

我正在使用 jquery，我正在尝试使用 ### ### #### 格式验证手机号码或家庭号码。# 作为数字的占位符。

目前我正在使用数字，但这会给空格带来问题，并且我正在使用 minlength 10 因为所有 SA 数字都是最少 10 位数字。

我的代码已经如下所示：

```
// Validation of Form
function validateForm() {
    $('#frmMain').validate({
        rules: { 
                 TelNumber: { required: true, number: true, minlength: 10 }
                },
        messages: {
                TelNumber: { required: 'Tel number Required' }
               },

        submitHandler: function (form) {
            $('#btnSubmit').click();

        }
    });
} 
```

在这里我找到了一个美国电话号码的附加信息，如果有人可以告诉我美国电话号码的外观，我可以编辑这个：

```
jQuery.validator.addMethod("phoneUS", function(phone_number, element) {
    phone_number = phone_number.replace(/\s+/g, ""); 
    return this.optional(element) || phone_number.length > 9 &&
        phone_number.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/);
}, "Please specify a valid phone number");

$("#myform").validate({
  rules: {
    field: {
      required: true,
      phoneUS: true
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:55:59.883

[插件作者的页面](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)有一个指向“附加验证方法”包的链接（[指向源](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/additional-methods.js)的热链接），其中包括“phoneUS”验证规则。只需将其放入，您就可以开始了。

如果您想自定义可接受的模式，该文件还包含一个“模式”规则，允许您通过指定正则表达式进行验证。事实上，这也是“phoneUS”规则的工作原理：通过测试表达式的输入

```
/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:24:35.030

```
jQuery.validator.addMethod("phoneSA", function (phone_number, element) {
    phone_number = phone_number.replace(/\s+/g, "");
    return this.optional(element) || phone_number.length > 9 && 
        phone_number.match(/^(0-?)?(\([0-9]\d{2}\)|[0-9]\d{2})-?[0-9]\d{2}-?\d{4}$/); //(0-?) = 0, ([0-9]\d{2}\) = 3 digits from 0-9 , d{4} 4 didgets, $ end of number
}, "Please specify a valid phone number"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:56:55.900

这是我正在使用的脚本。根据您的需要修改代码。id`errorContainer`用于显示您的错误消息。

```
<script type="text/javascript">
   $().ready(function() {
    $("#frmMain").validate({
        errorLabelContainer:'#errorContainer',
        showErrors: function(errorMap, errorList) {
            if(errorList.length)
            {
                $('#errorContainer').html(errorList[0]['message']);
            }
        },
            highlight:function(element,errorClass){
            $(element).parent('td').addClass('error');
            },
        unhighlight:function(element,errorClass){
                $(element).parent('td').removeClass('error');
        },
        rules: {
                        TelNumber: {
                required: true,
                number:true 
            }
                    },
            messages: {
                TelNumber: "Please enter a valid phone number",
            }
        });
   });
</script> 
```

在尝试执行此操作之前，请确保您的 jQuery 文件已成功加载并正常工作。

我会建议尝试使用一些 UI 进行验证，这将很容易实现。

# linux - 使用 IOCTL 进行动态注册

> ID：10633311
> 
> 赞同：3
> 
> 时间：2012-05-17T09:47:37.590
> 
> 标签：linux, kernel

使用 IOCTL 时，我们可以对设备驱动程序使用动态注册吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:38:58.197

您不需要主编号来定义 ioctl，这些是不相关的。

您需要的是一个（有些）唯一（或至少不是内置的）数字或字母来标识您的 ioctl 范围。可以选择注册这些（寄存器在 中[`Documentation/ioctl/ioctl-number.txt`](http://www.mjmwired.net/kernel/Documentation/ioctl-number.txt)，其中也有使用说明）以防止（或至少降低概率）其他人也使用它。

我强烈建议在任何情况下阅读[文档](http://www.mjmwired.net/kernel/Documentation/ioctl-number.txt)，因为它解释了常见的约定和用法。

# flash - 使用 Actionscript 使用网络摄像头拍摄照片

> ID：10633313
> 
> 赞同：5
> 
> 时间：2012-05-17T09:47:41.600
> 
> 标签：flash, actionscript

我有一个带有网络摄像头和图像的简单动作脚本文件。我想要做的是 - 当一个按钮被点击时，我想捕捉网络摄像头和图像的瞬间并将其呈现在浏览器上的 DIV 中。我该如何捕捉它？我猜需要使用位图数据。我想通过代码做到这一点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T11:49:52.017

这是我自己写来回答这个问题的。在 Chrome、FF 和 IE9 中测试。

您需要 Base64 编码器（一个在[这里](https://github.com/spjwebster/as3base64/blob/master/src/com/dynamicflash/util/Base64.as)）和 png/jpg 编码器（例如来自 Flex 库）。

**作为代码：**

```
package
{
    import flash.display.BitmapData;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.MouseEvent;
    import flash.external.ExternalInterface;
    import flash.media.Camera;
    import flash.media.Video;

    [SWF(width="640", height="480", backgroundColor="#000000")]
    public class CameraToJS extends Sprite
    {
        private var camera:Camera;
        private var video:Video;

        public function CameraToJS()
        {
            addEventListener(Event.ADDED_TO_STAGE, addedToStageHandler);
            stage.addEventListener(MouseEvent.CLICK, saveSnapshot);
        }

        protected function addedToStageHandler(event:Event):void
        {
            camera = Camera.getCamera(); 
            video =  new Video();
            video.attachCamera(camera);
            addChild(video);
        }

        protected function saveSnapshot(event:MouseEvent):void
        {
            var bmData:BitmapData = new BitmapData(video.width, video.height);
            bmData.draw(video);

            var encoder:PNGEncoder = new PNGEncoder();

            ExternalInterface.call("image", Base64.encodeByteArray(encoder.encode(bmData)));
        }
    }
} 
```

**Javascript代码：**

```
function image(data)
{
    document.getElementById("img").src = "data:image/png;base64,"+ data;
} 
```

# javascript - jQuery UI Multiselect 小部件清除所有复选框

> ID：10633318
> 
> 赞同：6
> 
> 时间：2012-05-17T09:48:07.293
> 
> 标签：javascript, jquery, jquery-ui

希望快点...

我需要在页面上单独按钮的单击事件中触发 uncheckAll 事件，我尝试了以下操作：

```
$('.masterProviderOrgsListBox').multiselect().uncheckAll(); 
```

但这不是公认的方法。我基本上想触发与单击标题中的“取消选中全部”框时触发的相同方法。

我以前是这样做的：

```
$('.masterProviderOrgsListBox option:selected').removeAttr("selected"); 
```

但这会删除实际多选而不是 jQuery UI 小部件上的选择。

在文档中找不到任何东西，有什么想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T10:05:33.870

> **方法**
> 
> 初始化实例后，通过调用以下任何方法与其交互：
> 
> `// example: $("#multiselect").multiselect("method_name");`

...可以在**方法**下的小部件[文档中找到](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

 **```
$("#multiselect").multiselect("uncheckAll"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-25T10:17:26.927

1）首先，您需要设置控件的默认值。

`jQuery('#multiselect').val("");`

2）然后，执行下面的代码来重置控件。

`jQuery('#multiselect').multiselect("refresh");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T09:17:41.317

```
$("#multiselectoption:selected").removeAttr("selected");
$("#multiselect").multiselect('refresh'); 
```

清除下拉列表后应调用刷新。**

# javascript - 根据选定的单选按钮填充文本框

> ID：10633321
> 
> 赞同：0
> 
> 时间：2012-05-17T09:48:29.453
> 
> 标签：javascript, jquery, forms, radio-button

我有 3 个单选按钮，当其中一个被选中时，我想自动将文本放入文本框中。例如，如果用户选择了“待定”单选按钮，我希望将文本“待建议”放在文本框中，如果他们选择另一个单选按钮，我希望将其清除。

谁能帮我？？

[http://jsfiddle.net/ej2hf/1/](http://jsfiddle.net/ej2hf/1/)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:52:10.130

这应该这样做：

```
$('input[name="dest_type"]').on('change', function() {
    $('input[type="text"]').val($(this).val());
}); 
```

现场演示：http: [//jsfiddle.net/ej2hf/2/](http://jsfiddle.net/ej2hf/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:03:27.277

**那就试试这个**

[http://jsfiddle.net/ipsjolly/KNct8/](http://jsfiddle.net/ipsjolly/KNct8/)

```
$('input[name="dest_type"]').on('change', function() {
    if($(this).val() == "tba"){
        $('input[type="text"]').val($(this).val());
    }
    else
    {
        $('input[type="text"]').val('');
    }

}); 
```

​</p>

或者

[http://jsfiddle.net/ipsjolly/KNct8/1/](http://jsfiddle.net/ipsjolly/KNct8/1/)

```
$('input[name="dest_type"]').on('change', function() {
     if($(this).val() == "tba"){
    $('input[type="text"]').val('To Be Advised');
    }
    else
    {
      $('input[type="text"]').val('');
    }

});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:49:25.617

尝试这个，

```
$(document).ready(function () {
$('input:radio[name="dest_type"]').change(function () {
   $("input:text").val($(this).val());
});
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T10:00:58.913

除了使用在页面加载时默认选择的值填充文本框之外，请使用以下代码：

```
$(document).ready(function(){
$('input[type="text"]').val($('input[name="dest_type"]').val());
$('input[name="dest_type"]').on('change', function() {     
$('input[type="text"]').val ($(this).val()); }); 
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T10:01:41.683

假设你是或者可以使用最新的[jQuery](http://jquery.com/)，你可以使用这个：

```
$(function() {
    $('input[name="dest_type"]').on("change", function() {
        $('input[type="text"]').val($(this).val());
    });
}); 
```

见[小提琴！](http://jsfiddle.net/zuul/DHGhk/)

* * *

如果您需要切换 TBA 的值，请使用以下命令：

```
$(function() {
  $('input[name="dest_type"]').on("change", function() {
    $('input[type="text"]').val( (($(this).val()=='tba')?($(this).val()):('')) );
  });
}); 
```

看到这个[小提琴！](http://jsfiddle.net/zuul/DHGhk/2/)

* * *

如果这些都不是您想要做的，请改写问题或添加更多信息！

# javascript - 与将 Jquery 保存在单独的 .js 文件中相关的问题

> ID：10633324
> 
> 赞同：0
> 
> 时间：2012-05-17T09:48:35.740
> 
> 标签：javascript, jquery, html, css

我在 .js 文件中添加了一些 javascript 函数，还添加了以下 Jquery 函数

```
 $(document).ready(function () {
            alert("aj");
            $(".QDContactDetails").click(function (event) {
               alert("Clicked !!!");
            });

        }); 
```

我想知道javascript函数是否正确调用但上面的jquery行不起作用..上面的代码有什么问题？如何将 Jquery 放入 .js 文件中。我正在使用新版本的 Jquery1.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:51:51.317

你所拥有的应该可以正常工作。您只需要确保首先放置对 jQuery 的引用，然后再放置您自己的外部 js 文件引用：

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/my-jquery-code.js"></script> 
```

# java - 在java中等待通知

> ID：10633326
> 
> 赞同：1
> 
> 时间：2012-05-17T09:48:39.370
> 
> 标签：java, multithreading, thread-priority

```
class Callme {
    void call(String msg) {
        System.out.print("[" + msg);
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            System.out.println("Interrupted");
        }
        System.out.println("]");    
    }
}    

class Caller implements Runnable {
    String msg;
    Callme target;
    Thread t;
    public Caller(Callme targ, String s) {
        target = targ;
        msg = s;
        t = new Thread(this);
        t.start();
    }

    public void run() {
        //synchronized(target){ // synchronized block
        target.call(msg);
        //}
    }
}
class Synch {
    public static void main(String args[]) {
        Callme target = new Callme();
        Caller ob1 = new Caller(target, "Hello");
        ob1.t.setPriority(Thread.NORM_PRIORITY);
        Caller ob2 = new Caller(target, "Synchronized");
        Caller ob3 = new Caller(target, "World");
        ob2.t.setPriority(Thread.MAX_PRIORITY);
        ob3.t.setPriority(Thread.MIN_PRIORITY);
        System.out.println(ob1.t.getPriority());
        System.out.println(ob2.t.getPriority());
        System.out.println(ob3.t.getPriority());
        // wait for threads to end
        try {
            ob1.t.wait();
            ob2.t.wait();
            ob3.t.wait();
            ob1.t.notifyAll();

        } catch(InterruptedException e) {
            System.out.println("Interrupted");
        }
    }
} 
```

而我们给予子线程和`wait()`和`notifyall()`方法使用的优先级，所以必须根据优先级运行。但不跑。如果我们`synchronized(target)`也使用，那么也不按优先级运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:03:41.483

更改了线程的`Tread.setPriority()`执行优先级，这意味着更高优先级的线程在运行时更有可能被选中执行（与同时运行的低优先级线程相比）。当然，如果你通过显式调用来停止线程`wait()`，它在等待时不会运行，所以在这种情况下优先级是没有意义的。

*更新*：如上所述，优先级是*运行*线程。当你调用`notify()`线程时选择的不是基于优先级（至少不保证，规范没有说一种或另一种）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:55:38.817

这取决于程序运行的操作系统。很少有操作系统不注意应用程序设置的优先级——或者表现出意外。因此，不应依赖于优先级。

**找到了类似的线程：**

[螺纹优先级和螺纹精度](https://stackoverflow.com/questions/7413581/thread-priority-and-thread-accuracy)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T10:05:24.800

[Java 语言规范，17.2.2 通知：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.2)

“无法保证选择等待集中的哪个线程。”

请注意精心挑选的术语：a wait **set**。

# asp.net - 无法调试通过自定义 VirtualPathProvider 加载的 EmbeddedResource 视图

> ID：10633329
> 
> 赞同：10
> 
> 时间：2012-05-17T09:48:49.470
> 
> 标签：asp.net, debugging, compiler-construction, embedded-resource, virtualpathprovider

我编写了一个自定义的 VirtualPathProvider（来源[此处](https://github.com/mcintyre321/EmbeddedResourceVirtualPathProvider)），它将从 EmbeddedResources 返回内容，或者如果已被告知在哪里可以找到它，则从原始文件返回内容（这允许您编辑和更新文件而无需重建）。到目前为止，这工作正常。

不工作的是调试。如果我在视图中添加断点，它不会加载符号。我知道为什么这很困难（ASP 编译器如何知道源文件在哪里，以便发现断点？），但我正在寻找一种方法来提示编译器在哪里可以找到源文件。

此处的示例项目：http: [//dl.dropbox.com/u/2808109/VppDebugTest.zip](http://dl.dropbox.com/u/2808109/VppDebugTest.zip)

编辑：

我一直在试验通过 VPP 加载的 ASPX 页面，并通过查看编译源（使用[David Ebbo 的技术](http://blogs.msdn.com/b/davidebb/archive/2010/02/03/debugging-asp-net-generated-code.aspx)），生成的行 pragma 如下所示：

```
Line 275:              #line 1 "http://server/EmbeddedPage.aspx"
Line 276:              this.InitializeCulture(); 
```

通常，这些是沿线生成的

```
Line 275:              #line 1 "d:/somesln/someproj/EmbeddedPage.aspx" 
```

不知道对大家有没有帮助...

编辑2：

在大卫把他的代码发给我之后，我做了一些进一步的调查，以下事情似乎是真的：

1.  除非引用 system.web（在 VS 2010 中），否则您不能在 .aspx 中设置断点
2.  如果您使用指令创建一个最小的 .aspx 页面`<%@ Page Language="C#" %>`并设置断点，VS 将在源文件中的断点处停止

3.  如果您使用指令创建非最小 .aspx`<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="VppDebugTest.WebForm1" %>`并设置断点，则查看时 VS 将带您进入 dissasembly 调试视图

`--- http://server/WebForm1.aspx ------------------------------------------------ 0000003a mov ecx,dword ptr [ebp-3Ch] 0000003d call 63EC54F0 00000042 mov dword ptr [ebp-44h],eax 00000045 mov edx,dword ptr ds:[03E62200h] 0000004b mov ecx,dword ptr [ebp-44h]`

它仍然不会在 Razor 视图中的任何断点处停止，不幸的是，这是我真正需要做的！这个 .aspx 的东西可能是一个红鲱鱼。

编辑：

5：如果我在我的 Index.cshtml 中调用 Debugger.Break()，调试器会在反汇编视图中停止，并且根本没有编译指示，不正确或其他

1.  如果我在我的视图中手动写入`@{ #line 1 "C:\Users\Harry\Desktop\VppDebugTest\VppDebugTest.Views\Views\Home\Index.cshtml" }`，则调试将停止在文件中。所以也许解决方案是让我的 VPP 将#line pragma 插入 cshtml 文件本身？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-28T09:54:50.807

我遇到了同样的问题，最后通过使用自定义 RazorHost 让它工作。似乎使用`HostingEnvironment.MapPath()`不返回嵌入文件的正确结果的方法来解析物理文件位置。

我做了什么：

```
public class MyCustomRazorHostFactory : WebRazorHostFactory
{
    public override System.Web.WebPages.Razor.WebPageRazorHost CreateHost( string virtualPath, string physicalPath )
    {
        // Implementation stolen from MvcRazorHostFactory :)
        var host = base.CreateHost( virtualPath, physicalPath );

        if( !host.IsSpecialPage )
        {
            return new MyCustomRazorHost( virtualPath, physicalPath );
        }

        return host;
    }
}

public class MyCustomRazorHost : MvcWebPageRazorHost
{
    public MyCustomRazorHost( string virtualPath, string physicalPath )
        : base( virtualPath, physicalPath )
    {
        if( MyMagicHelper.IsEmbeddedFile( virtualPath ) )
        {
            PhysicalPath = MyMagicHelper.GetPhysicalFilePath(virtualPath);
        }
    }
}

// Simplified for demonstration purpose
public static class MyMagicHelper
{
    public static bool IsEmbeddedFile(string virtualPath)
    {
        // ... check if the path is an embedded file path
    }

    public static string GetPhysicalFilePath(string virtualPath)
    {
        // ... resolve the virtual file and return the correct physical file path
    }
} 
```

作为最后一步，您需要告诉 ASP.NET 它应该使用哪个主机工厂。这是在 web.config 中完成的：

```
<system.web.webPages.razor>
    <host factoryType="My.Custom.Namespace.MyCustomRazorHostFactory" />
</system.web.webPages.razor> 
```

我知道我的答案来得有点晚，但希望其他人在遇到这个问题时可以像我一样使用它。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:56:44.103

我试着用你的代码玩了一下，当我在资源中添加一个测试 aspx 时，调试似乎工作正常。我能够在 Page_Load 中设置一个 BP，然后它就在那里。

[您可以在https://github.com/davidebbo/EmbeddedResourceVirtualPathProvider](https://github.com/davidebbo/EmbeddedResourceVirtualPathProvider)中看到我的更改

请注意，我禁用了回退逻辑，因为我想专注于嵌入式案例，尽管我认为这没有什么不同。

请注意，我使用的是 VS2012，所以我还必须升级项目/sln（但它们在 2010 年仍然可以工作）。

ASP.NET 生成 http 行编译指示的原因是它无法在标准位置找到物理 aspx 文件（即 MapPath 将返回的内容）。实际上有一种鲜为人知的方法可以始终打开此行为：在部分中设置 urlLinePragmas=true (http://msdn.microsoft.com/en-us/library/system.web.configuration.compilationsection.urllinepragmas.aspx) .

# c# - WP7 将附加内容下载到应用程序（声音库）

> ID：10633330
> 
> 赞同：1
> 
> 时间：2012-05-17T09:48:58.447
> 
> 标签：c#, windows-phone-7, ftp, download

有什么好方法可以在 wp7 中为我的应用程序下载其他内容吗？现在我最好的主意是 FTP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:15:25.833

我只需将文件托管在 Web 服务器上，然后在后台线程上下载并将文件写入隔离存储。这将比 FTP 更容易，因为我不知道现在是否有适用于 Windows Phone 的免费 FTP 库。

这是[下载文件并将它们保存到独立存储的示例](http://timheuer.com/blog/archive/2010/08/16/download-and-store-media-for-playback-in-windows-phone-7-using-mediastreamsource.aspx)。它比您可能需要的要多一点，但它应该是一个很好的起点。也不要使用该文章中提到的性能进度条，而是使用[Progress Indicator](http://debugmode.net/2011/09/30/system-tray-progressindicator-in-windows-phone-7-5-or-mango-phone/)。

如果文件是高度可压缩的，我也会考虑压缩它们，然后使用[Silverlight SharpZipLib之类的东西在手机上解压缩它们](http://slsharpziplib.codeplex.com/)

# git - Pathspec upstream/master 不明确

> ID：10633332
> 
> 赞同：3
> 
> 时间：2012-05-17T09:49:02.200
> 
> 标签：git, github

我可以推送、拉取和结帐上游/主控完全没有问题，但我确实收到了警告。Upstream/master 用于跟踪对我 fork 的原始源代码所做的更改（遵循 github 说明）。

例如

```
$ git checkout upstream/master
warning: refname upstream/master is ambiguous

$ git branch -a
* master
  upstream/master
  remotes/origin/HEAD -> origin/master
  remotes/origin/master
  remotes/upstream/master 
```

此命令也有模棱两可的错误：

```
$ git branch
* master
  upstream/master

$ git checkout upstream/master filename.bar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:24:53.833

[此页面](http://www.mono-project.com/GitFAQ#I_get_an_ambiguous_warning_when_checking_out_a_branch)提到了此类消息的常见原因：

> 当您尝试结帐本地分支时，您会得到一个

```
warning: refname 'branch-name' is ambiguous 
```

> **如果您创建了一个与远程标签同名的本地分支，**就会发生这种情况。
> Git 应该检出你的本地分支，但它却试图检出标签，它会感到困惑。
> 
> 通常，在创建标签时，请注意不要使用与现有（本地或远程）分支冲突的名称。

# javascript - 哪个最好使用 Fusionchart 或 Highcharts？

> ID：10633336
> 
> 赞同：2
> 
> 时间：2012-05-17T09:49:19.900
> 
> 标签：javascript, flash, highcharts, fusioncharts

我正在构建一个报告解决方案。经过大量研究后，我将选择范围缩小到两种解决方案：HighChart 和 FusionChart。在这两者之间，我仍然无法决定我应该买哪个。

FusionChart 是否支持像 HighCharts 这样的图表动画重绘？大数据集的闪存性能好吗？

[FusionCharts 发布了它与其他产品的比较](http://www.fusioncharts.com/success-stories/competition-and-us/)

这些报告选项有哪些优点和缺点，以便我可以决定哪个更适合我的应用程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T09:59:30.623

这两个图表都在市场上排名第一。我更喜欢这取决于您选择的应用程序。我个人更喜欢 HighCharts 而不是 FusionCharts，因为 High Charts 提供了洞察力文档和 API 支持。我将它用于基于股票的应用程序，我觉得 HighCharts 比 FusionCharts 具有优势。当你经历时，HighCharts 的定制就像馅饼一样简单高库存 API。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T06:21:11.030

在马自达和保时捷之间进行选择时，最终归结为您的品味和要求！;)

我们大多数人出错的地方是忽略某些本质上是潜在的和概念性的需求参数。所以，让我把它们转发给你：

**您需要纯 JavaScript 图表：** 两种产品都提供相同的功能。

**您需要大型数据点的性能：** 两种产品都可以非常轻松地处理 1000 个奇数数据点。但是，FusionCharts 有一个特定的“ZoomLine”图表来处理大于 10k 的数据点。此外，Flash 绘制数据速度较慢的事实并不完全正确，几乎所有 JS 图表组件在 Internet Explorer 6、7 和 8 上都存在严重的性能问题。

**产品支持：** FusionCharts 提供 24x7 的专属客户支持，并拥有非常丰富的文档来帮助您完成工作。如果您在实施过程中遇到问题，您总是可以得到专门的客户支持。他们帮助找出实施和其他问题，并提供解决方法和修复相同的问题。超过 80% 的财富 500 强公司将此作为关键因素之一。在实际开发中，您将不需要一页又一页的文档和庞大的 API。您将需要快速的解决方案和配置来完全满足您的需求，而且非常直观。

**开发中的麻烦更少：**如果您认为您的图表解决方案是智能的，并且无需配置 1000 多个参数即可美观地呈现数据，那么 FusionCharts 是您的选择。例如，如果您希望图表的图例位于正确位置，您会怎么做……只需说出`legendPosition="right"`或配置 10 个参数来调整画布大小、放置标题等等等？***这减少了您在开发和维护软件方面的整体工作量，因此......省钱！***

**动画的自定义和多样性：**与 FusionCharts JavaScript Charts 相比，Highcharts 具有更多可自定义的动画。尽管如此，FusionCharts Flash 具有更高级的动画，并且非常易于设置。此外，FusionCharts 肯定会尽快为 JS 变体添加更多动画自定义选项。

**各种图表**：我还不知道您是否需要更多图表类型。如果您需要雷达、瀑布等图表和仪表（小部件），那么 FusionCharts 是您的最佳选择。

# silverlight - 在 Silverlight 中的 Mouse Left Button Down 中获取行选定的索引值

> ID：10633337
> 
> 赞同：1
> 
> 时间：2012-05-17T09:49:21.073
> 
> 标签：silverlight, datagrid, mouseleftbuttondown

我在数据网格中有一张图像，如下所示

```
<sdk:DataGridTemplateColumn x:Name="colStat" IsReadOnly="True" Header="Stat" Width="60" CanUserResize="False">
 <sdk:DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
       <StackPanel x:Name="spStats" VerticalAlignment="Center" Margin="10,0,0,0"         Width="Auto" Height="Auto" HorizontalAlignment="Center" Orientation="Vertical" Cursor="Hand">             
           <Image x:Name="imgStats" Source="Assets/Images/stats.png" Height="25" Width="25" 
               Margin="0" MouseLeftButtonDown="imgStats_MouseLeftButtonDown" MouseLeftButtonUp="imgStats_MouseLeftButtonUp" />
        </StackPanel>
     </DataTemplate>
   </sdk:DataGridTemplateColumn.CellTemplate>
  </sdk:DataGridTemplateColumn> 
```

我的代码 MouseLeftButtonDown 和 MouseLeftButtonUp 中提到了两个事件，用于图像，我可以在 MouseLeftButtonUp 中获取我的行选择索引值，但我无法在 MouseLeftButtonDown 中获取选择的索引值。我还需要 MouseLeftButtonDown 中的 Selected Index 值。谁能帮我解决这个问题。

氖

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:23:56.113

有一个示例，只需将 'mousemove' 更改为 'mouseleftbuttondown'

[试试这个](http://www.byteblocks.com/post/2010/03/15/How-to-find-selected-row-and-cell-index-in-Silverlight-DataGrid.aspx)

# javascript - 模型同步时使用 json 发送 API 密钥

> ID：10633338
> 
> 赞同：2
> 
> 时间：2012-05-17T09:49:21.957
> 
> 标签：javascript, backbone.js

我正在实施一个在浏览器上使用backbone.js 与我的服务器通信的项目。是否可以在不将其添加到模型中的情况下随请求发送 api 密钥？在响应时，我可以检查与实际模型无关的数据，例如访问令牌？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:15:17.070

这应该让你开始

```
//the api key object
var apikey = {api:"^@%&HJJHJSDNkkjGHGSd*^*JHJ"};

//Backbone model
var model = Backbone.Model.extend({
url:"/todo",
sync:function(method,model,options){
  _.extend(model.attributes,apikey);
  Backbone.sync(method,model,options);
}}); 
```

### 更新

```
//the api key object
var apikey = {api:"^@%&HJJHJSDNkkjGHGSd*^*JHJ"};

//Backbone model
var model = Backbone.Model.extend({
url:"/todo",
sync:function(method,model,options){
    $.ajaxSetup({headers:apikey});
    Backbone.sync(method,model,options);
}});

var x = new model({todo:"Welcome"}).save();
​ 
```

经过一番思考，将“咀嚼”模型发送到服务没有意义，因此更新后的代码会将 apikey 与请求标头附加在一起。在请求标头中搜索的关键是**api**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T08:24:49.730

由于几乎必须在所有 ajax 请求中添加 api 密钥。我使用了每次发送 ajax 调用时调用的 jquery 函数：

```
$.ajaxPrefilter(function (options, originalOptions, jqXHR){ 
  var newObject = {
     append_new : 'APIKey'
  }

  options.data = $.param($.extend(originalOptions.data, newObject));
}); 
```

对于我使用的回复部分：

```
$('body').ajaxSuccess(function(e, xhr, settings){
  console.log(xhr);
}); 
```

# javascript - 错误后如何停止循环“FOR”

> ID：10633340
> 
> 赞同：1
> 
> 时间：2012-05-17T09:49:30.650
> 
> 标签：javascript, selenium, ide

这是我的 javascript 代码（在 Selenium IDE 中，为清楚起见添加了换行符和缩进）： storeEval |

```
var input = window.document.getElementsByTagName('input');
for(var i = 0; i<input.length; i++)  {
    if(window.document.defaultView.getComputedStyle(input[i]).getPropertyValue('background-color') == 'rgb(204, 230, 255)') {
        testResult='passed';
    } else {
        testResult='failed';
    }
} 
```

| 测试结果

我需要检查所有输入的颜色。但是 Selenium Ide 只存储最后一个“INPUT”的测试结果。我确定在测试中间有错误。请帮忙。对不起，我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:55:55.400

```
var input = window.document.getElementsByTagName('input');
var testResult = 'passed';
for(var i = 0; i<input.length; i++)  {
  if(window.document.defaultView.getComputedStyle(input[i]).getPropertyValue('background-color') != 'rgb(204, 230, 255)') {
    testResult = 'failed';
    break;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:57:04.637

您应该修改的内容：

*   `testResult`被赋予默认值
*   a`break`在测试失败时添加以停止`for`循环
*   区分您是在处理收音机、复选框还是其他类型的输入

这是您更新的代码：

```
var input = window.document.getElementsByTagName('input'); 
testResult = 'passed'; // <-- set a default value for 'testResult'
for (var i = 0; i < input.length; i++) {
    var bgColor = window.document.defaultView.getComputedStyle(input[i]).getPropertyValue('background-color');
    var inputType = input[i].type;

    if (inputType === 'radio' || inputType === 'checkbox') {
        if (bgColor !== 'rgb(r, g, b)') { // change the value to the desired one
            testResult = 'failed';
            break; // <-- this is what you need to break the 'for' loop
        }
    }
    else {
        if (bgColor !== 'rgb(204, 230, 255)') {
            testResult = 'failed';
            break; // <-- this is what you need to break the 'for' loop
        }
    }
} 
```

# javascript - 获取js中包含的jsp的值

> ID：10633341
> 
> 赞同：0
> 
> 时间：2012-05-17T09:49:31.903
> 
> 标签：javascript, include

```
I'm using struts 2 application where 
< s: form name="myForm">
< s:include value = "test.jsp" >< / s:include>
< img src="../../images/next.png" onclick="fnNext();"/>
< / s:form>

test.jsp contains a table with id = "my table" 
```

现在如何在 javascript 函数 fnNext() 中使用表的 id：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:53:32.110

您可以使用`element = document.getElementById(id)`或使用 Jquery 来选择它`$('#your_id')`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T10:00:47.113

如果您查看结果的来源`JSP`，您可以看到该`include`标记`test.jsp`在您的原件中包含 a 的输出`JSP`。

因此，您可以像任何其他 DOM 元素一样在 js 文件中简单地获取表格：

```
table = document.getElementById(idOfYourTable); 
```

希望这可以帮助！

# java - Java中Tree的实际用途是什么

> ID：10633348
> 
> 赞同：-1
> 
> 时间：2012-05-17T09:49:57.080
> 
> 标签：java, tree

我正在使用集合中的 Java 树，但树的实际用途是什么。与 CS 语言一样，B-tree 最多可以有 2 个孩子、叶子、树的高度等。但是在java中如何观察这些解释以及java中Tree的实现是什么。

我只在谈论 TreeMap 和 TreeSet

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:54:09.973

如果您在谈论`TreeSet`和`TreeMap`类，它们分别使用树结构的内部表示来实现`Set`和接口。`Map`所以用户无法访问里面的树（你不能直接访问孩子）

*注意*`Tree`： java中没有标准接口

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T09:54:26.950

没有`Tree`- 你确定你的意思不是要么`TreeSet`吗`TreeMap`？

无论哪种方式，它们都使用[红黑树](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)作为底层实现。

除了具有红黑树的性能特征（大多数常见操作的 O(log(n)) 时间）之外，它们的行为方式与`HashSet`和几乎相同`HashMap`- 在大多数情况下，您可以互换使用它们。

# php - PHP：动态传递 URL 中的参数

> ID：10633350
> 
> 赞同：1
> 
> 时间：2012-05-17T09:50:15.227
> 
> 标签：php

我想以表格形式显示数据库中的数据。我写了以下代码

```
while($row = mysql_fetch_array($result))
{
echo "<tr>";
echo "<td>" . $row['EmpID'] . "</td>";
echo "<td>" . $row['EmpName'] . "</td>";
echo "<td>" . $row['Designation'] . "</td>";
echo "<td>" . $row['Salary'] . "</td>";
echo "<td><a href='upasg3.php?empid='". $row['EmpID'] .">Edit</a ></td>";
echo "<td><a href='upasg3.php?empid='". $row['EmpID'] .">Delete</a ></td>"; 
echo "</tr>";
} 
```

但我没有得到 $row['EmpID'] 的值与 href 的值连接。它重定向到 empid= 空白的 upasg3.php。如何解决这个问题？请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T09:54:16.807

```
while($row = mysql_fetch_array($result))
{
echo "<tr>";
echo "<td>" . $row['EmpID'] . "</td>";
echo "<td>" . $row['EmpName'] . "</td>";
echo "<td>" . $row['Designation'] . "</td>";
echo "<td>" . $row['Salary'] . "</td>";
echo "<td><a href='upasg3.php?empid=". $row['EmpID'] ."'>Edit</a ></td>";
echo "<td><a href='upasg3.php?empid=". $row['EmpID'] ."'>Delete</a ></td>"; 
echo "</tr>";
} 
```

引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T09:53:50.937

尝试删除 empid= 后的单引号

并把它们放在这里：

```
echo "<td><a href='upasg3.php?empid=". $row['EmpID'] ."'>Edit</a ></td>";
echo "<td><a href='upasg3.php?empid=". $row['EmpID'] ."'>Delete</a ></td>"; 
```

这将为您提供如下输出：

```
<a href='upasg3.php?empid=100'> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T09:56:27.990

尝试

```
echo "<td><a href='upasg3.php?empid=". $row['EmpID']."'>Edit</a ></td>";
                                    ^                 ^ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T10:01:08.440

```
 <table width="100%" border="1">
  <tr>
 <td>ID</td>
<td>NAME</td>
<td>Designation</td>
<td>Salary</td>
<td>Edit</td>
  <td>Delete</td>
</tr>
<tr>
  <td><?=$row['EmpID']?></td>
<td><?=$row['EmpName']?></td>
<td><?=$row['Designation']?></td>
<td><?=$row['Salary']?></td>
<td><a href="upasg3.php?empid=<?=$row['EmpID']?>">Edit</a></td>
 <td><a href="upasg3.php?empid=<?=$row['EmpID']?>">Delete</a></td>
 </tr> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-17T09:59:55.633

尝试这个

```
echo "<td><a href='upasg3.php?empid=". $row['EmpID'] ."'>Edit</a ></td>";
echo "<td><a href='upasg3.php?empid=". $row['EmpID'] ."'>Delete</a ></td>"; 
```

你的报价放错地方了。

# php - PDFlib 库 PHP 背景图片

> ID：10633354
> 
> 赞同：2
> 
> 时间：2012-05-17T09:50:36.770
> 
> 标签：php, background, pdflib

我正在使用 PDFlib 库 PHP 编写 PDF。

我可以将图像作为整个页面的背景吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T17:03:05.420

一般来说，你应该这样做：

```
$image = $p->load_image("auto", $imagefile, "");
if ($image == 0) {
    die("Error: " .  $p->get_errmsg());
}
$p->begin_page_ext(0, 0, "width=595 height=842");
$p->fit_image($image 0, 0, "boxsize { 595 842} fitmethod=entire"); 
```

如果您在将文本放入 PDF 之前执行此操作，您将获得它作为背景图像。

您可以查看[http://www.pdflib.com/pdflib-cookbook/images/](http://www.pdflib.com/pdflib-cookbook/images/)以获取更多与图像相关的示例，并查看文档“PDFlib-tutorial.pdf”中的第 7.3 章。

# google-chrome - 如何从谷歌浏览器解压 resources.pak？

> ID：10633357
> 
> 赞同：25
> 
> 时间：2012-05-17T09:50:43.113
> 
> 标签：google-chrome, compression

有很多有趣的文件可以通过`chrome://resources/*`谷歌浏览器访问。

在 linux 上，内容在`/opt/google/chrome/resources.pak`. [我知道我可以从http://chromium.googlecode.com/svn/trunk/](http://chromium.googlecode.com/svn/trunk/)获得全部来源，但我想解压缩`resource.pak`文件。

`file resources.pak`报告只是垃圾。

需要明确的是，问题不*在于从哪里获得这些资源*。问题是*resources.pak 文件格式是什么，如何解压？*

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-14T21:20:15.530

取自[https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-dev/agGjTt4Dmcw](https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-dev/agGjTt4Dmcw)

4 字节版本号
4 字节资源数
1 字节编码

对于每个资源：文件中的
2 字节资源 ID
4 字节资源偏移量

最后有一个额外的资源条目，ID 0 给出最后一个资源的结尾（本质上是文件的长度）

这个 python 模块可以解压和重新打包文件：
[data_pack.py](https://chromium.googlesource.com/chromium/src/tools/grit/+/master/grit/format/data_pack.py) from [grit-i18n](https://code.google.com/p/grit-i18n)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-12-17T20:43:35.640

[chrome-pak-customizer](https://github.com/myfreeer/chrome-pak-customizer#usage-windows-only) （由 MrU 在上面的评论中指出）似乎可以很好地解压 Chrome 的`.pak`文件。如果您使用的是 Windows，则可以`chrome-pak.7z`从[发布](https://github.com/myfreeer/chrome-pak-customizer/releases)页面下载并解压缩。然后将`.pak`文件放在`unpack.bat`脚本上以解压缩它。

对于其他平台，您似乎需要从源代码构建该工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-29T15:26:39.480

我发现 resource.pak V5 有一个新格式：

```
struct header {
    // 5 is the latest version
    uint32_t version;
    // 0 = BINARY, 1 = UTF8, 2 = UTF16
    uint8_t encoding;
    // 3 bytes padding
    uint8_t padding[3];
    uint16_t resource_count;
    uint16_t alias_count;
}; 
```

紧随其后的是`resource_count` `resource`s 和`alias_count` `alias`es。

```
struct resource {
    uint16_t resource_id;
    uint32_t file_offset;
}; 
```

```
struct alias {
    uint16_t resource_id;
    uint16_t entry_index;
}; 
```

其中`uint32_t`= 4 字节，`uint16_t`= 2 字节，`uint8_t`= 1，所有小端整数。

源代码位于[https://github.com/chromium/chromium/blob/master/ui/base/resource/data_pack.cc](https://github.com/chromium/chromium/blob/master/ui/base/resource/data_pack.cc)。

# c# - 保存到下载文件夹，DataWriter.FlushAsync 挂起 90 秒

> ID：10633360
> 
> 赞同：0
> 
> 时间：2012-05-17T09:50:55.193
> 
> 标签：c#, file-io, windows-8, windows-runtime

编码：

```
private async Task<int> Save()
{
    StorageFile file = await DownloadsFolder.CreateFileAsync("a.exe");
    IRandomAccessStream stream = await file.OpenAsync(FileAccessMode.ReadWrite);
    DataWriter writer = new DataWriter(stream);
    byte[] buffer = new byte[4096];
    writer.WriteBytes(buffer);
    await writer.StoreAsync();
    await writer.FlushAsync();    //Hang for a long time
    writer.Dispose();
    return 1001;  //eventually it can get to this line, no exception is thrown
} 
```

**编辑：**

在Win8 CP build 8250上发现，升级到build 8375后问题消失。所以我猜这是一个已经在winrt或win8中修复的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:16:05.433

您可以尝试更多类似的方法：

```
using (var fs = await file.OpenAsync(FileAccessMode.ReadWrite))
{
    using (var outStream = fs.GetOutputStreamAt(0))
    {
        using (var dataWriter = new DataWriter(outStream))
        {
            byte[] buffer = new byte[4096];
            dataWriter.WriteBytes(buffer)
            await dataWriter.StoreAsync();
            dataWriter.DetachStream();
        }

        await outStream.FlushAsync();
    }
} 
```

# xml - 如何使用 cURL 发布 XML 文件？

> ID：10633365
> 
> 赞同：6
> 
> 时间：2012-05-17T09:51:20.183
> 
> 标签：xml, post, curl

我正在使用允许我通过 cURL 请求发布内容的 Web 界面。

示例帖子如下所示：

```
<status>A note</status> 
```

但是每当我尝试发送这个时，它似乎不接受 XML

```
curl http://website.com/update -d '<?xml version="1.0" encoding="UTF-8"?><status>test</status>' -H 'Accept: application/xml' \ -H 'Content-Type: application/xml'  -u username:password 
```

我可以做任何其他类型的请求，只是发送这个 XML 似乎不起作用，我在这里做错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T16:13:46.347

`curl`要使用您必须使用 POST 方法并添加参数来发送数据（xml、json、文本等）`--data-urlencode`，如下所示：

```
curl -X POST http://website.com/update \
  --data-urlencode xml="<status>A note</status>" \
  -H 'Accept: application/xml' \
  -H 'Content-Type: application/xml' \
  -u username:password 
```

或者

```
curl -X POST http://website.com/update \
  --data-urlencode "<status>A note</status>" \
  -H 'Accept: application/xml' \
  -H 'Content-Type: application/xml' \
  -u username:password 
```

如果您想通过 GET 发送，我认为您必须在调用`curl`命令之前对字符串进行编码

# c# - 如何从无效的 html 中获取有效的 html？

> ID：10633371
> 
> 赞同：2
> 
> 时间：2012-05-17T09:51:33.453
> 
> 标签：c#, .net, html

我需要一种从无效中获取有效 html 的方法（我在数据库中有脏记录，所以我需要通过它并处理每条记录）。

有效的标准是它可以粘贴到一个`<div></div>`as innerHtml 中。如果不能生成有效的 html，它应该是一个空字符串。我需要它做和 tinyMCE 一样的事情。见： http: [//fiddle.tinymce.com/v6baab](http://fiddle.tinymce.com/v6baab)

示例 1：

`<div>hi there</span>`

应该

`<div>hi there</div>`或者`<span>hi there</span>`

示例 2：

`<style> &amp;amp;amp;lt;!-- /* Font Definitions */ @font-face {font-family: 'Century Gothic';} --&amp;amp;gt; </style> AAAA`

应该

`<p>AAAA</p>`

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:09:23.013

您可以使用 SGMLReader：http: [//developer.mindtouch.com/SgmlReader](http://developer.mindtouch.com/SgmlReader)

# c# - C# Linq 与对象的一部分相交/除外

> ID：10633375
> 
> 赞同：24
> 
> 时间：2012-05-17T09:51:44.570
> 
> 标签：c#, linq, intersect, except

我有一堂课：

```
class ThisClass
{
  private string a {get; set;}
  private string b {get; set;}
} 
```

我想使用 Linq 的 Intersect 和 except 方法，即：

```
private List<ThisClass> foo = new List<ThisClass>();
private List<ThisClass> bar = new List<ThisClass>(); 
```

然后我分别填写这两个列表。例如，我想做以下事情（我知道这是不对的，只是伪代码）：

```
foo[a].Intersect(bar[a]); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-17T10:00:27.550

如果您想要一个想要相交的单个属性的列表，那么所有其他漂亮的 LINQ 解决方案都可以正常工作。但！如果您想在整个班级上相交并因此有 a`List<ThisClass>`而不是`List<string>`您必须编写自己的相等比较器。

```
foo.Intersect(bar, new YourEqualityComparer()); 
```

与 相同`Except`。

```
public class YourEqualityComparer: IEqualityComparer<ThisClass>
{

    #region IEqualityComparer<ThisClass> Members

    public bool Equals(ThisClass x, ThisClass y)
    {
        //no null check here, you might want to do that, or correct that to compare just one part of your object
        return x.a == y.a && x.b == y.b;
    }

    public int GetHashCode(ThisClass obj)
    {
        unchecked
        {
            var hash = 17;
                            //same here, if you only want to get a hashcode on a, remove the line with b
            hash = hash * 23 + obj.a.GetHashCode();
            hash = hash * 23 + obj.b.GetHashCode();

            return hash;    
        }
    }

    #endregion
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-05-17T09:54:47.177

也许

```
// returns list of intersecting property 'a' values
foo.Select(f => f.a).Intersect(bar.Select(b => b.a)); 
```

顺便说一句，财产`a`应该是公开的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-14T18:05:05.013

不确定与相交和比较相比的速度，但如何：

```
//Intersect
var inter = foo.Where(f => bar.Any(b => b.a == f.a));
//Except - values of foo not in bar
var except = foo.Where(f => !bar.Any(b => b.a == f.a)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T09:55:25.933

```
foo.Select(x=>x.a).Intersect(bar.Select(x=>x.a)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T10:02:49.410

究竟想要的效果是什么？当两个实例通过 的唯一值标识时，您想要获得由`a`类中所有 ' 组成的字符串列表，还是获得 的列表？`ThisClass``ThisClass``a`

如果是前者，@lazyberezovksy 和@Tilak 的两个答案应该可以工作。如果是后者，您将不得不重写`IEqualityComparer<ThisClass>`或`IEquatable<ThisClass>`知道`Intersect`是什么使两个`ThisClass`等效实例：

```
 private class ThisClass : IEquatable<ThisClass>
 {
     private string a;

     public bool Equals(ThisClass other)
     {
        return string.Equals(this.a, other.a);
     }
 } 
```

然后你可以打电话：

```
 var intersection = foo.Intersect(bar); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-10T19:44:14.407

我知道这是旧的，但你不能也只是覆盖类本身的 Equals 和 GetHashCode 吗？

```
class ThisClass
{
  public string a {get; set;}
  private string b {get; set;}

  public override bool Equals(object obj)
  {
    // If you only want to compare on a
    ThisClass that = (ThisClass)obj;
    return string.Equals(a, that.a/* optional: not case sensitive? */);
  }

  public override int GetHashCode()
  {
    return a.GetHashCode();
  }
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-05-17T10:01:30.470

您应该创建 IEqualityComparer。您可以将 IEqualityComparer 传递给 Intersect() 方法。这将帮助您更轻松地获得 List（与 bar 相交）。

```
var intersectionList = foo.Intersect(bar, new ThisClassEqualityComparer()).ToList();

class ThisClassEqualityComparer : IEqualityComparer<ThisClass>
{

    public bool Equals(ThisClass b1, ThisClass b2)
    {
        return b1.a == b2.a;
    }

    public int GetHashCode(Box bx)
    {
       // To ignore to compare hashcode, please consider this.
       // I would like to force Equals() to be called
       return 0;
    }

} 
```

# sql - 在 SQL 表连接中平均多个列

> ID：10633379
> 
> 赞同：0
> 
> 时间：2012-05-17T09:52:04.943
> 
> 标签：sql, postgresql

下面的代码正在为我创建一个如下表：

```
SELECT reviews.style_id, AVG("col1"), AVG("col2")
  FROM reviews, audios
 WHERE reviews.consumer_id = audios.consumer_id
 GROUP BY style_id 
```

![在此处输入图像描述](../Images/22d8a5d6394d4cd2115469a0177ad9f5.png)

所以我的问题是我想平均`col1`and `col2`，而不用担心 NULL 值，因为它们不会存在于我的表中。但是，我确实需要维护连接的逻辑。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:58:57.810

这是你想要的吗？

```
SELECT reviews.style_id,
       (AVG("col1") + AVG("col2")) / 2.0
FROM reviews, audios
WHERE reviews.consumer_id = audios.consumer_id
GROUP BY style_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:54:26.077

作为已接受答案的替代方案，并基于 OP 在评论中的澄清：

```
SELECT reviews.style_id, 
       Avg((col1+col2)*0.5) 
FROM   reviews 
       INNER JOIN audios 
         ON reviews.consumer_id = audios.consumer_id 
GROUP  BY reviews.style_id 
```

这种逐行平均值的平均`col1`和`col2`将给出相同的结果。

# iphone - iPhone：如何从 viewForAnnotation 方法中的类中获取值？

> ID：10633383
> 
> 赞同：1
> 
> 时间：2012-05-17T09:52:30.723
> 
> 标签：iphone, objective-c, ios, ipad, mapkit

我正在尝试根据点名称在地图上显示两个图像。

```
@interface MyAnnotationClass : NSObject <MKAnnotation> {
    NSString *_name;
    NSString *_description;
    CLLocationCoordinate2D _coordinate;

}
@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSString *description;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

-(id) initWithCoordinate:(CLLocationCoordinate2D) coordinate; 
```

ViewDidLoad 方法代码：

```
mapView.delegate = self;
    //Initialize annotation
    MyAnnotationClass *commuterLotAnnotation=[[MyAnnotationClass alloc] initWithCoordinate:CLLocationCoordinate2DMake( 39.047752, -76.850388)];
    commuterLotAnnotation.name = @"1";
    MyAnnotationClass *overflowLotAnnotation=[[MyAnnotationClass alloc] initWithCoordinate:CLLocationCoordinate2DMake(  39.047958, -76.852520)];
    overflowLotAnnotation.name = @"2";

    //Add them to array
    self.myAnnotations=[NSArray arrayWithObjects:commuterLotAnnotation, overflowLotAnnotation, nil];

    //Release the annotations now that they've been added to the array
    [commuterLotAnnotation release];
    [overflowLotAnnotation release];

    //add array of annotations to map
    [mapView addAnnotations:_myAnnotations]; 
```

viewFor注解代码：

```
-(MKAnnotationView *)mapView:(MKMapView *)MapView viewForAnnotation:(id<MKAnnotation>)annotation{
    static NSString *parkingAnnotationIdentifier=@"ParkingAnnotationIdentifier";

    if([annotation isKindOfClass:[MyAnnotationClass class]]){

        //Try to get an unused annotation, similar to uitableviewcells
        MKAnnotationView *annotationView=[MapView dequeueReusableAnnotationViewWithIdentifier:parkingAnnotationIdentifier];
        //If one isn't available, create a new one
        if(!annotationView){
            annotationView=[[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:parkingAnnotationIdentifier];
           /* if(imgCount == 0){
                annotationView.image=[UIImage imageNamed:@"passenger.png"];
                imgCount = 1;
            }
            else if(imgCount == 1){
                annotationView.image=[UIImage imageNamed:@"place.png"];
                imgCount = 0;
            }*/
           // if([((MyAnnotationClass)annotation).name isEqualToString: @"1"])
            // code to show image
        }
        return annotationView;
    }
    return nil;
} 
```

现在我想在 viewForAnnotation 中访问 MyAnnotationClass 的 name 成员来决定点和基于点的图像。例如 if([((MyAnnotationClass)annotation).name isEqualToString: @"1"])

但它不起作用并在 ((MyAnnotationClass)annotation) 上显示异常

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:00:07.337

这`([((MyAnnotationClass)annotation).name isEqualToString: @"1"])`应该是`([((MyAnnotationClass *)annotation).name isEqualToString: @"1"])`。您需要将其转换为指向 MyAnnotationClass 的指针 (*)。

# excel - 以编程方式为动态生成的标签插入点击事件代码不起作用

> ID：10633387
> 
> 赞同：4
> 
> 时间：2012-05-17T09:52:57.560
> 
> 标签：excel, vba

我正在使用 VBA 代码在 excel 表中插入一个 ActiveX 控件标签。现在插入按钮后，我试图插入点击事件代码，但它不起作用。下面是代码：

```
Public Function AddButton(strSheetName, counter)
Dim btn As OLEObject
Dim cLeft, cTop, cWidth, cHeight
Dim CodeModule As Object
    With Worksheets(strSheetName).Range("J" & (6 + counter))
        cLeft = .Left + 1
        cTop = .Top + 1
        cWidth = .Width - 2
        cHeight = .Height - 2
    End With
    With Worksheets(strSheetName)
        Set btn = .OLEObjects.Add(ClassType:="Forms.Label.1", Link:=True, DisplayAsIcon:=True, Left:=cLeft, Top:=cTop, Width:=cWidth, Height:=cHeight)
    End With
    btn.Object.Caption = "Add New"
    btn.Name = Left(strSheetName, 3) & counter
    Set CodeModule = ActiveWorkbook.VBProject.VBComponents.VBE.ActiveCodePane.CodeModule
    CodeModule.InsertLines CodeModule.CreateEventProc("Click", btn.Name) + 1, vbTab & "MsgBox ""Hello world"""
End Function 
```

按钮正在插入，但单击事件代码不起作用。当我点击什么都没有发生。这个函数也在循环中被调用。第一次添加按钮，然后一旦尝试添加点击事件代码，循环就会终止，这意味着存在错误。

有什么帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:15:01.093

我相信这是你最后一个问题的延续。

这是你正在尝试的吗？

```
Option Explicit

Sub Sample()
    Dim i As Long

    For i = 1 To 5
        AddButton "Sheet1", i
    Next i
End Sub

Public Sub AddButton(strSheetName As String, counter As Long)
    Dim btn As OLEObject
    Dim cLeft, cTop, cWidth, cHeight

    With Worksheets(strSheetName).Range("J" & (6 + counter))
        cLeft = .Left
        cTop = .Top
        cWidth = .Width
        cHeight = .Height
    End With
    With Worksheets(strSheetName)
        Set btn = .OLEObjects.Add(ClassType:="Forms.Label.1", Link:=True, _
        DisplayAsIcon:=False, Left:=cLeft, Top:=cTop, Width:=cWidth, _
        Height:=cHeight)
    End With
    btn.Object.Caption = "Add New"

    btn.Name = Left(strSheetName, 3) & counter

    With ActiveWorkbook.VBProject.VBComponents( _
    ActiveWorkbook.Worksheets(strSheetName).CodeName).CodeModule
        .InsertLines Line:=.CreateEventProc("Click", btn.Name) + 1, _
        String:=vbCrLf & _
        "MsgBox ""Hello world"""
    End With
End Sub 
```

**跟进**

> 是的，从整个 Excel 项目的特定工作表中清除代码。这就是要求 – user1269291 54 秒前

```
Option Explicit

Sub Sample()
    Dim strSheetName As String

    strSheetName = "Sheet1"

    With ActiveWorkbook.VBProject.VBComponents( _
    ActiveWorkbook.Worksheets(strSheetName).CodeName).CodeModule
        .DeleteLines 1, .CountOfLines
    End With
End Sub 
```

# c# - 选项卡更改事件上的 asp.net c# 验证

> ID：10633389
> 
> 赞同：1
> 
> 时间：2012-05-17T09:53:11.500
> 
> 标签：c#, asp.net, tabcontrol, webforms

我正在使用 c# 和框架 4.0 在 asp.net 中创建一个注册 Web 表单。我创建了一个带有选项卡控件的网页（使用菜单、多视图和 3 个单视图创建的 3 个选项卡）。我想将 webusercontrol 放入 3 视图中。

**问题：**

在标签 1 中，我有一个包含一些必填字段的注册表单。当我将开关从 tab1 更改为 tab2 时，我想检查此字段是否已填写。

我想保留在第一个选项卡上，直到填写所有必填字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:03:16.193

使用验证组并为每个选项卡设置一个，然后在客户端选项卡上更改事件验证当前组：

```
Page_ClientValidate("GroupName") 
```

有关此功能的更多信息，请访问：

[http://www.dotnet-guide.com/validationgroups.html](http://www.dotnet-guide.com/validationgroups.html)

[http://weblogs.asp.net/scottgu/archive/2004/10/24/246945.aspx](http://weblogs.asp.net/scottgu/archive/2004/10/24/246945.aspx)

# cakephp - cakephp：抽象类、工厂、返回对象

> ID：10633393
> 
> 赞同：1
> 
> 时间：2012-05-17T09:53:35.520
> 
> 标签：cakephp

我需要一个或两个想法，我将如何在 cakephp 中做到这一点（使用最新版本）

我正在构建一个基于网络的游戏，您可以在其中收集物品

如果没有框架，我将有一个抽象的基础项目类，每个项目都将扩展到

例如，当显示一个库存时，我会制造用户当前拥有的所有物品，然后为每个物品返回一个对象。

上课...

```
BaseItem
    WeaponItem
    HealingItem

    etc.. 
```

我将如何在 cakephp 中执行此操作？我会为每个项目类别寻找一个模型......我将如何考虑获取对象？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T09:56:15.153

假设您使用数据库作为数据存储，大概您将使用单个表来存储玩家可以收集的所有项目？如果是这样，您可能需要一个模型类。

如果需要，可以在 CakePHP 中为模型创建继承层次结构。但是您通常可以使用 Behaviour 实现模型逻辑的共享。

# c# - 无法在服务器上部署 web 服务

> ID：10633395
> 
> 赞同：1
> 
> 时间：2012-05-17T09:53:44.563
> 
> 标签：c#, asp.net, web-services, c#-4.0

尝试在服务器上部署我的网络服务时出现以下错误（另见屏幕截图）。想不通原因。请帮忙！！

```
Server Error in '/' Application.

Parser Error

Description: An error occurred during the parsing of a resource required to 
service this request. Please review the following specific parse error details 
and modify your source file appropriately. 

Parser Error Message: Could not create type 'WebServices.WebService'.

Source Error: 

Line 1:  <%@ WebService Language="C#" CodeBehind="WebService.asmx.cs" Class="WebServices.WebService" %>

Source File: /WebServices/WebService.asmx    Line: 1 

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

![在此处输入图像描述](../Images/48c5944b1920641a7e6a329d26d5555d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:05:01.717

请验证名称：您的命名空间是 WebServices 还是 WebService？类名正确吗？

我建议您在没有任何代码的情况下创建新的 Web 服务并尝试部署。然后在那里添加一些代码并再次部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:08:14.673

根据声明，确保您具有类名（而不仅仅是我在您的示例中看到的文件名）：

```
<%@ WebService Language="C#" Class="MyNameSpace.MyClass" %>
using System;
using System.Web.Services; 
```

当 WebService 派生类这样声明时：

```
namespace MyNameSpace

public class MyClass: WebService { 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:15:03.553

以下是您应该执行的检查清单列表，以确保您的 Web 服务在您的服务器上正常工作：

[http://www.cjvandyk.com/blog/Lists/Posts/Post.aspx?ID=133](http://www.cjvandyk.com/blog/Lists/Posts/Post.aspx?ID=133)

# wordpress - 为wordpress的内页添加单独的自定义标题

> ID：10633396
> 
> 赞同：-2
> 
> 时间：2012-05-17T09:53:47.493
> 
> 标签：wordpress, header, themes

我是 wordpress 的新手。我已经使用 Appearance->Header 中的自定义标题为主页添加了标题图像。我必须向内页添加不同的图像。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:25:03.940

使用特色图片

[http://robcubbon.com/featured-images-wordpress/](http://robcubbon.com/featured-images-wordpress/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:26:09.477

试试这个 ：

[http://wordpress.org/extend/plugins/dynamic-headers/](http://wordpress.org/extend/plugins/dynamic-headers/)

# asp.net-mvc-3 - 如何在检查 ASP.net MVC 3 中的所有必填字段时实现一条验证消息？

> ID：10633397
> 
> 赞同：0
> 
> 时间：2012-05-17T09:53:50.290
> 
> 标签：asp.net-mvc-3

我想问一些关于如何在检查模型的必填字段时实现一条验证消息的代码。例如：

我有一个名为“AdminUsers”的模型，并具有名字、姓氏、电子邮件、用户名和密码属性。然后，所有这些字段都是必需的。

如果其中一些没有提供，我需要显示一条验证消息（说：“请填写所有标有 * 的字段”），并且，

如果未提供此字段，则标签应更改为红色。

请看下面：

![管理用户](../Images/f537e401b50c8a6ef2b8777c2eabe38c.png) 请指教。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:02:13.497

我建议这里最好的方法是通过您的模型（视图模型）对象实现**IValidatableObject接口。**

# delphi - 按真实角度旋转位图

> ID：10633400
> 
> 赞同：33
> 
> 时间：2012-05-17T09:53:57.917
> 
> 标签：delphi, image-processing, rotation

曾几何时，阅读[这个问题](https://stackoverflow.com/q/7690388/757830)，我想知道如何在不摆弄所有位的情况下将位图旋转任意角度。最近，[其他人](https://stackoverflow.com/q/10464410/757830)也有明显的困难。

已经有很多关于以 90° 间隔旋转的问题，最值得注意的是[这个](https://stackoverflow.com/q/848025/757830)，但我想旋转一个真实的角度。最好可以通过旋转来调整图像大小，并为将添加到图像表面的部分设置自定义（透明）背景颜色。然后我假设例程的签名看起来像：

```
procedure RotateBitmap(Bmp: TBitmap; Angle: Single; AdjustSize: Boolean; 
  BackColor: TColor); 
```

[这些答案](https://stackoverflow.com/q/2270110/757830)提到了构建此例程的以下候选对象：SetWorldTransform、PlgBlt、GDI+，但我希望看到一个（有效的）实现。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-17T09:54:27.760

> **tl;博士;** 使用 GDI+

### 设置世界变换

使用 WinAPI 的[SetWorldTransform](http://msdn.microsoft.com/en-us/library/dd145104(v=vs.85).aspx)，您可以转换设备上下文的空间：旋转、剪切、偏移和缩放。这是通过设置 XFORM 类型的变换矩阵的成员来完成的。[根据文档](http://msdn.microsoft.com/en-us/library/dd145228(v=vs.85).aspx)填写其成员。

```
procedure RotateBitmap(Bmp: TBitmap; Rads: Single; AdjustSize: Boolean;
  BkColor: TColor = clNone);
var
  C: Single;
  S: Single;
  XForm: tagXFORM;
  Tmp: TBitmap;
begin
  C := Cos(Rads);
  S := Sin(Rads);
  XForm.eM11 := C;
  XForm.eM12 := S;
  XForm.eM21 := -S;
  XForm.eM22 := C;
  Tmp := TBitmap.Create;
  try
    Tmp.TransparentColor := Bmp.TransparentColor;
    Tmp.TransparentMode := Bmp.TransparentMode;
    Tmp.Transparent := Bmp.Transparent;
    Tmp.Canvas.Brush.Color := BkColor;
    if AdjustSize then
    begin
      Tmp.Width := Round(Bmp.Width * Abs(C) + Bmp.Height * Abs(S));
      Tmp.Height := Round(Bmp.Width * Abs(S) + Bmp.Height * Abs(C));
      XForm.eDx := (Tmp.Width - Bmp.Width * C + Bmp.Height * S) / 2;
      XForm.eDy := (Tmp.Height - Bmp.Width * S - Bmp.Height * C) / 2;
    end
    else
    begin
      Tmp.Width := Bmp.Width;
      Tmp.Height := Bmp.Height;
      XForm.eDx := (Bmp.Width - Bmp.Width * C + Bmp.Height * S) / 2;
      XForm.eDy := (Bmp.Height - Bmp.Width * S - Bmp.Height * C) / 2;
    end;
    SetGraphicsMode(Tmp.Canvas.Handle, GM_ADVANCED);
    SetWorldTransform(Tmp.Canvas.Handle, XForm);
    BitBlt(Tmp.Canvas.Handle, 0, 0, Tmp.Width, Tmp.Height, Bmp.Canvas.Handle,
      0, 0, SRCCOPY);
    Bmp.Assign(Tmp);
  finally
    Tmp.Free;
  end;
end; 
```

### PlgBlt

PlgBlt函数执行从源设备上下文中的指定矩形到目标设备上下文中的指定平行[四边形](http://msdn.microsoft.com/en-us/library/dd162804(v=vs.85).aspx)的位块传输。`lpPoint`通过参数映射源图像的角点。

```
procedure RotateBitmap(Bmp: TBitmap; Rads: Single; AdjustSize: Boolean;
  BkColor: TColor = clNone);
var
  C: Single;
  S: Single;
  Tmp: TBitmap;
  OffsetX: Single;
  OffsetY: Single;
  Points: array[0..2] of TPoint;
begin
  C := Cos(Rads);
  S := Sin(Rads);
  Tmp := TBitmap.Create;
  try
    Tmp.TransparentColor := Bmp.TransparentColor;
    Tmp.TransparentMode := Bmp.TransparentMode;
    Tmp.Transparent := Bmp.Transparent;
    Tmp.Canvas.Brush.Color := BkColor;
    if AdjustSize then
    begin
      Tmp.Width := Round(Bmp.Width * Abs(C) + Bmp.Height * Abs(S));
      Tmp.Height := Round(Bmp.Width * Abs(S) + Bmp.Height * Abs(C));
      OffsetX := (Tmp.Width - Bmp.Width * C + Bmp.Height * S) / 2;
      OffsetY := (Tmp.Height - Bmp.Width * S - Bmp.Height * C) / 2;
    end
    else
    begin
      Tmp.Width := Bmp.Width;
      Tmp.Height := Bmp.Height;
      OffsetX := (Bmp.Width - Bmp.Width * C + Bmp.Height * S) / 2;
      OffsetY := (Bmp.Height - Bmp.Width * S - Bmp.Height * C) / 2;
    end;
    Points[0].X := Round(OffsetX);
    Points[0].Y := Round(OffsetY);
    Points[1].X := Round(OffsetX + Bmp.Width * C);
    Points[1].Y := Round(OffsetY + Bmp.Width * S);
    Points[2].X := Round(OffsetX - Bmp.Height * S);
    Points[2].Y := Round(OffsetY + Bmp.Height * C);
    PlgBlt(Tmp.Canvas.Handle, Points, Bmp.Canvas.Handle, 0, 0, Bmp.Width,
      Bmp.Height, 0, 0, 0);
    Bmp.Assign(Tmp);
  finally
    Tmp.Free;
  end;
end; 
```

### 图形32

[Graphics32](http://www.graphics32.org/wiki/)是一个专为快速位图处理而设计的库。它需要一些经验才能充分发挥其潜力，但[文档](http://graphics32.org/documentation/Docs/_Body.htm)和提供的示例应该可以帮助您入门。

图像的旋转`TBitmap32`是通过许多可用的转换类之一对其进行转换来完成的。这里需要这个`TAffineTransformation`类。首先，将图像大小的一半移到左上角，然后旋转并将结果移回右下角，可能使用新的图像尺寸。

```
uses
  GR32, GR32_Transforms;

procedure RotateBitmap(Bmp: TBitmap32; Degs: Integer; AdjustSize: Boolean;
  BkColor: TColor = clNone; Transparent: Boolean = False); overload;
var
  Tmp: TBitmap32;
  Transformation: TAffineTransformation;
begin
  Tmp := TBitmap32.Create;
  Transformation := TAffineTransformation.Create;
  try
    Transformation.BeginUpdate;
    Transformation.SrcRect := FloatRect(0, 0, Bmp.Width, Bmp.Height);
    Transformation.Translate(-0.5 * Bmp.Width, -0.5 * Bmp.Height);
    Transformation.Rotate(0, 0, -Degs);
    if AdjustSize then
      with Transformation.GetTransformedBounds do
        Tmp.SetSize(Round(Right - Left), Round(Bottom - Top))
    else
      Tmp.SetSize(Bmp.Width, Bmp.Height);
    Transformation.Translate(0.5 * Tmp.Width, 0.5 * Tmp.Height);
    Transformation.EndUpdate;
    Tmp.Clear(Color32(BkColor));
    if not Transparent then
      Bmp.DrawMode := dmTransparent;
    Transform(Tmp, Bmp, Transformation);
    Bmp.Assign(Tmp);
    Bmp.OuterColor := Color32(BkColor);
    if Transparent then
      Bmp.DrawMode := dmTransparent;
  finally
    Transformation.Free;
    Tmp.Free;
  end;
end;

procedure RotateBitmap(Bmp: TBitmap; Degs: Integer; AdjustSize: Boolean;
  BkColor: TColor = clNone); overload;
var
  Tmp: TBitmap32;
  Transparent: Boolean;
begin
  Tmp := TBitmap32.Create;
  try
    Transparent := Bmp.Transparent;
    Tmp.Assign(Bmp);
    RotateBitmapGR32(Tmp, Degs, AdjustSize, BkColor, Transparent);
    Bmp.Assign(Tmp);
    if Transparent then
      Bmp.Transparent := True;
  finally
    Tmp.Free;
  end;
end; 
```

### GDI+

在 Windows XP 中引入的 Microsoft 的[GDI+](http://msdn.microsoft.com/en-us/library/ms533798(v=vs.85).aspx) API 比默认的 GDI API 更有效。对于 Delphi 2009 及更高版本，可[从此处](http://www.bilsen.com/gdiplus/index.shtml)获得该库。对于较旧的 Delphi 版本，该库可[从此处](http://www.progdigy.com/?page_id=7)获得。

在 GDI+ 中，旋转也是由变换矩阵完成的。绘图的工作方式完全不同。创建一个`TGPGraphics`对象并使用其构造函数将其附加到设备上下文。随后，对象上的绘图操作由 API 翻译，并将输出到目标上下文。

```
uses
  GDIPOBJ, GDIPAPI; // < D2009
  GdiPlus;          // >= D2009

procedure RotateBitmap(Bmp: TBitmap; Degs: Integer; AdjustSize: Boolean;
  BkColor: TColor = clNone);
var
  Tmp: TGPBitmap;
  Matrix: TGPMatrix;
  C: Single;
  S: Single;
  NewSize: TSize;
  Graphs: TGPGraphics;
  P: TGPPointF;
begin
  Tmp := TGPBitmap.Create(Bmp.Handle, Bmp.Palette);
  Matrix := TGPMatrix.Create;
  try
    Matrix.RotateAt(Degs, MakePoint(0.5 * Bmp.Width, 0.5 * Bmp.Height));
    if AdjustSize then
    begin
      C := Cos(DegToRad(Degs));
      S := Sin(DegToRad(Degs));
      NewSize.cx := Round(Bmp.Width * Abs(C) + Bmp.Height * Abs(S));
      NewSize.cy := Round(Bmp.Width * Abs(S) + Bmp.Height * Abs(C));
      Bmp.Width := NewSize.cx;
      Bmp.Height := NewSize.cy;
    end;
    Graphs := TGPGraphics.Create(Bmp.Canvas.Handle);
    try
      Graphs.Clear(ColorRefToARGB(ColorToRGB(BkColor)));
      Graphs.SetTransform(Matrix);
      Graphs.DrawImage(Tmp, (Cardinal(Bmp.Width) - Tmp.GetWidth) div 2,
        (Cardinal(Bmp.Height) - Tmp.GetHeight) div 2);
    finally
      Graphs.Free;
    end;
  finally
    Matrix.Free;
    Tmp.Free;
  end;
end; 
```

### 处理透明度

上面的例程保留了 fead 位图的透明设置，除了需要附加`Transparent`参数的 Graphics32 解决方案。

### 性能和图像质量

我编写了一个测试应用程序（参见下面的完整代码）来调整各种方法的性能并比较生成的图像质量。

第一个也是最重要的结论是 GDI+ 使用了其他没有的抗锯齿，从而产生了最好的图像质量。（我尝试通过设置`CompositingQuality`、`InterpolationMode`、`SmoothingMode`和来防止抗锯齿但未成功`PixelOffsetMode`，因此当不首选抗锯齿时，请不要使用 GDI+。）

此外，到目前为止，GDI+ 解决方案也是最快的方法。

[![试验结果](../Images/ff1f8457e2e265acfe6a6896ecdfdb0c.png "显示原始图像")](https://i.stack.imgur.com/3LAjH.jpg)

```
unit RotateTestForm;

interface

uses
  Windows, SysUtils, Classes, Graphics, Controls, Forms, Dialogs, ExtCtrls,
  JPEG, Math, GR32, GR32_Transforms, GDIPOBJ, GDIPAPI {, GdiPlus};

type
  TTestForm = class(TForm)
  private
    FImage: TImage;
    FOpenDialog: TOpenDialog;
    procedure FormPaint(Sender: TObject);
  public
    constructor Create(AOwner: TComponent); override;
  end;

var
  TestForm: TTestForm;

implementation

{$R *.dfm}

procedure RotateBitmapSWT(Bmp: TBitmap; Rads: Single; AdjustSize: Boolean;
  BkColor: TColor = clNone);
var
  C: Single;
  S: Single;
  XForm: TXForm;
  Tmp: TBitmap;
begin
  C := Cos(Rads);
  S := Sin(Rads);
  XForm.eM11 := C;
  XForm.eM12 := S;
  XForm.eM21 := -S;
  XForm.eM22 := C;
  Tmp := TBitmap.Create;
  try
    Tmp.TransparentColor := Bmp.TransparentColor;
    Tmp.TransparentMode := Bmp.TransparentMode;
    Tmp.Transparent := Bmp.Transparent;
    Tmp.Canvas.Brush.Color := BkColor;
    if AdjustSize then
    begin
      Tmp.Width := Round(Bmp.Width * Abs(C) + Bmp.Height * Abs(S));
      Tmp.Height := Round(Bmp.Width * Abs(S) + Bmp.Height * Abs(C));
      XForm.eDx := (Tmp.Width - Bmp.Width * C + Bmp.Height * S) / 2;
      XForm.eDy := (Tmp.Height - Bmp.Width * S - Bmp.Height * C) / 2;
    end
    else
    begin
      Tmp.Width := Bmp.Width;
      Tmp.Height := Bmp.Height;
      XForm.eDx := (Bmp.Width - Bmp.Width * C + Bmp.Height * S) / 2;
      XForm.eDy := (Bmp.Height - Bmp.Width * S - Bmp.Height * C) / 2;
    end;
    SetGraphicsMode(Tmp.Canvas.Handle, GM_ADVANCED);
    SetWorldTransform(Tmp.Canvas.Handle, XForm);
    BitBlt(Tmp.Canvas.Handle, 0, 0, Tmp.Width, Tmp.Height, Bmp.Canvas.Handle,
      0, 0, SRCCOPY);
    Bmp.Assign(Tmp);
  finally
    Tmp.Free;
  end;
end;

procedure RotateBitmapPLG(Bmp: TBitmap; Rads: Single; AdjustSize: Boolean;
  BkColor: TColor = clNone);
var
  C: Single;
  S: Single;
  Tmp: TBitmap;
  OffsetX: Single;
  OffsetY: Single;
  Points: array[0..2] of TPoint;
begin
  C := Cos(Rads);
  S := Sin(Rads);
  Tmp := TBitmap.Create;
  try
    Tmp.TransparentColor := Bmp.TransparentColor;
    Tmp.TransparentMode := Bmp.TransparentMode;
    Tmp.Transparent := Bmp.Transparent;
    Tmp.Canvas.Brush.Color := BkColor;
    if AdjustSize then
    begin
      Tmp.Width := Round(Bmp.Width * Abs(C) + Bmp.Height * Abs(S));
      Tmp.Height := Round(Bmp.Width * Abs(S) + Bmp.Height * Abs(C));
      OffsetX := (Tmp.Width - Bmp.Width * C + Bmp.Height * S) / 2;
      OffsetY := (Tmp.Height - Bmp.Width * S - Bmp.Height * C) / 2;
    end
    else
    begin
      Tmp.Width := Bmp.Width;
      Tmp.Height := Bmp.Height;
      OffsetX := (Bmp.Width - Bmp.Width * C + Bmp.Height * S) / 2;
      OffsetY := (Bmp.Height - Bmp.Width * S - Bmp.Height * C) / 2;
    end;
    Points[0].X := Round(OffsetX);
    Points[0].Y := Round(OffsetY);
    Points[1].X := Round(OffsetX + Bmp.Width * C);
    Points[1].Y := Round(OffsetY + Bmp.Width * S);
    Points[2].X := Round(OffsetX - Bmp.Height * S);
    Points[2].Y := Round(OffsetY + Bmp.Height * C);
    PlgBlt(Tmp.Canvas.Handle, Points, Bmp.Canvas.Handle, 0, 0, Bmp.Width,
      Bmp.Height, 0, 0, 0);
    Bmp.Assign(Tmp);
  finally
    Tmp.Free;
  end;
end;

procedure RotateBitmapGR32(Bmp: TBitmap32; Degs: Integer; AdjustSize: Boolean;
  BkColor: TColor = clNone; Transparent: Boolean = False); overload;
var
  Tmp: TBitmap32;
  Transformation: TAffineTransformation;
begin
  Tmp := TBitmap32.Create;
  Transformation := TAffineTransformation.Create;
  try
    Transformation.BeginUpdate;
    Transformation.SrcRect := FloatRect(0, 0, Bmp.Width, Bmp.Height);
    Transformation.Translate(-0.5 * Bmp.Width, -0.5 * Bmp.Height);
    Transformation.Rotate(0, 0, -Degs);
    if AdjustSize then
      with Transformation.GetTransformedBounds do
        Tmp.SetSize(Round(Right - Left), Round(Bottom - Top))
    else
      Tmp.SetSize(Bmp.Width, Bmp.Height);
    Transformation.Translate(0.5 * Tmp.Width, 0.5 * Tmp.Height);
    Transformation.EndUpdate;
    Tmp.Clear(Color32(BkColor));
    if not Transparent then
      Bmp.DrawMode := dmTransparent;
    Transform(Tmp, Bmp, Transformation);
    Bmp.Assign(Tmp);
    Bmp.OuterColor := Color32(BkColor);
    if Transparent then
      Bmp.DrawMode := dmTransparent;
  finally
    Transformation.Free;
    Tmp.Free;
  end;
end;

procedure RotateBitmapGR32(Bmp: TBitmap; Degs: Integer; AdjustSize: Boolean;
  BkColor: TColor = clNone); overload;
var
  Tmp: TBitmap32;
  Transparent: Boolean;
begin
  Tmp := TBitmap32.Create;
  try
    Transparent := Bmp.Transparent;
    Tmp.Assign(Bmp);
    RotateBitmapGR32(Tmp, Degs, AdjustSize, BkColor, Transparent);
    Bmp.Assign(Tmp);
    if Transparent then
      Bmp.Transparent := True;
  finally
    Tmp.Free;
  end;
end;

procedure RotateBitmapGDIP(Bmp: TBitmap; Degs: Integer; AdjustSize: Boolean;
  BkColor: TColor = clNone);
var
  Tmp: TGPBitmap;
  Matrix: TGPMatrix;
  C: Single;
  S: Single;
  NewSize: TSize;
  Graphs: TGPGraphics;
  P: TGPPointF;
begin
  Tmp := TGPBitmap.Create(Bmp.Handle, Bmp.Palette);
  Matrix := TGPMatrix.Create;
  try
    Matrix.RotateAt(Degs, MakePoint(0.5 * Bmp.Width, 0.5 * Bmp.Height));
    if AdjustSize then
    begin
      C := Cos(DegToRad(Degs));
      S := Sin(DegToRad(Degs));
      NewSize.cx := Round(Bmp.Width * Abs(C) + Bmp.Height * Abs(S));
      NewSize.cy := Round(Bmp.Width * Abs(S) + Bmp.Height * Abs(C));
      Bmp.Width := NewSize.cx;
      Bmp.Height := NewSize.cy;
    end;
    Graphs := TGPGraphics.Create(Bmp.Canvas.Handle);
    try
      Graphs.Clear(ColorRefToARGB(ColorToRGB(BkColor)));
      Graphs.SetTransform(Matrix);
      Graphs.DrawImage(Tmp, (Cardinal(Bmp.Width) - Tmp.GetWidth) div 2,
        (Cardinal(Bmp.Height) - Tmp.GetHeight) div 2);
    finally
      Graphs.Free;
    end;
  finally
    Matrix.Free;
    Tmp.Free;
  end;
end;

{ TTestForm }

constructor TTestForm.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  Font.Name := 'Tahoma';
  Top := 0;
  ClientWidth := 560;
  ClientHeight := 915;
  Show;
  FImage := TImage.Create(Self);
  FOpenDialog := TOpenDialog.Create(Self);
  FOpenDialog.Title := 'Select an small sized image (min. 100 x 100)';
  FOpenDialog.Options := FOpenDialog.Options + [ofFileMustExist];
  FOpenDialog.Filter := 'JPEG|*.JPG|BMP|*.BMP';
  if FOpenDialog.Execute then
  begin
    FImage.Picture.LoadFromFile(FOpenDialog.FileName);
    OnPaint := FormPaint;
    Invalidate;
  end
  else
    Application.Terminate;
end;

procedure TTestForm.FormPaint(Sender: TObject);
var
  Img: TBitmap;
  Bmp: TBitmap;
  Bmp32: TBitmap32;
  BkColor: TColor;
  AdjustSize: Boolean;
  Degs: Integer;
  Rads: Single;
  RotCount: Integer;
  I: Integer;
  Tick: Cardinal;
begin
  Img := TBitmap.Create;
  Bmp := TBitmap.Create;
  Bmp32 := TBitmap32.Create;
  try
    BkColor := clBtnFace;
    Img.Canvas.Brush.Color := BkColor;
    Img.Width := 100;
    Img.Height := 100;
    Img.Canvas.Draw(0, 0, FImage.Picture.Graphic);
    AdjustSize := False;
    Degs := 45;
    Rads := DegToRad(Degs);
    RotCount := 1000;

    Canvas.TextOut(10, 10, 'Original:');
    Canvas.Draw(10, 30, Img);
    Canvas.TextOut(10, 140, Format('Size = %d x %d', [Img.Width, Img.Height]));
    Canvas.TextOut(10, 160, Format('Angle = %d°', [Degs]));
    Canvas.TextOut(10, 250, Format('%d rotations:', [RotCount]));

    Canvas.TextOut(120, 10, 'SetWorldTransform:');
    Bmp.Assign(Img);
    RotateBitmapSWT(Bmp, Rads, AdjustSize, BkColor);
    Canvas.Draw(120, 30, Bmp);
    if not AdjustSize then
    begin
      Tick := GetTickCount;
      for I := 0 to RotCount - 2 do
        RotateBitmapSWT(Bmp, Rads, AdjustSize, BkColor);
      Canvas.TextOut(120, 250, Format('%d msec', [GetTickCount - Tick]));
      Canvas.Draw(120, 140, Bmp);
    end;

    Canvas.TextOut(230, 10, 'PlgBlt:');
    Bmp.Assign(Img);
    RotateBitmapPLG(Bmp, Rads, AdjustSize, BkColor);
    Canvas.Draw(230, 30, Bmp);
    if not AdjustSize then
    begin
      Tick := GetTickCount;
      for I := 0 to RotCount - 2 do
        RotateBitmapPLG(Bmp, Rads, AdjustSize, BkColor);
      Canvas.TextOut(230, 250, Format('%d msec', [GetTickCount - Tick]));
      Canvas.Draw(230, 140, Bmp);
    end;

    Canvas.TextOut(340, 10, 'Graphics32:');
    Bmp.Assign(Img);
    RotateBitmapGR32(Bmp, Degs, AdjustSize, BkColor);
    Canvas.Draw(340, 30, Bmp);
    if not AdjustSize then
    begin
      Tick := GetTickCount;
      for I := 0 to RotCount - 2 do
        RotateBitmapGR32(Bmp, Degs, AdjustSize, BkColor);
      Canvas.TextOut(340, 250, Format('%d msec', [GetTickCount - Tick]));
      Canvas.Draw(340, 140, Bmp);

      // Without in between conversion to TBitmap:
      Bmp32.Assign(Img);
      Tick := GetTickCount;
      for I := 0 to RotCount - 1 do
        RotateBitmapGR32(Bmp32, Degs, AdjustSize, BkColor, False);
      Canvas.TextOut(340, 270, Format('%d msec (optimized)',
        [GetTickCount - Tick]));
    end;

    Canvas.TextOut(450, 10, 'GDI+ :');
    Bmp.Assign(Img);
    RotateBitmapGDIP(Bmp, Degs, AdjustSize, BkColor);
    Canvas.Draw(450, 30, Bmp);
    if not AdjustSize then
    begin
      Tick := GetTickCount;
      for I := 0 to RotCount - 2 do
        RotateBitmapGDIP(Bmp, Degs, AdjustSize, BkColor);
      Canvas.TextOut(450, 250, Format('%d msec', [GetTickCount - Tick]));
      Canvas.Draw(450, 140, Bmp);
    end;
  finally
    Bmp32.Free;
    Bmp.Free;
    Img.Free;
    OnPaint := nil;
  end;
end;

end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:03:11.587

如果有人正在研究图像旋转，他们可能还会查看 Mitov 视频库（非商业用途免费：[链接](http://www.mitov.com/products/videolab#overview)）。VCL 和 FireMonkey。它处理所有低级细节，这让我们避免了 NGLN 的优秀答案探索的那种详细编码。

过去两年我们一直在使用它，并且在我们的商业应用程序中对它*非常*满意。

它有一个旋转组件，可以处理静态图像和视频流。他们的库是完全多任务的，可以选择使用所有可用的内核和低级原语，在带有英特尔自己的性能库的英特尔芯片组上 ( [http://software.intel.com/en-us/articles/intel-ipp](http://software.intel.com/en-us/articles/intel-ipp/) )

在中等硬件上，我们可以运行多个视频或 bmp 流，我们可以在像素级别实时旋转、剪辑、缩放和处理这些流。

# iphone - UIDatePicker 不显示正确的时间

> ID：10633401
> 
> 赞同：0
> 
> 时间：2012-05-17T09:54:05.763
> 
> 标签：iphone, ios, datepicker, timepicker

我正在使用 datePicker 创建一个 timePicker 。当我单击 textField 时，选择器会打开并且我已经选择了其中的时间，之后选定的时间将显示在该 textfield 中。就我而言，除了 textfield 中显示的时间外，一切正常。它显示错误的时间，尤其是分钟。

这是我创建选择器的代码

```
timePickerView =  [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320, 260)];
timePickerView.backgroundColor = [UIColor clearColor];

    //create toolbar using new
UIToolbar *toolbar1;
toolbar1 = [UIToolbar new];
    //toolbar.barStyle = UIBarStyleBlackTranslucent;
toolbar1.tintColor = [UIColor colorWithRed:0.627 green:0.627 blue:0.655 alpha:1.000];
    //[UIColor colorWithRed:0.6 green:0.6 blue:0.6 alpha:0.6];
[toolbar1 sizeToFit];
toolbar1.frame = CGRectMake(0, 0, 320, 50);

    //Add buttons
UIBarButtonItem *doneButtone1 = [[UIBarButtonItem alloc]
                                initWithBarButtonSystemItem:UIBarButtonSystemItemDone
                                target:self action:@selector(dismissPicker:)];

    //Use this to put space in between your toolbox buttons
UIBarButtonItem *flexItem1 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace
                                                                          target:nil
                                                                          action:nil];

    //Add buttons to the array
NSArray *items1 = [NSArray arrayWithObjects: flexItem1, doneButtone1, nil];

    //release buttons
[doneButtone1 release];
[flexItem1 release];

    //add array of buttons to toolbar
[toolbar1 setItems:items1 animated:NO];
[timePickerView addSubview:toolbar1];
[toolbar1 release];

    UIDatePicker *timePicker = [[UIDatePicker alloc]initWithFrame:CGRectZero];
timePicker.autoresizingMask=UIViewAutoresizingFlexibleWidth;
timePicker.datePickerMode = UIDatePickerModeTime;
timePicker.frame = CGRectMake(0, 50.0f, 320.0, 216);
timePicker.tag = 222;
[timePicker addTarget:self action:@selector(selectTime:) forControlEvents:UIControlEventValueChanged];
[timePickerView addSubview:timePicker];
[timePicker release]; 
```

这是在文本字段中显示时间的代码

```
UIDatePicker *picker =(UIDatePicker *)sender;
DLog(@"%@",picker);

NSDateFormatter *df1 = [[NSDateFormatter alloc] init];
df1.dateStyle = NSDateFormatterMediumStyle;
    //if(picker.tag =222) {
    [df1 setDateFormat:@"HH:MM"];       
    self.timeTF.text = [NSString stringWithFormat:@"%@",[df1 stringFromDate:picker.date]];
    //timeTF.text=[df1 stringFromDate:[NSDate date]];

[df1 release]; 
```

**它正确显示时针，但分钟总是显示 5**

我的代码中有什么错误。任何人都可以帮我找出答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:12:43.413

这条线是问题所在：

```
[df1 setDateFormat:@"HH:MM"]; 
```

`MM`是月份，即 May = 5

你应该使用`mm`.

# uitableview - 按下按钮隐藏/显示搜索栏

> ID：10633402
> 
> 赞同：0
> 
> 时间：2012-05-17T09:54:08.430
> 
> 标签：uitableview, hide, show, searchbar

我有一个带有搜索栏的表格视图。一切正常，但现在我想要一个按钮来隐藏/显示搜索栏。这个功能是我的问题所在。

现在我在屏幕下方创建了一个栏，我为此创建了一个按钮。在代码中，有一个 void 函数可以填充我正在寻找的代码。只是为了让您对代码的外观有一个印象。现在它是空的。

我做了一些研究，并提出了`bringSubViewToFront`HeadsUpUI`sendSubViewToBack`示例应用程序。我的想法是，我可以通过将搜索栏放在前面来显示搜索栏，将其放在 table view 层上，同时将 tableview 设置为 44 像素，内容偏移量左右。

同样，将搜索栏层发送到后面，在表格视图后面隐藏它。所以在 void 函数中我尝试了一些`[parentview sendSubViewToBack:child view]`但没有效果。所以我的问题是：我如何隐藏或显示我的搜索栏，同时有一个表格视图和一个导航栏和一个带有按钮的栏？

亲切的问候，

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:38:06.757

您可以使用`IBOutlate`您的 searchBar，然后使用此 outlate 来显示或隐藏搜索栏

也不要忘记将它与您在 xib 中的 searchBar 连接起来

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:59:44.900

像这样使用 -

```
childview.hidden = YES; 
```

编辑 1-

```
childview.hidden = YES;
[parentview sendSubViewToBack:childview];
[tableView reloadData]; 
```

希望它对你有用。

# ruby-on-rails - 表连接sql到rails活动记录查询

> ID：10633412
> 
> 赞同：4
> 
> 时间：2012-05-17T09:54:40.933
> 
> 标签：ruby-on-rails, postgresql, activerecord

如何将以下内容转换为活动记录查询：

```
SELECT reviews.style_id, AVG("col1"), AVG("col2")
  FROM reviews, audios
 WHERE reviews.consumer_id = audios.consumer_id
 GROUP BY style_id; 
```

`col1`并且`col2`属于audios表，但是它们是唯一命名的（没有相似的列名`reviews`），所以没有歧义错误。

我正在使用 PostgreSQL。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T16:45:22.873

如果您之间有关联`Review`，`Audio`然后是这样的：

```
revs = Review.joins(:audios)
             .group('style_id')
             .select('style_id, avg(col1) as avg_col1, avg(col2) as avg_col2') 
```

这将给出一个`Review`实例列表，`revs`这些实例将具有额外的`avg_col1`和`avg_col2`访问平均值的方法以及通常的`style`/`style_id`方法，但`Review`通常会提供的其他列访问器方法会引发异常。

如果您没有设置关联，则可以手动执行 JOIN：

```
revs = Review.joins('join audios on reviews.consumer_id = audios.consumer_id')
             .group('style_id')
             .select('style_id, avg(col1) as avg_col1, avg(col2) as avg_col2') 
```

如果您只需要原始数据而没有所有 ActiveRecord 包装和开销，那么您可以执行原始 SQL 并使用以下方法手动对其进行哈希化[`select_rows`](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/DatabaseStatements.html#method-i-select_rows)：

```
Review.connection.select_rows(%q{
    select r.style_id, avg(a.col1), avg(a.col2')
    from reviews r
    join audios  a on r.consumer_id = a.consumer_id
    group by r.style_id
}).map do
  { :style_id => r.shift, :avg_col1 => r.shift.to_f, :avg_col2 => r.shift.to_f }
end 
```

这会给你一个哈希数组。您甚至可以使用[`Struct`](https://ruby-doc.org/core/Struct.html)创建简单的数据包装类来简化该方法：

```
c    = Struct.new(:style_id, :avg_col1, :avg_col2)
revs = Review.connection.select_rows(%q{...}).map do |r|
  c.new(r.shift, r.shift.to_f, r.shift.to_f)
end 
```

PS：不要在你的 SQL 中使用隐式连接条件，这只是产生交叉产品的一种快速简便的方法，使用显式连接条件：

```
SELECT ...
  FROM reviews JOIN audios ON reviews.consumer_id = audios.consumer_id
 GROUP BY style_id 
```

# android - 左侧的Android fastScroll

> ID：10633414
> 
> 赞同：2
> 
> 时间：2012-05-17T09:54:50.023
> 
> 标签：android, position, fastscroll

是否可以在左侧而不是右侧设置 fastScroll？喜欢这里：[http ://smartphoneblogging.com/wp-content/gallery/asus-eeepad-transformer-tf101-android-4-0-ics/asus_transformer_tf101_android_4_0_ics_contacts.png](http://smartphoneblogging.com/wp-content/gallery/asus-eeepad-transformer-tf101-android-4-0-ics/asus_transformer_tf101_android_4_0_ics_contacts.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:59:19.647

```
 listView.setVerticalScrollbarPosition(ListView.SCROLLBAR_POSITION_LEFT); 
```

# php - 计算当前类别或下方类别中得分最高的前 5 位用户

> ID：10633415
> 
> 赞同：2
> 
> 时间：2012-05-17T09:54:51.190
> 
> 标签：php, mysql

我的网站上有一个积分系统，不同网站类别中的不同成就可以获得积分。类别可以有子类别和父类别，使用“category_relations”表，“links_to”和“links_from”字段包含相关的 category_id。

我想做的是获取当前类别中得分最高的前 5 名用户以及直接低于该类别的任何类别。

我的“points_awarded”表包含所有奖励积分的所有记录以及来自哪些类别的用户：

user_id,
points_amount, plus (tinyint boolean 是否加分),
minus (tinyint boolean 是否加分),
category_id

我真的不知道从哪里开始。我是否需要两个查询，一个用于获取所有子类别 ID，然后一个用于运行另一个查询以获取所用点的 SUM()？是否可以在一个查询中完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:18:26.303

我需要有关您的数据库表的更多信息才能确定，但​​这样的事情可能会起作用：

```
SELECT 
    `user_id`, 
    SUM(IF(`plus`, `points_amount`, 0)) - SUM(IF(`minus`, `points_amount`, 0)) AS `points`
FROM 
    `points_awarded`
WHERE
    `user_id` = $user_id
    AND (
        `category_id` = $cat_id
        OR `category_id` IN(
            SELECT `links_to`
            FROM `category_relations`
            WHERE `links_from` = $cat_id
        )
    )
GROUP BY `user_id` 
```

不过我很好奇，为什么你有一个加号字段和一个减号字段？如果加号是假的，我们不能假设它是减号吗？为什么无论如何都要有任何一个字段，为什么不将 points_amount 设为签名字段？

# linux - 系统调用会导致linux中的系统恐慌吗？

> ID：10633418
> 
> 赞同：1
> 
> 时间：2012-05-17T09:55:06.247
> 
> 标签：linux, linux-kernel, kernel, system-calls

请不要考虑由于对 panic() 等的调用而导致的系统调用，这实际上应该使系统恐慌。我对通用系统调用更感兴趣，例如[Socket](http://lxr.linux.no/linux+v2.6.18/net/compat.c#L609)、读、写等。如果这样的系统调用确实引起了恐慌，那么这是内核错误吗？我的理解是它应该是一个内核错误。如果传递了错误的参数，那么系统调用应该只是中止而不是使整个系统恐慌。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:29:23.663

奇怪的是，这不是 100% 正确的。

是的，除非内核中存在错误或硬件故障（例如 RAM 芯片损坏），否则非特权用户对系统调用的输入不应引起恐慌。

但是，对于特权用户（例如 root）来说，情况并非如此。考虑一下 write(2) 系统调用，当特权用户（root 是明显的例子）应用到 /dev/mem 时 - 没有什么能阻止你用它覆盖内核内存。

Unix 就是这样 - 如果这是您想要做的，它可以让您轻松上吊自己的绳子的全长 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:54:09.117

当然，内核必须检查系统调用参数、用户权限、资源可用性并处理并发等问题，以便不惜一切代价避免崩溃。底线是一个简单的用户（即使是 root，理想情况下 - 但正如 gby 所提到的，这很困难，因为 root 可以直接访问物理地址空间）无论她多么努力，都不应该使系统崩溃*。*

# javascript - 加载json数据后extjs4表单仍然为空

> ID：10633419
> 
> 赞同：0
> 
> 时间：2012-05-17T09:55:15.840
> 
> 标签：javascript, forms, load, extjs4

我开始对 extjs4 和表单加载感到疯狂。在我的 struts 应用程序中，我有一个简单的表单，我想加载 JSON 数据。

问题是数据从服务器正确加载但从未显示。

这是代码：

```
Ext.onReady(function(){

var formPanel = Ext.create('Ext.form.Panel', {
    renderTo: Ext.get('categoryForm'),
    width: 340,
    bodyPadding: 5,
    waitMsgTarget: true,
    url: '<s:url value="json/save" />',
    method: 'POST',

    loader: {
        type: 'json',
        root: 'category',
        successProperty: 'success'
    },

    fieldDefaults: {
        labelAlign: 'right',
        labelWidth: 85,
        msgTarget: 'side'
    },
    defaultType: 'textfield',

    items: [{
        name: 'category.id',
        hidden: true
    }, {
        fieldLabel: "<s:text name="category.label"/>",
        name: 'label',
        allowBlank: false,
        maxLength: 35
    }, {
        fieldLabel: "<s:text name="category.description"/>",
        name: 'description',
        xtype: 'textarea',
        maxLength: 250
    }, {
        fieldLabel: '<s:text name="category.creationDate"/>',
        name: 'creationDate',
        xtype: 'datefield',
        readOnly: true
    }],

    buttons: [{
        text: "<s:text name="action.modify"/>",
        handler: function() {
            formPanel.getForm().submit();
        }
    }, {
        text: "<s:text name="action.cancel"/>",
        handler: function() {
            formPanel.getForm().reset();
        }
    }]
});
formPanel.show();

formPanel.load({
    url: '<s:url action="json/load"/>',
    params: {
        categoryId: <s:property value="categoryId"/>
    }
});
}); 
```

JSON 数据（有意）响应：

```
{
    "category":
    {
        "creationDate": "2012-04-14T22:29:52",
        "description":"description",
        "id":1,
        "label":"Toto"
    },
    "errorMessage":null,
    "success":true
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:42:58.793

最后我发现问题出在哪里。

JSON 响应必须包含“数据”属性而不是“类别”。

更换属性填写表格。

# r - 轨迹树

> ID：10633421
> 
> 赞同：3
> 
> 时间：2012-05-17T09:55:25.887
> 
> 标签：r, ggplot2

我希望在 R 中绘制类似的东西。这可以用 ggplot 或其他包来完成吗？

![轨迹树](../Images/767dd660c0d667a367f49953eba9a65f.png)

在以下博客中找到：

[http://intelligenttradingtech.blogspot.com/2011/07/pattern-recognition-forward-boxplot.html](http://intelligenttradingtech.blogspot.com/2011/07/pattern-recognition-forward-boxplot.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:52:23.290

以下是如何使用`ggplot2`.

![在此处输入图像描述](../Images/44a56d2bef103e2a3fafc9323b2050d0.png)

我通过指定每条线的开始和结束位置的坐标来手动构建数据。一个改进显然是使用算法自动执行此操作。由于这不是问题，我也没有尝试解决这个问题。

创建数据：

```
arrowdata <- c(
  0, 0, 1, 0,
  1, 1, 2, 1,
  1, -1, 2, -1,
  2, 1.5, 3, 1.5,
  2, 0.5, 3, 0.5
)

linesdata <- c(
  1, 0, 1, 1,
  1, 0, 1, -1,
  2, 1, 2, 1.5,
  2, 1, 2, 0.5
)

labeldata <- data.frame(
  x = c(0.5, 1.5, 2.5),
  y = c(0, 1, 1.5),
  labels=c("Label 1", "Label2", "Label 3")
)

adat <- as.data.frame(matrix(arrowdata, ncol=4, byrow=TRUE))
ldat <- as.data.frame(matrix(linesdata, ncol=4, byrow=TRUE)) 
```

加载`ggplot2`和`grid`包，然后绘制：

```
library(ggplot2)
library(grid) # For arrow() function
ggplot() + 
  geom_segment(
    data=adat, 
    aes(x=V1, y=V2, xend=V3, yend=V4),
    arrow=arrow(length = unit(0.05, "npc"), type="closed"),
    col="blue"
  ) +
  geom_segment(
    data=ldat, 
    aes(x=V1, y=V2, xend=V3, yend=V4),
    col="blue"
  ) +
  geom_text(data=labeldata, aes(x, y, label=labels), 
    size=8, vjust=-0.2, col="blue"
  ) +
  theme_bw() +
  opts(
    axis.text.x=theme_blank(),
    axis.text.y=theme_blank(),
    axis.ticks=theme_blank(),
    axis.title.x=theme_blank(),
    axis.title.y=theme_blank(),
    panel.grid.major=theme_blank(),
    panel.border=theme_blank()
  ) +
coord_cartesian(ylim=c(-1.5, 2)) # Create some additional space for labels 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:23:16.310

您可能会在[http://addictedtor.free.fr/graphiques/](http://addictedtor.free.fr/graphiques/)找到一些东西。那里有各种各样的图形和图表。`plot`现在，使用将在顶点之间绘制线条的基础和`graphics::arrow`函数编写一些代码已经很容易了。例如，

```
arrows(0,1,0,0) 
lines(c(1,1),c(-.5,.5)) 
arrows(1,2,.5,.5) 
```

等等。您是否需要根据数据来调整或放置分支的大小，或者这是一个纯粹的定性树？

# c++ - 访问冲突写入位置 0xaaaaaaaa

> ID：10633424
> 
> 赞同：0
> 
> 时间：2012-05-17T09:55:34.530
> 
> 标签：c++

这是我当前在`Score.h`文件中的分数类代码：-

```
class Score
{

protected:
long m_Scores;
long m_HighScore;
//private:

public:
Score();
~Score();
void Init();
void Update(float deltaMS);
void Render();
void Release();
void SetScore(long sc){
    m_Scores=sc;
}

long GetScore(){
    return m_Scores;
}
void SetHighScore(long sc){
    m_HighScore=sc;
}

long GetHighScore(){
    return m_HighScore;
}
void AddScore(int add);

}; 
```

每当我尝试在类本身中访问 m_Scores 时，都会出现以下错误。

```
Access violation writing location 0xaaaaaaaa. 
```

由于这个原因，该`SetScore()`方法无法运行。我知道我在做一些愚蠢的事情，但无法弄清楚。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:18:27.950

您显然是通过指针访问该类，并且该`pointer's`位置的内存具有 value `0xaaaaaaaa`。这看起来很像未初始化内存的值。

所以我猜你有一个`Score *`变量，你没有填写一些东西。您需要执行以下操作之一

*   将其更改为`Score`, 并使用直接成员访问 ( `.`) 而不是指针间接 ( `->`)
*   初始化变量，`var = new Score();`然后释放它`free var;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:02:39.630

发生这种情况是因为您`Score`尝试 SetScore() 的对象已经过时，已被破坏。注意它的寿命。

# java - 打开 TargetDataLine 时未引发异常

> ID：10633425
> 
> 赞同：0
> 
> 时间：2012-05-17T09:55:37.103
> 
> 标签：java, audio, javasound

根据Javadocs，当我使用`javax.sound.sampledTargetDataLine`以下方法时：

```
public void open(AudioFormat format,int bufferSize) 
```

其中说：

> 使用不满足此要求的请求缓冲区大小调用此方法可能会导致 IllegalArgumentException。`

因此，当我实现以下 Java 代码时：

```
AudioFormat format = getAudioFormat();
DataLine.Info info = new DataLine.Info(TargetDataLine.class,format);

// open the TargetDataLine for capture.
try {
     TargetDataLine line = (TargetDataLine) AudioSystem.getLine(info);
     line.open(format, line.getBufferSize()+3000); 
    }    
catch (LineUnavailableException ex)
{         
   ex.printStackTrace();        
} 
```

但是当我运行上面的代码时，它不会抛出任何异常。现在根据文档：

> `public int getBufferSize()`
> 获取可放入数据线内部缓冲区的最大数据字节数。对于源数据线，这是可以写入数据的缓冲区的大小。对于目标数据线，它是可以从中读取数据的缓冲区的大小。请注意，使用的单位是字节，但始终对应于整数个音频数据的样本帧。

其中表示将返回最大尺寸，并且我添加了 3000

```
line.open(format, line.getBufferSize()+3000); 
```

如上所示，为什么它不抛出任何异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T13:47:58.763

您从 JavaDoc 中遗漏了`open`. 更完整地说，它说：

```
void open(AudioFormat format,
          int bufferSize)
          throws LineUnavailableException 
```

> 打开具有指定格式和请求的缓冲区大小的行，使该行获取任何所需的系统资源并开始运行。缓冲区大小以字节为单位指定，但必须表示整数个样本帧。使用不满足此要求的请求缓冲区大小调用此方法可能会导致 IllegalArgumentException。打开行的实际缓冲区大小可能与请求的缓冲区大小不同。实际设置的值可以通过后续调用DataLine.getBufferSize()来查询

因此，您指定的缓冲区大小可能不是内部缓冲区的大小，甚至可能超过它。

但是，它必须“代表整数个样本帧”，否则会抛出`IllegalArgumentException`. 如果您请求*的内存超出内部分配*的范围，那么您将收到`LineUnavailableException`。这并不意味着请求比当前内部缓冲区更大的大小将导致`LineUnavailableException`.

至少这是我对文档的阅读。

# sql - LONG TEXT 或数千行，或者其他什么？

> ID：10633436
> 
> 赞同：0
> 
> 时间：2012-05-17T09:56:19.533
> 
> 标签：sql, database-design

我正在设计一个程序，用户可以在数千（或可能数百万）人中做出单一选择。我想到了两种将其存储在数据库中的方法：1）每个条目单独一行 2）一个长文本，它只是为新人附加一个选择或修改一个现有人的选择。

我想每个条目的单独行应该更有效，但是如果我们谈论的是数十万个条目，那么我正在寻找的网络开销是什么，而不是仅仅返回一个单个长文本并使用用户的 cpu 来解析文本？

例如，单个长文本可能类似于：

```
Data
[Person A:Choice A][Person B: Choice A][Person C: Choice C]...[Person n:Choice n] 
```

而多行显然是：

```
Person    Choice
A         A
B         A
C         C
....
n         n 
```

也许我一开始就没有以正确的方式思考这个问题。有没有更有效的方法来做这样的事情？

感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:35:56.553

我会将我的评论放在答案中并在某些地方进行扩展。

关于你对`string`vs的决定`Table`。每次一桌。

一个基于表`Person (Id, Name)`、表`Choice (Id, Value)`和表的设计`PersonChoice (Id, PersonId, ChoiceId)`。将为您提供可索引、可搜索和灵活的解决方案。

在 SQL 的文本列中隐藏数据是一个非常糟糕的主意——显然忽略`XML`了数据及其数据类型。但这不适用于这里。

稍后添加统计信息的一种解决方案可能是安排 SQL 代理作业运行数据，解析更改的内容和时间，并将该数据存储在单独的“报告”表中。

在您的设计中需要考虑的事情 - 省去存储和操作 1000 行的麻烦 - 是将选择组合在一起的想法。可以为您节省大量工作（为您自己和服务器）。

欢迎来到数据库设计的世界！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:50:09.370

> 我想每个条目的单独行应该更有效，但是如果我们谈论的是数十万个条目，那么我正在寻找的网络开销是什么，而不是仅仅返回一个单个长文本并使用用户的 cpu 来解析文本？

网络开销（作为两种设计之间的差异）可以忽略不计。本质上，您向服务器发送的所有内容都是您的查询，而服务器返回的所有内容都是结果集。如果您的查询结果是一行，则服务器只返回一行。如果您的查询结果是 10,000 行，则服务器会发回 10,000 行。

*真正的开销在于服务器上的*执行速度和维护。如果您使用索引，服务器将快速找到表中的索引行。但是在“1、2、3、5、6、7、8、10、13、17、18、30、27”这样的单个值中找到 17 可能不会使用索引。

像这样的值也会失去类型安全以及使用外键引用和级联的能力。

# c++ - 在父类的构造函数中调用元素对象的构造函数

> ID：10633437
> 
> 赞同：1
> 
> 时间：2012-05-17T09:56:21.410
> 
> 标签：c++, constructor, parent-child

问题更新：

我想在 C++ 中执行以下操作：

```
struct Param {
public:
    int len;
    int in1;
    float in2;
};

Param params;

class Element {
private:
    int value1;
    float value2;
public:
    Element();
    Element(int n) {value1 = n; value2 = 0;}
    Element(int n1, float n2) {value1 = n1; value2 = n2;}
}

class Parent {
private:
    class Element elem;
    vector<Element> elemVec;
public:
    Parent();
    Parent(int n);
} 
```

我希望编写以下构造函数，以便在调用构造函数时，类元素的`Parent`非默认构造函数也会被调用。我发现需要按如下方式调用构造函数：`elem``elemVec``elem`

```
Parent::Parent(int n) : elem(n) {

} 
```

我现在如何构造向量的每个元素，`elemVec`以便`Element(int, float)`为每个向量元素调用构造函数，`int`并`float`从结构字段`params.value1`和`params.value2`. 的大小`elemVec`需要由 struct field 定义`params.len`。

在构造函数主体中编写循环会导致构造对象的不良行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T10:03:48.263

以下实现应该有效。但是，它依赖于从`int`to的隐式转换`Element`，并不是一个通用的解决方案。

```
Parent::Parent(int n, const vector<int> &numVec)
    : elem(n),
      elemVec(numVec.begin(), numVec.end())
{ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:09:00.753

此解决方案可以满足您的要求：

```
Parent::Parent(int n, const vector<int>& numVec)
    : elem(n)
{
    elemVec.reserve(numVec.size());
    for (auto num : numVec)
        elemVec.emplace_back(num);
} 
```

空向量的默认构造基本上是免费的。

保留分配所需的完整内存块，就像 vector(n) 构造函数一样。

emplace_back 尽可能高效地构建项目。

# c++ - 如何有效地存储和排序生日攻击的哈希值

> ID：10633439
> 
> 赞同：0
> 
> 时间：2012-05-17T09:56:29.913
> 
> 标签：c++, arrays, sorting

我有很多（2^30 x 50 位）哈希函数的输出。我需要以某种方式存储它并将每个新元素与以前的所有元素进行比较，如果它是唯一的则插入。如果我插入新元素时我的哈希值数组没有搞砸，那么我不需要存储哈希值，它们是顺序的。

我如何存储它然后搜索重复？

作为散列值，我只使用“1”，“2”，“3”，“4”，......

已编辑：输出空间为 50 位的散列函数的 BA 需要近 1.25*sqrt(2^50) 次尝试。每个输出 50 位。所以它有将近 250 MB 的空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:40:56.443

[使用](http://ideone.com/inJ3V)std :: [map](http://en.cppreference.com/w/cpp/container/map)：

```
#include <string>
#include <map>
#include <sstream>
#include <algorithm>
#include <iterator>

using namespace std;

string toString(long value)
{
    ostringstream oss;
    oss << value;
    return oss.str();
}

long hash(const string& key)
{
    return 0;
}

string generateKey()
{
    static long value = 0;
    ++value;
    return toString(value);
}

pair<string, long> generateKeyValuePair()
{
    string key = generateKey();
    return make_pair(key, hash(key));
} 
```

主要功能：

```
int main()
{
    map<string, long> hashes;

    generate_n(inserter(hashes, hashes.begin()), 5, generateKeyValuePair);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:07:18.880

不确定您要实现的确切目标，但也许您需要使用[布隆过滤器](http://en.wikipedia.org/wiki/Bloom_filter)作为元素是否存在的初步检查，以加快处理过程。

请注意，当文章说“m 个不同的哈希函数”时，它的真正含义是，m 个不同的函数可以是具有不同参数的相同算法，产生不相关的结果。例如，您可以简单地在要散列的数据前面加上一个 0 到`m-1`. 或者，您可以获取 SHA256 哈希的 256 位并将其分成 24 位组，或者您需要过滤器的大小。

# javascript - Javascript - 按空格分割

> ID：10633440
> 
> 赞同：0
> 
> 时间：2012-05-17T09:56:37.683
> 
> 标签：javascript, regex, split, whitespace

我需要用空格分割字符串，但不是在“（）”或“[]”中找到空格时。我从这里找到了几个类似的问题，但我找不到理想的解决方案。

我要解析的字符串可以是这样的（方括号也可以用普通括号代替）：

> (1)“一些文字[更多文字]”
> 
> (2)“一些文字[更多文字]”

我希望他们像这样分开：

> (1) [“一些”、“文本”、“[更多文本]”]
> 
> (2) [“一些”、“文本[更多文本]”]

[Javascript - 除非在括号内，否则除以空格](https://stackoverflow.com/questions/10469932/javascript-divide-by-spaces-unless-within-brackets) - 这个问题非常相似，答案在第一种 (1) 情况下非常有效。但在第二种 (2) 情况下，它并不能很好地工作。拆分后是这样的：

> [“一些”，“文本[更多”，“文本]”]

有没有一种简单的方法来实现我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:08:02.530

这些似乎有效：

```
1: \[[^\]]+\]|\S+\[[^\]]+\]|\S+
2: \[[^\]]+\]|(\S(\[[^\]]+\])?)+
3: (\S+)?\[[^\]]+\]|\S+ 
```

*   [防爆1](http://regexr.com?30vtv)
*   [Ex2](http://regexr.com?30vub)
*   [Ex3](http://regexr.com?30vu2)

根据[Regex Hero](http://regexhero.net/tester/)的说法，第一个要好得多，而 Miguel 的回答还要快一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:34:26.007

尝试`(/(\w+ )|(\w+)?((\[|\().*(\]|\))$)/g)`

```
var a = "Some text [more text]";
var b = "Some text[more text]"; 
```

结果是：

```
a.match(/(\w+ )|(\w+)?((\[|\().*(\]|\))$)/g) 
```

[“一些”、“文本”、“[更多文本]”]

```
b.match(/(\w+ )|(\w+)?((\[|\().*(\]|\))$)/g) 
```

[“一些”，“文本[更多文本]”]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:04:08.397

使用这个正则表达式：

```
/(\w+)?(\([^\)]*?\)|\[[^\]]*?\])(\w+)?|\w+/g 
```

**[样品](http://jsfiddle.net/Jrfk6/)**：

```
console.log( 'Some(1) text [more text]'.match(regex) );
//Output-> ["Some(1)", "text", "[more text]"]

console.log( '(2) Some text[more text]'.match(regex) );
//Output-> ["(2)", "Some", "text[more text]"]

console.log( '(3 45)Some text[more text]'.match(regex) );
//Output-> ["(3 45)Some", "text[more text]"] 
```

# actionscript-3 - 多个 dispatchHandler Actionscript 3

> ID：10633444
> 
> 赞同：1
> 
> 时间：2012-05-17T09:56:50.003
> 
> 标签：actionscript-3, events, dispatchevent

我想分派一个事件 2 次：

我有一个 MainClass、一个 SecondClass 和一个 ThirdClass。

在 ThirdClass 中，有一个 clickEvent。我将它发送到 SecondClass：

```
 this.addEventListener(MouseEvent.CLICK, clickHandler);

    public static const CLICKED_HANDLER:String = "clickedHandler";

    public function clickHandler(e:MouseEvent):void {
        dispatchEvent(new Event(CLICKED_HANDLER));
    } 
```

我抓住并把它扔进了SecondClass：

```
 object.addEventListener(ThirdClass.CLICKED_Handler, clickedEventListener);

    public static const CLICKED_HANDLER:String = "clickedHandler";

    public function clickedEventListener(e:Event):void {
        dispatchEvent(new Event(CLICKED_HANDLER));
    } 
```

这是我在 MainClass 中发现的：

```
 object.addEventListener(SecondClass.CLICKED_HANDLER, clickedEventListener);

    public function clickedEventListener(e:Event):void {
        trace("click");
    } 
```

但它不会工作......我做错了什么？以及如何获得有关单击的 ThirdClass 对象的信息？（通常有 1 个 dispatchEvent，它是：

```
 var thirdClassObject:ThirdClass = e.currentTarget as ThirdClass; 
```

在 clickHandler 方法中，但是如何使用 2 个 dispatchEvents 来做到这一点？）

所以：我想知道在我的 MainClass 中单击了哪个 ThirdClass 对象。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:19:18.997

当您调度一个事件时，该`target`属性将引用调度程序。
您显然需要的是传递对第三类的引用以及要在主类的事件处理程序中使用的事件。

您有多种选择来实现这一目标。

1.  如果调度程序实例在显示列表中，则使用[事件冒泡](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e54.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7e46)处理父显示对象中的事件。参考构造函数的第二[个参数](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/Event.html#Event%28%29)`Event`和[Event.bubbles](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/Event.html#bubbles)属性。这样，您可以订阅父对象中子对象的任何事件，并检查`Event.target`事件处理程序中的属性。大多数鼠标事件`MouseEvent.CLICK`都默认冒泡。因此，您可以只听他们并检查主要课程中的目标。

    ```
    // inside MainClass
    // notice: we are subscribing to MainClass instance
    this.addEventListener(MouseEvent.CLICK, clickedEventListener);

    public function clickedEventListener(e:MouseEvent):void {
        trace(e.target); // the target is what was actually clicked
        // you may also notice the difference between e.target and e.currentTarget
    }
    ```

    如果您仍然想使用`CLICKED_HANDLER`事件，您可以这样做：

    ```
    // inside ThirdClass
    dispatchEvent(new Event(CLICKED_HANDLER, true));
    // ---------------------------------------^
    ```

    请记住：这仅适用于显示列表成员。
    请参阅[adobe.com 上的事件流文章](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e4f.html)。
2.  创建一个[自定义事件类](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e55.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7e48)并在那里放置引用。（并且您还可以将事件冒泡与自定义事件类一起使用。）这样您将分派您的事件为

    ```
    // inside SecondClass
    public function clickedEventListener(e:Event):void {
        var customEvent:CustomEventClass = new CustomEventClass(CLICKED_HANDLER);
        customEvent.customTarget = e.target;
        dispatchEvent(customEvent);
    }

    // inside MainClass
    public function clickedEventListener(e:CustomEventClass):void {
        trace(e.customTarget );
    }
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:16:29.890

首先，定义“它不起作用......”是什么意思？

SecondClass 是否收到了该事件？如果是这样，你可以试试这个：

```
//SecondClass
public function clickedEventListener(e:Event):void {
    dispatchEvent(e);
}

//MainClass
object.addEventListener(ThirdClass.CLICKED_HANDLER, clickedEventListener); 
```

# iphone - 从应用程序将图片/图像存储在 SQLite DB 中是个好主意吗？

> ID：10633450
> 
> 赞同：2
> 
> 时间：2012-05-17T09:57:06.693
> 
> 标签：iphone, cocoa-touch, sqlite

Stackoverflow 中的一些讨论说将图片存储在数据库中是一个坏主意（因为超时，图像数量会变大并可能导致应用程序崩溃）。所以，要么

一种。图像可以存储在 iPhone 本身中，只有它的位置可以存储在数据库中潜在问题：图像可能被删除（在应用程序之外）& 应用程序下次可能无法加载它们

湾。图像可以缩小到小尺寸（例如，100*100 像素）并存储在 DB 潜在问题中：如果图像缩小到 100x100 像素，尺寸会成为问题吗？

C。做（a）和（b）。因此，图像的小版本将存储在数据库中，然后检索并显示在应用程序中，而如果用户选择查看图像的原始版本（概率很低），那么将被获取从本地目录 & 显示。

请问您的建议？在我看来，（c）似乎是一个不错的选择，以防（a）提到潜在的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:43:23.340

这实际上取决于图像的来源。它们是在用户安装应用程序后从 Internet 下载（或从用户的库/相机导入），还是从 App Store 与应用程序捆绑在一起？

如果正在下载/导入图像，最好的解决方案是按照[http://developer.apple.com/library/ios/#qa/qa1719/_index.html中的建议将图像存储在文件系统中](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)

基本上，如果图像无法替换或重新创建，请将它们存储在`<Application_Home>/Documents`目录中并且不要设置`Do Not Backup`属性。这些项目将备份到 iCloud，即使应用程序从设备中删除，这些数据也会至少保留一段时间。（请记住，您的用户没有无限的 iCloud 空间。请负责。）

-然而-

如果图像与应用程序捆绑在一起，最好的解决方案是将它们直接导入您的 Xcode 项目并从那里引用它们。这样，即使用户删除并重新安装应用程序，您也知道它们始终可用。

我肯定会尽可能远离将图像数据存储在数据库中。在大多数情况下，都有更好、更有效的方法。

# iphone - cancelPreviousPerformRequestsWithTarget

> ID：10633451
> 
> 赞同：1
> 
> 时间：2012-05-17T09:57:17.327
> 
> 标签：iphone, performselector

cancelPreviousPerformRequestsWithTarget 对我不起作用，我检查了每个人都说它工作正常，但对我来说不是

我在 performselector 中调用以下内容

```
[self performSelector:@selector(Opacity:) withObject:self.objopcarray afterDelay:reversedelay]; 
```

现在我想在它触发之前单击按钮取消它所以我做了以下

```
- (void) pressNextButton:(id)sender
{
    [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(Opacity:) object:self.objopcarray];

    if (self.animationON == YES)
    {
        if (self.panel < 16) 
        {
            [self DisplayImages];
            [timer invalidate];
            timer = [NSTimer scheduledTimerWithTimeInterval:sketchanimduration target:self selector:@selector(DisplayImages) userInfo:nil repeats:YES];

            if(self.panel > 16)
            {
                self.panel = 0;
            }
        }
    }

} 
```

但结果还是一样

任何帮助将不胜感激

# javascript - 在最新的浏览器中使用 JavaScript 读取 CSS 规则值

> ID：10633454
> 
> 赞同：0
> 
> 时间：2012-05-17T09:57:19.287
> 
> 标签：javascript, jquery, css

已经问过以下问题[Read CSS rule values with JavaScript? - 2008 年 11 月 27 日](https://stackoverflow.com/questions/324486/how-do-you-read-css-rule-values-with-javascript)。

我在浏览器上尝试了相同的代码`google chrome 19.0.1084.46`，`firefox 12.0`但脚本不起作用。

是否有新的脚本、库（可能使用 jQuery）来在当今最新版本的浏览器上激活相同的任务？

* * *

这里的代码不起作用：

```
function getStyle(className) {
    var classes = document.styleSheets[0].rules || document.styleSheets[0].cssRules
    for(var x=0;x<classes.length;x++) {
        if(classes[x].selectorText==className) {
                (classes[x].cssText) ? alert(classes[x].cssText) : alert(classes[x].style.cssText);
        }
    }
}
getStyle('.test') 
```

* * *

这里是[jsfiddle的链接](http://jsfiddle.net/9vjD2/1/)

# javascript - 画布上下文“bezierCurveTo”在 Chrome 16+ / Safari 5+ 下存在错误

> ID：10633455
> 
> 赞同：1
> 
> 时间：2012-05-17T09:57:23.843
> 
> 标签：javascript, html, google-chrome, canvas, safari

如果抚摸最后一个控制点与第一个点重叠的贝塞尔曲线，则曲线形状不会显示在画布上；示例代码如下

```
 var cv = document.getElementById('cv'), cxt = cv.getContext('2d'),

//  4 points :  last point overlaps first point;
pts = [[100, 100], [400, 50], [350, 300], [100, 100]];

//  draw bezier curve
cxt.beginPath();
cxt.moveTo(pts[0][0], pts[0][1]);
cxt.bezierCurveTo(pts[1][0], pts[1][2], pts[2][0], pts[2][3], pts[3][0], pts[3][4]);

cxt.stroke(); 
```

我之前在 chrome-help 论坛上问过，但从未得到任何回复。为什么没有人注意到这一点？是bug吗？？

由于我现在无权附加图片，请在此处查看实时示例，您肯定知道我在说什么： [Chrome canvas 'bezierCurveTo' bug](http://browser.zc0000.com/chrome-canvas-bezier-bug.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:20:40.527

这是 hack，但您可以在其中一个坐标（x 或 y）上应用很少的偏移量。在这种情况下，第一个点和最后一个点的坐标将不*完全相同*，并且`Chrome`会绘制曲线。尝试这样的事情：

```
pts = [[100, 100], [400, 50], [350, 300], [100, 100]];

//....

cxt.moveTo(pts[0][0], pts[0][1]);
cxt.bezierCurveTo(pts[1][0], pts[1][1], 
                  pts[2][0], pts[2][1], 
                  pts[3][0], pts[3][1]+1e-5); 
```

[**演示**](http://jsfiddle.net/ZcCNe/)

# android - 如何轻松遍历“strings.xml”资源文件中的所有字符串？

> ID：10633456
> 
> 赞同：5
> 
> 时间：2012-05-17T09:57:29.747
> 
> 标签：android, android-resources

我创建了一个使用 TTS 引擎向用户发送反馈的应用程序。为了提高性能，我使用了`synthesizeToFile`and`addSpeech`方法，但是要合成的文本字符串在`strings.xml`文件中，所以我必须为 TTS 引擎说出的每个字符串调用这些方法。

由于 TTS 引擎只使用名称以 开头的字符串`tts_`，是否可以轻松地遍历文件中所有以开头的`tts_`字符串`strings.xml`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-12T04:28:41.183

您可以通过反射获取 strings.xml 中的所有字符串，并仅过滤掉您需要的字符串，如下所示：

```
for (Field field : R.string.class.getDeclaredFields())
{
  if (Modifier.isStatic(field.getModifiers()) && !Modifier.isPrivate(field.getModifiers()) && field.getType().equals(int.class))
  {
    try
    {
      if (field.getName().startsWith("tts_"))
      {
        int id = field.getInt(null);
        // do something here...
      }
    } catch (IllegalArgumentException e)
    {
      // ignore
    } catch (IllegalAccessException e)
    {
      // ignore
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-17T10:09:41.673

您可以将资源名称全部（在定义时）指定为`"prefix"+(1..n)`. 而在代码使用中，

```
int resid=<constant>;
for(i=1;resid!=0;i++){
        resid = this.getResources().getIdentifier("prefix"+i, "strings", this.getPackageName());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T03:24:23.030

您可以将这些 TTS 字符串放入[TypedArray](http://developer.android.com/guide/topics/resources/more-resources.html#TypedArray)中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-16T09:21:56.360

您可以使用以下代码：

```
String[] strings = getResources().getAssets().list("string");
for (int i = 0; i < strings.length; i++) {
                Log.d("aaa ", strings[i]);
            } 
```

遍历字体等其他资源，...只需将字符串替换为文件夹名称。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-17T10:05:44.307

在我所有的项目中，我只是观察到 R.java 中字符串的值以开头`0x7f050000`并且向上计数，例如`0x7f050001, 0x7f050002, 0x7f050003,`....

你可以只是`++`他们：D

希望能帮助到你 ：）

# php - 如何使用 PHP 查找特定时区是否正在观察 DST？

> ID：10633457
> 
> 赞同：0
> 
> 时间：2012-05-17T09:57:34.000
> 
> 标签：php

我有来自世界各地的用户使用我们的系统。他们每个人都选择了他们的本地时区（记录为 UTC，例如 UM8 等）

我们所有的数据都使用 UTC 作为标准保存，因此可以比较所有数据。

我可以使用 codeigniter 的 gmt_to_local() 函数（[http://codeigniter.com/user_guide/helpers/date_helper.html](http://codeigniter.com/user_guide/helpers/date_helper.html)）向用户显示本地日期/时间，但它要求 DST = True/False。

我如何查看时区以查看它当前是否正在观察 DST？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:04:20.393

除了科尔宾的回答（对他+1）：

如果您有真正的时区名称，那么您可以使用如下代码

```
$date = new DateTime('now', new DateTimeZone('Pacific/Auckland'));
echo $date->format('I'); // 0

$date = new DateTime('now', new DateTimeZone('Europe/London'));
echo $date->format('I'); // 1 
```

这意味着在奥克兰（新西兰）它不是 DST，而在伦敦它是

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:00:52.873

你不能。如果您只是记录了 UTC 偏移量，那么您没有足够的信息。您需要一个特定于国家/地区的时区，因为当不是 DST 时，两个国家/地区可能是 UTC X，然后只有一个国家/地区转移到不同的偏移量。

作为一个具体的例子，当 DST 不生效时，纽约和哥伦比亚都是 UTC -5。在 DST 期间，纽约更改为 UTC -4。所以，如果你有 UTC -5，你怎么知道你是否应该在没有位置信息的情况下使用 UTC -4（纽约会切换，这个 DST=true，但哥伦比亚不会）？这是一个相当糟糕的例子，但首先想到的两个位置:)。

# asp.net - 按下后退按钮时强制回发

> ID：10633461
> 
> 赞同：2
> 
> 时间：2012-05-17T09:57:49.777
> 
> 标签：asp.net, postback, back

我在页面上有一个带有组合框的网页，该组合框在页面的 Page_Load 事件中加载了它的数据。

从那个页面我有一个链接可以打开另一个页面（在同一个 IE 窗口中），它允许用户添加/删除应该出现在组合中的项目。

我遇到的问题是当用户向组合中添加新项目时，我需要该项目出现在父页面的列表中。但是，当我单击浏览器上的后退按钮时，父页面上的 Page_Load 事件不会触发，并且新项目不会加载到组合中。

想要处理这个问题的最好方法是什么？

我正在使用 ASP.NET 4.0 和 IE9。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:56:40.520

您可以使用 javascript 并在新窗口上调用 window.parent.location.refresh() 以强制重新加载。

最好的祝福。

# css - 把文字新闻放到一个盒子里？

> ID：10633462
> 
> 赞同：0
> 
> 时间：2012-05-17T09:57:59.193
> 
> 标签：css

在[http://www.youngcreativity.se](http://www.youngcreativity.se)

你可以确定它是一个新闻提要。

当用户上传新闻时，是否有可能所有文本/新闻都像圆角框一样显示？该框应在提要中有多少新闻后自动调整大小。php 代码如下所示。

```
<!DOCTYPE html>
<html lang='en'>
<head>
<style type="text/css">

#boxID{
border:2px solid;
border-radius:25px;
width:auto; 
height:auto;
}

element {
color: black;
}

body {

-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-attachment: fixed;
background-image: url(bgn1.png);
background-repeat: no-repeat;
background-position: center top;
}
.news {
font-family: Rough_Typewriter;
font-size: 36px;
}
</style>

<meta charset="UTF-8">
<title>iWrite</title>
<meta name="view" content="width-device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="keywords" content="">

<link href="css/bootstrap.css" rel="stylesheet">

</head>
<h1 class="news">iWrite</h1>
<p>
<hr>
<p>
<p>
<p>
<p>
<p>
<p>
<p>
<p>
<p>
<a href='post.php'>Want to post a text?</a>
<?php

//connect

mysql_connect("server","username","password") or die(mysql_error());
mysql_select_db("database") or die(mysql_error());

//query the database
$getnews = mysql_query("SELECT * FROM news ORDER BY id DESC") or die(mysql_query());

while ($row = mysql_fetch_assoc($getnews))
{

//get data
$id = $row['id'];
$title = $row['title'];
$body = $row['body'];
$date = $row['date'];

echo "
<b>$title posted on $date</b><br>
";

echo nl2br($body);

echo "<hr>
";

}

mysql_real_escape_string();

?>

</hr></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:11:26.417

您可以将 CSS 半径添加到您的 Div/类：

```
{
border:2px solid;
border-radius:25px;
} 
```

您可以通过将其放入您的 css 类/id 中来使用它：

```
#boxID{
border:2px solid;
border-radius:25px;
}

<div id="boxID"></div> 
```

或者你可以根本不使用 CSS 类/ID（这并不酷）：

```
<div id="boxID" style="border:2px solid; border-radius:25px;"></div> 
```

编辑：

好的，要拥有一个大圆形框，请执行以下操作：

```
<!DOCTYPE html>
<html lang='en'>
<head>
<style type="text/css">

#boxID{
border:2px solid;
border-radius:25px;
width:auto; 
height:auto;
}

element {
color: black;
}

body {

-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-attachment: fixed;
background-image: url(bgn1.png);
background-repeat: no-repeat;
background-position: center top;
 text-align: center;
}
.news {
font-family: Rough_Typewriter;
font-size: 36px;
}
.bigBox{

border:2px solid white;
border-radius:10px;
}
</style>

<meta charset="UTF-8">
<title>iWrite</title>
<meta name="view" content="width-device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="keywords" content="">

<link href="css/bootstrap.css" rel="stylesheet">

</head>
<div class="bigBox">
<h1 class="news">iWrite</h1>
<p>
<hr>
<p>
<p>
<p>
<p>
<p>
<p>
<p>
<p>
<p>
<a href='post.php'>Want to post a text?</a>
<?php

//connect

mysql_connect("server","username","password") or die(mysql_error());
mysql_select_db("database") or die(mysql_error());

//query the database
$getnews = mysql_query("SELECT * FROM news ORDER BY id DESC") or die(mysql_query());

while ($row = mysql_fetch_assoc($getnews))
{

//get data
$id = $row['id'];
    $title = htmlspecialchars(strip_tags($row['title'])); 
$body = htmlspecialchars(strip_tags($row['body']));
$date = $row['date'];

echo "
<b>$title posted on $date</b><br>
";

echo nl2br($body);

echo "<hr>
";

}

?>

</hr>
</div></html> 
```

试试看。

# html - Build directory .js files missing, css link broken, jpegs not processing - common issue?

> ID：10633467
> 
> 赞同：0
> 
> 时间：2012-05-17T09:58:06.620
> 
> 标签：html, ant, html5boilerplate

I'm running HTML5 Boilerplate 3.0 and the latest ant build script. I'm on Windows 7.

After a few issues, the .bat file now executes and everything runs. Upon completion though the script directory is my *publish* folder is empty, though I have the following .js files in my *intermediate* directory:

*   js/scripts-concant.min.js
*   js/scipt.js
*   js/plugins.js
*   js/libs/jquery-1.7.1.js
*   js/lib/modernizr-2.5.3.min.js

In a possibly related issue, my .css file is minified and renamed and links beautifully from *index.html* but the rest of the files continue to try to link to style.css

In a maybe possibly related issue, I get a can't open for writing error on every single jpeg that it tries to open. They're copied across fine though, so I just wanted to include this for completion.

I've Googled to no avail and can't seem to find a common reason this would happen. I'd really appreciate any pointers, I don't mind fixing things myself, I just can't find a common thread here.

Many thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T04:23:04.150

For the css issue I was having this issue because I had to include all index files by putting specifying *.html in config/project.properties file.

```
# Web Pages
#
# These are the pages (files) that will be served to users (.html, .php, .asp, etc).
Files in this property will
# be minified / optimised and have any stylesheet or javascript references updated to
the   minified examples
#
# The paths need to be relative 
#
# Files can be added in a comma separated form
file.pages        = *.html 
```

Don't know about the other issues

# iphone - 无法读取/写入数据到 iPhone 中的 .plist 文件

> ID：10633469
> 
> 赞同：0
> 
> 时间：2012-05-17T09:58:19.370
> 
> 标签：iphone, ios, ipad, plist, epub

我是 iPhone 开发人员的新手，我正在创建 ePub 阅读器来阅读 ePub 文件。

我的 iphone 应用程序中有 plist，我想在我的 .plist 文件中读取和写入数据，我在其中遇到了问题。

这是我的代码片段，

**逻辑：**首先我正在下载一个 ePub 文件，`.ePub`文件将被下载到这个路径

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
NSLog(@"basePath=%@",basePath); 
```

输出：- =`/Users/krunal/Library/Application Support/iPhone Simulator/5.1/Applications/6B7FCD58-EDF9-44F4-8B33-5F3542536F92/Documents`

现在，我想将下载 `.ePub`文件的名称写入我的文件中`.plist`

`code:`

```
NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithContentsOfFile: basePath];

    [data setObject:[NSNumber numberWithInt:value] forKey:@"value"];

    [data writeToFile: plistPath atomically:YES];
    [data release]; 
```

我试过这个，但我无法写入我的`.plist`文件。

***任何帮助将不胜感激。***

**提前致谢 ！！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:12:09.657

使用 NSUserDefault 更容易，您的数据将保存到 plist 文件中，如下代码：

```
- (void)setOverviewGroupInstrument:(BOOL)isGroupded {
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setObject:[Your array] forKey:[Your Key]];
[prefs synchronize];
} 
```

然后你可以阅读：

```
- (NSMutableArray*)getOverviewInstrumentList {
    return [prefs objectForKey:[Your Key]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:07:29.003

```
NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithContentsOfFile: basePath]; 
```

*此处的数据*为零，您应该使用以下命令对其进行初始化：

```
NSMutableDictionary *data = [[NSMutableDictionary alloc] init]; 
```

编辑我的答案更清楚：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
if ( basePath == nil ) {
     return
}
NSMutableDictionary *data = [[NSMutableDictionary alloc] init];
[data setObject:[NSNumber numberWithInt:value] forKey:@"value"];
NSString *plistPath = [NSString stringWithFormat:@"%@/name.plist", basePath];
[data writeToFile: plistPath atomically:YES];
[data release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:27:34.407

你的意思：

```
NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithContentsOfFile: plistPath]; 
```

?

* * *

未经测试的代码如下：

步骤1：将文件复制到它的文件夹。

```
NSError *error1;
BOOL resourcesAlreadyInDocumentsDirectory;
BOOL copied1;
NSFileManager *fileManager = [NSFileManager defaultManager];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath1 = [documentsDirectory stringByAppendingString:@"/epub.plist"];

resourcesAlreadyInDocumentsDirectory = [fileManager fileExistsAtPath:filePath1];

if(resourcesAlreadyInDocumentsDirectory == YES) {

} else {

    NSString *path1 = [[[NSBundle mainBundle] resourcePath] stringByAppendingFormat:@"/epub.plist"];
    copied1 = [fileManager copyItemAtPath:path1 toPath:filePath1 error:&error1];

    if (!copied1) {
        NSAssert1(0, @"Failed to copy epub.plist. Error %@", [error1 localizedDescription]);
    }
} 
```

第二步：打开

```
NSMutableDictionary* dict = [[NSMutableDictionary alloc] initWithContentsOfFile:filePath1]; 
```

第 3 步：向其写入数据

```
[dict setObject:[NSNumber numberWithInt:value] forKey:@"value"];
[dict writeToFile:path atomically:YES]; 
```

# xcode - 屏幕保护程序未安装在其他机器首选项窗格中

> ID：10633476
> 
> 赞同：3
> 
> 时间：2012-05-17T09:58:35.763
> 
> 标签：xcode, macos, screensaver

我正在编写一个简单的屏幕保护程序应用程序。我从 Xcode运行*Product > Archive ，* *Distribute*，*Save built products*并获得*.saver*文件。然后我可以在我的开发机器上毫无问题地安装它，而在其他机器（64 位，10.7 以及）上它不会安装它。

实际上，如果我将 .saver 文件移动到 /Users/user/Library/Screen Savers/ 并转到 Preferences Pane，它会抱怨说：“您无法在这台计算机上使用此屏幕保护程序。请联系开发人员以获取最新信息日期版本。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T06:13:56.883

我一直在尝试编写屏幕保护程序并在屏幕保护程序预览面板中滚动显示此警告，如果我使用折旧的代码 - 我通常发现查看 Objective C 参考资料时会建议使用替代品

例如，这些都在`NSString.h`

```
+ (id)stringWithContentsOfURL:(NSURL *)url NS_DEPRECATED(10_0, 10_4, 2_0, 2_0); 
```

导致警告

```
+ (id)stringWithContentsOfURL:(NSURL *)url encoding:(NSStringEncoding)enc error:(NSError **)error; 
```

没有

`Ctrl`+单击菜单然后选择跳转到定义然后突出显示并`Alt`单击以获取建议的替换

# c# - asp.net中基于表字段绑定表单控件

> ID：10633477
> 
> 赞同：0
> 
> 时间：2012-05-17T09:58:41.177
> 
> 标签：c#, asp.net, winforms, visual-studio-2010

我在窗口应用程序中启动了新项目，我对该项目的要求是：
1）创建动态表单。
2) 之前我在表 tbl_settings 中添加了一些设置。新添加的动态表单应该包含在设置表单中选择的控件（保存在 tbl_setting 表中）。
例如设置表单包含
i) 表单名称 ii) 当前日期复选框 iii) 地址复选框 iv) 名称复选框 v) 性别
，同时添加动态表单客户我将检查 i,ii,iii,iv,v 但同时创建公司表单我将只选择 i,ii,iii,iv 而不是 v 那个时候通过查看动态表单公司我将**在表单标题、当前日期文本框、地址文本框、名称中仅输入表单的名称文本框应该在表单中可用**以及客户中的某些内容，除了该表格中的性别下拉列表等。
`Is it possible to create dynamic forms & fields in window forms?`
为什么我这样问意味着在visual foxpro中这个选项是使用控制源属性提供的。
在此先感谢&回复是可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T06:54:58.627

Yes it is possible to generate dynamic forms but you need to take care of size and point/location of the object within form. Have you look into the file xyzClass.designer.cs which automatically generated/modified when you drag n drop controls onto the forms ?, this is how you have to do that and assign dynamic values from Database while creating the object.

for e.g adding a label to win form programmatically.

```
public System.Windows.Forms.Label lblDynamic;
lblDynamic = new System.Windows.Forms.Label();

lblDynamic.AutoSize = true;
lblDynamic.Enabled = false;
lblDynamic.Location = new System.Drawing.Point(291, 68);
lblDynamic.Name = "lblDynamic";
lblDynamic.Text = "My dynamic label";
lblDynamic.Size = new System.Drawing.Size(0, 13);
lblDynamic.TabIndex = 1;
lblDynamic.Visible = false;
Form1.Controls.Add(this.lblDynamic);
Form1.Show(); 
```

# c# - 如何获取 MP4（视频文件）的声音部分？

> ID：10633479
> 
> 赞同：4
> 
> 时间：2012-05-17T09:58:46.187
> 
> 标签：c#, windows-phone-7, audio, mp4, aac

我正在开发一个 windows phone 7 应用程序，它可以录制视频。我想获取视频文件（MP4）的声音部分并对声音进行一些增强。我相信声音在 MP4 中保存为 AAC 帧。（对吗？）如何提取视频 MP4 文件的声音？

由于这是一个视频文件，它可能是一个巨大的文件。所以上传到云端并进行处理并不是一个好的选择。由于这个 WP7 应用程序我不能使用未打包的 dll :( 有没有办法在纯 C# 中做？任何开源工具/示例？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T11:12:13.213

MP4 是一种容器格式，实际上声音部分并不总是 AAC。它可以是 MP3 或任何其他数量的不同音频格式。您可能正在考虑 M4A，我认为这需要 AAC 或 ALAC。

关于音频提取，应该可以仅使用托管代码从 MP4 中提取音频。您必须阅读 MP4 格式（例如，[此处-](http://www.digitalpreservation.gov/formats/fdd/fdd000155.shtml "这里")[这个问题](https://stackoverflow.com/questions/3057157/anyone-familiar-with-mp4-data-structure "这个问题")也值得一读），然后在文件中搜索音频的位置，然后将其复制到自己的缓冲区或进行操作块。即使那样，您也必须能够识别它何时不是您的应用程序不支持的音频格式。

可能已经存在一个可以完成所有这些工作的 .net 库，但我不知道。它可能不是很受欢迎，因为托管代码绝对不是解决此问题的最佳角度，但考虑到这是 Windows Phone，正如您所指出的，它是您唯一的方法。

祝你好运！

# c++ - boost::math::erf 的算法

> ID：10633480
> 
> 赞同：6
> 
> 时间：2012-05-17T09:58:47.647
> 
> 标签：c++, math, boost, distribution, numerical-methods

boost的erf函数背后的算法是否有任何详细信息？模块的文档不是很精确。我发现的只是几种方法混合在一起。对我来说，它看起来像是 Abramowitz 和 Stegun 的变体。

*   哪些方法是混合的？
*   方法是如何混合的？
*   erf 函数（恒定时间）的复杂度是多少？

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T11:01:57.337

[Boost Math Toolkit](http://www.boost.org/doc/libs/1_49_0/libs/math/doc/sf_and_dist/html/)的文档有一长串[参考文献](http://www.boost.org/doc/libs/1_49_0/libs/math/doc/sf_and_dist/html/math_toolkit/backgrounders/refs.html)，其中包括 Abramowitz 和 Stegun。[erf-function](http://www.boost.org/doc/libs/1_49_0/libs/math/doc/sf_and_dist/html/math_toolkit/special/sf_erf/error_function.html)接口包含一个[策略](http://www.boost.org/doc/libs/1_49_0/libs/math/doc/sf_and_dist/html/math_toolkit/policy.html)模板参数，可用于控制数值精度（以及因此它的运行时复杂度）。

```
#include <boost/math/special_functions/erf.hpp>
namespace boost{ namespace math{

template <class T>
calculated-result-type erf(T z);

template <class T, class Policy>
calculated-result-type erf(T z, const Policy&);

template <class T>
calculated-result-type erfc(T z);

template <class T, class Policy>
calculated-result-type erfc(T z, const Policy&);

}} // namespaces 
```

**更新**：

下面是前面提供的对 erf 函数的引用的“实施”部分的逐字副本：

**执行**

这些函数的所有版本首先使用通常的反射公式来使它们的参数为正：

```
erf(-z) = 1 - erf(z);

erfc(-z) = 2 - erfc(z);  // preferred when -z < -0.5

erfc(-z) = 1 + erf(z);   // preferred when -0.5 <= -z < 0 
```

这些函数的通用版本是根据不完整的 gamma 函数实现的。

当有效数字（尾数）大小被识别时（目前用于 53、64 和 113 位实数，加上通过提升为双精度处理的单精度 24 位），然后使用 JM 设计的一系列有理近似值。

对于 z <= 0.5，则使用 erf 的有理近似值，基于 erf 是奇函数的观察结果，因此 erf 使用以下公式计算：

```
erf(z) = z * (C + R(z*z)); 
```

其中有理近似 R(z*z) 针对绝对误差进行了优化：只要它的绝对误差与常数 C 相比足够小，那么在计算 R(z*z) 期间产生的任何舍入误差都会有效从结果中消失。因此，该区域中 erf 和 erfc 的误差非常低：仅在极少数情况下最后一位不正确。

对于 z > 0.5，我们观察到在一个小区间 [a, b) 内：

```
erfc(z) * exp(z*z) * z ~ c 
```

对于一些常数 c。

因此对于 z > 0.5，我们使用以下方法计算 erfc：

```
erfc(z) = exp(-z*z) * (C + R(z - B)) / z; 
```

R(z - B) 再次针对绝对误差进行了优化，常数 C 是 erfc(z) * exp(z*z) * z 在范围端点处的平均值。再一次，只要 R(z - B) 中的绝对误差与 c 相比较小，那么 c + R(z - B) 将被正确舍入，结果中的误差将仅取决于 exp 的准确性功能。在实践中，除极少数情况外，错误仅限于结果的最后一位。选择常数 B 使得有理逼近范围的左端为 0。

对于 [a, +∞] 范围内的较大 z，上述近似值修改为：

```
erfc(z) = exp(-z*z) * (C + R(1 / z)) / z; 
```

有理近似值解释得[**非常详细**](http://www.boost.org/doc/libs/1_49_0/libs/math/doc/sf_and_dist/html/math_toolkit/backgrounders/remez.html)。如果您需要更多详细信息，您可以随时查看[源代码](http://www.boost.org/doc/libs/1_49_0/boost/math/special_functions/erf.hpp)。

# java - 在页面上拆分文本

> ID：10633481
> 
> 赞同：0
> 
> 时间：2012-05-17T09:58:50.210
> 
> 标签：java, android

如何在页面之间拆分文本？想知道如何用 WebView 或 TextView 中的结论来做 HTML，甚至可能用图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:08:17.753

您可以使用 css 拆分文本。

```
div {
-moz-column-count:2;
-webkit-column-count:2;
column-count:2;
} 
```

不支持 IE。

# asp.net - Linq to Xml - 对象引用未设置为对象的实例

> ID：10633484
> 
> 赞同：0
> 
> 时间：2012-05-17T09:58:56.757
> 
> 标签：asp.net, razor, linq-to-xml

尝试将 XDocument 转换为对象列表时遇到问题，尤其是 Categories 元素。以下是 XML 的片段，它返回以下格式的节目列表。

```
<Show>
  <Name>OLYMPIC GAMES</Name>
  <Artist>OLYMPIC GAMES</Artist>
  <OnSale>false</OnSale>
  <DateOnSale>2011-03-11T00:00:00</DateOnSale>
  <DoorsOpen>2012-12-31T10:00:00</DoorsOpen>
  <Starts>2012-12-31T10:00:00</Starts>
  <BespokeDate>25 July 2012 - 12 August 2012</BespokeDate>
  <Status Code="3">SOLD OUT</Status>
  <Categories>
    <Category Id="190">OTHER</Category>
  </Categories>
  <Prices>
    <Price Type="1">
      <Status Code="24">ORDER</Status>
      <FaceValue>0.00</FaceValue>
      <BookingFee>0.00</BookingFee>
      <TicketPrice>0.00</TicketPrice>
      <Description>UNRESERVED</Description>
    </Price>
  </Prices>
  <Venue Uri="/venues/">
    <Name>Various venues</Name>
    <Town></Town>
  </Venue>
</Show> 
```

下面是我创建的用于建模 XML 数据的类

```
public class Show {
  public string Name { get; set; }
  public string Artist { get; set; }
  public bool OnSale { get; set; }
  public DateTime DateOnSale { get; set; }
  public DateTime DoorsOpen { get; set; }
  public DateTime Starts { get; set; }
  public string BespokeDate { get; set; }
  public Status Status { get; set; }
  public IEnumerable<Category> Categories { get; set; }
  public Venue Venue { get; set; }
}

public class Status
{
  public int Code { get; set; }
  public string Description { get; set; }
}

public class Category
{
  public int Id { get; set; }
  public string Name { get; set; }
}

public class Venue
{
  public string Uri { get; set; }
  public string Name { get; set; }
  public string Town { get; set; }
} 
```

下面是用于创建 Show 对象的 Linq to XML

```
var shows = from s in xdoc.Descendants("Show")
  where 
    s.Element("OnSale").Value.AsBool() != false
  select
    new Show {
      Name = s.Element("Name").Value,
      Artist = s.Element("Artist").Value,
      OnSale = s.Element("Name").Value.AsBool(),
      DateOnSale = s.Element("DateOnSale").Value.AsDateTime(),
      DoorsOpen = s.Element("DoorsOpen").Value.AsDateTime(),
      Starts = s.Element("Starts").Value.AsDateTime(),
      BespokeDate = s.Element("BespokeDate").Value,
      Status = new Status { 
        Code = s.Element("Status").Attribute("Code").Value.AsInt(),
        Description = s.Element("Status").Value
      },
      Categories = (from c in s.Element("Categories").Elements("Category")
        select new Category { 
            Id = s.Attribute("Id").Value.AsInt(),
            Name = s.Value
          }),
      Venue = new Venue {
        Name = s.Element("Venue").Element("Name").Value,
        Town = s.Element("Venue").Element("Town").Value
      }
}; 
```

下面是显示 Show 的代码片段

```
foreach(var show in shows)
{
  <p>
    Name: @show.Name | 
    Status: @show.Status.Description | 
    Venue: @show.Venue.Name | 
    Categories: @string.Join(",", show.Categories.Select(x => x.Name))
  </p>
} 
```

每当尝试显示类别时，都会出现以下错误“对象引用未设置为对象的实例”。据我所知，每个节目都有一个或多个类别。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:03:34.623

这就是问题：

```
 Categories = (from c in s.Element("Categories").Elements("Category")
    select new Category { 
        Id = s.Attribute("Id").Value.AsInt(),
        Name = s.Value
      }), 
```

您正在使用`s.Attribute`and`s.Value`而不是`c.Attribute`and `c.Value`。

我还建议使用显式转换来`int`代替`Value.AsInt()`：

```
 Categories = (from c in s.Element("Categories").Elements("Category")
    select new Category { 
        Id = (int) c.Attribute("Id"),
        Name = (string) c.Value
      }), 
```

# sql - 格式化分组 Tablix 报表中单元格边框的规则

> ID：10633488
> 
> 赞同：0
> 
> 时间：2012-05-17T09:59:05.377
> 
> 标签：sql, reporting-services, ssrs-2008

有谁知道是否有规则规定了分组 tablix 报告中单元格边框格式的呈现顺序？

我有一个组 - 单元格的格式行为不可预测，我猜 RS 应用它的格式有一个顺序，即如果我突出显示了整个组行并应用了格式 X，它将在之前应用或在我对该行的单个单元格应用格式之后？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:53:21.360

它的父->子。

例如，如果您想要一个 5 英寸的固定宽度，则将其设置在父级上，其子级将自行排列在 5 英寸上。

# sql - 多列的 Sql Between 子句

> ID：10633499
> 
> 赞同：2
> 
> 时间：2012-05-17T10:00:03.400
> 
> 标签：sql

我尝试通过使用 Between 子句来实现查询，但这存在一些问题

S_E1 的第一个查询：

这个查询返回我需要的确切数据，这里的数据计数是 43。

```
select RECORD_TIMESTAMP as DateRecorded, ROUND (S_E1 ,2 )as S_E1
from TBL_SENSORS
Where RECORD_TIMESTAMP Between '4/28/2012 12 :00 AM' 
                           and '5/17/2012 12 :00 AM'
And ( S_E1 Between 10 And 100 ) 
```

S_E2 的第二个查询：

这个查询返回我需要的确切数据，这里的数据计数是 68。

```
select RECORD_TIMESTAMP as DateRecorded, ROUND (S_E2 ,2 )as S_E2
from TBL_SENSORS
Where RECORD_TIMESTAMP Between '4/28/2012 12 :00 AM'
                           and '5/17/2012 12 :00 AM'
And ( S_E2 Between 10 And 100 ) 
```

**问题 ：**

但是当我将这些查询组合到一个查询中时，它会给出错误的数据。它给了我 73 行。我认为它应该给 111 行

```
select RECORD_TIMESTAMP as DateRecorded, 
       ROUND (S_E2 ,2 )as S_E2, 
       ROUND (S_E1 ,2 ) as S_E1
from TBL_SENSORS
Where RECORD_TIMESTAMP Between '4/28/2012 12 :00 AM'
                           and '5/17/2012 12 :00 AM'
And ( S_E2 Between 10 And 100) 
and (S_E1 Between 10 And 100  ) 
```

请给我一些想法我在这里错了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:03:59.300

使用`OR`代替`AND`运算符

```
SELECT RECORD_TIMESTAMP AS DateRecorded, 
       Round (S_E2, 2)  AS S_E2, 
       Round (S_E1, 2)  AS S_E1 
FROM   TBL_SENSORS 
WHERE  RECORD_TIMESTAMP BETWEEN '4/28/2012 12 :00 AM' AND '5/17/2012 12 :00 AM' 
       or ( S_E2 BETWEEN 10 AND 100 ) 
       or ( S_E1 BETWEEN 10 AND 100 ) 
```

在查询中，不保证会得到 111 条记录，因为两个条件可能有共同的记录。

条件 1 -`( S_E2 BETWEEN 10 AND 100 )`

条件 2 -`( S_E1 BETWEEN 10 AND 100 )`

或者

在两个查询中使用 Union All 来获取所有记录 (111)。

```
select RECORD_TIMESTAMP as DateRecorded, ROUND (S_E1 ,2 )as S_E1, 0 as S_E2
from TBL_SENSORS
Where RECORD_TIMESTAMP Between '4/28/2012 12 :00 AM' and '5/17/2012 12 :00 AM'
And ( S_E1 Between 10 And 100 )

UNION ALL

select RECORD_TIMESTAMP as DateRecorded, 0 as S_E1, ROUND (S_E2 ,2 ) as S_E2
from TBL_SENSORS
Where RECORD_TIMESTAMP Between '4/28/2012 12 :00 AM'
and '5/17/2012 12 :00 AM'
And ( S_E2 Between 10 And 100 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:04:03.980

我认为你应该在这两个语句之间建立一个联合，或者你应该使用“OR”而不是 AND。

```
select RECORD_TIMESTAMP as DateRecorded,ROUND (S_E2 ,2 )as S_E2,ROUND (S_E1 ,2 )as S_E1 from TBL_SENSORS Where RECORD_TIMESTAMP Between '4/28/2012 12 :00 AM' and '5/17/2012 12 :00 AM' AND (( S_E2 Between 10 And 100) OR(S_E1 Between 10 And 100 )) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T10:06:06.717

问题在于 S_E2 和 S_E1 的限制。

为了让它们按预期工作，您必须使用`UNION ALL`：

```
select RECORD_TIMESTAMP as DateRecorded, ROUND (S_E1 ,2 )as S_E
from TBL_SENSORS
Where RECORD_TIMESTAMP Between '4/28/2012 12 :00 AM' and '5/17/2012 12 :00 AM'
And ( S_E1 Between 10 And 100 )

UNION ALL

select RECORD_TIMESTAMP as DateRecorded, ROUND (S_E2 ,2 )as S_E
from TBL_SENSORS
Where RECORD_TIMESTAMP Between '4/28/2012 12 :00 AM'
and '5/17/2012 12 :00 AM'
And ( S_E2 Between 10 And 100 ) 
```

* * *

或者您使用 an`OR`而不是`AND`这样的：

```
select RECORD_TIMESTAMP as DateRecorded, 
       ROUND (S_E2 ,2 )as S_E2, 
       ROUND (S_E1 ,2 ) as S_E1
from TBL_SENSORS
Where RECORD_TIMESTAMP Between '4/28/2012 12 :00 AM'
                           and '5/17/2012 12 :00 AM'
And ( (S_E2 Between 10 And 100) OR (S_E1 Between 10 And 100)  ) 
```

由于限制的唯一区别在于 S_E1 和 S_E2 列，如果您使用`AND`，则表示所有记录都必须遵守这两个限制。在单独的查询中，它们只尊重一个，因此您必须在主查询中这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T10:09:42.330

通过放置额外的括号并将最后一个 AND 替换为 OR 来更改布尔逻辑

```
select RECORD_TIMESTAMP as DateRecorded, 
       ROUND (S_E2 ,2 )as S_E2, 
       ROUND (S_E1 ,2 ) as S_E1
from TBL_SENSORS
Where RECORD_TIMESTAMP Between '4/28/2012 12 :00 AM'
                           and '5/17/2012 12 :00 AM'
And (( S_E2 Between 10 And 100) 
OR (S_E1 Between 10 And 100  )) 
```

# android - Android：addOnGesturePerformedListener 中的 Nullpointer 异常

> ID：10633502
> 
> 赞同：1
> 
> 时间：2012-05-17T10:00:10.847
> 
> 标签：android, nullpointerexception, gesture

```
public class TestActivity extends Activity implements OnGesturePerformedListener {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mLibrary = GestureLibraries.fromRawResource(this, R.raw.gestures);

    GestureOverlayView gestures = (GestureOverlayView) findViewById(R.id.gestureOverlayView1);
    gestures.addOnGesturePerformedListener(TestActivity.this);

} 
```

我的 main.xml

> ```
> <ImageView
>     android:id="@+id/imageView1"
>     android:layout_width="fill_parent"
>     android:layout_height="fill_parent"
>     android:src="@drawable/ic_launcher" />
> 
> <android.gesture.GestureOverlayView
>     android:id="@+id/gestureOverlayView1"
>     android:layout_width="fill_parent"
>     android:layout_height="fill_parent" >
> </android.gesture.GestureOverlayView> 
> ```

活动.java：

```
private GestureLibrary mLibrary;

public void onGesturePerformed(GestureOverlayView overlay, Gesture gesture) {
    ArrayList<Prediction> predictions = mLibrary.recognize(gesture);
    Log.v("performed", "performed");
    // We want at least one prediction
    if (predictions.size() > 0) {
        Prediction prediction = predictions.get(0);
        // We want at least some confidence in the result
        if (prediction.score > 1.0) {
            if (prediction.name.equalsIgnoreCase("right swipe")) {
                // do you thing here//
                Toast.makeText(TestActivity.this, "rigth",
                        Toast.LENGTH_SHORT);
            } else if (prediction.name.equalsIgnoreCase("left swipe")) {

                Toast.makeText(TestActivity.this, "lef",
                        Toast.LENGTH_SHORT);
            }
        }
    }
} 
```

运行此程序会在 Log 中显示以下内容：

```
05-17 15:18:52.124: E/AndroidRuntime(17266): FATAL EXCEPTION: main
05-17 15:18:52.124: E/AndroidRuntime(17266): java.lang.RuntimeException: Unable to start activity ComponentInfo{t.e.st/t.e.st.TestActivity}: java.lang.NullPointerException
05-17 15:18:52.124: E/AndroidRuntime(17266):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
05-17 15:18:52.124: E/AndroidRuntime(17266):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
05-17 15:18:52.124: E/AndroidRuntime(17266):    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
05-17 15:18:52.124: E/AndroidRuntime(17266):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
05-17 15:18:52.124: E/AndroidRuntime(17266):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-17 15:18:52.124: E/AndroidRuntime(17266):    at android.os.Looper.loop(Looper.java:130)
05-17 15:18:52.124: E/AndroidRuntime(17266):    at android.app.ActivityThread.main(ActivityThread.java:3835)
05-17 15:18:52.124: E/AndroidRuntime(17266):    at java.lang.reflect.Method.invokeNative(Native Method)
05-17 15:18:52.124: E/AndroidRuntime(17266):    at java.lang.reflect.Method.invoke(Method.java:507)
05-17 15:18:52.124: E/AndroidRuntime(17266):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
05-17 15:18:52.124: E/AndroidRuntime(17266):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
05-17 15:18:52.124: E/AndroidRuntime(17266):    at dalvik.system.NativeStart.main(Native Method)
05-17 15:18:52.124: E/AndroidRuntime(17266): Caused by: java.lang.NullPointerException
**05-17 15:18:52.124: E/AndroidRuntime(17266):  at t.e.st.TestActivity.onCreate(TestActivity.java:26)**
05-17 15:18:52.124: E/AndroidRuntime(17266):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-17 15:18:52.124: E/AndroidRuntime(17266):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
05-17 15:18:52.124: E/AndroidRuntime(17266):    ... 11 more 
```

请帮我解决这个问题。

覆盖在 xml 中。所以这不是问题，它说错误在第 26 行。所以它的 abt addOnGesturePerformedListener();

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:11:47.843

如果你确定你的布局中有一个with ，那么`View`试试`@+id = "gestureOverlayView1"``main.xml`

```
gestures.addOnGesturePerformedListener(this); 
```

代替

```
gestures.addOnGesturePerformedListener(TestActivity.this); 
```

（从 中删除说明`TestActivity`符**`this`**）

# asp.net - 网站提供白页而不是 404 错误

> ID：10633503
> 
> 赞同：0
> 
> 时间：2012-05-17T10:00:16.360
> 
> 标签：asp.net, web-config, http-status-code-404

我有这个很奇怪的问题：

当我访问我网站上不存在的 URL 时，它只会显示一个白页。Application_Error 事件永远不会运行，用户也不会转移到我们使用的 404 页面。

我需要捕捉 Application_Error 事件，进行一些日志记录和一些重定向。

我无法访问 IIS，因为我在共享 webhotel 上运行我的网站。但是对于我所有的其他网站，这都很好。

这是我的 web.config：

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </assemblies>
    </compilation>
    <pages>
      <controls>
        <add src="~/UC/Filters.ascx" tagName="Filters" tagPrefix="uc2"/>
      </controls>
    </pages>
    <httpRuntime maxRequestLength="1048576" requestValidationMode="2.0"/>
    <customErrors mode="Off" defaultRedirect="ErrorPage.aspx">
      <error statusCode="404" redirect="404-Error.aspx"/>
    </customErrors>
    <sessionState timeout="5000"/>
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <validation validateIntegratedModeConfiguration="false"/>
    <handlers>
      <add name="AjaxToolkit" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </handlers>
    <rewrite>
      <rules>
        <rule name="Redirect domain.com to www" patternSyntax="Wildcard" stopProcessing="true">
          <match url="*"/>
          <conditions>
            <add input="{HTTP_HOST}" pattern="domain.com"/>
          </conditions>
          <action type="Redirect" url="http://www.domain.com/{R:0}"/>
        </rule>
        <!--To always remove trailing slash from the URL-->
        <rule name="Remove trailing slash" stopProcessing="true">
          <match url="(.*)/$"/>
          <conditions>
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true"/>
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true"/>
          </conditions>
          <action type="Redirect" redirectType="Permanent" url="{R:1}"/>
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

有任何想法吗？感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:13:20.183

将您的自定义错误设置为：

```
<customErrors mode="RemoteOnly" defaultRedirect="ErrorPage.aspx">
  <error statusCode="404" redirect="404-Error.aspx"/>
</customErrors> 
```

# jquery - .is(":animated") 与 stop()

> ID：10633505
> 
> 赞同：0
> 
> 时间：2012-05-17T10:00:24.237
> 
> 标签：jquery, jquery-animate

所以这段代码没有做我期望它做的事情，停止什么都不做，它一直在动画给出奇怪的结果，（因为 newpos 的计算是错误的。

```
if (direction =='left') {
    newpos = parseInt(currentpos) - 300;
    $('.slider').stop(true, true).animate({"margin-left": newpos}, 1000, "easeOutQuart");
}
else if (direction =='right') {
    newpos = parseInt(currentpos) + 300;
    $('.slider').stop(true, true).animate({"margin-left": newpos}, 1000, "easeOutQuart");
} 
```

但这有效

```
if (direction =='left' && !$('.slider').is(':animated')) {
    newpos = parseInt(currentpos) - 300;
    $('.slider').stop(true, true).animate({"margin-left": newpos}, 1000, "easeOutQuart");
}
else if (direction =='right' && !$('.slider').is(':animated')) {
    newpos = parseInt(currentpos) + 300;
    $('.slider').stop(true, true).animate({"margin-left": newpos}, 1000, "easeOutQuart");
} 
```

问题是我怎么能在没有`is(':animated')`条件的情况下做到这一点？在这种情况下应该`stop()`做这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:09:46.723

```
if (direction =='left') {
    newpos = parseInt(currentpos) - 300;
}
else if (direction =='right') {
    newpos = parseInt(currentpos) + 300;
}
$('.slider').animate({"margin-left": newpos}, 1000, "easeOutQuart"); 
```

# ruby-on-rails - 如何在相同模型之间创建多个关系

> ID：10633509
> 
> 赞同：0
> 
> 时间：2012-05-17T10:00:43.480
> 
> 标签：ruby-on-rails, activerecord, models

我有一个用户模型

```
class User < ActiveRecord::Base
  has_many :projects
end 
```

我有一个项目模型

```
class Project < ActiveRecord::Base
  belongs_to :user
end 
```

显然，现在每个项目都归一个用户所有，每个项目只能有一个用户。我现在想让我的模型代表两个模型之间的另一种关系。我希望用户能够关注多个项目，无论谁拥有该项目。我知道我将不得不使用 has_many :through 并创建一个连接，但我无法解决如何更改模型以保持我当前的关系并添加新的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:30:18.413

Well, in that case, in your show/index action display all the projects (`Project.all`) in your project table. This way all users have access to all the projects. Now, in your edit action, use `user.projects.all` to display projects of that particular user. That should solve your problem, I don't see the need of any further association here.

**Update:**
This should suffice:

`class Project < ActiveRecord::Base`
`belongs_to :user`

`class User < ActiveRecord::Base`
`has_many :projects_followed, :through => :projects`
`user has_many :projects_owned, :through => :projects`

If you don't wish to create two more relations, create just one:
`class ProjectsSubscribed`
`belongs_to :project`
with three fields: **project_id, is_owned, is_followed**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:02:04.967

尝试以下关系。

```
class User < ActiveRecord::Base
  has_many :followers
  has_many :projects, :through => :followers
end

class Follower < ActiveRecord::Base
  belongs_to :user
  belongs_to :project
end

class Project < ActiveRecord::Base
  has_many :followers
  has_many :users, :through => :followers
end 
```

请注意：如果您需要将关系模型作为独立实体使用，则可以使用**has_many :through关系。**如果您不需要对关系模型做任何事情，那么设置 has_and_belongs_to_many 关系可能会更简单。

希望它是有帮助的。

# ruby-on-rails - Rails 2.3 和 phantomJS 中的竞争条件

> ID：10633513
> 
> 赞同：2
> 
> 时间：2012-05-17T10:00:54.827
> 
> 标签：ruby-on-rails, capybara, phantomjs

我有一个在 REE 上运行的 rails 2.3 应用程序。我正在使用 capybara 1.1.2、cucumber 1.1.0、poltergeist（同时使用 0.6.0 和来自 github 的最新版本）和 phantomJS 1.5.0。我的问题是我相信我在 phantomJS 中有一个竞争条件导致我的黄瓜测试随机失败。当我在 Chrome 中运行黄瓜测试时，它们可以完美运行，所以我很确定问题出在 poltergeist 或 phantomJS 中。当我在 PhantomJS 中运行黄瓜测试（以便我可以在 CI 服务器上运行它们）时，我会随机收到如下错误：

页面上的 Javascript 代码中出现了一个或多个错误：

```
TypeError: 'undefined' is not a function

  http://static.ak.fbcdn.net/rsrc.php/v2/yd/r/c9z-2BUoufJ.js:75
  http://static.ak.fbcdn.net/rsrc.php/v2/yd/r/c9z-2BUoufJ.js:75
  http://static.ak.fbcdn.net/rsrc.php/v2/yd/r/c9z-2BUoufJ.js:9 in bound:(?) (Capybara::Poltergeist::JavascriptError)
./features/step_definitions/site_steps.rb:8:in `/I am on the home page/'
features/account_creation.feature:89:in `Given I am on the home page'

Failing Scenarios:
cucumber features/account_creation.feature:5 # Scenario: I should be able to start creating a resume without signing up 
```

cucumber features/account_creation.feature:79 # 场景：我应该能够使用旧用户名和密码登录 cucumber features/account_creation.feature:88 # 场景：我应该能够记住我的登录信息，以便在关闭浏览器时我自动登录

基于[poltergeist 的 Github 页面，](https://github.com/jonleighton/poltergeist#important-note-about-rack-versions--130)我已将其添加到我`env.rb`的解决方案中，以解决机架 1.3 版本之前的竞争条件问题：

```
Capybara.server do |app, port|
  require 'rack/handler/thin'
  Thin::Logging.silent = true
  Thin::Server.new('0.0.0.0', port, app).start
end 
```

但这并没有什么区别，我可以说。任何想法都会受到赞赏，即使它只是暗示这是一个 poltergeist 问题或 phantomJS 问题，所以我知道接下来我应该如何询问它。

# javascript - 在 contenteditable=false 上防止空行在 IE 中折叠

> ID：10633515
> 
> 赞同：4
> 
> 时间：2012-05-17T10:01:07.637
> 
> 标签：javascript, jquery, contenteditable, rte

我有一个`contenteditable=true`设置为允许内联编辑的 div（用于 RTE 目的）。

我知道不同的浏览器处理回车键的方式不同，FF 插入`<br>`和 IE 插入`<p>`

我遇到的问题是跨行输入文本时。

例如对于文本：

```
line 1
line 2

line 3

line 4 
```

在 FF 中，当输入上述然后切换`contenteditable=false`时，行格式保持如预期。

但是，当在 IE 中编辑多行文本时，然后设置`contenteditable=false`，任何空白行都会被折叠。例如：

```
line 1
line 2   
line 3    
line 4 
```

如果我然后 reset `contenteditable=true`，这些折叠的行将被恢复。

我猜这与`<p>`IE 的使用有关，有什么想法可以防止线条在什么时候被折叠`contenteditable=false`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:25:05.160

您可以尝试通过按 ENTER 并添加`BR`而不是`<P>&nbsp;</P>`.

```
pad.addEventListener('keydown',keyDown,false);

function keyDown(e){
    if(e.keyCode!=13) return;
    pad.innerHTML+='<br />\b';
    e.stopPropagation();
    e.preventDefault();
    return false;
}

<div id="pad" contenteditable="true"></div> 
```

诀窍是在行尾添加“\b”（退格），否则 IE 在用户按下另一个键之前不会换行。但是，这些退格键在`innerHTML`以后使用时会造成麻烦。要删除退格，只需将它们替换`""`为 RegExp：

```
padsInnerHTML=pad.innerHTML.replace(/LITERAL_BACKSPACE_CHARACTER/g,''); 
```

在正则表达式中，您需要一个文字退格字符，这是`/\b/`行不通的。要实际查看退格字符，您可以使用 Opera 在 Opera 中运行您的代码`keyDown()`，写一些字母并按 ENTER 键，`pad`然后将字符复制粘贴到您的代码中。

请注意，此代码应仅在 IE 中运行，其他浏览器会弄乱换行符。

* * *

为什么这有效，我不知道。看来，IE 在 之后添加了一些非打印字符`<BR />`，必须在按 ENTER 后将其删除以创建即时换行符。

# facebook - Facebook，允许应用程序只管理一个页面

> ID：10633524
> 
> 赞同：3
> 
> 时间：2012-05-17T10:01:40.363
> 
> 标签：facebook, api

我有以下问题：

我有许多 facebook 页面，用于不同的网站（一些我的，sime 属于客户，但我管理它们）

现在，我自己的网站和客户的网站都应该使用管理适当页面的应用程序。

我看到的应用程序的唯一范围是 manage_pages，但是当我授予它时，应用程序可以访问所有页面。

**如何仅授予应用程序对一个页面的访问权限，因此无法从其他页面添加/删除帖子？**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:12:40.180

我认为你做不到。Facebook 文档中到处都在谈论“用户管理的页面和应用程序”：[https ://developers.facebook.com/docs/authentication/permissions/#page_perms](https://developers.facebook.com/docs/authentication/permissions/#page_perms)

# c# - Visual Studio 2010 设置项目菜单顺序

> ID：10633528
> 
> 赞同：0
> 
> 时间：2012-05-17T10:01:49.393
> 
> 标签：c#, winforms, visual-studio-2010, setup-project

我正在为我的应用程序创建一个安装项目，其中包含一个指向该应用程序的链接和另一个用于卸载该应用程序的链接。

出于某种原因，“卸载”链接总是显示在顶部，似乎没有办法改变它。

如何重新排列开始菜单中文件的顺序？

# wpf - 工具提示在 WPF 中不刷新

> ID：10633529
> 
> 赞同：0
> 
> 时间：2012-05-17T10:01:53.320
> 
> 标签：wpf, wpf-controls

我正在从标签属性中检索工具提示，如下所示，并且标签属性已刷新/正确的工具提示，但是在创建新的工具提示时我没有得到刷新。在鼠标悬停时，我称之为创建工具提示方法。有人可以解释为什么我没有在我的控件中获得刷新的工具提示吗？

```
private void CreateToolTip(Border border, RealisticControlBase control)
            {
                border.SetValue(ToolTipService.IsEnabledProperty, false);     
                if (control != null)
                {
                    FrameworkElement tooltip = ToolTipService.GetToolTip(border) as FrameworkElement;
                    control.InvalidateArrange();
                    tooltip.InvalidateArrange();
                    if ((control.Tag as string) != null)
                    {
                        string templatename = control.Tag.ToString();
                        object abc=Application.Current.FindResource(templatename);
                        if ((Application.Current.FindResource(templatename) as DataTemplate) != null)
                        {
                            (tooltip as ToolTip).ContentTemplate = Application.Current.FindResource(templatename) as DataTemplate;
                            tooltip.DataContext = control.DataContext;
                            border.SetValue(ToolTipService.IsEnabledProperty, true);
                            (tooltip as ToolTip).Content = control.DataContext;
                        }
                    }
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:03:05.913

我相信正确的问题和答案是为什么不将控件的工具提示绑定到标记属性并让 wpf 担心刷新逻辑。

# php - Firefox 会话开发问题

> ID：10633537
> 
> 赞同：0
> 
> 时间：2012-05-17T10:02:30.223
> 
> 标签：php, html, firefox

我正在开发的网站有一个奇怪的问题。
登录后，用户将被重定向以阅读许可协议。在这个名为的页面中，`terms.php`我有条件地显示了一个确认按钮，该按钮将用户重定向到一个页面，`agreed.php`如果用户已登录，否则：到`register.php`。

奇怪的是只在 Firefox 中（安装了 firebug）。
登录后，`terms.php`会显示 's 表格`action="register.php"` ！而不是`agreed.php`, 我所做的所有检查都表明用户未登录。另一个奇怪的事情是，如果我按 F5 刷新，它显示`agreed.php`！它不会发生在 IE 和 Chrome 中。

知道这可能是什么吗？

```
function logged_in() {
    return isset($_SESSION['USER_ID']);
}

function redirect_to( $location = NULL) {
    if ($location != NULL) {
        header("Location: {$location}");
        exit;
    }
} 
```

**登录.php**

```
if (shouldReadTerms())
    redirect_to("terms.php"); 
```

**条款.php**

```
 <?php if(logged_in()): ?> 
    <?php if (shouldReadTerms()): ?>
        <form action="agreed.php" method="POST">
    <?php endif; ?>
    <br />
    <br />
    <button <?php if (!shouldReadTerms()) echo 'disabled'; ?>>I Agree </button>
    <?php if (shouldReadTerms()): ?>
        </form>
    <?php endif; ?>
    <br />
    <br />
<?php else: ?>
    <form action="register.php" method="POST">
    <br />
    <br />
    <button>I Agree</button>
    </form>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:41:53.537

这个错误可能有两个原因。会话和缓存。

如果你确信问题只在FF为启动删除cookies并清除浏览器缓存。

如果这无助于添加`terms.php`

```
header("Cache-Control: no-cache, must-revalidate"); 
```

如果这也无济于事，请尝试在授权后的每个步骤中查看会话转储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:07:10.213

如果在 IE 或 Chrome 中不是问题，您可以尝试

```
<meta http-equiv="cache-control" content="no-cache"> 
```

在该页面的页眉中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:17:01.607

悲伤但真实：改变：

```
redirect_to("terms.php"); 
```

至

```
redirect_to("terms.php?".rand()); 
```

问题解决了。虽然不是 100% 肯定为什么。但它现在就像一个魅力

# android - 更改文本颜色

> ID：10633542
> 
> 赞同：7
> 
> 时间：2012-05-17T10:02:46.397
> 
> 标签：android, android-layout

我有一个白色背景，但是这个布局我被阻止了，因为文本颜色也是白色的，我找不到使它变成红色的解决方案，所以我可以设置我的白色背景，请帮忙（你可以看到我被迫使用她的红色背景，这样我就可以看到白色文字）。

```
public class QueueListActivity extends ListActivity {
// LIST OF ARRAY STRINGS WHICH WILL SERVE AS LIST ITEMS
ArrayList<String> listItems = new ArrayList<String>();
String newtext;
String listFiles;
// DEFINING STRING ADAPTER WHICH WILL HANDLE DATA OF LISTVIEW
ArrayAdapter<String> adapter;

// RECORDING HOW MUCH TIMES BUTTON WAS CLICKED
int clickCounter = 0;

ArrayList<String> selectedItems = new ArrayList<String>();

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.queuelistactivity);
    Bundle extras1 = getIntent().getExtras(); 
    listFiles=GetFiles();

    StringTokenizer tokonizer1 = new StringTokenizer(listFiles,";");
    while(tokonizer1.hasMoreElements()){
        Log.i("verif","0");
        listItems.add(tokonizer1.nextToken());}
          initializeListItems();

    if (extras1 != null) {
        newtext = extras1.getString("newitem");
        listItems.add(newtext);
        adapter.notifyDataSetChanged();
        getListView().setItemChecked(listItems.size() - 1, false);

    }

}

// METHOD WHICH WILL HANDLE DYNAMIC INSERTION
public void addItems(View v) {

    Intent intent = new Intent(QueueListActivity.this, AjouterFiles.class);     
    QueueListActivity.this.startActivity(intent);

    /*
    listItems.add(userName);
    adapter.notifyDataSetChanged();
    getListView().setItemChecked(listItems.size() - 1, false);*/

}

public void deleteItems(View v) {
    String toDelete = "";
    SparseBooleanArray sp = getListView().getCheckedItemPositions();

    for (int i = 0; i < sp.size(); i++) {
        toDelete += ";" + sp.get(i);
        if (sp.get(i)) {
            listItems.remove(i);
        }

    }
    adapter.notifyDataSetChanged();
    Toast.makeText(getApplicationContext(), toDelete, Toast.LENGTH_LONG).show();
    initializeListItems();
}

private void initializeListItems() {
    adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_multiple_choice, listItems);
    setListAdapter(adapter);
    ListView lv = getListView();
    lv.setCacheColorHint(Color.rgb(0, 0, 0));
    lv.setBackgroundColor(Color.rgb(178, 34, 34));

    for (int i = 0; i < lv.getCount(); i++) {
        lv.setItemChecked(i, false);
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T10:06:54.440

最好的技巧是复制内容布局文件`android.R.layout.simple_list_item_multiple_choice`并制作自己的布局（my_list_view 并编辑 xml 文件并更改文本颜色。

适配器 = 新的 ArrayAdapter(this,my_list_view, listItems);

编辑将此文件保存为 my_list_view；

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="center_vertical"
    android:checkMark="?android:attr/listChoiceIndicatorMultiple"
    android:paddingLeft="6dip"
    android:paddingRight="6dip"
    android:background="#FFFFFF" //white background
    android:textColor="#000000" //black color text
/> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-20T17:46:58.800

```
android:textColor="@android:color/white" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T10:06:17.683

您可以在 XML 布局中设置它：

```
<TextView 
 ...
 ...
 android:textColor="#FF0000" >
 </TextView> 
```

或以编程方式：

```
textview.setTextColor(Color.RED);
//textview must be defined in your class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T10:08:48.727

最好编写自定义适配器。

替代但不好的解决方案是使用 android.R.layout.simple_list_item_multiple_choice 的这个布局 xml inspace

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="center_vertical"
    android:checkMark="?android:attr/listChoiceIndicatorMultiple"
    android:paddingLeft="6dip"
    android:paddingRight="6dip"

   android:textColor= Color.Red       //please correct the syntax
/> 
```

这是相同的 android.R.layout.simple_list_item_multiple_choice 布局，但您现在在具有相同 id 的布局中进行相同的更改以进行更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T10:11:15.917

你可以尝试自定义列表视图..点击链接[点击这里](http://www.androidpeople.com/android-custom-listview-tutorial-part-1)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T10:27:48.153

```
<TextView
        android:id="@+id/text_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="Name"
        android:textColor="@color/white"
        android:textSize="11dp" 
/> 
```

# xbox360 - Xbox 360 应用程序开发快速入门

> ID：10633554
> 
> 赞同：11
> 
> 时间：2012-05-17T10:03:24.063
> 
> 标签：xbox360, xbox

我到处都能找到有关 Xbox 360 游戏的热议。但是我想知道如何为 xbox 360 开发正常的应用程序。主要是基于 silverlight。

我也不确定这个自制的东西是关于什么的？Xbox 360 应用程序开发需要使用什么语言？从哪里/如何获得 SDK？在 App Hub 上，所有嗡嗡声都是关于 Windows Phone 的。没有太多关于 Xbox 的信息？为什么会这样？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-17T10:47:37.913

Xbox 360 的开发主要分为两个不同的部分：

1.  **XNA 开发**
    这涉及使用 XNA 框架开发游戏/应用程序，并通过 AppHub 完成。[您可以在此处](http://create.msdn.com/en-us/resources/downloads)找到开发工具（XNA Game Studio）。使用这些工具开发的任何东西都必须用 C#.NET 编写，并且只能作为“独立游戏”发布到 Xbox LIVE 市场上（当然，在通过审查程序之后）。要在控制台本身上调试您的 XNA 应用程序，您需要一个[会员资格](http://create.msdn.com/en-us/home/membership)。另一件需要注意的是，Xbox 360 应用程序根本无法访问 Internet - 所有通信都通过 Xbox LIVE 或 System Link。

2.  **专业开发**
    这涵盖了完整的 Xbox 360 游戏的开发，并且要求您是[Xbox 360 注册开发者计划](http://www.xbox.com/en-US/developers/xbox360/registereddevelopers)的一部分。获得开发许可证（并签署 NDA）后，Microsoft 将为开发人员提供对官方 Xbox 360 SDK 和开发硬件的访问权限，其中包括用于使用 C/C++ 开发本机 Xbox 360 应用程序和库的完整 Visual Studio 集成和文档。开发套件硬件有多种形式，支持通过以太网从 Visual Studio 进行调试，通过 USB 进行 DVD 仿真等。有关专业开发程序的更多信息，请参阅[此信息](http://www.xbox.com/en-US/developers/xbox360/registereddevelopers)。

由于 XNA 框架和社区开发者计划的限制，目前还不可能为 Xbox 360 开发“普通”应用程序。如果您是注册开发者计划的一部分，这可能是可能的，但无法确定（由于 Microsoft 严格的 NDA）。

至于 Silverlight，有一些关于 Xbox 360 上 Silverlight 的传言，但微软尚未确认或宣布任何事情。

# decode - 奇怪的代码 Amiga "++[>++++++<-]>.>+"

> ID：10633556
> 
> 赞同：2
> 
> 时间：2012-05-17T10:03:30.887
> 
> 标签：decode

有人认识这个吗？

```
+++++++++++<-]>.>+++++++++[>++++++++++++++
.-------------------------.+++++++++++++ 
```

我读到，它与 Amiga 有一些共同点。我怎样才能解码它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:08:50.750

对我来说，这看起来像 Brainf ***

[http://en.wikipedia.org/wiki/BrainF](http://en.wikipedia.org/wiki/BrainF)

可能可以寻找一个编译器，看看会发生什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:09:36.923

它是一种[“BrainF*ck”](http://en.wikipedia.org/wiki/Brainfuck)编程语言。一种深奥的编程语言，以其极简主义着称。它是一个图灵 tarpit，旨在挑战和娱乐程序员，并且不适合实际使用。[1](http://en.wikipedia.org/wiki/Brainfuck)它由 Urban Müller 于 1993 年创建。

# ruby-on-rails - 使用代理在 Windows 7 上安装 gems 的问题

> ID：10633557
> 
> 赞同：8
> 
> 时间：2012-05-17T10:03:32.423
> 
> 标签：ruby-on-rails, ruby, gem

我正在尝试在代理后面的 Windows 7 上安装 ruby​​。

我查看了各种论坛并成功设置（我认为）http_proxy（见下文）

```
SET HTTP_PROXY=http:username:password@http://proxyhere.com:8080 
```

但是，我现在在尝试安装 gem 时遇到以下错误：

```
SocketError: getaddrinfo: No such host is known. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T11:04:49.023

`HTTP_PROXY`语法必须是 URI ：

```
SET HTTP_PROXY=scheme://user:pass@host:port/path 
```

`scheme`可能是`http`或`https`在某些情况下`path`可能不存在。

没有浏览器（或 RubyGems）会接受您提供的 URL 作为有效 URL。

所以在你的情况下：

```
SET HTTP_PROXY=http://username:password@proxyhere.com:8080/ 
```

希望有帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T10:50:22.903

在工作中我也有一个 proyx，`SET HTTP_PROXY=http://proxyhere.com:8080`在那里工作，所以在没有用户名/密码的情况下尝试它。这取决于我假设的代理类型。

您还可以使用：

```
gem install --http-proxy http://proxyhere.com:8080 $gem_name 
```

有关更多信息，请参阅此内容[如何从代理 (ISA-NTLM) 后面更新 Ruby Gems](https://stackoverflow.com/questions/4418/how-do-i-update-ruby-gems-from-behind-a-proxy-isa-ntlm)

# objective-c - 如何实现带有字母的 iOS 表格视图以进行导航？

> ID：10633561
> 
> 赞同：1
> 
> 时间：2012-05-17T10:03:41.810
> 
> 标签：objective-c, ios, uitableview

我想要一张像下图中中间的表格：

![在此处输入图像描述](../Images/f9f8b89daf8b2a81149bff692c613c37.png)

我已经准备好一个带有部分的表格，我想实现中间的那个：小 AB 字母，您可以在其中滚动并单击以获取特定结果。

这是怎么做的？我需要选择特定类型的表格或单元格吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:08:04.493

不，这只是一个标准的 UITableView。您需要`sectionIndexTitlesForTableView`在其数据源中实现回调。

# xslt - XSLT：将 URL 查询字符串作为参数传递

> ID：10633562
> 
> 赞同：2
> 
> 时间：2012-05-17T10:03:43.530
> 
> 标签：xslt, xslt-1.0

我知道这是一个已经多次传递的老问题，但我想知道是否有人可以扩展一个带有查询字符串的 URL 是否可以通过 XSLT 1.0 剥离并且可以用作以后的参数使用 XSLT 转换。

例如，我有一个 URL [http://www.mydomain.com/mypage.htm?param1=a¶m2=b](http://www.mydomain.com/mypage.htm?param1=a&param2=b)

通过 XSLT，我正在寻找类似以下内容的结果：

`<xsl:param name="param1">a</xsl:param>`和`<xsl:param name="param2">b</xsl:param>`

其中参数名称 (param1, param2) 和它的值 (a, b) 已从查询字符串中提取以允许我使用`$param1`，`$param2`然后在 if 条件下说

例如`<xsl:if test="$param1 = 'a'>`，结果为真，但如果我们使用`<xsl:if test="$param1 = 'b'>`结果为假。

我在这里看到了一个类似的问题：[Retrieve page URL params or page URL in XSLT](https://stackoverflow.com/questions/812912/retrieve-page-url-params-or-page-url-in-xslt) which uses the `str-split-to-words`template 但我没有成功地让它工作（可能是因为我以错误的方式实现它）所以任何关于它的工作示例可以在实践将大有裨益。

XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns="http://www.w3.org/1999/xhtml" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ext="http://exslt.org/common">
<xsl:import href="http://fxsl.cvs.sourceforge.net/viewvc/fxsl/fxsl-xslt2/f/strSplit-to-Words.xsl"/>
<xsl:output indent="yes" method="html"/>

<xsl:template match="/">
<xsl:variable name="vwordNodes">
  <xsl:call-template name="str-split-to-words">
    <xsl:with-param name="pStr" select="$pQString"/>
    <xsl:with-param name="pDelimiters" select="'?&amp;'"/>
  </xsl:call-template>
</xsl:variable>
<xsl:apply-templates select="ext:node-set($vwordNodes)/*"/>
</xsl:template>

<xsl:template match="word">
  <xsl:value-of select="."/>
  <xsl:text>&#xA;</xsl:text>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:18:01.203

你的代码有几个问题：

1.  `<xsl:import href="http://fxsl.cvs.sourceforge.net/viewvc/fxsl/fxsl-xslt2/f/strSplit-to-Words.xsl"/>` **我怀疑所需的样式表是否可以直接从其 SourceForge 视图页面导入**——尤其是考虑到它本身导入其他 FXSL 样式表。使用 FXSL 的正确方法是将其下载到本地计算机，并从其驻留在本地计算机的文件位置引用其样式表。

...

.2\. `<xsl:with-param name="pStr" select="$pQString"/>`这将产生编译错误，因为您错过了定义`$pQString`全局/外部参数。您需要在全局级别定义此参数。它可以被赋予一个默认值（例如一个特定的 URL）以便于测试。但是，使用此参数的想法是转换的调用者应该将此参数传递给转换。

.3\. 转换的结果被写入输出。虽然这对于演示目的很有用，但您希望能够在稍后的转换中使用这些结果。这样做的方法是将这些结果捕获到一个变量中，从中创建另一个变量，使用常规树（来自其 RTF 类型），然后引用最后一个变量的节点。

**这是您想要的代码示例**（前提是您已下载 FXSL，解压缩分发并将此代码保存在与解压缩的 FXSL 分发相同的目录中）：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common"
 >

   <xsl:import href="strSplit-to-Words.xsl"/>

   <xsl:output indent="yes" omit-xml-declaration="yes"/>

   <xsl:param name="pUrl" select=
   "'http://www.mydomain.com/mypage.htm?param1=a&amp;param2=b'"/>

   <xsl:param name="pQString" select=
     "substring-after($pUrl, '?')"
     />

    <xsl:template match="/">
        <xsl:variable name="vwordNodes">
          <xsl:call-template name="str-split-to-words">
            <xsl:with-param name="pStr" select="$pQString"/>
            <xsl:with-param name="pDelimiters"
                      select="'?&amp;'"/>
          </xsl:call-template>
        </xsl:variable>

       <xsl:variable name="vrtfqueryParams">
         <xsl:apply-templates select="ext:node-set($vwordNodes)/*"/>
       </xsl:variable>

       <xsl:variable name="vqueryParams" select="ext:node-set($vrtfqueryParams)/*"/>

       <xsl:value-of select="$vqueryParams/@name[. ='param1']"/>
       <xsl:text> : </xsl:text>
       <xsl:value-of select="$vqueryParams[@name = 'param1']"/>

       <xsl:text>&#xA;</xsl:text>
       <xsl:value-of select="$vqueryParams/@name[. ='param2']"/>
       <xsl:text> : </xsl:text>
       <xsl:value-of select="$vqueryParams[@name = 'param2']"/>
    </xsl:template>

    <xsl:template match="word">
      <param name="{substring-before(.,'=')}">
        <xsl:value-of select="substring-after(.,'=')"/>
      </param>
    </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（本演示中未使用）时，将生成所需的正确结果——按名称引用结果变量的查询字符串参数：**

```
param1 : a
param2 : b 
```

# bash - 如何更改 Git 命令行界面的语言？

> ID：10633564
> 
> 赞同：130
> 
> 时间：2012-05-17T10:03:49.420
> 
> 标签：bash, git, localization, environment-variables, locale

我想在我的 Linux 安装中更改 git 的语言（改为英语），而不更改其他程序的语言并且找不到设置。怎么做？

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2012-06-03T16:56:13.217

将这些行添加到您的`~/.bashrc`,`~/.bash_profile`或`~/.zprofile`强制 git 以英文显示所有消息：

```
# Set Git language to English
#alias git='LANG=en_US git'
alias git='LANG=en_GB git' 
```

`LC_ALL`当设置环境变量时，别名需要在某些系统上覆盖`LC_ALL`，它优先于`LANG`. 请参阅[UNIX 规范 - 环境变量](http://pubs.opengroup.org/onlinepubs/7908799/xbd/envvar.html)以获得进一步的解释。

```
# Set Git language to English
#alias git='LC_ALL=en_US git'
alias git='LC_ALL=en_GB git' 
```

如果您将这些行添加到`~/.bashrc`别名中，则将在新的交互式 shell 启动时定义。如果您将其添加到`~/.bash_profile`别名将在登录时应用。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-04-17T19:20:18.067

如果你只想有一个英文命令，你可以`LC_ALL=C`在命令之前写，例如：

```
LC_ALL=C git status 
```

将导致

```
# On branch master
nothing to commit, working directory clean 
```

中使用的语言环境`C`是英语，并且无需安装其他语言包即可始终可用
（请参阅[https://askubuntu.com/a/142814/34298](https://askubuntu.com/a/142814/34298)）

要为整个当前 bash 会话更改它，只需输入

```
LANG=C 
```

例如将其更改为德语输入

```
LANG=de_DE.UTF-8 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2018-11-07T22:40:21.523

添加这一行为我解决了这个问题：更新：现在似乎更多的组件也需要一个区域设置。

$ 更多 ~/.bash_profile

> 导出 LANG=en_US（已过时）

export LANG="en_US.UTF-8"（更新）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-17T11:51:08.490

注意：从 Git 2.3.1+（Q1/Q2 2015）开始，Git 将尽可能添加 Accept-Language 标头。
参见Yi EungJun[提交](https://github.com/git/git/commit/f18604bbf2c391c689a41fca14cbaeff5e106255)的[f18604b ( `eungjun-yi`)](https://github.com/eungjun-yi)

> 添加一个`Accept-Language`标头，指示由 、 和 定义的`$LANGUAGE`用户`$LC_ALL`首选`$LC_MESSAGES`语言`$LANG`。
> 
> 这使 git 服务器有机会以用户的首选语言显示远程错误消息。

* * *

您有[git gui](https://stackoverflow.com/questions/6089435/git-gui-how-to-change-the-locale)或[其他 GUI](https://git.wiki.kernel.org/index.php/InterfacesFrontendsAndTools)的语言环境，~~但不适用于命令行，考虑到这是[GitSurvey 2010的问题之一](https://git.wiki.kernel.org/index.php/GitSurvey2010)~~

```
localization of command-line messages (i18n)    258     3.6% 
```

当然，自 2010 年以来，如**[`po/README`](https://github.com/git/git/blob/master/po/README)**所述：

> 在可以翻译字符串之前，首先必须将它们标记为翻译。
> 
> **Git 使用包装系统 [`gettext`](http://www.gnu.org/software/gettext/)库**`info gettext`的国际化接口，因此您的 gettext 文档（在终端中的GNU 系统上）中的大多数建议都适用。

自[git 1.7.9+](https://github.com/git/git/blob/master/Documentation/RelNotes/1.7.9.txt)（2012 年 1 月）以来就已到位：

> **`gettext`如果翻译可用且语言环境设置适当，Git 会使用**将其最常见的界面消息翻译成用户的语言。
> 分销商可以放入新`PO`文件`po/`以添加新翻译。

因此，如果您的更新弄乱了翻译，请检查`gettext`使用什么：
例如，参见“ [Locale Environment Variables](http://www.gnu.org/software/gettext/manual/gettext.html#Locale-Environment-Variables) ”

> 一个语言环境由几个语言环境类别组成，请参阅 Aspects。当程序查找依赖于语言环境的值时，它会根据以下环境变量按优先级顺序执行此操作：

```
LANGUAGE
LC_ALL
LC_xxx, according to selected locale category: LC_CTYPE, LC_NUMERIC, LC_TIME, LC_COLLATE, LC_MONETARY, LC_MESSAGES, ...
LANG 
```

> 在此查找中忽略其值已设置但为空的变量。
> 
> `LANG`是用于指定语言环境的正常环境变量。作为用户，您通常会设置此变量（除非系统已经在`/etc/profile`或类似的初始化文件中设置了其他一些变量）。
> 
> `LC_CTYPE`, `LC_NUMERIC`, `LC_TIME`, `LC_COLLATE`, `LC_MONETARY`, `LC_MESSAGES`, 等等，是旨在覆盖`LANG`和影响单个语言环境类别的环境变量。
> 例如，假设您是西班牙的瑞典用户，并且您希望您的程序根据西班牙语约定处理数字和日期，并且只有消息应该是瑞典语。然后，您可以使用该程序创建一个名为“<code>sv_ES”或“<code>sv_ES.UTF-8”的语言环境`localedef`。`LANG`但是将变量设置为`es_ES.UTF-8`并将`LC_MESSAGES`变量设置为 更简单，并达到相同的效果`sv_SE.UTF-8`；这两个语言环境已经预装在操作系统中。
> 
> `LC_ALL`是一个覆盖所有这些的环境变量。它通常用于运行特定程序的脚本中。例如，由 GNU 生成的配置脚本用于`autoconf`确保`LC_ALL`配置测试不会以依赖于语言环境的方式运行。
> 
> 不幸的是，有些系统设置`LC_ALL`在`/etc/profile`或类似的初始化文件中。因此，作为用户，您必须取消设置此变量，如果您想设置`LANG`和可选地设置其他一些`LC_xxx`变量。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-10-02T16:21:34.370

运行`LC_MESSAGES=C git`，而不是 LC_ALL=C 或 LANG=C，无需删除或重命名文件。

此命令将输出 Git 消息更改为英文。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-11-27T14:18:03.147

如果 GIT 找不到 Locale 语言，则默认为英语。

因此，如果您希望 GIT 是英文的，只需破坏它正在运行的语言文件。就我而言，它总是以德语运行（即：**de.msg**）。

如果我删除它或重命名它，那么它默认为英文。

![在此处输入图像描述](../Images/56576f9560003881e765bd80860ab040.png)

在这里我重命名了文件

![在此处输入图像描述](../Images/fedc8328818d21c9be8514433279127d.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-21T16:10:55.117

正如 Bengt 建议的那样：将这些行添加到您的`~/.bashrc`或`~/.bash_profile`强制 git 以英语显示所有消息： `vim ~/.bashrc`- 对于此配置文件（如果您是用户`ubuntu`并且您编辑它，它将仅适用于该用户）；添加此行：

```
# Set Git language to English
#alias git='LANG=en_US git'
alias git='LANG=en_GB git'
#you can add also 
LANG=en_GB 
```

关闭文件后，您需要在 shell 中编写：

```
source ~/.bashrc 
```

重新加载新设置或退出终端并再次连接:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-12T02:51:06.667

这是我更改 git 语言的解决方案，请按照回答[这个](https://stackoverflow.com/a/10872202/5381331)和[这个](https://apple.stackexchange.com/questions/12993/why-doesnt-bashrc-run-automatically)

1) `nano ~/.bashrc`
2) 添加`alias git='LANG=en_GB git'`到文件
2) 保存文件
4)`source ~/.bashrc`

现在你的 git 已经改变了语言。但是，**如果**在您重新启动终端后它不再工作，您需要

4.1) `nano ~/.profile`
4.2) 添加`source ~/.bashrc`
4.3) 保存文件

`source ~/.bashrc`每当您打开终端时它都会运行

希望有帮助

# java - 确定图像是否具有特定的色谱

> ID：10633565
> 
> 赞同：0
> 
> 时间：2012-05-17T10:03:55.757
> 
> 标签：java, image, colors, pixels

我想知道目前是否有任何用 Java 编写的算法来确定图像中是否包含低范围的不同像素颜色。

我正在尝试检测占位符图像（通常由高百分比的单色（通常是白色和灰色像素）组成，而不是全彩色照片（由多种颜色组成）。

如果什么都不存在，我会自己写一些东西（正在考虑对图像中随机位置的任意像素进行采样，或者对图像中包含的所有像素颜色进行平均），然后确定我找到的不同颜色的数量。根据所使用的方法，速度和准确性之间可能存在折衷。

任何建议/指针/阅读材料表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:28:46.573

一种简单的低开销方法是分别制作红色、绿色和蓝色分量值的直方图。每个只有 256 个颜色级别，所以它会非常有效 - 您可以在`new int[256]`数组中构建每个直方图。

然后您只需计算每个直方图中非零值的数量并检查它们是否都满足某个阈值（例如，每个直方图中至少有 20 个不同的值意味着一张照片）

另一种方法是在图像中创建颜色值的 HashSet，并在扫描图像时不断添加到 HashSet。由于 HashSets 拥有唯一的值，它只会存储唯一的颜色。为避免 HashSet 变得太大，您可以在 HashSet 的大小达到预先确定的阈值（可能是 1000 种不同的颜色？）时退出，并得出您有照片的结论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:51:16.733

一种方法是：

```
final BufferedImage image = // your image;
final Set<Integer> colours = new HashSet<Integer>();

for (int x = 0; x < image.getWidth(); x++) {
  for (int y = 0; y < image.getHeight(); y++) {
    colours.add(image.getRGB(x, y));
  }
}

// Check your pixels here. In grayscale images the R equals G equals B 
```

您还可以使用 Java Advanced Imaging (JAI)，因为它提供了一个直方图类：

```
package com.datroop.histogram;

import java.awt.image.renderable.ParameterBlock;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Arrays;

import javax.media.jai.Histogram;
import javax.media.jai.JAI;
import javax.media.jai.PlanarImage;
import javax.media.jai.ROI;
import javax.media.jai.RenderedOp;

public class HistogramCreator {

private HistogramCreator() {        
}

public static int[] createHistogram(final PlanarImage image) {
    // set up the histogram
    final int[] bins = { 256 };
    final double[] low = { 0.0D };
    final double[] high = { 256.0D };

    Histogram histogram = new Histogram(bins, low, high);

    final ParameterBlock pb = new ParameterBlock();

    pb.addSource(image);
    pb.add(null);
    pb.add(1);
    pb.add(1);

    final RenderedOp op = JAI.create("histogram", pb);
    histogram = (Histogram) op.getProperty("histogram");

    // get histogram contents
    final int[] local_array = new int[histogram.getNumBins(0)];

    for (int i = 0; i < histogram.getNumBins(0); i++) {
        local_array[i] = histogram.getBinSize(0, i);
    }

    return local_array;
}

public static void main(String[] args) {
    try {
        String filename = "file://localhost/C:/myimage.jpg";
        System.setProperty("com.sun.media.jai.disableMediaLib", "true");
        // Create the histogram
        int[] myHistogram = createHistogram(JAI.create("url", new URL(filename)));
        // Check it out here
        System.out.println(Arrays.toString(myHistogram));
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }
} 
```

}

# puppet - 是否可以在 Puppet 中定义已定义资源的列表？

> ID：10633571
> 
> 赞同：1
> 
> 时间：2012-05-17T10:04:17.860
> 
> 标签：puppet

假设我有 3 台服务器，那 3 台服务器安装了 apache。对于它们中的每一个，我必须实例化几个 apache::vhost 定义的资源。

有什么办法可以代替这样做

```
node 'srv1.example.com' inherit webserver {

   apache::vhost { 'toto1' :
           ... => ... ,
   }

   apache::vhost { 'toto2' :
           ... => ... ,
   }

   apache::vhost { 'toto3' :
           ... => ... ,
   }

} 
```

可以使用以下模式做某事（承认我定义的资源只是名称可以做它需要做的事情）

```
node 'srv1.example.com' inherit webserver {

     $vhost = ['toto1', 'toto2', 'toto3'];

     ??????
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T17:26:13.880

是的。

```
node 'srv1.example.com' inherit webserver {

  $vhosts = ['toto1', 'toto2', 'toto3'];

  apache::vhost { [$vhosts]:
    ... => ... ,
  }
} 
```

当然，这要求一切都相同或基于名称（可`$name`在 apache::vhost 定义中使用）。

如果您想将 apache::vhost 保留为一个简单的定义，并且仍然做一些更复杂的事情来从名称中计算出参数，您可以使用中间定义来完成它们：

```
define blah::vhost {
  $wwwroot = "/var/www/html/blah/${name}"
  $wwwhostname = "${name}.example.com"
  if ! defined(File[$wwwroot]) {
    file { $wwwroot:
      ensure => directory,
      mode   => 0775,
    }
  }
  apache::vhost { $name:
     path     => $wwwroot,
     aliases  => [$name],
     hostname => $wwwhostname,
     require  => File[$wwwroot],
  }
}

blah::vhost { [$vhosts]: } 
```

# mysql - 选择与相关表中的多行匹配的行

> ID：10633574
> 
> 赞同：2
> 
> 时间：2012-05-17T10:04:24.000
> 
> 标签：mysql, select

我有三张桌子：

**物品**

```
id   name   etc
--------------------
1    Rex   
2    Fido
3    Geoff 
```

**类别**

```
id   name
------------
1    Dogs
2    Humans
3    Mammals 
```

**类别_项目**

```
category_id  item_id
--------------------
1            1
3            1
1            2
3            2
2            3
3            3 
```

我还有一个类别 ID 数组。我想计算与数组中所有类别相关的项目数。

例如...

```
Category_ids    Result
----------------------
1,2             0
2,3             1
1,2,3           0 
```

很确定，当我弄清楚这一点时，我会踢自己。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:59:01.013

请尝试下面给出的查询..

```
select count(*) AS Result from (
         SELECT count(item_id) FROM category_item
                             WHERE 
                            category_id in (2 ,3)
                            GROUP by item_id 

                              HAVING count(*) = 2
                             ) AS temp 
```

在这个查询 `put count(*) value equal to total number of category_id for example if you are checking for category_ids 1,2,3 then put having count(*) = 3`中。在此查询中，假设您提供 category_id 1 和 2，然后它将获取 item_id 的存在总数

我希望此查询对您有所帮助。

谢谢

# neventstore - J Oliver EventStore - 示例异常

> ID：10633582
> 
> 赞同：0
> 
> 时间：2012-05-17T10:05:07.427
> 
> 标签：neventstore

当我在 doc 中运行 EventStore 示例时，它在 SqlPersistenceFactory.cs 第 39 行抛出异常： Value can not be null 参数：方言

app.config中的连接字符串是否错误？</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:20:31.613

我在 MainPrograms.cs line37 中添加了一些代码—— .UsingSqlPersistence("EventStore") .WidthDialect(new EventStore.Persistence.SqlPersistence.SqlDialects.MsSqlDialect()) .EnlistIn...

# mysql - 使用索引时插入查询速度加快

> ID：10633585
> 
> 赞同：0
> 
> 时间：2012-05-17T10:05:22.283
> 
> 标签：mysql, sql-server, indexing

我知道索引会增加选择查询，但会减慢插入查询，因为每次插入数据时，索引也会更新。

我需要在我的用户帐户表中使用所有查询插入/更新/删除/选择。

现在我想知道我应该使用索引。如果是，那么请告诉我一些在使用索引时加快插入查询的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:08:26.503

每当更快查询的好处明显大于插入、更新和删除速度较慢的缺点时，您都​​应该使用索引。在 WHERE 条件中经常使用的列上使用查询。如果您有大量插入，您可能希望删除/禁用/取消使用索引并在操作后重建它们。

# php - 通过 $this->logged_user 在 activecollab 中获取登录的用户数据

> ID：10633593
> 
> 赞同：1
> 
> 时间：2012-05-17T10:05:45.623
> 
> 标签：php, activecollab, user-data, user-object

我正在使用 activecollab 的自定义模块，我需要知道如何在以下对象的帮助下获取登录的用户数据

```
$this->logged_user 
```

或者如果有人有其他方法来获取登录用户，请告诉我，我只想在我的页面上打印登录用户信息/数据

**修改的：**

当我在模型中使用这个对象时，它对我不起作用，所以有人知道登录用户的任何对象吗？这样我就可以获取登录的用户 ID 或其他内容；并且也可以在模型中使用该对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:39:09.940

啊终于有解决办法了...

在activecollab中，您可以在没有用户对象的任何地方通过此行获取登录的用户对象`$this->logged_user`

```
$this->logged_user = Authentication::getLoggedUser(); 
```

并获取登录用户您可以使用的其他基本信息：

```
$this->logged_user->getId()
$this->logged_user->getName()
$this->logged_user->getDisplayName()
$this->logged_user->getEmail()
$this->logged_user->getCompany()
$this->logged_user->isAdministrator()
$this->logged_user->getLanguage() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:52:35.967

这似乎是解决。不过，如果其他人偶然发现这个问题，这里还是要澄清一下：

1.  `$this->logged_user`仅在控制器中可用，但在模型中不可用
2.  `$logged_user`在视图中可用，因此您可以使用以下内容：`{$logged_user->getFirstName(true)|clean}`
3.  在其他任何地方，使用`Authentication::getLoggedUser()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:02:53.243

我假设您有代码来存储登录的用户信息。

在这种情况下，你应该回应它。

例如：

```
echo $this->logged_user; 
```

如果您还没有实现在此之后运行的代码，那么它将无法工作。如果您需要更多信息，请包含更多代码。

**根据新信息修改答案**

既然我知道这是一个活跃的协作项目，我将在这种情况下进行解释。

```
object ActiveCollab::findUserById( int $user_id) 
```

这将根据用户 ID 获得一个用户对象，但所有用于此的方法都设置为不获取，即它们写入和不读取。

要阅读，您可以使用 API。有关如何执行此操作的详细信息，请参见此处：[http ://www.activecollab.com/docs/manuals/developers/api/companies-and-users](http://www.activecollab.com/docs/manuals/developers/api/companies-and-users)

API 请求能够处理读取和写入操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T12:08:39.337

采用

```
echo $this->logged_user; 
```

打印变量。

# objective-c - 我如何知道何时将我的属性和方法放入 .h 文件以及何时将它们放入 .m 接口？

> ID：10633594
> 
> 赞同：4
> 
> 时间：2012-05-17T10:05:53.030
> 
> 标签：objective-c

我如何知道何时将我的属性和消息放入 .h 文件以及何时将它们放入 .m 界面？

我在想像 init 这样的公开消息应该在 .h 文件中。描述类的属性怎么样，例如配置类型等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:20:45.410

当您想限制对任何属性的访问时，您可以使用类扩展名等在 .m 文件中定义它。

没有为将属性放入 .h 或 .m 文件中定义这样的规则，您需要检查要在类外部访问哪些属性（在 .h 中定义这些属性）以及您希望在外部访问哪些属性（在 .h 中定义）。米）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:11:29.023

[根据 Apple 文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)`@interface`，在“ ”（.h）文件中声明属性。如果您只想拥有私有对象变量，则这些变量称为 ivars，您不会合成它们的访问器。

私有属性（或文档中的“属性重新声明”）可用于类扩展或协议等内容。

# java - Java ZIP - 如何解压缩文件夹？

> ID：10633595
> 
> 赞同：25
> 
> 时间：2012-05-17T10:05:54.140
> 
> 标签：java, zip

是否有任何示例代码，如何将 ZIP 中的文件夹部分解压缩到我想要的目录中？我已将文件夹“FOLDER”中的所有文件读入字节数组，如何从其文件结构中重新创建？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-12T11:10:30.750

我不确定你所说的部分是什么意思？你的意思是在没有 API 帮助的情况下自己做吗？

如果你不介意使用一些开源库，有一个很酷的 API 叫做[zip4J](http://www.lingala.net/zip4j/)

它易于使用，我认为有很好的反馈。看这个例子：

```
String source = "folder/source.zip";
String destination = "folder/source/";   

try {
    ZipFile zipFile = new ZipFile(source);
    zipFile.extractAll(destination);
} catch (ZipException e) {
    e.printStackTrace();
} 
```

如果要解压的文件有密码，可以试试这个：

```
String source = "folder/source.zip";
String destination = "folder/source/";
String password = "password";

try {
    ZipFile zipFile = new ZipFile(source);
    if (zipFile.isEncrypted()) {
        zipFile.setPassword(password);
    }
    zipFile.extractAll(destination);
} catch (ZipException e) {
    e.printStackTrace();
} 
```

我希望这很有用。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-17T11:06:58.743

这是我正在使用的代码。根据您的需要更改 BUFFER_SIZE。

```
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.zip.ZipEntry;
import java.util.zip.ZipInputStream;

public final class ZipUtils {

    private static final int BUFFER_SIZE = 4096;

    public static void extract(ZipInputStream zip, File target) throws IOException {
        try {
            ZipEntry entry;

            while ((entry = zip.getNextEntry()) != null) {
                File file = new File(target, entry.getName());

                if (!file.toPath().normalize().startsWith(target.toPath())) {
                    throw new IOException("Bad zip entry");
                }

                if (entry.isDirectory()) {
                    file.mkdirs();
                    continue;
                }

                byte[] buffer = new byte[BUFFER_SIZE];
                file.getParentFile().mkdirs();
                BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream(file));
                int count;

                while ((count = zip.read(buffer)) != -1) {
                    out.write(buffer, 0, count);
                }

                out.close();
            }
        } finally {
            zip.close();
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2020-01-03T16:21:01.213

一个最简洁、无库的 Java 7+ 变体：

```
public static void unzip(InputStream is, Path targetDir) throws IOException {
    targetDir = targetDir.toAbsolutePath();
    try (ZipInputStream zipIn = new ZipInputStream(is)) {
        for (ZipEntry ze; (ze = zipIn.getNextEntry()) != null; ) {
            Path resolvedPath = targetDir.resolve(ze.getName()).normalize();
            if (!resolvedPath.startsWith(targetDir)) {
                // see: https://snyk.io/research/zip-slip-vulnerability
                throw new RuntimeException("Entry with an illegal path: " 
                        + ze.getName());
            }
            if (ze.isDirectory()) {
                Files.createDirectories(resolvedPath);
            } else {
                Files.createDirectories(resolvedPath.getParent());
                Files.copy(zipIn, resolvedPath);
            }
        }
    }
} 
```

两个分支都需要，`createDirectories`因为 zip 文件并不总是包含所有父目录作为单独的条目，但可能仅包含它们以表示空目录。

该代码解决了[ZIP-slip 漏洞](https://snyk.io/research/zip-slip-vulnerability)，如果某些 ZIP 条目超出`targetDir`. 此类 ZIP 不是使用常用工具创建的，并且很可能是为了利用该漏洞而手工制作的。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-20T04:04:28.483

同样可以使用 Ant Compress 库来实现。它将保留文件夹结构。

Maven依赖：-

```
<dependency>
    <groupId>org.apache.ant</groupId>
    <artifactId>ant-compress</artifactId>
    <version>1.2</version>
</dependency> 
```

示例代码：-

```
Unzip unzipper = new Unzip();
unzipper.setSrc(theZIPFile);
unzipper.setDest(theTargetFolder);
unzipper.execute(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-01-21T07:42:23.557

这是一个遵循更现代惯例的简单解决方案。如果要解压缩较大的文件，您可能希望将缓冲区大小更改为更小。这样您就不会将所有文件信息保留在内存中。

```
 public static void unzip(File source, String out) throws IOException {
    try (ZipInputStream zis = new ZipInputStream(new FileInputStream(source))) {

        ZipEntry entry = zis.getNextEntry();

        while (entry != null) {

            File file = new File(out, entry.getName());

            if (entry.isDirectory()) {
                file.mkdirs();
            } else {
                File parent = file.getParentFile();

                if (!parent.exists()) {
                    parent.mkdirs();
                }

                try (BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(file))) {

                    int bufferSize = Math.toIntExact(entry.getSize());
                    byte[] buffer = new byte[bufferSize > 0 ? bufferSize : 1];
                    int location;

                    while ((location = zis.read(buffer)) != -1) {
                        bos.write(buffer, 0, location);
                    }
                }
            }
            entry = zis.getNextEntry();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-06-17T09:23:19.537

这是我用来解压缩具有多个目录的 zip 文件的代码。没有使用外部库。

```
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Enumeration;
import java.util.zip.ZipEntry;
import java.util.zip.ZipFile;

public class UnzipFile
{
  public static void main(String[] args) throws IOException
  {
    String fileZip = "src/main/resources/abcd/abc.zip";
    File destDir = new File("src/main/resources/abcd/abc");

    try (ZipFile file = new ZipFile(fileZip))
    {
      Enumeration<? extends ZipEntry> zipEntries = file.entries();
      while (zipEntries.hasMoreElements())
      {
        ZipEntry zipEntry = zipEntries.nextElement();
        File newFile = new File(destDir, zipEntry.getName());

        //create sub directories
        newFile.getParentFile().mkdirs();

        if (!zipEntry.isDirectory())
        {
          try (FileOutputStream outputStream = new FileOutputStream(newFile))
          {
            BufferedInputStream inputStream = new BufferedInputStream(file.getInputStream(zipEntry));
            while (inputStream.available() > 0)
            {
              outputStream.write(inputStream.read());
            }
            inputStream.close();
          }
        }

      }
    }
  }

} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-12T15:26:32.017

这是基于[这篇](https://www.mkyong.com/java/how-to-decompress-files-from-a-zip-file/)文章但重构（并使用[`Lombok`](https://projectlombok.org/)）的更“现代”的完整代码：

```
import lombok.var;
import lombok.val;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.zip.ZipInputStream;

import static java.nio.file.Files.createDirectories;

public class UnZip
{
    public static void unZip(String sourceZipFile, String outputDirectory) throws IOException
    {
        val folder = new File(outputDirectory);
        createDirectories(folder.toPath());

        try (val zipInputStream = new ZipInputStream(new FileInputStream(sourceZipFile, Charset.forName("Cp437"))))
        {
            var nextEntry = zipInputStream.getNextEntry();

            while (nextEntry != null)
            {
                val fileName = nextEntry.getName();
                val newFile = new File(outputDirectory + File.separator + fileName);

                newFile.getParentFile().mkdirs();

                if(fileName.endsWith("/")){
                    newFile.mkdirs();
                } else {
                    writeFile(zipInputStream, newFile);
                }

                writeFile(zipInputStream, newFile);

                nextEntry = zipInputStream.getNextEntry();
            }

            zipInputStream.closeEntry();
        }
    }

    private static void writeFile(ZipInputStream inputStream, File file) throws IOException
    {
        val buffer = new byte[1024];
        file.createNewFile();
        try (val fileOutputStream = new FileOutputStream(file))
        {
            int length;
            while ((length = inputStream.read(buffer)) > 0)
            {
                fileOutputStream.write(buffer, 0, length);
            }
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-17T10:13:15.230

您应该从 zip 文件中获取所有条目：

```
Enumeration entries = zipFile.getEntries(); 
```

然后遍历这个枚举从中获取`ZipEntry`，检查它是否是一个目录，并分别创建目录或只是提取一个文件。

# iphone - 如何确定单元格是否包含按钮

> ID：10633596
> 
> 赞同：0
> 
> 时间：2012-05-17T10:05:54.527
> 
> 标签：iphone, uitableview

我创建了一个名为 CELL 的单元格。

我的第一个任务是在单元格上添加一个按钮，我已成功添加。但是，在检索 CELL 时，我需要知道该单元是否是可重复使用的单元。如果没有，则创建单元格并添加按钮，但如果单元格存在而按钮不存在，我需要添加按钮。

在我的 XIB 中，我在单元格中添加了按钮。在某些单元格中，我需要显示按钮，而在某些单元格中则不需要。

如何确定单元格是否包含按钮？如果它确实包含一个按钮，我可以标记它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:08:45.750

采用 -

```
for( int i =0 ; i < [cell.subviews count]; i++) {
    if ([[cell.subviews objectAtIndex:i] isKindOfClass:[UIButton Class]] ) {
        //Button is found, do whatever you want
        UIButton *button = [cell.subviews objectAtIndex:i];
        int tag = button.tag;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:14:48.603

一种方法是迭代子视图，我个人认为这是个坏主意。另一种方法是将单元格的标签设置为 100 以包含按钮。

然后你可以检查

```
if (cell.tag == 100) {
     // Cell with button
} else {
     // Cell without button
} 
```

# jquery - 页面滚动后div需要垂直居中

> ID：10633603
> 
> 赞同：3
> 
> 时间：2012-05-17T10:06:22.277
> 
> 标签：jquery, html, css

我有一个`div`页面滚动后需要在屏幕上垂直居中

这是一个演示 - [http://jsfiddle.net/JtZ7F/](http://jsfiddle.net/JtZ7F/)

```
<div style="height:1000px; border:1px solid red;">
    scroll
    <span style="height:150px; width:100px; float:right; border:1px solid green; display:block; position:fixed;top:50%; margin-top:-75px;">
        need vertical center of the screen after page scroling
    </span>
</div> 
```

现在我正在使用`position:fixed;`，这不是解决方案

我希望当我停止滚动页面时，我的绿色框平滑地移动到屏幕的垂直中心。

我怎样才能在 jQuery 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:13:47.783

在您的 jquery 中添加此功能：

```
jQuery.fn.center = function () {   
this.css("top", (($(window).height() - this.outerHeight()) / 2) + $(window).scrollTop() + "px");    
 this.css("left", (($(window).width() - this.outerWidth()) / 2) + $(window).scrollLeft() + "px");     return this; } 
```

在您的跨度“测试”中添加一个 id 并在 document.ready 中写入以下内容

```
$(document).ready(function(){    
$('#test').center(); 
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-15T14:09:29.987

这是我的做法，在 Chrome 和 IE7+ 中进行了测试，请参阅[jsfiddle](http://jsfiddle.net/8VF7E/)以获取示例。

```
$.fn.center = function () {
                    return this.css({
                        'left': ($(window).width() / 2) - $(this).width() / 2,
                        'top': ($(window).height() / 2) - $(this).height() / 2,
                        'position': 'fixed'
                    });
                }; 
```

用法：

```
$(document).ready(function(){ 
    $(element).center();
}); 
```

# javascript - 提交ajax后清除表单值

> ID：10633605
> 
> 赞同：37
> 
> 时间：2012-05-17T10:06:28.167
> 
> 标签：javascript, jquery, ajax

我正在使用以下脚本来验证我的联系表。

```
//submission scripts
  $('.contactForm').submit( function(){
        //statements to validate the form   
        var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        var email = document.getElementById('e-mail');
        if (!filter.test(email.value)) {
            $('.email-missing').show();
        } else {$('.email-missing').hide();}
        if (document.cform.name.value == "") {
            $('.name-missing').show();
        } else {$('.name-missing').hide();} 

        if (document.cform.phone.value == "") {
            $('.phone-missing').show();
        } 
        else if(isNaN(document.cform.phone.value)){
        $('.phone-missing').show();
        }
        else {$('.phone-missing').hide();}  

        if (document.cform.message.value == "") {
            $('.message-missing').show();
        } else {$('.message-missing').hide();}  

        if ((document.cform.name.value == "") || (!filter.test(email.value)) || (document.cform.message.value == "") || isNaN(document.cform.phone.value)){
            return false;
        } 

        if ((document.cform.name.value != "") && (filter.test(email.value)) && (document.cform.message.value != "")) {
            //hide the form
            //$('.contactForm').hide();

            //show the loading bar
            $('.loader').append($('.bar'));
            $('.bar').css({display:'block'});

        /*document.cform.name.value = '';
        document.cform.e-mail.value = '';
        document.cform.phone.value = '';
        document.cform.message.value = '';*/

            //send the ajax request
            $.post('mail.php',{name:$('#name').val(),
                              email:$('#e-mail').val(),
                              phone:$('#phone').val(),
                              message:$('#message').val()},

            //return the data
            function(data){

              //hide the graphic
              $('.bar').css({display:'none'});
              $('.loader').append(data);

            });

            //waits 2000, then closes the form and fades out
            //setTimeout('$("#backgroundPopup").fadeOut("slow"); $("#contactForm").slideUp("slow")', 2000);

            //stay on the page
            return false;

        } 
  }); 
```

这是我的表格

```
<form action="mail.php" class="contactForm" id="cform" name="cform" method="post">
  <input id="name" type="text" value="" name="name" />
  <br />
  <span class="name-missing">Please enter your name</span>
  <input id="e-mail" type="text" value="" name="email" />
  <br />
  <span class="email-missing">Please enter a valid e-mail</span>
  <input id="phone" type="text" value="" name="phone" />
  <br />
  <span class="phone-missing">Please enter a valid phone number</span>
  <textarea id="message" rows="" cols="" name="message"></textarea>
  <br />
  <span class="message-missing">Please enter message</span>
  <input class="submit" type="submit" name="submit" value="Submit Form" />
</form> 
```

我需要在提交成功后清除表单字段值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-05-17T10:09:13.140

```
$("#cform")[0].reset(); 
```

或者在普通的 javascript 中：

```
document.getElementById("cform").reset(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-17T10:09:58.880

您可以像这样在 $.post 调用成功回调中执行此操作

```
$.post('mail.php',{name:$('#name').val(),
                              email:$('#e-mail').val(),
                              phone:$('#phone').val(),
                              message:$('#message').val()},

            //return the data
            function(data){

              //hide the graphic
              $('.bar').css({display:'none'});
              $('.loader').append(data);

              //clear fields
              $('input[type="text"],textarea').val('');

            }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T10:09:28.527

用这个：

```
$('form.contactForm input[type="text"],texatrea, select').val(''); 
```

或者，如果您有对表单的引用`this`：

```
$('input[type="text"],texatrea, select', this).val(''); 
```

* * *

`:input`=== `<input>`+小号`<select>`+`<textarea>`小号

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-17T10:10:02.853

```
$('.contactForm').submit(function(){
    var that = this;

    //...more form stuff...

    $.post('mail.php',{...params...},function(data){

        //...more success stuff...

        that.reset();
    });
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-17T10:10:57.520

简单地

```
$('#cform')[0].reset(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-17T10:13:04.870

```
$.post('mail.php',{name:$('#name').val(),
                          email:$('#e-mail').val(),
                          phone:$('#phone').val(),
                          message:$('#message').val()},

        //return the data
        function(data){
           if(data==<when do you want to clear the form>){

           $('#<form Id>').find(':input').each(function() {
                 switch(this.type) {
                      case 'password':
                      case 'select-multiple':
                      case 'select-one':
                      case 'text':
                      case 'textarea':
                          $(this).val('');
                          break;
                      case 'checkbox':
                      case 'radio':
                          this.checked = false;
                  }
              });
           }      
   }); 
```

[http://www.electrictoolbox.com/jquery-clear-form/](http://www.electrictoolbox.com/jquery-clear-form/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-05-13T14:20:17.743

它有效：在ajax成功后调用此函数并将您的表单ID作为参数发送。像这样的东西：

**此功能清除所有输入字段值，包括按钮、提交、重置、隐藏字段**

```
function resetForm(formid) {
 $('#' + formid + ' :input').each(function(){  
  $(this).val('').attr('checked',false).attr('selected',false);
 });
} 
```

* 此功能清除除按钮、提交、重置、隐藏字段以外的所有输入字段值 * */

```
 function resetForm(formid) {
   $(':input','#'+formid) .not(':button, :submit, :reset, :hidden') .val('')
  .removeAttr('checked') .removeAttr('selected');
  } 
```

例子：

```
<script>
   (function($){
       function processForm( e ){
           $.ajax({
               url: 'insert.php',
               dataType: 'text',
               type: 'post',
               contentType: 'application/x-www-form-urlencoded',
               data: $(this).serialize(),
               success: function( data, textStatus, jQxhr ){
                $('#alertt').fadeIn(2000);
                $('#alertt').html( data );
                $('#alertt').fadeOut(3000);
               resetForm('userInf');
            },
            error: function( jqXhr, textStatus, errorThrown ){
                console.log( errorThrown );
            }
        });

        e.preventDefault();
    }

    $('#userInf').submit( processForm );
})(jQuery);

 function resetForm(formid) {
$(':input','#'+formid) .not(':button, :submit, :reset, :hidden') .val('')
  .removeAttr('checked') .removeAttr('selected');
 }
  </script> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-02T09:57:46.610

提交表单时在表单中设置 id

```
 <form action="" id="cform">

       <input type="submit" name="">

    </form>

   set in jquery 

   document.getElementById("cform").reset(); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-10-07T08:03:09.683

```
$('#formid).reset(); 
```

或者

```
document.getElementById('formid').reset(); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-11-13T06:09:05.443

### 香草！

我知道这篇文章很老了。
由于 OP 使用的是 jquery ajax，因此需要此代码。
但对于那些寻找香草的人。

```
 ...
    // Send the value
    xhttp.send(params);
    // Clear the input after submission
    document.getElementById('cform').reset();
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-28T23:16:18.473

使用 ajax reset() 方法，您可以在提交后清除表单

上面脚本中的示例：

const form = document.getElementById(cform).reset();

# regex - sed - 我的替换有什么问题？

> ID：10633606
> 
> 赞同：0
> 
> 时间：2012-05-17T10:06:28.823
> 
> 标签：regex, sed

我有一个必须编辑的 300 多个文件的列表，所以我认为 sed 命令与 find 和 exec 结合使用可以帮助我。

在做错事之前（比如覆盖我不会修改的文件，或类似的事情），我决定使用 sed 并将他的结果输出到 bash 而不是本地替换。

我正在搜索的字符串是：`<tr><td class="button" style=" background:#040404; color:#eee9dc; font-size: 23px; padding:5px 0; text-align:center;"><a href="../Z2/C24357-0/hhcm-LASTMINUTES.html" style=" text-decoration:none; cursor:pointer; color:#eee9dc">Offerte & LastMinute</a></td></tr>`

我只想`<a href="../Z2/C24357-0/hhcm-LASTMINUTES.html`用`<a href="../../../special_offers.php?lang=it"`

由于我是一个菜鸟`regex`，我将看看那个以体面的方式让我进入正则表达式参数的[网页。](http://www.zytrax.com/tech/web/regex.htm#intro)

现在，我尝试了类似的方法（在单个文件上，只是为了以“安全”的方式查看输出）

```
 sed s/\<a.*LAST.*html\"
      /\<a href="\.\.\/\.\.\/\.\.\/special_offers\.php\?lang=en"/ 
      C25030-9_3/hhcm-Solo_per_due.html 
```

我得到了那个错误：`sed: -e expression #1, char 20: unterminated s' command` 就像`sed`表达式不正确，但我不知道错误是在`replacement`零件中还是在其他地方。

从现在开始感谢您的时间和精力。

S。

**编辑**

感谢答案，我通过这样做解决了这个问题

```
sed 's/<a.*LAST.*html\"/\<a href="..\/..\/..\/special_offers.php?lang=en"/' C25030-9_3/hhcm-Solo_per_due.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:11:05.467

首先，您似乎需要将整个 sed 表达式 ( `s/.../.../`) 放在单引号中，其次，您`/`最后忘记了*（请参阅编辑）*，第三，不要忘记替换仅在整个模式字符串时才有效在一条线上。

`s`编辑：有关命令的更多信息（例如，[请参见此处](http://www.grymoire.com/Unix/Sed.html#uh-1)）：它`s/old/new/`是最后一个之后的可能标志`/`。你的命令看起来像`s/something/somethingelse/somethingelse`，它比它应该的要多，我想。

# jquery-ui - JQuery UI $.widget 不是具有自动完成组合框的功能

> ID：10633607
> 
> 赞同：0
> 
> 时间：2012-05-17T10:06:37.790
> 
> 标签：jquery-ui, jquery-ui-autocomplete

我正在使用[http://jqueryui.com/demos/autocomplete/combobox.html中描述的 JQuery UI 自动完成组合框](http://jqueryui.com/demos/autocomplete/combobox.html)

但是，当我加载页面时，我得到：

> $.widget 不是函数

和

> $("#UserContent").combobox(); 不是函数，

我从 googleapis.com 加载 JQuery v1.7.2 和 JQuery UI v1.8.5。我的小部件代码（用于组合框）位于单独的文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:13:43.260

初始化组合框时，而不是：

```
$("#UserContent").combobox(); 
```

尝试：

```
$(document).ready(function(){
    $("#UserContent").combobox();
}) 
```

# coldfusion - 带有缩进的 Coldfusion wddx

> ID：10633609
> 
> 赞同：1
> 
> 时间：2012-05-17T10:06:46.943
> 
> 标签：coldfusion, wddx

我想以 wddx 格式存储我的本地化文件。

问题是有时我需要手动编辑翻译，这可能是 wddx 格式的问题，因为 Coldfusion 将其作为单行保存在文件中。

有没有办法让我在保存之前格式化 wddx 字符串？

莱昂蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:31:35.827

我不认为 ColdFusion 本身就支持缩进 xml/wddx。因此，您可以使用[cflib.org 中的 xmlindent](http://cflib.org/index.cfm?event=page.udfbyid&udfid=2057)，或者如果您对 java 感到满意，有很多可用的解决方案，请[参阅此线程](https://stackoverflow.com/questions/1264849/pretty-printing-output-from-javax-xml-transform-transformer-with-only-standard-j)，例如

```
Transformer transformer = TransformerFactory.newInstance().newTransformer();
// indent and omit xml declaration
transformer.setOutputProperty(OutputKeys.INDENT, "yes");
transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
StreamResult result = new StreamResult(new StringWriter());
DOMSource source = new DOMSource(doc);
transformer.transform(source, result);
return result.getWriter().toString(); 
```

# database - 每次 Cloudfoundry 部署 Grails 应用程序都会丢失数据库数据

> ID：10633613
> 
> 赞同：1
> 
> 时间：2012-05-17T10:06:59.817
> 
> 标签：database, grails, hsqldb, cloud-foundry

我正在使用 sts 开发一个 grails 2.0.3 应用程序。我开发并在关闭 sts 之前，我通常将我的应用程序部署在 cloudFoundry 上。我正在使用 HSQLDB，这是 DataSource.groovy：

```
dataSource {
    pooled = true
    driverClassName = "org.h2.Driver"
    username = "mcg"
    password = "mcg"
}
hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = true
    cache.provider_class = 'net.sf.ehcache.hibernate.EhCacheProvider'
}
// environment specific settings
environments {
    development {
        dataSource {
            dbCreate = "update" // one of 'create', 'create-drop','update'
            url = "jdbc:h2:file:qhDB"
        }
    }
    test {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:file:testDb"
        }
    }
    production {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:file:prodDb"
        }
    }
} 
```

我的问题是，每次我将应用程序部署到 cloudfoundry 时，云上的数据库都会变空。

一些建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:49:52.083

@kenota 是正确的，但存在整个实例可能崩溃并重新构建的额外风险，因此您将丢失所有文件系统文件，即使在 /tmp 中也是如此。使用 MySQL 或 PostgreSQL 会好得多——两者在 CloudFoundry 中使用都很简单，而且性能会更好。此外，如果您有足够的流量需要多个 Web 服务器实例，您将共享一个数据库，而不是多个具有不同数据的基于文件的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:09:08.587

通过做这个：

```
url = "jdbc:h2:file:prodDb" 
```

您要求 H2 使用文件来存储数据。但问题是，您使用的是相对路径，因此该文件将创建在 web 应用程序的当前工作目录中，该目录通常是解压的 web 应用程序根目录。

如果您在 tomcat 上运行它，该文件将位于：/opt/tomcat7/webapps/app/prodDb 如果您将重新部署您的应用程序并删除以前的应用程序，那么数据库文件也将被删除。

我认为这正是 cloudfoundry 正在发生的事情。

您应该定义存储数据库的绝对路径：

```
url = "jdbc:h2:file:/tmp/prodDb" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T09:32:23.943

我解决了在 cloudfoundy 上使用 MySQL 服务的问题。

# linux - 设置 Wavecom M1206B-ON USB0

> ID：10633614
> 
> 赞同：0
> 
> 时间：2012-05-17T10:06:59.943
> 
> 标签：linux, usb, sms-gateway

此 Wavecom 在 ttyS0 上的旧服务器上工作 好的，在我使用 USB0 的新 Ubuntu 服务器上，dmesg 确认“pl2303 转换器现在连接到 ttyUSB0”，但 minicom 似乎没有与它交谈。什么不见​​了？我需要在 minicom 上修改配置吗？我不知道我是否需要安装驱动程序，但无论如何在 Google 上都找不到。欢迎任何建议，蒂姆，伦敦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:34:02.593

好的，缺少的组件： sudo ln -s /dev/ttyUSB0 调制解调器也需要 /usr/bin/runscript 现在 minicom 正在回答...

# javascript - 将时间段添加/减去当前时间（Javascript）

> ID：10633617
> 
> 赞同：1
> 
> 时间：2012-05-17T10:07:11.543
> 
> 标签：javascript, date

我有点困惑！我有以下 JS

```
//Set datetimes for the centre of the Timeline and the highlighting period
var myCurrentDateTime = new Date();
var MS_PER_MINUTE = 60000;
var MinsToDeductForCentre = 1440
var MinsEitherSideOfNow = 720
var myTLcenterdate = new Date(myCurrentDateTime - (MinsToDeductForCentre * MS_PER_MINUTE));
var tldate = myTLcenterdate.toString()
var hlStartDate = new Date(myCurrentDateTime - (MinsEitherSideOfNow * MS_PER_MINUTE));
var hlEndDate = new Date(myCurrentDateTime + (MinsEitherSideOfNow * MS_PER_MINUTE)); 
```

myTLcentredate 给了我当前时间前 24 小时的日期

hlStartDate 给了我当前时间前 12 小时的日期

但是 hlEndDate 给出了 NotANumber 错误...

它基本上将 myCurrentDateTime 和 MinsEitherSideOfNow * MS_PER_MINUTE (43200000) 的值视为字符串并将它们连接起来，例如“Thu May 17 10:44:17 UTC+0100 201243200000”

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:15:05.510

如果您想从日期中添加或减去分钟，这就足够了：

```
var dSubtract = new Date, 
    dAdd = new Date;
// let dSubtract be Thu May 17 2012 12:11:54 GMT+0200
// and dAdd         Thu May 17 2012 12:11:54 GMT+0200
dSubtract.setMinutes(dSubtract.getMinutes()-1440); 
//=> dSubtract is now: Wed May 16 2012 12:00:54 GMT+0200
dAdd.setMinutes(dAdd.getMinutes()+720);
//=> dAdd is now: Fri May 18 2012 00:00:54 GMT+0200 
```

（当然在我的时区中的例子）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:13:49.340

在两个变量上使用函数 parseInt，如下所示：

```
parseInt(var1) * parseInt(var2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:16:09.797

**试试这个**

```
function SubtractTime(objStartdatetime, objEnddatetime) {
//var T1 = new Date("2012/02/14 8:10:00");

d = new Date();
     T1 = new Date(objStartdatetime);
     T2 = new Date(objEnddatetime);        
      misec = T2.getTime() - T1.getTime(); 
```

}

function AddTime(objStartdatetime, objEnddatetime) { //var T1 = new Date("2012/02/14 8:10:00");

```
d = new Date();
     T1 = new Date(objStartdatetime);
     T2 = new Date(objEnddatetime);        
      misec = T2.getTime() + T1.getTime(); 
```

}

# sql - 经典 ASP - 在表中按周或按月显示数据库中的记录

> ID：10633618
> 
> 赞同：0
> 
> 时间：2012-05-17T10:07:13.290
> 
> 标签：sql, asp-classic, vbscript, sql-server-2000, ado

在此过程中，我使用 asp 代码，即经典的 ASP 和 SQL Server 2000，将数据库中的记录显示到表中。我有两个链接，分别称为 week-wise 和 month-wise 。当用户单击此链接时，假设数据库有一个存储所有日期的日期字段，当插入记录时，他将按周或按月查看数据。

到目前为止，我能够为该特定用户显示表中存在的记录。我怎样才能显示他/她的记录 WEEK 或 MONTH 明智。

这是我使用的查询

```
<%
    sql="select SUM(grand_total) as total from order_details where emp_number='"&request.QueryString("no")&"'"
    rs.open sql,con,1,2
    do while not rs.eof

        rs.movenext
    loop
    rs.close
%> 
```

此特定查询显示该特定结果的记录...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:41:15.460

```
select
emp_number,
datepart(year, order_date),
datepart(month, order_date),
datepart(wk, order_date),
sum(grand_total)
from order_details
group by
emp_number,
datepart(year, order_date),
datepart(month, order_date),
datepart(wk, order_date)
order by 1, 2, 3, 4 
```

我会考虑使用[准备好的语句](http://msdn.microsoft.com/en-us/library/aa905910%28v=sql.80%29.aspx)来防止 SQL 注入。

# c# - 将数据存储在隔离存储中

> ID：10633620
> 
> 赞同：1
> 
> 时间：2012-05-17T10:07:18.273
> 
> 标签：c#

如何将变量存储在[隔离存储](http://msdn.microsoft.com/en-us/library/3ak841sy.aspx)中并稍后在 C# 控制台应用程序中检索它？

我知道如何将数据存储在隔离存储中的文件中：首先我需要获取隔离存储，然后我需要创建一个目录，然后在该目录下创建一个文件并对该文件执行读/写操作。我可以用流读取器和写入器做到这一点

```
var store = IsolatedStorageFile.GetUserStoreForApplication();

IsolatedStorageFileStream rootFile = store.CreateFile("hello.txt");

store.CreateDirectory("Conditions"); 
```

我怎样才能通过只使用变量而不使用文件来做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:29:15.340

[IsolatedStorageSettings](http://msdn.microsoft.com/en-us/library/cc221360%28v=vs.95%29.aspx) is only available for silverlight.

Similar mechanism is [there](http://ApplicationData.Current.LocalSettings) for Metro Apps.

But for normal desktop Applications similar class is not present.

If i have to approach, i will create similar class, MyLocalStorageSettings, and maintain a Dictionary inside it.

To any modification in dictionary i will save to disk (using IsolatedStorageFile). This dictionary should be loaded either at the time application is loaded, or at the first access to this class.

I have utilized similar approach for storing complex settings in [Metro Apps](http://msdn.microsoft.com/en-us/windows/apps/br229512), where existing infrastructure is not sufficient.

# iphone - 带有导航控制器的标签栏控制器在单个应用程序中

> ID：10633624
> 
> 赞同：0
> 
> 时间：2012-05-17T10:07:22.330
> 
> 标签：iphone

我创建了一个空应用程序，然后向它添加了一个窗口（创建了一个基于窗口的应用程序）。

然后我在其中添加了 tabbarcontroller 和 tabbarcontroller 中的导航控制器。我已经为每个选项卡将 nib 文件添加到我的应用程序中，并将 nib 名称提供给 viewcontrollers。然后我在其中一个 nib 文件中添加了一个按钮，然后应用程序崩溃并给出如下错误 -

> 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类与键 btnNext 的键值编码不兼容。”

-----我也连接了按钮的iboutlet。那为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:12:08.597

当 IBOutlets 未正确接线时会发生此错误。一个常见的例子是，如果您要在 Interface Builder 中连接一个 IBOutlet，然后删除相应类中的相应属性（其中定义了 IBOutlet）。显然这是一个错误，但不幸的是 Xcode 不会给你一个编译时错误，而是给你这个模糊的运行时错误。查看相关 Interface Builder 文件中的所有 IBOutlets，并确保它们正确匹配头文件中的 IBOutlets（类型和存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:14:10.053

您需要将导航控制器添加到选项卡并在（视图控制器）中的导航控制器内放置视图控制器的类名。希望这个[链接](http://broadcast.oreilly.com/2009/06/tab-bars-and-navigation-bars-t.html)也能帮助你。

# sql - 对预定时间的历史成本率求和（单个生效日期）

> ID：10633628
> 
> 赞同：4
> 
> 时间：2012-05-17T10:07:29.363
> 
> 标签：sql, sql-server, sql-server-2008

我们有一个时间管理系统，我们的员工或承包商（资源）输入他们的工作时间，我们为此计算成本。我有一张历史成本表：

```
CREATE TABLE ResourceTimeTypeCost (
 ResourceCode VARCHAR(32),
 TimeTypeCode VARCHAR(32),
 EffectiveDate DATETIME,
 CostRate DECIMAL(12,2)
) 
```

所以我有一个日期字段来标记生效日期。如果我们有一个记录是

```
('ResourceA', 'Normal', '2012-04-30', 40.00) 
```

我添加了一条记录

```
('ResourceA', 'Normal', '2012-05-04', 50.00) 
```

因此，4 月 30 日至 5 月 3 日之间输入的所有时间均为 40.00 英镑，4 日午夜之后的所有时间均为 50.00 英镑。我原则上理解这一点，但是您如何编写表达此逻辑的查询？

假设我的时间表如下所示

```
CREATE TABLE TimeEntered (
 ResourceCode VARCHAR(32),
 TimeTypeCode VARCHAR(32),
 ProjectCode VARCHAR(32),
 ActivityCode VARCHAR(32),
 TimeEnteredDate DATETIME,
 HoursWorked DECIMAL(12,2)
) 
```

如果我将以下记录插入 TimeEntered 表

```
('ResourceA','Normal','Project1','Management1','2012-04-30',7.5)
('ResourceA','Normal','Project1','Management1','2012-05-01',7.5)
('ResourceA','Normal','Project1','Management1','2012-05-02',7.5)
('ResourceA','Normal','Project1','Management1','2012-05-03',7.5)
('ResourceA','Normal','Project1','Management1','2012-05-04',7.5)
('ResourceA','Normal','Project1','Management1','2012-05-07',7.5)
('ResourceA','Normal','Project1','Management1','2012-05-08',7.5) 
```

我想获得一个按资源返回总成本的查询

所以在上面的例子中，它将是'ResourceA'，(4 * 7.5 * 40) + (3 * 7.5 * 50) = 2325.00

谁能提供一个示例 SQL 查询？我知道这个例子没有使用 TimeType（即它总是“正常”），但我也想看看这是如何处理的

我无法更改数据库的结构。提前谢谢了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:44:00.587

```
IF OBJECT_ID ('tempdb..#ResourceTimeTypeCost') IS NOT NULL DROP TABLE #ResourceTimeTypeCost
CREATE TABLE #ResourceTimeTypeCost (  ResourceCode VARCHAR(32),  TimeTypeCode VARCHAR(32),  EffectiveDate DATETIME,  CostRate DECIMAL(12,2) ) 
INSERT INTO #ResourceTimeTypeCost 
SELECT 'ResourceA' as resourcecode, 'Normal' as timetypecode, '2012-04-30' as effectivedate, 40.00 as costrate
UNION ALL
SELECT 'ResourceA', 'Normal', '2012-05-04', 50.00

IF OBJECT_ID ('tempdb..#TimeEntered') IS NOT NULL DROP TABLE #TimeEntered
CREATE TABLE #TimeEntered (  ResourceCode VARCHAR(32),  TimeTypeCode VARCHAR(32),  ProjectCode VARCHAR(32),  ActivityCode VARCHAR(32),  TimeEnteredDate DATETIME,  HoursWorked DECIMAL(12,2) ) 
INSERT INTO #TimeEntered 
SELECT 'ResourceA','Normal','Project1','Management1','2012-04-30',7.5 
UNION ALL SELECT 'ResourceA','Normal','Project1','Management1','2012-05-01',7.5 
UNION ALL SELECT 'ResourceA','Normal','Project1','Management1','2012-05-02',7.5 
UNION ALL SELECT 'ResourceA','Normal','Project1','Management1','2012-05-03',7.5 
UNION ALL SELECT 'ResourceA','Normal','Project1','Management1','2012-05-04',7.5 
UNION ALL SELECT 'ResourceA','Normal','Project1','Management1','2012-05-07',7.5 
UNION ALL SELECT 'ResourceA','Normal','Project1','Management1','2012-05-08',7.5 

;with ranges as
(
select 
resourcecode 
,TimeTypeCode
,EffectiveDate
,costrate
,row_number() OVER (PARTITION BY resourcecode,timetypecode ORDER BY effectivedate ASC) as row
from #ResourceTimeTypeCost 
)
,ranges2 AS
(
SELECT 
r1.resourcecode 
,r1.TimeTypeCode
,r1.EffectiveDate
,r1.costrate
,r1.effectivedate as start_date
,ISNULL(DATEADD(ms,-3,r2.effectivedate),GETDATE()) as end_date
FROM ranges r1
LEFT OUTER JOIN ranges r2 on r2.row = r1.row + 1 --joins onto the next date row
                    AND r2.resourcecode = r1.resourcecode 
                    AND r2.TimeTypeCode = r1.TimeTypeCode
)
SELECT 
tee.resourcecode
,tee.timetypecode
,tee.projectcode
,tee.activitycode
,SUM(ranges2.costrate * tee.hoursworked) as total_cost
FROM #TimeEntered tee
INNER JOIN ranges2 ON tee.TimeEnteredDate >= ranges2.start_date
                    AND tee.TimeEnteredDate <= ranges2.end_date
                    AND tee.resourcecode = ranges2.resourcecode
                    AND tee.timetypecode = ranges2.TimeTypeCode
GROUP BY tee.resourcecode
,tee.timetypecode
,tee.projectcode
,tee.activitycode 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T10:55:19.387

你所拥有的是一个成本表，正如有些人所说，它是一个缓慢变化的维度。首先，这将有助于确定成本表的生效日期和结束日期。我们可以通过以下方式进行自我加入和分组：

```
with costs as
    (select c.ResourceCode, c.EffectiveDate as effdate,
            dateadd(day, -1, min(c1.EffectiveDate)) as endDate,
            datediff(day, c.EffectiveDate, c1.EffectiveDate) - 1 as Span
     from ResourceTimeTypeCost c left outer join
          ResourceTimeTypeCost c1
     group by c.ResourceCode, c.EffectiveDate
    ) 
```

虽然您说您不能更改表结构，但当您有一个缓慢变化的维度时，有一个有效和结束日期是一种很好的做法。

现在，您可以将此信息与 TimeEntered 一起使用，如下所示：

```
select te.*, c.CostRate * te.HoursWorked as dayCost
from TimeEntered te join
     Costs c
     on te.ResouceCode = c.ResourceCode and
        te.TimeEntered between c.EffDate and c.EndDate 
```

要按给定时间范围内的资源进行汇总，完整的查询如下所示：

```
 with costs as
    (select c.ResourceCode, c.EffectiveDate as effdate,
            dateadd(day, -1, min(c1.EffectiveDate)) as endDate,
            datediff(day, c.EffectiveDate, c1.EffectiveDate) - 1 as Span
     from ResourceTimeTypeCost c left outer join
          ResourceTimeTypeCost c1
     group by c.ResourceCode, c.EffectiveDate
    ),
      te as
    (select te.*, c.CostRate * te.HoursWorked as dayCost
     from TimeEntered te join
          Costs c
          on te.ResouceCode = c.ResourceCode and
             te.TimeEntered between c.EffDate and c.EndDate
    )
select te.ResourceCode, sum(dayCost)
from te
where te.TimeEntered >= <date1> and te.TimeEntered < <date2> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T10:45:13.527

你可以试试这个。[CROSS APPLY](http://riteshshah.wordpress.com/2009/03/03/cross-apply-and-outer-apply-clause-in-sql-server-2005/)将找到第一个 ResourceTimeTypeCost，其日期较早或相同，并且 ResourceCode 和 TimeTypeCode 与 TimeEntered 中的当前记录相同。

```
SELECT te.ResourceCode,
       te.TimeTypeCode,
       te.ProjectCode,
       te.ActivityCode,
       te.TimeEnteredDate,
       te.HoursWorked,
       te.HoursWorked * rttc.CostRate Cost
FROM TimeEntered te 
CROSS APPLY
(
  -- First one only
  SELECT top 1 CostRate
    FROM ResourceTimeTypeCost
   WHERE te.ResourceCode = ResourceTimeTypeCost.ResourceCode
     AND te.TimeTypeCode = ResourceTimeTypeCost.TimeTypeCode
     AND te.TimeEnteredDate >= ResourceTimeTypeCost.EffectiveDate
   -- By most recent date
   ORDER BY ResourceTimeTypeCost.EffectiveDate DESC
) rttc 
```

不幸的是，我再也找不到关于 msdn 的文章，因此上面链接中的博客。

[现场测试@Sql Fiddle](http://sqlfiddle.com/#!3/19d2c/5)。

# c# - 如何从函数返回查询的值？

> ID：10633630
> 
> 赞同：0
> 
> 时间：2012-05-17T10:07:38.753
> 
> 标签：c#, asp.net, sql, database, function

我已经创建了一个函数来返回执行的 SQL 查询的结果，如下所示：

```
EDITED :

 public int GetChips(int points, string username)
    {
        int chip = 0;
        string getChips = "SELECT  Chips from tbl_UserInfo where UserName =' " + username + " '";
        con = new MySqlConnection(conString);
        con.Open();
        MySqlCommand cmd = new MySqlCommand(getChips, con);
        MySqlDataReader chips = cmd.ExecuteReader();

        while (chips.Read())
        {
            chip = chips.GetInt32(0);
            if (chip > points)
            {
                if (points == 5000)
                {
                    chip = chip - 5000;
                }
                else if (points == 10000)
                {
                    chip = chip - 10000;
                }
            }

        }
        con.Close();

        return chip;
    } 
```

它将芯片的值返回为 0。此代码不会进入“while”条件。

可能是什么问题？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:10:44.853

嗯，是的......`temp`是一个`MySqlDataReader`，而不是一个`int`。您不能将 a 分配给`MySqlDataReader`type 的变量`int`。

我怀疑你想要：

```
chip = temp.GetInt32(0); 
```

请注意，您应该使用`using`语句来释放所有资源，而不是仅仅显式关闭连接。如果有多个结果（或没有结果），您还应该考虑想要发生的事情。

此外，除非用户将其用户名放在引号中，否则您的代码将在执行时失败。*不要*通过在 SQL 中添加引号来解决此问题 - 改用参数化查询。否则你很容易受到[SQL 注入攻击](http://bobby-tables.com)。基本上，您几乎不应该使用这样的值动态构建 SQL - 始终将它们参数化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:07:28.037

对您编辑的问题的回答：

您确定 select 语句完全返回任何值吗？您的内部有一个空间`' "`，`" '"`因此它将寻找而`' Rohan '`不是`'Rohan'`. 尝试

```
UserName ='" + username + "'" 
```

或者更好的是，就像 Jon 建议的那样，使用参数化查询！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T10:10:30.610

`temp`是一个`MySqlDataReader`而是`chip`一个`int`。当然，您不能将一个分配给另一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T10:25:42.583

因为您的查询只返回一个值，所以您可以使用它：

```
chip  = (int)(command.ExecuteScalar() ?? 0); 
```

请查看以下链接以获取更多详细信息：

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

# c# - 基于选择掩码的切片数组

> ID：10633632
> 
> 赞同：3
> 
> 时间：2012-05-17T10:07:54.983
> 
> 标签：c#, .net, arrays, linq

给定两个数组：

```
double[] a = new double[]{1.0, 2.0, 3.0};
bool[] b = new bool[]{true, false, true}; 
```

有没有一种简单的方法来选择`a`基于`b`？在 R 和其他脚本语言中，您会说：

```
a[b] 
```

得到`{1.0, 3.0}`. 我不知道在 C# 中是否有一种干净的（不涉及显式循环）方法来执行此操作。也许我应该以不同的方式组织我的数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T10:11:52.180

使用 LINQ`Zip`方法，例如：

```
a.Zip(b, (i, j) => new {i, j}).Where(x => x.j).Select(x => x.i) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T10:13:27.437

您可以使用 LINQ 实现此目的：

```
double[] a = new double[]{1.0, 2.0, 3.0}; 
bool[] b = new bool[]{true, false, true}; 
var result = a.Where((item, index)=>b[index]); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T10:13:46.443

还有这种更传统的 LINQ 方法：

```
b.Select((f, i) => f ? i : - 1).Where(i => i != -1).Select(i => a[i]); 
```

# struts2 - Struts2拦截器改变动作

> ID：10633639
> 
> 赞同：1
> 
> 时间：2012-05-17T10:08:31.283
> 
> 标签：struts2

我添加了 Struts2 拦截器，如果某些逻辑触发，我想更改调用操作。目前我可以在调用操作后更改重定向 JSP 文件。但是我需要在调用操作之前更改调用操作。有没有办法调用不同的动作？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:24:23.563

根据您的评论，您的拦截方法如下所示：

```
 public String intercept(ActionInvocation actionInvocation) throws Exception {

        final ActionContext actionContext = ActionContext.getContext();
        final HttpServletRequest httpServletRequest = (HttpServletRequest) actionContext.get(HTTP_REQUEST);
        HttpSession httpSession = httpServletRequest.getSession(false);

        UserObject userObject = session.getAttribute("User"); //Check for user information, this is just a dummy 
        if(isSpecificUser(userObject)){    
            return "SpecificAction";
        }
        return actionInvocation.invoke();
    } 
```

`SpecificAction`应该存在于您的配置文件中。

# c# - 在代码隐藏中绑定 GridView 不起作用

> ID：10633640
> 
> 赞同：0
> 
> 时间：2012-05-17T10:08:35.610
> 
> 标签：c#, asp.net, data-binding, gridview

我有一个非常烦人的问题，我已经挣扎了几个小时了。我在一个页面上有多个 asp.net GridView 控件。其中一个网格（网格 B）依赖于另一个网格（网格 a）以使其数据正确更新。

我遇到的问题是：

当我在 if(!IsPostback) 中执行 gridB.Databind() 时，网格 B 的功能有效，但网格不会随着网格 A 中新添加的记录而更新。

当我在不包含回发检查的其他任何地方执行 gridB.Databind() 时，网格 B 中的数据会随着网格 A 中新添加的记录正确更新，但是网格 B 的功能不再起作用。

例子：

```
 // Functionality for dropdownlist etc works correctly, but new data from gvA doesn't show in gvB
            if (grvSender.ID == "gvA")
            {
                if (!IsPostBack)
                    gvB.DataBind();
            }

            // Functionality for dropdownlist etc no longer works correctly, but new data from gvA shows correctly in gvB
            if (grvSender.ID == "gvA")
            {
                if (IsPostBack)
                    gvB.DataBind();
            } 
```

我已经在人类已知的每个可能的地方调用了 gvB 的数据绑定方法，但同样的问题仍然存在……修复问题 A 给我带来问题 B，修复问题 B 给我带来问题 A。

任何想法都会很棒。我可以看到这是非常愚蠢的事情，但我现在几乎整天都盯着代码，而且我没有想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:15:02.427

您应该`Page_PreRender`为您的代码使用事件，您也可以按照以下方式编写代码`else`。

```
 if (grvSender.ID == "gvA")
        {
            if (!IsPostBack)
                gvB.DataBind();
        }

        else
        {
            if (IsPostBack)
                gvB.DataBind();
        } 
```

# android - 如何将列表视图的检查值存储在数组或数据库中？

> ID：10633642
> 
> 赞同：0
> 
> 时间：2012-05-17T10:08:46.963
> 
> 标签：android, listview, android-listview

我有一个列表视图，其行有一个文本视图和一个复选框。

我想弹出与复选框关联的名称，然后单击一个按钮，我想将所有 textview 数据存储到数据库中。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:17:25.710

尝试这样的事情：

```
if (checkBox.isChecked()) {
    View view = listview.getChildAt(position);
    TextView text = (TextView)view.findViewById(R.id.myTextBox);
    String contents = text.getText().toString();
} 
```

您需要将 if 语句调整为您自己的复选框并遍历它们以检查它们是否已检查并将 if 语句中的代码重命名为您的 oen 名称

# javascript - asp.net / javascript：如何在设置为宽度 640 像素和高度 480 像素的新网页中打开链接？

> ID：10633647
> 
> 赞同：1
> 
> 时间：2012-05-17T10:09:08.323
> 
> 标签：javascript, asp.net, visual-studio, visual-studio-2010

大家早，

我希望有人可以帮助或为我提供一些示例代码，以参考以下内容。我不太确定我是否可以简单地设置 asp.net (Visual Studio 2010) 属性，或者我是否需要一些 java 脚本来完成我的任务。

我有一个网页，上面有一个链接，当用户单击它时，它会通过 _Blank 命令打开一个新网页。

我想做的是让这个页面以非常小的比例（640px X 480px）打开并分层在主网页的顶部。这个小页面本质上只是包含一个网格视图，其中列出了用于文档的项目。

我环顾了互联网，因为我认为这最好通过在较小的网页中使用 JavaScript 来完成，但我无法让它成功运行。

我找到了一个样本，需要尝试调整它，但没有成功。

这是我的示例代码....

```
 <script type="text/javascript" language="javascript">
    window.onload = function () {
        var w = window.open("about:blank", "main", "width=640,height=480", true)
        window.opener = "main";
        window.open("", "_parent", "");
        w.opener.close();
    }
    </script> 
```

我较小的网页名为uploadview.aspx

任何帮助都是非常重要的。

问候贝蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:36:02.670

您必须在 window.open 的第一个参数中指定窗口 URL，并且必须有按钮来调用该 JavaScript，目前尚不清楚为什么要在页面加载事件中这样做。无论如何，这是在某些链接单击时打开窗口的示例

```
 <a href="#" onclick="OpenUploadView()">Open Upload View</a>
  <script type="text/javascript">

    function OpenUploadView() {
      window.open("uploadview.aspx?param=1", "_blank", "width=640,height=480", true);
    }

  </script> 
```

您还可以将参数传递给该 aspx 页面，如上所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:22:11.117

您可以使用 window.opendialog()
了解更多信息，请访问[https://developer.mozilla.org/en/DOM/window.openDialog](https://developer.mozilla.org/en/DOM/window.openDialog)

# mysql - 如何优化我的复杂 MySQL 查询？

> ID：10633649
> 
> 赞同：4
> 
> 时间：2012-05-17T10:09:20.410
> 
> 标签：mysql

## 桌子

每行代表在特定日期特定时间播出的视频。每天大约有 1600 个视频。

```
CREATE TABLE `air_video` (
    `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    `date` DATE NOT NULL,
    `time` TIME NOT NULL,
    `duration` TIME NOT NULL,
    `asset_id` INT(10) UNSIGNED NOT NULL,
    `name` VARCHAR(100) NOT NULL,
    `status` VARCHAR(100) NULL DEFAULT NULL,
    `updated` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`),
    UNIQUE INDEX `date_2` (`date`, `time`),
    INDEX `date` (`date`),
    INDEX `status` (`status`),
    INDEX `asset_id` (`asset_id`)
)
ENGINE=InnoDB 
```

## 任务

有两个条件。

1.  每个视频每天必须播放不超过 24 次。
2.  每个视频的轮播时间不得超过 72 小时。

*轮播*意味着从拳头到最后一次视频播出之间的时间跨度。

所以我需要选择所有违反这些条件的视频，给定用户指定的日期范围。

结果必须按天和asset_id（视频ID）分组。例如：

```
 date      asset_id          name           dailyCount      rotationSpan
   2012-04-27      123      whatever_the_name         35              76
   2012-04-27      134      whatever_the_name2        39              20
   2012-04-28      125      whatever_the_name3        26              43 
```

## 询问

现在我已经写了这个查询：

```
SELECT
    t1.date, t1.asset_id, t1.name,
    (SELECT 
        COUNT(t3.asset_id) 
        FROM air_video AS t3 
        WHERE t2.asset_id = t3.asset_id AND t3.date = t1.date
    ) AS 'dailyCount',
    MIN(CONCAT(t2.date, ' ', t2.time)) AS 'firstAir',
    MAX(CONCAT(t2.date, ' ', t2.time)) AS 'lastAir',
    ROUND(TIMESTAMPDIFF(
        MINUTE,
        MIN(CONCAT(t2.date, ' ', t2.time)),
        MAX(CONCAT(t2.date, ' ', t2.time)) 
    ) / 60) as 'rotationSpan'
FROM
    air_video AS t1
INNER JOIN
    air_video AS t2 ON
        t1.asset_id = t2.asset_id 
WHERE
    t1.status NOT IN ('bumpers', 'clock', 'weather')
    AND t1.date BETWEEN '2012-04-01' AND '2012-04-30'
GROUP BY
    t1.asset_id, t1.date
HAVING
    `rotationSpan` > 72
    OR `dailyCount` > 24
ORDER BY
    `date` ASC,
    `rotationSpan` DESC,
    `dailyCount` DESC 
```

## 问题

1.  用户指定天数之间的范围越大 - 完成查询所需的时间越长（一个月范围内大约需要 9 秒）
2.  `lastAir`时间戳不是视频在特定日期播出的最晚时间，而是它完全播出的最晚时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:36:57.630

如果您需要加快查询速度，您需要删除第 3 行的 select 子查询。要保持该计数，您可以在 from 子句中使用您最初使用的确切参数再次将其内部加入。它应该是这样的：

```
SELECT
    t1.date, t1.asset_id, t1.name,
    COUNT(t3.asset_id) AS 'dailyCount',
    MIN(CONCAT(t2.date, ' ', t2.time)) AS 'firstAir',
    MAX(CONCAT(t2.date, ' ', t2.time)) AS 'lastAir',
    ROUND(TIMESTAMPDIFF(
        MINUTE,
        MIN(CONCAT(t2.date, ' ', t2.time)),
        MAX(CONCAT(t2.date, ' ', t2.time)) 
    ) / 60) as 'rotationSpan'
FROM
    air_video AS t1
INNER JOIN
    air_video AS t2 ON
        (t1.asset_id = t2.asset_id)
INNER JOIN
    air_video AS t3 
        ON (t2.asset_id = t3.asset_id AND t3.date = t1.date)
WHERE
    t1.status NOT IN ('bumpers', 'clock', 'weather')
    AND t1.date BETWEEN '2012-04-01' AND '2012-04-30'
GROUP BY
    t1.asset_id, t1.date
HAVING
    `rotationSpan` > 72
    OR `dailyCount` > 24
ORDER BY
    `date` ASC,
    `rotationSpan` DESC,
    `dailyCount` DESC 
```

由于 t2 不受日期约束，因此您显然正在查看整个表格，而不是日期范围。

**编辑：** 由于很多日期绑定，查询仍然运行得太慢。然后我采取了不同的方法。我创建了 3 个视图（您显然可以将它们组合成一个没有视图的普通查询，但我更喜欢最终结果查询）

--T1--

`CREATE VIEW t1 AS select date,asset_id,name from air_video where (status not in ('bumpers','clock','weather')) group by asset_id,date order by date;`

--T2--

`CREATE VIEW t2 AS select t1.date,t1.asset_id,t1.name,min(concat(t2.date,' ',t2.time)) AS 'firstAir',max(concat(t2.date,' ',t2.time)) AS 'lastAir',round((timestampdiff(MINUTE,min(concat(t2.date,' ',t2.time)),max(concat(t2.date,' ',t2.time))) / 60),0) AS 'rotationSpan' from (t1 join air_video t2 on((t1.asset_id = t2.asset_id))) group by t1.asset_id,t1.date;`

--T3--

`CREATE VIEW t3 AS select t2.date,t2.asset_id,t2.name,count(t3.asset_id) AS 'dailyCount',t2.firstAir,t2.lastAir,t2.rotationSpan AS rotationSpan from (t2 join air_video t3 on(((t2.asset_id = t3.asset_id) and (t3.date = t2.date)))) group by t2.asset_id,t2.date;`

然后，您可以从那里运行以下查询：

```
SELECT
    date,
    asset_id, 
    name,
    dailyCount,
    firstAir,
    lastAir,
    rotationSpan
FROM
    t3
WHERE
    date BETWEEN '2012-04-01' AND '2012-04-30'
    AND (
        rotationSpan > 72
        OR 
        dailyCount > 24
    )
ORDER BY
    date ASC,
    rotationSpan DESC,
    dailyCount DESC 
```

# javascript - 在 Vista 小工具中使用 Javascript 获取列表数据

> ID：10633650
> 
> 赞同：0
> 
> 时间：2012-05-17T10:09:24.320
> 
> 标签：javascript, web-services, sharepoint, soap, windows-desktop-gadgets

我正在尝试使用 WebServices 将共享点列表的所有列表项放入 Windows 7 小工具中，但我不确定如何做到这一点，

我在谷歌上找到了这段代码，没有任何解释，所以我不知道如何使用这段代码获取列表数据，然后显示在 Windows 小工具中。

任何人都可以指导我正确的方向吗？

**小工具.xml**是

```
 <?xml version="1.0" encoding="utf-8" ?>
<gadget>
  <name>HelloGadget</name>
  <version>1.0.0.0</version>
  <description>Hello World Gadget.</description>
  <hosts>
    <host name="sidebar">
      <base type="HTML" apiVersion="1.0.0" src="first.html" />
      <permissions>Full</permissions>
      <platform minPlatformVersion="1.0" />
    </host>
  </hosts>
</gadget> 
```

**first.html**是

```
 <html>
<script>
//----------------- resizes the gadget display surface
function DoInit() {
    document.body.style.width = 90;
    document.body.style.height= 55;
    document.body.style.margin=0;
}

    $(document).ready(function() 
{
    var soapEnv =
        "<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/'> 
            <soapenv:Body> 
                 <GetListItems xmlns='http://schemas.microsoft.com/sharepoint/soap/'> 
                    <listName>ListName</listName> 
                    <viewFields> 
                        <ViewFields> 
                           <FieldRef Name='Title' /> 
                       </ViewFields> 
                    </viewFields> 
                </GetListItems> 
            </soapenv:Body> 
        </soapenv:Envelope>";

    $.ajax({
        url: "http://my_site/_vti_bin/lists.asmx",
        type: "POST",
        dataType: "xml",
        data: soapEnv,
        complete: processResult,
        contentType: "text/xml; charset="utf-8""
    });
});

function processResult(xData, status) {
    $(xData.responseXML).find("z\:row").each(function() {
        alert($(this).attr("ows_Title"));
    });
}

</script>
<body onload="DoInit();">
<table border="5"><tr><td><center><i>Hello World!</i></center></td></tr></table>
<div id = "clickit"> <button type="button" onclick="" >Click Me!</button> </div>
</body>
</html> 
```

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:17:16.300

我们都熟悉 SQL。有一个名为 SPSQL 的新 jQuery 库。这真的很酷，因为您可以使用 SQL 语法查询 SharePoint。只需添加适当的库，您就可以上路了。请参阅下面的示例和此处的[文章](http://code.google.com/p/spsql/)。

要获取项目，只需执行以下操作：

```
var result = SPSql.parseSQL('SELECT MyList.Field FROM MyList WHERE MyList.ID > 10 ORDER BY  MyList.ID DESC'); 
```

现在可以处理所有结果行：

```
for (var row = 0; row < result.length; row++) {
   for (var column in result[row])
      alert( column + ": " + result[row][column] );
 } 
```

# php - 使用 PHP 和 Linux 进行渗透测试

> ID：10633651
> 
> 赞同：0
> 
> 时间：2012-05-17T10:09:25.927
> 
> 标签：php, security, debian, penetration-testing

出于研究目的，我最近修改了`Linux Apache2 PHP5`堆栈的 Debian 源代码，现在我想做一些安全渗透测试。

特别是我修改了**PHP5**核心覆盖系统`libc6`调用、`SuEXEC`Apache 包装器和`clamdscan`守护程序。

我正在尝试一些漏洞利用，例如 C99 madShell、ircBots、Mempodipper 等。但我认为这些工具仅适用于新手（实际上我并不是真正的安全专家）。

有人可以建议我如何进行有效和邪恶的渗透测试吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T11:08:44.297

可能更多的是[https://security.stackexchange.com/](https://security.stackexchange.com/)的问题，他们已经加载了关于笔测试的评论/答案。

老实说，您的问题的答案可能会一直持续下去，但这里有一些关于有效渗透测试的文档和链接。

假设您想做合法的渗透测试并有权进行渗透测试（对于获得书面签字非常重要，我不能强调这一点）然后从 SANS 中查看这些文件 -

[http://www.sans.org/reading_room/analysts_program/PenetrationTesting_June06.pdf](http://www.sans.org/reading_room/analysts_program/PenetrationTesting_June06.pdf) [http://www.sans.org/reading_room/whitepapers/auditing/conducting-penetration-test-organization_67](http://www.sans.org/reading_room/whitepapers/auditing/conducting-penetration-test-organization_67)

许多渗透测试人员的名声不好，因为他们中的许多人只是简单地运行 Nessus 并提供罐装报告（不要那样做），因此行业中的一群顶尖人士正试图创建一个渗透测试标准，所以看看这个- [http://www.pentest-standard.org/index.php/Main_Page](http://www.pentest-standard.org/index.php/Main_Page)。

如果您想学习如何编写漏洞利用程序并开始使用 shellcode，请查看[http://www.exploit-db.com/](http://www.exploit-db.com/)站点，并可能加入 Metasploit 邮件列表或 IRC 频道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T11:08:15.637

如果您希望渗透测试有意义并发现更多问题，而不仅仅是唾手可得的成果，那么您真的应该聘请专业的渗透测试人员或让其他具有必要实践经验和实践的人为您完成。初学者（无意冒犯）教科书渗透测试对于评估系统的安全性没有意义。此外，由于您正在测试您自己设计的安全系统或设备，因此不自己进行测试而是让某人反对该问题是很有意义的，他们也会质疑系统对现实世界实用性的基本假设。

# html - 列到达相同的底部，但没有相同的顶部

> ID：10633655
> 
> 赞同：0
> 
> 时间：2012-05-17T10:09:37.440
> 
> 标签：html, css, layout, sticky-footer

我正在处理一个有点挑战的设计。

该站点需要使用粘性页脚和**完整**的等长列。我一直在用背景图片欺骗其他页面，但我有一些麻烦的页面在左栏中有一个标题。

标题下方有一个间隙，显示背景图像，所以我降低背景图像是不可行的。

![在此处输入图像描述](../Images/be7d3773ba72d1868d7754db88c094ff.png)

[这是一个 JSfiddle，其中包含许多基本标记。](http://jsfiddle.net/4rY8h/1/)我已经包含了粘性页脚，并在 CSS 中对其进行了分段，因为该解决方案必须与粘性页脚一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:15:27.333

您可以`Display:table`为此使用属性。像这样写：

```
#columns{
    width:90%;
    display:table;
}
.column{
    border: 1px dotted blue;
    display:table-cell;
} 
```

检查这个[http://jsfiddle.net/4rY8h/2/](http://jsfiddle.net/4rY8h/2/)

但它不适用于 IE7 及以下版本。

# php - cURL 响应为 200，但它并没有真正发布值

> ID：10633656
> 
> 赞同：0
> 
> 时间：2012-05-17T10:09:38.243
> 
> 标签：php, post, curl

我有以下使用 PHP 的 cURL 代码；

```
$product_id_edit="Playful Minds (1062)";
$item_description_edit="TEST";
$rank_edit="0";
$price_type_edit="2";
$price_value_edit="473";
$price_previous_value_edit="473";
$active_edit="1";
$platform_edit="ios";

//set POST variables
$url = 'https://www.domain.com/adm_test/phpgen/offline_items.php?operation=insert';
$useragent = 'Mozilla/5.0 (Windows NT 6.1; rv:8.0.1) Gecko/20100101 Firefox/8.0.1';

$fields = array(
   'product_id_edit'=>urlencode($product_id_edit),
   'item_description_edit'=>urlencode($item_description_edit),
   'rank_edit'=>urlencode($rank_edit),
   'price_type_edit'=>urlencode($price_type_edit),
   'price_value_edit'=>urlencode($price_value_edit),
   'price_previous_value_edit'=>urlencode($price_previous_value_edit),
   'active_edit'=>urlencode($active_edit),
   'platform_edit'=>urlencode($platform_edit)
);

$fields_string="";

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string,'&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
//add useragent
curl_setopt($ch, CURLOPT_USERAGENT, $useragent);

curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);

curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);
curl_setopt($ch,CURLOPT_POST,count($fields));

//execute post
$result = curl_exec($ch);
if(curl_errno($ch)){
print "" . curl_error($ch);
}else{
//print_r($result);
}

$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
//echo "HTTP Response Code: " . curl_error($ch);
echo $httpCode;

//close connection
curl_close($ch); 
```

我打印了 $httpCode；我得到代码 200；我认为这没问题，因为我在手册页中阅读过，但是，当我检查该站点时，POSTed 值不存在，

这是否与跨域有关，因为我没有在同一个域上发布它？，我在 127.0.0.1/site/scrpt.php 上做，但如果它不成功，我如何获得响应代码 200 ?

我还尝试通过删除请求 URL 上的一部分来获得 404，它确实返回了 404（这意味着 cURL 在我的假设中正常工作）

是否将 URL [https://www.domain.com/adm_test/phpgen/offline_items.php?operation=insert](https://www.domain.com/adm_test/phpgen/offline_items.php?operation=insert)与“?operation=insert”有关？

让我们假设（但不是暗示），我来自另一个站点，我希望将值发布到另一个站点的形式中，排序是一个机器人。尽管我的目标并不意味着任何邪恶的意图，如果这不可行，我是否必须编码数千行信息。

同样，我不需要来自服务器的响应（但如果有可用的，那么就可以了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:13:05.617

该操作应使用 CURLOPT_POSTFIELDS 传递。连同其他参数。

跨域问题发生在浏览器的情况下。而且您的代码似乎是 php 服务器端代码，因此这应该不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:15:11.027

不确定这是解决方案还是问题不同，但是这一行：

```
rtrim($fields_string,'&'); 
```

应该是这样的：

```
$fields_string = rtrim($fields_string,'&'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:23:27.890

```
curl_setopt($ch,CURLOPT_POST,TRUE); 
```

`CURLOPT_POST`- 布尔值，它不是值的计数，它是使用 post 标志。

代码 200 表示连接建立正确并收到了服务器的响应，但这并不意味着请求的操作已经实现。

请求后打印`$result`以查看来自 Web 服务器的响应。

# c# - 在 c# 中在 textchanged 上禁用事件处理程序

> ID：10633661
> 
> 赞同：5
> 
> 时间：2012-05-17T10:09:56.887
> 
> 标签：c#, events, handler

我希望能够在需要时禁用或启用 textchanged 事件。我已经完成了我的功能，但我需要关闭事件处理程序，我该怎么做？

这是我的代码：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
           //something
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T10:12:52.703

这是添加事件

```
textBox1.TextChanged += new TextChangedEventHandler(textBox1_TextChanged); 
```

这是删除事件

```
textBox1.TextChanged -= new TextChangedEventHandler(textBox1_TextChanged); 
```

或者只是方法名称

这是添加事件

```
textBox1.TextChanged += textBox1_TextChanged; 
```

这是删除事件

```
textBox1.TextChanged -= textBox1_TextChanged; 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:13:03.103

只需取消注册事件

```
 yourEvent-= YourFunction 
```

如果你想再次注册

```
 yourEvent+= YourFunction 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T10:13:44.630

您可以取消订阅 textchange 事件。将以下代码行放在您想要的位置。

```
textBox1.TextChanged -= textBox1_TextChanged; 
```

# java - 什么是异常传播？

> ID：10633664
> 
> 赞同：16
> 
> 时间：2012-05-17T10:10:10.513
> 
> 标签：java, exception

什么是异常传播？我试图谷歌它，但找不到令人满意的结果。最好用Java来解释这一点。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-17T10:14:16.697

令人惊讶的是，在[关于异常的 Java 教程页面](http://docs.oracle.com/javase/tutorial/essential/exceptions/definition.html)中对此进行了解释。

异常从一个方法传播到另一个方法，沿着调用堆栈向上传播，直到它被捕获。因此，如果`a()`调用`b()`，调用`c()`，调用`d()`，并且如果`d()`抛出异常，则异常将从 d 传播到 c 到 b 到 a，除非这些方法之一捕获到异常。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-12-09T05:41:30.183

**简短回答：**未捕获的异常在调用堆栈中传播，直到堆栈变空，这种传播称为异常传播。

**长答案：** 方法抛出异常后，运行时系统在调用堆栈中搜索包含可以处理异常的代码块（异常处理程序）的方法。搜索从发生错误的方法开始，并以调用方法的相反顺序通过调用堆栈进行。当找到合适的处理程序时，运行时系统会将异常传递给处理程序。此外，还有一个值得注意的点：

可以说，我们有一个方法链，其中 method3() 调用 method2()，method2() 调用 method1()。所以当

1) 在method3() 中发生异常，在method3() 中我们没有任何异常处理程序。

2) 未捕获的异常将在堆栈中向下传播，即它将检查method2() 中的适当异常处理程序。

3) 再次在 method2 中，如果我们没有任何异常处理程序，则再次将异常向下传播到 method1() 找到异常处理程序的地方。

![在此处输入图像描述](../Images/cacd0cf307c0b361f68029c7c9cb653e.png)

**例子：**

```
 class ExceptionPropagation{

  void method3(){
    int result = 100 / 0;  //Exception Generated
  }

  void method2(){
    method3();
  }

  void method1(){
    try{
  method2();
    } catch(Exception e){
  System.out.println("Exception is handled here");
    }
  }

  public static void main(String args[]){
  ExceptionPropagation obj=new ExceptionPropagation();
  obj.method1();
  System.out.println("Continue with Normal Flow...");
  }
} 
```

**输出 ：**

异常在这里处理

继续正常流程...

> 仅传播未经检查的异常。检查异常抛出编译错误

[1] [http://docs.oracle.com/javase/tutorial/essential/exceptions/definition.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/definition.html)

[2] [http://www.c4learn.com/java/java-exception-propagation/](http://www.c4learn.com/java/java-exception-propagation/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-05-13T11:07:47.813

每当调用方法时，都会形成堆栈，并且首先从堆栈顶部抛出异常，如果未捕获，它将开始向下堆栈到先前的方法，直到未捕获为止。如果异常即使在到达堆栈底部后仍未被捕获，它会传播到 JVM 并终止程序。

未经检查的异常会在 java 中自动传播。节目 >

```
public class ExceptionTest {
public static void main(String[] args) {
    method1();
    System.out.println("after calling m()");
}

static void method1() {
    method2();
}

static void method2() {
    method3();
}

static void method3() {
    throw new NullPointerException();
}

} 
```

为了传播检查的异常，方法必须使用 throws 关键字抛出异常。节目 >

```
public class ExceptionTest {
public static void main(String[] args)
                throws FileNotFoundException {
        method1();
        System.out.println("after calling m()");
}

static void method1() throws FileNotFoundException{
        method2();
}

static void method2() throws FileNotFoundException{
        method3();
}

static void method3() throws FileNotFoundException{
        throw new FileNotFoundException();
}

} 
```

传播未经检查的异常 (NullPointerException) > ![传播未经检查的异常 (NullPointerException)](../Images/45b24437123327db85eeaeab647be881.png)

使用 throws 关键字传播检查的异常 (FileNotFoundException) > ![使用 throws 关键字传播检查异常 (FileNotFoundException)](../Images/f3d150c20b83a5f3f0b0d6808e143e13.png)

来自：[http ://www.javamadesoeasy.com/2015/05/exception-propagation-in-java-deep.html](http://www.javamadesoeasy.com/2015/05/exception-propagation-in-java-deep.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-29T15:33:34.473

当异常发生时，传播是一个过程，其中异常从堆栈顶部到底部并进入调用链以被剪切，如果没有在那里捕获，则异常再次下降到前一个方法，依此类推，直到它被捕获或到达调用堆栈的最底部。这称为异常传播。

例如假设我们的堆栈是：

C（）

b()

一种（）

主要的（）

如果在 c() 方法中发生异常并且如果它没有被处理，它将被传播到之前的 b() 方法，如果它没有在那里处理，它再次被传播到处理异常的 a() 方法等等。

异常可以在调用堆栈中的任何方法中处理，无论是 main() 方法、a() 方法、b() 方法还是 c() 方法。

回复主题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T10:18:55.800

假设您有一个对象调用另一个对象，然后该对象调用另一个对象。如果在任何被调用的对象中抛出异常并且它没有被捕获，那么异常就会传播到调用方法（如果在任何地方都没有被捕获，则应用程序崩溃）。

```
class MyClass{

 void myMethod(){
   A a = new A();
   a.doSomething(0);
 }

}

class A{

  double doSomething(int n){
   return 1/n;
  }

} 
```

如果`myMethod`执行了方法，就会在`doSomething`object 的方法中抛出异常`A`，并且异常传播到堆栈中的调用方法（因此在本例中异常传播到`myMethod`of `myClass`）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-23T14:30:08.063

在构建程序时，错误发生的地方并不是处理它的最佳位置，即错误是在错误发生的地方而不是错误发生的地方处理的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-10T12:22:20.847

如果我们为什么需要这个功能或者我们什么时候使用它，这反过来又可以回答这个功能的目的，

在几件事中，异常反向传播沿方法调用层次结构向后传播启用了 @transaction 概念，该概念是使用面向方面的编程概念自动启用的。（@transaction 有助于在 Spring 框架中回滚数据库）。在调用层次结构中声明 @transaction 的方法之前，异常传播必须自动触发 DB 回滚，然后您可以处理异常。与问题无关，但 @transaction 仅适用于运行时异常。

# php - SQL 查询不更新数据

> ID：10633671
> 
> 赞同：1
> 
> 时间：2012-05-17T10:10:40.160
> 
> 标签：php, mysql, sql

我写了一个简单的表单，用户可以从中更改他/她的姓名、Facebook 姓名和图像这里是带有表单的 profile.php 代码

```
 <!!--edit form--!!>

 <div id="edit">
 <table width="300" border="0"  align="center" cellpadding="0" cellspacing="1"   
 bgcolor="#CCCCCC">
 <tr>
 <td>
 <table width="100%" border="0" cellpadding="1" cellspacing="1"bgcolor="#FFFFFF">
 <tr>
 <form method="POST" action="save_profile.php">
 <td colspan="3"><strong>Username<br><? echo $row['session'];?></strong></td>
 <td colspan="3"><strong>Name</strong><input type="text" name="name" id="name" 
 value="<?      echo $row['name'];?>"/><br></td>
 <td colspan="3"><strong>Facebook</strong><input type="text" name="fb" id="fb" value="<? echo $row['facebook'];?>"/></td>
 <td colspan="3"><strong>Image</strong><input type="text" name="img" id="img" value="<? echo $row['img'];?>"/></td>
 <input type="hidden" name="pros" />
 <input type="submit" value="Save" />
 </form> 
```

这是 save_profile.php

```
 <?
 include"sp-includes/sp-config2.php";
 $resultz = mysql_query($slctq);
 while($rowqw = mysql_fetch_array($resultz, MYSQL_ASSOC))
 {
 if($_POST['pros']){
 $name=$_POST['name'];
 $fb=$_POST['fb'];
 $img=$_POST['img'];
 $do =mysql_query("UPDATE profile SET name='$name', facebook='$fb', img='$img' WHERE      id='$rowqw[id]'");
 }
 echo $rowqw['id'];
 }
 ?> 
```

我不知道我错在哪里..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:19:59.540

您的代码存在的问题：

*   您没有检查错误。使用`mysql_error()`.
*   您没有检查您的输入（是否有效）。您应该绑定参数或使用`mysql_real_escape_string`.
*   将查询放在单独的字符串中。类似的东西`$query = "UPDATE ..."; $do = mysql_query($query);`。它对调试很有用。您知道您发送的确切查询是什么。
*   你用`$rowq[id]`错了方法。当你在一个字符串中使用`.`符号时，你连接多个字符串；或者你把它附在`{$rowq[id]}`.

当你做这一切时，你会自己解决问题。也阅读[文档](http://www.php.net/manual/en/ref.mysql.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:15:55.367

首先，**请清理您的查询**。您的查询现在完全可以利用，这可能完全是它失败的原因。

像这样写你的查询：

```
mysql_query('UPDATE profile SET name="'.mysql_real_escape_string($name).'", facebook="'.mysql_real_escape_string($fb).'", img="'.mysql_real_escape_string($img).'" WHERE      id="'.mysql_real_escape_string($rowqw['id']).'";'); 
```

另外，请注意 rowqw 索引应写为 'id' 而不是 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T00:21:00.850

将代码更改为 $do = mysql_query("UPDATE profile SET name = '$name', facebook = '$fb', img = '$img' WHERE id = '$rowqw[id]'");

# windows-phone-7.1 - WP7 - XNA 到 Silverlight 导航返回手势问题

> ID：10633673
> 
> 赞同：0
> 
> 时间：2012-05-17T10:10:43.647
> 
> 标签：windows-phone-7.1

我有完全相反的问题。我将主屏幕设置为 Silverlight，然后我使用 XNA 代码来实际玩我的游戏。

现在的问题是，当我第一次从 SL 导航到 XNA 时，它工作正常，因为我的手势没有设置。在这里，我设置了我的手势。现在我导航回第一个屏幕（silverlight）。从那里我再次单击播放按钮以打开我的 xna 代码。在这里，默认情况下它给了我 TouchPanel.IsGestureAvailable == true ，这导致我的游戏出现问题。

我需要确保当用户从 XNA 导航到 Silverlight 时，所有手势都应该被禁用，所以当用户再次从 SL 导航到 XNA 时......它工作正常。

任何人都可以帮助我，因为我已经被困 2 天并且没有得到任何解决方案。

提前致谢。雅各布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:43:41.147

当从 XNA 导航回来时，找到你在 XNA 中工作的最后一个函数，最后添加

```
TouchPanel.EnabledGestures = GestureType.None; 
```

这将禁用`TouchPanel`XNA 接收手势。下次您导航到 XNA 时，启用您需要的手势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T22:50:44.760

我假设您正在创建 SilverlightXNA 项目。

您是否尝试过在您的游戏页面中的覆盖方法 onNavigetedFrom 中设置它？

# symfony - Symfony2 Twig 停止转义路径

> ID：10633676
> 
> 赞同：4
> 
> 时间：2012-05-17T10:10:59.133
> 
> 标签：symfony, twig

我需要将从路径生成的未转义 URL 放入输入元素中。

**路由.yml**

```
profile_delete:
  pattern: /student_usun/{id}
  defaults: { _controller: YyyXXXBundle:Profile:delete } 
```

**list.html.twig**

```
<input id="deleteUrl" value="{{ path('profile_delete', {id: '$'}) }}"/> 
```

结果是：

```
<input id="deleteUrl" value="/student_usun/%24"/> 
```

我尝试`|raw`了过滤器，并且还在标签之间放置了树枝代码`{% autoescape false %}`，结果仍然是一样的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T17:08:55.607

Twig 没有附带 url_decode 过滤器来匹配它的[url_encode one](http://twig.sensiolabs.org/doc/filters/url_encode.html)，所以你需要编写它。

在**src/Your/Bundle/Twig/Extension/YourExtension.php**

```
<?php

namespace Your\Bundle\Twig\Extension;

class YourExtension extends \Twig_Extension
{
    /**
     * {@inheritdoc}
     */
    public function getFilters()
    {
        return array(
            'url_decode' => new \Twig_Filter_Method($this, 'urlDecode')
        );
    }

    /**
     * URL Decode a string
     *
     * @param string $url
     *
     * @return string The decoded URL
     */
    public function urlDecode($url)
    {
        return urldecode($url);
    }

    /**
     * Returns the name of the extension.
     *
     * @return string The extension name
     */
    public function getName()
    {
        return 'your_extension';
    }
} 
```

然后将其添加到**app/config/config.yml中的服务配置中**

```
services:
    your.twig.extension:
        class: Your\Bundle\Twig\Extension\YourExtension
        tags:
            -  { name: twig.extension } 
```

然后使用它！

```
<input id="deleteUrl" value="{{ path('profile_delete', {id: '$'})|url_decode }}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:24:41.970

如果您正在使用：

```
'url_decode' => new \Twig_Function_Method($this, 'urlDecode') 
```

并收到错误：

```
Error: addFilter() must implement interface Twig_FilterInterface, instance of Twig_Function_Method given 
```

代替：

```
new \Twig_Function_Method($this, 'urlDecode')" 
```

和：

```
new \Twig_Filter_Method($this, 'urlDecode')" 
```

最好的

# android - Android - 对话框内VideoView的MediaController出现在对话框后面

> ID：10633677
> 
> 赞同：12
> 
> 时间：2012-05-17T10:11:01.627
> 
> 标签：android, dialog, android-videoview, mediacontroller

我有一个`VideoView`内部自定义对话框，我正在为动态创建一个媒体控制器`VideoView`并将其分配给`VideoView`代码中的 ，但是控制器实际上并没有出现在视频上 - 它出现在对话框后面！知道如何将控制器放在视频上方吗？

我创建了一个静态对话框助手类来帮助构建自定义对话框：

```
public class DialogHelper {

    public static Dialog getVideoDialog(Context context, Uri videoLocation, boolean autoplay) {
        final Dialog dialog = getBaseDialog(context,true, R.layout.dialog_video);

        ((Activity)context).getWindow().setFormat(PixelFormat.TRANSLUCENT);
        final VideoView videoHolder = (VideoView) dialog.findViewById(R.id.video_view);
        videoHolder.setVideoURI(videoLocation);
        //videoHolder.setRotation(90);
        MediaController mediaController =  new MediaController(context);
        videoHolder.setMediaController(mediaController);
        mediaController.setAnchorView(videoHolder);
        videoHolder.requestFocus();
        if(autoplay) {
            videoHolder.start();
        }
        videoHolder.setOnCompletionListener(new OnCompletionListener() {

            @Override
            public void onCompletion(MediaPlayer mp) {
                dialog.dismiss();

            }
        });
        return dialog;
    }

    /**
     * Creates a simple dialog box with as many buttons as you want
     * @param context The context of the dialog
     * @param cancelable whether the dialog can be closed/cancelled by the user
     * @param layoutResID the resource id of the layout you want within the dialog
     * 
     * @return the dialog
     */
    public static Dialog getBaseDialog(Context context, boolean cancelable, int layoutResID) {
        Dialog dialog = new Dialog(context, R.style.Theme_PopUpDialog);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialog.setCancelable(cancelable);
        dialog.setCanceledOnTouchOutside(cancelable);
        dialog.setContentView(layoutResID);

        return dialog;
    }
} 
```

所以在我的`Activity`我只有这个来创建我的对话框：

```
Dialog videoDialog = DialogHelper.getVideoDialog(context, Uri.parse("http://commonsware.com/misc/test2.3gp"), true);
videoDialog.show(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-05-17T10:59:44.663

这对我有用

在 xml 布局中进行这样的更改，

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <VideoView
        android:id="@+id/videoview"
        android:layout_width="640dp"
        android:layout_height="400dp"
        android:layout_centerInParent="true" >
    </VideoView>

        <FrameLayout
            android:id="@+id/videoViewWrapper"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" >
        </FrameLayout>

    </RelativeLayout> 
```

在你的日志中，

```
mVideoView = (VideoView) view.findViewById(R.id.videoview); 
```

在此，视频视图使用 setOnPreparedListener 侦听器并设置媒体控制器，

```
mVideoView.setOnPreparedListener(new OnPreparedListener() {

                @Override
                public void onPrepared(MediaPlayer mp) {
                    // TODO Auto-generated method stub
                    mp.setOnVideoSizeChangedListener(new OnVideoSizeChangedListener() {
                        @Override
                        public void onVideoSizeChanged(MediaPlayer mp,
                                int width, int height) {
                            /*
                             * add media controller
                             */
                            mc = new MediaController(MainActivity.this);
                            mVideoView.setMediaController(mc);
                            /*
                             * and set its position on screen
                             */
                            mc.setAnchorView(mVideoView);

                            ((ViewGroup) mc.getParent()).removeView(mc);

                            ((FrameLayout) findViewById(R.id.videoViewWrapper))
                                    .addView(mc);
                            mc.setVisibility(View.VISIBLE);
                        }
                    });
                    mVideoView.start();
                }
            }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T16:45:21.410

我建议您需要使用 an`Activity`而不是`Dialog`. 将您的主题设置为在清单`Activity`中模拟 a 。`Dialog`

**示例**- AndroidManifest.xml：

```
android:theme="@android:style/Theme.Dialog" 
```

然后，您将能够`VideoView`像示例中一样显示 a。

# html - 我可以在网站的整个宽度上使用百分比吗？

> ID：10633678
> 
> 赞同：2
> 
> 时间：2012-05-17T10:11:03.903
> 
> 标签：html, css, width

人们使用的显示类型有很多种，因此很难预期您的用户会使用什么分辨率来查看您的网站。为了避免这个问题，我正在考虑使用百分比而不是像素、em 和 pt 来定义 Web 布局。但是，这是一个很好的做法吗？包括使用百分比，例如 80% 用于主包装？

我知道在确定内部元素的宽度时很难做到。我必须根据每个 div 的父级计算百分比。当涉及到不同浏览器的分辨率时，你们如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:19:19.797

Css 媒体查询是此检查的最佳解决方案[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:08:55.743

我对外部容器内的每个宽度都使用百分比，但容器本身具有 min-width: 和 max-width: ，因此它的缩放比例很小。说最小宽度为 960 像素，最大宽度为 1160 像素。这样，它可以更好地工作更大的屏幕尺寸，如果我愿意，我可以返回并使其响应，因为它已经全部以百分比表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:22:16.873

流体布局和固定布局之间显然存在争议，但流体布局也可以很好地工作。

一个例子是[粉碎杂志](http://www.smashingmagazine.com/)（尝试在加载网站的情况下调整窗口大小）。

我相信如果您使用某种框架会容易得多。如果你之前使用过任何网格 CSS 框架，你可以看看[Liquid Blueprint](https://github.com/Montoya/blueprint-plugin---liquidgrid)。这允许您以基于网格的方式工作，但可以根据浏览器的大小流畅地调整页面大小。

# javascript - 如何在javascript中检测屏幕分辨率

> ID：10633680
> 
> 赞同：3
> 
> 时间：2012-05-17T10:11:13.173
> 
> 标签：javascript, html, layout

我想让 javascript 自己检测屏幕分辨率，因为我可能有不同的 LCD，而且它们每个的大小都不同。这是我的临时代码。

```
<html>
<head>
<title>ViewImage</title>
<script type="text/JavaScript">
<!--
function timedRefresh(timeoutPeriod) {
setTimeout("location.reload(true);",timeoutPeriod);
}
//   -->
</script>
</head>
<body onload="JavaScript:timedRefresh(1);">

<img src = "screenshot.jpeg" width="1014" height="751">
</body>
</html> 
```

我尝试将 javascript 放入代码中

```
<img src = "screenshot.jpeg" <script type="text/JavaScript">"width ="screen.width </script>> 
```

但它失败了。当我打开它时，我希望它能够自行获得解决方案，任何人都可以帮助我解决这个问题吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:22:03.940

您的代码似乎有一些问题：

您可以`JavaScript:`从您的`onLoad`活动中删除，这在超链接中使用

`<a href="javascript: doSomething()" />Link</a>`

此外，您尝试每 1 毫秒刷新一次页面（如果您尝试每秒刷新一次，则应将其更改为 1000）。

你的函数最好这样写，这样你就可以避免使用[`eval`](http://24ways.org/2005/dont-be-eval)：

```
function timedRefresh(timeoutPeriod) {
    setTimeout(function() { 
        location.reload(true); 
    }, timeoutPeriod);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:12:41.653

在你的情况下，这就足够了：

```
<img src = "screenshot.jpeg" width ="100%" /> 
```

[jsFiddle 演示](http://jsfiddle.net/Z3a34/)

当然，这只会`body`在与视口大小相同的情况下执行您想要的操作。这基本上告诉浏览器`img`应该与其父级一样大（在本例中为`body`）。

* * *

**注意：** Javascript 不能按您期望的方式工作。`<script>`是一个 HTML 元素，可让您将脚本（主要是 Javascript）嵌入到您的文档中。您不能在客户端使用 Javascript 更改 HTML 源代码（就像您可以在服务器端使用 PHP、Python 等一样）。不过，您可以修改 DOM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T10:15:34.723

你可以试试这个

```
window.screen.availHeight for getting height
window.screen.availWidth  for getting width 
```

谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T11:21:30.603

只有当您不太担心旧版本的 IE 时，CSS3 的“大小”和“覆盖”属性也有助于解决这种情况。并且无需使用任何 JavaScript

演示 - [http://jsfiddle.net/fHwu8/](http://jsfiddle.net/fHwu8/)

```
body{
    background: #000 url(http://www.psdgraphics.com/wp-content/uploads/2009/02/abstract-background.jpg) left top fixed no-repeat;
    background-size: 100% 100%;
    -moz-background-size: 100% 100%; /*cover*/
    -webkit-background-size: 100% 100%;
    -o-background-size: 100% 100%;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T10:15:05.650

尝试：

```
window.screen.availHeight
window.screen.availWidth 
```

# c - 在C中使用链表实现堆栈

> ID：10633688
> 
> 赞同：2
> 
> 时间：2012-05-17T10:11:40.577
> 
> 标签：c, list, linked-list, stack

我在使用带有结构的链表实现堆栈时遇到问题。该程序编译得很好，但是当我运行它时，它会打印第一个元素，然后将下一个节点读取为 NULL。我认为我将堆栈传递给 push 方法可能是一个错误，但我不确定并且我没有成功修复它，所以我请求您的帮助：

```
#include <stdio.h>
#include <stdlib.h>

struct stackNode{
    char data;
    struct stackNode *nextPtr;
};
typedef struct stackNode StackNode;
typedef StackNode *StackNodePtr;

void convertToPostfix(char infix[], char postfix[]);
int isOperator(char c);
int precedence(char operator1, char operator2);
void push(StackNodePtr *topPtr, char value);
char pop(StackNodePtr *topPtr);
char stackTop(StackNodePtr topPtr);
int isEmpty(StackNodePtr topPtr);
void printStack(StackNodePtr topPtr);

int main(){
    convertToPostfix(NULL, NULL);
    return 0;
}

void convertToPostfix(char infix[], char postfix[]){
    StackNode stack = {'(', NULL};
    StackNodePtr stackPtr = &stack;
    push(stackPtr, 'a');

    //printf("%s\n", stackPtr->data);
    printStack(&stack);
}

void push(StackNodePtr *topPtr, char value){
        StackNode *node;
        node=(StackNodePtr)malloc(sizeof(StackNodePtr));

        node->data=value;
        node->nextPtr=*topPtr;
        *topPtr=node;
}

void printStack(StackNodePtr topPtr){
    if(topPtr == NULL){
        printf("%s\n", "NOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO");
        return;
    }

    printf("%c\n", topPtr->data);
    printStack(topPtr->nextPtr);
} 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:17:33.677

我可以看到几个问题：

1)`printStack(&stack);`应该`printStack(stackPtr);`像您将地址传递`stackPtr`给 push 函数一样。

2)

```
node = (StackNodePtr)malloc(sizeof(StackNodePtr)); 
```

应该：

```
node = malloc(sizeof(StackNode)); 
```

3)

```
push(stackPtr, 'a'); 
```

应该：

```
push(&stackPtr, 'a'); 
```

因为您需要传递顶部指针的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:27:21.167

这是不正确的：

```
node=(StackNodePtr)malloc(sizeof(StackNodePtr)); 
```

因为它只为 a 分配内存`struct stackNode*`（对于任何指针类型通常为 4 字节），所以它应该为 a 分配内存`struct stackNode`（至少 5 个字节）：

```
node = malloc(sizeof(StackNode)); 
```

--

请参阅[是否强制转换 malloc 的结果？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-02T17:44:44.623

```
#include <stdio.h>
#include <stdlib.h>

struct node {
    int data;
    struct node * link;
};

void push(struct node **, int);
int pop(struct node **);
void display(struct node *);
void printMenu();

int main() {
    struct node * p;
    p = NULL;
    int data, ch, data1;
    //char choice[10];
    do {
        printMenu();

        printf("Enter your choice\n");
        scanf("%d", &ch);
        switch (ch) {
        case 1:
            printf("Enter the element to be pushed\n");
            scanf("%d", &data);
            push(&p, data);
            break;
        case 2:
            data1 = pop(&p);
            if (data1 != -1000)
                printf("The popped element is %d\n", data1);
            break;
        case 3:
            printf("The contents of the stack are");
            display(p);
            printf("\n");
            break;
        default:
            return 0;
        }
    } while (1);
    return 0;
}

void printMenu() {
    printf("Choice 1 : Push\n");
    printf("Choice 2 : Pop\n");
    printf("Choice 3 : Display\n");
    printf("Any other choice : Exit\n");
}

void push(struct node **q, int num) {
    struct node *temp;
    temp = (struct node *)malloc(sizeof(struct node));
    temp->link = (*q);
    temp->data = num;
    (*q) = temp;
}

void display(struct node *q) {
    //Fill in the code here
    struct node *temp = q;
    if (temp == NULL)
        printf(" {}");
    while (temp != NULL)
    {
        printf(" %d", temp->data);
        temp = temp->link;
    }
}

int pop(struct node **q) {
    //Fill in the code here
    struct node *temp;
    int item;
    if (*q == NULL)
    {
        printf("Stack is empty\n");
        return -1000;
    }
    temp = *q;
    item = temp->data;
    *q = (*q)->link;
    free(temp);
    return item;
} 
```

# iphone - 未从 ImageVIew 清除 TableView 中重用单元格中的图像

> ID：10633690
> 
> 赞同：0
> 
> 时间：2012-05-17T10:11:44.930
> 
> 标签：iphone, ios, uitableview

我有一个包含带有图像的单元格的 Tableview，但是被重用的单元格仍然包含来自前一个单元格的图像，该图像被重用，直到新图像被下载和设置。

我尝试将图像设置为零。（imageV 是 HJManagedImageV 的子类，源代码可以在这里找到：[HJManagedImageV](https://github.com/markofjohnson/HJCache/blob/master/HJCacheClasses/HJManagedImageV.m)

```
[cell.imageV setImage:nil]; 
```

二传手

```
-(void)setImage:(UIImage *)theImage{
    if (theImage==image) {
        //when the same image is on the screen multiple times, an image that is alredy set might be set again with the same image.
        return; 
    }
    [theImage retain];
    [image release];
    image = theImage;
    [imageView removeFromSuperview];
    self.imageView = [[[UIImageView alloc] initWithImage:theImage] autorelease];
    [self addSubview:imageView];
    [imageView setNeedsLayout];
    [self setNeedsLayout];
    [loadingWheel stopAnimating];
    [loadingWheel removeFromSuperview];
    self.loadingWheel = nil;
    self.hidden=NO;
    if (image!=nil) {
        [callbackOnSetImage managedImageSet:self];
    }
} 
```

我有一个解决方法，将 imageV 设置为 hidden，但随后我丢失了加载微调器，我真的很想知道为什么将其设置为 nil 不起作用。

任何人都有任何想法，因为我完全没有。或者我在某处错过了一步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:18:33.663

单元格是 UITableViewCell 的子类吗？如果是，我会尝试实现方法*[prepareForReuse](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableViewCell/prepareForReuse)*看看是否可以解决那里的问题。

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:20:20.790

不要将它设置为 nil，也不要隐藏它。我们使用一个类似的类，我们对这种情况所做的就是设置一个要显示的起始图像，直到新图像加载。因此，在您的情况下，您可以简单地将图像设置为捆绑包中的空白 jpg/png 而不是 nil

# mysql - 使用 CAST 运算符将 VARCHAR 列排序为 FLOAT 在 MySQL 中不起作用

> ID：10633695
> 
> 赞同：12
> 
> 时间：2012-05-17T10:11:53.953
> 
> 标签：mysql, casting

我找不到对转换为浮点数的 varchar 列进行排序的方法。这是我的 SQL 请求：

```
SELECT guid, number FROM table ORDER BY 'CAST(number AS FLOAT) DESC' 
```

“数字”列的定义如下：

```
number  varchar(20) ascii_general_ci 
```

在此列中为我的测试定义的值是：

```
0.00
200.00
20.00
100.00 
```

MySQL 完全忽略 CAST 运算符并按 guid 对列进行排序...

MySQL中是否存在错误或者我做错了什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-17T10:28:14.240

试试这个技巧（有助于将字符串排序为数字）-

```
SELECT guid, number FROM table ORDER BY number * 1 DESC 
```

它将帮助 MySQL 将字符串转换为数字。

* * *

另一种解决方案 -

```
...CAST(value as DECIMAL(10,5)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T10:38:27.543

如果您已使用 GUID，则应设置`varchar(40)` 您可以使用的大小`uuid()`

我已经使用了

```
select uuid(), number order by 'cast(number as float) desc'; 
```

它工作正常。如果这不是您想要的，您可以发送您的整个代码吗？

# android - 在eclipse中使用MAT并解决内存泄漏

> ID：10633696
> 
> 赞同：1
> 
> 时间：2012-05-17T10:11:54.077
> 
> 标签：android, android-activity, memory-leaks, eclipse-memory-analyzer

![在此处输入图像描述](../Images/59f67037627442ddf58c053fd9a0eb33.png)我正在使用 Eclipse 的 MAT 来分析我的 Android 项目中的内存使用情况。

我用过

```
try {  
            Debug.dumpHprofData("/mnt/sdcard/myapp.hprof");  
            Log.i("","Calle d dumpHprofData");  
         } catch (IOException e) {  
             // TODO Auto-generated catch block  
             e.printStackTrace();  
          } 
```

在我的 onCreate().. 并生成 myapp.hprof 文件。然后使用“hprof-conv myapp.hprof mat.hprof”将其转换为 mat.hprof

我使用 eclipse 打开了“mat.hprof”，它显示了巨大的泄漏。

我不知道如何分析和解决这些泄漏。

例如：

```
 7,321 instances of "java.lang.String", loaded by "<system class loader>" occupy 457,648 (23.06%) bytes.   

Keywords  
java.lang.String 
```

我无法使用 MAT 打开与其相关的源文件。

请帮忙。

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:22:49.000

转换 hprof 文件后...尝试从 MAT 工具打开文件...文件 -> 打开堆转储 -> 浏览并选择您的文件。

现在单击直方图视图并在顶部输入您的活动名称。您将能够看到浅堆和保留堆。

对象应为 1。如果大于 1，请检查实时引用。

右键单击您的类名 -> 选择 GC 根路径 -> 排除弱引用。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T21:09:33.040

观看[Google I/O 2011：Android 应用程序的内存管理](https://www.youtube.com/watch?v=_CruQY55HOk%20%22%22 "Google I/O 2011：Android 应用程序的内存管理")。最常见的内存泄漏源、MAT 的使用和实际示例都在此处进行了介绍。

此外，[Android 应用程序的内存分析](http://android-developers.blogspot.com/2011/03/memory-analysis-for-android.html "Android 应用程序的内存分析")描述了如何使用 MAT，并提供了指向其他有用材料的链接。

最后，[调查您的 RAM 使用情况](https://developer.android.com/tools/debugging/debugging-memory.html#TriggerLeaks "调查您的 RAM 使用情况")，介绍如何（通常）触发内存泄漏（如果有）。

# android - 如何更改 DDMS / 文件资源管理器 / sdcard 的权限？

> ID：10633697
> 
> 赞同：1
> 
> 时间：2012-05-17T10:11:56.847
> 
> 标签：android

我的 sdcard 权限现在是 d---------。如何将 sdcard 权限更改为 drwxrwxrwx。我需要帮助。请给我任何一个答案。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:08:43.513

转到 android sdk Manager 和当前模拟器上的 cllck 编辑按钮。检查你是否提到了 sdcard 内存

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:17:01.310

命令..

*   $亚行外壳
*   $苏
*   $ mount -o rw,remount -t yaffs2 /dev/block/mtdblock3 /system

试试这个，让我知道会发生什么..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:21:58.887

转到Android虚拟设备管理器->编辑->硬件->新建-> SD卡支持

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T11:04:34.690

你需要root才能实现这一点。如果你在模拟器中需要它获取一个有根的模拟器，你可以在[这里](http://www.ehalm.at/avd-2.2-market.php?l=en)找到一个。然后你可以使用**终端模拟器**来授予权限，或者如果你不想编写任何命令，只需安装 rootexplorer 应用程序并使用它来授予权限。

# java - 如何收听电子邮件

> ID：10633698
> 
> 赞同：2
> 
> 时间：2012-05-17T10:12:07.480
> 
> 标签：java, android, email, mobile

有没有办法收听传入/传出的电子邮件或直接访问收件箱？

我读到，由于 Android SDK 中没有默认的邮件客户端，除非手机上使用的客户端实现了一些自定义机制，否则这是不可能的。现在还是这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:39:25.867

电子邮件不是 Android 操作系统的一部分，因此您无法编写全局广播接收器（就像您为传入的 SMS 编写的代码一样）。显而易见的解决方法是为 Android OS 上最流行的 X 电子邮件客户端编写广播接收器，这些客户端会广播传入的电子邮件。

K9 确实为您提供了为传入电子邮件注册广播接收器的灵活性 - 请参阅[https://github.com/k9mail/k-9/wiki/Intents](https://github.com/k9mail/k-9/wiki/Intents)。

Gmail 没有任何官方/记录 API 来接收有关传入电子邮件的信息。但直到不久前，您还可以使用 Content Observers 来监控 Gmail 的更改。我相信这不再有效。

我认为这里真正的问题是隐私和安全。与 SMS 相比，电子邮件包含更多信息。作为用户，您真的不希望第三方应用程序可以开始监控您的个人和专业电子邮件的应用程序生态系统。

# android - android中导出服务的权限

> ID：10633701
> 
> 赞同：2
> 
> 时间：2012-05-17T10:12:14.250
> 
> 标签：android, service, permissions

我安装了新的 android ADT，现在我看到有关 AndroidManifest 中定义的不需要权限的导出服务的警告。问题是服务与同步适配器有关。在 SampleSyncAdapter 中也没有必需的权限，但我没有看到该警告。

我应该为同步适配器定义哪个权限？

对于处理 CLEAR_MISSED_CALLS 的服务，我遇到了同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T09:10:34.193

您收到该警告是因为您正在导出没有权限限制的服务。在您的`<service>`声明中，做出许可`android:permission="your.app.name"`。例子：
`<service android:name=".ClassName" android:permission="your.app.name"></service>`

有关更详细的说明，请查看[此处](https://stackoverflow.com/questions/11558334/get-rid-of-exported-service-does-not-require-permission-warning#answer-11562025)。

# c# - 我找不到 lblCategoryName 和 ddlBlogCategoty 的控件，在 Gridview 中单击编辑按钮

> ID：10633705
> 
> 赞同：0
> 
> 时间：2012-05-17T10:12:20.690
> 
> 标签：c#, asp.net

如何找到控件`lblCategoryName`和`ddlBlogCategory`？

这是我的代码：

```
protected void grdRetailStore_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            Label lblAccount = (Label)e.Row.FindControl("lblCategoryName");
            string s = lblAccount.Text;
            DropDownList ddlBlogCategory =    (DropDownList)e.Row.FindControl("ddlBlogCategoty");
            DAO.DAO dao_category = new DAO.DAO();
            DataTable dt_blog_cat = dao_category.SelectCategory();
            if (ddlBlogCategory != null)
            {
                //  ddlBlogCategory.Items.Clear();
                ddlBlogCategory.DataSource = dao_category.SelectCategory();
                ddlBlogCategory.DataTextField = "CategoryName";
                ddlBlogCategory.DataValueField = "BlogCategoryID";
                ddlBlogCategory.DataBind();
            }
        }
    }

 <asp:GridView ID="grdRetailStore" runat="server" AutoGenerateColumns="false"   DataKeyNames="PortalId" OnRowEditing="grdRetailStore_RowEditing"
                 OnRowCancelingEdit="grdRetailStore_RowCancelingEdit"      OnRowDataBound="grdRetailStore_RowDataBound">
                <Columns>

                    <asp:TemplateField HeaderText="ID">
                        <HeaderStyle Width="100px" Wrap="False" />
                        <EditItemTemplate>
                            <asp:Label ID="lblId" runat="server" Text='<%# Bind("PortalId") %>'></asp:Label>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="lblId" runat="server" Text='<%# Bind("PortalId") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="AdvertiserName">
                        <HeaderStyle Width="100px" Wrap="False" />
                        <EditItemTemplate>
                            <asp:TextBox ID="txtAdvName" runat="server" Text='<%# Bind("AdvertiserName") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="lblAdvName" runat="server" Text='<%# Bind("AdvertiserName") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="PromoCategory">
                        <HeaderStyle Width="100px" Wrap="False" />
                        <EditItemTemplate>
                           <%-- <asp:DropDownList ID="" runat="server" DataTextField="Account_Name" DataValueField="Account_Id"
                                AppendDataBoundItems="true">
                                <%-- <asp:ListItem Selected="True" Text="---Select---" Value="0"></asp:ListItem></asp:DropDownList> --%>
                          <asp:TextBox ID="txtPromoCat" runat="server" Text='<%# Bind("PromoCatId") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="lblPromoCat" runat="server" Text='<%# Bind("PromoCatId") %>'></asp:Label>
                        </ItemTemplate>

                    </asp:TemplateField>

                     <asp:TemplateField HeaderText="Start Date">
                        <HeaderStyle Width="100px" Wrap="False" />
                        <EditItemTemplate>
                            <asp:TextBox ID="txtPromostartdate" runat="server" Text='<%# Bind("PromoStartDate") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="lblPromostartdate" runat="server" Text='<%# Bind("PromoStartDate") %>'></asp:Label>
                        </ItemTemplate>

                    </asp:TemplateField>

                     <asp:TemplateField HeaderText="End Date">
                        <HeaderStyle Width="100px" Wrap="False" />
                        <EditItemTemplate>
                            <asp:TextBox ID="txtPromoenddate" runat="server" Text='<%# Bind("PromoEndDate") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="lblPromoenddate" runat="server" Text='<%# Bind("PromoEndDate") %>'></asp:Label>
                        </ItemTemplate>

                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="Html Code">
                        <HeaderStyle Width="100px" Wrap="False" />
                        <EditItemTemplate>
                            <asp:TextBox ID="txtHtml" runat="server" Text='<%# Bind("HtmlCode") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="lblHtml" runat="server" Text=""></asp:Label>
                        </ItemTemplate>

                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="CategoryName">
                        <HeaderStyle Width="100px" Wrap="False" />
                        <EditItemTemplate>
                           <asp:DropDownList ID="ddlBlogCategoty" runat="server" DataTextField="CategoryName" DataValueField="BlogCategoryID"
                                AppendDataBoundItems="true">
                                 <asp:ListItem Selected="True" Text="---Select---" Value="0"></asp:ListItem></asp:DropDownList>
                           </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="lblCategoryName" runat="server" Text='<%# Bind("CategoryName") %>'></asp:Label>
                        </ItemTemplate>

                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="Edit" ShowHeader="False">
                        <HeaderStyle Width="100px" Wrap="False" />
                        <EditItemTemplate>
                            <asp:LinkButton ID="lbkUpdate" runat="server" CausesValidation="True" CommandName="Update"
                                Text="Update" OnClientClick="return ValidateUpdate();"></asp:LinkButton>
                            <asp:LinkButton ID="lnkCancel" runat="server" CausesValidation="False" CommandName="Cancel"
                                Text="Cancel"></asp:LinkButton>
                        </EditItemTemplate>

                        <ItemTemplate>
                            <asp:LinkButton ID="lnkEdit" runat="server" CausesValidation="False" CommandName="Edit"
                                Text="Edit"></asp:LinkButton>
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
                </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:50:01.860

更改您的代码并包括对 RowState 的检查。

```
protected void grdRetailStore_RowDataBound(object sender, GridViewRowEventArgs e)
{
  if (e.Row.RowType == DataControlRowType.DataRow)
  {
      if (e.Row.RowState == DataControlRowState.Normal)
      {
          Label lblAccount = (Label)e.Row.FindControl("lblCategoryName");
          string s = lblAccount.Text;
      }
      if (e.Row.RowState == DataControlRowState.Edit)
      {
          DropDownList ddlBlogCategory = (DropDownList)e.Row.FindControl("ddlBlogCategoty");
          if (ddlBlogCategory != null)
          {
              //  ddlBlogCategory.Items.Clear();
              ddlBlogCategory.DataSource = dao_category.SelectCategory();
              ddlBlogCategory.DataTextField = "CategoryName";
              ddlBlogCategory.DataValueField = "BlogCategoryID";
              ddlBlogCategory.DataBind();
          }
      }
      DAO.DAO dao_category = new DAO.DAO();
      DataTable dt_blog_cat = dao_category.SelectCategory();
  }
} 
```

# html - 如何在网站上显示水平滚动条

> ID：10633710
> 
> 赞同：0
> 
> 时间：2012-05-17T10:12:50.380
> 
> 标签：html, css

我想在我的网站最小化时显示一个水平滚动条，并在全窗口时隐藏它。请帮忙。丹尼斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:20:21.723

用这个：

```
body {
    overflow-x: auto;
    overflow-y: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:19:28.790

在 style.css 中使用它

```
 body
    {
    overflow-x:scroll;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:20:56.903

试过这个： -

```
style="overflow-y:hidden;overflow-x:scroll 
```

转到此网址将对您有所帮助：- [http://www.quackit.com/html/codes/horizo​​ntal_scroll.cfm](http://www.quackit.com/html/codes/horizontal_scroll.cfm)

尝试运行此代码：-

```
<div style="border:1px solid black;width:200px;height:100px;overflow-y:hidden;overflow-x:scroll;">
<p style="width:250%;">
By using overflow-x, we can create scroll bars when the contents of this div are wider than the container. By setting this paragraph to 250 percent, it is 250 percent wider than the parent container - forcing an overflow. 
</p>
</div>
<p style="font-size:10px;"><a href="#">Create blog</a></p> 
```

# iphone - 如何根据图片大小动态设置imageView的大小

> ID：10633720
> 
> 赞同：0
> 
> 时间：2012-05-17T10:13:06.173
> 
> 标签：iphone, ipad, uiimageview

我使用 Interface Builder 来布局我的视图和图像视图。我在视图上放了一个 imageView 并将其设置为插座。问题是无论我在程序中设置什么尺寸的图片（768*1024、1024*700）：</p>

```
 self.imageView.image = [UIImage imageNamed:self.filename]; 
```

要在屏幕上显示的大小始终是我在 Interface Builder 中设置的 imageView 的大小。如何根据图片大小动态设置imageView的大小？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:24:20.243

就像是：

```
UIImageView *imageView = [[UIImageView alloc] init];

UIImage *image = [UIImage imageNamed:@"image.png"];
CGSize imageSize = [image size];

imageView.frame = CGRectMake(0, 0, imageSize.width, imageSize.height); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:17:02.873

```
UIImage *image = [UIImage imageNamed:self.filename];
CGFloat width = image.size.width;
CGFloat height = image.size.height;
self.imageView.frame = CGRectMake(x, y , width, height); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T10:33:18.417

您可以对图像进行子类化，并为每次设置新图像时执行以下覆盖：

```
@interface MyImageSubClass : UIImageView;
@end

@implementation MyImageSubClass

- (void)setImage:(UIImage *)image {
    // Let the original UIImageView parent class do its job
    [super image];

    // Now set the frame according to the image size
    // and keeping the original position of your image frame
    if (image) {
        CGRect r = self.frame;
        CGSize imageSize = [image size];
        self.frame = (r.origin.x, r.origin.y, imageSize.width, imageSize.height);
    }
}

@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T10:17:13.137

```
 UIImage *buttonImage2=[UIImage imageNamed:@"blank_button_blue.png"];
 oButton=[[UIButton alloc] init];
 //  [oButton setImage:buttonImage2 forState:UIControlStateNormal];
 [oButton setFrame:CGRectMake(0, 0, buttonImage2.size.width, buttonImage2.size.height)]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T10:32:23.627

```
UIImage* sourceImage = [UIImage imageNamed:self.filename];;

 CGRect rect;
rect.size.width = CGImageGetWidth(sourceImage.CGImage);
 rect.size.height = CGImageGetHeight(sourceImage.CGImage);

[ yourimageview setframe:rect]; 
```

# android - 谷歌分析不跟踪交易中的数量

> ID：10633722
> 
> 赞同：2
> 
> 时间：2012-05-17T10:13:12.030
> 
> 标签：android, google-analytics

据我所知，我已经成功地将 Google Aanlytics 跟踪集成到 Android 应用程序中。查看结果网页时，转换 - 电子商务 - 交易部分，跟踪的交易显示正确，保存项目数量，始终为零。但是，在调试我的代码时，事务对象中存储的数量是正确的。我也等了几天（大约一周），以防结果会自行更新，但无济于事。我应该做些什么“特别”来跟踪交易的物品数量？这可能是 Android GA SDK 中的错误吗？

我附上了我正在使用的代码，以防万一：

```
tracker.addTransaction(new Transaction.Builder(orderPK, totalPrice).setStoreName("").setTotalTax(totalTax).setShippingCost(shipping).build());
Item.Builder builder = new Item.Builder(orderPK, productPK, price, quantity);
builder.setItemCategory(category);
Item item = builder.build();
tracker.addItem(item);
tracker.trackTransactions();
tracker.dispatch();
tracker.clearTransactions(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:46:11.890

我给出了一个对我有用的工作代码。请尝试此代码

```
tracker = GoogleAnalyticsTracker.getInstance();  
tracker.addTransaction(new Transaction.Builder("3000",25000).setStoreName("MarIoS").setTotalTax(3.23).setShippingCost(10.44).build());
    Item.Builder builder = new Item.Builder("3000", "Mobile",5000,5);
            builder.setItemCategory("Electronics");
            builder.setItemName("SamsunG");
            Log.d("json","In Transaction");
            Item item = builder.build();
            tracker.addItem(item);
            tracker.trackTransactions();
            tracker.dispatch(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:13:49.293

已经有一段时间了，但我发现了问题，所以我把它贴在这里。

事实证明，该项目有一个字段，即名称，这是强制性的，尽管它没有在任何地方列出（除了在我找到它的 JS API 中）。

所以解决方案是添加以下行：

```
builder.setItemName(name); 
```

# php - Zend Framework 1.11.2 cache_dir 不可写

> ID：10633729
> 
> 赞同：0
> 
> 时间：2012-05-17T10:13:27.187
> 
> 标签：php, zend-framework

我继承了一个用 Zend Framework 1.11.2 编写的应用程序。它已移植到我公司管理的服务器上，但由于对环境进行了一些微调，该站点的某些功能在新服务器上似乎已损坏。

具体来说，系统上的一项 cron 作业正在引发与缓存目录不可写相关的异常。

我不确定缓存目录在哪里使其可写。我做了一些阅读，似乎暗示有一个 tmp 目录。任何人都可以将我指向正确的方向指向目录，或者如何找出它在哪里，如果它是特定于应用程序的？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:27:47.387

缓存目录在*application.ini*中指定：

*   resources.cachemanager.database.backend.options.cache_dir
*   resources.cachemanager.locale.backend.options.cache_dir
*   resources.cachemanager.translations.backend.options.cache_dir

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:07:43.777

确定在`cache_dir`未指定时使用的代码在 中`Zend_Cache_Backend::getTmpDir()`。结果是特定于操作系统的，甚至是特定于环境的。

这个小片段：

```
require_once 'Zend/Cache/Backend.php';
$cache = new Zend_Cache_Backend();
echo $cache->getTmpDir() . PHP_EOL; 
```

`/tmp`在我的 Ubuntu 上制作。YMMV。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T21:49:04.960

对此有一个功能请求 ( [ZF-12214](http://framework.zend.com/issues/browse/ZF-12214) )。您可以使用包含的补丁对您的 ZF 进行猴子补丁以进行调试。

# javascript - String.prototype.tokenize = 标记化；

> ID：10633738
> 
> 赞同：1
> 
> 时间：2012-05-17T10:13:58.187
> 
> 标签：javascript

我正在尝试使用 java 对 xpl 语言进行词法分析并发现

```
String.prototype.tokenize = tokenize; 
```

但无法弄清楚这行代码是做什么的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:15:25.567

它在对象中的覆盖/创建`tokenize`方法。`String`

例如，现在字符串将具有方法`tokenize`：

```
alert('hello world'.tokenize()); 
```

[在MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/prototype)阅读有关原型的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:00:40.447

`String.prototype.tokenize = tokenize`意思是：将方法添加`tokenize`到对象`prototype`的。`String`这称为[扩充](http://peter.michaux.ca/articles/javascript-the-good-parts-built-in-object-augmentation-and-namespacing)或[扩展](http://phrogz.net/js/classes/ExtendingJavaScriptObjectsAndClasses.html)原型。

假设`tokenize`看起来像这样：

```
function tokenize(someToken){
  return this.replace(RegExp('%0','g'),someToken || '');
} 
```

现在`String.prototype.tokenize = tokenize`可以这样使用：

```
var str = 'hello %0'.tokenize('world'); //=> 'hello world'
//or
var str = String.protoptype.tokenize.call('hello %0','world'); //=> 'hello world' 
```

# css - 样式表和文件 .ui 之间的优先级？

> ID：10633745
> 
> 赞同：0
> 
> 时间：2012-05-17T10:14:20.497
> 
> 标签：css, qt

我没有在网上找到答案，我希望这个问题还没有提出..以防我删除我的帖子..现在是问题。例如：我在`QPushButton`with `QtCreator`（或以编程方式使用 QIcon 等）上设置一个图像，然后我编写一个样式表，在其中为同一个按钮设置另一个图像。css 和 qtCreator 文件（.ui）之间是否有一些优先级？哪个设置胜过其他设置？

然后我知道在 Qt 应用程序上加载 css 的两种方法，所以我认为我使用的方法将确定优先级。我对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:31:08.967

如果您在程序中使用 setstylesheets，它将被使用，猜测您在构造函数中设置 css。如果不通过编程方式设置样式表，则默认使用 .ui 中的 css，如果同时在 form(.ui) 和编程方式中设置 css，则将使用通过程序设置的 css。`The priority is for css set programmatically as it is executed later`！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:26:58.937

如果您在 QtCreator 中设置样式表，这将在小部件/控件的构造函数中应用，当它执行`setupUi()`函数时。

```
MyWidget::MyWidget(QWidget *parent)
{
  setupUi(this); // here the stylesheet is applied
} 
```

`setStyleSheet()`如果您在此调用之后添加代码，您可以更改用户界面的任何属性，或者通过调用该函数来更改整个样式表。

`qApp->setStyLeSheet(...)`您也可以通过调用main.cpp 文件来更改整个应用程序的样式表。

# c# - 命名空间问题（.NET 和 WPF）

> ID：10633749
> 
> 赞同：0
> 
> 时间：2012-05-17T10:14:37.597
> 
> 标签：c#, wpf, namespaces

好的，所以我遇到了一个令人沮丧的命名空间问题。

我目前正在使用

```
xmlns:local="clr-namespace:Company.ecommerce.WPF" 
```

除了一节课之外，它似乎能够从这里得到其他一切。

```
public class StringToVisibilityConverter 
```

这个类在 >WPF>ProductFeatures>FeatureSet.XAML.CS 里面，我正在尝试使用，

```
<local:StringToVisibilityConverter x:Key="StringToVis"/> 
```

在我的 FeatureSet.xaml 中

但是，无论我如何尝试设置它返回的名称空间：

```
The tag 'StringToVisibilityConverter' does not exist in XML namespace 'clr-
namespace:Company.ecommerce.WPF'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:22:59.667

检查你班级的命名空间

```
public class StringToVisibilityConverter 
```

它应该到处都是一样的。

当我们在文件夹中创建用户控件时，它创建的命名空间是`parentnamespace.foldername`.

从用户控件 UI 和代码隐藏中删除`.FolderName`并重建项目。它将工作。

**或者**

`my`包括带有标签的新命名空间

```
xmlns:my = "....... 
```

并像使用它一样

```
<my:StringToVisibilityConverter x:Key="StringToVis"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:23:15.690

我在这里假设 ProductFeatures 是另一个命名空间，它会给

```
namespace Company.ecommerce.WPF.ProductFeatures
{
    public class StringToVisibilityConverter
    {
        //code here
    }
} 
```

If so, then I believe you need to reference it in XAML as `xmlns:local="clr-namespace:Company.ecommerce.WPF.ProductFeatures"`

# html - JAWS - 即使有标题，iframe 中提交的表单也会读取源 URL

> ID：10633750
> 
> 赞同：4
> 
> 时间：2012-05-17T10:14:45.747
> 
> 标签：html, drupal, accessibility, jaws-screen-reader

我正在开发一个显示在 iframe 中的表单。当表单首次显示（点击时）时，我为 iframe 添加了一个标题，JAWS 可以很好地读取所有内容。

当表单提交错误时，JAWS 会读取我期望的所有内容，但它也会读取 iframe 的 URL，该 URL 很长。

在初始显示时，JAWS 显示如下：

> {页面标题}对话框
> 
> {页面标题}框架
> 
> {框架内的第一个链接}

当表单提交错误时，JAWS 会读取：

> {页面标题}对话框
> 
> {页面标题}框架
> 
> {页面标题} 只读
> 
> {iframe 的长网址}
> 
> {框架内的第一个链接}

谁能帮我弄清楚这些问题：

*   在这种情况下，“只读”是什么意思？
*   如何防止读取长 URL？

谢谢

# python - python -> 替换转义字符以将十六进制字符串从 0x 转换为 \x

> ID：10633752
> 
> 赞同：3
> 
> 时间：2012-05-17T10:14:56.643
> 
> 标签：python, hex, ansi-escape

我正在尝试打印 ascii 或扩展 ascii 字符。使用此代码：

```
print '\xff'.decode('latin-1') 
```

它将打印 ascii #255，但现在我想使用十进制数输入，如下所示：

```
num=255
myhex=hex(num) 
print myhex.decode('latin-1') 
```

它不起作用，因为 myhex 是 '0xff'，所以我需要转换成 '\xff'。用 '\x' 替换 '0x' 给了我错误。

```
myhex.replace('0x','\x') 
```

会给我错误：*ValueError: invalid \x escape*

如何解决问题？任何人都可以帮忙吗？我想在终端/控制台中打印 char -> ÿ 的目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:20:57.577

你正在寻找的是

```
chr(255) 
```

在 python2 中，这会给你一个二进制值 255 的字符。如果你将它打印到使用 UTF8 的终端，它将显示为`?`（或类似），因为终端不知道如何处理它。要将其转换为它的 unicode 代码点，您可以`decode`：

```
chr(255).decode('latin1') 
```

在 python3 中，`chr(255)`已经为您提供了 unicode 字符`'LATIN SMALL LETTER Y WITH DIAERESIS'`。

你也可以在 python2 中使用

```
unichr(255) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:46:06.303

```
>>> print chr(255).decode("latin-1")
ÿ 
```

# macos - Nmap 不检索 MAC 地址和供应商

> ID：10633753
> 
> 赞同：5
> 
> 时间：2012-05-17T10:14:58.473
> 
> 标签：macos, networking, nmap, auditing

我在 Nmap 中发现了一个奇怪的行为（如果这很重要，我使用的是 5.51 版，但我对 5.00 版有同样的问题），在某些网络上，这个插件不检索 MAC 地址，因此，供应商。奇怪的是，它几乎可以检索操作系统等所有内容，但它不打印 MAC 地址。这怎么可能？这是我通常使用的命令：

```
nmap -A -O 192.168.1.0/24 -oX mynetwork.xml 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-21T01:40:41.087

MAC 地址仅在以 root 权限运行扫描时显示，因此请务必使用[`sudo`](https://developer.apple.com/library/mac/documentation/Darwin/Reference/Manpages/man8/sudo.8.html). 作为诊断步骤，尝试执行简单的 ping 扫描 ( `sudo nmap -sn 192.168.1.0/24`)，然后立即检查您的 ARP 缓存 ( `arp -an`)。如果你没有看到很多`<incomplete>`s，那么 Nmap 没有正确扫描你的子网。如果您看到 256`<incomplete>`并且没有 MAC 地址，那么您的网络设置有问题，因为您没有看到对 Nmap 生成的请求的 ARP 响应。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-17T12:53:10.827

如果您正在扫描本地子网上的主机，Nmap 只能检索 MAC 地址，可通过第 2 层（以太网或 wifi）直接访问。当您通过路由器（默认网关）扫描主机时，您的扫描主机将在发送/接收第 3 层数据包时与第 2 层的路由器通信，因此，Nmap 只能看到路由器的 MAC 地址，而不能看到目的地主机 MAC 地址。

[（虽然在某些情况下，通过NetBIOS](http://nmap.org/nsedoc/scripts/nbstat.html) 、SNMP 等协议确定非本地主机的 MAC 地址在技术上是可行的，并且有用于此目的的 NSE 脚本，但 Nmap 通常不会这样做。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T03:08:30.720

我在 5.61TEST5 版本中也缺少 MAC 地址和供应商报告，但我刚刚安装了 6.00 版本，一切似乎又可以正常工作了，所以您现在可能想尝试一下。

# objective-c - UIWebView 故障中的 PNG 图像

> ID：10633757
> 
> 赞同：0
> 
> 时间：2012-05-17T10:15:03.997
> 
> 标签：objective-c, ios, uiwebview, visual-glitch

我有一系列透明的 png，它们是几个 html 页面的一部分，它们有界分开`UIWebViews`（本地存储）；每个 webview 都在一个滚动视图中，这样我就可以在它们之间滑动。为了使思考尽可能轻松，我`UIWebViews`在浏览滚动视图时动态加载和卸载。（我只保留当前/上一个/下一个并卸载所有其余部分）。在这一点上，碰巧只有几个这样的 png 在加载时会出现故障（不是每次都出现）。

[这是第一个故障]

![毛刺png](../Images/f732d191385e7ded5fe3f4720f186e82.png)

我想知道发生这种情况的原因，以及为什么它只发生在 9 个 png 中的 2 个上。当然，如果你有解决方案，它会对我有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:07:40.150

好的，我设法通过将 png 拆分为两个 png 来解决问题。

问题是由 png 为 1.8Mb 的事实产生的，而且 UIWebViews 在图像的内存处理方面似乎存在很多问题。

总之，这是一件很尴尬的事情。我对我们处于 iOs 5.1.1（并且还在增加）这一事实感到失望，并且仍然存在这些问题。

# css - 如何调试较少的css变量

> ID：10633764
> 
> 赞同：5
> 
> 时间：2012-05-17T10:15:19.343
> 
> 标签：css, less

正如标题所述，我将如何调试更少的 CSS 变量。举个例子。

```
//style.less
@height: `document.body.clientHeight`; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T10:24:39.963

根据@GeekyMonkey的回答，我写了这个小片段，你可以把它放在你的less文件的某个地方：

```
.debug(@var) {
  &:after {
    content: "@{var}";
    font-size: 20px;
    background-color: #fff;
    border: 1px solid red;
    padding: 10px;
    border-radius: 5px;
    color: red;
    font-weight: bold;
    position: absolute;
    top: 50%;
    left: 50%;
  }
} 
```

然后只需使用`.debug(@someVar)`并将其值打印到屏幕上。:-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-21T08:51:01.083

您可以通过在 :before 或 :after 伪元素的内容中使用它们来将值输出为文本。

```
.Panel:after
{
    content: "@{PanelPadding}";
} 
```

# c++ - C++ 错误 C2102：“&”需要左值

> ID：10633766
> 
> 赞同：2
> 
> 时间：2012-05-17T10:15:25.770
> 
> 标签：c++, lvalue

我正在用 C++ 创建一个带有很多菜单和子菜单的控制台应用程序。我显示菜单的方式是通过 do-while 循环。我创建了一个函数来显示具有三个参数的菜单循环 - 第一个是与菜单中有多少选项有关的整数，第二个是显示菜单的函数，第三个是执行用户输入的选择的另一个函数.

```
class Menu {
public:

void displayInitialMenu(){
        system("cls");
    string menu = "\n\t\tXXXXXXXXX"\
      "\n\n Please select from the following:"\
      "\n\n 1\. XXXXXXX"\
      "\n\n 2\. XXXXXXX"\
      "\n\n 3\. Exit\n";
    cout << menu << endl;
}

static bool checkOption (int option, int lower, int upper){
if ((option < lower) || (option > upper)){
    return false;   
} else {
    return true;
}
}

static int readOption(int lower, int upper){

    int option = 0;
    bool validMenuOption = false;

    do{
        std::cin >> option;
        validMenuOption = checkOption(option, lower, upper);

        if (!validMenuOption){
            std::cout << "\nError: Input must be between " << lower;
            std::cout << " and " << upper << "\n" << std::endl;     
        }
    } while (!validMenuOption);

    return option;
}
};

Menu menu;

void menuLoop(int numberOfOptions, void (*displayMenu)(), void (*switchStatement)()){
int menuOption = numberOfOptions;
do {
    (*displayMenu)();
    menuOption = menu.readOption(1, numberOfOptions);
    (*switchStatement)();
} while (menuOption != numberOfOptions);
}

static void performSelectionInitialMenu(int option){

switch (option){
case 1:
    break;

case 2:
    break;

case 3:
    break;

default:
    break;
}
}

int main()
{
/*
int menuOption = 3;
do {
    menu.displayInitialMenu();
    menuOption = menu.readOption(1, 3);
    performSelectionInitialMenu(menuOption);
} while (menuOption != 3);
*/

menuLoop(3, &menu.displayInitialMenu(), &performSelectionInitialMenu(3));

return 0;
} 
```

我收到的错误是**"error C2102: '&' requires l-value"**。我对编程有点陌生，这是我第一次将函数作为参数传递。我正在制作这个函数来消除我已经注释掉的代码。任何人都可以指出我出错的地方和可能的解决方案。如果没有，我会为每个我知道是不好的编程习惯的菜单使用重复的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:19:33.853

您正在尝试获取由函数`displayInitialMenu`和返回的值的地址`performSelectionInitialMenu`，但这两个函数均不返回任何内容 ( `void`)。~~删除`&`两个调用前面的 以解决此特定问题。~~

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:23:07.140

通常你只会这样称呼它：

```
menuLoop(3, menu.displayInitialMenu, performSelectionInitialMenu); 
```

只是名称，没有参数。

然而，`performSelectionInitialMenu`是：

```
static void performSelectionInitialMenu(int option) 
```

所以它与指针的签名不匹配：

```
void (*switchStatement)() 
```

这意味着它们不兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:34:58.753

首先，只要你把括号放在函数名之后，你就不再是在谈论函数本身了。即对于自由函数（不是类成员的函数）`func`指的是函数的地址`func`，而`func()`指的是从该函数返回的任何内容。

你还有另一个问题。您正在尝试将非静态类成员函数作为自由函数传递。这在 c++ 中是不合法的，因为非静态成员函数有一个隐藏参数，即调用它的对象。尽管理论上`object.memberfunc`可以引用一个在调用时调用`memberfunc`on的委托`object`，但它在 C++ 中没有。按照 C++ 的惯例，大约有 10 亿种方法可以获得这种效果，并在各种标准中进行了 10 亿次权衡。

我认为，对你来说，最简单的是使用[boost.bind](http://www.boost.org/doc/libs/1_49_0/libs/bind/bind.html)。所以，你想要做的看起来像：

```
#include<boost/bind.hpp>
using namespace boost;

...

template <class Functional>
void menuLoop(int numberOfOptions, Funcional displayMenu, void (*switchStatement)()){

...

menuLoop(3, bind(Menu::displayInitialMenu,menu), &performSelectionInitialMenu(3));

... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T11:18:52.290

menuLoop(3, &menu.displayInitialMenu(), &performSelectionInitialMenu(3));

这不是你想要达到的目标。首先，您不能处理不变的事物。因此，您必须执行以下操作：

1.  去除那个 ”＆”。
2.  删除 displayInitialMenu 和 performSelectionInitialMenu 之后的“()”，因为这确实意味着将调用这些函数，并且在当前情况下为 void 的返回值将传递给 menuLoop。所以，你不会得到你想要达到的目标。

您必须执行以下操作：

menuLoop(3, menu.displayInitialMenu, performSelectionInitialMenu, 3); 请注意，您必须将三个作为额外参数传递。

并相应地更改 menuLoop 的签名。

# wix - WIX 重新安装功能会增加安装程序的大小

> ID：10633770
> 
> 赞同：1
> 
> 时间：2012-05-17T10:15:35.347
> 
> 标签：wix, windows-installer, wix3.5

我的设置中有几个功能。我还启用了更改选项。即用户可以在初始安装后更改她/他想要安装或卸载的内容。

当使用此更改选项删除功能时，它会被卸载。我本来希望安装程序的大小会减小，但它保持不变。现在，当稍后使用更改选项添加该功能时，安装程​​序的整体大小会增加。

有没有办法控制它或者它总是这样工作？

注意：安装程序的大小是指它占用的大小或空间（以字节/KB/MB 为单位），显示在“添加/删除程序”中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:01:01.307

The size you are referring to in the *Add/Remove Programs* is calculated automatically by the MSI engine during the [File Costing](http://msdn.microsoft.com/en-US/library/aa368593.aspx) and is defined by the [EstimatedSize](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372105) registry key.

Usually the correctness of the advertised size is a non-issue for most setup authors and users, so I wouldn't advise putting any effort on this. However if you must fix this, check this SO post:

[Using the EstimatedSize value inside a program uninstall key to correctly display the program size in the Add/Remove Programs list](https://stackoverflow.com/q/317647/147211)

# python - 如何使用python对常规经纬度数据进行区域加权重新网格化

> ID：10633773
> 
> 赞同：1
> 
> 时间：2012-05-17T10:15:56.837
> 
> 标签：python, interpolation

我希望能够在 python 中对规则间隔的 2D 经纬度数据执行区域加权重新网格化，例如从 0.5x0.5 网格到 2.5x3.75 网格。该数据是以 kg/m^2/s 为单位的排放量，因此我需要保存质量和空间分布。

我知道有许多 scipy 插值例程，我不确定在这种情况下哪个（如果有的话）是最好的。如果可能，我宁愿不必安装太多额外的 python 包，除非绝对需要（即我安装了 scipy+numpy，但宁愿不必安装专业的 python 包，它会做我需要的，也需要我将数据存储在特定的类结构等中。但是，如果需要，我会这样做！）。

这也是一个学习练习，让我了解如何在 python 中做这些事情，以及能够做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T18:49:21.510

这是一个相当复杂的问题，答案相当复杂，而且有很多机会出错。正如您在评论中所说，您有这样的经度、纬度向量：

```
'0.5x0.5'
np.arange(-89.75,90.25,0.5)      #[-89.75,-89.25,...,89.25,89.75],  latitudes 
np.arange(0.25,360.25,0.5)       #[0.25,0.75,...,359.25,359.75],    longitudes 
```

或这个：

```
'1x1'
np.arange(-90.0,91.0,1.0)         #[-90.0,-89.0,...,89.0,90.0],     latitudes 
np.arange(-180.0,180.0,1.0)       #[-180.0,-179.0,...178.0,179.0],  longitudes 
```

并且您需要将关联的数据集转换为这种格式：

```
'73x96 (or N48)'
np.arange(-90.0,92.5,2.5)         #[-90.0,-87.5,...,87.5,90.0]      latitudes 
np.arange(0.0,360.00,3.75)        #[0.0,3.75,...,352.5,356.25]      longitudes 
```

或这个：

```
'1.25x1.875 (or N96)'
np.array(-90.0,91.25,1.25)        #[-90.0,-88.75,...,90.00]         latitudes 
np.array(0.0,360.00,1.875)        #[0.0,1.875,...,358.125]          longitudes 
```

所有条目均用于网格单元中心。

部分好消息是您不需要进行任何插值。我们可以`upsample`（纵向和横向）只需重复输入，即如果我们有一个`1*1`间隔数据集，我们可以通过重复每一列和每一行将其更改为`0.5*0.5`间隔数据集，这对您的数据有效，即使我们使用球形网格数据！考虑将一个初始细胞分成更小的细胞 - 每个新细胞的密度与原始细胞中的密度相同。我们可以这样做：

```
data_up = np.repeat(data, 2, axis=0)
data_up = np.repeat(data_up, 2, axis=1) 
```

这是一个很好的方法，因为我们不做任何假设，也不会丢失任何数据。我们稍后会需要这个。

当我们纵向增加单元格的宽度时，我们可以`downsample`通过将单元格加在一起并对单元格的数量求平均值。这是由于纵向相邻（水平）单元的面积相等。如果我们`downsampling`的网格间距不是原始间距的整数倍，那么首先我们必须`upsample`，如上所述（这是您的要求..）。

最棘手的事情是在纬度上进行下采样。这是因为这里我们有不同的密度，并且与这些密度相关的实际区域也不同。处理这种情况的方法是：

1.  上采样到一个新的纬度网格间距，它是我们初始纬度网格和我们想要的纬度网格的倍数（如上所述）。
2.  计算每个细胞的细胞表面积（[这是我们需要的公式](https://badc.nerc.ac.uk/help/coordinates/cell-surf-area.html)）。
3.  将这两个数组相乘以获得上采样数据数组中每个数据单元的总排放量。
4.  将构成新单元的所有总排放单元加在一起（在整个阵列上执行此操作）
5.  除以该新单元格的总面积（子单元格的所有面积之和），对所有新单元格执行此操作。
6.  就是这样。

**需要注意的坏事：**

1.  您的一些数据集之间存在纵向相位差异，这可以确保您正确地重新定位数据以允许这一点。

2.  极细胞，在哪里`latitude = 90 or -90`。这些单元是有问题的，因为它们的纬度高度是所有其他单元的一半。这必须仔细考虑：确保为这些单元格计算的区域是正确的，并且当/如果上采样时，`pole`条目应该只重复一半以反映这一点。

# javascript - 在 jQuery 中触发自定义事件以与 live() 一起使用

> ID：10633778
> 
> 赞同：0
> 
> 时间：2012-05-17T10:16:13.090
> 
> 标签：javascript, jquery, events

我为 jQuery 编写了一系列插件，它们基本上充当移动浏览器的事件。您可以在此处查看它们 > [http://ben-major.co.uk/2011/11/jquery-mobile-events/](http://ben-major.co.uk/2011/11/jquery-mobile-events/)。

目前，它们被调用`$(ele).tap(handler)`等等，但我想添加功能来触发自定义事件，以便可以使用类似`$(ele).on('tap', handler);`.

我现在正在使用以下代码，但这似乎不起作用：

```
$(function() {
    $('*').tapstart(function() { $(this).trigger('tapstart'); })
          .tapend(function() { $(this).trigger('tapend'); })
          .tap(function() { $(this).trigger('tap'); })
          .doubletap(function() { $(this).trigger('doubletap'); })
          .taphold(function() { $(this).trigger('taphold'); })
          .swipedown(function() { $(this).trigger('swipedown'); })
          .swipeup(function() { $(this).trigger('swipeup'); })
          .swipeleft(function() { $(this).trigger('swipeleft'); })
          .swiperight(function() { $(this).trigger('swiperight'); });
}); 
```

这是一个[jsFiddle](http://jsfiddle.net/ZSdfS/)来演示我的问题。显然，单击第二个`div`应该模仿第一个的动作，但是由于它是在解析上面给出的绑定之后添加到 DOM 中的，所以它没有。

我想我的问题是：实现我想要的最好的方法是什么？有没有办法选择现在和将来存在于 DOM 中的所有元素（如果可能，我宁愿不使用[livequery](http://docs.jquery.com/Plugins/livequery)或外部插件之类的东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:41:48.000

在您的情况下，我认为 jQuery 不会正确处理您的自定义事件（因为自定义事件不会冒泡到文档中）。答案是将事件侦听器的一个分支绑定到`document`. 并且永远不要在这种情况下使用 jQuery。

jQuery的实时模式几乎和我建议的一样，但它会尝试将event.target与绑定选择器（在你的问题中说'*'）匹配，这非常慢（也是手机的电池消耗器。）

如果您想与特定类型或特定类名的元素进行交互，只需您自己处理它，并触发所需的事件处理程序。

一个例子：

```
function findAncestorOfType(el, type) {
  while (el && !(el instanceof type))
    el = el.parent;
  return el;
}

document.addEventListener('click', function(evt) {
  var target = findAncestorOfType(evt.target, LIElement);
  if (target) {
    // distinguish event type
    type = 'click';
    callbacks[type](target, evt);
  }
}, false); 
```

# appcelerator-mobile - 无法构建带有 FastPDFKit 的 Titanium Appcelerator 模块

> ID：10633779
> 
> 赞同：0
> 
> 时间：2012-05-17T10:16:13.950
> 
> 标签：appcelerator-mobile, titanium-modules

我正在尝试使用 FastPDFKit 创建 Appcelerator 模块。我已经用 XCode 中的演示代码测试了这个模块并且它正在工作。所以，我开始为它实现模块。

我已完成文档中显示的所有步骤以集成 SDK：

1.  创建钛模块。并打开为此模块创建的 XCode 项目。
2.  复制`FastPdfKit.embeddedframework`到`Othe sources` 目录中。
3.  将代码 `FastPdfKit.embeddedframework\Resources\Snippets.txt`放入特定`.h`的`.m`文件中。
4.  设置配置并`FastPdfKitFramework`从`info`项目的选项卡中选择。

但是当我尝试构建模块时出现错误，**`#import "ReaderViewController.h"`**我`ReaderViewController.h file not found.`不知道为什么这个错误只发生在模块开发中，以及为什么它没有出现在演示项目的 XCode 源代码中。有没有其他设置？请让我知道是否有任何事情可以帮助我解决这个问题，或者只是给我一些建议**`how to integrate custom libraries for Appcelerator modules`**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:00:52.560

我已按照**教程 2** @this [Tutorials](http://fastpdfkit.com/tutorials)进行操作。我已*`FPKReaderLib`*在*Target Dependencies*文件和*Extra resources*文件夹*`.bundle`*中添加了它。但是这一次，当我尝试导入时，我收到有关. 因此，另外，我在**Module target**以及**Project**中添加了 path ，**build settings**。**`FastPdfKit.h`***`File not found`***`User Header Search Path`**

 *******> **/备份/钛\应用程序/FastPdfKit**
> 
> **/备份/钛\应用程序/FastPdfKit/类**
> 
> **/备份/钛\应用程序/FastPdfKit/FPKCore**

添加这些路径后，我会收到很多错误，例如，`Expected Identifier or ')', missing context for method declaration, expected method body, etc.`这些所有错误都显示在库文件中。请任何人告诉我如何解决它们。事件它显示`float`变量类型的错误。*******

# android - 如何动态地将imageview的高度设置为父高度？

> ID：10633780
> 
> 赞同：1
> 
> 时间：2012-05-17T10:16:19.073
> 
> 标签：android, listview, height, imageview

我的应用程序中有一个列表视图。列表项的大小不同。当我单击列表项中的按钮时，必须在该特定列表项上显示半透明图像。由于列表项的大小不同，我无法将图像视图的高度设置为固定大小。

我已将其设置为匹配父项，但问题是它仅采用列表项的初始高度，即 imageview 的高度小于列表项的高度。为了解决这个问题，我将图像视图的高度设置为父高度（列表项布局）。尝试此操作后，上述问题已解决，但出现了另一个问题。

当我滚动列表视图时，新问题来了。当我单击列表项中的按钮时，它会正确显示图像视图，但在滚动图像视图的大小后它会发生变化。我找不到原因。

下面给出的是我的代码。这是来自我的适配器类。

```
 holder.parentLayout.setTag(R.id.viewPos,Integer.valueOf(position));
        holder.fadeView.setTag(R.id.viewPos, Integer.valueOf(position));

        int height=holder.parentLayout.getMeasuredHeight();
        holder.fadeView.getLayoutParams().height=height; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:05:25.527

您必须在此方法中使用以下方法更改图像大小，根据您的高度和宽度更改位图大小

```
public Bitmap getResizedBitmap(Bitmap bm, double newHeight, double newWidth) 
{
        int width = bm.getWidth();
        int height = bm.getHeight();

        float scaleWidth = ((float) newWidth) / width;
        float scaleHeight = ((float) newHeight) / height;

        Matrix matrix = new Matrix();
        matrix.postScale(scaleWidth, scaleHeight);

        Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height,matrix, false);

        return resizedBitmap;
} 
```

在 listview 上的 imageview 中设置位图（resizedBitmap）

# reporting-services - SSRS 2008-用户输入多个值作为参数

> ID：10633789
> 
> 赞同：0
> 
> 时间：2012-05-17T10:17:03.947
> 
> 标签：reporting-services, ssrs-2008

我有一个报告，其中包含用户输入参数，用户可以在其中输入输入。我希望用户输入以逗号分隔的多个值。

例如：PrimaryName- balcksmith、whitesmith、smith 等

这可能吗？

我也尝试过使用拆分功能。但是没有用。拆分功能是否适用于 Oracle？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:35:26.030

我已将其作为链接报告上的一组默认参数（请参阅我的博客上的[此处](http://faultbucket.ca/2011/04/ssrs-multi-value-parameter-in-linked-report/)），它应该像在单独的行上一个接一个地输入您的值一样简单。

代替：

```
blacksmith,whitesmith,smith 
```

利用：

```
blacksmith
whitesmith
smith 
```

# android - Android：在哪里存储我的数据库：服务或活动？

> ID：10633800
> 
> 赞同：1
> 
> 时间：2012-05-17T10:17:40.590
> 
> 标签：android, database, service, aidl

我的程序由一个**远程服务**组成，该服务在**后台**每 1 小时从互联网下载数据并更新数据库。然后，该服务将提醒用户预定义的数据。

该**活动**用于**设置警报设置**和其他一些参数。该服务应该能够在没有活动的情况下自行工作。

我**想知道将sql数据库放在哪里**？

假设我在活动中创建它，我可以从服务中访问它吗？然后我应该构建一个 AIDL 连接还是我可以通过直接读取它来访问数据库（即使活动不工作）？

建议将不胜感激。

Ps：我正在寻找一些简单的东西，因为我仍然是 android 的初学者；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:21:47.793

如果您在与 Activity 相同的进程中拥有服务，那么您在哪里创建它以及您希望在哪里访问它都无关紧要。仅当您在单独的进程中运行服务时才需要 AIDL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:05:54.873

正如@black crow 所提到的，如果您在同一进程中拥有 Activity 和 Service，那么在哪里创建数据库并不重要。如果它们是单独的进程，那么在我看来，最好在服务中创建数据库，并创建从 Activity 访问数据库数据的方法（例如，getAllData）。因此，与数据库的所有交互都将在服务中。如果您的活动和服务在不同的进程中，您还可以创建 ContentProvider，因此，您的活动和服务将在逻辑上划分（活动只会从 ContentProvider 读取数据，而服务将在那里推送数据）。在我看来，这种方法将满足您的所有需求。

# asp.net-mvc-routing - 获取错误的路线并且 ActionLink 生成错误的超链接

> ID：10633802
> 
> 赞同：6
> 
> 时间：2012-05-17T10:17:45.890
> 
> 标签：asp.net-mvc-routing

我是 ASP.NET MVC3 的新手。

我在 Global.asax 中配置了一些路由，我使用@Html.ActionLink 辅助方法生成了一些超链接。

除了以下代码中的顶部链接之外，所有链接都已正确呈现：

**全球.asax**

```
routes.MapRoute(
    null,
    "Section/{Page}/{SubPage}/{DetailPageName}",
    new { controller = "Base" }
    );

routes.MapRoute(
    null,
    "Section/{Page}/{SubPage}",
    new { controller = "Base", action = "SubPage" }
    );

routes.MapRoute(
    null,
    "Section/{Page}",
    new { controller ="Base", action="LandingPage"}
    );

routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}", // URL with parameters
    new { controller = "Base", action = "Index" } // Parameter defaults
    ); 
```

**动作链接代码**

```
@Html.ActionLink(@subPages.LinkedPageName, "DetailPage",
    new {
        Controller = "Base",
        Page = @ViewBag.PageName,
        SubPage = @Model.SubPageName,
        DetailPageName = subPages.LinkedPageName
    }) 
```

以上应该选择顶级路线，即：

```
routes.MapRoute(
    null,
    "Section/{Page}/{SubPage}/{DetailPageName}",
    new { controller = "Base" }
    ); 
```

但它正在选择默认路线！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T02:44:58.333

在此路由定义中：

```
routes.MapRoute(
    null,
    "Section/{Page}/{SubPage}/{DetailPageName}",
    new { controller = "Base" }
    ); 
```

必须满足以下条件才能使路由匹配：

1.  如果有一个`controller`参数传入，`ActionLink`那么它的值必须是`Base`
2.  该`Page`参数必须指定且必须为非空，因为它没有默认值
3.  该`SubPage`参数必须指定且必须为非空，因为它没有默认值
4.  该`DetailPageName`参数必须指定且必须为非空，因为它没有默认值

所以在这个调用中`ActionLink`：

```
@Html.ActionLink(@subPages.LinkedPageName, "DetailPage",
    new {
        Controller = "Base",
        Page = @ViewBag.PageName,
        SubPage = @Model.SubPageName,
        DetailPageName = subPages.LinkedPageName
    }) 
```

条件#1 显然满足。但条件#2、#3 和#4 可能不满足，因为它们的值可能为空。

而且因为您声明最终匹配的路由是默认路由，所以我怀疑该`Page`参数为空或空。也就是说，`@ViewBag.PageName`返回 null 或空值。

签入您的代码（可能在调试器中或在视图中打印出来）以查看`PageName`属性是否具有值。

# permissions - 在 MonoDevelop 中以提升的权限运行控制台应用程序

> ID：10633803
> 
> 赞同：5
> 
> 时间：2012-05-17T10:17:51.430
> 
> 标签：permissions, mono, monodevelop, sudo

我想以提升的权限运行控制台应用程序。使用 sudo mono myapp.exe 从命令行运行它可以工作，但是我看不到附加到进程进行调试的方法。有没有办法直接在 MonoDevelop 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:50:24.020

这是可能的，但很重要。

设置 MONODEVELOP_SDB_TEST 环境变量将导致新的“Run->Run With->Custom Soft Debugger”命令出现在 MD 中。您可以使用它来调用 Mono 调试器并将其连接到 MonoDevelop。

```
sudo mono --debugger-agent=${AgentArgs} yourapp.exe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:53:31.933

以提升的权限运行整个 MonoDevelop？

# c# - 通过 asmx Web 服务不断向数据库插入数据

> ID：10633805
> 
> 赞同：0
> 
> 时间：2012-05-17T10:18:02.863
> 
> 标签：c#, sql, web-services, iis, asmx

我有一个将数据插入数据库的 Web 服务（托管在 IIS 上）（Xampp）

```
[WebMethod]
public void Insert(int a)
{
        string query = "INSERT INTO result (A) VALUES('" + a + "')";          

        if (this.OpenConnection())
        {
            MySqlCommand cmd = new MySqlCommand(query, connection);   
            cmd.ExecuteNonQuery();       
            this.CloseConnection();
        }
} 
```

我第一次使用此 Web 服务时，它很有魅力，但第二次尝试再次使用此服务时，它返回一条错误消息

**“操作已超时”**

在我的编码上

```
s1.Insert(a); 
```

当我在 IIS 中重新启动 Web 服务时，Web 服务再次正常工作，但它无法正常工作，因为它必须连续工作。有什么希望吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:20:34.300

似乎您与服务器的连接有问题，我认为打开与服务器的连接需要花费太多时间，这会导致超时，因此您必须调试这种情况并确保与服务器的连接没关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:25:30.557

我可以看到的问题可能是您的 this 对象仍然存在第二次调用，但它无法打开连接。

使您的班级成为对象，而不是使用它。

例如

```
[WebMethod]
public void Insert(int a)
{
        string query = "INSERT INTO result (A) VALUES('" + a + "')";          
        YourClass obj = new YourClass();
        //Open connection here
        if (obj.OpenConnection())
        {
            MySqlCommand cmd = new MySqlCommand(query, connection);   
            cmd.ExecuteNonQuery();       
            this.CloseConnection();
        }
        else
            throw new Exception("Problem in opening connection");
} 
```

# facebook - Facebook 不会从新页面中获取元标记

> ID：10633809
> 
> 赞同：-1
> 
> 时间：2012-05-17T10:18:22.310
> 
> 标签：facebook, fetch, meta-tags

我有几个带有 facebook 元标签的网页。问题是，只有在我使用了对象的调试器之后，Facebook 才开始识别它们。如何强制 Facebook 自动解析我的所有元标签？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:27:24.900

解决方案：

您可以像这样自动发送请求： curl -X POST \ -F "id={object-url OR object-id}" \ -F "scrape=true" \ "https://graph.facebook.com"

要抓取的 URL

# javascript - 更改列宽而不考虑其内容

> ID：10633813
> 
> 赞同：5
> 
> 时间：2012-05-17T10:18:30.953
> 
> 标签：javascript, jquery, html, plugins

每当用户单击列标题时，我想将表格列动态折叠到特定宽度（在这种情况下为 10 像素）。如果我们可以在更改列宽的同时保持单元格高度固定，那就太好了。
例如，表格将显示如下：
![在此处输入图像描述](../Images/9227d932c8f36e3e984110cd769d5b9f.png)
当用户单击列标题（此处为红色减号按钮）时，列应缩小并应如下所示：
![在此处输入图像描述](../Images/7ddca520387ea39c6a984b311080b161.png)
在 jsFiddle 中给出的示例中，列缩小到固定宽度，高度保持不变。

这是我迄今为止尝试过的[JsFiddle](http://jsfiddle.net/Ajinkya_Parakh/DJ3Yk/#base)。

我用过：

```
 table-layout:fixed;
  word-wrap:break-word; 
```

但列缩小到与第一个单词相同的宽度。它不会破坏制作 width 的工作`10px`。
这里列宽缩小以适应 word `Lonnnnng`。

**如果我们有任何插件，如允许此功能**的数据表（即动态折叠和扩展列到特定宽度），那就太好了。有许多插件允许用户隐藏特定列，但我想缩小它而不是隐藏。

* * *

**编辑 ：**

在尝试了一些建议之后，我意识到**插件将是更好的解决方案**，因为我必须照顾所有浏览器和分辨率支持。通过书面代码完成所有这些工作将是我要做的最后一件事 [我必须做 :D] .我们有提供这种功能的插件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:56:49.407

像这样的东西：http: [//jsfiddle.net/jY7mb/1/](http://jsfiddle.net/jY7mb/1/)

我将每个单元格的内容包装在 a 中`div`，并调整 div 的宽度而不是列的宽度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T08:31:00.620

您的解决方案中缺少的重要部分是设置表格宽度。一旦表格宽度固定（例如设置为`100%`），列宽也变得固定。你可以在这里看到它：http: [//jsfiddle.net/9QkVd/1/](http://jsfiddle.net/9QkVd/1/)

我的示例代码还切换`collapsed`类而不是直接操作 CSS 值，这是一种更可靠的方法。并且为列中的所有其他单元格设置了相同的类，以允许在`text-overflow: ellipsis`那里应用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T11:01:21.583

这是一个解决方案：[http ://cssdesk.com/xvpR2](http://cssdesk.com/xvpR2)

# java - Java：使用 FileChannel 写入文件会使文件缩小？

> ID：10633814
> 
> 赞同：2
> 
> 时间：2012-05-17T10:18:32.350
> 
> 标签：java, file-io, filechannel

我尝试使用 FileChannel 将特定字节写入文件的某个位置。但实际上文件缩小到我写更改的最后一个位置。我这样做：

```
 Path path = Paths.get("I://music - Copy.mp3");

    System.out.println(Files.size(path)/1024 + "KB");

    try (FileChannel chan = new FileOutputStream(path.toFile()).getChannel()) {
        chan.position(1024 * 1024);

        ByteBuffer b = ByteBuffer.allocate(1024);
        chan.write(b);

        System.out.println("Write 1KB of data");
    }

    System.out.println(Files.size(path)/1024 + "KB"); 
```

这是我得到的输出：

```
3670KB
Write 1KB of data
1025KB 
```

谁能告诉我哪里出错了？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:23:39.027

您缺少允许附加到文件的[FileOutputStream 构造函数。](http://docs.oracle.com/javase/6/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.io.File,%20boolean%29)如果按上述方式创建它，则会覆盖文件的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:28:38.403

尝试使用您`FileOutputStream`的附加模式并避免指定当前频道位置：

```
new FileOutputStream(path.toFile(), true) 
```

更新。没看到前面的答案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-27T17:11:43.833

FileOutputStream 在不处于追加模式时将文件截断为零长度。它不会覆盖文件的内容，而是丢弃内容并重新开始。`chan.size()`您可以通过在创建通道后调用来验证这一点，这将为您提供 0。 ^([1])

FileChannels 可以前进到文件末尾并被告知在那里写入；这会导致文件大小增加到 position + bytes_written （强调我的）：

> 将位置设置为大于当前大小的值是合法的，但不会更改实体的大小。[..]*稍后尝试在这样的位置写入字节将导致实体增长以容纳新字节*；未指定前一个文件结尾和新写入字节之间的任何字节的值。

因此，虽然看起来 FileChannel 在写入后正在切断您的文件，但它是 FileOutputStream 截断为 0 长度，然后 FileChannel 再次扩展它。

为防止这种情况发生，请避免使用 FileOutputStream 创建通道。你有一个路径，所以你可以打电话[`Files.newByteChannel`](http://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#newByteChannel-java.nio.file.Path-java.nio.file.OpenOption...-)或[`FileChannel.open`](http://docs.oracle.com/javase/8/docs/api/java/nio/channels/FileChannel.html#open-java.nio.file.Path-java.nio.file.OpenOption...-)：

```
Path path = Paths.get("I://music - Copy.mp3");

System.out.println(Files.size(path)/1024 + "KB");

// pick either:
try (FileChannel chan = FileChannel.open(path, StandardOpenOption.WRITE)) {
try (SeekableByteChannel chan = Files.newByteChannel(path, StandardOpenOption.WRITE)) {
    chan.position(1024 * 1024);

    ByteBuffer b = ByteBuffer.allocate(1024);
    chan.write(b);

    System.out.println("Write 1KB of data");
}

System.out.println(Files.size(path)/1024 + "KB"); 
```

* * *

[1] 请注意，在您刷新或关闭流之前，JVM 之外的程序（例如文件资源管理器）可能不会指示这一点。

# javascript - 在 javascript 中添加数组和对象会产生错误

> ID：10633815
> 
> 赞同：4
> 
> 时间：2012-05-17T10:18:33.520
> 
> 标签：javascript, object

执行以下操作时，我得到这些输出

```
var t = {} + {}; // Alerts [object Object][object Object]
t = {} + 1 //Alerts [object Object]1
t = {} + "hello" //Alerts [object Object]hello
t = {} + function(){} //Alerts [object Object]function(){}
t = {} + [] //Alerts [object Object] 
```

仅在最后一种情况下，它`[Object object]`不应该也显示警报`[object Object][object Object]`吗？

在 Firefox12.0 中测试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T10:21:54.957

不，因为输出的第二部分是空数组的字符串化形式`[]`。数组被字符串化为字符串化值的逗号分隔列表，因此空数组字符串化为空字符串。您可以使用 确认这一点`console.log([] + "" === "")`。

因此，`{} + []`结果等价`"[object Object]" + ""`。

# javascript - 在同一页面上多次调用 $(document).ready

> ID：10633820
> 
> 赞同：1
> 
> 时间：2012-05-17T10:18:47.677
> 
> 标签：javascript, jquery, ruby-on-rails, document-ready

> **可能重复：**
> [你可以有多个 $(document).ready(function() 部分吗？](https://stackoverflow.com/questions/1327756/can-you-have-multiple-document-readyfunction-sections)

**可以在同一页面上多次调用*$(document).ready吗？*如果是这样，代码运行的顺序如何解决，这是否有任何影响**

我在我的 Rails 应用程序中使用 jQuery。我通过应用程序使用了几个级别的 javascript，所有这些都使用 jQuery。

例如，我的 application.js 中有一些默认代码淡出 Flash Notices通过编辑操作。

在我使用的所有三个 js 文件中：

```
$(document).ready
{
   //Do something
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T10:21:05.847

没关系。

执行顺序将与它们使用的顺序相同。

**先进先出**

jQuery 有一个内部队列，称为`readyList`存储就绪事件的所有回调。当您`ready`使用回调调用函数时，只需将其添加到队列中并在 DOM 准备好时触发整个队列。

查看 jQuery 源代码可以很容易地告诉你：

**源代码：**

```
// The deferred used on DOM ready
readyList,
...
...

ready: function( fn ) {
    ...
    // Add the callback
    readyList.add( fn );

    return this;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:22:39.680

他们运行[与附加的相同的顺序](http://jsfiddle.net/ADJ4u/)，这样做很好。但是，您可以做[一个更短的等价](http://api.jquery.com/jQuery/#jQuery3)于减少函数调用，因为`$(document).ready()`它本身就是 2 个函数调用

```
$(function(){
    //document is ready
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:21:39.077

jQuery 中对 $(document).ready 的调用按照定义的顺序执行。更多信息在这里 [http://docs.jquery.com/Tutorials:Multiple_$(document).ready()](http://docs.jquery.com/Tutorials%3aMultiple_%24%28document%29.ready%28%29)

# cakephp - cakePHP 保存到多个模型

> ID：10633825
> 
> 赞同：0
> 
> 时间：2012-05-17T10:19:08.473
> 
> 标签：cakephp, model, save

我有 2 个模型需要保存到。在这种情况下，我不需要 cakePHP 来 saveAll()，但想手动保存内容。

在我看来，我将 formHelper 设置为“Model2.fieldname”，并且在发布时，如果我执行 pr()，则会使用 [Model2] 与字段创建关联数组。

我在控制器中的代码：

```
 if($this->request->is("post") {
      if($this->Model1->save($this->request->data) {
           if($this->Model1->Model2->save($this->request->data) {
                $this->Session->setFlash("Success");
           }
      }
 } 
```

它继续并存储模型 1 的数据，但在模型 2 上失败。它在表中创建了一条空记录，因为有一个已创建和修改的表字段，但其余字段为空白。它也未能通过模型​​ 2 的验证（因此它不进行任何验证。）

Model1 有一个 Model2

我以前没有这样做过，所以我确信我做错了什么，所以如果有人可以帮助提前感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:47:02.760

你可以使用 cakephp 的`saveAssociated()`方法：

```
$this->Model1->saveAssociated($this->request->data); 
```

阅读[**saveAssociated()**](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array)

# iphone - 在自定义播放器上播放 .mov 文件

> ID：10633826
> 
> 赞同：0
> 
> 时间：2012-05-17T10:19:09.733
> 
> 标签：iphone, uiwebview

我有从实时 URL 播放 .mov 文件的代码。它工作正常，因为我使用了 UIWebView，并且我还设置了缩略图和视频，当我单击 webview 时，文件正在 iPhone 的快速播放器中播放 - 所以我的问题是，是否可以在不使用快速播放器的情况下播放文件（在 UIwebview 或其他东西上）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:02:38.437

您还可以通过实时流媒体直接从 MPMoviePlayerController 中的 URL 播放。无需下载该视频。

```
self.moviePlayer=[[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:@"http://www.mysite.com/video/myVideo.wav"]];
[self.moviePlayer prepareToPlay];
[self.moviePlayer setShouldAutoplay:YES];
[self.view addSubview:self.moviePlayer.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:28:35.320

如果您在 UIWebView 中加载网页，那么如果使用标签在页面中指定了视频，那么您可以根据需要在 UIWebView 页面内内联播放它。

确保设置这个

```
self.webView.allowsInlineMediaPlayback = YES; 
```

并将其放入 html

```
webkit-playsinline 
```

即像这样

```
<video id="theVideo" controls width="180" height="160" src="sample_mpeg4.mp4"  webkit-playsinline></video> 
```

# git - 推送到私有 github 存储库时如何触发 Jenkins 构建

> ID：10633827
> 
> 赞同：18
> 
> 时间：2012-05-17T10:19:11.607
> 
> 标签：git, plugins, github, build-process, jenkins

我的 Jenkins 持续集成服务器在 Ubuntu 主机上运行，​​配置如下：

*   詹金斯诉 1.463
*   github-api 1.23
*   詹金斯 GIT 插件 1.1.18
*   GitHub 插件 1.2

**轮询单片机工作。**这一点很重要，因为我想让你知道我的其他与 jenkins 相关的配置运行良好，除了这篇构建后触发废话。

我想配置 Jenkins，以便在将更改推送到**私有 github 存储库**中的开发分支时，这将触发包含最新更改的构建。

该 repo 位于我作为所有者的个人 github 帐户下。让我们打电话给这个*所有者*

我包括另一个 github.com 帐户作为合作者。让我们称这个*合作者*

我这样做的原因是，如果我不再参与该项目，其他人可以继续进行维护。

ubuntu 中 jenkins 用户的 SSH 密钥存储在*collaborator下*

我查阅了以下链接：

[http://nepalonrails.tumblr.com/post/14217655627/set-up-jenkins-ci-on-ubuntu-for-painless-rails3-app-ci](http://nepalonrails.tumblr.com/post/14217655627/set-up-jenkins-ci-on-ubuntu-for-painless-rails3-app-ci)

[https://issues.jenkins-ci.org/browse/JENKINS-10391](https://issues.jenkins-ci.org/browse/JENKINS-10391)

[https://wiki.jenkins-ci.org/display/JENKINS/Github+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Github+Plugin)

[http://kohsuke.org/2011/12/01/polling-must-die-triggering-jenkins-builds-from-a-git-hook/](http://kohsuke.org/2011/12/01/polling-must-die-triggering-jenkins-builds-from-a-git-hook/)

[https://wiki.jenkins-ci.org/display/JENKINS/Logging](https://wiki.jenkins-ci.org/display/JENKINS/Logging)

[http://blog.cloudbees.com/2012/01/better-integration-between-jenkins-and.html](http://blog.cloudbees.com/2012/01/better-integration-between-jenkins-and.html)

没有一个是行不通的。有些看起来有点过时甚至矛盾。

我已将 github.com 添加到 jenkins ubuntu 用户的 knownhosts。我已经添加了 github webhook。

我已经在 jenkins 中尝试过手动和自动 github webhook 设置。

没有任何效果。

我需要一个关于如何在不轮询 github 的情况下实现这一点的分步指南。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-16T01:43:17.910

我遇到了类似的问题，在查看了主要的 Jenkins**系统日志**后，我看到了以下内容：

```
Feb 15, 2013 8:35:44 PM hudson.security.csrf.CrumbFilter doFilter
WARNING: No valid crumb was included in request for /github-webhook/.  Returning 403. 
```

解决方案是关闭 CSRF 保护 - 管理 Jenkins > 配置系统 > 防止跨站点请求伪造攻击。该复选框位于第一个配置部分的底部。在那之后，一切似乎都很顺利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T19:41:24.983

`com.cloudbees.jenkins`为您的 url 下的类别创建一个具有跟踪级别日志记录的记录器`/log`（管理 Jenkins-> 系统日志）。

**验证存储库管理屏幕的Service Hooks**部分下是否存在**Webhook URL**条目。

 **单击**测试挂钩**，您应该会在新创建的记录器下看到一些日志活动。

最后，检查您已配置为由 GitHub 推送触发的构建的**GitHub 轮询日志操作。**

*一个常见的错误是在没有更改的情况下*测试这样的提交挂钩。

 **该钩子仅用于提示轮询，除非检测到更改，否则不会执行构建。****

# amazon-web-services - AWS Token Vending Machine 应该部署在它自己的实例上，还是我可以将它与我的应用程序实例合并？

> ID：10633830
> 
> 赞同：9
> 
> 时间：2012-05-17T10:19:25.967
> 
> 标签：amazon-web-services

如果这是一个奇怪的问题，我很抱歉。我已经阅读了很多资料来为使用亚马逊网络服务的 iphone 应用程序部署我自己的服务器。

我现在面临的问题是我想使用令牌自动售货机系统来访问移动设备以从各自的帐户上传或检索东西。所以这是我想到的结构：

1) 设备连接到 TVM servlet 以获得对 SimpleDB 和 S3 的临时访问。

2) 设备现在将针对包含用户和密码的 simpleDB 域进行身份验证。

3) 服务器将向设备发送一个唯一 ID。

4) 设备将使用此唯一 ID 在 S3 上上传照片。

5) 如果上传响应成功，设备现在将添加一些信息，包括 SimpleDB 上的唯一 ID 和其他字段。

我对此感到困惑的是我需要的 EC2 实例。我想我可以使用带有 servlet 的单个 java 应用程序来完成大部分此过程，但是**如果我想使用令牌自动售货机的身份验证，我应该启动第二个实例吗？**亚马逊本身的示例使用自己的令牌自动售货机实例，并简单地获得直接访问数据库的授权。但是我需要一些服务器端逻辑，这就是为什么我需要自己的服务器端处理来重定向这些上传和下载。

此外，如果有人愿意告诉我这种结构是否有意义。我对服务器/数据库的东西完全陌生，所以我真的不知道什么是好的结构。我已经阅读了我需要的亚马逊服务的最佳实践和技巧。但我仍然不确定。

感谢您的反馈和支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:23:03.180

首先，这种结构是有道理的。恕我直言，您至少可以遵循两条路径：

1) 使用 Elastic Beanstalk 执行单个部署。
如果您选择此路径，我认为更简单的方法是遵循大多数[用于身份注册的令牌自动售货机 -](http://aws.amazon.com/code/7351543942956566) AWS 的示例 Java Web 应用程序，修改源代码以添加您的服务器端逻辑，方法是更改当前的 servlet 代码或通过添加一个或多个新的 servlet 来完成这项工作。然后，您可以按照上面链接中的建议构建 .war 并使用 Elastic Beanstalk 直接部署它。一个基本概念是，您可以将 Elastic Beanstalk 视为“应用程序服务器即服务”，从而使多个部署方面对您来说更容易。

2) 使用您选择的应用服务器（Tomcat、JBoss、WebLogic 等）启动一个或多个 EC2 实例。这样，您在设计应用程序的部署时将拥有更大的灵活性（EC2 实例很像云中的虚拟机，您可以在其中安装几乎任何您想要的东西，配置防火墙规则等）。您可以 a) 在单独的实例中部署 TVM，或 b) 在与 b.1) 相同的实例中部署新应用程序或 b.2) 作为与服务器端逻辑相同的应用程序（类似于使用示例Elastic Beanstalk）。您的选择实际上取决于应用程序的大小、预期负载、代码和 TVM 之间的耦合以及其他因素。

您的问题非常笼统，您可以采用多种方法来完成您想要的，所以我想我会概述两种可能的路径，希望能帮助您迈出第一步。不要犹豫，澄清任何不清楚的地方。希望能帮助到你。

# python - 在python中对数组列表进行分类

> ID：10633831
> 
> 赞同：2
> 
> 时间：2012-05-17T10:19:26.563
> 
> 标签：python, arrays, logic, python-2.7

我正在帮助我的朋友在 python 中做逻辑算法，但我还没有找到最好的解决方案。

首先，我有一个数组列表：

```
x = array[0,1,2,3,4,3,2,3,-2,-4,-7,2,2] 
```

他想对 x 进行分类，所以输出变成这样：

```
array([0,1,2,3,4]) # increasing value
array([4,3,2]) #decreasing value
array([2,3]) # increasing value
array([3,-2,-4,-7]) #decreasing value
array([-7,2]) # increasing value
array([2,2])  # remain_the_same_value 
```

规则很简单：

> 1.  如果值不断增加（如上面的示例：0,1,2,3,4），它们将放入一个数组中
> 2.  如果该值不断减小（如上例：3、-2、-4、-7），则将其放入一个数组中
> 3.  但是，如果值模式发生突然变化，例如上面的示例：从增加的值 (0,1,2,3,4) 突然下一个值正在减少。将制作新数组并放入最后一个增加的值（4）并监视下一个值，无论它是否是减少值。如果是，它们将被放在一个数组中。示例：数组（[4,3,2]）
> 4.  如果值保持不变（如上面的示例，从 2 到 2）。它们将被放在一个数组中。

这就是我到目前为止所做的，但离解决方案还很远

```
#categorize which types of input
if len(x) > 2 :
    for i in range(len(x)) :
        if (x[i+1]-x[i]) > 0 and i+i < len(x) : # for increasing x value

        elif (x[i+1]-x[i]) < 0 and i+i < len(x) : # for decreasing x value

        elif (x[i+1]-x[i]) == 0 and i+i < len(x) : # for foward direction of vehicle

        else :
            print 'ERROR : check the input coordinates once again!' 
```

此致，

格伦

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T10:45:40.330

首先我想说我不明白你问题的一部分，

```
array([3,-2]) #decreasing value
array([-2,-4,-7]) #decreasing value 
```

为什么这些是分开的？

到目前为止，我将发布我的答案，除了该部分之外，它给出了正确的结果，因为我没有看到它背后的逻辑。为简单起见，此示例使用列表和元组，但您可以根据需要将其更改为使用数组。

```
>>> from itertools import groupby
>>> data = [0,1,2,3,4,3,2,3,-2,-4,-7,2,2]
>>> def slope(a,b): #Returns 1 for inc, 0 for equal and -1 for dec
        return (a > b) - (a < b) 

>>> def groups(nums):
        for k,v in groupby(zip(nums,nums[1:]), lambda (x,y): slope(x,y)):
            yield next(v) + tuple(y for x,y in v) #Using itertools.chain this can be written as tuple(chain(next(v),(y for x,y in v)))

>>> list(groups(data))
[(0, 1, 2, 3, 4), (4, 3, 2), (2, 3), (3, -2, -4, -7), (-7, 2), (2, 2)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:57:38.063

我找到所有运行变化的地方，然后生成包括两个端点的运行。

```
def sgn(x):
  return (x > 0) - (x < 0)

def categorize(xs):
  endpoints = [0]
  endpoints.extend(i for i, x in enumerate(xs[1:-1], 1)
                   if sgn(x - xs[i - 1]) != sgn(xs[i + 1] - x))
  endpoints.append(len(xs) - 1)
  for e0, e1 in zip(endpoints, endpoints[1:]):
    yield xs[e0:e1 + 1]

print list(categorize([0,1,2,3,4,3,2,3,-2,-4,-7,2,2]))
print list(categorize([0, 1, 2, 3]))
print list(categorize([0])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T22:30:54.607

这个使用 numpy 怎么样，它同时解决了你的第二个问题。

```
将 numpy 导入为 np

x=(0, 1, 2, 3, 4, 3, 2, 3, -2, -4, -7, 2, 2)
y=范围(13)

#一阶微分，求斜率
dx = list((np.diff(x)>0)*1)

#一阶差分丢失了第一个值，但我们总是想保留它
#只需决定它是低于还是高于第二个值

d0=((x[0]-x[1])>0)*1

#将一阶微分添加到二阶微分（峰值）
ddx = [d0,]+list(np.abs(np.diff(dx)))

p=0
rx=[]
ry=[]

对于 enumerate(ddx) 中的 n,v：
    如果 v==1：
        rx.append(元组(x[p:n+1]))
        ry.append(元组(y[p:n+1]))
        p=n

打印接收
打印

```

# python - 带有多个插入的Python sqlite3 executescript（）错误

> ID：10633837
> 
> 赞同：0
> 
> 时间：2012-05-17T10:19:53.770
> 
> 标签：python, sql, sqlite

我正在将我的大脑从 PHP + MySQL 转移到 Python，目前我正在使用 sqlite 作为稍后其他东西的中介，因为它是内置的。

当我尝试设置要使用的初始数据库时，它会在多行的`INSERT`语句上引发错误：`INSERT`

```
import sqlite3

query = """CREATE TABLE IF NOT EXISTS "users" (
             "userID" INTEGER PRIMARY KEY autoincrement,
             "email" varchar(255) NOT NULL,
             "forename" varchar(50) NOT NULL,
             "surname" varchar(50) NOT NULL
           );
           INSERT INTO "users" ("userID", "email", "forename", "surname") 
           VALUES
             (1, 'user1@example.com', 'Test', 'User'),
             (2, 'user2@example.com', 'Test', 'User');"""

 db_conn = sqlite3.connect('test.db')
 try:
     db_conn.cursor().executescript(query)
     db_conn.commit()
 except:
     print "error with database"
     raise
 finally:
     db_conn.close() 
```

当我运行它时，我得到：

```
error with database
Traceback (most recent call last):
  File "dbTest.py", line 20, in <module>
    db_conn.cursor().executescript(query)
sqlite2.OperationalError: near ",": syntax error 
```

我花了很长时间才找到它不喜欢哪个“，”（我的意思是，真的吗？SQL 错误很糟糕！）。它确实是分隔`INSERT`行的“，”。

我做了什么傻事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:29:39.443

For your insert I would use [.executemany()](http://docs.python.org/library/sqlite3.html#sqlite3.Cursor.executemany) instead of execute script, if you can. Otherwise if you can't, your `INSERT` statement will need to be seperate for each `VALUES` set you wish to pass it.

```
query = """INSERT INTO "users" ("userID", "email", "forename", "surname") 
           VALUES
           (?, ?, ?, ?)
        """
user_list = ((1, 'user1@example.com', 'Test', 'User'), (2, 'user2@example.com', 'Test', 'User'))
cursor.executemany("INSERT INTO myTable(data) values (?) ", user_list) 
```

EDIT: According to this [post](https://stackoverflow.com/questions/1609637/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database), you can in fact have multiple value sets in a single `INSERT` statement, but the syntax is far from pretty.

# php - 调用 PHP 登录函数

> ID：10633840
> 
> 赞同：0
> 
> 时间：2012-05-17T10:20:02.147
> 
> 标签：php

这是我的 HTML 代码：

```
<html>
<head>
<title>Login</title>
</head>

<body>

<FORM NAME ="form1" METHOD ="POST" ACTION ="controller.php">

<input type = "text" name = "txtUsername" value = "testuser"><br>
<input type = "text" name = "txtPassword" value = "password"><br>

<Input type = 'Submit' Name ='Login' value="Login">

</FORM>

</body>
</html>

<?PHP

    include_once("controller/Controller.php");  

    function login($username,$password) {
            $controller = new Controller();  
            $controller->invoke("testUsername","testPassword");  
    }

?> 
```

我可以帮忙用两个输入框中的值调用 PHP 登录函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:24:09.727

也许

```
$user = $_POST['txtUsername'];
$pass = $_POST['txtPassword'];

login($user, $pass); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:01:07.727

可以肯定的是，您可以使用

```
if (isset($_POST['txtUsername'])&&isset($_POST['txtPassword'])) {
    $username = $_POST['txtUsername'];
    $password = $_POST['txtPassword'];
    login($username, $password);
} else {
    // some logic actions if there no values on txtUsername and txtPassword.
} 
```

另外，我还建议您是否可以使用占位符属性而不是值属性，例如...

```
<input type="text" name="txtUsername" placeholder="Username"><br>
<input type="password" name="txtPassword"><br> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:23:16.173

我认为您应该执行以下操作：

```
<?php

if (isset($_POST['Login'])) {
    login($_POST['txtUsername'],$_POST['txtPassword'])
} 
```

当然你需要在里面处理请求`controller.php`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T10:27:41.613

```
<FORM NAME ="form1" METHOD ="POST" ACTION ="<?php echo $PHP_SELF;?>"> 
```

还：

```
if ( 'POST' == $_SERVER['REQUEST_METHOD'] )
{
  $user = $_POST['txtUsername'];
  $pass = $_POST['txtPassword'];

  login($user, $pass); 
} 
```

# maven - Nexus：无法从代理存储库获取工件

> ID：10633841
> 
> 赞同：0
> 
> 时间：2012-05-17T10:20:09.057
> 
> 标签：maven, nexus

我安装了 Nexus 并代理了一些外部存储库。

现在我正在尝试代理`http://repo.opengeo.org/`，但是当我通过 m2eclipse 添加依赖项时，它没有找到任何结果。

如果我尝试通过 Web 界面浏览存储库索引，我什么也得不到；如果通过 Web GUI 搜索工件，则情况相同。

但是，如果我浏览远程仓库，一切都会正确显示。还有其他事情要做吗？

似乎，当您添加新存储库时，行为是完全不可预测的。它快把我逼疯了……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:28:20.767

远程存储库没有发布索引，但这不会影响您从中获取工件的能力。只需添加代理，将其添加到您的组，将工件添加到您的 pom 并构建。

# android - 更多的活动类会增加应用程序的大小？？需要帮助

> ID：10633844
> 
> 赞同：-1
> 
> 时间：2012-05-17T10:20:21.200
> 
> 标签：android

我正在创建一个带有健康提示的基本应用程序。我需要以顺序方式一个接一个地加载屏幕。我应该创建与提示数量一样多的活动[1 个活动对应 1 个提示]？我想这不会是经济的。有什么替代方法吗？？

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:24:15.127

> 我应该创建与提示数量一样多的活动吗？

不，`its effect the performance of your app`。您必须以编程方式更改视图的内容。

我认为你有选项[片段。](http://developer.android.com/guide/topics/fundamentals/fragments.html).在一个活动中显示多个视图。

# grails - 使用 grails 无法正确显示 tiny-mce textarea

> ID：10633852
> 
> 赞同：1
> 
> 时间：2012-05-17T10:20:54.737
> 
> 标签：grails, tinymce, grails-plugin

我在使用带有 grails 的“tiny-mce”时遇到问题（textarea 显示不正确）。我正在使用 Eclipse Indigo，并使用“grails install-plugin tiny-mce”安装了 tiny-mce 插件。我写的代码是：

```
<!doctype html>
<html>
<head><title>TinyMCE Test</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <tinyMce:resources />
    <tinyMce:importJs/>
</head>

<body>
        <tinyMce:renderEditor type="advanced"/>

</body>

</html> 
```

问题是显示的textarea 没有tiny-mce 功能，即所有可用于格式化文本的漂亮属性/按钮。textarea 只是一个简单的 html textarea。看起来检查生成的源代码（即右键单击->查看源代码）可能有一些问题：

```
<!doctype html>
<html>
<head><title>TinyMCE Test</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>    
    <script type="text/javascript" src="/MyGrailsProject/static/plugins/tiny-mce-    3.4.9/js/tinymce/jscripts/tiny_mce/tiny_mce.js"></script>
     <script type="text/javascript" src="/MyGrailsProject/static/plugins/tiny-mce-3.4.9/js/tinymce/jscripts/tiny_mce/tiny_mce.js"></script><script type="text/javascript">tinyMCE.init({
                            mode : "textareas",
                            theme : "simple",
                            editor_selector : "mcesimple",
                            theme_advanced_toolbar_location : "null"
                        });tinyMCE.init({
                            mode : "textareas",
                            theme : "advanced",
                            editor_selector : "mceadvanced",
                            theme_advanced_toolbar_location : "top"
                        });</script>
</head>
<body>
<textarea class='null mceadvanced'></textarea>
</body></html> 
```

看起来 textarea 类有一个空值。这个对吗？有谁知道为什么我的 textarea 渲染不正确？问题是否与找不到文件“tiny_mce.js”有关？如果是这种情况，我该如何解决这个问题？

最好的问候克莱

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T22:28:33.327

好的，所以我通过执行以下操作来完成这项工作：

1.  [从http://www.tinymce.com/download/download.php](http://www.tinymce.com/download/download.php)下载 tinymce => 给你一个文件 ~/tinymce
2.  将 ~/tinymce 复制到 /web-apps/js/tiny_mce
3.  在 main.gsp 中添加`<g:javascript src="tiny_mce/tiny_mce.js"/>`这将拿起 web-apps/js 文件夹下的文件夹
4.  在这一点上，微型 mce 仍然无法工作。它会抱怨 en.js 和 editor_template.js
5.  你必须去 Config.groovy 并添加这一行
    `grails.resources.adhoc.excludes = ['/js/tiny_mce/**/*.*']`
6.  现在回到 gsp，添加 tiny_mce.init() 行 ex

    ```
    tinyMCE.init({
        theme : "advanced",
        mode : "textareas",
        plugins : "fullpage",
        theme_advanced_buttons3_add : "fullpage"
    });
    ```

    里面的`<g:javascript>`标签像

    ```
    <g:javascript>
    tinyMCE.init({
        主题：“高级”，
        模式：“文本区域”，
        插件：“整页”，
        theme_advanced_buttons3_add ：“整页”
    });
    </g:javascript>
    ```

7.  现在像往常一样添加文本区域`<g:textArea name="..."/>`

8.  默认情况下，Grails 会在内部转义 html，`${fieldValue(bean:...)}`这样你漂亮的小 mce 标记就会被转义
9.  将上面的内容更改为`${object.field}`和 ex:`${person.firstName}`就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:51:06.877

[TinyMCE Grails 插件](http://grails.org/plugin/tiny-mce)不是必需的，目前已过期 3 个月**。**您可以转至[TinyMCE 的网站](http://www.tinymce.com/download/download.php)并在那里下载最新版本。

提取他们的 ZIP 文件并将文件夹复制`tinymce\jscripts\tiny_mce`到 Grails 项目的`web-app`文件夹下。（注意**不要**把它复制进去`web-app\js`，因为它是由[Resources](http://grails.org/doc/latest/guide/theWebLayer.html#resources)插件管理的，你需要在里面公开所有需要的静态资源`ApplicationResources.groovy`。）

然后在您的 .GSP 中，您`<head>`的页面部分中会有类似的内容：

```
<g:javascript src="../tiny_mce/tiny_mce.js"/>
<r:script>
    tinyMCE.init({
        mode: "textareas",
        theme: "advanced"
    });
</r:script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-27T06:45:37.980

让它工作的更简单的方法 - 在 html 头中包含 tinymce js

```
<head>
<script src="//tinymce.cachefly.net/4.0/tinymce.min.js"></script>
<script>
        tinymce.init({selector:'textarea'});
</script>
</head> 
```

在 GSP 中有一个 textarea 元素（'message' 是一个字段名称为 'content' 的命令对象）

```
<textarea  rows="10" name="content" >${fieldValue(bean:message,field:'content')}</textarea> 
```

这是在 Grails 2.2 中测试的，而不是 CDN //tinymce.cachefly.net，tinymce js 文件可以放在 web-app/js 目录中并以更简单的方式包含在 GSP 中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-06T17:23:03.720

如果您在 BuildConfig.groovy 中使用运行时 ":resources:1.1.6"，而不是使用运行时 ':resources:1.2' 更新它。这对我来说很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T10:32:46.630

需要找到“tiny_mce.js”才能使编辑器正常工作！确保在此处使用正确的路径。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T07:58:13.563

您可以使用富 ui 插件进行富文本编辑器。

它非常简单和漂亮。

只需安装 ricuui 插件和

在头部添加资源。

像这样。

这进入头部

这进入身体-----

享受......

# php - curlopt_cookie 似乎没有工作

> ID：10633857
> 
> 赞同：1
> 
> 时间：2012-05-17T10:21:04.507
> 
> 标签：php, curl

这是我的代码：

```
$ch = curl_init('http://www1.macys.com/index.ognc');
curl_setopt($ch,CURLOPT_COOKIE,"shippingCountry=US; currency=USD");
curl_setopt ($ch, CURLOPT_COOKIEFILE, "C:/cookie-techenclave.txt");
curl_setopt($ch, CURLOPT_COOKIEJAR, "C:/cookie-techenclave.txt");
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);     // Follow redirects
curl_setopt($ch, CURLOPT_MAXREDIRS, 8);             // Limit redirections to four
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);     // Return in string

$pageString = curl_exec($ch);
curl_close($ch) ; 
```

我尝试设置的 2 个 cookie 未设置。我用netcat对此进行了测试。这是 netcat 捕获的输出。

```
D:\php\L.c.MSQL.E.T.DVD\EF\SQL> "D:\My Downloads\apps\nc111nt\nc.exe" -l -p 80
GET /beauty/index_template.php HTTP/1.1
User-Agent: Opera/9.80 (Windows NT 5.1; U; en) Presto/2.10.229 Version/11.64
Host: localhost
Accept: text/html, application/xml;q=0.9, application/xhtml+xml, image/png, image/webp, image/jpeg, image/gif, image/x-x
bitmap, */*;q=0.1
Accept-Language: en-US,en;q=0.9
Accept-Encoding: gzip, deflate
Connection: Keep-Alive 
```

可以看出，那里没有 cookie 标头。我究竟做错了什么？我还能尝试什么？我尝试捕获和设置所有标题，但我尝试设置的 cookie 再次没有任何效果。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:48:17.237

如果您希望 curl 根据服务器响应自动更新 cookie 的值，请不要使用 CURLOPT_COOKIE。因为请求 cookie 将硬编码为 CURLOPT_COOKIE 的值。在这种情况下，CURLOPT_COOKIEFILE 和 CURLOPT_COOKIEJAR 将被忽略。

您确定提供的网络嗅探来自上述 PHP 代码吗？我没有看到代码上设置了 USER_AGENT，但它可以在您的嗅探中使用。

# android - 在 Android 中，如何在没有前台活动的情况下使用 NFC 操作 =

> ID：10633859
> 
> 赞同：0
> 
> 时间：2012-05-17T10:21:08.003
> 
> 标签：android, service, nfc

我正在尝试在后台读取 nfc 标签，然后将读取的消息保存在文件中。但是，我发现的唯一方法是在顶部进行活动。我也尝试过使用服务，但 NfcAdapter 无法使用 ACTIONS 直接与 android 服务通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:03:16.350

只有活动可以接收 NFC 意图。后台任务或服务无法接收它们。我认为这是一个有意的设计选择。它始终为用户提供完全控制权，就像用户在通过 NFC 共享任何数据之前必须点击的 Android Beam 屏幕一样。

# c# - Backgroundworker 等待用户在 GUI 中填写一个字段

> ID：10633861
> 
> 赞同：1
> 
> 时间：2012-05-17T10:21:22.753
> 
> 标签：c#, wpf, backgroundworker

我有一个后台工作人员，它应该做两件事。
1.将用户控件添加到 GUI
2.读取用户在 sed usercontrol 中输入的值并将其传递给函数
最好的方法是什么？

我正在考虑使用 2 种可以传递给 DoWork 事件的事件处理方法。
第一个处理点号 1，第二个处理点号 2。
然后我会这样做：
1\. 在 worker.ProgressChanged 事件内部 - 工作人员将用户控件添加到页面
2\. 在 worker.ProgressChanged 事件内部 - 在 while 循环内worker 等待填充所需的 ui 值
3\. 在 worker.RunWorkerCompleted 事件中 - 告诉 worker 执行第 2 个任务。

这是一个正确的方法吗？
如果不是，最好的方法是什么？
如果这是正确的方法，那么工人等待价值的最佳方式是什么？只是一个内部睡眠的while循环还是有更复杂的方法？
先感谢您。

编辑 1：我正在使用 WPF - XAML，如果这有什么不同的话

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:37:51.310

我不认为让你的后台工作线程循环等待用户输入是一个好主意。UI 已经这样做了，你应该使用它。

在我看来，你应该这样做：

1.  向 backgroundworkers`DoWork`事件添加一个事件处理程序，它将调用您在 (2.) 中提到的函数
2.  向您的控件添加一个事件处理程序，该处理程序将在用户输入内容时执行。如果您的控件有，`TextBox`那么您应该向 event.xml 添加事件处理程序`TextChanged`。
3.  在上面的事件处理程序中，调用`worker.RunWorkerAsync(textBox.Text)`

这样处理函数 (2.) 将仅在需要时被调用，并且您不会浪费资源等待两个线程上的用户输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:27:32.047

这就是我最终做到的方式：

```
while(string.IsNullOrEmpty(_emailData.CaptchaCurrent))
    Thread.Sleep(100); 
```

创建一个变量来存储用户输入并让线程等待该特定变量具有值。

这一切都在一个线程中进行。

# symfony - symfony2/behat/mink 在浏览器中测试时登录麻烦

> ID：10633863
> 
> 赞同：0
> 
> 时间：2012-05-17T10:21:45.343
> 
> 标签：symfony, selenium-webdriver, behat, sahi, mink

我在浏览器中执行 behat/mink 测试例程时遇到问题。我试过 sahi 和 selenium 潜水员，结果是一样的：

我运行测试，sahi打开登录modal-popup，但是没有填写用户名和密码。单击“提交”再次起作用，但由于缺少用户名和密码，用户未登录（显示“错误的用户名/密码”消息）。

现在的问题：

*   有谁知道为什么会发生这种情况以及我可以做些什么来解决这个问题
*   有人可以告诉我如何减慢浏览器中的执行速度（很难理解）
*   关于如何调试测试脚本执行期间发生的问题的更多想法？

我的登录功能步骤：

```
    /**
     * @Given /^我以 "([^"]*)"$/ 身份登录
     */
    公共函数 iAmLoggedInAs($username)
    {
        $user = $this->getUserFromUsername($username);
        $this->clickLink('登录');
        $this->fillField('_username',$user->getEmail());
        $this->fillField('_password','12341234');
        $this->pressButton('_submit');
        $this->loggedInUser = $user;
    }

```

页面的html：

[http://pastebin.com/Mb5a0xnq](http://pastebin.com/Mb5a0xnq)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:47:47.753

字段参数应该是字段标签（实际文本，而不是 id）或字段名称。

所以解决你的问题是要么使用：

```
$this->fillField('_username',$user->getEmail());
$this->fillField('_password','12341234'); 
```

或者

```
$this->fillField('E-Mail',$user->getEmail());
$this->fillField('Passwort:','12341234'); 
```

# css - 我可以同时将 css 转换为 scss 并将 scss 转换为 css 吗？

> ID：10633872
> 
> 赞同：8
> 
> 时间：2012-05-17T10:22:10.120
> 
> 标签：css, compass-sass, sass

我打算在一个大项目中使用 sass/compass。是否有可能一些团队成员可以使用简单的 css 而其他人仍然可以编写 scss？

我真正想知道的是 compass/sass 收听 scss 并同时转换 css 的方式它是否也可以收听 css 文件并转换回 scss 文件中的任何更改？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-17T14:53:40.823

这是*可能的*，但并不理想。你最好的办法是打开你的终端并运行

```
sass-convert --from css --to scss 
```

在您的样式所在的目录中**，然后从那里重构**。这是一种痛苦，而不是真正的“转变”。它会尝试正确嵌套，并且通常会做对，但是如果您不重构代码并使用诸如 mix-ins、extends 和变量之类的东西，它就会违背使用 SASS 的初衷。

要自动执行此操作，您可能需要使用[Guard](https://github.com/guard/guard#readme)之类的东西来监视 css 文件的更改。你需要确保你没有同时关注你的主要风格（sass 正在编译的那个），因为这会让你进入一个永无止境的转换循环！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-07T08:24:37.607

使用命令安装指南针

```
gem install compass 
```

运行此命令。这将扫描定义的目录中的 css 文件并将它们转换为 scss 文件。

```
sass-convert -R my_css_dir --from css --to scss 
```

然后执行这个命令

```
compass watch 
```

这将监视 scss 文件的更改并自动将它们转换为 css 文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-17T10:32:02.210

我会说不——或者至少，不容易。SCSS 与常规 CSS 完全兼容，并且可以编译为 CSS，但反之则不然，因此源文件应该是 CSS 或 SCSS。

不过，这取决于您的项目。假设两名成员正在从事项目的两个完全独立的部分。他们可以使用单独的文件，并选择在 SCSS 或 CSS 中工作。然后，它们的文件可能会包含在主 SCSS 文件中，或者以其他方式与构建脚本合并在一起——或者甚至在生产中保持独立。那不会有任何问题。

不过，我总是希望所有团队成员都以类似的方式工作，这样他们就可以在出现问题时轻松地相互掩护。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-06T15:46:17.567

您可以查看以下提供此类服务的网站：

[https://css2sass.herokuapp.com](https://css2sass.herokuapp.com)

```
 ______________| CSS | SASS | SCSS |
| CSS          |  -  |   X  |   X  |
| Minified CSS |  X  |   X  |   X  |
| SASS         |  X  |   -  |   X  |
| SCSS         |  X  |   X  |   -  | 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-05T09:57:14.747

我为此写了一个工具:) [http://sebastianpontow.de/css2compass](http://sebastianpontow.de/css2compass)

但这实际上只是一个帮助您入门的工具，您应该始终检查输出并重写它的关键部分 - 输出可能不是编写 scss 代码的最佳方式

# .net - Webmethods 主体之外的 Web 服务身份验证

> ID：10633875
> 
> 赞同：1
> 
> 时间：2012-05-17T10:22:16.497
> 
> 标签：.net, web-services, authentication

我们公司有一个 Web 服务，我们想发布它以供其他开发团队使用。尽管如此，我们仍希望控制谁使用它以及是否允许他调用此特定方法。

因此，我们提出了一个解决方案，为每个想要使用我们的 Web 服务的团队分配一个键，该键告诉调用者可以使用该键调用哪些方法。该键将作为参数传递给每个方法。将此密钥作为参数，我可以在每个方法的开头执行安全检查，如下所示：

```
private bool CanCallMethod(string methodIdentifier, string authenticationKey)
{
  //check in db
}

public object GetLocation(string authenticationKey, int param1, string param2)
{
    if (!CanCallMethod(someMethodIdentifier, authenticationKey))
        throw new UnauthorizedAccessException();
    //method body
}

public object SetLocation(string authenticationKey, DateTime param1)
{
    if (!CanCallMethod(someOtherMethodIdentifier, authenticationKey))
        throw new UnauthorizedAccessException();
    //method body
} 
```

但我必须在每一种方法中都这样做……而且我必须在每一种新方法和每一种新的网络服务中记住它。所以问题是：
**有什么方法可以设计我的类，以便在每次显式调用检查方法主体时在没有我的情况下调用任何方法时执行此检查？**
好吧，我不这么认为，但总是值得一问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:30:35.387

您可以将 AOP 与 PostSharp、Unity 或 Castle 等工具一起使用来拦截或创建动态代理。这可能会迫使您重新设计一些服务来实现接口。我只有使用 Unity 的经验，但从接口实现然后用 Aspects 连接它们可能会起作用。

也许这也有帮助：[在业务逻辑中使用 AOP 风格的类似 MVC 的授权的最佳免费方式](https://stackoverflow.com/q/5081755/505893)。

# javascript - 从另一个函数访问局部变量

> ID：10633878
> 
> 赞同：-1
> 
> 时间：2012-05-17T10:22:31.337
> 
> 标签：javascript, function, variables, parameters

我想在我的脚本中执行以下操作：

在一个函数中声明 2 个变量并在窗口加载时调用此函数。之后在我的其他函数中使用这两个变量的值。有什么选项可以在不必将函数外部的这些变量声明为全局变量的情况下执行此操作？

同样，重要的是在页面加载时调用的函数中声明变量。

HTML 代码：

```
<a href=''onclick='_default();return false;'>Link</a>
<div id='mydiv'></div> 
```

Javascript：

```
function _default() {
    var x = document.getElementById('mydiv');
    var h = x.offsetHeight;
    _main(x, h);
}
_default();

function _main(x, h) {
    alert(x);
    alert(h);
} 
```

您将看到此脚本`_default()`在页面加载时执行。`_default()`函数将 2 个参数传递给`_main()`并执行抛出 2 个带有变量和的`_main()`警报的函数。但是，当我单击链接时，我该如何制作这两个警报（请参阅上面的 html 代码）？`x``h`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:32:51.440

如果我理解了你的问题，那是因为第一次调用 default() 时，页面还没有完全呈现，所以 'mydiv' 将为空。

如果您删除调用 _default() 的行，而是从 body onload 中调用它，您应该会发现它按预期工作。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript" language="javascript">
        function _default() {
            var x = document.getElementById('mydiv');
            var h = x.offsetHeight;

            _main(x, h);
        }

        function _main(x, h) {
            alert(x);
            alert(h);
        }
    </script>
</head>
<body onload="_default();">
    <a href='' onclick='_default();return false;'>Link</a>
    <div id='mydiv'>
    </div>
</body>
</html>` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:34:12.047

该代码不起作用，因为它在 DOM 准备好之前执行......像这样更改它：

```
function _default() {
    var x = document.getElementById('mydiv');
    var h = x.offsetHeight;
    _main(x, h);
}

function _main(x, h) {
    alert(x);
    alert(h);
}

window.onload = _default; 
```

这会导致在触发事件`_default()`时执行函数`load`......[您可以在此处阅读有关该`window.onload`方法的更多信息](https://developer.mozilla.org/en/DOM/window.onload?action=edit)

[这里的工作示例](http://jsfiddle.net/xcPPS/)

# php - 当前日期减去 4 个月？

> ID：10633879
> 
> 赞同：16
> 
> 时间：2012-05-17T10:22:33.987
> 
> 标签：php, date

我有这种格式的日期（YYYYMM）：

```
201201  // Gen, 2012
201202  // Feb, 2012
201203  // ecc 
```

假设从 201203 开始​​，我想减去 4 个月。我不能这样做`201203 - 4`，因为它是=`201199`

`201203 - 4`应该输出`201111`（2011 年 11 月）

也许我应该将我的字符串转换为日期，然后用-4个月将其传递给strtotime？

有什么建议吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-17T10:25:27.620

您可以[`strtotime`](http://php.net/manual/de/function.strtotime.php)在 PHP 中使用：

```
$date = strtotime('2012-05-01 -4 months'); 
```

这篇[文章](https://stackoverflow.com/questions/1990321/date-minus-1-year)会帮助你。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-17T10:30:30.020

`strtotime()`可以做到，但您需要添加一个月中的一天才能解析日期：

```
$input = '201203';

$input .= '01';

$date = strtotime($input .' -4 months');

echo date('Ym', $date); 
```

2011 年 11 月的产出：

```
201111 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-17T10:35:36.993

除了`strtotime`版本之外，从 PHP 5.3 开始，您还可以使用[`DateTime`](http://php.net/manual/en/class.datetime.php)and [`DateInterval`](http://php.net/manual/en/class.dateinterval.php)：

```
$date = DateTime::createFromFormat("Ym", "201201");
$interval = new DateInterval("P4M"); // 4 months
$fourMonthsEarlier = $date->sub($interval);
echo $fourMonthsEarlier->format("Ym"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-04T11:36:20.463

Final_date = 当前日期 - 4 个月

```
<?php
$current_date = date("Y-m-d");

$final_date = date("Y-m-d", strtotime($current_date." -4 months"));

echo $final_date; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-17T08:10:42.537

对于 EX $da=2014-04-01

如果你想减 6 个月使用这个..

```
$date = strtotime($da .' -4 months');
$final=date('Y-m-d', $date); 
```

回声$最终；

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T10:25:25.313

您可以使用[strtotime](http://us3.php.net/manual/en/function.strtotime.php)将字符串转换为 UNIX 时间戳，以秒为单位。`time()`将为您提供当前的 UNIX 时间戳。减去它们得到日期的几秒钟，然后除以`60*60*24`得到它的天数

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-29T12:14:57.447

以前的代码不起作用：

```
$da='2014-08-29';
$date = strtotime($da .' -6 months');
$final=date('Y-m-d', $date);
echo $final;
$date = strtotime($da .' -7 months');
$final=date('Y-m-d', $date);
echo $final; 
```

二月不见了！

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-09-15T12:36:51.660

```
$date = '2016-09-01 00:00:00.000000';

$date2 = date("Y-m-d H:i:s.u", strtotime($date." -4 months"));

echo $date2; 
```

运行此代码，您将获得 2016-05-01 00:00:00.000000

# python - 如何复制 python bytearray 缓冲区？

> ID：10633881
> 
> 赞同：11
> 
> 时间：2012-05-17T10:22:45.343
> 
> 标签：python, bytearray

我有两个网络缓冲区定义为：

```
buffer1 = bytearray(4096)
buffer2 = bytearray(4096) 
```

`buffer2`在`buffer1`不分配额外内存的情况下，将内容从另一个移动到另一个的最快方法是什么？

天真的方法是：

```
for i in xrange(4096):
    buffer1[i] = buffer2[i] 
```

显然，如果我做`buffer1[:]=buffer2[:]`python 移动内容，但我不是 100% 确定它，因为如果我这样做：

```
a = bytearray([0,0,0])
b = bytearray([1,1])
a[:]=b[:] 
```

然后`len(a)=2`。丢失的字节会发生什么？谁能解释这是如何工作的或如何在缓冲区之间移动数据？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T10:26:27.627

在我的电脑上，以下

```
buffer1[:] = buffer2 
```

在 400 纳秒内复制一个 4KB 的缓冲区。换句话说，你每秒可以做 250 万份这样的副本。

这是否足以满足您的需求？

**编辑：**如果`buffer2`比 短，并且您想在*不更改目标缓冲区的其余部分的情况下*`buffer1`将其内容复制到特定位置，则可以使用以下命令：`buffer1`

 *```
buffer1[pos:pos+len(buffer2)] = buffer2 
```

同样，您可以使用右侧的切片来仅复制`buffer2`.*

# mysql - SQL Dump 上传到 phpmyadmin

> ID：10633883
> 
> 赞同：0
> 
> 时间：2012-05-17T10:22:51.133
> 
> 标签：mysql, command-line, phpmyadmin, cmd, mysqldump

我有一个 sql 格式的[Ontonotes](http://www.bbn.com/ontonotes/) - [v3.0](http://www.ldc.upenn.edu/Catalog/docs/LDC2009T24/OntoNotes-Release-3.0.pdf)转储，大小为 2.33 GB。我正在尝试将它上传到 Windows XP 上的 phpmyadmin 上。通过 GUI 它不允许我，因为大小超过了允许的最大文件大小。因此，我遵循了[这个网站上提到的技巧](http://www.ryantetek.com/2011/09/importing-large-sql-files-through-command-line-when-using-phpmyadminxampp/)

它一开始就工作，数据开始上传到 phpmyadmin 服务器。但是当服务器上的数据库大小达到 1.5 GB 时，它停止上传，即服务器上的上传没有任何改善，终端命令也没有暂停。

我试图在 php.ini 文件中找到这个大小限制，但找不到。关于如何做的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:27:57.143

在 php.ini 文件中，您要搜索的配置值是：

```
upload_max_filesize 
```

和

```
post_max_size. 
```

但是为什么不使用 mysql 控制台来代替：

mysql -uroot -pSuperSecretPass db_name < bigSQLdumpfile.sql

如果您在服务器上没有该文件，您总是可以执行“scp”或“wget”（这假设您在 Linux 机器上。）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:52:31.003

为什么不使用 bigdump.php

[http://www.ozerov.de/bigdump/](http://www.ozerov.de/bigdump/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:36:19.540

试试命令行：

```
C:\mysql_path\bin\mysql.exe --user=xx --password=xx --host=localhost --port=3306 --database=xx < C:\yourdata.sql 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T10:26:09.273

如果您搜索：

```
upload_max_filesize 
```

和

```
post_max_size 
```

在您的 php.ini 中，您可以从那里编辑上传的文件大小。如果你使用一个，你也可以通过 .htaccess 文件来做。

# java - 如何使用 MultipartEntity 在 servlet 中获取实体？

> ID：10633888
> 
> 赞同：4
> 
> 时间：2012-05-17T10:23:01.583
> 
> 标签：java, android, servlets

如果我像这样将文件上传到我的 servlet：

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.tumblr.com/api/write");

try 
{
    MultipartEntity entity = new MultipartEntity();
    entity.addPart("type", new StringBody("photo"));
    entity.addPart("data", new FileBody(image));
    httppost.setEntity(entity);
    HttpResponse response = httpclient.execute(httppost);
} 
catch (ClientProtocolException e) {} 
catch (IOException e) {} 
```

如何在 servlet 中检索内容？

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws  IOException 
{
     request.???
} 
```

*   我使用 Google App Server 作为我的 Servlet API

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:53:36.530

如果您的 Servlet 容器或服务器或引擎的版本**< 3.0**（如 2.5 或更早），您可能需要利用第三方库[Apache Commons FileUpload](http://commons.apache.org/fileupload)。尽管该文件暗示了对上传文件的使用，但它也有效地处理了从 POST-Methods 上传的已发布数据，就像这里解释的[那样](https://stackoverflow.com/questions/2422468/how-to-upload-files-in-jsp-servlet/2424824#2424824)。

Servlet API，从 3.0 版开始提供一些调用来处理发布的数据，这些数据是在 POST-Request 中发送的。唯一的要求是您的实体内容的 MIME-Type 编码是“ [multipart/form-data](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29) ”。

然后您可以使用以下任一方式检索内容的每个“部分”：

1.  [getPart(String partName)](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29)：其中“partName”是您的多内容实体的一部分的名称。

    ```
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws  IOException 
    {
        String partName = "type"; // or "data"
        Part part = request.getPart(partName);

        // read your StringBody type
        BufferedReader reader = new BufferedReader( new InputStreamReader(part.getInputStream()));
        String line ="";

        while((line=reader.readLine())!=null)
        {
            // do Something with a line
            System.out.println(line);

        }

        // or with a binary Data
        partName="data";
        part = request.getPart(partName);

        // read your FileBody data
        InputStream is = part.getInputStream();
        // do Something with you byte data

        is.read();
        // is.read(b);
        // ..

    } 
    ```

2.  [获取零件（）](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getParts%28%29)：

它实现了与 getPart(partName) 相同的结果，而这里的给定数据是已发送数据的所有部分的集合。要检索此集合的 Part 的每个部分，只需对集合使用线程安全迭代：

```
Iterator<Part> iterator = request.getParts().iterator();
       Part parts = null;
       while (iterator.hasNext()) {
       parts = (Part) iterator.next();
          //rest of the code block removed
       }
    } 
```

因为 getPart()/getParts() 只能从 Servlet 3.0 版本开始工作，所以您要确保使用支持的 Servlet 容器和/或升级您当前的 Servlet 容器。一些支持 3.0 的 Server 或 Servlet 容器：

1.  [Tomcat 7.0](http://tomcat.apache.org/tomcat-7.0-doc/index.html)：
2.  [老板网](http://www.jboss.org/jbossweb)
3.  [树脂](http://www.caucho.com/)

# selenium - 从警报中读取消息并单击确定

> ID：10633889
> 
> 赞同：7
> 
> 时间：2012-05-17T10:23:03.473
> 
> 标签：selenium, selenium-rc

我想阅读警报中的消息。

示例：如果警报显示“错误的电子邮件地址”。怎么读？意味着我想将该消息存储在一个字符串中。

如何在警报中单击确定...？？

如何使用硒来做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T10:27:34.270

我假设您正在使用 Selenium WebDriver。

```
// Get a handle to the open alert, prompt or confirmation
Alert alert = driver.switchTo().alert();
// Get the text of the alert or prompt
alert.getText();  
// And acknowledge the alert (equivalent to clicking "OK")
alert.accept(); 
```

答案在[这里](http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q%3a_Does_WebDriver_support_Javascript_alerts_and_prompts?)找到了。

如果您使用的是 Selenium RC，请查看[此](http://selenium.googlecode.com/svn/trunk/docs/api/dotnet/html/M_Selenium_ISelenium_GetAlert.htm)网页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:33:42.370

我发现在 Selenium RC 中，如果您知道会有一个确认按钮，那么您**需要**添加`selenium.getConfirmation();`到您的代码中。

这是我使用它的方式（**注意**：我在 Eclipse 中使用 Java）

```
selenium.click("//input[@id=\"accepted-emails\"]"); // Confirmation box after this line
if (selenium.isConfirmationPresent())
    String confirmationString = selenium.getConfirmation(); // this line is needed
selenium.keyPressNative("10"); // to press the OK key
selenium.waitForPageToLoad("30000");
System.out.println(confirmationString); // this is not really needed, but used it to simply show the confirmation box message 
```

希望这可以帮助！

# c# - 十进制类型 - 从字符串解析时向控制台显示带有冗余零的奇怪行为

> ID：10633891
> 
> 赞同：0
> 
> 时间：2012-05-17T10:23:13.223
> 
> 标签：c#, decimal, floating-accuracy

我们发现了一些奇怪的行为，小数点显示在控制台上。下面的代码最好地描述了这一点：

```
string num1AsString = "1.0000";
decimal num1AsDecimal = decimal.Parse(num1AsString);

string num2AsString = "1";
decimal num2AsDecimal = decimal.Parse(num2AsString);

Console.WriteLine(num1AsDecimal);
Console.WriteLine(num2AsDecimal); 
```

控制台的输出是：

```
1.0000
1 
```

但是 num1AsDecimal 和 num2AsDecimal 在调试器中仅显示为 1。num1AsDecimal 如何以某种方式保留 .0000？它似乎以某种方式坚持其字符串表示。这里有拳击吗？

比利·斯塔克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:25:12.470

这是 Jon Skeet[链接](http://csharpindepth.com/Articles/General/Decimal.aspx)的很好的解释，请参阅**保持零**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:26:26.453

> 我们发现了一些奇怪的行为，小数点显示在控制台上。

这一点都不奇怪。它[记录在案](http://msdn.microsoft.com/en-us/library/system.decimal.aspx)：

> 缩放因子还保留 Decimal 数字中的任何尾随零。尾随零不会影响算术或比较运算中的 Decimal 数的值。但是，如果应用了适当的格式字符串，则 ToString 方法可以显示尾随零。

换句话说，这里稍微奇怪的是调试器的行为，而不是`ToString()`. 如果您在调试器中观看`num1AsDecimal.ToString()`，那也应该保留尾随零。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T10:26:36.903

[MSDN](http://msdn.microsoft.com/en-us/library/cafs243z.aspx)页面上的脚注`Decimal.Parse`说：

> decimal.Parse 的十进制结果将具有与解析它的字符串相同的有效位数。也就是说，“3.43”和“3.4300”在解析为相同的数值时，会产生不同的十进制表示。这（在某种程度上）在十进制的二进制表示的描述中得到了解释。

# visual-studio-2008 - MS Visual Studio 2008 上的链接器错误

> ID：10633892
> 
> 赞同：0
> 
> 时间：2012-05-17T10:23:15.263
> 
> 标签：visual-studio-2008

我收到此错误：

```
1>Microsoft (R) Windows (R) Resource Compiler Version 6.0.5724.0 
1>Copyright (C) Microsoft Corporation.  All rights reserved. 
1>Linking... 
1>LINK : fatal error LNK1104: cannot open file 'imqb23vn.Lib;imqc23vn.Lib' 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:20:27.590

*注意*：将答案从评论移到正确的帖子

问题是链接器正在寻找一个名为: 的文件`imqb23vn.Lib;imqc23vn.Lib`，而不是两个文件，名为`imqb23vn.Lib`and`imqc23vn.Lib`

显然，需要在 VS2008 中列出库的方式与在 VS2010 中的方式不同。您需要在 VS2008 中用空格分隔 .lib 文件，而`;`在 VS2010 中用分号 ( ) 分隔它们。

# perl - Perl 电子邮件从选项更改

> ID：10633895
> 
> 赞同：1
> 
> 时间：2012-05-17T10:23:23.600
> 
> 标签：perl, email

我正在使用 perl 从服务器生成任何网络事件的邮件。

该代码的一部分是：

```
use Mail::Send;
$email->set('From', 'Mahesh Gohil'); 
```

并基于此代码生成电子邮件，如下所示：

```
Mahesh.Gohil@nsetools.controlnet.equant.net 
```

在这里添加“。” 我的名字和姓氏之间的点。

我想从地址类似

```
Mahesh Gohil@nsetools.controlnet.equant.net
      ^- There is space between first and last name. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:38:07.457

您不能拥有包含空格字符（[RFC2821 和 RFC2822](http://www.remote.org/jochen/mail/info/chars.html)）的邮件地址。

我认为你看到的发件人地址是发件人的地址，与你设置的属性无关......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:51:20.060

电子邮件地址本身不能包含空格。

但是，电子邮件地址的解释取决于您使用的 SMTP 服务器，并且可能因系统而异。根据[RCF2822](http://www.ietf.org/rfc/rfc2822.txt)第 3.4 节，您可以尝试以下操作：

```
First Last <email@address.com> 
```

作为电子邮件地址。而且，您的 SMTP 应该明白这一点。但是，您可能无法使用`Mail::Send`. 尝试使用[Net::SMTP](http://perldoc.perl.org/Net/SMTP.html)。这个模块带有标准的 Perl 发行版，并直接与 SMTP 服务器对话。`Net::SMTP`您必须比 with更好地理解邮件标题，但如果没有`Mail::Send`，它应该可以工作。`Mail::Send`

# ruby-on-rails - Rails 3.1 - 没有acts_as_list的拖放重新排序？

> ID：10633899
> 
> 赞同：1
> 
> 时间：2012-05-17T10:23:40.180
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, acts-as-list

我想在我的应用程序中允许拖放重新排序功能。我知道我可以使用acts_as_list 来做到这一点，并且已经遵循了Rails 食谱。但是，由于我的应用程序的构建方式，我想要重新排序的项目不能使用acts_as_list，因为它从另一个模型中的嵌套项目继承了它的位置字段。当我使用acts_as_list时，这似乎覆盖了位置值，这意味着父模型中设置的顺序丢失，子位置是随机的。

所以我想我有两个问题：

我可以在没有 Acts_As_List 的情况下构建 Ajax 样式的拖放重新排序工具吗？

或者

我可以在模型中添加某种 if 语句以在创建时禁用acts_as_list 但在所有其他时间启用？类似的东西（英文而不是代码）：

```
if method = create
  child.position = parent.position
else
  acts_as_list
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:32:40.890

[排名模型](https://github.com/mixonic/ranked-model)是一个选项。示例用法：

```
class Duck < ActiveRecord::Base

  include RankedModel
  ranks :row_order

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:23:50.123

我很确定 jquery UI 有某种插件/模块，无论他们称之为什么，比如[可拖动和可排序，](http://jqueryui.com/demos/draggable/#sortable)那么也许他们有一个成功的方法，你可以使用 ajax 来记录它的位置，这样如果用户在保存之前刷新，它保存它在“列表”中的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:31:58.643

您可以重写在acts_as_list 中调用的before_save 函数：

```
class Duck < ActiveRecord::Base

  private

  def add_to_list_bottom
    # leave blank to override default acts_as_list before_save function
  end

end 
```

# android - Facebook 对话框失败并停止活动

> ID：10633900
> 
> 赞同：1
> 
> 时间：2012-05-17T10:23:45.377
> 
> 标签：android, facebook-android-sdk, native-activity

我在 Android 上使用 Facebook SDK 来发布对用户提要的更新。当我没有安装 Facebook 客户端时，我能够让它工作。现在，即使在删除 Facebook 应用程序之后，当我尝试授权或打开提要对话框时，活动也会被突然终止。

我没有收到任何消息告诉我应用程序已崩溃或发生任何事情。它只是被摧毁了。唯一的消息是 Mono 告诉我线程 0x0 已过早完成，这很奇怪。此外，还有一个奇怪的“在这种情况下不支持”。来自网络核心的消息。

我正在使用 NativeActivity 类。我不直接使用它，但我在我的活动中扩展它。这是出现问题的地方的logcat：

```
I/PixelWorldEngine( 6796): Authorizing for Facebook...

D/Database( 6796): dbopen(): path = /data/data/com.ri.BubblingUpLite/databases/webview.db, flag = 6, cannot stat file, error message: No such file or directory

D/Database( 6796): dbopen(): path = /data/data/com.ri.BubblingUpLite/databases/webview.db, mode: delete, disk free size: 35 M, handle: 0x801450

D/Database( 6796): dbopen(): path = /data/data/com.ri.BubblingUpLite/databases/webviewCache.db, flag = 6, cannot stat file, error message: No such file or directory

D/Database( 6796): dbopen(): path = /data/data/com.ri.BubblingUpLite/databases/webviewCache.db, mode: delete, disk free size: 35 M, handle: 0x7ff128

D/skia    ( 6796): htcFlashPlugin::htcFlashPlugin

W/webcore ( 6796): Not supported in this case.

I/PixelWorld-glue( 6796): WindowFocusChanged: 0x333288 -- 0

D/SensorService(  120): disable: connection.get() = 0x9f5c20

D/SensorService(  120): disable: get sensor name = BMA150 3-axis Accelerometer

D/SensorService(  120): SensorDevice::activate: handle = 0x0, enabled = 0x0

D/Sensors (  120): Enable akm: en = 0

D/SensorService(  120): noteStopSensor: uid = 0x274d, handle = 0x0

D/SensorService(  120): pid=6796, uid=10061

D/SensorService(  120): Active sensors:

D/SensorService(  120): CM3602 Light sensor (handle=0x00000004, connections=1)

W/webcore ( 6796): Not supported in this case.

W/mono    ( 6796): Thread 0x0 may have been prematurely finalized

D/SensorGUI(  120): ~SensorChannel: mSendFd = 255, mReceiveFd = -1

D/AudioPolicyService(   72): stopOutput() tid 2223

D/AudioPolicyService(   72): releaseOutput() tid 2223

D/AudioPolicyService(   72): releaseOutput() tid 2223

I/ActivityManager(  120): Process com.ri.BubblingUpLite (pid 6796) has died.

I/WindowManager(  120): WIN DEATH: Window{407e9548 com.ri.BubblingUpLite/com.ri.PixelWorldEngine.GameActivity paused=false} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T19:00:26.703

我认为这是一个似乎出现在 HTC 设备上的 Android 错误。请参阅[http://code.google.com/p/android/issues/detail?id=33612](http://code.google.com/p/android/issues/detail?id=33612)

# php - 用户资料和文件上传

> ID：10633908
> 
> 赞同：0
> 
> 时间：2012-05-17T10:24:14.570
> 
> 标签：php, sql

我刚刚创建了一个个人资料网站，让每个注册用户都可以输入他们自己的个人资料。当时它显示电子邮件和用户名。

我还创建了一个文件上传器，它将文件名保存在 SQL 表中并将文件保存到文件夹中，还有一个文件列表，因此您可以查看已上传的每个文件以及再次下载它的选项。

现在我想以某种方式连接这两个东西，所以当您登录到您的用户配置文件时，您将能够将文件上传到文件夹并直接在您的配置文件中显示它们。但当然是您上传的唯一内容，而不是来自每个用户。

我敢打赌有一种方法可以做到这一点，但由于我是新手，我真的不知道如何开始。因此，如果有人有一些提示，或者互联网上某处的方法，我会是一个快乐的菜鸟:)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:27:50.760

只需在文件的 sql 表中添加用户 ID 字段。每次用户上传他们的文件时，他们的 id 都会存储在这个表中。当用户登录时，您应该只选择具有此用户 ID 的文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:29:14.983

在你的 sql 表中创建一个字段 user_id。

存储会话中登录用户的 user_id 或您用于登录的任何内容。

之后，选择具有登录用户 ID 的文件的所有字段以显示在配置文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T10:30:07.217

组织您的文件系统，如：

```
uploads/
  files/
    %user_name% or %user_id% (some unique identifier linked to the current user)/ 
```

这样，您将始终能够显示仅由该用户上传的文件。

# c++ - 从文件 C++ 中删除记录

> ID：10633913
> 
> 赞同：1
> 
> 时间：2012-05-17T10:24:28.057
> 
> 标签：c++, file-io, record, file-pointer, delete-record

我正在使用 C++ 开发一个简单的数据库控制台应用程序，用于在 .dat 文件中添加、编辑和删除记录。我已经添加和修改了，我只是发现在这种情况下很难理解删除的概念。下面是我写记录的方法。

写记录

```
fh.seekp(num*sizeof(customerObj),ios::beg); // Move the write pointer to where rec is
fh.write((char*)&customerObj,sizeof(customerObj)); // Write updated rec 
```

任何想法，而不是`write()`我可以有等同于`delete()`...的东西还是不是那么简单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:27:57.657

引入删除记录的标记。因此，您需要写入 1 个符号，而不是移动大块文件。当您需要分配新记录时，您可以遍历已删除的并删除标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:31:28.240

C 和 C++ 没有删除部分文件的功能。许多操作系统也没有。

可能的选项：

1.  如果这是最后一条记录，则截断文件。如果没有，则移动（=复制）其后的所有记录，覆盖它，然后截断。或者，您可以将最后一条记录移动（=复制）到它，然后截断。

2.  创建一个额外的文件并将此记录之前和之后的所有记录复制到其中。然后删除旧文件并重命名新文件。

3.  将记录标记为未使用。编写新记录时，请检查您是否有任何未使用的位置并首先使用它们。

4.  每条记录使用一个文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T10:28:45.937

好吧，从文件中删除并非易事，因为您不能直接从文件中删除一行。一种方法是读取整个文件（或批量）并在没有所需行的情况下将其写回。（对于大文件非常健壮且效率不高）。

也许如果你将你的记录文件分成更小的分区文件，那么上面的操作会更有效率。

您可以做的另一件事是将文件中的一行标记为无效（就像删除指针时在内存中所做的那样）并在需要时覆盖它，这当然取决于您如何编写记录，但我希望您明白我的意思。

# python - GAE Python：如何获取用户名和附加信息？

> ID：10633918
> 
> 赞同：1
> 
> 时间：2012-05-17T10:24:42.880
> 
> 标签：python, google-app-engine

我有一个关于 GAE Python 的用户 api 的问题。

对于现有用户群的新应用程序，我想为用户获取两个信息。第一个是名称，第二个是标志（例如 0,1 或 2）。

这是一个内部应用程序，只有来自同一域的人才能登录。[除了用户参考](https://developers.google.com/appengine/docs/python/users/userclass)之外，我如何访问他们的信息？我怎么能设置那个额外的标志？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T15:36:06.177

从`User`课程中您可能只获得它提供的信息，您必须使用某种“帐户”页面直接从用户那里获取其他所有信息，他们可以在其中输入他们的姓名和/或更改标志的值。

该信息可以作为单独的实体保存在数据库中`UserData`，最好与用户一起保存`email`或`user_id`从`User`班级接收。类似于以下内容：

```
class UserData(db.Model) :
    user = db.UserProperty()
    name = db.StringProperty()
    flag = db.IntegerProperty() 
```

# javascript - Strophe.js 服务器即使对于当前正在积极聊天的用户也会发送不可用状态

> ID：10633919
> 
> 赞同：1
> 
> 时间：2012-05-17T10:24:43.083
> 
> 标签：javascript, strophe

我最近遇到了 Strophe.js 应用程序的另一个问题：即使我正在与用户 B 积极聊天（根据规范发送正确的 xml，包括 <active> 和内容）**，但服务器会通知用户 B 我变得不可用**。

目前逻辑如下所示：

*   连接
*   发送初始存在节
*   需要时更新状态（离开/dnd）
*   每 10 秒开始 ping 服务器
*   用户现在可以聊天

执行 Ping 是为了确保服务器不会崩溃，这是众所周知且广泛使用的技术（使用 <iq...>）。

用户发送的每条消息如下所示：

```
<message from="me@server.ltd" to="friend@server.ltd" type="chat" id="randomID" xmlns="jabber:client">
    <active xmlns="http://jabber.org/protocol/chatstates" />
    <body>Text</body>
</message> 
```

你知道这个问题以及任何可能的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:47:16.770

这个问题可以通过使用 Strophe.roster 插件来解决。该问题与当用户重新登录到服务器时创建了新会话这一事实有关。一段时间后（据说是 60 秒），旧会话过期，服务器广播用户离开的信息。

该解决方案需要存储每个联系人在登录时创建的资源，并在用户离开时将其删除。当且仅当没有更多资源时，才能假定用户处于离线状态。

我还在 Strophe.roster 中添加了新功能，例如：

```
isOnline: function (jid) {
    var item = this.findItem(jid);
    if (!item || !item.resources) {
        return false;
    } else {
        for (var k in item.resources) {
            return true;
        }
        return false;
    }
} 
```

# string - 逗号分隔值的格式单元格

> ID：10633921
> 
> 赞同：2
> 
> 时间：2012-05-17T10:24:55.997
> 
> 标签：string, excel, vba

编写了一个输出数字的 VBA 脚本，我认为我有正确的千位分隔格式字符串（4,656,565 5,343 232,434 等），但它不适用于特定数量的数字。

到目前为止，我正在使用`Cells(x,y).NumberFormat = "#,###"`

有人可以为我提供正确的格式字符串来以千位逗号分隔任何数字，无论大小如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T10:43:33.427

这对我有用。请注意，先格式化单元格，然后再为其分配数字

```
Option Explicit

Sub Sample()
    With Cells(1, 1)
        .NumberFormat = "#,##0"
        .Value = 4.65656553432324E+16 '46565655343232400
    End With
End Sub 
```

**结果**

单元格 A1 有`46,565,655,343,232,400`

# text - VB6 文本在一个 EXE 中显示为乱码，但在另一个 EXE 中显示为希伯来语

> ID：10633924
> 
> 赞同：1
> 
> 时间：2012-05-17T10:25:05.997
> 
> 标签：text, encoding, localization, vb6, internationalization

我对VB6有奇怪的问题和最少的知识，

我有一个 EXE 文件，它从文本文件中获取文本（用于按钮标题）。
这个我没有代码的 EXE 正确地显示了所有希伯来语文本。

我已经构建了另一个 EXE 文件（与前一个相同）并且所有功能都可以正常工作，但它将所有希伯来语都呈现为胡言乱语！

我的文本文件编码是 Unicode。

你能帮助我吗？vb6 exe有编码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:35:40.987

解决此问题的完美解决方案是将 font.Charset 更改为代表 HEBREW_CHARSET 的 177。
例如：

```
Text1.Font.Charset = 177 
```

[http://www.example-code.com/vb/vb6-display-unicode.asp](http://www.example-code.com/vb/vb6-display-unicode.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:13:42.253

默认的 VB 窗体/控件字体不支持所有“外来”字符。
如果您在运行时将字体设置为“MS Shell Dlg”，则 Windows 会将其转换为应处理大多数语言的 Windows 版本的默认 UI 字体。

您还需要检查文件的编码。如果是 UTF-8 或特定代码页，则需要`MultibyteToWidechar()`在阅读后使用该函数转换为 UTF-16 以便在 VB 中使用。

# asp.net - 向asp.net中的页面发送警报

> ID：10633927
> 
> 赞同：0
> 
> 时间：2012-05-17T10:25:16.110
> 
> 标签：asp.net

我正在开发 Web 应用程序，在我的项目中，有一些类型的测试和任务分配给员工。

现在，当员工完成一项任务并分配给用户时，用户会自动在他的页面上收到消息（有 3 个用户访问应用程序，一个是管理员，第二个是测试员，第三个是验证员......他们都在不同的页面上工作，现在当管理员分配任务时，测试人员会自动收到通知“新消息”（为此我正在使用母版页）..在测试人员正在工作的任何页面上......现在如果测试人员完成了它的任务并且分配给验证者，验证者必须收到通知“新消息”......等等......）

为此，我在母版页上放了一个按钮..而且我制作了一个每分钟运行的 Windows 服务，现在我的问题是我如何将消息从 Windows 服务发送到我的母版页按钮（我更改按钮的文本）。

这个想法有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:54:48.433

我认为不可能从 Windows 服务信息发送到 asp.page。您可以创建一个按钮来查询有关新任务的 Web 服务（但您指望用户按下它）。

另一种更“友好”的方式是在 javascript 中有一个计时器，它使用 ajax 请求来获取新任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:49:45.780

为什么需要窗口服务在后台运行？是否有任何特定理由为这些要求提供 Windows 服务？

根据您的详细描述，我的理解是，当员工完成任务并分配给用户时，用户会自动在他的页面上收到消息。因此，当员工正在工作并完成时，意味着他们将单击某个按钮，表明他们的工作已完成。然后在单击按钮的同时，您只需编写将邮件发送给测试人员的代码。就像同样的方式，当测试人员完成他们的工作并单击测试完成时，向审阅者发送邮件等等..那么需要有一个窗口服务来发送邮件吗？

所有的要求都可以通过简单的发送邮件代码来实现。如果您需要更多帮助，或者您不了解确切的场景或需求中是否缺少任何内容，请告诉我们。

希望对您有所帮助。

# java - EMC Documentum：获取以前版本的 IDfSysObject

> ID：10633928
> 
> 赞同：2
> 
> 时间：2012-05-17T10:25:18.997
> 
> 标签：java, documentum, dfc

如果我们使用`IDfId checkin(boolean keepLock, String versionLabels) throws DfException`方法，我们会得到新版本的`IDfSysObject`. 如何删除最新版本并恢复到以前的版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:43:33.953

要恢复到以前的主要版本，您需要执行以下操作：

1.  获取任何以前的主要版本的对象您需要将当前作为 IDfPersistentObject。
2.  将“CURRENT”添加到 R_VERSION_LABEL 属性中的 [0] 索引
3.  保存修改后的 IDfPersistentObject

4.  使用 R_VERSION_LABEL > 获取所有 IDfPersistentObject，而不是您的新当前版本

5.  如果存在，则从 R_VERSION_LABEL 中的 [0] 索引中删除“CURRENT”。
6.  保存 IDfPersistentObject
7.  调用 IDfPersistentObject.destroy()。它不会失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:57:45.303

如果您希望保持最新，则可以查看最新版本，`ByteArrayOutputStream`使用`getContent()`方法读取先前版本的内容并将该内容设置为最新版本，使用`setContent()`.

或者，如果您不希望保留最新版本，您可以使用`IDfPersistentObject.destroy()`对象的方法来删除唯一的最新版本，以便以前的版本成为当前版本。

# ios - CrashData 报告和反馈用户ios App，使用服务器

> ID：10633929
> 
> 赞同：1
> 
> 时间：2012-05-17T10:25:24.613
> 
> 标签：ios, webserver, hosting

我想在我的 iOS 应用程序中集成一个自动向我发送崩溃日志的 CrashData 报告，以及让用户联系我的请求、问题或建议的反馈表，我在网上找到了很多服务，但是大多数是支付服务，例如：

[http://www.crittercism.com/](http://www.crittercism.com/)

[http://www.bugsense.com/](http://www.bugsense.com/)

[http://www.hockeyapp.net/](http://www.hockeyapp.net/)

或反馈：

[http://www.uservoice.com/](http://www.uservoice.com/)

我还看到有一个用于 crashdata 的开源代码：

[http://quincykit.net/](http://quincykit.net/)

所以也许最好的解决方案是创建我的服务器来托管 quinckykit，并直接在服务器上接收用户反馈，所以我的问题是，如何实现这一点，我采用什么类型的服务器或虚拟主机？...你建议什么主机我，或者一些教程，我从来没有做过......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-25T08:17:15.450

您应该检查 Instabug ( [http://instabug.com](http://instabug.com) )，它非常专门地提供反馈报告，体验流畅。

它显示了一个屏幕截图，供用户在文本字段之外绘制以输入反馈。它还捕获了所需的所有设备详细信息。

您可以根据需要自定义它。

PS。我在 Instabug 工作。因此，如果您需要任何帮助，请告诉我。顺便说一句，它是免费的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:01:35.347

QuincyKit 包含接收崩溃报告和使用它们所需的一切。托管解决方案 HockeyApp 使用相同的开源 SDK 并提供更多高级功能。如果您不熟悉服务器托管 php 和 MySQL，我建议您使用托管解决方案而不是开源服务器组件。还必须在您的 Mac 上完成崩溃符号，例如 HockeyApp 会自动为您完成。

QuincyKit GitHub 存储库包含您需要的所有信息。

用户反馈不是 QuincyKit 或 HockeyApp 的一部分。我认为 Crittercism 提供了一些独立于崩溃报告的用户反馈功能。我不知道 UserVoice 是否提供任何可以集成到 iOS 应用程序中的东西。

# c# - 是否可以使用 HTML5 访问 WPF 应用程序中的函数？

> ID：10633933
> 
> 赞同：0
> 
> 时间：2012-05-17T10:25:31.193
> 
> 标签：c#, wpf, html

我还是个菜鸟，所以我真的需要帮助。是否可以使用 HTML5 访问 WPF 应用程序中的功能？

所以基本上我有一个 WPF 应用程序在同一台服务器上运行，它有一个打印功能。我想为此添加一个 html 层，以便可以通过 html 层执行该函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T07:53:27.507

HTML5 Websockets 和 Canvas
借助 HTML5 中的 Websockets，我们正在超越单向、无状态的 http，成为服务器和客户端之间的全双工、高速连接基础设施。- 查看更多信息：[http ://www.amazedsaint.com/2011/04/wpf-over-web-sockets-how-to-pump-wpf.html#sthash.vNEk0h8M.dpuf](http://www.amazedsaint.com/2011/04/wpf-over-web-sockets-how-to-pump-wpf.html#sthash.vNEk0h8M.dpuf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T06:02:40.080

我想我已经找到了解决我困境的方法，看看这个[网站](http://www.amazedsaint.com/2011/04/wpf-over-web-sockets-how-to-pump-wpf.html)

HTML5 Websockets And Canvas 是他使用的并给出了很好的解释。希望大家觉得有用

# iphone - 在我的应用程序中实现 Foursquare

> ID：10633934
> 
> 赞同：2
> 
> 时间：2012-05-17T10:25:40.810
> 
> 标签：iphone

如何在我的应用程序中实现foursquare。我尝试了一些示例应用程序，但我不知道该怎么做。任何人都可以指导我。

谢谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:52:37.627

[https://github.com/Constantine-Fry/Foursquare-API-v2/tree/master/Foursquare2-iOS](https://github.com/Constantine-Fry/Foursquare-API-v2/tree/master/Foursquare2-iOS)

下载此项目并将 Foursquare2 文件夹拖到您的项目和 json 解析器中。

这是我为获得附近的地方所做的事情。

```
 [Foursquare2 searchVenuesNearByLatitude:lat_String 
                              longitude:log_String 
                                 accuracyLL:nil 
                                   altitude:nil 
                                accuracyAlt:nil 
                                      query:searchString
                                      limit:@"10" 
                                     intent:@"browse" 
                                 categoryId:nil
                                     Radius:radius
                                   callback:^(BOOL     success,id result){
                                       if (success) {
                                          //     NSLog(@"Result : %@",result);
                                           [self     parseplacesForSearch:result];
                                       }
                                       else {
                                               UIAlertView *alertView = [[UIAlertView alloc]initWithTitle:@"Message" 
                                                                                                  message:@"Sorry!! their is no places around your location" 
                                                                                                 delegate:nil 
                                                                                    cancelButtonTitle:@"OK" 
                                                                                    otherButtonTitles:nil ];
                                           [alertView show];
                                           [alertView release];
                                       }

                                   }]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:36:11.500

以下是github上提供的示例应用程序...

1.  [anoopr / 核心数据谈话](https://github.com/anoopr/core-data-talk/tree/master/example)
2.  [Constantine-Fry / Foursquare-API-v2](https://github.com/Constantine-Fry/Foursquare-API-v2)

# perl - 如何找到在 perl 中接收到的信号？

> ID：10633936
> 
> 赞同：6
> 
> 时间：2012-05-17T10:25:44.990
> 
> 标签：perl, signals

我写了一个简单的程序来处理一些信号。我的计划是，

```
#!/usr/bin/perl

use strict;
use warnings;

$SIG{INT} = $SIG{TERM} = $SIG{HUP} = \&signal_handler;

sub signal_handler
{

print " ".localtime()." Handled the signal\n";

};

while(1)
{
  sleep(1);
} 
```

哈希中指定了哪些信号`%SIG`，对应的信号处理程序将在接收信号时调用。我为三个信号声明了一个信号处理程序。

我想找出接收到的信号。

在`C`中，它将由信号处理程序参数本身给出信号编号。

例子，

```
 void sig_handler(int signo); 
```

我不知道 perl。我试图找到它。但是，我没有找到任何答案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T10:36:32.487

信号名称（INT、TERM 等）作为参数传递给信号处理程序。你可以写例如：

```
sub signal_handler
{
    my $signal = shift;
    print " ".localtime()." Handled the signal $signal\n";
} 
```

# iphone - 目标 c 中的测试

> ID：10633937
> 
> 赞同：2
> 
> 时间：2012-05-17T10:25:46.900
> 
> 标签：iphone, objective-c, ios

我有一个名为 CarouselWithXmlTests 的单元测试类。我有一个测试用例。如果我每次输入测试用例失败或测试用例成功的数据，它都会抛出 0 个测试用例已测试的消息。我有以下代码有什么遗漏吗？

```
-(void)checkTheArrayForNull
{
    viewController.temp=@"c";
    viewController.buttonCount=1;
    [viewController goButton:self];
    STAssertNotNil(viewController.setUpArray,@"set up Array is not nil");

} 
```

并在 o/p 中有以下消息：

```
Test Suite 'CarouselWithXmlTests' started at 2012-05-17 10:23:55 +0000
Test Suite 'CarouselWithXmlTests' finished at 2012-05-17 10:23:55 +0000.
 Executed 0 tests, with 0 failures (0 unexpected) in 0.000 (0.000) seconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:36:10.683

更改您的方法名称，它必须`test`以作为测试用例运行

```
-(void)testCheckTheArrayForNull
{
    viewController.temp=@"c";
    viewController.buttonCount=1;
    [viewController goButton:self];
    STAssertNotNil(viewController.setUpArray,@"set up Array is not nil");

} 
```

# google-maps - 如何更改在运行时创建的标记位置（Google Maps v3）

> ID：10633938
> 
> 赞同：1
> 
> 时间：2012-05-17T10:25:47.237
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我必须在运行时在谷歌地图上创建几个标记。

它们的初始位置是随机定义的。

创建它们后，如何更改其中一些的位置？新位置也是随机定义的。

我确实尝试过

```
marker1.setPosition(pt); 
```

...但是，我遇到了错误

```
marker1 is not defined 
```

我想这个问题是在创建地图的那一刻没有定义marker1......类似的东西。

你能帮我解决这个问题吗？

ps 创建的标记数量没有限制。

**更新**标记是通过以下方式创建的：

```
function addNewMarker( locationsTotal ) {

if (document.getElementById("lon1").value == '') document.getElementById("lon1").value = '19';
if (document.getElementById("lat1").value == '') document.getElementById("lat1").value = '45';

var parliament = (map.getCenter());

var newMarker = 'marker' + locationsTotal;
newMarker = new google.maps.Marker({
  name:newMarker,
  id:newMarker,
  map:map,
  draggable:true,
  animation: google.maps.Animation.DROP,
  position: parliament, 
  icon: 'img/pin.png'
});

google.maps.event.addListener(newMarker, "dragend", function() {
  var center = newMarker.getPosition();
  var latitude = center.lat();
  var longitude = center.lng();
  var newLon = 'lon' + locationsTotal;
  var newLat = 'lat' + locationsTotal;
  document.getElementById(newLon).value = longitude;
  document.getElementById(newLat).value = latitude;
});

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:37:02.817

如您所见`newMarker`，仅在`addNewMarker`功能范围内可见。您需要将标记存储在全局范围内可见的数组中。例如：修改你的功能：

```
var allMarkers = [];
function addNewMarker( locationsTotal ) {
   //.... skip
  allMarkers.push(newMarker);
} 
```

您的所有标记现在都存储在一个数组中，以便您可以操作它们。

要按名称添加功能访问标记：

```
function getMarker(name) {
  for (k in allMarkers)
     if (allMarkers[k].name == name) return allMarkers[k];
  return null;
} 
```

# javascript - 旋转时计算 div 的右上角偏移量

> ID：10633939
> 
> 赞同：0
> 
> 时间：2012-05-17T10:25:49.757
> 
> 标签：javascript, jquery

我想计算 div 的右上角位置，我可以计算它，如果它没有旋转：

```
 $("div").offset().top + $("div").width(); 
```

但是当我们旋转时`div`，我们如何计算右上角的位置？

旋转代码：

```
$("div").slider({ 
   slide: function(e,u){ 
      $(this).rotate({ angle : u.value});  
   }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:31:02.867

use this in your javascript

```
function getPosition(obj){
    var topValue= 0,leftValue= 0;
    while(obj){
    leftValue+= obj.offsetLeft;
    topValue+= obj.offsetTop;
    obj= obj.offsetParent;
    }
    finalvalue = leftValue + "," + topValue;
    return finalvalue;

}

var d = document.getElementById('divname');
getPosition(d); 
```

Then try this,it use .position() function in jquery use this

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script>
var p = $("div");
var position = p.position();
$("div").text( "Right: " + position.right + ", top: " + position.top );
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T15:41:09.797

你可以试试这个：

**JavaScript**

```
$(".slider").slider({
    min: 0,
    max: 180,
   slide: function(e,u){ 
      $(this).rotate({ angle : u.value});
       calculateTopLeft(u.value);
   }
});

var pointer = $('.pointer');
var slider = $('.slider');
var center = { top: slider.offset().top, left: slider.offset().left + slider.width() / 2 };
var offset = slider.offset();

function calculateTopLeft(angle) {
    var radius = slider.width() / 2,
        radians = (angle * Math.PI) / 180;
    pointer.css({
        left: center.left + radius * Math.cos(radians),
        top: center.top + radius * Math.sin(radians)
    });
}
//Equation of the circle
//x = a + r * cos(t);
//y = b + r * sin(t);​ 
```

这是一个例子：http: [//jsfiddle.net/zFRwM/2/](http://jsfiddle.net/zFRwM/2/)

可能您需要稍作修正，但我认为这个想法很明确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T15:14:32.717

删除变换，检索偏移量，将变换放回去：

```
$.fn.offsetNoTransform = function(e)
{
    var m = this.css('transform');
    this.css('transform', '');
    var off = this.offset();
    this.css('transform', m);
    return off;
} 
```

# c# - C#中的表单keydown

> ID：10633943
> 
> 赞同：0
> 
> 时间：2012-05-17T10:26:08.367
> 
> 标签：c#, winforms

我使用这些代码在用户按下按钮时通知他们，并在消息框中向他们显示您按下了按钮。在winform中我有一个按钮，所以这些代码在我将button1 tabstop更改为false之前不会工作。当我点击按钮之后，它不会告诉用户他们正在按下按钮。

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
{
   if (e.KeyCode == Keys.A)
   {
      MessageBox.Show("You have pressed A");
   }
} 
```

在我将按钮的 tabstop 更改为 false 之前，这些代码将不起作用。帮助我如何做到这一点，并让用户知道他们何时按下按钮。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:28:49.510

Set the KeyPreview property of form to true from designer. It will work

# c# - 将空值转换为某物？

> ID：10633946
> 
> 赞同：5
> 
> 时间：2012-05-17T10:26:12.163
> 
> 标签：c#, .net, casting, nullable, dbnull

我今天和一位同事进行了一次有趣的讨论。我们在 C# 中讨论了两段代码。

代码片段 1：

```
if(!reader.IsDBNull(2))
{
  long? variable1 = reader.GetInt64(2)
} 
```

代码片段 2：

```
long variable1 = reader.IsDBNull(2) ? (long?) null : reader.GetInt64(2) 
```

问题是：将 null 转换为可为空的 long 是否是一种好习惯？还是您宁愿使用传统的 if 语句来避免强制转换`null`为可空长。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-17T10:41:32.583

表达式`(type?)null`,`default(type?)`最终`new Nullable<type>()`被编译成相同的操作码：

```
 long? x = (long?)null;
        long? y = default(long?);
        long? z = new Nullable<long>(); 
```

变成：

```
 IL_0001: ldloca.s x
    IL_0003: initobj valuetype [mscorlib]System.Nullable`1<int64>
    IL_0009: ldloca.s y
    IL_000b: initobj valuetype [mscorlib]System.Nullable`1<int64>
    IL_0011: ldloca.s z
    IL_0013: initobj valuetype [mscorlib]System.Nullable`1<int64> 
```

换句话说，如果您使用可空类型，您可以自由使用您最喜欢的任何版本。但是请注意，您应该尽量避免使用可为空类型的算术。如果要从条件表达式中返回一个可为空的值，则如果其中一个可能为空，则这两个可能的结果都必须可为空。在这种情况下，任何其他方式都可能导致异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T10:30:54.123

Instead of

```
(long?) null 
```

use

```
default(long?) 
```

I would refactor above code like

```
long? variable1 = reader.IsDBNull(2) ? default(long?) : reader.GetInt64(2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T10:29:18.450

I prefer not to cast `null` value (it looks odd to me):

```
long? variable1 = reader.IsDBNull(2) ? null : (long?)reader.GetInt64(2); 
```

Another options:

```
long? variable1 = reader.IsDBNull(2) ? default : reader.GetInt64(2); // requires C# 7.1
long? variable1 = reader.IsDBNull(2) ? default(long?) : reader.GetInt64(2);
long? variable1 = reader.IsDBNull(2) ? (long?)null : reader.GetInt64(2);
long? variable1 = reader.IsDBNull(2) ? new Nullable<long>() : reader.GetInt64(2);
long? variable1 = reader.IsDBNull(2) ? new long?() : reader.GetInt64(2);
long? variable1 = reader.IsDBNull(2) ? null : new long?(reader.GetInt64(2)); 
```

It's just the matter of taste. I think first option is more readable, than others.

UPDATE: Consider also writing some extension methods to make your code more clear:

```
public static class DataReaderExtensions
{
    public static long? GetNullableInt64(this IDataReader reader, int index)
    {
        if (reader.IsDBNull(index))
            return null;

        return reader.GetInt64(index);
    }
} 
```

In this case you don't use ternary operator (no casting to nullable), and reading values from reader looks more pretty:

```
long? variable1 = reader.GetNullableInt64(2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T10:30:27.680

Snippet 2 is worth in my case, as in case of `null` you're gonna get `0`, which is a completely valid value for `long`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-20T13:00:06.830

在 C# 7.1 中，您可以使用[更简洁的`default`文字](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/statements-expressions-operators/default-value-expressions#default-literal-and-type-inference)：

```
var variable1 = reader.IsDBNull(2) ? default : reader.GetInt64(2); 
```

# .net - 如何使会话变量持续时间比登录时间长

> ID：10633950
> 
> 赞同：1
> 
> 时间：2012-05-17T10:26:27.310
> 
> 标签：.net, session

我的 web.config 中有这个：

```
<sessionState timeout="70"/> 
```

和：

```
<authentication mode="Forms">
  <forms loginUrl="~/Index" timeout="60" />
</authentication> 
```

我也有这个：

```
Session.Timeout = 70; 
```

所以，一个小时左右后，用户仍然登录，但会话为空，我的程序崩溃了。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:31:27.480

**You have to put a check if your session is null then redirect to login page.**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:01:53.360

Actually the code in the question is correct. However, everytime I rebuild my code, the session was lost. That was the problem.

# iphone - 在 iOS4.3 和 iOS 5 的 phonegap 中暂停和恢复监听器

> ID：10633954
> 
> 赞同：4
> 
> 时间：2012-05-17T10:26:46.377
> 
> 标签：iphone, ios, cordova

我正在使用 iOS 4.3 在 iPhone4 中制作本机应用程序

在我的身体 onLoad 我添加

```
document.addEventListener("pause", Game.prototype.pauseListener.bind(this), false);
document.addEventListener("resume", Game.prototype.resumeListener.bind(this), false); 
```

在同一个文件中我正在编写一个函数

```
Game.prototype.resumeListener= function()
{

    console.log("in resumeListener");
    this.PauseGame(false);
}

Game.prototype.pauseListener= function()
{
        this.PauseGame(true);

} 
```

此代码在 Android 中运行良好，当我手动最小化应用程序时，但当应用程序被语音来电中断时，应用程序不会暂停。

基本上暂停和恢复事件不会被触发。

我正在使用 Phonegap1.4.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:11:24.243

我相信您的事件侦听器没有建立，因为您正在使用`Object.bind()`处理函数，并且`.bind()`在 iOS WebKit 小部件中不可用。（这很令人惊讶，因为在桌面 WebKit（Chrome 和 Safari）版本`.bind()` **中可用。）**

简单的解决方案是为 Object.bind() 添加一个 polyfill 定义。我使用[MDN 绑定文档页面](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)中的那个，并且没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T07:39:05.673

您需要在 deviceready 而不是 onLoad 中添加您的侦听器。就像这里一样

```
function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady() {
    document.addEventListener("pause", onPause, false);
}

function onPause() {
} 
```

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T20:15:42.343

抱歉，我还不能发表评论；）

您是否检查了其他两个事件（仅适用于 ios 的活动和辞职）？更多信息：[http ://shazronatadobe.wordpress.com/2012/03/14/apache-cordova-lifecycle-events-in-ios-4-versus-ios-5/](http://shazronatadobe.wordpress.com/2012/03/14/apache-cordova-lifecycle-events-in-ios-4-versus-ios-5/)

或查看文档中的 iOS Quirks：http: [//docs.phonegap.com/en/1.6.1/cordova_events_events.md.html#pause](http://docs.phonegap.com/en/1.6.1/cordova_events_events.md.html#pause)

# iphone - 在 UITextView 上选择 UITableViewCell 失去调用 didSelectRowAtIndexPath 委托方法的能力？

> ID：10633955
> 
> 赞同：6
> 
> 时间：2012-05-17T10:26:53.690
> 
> 标签：iphone, ios, uitableview, uitextview

我的`UITableViewCell`选择有问题。我正在使用 `UITableViewCell`带有`UITextView`子视图的 a。在启用用户交互的情况下，该`UITextView`对象不可编辑、不可滚动。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *CellIdentifier = @"Cell";    
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {      
        cell=[[[NSBundle mainBundle]loadNibNamed:@"DemoCell" owner:self options:nil]objectAtIndex:0];         
        cell. accessoryType=UITableViewCellAccessoryDisclosureIndicator;
    }
      if([distanceArray count]){ 
        UILabel *label1=(UILabel*)[cell viewWithTag:1];      
        label1.text=[locationNameArray objectAtIndex:[indexPath section]];
        label1.textColor=[UIColor blueColor];
        UILabel *label2=(UILabel*)[cell viewWithTag:2];        
        [label2 setText:[distanceArray objectAtIndex:[indexPath section]]];
        UITextView *tview=(UITextView*)[cell viewWithTag:3];   
        [tview setText:[discriptionArray objectAtIndex:[indexPath section]]];         
        return cell;
      }
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    DetailedLocationVIew *dView=[[DetailedLocationVIew alloc]initWithNibName:@"DetailedLocationVIew" bundle:nil];       
    [self.navigationController pushViewController:dView animated:YES];
    [dView release];
} 
```

如果我在 上选择单元格`UITextView`，则代表`didSelectRowIndexPath`不会打电话。除了过度`UITextView` 对象和选择工作正常吗？为什么选择不能在 UITextView 上工作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-17T12:26:31.340

使用`tview.userInteractionEnabled=NO;`它会解决你的问题。

如果这不能解决您的问题，请尝试一下

```
for(UIView * cellSubviews in cell.subviews)
{
    cellSubviews.userInteractionEnabled = NO;
} 
```

它为单元格内的所有子视图循环并将`userInteractionEnabled`属性设置为`NO`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-03T22:47:18.950

这些建议在 iOS 6 中对我不起作用。以下是起作用的。

在你的：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

添加这个：

```
cell.textView.dataDetectorTypes = UIDataDetectorTypeAll;
cell.textView.editable = NO;
cell.textView.userInteractionEnabled = YES;

UITapGestureRecognizer * tap = [[UITapGestureRecognizer alloc] initWithTarget: self action: @selector(forwardToDidSelect:)];
cell.tag = indexPath.row;
[cell.textView addGestureRecognizer: tap]; 
```

随着：

```
- (void) forwardToDidSelect: (UITapGestureRecognizer *) tap
{
    [self tableView: self.tableView didSelectRowAtIndexPath: [NSIndexPath indexPathForRow: tap.view.tag inSection: kTextViewCellSection]];
} 
```

在设置可编辑 = NO 后，似乎有必要设置 userInteractionEnabled = YES。在 XIB 中设置这些似乎不起作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T10:45:07.923

因为 UITextView 确实捕获了触摸事件，所以您可以通过两种方式解决此问题：

1）子类UITextView，捕捉触摸事件然后将其传递给superView的相同方法使用：例如：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
[self.superview touchesEnded:touches withEvent:event];
} 
```

2）使用 UITextView 委托：

```
- (void)textViewDidBeginEditing:(UITextView *)textView
{
NSIndexPath *a = [NSIndexPath indexPathForRow:0 inSection:[textView tag]];
[tableview didSelectRowAtIndexPath:
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-02T05:01:13.287

如果只需要禁用一个子视图，可以在 Swift 中执行以下操作。

```
theSubTextView.isUserInteractionEnabled = false 
```

这也会禁用 isEditable 和 isSelectable。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-09T15:47:00.103

在我的情况下，我`tableViewCell`根据`textView.text`长度调整大小，所以我`UIView`在顶部添加了一个`textView`并将其颜色设置为`0.1%white`.

# iphone - 如何以编程方式强制 EGORefreshTableHeaderView 更新

> ID：10633956
> 
> 赞同：4
> 
> 时间：2012-05-17T10:26:55.110
> 
> 标签：iphone, objective-c, ios, uitableview, refresh

我试图强制`EGORefreshTableHeaderView`从代码更新。当我下拉一切正常并且`TableView`（根）刷新。但是我有一个模式视图，用户可以在其中订阅某些实体。当他订阅一个时，第一个（根）表视图中的 reload 方法被触发。此方法建立与服务器的连接，根据订阅加载一些特定数据，将其存储在 a 中`CoreData DB`并更新`TableView`(root)。

问题是当用户仅连接到 3G 或 Edge 网络时，在自己的线程中处理的下载可能需要几秒钟。为了向用户表明发生了什么事，我想显示`EGORefreshTableHeaderView`.

我发现我可以设置刷新视图的缩进并手动显示加载图标，但我想知道是否没有更简单的解决方案，只需在 ? 上触发委托或方法`EGORefreshTableHeaderView`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T11:03:03.943

你试过用`egoRefreshScrollViewDataSourceStartManualLoading`吗？

假设您的`EGORefreshTableHeaderView`实例名为 _refreshTableHeaderView，则调用如下：

```
[_refreshTableHeaderView egoRefreshScrollViewDataSourceStartManualLoading:self.tableView]; 
```

为我工作...

* * *

所以，我已经太久没有使用它了，我忘记了我自己应用了更改......

我修改`EGORefreshTableHeaderDelegate`（在 中声明`EGORefreshTableHeaderView.h`）以添加此附加协议：

```
- (void)egoRefreshScrollViewDataSourceStartManualLoading:(UIScrollView *)scrollView; 
```

和实现（in `EGORefreshTableHeaderView.m`）：

```
- (void)egoRefreshScrollViewDataSourceStartManualLoading:(UIScrollView *)scrollView {
    [self setState:EGOOPullRefreshLoading];

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.2];
    scrollView.contentInset = UIEdgeInsetsMake(60.0f, 0.0f, 0.0f, 0.0f);
    [UIView commitAnimations];

    if ([_delegate respondsToSelector:@selector(egoRefreshTableHeaderDidTriggerRefresh:)]) {
        [_delegate egoRefreshTableHeaderDidTriggerRefresh:self];
    }
} 
```

如果您需要更多帮助，请告诉我。

（感谢**enormego**的出色工作！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:42:34.503

感谢 Reuven 和他的代码，我对它进行了一些改进，它也可以在屏幕更大的 UIScrollView 中使用。此外，我已将不推荐使用的动画更改`commitAnimations`为阻止动画。

```
#pragma mark - Manually refresh view update
- (void)egoRefreshScrollViewDataSourceStartManualLoading:(UIScrollView *)scrollView {
    [self.refreshHeaderView setState:EGOOPullRefreshLoading];

    //animating pull down scroll view
    [UIView animateWithDuration:0.2
                     animations:^{ 
                         scrollView.contentInset = UIEdgeInsetsMake(60.0f, 0.0f, 0.0f, 0.0f); 
                         scrollView.contentOffset = CGPointMake(0, -60.0f);
                     }
     ];

    //triggering refreshview regular refresh
    if ([self.tableView.delegate respondsToSelector:@selector(egoRefreshTableHeaderDidTriggerRefresh:)]) {
        [self egoRefreshTableHeaderDidTriggerRefresh:self.refreshHeaderView];
    }
} 
```

# iphone - 将注解的标题设置为当前地址

> ID：10633957
> 
> 赞同：2
> 
> 时间：2012-05-17T10:26:57.167
> 
> 标签：iphone, ios, mkannotation, cllocation

我想获取当前位置的地址并将其设置为注释的标题。但它没有用。我认为这是因为阻塞，但我不知道如何修复它。任何帮助将不胜感激。最相关的代码如下：

**WhereAmIannotation.h**

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface WhereAmIAnnotation : NSObject <MKAnnotation>
{
CLLocation *myLocation;
NSString *addr;
}
@property (nonatomic, retain) CLLocation *myLocation;
@property (nonatomic, copy) NSString *addr;

@end 
```

**WhereAmIannotation.m**

```
#import "WhereAmIAnnotation.h"

@implementation WhereAmIAnnotation
@synthesize myLocation, addr;

- (CLLocationCoordinate2D)coordinate;
{
return self.myLocation.coordinate; 
}

- (NSString *)title
{  
return self.addr;
}
@end 
```

**MapViewController.m**

```
- (IBAction)gotoCurrentLocation{
self.mapView.showsUserLocation = YES;//a bar button linked with this action
}

- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
{    
CLLocation *currentLocation = userLocation.location;

MKCoordinateRegion newRegion; 
newRegion.center = currentLocation.coordinate;
newRegion.span.latitudeDelta = 0.02;
newRegion.span.longitudeDelta = 0.02;
[self.mapView setRegion:newRegion animated:YES];

WhereAmIAnnotation *whereAmIAnnotation = [[WhereAmIAnnotation alloc] init];
whereAmIAnnotation.myLocation = currentLocation;
whereAmIAnnotation.addr = [self addrAtLocation:currentLocation];

[self.mapView addAnnotation:whereAmIAnnotation];

self.mapView.showsUserLocation = NO;
}

- (NSString *)addrAtLocation:(CLLocation *)location{
[self.geocoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemark, NSError *error) {
    CLPlacemark *topResult = [placemark objectAtIndex:0]; 
    self.addr = [NSString stringWithFormat:@"%@ %@ %@ %@", topResult.country, topResult.locality, topResult.subLocality, topResult.thoroughfare];
}];
return self.addr;
} 
```

我应该实现这个方法

```
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id )annotation{} 
```

**对不起这个愚蠢的问题！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:29:13.477

您在异步块内修改地址时返回地址。您应该将返回移动到块内，或者创建一个协议来处理将此信息传递回调用者。

将块更改为：

```
- (void)addrAtLocation:(CLLocation *)location{
    [self.geocoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemark, NSError *error) {
        CLPlacemark *topResult = [placemark objectAtIndex:0];
        whereAmIAnnotation.addr = [NSString stringWithFormat:@"%@ %@ %@ %@", topResult.country, topResult.locality, topResult.subLocality, topResult.thoroughfare];
    }];
} 
```

然后做`whereAmIAnnotation`一个成员变量。您了解为什么这可以解决您的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:08:43.153

创建 .h 文件

```
@interface MapPinClass : NSObject <MKAnnotation>{
CLLocationCoordinate2D coordinate; 
NSString *title; 
NSString *subtitle,*color,*index,*locationId; 
```

}

```
@property (nonatomic, assign) CLLocationCoordinate2D coordinate; 
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle,*color,*index,*locationId; 
```

创建 .m 文件

```
@implementation MapPinClass
@synthesize coordinate,title,subtitle,color,index,locationId;

-(void)dealloc{
[title release];
[super dealloc]; 
```

}

在您设置的地方编写代码

```
 MapPinClass *ann = [[MapPinClass alloc] init]; 
ann.title = AppMain.Heading;
ann.subtitle = AppMain.Detail; 
ann.coordinate = region.center; 
[myMapView addAnnotation:ann]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:18:24.663

我应该实现这个方法

```
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation{} 
```

对不起这个愚蠢的问题。

# nuget - 我们可以使用域策略设置 NuGet URL

> ID：10633958
> 
> 赞同：3
> 
> 时间：2012-05-17T10:27:02.070
> 
> 标签：nuget, group-policy

NuGet 是 Visual Studio 的绝佳补充。只要您向它们提供自定义 URL，它还允许自定义 NuGet 存储库。

对于与公司相关的项目，我们可以拥有自己的 NuGet 存储库，为内部项目所需的任何库提供服务。主要问题是每个开发人员都必须在 Visual Studio 中手动配置它。

## 问题

是否可以通过域安全策略设置来设置这些 URL？这会很棒，因为每个安装 Visual Studio 的新团队成员都会自动获取这些 URL，并且 gettig 项目源代码可以自动加载相关库（使用新的 NuGet 功能在构建时加载缺失的库）。

所以@Haacked 和史蒂夫桑德森......这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:20:55.660

NuGet 2.1 introduced hierarchical configuration settings for NuGet. This allows you to specify things like additional repositories at a project/solution level rather than having to have everyone receive the settings through a group policy.

Release notes: [http://docs.nuget.org/docs/release-notes/nuget-2.1](http://docs.nuget.org/docs/release-notes/nuget-2.1)

By setting a NuGet repository at the solution level, everyone working on the solution will get the additional repository added to their package sources.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:25:49.243

这还不可能。我很确定[http://nuget.codeplex.com/](http://nuget.codeplex.com/)中已经有一个功能请求。我建议找到该功能并对其进行评论。如果找不到，请开始讨论。:)

# oracle - 在负载下添加具有默认值的列的最佳方法

> ID：10633960
> 
> 赞同：30
> 
> 时间：2012-05-17T10:27:07.047
> 
> 标签：oracle, alter-table

将列添加到具有默认值且约束不为空的表时。是作为单个语句运行还是**在数据库负载时将其分解为多个步骤更好。**

```
ALTER TABLE user ADD country VARCHAR2(4) DEFAULT 'GB' NOT NULL 
```

相对

```
ALTER TABLE user ADD country VARCHAR2(2)
UPDATE user SET country = 'GB'
COMMIT
ALTER TABLE user MODIFY country DEFAULT 'GB' NOT NULL 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-15T12:25:06.107

性能取决于您使用的 Oracle 版本。无论如何都会生成锁。

如果版本 <= Oracle 11.1，则 #1 与 #2 相同。无论如何它很慢。从 Oracle 11.2 开始，Oracle 为第一条语句引入了一个很好的优化（一个命令完成所有工作）。您无需更改命令 - Oracle 只是表现不同。它仅将默认值存储在数据字典中，而不是更新每个物理行。

但我也不得不说，我过去遇到了一些与此功能相关的错误（在 Oracle 11.2.0.1 中）

*   如果使用直接 = Y 完成导出，则传统导入失败
*   合并语句会抛出 ORA-600 [13013]（oracle 内部错误）
*   使用此类表的查询中的性能问题

我认为这个问题在当前版本 11.2.0.3 中已经修复，所以我可以推荐使用这个功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:29:57.717

前段时间，我们评估了同一问题的可能解决方案。在我们的项目中，我们必须删除表上的所有索引，执行更改并恢复索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:58:26.650

如果您的系统需要使用该表，那么 DBMS_Redefinition 确实是您唯一的选择。

# django - 将从数据库中救出的对象分配给另一个对象时出错

> ID：10633963
> 
> 赞同：0
> 
> 时间：2012-05-17T10:27:15.503
> 
> 标签：django, foreign-keys, literals

我们有这两个模型：

```
class LogObject(models.Model):
    type = models.CharField(verbose_name=_('Object_type'), max_length=30)

class LogHistory(models.Model):
    obj_id = models.IntegerField(verbose_name=_('id_object'))
    obj_type = models.ForeignKey(LogObject, verbose_name=_('obj_type'))
    date = models.DateField() 
```

如果我尝试从这样的数据库中拯救一些 LogObject：

```
o = LogObject.objects.get(type__exact='miserable') 
```

然后分配给 LogHistory 的一个实例，我们得到这个错误：

```
...
h.obj_type = o    
h.save()
# we get the next error 
ValueError: invalid literal for int(): miserable 
```

否则，如果我创建一个新的 LogObject，并将其保存到数据库中：

```
o = LobObject('brandnew Object')
o.save() 
```

然后分配给我的 LogHistory 实例，一切正常。

```
h.obj_type = o
h.save() 
```

为什么这个？？

非常感谢！！

# android - Android 电子邮件意图

> ID：10633965
> 
> 赞同：0
> 
> 时间：2012-05-17T10:27:25.877
> 
> 标签：android, email, android-intent, categories

我设置了两个按钮。一个打开撰写短信意图，另一个打开撰写电子邮件意图。短信意图工作正常，但电子邮件按钮没有响应。我创建了一个类别选择器，但没有显示出来....直到我点击短信按钮

这是我的代码

```
case R.id.button2:
    {
        String phoneNumber = "xxxxxxxxxx";``
        Intent smsIntent = new Intent(Intent.ACTION_SENDTO);
        smsIntent.addCategory(Intent.CATEGORY_DEFAULT);
        smsIntent.setType("vnd.android -dir/mms-sms");
        smsIntent.setData(Uri.parse("sms:"+phoneNumber));
        startActivity(smsIntent);

    }
    case R.id.button3:
    {
        Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
        emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{"xxxxxxxx@gmail.com"});
        emailIntent.setType("plain/text");
        startActivity(Intent.createChooser(emailIntent, "Send email..."));

    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T10:30:48.163

try to put `break;` after each `case` xxx {}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:38:07.780

如果您在安装了邮件客户端的真实设备上使用它，邮件意图才可用。我猜你的模拟器有问题。要让它在那里工作，您需要安装一个支持此意图的客户端。我猜你会收到如下错误：

```
android.content.ActivityNotFoundException: No Activity found to handle Intent 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:33:24.553

检查设计中按钮的 ID（xml 文件）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-30T08:40:03.447

通用意图的[开发人员指南](https://developer.android.com/guide/components/intents-common.html)警告说，如果没有应用程序的 Activity 响应意图，则会引发异常：

> 注意：如果设备上没有可以接收隐式 Intent 的应用程序，您的应用程序在调用 startActivity() 时会崩溃。要首先验证应用是否存在以接收 Intent，请在 Intent 对象上调用 resolveActivity()。如果结果为非空，则至少有一个应用程序可以处理该意图，并且调用 startActivity() 是安全的。如果结果为 null，则不应使用该意图，并且如果可能，您应该禁用调用该意图的功能。

例如：

```
private void sendEmail(String address) {
    Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{"xxxxxxxx@gmail.com"});
    emailIntent.setType("plain/text");
    if (emailIntent.resolveActivity(getPackageManager()) != null) {
        startActivity(Intent.createChooser(emailIntent, "Send email..."));
    } else {
        // TODO: Tell your user about it
    }
} 
```

或者，您可以进行检查以`onCreate()`完全隐藏按钮。

# qt - 仅使用样式表部分设置背景颜色

> ID：10633966
> 
> 赞同：4
> 
> 时间：2012-05-17T10:27:26.627
> 
> 标签：qt, qt4, qt4.8

如何为背景的一部分设置背景颜色，如下图所示：

![在此处输入图像描述](../Images/41ecbd88676342f290949da6ed30a6a8.png)

当然，如果没有边框，我只想设置青色。

我需要将左侧部分的长度（青色）设置为小部件长度的百分比，例如 30%。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T11:08:57.397

使用 css 我会稍微破解 qlineargradient 。请注意，青色的边缘可能有点模糊。

```
QFrame
{
        background-color: qlineargradient(x1:0, x2: 1, stop: 0 cyan, stop: 0.29 cyan, stop: 0.2901 white, stop: 1 white);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:07:22.083

如果您希望在应用程序中对其进行硬编码，您可以`paintEvent`在小部件中重载该功能。像这样的东西：

```
void MyWidget::paintEvent(QPaintEvent *event)
{
  QPainter painter(this);
  QPen pen(Qt::NoPen);
  painter.setPen(pen);
  painter.fillRect(0, 0, width(), height(), Qt::white);
  painter.fillRect(0, 0, 0.3*width(), height(), Qt::cyan);
  ...
} 
```

# android - 如何在某个特定位置查看视频视图中的视频？

> ID：10633970
> 
> 赞同：15
> 
> 时间：2012-05-17T10:27:34.500
> 
> 标签：android, video, android-videoview

我目前正在尝试实现一个视频视图，它将在特定位置显示视频。我可以毫无问题地显示全屏视频。但是，每当我尝试在一个框架内显示该视频（例如一个小矩形）时，我只能在该视图中显示一部分视频。我无法将视频放入该视图中。

我已经在寻找很多关于在 android 中缩放视频的链接，但是我找不到任何方法来做到这一点。有关该问题的任何帮助都会有所帮助。

我正在使用的是我有 2 个不同的课程。其中一个是我的视频活动类，另一个是助手类：

```
public class VideoViewCustom extends VideoView {
    private int mForceHeight = 0;
    private int mForceWidth = 0;
    public VideoViewCustom(Context context) {
        super(context);
    }     
    public VideoViewCustom(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public VideoViewCustom(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public void setDimensions(int w, int h) {
        this.mForceHeight = h;
        this.mForceWidth = w;
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
         super.onMeasure(widthMeasureSpec, heightMeasureSpec);
         setMeasuredDimension(mForceWidth, mForceHeight);
    }
} 
```

该课程帮助我正确设置视频视图的尺寸，但是我无法使视频适合该区域。我的意思是我无法缩放视频以适应该区域。我不知道android是否自动缩放到给定的尺寸，但我做不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:11:58.910

愿这能帮助你...

```
public void onMeasure(int width, int height)
{
    getHolder().setFixedSize(width, height);
    forceLayout();
            setMeasuredDimension(width, height);
    invalidate();
} 
```

...并尝试使用 RelativeLayout

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <VideoView 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentLeft="true"/>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:01:05.400

我认为您必须创建一个 ViewGroup ，您可以在其中实现 onLayout() 方法。

在这里，您可以直接为每个视图调用 layout() 方法来设置视图的位置。

例子：

```
ViewGroup vg = new ViewGroup(this) {

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
            int x = getMeasuredWidth();
            int y = getMeasuredHeight();
            for (int i = 0; i < vg.getChildCount(); i++) {
                if(vg.getChildAt(i) instanceof TextView){
                    vg.getChildAt(i).layout(...);//and so on...

                }
            }
        }
}; 
```

希望有所帮助！！

# c# - WAMP PHP 页面未从 C# 代码接收数据

> ID：10633971
> 
> 赞同：1
> 
> 时间：2012-05-17T10:27:34.990
> 
> 标签：c#, php, post, wamp

我非常确信这里已经提出了类似的问题，但我现在正在失去理智。

我有一个非常简单的 C# 和 PHP 代码，我编写它只是为了测试我的环境。有两部分，第一部分是应该发布一些数据的 C# 代码，第二部分是应该接收数据的 PHP。在 VS2010 的 html 可视化器中，我可以看到我所期待的，但我无法在 Web 浏览器中看到相同的内容。我必须承认，就发布到 php 页面而言，我有点新手，所以任何帮助将不胜感激。

第 1 部分：C# 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;

namespace ConsoleApplication5
{
    class Program
    {
        static void Main(string[] args)
        {
            string _url = "http://localhost/data.php";
            string _data = "woooooo! test!";

            for (; ; )
            {
                using (WebClient _client = new WebClient())
                {
                    _client.Headers[HttpRequestHeader.ContentType] = 
                         "application/x-www-form-urlencoded";
                    string _html = _client.UploadString(_url, _data);
                }
            }
       }
   }
} 
```

第 2 部分：php 代码：

```
<?php 
    echo "bah bah bings";

var_dump(file_get_contents("php://input"));
if ($postdata = file_get_contents("php://input"))
{
    echo "Works";
}
else {
    echo "Doesn't work";
}   
echo($postdata);

?> 
```

并像这样调用页面：

```
http://localhost/data.php 
```

这就是我想要实现的目标： [将字符串发送到 PHP 页面并让 PHP 页面显示字符串](https://stackoverflow.com/questions/5036136/sending-a-string-to-a-php-page-and-having-the-php-page-display-the-string)

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:38:39.500

> 但我无法在网络浏览器中看到相同的内容。

您通过 POST 方法从 C# 发布数据，浏览器通过 GET 方法调用您的 php，当 GET php 没有从 php://input 接收任何数据时

您已存储 POST 数据，例如

```
if ($postdata = file_get_contents("php://input"))
{
    echo "Works";
    file_put_contents('mypathstore/data.txt', $postdata);
}
else {
    echo "Doesn't work";
} 
```

在另一页

```
<?php
echo file_get_contents('mypathstore/data.txt'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:51:43.243

对。我懂了。上面的工作非常好。我的困惑来自于我想在浏览器中看到这一点，而这并不是必需的。它是一个 PHP 脚本，服务器端，其目的是将数据插入 MYSQL 后端。感谢所有的帮助。奇迹般有效。

# objective-c - 寻找合适的 Objective-C 对象来包装 C void * 指针

> ID：10633977
> 
> 赞同：1
> 
> 时间：2012-05-17T10:27:54.407
> 
> 标签：objective-c

我正在开发一个在 Objective-C 代码中嵌入 C 代码的项目。C 代码产生了一些 void * 指针，我想在 Objective-C 方法之间传递它们，所以我想将它们包装在 Objective-C 对象中以产生一个`NSSet`或类似的效果。

我已经研究过`NSData`，它似乎接受任意数据，但想知道我没有的内存块的长度。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T10:51:28.880

该类[`NSValue`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsvalue_Class/Reference/Reference.html)通常用于此任务：

```
NSValue* value = [NSValue valueWithPointer: myPointer]; 
```

和

```
void* myPointer = [value pointerValue]; 
```

但是请注意，给定的指针在内存管理方面不会受到任何特殊处理。只要指向该内存区域的指针存在并且在程序的某些部分中可以访问，您（并且只有您自己）有责任确保它指向的内存保持有效。

但是请注意，在 a 中将这样的值与`NSSet`或作为键一起使用`NSDictionary`可能会或可能不会产生预期的效果：

`NSData`本质上是一个字节缓冲区。它实际上代表了相关内存的内容。比较`NSData`实例的相等性在字节级别进行比较。这是原因之一，`NSData`需要了解相关内存区域的长度。

`NSValue`带有指针值是完全不同的野兽。在这里，实际（数字）指针值是必不可少的。没有考虑（比较两个`NSValue`实例时）地址的实际内容。

# c++ - 无法在 eclipse cdt 中构建 makefile

> ID：10633978
> 
> 赞同：1
> 
> 时间：2012-05-17T10:27:56.857
> 
> 标签：c++, c, makefile

我不断收到错误

```
make: *** No rule to make target `all'.  Stop. 
```

我确信我的 makefile 可以完美运行，因为我确实在终端上运行了它并且一切正常。但是当我尝试通过创建一个空的 Makefile 项目将所有内容导入 eclispe 时，我无法编译该程序。那么我错过了eclipse配置中的一些东西吗？

无论如何，这是我的makefile，请看一下，并纠正我。谢谢

```
CC = g++
prog: legrec.o game.o board.o piece.o 
    $(CC) legrec.o game.o board.o piece.o -Wall -Werror -pedantic -o legrec
legrec.o: legrec.cpp game.h
    $(CC) -Wall -Werror -pedantic -c legrec.cpp
game.o: game.cpp game.h board.h piece.h move.h player.h
    $(CC) -Wall -Werror -pedantic -c game.cpp
board.o: board.cpp board.h piece.h move.h player.h
    $(CC) -Wall -Werror -pedantic -c board.cpp
piece.o: piece.cpp piece.h board.h move.h player.h
    $(CC) -Wall -Werror -pedantic -c piece.cpp 
```

编辑：感谢所有回复，我确实将第一行更改为 all:legrec，之前的错误消息消失了，但是又出现了另一个错误

```
 cc   legrec.o   -o legrec
 Undefined symbols for architecture x86_64:
    "game::game()", referenced from:
         _main in legrec.o
    "game::printMenu()", referenced from:
         _main in legrec.o
    "game::printBoard()", referenced from:
         _main in legrec.o
    "game::nextMove()", referenced from:
         _main in legrec.o
    "game::ended()", referenced from:
         _main in legrec.o
    "game::printWinner()", referenced from:
         _main in legrec.o
    "game::~game()", referenced from:
         _main in legrec.o
    "std::terminate()", referenced from:
         _main in legrec.o
    "std::ios_base::Init::Init()", referenced from:
         __static_initialization_and_destruction_0(int, int)in legrec.o
    "std::ios_base::Init::~Init()", referenced from:
         ___tcf_0 in legrec.o
    "___gxx_personality_v0", referenced from:
         Dwarf Exception Unwind Info (__eh_frame) in legrec.o
 ld: symbol(s) not found for architecture x86_64
 collect2: ld returned 1 exit status
 make: *** [legrec] Error 1 
```

我只是不明白为什么运行相同的平台但程序执行不同。在我在终端上运行并在那里进行编辑之前，这看起来非常好，但是在移植到 Eclipse 之后，它让我对奇怪的错误感到疯狂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:30:57.197

Your very first rule is not really good.

You could rename it to `all` and it would "work". But a better approach would be:

```
all: legrec

legrec: legrec.o game.o board.o piece.o 
    $(CC) legrec.o game.o board.o piece.o -Wall -Werror -pedantic -o legrec 
```

i.e. the rule name should match the output produced.

If you type just `make` on the command line, the very first rule encountered is run (that's why it works for you). I'm guessing your IDE is running `make all`, and you haven't defined such a rule.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:37:45.257

我不是专家，但我会尽力提供帮助。将 maketarget 重命名`prog`为`legrec"` 尝试添加以下行
`.PHONY: all clean
`all: legrec``

 `Also your makefile doesn't have clean target. For that looking at your make file I suggest adding` 

```
clean:
    @rm *.o legrec
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:23:00.843

您可以通过多种方式改进 makefile 以减少重复。

`make`知道如何将 cpp 文件转换为目标文件，因此您无需告诉它。只需定义编译器和要使用的选项：我添加了 CPPFLAGS。

`make`将构建它在 makefile 中找到的第一个目标 - 在本例中为“legrec”。LD（链接）命令中的 $@ 指的是`legrec`. $^ 指的是先决条件（即对象列表）

这是我的版本：

```
CC = g++
CPPFLAGS = -Wall -Werror -pedantic
LDFLAGS =

legrec: legrec.o game.o board.o piece.o
    $(LD) $(LDFLAGS) $^ -o $@

legrec.o: game.h
game.o:   board.h piece.h move.h player.h game.h
board.o:  board.h piece.h move.h player.h
piece.o:  board.h piece.h move.h player.h

.PHONY: clean
clean:
    @rm -f *.o legrec 
```

请注意，您可以将 -g 或 -O 等添加到 CPPFLAGS 行。顺便说一句，编译器可以给你的警告比 -Wall 产生的警告多得多。对于 C，我通常使用：

```
-Wall \
-Wextra \
-Wshadow \
-Wstrict-prototypes \
-Wmissing-prototypes \
-Wundef \
-Wunreachable-code \
-Wunused \
-Wcast-qual 
```

# asp.net - sql查询以降序显示按日期排序的记录，我有一个错误

> ID：10633980
> 
> 赞同：-2
> 
> 时间：2012-05-17T10:27:58.620
> 
> 标签：asp.net, sql-server

这给了我一个错误-

> 将 char 数据类型转换为 datetime 数据类型会导致 datetime 值超出范围。

这不起作用并且也尝试过，但是这个订单按日期而不是月份

```
SqlCommand cmd = new SqlCommand("select * from tbl_Member where Email LIKE '" + id.ToString() + "%' ORDER BY YEAR(RegisterDT) DESC,MONTH (RegisterDT) DESC, DAY(RegisterDT) DESC", con);

SqlCommand cmd = new SqlCommand("select * from tbl_Member where Email LIKE '" + id.ToString() + "%' ORDER BY(RegisterDT) DESC", con) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:39:26.197

发布问题时，最好提供表格格式、您使用的数据库和示例数据。在这种情况下，我推测您使用的是 SQL Server，因为您使用的是 DAY() 和 MONTH() 函数。

这些函数将日期作为参数，而不是字符串。您不应该依赖 SQL 中的隐式转换。让我重复一遍。您应该始终在数据类型之间显式转换，以防止出现您看到的错误。

您遇到的问题是您的日期格式不是系统的默认格式。例如，您可能有一个日期，例如 10/03/2012。正如美国人所相信的那样，这是 10 月 3 日吗？还是像欧洲人那样，今年 3 月 10 日？然后考虑 2012 年 10 月 20 日。这对欧洲人来说超出了范围。

所以，你有两个选择：

(1) 使用 CONVERT() 函数进行显式转换。

(2) 使用字符串函数提取月份和日期。在上述情况下，这可能是 substring(, 1, 2) 用于一个，而 substring(, 4, 2) 用于另一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:40:10.490

我的猜测是 RegisterDT 是一个 char 列，并且您的当前日期设置 (DMY | MDY) 中的日期无效。日期应存储为日期，而不是字符串。这应该可以解决您的问题。

作为第一方面，如果 RegisterDT 是一个日期列，为什么你必须按年、月日分解它？你为什么不能`ORDER BY RegisterDT DESC`呢？

最后一点要[小心 SQL 注入](http://bobby-tables.com/)。您应该使用这样的参数化查询：

```
SqlCommand cmd = new SqlCommand("SELECT * FROM tbl_Member WHERE Email LIKE @ID + '%' ORDER BY RegisterDT DESC", con);
cmd.Parameters.Add("@ID", SqlDbType.Varchar).Value = id.ToString(); 
```

这不仅消除了 SQL 注入，还通过将 SQL 与值分离，使代码更具可读性，并通过字符串转换防止数据丢失。

# entity-framework - EF多对多不能加载一端

> ID：10633982
> 
> 赞同：0
> 
> 时间：2012-05-17T10:28:00.850
> 
> 标签：entity-framework, many-to-many

我有如下代码。

```
 class Student : IPeople
{
    private string name;
    public string Name
    {
        get { return name;}
        set { name = value;}
    }

    private bool sex;
    public bool Sex
    {
        get{ return sex; }
        set{ sex = value;}
    }

    private int age;
    public int Age
    {
        get{return age;}
        set{age = value;}
    }

    public virtual ICollection<Dog> dogs { get;set; }

    public Student()
    {
        dogs = new List<Dog>();
    }
}

class Pet
{
    string Name { get; set; }
    bool Sex { get; set; }
    int Age{get;set;}
}

class Dog : Pet
{
    public string Type { get; set; }
    public virtual ICollection<IPeople> persons { get; set; }

    public Dog()
    {
        persons = new List<IPeople>();
    }
} 
```

上下文是

```
class TestContext : DbContext
{
    public DbSet<Student> studentSet { get; set; }
    public DbSet<Dog> dogSet { get; set; }
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Student>().HasMany(x => x.dogs).WithMany(y => (ICollection<Student>)y.persons);
    }
} 
```

如果我插入下面的记录，

```
using (TestContext context = new TestContext())
        {
            Student s = new Student();
            s.Age = 18;
            s.Sex = true;
            s.Name = "ts";
            Dog d = new Dog();
            d.Type = "abc";
            d.Sex = false;
            d.Name = "dog";
            d.Age = 3;
            s.dogs.Add(d);
            context.studentSet.Add(s);
            context.SaveChanges();
        } 
```

一切正常，但如果我插入下面的记录，学生记录将不会插入数据库。

```
using (TestContext context = new TestContext())
        {
            Student s = new Student();
            s.Age = 18;
            s.Sex = true;
            s.Name = "ts";
            Dog d = new Dog();
            d.Type = "abc";
            d.Sex = false;
            d.Name = "dog";
            d.Age = 3;
            d.persons.Add(s);
            context.dogSet.Add(d);
            context.SaveChanges();
        } 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:05:11.723

你不能在`IPeople`这里使用接口：

```
public virtual ICollection<IPeople> persons { get; set; } 
```

导航属性必须引用模型的实体**类**——抽象的或具体的。

一种可能的替代方法可能是使用抽象类`People`而不是接口。但是你必须把导航属性...

```
public virtual ICollection<Dog> dogs { get;set; } 
```

...进入该抽象类，而不是派生`Student`类，因为`Dog.persons`指的是抽象类`People`，例如：

```
abstract class People
{
    // ...
    public virtual ICollection<Dog> dogs { get;set; }
}

class Student : People
{
    // ...
}

class Pet
{
    // ...
}

class Dog : Pet
{
    // ...
    public virtual ICollection<People> persons { get; set; }
} 
```

映射将是：

```
modelBuilder.Entity<People>()
    .HasMany(x => x.dogs)
    .WithMany(y => y.persons)
    .Map(m =>
    {
        m.ToTable("PeoplesDogs");
        m.MapLeftKey("PeopleId");
        m.MapRightKey("DogId");
    }); 
```

# jquery - 简单的 Sinatra 代理与 jQuery POST 调用的行为不符

> ID：10633984
> 
> 赞同：2
> 
> 时间：2012-05-17T10:28:14.157
> 
> 标签：jquery, ruby, sinatra

我有一个用 Sinatra 编写的简单代理。此块旨在传递对 api/* 的所有调用。事情在当地按预期工作。但是，当我推送到服务器时，奇怪的事情开始发生。使用 $.post 的 jQuery 调用会导致对 API 的 GET 请求，而不是预期的 POST。从“代理”服务器日志中，我看到一个 jQuery 调用导致两个日志项，一个 POST 和一个 GET，后者的结果似乎是 jQuery 返回的结果。我一生都无法弄清楚这里发生了什么，如果能得到一些提示，那就太棒了。

```
# Proxy all requests to /api/*
proxy = lambda do |path|
  uri = URI('http://' + HOST + '/api/' + path)
  uri.query = URI.encode_www_form(params) if (request.request_method == 'GET')

  # New request data
  data = {
    :url => 'http://' + uri.host + ':' + uri.port.to_s + uri.request_uri,
    :method => request.request_method,
    :headers => request_headers,
    :query => uri.query
  }

  http = Net::HTTP.new(uri.host, uri.port)

  if request.request_method == 'POST'
    req = Net::HTTP::Post.new uri.request_uri
    request.body.rewind
    req.form_data = CGI.parse request.body.read
  else
    req = Net::HTTP::Get.new uri.request_uri
  end

  # Passthrough headers
  data[:headers]['host'] = uri.host + ':' + uri.port.to_s
  data[:headers].each { |key, val| req[key] = val }

  # Log request data
  res = http.request req

  # Return
  status res.code
  content_type 'application/json'
  headers res.to_hash
  body res.body
end

get '/api/*', &proxy
post '/api/*', &proxy 
```

大法

# ruby-on-rails - 不显示 Flash 消息（仅 :notice 显示）

> ID：10633986
> 
> 赞同：0
> 
> 时间：2012-05-17T10:28:15.107
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml

我想`event_calendar_path`使用“下个月”链接将用户重定向到它提前几个月的时间，该链接显示一条闪存消息，上面写着“你不能提前超过 6 个月”。

我想将其显示为错误消息，但没有显示。我尝试使用：notice、：info、：error，但实际上只显示：notice。

这是我的`application.html.haml`文件中的内容：

```
- flash.each do |key, msg|
  - if key == :notice
    .alert.alert-success= msg
  - elsif key == :error
    .alert.alert-error= msg
  - elsif key == :info
    .alert.alert-info= msg
  - else
    .alert.alert-block= msg 
```

这就是我为显示 Flash 消息所做的事情：

```
if @current_month > Date.today.month + 6
  flash[:error] = "You cannot go more than 6 months ahead"
  redirect_to event_calendar_path @event_calendar, :group_id => @group.id
  return
end 
```

如果我`:error`用通知替换它会起作用，否则我不会收到任何消息。在我使用简短表单之前`:notice => "Message"`，但后来我对其进行了更改以确保使用该表单显示消息不是问题，但我仍然无法显示它。

这种行为的原因是什么？我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:05:48.690

你确定你没有从控制器的其他地方的闪存中提取你的 :error/:info 键，然后是过滤器或布局吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:57:01.447

看着：

[http://guides.rubyonrails.org/action_controller_overview.html#the-flash](http://guides.rubyonrails.org/action_controller_overview.html#the-flash)

flash.now

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T05:27:19.910

您可以尝试为两者提供相同的 html 类属性吗？也许您的客户端逻辑隐藏了错误消息？

所以，而不是：

```
- if key == :notice
  .alert.alert-success= msg
- elsif key == :error
  .alert.alert-error= msg 
```

尝试：

```
- if key == :notice
  .alert.alert-success= msg
- elsif key == :error
  .alert.alert-success= msg 
```

# c# - C# WPF：填充 DataGrid 失败

> ID：10633987
> 
> 赞同：1
> 
> 时间：2012-05-17T10:28:25.860
> 
> 标签：c#, wpf, datagrid, populate

我有一个“Seive”类，一个 ObservableCollection seiveData 对象。

```
 public Seive(String id)
    {
        SeiveIdSize = id;
        Caret = 0.0;
        Percent = 0.0;
        Peices = 0;
        Weight = 0.0;
        Size = 0;
    }

    public String SeiveIdSize   {    get;   set;   }
    public Double Weight { get; set; }
    public Double Percent   {    get;   set;   }
    public Double Caret {    get;   set;   }
    public uint Size    {    get;   set;   }
    public uint Peices  {    get;   set;   } 
```

在我的 xml 中：我有

```
<DataGrid  Name="serverGrid" ItemsSource="{Binding}" .....>
<DataGrid.Columns>
<DataGridTextColumn Header="SEIVE" Width="Auto" Binding="{Binding Path=SeiveIdSize}" SortDirection="Ascending" />
 <DataGridTextColumn Header="CTS" Width="Auto" Binding="{Binding Path=Caret}" />
 <DataGridTextColumn Header=" % " Width="Auto" Binding="{Binding Path=Percent}" />
 <DataGridTextColumn Header="PCS" Width="Auto" Binding="{Binding Path=Peices}" />
 <DataGridTextColumn Header="WGT" Width="Auto" Binding="{Binding Path=Weight}" />
 <DataGridTextColumn Header="SIZE" Width="Auto" Binding="{Binding Path=Size}" />                                    
 </DataGrid.Columns> 
```

在窗口加载事件中，我在 seiveData 中填充了 2 个 seives，但我没有看到任何结果/行。

```
seivesData.Add(new Seive("+10"));
seivesData.Add(new Seive("+8"));
seivesDataGrid.DataContext = seivesData; 
```

**编辑：按钮事件代码：**

```
 private void saveBtn_Click(object sender, RoutedEventArgs e)
    {
        Seive s1 = new Seive("+2");
        s1.Peices = 100;
        s1.Caret = 0.41;
        s1.Weight = 0.10;
        seivesData.Add(s1);
        Seive s = seivesData[0];
        s.Caret = 0.54;
        s.Weight = 0.32;
        seivesData[0] = s;
        seiveDG.DataContext = seivesData;
    } 
```

我哪里错了？我可以看到新添加的 Seive 的所有详细信息，但不能看到添加到第 0 个 seive 的插入符号和权重。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:51:02.507

我在您的 xaml 中看到的基本问题是您设置了 ItemsSource = {binding SeiveData} 如果您将此属性传递到网格的数据上下文中，这是错误的。

下面的代码现在正在运行。核实。

如果您想将 chagnes 通知到 Seive 类中，那么还有一件事必须实现 INotifyPropertyChange 接口。

XAML

```
<DataGrid Name="serverGrid" ItemsSource="{Binding}">
        <DataGrid.Columns>
            <DataGridTextColumn Width="Auto"
                                Binding="{Binding Path=SeiveIdSize}"
                                Header="SEIVE"
                                SortDirection="Ascending" />
            <DataGridTextColumn Width="Auto"
                                Binding="{Binding Path=Caret}"
                                Header="CTS" />
            <DataGridTextColumn Width="Auto"
                                Binding="{Binding Path=Percent}"
                                Header=" % " />
            <DataGridTextColumn Width="Auto"
                                Binding="{Binding Path=Peices}"
                                Header="PCS" />
            <DataGridTextColumn Width="Auto"
                                Binding="{Binding Path=Weight}"
                                Header="WGT" />
            <DataGridTextColumn Width="Auto"
                                Binding="{Binding Path=Size}"
                                Header="SIZE" />
        </DataGrid.Columns>
    </DataGrid> 
```

落后

```
 ObservableCollection<Seive> _seiveData;
        public ObservableCollection<Seive> SeiveData
        {
            get { return _seiveData; }
            set { _seiveData = value; }
        }
        private void Window_Loaded(object sender, RoutedEventArgs e)
        {

            SeiveData = new ObservableCollection<Seive>();
            SeiveData.Add(new Seive("+10"));
            SeiveData.Add(new Seive("+8"));

            serverGrid.DataContext = SeiveData;

        } 
```

班级

```
 public class Seive
    {
        public Seive(String id)
        {
            SeiveIdSize = id;
            Caret = 0.0;
            Percent = 0.0;
            Peices = 0;
            Weight = 0.0;
            Size = 0;
        }

        public String SeiveIdSize { get; set; }
        public Double Weight { get; set; }
        public Double Percent { get; set; }
        public Double Caret { get; set; }
        public uint Size { get; set; }
        public uint Peices { get; set; }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:30:53.030

You mention you're using a list, but for databinding to work, you would need to use `ObservableCollection<T>` which will notify the datagrid if the collection changes.

EDIT:

As pointed out in the comments, it's not about changes. You're already setting your datacontext to the list, so there won't be a `seiveData` in your DataContext. Instead, try the following:

`ItemsSource="{Binding}"`

If you still need to notify your view of changes, consider `ObservableCollection<T>` as has been mentioned.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:42:35.663

正如每个人所说的一种方法是将其绑定到`ObservableCollection`.

另一种方法是从 DataTable 绑定。

使用将您的列表转换为 DataTable

[如何：在通用类型 T 不是 DataRow 的情况下实现 CopyToDataTable](http://msdn.microsoft.com/en-us/library/bb669096.aspx)

[从查询创建数据表 (LINQ to DataSet)](http://msdn.microsoft.com/en-us/library/bb386921.aspx)

我今天发现了这个。非常有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T10:35:38.833

可能容器的 DataContext（DataGrid 所在）未设置为服务于`seiveData`-property 的对象。或者，您的`seiveData`-list 甚至没有属性支持，而只是一个字段。这是不允许的。即使字段（成员变量）被声明为公共，绑定引擎也不会绑定到它——它必须由属性支持。

另请注意，如果您在 Loaded-event 中填写列表，则`seiveList`必须是一个`INotifyCollectionChanged`-implementing 集合，例如`ObservableCollection<T>`因为绑定是在列表填充之前完成的。否则，DataGrid 将不知道新数据已插入到列表中。

# ruby - Watir 表对象处理的性能问题。如何将 Nokogiri html 表格制作成数组？

> ID：10633988
> 
> 赞同：3
> 
> 时间：2012-05-17T10:28:26.970
> 
> 标签：ruby, nokogiri, watir, watir-webdriver

*以下工作但总是很慢，似乎每页*停止我的抓取程序及其 Firefox 或 Chrome 浏览器甚至整分钟：

```
pp recArray = $browser.table(:id,"recordTable").to_a 
```

获取 HTML 表格的文本或 html 源代码很快：

```
htmlcode = $browser.table(:id,"recordTable").html  # .text shows only plaintext portion like lynx 
```

例如，我如何能够使用仅包含该表的 html 的 Nokogiri 对象来创建相同的**recArray**（来自 a 的每个元素）？`<TR>`

`recArray = Nokogiri::HTML(htmlcode).` **??**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:45:36.273

几天前我写了一篇博客文章：http: [//zeljkofilipin.com/watir-nokogiri/](http://zeljkofilipin.com/watir-nokogiri/)

如果您还有其他问题，请询问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:58:36.183

您想要表中的每个 tr 吗？

```
Nokogiri::HTML($browser.html).css('table[@id="recordTable"] > tr') 
```

这给出了一个比 Array 更有用的 NodeSet。当然还有to_a

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T12:55:10.273

Thought it would be useful to sum up all the steps here and there:

The question was how to produce the same array object filled with strings from the page's text content that a **Watir::Webdriver Table #to_a** might produce, but much faster:

```
 recArray = Nokogiri::HTML(htmlcode). **??** 
```

So instead of this as I was doing before:

```
 recArray=$browser.table(:class, 'detail-table w-Positions').to_a 
```

I send the whole page's html as a string to Nokogiri to let it do the parsing:

```
 recArray=Nokogiri::HTML($browser.html).css('table[@class="detail-table w-Positions"] tr').to_a 
```

Which found me the rows of the table I want and put them into an array.

Not done yet since the elements of that array are still Nokogiri (Table Row?) types, which barfed when I attempted things like `.join(",")` (useful for writing into a .CSV file or database for instance)

So the following iterates through each row element, turning each into an array of pure Ruby String types, containing only the text content of each table cell stripped of html tags:

```
 recArray= recArray.map {|row| row.css("td").map {|c| c.text}.to_a }  # Could of course be merged with above to even longer, nastier one-liner 
```

Each cell had previously also been a Nokogiri Element type, done away with the `.text` mapping.

Significant speedup achieved.

Next I wonder what it would take to simply override the `#to_a` method of every **Watir::Webdriver Table** object globally in my Ruby code files....

(I realize that may not be 100% compatible but it would spare me so much code rewriting. Am willing to try in my *personal.lib.rb* include file.)

# c# - socket.io 使用 Newtonsoft.json 和 socketIOClient 发送到 C#

> ID：10633991
> 
> 赞同：1
> 
> 时间：2012-05-17T10:28:40.583
> 
> 标签：c#, node.js, type-conversion, socket.io, json

节点：

```
io.sockets.on("connection",function(client)
{
  client.emit('Value',{Data:'a string'});
}); 
```

C＃：

```
socket.On("Value", (data) =>
{
  PlainString PS = data.Json.GetFirstArgAs<PlainString>();
  MessageBox.Show(PS.Data);
}); 
```

C# 纯字符串类：

```
[JsonObject(MemberSerialization.OptIn)]
class PlainString
{
   [JsonProperty]
   public string Data { get; set; }
   public PlainString(){}
   public string ToJsonString()
   {
     return JsonConvert.SerializeObject(this);
   }
   public static PlainString Deserialize(string jsonString)
   {
      return JsonConvert.DeserializeObject<PlainString>(jsonString);
   }
} 
```

错误：

> 无法将类型“object”隐式转换为“PlainString”。存在显式转换（您是否缺少演员表？）

在 JsonEncodedEventMessage.cs:39

```
 public T GetFirstArgAs<T>()
        {
            try
            {
                var firstArg = this.Args.FirstOrDefault();
                if (firstArg != null)
                return JsonConvert.DeserializeObject<T>(firstArg.ToString());//line 39
            }
            catch (Exception ex)
            {
                throw;
            }
            return default(T);
        } 
```

`firstArg = '{ "Data": "connected" }' (dynamic)` 并 `T = PlainString`

使用：[SocketIO4Net](http://socketio4net.codeplex.com/)

一切看起来都正确，但我总是得到那个错误，我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:00:58.627

我不知道那个库，但通常反序列化器返回对象。

尝试这个：

```
public static PlainString Deserialize(string jsonString)
{
    return (PlainString)JsonConvert.DeserializeObject<PlainString>(jsonString);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T18:03:12.750

从我的测试来看，您似乎只需要将您的 PlainString 类设置为公开的。

```
[JsonObject(MemberSerialization.OptIn)]
public class PlainString
{
    [JsonProperty]
    public string Data { get; set; }
    public PlainString() { }

    public string ToJsonString()
    {
        return JsonConvert.SerializeObject(this);
    }
    public static PlainString Deserialize(string jsonString)
    {
        return JsonConvert.DeserializeObject<PlainString>(jsonString);
    }
} 
```

有一个非常sim。在第 55 行的 TestSocketIOClient.cs 中的示例 - 我也展示了将数据作为 Part 对象获取。

```
// cast message as Part - use type cast helper
Part part = data.Json.GetFirstArgAs<Part>();
Console.WriteLine(" Part Level:   {0}\r\n", part.Level); 
```

吉姆