# StackOverflow 问答 12365000-12365999

# django - django 在视图中添加 {%extends%} 标签

> ID：12365000
> 
> 赞同：0
> 
> 时间：2012-09-11T07:42:24.367
> 
> 标签：django, django-templates, django-views

我需要在views.py 中添加到TemplateView html {%extends some_base.html%} 的输出。我不能直接使用 html，因为 template_name 总是不同的，我不想将 {%extends..%} 添加到每个 template.html 文件中。我想做这样的事情：

```
class PageView(TemplateView):

def get_context_data(self, **kwargs):
    object = PageModel.objects.get(view_base__slug=kwargs.get('slug'))
    self.template_name = object.template_name
    self.base='base.html'
    from django.template.loader import render_to_string
    #just example, it's not working
    rendered = render_to_string(self.template_name) 
    rendered= '{% extends' + self.base + '%} '+ rendered
    ###
    return locals() 
```

但它不起作用。甚至更多 - 我想保存所有正在传递给模板的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:35:04.287

我不确定你为什么要尝试但你不能放入`{%extends ...%}`HTML（除非你想使用 django 模板再次渲染它。在渲染后将该字符串添加到模板中会`{%extends ...%}`在模板中添加不需要的字符串。

但是，如果您愿意，您可以动态创建模板并渲染它。新模板可以扩展现有模板。例如：

```
>>> from django.template import Template, Context
>>> #creates a template from string, "base.html" can be self.base in your case
>>> t = Template('{%extends "' + "base.html" + '"%} ...') 
>>> c = Context({'your_var1': 'var1_value'})            #get context for template
>>> t.render(c)                                         #render the created template 
u'\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n
 <html xmlns="http://www.w3.org/1999/xhtml">
.... 
```

更多参考：[模板编译字符串](https://docs.djangoproject.com/en/dev/ref/templates/api/#compiling-a-string)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:19:12.553

通过将变量传递`template_name`给模板，您可以在 django 模板中实现相同的目的。然后在模板中把这段代码放在最上面。

```
{% with template_name|add:".html" as template %}
{% include template %}
{% endwith %} 
```

或查看[此](https://stackoverflow.com/questions/4386168/how-to-concatenate-strings-in-django-templates)问题以获得更多帮助。

# asp.net - Ajax文件上传多个

> ID：12365002
> 
> 赞同：0
> 
> 时间：2012-09-11T07:42:33.410
> 
> 标签：asp.net, ajax, c#-4.0

我正在用 Asp.net 4.0 开发一个网站。我在一个页面上放置了 5 个 Ajax FileUplload 控件。但只有第一个控件的 UploadComplete 事件被触发。对于其余 4 个控件，“上传完成”事件**不会**被触发。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:18:11.873

尝试 Javascript 或 Jquery 并检查您是否可以在 Windows.Onload 事件上找到 FileUpload 控件 ID ..或者如果您发现这很困难，那么最好的解决方法是在 Firefox 中使用 FireBug .. 这是您可以使用的最佳工具轻松检查您的其他 4 个文件上传控件是否正确呈现

# mysql - MySQL：为什么将主键与不 使用索引的随机生成的数字进行比较？

> ID：12365007
> 
> 赞同：8
> 
> 时间：2012-09-11T07:42:52.550
> 
> 标签：mysql

尝试根据没有孔的自动增量主键从表中选择随机行。

表架构：

```
CREATE TABLE IF NOT EXISTS `testTable` (
  `id` int(9) NOT NULL AUTO_INCREMENT,
  `data` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=0 ;

INSERT INTO `testTable` (`id`, `data`) VALUES
(1, 'hello'),
(2, 'world'),
(3, 'new'),
(4, 'data'),
(5, 'more and more'),
(6, 'data '),
(7, 'more rows here'),
(8, 'most rows here'),
(9, 'testing'),
(10,'last'); 
```

查询：

1/`explain select * from testTable where id = ceil(Rand()*10) limit 1 ;`

[http://sqlfiddle.com/#!2/6e2b1/1](http://sqlfiddle.com/#!2/6e2b1/1)

结果 ：

```
| ID | SELECT_TYPE |     TABLE | TYPE | POSSIBLE_KEYS |    KEY | KEY_LEN |    REF | ROWS |       EXTRA |
--------------------------------------------------------------------------------------------------------
|  1 |      SIMPLE | testTable |  ALL |        (null) | (null) |  (null) | (null) |   10 | Using where | 
```

2/`explain select * from testTable where id = 7 limit 1 ;`

[http://sqlfiddle.com/#!2/6e2b1/2](http://sqlfiddle.com/#!2/6e2b1/2)

结果：

```
| ID | SELECT_TYPE |     TABLE |  TYPE | POSSIBLE_KEYS |     KEY | KEY_LEN |   REF | ROWS | EXTRA |
---------------------------------------------------------------------------------------------------
|  1 |      SIMPLE | testTable | const |       PRIMARY | PRIMARY |       4 | const |    1 |       | 
```

为什么 query#1 不使用索引，什么时候`ceil(rand()*10)`应该理想地评估为一个常量，然后可以将其与主键进行比较？优化器不应该那样工作吗？或者我在这里遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T07:49:41.700

该键不能与该查询一起使用，因为`RAND()`每行都会调用该键，并且每次都返回不同的值。

您可以尝试使用以下代码：

```
SET @rand_value := CEIL(RAND()*10);
EXPLAIN SELECT * FROM testTable WHERE id = @rand_value; 
```

它首先计算一个随机值并将其分配给一个变量，然后在查询中使用它。
正如 aneroid 所指出的那样，这`LIMIT 1`是无用的：由于条件适用于主键，因此查询将永远不会返回超过一行。

使用此查询，输出为：

```
| ID | SELECT_TYPE |     TABLE |  TYPE | POSSIBLE_KEYS |     KEY | KEY_LEN |   REF | ROWS | EXTRA |
---------------------------------------------------------------------------------------------------
|  1 |      SIMPLE | testTable | const |       PRIMARY | PRIMARY |       4 | const |    1 |       | 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T08:01:21.610

来自[MySQL 文档`RAND()`](https://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)：

> **`RAND()`****`WHERE`**每次执行时都会重新评估in子句**`WHERE`**。

因此**，它不是将 Primary Key 与一个 constant 进行比较**，而是每次都在变化的值（在这种情况下，对于每一行）。如果您`LIMIT 1`在查询中删除 ，您将看到更多行匹配不同的 PK - 这显示了“每次重新评估”行为。

编辑：请参阅 Jocelyn 的示例，作为首先生成随机数然后获取匹配 PK 的行的方法`id`（`LIMIT 1`不需要，顺便说一句）。Najzero 的评论中也有类似的说明。

# file - 在数据库和文件目录codeigniter中上传图像

> ID：12365009
> 
> 赞同：-3
> 
> 时间：2012-09-11T07:42:58.493
> 
> 标签：file, codeigniter, upload

这是我的控制器 main.php 这是上传目录中的文件我想在数据库中存储相同的文件名并按名称检索图像。你可以说是解决方案代码或编辑我的代码真的需要代码

```
<?php

       class Main extends CI_controller{ // mian controller

            function index(){
           $this->load->view('main_view.php', array('error'=>''));

                            }
            function upload(){ // upload function for image

                         $config['upload_path'] = './images/'; //directory
                         $config['allowed_types'] = 'jpg|jpeg|gif|png';//type allow
                         $this->load->library('upload',$config);

                            if(! $this->upload->do_upload()){

                            $error = array('error'=>$this->upload->display_errors());
                            $this->load->view('main_view',$error);
                                                              }
                                  else
                                        {
        // 

                                     $file_data = $this->upload->data();
                                     $data['img'] = base_url().'/images/'. $file_data['file_name'] ;
                                     $this->load->view('success_msg',$data);

                                         }
                                                    }

                             }
 ?> 
```

这是我的观点 main_view.php

```
 <html>
    <body>

       <? echo $error;?>

       <? echo form_open_multipart('main/upload'); ?>
           <input type="file" name="userfile" />
           <input type="submit" name="submit" value="Upload" />
             <?php echo form_close();?>
    </body>
    </html> 
```

我想在数据库中上传文件名并可以轻松检索图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:53:48.870

您可以检索图像名称：`$this->upload->file_name`

编辑：

您的代码中有一些错误。

1) 这`$this->load->view('main_view.php', array('error'=>''));`应该`$this->load->view('main_view', array('error'=>''));`没有 .php 扩展名。

2）`CI_controller`应该是`CI_Controller`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:08:29.370

您可以使用这些简单的代码行来上传文件夹中的文件并获取文件名并将其存储在数据库中。

```
$image_path = '../../test_images/'.$_FILES['question_image']['name'];

if(is_uploaded_file($_FILES['question_image']['tmp_name']))
{
  move_uploaded_file($_FILES['question_image']['tmp_name'], $image_path) ;  
}           

$image_url = "test_images/".$_FILES['question_image']['name']; 
```

$image_path 是您要上传文件的 url， $image_url 将包含您要存储到数据库中的 url

现在您可以通过以下方式检索图像

```
<img src="<?base_url($image_url)?>" /> 
```

# ios - 没有互联网连接时应用程序崩溃

> ID：12365019
> 
> 赞同：-1
> 
> 时间：2012-09-11T07:43:46.407
> 
> 标签：ios, json, cocoa-touch, exception

我正在为新闻做一个 iPhone 应用程序。我正在通过获取新闻数据`ASIHTTPRequest`并使用`JSONKit`. 连接到 Internet 时工作正常，但是如果 WiFi 连接关闭，我会收到以下异常并且应用程序崩溃：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“jsonData 参数为 NULL。”

这是我的代码：

```
- (id)objectWithData: (NSData *)jsonData error: (NSError **)error
{
    if(jsonData == NULL)
    {
        [NSException raise:NSInvalidArgumentException format:@"The jsonData argument is NULL."];
    }

    return([self objectWithUTF8String:(const unsigned char *)[jsonData bytes] length:[jsonData length] error:error]);
} 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:26:19.497

[http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

在您的 appDelegate 中包含示例代码中的文件/代码后，在您要检查互联网的类中创建一个 appDelegate 实例并使用以下内容：

```
- (id)objectWithData:(NSData *)jsonData error:(NSError **)error
{
    YourAppDelegate *appDelegate = (YourAppDelegate * )[[UIApplication SharedApplication]delegate];

    if (![appDelegate checkNetworkConnectionAndWarnUser:YES])
    {
        NSLog(@"No internet");
    }
    else
    {
        return([self objectWithUTF8String:(const unsigned char *)[jsonData bytes] length:[jsonData length] error:error]);
    }
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-11T07:48:25.273

使用 cmnd+shift+F 查找您使用非法参数的位置，如果请求失败，您通常不应到达该位置。

无论请求结果如何，您似乎都在尝试处理请求结果，但无论如何您都需要对接收到的数据进行 nil/NULL 检查。你抛出的异常必须被捕获和处理`@try - @catch`。

# android - Android 4.0 及更高版本中的表单提交问题

> ID：12365023
> 
> 赞同：0
> 
> 时间：2012-09-11T07:43:58.807
> 
> 标签：android, html, jquery-mobile, android-webview

表单提交在 Android 4.0 中不起作用。相同的代码在较低版本的 Android 中运行良好。

找到我的代码供我们参考

```
<form id="login-form" data-ajax="false" method="get" action="POST"> 
<div id="userPassLogin">
  <div id="loginFormButtondiv" style="display: none;">
          <a href="#" id="loginFormButton"  style="font-size: small">Back to Login</a> 
      </div>
    <div id="loginDiv">
      <div data-role="fieldcontain" style="border: none; margin-top: 10px;">
      <input style="width: 95%" type="email" class="placeholder" name="login" id="username" placeholder="Login ID" data-theme="c"  value="Test286826.User286826@alere.com" />
  </div>
  <div data-role="fieldcontain" style="border: none; margin-top: 0px;">
  <input style="width: 95%" type="password" class="placeholder" name="password" id="password" placeholder="Password" data-theme="c"  value="P@ssw0rd" />
  </div>
 </form> 
```

控制器代码是，

```
'submit #login-form' : 'onSubmit', 
```

方法声明和定义是，

```
onSubmit : function(event)
{
    alert('Inside the Form Submit');
    if(isIOS){
        nativeCommunication.callNativeMethod("networkcheck://isServerHosted?");
    }
    if(isAndroid || mHealth.util.webHostStatus){
        alert('Inside the Form Submit');
        event.preventDefault();
        alert('Inside the Form Submit');
        if(isAndroid){
            alert('Inside the Form Submit');
            this.doLogin();
        }
    }
}, 
```

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:48:08.660

我通过覆盖 WebViewClient 修复了它

私有类 MyWebViewClient 扩展 WebViewClient {

```
 public String values = "";
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {

        if (url.contains("?")) {
            try {
                values = URLDecoder.decode(url, "UTF-8");
            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            }
            url = url.replace("?", "%45");
            String args[] = url.split("%45");
            view.loadUrl(args[0]);
        }else{
            view.loadUrl(url);
        }
        return true;
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        if(values.length()>0){
            if(url.contains("page2.html")){
                mWebView.loadUrl("javascript:getUrlVars(\""+values+"\");");
            }
        }
        super.onPageFinished(view, url);
    }

} 
```

# ruby-on-rails - Jenkins - Rake 插件找不到 Rake

> ID：12365024
> 
> 赞同：1
> 
> 时间：2012-09-11T07:44:02.557
> 
> 标签：ruby-on-rails, jenkins, rake, jenkins-plugins

我在我的 Jenkins 工作中使用了几个 Rake 步骤（通过 Rake 插件），但它声称无法找到 Rake：

```
+ bundle update
.................................
Using rake (0.9.2.2) 
.................................
[workspace] $ rake db:drop
FATAL: rake execution failed
java.io.IOException: Cannot run program "rake" (in directory "/var/lib/jenkins/jobs/myproject/workspace"): java.io.IOException: error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:475)
    at hudson.Proc$LocalProc.<init>(Proc.java:244)
    at hudson.Proc$LocalProc.<init>(Proc.java:216)
    at hudson.Launcher$LocalLauncher.launch(Launcher.java:709)
    at hudson.Launcher$ProcStarter.start(Launcher.java:338)
    at hudson.Launcher$ProcStarter.join(Launcher.java:345)
    at hudson.plugins.rake.Rake.perform(Rake.java:141)
    at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19)
    at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:717)
    at hudson.model.Build$BuildExecution.build(Build.java:199)
    at hudson.model.Build$BuildExecution.doRun(Build.java:160)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:499)
    at hudson.model.Run.execute(Run.java:1502)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:236)
Caused by: java.io.IOException: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:164)
    at java.lang.ProcessImpl.start(ProcessImpl.java:81)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:468)
    ... 15 more
Build step 'Invoke Rake' marked build as failure
Finished: FAILURE 
```

如果我在 Jenkins 的配置中手动指定 Ruby 路径：

```
[workspace] $ rake db:drop
[31mERROR: Gem rake is not installed, run `gem install rake` first.(B[m
Build step 'Invoke Rake' marked build as failure
Finished: FAILURE 
```

如果我在 Jenkins 中将 rake 作为普通 shell 命令执行，没有 Rake 插件：

```
+ rake db:drop
/var/lib/jenkins/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/yaml.rb:56:in `<top (required)>':
It seems your ruby installation is missing psych (for YAML output).
To eliminate this warning, please install libyaml and reinstall your ruby. 
```

当我执行“bundle exec rake db:drop”时，同样发生了两次。

在作业中暂时包括两行：

```
rvm pkg install libyaml
rvm reinstall 1.9.3 
```

没有帮助。（更新：这只是警告，不会影响任何事情，但很烦人）。

我在 Jenkins 之外的 ~/.rvm 目录中安装了另一个 RVM + Ruby 包，它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-14T16:56:09.527

不确定它是否对您有帮助，但我遇到了类似的问题。问题是我安装 Rake gem 的 Ruby 路径不在 Jenkins 进程的路径中。

我使用的 init.d 脚本 (/etc/init.d/jenkins) 硬编码了 PATH 变量：

```
PATH=/bin:/usr/bin:/sbin:/usr/sbin 
```

由于我使用的是 ChefDK，因此我将嵌入式 ChefDK Ruby 添加到了 init.d 脚本路径：

```
PATH=/bin:/usr/bin:/sbin:/usr/sbin:/opt/chefdk/embedded/bin:/opt/chefdk/bin/ 
```

您可能需要根据 Ruby 的安装位置修改路径。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:06:47.587

试试[Rake 插件](https://wiki.jenkins-ci.org/display/JENKINS/Rake+Plugin)。

对于我们的需要，[RVM 插件](https://wiki.jenkins-ci.org/display/JENKINS/RVM+Plugin)完成了这项工作，其余的就像捆绑软件一样，我们放在了脚本/shell 构建步骤中。

# java-me - IAPClientPaymentException：应用程序 ID 初始化失败 j2me nokia

> ID：12365026
> 
> 赞同：1
> 
> 时间：2012-09-11T07:44:10.230
> 
> 标签：java-me, in-app-purchase, nokia

我就是想知道，是什么让IAP在模拟器中测试时提示这种异常“com.nokia.mid.payment.IAPClientPaymentException：Application ID初始化失败”。另一个相关问题：文档说在将 TEST_MODE.TXT 文件指向实时服务器时删除它。我删除了文本，但现在我得到了安全异常。解决方法是什么？我正在使用 java sdk 2.0 和它附带的模拟器。

# c# - 如何在水晶报表中显示两个单独的列表？

> ID：12365027
> 
> 赞同：1
> 
> 时间：2012-09-11T07:44:13.927
> 
> 标签：c#, asp.net, crystal-reports-2010

我想在一个水晶报表中显示这两个独立的组，就像这张图片一样。

产品和分期付款计划按原样存储在数据库的两个表中。我尝试子报告/分组/部分，但我失败了。我无法理解，这是我关于水晶报告的逻辑或配置错误。请任何人指导我。我也用谷歌搜索了它，但没有找到有用的结果。

谢谢。

> 像这样报告：

![像这样报告](../Images/efc659575efc3c675c8a7a96522780bf.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T09:48:34.323

你可以用一个简单的逻辑来做到这一点。您可以在一个报告中创建产品销售报告，在另一个报告中创建销售报告的分期付款计划，您可以使用**子报告**将这两个报告合并到一个报告中。 [检查这个链接](http://csharpdotnetfreak.blogspot.com/2009/07/subreports-in-crystal-reports-in-aspnet.html)

# php - Linux Openssl 命令加密将通过 PHP 解密的文件

> ID：12365028
> 
> 赞同：1
> 
> 时间：2012-09-11T07:44:18.810
> 
> 标签：php, openssl, mcrypt

我必须加密将使用 PHP 按需解密的文件：

```
$fh = fopen('encrypted_file', 'rb');
$content = fread($fh, $size);
print mcrypt_decrypt(MCRYPT_TRIPLEDES, 'myPassword', $content, MCRYPT_MODE_ECB);
fclose($fh); 
```

我无法更改 PHP 代码，因为它在网站中多次使用。否则，我必须认真证明更改是强制性的。

现在，我的问题是找到 Linux OpenSSL 命令来加密将使用给定代码解密的文件。我试过这样的事情：

```
openssl enc -e -des3 -k myPassword -nosalt -in text_file -out encrypted_file 
```

但我无法通过 PHP 找到解密的文件。

你能帮我纠正 openssl 命令吗？有很多选项（我尝试了很多，我发誓），我不知道如何使它们与 PHP 相对应。

问候，

奥利维尔

# android - 发生 ANR 时选择 OK 以重新启动 Launcher 时删除事件

> ID：12365043
> 
> 赞同：1
> 
> 时间：2012-09-11T07:45:14.707
> 
> 标签：android, exception, launcher

当 Launcher 发生 ANR 时，会弹出对话框，然后 Launcher 会恢复。启动器恢复响应后，选择“确定”重新启动启动器，其余键将被丢弃。

问题出现在我的开发环境中，很难重现。所以我对此进行了测试：

1.  创建一个简单的 APK 作为 Launcher，并在 onCreat 或 onResume 中休眠一段时间以让 ANR 发生
2.  启动 Launcher 并按下 键让 ANR 发生
3.  睡眠后视图通常显示在 ANR 对话框后面选择确定以重新启动启动器，然后无法接收密钥，因为无法创建活动
4.  由于没有焦点窗口或焦点应用程序而丢弃事件

APK在Android4.0和Android2.2上使用Android2.2没有问题，Android 4.03貌似有问题。为 2.2、4.03 中的真实测试问题和模拟问题提供了日志。另外：我也修改了原始的Launcher2并在onResume中休眠，它没有这样的问题但我找不到任何线索。

任何帮助表示赞赏。

* * *

安卓4.0

```
09-10 17:29:44.716 W/ActivityManager(   77):   Force finishing activity       com.example.testanr2/.MainActivity
09-10 17:29:44.716 W/WindowManager(   77): Failure taking screenshot for (180x300) to layer 21005
09-10 17:29:44.736 I/ActivityManager(   77): Clearing package preferred activities from com.example.testanr2
09-10 17:29:44.736 I/ActivityManager(   77): Killing ProcessRecord{415df8d8 2409:com.example.testanr2/10040}: user's request
09-10 17:29:44.756 I/WindowManager(   77): WIN DEATH: Window{41444c48 com.example.testanr2/com.example.testanr2.MainActivity paused=true}
09-10 17:29:44.765 I/ActivityManager(   77): START {act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10000000 cmp=com.example.testanr2/.MainActivity} from pid 0
09-10 17:29:44.786 W/ActivityManager(   77): Exception when starting activity com.example.testanr2/.MainActivity
09-10 17:29:44.786 W/ActivityManager(   77): android.os.DeadObjectException
09-10 17:29:44.786 W/ActivityManager(   77):    at android.os.BinderProxy.transact(Native Method)
09-10 17:29:44.786 W/ActivityManager(   77):    at android.app.ApplicationThreadProxy.scheduleLaunchActivity(ApplicationThreadNative.java:660)
09-10 17:29:44.786 W/ActivityManager(   77):    at com.android.server.am.ActivityStack.realStartActivityLocked(ActivityStack.java:593)
09-10 17:29:44.786 W/ActivityManager(   77):    at com.android.server.am.ActivityStack.startSpecificActivityLocked(ActivityStack.java:701)
09-10 17:29:44.786 W/ActivityManager(   77):    at com.android.server.am.ActivityStack.resumeTopActivityLocked(ActivityStack.java:1571)
09-10 17:29:44.786 W/ActivityManager(   77):    at com.android.server.am.ActivityStack.completePauseLocked(ActivityStack.java:1000)
09-10 17:29:44.786 W/ActivityManager(   77):    at com.android.server.am.ActivityStack.activityPaused(ActivityStack.java:928)
09-10 17:29:44.786 W/ActivityManager(   77):    at com.android.server.am.ActivityManagerService.activityPaused(ActivityManagerService.java:3957)
09-10 17:29:44.786 W/ActivityManager(   77):    at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:371)
09-10 17:29:44.786 W/ActivityManager(   77):    at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1496)
09-10 17:29:44.786 W/ActivityManager(   77):    at android.os.Binder.execTransact(Binder.java:338)
09-10 17:29:44.786 W/ActivityManager(   77):    at dalvik.system.NativeStart.run(Native Method)
09-10 17:29:44.786 W/ActivityManager(   77): Force removing ActivityRecord{414b0020 com.example.testanr2/.MainActivity}: app died, no saved state
09-10 17:29:44.836 D/dalvikvm( 2438): Not late-enabling CheckJNI (already on)
09-10 17:29:44.855 I/ActivityManager(   77): Start proc com.example.testanr2 for activity com.example.testanr2/.MainActivity: pid=2438 uid=10040 gids={}
09-10 17:29:44.855 I/ActivityManager(   77): Process com.example.testanr2 (pid 2409) has died and restarted (pid 2438).
09-10 17:29:44.855 W/NetworkManagementSocketTagger(   77): setKernelCountSet(10040, 0) failed with errno -2
09-10 17:29:47.562 I/InputDispatcher(   77): Dropping event because there is no touched window or focused application.
09-10 17:29:47.828 I/InputDispatcher(   77): Dropping event because there is no touched window or focused application.
09-10 17:29:47.965 D/dalvikvm(  161): GC_CONCURRENT freed 384K, 6% free 10331K/10951K, paused 7ms+3ms
09-10 17:29:48.135 I/InputDispatcher(   77): Dropping event because there is no touched window or focused application.
09-10 17:29:50.207 I/InputDispatcher(   77): Dropping event because there is no touched window or focused application.
09-10 17:29:50.708 I/InputDispatcher(   77): Dropping event because there is no touched window or focused application.
09-10 17:29:50.991 I/InputDispatcher(   77): Dropping event because there is no touched window or focused application.
09-10 17:29:51.205 I/InputDispatcher(   77): Dropping event because there is no touched window or focused application.
09-10 17:29:51.362 I/InputDispatcher(   77): Dropping event because there is no touched window or focused application.
09-10 17:29:54.746 W/ActivityManager(   77): Launch timeout has expired, giving up wake lock!
09-10 17:29:57.877 I/InputDispatcher(   77): Dropping event because there is no touched window or focused application. 
```

安卓2.2

```
09-10 16:40:32.254 D/PackageManager(   72): New package installed in /data/app/com.example.testanr2-1.apk
09-10 16:40:32.304 D/lixin   (  668): sleep~ in application10
09-10 16:40:32.394 I/ActivityManager(   72): Force stopping package com.example.testanr2 uid=10040
09-10 16:40:32.394 I/Process (   72): Sending signal. PID: 668 SIG: 9
09-10 16:40:32.414 I/ActivityManager(   72): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10000000 cmp=com.example.testanr2/.MainActivity }
09-10 16:40:32.484 D/dalvikvm(   72): GC_FOR_MALLOC freed 11945 objects / 732440 bytes in 67ms
09-10 16:40:32.484 I/ActivityManager(   72): Start proc com.example.testanr2 for activity com.example.testanr2/.MainActivity: pid=674 uid=10040 gids={}
09-10 16:40:32.604 D/dalvikvm(  198): GC_EXPLICIT freed 2644 objects / 128328 bytes in 105ms
09-10 16:40:32.734 D/dalvikvm(   72): GC_EXPLICIT freed 939 objects / 49752 bytes in 229ms
09-10 16:40:32.734 I/UsageStats(   72): Unexpected resume of com.example.testanr2 while already resumed in com.example.testanr2
09-10 16:40:32.834 W/RecognitionManagerService(   72): no available voice recognition services found
09-10 16:40:32.864 D/lixin   (  674): sleep~ in application10
09-10 16:40:32.915 D/dalvikvm(   72): GC_EXPLICIT freed 2356 objects / 116024 bytes in 77ms
09-10 16:40:32.954 I/installd(   34): unlink /data/dalvik-cache/data@app@com.example.testanr2-2.apk@classes.dex
09-10 16:40:32.984 D/AndroidRuntime(  654): Shutting down VM
09-10 16:40:32.984 D/dalvikvm(  654): Debugger has detached; object registry had 1 entries
09-10 16:40:33.245 D/AndroidRuntime(  684): 
09-10 16:40:33.245 D/AndroidRuntime(  684): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
09-10 16:40:33.245 D/AndroidRuntime(  684): CheckJNI is ON
09-10 16:40:33.334 D/AndroidRuntime(  684): --- registering native functions ---
09-10 16:40:33.665 I/ActivityManager(   72): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.testanr2/.MainActivity }
09-10 16:40:33.665 D/AndroidRuntime(  684): Shutting down VM
09-10 16:40:33.665 D/dalvikvm(  684): Debugger has detached; object registry had 1 entries
09-10 16:40:33.674 I/AndroidRuntime(  684): NOTE: attach of thread 'Binder Thread #3' failed
09-10 16:40:34.169 W/ActivityManager(   72): Activity pause timeout for HistoryRecord{45060dd8 com.example.testanr2/.MainActivity}
09-10 16:40:40.057 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:40.074 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:40.275 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:40.314 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:40.445 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:40.484 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:40.528 W/ActivityManager(   72): Launch timeout has expired, giving up wake lock!
09-10 16:40:40.678 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:40.714 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:40.864 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:40.874 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:41.604 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:41.637 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:41.755 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:41.786 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:41.936 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:41.954 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:42.088 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:42.124 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:42.234 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:42.295 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:42.404 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:42.444 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:42.595 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:42.614 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:42.744 W/ActivityManager(   72): Activity idle timeout for HistoryRecord{45060dd8 com.example.testanr2/.MainActivity}
09-10 16:40:42.744 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:42.754 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:42.885 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:42.885 D/lixin   (  674): sleep~ in application10
09-10 16:40:42.926 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:44.181 W/ActivityManager(   72): Activity idle timeout for        HistoryRecord{451b0480 com.example.testanr2/.MainActivity}
09-10 16:40:47.029 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:47.045 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:47.280 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:47.345 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:47.545 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:47.595 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:47.794 W/WindowManager(   72): No window to dispatch pointer action 0
09-10 16:40:47.865 W/WindowManager(   72): No window to dispatch pointer action 1
09-10 16:40:49.235 D/dalvikvm(  289): GC_EXPLICIT freed 353 objects / 19600 bytes in 56ms
09-10 16:40:52.924 W/InputManagerService(   72): Got RemoteException sending setActive(false) notification to pid 575 uid 10040
09-10 16:40:52.964 I/ActivityManager(   72): Displayed activity com.example.testanr2/.MainActivity: 18800 ms (total 22687 ms) 
```

启动器2

```
01-01 08:12:56.140 I/WindowManager( 1259): Handle special keys: 23 
01-01 08:12:56.145 W/ActivityManager( 1259):   Force finishing activity com.android.launcher/com.android.launcher2.Launcher
01-01 08:12:56.239 D/dalvikvm( 1259): GC_FOR_ALLOC freed 462K, 13% free 10871K/12423K, paused 48ms
01-01 08:12:56.242 D/UsageStats( 1259): UsageStats: broadcasting intent
01-01 08:12:56.244 I/ActivityManager( 1259): Clearing package preferred activities from com.android.launcher
01-01 08:12:56.244 I/ActivityManager( 1259): Killing ProcessRecord{40c2f498 2970:com.android.launcher/10032}: user's request
01-01 08:12:56.252 I/ActivityManager( 1259): START {act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10000000 cmp=com.android.launcher/com.android.launcher2.Launcher} from pid 0
01-01 08:12:56.303 E/JavaBinder( 1259): !!! FAILED BINDER TRANSACTION !!!
01-01 08:12:56.330 W/ActivityManager( 1259): Exception when starting activity com.android.launcher/com.android.launcher2.Launcher
01-01 08:12:56.330 W/ActivityManager( 1259): android.os.TransactionTooLargeException
01-01 08:12:56.330 W/ActivityManager( 1259):    at android.os.BinderProxy.transact(Native Method)
01-01 08:12:56.330 W/ActivityManager( 1259):    at android.app.ApplicationThreadProxy.scheduleLaunchActivity(ApplicationThreadNative.java:660)
01-01 08:12:56.330 W/ActivityManager( 1259):    at com.android.server.am.ActivityStack.realStartActivityLocked(ActivityStack.java:615)
01-01 08:12:56.330 W/ActivityManager( 1259):    at com.android.server.am.ActivityStack.startSpecificActivityLocked(ActivityStack.java:724)
01-01 08:12:56.330 W/ActivityManager( 1259):    at com.android.server.am.ActivityStack.resumeTopActivityLocked(ActivityStack.java:1614)
01-01 08:12:56.330 W/ActivityManager( 1259):    at com.android.server.am.ActivityStack.startActivityLocked(ActivityStack.java:1760)
01-01 08:12:56.330 W/ActivityManager( 1259):    at com.android.server.am.ActivityStack.startActivityUncheckedLocked(ActivityStack.java:2802)
01-01 08:12:56.330 W/ActivityManager( 1259):    at com.android.server.am.ActivityStack.startActivityLocked(ActivityStack.java:2422)
01-01 08:12:56.330 W/ActivityManager( 1259):    at com.android.server.am.ActivityManagerService.startHomeActivityLocked(ActivityManagerService.java:2063)
01-01 08:12:56.330 W/ActivityManager( 1259):    at com.android.server.am.ActivityStack.resumeTopActivityLocked(ActivityStack.java:1299)
01-01 08:12:56.330 W/ActivityManager( 1259):    at com.android.server.am.ActivityStack.completePauseLocked(ActivityStack.java:1040)
01-01 08:12:56.330 W/ActivityManager( 1259):    at com.android.server.am.ActivityStack.activityPaused(ActivityStack.java:952)
01-01 08:12:56.330 W/ActivityManager( 1259):    at com.android.server.am.ActivityManagerService.activityPaused(ActivityManagerService.java:4140)
01-01 08:12:56.330 W/ActivityManager( 1259):    at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:371)
01-01 08:12:56.330 W/ActivityManager( 1259):    at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1548)
01-01 08:12:56.330 W/ActivityManager( 1259):    at android.os.Binder.execTransact(Binder.java:338)
01-01 08:12:56.330 W/ActivityManager( 1259):    at com.android.server.SystemServer.init1(Native Method)
01-01 08:12:56.330 W/ActivityManager( 1259):    at com.android.server.SystemServer.main(SystemServer.java:860)
01-01 08:12:56.330 W/ActivityManager( 1259):    at java.lang.reflect.Method.invokeNative(Native Method)
01-01 08:12:56.330 W/ActivityManager( 1259):    at java.lang.reflect.Method.invoke(Method.java:511)
01-01 08:12:56.330 W/ActivityManager( 1259):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
01-01 08:12:56.330 W/ActivityManager( 1259):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
01-01 08:12:56.330 W/ActivityManager( 1259):    at dalvik.system.NativeStart.main(Native Method)
01-01 08:12:56.345 E/JavaBinder( 1259): !!! FAILED BINDER TRANSACTION !!!
01-01 08:12:56.408 I/ActivityManager( 1259): Start proc com.android.launcher for activity com.android.launcher/com.android.launcher2.Launcher: pid=3000 uid=10032 gids={}
01-01 08:12:56.484 D/UsageStats( 1259): UsageStats: broadcasting intent
01-01 08:12:56.613 I/ActivityThread( 3000): Pub com.android.launcher2.settings: com.android.launcher2.LauncherProvider
01-01 08:12:56.862 D/dalvikvm( 3000): GC_FOR_ALLOC freed 164K, 5% free 7837K/8199K, paused 21ms
01-01 08:12:56.986 I/Process ( 1259): Sending signal. PID: 3000 SIG: 3
01-01 08:12:56.986 I/dalvikvm( 3000): threadid=3: reacting to signal 3
01-01 08:12:57.007 W/WindowManager( 1259): Rebuild removed 2 windows but added 1
01-01 08:12:57.012 W/WindowManager( 1259): This window was lost: Window{40c51350 com.android.launcher/com.android.launcher2.Launcher paused=true}
01-01 08:12:57.012 W/WindowManager( 1259): mSession=Session{40bee818 uid 10032} mClient=android.os.BinderProxy@40bbecd8
01-01 08:12:57.012 W/WindowManager( 1259): mAttrs=WM.LayoutParams{(0,0)(fillxfill) sim=#20 ty=1 fl=#1810100 pfl=0x8 fmt=-2 wanim=0x1030292}
01-01 08:12:57.012 W/WindowManager( 1259): Requested w=1920 h=1080 mLayoutSeq=148
01-01 08:12:57.012 W/WindowManager( 1259): mBaseLayer=21000 mSubLayer=0 mAnimLayer=21000+0=21000 mLastLayer=21000
01-01 08:12:57.012 W/WindowManager( 1259): mSurface=Surface(name=com.android.launcher/com.android.launcher2.Launcher, identity=34)
01-01 08:12:57.012 W/WindowManager( 1259): Surface: shown=false layer=21000 alpha=1.0 rect=(0.0,0.0) 1920.0 x 1080.0
01-01 08:12:57.012 W/WindowManager( 1259): mToken=AppWindowToken{40cb7750 token=Token{40b37598 ActivityRecord{40b9c4c0 com.android.launcher/com.android.launcher2.Launcher}}}
01-01 08:12:57.012 W/WindowManager( 1259): mRootToken=AppWindowToken{40cb7750 token=Token{40b37598 ActivityRecord{40b9c4c0 com.android.launcher/com.android.launcher2.Launcher}}}
01-01 08:12:57.012 W/WindowManager( 1259): mAppToken=AppWindowToken{40cb7750 token=Token{40b37598 ActivityRecord{40b9c4c0 com.android.launcher/com.android.launcher2.Launcher}}}
01-01 08:12:57.012 W/WindowManager( 1259): mViewVisibility=0x0 mLastHidden=true mHaveFrame=true mObscured=false
01-01 08:12:57.012 W/WindowManager( 1259): mSeq=0 mSystemUiVisibility=0x0
01-01 08:12:57.012 W/WindowManager( 1259): mGivenContentInsets=[0,0][0,0] mGivenVisibleInsets=[0,0][0,0]
01-01 08:12:57.012 W/WindowManager( 1259): mConfiguration={1.0 0mcc0mnc zh_CN layoutdir=0 sw720dp w1280dp h720dp xlrg long land -touch -keyb/v/h dpad/v s.4}
01-01 08:12:57.012 W/WindowManager( 1259): mShownFrame=[0.0,0.0][1920.0,1080.0]
01-01 08:12:57.012 W/WindowManager( 1259): mFrame=[0,0][1920,1080] last=[0,0][1920,1080]
01-01 08:12:57.012 W/WindowManager( 1259): mContainingFrame=[0,0][1920,1080] mParentFrame=[0,0][1920,1080] mDisplayFrame=[0,0][1920,1080]
01-01 08:12:57.012 W/WindowManager( 1259): mContentFrame=[0,0][1920,1080] mVisibleFrame=[0,0][1920,1080]
01-01 08:12:57.012 W/WindowManager( 1259): mContentInsets=[0,0][0,0] last=[0,0][0,0] mVisibleInsets=[0,0][0,0] last=[0,0][0,0]
01-01 08:12:57.012 W/WindowManager( 1259): mDrawPending=false mCommitDrawPending=false mReadyToShow=false mHasDrawn=true
01-01 08:12:57.012 W/WindowManager( 1259): mWallpaperX=0.5 mWallpaperY=0.5
01-01 08:12:57.012 W/WindowManager( 1259): mWallpaperXStep=0.25 mWallpaperYStep=1.0
01-01 08:12:57.012 W/WindowManager( 1259): Current app token list:
01-01 08:12:57.012 V/WindowManager( 1259):   #0: Token{40ba4ee8 ActivityRecord{40bb8cd8 com.android.launcher/com.android.launcher2.Launcher}}
01-01 08:12:57.012 W/WindowManager( 1259): Final window list:
01-01 08:12:57.012 V/WindowManager( 1259):   #1: Window{40b78338 InputMethod paused=false}
01-01 08:12:57.012 V/WindowManager( 1259):   #0: Window{40c6f7b8 Starting com.android.launcher paused=false}
01-01 08:12:57.035 I/WindowManager( 1259): WIN DEATH: Window{40c51350 com.android.launcher/com.android.launcher2.Launcher paused=true}
01-01 08:12:57.039 I/dalvikvm( 3000): Wrote stack traces to '/data/anr/traces.txt'
01-01 08:12:57.051 D/dalvikvm( 3000): GC_CONCURRENT freed 264K, 6% free 8034K/8519K, paused 5ms+1ms
01-01 08:12:57.251 D/dalvikvm( 3000): GC_FOR_ALLOC freed 168K, 5% free 8217K/8583K, paused 14ms
01-01 08:12:57.263 I/dalvikvm-heap( 3000): Grow heap (frag case) to 10.641MB for 2560016-byte allocation
01-01 08:12:57.278 D/dalvikvm( 3000): GC_CONCURRENT freed 13K, 4% free 10704K/11143K, paused 2ms+1ms
01-01 08:12:57.358 D/dalvikvm( 3000): GC_FOR_ALLOC freed 0K, 4% free 10704K/11143K, paused 10ms
01-01 08:12:57.370 D/KeyLayoutMap( 1259): mapKey: scanCode=106 ~ Result keyCode=22, flags=0x00000002.
01-01 08:12:57.370 D/InputReader( 1259): receive key event: device=6 type=0x0001 scancode=106(0x006a) keycode=22(0x0016) value=0x00000001 flags=0x00000002
01-01 08:12:57.370 I/WindowManager( 1259): Handle special keys: 22 
01-01 08:12:57.372 I/dalvikvm-heap( 3000): Grow heap (frag case) to 12.001MB for 1440016-byte allocation
01-01 08:12:57.394 D/dalvikvm( 3000): GC_CONCURRENT freed 0K, 4% free 12110K/12551K, paused 1ms+2ms
01-01 08:12:57.453 D/Launcher( 3000): #### onCreate setBackgroundColor
01-01 08:12:57.454 D/Launcher( 3000): sleep~main10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:47:34.590

我将属性添加到启动器清单中的主要活动

```
android:clearTaskOnLaunch="true"  
android:stateNotNeeded="true" 
```

这两个属性在Android的原始Launcher中可以解决这个问题，但它为什么起作用仍然未知。

# flash - 禁用 Flash 播放器进行测试

> ID：12365045
> 
> 赞同：0
> 
> 时间：2012-09-11T07:45:21.087
> 
> 标签：flash, swfobject

出于测试目的，我想禁用 Flash 播放器，使其不再显示任何 swf。是否有一个简单的解决方案，或者我应该卸载 Flash 播放器？我使用了 swfobject，它在未安装 flash 时显示图像。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:49:29.753

`about:plugins`您可以在 url 栏中键入 Chrome 轻松完成此操作。

然后，搜索您的 Flash 插件并单击`disable`以禁用它们。完成后，只需返回启用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:44:03.787

使用 Opera，按 F12 并取消选中“启用插件”

[http://help.opera.com/Windows/8.52/en/menus.html#quickprefscontext](http://help.opera.com/Windows/8.52/en/menus.html#quickprefscontext)

如果您想要（较短的）快捷方式，您可以使用此选项自定义任何带有复选框的工具栏

# jquery - jQuery - 将文本从选择列表复制/移动到 textarea

> ID：12365049
> 
> 赞同：4
> 
> 时间：2012-09-11T07:46:01.617
> 
> 标签：jquery, select, textarea

下面的 img 描述了我正在尝试做的事情：

![将文本从选择列表复制到 textarea](../Images/169bc99b7d00b09e2a40d73093c1bf14.png)

因此，当从选择列表中选择一个条目并按下“复制”按钮时，它将向文本区域添加一个 <li> 元素。

任何想法，资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:58:17.977

我举个例子，简单的一个：

HTML 代码：

```
<select multiple="multiple" class="options">
    <option value="item1">Item 1</option>
    <option value="item2">Item 2</option>
    <option value="item3">Item 3</option>
    <option value="item4">Item 4</option>
    <option value="item5">Item 5</option>
</select>

<button id="test">Copy</button>

<textarea cols="25" rows="5" id="textarea"></textarea> 
```

Javascript：

```
$(function(){
    $("#test").on("click", function(){
        $("#textarea").empty(); //to empty textarea content
        $(".options option:selected").each(function(){
           $("#textarea").append("* "+$(this).text()+ "\n");
        }); 
    });       
}); 
```

演示：http: [//jsfiddle.net/pf5CU/](http://jsfiddle.net/pf5CU/)

**更新**

[http://jsfiddle.net/pf5CU/1/](http://jsfiddle.net/pf5CU/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T10:03:05.500

链接[http://jsfiddle.net/pf5CU/43/](http://jsfiddle.net/pf5CU/43/)

用这个

```
 $("#textarea2").append('<option>'+$(this).text()+'</option>'); 
        $('option:selected', "#textarea").remove(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T07:47:40.253

单击按钮时，您可以使用 jQuery 读取所选选项并将其添加到文本区域。

**HTML**

```
<select id="selectBox">
    <option>option 1</option>
    <option>option 2</option>
    <option>option 3</option>
</select>

<input id="copyBtn" type="button" value="copy" />

<textarea id="output">
    This is some intro text
</textarea>​ 
```

**jQuery**

```
$("#copyBtn").click(function(){
    var selected = $("#selectBox").val();
    $("#output").append("\n * " + selected);
});​ 
```

您只能将文本添加到文本区域，它不会呈现 html 标签（因此其中的列表不起作用）。我曾经`\n`创建换行符。

**小提琴**

[这是一个工作小提琴](http://jsfiddle.net/qy7rT/6/)

# xml - XQuery：如何顺序查找预期数据的出现（类似于状态机）

> ID：12365050
> 
> 赞同：1
> 
> 时间：2012-09-11T07:46:06.360
> 
> 标签：xml, xquery, saxon

美好的一天，首先感谢您阅读我的 XQuery 问题。

我需要在 XQuery 中实现一个函数来顺序检测数据结构中的项目。由于我是 XQuery 的新手，我仍然发现一些不熟悉的概念，非常感谢那些有多年经验的人提供的帮助，与我在 XQUery/Saxon 的几周相比。

这是日志文件分析的一部分，我已经将相关数据归结为更紧凑的 XML 结构（见下文），该结构按顺序保存在我的 XQuery 模块中。我现在需要将此序列传递给检测数据中特定事件的函数。我的结构如下：-

```
<SEQUENCE><TIME>0.01</TIME><TAG>2100</TAG><FIELD>PRIMARY_MODE_CMD</FIELD><MODE>MODE1</MODE></SEQUENCE>
<SEQUENCE><TIME>0.57</TIME><TAG>2900</TAG><FIELD>PRIMARY_MODE_CNF</FIELD><MODE>MODE1</MODE></SEQUENCE>
<SEQUENCE><TIME>0.65</TIME><TAG>2900</TAG><FIELD>PRIMARY_MODE_CNF</FIELD><MODE>MODE1</MODE></SEQUENCE>
<SEQUENCE><TIME>1.29</TIME><TAG>2900</TAG><FIELD>PRIMARY_MODE_CNF</FIELD><MODE>MODE1</MODE></SEQUENCE>
<SEQUENCE><TIME>1.94</TIME><TAG>2900</TAG><FIELD>PRIMARY_MODE_CNF</FIELD><MODE>MODE1</MODE></SEQUENCE>
<SEQUENCE><TIME>2.57</TIME><TAG>2900</TAG><FIELD>PRIMARY_MODE_CNF</FIELD><MODE>MODE1</MODE></SEQUENCE>
<SEQUENCE><TIME>3.01</TIME><TAG>3800</TAG><FIELD>JAT_INITIALISE_CMD</FIELD><MODE>UPDATE_JAT_INITIALISE_PARAMS</MODE></SEQUENCE>
<SEQUENCE><TIME>3.03</TIME><TAG>2900</TAG><FIELD>PRIMARY_MODE_CNF</FIELD><MODE>MODE1</MODE></SEQUENCE>
<SEQUENCE><TIME>3.03</TIME><TAG>2900</TAG><FIELD>INVALID_CMD_CNF</FIELD><MODE>INVALID</MODE></SEQUENCE> 
```

XQuery 函数（例如 '*declare function local:analyse_case_1($seq as element() *) as xs:boolean* '）必须将整个元素序列（如上）作为参数，如果在其中找到三个事件，则返回“true”严格的顺序，即：

```
'2100 + PRIMARY_MODE_CMD + MODE1' - followed by:
'2900 + PRIMARY_MODE_CNF + MODE1' - followed by:
'3800 + JAT_INITIALISE_CMD + UPDATE_JAT_INITIALISE_PARAMS' - followed by:
'2900 + INVALID_CMD_CNF + INVALID' 
```

如果发现此订单不正确、缺少项目等，该函数将返回 false。作为第二个要求，如果这些项目之间的时间长于 0.60，它也应该返回 false

在过去一天左右详细研究了 XQuery 之后，我认为这在编译语言中很容易实现，但由于某种原因，我无法立即看到使用 XQuery 的方法。我希望有人能指出我正确的方向吗？

感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:44:39.780

我的印象是您的要求是查找按顺序但不一定相邻的消息。这可以通过以下形式的查询来实现

```
exists(
  SEQUENCE[TAG='2100' and FIELD='PRIMARY_MODE_CMD' and MODE='MODE1']
  /following-sibling::SEQUENCE[TAG='2900' and FIELD='PRIMARY_MODE_CNF' and MODE='MODE1']
  /following-sibling::SEQUENCE[TAG='3800' and FIELD='JAT_INITIALISE_CMD' and MODE='UPDATE_JAT_INITIALISE_PARAMS']
  /following-sibling::SEQUENCE[TAG='2900' and FIELD='INVALID_CMD_CNF' and MODE='INVALID']) 
```

问题的第二部分，

```
it should also return false if the time between these items is longer than 0.60 
```

没有明确规定。你是指第一个和最后一个之间的时间，还是任何一对事件之间的时间？您基本上可以通过将变量绑定到所选元素来处理此问题：

```
let $x := SEQUENCE[...],
    $y := $x/following-sibling[...],
    $z := $y/following-sibling[...][TIME lt $x/TIME + 0.6]
return exists($z) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:28:02.527

构造`for $x at $pos in $seq`是你的朋友：

```
for $x at $pos in $seq
  where $x/TAG eq "2100"
    and $x/FIELD eq "PRIMARY_MODE_CMD"
    and (some $y in subsequence($seq, $pos, count($seq))
           satisfies ($y/TAG eq "2900" and $y/FIELD eq "PRIMARY_MODE_CNF"))
  return $x 
```

这还不是完整的查询，但您应该可以从这里开始。在实践中，我会把它变成几个函数。请注意，`subsequence`循环内的调用意味着此查询在最坏的情况下需要 O(n²) 时间*。*

# objective-c - 将数组的元素值加载到另一个数组 Xcode Objective-C

> ID：12365051
> 
> 赞同：-1
> 
> 时间：2012-09-11T07:46:09.313
> 
> 标签：objective-c, xcode, arrays

在这里，我从数组中`cityName1`获取了城市名称，如 Piscataway、Iselin、Broklyn 等，我需要将值放入一个名为.`tgpList1``item5`

上述迭代获取了 133 条记录。以下代码仅存储最后一条记录`cityName1`，而不是整个城市名称列表，尽管在循环内。

我尝试了很多方法，但我错过了一些东西。

`tgpList1`是一个数组。 `tgpDAO`是一个 NSObject 有两个对象`NSString *airportCode`和`NSString *cityName`

```
NSArray *item5 = [[NSArray alloc]init]; 
for (int currentIndex=0; currentIndex<[tgpList1 count]; currentIndex++)
{
    tgpDAO *tgpTable = (tgpDAO *)[self.tgpList1 objectAtIndex:currentIndex];
    NSLog(@"The array values are %@",tgpList1);

    NSString *cityName1 = tgpTable.cityName;

    item5 =[NSArray arrayWithObjects:cityName1, nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:53:56.753

代替

```
item5 =[NSArray arrayWithObjects:cityName1, nil]; 
```

利用

```
[item5 addObject:cityName1]; 
```

还有更多方法可以实现这一目标。但是，这是为此目的而设计的，并且从我的观点来看，这是最“可读”的。

如果需要先清除item5的内容然后调用

```
[item5 removeAllObjects]; 
```

就在 for 循环之前。

您在做什么：arrayWithObjects 总是创建一个新数组，该数组由作为参数传递给它的对象组成。如果您不使用 ARC，那么您的代码会造成严重的内存泄漏，因为 arrayWithObjects 在每个循环中创建并保留一个对象，并且在下一个循环中，对刚刚创建的数组对象的所有引用都会丢失而不会被释放. 如果您执行 ARC，那么您不必担心这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:55:09.150

使用可变数组。

```
{

   NSMutableArray *item5 = [[NSMutableArray alloc]initWithArray:nil];
   for (int currentIndex=0; currentIndex<[tgpList1 count]; currentIndex++) {            

       tgpDAO *tgpTable = (tgpDAO *)[self.tgpList1 objectAtIndex:currentIndex];
       NSLog(@"The array values are %@",tgpList1);
       NSString *cityName1 = tgpTable.cityName;
       [item5 addObject:cityName1];

   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:55:43.643

```
NSMutableArray *myCities = [NSMutableArray arrayWithCapacity:2]; // will grow if needed.

for( some loop conditions )
{
  NSString* someCity = getCity();
  [myCities addObject:someCity];
}

NSLog(@"number of cities in array: %@",[myCities count]); 
```

# r - geom_line - 同一行中的不同颜色

> ID：12365052
> 
> 赞同：15
> 
> 时间：2012-09-11T07:46:15.060
> 
> 标签：r, ggplot2

嗨，我有一个关于 geom_line 的问题。

我想要做的是，对于同一条线，根据某些过滤器将不同的颜色段应用于另一个变量，即不是用于绘制线的变量。

例如，如果我们有一个带有标头时间、var1 和 var2 的数据帧

```
time <- seq (1,7,1)
var1  <- c(3,5,7,2,3,2,8)
var2 <- c(2,4,18,16,12,3,2) 
```

如果我使用 geom_line 绘制时间 vs var1 并假设我想通过在变量 var2 上应用大于 10 的过滤器来为线着色。所以这条线在时间 1、2、6、7 和 3、4、5 时将具有相同的颜色。

请告诉我这是否可能？如果是这样，请给我一些指示。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-14T22:44:28.520

这是你想要的吗？

```
time <- seq (1,7,1)
var1 <- c(3,5,7,2,3,2,8)
var2 <- c(2,4,18,16,12,3,2)
DF <- data.frame(time, var1, var2)

ggplot(DF, aes(time, var1, colour=(var2>10))) + 
  geom_line(aes(group=1)) 
```

![在此处输入图像描述](../Images/ff53a087e2f0f7112b86e49b01e97509.png)

# vba - 如何选择列单元格

> ID：12365055
> 
> 赞同：0
> 
> 时间：2012-09-11T07:46:28.917
> 
> 标签：vba, excel

您好，我已经编写了将值添加到单元格中的代码 ..LIKE A1、A2、A3 等代码是

```
Sum = Abs(rangex1) + Abs(rangex2)

Debug.Print (Sum)

step_size = Sum / XDim

step_half = step_size / 2

start_point = rangex1 + step_half
Debug.Print (step_size)
Debug.Print (step_half)
Debug.Print (start_point)

For i = 1 To XDim

Range("A" & i) = start_point
start_point = start_point + step_size

Next i 
```

现在我想按列将值添加到单元格中，例如：A1、B1、C1、D1、E1 等等......我可能不知道如何使用 for 循环

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:29:06.060

您可以使用该`.Cells(r,c)`物业。`r`行号和`c`列号在哪里

例如

`A1`是`Cells(1,1)`

`B1`是`Cells(1,2)`等等……

所以你可以写一个这样的循环

```
With ThisWorkbook.Sheets("Sheet1")
    For i = 1 To 5 '<~~ A to E. Change as applicable
        .Cells(1, i).Value = "Blah Blah"
    Next
End With 
```

# crystal-reports - 水晶报表显示记录数

> ID：12365062
> 
> 赞同：0
> 
> 时间：2012-09-11T07:46:48.903
> 
> 标签：crystal-reports, crystal-reports-2008

我有水晶在我的详细信息部分生成以下输出

```
Cats    Group   
Number  How Old 
________________________ 
12      0-30 days old  
32      0-30 days old  
34      31-60 days old  

Dogs    Group      
Number  How Old  
________________________
22      over 61 days old  
123     0-30 days old 
```

但我需要表格格式的上述信息

```
Group  0-30 days old  31-60 days old  over 61 days old  
______________________________________________________
Cats   2               1                 0  
Dogs   1               0                 1 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:22:02.667

你需要一个交叉表；

打开交叉表专家

拖入`group`拖入`columns`
拖入`animal type`并设置为`rows`
汇总选项 `animal``value``count`

# postgresql - PostgreSQL：为什么查询具有“限制1”的无索引列的where条件的表非常快？

> ID：12365063
> 
> 赞同：0
> 
> 时间：2012-09-11T07:46:59.417
> 
> 标签：postgresql

我对状态感到很困惑，我发现查询一个带有“limit 1”的无索引列的where条件的表非常快T，尽管该列没有索引。下面是一个例子：

**--1 创建包含 20000000 条数据的测试表**

```
francs=> create table test_limit (id int4,name varchar(32));
CREATE TABLE

francs=> insert into test_limit select generate_series(1,20000000),generate_series(1,20000000) || 'a';
INSERT 0 20000000

francs=> \d test_limit;
         Table "francs.test_limit"
 Column |         Type          | Modifiers 
--------+-----------------------+-----------
 id     | integer               | 
 name   | character varying(32) | 
```

**--2 查询表**

```
francs=> explain analyze select * from test_limit where id=1;
                                                 QUERY PLAN                                                  
-------------------------------------------------------------------------------------------------------------
 Seq Scan on test_limit  (cost=0.00..358111.05 rows=1 width=13) (actual time=0.028..3162.477 rows=1 loops=1)
   Filter: (id = 1)
 Total runtime: 3162.531 ms
(3 rows) 
```

请注意，它大约需要 3162 毫秒，但正如我预期的那样非常慢。</p>

**--3 带有“限制 1”原因的查询表**

```
francs=> explain analyze select * from test_limit where id=1 limit 1;
                                                   QUERY PLAN                                                   
----------------------------------------------------------------------------------------------------------------
 Limit  (cost=0.00..358111.05 rows=1 width=13) (actual time=0.019..0.019 rows=1 loops=1)
   ->  Seq Scan on test_limit  (cost=0.00..358111.05 rows=1 width=13) (actual time=0.017..0.017 rows=1 loops=1)
         Filter: (id = 1)
 Total runtime: 0.047 ms
(4 rows) 
```

注意它只需要大约 0.047 ms ms，它是如此之快，但列 id 没有索引。任何机构可以解释一下吗？多谢！

**--4 附加测试**

```
francs=> explain analyze select * from test_limit where id=2 limit 1;
                                                   QUERY PLAN                                                   
----------------------------------------------------------------------------------------------------------------
 Limit  (cost=0.00..358111.05 rows=1 width=13) (actual time=0.023..0.023 rows=1 loops=1)
   ->  Seq Scan on test_limit  (cost=0.00..358111.05 rows=1 width=13) (actual time=0.022..0.022 rows=1 loops=1)
         Filter: (id = 2)
 Total runtime: 0.066 ms
(4 rows)

francs=> explain analyze select * from test_limit where id=3 limit 1;
                                                   QUERY PLAN                                                   
----------------------------------------------------------------------------------------------------------------
 Limit  (cost=0.00..358111.05 rows=1 width=13) (actual time=0.022..0.022 rows=1 loops=1)
   ->  Seq Scan on test_limit  (cost=0.00..358111.05 rows=1 width=13) (actual time=0.021..0.021 rows=1 loops=1)
         Filter: (id = 3)
 Total runtime: 0.060 ms
(4 rows)

francs=> explain analyze select * from test_limit where id=101 limit 1;
                                                   QUERY PLAN                                                   
----------------------------------------------------------------------------------------------------------------
 Limit  (cost=0.00..358111.05 rows=1 width=13) (actual time=0.035..0.036 rows=1 loops=1)
   ->  Seq Scan on test_limit  (cost=0.00..358111.05 rows=1 width=13) (actual time=0.033..0.033 rows=1 loops=1)
         Filter: (id = 101)
 Total runtime: 0.075 ms
(4 rows)

francs=> explain analyze select * from test_limit where id=1001 limit 1;
                                                   QUERY PLAN                                                   
----------------------------------------------------------------------------------------------------------------
 Limit  (cost=0.00..358111.05 rows=1 width=13) (actual time=0.192..0.192 rows=1 loops=1)
   ->  Seq Scan on test_limit  (cost=0.00..358111.05 rows=1 width=13) (actual time=0.190..0.190 rows=1 loops=1)
         Filter: (id = 1001)
 Total runtime: 0.231 ms
(4 rows) 
```

从加法测试中，我们可以看到它也非常快。

**--5 最终测试**

```
francs=> explain analyze select * from test_limit where id=9999999 limit 1;
                                                      QUERY PLAN                                                      
----------------------------------------------------------------------------------------------------------------------
 Limit  (cost=0.00..358111.05 rows=1 width=13) (actual time=1379.153..1379.154 rows=1 loops=1)
   ->  Seq Scan on test_limit  (cost=0.00..358111.05 rows=1 width=13) (actual time=1379.151..1379.151 rows=1 loops=1)
         Filter: (id = 9999999)
 Total runtime: 1379.206 ms
(4 rows) 
```

从上面，我使用了后来的 id 是 9999999 ，现在很慢；我现在明白了，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:51:03.910

也许“id = 1”在表中很早，所以当它按顺序读取表时，它会很快到达该行，并且由于你说“limit = 1”它可以在第一个结果之后停止。

或者，也可能涉及一些缓存。

# c# - 为什么 Switch 语句默认采用 Fall-Through？

> ID：12365070
> 
> 赞同：3
> 
> 时间：2012-09-11T07:47:49.800
> 
> 标签：c#, java, c++, c, programming-languages

> **可能重复：**
> [为什么 switch 语句被设计为需要中断？](https://stackoverflow.com/questions/252489/why-was-the-switch-statement-designed-to-need-a-break)

最流行的语言 [c, c++, java] 的一个有趣现象是 switch 默认是失败的。

我很好奇原因，有人知道这个故事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:53:39.767

在 C 中，这样做的原因是为了将`switch`易于优化的跳转表制作成一个跳转表，基本上，应用程序将根据表达式计算跳转距离，跳转到某个点，并从该点继续执行。

但是，我认为这种行为有时很有用，因为它有助于避免在 multiply `case`s 中重复代码，毕竟`break`在需要时放置 s 并不难。

[Wiki](http://en.wikipedia.org/wiki/Switch_statement)有一个不错的示例来说明如何使用跌倒：

```
switch (n) {
  case 0:
    printf("You typed zero.");
    break;
  case 4:
    printf("n is an even number.");
  case 1:
  case 9:
    printf("n is a perfect square.");
    break;  
  case 2:
    printf("n is an even number.");
  case 3:
  case 5:
  case 7:
    printf("n is a prime number.");
    break;
  case 6:
  case 8:
    printf("n is an even number.");
    break;
  default:
    printf("Only single-digit numbers are allowed.");
} 
```

# html - 在 div 中安排 span

> ID：12365073
> 
> 赞同：0
> 
> 时间：2012-09-11T07:47:54.467
> 
> 标签：html, css

在我的 Web 应用程序中，我有一些 div 和 span，它们构成了类似表的结构。

伪代码是，

```
<head>
<style>
span{
    display:inline-block;
    width:auto;
}
    .tblbody
{
        font-family:'Segoe UI';
    font-size:20px;
    color:#2A2A2A ;
    padding : 0px;
    display: inline-block;
    padding-top: 5px;
    padding-bottom: 5px;
    padding-left:9px;
}
</style>
</head>
<body>
<div>
    <span style="width: 240px;" class="tblbody">
    <span style="width: 240px;" class="tblbody">asia</span></span>
    <span><span><br>
    <span style="width: 240px;" class="tblbody">india</span></span>
    <br><span><br>
    <span style="width: 240px;" class="tblbody">china</span</span>
    <br><span><br><span style="width: 240px;" class="tblbody">pakisthan</span></span><br><span><br>
    <span style="width: 240px;" class="tblbody">bangladesh</span></span><br></span>
</body> 
```

在第一行中，包含大陆名称的跨度向下移动，在其上方留下空间。
如何向上移动跨度？

谢谢 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:51:21.290

**将vertical-align:top**写入您的**span**。像这样写：

```
span{
        display:inline-block;
        width:auto;
        vertical-align:top
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:52:09.407

您有 padding-top: 5px 尝试将其更改为 padding-top: 0px

# asp.net - asp.net 功能取决于时间

> ID：12365077
> 
> 赞同：0
> 
> 时间：2012-09-11T07:48:01.647
> 
> 标签：asp.net, datetime, timer

> **可能重复：**
> [在 C# 中安排任务的最佳方式](https://stackoverflow.com/questions/752326/best-way-to-schedule-tasks-in-c-sharp)

我有一个功能，当用户单击弹出窗口中的保存按钮时发送通知。在此弹出窗口中，其他用户输入日期和时间。我需要的是，此通知会及时发送用户输入的信息。你知道任何时间取决于方法吗？非常感谢！

# css - 如何在其中设置带有图像的 div，在网站宽度之外，没有滚动条出现？

> ID：12365080
> 
> 赞同：0
> 
> 时间：2012-09-11T07:48:14.643
> 
> 标签：css, html, width, overflow, scroller

我有一个网站，`div`在主体旁边有两个 s，在左侧和右侧，它们都有大约`500px`宽度的图像，加上主体宽度`980px`（这使得它们比任何正常的屏幕分辨率都大）。

**HTML：**

```
<body>
    <div id="#brandLeft">..</div>
    <div id="#brandRight">..</div>
    <div id="#mainbody">..</div>
</body> 
```

**CSS：**

```
#brandLeft {
    display: inline-block;
    height: 890px;
    left: 50%;
    margin-left: -1010px;
    position: absolute;
    top: 171px;
    width: 350px;
}

#brandRight {
    display: inline-block;
    height: 890px;
    position: absolute;
    right: 50%;
    margin-right: -835px;
    top: 171px;
    width: 350px;
} 
```

在`body`我已经设置了`overflow-x: hidden`，所以我看不到垂直滚动条，但页面仍然可以使用箭头和鼠标中心按钮滚动。

我不能使用 jQuery 来禁用滚动，所以我想知道是否有办法让`div`s 带有大图像，而网站上没有滚动条？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:04:02.207

你的图片对于侧边栏来说太大了，所以试试这个。从实际的 html 中删除图像的宽度和高度。通过使用类似的东西来控制图像的宽度/高度。

```
#brandleft, #brandright img {
width:100%;
} 
```

这样做应该将您的图像缩放到左右两侧的 Div 大小，以摆脱滚动条。如果这不起作用，请告诉我。

# diff - PhpStorm 中的差异

> ID：12365086
> 
> 赞同：10
> 
> 时间：2012-09-11T07:48:34.563
> 
> 标签：diff, phpstorm

如何将当前项目中的文档与不属于该项目的文档进行比较？如何将我计算机上的两个任意文件与 phpStorm 进行比较？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-11T10:50:16.530

目前，我发现将项目文件与非项目文件进行比较的最简单方法是将外部文件复制到剪贴板并单击“查看-> 与剪贴板比较”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-11T08:07:04.087

它只能在外部完成：

您也可以在不运行 PhpStorm 的情况下打开差异查看器。这是通过以下命令完成的：

```
<path to PhpStorm executable file> diff <path_1> <path_2> 
```

where`path_1`和`path_2`是相关文件的路径，可以是各种类型，包括 jar。

在 PhpStorm 中，您只能比较项目中可用的文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-08T10:32:35.767

我为比较两个外部资源（网页资源等）所做的工作

1 - 从“文件”菜单->“新建临时文件”打开一个新的临时文件并选择文件类型

2 - 将源 1 复制并粘贴到这个新的暂存文件

3 - 为第二个源创建一个新的临时文件，然后从“查看”菜单中单击“比较”，或者最好直接将第二个复制到剪贴板，然后从“查看”菜单单击“与剪贴板比较”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-24T09:26:24.113

### 苹果系统

`/usr/local/bin/`在名为**PhpStorm**中创建一个文件

 **粘贴这个

```
#!/bin/sh

open -na "PhpStorm.app" --args "$@" 
```

并使其可执行

```
chmod +x /usr/local/bin/PhpStorm 
```

现在你可以做到这一点

```
PhpStorm diff <path1> <path2> 
```

### 视窗

将 PhpStorm bin 添加到您的 PATH

```
setx PATH=%PATH%;C:\Program Files\JetBrains\PhpStorm\bin 
```

现在你可以这样做

```
phpstorm.bat diff <path1> <path2> 
```

### Linux

创建一个指向您的 PhpStorm 启动器脚本的链接：

```
# Path to PhpStorm installation may differ
ln -s /opt/phpstorm/bin/phpstorm.sh /usr/local/bin/phpstorm 
```

现在你可以做

```
phpstorm diff <path1> <path2> 
```

* * *

来自 jetbrains 网站的资料来源：

[https://www.jetbrains.com/help/phpstorm/command-line-differences-viewer.html](https://www.jetbrains.com/help/phpstorm/command-line-differences-viewer.html)

[https://www.jetbrains.com/help/phpstorm/working-with-the-ide-features-from-command-line.html](https://www.jetbrains.com/help/phpstorm/working-with-the-ide-features-from-command-line.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-31T14:08:51.907

在 phpStorm 2016.2（可能还有一些早期版本）中，您可以通过 File >> Open... 导航到外部文件，这将打开一个显示外部文件内容的选项卡。然后，您可以使用 View>> Compare with... 将外部文件与项目中的文件进行比较。**

# windows - 通过另一个程序向 GUI 应用程序提供输入

> ID：12365088
> 
> 赞同：0
> 
> 时间：2012-09-11T07:48:42.613
> 
> 标签：windows, linux, user-interface, bots

我想知道的是如何为封闭源代码且没有任何公共 API 的 GUI 应用程序提供输入。

更简洁地说，假设您打开纸牌并想通过一个程序来玩它。或者，更基本的是，您有一个带有按钮的 GUI 应用程序，并且您想通过另一个程序单击它。

我知道这个问题有点含糊，但这是我能说的最好的了。请帮助我进行一些编辑或一些评论，以使其更具体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:29:58.267

调查[`SendInput()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)。它可用于模拟鼠标移动和按键操作。

要使用其 GUI 定位 Windows 应用程序，您可以使用它[`EnumWindows()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633497%28v=vs.85%29.aspx)来定位具有特定标题的窗口。这将提供一个窗口句柄。要赋予该窗口焦点，您可以：

*   通过获取窗口句柄`EnumWindows()`
*   用于[`GetWindowRect()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633519%28v=vs.85%29.aspx)获取窗口矩形的坐标
*   使用 将鼠标移动到窗口范围内并使用`SendInput()`模拟鼠标点击`SendInput()`

我已经这样做过一次，而且很难做到正确。一旦你开始你的程序*坐在你的手上*：不要触摸鼠标或键盘。

（*我不知道如何在 Linux 上做这样的事情*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T02:22:25.150

假设它是 Linux 中的 X11 应用程序，您可以将进程连接到命名管道的一端，然后在管道的另一端回显 X-Input 事件。

# c# - Delphi 的 C# 过滤器相等函数

> ID：12365091
> 
> 赞同：0
> 
> 时间：2012-09-11T07:48:55.790
> 
> 标签：c#, delphi, filter

我正在为 C# Windows 窗体应用程序制作一个 Delphi 程序。

我只有一个问题。我不知道我需要如何处理这部分 delphi 代码：（注意，它与 C# 上的 Rider r8 com 一起工作，它与数据库一样工作，但你不像平常那​​样进行查询。）

```
dRWK.tbOrderrgB.Filtered := False;
dRWK.tbOrderrgB.Filter := 'volgnummer=''0'' and kmb='''+dRWK.tbOrderrgA.FieldByName('kmb').AsString+'''';
dRWK.tbOrderrgB.Filtered := True; 
```

这确保只有`OrderrgB`当它`volgnummer`设置为`0`并且 kmb = tbOrderrgA kmb 时才可访问。

您可以将`tbOrderrgB`其视为数据库中的一行。在 Delphi 中，我使用 Titan 表来获取数据......

我将如何在 C# 中处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:58:40.550

我认为应该是这样的

```
Expression<Func<T, bool>> filter = x => x.volgnummer == 0 && x.kmb == kmb;

// apply filter for IQueryable<T>
queryable.Where(filter); 
```

# magento - 如何修改 Magento 中抽象类的代码？

> ID：12365092
> 
> 赞同：2
> 
> 时间：2012-09-11T07:48:56.087
> 
> 标签：magento, overriding, abstract-class

在 Magento 中，我想修改抽象类的代码。具体来说，我想修改 Mage_Core_Model_Resource_Db_Abstract 类的函数 _getReadAdapter() 的行为。

根据 Alan Storm 的这篇文章[http://alanstorm.com/magento_upgrade_rewrite_override](http://alanstorm.com/magento_upgrade_rewrite_override)，有三种方法可以做到这一点。修改 Magento 的源代码非常糟糕，不鼓励。另一方面，在我看来，我不能使用 Magento 的覆盖/重写系统，因为抽象类既不是模型、助手也不是块。那是对的吗？

因此，解决此问题的唯一方法是在 app/local/Mage 复制此特定源代码，并修改此新副本的代码。那正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:23:21.383

是的，使用代码池`app/code/local`是要走的路。

这是因为`abstract`类不是由 Magento 工厂处理的，而是在类定义中逐字扩展的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:19:55.997

实际上你不应该修改抽象类，而是应该修改扩展这个抽象类的派生类

# actionscript-3 - 卡片在垂直方向移动，因为我试图让它水平移动

> ID：12365103
> 
> 赞同：0
> 
> 时间：2012-09-11T07:49:35.970
> 
> 标签：actionscript-3, apache-flex, flex3

我只是想让图像在指定的画布区域内移动。如果鼠标光标移出画布区域，图像应该回到原来的位置。下面是我尝试过的代码。

```
 <mx:Script>
<![CDATA[
    import mx.controls.Image;
    import mx.containers.Canvas;
    import flash.geom.Rectangle;
     /* [Embed(source="cards/2C.png")]
     private var pic:Class; */
     public var points:Point;
     public var clan:Canvas;
     public var offset_x:int;
     public var offset_y:int;
     public var dropIndex:int=-1; 
     public var img:Image;
     public var dragImage:Image;
     public var myImage:Image;
     public var doDrag:Boolean;
     public var acceptDrag:Boolean;
     public function init():void

     {
        myImage = new Image();
        clan = new Canvas();
        clan.width=400;
        clan.height=300;
        clan.x=200;
        clan.y=150;
        clan.setStyle("backgroundColor",0xcfdccc);
        addChild(clan);
        myImage.source= pic.pic1;
        clan.addChild(myImage);
        myImage.addEventListener(MouseEvent.MOUSE_DOWN, ondown);
        myImage.addEventListener(MouseEvent.MOUSE_MOVE, mm); 

     }
     public function ondown(event:MouseEvent):void
     {
        doDrag=true;
        return;
     }
    public function mm(event:MouseEvent):void
    {
        if(doDrag==true)
        {

        points = new Point();
        myImage.source=event.target.source;
        points.x=event.target.x;
        points.y=event.target.y;
        points=localToGlobal(points);
        dragImage = mx.controls.Image(event.target);
        myImage.x=points.x;
        myImage.y=points.y;
        trace(points);
        var mywidth:int=clan.width-myImage.width;
        var myheight:int=clan.height-myImage.height;

        var boundar:flash.geom.Rectangle=new Rectangle(offset_x, offset_y ,mywidth,myheight);
        myImage.startDrag(false, boundar);
        myImage.addEventListener(MouseEvent.MOUSE_MOVE, onmove);
        myImage.addEventListener(MouseEvent.CLICK, onup);
        event.updateAfterEvent();
        }

    }

    public function onmove(event:MouseEvent):void
    {
        if(doDrag)
        {

    //  myImage = new Image();
        clan = new Canvas();
        var diff:Number = NaN;
        var doIncrement:Boolean=false;
        var point2:flash.geom.Point= new Point();
        img=mx.controls.Image(event.target);

        point2.x=this.x;
        point2.y=this.y;
        point2=globalToLocal(point2);

        trace("point2="+ point2);
        diff=points.x; 
        /* trace(stage.x);
        trace(stage.y); */
        points.x=img.x;
        points.y=img.y;
        points=globalToLocal(points);
        diff=points.x;
        trace("points.x="+points.x);
        trace("diff: "+ diff);
        trace("dropIndex: "+ dropIndex);
        if(diff >=0)
        {
            dropIndex=Math.floor(points.x / offset_x);
            doIncrement=true;
            trace("dropIndex1: "+ dropIndex);

        }
        else
        {
            dropIndex=Math.floor(points.x / offset_x);

        }
         if(doIncrement)
        {
            dropIndex++;
        } 
         if(dropIndex >= 0)
        {
             acceptDrag = true;
        }

           else if (dropIndex >= -5 && dropIndex <= -1) 
                {
                    dropIndex = 0;
                    acceptDrag = true;
                }  
        }
    }
    public function onup(event:MouseEvent):void
    {

        doDrag=false;
        img.stopDrag();
        acceptDrag=false;
    }
        ]]>
      </mx:Script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:17:12.163

如果我正确理解你的问题，我相信你让它变得比它需要的复杂得多。向 Canvas 添加 MouseEvent.ROLL_OUT 事件侦听器，然后将图像重置为其原始坐标应该会导致您正在寻找的行为。这是我测试的一个快速而肮脏的版本，您可以使用、扩展或借用：

```
<fx:Script>
    <![CDATA[
        private var offset_x:int;
        private var offset_y:int;

        /**
         * Calibrates the drag operation so that they ghosted image follows the cursor based on
         *     where the image was clicked.  It then makes the ghosted image visible and
         *     attaches the MOUSE_MOVE handler so that it will begin tracking.
         **/
        private function myImageMouseDownHandler(event:MouseEvent):void {
            offset_x = myImage.mouseX;
            offset_y = myImage.mouseY;
            dragImage.visible = true;

            clan.addEventListener(MouseEvent.MOUSE_MOVE, onDrag);
        }

        /**
         * Calls the cleanup function then resets the ghosted image for further use.
         **/
        private function clanRolloutHandler(event:MouseEvent):void {
            dragCleanup();

            dragImage.x = myImage.x;
            dragImage.y = myImage.y;
        }

        /**
         * Calls the cleanup function then sets the main Image to the ghosted image's location.
         **/
        private function endDrag(event:MouseEvent):void {
            dragCleanup();

            myImage.x = dragImage.x;
            myImage.y = dragImage.y;
        }

        /**
         * Sets the ghosted image to follow the mouse cursor offset by the location of the
         *     original click.
         **/
        private function onDrag(event:MouseEvent):void {
            dragImage.x = clan.mouseX - offset_x;
            dragImage.y = clan.mouseY - offset_y;
        }

        /**
         * Hides the ghosted image and removes the MOUSE_MOVE event handler so that the function
         *     is no longer called.
         **/
        private function dragCleanup():void {
            dragImage.visible = false;
            clan.removeEventListener(MouseEvent.MOUSE_MOVE, onDrag);
        }
    ]]>
</fx:Script>
<mx:Canvas id="clan" rollOut="clanRolloutHandler(event)" mouseUp="endDrag(event)" horizontalScrollPolicy="off" verticalScrollPolicy="off"
           top="150" left="200" width="400" height="300" backgroundColor="#CFDCCC">
    <mx:Image id="myImage" mouseDown="myImageMouseDownHandler(event)" 
              source="http://www.leadersinstitute.com/wp-content/uploads/2011/02/playing-cards.jpg" height="50" width="50"/>
    <mx:Image id="dragImage" alpha="0.5" visible="false" 
              source="http://www.leadersinstitute.com/wp-content/uploads/2011/02/playing-cards.jpg" height="50" width="50"/>
</mx:Canvas> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:56:15.833

MouseEvent.MOUSE_LEAVE 将在鼠标完全离开 Flash 窗口时触发，您可以尝试在这种情况下重置图像位置，并在需要时使用 MouseEvent.MOUSE_ENTER 重新开始跟踪。

这应该会有所帮助：[http ://www.kirupa.com/developer/flashcs3/detecting_when_mouse_leaves_movie.htm](http://www.kirupa.com/developer/flashcs3/detecting_when_mouse_leaves_movie.htm)

# javascript - 布局中的项目管理

> ID：12365107
> 
> 赞同：0
> 
> 时间：2012-09-11T07:49:46.420
> 
> 标签：javascript, extjs, extjs4

我有一个`VBox Layout`，它有两个`grid`s 作为项目。我的项目在面板中连续显示，没有任何空间。

现在，我想要两件事。

1.  在两个项目之间添加间距。
2.  在两个项目之间添加水平分隔线。

我尝试添加`splitter`，但它使网格可调整大小，这是我不想要的。

如何在 Extjs4 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:43:59.450

只需在这两个网格之间添加一些元素，如下所示：

```
{
    xtype: 'box',
    autoEl: {
        tag: 'hr'
    }
} 
```

# java - ESelectionService 无法接收消息

> ID：12365108
> 
> 赞同：1
> 
> 时间：2012-09-11T07:49:56.017
> 
> 标签：java, eclipse-rcp

我正在使用 Eclipse 4.2 Juno，Java 1.6。我的应用程序中有两个部分。一部分是注册 SelectionChangedListener：

```
@Inject
private ESelectionService selectionService;

@PostConstruct
public void init() {
    TreeViewer bsTreeViewer = new TreeViewer(tabFolder, SWT.BORDER);
    /* some other stuff */
    // Event declaration
    bsTreeViewer.addSelectionChangedListener(new SelectionChangedListener() {
        @Override
        public void selectionChanged(SelectionChangedEvent event) {
            if( selectionService != null ) {
                 selectionService.setSelection(((IStructuredSelection)event.getSelection()).getFirstElement());
            }
        }
    });
} 
```

此侦听器被正确调用。第一个选择的元素也是正确的类型。

我正在设置接收端的另一部分：

```
@Inject
public void setBS(@Named(IServiceConstants.ACTIVE_SELECTION) @Optional BS bs) {
    if (bs == null) {
      /* implementation not shown */
    } else {
      /* implementation not shown */
    }
} 
```

然而，在管道的这一端没有收到任何东西。我做错了什么或者我怎么能调试这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:19:22.460

上面的代码看起来不错，但请尝试检查以下问题：

*   检查接收器对象是否已创建 - 如果没有，它将不会接收事件
*   检查接收器对象是否由 Eclipse 框架创建（例如，如果它是应用程序模型的元素，例如部件、处理程序，它肯定是由框架创建的） - 如果不是，则框架（选择服务）不知道接收器反对并且不能通知它

# apache - 如何恢复 Apache 和 svn 模块提供的 HTTP 下载？

> ID：12365109
> 
> 赞同：1
> 
> 时间：2012-09-11T07:49:58.813
> 
> 标签：apache, svn, apache2

我正在使用 Collabnet Subversion 服务器 1.7.6（在 Windows 上）；我将大文件（30M+）存储在 SVN 存储库中，并通过捆绑的 Apache HTTP 服务器（2.2.22）提供它们。

我发现下载 SVN 提供的文件不支持恢复。在 HTTP 协议术语中，客户端`Range: xxx-`在 HTTP 头中请求，但服务器不以 HTTP 头响应`Content-Range: xxx-yyy`，因此客户端必须从文件的第一个字节开始下载。

我还在 Apache 网站的 svn 服务器上尝试了 http 下载简历。

```
wget -c http://svn.apache.org/repos/asf/subversion/branches/1.7.x/CHANGES 
```

我在下载过程中按 Ctrl+C，然后`wget -c`再次，结果相同。

这个问题有什么解决方法吗？

# java - Java中注解相对于XML的主要优势是什么

> ID：12365111
> 
> 赞同：2
> 
> 时间：2012-09-11T07:50:04.887
> 
> 标签：java, xml, annotations

> **可能重复：**
> [Xml 配置与基于注释的配置](https://stackoverflow.com/questions/182393/xml-configuration-versus-annotation-based-configuration)

有人可以让我知道 java Annotations 相对于 Xml 的主要优势是什么吗？我在谷歌搜索这个时总是听到元元，那个元是什么。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T08:01:42.340

元数据是您可以与数据一起提供的某种描述。在 java 中，它可以处理注释、XML，还有其他方法。

为了利用元数据，您应该有一些东西来处理这些数据并决定一旦元数据被识别会发生什么。

与 XML 相比，注释有很多优点，仅举几例：

*   静态类型检查 - 编译器将为您检查注释（一旦正确定义）适用于何处以及如何

*   干净的代码 - 更容易（直观地）查看注释中定义的元数据

然而，它是有代价的：

*   当您想要更改某些内容时，XML 不需要重新编译。使用注释，您必须重新编译。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:55:54.857

注释附加到类，可以通过反射进行处理。XML 必须用一些库来解析。注释的主要缺点是它们是在编译时创建的，之后无法更改 - 如果您需要灵活的配置，您应该坚持使用 xml / 其他方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T07:56:27.850

主要优点（或主要优点之一）是它提供了“[静态类型检查](http://en.wikipedia.org/wiki/Type_system#Static_typing)”。

这有助于开发人员在“编译时”捕获大部分错误，并保持生产系统以最少的错误运行。

# php - 将变量从控制器传递到视图

> ID：12365112
> 
> 赞同：0
> 
> 时间：2012-09-11T07:50:09.580
> 
> 标签：php, model-view-controller

我有一个问题，我一直在制作自己的 MVC 应用程序，但在模型和控制器之间传递变量似乎存在问题。控制器的输出是包含一些 json 格式数据的单个变量，看起来很简单。

控制器

```
<?php 

class controllerLib 
{
     function __construct() 
     {
            $this->view = new view();
     }

     public function getModel($model) 
     {
            $modelName = $model."Model"; 
            $this->model=new $modelName();
     }
}

 class controller extends controllerLib
 {
     function __construct()
     {
            parent::__construct();
     } 

     public function addresses($arg = false) 
     {
            echo'Addresses '.$arg.'<br />';

            $this->view->render('addressesView');

            $this->view->showAddresses = $this->model->getAddresses(); 
     }
 }

 ?> 
```

看法

```
 <?php 

 class view
 {
    function __construct()
    {
    }

    public function render($plik)
    {
        $render = new $plik();
    }
 }

 class addressesView extends view
 {
    public $showAddresses;

    function __construct()
    {
        parent::__construct();

        require 'view/head.php';

        $result = $this->showAddresses;

        require 'view/foot.php';
    }
 }

 ?> 
```

现在的问题是 $this->showAddresses 没有传递给视图并且我卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:54:12.350

该代码有各种问题：

1.  render() 将新视图保存在本地变量中，以便函数结束后不存在

2.  您不能期望`$this->showAddresses`在构造函数时有一个值。

您应该将 render() 方法实现为 View 构造函数之外的方法。

```
function __construct() 
{
    parent::__construct();

    require 'view/head.php';

    $result = $this->showAddresses; // (NULL) The object is not created yet

    require 'view/foot.php';
} 
```

查看类：

```
public function factory($plik) // Old render($splik) method
{
    return new $plik();
} 
```

地址视图类：

```
function __construct() 
{
  parent::__construct();
}

function render()
{
    require 'view/head.php';

    $result = $this->showAddresses; // Object is created and the field has a value

    require 'view/foot.php';
} 
```

控制器类：

```
 $view = $this->view->factory('addressesView');
 $view->showAddresses = $this->model->getAddresses(); 
 $view->render(); 
```

# javascript - 如何安装 Jasmin：Velocity 项目上的 javascript 测试工具

> ID：12365117
> 
> 赞同：1
> 
> 时间：2012-09-11T07:51:01.873
> 
> 标签：javascript, unit-testing, velocity, jasmine

我正在网上搜索安装 jasmine 以测试我的 javascript 文件。大多数地方都假设我会将它作为一个 gem 安装在一个 ruby​​ 项目中。但我正在运行速度/Java 项目。

我该如何安装它？是否有一个很好且简单的指南来逐步解释如何使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:07:53.867

有一个 Maven 插件。以下是如何使用它的示例：

首先，在您项目的 POM 中，[配置要执行的插件](https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-web/pom.xml#L72-L95)：

```
 <plugin>
    <groupId>com.github.searls</groupId>
    <artifactId>jasmine-maven-plugin</artifactId>
    <version>1.0.2-beta-5</version>
    <executions>
      <execution>
        <goals>
          <goal>test</goal>
        </goals>
      </execution>
    </executions>
    <configuration>
      <sourceIncludes>
        <!-- relative to $jsSrcDir, defined further down -->
        <include>js/prototype/prototype.js</include>
        <include>uicomponents/widgets/list/xlist.js</include>
        <include>uicomponents/suggest/suggest.js</include>
        <include>uicomponents/model/entityReference.js</include>
      </sourceIncludes>
      <specIncludes>
        <!-- relative to src/test/javascript/ -->
        <include>spec/**/*.js</include>
      </specIncludes>
      <jsSrcDir>${project.basedir}/src/main/webapp/resources</jsSrcDir>
    </configuration>
  </plugin> 
```

[`src/test/javascript/spec/`](https://github.com/xwiki/xwiki-platform/tree/master/xwiki-platform-core/xwiki-platform-web/src/test/javascript/spec)然后使用 Jasmine 的标准在 中编写规范。

下次你`mvn install`的项目时，Jasmine 测试也会被执行，如果出现问题，构建会失败。

# excel - Excel VBA - 单元格值包含“MIG”

> ID：12365123
> 
> 赞同：0
> 
> 时间：2012-09-11T07:51:23.737
> 
> 标签：excel, vba

我知道有一种方法可以查看单元格值是否包含某个字符串。我知道一些编程语言使用 % ... %。

```
 If shtVO.Cells(Row, 1).Value <> "%MIG%" Then
        shtVO.Cells(Row, 1).Value = shtVO.Cells(Row, 1).Value + "MIG"
    End If 
```

我想查看我的 Cell A 是否已经包含 MIG，如果包含，则不应更新值，如果不包含 MIG，则应使用 MIG 更新当前值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:58:04.573

试试这个

```
If not shtVO.Cells(Row, 1).Value like "*MIG*" Then 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:00:27.803

```
If InStr(0, shtVO.Cells(Row, 1).Value, "MIG", vbTextCompare)=0 Then
    shtVO.Cells(Row, 1).Value = shtVO.Cells(Row, 1).Value + "MIG"
End If 
```

# c# - 为变量设置默认值的好地方是什么？

> ID：12365126
> 
> 赞同：2
> 
> 时间：2012-09-11T07:51:43.947
> 
> 标签：c#, oop

类构造函数是设置变量默认值的最佳位置吗？

在我继承的大多数代码中似乎都是这种情况。

**例子**

```
public class foo
{
    public bool IsAcidic { get; set; }

    public foo()
    {
        IsAcidic = false;
    }
} 
```

你会这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T07:52:59.737

如果您想为该特定对象的任何实例分配一些默认值，那么是的，构造函数是为它们分配默认值的最合适的地方，但是如果您想将类型的默认值分配给该字段，那么您不需要必须做任何事情。字段将在构造函数之前使用类型的默认值进行初始化。例如，如果您有一个`int`类型字段，它将`0`默认分配，您不必在构造函数中执行任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:58:42.700

您应该将变量设置为尽可能接近创建该变量的值（显式或隐式）。

这就是 C99（作为一个例子）开始大放异彩的地方。在那之前，您必须在函数的开头创建变量，即使您当时可能不知道它们应该是什么。通过这种脱节，更难跟踪哪些变量被设置为哪些值。当 C99 引入了在函数中创建新变量的能力时，这种脱节就消失了。

因此，对于您的示例，最好在构造函数中设置默认值，因为这是变量存在的地方。

如果您*不在*构造函数中执行此操作（例如，在`init`方法调用中执行），那么这不是默认值，仅仅是因为有时这些变量被设置为其他值。

# java - java中的同步关键字是如何实现的？

> ID：12365127
> 
> 赞同：5
> 
> 时间：2012-09-11T07:51:46.437
> 
> 标签：java, synchronization, system-calls

我正在阅读操作系统，并且遇到了一些进程间通信问题。这些可以通过使用java 通过关键字提供的[监视器概念来解决。](http://en.wikipedia.org/wiki/Monitor_%28synchronization%29)`synchronized`

我想知道`synchronized`关键字是如何实现的？我试图查看源，但我无法找到它。是否`synchronized`正在使用系统调用`down` `up`（基本上使用哪个信号量）来监视锁？

JVM 在这个过程中有帮助吗？

我是 Java 新手，我想在进入 Java 中的线程概念之前知道事情是如何工作的。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T07:56:27.433

没有定义同步是如何实现的，只定义了它是如何工作的。

在许多 JVM 中，优化其行为的工作非常复杂（例如，它试图避免进行系统调用，因为这些调用相对较慢）例如，如果 JIT 确定可以这样做，则可以将锁定与 synchronized 关键字结合或消除.

# ruby-on-rails - 未定义的方法“default_scoped？” 在访问范围时

> ID：12365128
> 
> 赞同：17
> 
> 时间：2012-09-11T07:51:47.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, named-scope

访问范围时出现此错误。

这是AR模型

```
class StatisticVariable < ActiveRecord::Base
  attr_accessible :code, :name

  has_many  :statistic_values

  scope :logins, where(code: 'logins').first
  scope :unique_logins, where(code: 'unique_logins').first
  scope :registrations, where(code: 'registrations').first

end 
```

当我尝试使用`StatisticVariable.logins`或任何其他范围时，它会给出：

```
NoMethodError: undefined method `default_scoped?' 
```

如果我将范围配置为类方法，那么它可以完美运行。

```
def self.registrations
    where(code: 'registrations').first
end 
```

请指导我了解并解决此问题。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-11T07:55:21.863

您所谓`scopes`的不是范围：它们不可链接。

我猜 Rails 试图在`default_scope`你的结果中附加一个可能导致失败的结果。

执行以下操作：

```
 scope :logins, where(code: 'logins')
  scope :unique_logins, where(code: 'unique_logins')
  scope :registrations, where(code: 'registrations')

  def self.login
    logins.first
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:29:10.537

我收到此错误是因为我的一个作用域正在返回`self`，我认为它是关系对象（不起作用）；返回`nil`反而达到了预期的结果。例如：

```
scope :except_ids, -> ids do
  if ids.present?
    ids = ids.split(',') if ids.respond_to?(:split)
    where('id not in (?)', ids)
  end
end 
```

如果 ids.present？返回 false，条件返回 nil，范围无效，但仍可链接。

# c# - 通过 SqlDataAdapter 填充 DataSet 时超时

> ID：12365133
> 
> 赞同：4
> 
> 时间：2012-09-11T07:52:18.623
> 
> 标签：c#, sql

我正在通过存储过程从 SQL 中获取数据。

在我的 SQL 查询窗口中，执行需要 43 秒。

但是，当我通过 c# 执行相同的存储过程时，我无法在 5 分钟内得到响应。

我正在使用 SqlDataAdapter

```
 using (SqlDataAdapter da = new SqlDataAdapter(cmd))
        {
            DataSet ds = new DataSet();

            // Fill the DataSet using default values for DataTable names, etc
            da.Fill(ds);

            // Detach the SqlParameters from the command object, so they can be used again
            cmd.Parameters.Clear();

            if (mustCloseConnection)
                connection.Close();

            // Return the dataset
            return ds;
        } 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:58:38.340

您的 DateTimePicker 采用以下格式：dd/MM/yyyy。

标准 SQL 日期采用以下格式：MM/dd/yyyy。

将此用于您的 SP：

```
myDateTimePicker.Value.ToString("MM/dd/yyyy", CultureInfo.InvariantCulture) 
```

# search - 搜索WP，小插件

> ID：12365135
> 
> 赞同：1
> 
> 时间：2012-09-11T07:52:28.830
> 
> 标签：search, plugins, wordpress

我需要在 WP 中获取搜索查询并重定向到 {site.com}/search/{search_query} 等链接的功能

当我在英语上输入搜索查询并按下搜索按钮时，我被重定向到页面搜索 {host.com}/search/{search_query} 当我再次这样做但仅在其他语言上它被重定向到页面 {host.com }/search/ 并显示 404 页面。但是当输入 URL {host.com}/search/{search_query_another_lanuage} 时，它可以工作我如何从搜索输入中获取数据

谢谢大家。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T08:32:05.183

首先寻址到站点架构，您可以在其中找到如何修改搜索，请查看此链接[http://codex.wordpress.org/Site_Architecture_1.5#Search_Form](http://codex.wordpress.org/Site_Architecture_1.5#Search_Form)

其次，如果您正在寻找支持多语言搜索的搜索插件，那么这里有一个... [http://wordpress.org/extend/plugins/relevansi/](http://wordpress.org/extend/plugins/relevanssi/)

您还可以选择 WordPress 上可用的其他两个高评价搜索插件...

[http://wordpress.org/extend/plugins/wpsearch/](http://wordpress.org/extend/plugins/wpsearch/) [http://wordpress.org/extend/plugins/search-everything/](http://wordpress.org/extend/plugins/search-everything/)

# vb.net - 将带有元数据的图像和 pdf 文件上传到 Sharepoint 站点

> ID：12365136
> 
> 赞同：2
> 
> 时间：2012-09-11T07:52:32.443
> 
> 标签：vb.net, sharepoint

我有一个共享点站点，我通过电子邮件将文件上传到它。问题是即使所有文件都上传了，但只有 Office 文件的元数据会自动填充。谁能告诉我如何让其他文件也自动填充元数据？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T20:36:45.593

SharePoint 使用 Office 文件自动填充元数据是 Microsoft 的一项服务。您需要实现的任何其他文件类型`SPEmailEventReceiver`- 因为您可以对文件做任何您喜欢的事情并获取文件的元数据等。

# mysql - GROUP BY vs INSERT IGNORE

> ID：12365142
> 
> 赞同：5
> 
> 时间：2012-09-11T07:53:00.117
> 
> 标签：mysql

你好！
我需要在 mysql (5.1) 上扫描一个非常大的表，
这就是该表或多或少的样子：

```
创建表`big_table`（
   `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
   `main_id` INT(11) 默认为 NULL，
   `key` VARCHAR(20) NOT NULL,
   主键（`id`），
   KEY `main_id_key` (`main_id`,`key`),
 ) 引擎=INNODB AUTO_INCREMENT=2315678197 默认字符集=utf8

```

我需要将 main_id + 键的所有唯一值放入一个新表中。
使用以下查询需要很长时间（3 天后仍在非常快的服务器上运行）：

```
创建表`get_unique`（
   `main_id` int(11) NOT NULL,
   `key` varchar(20) NOT NULL,
   主键（`main_id`，`key`）
 ) 引擎=InnoDB 默认字符集=utf8；

 将忽略插入到 get_unique
 SELECT main_id,key FROM big_table

```

**所以我的问题是 -
这会更快吗？**

```
创建表`get_unique`（
   `main_id` int(11) NOT NULL,
   `key` varchar(20) NOT NULL,
   主键（`main_id`，`key`）
 ) 引擎=InnoDB 默认字符集=utf8；

 插入到 get_unique
 SELECT main_id,key FROM big_table
 按 1,2 分组

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T07:57:58.780

`GROUP BY main_id, key`与 相比，Yes的执行速度要快很多倍`INSERT IGNORE`。

`SELECT.. GROUP BY main_id, key`通过使用覆盖索引可以更快地执行并导致更少的记录，而`INSERT IGNORE`将涉及`INDEX KEY`对正在插入的每一行的查找。

# java - 如何通过 Java 代码或 Selenium 获取窗口 ID

> ID：12365143
> 
> 赞同：2
> 
> 时间：2012-09-11T07:52:59.403
> 
> 标签：java, selenium

我在 Selenium 工作，想通过 Eclipse 中的 Selenium 代码单击警报框或确认。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:06:23.420

```
Alert alert = driver.switchTo().alert();
alert.accept(); 
```

根据 Pavel 的建议，添加我面临的问题 -

[http://code.google.com/p/selenium/issues/detail?id=3544](http://code.google.com/p/selenium/issues/detail?id=3544)

**注意**：这个问题是随机的，代码大部分时间都对我有用。:)

# java - 在 ListDataProvider 中使用通用列表

> ID：12365151
> 
> 赞同：2
> 
> 时间：2012-09-11T07:53:34.970
> 
> 标签：java, gwt, generics

当我想在基于 CellTree 的 GWT 应用程序中使用泛型时，我遇到了一个奇怪的问题。我特别想为树中的每个节点保留属于它的节点，即它的子节点。为此，我创建了一个通用类 NodeData。这当然使我的应用程序更加复杂和繁琐，但就节点而言，它已经完成了它的工作。我无法克服的一点是对应于每个节点的 ListDataProviders 的修改（刷新）。正如您在以下代码中看到的那样，这是泛型的问题：

```
static class NodeData<T extends BaseProxy> {
NodeData(T data) {
  this.data = data;
}

public T data;
public ListDataProvider<? extends NodeData<? extends BaseProxy>> children;
} 
```

稍后在项目中，我尝试了以下代码行：

```
NodeData<?> data = (NodeData<?>) value;
List<NodeData<? extends BaseProxy>> newData = new ArrayList<NodeData<? extends BaseProxy>>(data.children.getList());
newData.add(new NodeData<BaseProxy>(customer));
data.children.setList(newData); 
```

虽然我没有收到编译错误，但我收到了关于最后一行的运行时错误，这对我来说似乎很奇怪，因为编译器没有检测到它：

```
The method setList(List<capture#9-of ? extends CustomTreeModel.NodeData<? extends BaseProxy>>) in the type ListDataProvider<capture#9-of ? extends CustomTreeModel.NodeData<? extends BaseProxy>> is not applicable for the arguments (List<CustomTreeModel.NodeData<? extends BaseProxy>>) 
```

它与我从 ListDataProvider 获得的列表相同，但它不能接受它。我应该改变/做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:16:43.953

这很奇怪……

以下代码编译并运行没有任何问题。

```
public class CustomTreeModel {

    public static void main(final String[] args) {
        final BaseProxy customer = new Customer();
        final Object value = new NodeData<BaseProxy>(new Customer());
        final NodeData<?> data = (NodeData<?>) value;
        final List<NodeData<? extends BaseProxy>> newData = new ArrayList<NodeData<? extends BaseProxy>>(
                data.children.getList());
        newData.add(new NodeData<BaseProxy>(customer));
        data.children.setList(newData);
    }

    private static class Customer implements BaseProxy {

    }

    public static class NodeData<T extends BaseProxy> {
        NodeData(final T data) {
            this.data = data;
        }

        public T data;
        public ListDataProvider<? extends NodeData<? extends BaseProxy>> children = new ListDataProvider<NodeData<? extends BaseProxy>>();

    }
} 
```

你能试试吗？

你确定所有的源代码都编译了吗？

可能你应该提供更多的源代码。

# iphone - 计算 UIScrollView 的位置

> ID：12365159
> 
> 赞同：0
> 
> 时间：2012-09-11T07:54:01.890
> 
> 标签：iphone, ios, uiscrollview, paging

我正在开发一个简单的 PDF 阅读器，在底部我有一个`UIScrollView`所有页面，在中间我有一个标签，它应该在你滚动时显示页码。

但我无法弄清楚如何计算确切位置并查看中间的页面。我也有 2 种类型的 PDF，一种是双页 PDF，另一种只是单面。

这就是我在滚动视图中绘制它们的方式

```
NSInteger xPos = 20;
for(int i = 0; i < [pdf numberOfPages]; i++)
{
    ThumbViewController *tmpThumb = [[ThumbViewController alloc] initWithNibName:nil bundle:nil page:[NSString stringWithFormat:@"%i", i + 1] andPDF:pdf];

    // SINGLE SIDE PDF
    if([_issue.presentation isEqualToString:@"1"])
    {
        tmpThumb.view.frame = CGRectMake(xPos, 5, 150, 200);

        xPos += 200;
    }
    // DOUBLE SIDE PDF
    else
    {
        tmpThumb.view.frame = CGRectMake(xPos, 5, 150, 200);

        // Draw double pages
        if((i % 2) == 1)
        {
            xPos += 105;
        }
        else
        {
            xPos += 140;
        }
    }

    [_scrollView addSubview:tmpThumb.view];

    [tmpThumb release];
} 
```

这给了我这些漂亮的缩略图： ![在此处输入图像描述](../Images/873846703e5c15c5e0e19e4397a303ae.png) ![在此处输入图像描述](../Images/8e37c9a4e627d6c608c1909af84bee2f.png)

但是我被困在下一部分，当通过滚动时`UIScrollView`我找不到任何关于如何计算哪个页面位于视图中间的好方法，目前我尝试了这个：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    // Calculate what page is in the middle
    NSInteger contentSize = scrollView.contentSize.width / [_readerModel.pdf numberOfPages];
    NSInteger pageNumber = floor(scrollView.contentOffset.x / contentSize);

    // Single side
    if([_issue.presentation isEqualToString:@"1"]) pageNumber = floor(scrollView.contentOffset.x / contentSize);

    NSLog(@"%d / %d", contentSize, pageNumber);

    _thumbnailPopup.titleLabel.text = [_readerModel getTitleForPage:pageNumber inIssue:_readerModel.currentIssue];
    _thumbnailPopup.pageLabel.text = [NSString stringWithFormat:@"%d", pageNumber];
} 
```

正如您从图片中看到的那样，页面并没有真正匹配（它们在第二张图片中意外匹配，但是当您进一步滚动时它们不会匹配）有没有人有这样的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:03:10.000

我认为您需要计算单个页面的大小并将 scrollView.contentSize.width 除以该大小。

> CGFloat sizeOfAThumbnailPage = ((spaceLeftOfThumbnailPage / 2.0f) + sizeOfThumbnailPage +(spaceRightOfThumbnailPage / 2.0f));
> 
> NSInteger pageNearestMiddle = (NSInteger)(roundfscrollView.contentSize.width / sizeOfAThumbnailPage));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:05:14.857

我认为使用[hitTest::](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/hitTest%3awithEvent%3a)将子视图放在中心会更容易，真正的问题是划分空间，但如果你将它作为页面预览的一部分，它可能会被处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T10:37:04.690

只是为了解决这个问题，我终于找到了一个不错的解决方案。

创建缩略图时，我将所有位置保存在一个数组中，滚动时我只检查位置是否匹配。

我知道这并不理想，但是动态计算位置有点困难，因为我有不同大小的缩略图。

```
NSInteger scrollPos = scrollView.contentOffset.x + (scrollView.frame.size.width / 2);

for(NSDictionary *tmpDic in _thumbsPos) {
    NSInteger startPos = [[tmpDic objectForKey:@"start"] intValue];
    NSInteger endPos = [[tmpDic objectForKey:@"end"] intValue];
    NSInteger page = [[tmpDic objectForKey:@"page"] intValue];

    if(scrollPos >= startPos && scrollPos <= endPos) {
        _thumbnailPopup.titleLabel.text = [_readerModel getTitleForPage:page inIssue:_readerModel.currentIssue];
        _thumbnailPopup.pageLabel.text = [NSString stringWithFormat:@"%d", (page + 1)];

        return;
    }
} 
```

# html - 多列HTML表格的设计

> ID：12365162
> 
> 赞同：7
> 
> 时间：2012-09-11T07:54:25.997
> 
> 标签：html, user-interface, html-table

最近，我遇到了一个 HTML 表格设计问题。我有一个 CS 程序，我想把它重建成一个 BS 程序。这是 UI 屏幕截图。

![在此处输入图像描述](../Images/ef1105db4dee72bc533310bead9eb825.png)

如您所见，它的列太多。将出现一个水平滚动条。如何改善用户体验？

我尝试将几列合二为一，但它带来了一些新问题——混乱，不好过滤和排序。

如果你有一个很好的例子，请给我看。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-07-30T08:15:56.353

经过长时间的思考，并不完美，但我找到了一些解决方法。我在这里发布我的解决方案以供参考。

1，允许水平滚动条太长的列。 [![在此处输入图像描述](../Images/c8f04dfb26419328c78037d7f8f418eb.png)](https://i.stack.imgur.com/vadw1.png) 这可以通过添加一个包裹表格的 DIV 标记来轻松完成，如下所示：

```
<div style="overflow-x: auto;">
    <table class="no-wrap">
    <!-- stuff -->
    <!-- no-wrap is a AdminLTE style which makes the text in the table do not wrap -->
    </table>
</div> 
```

2，允许用户控制显示哪些列。我通过添加一个基于 Bootstrap 的模式对话框来做到这一点。 [![在此处输入图像描述](../Images/f5ecd95a3fcd6735d032f2d3613811d5.png)](https://i.stack.imgur.com/pH9CC.png) 减少显示列数，你会发现在窄屏下会更好看。

通过编写一些 JavaScript 代码并使其在您的项目中通用，这并不难。切记善用**Local Storage**技术，将用户的配置保存在本地，下次用户打开此页面时恢复状态。在我的解决方案中，我的本地存储密钥是这样的：

```
my-datatable-hide-col:/business/order:tb-order 
```

`my-datatable-hide-col`是固定的，`/business/order`是路径，`tb-order`是表的id。这个本地存储键的值是这样的：

```
[0, 3, 4] 
```

这意味着第 0 列、第 3 列和第 4 列将被隐藏。如果该值不存在或为空，则不会隐藏任何列。

3、允许用户控制列的顺序。类似于上面控制列的显示状态。 [![在此处输入图像描述](../Images/3d6641ecdf712ce720a89dd80addc038.png)](https://i.stack.imgur.com/95Q9l.png)

这也可以通过编写一些 JavaScript 代码并使其通用来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:08:22.663

关于更好的用户体验，如果每隔一行的颜色略有不同（就像 iTunes 在 iTunes 11 改变整个该死的设计之前所做的那样），它会有所帮助。这允许用户轻松区分每一行。

这是我的意思的一个例子：http: [//alistapart.com/article/zebratables](http://alistapart.com/article/zebratables)

这里是如何实现它（超级简单）： [http ://css-tricks.com/snippets/css/css3-zebra-striping-a-table/](http://css-tricks.com/snippets/css/css3-zebra-striping-a-table/)

此外，这将取决于客户想要什么，但显然你会想要删除任何真正未使用的列。对于那些只有一个小值的列（例如，一个数字），使它们尽可能小。

希望有些帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-25T16:00:00.567

```
<div style="overflow-x: auto;">
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td>
                                        grams
                                    </td>
                                    <td>
                                        kilograms
                                    </td>
                                    <td>
                                        Milligrams
                                    </td>
                                    <td>
                                        Ounces
                                    </td>
                                    <td>
                                        Pounds
                                    </td>
                                    <td>
                                        Pounds+ounce
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        0
                                    </td>
                                    <td>
                                        0
                                    </td>
                                    <td>
                                        0
                                    </td>
                                    <td>
                                        0
                                    </td>
                                    <td>
                                        0
                                    </td>
                                    <td>
                                        0 lb 0 oz
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        1
                                    </td>
                                    <td>
                                        0.001
                                    </td>
                                    <td>
                                        1000
                                    </td>
                                    <td>
                                        0.0353
                                    </td>
                                    <td>
                                        0.002205
                                    </td>
                                    <td>
                                        0 lb 0.0353 oz
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        2
                                    </td>
                                    <td>
                                        0.002
                                    </td>
                                    <td>
                                        2000
                                    </td>
                                    <td>
                                        0.0706
                                    </td>
                                    <td>
                                        0.004409
                                    </td>
                                    <td>
                                        0 lb 0.0706 oz
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        5
                                    </td>
                                    <td>
                                        0.005
                                    </td>
                                    <td>
                                        5000
                                    </td>
                                    <td>
                                        0.1764
                                    </td>
                                    <td>
                                        0.011023
                                    </td>
                                    <td>
                                        0 lb 0.1764 oz
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        10
                                    </td>
                                    <td>
                                        0.01
                                    </td>
                                    <td>
                                        10000
                                    </td>
                                    <td>
                                        0.3527
                                    </td>
                                    <td>
                                        0.022046
                                    </td>
                                    <td>
                                        0 lb 0.3527 oz
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        30
                                    </td>
                                    <td>
                                        0.03
                                    </td>
                                    <td>
                                        30000
                                    </td>
                                    <td>
                                        1.0582
                                    </td>
                                    <td>
                                        0.066139
                                    </td>
                                    <td>
                                        0 lb 1.0580 oz
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        50
                                    </td>
                                    <td>
                                        0.05
                                    </td>
                                    <td>
                                        50000
                                    </td>
                                    <td>
                                        1.7637
                                    </td>
                                    <td>
                                        0.110231
                                    </td>
                                    <td>
                                        0 lb 1.7640 oz
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        100
                                    </td>
                                    <td>
                                        0.1
                                    </td>
                                    <td>
                                        100000
                                    </td>
                                    <td>
                                        3.5274
                                    </td>
                                    <td>
                                        0.220462
                                    </td>
                                    <td>
                                        0 lb 3.5270 oz
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        1000
                                    </td>
                                    <td>
                                        1
                                    </td>
                                    <td>
                                        1000000
                                    </td>
                                    <td>
                                        35.2740
                                    </td>
                                    <td>
                                        2.204623
                                    </td>
                                    <td>
                                        2 lb 3.2740 oz
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        </div>
```

[在此处输入图像描述](https://i.stack.imgur.com/o0k7C.jpg)

# android - android数组索引异常

> ID：12365165
> 
> 赞同：0
> 
> 时间：2012-09-11T07:54:34.390
> 
> 标签：android, arrays

我有一个包含imageview和gridview的活动。规则是当我在gridview上单击选定的图像时，它将由imageview预览。然后，可以单击imageview并将其显示在对话框中。问题是当我单击imageview，该图像与 gridview.here 我的代码中的选定图像不匹配。

```
public class GalleryActivity extends Activity {

ImageView imgviewThumb, imgviewPreviewDialog;
public int[] imageResto = {
        R.drawable.img1,
        R.drawable.img2,
        R.drawable.img3,
        R.drawable.img4,
        R.drawable.img5,
        R.drawable.img1,
        R.drawable.img2,
        R.drawable.img3,
        R.drawable.img4
};
int position ;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_gallery);

    imgviewThumb = (ImageView)findViewById(R.id.imgview_preview);
    imgviewThumb.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Dialog dialog = new Dialog(GalleryActivity.this);
            dialog.setCancelable(true);
            dialog.setContentView(R.layout.dialog_previewimage);
            imgviewPreviewDialog = (ImageView) dialog.findViewById(R.id.imgview_preview_dialog);
            imgviewPreviewDialog.setImageResource(imageResto[position]);
            dialog.show();
        }
    });

    GridView gView = (GridView) findViewById(R.id.grid_View);

    //Instantiating ImageAdapter class
    gView.setAdapter(new ImageAdapter(this));

    /*showing full image on clicking the thumbnail
     * create a new class named FullImage.java 
     */
    gView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            imgviewThumb.setImageResource(imageResto[position]);
        }
    });
}

public class ImageAdapter extends BaseAdapter {
    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(140, 140));
            imageView.setAdjustViewBounds(false);
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);

        return imageView;
    }

    private Context mContext;

    // images in array
    public Integer[] mThumbIds = {
             R.drawable.thumb1_e,
             R.drawable.thumb2,
             R.drawable.thumb3,
             R.drawable.thumb4,
             R.drawable.thumb5,
             R.drawable.thumb1,
             R.drawable.thumb2,
             R.drawable.thumb3,
             R.drawable.thumb4
    };
}
} 
```

请纠正我。谢谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:04:42.507

尝试改变：

```
public Object getItem(int position) {
        return position;
} 
```

对此：

```
public Object getItem(int position) {
        return mThumbIds[position];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:17:41.057

我认为你使用了两个不同的数组，所以它可能不匹配，

```
public int[] imageResto = {
        R.drawable.img1,
        R.drawable.img2,
        R.drawable.img3,
        R.drawable.img4,
        R.drawable.img5,
        R.drawable.img1,
        R.drawable.img2,
        R.drawable.img3,
        R.drawable.img4
};

  // images in array
    public Integer[] mThumbIds = {
             R.drawable.thumb1_e,
             R.drawable.thumb2,
             R.drawable.thumb3,
             R.drawable.thumb4,
             R.drawable.thumb5,
             R.drawable.thumb1,
             R.drawable.thumb2,
             R.drawable.thumb3,
             R.drawable.thumb4
    }; 
```

并在此处放置有效的图像数组位置，使其正确为 0 到数组的长度，因此其写入位置位于此处

```
 gView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {

            imgviewThumb.setImageResource(validImageArray[position]);
        }
    }); 
```

或者你可以在 getView 中做这样的改变

```
 public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(140, 140));
            imageView.setAdjustViewBounds(false);
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(imageResto[position]);

        return imageView;
    } 
```

# windows-7 - 导航窗格中的收藏夹 Windows 7 排序顺序

> ID：12365168
> 
> 赞同：1
> 
> 时间：2012-09-11T07:54:49.077
> 
> 标签：windows-7, registry, favorites

我想掌握收藏夹链接的排序顺序，如添加文件夹时所见，它位于列表底部，然后您可以将其拖动到任何位置。

是否有任何注册表黑客或类似的东西，您可以获得并更改该订单？我总是希望它按字母顺序排序，而不必一直更改所有内容。我一直在四处寻找，但找不到任何可以帮助我的东西，我想知道哪个注册表控制着Windows 7 导航窗格中收藏夹列表的顺序？不是 Internet Explorer 的最爱...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-03T23:03:40.943

我使用一种奇怪但有效的方式。我导出整个键 FAVORITES，然后按我的心理顺序排序，然后完全删除注册表中的 FAVORITES，最后导入之前排序的 file.reg。我认为问题在于使用常规的语法在收藏夹中指定一个有效名称，以更好地了解它会将我们带到哪里。然而，这个任务可以通过一个简单的常规批处理来完成。/tux01

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:11:39.687

不，不支持以编程方式重新排序收藏夹的方式。想象一下，如果有：每个应用程序都会将自己移到顶部！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-31T03:47:22.393

当您将某个位置链接到收藏夹文件夹时，它会被放置在列表的底部。然后，您可以使用鼠标将其拖动到任何位置。

# java - 为什么这个 hashmap 有两次相同的键？

> ID：12365169
> 
> 赞同：1
> 
> 时间：2012-09-11T07:54:52.727
> 
> 标签：java, hashmap, key, duplicates

```
// same X, Y value text.
    TextInfo currXY = new TextInfo( text );

    ArrayList<TextPosition> currTextArray = textComposition.get( currXY );
    if( currTextArray != null ){
        currTextArray.add( text ); 
    } else {
        ArrayList<TextPosition> newTextArray = new ArrayList<TextPosition>();
        newTextArray.add( text );
        if( textComposition.containsKey( currXY )){
            System.out.println( "processTextPosition : containsKEy ");
        }
        textComposition.put( currXY , newTextArray );
    } 
```

A`HashMap`不能有重复或相同的密钥，对吗？

我从 hashmap 中获取所有条目并将这些条目放入一个新的 hashmap 中。

它像同一把钥匙一样进行。

```
lineSortingMap = new HashMap< TextInfo, ArrayList<TextPosition> > ();     
    for ( Map.Entry< TextInfo, ArrayList<TextPosition> > entry : textComposition.entrySet() ) {
        TextInfo key = (TextInfo)entry.getKey();
        ArrayList<TextPosition> arrayTextPositions = entry.getValue();
        if( lineSortingMap.containsKey( key ) ){
            System.out.println("WTFcontainsKey : " + " " + key + " " + key.getX() + " " + key.getY() );
        }
        else{
            lineSortingMap.put( key , arrayTextPositions );
        }
    } 
```

结果：

```
WTFcontainsKey :  analyzeSrc.TextInfo@4c5 75.307 603.85535

WTFcontainsKey :  analyzeSrc.TextInfo@4c5 71.74238 603.85535

WTFcontainsKey :  analyzeSrc.TextInfo@4c4 66.36187 612.82837

... 
```

你能解释一下这里发生了什么吗？

为什么它不打印“processTextPosition : containsKey”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T07:57:23.863

可能是因为您的 Key Object 没有正确覆盖 equals() 和 hashCode() 。

[**请参阅Java 教程**](http://docs.oracle.com/javase/tutorial/java/)中的文档[**`Object.hashCode()`**](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)和 Section [**Object as a Superclass**](http://docs.oracle.com/javase/tutorial/java/IandI/objectclass.html)[](http://docs.oracle.com/javase/tutorial/java/)

 **甚至更好：阅读[**Joshua Bloch 的 Effective Java（第二版）**](http://java.sun.com/docs/books/effective/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T07:57:49.700

没有看到完整的代码很难知道，但我有理由确定你的`TextInfo`类没有正确实现[`equals()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)和[`hashCode()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29). 实现这两种方法是作为[`HashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:00:46.593

要使用您创建的对象作为 Map 中的键，您应该覆盖`hashCode()`和`equals()`方法。我很确定您的课程`TextInfo`没有提供相同的实现。**

# java - 从 1 个机器人开始建造 200 个机器人，如何？

> ID：12365172
> 
> 赞同：0
> 
> 时间：2012-09-11T07:55:07.620
> 
> 标签：java

我有一个任务是编写一个以 1 个机器人开头的代码，我需要找出最多 200 个机器人需要几个月的时间。

条件：

从 1 个机器人开始，这个机器人收集材料 2 个月。有了这些材料，它可以制造3个机器人，每个月1个机器人。所以一个机器人的周期是5个月。当然，新造的机器人也收集材料2个月，然后每人造3个机器人，以此类推……

我唯一的提示是应该使用 3 个变量来完成。每个收集月 2 个，每个建筑月 3 个。

这是在 Java 中完成的。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:05:21.080

我会以面向对象的方式解决这个问题。

我将创建一个带有公共方法 workForAMonth() 的 Robot 类，它可能会返回一个新的机器人或 null。

主循环看起来像这样（伪代码）：

```
 create an empty List of robots
 add one robot to it
 while the list of robots has less than 200 entries
     create a new list of the newly build robots
     iterate the list of existing robots. for each robot:
          call the workForAMonth method. When it returns a robot, append it to the list of newly build robots
     append the newly build robots to the main list
     add 1 to month
 output month 
```

workForAMonth 方法如下所示：

```
 increment the private month counter of this robot by 1
 whe the counter is 5, set it back to 0
 when the counter is 2 or larger, return a new Robot, else return null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:26:20.510

提示一种可能的方法：

因为这里的最小时间单位是 1 个月，所以让我们有一个时间变量，每次增加 1 个月。

机器人会做什么取决于他目前处于 5 个月周期中的哪个月。所以，我们跟踪每个状态有多少机器人，

*   第一个聚会周有多少机器人？
*   第二个聚会周有多少机器人？
*   第一个建造周有多少机器人？
*   第二个建造周有多少机器人？
*   第三个建造周有多少机器人？

一个月过去了，不同状态的机器人数量会发生怎样的变化？机器人将进入下一个状态。可能（取决于他们的状态）他们也会生产一个新的机器人。这个机器人将处于哪个状态？

继续循环，直到您拥有所需数量的机器人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:11:01.553

既然你一点头绪都没有，我给你三个提示：

*   忘掉机器人、物体和编程的东西（至少，一开始是这样），试着想想随着时间的推移机器人数量的**函数**
*   阅读**递归**
*   阅读与您的问题密切相关的**斐波那契数列。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T16:00:54.320

嗯......解决方案原来很简单，这里是：

```
class Robot{
public static void main(String[] args){
    int g1 = 1, g2 = 0, b1 = 0, b2 = 0, b3 = 0, month = 0, tot = 0, left, built;
    while(tot<200){
        month++;
        tot = g1 + g2 + b1 + b2 + b3;
        System.out.println("Month " + month + " materials for " + (g1 + g2) + " robots were gathered and " + (b1 + b2 + b3) + " were built \n");
        System.out.println(" Totally there's " + tot + " Robots on the moon \n \n");
        built = b1 + b2;
        left = b3;
        b3 = b2;
        b2 = b1;
        b1 = g2;
        g2 = g1;
        g1 = (left + built);
    }
}
} 
```

# javascript - 在javascript中完成jQuery或对象

> ID：12365175
> 
> 赞同：0
> 
> 时间：2012-09-11T07:55:15.950
> 
> 标签：javascript

> **可能重复：**
> [Eclipse JavaScript 编辑器：js 文件的内容辅助](https://stackoverflow.com/questions/1006934/eclipse-javascript-editor-content-assist-for-js-files)

我使用 eclipse 用 javascript 编写代码。

eclipse 是否有可能在 jQuery 或 javascript 中完成单词或语句？

例如

```
$("test"). 
```

然后我想获得所有功能的选项或

```
var obj = { key : 1 , val : 2 } 
```

当我按下 obj. 我想获取密钥或验证

是否有可能在 eclipse 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:23:40.213

查看适用于 eclipse 的[**Aptana Studio**插件](http://www.aptana.com/products/studio3/download)。它的代码辅助功能开箱即用，适用于 vanilla JavaScript，并且可以很容易地扩展以支持常见的 JavaScript 库（例如 jQuery）。

# android - Android 4.0.3 OpengL ES 2.0 问题

> ID：12365178
> 
> 赞同：2
> 
> 时间：2012-09-11T07:55:29.197
> 
> 标签：android, opengl-es, opengl-es-2.0, android-4.0-ice-cream-sandwich, live-wallpaper

我使用 Opengl ES 2.0 引擎开发动态壁纸。我的壁纸在 2.x Android 设备上运行流畅，但在 4.03 中我看到了一些奇怪的东西。第一秒（最多可能一分钟）lwp 运行平稳，但在那之后开始丢帧，尤其是当经过相机附近的物体几乎崩溃时。但是eclipse日志没有错误。从开始加载 lwp 到丢帧，我一直在观察 Eclipse 日志。我在我的 LG Optimus 2X 和我的三星 Galaxy S2 上看到了这一点。任何想法要检查什么，或者发生了什么？

更新我刚刚注意到将渲染模式从脏更改为持续修复问题，但直到屏幕方向改变，或者继续。在那个渲染器吓坏了之后。

* * *

更新

我注意到了一些奇怪的事情

在预览模式下，当我改变方向并关闭和打开屏幕时一切正常，因为触发了 glWallpaperService.glEngine.onsurfacedestroyed！在正常模式下，这不会发生！即使我转动屏幕，触发的唯一空白是 onsurfaceChanged！但是 GLThread 破坏了两种模式的表面。

普通模式和预览模式有什么区别？以及为什么每次更改都会触发 onsurfacedestroyed 预览模式？

# xml - 使用 LinqToXml 选择唯一的 XElements（按属性）

> ID：12365179
> 
> 赞同：0
> 
> 时间：2012-09-11T07:55:30.233
> 
> 标签：xml, linq-to-xml, xelement, xattribute

我有一个 XML，其中有几个`<testcase>`标签。其中一些具有值为“pr”的属性“ident”，而另一些则没有。

```
<testcase>
  <teststep ident="Preparation" result="na">blabla</teststep>
  <teststep ident="" result="pass">blabla</teststep>
  <teststep ident="-" result="na">blabla</teststep>
  <teststep ident="Info" result="na">blabla</teststep>
  <teststep ident="1" result="pass">blabla</teststep>
  <teststep ident="2" result="pass">blabla</teststep>
  <teststep ident="3" result="pass">blabla</teststep>
  <teststep ident="4" result="fail">blabla</teststep>
  <teststep ident="PR" result="na">blabla</teststep>
  <verdict result="fail" />
</testcase> 
```

我想查询包含值为“pr”的 ident 属性的测试用例

```
IEnumerable<XElement> failedPRTCs = report.Descendants("testcase").Where(t => t.Element("verdict").Attribute("result").Value == "fail" && t.Descendants("teststep").Where(ts=> ts.Attribute("ident").Value == "pr").ToList().Count > 0).ToList(); 
```

当前查询返回 0。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:59:36.140

看起来像一个简单的套管问题！`"pr"`对`"PR"`！我还建议使用`Any`而不是`count > 0`：

```
IEnumerable<XElement> failedPRTCs = report.Descendants("testcase")
    .Where(t => t.Element("verdict").Attribute("result").Value == "fail" &&
           t.Descendants("teststep").Any(ts=> ts.Attribute("ident").Value == "PR")); 
```

# google-app-engine - 在 Google App Engine 中删除索引全文搜索

> ID：12365184
> 
> 赞同：9
> 
> 时间：2012-09-11T07:55:46.920
> 
> 标签：google-app-engine, console

如何删除 Google App Engine 中的索引全文搜索？我想在[http://appengine.google.com](http://appengine.google.com)的管理控制台清空索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:31:26.627

从新的空索引开始的最简单方法。我不相信你可以从控制台清空它，也不能与它进行交互，除了编写查询。

要忽略旧内容，只需将程序中的当前索引重命名为新索引名称即可。然而，旧索引将永远存在，但您可以编写一个小处理程序，如果愿意，可以通过编程方式清除所有文档：

[https://developers.google.com/appengine/docs/python/search/overview#Removing_Documents](https://developers.google.com/appengine/docs/python/search/overview#Removing_Documents)

> 您可以通过在 Index.remove() 方法中指定要删除的一个或多个文档的 doc_id 来删除索引中的文档。要删除文档集合，请为 Index.list_documents() 方法指定 ids_only 参数。

所以只需循环索引，获取所有文档 ID，然后将它们全部删除。

# c++ - 我应该更喜欢 std::thread 还是 Boost 线程？

> ID：12365196
> 
> 赞同：15
> 
> 时间：2012-09-11T07:56:15.980
> 
> 标签：c++, multithreading, boost

我是 C++ 新手（来自 C#），正在编写一个多线程 C++ 应用程序，想知道什么更好用：`std::thread`还是它的 Boost 对应物？

我在另一篇 Stack Overflow 帖子中看到了[以下讨论](https://stackoverflow.com/questions/7241993/is-it-smart-to-replace-boostthread-and-boostmutex-with-c11-equivalents)，但仍然没有完全了解我为什么要选择一个而不是另一个。如果不启动新程序，我应该使用标准库还是 Boost 线程？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-11T08:04:28.340

如果您尚未在项目中使用 boost，则没有理由使用 boost::thread 来支持 std::thread。除非您使用的是 STL 中不可用的 boost 中的某些功能。std::thread 足够适用于大多数用例，除非提出令人信服的论据，否则编写标准代码始终是可取的。

但是，如果您已经在项目中使用 boost，请检查 boost::thread 与 std::thread 相比是否提供了额外的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T09:29:39.550

请记住，Boost.Thread 是一个可移植的库，可以在各种平台/编译器上编译——包括那些 std::thread 不可用的平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:05:08.540

这真的取决于你的习惯和偏好。使用boost，你拥有一整套让你的生活更轻松的库，但它们需要安装在你的程序编译所在的系统上，而使用std线程你只需要一个cpp编译器。

# python - 如何捕获 pyqt closeEvent 并最小化对话框而不是退出？

> ID：12365202
> 
> 赞同：10
> 
> 时间：2012-09-11T07:56:26.947
> 
> 标签：python, pyqt, pyqt4, qdialog

我有一个 QDialog 对象。当用户单击`X`按钮或按下`Ctrl+Q`时，我希望对话框转到最小化视图或系统托盘图标，而不是关闭。我怎么做？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-11T09:29:52.503

一个最小化而不是关闭的简单子类如下：

```
class MyDialog(QtGui.QDialog):
    # ...
    def __init__(self, parent=None):
        super(MyDialog, self).__init__(parent)

        # when you want to destroy the dialog set this to True
        self._want_to_close = False

    def closeEvent(self, evnt):
        if self._want_to_close:
            super(MyDialog, self).closeEvent(evnt)
        else:
            evnt.ignore()
            self.setWindowState(QtCore.Qt.WindowMinimized) 
```

您可以在交互式解释器中使用此代码段对其进行测试：

```
>>> from PyQt4 import QtCore, QtGui
>>> app = QtGui.QApplication([])
>>> win = MyDialog()
>>> win.show()
>>> app.exec_()   #after this try to close the dialog, it wont close bu minimize 
```

# java - MySQL - 外键和自动生成的 ID

> ID：12365208
> 
> 赞同：1
> 
> 时间：2012-09-11T07:56:44.037
> 
> 标签：java, mysql, jdbc, auto-increment

在我的应用程序中，我有一个组件从另一个组件接收对象并将它们插入 MySQL DB。目前我正在缓冲对象，并且偶尔（几秒钟）使用批处理（使用 JDBC，而不是休眠）将对象插入到数据库中。

我想将此对象分解为 2 个对象，然后是两个缓冲区，最后将它们插入到 2 个不同的表中。

我的第一个想法是使用 MySQL 自动生成的 ID 将表中的两个子对象绑定在一起（作为外键）。

我的问题是 - 当我插入“子”对象时，如何知道“父”对象的自动生成 ID？

我的想法是：

1.  在拆分对象之前生成我自己的 ID，然后自己将 ID 发送到 DB，而不使用 MySQL 自动生成的 ID。
2.  使用将插入第一个对象的存储过程，使用 MySQL 的`LAST_INSERT_ID();`

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:16:50.117

一种解决方案是在此问题中所做的同一事务中插入两条记录。 [JDBC：在同一事务中创建的 PK 上的外键](https://stackoverflow.com/questions/6056917/jdbc-foreign-key-on-pk-created-in-same-transaction)

那是：

1.  初始化事务。
2.  做父亲的第一个插入。
3.  检索生成的父亲 ID。
4.  使用父亲 ID 执行子项的第二次插入。
5.  提交事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:14:19.430

也许这会有所帮助（您也可以在普通 SQL 中使用 LAST_INSERT_ID()，而不仅仅是在程序内部），另请参见[http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html](http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html)：

```
INSERT INTO foo (auto,text) VALUES(NULL,'text');         # generate ID by inserting NULL
INSERT INTO foo2 (id,text)  VALUES(LAST_INSERT_ID(),'text');  # use ID in second table 
```

鉴于 OP 在单独的线程上运行 INSERT，需要预先分配 ID - 您可以使用序列安全地选择唯一 ID（另请参阅[MySQL 信息函数](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html)）：

> *   创建一个表来保存序列计数器并对其进行初始化：
>     
>     
>     
>     mysql> CREATE TABLE 序列（id INT NOT NULL）；
>     
>     
>     
>     mysql> 插入序列值（0）；
>     
>     
> *   使用该表生成序列号，如下所示：
>     
>     
>     
>     mysql> 更新序列 SET id=LAST_INSERT_ID(id+1);
>     
>     
>     
>     mysql> SELECT LAST_INSERT_ID();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:21:24.077

两种方法都有效。
Java 方法与数据库无关，可能更容易让您切换数据库或支持多个数据库供应商。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T09:07:06.883

您的基本问题是，您需要从数据库中获取一个对象的信息，然后才能存储另一个对象。

假设您将复合对象拆分为两个较小的对象，即 Place 和 Map。

如果您必须有两个缓冲区来存储 Place 和 Map，那么我看到了三种方法：

1.  仅将 Place 放在存储缓冲区中。当 Place 被存储，并且 PK 已经从数据库中读取时，只有将 Map 放在另一个存储缓冲区中。

2.  将 Place 和 Map 放在它们自己的存储缓冲区中。当一个 Map 即将被存储时，检查它的关联 Place，看看 PK 是否已经生成。如果有，则存储地图。如果没有，则跳过该地图并检查下一个地图。

3.  将 Place 放入存储缓冲区。当它被存储时，读取 PK，并立即存储 Map。这显然不使用两个存储缓冲区。

查看其他对象如何存储在您的应用程序中。当然，它们在存储到数据库之前不会生成自己的 ID。当然，在您拥有存储它们所需的所有信息之前，您不会尝试将它们放入存储缓冲区。因此，我推荐的行动方案是选项 1 或 3。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T17:13:07.990

使用 JDBC 检索生成的密钥的标准接口是使用`getGeneratedKeys()`语句上的方法。见[例 21.8。](http://dev.mysql.com/doc/refman/5.1/en/connector-j-usagenotes-last-insert-id.html#connector-j-examples-autoincrement-getgeneratedkeys)连接器/J：使用从 MySQL 站点[检索 AUTO_INCREMENT 列值](http://dev.mysql.com/doc/refman/5.1/en/connector-j-usagenotes-last-insert-id.html#connector-j-examples-autoincrement-getgeneratedkeys)

# javascript - 阻止对父级的相同域 iframe 访问

> ID：12365210
> 
> 赞同：4
> 
> 时间：2012-09-11T07:56:46.193
> 
> 标签：javascript, iframe, parent, parent-child, same-origin-policy

我有一个带有 iframe 的网站 xyz.com，它在 iframe 内加载 xyz.com/usersubmittedpage.html。

如何阻止内页访问父页面。同源策略允许它访问父项中的所有内容。是否可以使用另一种方法来加载此页面，而无需授予其访问父内容的权限，同时将其保留在同一域中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:38:15.117

出色地...

iframe 有沙盒属性：[https ://developer.mozilla.org/en-US/docs/HTML/Element/iframe#attr-sandbox](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe#attr-sandbox)

[但它仅在 Chrome 中受支持（可靠）（截至撰写本文时，2012 年 9 月 11 日）。](http://caniuse.com/iframe-sandbox) （它将在其他地方得到支持/支持，但几乎没有。）

# javascript - jQuery - 在页面加载时执行一个函数？

> ID：12365212
> 
> 赞同：1
> 
> 时间：2012-09-11T07:56:57.733
> 
> 标签：javascript, jquery

我想在加载页面时在导航栏上添加一个类。

这是我的尝试：

```
$(document).ready(function(){

    $('index.php').load(function(){
        $("#etusivu").addClass("selected");
        $("#quartz").removeClass("selected");
        $("#raikastimet").removeClass("selected");
        $("#sisusta").removeClass("selected");
        $("#teipit").removeClass("selected");
        $("#vaimennusmatot").removeClass("selected");
    });

    $('quartz.php').load(function(){

        $("#etusivu").removeClass("selected");
        $("#quartz").addClass("selected");
        $("#raikastimet").removeClass("selected");
        $("#sisusta").removeClass("selected");
        $("#teipit").removeClass("selected");
        $("#vaimennusmatot").removeClass("selected");
    });

    $('raikastimet.php').load(function(){

        $("#etusivu").removeClass("selected");
        $("#quartz").removeClass("selected");
        $("#raikastimet").addClass("selected");
        $("#sisusta").removeClass("selected");
        $("#teipit").removeClass("selected");
        $("#vaimennusmatot").removeClass("selected");
    });

    $('sisusta.php').load(function(){

        $("#etusivu").removeClass("selected");
        $("#quartz").removeClass("selected");
        $("#raikastimet").removeClass("selected");
        $("#sisusta").addClass("selected");
        $("#teipit").removeClass("selected");
        $("#vaimennusmatot").removeClass("selected");
    });

    $('teipit.php').load(function(){

        $("#etusivu").removeClass("selected");
        $("#quartz").removeClass("selected");
        $("#raikastimet").removeClass("selected");
        $("#sisusta").removeClass("selected");
        $("#teipit").addClass("selected");
        $("#vaimennusmatot").removeClass("selected");
    });

    $('vaimennusmatot.php').load(function(){

        $("#etusivu").removeClass("selected");
        $("#quartz").removeClass("selected");
        $("#raikastimet").removeClass("selected");
        $("#sisusta").removeClass("selected");
        $("#teipit").removeClass("selected");
        $("#vaimennusmatot").addClass("selected");
    });

}); 
```

`class="selected"`因此，当用户单击导航上的链接并且浏览器加载新页面时，我尝试添加。但这行不通。

这是导航：

```
<ul id="navigation">';
        <li id="etusivu"><a href="index.php">Etusivu</a></li>
        <li id="quartz"><a href="quartz.php">Quartz-kalvot</a></li>
        <li id="raikastimet"><a href="raikastimet.php">Raikastimet</a></li>
        <li id="sisusta"><a href="sisusta.php">Sisusta</a></li>
        <li id="teipit"><a href="teipit.php">Teipit</a></li>
        <li id="vaimennusmatot"><a href="vaimennusmatot.php">Vaimennusmatot</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:01:34.983

这不是方法的正确用法`load`。

> .load( url [, data] [, complete(responseText, textStatus, XMLHttpRequest)] )

```
$(document).ready(function(){

  $('#navigation a').click(function(event) {
     event.preventDefault(); // prevents the default action of the event
     $(this).parent().addClass('selected').siblings().removeClass('selected');
     var url = this.href;
     $('#whereToLoad').load(url)
  })

}); 
```

*   [加载（）](http://api.jquery.com/load/)
*   [子灵（）](http://api.jquery.com/siblings/)
*   [父母（）](http://api.jquery.com/parent/)
*   [event.preventDefault()](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:01:08.573

你放在里面的所有东西

```
$(document).ready(function(){

    ...

}); 
```

... 将在 DOMReady 立即为包含该代码的每个文档执行。如果您想在此时更改选定的类，您可以执行以下操作：

```
$('#navigation .selected').removeClass('selected'); // remove 'selected' class from all li's that have it
$('#id-of-current-page').addClass('selected'); 
```

现在，要找出当前元素是哪个，例如可以检查`location.href`。但是，当您使用 PHP 时，我真的建议您在呈现的 HTML 中添加选定的类。

您的代码当前所做的是在页面加载时立即通过 AJAX 请求获取所有这些页面，然后为每个响应添加和删除大量选定的类。

# c# - 如何将经典 ASP 响应对象传递给 C# DLL

> ID：12365214
> 
> 赞同：2
> 
> 时间：2012-09-11T07:57:02.837
> 
> 标签：c#, asp-classic, vbscript, httpresponse

谁能告诉我是否可以将 Response 对象从经典 asp 传递到 C# 类库，如果可以，它是如何完成的。

我在 ASP 中使用 C# 2010 express 和 JScript，但我会接受 VBScript 的答案。

或者，如果有另一种从 dll 输出到经典 asp 页面的 http 上下文的方法，那也可以。

我认为它无法完成，因为 System.Web.HttpResponse 对象似乎无法从类库中获得。

感谢那些回复的人。作为对可能有相同问题的其他人的完整答案，这里有一些示例代码：

```
public string passObj(ASPTypeLibrary.Response r)
{
    r.Write("text from DLL");
    return "OK";
} 
```

在经典的 asp 方面：

```
var x = Server.CreateObject("dllTest.test");
x.passObj(Response); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T09:09:21.527

要访问包括响应在内的经典 ASP 对象，您可以在 C# 项目中将 COM 引用添加到“Microsoft Active Server Pages Object Library”。

然后，您可以从 C# 将其引用为：

```
ASPTypeLibrary.Response 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:09:14.463

Response 对象是一个[支持 IUnknown 和 IDispatch 的 COM 对象](http://msdn.microsoft.com/en-us/library/ms525848%28v=vs.90%29)。因此，您可以将其作为对象传递给方法并使用反射调用属性。

从我自己的机器上看， Typelib UUID`IReponse IID`是. 如果您打开 regedit 并导航到默认键，将包含 Typelib 的路径，您可以导入以创建互操作程序集。`{D97A6DA4-D5F5-4763-9BE5-60126DD39E43}``{A79CBB28-1006-4227-BE61-CBEE2520C353}``HKEY_CLASSES_ROOT\TypeLib\{A79CBB28-1006-4227-BE61-CBEE2520C353}\2.0\0\win32`

# android - 手动弹出 FragmentManager 的后台堆栈时，如何实现反向转换？

> ID：12365215
> 
> 赞同：2
> 
> 时间：2012-09-11T07:57:08.870
> 
> 标签：android, android-fragments, transitions

我正在使用 v4 兼容性库并切换到这样的新片段：

```
 FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
 transaction.setCustomAnimations(R.anim.fade_in, R.anim.fade_out);
 transaction.replace(R.id.contentFragmentContainer, event.getFragmentClass().newInstance(), FRAGMENT_CONTENT);
 transaction.addToBackStack(fragmentTransactionName);
 transaction.commit(); 
```

现在，当我想以编程方式返回前一个片段而不用新的片段事务污染用户的后台堆栈时，我使用`popBackStackImmediate()`：

```
 if (fragmentManager.popBackStackImmediate(fragmentTransactionName, 0)) {
     return;
 }
 // apparently popping back to that fragment was not successful,
 // make a regular transaction now 
```

尽管用于动画到弹出片段之一的动画没有反转，但这一切都很好。我也尝试过`transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE)`事先使用，但这甚至没有显示常规交易发生时的转换，也没有显示反向。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T13:22:34.297

我想说我必须更好地阅读 The Fine Manual (TM)：

```
public abstract FragmentTransaction setCustomAnimations
                (int enter, int exit, int popEnter, int popExit) 
```

> “为该事务中进入和退出的片段设置特定的动画资源。popEnter和popExit动画将在弹出回栈时播放进入/退出操作。”

（[来源](http://developer.android.com/reference/android/support/v4/app/FragmentTransaction.html#setCustomAnimations)）

# android - OnSharedPreferenceChangeListener 的范围

> ID：12365217
> 
> 赞同：1
> 
> 时间：2012-09-11T07:57:15.027
> 
> 标签：android, android-preferences

我已经开发了一个带有推送服务的应用程序，在该应用程序中我正在更改接收推送的一些偏好，并在我`onCreate()`的主要活动功能中为该特定偏好编写了偏好更改侦听器，并像这样注册它：

```
static  OnSharedPreferenceChangeListener listner;
SharedPreferences prefs; 
```

// 里面`onCreate`

```
prefs=getSharedPreferences(GCMIntentService.MY_PREFS, MODE_PRIVATE);
listner=new OnSharedPreferenceChangeListener() {

    @Override
    public void onSharedPreferenceChanged(SharedPreferences sp, String key) {
        //Here is my code    
}

prefs.registerOnSharedPreferenceChangeListener(listner); 
```

如果我的活动未运行或我的应用程序已关闭，我对是否会调用侦听器感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:28:47.100

经过长时间的研究和测试，我终于意识到监听器范围是直到应用程序运行或活动处于运行状态。

关闭应用程序后，您的 onPreferenceChangeListener 将不会监听任何事件。

可能对其他人有帮助。

总之谢谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:54:39.593

如果您想接收有关设置更改的通知，无论 Activity 状态如何，那么我建议您扩展`Application`对象并将您的侦听器代码移到那里，就像您应该在其中注册您的侦听器`onResume()`并取消注册的活动一样`onPause()`。因此，如果用户不在（这是她/他启动首选项活动的情况），您将不会收到通知。

# c++ - C ++文件流打开模式歧义

> ID：12365218
> 
> 赞同：16
> 
> 时间：2012-09-11T07:57:14.403
> 
> 标签：c++, file-io, stream

为了在 C++ 中执行文件 IO，我们使用了 ofstream、ifstream 和 fstream 类。

*   ofstream：写入文件的流类

*   ifstream：从文件中读取的流类

*   fstream：流类以读取和写入文件

将文件与流对象关联的过程称为“打开文件”。打开文件时，我们可以指定打开文件的模式。我的查询与`ios::out`和`ios:in`模式有关。

当我创建一个`ofstream`对象并使用模式打开文件时`ios::in`，我可以写入文件，但前提是它已经创建（`ios::out`如果它不存在，也会创建模式文件）。
但是当我创建`ifstream`对象并使用模式打开文件时`ios::out`，我可以从文件中读取。

我的问题是，当流（ / ）的类型本身指定正在执行哪种类型的操作（输入/输出）时，为什么这些模式（`ios::in`/ `ios::out`）由语言提供？`ifstream``ofstream`

另外，为什么这种模棱两可的用法（`ofstream`with`ios::in`和`ifstream`with `ios::out`）在一种情况下有效而在另一种情况下失败（尽管仅当文件不存在时）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T08:47:46.020

`ofstream`和类是底层的高级接口，`ifstream`可以通过流的成员函数获得。`fstream``filebuf``rdbuf()`

根据标准，当您打开`ofstream`with 某种模式`mode`时，它会像 with 一样打开下划线流缓冲区`mode | ios_base::out`。类似地`ifstream`使用`mode | ios_base::in`. `fstream`将`mode`参数逐字传递给下划线流缓冲区。

上面的意思是，以下代码使用完全相同的打开标志打开文件：

```
fstream f("a.txt", ios_base::in | ios_base::out);
ifstream g("a.txt", ios_base::out);
ofstream h("a.txt", ios_base::in); 
```

`f.rdbuf()`在这些行之后，您可以使用,`g.rdbuf()`和执行完全相同的操作`h.rdbuf()`，所有这三个操作就像您使用 C 调用打开文件一样`fopen("a.txt", "r+")`，这为您提供读/写访问权限，不会截断文件，如果文件执行则失败不存在。

那么，为什么我们有三个不同的类呢？正如我已经说过的，这些是在较低级别的流缓冲区上提供高级接口的高级类。这个想法是`ifstream`具有用于输入的成员函数（如`read()`），`ofstream`具有用于输出的成员函数（如`write()`），而`fstream`两者都有。例如，您不能这样做：

```
g.write("abc", 3); // error: g does not have a write function 
```

但这行得通，因为虽然`g`是一个`ifstream`，但我们已经打开它`ios_base::out`：

```
g.rdbuf()->sputn("abc", 3); // we still have write access 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:12:06.160

因为模式不限于输入/输出。例如的构造函数`ifstream`如下所示：

```
explicit ifstream ( const char * filename, ios_base::openmode mode = ios_base::in ); 
```

请注意，默认值为`ios_base::in`，因此您不必自己指定。但是，`mode`设置的流标志**不仅**限于`in`/ `out`，还包括：

*   `app`(append) 在每次输出操作之前将流的位置指示符设置到流的末尾。
*   `ate`（结束时）将流的位置指示器设置为打开时流的末尾。
*   `binary` （二进制）将流视为二进制而不是文本。
*   `in` (input) 允许对流进行输入操作。
*   `out`（输出）允许对流进行输出操作。
*   `trunc` （截断）任何当前内容都被丢弃，假设打开时长度为零。

# c# - 为 Windows 服务中的运行日志创建的“/Log/”文件夹在哪里

> ID：12365219
> 
> 赞同：0
> 
> 时间：2012-09-11T07:57:20.837
> 
> 标签：c#, windows-services

我创建了一个 Windows 服务并将运行日志写入“/Log/”文件夹，我在哪里可以找到这个文件夹。

它不在我安装该服务的程序文件中。

我根据文件夹中的 Kyle 分析器创建了文件[夹以转储 Windows 服务日志文件](https://stackoverflow.com/questions/2365666/folder-to-dump-windows-service-log-files)。

创建文件夹的代码：

```
 _logFolderPath = "/Logs/";
        string fileNameAndPath = Path.Combine(_logFolderPath, fileName);
        var fileInfo = new FileInfo(fileNameAndPath + ".txt");
        //Check if txt file exits
        if (!fileInfo.Exists)
        {
            //check if its directory exits, if not create
            if (!fileInfo.Directory.Exists) fileInfo.Directory.Create();
            //create file
            FileStream fs = fileInfo.Create();
            fs.Close();
        } 
```

# django - Django ModelForm，一次创建多个

> ID：12365220
> 
> 赞同：0
> 
> 时间：2012-09-11T07:57:23.227
> 
> 标签：django, select, modelform

这听起来可能有点奇怪。

我有一个对象列表，称为项目。对于其中的每一个，我都希望能够创建另一个名为 Main 的对象。Main 有一个指向 Item 的外键。

创建 Main 的 ModelForm 让我可以选择一个 Item 作为外键字段。

我想要的是能够在模型表单的外键字段中选择多个值，然后在处理表单数据时，为每个选择创建一个主对象。

我试过简单地将字段覆盖到 ModelMultipleChoiceField，但在提交数据时我似乎找不到处理它的方法。我找不到检索所有选定值的方法，所以我可以开始循环，即：我想在循环之前将选定的值提取到一个列表中。就像是：

```
form = Form(request.POST)
list = form.fields['foreignkey'].values()

for l in list:
    form.fields['foreignkey'] = l
    if form.is_valid():
        form.save()
        ...
    ... 
```

除了， values() 方法不存在，所以......

希望这是有道理的......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:15:59.960

1.  **添加一个新的 ModelMultipleChoiceField**，例如`multiple_items`，而不是覆盖 FK 的默认字段，

2.  **覆盖`form.save()`**，为每个创建一个 Main`self.cleaned_data['multiple_items']`

# blackberry - 黑莓Java的Rss解析

> ID：12365232
> 
> 赞同：1
> 
> 时间：2012-09-11T07:57:55.650
> 
> 标签：blackberry, java-me, rss

我已经为 Blackberry java 开发了 RssParser，并且我成功地从 Rss xml 文件中解析了标题，但我的要求是也解析来自 Rss 的 imageurls。

但是我的代码对单个标签运行良好，我的实际要求在`drawlist`方法中。如何从 Rss 中检索图像 url 和标题标签值？

这是我的代码：

```
public void run() {  
            Document doc;  
            StreamConnection conn = null; 
            InputStream is = null;  
            try {           

                conn = (StreamConnection) Connector.open("Rss.xml"+";deviceside=true");             

                DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();  
                docBuilderFactory.setIgnoringElementContentWhitespace(true);
                docBuilderFactory.setCoalescing(true);
                DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();    
                docBuilder.isValidating();      
                is = conn.openInputStream();    
                doc = docBuilder.parse(is);     
                doc.getDocumentElement().normalize();   

                   NodeList list = doc.getElementsByTagName("image"); 

                NodeList list = doc.getElementsByTagName("title"); 
                    for (int a = 0; a < list.getLength(); a++) {    
                    Node textNode1 = list.item(a).getFirstChild();  
                    listElements.addElement(textNode.getNodeValue());
                        }

public void drawListRow(ListField list, Graphics g, int index, int y, int w) 
    {  
         String title = (String)listElements.elementAt(index);

        g.drawText(title, 5, 15+y, 0, w);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:34:46.063

您的代码片段将无法编译，因为您有两个“NodeList 列表”变量，但假设您确实在不同的列表中获得了图像 url。对于您需要获取图像数据的每个 url，启动一个 Image 对象并将其存储以供以后绘制：

```
public void run() {
    NodeList list = doc.getElementsByTagName("image");

    for (int a = 0; a < list.getLength(); a++) {
        Node textNode1 = list.item(a).getFirstChild();

        imageElements.addElement(getImage(textNode.getNodeValue()));
    }
}

// variation of the same method found at
// http://stackoverflow.com/questions/4883600/how-do-i-get-to-load-image-in-j2me
private Image getImage(String url) throws IOException {
    HttpConnection connection = null;
    DataInputStream inp = null;
    int length;
    byte[] data;
    try {
        connection = (HttpConnection) Connector.open(url);
        connection.getResponseMessage();
        length = (int) connection.getLength();
        data = new byte[length];
        inp = new DataInputStream(connection.openInputStream());
        inp.readFully(data);

        return Image.createImage(data, 0, data.length);
    } finally {
        if (connection != null)
            connection.close();
        if (inp != null)
            inp.close();

    }
}

public void drawListRow(Graphics g, int index, int y, int w) {  
    String title = (String) listElements.elementAt(index);
    Image image = (Image) imageElements.elementAt(index);

    g.drawText(title, 5, 15+y, 0, w);
    // As I do not have experience with Blackberry I assume below method exists
    g.drawImage(image, 5, y, 0, w);
} 
```

# jquery - mobile.changePage 内部链接

> ID：12365236
> 
> 赞同：2
> 
> 时间：2012-09-11T07:57:59.403
> 
> 标签：jquery, jquery-mobile

我正在尝试这样的单页模板：-

```
 <div id="homePg" data-role="page">
 </div>  <!-- Home page -->

 <div  id="groupsPg" data-role="page">    
 </div>  <!-- Groups page --> 
```

页面内容中的数据是从`ajax`调用动态加载的。

我正在尝试从我的主页导航到单击生成的任何列表的组页面。

```
 $.mobile.changePage('#groupsPg', {
                transition : "none"
            }); 
```

但由于某些原因，此`changepage`事件未触发。我可以`onclick`触发事件，但更改页面事件没有通过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:47:24.357

你可以试试这个解决方案，让我知道这是否有效：

```
$('#homePg').live('pagecreate',function(event){
    $("#your_anchor_id").bind("click", function(event) {
        $.mobile.changePage( "#groupsPg", { transition: "none"} );
    });  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:56:13.343

我认为将此代码添加到您的点击事件中就可以了：

```
window.location.href = ('url'); 
```

也试试这个网站： [http ://www.ezineasp.net/post/Javascript-Window-Location-Href-URL.aspx](http://www.ezineasp.net/post/Javascript-Window-Location-Href-URL.aspx)

而这个：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

# facebook - Facebook Android-sdk 密钥哈希

> ID：12365239
> 
> 赞同：0
> 
> 时间：2012-09-11T07:58:04.810
> 
> 标签：facebook, facebook-android-sdk

我正在使用 Facebook Integration for SSO 开发一个 Android 应用程序，我已经测试了该应用程序，它在模拟器上运行良好，现在当我在真实设备（三星 Galaxy S3）上测试它时，我得到“Facebook 错误”无效密钥 RuUnRoM+ySb9AWKHAb5slfvneeh .

我在这里阅读了关于类似问题的其他答案，说在 facebook 上将该密钥添加到应用程序设置中，它应该可以工作，但它对我不起作用，有什么建议吗？

此外，我不确定这个密钥是从哪里来的，我使用应用程序的密钥库和 keytool 生成的那个是 lW2TM46BWUoKczD3t/ohbjx8v0A=。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:18:23.370

好的，通过使用解决了

C:\Users\Me>keytool -exportcert -alias my_key -keystore my.keystore -storepass PASSWORD > mycert.bin

C:\Users\Me>openssl sha1 -binary mycert.bin > sha1.bin

C:\Users\Me>openssl base64 -in sha1.bin -out base64.txt

来源：[原始答案](https://stackoverflow.com/a/7564008/595603)

# mysql - ORDER BY date 与即将到来的日期之后的过去日期

> ID：12365246
> 
> 赞同：11
> 
> 时间：2012-09-11T07:58:37.227
> 
> 标签：mysql, sql, date, sql-order-by

我需要对 MySql 数据库中的表执行查询，其中结果行的顺序如下所示：

如果今天是 10/09/12：

```
...
11/09/12 
12/09/12
15/09/12
08/09/12  <--here start the past dates
07/09/12
05/09/12
.... 
```

有没有办法直接在 MySQL 中实现这一点？

* * *

**我以这种方式解决了：**

首先，select 语句包含一个新的布尔值，通过以下方式标记日期是过去还是未来：

```
SELECT DISTINCT *,CASE  WHEN startdate < CURDATE() THEN 0
                ELSE 1 END AS past_or_future 
```

其次，我做了一个双重“订购者”：首先在过去的或未来布尔值上，然后在日期上，条件如下：

```
ORDER BY past_or_future  DESC , CASE WHEN past_or_future  = 1 THEN startdate END ASC, CASE WHEN past = 0 THEN startdate END DESC 
```

通过这种方式，我首先获得了按日期排序的所有即将到来的日期（从较低的值到较高的值），然后是从该日期排序的所有过去的日期（从较高的到较低的）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-11T08:01:00.297

`CASE`即使在`ORDER BY`子句中你仍然可以做声明，

```
SELECT *
FROM tableName
ORDER BY (CASE WHEN DATE(dateColumn) < DATE(GETDATE())
              THEN 1
              ELSE 0
         END) DESC, dateColumn ASC 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T08:04:42.983

是的，一种方法是将两个查询与“更强大”的排序键联合在一起（我使用的是位置而不是下面的列名）：

```
select 1 as uberkey, date1, column2
  from mytable
  where data1 >= '2012-10-09'
union all
select 2 as uberkey, date1, column2
  from mytable
  where data1 < '2012-10-09'
order by 1 asc, 2 asc 
```

这将做的是使用`uberkey`作为主要排序字段，以便以后的日期排在第一位。当您显示数据时，您可以简单地忽略此列。

这通常可以更有效地执行每行函数，例如`case`因为`case`必须对每一行进行翻译。带有`where`子句的两个查询可以简单地使用索引来丢弃另一“半”行，并为检索到的行使用常量。

而且（虽然我对 MySQL 没有特别的了解，但我自己就是一个 DB2 人）智能 DBMS' 实际上可以并行化查询的两个子组件以提高效率。

`union all`与所有联合一样，如果两个子组件互斥，请确保使用，这样就不需要不必要的排序和删除重复操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T10:31:35.067

通常你不能在不使用 UNION 的情况下对一列进行双向排序。UNION 有一些缺点，尤其是在您使用 ORM 时。如果您想通过即将到来的 ASC 订购过去的 DESC，您可以使用以下技巧：

选择你的日期列，如果（你的日期列）

您也可以将它与 ORM 一起使用，并且仍然使用分页器等。

# php - 如何使用多维数组中的值对多维数组进行排序？

> ID：12365258
> 
> 赞同：0
> 
> 时间：2012-09-11T07:59:05.703
> 
> 标签：php, arrays, algorithm, perl

我正在开发一个测试，它会给出 2 个值的结果

```
$result = array( 't' => 10, 's' => 20 ); 
```

并且我有范围将作为徽章名称从数组到该结果给出响应：

```
$badges = array(
    'badge1' => array(
        array('tLow' => 0, 'tHigh' => 20),
        array('sLow' => 0, 'sHigh' => 10)
    ),
    'badge2' => array(
        array('tLow' => 0, 'tHigh' => 10),
        array('sLow' => 11, 'sHigh' => 20)
    ),
    'badge3' => array(
        array('tLow' => 21, 'tHigh' => 30),
        array('sLow' => 0, 'sHigh' => 10)
    ),
    'badge4' => array(
        array('tLow' => 31, 'tHigh' => 40),
        array('sLow' => 0, 'sHigh' => 10)
    ),
    'badge5' => array(
        array('tLow' => 11, 'tHigh' => 30),
        array('sLow' => 11, 'sHigh' => 30)
    ),
    'badge6' => array(
        array('tLow' => 0, 'tHigh' => 10),
        array('sLow' => 21, 'sHigh' => 30)
    ),
    'badge7' => array(
        array('tLow' => 0, 'tHigh' => 10),
        array('sLow' => 31, 'sHigh' => 40)
    ),
); 
```

徽章数组对应于一个看起来像这样的网格

```
+---+
| 7 |
+---+---+---+
| 6 |       |
+---+   5   +
| 2 |       |
+---+---+---+---+
|   1   | 3 | 4 |
+---+---+---+---+ 
```

所以我的问题是为我的结果获得徽章的最有效方法是什么？也许有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:23:08.913

在我的脑海中，你可以做这样的事情。

```
foreach ($badges as $key => $badge)
{
   if ($result['t'] >= $badge[0]['tLow'] && $result['t'] <= $badge[0]['tHigh'])
   {
      // t matches
      if ($result['s'] >= $badge[0]['sLow'] && $result['s'] <= $badge[0]['sHigh'])
      { 
         // s matches
         echo 'Badge was found: '.$key;
         break;
      }
   }
} 
```

此代码未经测试。但应该工作

# javascript - IndexedDB 对象键：大小重要吗？

> ID：12365262
> 
> 赞同：4
> 
> 时间：2012-09-11T07:59:34.907
> 
> 标签：javascript, indexeddb

我即将在 indexeddb 对象存储中存储大量对象。所有对象都具有相同的结构，例如`{somekey: xxx, somevalue: yyy}`.

对象键的长度是否会影响存储数据的大小？例如，如果我将结构更改为`{s: xxxx, v: yyyy}`，我是否应该期望使用当前浏览器在对象存储中获得更好的足迹？

我在标准的任何地方都找不到有关此的任何信息，所以我想这取决于浏览器的实现是否在内部使用字典，我想了解它目前是如何实现的，以及它是否值得优化减少存储对象键的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:11:40.473

是的，它会影响它。但至少对于大小合理的键，一个字符与 10 或 20 个字符不会对性能产生任何影响，除非您的规模非常大（数百万条记录）。大多数实现（包括我可以说的chrome）确实存储了包括键名在内的完整对象，但索引只存储“keypath”一次。

这意味着 {"foo": "bar"} 可能需要大约 12 个字节来存储（每个字符串大约 4 个字节加上一些类型信息开销，但是“foo”上的后续索引将只存储“baz”。

{"foobarbaz": "helloworld"} 可能需要大约 23 个字节来存储。真的，我希望在大多数情况下，您自己的数据应该超过密钥长度的开销，并且尝试缩短您的密钥以节省几个字节是过早的优化。

# enterprise-architect - 执行区分大小写的搜索

> ID：12365264
> 
> 赞同：1
> 
> 时间：2012-09-11T07:59:40.470
> 
> 标签：enterprise-architect

是否可以在 Enterprise-Architect 中执行区分大小写的搜索？

我找不到合适的过滤器来设置它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T00:30:40.977

从外观上看，Enterprise Architect 的内部搜索只是直接查询数据库。因此，除非您在 Oracle 上工作，否则它将不区分大小写。解决方法是创建您自己的区分大小写的自定义 SQL 搜索。

去做这个：

1.  打开搜索窗口 (Ctrl+F)
2.  单击新的搜索按钮
3.  选择 SQL Editor，输入名称并单击 OK

下一点是依赖于数据库的，但这里是一个 sql server 和一个 mysql 示例，用于精确和模糊搜索 - 我们使用 Collat​​e 命令：

SQL Server - 精确

```
select *
from t_object
where
t_object.Name COLLATE Latin1_General_CS_AS = 'BEEF' 
```

MySQL - 模糊

```
select *
from t_object
where
t_object.Name COLLATE utf8_bin like 'Corrected%' 
```

您只需要找到适用于您的数据库类型的 COLLATE 命令。

我希望这有帮助！

汤姆

# javascript - 如何根据数组值创建新实例

> ID：12365265
> 
> 赞同：0
> 
> 时间：2012-09-11T07:59:43.797
> 
> 标签：javascript, arrays, object

对于每个级别，都有一个坐标数组，我想根据这些坐标创建新实例。我想知道如何去做。这是我到目前为止所拥有的。

```
 function levelDots(level){
        var renderLevel = {
                    1: [(100, 100), (200, 200)], //not sure if this is correct,  e.g (100, 100) would correspond to (x,y)
                    2: [(50,50), (75,75)]
                }

        renderLevel[level].each(function(){ //not sure what to put inbetween function()
            dots.push(new dot(x,y))
        });

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:08:36.697

`(x, y)`在 javascript 中返回`y`，使用数组`[100, 100]`或对象`{x: 100, y: 100}`来表示值。

***例子：***

```
function levelDots(level) {
    var renderLevel = {
        level1: [
            [100, 100],
            [200, 200]
        ],
        level2: [
            [50, 50],
            [75, 75]
        ]
    };
    return renderLevel[level].map(function (el) {
        return new dot(el[0], el[1]);
    });
} 
```

# extjs4 - Extjs4 Xtemplate如何添加悬停

> ID：12365266
> 
> 赞同：1
> 
> 时间：2012-09-11T07:59:59.243
> 
> 标签：extjs4

我使用 Extjs4 Xtemplate 和数据视图，我创建了一个表来显示数据，

我的示例代码是：

```
 '<table  id = "sample"  width = "250" cellspacing = "0" cellpadding = "0">',
      '<tpl for ="data">',
      '<tr>',
         '<td>{names}</td><td>{company}</td>',
         '</tr>',
         '</tpl>',
        '</table>', 
```

数据显示在表格中，但我不知道如何在鼠标悬停时更改行颜色

我试过css

```
 tr:hover{

        } 
```

我试过 overCls：'some-class-name'

这也有用，谁能给我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:06:08.803

使用视图：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.View](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.View)

不要忘记指定 itemSelector。

# fluent-nhibernate - 如何映射复杂的字典 >

> ID：12365274
> 
> 赞同：1
> 
> 时间：2012-09-11T08:00:47.163
> 
> 标签：fluent-nhibernate, nhibernate-mapping

我需要使用 Fluent NHibernate 映射以下属性（Foo 中的 Vms）：

```
public class Foo
{
    [DataMember]
    public IDictionary<VpgId, HashSet<VmId>> Vms 
    { get;  private set; }
}

public class VpgId
{
    [DataMember]
    public virtual Guid GroupGuid 
    { get; private set; }
}

public class VmId
{
    [DataMember]
    public virtual string VmName
    { get; private set; }

} 
```

我尝试将 HashSet 更改为 ISet 并添加以下 FNH 配置

```
.Override<Foo>(obj => obj.HasMany(x => x.Vms ).Cascade.AllDeleteOrphan()) 
```

但我得到以下异常：

> 抛出异常。NHibernate.MappingException：NHibernate.MappingException：关联引用未映射的类：System.Collections.Generic.ISet`1[[Common.VmId，Common，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null]]。

问：如何映射集合中包含的集合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:59:21.753

您无法映射嵌套集合。您需要创建一个包含内部集合（需要是 ISet）的类。然后您可以将其映射为复合元素。

# php - 为什么我在使用我的 onlick 事件时会再次显示重复的值？

> ID：12365275
> 
> 赞同：0
> 
> 时间：2012-09-11T08:00:49.040
> 
> 标签：php, jquery

这是我的js脚本

```
<script>
    function displayWarriors() {
        $.ajax({
            url: "display_warriors.php",
            success: function(data) {
                $("#tableWarrior").append(data);
            }
        });
        return false;
    }
    function createWarrior() {
        $.post( "create_warrior.php", { 
        "wname": $("#txtWname").val(),
        "wtype": $("#txtWtype").val()           
        }, 
        function(msg){
            displayWarriors();
        });
        return false;
    }
</script> 
```

我在从我的事件中触发函数时使用这行 html 代码

```
<input onclick="return createWarrior()" 
```

例如，我的桌子上显示了 No.1 Name1，然后我添加了另一个 Name 2

我的输出去了

```
No.1 Name1
No.1 Name1
No.2 Name2 
```

我怎样才能解决这个问题

我的 display_warriors.php

```
foreach($stmt as $warrior){
        echo '<tr><td>'.$warrior['warrior_id'].'</td><td><a href="selected.php?id='.$warrior['warrior_id'].'">'.$warrior['warrior_name'].'</a></td><td>'.$warrior['warrior_type'].'</td></tr>';
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:04:50.693

重复即将到来，因为您总是返回所有数据，其中一些数据已经存在于“tableWarrior”元素中，您应该更改语句

```
success: function(data) {
       $("#tableWarrior").append(data);
} 
```

至

```
success: function(data) {
       $("#tableWarrior").empty();
       $("#tableWarrior").append(data);
} 
```

你应该改变

```
<script>
    function displayWarriors(wname, wtype) {
        $.ajax({
            url: "display_warriors.php",
            data: { name: wname, type: wtype},
            success: function(data) {
                $("#tableWarrior").append(data);
            }
        });
        return false;
    }
    function createWarrior() {
        var name =  $("#txtWname").val(),
        var type =  $("#txtWtype").val()   

        $.post( "create_warrior.php", { 
        "wname": name,
        "wtype": type           
        }, 
        function(msg){
            displayWarriors(name, type);
        });
        return false;
    }
</script> 
```

和你的 display_warrior.php，应该返回一个战士 tr。喜欢

```
$name = $_REQUEST["name"];
$type = $_REQUEST["type"]
$warrior = GetYourWarriorWithItsNameAndType($name, $type);//Call a funciton here to get the warrior from its name and type.

echo '<tr><td>'.$warrior['warrior_id'].'</td><td><a href="selected.php?id='.$warrior['warrior_id'].'">'.$warrior['warrior_name'].'</a></td><td>'.$warrior['warrior_type'].'</td></tr>'; 
```

# java - Java swing - 多个选项卡的一个搜索框

> ID：12365278
> 
> 赞同：1
> 
> 时间：2012-09-11T08:01:04.033
> 
> 标签：java, swing, jtable, jtextfield, jtabbedpane

我想要一个包含多个选项卡的 GUI 应用程序，每个选项卡都有自己的表。我想在选项卡下方包含一个搜索框，用于过滤**当前选定的选项卡**。如何实现这种动态行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:15:23.133

1.  图一您可以在当前 JVM 实例`RowSorter/RowFilter`中共享`JTables`

    *   过滤适用于所有人`JTables`

    *   请注意，如果 JTable(s) 包含一堆行，则可能会出现性能问题

    *   很可能`JTables`包含几行（数量有限）

2.  确定（从选项卡数组）可见选项卡，[可见 JComponents（或必须查看 SwingUtilities）](https://stackoverflow.com/questions/10880326/jpanel-which-one-of-listeners-is-proper-for-visibility-is-changed)，然后 `RowSorter/RowFilter`从所有`JTables`实例中删除，然后将`RowSorter/RowFilter`焦点添加到可见`JTable`

3.  `JTextField`for`RowSorter/RowFilter`应该只装箱一次

# python - 如何获取对类模块的引用

> ID：12365282
> 
> 赞同：2
> 
> 时间：2012-09-11T08:01:18.980
> 
> 标签：python

您可以获取类所属模块的名称，如下所示：

```
myClass.__module__ 
```

我如何获得对模块的引用？更具体地说，我想访问任意类所属的模块的文档字符串。类似于：

```
mod = myClass.getModule() # How do I do this?
print mod.__doc__ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T08:02:42.903

在以下位置查找模块`sys.modules`：

```
import sys

mod = sys.modules[cls.__module__] 
```

演示：

```
>>> from datetime import datetime
>>> import sys
>>> print sys.modules[datetime.__module__].__doc__
Fast implementation of the datetime type. 
```

# spring - 在tomcat上实现春季交易的最佳方式

> ID：12365284
> 
> 赞同：-1
> 
> 时间：2012-09-11T08:01:23.137
> 
> 标签：spring, tomcat, jboss, transactions

我们有一个新项目要开始了。作为一个框架，Spring 3.1 和 Spring Data JPA 已经确定。争论是关于应用程序服务器的最佳选择。Tomcat 与 JBoss。我在 Tomcat 团队。我的挑战是找出使用 Spring+Tomcat 管理事务的最佳方法。他至少应该提供一个 JBoss 的能力。我目前在这方面的经验相当有限。如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:06:33.350

只需标记一个事务管理器（我使用休眠）：

```
<!-- Enable annotation style of managing transactions -->
<tx:annotation-driven transaction-manager="transactionManager"/>

<!-- Declare a transaction manager-->
<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager"
          p:sessionFactory-ref="sessionFactory"/> 
```

然后将方法或类注释为事务性的。[教程](http://static.springsource.org/spring/docs/1.2.7/reference/transaction.html)。

我选择了tomcat而不是jboss btw。Tomcat 大约是 15mb，spring jars 又是 5mb。将此与 jboss 的半演出庞然大物进行比较，使用它感觉不对。

# hibernate - Hibernate：使用一对多限制查询

> ID：12365285
> 
> 赞同：4
> 
> 时间：2012-09-11T08:01:27.753
> 
> 标签：hibernate

例如，我有`Service`实体：

```
@OneToMany(fetch = FetchType.EAGER, mappedBy = "service")
public List<ServiceStatus> getServiceStatuses() {
    return serviceStatuses;
} 
```

和`ServiceStatus`实体：

```
@ManyToOne
@JoinColumn(name = "service", nullable = false)
public Service getService() {
    return service;
}

@Column(name = "date", nullable = false)
@Temporal(TemporalType.DATE)
public Date getDate() {
    return date;
} 
```

现在我需要查询所有`Service`对象，以便每个对象都只有介于和之间的那些`ServiceStatus`对象。也就是说，如果有 10 个对象具有正确的日期，则列表将只有这 10 个对象，仅此而已。是否可以？`ServiceStatus.date``date1``date2``ServiceStatus``serviceStatuses`

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T08:07:33.027

您可以使用[`@Where`](https://stackoverflow.com/questions/7700071/how-to-use-where-in-jpa-hibernate)子句：

```
@OneToMany(fetch = FetchType.EAGER, mappedBy = "service")
@Where(clause = "is_deleted = 'N'")
List<ServiceStatus> serviceStatuses = new ArrayList<ServiceStatus>(); 
```

上述实现允许您过滤`is_deleted = N`. 同样，您可以编写自己的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:23:25.487

我使用@Filter 解决了这个问题：

```
@FilterDef(name = "dateFilter", parameters = {
        @ParamDef(name = "date1", type = "date"),
        @ParamDef(name = "date2", type = "date") })
@Filter(name = "dateFilter", condition = "date >= :date1 and date <= :date2") 
```

并将其应用于会话：

```
session.enableFilter("dateFilter")
                .setParameter("date1", date1)
                .setParameter("date2", date2); 
```

顺便说一句，在使用 Hibernate 时，我应该使用什么进行查询：在这种情况下，它是自己的机制还是像“内部联接”这样的“原始”SQL？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:10:29.213

您可以在查询时使用 Restrictions.le("date2",date2) 和 Restrictions.gt("date1",date1)。看到这个链接。

[http://www.mkyong.com/hibernate/hibernate-criteria-examples/](http://www.mkyong.com/hibernate/hibernate-criteria-examples/)

以下也是非常有用的

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T08:11:07.527

您可以使用 HQL 为这种情况创建查询。

[http://www.mkyong.com/hibernate/hibernate-query-examples-hql/](http://www.mkyong.com/hibernate/hibernate-query-examples-hql/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T10:52:41.040

```
Criteria criteria = session.createCriteria(Service.class);
if(date1!=null){
    criteria.add(Expression.ge("serviceStatuses.date1",date1));
}
if(date2!=null){
    criteria.add(Expression.le("serviceStatuses.date2",date2));
}
return criteria.list(); 
```

知道了？

# android - 以编程方式设置列表视图标题大小

> ID：12365297
> 
> 赞同：4
> 
> 时间：2012-09-11T08:02:43.363
> 
> 标签：android, layout, dimensions

我有一个带有标题的 ListView，我需要根据屏幕大小以编程方式设置标题大小。所以它几乎填满了整个屏幕。我怎样才能做到这一点？我找到了一种获取屏幕高度的方法，但它是显示器的全高，包含手机状态栏的高度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T08:24:59.847

如果您通过膨胀布局将标题设置为 ListView，如下所示：

```
ListView lv = getListView();
LayoutInflater inflater = getLayoutInflater();
ViewGroup header = (ViewGroup)inflater.inflate(R.layout.header, lv, false);
lv.addHeaderView(header, null, false); 
```

`R.layout.header`您可以使用更改布局的高度

```
header.setLayoutParams(params); 
```

您可以在此处使用此代码获取通知或状态栏高度：

[状态栏的高度？](https://stackoverflow.com/questions/3355367/height-of-statusbar/3356263#3356263#answers-header)

# php - 带有消息“SQLSTATE [42000]”的未捕获异常“PDOException”：语法错误或访问冲突：

> ID：12365298
> 
> 赞同：2
> 
> 时间：2012-09-11T08:02:48.190
> 
> 标签：php, sql, pdo

> 致命错误：未捕获异常 'PDOException' 并带有消息 'SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 C:\xampp\htdocs\PhpProject1\userv2.php:120 中的第 1 行的 '") VALUES ()' 附近使用正确的语法 堆栈跟踪：#0 C： \xampp\htdocs\PhpProject1\userv2.php(120): PDOStatement->execute() #1 C:\xampp\htdocs\PhpProject1\create.php(41): User->Save() #2 {main} 抛出在第 120 行的 C:\xampp\htdocs\PhpProject1\userv2.php

我们在列名中使用了反勾号，正如这里的一些帖子中所建议的那样，但它并不能完全解决错误。我阅读了类似的帖子，但找不到解决方案，因此我正在填写错误和代码以寻求帮助。提前致谢。

```
 <?php

/*
 * mmber variable decleration...
 */
class User {
    private $ID;
    private $objPDO;
    private $strTableName;
    private $arRelationMap;
    private $blForDeletion;

    private $FirstName;
    private $LastName;
    private $Username;
    private $Password;
    private $EmailAddress;

    private $DateLastLogin;
    private $TimeLastLogin;
    private $DateAccountCreated;
    private $TimeAccountCreated;

    //constructor is use for initialisation for the object
    public function __construct(PDO $objPDO, $id = NULL) {
        $this->strTableName = `system_user`;
        $this->arRelationMap = array(
            `id` => "ID",
            `first_name` => "FirstName",
            `last_name` => "LastName",
            `username` => "Username",
            `md5_pw` => "Password",
            `email_address` => "EmailAddress",
            `date_last_login` => "DateLastLogin",
            `time_last_login` => "TimeLastLogin",
            `date_account_created` => "DateAccountCreated",
            `time_account_created` => "TimeAccountCreated");

            $this->objPDO =$objPDO;
                if (isset($id)) {
                    $this->ID = $id;
                    $strQuery = "SELECT ";
                    foreach ($this->arRelationMap as $key => $value) {
                        $strQuery .= "\"" . $key . "\",";
                    }
                   $strQuery = substr($strQuery, 0, strlen($strQuery)-1);
                   $strQuery .=  "FROM"  . $this->strTableName . " WHERE \"id\" = :eid";
                   $objStatement = $this->objPDO->prepare($strQuery);
                   $objStatement->bindparam(' :eid', $this->ID, PDO::PARAM_INT);
                   $objStatement->execute();
                   $arRow = $objStatement->fetch(PDO::FETCH_ASSOC);
                   foreach($arRow as $key => $value) {
                       $strMember = $this->arRelationMap[$key];
                       if(property_exists($this, $strMember)) {
                           if (is_numeric($value)) {
                               eval('$this->' . $strMember . ' = ' . $value . ';');
                           }
                           else
                           {
                               eval('$this->' . $strMember . ' = "' . $value . '";');
                           };
                       };

                };
    };

}

       public function Save() {
        if (!isset($this->ID)) {
             $strValueList = "";
     $strQuery = 'INSERT INTO "' . $this->strTableName . '"(';
     foreach ($this->arRelationMap as $key => $value) {
            eval('$actualVal = &$this->' . $value .';');
                    if(isset($actualVal)){
                    var_dump($actualVal);
                    $strQuery .= '"' . $key . '", ';
                    $strValueList .= ":$value, ";

        } ; 
            }        

        $strQuery = substr($strQuery, 0, strlen($strQuery) - 2);
     $strValueList = substr($strValueList, 0, strlen($strValueList) - 2);
     $strQuery .= ") VALUES (";
     $strQuery .= $strValueList;
     $strQuery .= ")";
     unset($objStatement);
     $objStatement = $this->objPDO->prepare($strQuery);
     foreach ($this->arRelationMap as $key => $value){
         eval('$actualVal = &$this->' . $value . ';');
         if (isset($actualVal)){
             if ((is_int($actualVal)) || ($actualVal == NULL)) {
                       $objStatement->bindValue(':' . $value, $actualVal, PDO::PARAM_INT);
                    }
                    else
                    {
                     $objStatement->bindValue(':' . $value, $actualVal, PDO::PARAM_STR);  
                    };
                };
         }
         $objStatement->execute();
         $this->ID = $this->objPDO->lastInsertId($this->strTableName . "_id_seq");

         }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:09:53.747

MySQL INSERT 的正确语法是：

```
INSERT INTO tbl_name (col1,col2,col3) VALUES(15,col1*2,'string'); 
```

并不是 ：

```
INSERT INTO "tbl_name" ("col1","col2","col3") VALUES(15,col1*2,'string'); 
```

# asp.net - AJAX 日历扩展器控件不起作用

> ID：12365300
> 
> 赞同：1
> 
> 时间：2012-09-11T08:02:58.897
> 
> 标签：asp.net, ajax, asp.net-ajax, c#-2.0

我正在尝试使用 Visual Studio 2005 和 C# 2005 构建 Web 应用程序。我需要接受特定文本框中的日期。为此，我尝试使用 AJAX 日历扩展器。我已将 AJAX 脚本管理器和 CalendarExtender 控件添加到网页，并将 CalendarExtender 的 TargetControlId 设置为正确的文本框 ID。但是当我显示网页（使用调试-> 不调试启动）并在文本框内单击时，没有任何反应。我什至尝试将图像控件添加到表单并将 CalendarExtender 的 PopupButtonId 设置为图像，但即使这样我也无法显示日历控件。我究竟做错了什么？？

我只在 webform 上删除了所需的控件，所有代码都是自动生成的。生成的代码如下：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<%@ Register Assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" Namespace="System.Web.UI" TagPrefix="asp" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>
<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="asp" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<title>Untitled Page</title>
</head>
<body>
     <form id="form1" runat="server">
     <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
     <cc1:CalendarExtender ID="CalendarExtender1" runat="server" TargetControlID="TextBox1"></cc1:CalendarExtender>
     <asp:ScriptManager id="ScriptManager1" runat="server"></asp:ScriptManager>
     </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:33:42.333

ScriptManager 应该在 ajax 扩展器之前定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T05:50:53.300

只需定义

`<ajaxToolkit:ToolkitScriptManager runat="Server" EnableScriptGlobalization="true" EnableScriptLocalization="true" ID="ScriptManager1" ScriptMode="Debug" CombineScripts="false" />`

此代码在 ajax 中的日历控件之前。

# c# - C#：DataContractSerializer 和不同的流

> ID：12365303
> 
> 赞同：4
> 
> 时间：2012-09-11T08:03:08.027
> 
> 标签：c#, stream, datacontractserializer

我想使用，但对其方法中的参数`DataContractSerializer`感到困惑-我看到我可以使用或。我想知道： `Stream``WriteObject``MemoryStream``XmlWriter`

*   流选择如何影响序列化？它会影响物体的大小吗？
*   使用时`MemoryStream`，我总是得到一个二进制对象吗？

这些问题可能是基本的，但我一直在谷歌搜索，找不到明确的答案。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:22:14.407

`DataContractSerializer`本质上是一个*基于 xml 的*序列化程序。如果传递 a `Stream`，它将构造一个`XmlWriter`（特别是 an `XmlDictionaryWriter`）包装流，然后核心序列化代码写入`XmlWriter`.

> 流选择如何影响序列化？它会影响物体的大小吗？

使用不同的`Stream`实例不会影响内部发生的事情，但与传入 an 相比，这里可能会*略有*`XmlWriter`不同，具体取决于*编码*是什么。如果传递 a `Stream`，则`DataContractSerializer`使用 UTF-8；但如果你通过它，`XmlWriter`你可以指定不同的编码。

> 使用时`MemoryStream`，我总是得到一个二进制对象吗？

`MemoryStream`是 a 的包装器`byte[]`，是的：一旦你`.ToArray()`之后调用，你就只有二进制文件。但是，它也是二进制的，*也*恰好是 xml。两者都可以。

如果您想要*实际上是*二进制的序列化（意思是：基本上是二进制序列化格式，而不是 xml / json / csv / 等），那么也许可以考虑像 protobuf-net 之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:25:15.600

正如 Marc 所说，如果您使用`WriteObject`需要 a的重载`Stream`，那么无论传入的实例类型如何，写入流的字节`DataContractSerializer`都将包含 XML 文档的 UTF-8 编码文本`Stream`。如果实例是a `MemoryStream`，您最终会得到一个内存中的字节数组（因为这就是 MemoryStream ），但这些字节包含 UTF-8 编码的 XML 文本 - 通常不会将其描述为二进制表示。

如果你使用`WriteObject`需要一个的重载`XmlWriter`，你最终得到的完全取决于你`XmlWriter`是什么类型，以及它是如何被初始化的。就`DataContractSerializer`相关而言，它将`XmlWriter`以适当的模式调用 的方法来描述表示对象状态的 XML 信息集。Infoset 的编码方式取决于`XmlWriter`.

如果您有特殊要求，并且特别受虐，您可以实现自己的自定义`XmlWriter`来执行任何类型的编码、压缩、加密，无论您喜欢什么。或者您可以传递一个`XmlTextWriter`，它将为您提供 Infoset 的文本编码（如 Stream 重载），但具有更多用于控制字符编码和文本格式的选项。更常见的是，您将传递 a `XmlDictionaryWriter`，然后根据您创建它的方式，您有各种编码选项。

这些选项包括 WCF 自己的 XML 信息集二进制编码：让您使用`XmlDictionaryWriter.CreateBinaryWriter`. 由于 WCF 团队投入大量精力来设计一种高效的二进制表示以满足 WCF 的性能目标，我想，如果您可以确定结果是序列化的对象只需要由 .NET 代码反序列化。如果您需要基于公共标准的二进制表示，则可以考虑`MTOM`使用`XmlDictionaryWriter`.

# javascript - jQuery - 将列表项的元素移动到同一项目的另一个元素内+为我的列表中的每个项目执行此操作

> ID：12365305
> 
> 赞同：1
> 
> 时间：2012-09-11T08:03:09.943
> 
> 标签：javascript, jquery, html, list, move

我有一个生成的 HTML 菜单，如下所示：

```
<ul class="principal-nav">
     <li><a href="#">Item 01</a> <span class="posts-amount">(12)</span></li>
     <li><a href="#">Item 02</a> <span class="posts-amount">(7)</span></li>
     <li><a href="#">Item 03</a> <span class="posts-amount">(25)</span></li>
</ul> 
```

我需要它看起来像这样：

```
<ul class="principal-nav">
     <li><a href="#">Item 01 <span class="posts-amount">(12)</span></a></li>
     <li><a href="#">Item 02 <span class="posts-amount">(7)</span></a></li>
     <li><a href="#">Item 03 <span class="posts-amount">(25)</span></a></li>
</ul> 
```

我试图操纵 DOM，但我是一个 jQuery 初学者，到目前为止，我成功地得到了这个结果：

```
<ul class="principal-nav">
     <li><a href="#">Item 01 <span class="posts-amount">(12)</span> <span class="posts-amount">(7)</span> <span class="posts-amount">(25)</span></a></li>
     <li><a href="#">Item 02 <span class="posts-amount">(12)</span> <span class="posts-amount">(7)</span> <span class="posts-amount">(25)</span></a></li>
     <li><a href="#">Item 03 <span class="posts-amount">(12)</span> <span class="posts-amount">(7)</span> <span class="posts-amount">(25)</span></a></li>
</ul> 
```

这是我的 jQuery 代码：

```
$('.principal-nav li a').append(
     $('span.posts-amount').clone().end()
); 
```

我想我可以使用“每个”来获得一些工作，但由于某种原因，我还不能实现它。我一直在看很多板和教程，但找不到我的问题的任何答案。

谢谢你帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:06:48.387

演示：http: [//jsfiddle.net/RJzq7/](http://jsfiddle.net/RJzq7/)

```
$('.principal-nav li a').each(function () {
  $(this).next().appendTo(this);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:30:08.360

克隆将创建元素的重复副本。因此，请改用 appendTo()。

# android - R无法解决，安装Android插件时出错

> ID：12365307
> 
> 赞同：0
> 
> 时间：2012-09-11T08:03:18.667
> 
> 标签：android, eclipse, adt

我刚刚创建了一个 android 项目，在使用向导创建它之后，Eclipse 说 R 无法解决，尝试重新安装 eclipse 和 android 几次，但是在尝试安装 android 插件时它开始给我一个错误。错误说“'联系软件站点'遇到问题。不允许使用 HTTP 方法：http: [//developer.android.com/sdk/index.html/content.xml](http://developer.android.com/sdk/index.html/content.xml) ”在错误详细信息中显示“不允许使用 HTTP 方法：[http://developer.android.com/sdk/index.html/content.xml](http://developer.android.com/sdk/index.html/content.xml) Http客户端连接错误响应码405”

我怎样才能解决这个问题！？这真的很令人沮丧和烦人，我知道如果我清理项目并重建错误应该被修复，但这并没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:06:49.783

如果使用 Eclipse，运行一个干净的构建（`Project/Clean...`）；这通常可以清除资源未正确编译的问题。

参考这个链接这将解决这个问题[R 无法解决 - Android 错误](https://stackoverflow.com/questions/885009/r-cannot-be-resolved-android-error)

[如何修复 Android 和 Eclipse 中的“R 无法解析”错误](http://joshua14.homelinux.org/blog/?p=1202)

# biztalk - 对来自出口匝道的消息应用两个不同的变换，并将每个变换的输出发送到不同的匝道扩展器

> ID：12365309
> 
> 赞同：0
> 
> 时间：2012-09-11T08:03:45.247
> 
> 标签：biztalk, esb

我收到一条消息作为出口匝道的响应。我需要对此消息应用两个不同的转换（不需要过滤器）并将每个转换的输出发送到不同的出口。

所以基本上，我的行程如下所示：

On-Ramp --> Messaging Extender (Transform) --> Off-Ramp Extender --> Off-Ramp --> [这里我需要将收到的响应转换为两个不同的消息，并将每个消息发送到不同的 Off-Ramp ]

我尝试了几种方法，但都没有成功。谁能指出我正确的方向？

任何帮助将不胜感激。

问候鲁奇特拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:36:45.453

我可以想到几种方法：

*   创建一个编排，以两种方式中的每一种顺序处理响应
*   [将响应写入消息框，](http://msdn.microsoft.com/en-us/library/aa949234.aspx)然后创建两个发送端口（使用过滤器，以便它们只处理响应）。此选项将让您停止处理到一个关闭坡道，而不会影响另一个。

# wordpress - 在wordpress中登录

> ID：12365319
> 
> 赞同：0
> 
> 时间：2012-09-11T08:04:12.910
> 
> 标签：wordpress

我刚刚为 wordpress 安装了 wp 锁定插件，这样用户就不会使用站点名/wp-admin。这是一个复选标记，询问我是否要在未登录时隐藏 wp-admin，所以我检查了它。现在我什么也做不了。当我想去站点名/wp-admin时它会显示这个错误：

```
 Fatal error: Call to undefined function theme_404_content() in F:\wamp\www\wp-content\themes\mysite\404.php on line 25 
```

请帮助我，以便我可以修复此错误

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:12:44.350

错误消息很明确：您正在使用主题`theme_404_content`文件`404.php`（第 25 行）中的函数，并且该函数不存在。

看一下你的主题的functions.php文件，函数`theme_404_content`应该在这里定义。

此错误在您的主题中，与 wp 锁定无关。

# ruby - Mongoid::Criteria#last 修改条件并给出错误结果

> ID：12365328
> 
> 赞同：0
> 
> 时间：2012-09-11T08:05:05.480
> 
> 标签：ruby, mongodb, mongoid3

这是我使用 mongoid (3.0.0) 发现的一个有趣的模式，我怀疑这是一个错误。

```
1.9.3p194 :007 > products = Product.order_by([:_id, :asc ]).limit(5)
 => #<Mongoid::Criteria
   selector: {},
   options:  {:sort=>{"_id"=>1}, :limit=>5},
   class:    Product,
   embedded: false>

1.9.3p194 :008 > products.map(&:_id)
 => ["500fa5614f6d3a23d0000002", "500fa5614f6d3a23d0000003", "500fa5614f6d3a23d0000004", "500fa5614f6d3a23d0000005", "500fa5614f6d3a23d0000006"] 
```

到现在为止还挺好！但是，如果我发出以下命令 - 我会得到奇怪的结果。

```
1.9.3p194 :012 > products.count
 => 3654017 
```

这向我显示了**所有**产品数量而不是 5（因为我有：limit => 5）

```
1.9.3p194 :012 > Product.count
 => 3654017 
```

现在更奇怪的部分：

```
1.9.3p194 :010 > products.last
 => #<Product _id: 504952620a5e2323460000aa, _type: nil, ... > 
```

这应该是_id：500fa5614f6d3a23d0000006。现在，如果我再次尝试映射 id，我会得到：

```
1.9.3p194 :019 > products.map(&:id)
 => ["504952620a5e2323460000aa", "504952620a5e2323460000a9", "504952620a5e2323460000a8", "5049524f0a5e2323460000a7", "504950ab0a5e2323460000a6"] 
```

这完全改变了标准！但是，我得到了正确的结果：

```
1.9.3p194 :008 > products = Product.order_by([:_id, :asc ]).limit(5)
 => #<Mongoid::Criteria
  selector: {},
  options:  {:sort=>{"_id"=>1}, :limit=>5},
  class:    Product,
  embedded: false>

1.9.3p194 :028 > products[0].id
 => "500fa5614f6d3a23d0000002" 
1.9.3p194 :029 > products[-1].id
 => "500fa5614f6d3a23d0000006" 
```

不过，这似乎与 Mongoid 3.0.0 有关。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:32:07.867

首先请记住，Mongoid 具有延迟加载功能：查询将在可能的最后一刻触发。

让我们挖掘您的问题：

*   `last`：它设置`limit`为，`-1`因此它将覆盖您以前的设置。要获得预期的行为，您必须强制 Mongoid 使用以下命令进行查询`to_a`：`products = Product.order_by([:_id, :asc ]).limit(5).to_a.last`

*   `count`: 如果你想尊重`limit`, 使用`count(true)`

# ruby-on-rails-3 - 使用 OAuth2.0 Rails 进行 Eventbrite 身份验证

> ID：12365331
> 
> 赞同：1
> 
> 时间：2012-09-11T08:05:17.887
> 
> 标签：ruby-on-rails-3, eventbrite

我正在创建一个应用程序，我正在尝试使用 eventbrite 对用户进行身份验证。参考[文档](https://github.com/ryanjarvinen/Eventbrite.jquery.js/blob/master/OAUTH2-README.md)，我在我的应用程序中包含了 javascript，它在我的应用程序中生成了一个**CONNECT WITH EVENTBRITE**链接。

当我单击此按钮时，它会将我带到 url：

[https://www.eventbrite.com/oauth/authorize?response_type=token&client_id=xxxxxxxxxxxx](https://www.eventbrite.com/oauth/authorize?response_type=token&client_id=xxxxxxxxxxxx)

（这里的客户端 ID 是我的应用程序的 eventbrite 应用程序密钥。）

当用户*允许*应用程序访问 evenbrite 帐户时，它会使用以下 url 将我重定向到我的应用程序：

```
http://localhost:3000/#token_type=Bearer&access_token=yyyyyyyyyyyyyyyyyyyy 
```

我希望 url 中的**访问令牌**访问用户的信息。我尝试使用**URI**解析 url 。但我没有发现它是最好的方法。任何人都可以告诉我一个从上面的 url中提取**access_token的好解决方案。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:40:26.320

对于[服务器端 OAuth2.0](http://developer.eventbrite.com/doc/authentication/oauth2/#server-side)，我会在您的初始 URL 中使用 response_type=code ：

```
https://www.eventbrite.com/oauth/authorize?response_type=code&client_id=xxxxxxxxxxxx 
```

要查找 access_code，请从查询字符串中获取“代码”参数：

```
require 'uri'
uri = URI("http://localhost:3000/?code=XVYMCZOHM4D2GBXTJZG6")
access_code = uri.query.split('&')[0].split('=')[1] 
```

下一步是向[https://www.eventbrite.com/oauth/token](https://www.eventbrite.com/oauth/token)进行服务器端 POST，其中包含临时 access_code、您的 client_secret 和一些其他详细信息（此处概述：[http://developer.eventbrite。 com/doc/authentication/oauth2/](http://developer.eventbrite.com/doc/authentication/oauth2/) )

```
code=THE_USERS_AUTH_CODE&client_secret=YOUR_CLIENT_SECRET&client_id=YOUR_API_KEY&grant_type=authorization_code 
```

用户的 access_token 应该在 POST 响应中可用。

# php - 可靠地检测 PHP 脚本是否在 IIS 下运行

> ID：12365337
> 
> 赞同：1
> 
> 时间：2012-09-11T08:05:37.977
> 
> 标签：php, iis

由于臭名昭著的 IIS 错误与“Location”重定向标头有关，我们必须改用“Refresh”标头。

所以，我想知道以编程方式检测 PHP 脚本是否在 IIS 下运行的最佳方法。

目前使用的方法是`DIRECTORY_SEPARATOR !== '/'`，但显然 Apache 和 Windows 下的其他服务器被错误识别为 IIS。

我想过：

`strpos($_SERVER['SERVER_SOFTWARE'], 'Microsoft-IIS') !== false`

...但是该元素对应于 HTTP 响应的“Server”标头，并且可能已通过各种方式将其删除。

任何更健壮的方法的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:22:28.837

根据[http://www.helicron.net/php/](http://www.helicron.net/php/)，IIS 将 $_SERVER['DOCUMENT_ROOT'] 留空，但 apache 不会。

# javascript - “在新标签页中打开”的 Javascript 事件

> ID：12365339
> 
> 赞同：9
> 
> 时间：2012-09-11T08:05:45.877
> 
> 标签：javascript, jquery, dom-events, javascript-framework

我有以下问题：我使用 Javascript onclick 事件来更改链接的 href。它就像一个魅力，但前提是用户只需点击一个链接。如果链接使用“在新选项卡中打开”功能 - onclick 事件将不会触发，href 将永远不会改变。有没有办法处理这样的事件？也许使用 jQuery 或其他一些 JS 框架？

例子：

```
<a href="some_url" onclick="this.href = 'some_other_url'">Link</a> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T08:09:21.427

尝试改变

```
<a href="some_url" onclick="this.href = 'some_other_url'">Link</a> 
```

至

```
<a href="some_url" onmousedown="this.href = 'some_other_url'">Link</a> 
```

# php - 在 MySQL 表行中使用加法？

> ID：12365343
> 
> 赞同：1
> 
> 时间：2012-09-11T08:05:57.663
> 
> 标签：php, mysql

如何更新值“100”如果 $id 通过添加 +100 来重复，那么在级别中的总数将是 200 这是我的 INSERT 语句

```
 INSERT INTO users (id, name, level) VALUES ($id, 'name', 100 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:06:51.723

这应该为您解决问题（我假设 id 是一个唯一字段，可用于识别要更新的正确行）：

```
$query="INSERT INTO 
users (id, name, level) 
VALUES ($id, 'name', 100 ) 
on duplicate key 
    update set level=level+100"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:13:39.003

由于 UPDATE 是特定于 MySQL 的，因此更通用的方法是 `INSERT INTO users (id,name,level) VALUES ($id, 'name', 100) ON DUPLICATE KEY UPDATE level = level + VALUES(level)`

请参阅[http://dev.mysql.com/doc/refman/5.1/de/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.1/de/insert-on-duplicate.html) AFAIK，这更普遍适用于 MySQL。

# c# - 如何将字典值分配给 asp.net 中的会话？

> ID：12365346
> 
> 赞同：0
> 
> 时间：2012-09-11T08:06:08.413
> 
> 标签：c#, asp.net

我有一个将值分配给在 c# 中创建的字典的函数。在函数中进行一些计算之后，字典由一个值和一个键组成。我需要创建一个会话，在这个会话中保存这个字典。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:24:21.143

简单地说，如果你有一个`Dictionary<string, List<int>>`然后把它放在会话中并不是很复杂；

```
Dictionary<string, List<int>> myDict = new Dictionary<string, List<int>>();
HttpContext.Current.Session.Add("MyDictionary", myDict); 
```

如果您想检查 Session 是否已经包含您的字典，如果没有，则仅添加它：

```
if(!HttpContext.Current.Session.ContainsKey("MyDictionary"))
{
    HttpContext.Current.Session.Add("MyDictionary", myDict);
} 
```

要取出它，请记住它不是类型的，`Session`实际上是字符串字典，对象所以你必须强制转换：

```
if(HttpContext.Current.Session.ContainsKey("MyDictionary"))
{
    Dictionary<string, List<int>> myDict = HttpContext.Current.Session["MyDictionary"] as Dictionary<string, List<int>>;
} 
```

但是，您还应该考虑该对象的生命周期 - 会话不稳定，因为它具有有限的生命周期 - 例如，它会在预定的不活动时间后消失，所以如果你希望它徘徊更长的时间，那么您可能需要考虑替代策略。

[MSDN](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)上有大量关于 Session over 的文档，这也是 Stack Overflow 上非常常见的话题。

还请记住，由于 Session 实际上是`Dictionary<String, Object>`由 .Net Framework 和 IIS 管理的，因此您还可以执行以下操作：

```
Session["MyValues"] = new List<Int32>(); 
```

当然，在检索时：

```
List<Int32> myValues = Session["MyValues"] as List<Int32>(); 
```

其他替代方案包括缓存；如果您的对象将可供应用程序的所有用户使用，那么这可能是一个更好的解决方案。请参阅此[答案](https://stackoverflow.com/questions/428634/cache-v-s-session)以获取更多信息。

我也投票结束您的问题，因为我认为它过于本地化，但我希望我的回答能帮助您。

# php - Include / Require 静默失败

> ID：12365348
> 
> 赞同：3
> 
> 时间：2012-09-11T08:06:15.920
> 
> 标签：php, http, tomcat, include

在我的代码中，我有一个 include 语句，它从外部 URL 加载代码，如下所示：

```
include 'http://123.123.123.123:8080/servlet/statemodel' 
```

问题是，servlet 需要大约 35 秒才能加载。

如果我`http://123.123.123.123:8080/servlet/statemodel`在浏览器中访问，一切正常（我修改了 IP，因为无论如何它都无法通过互联网访问）。

但是，使用 iclude 语句会`PHP`尝试大约 20 秒来包含文件，然后在 include 语句之后继续执行代码。

没有错误信息。也使用 require 不会带来错误消息。

包含超时吗？为什么没有错误信息？

也许 tomcat 实际上发送了数据（http-header），但 PHP 只等待大约 20 秒来跟随一些内容？

我可以选择更改此超时吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T08:20:15.687

你用这个设置超时：

```
ini_set("default_socket_timeout", $value); 
```

但是默认值是60秒，应该绰绰有余。

也许您可以通过以下方式找到更多信息：

```
error_reporting(E_ALL);
ini_set("display_errors", 1); 
```

IMO 最干净的解决方案是在提供 PHP 脚本的 HTML 之后使用 AJAX 请求加载 servlet 的内容。这样用户就可以快速获得结果，并且您可以向他展示正在加载的更多内容。

# jquery-ui - jQuery 对话框位置取决于内容

> ID：12365349
> 
> 赞同：0
> 
> 时间：2012-09-11T08:06:16.010
> 
> 标签：jquery-ui, jquery-ui-dialog, jquery-ui-tabs

我正在加载包含选项卡的 jQuery 对话框。选项卡的高度不同，但位置是在加载的第一个选项卡上计算的。是否可以根据内部最大的选项卡定位对话框？

# android - 扩展 FrameLayout，子视图不再显示

> ID：12365350
> 
> 赞同：8
> 
> 时间：2012-09-11T08:06:16.867
> 
> 标签：android, android-layout

这是我的代码`FrameLayout`：

```
<FrameLayout
        android:layout_width="fill_parent" android:layout_height="wrap_content">
    <ImageView
            android:id="@+id/frameView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:src="@drawable/image1"
            />
</FrameLayout> 
```

ImageView 显示良好。

现在我有一个从 FrameLayout 扩展而来的自定义布局，例如 MyFrameLayout。

在 MyFrameLayout 中，我希望布局的高度总是宽度的一半，所以我的代码是：

```
public class MyFrameLayout extends FrameLayout {

     // 3 constructors just call super

     @Override
     protected void onMeasure(int widthMeasureSpec,
                         int heightMeasureSpec) {
        int width = MeasureSpec.getSize(widthMeasureSpec);
        int height = (int) (width * 0.5);
        setMeasuredDimension(width, height);
    }
} 
```

然后在xml中使用它：

```
<com.test.MyFrameLayout
        android:layout_width="fill_parent" android:layout_height="wrap_content">
    <ImageView
            android:id="@+id/frameView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:src="@drawable/image1"
            />
</com.test.MyFrameLayout> 
```

但是现在内部的 ImageView 消失了。

我认为我没有实施`onMeasure`或`onLayout`正确。我想我也需要调整子视图的大小。但我不知道现在该怎么办。

* * *

**更新**

根据**TheDimasig**的评论，我刚刚检查了我的代码并更新了我的问题。谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-04-22T22:20:24.070

最简单的方法是在onMeasure中改变measurespec，但仍然调用super：

```
 @Override
 protected void onMeasure(int widthMeasureSpec,
                     int heightMeasureSpec) {
    int width = MeasureSpec.getSize(widthMeasureSpec);
    int height = (int) (width * 0.5);
    heightMeasureSpec = MeasureSpec.makeMeasureSpec(height, MeasureSpec.EXACTLY);
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
} 
```

通过这种方式，您可以获得所需的尺寸，但不必手动测量孩子。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-11T10:21:14.910

您看不到任何子视图，因为您没有`onMeasure`正确覆盖该方法。您可以让超类实现逻辑（因此将显示子视图），然后重置计算的宽度和高度`MyFrameLayout`：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    // let the super class handle calculations
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    // set again the dimensions, this time calculated as we want
    setMeasuredDimension(getMeasuredWidth(), getMeasuredHeight() / 2);
    // this is required because the children keep the super class calculated dimensions (which will not work with the new MyFrameLayout sizes) 
    final int count = getChildCount();
    for (int i = 0; i < count; i++) {
        final View v = getChildAt(i);
        // this works because you set the dimensions of the ImageView to FILL_PARENT          
        v.measure(MeasureSpec.makeMeasureSpec(getMeasuredWidth(),
                MeasureSpec.EXACTLY), MeasureSpec.makeMeasureSpec(
                getMeasuredHeight(), MeasureSpec.EXACTLY));
    }
} 
```

如果您发布的布局不是您的完整布局，那么我的代码可能不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T08:47:11.370

我想在您的`onMeasure`方法中，您忘记在所有子视图上调用 onMeasure，包括您的 ImageView。您必须遍历所有子视图并在它们上调用 onMeasure，如下所示：

```
 for (int i = 0; i < getChildCount(); i++) {
        getChildAt(i).measure(....);
    } 
```

# c# - 从 sharepoint 读取的 word 文档中删除内容控制

> ID：12365352
> 
> 赞同：1
> 
> 时间：2012-09-11T08:06:22.470
> 
> 标签：c#, sharepoint, openxml, xmldocument, contentcontrol

我在 word 文档中有一个带有文本草稿的内容控件。在 sharepoint 中有一个应用程序页面可以从 word 文档生成 pdf 文档，但是我必须删除该草稿文本。草稿文本也在名为草稿的内容控件中。我不能使用office API，它必须使用OpenXML，我已经阅读了OpenXMLHelper 和RemoveContentCONtrollANdKeepContents 方法，但是该代码非常令人困惑，所以我不确定该怎么做。

我有以下代码需要完成，

```
protected void Page_Load(object sender, EventArgs e)
        {
            Logger.LogDebug("ConvertToPdf", "Page_Load(object sender, EventArgs e)", "BEGIN");

            string source = Request.QueryString["Source"];
            string messageSource = Request.Url.ToString();
            int id = Convert.ToInt32(Request.QueryString["ID"]);
            string state = Request.GetQueryStringValue(MeetingsCommon.Constants.QUERYSTRINGPARAMETER_STATE_NAME);
            string statusMessage = Request.GetQueryStringValue(MeetingsCommon.Constants.QUERYSTRINGPARAMETER_MESSAGE_NAME);
            this.litMessage.Text = statusMessage;

            if (!string.IsNullOrEmpty(state))
                return;

            using (SPLongOperation operation = new SPLongOperation(this.Page))
            {
                try
                {
                    operation.Begin();
                    SPWeb currentWeb = SPContext.Current.Web;
                    SPSite currentSite = currentWeb.Site;
                    SPSecurity.RunWithElevatedPrivileges(delegate()
                    {
                        using (SPSite elevatedSite = new SPSite(source))
                        {
                            using (SPWeb elevatedWeb = elevatedSite.OpenWeb())
                            {
                                elevatedWeb.AllowUnsafeUpdates = true;
                                SPList drafts = elevatedWeb.GetSafeListByName(MeetingsCommon.Constants.LISTS_HIDDENCONVERSION_NAME);
                                SPDocumentLibrary draftsDL = elevatedWeb.GetSafeDocumentLibraryByName(MeetingsCommon.Constants.LISTS_HIDDENCONVERSION_NAME);

                                SPListItem item = drafts.GetItemById(id);

                                ConversionJobSettings pdfConversionJobSettings = new ConversionJobSettings();
                                pdfConversionJobSettings.OutputFormat = SaveFormat.PDF;
                                pdfConversionJobSettings.OutputSaveBehavior = SaveBehavior.AlwaysOverwrite;

                                string serviceName = "Word Automation Services";
                                ConversionJob pdfConversionJob = new ConversionJob(serviceName, pdfConversionJobSettings);
                                pdfConversionJob.UserToken = elevatedWeb.CurrentUser.UserToken;

                                string docxFile = elevatedWeb.Url + "/" + item.Url;
                                string pdfFile = docxFile.Replace("docx", "pdf");
                                SPList destinationList = null;

                                pdfConversionJob.AddFile(docxFile, pdfFile);
                                Stream document = draftsDL.GetDocumentTemplate(item.Name);
                                RemoveDraft(document);

private void RemoveDraft(Stream wordFile)
        {
            Logger.LogDebug("GenerateRefuseLetter", "BuildDocument(Stream templateFile, RefuseLetter refuseLetter)", "BEGIN");
            Stream returnValue = null;
            try
            {
                using (Package package = Package.Open(wordFile, FileMode.Open, FileAccess.ReadWrite))
                {
                    string relationshipType = "http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument";

                    //  Get the main document part (workbook.xml, document.xml, presentation.xml).
                    var relationShipCollection = package.GetRelationshipsByType(relationshipType);
                    if (relationShipCollection.Count() == 0)
                        throw new Exception(string.Format("Could not find a relationship with type:{0} in the package", relationshipType));

                    //  There should only be one document part in the package. 
                    PackageRelationship relationship = relationShipCollection.First();

                    Uri documentUri = PackUriHelper.ResolvePartUri(new Uri("/", UriKind.Relative), relationship.TargetUri);
                    PackagePart documentPart = package.GetPart(documentUri);

                    Uri uriData = null;

                    List<Uri> lstPackageParts = new List<Uri>();
                    foreach (PackagePart p in package.GetParts())
                    {
                        XmlDocument doc = new XmlDocument();
                        doc.Load(p.GetStream());

                    }

                }
            }
            catch(Exception ex)
            {
                    throw ex;
            }        
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:31:06.053

假设您有一个 SdtRun 类型的内容控件，示例代码可以在保留文本的同时删除内容控件

```
using (WordprocessingDocument wordProcessingDocument = WordprocessingDocument.Open(stream, true))
            {
                SdtRun sdtRun = wordProcessingDocument.MainDocumentPart.Document.Body.Descendants<SdtRun>().FirstOrDefault();

                if (sdtRun != null)
                {
                    foreach (var elem in sdtRun.SdtContentRun.Elements())
                    {
                        sdtRun.Parent.InsertBefore(elem.CloneNode(true), sdtRun);
                    }

                    sdtRun.Remove();

                    wordProcessingDocument.MainDocumentPart.Document.Save();
                }                    
            } 
```

# c# - 版本相关代码

> ID：12365359
> 
> 赞同：0
> 
> 时间：2012-09-11T08:07:05.727
> 
> 标签：c#, c-preprocessor

我正在编写一个处理我无法控制的外部数据的程序。这些数据会随着时间而变化，但我希望我的程序与它的各种版本兼容。在其他语言中，我会使用#define 来指定版本，而不是使用#if 来为指定的版本做必要的事情。喜欢

```
#if VERSION >= 5
    ...
#endif 
```

我知道这在 C# 中是不可能的，因为它只允许定义符号，但不能为它们分配一些东西。所以我想知道，实现这一目标的最佳方法是什么？我可以定义诸如 VERSION_5 之类的东西，但我宁愿能够检查特定版本，尤其是*range*，这样会很烦人。我能想到的下一个最好的事情是 const，但这必须在运行时进行检查，这可能会稍微减慢速度。我不确定它是否会在我的项目中引起注意，但我很担心。

在 C# 中有没有标准的方法来做到这一点？最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:14:59.197

我会为数据处理创建一个或多个接口。每个接口都可能实现多次，每个版本范围一次。这些接口实现会被注入到处理数据的类中。

像这样的东西：

```
public interface IDataProcessor
{
    void Process(Data data);
    bool SupportsVersion(int version);
} 
```

在数据处理程序类中：

```
foreach(var dataProcessor in _dataProcessors)
{
    if(dataProcessor.SupportsVersion(versionOfCurrentData))
    {
        dataProcessor.Process(data);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:36:52.830

> 我正在编写一个处理我无法控制的外部数据的程序。

因此，虽然它是一个服务器应用程序，但您可能会收到任何版本的格式化数据，那么您必须支持所有版本。因此，您不应该通过指令做出编译时间决定，您应该分析数据运行时以获取支持的模式，并在识别模式后继续进行适当的处​​理。例如，为不同的版本运行不同的线程，然后识别器应该将识别的数据并行传递给负责的合适线程，并且也会使未知数据失败！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:35:00.617

此示例取决于 .NET 版本。对于某些项目，他们使用

```
#if NET_2_0
...
#endif
#if NET_3_5
...
#endif
#if NET_4_0
...
#endif
#if NET_4_5
...
#endif 
```

在 .NET 1.1 的生命周期结束时，他们只需删除 NET_2_0 条件以保持更少的条件。

在 .NET 4.5 的项目文件中，定义 NET_2_0、NET_3_5、NET_4_0、NET_4_5

在 .NET 4.0 的项目文件中，定义 NET_2_0、NET_3_5、NET_4_0

在 .NET 3.5 的项目文件中，定义 NET_2_0、NET_3_5

在 .NET 2.0 的项目文件中，定义 NET_2_0

在 .NET 1.1 的项目文件中，没有定义符号

# css - 是否可以使用 css 预处理器有条件地生成 css？

> ID：12365365
> 
> 赞同：1
> 
> 时间：2012-09-11T08:07:36.997
> 
> 标签：css, sass, less, modernizr

当我使用modernizr 时，它会在我的标签中添加`rgba`或分类。我正在尝试使用. 例如：`no-rgba``html``LESS`

```
.background-content{
  background: #000;
  background: rgba(0,0,0,0.5);
}

header{
  .background-content;
} 
```

现在，我想做的是如果`rgba`存在的话：

```
.background-content{
  background: rgba(0,0,0,0.5);
} 
```

但如果`no-rgba`存在，那么我希望它是这样的：

```
.background-content{
  background: #000;
} 
```

我的问题是，是否可以使用条件生成 mixins？是否有可能当我在**`.background-content`里面`header`**做时，它会根据存在的类给出不同的背景颜色？如果`LESS`做不到，可以`SASS`做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T07:35:03.107

预处理器不可能知道有关您的 HTML 或浏览器如何读取它的任何信息。但是，如果我理解正确，您可以使用 Sass 获得所需的（以及更多）：

```
@mixin background-content {
  background: rgba(0,0,0,0.5);
  .no-rgba & { background: #000; }
}

header {
  @include background-content;
} 
```

您可以通过采用参数来使其更加灵活：

```
@mixin background-content($rgba, $no-rgba: rgba($rgba,1)) {
  background: $rgba;
  .no-rgba & { background: $no-rgba; }
}

header {
  @include background-content(rgba(0,0,0,0.5));
} 
```

条件在 mixin 内部，而不是每次都需要硬编码。

# java - 在java中拖放网页

> ID：12365366
> 
> 赞同：2
> 
> 时间：2012-09-11T08:07:46.013
> 
> 标签：java, jquery, struts

我想开发一个具有以下内容的网页

```
List A                      List B
  column name1              column name4
  column name2
  column name3
  column name4
  column nameN 
```

我必须能够将列表 A 拖放到列表 B

最后将值保存在`List A and List B`

如何在使用 struts 框架的 java web 应用程序中做到这一点？

你们中的任何人都可以帮我解决这个问题吗？

如果 jquery 是选项而不是如何去做。？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:10:32.293

您可以通过多种方式执行此操作，主要是 javascript，但 HTML5 现在也支持拖放。

[http://www.w3schools.com/html5/html5_draganddrop.asp](http://www.w3schools.com/html5/html5_draganddrop.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:22:36.003

[jquery ui 已经做到了](http://jqueryui.com/demos/droppable/)[min chars]

# jquery - jquery slideUp() 和 slideDown() 问题

> ID：12365367
> 
> 赞同：0
> 
> 时间：2012-09-11T08:07:46.973
> 
> 标签：jquery

我对 jquery 很陌生，并且在向下滑动和向上滑动事件时遇到 b/m 问题。

我有带有 5 个按钮的水平导航栏（作为列表项，例如运动、品牌等），它们本身被包裹在 id 为 shoppingNav 的 div 中。

我有一个带有 CSS 的下拉菜单`display:none`（带有 id 的 div `submenu_bg`）。

我想`submenu_bg`在鼠标悬停时向下滑动`#shoppingNav`并保持可见直到我从`#shoppingNav`. 我希望悬停时将单个按钮指向`fadeIn`不同的图标，但 submenu_bg 应该保持可见，直到我从导航栏（`#shoppingNav`）上的整个鼠标移出。

当前发生的情况是`submenu_bg`当从一个按钮悬停到另一个按钮时继续向下和向上滑动。

[您可以在nike.com](http://www.nike.com/in/en_gb/)上查看我想要的效果。我无法弄清楚如何做到这一点。对此的任何帮助将不胜感激。

jQuery代码：

```
$(function(){
$('#shoppingNav').on('mouseover',function(){
    $('#submenu_bg').slideDown(200);
    });

$('#shoppingNav').on('mouseout',function(){
    $('#submenu_bg').stop().slideUp(200);
    });
});

<div id="shoppingNav">
        <ul>
        <li id="sports"><a href="#"></a></li>   
            <li id="brand"><a href="#"></a></li>                        
            <li id="clothing"><a href="#"></a> </li>                        
            <li id="footwear"><a href="#"></a></li>                         
            <li id="hotdeals"><a href="#"></a></li>
        </ul>
        <div id="submenu_bg"><img src="_images/submenu_bg1.png" alt="some background"/></div> 

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:12:02.923

使用超时，然后在将鼠标悬停在新列表元素上时清除该超时，以免再次滑动子菜单：

```
$(function(){
    var timer;
    $('#shoppingNav').on({
        mouseenter: function(){
            clearTimeout(timer);
            if (!$('#submenu_bg').is(':visible'))
                $('#submenu_bg').slideDown(200);
        },
        mouseleave: function(){
            timer = setTimeout(function() {
                $('#submenu_bg').slideUp(200);
            }, 500);
        }
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/VAvwG/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:12:37.547

这似乎与您包装事件处理程序的方式有关。

我玩弄了这个并设法让它在[这里](http://jsfiddle.net/G9Te3/)工作。

```
$('#shoppingNav').on('mouseover',function(){
  $('#submenu_bg').slideDown(200);
});

$('#shoppingNav').on('mouseout',function(){
  $('#submenu_bg').stop().slideUp(200);
}); 
```

​</p>

# html - iPad 的 Safari 在将 jpg 渲染为背景图像时有问题吗？

> ID：12365368
> 
> 赞同：3
> 
> 时间：2012-09-11T08:07:59.650
> 
> 标签：html, css, ios, ipad

这是我的代码：

# HTML

```
<div class="sfondo-interne-8601">
    <div style="height:1200px; width:900px;">
        Test
    </div>
</div> 
```

# CSS

```
.sfondo-interne-8601
{
    background-image:url('http://www.deviantart.com/download/247331565/moonlit_tears_by_lifesequencebreak-d439699.png') !important;   
    background-repeat:no-repeat;
    background-position:center top;
} 
```

好吧，尝试创建一个页面并在 iPad 上进行测试：效果很好（图片为 png）。

现在，尝试用 jpg 更改图像（我已经[在这里](http://img406.imageshack.us/img406/9540/tifacloudandsephirothya.jpg)为您选择了一个）。您会注意到新图像将被调整大小（不确定哪些规则）并居中于整个 html 文档的中心/顶部。

为什么？我该如何解决？ipad有限制吗？

只是注意到，如果我使用 .jpg 比 1150px（作为高度）慢，它也可以工作。Safari的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:14:26.397

在 iOS 上，[超过 2MP 的 jpeg 图像被二次采样](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/CreatingContentforSafarioniPhone/CreatingContentforSafarioniPhone.html)（在“资源限制”下查看），有效地改变了图像的尺寸。

`background-size`我推测这在 CSS设置为`contain`or时不会如此明显`cover`（它仍然会发生，但由于纵横比不会受到影响并且背景大小算法仍然会运行）

如果您希望二次采样的背景图像保持其原始尺寸渲染，您可以添加`background-size: 1920px 1200px`: [before](http://jsfiddle.net/ovfiddle/v9Ax7/1/)和[after](http://jsfiddle.net/ovfiddle/v9Ax7/3/)。

# ipad - IPad CSS 问题 - 网站在 Chrome、Firefox 和 IE 桌面上正确呈现

> ID：12365369
> 
> 赞同：0
> 
> 时间：2012-09-11T08:08:07.293
> 
> 标签：ipad, html, css

我对这个网站不知所措。搜索按钮移动到框的右侧，大型菜单背景不显示，而且菜单项混乱。网站链接如下：

[http://speedyapplication.com/corporate60sunglowred/HOME/tabid/4295/Default.aspx](http://speedyapplication.com/corporate60sunglowred/HOME/tabid/4295/Default.aspx)

这里会发生什么？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:38:00.823

dnn_dnnSearch_txtSearchNew 的宽度设置为 90%，这似乎没有按预期工作。尝试设置类似 165px 的值。

Safari、iPhone 和 iPad 浏览器没有永久滚动条，因此页面宽度不考虑它们，而其他浏览器则考虑。还可以尝试桌面版 Safari。使用 Mac 版 Safari，我可以看到搜索按钮问题。

# ruby-on-rails - ActiveAdmin 按子模型过滤

> ID：12365373
> 
> 赞同：11
> 
> 时间：2012-09-11T08:08:23.220
> 
> 标签：ruby-on-rails, activeadmin

我有属于**用户模型的****订单**模型。

 **我需要通过用户电子邮件在订单中创建过滤器。

我该怎么做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-08T16:27:28.887

如果您正在查看 orders.rb 中的订单，并希望限制关联用户的订单，那么您可以执行以下操作：

```
filter :user_first_name, :as => :string 
```

这将为您提供基于 Order.User.first_name 关系的自由文本搜索。

只要正确配置了 has_one 和 belongs_to 关系，反过来也是如此：

```
filter :order_created_at, :as => :string 
```

希望这个对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:20:14.660

您是否正在寻找更多：

```
User.where(:email => 'whatever@email.com').orders 
```**

# if-statement - 'else' 不是内部或外部命令、可运行程序或批处理文件

> ID：12365374
> 
> 赞同：33
> 
> 时间：2012-09-11T08:08:24.017
> 
> 标签：if-statement, batch-file, cmd

我尝试使用“else”命令，但出现以下错误：

**'else' 不是内部或外部命令、可运行程序或批处理文件。**

我的代码是：

```
if "zz"=="TRUE" (
        copy /a zz + /a ee=/a zz
    ) 
    else (
        copy /a e + /a %TMP%=/a e
    ) 
```

什么问题？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-09-11T08:11:15.843

`else`需要与. _ ^_ `if`删除之前的换行符，`else`如下所示：

```
if "zz"=="TRUE" (
    copy /a zz + /a ee=/a zz
) else (
    copy /a e + /a %TMP%=/a e
) 
```

另请注意，`"zz"=="TRUE"`永远不会评估为`true`-我怀疑您的意思是`"%zz%"=="TRUE"`？

* * *

^((a))：这并不总是一个好的描述，尽管它是 Microsoft 文档使用的。相同的*命令*可能会更好，将`)`and`else`放在不同的行上会将其分成*两个*命令。

# c++ - 用于收集 PC 硬件/操作系统信息的库

> ID：12365380
> 
> 赞同：2
> 
> 时间：2012-09-11T08:09:03.183
> 
> 标签：c++, .net, profiling

有没有像 PC Wizard 的 System Information Dev Kit 那样收集 PC 硬件和操作系统信息的免费或开源库？我更喜欢 .NET 程序集或本机 dll（这样我可以通过 PInvoke 使用它的功能），但 Java 也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:43:21.057

你试过 [WMI吗](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394582%28v=vs.85%29.aspx)

您可能可以获得有关[硬件](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389273%28v=vs.85%29.aspx)和[操作系统](http://msdn.microsoft.com/en-us/library/windows/desktop/aa392727%28v=vs.85%29.aspx)的所有信息。

# hibernate - 如何使用 group by 子句创建休眠条件？

> ID：12365384
> 
> 赞同：0
> 
> 时间：2012-09-11T08:09:33.963
> 
> 标签：hibernate, group-by, criteria

我需要创建类似于

```
select obj, obj.prop.id from Object1 obj group by obj.prop.id 
```

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:54:00.767

参考示例[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-projection](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-projection)

```
List results = session.createCriteria(Cat.class)
    .setProjection( Projections.projectionList()
        .add( Projections.rowCount() )
        .add( Projections.avg("weight") )
        .add( Projections.max("weight") )
        .add( Projections.groupProperty("color") )
    )
    .list(); 
```

# iphone - 无法识别的选择器发送到实例 0x748b800

> ID：12365387
> 
> 赞同：-1
> 
> 时间：2012-09-11T08:10:00.287
> 
> 标签：iphone, xcode, xcode4.2

今天是个好日子！我只想问我在做什么有什么问题。我正在处理这个两天，但我仍然无法做到。它说“无法识别的选择器发送到实例 0x748b800”。我正在做的是解析一个 json 返回值。以下是示例 json 返回值：

```
{
   "data": [
      {
         "name": "John Patola",
         "id": "123444432"
      },
      {
         "name": "Joshua Valdez",
         "id": "22234567778"
      }
]
} 
```

我想将它们存储在一个名为 `NSArray *storage`. 以下是我的代码：

```
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
[self.rData appendData:data];
}
-(void)connection: (NSURLConnection *)connection didFailWithError:(NSError *)error{
[rData release];
[connection release];
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection{
NSString *myVar = [[[NSString alloc] initWithData:rData encoding:NSUTF8StringEncoding] autorelease];
NSArray *storage =[[(NSDictionary *)myVar objectForKey:@"data"]retain]; // this line seems to be the error
NSLog(@"%i", [storage count]); 
```

当我运行此代码时，我收到一个错误“无法识别的选择器发送到实例 0x748b800”。你认为我标记的那行真的会出错吗？我该如何解决？提前谢谢你的帮助。;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:34:10.707

`JSON`在您的项目中添加工具包。

`viewController.h`在文件中声明一个方法

```
-(void)JsonParsing:(NSString *)string; 
```

然后导入

```
#import "SBJSON.h"
#import "JSON.h" 
```

在您的`viewController.m`文件中和

```
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [self.rData appendData:data];
}
-(void)connection: (NSURLConnection *)connection didFailWithError:(NSError *)error
{
    [rData release];
    [connection release];
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
 {
    NSString *theXMLString = [[NSString alloc]initWithBytes:[self.rData mutableBytes] length:[self.rData length] encoding:NSUTF8StringEncoding];
    [self JsonParsing:theXMLString];
 } 
```

然后在这里解析你的字符串 -

```
-(void)JsonParsing:(NSString *)string
{
    SBJSON *jsonObject = [[SBJSON alloc]init];
    NSArray *dataArray = [[NSArray alloc]init];
    dataArray = [jsonObject objectWithString:string];
    NSLog(@"%d", [dataArray count]);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:32:45.280

做这个：

```
 -(void)connectionDidFinishLoading:(NSURLConnection *)connection{

   NSError *error = nil;
   NSDictionary *jsonDict = [NSJSONSerialization JSONObjectWithData: rData options: NSJSONReadingMutableContainers error: &error];

   if (!jsonArray) {
      NSLog(@"Error parsing JSON data: %@", e);
   } else 
   {
      NSArray *arrValues = [jsonDict objectForKey:@"data"];
      for(NSDictionary *item in arrValues) {
      NSLog(@"Item: %@", item);
   }
} 
```

# javascript - AJAX 调用后关闭 Fancybox

> ID：12365388
> 
> 赞同：0
> 
> 时间：2012-09-11T08:10:05.147
> 
> 标签：javascript, ajax, jquery, fancybox

我用fancybox打开一个表单，当我点击提交时我抛出了一些AJAX函数。我请求在我的主页上刷新一个表格，并在我关闭fancybox 之后。

当我在第一次加载主页后第一次单击提交按钮时，一切正常，但如果我尝试调用我的表单并提交两次或更多次，fancybox.close() 不起作用。这是我的代码：

```
$('#bouton_ajout_terminal').fancybox({
href: 'http://www.myurl.com/emm/utilisateurs/form_ajout_mobile.php',
type: 'ajax',
wrapCSS: 'fancybox-custom',
closeClick:false,
openEffect:'elastic',
openSpeed:200,
closeEffect:'elastic',
closeSpeed:200,
helpers:{
    overlay:{
        css:{'background-color':'#eee'}
    }
},
afterShow: function() {
    $('#formulaire_ajout_mobiles').on('submit', function() {
        $.ajax({
            url: $(this).attr('action'),
            type: $(this).attr('method'),
            data: $(this).serialize(),
            dataType: 'json',
            success: function(json) {
                if(json.reponse == 'ajout ok') {
                    refresh_terminaux(),
                    $.fancybox.close();
                } else {
                    alert('Erreur : '+ json.reponse);
                }
            }
        });
        return false;
    });
  }
}); 
```

有一些奇怪的事情，因为每当我提交我的表单时，我的主页上的表格会自动刷新，这证明我的功能是可操作的。唯一不起作用的是fancybox.close()。

# sql-server - 使用没有 EntityFramework 的 SQL Server 的 MVC 4 SimpleMembershipProvider

> ID：12365392
> 
> 赞同：1
> 
> 时间：2012-09-11T08:10:22.153
> 
> 标签：sql-server, asp.net-mvc, entity-framework, asp.net-mvc-4, simplemembership

是否可以在没有 EntityFramework 的情况下使用 SimpleMembershipProvider 设置 MVC 4，还是我需要编写自定义提供程序？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T11:14:51.657

是的，有可能。您可以尝试从“ *Internet 应用程序*”模板创建一个新应用程序，然后删除属于 EF 的所有内容。然后自己创建*用户*表并编辑连接字符串和`WebSecurity.InitializeDatabaseConnection()`.
当您在没有 EF 的情况下调用时，*用户*表将自动填充。`WebSecurity.CreateUserAndAccount()`

# java - 将字符串转换为整数/浮点数/双精度

> ID：12365403
> 
> 赞同：4
> 
> 时间：2012-09-11T08:11:00.437
> 
> 标签：java, android

我正在尝试将字符串转换为，`Integer/Float/Double`但我得到了一个`NumberFormatException`.

我的字符串是`37,78584`，现在我将其转换为我得到的任何一个`NumberFormatException`。

我怎样才能将其转换`string`为其中任何一个。

请帮助我摆脱这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T08:16:15.580

您必须为数字使用适当的语言环境，例如

```
String s = "37,78584";
Number number = NumberFormat.getNumberInstance(Locale.FRENCH).parse(s);
double d= number.doubleValue();
System.out.println(d); 
```

印刷

```
37.78584 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:41:03.547

使用类似`Type.parseSomething`and`Type.valueOf`的方法不是最佳选择，因为它们的行为取决于语言环境。例如，在某些语言中，十进制分隔符是 '.' 其他','中的符号。因此，在某些系统中，代码运行良好，而在其他系统中，它会崩溃并抛出异常。更合适的方法是使用格式化程序。JDK 和 Android SDK 有许多可随时使用的格式化程序，用于多种用途，与区域设置无关。看看[数字格式](http://developer.android.com/reference/java/text/NumberFormat.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T08:23:48.290

检查字符串值

那

```
if(String .equals(null or ""){

} else{
    //Change to integer
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T08:13:19.453

替换为字符串中`,`的`""`空白，然后转换您的数字

```
String str = "37,78584";
str = str.replaceAll("\\,",""); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T08:50:02.837

最佳实践是使用使用逗号作为分隔符的区域设置，例如法语区域设置：

```
double d = NumberFormat.getNumberInstance(Locale.FRENCH).parse("37,78584").doubleValue(); 
```

最快的方法就是用句号替换任何逗号。

```
double d = String.parseDouble("37,78584".replace(",",".")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T08:27:45.673

代替 '

```
String value  = "23,87465";
int value1 = Integer.parseInt(value.toString().replaceAll("[^0-9.]","")); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-11T08:13:26.747

在解析之前执行此操作以删除逗号：

```
myString.replaceAll(",", "")​; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-11T08:14:18.360

首先删除`,`这个，使用下面的代码

```
String s= "37,78584";
s=s.replaceAll(",", ""); 
```

然后使用下面的代码

对于字符串到整数：-

```
Integer.parseInt(s); 
```

对于要浮动的字符串：-

```
Float.parseFloat(s); 
```

对于字符串加倍： -

```
Double.parseDouble(s); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-09-11T08:18:10.243

尝试替换`,`然后转换为 Integer/float/double

```
String mysting="37,78584";
String newString=myString.replace(",", "");
int value=Integer.parseInt(newString); 
```

# python - 在 Heroku 上安装 Spynner

> ID：12365405
> 
> 赞同：3
> 
> 时间：2012-09-11T08:11:02.980
> 
> 标签：python, heroku, pyqt, spynner

我正在尝试`spynner`在 Heroku 应用程序中使用 Python 的模块，但我无法让它在 Heroku 上运行。我显然有它，`requirements.txt`这很好，即使安装`lxml`没有问题，但我遇到了 PyQt4 的问题。它没有在其依赖项中列出，如果我手动在`requirements.txt`like中添加语句`pyqt>=0.0.0`，它会尝试安装它，但我总是会出现以下错误：

```
 Downloading/unpacking pyqt>=0.0.0 (from -r requirements.txt (line 12))
         Storing download in cache at /app/tmp/repo.git/.cache/pip_downloads/htt
p%3A%2F%2Fwww.riverbankcomputing.com%2Fstatic%2FDownloads%2FPyQt4%2FPyQt-x11-gpl
-4.9.4.tar.gz
         Running setup.py egg_info for package pyqt
           Traceback (most recent call last):
             File "<string>", line 14, in <module>
           IOError: [Errno 2] No such file or directory: '/tmp/build_11i9jfrncqa
t2/.heroku/venv/build/pyqt/setup.py'
           Complete output from command python setup.py egg_info:
           Traceback (most recent call last):

         File "<string>", line 14, in <module>

       IOError: [Errno 2] No such file or directory: '/tmp/build_11i9jfrncqat2/.
heroku/venv/build/pyqt/setup.py'

       ----------------------------------------
       Command python setup.py egg_info failed with error code 1 in /tmp/build_1
1i9jfrncqat2/.heroku/venv/build/pyqt
       Storing complete log in /app/.pip/pip.log
 !     Heroku push rejected, failed to compile Python app 
```

无论我做什么，甚至尝试手动`heroku run easy_install xxx`使用一些 PyQt4 发行版，它都无法正常工作。有人对如何让 spynner 运行有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:14:33.057

你在本地试过吗？我不认为这个错误与 Heroku 有任何关系。在撰写本文时，您无法在任何地方从 pip 安装 pyqt。请参阅[pip install PyQt IOError](https://stackoverflow.com/questions/5517924/pip-install-pyqt-ioerror)

# java - java .cast 方法的不同行为

> ID：12365411
> 
> 赞同：1
> 
> 时间：2012-09-11T08:11:24.290
> 
> 标签：java, casting

我有这段代码（Child 只是 Object 的一个空子），但我不明白为什么最后一次调用与第二次调用的结果不同

感谢帮助

```
public class App {
  void process(Object o) {
    System.out.println("I have processed an object");
  }

  void process(Child c) {
    System.out.println("I have processed a child");
  }

  public static void main (String[] args) {
    Object o = new Child();

    Class<?> cl = Child.class;  

    App app = new App();
    app.process(o);
    app.process(Child.class.cast(o));
    app.process(cl.cast(o));
  }
} 
```

输出是

```
I have processed an object
I have processed a child
I have processed an object 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:15:00.507

`cl`很可能是因为is的静态类型`Class<?>`（实际上是`Class<Object>`），而`Child.class`is的静态类型`Class<Child>`。编译器仅根据它看到的静态类型来选择要调用的方法，而不是根据对象的*实际*类型。

所以将你的变量声明为

```
Class<Child> cl = Child.class; 
```

应该会给您预期的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:21:08.233

您应该使用 Java 反射来执行此操作

```
public static void main(String[] args) {
    Object o = new Child();
    App app = new App();

    try {
        Method m = App.class.getMethod("process", o.getClass());
        m.invoke(app, o);

    } catch (Exception e) {
        e.printStackTrace();
    }
}: 
```

虽然你有一个对象容器，但现在的输出是： **我已经处理了一个孩子**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:26:05.563

```
public T cast(Object obj) {
if (obj != null && !isInstance(obj))
    throw new ClassCastException();
return (T) obj;
} 
```

当这样写时：

```
Class<?> cl = Child.class; 
```

T被Object替换，所以返回(Object)obj；

# c++ - 为什么编译器会调用两次 -> 运算符

> ID：12365415
> 
> 赞同：11
> 
> 时间：2012-09-11T08:11:38.447
> 
> 标签：c++

以下代码摘自：[https ://github.com/facebook/folly/blob/master/folly/Synchronized.h](https://github.com/facebook/folly/blob/master/folly/Synchronized.h)

我最近看了 Folly 库，发现了一些有趣的东西。考虑以下示例：

```
#include <iostream>

struct Lock {
    void lock() {
        std::cout << "Locking" << std::endl;
    }
    void unlock() {
        std::cout << "Unlocking" << std::endl;
    }
};

template <class T, class Mutex = Lock >
struct Synchronized {
    struct LockedPtr {
        explicit LockedPtr(Synchronized* parent) : p(parent) {
            p->m.lock();
        }

        ~LockedPtr() {
            p->m.unlock();
        }

        T* operator->() {
            std::cout << "second" << std::endl;
            return &p->t;
        }

    private:
        Synchronized* p;
    };

    LockedPtr operator->() {
        std::cout << "first" << std::endl;
        return LockedPtr(this);
    }

private:
    T t;
    mutable Mutex m;
};

struct Foo {
    void a() {
        std::cout << "a" << std::endl;
    }
};

int main(int argc, const char *argv[])
{
    Synchronized<Foo> foo;
    foo->a();

    return 0;
} 
```

输出是：

```
first
Locking
second
a
Unlocking 
```

我的问题是：为什么这段代码有效？这种模式有名字吗？

-> 操作符被调用了两次，但它只写了一次。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T08:17:07.073

因为这就是标准所说的：

### 13.5.6 类成员访问 [over.ref]

> 1)`operator->`应该是一个不带参数的非静态成员函数。**它使用一个表达式**来实现类成员访问，**如果** **存在并且如果运算符被重载决策机制（13.3）选择为最佳匹配函数，则表达式****被解释为****类型****的类对象。**`-> postfix-expression -> id-expression` **`x->m``(x.operator->())->m``x``T``T::operator->()`**

（强调我的）

在您的情况下，`x`is`foo`和`m`is `a()`，现在，`Synchronized`重载`operator->`，`foo->a()`等效于：

```
(foo.operator->())->a(); 
```

`foo.operator->()`是你在类中的重载`Synchronized`，它返回一个`LockedPtr`，然后`LockedPtr`调用它自己的`operator->`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:33:34.390

问问自己这个问题：它还能如何表现？

请记住，重载`operator->`的目的是让智能指针类可以使用与原始指针相同的语法。也就是说，如果您有：

```
struct S
{
    T m;
}; 
```

并且您有一个指向 的指针`p`，`S`然后无论是 an类型还是某种类型，都可以`S::m`通过 via访问。`p->m``p``S*``pointer_class<S>`

`->`直接使用和调用之间也有区别`operator->`：

```
pointer_class<S> pointerObj;
S* p = pointerObj.operator->(); 
```

请注意，如果使用重载`->`不会自动降低额外级别，那`p->m`可能意味着什么？怎么可能使用过载？

# excel - Excel VBA - 保存前运行宏

> ID：12365417
> 
> 赞同：10
> 
> 时间：2012-09-11T08:11:53.197
> 
> 标签：excel, vba

在保存文档之前，我一直在寻找如何调用我的宏。我找到了这个，但是当我将代码放入其中时，它什么也没做。所以我想我错过了一些东西。

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean) 

Set shtVO = Sheets("Voice orders")
endRowVO = shtVO.Range("E" & Rows.Count).End(xlUp).Row

For Row = 11 To endRowVO
    If IsEmpty(shtVO.Cells(Row, 23).Value) = False Then
        If shtVO.Cells(Row, 3).Value <> shtVO.Cells(Row, 23) Then
            If shtVO.Cells(Row, 1).Value Like "*MIG*" Then
            Else
                shtVO.Cells(Row, 1).Value = shtVO.Cells(Row, 1).Value + "MIG"
            End If
        End If
    End If
Next Row

End Sub 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-11T08:33:11.930

将您的代码放在`ThisWorkbook`模块中

![把你的代码放在这里](../Images/3ca254401169653721dbfa3cdd739985.png)

# android - 通过互联网通信 IP 的 Android 电话服务器客户端

> ID：12365419
> 
> 赞同：0
> 
> 时间：2012-09-11T08:11:53.680
> 
> 标签：android, streaming, client-server, ip-address, two-way

我开始开发 Android 应用程序，我将在其中使用两部手机相互通信。我计划通过互联网进行通信，也许如果一部手机在 IP 地址、服务器和其他手机上发布某些数据会打开该页面（客户端）。问题是我在任何电话上都没有固定IP地址，我可以通过任何其他方式解决这个问题还是我需要考虑不同的通信方式？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:27:22.340

是的，您不能通过互联网直接连接两部手机，但您可以为此使用中间件。主要思想是第一个设备将消息发送到此中间件（服务器），第二个设备定期尝试拉取它们。

为此目的有许多现成的解决方案，解决方案的选择取决于您的情况：您要传输的数据类型（文本、二进制、多媒体）、速度等。例如，您可以尝试发送短信使用[XMPP](http://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol)协议或者可能是[C2DM](https://developers.google.com/android/c2dm/)框架就足够了。

最合适的解决方案是使用现有协议或技术之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T16:41:43.237

If your phones are close together, you can try an ah hoc WiFi network. It seems like directly addressing one phone from another using the cellular Internet is about never possible. It could be possible sometimes for some providers if the two phones are in the same cell perhaps, but you can not rely on it.

# c# - 向表中插入数据后如何刷新 GridView 控件？

> ID：12365425
> 
> 赞同：0
> 
> 时间：2012-09-11T08:12:26.817
> 
> 标签：c#, winforms, gridview

我试图`GridView`在插入数据后刷新 a 。我尝试了很多选择，但没有一个对我有用。我该如何解决这个问题？

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using ScanAction;
using System.Data.SqlClient;

namespace DigitalJournalDNAIsolation
{
    public partial class Form1 : Form
    {
        private List<Scan> scanList;

        private SqlConnection connection;

        public Form1()
        {
            InitializeComponent();

            scanList = new List<Scan>();
        }

        private void openDatabase()
        {
            connection = new SqlConnection();
            connection.ConnectionString = @"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\prp\Documents\Visual Studio 2010\Projects\DigitalJournalDNAIsolation\DigitalJournalDNAIsolation\Database1.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
            connection.Open();
        }

        private void closeDatabase()
        {
            connection.Close();
        }

        //Add items to the list
        private void textBoxBarCode_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (e.KeyChar == (char)13)
            {
                SaveToDataBase();

                textBoxBarCode.Clear();
            }

        }

        //What machine has bees selected by the user
        public string machineSelected(string machine)
        {
            bool mmpp1 = checkBoxMMPP1.Checked;
            bool mmpp2 = checkBoxMMPP2.Checked;

            if (mmpp1 == true && mmpp2 == false)
            {
                return machine = "MMPP-1";
            }

            if (mmpp1 == false && mmpp2 == true)
            {
                return machine = "MMPP-2";
            }

            if (mmpp1 == true && mmpp2 == true)
            {
                //MessageBox.Show("Select either MMPP-1 or MMPP-2", "Please select a machine");
                return machine = "Multiple machines are selected";
            }
            else
            {
                //MessageBox.Show("Select either MMPP-1 or MMPP-2", "Please select a machine");
                return machine = "No machine selected";
            }

        }
        public string machine { get; set; }

        public string bufferStraat(string straat)
        {
            bool manual = checkBoxManual.Checked;
            bool janus = checkBoxJanus.Checked;

            if (manual == true && janus == false)
            {
                return straat = "Manual";
            }

            if (manual == false && janus == true)
            {
                return straat = "Janus";
            }

            if (manual == true && janus == true)
            {
                //MessageBox.Show("Select either Manual or Janus", "Please select a machine");
                return straat = "Multiple machines are selected";
            }
            else
            {
                //MessageBox.Show("Select either Manual or Janus", "Please select a machine");
                return straat = "No machine is selected";
            }
        }

        public string straat { get; set; }

        public void SaveToDataBase()
        {
            string date = DateTime.Now.ToLongDateString();

            openDatabase();

            SqlCommand command = new SqlCommand();
            command.Connection = connection;
            command.CommandType = CommandType.Text;
            command.CommandText = "INSERT INTO Table1 (box,username,comment,machine,buffers,date) VALUES (@box,@username,@comment,@machine,@buffers,@date)";

            command.Parameters.Add("@box", SqlDbType.VarChar).Value = textBoxBarCode.Text;
            command.Parameters.Add("@username", SqlDbType.VarChar).Value = textBoxUser.Text;
            command.Parameters.Add("@comment", SqlDbType.VarChar).Value = textBoxComment.Text;
            command.Parameters.Add("@machine", SqlDbType.VarChar).Value = machineSelected(machine);
            command.Parameters.Add("@buffers", SqlDbType.VarChar).Value = bufferStraat(straat);
            command.Parameters.Add("@date", SqlDbType.VarChar).Value = date;

            command.ExecuteNonQuery();

            closeDatabase();
        }

        public void refreshGrid1()
        {
            openDatabase();

            SqlCommand readcmd = new SqlCommand();
            readcmd.Connection = connection;
            readcmd.CommandType = CommandType.Text;
            readcmd.CommandText = "SELECT * FROM Table1";

            SqlDataReader reader = null;

            reader = readcmd.ExecuteReader();

            closeDatabase();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            // TODO: This line of code loads data into the 'database1DataSet.Table1' table. You can move, or remove it, as needed.
            this.table1TableAdapter.Fill(this.database1DataSet.Table1);
        }

        private void infoToolStripMenuItem_Click(object sender, EventArgs e)
        {
            using (AboutBox1 about = new AboutBox1())
            {
                about.ShowDialog();
            }
        }

        private void bestandToolStripMenuItem_Click(object sender, EventArgs e)
        {
            this.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:19:12.990

尝试这样做：-

1）。创建一个绑定源并将此对象的数据源设置为 DataTable。

2）。将 DataGrid 的数据源设置为绑定源的数据源。

现在，当您提交对 DataTable 的更改时，它们将自动反映在您的 GridView 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:17:49.040

使用 gridView 的 DataBind 方法

```
 public void refreshGrid1()
    {
        openDatabase();

        SqlCommand readcmd = new SqlCommand();
        readcmd.Connection = connection;
        readcmd.CommandType = CommandType.Text;
        readcmd.CommandText = "SELECT * FROM Table1";

        SqlDataReader reader = null;

        reader = readcmd.ExecuteReader();

        closeDatabase();

        gridView.DataBind();

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T12:00:34.133

这就是我解决问题的方法：

```
 private void openAllFromDatabase()
    {

        openConnection();

        string query = "select * from my_Table order by date desc";

        DataSet dset = new DataSet();
        SqlDataAdapter adapter = new SqlDataAdapter(query, connection);

        SqlCommandBuilder cb = new SqlCommandBuilder(adapter);

        adapter.Fill(dset, "my_Table");

        dataGridView1.DataSource = dset;
        dataGridView1.DataMember = "my_table";

        adapter.Update(dset, "my_Table");

        closeConnection();

    } 
```

# performance - 不关闭推进连接的性能影响

> ID：12365427
> 
> 赞同：0
> 
> 时间：2012-09-11T08:12:35.763
> 
> 标签：performance, symfony1, symfony-1.4, propel, database-performance

我正在为一个项目使用 symfony 1.4/propel 1.4，该项目是由其他开发人员早些时候制作的。在该项目中，使用以下代码进行推进连接

```
$con = Propel::getConnection(UsersPeer::DATABASE_NAME, Propel::CONNECTION_WRITE); 
```

但是它永远不会关闭连接使用

```
Propel::close(); 
```

我刚刚搜索到有 1500 多个此类打开连接的事件，我猜它们都没有关闭连接。

我知道关闭连接总是很好的做法，但在目前的情况下，我似乎无法解决所有问题，因为修复所有事件肯定需要很多时间，可能需要一整天。所以现在我很困惑是否应该解决这个问题。如果我让它这样，它会对性能产生任何影响吗？

**编辑：仅供参考**

这个问题的第 2 部分[Use of close database connection in php](https://stackoverflow.com/questions/12366539/use-of-closing-database-connection-in-php/12366613)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:33:39.460

如果有的话，显式关闭连接可能会*损害*性能。PDO 通常缓存从一个请求到下一个请求的连接，合理假设下一个请求将使用相同的凭据。

编辑：阅读[文档](http://php.net/manual/en/pdo.connections.php)，在我看来 PDO::ATTR_PERSISTENT 连接被缓存，无论尝试关闭它们，所以你最好不要打扰。

# jboss - 由于 BridgeRepositorySelector，JBoss AS 7.1.1 无法启动

> ID：12365430
> 
> 赞同：1
> 
> 时间：2012-09-11T08:12:43.993
> 
> 标签：jboss, log4j, jboss7.x

我的 JBoss 7.1.1 AS 独立安装无法启动。异常消息是这样的：

```
===============================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: C:\jboss-as-7.1.1.Final

  JAVA: C:\Program Files\Java\jdk1.7.0_02\bin\java

  JAVA_OPTS: -XX:+TieredCompilation -Dprogram.name=standalone.bat -Xms64M -Xmx51
2M -XX:MaxPermSize=256M -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.se
rver.gcInterval=3600000 -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.war
ning=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djboss.server.default.c
onfig=standalone.xml

===============================================================================

11:02:35,115 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
11:02:35,239 WARN  [org.jboss.modules] Failed to define class org.jboss.logmanag
er.log4j.BridgeRepositorySelector in Module "org.jboss.logmanager.log4j:main" fr
om local module loader @53c8b26e (roots: C:\jboss-as-7.1.1.Final\modules): org.j
boss.modules.ModuleLoadError: Error loading module from C:\jboss-as-7.1.1.Final\
modules\org\apache\log4j\main\module.xml
        at org.jboss.modules.ModuleLoadException.toError(ModuleLoadException.jav
a:78)
        at org.jboss.modules.Module.getPathsUnchecked(Module.java:1166)
        at org.jboss.modules.Module.loadModuleClass(Module.java:512)
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:
182)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(Con
currentClassLoader.java:468)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(Concu
rrentClassLoader.java:456)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentCl
assLoader.java:398)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoad
er.java:120)
        at java.lang.ClassLoader.defineClass1(Native Method) [rt.jar:1.7.0_02]
        at java.lang.ClassLoader.defineClass(ClassLoader.java:791) [rt.jar:1.7.0
_02]
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:14
2) [rt.jar:1.7.0_02]
        at org.jboss.modules.ModuleClassLoader.doDefineOrLoadClass(ModuleClassLo
ader.java:327)
        at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.jav
a:391)
        at org.jboss.modules.ModuleClassLoader.loadClassLocal(ModuleClassLoader.
java:243)
        at org.jboss.modules.ModuleClassLoader$1.loadClassLocal(ModuleClassLoade
r.java:73)
        at org.jboss.modules.Module.loadModuleClass(Module.java:517)
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:
182)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(Con
currentClassLoader.java:468)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(Concu
rrentClassLoader.java:456)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentCl
assLoader.java:398)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoad
er.java:120)
        at org.jboss.as.server.Main.main(Main.java:73) [jboss-as-server-7.1.1.Fi
nal.jar:7.1.1.Final]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1
.7.0_02]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:57) [rt.jar:1.7.0_02]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:43) [rt.jar:1.7.0_02]
        at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_02]
        at org.jboss.modules.Module.run(Module.java:260)
        at org.jboss.modules.Main.main(Main.java:291)
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[1,1]
Message: Content is not allowed in prolog.
        at com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.next(XMLS
treamReaderImpl.java:592) [rt.jar:1.7.0_02]
        at com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.nextTag(X
MLStreamReaderImpl.java:1234) [rt.jar:1.7.0_02]
        at org.jboss.modules.ModuleXmlParser.parseDocument(ModuleXmlParser.java:
539)
        at org.jboss.modules.ModuleXmlParser.parseModuleXml(ModuleXmlParser.java
:287)
        at org.jboss.modules.ModuleXmlParser.parseModuleXml(ModuleXmlParser.java
:242)
        at org.jboss.modules.LocalModuleLoader.parseModuleInfoFile(LocalModuleLo
ader.java:138)
        at org.jboss.modules.LocalModuleLoader.findModule(LocalModuleLoader.java
:122)
        at org.jboss.modules.ModuleLoader.loadModuleLocal(ModuleLoader.java:275)

        at org.jboss.modules.ModuleLoader.preloadModule(ModuleLoader.java:222)
        at org.jboss.modules.LocalModuleLoader.preloadModule(LocalModuleLoader.j
ava:94)
        at org.jboss.modules.Module.addPaths(Module.java:841)
        at org.jboss.modules.Module.link(Module.java:1181)
        at org.jboss.modules.Module.getPaths(Module.java:1153)
        at org.jboss.modules.Module.getPathsUnchecked(Module.java:1164)
        ... 26 more

Exception in thread "main" java.lang.NoClassDefFoundError: org/jboss/logmanager/
log4j/BridgeRepositorySelector
        at org.jboss.as.server.Main.main(Main.java:73)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.jboss.modules.Module.run(Module.java:260)
        at org.jboss.modules.Main.main(Main.java:291)
Caused by: java.lang.ClassNotFoundException: org.jboss.logmanager.log4j.BridgeRe
positorySelector from [Module "org.jboss.as.server:main" from local module loade
r @53c8b26e (roots: C:\jboss-as-7.1.1.Final\modules)]
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:
190)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(Con
currentClassLoader.java:468)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(Concu
rrentClassLoader.java:456)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentCl
assLoader.java:398)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoad
er.java:120)
        ... 7 more 
```

在我的安装文件夹 C:\jboss-as-7.1.1.Final\modules\org\jboss\logmanager\log4j\main 中有包含类 BridgeRepositorySelector 的 jboss-logmanager-log4j-1.0.0.GA.jar。不知道为什么以及在哪里出错。

任何人都知道我应该怎么做才能解决这个问题？而且，有谁知道可能导致问题的原因？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:34:40.400

这是部分答案，在某种程度上解决了问题。

我已经下载了 JBoss7.1.1 的新安装并用`modules`新文件夹替换了我的旧文件夹。它适用于某些扩展，我只需要找到到目前为止添加到我之前安装的所有模块并将它们添加到模块中，以便一切都可以再次工作。但是还是不知道是什么原因导致的问题...

# php - 指定限制为 NULL 的 codeigniter 在最新的 CI 版本 2.1.2 中不起作用

> ID：12365432
> 
> 赞同：2
> 
> 时间：2012-09-11T08:12:58.057
> 
> 标签：php, codeigniter, limit, codeigniter-2

我在我的 Codeigniter 模型之一中有以下**get_authors_list函数**

```
function get_authors_list($limit,$offset){
    $data = array();

    $this->db->select('*')->from('authors')->limit($limit,$offset)->order_by('id','desc');

    $query = $this->db->get();         
    if ($query-> num_rows() >  0){
      $data = $query->result_array();
    }
    return $data;
    $q->free_result();
  } 
```

在升级到 Codeigniter 2.1.2 之前，我使用从我的控制器调用此方法作为

```
$data['authors'] = $this->author_model->get_authors_list(NULL, 0) 
```

并且它按预期工作，但是在升级到 codeigniter 版本 2.1.2 后它不起作用，为了让它工作我必须在我的函数调用中指定如下限制

```
$data['authors'] = $this->author_model->get_authors_list(50, 0) 
```

那是指定对 NULL 的限制不起作用，为什么？我在这里做错什么了吗？我正确地遵循了 Codeigniter 的升级说明，但这是我没想到的一些副作用。

欢迎任何解释。谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T08:30:14.500

是的，它不起作用，因为在他们文件中[最新版本的 CodeIgniter中，他们对](https://github.com/EllisLab/CodeIgniter/tree/2.1-stable)*早期*版本的函数中的一行**进行了更改：**[`System/Database/DB_active_rec.php`](https://github.com/EllisLab/CodeIgniter/blob/2.1-stable/system/database/DB_active_rec.php)**`limit`**

 ***```
$this->ar_limit = $value; 
```

就是现在，

```
$this->ar_limit = (int) $value; 
```

因此，`(int) null`正在转换为`0`，并且，**您没有得到任何结果**。

所以我认为你必须`limit`完全删除呼叫。为什么你仍然需要设置它`null`？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T08:30:11.607

它不再起作用了。源代码发生了变化，现在将忽略`NULL`价值。请参阅此[提交](https://github.com/EllisLab/CodeIgniter/commit/b0eae5f81a4cb92911bb215ad814ae5caef4f61d)。***

# c# - 为 Java、C# 和 Objective-C 生成模型类文件代码

> ID：12365435
> 
> 赞同：5
> 
> 时间：2012-09-11T08:13:15.333
> 
> 标签：c#, java, objective-c, code-generation, mdd

我们在 Android、iPhone 和 Windows Phone 上有一个带有服务器（Java + Spring）和客户端的项目。所有交互都将通过 JSON 格式实现。我们只想描述我们的协议一次，然后通过此描述为所有客户端生成 Java、C# 和 Obj-C 类。我们正在寻找一种工具，比如 Google ProtoBuf 编译器（protoc）。但是 ProtoBuf 生成的代码过于复杂，在这种情况下对我们来说毫无用处，因为我们想使用 JSON 而不是二进制序列化。是否存在任何现成的解决方案？

# arrays - 在 perl 中生成数组集

> ID：12365438
> 
> 赞同：-3
> 
> 时间：2012-09-11T08:13:23.087
> 
> 标签：arrays, perl, set, perl-data-structures

给定 perl 脚本在“E”处剪切输入序列并跳过@nobreak 中提到的“E”的那些特定位置，并生成一个片段数组作为输出。但是我想要一个脚本，它为每个已跳过的位置在输出中生成一组这样的数组，并考虑到@nobreak 的所有位置。假设第 1 组包含在“E”37 处跳过后产生的片段，第 2 组在“E”45 处跳过后产生，依此类推。下面提到的我编写的脚本无法正常工作。我想在输出中生成 4 个不同的数组，一次占用一个 @nobreak 的位置。请帮忙！

```
my $s = 'MALWMRLLPLLALLALWGPDPAAAFVNQHLCGSHLVEALYLVCGERGFFYTPKTRREAEDLQVGQVELGGGPGAGSLQPLALEGSLQKRGIVEQCCTSICSLYQLENYCN';

print "Results of 1-Missed Cleavage:\n\n";

my @nobreak = (37, 45, 57, 59);
{
    @nobreak = map { $_ - 1 } @nobreak;

    foreach (@nobreak) {

        substr($s, $_, 1) = "\0";
    } 
    my @a   = split /E(?!P)/, $s;
    $_      =~ s/\0/E/g foreach (@a);
    $result = join "E,", @a; 
    @final  = split /,/, $result;
    print "@final\n";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:47:38.750

要在每个 'E' 处拆分字符串而不在过程中使用它，请使用后视：

```
my @final = split /(?<=E)/, $str; 
```

为了更好地控制要拆分的“E”（您未指定），将对正则表达式进行更改。

如果需要变量后视，可以使用`\K`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:43:20.157

循环@nobreak？

```
my $s = 'MALWMRLLPLLALLALWGPDPAAAFVNQHLCGSHLVEALYLVCGERGFFYTPKTRREAEDLQVGQVELGGGPGAGSLQPLALEGSLQKRGIVEQCCTSICSLYQLENYCN';
print "Results of 1-Missed Cleavage:\n\n";
my @nobreak = (37,45,57,59);
for my $nobreak (@nobreak) {
    substr($s, $nobreak-1, 1) = "\0";
    my @a = split(/E(?!P)/, $s);
    substr($s, $nobreak-1, 1) = 'E';
    $_ =~ s/\0/E/g foreach (@a);
    $result = join ("E,", @a); 
    @final = split(/,/, $result);
    print "@final\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:06:01.513

看起来您想在所有字符*之后*`E`拆分字符串，但*不是在*任何`P`字符之前

这段代码会做你想做的事。它的工作原理是将`E`at 每个偏移量更改`@nobreak`为 an `e`（比`"\0"`调试要好得多）并拆分`/(?<=E)(?!P)/`- 即在 an 之后`E`但不在 a 之前`P`。`e`改回`E`之后使用`tr/e/E/`

```
use strict;
use warnings;

my $s = 'MALWMRLLPLLALLALWGPDPAAAFVNQHLCGSHLVEALYLVCGERGFFYTPKTRREAEDLQVGQVELGGGPGAGSLQPLALEGSLQKRGIVEQCCTSICSLYQLENYCN';

print "Results of 1-Missed Cleavage:\n\n";

my @nobreak = (37, 45, 57, 59);

for my $index (@nobreak) {
  my $ss = $s;
  substr($ss, $index-1, 1) = 'e';
  my @final = split /(?<=E)(?!P)/, $ss;
  tr/e/E/ for @final;
  print "$_\n" for @final;
  print "\n";
} 
```

**输出**

```
Results of 1-Missed Cleavage:

MALWMRLLPLLALLALWGPDPAAAFVNQHLCGSHLVEALYLVCGE
RGFFYTPKTRRE
AE
DLQVGQVE
LGGGPGAGSLQPLALE
GSLQKRGIVE
QCCTSICSLYQLE
NYCN

MALWMRLLPLLALLALWGPDPAAAFVNQHLCGSHLVE
ALYLVCGERGFFYTPKTRRE
AE
DLQVGQVE
LGGGPGAGSLQPLALE
GSLQKRGIVE
QCCTSICSLYQLE
NYCN

MALWMRLLPLLALLALWGPDPAAAFVNQHLCGSHLVE
ALYLVCGE
RGFFYTPKTRREAE
DLQVGQVE
LGGGPGAGSLQPLALE
GSLQKRGIVE
QCCTSICSLYQLE
NYCN

MALWMRLLPLLALLALWGPDPAAAFVNQHLCGSHLVE
ALYLVCGE
RGFFYTPKTRRE
AEDLQVGQVE
LGGGPGAGSLQPLALE
GSLQKRGIVE
QCCTSICSLYQLE
NYCN 
```

# c# - 使用 jquery 日历获取日期并发送到 mvc

> ID：12365443
> 
> 赞同：0
> 
> 时间：2012-09-11T08:14:02.523
> 
> 标签：c#, ajax, json, asp.net-mvc-3

我认为日期时间是这样的

```
 @Html.EditorFor(m => m.StartDate)
 <input type="button" id="pickDate" value="Send date" /> 
```

Jquery datepicker 已实现，我在这些共享文件夹中使用 DateTime.cshtml

```
@model DateTime
@Html.TextBox("", Model.ToString("d|M|yyyy"),
   new { @class = "date" })

$('#pickDate').click(function () {
    $.ajax({
        type: 'POST',
            contentType: 'application/json; charset=utf-8',

            url: '/Home/DateManipulation',
            success: function (result) { alert('Success');},
            error: function () { alert("error"); }
   });
});

[HttpPost]
public JsonResult DateManipulation()
{
  DateTime date = DateTime.ParseExact(Request.Params["MyDate"], "d|M|yyyy", CultureInfo.InvariantCulture);

   var data = //process some other manipulation with data      
   return Json(data);
} 
```

问题是：如何使用上面的 js 脚本发送日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:22:01.317

检索`StartDate`输入字段的值并将其作为 a 传递`data`给 ajax 请求。

```
$('#pickDate').click(function () {
    var date = $('input[name="StartDate"]').val();

    $.ajax({
        type: 'POST',
            contentType: 'application/json; charset=utf-8',
            data: {date: date},
            url: '/Home/DateManipulation',
            success: function (result) { alert('Success');},
            error: function () { alert("error"); }
   });
}); 
```

在服务器端，您可以为操作方法指定相应的参数：

```
[HttpPost]
public JsonResult DateManipulation(string date)
{
    DateTime date = DateTime.ParseExact(date, "d|M|yyyy", CultureInfo.InvariantCulture);

    var data = //process some other manipulation with data      
    return Json(data);
} 
```

# javascript - Facebook 如何根据用户屏幕自动显示正确尺寸的图像？

> ID：12365445
> 
> 赞同：13
> 
> 时间：2012-09-11T08:14:07.360
> 
> 标签：javascript, css, facebook, image

我注意到，当显示相册中的照片时，网络上的 Facebook 会巧妙地检测您的屏幕尺寸并选择正确的缩略图照片，然后为 img 元素选择正确的宽度和高度。

我使用 chrome 开发者工具查看 Facebook 中图像的自然显示宽度和高度。

这是在 20.41" x 12.8" 显示器上以 1600x1200 分辨率查看的照片示例

[![](../Images/c5099a1d4b49d722425a7580d0eeb883.png)](https://dzwonsemrish7.cloudfront.net/items/3o2r3T3Y0d0b123n3M47/big.png?v=deeddda2)

请注意它如何提到图像 src 是 _o.jpg 后缀，自然尺寸是 1529x2048，而当前图像元素尺寸是 432 x 578

这是在 14 英寸 macbook air 上以 1440 x 900 分辨率显示的相同图像。

[![](../Images/082d70c3cef675f67c2e972deef1c442.png)](https://dzwonsemrish7.cloudfront.net/items/3f2b322F271g3R351c3a/small.png?v=22d1ecfb)

这个使用了你看不清楚的后缀 _n，但是你可以看到自然尺寸是 717 x 960 而当前图像元素尺寸是 538 x 720

我发现的原因是学习相同的策略，但使用它来显示标准 png 或 jpeg 格式的艺术品。

有多少策略是使用 css 实现的？javascript多少钱？

我的问题是：

1.  Facebook 如何进行这种检测？
2.  facebook 为每张原始照片创建多少个缩略图？
3.  Facebook 如何根据屏幕大小确定 img 元素的正确宽度和高度？

我相信 Facebook 最多允许[2048×2048 分辨率。](http://www.quora.com/Facebook-Photos/Does-Facebook-throw-away-full-size-original-photos)

除此之外，我无法找到更多信息。

[这个问题也在 Quora 中交叉发布，以获得更广泛的受众。](http://www.quora.com/Facebook-Photos/How-does-Facebook-auto-display-the-image-in-the-right-size-depending-on-user-screens)

**更新：** 我使用 cakephp 作为后端和前端我依赖 jquery 和 html5 约定

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T03:38:20.813

当您拉伸窗口并因此更改“剧院”的大小时，图像会更改大小。由此我只能假设“剧院”设置为特定大小，并且图像设置为具有最大宽度或最大高度，因此它会随着外部元素（剧院）的大小而扩展或收缩. 这部分是用 CSS 完成的。

我认为屏幕尺寸检测与 DOMDimensions ( [http://pastebin.com/Biz9ntMj](http://pastebin.com/Biz9ntMj) ) 和 DimensionTracking ( [http://pastebin.com/Ys72APyL](http://pastebin.com/Ys72APyL) ) 函数有关。此外，任何点击都会被“primer”（[https://gist.github.com/376039](https://gist.github.com/376039)）脚本拦截，然后通过 AsyncRequest（如果需要）路由操作，然后根据 JOSN 响应做出反应。我的屏幕尺寸只显示链接和最终图像（ _n.jpg ）的一种尺寸，但我假设好像是由 javascript 处理的，那么这就是它如何处理尺寸，否则（如果 javascript 关闭或一些东西）它只会回到他们对一个尺寸适合所有 720 x 960 的最佳猜测，然后使用上面的 css 来强制调整大小。

**编辑**

关于 CSS...
使用 CSS，您可以为包含图像的块元素设置高度（特定或相对于屏幕大小，无论您喜欢什么），然后将该图像设置为具有`max-height/width`此高度/宽度，而不是定义的高度/宽度。这样，图像将保持其纵横比，但仍会扩展和收缩到容器内允许的大小。可以在这里看到一个例子：http: [//jsfiddle.net/tV6gG](http://jsfiddle.net/tV6gG)

在 javascript 上...
当在页面上单击任何内容（并且 javascript 正在运行）时，它会通过上面提到的“primer”脚本被捕获（可以在这里看到完整版本 - [http://pastebin.com/BwhKJ14d](http://pastebin.com/BwhKJ14d)） - （有关这方面的更多信息，请参阅[http://www.facebook.com/video/video.php?v=596368660334&ref=mf](http://www.facebook.com/video/video.php?v=596368660334&ref=mf)）。该脚本然后检查`rel`点击事件的属性（参见第 28 行），然后根据该属性决定要“引导加载”的内容（参见第 52 行）。从这里它加载了一个处理所有图像类型的东西的功能（ [http://pastebin.com/eGgtz4dT ）的野兽。](http://pastebin.com/eGgtz4dT)

在这个脚本中，有几个函数看起来可能与图像大小有关，其中一个是 getCurrentImageServerSizeDimensions（参见第 218 行）。还有其他关于舞台尺寸的东西，但我猜一个很重要。据我所知，该脚本随后将编译大量数据，并且它们对服务器的调用与使用常规 href 不同。

来自源的未转义href：

```
http://www.facebook.com/photo.phpfbid=10152228292295554&
set=t.516587895&type=3&src=http://sphotos-g.ak.fbcdn.net/hphotos-ak-
snc7/374008_10152228292295554_643067794_n.jpg&size=720,960&theater 
```

发送到 pagelet 的未转义实际请求（有关 pagelet 的更多信息，请参见上面有关 BigPipe 的视频）制造商：

```
http://www.facebook.com/ajax/pagelet/generic.php/PhotoViewerInitPagelet?
ajaxpipe=1&ajaxpipe_token=AXhGMa1SEXnChIug&no_script_path=1&data=
{"fbid":"10152228292295554","set":"t.516587895","type":"3",
"size":"720,960","theater":null,"firstLoad":true,"ssid":1354797924833}
&__user=6462456246&__a=1&__adt=2 
```

虽然它们确实包含大部分相同的信息，但您可以清楚地看到请求正在被捕获，因此（如果需要）可以通过它发送任何更正的信息（图像大小）。

关于前面的脚本...... DOMDimensions 脚本是一组函数，
老实说，函数标题（、、、和）很好地解释了`getElementDimensions`这些函数。有关这些单独功能实际作用的更多信息，我建议您查看它们并检查您没有获得的任何基本 javascript 功能。它看起来并不太复杂。 DimensionTracking 脚本似乎只是调用并保存页面生成的数据。 如果似乎每 100 毫秒（参见第 17 行）、窗口调整大小（参见第 18 行）或窗口焦点（参见第 18 行）重新评估尺寸。 `getViewportDimensions``getViewportWithoutScrollbarDimensions``getDocumentDimensions``measureElementBox`
`getViewportDimensions()``/ajax/dimension_context.php`

总而言之，我认为你可以通过使用上面的 CSS 方法来做重要的事情（减去寻找实际不同的图像的事情），以使大量图像适合正确的舞台尺寸。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T00:09:29.617

很多网站都在做这种事情。我不会过多地关注 Facebook 是如何完成它的，而是关注你如何完成同样的事情。

实现类似功能的一种方法是检测用户代理的屏幕尺寸，您可以通过[检查 Screen 对象](http://www.javascriptkit.com/howto/newtech3.shtml)在 javascript 中轻松完成。之后，您的 javascript 代码可以更新页面上的图像链接，以指向已由您的 CMS 或框架生成的适当大小的图像。

在确定图像应该显示的大小方面，这是一个简单的数学计算。通常，模板具有用于显示图像的边界框大小，因此只需将图像按比例缩小，使其宽度和高度适合该框。

但是这个讨论提出了一个更大的问题：如果你正在开发一个网站，你可能会使用一个 CMS 或者至少是某种开发框架。您使用的任何平台很可能都有一个插件或模块等，并且已经内置了图像缓存和调整大小功能。您可能应该描述您正在使用的平台，以便人们可以更好地解决您的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T09:29:26.640

CSS 可以使用[@Media 选择器](http://www.w3.org/TR/css3-mediaqueries/)来确定一般宽度/高度。您将无法使用此方法确定确切的宽度/高度。这将使您大致了解可能要显示的元素。从此时起，您可以使用相对值来调整 img 元素的大小。要确定确切的屏幕尺寸，您必须使用 Javascript。在 JQuery 中，您可以访问[文档的宽度和高度](http://api.jquery.com/width/)。

Facebook 可能会根据其媒体选择器的最大尺寸创建缩略图。当 img 元素的 size 调整大小时，浏览器会自动调整后面的图像大小。如果您查看 facebook 时间线中的图像，您会注意到“_n.jpg”后缀。当您将其更改为“_a.jpg”时，您将获得该图像的较小版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T17:30:43.547

**回答您的问题 1：**

Facebook 图像调整大小相对较慢。原因是（这是我的猜测），他们使用了一些 javascript/jquery 调整大小。你有一堆这样的脚本在线。

现在这很糟糕（如果图像很大，这很慢）。解决这个问题的方法是使用谷歌开发者的 Closure 工具。我花了很多时间（在我需要做你需要的几个项目上）来解决这个问题。关闭工具（或 apache mod_pagespeed），从图像中消除不必要的像素，使其变小（以 kb/mb 为单位）。**去年有一个 Google IO 会议，就是在讨论这个问题。**

这是[与该会话的链接。](http://goo.rs/4CFhsa)

**回答你的问题2：**

我认为他们只创建了两个缩略图。

**回答您的问题 3：**

在**第 1 个答案**中，我写道他们为此使用了一些 javascript/jquery 代码。也许这是一些逻辑：

```
on window resize { 
  make div proportional resize (percent) -> 
  this div find image
  image width  height is div width height - offset
} 
```

我很确定进行此调整大小的最佳方法不是制作数百万个缩略图，而是优化原始图像，消除其中的像素，并使用一些 jquery/javascript 插件来调整大小。

# database - 将一个mysql数据库导入另一个数据库，结构麻烦

> ID：12365448
> 
> 赞同：0
> 
> 时间：2012-09-11T08:14:18.313
> 
> 标签：database, import, export, mysqldump

关于两个不同的数据库，我遇到了一些麻烦。

我有一个新网站，我有一个旧网站。该网站由两个不同的人完成，我尝试将旧数据导入新数据库，但这两个数据库的结构之间没有对应关系。是否有软件可以帮助在两个数据库之间建立对应关系（来自 mysql 的文件约为 120Mo）。

# java - N * N矩阵，计算唯一方阵的数量..？

> ID：12365450
> 
> 赞同：0
> 
> 时间：2012-09-11T08:14:21.713
> 
> 标签：java, algorithm, matrix, data-structures

我有一个 N*N 矩阵，我需要找出该较大矩阵中所有可能的唯一方阵。如何实现它又快又省内存呢？

面临的问题：实际上创建的矩阵实际上是 N->[2,50,000..3,00,000] 每个元素实际上被标记为 bit[On/Off] 或 [0/1]，我需要得到所有那些大于某个限制的唯一方阵（比如20 ie; N> = 20），并且方阵的所有元素都应该是1，那么只有矩阵用于进一步处理，所以基本上我需要找出这样的矩阵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:02:37.133

算法很简单：

1.  计算*方阵*的数量
2.  在这个数字上使用循环
3.  为每个矩阵计算`i_min`, `j_min`, `i_max`, 。`j_max`这将只是一个循环这个矩阵来寻找具有特定大小的矩阵。
4.  将数据范围`i_min`, `j_min`, `i_max`,复制`j_max`到新矩阵。

只是一个提示：方阵的数量*取决于*大矩阵大小

*   1x1 -> **1** * (1x1)
*   2x2 -> **4** * (1x1) + **1** * (2x2)
*   3x3 -> **9** * (1x1) + **4** * (2x2) + **1** * (3x3)
*   4x4 -> **16** * (1x1) + **9** * (2x2) + **4** * (3x3) + **1** * (4x4)

我希望你能理解这里的**方块**。

注意：这仅包括连续的行/列组合。

# java - 从另一个活动（冰淇淋三明治）返回时，onCreate() 调用了无意义的次数

> ID：12365454
> 
> 赞同：2
> 
> 时间：2012-09-11T08:14:40.757
> 
> 标签：java, android, android-activity, android-4.0-ice-cream-sandwich, oncreate

我有一个 Android 应用程序，它在 android 2.x 上运行良好，但在 Ice Cream Sandwhich 上失败了。

应用程序具有 Mainactivity A，当单击“Setup”按钮时，它会使用 onStartActivityForResult() 启动 SetupActivity B。

通过 SetupActivity，用户可以启动其他活动来设置应用程序设置（网络连接设置、用户界面设置等）。SetupActivity 使用 onStartActivityForResult() 启动其中一些，并将有关更改设置的数据放入 Intent 中，该 Intent 使用 setResult(RESULT_OK,intent); 返回

当 SetupActivity 启动了另一个活动 C（即连接设置）并且 C 已返回时，MainActivity A 被再次创建无意义的数量（即 50 次）（或者它的 onCreate() 被调用了很多次）。这可能是什么原因，我应该如何继续解决这个问题？这个问题只发生在冰淇淋三明治上。

## 代码：

主要活动：

```
//OnClick listeners for all the buttons and text field in the UI
public void onClick(View view) {
    //start SetupActivity
    if (view == (setup_button)){
            Intent intent = new Intent(getApplicationContext(), SetupActivity.class);
            startActivityForResult(intent, SETUP_ACTIVITY);
    }
    ...
 }

public void onActivityResult(int requestCode, int resultCode, Intent data) 
    switch(requestCode) {
        case SETUP_ACTIVITY: //returned from SetupActivity
            //check what settings have changed and update variables accordingly
        ...
    }
} 
```

设置活动：

```
//click handler for "Measurement setup" button
public void measSetupClicked(View v) {
    Intent intent = new Intent(this, MeasurementSetupActivity.class);
    startActivityForResult(intent, MEAS_SETUP);
}

public void onActivityResult(int requestCode, int resultCode, Intent data) {
    Intent intent = new Intent();

    //try-catch omited for brevity
    if(data.hasExtra("MEAS_SETTINGS_CHANGED")) {
       intent.putExtra("MEAS_SETUP_CHANGED"),data.getExtras().getBoolean("MEAS_SETTINGS_CHANGED"));
    }

    setResult(RESULT_OK,intent);   
}

@Override
public void onBackPressed() {
    SetupActivity.this.finish();
}

public void backButtonPressed(View v) {
    SetupActivity.this.finish();
} 
```

# ruby-on-rails-3 - 我如何通过 rake 任务进行身份验证（设计）

> ID：12365455
> 
> 赞同：1
> 
> 时间：2012-09-11T08:14:45.253
> 
> 标签：ruby-on-rails-3, devise, pdf-generation, rake-task

我需要从 rake 任务创建一个 pdf。因此我从模型本身生成pdf。我使用 wicket_pdf 并在网上搜索了很多，如何创建 pdf 文件。在浏览器中 pdf 作品（简单的部分正确;-)）。

我的环境：

*   红宝石 1.9.3
*   导轨 3.2.6
*   wicked_pdf 0.7.9 => 实际版本

到目前为止，这是我的解决方案：

```
 # app/controllers/bills_controller.rb
    class BillsController < ApplicationController
      before_filter :authenticate_admin_user!
      respond_to :html, :pdf

      def show
        @bill = Bill.find(params[:id])
        respond_with(@bill) do |format|
          format.html 
          format.pdf { render :pdf => "mypdf", :disposition => "inline" }
        end
      end
    end

    # app/models/bill.rb
    # solution from https://github.com/mileszs/wicked_pdf/issues/84
    class Bill < ActiveRecord::Base

      require 'open-uri'
      def save_pdf
        pdf = open("http://localhost:3000/bills/#{id}.pdf")
        File.open(Rails.root.join("pdfs","#{id}.pdf"), 'wb') { |f| f.print(pdf.read) }
      end

    end 
```

从控制台：

```
Bill.first.save_pdf 
```

但我得到了错误：

```
OpenURI::HTTPError: 401 Unauthorized 
```

我如何通过 rake 任务中的 open-uri 对 devise_user 进行身份验证？

# javascript - 我的 jquery 代码不起作用。为什么？

> ID：12365460
> 
> 赞同：0
> 
> 时间：2012-09-11T08:15:00.167
> 
> 标签：javascript, jquery, function, object

这是我的 jquery 代码，它不起作用。我真的不知道为什么。请帮助并告诉我如何解决它。

```
$(function () {
    var panel = function () {
            var init = function () {
                console.log('hello');
            };

        return {
            init: init
        }
    };

    $('.nav li a').on('click', function (e) {
        panel.init();
    });

})(); 
```

我在控制台中收到此错误

```
Object function () {
    var panel = function () {
        var init = function () {
            console.log('hello');
        }
    };

    return {
        init: init
    }
} has no method 'init' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:20:18.027

也许你应该看看如何在 Javascript 中定义一个类：

[http://www.phpied.com/3-ways-to-define-a-javascript-class/](http://www.phpied.com/3-ways-to-define-a-javascript-class/)

```
var panel = {
    init: function () {
        alert("Hello!");
    }
}

panel.init(); 
```

* * *

```
$('.nav li a').on('click', function (e) {
    panel.init();
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:19:09.303

我认为您缺少面板函数声明末尾的括号。

```
var panel = function () {
    var panel = function () {
        var init = function () {
            console.log('hello');
        }
    };

    return {
        init: init
    }
}(); 
```

确保右大括号后面是`()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:19:10.837

您的 init 函数位于另一个函数面板中。这是从外面无法到达的。当您想返回 init 方法时，如果您知道我的意思，则必须将 init 函数提高一个级别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T08:20:44.847

我猜该面板应该使用立即调用：

```
$(function () {
    var panel = (function () {
            var init = function () {
                console.log('hello');
            };

        return {
            init: init
        }
    })();

    $('.nav li a').on('click', function (e) {
        panel.init();
    });

})(); 
```

代码将立即执行并将对象返回给`panel`变量。因此`panel`选择了一个`init`财产。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T08:21:52.427

我会这样做：

```
$(function () {
    var panel = {
        init: function () {
            console.log('hello');
        }
    }

    $('.nav li a').on('click', function (e) {
        panel.init();
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/VAvwG/8/)

看起来更像你想要做的？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T08:30:07.150

在这种情况下 panel 是一个回调，这个回调返回另一个回调`init`，所以你必须把 () 放在两个回调周围，试试这个：

```
$(function () {
    var panel = function () {
        var init = function () {
            console.log('hello');
        };

        return {
            init: init
        }
    };

    $('.nav li a').on('click', function (e) {
        panel().init();
    });

})(); 
```

# php - 没有周末的日差

> ID：12365461
> 
> 赞同：32
> 
> 时间：2012-09-11T08:15:16.237
> 
> 标签：php, codeigniter, date

我想计算用户输入的总天差

例如当用户输入

`start_date = 2012-09-06`和`end-date = 2012-09-11`

现在我正在使用此代码来查找差异

```
$count = abs(strtotime($start_date) - strtotime($end_date));
$day   = $count+86400;
$total = floor($day/(60*60*24)); 
```

总计的结果将是 6。但问题是我不想包括周末的日子（周六和周日）

```
2012-09-06
2012-09-07
2012-09-08 Saturday
2012-09-09 Sunday
2012-09-10
2012-09-11 
```

所以结果将是 4

- - 更新 - -

我有一个包含日期的表格，表格名称是假期日期

例如该表包含`2012-09-07`

所以，总天数将是 3，因为它没有计算假期日期

我该怎么做才能将输入的日期等同于表中的日期？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-11T08:26:35.030

我最喜欢的很容易[`DateTime`](http://php.net/DateTime)：[`DateInterval`](http://php.net/DateInterval)和[`DatePeriod`](http://php.net/DatePeriod)

```
$start = new DateTime('2012-09-06');
$end = new DateTime('2012-09-11');
// otherwise the  end date is excluded (bug?)
$end->modify('+1 day');

$interval = $end->diff($start);

// total days
$days = $interval->days;

// create an iterateable period of date (P1D equates to 1 day)
$period = new DatePeriod($start, new DateInterval('P1D'), $end);

// best stored as array, so you can add more than one
$holidays = array('2012-09-07');

foreach($period as $dt) {
    $curr = $dt->format('D');

    // substract if Saturday or Sunday
    if ($curr == 'Sat' || $curr == 'Sun') {
        $days--;
    }

    // (optional) for the updated question
    elseif (in_array($dt->format('Y-m-d'), $holidays)) {
        $days--;
    }
}

echo $days; // 4 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-04-07T22:37:57.187

就我而言，我需要与 OP 相同的答案，但想要更小的答案。@Bojan 的答案有效，但我不喜欢它不适用于`DateTime`对象，需要使用时间戳，并且是在与实际对象本身进行比较`strings`而不是实际对象本身（感觉很糟糕）......这是他答案的修订版。

```
function getWeekdayDifference(\DateTime $startDate, \DateTime $endDate)
{
    $days = 0;

    while($startDate->diff($endDate)->days > 0) {
        $days += $startDate->format('N') < 6 ? 1 : 0;
        $startDate = $startDate->add(new \DateInterval("P1D"));
    }

    return $days;
} 
```

*如果您希望这包括开始和*结束日期，请根据@xzdead 的评论：

```
function getWeekdayDifference(\DateTime $startDate, \DateTime $endDate)
{
    $isWeekday = function (\DateTime $date) {
        return $date->format('N') < 6;
    };

    $days = $isWeekday($endDate) ? 1 : 0;

    while($startDate->diff($endDate)->days > 0) {
        $days += $isWeekday($startDate) ? 1 : 0;
        $startDate = $startDate->add(new \DateInterval("P1D"));
    }

    return $days;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-11T08:18:34.970

使用`DateTime`：

```
$datetime1 = new DateTime('2012-09-06');
$datetime2 = new DateTime('2012-09-11');
$interval = $datetime1->diff($datetime2);
$woweekends = 0;
for($i=0; $i<=$interval->d; $i++){
    $datetime1->modify('+1 day');
    $weekday = $datetime1->format('w');

    if($weekday !== "0" && $weekday !== "6"){ // 0 for Sunday and 6 for Saturday
        $woweekends++;  
    }

}

echo $woweekends." days without weekend";

// 4 days without weekends 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-12-14T17:04:48.013

在没有周末的情况下获得差异的最简单和最快的方法是使用[Carbon](http://carbon.nesbot.com/docs/)库。

这是一个如何使用它的示例：

```
<?php

$from = Carbon\Carbon::parse('2016-05-21 22:00:00');
$to = Carbon\Carbon::parse('2016-05-21 22:00:00');
echo $to->diffInWeekdays($from); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-09-11T08:33:06.463

date('N') 获取星期几（1 - 星期一，7 - 星期日）

```
$start = strtotime('2012-08-06');
$end = strtotime('2012-09-06');

$count = 0;

while(date('Y-m-d', $start) < date('Y-m-d', $end)){
  $count += date('N', $start) < 6 ? 1 : 0;
  $start = strtotime("+1 day", $start);
}

echo $count; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-06-16T16:55:06.923

这是@dan-lee 函数的改进版本：

```
function get_total_days($start, $end, $holidays = [], $weekends = ['Sat', 'Sun']){

    $start = new \DateTime($start);
    $end   = new \DateTime($end);
    $end->modify('+1 day');

    $total_days = $end->diff($start)->days;
    $period = new \DatePeriod($start, new \DateInterval('P1D'), $end);

    foreach($period as $dt) {
        if (in_array($dt->format('D'),  $weekends) || in_array($dt->format('Y-m-d'), $holidays)){
            $total_days--;
        }
    }
    return $total_days;
} 
```

要使用它：

```
$start    = '2021-06-12';
$end      = '2021-06-17';
$holidays = ['2021-06-15'];
echo get_total_days($start, $end, $holidays); // Result: 3 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-11T08:23:30.470

看看这篇文章： [计算工作日](https://stackoverflow.com/questions/336127/calculate-business-days)

（在您的情况下，您可以省略“假期”部分，因为您仅在工作/工作日之后）

```
<?php
//The function returns the no. of business days between two dates
function getWorkingDays($startDate,$endDate){
    // do strtotime calculations just once
    $endDate = strtotime($endDate);
    $startDate = strtotime($startDate);

    //The total number of days between the two dates. We compute the no. of seconds and divide it to 60*60*24
    //We add one to inlude both dates in the interval.
    $days = ($endDate - $startDate) / 86400 + 1;

    $no_full_weeks = floor($days / 7);
    $no_remaining_days = fmod($days, 7);

    //It will return 1 if it's Monday,.. ,7 for Sunday
    $the_first_day_of_week = date("N", $startDate);
    $the_last_day_of_week = date("N", $endDate);

    //---->The two can be equal in leap years when february has 29 days, the equal sign is added here
    //In the first case the whole interval is within a week, in the second case the interval falls in two weeks.
    if ($the_first_day_of_week <= $the_last_day_of_week) {
        if ($the_first_day_of_week <= 6 && 6 <= $the_last_day_of_week) $no_remaining_days--;
        if ($the_first_day_of_week <= 7 && 7 <= $the_last_day_of_week) $no_remaining_days--;
    }
    else {
        // (edit by Tokes to fix an edge case where the start day was a Sunday
        // and the end day was NOT a Saturday)

        // the day of the week for start is later than the day of the week for end
        if ($the_first_day_of_week == 7) {
            // if the start date is a Sunday, then we definitely subtract 1 day
            $no_remaining_days--;

            if ($the_last_day_of_week == 6) {
                // if the end date is a Saturday, then we subtract another day
                $no_remaining_days--;
            }
        }
        else {
            // the start date was a Saturday (or earlier), and the end date was (Mon..Fri)
            // so we skip an entire weekend and subtract 2 days
            $no_remaining_days -= 2;
        }
    }

    //The no. of business days is: (number of weeks between the two dates) * (5 working days) + the remainder
//---->february in none leap years gave a remainder of 0 but still calculated weekends between first and last day, this is one way to fix it
   $workingDays = $no_full_weeks * 5;
    if ($no_remaining_days > 0 )
    {
      $workingDays += $no_remaining_days;
    }    

    return $workingDays;
}

// This will return 4
echo getWorkingDays("2012-09-06","2012-09-11");
?> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-06T08:30:14.620

如果您不需要全天但需要准确的秒数，请尝试使用此代码。这接受 unix 时间戳作为输入。

```
function timeDifferenceWithoutWeekends($from, $to) {
    $start = new DateTime("@".$from);
    $current = clone $start;
    $end = new DateTime("@".$to);
    $sum = 0;
    while ($current<$end) {
        $endSlice = clone $current;
        $endSlice->setTime(0,0,0);
        $endSlice->modify('+1 day');
        if ($endSlice>$end) {
            $endSlice= clone $end;
        }
        $seconds = $endSlice->getTimestamp()-$current->getTimestamp();
        $currentDay = $current->format("D");
        if ($currentDay != 'Sat' && $currentDay != 'Sun') {
            $sum+=$seconds;
        }
        $current = $endSlice;
    }
    return $sum;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-19T15:18:34.127

```
/**
 * Getting the Weekdays count[ Excludes : Weekends]
 * 
 * @param type $fromDateTimestamp
 * @param type $toDateTimestamp
 * @return int
 */
public static function getWeekDaysCount($fromDateTimestamp = null, $toDateTimestamp=null) {

    $startDateString   = date('Y-m-d', $fromDateTimestamp);
    $timestampTomorrow = strtotime('+1 day', $toDateTimestamp);
    $endDateString     = date("Y-m-d", $timestampTomorrow);
    $objStartDate      = new \DateTime($startDateString);    //intialize start date
    $objEndDate        = new \DateTime($endDateString);    //initialize end date
    $interval          = new \DateInterval('P1D');    // set the interval as 1 day
    $dateRange         = new \DatePeriod($objStartDate, $interval, $objEndDate);

    $count = 0;

    foreach ($dateRange as $eachDate) {
        if (    $eachDate->format("w") != 6 
            &&  $eachDate->format("w") != 0 
        ) {
            ++$count;
        }
    }
    return $count;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-13T17:13:53.980

请查看这个精确的 php 函数返回天数，不包括周末。

```
function Count_Days_Without_Weekends($start, $end){
    $days_diff = floor(((abs(strtotime($end) - strtotime($start))) / (60*60*24)));
    $run_days=0;
    for($i=0; $i<=$days_diff; $i++){
        $newdays = $i-$days_diff;
        $futuredate = strtotime("$newdays days");
        $mydate = date("F d, Y", $futuredate);
        $today = date("D", strtotime($mydate));             
        if(($today != "Sat") && ($today != "Sun")){
            $run_days++;
        }
    }
return $run_days;
} 
```

试试看，确实有效。。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-04T10:33:58.887

使用 Carbon\Caborn 的一个非常简单的解决方案

这是从控制器存储功能调用的存储库文件

```
<?php

namespace App\Repositories\Leave;

use App\Models\Holiday;
use App\Models\LeaveApplication;
use App\Repositories\BaseRepository;
use Carbon\Carbon;

class LeaveApplicationRepository extends BaseRepository
{
    protected $holiday;

    public function __construct(LeaveApplication $model, Holiday $holiday)
    {
        parent::__construct($model);
        $this->holiday = $holiday;
    }

    /**
     * Get all authenticated user leave
     */
    public function getUserLeave($id)
    {
        return $this->model->where('employee_id',$id)->with(['leave_type','approver'])->get();
    }

    /**
     * @param array $request
     */
    public function create($request)
    {
        $request['total_days'] = $this->getTotalDays($request['start_date'],$request['end_date']);

        return $this->model->create($request->only('send_to','leave_type_id','start_date','end_date','desc','total_days'));
    }

    /**
     * Get total leave days
     */
    private function getTotalDays($startDate, $endDate)
    {
        $holidays = $this->getHolidays(); //Get all public holidays
        $leaveDays = 0; //Declare values which hold leave days
        //Format the dates
        $startDate = Carbon::createFromFormat('Y-m-d',$startDate);
        $endEnd = Carbon::createFromFormat('Y-m-d',$endDate);
        //Check user dates
        for($date = $startDate; $date <= $endEnd; $date->modify('+1 day')) {
            if (!$date->isWeekend() && !in_array($date,$holidays)) {
                $leaveDays++; //Increment days if not weekend and public holidays
            }
        }
        return $leaveDays; //return total days
    }

    /**
     * Get Current Year Public Holidays
     */
    private function getHolidays()
    {
        $holidays = array();
        $dates = $this->holiday->select('date')->where('active',1)->get();
        foreach ($dates as $date) {
            $holidays[]=Carbon::createFromFormat('Y-m-d',$date->date);
        }
        return $holidays;
    }
} 
```

控制器函数接收用户输入请求并在调用存储库函数之前进行验证

```
<?php

namespace App\Http\Controllers\Leave;

use App\Http\Controllers\AuthController;
use App\Http\Requests\Leave\LeaveApplicationRequest;
use App\Repositories\Leave\LeaveApplicationRepository;
use Exception;

class LeaveApplicationController extends AuthController
{
    protected $leaveApplication;

    /**
     * LeaveApplicationsController constructor.
     */
    public function __construct(LeaveApplicationRepository $leaveApplication)
    {
        parent::__construct();
        $this->leaveApplication = $leaveApplication;
    }

    /**
     * Store a newly created resource in storage.
     */
    public function store(LeaveApplicationRequest $request)
    {
        try {
            $this->leaveApplication->create($request);
            return $this->successRoute('leaveApplications.index','Leave Applied');
        }
        catch (Exception $e) {
            return $this->errorWithInput($request);
        }
    }
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2013-10-05T12:59:30.857

这是计算两个日期之间的工作日的替代方法，并且还使用来自[http://pear.php.net/package/Date_Holidays](http://pear.php.net/package/Date_Holidays)的 Pear 的 Date_Holidays 排除美国假期。

$start_date 和 $end_date 应该是 DateTime 对象（您可以`new DateTime('@'.$timestamp)`用来从时间戳转换为 DateTime 对象）。

```
<?php
function business_days($start_date, $end_date)
{
  require_once 'Date/Holidays.php';
  $dholidays = &Date_Holidays::factory('USA');
  $days = 0;

  $period = new DatePeriod($start_date, new DateInterval('P1D'), $end_date);

  foreach($period as $dt)
  {
    $curr = $dt->format('D');

    if($curr != 'Sat' && $curr != 'Sun' && !$dholidays->isHoliday($dt->format('Y-m-d')))
    {
      $days++;
    }
  }
  return $days;
}
?> 
```

# sql - PostgreSQL 9.1：如何连接数组中的行而不重复，加入另一个表

> ID：12365467
> 
> 赞同：30
> 
> 时间：2012-09-11T08:15:30.180
> 
> 标签：sql, postgresql, postgresql-9.1

我正在使用 PostgreSQL 9.1，需要帮助将多行连接为一个。我需要在 2 张桌子上做到这一点。当我使用两次`array_agg()`函数时，我会在结果中得到重复的值。

表：

```
CREATE TABLE rnp (id int, grp_id int, cabinets varchar(15) );

INSERT INTO rnp VALUES
 (1,'11','cabs1')
,(2,'11','cabs2')
,(3,'11','cabs3')
,(4,'11','cabs4')
,(5,'22','c1')
,(6,'22','c2');

CREATE TABLE ips (id int, grp_id int, address varchar(15));

INSERT INTO ips VALUES
 (1,'11','NY')
,(2,'11','CA')
,(3,'22','DC')
,(4,'22','LA'); 
```

SQL：

```
SELECT DISTINCT

  rnp.grp_id,
  array_to_string(array_agg(rnp.cabinets)OVER (PARTITION BY rnp.grp_id), ',') AS cabinets,
  array_to_string(array_agg(ips.address) OVER (PARTITION BY ips.grp_id), ',') AS addresses

FROM rnp JOIN ips ON rnp.grp_id=ips.grp_id 
```

结果：

```
GRP_ID  CABINETS                                             ADDRESSES
11  cabs1,cabs1,cabs2,cabs2,cabs3,cabs3,cabs4,cabs4     NY,CA,NY,CA,NY,CA,NY,CA
22  c1,c1,c2,c2                                             DC,LA,DC,LA 
```

**我需要的是：**

```
 GRP_ID     CABINETS                 ADDRESSES
    11  cabs1,cabs2,cabs3,cabs4       NY,CA,
    22  c1,c2                         DC,LA 
```

SQLFiddle 中的这个例子：[http ://sqlfiddle.com/#!1/4815e/19](http://sqlfiddle.com/#!1/4815e/19)

如果使用一张表没有问题 - SQLFiddle：[http ://sqlfiddle.com/#!1/4815e/20](http://sqlfiddle.com/#!1/4815e/20)

我错过了什么？由于JOIN，是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-11T08:30:09.560

不要使用窗口函数和分区，而是使用查询级别的 GROUP BY 并使用 DISTINCT 子句进行聚合：

```
SELECT         
  rnp.grp_id,
  array_to_string(array_agg(distinct rnp.cabinets),',') AS cabinets,
  array_to_string(array_agg(distinct ips.address),',')  AS addresses
FROM rnp JOIN ips ON rnp.grp_id=ips.grp_id GROUP BY rnp.grp_id, ips.grp_id; 
```

结果：

```
 grp_id |        cabinets         | addresses 
--------+-------------------------+-----------
     11 | cabs1,cabs2,cabs3,cabs4 | CA,NY
     22 | c1,c2                   | DC,LA
(2 rows) 
```

这里的关键是，您不使用窗口函数和分区，而是使用查询级别`GROUP BY`和带有`DISTINCT`子句的聚合。

这也适用于窗口函数方法，除了 PostgreSQL（至少 9.1）不支持`DISTINCT`窗口函数：

```
regress=# SELECT DISTINCT
  rnp.grp_id,
  array_to_string(array_agg(distinct rnp.cabinets)OVER (PARTITION BY rnp.grp_id), ',') AS cabinets,                    
  array_to_string(array_agg(distinct ips.address) OVER (PARTITION BY ips.grp_id), ',') AS addresses
FROM rnp JOIN ips ON rnp.grp_id=ips.grp_id;
ERROR:  DISTINCT is not implemented for window functions
LINE 3:   array_to_string(array_agg(distinct rnp.cabinets)OVER (PART... 
```

# mysql - MySQL - 有条件的操作

> ID：12365474
> 
> 赞同：1
> 
> 时间：2012-09-11T08:16:10.290
> 
> 标签：mysql, date, time, sum

我正在尝试使用以下格式执行`SUM()`具有三个类似条件的操作：`if()`

第一：

`if((TIME_TO_SEC(TIMEDIFF(IF(TIME = '0000-00-00 00:00:00',sysdate() , TIME ), TIME2)) > high OR TIME IS NULL) AND TIME3 != '0000-00-00 00:00:00' AND DATE_FORMAT(TIME2, '%Y-%m-%d %H:%i') < DATE_FORMAT(now(), '%Y-%m-%d %H:%i')`

第二个：

`if(TIME_TO_SEC(TIMEDIFF(IF(TIME = '0000-00-00 00:00:00',sysdate() , TIME ), TIME2)) > value AND TIME3 != '0000-00-00 00:00:00' AND DATE_FORMAT(TIME2, '%Y-%m-%d %H:%i') < DATE_FORMAT(now(), '%Y-%m-%d %H:%i')`

第三个：

`if(TIME_TO_SEC(TIMEDIFF(IF(TIME = '0000-00-00 00:00:00',sysdate() , TIME ), TIME2)) >0 AND TIME3 != '0000-00-00 00:00:00' AND DATE_FORMAT(TIME2, '%Y-%m-%d %H:%i') < DATE_FORMAT(now(), '%Y-%m-%d %H:%i')`

存在`high`和`value`来自几个表的两个不同字段列。

不幸的是，我似乎无法完成这项工作，很可能是因为这句话不能`SUM()`放在一起。

如何才能做到这一点？

编辑：添加了整个查询：

```
SELECT VALUE1 ,
 COUNT( * ) TOTAL 
 from ( 
  SELECT (
   if((TIME_TO_SEC(TIMEDIFF(IF(TIME = '0000-00-00 00:00:00',sysdate() , TIME ), TIME2)) > high OR TIME IS NULL) AND TIME3 != '0000-00-00 00:00:00' AND DATE_FORMAT(TIME2, '%Y-%m-%d %H:%i') < DATE_FORMAT(now(), '%Y-%m-%d %H:%i')) + 
   if(TIME_TO_SEC(TIMEDIFF(IF(TIME = '0000-00-00 00:00:00',sysdate() , TIME ), TIME2)) > value AND TIME3 != '0000-00-00 00:00:00' AND DATE_FORMAT(TIME2, '%Y-%m-%d %H:%i') < DATE_FORMAT(now(), '%Y-%m-%d %H:%i')) + 
   if(TIME_TO_SEC(TIMEDIFF(IF(TIME = '0000-00-00 00:00:00',sysdate() , TIME ), TIME2)) >0 AND TIME3 != '0000-00-00 00:00:00' AND DATE_FORMAT(TIME2, '%Y-%m-%d %H:%i') < DATE_FORMAT(now(), '%Y-%m-%d %H:%i'))) as 'ok',
if((TIME_TO_SEC(TIMEDIFF(IF(TIME = '0000-00-00 00:00:00',sysdate() , TIME ), TIME2)) > high OR TIME IS NULL) AND DATE_FORMAT(TIME2, '%Y-%m-%d %H:%i') < DATE_FORMAT(now(), '%Y-%m-%d %H:%i'),4, 
if(TIME_TO_SEC(TIMEDIFF(IF(TIME = '0000-00-00 00:00:00',sysdate() , TIME ), TIME2)) > value AND DATE_FORMAT(TIME2, '%Y-%m-%d %H:%i') < DATE_FORMAT(now(), '%Y-%m-%d %H:%i'),3, 
if(TIME_TO_SEC(TIMEDIFF(IF(TIME = '0000-00-00 00:00:00',sysdate() , TIME ), TIME2)) >0 AND DATE_FORMAT(TIME2, '%Y-%m-%d %H:%i') < DATE_FORMAT(now(), '%Y-%m-%d %H:%i'),2, 
if(TIME >'0000-00-00 00:00:00', 1,0) ))) VALUE1 
FROM table1 , table2 left outer join table3 on( value2 = value3 ) where id_param='col1' and col2 = DATE_FORMAT(if(CURTIME()>='00:00:00' and CURTIME() < '08:00:00',sysdate() - INTERVAL 1 DAY, sysdate()), '%Y-%m-%d') ) as datos GROUP BY VALUE1 
```

这应该返回一个 2columnx3rows 表，其值为“ok”、“4”、“3”和“2”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:23:06.653

你可以做

```
SELECT (if_cond1 + if_cond2 + if_cond3) as `x` FROM... 
```

（根据上面的 IF扩展`if_cond1`, `2`） 。`3`

如果你想简化 SQL 扩展后的样子（非常大），你可以使用[这样的子查询](https://stackoverflow.com/a/6081530/1431750)。

# asp.net - asp.net 中的身份验证 Cookie

> ID：12365476
> 
> 赞同：4
> 
> 时间：2012-09-11T08:16:25.190
> 
> 标签：asp.net, cookies, login, forms-authentication

我在 asp.net 中使用表单身份验证。我已将我的 Authenticate cookie 过期时间设置为 60 分钟，在 web.config 中将会话超时设置为 60 分钟，在 web.config 中将超时设置为 60 分钟，并且在 iis 空闲超时设置为60 分钟

```
 <authentication mode="Forms">
        <forms loginUrl="~/Account/Login.aspx" timeout="60" defaultUrl="~/Landing.aspx" slidingExpiration="true"/>
    </authentication>
    <system.web>
        <sessionState timeout="60" mode="InProc"/>
    FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(
     2,                             // Version number
     txtUserName.Text.Trim(),      // Username
     DateTime.Now,                  // Issue date
     DateTime.Now.AddMinutes(60), // Expiration date
     false,                         // Persistent?
     userData                 // User data
     ); 
```

因为如果用户空闲 60 分钟，我正在使用表单身份验证，用户应该在 60 分钟后被重定向到登录页面。但是我需要知道如果用户没有空闲 60 分钟会发生什么。身份验证 cookie 会过期吗？尽管用户仍然经过身份验证？

编辑

我错过了我在 IIS 中将应用程序池标识设置为网络服务的另一件事

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:35:01.177

是的，用户仍然会过期，并且他/她将无权使用服务器上的可用资源。您正在使用 Forms Authentication Cookie，它是 FormsAuthentication Ticket 的简单容器。

因为您的票证是非永久性的，这将导致您的“cookie”过期，从而将用户重定向到登录页面。请注意，这仅处理“身份验证”，不要与 Session 混淆。

您可能有会话“过期”，但用户仍然经过身份验证，这可能是一个问题。

因此，要直接回答您的问题，“用户身份验证”将过期，他/她将被重定向到登录页面，在登录时将创建一个新的 cookie，这将创建另一个“会话”对象。超时前一个将过期。

建议：使“Web.config”中的 Forms Timeout 小于 Session。不要为任何与 Auth/Security 相关的 Session 建立依赖关系；这两个是不同的容器，应该这样对待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:26:05.347

最好阅读下面的链接。对你来说会更快。看看**slidingExpiration**

在到期时间的一半之前，每个请求都会刷新到期时间。

[了解 Forms Authentication Ticket 和 Cookie](http://support.microsoft.com/kb/910443)和 [forms 元素](http://msdn.microsoft.com/en-us/library/1d3t3c61%28vs.71%29.aspx)

# java - Struts 1.x 将 Action Form 属性显示为简单文本（标签）

> ID：12365478
> 
> 赞同：3
> 
> 时间：2012-09-11T08:16:34.670
> 
> 标签：java, jsp, struts

我很困惑。这应该很明显，但我无法弄清楚:(

如何在我的 .jsp 页面中将 Action Form 属性显示为简单文本（标签）？

例如，我可以使用`<html:text>`标签为所需属性创建一个输入文本字段，但是如何使用 Struts 1.x 简单地将这个值显示为纯文本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T08:34:43.047

`<c:out value="${theActionForm.label}" />`使用 JSTL，或者，如果您真的喜欢 Struts 标签，`<bean:write name="theActionForm" property="label" />`.

这假定动作表单在属性名称“theActionForm”下注册，并且有一个`getLabel()`方法。

# java - 如何从字节数组创建 RSAPrivateKey 实例？

> ID：12365481
> 
> 赞同：4
> 
> 时间：2012-09-11T08:16:52.417
> 
> 标签：java, cryptography

您好我正在尝试解密使用 RSA 公钥加密的文件。我有一个对应于 pubkey 的 3072 位 RSA 私钥。该文件包含密钥的 PKCS8 编码的原始字节。我在一个字节数组 rsa_priv 中有。

```
public void decrypt()
{
try
{
    SecretKeySpec sk=new SecretKeySpec(rsa_priv,"RSA/EBC/PKCS8");
    Cipher dec = Cipher.getInstance("RSA");
    dec.init(Cipher.DECRYPT_MODE, sk,new IvParameterSpec(iv));
     //OAEPWithSHA-512AndMGF1Padding        
     byte temp[];
     temp=dec.doFinal(sess);
     String t=temp.toString();
     System.out.println("Session key is:"+ t);
     //session=dec(sess,rsa_priv);OAEPWithSHA-256AndMGF1Padding
}
catch (Exception e)
{
    System.out.println("Exception occured:"+ e);
}
} 
```

当我运行此代码时，我得到以下信息

```
Exception occured:java.security.InvalidKeyException: No installed provider 
supports this key: javax.crypto.spec.SecretKeySpec 
```

我已经进口了这些

```
import java.io.*;
import javax.crypto.*; 
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;
import javax.crypto.KeyGenerator;
import java.security.*;
import javax.crypto.SecretKey;
import javax.crypto.spec.OAEPParameterSpec; 
```

有人请帮帮我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T18:11:05.373

假设您只有内部编码（例如由 提供`RSAPrivateKey.getEncoded()`）而不是实际的 PKCS#8 加密的 RSA 私钥：

```
PKCS8EncodedKeySpec spec = new PKCS8EncodedKeySpec(rsa_priv);
KeyFactory rsaFact = KeyFactory.getInstance("RSA");
RSAPrivateKey key = (RSAPrivateKey) rsaFact.generatePrivate(spec); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:08:57.980

有几个问题。

首先，它是`ECB`模式，而不是`EBC`; 这是您遇到的第一个错误。

其次，RSA 密钥不是 SecretKeySpec。

[如何用java读取密码加密密钥？](https://stackoverflow.com/questions/2654949/how-to-read-a-password-encrypted-key-with-java)显示了一种检索 RSA 密钥的方法，一旦你有了它，[http://www.flexiprovider.de/examples/ExampleRSA.html](http://www.flexiprovider.de/examples/ExampleRSA.html)就会显示如何使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:21:25.487

在将其发布到此处之前，您实际上应该将错误复制并粘贴到 Google 中。

[这](http://www.aviransplace.com/2004/10/12/using-rsa-encryption-with-java/)可能会解决您的问题。

基本上，您需要一种`init()`方法来设置提供程序，如链接中所述。

```
/**
 * Init java security to add BouncyCastle as an RSA provider
 */
public static void init() {
   Security.addProvider(new BouncyCastleProvider());
} 
```

为此，您需要导入[BouncyCastle 库](http://www.bouncycastle.org/latest_releases.html)。

# c# - 组合框项目源中的更改未传递给选定值的绑定

> ID：12365490
> 
> 赞同：0
> 
> 时间：2012-09-11T08:17:30.227
> 
> 标签：c#, wpf, binding

我在这种情况下遇到了一些麻烦：

```
ComboBox cb = new ComboBox cb;
cb.ItemsSource = listItems; //ObservableCollection, contains objects with DependencyProperty "Name"
cb.DisplayMemberPath = "Name";
cb.SelectedValuePath = "Name";
Binding b = new Binding("NameOfItem");
b.Source = myObject;  //Has DependencyProperty "NameOfItem"
b.Mode = BindingMode.TwoWay;
cb.SetBinding(ComboBox.SelectedValueProperty, b); 
```

当我在组合框中选择另一个值时，有界源“myobject”得到更新。但是，当我只是更改 ItemsSource 中项目的名称时，组合框中的显示值确实会更新，但“myObject”没有收到通知，直到我重新选择组合框中的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:25:37.387

将您的集合放入 ObservableCollection<> 并将您的组合框绑定到它。

```
ObservableCollection obc = new ObservableCollection(listItems); 
```

[阅读使用 ObservableCollection 时的常见错误](http://updatecontrols.net/doc/tips/common_mistakes_observablecollection)

# sql - 层次总和

> ID：12365491
> 
> 赞同：1
> 
> 时间：2012-09-11T08:17:41.617
> 
> 标签：sql, sql-server

我有这种结构的表：

```
Id ParentId CountItems 
```

我可以通过脚本计算项目的级别：

```
 ;WITH cteSort AS
  (
  SELECT Id AS Child, ParentId AS Parent, 1  AS [Level]
    FROM [Catalog].[Category] WHERE Id = 0 
  union ALL
  SELECT Id AS Child, ParentId AS Parent, [Level] + 1 AS [Level]
  FROM [Catalog].[Category] 
       INNER JOIN cteSort ON [Category].ParentId = cteSort.Child and Id <>0) 
```

我想从较低级别上升到顶部，并将站在较低级别和当前 CountItems 的字段 CountItems 子项的总和放入当前 CountItems。像这样：之前

```
Id ParentId count 
0     0      0 
1     0      1 
2     0      1 
3     1      1 
4     1      1 
5     2      1 
6     3      1 
7     4      1 
8     4      1 
```

后

```
Id ParentId count
0    0        8 
1    0        6 
2    0        2  
3    1        2 
4    1        3 
5    2        1 
6    3        1 
7    4        1 
8    4        1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:48:46.353

我自己的解决方案，将新字段插入表 [级别]：

```
;WITH cteSort AS
  (
  SELECT Id AS Child, ParentId  AS Parent,1  AS [Level]
    FROM table WHERE Id = 0 
  union ALL
  SELECT 
     Id AS Child,
     ParentId AS Parent,
     cteSort.[Level] + 1 AS [Level]
  FROM table 
       INNER JOIN cteSort ON table.ParentId = cteSort.Child and table.Id<>0)

UPDATE table SET [Level] = (Select [Level] from cteSort where cteSort.Child = table.Id)

declare @max int
set @max = (select top(1) [Level] from table order by [Level]  Desc)
 while (@max >0)
 begin
     UPDATE t1
        SET t1.[count] = t1.[count] + t2.cnt ,
        from table as t1 
        cross apply (Select COALESCE(SUM([count]),0) cnt from table where ParentId =t1.Id) t2
        where t1.Id in (Select Id from table where [Level] =@max)
     Set @max = @max -1
 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:20:12.370

我最近在关系表示中遇到了树的问题，所以我试图解决您的问题，但经过一些重试后，我得到以下输出：`GROUP BY, HAVING, or aggregate functions are not allowed in the recursive part of a recursive common table expression`当编写以下内容时

```
WITH sum_cte AS
(
    SELECT
       Id, ParentId, [Count]
    FROM Category c

    -- find Categories that have no child
    WHERE NOT EXISTS(SELECT 1 FROM Category WHERE ParentId = c.Id)

    UNION ALL

    SELECT
        s.ParentId
        -- find parent of current parent
        , c.ParentId
        , SUM(s.[Count])
    FROM 
        sum_cte s  
        JOIN Category c 
        ON s.ParentId = c.Id
    WHERE s.Id<>0
    GROUP BY s.ParentId, c.ParentId
)

SELECT DISTINCT * FROM sum_cte ORDER BY Id 
```

我认为用 CTE 解决问题是不可能的。所以我写了一个递归函数，它给出了所有孩子的总数。

```
CREATE FUNCTION [dbo].[GetSumOfChildren](@CategoryId INT)
RETURNS INT
AS
BEGIN
    DECLARE @sum int;
    SELECT 
        -- get sum of all children
        @sum = SUM(dbo.GetSumOfChildren(Id))
    FROM
        Category
    WHERE ParentId = @CategoryId AND ParentId <> Id

    SELECT 
        -- plus self count
        @sum = ISNULL(@sum,0) + [Count]
    FROM
        Category
    WHERE Id = @CategoryId

    RETURN @sum;
END 
```

有了这个你的任务解决简单

```
SELECT Id,ParentId, dbo.GetSumOfChildren(Id) FROM Category 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:35:31.623

我想你的问题更多地导致了为什么？而不是一个实际的解决方案（在我的午餐中对此感到困惑）我确实有一些贡献。

在纯编程术语中，您可以使用通过父计数和要处理的节点的递归函数来完成此操作，同时保持当前叶的内部计数。在纯 SQL 中模拟这一点将是一项更有趣的尝试，因为将使用的一些编程技术很难在 SQL 中实现（如果有的话）。

我的实际想法是我没有在每行使用 som convul​​ted 子查询（这会很昂贵，具体取决于行数，并且可能需要固定数量的级别），而是将结果集转换为 XML 对象，然后使用 XQuery 来然后获取后代的数量，然后用结果更新您的结果集。不幸的是 count() 没有开关来计算所有后代，因此您必须恢复到某些子查询类型逻辑才能逐行计算。此外，这种方法似乎指向具有固定数量的级别......

这又回到了为什么？如果您将此结果集传递给 C#、Java 等编程语言以进行处理，那么在该点实现递归计算并在使用之前将其添加到结果集中会更有意义。

# python - pygame：blit的目标位置无效

> ID：12365494
> 
> 赞同：0
> 
> 时间：2012-09-11T08:17:53.657
> 
> 标签：python, iterator, pygame, blit

错误信息是：

```
Traceback (most recent call last):
  File "C:\Documents and Settings\Administrator.MICRO-C17310A13\桌面\pygame例子\vectorfish.py", line 24, in <module>
    screen.blit(sprite, position)
TypeError: invalid destination position for blit 
```

代码是：

```
background_image_filename = 'sushiplate.jpg'    
sprite_image_filename = 'fugu.bmp'    
import pygame    
from pygame.locals import *    
from sys import exit    
from vector2 import Vector2    
pygame.init()    
screen = pygame.display.set_mode((640, 480), 0, 32)    
background = pygame.image.load(background_image_filename).convert()    
sprite = pygame.image.load(sprite_image_filename).convert_alpha()    
clock = pygame.time.Clock()

position = Vector2(100.0, 100.0)

speed = 250.0

heading = Vector2()

while True:

    for event in pygame.event.get():
        if event.type == QUIT:
            exit()
    if event.type == MOUSEBUTTONDOWN:
        destination = Vector2(*event.pos) - Vector2(*sprite.get_size())/2.
        heading = Vector2.from_points(position, destination)
        heading.normalize()
    screen.blit(background, (0,0))
    screen.blit(sprite, position)
    time_passed = clock.tick()
    time_passed_seconds = time_passed / 1000.0
    distance_moved = time_passed_seconds * speed
    position += heading * distance_moved
    pygame.display.update() 
```

vector2的代码是：

```
import math

class Vector2(object):

    def __init__(self, x=0.0, y=0.0):
        self.x = x
        self.y = y
    def __str__(self):
        return "(%s, %s)"%(self.x, self.y)
    @staticmethod
    def from_points(P1, P2):
        return Vector2( P2[0] - P1[0], P2[1] - P1[1] )
    def get_magnitude(self):
        return math.sqrt( self.x**2 + self.y**2 )
    def normalize(self):
        magnitude = self.get_magnitude()
        self.x /= magnitude
        self.y /= magnitude 
```

不仅此代码，所有需要 vector2 的代码都遇到了这个问题：invalid destination position for blit

难道我做错了什么 ？

非常需要任何帮助。

吉尔伯特陈

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T09:00:31.703

[`Surface.blit`](http://www.pygame.org/docs/ref/surface.html#Surface.blit)需要一个`tuple`as`dest`参数。如果您想使用自己的矢量类，请将其更改为：

```
class Vector2(tuple):

    def __new__(typ, x=1.0, y=1.0):
        n = tuple.__new__(typ, (int(x), int(y)))
        n.x = x
        n.y = y
        return n

    def __mul__(self, other):
        return self.__new__(type(self), self.x*other, self.y*other)

    def __add__(self, other):
        return self.__new__(type(self), self.x+other.x, self.y+other.y)

    def __str__(self):
        return "(%s, %s)"%(self.x, self.y)
    @staticmethod
    def from_points(P1, P2):
        return Vector2( P2[0] - P1[0], P2[1] - P1[1] )
    def get_magnitude(self):
        return math.sqrt( self.x**2 + self.y**2 )
    def normalize(self):
        magnitude = self.get_magnitude()
        self.x /= magnitude
        self.y /= magnitude 
```

现在，它是从子类化的`tuple`，您可以将其传递给`blit`函数。（另请注意，元组必须包含`int`s）。

我还添加[`__add__`](http://docs.python.org/reference/datamodel.html#object.__add__)并[`__mul__`](http://docs.python.org/reference/datamodel.html#object.__mul__)让它支持加法和乘法。

这样，不需要对您的代码进行进一步修改，并且您可以按预期使用您的矢量类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T08:27:39.693

尝试以下操作：

```
screen.blit(sprite, (position.x, position.y)) 
```

问题是您的 Vector2 没有`__iter__`作为迭代器的重载，因此您可以调用`tuple`您的对象。这意味着它不能通过`blit`函数调用转换为元组，因此参数无效。

您的 Vector2 将包含：

```
def __iter__(self):
        return [self.x, self.y].__iter__() 
```

你的 blit 将是：

```
screen.blit(sprite, tuple(position)) 
```

# twitter - 为什么 twitter api 限制会阻止我在其他网站上看到推文？

> ID：12365498
> 
> 赞同：1
> 
> 时间：2012-09-11T08:18:04.283
> 
> 标签：twitter, rate-limiting

我正在使用这个库[http://lab.rog.ie/chirp/](http://lab.rog.ie/chirp/)，当我连接到我的帐户时，我无法加载任何人的流。这是回应：

```
Failed to load resource
http://api.twitter.com/1/statuses/user_timeline/elektronaut.json?count=10&callback=jQuery180016162077663466334_1347353152273&_=1347353152291 
```

是因为api请求限制吗？我把关于请求限制的部分加红了[https://dev.twitter.com/docs/rate-limiting](https://dev.twitter.com/docs/rate-limiting)但我仍然不明白发生了什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:20:55.673

此问题可能是由 Chrome 插件**Do No Track Plus引起的，如此**[处](https://github.com/seaofclouds/tweet/issues/258)所述。

# android - 将图像序列转换为视频文件android java

> ID：12365500
> 
> 赞同：13
> 
> 时间：2012-09-11T08:18:16.810
> 
> 标签：android, image, video

我知道这是一个老问题，我对此进行了很多研究，但似乎没有合适的解决方案。我已经看到了一些方法可以做到这一点，例如：

*   使用 FFmpeg（但它取决于本机代码，所以不是我的选择）

*   Xuggler API（同上原因）

我正在寻找可以将多个图像（可绘制或位图或其他任何内容）转换为可以在 android 手机中播放的视频文件的解决方案甚至建议。我已经坚持了 3 天，并急于寻找解决方案。

我还在为我的问题寻找替代解决方案，而不是将图像转换为视频，是否可以捕获和记录 android 手机屏幕，实际上是我应用程序中屏幕的一部分？（请不要使用 USB 电缆插入计算机或类似的东西。我在研究时看到了很多，这不是我想要的）。

任何帮助都会对我的英语表示赞赏和抱歉，这不是我的母语。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-13T19:28:07.200

[您可以使用名为 JCodec ( http://jcodec.org](http://jcodec.org) )的纯 java 开源库，下面的类演示了使用 JCodec 低级 API 将图像序列转换为 MP4 剪辑 ( H.264 )：

```
public class SequenceEncoder {
    private SeekableByteChannel ch;
    private Picture toEncode;
    private RgbToYuv420 transform;
    private H264Encoder encoder;
    private ArrayList<ByteBuffer> spsList;
    private ArrayList<ByteBuffer> ppsList;
    private CompressedTrack outTrack;
    private ByteBuffer _out;
    private int frameNo;
    private MP4Muxer muxer;

    public SequenceEncoder(File out) throws IOException {
        this.ch = NIOUtils.writableFileChannel(out);

        // Transform to convert between RGB and YUV
        transform = new RgbToYuv420(0, 0);

        // Muxer that will store the encoded frames
        muxer = new MP4Muxer(ch, Brand.MP4);

        // Add video track to muxer
        outTrack = muxer.addTrackForCompressed(TrackType.VIDEO, 25);

        // Allocate a buffer big enough to hold output frames
        _out = ByteBuffer.allocate(1920 * 1080 * 6);

        // Create an instance of encoder
        encoder = new H264Encoder();

        // Encoder extra data ( SPS, PPS ) to be stored in a special place of
        // MP4
        spsList = new ArrayList<ByteBuffer>();
        ppsList = new ArrayList<ByteBuffer>();

    }

    public void encodeImage(BufferedImage bi) throws IOException {
        if (toEncode == null) {
            toEncode = Picture.create(bi.getWidth(), bi.getHeight(), ColorSpace.YUV420);
        }

        // Perform conversion
        for (int i = 0; i < 3; i++)
            Arrays.fill(toEncode.getData()[i], 0);
        transform.transform(AWTUtil.fromBufferedImage(bi), toEncode);

        // Encode image into H.264 frame, the result is stored in '_out' buffer
        _out.clear();
        ByteBuffer result = encoder.encodeFrame(_out, toEncode);

        // Based on the frame above form correct MP4 packet
        spsList.clear();
        ppsList.clear();
        H264Utils.encodeMOVPacket(result, spsList, ppsList);

        // Add packet to video track
        outTrack.addFrame(new MP4Packet(result, frameNo, 25, 1, frameNo, true, null, frameNo, 0));

        frameNo++;
    }

    public void finish() throws IOException {
        // Push saved SPS/PPS to a special storage in MP4
        outTrack.addSampleEntry(H264Utils.createMOVSampleEntry(spsList, ppsList));

        // Write MP4 header and finalize recording
        muxer.writeHeader();
        NIOUtils.closeQuietly(ch);
    }
} 
```

然后你可以像这样使用它：

```
public static void main(String[] args) throws IOException {
    SequenceEncoder encoder = new SequenceEncoder(new File("video.mp4"));
    for (int i = 1; i < 100; i++) {
        BufferedImage bi = ImageIO.read(new File(String.format("img%08d.png", i)));
        encoder.encodeImage(bi);
    }
    encoder.finish();
} 
```

# c# - 将 ByteArray 转换为 String 以在 TextBox c# 中使用

> ID：12365501
> 
> 赞同：1
> 
> 时间：2012-09-11T08:18:19.273
> 
> 标签：c#, arrays, string, type-conversion

是的，我已经阅读了大约 5 个小时的解决方案，但它们都不起作用。BitConverter 只是创建一个空白字符串。

基本上我正在做的是尝试创建一个级别阅读器，它将通过十六进制读取级别内容并最终将其显示在树视图中。所以我要做的第一件事就是创建一个字节数组，我可以在其中编辑数据，我已经做到了。但是，现在我想在屏幕上显示数据。据我所知，您不能在屏幕上显示字节数组，您必须先将其转换为字符串。

所以这就是我想要做的：

```
 using (OpenFileDialog fileDialog = new OpenFileDialog())
        {
            if (fileDialog.ShowDialog() != DialogResult.Cancel)
            {
                textBox1.Text = fileDialog.FileName;
                using (BinaryReader fileBytes = new BinaryReader(new MemoryStream(File.ReadAllBytes(textBox1.Text))))
                {
                    string s = null;
                    int length = (int)fileBytes.BaseStream.Length;
                    byte[] hex = fileBytes.ReadBytes(length);
                    File.WriteAllBytes(@"c:\temp_file.txt", hex);
                }
            }
        }
    } 
```

**注意：**我已经删除了我的转换尝试，因为我没有尝试过任何工作。有谁知道我如何使用这些数据并将其转换为字符串，并将其添加到文本框中？（当然，我知道如何做后者。我遇到困难的是前者。）如果是这样，请提供示例。

我可能应该让自己更清楚；我不想将字节转换为相应的字符（即如果它是0x43，我不想打印'C'。我想打印'43'。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:24:01.210

您可以将数据转换为十六进制：

```
 StringBuilder hex = new StringBuilder(theArray.Length * 2);
  foreach (byte b in theArray)
    hex.AppendFormat("{0:x2}", b);
  return hex.ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T08:21:26.357

你知道你的字节数组存储在哪种编码中吗？

你需要[Encoding.GetString](http://msdn.microsoft.com/en-us/library/744y86tc.aspx)方法

这是[MSDN](http://msdn.microsoft.com/en-us/library/744y86tc.aspx)示例

```
using System;
using System.IO;
using System.Text;

public class Example
{
   const int MAX_BUFFER_SIZE = 2048;
   static Encoding enc8 = Encoding.UTF8;

   public static void Main()
   {
      FileStream fStream = new FileStream(@".\Utf8Example.txt", FileMode.Open);
      string contents = null;

      // If file size is small, read in a single operation. 
      if (fStream.Length <= MAX_BUFFER_SIZE) {
         Byte[] bytes = new Byte[fStream.Length];
         fStream.Read(bytes, 0, bytes.Length);
         contents = enc8.GetString(bytes);
      }
      // If file size exceeds buffer size, perform multiple reads. 
      else {
         contents = ReadFromBuffer(fStream);
      }
      fStream.Close();
      Console.WriteLine(contents);
   }

   private static string ReadFromBuffer(FileStream fStream)
   {
        Byte[] bytes = new Byte[MAX_BUFFER_SIZE];
        string output = String.Empty;
        Decoder decoder8 = enc8.GetDecoder();

        while (fStream.Position < fStream.Length) {
           int nBytes = fStream.Read(bytes, 0, bytes.Length);
           int nChars = decoder8.GetCharCount(bytes, 0, nBytes);
           char[] chars = new char[nChars];
           nChars = decoder8.GetChars(bytes, 0, nBytes, chars, 0);
           output += new String(chars, 0, nChars);                                                     
        }
        return output;
    }
}
// The example displays the following output: 
//     This is a UTF-8-encoded file that contains primarily Latin text, although it 
//     does list the first twelve letters of the Russian (Cyrillic) alphabet: 
//      
//     А б в г д е ё ж з и й к 
//      
//     The goal is to save this file, then open and decode it as a binary stream. 
```

**编辑**

如果你想以十六进制格式打印出字节数组，[BitConverter](http://msdn.microsoft.com/en-us/library/3kftcaf9)就是你正在寻找的形式，这里是[MSDN](http://msdn.microsoft.com/en-us/library/3a733s97.aspx)示例

```
// Example of the BitConverter.ToString( byte[ ] ) method. 
using System;

class BytesToStringDemo
{
    // Display a byte array with a name. 
    public static void WriteByteArray( byte[ ] bytes, string name )
    {
        const string underLine = "--------------------------------";

        Console.WriteLine( name );
        Console.WriteLine( underLine.Substring( 0, 
            Math.Min( name.Length, underLine.Length ) ) );
        Console.WriteLine( BitConverter.ToString( bytes ) );
        Console.WriteLine( );
    }

    public static void Main( )
    {
        byte[ ] arrayOne = {
             0,   1,   2,   4,   8,  16,  32,  64, 128, 255 };

        byte[ ] arrayTwo = {
            32,   0,   0,  42,   0,  65,   0, 125,   0, 197,
             0, 168,   3,  41,   4, 172,  32 };

        byte[ ] arrayThree = {
            15,   0,   0, 128,  16,  39, 240, 216, 241, 255, 
           127 };

        byte[ ] arrayFour = {
            15,   0,   0,   0,   0,  16,   0, 255,   3,   0, 
             0, 202, 154,  59, 255, 255, 255, 255, 127 };

        Console.WriteLine( "This example of the " +
            "BitConverter.ToString( byte[ ] ) \n" +
            "method generates the following output.\n" );

        WriteByteArray( arrayOne, "arrayOne" );
        WriteByteArray( arrayTwo, "arrayTwo" );
        WriteByteArray( arrayThree, "arrayThree" );
        WriteByteArray( arrayFour, "arrayFour" );
    }
}

/*
This example of the BitConverter.ToString( byte[ ] )
method generates the following output.

arrayOne
--------
00-01-02-04-08-10-20-40-80-FF

arrayTwo
--------
20-00-00-2A-00-41-00-7D-00-C5-00-A8-03-29-04-AC-20

arrayThree
----------
0F-00-00-80-10-27-F0-D8-F1-FF-7F

arrayFour
---------
0F-00-00-00-00-10-00-FF-03-00-00-CA-9A-3B-FF-FF-FF-FF-7F
*/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T08:20:57.010

首先，您只需要将字节转换为更有用的东西，例如 UTF8，然后您就可以从中获取字符串。类似的东西（在我的例子中：iso-8859-1）：

```
buf = Encoding.Convert(Encoding.GetEncoding("iso-8859-1"), Encoding.UTF8, buf);
tempString = Encoding.UTF8.GetString(buf, 0, count); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T08:26:04.203

实际上没有显示随机字节序列的默认方式。选项：

*   base64 编码 (Convert.ToBase64String) - 将产生不可读但至少可安全打印的字符串
*   十六进制编码每个字节并在每个字节的表示之间用空格连接，可能分成每行几个（即16个）字节的组。- 会产生更多类似黑客的观点。
*   将所有字节映射到可打印的字符（可能是彩色的）并可能分成多行 - 将产生类似矩阵的数据视图......

# android - 是否可以使用 MonoDroid 和 MonoTouch 创建一个可供非 Mono 开发人员使用的跨平台共享库？

> ID：12365504
> 
> 赞同：8
> 
> 时间：2012-09-11T08:18:29.807
> 
> 标签：android, ios, xamarin.ios, xamarin.android, monocross

我们有一个专有硬件，我们希望将其作为手机外围设备发布。

我们已经开始编写一个跨平台的移动应用程序，它使用 MonoCross 框架（即 iOS 的 MonoTouch 抽象层和 Android 的 MonoDroid 抽象）与硬件接口。

我们希望将此应用程序的大部分内容作为代码库提供，以供其他希望编写与我们的硬件接口的应用程序的应用程序开发人员重用。

我担心使用 Mono 会迫使这些开发人员也这样做。是这样吗？

**安卓库**

我们能否生成一个 Android 库（不是我理解为提供完整源代码的库项目）作为 MonoDroid 的输出，其他开发人员使用 ADT 和 Java 开发（**即他们不使用 Mono Droid**）能​​够使用他们的应用程序？

**iOS 库**

我们能否从 MonoTouch 中生成一个 Objective C 开发人员（**即他们不使用 Mono Touch**）能够在他们的应用程序中使用的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:42:30.733

两种情况的答案都是否定的，不可能创建非托管应用程序可以使用的托管库，无论是在 MonoTouch 还是 Mono for Android 上。

这是因为托管库严重依赖托管运行时，它们不是独立库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:40:40.440

实际上，我的问题与您完全相同...在iOS上，根据我从Xamarin收集到的信息，这是可能的，但不受支持。尽管，我仍在等待示例：/

据我了解，monodevelop 能够编译一个本地 ARM 库，该库可以通过执行以下操作被 ObjectiveC 源使用：

/Developer/MonoTouch/usr/bin/mtouch --linksdkonly --xcode=output_dir MyAssembly.exe

在您的 XCode 项目中，您似乎需要使用 Mono-Embedding-API。

[http://docs.go-mono.com/?link=root:/embed](http://docs.go-mono.com/?link=root:/embed)

**如果 xamarin 可以提供源示例，那就太好了，因为它是这样的工具包非常需要的功能！**

# java - JSONObject 无法转换为 JSONArray、SimpleJSON

> ID：12365506
> 
> 赞同：1
> 
> 时间：2012-09-11T08:18:40.900
> 
> 标签：java, json

有以下代码：

```
String s= v.request("engine/?key=", "P4z72NmBa91&method=load");
JSONParser parser = new JSONParser();
Object obj = parser.parse(s);
JSONArray arr = (JSONArray)obj;
System.out.println(arr); 
```

哪个输出：

```
[
    {"time":"2012-09-10 19:09:08",
     "username":"SomeUsername",
     "times_logged":"1",
      "ip":"33.33.33.33"
     }
] 
```

对不起，如果上面的格式不正确。

无论如何，其中有多组`arr`，当我这样做时，`arr.get(0)`它会按预期返回第一组。不正常的是我不能做`arr.get(0).get(1)`或`arr.get(0).get("time")`类似的事情。我试过这样设置：

```
 for(int i = 0; i < arr.size(); i++) {
        JSONArray p = (JSONArray)arr.get(i);
        System.out.println(p.get(0));
    } 
```

，我得到了我的问题标题中提到的错误。虽然我相信那`arr`不是 JSONArray，而是 JSONObject？如果是这种情况，我如何遍历其中包含的内容`arr`并获取每个项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T08:26:51.160

```
 for(int i = 0; i < arr.size(); i++) {
        JsonObject p = (JsonObject)arr.get(i);
        System.out.println(p.get("time").getAsString());
    } 
```

# android - ICS 像以前版本的 android 中的微调器

> ID：12365508
> 
> 赞同：0
> 
> 时间：2012-09-11T08:18:49.323
> 
> 标签：android, android-layout

我希望微调器看起来像 2.2 以上所有以前版本的 android 中的 ICS。有你知道的项目或样品吗？我通过一个项目[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)

但它包含很多变化，这使得我的应用程序变得庞大。因此，您知道我可以使用的任何简单更改。自定义布局可以帮助我，但我怎样才能获得 ICS 资源？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T08:33:25.067

下载任何支持库并包含在您的项目构建路径中

然后代替使用类似`Spinner`的`xml`东西

```
<com.name.internal.widget.IcsSpinner
....
/> 
```

![在此处输入图像描述](../Images/0391268d1db04daa9e025750de08d76b.png)

否则自己设计一个自定义微调器。但是，如果您希望在一些较低级别的 API 中实现很多东西，比如 ICS，最好使用支持库来实现。

您可以在开发人员网站上获取相应 API 的支持库：

[http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

或者你最好从这里下载它，其中还包括`ActionBarSherlock`

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:23:44.737

最简单的方法是为您的微调器设置 ICS 样式背景，对于源尝试下载 >=API 14 源，其中包含您可以使用的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T14:09:21.867

我也需要这个，但不想使用 ActionBarSherlock，我正在使用 android 支持库，也不想使用列表导航模式。在此处查看完整解决方案[https://stackoverflow.com/a/21187762/3206751](https://stackoverflow.com/a/21187762/3206751)

# css - CSS div背景没有出现

> ID：12365516
> 
> 赞同：1
> 
> 时间：2012-09-11T08:19:17.323
> 
> 标签：css, html, background

我是 Web 开发的新手，但我几天来一直在寻找解决这个问题的方法，所以我决定最后问你。

我有一个空页面，其背景在外部样式表中定义。

除此之外，我在正文中包含了一个 div，我将使用它通过外部样式表定位图像，而不仅仅是在 html 文件中插入一个标签。

这是我的html文件：

```
<! DOCTYPE html public "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

```
<head>
    <title>Azin Productions</title>

    <link rel="stylesheet" type="text/css" href="style/style_2.css">
    <link rel="stylesheet" type="text/css" href="style/MyFontsWebfontsOrderM3219563.css">
</head>

<body>
    <p>Hello World</p>
    <div class="bit_1"></div>
</body> 
```

这是我的样式表：

```
 body {
  background: url(images/NYCNEW.jpg);
  background-size:100% 130%;
  background-repeat:no-repeat;
  z-index: -100;

  font-family: Museo-500; calibri;
}

p {
  color:orange;
}

.bit_1 {
  color:blue;
  background-image: url(images/bits/bit_1.png)
  z-index: 500
} 
```

-是的，我绝对确定链接是正确的:)

在此先感谢，马格努斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:21:51.690

为 指定宽度和高度`<div class="bit_1"></div>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:21:11.130

如果您的 css 文件位于文件夹中，则需要在图像路径之前添加 ../。../ 代表根文件夹。

像这样更改代码

```
body {
  background: url(../images/NYCNEW.jpg);
  background-size:100% 130%;
  background-repeat:no-repeat;
  z-index: -100;

  font-family: Museo-500; calibri;
}

.bit_1 {
  color:blue;
  background-image: url(../images/bits/bit_1.png);
  z-index: 500
} 
```

您需要在图像路径之前添加 ../。../ 代表根文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:22:16.277

你缺少 (;) 并且你需要给你的 div 宽度和高度：

```
.bit_1 
{   
color:blue;   
background-image: url(images/bits/bit_1.png); 
z-index: 500;   width:500px;   height:50px; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T08:27:29.963

了解`url(...)`CSS 中图像的相对路径是如何工作的很重要，并且完全取决于 CSS 的使用位置。

如果将 CSS 放在页面中，则相对路径`url(...)`将与页面相同。如果将 CSS 放在链接的 .css 文件中，则 .css 文件的相对路径将与**.css 文件**`url(...)`相同

 **由于您的 .css 文件位于`style`目录中，因此以下命令...

```
background: url(images/NYCNEW.jpg); 
```

...将被翻译为...

```
style/images/NYCNEW.jpg 
```

为了解决这个问题，请使用 CSS 文件中的相对路径...

```
background: url(../images/NYCNEW.jpg); 
```

这种行为的原因是您可以从多个页面链接到 .css 文件，如果需要，每个页面都位于不同的目录结构中

* * *

您还需要向`bit_1`div 提供一些内容，或者向控件提供一个`height`和`width`，否则将永远无法看到。（仅仅为 div 提供背景图像不会使该 div 出现，因为它只是背景。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T08:28:18.837

嗨，现在为什么你现在只定义这项`z-index` 工作`position`

像这样更改您的代码

```
 body {
  background: url("../images/NYCNEW.jpg");
  background-size:100% 130%;
  background-repeat:no-repeat;

  font-family: Museo-500; calibri;
}

p {
  color:orange;
}

.bit_1 {
  color:blue;
  background: url("../images/bits/bit_1.png") no-repeat 0 0;
} 
```

**现在检查您的图像路径，然后应用**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T08:57:16.430

你并没有真正说出你的问题是什么，但我猜背景图片没有显示在`.bit_1`div 中？如果是这种情况，那么您需要在 div 上设置高度和宽度才能显示。Div 只会自然地扩展其中的内容。

除此之外，您的 CSS 中还有各种错误：

```
body {
  background: url(images/NYCNEW.jpg);
  background-size:100% 130%;
  background-repeat:no-repeat;

  z-index: -100; - This will not do anything without the 'position' property set. Besides which I would never recommend using negative z-index.

  font-family: Museo-500; calibri; - The 'calibri' will be discarded here because you already ended your declaration at the first semi-colon after 'Museo-500'
}

p {
  color:orange;
}

.bit_1 {
  color:blue;
  background-image: url(images/bits/bit_1.png) - You are missing the semi-colon to end this declaration.
  z-index: 500 - Again no need for this.
} 
```

更好的 CSS：

```
body {
  background: url(../images/NYCNEW.jpg) no-repeat;
  background-size: 100% 130%;    
  font-family: Museo-500, calibri;
}
p {
  color: orange;
}
.bit_1 {
  width: 500px; /* Width of your background images */
  height: 400px; /* Height of your background images */
  color: blue;
  background: url("../images/bits/bit_1.png") no-repeat;
} 
```**

# vb6 - VB6 检索最后一个自动递增的 ID 并再次更新记录

> ID：12365517
> 
> 赞同：0
> 
> 时间：2012-09-11T08:19:17.810
> 
> 标签：vb6

我有一段代码将新行插入表中，然后检索 SerialNo，使用 SerialNo 更新 ReferenceNo 列，然后再次更新数据库。

但是，在第二次更新时，我收到以下错误： **无法定位行进行更新。自上次读取以来，某些值可能已更改。**

代码看起来像这样

```
DataEnvironment1.rsAddNewMsg.Open

With DataEnvironment1.rsAddNewMsg

.Field1 ="mpla"
.Field2 ="mpla"
....

.Update

.ReferenceNo = "Mpla" + SerialNo

.Update

DataEnvironment1.rsAddNewMsg.Close 
```

该错误发生在第二次更新时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:21:10.027

经过两天的努力解决这个错误，我终于找到了问题所在。问题是我在表格上的一个约束，以便将另一个字段（不相关）默认为“N”。禁用此约束后，我的代码就像一个魅力！:)

呸呸呸！

只是为了我的记录，为了设法找到原因，我用一个小的新表模拟错误，上面有标识。在测试期间，我注意到更新正在处理那个。所以更新部分没问题。因此，我将一部分正常代码分开并通过更改表上的属性进行测试，直到找到原因。

不过谢谢你的帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:35:34.267

您可能需要重新打开记录集以获取您的更改。您还可以尝试打开一个动态类型的[记录集](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681510%28v=vs.85%29.aspx)，它可能更好地反映数据的更新。我想你会默认打开一个只进的记录集。

抱歉，自从我上次使用 ADO 以来已经很长时间了，所以我有点生疏了！

# php - 如何使用 PHP 在 XML 中搜索特定名称

> ID：12365518
> 
> 赞同：0
> 
> 时间：2012-09-11T08:19:21.367
> 
> 标签：php, xml, search, xpath, nodes

我希望能够通过 XML 中的每个节点，当我找到某个**用户名**时，我想从该节点读取所有数据。

例如：

```
<Users>
   <User>
      <Username>admin</Username>
      <Server>10.x.x.x</Server>
   </User>
   <User>
      <Username>test</Username>
      <Server>11.x.x.x</Server>
   </User>
</Users> 
```

我需要能够找到**Username=admin**然后从同一个节点获取**服务器。**我将使用 PHP，您可以通过保存任何两个变量来制作示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:50:45.493

使用[Xpath](http://www.php.net/manual/en/domxpath.query.php)和[DomDocument](http://php.net/manual/en/class.domdocument.php)，这样的事情应该可以解决问题：

```
$doc = new DOMDocument;
$doc->loadXML($xml); // Your xml string
$xpath = new DOMXpath($doc);

$query = '//Users/User/Username[. = "admin"]'; // Looking for user admin
$entries = $xpath->query($query);

foreach ($entries as $entry) {
    //Getting the "server" node value for "admin" user
    echo $entry->nextSibling->nextSibling->nodeValue; // Display 10.x.x.x
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:55:26.280

此变体有效

```
$dom = new DOMDocument();
$dom->preserveWhiteSpace = false;
$dom->loadXML(file_get_contents('xpath.xml'));
$xpath = new DOMXPath($dom);
$query = '//Users/User/Username[text()="admin"]/following-sibling::Server';
echo $xpath->query($query)->item(0)->nodeValue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:45:13.890

尝试以下方式：

```
$input = '<Users>
   <User>
      <Username>admin</Username>
      <Server>10.x.x.x</Server>
   </User>
   <User>
      <Username>test</Username>
      <Server>11.x.x.x</Server>
   </User>
</Users>';

$xml = new SimpleXMLElement($input);

$result = $xml->xpath('/Users/User[Username="admin"]');
// Process $result to your liking.. 
```

为简单起见，我使用了 SimpleXMLElement。如果您需要更强大的工具，请查看 DomDocument 和[DOMXPath](http://www.php.net/manual/en/class.domxpath.php)。

有关 SimpleXML [Xpath](http://php.net/manual/en/simplexmlelement.xpath.php)的更多详细信息。

# c# - 在 C# 中是否可以重载 `??` 运算符？

> ID：12365523
> 
> 赞同：1
> 
> 时间：2012-09-11T08:19:50.743
> 
> 标签：c#, operators, null-coalescing-operator

我阅读了有关运算符重载的[MSDN 文档。](http://msdn.microsoft.com/en-us/library/aa288467%28v=vs.71%29.aspx)

在该示例中，使用的运算符是`+`，`-`也可以定义其他运算符`*`或`/`。

我想重载`??`运算符以用于字符串，例如

```
string emptyString = emptyString ?? "OtherValue"; 
```

代替

```
string emptyString = string.IsNullOrEmpty(emptyString) ? "OtherValue" : emptyString; 
```

我**不想**将字符串转换为对象并使用`??`.

我知道它`??`用于可空值类型，MSDN 说：

> 这 ？？运算符称为空值合并运算符，用于为可空值类型或引用类型定义默认值。
> 
> 如果操作数不为空，则返回左侧操作数；否则返回正确的操作数。

我想问你**是否可以**在 C# 中重载这个运算符。上面的例子是需要使用时的简单情况`??`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T08:24:00.897

不，你不能。

一个简单的解决方法是使用扩展方法：

```
 public static string IfNullOrEmpty(this string instance, string alt){
   return string.IsNullOrEmpty(instance) ? alt : instance;
 }

 var str1 = "".IfNullOrEmpty("foo"); //'foo'
 var str2 = ((string)null).IfNullOrEmpty("bar"); //'bar'
 var str3 = "Not null or empty".IfNullOrEmpty("not used"); //'not null or empty' 
```

尽管请注意，我发现为了使扩展方法出现在一流的编译时常量上，例如`""`您需要将该扩展方法合并到`System`; IE：

```
 namespace System {
   public static class MyStringExtensions { 
     // method here
   }
 } 
```

***不要这样做——只是为了好玩***

您*可以*- 尽管我不推荐它 - 为其编写一个`String`包含隐式转换运算符的包装器类型，如果字符串为空`string`，则返回该运算符 - 因此在该类型的实例上使用运算符将​​产生正确的行为：`null``??`

```
 public class FakeString
    {
        private string _source;
        public FakeString(string source)
        {
        }

        public static implicit operator string(FakeString instance)
        {
            return string.IsNullOrEmpty(instance._source) ? null : instance._source;
        }

        public static implicit operator FakeString(string source)
        {
            return new FakeString(source);
        }
    }

    [TestMethod]
    public void Test()
    {
        FakeString fs = "";
        string result = (string)fs ?? "foo";

        Assert.AreEqual("foo", result);
    } 
```

但是，您能看到吗？您必须使用强制转换来启动转换，这真的很丑陋和可怕，好吧，不要这样做。但你*可以*。 *我*不会。

我需要更多免责声明吗？

**关于显式演员表的一点说明**

我的很大一部分认为这`string result = fs ?? foo;`应该有效，但事实并非如此。原因是`null`执行的检查`??`仅在左侧的引用上进行 - 它与类型无关，除非是可为空的值类型。反编译 IL，将引用简单地加载到堆栈上，然后检查它的计算结果是真还是假，代码在该点分支到将值加载到堆栈上的两个进一步操作之一（这是`FakeString`运算符然后被调用）。对于可为空的值类型，这种行为是不同的——编译器知道这些，因此会相应地改变它的行为。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T08:20:54.767

不，请看这里[Overloadable Operators C#](http://msdn.microsoft.com/en-us/library/8edha89s.aspx)。'这些运算符不能重载。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T08:21:33.240

根据[这个](http://msdn.microsoft.com/en-us/library/8edha89s%28v=vs.71%29.aspx)你不能超载？？操作员。

# php - 使用 Web Html 表单创建 Javascript 数组

> ID：12365525
> 
> 赞同：1
> 
> 时间：2012-09-11T08:20:07.217
> 
> 标签：php, javascript, ajax

我有一个像下面这样的表单我需要使用 JavaScript 为每个单选按钮创建一个数组，我需要使用 Ajax 发布到 PHP 脚本

```
<form id="what" name="what" >
<input type="radio" name="colors" id="red" value="red" />Red<br />
<input type="radio" name="colors" id="blue" value="blue" />Blue<br />
<input type="radio" name="colors" id="green" value="green" />Green

<input type="radio" name="animals" id="dog" value="dog" />Red<br />
<input type="radio" name="animals" id="parrot" value="parrot" />Blue<br />
<input type="radio" name="animals" id="horse" value="horse" />Green

<button type="button" >send</button>
</form> 
```

我的 Ajax 发布代码

```
var data = 'username=' + username + '&api_password=' + apipassword + '&sender=' + sender + '&to=' + owner + "," +  mobile + '&message='  + "Name : " + name +"%0d%0a"+ "Mobile No : " + mobile +"%0d%0a"+ "Address : " + street +" "+ area + " " + formlandmark +"%0d%0a"+ "Notes : " + notes + "%0d%0a" + "Order Id : " + randomnewnewnumber + "%0d%0a" +  itemstosmsdata() + '&priority=' + priority;
var adminsubmit = 'name=' + name+'&mobile='+ mobile +'&adds='+ street +" "+ area + " " + formlandmark +'&notes='+ notes+'&orderid='+ randomnewnewnumber+'&orders='+ itemstowebdata()+'&status=opened'+'&time='+time+'&date='+ dates;
            $('.text').attr('disabled','true');
            $('.loading').show();

            $.ajax({
                url: "http://something.some.com/appost.php?",   // Your Sms Api Url
                type: "POST",
                data: data,     
                cache: false,
                success: function (html) {  
                    alert("Order Placed");  
                    if (html==1) {      

                        $('.form').fadeOut('slow');                 
                        $('.done').fadeIn('slow');
                    }           
                }       
            }); 
```

数据应该如下发送

```
 radio[ { "radiobuttonename" => clicked value of the radio button},{ "radiobuttonename" => clicked value of the radio button}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:47:52.870

您可以使用以下代码（使用[jQuery](http://jquery.com/)）来做到这一点

**HTML**

```
<form id="what" name="what" >
    <input type="radio" name="colors" id="red" value="red" />Red<br />
    <input type="radio" name="colors" id="blue" value="blue" />Blue<br />
    <input type="radio" name="colors" id="green" value="green" />Green<br /><br />

    <input type="radio" name="animals" id="dog" value="dog" />Red<br />
    <input type="radio" name="animals" id="parrot" value="parrot" />Blue<br />
    <input type="radio" name="animals" id="horse" value="horse" />Green

    <input type="submit" value="send" name="btn" />
</form> 
```

**JS**

```
$(function(){
    $('form#what').on('submit', function(e){
        e.preventDefault();
        var frm=$(this);
        var len=$('input:radio[name="colors"]:checked', frm).length;
        if(!len) 
        {
            alert('Please select a color');
            return false;
        }
        var arr=frm.serialize();
        $.post('ajax_php.php', arr,  function(data){
            //console.log(data);
            // do something with data 
        });
    });
}); 
```

您可以按如下方式接收`colors`and`animals`变量`php`

```
$color=$_POST['colors'];
$animal=$_POST['animals']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:02:03.437

这是一个框架，可以帮助您序列化此表单并使用 ajax 将数据发送到某个端点。

```
(function($) {
    $('#what').bind('submit', function(e) {

        $.post('/url/to/send', $(this).serialize(), function(response) {
            console.log(response);
        });

    });

})(jQuery); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:10:29.230

此代码是用表单中的所有单选值填充您的数组：

```
var theArray = []
$("#what > input[type='radio']").each(function(){
theArray.push($(this).val())
})

// theArray  will be like this: red,blue,green,dog,parrot,horse 
```

如果你想通过数组传递选中的属性，你可以这样做：

```
theArray.push($(this).val() + "@" + this.checked)

// theArray  will be like this: red@false,blue@false,green@false,dog@true,parrot@false,horse@false 
```

最后，将您的数组转换为字符串：

```
theArray = theArray.join("##") 
```

现在您可以使用 ajax 发送您的数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T09:28:27.500

只需使用 jquery**[序列化](http://api.jquery.com/serialize/)**功能，就像这样

```
$('#what').on('submit', function(e) {
    e.preventDefault();
    alert($('#what').serialize());
  });​ 
```

检查[**小提琴**](http://jsfiddle.net/D6Kza/1/)

# performance - 面向对象、面向数据、缓存污染和缓存明显性

> ID：12365527
> 
> 赞同：9
> 
> 时间：2012-09-11T08:20:10.223
> 
> 标签：performance, oop, caching, memory-efficient, data-oriented-design

在常规的面向对象实践中，很少有对象具有多个不相关的成员属性。并且在处理对象时，在不同的通道中完成并针对其属性的不同部分进行处理的情况并不少见。

在这方面，创建对象集合的典型方法似乎不是一种非常有效的方法。考虑到计算机访问内存的方式和高速缓存行的平均大小，高速缓存很有可能被不需要的内存填满，而只是碰巧相邻，因此最终浪费了缓存的容量并增加了停顿和执行延迟。

更糟糕的是使用多态性和动态分配对象的做法，没有内存池和自定义分配器。在这种情况下，不仅高速缓存充满了不需要的数据，而且由于动态内存分配使用的任意地址，预取器也无法充分工作。

拯救是回到 OOP 之前的时代并选择面向数据，这似乎是开发性能关键应用程序、操作系统等的偏好选择。但是为什么不使用两者的混合版本呢？**面向数据的对象编程**排序？

经过这么长的序曲，让我们来看看手头的问题。我没有足够庞大的项目来测试这个概念的效率，因此非常欢迎社区的理论专业知识。

如果对象不存储自己的数据成员，它们只存储对集合的引用，它们的数据成员按顺序存储在自己的容器中，并且它们的成员方法从这些容器返回数据，这样不需要的数据结束的几率应该减少到 CPU 的路上，并且增加在不久的“未来”需要的数据的几率。合乎逻辑的假设是，这种方法将提高预取器效率、缓存命中率和使用效率，还将减少自动和手动并行化所涉及的延迟。

你怎么看？

后期编辑：如果我们考虑结构和类填充，则应用“数据定向模式”可能会更有益，如果“模型”具有 a`char`和 a`int`数据成员，则在 OOP 方式中它将被填充，这只会造成污染进一步缓存，但是面向数据的存储模式可以将所有`char`s和所有`int`s顺序存储，完全没有空间和缓存浪费。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:53:20.610

首先，漂亮的幻灯片演示。好吧，据我所知，您的问题与演示方法完全不同。变量随机存储在主内存中，甚至对象属性。如果您尝试将内存分配给连续的数据结构，那么您的数据结构的大小将受到主内存中最大的“气泡”的限制，否则它不会是纯粹连续的。也许你是这样想的：

```
class MyClass
{
public:
    MyClass()
    {
        m_dataMembers = new GenericObject[DATA_MEMBERS_AMOUNT];

        //initialize array values...
    }

    int getMyVar()
    {
        return (int)m_dataMembers[MY_VAR_INDEX];
    }

    //others functions...

private:
    GenericObject* m_dataMembers;
} 
```

这样一来，你就会遇到一些问题。首先，您将需要一个通用对象类来存储任何类型的变量。然后您需要知道每个变量在数据结构中的位置，然后您需要知道数据结构中每个变量的类型，以便在 getter 中正确转换。他在演示文稿中实际所做的是减少他的类大小，使用引用，使其更好地适合缓存页面，并减少缓存中的使用，而不是主内存中的使用。我希望我没有误解你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-23T10:16:57.200

`IPixel`我看到的方式是，如果您在非常精细的粒度对象（如抽象接口）级别使用多态性，那么对象级别的多态性本质上是昂贵的。在这种情况下，从效率的角度来看，围绕`IPixel`依赖关系旋转的视频处理软件将非常糟糕，因为它没有喘息的空间来优化。除了每个像素的动态调度成本之外，甚至这里所需的虚拟指针也可能比整个像素本身大，内存使用量增加一倍或三倍。此外，我们不能再以超出单个像素的方式使用像素表示，而且最可怕的是，图像中的相邻像素甚至可能不会在内存中连续表示。

同时`IImage`可以提供足够的优化空间，因为图像建模像素的集合/容器，并且仍然具有足够的灵活性（例如：每种像素格式的不同具体图像表示）。现在每个图像的动态调度很便宜，并且虚拟指针的大小对于整个图像可以忽略不计。我们还可以探索如何以允许我们一次有效地处理多个像素的方式将像素表示为我们内心的内容。因此，与您类似，我认为它是在适当的粗略水平上设计对象的问题，这通常意味着事物的集合，以减少所有开销和优化所面临的障碍。

> 对象不存储自己的数据成员，它们只存储对集合的引用，它们的数据成员按顺序存储在自己的容器中，并且它们的成员方法从这些容器返回数据，这样不需要的数据结束的可能性应该减少到 CPU 的路上，并且增加在不久的“未来”需要的数据的几率。

我喜欢这个想法，但如果你对多态上下文太过分了，你可以回到自定义内存分配器和排序基指针。我经常发现这种设计的用途是在需要聚合以提高效率的情况下提高使用单个元素的便利性（一种情况是使用 SoA 表示的容器，另一种我将在下面介绍）。

多态情况不一定有那么多好处，因为固有的问题在于一次一个地处理颗粒事物的*非同质*处理。为了恢复效率，我们必须恢复关键循环的同质性。

**非同质关键循环**

举个例子，`Orc`继承`Creature`和`Human`继承`Creature`，`Elf`继承`Elves`，但是人类和兽人和精灵有不同的大小/字段，不同的对齐要求和不同的vtables。在这种情况下，当客户端代码想要处理它们的非同质列表时，它们存储指向生物的多态基指针，如下所示：

```
for each creature in creatures:
     creature.do_something(); 
```

...与这会牺牲多态性相反：

```
for each orc in orcs:
     orc.do_something();
for each human in humans:
     humans.do_something();
for each elf in elves:
     elves.do_something(); 
```

...如果我们每次引入一种新型生物时都需要在许多地方这样做，这将是一个真正的 PITA 扩展...

...然后，如果我们想保持多态解决方案但仍以非同质方式一次处理每个生物，那么无论每个生物是否仅存储反向指针，我们最终仍会丢失时间和空间局部性到容器与否。我们失去了 vtable 的时间局部性，因为我们可能在一次迭代中访问一个 vtable，然后在下一次迭代中访问另一个 vtable。这里的内存访问模式也可以是随机的和零星的，导致空间局部性的丢失，因此我们最终会出现大量的缓存未命中。

因此，在这种情况下，如果您想要继承和多态性，我的解决方案是在容器级别进行抽象：`Orcs`继承`Creatures`、`Humans`继承`Creatures`。`Elves`继承`Creatures`. 当它想要表达对特定生物执行的操作时，这会将一些额外的复杂性转移到客户端代码，但是现在上面的顺序循环可以这样编写：

```
for each creatures in creature_types:
     creatures.do_something(); 
```

在第一次迭代中，这可能会对整个兽人列表（可能就像存储在数组中的一百万兽人）做一些事情。现在该列表中的所有兽人都可以连续存储，我们正在对该列表中的所有兽人应用同构功能。在这种情况下，我们有大量的喘息空间可以在不改变设计的情况下进行优化。

我们在这里仍然有一个利用多态性的非同质循环，但现在这样便宜得多，因为我们只为整个生物容器支付开销，而不是为每个单独的生物支付开销。处理单个生物的循环现在是同质的。这类似于使用抽象`IImage`来照亮一堆图像（一堆像素容器），而不是对一次实现`IPixel`的一个抽象像素对象这样做。

**同构循环和表示**

因此，这将繁重的关键循环从非同质循环转移到一次处理各种不同数据的非同质循环，并将它们转移到同质循环处理连续存储的同质数据。

这是我对界面设计的一般策略。如果它容易以难以优化的方式产生热点，那么在我看来，固有的问题是界面设计的层次太细（`Creature`，不是`Creatures`）。

因此，如果希望使用 OOP，这就是我解决此问题的方法。我认为您的设计理念类型可能有用的地方是简化客户端代码必须表达仅适用于一个特定生物的操作的情况，此时它们可以通过某种指向容器的代理对象工作，并且可能存储指向特定条目的索引或指针以方便使用，例如引用抽象容器`CreatureHandle`之一中的特定条目。`Creatures`

# sql-server-2008 - SQL Server Management Studio SELECT TOP(119) 与 SELECT TOP(120)

> ID：12365528
> 
> 赞同：0
> 
> 时间：2012-09-11T08:20:11.427
> 
> 标签：sql-server-2008

我注意到如果我`SELECT TOP(119)`从`SELECT TOP(120)`. 有谁知道为什么会这样？

仅供参考，我正在查询连接两个表的单个视图：一个具有 2.2m 行 x 150 cols，另一个具有 1.0m 行和 10 cols。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:17:41.840

不同之处在于查询的执行计划。查询优化器使用统计信息来尝试找出获取所需行的最佳方法，对您来说，您似乎已经找到了优化器选择使用不同计划的地方。

# javascript - 在同一选项卡中启动下载，而无需在 Javascript 中打开新选项卡或窗口

> ID：12365534
> 
> 赞同：36
> 
> 时间：2012-09-11T08:20:41.210
> 
> 标签：javascript, download

我正在使用这个 javascript 函数来启动下载

```
function startDownload(url) {
   window.open(url, 'Download');
} 
```

它有效，但我想阻止任何新标签或新窗口启动，谢谢。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-11T08:23:23.637

```
function startDownload(url) {

    window.location.href = url;
} 
```

这将在同一页面开始下载，就像您单击没有任何目标的链接时一样`_self`。

要强制下载文件，请确保发送正确的标题：

```
Content-Disposition: attachment; filename="mypdf.pdf"; 
```

这将确保文件不会显示在浏览器中而不是被下载。将文件名部分替换为`save as`对话框中所需的默认文件名。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-11T08:23:15.917

`window.open`将打开一个新窗口 \ 选项卡（取决于用户偏好）...只需下载文件使用

```
window.location.href = url; 
```

如果`url`返回可下载文件而不是网页，则可以使用它

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-04-05T02:59:58.830

具有“下载”属性的 HTML5 解决方案

```
<a href="/images/myw3schoolsimage.jpg" download> 
```

[https://www.w3schools.com/tags/att_a_download.asp](https://www.w3schools.com/tags/att_a_download.asp)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-31T07:33:19.380

```
<a target="_parent" href="link"></a> 
```

*   _blank - URL 被加载到新窗口中。这是默认的
*   _parent - URL 被加载到父框架中
*   _self - URL 替换当前页面
*   _top - URL 替换任何可能加载的框架集 name - 窗口的名称

# jquery - HTML5 视频自动播放/关闭

> ID：12365543
> 
> 赞同：1
> 
> 时间：2012-09-11T08:21:14.873
> 
> 标签：jquery, iphone, html, video, web

我想在 iPhone 用户访问的特定页面的启动时打开一个视频，然后（当视频完成后）返回该页面。此时我还将设置一个 cookie，因此视频只会在第一次加载（但我对那部分很好）。

我可以找到直接链接到 mp4 的方法，但我无法从那里返回。我也遇到了带有自动播放功能的 HTML5 视频标签，但这似乎不是我想要的。有 jQuery 解决方案吗？还是更好的 HTML5 解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:13:04.940

很抱歉，但`autoplay`在 IOS 和大多数移动平台中已禁用。

要开始播放视频/音频，需要用户交互。禁用自动播放以保留带宽和电池使用情况。

[您可以在此处](https://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW1)获得有关此的更多信息。请注意，javascript 方法`video.play()`也`video.load()`被禁用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T08:39:17.213

要自动播放，请执行以下操作

```
<video controls="controls" autoplay="autoplay">
  <source src="movie.mp4" type="video/mp4" />
  <source src="movie.ogg" type="video/ogg" />
  Your browser does not support the video tag.
</video> 
```

完成后做某事

```
<script>

    //could easily be getElementById(NAME) also

    video.onended = function(e) {
      alert("The video finished");
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T08:48:37.003

自动播放在 IOS 和大多数移动平台中被禁用。

“请注意，javascript 方法 video.play() 和 video.load() 也被禁用。” 这句话是错误的，video.play() 和 video.load() 是为很多移动平台启用的。如果您使用 WebView，请在 android 上检查 WebSetting.setJavaScriptEnabled(true)，默认值为 false。

您可以这样做来代替自动播放。

```
<body onload="bodyLoad()">
<video id="video1" width="320" height="240" controls="controls">
                                        <source src="video/movie.mp4" type="video/mp4">
                                        Your browser does not support the video tag.
                                        </video>
<script type="text/javascript">
        var myVideo=document.getElementById("video1");

        function bodyLoad() {
                    setTimeout(playFunc, 10);
         }

        function playFunc() {
                    myVideo.play();
         }
</script> 
```

# regex - 正则表达式不以 0 开头

> ID：12365544
> 
> 赞同：0
> 
> 时间：2012-09-11T08:21:17.010
> 
> 标签：regex, ssi

我有一些带有此 URL 的页面

```
folder/t_01_class.shtml 
```

带序号

```
folder/t_02_class.shtml
folder/t_03_class.shtml
folder/t_10_class.shtml
folder/t_11_class.shtml
folder/t_12_class.shtml
folder/t_23_class.shtml 
```

我需要使用不考虑第一个零的正则表达式来获取变量，所以结果应该是

```
<!--#set var="page" value="2"-->
<!--#set var="page" value="3"-->
<!--#set var="page" value="10"-->
<!--#set var="page" value="11"-->
<!--#set var="page" value="12"-->
<!--#set var="page" value="23"--> 
```

任何建议

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:25:25.623

如果正则表达式针对 URL 中请求的整个页面名称进行操作，我建议使用类似于`/t_0*([1-9]\d*)_/`然后检索编号组 1 的内容。

澄清该正则表达式：

`//`在每一端周围是表示正则表达式本身的分隔符，它们不是匹配的活动部分。

`t_`将匹配页面的开头

`0*`将匹配任何前导 0

`[1-9]\d*`将匹配从 1-9 开始的任何数字，以及 0 个或多个后续数字（`\d`相当于`[0-9]`，并且`*`after`\d`表示“0 个或多个”）

`()`围绕上面的位将使其成为一个编号组，允许您检索匹配项

`_`最后是确保号码匹配完成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:23:00.643

```
[1-9][0-9]* 
```

将匹配任何大于零的整数，删除前导零。

# c# - 向属性注入一些依赖项

> ID：12365545
> 
> 赞同：0
> 
> 时间：2012-09-11T08:21:19.150
> 
> 标签：c#, inversion-of-control, castle-windsor, ioc-container, custom-attributes

我正在开发一个多语言网站。我基于以下 LocalizedDisplayAttribute 类显示多语言文本的解决方案。我想为这个类注入一些依赖。但是这个类是由.Net Framework实例化的。容器如何在不使用服务定位器的情况下注入依赖项？

这是我的代码块

```
[AttributeUsage(AttributeTargets.All)]
public class LocalizedDisplayAttribute : DisplayNameAttribute
{
    public MultilanguageKeys Key { get; set; }
    public IMultilanguageManager MultilanguageManager { get; set; }              

    public LocalizedDisplayAttribute(IMultilanguageManager multilanguageManager)
    {
        this.MultilanguageManager = multilanguageManager;
    }

    public override string DisplayName
    {
        get
        {
         // Run some business   
         return GetCustomAttribute(Key);
        }
    }      

    private string GetCustomAttribute(MultilanguageKeys key)
    {
        int multiLanguageId = 3;            

        MultiLanguageDictionaryInfo multiLanguageDictionary = MultilanguageManager.DictionaryList()
                                                            .Where(t => t.Key == key.ToString())
                                                            .Where(t => t.MultilanguageId == multiLanguageId)
                                                            .FirstOrDefault();           

        return multiLanguageDictionary.Value;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:35:35.480

正如你提到的，属性类是由.NET框架创建的，所以我相信不可能自动进行依赖注入，你需要手动注入。

使用此解决方案将属性注入构造对象：

[温莎城堡注入构造对象的属性](https://stackoverflow.com/questions/851940/windsor-castle-injecting-properties-of-constructed-object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:41:22.700

您必须覆盖 ControllerActionInvoker 类和 InvokeActionMethodWithFilters 方法，您可以在其中使用 windsor 注入对实例化对象的依赖项

编辑：意识到这是针对 mvc 的，不知道如何在 webforms 环境中进行操作

# ios - iOS XML Parser 内存泄漏与 KissXML

> ID：12365550
> 
> 赞同：1
> 
> 时间：2012-09-11T08:21:28.840
> 
> 标签：ios, memory-leaks, xml-parsing, kissxml

这几天我一直被这个内存问题弄糊涂了。在我的 iOS 项目中，我使用 KissXML 作为 XML 解析器。我的 XML 文件很大（15M）。现在，内存问题来了：

这是我的代码

http连接完成部分：

```
NSData *copyData = [NSData dataWithData:self.httpData];  //self.httpData-recieved from http connection.
dispatch_async(globalQueue,^{  //globalQueue-GCD global queue.
    [AIDXMLParser universalParser:copyData];  //Class method for XML Parser.
}); 
```

在 API:universalParser 的 AIDXMLParser.m

```
DDXMLDocument *doc = [[DDXMLDocument alloc] initWithData:xmlData options:0 error:nil];
[doc release]; 
```

当我运行我的应用程序时。我使用 [Activity Monitor] 来捕捉我的内存使用情况。

> 之前：[Real memory size] 为 40.7M
> 
> 之后：【实际内存大小为63.1M

增加的内存 (63.1M-40.7M) 永远保留在那里。

一切正常。我尝试过使用 TBXML 而不是 KissXML。使用 Instruments-Profile/Analyze 进行测试，但仍然没有错误或警告。我不知道我错在哪里。

还有其他人面临同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:56:24.407

这可能是因为您的 NSData 的大小，请尝试拆分您的 XML 并进行多次解析。

我对 10MB 以上的 JSON 也有同样的问题。

# c# - X509Certificate2 p12 是否需要存储？

> ID：12365553
> 
> 赞同：5
> 
> 时间：2012-09-11T08:21:36.997
> 
> 标签：c#, x509certificate, private-key, x509certificate2

运行以下代码时的问题：

```
X509Certificate2 cert = new X509Certificate2(@"C:\file.p12", "password", X509KeyStorageFlags.Exportable);
RSACryptoServiceProvider crypt = (RSACryptoServiceProvider)cert.PrivateKey; 
```

我收到以下错误：`Keyset does not exist`。

我还没有将证书添加到商店，这是否需要能够访问私钥？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T08:40:54.887

将[X509KeyStorageFlags.PersistKeySet](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509keystorageflags.aspx)选项添加到 X509Certificate2 构造函数的最后一个参数。否则，当它加载 p12 文件时，它不会加载私钥。具体来说：

```
X509Certificate2 cert = new X509Certificate2(@"C:\file.p12", "password",    
    X509KeyStorageFlags.Exportable | X509KeyStorageFlags.PersistKeySet);
RSACryptoServiceProvider crypt = (RSACryptoServiceProvider)cert.PrivateKey; 
```

如果失败，则可能是密钥存储位置的文件权限问题。有关说明和示例，请参阅[X509Certificate - Keyset 不存在。](https://stackoverflow.com/questions/6392268/x509certificate-keyset-does-not-exist)

# ruby-on-rails - 我加密密钥的方法是否安全？

> ID：12365554
> 
> 赞同：1
> 
> 时间：2012-09-11T08:21:42.367
> 
> 标签：ruby-on-rails, encryption, hash, security

我正在编写一个 Rails 3 Web 应用程序，匿名用户将能够在其中输入有关事件的详细信息，并将它们加密到我的数据库中，只能由该用户或具有用户在创建它时决定的每个事件密码的任何人检索.

我做这一切是为了让我的头脑了解加密和散列编程，所以这可能有点矫枉过正，但我​​想要一个“最安全”做事方式的工作模型，无需进入双重身份验证或未连接到隐藏在地壳下 30 公里的秘密保险库中的任何网络的计算机（我已经有两个）。

我正在存储的当前数据及其全部加密如下，我只是想要一些关于我是否使用任何不安全的方法或任何会削弱我的应用程序（尤其是我的用户数据）攻击的反馈.

每个事件都使用透明数据加密将以下字段存储在 Oracle 数据库中：

*   ID
*   事件数据
*   密码哈希
*   加密_iv
*   加密密钥
*   admin_retrievable_event_data
*   admin_encrypted_iv
*   admin_encrypted_key

网络服务器以受限制的系统权限运行，已完全修补，并且网络服务器进程无法浏览站点目录结构之外的内容。网络服务器仅运行 HTTPS。

当用户创建事件时，他们提供明文数据进入 event_data 字段，并提供密码来保护该数据。要检索数据，他们只需输入提交表格后提供的 ID 号以及他们选择的密码。在事件创建期间，用户还可以选中一个框以允许生成管理员可检索的数据（如果他们选择的话）。此选项默认设置为 false。

出于管理员检索的目的，该事件的明文仍保存在内存中，如下所述。

使用 AES256 CBC 加密以及安全生成的随机 IV 和密钥来保护事件数据。然后使用存储在服务器上的公钥（RSA 2048 位）对 IV 和密钥进行加密。然后，IV 和密钥都与用户提供的密码的 SHA-256 散列进行异或，随后都存储在数据库中。

然后使用 SHA-256 对用户密码进行哈希处理，使用 256 位安全随机生成的令牌作为盐，使用包含哈希和盐的冒号分隔符创建一个字符串，然后使用公钥加密（与之前的相同） ) 并存储在数据库 password_hash 字段中。

然后，明文事件数据使用新随机生成的密钥和 IV 进行相同的过程以供管理员检索并存储，然后使用不同的公钥（仅用于管理员检索）对密钥和 IV 进行加密，并存储在数据库而不是对任何东西进行异或。

要检索数据，用户输入他们的事件 ID 和密码。首先，password_hash 使用私钥（存储在服务器上的非 Web 可访问目录中）解密（该私钥的密码被硬编码到应用程序中），然后使用用户输入的密码重新散列从现在未加密的数据库条目中提取盐，如果它与存储的加盐密码的哈希匹配，则该过程继续（否则，返回“未找到事件 ID 或密码不正确”的错误）。

然后将加密的密钥和 IV 与新生成的用户密码的未加盐散列进行异或运算，并使用用于密码散列的相同私钥/密码进行解密。这些随后用于解密 event_data，并将数据返回给用户。

如果管理员希望检索数据，他们必须上传私钥并输入私钥密码，此时管理员 IV 和密钥被解密，内存中的私钥被销毁，管理员可检索事件数据被解密.

* * *

所以，这就是我对这个东西的设计，我发现的唯一当前弱点是将用于事件和用户密码加密的私钥存储在服务器上，并将该私钥密码硬编码到应用程序中。但是，如果不在基于硬件的加密设备上花费大量资金，我就看不到解决方法。如果有人可以建议一种更好的架构方法来避免该问题，并且不会给最终用户带来不便，方法是为每个事件生成单独的证书并为他们提供私钥，随后迫使他们在每次想要解密事件时重新上传它数据，我对此持开放态度。

如果您发现除这些问题之外的任何问题，我也很想知道它，并且希望获得资源来阅读或解释问题是什么以及我可以做些什么来纠正它。

请注意，我不具备大学水平的数学知识，尽管我很想了解加密，但我远远低于我可以为自己进行任何类型的密码分析的水平。在这个项目中，我只是简单地阅读了我能理解的水平的概述，并尝试应用这些知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:32:09.223

计划看起来很复杂，魔鬼总是在细节中。如果您的应用程序能够在未经用户许可的情况下检索数据，那么您添加的所有加密糖可能都没有多大价值，因为攻击很可能来自应用程序层。

看看（好的）全盘加密软件是如何工作的。无需过多了解细节，只需考虑获取用户密码，对其进行散列（使用您喜欢的任何散列函数）并在加密数据时将其用作对称密钥。如果用户忘记了密码，那么这些数据就毫无用处了。

您可以在其中添加一些盐以防止字典攻击，但是您需要将盐存储在某个地方...

对于管理员访问，生成一个随机密码，将其通过电子邮件发送给管理员，然后对其进行哈希处理，用它加密数据，并将其单独存储在数据库中。

看看[http://blog.cryptographyengineering.com/2011/11/how-not-to-use-symmetric-encryption.html](http://blog.cryptographyengineering.com/2011/11/how-not-to-use-symmetric-encryption.html)，它深入探讨了如何最好地处理 IV 和加密模式。

# android - 如何在 Android 中定义自定义属性

> ID：12365558
> 
> 赞同：0
> 
> 时间：2012-09-11T08:21:54.703
> 
> 标签：android, android-xml

我想在我的 Android 应用程序中定义一个自定义属性。

我已经定义了扩展 View 的 GifMovieView 类。

所有 3 个构造函数都调用一个 init(AttributeSet attrs) 方法：

```
if (attrs != null) {
        String packageName = "http://schemas.android.com/apk/res/android";
        mUrl = attrs.getAttributeValue(packageName, "url");
        Log.i("TAG_MIO", mUrl);
    } 
```

Log.i 引发异常，因为 mUrl 为空。

此属性在 mainActivity_layout.xml 中以这种方式定义：

```
 <com.example.propertyproject.GifMovieView
    android:id="@+id/my_id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    gif:url="http://mygif.com/mygif.gif" /> 
```

网址始终为空...

包名有错吗？packageName 是否必须更改？

提前TY，

阿德里亚诺。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:29:47.807

`*_layout.xml`用于定义 GUI 的布局，而不是用于定义自定义字符串。

为它预留了另一个位置，它位于`res/values/strings.xml`. 如果`strings.xml`不存在，请使用以下内容创建它：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>    
  <string name="gif_url">http://mygif.com/mygif.gif</string>
</resources> 
```

然后你可以使用它访问它

```
String url = R.string.gif_url;  // (it becomes a static final property) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:58:58.823

1.  在 values 文件夹中创建 attrs.xml 文件，它包含您所有的自定义属性

 `````
<?xml version="1.0" encoding="utf-8"?>

<resources>
    <declare-styleable name="MyTextView">
        <attr name="font_name" format="string" />
    </declare-styleable>
</resources> 
````  `1.  在 values 文件夹中创建 styles.xml，它将包含特定组件的样式，这里我以 Textview 为例，我将在 TextView 中设置字体名称属性

 `````
<style name="Header_Text_Text1">
        <item name="android:textColor">@color/text1_header_text</item>
        <item name="android:textSize">26px</item>
        <item name="android:textStyle">bold</item>
        <item name="android:padding">2dp</item>
        <item name="[YOUR PACKAGE NAME]:font_name">calibri</item>
    </style> 
````  `1.  让我们创建 java 文件来使用我们的新属性，我将扩展 Textview，创建 mytextview.java

`public class MyTextView extends TextView {`

 ````
public MyTextView(Context context, AttributeSet attrs) {
    super(context, attrs);

    if (isInEditMode())
        return;

    final TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.MusicTextView);
    final String ttfName = ta.getText(0).toString();
    Log.i("Font Name :" + ttfName);
    ta.recycle();
} 
```` 

`}`

1.  新的我们可以在布局中使用名为“MyTextview”的新 Textview。

 `````
<YOUR PACKAGE NAME.MyTextView
        android:id="@+id/header_txtTitle"
        style="@style/Header_Text_Text1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/header_home"
        android:layout_marginTop="2dp"
        android:text="" /> 
`````````

# axis2 - 代理创建向导 Wso2 ESB

> ID：12365559
> 
> 赞同：0
> 
> 时间：2012-09-11T08:21:56.310
> 
> 标签：axis2, wso2, esb, wso2esb

您好，我想为我的老板实现一种向导，为 wso2 Esb 创建一个新代理。

它不应该真的很复杂，只需添加`inSequence`一个安全性（可能`UsernameToken`来自 ESB 内置安全性场景）。

1）这可能吗？我的意思是它应该因为是编写 XML 的问题，但我不知道如何才能真正实现这一点？你有什么建议吗？

2）如果我在 ESB 的正确文件夹中编写了一个 XML 的 Java 应用程序（我认为它是“ `ESB_HOME\repository\deployment\server\synapse-configs\default\proxy-services`”），我是否需要重新启动 ESB 才能使新代理工作？

有什么建议吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:48:09.937

您是否尝试过 WSO2 Developer Studio，它就是为了这样做。

但是，如果这不是您需要的，您当然可以编写一个 GUI 客户端或向导，并生成代理模板并将其推送到 synapse-configs\default\proxy-services。如果启用了热部署，它将立即被拾取。否则你必须重新启动。

我不太清楚您的#3 要求。IMO，您正在尝试获取代理服务的 URL。对于所有服务，URL 都有一个模式，所以它基本上是一个常量字符串 + 您正在使用的代理名称。

# javascript - Jquery 菜单转换

> ID：12365560
> 
> 赞同：0
> 
> 时间：2012-09-11T08:21:55.780
> 
> 标签：javascript, jquery

我刚开始学习 Jquery，正在制作一个 div 滑动菜单，这就是我目前所拥有的。

[http://jsfiddle.net/HfdXY/494/](http://jsfiddle.net/HfdXY/494/)

我不确定我这样做是否正确，所以任何关于如何改进此代码的建议都将不胜感激。

但是现在的问题是，当我单击 A 然后 B 时，我怎样才能使 B 的菜单从 B 过渡到 A，而不是像现在这样在它下方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:38:02.650

您的菜单存在的问题是动画同时发生，您需要确保每个动画单独或相互独立地发生。

为此，您可以将动画添加到它们自己的函数中，并在需要时调用它们。

```
function animateB(){
  $("#B").animate({left: "0px"}, 1000);
} 
```

或者[`.delay()`](http://api.jquery.com/delay/)看看如何在下一个动画发生之前在动画之后添加延迟。

另请查看[此](https://stackoverflow.com/questions/461912/finish-one-animation-then-start-the-other-one)答案，其中还有一些其他建议可能会有所帮助。

# jquery - 延迟对象的问题

> ID：12365568
> 
> 赞同：0
> 
> 时间：2012-09-11T08:22:31.240
> 
> 标签：jquery, ajax, deferred

我有一个问题，我试图通过在 javascript 中使用延迟对象来解决（而且我是延迟对象的新手）。

问题：用户尝试运行一个函数（可以是很多不同的函数）。如果功能失败...它将尝试再次登录，然后再试一次（一次）。如果登录失败。那么一切都失败了。

这些函数和登录函数包含将返回的 Ajax 调用。

我的问题是：在函数中的所有其他代码都运行之后，我可以依靠那个 var dfd（在 tryAjax 函数的末尾）最后执行吗？

这是代码：

```
function tryAjax(func)
{
    var dfd = new jQuery.Deferred();
    window[func]().then(
    function(p1,p2,p3)
    {
        //Everything worked great. No need to login.
        dfd.resolve(p1,p2,p3);
    },
    function()
    {
        //func failed
        //try to login user again before trying.
        loginUser().then(
        function()
        {
            //Login success
            //Try to run func again.
            window[func]().then(
            function(p1,p2,p3)
            {
                //Func succes after login
                dfd.resolve(p1,p2,p3);
            },
            function(p1,p2,p3)
            {
                //Func failed after login
                dfd.reject(p1,p2,p3);
            });
        },
        function(p1,p2,p3)
        {
            //Login failed
            dfd.reject(p1,p2,p3);
        });
    });

    return dfd;   
}

And to call it:
tryAjax('getData').then(
function(p1,p2,p3)
{
    //Success  
},
function(p1,p2,p3)
{
    //Error
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:31:22.960

所以基本上，你想按顺序执行 3 deferred，并在第一次成功后停止。我会使用像这样的通用函数：

```
function dfdSequence() {
  var deferred = jQuery.Deferred();
  var execute = function(functions) {
    var promise = functions[0].apply(functions[0], args);
    promise.done(function() {
      deferred.resolve();
    });
    if (functions.length === 1) {
      // It was the last call
      promise.fail(function() {
        deferred.reject();
      });
    } else {
      // Fail, let's move on the next function
      promise.fail(function() {
        execute(functions.slice(1, functions.length));
      });
    }
  };
  execute(Array.prototype.slice.call(arguments, 0, arguments.length));
  return deferred.promise();
} 
```

此函数接受任意数量的函数并按顺序执行它们。基本上，每个函数都会返回一个promise，如果promise 被拒绝则执行下一个函数。使用示例：

```
dfdSequence（函数（）{
  // 你的第一次登录尝试
  返回 $.ajax(...);
}， 功能（） {
  // 你的第二次登录尝试
  返回 $.ajax(...);
}， 功能（） {
  // 您的最后一次登录尝试
  返回 $.ajax(...);
}).then(function() { /* 成功！*/ }, function() { /* 失败 */ });

```

**编辑：** 嗯，我想我误解了这个问题。这段代码怎么样：

```
函数获取数据（）{
  返回 $.ajax(...);
}
功能登录用户（）{
  返回 $.ajax(...);
}
var deferred = jQuery.Deferred();
获取数据（）。然后（函数（）{
  // 成功
  deferred.resolve();
}， 功能（） {
  loginUser().then(function() {
    获取数据（）。完成（函数（）{
      deferred.resolve();
    });
  }， 功能（） {
    deferred.reject();
  });
}

```

# php - 使用 php 将数据存储到文本文件中？

> ID：12365570
> 
> 赞同：4
> 
> 时间：2012-09-11T08:22:48.383
> 
> 标签：php

我正在尝试将数据存储在文本文件中，例如使用 php 将数组存储到文本文件中，而不是存储到 mysql 数据库中。

例如，这是要存储在文本文件中的数据

```
name=>john
age=>25
location=>australia 
```

然后将其保存到文本文件后，如何获取内容并使用 php 解析它，因为像 php 可以找到名称、年龄和位置并将其回显（类似于解析数组）

我需要它来将数据存储到文本文件中，以便可以轻松地从其他域访问它，而无需位于同一个域上，连接到数据库，从数据库中获取数据。我正在寻找一个快速的解决方案。:)

我不确定我应该向哪个方向寻找这种功能，希望有人能指出我。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T08:35:36.860

存储：
1\. 使用[serialize()](http://lv.php.net/serialize)将数组序列化为字符串2\. 使用[file_put_contents()](http://lv.php.net/file_put_contents)
将该字符串写入文本文件

读取：
1\. 使用[file_get_contents](http://lv.php.net/file_get_contents)读取文本文件
2\. 使用[unserialize()](http://lv.php.net/unserialize)对之前序列化的数组进行反序列化

[serialize()](http://lv.php.net/serialize) / [unserialize()](http://lv.php.net/unserialize)可以替换为[json_encode()](http://lv.php.net/json_encode) / [json_decode()](http://lv.php.net/json_decode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-15T22:30:50.980

您应该创建一个 uniqid，然后他们将无法访问服务器中的任何其他 txt 文件。

```
<?php

    #Get a secure filename
    $username = "myUsername"
    $filename = uniqid($username, true).".txt";

    //Create the array
    $userInfo = ["username" => $username, "points" => 0];

    // Store the data
    file_put_contents($filename, serialize($userInfo));

    // How to get the data
    $userInfo = unserialize(file_get_contents($filename));
    print($userInfo["points"]);
    //or
    print($userInfo["username"]);

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:29:52.290

您可以使用

*   **fopen**和**fwrite**将数据写入文件。另见[http://www.tizag.com/phpT/filewrite.php](http://www.tizag.com/phpT/filewrite.php)
*   **file_get_contents**函数从文件中读取。查看更多： http: [//php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

如果您想将数组转换为 XML，您可能需要阅读这篇文章：[如何将数组转换为 SimpleXML](https://stackoverflow.com/questions/1397036/how-to-convert-array-to-simplexml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T08:38:56.607

这些功能应该做你想做的事：

```
function storeInTextFile($array,$path) {
    if(file_exists($path)) {
         $handle = fopen($path,'wb');
         fwrite($handle, arrayToString($array));
         fclose($handle);
    }
}

function arrayToString($array) {
    $string = '';
    foreach($array as $key => $value) {
        $string .= "{$key} => {$value}\n";
    }
    return $string;
}

function stringToArray($string) {
    $explodedString = explode('\n',$string);
    $returnArray = array();
    foreach($explodedString as $arrayValue) {
        list($key,$value) = explode(' => ',$arrayValue);
        $returnArray[$key] = $value;
    }

    return $returnArray;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-06T18:50:57.873

// - 短的 - - - - - - - - - - - - - - - - - - - - - -

```
$data = [ "a" => "A",  "b" => "B", "c" => "C" ];
  echo '<br> data - array: ';
  var_dump($data);

file_put_contents('db.php', json_encode($data) );

//get
$g = json_decode(file_get_contents('db.php') , 1);  // 1 Array , 0  Object

  echo '<br><hr>short: var_dump($g): ';
  var_dump($g); 
```

// - 长 - - - - - - - - - - - - - - - - - - - - - -//

```
$data = [ "a" => "A",  "b" => "B", "c" => "C" ];
  echo '<br> data - array: ';
  var_dump($data);
  echo '<br> json_encode($data): ';

$jdata = json_encode($data);
  var_dump($jdata); 
  echo'<hr>';
file_put_contents('db.php', $jdata);

//get
$jg = file_get_contents('db.php');
  echo ' $jg = file_get_contents(\'db.php\'); $jg : ';
  var_dump($jg);

  echo '<br> json_decode($jg , 1) //1 Array<br>';
$g = json_decode($jg , 1);  
  var_dump($g);

  echo '<br> json_decode($jg , 0)  //0 Object<br>';
$g = json_decode($jg , 0);
  var_dump($g); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-12-30T14:59:43.673

我制作了一个小型库（~2 KB；<100 行），它允许您这样做：[varDx](https://github.com/rahuldottech/varDx)

它具有写入、读取、修改、检查和删除数据的功能。它实现了序列化，因此支持所有数据类型。

以下是您可以使用它的方法：

```
<?php
require 'varDx.php';
$dx = new \varDx\cDX; //create an object
$dx->def('file.dat'); //define data file

$val1 = "this is a string";
$dx->write('data1', $val1); //writes key to file
echo $dx->read('data1'); //returns key value from file 
```

# shell - 脚本未在系统启动时运行

> ID：12365581
> 
> 赞同：1
> 
> 时间：2012-09-11T08:23:16.200
> 
> 标签：shell

我试图在每次系统启动时运行一个脚本。这是脚本：

```
#!/bin/sh
echo $(sensible-browser http://localhost/example/user=$USER) 
```

我复制了脚本以`/etc/init.d/`将文件权限更改为 755，然后运行命令`sudo update-rc.d scriptname.sh defaults`。

也尝试通过运行脚本，`/etc/rc.local`但没有运气。系统启动时没有任何反应。我还可以做些什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:29:03.507

我假设您的默认网络浏览器需要 X 才能运行（例如 firefox）。当 rc.d 脚本运行时，不一定是您的脚本在 X 启动后运行（或者您有权打开一个窗口）。如果您想让浏览器弹出页面`http://localhost/example/user=$USER`，您将不得不查看 KDM 或 GDM 或您拥有的任何显示管理器，并让它在启动后运行外部脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:38:46.537

您通常不想在系统启动时启动浏览器——您希望在登录后启动它。为此，您的 shell 提供了启动文件（例如`$HOME/.profile`，用于 Bourne 传统 shell，或`$HOME/.login`用于 csh 类型的 shell）。作为替代方案，X11 程序可以从`$HOME/.xinitrc`或启动`$HOME/.xsession`。

如果我们知道您实际想要达到的目标，也许我们可以提供帮助。

# authentication - 在 IIS Express 上调用 WCF 服务：未经授权

> ID：12365584
> 
> 赞同：1
> 
> 时间：2012-09-11T08:23:24.327
> 
> 标签：authentication, certificate, wcf-security, iis-express, wshttpbinding

我正在尝试通过 ssl 在 IIS Express (.NET 3.5) 上托管 wcf 服务，并使用映射到 Windows 用户的客户端证书。

**当我使用控制台应用程序作为测试客户端时，我收到以下错误：**

> HTTP 请求未经客户端身份验证方案“匿名”授权。从服务器收到的身份验证标头是“NTLM,Negotiate”。

我不明白这是怎么可能的，因为当我检查 IIS Express 跟踪记录时，我看到 iisclientcertificatemapping httpmodule 中的 clientcertificate 被映射到我的窗口用户。

![从 IIS 跟踪日志中提取](../Images/7cfc6bf387fcf32cede733d5f233d017.png)

如屏幕截图所示，名称为“ServiceModel”的 httpmodule 将响应设置为 401。

我在客户端和服务器端都启用了 svc 跟踪，但服务器端唯一记录的是“连接时接收字节' [https://myurl/orderservice.svc/ClientCert](https://myurl/orderservice.svc/ClientCert) '”

**我的 IIS express (applicationhost.config) 在 web.config 中被覆盖：**

```
<system.webServer>
    <security>
      <authentication>
        <windowsAuthentication enabled="true" />
        <anonymousAuthentication  enabled="false" />
        <iisClientCertificateMappingAuthentication enabled="true" oneToOneCertificateMappingsEnabled="true" >
          <oneToOneMappings>
            <add enabled="true" certificate="MIICGjCCAYegAwIBAgIQfi996nkvEYdO6WBFfokO/jAJBgUrDgMCHQUAMCUxIzAhBgNVBAMTGkdsb2JhbFZpc2lvblNlcnZpY2VzUm9vdENBMB4XDTEyMDkwNzEyMjg1OVoXDTM5MTIzMTIzNTk1OVowHjEcMBoGA1UEAxMTR2xvYmFsVmlzaW9uQ2xpZW50MTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA5qBoLtQjkN2LtWdCQVbWqMA5N4jMmDM3yscUi3c7mwO9iFZaOcf41+SUFMivEXOOVI/5qVdaMII/ombGPopKoZhtXYUkv90psWwQHXNfqE1L+Vkur/u2KiQSImXLhSPF8qTR5RbRj3inpTWTg74p1a1HjbndU/lwu1cznl5vW/sCAwEAAaNaMFgwVgYDVR0BBE8wTYAQjpcP+m/6Y3T5yi7PJKxrGqEnMCUxIzAhBgNVBAMTGkdsb2JhbFZpc2lvblNlcnZpY2VzUm9vdENBghB+Uxyrj6x2rEV3HQ6vVX48MAkGBSsOAwIdBQADgYEAT5CiQCj4y9dW+zBSq96dRye3FJswAYiZgMLLoiyRV5h2QT7H0nxcdQ0mtdcN3OPunuvrYYlS58QVlBx6aozznmKeBuRl6GwWwQLYGxBRsKbQTuEiI85v1n/jK0LTT6FSGBMUlcJSn2NgnUAWgXvlf8f0SqLqApwWPeYybQxfz4U="
                 userName="CORP\mywindowsuser" password="mypassword" />
          </oneToOneMappings>
        </iisClientCertificateMappingAuthentication>
      </authentication>
      <authorization>
        <add users="*" accessType="Allow"/>
      </authorization>
      <!--Require SSL *AND* require a client certificate -->
      <access sslFlags="Ssl, SslNegotiateCert"/>
    </security>
  </system.webServer> 
```

使用此配置，当我导航到 svc 文件 ( [https://myurl/orderservice.svc?wsdl](https://myurl/orderservice.svc?wsdl) ) 时，浏览器会要求提供 clientcertificate，当我选择自签名证书时，我能够看到服务的 wsdl。对我来说，这意味着证书（rootca、服务器和客户端证书）是正确的并且 ssl 正在工作。

**为了完成，这是我的服务配置服务器端：**

```
<system.serviceModel>
<serviceHostingEnvironment aspNetCompatibilityEnabled="false">
  <baseAddressPrefixFilters>
    <add prefix="https://myurl:443"/>
  </baseAddressPrefixFilters>
</serviceHostingEnvironment>
<diagnostics wmiProviderEnabled="true">
  <messageLogging
       logEntireMessage="true"
       logMalformedMessages="true"
       logMessagesAtServiceLevel="true"
       logMessagesAtTransportLevel="true"
       maxMessagesToLog="3000"
   />
</diagnostics>
<bindings>
  <wsHttpBinding>
    <binding name="ClientCert">
      <security mode="Transport">
        <message clientCredentialType="Certificate"/>
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="wsHttpCertificateBehavior">
      <serviceMetadata httpGetEnabled="false" httpsGetEnabled="true"/>
      <serviceDebug httpHelpPageEnabled="true" includeExceptionDetailInFaults="true"/>
      <serviceAuthorization serviceAuthorizationManagerType="CompanyName.Model.Security.AuthorizationBehaviors.AdamAuthorizationManager,ServiceSecurity">
        <authorizationPolicies>
          <add policyType="CompanyName.Model.Security.AuthorizationPolicies.AdamAuthorizationPolicy, ServiceSecurity" />
        </authorizationPolicies>
      </serviceAuthorization>
      <serviceCredentials>
        <serviceCertificate findValue="certificatesubject" x509FindType="FindBySubjectName" storeLocation="LocalMachine" storeName="My"/>
        <clientCertificate>
          <authentication revocationMode="NoCheck" mapClientCertificateToWindowsAccount="true" />
        </clientCertificate>
      </serviceCredentials>
    </behavior>
  </serviceBehaviors>
</behaviors>
<services>
  <service name="CompanyName.Model.Services.OrderService" behaviorConfiguration="wsHttpCertificateBehavior">
    <endpoint address="https://myurl/OrderService.svc/ClientCert" contract="CompanyName.Model.Services.ServiceContracts.IOrderService" binding="wsHttpBinding" bindingConfiguration="ClientCert">
    </endpoint>
  </service>
</services> 
```

**服务配置客户端**

```
<system.serviceModel>
    <diagnostics>
      <messageLogging logEntireMessage="true" logMalformedMessages="true" logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true" maxSizeOfMessageToLog="26214400" />
    </diagnostics>
    <bindings>
      <wsHttpBinding>
        <binding name="ClientCertificate">
          <security mode="Transport">
            <transport clientCredentialType="Certificate"/>
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior name="wsHttpCertificateBehavior">
          <clientCredentials>
            <clientCertificate findValue="39820c4f767c809bb8f64b0f52ccfd686093896c" storeLocation="CurrentUser" storeName="My" x509FindType="FindByThumbprint"/>
            <serviceCertificate>
              <authentication revocationMode="NoCheck"/>
            </serviceCertificate>
          </clientCredentials>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <client>
      <endpoint name="ClientCertificate" address="https://myurl/OrderService.svc/ClientCert" contract="CompanyName.Model.Services.ServiceContracts.OrderService" binding="wsHttpBinding" bindingConfiguration="ClientCertificate" behaviorConfiguration="wsHttpCertificateBehavior"/>
    </client>
  </system.serviceModel> 
```

如果我浏览到该服务，我会得到以下信息：

![选择证书](../Images/cc3c7906b6a3dc94f0d60eca008cbbef.png)

如果我选择正确的证书，我会得到：

![浏览器响应](../Images/db243a2c9c498931db9042b2554ec049.png)

当我尝试在浏览器中访问端点时，它显示 400 Bad request（这是正常的）

如果有人发现错误的配置或有使用 iis express 上托管的 wcf 进行 ssl 和 clientcertificatemapping 的经验，我已经花费了几个小时让我知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:20:59.643

2个配置之间存在不一致：

wshttpbinding 设置为在客户端和服务器上传输安全性，但在服务器端配置中，ClientCredentialType 被配置为消息安全性而不是传输。

该服务需要使用证书，这意味着 System.WebServer 部分中的 SslFlags 属性可以设置为以下内容：

```
 <access sslFlags="Ssl, SslNegotiateCert, SslRequireCert"/> 
```

我希望这有帮助 ;）

# android - 不隐藏 0height 和 0width 的视图

> ID：12365590
> 
> 赞同：0
> 
> 时间：2012-09-11T08:23:47.883
> 
> 标签：android, tablerow

对不起，我的英语不好。我有一个表格行，我已经用记录的代码设置了第一个视图。我已经将此视图设置为 0px 高度和 0px 宽度。但它需要我半屏！为什么？错误在哪里？

这是代码：

```
 try{

        txtId= new TextView(this);
        imgCategory= new ImageView(this);
        txtDescrizione= new TextView(this);
        txtDataFine= new TextView(this);
        imgPriorita= new ImageView(this);

        txtId.setText(id);
        txtId.setWidth(0);
        txtId.setHeight(0);
        txtId.setTextColor(getResources().getColor(R.color.white));
        txtId.setTextSize(1);

        if(priorita.equalsIgnoreCase("3")){
            imgPriorita.setImageResource(R.drawable.todo_priority_3);}
        else if(priorita.equalsIgnoreCase("2")){
            imgPriorita.setImageResource(R.drawable.todo_priority_2);}
        else if(priorita.equalsIgnoreCase("1")){
            imgPriorita.setImageResource(R.drawable.todo_priority_1);}

        imgPriorita.setPadding(0, 0, 0, 0);
        imgPriorita.setMaxWidth(widthDisplay/10);
        imgPriorita.setMaxHeight(40);
        imgPriorita.setScaleType(ScaleType.CENTER_INSIDE);

        txtDescrizione.setPadding(0, 0, 0, 0);
        //txtDescrizione.setText(Html.fromHtml("<i>"+descrizione+"</i>"));
        txtDescrizione.setText(descrizione);
        txtDescrizione.setTextColor(getResources().getColor(R.color.black));
        txtDescrizione.setWidth(widthDisplay/5);
        txtDescrizione.setHeight(40);
        txtDescrizione.setTextSize(12);
        //setto la descrizione su una sola riga e con true fino a quando ci stanno le lettere
        txtDescrizione.setSingleLine(true);
        txtDescrizione.setLines(1);

        txtDataFine.setPadding(0, 0, 0, 0);
        txtDataFine.setText(data.getDateTimeTodo(dataFine));
        txtDataFine.setWidth(widthDisplay/5);
        txtDataFine.setHeight(40);
        txtDataFine.setTextColor(getResources().getColor(R.color.black));
        txtDataFine.setGravity(Gravity.CENTER);
        txtDataFine.setTextSize(12);

        if(category.equalsIgnoreCase("2")){
            imgCategory.setImageResource(R.drawable.todo_category_2);}
        else if(category.equalsIgnoreCase("1")){
            imgCategory.setImageResource(R.drawable.todo_category_1);}
        else if(category.equalsIgnoreCase("3")){
            imgCategory.setImageResource(R.drawable.todo_category_3);}
        else if(category.equalsIgnoreCase("5")){
            imgCategory.setImageResource(R.drawable.todo_category_5);}
        else if(category.equalsIgnoreCase("4")){
            imgCategory.setImageResource(R.drawable.todo_category_4);}
        else if(category.equalsIgnoreCase("6")){
            imgCategory.setImageResource(R.drawable.todo_category_6);}

        imgCategory.setPadding(0,0,0,0);
        imgCategory.setMaxWidth(widthDisplay/5);
        imgCategory.setMaxHeight(40);
        imgCategory.setScaleType(ScaleType.CENTER_INSIDE);

        rowTodo[counterBackground]= new TableRow(this); 
        if((counterBackground%2)==0){
            rowTodo[counterBackground].setBackgroundColor(getResources().getColor(R.color.greyListCp));}
        else{
            rowTodo[counterBackground].setBackgroundColor(getResources().getColor(R.color.white));}

        rowTodo[counterBackground].setMinimumHeight(heightRowTodo);
        idRow_gl=Integer.parseInt(id);
        rowTodo[counterBackground].setId(idRow_gl);

        rowTodo[counterBackground].setOnClickListener(new OnClickListener() {
            public void onClick(View view_cliccata) {
                    onclickRow(view_cliccata);
            }   
        });

        imgAnagraficaTodo[counterBackground]=new ImageView(this);

        if(id_anagTodo.equals("")){}
        else{   
            imgAnagraficaTodo[counterBackground].setImageResource(R.drawable.toanag);
            imgAnagraficaTodo[counterBackground].setPadding(20, 3, 0, 0);
            imgAnagraficaTodo[counterBackground].setMinimumWidth(widthDisplay/5);
            imgAnagraficaTodo[counterBackground].setMaxHeight(40);
            imgAnagraficaTodo[counterBackground].setId(idRow_gl);
            imgAnagraficaTodo[counterBackground].setScaleType(ScaleType.CENTER_INSIDE);

            imgAnagraficaTodo[counterBackground].setOnClickListener(new OnClickListener() {
                public void onClick(View view_cliccata) {
                        Data.myHashMapVar.put("ID_TODO", view_cliccata.getId());
                        onclickImgAnagraficaTodo(view_cliccata,id_anagTodo);
                }   
            });
            arrList_AnagTodo.add(id_anagTodo);
        }

        rowTodo[counterBackground].addView(txtId);
        rowTodo[counterBackground].addView(imgPriorita);
        rowTodo[counterBackground].addView(txtDescrizione);
        rowTodo[counterBackground].addView(txtDataFine);
        rowTodo[counterBackground].addView(imgCategory);
        rowTodo[counterBackground].addView(imgAnagraficaTodo[counterBackground]);

        List_TodoList.addView(rowTodo[counterBackground]);

        } catch (Exception e) {
            e.printStackTrace();
        }

    } 
```

而heightDisplay和widthDisplay是这样设置的：

```
display=getWindowManager().getDefaultDisplay();
             heightDisplay=display.getHeight();
             widthDisplay=display.getWidth(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:26:58.300

您真的应该真正考虑使用布局 xml 而不是屏幕设计代码，请查看本教程以获取更多信息：http: [//developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

关于您的问题，我建议使用[可见性](https://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)而不是更改宽度/高度：

```
txtId.setVisibility(View.GONE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:27:41.397

如果你不想它消失。为什么不直接使用

```
txtId.setVisibility(View.GONE); 
```

?

# sql - SQL where 语句中的条件 'AND' 'OR'

> ID：12365591
> 
> 赞同：0
> 
> 时间：2012-09-11T08:23:49.290
> 
> 标签：sql, where-clause

我目前正在制作一个存储过程，它为用户提供一个过滤系统以进行深入研究。现在我很难在 where 语句中加入条件子句。如下图所示：

```
 WHERE upper(stk.warehouse) LIKE '%' + upper(@warehouse) + '%' AND
       upper(stk.product) LIKE '%' + upper(@product) + '%' AND
       upper(stk.description) LIKE '%' + upper(@description) + '%' AND
       upper(stk.long_description) LIKE '%' + upper(@longdescription) + '%' AND
       cast(safety_stock_level as decimal(20)) LIKE '%' +
       upper(@barcode) + '%' AND        
       (stk.physical_qty + stk.on_order_qty -stk.allocated_qty - stk.back_order_qty -
       stk.uninspected_qty)>@available AND

    *if @or =0 BEGIN
    stk.on_order_qty > @onorder AND stk.physical_qty > @phys 
    else
    stk.on_order_qty > @onorder OR stk.physical_qty > @phys* 
```

现在我尝试了一个不占优势的 if 语句和一个 case 语句。是否有条件 OR 或 AND 语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:27:16.990

你会这样做：

```
((@or = 0 AND stk.on_order_qty > @onorder AND stk.physical_qty > @phys) OR
 (@or = 1 AND (stk.on_order_qty > @onorder OR stk.physical_qty > @phys))) 
```

# php - 致命错误：无法实例化不存在的类：simplexmlelement

> ID：12365597
> 
> 赞同：0
> 
> 时间：2012-09-11T08:24:09.893
> 
> 标签：php, simplexml, dreamhost

调用此函数时：

```
simplexml_load_string() 
```

我收到此错误：

```
Fatal error: Call to undefined function:  simplexml_load_string() 
```

但是，检查 phpinfo 我有：

```
SimpleXML
Simplexml support   enabled
Revision    $Revision: 299016 $
Schema support  enabled 
```

是什么赋予了？！

如果有帮助，我将在 Dreamhost 上托管。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:59:09.147

好的，解决了。

Dreamhost 在命令行上使用与网站不同版本的 PHP。他们在命令行上有 PHP 4.4.9 - 古老！

这根本没有内置 SimpleXML。

# android - Android GCM- GCMRegistrar checkManifest(this) - 清单文件错误

> ID：12365598
> 
> 赞同：5
> 
> 时间：2012-09-11T08:24:13.237
> 
> 标签：android, google-cloud-messaging

我尝试实施 GCM，但出现错误，我尝试在互联网上查找日志，但我不能。当代码出现这些行时，我在 logcat 收到错误

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this); 
```

这个 logcat 输出是什么意思？

```
09-11 11:14:25.132: W/dalvikvm(11946): threadid=11: thread exiting with uncaught  exception (group=0x40aac210)
09-11 11:14:25.142: E/AndroidRuntime(11946): FATAL EXCEPTION: IntentService[ManagePushCommunicationService]
09-11 11:14:25.142: E/AndroidRuntime(11946): java.lang.IllegalStateException: Application does not define permission com.example.push.permission.C2D_MESSAGE
09-11 11:14:25.142: E/AndroidRuntime(11946):    at com.google.android.gcm.GCMRegistrar.checkManifest(GCMRegistrar.java:135)
09-11 11:14:25.142: E/AndroidRuntime(11946):    at com.example.push.services.ManagePushCommunicationService.startJob(ManagePushCommunicationService.java:156)
09-11 11:14:25.142: E/AndroidRuntime(11946):    at com.example.push.services.ManagePushCommunicationService.onHandleIntent(ManagePushCommunicationService.java:85)
09-11 11:14:25.142: E/AndroidRuntime(11946):    at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
09-11 11:14:25.142: E/AndroidRuntime(11946):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-11 11:14:25.142: E/AndroidRuntime(11946):    at android.os.Looper.loop(Looper.java:137)
09-11 11:14:25.142: E/AndroidRuntime(11946):    at android.os.HandlerThread.run(HandlerThread.java:60)
09-11 11:19:25.162: I/Process(11946): Sending signal. PID: 11946 SIG: 9 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T08:28:10.203

将权限放入清单文件：

```
<permission android:name="com.example.gcm.permission.C2D_MESSAGE"android:protectionLevel="signature"/>
            <uses-permission android:name="com.example.gcm.permission.C2D_MESSAGE" /> 
            <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:26:48.663

把它放在你的清单中

```
<permission
        android:name="com.example.push.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />
<uses-permission android:name="com.example.push.permission.C2D_MESSAGE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T11:01:52.797

授予权限

```
<permission android:name="your package name.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission android:name="your package name.permission.C2D_MESSAGE" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-31T09:38:44.490

**请按照以下步骤操作**

**1.**在您的应用程序的库中包含“gcm.jar”

**2.** Android SDK Manager => Extras => Install Google Cloud Messaging for Android Library (Obsolete)

**3.** Android SDK Manager => Android 4.3 (API 18) => 安装 Google APIs

# google-maps - 用于根据坐标查找城市的 Google Maps Web Serivce API（服务器端）

> ID：12365600
> 
> 赞同：0
> 
> 时间：2012-09-11T08:24:16.543
> 
> 标签：google-maps, lucene

哪个是确切的 Google Maps API，我可以使用它来发送我的地理坐标，并获得最近的较大位置（想想、村庄、城镇、城市、地区等）？

我还需要它以正确的国际命名，因为我正在构建一个搜索引擎，并且我发现许多位置仍然无法搜索，除非它们使用所使用的确切特定字符键入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:30:10.553

您正在寻找的内容称为“反向地理编码”。您可以通过[Google Geocoding API](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)使用它。

# jquery - 使用按钮强制下载 .txt 文件

> ID：12365602
> 
> 赞同：3
> 
> 时间：2012-09-11T08:24:27.990
> 
> 标签：jquery, download

> **可能重复：**
> [使用 jQuery](https://stackoverflow.com/questions/1296085/download-file-using-jquery)
> [下载文件 使用 Javascript/jQuery 下载文件](https://stackoverflow.com/questions/3749231/download-file-using-javascript-jquery)

```
$('#download').click(function() {
    var url = 'http://www.mysite.com/123.txt';
    location.href = url;
}); 
```

该按钮使浏览器浏览文件而不是提示下载。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T08:27:15.460

如果您使用 Apache 作为 Web 服务器，请将`.htaccess`以下内容添加到文件夹中：

```
<Files *.txt>
  ForceType applicaton/octet-stream
</Files> 
```

# magento - Magento - 如果货币等于

> ID：12365605
> 
> 赞同：0
> 
> 时间：2012-09-11T08:24:34.497
> 
> 标签：magento

只有当用户选择了某种货币时，我才想在 Magento 中显示一些文本。如何做到这一点，即。如果货币 = GBP echo "..."

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:23:06.457

尝试这个

```
 $currentCurrencyCode = Mage::app()->getStore()->getCurrentCurrencyCode();
    if ($currentCurrencyCode == 'GBP') {
        echo "Got it";
    } 
```

# ios - NSKeyedUnarchiver SIGBUS BUS_ADRALN 崩溃

> ID：12365607
> 
> 赞同：2
> 
> 时间：2012-09-11T08:24:42.567
> 
> 标签：ios, crash, nskeyedarchiver, nsfilewrapper, sigbus

我使用以下通常效果很好的方法在 NSFileWrapper 中解压缩数据：

```
- (id)decodeObjectFromWrapperWithPreferredFilename:(NSString *)p {

    NSFileWrapper *wrapper = [self.fileWrapper.fileWrappers objectForKey:p];
    if (!wrapper) {
        NSLog(@"Unexpected error: Couldn't find %@ in file wrapper!", p);
        return nil;
    }

    NSData *data = [wrapper regularFileContents];
    NSKeyedUnarchiver *unarchiver;
    @try {
        unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];
    }
    @catch (NSException *exception) {
        NSLog(@"exception: %@", exception);
        [TestFlight passCheckpoint:@"FILE LOADING EXCEPTION!"];
        UIAlertView *alertOFF = [[UIAlertView alloc]
                                 initWithTitle:@"Corrupt"
                                 message:@"There was an error loading a file! Please contact m@meernotes.com"
                                 delegate:self
                                 cancelButtonTitle:@"OK"
                                 otherButtonTitles:nil];
        [alertOFF show];

    }
    return [unarchiver decodeObjectForKey:@"data"];
} 
```

但是，我偶尔会遇到线路 SIGBUS 崩溃`unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];`。我猜这种类型的异常没有被我的异常处理程序捕获？我该如何处理此类异常以及导致它们的原因？

这是 Crashlytics 崩溃报告：

```
Exception Type:SIGBUSCode:BUS_ADRALN
Thread 0 Crashed
Latest Crash: 11 September 2012 at 06:23
0    Foundation 
-[NSKeyedUnarchiver initForReadingWithData:] + 389
1    Meernotes ✭     FRNBDocument.m line 221
-[FRNBDocument decodeObjectFromWrapperWithPreferredFilename:] + 221
2    Meernotes   FRNBDocument.m line 155
-[FRNBDocument settings] + 155
3    Meernotes   ModelController.m line 497
__39-[ModelController previewLoadDocAtURL:]_block_invoke_0 + 497
4
...
libdispatch.dylib   
_dispatch_barrier_sync_f_slow_invoke + 78
5    libdispatch.dylib  
_dispatch_main_queue_callback_4CF$VARIANT$up + 196
6    CoreFoundation 
__CFRunLoopRun + 1268
7    CoreFoundation 
CFRunLoopRunSpecific + 300
8    CoreFoundation 
CFRunLoopRunInMode + 104
9    GraphicsServices   
GSEventRunModal + 136
10   UIKit  
UIApplicationMain + 1080
11   Meernotes   main.m line 16
main + 16 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:31:59.627

首先，你确定这是整个崩溃报告吗？应该有更详细的...

无论如何，这不是个例。这是一个信号，通常意味着内存访问错误。如果您收到 SIGBUS，则基本上意味着内存错误（通常来自您的代码访问错误指针）。

在您的情况下，最可能的罪魁祸首是您收到的数据对象`[wrapper regularFileContents]`以某种方式损坏。最有可能的是，它返回零。

请注意以下文档`regularFileContents`：

> **讨论**
> 
> 如果用户在调用 readFromURL:options:error: 或 initWithURL:options:error: 之后但在 NSFileWrapper 读取文件内容之前修改了文件，则此方法可能返回 nil。使用 NSFileWrapperReadingImmediate 读取选项来降低出现该问题的可能性。

那将是我开始的地方。文件数据也可能已损坏，并且 unarchiver 因错误数据而窒息。

基本上，这不是您可以捕获和忽略的异常。它表示您的程序中存在必须修复的错误。

# asp.net - ASP NET 4 ActiveDirectoryMembershipProvider 登录命令

> ID：12365610
> 
> 赞同：0
> 
> 时间：2012-09-11T08:24:54.870
> 
> 标签：asp.net, debugging, asp.net-membership

我在 ASPNET 4 WebForms 应用程序中使用默认的 Login.aspx。

我已经配置`System.Web.Security.ActiveDirectoryMembershipProvider`并使用该`Membership.ValidateUser`功能进行了测试，一切正常。我能够验证测试用户。

虽然，当我在 Login.aspx 中插入相同的测试用户名和密码时，我总是收到登录错误。我不知道发生了什么事。

下一步是尝试调试幕后发生的事情。我已经下载了网络框架符号，但我不知道如何`LoginButton`在 Login.aspx的“登录”处理程序中设置断点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:44:58.420

我自己找到了答案。我正在处理 Authenticate 事件，里面没有代码。这阻止了登录控件针对 ActiveDirectoryMembershipProvider 登录。

# iphone - iOS - 保存到 plist

> ID：12365611
> 
> 赞同：0
> 
> 时间：2012-09-11T08:24:55.230
> 
> 标签：iphone, ios, plist

我正在尝试更改 plist 的值（@key "userId" 的起始值为 0）

```
NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"GlobalSettings" ofType:@"plist"];
NSMutableDictionary *data = [NSMutableDictionary dictionaryWithContentsOfFile:plistPath];
NSDictionary *userId = [data objectForKey:@"userId"];

[data setValue:(@"99") forKey:@"userId"];
[data writeToFile:plistPath atomically: NO];

userId = [data objectForKey:@"userId"];
NSLog(@"%@", userId); 
```

日志显示该值已更改为 99，但是当我打开 plist 时该值仍为 0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T08:45:43.000

您不能将数据保存在应用程序的主包中，而是必须在文档目录中执行如下操作：

```
 NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *plistFilePath = [documentsDirectory stringByAppendingPathComponent:@"GlobalSettings.plist"];

if([[NSFileManager defaultManager] fileExistsAtPAth:plistFilePath]) 
{//already exits

   NSMutableDictionary *data = [NSMutableDictionary dictionaryWithContentsOfFile:plistFilePath];
   NSDictionary *userId = [data objectForKey:@"userId"];
   [data setValue:(@"99") forKey:@"userId"]; //new value here
   [data writeToFile:plistPath atomically: YES];
   userId = [data objectForKey:@"userId"];
   NSLog(@"%@", userId); 
}
else{ //firstly take content from plist and then write file document directory 

 NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"GlobalSettings" ofType:@"plist"];
 NSMutableDictionary *data = [NSMutableDictionary dictionaryWithContentsOfFile:plistPath];
 NSDictionary *userId = [data objectForKey:@"userId"];

 [data setValue:(@"99") forKey:@"userId"];//new value here
 [data writeToFile:plistFilePath atomically:YES];

 userId = [data objectForKey:@"userId"];
 NSLog(@"%@", userId); 
} 
```

# java - 从树形图中检索最后 n 个值

> ID：12365613
> 
> 赞同：3
> 
> 时间：2012-09-11T08:25:05.667
> 
> 标签：java, map, treemap

我只想从树形图中检索最后 n 个值，而不考虑地图中的任何键或值。但我真的不知道如何做到这一点。下面是一段示例代码，它可以从地图中提取前 5 条记录。如何修改它以从地图中检索最后 n 条记录？

```
Map startValues = new ArrayList<Map.Entry<String, Integer>>(5);
iterator = sortedMap.entrySet().iterator();
for (int i1 = 0; iterator.hasNext() && i1 < 5; i1++) {
    startValues.add(iterator.next());
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T08:31:33.663

如果`sortedMap`变量包含 a 的实例，`TreeMap`则使用[`descendingKeySet()`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html#descendingKeySet%28%29)。它返回其中包含的键的相反顺序。

```
Map startValues = new ArrayList<Map.Entry<String, Integer>>(5);
iterator = sortedMap.descendingKeySet().iterator();
for (int i1 = 0; iterator.hasNext() && i1 < 5; i1++) {
   startValues.add(sortedMap.get(iterator.next()));
} 
```

请注意，与原始代码相比，它迭代的是**键**，而不是条目。我没有对其进行测试编译，因此泛型和类型转换可能存在一些小问题，但希望主要思想足够清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:31:20.833

在创建时由对象`TreeMap`维护的排序。`Comparator`如果`Comparator`未提供 - 这是*自然排序*。

`Comparator`创建实现*反向排序*的最直接的解决方案，将此比较器传递给新`TreeMap`的，并将旧树图中的所有元素添加到新树图中。这样您就可以重用代码示例来检索最后 5 条记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-05T09:32:36.143

获取 map.keySet() 并将其转换为 ArrayList，然后您可以使用循环获取最后 n 个值，如下例所示：

```
Map<Integer, String> map = new HashMap<>();

map.put(1, "Praveen");
map.put(2, "shristi");
map.put(3, "tarang");
Set<Integer> keys = map.keySet();
ArrayList<Integer> list = new ArrayList<>(keys);
for(int i=1;i<list.size();i++) {
  System.out.println(map.get(list.get(i)));
} 
```

# c++ - C++ preIncrement 和 postIncrement 的奇怪体验

> ID：12365615
> 
> 赞同：3
> 
> 时间：2012-09-11T08:25:09.863
> 
> 标签：c++, gcc, g++

`++a = b`操作显示没有错误，但`a++ = b`在编译时显示错误`g++`。这两个变量都在这些操作之前初始化。

尽管这些操作没有实际用途，但我认为它们都应该在编译时发出相同的错误。你怎么看？如果有正当理由，请向我解释。提前致谢！:)

PS`gcc`在这两个上都给出了错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T08:39:26.457

让我们看看 pre/post-increment 的声明是什么样的（[http://en.cppreference.com/w/cpp/language/operator_incdec](http://en.cppreference.com/w/cpp/language/operator_incdec)）：

```
++a: T& operator ++(T& a);
a++: T operator ++(T& a, int); 
```

你已经得到了答案——preInc 返回引用，所以你可以使用“=”运算符覆盖“a”变量。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T08:31:30.233

结果 if`++a`是*Lvalue*，但结果`a++`是*Rvalue*，您不能将任何内容分配给*Rvalue*，因此会出现错误。

不同之处在于（简化一点）*左值*是引用某个对象的表达式，而*右值*是指存储在内存中某处的*数据。*

假设结果`a++`是`7`。基本上，当你写作时，`a++ = b;`你试图分配`b`显然`7`是不可能的。`++a = b;`另一方面，当您编写时，增量的结果是一个引用的*左值*`a`，因此分配将是有效的。

[您可以在此处](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/lvalue.htm)阅读有关*左值*和*右* 值的更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T08:31:53.833

`++a`是一个**左值**（递增`a`并“返回”新值），`a++`是一个**右值**（递增`a`并“返回”一个具有旧值的临时值`a`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T08:31:42.163

正如您所说，这不是很有意义的代码，但我会说`++a`递增 a 并产生递增变量的值，同时`a++`产生变量的左值然后递增 a （然后被赋值覆盖）。您不能分配给 a 的值，您需要一个左值（基本上是一个分配了相关内存的值）。

# php - json 对象，其中包含多个 json 对象

> ID：12365616
> 
> 赞同：1
> 
> 时间：2012-09-11T08:25:18.863
> 
> 标签：php, mysql, ajax, json

我有一些 PHP 可以从 MySQL 数据库中的数据生成 JSON 对象

```
$addressData = mysql_query("SELECT * FROM address WHERE ContactID = $contactID")or  die("<br/><br/>".mysql_error());

while($r = mysql_fetch_assoc($addressData)){
    $rows[] = array('data' => $r);
}

// now all the rows have been fetched, it can be encoded
echo json_encode($rows); 
```

这会生成以下 JSON 对象：

```
[
  {"address":
    {"AddressID":"10011","AddressType":"Delivery","AddressLine1":"4 Caerleon Drive","AddressLine2":"Bittern","AddressLine3":"","CityTown":"Southampton","County":"Hampshire","PostCode":"SO19 5LF","Country":"United Kingdom","ContactID":"10011"}},
  {"address":
    {"AddressID":"10012","AddressType":"Home","AddressLine1":"526 Butts Road","AddressLine2":"Sholing","AddressLine3":"","CityTown":"Southampton","County":"Hampshire","PostCode":"SO19 1DJ","Country":"England","ContactID":"10011"}}
] 
```

在 Ajax 中接收它并通过以下方式运行它时：

```
$.each(data, function(key, val) {
  string =string + "Key: " + key + " Value:" + val + "<br />";
}); 
```

打印以下内容：

> 键：0 值：[object 对象]
> 
> 键：1 值：[object 对象]

关于如何访问键`0`和`1`数据中的对象的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:31:54.427

这是因为 Object 的默认 toString 实现在连接到 String 对象时会导致“[object Object]”。您可以像往常一样访问 val 对象的字段，例如：

```
val.data.AddressID 
```

像这样：

```
$.each(data, function(key, val) {
  string += "Key: " + key + " Value:" + val.data.AddressID + "<br />";
}); 
```

请注意，上述循环中的 val 是 JSON 代码的 {"data": ...} 部分，这就是您需要指定*val.data 的原因。*访问内部的部分地址数据。

此外，您可以简单地删除*数据*嵌套级别，从而生成如下 JSON 布局：

```
[
    {"AddressID":"10011","AddressType":"Delivery","AddressLine1":"4 Caerleon Drive","AddressLine2":"Bittern","AddressLine3":"","CityTown":"Southampton","County":"Hampshire","PostCode":"SO19 5LF","Country":"United Kingdom","ContactID":"10011"},
    {"AddressID":"10012","AddressType":"Home","AddressLine1":"526 Butts Road","AddressLine2":"Sholing","AddressLine3":"","CityTown":"Southampton","County":"Hampshire","PostCode":"SO19 1DJ","Country":"England","ContactID":"10011"}
] 
```

使用这个 PHP 代码：

```
while($r = mysql_fetch_assoc($addressData)){
    $rows[] = $r;
} 
```

然后，您可以像这样访问循环中的地址数据字段：

```
$.each(data, function(key, address) {
  string += "Key: " + key + " Value:" + address.AddressID + "<br />";
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:36:44.207

我会改变你的 json 的布局，你不需要嵌套。尝试：

```
[
    {"AddressID":"10011","AddressType":"Delivery",...},
] 
```

然后你可以用 key => val 将返回值迭代为一个数组，其中`val`将是对象，因为现在，`val`是持有你想要的对象的对象......

# php - php ImageTTFText，如果之前回显，图像仅填充文本

> ID：12365619
> 
> 赞同：2
> 
> 时间：2012-09-11T08:25:27.023
> 
> 标签：php, echo, captcha, imagettftext

嘿，我通过制作验证码遇到了一些疯狂的问题。

我创建了一个 shuffle 变量并将其提供给会话，然后我打开 image.php

验证码.php

```
<?php 
error_reporting(-1);
ini_set('display_errors', 1);

// Session start
SESSION_START();

// delet old CAPTCHA-Code from Session 
unset( $_SESSION["captcha"] );

// the Array
$text[] = "2";
$text[] = "4";
$text[] = "5";
$text[] = "7";
$text[] = "8";
$text[] = "A";
$text[] = "B";
$text[] = "C";
$text[] = "D";
$text[] = "E";
$text[] = "F";
$text[] = "G";
$text[] = "H";
$text[] = "J";
$text[] = "K";
$text[] = "M";
$text[] = "N";
$text[] = "P";
$text[] = "Q";
$text[] = "R";
$text[] = "S";
$text[] = "T";
$text[] = "U";
$text[] = "V";
$text[] = "W";
$text[] = "X";
$text[] = "Y";
$text[] = "Z";

//mixup array
shuffle ( $text );

//getting the first 5 Charakters
$outputtext = array_slice ($text, 0, 5);

//give it to the session
$_SESSION["captcha"] = implode($outputtext);
session_write_close();

echo "Captcha ist: ".$_SESSION["captcha"];
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

 <img src="captchaimage.php" alt="" style="vertical-align: middle;">

</html> 
```

验证码图片.php

```
<?php

error_reporting(-1);
ini_set('display_errors', 1);

SESSION_START();

Header ("Content-type: image/png");

$str = $_SESSION["captcha"];

$bild = ImageCreateFromPNG ("http://www.php.de/images/captcha.logo1.png");

$farbe_w = ImageColorAllocate ($bild, 255, 255, 255);
$farbe_b = ImageColorAllocate ($bild, 0, 0, 0);

ImageTTFText ($bild, 32, -30, 224,  112, $farbe_w, "arial.ttf",
              $str[0]);
ImageTTFText ($bild, 32, -90, 288, 208, $farbe_w, "arial.ttf",
              $str[1]);
ImageTTFText ($bild, 32,   0, 208, 336, $farbe_w, "arial.ttf",
              $str[2]);
ImageTTFText ($bild, 32,  45,  128, 304, $farbe_w, "arial.ttf",
              $str[3]);
ImageTTFText ($bild, 32,  99,  128, 192, $farbe_w, "arial.ttf",
              $str[4]);

header( "Expires: Mon, 26 Jul 1997 05:00:00 GMT" );
header( "Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT" );
header( "Cache-Control: no-store, no-cache, must-revalidate" );
header( "Cache-Control: post-check=0, pre-check=0", false );
header( "Pragma: no-cache" ); 

ImagePng     ($bild);

ImageDestroy ($bild);

?> 
```

这工作正常，但如果我从 captcha.php 中删除回声

这一行：`echo "Captcha ist: ".$_SESSION["captcha"];`

我得到一个没有字符的图像，比如会话是空的，但如果会话真的是空的，图像将不会被创建。

如果我在 captcha.php 中写了 echo 行，为什么要让 captchaimage.php 只获得正确的会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:26:41.163

一个小测试：

稍微更改一下代码 - 不要调用 captchaimage.php 作为您的图像的来源，而是尝试以这种方式将您的 captchaimage.php 逻辑移动到 captcha.php 中：

验证码.php

```
<?php 
error_reporting(-1);
ini_set('display_errors', 1);

// Session start
SESSION_START();

// delet old CAPTCHA-Code from Session 
unset( $_SESSION["captcha"] );

// the Array
$text = array("2", "4", "5", "7", "8", "A", "B", "C", "D", "E", /*...*/);

//mixup array
shuffle ( $text );

//getting the first 5 Charakters
$outputtext = array_slice ($text, 0, 5);

//give it to the session
$_SESSION["captcha"] = implode($outputtext);

$bild = ImageCreateFromPNG ("http://www.php.de/images/captcha.logo1.png");

$farbe_w = ImageColorAllocate ($bild, 255, 255, 255);
$farbe_b = ImageColorAllocate ($bild, 0, 0, 0);

ImageTTFText ($bild, 32, -30, 224,  112, $farbe_w, "arial.ttf", $str[0]);
ImageTTFText ($bild, 32, -90, 288, 208, $farbe_w, "arial.ttf", $str[1]);
ImageTTFText ($bild, 32,   0, 208, 336, $farbe_w, "arial.ttf", $str[2]);
ImageTTFText ($bild, 32,  45,  128, 304, $farbe_w, "arial.ttf", $str[3]);
ImageTTFText ($bild, 32,  99,  128, 192, $farbe_w, "arial.ttf", $str[4]);

ob_start();
ImagePng     ($bild);
$image = ob_get_clean();

?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

 <img src="data:image/png;base64,<?php echo base64_encode($image); ?>" alt="" style="vertical-align: middle;">

</html> 
```

我希望这会奏效。

# iphone - UI 导航技术

> ID：12365620
> 
> 赞同：-1
> 
> 时间：2012-09-11T08:25:32.347
> 
> 标签：iphone, uiview

在我的 iPhone 应用程序中，我有 2 个阶段注册视图。我有 3 个视图让我们称它们为**A、B、C 。如果我通过****A->B->C**导航，然后如果我想从**视图 C**返回查看**A**是最好的解决方案吗？

 **简单地说**A -> B -> C**从**C -> A**

使用 add subview 是最佳做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:54:42.443

**好吧，你去A->B->C**似乎有点混乱，你想从**A 回到 C**，我认为这将是**C 到 A。** 这可以通过

```
 [self.navigationController popToRootViewControllerAnimated:YES]; 
```

希望你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:28:48.003

在您的 ViewController C 中，假设 A`rootViewController`是`UINavigationController`

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

否则，在推送新视图时通过视图堆栈传递对 A 视图控制器的引用。然后在您的视图控制器 C 中使用：

```
[self.navigationController popToViewController: A animated: YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:37:34.120

如果您的 A 是根视图控制器，请执行此操作

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

如果 A 不是您的根视图控制器，请执行此操作

```
[self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:index_of_A_viewcontorller] animated:YES]; 
```

如果您不知道 A 视图的索引是多少，那么您可以打印*self.navigationController.viewControllers***并**自己查看

```
NSLog(@"%@",self.navigationController.viewControllers); 
```**

# asp.net - 可以仅对 asp 选项卡容器上最左侧的选项卡页进行样式设置

> ID：12365622
> 
> 赞同：0
> 
> 时间：2012-09-11T08:25:40.503
> 
> 标签：asp.net, css

我有一个来自 ajax 控制工具包的标准 asp 选项卡容器：

```
<asp:TabContainer ID="tcMain" runat="server" ActiveTabIndex="0" 
Width="99%" min-width="900px" AutoPostBack="true" CssClass="TabStyle"> 
```

但是页面的设计意味着我想以一种方式设置最左边的选项卡标题，中间的几个相同，而最右边的样式略有不同。即，在两个“向外”标签页上创建圆形边缘。

我玩过 .ajax__tab_hover .ajax__tab_outer 类型的 css 东西，但我似乎无法找到一种方法来操纵它们来做我想做的事。

有人对我如何实现这一目标有任何想法/例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:36:20.783

嗨，现在您可以像这样在设计中使用多类

**你的html**

```
<div class="wraper">
<div class="left" id="someid"></div>
<div class="left center"></div>
<div class="left right"></div>
</div> 
```

**css**

```
.wraper{
overflow:hidden;
width:1000px;
margin:0 auto;
}
.left{
width:33%;
height:100px;
float:left;
}
.left#someid{
background:red;
}
.left.center{
background:green;
}
.left.right{
background:yellow;
} 
```

***[现场演示](http://tinkerbin.com/ymeLuwvq)***

# android - 重叠图像未在所有格式上正确显示

> ID：12365624
> 
> 赞同：0
> 
> 时间：2012-09-11T08:25:47.307
> 
> 标签：android, android-layout

我正在构建一个由 2 个图像组成的图形：1 个背景图像和一个包含实际数据点的图像。数据点图像显示在背景图像的顶部对齐。

布局如下所示：

```
<RelativeLayout
    android:id="@+id/graphImageWrap"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <ImageView
        android:id="@+id/graphImageBackground"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:background="@android:color/transparent"
        android:contentDescription="@string/stroom_grafiek"
        />
    <ImageView
        android:id="@+id/graphImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@id/graphImageBackground"
        android:layout_centerHorizontal="true"
        android:background="@android:color/transparent"
        android:contentDescription="@string/stroom_grafiek"
        />
</RelativeLayout> 
```

这在 HDPI 设备上运行良好： ![高密度脂蛋白](../Images/27b94e91ac3f161909f365e220245713.png)

但在 MDPI 设备上，它不能正确对齐： ![MDPI](../Images/1002d298924e819de0f4001ec9097214.png)

我希望有人可以解释问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:37:30.833

您可能想改用 FrameLayout，并确保图像大小相同。

# android - 收到短信时如何将参数发送到另一个活动

> ID：12365629
> 
> 赞同：0
> 
> 时间：2012-09-11T08:26:05.727
> 
> 标签：android

收到短信后如何将参数发送到另一个活动我尝试但它的显示错误

> Intent 类型中的方法`putExtra(String, boolean)`不适用于参数（Bundle）

下面是我的代码：

```
public class SmsReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) 
{
    //---get the SMS message passed in---
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;
    String str = "";  

    if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++){
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
            str += msgs[i].getMessageBody().toString();
        }

        Intent l = new Intent(context,AgAppMenu.class);
        Bundle bundle2 = new Bundle();
        bundle.putString("msg", str);
        l.putExtra(bundle);

        l.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(l);
        Toast.makeText(context, "SucessFull Login", Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:28:53.243

您可以将字符串直接放入意图中：

```
l.putExtra("msg", str); 
```

然后使用：

```
getIntent().getStringExtra("msg"); 
```

但是如果您想使用捆绑包，我认为您应该在这里参考**bundle2**：

```
Intent l = new Intent(context,AgAppMenu.class);
        Bundle bundle2 = new Bundle();
        bundle2.putString("msg", str);

    l.putExtras(bundle2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:29:51.900

使用共享首选项很容易。使用以下链接

[如何在 Android 中使用 SharedPreferences 来存储、获取和编辑值](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)

[http://saigeethamn.blogspot.in/2009/10/shared-preferences-android-developer.html](http://saigeethamn.blogspot.in/2009/10/shared-preferences-android-developer.html)

[http://android-er.blogspot.in/2011/01/example-of-using-sharedpreferencesedito.html](http://android-er.blogspot.in/2011/01/example-of-using-sharedpreferencesedito.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:30:38.237

您需要使用设置捆绑包`Intent.putExtras(Bundle)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T08:31:12.533

如果您想通过捆绑使用`putExtras (Bundle extras)`而不是`putExtra`

# css - 在居中页面上显示带边框的图像

> ID：12365630
> 
> 赞同：0
> 
> 时间：2012-09-11T08:26:08.987
> 
> 标签：css, image, position, border, scaling

我正在尝试显示以页面为中心的图像，该页面的边框应该在其一侧具有不同的填充和边距。图像将具有不同的宽度和高度。所以我需要它相应地伸展。

我把它放在正文中以删除所有边距：

```
body {
    margin:0px 0px;
    padding: 0px;
    } 
```

然后我用它在图像周围放置边框。

```
#imgcontainer {
    position:relative;
    text-align: center;
    border-color: red;
    border-width: 1px;
    border-style: solid;
    padding: 5px;
} 
```

但随后边框延伸到整个页面。有什么办法可以阻止他的吗？如果我放：

```
position:relative; 
```

边框对齐到位，但图像不再居中。

如果我在#imgcontainer 周围放置一个容器框，它也会吸附到页面的边缘。

我认为它可以简单地通过一些位置组合来解决：相对/绝对？

这就是我所说的：http: [//kareldc.com/dislexicon/1-motion.html](http://kareldc.com/dislexicon/1-motion.html)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:43:50.123

嗨，现在根据@Fabrizo Calderan 定义

像这样的css

```
#imgcontainer {
display:inline-block;
vertical-align:top; 
} 
```

比你的结果

![在此处输入图像描述](../Images/21abfec414277980dd4a45cb129abd1f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:29:20.407

如果我很好理解你可以分配`display: inline-block`给的问题`#imgcontainer`，否则发布一个显示问题的小提琴

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:42:18.737

您可以仅将边框效果应用于 img 标签。

例如，只要把

```
#imgcontainer img { 
      border-color: red;
      border-width: 1px;
      border-style: solid;
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T08:42:36.877

这是给您的答案：[小提琴示例](http://jsfiddle.net/QKcTb/)

# java - 知道任何可嵌入的 NNTP 服务器吗？

> ID：12365632
> 
> 赞同：2
> 
> 时间：2012-09-11T08:26:14.590
> 
> 标签：java, unit-testing, nntp

我正在编写一些使用[Apache NNTP 客户端](http://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/nntp/NNTPClient.html)从 NNTP 服务器获取文章的代码。代码发布后，我们将使用 Apache James 服务器从中读取文章。但是为了测试代码，我正在寻找一个嵌入式 Java NNTP 服务器，所以我不必模拟每个服务器调用。有什么好的我可以使用吗？谷歌似乎让我失望了。

我的要求如下：

1.  我可以从代码中启动的服务器。
2.  测试可以在不同的机器上开箱即用地运行，无需额外设置。（一旦我提交代码，远程构建机器需要能够运行测试用例）。

也欢迎任何其他受启发的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-20T10:44:21.703

有[sonews](http://www.sonews.org/)，它似乎很活跃，并且支持大量的数据库后端。我没有进一步看它，所以我不知道你是否可以嵌入它。

# .net - 如何在 iis 中托管启用了网络命名管道绑定的 wcf 应用程序？

> ID：12365636
> 
> 赞同：5
> 
> 时间：2012-09-11T08:26:34.250
> 
> 标签：.net, wcf, wcf-binding, named-pipes, netnamedpipebinding

我的 wcf 服务中有以下配置

```
 <endpoint address="" binding="netNamedPipeBinding" 
          contract="WcfWithNamedPipe.IService1" 
          bindingConfiguration="WcfWithNamedPipe.netNamedPipeBinding">
    </endpoint> 
```

谁能建议我如何使用 netNamedPipe 绑定在 iis 中托管这个 wcf 服务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T18:39:12.427

要让命名管道在 IIS 上工作，您必须在 IIS 上启用 Windows Process Activation Service (WAS)，并配置您正在使用的站点以允许命名管道。

有关详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/ms752253.aspx](http://msdn.microsoft.com/en-us/library/ms752253.aspx)

就像 Cyber​​max 在评论中所说，首先让它与基本的 http 绑定一起工作是个好主意。

如果您认为您已正确设置所有内容但仍然无法正常工作，请检查防火墙设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T07:11:17.730

启用命名管道激活。在 Windows 8（可能还有更高版本？）中，打开“*打开或关闭 Windows 功能*”窗口，找到并检查以下内容：

[![在此处输入图像描述](../Images/f9f9f2ab3b303abdbcf4082f03e12016.png)](https://i.stack.imgur.com/mx43Q.png)

您还需要在 IIS 中为应用程序指定 net.pipe 协议。右键单击应用程序的节点，选择*管理应用程序*和*高级设置*...。`http`在这里，您可能会*启用 protocolls*。在它之后添加`, net.pipe`并单击确定保存它。

[![在 IIS 中添加 net.pipe](../Images/c8114d2bf04a0f2039120e2916f17e75.png)](https://i.stack.imgur.com/xcC7W.png)

如果其他一切都正确，这应该允许对服务的调用导致服务被激活。

# javascript - 如何在 OpenERP 中实现网络摄像头

> ID：12365638
> 
> 赞同：-1
> 
> 时间：2012-09-11T08:26:46.247
> 
> 标签：javascript, jquery, python, openerp

我想在 OpenERP 中实现网络摄像头。网络摄像头集成。任何人都可以告诉我如何以及在何处实施网络摄像头编码。我想为条形码创建小部件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:18:25.593

在 Web 客户端或 gtk 上，您应该创建不同的实现，对于 Web 客户端，您必须创建一个新的小部件，我不管理新的 JS 框架，但理论上这是方法。

问候/

# javascript - Javascript 函数仅在连接类型为无时发出警报

> ID：12365643
> 
> 赞同：0
> 
> 时间：2012-09-11T08:26:56.367
> 
> 标签：javascript, cordova

我正在使用下面的这个函数来获取互联网连接类型

```
function checkConnection() {
        var networkState = navigator.network.connection.type;

        var states = {};
        states[Connection.UNKNOWN]  = 'Unknown connection';
        states[Connection.ETHERNET] = 'Ethernet connection';
        states[Connection.WIFI]     = 'WiFi connection';
        states[Connection.CELL_2G]  = 'Cell 2G connection';
        states[Connection.CELL_3G]  = 'Cell 3G connection';
        states[Connection.CELL_4G]  = 'Cell 4G connection';
        states[Connection.NONE]     = 'No network connection';

        alert('Connection type: ' + states[networkState]);

} 
```

这会提醒状态： alert('Connection type: ' + states[networkState]);

我需要做的是只有在状态为 states[Connection.NONE] 时才会发出警报

我试过：

```
if ((states[networkState]) = states[Connection.NONE]) {
    alert('No internet connection here');
} 
```

但这没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:30:09.840

从逻辑上讲，这

```
if ((states[networkState]) = states[Connection.NONE]) 
```

应该

```
if ((states[networkState]) == states[Connection.NONE]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:31:29.780

更好的方法是从 if 语句中删除该函数。

```
if (networkState == Connection.NONE) {
    alert('No internet connection here');
} 
```

# android - 使用 Fragments 处理 Android SplitView

> ID：12365646
> 
> 赞同：0
> 
> 时间：2012-09-11T08:27:12.113
> 
> 标签：android, android-layout, uisplitviewcontroller

我正在开发一个需要在 android 中实现 splitview 功能的应用程序。我已经使用片段创建了拆分视图。当屏幕的方向是纵向时，左侧片段被隐藏并显示按钮“详细信息”（外部片段）（代替左侧片段），使右侧片段保持可见。当我单击详细信息按钮时，隐藏的左侧拆分视图应该可见。如何实现？

请注意，正确的片段在整个应用程序中都是可见的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:32:37.290

基本上你在屏幕上有2个片段对吗？

好吧，所以加载左侧的 buttonFragment（leftFrameLayout？）与加载右侧的 rightFragment（rightFrameLayout）的时间相同。

按下按钮时，分离 buttonFragment 并将 leftFragment 附加到左侧（leftFrameLayout）...

我猜是这样的？

如果您正在寻找片段指南，这里有一个简单的： [Lars Vogellas 片段指南](http://www.vogella.com/articles/Android/article.html#fragments_tutorial)

# c - 在 C 程序中，我们可以将变量的名称设为变量吗？

> ID：12365657
> 
> 赞同：1
> 
> 时间：2012-09-11T08:27:52.533
> 
> 标签：c

例如：就像我有一个变量`char str[3]="abc";`，那么我可以使用这个“abc”作为另一个变量的名称（比如一个整数），这样我就可以将任何值存储在`abc`. 如果是，那么在像这样在“abc”中存储一个值时： `int abc=123;` 我可以通过引用它来将 abc 引用为变量`str`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T08:29:22.587

不，你说的是反射，一种访问环境内部细节的方法。C 目前没有将此内置到语言中。

有一些方法可以达到同样的效果，比如有一个从字符串到整数指针的映射数据结构，但是有点乱。举个*例子：*

```
int abc, def;
char *strName[] = {"abc", "def"};
int *address[] = { &abc, &def};
:
char *key = "def";
int newVal = 42;

for (i = 0; i < sizeof (strName) / sizeof (*strName); i++)
    if (strcmp (key, strName[i]) == 0)
        *(address[i]) = newVal; 
```

这将遍历键列表，直到找到匹配的键，然后使用地址列表中的等效指针来修改变量。

但是，老实说，一旦你不得不做一些黑暗和狡猾的事情，你最好用更合适的数据结构来做。

例如，值存储在实际映射中而不是保存“外部”整数地址的映射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T08:32:22.033

不仅你不能，而且它是 C 语言意识形态的一部分。变量名在运行时不存在，并且变量内容在编译时应该无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:43:32.140

通过查看源代码，您看到的程序与运行原始二进制可执行文件时“程序本身看到的”有所不同。在可执行文件中，没有变量名之类的东西。

假设我们有这个程序：

```
char str[4]="abc"; // note that you need to allocate 4 bytes
int abc=123; 
```

以上是源代码，程序员看到的就是这个。程序本身只“看到”类似这样的东西：

在某个地址 0x12345678 处，有 4 个字节。它们是 0x61、0x62、0x63、0x00（ASCII 码）。由于源代码中的 char 类型，程序会将这些作为单独的字节访问。但程序实际上也看不到类型。

然后在地址 0x1234567C，在内存中再往下 4 个字节，我们还有另外 4 个字节（假设是 32 位 CPU）。它们包含值 0x0000007B (123)。程序只将这个int变量称为0x1234567C，不知道程序员在源代码中称它为abc。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T08:52:50.110

您可以考虑代码生成。

使用 XML：

```
<var type="int" name="abc" /> 
```

生成代码：

```
int abc; 
```

（输入 XML 本身可以使用您的 char str[] 作为输入来创建）

# coldfusion - 元素 XMLZONE 在请求中未定义

> ID：12365660
> 
> 赞同：1
> 
> 时间：2012-09-11T08:27:56.450
> 
> 标签：coldfusion, coldfusion-8

我`Element XMLZONE is undefined in REQUEST`每天会收到几十次错误。

**PageDisplay.cfm**调用通过页面**ZoneManager.cfm设置的****request.xmlzone**，使用以下（缩减）代码

 **```
<cfscript> 
variables.aZoneInfo = XmlSearch(application.xmlZones, "//zone[position() = 1]"); 
try { 
     request.xmlZone = ToString(variables.aZoneInfo[1]); 
} 
catch(any expt)
{ 
     variables.objZoneDAO = CreateObject("component", "#application.sComponentDir#ZoneDAO").init(application.sDSN); 
     variables.objZoneDAO.Read(variables.objZone, 1); } 
</cfscript> 
```

现在，XML 永远不会改变，因此值得将 XML 文件/节点作为变量添加到**PageDisplay.cfm吗？**我也想知道它为什么会失败——有什么原因吗？

谢谢，

JJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:27:18.363

好吧，如果调用`ToString(variables.aZoneInfo[1]);`失败，则`request.xmlZone`不会设置。它本身是否会失败是值得怀疑的`toString()`，但如果`variables.aZoneInfo`不是一个包含至少一个元素的数组，那么这会让你感到悲伤。你应该检查这一点，而不是假设它。

如果`request.xmlZone`设置是必不可少的，那么您需要在 catch 块中做比您当前正在做的更多的事情。至少你应该记录被捕获的异常，这样当你去“我想知道为什么会这样？” 你有一个日志可以参考。

我怀疑您的应用程序正在超时，并且当您执行`xmlSearch()`,时`application.xmlZones`不包含您认为它包含的内容。但这是一个猜测。**

# php - 在 PHP 中加载 Activex

> ID：12365661
> 
> 赞同：0
> 
> 时间：2012-09-11T08:27:59.700
> 
> 标签：php, activex

我正在尝试在我的 PHP 代码中加载 Activex，因为我知道这可以通过 PHP 中的 COM 函数来完成，所以我尝试访问我的方法，如下所示：

```
<?PHP
$active = new COM("sswATL.crypto");
//------------------------

$pass = "pincode";

$ret = $active->init( $pass , $retVal);

if($retVal == 0){ 
   print "Login successfully";
}
elseif($retVal == 4){

   print "Token is not present";
} 
else
{
   $errMsg = "Login failed : "; 
   print $errMsg;
  }
?> 
```

但我收到了这个错误：

```
Fatal error: Uncaught exception 'com_exception'
with message '<b>Source:</b> Unknown<br/><b>Description:</b> Unknown'
in C:\my\php\file\path.php
Stack trace:
#0 C:\my\php\file\path.php: com->init('pincode', NULL)
#1 {main}
thrown in C:\my\php\file\path.php on line 7 
```

init 方法声明为：

```
int init(string s,int &num); 
```

任何想法？

# migration - Openlaszlo 4.9 中 getMCRef().unloadMovie() 的等价物是什么

> ID：12365662
> 
> 赞同：1
> 
> 时间：2012-09-11T08:28:01.443
> 
> 标签：migration, openlaszlo, lzx

我想知道`getMCRef().unloadMovie()`OL 4.9 中的等价物

我知道`getDisplayObject()`给出的显示对象会`getDisplayObject.unload()`与此类似`getMCRef().unloadMovie()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:17:17.500

OpenLaszlo[视图类](http://www.openlaszlo.org/lps4.9/docs/reference/lz.view.html)有一个 unload() 函数：

> 视图.卸载（）；卸载使用 setSource 或 source= 属性加载的媒体。

```
<canvas>

  <view id="redBox" width="150" height="150">
    <method name="loadSWF">
       this.setSource('logo.swf');
    </method>
    <method name="unloadSWF">
       this.unload();
    </method>
  </view>

  <button x="200" text="Load SWF" onclick="redBox.loadSWF()"/>

  <button x="200" y="40" text="Unload SWF" onclick="redBox.unloadSWF()"/>

</canvas> 
```

如果您对如何加载资源感兴趣，请查看 LzSprite.as SWF9 内核文件的 setSource 函数：

```
/** setSource( String:url )
    o Loads and displays media from the specified url
    o Uses the resourceload callback method when the resource finishes loading 
*/
public function setSource (url:String, cache:String = null, headers:String = null, filetype:String = null) :void {
    if (url == null || url == 'null') {
        return;
    }
    var loadurl:String = getLoadURL(url, cache, headers);
    if (getFileType(url, filetype) == "mp3") {
        // unload previous image-resource and sound-resource
        this.unload();
        this.__isinternalresource = false;
        this.resource = url;
        this.loadSound(loadurl);
    } else {
        if (this.isaudio) {
            // unload previous sound-resource
            this.unloadSound();
        }

        if (! imgLoader) {
            if (this.resourceContainer) {
                // unload previous internal image-resource
                this.unload();
            }
            imgLoader = new Loader();
            imgLoader.mouseEnabled = false;// @devnote: see LPP-7022
            imgLoader.mouseChildren = false;
            this.resourceContainer = imgLoader;
            this.addChildAt(imgLoader, IMGDEPTH);
            this.attachLoaderEvents(imgLoader.contentLoaderInfo);
        } else {
            //TODO [20080911 anba] cancel current load?
            // imgLoader.close();
        }
        this.__isinternalresource = false;
        this.resource = url;
        var res:Loader = this.imgLoader;
        if (res) {
            res.scaleX = res.scaleY = 1.0;
        }

        imgLoader.load(new URLRequest(loadurl), LzSprite.loaderContext);
    }
} 
```

[在 setSource() 中，会创建flash.display.Loader](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)类的一个实例：imgLoader = new Loader();

有时最好知道 LFC 内部使用了哪些 ActionScript 类，因为如果需要，您可以扩展 OpenLaszlo 的功能。

# iphone - 在非 cocos2d 项目中包含 cocos2d

> ID：12365673
> 
> 赞同：1
> 
> 时间：2012-09-11T08:28:50.657
> 
> 标签：iphone, ios, animation, cocos2d-iphone

我做了一些谷歌搜索和stackoverflowing，但仍然存在该怎么做的问题。我有一个用于 iphone 的大型导航项目 iOS5.1。在几个 VC 上，我需要包含一些或多或少复杂的动画，比如男孩角色的咀嚼动画。我使用过 cocos2d，我知道使用 cocos2d 很容易实现我的目标。但是是否有可能以某种方式将 coco2sd 的场景和图层包含到所需的 VC 中？或者以某种方式将视图与场景重叠？任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:56:17.730

我这样做的方法是在我初始化 ViewController 时创建一个 CCDirector，CCDirector 使用一个 OpenGL 视图，您可以创建一个 ViewController 的子视图。有了 CCDirector，您就可以完成在 Cocos2D 中通常会做的所有事情。

```
if( ! [CCDirector setDirectorType:kCCDirectorTypeDisplayLink] )
    [CCDirector setDirectorType:kCCDirectorTypeMainLoop];

CCDirector *director = [CCDirector sharedDirector];

EAGLView *glview = [EAGLView viewWithFrame:CGRectMake(0, 0, self.view.frame.size.width,self.view.frame.size.height)];

[self.view insertSubview:glview atIndex:1];
[director setOpenGLView:glview]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:02:37.177

首先，您需要在 AppDelegate 中创建一个 director：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
  // ...

  // Create Cocos2D Director
  //
  // Try to use CADisplayLink director
  // if it fails (SDK < 3.1) use the default director
  if( ! [CCDirector setDirectorType:kCCDirectorTypeDisplayLink] )
    [CCDirector setDirectorType:kCCDirectorTypeDefault];

  CCDirector *director = [CCDirector sharedDirector];
} 
```

在您的`-viewDidLoad`方法中，将 Cocos2D 创建的视图添加`self.view`为子视图：

```
- (void)viewDidLoad {
  [super viewDidLoad];

  // configre subviews
  // ...

  // Add your Cocos2D view
  EAGLView * glView = [EAGLView viewWithFrame:self.view.bounds
                                  pixelFormat:kEAGLColorFormatRGB565
                                  depthFormat:0];
  [glView setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight];
  [[CCDirector sharedDirector] setOpenGLView:glView];
  [self.view addSubview:glView];

  // Run a blank scene for testing
  CCScene * blankScene = [CCScene node];
  [[CCDirector sharedDirector] runWithScene:blankScene];
} 
```

您可以创建自己的场景来替换`blankScene`then。

* * *

我强烈推荐你一篇关于这项技术的文章：[“如何集成 Cocos2D 和 UIKit”](http://www.raywenderlich.com/4817/how-to-integrate-cocos2d-and-uikit)。我通过阅读@Ray 的帖子成功地实现了这一点！;)

# oracle - 用于查找非重复行的 Oracle 查询

> ID：12365678
> 
> 赞同：0
> 
> 时间：2012-09-11T08:29:04.577
> 
> 标签：oracle, duplicates

我将尝试以一种简单的方式提出这个问题。考虑一下我有一个包含两列（Name、Contact_No）的表。我们可以在表中使用相同的姓名但使用不同的联系号码。我想知道的是找出在整个表中没有重复的名称。或者换句话说，哪个名字在这个表中是唯一的并且只出现过一次。这只是一个例子，实际情况是完全不同的，但如果有人可以帮助我这个例子，我将能够处理实际设想。

这是一个例子

```
Name     Contact_No

A        123
A        124
B        125
C        126
C        127 
```

我想要的只是找到在整个表格中没有重复的（B）。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T08:36:27.450

你可以简单地这样做：

```
SELECT name FROM tbl_name GROUP BY name HAVING COUNT(name) = 1 
```

签出**[SQLFIDDLE](http://sqlfiddle.com/#!4/c3323/2)**

# java - 静态类是否只包含java中的静态方法？

> ID：12365680
> 
> 赞同：10
> 
> 时间：2012-09-11T08:29:09.000
> 
> 标签：java, class, methods, static, protected

我发现静态类包含未声明为静态的方法的代码。编译器不显示任何警告。看起来很混乱，不是吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T08:31:32.277

java中没有静态类的概念（甚至没有静态内部类）。如果您看到类是静态的并且处于工作状态，那么它必须是声明为静态的内部类（也称为嵌套类）。并且没有限制在静态内部类中只有静态方法。

将内部类声明为静态的意义在于能够创建独立于嵌套类的嵌套类的实例。如果未提及静态，则嵌套类的每个实例都将与其嵌套的类的实例相关联。

这个问题有更多细节。 [Java内部类和静态嵌套类](https://stackoverflow.com/questions/70324/java-inner-class-and-static-nested-class)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-11-30T08:02:12.080

这里的答案很好，但我想我应该添加一个例子。考虑以下类定义

```
class Foo{
    class Bar{
        int x;
    }
} 
```

要使用类 Bar 您必须首先创建类 Foo 的实例。

```
Foo foo = new Foo();
Foo.Bar bar = foo.new Bar();
bar.x = 10; 
```

但是如果你使用了像下面这样的静态关键字

```
class Foo{
    static class Bar{
        int x;
    }
} 
```

你可以跳过一步

```
Foo.Bar bar = new Foo.Bar();
bar.x = 10; 
```

如果您尝试在内部类不是静态时直接静态使用 Foo.Bar，那么您将收到以下错误 -

```
error: an enclosing instance that contains Foo.Bar is required
        Foo.Bar bar = new Foo.Bar();
                      ^
1 error 
```

我认为这个例子应该清楚。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-11T08:33:49.300

静态类是一个嵌套类，它没有对外部类的隐式引用。静态类可以有静态方法或实例方法。注意：内部类不能有静态方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T08:31:24.770

只能声明内部类`static`。静态类没有指向其外部类的指针，因此只能引用外部类的静态字段和方法。然而，静态类本身可能包含非静态方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-11T08:32:42.837

Java 中没有“静态类”之类的东西（至少不是您似乎理解的方式）。在 C# 中有一个“静态类”，它不能被实例化并且不能有非静态成员。这个概念在 Java 中并不明确存在（但是，您可以通过创建所有构造函数来获得相同的效果`private`）。

您看到的可能是这样的静态*嵌套*类：

```
class Foo {
  static class Bar {
  }
} 
```

这*仅*意味着一个`Bar`实例没有*对* 外部`Foo`实例的引用（如果`Bar`没有`static`修饰符就会出现这种情况）。

`Bar`如果它是顶级类，它可以拥有任何类型的成员。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T08:35:16.437

对于`static`属性/方法和类，关键字是完全不同的。

对于属性和方法，它将告诉编译器只有一个属性或方法的实例可以在没有类的活实例的情况下被引用。

`static class`只能用于内部类，表示可以在没有封闭类的现有实例的情况下引用该类。因此，它对于应该从外部访问的内部枚举很有用。

但是 a`static class`可以从它自己的身体中引用任何它想要的东西。

# ios - IOS中tabViewController前添加注册页面

> ID：12365681
> 
> 赞同：0
> 
> 时间：2012-09-11T08:29:14.427
> 
> 标签：ios, uitabbarcontroller

我有一个运行良好的 UITabBarController。

现在，在我打开 tabController 之前，我想检查用户是否已注册，如果没有，我想打开一个注册页面 (RegistrationController)，然后返回我的 tabView。

我该怎么做，因为 TabBarController 只能是第一页。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:31:41.597

您可以在表视图控制器上添加一个覆盖（另一个​​视图会使表视图不可见，因为它将位于您要添加的视图的后面）。成功登录/注册后，您将删除覆盖视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:48:59.653

你可以有一个 viewController(VC1) 推送另一个 viewController (VC2)，在`viewDidLoad`VC2 中你可以以编程方式添加你的标签栏。

```
tabBarController = [[UITabBarController alloc] init];
tabBarController.view.backgroundColor = [UIColor clearColor];

VC3 *object1 = [[VC3 alloc] initWithNibName:@"VC3" bundle:nil];
VC4 *object2 = [[VC4 alloc] initWithNibName:@"VC4" bundle:nil];

tabBarController.viewControllers = [NSArray arrayWithObjects:object1, object2, nil];

tabBarController.delegate = self;
[[tabBarController.viewControllers objectAtIndex:0] setTitle:@"title"];
[[tabBarController.viewControllers objectAtIndex:1] setTitle:@"title"];

[self.view addSubview:tabBarController.view];

[object1 release];
[object2 release]; 
```

你也可以这样做

在`viewDidLoad`（`tabBarController`默认视图）中，您可以检查一个变量，如果其为 0（即用户未注册），那么您可以`presentModalViewController`使用注册表单。

希望能帮助到你。快乐编码:)

# jquery - jQuery Datepicker beforeShowDay

> ID：12365685
> 
> 赞同：4
> 
> 时间：2012-09-11T08:29:33.837
> 
> 标签：jquery, datepicker

我正在使用 jQuery 的 datepicker beforeShowDay 事件，我在其中检查日期是否必须在日历中启用。首先，我得到了使用 PHP 检查页面加载的日期，但现在我想通过 ajax 请求（我正在使用 Wordpress）获取这些日期，但我无法弄清楚。

这是我的代码：

```
$(function() {  
    var enabledDays = [];        

    function openedDays() {
        var data = {
            action: 'get_dates',
            zaal: <?php echo $zaal_id; ?>,
            async: false,
            dataType: 'json'
        };

        $.getJSON(ajaxurl, data, function(response) {
            $.each(response, function(key, value) {
                enabledDays.push(value);  
            });
            //works, console.log(enabledDays) shows here an array of dates: ["9-8-2012","9-10-2012"] 

            //add option beforeShowDay to datepicker? (does't work yet)
            $(this).datepicker('option','beforeShowDay',enableAllTheseDays); 

        });

    }

    function enableAllTheseDays(date) {
        //how to get value of the enabledDays variable in here

        var m = date.getMonth(), d = date.getDate(), y = date.getFullYear();

        for (i = 0; i < enabledDays.length; i++) {
            if($.inArray((m+1) + '-' + d + '-' + y,enabledDays) != -1) {
                //return true(enable date in Current Days Open calendar) if date is in array, add class 'ui-datepicker-opened-day' and tooltip 'opened' to it.
                return [true,'ui-datepicker-opened-day','opened'];
            }
        }            

        //return false(disable date in Current Days Open calendar) if date isn't in both of the arrays, and add tooltip 'closed' to it.    
        return [false,'ui-datepicker-closed-day','closed'];

    }

    //show Current Days Open Calendar
        $( "#currentdays" ).datepicker({
            dateFormat: "dd-MM-yy",
            changeMonth: true,
            numberOfMonths: 1,
            minDate: 0,
            beforeShow: openedDays
        });  

}); 
```

在执行 enableAllTheseDays 函数**之前**，我需要找到一种从 opensDays 函数中获取日期的方法，这样我就可以在 enableAllTheseDays 函数中使用 enabledDays 变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:16:35.107

在 onLoad() 函数中实例化日期选择器一次并`beforeShowDay()`在那时定义方法。`beforeShowDay()`每次显示日期选择器时都会调用它，允许您每次迭代日期。

```
$(function(){
    $("your-selector").datepicker({
        beforeShowDay: function(date) {
            // Either put the enable days code here (I prefer this route)
            // or call it from here: return enableAllTheseDays(date);
            // or define beforeShowDay as beforeShowDay: enableAllTheseDays.
            // It will run each time the date picker is displayed.
        }
    });

    // Now setup your ajax call to load your dates into enabledDays
    // Do not call datepicker again
    $.getJSON(ajaxurl, data, function(response) {
        $.each(response, function(key, value) {
            enabledDays.push(value);
        });
    });
}); 
```

# php - 如何将多行值存储在具有单个 ID 的单个表中

> ID：12365686
> 
> 赞同：-1
> 
> 时间：2012-09-11T08:29:34.727
> 
> 标签：php, sql, mapping, primary-key

我想在表中保存具有单个 id 存储的多行。我应该怎么办？请指导我。

**例如：**

```
|      table1     |
|-----------------|
|id      |name    |
|001(pk) |Ajit    |

|      table2     |
|-----------------|
|id(FK)  |address |
|001     |Pune    |
|001     |Mumbai. | 
```

表示**两个表**是它们在**table1 id**是**主键**& **table2 id**是**外键**

即：**001 id**应该是多个地址，它将被保存到**table2**但**id**必须相同，

即：地址文本框将在运行时生成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:34:39.480

使用 mysql 查询将其（id）默认值设置为“001”（您应得的），然后在插入新条目时将该列保留为新添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:02:02.717

如果您想链接两个表（即用户表和地址表）中的数据，只需使用外键即可。

你的`users`桌子：

```
id | name
================
1  | Martin Bean 
```

你的`addresses`桌子：

```
id | user_id | address
==================================
1    1         Newcastle upon Tyne 
```

这样，您的`addresses`表的主键不依赖于`users`表的 ID。使用连接可以轻松获取两条数据的查询：

```
SELECT
    u.id,
    u.name,
    a.address
FROM
    users u
LEFT JOIN
    addresses a ON u.id = a.user_id 
```

# oop - MATLAB中句柄对象的缓慢删除

> ID：12365687
> 
> 赞同：1
> 
> 时间：2012-09-11T08:29:37.717
> 
> 标签：oop, matlab, lifecycle

我使用 MATLAB 编写了一个模拟引擎，用于模拟生产环境中的产品流。我从句柄继承了所有使用过的类，并使用这些句柄（我猜是相当多的）来链接例如产品和工作系统、订单等。

现在，为了运行我的模型的多个实例，我创建了一个包含所有其他对象及其关系的模拟对象，运行模型并释放模拟变量。

创建和运行模型大约需要 50 秒（这包括所有对象的生成、它们的关系，当然还有模拟运行过程中的计算）。在下一次运行之前释放变量，目前大约需要 3-4 分钟！

我尝试清除、删除和覆盖旧的模拟对象，但没有发现性能上有显着差异。

有没有办法在不重写代码的情况下提高性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:35:07.017

如果没有看到它，或者至少是一些高级设计，很难说出任何关于你的代码的特别之处。

**在优化 OO 方面之前的简短建议：** *您确定瓶颈在对象创建中吗？使用分析器验证它。*

如果 OO 确实是瓶颈，这里有一些猜测：

1.  您使用了循环引用。Matlab 不使用垃圾收集器，而是使用智能引用计数机制，在这种情况下可能会很慢。将对象之间的引用改为树状。

2.  您已经创建了大量的对象。Matlab 对每个对象都有很大的开销，远远超过传统语言（c++、java）。重新设计系统以减少对象数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:42:30.030

您是否碰巧使用元胞数组来存储句柄对象中的其他句柄对象？在 Matlab R2011A 之前，这可能会导致严重的减速。请参阅[http://www.mathworks.com/support/solutions/en/data/1-6VVMS0/index.html?product=ML](http://www.mathworks.com/support/solutions/en/data/1-6VVMS0/index.html?product=ML)

一种解决方法是使用临时局部变量来操作元胞数组，然后将此 tmp 变量分配回您的句柄对象属性。在一种情况下，我看到性能提高了约 100 倍。

# asp.net-mvc-3 - 从 MVC3 视图剃刀视图引擎中的部分视图单击按钮内调用当前控制器操作

> ID：12365688
> 
> 赞同：1
> 
> 时间：2012-09-11T08:29:42.310
> 
> 标签：asp.net-mvc-3, razor

我有一个包含部分视图的视图（来自调用的不同控制器的部分视图 `@{ Html.RenderAction("DebitHeadConfigure", "HeadDisplayConfigure");}`）现在我需要针对按钮单击哪个按钮来自部分视图的操作

注意：目前，如果我使用提交类型按钮，那么它会调用我的主控制器操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:43:17.663

问题不在于您的按钮，而在于您提交的表单。确保在局部视图中的表单中指定操作和控制器。

例如：

```
@using (Html.BeginForm("ActionToCall", "ControllerContainingAction", FormMethod.POST)) {
     <p>
         My Form
     </p>
} 
```

参考：

*   [http://msdn.microsoft.com/en-us/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx)
*   [http://msdn.microsoft.com/en-us/library/dd460344(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/dd460344(v=vs.108).aspx)

# android - Acra：安装、扩展应用程序 - 活动？

> ID：12365689
> 
> 赞同：6
> 
> 时间：2012-09-11T08:29:43.773
> 
> 标签：android, acra

我正在尝试将 ACRA 崩溃报告系统安装​​到我的 android 项目中。现在，我的项目已经在扩展一个类，Activity 类。那么我该如何实施 Acra 项目呢？

正如他们以正常方式声明的那样，您必须创建一个 fe MyApplication 类并使用 Application 扩展它。由于我已经在扩展 Activity 类，所以我不知道该怎么做......他们说：如果您的应用程序已经包含 Application 子类，请将 ACRA 添加到此类；但是，我不知道该怎么做..

谢谢！

[http://code.google.com/p/acra/wiki/BasicSetup](http://code.google.com/p/acra/wiki/BasicSetup)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:40:30.647

只需创建一个`MyApplication`从 扩展的类`Application`，按照他们所说的覆盖`onCreate()`，然后转到您的 AndroidManifest。

您应该有一个`<application>`with 值，例如`android:label`or `android:theme`。只需添加`android:name=".MyApplication"`那里，你就可以开始了。

请记住，如果您的包裹是`com.example.test`，`MyApplication`则必须在那里。如果你想把 MyApplication 放在其他地方，你必须指出它在哪里。

例如，如果您的包 is`com.example.test`并且`MyApplication`is in `com.example.test.application`，则必须添加`android:name=".application.MyApplication`到清单中。我强烈建议您只为您的应用程序使用一个包，因为它可以将您的项目原子化并使其更易于管理和维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-01T22:07:04.417

我已经发布了详细的教程。这使您可以为现有项目设置 ACRA，并将其配置为向您的电子邮件地址发送电子邮件。 [关联](https://androidician.wordpress.com/2015/03/29/sending-crash-reports-with-acra-over-email-using-mandrill/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-15T13:59:52.817

由于清单而使用应用程序。在清单中，只需将其添加到应用程序标签中（其中包含所有活动）：

```
android:name=".MyApplication" 
```

前任：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:name=".MyApplication"
    android:theme="@style/AppTheme" > 
```

由于易于初始化（因为它在启动时由 Android 系统自动初始化），它**永远不会不报告**。它可以在启动时立即崩溃并仍然报告。所以这是一个非常聪明的设置。

我的应用程序类如下所示：

```
@ReportsCrashes(

    formUri = "https://backend.com",
    customReportContent = { /* */ReportField.APP_VERSION_NAME, ReportField.PACKAGE_NAME,ReportField.ANDROID_VERSION, ReportField.PHONE_MODEL,ReportField.LOGCAT },
    mode = ReportingInteractionMode.TOAST,
    resToastText = R.string.crash_toast_text

)  

public class ACRAHandler extends Application {

    @Override
    protected void attachBaseContext(Context base) {
        super.attachBaseContext(base);

        final ACRAConfiguration config = new ConfigurationBuilder(this)

                .build();
        // Initialise ACRA
        ACRA.init(this, config);

    }

} 
```

如果您使用 Firebase 的实例，则可以在同一个应用程序扩展类中同时使用两者，而不会出现任何问题。我自己尝试过，它成功了，错误报告或 Firebase 没有问题。

此外，ACRA 的新链接现在在 Github 上：[https ://github.com/ACRA/acra/wiki/BasicSetup](https://github.com/ACRA/acra/wiki/BasicSetup)

我回答了这个问题，因为很久以前答案就来了，需要更新

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-11T08:41:22.907

需要一个应用程序子类来维护一个全局应用程序状态，并不是每个应用程序都必须对其进行子类化。如果您的应用还没有，您可以创建它。

例子：

```
/* do ACRA imports */
@ReportsCrashes(formKey = "x-x-x-x-x-x")
public class YourApplication extends Application{

public void onCreate(){
    ACRA.init(this);
    super.onCreate();
}
} 
```

您还应该按照教程中的说明在清单文件中声明。

# php - 获取单个 标签 simpleHTMLDOM PHP中的文本

> ID：12365693
> 
> 赞同：0
> 
> 时间：2012-09-11T08:29:52.883
> 
> 标签：php, html-parsing, simple-html-dom

我正在尝试使用 PHP 的 simplehtmldom 库从 html 文件中获取文本。我只想要`<br>`标签之后的文本（TextAfterBreak），但只知道如何获取`<font></font>`标签之间的整个文本（在这种情况下为 TextInsideFontTextAfterBreak）。我试过 `find("/td/font/br")`但它返回一个空字符串可能是因为没有结束`</br>`标签？任何帮助将不胜感激！

这是源 html 源文件片段：

```
<td>
    <font size="-1" face="Verdana, Helvetica, Arial, sans-serif" color="#330000">
    TextInsideFont
    <br>
    TextAfterBreak
    </font>
</td> 
```

这是我的代码片段：

```
$element=$row->find("/td/font");
echo $element =$element[0]->plaintext; 
```

和输出：

```
TextInsideFontTextAfterBreak 
```

注意：html 文件中的每个表行都是唯一的，因此任何正则表达式或字符串操作符都不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:45:40.133

`explode()`它在新行之后，因为`plaintext`剥离`html`数据：

```
$element = $row->find("/td/font");
$element = explode("\n", $element[0]->plaintext);
echo trim($element[1]); 
```

# sass - SCSS 变量范围

> ID：12365703
> 
> 赞同：10
> 
> 时间：2012-09-11T08:30:13.427
> 
> 标签：sass

我正在将样式表从*LESS*转换为*SCSS*，我对我看到的变量范围感到困惑。用一个简单的例子复制：

```
$my-color: #000;

#logo {
    $my-color: #555;
    color: $my-color;
}

a {
    color: $my-color;
} 
```

转换为以下 CSS：

```
#logo {
    color: #555555;
}

a {
    color: #555555;
} 
```

*LESS*中的等效构造将导致`a color`值`#000`作为范围内的变量声明`#logo`将覆盖更通用的声明，但仅在该范围内。变量作用域在*SCSS*中不是那样工作吗？有没有办法达到同样的目的？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-05-03T02:44:02.407

至少从 SCSS v3.4.12 开始不再是这种情况：

现在它正确地定义了变量的范围：

输入：

```
$my-color: #000;

#logo {
    $my-color: #555;
    color: $my-color;
}

a {
    color: $my-color;
} 
```

输出：

```
#logo {
  color: #555;
}

a {
  color: #000;
} 
```

可以试用：[http ://sassmeister.com/](http://sassmeister.com/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-11T15:45:19.023

[通读 Sass 变量默认范围](https://stackoverflow.com/questions/5469931/sass-variable-default-scope)的答案，似乎变量在*SCSS*和*LESS*中的工作方式不同。

在这种情况下，`$my-color`in的定义`#logo`改变了全局变量的值，而在*LESS*中，它将被视为该全局变量的块本地覆盖。

我想我必须以不同的方式组织事情才能达到相同的结果。

# asp.net - ASP.NET MVC C# 全局变量

> ID：12365705
> 
> 赞同：0
> 
> 时间：2012-09-11T08:30:17.797
> 
> 标签：asp.net, asp.net-mvc, global-variables

我需要为我的所有网站保存一个值，有没有办法将它保存在服务器端的全局变量中，例如 ViewData 或者将它保存在 cookie 中更好？

此数据使用下拉列表设置并缓存在控制器中。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T08:38:54.943

**在 Global.asax 页面中**

```
void Application_Start(object sender, EventArgs e)
{
    // set your variable here
    Application["myVar"] = "some value";
} 
```

**动作里面**

```
public ActionResult MyAction()
{
    // get value
    string value = Application["myValue"].ToString();

    // change value
    Application["myValue"] = "some NEW value";

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T08:32:49.623

您可以将其存储在 Application 状态：

```
public ActionResult Foo()
{
    HttpContext.Application["someKey"] = "some value";
    ...
} 
```

然后从中读取：

```
string value = (string)HttpContext.Application["someKey"]; 
```

存储在应用程序状态中的值在网站的所有用户之间共享。

如果您需要存储用户特定的数据，您可以使用会话或 cookie，具体取决于它是否是敏感数据。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-11T08:35:35.380

如果您想更改值，会话将是一种方式，如果该值将是静态的并且在应用程序加载任何数据之前已知，那么您可以将其存储在 Web.config 并从那里引用它。

如：

```
<appSettings>
   <add key="MyStaticItem" value="Lulz" />
</appSettings> 
```

因此，如果您想检索该字符串，您可以执行以下操作：

```
Meh = ConfigurationManager.AppSettings["MyStaticItem"] 
```

`Meh`将会`Lulz`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-12T01:26:02.140

也可以像这样使用会话：

```
Session["MyKey"] = "MyValue"; 
```

并像这样检索：

```
var myVar = (string)Session["MyKey"]; 
```

如果这是每个用户的价值。

希望这是有帮助的。

# java - 需要一个关于与 Android 主屏幕小部件交互的好教程……如果有的话

> ID：12365710
> 
> 赞同：0
> 
> 时间：2012-09-11T08:30:57.930
> 
> 标签：java, android, widget

首先，我在 Android 环境中完全是个菜鸟（你可能已经注意到了）。如果您需要任何解释，请询问，我会尽量简短。

App Widget 本身很简单： 1\. 我正在尝试用一个按钮创建一个简单的应用小部件。2\. 当您点击按钮“Hello World”时，弹出 Toast 消息。

我已经成功地制作了所有的 GUI。我在 AndroidManifest.xml 中声明了所有必要的字符串，我已经对小部件本身进行了布局 - 它完全正常工作并且具有漂亮的视觉效果，所有按钮都是可点击的，甚至声明了 onFocus 和 onPressed 状态。

我失败的是我不能让这个按钮来调用一些动作或功能或类或其他什么。我已经阅读了很多[关于 dev.Android 网站的本教程](http://goo.gl/j2vn)（顺便说一句，它很烂），我还阅读了我用谷歌搜索的其他教程（一般他们只是复制粘贴 dev.Android 的 tuts），没有任何效果，没有都解释了它是如何工作的。

请帮助我找到真正有助于使小部件工作的教程。

反正你统治！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:43:55.150

它们不被称为小部件，您应该将它们称为“应用小部件”或“主屏幕小部件”。

我认为这个链接会对你有所帮助 - [http://www.vogella.com/articles/AndroidWidgets/article.html#simplewidget](http://www.vogella.com/articles/AndroidWidgets/article.html#simplewidget)

更新：在应用小部件中单击按钮打开浏览器

```
Intent openBrowser = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com/"));                       

PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, openBrowser , 0);

remoteViews.setOnClickPendingIntent(R.id.mybutton, pendingIntent); 
```

我假设，您在*xml中的 Button* *id*是*mybutton*并且您已经初始化了 remoteViews。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:47:32.667

本教程应该可以帮助您使用 Toast 小部件：

[http://developer.android.com/guide/topics/ui/notifiers/toasts.html](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)

当您创建布局时，假设您在布局文件中添加了一个按钮，我们将调用 myLayout.xml：

```
<Button    
android:id="@+id/Button"
android:text="@string/Button_Name"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:onClick="Method_Name"/> 
```

然后在你的课上你有：

```
//necessary imports
public class myActivity extends Activity
{

    @Override
    public void onCreate(Bundle savedInstance)
    {
        super.onCreate(savedInstance);
        setContentView(R.layout.myLayout);
    }

    public void Method_Name(View view)
    {
        //Here you would put what you needed from the toast tutorial 
        //So I'll demonstrate how to make hello world pop up
        Context context=getApplicationContext();
        String message="Hello world!";

        Toast toast=new Toast(context, message, Toast.LENGTH_SHORT);
        toast.show();
    } 
```

那么这里发生了什么？好吧，在我们的 myActivity 类中，我们设置了一个 contentView，它将我们的布局文件加载到屏幕上，在这个布局文件中我们有一个按钮（还有其他东西，但它是自动生成的，互联网上有很多东西，布局是不同的主题）。这个使用 onClick 属性的按钮声明了一个要在其内部膨胀的类中调用的方法。然后，当您单击按钮时，将调用方法 METHOD_NAME。我们创建了一个 Toast 小部件，给它一个上下文，它显示的消息以及它将在屏幕上停留多长时间。然后使用 toast.show() 我们向用户显示 toast 通知。

我希望这让事情变得更清楚，如果您需要更多解释或帮助，请说。**

# asp.net - DataGrid中有DataBound吗？

> ID：12365712
> 
> 赞同：1
> 
> 时间：2012-09-11T08:31:02.097
> 
> 标签：asp.net, vb.net, datagrid, databound-controls

在网格视图中：

```
proctected sub gridview.DataBound(Byval sender as object, byval e assystemEventArgs) handles gridview.databound
{

} 
```

如何在 DATAGRID 中使用 DataBound？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:46:47.817

您可以尝试使用此代码基于`OnItemDataBound`

```
 <asp:DataGrid 
   id="ItemsGrid" 
   runat="server"
   OnItemDataBound="Item_Bound"
           .../>

   //Code behind
   void Item_Bound(Object sender, DataGridItemEventArgs e) 
   {

      Label1.Text = Label1.Text + " " + e.Item.ItemIndex;

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:48:44.060

老实说，您的问题目前没有多大意义。但是如果你想处理 GridView 的[`DataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basedataboundcontrol.databound.aspx)事件（而不是[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)事件）：

```
Protected Sub Gridview1_DataBound(sender As Object, e As System.EventArgs) Handles Gridview1.DataBound
    Dim grid = DirectCast(sender, GridView)
    Dim dataSource As Object = grid.DataSource
    For Each row As GridViewRow In grid.Rows
        ' do something, looping all rows in the grid with RowType=DataRow '
    Next row
End Sub 
```

# javascript - 我在哪里可以学习 ECMAScript 标准中尚未包含的 JavaScript 功能？

> ID：12365713
> 
> 赞同：3
> 
> 时间：2012-09-11T08:31:07.573
> 
> 标签：javascript, language-features

我刚刚在 Firebug 控制台中尝试过，

```
let (X=10) X/2 
```

和

```
[x,y]=[y,x] 
```

这些都是 SpiderMonkey 支持的功能，我猜 V8 有它自己的份额。

我在哪里可以了解 ECMAScript 中尚未包含但可在各种浏览器中使用的功能？有没有一个地方可以把这些收集在一起？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-12-04T21:37:48.190

ECMAScript 6（又名 ECMAScript 2015）是 JavaScript 的当前标准，但引擎尚未完全实现它：

*   表格显示了支持哪些 ES6 功能：http: [//kangax.github.io/compat-table/es6/](http://kangax.github.io/compat-table/es6/)
*   三本关于 ES6 的书籍可以在线免费阅读（喜欢就买！）：
    *   [阅读理解 ECMAScript 6](https://leanpub.com/understandinges6/read)
    *   [探索 ES6](http://exploringjs.com/es6/)
    *   [JavaScript Allongé，“六”版](https://leanpub.com/javascriptallongesix/read)
*   [项目符号列表中的 ES6](https://ponyfoo.com/articles/es6)

从 ECMAScript 2016 开始，将有年度版本和新的发布流程：

*   解释新发布过程和 ES2016 候选功能的博客文章：[http ://www.2ality.com/2015/11/tc39-process.html](http://www.2ality.com/2015/11/tc39-process.html)

*   提议功能的官方列表（ECMAScript 标准可能接受也可能不接受）：[https ://github.com/tc39/ecma262](https://github.com/tc39/ecma262)

*   ES2016 功能表：http: [//kangax.github.io/compat-table/es7/](http://kangax.github.io/compat-table/es7/)

如果您想在旧引擎上使用任何新功能，您可以通过 Babel 将它们转换为 ES5：[https ://babeljs.io/](https://babeljs.io/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T08:37:49.337

这里有一篇文章涵盖了有关 Harmony/ES6/Javascript.next 的各种资源：

[http://addyosmani.com/blog/ecmascript-6-resources-for-the-curious-javascripter/](http://addyosmani.com/blog/ecmascript-6-resources-for-the-curious-javascripter/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-05T00:27:36.930

第一个特征被称为“`let`表达式”，它是非标准的；它是从 Firefox 41 中删除的，并且类似的非标准“`let`块”是从 Firefox 44 中删除的：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#Non-standard_let_extensions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#Non-standard_let_extensions)

我惊讶地发现 Kangax 的表格中没有提到这个特定的非标准 JS，但我猜他不得不将此列表限制为多个引擎支持的非标准 JS 扩展：[https ://kangax.github.io /兼容表/非标准/](https://kangax.github.io/compat-table/non-standard/)

如果你想更深入地了解兔子洞，而 Kangax 和 MDN 还没有满足你的好奇心，这个旧参考可能会告诉你关于旧浏览器的好奇心：help.dottoro.com/ljsdaoxj.php

除此之外，浏览器制造商通常会记录他们自己浏览器的怪癖（MDN 也擅长记录非 Mozilla 的怪癖，但并不完美）；说到怪癖，Peter-Paul Koch 在这里记录了标准和非标准 DOM 方法：quirksmode.org/dom/

* * *

无论如何，这些不仅在标准中“还没有”，而且可能“永远不会”，您不应该在自己的代码中使用它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T08:34:30.180

对于当前的 ECMAScript 264 实现，这里是不同浏览器供应商支持的功能列表：http: [//kangax.github.com/es5-compat-table/](http://kangax.github.com/es5-compat-table/)

对于下一代 ECMAScript Harmony 一些资源：

[http://addyosmani.com/blog/ecmascript-6-resources-for-the-curious-javascripter/](http://addyosmani.com/blog/ecmascript-6-resources-for-the-curious-javascripter/)

[http://kangax.github.com/es5-compat-table/es6/](http://kangax.github.com/es5-compat-table/es6/)

# php - 在 PHP 中使用正则表达式匹配字符串

> ID：12365715
> 
> 赞同：0
> 
> 时间：2012-09-11T08:31:13.803
> 
> 标签：php, regex

我是一个初学者，并且在使用 RegExr 工具时发现正则表达式存在问题。

我正在从一个名为 properties.xml 的 XML 文件中加载一组分类广告的标题，我在这里展示 -

```
<?xml version="1.0"?>
<rss version="2.0">
  <channel>
    <item>
      <title>For Sale - Toaster Oven</title>
    </item>
    <item>
      <title>For Sale - Sharp Scissors</title>
    </item>
<item>
      <title>For Sale - Book Ends</title>
    </item>
<item>
      <title>For Sale - Mouse Trap</title>
    </item>
<item>
      <title>For Sale - Water Dispenser</title>
    </item>
  </channel>
</rss> 
```

这是解析 XML 然后检查是否有匹配项的 PHP 代码；不幸的是，它没有显示。

```
<?php
$xml = simplexml_load_file("properties.xml");

foreach ($xml->channel->item as $item){
    $title = $item->title;
    $myregex = preg_quote("/(?<=For(.)Sale(.)-(.))[^]+/");
    $result = preg_match($myregex, $title, $trim_title);
    echo $result;
}
?> 
```

我已经根据 RegExr 工具检查了正则表达式，它看起来很好 - 这是一个屏幕截图

![在此处输入图像描述](../Images/067820b29eddc213217b8d84c3bbd5f7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:43:43.840

您的正则表达式中有一个错误`[^]`。插入符号用于否定方括号中的匹配字符。例如`[^a]`不会匹配 a。

老实说，您的正则表达式并不理想。如果您只想匹配“待售”字符串之后的任何内容，我将使用

> /出售 - ([^<]+)/

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-12T05:32:26.343

你可以试试这个

```
<?php
$xml = simplexml_load_file("properties.xml");

foreach ($xml->channel->item as $item){
    preg_match("/For Sale(.*)<\/title>/siU", $item);
    echo trim($item[1]," -");
}
?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T09:02:56.413

您可以使用 Xpath 来查询 XML 文件

```
$xml = simplexml_load_file("properties.xml");
$results = $xml->xpath('//title/text()');

static $myregex = '/For Sale - (.*)/';
while(list( , $title) = each($results)) {
    $result = preg_match($myregex, $title, $trim_title);
    $trim_title = $trim_title[1];
    echo $result; // Number of matches
    echo $trim_title;
} 
```

更简单的是

```
while(list( , $title) = each($results)) {
    echo substr($title, 11) . "\n";
} 
```

# ruby-on-rails - Rails：Where子句在任何情况下都不起作用

> ID：12365716
> 
> 赞同：0
> 
> 时间：2012-09-11T08:31:13.880
> 
> 标签：ruby-on-rails, select, rails-activerecord, crud

**由于一个简单的 Rails where**查询，我快要失去理智了。我简直无法理解为什么它在 10 行前确实可以工作，而在它之后却没有。我无法弄清楚可能导致问题的原因

```
@userID = Token.where(:tokenCode => @tokenReceived)
  #@init.tokenCode=@tokenReceived+"1" #randomize algorithm required!
  @init.tokenCode=@codeGenerated=generate_activation_code()
  if @userID.nil?
    @newToken=Token.new
    @newToken.tokenCode=@codeGenerated
  else
    @tokenToAdd = "12"
    @newToken=Token.where(:userID => "1")
    #if @newToken.nil?
      @newToken.tokenCode="12"
    #end
  end
  #@newToken.save  
  @init.save 
```

当我向“http://localhost:3000/inits.json”发出成功的 JSON 请求时，它给了我一个包含大量错误的页面，但我认为其中的主要错误是：

```
<h1>
  NoMethodError
    in InitsController#create
</h1>
<pre>undefined method `tokenCode=&#x27; for #&lt;ActiveRecord::Relation:0x007fc43cb40b88&gt;</pre> 
```

可能是什么原因？我写的where子句都错了吗？

**编辑：**当我激活 if 子句时，它会起作用。我只是相信@newToken 对象是空的，但是我几乎不可能发现原因。我的 Token 表中有一个**用户 ID**为1 的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:34:36.540

当你这样做时：

```
 @newToken=Token.where(:userID => "1") 
```

你得到一个`ActiveRecord::Relation`，但你期望一个对象。所以只需将其替换为：

```
 @newToken=Token.where(:userID => "1").first 
```

# sql - sql左连接不能得到正确的结果

> ID：12365722
> 
> 赞同：1
> 
> 时间：2012-09-11T08:31:25.943
> 
> 标签：sql, join, where

现在，我有两个表，`Location`并且`q_Location`，位置作为主表。我这样写 sql left join：

```
SQL1:
    SELECT L.ID,QL.* 
    FROM LOCATION L 
    LEFT JOIN Q_LOCATION QL ON L.ID=QL.LOCATION_ID 
                         AND L.WAREHOUSE_ID=QL.WAREHOUSE_ID
                         AND ISNULL(ql.VIRTUAL, 'N') = 'N' 
                         AND ISNULL(ql.PICKABLE, 'y') = 'Y' 
    where l.warehouse_id='mmc-main 
```

但结果是错误的。if sql语句如下：

```
SQL2：  
    SELECT L.ID,QL.* 
    FROM LOCATION L 
    LEFT JOIN Q_LOCATION QL ON L.ID=QL.LOCATION_ID 
                            AND L.WAREHOUSE_ID=QL.WAREHOUSE_ID
    where l.warehouse_id='mmc-main' 
    AND ISNULL(ql.VIRTUAL, 'N') = 'N'
    AND   ISNULL(ql.PICKABLE, 'y') = 'Y' 
```

现在结果是否正确。我想知道为什么第一个sql是错误的，有人可以帮助我吗？先谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:36:26.353

在 OUTER JOIN（左或右）中应用过滤器时要小心——它与在 WHERE 子句中应用过滤器不同。您的第一个查询没有按预期工作，因为如果连接失败，仍将返回 LEFT 表行，并且您的附加 RIGHT 表过滤器`ISNULL(ql.VIRTUAL, 'N') = 'N'`将`ISNULL(ql.PICKABLE, 'y') = 'Y'`被忽略。

另请参阅：[使用 JOIN 时的 WHERE 子句与 ON](https://stackoverflow.com/questions/10297231/where-clause-vs-on-when-using-join/10297312#10297312)

# wordpress - 在 wordpress 中更改 .htaccess 文件

> ID：12365730
> 
> 赞同：3
> 
> 时间：2012-09-11T08:31:48.960
> 
> 标签：wordpress, .htaccess

我试图在我`permalink feature`的上使用，所以我只是复制了我点击时的代码。我将生成的代码保存在我的本地主机中，该文件以 .Only 的名称存储，现在当我要访问该页面时，该.Only 的url 栏。有人可以告诉我这里有什么错误吗？`WordPress``localhost``generated by WordPress``post name from Common Settings``wordpress index.php``.htaccess``browser is showing the full address of the post``post can not be seen on the browser``404 Not Found error is comming`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T08:49:20.090

你应该让 wordpress 为你的 localhost 服务器写这个文件。

您不能简单地`.htaccess`从另一台服务器复制并期望它会起作用，您必须对其进行修改以反映您的服务器配置。

您应该修改`RewriteBase`和最后一个`RewriteRule`，例如`http://localhost/wordpress`：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /wordpress/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wordpress/index.php [L]
</IfModule> 
```

# java - 自定义对话框宽度和高度

> ID：12365736
> 
> 赞同：2
> 
> 时间：2012-09-11T08:32:14.847
> 
> 标签：java, android, eclipse, android-layout

我正在尝试制作一个自定义对话框

```
LayoutInflater li = LayoutInflater.from(this);
        View view = li.inflate(R.layout.rate_layout, null);

        RelativeLayout rate = (RelativeLayout) view.findViewById(R.id.rateClick);
        RelativeLayout close = (RelativeLayout) view.findViewById(R.id.closeBtn);
        close.setClickable(true);
        rate.setClickable(true);    

       final AlertDialog.Builder  dd = new AlertDialog.Builder(this);          
       dd.setView(view);
       dd.setCancelable(false);

       final AlertDialog d = dd.create();
       d.show(); 
```

背景图像有 4 种分辨率，所以我只能这样做`wrap content`。

这是我的xml文件

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        >

  <RelativeLayout
        android:id="@+id/rateClick"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:background="@drawable/rate_now_button" />

  <RelativeLayout
      android:id="@+id/imageView1"
      android:layout_width="219dp"
      android:layout_height="234dp"
      android:layout_centerHorizontal="true"
      android:layout_centerVertical="true"
      android:background="@drawable/pop_up" >

      <RelativeLayout
          android:id="@+id/closeBtn"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_alignParentRight="true"
          android:layout_alignParentTop="true"
          android:background="@drawable/close_button" >
      </RelativeLayout>

       <RelativeLayout
        android:id="@+id/rateClick"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_alignParentBottom="true"
        android:background="@drawable/rate_now_button" />

  </RelativeLayout>

</RelativeLayout> 
```

这就是我得到的。我想如何删除对话框布局。白色的大边框。

![我的形象](../Images/35e75326c67aee16678ccd764f37820e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-15T21:49:02.907

你可以试试：

```
myDialog.show();
Window window = myDialog.getWindow();
window.setLayout(300, 300); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T04:28:32.767

不要使用 AlertDialog.Builder。试试这个。

```
Dialog d = new Dialog(this, android.R.style.Theme_Translucent_NoTitleBar); 
```

或者

```
Dialog d = new Dialog(this, android.R.style.Theme_Translucent_NoTitleBar_Fullscreen); 
```

您可以使用符合您标准的任何主题，或创建您自己的主题。[请参阅此问题](https://stackoverflow.com/questions/1883425/android-borderless-dialog)和[其他问题](https://stackoverflow.com/questions/4167172/android-r-style-theme-translucent-notitlebar)的答案。另请参阅[可用主题](http://developer.android.com/reference/android/R.style.html#Theme_Translucent_NoTitleBar)。

有关setContentView()、setCancelable()、show() 和其他可能有用的方法的文档，请参阅[对话框。](http://developer.android.com/reference/android/app/Dialog.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-22T07:09:34.457

```
WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
Display display = wm.getDefaultDisplay();
DisplayMetrics metrics = new DisplayMetrics();
display.getMetrics(metrics);
Double width = metrics.widthPixels*.7;
Double height = metrics.heightPixels*.7;
Window win = dialog.getWindow();
win.setLayout(width.intValue(), height.intValue()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-23T18:50:35.803

在你的`rate_layout.xml`：

```
<!-- begin snippet: js hide: false -->
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#0000"
> 
```

如果您不这样做，您还需要创建并调用对话框片段：

```
public class AddDialog extends DialogFragment
{
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState)
    {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

        LayoutInflater inflater = getActivity().getLayoutInflater();

        builder.setView(inflater.inflate(R.layout.rate_layout, null));
        return builder.create();
    }
} 
```

然后`Dialog`在函数中调用：

```
public void SomeFunction()
{
    DialogFragment d = new AddDialog();
    d.show(getSupportFragmentManager(), "some_dialog_refrence");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T15:05:52.270

尝试这样的事情：

```
 dialog_item = new Dialog(Pre_Venda_Digitacao_2.this);
    dialog_item.setContentView(R.layout.layout_pre_venda_digitacao_add_produto);
    Util.softKeyboard(dialog_item.getWindow(), false);

    // Recuperar os componentes da janela e disponibilizar para as variáveis globais.
    dialog_Item_getComponentes();

    /***********************OnShow do Dialog*****************************/
    dialog_item.setOnShowListener(new OnShowListener() {
        @Override
        public void onShow(DialogInterface dialog) {
            //Recupera a menor fonte dentro do layout passado
            float lower_font_size = AutoResizeTextView_Functions.Get_Lower_Font_Size(ll_add_produto, 1000);

            //Seta menor fonte recuparada anteriormente para os textos do layout passado
            AutoResizeTextView_Functions.Resize_Text(ll_add_produto, lower_font_size);
        }
    });

    dialog_item.setOnDismissListener(new OnDismissListener() {

        @Override
        public void onDismiss(DialogInterface dialog) {
            dialog_item = null;
            preVenda_Item = null;
        }
    });

    Display display = getWindowManager().getDefaultDisplay(); 
    int width       = display.getWidth();

    lp = new WindowManager.LayoutParams();
    lp.copyFrom(dialog_item.getWindow().getAttributes());
    lp.width = (int) (width - (width * 0.07) );  //Tira 7% da largura total da tela para deixar um espaço na janela
    lp.height = WindowManager.LayoutParams.WRAP_CONTENT;

    dialog_item.getWindow().setAttributes(lp);

    dialog_item.show(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-29T09:44:37.753

我们可以像这样设置自定义对话框的宽度、高度。

```
DisplayMetrics displayMetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
int screenHeight = displayMetrics.heightPixels;
int screenWidth = displayMetrics.widthPixels;

android.view.WindowManager.LayoutParams lp = new android.view.WindowManager.LayoutParams();
        lp.copyFrom(deleteDialog.getWindow().getAttributes());

// If we need to set background color of activity
// We need to set this before calling show() method
lp.dimAmount = 0.7f;    
deleteDialog.getWindow().setAttributes(lp); 
deleteDialog.show();

// we need to set width, height after calling show() method
Window window = deleteDialog.getWindow();
window.setLayout(screenWidth - screenWidth/2), WindowManager.LayoutParams.WRAP_CONTENT); 
```

# php - 当条件为真时打开一个弹出窗口

> ID：12365740
> 
> 赞同：1
> 
> 时间：2012-09-11T08:32:21.137
> 
> 标签：php, jquery, mysql, if-statement, popup

我想在“如果”条件为真时打开一个弹出窗口，否则它会正常打开。

但是我使用的代码无论条件是真还是假都会打开弹出窗口。

所以，帮帮我，给你的意见

我使用的脚本。

```
<script>
$(document).ready(function() {  

        var id = '#dialog';

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set heigth and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});

        //transition effect     
        $('#mask').fadeIn(1000);    
        $('#mask').fadeTo("slow",0.8);  

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        $(id).css('top',  winH/2-$(id).height()/2);
        $(id).css('left', winW/2-$(id).width()/2);

        //transition effect
        $(id).fadeIn(2000);     

    //if close button is clicked
    $('.window .close').click(function (e) {
        //Cancel the link behavior
        e.preventDefault();

        $('#mask').hide();
        $('.window').hide();
    });     

    //if mask is clicked
    $('#mask').click(function () {
        $(this).hide();
        $('.window').hide();
    });     

});
</script> 
```

CSS就在这里。

```
<style>
#mask {
  position:absolute;
  left:0;
  top:0;
  z-index:9000;
  background-color:#000;
  display:none;
}

#boxes .window {
  position:absolute;
  left:0;
  top:0;
  width:440px;
  display:none;
  z-index:9999;
  padding:20px;
  padding-top:0px;
}

#boxes #dialog {
  width:975px; 
  padding-top:0px;
  background-color:#ffffff;
   background-image: url(../Images/form_bg.png);
background-repeat: no-repeat;
}

</style> 
```

和有条件的 div。

```
<?php
        $check_crm=mysql_num_rows(mysql_query("select * from crm where party_id='$_GET[party_id]'"));
        if($check_crm>0)
        {
            ?>
        <div id="boxes">
        <div id="dialog" class="window">
        <!-- content-->
        </div>
        </div>
        <?php
        }
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:37:19.097

根据 PHP 文档，**[mysql_query()](http://www.php.net/mysql_query)**将返回*对结果的引用*，而不是结果本身。

您将不得不对**mysql_query()**返回的结果引用使用**mysql_num_rows()**或**mysql_fetch_assoc()**等其他方法。

 **例如：

```
$check_crm = mysql_query("select * from crm where party_id='".mysql_real_escape_string($_GET['party_id'])."' limit 1");
if (mysql_num_rows($check_crm) > 0) 
```

顺便提一句：

*   小心潜在的**[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)**。在用户输入上至少使用**mysql_real_escape_string()**，或者更好地将变量绑定到查询。
*   不鼓励使用旧的**mysql_*** PHP 函数。首选使用 PDO 库。检查像 Propel 或 Doctine 这样的 ORM。
*   如果您的目标是仅检查在给定**party_id的****crm**表中是否找到*至少一个匹配*项，则可以添加`LIMIT 1`到查询中以避免无用的处理。

 ****** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:38:37.310

上面的代码将在加载文档时打开弹出窗口，因为它包含在 $(document).ready 函数中。尝试将其包含在一个函数中，并在条件为真时调用*******

# windows - 如何通过 Inno Setup 从注册表获取 Adob e Extension Manager 应用程序路径？

> ID：12365743
> 
> 赞同：1
> 
> 时间：2012-09-11T08:32:32.570
> 
> 标签：windows, registry, inno-setup

我一直在寻找通过 Inno Setup 安装我的扩展的安装程序。我想在 Inno Setup 安装过程的 [Run] 部分中启动 Adob​​e Extension Manager 作为安装后过程。现在，一台机器上可以安装多个版本的 Extension Manager，默认会启动最新版本的 Extension Manager。我想确保用户在安装过程中选择的产品版本会启动相应的扩展管理器。例如，如果一台机器安装了 Photoshop CS5、CS6，并且用户选择了 Photoshop CS5，则应该启动 Extension Manager CS5。为此，我想要应用程序的路径。我无法从注册表中获取 Extension Manager 路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:52:49.867

问题解决了！

我能够通过以下方式获得扩展管理器的路径，

```
RegQueryStringValue(HKCR, 'Applications\Adobe Extension Manager CS5.exe\shell\open\command', '', path); 
```

其中 path 是输出字符串。

谢谢！

# facebook - FB.api wallpost 链接 URL 在包含 Facebook 顶级域名时更改

> ID：12365744
> 
> 赞同：1
> 
> 时间：2012-09-11T08:32:35.660
> 
> 标签：facebook, facebook-javascript-sdk, facebook-apps

嗨我使用这个脚本发布：

```
postToFb:function () {
    //alert(window.FbPostParameters.link);
    FB.api('/me/feed', 'post', window.FbPostParameters, function (response) {
        if (!response || response.error) {
            console.log('/me/feed - Error occured');
        } else {
            console.log('/me/feed - Published to stream!');
        }
    });
}, 
```

并提醒`window.FbPostParameters.link`的是：

**http://www.facebook.com/FBPAGENAME/app_APPID?app_data=forum**

很有趣，因为当我检查墙贴时，网址变成了这样：

**http://www.facebook.com/FBPAGENAME?ref=hl&sk=app_APPID%26app_data%3Dforum**

问题是发布的 url 功能齐全（并且 fb 将 app_data 传递给应用程序）但后一个不起作用。**在我删除%26app_data%3Dforum**部分之前，甚至不会呈现应用程序选项卡。

我找不到任何资源来调试这个问题。你能帮助我吗？

ps：encodeURI 或encodeURIcomponent 结果相同。

**更新：**示例链接：http: [//www.facebook.com/kenivajszmuller/app_238038449651632](http://www.facebook.com/kenivajszmuller/app_238038449651632)

任何人都可以帮忙吗？泰

# javascript - 如何重新附加事件监听器？

> ID：12365746
> 
> 赞同：0
> 
> 时间：2012-09-11T08:32:35.963
> 
> 标签：javascript, javascript-events

函数`prepareMapEventListener()`添加 256 个 EventListener ( `el.addEventListener("click", function (e) { B_modeWindow('1', cords) });`)

在我用 outerHTML 挂起代码后，`document.getElementById(XxY).outerHTML=xmlhttp.responseText;`我必须重新为该元素添加 EventListener，我试图用以下方法完成：

```
// refresh clicable map after it's edited
function refreshMapEventListener() {
    var el = document.getElementById(position);
    el.addEventListener("click", function (e) { B_modeWindow('1', position) });
} 
```

但它完成了一半的工作：它更新了侦听器，但只更新了最后一个单击的元素-如果我单击 10 个元素而不是想要更改其中的第 5 个-第 10 个元素将被更改。

`refreshMapEventListener();`所以我尝试通过删除和替换为每个元素重新播放侦听器`prepareMapEventListener()`：

```
 xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            document.getElementById(XxY).outerHTML=xmlhttp.responseText;  
            refreshMapEventListener();
            hideloading();
        }
    } 
```

它有效！但是每次尝试都会使输出加倍 - 所以点击 2 次后我有 3 次 AJAX 调用，点击 3 次后我有 6 次，而不是 12 次。

如何解决？

# 现场示例（确保观看控制台/萤火虫）：

[http://xn--wiadomesny-37b.pl/stackoverflow/](http://xn--wiadomesny-37b.pl/stackoverflow/)

# 完整代码如下：

```
// prepare clicable map
function prepareMapEventListener() {
    for (x = 1; x <= 16; x++) {
    for (y = 1; y <= 16; y++) {
        (function prepareClickableMap() {
            var cords = x + "x" + y;
            var el = document.getElementById(cords);
            el.addEventListener("click", function (e) { B_modeWindow('1', cords) });
        })();
    }
    }
}

// selection mode
var s;
function selectionMade(e) {
    selection = e.currentTarget.id.split("_"); 
    s = selection[1];
}

// send edited map info to DB
var position;
function B_modeWindow (id,XxY) {  
    if (s !== undefined) {    
        loading();

        var xmlhttp;
        position = XxY;

        if (window.XMLHttpRequest) {
            xmlhttp=new XMLHttpRequest();
        } else {
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

        var xy = position.split("x"); 

        xmlhttp.onreadystatechange=function() {
            if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                document.getElementById(XxY).outerHTML=xmlhttp.responseText;  
                prepareMapEventListener();
                hideloading();
            }
        }

        xmlhttp.open("GET","processMapEdit.php?id="+id+"&x="+xy[0]+"&y="+xy[1]+"&s="+s,true);
        xmlhttp.send();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:33:52.120

从您的评论（和您的实际示例）中，我们了解到您想要的只是一个新`class`的 HTML 元素。这样就容易多了……

改变你的

```
xmlhttp.onreadystatechange=function() {
            if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                document.getElementById(XxY).outerHTML=xmlhttp.responseText;  
                prepareMapEventListener();
                hideloading();
            }
        } 
```

到

```
xmlhttp.onreadystatechange=function() {
            if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                document.getElementById(XxY).className=xmlhttp.responseText;
                hideloading(); //I don't know what this is, so I leave it here
            }
        } 
```

**并**修改您`processMapEdit.php`以仅返回所需的类名而不是整个`DIV`元素。

此外，可能有一些浏览器在`XMLHttpRequest`获取纯文本而不是有效的 XML 文本时无法正常工作，因此您可能需要添加

```
xmlhttp.overrideMimeType("text/plain") 
```

之前`send()`。

# php - 启用 Windows 身份验证的 iis 访问网络共享

> ID：12365749
> 
> 赞同：3
> 
> 时间：2012-09-11T08:32:44.537
> 
> 标签：php, iis, iis-7

我希望这里有人可以帮助我。我在这个问题上搜索了大约 3 个小时，但没有发现任何帮助。（不，stackoverflow.com/questions/1539506 下的答案没有帮助）

我有一个安装了 PHP 的 IIS 7。我将测试网站的身份验证模式设置为“Windows 身份验证”。这一切都很好（我在 PHP 中收到“REMOTE_USER”）。

现在我必须使用“scandir()”和“is_file()”以及其他一些函数访问网络共享，但我只收到错误消息，如“访问被拒绝”或“无法打开目录：没有这样的文件或目录” .

权限设置正确：如果我将身份验证设置为“匿名”并将“用户身份”设置为我当前的测试用户，一切正常，但我必须使用“Windows 身份验证”

我也尝试将网络共享设置为虚拟目录，但 PHP 没有找到该目录（phpinfo() 表示“虚拟目录支持”已禁用，但我没有找到有关如何启用此功能的任何信息）

PS：我在 apache 服务器上尝试了相同的 PHP 配置，一切都很完美。（使用“auth_sspi”模块和“reqire valid-user”指令）。但我必须在 IIS 上完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T14:54:41.260

今天早上我在一个我一直在开发的简单文件组织应用程序上遇到了这个挑战。

尽管我有预感这并不理想，但我还没有从安全专家的角度看待这个问题。我的应用程序是私有的，所以我不太担心。据我所知，问题是网络共享必须由 IIS AppPool 用户安装/授权。

[我在PHP System Call](http://php.net/manual/en/function.system.php%20PHP%20System%20Call)的手册页上找到了执行系统调用的示例：

```
<?php

function my_exec($cmd, $input = '') 
{
    $desc = array(
        0 => array('pipe', 'r'),
        1 => array('pipe', 'w'),
        2 => array('pipe', 'w')
    );

    $proc = proc_open($cmd, $desc, $pipes); 
    fwrite($pipes[0], $input);

    $stdout = stream_get_contents($pipes[1]);
    $stderr = stream_get_contents($pipes[2]);

    fclose($pipes[0]); 
    fclose($pipes[1]); 
    fclose($pipes[2]); 

    $rtn = proc_close($proc); 

    return array('stdout' => $stdout, 'stderr' => $stderr, 'return' => $rtn);
}

?> 
```

然后我可以调用它并访问共享：

```
my_exec('net use \\\\$MachineName\$ShareName /user:$User $Pass'); 
```

我发现即使使用单引号，我也必须对前导 \ 进行双重转义。如果您使用变量并将引号更改为双引号，则可能需要进行一些调整才能使其正确。

请让我知道这对你来说是如何工作的，因为我有点好奇。

# ios - UITableView（分组样式）背景颜色

> ID：12365752
> 
> 赞同：0
> 
> 时间：2012-09-11T08:33:02.360
> 
> 标签：ios, uitableview, uicolor

我正在尝试将分组表视图的 Backgroundcolor 设置为不透明度为 30% 的颜色 - 我在 Interface Builder 中执行此操作。这是结果：

![在此处输入图像描述](../Images/208661bdf1035709cb09364fac934342.png)

*   为什么部分侧面的颜色与背景颜色不同？我不明白。

当我将不透明度设置为 100% 时，颜色在任何地方看起来都相同（正如我所期望的那样......）我试图以编程方式解决这个问题 - 结果相同。

```
self.tableView.backgroundColor = [[UIColor alloc] initWithRed:1.0 green:0.0 blue:0.0 alpha:0.3]; 
```

我使用 xcode 4.3.3 为 iOS 4.0 开发

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:37:59.100

使您的 TableView 颜色清晰，并在您希望的视图中添加颜色。

# java - 在 JTable 中自动添加一些文本

> ID：12365755
> 
> 赞同：0
> 
> 时间：2012-09-11T08:33:10.183
> 
> 标签：java, swing, jtable, jtextfield, tablecelleditor

JTable中的textField可以自动添加一些文本吗？（没有 JavaScript）

就像当用户键入 2 位数字或从该字段失去焦点时为“时间”自动添加冒号（:)。

我尝试使用一些 invokeLater()、KeyListener() 和 editCellAt()，它仅在我进入该字段（双击和 F2）时才起作用，但如果我只单击并键入则不起作用。

```
private JTable getTblMaster() {
if (tblMasterData == null) {
    tblMasterData = new JTable() {

           public boolean editCellAt(int row, int column, EventObject e){
                boolean result = super.editCellAt(row, column, e);
                final Component editor = getEditorComponent();
                if (editor == null || !(editor instanceof JTextComponent)) {
                    return result;
                }
          /*      if(column == 2){
                     EventQueue.invokeLater(new Runnable() {
                        @Override
                        public void run() {

                            if(((JTextComponent) editor).getText().length() == 2){
                                ((JTextComponent) editor).setText(((JTextComponent) editor).getText() + ":");
                            }                               
                        }   
                     });                     
                }
           */
                return result;
            }
            public TableCellEditor getCellEditor(int row, int column) {

                TableColumn tableColumn = getColumnModel()
                        .getColumn(column);

                TableCellEditor editor = tableColumn.getCellEditor();
                try {
                    if (editor == null) {
                            final JTextField text = new JTextField();
                       /* 
                           SwingUtilities.invokeLater(new Runnable() {

                                    @Override
                                    public void run() {
                                        if(text.getText().length() == 2){
                                            text.setText(text.getText() + ":");
                                        }                                       
                                    }                               
                                });

                            text.addKeyListener(new java.awt.event.KeyAdapter() {
                                public void keyPressed(KeyEvent e){
                                    if(text.getText().length() == 2){
                                        text.setText(text.getText() + ":");
                                    }
                                }
                                public void keyReleased(KeyEvent e){
                                    if(text.getText().length() == 2){
                                        text.setText(text.getText() + ":");
                                    }
                                }
                            });
                        */
                            editor = new DefaultCellEditor(text);
                        ;
                        return editor;
                    }
                } catch (Exception e) {
                    LogWriter.error(e);
                }
                return editor;
            }
        };
    }
    return tblMasterData;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:02:44.667

在 TableCellEditor 的文本字段中，`DocumentListener`将. 在 DocumentListener 中，添加应该附加/修改文本字段文本的方法。`Document``JTextField`

如果我没记错的话，您将需要在 a 内执行修改，`SwingUtilities.invokeLater`因为我认为 JTextField 在触发事件期间会阻止文本修改（实际上，是 Document 会阻止这种情况）。

# java - Java StringTokenizer如何找到段落的结尾？

> ID：12365759
> 
> 赞同：0
> 
> 时间：2012-09-11T08:33:22.680
> 
> 标签：java, stringtokenizer

我正在研究 Java String Tokenizer。我正在寻找找到段落结尾的方法。

例如，我有一个文本文件..

```
HI
I am bob the the bob

And I am am  bob bob bob lu the the 

hello 
```

我正在阅读 txt 文件，我正在使用 String Tokenizer 将每个单词放入哈希表

但是，我想在段落结束时停止。例如，

首先，我想存储

```
"HI
I am bob the the bob" 
```

其次，当我们看到双换行符时，我们会停下来。并在哈希表中插入“1”。然后我想插入

```
"And I am am  bob bob bob lu the the " 
```

第三，当我们再次看到双换行符时，我们再次停止。我们在哈希表中插入“2”

然后

我们将“hello”插入哈希表。

但是，我不确定在每段末尾停止的方式？

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:40:15.530

检测双新行不是 sring tokenizer 的职责。您正在使用标记器将一行拆分为单独的单词。但我猜你有一个读取行的外循环。当您检测到空行时，段落结束。

```
while((line = reader.readLine()) != null) {
   if ("".equals(line.trim())) {
      // empty line  - new paragraph. 
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:37:29.800

我想您正在使用空格（“”）作为分隔符。我会尝试使用带有“\n”作为分隔符的第二个 Tokenizer，用它解析文件，然后对每个标记使用你的分隔符。

事实上，在使用第一个分词器后，分词之间的每一个空行都是段落的结尾

# php - Zend Framework addScriptPath 和 Precurio Intranet

> ID：12365761
> 
> 赞同：2
> 
> 时间：2012-09-11T08:33:25.323
> 
> 标签：php, zend-framework

正如我在另一篇文章中所说，我正在尝试使开源 Intranet 适应我的需求。我正在尝试做的一件事是让 Intranet 在与默认文件夹不同的文件夹中查找视图模板（`$customViewPath`并且`$defaultViewPath`，从现在开始）。

我对 Zend Framework 完全没有经验，而且我很难弄清楚一些事情，但是我认为我已经走到了死胡同。

我正在尝试通过`$view->addScriptPath($customViewPath)`在引导程序中使用为视图模板添加我的自定义路径。实际上，它可以工作，但前提是视图文件不存在于`$defaultViewPath`. 我想要的恰恰相反：如果自定义文件不存在`$customViewPath`，则从`$defaultViewPath`.

如果我打印`getScriptPaths()`，我会得到`array($defaultViewPath, $customViewPath)`。也就是说，在脚本生命周期的某个地方，`$defaultViewPath`被添加到视图路径列表中，其优先级高于我的自定义路径。我找不到发生这种情况的地方，并且不认为它存在于每个模块控制器中。

另外，我知道我必须将我的一段代码移动`$view->addScriptPath($customViewPath)`到引导程序之外的某个位置，因为自定义路径与模块相关，但我无法从引导程序访问模块名称，因为尚未启动请求。我想我可以改变它，但我想尽可能地保持原来的行为。

`addScriptPath()`我已经阅读了关于,的所有信息`setScriptPath()`，`getScriptPaths()`我可以理解，但仍然不知道如何将其应用于我的案例。任何想法都会受到欢迎。

我知道我应该提供有关该应用程序的更多信息，但我缺乏经验使我不知道还有什么需要。请随时提出任何可以使我的问题更清楚的问题。

该应用程序的代码可以从其网站下载。我只是不在这里发布链接，以免它看起来像垃圾邮件。

编辑：

我很抱歉坚持这个话题，但我对 ZF 了解得越多，我对这个问题就越感到困惑。

我已经跟踪了视图路径堆栈，并且在我的插件 preDispatch() 和操作 preDispatch() 函数之间的某个位置，默认路径（我试图覆盖的路径）被推入堆栈。

我唯一能想到的是其他一些插件正在我之后执行。我试图给我的插件一个非常高的执行订单号，但仍然没有。

如果我说我在这个问题上花了至少两个星期，我并不夸张（虽然我不能在工作上花更多的时间，我在家里花了很多时间），我已经阅读了所有我能读到的东西把我的手放在调度周期上，但我不知道接下来要尝试什么。

以防万一我可能是对的，有没有办法从一个动作中列出正在执行的插件及其顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T06:39:28.517

基本上你有反转路径堆栈的顺序。

尝试：

```
protected function _initView()
    {
        //Initialize view
        $view = new Zend_View();

        //reset script path stack with custom view path
        $view->setScriptPath($customViewPath);
        //add default path back to path stack
        $view->addScriptPath($defaultViewPath);

        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(
                'ViewRenderer');
        $viewRenderer->setView($view);
        //Return it, so that it can be stored by the bootstrap
        return $view;
    } 
```

这应该可以完成您正在寻找的东西。

# facebook - 单击按钮时共享应用程序结果的代码？

> ID：12365766
> 
> 赞同：0
> 
> 时间：2012-09-11T08:33:43.863
> 
> 标签：facebook, share

这是我的应用程序：[https ://apps.facebook.com/whatareyouinlife/](https://apps.facebook.com/whatareyouinlife/)

您可以看到它在看到结果后自动上传图像和文本，我想让用户选择是否发布..所以我想让它只在单击一个按钮后共享结果，该按钮将靠近结果页..

我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:42:00.767

您只需要使用格式如下的链接（ssstyled as button）：

```
https://www.facebook.com/dialog/feed?app_id=YOUR_APP_ID&redirect_uri=YOUR_REDIRECT_URI 
```

您将在此处找到更多信息：[https](https://developers.facebook.com/docs/reference/dialogs/feed/) ://developers.facebook.com/docs/reference/dialogs/feed/ （直接网址示例）

# node.js - 根据路由在 NodeJS 中提供不同的静态内容

> ID：12365767
> 
> 赞同：0
> 
> 时间：2012-09-11T08:33:44.253
> 
> 标签：node.js, webserver, connect

我应该以我是 NodeJS 新手的事实作为开头，更一般地说，我是对自己的 Web 服务器业务的所有编码，所以请多多包涵。

我想要实现的基本上是复制 Apache 的别名机制。我应该能够简单地在配置文件中配置一个别名列表及其对应的路径，然后让 Node 根据请求提供正确的资源。

为了实现这一点，我挑选了两个中间件在 Connect 之上使用：静态和路由。Route 大部分都按预期工作，但我无法掌握静态的工作原理。具体来说，我现在的问题是：是否可以定义多个“静态”以与 connect 一起使用，然后在收到请求后选择要通过哪个实际提供文件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:05:12.637

您可以定义多个静态以与连接一起使用。

```
 app.use(express.static(__dirname + '/public1'));
   app.use(express.static(__dirname + '/public2')); 
```

连接中间件将检查文件是否存在于第一个目录中，如果未找到，它将检查下一个目录。

但是静态意味着你不应该与 req 一起使用静态。

如果您希望根据请求提供文件，那么您应该设置一个可以根据请求提供内容的动态路由。

# apache2 - 如何使 Apache 限制对文件的访问，除了内部重定向

> ID：12365768
> 
> 赞同：2
> 
> 时间：2012-09-11T08:33:46.060
> 
> 标签：apache2, apache-config, apache-modules

我目前正在开发一个 Apache 模块，在将 POST 数据从请求解析到另一个页面后，我进行了内部重定向到 PHP 页面，该页面进行了一些最终操作并回显出 HTML 元刷新标记。这反过来使浏览器刷新，请求第一页。

问题是，我不希望明确的外部请求能够访问该页面，而是让模块成功执行内部重定向。

有没有办法我可以做到这一点？我试过使用：

```
<Directory /var/www/cc_jnlp/php/>
    <Files session_init.php>
        Order allow,deny
        Deny from all
    </Files>
</Directory> 
```

...但这只会阻止所有请求，无论它是否是内部重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:18:52.923

尝试以下配置：

```
<Directory /var/www/cc_jnlp/php/>
    <Files session_init.php>
        Order deny,allow
        Deny from all
        Allow from 127.0.0.1
    </Files>
</Directory> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:34:31.007

一个好的方法是发送带有请求的东西，将其识别为合法请求。我的第一种方法是在服务器活动开始时生成一个大随机数，并将其与数据一起传输。该模块将识别对该页面的所有请求，并拒绝那些不包含该特定查询参数的请求。问题是，这很容易受到暴力破解，而对付它的唯一方法是增加密钥大小。

我的最终解决方案将改为使用 Apache Notes 系统来传输数据，并假设只有 Apache 服务器本身可以操作该数据，我们可以安全地拒绝所有不包含它的请求。

# c - 从命令提示符运行 Hello World C 代码？

> ID：12365771
> 
> 赞同：0
> 
> 时间：2012-09-11T08:34:01.603
> 
> 标签：c, windows, dos

我编写了一个非常简单的 C 程序，在记事本文本编辑器中打印“Hello World”并将其保存为 test1.exe。我打开我的cmd并运行文件test.exe，收到的错误如下：

> NTVDM CPU 遇到非法指令。CS:0607 IP:0103 OP:63 6c 75 64 65 选择“关闭”以终止应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T08:35:38.053

您需要将文件另存为`test.c`，然后将其*编译*为`test.exe`. 你如何编译它的确切细节将取决于你安装的 C 编译器，但对于[cygwin](http://cygwin.com)或[MinGW](http://www.mingw.org)它将是：

```
$ gcc -Wall test.c -o test.exe 
```

如果您还没有安装编译器，只是想快速尝试运行一个小型 C 程序，那么另一种选择是使用诸如[codepad.org](http://codepad.org)或[ideone.com 之](http://ideone.com)类的站点，您可以在其中键入（或粘贴）您的代码并在线运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T08:41:56.490

有几件事可以帮助您以更轻松的方式学习 C：

*   首先，你说你是用记事本写的。学习 C 的错误选择。记事本不支持语法高亮。
*   其次，需要编译C，在Windows上你有几个编译器选择，第一个是MinGW，它是免费的。
*   第三，还需要支持 MinGW 和 C 语法的 IDE。Geany 很简单，但非常聪明，充满了糖果。

最后，请参阅此处的教程，如何让它们全部工作：[geany+mingw on windows](http://grandfiles.com/tutorials/mingw/index.html)。

还有一件事，与 C 完全无关，或者它可能确实如此。我直截了当地假设 C 是您的第一次编程经验，或者您仍在进行编程的第一步。
C 作为第一语言是非常糟糕的。这不是宽容的，大多数编译器都会传递东西，但代码会崩溃，不会让你知道你做错了什么。
考虑先学习其他语言，一些不错的选择是：

1.  Python
2.  卢阿
3.  红宝石

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:08:42.327

如果您需要 C 的编译器和环境，我会使用[Visual Studio Express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express)而不是其他建议。它更舒适，并提供更全面的 Windows 感觉。而且它也是免费的。

# spring-security - 使用 Spring Security 使用 LDAP 验证用户

> ID：12365772
> 
> 赞同：0
> 
> 时间：2012-09-11T08:34:05.237
> 
> 标签：spring-security, ldap

我正在尝试在 Spring Security 应用程序中使用 LDAP 向用户提供身份验证，我对 Spring Security 和 LDAP 很陌生，我从以下教程 [http://krams915.blogspot.in/2011/01/spring-中获得了帮助security-mvc-using-ldap.html](http://krams915.blogspot.in/2011/01/spring-security-mvc-using-ldap.html) 这是一个 maven 项目，但我没有使用 maven，尽管我添加了所需的所有 jar，但出现以下异常..请建议..

```
ERROR [Thread-3] (ContextLoader.java:220) - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot create inner bean '(inner bean)' of type [org.springframework.security.config.authentication.AuthenticationManagerFactoryBean] while setting bean property 'parent'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authenticationManager': Cannot resolve reference to bean 'org.springframework.security.ldap.authentication.LdapAuthenticationProvider#0' while setting bean property 'providers' with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.ldap.authentication.LdapAuthenticationProvider#0': Cannot create inner bean '(inner bean)' of type [org.springframework.security.ldap.authentication.BindAuthenticator] while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#1': Cannot resolve reference to bean 'org.springframework.security.securityContextSource' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.securityContextSource': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.ldap.DefaultSpringSecurityContextSource]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/apache/commons/lang/StringUtils
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:281)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:125)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authenticationManager': Cannot resolve reference to bean 'org.springframework.security.ldap.authentication.LdapAuthenticationProvider#0' while setting bean property 'providers' with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.ldap.authentication.LdapAuthenticationProvider#0': Cannot create inner bean '(inner bean)' of type [org.springframework.security.ldap.authentication.BindAuthenticator] while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#1': Cannot resolve reference to bean 'org.springframework.security.securityContextSource' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.securityContextSource': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.ldap.DefaultSpringSecurityContextSource]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/apache/commons/lang/StringUtils
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:149)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:109)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:274)
    ... 23 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authenticationManager': Cannot resolve reference to bean 'org.springframework.security.ldap.authentication.LdapAuthenticationProvider#0' while setting bean property 'providers' with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.ldap.authentication.LdapAuthenticationProvider#0': Cannot create inner bean '(inner bean)' of type [org.springframework.security.ldap.authentication.BindAuthenticator] while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#1': Cannot resolve reference to bean 'org.springframework.security.securityContextSource' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.securityContextSource': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.ldap.DefaultSpringSecurityContextSource]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/apache/commons/lang/StringUtils
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:153)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517) 
```

**应用程序上下文.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/mvc 
            http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd 
         http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

    <!-- Activates various annotations to be detected in bean classes -->
    <context:annotation-config />

    <!-- Scans the classpath for annotated components that will be auto-registered as Spring beans.
     For example @Controller and @Service. Make sure to set the correct base-package-->
    <context:component-scan base-package="controllers" />

    <!-- Configures the annotation-driven Spring MVC Controller programming model.
    Note that, with Spring 3.0, this tag works in Servlet MVC only!  -->
    <mvc:annotation-driven /> 

</beans> 
```

**弹簧安全.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:security="http://www.springframework.org/schema/security"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/security 
            http://www.springframework.org/schema/security/spring-security-3.0.xsd">

    <!-- This is where we configure Spring-Security -->
    <security:http auto-config="true" use-expressions="true"
        access-denied-page="/krams/auth/denied">

        <security:intercept-url pattern="/krams/auth/login"
            access="permitAll" />
        <security:intercept-url pattern="/krams/main/admin"
            access="hasRole('ROLE_ADMIN')" />
        <security:intercept-url pattern="/krams/main/common"
            access="hasRole('ROLE_USER')" />

        <security:form-login login-page="/krams/auth/login"
            authentication-failure-url="/krams/auth/login?error=true"
            default-target-url="/krams/main/common" />

        <security:logout invalidate-session="true"
            logout-success-url="/krams/auth/login" logout-url="/krams/auth/logout" />

      </security:http>

    <!-- For authentication: user-search-filter: the attribute name that contains 
        the user name user-search-base: the base path where to find user information 
        For authorization: group-search-filter: the attribute name that contains 
        the full dn of a user group-search-base: the base path where to find role 
        information group-role-attribute: the attribute name that contains the role 
        type role-prefix: the prefix to be added when retrieving role values For 
        server access: manager-dn: the full dn of the person that has access to an 
        LDAP server manager-password: the password of the person that has access 
        to an LDAP server -->
    <security:authentication-manager alias="authenticationManager">
        <security:ldap-authentication-provider
            user-search-filter="(uid={0})" user-search-base="ou=users"
            group-search-filter="(uniqueMember={0})" group-search-base="ou=groups"
            group-role-attribute="cn" role-prefix="ROLE_">
        </security:ldap-authentication-provider>
    </security:authentication-manager>

    <security:ldap-server url="ldap://localhost:11389/o=vtu"
        manager-dn="uid=admin,ou=system" manager-password="secret" />
</beans> 
```

**spring-servlet.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <!-- Declare a view resolver -->
    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
            p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" />

   </beans> 
```

**web.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <filter>
            <filter-name>springSecurityFilterChain</filter-name>
            <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
            <filter-name>springSecurityFilterChain</filter-name>
            <url-pattern>/*</url-pattern>
    </filter-mapping>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
        /WEB-INF/spring-security.xml
        /WEB-INF/applicationContext.xml
        </param-value>
    </context-param>

    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/krams/*</url-pattern>
    </servlet-mapping>

    <listener>

        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T15:22:22.483

您缺少以下 jar 作为 Maven 依赖项：

[http://mvnrepository.com/artifact/commons-lang/commons-lang/2.3](http://mvnrepository.com/artifact/commons-lang/commons-lang/2.3)

[当我遇到 ClassNotjava.lang.NoClassDefFoundError 时，我会在http://mvnrepository.com](http://mvnrepository.com)中搜索该类以找到我需要作为依赖项的 jar。

要添加新的 maven 依赖项，请在项目中查找 pom.xml 文件并添加依赖项，如第一个 [http://mvnrepository.com/artifact/commons-lang/commons-lang/2.3的 maven 选项卡中所示](http://mvnrepository.com/artifact/commons-lang/commons-lang/2.3)

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T10:17:30.710

最后一个异常导致了其他异常。它说：

```
Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/apache/commons/lang/StringUtils 
```

这意味着您缺少 StringUtils 类，可以在此处的 jar 文件中找到该类：http: [//mvnrepository.com/artifact/org.apache.commons/commons-lang3/3.0](http://mvnrepository.com/artifact/org.apache.commons/commons-lang3/3.0)

# windows-8 - Windows 8 应用程序中的必应地图

> ID：12365774
> 
> 赞同：1
> 
> 时间：2012-09-11T08:34:16.030
> 
> 标签：windows-8, bing-maps

我正在尝试在我的 Windows 8 应用程序中实现 Bing 地图。我已经从 [这里安装了 sdk 并按照](http://visualstudiogallery.msdn.microsoft.com/0c341dfb-4584-4738-949c-daf55b82df58)[Code Project](http://www.codeproject.com/Articles/408457/Using-Bing-Maps-For-Windows-8-Metro-Apps-Csharp-Ja) 中的定义配置了我的应用程序 。

但我仍然收到如下错误：

> 找不到指定的过程。（来自 HRESULT 的异常：0x8007007F）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:43:28.347

我有同样的问题。显然有 2 种不同的 Bing Maps SDK 可用。我有用于 Metro Style Apps 的 SDK，但它不起作用。还有一个称为 Bing Maps SDK for Windows Store 应用程序，可以在[这里](http://visualstudiogallery.msdn.microsoft.com/bb764f67-6b2c-4e14-b2d3-17477ae1eaca)找到。

我也在关注[本教程](http://www.codeproject.com/Articles/408457/Using-Bing-Maps-For-Windows-8-Metro-Apps-Csharp-Ja)，它帮助我让地图视图正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:19:12.620

安装 Visual Studio 的扩展。它应该与 SDK 一起提供。通过引用您的项目添加 Bing 地图（有时您需要重新启动 VS）。之后，在您的工具箱中，您应该可以使用 Map 元素

# android - eclipse 无法识别我的布局文件夹

> ID：12365779
> 
> 赞同：0
> 
> 时间：2012-09-11T08:34:37.873
> 
> 标签：android, xml, eclipse, android-layout

eclipse 无法识别我的布局文件夹，我的布局无法被引用

```
R.layout.activity_qr01 
```

并且错误说：我的布局无法解析或不是字段

activity_qr01 的代码是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".QR01" />
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:37:41.920

您的 XML 文件在`res/menu`文件夹中，它应该在`res/layout`文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:42:39.707

你`</RelativeLayout>`最后错过了一个。

此外，您的文件名为`activity_qr01.xml`，因此您必须将其引用为`R.layout.activity_qr01`

# vim - 启动时未加载一些 vimrc 命令

> ID：12365794
> 
> 赞同：1
> 
> 时间：2012-09-11T08:35:36.197
> 
> 标签：vim

前段时间我的 vimrc (d:/programs/vim/_vimrc) 中的行停止工作（不是唯一的）：

```
nnoremap <unique> ç :execute ':let @/ = "\\<' . expand('<cword>') . '\\>"'<CR>:set hlsearch<CR> 
```

（这一行覆盖了 * 的功能，但没有跳转到下一个观察，只需突出显示光标下的单词。我将它映射到 ç 因为这个字符在我的键盘中靠近 * 并且 vim 不使用它，但你可以映射任何其他键）

问题是如果放在 _vimrc 中它会停止工作一段时间，但如果放在 $VIM/vimfiles/plugins/myPlugins.vim 中则可以工作

你遇到过这个问题吗？可能是因为安装了新插件？我对这种行为很感兴趣。我曾尝试使用 :scriptnames 和 _vimrc、.vimrc、.vim/vimrc 等的其他副本，但找不到错误行为的根源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:05:02.350

来自`:h <unique>`：

> 如果其中一个命令的第一个参数是“”，并且它用于定义新的映射或缩写，则如果映射或缩写已经存在，则该命令将失败。

用于`:verbose nmap ç`查看它的定义位置。

或者干脆放弃`<unique>`这似乎根本没有用。

# database - 具有集合数据类型的键值数据库

> ID：12365802
> 
> 赞同：0
> 
> 时间：2012-09-11T08:36:00.680
> 
> 标签：database, redis, key-value

Redis 有这种类型。因此，可以检查集合中存在的任何值。添加到集合，从集合中删除等。

但是数据很大，Redis 存储在内存中。

是否有其他具有相同（设置）功能但存储在磁盘上的键值存储？

PS：设置值不是预定义的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T23:51:31.047

数据集有多大？

我见过一个具有近十亿个数据点的 redis 实例，它只占用了大约 40GB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T08:32:01.813

BerkeleyDB 和 LMDB 都支持每个键的多个值，并且使用它们的排序重复功能将具有与集合相同的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-23T07:48:00.147

这里的解决方案 - [http://ssdb.io/](http://ssdb.io/)

不如 Redis 快，但对我来说还可以。

将数据存储在 SSD 磁盘上。

# javascript - jquery 切换 div 显示隐藏

> ID：12365807
> 
> 赞同：1
> 
> 时间：2012-09-11T08:36:24.870
> 
> 标签：javascript, jquery, slidetoggle

我想在单击它时显示 div 类 {list} 的内部子级，并且当用户再次单击它时，它将隐藏它们。但问题是当用户单击输入字段时，它也会将其隐藏起来。

```
<div class="list">
 <label>Enter your name</label>
 <input type="text" class="data"/>
</div>

<div class="list">
 <label>Enter your Number</label>
 <input type="text" class="data"/>
</div> 
```

js代码

```
 $(document).ready(function()
  {
    $(".list").click(function(event){                
    $(this).children().slideToggle(1000);            
             });
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:40:37.167

将点击事件绑定到输入字段并调用 event.stopPropagation()。

> 描述：防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

```
$(".list input").click(function(e){
    e.stopPropagation();
}); 
```

或者：

```
$(".list").click(function(){
            $(this).children().toggle();
        });
        $(".list").children().click(function(e){
            e.stopPropagation();
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:38:38.527

您始终可以检查单击是否实际上是从子节点冒泡的，如果是，则将其删除：

```
$(".list").click(function(event){                
    if($(event.target).parents('.list').length > 0) { return; }
    $(this).children().slideToggle(1000);            
}); 
```

另一种方法是通过从子节点调用手动取消冒泡，`event.preventDefault()`但是当您希望子节点的其他部分可点击时，可能需要格外小心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:42:06.900

这是因为当您单击输入元素时事件会冒泡。您必须使用下面的代码行来停止事件的事件传播：

```
 evt.stopPropagation(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T09:08:02.150

这是使用函数 jQuery.delegate [http://api.jquery.com/delegate/的完美示例](http://api.jquery.com/delegate/)

您可以指定父元素（'.list'）

然后，您将在要使用“单击”功能的父元素（“标签”）中指定子对象。注意，函数被调用到“子元素”，所以你需要切换 .parent() 元素

```
$(".list").delegate('label','click',function(event){                
    $(this).parent().slideToggle(1000);            
}); 
```

# ios - 我的程序在 tableView 之前在 NSURLConnection 中不起作用

> ID：12365810
> 
> 赞同：-3
> 
> 时间：2012-09-11T08:36:26.437
> 
> 标签：ios, xcode, wsdl, nsurlconnection, tableview

为什么我的程序在`NSURLConnection`tableView 之前不起作用？

```
//  MyLoxFileTVContoller.m

#import "MyLoxFileTVContoller.h"
#import "xml_myloxfile.h"
#import "DetailViewController.h"

@implementation MyLoxFileTVContoller
@synthesize myloxfileArray;
@synthesize exportId_data_Array,readFG_data_Array,receiverId_data_Array,referenceId_data_Array,referenceName_data_Array,reportFullPath_data_Array,reportName_data_Array,senderId_data_Array,senderName_data_Array,sentDate_data_Array,subject_data_Array; 
@synthesize detailViewController;
@synthesize window = _window;
@synthesize navigationController;
@synthesize delegate;
@synthesize unReadCount;
@synthesize webData;

-(void)doParse{

    NSLog(@"doParse"); //debug

    [myloxfileArray removeAllObjects];

    NSString *soapMessage = [NSString stringWithFormat:
                             @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                             "<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:con=\"http://controller.exportingreportwebservice.lox.org/\">\n"
                             "<soapenv:Header/>\n"
                             "<soapenv:Body>\n"
                             "<con:getReport>\n"
                             "<arg0>%@</arg0>\n"
                             "</con:getReport>\n"
                             "</soapenv:Body>\n"
                             //"</soapenv:Envelope>\n", nameInput.text
                             "</soapenv:Envelope>\n", @"2711"
                             ];
    //NSLog(soapMessage);

    NSURL *url = [NSURL URLWithString:@"http://iloxley.loxley.co.th:8081/ExportingReportWebservice/ExportingReportWebservice?wsdl"];
    NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
    NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];

    [theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
    [theRequest setHTTPMethod:@"POST"];
    [theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];

    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    if( theConnection )
    {
        NSLog(@"if theConnection"); //debug
        webData = [NSMutableData data];
    }
    else
    {

        NSLog(@"theConnection is NULL");
    }

    NSLog(@"end doParse"); //debug

}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    NSLog(@"connection didReceiveResponse"); //debug
    [webData setLength: 0];
}
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    NSLog(@"connection didReceiveData"); //debug
    [webData appendData:data];
}
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"ERROR with theConenction");
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"connectionDidFinishLoading"); //debug
    NSLog(@"DONE. Received Bytes: %d", [webData length]);
    NSString *theXML = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
    //NSLog(@"theXML = %@ ", theXML);
    //NSLog(@"webData = %@ ", webData);
    //NSXMLParser *nsXmlParser = [[NSXMLParser alloc] initWithContentsOfURL:theXML];
    NSXMLParser *nsXmlParser = [[NSXMLParser alloc] initWithData: webData];

    // create and init our delegate
    xml_myloxfile_Parser *parser = [[xml_myloxfile_Parser alloc] initXMLParser];

    //set delegate
    [nsXmlParser setDelegate:parser];

    //parsing...
    BOOL success = [nsXmlParser parse];

    if (success) {
        NSLog(@"if success"); //debug

        exportId_data_Array = [parser getExportId_data_Array];
        readFG_data_Array = [parser getReadFG_data_Array];
        receiverId_data_Array = [parser getReceiverId_data_Array];
        referenceId_data_Array = [parser getReferenceId_data_Array];
        referenceName_data_Array = [parser getReferenceName_data_Array];
        reportFullPath_data_Array = [parser getReportFullPath_data_Array];
        reportName_data_Array = [parser getReportName_data_Array];
        senderId_data_Array = [parser getSenderId_data_Array];
        senderName_data_Array = [parser getSenderName_data_Array];
        sentDate_data_Array = [parser getSentDate_data_Array];
        subject_data_Array = [parser getSubject_data_Array];

        items_exportId = exportId_data_Array;
        items_readFG = readFG_data_Array;
        items_receiverId = receiverId_data_Array;
        items_referenceId = referenceId_data_Array;
        items_referenceName = referenceName_data_Array;
        items_reportFullPath = reportFullPath_data_Array;
        items_reportName = reportName_data_Array;
        items_senderId = senderId_data_Array;
        items_senderName = senderName_data_Array;
        items_sentDate = sentDate_data_Array;
        items_subject = subject_data_Array;

        NSLog(@"items_subject = %@ ", items_subject);

    } else {
        NSLog(@"fail");
    }

}

-(void) loadView
{
    NSLog(@"loadView"); //debug
    if (items_subject == nil) {
        //items_subject = [NSMutableArray arrayWithObjects:@"1",@"2",@"3",nil];
    }
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    NSLog(@"numberOfSectionsInTableView"); //debug
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"tableView numberOfRowsInSection"); //debug
    // Return the number of rows in the section.
    NSLog(@"[items_subject count] = %d ", [items_subject count]);
    return [items_subject count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"tableView cellForRowAtIndexPath"); //debug
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        //cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    cell.textLabel.text = [NSString stringWithFormat:@"%@" ,[items_subject objectAtIndex:indexPath.row]];

    //  Populate the cell's detail text label.
    NSString *detailText = [NSString stringWithFormat:@"date: %@  from: %@  reference: %@",
                            [[items_sentDate objectAtIndex:indexPath.row] lowercaseString],[[items_senderName objectAtIndex:indexPath.row] lowercaseString],[[items_referenceName objectAtIndex:indexPath.row] lowercaseString]];

    [[cell detailTextLabel] setText:detailText];

    //CGAffineTransform translate = CGAffineTransformMakeTranslation(10.0, 0.0); 
    //[[cell detailTextLabel] setTransform:translate];

    //unReadCount = 0;

    if([[items_readFG objectAtIndex:indexPath.row] isEqualToString:@"N"]){
        cell.textLabel.textColor = [UIColor redColor];
        unReadCount = unReadCount+1;
    }else{
        cell.textLabel.textColor = [UIColor blackColor];
        unReadCount = unReadCount;
    }

    NSLog(@"unReadCount = %d ",unReadCount);

    //Adding A Badge Number
    //[[UIApplication sharedApplication] setApplicationIconBadgeNumber:unReadCount];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSLog(@"tableView didSelectRowAtIndexPath"); //debug

    //sof2
    DetailViewController *detailController = [[DetailViewController alloc] initWithNibName:@"DetailView" bundle:nil];
    [detailController changeExportIdText:[exportId_data_Array objectAtIndex:indexPath.row]];
    [detailController changeReadFGText:[readFG_data_Array objectAtIndex:indexPath.row]];
    [detailController changeReceiverIdText:[receiverId_data_Array objectAtIndex:indexPath.row]];
    [detailController changeReferenceIdText:[referenceId_data_Array objectAtIndex:indexPath.row]];
    [detailController changeReferenceNameText:[referenceName_data_Array objectAtIndex:indexPath.row]];
    [detailController changeReportFullPathText:[reportFullPath_data_Array objectAtIndex:indexPath.row]];
    [detailController changeReportNameText:[reportName_data_Array objectAtIndex:indexPath.row]];
    [detailController changeSenderIdText:[senderId_data_Array objectAtIndex:indexPath.row]];
    [detailController changeSenderNameText:[senderName_data_Array objectAtIndex:indexPath.row]];
    [detailController changeSentDateText:[sentDate_data_Array objectAtIndex:indexPath.row]];
    [detailController changeSubjectText:[subject_data_Array objectAtIndex:indexPath.row]];

    //[tableView deselectRowAtIndexPath:indexPath animated:YES];

    if([delegate respondsToSelector:@selector(showItemDetails:)])
    {
        //[delegate showItemDetails:[subject_data_Array objectAtIndex:indexPath.row]];
        [delegate showItemDetails:[NSString stringWithFormat:@"%@||%@||%@||%@||%@||%@||%@||%@||%@||%@||%@"
                                   ,[exportId_data_Array objectAtIndex:indexPath.row]
                                   ,[readFG_data_Array objectAtIndex:indexPath.row]
                                   ,[receiverId_data_Array objectAtIndex:indexPath.row]
                                   ,[referenceId_data_Array objectAtIndex:indexPath.row]
                                   ,[referenceName_data_Array objectAtIndex:indexPath.row]
                                   ,[reportFullPath_data_Array objectAtIndex:indexPath.row]
                                   ,[reportName_data_Array objectAtIndex:indexPath.row]
                                   ,[senderId_data_Array objectAtIndex:indexPath.row]
                                   ,[senderName_data_Array objectAtIndex:indexPath.row]
                                   ,[sentDate_data_Array objectAtIndex:indexPath.row]
                                   ,[subject_data_Array objectAtIndex:indexPath.row]
                                   ]];//test multi var'
    }

    // Alert will pop up when using Simulator or iPod Touch for example
    /*
     UIAlertView *alert = [[UIAlertView alloc] initWithTitle:[note_subject_data_Array objectAtIndex:indexPath.row] message:@"Test" delegate:nil cancelButtonTitle:@"Close" otherButtonTitles:nil];
     [alert show];
     */
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {

    return UITableViewCellEditingStyleDelete;

}

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    NSLog(@"viewDidLoad"); //debug

    [self doParse];

    [super viewDidLoad];
}

- (void)viewDidUnload
{
    NSLog(@"viewDidUnload"); //debug

    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return YES;
}

@end 
```

日志：

```
2012-09-11 15:27:15.377 MyLoxFile[2698:f803] loadView
2012-09-11 15:27:15.378 MyLoxFile[2698:f803] viewDidLoad
2012-09-11 15:27:15.379 MyLoxFile[2698:f803] doParse
2012-09-11 15:27:15.382 MyLoxFile[2698:f803] if theConnection
2012-09-11 15:27:15.382 MyLoxFile[2698:f803] end doParse
2012-09-11 15:27:15.385 MyLoxFile[2698:f803] numberOfSectionsInTableView
2012-09-11 15:27:15.386 MyLoxFile[2698:f803] tableView numberOfRowsInSection
2012-09-11 15:27:15.391 MyLoxFile[2698:f803] [items_subject count] = 0 
2012-09-11 15:27:15.454 MyLoxFile[2698:f803] connection didReceiveResponse
2012-09-11 15:27:15.455 MyLoxFile[2698:f803] connection didReceiveData
2012-09-11 15:27:15.455 MyLoxFile[2698:f803] connectionDidFinishLoading
2012-09-11 15:27:15.455 MyLoxFile[2698:f803] DONE. Received Bytes: 1948
2012-09-11 15:27:15.457 MyLoxFile[2698:f803] if success
2012-09-11 15:27:15.457 MyLoxFile[2698:f803] items_subject = (
    "Surgical Report ",
    "Genotype Report",
    "HPV Report"
) 
```

它在数组中有数据，但在 tableView 中没有`numberOfRowsInSection`

在此代码之前，我使用 XML（不是 WSDL）它的工作

这是我的代码 -> [http://www.vasuta.com/ios/MyLoxFile.zip](http://www.vasuta.com/ios/MyLoxFile.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:18:14.307

replace with

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"tableView numberOfRowsInSection"); //debug
    // Return the number of rows in the section.
    NSLog(@"[items_subject count] = %@ ", [items_subject count]);
    return [items_subject count];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:52:53.020

你在更新你的 NSArray 后使用过 [uitableview reloadData] 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:57:06.120

在您的 NSURLConnection 完成下载之前，您的 tableview 似乎已加载并调用其委托方法。你已经启动了 NSURLConnection

```
NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self]; 
```

所以连接是异步的。您无法确定它是在您的 tableview 加载其视图之前还是之后完成。但是您可以随时检查您的 tableview 方法以使您的应用程序正常工作。例如：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    int nbCount = [items_subject count];
    if (nbCount == 0)
        return 1;
    else 
        return [items_subject count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    int nbCount = [items_subject count];
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    if (nbCount ==0)
        cell.textLabel.text == @"Loading";
    else
    {
        // your configuration
        cell.textLabel.text = [NSString stringWithFormat:@"%@" ,[items_subject objectAtIndex:indexPath.row]];
    }
    return cell;
 } 
```

在您的方法“ConnectionDidFinishLoading”中，您可以调用 [tableview reloaddata] 来更新您的 tableview。

[编辑] 2012 年 9 月 12 日

我有你的代码工作（不是一个好的解决方案），你应该重新考虑你如何组织你的 viewControllers。

1.  将 IBOutlet TableView 添加到 myloxfileController.tableView。在 interface`myloxfileContoller.tableView = myloxfileTable;`的 line `myloxfileContoller.view = myloxfileContoller.tableView;`in之后添加这一行。`- (void)viewDidLoad``ViewController`

2.  连接完成后重新加载 tableview 数据。在 interface`[self.tableView reloadData];`的 line `items_subject = subject_data_Array;`in之后添加这一行。`-(void)connectionDidFinishLoading:(NSURLConnection *)connection``MyLoxFileTVController`

这将起作用，因为下载完成后，您会重新加载 IBOutlet TableView 的数据。

# linux - debian/postinst 如何知道正在安装哪个软件包？

> ID：12365813
> 
> 赞同：1
> 
> 时间：2012-09-11T08:36:37.810
> 
> 标签：linux, package, debian, deb

我使用“dh_make --native”对一些源代码进行了去边化。控制文件指定了三个包：

```
blahd
libblahd1
libblahd1-dev 
```

现在`blahd`有一个`init.d`脚本，虽然在构建和安装包后将其放入`/etc/init.d`，但它并没有启用。所以我*想*我需要这样说：

```
insserv blahd 
```

在 debian/postinst 中。但是我如何在 debian/postinst 中判断它是否正在`blahd`安装？`libblahd1``libblahd1-dev`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:41:08.880

barti_ddu 在评论中给出了答案：

如果您的 debian/control 文件指定了多个包，您可以提供多个 init.d 文件，并通过命名它们来指定每个包的名称 debian/ `<package1>`.init、debian/ `<package2>`.init 等。

谢谢。

# c# - GalaSoft.MvvmLight.EventToCommand args 始终为空

> ID：12365816
> 
> 赞同：0
> 
> 时间：2012-09-11T08:36:46.670
> 
> 标签：c#, wpf, mvvm

我有一个从 MvvmLight.ViewModelBase 派生的基类，具有处理对象选择的额外职责。这个类定义了一个`RelayCommand<MouseButtonEventArgs>`绑定在视图中的属性：

```
 <i:Interaction.Triggers>
            <i:EventTrigger EventName="MouseDown">
                <galaxcmd:EventToCommand Command="{Binding SelectCommand,Mode=OneWay}" PassEventArgsToCommand="True"  />
            </i:EventTrigger>
        </i:Interaction.Triggers> 
```

这个视图在包含视图中多次使用，我现在也需要处理鼠标按下。出现我的问题是因为如果容器由包含的视图处理，我不希望容器处理 mousedown。我认为 PassEventArgsToCommand 是我解决这个问题的方法，因为我计划一个子 VM 来设置`MouseButtonEventArgs.Handled = true`. 不幸的是，MouseButtonEventArgs 参数始终为空。以防万一，我还尝试了 RoutedEventArgs 甚至 EventArgs，但它们也都为空。

EventToCommand（或EventTrigger？）我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:52:06.390

您可以在[此处](http://adammills.wordpress.com/2011/02/14/eventtocommand-action-mvvm-glue/)找到修改后的`EventToCommand`实现 - 基于 Galasofts 的实现 - 您可以在其中设置`Eventargs`as`CommandParameter`和 stop 事件路由。

# ruby-on-rails - Rails - 电子商务中的实施折扣

> ID：12365820
> 
> 赞同：1
> 
> 时间：2012-09-11T08:37:03.253
> 
> 标签：ruby-on-rails, e-commerce, shopping, discount

目前我正在一个电子商务网站上工作，只是想知道实施折扣的最佳方式。

我的第一个想法 -使用**product_id**、**price_discount**、**from_date**和**to_date**列创建表**Discounts 。**如果我会对某些产品打折，那么会在此表中添加行。作为一个问题可能会更长一些（与第二个想法相比）加载 - 因为我会显示类别中的产品，然后如果表格中没有记录**折扣**，我将不得不检查价格，而不是打印出来，相应的产品不打折，然后显示价格...

 ******第二个想法只是在**Products**表中包含**price_discount**、**from_date**和**to_date**列- 它可能有点脏，但是因为我会打印出产品的价格，所以我不需要检查另一个表中的记录，但我会刚刚检查了**Products**表中的另一列..

在电子商务网站中实施折扣的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:10:31.497

拥有单独表格的第一种方式为您提供了两个额外的功能：

1.  您可以跟踪过去的折扣。这可能对审计有用。
2.  您可以在未来安排多个折扣。

看看你是否需要这两个功能，然后决定使用哪个。******

# css - div 浮动和位置

> ID：12365823
> 
> 赞同：0
> 
> 时间：2012-09-11T08:37:09.847
> 
> 标签：css, html, position

我的问题是关于定位 div。我有一个动态高度的 div，有时它是 600px，有时是 300 等等，我们称它为 div，div A。现在我想在 div A 中放置另一个 div，并希望它始终位于右下角，让我们称这个 div B.

我知道一种将 div B 相对定位并使用 bottom:xy 进行操作的方法，但在这种情况下它不起作用，因为我的 div A 会动态改变它的高度。

我的问题是，这可能吗？我需要Javascript吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:42:28.360

您可以通过使用绝对位置来做到这一点

```
<div class="d1">
<div class="d2"></div>
</div>​

.d1{
   position:relative; 
   height:350px; width:150px; 
   background-color:grey
  }
.d2{
  position:absolute; 
  bottom:0; right:0;
  background-color:red;
  height:60px; width:80px; 
 }​ 
```

在这里演示[http://jsfiddle.net/aMdrr/](http://jsfiddle.net/aMdrr/)

可以改变d1 div的高度来测试效果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:39:34.390

```
position:absolute;
bottom:0;
width:100%; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:44:43.457

这是可能的，我只是为你做了一个简单的例子：

[http://jsfiddle.net/ujf9D/](http://jsfiddle.net/ujf9D/)

注意：我使用 js 脚本尝试操纵您的动态宽度/高度情况。

# java - 在 HTTP POST 中设置参数

> ID：12365832
> 
> 赞同：0
> 
> 时间：2012-09-11T08:37:36.230
> 
> 标签：java, android, http

我正在尝试使用 HttpClient API 对服务器进行 JSON 调用。代码片段如下所示。

```
HttpClient httpClient = new DefaultHttpClient();
HttpGet httpPost = new HttpPost(URLString);
HttpResponse response = httpClient.execute(httpPost);
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);  
nameValuePairs.add(new BasicNameValuePair("method", "completeUserLogin")); 
String[] params = new String[]{"100408"};
response = httpClient.execute(httpPost); 
```

我想将参数添加到 nameValuePairs。BasicNameValuePair 类不允许您添加数组。有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T08:40:40.373

看这个 。他们在这里传递 BasicNameValuePairs 中的数组。这里的颜色是我们要在服务器上发送的数组。您应该使用数组变量而不是颜色。

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();  
nameValuePairs.add(new BasicNameValuePair("colours[0]","red"));  
nameValuePairs.add(new BasicNameValuePair("colours[1]","white"));  
nameValuePairs.add(new BasicNameValuePair("colours[2]","black"));  
nameValuePairs.add(new BasicNameValuePair("colours[3]","brown"));  

httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
response = httpClient.execute(httpPost); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:40:54.547

如果您以 json 格式发布数据，那么您不应该像这样发布参数。而是创建一个 JSONObject 将这些值放入该 json 对象中，并从该 json 对象中获取一个字符串，然后创建一个 StringEntity，并将该 Entity 设置为 HttpPost 对象。

为请求创建 JSONObject：

```
JSONObject json=new JSONObject();
json.put("method", "completeUserLogin");
JSONArray arr= new JSONArray();
arr.put("100408");
json.put("params", arr);

String params=json.toString(); 
```

# python - 过滤时出现 SQLAlchemy 错误

> ID：12365833
> 
> 赞同：2
> 
> 时间：2012-09-11T08:37:38.007
> 
> 标签：python, sqlalchemy

我正在使用 SQLAlchemy 进行拟合，但出现错误：

```
user = session.query.filter(User.id == 99).one()

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'function' object has no attribute 'filter' 
```

有人知道如何过滤，因为在[SQLAlchemy Page](http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html#returning-lists-and-scalars)上，我看到了这个：

```
query = session.query(User).filter 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:39:24.087

`query`是一个函数，你需要传入`User`类来调用它：

```
user = session.query(User).filter(User.id == 99).one()
                    ^^^^^^ 
```

SQLAlchemy 不能单独从过滤器中判断出你想要返回什么类型的对象。

# python - lxml 的 objectify.makeparser 可以使用 RELAX NG 模式吗？

> ID：12365837
> 
> 赞同：1
> 
> 时间：2012-09-11T08:37:46.637
> 
> 标签：python, lxml, relaxng

我创建了一个 RELAX NG 模式文档和一个符合该模式的 XML 实例文档。我正在使用 python lxml 库来解析和验证文件。

我正在研究使用 lxml.objectify API 并遵循[这里](http://lxml.de/objectify.html "具体来说，在这里断言模式部分")的示例或多或少没有问题，直到我到达“断言架构”部分。

我在示例中看到它使用了 etree.XMLSchema 类型，但我认为/认为/希望我也可以通过某种方式传递 etree.RelaxNG 类型，但是唉：

```
relaxng_doc = etree.parse('schema/link.rng')
relaxng = etree.RelaxNG(relaxng_doc)
parser = objectify.makeparser(schema = relaxng) 
```

给我：

```
Traceback (most recent call last):
File "C:\Users\rubin\Source\Projects\Even\even.py", line 26, in <module>
parser = objectify.makeparser(schema = relaxng)
File "lxml.objectify.pyx", line 1801, in lxml.objectify.makeparser  (src/lxml\lxml.objectify.c:19114)
File "parser.pxi", line 1261, in lxml.etree.XMLParser.__init__ (src/lxml\lxml.etree.c:80303)
TypeError: Argument 'schema' has incorrect type (expected lxml.etree.XMLSchema, got lxml.etree.RelaxNG) 
```

我对这些东西还是很陌生，所以在我开始接受 lxml.objectify 的 makeparser 只能使用 W3C XML Schema 1.0 xsd 解析器之前，我想我会在这里问：我是否正确 lxml.objectify API 只能验证使用 W3C XML 模式，而不是 RELAX NG 模式？

# sql - 这 3 个表的规范化数据库形式是什么？

> ID：12365840
> 
> 赞同：1
> 
> 时间：2012-09-11T08:37:54.340
> 
> 标签：sql, database-design, normalization

所以我有三个表和三个模型：

```
Company (table: companies)
Person (table: people)
Address (table: addresses) 
```

考虑到每个人或公司可以有多个地址，如何将它们连接在一起，但由于地址格式相同，我想使用一个“地址”表，因此可以通过单个地址完成交易/管理地址模型？

因为这个结构：

```
companies(id, name, ...)
people(id,name, ... )
addresses(id, foreign_id, foreign_model, ...) 
```

对我来说似乎有点格格不入。基本上这是现在的结构。“foreign_model”字段是一个字符串，它指定地址属于哪个模型（即公司或个人）。

所有这些都在 Cakephp 下，但是我对这个结构有很多问题，我应该改用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:44:01.170

怎么样：

```
companies(id, name, address_id,..)
people   (id,name, address_id,... )
addresses(id,... ) 
```

公司和个人都指向地址表以获取他们的地址。在这里您不必存储任何重复的地址（如果有）

**编辑**：如果公司和个人都可以有很多地址

然后保留一个映射表

```
companies(id, name,..)
people   (id,name, ... )
addresses(id,... )

Address_map(id,address_id,type) 
```

其中 type 表示它是公司 ID 还是人员
ID --> companyid 或 poepleid

# c# - 将lineargradientbrush颜色与属性绑定

> ID：12365842
> 
> 赞同：2
> 
> 时间：2012-09-11T08:37:58.473
> 
> 标签：c#, xaml, binding, properties, lineargradientbrush

我对梯度停止中的颜色有疑问。我希望将偏移颜色与返回颜色（System.Windows.Media）的属性绑定，但不工作并返回默认颜色透明。如果使用前景标签绑定相同的属性正在工作。这种风格在 ResourceDictionary 中。

```
<Style TargetType="{x:Type TabControl}">
    <Setter Property="Background">
        <Setter.Value>
            <LinearGradientBrush StartPoint="0 0" EndPoint="0 1">
                <LinearGradientBrush.GradientStops>
                    <GradientStop Offset="0.1" Color="Black" />
                    <GradientStop Offset="1" Color="{Binding Path=MyColor}" />
                </LinearGradientBrush.GradientStops>
            </LinearGradientBrush>
        </Setter.Value>
    </Setter>
</Style> 
```

它正在工作：

```
<Style TargetType="{x:Type Label}">
    <Setter Property="Foreground" Value="{Binding Path=MyColor, 
            Converter={StaticResource ColorToBrush}}" />
</Style> 
```

我的财产是：

```
public Color MyColor
{
    set
    {
       myColor = value;
       NotifyPropertyChanged("MyColor");
    }
    get { return myColor; }
} 
```

谢谢大家的解答

# jquery - 格式化动态构建的参数字符串以在数据中使用 jquery ajax 传递

> ID：12365846
> 
> 赞同：0
> 
> 时间：2012-09-11T08:38:19.803
> 
> 标签：jquery, ajax, post

我想通过 ajax 将动态构建的表单中的数据传递给 php 脚本，但无法找到参数字符串格式的正确语法。有几个固定参数，有些是动态添加的，后者的键和值可能会改变。

我尝试将参数列表构建为字符串的串联，如下所示：

```
...
var dataVars = '{fctSelect: 2, strat: strat, ' + gbl.dataVariables + '}';

...

$j.ajax({
    url: "ajax/script.php",
    type: "POST",
    data: dataVars,
... 
```

gbl.dataVariables 的格式如下：'field1: value1, field2: value2, field3, value3'

在console.log中输入数据的结果字符串“看起来正确”，但在字段验证后，在控制台的post选项卡中，它看起来像这样：

```
{fctSelect: 2, strat: strat, ... 
```

代替：

```
fctSelect: 2
strat: 1
... 
```

意味着参数不被解析。有人可以指出我出错的地方吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:42:18.500

我会向您推荐一种替代字符串连接的方法：

```
var dataVars = {};

// add some static values
dataVars['fctSelect'] = 2;
dataVars['strat'] = 'some value';

// now add some dynamic values
for (var i = 0; i < 10; i++) {
    dataVars['field' + i] = i;
}

// send the data as a JSON encoded request
$j.ajax({
    url: 'ajax/script.php',
    type: 'POST',
    data: JSON.stringify(dataVars),
    contentType: 'application/json',
... 
```

然后在你的里面`script.php`：

```
$data = json_decode(file_get_contents("php://input")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T08:50:22.860

Darin Dimitrov 的解决方案可能是适合你的方法，我只会给你一个替代方案。[如果您通过serialize()](http://api.jquery.com/serialize/)收集表单的字段及其值，则可以像这样简单地附加静态数据：

```
var dataVars = $('form').serialize(),
    dataVars += dataVars.length > 0 && '&'; // in case there are no form fields
    dataVars += 'fctSelect=2&strat=somevalue';

$j.ajax({
    url: 'ajax/script.php',
    type: 'POST',
    data: dataVars,
    success: function() {}
}); 
```

# wcf - 在拥有进程退出后，如何释放“守护进程”TCP 端口侦听器？

> ID：12365847
> 
> 赞同：6
> 
> 时间：2012-09-11T08:38:28.977
> 
> 标签：wcf, tcp

## 背景

我有一个 .net 4.0 WCF 应用程序，它在 net.tcp 端口 667 上侦听。（Windows 7 机器）
有时应用程序不正常退出（例如，用户终止了进程）。
现在发生了一件奇怪的事情：*端口保持打开状态*。当用户重新启动应用程序时，它无法侦听该端口，因为它已经在使用中。

奇怪的是，即使拥有进程被杀死，操作系统也没有关闭端口，即使在几个小时后也没有。

以下是一些观察：

*   在 TcpView 上，进程为`<non-existent>`，PID 属于旧（已杀死）进程，状态为`LISTENING`。`IPV4`本地地址是我的机器，并且在该端口上有两个`IPV6`监听器。
*   TcpView 上的“关闭连接”和“结束进程”操作对该端口没有影响。
*   Process Explorer 不显示旧的（已终止的）进程。我试图搜索 PID 或端口的句柄，但一无所获。
*   运行时`netstat -a -b -n -o`涉及的可执行文件显示为`System` ，本地地址为`0.0.0.0`。其他信息与 TcpView 相同。

我发现关闭该端口的唯一方法是重新启动系统......

## 问题

1.  有没有办法配置 WCF net.tcp 服务主机侦听器以避免在进程不正常存在后挥之不去？
2.  有没有办法以编程方式关闭该端口？如果有，我的应用程序可以先关闭该端口，然后再尝试收听它。
3.  是否有可以关闭此类“守护程序”端口的实用程序？（因为 TcpView 不能这样做）
4.  这是操作系统错误吗？操作系统不应该跟踪此类“守护程序”侦听器并在进程存在后关闭它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:44:52.350

> 有没有办法配置 WCF net.tcp 服务主机侦听器以避免在进程不正常存在后挥之不去？

不，至少不应该使用，但是有一种方法可以告诉它在重新启动时重用套接字地址，这使得它变得不必要。

> 有没有办法以编程方式关闭该端口？如果有，我的应用程序可以先关闭该端口，然后再尝试收听它。

不可以。只有打开端口的应用程序才能关闭它。

> 是否有可以关闭此类“守护程序”端口的实用程序？（因为 TcpView 不能这样做）

不，见上文。

> 这是操作系统错误吗？操作系统不应该跟踪此类“守护程序”侦听器并在进程存在后关闭它们吗？

进程退出时，应释放包括 TCP 端口在内的所有进程资源。TCP 'ESTABLISHED' 端口有一个例外，出于 TCP 安全原因，它会停留几分钟。

听起来好像有一个子进程继承了仍然处于活动状态的套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:15:42.237

It happened to me as well, and actually, I found it is those sub-processes that holding the port. My solution is use Process Explorer to search for the Non-existing PID, and kill all the processes list, then the port will be free.

# c# - BLToolkit 使用 MySQL 连接

> ID：12365849
> 
> 赞同：0
> 
> 时间：2012-09-11T08:38:33.890
> 
> 标签：c#, .net, bltoolkit

我正在尝试使用 BLToolkit 建立与 MySQL 服务器的连接，并已通过 NuGet 安装了 MySql.Data (6.5.4)、BLToolkit (4.1.12) 和 BLToolkit.MySql (4.1.12)。我可以在一行中建立到 MSSQL 服务器的连接，但是在使用 MySQL 时遇到了问题，最终得到了以下配置文件......

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <BLToolkit>
        <dataProviders>
            <add type="BLToolkit.Data.DataProvider.MySqlDataProvider" />
        </dataProviders>
    </BLToolkit>
    <configSections>
        <section name="BLToolkit" type="BLToolkit.Configuration.BLToolkitSection, BLToolkit.4" />
    </configSections>
    <connectionStrings>
        <add name="Test"
             connectionString="Data Source=localhost;Port=3306;Database=bltest;User ID=root;Password=root;"
             providerName="MySql.Data.MySqlClient" />
    </connectionStrings>
</configuration> 
```

我扩展了 DbManager 类以实现对表的引用，并将连接字符串的名称传递给基类。这就是我实现这种行为的方式，它应该告诉 BLToolkit 从配置文件中加载 connectionString ...

```
class BlDb : DbManager {
    public BlDb()
        : base("Test") {
        return;
    }
    public Table<Car> Car { get { return GetTable<Car>(); } }
    public Table<Make> Make { get { return GetTable<Make>(); } }
} 
```

但是，会引发异常。例外是“'BLToolkit.Data.DbManager' 的类型初始化程序引发了异常。” 内部异常是“配置系统初始化失败”。我应该如何进行？请注意，SO 上确实存在类似的问题，[Getting BLToolkit to work with MySQL](https://stackoverflow.com/questions/1606178/getting-bltoolkit-to-work-with-mysql)，这对您来说可能是一个有用的参考，但对我来说没有任何意义。安装两个 NuGet 包还不够吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:56:25.843

首先，您需要将**BLToolkit.Data.DataProvider.MySql.4.dll**的引用添加到您的项目中。然后修改您的扩展 DbManager 类，如下所示

```
class BlDb : DbManager
{
    public BlDb()
        : base( new BLToolkit.Data.DataProvider.MySqlDataProvider(), "Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword" )
    {           
    }
    public Table<Car> Car { get { return GetTable<Car>(); } }
    public Table<Make> Make { get { return GetTable<Make>(); } }
} 
```

您可以替换硬编码的连接字符串并从您的 app.config 文件中返回它，例如**ConfigurationManager.ConnectionStrings["Test"].ConnectionString**

# javascript - 停止打开多个对话框窗口

> ID：12365854
> 
> 赞同：1
> 
> 时间：2012-09-11T08:38:43.657
> 
> 标签：javascript, html, ajax

我正在尝试对我的网页的部分视图进行 ajax 调用，然后从中提取标题和数据，然后再将其放入对话框窗口中。但是，当我创建对话框时，它会正确打开一次，然后作为空对话框再打开 6 次 - 只是标题栏。

在 chrome 中，我可以看到 partialView 包含 HTMLDivElement 和 7 个 HTMLScriptElements，以便解释多次打开 - 但是，如果我只为该 div 元素打开对话框，它将不会加载脚本（因此查找和选项卡不起作用）。

```
 $.ajax(url)
  .success(function (partialViewHtml) {
     // get page data

     $(partialViewHtml).dialog({
        title: title,
        modal: true,
        resizable: true,
        draggable: true,
        height: sheight,
        width: swidth
     }); 
```

任何帮助将不胜感激。一段时间以来，我一直在用头撞墙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:49:59.763

正如您似乎已经理解的那样，这是正常的，因为您打开对话框的 jQuery 集合中有 7 个元素。

您应该将脚本元素单独添加到页面中，例如使用

```
$('body').append(scriptElementHTML); 
```

然后在 div 上打开您的对话框：

```
$(divHtml).dialog({ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:55:53.037

不确定 jQuery ui 是否有关闭所有对话框的方法，但我们可以这样做

```
function createDailog () {
    $(".ui-dialog-content").dialog("close");  // close all dialogs

    $("<div>fdfdsfdsfdsfds<div>").dialog({
        title: "title",
        modal: true,
        resizable: true,
        draggable: true,
        height: 200,
        width: 200
    });
} 
```

或者你可以提出这样的条件

```
if(!$(".ui-dialog-content:visible").length){
    // show dialog
} 
```

# api - Twitter 按类别分类的趋势

> ID：12365856
> 
> 赞同：0
> 
> 时间：2012-09-11T08:38:46.463
> 
> 标签：api, rest, twitter

只是想知道 twitter 中是否有一种方法可以检查类别中的流行趋势，例如“汽车”、“体育”、“外汇”等，就像我们有 search.twitter.com 为我们提供搜索一样关键词。有没有一种方法可以搜索与某个类别相关的特定趋势。

谢谢，

瓦布哈夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:27:03.003

就我所见，没有 api 可以根据主题提取趋势，但是您可以通过公共流 API 监控包含特定关键词的推文。查看 twitter api 文档了解更多信息。[https://dev.twitter.com/docs/streaming-apis](https://dev.twitter.com/docs/streaming-apis)

# ios - AFNetworking - 操作时间问题

> ID：12365858
> 
> 赞同：0
> 
> 时间：2012-09-11T08:38:52.690
> 
> 标签：ios, uiview, nsoperation, afnetworking

我在玩 AFNetworking，我需要帮助。

我希望在发出操作请求时出现 UIView（向上滚动），并且在操作完成时 UIView 消失（向下滚动）。- 简单的动画。:)

我的向上滚动时间是 1 秒。向下滚动时间为 1 秒。

现在对于我的问题，如果操作时间小于 2 秒。无需显示 UIVIew。

有可能吗，如果是我该怎么做？

/ 莫腾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:11:50.657

要考虑的一件事是取决于用户的延迟，您不能总是依赖于时间量完全相同。但是如果你想让你的动画在确切的时间范围内工作，我会使用[NSTimer](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)`+ timerWithTimeInterval:target:selector:userInfo:repeats:`的方法

# java - 如何在 java web 服务中使用 PUT 方法接收参数

> ID：12365862
> 
> 赞同：1
> 
> 时间：2012-09-11T08:38:59.307
> 
> 标签：java, jax-rs, put

所以我[用返回类型](https://stackoverflow.com/questions/12353307/how-to-send-http-error-for-a-java-restful-web-service)问了这个问题。

现在我尝试制作这样的`PUT`方法：

```
@PUT
@Path("deleteAbsence")
@Produces("text/html")
public Response deleteAbsence(@QueryParam("id") String absenceID) {
  String data = null;
  return Response.ok("asda {"+absenceID+"}").build();
} 
```

而我`absenceID`的是`null`。我必须更改什么才能接收参数？

这是我从服务器收到的错误 415 的答案： [响应](http://www.picz.ro/show-image.php?id=9775b75f17c4ac35edec7389588ca1cd)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:46:26.680

发送 PUT 请求到`http://example.com/deleteAbsence/?id=42`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:44:35.400

使用正确的查询参数调用资源：

```
PUT http://example.com/deleteAbsence/?id=42 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:21:19.557

在我不得不说的内容中：

```
 "<"absenceIDString >2 "<"/absenceIDString> 
```

该方法如下所示：

```
@Consumes("application/xml")
@PUT
@Path("deleteAbsence")
@Produces("text/html")
public Response deleteAbsence( String absenceIDString) {
    String data = null;
    return Response.ok("asda {"+absenceIDString+"}").build();
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T09:52:44.650

这与MyEclipse 中的**Rest Web Service Explorer配置有关。**屏幕截图显示您的变量名称`absenseIdString`应该是`id`. 确保您已将**参数类型**配置为`QueryParam`. 在 myeclisp 配置屏幕中，默认值为 PathParam。

检查本[教程](http://www.myeclipseide.com/module-htmlpages-display-pid-10.html)

# django - django 调试工具栏无法从虚拟机上的静态 IP 工作

> ID：12365863
> 
> 赞同：2
> 
> 时间：2012-09-11T08:39:05.793
> 
> 标签：django, django-debug-toolbar

我有一个虚拟机，我为它指定了一个静态 IP 供本地使用。192.168.1.23 我在 127.0.0.1:8000 的 VM 上运行 django。我`django-debug-toolbar`在应用程序上安装，然后应用以下设置：

```
DEBUG = True

INSTALLED_APPS += (
    'debug_toolbar',
)

INTERNAL_IPS = ('127.0.0.1', '192.168.1.23')

DEBUG_TOOLBAR_CONFIG = {'INTERCEPT_REDIRECTS': False,}

MIDDLEWARE_CLASSES += (
    'debug_toolbar.middleware.DebugToolbarMiddleware',
)

DEBUG_TOOLBAR_PANELS = (
    'debug_toolbar.panels.version.VersionDebugPanel',
    'debug_toolbar.panels.timer.TimerDebugPanel',
    'debug_toolbar.panels.settings_vars.SettingsVarsDebugPanel',
    'debug_toolbar.panels.headers.HeaderDebugPanel',
    'debug_toolbar.panels.request_vars.RequestVarsDebugPanel',
    'debug_toolbar.panels.template.TemplateDebugPanel',
    'debug_toolbar.panels.sql.SQLDebugPanel',
    'debug_toolbar.panels.signals.SignalDebugPanel',
    'debug_toolbar.panels.logger.LoggingPanel',
) 
```

我无法在管理员或网站中看到它。什么可能是错的？没有 HTML 问题，并且页面有一个 body 标签。可能的错误是什么？

编辑：`request.META['REMOTE_ADDR']`是 127.0.0.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T09:48:28.253

这对我有用，其中 XXX 是所需的 IP 地址：

```
def custom_show_toolbar(request):
    if request.META['REMOTE_ADDR'] == 'XXX.XXX.XXX.XXX':
        return True
    else:
        return False

DEBUG_TOOLBAR_CONFIG = {
    'SHOW_TOOLBAR_CALLBACK': custom_show_toolbar,
    'INTERCEPT_REDIRECTS': False,
    } 
```

**更新：** 从 1.0 版开始，`SHOW_TOOLBAR_CALLBACK`应该是一个虚线路径，所以设置看起来更像：

```
DEBUG_TOOLBAR_CONFIG = {
    'SHOW_TOOLBAR_CALLBACK': 'dotted.path.to.custom_show_toolbar',
    'INTERCEPT_REDIRECTS': False,
} 
```

# java - Java 线程 - 用于两个 while 循环

> ID：12365871
> 
> 赞同：2
> 
> 时间：2012-09-11T08:39:37.020
> 
> 标签：java, multithreading, thread-synchronization

我是一个初学者，我为此学习了教程，但仍然不知道如何实现这一点。

我有两个 while 循环，一个在 main() 方法中，一个在 send() 方法中，都需要同时执行，我该怎么做。

```
public static void main(String[] args) throws Exception
{   
    socket = new DatagramSocket(13373); // 69 Reserved for TFTP

    // Listen for incoming packets
    while(true) {
        // Do things
    }
}

private static void sendDATA() {
    while(true) {
        // Do things
    }
} 
```

sendDATA 中的 while 循环通过从文件中读取 512 个字节然后将它们发送到客户端类来工作。虽然 main 方法中的循环从客户端接收数据包并更新变量，如果变量为真，则 sendDATA 读取下一个 512 字节并发送它们等等，但我不能在两个线程中工作。

我已经用一个while循环完成了这个并且程序可以正常工作，它可以传输除最后一个之外的所有数据包。客户端永远不会得到最后一个数据包。

服务器：

```
 public static void main(String[] args) throws Exception
{   
    socket = new DatagramSocket(13373); // 69 Reserved for TFTP

    // Listen for incoming packets
    while(true) {
        DatagramPacket packet = new DatagramPacket(incoming, incoming.length);
        socket.receive(packet);

        clientip = packet.getAddress().toString().replace("/", "");
        clientport = packet.getPort();

        System.out.println(clientport);

        if(incoming[0] == 1 || incoming[0] == 2) {
            handleRequest(incoming);
        } 

    }
}

// sends DATA opcode = 3 : | opcode | block # | data |
private static void sendDATA() {

    try {
        ByteBuffer sDATA = ByteBuffer.allocate(514);

        byte[] tmp = new byte[512];
        DatagramPacket data = new DatagramPacket(sDATA.array(), sDATA.array().length, InetAddress.getByName(clientip), clientport);
        InputStream fis = new FileInputStream(new File(FILE));

        int a;
        int block = 1; 

        while((a = fis.read(tmp,0,512)) != -1)
        {
            data.setLength(a);
            sDATA.put((byte)3);
            sDATA.put((byte)block);
            System.out.println(sDATA.array().length);
            sDATA.put(tmp);
            System.out.println(tmp.length);
            socket.send(data); 

            socket.setSoTimeout(60000);

            while(true) {
                DatagramPacket getack = new DatagramPacket(incoming, incoming.length);
                try {
                    socket.receive(getack);
                    if(incoming[0] == 4 && incoming[1] == block) {  
                        break;
                    } else if(incoming[0] == 4 && incoming[1] == block && tmp.length < 511) {
                        fis.close();
                        break;
                    }
                } catch (SocketTimeoutException e) {
                   socket.send(data);
                   continue;
                }

            }
            block++;
        }       
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

客户：

```
public static void main(String[] args) throws Exception
{
    clientSocket = new DatagramSocket(8571);

    // WRQ || RRQ
    Scanner input = new Scanner(System.in);
    int opcode = input.nextInt(); input.close();

    // Pripravi paketek
    outgoing = makeRequestPacket(opcode,"filename.txt","US-ASCII");

    // Odposlje pakete
    sendPacket(outgoing);

    // Streznik vrne ACK - opcode 4 ali ERROR - opcode 5
    // Pri ACK zacnemo posiljat DATA opcode 3 drugace prekinemo povezavo ob ERROR - opcode 5
    while(true) {
        DatagramPacket receiveResponse =  new DatagramPacket(incoming, incoming.length);
        clientSocket.receive(receiveResponse);

        // opcode 5 - ERROR
        if(incoming[0] == 5) {
            getError(incoming);
        } 
        else if(incoming[0] == 4 && incoming[1] == 0) { // opcode 4 - Prvi ACK
            System.out.print("opcode: (" + incoming[0] +") ACK received operation confirmed.");
            continue;
        } 
        else if(incoming[0] == 3) {
            System.out.println("Ah got a data packet.");
            File initfile = new File("filename2.txt");
            if(!initfile.exists()) {
                initfile.createNewFile();
            } 

            int block;
            FileOutputStream fio = new FileOutputStream(initfile);

            if(incoming.length > 511) {
                block = incoming[1];
                System.out.println("Will start to write.");

                for(int i = 2; i < incoming.length; i++) {
                    fio.write(incoming[i]);
                }
                ByteBuffer recack = ByteBuffer.allocate(514);
                recack.put((byte)4);
                recack.put((byte)block);
                System.out.println("If i came here and nothing happened something went horribly wrong.");

                DatagramPacket replyACK = new DatagramPacket(recack.array(), recack.array().length, InetAddress.getByName("localhost"),13373);
                clientSocket.send(replyACK);
            } else if (incoming.length < 511) {
                System.out.println("Last chunk.");
                block = incoming[1];
                for(int j = 2; j < incoming.length; j++) {
                    if(incoming[j] != 0) {
                        fio.write(incoming[j]);
                    } else {
                        break;
                    }
                }
                ByteBuffer recack = ByteBuffer.allocate(514);
                recack.put((byte)4);
                recack.put((byte)block);

                DatagramPacket replyACK = new DatagramPacket(recack.array(), recack.array().length, InetAddress.getByName("localhost"),13373);
                clientSocket.send(replyACK);
                fio.close();
                clientSocket.close();
                break;
            }
            continue;

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:45:13.853

您必须使用阻塞通道来同步进程之间的通信：

```
SocketChannel socketChannel = SocketChannel.open();
socketChannel.configureBlocking(true); 
```

更多信息：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/nio/channels/SocketChannel.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/channels/SocketChannel.html)

此外，套接字被设计为在进程之间发送数据，如果不是这种情况，您的方法是错误的，您应该更改您的设计，即当（或每次）数据准备好时在新线程中调用每个循环（每个线程将处理它的数据然后死掉），或者如果您不需要并发执行，则只需在一个循环内顺序执行两个指令块。程序的状态图可以帮助您确定最佳解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:28:29.320

所以我一直在寻找的是一种简单的“粗略”方式，可以同时运行同一类的两个方法，用于实例化两个独立循环。无论如何这里是代码：

```
 class MyClass extends Thread {

public void run() {     // start new thread
    otherMethod();      // will calls another method
}
void otherMethod() {
     ....  executed in another Thread
}

public static void main(String[] args) {
   MyClass mc = new MyClass();
   mc.start();                 // start other Thread
   ... continue in main() with actual thread
   ...
}
} 
```

# jsf-2 - PrimeFaces 数据表滚动条位置

> ID：12365873
> 
> 赞同：0
> 
> 时间：2012-09-11T08:39:55.807
> 
> 标签：jsf-2, primefaces

如何设置primefaces数据表的滚动条位置从最后到第一个？

实际上，我想从下到上查看信息。下面是我的代码：

```
 <p:dataTable  var="c" value="#{MessagingUserBean.inboxDetails1}" scrollable="true" scrollHeight="517" liveScroll="true" emptyMessage="No Message Found"  scrollRows="8" scrollWidth="815" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:31:04.603

好吧，您可以尝试不使用 liveScroll，因为您不知道 dataList 的结尾。试试这个，也许这适合你的需要。这将延迟滚动到数据表的底部。

```
<h:form prependId="false">
          <p:dataTable id="dataTable" var="c" value="#{MessagingUserBean.inboxDetails1}" scrollHeight="517" liveScroll="true" emptyMessage="No Message Found" scrollWidth="815" >

    //Your dataTable stuff
        </p:dataTable>
    </h:form>
    <script>
        //Get the scrollheight
        var s = jQuery('#dataTable .ui-datatable-scrollable-body').prop('scrollHeight');

        //Get total size of datatable
        var o = jQuery('#dataTable .ui-datatable-scrollable-body').prop('offsetHeight');

        //calculate how many times it can scrolldown to set your timer
        var t = Math.ceil(s/o);
        //Excute scrolldown animation (max scrolldown is  scrollHeight - offsetHeight)
        $('#dataTable .ui-datatable-scrollable-body').animate({scrollTop:s-0}, t*1000);     
    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:36:28.710

您将需要一些 javascript 来执行此操作。

```
var $scrollable = $(dataTableSelector).children('.ui-datatable-scrollable-body')[0];
$scrollable.scrollTop =  $scrollable.scrollHeight; 
```

其中“dataTableSelector”是您的 primefaces 表的选择器（例如 styleClass）。

当然，这假设您要显示的列表中的最后一个元素实际上是您要显示的第一个元素。

# ios - 如何使用 Facebook ios sdk 3.0 将 5 张图片附加到 Facebook 提要帖子

> ID：12365875
> 
> 赞同：17
> 
> 时间：2012-09-11T08:40:05.137
> 
> 标签：ios, facebook, facebook-graph-api, ios5, facebook-feed

我正在尝试向用户的提要发布类似这样的内容（它最初只显示一张图片，但是当您单击“显示更多”时，您会看到所有五张图片）

![发布 5 张图片](../Images/b90e11a39b0e46533e8b523f147f37eb.png)

我的代码如下所示：

```
NSMutableArray *properties = [[NSMutableArray alloc] initWithCapacity:5];
NSMutableArray *media = [[NSMutableArray alloc] initWithCapacity:5];
for (MyObject *object in self.myObjects) {
    [properties addObject:[NSDictionary dictionaryWithObjectsAndKeys:object.name,@"text",
                                                                     object.link,@"href", nil]];
    NSString *imageUrlString = object.url.absoluteString;
    [media addObject:[NSDictionary dictionaryWithObjectsAndKeys:@"image",@"type",
                                                                imageUrlString,@"src",
                                                                object.link,@"href", nil]];
}
NSData *propertyData = [NSJSONSerialization dataWithJSONObject:properties
                                                       options:NSJSONWritingPrettyPrinted
                                                         error:nil];
NSString *propertiesString = [[NSString alloc] initWithData:propertyData
                                                   encoding:NSUTF8StringEncoding];
NSData *mediaData = [NSJSONSerialization dataWithJSONObject:media
                                                    options:NSJSONWritingPrettyPrinted
                                                      error:nil];
NSString *mediaString = [[NSString alloc] initWithData:mediaData
                                              encoding:NSUTF8StringEncoding];
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:myAppID, @"app_id",
                                                                  link, @"link",
                                                                  name, @"name",
                                                                  caption, @"caption",
                                                                  propertiesString, @"properties",
                                                                  mediaString, @"media",
                                                                  description, @"description", nil];
[FBRequestConnection startWithGraphPath:@"me/feed"
                             parameters:params
                             HTTPMethod:@"POST"
                      completionHandler:completionHandler]; 
```

这只会发布一张图片，但我需要发布所有 5 张图片。

编辑：我们已经通过 janrain 参与库在一篇帖子中发布了 5 张图片，所以这是可行的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T18:59:15.593

您将需要直接使用 Facebook Connect API：iOS SDK 不公开此类功能。

您应该查看[Graph Photo API](https://developers.facebook.com/docs/reference/api/photo/ "图形 API")的 Publishing 部分，该部分建议使用此 URL 上传图像（不要忘记要求提供 publish_stream 凭据）：

```
POST https://graph.facebook.com/USER_ID/photos

message=[optional description]
source=[the image's data]
place=[optional image's location] 
```

如果您有一个名为 facebook 的 Facebook 实例和一个名为 image 的 UIImage 实例，那么使用 iOS Facebook Connect SDK 会给我们这个调用：

```
[facebook requestWithMethodName:@"/USER_ID/photos"
                      andParams:[NSDictionary dictionaryWithObjectsAndKeys:
                                 UIImageJPEGRepresentation(image, 0.7), @"source",
                                 @"My puppy is so cute!!!", @"message",
                                 nil]
                  andHttpMethod:@"POST"
                    andDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:54:11.647

我认为批处理请求是您正在寻找的。

从这个[链接](https://developers.facebook.com/docs/reference/api/batch/)：

> 如果您的应用程序需要一次访问大量数据的能力——或者您需要一次更改多个对象，那么批处理查询通常比发出多个单独的 HTTP 请求更有效。
> 
> 为了实现这一点，Graph API 支持批处理。批处理允许您在单个 HTTP 请求中传递多个操作的指令。您还可以指定相关操作之间的依赖关系（在下面的部分中描述）。Facebook 将并行处理您的每个独立操作，并将按顺序处理您的相关操作。完成所有操作后，将向您传回一个合并的响应，并关闭 HTTP 连接。

...

> 上传二进制数据
> 
> 可以将二进制数据指定为批处理 API 请求的 multipart/mime 部分的一部分。批处理图 API 允许上传多个二进制项作为批处理调用的一部分。为此，您需要将所有二进制项作为多部分/mime 附件添加到您的请求中，并且需要每个操作使用操作中的“attached_files”属性来引用其二进制项。“attached_files”属性可以在其值中采用逗号分隔的附件名称列表。

这是使用 iOS sdk 创建批处理请求的教程的[链接。](https://developers.facebook.com/docs/howtos/batch-requests-ios-sdk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:38:47.013

好的新想法；您如何将所有五个循环发送，但您保持状态文本和其他所有内容相同。facebook不可能将它们组合成1个帖子吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T01:21:38.633

您可以在 Open Graph 操作中上传多个图像，如下所述：[https ://developers.facebook.com/docs/opengraph/usergeneratedphotos/](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/)

来自那里的示例代码：

```
https://graph.facebook.com/me/nyccookbook:cook?
  recipe=http://www.yourdomain.com/pizza.html&
  image[0][url]=http://www.yourdomain.com/images/my_camera_pizza_pic.jpg&
  image[0][user_generated]=true&
  image[1][url]=http://www.yourdomain.com/images/my_camera_soda_pic_2.jpg&
  image[1][user_generated]=true&
  access_token=YOUR_ACCESS_TOKEN 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T13:33:05.407

> Facebook 不久前在一篇帖子中删除了多张图片。当你能够做到这一点时，人们正在制作由多张并排的图片组成的“横幅”。现在，任何墙贴都只显示 1 张图片。
> 
> 您可以发布更多图片，但默认情况下他们不会确定。Facebook 将添加一个“更多”链接，尽管他们也可能已经取消了该链接。

来源：[如何发布带有 2 张图片的墙贴](https://stackoverflow.com/a/6449430/1045444)

因此，您将无法用多个图像喂罐。 **更好的方法是将 5 张图像组合在一张图像中。**

# jquery - 使用 Jquery 读取存在于不同路径中的 XML？

> ID：12365880
> 
> 赞同：0
> 
> 时间：2012-09-11T08:40:26.660
> 
> 标签：jquery, xml

我在位置“C:\Documents and Settings\Nabajyot\Desktop”中有一个名为**Vehicle.xml的 XML 文件。**

我想使用 jquery 读取 xml 文件。

怎么做？？？

我正在使用代码：

```
$(document).ready(function() {

    $.get("C:\Documents and Settings\Nabajyot\Desktop\Vehicle.xml", {}, function (xml) {
        $(xml).find('Vehicle').each(function (i) {
            alert($(this).find("Type").text());
        });
    });

}); 
```

但它不工作...

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:59:15.180

您可能需要转义硬编码的路径，例如[encodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:48:34.040

您可以运行本地 Web 服务器并将 xml 文件放在那里。然后通过`http://localhost/path-to-your-file.xml`

或者

您可以将其上传到某处并使用该 URL。

编辑：例如： http: [//filebin.ca/](http://filebin.ca/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:54:45.673

您不能从本地文件系统加载文件，像这样，您需要将其放在 web 服务器上，如 apache www 目录或 htdocs 文件夹并从那里加载。

# java - 如何配置 SmartGWT TreeGrid 以使用不同类型的对象？

> ID：12365887
> 
> 赞同：0
> 
> 时间：2012-09-11T08:40:52.127
> 
> 标签：java, gwt, smartgwt, treegrid

我有这个用例：

1.  我得到了我所有的客户。
2.  对于每个客户，我想获得他的收据。
3.  对于每张收据，我想获取所有 ShoppingItems。

从示例中我可以看到如果我有相同类型的对象层次结构，TreeGrid 是如何工作的，但我不知道这将如何与我的用例一起工作。当然，如果有更好的组件来显示这种数据/连接，那也很好:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:53:37.033

您可以在父模式下使用`Tree`（后面的模型）。`TreeGrid`当您`Tree`根据从服务器收到的数据构建您时，您可以向每个节点添加属性，说明该节点属于***客户***类型，此节点以 Customer1 作为父节点并且属于***收据***类型。另一个将以 Receipt1 作为父节点并具有***ShoppingItems***类型的节点。当您根据从服务器接收的数据构建树时，您可以在设置类型属性的同时设置节点的图标以反映元素的类型。由您决定是否将此类节点设置为文件夹（例如，客户、收据将是文件夹，但 ShoppingItems 不是，将只是一片叶子）。希望它可以帮助

# sql - 使用 print 而不在尾部输入

> ID：12365895
> 
> 赞同：1
> 
> 时间：2012-09-11T08:41:13.150
> 
> 标签：sql, sql-server, sql-server-2008-r2

当我尝试这样做时：

```
print 'asd'
print 'bsc' 
```

结果是：

```
asd
bsc 
```

（asd 和 bsc 在两个单独的行上）...

因为 SQL Server 在每个打印命令后添加了一个 '\n'。

我想要做的是一个接一个地打印这两个单词（'asdbsc'）。

我怎样才能做到这一点？我知道我可以做 'asd' + 'bsc' 并且得到相同的结果，但我想使用 2 个单独的打印。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:24:48.123

无法从 PRINT 语句中抑制换行符，但您可以创建一个过程来输出数据而不使用换行符 -[这](http://weblogs.asp.net/bdill/archive/2007/09/29/sql-server-print-max.aspx)是一个示例，它分块大输出并在没有额外换行符的情况下输出它们，这就是我的想法你要。

# android - 如何覆盖 Phonegap webview 的方法？

> ID：12365896
> 
> 赞同：1
> 
> 时间：2012-09-11T08:41:18.233
> 
> 标签：android, cordova, methods, webview, overriding

我有一个从 DroidGap 扩展的活动的 Android 应用程序。现在我想检测webview是否到了结尾，所以必须重写appView的`onScrollChanged`方法（DroidGap中webview的实例名叫做appView）。我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:05:51.950

您可以创建一个扩展 CordovaWebView 的视图，并且您可以覆盖 DroidGap 的某些部分以使用它而不是在初始化代码中烘焙。但是，一旦您开始弄乱视图，您可能想开始使用自己的 Android 活动而不是 DroidGap 进行调查。

# sql - SSIS / SQL Server - 处理各种货币类型符号

> ID：12365899
> 
> 赞同：2
> 
> 时间：2012-09-11T08:41:29.890
> 
> 标签：sql, sql-server, excel, ssis, type-conversion

在 SQL Server 货币列中，如何处理通过 SSIS（在 varchar 中 - 转换为货币）从国家特定的 Excel 文件传入的不同货币符号，处理逗号和点表示以确保值保持正确？

例如，如果这些是 Excel 中的三列值：

**22,333.44**

**22.333,44**

**22333,44**

上面的第一个符号将导致 22,3334，这当然是不正确的。

我需要对数据做什么？它是字符串替换还是更优雅的东西？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:52:28.810

**更新：** 在评论中讨论后，问题已得到澄清。excel 列中的值可以是多种不同的区域格式（英语使用逗号分隔千位，“.”表示小数点，德语使用“.”分隔千位，逗号表示小数点）。

假设目标格式是英语并且您没有随附的列来指示格式，那么您将不得不实施一系列解决方法。如果你能保证在“小数位”（德语格式的逗号）之后总是有 2 个数字，那么 REPLACE(REPLACE(@Value,',',''),'.','') 将摆脱每个逗号/点。然后，您必须获取生成的 varchar 的长度并在最后 2 个字符之前手动插入一个小数（或逗号）。这是一个示例实现：

```
declare @number varchar(12),@trimmednumber varchar(12),@inserteddecimal varchar(12)
set @number='22.333,44'
select @trimmednumber=REPLACE(REPLACE(@number,',',''),'.','')
select @inserteddecimal=(LEFT(@trimmednumber,len(@trimmednumber)-2) + '.' + RIGHT(@trimmednumber,2))
select @number AS [Original],@trimmednumber AS [Trimmed],@inserteddecimal AS [Result] 
```

结果：

```
Original     Trimmed      Result
------------ ------------ ------------
22.333,44    2233344      22333.44 
```

**原答案：**

我可能误解了您的问题，但是如果您将这些值作为 VARCHAR 并将它们插入到 MONEY 列中，那么隐式转换应该是正确的。

这是我拼凑起来测试的内容：

```
declare @money_varchar1 varchar(12),@money_varchar2 varchar(12),@money_varchar3 varchar(12)
set @money_varchar1='22,333.44'
set @money_varchar2='22.333,44'
set @money_varchar3='22333,22'
declare @table table (Value money)
insert into @table values (@money_varchar1)
insert into @table values (@money_varchar2)
insert into @table values (@money_varchar3)
select * from @table 
```

结果：

```
Value
---------------------
22333.44
22.3334
2233322.00 
```

# iphone - iOS退出（0）奇怪的行为

> ID：12365900
> 
> 赞同：-3
> 
> 时间：2012-09-11T08:41:38.533
> 
> 标签：iphone, objective-c, ios, exit

在我处理它的应用程序中，我需要从代码中关闭它。我正在`exit(0)`为此使用。

**是的，我知道我不应该从代码中关闭应用程序**

当我以这种方式关闭应用程序并再次运行它时，会出现一些奇怪的行为 - 应用程序没有启动，也没有从启动屏幕启动，比如应用程序的新实例，也不是从最后一个视图开始，比如应用程序从后台返回。

相反，我的应用程序的一些随机、非交互式视图出现了一秒钟，并且在此启动屏幕开始运行之后。

我很困惑，因为我找不到来源，以及如何修复这个丑陋的错误。你能帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T08:43:37.033

这正是`exit(0)`. 您会遇到奇怪的多任务处理行为和各种其他问题。

您根本无法在代码中终止您的应用程序。您应该向我们解释为什么您认为需要以编程方式退出，以便我们帮助您找到替代解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T08:47:53.180

来自[技术问答 QA1561](http://developer.apple.com/library/ios/#qa/qa1561/_index.html)
**没有提供用于优雅终止 iOS 应用程序的 API。**

> 不要调用**退出**函数。调用 exit 的应用程序将在用户看来已经崩溃，而不是执行正常终止并动画返回主屏幕。
> 此外，可能不会保存数据，因为 如果您调用 exit，将不会调用**-applicationWillTerminate:**和类似的**UIApplicationDelegate方法。**如果在开发或测试期间需要终止您的应用程序，建议使用**中止**函数或 **断言**宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:30:16.587

代替

```
exit(0) 
```

试试这个：

```
[[UIApplication sharedApplication] performSelector:@selector(terminateWithSuccess)]; 
```

# java - 如何在检票口中定位图像

> ID：12365906
> 
> 赞同：0
> 
> 时间：2012-09-11T08:42:07.883
> 
> 标签：java, wicket

我按照这个例子来本地化 img： [http ://www.wicket-library.com/wicket-examples/pub/?0](http://www.wicket-library.com/wicket-examples/pub/?0)

哪个有效。只有一个问题。我需要在包中有图像，其中有我不喜欢的 java 类。如何设置 webapp/img 的路径？

我尝试设置：

```
 add(new Image("work", new PackageResourceReference(StatisticPage.class, "/img/work.png"))); 
```

或者

```
 add(new Image("work", new PackageResourceReference(StatisticPage.class, "img/work.png"))); 
```

但没有成功

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:50:21.603

使用`ContextImage`而不是`Image`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T08:53:41.837

使用[ContextRelativeResource](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/request/resource/ContextRelativeResource.html)。

# mysql - 简单的 MySQL 子查询性能

> ID：12365907
> 
> 赞同：2
> 
> 时间：2012-09-11T08:42:14.873
> 
> 标签：mysql, performance, optimization

考虑 2 个 MySQL 查询：

```
SELECT ue.userid,e.courseid 
FROM (SELECT id,courseid FROM mdl_enrol WHERE status = 0 AND courseid IN (46)) e 
INNER JOIN (SELECT enrolid,userid FROM mdl_user_enrolments ) ue ON ue.enrolid = e.id 
INNER JOIN (SELECT userid FROM mdl_userdata) ud ON ue.userid = ud.userid 
```

--

```
SELECT ue.userid,e.courseid 
FROM mdl_enrol e 
INNER JOIN mdl_user_enrolments ue ON ue.enrolid = e.id 
INNER JOIN mdl_userdata ud ON ue.userid = ud.userid
WHERE e.status = 0 AND e.courseid IN (46) 
```

底部查询比顶部查询快得多，但为什么呢？我已经读过，为了提高性能，您应该只选择您需要的列。此外，对我来说，顶级查询应该表现得更好，因为在每个 JOIN 中，您都在减少要加入的数据量。显然，我对数据库如何工作的理解是错误的，但如果有人能澄清这一点，将不胜感激。EXPLAIN 还确认底部查询要快得多。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T08:46:07.270

在第一个查询中，mysql 应该从`mdl_enrol`表中选择一个子集并**完成** `mdl_user_enrolments`并`mdl_userdata`进入内存。所以你在内存中选择了很多数据。完成之后 - 你加入数据。如果在连接并发送回客户端之前没有足够的内存来放置所有数据 - 则会在硬盘驱动器上创建临时表。很可能 mysql 优化器不够酷，无法修复您的错误并尝试改进执行计划。这就是为什么它很慢。

而对于第二个查询，mysql 知道它究竟需要选择什么，并且只选择少量所需的数据。在这种情况下，可以使用索引（假设所有必要的索引都已创建）。所以速度很快。

# visual-studio-2010 - 如何在类库中捕获 System.Diagnostics.TraceSource 的输出并将其输出记录在 MS 单元测试中？

> ID：12365914
> 
> 赞同：1
> 
> 时间：2012-09-11T08:42:36.587
> 
> 标签：visual-studio-2010, unit-testing, mstest

我有一个名为“MyLib.Example”的 TraceSource，但是当我创建一个单元测试时，它的输出不会显示在测试结果中。

我尝试添加位于测试项目中的自定义 TraceListener，并添加了 app.config 以指向跟踪侦听器，我什至添加了 MyLib.dll.config 但仍然没有。

那么如何在使用 MS Unit 进行单元测试的类库中捕获我的 TraceSource 的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T02:19:10.113

在您的 app.config 中，您可以为 ConsoleListener 添加一个源。MSTest 将拾取写入控制台的任何内容并将其显示在您的测试输出中。

```
 <system.diagnostics>
    <sources>
      <source name="MyLib.Example" switchValue="Verbose" >
        <listeners>
          <add name="ConsoleListener" type="System.Diagnostics.ConsoleTraceListener" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics> 
```

# c# - 如何手动设置 MSBuild 签名目标的密码？

> ID：12365920
> 
> 赞同：5
> 
> 时间：2012-09-11T08:43:13.873
> 
> 标签：c#, msbuild, outlook-addin, pfx

我们正在用 C# 构建一个 Outlook 插件。它在 VS 中构建没有问题，并使用临时 pfx 证书进行签名。我们希望将构建过程放在 Jenkins 中并让它自动运行。

我们尝试使用 MSBuild 运行 VS 解决方案。它在开发机器上运行良好，但在 Jenkins 中出现错误：

> 无法导入以下密钥文件：OutlookPlugin_TemporaryKey.pfx。密钥文件可能受密码保护。要更正此问题，请尝试再次导入证书或手动将证书安装到具有以下密钥容器名称的强名称 CSP：VS_KEY_A688DC31A30F3EF1

我们不知道如何为自动构建指定 pfx 密码。或者以其他方式自动化签名过程。

我们找到的一种解决方案是在同一台机器上以与自动化流程相同的用户身份在 VS 中打开项目并输入密码。这不起作用，可能是因为 Jenkins 每次都会清除工作区。如果我们尝试在不签名的情况下进行编译，然后再对其进行签名，它会抱怨必须对 ClickOnce 程序集进行签名。似乎 Office 插件必须使用 ClickOnce。

那么，如何在构建文件的某处指定 pfx 密码呢？

我们将 VS 2010 与 Office 工具一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:56:24.320

创建一个包含密码作为属性的文件（本地或众所周知的网络共享），并从 MSBuild 脚本中引用该密码。设置文件的权限，以便只有构建帐户可以读取该文件。请注意，任何对构建机器具有管理员访问权限或知道构建帐户密码的人都可以读取该密码。最终，这里没有灵丹妙药。如果 MSBuild 可以找到/解密/无论密码，那么人类也可以。

如果您担心私钥的安全性，请考虑将签名分离到一个单独的步骤并将私钥存储在智能卡上。这可能有点矫枉过正，但它是最好的、常用的保护措施之一。

否则，只需将密码添加为属性。如您所知，项目文件只是 MSBuild 脚本。例如：

```
<PropertyGroup>
    <PfxPassword>password</PfxPassword>
</PropertyGroup>

<!-- Sample sign task -->
<SignTask>
    <File>MyOutlookPlugin.dll</File>
    <KeyFile>OutlookPlugin_TemporaryKey.pfx</KeyFile>
    <Password>$(PfxPassword)</Password>
</SignTask> 
```

有关 MSBuild 属性的详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms171458(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms171458(v=vs.80).aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-09T04:11:27.037

我们在使用 MSBuild 和 Bamboo 构建项目时遇到问题。我们的解决方法是从 .csproj 文件中删除以下行。

```
<AssemblyOriginatorKeyFile>applicationcert.pfx</AssemblyOriginatorKeyFile> 
```

# c# - 更改视图模型 AutoMapper 的映射规则

> ID：12365924
> 
> 赞同：0
> 
> 时间：2012-09-11T08:43:27.190
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, automapper, automapping

我有一个模型

```
public class Product : BaseEntity
    {
        private string _name;

        public string Name
        {
            get { return _name; }
            private set{_name = value;}
        }

        public decimal Price { get; set; }
        public double Weight { get; set; }
        public double Width { get; set; }
        public double Height { get; set; }
        public double Depth { get; set; }
        public DateTime DateAdded { get; set; }
        ...
        public string GeneralInfo {get{//some get logic}...}
} 
```

和一个视图模型：

```
public sealed class ProductDetailsModel
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public decimal Price { get; set; }
        public double Weight { get; set; }
        public double Width { get; set; }
        public double Height { get; set; }
        public double Depth { get; set; }
        ...
        public string GeneralInfo {get;set;}
} 
```

和控制器：

```
public class ProductController : Controller
{
  ...

public ActionResult Details(int id)
        {
            var product = _productRepository.GetProduct(id);
            var productViewModel = Mapper.Map<ProductDetailsModel>(product);
            return View(productViewModel);
        }
  ...
} 
```

一切都很好，但是......我有一些产品模型一般信息属性的获取逻辑，它从数据库中获取这个一般信息，有时，当产品没有一般信息时，这个属性返回 null。我需要的是从可用属性（例如 With、Height 等）生成替代的一般信息。例如：

```
private string GenerateGeneralInfoFromProductProperties()
        {
            var generalInfoStringBuilder = new StringBuilder();
            generalInfoStringBuilder.Append(@"<b>Width: </b>").Append(Width).Append("</br>");
            generalInfoStringBuilder.Append(@"<b>Weight: </b>").Append(Weight).Append("</br>");
            ...
            return generalInfoStringBuilder.ToString();
        } 
```

如果我将此逻辑添加到产品模型中...

```
public class Product : BaseEntity
{
    ...
    public string GeneralInfo
        {
            get
            {
                var gInfo = getGeneralInfoFromBD();
                if (gInfo==null) 
                     gInfo = GenerateGeneralInfoFromProductProperties();
                return gInfo;
            }
            set { SetPropertyValue(ProductPropertyType.GeneralInfo, value); }
        }
} 
```

一切正常，但这是错误和不合逻辑的，因为我有一个用于表示产品细节的视图模型，所以我想将此逻辑添加到视图模型，但我的视图模型实例是由映射器创建的，产品视图模型没有构造函数传递产品实例以获取它的一般信息，因为正如我所说，它在构造函数中不需要。如何将此“一般信息如果为空”替换逻辑添加到映射器或视图模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T03:29:59.367

试试 AfterMap

```
Automapper.CreateMap<Product,ProductDetailsModel>()
    .AfterMap((p,pm) => {  
       // now you have access to both objects, so you can do whatever you please
     }); 
```

# c++ - 从复合图案结构中移除元素

> ID：12365930
> 
> 赞同：5
> 
> 时间：2012-09-11T08:43:38.800
> 
> 标签：c++, algorithm, oop, design-patterns, inheritance

假设我们有最简单的结构、`Component`类`Leaf : Component`和`Composite : Component`。类的每个对象`Leaf`都有一个`int id`赋予它身份的对象。复合类将具有以下内容：

```
class Composite : public Component
{
public:
    void removeComponent(Component*);
// other stuff
private:
    std::vector<Component*> coll;
}; 
```

和叶子类的东西像：

```
class Leaf : public Component
{
public:
    //stuff
    int getID();
private:
    int id;
}; 
```

问题是如何定义函数`removeComponent(Component* cmp)`。cmp 实际上是 a `Leaf`，但我需要访问`Component`向量 coll，所以它必须是 a `Component`（我认为）。removeComponent 方法接受一个`Leaf`对象，并从整个结构中移除所有其他具有相同 ID 的叶子。

现在，我想到了两种方法（这两种方法都不起作用：P）：

***第一的***

```
void Composide::removeComponent(Component* cmp)
{
    std::vector<Component*>::const_iterator it;
    for(it = coll.begin(); it != coll.end(); ++it)
    {
        (*it)->removeComponent(cmp);
    // where removeComponent is defined as virtual in Component, but
    // the problem is that Leaf cannot erase itself from the collection
    }

} 
```

***第二***

```
void Composide::removeComponent(Component* cmp)
    {
        std::vector<Component*>::const_iterator it;
        for(it = coll.begin(); it != coll.end(); ++it)
        {
            if((*it)->equals(*cmp))
            it = erase(it);
        // But here I can't define equals function for Composite elements,
    // so then I'd have to make functions which return the type of Component,
    // and in case of Composite call recursively the function and
    // in the case of Leaf call the equals() function and erase if needed.
    // This however looks like really bad OOP practice, and I'd like to avoid
    // using those methods which return type..
        }

    } 
```

必须有一个整洁、漂亮的方法来做到这一点。我有点认为该方法应该看起来像上面提到的第一种方法，只是我真的不知道如何启用`Leaf`从向量中删除自身。请帮帮我？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:03:34.380

您似乎对到底`Component`是什么感到困惑。它是某个业务对象，还是代表树节点的类？如果它是一个树节点，那么所有的树节点都应该支持相同的操作，以便于递归。

因此，我会将 的定义`removeComponent()`移至基`Component`类并使其成为虚拟的。您可以在`Component`.

您的复合实现很简单：

```
void Composide::removeComponent(Component* cmp)
{
    std::vector<Component*>::const_iterator it;
    for(it = coll.begin(); it != coll.end(); ++it)
    {
        if((*it)->equals(*cmp))
           it = erase(it);
        else
           (*it)->removeComponent(cmp);
    }
} 
```

**编辑**：关于身份证

同样，我认为您可能混淆了两个概念，即组件 ID 和组件。（也许你改名会更好`Component`？`TreeItem`）

您当前`removeComponent()`的函数需要一个`Component`指针，从而推断`Component`可以从树中删除任何指针（包括`Composites`）。这对我来说似乎是正确的。您可能需要删除`Composites`. 因此，您可以简单地比较指针。

但是，您似乎正在比较仅`Leafs`具有的 Id（通过假定的等式重载）。

如果您想提供一个附加函数来按 Id 删除，那么我也会将 GetID() 函数移到基`Component`类中，并与之进行比较。`Composite`对象可以返回 -1 或其他一些空标记。

例如。

```
void Composite::getID()
{
   return -1;
}

void Composide::removeComponent(Component* cmp)
{
    std::vector<Component*>::const_iterator it;
    for(it = coll.begin(); it != coll.end(); ++it)
    {
        if((*it) == cmp)
           it = erase(it);
        else
           (*it)->removeComponent(cmp);
    }
}

void Composite::removeComponentById(int id)
{
    std::vector<Component*>::const_iterator it;
    for(it = coll.begin(); it != coll.end(); ++it)
    {
        if((*it)->getID() == id)
           it = erase(it);
        else
           (*it)->removeComponentById(id);
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T08:57:29.647

我会采用这种方法：

```
void Composide::removeComponent(Component* cmp)
{
    std::vector<Component*>::const_iterator it;
    for(it = coll.begin(); it != coll.end(); ++it)
    {
        if((*it)->equals(*cmp))
        {
            delete *it;
            coll.erase(it);
            return;//can there be more than one?
        }
        else
        {
            //iterative call
            it->removeComponent(*cmp);
        }
    }
}

void Composide::~Composite()
{
    std::vector<Component*>::const_iterator it;
    for(it = coll.begin(); it != coll.end(); ++it)
    {
        delete *it;
        it = coll.erase(it);
    }
} 
```

如果 Composite 被删除，Composite 的析构函数应该处理它自己的所有子组件。

一般来说，我会推荐使用智能指针。不再需要删除。

equals(..) 方法应该在组件中是纯虚拟的，并在每个子项中实现。

编辑：为迭代搜索添加了 if/else

# php - xamp 服务器到 wamp 服务器错误

> ID：12365935
> 
> 赞同：0
> 
> 时间：2012-09-11T08:43:50.650
> 
> 标签：php, xampp, wamp, wampserver

我将一个 php 项目从 XAMP 更改为 WAMP。当我尝试测试项目中的表格时，出现错误。

错误是这样的

> 已弃用：函数 ereg() 在第 135 行的 C:\wamp\www\widephp\includes\functions\general_functions.php 中已弃用

第 135 行是

```
if(!ereg("^[a-z0-9_.]+@[a-z0-9]+\.([a-z.]{2,15})",trim($v))) { 
```

该行包含的完整部分如下

```
foreach($fieldEmail as $v) {
    if(!ereg("^[a-z0-9_.]+@[a-z0-9]+\.([a-z.]{2,15})",trim($v))) {
        $alert = "Enter a valid Email address";
        return false;
    }
} 
```

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:47:56.707

如消息所示，该功能[`ereg()`](http://php.net/manual/en/function.ereg.php)已弃用。

您的平台更改很可能包括 php 版本的升级，或错误输出的更改，或者两者兼而有之。

从[手册](http://php.net/manual/en/function.ereg.php)：

> 自 PHP 5.3.0 起，该函数已被弃用。强烈建议不要依赖此功能。

我的建议：遵循手册的建议。改为使用[`preg_match()`](http://www.php.net/manual/en/function.preg-match.php)。请记住，您必须调整正则表达式的语法，[这](http://www.php.net/manual/en/reference.pcre.pattern.syntax.php)是 php 手册中的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:55:59.673

您可以降级您的 PHP 版本（不受欢迎）或遵循@Bjoern 的回答。要在 wamp 上降级 PHP 版本：

> WAMP > PHP> 版本 > 获取更多

下载 5.3 下的版本，安装它然后更改版本：

> WAMP > PHP > 版本 > 5.2.X

*我的编辑被@Bjoern 拒绝了，所以我写这个作为答案。*

# iis - 当实例因异常而重新启动时，如何将 HTTP 请求分派到 Azure Web 角色实例？

> ID：12365939
> 
> 赞同：0
> 
> 时间：2012-09-11T08:43:55.053
> 
> 标签：iis, azure, cloud

我正在查看我的 Azure Web 角色日志并查看以下内容。在过去的某个时刻，在其上`RoleEntryPoint.Run()`调用的线程引发了一个异常，该异常被传播到 的调用者，`Run()`并且 Azure 运行时尝试通过调用`RoleEntryPoint.OnStart()`. 现在我的`OnStart()`实现需要几分钟才能完成，我看到 HTTP 请求在进行中被分派到 IIS `OnStart()`。

这是预期的行为吗？Azure 基础架构不应该等到实例`OnStart()`成功完成吗？在成功完成之前，如何让 Azure 将角色从向其分派 HTTP 请求中排除`OnStart()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:21:33.967

只有在 OnStart 方法返回 true 时，您的实例的状态才会更改为 Ready（并接受来自 LB 的请求）。在此之前，它的状态将是忙碌（并且不接受来自 LB 的请求），如此[处](http://msdn.microsoft.com/en-us/library/windowsazure/hh127476.aspx)和[此处](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstart.aspx)记录。

有几种情况不适用：

*   您在服务定义中使用了[ignoreRoleInstanceStatus](http://blogs.msdn.com/b/avkashchauhan/archive/2012/02/23/what-is-ignoreroleinstancestatus-setting-in-windows-azure.aspx)属性。
*   您正在模拟器中运行（[请参阅此答案](https://stackoverflow.com/questions/6355988/why-does-iis-accept-requests-before-roleentrypoint-onstart-returns)）

或者可能是请求来自在您的实例上本地运行的进程？还是来自另一个实例？

# c# - 如何将 Adblock Plus 添加到 Web 浏览器控件？

> ID：12365940
> 
> 赞同：3
> 
> 时间：2012-09-11T08:43:57.040
> 
> 标签：c#, vb.net, webbrowser-control

如何将 Adblock Plus 添加到 Webbrowser 控件？

*- - 或者 - -*

如何在 vb.net 网络浏览器中阻止图像和 Flash 文件？

我不知道如何使用 IWebBrowser2 + webbrowser 来实现这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:19:03.247

您可以查看[Adblock IE](http://adblockie.codeplex.com/)及其源代码。

您会看到他们开发了一个 BHO（[浏览器帮助对象](http://en.wikipedia.org/wiki/Browser_Helper_Object)）并处理某些事件，例如“文档已完成”，您也可以在`WebBrowserControl`.

所以基本上，如果我必须开发这样的东西，我会以 Adblock IE 源代码为基础，并调整它以与 WebBrowserControl 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:06:49.623

Adblock plus 是 Firefox 和 Chrome（以及 KMeleon）的扩展（插件）。.NET Web 浏览器控件使用 Internet Explorer，所以我认为这不可能......

# sql - 将列标题转换为行数据 - sql

> ID：12365942
> 
> 赞同：3
> 
> 时间：2012-09-11T08:44:17.570
> 
> 标签：sql, sql-server

我的 SQL 查询打印结果如

```
North   South   West    East    Central
0       280     0       41      36 
```

但我想要它喜欢

```
North    0
South    280
West     0
East     41
Central  36 
```

SQL:-

```
Select  Count(Case When Region=1 Then 1 Else Null End)[North],
    Count(Case When Region=2 Then 1 Else Null End)[South],
    Count(Case When Region=3 Then 1 Else Null End)[West],
    Count(Case When Region=4 Then 1 Else Null End)[East],
    Count(Case When Region=5 Then 1 Else Null End)[Central] 
    From ATM Where ATMStatus=0 And Bank=1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:49:52.897

使用分组

```
SELECT 
   CASE Region 
    WHEN 1 THEN 'North'
    WHEN 2 THEN 'South' 
    WHEN 3 THEN 'West'
    WHEN 4 THEN 'East'
    WHEN 5 THEN 'Central' END AS Region  
    , COUNT(ID)   --or your primary key if it is different
FROM ATM
WHERE ATMStatus = 0 AND Bank = 1
GROUP BY Region 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:50:02.197

```
 select case Region
     when 1 then 'North'
     when 2 then 'South'
     etc

 end, count(*)
 From ATM Where ATMStatus=0 And Bank=1  
 group by Region 
```

有地区表吗？这将使它更简单，特别是如果 0 行很重要。

# wpf - 在画布中显示 DrawingBrush 并保持其比例

> ID：12365944
> 
> 赞同：0
> 
> 时间：2012-09-11T08:44:24.980
> 
> 标签：wpf, xaml, svg, drawingbrush

我使用 SharpVector 将 icon.svg 转换为 icon.xaml。该程序生成一个 DrawingBrush，如：

```
<DrawingBrush x:Key="Plus">
<DrawingBrush.Drawing>
    <DrawingGroup xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
      <DrawingGroup x:Name="DrawingLayer">
        <DrawingGroup.ClipGeometry>
          <RectangleGeometry Rect="0,0,88.582672,88.582672" />
        </DrawingGroup.ClipGeometry>
        <GeometryDrawing x:Name="path3767" Brush="#FF4D4D4D">
          <GeometryDrawing.Geometry>
            <PathGeometry FillRule="Nonzero" Figures="M36.512901,88.58266L36.512901,51.833165 8.88026306711254E-07,51.833165 8.88026306711254E-07,36.47519 36.512901,36.47519 36.512901,-1.76623310039759E-05 52.069777,-1.76623310039759E-05 52.069777,36.47519 88.582677,36.47519 88.582677,51.833165 52.069777,51.833165 52.069777,88.58266z" />
          </GeometryDrawing.Geometry>
        </GeometryDrawing>
      </DrawingGroup>
    </DrawingGroup>
</DrawingBrush.Drawing> 
```

对于我所有的图标。但是现在我想在 Canvas.Background 中显示我的 DrawingBrush，这样就可以了：

> `<Grid Background="{DynamicResource Plus}" Height="200" Width="200" Margin="5">`

但我想在矩形几何中保留图片比例，例如这里的 Rect="0,0,88.582672,88.582672"。

我怎么能这样做？

盖特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:36:03.157

尝试将 DrawingBrush 的 Stretch 属性设置为统一：

```
<DrawingBrush x:Key="Plus" Stretch="Uniform"> 
... 
```

# android - 清单权限部分停止了项目

> ID：12365947
> 
> 赞同：0
> 
> 时间：2012-09-11T08:44:38.063
> 
> 标签：android

我在开发新的 Android 应用程序时遇到了重大问题，因为当我测试它时，传统消息“项目已停止......”虽然当我在模拟器上测试应用程序时它运行良好，但我检查了我的代码并达到了问题的地方，它在这些代码行的清单上：

```
<uses-permission android:name="android.permission.GET_ACCOUNTS" /> 
    <uses-permission android:name="android.permission.WAKE_LOCK" />
     <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" /> 
    <uses-permission android:name="android.permission.WRITE_SETTINGS" />
     <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />--> 
```

但我没有解决这个问题。

# c# - 将现有 Winforms 设计导入和替换到新 Winforms 项目的标准实践

> ID：12365948
> 
> 赞同：0
> 
> 时间：2012-09-11T08:44:38.000
> 
> 标签：c#, visual-studio-2010

我有一个如下所示的 winform：

![在此处输入图像描述](../Images/c9689b4db1597e47d19a4188a4da4d69.png)

它在控件后面有一个关联的代码文件。它位于解决方案 X 中。X 中还有各种其他文件。

我创建了一个新的解决方案 Y，其中包含一个新的空白 winforms 项目。创建此文件时，会创建与空白表单相关的大量样板代码。从 X 我想将上面的设计（带有相应的代码）导入到这个项目中，以替换现有的空白表单。

由于所有样板代码，在不混淆现有项目的情况下是否容易做到这一点？

我已经尝试在解决方案 Expl 中右键单击该*项目*`Add`并使用>`Existing Item`但这只会混淆问题。也许这是一个毫无意义的练习，我应该右键单击*解决*方案 Expl 中的解决方案并使用`Add`> `Existing Project`，然后删除解决方案中的空白 winforms 项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:47:21.807

虽然您*可以*将相关文件复制到新项目中，但最好[不要重复自己](http://en.wikipedia.org/wiki/DRY)。所以要么“添加退出项目”，但从原始位置**链接文件......**

![在此处输入图像描述](../Images/2ad06f0e96d93711350a77ac4823c8d6.png)

...在解决方案资源管理器中出现以下结果（注意“快捷箭头”）...

![在此处输入图像描述](../Images/74e6db791c9fc4a5780ca2d42f4f9d0c.png)

...或者，更好的是，将相关的功能子集提取到自己的项目中，然后在新项目中引用整个项目。

* * *

OTOH，如果您想使用现有表单作为进一步定制的起点，请考虑...

*   将原始表单封装到自定义控件中，然后将该控件放在新表单上，
*   或窗体上的[可视窗体继承](http://msdn.microsoft.com/en-us/library/bx1155fz%28v=vs.100%29.aspx)（甚至在上面的控件上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:50:56.860

我想我会在资源管理器中复制整个解决方案 X，然后打开它并删除所有你不想要或不需要的东西。

# php - 使用 POST 方法在 2 个 phps 之间传递一个变量

> ID：12365950
> 
> 赞同：0
> 
> 时间：2012-09-11T08:44:50.093
> 
> 标签：php, mysql, html, post, html-table

我有一个将数据从 mysql 表填充到 html 表中的代码。我在每一行的末尾还有一个文本框和一个按钮。我想将行中的所有变量（包括文本框中的文本）发送到 update.php。无法以某种方式做到这一点。这是我正在尝试的代码。请帮忙。我可以通过 GET 方法发送它。但我想使用 POST。

```
<?php
require 'config.php';
mysql_connect ($dbhost, $dbusername, $dbuserpass);
mysql_select_db($dbname) or die('Cannot select database');
$query = "SELECT * FROM cust_info;";
$result = mysql_query($query) or die(mysql_error());

echo "</br>";
echo "<table border='1'>
<tr>
<th>Pop Code</th>
<th>Open_Date</th>
<th>Maturity_Date</th>
<th>Amount</th>
<th>Balance</th>
<th>Collection Amount</th>
</tr>";

while($row1 = mysql_fetch_array($result))
  {
  echo "<div class=\"addform\"><form method='post' action=\"update.php?upd=".$row1['pop_code']."\">\n";
  echo "<tr>";
  echo "<td>" . $row1['pop_code'] . "</td>";
  echo "<td>" . $row1['open_date'] . "</td>";
  echo "<td>" . $row1['mat_date'] . "</td>";
  echo "<td>" . $row1['depoamt'] . "</td>";
  echo "<td>" . $row1['balance'] . "</td>";
  echo "<td>" . "   <input type=\"text\" name=\"amount\"/>\n" . "</td>";
  echo "<td>" . "   <input type=\"image\" src=\"images/update.png\" alt=\"Update Row\" class=\"update\" title=\"Update Row\">\n" . "</td>";
  echo "</tr>";
  echo "</form></div>";
  }
echo "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T08:47:15.293

将您的表格代码更改为如下所示：

```
echo "<td><input type='hidden' name='pop_code' value='".$row1['pop_code']."'>" . $row1['pop_code'] . "</td>"; 
```

看起来您的代码实际上并没有发送任何内容，只是将其显示在页面上。这将显示它并在提交表单时发送一个隐藏字段。

编辑：另一种方法是在循环之外的页面上有一个表单，并让按钮运行一个 javascript 函数，将数据复制到表单并提交表单。您目前拥有它的方式可能更容易，但是这样的 javascript 将能够轻松地从用户/页面中获取其他信息，并通过单个表单将其发送到下一页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T08:48:31.753

您可以隐藏这些字段：

```
 echo "<td><input type='hidden' name='pop_code' value='" . $row1['pop_code'] . "' />" . $row1['pop_code'] . "</td>";
  echo "<td><input type='hidden' name='open_date' value='" . $row1['open_date'] . "' />" . $row1['open_date'] . "</td>"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T08:49:37.190

您的 HTML 已损坏，`<table>`仅允许`<thead>`,和作为直接子级，请先尝试修复此问题`<tbody>`，因为这将导致您的浏览器自动关闭标签`<tfoot>``<tr>`

# sql-server-2008 - SQL选择最长的字符

> ID：12365953
> 
> 赞同：0
> 
> 时间：2012-09-11T08:45:09.487
> 
> 标签：sql-server-2008, select, maxlength

我有表客户，列名称为 varchar(20)、adresse varchar(50)、tel varchar(10) 等。

如何选择最长的地址？

```
SELECT FROM customer 
WHERE adresse ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:48:46.257

```
select top (1) * from customer order by len(adresse) desc; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:49:09.750

您可以使用子查询来做到这一点：

```
select * from customer where len (adresse) = (
    select max (len (adresse)) from customer) 
```

内部查询计算出所有`adresse`列的最大长度，外部查询为您提供具有该长度的所有行。而且*可能*不止一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:47:36.020

试试这个：

```
select max(len(adresse)) from customer 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T08:59:09.650

```
SELECT address FROM customer WHERE length(address) = (SELECT max(length(address)) FROM customer) 
```

# android - android上传多个带有进度条的图像，进度为1 /5,2/5等等？

> ID：12365958
> 
> 赞同：3
> 
> 时间：2012-09-11T08:45:19.993
> 
> 标签：android, image, upload, android-progressbar

一次上传多个图像时，我想显示进度条，该进度条在状态栏通知区域中显示进度条，信息为 1/5 和 2/5 等。其中 1 是没有上传的图像，5 是要上传的图像总数。

在这里我可以在通知区域显示进度条。任何人都可以建议我，如何计算上传（完成）的图像数量以显示进度条（如 1/5）更新。提前致谢。

为了更清楚

我有一个将单个图像上传到服务器的异步任务。但我做不到

1> 计算总图像的大小（例如 5 个图像）

2>如何查找总共上传5张图片的图片数量

```
private class FileUploadTask extends AsyncTask<Object, Integer,String> {

    private ProgressDialog dialog;

    @Override
    protected void onPreExecute() {
        dialog = new ProgressDialog(context);
        dialog.setMessage("Uploading...");
        dialog.setIndeterminate(false);
        dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        dialog.setProgress(0);
        dialog.show();
    }

    @Override
    protected String doInBackground(Object... arg0) {
        try {
            File file = new File("/mnt/sdcard/DCIM/100MEDIA/IMAG0149.jpg");
            FileInputStream fileInputStream = new FileInputStream(file);
            byte[] bytes = new byte[(int) file.length()];
            fileInputStream.read(bytes);
            fileInputStream.close();

            URL url = new URL("http://android.com.bd/form.php");
            HttpURLConnection connection = 
                    (HttpURLConnection) url.openConnection();
            OutputStream outputStream = connection.getOutputStream();

            int bufferLength = 1024;
            for (int i = 0; i < bytes.length; i += bufferLength) {
                int progress = (int)((i / (float) bytes.length) * 100);
                Log.i("progress",progress+"dfdf");
                publishProgress(progress);
                if (bytes.length - i >= bufferLength) {
                    outputStream.write(bytes, i, bufferLength);
                } else {
                    outputStream.write(bytes, i, bytes.length - i);
                }
            }
            publishProgress(100);

            outputStream.close();
            outputStream.flush();

            InputStream inputStream = connection.getInputStream();
            // read the response
            inputStream.close();
            return "ok";

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
        dialog.setProgress(progress[0]);
    }

    @Override
    protected void onPostExecute(String result) {
        Log.v("sds", result);
        try {
            dialog.dismiss();
        } catch(Exception e) {
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T08:56:49.763

看看这个 TL;DR 博客文章/教程。你应该能够做类似的事情。您将需要使用`ProgressDialog`，使用 更新其状态`ASyncTask`。如果您已经在使用`ASyncTask`图片上传，那么您已经准备好这些部件了。

[http://toolongdidntread.com/android/android-multipart-post-with-progress-bar/](http://toolongdidntread.com/android/android-multipart-post-with-progress-bar/)

另请查看这个 SO 问题 -[使用 Android 下载文件，并在 ProgressDialog 中显示进度](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog/3028660)。你的问题之前已经回答过了。您只需要调整解决方案以通过自定义 1/5、2/5 等显示进度条`onProgressUpdate`。我还没有测试过这段代码，但我想像这些方面的东西会让你像你想要的那样逐步显示进度。

```
 @Override
    protected void onProgressUpdate(Integer... progress) {
        super.onProgressUpdate(progress);
        if (progress[0] < 20) {            
            mProgressDialog.setProgress(0);
        } else if (progress[0] < 40) {            
            mProgressDialog.setProgress(20);
        }
        else if (progress[0] < 60) {            
            mProgressDialog.setProgress(40);
        }
        else if (progress[0] < 80) {            
            mProgressDialog.setProgress(60);
        }
        else if (progress[0] < 100) {            
            mProgressDialog.setProgress(80);
        }
        else if (progress[0] == 100) {            
            mProgressDialog.setProgress(100);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T17:44:19.933

你的图像在哪里？你必须这样做

```
File fav = new File(Environment.getExternalStorageDirectory().getPath());
File[] filesav = fav.listFiles();
for (int i = 0; i < filesav.length; i++) {
        inside you send your pictures and count 

} 
```

变量 i 是您的图像编号，而 filesav.length 是您的总图像编号

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T08:50:43.417

好吧，这真的取决于您如何下载图像？

我的建议是创建某个`DownloadManager`类的实例（单例），它将计算和管理开始和完成下载的数量。此实例将用于创建新的下载，并在每次下载完成时收到通知。收到通知后，它可以更新进度条。

但这是一个非常笼统的答案。如果没有有关您当前如何进行下载的更多信息，就无法做得更好（它们是在单独的线程中完成的吗？它们是顺序的还是并行的？...）

# .net - 如何从第一次单击打开 Datagridview 单元格的组合框

> ID：12365959
> 
> 赞同：2
> 
> 时间：2012-09-11T08:45:25.133
> 
> 标签：.net, vb.net, winforms, datagridview

我有 DataGridView 组合框列。

我必须单击两次单元格才能打开组合。

任何人都知道如何让它从第一次点击中打开。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:04:51.707

```
Check below links it will help you 
```

[一键直接访问DataGridView组合框？](https://stackoverflow.com/questions/3445070/direct-access-to-datagridview-combobox-in-one-click)

[http://social.msdn.microsoft.com/Forums/en/winformsdatacontrols/thread/a5acbaf3-9d80-4d0c-8c7d-77eea7d4efd0](http://social.msdn.microsoft.com/Forums/en/winformsdatacontrols/thread/a5acbaf3-9d80-4d0c-8c7d-77eea7d4efd0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-13T04:13:03.377

这是一个更简单的方法：

在 CellEnter 事件中，检查列索引是否与组合框列对应。如果有，设置

```
DataGridView.EditMode = DataGridViewEditMode.EditOnEnter; 
```

或者如果它是常规列，请将其设置为默认值

```
DataGridView.EditMode = DataGridViewEditMode.EditOnKeystrokeOrF2; 
```

# php - 传入/传出电子邮件下载和处理，服务器端

> ID：12365967
> 
> 赞同：0
> 
> 时间：2012-09-11T08:45:48.643
> 
> 标签：php, linux, email, centos

基本上有人问我是否有任何方法可以捕获和下载通过邮件服务器的所有传入和传出电子邮件（最好是文本格式）。这种下载方法需要使用 PHP 或类似的服务器端语言来完成。

如果我能通过上述阶段，那么最终目标很容易达到，即允许我通过某种脚本处理电子邮件。

如果我可以安装任何类型的中介 RPM，它可以让我将电子邮件移植到某个目录，这也会有很大帮助。

我完全不知道从哪里开始，所以非常感谢任何类型的指针或建议。

谢谢斯科特

更多信息：
服务器：**CentOS**
邮件服务器：**Pop3**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:50:30.487

“下载”电子邮件与获取电子邮件相同。看看[PHP IMAP 扩展](http://php.net/manual/en/book.imap.php)。那里有很多例子可以帮助你前进。

# solr - 索引和查询唯一键 URL Solr

> ID：12365968
> 
> 赞同：1
> 
> 时间：2012-09-11T08:45:56.713
> 
> 标签：solr, lucene

我为使用 solr 查询的存档网站集编制了索引。作为唯一键，我使用网站的 URL。我想做的是在过滤查询中使用 url 字段，以便在需要时将搜索限制在某个域。例如，我想查询“Barack Obama”，但将结果限制为“whitehouse.gov”域。对我来说听起来像是一个非常基本的用例，但是在 URL 字段上的搜索根本不会返回任何结果。这是我的配置（schema.xml）：

```
 .
 .
 .
 <field name="collection" type="string" indexed="true" stored="true"/>
 <field name="content" type="text_de" indexed="true" stored="true" multiValued="true"/>
 <field name="date" type="string" indexed="true" stored="true"/>
 <field name="digest" type="string" indexed="true" stored="true"/>
 <field name="length" type="string" indexed="true" stored="true"/>
 <field name="segment" type="string" indexed="true" stored="true"/>
 <field name="site" type="string" indexed="true" stored="true"/>
 <field name="title" type="text_de" indexed="true" stored="true" multiValued="true"/>
 <field name="type" type="string" indexed="true" stored="true"/>
 <field name="url" type="text_en_splitting" indexed="true" stored="true"/>
 .
 .
 .

<!-- Field to use to determine and enforce document uniqueness. 
  Unless this field is marked with required="false", it will be a required field
-->
 <uniqueKey>url</uniqueKey> 
```

这是我的查询（简化）：

```
http://mysolrserver.com:8983/solr/select/?q=content:Barack+Obama&fq=url:whitehouse.gov 
```

查询分析器告诉我，我的查询应该匹配：

![截图 solr 分析](../Images/9fbc707b90e41be5acf6b48793817aab.png)

有谁知道为什么这不起作用？我非常感谢我能得到的任何提示！非常感谢各位！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:56:36.417

`fq=url:whitehouse.gov`过滤应该起作用。

但是我看到了查询的问题`q=content:Barack+Obama`。
你的默认搜索字段是什么？
是否删除查询组件并`q=*:*`为您使用返回结果。??

`q=content:Barack+Obama`查询实际上会产生类似的查询，`content:barack defaultsearchfield:obama`
因为默认搜索字段不会有 obama，因此不会产生任何结果。

# jquery - WSGI + jQuery 示例

> ID：12365970
> 
> 赞同：0
> 
> 时间：2012-09-11T08:46:12.470
> 
> 标签：jquery, wsgi

我是 WSGI 和 jQuery 的新手，因此，我正在寻找一个使用这两种设备组合的简单示例。我已经花了几个小时在这个主题中找到一些东西，但没有取得任何重大成功：这个问题是一个很好的起点：[如何在 Python 中实现 AJAX 的最小服务器？](https://stackoverflow.com/questions/336866/how-to-implement-a-minimal-server-for-ajax-in-python)，但是，目前我不知道如何修改它以便在其中使用 jQuery。

如果您能给我一些提示，我将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:57:22.750

jQuery 在客户端浏览器中运行，因此您不必修改链接到的代码。但我建议使用它而不是滚动你自己的 python 服务器：

[http://flask.pocoo.org/](http://flask.pocoo.org/)

使用其他人的代码的最小版本更容易使用。Plus 直接支持 AJAX 类型的命令，并有文档说明：

[http://flask.pocoo.org/docs/patterns/jquery/](http://flask.pocoo.org/docs/patterns/jquery/)

所以，简而言之，你最终会得到两个处理程序（可以访问的 URLS）

Mainhandler Ajaxhandler

“前端”将通过转到 Mainhandler 来提供服务。但是当用户点击一个按钮时，比如说，jQuery 会创建一个对“Ajaxhandler”的调用，获取一些新数据并使用这些新数据直接更新网页。并且该处理程序知道返回可用于更新页面的少量数据，而不是替换它。

就是这样。

所以你会有一些 javascript (jQuery) 然后实际上做了 ajaxy 位。

```
 /* Send the data using post and put the results in a div */
    $.post( url, { s: term },
            function( data ) {
                var content = $( data );
                $("#result").empty().append( content );
                $("#result").fadeIn();
                $("#s").attr('value', ''); /* reset search text box */ 
```

因此，当用户单击按钮时，会向服务器发出发布请求，检索结果并清空 div，然后使用新值进行更新，并且不会在网页全局更改的情况下进行更新。阿贾克斯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:41:36.747

经过扩展研究，我得出了以下示例。**WSGI**文件：

```
import threading
import webbrowser
from wsgiref.simple_server import make_server
from cgi import parse_qs

FILE = 'frontend.html'
PORT = 8080

def test_app(environ, start_response):

    path = environ.get('PATH_INFO', '').lstrip('/')      #get path

    if ("static" in path):                               #handle query for
        status = '200 OK'                                #files in /static
        headers = [('Content-type', 'text/javascript')]
        start_response(status, headers)
        f2serv=file(path,'r')                            #read file 
    return environ['wsgi.file_wrapper'](f2serv)          #return file

    if environ['REQUEST_METHOD'] == 'POST':              #If POST...
        try:
            request_body_size = int(environ['CONTENT_LENGTH'])
            request_body = environ['wsgi.input'].read(request_body_size)
        except (TypeError, ValueError):
            request_body = "0"

        parsed_body = parse_qs(request_body)    
        value = parsed_body.get('test_text', [''])[0] #Returns the first value

        try:
            response_body = str(int(value) ** 2)
        except:
            response_body = 'error'

        status = '200 OK'
        headers = [('Content-type', 'text/plain')]
        start_response(status, headers)
        return [response_body]

    else:                                             #If not POST, just pass
        response_body = open(FILE).read()             #the html file itself
        status = '200 OK'
        headers = [('Content-type', 'text/html'),
                   ('Content-Length', str(len(response_body)))]
        start_response(status, headers)
        return [response_body]

def open_browser():
    # Start a browser after waiting for half a second
    def _open_browser():
        webbrowser.open('http://localhost:%s/%s' % (PORT, FILE))
    thread = threading.Timer(0.5, _open_browser)
    thread.start()

def start_server():   
    httpd = make_server("", PORT, test_app)
    httpd.serve_forever()

if __name__ == "__main__":
    open_browser()
    start_server() 
```

**html 文件**（名为“frontend.html”）：

```
<html>
    <head>
        <title>AJAX test</title>
    </head>
    <body>
        <script src="static/jquery-1.8.1.js"
            type="text/javascript" charset="utf-8"></script>
        <script type="text/javascript">
            function submit(){
            $.post( "?", { test_text : $("#test_text").val() },
                function( data ) {
                $('#test_result').html(data);});
            };
        </script>
        square(
        <input type="text" name="test_text" id="test_text" value="0" size="4">
        ) =
        <span id="test_result">0</span>
        <input type="button" value="compute"
            title="compute" onclick="submit();"/>
    </body>
</html> 
```

**重要提示：**为了使上面的示例正常工作，必须将 jquery.js 的实际版本复制到 /static 下（在本例中为 static/jquery-1.8.1.js）。

# c# - 使用动态类型参数创建 KeyValuePair 实例

> ID：12365973
> 
> 赞同：1
> 
> 时间：2012-09-11T08:46:48.270
> 
> 标签：c#, .net, serialization, reflection

我正在寻找创建 KeyValuePair 实例并使用反射动态设置键和值的方法。

这是一部分

```
 foreach(var prop in this.GetType().GetProperties()) 
```

循环遍历属性并尝试根据某些条件恢复它们。KeyValue Pair 似乎很复杂。

我有这两种类型定义

```
var keyType = prop.PropertyType.GetGenericArguments()[0]; 
var valueType = prop.PropertyType.GetGenericArguments()[1]; 
```

在这里，我可以创建我的 KeyValuePair 的一个实例。

```
var keyValuePair = Activator.CreateInstance(prop.PropertyType); 
```

但是键和值是外部的只读属性，只能由构造函数设置。

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:04:37.820

使用 Key 和 Value 的值调用构造函数：

```
var keyValuePair = Activator.CreateInstance(prop.PropertyType, new [] {key, val}); 
```

# android - android ViewPager：知道页面何时不再是当前页面

> ID：12365974
> 
> 赞同：1
> 
> 时间：2012-09-11T08:46:52.830
> 
> 标签：android

嗨，伙计，我必须知道页面何时不再是当前页面。我认为我必须使用监听器，我看到存在：

```
@Override
            public void onPageSelected(int position) {

            @Override
            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
            }

            @Override
            public void onPageScrollStateChanged(int state) {
            } 
```

但是没有听众知道页面 X 何时不再活动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:57:28.447

我认为您可以使用`onPageScrolled`方法来了解活动页面已更改。

从文档中：

```
This method will be invoked when the current page is scrolled, either as part of a
 programmatically initiated smooth scroll or a user initiated touch scroll. 
```

因此`onPageScrolled`方法应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:59:54.933

不确定“不再活动”是什么意思，但 onPageSelected 提供了新索引，因此您可以执行以下操作：

```
private currentPage = 0;
public void onPageSelected(int position) {
    if(position != currentPage){ //page has changed to 
        currentPage = position;
    }
} 
```

# java - Tiles2 不适用于 struts2

> ID：12365975
> 
> 赞同：2
> 
> 时间：2012-09-11T08:47:02.030
> 
> 标签：java, apache, struts2, tiles2

我正在使用 struts2 并在我的应用程序中使用我们使用 Netbeans7.1 的图块。但是我们收到错误“模块尚未部署。有关详细信息，请参阅服务器日志。”

> “加载应用程序时出现异常：java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.NoClassDefFoundError: org/apache/commons/digester/Rule”

我们添加监听器`web.xml`

**web.xml 文件**

```
 <param-name>org.apache.tiles.impl.BasicTilesContainer.DEFINITIONS_CONFIG</param-name>

    <param-value>/WEB-INF/tiles.xml</param-value>

</context-param>

<listener>
    <listener-class>org.apache.tiles.web.startup.TilesListener</listener-class>
</listener> 
```

struts.xml 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:05:52.273

查看[Struts2 Tiles 插件](http://struts.apache.org/2.3.4.1/docs/tiles-plugin.html)文档。

你的 web.xml 应该看起来和你的有点不同。

```
<listener>
  <listener-class>org.apache.struts2.tiles.StrutsTilesListener</listener-class>
</listener> 
```

并且不要忘记将 apache common digester jar 添加到您的 lib 文件夹中。

# c# - C#中的二叉树迭代

> ID：12365976
> 
> 赞同：0
> 
> 时间：2012-09-11T08:47:08.117
> 
> 标签：c#, tree, binary-tree

我想使用 C# 生成一棵二叉树并在其中插入一个节点。

我尝试了很多方法，但它没有生成任何二叉树。我想编写一个函数，它将遍历从根到叶子的树，那么我该如何实现这一点。

二叉树是我在以下代码中的类。

找到我的以下代码。

```
 int[] values = new int[] { 1, 2, 3, 4, 5 };
        BinaryTree tree = new BinaryTree(values);

        var node1 = new Node();
        var node2 = new Node();
        var node3 = new Node();
        var node4 = new Node();
        var node5 = new Node();
        node1.Value = 1;
        node2.Value = 2;
        node3.Value = 3;
        node4.Value = 4;
        node5.Value = 5;
        node1.Left = node2;
        node1.Right = node3;
        node2.Left = node4;
        node2.Right = node5; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:05:30.083

您可以查看[泛型](http://code.google.com/p/ngenerics/)库。它包含具有递归树遍历的[二叉树的良好实现。](http://code.google.com/p/ngenerics/wiki/BinaryTree)

# svn - rsync pop_dir "/home/user_x" 失败：权限被拒绝，为什么？

> ID：12365980
> 
> 赞同：6
> 
> 时间：2012-09-11T08:47:24.167
> 
> 标签：svn, unix, permissions, rsync

我目前正在编写一个 bash shell 脚本来将我们的 svn 存储库的最新版本传输到网络服务器。这是使用 svn export 到服务器 A 并将其与网络服务器同步，创建一个特殊用户（称为 sync_user），在每一端（服务器 A 和网络服务器）具有足够的权限来执行这些更新。该脚本使用“su sync_user”来执行 svn export 和 rsync 作为 sync_user ：

```
export -f sync_section 
su sync_user -c "sync_section $source $tmp $dest" 
```

其中 sync_section 是脚本中的一个函数：

```
# critical section which performs the actual website update (export & sync)
# takes 3 parameters: source, tmp, dest
function sync_section {

  source=$1
  tmp=$2
  tmp_old=$tmp"_old"
  dest=$3

  #enter critical section
  set -e

    # export to temp folder on server A
    svn export -q --force $source $tmp  --native-eol LF

    # rsync with remote live website folder.
    rsync -avzhiO $tmp $dest

    # clean up
    rm -rf $tmp_old 
    mv -f $tmp $tmp_old 

  # exit critical section
  set +e
} 
```

这个想法是每个有权更新/同步网络服务器的人都知道sync_user的密码，因此可以进入“su sync_user”部分。

理论上听起来不错，但 rsync 对此设置不满意，并给我以下错误消息：（user_x 是调用脚本的用户）

```
#### rsync output:

building file list ... rsync: pop_dir "/home/user_x" failed: Permission denied (13)
rsync error: errors selecting input/output files, dirs (code 3) at flist.c(1314) [sender=2.6.8] 
```

经过一番谷歌搜索后，我发现我遇到的问题是由 rsync 引起的，因为它要求 sync_user 对脚本调用者的主目录具有完全访问权限。那是对的吗？如果是这样，为什么？是否有解决方法？

**注意：**脚本中根本不使用用户的主目录。仅使用服务器 A 上的 /tmp/ 和网络服务器上的 /var/www/vhosts/。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T12:31:22.787

好吧，经过一番折腾，我们设法解决了这个问题。这完全是用户权限问题，与 rsync 本身无关。

当运行“su sync_user ...”时，活动终端指向调用脚本的用户（user_x）的主目录。由于 sync_user 甚至不允许在该文件夹中，因此不允许运行某些命令（如 rsync 或 ls），这会导致错误消息。

为了解决这个问题，我在运行“sync_section”脚本之前添加了一个“cd ~”：

```
su sync_user -c "cd ~; sync_section $source $tmp $dest" 
```

现在脚本就像一个魅力:)

我希望这对将来的人有所帮助！

# c# - 如何转换图像 成一维矩阵 ?

> ID：12365983
> 
> 赞同：0
> 
> 时间：2012-09-11T08:47:35.227
> 
> 标签：c#, image, matrix, emgucv

我有一个`Image<Gray, Byte>`大小为 NxN 的 trainImage，我想将其更改为`Matrix<float>`大小为 的一维 trainMatrix `(N^2)x1`。

我想做的是打电话给`CvInvoke.cvCalvCovarmatrix()`. 对于我使用的第一个参数`Matrix<Single>[]`，我将其转换为`IntPtr[]`.

```
Matrix<Single> avg = new Matrix<float>(7, 1);
Matrix<Single> cov = new Matrix<float>(7, 7);
Matrix<Single>[] input = new Matrix<float>[3];
for (int i = 0; i < 3; i++)
    input[i] = new Matrix<float>(7, 1);

IntPtr[] inObjs = Array.ConvertAll<Matrix<Single>, IntPtr>(input, delegate(Matrix<Single> mat) { return mat.Ptr; });

CvInvoke.cvCalcCovarMatrix(inObjs, 3, cov, avg, COVAR_METHOD.CV_COVAR_NORMAL); 
```

但是现在我有`Image<Gray, Byte>[]`每个图像大小（假设）7x7 的输入。我想我需要先将每个图像转换为`Matrix<float>`49x1 大小，然后再将其更改为`IntPtr[]`. 怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T00:23:41.263

你走对了。我在这里放了一些代码，这些代码也可以作为其他代码的示例，因为那里没有 emgucv 协方差示例。

```
 Matrix<float> mat1 = new Matrix<float>(1, 3);
      mat1[0, 0] = 38;
      mat1[0, 1] = 55;
      mat1[0, 2] = 49;

      Matrix<float> mat2 = new Matrix<float>(1, 3);
      mat2[0, 0] = 43;
      mat2[0, 1] = 54;
      mat2[0, 2] = 4;

      Matrix<float> cov = new Matrix<float>(3, 3);

      Matrix<float> avg = new Matrix<float>(2, 1);

      Matrix<float>[] input = new Matrix<float>[2];
      input[0] = mat1;
      input[1] = mat2;          
      IntPtr[] inputPtrs = Array.ConvertAll<Matrix<Single>, IntPtr>(input, delegate(Matrix<Single> mat) { return mat.Ptr; });
      CvInvoke.cvCalcCovarMatrix(inputPtrs, 2, cov, avg, COVAR_METHOD.CV_COVAR_NORMAL); 
```

[我对照计算出的 wolfram](http://www.wolframalpha.com/input/?i=Covariance%5B%7B%7B38,%2055,%2049%7D,%7B43,%2054,%204%7D%7D%5D)值检查了 cov 矩阵值，它们似乎没问题。

尽我所能，卢卡

# c++ - 与对象一起返回时清除内存指针

> ID：12365985
> 
> 赞同：1
> 
> 时间：2012-09-11T08:47:48.373
> 
> 标签：c++

这已经摧毁了我一段时间。我敢肯定这是有原因的：

```
chain operator+(chain c)
{
    chain<Object> result;
    for (int i = 0; i < length(); i++)
    {
        result.insert(*(Object*)(memory+(i*sizeof(Object))));
    }
    for (int i = 0; i < c.length(); i++)
    {
        result.insert(c[i]);
    }
    for (int i = 0; i < result.length(); i++) // This for loop successfully shows all objects in result
    {
        cout << result[i];
    }
    return result;
} 
```

返回值时，即：

```
chain<int> a;
cin >> a; // enter "5 6 7 8"
chain<int> b;
cin >> b; // enter "9 10 11 12"
chain <int> c = a+b;

cout << c; // Returns "0 0 7 8 9 10 11 12" 
```

前两个数字总是 0。我不知道为什么。这只发生在将两条链加在一起时；如果我计算 a 或 b，我会得到所有的值。

如果有人有任何信息要分享，我将不胜感激:)

编辑**

完整来源

```
#ifndef CHAIN_H
#define CHAIN_H

#include <iostream>
#include <stdlib.h>

using namespace std;

template <class Object>
class chain
{
    public:
            chain(){
                    memorySize = 8;
                    memory = calloc(memorySize, sizeof(Object));
                    count = 0;
            }
            chain(Object item){
                    memorySize = 8;
                    memory = calloc(memorySize, sizeof(Object));
                    count = 0;
                    insert(item);
            }
            chain(chain & original){
                    memorySize = 8;
                    memory = calloc(memorySize, sizeof(Object));
                    count = 0;
                    for (int i = 0; i < original.length(); i++)
                    {
                            insert(original[i]);
                    }
            }
            ~chain(){
                    free(memory);
            }
                chain operator+(chain c){
                    chain<Object> result;
                    for (int i = 0; i < length(); i++)
                    {
                            result.insert(this->operator[](i));
                    }
                    for (int i = 0; i < c.length(); i++)
                    {
                            result.insert(c[i]);
                    }
                    for (int i = 0; i < result.length(); i++)
                    {
                            cout << result[i];
                    }
                    return result;
            }
            Object & operator[](int pos){
                    return *(Object*)(memory+(pos*sizeof(Object)));
            }
            int length(){
                    return count;
            }
            void insert(Object item){
                    if (count == memorySize)
                    {
                            doubleMemory();
                    }
                    this->operator[](count) = item;
                    count++;
            }
    private:
            int count;
            int memorySize;
            void * memory;
            void doubleMemory(){
                    memorySize *= 2;
                    memory = realloc(memory, (memorySize*sizeof(Object)));
            }

};
template <class Object>
ostream& operator<<(ostream& out, chain<Object>& c){
    for (int i = 0; i < c.length(); i++)
    {
            out << c[i] << " ";
    }
}
template <class Object>
istream& operator>>(istream& in, chain<Object>& c){
    char ch;
    int number = 0;
    int sign;
    while(ch != '\n')
    {
            ch = in.get();
            if (ch == '-')
            {
                    sign = 1;
            }
            else if (ch >= '0' && ch <= '9')
            {
                    number *= 10;
                    number += (ch-48);
            }
            else if (ch == ' ' || ch == '\n')
            {
                    number = sign == 1? 0 - number : number;
                    c.insert(number);
                    sign = 0;
                    number = 0;
            }
    }
}
#endif 
```

这是我正在测试的代码：

```
#include "chain.h"

using namespace std;

int main(){

    chain<int> a, b, c;
    chain<int> d(10);
    chain<int> e(d);
    cin >> a;
    cout << endl;
    cout << endl;
    c = a+d;
    cout << c;
} 
```

~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:03:34.590

您显示的代码不是问题。真正的问题可能出在复制构造函数或析构函数中`chain` ——也可能出在`insert`方法中（或者，在 C++11 中，在移动构造函数中）。

（它也可能在`Object`的复制构造函数中，但我认为这不太可能。）

* * *

编辑：哦，我的。不要用 C++ 编写这样的代码。左边、右边和中间都不安全。只要`Object`是 POD，您就应该没问题，但如果不是，则此代码会产生未定义的行为。特别是，它不会为您存储在链中的对象调用正确的构造函数和析构函数。

此外，您的复制构造函数应该采用类型参数，`chain const&`因为您没有修改传递的`chain`. 这反过来要求您通过提供适当的`const`重载来使您的类 const 正确`operator []`。

最后也是最明显的，你违反了三原则，因为你没有`operator =`为你的`chain`. 因此，试图将一个分配`chain`给另一个将导致双重释放。

通常避免`calloc`and`free`并使用标准容器，或者，如果这不是一个选项，请使用`new[]`plus 智能指针，如[boost::shared_array](http://www.boost.org/doc/libs/1_51_0/libs/smart_ptr/shared_array.htm)来管理内存（但*不要*使用`delete[]`）。

另一件事，永远不要`using namespace`在头文件中使用，它会污染命名空间并在最奇怪的地方导致名称冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:50:11.600

好吧，我看到以下关于复制构造函数的问题。在我看来，您希望它充当复制构造函数：

```
chain(chain & original){
    memorySize = 8;
    memory = calloc(memorySize, sizeof(Object));
    count = 0;
    for (int i = 0; i < original.length(); i++)
    {
        insert(original[i]);
    }
} 
```

但它不能，因为方法的声明是错误的。您在 copy 参数中缺少 const 修饰符。如果不包含它，编译器会假定您只声明了一个与可变引用一起使用的普通构造函数，而这不是您需要遵循 [三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)定义的复制构造函数。

只需更改此：

```
chain(chain & original){ 
```

对此：

```
chain(const chain & original){ 
```

这可能会解决错误的内存处理，并希望您会在程序中获得不同的输出。

# scala - Scala - DSL：重载前缀函数歧义

> ID：12365991
> 
> 赞同：1
> 
> 时间：2012-09-11T08:48:07.273
> 
> 标签：scala, dsl, overloading, currying

在我的 DSL 中，我想要这个功能：

```
class Test {

  val compA = dependant(true, true)(Component("parameters"))

  //and this shortcut:

  val compB = dependant Component("parameters")
} 
```

在哪里：

```
def dependant(onEnable: Boolean, onDisable: Boolean)(c: Component): Component = {
   //...
}

def dependant(c: Component): Component = dependant(false, true)(c) 
```

一切都很好，但是，我不能使用这种语法：

```
val compB = dependant Component("parameters") 
```

因为它说

> 对重载定义的模棱两可的引用，依赖于类 Test 类型（onEnable：Boolean，onDisable：Boolean）（c：Component）组件和依赖于类 Test 类型（c：Component）Component 的方法与预期类型匹配？

但是，如果我将参数括在括号中：

```
val compB = dependant(Component("parameters")) 
```

错误消失了。显然，编译器无法消除无括号的情况。这是预期的还是我做错了什么？如果这是预期的，那么为什么？我怎样才能恢复使用该方法`dependant`作为前缀而不带括号的能力？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:17:09.530

如果你提供一个对象，写作`myObject functionName param`而不是按预期工作。`myObject.functionName(param)`如果不这样做，编译器将丢失。例如：

```
scala> println("Hello")
Hello

scala> println "Hello"
<console>:1: error: ';' expected but string literal found.
       println "Hello"
           ^ 
```

一种可能的解决方法：创建一个对象来包装您的方法：

```
scala> case class Component(name: String, components: Option[Component] = None)
defined class Component

scala> object depends {def on(c: Component) = Component("dependant", Some(c))}
defined module depends

scala> depends on Component("foo")
res3: Component = Component(dependant,Some(Component(foo,None))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T09:47:51.970

在`dependant Component("parameters")`您尝试使用前缀表示法来调用`dependant`. Scala 对前缀表示法的支持是有限的。

请参阅[Scala - 前缀一元运算符](https://stackoverflow.com/questions/3651404/scala-prefix-unary-operators)。

另一种方法是使用后缀表示法（如`Component("parameters") dependant`）。如果您可以修改 Componenet 的实现，这仅意味着将`dependant`方法添加到`Component`：

```
class Component(name: String) {
  def dependant: Component = //...
  def dependant(onEnable: Boolean, onDisable: Boolean): Component = {
    //...
  }    
}

class Test {
  val compA = Component("parameters") dependant(true, true)
  val compB = Component("parameters") dependant
} 
```

如果不能修改`Component`，可以使用“pimp my library idiom”。请参阅[http://www.decodified.com/scala/2010/12/02/the-quickpimp-pattern.html](http://www.decodified.com/scala/2010/12/02/the-quickpimp-pattern.html)了解此成语的简短介绍（以及使用匿名类的警告，如下所示）：

```
case class Component(name: String)

implicit def toPostifxDependentOps( c: Component ) = new {
  def dependant: Component = dependant(false, true)
  def dependant(onEnable: Boolean, onDisable: Boolean): Component = {
    //...
  }
}

class Test {
  val compA = Component("parameters") dependant(true, true)
  val compB = Component("parameters") dependant
} 
```

# sql - SQL 插入多行

> ID：12365992
> 
> 赞同：52
> 
> 时间：2012-09-11T08:48:12.837
> 
> 标签：sql

我想在一个表中插入多行。如何使用单个插入语句来做到这一点？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-09-11T08:50:23.653

将要插入的每一行值包装在括号/括号中`(value1, value2, value3)` ，并用逗号分隔括号/括号，以便插入到表格中。

```
INSERT INTO example
VALUES
  (100, 'Name 1', 'Value 1', 'Other 1'),
  (101, 'Name 2', 'Value 2', 'Other 2'),
  (102, 'Name 3', 'Value 3', 'Other 3'),
  (103, 'Name 4', 'Value 4', 'Other 4'); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-10-18T07:14:41.897

您可以使用 SQL 批量插入语句

```
BULK INSERT TableName
FROM 'filePath'
WITH
(
  FIELDTERMINATOR = '','',
  ROWTERMINATOR = ''\n'',
  ROWS_PER_BATCH = 10000, 
  FIRSTROW = 2,
  TABLOCK
) 
```

更多参考检查

[https://www.google.co.in/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=sql%20bulk%20insert](https://www.google.co.in/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=sql%20bulk%20insert)

您也可以从代码中批量插入数据

请查看以下链接：

[http://www.codeproject.com/Articles/439843/Handling-BULK-Data-insert-from-CSV-to-SQL-Server](http://www.codeproject.com/Articles/439843/Handling-BULK-Data-insert-from-CSV-to-SQL-Server)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-05-15T12:13:26.997

```
1--> {Simple Insertion when table column sequence is known}
    Insert into Table1
    values(1,2,...)

2--> {Simple insertion mention column}  
    Insert into Table1(col2,col4)
    values(1,2)

3--> {bulk insertion when num of selected collumns of a table(#table2) are equal to Insertion table(Table1) }   
    Insert into Table1 {Column sequence}
    Select * -- column sequence should be same.
       from #table2

4--> {bulk insertion when you want to insert only into desired column of a table(table1)}
    Insert into Table1 (Column1,Column2 ....Desired Column from Table1)  
    Select Column1,Column2..desired column from #table2 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-11T08:51:57.913

您可以使用`UNION All`子句在表中执行多次插入。

前任：

```
INSERT INTO dbo.MyTable (ID, Name)
SELECT 123, 'Timmy'
UNION ALL
SELECT 124, 'Jonny'
UNION ALL
SELECT 125, 'Sally' 
```

[在这里检查](https://stackoverflow.com/questions/2624713/how-do-i-insert-multiple-rows-without-repeating-the-insert-into-dbo-blah-part)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-04-14T10:02:55.073

对于 MSSQL，有两种方法：（假设您有一个“用户”表，以下两个示例都使用此表）

1）如果您需要在用户表中插入不同的值。然后您可以编写如下语句：

```
 INSERT INTO USERS VALUES
(2, 'Michael', 'Blythe'),
(3, 'Linda', 'Mitchell'),
(4, 'Jillian', 'Carson'),
(5, 'Garrett', 'Vargas'); 
```

2）另一种情况，如果您需要为所有行插入相同的值（例如，您需要在此处插入10行）。然后你可以使用下面的示例语句：

```
 INSERT INTO USERS VALUES
(2, 'Michael', 'Blythe')
GO 10 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-11T08:51:10.387

您可以使用`UNION ALL`功能 [http://blog.sqlauthority.com/2007/06/08/sql-server-insert-multiple-records-using-one-insert-statement-use-of-union-all/](http://blog.sqlauthority.com/2007/06/08/sql-server-insert-multiple-records-using-one-insert-statement-use-of-union-all/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-03-07T13:54:49.893

我们将以最简单的形式将 CSV 文件导入目标表。我将示例 CSV 文件放在 C: 驱动器上，现在我们将创建一个表，我们将从 CSV 文件中导入数据。

```
DROP TABLE IF EXISTS Sales 

CREATE TABLE [dbo].[Sales](
    [Region] [varchar](50) ,
    [Country] [varchar](50) ,
    [ItemType] [varchar](50) NULL,
    [SalesChannel] [varchar](50) NULL,
    [OrderPriority] [varchar](50) NULL,
    [OrderDate]  datetime,
    [OrderID] bigint NULL,
    [ShipDate] datetime,
    [UnitsSold]  float,
    [UnitPrice] float,
    [UnitCost] float,
    [TotalRevenue] float,
    [TotalCost]  float,
    [TotalProfit] float
) 
```

以下 BULK INSERT 语句将 CSV 文件导入到 Sales 表。

```
BULK INSERT Sales
FROM 'C:\1500000 Sales Records.csv'
WITH (FIRSTROW = 2,
    FIELDTERMINATOR = ',',
    ROWTERMINATOR='\n' ); 
```

# c# - C# 转换继承的通用接口

> ID：12365993
> 
> 赞同：20
> 
> 时间：2012-09-11T08:48:20.963
> 
> 标签：c#, generics, interface, casting, covariance

我在构思一个我想出的界面时遇到了一些麻烦。这是 C# Windows 窗体的 MVP 设计。我有一个在我的表单类上实现的 IView 类。还有一个 IPresenter，我将其派生为各种特定的 Presenter。每个 Presenter 将根据角色以不同方式管理 IView，例如打开对话框以使用 AddPresenter 输入一组新数据，而不是使用 EditPresenter 编辑现有数据，后者会将数据预加载到表单上。这些中的每一个都从 IPresenter 继承。我想这样使用代码：

```
AddPresenter<ConcreteView> pres = new AddPresenter<ConcreteView>(); 
```

我基本上有这个工作，但这些演示者和他们管理的视图被捆绑到插件中，这些插件在运行后加载，这意味着我需要一个充当插件接口的 Manager 类，它带有一个“mode”参数。此模式参数用于工厂方法来创建 Add 或 Edit Presenter，但因为显示对话框的调用是稍后进行的，所以我需要通过 IPresenter 接口进行调用，如下所示：

```
private IPresenter<IView> pres;
public ShowTheForm()
{
    pres.ShowDialog();
} 
```

现在，当我将 AddPresenter 的具体实例化到“pres”成员时，我遇到了问题。这是我所拥有的简化版本：

```
interface IView
{
    void ViewBlah();
}

interface IPresenter<V> where V : IView
{
    void PresBlah();
}

class CView : IView
{
    public void ViewBlah()
    {        
    }
}

class CPresenter<T> : IPresenter<T> where T : IView
{
    public void PresBlah()
    {
    }
}

private void button3_Click(object sender, EventArgs e)
{
    CPresenter<CView> cpres = new CPresenter<CView>();
    IPresenter<IView> ipres = (IPresenter<IView>)cpres;
} 
```

这是错误：

```
Unable to cast object of type 'CPresenter`1[MvpApp1.MainForm+CView]' to type 'IPresenter`1[MvpApp1.MainForm+IView]'. 
```

我可以告诉我的 Presenter 和 Generic 类型规范都是接口的子类，所以我不明白为什么它不会强制转换。

有什么想法吗？

史蒂夫

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-11T08:53:29.533

问题是泛型类型参数。如果您使接口参数协变，那么强制转换将起作用。

这是通过添加`out`关键字来完成的，如下所示：

```
interface IPresenter<out V> where V : IView
{
    void PresBlah();

} 
```

您可以通过以下 MSDN 文章了解有关其工作原理的更多信息：[泛型中的协变和逆变](http://msdn.microsoft.com/en-us/library/dd799517.aspx)。[具有协变类型参数的通用接口](http://msdn.microsoft.com/en-us/library/dd799517.aspx#InterfaceCovariantTypeParameters)部分特别适用于您的问题。

*更新：确保你检查了@phoog 和我之间的评论。如果您的实际代码接受 a`V`作为输入，您将无法使其成为协变的。引用的文章和@phoog 的回答更详细地解释了这个案例。*

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-11T08:54:19.120

`CPresenter<CView>`不是一个`IPresenter<IView>`，就像`List<int[]>`不是一个`IList<IEnumerable>`。

想想看。如果您可以获得`IList<IEnumerable>`对 a 的引用`List<int>`，则可以向其中添加 a `string[]`，这将不得不引发异常。静态类型检查的重点是防止此类代码的编译。

如果接口允许，您可以将类型参数声明为协变 ( `IPresenter<out V> where V : ...`。然后接口将表现得更像`IEnumerable<out T>`。这只有在类型参数从未在输入位置使用时才有可能。

回到`List<int[]>`示例，将其视为*是*`IEnumerable<IEnumerable>`安全的，因为您不能向`IEnumerable<T>`引用添加任何内容；您只能从中读取内容，反过来，将 an`int[]`视为 是安全的`IEnumerable`，所以一切都很好。

# android - 创建和使用密钥库 https android

> ID：12365994
> 
> 赞同：1
> 
> 时间：2012-09-11T08:48:23.713
> 
> 标签：android, ssl, https, android-keystore

我需要实现到我的应用程序的 https 连接。首先，我上课了，它信任所有证书，但读到它效率低下。然后我决定使用 kystore 来保存来自 serer 的密钥。我尝试在命令 promtp 中以这种方式创建它：

```
keytool -genkey -alias myproject -keystore C:/myproject.keystore 
-storepass myproject -storetype BKS -provider     
org.bouncycastle.jce.provider.BouncyCastleProvider 
```

但是当我想这样使用时：

```
protected static org.apache.http.conn.ssl.SSLSocketFactory createAdditionalCertsSSLSocketFactory() {
        try {

            final KeyStore ks = KeyStore.getInstance("BKS");

            // the bks file we generated above
            final InputStream in = context.getResources().openRawResource( R.raw.myproject);  
            try {
                // don't forget to put the password used above in strings.xml/mystore_password
                ks.load(in, context.getString( R.string.mystore_password ).toCharArray());
            } finally {
                in.close();
            }

            return new AdditionalKeyStoreSSLSocketFactory(ks);

        } catch( Exception e ) {
            throw new RuntimeException(e);
        }
    } 
```

，我无法从 res/raw 目录访问我的密钥库，但我将它放在 res/raw 目录中。而且我的 R 文件也被删除了......我尝试使用 Portecle 接口实现它，但我遇到了同样的问题 - 无法从 res/raw 错误中访问密钥库，并且当我尝试构建/清理项目 R 文件时被删除。当我删除密钥库文件时，R 文件已恢复。请告诉我，我怎样才能以正确的方式创建密钥库并将其用于我的连接。