# StackOverflow 问答 12478000-12478999

# asp.net - 嵌入在 ASP .Net 中的 Crystal Reports：可靠性

> ID：12478004
> 
> 赞同：0
> 
> 时间：2012-09-18T13:27:25.750
> 
> 标签：asp.net, crystal-reports

几年前，我使用 Crystal Reports XI.5，当我使用嵌入在 ASP .Net 网页中的查看器生成长报告（> 25 页）时遇到问题。如果报告简短，则没有问题。

我的解决方案是使用 Crystal 9 和使用 ASP 3 的 Java 组件（！！！！！！）但是 Java 小程序有安全警告，是时候升级它了。

有人对 CR XI.5 有同样的问题吗？最新版本（CR 2011）是否可靠？

（注：我不能购买 CR Web 服务器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:13:12.820

通过 ASP.NET 提供 CR/XI 报告时，我一直采用的方法是将报告发布到我的 .NET 应用程序可访问的目标，然后从那里读取它们。省去了很多麻烦。

# winapi - QT如何获取硬盘分区信息

> ID：12478006
> 
> 赞同：0
> 
> 时间：2012-09-18T13:27:41.857
> 
> 标签：winapi, qt4, device, disk-partitioning

我正在尝试获取QT项目中的系统信息，我想知道Windows中的硬盘分区以及每个分区的不同属性。

这是我的代码：

```
QString drivename=QString(FileInfo.absolutePath().at(0))+":\\\\";
    ULARGE_INTEGER freeBytesToCaller;
    ULARGE_INTEGER TotalBytes;
    ULARGE_INTEGER FreeBytes;
    freeBytesToCaller.QuadPart = 0L;
    TotalBytes.QuadPart = 0L;
    FreeBytes.QuadPart = 0L;

    if( !GetDiskFreeSpaceEx( drivename.toStdWString().c_str(), &freeBytesToCaller,&TotalBytes,&FreeBytes ) )
    {
        qDebug() <<drivename<< "ERROR: Call to GetDiskFreeSpaceEx() failed.";

    }
   // qDebug()<<"drive type of "<<drivename<<"  "<<GetDriveTypeW(drivename.toStdWString().c_str());
     int TotalBytes_gb = TotalBytes.QuadPart/(1024*1024*1024) ; 
```

它让我知道分区名称（例如 C:\）大小和类型，但我还想要获取有关分区的信息（\Device\Harddisk0\Partition1 C:\ 232GB）

如何获取有关分区的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:14:22.810

我找到了一个我认为更有帮助的解决方案[Display Volume Paths](http://msdn.microsoft.com/en-us/library/cc542456.aspx)

谢谢大家。

# xpages - 我可以在 java bean 中调用我的函数，但不能使用 get 和 set

> ID：12478007
> 
> 赞同：1
> 
> 时间：2012-09-18T13:27:48.787
> 
> 标签：xpages

我使用 Per 中的这个示例创建了一个简单的 bean

[http://per.lausten.dk/blog/2012/02/creating-your-first-managed-bean-for-xpages.html](http://per.lausten.dk/blog/2012/02/creating-your-first-managed-bean-for-xpages.html)

我可以使用访问bean

**helloWorld.setSomeVariable("test")**和

使用**helloWorld.getSomeVariable()获取值**

但是当我使用 EL 语言尝试它时它不起作用 **helloWorld.SomeVariable**

我收到一个错误，即 SomeVariable 在 helloWorld 中不存在

我可能正在做一些简单的错误，但我看不出是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T13:34:54.757

我认为问题在于 EL 可能区分大小写，属性的 bean 样式名称是“someVariable”。Beans 假设您在方法名称中使用驼峰式大小写，因此 EL 将“set”和“get”之后的第一个字母小写以进行翻译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T13:38:29.467

在我看来，EL 似乎区分大小写，并且您的属性被定义为 someVariable 而不是 SomeVariable。你试过 helloWorld.someVariable。

# android - 在android中创建交互式图像

> ID：12478012
> 
> 赞同：0
> 
> 时间：2012-09-18T13:28:04.677
> 
> 标签：android, image-processing

我有想要在 android 中交互的图像，请帮助我如何在 android 中制作交互式图像，我是这个网站的新用户，可能是网站不允许我发布图像。

我的场景是，我在桌子周围有 10 把椅子，我希望用户与椅子交互（可点击）并转到其他屏幕。我是安卓新手。请解释我如何为我的应用程序创建交互式图像。

这是一张可以帮助您理解我的场景的图片：

[![在此处输入图像描述](../Images/0691b89de64304558ef714690e17f8c2.png)](https://i.stack.imgur.com/w3Sg2.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:46:13.777

只需使用以下方法将[OnTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.htm)设置为您的图像视图`onTouchEvent`：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
if (event.getAction() == MotionEvent.ACTION_DOWN) {
    x = event.getX() + this.getLeft();
    y = event.getY() + this.getTop();
   // check if (x,y) is on chair and do other staff
}
return super.onTouchEvent(event);
} 
```

(x,y) 是图片上被点击的一个点。保存椅子上的图片点范围。不仅仅是检查您点击了哪个并做适当的工作人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:45:54.833

将所有椅子图像保留为单独的 ImageButton 并在 Click 侦听器上用于图像视图。就像任何椅子 x

```
ImageButton xchair = (ImageView)findViewById(R.id.xchair);
xchair.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                **Call intent for calling another activity here.**
            }
        }); 
```

# design-patterns - Windows 服务的设计模式

> ID：12478013
> 
> 赞同：-1
> 
> 时间：2012-09-18T13:28:07.247
> 
> 标签：design-patterns, windows-services

我已经开发 Windows 服务超过 2 年了。我还没有为此尝试过任何设计模式。为了我更好的职业发展，我想遵循开发 Windows 服务的设计模式。任何人都可以为以下要求建议最合适的设计模式吗？

我必须编写一个 Windows 服务来监视数据库表（oracle），从表中检索数据，解析它，使用解析的数据创建一个文件，并将文件位置发送到 Web 服务。

我提前感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:50:38.917

您的要求仍然非常模糊，设计模式更多地是用更少的词来解释正在发生的事情的一种方式。

因此，例如，如果您从想要一个使用单例模式 ( [http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern) ) 的窗口服务开始使用数据访问对象模式 ( [http ://www.roseindia.net/tutorial/java/jdbc/dataaccessobjectdesignpattern.html](http://www.roseindia.net/tutorial/java/jdbc/dataaccessobjectdesignpattern.html)），那么你可能有一些信息。

如果您查看 Martin Fowler 的一些设计模式的网站：[http ://martinfowler.com/eaaCatalog/](http://martinfowler.com/eaaCatalog/)

查看*数据源架构模式*下，您将看到四种可能对您有所帮助的模式，具体取决于您希望如何与数据库交互。

# mongodb - 何时在 mongodb 中使用 $and 查询

> ID：12478014
> 
> 赞同：2
> 
> 时间：2012-09-18T13:28:07.707
> 
> 标签：mongodb

有人可以告诉我这两个查询之间的区别吗？

```
db.foo.find({ $and: [{a: 1}, {a: {$gt: 5}}]}) 
```

和

```
db.foo.find({a:1, a:{$gt:5}}) 
```

编辑好吧，让我稍微改变一下问题。假设以下

```
dev(mongod-2.2.0)>db.foo.insert({UserID: 1, Status:'unread' })
dev(mongod-2.2.0)>db.foo.insert({UserID: 1, Status:'unread' })
dev(mongod-2.2.0)>db.foo.insert({UserID: 1, Status:'unread' })
dev(mongod-2.2.0)>db.foo.insert({UserID: 1, Status:'unread' })
dev(mongod-2.2.0)>db.foo.insert({UserID: 1, Status:'unread' })
dev(mongod-2.2.0)>db.foo.insert({UserID: 1, Status:'unread' })
dev(mongod-2.2.0)>db.foo.insert({UserID: 1, Status:'unread' })
dev(mongod-2.2.0)>db.foo.insert({UserID: 1, Status:'unread' }) 
```

我想查找用户 id 1 的所有未读消息。我这样做吗

```
db.foo.find({UserID:1, Status:'unread'}) 
```

或这个

```
db.foo.find({$and: [{UserID:1},{Status:'unread']}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:56:38.883

查询时同时考虑`$and`这两个条件。查询中`$and`只考虑最后一个规范`a`。这似乎也发生在从 mongo shell 插入的情况下。

在您编辑的问题中，我肯定会使用`db.foo.find({UserID:1, Status:'unread'})`

下面的例子：

```
> db.sotest.insert({a : 1})
> db.sotest.insert({a : 2})
> db.sotest.insert({a : 6})
> db.sotest.insert({a : 7})
> db.sotest.insert({a : [1, 7]})
> db.sotest.find()
{ "_id" : ObjectId("50587c0164433af6a99c988f"), "a" : 1 }
{ "_id" : ObjectId("50587c0564433af6a99c9890"), "a" : 2 }
{ "_id" : ObjectId("50587c0d64433af6a99c9891"), "a" : 6 }
{ "_id" : ObjectId("50587c1064433af6a99c9892"), "a" : 7 }
{ "_id" : ObjectId("50587c1f64433af6a99c9893"), "a" : [ 1, 7 ] }
> db.sotest.find({a:1, a:{$gt:5}})
{ "_id" : ObjectId("50587c0d64433af6a99c9891"), "a" : 6 }
{ "_id" : ObjectId("50587c1064433af6a99c9892"), "a" : 7 }
{ "_id" : ObjectId("50587c1f64433af6a99c9893"), "a" : [ 1, 7 ] }
> db.sotest.find({a:{$gt:5}, a:1})
{ "_id" : ObjectId("50587c0164433af6a99c988f"), "a" : 1 }
{ "_id" : ObjectId("50587c1f64433af6a99c9893"), "a" : [ 1, 7 ] }
> db.sotest.find({$and : [{a:{$gt:5}}, {a:1}]})
{ "_id" : ObjectId("50587c1f64433af6a99c9893"), "a" : [ 1, 7 ] }
> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:53:42.200

第二个无效，因为您不能拥有具有两个具有相同名称的属性的对象`a`。第一个是有效的，所以这就是区别。

**编辑**

在您更新的问题中，您肯定想使用：

```
db.foo.find({UserID:1, Status:'read'}); 
```

因为它是更自然的语法。

# opengl - 如何在 SFML 中获取 Opengl 版本？

> ID：12478015
> 
> 赞同：1
> 
> 时间：2012-09-18T13:28:07.553
> 
> 标签：opengl, sfml

如何让 SFML 报告正在使用的 OpenGL 版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T13:28:07.553

使用 sf::RenderWindow 创建 OpenGL 上下文并使用 window.getSettings() 获取上下文设置。

```
sf::RenderWindow window(sf::VideoMode(800, 600, 32), "SFML OpenGL");
sf::ContextSettings settings = window.getSettings();
std::cout << "OpenGL version:"<< settings.majorVersion << "." << settings.minorVersion << std::endl; 
```

# joomla2.5 - PHP - Virtuemart 2.X 和 Joomla 2.5x - 新的 Virtuemart 表结构

> ID：12478022
> 
> 赞同：0
> 
> 时间：2012-09-18T13:28:26.043
> 
> 标签：joomla2.5, virtuemart

我已经为 Virtuemart 1.1.9 编写了一个扩展，它从deremmart 数据库中检索产品。这主要使用“#__vm_product”表。

现在我已经开始编写 Virtuemart 2.x 兼容版本了，我有一些问题。

我注意到包含产品名称的产品表位于“#__virtuemart_producs_en_gb”中

我假设 druthmart 在安装过程中检测到了我的语言，并自动创建了这些带有“en_gb”后缀的表。

我的问题是：

检测这些产品表上的后缀可能是什么的最佳方法是什么，因为我假设后缀理论上可以是任何东西，例如“en_us”或“fr”？

是否有我可以搜索的包含此语言设置的配置值？

有关解决此问题的最佳方法的任何想法？

问候

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:15:06.100

实际上，这可能是一种方法......

```
$query="SELECT lang_code FROM #__languages";
$db->setQuery($query);
$lang_code = $db->loadResult();
$lang_code = strtolower(strtr($lang_code,'-','_'));

//this will fetch "EN-GB" from the database, and change it to "en_gb" 
```

对其可靠性有任何想法吗？

# cakephp - cakephp 表单验证成功类/消息

> ID：12478027
> 
> 赞同：1
> 
> 时间：2012-09-18T13:28:31.447
> 
> 标签：cakephp, cakephp-2.2

我正在使用 cakePHP 及其默认模型验证。在错误蛋糕上，将“错误”类添加到我的容器 div 中。伟大的！但是，如果除了一个表单元素之外的所有内容都正确输入了怎么办？我想要正确的输入来接收类“成功”（也许是一条消息或图标告诉我的用户他们有多棒）。

这是我的表单创建代码：

```
echo $this->Form->create('User',
        array(
            'class' => 'form-horizontal',
            'inputDefaults' =>
            array(
                'format' => array('before', 'label', 'between', 'input', 'error', 'after'),
                'div' => array('class' => 'control-group'),
                'label' => array('class' => 'control-label'),
                'between' => 'div class="controls">',
                'after' => '/div>',
                'error' => array('attributes' => array('wrap' => 'span', 'class' => 'help-inline')),
                )
            )
        );
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:26:12.393

我最终做的是复制`/lib/Cake/View/HelperFormHelper.php`到`/app/View/Helper/FormHelper.php`. 然后，我在第 1028 行附近修改了 /app/View/Helper/FormHelper.php （在我的副本中，它是“输入”函数的结尾），使其看起来像这样：

```
`1028:
    if ($this->_introspectModel($modelKey, 'validates', $fieldKey)) {
         $divOptions = $this->addClass($divOptions, 'required');
    }
    if($this->request->is('post')) {
        if(!$this->isFieldError($modelKey.'.'.$fieldKey)) {
        // This is the important line.
        $divOptions = $this->addClass($divOptions, 'success');
        }
    }
    if (!isset($divOptions['tag'])) {
        $divOptions['tag'] = 'div';
    }
}//end input function` 
```

* * *

 `## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:35:31.123

不知道这是否是最干净的方法，但它会起作用。

我将以下行添加到我的视图中，检查请求是否为 POST。所有具有“控制组”类的字段都将采用新样式。

```
if($this->request->is('post')){
    echo '<style type="text/css">div.control-group { background-color:#000; }</style>';
} 
```

由于您不想在使用类 'error' 的字段中显示新样式，只需将 !important 放在 CSS 文件中的样式规则之后即可撤销更改。

示例'style.css'：

```
error {
    background-color: none !important;
} 
````

# php - 跨站点参数达到最大 URL 限制的解决方法

> ID：12478029
> 
> 赞同：2
> 
> 时间：2012-09-18T13:28:37.463
> 
> 标签：php, javascript, html, apache, cross-domain

我们正在开发一个书签，我们使用 JSONP 与服务器通信。我们已经到了一个阶段，我们必须从浏览器向服务器发送超过众所周知的 2000ish URL 长度的参数。

我们正在寻找解决这个问题的解决方案。请注意，书签将在 3rd 方 URL 上执行，其中一些是 HTTP，一些是 HTTPS，JSONP 仅限于 GET 请求

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:34:34.867

我唯一能想到的就是做多个请求——在请求中抛出一个 id 并以持久的方式设置状态服务器端，然后请求数据。

多个请求也很丑陋 - 如果一条消息丢失而另一条消息丢失，等等。

不幸的是，JSONP 并没有很大的灵活性，因为它只是模拟脚本加载——而目前的浏览器安全标准确实没有办法解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:35:35.320

由于已知的限制，我只看到三种方法：

*   发送更少的数据。可能你可以压缩它？
*   使用多个请求。这对于 blob 来说可能很复杂，但应该是可能的。
*   扩展 URL 长度限制 - 您的服务器中有相应的配置

# java - 从代码设置的 Java 安全策略

> ID：12478030
> 
> 赞同：3
> 
> 时间：2012-09-18T13:28:39.513
> 
> 标签：java, security-policy

使用这段代码尝试设置策略文件：

```
ClassLoader cl= getClass().getClassLoader();
URL policyURL =cl.getResource("res/policy/new_policy.policy");
System.setProperty("java.security.policy", policyURL.toString()); 
```

我`java.lang.NullPointerException`在最后一行得到一个。该文件位于我的项目目录中的正确路径中。

*问题：什么可能导致此异常？*

答：*从 eclipse 运行，路径是相对于主项目文件夹构建的，而不是项目的 bin 文件夹。考虑到这一点，移动 bin 文件夹中的 res 文件夹解决了该问题，而无需更改上述任何代码。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:37:13.213

如果发生这种情况：

```
policyURL.toString() 
```

为 null，因为属性值存储在 Hashtable 中，并且 Hashtable 类在其 put 方法中检查该值是否为 null，如果是则抛出 NullPointerException。我会确保您的 policyUrl 对象构造正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:31:03.803

如果路径在您的项目中，请添加`/`

```
cl.getResource("/res/policy/new_policy.policy") 
```

但我建议您打印 的值`policyURL`以检查您是否可以检索文件。

如果您在 Eclipse 中执行，请记住资源必须位于资源文件夹中，以便它们在构建时转到 classes 文件夹。

Eclipse 只执行类，这些类位于输出文件夹 ( `bin`) 中。

# .net - 如何将 Vb.net 中的 DateTime 舍入到最接近的 5 分钟

> ID：12478031
> 
> 赞同：4
> 
> 时间：2012-09-18T13:28:41.547
> 
> 标签：.net, vb.net, visual-studio, datetime, visual-studio-2005

我正在编写一些数据分析软件，我想升级我的原始数据的时基。我的原始数据的时间步长约为 2 分钟。我想将数据扩展到几个数据库表，时间步长为 5 分钟、每小时、每天和每月。我计划从原始数据中运行每一个，以保持我的准确性。

我目前遇到的问题是取一个初始值并找到我想要的最接近的“圆形”时间点，作为我的起点。例如，我将从 13/03/12 00:01:36 作为起点开始，我希望代码找到 13/03/12 00:00:00 作为最近的时间点，因此它将开始计算从那里。对于每个时间点，我想在每一侧采取一半的时间步长。所以 12/03/12 23:57:30 到 13/03/12 00:02:29 将变为 13/03/12 00:00:00。

使用 SQL 查询从 Access 获取数据，日期和值存储在两个并排的数组中。以下是我到目前为止的代码。它会将值向上舍入到 NEXT 5 分钟，而不是向上或向下舍入到 NEAREST 5 mimutes。

```
Private Sub RateStateScale(ByVal Parameter As Integer, ByVal Timebase As String)

    Dim NewDate(0)
    Dim NewData(0)
    Dim RecordCounter
    Dim MinValue As Date = ScaleDate(0)
    Dim startpoint As String

    For RecordCounter = 0 To ScaleDate.GetLength(0)
        If MinValue > ScaleDate(RecordCounter) Then
            MinValue = ScaleDate(RecordCounter)
        End If
    Next

    Do Until MinValue.Minute Mod 5 = 0
        MinValue = MinValue.AddMinutes(1)
    Loop

End Sub 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T14:11:14.333

让我们尝试一些 VB，以获得“四舍五入到最接近 5 分钟”的功能：

```
' just some date, should be a parameter to your function
Dim mydatetime = new DateTime(2012,3,12,23,57,30)

' split into date + time parts
Dim datepart = mydatetime.Date
Dim timepart = mydatetime.TimeOfDay

' round time to the nearest 5 minutes
timepart = TimeSpan.FromMinutes(Math.Floor((timepart.TotalMinutes+2.5)/5.0) * 5.0)

' combine the parts
Dim newtime = datepart.Add(timepart)
' a function would return this value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:49:42.000

一种可能性如下：

```
var date = new DateTime(2012,03,12,23,57,30);
var fullFiveMinutes = date.Minute / 5;
// result will be our date rounded down to the previous full five minutes
var result = new DateTime(date.Year, date.Month, date.Day
                          date.Hour, fullFiveMinutes * 5, 0);

// if we add exactly 2.5 minutes to our date variable and the result represents
// another full five minutes we need to round up.
if(date.AddSeconds(2.5 * 60).Minute / 5 != fullFiveMinutes)
    result = result.AddMinutes(5); 
```

这是 C# 代码，我相信你可以翻译它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T14:11:27.797

你能做到吗？（非常基本，但它应该给出一个想法）

```
Dim tValue As Date = ScaleDate(0) 

'find the next highest 5 minute mark
For RecordCounter = 0 To ScaleDate.GetLength(0)              
    If tValue > ScaleDate(RecordCounter) Then                  
        tValue = ScaleDate(RecordCounter)              
    End If          
Next  

Do Until tValue.Minute Mod 5 = 0         
        tValue = tValue.AddMinutes(1)     
Loop

'compare the original value to the next highest.  If more than 2.5 minutes, then subtract 5 minutes
If DateDiff(DateInterval.Second, tValue, MinValue) > 150 Then
    MinValue = tValue.AddMinutes(-5)
Else
    MinValue = tValue
End If 
```

# javascript - 使用 JavaScript 和 PhoneGap 循环 HTML 表格

> ID：12478033
> 
> 赞同：0
> 
> 时间：2012-09-18T13:28:48.887
> 
> 标签：javascript, android, html, cordova

我正在为 android 开发一个带有 phonegap 的应用程序，并且我正在尝试`FOR`使用 html 表行在 javascript 中创建一个循环。我尝试使用`document.write`但页面中的所有内容都消失了，只显示它在`document.write`. 我的代码是这个：

```
<table id="hor-minimalist-b">
<script language=javascript>
for (var i=0; i<3; i++) {
    document.write('<tr>');
        document.write('<td>');
        document.write('<input type="text" name="valor" id="valor" value="key' + i'">');
        document.write('</td>');
        document.write('</tr>');
}
</script>
</table> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:51:26.707

这是因为您只是将文本放在页面中，您需要“创建”元素并将它们附加到表格中。你可以这样做：

```
<table id="hor-minimalist-b"><thead></thead><tbody></tbody></table>
<script language="javascript">
var table = document.getElementById('hor-minimalist-b'); // get the table element
var tableBody = table.childNodes[1]; // get the table body
var tableHead = table.childNodes[0]; // get the table head
for (var i=0; i<3; i++) {
    var row = document.createElement('tr'); // create a new row
    var cell = document.createElement('td'); // create a new cell
    var input = document.createElement('input'); // create a new input
    // Set input properties
    input.type = "text";
    input.id = "valor"; // It's not a good idea (to have elements with the same id..)
    input.name = "valor";
    input.value = "key" + i;
    cell.appendChild(input); // append input to the new cell
    row.appendChild(cell); // append the new cell to the new row
    tableBody.appendChild(row); // append the row to table body
}
</script> 
```

insertRow() 和 insertCell() 可能也可以工作，但我还没有测试它

# ios - 在解析 PFUser 对象中使用 Game Center 玩家标识符？

> ID：12478038
> 
> 赞同：4
> 
> 时间：2012-09-18T13:29:01.713
> 
> 标签：ios, game-center, gamekit

我想使用 Apples Game Center 让玩家登录我的游戏，但我也想存储来自玩家的其他游戏相关数据。我想使用 Parse.com 服务，所以我想在游戏加载时让玩家注册/登录到 Game Center，然后如果还没有完成，将玩家“玩家标识符”存储在 PFUser 对象中解析时。这样我就可以在解析时为玩家存储数据。

所以我的问题（最后）是，这是一个好方法吗？我是 iOS 新手，所以我想知道这种做事方式是否存在我遗漏的明显问题？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-02T10:04:22.663

这不是一个坏方法。这样你就可以为每个解析用户使用一个唯一的 ID，然后在 Parse 中存储额外的数据很容易。步骤是：

*   使用 GameCenter 对用户进行身份验证
*   使用自动 ID 或用户名/密码组合登录 Parse
*   在 Parse 中为您的 PFUser 设置一个新的“gameCenter ID”属性

您将面临一些数据冗余，但值得注意的是 PFUser uniqueID 是在服务器端创建的，并且不能在设备上播种或修改（我相信即使在创建之后也是如此）。在您的用户数据库中添加一个单独的字段来存储 GKID 数据将允许您在将来查找数据并将数据分配给特定用户。

这是 Apple [GameCenter 文档中的相关页面](http://developer.apple.com/library/ios/#DOCUMENTATION/GameKit/Reference/GKPlayer_Ref/Reference/Reference.html#//apple_ref/occ/instp/GKPlayer/playerID)

另外值得注意的是：您可以生成一个带有自动 ID 的 PFUser（假设您的用户具有 Internet 连接），这在保存其他数据时对您同样有用，因此您甚至可能不需要使用 GameCenter 用户 ID。此自动 ID 可能会在应用程序中保留，直到用户 a) 更新应用程序，b) 删除并重新安装应用程序，或 c) 遵循您在应用程序中的任何其他登录/注册过程（Parse 是您的朋友）。使用 GameCenter ID 的主要原因是它对于跨设备/应用程序安装/更新等的用户来说是相同的。

# postgresql - 我可以从继承的基表中引用现有行吗？（postgres）

> ID：12478039
> 
> 赞同：0
> 
> 时间：2012-09-18T13:29:02.800
> 
> 标签：postgresql, inheritance

我正在尝试 postgres，版本 9.2 我可以从继承的表中引用基表中的现有行吗？示例：我有一个“person”表和一个从 person 继承的“student”表。据我了解，如果我插入新学生，则会自动添加新人。但我需要先插入人员数据，然后插入对它的引用和学生相关数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:56:26.980

*据我了解，如果我插入新学生，则会自动添加新人*

不可以。虽然您可以通过查询 person 表来选择学生，但在插入到 student 表后只会填充 student 表。

您想要的关系是外键而不是继承。在学生表中创建人员 ID 列，并使其依赖于人员表上的人员 ID。

# java - Maven 依赖项不会在 Eclipse 中复制到 WEB-INF/lib

> ID：12478041
> 
> 赞同：1
> 
> 时间：2012-09-18T13:29:15.250
> 
> 标签：java, eclipse, spring, maven, m2e

我在 Eclipse 中有一个 Maven Web 项目（准确地说是 Spring Tool Suite），由于某种原因，我的 Maven 依赖项最终没有出现在 WEB-INF/lib 中，所以我遇到了各种运行时错误。这是上周工作的，我不确定是什么操作导致它停止工作。项目属性-> 部署程序集显示部署到 WEB-INF/lib 的 Maven 依赖项，我尝试执行 Maven -> 更新项目，重新启动 IDE，清理/安装等。这是我的 POM：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.ks</groupId>
    <artifactId>kdweb</artifactId>
    <name>kdweb</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>
    <properties>
        <org.springframework-version>3.1.2.RELEASE</org.springframework-version>
        <org.slf4j-version>1.5.10</org.slf4j-version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <exclusions>
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>com.ks</groupId>
            <artifactId>acommons</artifactId>
            <version>0.0.1-SNAPSHOT</version>
        </dependency>
        <dependency>
            <groupId>com.ks</groupId>
            <artifactId>aggregation-common</artifactId>
            <version>0.0.1-SNAPSHOT</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.2.2</version>
        </dependency>
        <dependency>
            <groupId>commons-pool</groupId>
            <artifactId>commons-pool</artifactId>
            <version>1.6</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-core-asl</artifactId>
            <version>1.9.9</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.9</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-asm</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-expression</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>commons-digester</groupId>
            <artifactId>commons-digester</artifactId>
            <version>2.1</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>3.0.1</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.ks.thirdparty</groupId>
            <artifactId>jconn</artifactId>
            <version>3</version>
        </dependency>
        <dependency>
            <groupId>com.ks</groupId>
            <artifactId>framework-common</artifactId>
            <version>0.0.1-SNAPSHOT</version>
        </dependency>
        <dependency>
            <groupId>com.ks.thirdparty</groupId>
            <artifactId>ojdbc6_g</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>com.ks</groupId>
            <artifactId>abizcommons</artifactId>
            <version>0.0.1-SNAPSHOT</version>
        </dependency>
        <dependency>
            <groupId>com.ks</groupId>
            <artifactId>apods-client</artifactId>
            <version>0.0.1-SNAPSHOT</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <additionalProjectnatures>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                    </additionalProjectnatures>
                    <additionalBuildcommands>
                        <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                    </additionalBuildcommands>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArgument>-Xlint:all</compilerArgument>
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <configuration>
                    <mainClass>org.test.int1.Main</mainClass>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>tomcat-maven-plugin</artifactId>
                <version>1.1</version>
                <configuration>
                    <url>http://xxxxxxxxxxxxxx/manager/text</url>
                    <server>TomcatServer</server>
                    <path>/kdweb</path>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <distributionManagement>
        <repository>
            <id>xxxxxxxxxxxxxxxxxx</id>
            <name>xxxxxxxxxxxx-releases</name>
            <url>http://xxxxxxxxxxxxxxx/artifactory/libs-release-local</url>
        </repository>
        <snapshotRepository>
            <id>xxxxxxxxxx</id>
            <name>xxxxxxxxxx-snapshots</name>
            <url>http://xxxxxxxxxxxx/artifactory/libs-snapshot-local</url>
        </snapshotRepository>
    </distributionManagement>
</project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T17:31:11.973

由于您提到您的构建正在运行，请尝试切换到新的工作区并重新创建您的项目。看看问题是否解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:54:39.160

您可能想尝试[maven-shade-plugin](http://maven.apache.org/plugins/maven-shade-plugin/)。它解决了我所有的依赖安装问题。

# ember.js - ember 未捕获错误：断言失败：无法在路径中找到视图

> ID：12478042
> 
> 赞同：0
> 
> 时间：2012-09-18T13:29:18.800
> 
> 标签：ember.js, mouseover

我正在尝试学习 ember.js，我首先尝试为自己设置一个简单（不那么简单）的 mouseover, out, down 示例。

[http://jsfiddle.net/RBbpS/48/](http://jsfiddle.net/RBbpS/48/)

我不断收到“未捕获的错误：断言失败：无法在路径上找到视图”

有人可以对此有所了解吗？我相信这很简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T15:58:43.243

如果您将 App 声明为全局（没有 var），那么您的第一个小提琴就可以工作。

[http://jsfiddle.net/Sly7/RBbpS/52/](http://jsfiddle.net/Sly7/RBbpS/52/)

也就是说，如果您是 ember 新手，我建议您从阅读 emberjs.com 开始（不要忘记 api :)，在那里您可以找到视图的处理程序

来自文档：

```
Mouse events: 'mouseDown', 'mouseUp', 'contextMenu', 'click', 'doubleClick',
'mouseMove', 'focusIn', 'focusOut', 'mouseEnter', 'mouseLeave' 
```

最后，你这里使用的版本比较老了，建议你试试最新版本：[http](http://cloud.github.com/downloads/emberjs/ember.js/ember-latest.js) ://cloud.github.com/downloads/emberjs/ember.js/ember-latest.js （别忘了还包括[http://cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc.1.js](http://cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc.1.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:00:38.113

尝试 mouseEnter 和 mouseLeave 代替 mouseOver 和 mouseOut 。请参阅 ember.js 查看事件[指南](http://emberjs.com/api/classes/Ember.View.html)

# javascript - 将元素附加到列表会重置滚动位置

> ID：12478044
> 
> 赞同：3
> 
> 时间：2012-09-18T13:29:28.277
> 
> 标签：javascript, html, css

我有一个简单的`ul`地方，我使用 jquery 附加了一堆新的 li 元素。`li`这在大多数情况下效果很好，但有时列表的滚动位置会在添加新s之后立即重置回 0 。有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:37:17.360

当你使用类似*这样*的代码时，它会发生：

```
<a href="#" id="append">Append</a> 
```

在 jQuery 中，您*可能*已经以这种方式给出了代码：

```
$("#append").click(function(){
    $("ul").append("<li>");
}); 
```

如果是这种情况，您需要给`return false;`该功能一个。

```
$("#append").click(function(){
    $("ul").append("<li>");
    return false;
}); 
```

### 如果这不是您想要的，请提供更多详细信息！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:38:44.753

好的，似乎以下样式对行为负责：

```
display: -webkit-box;
-webkit-box-orient: vertical; 
```

# hadoop - hadoop 存储目录使用空间超过 HDFS 上的总数据

> ID：12478045
> 
> 赞同：1
> 
> 时间：2012-09-18T13:29:29.220
> 
> 标签：hadoop, mapreduce, hdfs

我有一个**复制因子**= 3 的三节点 hadoop 集群。

**每个系统的存储目录**是**/app/hadoop/tmp/dfs/**。

每个**datanode系统**的硬盘容量为221GB。

HDFS的**有效数据**为62GB，**复制**62*3= 186GB。

现在的问题是，即使我在 660 GB 集群上只有 186 GB 的数据，我的存储空间也不足：HDFS 显示可用空间存在巨大差异：

数据节点1 =7.47 GB

数据节点2 =17.7 GB

数据节点3 =143 GB

为了确保这些空间被 hadoop 本地存储使用，我在每个数据节点上运行了这个命令。对于数据节点1

```
du -h --max-depth=1 /app/hadoop/tmp/
63G     /app/hadoop/tmp/dfs
139G    /app/hadoop/tmp/mapred
201G    /app/hadoop/tmp/ 
```

对于数据节点2

```
du -h --max-depth=1 /app/hadoop/tmp/
126G    /app/hadoop/tmp/mapred
62G     /app/hadoop/tmp/dfs
188G    /app/hadoop/tmp/ 
```

对于datanode3 du -h --max-depth=1 /app/hadoop/tmp/dfs/ 62G /app/hadoop/tmp/dfs/data 62G /app/hadoop/tmp/dfs/

**这里datanode1已经使用了201GB的存储空间。** 我尝试了负载平衡器，但它显示集群是平衡的。这是输出。

```
start-balancer.sh
starting balancer, logging to /usr/lib/hadoop-0.20/logs/hadoop-ocpe-balancer-blrkec241933d.out
Time Stamp               Iteration#  Bytes Already Moved  Bytes Left To Move  Bytes Being Moved
The cluster is balanced. Exiting...
Balancing took 622.0 milliseconds 
```

最近我的一个datanode宕机了几天，修复后出现了这个问题。如何平衡负载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T00:17:09.970

您对磁盘空间的分析包括 MapReduce 暂存目录空间（/app/hadoop/tmp/mapred 路径），它位于 HDFS 之外，并且大部分是在作业完成时清除的临时数据。DFS 空间 (/app/hadoop/tmp/dfs) 似乎与您预期的使用大小一致。

因此，您的磁盘空间不会被 DataNodes 占用，而是被 TaskTracker 占用 - 重新启动它们会强制清除这些目录。

# c# - 没有 Getter/Setter 的反射？

> ID：12478047
> 
> 赞同：1
> 
> 时间：2012-09-18T13:29:43.507
> 
> 标签：c#, .net, reflection, properties, runtime

如果我在课堂上声明以下内容：

```
private int? MyID = null; 
```

然后尝试通过反射访问它，它将无法找到它。我的意思是，下面会将 gProp 设置为 null：

```
gType = refObj.GetType();
gProp = gType.GetProperty(PropertyName, System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance); 
```

但是，如果我将其声明为：

```
private int? MyID { get; set; } 
```

这对我来说一点也不奇怪，因为我已经知道是这样的。但是，我想确认；无论如何要使第一个声明与反射一起工作，还是我提供了一个 Getter/Setter 以使反射起作用？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T13:31:40.380

它是一个字段，而不是一个属性，所以它不会被`GetProperty`. 你需要使用`GetField`方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T13:32:21.107

您需要字段的`GetField`方法（而不是`GetProperty`）。

> **Type.GetFields 方法** 使用指定的绑定约束搜索指定的字段。

### 样本

```
// your instance
MyObject instance = new MyObject();
// get type information
Type myType = typeof(MyObject);
// get field information
FieldInfo fieldInfo = myType.GetField("MyID");
// set some value
fieldInfo.SetValue(instance, 123);
// get field value
var value = fieldInfo.GetValue(instance);
// value is 123 
```

### 更多信息

*   [MSDN - Type.GetField 方法（字符串、BindingFlags）](http://msdn.microsoft.com/en-us/library/4ek9c21e.aspx)
*   [MSDN - SetField 方法（字符串、BindingFlags、对象）](http://msdn.microsoft.com/en-us/library/ms244028%28v=vs.90%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T13:34:54.600

之间有区别

```
private int? MyID = null; 
```

和

```
private int? MyID { get; set; } 
```

第一个是[字段](http://msdn.microsoft.com/en-us/library/ms173118.aspx)，第二个是[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)。

[`Type.GetField()`](http://msdn.microsoft.com/en-us/library/4ek9c21e.aspx)尝试通过反射查找字段时应使用该方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T13:33:19.063

您应该创建一个属性来访问类中的变量。所以你手动创建一个属性

```
private int? MyID { get { return _myID;} } 
```

下面的代码有效，因为它是 c# 中的 Auto 属性

```
private int? MyID { get; set; } 
```

请参阅[http://msdn.microsoft.com/en-us/library/bb384054.aspx](http://msdn.microsoft.com/en-us/library/bb384054.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T13:36:52.057

我的逻辑表明第一个是一个简单的变量，第二个是一个属性，因为它有 get/set，所以要让“GetProperty”工作，它必须是一个属性。如果你想要一个变量，你需要 GetField

# python - python和OpenSSL的“没有共享密码”错误

> ID：12478048
> 
> 赞同：6
> 
> 时间：2012-09-18T13:29:43.097
> 
> 标签：python, openssl

服务器：

```
#!/usr/bin/env python

import SocketServer
import json
from OpenSSL import SSL
import os
import socket

TERMINATION_STRING = "Done"

CERTIFICATE_PATH = os.getcwd() + '/CA/certs/01.pem'
KEY_PATH = os.getcwd() + '/CA/private/key.pem'
CA_PATH = os.getcwd() + '/CA/cacert.pem'
print CA_PATH

def verify_cb(conn, cert, errnum, depth, ok):
    print('Got cert: %s' % cert.get_subject())
    return ok

class SSLThreadingTCPServer(SocketServer.ThreadingTCPServer):
    def __init__(self, address, handler):
        SocketServer.ThreadingTCPServer.__init__(self, address, handler)

        ctx = SSL.Context(SSL.SSLv23_METHOD)
        ctx.set_verify(SSL.VERIFY_PEER | SSL.VERIFY_FAIL_IF_NO_PEER_CERT, verify_cb)

        ctx.use_privatekey_file(KEY_PATH)
        ctx.use_certificate_file(CERTIFICATE_PATH)
        ctx.load_verify_locations(CA_PATH)

        self.socket = SSL.Connection(ctx, socket.socket(self.address_family, self.socket_type))
        self.socket.set_accept_state()

        self.server_bind()
        self.server_activate()

        print "Serving:", address[0], "on port:", address[1]

class MemberUpdateHandler(SocketServer.StreamRequestHandler):
    def setup(self):
        self.connection = self.request
        self.rfile = socket._fileobject(self.request, "rb", self.rbufsize)
        self.wfile = socket._fileobject(self.request, "wb", self.wbufsize)

        print self.client_address, "connected"

    def handle(self):
        data = ""
        while True:
            data += self.request.recv(1024).encode('utf-8').strip
            if data[-4:] == "Done":
                print "Done"
                break

            dataStrings = data.split(' ')
            for item in dataStrings:
                print item

if __name__ == "__main__":
    ADDRESS = 'localhost'
    PORT = 42424
    HOST = (ADDRESS, PORT)

    s = SSLThreadingTCPServer(HOST, MemberUpdateHandler)
    s.serve_forever() 
```

客户：

```
#!/usr/bin/env python

from OpenSSL import SSL
import socket
import os

HOST = 'localhost'
PORT = 42424
ADDRESS = (HOST, PORT)

CERTIFICATE_FILE = os.getcwd() + '/CA/certs/02.pem'
KEY_PATH = os.getcwd() + '/CA/clientKey.pem'
CA_PATH = os.getcwd() + '/CA/cacert.pem'

def verify_cb(conn, cert, errnum, depth, ok):
    print('Got cert: %s' % cert.get_subject())
    return ok

sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

ctx = SSL.Context(SSL.SSLv23_METHOD)
ctx.set_verify(SSL.VERIFY_PEER, verify_cb)
ctx.use_certificate_file(CERTIFICATE_FILE)
ctx.use_privatekey_file(KEY_PATH)
ctx.load_verify_locations(CA_PATH)

sslSock = SSL.Connection(ctx, sock)
sslSock.connect(ADDRESS)

items = "this is a test Done"

sslSock.sendall(items)

sslSock.close() 
```

服务器端的错误：

```
Error: [('SSL routines', 'SSL3_GET_CLIENT_HELLO', 'no shared cipher')] 
```

客户端错误：

```
OpenSSL.SSL.Error: [('SSL routines', 'SSL23_GET_SERVER_HELLO', 'sslv3 alert handshake failure')] 
```

我有一种感觉，我错过了一些简单的东西，但无法确定它。我在不同的地方发现了几个和我一模一样的问题，但没有一个得到回答。我是网络编程的新手，非常感谢任何帮助。

使用 Ubuntu 10.04 和 python 2.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T10:17:52.067

尝试将顺序更改为：

```
...
ctx.use_certificate_file(CERTIFICATE_PATH)
ctx.use_privatekey_file(KEY_PATH)
... 
```

当我在我的代码中使用这个顺序时，我在服务器启动（而不是客户端连接）时收到了平均错误消息：

```
Traceback (most recent call last):
  File "src/server_main.py", line 230, in <module>
    s = SSLClientsAuthServer()
  File "src/server_main.py", line 134, in __init__
    ctx.use_privatekey_file (self.config.value['SERVER_KEY'])
OpenSSL.SSL.Error: [('x509 certificate routines', 'X509_check_private_key', 'key values mismatch')] 
```

这是因为我确实使用了与 webserver.crt 不对应的 webserver.key：

```
$ openssl x509 -text -in certs/webserver.crt
Certificate:
Data:
    Version: 3 (0x2)
...
            Modulus:
                00:a1:b6:e3:ce:53:3d:c9:96:a6:06:1d:3e:ae:34:
....

$ openssl rsa -text -in keys/webserver.key
Private-Key: (2048 bit)
modulus:
    00:b7:34:61:d7:c7:0d:2b:5c:57:26:d0:8d:7a:04:
.... 
```

确保您使用了相同的 RSA 密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:43:49.357

一个错误是：

```
data += self.request.recv(1024).encode('utf-8').strip 
```

这导致我

```
TypeError: cannot concatenate 'str' and 'builtin_function_or_method' objects 
```

它应该是：

```
data += self.request.recv(1024).encode('utf-8').strip() 
```

这个例子对我有用。

```
Got cert: <X509Name object '/C=IT/ST=XXX/L=YYY/O=ZZZ/OU=NNN/CN=CA'>
Got cert: <X509Name object '/C=IT/ST=XXX/L=YYY/O=ZZZ/OU=NNN/CN=Server'> 
```

使用 Stock 10.04 Ubuntu 服务器和从 apt-get 安装的软件包进行测试。

```
python-openssl                    0.10-1
openssl                           0.9.8k-7ubuntu8
python                            2.6.5-0ubuntu1 
```

您应该检查您的证书/CA，或使用一些列出一些可用密码的简单脚本测试服务器：[https ://superuser.com/questions/109213/is-there-a-tool-that-c​​an-test-what-ssl -tls-cipher-suites-a-particular-website-of](https://superuser.com/questions/109213/is-there-a-tool-that-can-test-what-ssl-tls-cipher-suites-a-particular-website-of)

**更新 2：**

为了排除证书的一些问题，您可以生成一些 CA 和服务器/客户端证书，例如[http://acs.lbl.gov/~boverhof/openssl_certs.html](http://acs.lbl.gov/~boverhof/openssl_certs.html)

# javascript - yii中表单更新中的Ajax验证

> ID：12478053
> 
> 赞同：0
> 
> 时间：2012-09-18T13:30:02.190
> 
> 标签：javascript, yii

我有一个用于创建和编辑某些字段的表单。在提交表单之前，我正在使用 Ajax 验证

```
 <?php $form=$this->beginWidget('CActiveForm', array(
            'id'=>'candidates-profiles-form',
            'enableAjaxValidation'=>true,
                        'enableClientValidation'=>true,
    'clientOptions'=>array(
        'validateOnSubmit'=>true,
        'validateOnChange'=>false,
         'beforeValidate'=>"js:function(form) {         
            if((form.data('submitObject')[0].id ) == 'cancel'){
            alert('cancalclicked');
                this.validateOnSubmit = false;
        this.validateOnChange = false;
        this.beforeValidate = ''; // the problem is caused by this line
        form.submit();
        return false;

                }
                else{
                  alert('submitclicked');
                return true;

                }

        }",    
        'afterValidate'=>"js:function(form, data, hasError) {
       if(hasError) {
                alert('We have detected some input errors and has not saved your data. Please click Ok to correct them.');
                return false;
            }
            else {          
                if(confirm('We have validated your input and we are ready to save your data. Please click Ok to save or Cancel to return to input.'))
                    return true;
                else
                    return false;
            }
        }",)

)); ?> 
```

创建后它完美地进入了afterValidate功能并且工作正常。但编辑后它并不是全部都进入afterValidate。但它进入 beforeValidate 并提交表单而没有到达 afterValidate 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:12:43.063

确保你有 $this->performAjaxValidation($model); 在您的控制器中执行该操作。

# c# - 石英中的计划外工作

> ID：12478054
> 
> 赞同：3
> 
> 时间：2012-09-18T13:30:14.557
> 
> 标签：c#, quartz-scheduler

我正在使用 Quartz 在我的 c# .net 应用程序中安排作业。我将所有数据存储在数据库中。我的代码是：

```
ISchedulerFactory schedFact = new StdSchedulerFactory(properties);
        _scheduler = schedFact.GetScheduler();
        _scheduler.Start();

       job = JobBuilder.Create<JobTask>()
             .WithIdentity("job1", "group1")
        .Build();

          trigger = TriggerBuilder.Create()
            .WithIdentity("trigger1", "group1")
            .WithSchedule(
        CronScheduleBuilder.CronSchedule("0 0/5 * * * ?"))
         .Build();
         _scheduler.ScheduleJob(job, trigger); 
```

现在我想提供用户功能，以便用户可以禁用（取消计划）工作。我看过石英教程，但我找不到在 c# 中完成它的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:42:40.970

**您可以在IScheduler**中调用以下方法

 **```
 //
    // Summary:
    //     Remove the indicated Quartz.Trigger from the scheduler.
    bool UnscheduleJob(string triggerName, string groupName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-14T20:44:14.813

你的 Job 类可以实现`IInterruptableJob`接口并实现

```
public void Interrupt()
{
    JobKey jobKey = new JobKey(JobName, MyService.GroupName);
    Scheduler.Interrupt(jobKey);
} 
```**

# sql-server - 我可以安排一个作业在每个时区的午夜运行，以及如何让 proc 知道要处理哪个时区？

> ID：12478056
> 
> 赞同：2
> 
> 时间：2012-09-18T13:30:17.460
> 
> 标签：sql-server, sql-server-2008-r2, windows-server-2008-r2

我有一份工作需要在午夜运行 7 个时区。有没有办法在 Windows Server 2008 R2 上的 SQL 2008 R2 中创建一个单一的计划来执行此操作，这将告诉 proc 要处理哪个时区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:44:22.373

如果您有一个 SQL 服务器，则必须设置 7 个单独的计划调用 - 每个时区一个，在该特定时区的午夜运行。这是这样做的最佳方式。
我突然想到 - 你的意思是你想在每个时区的午夜运行（正如我假设的那样） - 即在 7 个不同的时间，或者在当前时区的午夜，但一次处理 7 个不同时区的数据（在这种情况下不同时区处理有什么区别）？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T13:47:01.947

SQL Server 代理不支持时区。您可以通过计算得出程序中的时区：

```
SELECT DATEDIFF(MINUTE, GETDATE(), GETUTCDATE()); 
```

因此，您可以将您的计划设置为每小时运行一次，然后在该过程中，检查上述结果是否属于您的 7 个时区之一。如果没有，请返回。

您可以将 7 个时区存储在一个表中，这样当您添加第 8 个时区时，您不必更改程序。

根据您将来可能支持的时区，您可能还需要更细化 - 有些不是 UTC 小时数的整数。例如，[纽芬兰](http://en.wikipedia.org/wiki/Newfoundland_Standard_Time_Zone)是半小时：比 UTC 晚 2.5 或 3.5 小时，具体取决于夏令时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T13:54:56.957

只需安排您的工作每小时运行一次存储过程。并在存储过程中检查`DATEPART(hh, GETUTCDATE())`UTC 所需时区的固定午夜列表，例如时区 +1 检查是否 `DATEPART(hh, GETUTCDATE())=(24-1)`为 +2 检查`DATEPART(hh, GETUTCDATE())=(24-2)`

# php - 如何防止组合框中的重复值

> ID：12478059
> 
> 赞同：1
> 
> 时间：2012-09-18T13:30:26.097
> 
> 标签：php

我在我的 codeigniter 应用程序中有一个视图，它从数据库中获取一个数组。我想根据数组的内容创建几个组合框。

这是数组的样子：

```
 Array ( 
    [0] => Array ( 
                    [L1ID] => 2 
                    [L1Location] => USA 
                    [L2ID] => 3 
                    [L2Location] => New York
                    [L3ID] => 4 
                    [L3Location] => Manhanttan
                ) 
    [1] => Array (  
                    [L1ID] => 2 
                    [L1Location] => USA 
                    [L2ID] => 8 
                    [L2Location] => New Jersey 
                    [L3ID] => 7 
                    [L3Location] => Bergen County
                ) 

    [2] => Array ( 
                    [L1ID] => 5 
                    [L1Location] => Canada 
                    [L2ID] => 12
                    [L2Location] => Ontario 
                    [L3ID] => 50
                    [L3Location] => Toronto 
                ) 
    [3] => Array ( 
                    [L1ID] => 6 
                    [L1Location] => South Korea
                    [L2ID] => 22
                    [L2Location] => Gyungido 
                    [L3ID] => 25
                    [L3Location] => Buchon
                ) 
    ) 
```

如您所见，数组中的每个项目最多可以定义 3 个位置。我想创建一个包含所有位置 1 的组合框。因此，换句话说，它将有“USA”、“CANADA”、“SOUTH KOREA”作为选项。当用户单击任何位置时，我想查询相同的数组并向下一层 - 所有位置 2 的 - 填充在单独的组合框中。例如，当他们在位置 1 中选择“美国”时，位置 2 组合将显示“纽约”和“新泽西”作为选项。

我已经编写了一些代码来开始循环遍历数组并提取所有 L1（位置 1），但我不知道如何防止添加重复项。

这是我的代码：

```
 <select id="L1locationlist" name="L1locationlist">
         <option value=""></option>
        <?php
            foreach ($locations as $location) {
                echo ($location['L1ID'].'<BR>');

                echo '<option value="' . $location['L1ID'] . '">' . $location['L1Location'].'</option>';

            }
        ?>
    </select> 
```

我只想在组合框中输入一个美国条目。你能告诉我我该怎么做吗？我是否必须创建一个单独的函数来检查它是否已经存在于组合框中？谢谢你。

**编辑：**

最初的计划是从数据库中获取所有位置信息，然后在客户端，根据用户点击的内容以某种方式动态地深入到不同的位置。但我想我也应该问这是否是一个好的设计？如果我只是对数据库进行单独调用，也许代码会“更干净”。例如，我最初将获取所有位置 1 值。然后，如果用户选择“美国”，我将再次查询数据库以获取美国的所有子位置。我猜最初的想法是保存多次访问数据库。任何意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:38:42.710

我要做的第一件事是解析数组以获取所需格式的所有位置：

```
$parsedLocations = array(1 => array(), 2 => array(), 3 => array());
foreach ($locations as $location) {
    for($i = 1; $i < 4; $i++) {
         $parsedLocations[i][$location['L' . $i . 'ID']] = $location['L' . $i . 'Location']
    }
} 
```

获得所需的数组后，您可以简单地显示项目并使用以下方法使它们独一无二`array_unique()`：

```
<select id="L1locationlist" name="L1locationlist">
  <option value=""></option>
  <?php
  $locations = array_unique($parsedLocations[1]);
  foreach($locations as $key => $location) {
      echo '  <option vaue="' . $key . '">' . $location . '</option>';
  }
  ?>
</select> 
```

* * *

如果您想为所有三个位置动态执行此操作，您可以执行以下操作（使用相同的解析位置数组）：

```
<?php
for ($i = 1; $i < 4; $i++) {
    echo '<select id="L' . $i . 'locationlist" name="L' . $i . 'locationlist">';
    echo '  <option value=""></option>';
    $locations = array_unique($parsedLocations[1]);
    foreach($locations as $key => $location) {
        echo '  <option vaue="' . $key . '">' . $location . '</option>';
    }
    echo '</select>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:41:42.070

尝试这个

```
$i = 1;
    foreach ($locations as $location) {
    if(isset($locations[$i-1]['L1Location']) && $locations[$i-1]['L1Location'] != $location['L1Location'] && $i != 1){
                    echo ($location['L1ID'].'<BR>');

                    echo '<option value="' . $location['L1ID'] . '">' . $location['L1Location'].'</option>';
    $i++;
    }

                } 
```

除此之外，如果您在查询中按 L1Location 分组，则无需像上面简单的 foreach 循环那样编写代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T13:35:38.003

循环遍历`$locations`数组并为每个框生成一个新数组，同时检查值。然后，遍历每个数组并生成框。（[演示。](http://ideone.com/TqbpY)）

```
 <?php
        $countries = array();
        $states = array();
        $cities = array();
        foreach ($locations as $location) {
            if(!array_key_exists($location['L1ID'], $countries))
                $countries[$location['L1ID']] = array(
                    'name' => $location['L1Location'],
                    'states' => array(),
                );
            if(!array_key_exists($location['L2ID'], $countries[$location['L1ID']]['states'])){
                $countries[$location['L1ID']]['states'][$location['L2ID']] = array(
                    'name' => $location['L2Location'],
                    'cities' => array(),
                );
            }
            if(!array_key_exists($location['L3ID'], $countries[$location['L1ID']]['states'][$location['L2ID']])){
                $countries[$location['L1ID']]['states'][$location['L2ID']]['cities'][$location['L3ID']] = $location['L3Location'];
            }
        }

        // Generate $countries box
        foreach ($countries as $key => $country) {
            echo ($key.'<BR>'."\n");
            echo '<option value="' . $key . '">' . $country['name'].'</option>'."\n";

            // Generate $states box
            foreach ($country['states'] as $key => $state) {
                echo ($key.'<BR>'."\n");
                echo '<option value="' . $key . '">' . $state['name'].'</option>'."\n";

                // Generate $city box
                foreach ($state['cities'] as $key => $city) {
                    echo ($key.'<BR>'."\n");
                    echo '<option value="' . $key . '">' . $city.'</option>'."\n";
                }

            }

        }

    ?> 
```

# android - Android 4.0.4 TabActivity

> ID：12478067
> 
> 赞同：0
> 
> 时间：2012-09-18T13:30:38.650
> 
> 标签：android

我有一个使用 TabActivity 的应用程序，现在作为升级到冰淇淋三明治的设备，选项卡名称的格式不起作用。图像也不显示。

```
 intent = new Intent().setClass(this, StnAircrafts.class);  
   intent.putExtra("EmpID", empid); 
   intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);  
   spec = tabHost.newTabSpec("Aircraft")
           .setIndicator(Html.fromHtml("<b><H2>Aircraft</H2></b>"), getResources().getDrawable(R.drawable.tab2_drawable))                  
           .setContent(intent);    
   tabHost.addTab(spec); 
```

我现在该如何解决。稍后我会将其更改为 Actionbar 和 Fragment。

谢谢

# java - 如何在没有 Eclipse 的情况下使用 SWT？

> ID：12478069
> 
> 赞同：2
> 
> 时间：2012-09-18T13:30:57.393
> 
> 标签：java, eclipse, user-interface, widget, swt

我想使用 swt 来制作 GUI，但我不想使用 eclipse 来编程。有没有办法做到这一点。此外，是否有任何不是 Eclipse 插件的 swt GUI 设计器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T13:43:36.970

当然可以独立于 Eclipse-RCP 平台使用 SWT。你只需要有合适的罐子。查看这些示例[http://www.eclipse.org/swt/snippets/](http://www.eclipse.org/swt/snippets/)。例如：

```
import org.eclipse.swt.*;
import org.eclipse.swt.widgets.*;
import org.eclipse.swt.layout.*;

public class Snippet169 {
public static void main (String [] args) {
    Display display = new Display ();
    final Shell shell = new Shell (display);
    shell.setLayout (new FillLayout ());
    Listener listener = new Listener () {
        public void handleEvent (Event e) {
            Control [] children = shell.getChildren ();
            for (int i=0; i<children.length; i++) {
                Control child = children [i];
                if (e.widget != child && child instanceof Button && (child.getStyle () & SWT.TOGGLE) != 0) {
                    ((Button) child).setSelection (false);
                }
            }
            ((Button) e.widget).setSelection (true);
        }
    };
    for (int i=0; i<20; i++) {
        Button button = new Button (shell, SWT.TOGGLE);
        button.setText ("B" + i);
        button.addListener (SWT.Selection, listener);
        if (i == 0) button.setSelection (true);
    }
    shell.pack ();
    shell.open ();
    while (!shell.isDisposed ()) {
        if (!display.readAndDispatch ()) display.sleep ();
    }
    display.dispose ();
}
} 
```

此外，SWT 设计人员不受 Eclipse 插件的约束，只需 google 即可找到合适的插件。Eclipse 的 SWT 设计器示例（但不仅适用于 Eclipse 插件）： http: [//www.eclipse.org/windowbuilder/](http://www.eclipse.org/windowbuilder/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T20:19:55.253

SWT 独立于 Eclipse。您可以将它用于基于 RCP/SWT 的应用程序，也可以用作基于 J2SE/SWT 的应用程序。在第一种情况下，您将使用它与 Eclipse Equinox OSGi 并添加对 org.eclipse.ui*... 的依赖项，在第二种情况下，您需要下载特定于平台的 SWT*.jar 库并将其放入 J2SE 应用程序的类路径中。

我现在更喜欢 RCP/SWT 开发，因为它更可插件化和模块化，就像 J2SE 的使用一样。

我更喜欢 Eclipse IDE 而不是其他 IDE，因为我只是从 Eclipse 开始（即使我也尝试过 Netbeans 或 InteliJ）——但这是每个开发人员选择使用哪个 IDE 的问题。

在玩了一些 SWT 和 JFace 之后，即使没有 WindowBuilder，您也可以轻松创建 GUI -> 我确实使用 WindowBuilder，但是在生成代码后，我总是自己更改代码，但它当然是个好工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T13:39:42.477

您必须将 Eclipse 安装到您的计算机上，但是您可以将 SWT JAR 文件从 Eclipse 复制到其他编辑器的类路径中。

我认为没有任何非 Eclipse SWT GUI 设计器。

# android - Android 2.3 和 Phonegap，navigator.online 不起作用

> ID：12478073
> 
> 赞同：2
> 
> 时间：2012-09-18T13:31:07.817
> 
> 标签：android, html, cordova

我测试了 navigator.online，它一直有效，直到我使用 PhoneGap 构建了应用程序，之后，navigator.online 总是返回 true。有人知道如何取消缓存或刷新此值吗？我在“点击”事件中需要它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T13:47:22.577

我在开发应用程序时也遇到了这个问题。

我用的是：

```
document.addEventListener("online", onOnline, false);
document.addEventListener("offline", onOffline, false); 
```

当设备断开连接或连接到 Internet 时，将触发这些事件。

您可以在函数中存储一些全局变量

```
function onOnline(){} 
```

和

```
function onOffline(){} 
```

然后检查这些全局变量的值并根据值做任何你想做的事情。

# java - 在 Mac OS 中使用带有 JAVA 的注册表

> ID：12478075
> 
> 赞同：2
> 
> 时间：2012-09-18T13:31:08.313
> 
> 标签：java, macos, registry, osx-server

我在**Windows平台上编写了一个****Java**桌面应用程序，它使用**Windows 注册表**来保存应用程序信息，如应用程序的位置、时间段（如免费试用长达 30 天）等。

 ****现在，我想创建相同的 java 应用程序以在**Mac OS**上运行。尽管大多数 java 代码都是相同的，但我不确定 Mac OS 中的注册表概念。***Mac Os***中是否有类似 Windows 平台的注册表。如果是，我如何使用带有 JAVA 的 Mac 注册表来编写应用程序信息？

问候，

阿伦·库马尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T13:38:09.373

该`java.util.prefs`机制是处理这类事情的跨平台方式。在 Windows 上它由注册表支持，在 Mac 上`.plist`它`~/Library`由`~/.java`.****

# java - 如何在 Tomcat 的会话 cookie 路径中包含更多请求 URL？

> ID：12478076
> 
> 赞同：4
> 
> 时间：2012-09-18T13:31:09.123
> 
> 标签：java, tomcat7, multi-tenant

默认情况下，Tomcat 在生成会话 cookie 时使用 Web 应用程序名称（上下文路径）作为会话 cookie 路径。有没有办法以编程方式影响这一点？我想包含 servlet 路径的一个子集。（这适用于多租户 Web 应用程序，其中用户可以在不同的窗口中一次登录多个租户。）我不想在配置文件中将其设置为固定字符串。

# javascript - jQuery：检查 SVG 元素的类型

> ID：12478080
> 
> 赞同：3
> 
> 时间：2012-09-18T13:31:12.580
> 
> 标签：javascript, jquery, svg

如何在 JavaScript 或 jQuery 中检查 svg 对象的类型？我想检查一个标签是否是 type `SVGAnimatedString`。

当我将对象输出到控制台时，它输出以下内容：

```
console.log(this.href);
SVGAnimatedString // is an object and can be expanded 
```

在我的代码中，我尝试检查它是否是 SVG 对象，但检查不起作用。

```
if (this.href == 'SVGAnimatedString'){ //this check does not work
     //it s an svg object
    var url = this.href.animVal
}
else{
    var url = this.href; //get the href from the <a> element
} 
```

如何正确检查它是否是`SVGAnimatedString`对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T13:38:33.007

您不应该使用 比较类型`==`。你需要使用`instanceof`. 你可以这样做：

```
if (this.href instanceof SVGAnimatedString){ //this check works!!!
     //it s an svg object
    var url = this.href.animVal
}
else{
    var url = this.href; //get the href from the <a> element
} 
```

浏览器[`SVGAnimatedString`](https://developer.mozilla.org/en-US/docs/DOM/SVGAnimatedString)支持较少。记在脑子里。:)

# asp.net - 在 Razor 循环中包含变量

> ID：12478086
> 
> 赞同：1
> 
> 时间：2012-09-18T13:31:29.740
> 
> 标签：asp.net, razor, webmatrix

我正在使用这样的简单 for 循环来输出存储在数据库中的图像表：

```
@for(var i = 1; i < 7; i++){
<tr>
<td>Image @i:</td>
<td><img src="images/@image01" /></td>
</tr>
} 
```

我想要做的是在图像字段名称中使用 i 变量，因为在上面的示例中，显然每个图像都是相同的，来自 image01 字段。我尝试了以下但它不起作用。有谁知道编码的正确方法？

```
@for(var i = 1; i < 7; i++){
<tr>
<td>Image @i:</td>
<td><img src="images/@image0@i" /></td>
</tr>
} 
```

我尝试了各种方法，但我只是在学习来自 ASP Classic 的剃刀语法，所以我现在只是在猜测。

干杯，凯夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:34:24.477

如果 image01 是一个字段，你不能动态创建变量名，你必须这样做：

```
@for(var i = 1; i < 7; i++){
string imgName;
if (i == 0)
   imgName = image01; //store the var in a central variable
else if (i == 1)
   imgName = image02;
else if ...

<tr>
<td>Image @i:</td>
<td><img src="images/@imgName" /></td>
</tr>
} 
```

唯一的其他选择是反射，但我不知道如何在 Razor 视图中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:36:09.233

使用显式表达

```
<img src="images/image0@(i)" /> 
```

这会给你的输出像

```
<img src="images/image01">
<img src="images/image02">
<img src="images/image03"> 
```

理想情况下，我会避免使用这种 for 循环并在视图中创建图像 URL 值。相反，我将在我的 ViewModel 中有一组图像

```
public class UserProfile
{
  public string Name { set;get;}
  public List<UserImage> Images {set;get;}
  public UserProfile()
  {
     Images=new List<UserImage>();
  }
}
public class UserImage
{
  public string URL { set;get;}
  public string Caption { set;get;}
} 
```

并使用 Images 集合将此 ViewModel 返回到我的视图

```
public ActionResult ShowUser(int id)
{
  var user=new UserProfile();
  user.Name="SomeName";
  //to do : get images from db and set instead of being hard coded
  user.Images.Add(new UserImage { URL="someImge1.jpg"});
  user.Images.Add(new UserImage { URL="someImge2.jpg"});
  return View(user);
} 
```

在我们的强类型视图中，我们将显示它，

```
@model UserProfile
<table>
foreach(var img in Model.Images)
{
  <tr>
    <td><img src=@img.URL" alt="@img.Caption" /></td>
  </tr>
}
</table> 
```

我们没有在视图中混合任何代码。设置图像 url 应该在你的控制器中完成。如果图像在 Content 文件夹中，您可以使用`Url.Content`HTML 辅助方法来获取路径。

# html - 元素：使用 mediagroup 属性时，Chrome 中的播放按钮不起作用

> ID：12478093
> 
> 赞同：0
> 
> 时间：2012-09-18T13:32:18.783
> 
> 标签：html, video, cross-browser

以下 HTML 代码适用于 Firefox，但不适用于 Chrome。在后者中，播放按钮不起作用。

```
<video id="mmswf50534a6a5e263" controls="controls" mediagroup="mmswf50534a6a5e263">
<source src="http://video-js.zencoder.com/oceans-clip.webm" type="video/webm">
</video> 
```

而这段代码在两种浏览器中都有效。

```
<video id="mmswf50534a6a5e263" controls="controls">
<source src="http://video-js.zencoder.com/oceans-clip.webm" type="video/webm">
</video> 
```

我不知道为什么 mediagroup 属性会影响播放按钮功能。所有其他控制按钮都可以工作。我什至可以右键单击 Chrome 中的视频并启动它。

一个 Chrome 错误？测试版本为：21.0.1180.89

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:51:27.273

看起来您正在使用 Typo3 生成视频。我有同样的问题，我找不到它会在哪里附加`mediagroup`.

我通过将此脚本添加到我的基本模板解决了这个问题：

```
//Remove all mediagroup attributes from video tag
window.onload = function(){
    var lstMedia = document.getElementsByTagName("video");

    for(var i = 0; i < lstMedia.length; i++) {
        if(lstMedia[i].hasAttribute("mediagroup")) {
            lstMedia[i].removeAttribute("mediagroup");
        }
    }
} 
```

可能不是一个干净的解决方案，但它对我有用。

注意：我使用 Typo3 4.7

# eclipse - 如何使用 svn / subversive 在 Eclipse 上查看我承诺使用团队 > 提交的位置

> ID：12478096
> 
> 赞同：1
> 
> 时间：2012-09-18T13:32:35.150
> 
> 标签：eclipse, svn, subversive

当我右键单击一个项目并选择提交时，它不会在提交窗口中显示提交所在的存储库 URL，这对开发人员来说可能很痛苦。有没有办法启用它？

在项目上方，我可以看到一条沿线的路径`https://repos.domain.com/repos, Trunk:trunk`

不幸的是，这并不总是准确的。例如，当我在一个名为`MyBranch`并选择的分支上时，`Team > Branch`它会在`MyBranch`分支文件夹中创建新分支，而不是在文件夹中创建它`branches`。我犯了几次这个错误，但通过我的项目它会告诉我：

`https://repos.domain.com/repos, Branch:newBranch`

当路径`https://repos.domain.com/repos/project/branches/MyBranch/NewBranch`不是`https://repos.domain.com/repos/project/branches/NewBranch`

有没有办法提高这种准确度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:33:42.690

也许，Subclipse 会是一个更好的选择。

这是 Eclipse 3.7 上的 Subclipse 提交窗口的屏幕截图。Subversion 目录就在窗口的顶部。

![在此处输入图像描述](../Images/39e9423c4778ee2bb2e94a077d9ace52.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:42:30.853

看起来像`Properties > SVN`信息。我没有这件事，而是在`team`菜单中寻找一些东西。如果有一种方法可以查看项目旁边的完整存储库路径，我将保留这个问题。

# c# - C# 中字符串的 Lightswitch NullReferenceException

> ID：12478099
> 
> 赞同：2
> 
> 时间：2012-09-18T13:32:41.623
> 
> 标签：c#, nullreferenceexception, visual-studio-lightswitch

我确信这是一个基本无知的情况，但我正在尝试使用 Lightswitch 项目中的代码测试数据库值。

我正在检查 varchar(MAX) 值是否为空

```
if (Order.OrderNotes.Equals(null))
{
     do.something...
} 
```

但是，如果值为 null，我会得到 NullReferenceException。如果有一个值，我不会收到任何错误。我试过使用 .contains(null), .Length = 0, .ToString() = "" 等但没有运气。似乎整数和日期使用 Equals(null) 可以正常工作，但对于字符串来说似乎不是。

帮助！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T13:33:44.040

假设您从`Order != null`@DeeMac 指出的详细信息屏幕中调用它。您可以检查`Order`没有`null`使用以下相同的代码：

```
if (Order.OrderNotes == null) 
{
    // do.something...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T13:34:47.563

如果 OrderNotes 为 null，则不能使用该实例调用任何方法、属性或任何内容

你应该打电话

```
if (Order.OrderNotes == null) 
```

当然我假设 var Order 本身不是空的，如果你想绝对确定你可以用这种方式改变你的测试

```
if (Order != null && Order.OrderNotes == null) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T00:39:24.090

在 LightSwitch 中，要测试可空属性是否有值，您可以使用*HasValue*，因此：

“如果 Order.OrderNotes.HasValue”

如果您想要该值（如果有的话），或者属性类型的默认值，您可以使用*GetValueOrDefault*：

“var 值 = Order.OrderNotes.GetValueOrDefault”

我完全同意 Steve 的观点，即在尝试从对象的任何属性中获取值之前，您应该对对象（例如 Order）进行空值检查。

# sql - DoCmd.OutputTo + 使用 SQL 命令 + VBA

> ID：12478102
> 
> 赞同：3
> 
> 时间：2012-09-18T13:32:51.293
> 
> 标签：sql, vba, ms-access

大家好，我在网上做了一些研究，但我找不到解决方案，希望这里有人可以提供帮助。我的做法是将 sql 语句放入 DoCmd.OutputTo

例如

```
 Set tempSql= CurrentDb.OpenRecordset("SELECT * FROM SpecialEvent WHERE [HG_ID] = " & HG_ID & ";")

      DoCmd.OutputTo acOutputQuery, "tempSql", acFormatXLS, strDir + "try.xls", 0 
```

如果有人可以指导我建立这种方法，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T13:58:12.470

您可以将查询的 sql 设置为输出 sql，并在 DoCmd.OutputTo 中使用查询名称

```
tempSql= "SELECT * FROM SpecialEvent WHERE [HG_ID] = " & HG_ID

If IsNull(DLookup("name", "msysobjects", "name='query1'")) Then
    CurrentDb.CreateQueryDef "Query1", tempSql 
Else
    CurrentDB.QueryDefs("Query1").SQL = TempSQL
End If

DoCmd.OutputTo acOutputQuery, "Query1", acFormatXLS, strDir & "try.xls", 0 
```

请注意，连接符在 VBA 中是 &，而不是 +

加号可用于连接，但需要非常小心，因为它与空值一起使用。

# javascript - 隐藏以前的 HTML 桌面通知

> ID：12478104
> 
> 赞同：3
> 
> 时间：2012-09-18T13:32:56.053
> 
> 标签：javascript, html, html5-notifications, webkit-notifications

我目前正在使用以下代码为我的控制台生成 HTML5 桌面通知。

```
<script type="text/javascript">
$(document).ready(function() {
    $('#show_button').click(function(e) {
          e.preventDefault();
          window.webkitNotifications.requestPermission();
        }); 
    if (window.webkitNotifications.checkPermission() == 0) {
        notification = window.webkitNotifications.createNotification('favicon.ico', 'New orders!', 'You have new orders.');
        notification.show();
        setTimeout(function() {
            notification.cancel();
        }, '5000');
    }
   });
</script> 
```

通知会在 5 秒后再次出现和消失，但是如果我在 5 秒结束之前单击新页面或关闭窗口，则通知不会关闭。由于页面设置为每 5 分钟刷新一次，这可能会导致出现许多通知，然后需要手动关闭每个通知。

如果有任何先前的通知在等待并关闭它们，或者确保即使窗口关闭，通知也会消失，是否有一种方法可以检查 Javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:56:46.740

根据：[可靠地关闭 Webkit 通知](https://stackoverflow.com/questions/11267285/reliably-dismissing-webkit-notifications)

> 使用 window.onunload 或 window.onbeforeunload 处理程序在页面关闭时清除通知。但是，这不会保留三秒延迟，因为当页面关闭时通知将立即关闭。
> 
> 另一种选择（确实保留三秒延迟）是使用 createHTMLNotification(url) 从 HTML 页面创建通知。通过在通知 HTML 文档中包含类似 setTimeout(window.close, 3000) 的脚本，让通知页面自行关闭。在这种情况下，显然不需要在主页中调用 setTimeout，因为它已经包含在通知中。

此代码有效：但是，在 Chrome 上，它仅在更改或关闭页面时有效，似乎在刷新时无效。这是[Chromium wiki](https://code.google.com/p/chromium/issues/detail?id=40262)中记录的错误，所以我认为这将很快得到修复......

```
$(window).on('beforeunload', function() {
  notification.cancel();
}); 
```

# c# - 使用 --enable-trace-jscalls 构建 Spidermonkey dotnet

> ID：12478106
> 
> 赞同：1
> 
> 时间：2012-09-18T13:32:59.313
> 
> 标签：c#, javascript, spidermonkey

我有一个关于spidermonkey dotnet的问题 - [http://spidermonkeydotnet.codeplex.com/](http://spidermonkeydotnet.codeplex.com/)

Spidermonkey dotnet 是 Spidermonkey (JavaScript Engine - Mozilla) 和 C# 之间的包装器...我想使用`JS_SetFunctionCallback`来自 Spidermonkey 的程序将我的程序用作 JavaScript 的分析器...

我已经在我的 Windows 7 Notebook 上使用`--enable-trace-jscalls`. 我的问题是无法在 Spidermonkey dotnet 中实现它。

在 VS2010 中它说：

> “找不到标识符！”

我已经在 Spidermonkey dotnet 中包含了标题，但我遇到了同样的问题。

# ruby-on-rails - ruby on rails 教程入门时出现注释错误

> ID：12478112
> 
> 赞同：0
> 
> 时间：2012-09-18T13:33:19.063
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在使用官方网站上的入门教程学习 ruby​​ on rails。[http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)

我唯一改变的是post url映射指向/post/friendly-url而不是/post/id

在我尝试向帖子添加评论之前，一切都很顺利，我收到以下错误。

## CommentsController#create 中的 NoMethodError

```
undefined method `comments' for nil:NilClass
app/controllers/comments_controller.rb:7:in `create' 
```

这是我的代码。

## /app/controllers/comments_controller.rb

```
class CommentsController < ApplicationController
    def create
        @post = Post.find_by_friendly(params[:id])
        @comment = @post.comments.create(params[:comment])
        redirect_to post_path(@post)
    end

    def destroy
        @post = Post.find_by_friendly(params[:id])
        @comment = @post.comments.find(params[:id])
        @comment.destroy
        redirect_to post_path(@post)
    end
end 
```

## /app/models/comment.rb

```
class Comment < ActiveRecord::Base
    belongs_to :post

    attr_accessible :body, :commenter

    validates :body,  :presence => true
    validates :commenter,  :presence => true
end 
```

## /app/views/comments/_form.html.erb

```
<%= form_for([@post, @post.comments.build]) do |f| %>

<%= f.label :commenter, "Your Name:" %>
    <%= f.text_field :commenter, :placeholder => "Your Name..." %>
<span class="help-block">What would you like to be called.</span><br/>

<%= f.label :body, "Your Comment:" %>
    <%= f.text_area :body, :size => "60x12", :placeholder => "Your Comment..." %>
<span class="help-block">What's on your mind?</span><br/>

    <%= f.submit %>

<% end %> 
```

## /app/views/posts/_form.html.erb

```
<% @post.tags.build %>
<%= form_for(@post) do |post_form| %>
<legend>Post Form</legend>
<% if @post.errors.any? %>
    <div id="error_explanation">
        <h2 class="text-error"><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>
        <ul>
            <% @post.errors.full_messages.each do |msg| %>
                <li class="text-error"><%= msg %></li>
            <% end %>
        </ul>
    </div>
<% end %>

<%= post_form.label :name, "Post Name:" %>
    <%= post_form.text_field :name, :placeholder => "Post Name..." %>
<span class="help-block">The title of the article.</span><br/>

<%= post_form.label :friendly, "Friendly URL:" %>
    <%= post_form.text_field :friendly, :placeholder => "Friendly URL..." %>
<span class="help-block">SEO friendly URL displayed as /posts/post-name.</span><br/>

<%= post_form.label :content, "Post Content:" %>
<%= post_form.text_area :content, :size => "60x12", :placeholder => "Main Content..." %>
<span class="help-block">HTML enabled article content.</span><br/>

<%= post_form.label :excerpt, "Post Excerpt:" %>
    <%= post_form.text_area :excerpt, :placeholder => "Post Excerpt..." %>
<span class="help-block">Description of post for index page. No HTML.</span><br/>

<h2>Tags</h2>
<%= render :partial => 'tags/form',
    :locals => {:form => post_form} %><br/>

    <%= post_form.submit %>

<% end %> 
```

## /config/routes.rb

```
Nullpulse::Application.routes.draw do
    resources :posts do
        resources :comments
    end

    root :to => "home#index"
end 
```

## /apps/models/post.rb

```
class Post < ActiveRecord::Base
    attr_accessible :content, :friendly, :name, :excerpt, :tags_attributes

    validates :name,  :presence => true
    validates :content, :presence => true
    validates :friendly, :presence => true
    validates :excerpt, :presence => true
    validates_format_of :friendly, :with => /^[^ ]+$/

    has_many :comments, :dependent => :destroy
    has_many :tags

    accepts_nested_attributes_for :tags, :allow_destroy => :true,
        :reject_if => proc { |attrs| attrs.all? { |k, v| v.blank? } }

    def to_param
        friendly
    end
end 
```

对不起，如果信息太多，如果我遗漏了什么，请告诉我。我一直在尝试一切，但找不到问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:54:07.400

问题是你的`@post`in`CommentController#create`是`nil`. 这意味着，`params[:id]`您提供的内容要么不正确，要么在您的数据库中找不到。我建议检查日志以查看`params[:id]`包含的内容，并查看是否符合`find_by_friendly`预期。

如果`params[:id]`看起来正确，我会使用 rails 控制台尝试`Posts.find_by_friendly`并传递一些值以查看是否适合您。

如果`params[:id]`值看起来不正确，那么您的`form_for()`调用`comments/_form.html.erb`可能是错误的，请查看友好插件的文档以了解如何进行正确调用。

# java - 在 Apache Geronimo 中安装 Oracle jdbc 驱动程序

> ID：12478114
> 
> 赞同：1
> 
> 时间：2012-09-18T13:33:29.657
> 
> 标签：java, oracle, jdbc, osgi, geronimo

我尝试将 Oracle JDBC 驱动程序安装到 Apache Geronimo，但没有成功。我正在使用**ojdbc6.jar**。

我将它复制到存储库文件夹并尝试首先使用 Geronimo 的管理控制台设置一个 Oracle XA 池，但没有成功。它抱怨驱动程序缺少 OracleDataSource 的 ClassNotFoundException。

然后我尝试设置一个常规的 Jdbc 驱动程序（oracle 瘦）。我写了 user/pass/sid 等，并成功地对数据库进行了 ping 操作。然后当我保存这个连接池时，它再次抱怨 ClassNotFoundException，这次是*oracle.jdbc.driver.OracleDriver*。

我能错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T01:56:41.690

[http://oss.org.cn/ossdocs/geronimo/development-deployment/database.html](http://oss.org.cn/ossdocs/geronimo/development-deployment/database.html) - 第 6.1 节。JDBC Drivers - 有一个 oracle 驱动程序的示例。

# actionscript-3 - FlashDevelop actionscript 3 代码维护 - 重复类名

> ID：12478115
> 
> 赞同：0
> 
> 时间：2012-09-18T13:33:38.410
> 
> 标签：actionscript-3, flashdevelop, maintenance

我使用 FlashDevelop - 我正在编写 ActionScript 3 中的代码。我开始为 Ludum 敢于从事一个 72 小时的项目，然后决定以新的角度重新开始相同的想法。所以我将文件夹命名为 - GameName2 。.

我总是对我在 ActionScript 3 中处理的事情使用相同的“项目”，因为我在该项目中的代码对我的游戏创意很有用。例如一个基本的控制器类。现在在新游戏中，我想再次从那个控制器类继承，但是我担心因为我为新类选择的名称与我在这个游戏的第一个版本中使用的名称重复，这会导致未来的困难和困惑..

我想知道是否有任何方法可以使用命名空间或其他任何东西，所以我可以在不同的包中拥有同名的类，并在我为特定游戏导入包时避免混淆..

马上：

我有：

```
gamename.controller.GameNameController 
```

和

```
gamename2.controller.GameNameController 
```

有什么方法可以让事情变得更简单和干净吗？谢谢

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:07:03.273

您可以使用[此处](http://help.adobe.com/en_US/as3/dev/WSd75bf4610ec9e22f43855da312214da1d8f-8000.html)`application domain`记录的文档来解决此问题，我还建议您为自己的框架代码创建一个库 SWC，这样您就可以导入一个 SWC 以供重用。

FlashDevelop 站点引用了一个第三方插件，可帮助您从 FlashDevelop[导出 SWC](http://www.flashdevelop.org/wikidocs/index.php?title=3rd_Party_Plugins_FD4)。

# php - 将带有ajax的数组传递给php文件

> ID：12478117
> 
> 赞同：2
> 
> 时间：2012-09-18T13:33:41.167
> 
> 标签：php, javascript, jquery, ajax

我有一个带有文本框的表单。例如，如果我在该文本框中输入数字 3，则会出现我用 Javascript 制作的 3 个文本框。像这样：

这是html代码：

```
<span>Cate intrebari va contine chestionarul?</span>
        <input type='text' id='nrintrebari'/>
    </td>
    <td>
    <input type='button'  value='Creaza intrebari' onclick='generate()'/>
    <input type='button' value='Save'  id='btn_intrebari'/> 
    </td>
</tr>
</table>

<br><br>

<div id='sim'>

</div> 
```

这是创建文本框的 javascript 代码：

```
var a=0;

function generate()
{
  var tot = document.getElementById("nrintrebari").value;
var tbl = document.getElementById("sim");

for(var i =1;i<=tot;i++)
{
  a++;
  tbl.innerHTML  = tbl.innerHTML  +'Intrebare nr.'+ a +' <input type="text"  size="100" maxlength= "200" name="intrebare[]" style="height:30px; background-color:#B8B8B8; " > <br><br><br> ';
}

} 
```

如果我想将文本框中的数据传递给 php 文件，我会像这样执行 foreach：

```
 foreach($_POST['intrebare'] AS $textbox)
{   
    $sql="INSERT INTO intrebari values ('','".$_SESSION['cod']."','$textbox','1')";

    if (!mysql_query($sql))
      {
        die('Error: ' . mysql_error());
      }

} 
```

一切都很好，但这是通过刷新页面完成的。我想在不刷新页面的情况下执行此操作，因此我决定使用 Ajax。像这样：

```
$(document).ready(function () {
    $('#btn').click(function () {
        $.ajax({
            type: "POST",
            url: 'pag1.php',
            data: "intrebare[]=" + $('#intrebare[]').val(),
            success: function (data) {
                $('#status').html(data);
            }
        });
    });
}); 
```

我正在使用我在 Javascript 代码中命名并声明为数组的文本框的名称：intrebare[] 但是当我点击按钮时没有任何反应。如果我将文本框声明为简单，而不是像 intrebare 那样的数组，则传递该值。如何像数组一样通过 Ajax 发送数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:51:59.133

您不能将名称用作“#whatevername”，为此请使用控件的 ID。并且鉴于您不能拥有具有相同 ID 的控件（我们可以，但不推荐），您可以为所有文本框提供一个类并从所有控件中获取所有值。

```
var a = 0;
function generate() {
var tot = $("#nrintrebari").val();
var tbl = $("#sim");    
for (var i = 1; i <= tot; i++) {
    a++;
    tbl.append('Intrebare nr.' + a + '<input type="text" size="100" maxlength= "200" class="intrebare" style="height:30px; background-color:#B8B8B8; " >');
}   
} 
```

这也不是在表格/ div 中附加控件、文本的完美方法。但它可以以某种方式帮助你。

获取这样的值。

```
var values = [];
$(".interbare").each(function () {
values.push($(this).val());
}); 
```

现在您可以将值数组作为字符串 (values.join(',')) 或作为数组传递给任何页面或服务。

希望这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:46:21.510

```
<form method="POST" id="textvalues">
<span>Cate intrebari va contine chestionarul?</span>
    <input type='text' id='nrintrebari'/>
</td>
<td>
<input type='button'  value='Creaza intrebari' onclick='generate()'/>
<input type='button' value='Save'  id='btn_intrebari'/> 
</td>
</tr>
</table>

<br><br>

<div id='sim'>

</div>
</form>

$(document).ready(function () {
    $('#btn').click(function () {
        $.ajax({
            type: "POST",
            url: 'pag1.php',
            data: "intrebare[]=" + $('#intrebare[]').val(),
            success: function (data) {
                $('#status').html(data);
            }
        });
    });
}); 
```

您也可以通过这种方式将值发送到您的 php 页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T13:38:32.713

不要使用“intrebare [] ...

你只能使用“intrebare”

另一种方法是 var str = $("form").serialize(); 如果您想使用表单，它将从表单中获取值。

# php - Mysql & PHP : 在不同的 mysql 表中搜索

> ID：12478120
> 
> 赞同：1
> 
> 时间：2012-09-18T13:33:47.080
> 
> 标签：php, mysql

我从用户那里得到输入，检查数据库中的值，如果正确，然后做一些操作，比如

```
 $getuser_key = $_POST['keyy'];

    $sql = "SELECT *  from demo_participant WHERE meeting_id_id IN(SELECT id FROM demo_meeting WHERE meetingID = '$get_meetingid') and `key` = '$get_meetinkey'";
    mysql_real_escape_string($sql);
    $result = mysql_query($sql) or die (mysql_error());
    while ($row = mysql_fetch_array($result)) {

          somthing 

           } 
```

我可以使用联合运算符吗？

现在我想如果上面的查询失败然后`$getuser_key`在另一个表中 搜索

我只是想知道是否有可能以这种方式进行，那么如何呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:40:55.550

`JOIN`他们：

```
 SELECT *  
 from demo_participant dp
 INNER JOIN demo_meeting dm ON dp.meetingID = dm.meetingID 
        AND dm.Key = '$get_meetinkey'
 INNER JOIN demo_thirdTable dt ON -- Somecondition here
 WHERE dp.key = '$get_meetinkey' 
```

# php - 如何在 PHP >= 5.4 中的特征中重载类构造函数

> ID：12478124
> 
> 赞同：73
> 
> 时间：2012-09-18T13:34:16.473
> 
> 标签：php, traits

在 PHP 5 中，我可以重载构造函数（和任何其他方法）。但是，如果我得到这样的代码：

```
class Base {

    public function __construct($a, $b) {
        echo $a+$b;
    }

    public function sayHello() {
        echo 'Hello ';
    }
}

trait SayWorld {

    public function __construct($a, $b, $c = 0) {
        echo (int)$c * ($a+$b);
    }

    public function sayHello($a = null) {
        parent::sayHello();
        echo 'World!'.$a;
    }
}

class MyHelloWorld extends Base {
    use SayWorld;
}

$o = new MyHelloWorld(2, 3);
$o->sayHello(1); 
```

我有一个错误：

> 致命错误：MyHelloWorld 具有来自特征的冲突构造函数定义

我该如何解决？[你可以在这里](http://sandbox.onlinephpfunctions.com/code/2c61c8c1a0a829283d8f6afaecfaa08228c169cc)测试我的代码。

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-09-25T13:05:15.903

我认为现在做你想做的唯一方法是：

```
class MyHelloWorld extends Base {

    use SayWorld {
        SayWorld::__construct as private __swConstruct;
    }

    public function __construct($a, $b, $c = 0)
    {
        $this->__swConstruct($a, $b, $c);
    }
} 
```

**编辑2：**

基于一年多来处理 PHP 中的特征，我的建议是：完全**避免在特征中编写构造函数**，或者如果必须 - 至少使它们无参数。将它们放在特征中违背了一般构造函数的想法，即：*构造函数应该特定于它们所属的类*。其他进化的高级语言甚至不支持隐式构造函数继承。这是因为构造函数与类的关系比其他方法强得多。事实上，它们之间的关系如此之强，以至于连[LSP](http://en.wikipedia.org/wiki/Liskov_substitution_principle)都不适用于它们。Scala 语言中的特征（Java 的一个非常成熟且对[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)友好的继承者），[不能有带参数的构造函数](http://joelabrahamsson.com/learning-scala-part-seven-traits/#more-about-traits)。

**编辑1：**

PHP 5.4.11 中有一个[错误](https://bugs.php.net/bug.php?id=64235)，它实际上允许为超类方法设置别名。但是 PHP 开发人员认为这是一个禁忌，所以我们仍然坚持我上面介绍的那个繁琐的解决方案。但是那个错误引发了关于可以用它做什么的讨论，我希望它会在未来的版本中成为目标。

与此同时，我一遍又一遍地遇到同样的问题。我的愤怒随着 docblock 的参数和行数的增加而呈指数级增长，这些参数和行数必须重复很多次才能使用该特性。所以我想出了以下模式，以尽可能地遵守 DRY 规则：

而不是像这样重复整个参数集：

```
trait SayWorld {

    /**
     * This is a valid docblock.
     *
     * @param int $a Doc comment.
     * @param int $b Doc comment.
     */
    public function __construct($a, $b) {
        echo (int)$c * ($a+$b);
    }
}

class MyHelloWorld extends Base {

    use SayWorld {
        SayWorld::__construct as private __swConstruct;
    }

    /**
     * Repeated and unnecessary docblock.
     *
     * @param int $a Doc comment.
     * @param int $b Doc comment.
     * @param int $c Doc comment.
     */
    public function __construct($a, $b, $c = 0)
    {
        $this->__swConstruct($a, $b);
    }
} 
```

我编写了一个类似于*元组的类（* [C#](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)和[Python](http://www.diveintopython.net/native_data_types/tuples.html)用户熟悉的概念），并使用它来代替无穷无尽的参数列表：

```
class SayWorldConstructTuple
{
    public $a;

    public $b;

    public function __construct($a, $b)
    {
        $this->a = $a;
        $this->b = $b;
    }
}

class MyHelloWorld extends Base {

    use SayWorld {
        SayWorld::__construct as private __swConstruct;
    }

    /**
     * New and valid docblock.
     *
     * @param SayWorldConstructTuple $Tuple
     * @param int $c Additional parameter.
     */
    public function __construct(SayWorldConstructTuple $Tuple, $c = 0)
    {
        $this->__swConstruct($Tuple->a, $Tuple->b);
        $this->c = $c;
    }
} 
```

注意：这种模式当然更适用于更多元组的构造函数参数，以及更多使用元组的类。

它可以通过使用 PHP 的动态特性进一步自动化。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-18T13:39:36.080

尝试：

```
use SayWorld {
  Base::__construct insteadof SayWorld;
} 
```

参考：[PHP 文档](http://uk.php.net/manual/en/language.oop5.traits.php#language.oop5.traits.conflict)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-22T19:48:00.970

旧帖子，但万一这对任何人都有帮助：

我有类似的情况，但决定使用稍微不同的方法。我正在编写一个 WordPress 插件，想传递插件信息（版本、名称、文本域等），但不想在重构或扩展另一个类时更改每个文件，所以我用构造函数创建了一个 trait它只是为特定于类的操作调用一个 init 函数。

```
trait HasPluginInfoTrait{
    public function __construct() { 

        $this->plugin_name        = PLUGIN_NAME;
        $this->version            = PLUGIN_VERSION;

        if ( method_exists( $this, 'init' ){
            $this->init();
        }
    }
}

class SampleClass {
    use HasPluginInfoTrait;

    private function init(){
        // Code specific to SampleClass
    }
} 
```

# .net - WiX 3.6 Bundle 在安装了链接的 .net4 后显示在添加删除程序中，但用户取消了

> ID：12478125
> 
> 赞同：2
> 
> 时间：2012-09-18T13:34:17.267
> 
> 标签：.net, wix, windows-installer, wix3.6

使用 WiX 3.6，我有一个自定义的 .NET BootstrapperApplication，其中我在链中包含了 .Net 4.0 Web 安装程序：

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">
  <Bundle Name="$(var.BundleProductName)"
      Version="$(var.BundleVersion)"
...
      Compressed="yes" DisableRepair="yes" >

    <BootstrapperApplicationRef Id="ManagedBootstrapperApplicationHost" >
      <PayloadGroupRef Id="MyInstallerUILibs" />
    </BootstrapperApplicationRef>

    <Chain>
      <!-- Install .Net 4 Full -->
      <PackageGroupRef Id="NetFx40Web" />

      <!-- Install my packages -->
      <PackageGroupRef Id="MyPackages" />

    </Chain>
  </Bundle>
</Wix> 
```

当我在未安装 .net 4 的机器上运行安装程序时，它会提示用户按预期下载并正确安装 .net 4.0，然后再显示我的自定义 UI。到目前为止，一切都很好。

在我的 UI 中，我想在我们安装任何其他软件包之前为用户提供取消/退出安装的选项。例如，如果用户不同意我们的 EULA。

**我看到的是这样**的：如果 .net 4.0 安装运行并完成，那么在我的 BootstrapperApplication 中，我在执行任何计划/应用操作之前退出，该包仍然显示在 Windows 添加/删除程序菜单中。我试过打电话`Engine.Quit((int) ActionResult.NotExecuted)`and `Engine.Quit((int) ActionResult.UserExit)`，但似乎都没有把它排除在 ARP 列表之外。

注意：如预期的那样，.net 4 安装也显示在 APR 列表中。

**我的问题是：** 向 WiX 引擎发出捆绑安装已停止并且捆绑本身不应显示在“添加/删除程序”列表中的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:23:32.610

Burn 在链开始后立即在 ARP 中注册，因此用户可以，例如，重新安装中途失败的链，而不会导致整个链失败。CLR 安装为来自 pre-req BA 的捆绑包链的一部分（因为在安装 CLR 之前您的 BA 无法加载）。

# html - 永久 2x3 CSS 图片库

> ID：12478126
> 
> 赞同：1
> 
> 时间：2012-09-18T13:34:22.790
> 
> 标签：html, css

我有非常基本的图片库如何将其固定为 3 列 x 2 行

这是 HTML 代码

```
<div id="gallery">
        <div class="img">
            <a target="_blank" href="klematis_big.htm"> <img src="../zeela/img/image_1.png" alt="Klematis"/> </a>
            <div class="descHead">
                כותרת
            </div>
            <div class="desc">
                Add a description of the image here
            </div>
        </div>
        <div class="img">
            <a target="_blank" href="klematis2_big.htm"> <img src="../zeela/img/image_1.png" alt="Klematis" /> </a>
            <div class="descHead">
                כותרת
            </div>
            <div class="desc">
                Add a description of the image here
            </div>
        </div>
        <div class="img">
            <a target="_blank" href="klematis3_big.htm"> <img src="../zeela/img/image_1.png" alt="Klematis" /> </a>
            <div class="descHead">
                כותרת
            </div>
            <div class="desc">
                Add a description of the image here
            </div>
        </div>
        <div class="img">
            <a target="_blank" href="klematis4_big.htm"> <img src="../zeela/img/image_1.png" alt="Klematis" /> </a>
            <div class="descHead">
                כותרת
            </div>

            <div class="desc">
                Add a description of the image here
            </div>

        </div>
        <div class="img">
            <a target="_blank" href="klematis4_big.htm"> <img src="../zeela/img/image_1.png" alt="Klematis"  /> </a>
            <div class="descHead">
                כותרת
            </div>
            <div class="desc">
                Add a description of the image here
            </div>

        </div>
        <div class="img">
            <a target="_blank" href="klematis4_big.htm"> <img src="../zeela/img/image_1.png" alt="Klematis" /> </a>
            <div class="descHead">
                כותרת
            </div>
            <div class="desc">
                Add a description of the image here
            </div>

        </div>

    </div> 
```

这是CSS代码

```
＃画廊{

}
div.img {
    边距：2px；
    高度：自动；
    宽度：自动；
    浮动：对；
}
div.img img {
    宽度：200px；/* img 的大小是多少*/
    高度：200px；
    显示：内联；
    左边距：30px；
    右边距：30px；
    边距底部：20px；
    边框：1px 实心#ffffff；
}

/*
 div.img a:hover img {
 边框：1px 实心#0000ff；
 }*/
div.desc {
    文本对齐：居中；
    字体粗细：正常；
    宽度：120px；
    边距：30px；
}
.descHead {
    右边距：30px；
    边距顶部：20px；
    底部边距：15px；
    字体系列：Tahoma；
    字体大小：24px；
    颜色：#323232；
}

.desc {
    margin-right: 30px !important;
    margin-bottom: 40px !important;
    字体系列：Tahoma；
    字体大小：14px；
    颜色：#323232；
}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:28:16.727

如果您无法更改 HTML，则可以这样做：

```
.gallery {
    width: /* ((width of .image including padding/margin) * 3) */
    overflow: hidden;
    margin: /* top: 0, right: 0, bottom: -(size of .image's bottom margin), left: -(size of .image's left margin) */
    /*
    yes, that's right, the left/bottom margins are negative, but it's purely presentational
    for left floated .image, replace right with left
    */
} 
```

否则，使用 CSS 显示属性将起作用。

还应该指出，节/标题/段落标签可能比无意义的`div`标签更合适。或者， figure/figcaption 集合也可能是合适的：

[http://html5doctor.com/the-figure-figcaption-elements/](http://html5doctor.com/the-figure-figcaption-elements/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:40:17.640

我会考虑使用 CSS display:table：[http ://www.w3schools.com/cssref/pr_class_display.asp](http://www.w3schools.com/cssref/pr_class_display.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-25T09:55:59.267

## CSS：网格

我更喜欢使用`grid`它来创建可靠的代码。

### 尝试这个

```
.grid-container {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  grid-template-rows: 1fr 1fr;
  gap: 0px 0px;
  grid-template-areas:
    "img1_1 img1_2 img1_3"
    "img2_1 img2_2 img2_3";
}

.img{
  border: 1px solid #000;
  text-align: center;
}

.img1_1 { grid-area: img1_1; }

.img1_2 { grid-area: img1_2; }

.img1_3 { grid-area: img1_3; }

.img2_1 { grid-area: img2_1; }

.img2_2 { grid-area: img2_2; }

.img2_3 { grid-area: img2_3; }
```

```
<div class="grid-container">
  <div class="img img1_1"> img1_1</div>
  <div class="img img1_2"> img1_2</div>
  <div class="img img1_3"> img1_3</div>
  <div class="img img2_1"> img2_1</div>
  <div class="img img2_2"> img2_2</div>
  <div class="img img2_3"> img2_3</div>
</div>
```

# qt - 如何使用 QNetworkAccessManager 从站点下载文件而不需要任何身份验证

> ID：12478128
> 
> 赞同：1
> 
> 时间：2012-09-18T13:34:25.787
> 
> 标签：qt, network-programming, http-headers, httpcookie, setcookie

如果用户已经登录到站点，如何在不需要任何身份验证的情况下从站点下载文件？我们是否应该传递 cookie。怎么做？我正在使用Firefox浏览器。确切的场景是这样的。有一个需要身份验证的站点。我希望在用户通过浏览器登录站点后，我希望我的代码应该从 flashgot 插件提供的 cookie 字符串中获取该 cookie，并使用该 cookie 向门户发送一个获取请求，这样就不需要身份验证。我试过这个：我通过一个字符串传递cookie，

```
 cookie=rPopHome=1; FF_JoinPromo=true; __utma=140252452.845088738.1348089486.1348089486.1348089486.1; __utmb=140252452.6.10.1348089486; __utmc=140252452; __utmz=140252452.1348089486.1.1.utmcsr=adf.ly|utmccn=(referral)|utmcmd=referral|utmcct=/7hYuB; ff_membership=SlyL0JODTZMIdfYHy/7imBJHqyHhO9ZHNE4bwnFPzoGYgPVEEneUMsfqaFDsqR+w9EotIx9i7PPL7ZIp1CiUSOtx0Y4mE1GmxayYmnJVD/z5aCTS2qT7fTItiqOprW8rlsEYw2Br7OoETaF3L1RGRQai1zlFQw6QO9qBEPKXC7rOx5LuEEKYlrZFKvuD/m7uDc6SWDJyaW67sRfo/bpb/Q==; ff_referrer_hash=o7e2qf0;

request.setUrl(url);
request.setAttribute(QNetworkRequest::HttpPipeliningAllowedAttribute, true);
cookieJar->setCookiesFromUrl(QNetworkCookie::parseCookies(cookie),url.host());
manager.setCookieJar(cookieJar);
reply=manager.get(request); 
```

但我收到以下错误，下载的文件包含此消息：

```
<h1>HTTP/1.0 401 Unauthorized</h1>
     <p>You have attempted to download via a Premium download link, but we could not verify your Premium account details.</p>
     <p></h1> 
```

我也更改了用户代理，它仍然失败：

```
request.setRawHeader("User-Agent", "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:15.0) Gecko/20100101 Firefox/15.0.1"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:22:06.093

我会将*[QWebView](http://doc.qt.digia.com/latest/qwebview.html)*嵌入到 UI 中，然后一旦用户通过此浏览器登录，您就可以访问页面配置为发送请求的*QNetworkAccessManager 。*

```
QNetworkAccessManager* getNetMan(const QWebView* view)
{ return view->page()->networkAccessManager(); } 
```

这应该正确配置了 cookie jar，您可能还需要设置 HTTP *Referrer*标头，以便此类系统能够完全欺骗请求。

如果这不起作用，请使用[Wireshark](http://www.wireshark.org/)比较来自浏览器和您的应用程序的请求，并调整您的程序，直到您的请求匹配。

# ruby - 编写接受命令行输入的测试

> ID：12478133
> 
> 赞同：0
> 
> 时间：2012-09-18T13:34:36.100
> 
> 标签：ruby, unit-testing, rspec, io, rspec2

我对 rspec 相当陌生，想编写测试以`rspec`从`Ruby`. 我该怎么做？另外，解释一下测试。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:46:19.340

通过使用模拟：

```
STDIN.should_receive(:read).and_return("your string") 
```

我也喜欢[这里](https://gist.github.com/631329/d2b1c2728a24cc3cab2d6967bfef17fe89016778)描述的方法。我认为最后一个更适合你的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T16:07:09.130

一般的方法是使此类对象可交换。在您的情况下，`gets`隐式调用 on `$stdin`。因此，您可以创建一个名为“input”的可选参数，该参数默认为`$stdin`并调用 get 。

这是一个简单的计算器示例，它接受一些输入并返回结果。

```
class Calculator
  def initialize input = $stdin
    @input = input
  end

  def process
    eval @input.gets
  end
end 
```

现在你可以运行`puts Calculator.new.process`，输入`1 + 2`，你会看到`3`。

您不需要任何特殊工具来测试它，因为您可以轻松地传递一个 IO 对象并在测试中直接写入它。IO.pipe 是一个不错的选择：

```
describe "Calculator" do
  before do
    reader, @writer = IO.pipe
    @calc = Calculator.new(reader)
  end

  it "can sum up two numbers" do
    @writer.puts "1 + 2"
    result = @calc.process
    result.should eq(3)
  end
end 
```

您也可以使用 StringIO 代替，它不是真正的 IO，并且不需要类似 UNIX 的环境。尽管每次写入时都需要倒带流。

```
require "stringio"

describe "Calculator" do
  before do
    @input = StringIO.new
    @calc = Calculator.new(@input)
  end

  it "can sum up two numbers" do
    @input.puts "1 + 2"
    @input.rewind
    result = @calc.process
    result.should eq(3)
  end
end 
```

这种方法与 stubbing 相比的优势在于不那么脆弱的测试和更好的设计。测试不那么脆弱，因为如果您决定更改实现并使用 getc 而不是获取（一个接一个地读取字符），例如您将不需要更改测试。而且设计更好，因为现在您可以轻松地从不同的来源（例如文件）发出命令`Calculator.new(File.open("calculated_list.txt"))`。或者你可以在测试中使用的假 IO！

# javascript - 查看发生的 Javascript 调用？

> ID：12478141
> 
> 赞同：2
> 
> 时间：2012-09-18T13:34:59.157
> 
> 标签：javascript, debugging, firebug, javascript-debugger

我继承了一个相当大的项目，我正试图找出一个烦人的错误，但对于我的生活，我找不到这个特定操作在哪里被调用和执行。有没有办法在发生 Javascript 调用时查看它们？我可以在 Firebug 中暂停执行，但它总是在 addDomListenerOnce 调用处停止。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T13:37:06.347

你可以添加这一行

```
debugger; 
```

你想在哪里。例如，作为您要检查它是否已执行的函数的第一行。这将停止脚本的执行，您可以检查 firebug 中的所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T13:39:15.923

使用 Opera 的 Dragonfly，您可以选择“中断新脚本的第一个语句”（谢谢，@some）

它是左上角的第五个按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T13:36:44.427

所有现代浏览器都提供调试功能。

例如查看[Chrome 开发者工具调试功能](https://developers.google.com/chrome-developer-tools/docs/scripts)。设置断点并逐行跟踪执行非常容易。当然，你有调用堆栈，所以你可以看到函数是从哪里调用的。

# ruby - 在 ruby 中同步线程

> ID：12478152
> 
> 赞同：1
> 
> 时间：2012-09-18T13:36:10.610
> 
> 标签：ruby, multithreading

我希望多个线程同时触发。

```
10.times do
  Thread.new do
    sleep rand(5)               # Initialize all the stuff
    wait_for_all_other_threads  # Wait for other threads to initialize their stuff
    fire!                       # Go.
  end
end 
```

我将如何实施`wait_for_all_other_threads`，以便他们`fire!`同时进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:37:49.857

使用屏障同步：[http ://rubygems.org/gems/barrier/](http://rubygems.org/gems/barrier/)

对屏障的调用将导致每个线程阻塞，直到所有线程都调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:43:00.803

```
require "thread"

N = 100

qs = (0..1).map { Queue.new }

t = 
  Thread.new(N) do |n|
    n.times { qs[0].pop }
    n.times { qs[1].push "" }
  end

ts = 
  (0..N-1).map do |i|
    Thread.new do
      sleep rand(5)  # Initialize all the stuff
      STDERR.puts "Init: #{i}"
      qs[0].push ""
      qs[1].pop      # Wait for other threads to initialize their stuff
      STDERR.puts "Go: #{i}"      # Go.
    end
  end
[t, *ts].map(&:join) 
```

# ios - 为什么ios componentsseparatebystring 不返回内存？

> ID：12478154
> 
> 赞同：0
> 
> 时间：2012-09-18T13:36:26.847
> 
> 标签：ios, memory-management, foundation

我和我的同事遇到了一个我们正在尝试解决的问题。它与内存分配有关。我们的代码使用循环和 componentsSeperateByString 以字符“\n”分割一个大文档。奇怪的是，这永远不会返回它占用的所有内存。或者至少当我们检查它时没有人可以查看下面的函数代码并告诉我们我们可能做错了什么。

```
- (void)loadTagmeTest:(NSString *)selectedTargetName
{           
    NSString *path = [[NSBundle mainBundle] pathForResource:selectedTargetName ofType:@"tagme"]; 
    NSString *objData = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];

    NSArray *lines1;
    NSArray *lineVertices1;
    NSArray *lineNormals1;
    NSArray *lineTexcoords1;

    lines1 = [objData componentsSeparatedByString:@"\n"];

    // Iterate through file once to discover how many vertices, normals, and faces there are

    lines1 = [self getList:objData separator:@"\n"]; 

    for (NSString * line in lines1)
    {
        if ([line hasPrefix:@"Verts: "])
        {            

            lineVertices1 = [[line substringFromIndex:7] componentsSeparatedByString:@","];
        }
        else if ([line hasPrefix:@"Normals: "]){

            lineNormals1 = [[line substringFromIndex:9] componentsSeparatedByString:@","];
        }
        else if ([line hasPrefix:@"TexCoords: "]){

            lineTexcoords1 = [[line substringFromIndex:11] componentsSeparatedByString:@","];
        }
    }

} 
```

编辑：这不再是一个紧迫的问题，因为我们推出了我们自己版本的解析函数，所以现在代码使用更少的内存，实际上在完成后返回它使用的内存，并且解析速度稍快（整个文档（大约 10,000 行）在大约 100 毫秒内解析并转换为浮点数、放入数组等。

虽然这不是一个紧迫的问题，但我想知道为什么 NSString 的内存分配如此糟糕（至少在我们上面的实现中）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:59:12.313

我还没有找到这个问题的答案，但我已经创建了一个解决方法，这比我需要的要快一些。我使用基本 C 代码和 memcpy 将我的文件解析为我需要绕过在我的设备上发生的 NSString 单独的奇怪操作。

# javascript - 将谷歌地图网址转换为地图 api 标记

> ID：12478158
> 
> 赞同：1
> 
> 时间：2012-09-18T13:36:40.340
> 
> 标签：javascript, google-maps-api-3

我有一个巨大的谷歌地图网址列表，这些网址链接到餐馆的确切位置。

**例子：**

*   [http://maps.google.com/maps?q=gran+bar+dazon&hl=en&ll=-34.560011,-58.40847&spn=0.069836,0.129604&sll=-34.551741,-58.432331&sspn=0.00873,0.016201&doflg=ptk&hq=酒吧+dazon&t=m&z=13&iwloc=A](http://maps.google.com/maps?q=gran+bar+dazon&hl=en&ll=-34.560011,-58.40847&spn=0.069836,0.129604&sll=-34.551741,-58.432331&sspn=0.00873,0.016201&doflg=ptk&hq=gran+bar+dazon&t=m&z=13&iwloc=A)

*   [http://maps.google.com/maps?q=the+library+lounge+buenos+aires&hl=en&ll=-34.602976,-58.361778&spn=0.0349,0.064802&sll=-34.560011,-58.40847&sspn=0.069836,0.129604&doflg= ptk&hq=the+library+lounge&hnear=Buenos+Aires,+Autonomous+City+of+Buenos+Aires,+Argentina&t=m&z=14&iwloc=A](http://maps.google.com/maps?q=the+library+lounge+buenos+aires&hl=en&ll=-34.602976,-58.361778&spn=0.0349,0.064802&sll=-34.560011,-58.40847&sspn=0.069836,0.129604&doflg=ptk&hq=the+library+lounge&hnear=Buenos+Aires,+Autonomous+City+of+Buenos+Aires,+Argentina&t=m&z=14&iwloc=A)

*   [http://maps.google.com/maps?q=isabel+bar+buenos+aires&hl=en&ll=-34.541914,-58.431473&spn=0.139703,0.259209&sll=-34.602976,-58.361778&sspn=0.0349,0.064802&doflg=ptk伊莎贝尔+bar+buenos+aires&radius=15000&t=m&z=12&iwloc=A](http://maps.google.com/maps?q=isabel+bar+buenos+aires&hl=en&ll=-34.541914,-58.431473&spn=0.139703,0.259209&sll=-34.602976,-58.361778&sspn=0.0349,0.064802&doflg=ptk&hq=isabel+bar+buenos+aires&radius=15000&t=m&z=12&iwloc=A)

我正在创建一个网页，它将在一张地图上显示这些餐厅的一个子集。

我遇到的问题是我找不到一种可编写脚本的方法来将这些 url 转换为查询字符串，我可以将这些字符串传递给 Google maps javascript api 来制作标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:44:35.290

url中的`ll`参数是餐厅的纬度和经度。如果您解析 url，您可以获取餐厅的位置并使用此数据在 JS 中创建标记。我使用 RichMarkers 并这样做：

```
var location = new google.maps.LatLng(lat,lo);
var marker = new RichMarker({
                    position: location.getLatLng(),
                    map: me.map,
                    content: 'some content'
                }); 
```

我希望它有用。

# openerp - 如何在 OpenERP 中清零库存？

> ID：12478160
> 
> 赞同：3
> 
> 时间：2012-09-18T13:36:42.760
> 
> 标签：openerp

我有 1500 多种产品和 2000 多个地点。我已经使用产品中的更新库存向导更新了库存，并且我已经处理了一些交货订单和内部移动。现在我想清零库存。我制作了一个脚本来清零库存。问题在于将库存更新为零需要花费太多时间，因为每种产品都可能位于 2000 个位置中的任何位置。是否有任何 OpenERP 函数可以返回产品可用的所有位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T14:57:11.867

## 语境

为了保持数据模型简单 ( [KISS](http://en.wikipedia.org/wiki/KISS_principle) ) 并避免缓存失效问题，OpenERP 不会在每个位置保留当前产品库存的缓存。该信息是通过计算进出每个库存位置的库存交易的复式余额来获得的。这与用于财务会计的复式簿记非常相似。

## 选项 1：使用 API

有几种方法可以使用 OpenERP API 以编程方式获取此信息，方法是查询`stock.move`每个`stock.location`. 对于初学者，您可以查看模块的[`stock.fill.inventory`向导类](http://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/head:/stock/wizard/stock_fill_inventory.py#L56)，`stock`它可以选择用零线填写实物库存。该`product.product`模型还有一个`get_product_available`方法可以为给定的一组产品返回此信息。

然后，您可以创建适当的对应条目以在每个位置实现平衡 0，其方式与标准向导所做`stock.move`的非常相似。`stock.fill.inventory`

## 选项 2：使用直接 SQL 清除

或者，如果您只是想一次性删除整个库存及其历史记录，则有一种快速而肮脏的方法。您可以使用对数据库的直接 SQL 查询（例如使用`psql`命令行工具或 pgadmin）来完成，只需清除`stock_move`和`stock_picking`表。

**不要在具有真实数据的生产数据库上执行此操作！这将清除数据库的一部分**

假设您已经安装了销售管理模块`sale`（

哦，先**做好备份**！

```
从 stock_move 中删除；
从 mrp_production 中删除；
从 stock_picking 中删除；
从销售订单中删除；
从采购订单中删除；

```

# vb6 - 设置光标焦点

> ID：12478162
> 
> 赞同：1
> 
> 时间：2012-09-18T13:36:48.893
> 
> 标签：vb6, focus, cursor, tabindex

我有一个函数。在此函数 (Function1) 中的部分逻辑中，我调用了 Function2(x)

这会将变量 x 传递给这个新函数 (Function2) 并打开一个表单。（示例）

如何将光标设置为加载到特定的文本框中？默认情况下，当表单加载时，光标位于表单的第一个文本框中。

我试过了：

```
frmexample.txtputcursorinthisbox.SetFocus 
```

哪个不起作用，选项卡索引为 31，也许有办法使用此信息来更正光标位置？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:38:52.993

在表单加载事件中，您不能将焦点设置在对象上。尝试在表单激活事件中聚焦对象。

像下面的示例代码：

```
Private Sub Form_Activate()
frmexample.txtputcursorinthisbox.SetFocus
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:02:50.407

如果此控件需要成为 Tab 键顺序中的第一个，请`TabIndex`在所有控件上设置以适合。具有最低`TabIndex`值且可以获得焦点的控件将在表单加载时获得焦点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:04:12.410

我把这个放在错误的地方 - 在我之前（frmexample.show）

```
frmexample.txtputcursorinthisbox.SetFocus 
```

一旦它在正确的位置，它就可以正常工作。

# java - 如何将返回按钮添加到 WebView？

> ID：12478165
> 
> 赞同：0
> 
> 时间：2012-09-18T13:36:53.977
> 
> 标签：java, android

如何使后退按钮返回上一页/链接历史记录而不是关闭应用程序？

这是我的代码：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

 if (keyCode == KeyEvent.KEYCODE_BACK){
  if(WebView.canGoBack()){
   WebView.goBack();
            return true;
  }
 }
 return super.onKeyDown(keyCode, event);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_dsaif);
    runDialog(5);
    WebView engine = (WebView) findViewById(R.id.web_engine);
    engine.loadUrl("http://android.dsaif.tk/store/");
    engine.setWebViewClient( new HelloWebViewClient() );
} 

  private class HelloWebViewClient extends WebViewClient {

      @Override
      public boolean shouldOverrideUrlLoading( WebView view, String url ) {                 

         return false;
      }
  } 
```

抱歉，我对 Android 开发很陌生，对 Java 一无所知。请提供完整代码:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:47:43.143

正如 Kostas 所述，您在 xml 中创建一个按钮，然后在您调用的回调中创建一个按钮`webview.goBack();`

xml:

```
<Button
    android:id="@+id/backBtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Back  /> 
```

活动：

```
Button backButton = (Button) findViewById(R.id.backBtn);
backButton.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        engine.goBack();
    }
}); 
```

**编辑：**

如果有历史记录，这将使手机返回按钮返回历史记录。

```
public class someNameHere extends Activity{
   private WebView engine;

   @Override
   public void onCreate(...){
       ...
       engine = (WebView) findViewById(R.id.web_engine);
       ...
   }
   @Override
   public boolean onKeyDown(...){
      if((keyCode == KeyEvent.KEYCODE_BACK) && engine.canGoBack()){
         engine.goBack();
         return true;
      }
      ...
   } 
```

# actionscript-3 - 将十六进制字符串转换为单精度 ActionScript 3.0

> ID：12478166
> 
> 赞同：2
> 
> 时间：2012-09-18T13:36:58.093
> 
> 标签：actionscript-3, floating-point

我有一个字符串数组，每个字符串代表一个 32 位单精度浮点数，传递到 ActionScript。我需要将这些字符串转换回它们的单精度浮点表示。注意浮点数的范围可以从 -1 到 1

例如。

```
3930D934 = 0.0001686558243818581   
38AD2D39 = 0.00008257706213044003 
```

将字符串转换为任何其他 AS3 数据类型时，我似乎失去了精度。

所有建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T13:55:28.540

您可以使用 ByteArray 类将其转换为 Number 而不会丢失精度：

```
var ba: ByteArray = new ByteArray();
ba.writeUnsignedInt(parseInt("3930D934", 16));
ba.position = 0;
trace(ba.readFloat()); // returns 0.0001686558243818581 
```

# javascript - 设置默认值和选择菜单

> ID：12478173
> 
> 赞同：0
> 
> 时间：2012-09-18T13:37:34.163
> 
> 标签：javascript, jquery, cordova, jquery-mobile

我正在制作一个 jQuery Mobile 和 PhoneGap 应用程序。我正在动态加载选择菜单的选项。我希望第一个选项是我的选择菜单的默认“值”。附加后，我拥有所有选项，但没有一个已被选择。我尝试刷新和设置 value 属性，但它不起作用。这是我的javascript：

```
function customerList(data)
{
  var html ='';
  console.log('Start');
  $.each(data, function(key, value){
    html += '<option value="'+ data[key].id + '">' + data[key].label + '</option>';
    $('#customer').append($(html));
    html='';
  });
  $('#customer').selectmenu();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:40:18.560

环境

```
$('#customer').val("optionValue") 
```

将工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:43:44.317

也适用于*选定*的属性 (selected="selected")。但首先您需要确定每个循环中的默认选项

# objective-c - ParseKit javascript 分析

> ID：12478175
> 
> 赞同：1
> 
> 时间：2012-09-18T13:37:43.213
> 
> 标签：objective-c, parsekit

我想使用 ParseKit 来分析一些 javascript 代码。我使用 javascript 语法设置了框架，但我无法真正了解分析代码的路径。问题是，我最终希望得到一个包含所有全局声明的 var 的数组（所以 var 是在函数外部定义的）。但我真的不明白我怎么能得到这个结果！我在这里阅读了很多关于堆栈溢出的问题，并且可以看到我可能应该使用汇编程序的堆栈和目标，但问题是函数回调在到达函数块结束时被调用，所以所有 var 定义都在之前被回调过。我怎么知道当我在函数内部的 var 上获得回调时，它在内部？

```
var i = 0;
function test(){
   var u = 0;
} 
```

例如，我想在这里找到 i，而不是 u。但是回调是

```
#1  Found var i
#2  Found var u
#3  Found func test 
```

乔纳斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:02:39.793

[ParseKit](http://parsekit.com)的开发者在这里。

首先，[查看另一个与 ParseKit question 相关的答案](https://stackoverflow.com/a/10046316/34934)。那里有很多相关信息（以及那里链接的其他答案）。

然后，对于您的特定示例，关键是在 a`function`开始时设置标志，并在结束时清除标志。因此，每当`var`匹配 decl 时，只需检查标志。如果设置了标志，则忽略 var decl。如果未设置标志，则存储它。

将我提到的标志存储在作为`PKAssembly`汇编程序回调函数参数的对象上是非常重要的。您*不能*将该标志存储为 ivar 或全局 var。那是行不通的（有关详细原因，请参阅先前链接的答案）。

下面是一些用于设置标志和匹配 var decls 的示例回调。他们应该让您了解我在说什么：

```
// matched when function begins
- (void)parser:(PKParser *)p didMatchFunctionKeyword:(PKAssembly *)a {
    [a push:[NSNull null]]; // set a flag
}

// matched when a function ends
- (void)parser:(PKParser *)p didMatchFunctionCloseCurly:(PKAssembly *)a {
    NSArray *discarded = [a objectsAbove:[NSNull null]];
    id obj = [a pop]; // clear the flag
    NSAssert(obj == [NSNull null], @"null should be on the top of the stack");
}

// matched when a var is declared
- (void)parser:(PKParser *)p didMatchVarDecl:(PKAssembly *)a {
    id obj = [a pop];
    if (obj == [NSNull null]) { // check for flag
        [a push:obj]; // we're in a function. put the flag back and bail.
    } else {
        PKToken *fence = [PKToken tokenWithTokenType:PKTokenTypeWord stringValue:@"var" floatValue:0.0];
        NSArray *toks = [a objectsAbove:fence]; // get all the tokens for the var decl
        // now do whatever you want with the var decl tokens here.
    }
} 
```

# java - 构造 ObjectInputStream 时出现 EOFException

> ID：12478176
> 
> 赞同：2
> 
> 时间：2012-09-18T13:37:43.663
> 
> 标签：java, android, jakarta-ee

我正在尝试在服务器端（Tomcat 6.0.29）序列化 HashMap 并在客户端 android 应用程序上取消实现它。

我第一次尝试这个时，我得到了一个 StreamCorruptedException，但是在我用干净的 doGet/doPost-Method 创建了一个全新的 servlet 之后，我设法解决了这个问题，不幸的是，我得到了一个 EOFException。

所以首先我发布我的代码，然后我将详细解释我的问题：

服务器端代码（这将在 doPost 或 doGet 被调用时执行）：

```
 if ("object".equals(request.getParameter("format")))
        {

            trace.log("Before Serializing");
            ObjectOutputStream out = null;
            try
            {
                out = new ObjectOutputStream(response.getOutputStream());
                out.writeObject(outerTable);
                trace.log("after Serializing");
            }
            finally
            {
                if(out != null)
                {
                    try
                    {
                        out.flush();
                        out.close();
                    }
                    catch(Exception ex)
                    {
                        trace.log("Exception has been thrown "+ex.getMessage());
                    }
                }
            }
            trace.log("after closing stream");
        }
        else
        {
            PrintWriter out = response.getWriter();
            out.println(outerTable.toString());
        } 
```

outerTable 是一个 HashMap，它是在此代码块之前创建的，它始终具有正确的值。

服务器端没有抛出错误。当我尝试使用参数“？format = object”访问我的网络浏览器中的servlet时，我得到了整个序列化字符串。

Android-Application的脚本（该方法在按下特定按钮后执行http请求）：

```
 private synchronized void performNetworkAccess()
    {
  Runnable run = new Runnable()
  {
    @Override
    public void run()
    {
    System.out.println("in run()-Method");
    ObjectInputStream objInput = null;
    try
    {
        URL url = new URL(myWebsite);
        URLConnection con = url.openConnection();
        InputStream in = con.getInputStream(); 
        objInput = new ObjectInputStream(in);

        outerTable = (HashMap<String, HashMap<String, Object>>)              objInput.readObject();
        synchronized (monitor)
        {
        monitor.notifyAll();
        }
    }
    catch (Exception ex)
    {
        ex.printStackTrace();
    }
    finally
    {
        if (objInput != null)
        {
        try
        {
            objInput.close();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
        }
    }

    }

};
Thread t1 = new Thread(run);
t1.start();
} 
```

异常在 ObjectInputStream 类的构造函数被调用后立即发生。

堆栈跟踪：

*   W/System.err(1797): java.io.EOFException
*   W/System.err(1797)：在 libcore.io.Streams.readFully(Streams.java:83)
*   W/System.err(1797)：在 java.io.DataInputStream.readShort(DataInputStream.java:169)
*   W/System.err(1797)：在 java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:2102)
*   W/System.err(1797)：在 java.io.ObjectInputStream.(ObjectInputStream.java:372)
*   W/System.err(1797)：在 de.tesla.jtheseuscontactsync.ContactSync$4.run(ContactSync.java:602)
*   W/System.err(1797)：在 java.lang.Thread.run(Thread.java:856)

我已经发现这个问题发生了很多次，但是我没有看到其中一个在调用 readObject() 之前发生了这个错误。

我已经尝试过的事情：

*   在构造 ObjectOutputStream 后不久添加 out.flush()
*   删除 out.flush() 和/或 out.close() 方法
*   用 BufferedInput-/-OutputStream 包装 Input-/OutputStream
*   将流作为文件检索并尝试取消实现该文件

奇怪的是，当我第一次通过 FileOutputStream 将对象写入文件并通过 Url.openStream() 从客户端访问该文件（在服务器上）时，ObjectOutputStream 可以完美地读取该对象，不幸的是，这意味着很多麻烦多个用户试图同时检索此对象...

我希望你能帮我解决这个问题：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T21:55:37.563

servlet 出现了某种异常，甚至还没有构造 ObjectOutputStream。在尝试在客户端构造 ObjectInputStream 之前，您需要检查 200 的响应代码。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-18T13:54:25.737

一些疯狂的想法......尝试在`Content-Length`您的回复中添加标题。可能意味着将您的字节写入 ByteArrayOutputStream，测量大小，设置标题，然后才写入响应......但可能是 URLConnection 过早切断连接的原因......

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ObejctOutputStream oos = new ObejctOutputStream(baos);
oos.write(...);

byte[] data = baos.toByteArray();

response.setHeader("Content-Length", "" + data.length);
response.getOutputStream().write(data); 
```

**Java 序列化**

@Robert 评论是对的。Java 序列化并非旨在用于不同环境之间的通信。如果您在 JVM 和 Dalvik 之间工作，则更多。所以另一个框架会更合适（带有 XML 或 JSON 的东西可能会很好，甚至用 GZip[]Stream 包装它）。

# iphone - 找不到团队签名请求

> ID：12478177
> 
> 赞同：2
> 
> 时间：2012-09-18T13:37:45.787
> 
> 标签：iphone, ios, provisioning

我刚刚向我的团队成员发送了加入“Apple Developer Program”的请求。他批准了我的请求，并获得了开发中心的访问权限。当他上传他的 Mac 的 CSR 时，他得到了他的证书状态**Submitted**。而且我还收到了**证书请求需要您的批准的电子邮件但是当我单击配置门户的链接并进入证书部分时，我在“****团队签名请求 (0)** ”中找不到他的证书。批准他的证书的**签名请求**列表是空的。

如果我错过了这个团队成员创建过程的任何重要部分，请告诉我？仅供参考，该团队成员可能已经加入了其他开发人员计划。

提前致谢！

# asp.net-mvc - 非 Ruby 用户的 Ember.js

> ID：12478182
> 
> 赞同：1
> 
> 时间：2012-09-18T13:38:00.953
> 
> 标签：asp.net-mvc, ember.js

EmberJS 是一个很棒的框架，我对它的概念非常熟悉。然而，所有示例和入门工具包都适用于 Ruby（Rake 等）。

有人在示例中使用 Ember 和 .NET MVC 吗？

**更新**：

这是我发现路由器与 AMD 的一部分的方法。即使是简单的例子也非常复杂：

```
define(['ember'], function (Ember) {
return Ember.Router.extend({
    root:Ember.Route.extend({
        index:Ember.Route.extend({
            route:'/'
        }),
        contributors:Ember.Route.extend({
            route:'/contributors',
            connectOutlets:function (router) {
                var controller = router.get('applicationController');
                require(['app/controllers/contributors', 'app/views/contributors'],
                    function (contributorsController, contributorsView) {
                        controller.connectOutlet({
                            viewClass:contributorsView,
                            controller:contributorsController.create()
                        });
                    });
            }
        })
    })
}); 
```

});

我现在正在重新考虑 AMD 是否是 Ember 的良好解决方案。Tom Dale 提到了[替代方案](http://tomdale.net/2012/01/amd-is-not-the-answer/)，但没有提供示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:42:29.903

我已经做了这个例子，但它仍然缺少很多东西

[https://github.com/MilkyWayJoe/hello-ember-router](https://github.com/MilkyWayJoe/hello-ember-router)

请注意，我在尝试学习但有一段时间没有接触过时这样做了。

# python - python超级调用子方法

> ID：12478186
> 
> 赞同：5
> 
> 时间：2012-09-18T13:38:18.703
> 
> 标签：python, oop, superclass

关于使用的问题有很多，`super()`但似乎没有一个能回答我的问题。

从子类调用`super().__init__()`时，超构造函数中的所有方法调用实际上都是从**子类**中获取的。考虑以下类结构：

```
class A(object):
    def __init__(self):
        print("initializing A")
        self.a()
    def a(self):
        print("A.a()")

class B(A):
    def __init__(self):
        super().__init__()
        # add stuff for B
        self.bnum=3 # required by B.a()        
    def a(self):
        print("B.a(), bnum=%i"%self.bnum)

b=B() 
```

失败了

```
initializing A
Traceback (most recent call last):
  File "classmagic.py", line 17, in 
    b=B()
  File "classmagic.py", line 11, in __init__
    super().__init__()
  File "classmagic.py", line 5, in __init__
    self.a()
  File "classmagic.py", line 15, in a
    print("B.a(), bnum=%i"%self.bnum)
AttributeError: 'B' object has no attribute 'bnum' 
```

这里我调用了超级构造函数`B()`来初始化一些基本结构（其中一些作为自己的函数执行`a()`）。但是，如果我也重写该函数，则在调用' 的构造函数`a()`时使用此实现，该构造函数失败，因为对它一无所知并且可能使用不同的内部变量。`A``A``B`

这可能是直观的，也可能不是直观的，但是当我希望所有方法都`A`只能访问那里实现的功能时，我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T13:42:37.880

如果您的代码*必须*调用无法覆盖的特定私有方法，请使用以下划线开头的名称：

```
class A(object):
    def __init__(self):
        print("initializing A")
        self.__a()
    def __a(self):
        print("A.a()")

class B(A):
    def __init__(self):
        super().__init__()
        # add stuff for B
        self.bnum=3 # required by B.a()        
    def __a(self):
        print("B.__a(), bnum=%i"%self.bnum) 
```

Python通过添加类名（加上下划线）来[“修改”](http://docs.python.org/reference/expressions.html#atom-identifiers)此类方法名，以最大程度地减少子类用自己的版本覆盖它们的机会。

[PEP 8 Python 样式指南](http://www.python.org/dev/peps/pep-0008/)对私有名称修改有这样的说法：

> 如果您的类打算被子类化，并且您有不希望子类使用的属性，请考虑使用双前导下划线命名它们并且没有尾随下划线。这调用了 Python 的名称修饰算法，其中类的名称被修饰为属性名称。如果子类无意中包含具有相同名称的属性，这有助于避免属性名称冲突。
> 
> 注意 1：请注意，重命名中只使用了简单的类名，因此如果子类选择相同的类名和属性名，仍然会出现名称冲突。
> 
> 注意 2：名称修饰可以使某些用途，例如调试和 `__getattr__()`，不太方便。然而，名称修饰算法有据可查，并且易于手动执行。
> 
> 注 3：不是每个人都喜欢名字修饰。尝试在避免意外名称冲突的需要与高级呼叫者的潜在使用之间取得平衡。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T13:45:02.857

而不是调用`self.a()`，您需要使用`A.a(self)`. 但这对于特定类的**所有方法并不常见，***您应该重新评估是否`B`应该继承自`A`*.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T13:47:26.123

考虑这个调用：

```
class B(A):
    def __init__(self):
        A.__init__(self) 
```

这就是你打电话时发生的事情`super().__init__()`。这反过来又调用了，这当然是 class`self.a()`的功能，而不是因为is of class 。正如 Martijn 所说，您可以使用双下划线名称，或显式使用类名，但否则无法从超类调用覆盖的方法。`a``B``A``self``B`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T13:49:39.557

如果我们通过以下实例化步骤`B`：

*   我们称`super(B,self).__init__`，即`A.__init__`
*   它调用`self.a()`，也就是说，`B.a()`在我们的例子中，
*   哪个使用`self.bnum`

除了`bnum`尚未定义...所以，`AttributeError`。

对于这种特殊情况，在调用**之前**`bnum`定义您的in就足够了`B.__init__` **`super(B,self).__init__`**

 **```
class B(A):
    def __init__(self):
       self.bnum=3
       super(B, self).__init__() 
```

在进行名称修改的黑暗、黑暗路径之前，您可能只想花时间组织子类的代码：应该在父类*之前*执行，以初始化一些特殊变量，还是*在*父类之后执行，以替换一些默认值?**

# javascript - 将 .toSource 与 javascript 数组一起使用

> ID：12478188
> 
> 赞同：0
> 
> 时间：2012-09-18T13:38:26.190
> 
> 标签：javascript

这是我拥有的 JavaScript

```
var testArr = [];
testArr["foo"] = "bar";
console.log(testArr.toSource());
//console.log(testArr["foo"]); //logs "bar" 
```

我得到的输出是`[]`，这不是我所期望的。有人可以解释这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:09:19.607

```
// This declares an array
var testArr = [];

// THis assign an object property.  Because it isn't a numeric array index,
// it doesn't show up as part of the array.
testArr["foo"] = "bar";

// .toSource() is not cross platform. 
// JSON.stringify(testArr, undefined, 2) is better
console.log(testArr.toSource());

// Yes, because that property exists.
//console.log(testArr["foo"]); //logs "bar"

It sounds like what you really want is this:

// Make an object that can take string properties and not just integer indexes.
var testObject = {}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:40:57.933

出色地。w3schools 说它在 IE 上不起作用。

此外，我已经在 Chrome 中执行了它，并且即使打印了`> testArr`也打印了一个典型的控制台。所以我认为在输出源时关联数组不会被迭代。`[]``> testArr["foo"]``bar`

尝试将第一行更改为：

```
var testArr = {}; 
```

这样，它将是一个共同的对象。

# plsql - 在 Toad 中调试 PLSQL

> ID：12478195
> 
> 赞同：5
> 
> 时间：2012-09-18T13:38:50.590
> 
> 标签：plsql, toad

我一直在使用 PL/SQL 为 Oracle db 创建包，我正在尝试找到一种在不使用“put_line”命令的情况下调试 PL/SQL 包的好方法，有没有人有一些关于如何成功调试的好技巧Toad 或 SQLPlus 上的 PL/SQL 包？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T17:09:08.440

根据 TOAD 的版本，图标和工具栏看起来会有所不同，但过程是相同的：

1.  确保打开“使用调试切换编译”选项
2.  点击“编译”按钮

3.  单击“使用调试器执行 PLSQL”

**蟾蜍 9.7**：

![蟾蜍 9.7](../Images/55d508c02c8c9e7feb98a9479ae1154e.png)

**蟾蜍 11.6**：

![蟾蜍 11.6](../Images/bb86334a8c6515199212fc96da7503a6.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-25T06:50:14.810

首先，为了能够调试 PL/SQL 代码，必须具有适当的数据库权限才能进行调试。( `GRANT DEBUG CONNECT SESSION TO user`)。如果您没有被授予此权限，您的 DB 工具（如 Quest TOAD）甚至可能不会显示调试选项或显示它已禁用。

[![在此处输入图像描述](../Images/600107c26450636ec417a1a003aa8b7c.png)](https://i.stack.imgur.com/4CHH7.png)

其次，在调试之前，必须对其代码（过程、函数或包）进行预编译以进行调试。当使用调试选项编译代码时，编译器会在编译后的代码中插入额外的数据，以便能够在调试过程中在断点处停止。（打开调试选项`Toggle compile with Debug`并编译您的代码）在您完成调试阶段的开发阶段后，您应该重新编译您的代码而不使用调试选项（关闭`Toggle compile with Debug`并编译您的代码）。

然后，您应该将调试断点插入到您的代码中，并在执行期间在调试器中跟踪您想要跟踪的（变量）。

[![在此处输入图像描述](../Images/bbff707af617df2c59efc218c47046f0.png)](https://i.stack.imgur.com/AdNDV.png)

最后，您应该使用调试启动代码，执行将在第一个断点处停止，并使用调试工具栏，您可以在代码中单步执行、跳过、运行到光标...。

[![在此处输入图像描述](../Images/91c4ce87f7fbb139625ce27dff008a1f.png)](https://i.stack.imgur.com/h5STq.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-02T16:44:08.497

要启用调试，请授予以下权限并重新打开 TOAD。它总是对我有用。

```
 GRANT ALTER SESSION TO <databaseUser>;
    GRANT CREATE SESSION TO <databaseUser>;
    GRANT EXECUTE ON DBMS_DEBUG to <databaseUser>;
    GRANT ALTER ANY PROCEDURE TO <databaseUser>;
    GRANT CREATE ANY PROCEDURE TO <databaseUser>;
    GRANT DEBUG ANY PROCEDURE TO <databaseUser>;
    GRANT DEBUG CONNECT SESSION TO <databaseUser>; 
```

# c# - 在子类的 Constructor 中调用基类 Constructor

> ID：12478199
> 
> 赞同：1
> 
> 时间：2012-09-18T13:39:01.057
> 
> 标签：c#, oop, constructor

是否可以在子类的构造函数中的特定点调用基本构造函数，例如：

```
public class SuperClass
{
  public SuperClass(Object myObject)
  {
     // init some values ...
  }
}

public class SubClass: SuperClass
{
  public SubClass(): base(Object myObject)
  {
     //Check some preconditions
     base(myObject);
     // Do some other stuff
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:40:41.930

不，这是不可能的。

实现此行为的一种方法是将基本构造函数的内容提取到一个方法中，然后从子类中调用该方法。

另一个不太紧密的方法是在这里不使用继承。在这种情况下，组合可能更有意义。（不过，如果不知道更多信息，就不可能肯定地说。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:43:53.003

正确的语法是

```
public class SubClass: SuperClass
{
  public SubClass(object myObject): base(myObject)
  {

  }
} 
```

[这是](http://msdn.microsoft.com/en-us/library/ms173115%28v=vs.80%29.aspx)使用构造函数的链接。直接在ctor的体内调用它是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T13:40:25.190

不，因为`//Check some preconditions`你会有一个部分构造的对象。这会导致各种各样的问题。

# java - 打印 JAVA 上的 gnome-keyring 警告

> ID：12478200
> 
> 赞同：1
> 
> 时间：2012-09-18T13:39:02.713
> 
> 标签：java, printing, warnings, gnome-keyring-daemon

我正在尝试打印条形码图像，但是当程序执行 .printDialog() 时，我在控制台上收到以下警告：

```
WARNING: gnome-keyring:: couldn't connect to: /tmp/keyring-y4THJ1/pkcs11: No such file or directory 
```

当我点击打印按钮时，我得到空值。

这是代码：

```
 private void jButton1MouseReleased(java.awt.event.MouseEvent evt) {
    PrinterJob printJob = PrinterJob.getPrinterJob();
    printJob.setPrintable(new Printable()
    {
        public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {
            if (pageIndex != 0) {
                return NO_SUCH_PAGE;
            }
            graphics.drawImage(imagen, 0, 0, imagen.getWidth(null), imagen.getHeight(null),   null);
            return PAGE_EXISTS;
        }
    });
    if (printJob.printDialog()) {
        try {
            printJob.print();
        } catch (Exception prt) {
            System.err.println(prt.getMessage());
        }
    }

} 
```

# jquery - Twitter引导下拉菜单在部署时不起作用

> ID：12478201
> 
> 赞同：1
> 
> 时间：2012-09-18T13:39:09.297
> 
> 标签：jquery, grails, twitter-bootstrap

我的应用程序在开发中运行良好，但是当我将它部署到 tomcat 下拉菜单时停止工作。它在那里，它在鼠标悬停时下降，但它对鼠标点击没有反应。我检查了生成的链接，看起来不错。如果我手动输入 URL，它可以正常工作。我猜这是一些 JavaScript/文件位置问题，但我似乎找不到它。可能遗漏了一些明显的东西。

这是我生成菜单的 main.gsp：

```
<!doctype html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title><g:layoutTitle default="Grails"/></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="${resource(dir: 'images', file: 'favicon.ico')}" type="image/x-icon">
    <link rel="apple-touch-icon" href="${resource(dir: 'images', file: 'apple-touch-icon.png')}">
    <link rel="apple-touch-icon" sizes="114x114" href="${resource(dir: 'images', file: 'apple-touch-icon-retina.png')}">
    <link rel="stylesheet" href="${resource(dir: 'css', file: 'main.css')}" type="text/css">
    <link rel="stylesheet" href="${resource(dir: 'css', file: 'mobile.css')}" type="text/css">
    <link rel="stylesheet" href="${resource(dir: 'css/bootstrap', file: 'bootstrap.css')}" type="text/css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <script type="text/javascript" src="<g:resource dir="/js/bootstrap" file="bootstrap-dropdown.js" />"></script>

    <g:layoutHead/>
    <r:layoutResources />
</head>
<body>
    <div class="navbar-inner">
        <a href="http://grails.org">
            <img src="${resource(dir: 'images', file: 'coming.gif')}" alt="Grails"/>
        </a>
        <sec:ifLoggedIn>
            <div id="headinfo">
                <g:message code="header.user" /> :  ${ sec.loggedInUserInfo(field:'username') }  <br/>
                <g:message code="header.date" /> : <g:formatDate date='${new Date()}' format='E, dd MMM yyyy' locale='${Locale.ENGLISH}'/> <br/>
                <a href="?lang=sr"> <g:img dir="images" file="sr.gif"/>  </a>
                <a href="?lang=en"> <g:img dir="images" file="en.gif"/>  </a>
            </div>
        </sec:ifLoggedIn>
        <h2 id="maintitle"><g:layoutTitle default="Grails"/></h2>
    </div>

    <header class="jumbotron subhead" id="overview">
        <div class="subnav">
            <ul class="nav nav-pills" id="meni">
                <li class="dropdown open">
                    <a href="${createLink(controller:'ticket',action:'index')}"> <g:message code="menu.home" /> </a>
                </li>
                <li class="dropdown open">
                    <g:link controller="ticket" action="list" data-toggle="dropdown"> <g:message code="menu.tickets" /> <b class="caret"></b> </g:link>
                    <ul class="dropdown-menu">
                        <li> <g:link controller="ticket" action="list" data-toggle="dropdown"> <g:message code="menu.ticketList" /> </g:link> </li>
                        <li> <g:link controller="ticket" action="create" data-toggle="dropdown"> <g:message code="menu.createTicket" /> </g:link> </li>
                    </ul>
                </li>

                <li class="dropdown open">
                    <a href="#" data-toggle="dropdown"> <g:message code="menu.admin" /> <b class="caret"></b> </a>
                    <ul class="dropdown-menu">
                        <li> <g:link controller="user" action="list" data-toggle="dropdown"> <g:message code="menu.listUsers" /> </g:link> </li>
                        <li> <g:link controller="company" action="list" data-toggle="dropdown"> <g:message code="menu.listCompanies" /> </g:link> </li>
                        <li> <g:link controller="company" action="create" data-toggle="dropdown"> <g:message code="menu.createCompany" /> </g:link> </li>
                        <li> <g:link controller="project" action="list" data-toggle="dropdown"> <g:message code="menu.projectsList" /> </g:link> </li>
                        <li> <g:link controller="project" action="create" data-toggle="dropdown"> <g:message code="menu.createProjects" /> </g:link> </li>
                        <li> <g:link controller="user" action="invitation" data-toggle="dropdown"> <g:message code="menu.inviteUser" /> </g:link> </li>
                    </ul>
                </li>
                <sec:ifNotLoggedIn>
                    <li class="dropdown open">
                        <g:link controller="login" action="index" data-toggle="dropdown"> <g:message code="menu.login" /> </g:link>
                    </li>
                </sec:ifNotLoggedIn>
                <sec:ifLoggedIn>
                    <li class="dropdown open">
                        <g:link controller="logout" action="index" data-toggle="dropdown"> <g:message code="menu.logout" /> </g:link>
                    </li>
                </sec:ifLoggedIn>
            </ul>
        </div>
    </header>

    <div id="maincontent">
        <g:layoutBody/>
    </div>

    <div class="navbar-inner" id="footerdiv">
        <div id="foottext"> Help Desk </div>
    </div>

    <div id="spinner" class="spinner" style="display:none;"><g:message code="spinner.alt" default="Loading&hellip;"/></div>
    <g:javascript library="application"/>
    <r:layoutResources />

    </div>
</body> 
```

这是一个页眉：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title><g:layoutTitle default="Grails"/></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="${resource(dir: 'images', file: 'favicon.ico')}" type="image/x-icon">
    <link rel="apple-touch-icon" href="${resource(dir: 'images', file: 'apple-touch-icon.png')}">
    <link rel="apple-touch-icon" sizes="114x114" href="${resource(dir: 'images', file: 'apple-touch-icon-retina.png')}">
    <link rel="stylesheet" href="${resource(dir: 'css', file: 'main.css')}" type="text/css">
    <link rel="stylesheet" href="${resource(dir: 'css', file: 'mobile.css')}" type="text/css">
    <link rel="stylesheet" href="${resource(dir: 'css/bootstrap', file: 'bootstrap.css')}" type="text/css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <script type="text/javascript" src="<g:resource dir="/js/bootstrap" file="bootstrap-dropdown.js" />"></script>

    <g:layoutHead/>
    <r:layoutResources />
</head> 
```

提前致谢。

编辑：这是 Chrome 控制台中的唯一错误：

```
Failed to load resource: the server responded with a status of 403 (Forbidden) http://sg.perion.com/v1.1/js/gt.js 
```

而且我注意到，如果我用 right_mouse_button/open_in_new_tab 打开一个下拉菜单链接，它就可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:19:59.047

您可能想要使用[Grails Bootstrap 插件](http://grails.org/plugin/twitter-bootstrap)。这应该处理包含所有必要的引导文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:42:43.630

您需要有有效的 Doctype。确保您的 .gsp 和生成的页面源以：

```
<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/html"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:09:59.503

改变

```
<script type="text/javascript" src="<g:resource dir="/js/bootstrap" file="bootstrap-dropdown.js" />"></script> 
```

至

```
<script type="text/javascript" src="<g:resource dir="js/bootstrap" file="bootstrap-dropdown.js" />"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-09T00:39:55.193

我是 MVC 和 Bootstrap 的新手，在 Bootstrap 3.3.5 下我修改了 bootstrap.css 以恢复子菜单类时遇到了这个问题，但没有修改 bootstrap.min.css。在开发中一切都很好，编译 Debug=True (web.config -->system.web) 和缩小文件被忽略，但是当部署到 Debug=False 的服务器时，缩小版本 (bootstrap.min.css) 覆盖了我的定制版。作为短期修复，我删除了生产环境中的 bootstrap.min.css 文件，但现在将研究更新缩小的 .css 文件。绝对是菜鸟的错误，但我们中的一些人在那里，我希望这对其他人有所帮助。

# asp.net-mvc - 子网格自动生成函数（mvc、razor、jquery、jqgrid、trirand）中的错误“对象不支持属性或方法”

> ID：12478205
> 
> 赞同：0
> 
> 时间：2012-09-18T13:39:18.060
> 
> 标签：asp.net-mvc, razor, jqgrid, subgrid

嗨，我正在使用 jqgrid 子网格的 trirand 示例（[Trirand example Hierarchy 2 level](http://www.trirand.net/demoaspnetmvc.aspx)）。在我的情况下，子网格行为是在自动生成的 javascript 函数中。当我将示例“翻译”为我的解决方案（mvc3+razor+entity 框架 Cf）时，在自动生成的子网格函数中出现错误“对象不支持属性或方法”。我确定这是一个简单的错误，但我无法保存它......我希望你能帮助我。

这是我的静态视图：

```
@{
    ViewBag.Title = "Index";
}
<script type="text/javascript">
    function showRolesSubGrid(subgrid_id, row_id) {
        // the "showSubGrid_OrdersGrid" function is autogenerated and available globally on the page by the second child grid. 
        // Calling it will place the child grid below the parent expanded row and will call the action specified by the DaraUrl property
        // of the child grid, with ID equal to the ID of the parent expanded row                
        showSubGrid_RolesSubGrid(subgrid_id, row_id);
    }
</script>
<div class="bloque">
    <div class="ui-widget">
        <h2>Index</h2>

        <p>
            @Html.ActionLink("Create New", "Create")
        </p>
        @Html.AntiForgeryToken() 
        <div>           
            @Html.Trirand().JQGrid(Model.MenuGrid, "MenuGrid")
            @Html.Trirand().JQGrid(Model.RolesSubGrid, "RolesSubGrid")

        </div>
        @Html.Trirand().JQAutoComplete(
                new JQAutoComplete 
                    {
                        DisplayMode = AutoCompleteDisplayMode.ControlEditor,
                        DataUrl = Url.Action("AutoCompleteName", "MenuItem")
                    }, "AutoCompleteName")
        @Html.Trirand().JQAutoComplete(
                new JQAutoComplete 
                    {
                        DisplayMode = AutoCompleteDisplayMode.ControlEditor,
                        DataUrl = Url.Action("AutoCompletePadre", "MenuItem")
                    }, "AutoCompletePadre")
    </div>
</div> 
```

这是我的模型网格：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Trirand.Web.Mvc;
using System.Web.UI.WebControls;

namespace MVC.Models.Grids
{
    public class MenuGridModel
    {
        public JQGrid MenuGrid { get; set; }
        public JQGrid RolesSubGrid { get; set; }
        public MenuGridModel()
        {
            RolesSubGrid = new JQGrid
            {
                Columns = new List<JQGridColumn>
                                 {
                                     new JQGridColumn { DataField = "RoleID",
                                                        HeaderText = "ID",
                                                        PrimaryKey = true,
                                                        Width = 50 },
                                     new JQGridColumn { DataField = "RoleName" }
                                 },
                Width = Unit.Pixel(650),
                Height = Unit.Pixel(350)
            };

            MenuGrid = new JQGrid
            {
                Columns = new List<JQGridColumn>()
                    {
                        new JQGridColumn { DataField = "ID", 
                                        // always set PrimaryKey for Add,Edit,Delete operations
                                        // if not set, the first column will be assumed as primary key
                                        PrimaryKey = true,
                                        Editable = false,
                                        Width = 20 },                                    
                        new JQGridColumn { DataField = "Name", 
                                        Editable = true,
                                        Width = 100 },
                        new JQGridColumn { DataField = "ActionName",                                                         
                                        Editable = true,
                                        Width = 100}, 
                        new JQGridColumn { DataField = "ControllerName", 
                                        Editable = true,
                                        Width = 100 },
                        new JQGridColumn { DataField = "Url",
                                        Editable =  true
                                        },
                        new JQGridColumn { DataField = "Padre",
                                        Editable =  true
                                        }
                    },
                Width = Unit.Percentage(100),
                Height = Unit.Percentage(100)
            };
            MenuGrid.ToolBarSettings.ShowRefreshButton = true;
        }
    }
} 
```

这是我的控制器的一部分：

```
 ...
...
  public JsonResult Datos()
    {
        // instanciar el modelo
        var gridModel = new MenuGridModel();
        JsonResult verresul;
        ConfigGrid(gridModel);
        JQGridState gridState = gridModel.MenuGrid.GetState();
        Session["gridState"] = gridState;
        // devolver un databind según EF
        var prueba = GetMenuItem().AsQueryable();
        verresul = gridModel.MenuGrid.DataBind(prueba);
        return gridModel.MenuGrid.DataBind(GetMenuItem().AsQueryable());
    }

    // Este método se llama cuando la SUBgrilla requiere datos
    public JsonResult DatosRoles(string parentRowID)
    {
        int menu_padre_id = Convert.ToInt32(parentRowID);
        // instanciar el modelo
        var gridModel = new MenuGridModel();
        ConfigGrid(gridModel);

        // devolver un databind según EF
        //var Roles = from o in db.aspnetdb_Roles_vw
        //             where o.RoleId == menu_padre
        //             select o;
        List<List<aspnetdb_Roles_vw>> roles;
        //MenuItem pmenu;
        roles = (from pmenu in db.MenuItems 
                 where pmenu.Id == menu_padre_id
                 select pmenu)
                 .Select(rr => rr.aspnetdb_Roles_vw.ToList()).ToList();
        return gridModel.RolesSubGrid.DataBind(roles);
    }
...
...
    public void ConfigGrid(MenuGridModel modeloGrid)
    {
        var entidadGrid = modeloGrid.MenuGrid;
        var sub1Grid = modeloGrid.RolesSubGrid;

        // Personalizar o cambiar algunos comportamientos del modelo
        // ID de la grilla, por si hay varias
        entidadGrid.ID = "MenuGrid";
        // DataUrl mapea el método que devuelve los datos
        entidadGrid.DataUrl = Url.Action("Datos");
        // EditUrl mapea el método que hace ABM
        entidadGrid.EditUrl = Url.Action("ABM");
        entidadGrid.ToolBarSettings.ShowEditButton = true;
        entidadGrid.ToolBarSettings.ShowAddButton = true;
        entidadGrid.ToolBarSettings.ShowDeleteButton = true;
        entidadGrid.EditDialogSettings.CloseAfterEditing = true;
        entidadGrid.AddDialogSettings.CloseAfterAdding = true;
        entidadGrid.MultiSelect = true;
        entidadGrid.MultiSelectMode = MultiSelectMode.SelectOnCheckBoxClickOnly;
        // SUBgrilla
        #region SubGrilla
        entidadGrid.ClientSideEvents.SubGridRowExpanded = "showRolesSubGrid";
        entidadGrid.HierarchySettings.HierarchyMode = HierarchyMode.Parent;
        entidadGrid.HierarchySettings.ReloadOnExpand = Convert.ToBoolean(ViewData["reloadOnExpand"]);
        entidadGrid.HierarchySettings.SelectOnExpand = Convert.ToBoolean(ViewData["selectOnExpand"]);
        entidadGrid.HierarchySettings.ExpandOnLoad = Convert.ToBoolean(ViewData["expandOnLoad"]);
        entidadGrid.HierarchySettings.PlusIcon = Convert.ToString(ViewData["plusIcon"]);
        entidadGrid.HierarchySettings.MinusIcon = Convert.ToString(ViewData["minusIcon"]);
        entidadGrid.HierarchySettings.OpenIcon = Convert.ToString(ViewData["openIcon"]);
        sub1Grid.ID = "RolesGrid";
        sub1Grid.DataUrl = Url.Action("DatosRoles");
        sub1Grid.HierarchySettings.HierarchyMode = HierarchyMode.Child;
        #endregion
        ...
        ... 
```

这是我使用自动生成的子网格功能动态生成的视图：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml2/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta charset="utf-8" />
    <title>Index</title>

    <link href="../../Content/notificaciones.css" rel="stylesheet" type="text/css" />

    <script src="../../Content/jquery-ui/js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="../../Content/jquery-ui/js/jquery-ui-1.8.22.custom.min.js" type="text/javascript"></script>
    <link href="../../Content/jquery-ui/css/redmond/jquery-ui-1.8.22.custom.css" rel="stylesheet" type="text/css" />

    <link href="/Content/openid-shadow.css" rel="stylesheet" type="text/css" />
    <link href="/Content/openid.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/openid-jquery.js" type="text/javascript"></script>
    <script src="/Scripts/openid-en.js" type="text/javascript"></script>
    <script type="text/javascript"> $(document).ready(function () {openid.init('openid_identifier'); }); </script>

    <link href="../../Content/Site.css" rel="stylesheet" type="text/css" />

    <script src="../../Content/jquery-vertical-accordion-menu/js/jquery.cookie.js" type="text/javascript"></script>
    <script src="../../Content/jquery-vertical-accordion-menu/js/jquery.hoverIntent.minified.js" type="text/javascript"></script>
    <script src="../../Content/jquery-vertical-accordion-menu/js/jquery.dcjqaccordion.2.7.js" type="text/javascript"></script>
    <script src="../../Content/jquery-vertical-accordion-menu/js/jquery.dcjqaccordion.2.7.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="../../Content/jquery-vertical-accordion-menu/css/skins/black.css" />
    <link rel="stylesheet" type="text/css" href="../../Content/jquery-vertical-accordion-menu/css/dcaccordion.css" />
    <link rel="stylesheet" type="text/css" href="../../Content/jquery-vertical-accordion-menu/css/skins/blue.css" />
    <link rel="stylesheet" type="text/css" href="../../Content/jquery-vertical-accordion-menu/css/skins/clean.css" />
    <link rel="stylesheet" type="text/css" href="../../Content/jquery-vertical-accordion-menu/css/skins/demo.css" />
    <link rel="stylesheet" type="text/css" href="../../Content/jquery-vertical-accordion-menu/css/skins/graphite.css" />
    <link rel="stylesheet" type="text/css" href="../../Content/jquery-vertical-accordion-menu/css/skins/grey.css" />

    <link href="../../Content/jqGrid/css/ui.jqgrid.css" rel="stylesheet" type="text/css" />
    <script src="../../Content/jqGrid/js/i18n/grid.locale-es.js" type="text/javascript"></script>
    <script src="../../Content/jqGrid/js/jquery.jqGrid.min.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery.jqAutoComplete.min.js" type="text/javascript"></script>

    <script type="text/javascript" src="../../Content/Flexigrid/js/flexigrid.js"></script>
    <link href="../../Content/Flexigrid/css/flexigrid.css" rel="stylesheet" type="text/css" />

    <script src="../../Scripts/wiltel.js" type="text/javascript"></script>

    <script type="text/javascript">
        var menuLoaded = false;
        $(document).ready(function () {
                $.ajax({
                        url: "/Home/MenuLayout",
                        type: "GET",
                        success: function (response, status, xhr)
                                    {
                                        var nvContainer = $('#navcontainer');
                                        nvContainer.html(response);
                                        menuLoaded = true;
                                    },
                        error: function (XMLHttpRequest, textStatus, errorThrown)
                                {
                                        var nvContainer = $('#navcontainer');
                                        nvContainer.html(errorThrown);
                                }
                        });
        });
    </script>
</head>
<body>
    <div class="container-fluid">
        <div id="header" class="row-fluid">
           <div class="content-wrapper">
                <p class="site-title"><img src="../../Content/images/LOGO1.png" align ="middle" />
                WILTEL COMUNICACIONES S.A </p>
           </div>
            <div class="login" >
                    <p>
        Hola, <a class="username" href="/Account/ChangePassword" title="Change password">WILTEL01\eallasino</a>!
        <a href="/Account/LogOff">Log off</a>
    </p>

            </div>
        </div>
    </div>
    <div id="body">
       <div class= "menu1">
       <div >
           <div id="navcontainer">

           </div>
        </div>
       </div>

<script type="text/javascript">
    function showRolesSubGrid(subgrid_id, row_id) {
        // the "showSubGrid_OrdersGrid" function is autogenerated and available globally on the page by the second child grid. 
        // Calling it will place the child grid below the parent expanded row and will call the action specified by the DaraUrl property
        // of the child grid, with ID equal to the ID of the parent expanded row                
        showSubGrid_RolesSubGrid(subgrid_id, row_id);
    }
</script>
<div class="bloque">
    <div class="ui-widget">
        <h2>Index</h2>

        <p>
            <a href="/MenuItem/Create">Create New</a>
        </p>
        <input name="__RequestVerificationToken" type="hidden" value="1kCOOa9WHClxCC_hs3GU_kmTYaRTvE2iB1Wk5SLCNp18j3CJv15Kvu9sUrA92qUP-nC9DnXoqx7LoIvMPJMfUoXMFjWjcz0tdZV2VN78MhY4Hcwhv1mv5LXZ58zroMVIX7oXaBsvJFI77wRBC_zs8zP1XpY1" /> 
        <div>           
            <table id='MenuGrid'></table><div id='MenuGrid_pager'></div><script type='text/javascript'>
jQuery(document).ready(function() {jQuery('#MenuGrid').jqGrid({url: '/MenuItem/Datos?jqGridID=MenuGrid',editurl: '/MenuItem/ABM?jqGridID=MenuGrid&editMode=1',mtype: 'GET',datatype: 'json',page: 1,colNames: ["ID","Name","ActionName","ControllerName","Url","Padre"],colModel: [{"key":true,"searchoptions":{},"index":"ID","width":20,"name":"ID"},{"editable":true,"searchoptions":{dataInit:function(el) {setTimeout(function() {var ec = 'AutoCompleteName';if (typeof(jQuery(el).autocomplete) !== 'function')alert('JQAutoComplete javascript not present on the page. Please, include jquery.jqAutoComplete.min.js');jQuery(el).autocomplete( eval(ec + '_acid') );},200);}},"index":"Name","width":100,"name":"Name"},{"editable":true,"searchoptions":{},"index":"ActionName","width":100,"name":"ActionName"},{"editable":true,"searchoptions":{},"index":"ControllerName","width":100,"name":"ControllerName"},{"editable":true,"index":"Url","searchoptions":{},"name":"Url"},{"editoptions":{"value":"Inicio:Inicio;Acerca de...:Acerca de...;Tipos de Problemas:Tipos de Problemas;Menus:Menus;Usuarios:Usuarios;Áreas:Áreas;Workflow:Workflow;Interfaces:Interfaces;ERP:ERP;Administración:Administración;Prueba2:Prueba2;SubP1:SubP1;Roles:Roles"},"searchoptions":{dataInit:function(el) {setTimeout(function() {var ec = 'AutoCompletePadre';if (typeof(jQuery(el).autocomplete) !== 'function')alert('JQAutoComplete javascript not present on the page. Please, include jquery.jqAutoComplete.min.js');jQuery(el).autocomplete( eval(ec + '_acid') );},200);}},"editable":true,"index":"Padre","name":"Padre","edittype":"select"}],viewrecords: true,scrollrows: false,prmNames: { id: "ID" },headertitles: true,pager: jQuery('#MenuGrid_pager'),subGrid: true,subGridOptions: {},subGridRowExpanded: showRolesSubGrid,loadError: jqGrid_aspnet_loadErrorHandler,hoverrows: false,rowNum: 10,rowList: [10,20,30],editDialogOptions: {"closeAfterEdit":true,"recreateForm":true,errorTextFormat:function(data) { return 'Error: ' + data.responseText },editData:{ __RequestVerificationToken: jQuery('input[name=__RequestVerificationToken]').val() }},addDialogOptions: {"closeAfterAdd":true,"recreateForm":true,errorTextFormat:function(data) { return 'Error: ' + data.responseText },editData:{ __RequestVerificationToken: jQuery('input[name=__RequestVerificationToken]').val() }},delDialogOptions: {"recreateForm":true,errorTextFormat:function(data) { return 'Error: ' + data.responseText },delData:{ __RequestVerificationToken: jQuery('input[name=__RequestVerificationToken]').val() }},searchDialogOptions: {"resize":false,"recreateForm":true},jsonReader: { id: "ID" },sortorder: 'asc',multiselect: true,multiboxonly: true,width: '100%',height: '100%',viewsortcols: [false,'vertical',true]})
.navGrid('#MenuGrid_pager',{"edit":true,"add":true,"del":true,"search":true,"refresh":true,"view":false,"position":"left","cloneToTop":true},jQuery('#MenuGrid').getGridParam('editDialogOptions'),jQuery('#MenuGrid').getGridParam('addDialogOptions'),jQuery('#MenuGrid').getGridParam('delDialogOptions'),jQuery('#MenuGrid').getGridParam('searchDialogOptions') ).bindKeys();
function jqGrid_aspnet_loadErrorHandler(xht, st, handler) {jQuery(document.body).css('font-size','100%'); jQuery(document.body).html(xht.responseText);};jQuery('#MenuGrid').filterToolbar({});});</script>
            <table id='RolesSubGrid'></table><div id='RolesSubGrid_pager'></div><script type='text/javascript'>
function showSubGrid_RolesSubGrid(subgrid_id, row_id, message, suffix) {var subgrid_table_id, pager_id;
                        subgrid_table_id = subgrid_id+'_t';
                        pager_id = 'p_'+ subgrid_table_id;
                        if (suffix) { subgrid_table_id += suffix; pager_id += suffix;  }
                        if (message) jQuery('#'+subgrid_id).append(message);                        
                        jQuery('#'+subgrid_id).append('<table id=' + subgrid_table_id + ' class=scroll></table><div id=' + pager_id + ' class=scroll></div>');
                jQuery('#' + subgrid_table_id).jqGrid({url: '/MenuItem/DatosRoles?jqGridID=RolesSubGrid&parentRowID=' + row_id + '',editurl: '?jqGridID=RolesSubGrid&editMode=1&parentRowID=' + row_id + '',mtype: 'GET',datatype: 'json',page: 1,colNames: ["ID","RoleName"],colModel: [{"key":true,"searchoptions":{},"index":"RoleID","width":50,"name":"RoleID"},{"index":"RoleName","searchoptions":{},"name":"RoleName"}],viewrecords: true,scrollrows: false,prmNames: { id: "RoleID" },headertitles: true,pager: jQuery('#' + pager_id),loadError: jqGrid_aspnet_loadErrorHandler,hoverrows: false,rowNum: 10,rowList: [10,20,30],editDialogOptions: {"recreateForm":true,errorTextFormat:function(data) { return 'Error: ' + data.responseText },editData:{ __RequestVerificationToken: jQuery('input[name=__RequestVerificationToken]').val() }},addDialogOptions: {"recreateForm":true,errorTextFormat:function(data) { return 'Error: ' + data.responseText },editData:{ __RequestVerificationToken: jQuery('input[name=__RequestVerificationToken]').val() }},delDialogOptions: {"recreateForm":true,errorTextFormat:function(data) { return 'Error: ' + data.responseText },delData:{ __RequestVerificationToken: jQuery('input[name=__RequestVerificationToken]').val() }},searchDialogOptions: {"resize":false,"recreateForm":true},jsonReader: { id: "RoleID" },sortorder: 'asc',width: '650',height: '350',viewsortcols: [false,'vertical',true]})
.bindKeys();
function jqGrid_aspnet_loadErrorHandler(xht, st, handler) {jQuery(document.body).css('font-size','100%'); jQuery(document.body).html(xht.responseText);};}</script>

        </div>
        <script type='text/javascript'>var AutoCompleteName_acid = { id: 'AutoCompleteName',source: '/MenuItem/AutoCompleteName' };</script>
        <script type='text/javascript'>var AutoCompletePadre_acid = { id: 'AutoCompletePadre',source: '/MenuItem/AutoCompletePadre' };</script>
    </div>
</div>

    </div>

    <footer>
       <div class ="Info">
            <h3>INFO/NOVEDADES:</h3>

        </div>        
    </footer>
</body>
</html> 
```

这是我得到错误的地方：

```
 jQuery('#' + subgrid_table_id).jqGrid({
    url: '/MenuItem/DatosRoles?jqGridID=RolesSubGrid&parentRowID=' + row_id + '',
    editurl: '?jqGridID=RolesSubGrid&editMode=1&parentRowID=' + row_id + '',
    mtype: 'GET',
    datatype: 'json',
    page: 1,
    colNames: ["ID", "RoleName"],
    colModel: [{
        "key": true,
        "searchoptions": {},
        "index": "RoleID",
        "width": 50,
        "name": "RoleID"
    }, {
        "index": "RoleName",
        "searchoptions": {},
        "name": "RoleName"
    }],
    viewrecords: true,
    scrollrows: false,
    prmNames: {
        id: "RoleID"
    },
    headertitles: true,
    pager: jQuery('#' + pager_id),
    loadError: jqGrid_aspnet_loadErrorHandler,
    hoverrows: false,
    rowNum: 10,
    rowList: [10, 20, 30],
    editDialogOptions: {
        "recreateForm": true,
        errorTextFormat: function (data) {
            return 'Error: ' + data.responseText
        },
        editData: {
            __RequestVerificationToken: jQuery('input[name=__RequestVerificationToken]').val()
        }
    },
    addDialogOptions: {
        "recreateForm": true,
        errorTextFormat: function (data) {
            return 'Error: ' + data.responseText
        },
        editData: {
            __RequestVerificationToken: jQuery('input[name=__RequestVerificationToken]').val()
        }
    },
    delDialogOptions: {
        "recreateForm": true,
        errorTextFormat: function (data) {
            return 'Error: ' + data.responseText
        },
        delData: {
            __RequestVerificationToken: jQuery('input[name=__RequestVerificationToken]').val()
        }
    },
    searchDialogOptions: {
        "resize": false,
        "recreateForm": true
    },
    jsonReader: {
        id: "RoleID"
    },
    sortorder: 'asc',
    width: '650',
    height: '350',
    viewsortcols: [false, 'vertical', true]
}).bindKeys(); 
```

我会感谢任何解决方向...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:34:26.770

我发现了问题，它在我用来显示手风琴菜单的 javascript 集中：

```
 <script src="../../Content/jquery-vertical-accordion-menu/js/jquery.cookie.js" type="text/javascript"></script>
<script src="../../Content/jquery-vertical-accordion-menu/js/jquery.hoverIntent.minified.js" type="text/javascript"></script>
<script src="../../Content/jquery-vertical-accordion-menu/js/jquery.dcjqaccordion.2.7.js" type="text/javascript"></script>
<script src="../../Content/jquery-vertical-accordion-menu/js/jquery.dcjqaccordion.2.7.min.js" type="text/javascript"></script> 
```

从脚本中删除这个块然后子网格显示很好......似乎这个javascript的一部分正在重置jquery函数。

# javascript - 标记错误

> ID：12478208
> 
> 赞同：0
> 
> 时间：2012-09-18T13:39:32.523
> 
> 标签：javascript, asp.net, google-maps

我试图在某个位置的地图上放置一个标记，但它给了我错误的选项，但如果我单独加载地图它工作正常

这是我的代码

> ```
> <script type="text/javascript">
>     //var map;
>     function initialize() {  if (GBrowserIsCompatible()) {
>             var lat = parseFloat(document.getElementById("FormView1_LatitudeLabel").textContent);
>             var lng = parseFloat(document.getElementById("FormView1_LongitudeLabel").textContent);
> 
>             // Creating a map
> 
>                     // Creating a LatLng object containing the coordinate for the center of the map  
>                     var latlng = new google.maps.LatLng(lat, lng);
>                     // Creating an object literal containing the properties we want to pass to the map  
>                     var options = {
>                         zoom: 7,
>                         center: latlng,
>                         mapTypeId: google.maps.MapTypeId.ROADMAP,
>                     };
>                     // Calling the constructor, thereby initializing the map  
>                     var map = new google.maps.Map(document.getElementById('map'), options);
> 
>                     var marker = new google.maps.Marker({
>                         position: new google.maps.LatLng(lat, lng),
>                         map: map,
>                         title: 'My workplace',
>                         clickable: false,
>                         icon: 'img/factory.png'
>                     });
>                 }
>   }   
>  </script> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:53:36.767

GBrowserIsCompatible() 是 V2 方法，但您的其余代码是 V3，您必须决定使用单个 API 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:39:29.727

此处最后一项的尾随逗号将导致 Internet Explorer 出现错误：

```
var options = {
                        zoom: 7,
                        center: latlng,
                        mapTypeId: google.maps.MapTypeId.ROADMAP,
                    }; 
```

应该：

```
var options = {
                        zoom: 7,
                        center: latlng,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T13:47:02.280

我真的不知道你想要什么，但是

```
marker.setMap(map); 
```

将在地图上显示您的标记。

和

```
map.panTo(marker.getPosition()) 
```

您可以将地图平移到标记处。

有关详细信息，请参阅[https://developers.google.com/maps/documentation/javascript/reference#Marker](https://developers.google.com/maps/documentation/javascript/reference#Marker)。

# jquery - 将单击 javascript 绑定到 asp:button 停止按钮工作

> ID：12478209
> 
> 赞同：0
> 
> 时间：2012-09-18T13:39:34.760
> 
> 标签：jquery, asp.net, button, event-handling, code-behind

这很奇怪，因为它昨晚还在工作！

我有以下 HTML 标记：（部分）

```
<div id="doButtonContainer">
    <asp:button id="resizeActionButton" runat="server" onclick="doResize"  class="doResize redButton" text="Do Resize" />
</div>
<div id="res" runat="server"></div> 
```

以及页面后面的以下代码

```
Partial Class Admin_webSite_reSampleImgs
    Inherits System.Web.UI.Page

    Sub doResize(ByVal sender As Object, ByVal e As System.EventArgs) Handles resizeActionButton.Click  '=== THIS FUNCTION DETERMINES THE IMAGES TO CHANGE...

        '// DO STUFF //

        res.InnerHtml = "DONE" '"<b>Products: </b><hr/> " & Replace(ids.TrimEnd(","), ",", ", ") & " <hr/> <b>Have been updated</b> <hr/>"
    End Sub 
```

然后我有这个javascript：

```
$('input.doResize').bind('click', function (e) {
    if (simpleValidate('') <= 0) {
        // do things before submit
    } else {
        e.preventdefault();
        alert("not all fields complete");
    };
}); 
```

首先，我不确定我是否需要`handles`后面代码的条件或`onclick`按钮上的属性，我不确定。

其次......所有的`Javascript`作品，但背后的代码没有被调用。

我发誓它昨晚做到了！

很困惑……我做错了什么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:48:14.750

使用 onclientclick：

```
<asp:button id="resizeActionButton" runat="server" onclick="doResize" OnClientClick="return checkValid();"  class="doResize redButton" text="Do Resize" /> 
```

javascript函数：

```
 function checkValid(){
    if (simpleValidate('') <= 0) {
        // do things before submit
        return true;
    } else {
        e.preventdefault();
        alert("not all fields complete");
        return false;
    };
} 
```

# c# - 使用依赖注入理解 IoC 的问题

> ID：12478217
> 
> 赞同：2
> 
> 时间：2012-09-18T13:40:01.650
> 
> 标签：c#, interface, dependency-injection, inversion-of-control

我正在努力了解 IoC w。依赖注入，我关注了 Joel Abrahamsson 的这篇博文：http: [//joelabrahamsson.com/entry/inversion-of-control-introduction-with-examples-in-dotnet](http://joelabrahamsson.com/entry/inversion-of-control-introduction-with-examples-in-dotnet)

我已经这样设置了我的项目：

*   模型
*   接口
*   控制器
*   达尔

我的课程如下：

**车**

```
public class Car
{
    public int Id { get; set; }
    public string Brand { get; set; }
    public string Year { get; set; }
} 
```

**汽车控制器**

```
public class CarController
 {
     private readonly ICar _carInterface;

     public CarController(ICar car)
     {
         _carInterface = car;
     }

     public void SaveCar(Car car)
     {
          _carInterface.SaveCar(car);
     }
} 
```

**ICar接口**

```
public interface ICar
{
    void SaveCar(Car car);
} 
```

**数据库汽车**

```
public class DbCar: ICar
{
    public void SaveCar(Car car)
    {
        throw new NotImplementedException();
    }
} 
```

现在，在 UI 上，我不确定如何处理这个 ;-) 我可以肯定地制作我需要的 Car 对象，但是当新建 CarController 时，它（当然）需要一个 ICar 接口我给不了。

我有一种感觉，我在阅读 Joels（伟大的）文章的过程中误解了一些东西 :-) 我希望也许有人可以阐明我错过/误解的内容。

非常感谢任何帮助/提示！

提前非常感谢。

一切顺利，

博

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:43:55.687

它看起来`ICar`不是汽车的接口。相反，它是用于保存汽车的存储库的接口。因此应该调用它`ICarRepository`（或可能`IGarage`。）

你说：

> 但是当新建一个 CarController 时，它（当然）需要一个我不能给它的 ICar 接口。

为什么不？你有一个实现，`DbCar`. 为什么你不能给它其中之一？

你在评论中询问了这个表达式：

```
new CarController(new DbCar()) 
```

具体来说，通过编写该行代码，您已将控制器绑定到汽车存储库的特定实现。

这是真的，但仅限于这种情况。在单元测试的其他地方你可以写：

```
new CarController(new FakeCarRepository()) 
```

该类`CarController`是一个独立的模块，它对其他事物的依赖从其构造函数的参数列表中可以清楚地看出。

IoC 或“依赖注入”框架是提供标准方法来构造类的库，例如`CarController`，它需要的参数将在配置文件中指定。但这对于一个简单的应用程序来说可能有点过头了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:03:40.913

要正确地进行依赖注入和控制反转，您应该坚持基于接口的开发（[SOLID](https://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则中的“I”）。下面是我如何组织你的类和接口，以便能够最大限度地实现这一点。

**ICar接口**

```
public interface ICar
{
    int Id { get; set; }
    string Brand { get; set; }
    string Year { get; set; }
} 
```

**车**

```
public class Car : ICar
{
    public int Id { get; set; }
    public string Brand { get; set; }
    public string Year { get; set; }
} 
```

**ICarRepository 接口**

```
public interface ICarRepository
{
    void SaveCar(ICar car);
} 
```

**汽车存储库**

```
public class CarRepository : ICarRepository
{
    public void SaveCar(ICar car)
    {
        throw new NotImplementedException();
    }
} 
```

**ICarController 接口**

```
public interface ICarController
{
     void SaveCar(ICar car);
} 
```

**汽车控制器**

```
public class CarController : ICarController
{
     private readonly ICarRepository _carRepository;

     public CarController(ICarRepository carRepository)
     {
         _carRepository = carRepository;
     }

     public void SaveCar(ICar car)
     {
          _carRepository.SaveCar(car);
     }
} 
```

**那么你也能：**

```
ICarRepository carRepository = new CarRepository();
ICarController carController = new CarController(carRepository);
ICar carOne = new Car { Id = 1, Brand = "Ford", Year = "2010" };
ICar carTwo = new Car { Id = 2, Brand = "Dodge", Year = "1999" };

carController.SaveCar(carOne);
carController.SaveCar(carTwo); 
```

# iphone - iphone应用程序更换或更新？

> ID：12478223
> 
> 赞同：2
> 
> 时间：2012-09-18T13:40:27.033
> 
> 标签：iphone, ios

有一个现有的 iphone 应用程序，但它很无聊。但是，相同的应用程序应被另一个更现有的应用程序替换，但存储在每个客户端应用程序数据库中的所有数据都必须保留。

有没有办法编写一个全新的应用程序（考虑到上面的条件）或者我必须更新旧的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T13:54:20.560

我假设，通过替换，你的意思是一个完全不同的代码库。

只要您的旧无聊应用程序的 Bundle ID 和新的令人兴奋的应用程序的 Bundle ID 相同，就没有关系。新应用程序被视为更新。

如果您使用不同的 Bundle ID 发布同一个无聊的旧应用程序，那么它会被视为新应用程序，而不是更新。

所以，如果你想利用旧的无聊应用程序的数据，你必须确保 BundleID 保持不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T13:44:49.167

您可以只更新应用程序，更新和应用程序时不会触及沙箱文档目录中的所有数据。

如果您编写一个新应用程序，则无法获取旧应用程序的数据，除非您可以从例如服务器获取它们。

如果您使用过 CoreData，请务必将原始 CoreData 模型复制到新应用程序中。

# sql-server - 如何将存储过程的结果放入表变量中？

> ID：12478228
> 
> 赞同：4
> 
> 时间：2012-09-18T13:40:31.943
> 
> 标签：sql-server, tsql, variables, stored-procedures

我正在使用 SQL Server 2005。

我的存储过程返回 100 列并有 10 页。

我只需要返回 5 列，并且不想通过创建新的存储过程来复制 10 页的存储过程。

我想避免定义一个包含 100 列的新表变量！我想避免定义 LinkServer 并使用 OPENROWSET 因为服务器名称等不应该是硬编码的。

有没有更简单/更好的方法？

如果有，怎么写？下面的代码不起作用：

```
select ID, Title, (the remaining 3 columns)
from exec dbo.sp_myName 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:25:25.590

您可以使用存储过程返回的所有列创建一个临时表，然后使用：

```
Insert Into #TempTable
Exec dbo.sp_myName

Select    ID, Title,...
From      #TempTable 
```

# c# - 如果您的 SQL 服务器不再可访问，如果 ObjectContext.Refresh 方法无法连接到您的 SQL 服务器以执行刷新，会发生什么情况？

> ID：12478232
> 
> 赞同：2
> 
> 时间：2012-09-18T13:40:43.543
> 
> 标签：c#, sql, entity-framework

我正在使用实体框架，我想知道如果您的 SQL 服务器不再可访问，ObjectContext.Refresh 方法无法连接到您的 SQL 服务器以执行刷新会发生什么。

据我所知，这篇 MSDN 文章没有显示此方法的任何相关异常：http: [//msdn.microsoft.com/en-us/library/bb896255 (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bb896255%28v=vs.90%29.aspx)

那么在这种情况下实际发生了什么？在我的具体情况下，我正在尝试刷新实体数据模型访问器表：`_entities.Refresh(System.Data.Objects.RefreshMode.StoreWins, _entities.ProfilesTable);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:53:19.413

它会抛出一个`EntityException`包含特定于提供程序的异常。

# embedded - 我可以将大型 Ada 程序放在嵌入式系统中吗？

> ID：12478234
> 
> 赞同：0
> 
> 时间：2012-09-18T13:40:47.720
> 
> 标签：embedded, microcontroller, ada

我想知道我使用的大型 Ada 程序是否可以在微处理器或微控制器上运行，因为我正在探索在具有低功耗要求的专用封装中实现它的可能性。

该程序在 Ada 95 中包含 500 多个源文件，在 Win XP 中编译为 10MB 的可执行文件，并使用高达 200MB 的内存运行。它不需要多个线程，也不需要“实时”运行。

这对于这种规模的程序是否有意义？如果是这样，操作系统有哪些选择？对代码的修改是否广泛以使其与操作系统兼容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:20:29.073

您目前看到的很多如此大的尺寸很可能与程序在 XP 这样的大型操作系统上运行所需的东西有关。

当然，你的程序可能实际上依赖于一堆巨大的数组或其他东西，而且它不可能适合。我真的不能从这里说出来。

如果是我，我会联系我正在考虑的平台的 Ada 供应商，并寻求他们对可行性研究的帮助。通常，嵌入式目标上的 Ada 编译器的许可证会占用足够多的资金，以至于供应商很乐意像这样为您提供一些单独的预售关注。

我还应该提到一件事。Ada 有一个非常广泛的运行时库。它包括一个完整的任务和任务同步内核。Windows 或 Linux 等“大型操作系统”上的程序通常会引入这些东西，即使它们不需要它。大多数编译器都提供了一种去除不需要的杂物的方法，而小型嵌入式目标上的编译器当然*必须*这样做。因此，如果您针对较小的平台进行构建，那么它可能会自行消失。如果您愿意，您可以查看[Gnat 的说明以最小化其运行时开销](http://docs.adacore.com/gnat-hie-docs/html/gnathie_ug_5.html)。即使那不是您的供应商，它也应该向您展示一些可能涉及的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:46:52.117

听起来很适合 Raspberry-Pi，它将 Gnat 作为其 Debian (Raspbian) 发行版的一部分。如果 200MB 的内存占用只是数据，您可能需要注意它的内存占用...

# c++ - 奇怪的分割违规

> ID：12478238
> 
> 赞同：1
> 
> 时间：2012-09-18T13:40:53.160
> 
> 标签：c++, crash, segmentation-fault, stack-trace

我有一个崩溃，从我的日志：

```
15:21:12  1645 Wrk-0.14 | *** Break ***: segmentation violation 
```

堆栈跟踪是：

```
===========================================================
There was a crash.
This is the entire stack trace of all threads:
===========================================================
...
#4  <signal handler called>
#5  0x00002b5eeef98865 in HiggsSelector::RejectBadJet (this=0x1de241a0, 
    index_jet=0, index_leading=0, index_subleading=1) at HiggsSelector.C:2375 
```

功能是：

```
bool HiggsSelector::RejectBadJet(int index_jet, int index_leading, int index_subleading) const
{
    assert(index_jet >= 0);
    assert(index_leading >= 0);
    assert(index_subleading >= 0);
    assert(PV_z);
    int index_PV_ID_chosen=0; //<-----in your header
    double DiPhoton_zcommon=z_common_corrected(index_leading,index_subleading,false);
    float minimal_distance=9999;
    for (unsigned int index_PV=0;index_PV<PV_z->size()-1;index_PV++) {
      if ( fabs((*PV_z)[index_PV]-DiPhoton_zcommon)<minimal_distance) { 
```

最后一行是数字 2375。我真的不理解这次崩溃是如何发生的，我想我已经用`assert`s 检查了一切。`PV_z`是一个`*std::vector<float>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:12:54.557

如果`PV_z->size() == 0`，则`PV_z->size()-1`下溢到`UINT_MAX`，并且您很容易得到分段违规，因为 for 循环条件始终为真。

一种解决方法：

```
for (unsigned int index_PV=0; !PV_z->empty() && index_PV<PV_z->size()-1;index_PV++) {
                            //^^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:14:21.573

不要丢弃 PV_z 指向*的 moon*，这将绕过断言。

# asp.net - 通过 Sharepoint Web 服务访问 Sharepoint 文档库

> ID：12478242
> 
> 赞同：0
> 
> 时间：2012-09-18T13:41:04.977
> 
> 标签：asp.net, sharepoint

有没有人有关于如何通过 .Net 中的 Sharepoint Web 服务访问 sharepoint 文档库的代码

如果您进行谷歌搜索，代码是可用的，但它们都不起作用。

这是我正在尝试的代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Xml;
using Microsoft.SharePoint;
using Microsoft.SharePoint.Utilities;
using Microsoft.SharePoint.WebControls;
using System.Web;
using System.Web.Services;
using System.IO;
using System.Net;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            XmlDocument xmldoc = new System.Xml.XmlDocument();

            string URL = "";

            string FileName = "";

            DownloadListItems.Lists objLists = new EncryptAndDecrypt.DownloadListItems.Lists();

            objLists.Credentials = System.Net.CredentialCache.DefaultCredentials;

            objLists.Url = "{siteurl}/_vti_bin/lists.asmx";

            XmlDocument xmlDoc = new System.Xml.XmlDocument();

            XmlNode xmlQuery = xmlDoc.CreateNode(XmlNodeType.Element, "Query", "");

            XmlNode xmlViewFields = xmlDoc.CreateNode(XmlNodeType.Element, "ViewFields", "");

            XmlNode xmlQueryOptions = xmlDoc.CreateNode(XmlNodeType.Element, "QueryOptions", "");

            xmlQueryOptions.InnerXml = "<ViewAttributes Scope='RecursiveAll' IncludeRootFolder='True' />";

            xmlViewFields.InnerXml = "";

            xmlQuery.InnerXml = "";

            try
            {

                XmlNode xmlListItems = objLists.GetListItems("Shared Documents", null, xmlQuery, xmlViewFields, null, xmlQueryOptions, null); //change the document library name to your document library

                XmlNodeList oNodes = xmlListItems.ChildNodes;

                foreach (XmlNode node in oNodes)
                {
                    XmlNodeReader Reader = new XmlNodeReader(node);

                    while (Reader.Read())
                    {
                        if (Reader["ows_EncodedAbsUrl"] != null && Reader["ows_LinkFilename"] != null)
                        {
                            URL = Reader["ows_EncodedAbsUrl"].ToString();

                            FileName = Reader["ows_LinkFilename"].ToString();

                            CopyAndSaveAttachment(URL, FileName);
                        }

                    }

                }

                Console.ReadLine();
            }

            catch (System.Web.Services.Protocols.SoapException ex)
            {
                throw ex;
            }

        }

        public static void CopyAndSaveAttachment(string URL, string FileName)
        {

            HttpWebRequest request;

            HttpWebResponse response = null;

            try
            {

                request = (HttpWebRequest)WebRequest.Create(URL);

                request.Credentials = System.Net.CredentialCache.DefaultCredentials;

                request.Timeout = 10000;

                request.AllowWriteStreamBuffering = false;

                response = (HttpWebResponse)request.GetResponse();

                Stream s = response.GetResponseStream();

                //Write to disk

                FileStream fs = new FileStream(@"C:\DownLoads\" + FileName, FileMode.Create);

                byte[] read = new byte[4096];

                int count = s.Read(read, 0, read.Length);

                while (count > 0)
                {

                    fs.Write(read, 0, count);

                    count = s.Read(read, 0, read.Length);

                }

                //Close everything

                fs.Close();

                s.Close();

                response.Close();

            }

            catch (Exception ex)
            {
                throw ex;

            }

        }
    }
} 
```

我得到的错误是：错误 1 ​​找不到类型或命名空间名称“DownloadListItems”（您是否缺少 using 指令或程序集引用？） c:\users\fox7lsh\documents\visual studio 2010\Projects\ WindowsFormsApplication2\WindowsFormsApplication2\Form1.cs 36 13 WindowsFormsApplication2

问候

# jquery - 为什么我们会在 jQuery HTTP GET 请求中缺少一个请求参数？

> ID：12478243
> 
> 赞同：3
> 
> 时间：2012-09-18T13:41:06.287
> 
> 标签：jquery

在我们网站的一个页面上，我们有一个包含四个输入字段的表单，用于输入信用卡号的四个四位数字部分。在表单提交时，这些字段用于通过 jQuery 创建对我们服务器的 GET 请求，对于我们 99.999% 的客户来说，这非常有效。

但是有一个客户在提交此表单时遇到问题。在 nginx 日志中，我们只有最后三个请求参数 - 从**CardNumber2**到**CardNumber4**，缺少**CardNumber1**。（虽然正常的请求看起来像 ... **&CardNumber1=4111&CardNumber2=1111&etc**，但这个请求看起来像 ... **&CardNumber2=1111&CardNumber3=** ...）

什么可能导致提交时跳过此字段？此字段与其他三个信用卡字段之间没有绝对区别。客户端浏览器具有以下用户代理：

```
Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1 
```

（这只是 Win x64 上最新的 15.01 FF）。

我们在客户的计算机上有此页面的屏幕截图，在所有四个信用卡字段中输入了绝对正常的数字。

某些安全软件或浏览器插件可以从请求中删除 CardNumber1 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:56:50.433

您在前端获取表单值的代码是什么样的？另外，您使用什么后端语言来接收表单值以及它的外观。如果您已经看到 3 个表单输入填充到您的数据库或您发送信息的位置，那么我猜您可能有后端问题。

# addthis - 使用 AddThis 打印机友好选项时包括网站徽标

> ID：12478248
> 
> 赞同：0
> 
> 时间：2012-09-18T13:41:17.840
> 
> 标签：addthis

我正在使用 AddThis 共享工具栏并实现了打印机友好选项，该选项从页面中删除所有无关项目（侧边栏、导航、图像等）。但是，当用户参与此选项时，我想包含网站徽标。当有人使用打印机友好选项时，有没有办法告诉页面包含徽标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:09:09.193

要为您的站点指定自定义图像，请在该部分中指定以下内容：

```
<link rel="icon" type="image/png" href="/images/mylogo.png"/> 
```

如果您已经指定了一个图标但想要指定不同的图像，您可以使用以下内容：

```
<p class="print-yes" style="display:none"><img src="/mylogo.png">This is my tagline</p> 
```

更多信息在这里：

[http://support.printfriendly.com/customer/portal/articles/206478-add-your-logo-to-printed-page-and-pdf](http://support.printfriendly.com/customer/portal/articles/206478-add-your-logo-to-printed-page-and-pdf)

# java - 设置滚动视图的边距

> ID：12478249
> 
> 赞同：2
> 
> 时间：2012-09-18T13:41:23.387
> 
> 标签：java, android, layout, scrollview, android-framelayout

我正在尝试在框架布局中使用滚动视图。滚动视图应显示在显示屏的下半部分。

目前定位是对的：

[http://www.gtv-handball.de/Unbenannt.png](http://www.gtv-handball.de/Unbenannt.png)

如您所见，正确的区域是否可缩放。但问题是，不能再点击上半部分了，因为滚动视图在这部分上面。

为了在下半部分显示滚动视图，我在上面加了一些填充：

```
scrollviwe = (ScrollView)findViewById(R.id.linlayout);
scrollview.setPadding(0, 175, 0, 0); 
```

所以我没有找到任何方法来使用填充选项显示它。

**我认为，没有办法绕过为滚动视图设置边距，但我该怎么做呢？**

这是完整但缩短的 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
   android:orientation="vertical" >
    <FrameLayout
        android:id="@+id/framelayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top|left" >
         <ImageView
         android:id="@+id/coverimg"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:layout_gravity="top|left"
         android:maxHeight="100dp"
         android:minHeight="130dp"
         android:minWidth="130dp"
         android:src="@drawable/cover_img" />
</FrameLayout>
<ScrollView
android:id="@+id/linlayout"
android:layout_width="match_parent"
android:layout_height="wrap_content">
<LinearLayout
android:id="@+id/linlayout2"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >
    <Button
    android:id="@+id/teilen"
    style="ButtonStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/btn_blue"
    android:gravity="center_vertical|center_horizontal"
    android:padding="4dp"
    android:text="Teilen"
    android:layout_margin="4dp"
    android:layout_weight="1" />
    <Button
    android:id="@+id/kaufen"
    style="ButtonStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/btn_blue"
    android:gravity="center_vertical|center_horizontal"
    android:padding="4dp"
    android:text="Kaufen"
    android:layout_margin="4dp"
    android:layout_weight="1"/>
    <Button
    android:id="@+id/youtube"
    style="ButtonStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/btn_blue"
    android:gravity="center_vertical|center_horizontal"
    android:padding="4dp"
    android:text="YouTube"
    android:layout_margin="4dp"
    android:layout_weight="1" />
</LinearLayout>
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Zuletzt gehört:" />
</LinearLayout>
</ScrollView>
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:05:54.670

您是否尝试过使用[RelativeLayout](http://developer.android.com/guide/topics/ui/layout/relative.html)？如果我正确理解您的目标，管理屏幕上的所有不同视图可能会更容易，因为您可以将视图相对于彼此或屏幕边框对齐。它也可以以与 FrameLayouts 类似的方式使用，将视图叠加在另一个之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:00:45.347

我建议你包装一个线性布局。因为使用权重更容易管理它在屏幕上占用的空间。

你可以试试这个。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:weightSum="1" >

<LinearLayout
android:id="@+id/framelayout"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_gravity="top|left"
android:layout_weight="0.5" 
android:orientation="horizontal" 
android:weightSum="1">

<ImageView
    android:id="@+id/coverimg"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_gravity="top|left"
    android:maxHeight="100dp"
    android:minHeight="130dp"
    android:minWidth="130dp"
    android:src="@drawable/ic_launcher"
    android:layout_weight="0.5" />
<LinearLayout android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="0.5">
    <TextView android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Add Text"/>
    <!-- Add other views -->
  </LinearLayout>
</LinearLayout>

<ScrollView
android:id="@+id/linlayout"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_weight="0.5" >

<LinearLayout
    android:id="@+id/linlayout2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/teilen"
            style="ButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="4dp"
            android:layout_weight="1"
            android:gravity="center_vertical|center_horizontal"
            android:padding="4dp"
            android:text="Teilen" />

        <Button
            android:id="@+id/kaufen"
            style="ButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="4dp"
            android:layout_weight="1"
            android:gravity="center_vertical|center_horizontal"
            android:padding="4dp"
            android:text="Kaufen" />

        <Button
            android:id="@+id/youtube"
            style="ButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="4dp"
            android:layout_weight="1"
            android:gravity="center_vertical|center_horizontal"
            android:padding="4dp"
            android:text="YouTube" />
    </LinearLayout>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Zuletzt gehört:" />
</LinearLayout>
</ScrollView>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:03:06.283

尝试为 ScrollView 之外的视图设置边距或填充。在这种情况下，它将是 FrameLayout。

# iphone - 如何在 UIViewController 之外创建 UIView？

> ID：12478250
> 
> 赞同：2
> 
> 时间：2012-09-18T13:41:34.973
> 
> 标签：iphone, objective-c, xcode, uiview, uiviewcontroller

我想在从 classA 调用的 classB 中创建一个 UIView，以显示在 MainView（我的 UIViewController）上。

![插图](../Images/846fdc453e79632d7a9f0b2415b80637.png)

谁能帮我修复我的代码？

A类：

```
+ (void)trigger
{
    [classB viewOn:[MainView new]];
} 
```

B类：

```
+ (void)viewOn:(id)sender
{
    MainView *pointer = (MainView *)sender;

    classB *view = [[classB alloc] initWithFrame:CGRectMake(380, 200, 100, 50)];
    view.backgroundColor = [[UIColor greenColor] colorWithAlphaComponent:0.5f];
    view.userInteractionEnabled = YES;

    UILabel *lab = [UILabel new];
    lab.frame = CGRectMake(0, 0, 100, 50);
    lab.text = @"test";

    [view addSubview:lab];
    [pointer.view addSubview:view];
} 
```

当我使用 MainView 类通过 [classB viewOn:self] 调用 classB 时，它工作正常。但是如果我想从classA触发它，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:17:52.910

> 当我使用 MainView 类通过 [classB viewOn:self] 调用 classB 时，它工作正常。

那是因为你正在投射`sender`到`MainView *`.

> 但是如果我想从classA触发它，我该怎么办？

如果你想从 ClassA 做同样的事情，你需要一个指向 MainView 实例的指针才能传入。我看到你已经在尝试这样做了......

> `[classB viewOn:[MainView new]];`

这可能不是初始化 MainView 的正确方法，尽管......视图通常用`alloc`后跟`initWithFrame:`.

在你花太多时间试图让这一切正常工作之前，你应该考虑一下你的对象在这里扮演的不同角色。通常，您会使用视图控制器来管理视图层次结构的创建和配置。视图控制器在这里有用的一种方法是保留对 MainView 实例的引用。然后，您的视图控制器可以实例化 ClassB 并将该新视图添加到 MainView。您似乎正试图让您的 ClassA 作为视图控制器和视图工作——这可能只会使事情变得混乱，并使您更难以学习在 Objective-C 和 Cocoa Touch 中有效工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:02:35.770

使用委托。这很简单。你所要做的就是去`ClassA`。让它看起来像这样

```
@interface ClassA: NSObject <ClassB> 
```

现在你可以从`ClassA`.

希望我能有所帮助，因为我对 Objective-c 有点陌生。

# c# - 为什么我的 @ 字符串中的 \ 字符会加倍？

> ID：12478255
> 
> 赞同：3
> 
> 时间：2012-09-18T13:41:46.613
> 
> 标签：c#, string

```
var phone = @"^\+(?:[0-9] ?){6,14}[0-9]$"; 
```

然后电话将等于`^\\+(?:[0-9] ?){6,14}[0-9]$`

我认为（并且我发现的示例似乎表明）@ 字符意味着我的字符串是如何拥有它的。为什么它会加倍 \ 以及如何阻止它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T13:44:07.747

Visual Studio 调试器会将其*显示*为双倍，因为在 C# 中，\ 将在转义序列之前。别担心 - 你的字符串没有改变。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T13:44:14.207

它*看起来*只是在调试检查器中翻了一番。

请注意，检查器中显示的字符串*不*以开头`@`- 它们显示如果您要在没有`@`. 这两种形式是等价的。

如果您真的担心字符串的内容，请将其输出到控制台应用程序中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T13:50:25.480

以另一种方式重申，比较

```
var equal = @"^\+(?:[0-9] ?){6,14}[0-9]$" == "^\\+(?:[0-9] ?){6,14}[0-9]$" 
```

永远都是`true`。一样，

```
var equal = @"\" == "\\"; 
```

[如果您使用文本可视化工具检查变量，您将看到普通的未转义字符串，就像您逐字](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)声明它时一样。

# java - 在 Java 中传递可选的匿名参数

> ID：12478256
> 
> 赞同：1
> 
> 时间：2012-09-18T13:41:53.830
> 
> 标签：java, parameter-passing, anonymous-types, optional-parameters

我有两个类 A 和 B。A 有一个方法，比如说 foo，它可以有任意数量的任意类型的参数。该方法将这些参数中继到具有预定数量的预定类型的参数的方法。

```
Class A{
   foo(<?> ... params){
      (new B()).bar(params);
   }
} 

Class B{
   bar(int a, int b){
       Log.v("The params passed are "+a+" and "+b);
   }
}

Class Caller{

    callingMethod(){
        (new A()).foo(1, 2);
    }
} 
```

我知道编译器不允许我为 foo 写下的签名；我写它只是为了解释我想要实现的目标。

我不想在 B 类的 bar(int, int) 中进行任何转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:48:26.003

您可以使用可变参数...

```
public static void foo(Object... parameters ){

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:47:31.537

您可以添加有限数量的参数，这些参数在可变参数之前是固定的。这是在`EnumSet`

我已更改为`foo`接受 3 个参数的方法，以`E e1, E e2, E... params`确保我有至少 2 个参数来调用`bar(e1, e2)`方法。

`<E extends Number>`确保您可以传递`Number` `Integer`恰好是一个的任何子类。

```
static class A {
    <E extends Number> void foo(E e1, E e2, E... params) {
        (new B<E>()).bar(e1, e2);
    }
}

static class B<E extends Number> {
    public void bar(E a, E b) {

    }
}

public static void main(String[] args) {

    A name = new A();
    name.foo(1, 2, 123);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T14:22:16.077

正如其他人所建议的那样，您可以接受可变数量的`Object`s 作为函数参数。棘手的一点是打开包装以调用`bar`. `B`我已经整理了一个示例，说明如何使用反射来做到这一点：

```
import java.lang.reflect.Method;

public class test {
  static class A {
    private final Class cl;
    A(Class cl) { 
      this.cl = cl;
    }
    void foo(Object ... params) throws Exception {
      Object obj = cl.newInstance();
      for (Method m : cl.getMethods()) {
        if (m.getName().equals("bar")) {
          try {
            m.invoke(obj, params);
            return;
          }
          catch(IllegalArgumentException ex) {} // try next overload
        }
      }
      throw new IllegalArgumentException();
    }
  }

  static class B {
    public void bar() {
      System.out.println("Got nothing");
    }

    public void bar(double a, double b) {
      System.out.println("Got doubles");
    }

    public void bar(int a, int b) {
      System.out.println("Got: " + a + " and " + b);
    }
  }

  public static void main(String argv[]) throws Exception {
    new A(B.class).foo(1,2);
    new A(B.class).foo();
    new B().bar(1,2);
    new A(B.class).foo("Hello");
  }
} 
```

但是您会注意到，这里的重载解决方案远非完美，并且传入`1,2`调用. 要解决这个问题，您需要通过与给定的每个对象的最佳匹配来对对象数组进行排序，但据我所知，这远非微不足道。`double,double``bar``Method``Class`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T13:57:33.077

Java中的可变参数：

```
foo(Object... objs) {} 
```

例子：

```
public static void main(String... args) {} 
```

相当于

```
public static void main(String[] args) {} 
```

注意：只要方法签名中没有剩余参数，就相当于使用数组。

# javascript - 使用 Jquery 从 url 获取响应

> ID：12478258
> 
> 赞同：0
> 
> 时间：2012-09-18T13:42:02.117
> 
> 标签：javascript, html, http, jquery

我正在使用 jquery 发出 GET 请求但没有得到响应可能是什么问题？下面是html代码。我收到警报显示

*请任何人提供一些运行示例，其中应该使用一些我也可以访问的知名网站，例如[http://www.google.co.in](http://www.google.co.in)或[http://www.jlcindia.com](http://www.jlcindia.com)*

> 错误：错误

```
<html>
<script type="text/javascript" src="jquery-1.8.1.min.js"></script>
<Script Language="JavaScript">

function getFullName(){
            //alert('fun call');

                $.ajax({
                    type: "GET",
                    url: "http://www.jlcindia.com",
                    dataType: "html",
                    success: function(data) {
                        alert('success'+data);
                    },
                    error: function(xhr, textStatus, errorThrown) {
                                if (textStatus !== null) {
                                    alert("error: " + textStatus);
                                } else if (errorThrown !== null) {
                                    alert("exception: " + errorThrown.message);
                                }
                                else {
                                    alert ("Don't know what is error");
                                }
                            }
                });               
        }
</Script>
<body>
<input type="button" value="Show Full Name" onClick="getFullName()">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:38:37.427

您正在向不同的域发出 ajax 请求。[由于相同的原产地政策](http://en.wikipedia.org/wiki/Same_origin_policy)，这将不起作用

示例：您的站点托管在 www.mydomain.com 上，并且您正尝试通过 ajax 访问 www.otherdomain.com。这是不可能的。

Ajax 请求仅在与托管脚本相同的域上工作。

# html - 正确的 CSS 格式

> ID：12478264
> 
> 赞同：1
> 
> 时间：2012-09-18T13:42:32.460
> 
> 标签：html, css, tablelayout

我有一个循环出所有行的 PHP 表。我想让文本浮动在表格行的中间，但将行的整个宽度+高度作为锚点。

我所拥有的是每行 9 个 TD。所以我对每个 TD 应用了一个锚点。我试图做 td p 并将高度设置为 50% 或垂直对齐中间，但这不起作用。我想我需要从 CSS 重新开始。

我的问题是：

有没有人有 CSS 代码将 TR 高度应用到 70 像素，宽度 100%。TD 为 70px 高。然后将 TD（或 TR）的整个区域作为可点击的锚点，文本浮动在 TR 高度的中间。

问候开局

更新：

这是我的 CSS 和 PHP [http://jsfiddle.net/j8ptc/](http://jsfiddle.net/j8ptc/)显然它不会正确显示，因为它的 PHP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:10:53.820

这个应该可以的。

```
 table {
   width: 100%
   border-collapse: collapse;
}
table td {
   border: 1px solid black;
}
table td a{
   height: 70px;
   display: inline-block;
   width: 200px;
   padding: 3px;
   text-decoration: none;
}

table td a {
    text-align: center;
    line-height: 70px;
}​ 
```

这是一个[结果](http://jsfiddle.net/jcurran/wcafu/2/)。

编辑：

移除

```
line-height: 70px; 
```

并添加

```
word-wrap: break-word; 
```

将占长文本行，但它使垂直对齐变得困难。

如果单元格的内容是动态的（或其他未知的），这似乎会造成问题。 [这是另一个关于它的问题](https://stackoverflow.com/questions/7939148/cant-vertically-align-a-link-in-a-table-cell)以供参考。祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T13:52:33.243

使用 TR 或 TD 元素内的 onclick="" 属性使整行或整个单元格可单击。

使用[此站点](http://phrogz.net/css/vertical-align/index.html)来帮助进行垂直对齐。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-18T14:27:49.637

最好的解决方案可能是完全忽略您的锚点，而是将点击事件添加到行（或者，更好的是，添加到表中并检测目标）。使用 CSS，您可以更改光标以指示链接。

PHP：

```
echo '<table id="yourTable">';

while ($row = mysql_fetch_array($result))
{
    echo '<tr class="record" data-id="'.$row['id'].'">';
    echo '<td>'.$row['company'].'</td>';
    echo '<td>'.$row['project'].'</td>';
    echo '<td>'.$row['assignee'].'</td>';
    echo '<td>'.$row['current_milestone'].'</td>';
    echo '<td>'.$date=date("d-m-Y", strtotime($row['start_date'])).'</td>';

    // etc.

    echo '</tr>'
}

echo '</table>'; 
```

JavaScript：

```
var table = document.getElementById('yourTable');

table.onclick = function(e)
{
    e = e || window.event;

    var target = e.target || e.srcElement,
        id;

    if (target.tagName === 'TD')
    {
        target = target.parentNode;
    }

    if (target.tagName === 'TR' && target.className === 'record')
    {
        window.open('update.php?id=' + id, 'updateWindow');
    }
} 
```

CSS：

```
tr
{
    cursor: pointer;
}

td
{
    height: 70px;
} 
```

# c# - 锁定文件块

> ID：12478271
> 
> 赞同：2
> 
> 时间：2012-09-18T13:43:12.677
> 
> 标签：c#, .net

我有一个 192k 大小的文件，我想锁定文件的中间。

例如）我想用 c# 锁定文件的 64k-128k。知道如何锁定文件的那部分吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T13:47:03.143

您需要使用[LockFileEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365203%28v=vs.85%29.aspx)

> 锁定指定文件以供调用进程独占访问。此函数可以同步或异步操作，并且可以请求排他锁或共享锁。

您正在寻找共享锁。

```
[DllImport("kernel32.dll")]
static extern bool LockFileEx(IntPtr hFile, uint dwFlags, uint dwReserved,
   uint nNumberOfBytesToLockLow, uint nNumberOfBytesToLockHigh,
   [In] ref System.Threading.NativeOverlapped lpOverlapped); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T13:46:50.273

您可能想查看 Windows API 中的[LockFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365202%28v=vs.85%29.aspx)函数。同一页还提到了一个`LockFileEx`功能。耶！玩得很开心；）

pinvoke 网站上有一个页面：[http ://www.pinvoke.net/default.aspx/kernel32.lockfile](http://www.pinvoke.net/default.aspx/kernel32.lockfile)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T13:44:42.457

您不能使用`System.IO`. 如果您对文件有一个打开的句柄，则整个文件将被锁定。

您可以使用 WinAPI 执行此操作。

## 查看[在 C# 中使用 LockFileEX](https://stackoverflow.com/questions/1784195/using-lockfileex-in-c-sharp)

# ruby - Nokogiri 用于在独特的标签集之间选择文本和 html

> ID：12478272
> 
> 赞同：1
> 
> 时间：2012-09-18T13:43:12.850
> 
> 标签：ruby, xpath, css-selectors, nokogiri

我正在尝试使用 Nokogiri 来提取两个独特标签集之间的文本。

在 and之间获取 p-tag 中的文本，然后在`<h2 class="point">The problem</h2>`and之间获取所有 HTML 的最佳方法是什么？`<h2 class="point">The solution</h2>``<h2 class="point">The solution</h2>``<div class="frame box sketh">`

完整的 html 示例：

```
<h2 class="point">The problem</h2>
<p>TEXT I WANT </p>
<h2 class="point">The solution</h2>
HTML I WANT with it's own set of tags (but never an <h2> or <div>)
<div class="frame box sketh"><img src="URL for Image I want later" alt="" /></div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:58:17.193

```
require 'nokogiri'

doc = Nokogiri.HTML(DATA)
doc.search('//h2/following-sibling::node()[name() != "h2" and name() != "div" and text() != "\n"]').each do |block|
  p block.text
end

__END__
<h2 class="point">The problem</h2>
<p>TEXT I WANT</p>
<h2 class="point">The solution</h2>
<div>dont capture this</div>
<span>HTML I WANT with it's <p>own set <b>of</b> tags</p></span>
<div class="frame box sketh"><img src="URL for Image I want later" alt="" /></div> 
```

输出：

```
"TEXT I WANT"
"HTML I WANT with it's own set of tags" 
```

此 XPath 选择所有后续的兄弟节点，`h2`这些节点不是 a `h2`，`div`或者只包含字符串`"\n"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:02:43.933

这是您如何在包含类**点的两个 h2 之间获取 p 标签文本的方法**

```
//h2[@class="point"][1]/following-sibling::p[./following-sibling::h2[@class="point"]]/text() 
```

对于**第二**个，您应该探索[w3schools](http://www.w3schools.com/)，并以第一个为例并执行此操作。

# javascript - 参数函数中未定义。什么时候应该使用它？

> ID：12478277
> 
> 赞同：2
> 
> 时间：2012-09-18T13:43:29.980
> 
> 标签：javascript

我看到了一些 javaScript，比如[Backbone-relational](https://github.com/PaulUithol/Backbone-relational)是这样写的：

```
( function( undefined ) {
    "use strict";
        // some code
})(); 
```

我的问题是：什么时候应该使用未定义的参数？总是或在特殊情况下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:47:40.773

在 Javascript 中，`undefined`不是一个特殊的关键字。它是一个常规的全局变量。

如果`undefined`被外部代码更改，可能会导致奇怪的错误。有些人在他们的函数声明中声明了一个未使用的参数，`undefined`因此该函数将有一个`undefined`使用已知值调用的变量`undefined`。

`var undefined`在函数体中做同样的事情，但需要更多的字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:46:01.510

大多数时候，当您看到该模式时，他们会确保“未定义”是真正未定义的。看看他们如何在底部不传递任何参数。

这是一个自执行函数，您可以将参数传递给它。

> ```
> (function(undefined) {  // no parameters are passed in so undefined is undefined.
>  "use strict";
> 
> })(/*no parameters passed*/) 
> ```

如果您的代码正在使用 undefined 并且您需要确保其他一些 javascript 库不会改变 undefined 的含义，那么您将需要使用此模式。然而，这并不是经常发生的事情，它只是一个安全网。由于某种原因，javascript 'undefined' 可以像任何其他变量一样设置一个值。

# objective-c - 在 MainStoryboard 中将 UIView 更改为另一个

> ID：12478284
> 
> 赞同：2
> 
> 时间：2012-09-18T13:43:44.830
> 
> 标签：objective-c, uiview

我有一个基于选项卡的应用程序，其中某些部分适用于所有人，但用户应该注册访问，所以，我想将 UIView 更改为登录。

登录视图分配在 MainStoryboard 的第一个选项卡中

![在此处输入图像描述](../Images/a7fa32a19de8eb9c5703d9b16462f438.png)

现在我在另一个选项卡，另一个部分（已经有一个 .xib 文件），我想显示“登录”视图：

```
 Login *aLogin = [[Login alloc] initWithNibName:@"LOGIN" bundle:nil];
 [self presentModalViewController:aLogin animated:YES]; 
```

但是由于LOGIN xib不存在而崩溃。

```
 Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 
```

如何加载“登录”uiview？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:51:16.730

我找到了！

```
 UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
 Login *aLogin = [storyboard instantiateViewControllerWithIdentifier:@"Login"];
 [self presentModalViewController:aLogin animated:YES]; 
```

# ios - Xcode 突然停止调试应用程序

> ID：12478286
> 
> 赞同：1
> 
> 时间：2012-09-18T13:43:46.657
> 
> 标签：ios, debugging, xcode4.3

我在从 Xcode 调试设备时遇到了一个神秘问题。在某些时候，Xcode 停止运行应用程序，导致设备上的应用程序崩溃，而在控制台中没有给我任何警告或错误，甚至应用程序不再在 Xcode 中运行。

注意：我的应用程序在第一次启动时下载了大约 30Mb 然后解析它们，它包含几个复杂的视图，所以可能是 iOS 出于某种原因（内存问题）停止了应用程序，但我不确定！！！

任何寻找/跟踪这个问题之王的线索/想法/建议将不胜感激

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:12:44.927

使用 NSLog 和 break ponts 或“Struments”来分析内存：

[http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T21:46:03.713

绝对拦截内存警告。

检查控制台，寻找 SigKill、EXC_BAD_ACCESS 和代码 9，这些都可能是内存。其他 SO 问题/答案将告诉您如何查找控制台日志。另外，您可能正在重复一个问题左右，我会先检查类似的帖子。iOS 应用程序崩溃是一个很好的开始。

祝你好运，并且总是阅读视图和视图控制器编程指南（或类似名称）指南以掌握它。

# c++ - C ++结合重载和覆盖会导致奇怪的行为

> ID：12478287
> 
> 赞同：1
> 
> 时间：2012-09-18T13:43:49.963
> 
> 标签：c++, overloading, overriding

考虑以下代码

```
class X{
public:
    virtual void foo(X x){  }
    virtual void foo(int index){ }

};

class Y : public X{
public:

    void foo(int index){ }
};

int main(){
    Y y;
    y.foo(X()); //Error, see below
} 
```

类`X`重载了虚`foo`方法。一个版本需要一个`X`，另一个版本需要一个`int`。现在类`Y`继承`X`并覆盖了方法`foo(int)`。该方法`foo(X)`不应被覆盖，它应该保持不变。

`Y`但是，在方法中创建类型对象`main`并调用`foo(X)`时，编译器会报错：

```
In function ‘int main()’:
error: no matching function for call to ‘Y::foo(X)’
note: candidate is:
note: virtual void Y::foo(int)
note:   no known conversion for argument 1 from ‘X’ to ‘int’ 
```

因此，唯一的候选者是被覆盖的`foo(int)`方法。似乎另一种方法已经消失了。如果我删除了覆盖版本，即声明`Y`为`public Y : public X{};`，那么一切正常。为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T13:49:00.107

当派生类定义一个与基类*同名*的成员时，派生类名称隐藏基类名称。

在您的情况下，该功能`Y::foo` *隐藏* `X::foo`. 您需要将其纳入`Y`as 的范围：

```
class Y : public X{
public:

    using X::foo;  //it brings X::foo into the scope of Y

    void foo(int index){ }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:28:22.153

重载适用**于在同一范围内定义的**名称。所以`foo`in class`Y`不会重载 class 中的`foo`s `X`，因为它们是在不同的作用域中定义的。这被非正式地称为“名称隐藏”。要将基类名称拉入派生类，请添加 using 指令：

```
using X::foo; 
```

# java - 我们应该使用哪些 Web 服务将 MDX 查询发送到 ActivePivot？

> ID：12478290
> 
> 赞同：0
> 
> 时间：2012-09-18T13:43:55.573
> 
> 标签：java, mdx, xmla, activepivot

在我们公司，用户已经通过标准前端（Excel）查询activepivot。但是我们想用 Java 构建一个自定义的 MDX 应用程序来查询 ActivePivot。目标是能够订阅多个特定视图并实时检索聚合数据更新，以便为我们的多个内部系统提供数据。

我知道 ActivePivot 实现**XMLA 标准**并具有**自定义 Web 服务**。但我想知道发送 MDX 查询的最佳选择是什么，为什么？XMLA 标准是否支持实时更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:26:47.130

ActivePivot 确实主要使用 MDX 语言进行查询。正如您所指出的，有几种不同的方法可以将 MDX 查询发送到 ActivePivot 并获得答案。

第一种也是最标准的方法是使用 XMLA 标准查询 ActivePivot。例如，当您使用 Excel、Tableau 或大多数支持 MDX 的 GUI 查询 ActivePivot 时，就会发生这种情况。但是，此方法仅对 ad-hoc 查询有效。您不能将 ActivePivot 的连续查询功能与 XMLA 一起使用。

为了注册连续查询，您需要使用 ActivePivot 附带的现有 Web 服务，特别是：

*   IdGenerator 服务
*   流媒体服务
*   长轮询服务

一般工作流程如下：

1.  创建一个监听线程，它将自己注册到 LongPolling 服务并监听一个特定的**域名**（比如 myDomain）。该线程将在循环中侦听事件并异步处理它们。
2.  将 MDX 查询注册到流服务。流属性应该告诉它将事件发布到 myDomain 域。

此时，侦听器线程将接收已注册 MDX 查询的当前结果集，然后将**仅**接收更改的单元格，因为它们的值会随着新事务的变化而变化。

这是查询注册的示例代码：

```
// Create my MDX query
final String mdx =
  "SELECT NON EMPTY {DrilldownLevel({[Bookings].[ALL].[AllMember]})} ON ROWS " + 
  "FROM [EquityDerivativesCube] " +
  "WHERE ([Measures].[contributors.COUNT])";
final IMDXQuery mdxQuery = new MDXQuery(mdx);

// Retrieve your various webservices
final IStreamingService streamingService = ...;
final ILongPollingService longPollingService = ...;
final IIdGenerator idGenerator = ...;

// Initiate a (long polling based) communication channel
final String listenerId = idGenerator.generateListenerIds(1)[0];
longPollingService.addListener(PUBLICATION_DOMAIN, listenerId);
new Thread(new Listener(longPollingService, listenerId)).start();

// Subscribe a continuous mdx query, events will be received
// through the communication channel.
final String mdxStreamId = idGenerator.generateListenerIds(1)[0];
final IStreamProperties mdxStreamProperties = new StreamProperties(
        mdxStreamId,
        PUBLICATION_DOMAIN,
        InitialState.STARTED,
        true);
streamingService.createStream(mdxQuery, mdxStreamProperties);

// From now on the listener will receive the real-time events 
```

这是一个简单的监听器代码：

```
public class Listener implements Runnable {

  final ILongPollingService service;
  final String listenerId;

  Listener(ILongPollingService service, String listenerId) {
    this.service = service;
    this.listenerId = listenerId;
  }

  @Override
  public void run() {
    for(int iteration = 0; iteration < 100; iteration++) {
      IBulkedStreamEvents events = service.listen(listenerId);
      if(events != null) {
        logger.log(Level.INFO, "Received events:");
        for(final IDomainStreamEvent domainEvent: events.getDomainEvents()) {
          for(final IStreamEvent event : domainEvent.getEvents())
            logger.log(Level.INFO, event.toString());
        }
      } else {
        logger.log(Level.INFO, "No events received.");
      }
    }
  }
} 
```

# php - PHP foreach 停留在第一个键中的值

> ID：12478291
> 
> 赞同：1
> 
> 时间：2012-09-18T13:43:56.373
> 
> 标签：php, loops, foreach

我有一个不同部门的多维数组，并且想使用 foreach 循环遍历它，但由于某种原因，foreach 循环在每次迭代中都会抓取第一个键下的值。

数组如下所示：

```
$departmentArray = 

Array
(
    [0] => Array
        (
            [dpt_id] => 5
            [dpt_name] => Administration
            [dpt_employees] => Array
                (
                [0] => Array
                    (
                        [started] => 2000-06-01
                        [stopped] => 9999-99-99
                        [empl_id] => 21
                    )

                [1] => Array
                    (
                        [started] => 2000-06-01
                        [stopped] => 2010-01-01
                        [empl_id] => 23
                    )
            )
    )

    [1] => Array
        (
            [dpt_id] => 6
            [dpt_name] => Warehouse
            [dpt_employees] => Array
                (
                [0] => Array
                    (
                        [started] => 2000-10-01
                        [stopped] => 2012-01-01
                        [empl_id] => 30
                    )

                [1] => Array
                    (
                        [started] => 2007-10-17
                        [stopped] => 9999-99-99
                        [empl_id] => 197
                    )
            )
    )
) 
```

foreach 循环如下所示：

```
foreach($departmentArray as $key => $value) {

    print_r($key);
    print_r($value['dpt_name']);

} 
```

这打印：

```
0 Administration 1 Administration. 
```

有谁知道，为什么循环不会在数组中向前移动并在第二次迭代期间获取键/索引 1 下的值（仓库）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:50:05.557

彻底陷入黑暗：

您之前`$value`在`foreach`循环中使用过作为参考，如下所示：

```
foreach ($foo as &$value) { ... }

foreach ($departmentArray as $key => $value) { ... } 
```

这是引用的一个众所周知的副作用。`unset($value)`在第一个循环之后。

# sql - 是否可以将 NULL 记录作为 ORDER BY 的最后结果？

> ID：12478294
> 
> 赞同：0
> 
> 时间：2012-09-18T13:44:10.607
> 
> 标签：sql, sql-server, null, sql-order-by

这是我的 SQL 查询：

```
SELECT     TOP (200) IDA
FROM         Categories
WHERE     (IDA = 72)
ORDER BY Order 
```

但它将带有 Order`NULL`的记录放在带有 Order as 的记录之前`int`。有没有改变这个顺序的策略？将记录放在`NULL`结果列表的底部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:48:17.933

是的：

```
SELECT     TOP (200) IDA
FROM         Categories
WHERE     IDA = 72
ORDER BY 
   CASE 
       WHEN [ORDER] IS NULL 
       THEN 0 
       ELSE 1
   END DESC, [Order] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T13:57:25.830

适用于任何类型：

```
select top(200) IDA from Categories
order by case when [order] is null then 1 else 0 end, [order] 
```

# c# - BackgroundWorker.RunWorkerCompleted 中引发的异常在 Application.ThreadException 处理程序中不可见

> ID：12478302
> 
> 赞同：0
> 
> 时间：2012-09-18T13:44:39.037
> 
> 标签：c#, exception-handling, backgroundworker

我正在使用后台工作程序，发现 RunWorkerCompleted 事件处理程序中引发的新异常在 Application.ThreadException 处理程序中不可见。例如：Program.cs 中的某处：

```
 [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        Application.ThreadException += delegate(object o, ThreadExceptionEventArgs args)
        {
            if (args.Exception != null)
                Console.WriteLine("thread error {0}", args.Exception.Message);
        };

        Application.Run(new Form1());
    } 
```

然后在按钮中单击（仅用于测试目的）

```
 var bw = new BackgroundWorker();
        bw.DoWork += delegate(object o, DoWorkEventArgs args) { /* some calculations here */ };
        bw.RunWorkerCompleted += delegate(object sender1, RunWorkerCompletedEventArgs eventArgs)
        { 
            try
            {
                //in run worker completed exception occurs
                throw new ApplicationException("test exception 1");
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
                Console.WriteLine("throwing new exception");
                throw new ApplicationException(string.Format("catched '{0}'", ex.Message), ex);
            }
        };

        bw.RunWorkerAsync(); 
```

程序输出如下：

*测试异常1*

*抛出新异常*

*线程错误测试异常1*

我相信在 Application.ThreadException 处理程序异常中应该出现文本*线程错误捕获“测试异常 1”*，而不是原始异常。

你能帮我吗 - 为什么会发生以及如何解决？这只是示例代码。实际代码中的 RunWorkerCompleted 处理程序中有几个嵌套方法。其中一些方法捕获异常，并在内部异常中抛出带有附加信息和原始异常的新异常。因此，在 Application.ThreadException 处理程序中，我不仅想获得抛出的原始异常，还想获得整个链。

谢谢

* * *

我发现 GetBaseException 不会因按钮单击引起的未处理异常而被调用（例如）

让我们假设 Program.Main 方法中有 TreadException 事件处理程序，如下所示：

```
 Application.ThreadException += (o, args) =>
        {
            Console.WriteLine("BEGIN ThreadException handler");
            ShowException(args.Exception);
            Console.WriteLine("END ThreadException handler\r\n");
        }; 
```

和 Program.ShowException 方法是这样的：

```
 static void ShowException(Exception ex)
    {
        var tab = "";
        while (ex != null)
        {
            Console.WriteLine("{1}error '{0}'", ex.Message, tab);
            tab += '\t';
            ex = ex.InnerException;
        }
    } 
```

当代码

```
 try
        {
            throw new ApplicationException("button click 1");
        }
        catch (Exception ex)
        {
            throw new ApplicationException(string.Format("BC caught '{0}'", ex.Message), ex);
        } 
```

在单击按钮时执行，它会产生以下输出：

*BEGIN ThreadException 处理程序*

*错误'BC 捕获'按钮单击 1''*

*   错误'按钮单击 1'*

*END ThreadException 处理程序*

如您所见 - 整个异常链都可用。

但是 ThreadException 处理程序仅显示 RunWorkerCompleted 事件处理程序中非常相似的代码的原始异常（下面的代码在按钮单击事件中执行）：

```
 var bw = new BackgroundWorker();
        bw.DoWork += delegate(object o, DoWorkEventArgs args) 
        { 
            /* some calculations here */
        };
        bw.RunWorkerCompleted += delegate(object sender1, RunWorkerCompletedEventArgs eventArgs)
        { 
            try
            {
                //in run worker completed exception occurs
                Console.WriteLine("RWC exception test, throwing");
                throw new ApplicationException("test exception 1");
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
                Console.WriteLine("RWC got exception, throwing new");
                throw new ApplicationException(string.Format("RWC caught '{0}'", ex.Message), ex);
            }
        };

        bw.RunWorkerAsync(); 
```

输出如下：

*RWC 异常测试，抛出*

*测试异常1*

*RWC 有异常，抛出新的*

*BEGIN ThreadException 处理程序*

*错误“测试异常 1”* ——这里只有原始异常

*END ThreadException 处理程序*

似乎 GetBaseException 仅针对 RunWorkerCompleted 事件执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:40:03.727

无论出于何种原因，框架都会调用`Exception.GetBaseException`您抛出的异常并使用*该*异常传递给`ThreadException`事件。如果您不希望这样，请不要传入基本/内部异常。

# jquery - jQuery 选择：更改事件不会从 AJAX 调用中触发

> ID：12478304
> 
> 赞同：2
> 
> 时间：2012-09-18T13:44:39.323
> 
> 标签：jquery, onchange, html-select, jquery-chosen

我在我的页面上使用 jQuery [Chosen](http://harvesthq.github.com/chosen/)，我想在每次选择新选项时运行一个函数。该函数隐藏`div`了 parent 中的所有 child `div`，然后只显示与所选选项相对应的那个。

HTML：

```
<select id="settings-select" data-placeholder="Choose&hellip;" class="chzn-select">
    <option value="setting1">Option 1</option>
    <option value="setting2">Option 2</option>
    <option value="setting3">Option 3</option>
    <option value="setting4">Option 4</option>
    <option value="setting5">Option 5</option>
    <option value="setting6">Option 6</option>
</select>

<div id="settings-tabs">
    <div id="setting1" class="tab">...</div>
    <div id="setting2" class="tab">...</div>
    <div id="setting3" class="tab">...</div>
    <div id="setting4" class="tab">...</div>
    <div id="setting5" class="tab">...</div>
    <div id="setting6" class="tab">...</div>
</div> 
```

JS：

```
var settingsShow = function(){
    var showPanel = $("#settings-select").find('option:selected').val();
    $("#settings-tabs .tab").hide();
    $("#" + showPanel).fadeIn("fast");
    alert(showPanel);
}

$(document).ready(function(){
    $("#settings-tabs .tab").hide();
    $("#settings-select").chosen().change(settingsShow);
}); 
```

到目前为止，所有这些都可以正常工作 - 当所选项目更改时，`settingsShow`称为（并且显示警报只是为了确认这一点）。

现在，我还有一个 AJAX 调用，它在完成时更改所选选项：

```
$("#settings-select").val("setting1").trigger("liszt:updated");
settingsShow(); 
```

这就是问题所在：一旦完成的 AJAX 调用更改了所选选项，选择先前选择的选项就不再触发更改事件。例如：

1.  选择“选项 2”：显示警报“选项 2”
2.  执行 AJAX 调用：完成后，选择“选项 1”并显示警报“选项 1”
3.  选择“选项 2”：没有任何反应

我知道这是 Chosen 的一个问题，特别是因为如果我使用 normal`select`代替它可以正常工作（在上面的第 3 步，我会收到一条显示“option2”的警报，就像我应该的那样）。但是正如您所看到的，我正在使用`.trigger("liszt:updated")`更新`select`AJAX 调用何时更改所选选项，所以我不明白为什么这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:31:50.597

事实证明，这是 Chosen 0.9.8（当前版本）中的一个合法错误。我更新到[最先进的版本](https://github.com/harvesthq/chosen/tree/master/chosen)（未正式发布）并且问题自行纠正，没有其他更改。

# asp.net-mvc-4 - Asp.Net MVC Bundle 不使用现有的 .min.js

> ID：12478306
> 
> 赞同：9
> 
> 时间：2012-09-18T13:44:45.980
> 
> 标签：asp.net-mvc-4, bundle, asp.net-optimization

我正在使用 Asp.Net MVC 4 和内置的捆绑支持。在 BundleConfig.cs 中，我在 RegisterBundles 方法中添加了默认的 jquery：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-{version}.js")); 
```

我也有两者`jquery-1.8.0.js`并`jquery-1.8.0.min.js`包含在我的项目中。

调试时一切正常，但是当我设置`debug="false"`测试捆绑时，它似乎正在缩小默认的 jquery 文件，而不是使用已经存在的缩小版本。当我在我的项目中查看 'min' 版本的 jquery 时，它在顶部包含一个小注释，第一个方法定义是`function(a,b)`. 当我在浏览器中查看输出时，缺少注释并且第一个方法定义不同。

有没有其他人看到这个问题？如何让捆绑机制使用现有的 .min 文件而不是重新缩小？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T21:21:51.963

这可以通过在 web.config 中将属性 usePreMinifiedFiles 设置为 true 来设置

```
<core enableTracing="false" ...>
     <js defaultMinifier="EdwardsJsMinifier" usePreMinifiedFiles="true"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T03:44:16.580

添加带有通配符的文件时，名称中带有 min 的文件将被排除，请尝试重命名名称中不带 min 的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:01:36.713

您是否有特定的原因不希望文件 reminified？它应该是安全的。目前没有办法选择性地禁用部分缩小，基本上所有文件都先捆绑在一起，然后再缩小整个捆绑包。

但是当 debug=false 时，它​​应该使用 jquery-1.8.0.min.js 文件而不是 jquery-1.8.0.js 文件。

# java - 使用 JEditorPane 打开一个文本文件

> ID：12478309
> 
> 赞同：0
> 
> 时间：2012-09-18T13:44:57.760
> 
> 标签：java, swing, user-interface, input

我正在尝试使用 JEditorPane（在不可编辑模式下）在框架中打开文本文件。但是，我相信我在设置输入流和输出流时遇到了问题。请查看我的代码并告诉我哪里做错了。

* * *

```
import java.io.*;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class TextEditor extends JFrame{

private JEditorPane editorpane;
JScrollPane editorScrollPane;
String filename="D:\\abc.txt";
Reader filereader;

public TextEditor()
{       
        editorpane= new JEditorPane();
        editorpane.setEditable(false);

        if (filename != null) 
        {
            try 
            {
                filereader=new FileReader(filename);
                editorpane.setPage(filename);
            }

            catch (IOException e) 
            {
                System.err.println("Attempted to read a bad file " + filename);
            }
         }

        else
        {
            System.err.println("Couldn't find file");
        }

        //Put the editor pane in a scroll pane.
        editorScrollPane = new JScrollPane(editorpane);
            editorScrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        editorScrollPane.setPreferredSize(new Dimension(250, 145));
        editorScrollPane.setMinimumSize(new Dimension(10, 10));

}

public static void main(String[] args) 
{
    TextEditor obj= new TextEditor();
    obj.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    obj.setSize(600,600);
    obj.setLocation(100,100);
    obj.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T13:56:37.913

要将参数作为`URL`for `JEditorPane.setPage`，您可以使用：

```
File file = new File(filename);
editorpane.setPage(file.toURI().toURL()); 
```

也不要忘记将您添加`JEditorPane`到框架中，以便可以看到它：

```
add(editorScrollPane); 
```

要查看您正在添加的磁盘错误：

```
e.printStackTrace(); 
```

到`IOException`块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T13:53:24.203

```
editorpane.getEditorKit().read(filereader, editorpane.getDocument(), 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T13:51:31.427

JEdi​​torPane.setPage() 需要一个 URL，包括协议：尝试“file:///D:/abc.txt”。以下代码应该可以工作：

```
String filename="file:///D:/abc.txt";

public TextEditor()
{
        editorpane= new JEditorPane();
        editorpane.setEditable(false);

        if (filename != null)
        {
            try
            {
                editorpane.setPage(filename);
            }

            catch (IOException e)
            {
                System.err.println("Attempted to read a bad file " + filename );
                e.printStackTrace();
            }
         }

        else
        {
            System.err.println("Couldn't find file");
        }

        //Put the editor pane in a scroll pane.
        editorScrollPane = new JScrollPane(editorpane);
            editorScrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        editorScrollPane.setPreferredSize(new Dimension(250, 145));
        editorScrollPane.setMinimumSize(new Dimension(10, 10));
      getContentPane().add(editorScrollPane);

} 
```

# xml - Excel 中的 XSD 映射以生成 XML 元素的多个实例

> ID：12478318
> 
> 赞同：0
> 
> 时间：2012-09-18T13:45:27.833
> 
> 标签：xml, excel, xsd

我将 XSD 映射与 excel 结合使用，我可以在其中插入信息以生成 XML 文件。问题是，我使用的 XSD 映射不允许我创建一个元素的多个实例。这是我的 XSD 代码：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

<xs:element name="application">
    <xs:complexType>
        <xs:all>
            <xs:element name="name" type="xs:string" />
            <xs:element name="pagina">
                <xs:complexType>
                    <xs:all>
                        <xs:element name="page_name" type="xs:string" />
                        <xs:element name="formulario" minOccurs="0">
                            <xs:complexType>
                                <xs:all>
                                    <xs:element name="textField" type="xs:string" minOccurs="0" />
                                    <xs:element name="checkBox">
                                        <xs:complexType>
                                            <xs:all>
                                                <xs:element name="opcao" type="xs:boolean" minOccurs="0" />
                                            </xs:all>
                                        </xs:complexType>
                                    </xs:element>
                                </xs:all>
                            </xs:complexType>
                        </xs:element>

                        <xs:element name="listagem" minOccurs="0">
                            <xs:complexType>
                                <xs:all>
                                    <xs:element name="entrada" minOccurs="1" type="xs:string" />
                                </xs:all>   
                            </xs:complexType>
                        </xs:element>
                    </xs:all>
                </xs:complexType>
            </xs:element>

            <xs:element name="escolha" minOccurs="0">
                <xs:complexType>
                    <xs:all>
                        <xs:element name="origem" type="xs:string" /> 
                        <xs:element name="onSuccess" type="xs:string" />
                        <xs:element name="onFailure" type="xs:string" />
                    </xs:all>
                </xs:complexType>
            </xs:element>

        </xs:all>
    </xs:complexType>
</xs:element> 
```

例如，当我在 excel 中创建地图时，我只能为“entrada”创建一个信息条目，而实际上我希望能够为单个“listagem”元素添加多个“entrada”信息条目.

我如何映射信息以便实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:34:22.013

默认情况下`maxOccurs`，`minOccurs`默认为 1，只允许单个元素。您需要设置`maxOccurs`为`unbounded`或显式值。

```
<xs:element name="entrada" minOccurs="1" maxOccurs="unbounded" type="xs:string" /> 
```

# javascript - 使用 return false 时发生默认浏览器操作

> ID：12478320
> 
> 赞同：-1
> 
> 时间：2012-09-18T13:45:27.760
> 
> 标签：javascript, popup

请看下面的代码：

```
<a href="http://www.website.com/" target="awindow" id="" class="" onclick="javascript:open('some=;variables=;');return false;">
    <img src="" alt="" border="0" />
</a> 
```

语法有问题吗？因为它在新选项卡而不是弹出窗口中打开并引发以下错误：

```
Uncaught TypeError: object is not a function 
```

Open 是一个处理弹出窗口的函数，括号之间的变量被添加。它是第三方功能，与 window.open 功能无关。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:47:05.197

试试这个：

```
// Remove uneeded "javascript:".
// open() is a function of window
onclick="window.open('some=;variables=;');return false;" 
```

参见[`window.open()`MDN](https://developer.mozilla.org/en-US/docs/DOM/window.open)。

# java - 为什么 Google AppEngine 上的动态后端不能自动缩放？

> ID：12478321
> 
> 赞同：2
> 
> 时间：2012-09-18T13:45:32.787
> 
> 标签：java, google-app-engine

当我将后端定义为动态并且我的任务队列配置为高处理率时，为什么 Google AppEngine 上的动态后端不能自动缩放？

我的应用程序需要对数据存储执行大型 CSV 文件（100,000 多条记录）数据加载。为了实现这一点，我使用后端来读取文件，然后将记录放到同一后端的任务队列中，以便可以将记录并行写入数据存储。我已经通过以下方式设置了我的队列：

```
<queue>
    <name>product-dataload</name>
    <rate>30/s</rate>
    <bucket-size>40</bucket-size>
    <retry-parameters>
        <task-retry-limit>2</task-retry-limit>
    </retry-parameters>
</queue> 
```

我的后端定义如下：

```
<backend name="dataloader">
    <class>B1</class>
    <options>
        <dynamic>true</dynamic>
    </options>
</backend> 
```

我观察到的是只创建了一个“dataloader”的后端实例。后端实例 CPU 以大约 35% 到 45% 的速度运行，QPS 约为 10 秒，延迟为 225 毫秒，但任务队列显示的强制速率为 15/s，而不是我定义的 30/s。就好像应用程序引擎调度程序没有意识到我设置为动态并且它强制将速率设置为 15/s 以仅处理一个实例。作为测试，我将后端定义更改为定义 4 个实例而不是动态的。当我运行数据加载时，所有 4 个实例都接收到流量，我的强制速率保持在 30/s 而不是限制到 15s，并且我的吞吐量上升（QPS 大约 7.

有没有人看到过类似的问题 - 谷歌的任何人都可以发表评论吗？

# excel - Excel查找相同的电子邮件地址并比较另一个对应单元格的值的功能

> ID：12478326
> 
> 赞同：0
> 
> 时间：2012-09-18T13:45:54.530
> 
> 标签：excel, ms-access, vba

我有两组注册详细信息、姓名、电子邮件、数据更改日期等工作表。

我想查找工作表 A 中的电子邮件地址是否出现在工作表 B 中，如果有，比较两个工作表中更改的日期数据值，如果有不同，则显示文本或条件格式。

我正在使用 SQL 查看 MS Access，但似乎没有得到我想要的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:06:39.420

用于比较工作表，`VLOOKUP`是您将要使用的功能。

公式看起来像这样：
`=VLOOKUP(emailToFind,RangeThatHasEmailAndDate,ColumnOfInfoToReturn,False)` （false=exact match）

因此，使用如下所示的表：

```
电子邮件日期
example@example.com 1 月 1 日
example1@example.com 1 月 3 日
example2@example.com 1 月 7 日
example3@example.com 1 月 2 日
example4@example.com 1-2 月
```

然后 C1 中的公式`=VLOOKUP(A2,[Book2]Sheet1!$A$2:$B$6,2,FALSE)`将从另一张表中获取日期

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:53:34.490

我不知道 Access 的确切语法，我用了很长时间，但一般的 SQL 是

```
data = SELECT set1.v1, set2.v1, ... FROM set1 join set2 ON set1.email=set2.email;
for item in data
    if item.value[0] == item.value[1]
          do something
    endif
endfor 
```

它只是伪代码，也许它有帮助......如果你发布，你尝试了什么，我可能记得语法并且可以提供更多详细信息

# javascript - javascript window.print() 访问被拒绝

> ID：12478330
> 
> 赞同：1
> 
> 时间：2012-09-18T13:46:08.743
> 
> 标签：javascript, image, cross-domain

我正在通过 $.ajax 跨域调用从 img html 元素中的不同域加载图像，并打开一个包含图像内容的弹出窗口，如下面的代码所示

```
 var printWindow= "";                                                                 
      methodName = "CreateVisitor";
            $.support.cors = true;
            $.ajax({
                type: "get",
                url: visitorServiceUrl + methodName + "/" + tenantId + "/" + userId
                    + "/" + visitorid + "/" + visitorname + "/" + visitormobilenumber
                    + "/" + visitorcompanyid + "/" + visitorcompanyname + "/" + visiteeid,
                dataType: "jsonp",
                async: false,
                cache: false,
                crossDomain: true,
                success: function (data) {
                    var imageUrl = "";
                    imageUrl = data ? siteImageUrl + data : 'image/NO_IMAGE.jpg';
                    $("#visitorcard").attr('src', imageUrl);
                    printWindow = window.open($("#visitorcard").attr('src'), "_blank", 'width=200,height=200');
                    //                        printWindow.onload = function () {
                    //                            printWindow.print();
                    //                        };
                    setTimeout(function () { printvisitorcard(); }, 1000);

                },
                error: function (xhr, type, exception) {
                    //alert("Error: " + xhr + " : " + exception + " : " + type);
                }
            }); 
```

然后我使用 setTimeout() 尝试像这样自动将图像打印到我的网络打印机（我不确定我是否在同一个域中）

```
function printvisitorcard() {
printWindow.print();
printWindow.close(); 
```

}

但是，每次我收到**Microsoft JScript 运行时错误：访问被拒绝。**在 printWindow.print() 上；线。我知道 javascript 的跨域问题，但我仍然想打印图像。我该如何克服这个错误？任何帮助将不胜感激。

PS Firefox 和 Chrome 不会抛出此错误，但它们也不会打印图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:53:06.393

更改为您自己域中的内容。

这是一个[演示](http://jsfiddle.net/mplungjan/suVuk/show/)- 在 Fx 中工作 - 要在 Chrome 中工作，您需要添加一个点击处理程序。除非用户单击以获取弹出窗口，否则将阻止弹出窗口

```
success: function (data) {
  var imageUrl = data ? siteImageUrl + data : 'image/NO_IMAGE.jpg';
  $("#visitorcard").attr('src', imageUrl);
  var printWindow = window.open("", "_blank", 'width=200,height=200');
  printWindow.document.write('<body onload="window.focus();window.print()">'+
    $("#visitorcard").parent().html()+'</body>');
  printWindow.document.close();
}, 
```

# jprofiler - 如何在 JProfiler 中分析成 Java 序列化

> ID：12478331
> 
> 赞同：2
> 
> 时间：2012-09-18T13:46:08.677
> 
> 标签：jprofiler

使用 JProfiler 7.1（也尝试过 7.0）我无法分析 Java 序列化。

我已经删除了所有过滤器，使用动态、估计 CPU、分析。

似乎它没有分析任何 JDK 方法？

JProfiler 不附加到现有的 JVM，正在启动测试。

Windows，64 位，jdk 1.6

# php - 从 php 到 jquery-ui 自动完成的数组

> ID：12478338
> 
> 赞同：1
> 
> 时间：2012-09-18T13:46:35.510
> 
> 标签：php, jquery, jquery-ui-autocomplete

PHP：

```
json_encode($data) 
```

输出

> [{"sid":"0032","name":"德国"}]

我想在 jquery-ui 自动完成中使用它。但是在 jquery-ui doc 中，源代码看起来像这样

```
 var projects = [
        {
            value: "jquery",
            label: "jQuery",
            desc: "the write less, do more, JavaScript library",
            icon: "jquery_32x32.png"
        }
    ]; 
```

如何在 javascript 中将 php 输出转换为这样的数组？

参考：http: [//jqueryui.com/demos/autocomplete/#custom-data](http://jqueryui.com/demos/autocomplete/#custom-data)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:54:12.650

重新制作数组：

```
$toJSON = array();
foreach($data as $num => $val){
    $toJSON[$num]['value'] = $val['sid'];
    $toJSON[$num]['label'] = $val['name'];
}
echo json_encode($toJSON); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:15:43.833

```
var availableTags = <?=json_encode($yourArray);?>;

$( "#yourInput_text" ).autocomplete({
    source: availableTags,
    focus: function (event, ui) {
        $("#yourInput_text").val(ui.item.name);
        return false;                                               },
    select: function (event, ui) {
        $("#yourInput_text").val(ui.item.name);
        $("#yourInput).val(ui.item.sid);                                                                
        return false;                                               },
minLength: 4                                                            
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T13:59:15.167

关于什么：

`var projects = eval(data);`

在您的 javascript 代码中。

# r - geom_line() 和 geom_segment() 一起使用时看似不正确的引导颜色

> ID：12478346
> 
> 赞同：2
> 
> 时间：2012-09-18T13:47:09.847
> 
> 标签：r, ggplot2

我正在使用 geom_line() 的绘图顶部绘制一些线段。令人惊讶的是，geom_line() 的引导（图例）颜色被绘制为我添加到绘图中的最后一个元素的颜色——即使它不是 geom_line()。这对我来说似乎是一个错误，但由于某种我不明白的原因，它可能是预期的行为。

```
#Set up the data
require(ggplot2)
x <- rep(1:10, 2)
y <- c(1:10, 1:10+5)
fac <- gl(2, 10)
df <- data.frame(x=x, y=y, fac=fac)

#Draw the plot with geom_segment second, and the guide is the color of the segment
ggplot(df, aes(x=x, y=y, linetype=fac)) +
  geom_line() +
  geom_segment(aes(x=2, y=7, xend=7, yend=7), colour="red") 
```

![当 geom_segment() 出现在 geom_line() 之后](../Images/16a086a1c35ff26330a7ca87498d924e.png)

而如果我先添加 geom_segment，指南上的颜色是黑色的，正如我所期望的：

```
ggplot(df, aes(x=x, y=y, linetype=fac)) +
  geom_segment(aes(x=2, y=7, xend=7, yend=7), colour="red") +
  geom_line() 
```

![当 geom_line() 出现在 geom_segment() 之后](../Images/1f7f6d3c08612dd0d80a554ef7a4ad5b.png)

功能还是错误？如果是第一个，有人可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T15:07:51.783

特征（ish）。绘制的指南是线型的指南。但是，它必须以某种颜色绘制才能看到。当美学映射未指定颜色时，ggplot2 以与绘图一致的颜色绘制它。我推测默认值是使用的最后一种颜色。这就是为什么当您以不同的顺序绘制它们时会看到差异。

但是，您可以控制图例的这些细节。

```
ggplot(df, aes(x=x, y=y, linetype=fac)) +
  geom_line() +
  geom_segment(aes(x=2, y=7, xend=7, yend=7), colour="red") +
  scale_linetype_discrete(guide=guide_legend(override.aes=aes(colour="blue"))) 
```

![在此处输入图像描述](../Images/cc8ed9d3a5e55bfba30b429b859cab33.png)

# jsf-2 - Prime Faces Collector 以相反的顺序添加

> ID：12478348
> 
> 赞同：0
> 
> 时间：2012-09-18T13:47:18.723
> 
> 标签：jsf-2, primefaces

我正在使用素面收集器组件，当用户将项目添加到列表时，它会将记录添加到列表的末尾。是否有任何简单的方法可以将项目添加到列表顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:43:29.917

你可以像这样简单地反转java本身的列表。

XHTML

```
<p:collector value="#{createBookBean.book}"   
                        addTo="#{createBookBean.books}" /> 
```

豆类

```
 private List<Book> books = new ArrayList<Book>(); 

    public List<Book> getBooks() {
           **Collections.reverse(this.books);**
    return books;
}

public void setBooks(List<Book> books) {
    this.books = books;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-06T09:40:28.133

当您将项目添加到绑定列表时，您可以`.add(0, item)`在托管 bean 中使用。它将在集合开始时添加所需的项目。

```
private List<Item> listItems = new ArrayList<Item>(); 

public void onAddListItem(){
   listItems.add(0, new Item());
} 
```

# jquery - jQuery DataTables 隐藏列不适用于 fnFooterCallback

> ID：12478353
> 
> 赞同：5
> 
> 时间：2012-09-18T13:47:28.930
> 
> 标签：jquery, datatables

我在一页上有 2 个数据表，如本例所示：http: [//live.datatables.net/ocasik/](http://live.datatables.net/ocasik/)

在我的页面顶部，我有一个链接，允许将行从一个表移动到另一个表。
每次我移动行时，我都想重新计算页脚。

这可行，但是当我添加`fnFooterCallback`到 dataTable 初始化时，我无法隐藏第一个表中的列。

例如：尝试`fnFooterCallback`从代码中删除并运行示例。现在显示/隐藏链接工作正常（它隐藏 7 列并显示 1）。

不知何故`fnFooterCallback`导致列显示/隐藏问题。

* * *

**编辑：** 我已经从我的样本中删除了不必要的数据。
这是我的演示代码的简单版本：http: [//live.datatables.net/umafuz/](http://live.datatables.net/umafuz/)

这是我的`fnFooterCallback`功能：

```
 "fnFooterCallback": function ( nRow, aaData, iStart, iEnd, aiDisplay ) {
        var iTotal = [0,0,0];
        for ( var i=0 ; i<aaData.length ; i++ )
        {
            iTotal[0] += aaData[i][3];
            iTotal[1] += aaData[i][2];
            iTotal[2] += aaData[i][3];
        }

        var nCells = nRow.getElementsByTagName('th');
        nCells[1].innerHTML=iTotal[0];
        nCells[2].innerHTML=iTotal[1];
        nCells[3].innerHTML=iTotal[2];
    } 
```

我的问题是：

*   **如何将我的代码修改为能够移动行、重新计算页脚和一起显示/隐藏列。**
*   **如何更新第五列，使其值`col[1]/sum(col[1])`**现在基于公式我到处都有“10%”，但每次添加/删除行时我都需要计算它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T22:05:25.833

要访问回调函数中的第二行，您应该这样做

```
var secondRow = $(nRow).next(); 
```

隐藏/显示按钮会出错，因为您的回调函数有错误。那是因为

```
var nCells = nRow.getElementsByTagName('th'); 
```

nCells，当第一列被隐藏时，只有 8 个元素，因此

```
 nCells[8].innerHTML=iTotal[7]; 
```

给出一个错误。这是因为`fnFooterCallback`每次调用时都会调用`fnSetColumnVis`。您将不得不重新考虑逻辑以考虑到这一点

编辑 - 我想我修好了，看这里[http://live.datatables.net/umezez/3/edit](http://live.datatables.net/umezez/3/edit)

```
$(document).ready(function () {

    var iTotal = [0, 0, 0];

    var oTable1 = $('#example1').dataTable({
        "table-layout": "fixed",
        "oLanguage": {
            "sZeroRecords": "No data"
        },
        "fnPreDrawCallback": function (oSettings) {
            iTotal = [0, 0, 0];
            for (var i = 0; i < oSettings.aoData.length; i++) {
                iTotal[0] += oSettings.aoData[i]._aData[1];
                iTotal[1] += oSettings.aoData[i]._aData[2];
                iTotal[2] += oSettings.aoData[i]._aData[3];
            }

        },
        "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
            aData[4] = (aData[1] / iTotal[0] * 100).toFixed(2)+'%';

        },
        "fnDrawCallback": function (oSettings) {

        },
        "fnFooterCallback": function (nRow, aaData, iStart, iEnd, aiDisplay) {
            var nCells = nRow.getElementsByTagName('th');
            nCells[1].innerHTML=iTotal[0];

            //check if column[2] is visible??!!how
            //nCells[2].innerHTML=iTotal[1];

            var secondRow = $(nRow).next()[0];//see this
            var ndCells = secondRow.getElementsByTagName('th');
          ndCells[1].innerHTML=aaData.length>0?(iTotal[0]/aaData.length).toFixed(2):0;
           var oTable1 = $('#example1').dataTable();

          var second = oTable1.$('td.second');
          var third = oTable1.$('td.third');
          var percent = oTable1.$('td.percent');
          if( second.length !== 0 ) {
             $('#avg .second').html( aaData.length>0?(iTotal[1]/aaData.length).toFixed(2):0 );
             $('#sum .second').html( iTotal[1] );
          }
          if( third.length !== 0 ) {
              $('#avg .third').html( aaData.length>0?(iTotal[2]/aaData.length).toFixed(2):0 );
             $('#sum .third').html( iTotal[2] );
          }
          if( percent.length > 0 ) {
            console.log(percent);
            oTable1.$('td.first').each(function(i, el) {
              var value = $(this).text();
              $(this).next().text(value * 100 / iTotal[0]);
              console.log(value);
            });
          }
        },
        "bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": true,
        "bInfo": false,
        "bAutoWidth": false,
        "aaSorting": [
            [0, "asc"]
        ],
        "aaData": [
            ["Jack", 2, 1, 3, null, null],
            ["Joe", 4, 2, 9, null, null],
            ["Adam", 6, 5, 12, null, null]
        ],
        "aoColumnDefs": [{
            "sTitle": "Name",
            "bVisible": true,
            "sType": "string",
            "sWidth": "100px",
            "aTargets": [0]
        }, {
            "sTitle": "Column1",
            "bVisible": true,
            "sType": "numeric",
            "sWidth": "20px",
            "sClass": "center first",
            "aTargets": [1]
        }, {
            "sTitle": "Column2",
            "bVisible": true,
            "sType": "numeric",
            "sWidth": "20px",
            "sClass": "center second",
            "aTargets": [2]
        }, {
            "sTitle": "Column3",
            "bVisible": true,
            "sType": "numeric",
            "sWidth": "130px",
            "sClass": "center third",
            "aTargets": [3]
        }, {
            "sTitle": "%",
            "bVisible": false,
            "sType": "string",
            "sWidth": "50px",
            "sClass": "center percent",
            "aTargets": [4]
        }, {
            "sTitle": "",
            "bVisible": true,
            "bSortable": false,
            "sType": "string",
            "sWidth": "20px",
            "sClass": "center",
            "aTargets": [5],
            "fnRender": function (obj) {

                return '<img title="Remove"  class="deleteMe" src="http://openfire-websockets.googlecode.com/svn-history/r2/trunk/plugin/web/images/delete-16x16.gif" style="cursor: pointer">';
            }
        }]
    });

    var oTable2 = $('#example2').dataTable({
        "oLanguage": {
            "sZeroRecords": "No data"
        },
        "bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": true,
        "bInfo": false,
        "bAutoWidth": false,
        "aaData": [
            ["John", 12, 2, 8, null, null],
            ["Jill", 2, 15, 15, null, null],
            ["Will", 4, 5, 3, null, null]
        ],
        "aoColumnDefs": [{
            "sTitle": "Name",
            "bVisible": true,
            "sType": "string",
            "sWidth": "100px",
            "aTargets": [0]
        }, {
            "sTitle": "Column1",
            "bVisible": true,
            "sType": "numeric",
            "sWidth": "20px",
            "sClass": "center",
            "aTargets": [1]
        }, {
            "sTitle": "Column2",
            "bVisible": false,
            "sType": "numeric",
            "sWidth": "20px",
            "sClass": "center second",
            "aTargets": [2]
        }, {
            "sTitle": "Column3",
            "bVisible": false,
            "sType": "numeric",
            "sWidth": "130px",
            "sClass": "center third",
            "aTargets": [3]
        }, {
            "sTitle": "%",
            "bVisible": false,
            "sType": "string",
            "sWidth": "20px",
            "sClass": "center percent",
            "aTargets": [4]
        }, {
            "sTitle": "",
            "bVisible": true,
            "bSortable": false,
            "sType": "string",
            "sWidth": "20px",
            "sClass": "center",
            "aTargets": [5],
            "fnRender": function (obj) {

                return '<img title="Add to table above" class="deleteMe" src="http://www.palominosys.com/knowledge_base/webpal_cms/nodes/add.png" style="cursor: pointer">';
            }
        }]
    });

    $(document).on("click", '.deleteMe', function (event) {
        var id = $(this).closest('table').attr('id');
        var table = {
            primary: (id === 'example1') ? oTable1 : oTable2,
            secondary: (id !== 'example1') ? oTable1 : oTable2
        };
        var row = $(this).closest("tr").get(0);
        var addElement = table.primary.fnGetData(row);
        table.secondary.fnAddData(addElement);
        var removeElement = table.secondary.fnGetPosition(row);
        table.primary.fnDeleteRow(removeElement, null, true);
        //oTable1.fnDraw();
    });

    $(".hideMe").on("click", function (event) {
        var bVis = oTable1.fnSettings().aoColumns[2].bVisible;
        oTable1.fnSetColumnVis(2, bVis ? false : true);
        oTable1.fnSetColumnVis(3, bVis ? false : true);
        oTable1.fnSetColumnVis(4, !bVis ? false : true);
        $(this).text(!bVis ? 'hide' : 'show');

    });
}); 
```

这是页脚的标记

```
 <tfoot>
      <tr id='sum'>
        <th>Sum</th>
        <th></th>
        <th class='second'></th>
        <th class='third'></th>
      </tr>
      <tr id='avg'>
        <th>Avg</th>
         <th></th>
        <th class='second'></th>
        <th class='third'></th>
      </tr>
    </tfoot>
  </table> 
```

# django - 如何只返回列表的几个值而不是返回所有值

> ID：12478367
> 
> 赞同：0
> 
> 时间：2012-09-18T13:48:21.513
> 
> 标签：django

我有一个 django 列表如下：**hotess1**是一个数据库结果集。

```
for hotel in hotels1:
            if models.CalendarDay.objects.filter(hotel=hotel, date=date).count() == 0:
                similar_venues.append(hotel) 
```

列表大小是动态的，但我只想返回前三个值

我可以这样做：

```
for hotel in hotels:
        if models.CalendarDay.objects.filter(hotel=hotel, date=date).count() == 0:
            similar_venues.append(hotel)
            counter += 1
            if counter == 3: break 
```

但我想以更好的方式做到这一点..任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:53:26.880

您可以使用切片运算符：`my_list[:3]`将返回一个包含前三个值的列表`my_list`。

（除非值少于三个，在这种情况下你会得到所有的东西）。

# sql-server-2008-express - 在 Windows Server 2012 Essentials RC 上安装 SQL Server 2008 Express

> ID：12478370
> 
> 赞同：-1
> 
> 时间：2012-09-18T13:48:29.743
> 
> 标签：sql-server-2008-express

我无法在 Server 2012 Essentials 上安装 SQL Server 2008 Express

命令行：

/q /ACTION=安装 /FEATURES=SQL /INSTANCENAME=SQLEXPRESS2008 /INSTANCEID=SQLExpress2008 /SQLSVCACCOUNT="NT AUTHORITY\Network Service" /AGTSVCACCOUNT="NT AUTHORITY\LOCAL SERVICE" /SQLSYSADMINACCOUNTS="BUILTIN\ADMINISTRATORS"

我得到一个例外：

总体总结：最终结果：SQL Server 安装失败。若要继续，请调查失败的原因，更正问题，卸载 SQL Server，然后重新运行 SQL Server 安装程序。退出代码（十进制）：-2068578304 退出设施代码：1204 退出错误代码：0 退出消息：域控制器上的 SQL Server 服务不允许网络服务或本地服务帐户。指定不同的帐户。开始时间：2012-09-17 15:55:44 结束时间：2012-09-17 15:55:56 请求的操作：安装

我应该使用哪个帐户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:44:16.313

您应该从 Active Directory 为其分配一个帐户。我们通常为此服务帐户创建 DBSERVERNAME_SQL 或类似的东西。因为听起来您在域控制器上，所以我认为您别无选择，只能创建一个活动目录帐户。

# php - Cakephp counterCache 多个 counterScope - 逻辑问题

> ID：12478371
> 
> 赞同：3
> 
> 时间：2012-09-18T13:48:38.557
> 
> 标签：php, cakephp, counter-cache, performancecounter

问题：

我有两个模型：经销商，Testdrive（Testdrive 通过dealer_id 属于经销商）。我想显示有关经销商的实时统计信息：总计 (Testdrive.active = 1)、已处理 (Testdrive.active = 1 && Testdrive.processed = 1) ...

我有大约 100 名经销商和 10000 次试驾。基于计数的 sql 大约需要 10 秒（效率低）。现在我有一个每小时运行一次的 cronjob，但我没有实时统计数据。

我试过这样的事情：

```
var $belongsTo = array(
    'Dealer' => array(
        'className' => 'Dealer',
        'foreignKey' => 'dealer_id',
        'counterCache' => 'active',
        'counterScope' => array('Testdrive.active' => 1),
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
    'Dealer' => array(
        'className' => 'Dealer',
        'foreignKey' => 'dealer_id',
        'counterCache' => 'processed',
        'counterScope' => array('Testdrive.active' => 1, 'Testdrive.processed' => 1),
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
); 
```

...但我覆盖了 belongsTo => 'Dealear' 值。

我可以拥有一个带有 counterScope 数组的 counterCache 数组吗？

```
 var $belongsTo = array(
    'Dealer' => array(
        'className' => 'Dealer',
        'foreignKey' => 'dealer_id',
        'counterCache' => array('active', 'processed'),
        'counterScope' => array('active' => array('Testdrive.active' => 1), 'processed' => array('Testdrive.active' => 1, 'Testdrive.processed' => 1)),
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:05:02.817

[（现在）文档](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#multiple-countercache)中有一个这样的例子。应用于问题中的示例：

```
class TestDrive extends AppModel {

    public $belongsTo = array(
        'Dealer' => array(
            'counterCache' => array(
                'active' => array(
                    'TestDrive.active' => 1
                ),
                'processed' => array(
                    'TestDrive.active' => 1, 
                    'TestDrive.processed' => 1
                )
            )
        )
    );
} 
```

请注意，无需使用默认值（等）定义`className`键`foreignKey`。

# java - 整数链接列表的链接列表，Java。

> ID：12478372
> 
> 赞同：2
> 
> 时间：2012-09-18T13:48:46.910
> 
> 标签：java

我首先遇到了我的问题，试图为字典间隙列表发布程序创建一个非常大的（7k x 30k）的 int[][]。但唉，我试图分配数组的空间不足。我如何创建一个二维整数数组？

我想要的是一个列表列表，其中列表中的每个列表都是整数列表。这是我的代码示例。

代码：

```
 static final int numberOfTerms = 6782;
 static final int numberOfLines = 30383;
 byte[][] countMatrix = new byte[numberOfLines][numberOfTerms];
 int[][] gapsMatrix = new int[numberOfLines][numberOfTerms]; // To big!! 
```

这个列表列表将填充整数，表示特定文本中相同单词的两次出现之间的间隙。因此，在计数矩阵中，我保存一个字节，指示是否为指定索引指定了一个单词。然后在我现在创建的函数中，我正在遍历countMatrix，如果在那里找到一个字节，我将当前索引减去最后找到的索引，并将该数字保存在我的二维整数数组中，这给了我文本中每个相同单词之间的间隙。

那么我如何创建一个我需要完成的数据结构呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:03:34.493

我不知道这是否适合您，但如果您想坚持使用 Array，可以尝试使用[稀疏矩阵作为选项。](http://en.wikipedia.org/wiki/Sparse_matrix)还有其他几个选项。`Map`, `List`,`Weak reference Collections`等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:05:15.880

要创建一个数组，您需要有足够的内存来创建它。

An`int`每个值使用 4 字节，而数组至少使用 N * M 倍。

例如 4 * 30383 * 6782 大约是 820 MB，你需要有空闲来创建它。

这大约是 8 美元的内存，所以这应该是一个大问题，除非您没有这么多内存或者您将最大内存设置得太低。

我会至少将您的最大内存增加 1 GB，它应该可以工作。

* * *

替代方案包括

*   使用较小的尺寸，例如`char`or `short`or `byte`2-4 x 小。
*   使用堆外内存，例如内存映射文件。这不会使用太多堆，但会使用通常更便宜的磁盘空间。
*   增加您的最大内存大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T13:59:04.027

您只是没有足够的内存来执行此操作。

[http://www.javamex.com/tutorials/memory/array_memory_usage.shtml](http://www.javamex.com/tutorials/memory/array_memory_usage.shtml)

抱歉，我没有说清楚，但是使用另一个 DS 不太可能改变这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T14:41:51.673

> 那么我如何创建一个我需要完成的数据结构呢？

如果理解正确，那么您要记录相同术语之间的差距。假设您有一系列需要分析的术语，然后：

```
 String[] terms = ...;
    Map<String, List<Integer>> map = new TreeMap<String, <Integer>>();
    for (int i = 0; i < terms.length; i++) {
      String term = terms[i];
      List<Integer> positions = map.get(term);
      if (gaps == null) {
        positions = new ArrayList<Integer>();
      }
      positions.add(i);
      map.set(term, positions);
    } 
```

稍后您只需查看每个术语的位置，并可能计算它们之间的差距。（您可以将间隙计算集成到此代码中，但我将其留给您作为练习）。

# javascript - 如何使用 WinJS.xhr 复制 Web 表单调用

> ID：12478373
> 
> 赞同：1
> 
> 时间：2012-09-18T13:48:52.343
> 
> 标签：javascript, xmlhttprequest, http-post, winjs

我正在开发一个 Windows 8 应用程序，用 HTML5/JavaScript 构建它。应用程序中的部分功能需要用户身份验证。该过程是通过一个 Web 表单将数据发布回服务器端脚本，并在成功验证后返回一组 cookie。然后可以缓存这些 cookie 中的数据并用于执行其他几个 API 调用。我想使用 WinJS.xhr 来执行此操作，而不是在应用程序中嵌入网页。

首先，我假设我可以使用`data`xhr 方法的参数将用户名和密码信息传递给服务器端脚本，但我不确定如何为 POST 设置格式。

其次，如果我可以让身份验证工作，有没有办法让我看到 HTTP 响应标头中返回的 cookie 内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:22:44.217

You should be able to encode using the FORM encoding standard. I have some [sample code](https://github.com/grork/Utilities/blob/master/js/OAuth.js) that is intertwined in here, but it's very simple to encode it, and set the method to "POST" rather than GET.

For cookie transfer, you should be able to pull those out of the headers and set them as appropriate.

# excel - excel中的聚类

> ID：12478375
> 
> 赞同：2
> 
> 时间：2012-09-18T13:48:57.523
> 
> 标签：excel, cluster-analysis

你们中有人知道是否可以在不使用 VBA 的情况下在 Excel 中实现聚类算法，如 k-means、dbscan？

如果可能的话，你能给我一点帮助吗？（一个小例子会帮助我）

非常感谢提前

克劳德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:03:21.807

**你为什么会**？Excel 不适用于此。

聚类算法通常受益于使用**索引结构**，以一种智能的方式组织内存中的数据。例如 R*-trees、kd-tree 等。

这有很大的不同。没有索引的 DBSCAN 是复杂的`O(n^2)`，而有索引结构的只是`O(n log n)`复杂的。

我猜你可能可以在 VBA（它不再是真正的 Excel，而是 Visual Basic）中做到这一点。但是将现有代码用于 R*-trees 等更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-25T17:06:33.990

检查[这个](http://www.neilson.co.za/k-means-cluster-analysis-in-microsoft-excel/)

**k 均值算法**

k-Means 算法是以下步骤的迭代，直到达到稳定性，即单个记录的集群分配不再变化。

确定质心的坐标。（最初，质心是随机的、唯一的点，然后将集群成员的平均坐标分配给质心）。确定每个记录到每个质心的欧几里得距离。用最近的质心对记录进行分组。编码

首先，我创建了一个私有类型来表示我们的记录和质心，并创建了两个类级别的数组来保存它们以及一个类级别的变量来保存正在执行分析的表。

```
Private Type Records
    Dimension() As Double
    Distance() As Double
    Cluster As Integer
End Type

Dim Table As Range
Dim Record() As Records
Dim Centroid() As Records
User Interface 
```

下面的方法，`Run()`可以作为起点，挂接到按钮等。

```
Sub Run()
'Run k-Means
   If Not kMeansSelection Then
        Call MsgBox("Error: " & Err.Description, vbExclamation, "kMeans Error")
    End If
End Sub 
```

接下来，创建一种方法，提示用户选择要分析的表并输入数据应分组到的所需集群数量。该函数不需要任何参数并返回一个布尔值，指示是否遇到任何错误。

```
Function kMeansSelection() As Boolean

'Get user table selection
   On Error Resume Next
    Set Table = Application.InputBox(Prompt:= _
                                     "Please select the range to analyse.", _
                                     title:="Specify Range", Type:=8)

    If Table Is Nothing Then Exit Function        'Cancelled

    'Check table dimensions
   If Table.Rows.Count < 4 Or Table.columns.Count < 2 Then
        Err.Raise Number:=vbObjectError + 1000, Source:="k-Means Cluster Analysis", Description:="Table has insufficent rows or columns."
    End If

    'Get number of clusters
   Dim numClusters As Integer
    numClusters = Application.InputBox("Specify Number of Clusters", "k Means Cluster Analysis", Type:=1)

    If Not numClusters > 0 Or numClusters = False Then
        Exit Function        'Cancelled
   End If
    If Err.Number = 0 Then
        If kMeans(Table, numClusters) Then
            outputClusters
        End If
    End If

kMeansSelection_Error:
    kMeansSelection = (Err.Number = 0)
End Function 
```

如果选择了一个表并且适当地定义了多个集群，则调用 kMeans (Table, numClusters) 方法，并将表和集群数量作为参数。

如果该`kMeans (Table, numClusters)`方法执行没有错误，则会调用最终方法 outputClusters()，该方法会在活动工作簿中创建一个新工作表并输出分析结果。

**将记录分配给集群**

这是对记录进行实际分析并进行集群分配的地方。首先，该方法是用 Function 声明的`kMeans(Table As Range, Clusters As Integer) As Boolean`。该函数有两个参数，表被分析为 Excel Range 对象和 Clusters，一个整数表示要创建的集群的数量。

```
Function kMeans(Table As Range, Clusters As Integer) As Boolean
'Table - Range of data to group. Records (Rows) are grouped according to attributes/dimensions(columns)
'Clusters - Number of clusters to reduce records into.

    On Error Resume Next

    'Script Performance Variables
   Dim PassCounter As Integer

    'Initialize Data Arrays
   ReDim Record(2 To Table.Rows.Count)
    Dim r As Integer        'record
   Dim d As Integer        'dimension index
   Dim d2 As Integer        'dimension index
   Dim c As Integer        'centroid index
   Dim c2 As Integer        'centroid index
   Dim di As Integer        'distance

    Dim x As Double        'Variable Distance Placeholder
   Dim y As Double        'Variable Distance Placeholder 
```

`On error Resume Next`用于将错误传递给调用方法，并声明了许多数组索引变量。声明 x 和 y 以供以后在数学运算中使用。

第一步是将`Record()`数组的大小调整为表中的行数。（2 到 Table.Rows.Count）用于假设（并且要求）表的第一行包含列标题。

然后，对于数组中的每条记录`Record()`，Record 类型的`Dimension()`数组大小调整为列数（再次假设第一列包含行标题），`Distance()`数组大小调整为簇数。然后内部循环将行中列的值分配给`Dimension()`数组。

For r = LBound(Record) To UBound(Record) '初始化维度值数组 ReDim Record(r).Dimension(2 To Table.columns.Count) '初始化距离数组 ReDim Record(r).Distance(1 To Clusters) For d = LBound(Record(r).Dimension) To UBound(Record(r).Dimension) Record(r).Dimension(d) = Table.Rows(r).Cells(d).Value Next d Next r

以同样的方式，必须初始化初始质心。我已将前几条记录的坐标指定为初始质心坐标，检查每个新质心是否具有唯一坐标。如果不是，则脚本简单地移动到下一条记录，直到为质心找到一组唯一的坐标。

欧几里得距离这里用于计算质心唯一性的方法与后面用于计算单个记录与质心之间距离的方法几乎完全相同。在这里，通过测量它们的尺寸与 0 的距离来检查质心的唯一性。

```
 'Initialize Initial Centroid Arrays
   ReDim Centroid(1 To Clusters)
    Dim uniqueCentroid As Boolean

    For c = LBound(Centroid) To UBound(Centroid)
        'Initialize Centroid Dimension Depth
       ReDim Centroid(c).Dimension(2 To Table.columns.Count)

        'Initialize record index to next record
       r = LBound(Record) + c - 2

        Do        ' Loop to ensure new centroid is unique
           r = r + 1        'Increment record index throughout loop to find unique record to use as a centroid

            'Assign record dimensions to centroid
           For d = LBound(Centroid(c).Dimension) To UBound(Centroid(c).Dimension)
                Centroid(c).Dimension(d) = Record(r).Dimension(d)
            Next d

            uniqueCentroid = True

            For c2 = LBound(Centroid) To c - 1

                'Loop Through Record Dimensions and check if all are the same
               x = 0
                y = 0
                For d2 = LBound(Centroid(c).Dimension) To _
                    UBound(Centroid(c).Dimension)
                    x = x + Centroid(c).Dimension(d2) ^ 2
                    y = y + Centroid(c2).Dimension(d2) ^ 2
                Next d2

                uniqueCentroid = Not Sqr(x) = Sqr(y)
                If Not uniqueCentroid Then Exit For
            Next c2

        Loop Until uniqueCentroid

    Next c
The next step is to calculate each records distance from each centroid and assign the record to the nearest cluster. 
```

`Dim lowestDistance As Double`– 最低距离变量保存迄今为止在记录和质心之间测量的最短距离，以便根据后续测量进行评估。 `Dim lastCluster As Integer`– lastCluster 变量保存在进行任何新分配之前分配记录的集群，并用于评估是否已实现稳定性。 `Dim ClustersStable As Boolean`– 重复聚类分配和质心重新计算阶段，直到`ClustersStable = true.`

Dim minimumDistance As Double Dim lastCluster As Integer Dim ClustersStable As Boolean

Do 'While Clusters are not Stable

```
PassCounter = PassCounter + 1
ClustersStable = True        'Until Proved otherwise

'Loop Through Records 
```

For r = LBound(Record) To UBound(Record)

```
 lastCluster = Record(r).Cluster
    lowestDistance = 0        'Reset lowest distance

    'Loop through record distances to centroids
   For c = LBound(Centroid) To UBound(Centroid)

        '======================================================
       '           Calculate Euclidean Distance
       '======================================================
       ' d(p,q) = Sqr((q1 - p1)^2 + (q2 - p2)^2 + (q3 - p3)^2)
       '------------------------------------------------------
       ' X = (q1 - p1)^2 + (q2 - p2)^2 + (q3 - p3)^2
       ' d(p,q) = X

        x = 0
        y = 0
        'Loop Through Record Dimensions
       For d = LBound(Record(r).Dimension) To _
            UBound(Record(r).Dimension)
            y = Record(r).Dimension(d) - Centroid(c).Dimension(d)
            y = y ^ 2
            x = x + y
        Next d

        x = Sqr(x)        'Get square root

        'If distance to centroid is lowest (or first pass) assign record to centroid cluster.
       If c = LBound(Centroid) Or x < lowestDistance Then
            lowestDistance = x
            'Assign distance to centroid to record
           Record(r).Distance(c) = lowestDistance
            'Assign record to centroid
           Record(r).Cluster = c
        End If
    Next c

    'Only change if true
   If ClustersStable Then ClustersStable = Record(r).Cluster = lastCluster

Next r 
```

一旦将每个记录分配给一个集群，集群的质心就会重新定位到集群的平均坐标。在质心移动后，重新评估最接近质心的每个记录并迭代该过程直到达到稳定性（即集群分配不再改变）。

```
'Move Centroids to calculated cluster average
       For c = LBound(Centroid) To UBound(Centroid)        'For every cluster

            'Loop through cluster dimensions
           For d = LBound(Centroid(c).Dimension) To _
                UBound(Centroid(c).Dimension)

                Centroid(c).Cluster = 0        'Reset nunber of records in cluster
               Centroid(c).Dimension(d) = 0        'Reset centroid dimensions

                'Loop Through Records
               For r = LBound(Record) To UBound(Record)

                    'If Record is in Cluster then
                   If Record(r).Cluster = c Then
                        'Use to calculate avg dimension for records in cluster

                        'Add to number of records in cluster
                       Centroid(c).Cluster = Centroid(c).Cluster + 1
                        'Add record dimension to cluster dimension for later division
                       Centroid(c).Dimension(d) = Centroid(c).Dimension(d) + _
                                                   Record(r).Dimension(d)

                    End If

                Next r

                'Assign Average Dimension Distance
               Centroid(c).Dimension(d) = Centroid(c).Dimension(d) / _
                                           Centroid(c).Cluster
            Next d
        Next c

    Loop Until ClustersStable

    kMeans = (Err.Number = 0)
End Function 
```

**显示结果**

该`outputClusters()`方法在两个表中输出结果。第一个表包含每个记录名称和分配的簇号，第二个表包含质心坐标。

```
Function outputClusters() As Boolean

    Dim c As Integer        'Centroid Index
   Dim r As Integer        'Row Index
   Dim d As Integer        'Dimension Index

    Dim oSheet As Worksheet
    On Error Resume Next

    Set oSheet = addWorksheet("Cluster Analysis", ActiveWorkbook)

    'Loop Through Records
   Dim rowNumber As Integer
    rowNumber = 1

    'Output Headings
   With oSheet.Rows(rowNumber)
        With .Cells(1)
            .Value = "Row Title"
            .Font.Bold = True
            .HorizontalAlignment = xlCenter
        End With
        With .Cells(2)
            .Value = "Centroid"
            .Font.Bold = True
            .HorizontalAlignment = xlCenter
        End With
    End With

    'Print by Row
   rowNumber = rowNumber + 1        'Blank Row
   For r = LBound(Record) To UBound(Record)
        oSheet.Rows(rowNumber).Cells(1).Value = Table.Rows(r).Cells(1).Value
        oSheet.Rows(rowNumber).Cells(2).Value = Record(r).Cluster
        rowNumber = rowNumber + 1
    Next r

    'Print Centroids - Headings
   rowNumber = rowNumber + 1
    For d = LBound(Centroid(LBound(Centroid)).Dimension) To UBound(Centroid(LBound(Centroid)).Dimension)
        With oSheet.Rows(rowNumber).Cells(d)
            .Value = Table.Rows(1).Cells(d).Value
            .Font.Bold = True
            .HorizontalAlignment = xlCenter
        End With
    Next d

    'Print Centroids
   rowNumber = rowNumber + 1
    For c = LBound(Centroid) To UBound(Centroid)
        With oSheet.Rows(rowNumber).Cells(1)
            .Value = "Centroid " & c
            .Font.Bold = True
        End With
        'Loop through cluster dimensions
       For d = LBound(Centroid(c).Dimension) To UBound(Centroid(c).Dimension)
            oSheet.Rows(rowNumber).Cells(d).Value = Centroid(c).Dimension(d)
        Next d
        rowNumber = rowNumber + 1
    Next c

    oSheet.columns.AutoFit        '//AutoFit columns to contents

outputClusters_Error:
    outputClusters = (Err.Number = 0)
End Function 
```

这种类型的输出不太可能有很大用处，但它用于演示在您自己的解决方案中可以访问记录集群分配或集群记录的方式。

该`outputClusters()`函数使用另一个自定义方法：addWorksheet()，它将工作表添加到具有指定名称的指定/活动工作簿。如果已存在同名的工作表，则 outputClusters() 函数会添加/递增附加到工作表名称的数字。该`WorksheetExists()`功能还包括在以下内容中：

```
Function addWorksheet(Name As String, Optional Workbook As Workbook) As Worksheet
    On Error Resume Next
    '// If a Workbook wasn't specified, use the active workbook
   If Workbook Is Nothing Then Set Workbook = ActiveWorkbook

    Dim Num As Integer
    '// If a worksheet(s) exist with the same name, add/increment a number after the name
   While WorksheetExists(Name, Workbook)
        Num = Num + 1
        If InStr(Name, " (") > 0 Then Name = Left(Name, InStr(Name, " ("))
        Name = Name & " (" & Num & ")"
    Wend

    '//Add a sheet to the workbook
   Set addWorksheet = Workbook.Worksheets.Add

    '//Name the sheet
   addWorksheet.Name = Name
End Function

Public Function WorksheetExists(WorkSheetName As String, Workbook As Workbook) As Boolean
    On Error Resume Next
    WorksheetExists = (Workbook.Sheets(WorkSheetName).Name <> "")
    On Error GoTo 0
End Function 
```

# linux - 无法运行 Qt 的演示

> ID：12478387
> 
> 赞同：3
> 
> 时间：2012-09-18T13:49:50.190
> 
> 标签：linux, qt, ubuntu-12.04

我刚刚安装了Qt。我尝试运行一些演示，但我无法运行任何演示，这是消息：

> 无法创建文件/opt/QtSDK/Demos/4.7/chip/chip.pro.user：权限被拒绝

为避免将来出现这种情况，如何为我安装的任何程序设置权限？

我是使用 linux 的新手，我使用的是 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T14:25:28.190

要么不要将 SDK 安装在 root 访问目录中，要么使用 root 权限运行程序（qtcreator 等）。我会选择前一种解决方案。我通常在我的主目录中使用一个文件夹。

Qt SDK 是独立的，因此您可以将整个文件夹复制或移动到不需要 root 权限的新位置。

# redis - 维护小时表 NoSql

> ID：12478403
> 
> 赞同：3
> 
> 时间：2012-09-18T13:50:30.600
> 
> 标签：redis, cassandra

我需要维护存储大量计数器的小时表。我计划在任何时候只保留当前的小时表和前一小时的表，因为旧数据对我来说并不重要。

例如。如果时间是下午 4 点 30 分，我将在下午 3:00 - 4:00 有一个小时表，而当前的小时表是下午 4:00 - 4:30。一旦时间超过 5:00 pm，我删除 3:00-4:00 pm 表。

每个每小时的表将增长到最大 7-8 gb 的大小，并且查询是高度并发和面向写入的（10:1 写入：读取，每秒 20,000 次写入和平均每秒 2000 次读取）。

由于数据的大小很小（我的数据库中最大 10gb）并且所有查询都是计数器增量，我应该选择像 Cassandra（计数器列）这样的 key val 存储还是像 Redis 这样的内存数据库。（我打算对数据库进行分区以分割巨大的写入负载）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T22:50:00.187

这听起来像是内存中处理的任务：HashMap 比最快的数据库快得多。所以，我建议看看 hazelcast (http://www.hazelcast.com/) 或storm (https://github.com/nathanmarz/storm)。

可能会定期将计数器转储到某些内存数据库（如 Redis 或 Memcached）以简化查询。但它完全在内存中是可行的，根本没有任何数据库后端。

对于这项任务，Cassandra 看起来有点矫枉过正：当您需要以复制和高可用性的方式永久存储 TB 级数据时，这真是太棒了，但如果您以前从未这样做过，将其设置为重负载并非易事。

# drag-and-drop - Windows 8 应用程序中的可拖动元素

> ID：12478404
> 
> 赞同：0
> 
> 时间：2012-09-18T13:50:33.843
> 
> 标签：drag-and-drop, windows-8, draggable

我是 Windows 8 应用程序的初学者。有谁知道如何在 Windows 8 应用程序中使任何元素可拖动？
我添加`draggable="true"`了我想要可拖动的 HTML 元素。但我仍然无法拖动它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:24:55.073

设置 draggable=true 并不能使一切正常。您必须挂钩元素并编写代码来处理操作。请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/Hh761498.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh761498.aspx)作为开始的好地方。这个示例应用程序也可能很有用[http://code.msdn.microsoft.com/windowsapps/Input-Instantiable-deda69ca](http://code.msdn.microsoft.com/windowsapps/Input-Instantiable-deda69ca)

# android - shouldOverrideUrlLoading() 永远不会被调用

> ID：12478414
> 
> 赞同：2
> 
> 时间：2012-09-18T13:51:17.493
> 
> 标签：android, webview, android-webview

如果我单击 webview 中的链接，shouldOverrideUrlLoading() 永远不会被调用。（它不显示吐司或记录任何内容）。我也尝试过 onPageFinished 并且它也没有被调用。我阅读了其他用户遇到问题的帖子，这些问题不仅仅有时被调用，但在我的情况下它被完全忽略了。

```
 webview = new WebView(MyActivity.this);

    webview.getSettings().setBuiltInZoomControls(true);
    webview.getSettings().setDisplayZoomControls(false);
    webview.loadData(Html.getHtml(), "text/html", "UTF-8");
    webview.getSettings().setJavaScriptEnabled(true);
    webview.setWebViewClient(new WebViewClient() {

        @Override
        public boolean  shouldOverrideUrlLoading(WebView view, String url) {
            new M("shouldOverrideUrlLoading",getApplicationContext());
            Log.v("ESSE3", "shouldOverrideUrlLoading()");

            System.out.println(url);

            System.out.println(Html.getHtml());
            webview.loadData(Html.getHtml(), "text/html", "UTF-8");
                            return true;

        }
    });
    webview.setWebViewClient(new WebViewClient());
    setContentView(webview); 
```

尝试启用/不启用 javascript 或在方法中返回 true 或 false。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T14:23:37.337

你打`setWebViewClient()`了两次电话。一次使用您的覆盖方法，一次使用空`WebViewClient`！这就是为什么您的方法没有被调用的原因。

```
webview.setWebViewClient(new WebViewClient() {

    @Override
    public boolean  shouldOverrideUrlLoading(WebView view, String url) {
        ....
    }
});
webview.setWebViewClient(new WebViewClient()); 
```

# java - 用于存储多架飞机的 GPS 位置列表的数据库结构

> ID：12478416
> 
> 赞同：1
> 
> 时间：2012-09-18T13:51:24.563
> 
> 标签：java, database

我希望实施一个程序来监控多架飞机的 GPS 位置。我每分钟都会收到更新的位置，并希望保留每架飞机的日志，以便可以分析数据并在地图上绘制路线。

我想知道解决这个问题的最佳方法是什么。目前我只能想到有一个包含 3 个主要字段的表：飞机 ID、时间戳（每次更新后递增 1）和位置。[假设有 100 架飞机，那么每分钟将添加 100 条新记录]。然后我会查询飞机 ID 以接收位置日志。有更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:08:58.170

正如[Oedum 回答](https://stackoverflow.com/questions/12478416/database-structure-for-storing-a-list-of-gps-positions-for-multiple-aircraft/12478475#12478475)的那样，您将有两张桌子。

```
Aircraft
--------
Aircraft ID
Aircraft identification

Position
--------
Aircraft ID
Timestamp
X Position
Y Position
Altitude 
```

Position 表的键是组合键。飞机 ID，升序，时间戳，**降序**。

这样，您可以轻松检索最近的位置以及所有位置。它们将按最近到最近的顺序排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:54:50.970

我想你应该把你的职位分成两份。类似于：

```
ID
Timestamp
X-cordinate
Y-coordinate 
```

# bash - 在变量中使用正斜杠

> ID：12478420
> 
> 赞同：1
> 
> 时间：2012-09-18T13:51:34.140
> 
> 标签：bash, slash

我编写了一个脚本来简化 Android 源代码的同步和构建。我尝试向cherrypick补丁添加一个功能，但我无法让它正常工作。我知道这是因为正斜杠，但我不知道如何保护/逃避它们。

部分代码是：

```
 echo "Copy/paste the project folder, i.e. 'frameworks/base'"
   read folder
   echo ""
   echo "Now paste the cherry-pick git link, i.e. 'git fetch <someproject> refs/changes/... && git cherry-pick FETCH_HEAD'"
   read cherry
   echo ""
   Begin
   clear
   echo ""
   export IFS="&&"
   for x in $cherry
   do
        cd ${CM}/${folder}
    CHERRY=$(trim "$x")
    $CHERRY
   done 
```

假设“樱桃”变量是：

```
git fetch http://r.cyanogenmod.com/CyanogenMod/android_frameworks_base refs/changes/68/22968/2 && git cherry-pick FETCH_HEAD 
```

我会收到这个错误：

```
/home/tristan202/bin/build_cm.sh: line 159: git fetch http://r.cyanogenmod.com/CyanogenMod/android_frameworks_base refs/changes/91/23491/2: No such file or directory
/home/tristan202/bin/build_cm.sh: line 159: git cherry-pick FETCH_HEAD: command not found 
```

我无法弄清楚它为什么会失败。

它调用的“修剪”函数是修剪前导和尾随空格的函数。如果我在 for 循环中回显“$CHERRY”，命令会正确打印，但仍然失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T14:24:32.690

我再举一个例子：

```
cmd='echo hello && echo world'
$cmd 
```

结果是：

```
hello && echo world 
```

* * *

bash 将命令解析`$cmd`为[`Simple Commands`](http://www.gnu.org/software/bash/manual/bashref.html#Simple-Commands)not [`Lists of Commands`](http://www.gnu.org/software/bash/manual/bashref.html#Lists)。
之后[`Parameter Expansion`](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)，`&&`作为参数传递给`echo`（之后的第一个单词[`Word Splitting`](http://www.gnu.org/software/bash/manual/bashref.html#Word-Splitting)）。

* * *

解决方案是`&&`退出：

```
cmd1='echo hello'
cmd2='echo world'
$cmd1 && $cmd2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:23:54.523

一旦你放入`&&`一个变量，它就不再被解释为分隔两个命令：

```
$ A="echo a && echo b"
$ echo $A
echo a && echo b
$ echo c && ${A}
c
a && echo b 
```

所以你需要避免放入`&&`一个变量。

git 甚至`&&`在其错误消息中告诉您这是问题所在。

# php - 根据选择不同的选择框（php / ajax）填充选择框

> ID：12478422
> 
> 赞同：1
> 
> 时间：2012-09-18T13:51:47.677
> 
> 标签：php

基本上我有两个表单第一个表单是一个简单的选择框，它提交它的值以进行处理并插入数据库（mysql）但是在同一页面上我有第二个表单带有一个选择框，它将自动填充结果来自数据库（ajax / php），取决于从第一个表单选择框中选择的选项

所以无论如何我需要一些方法来将第一个选择框的选择值存储在一个变量中而不提交表单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:56:18.170

你可以试试。

```
$('#firstForm').submit(function(){
var firstValue = $('#firstForm select').val()
 //do your ajax call.

return false //then return false or 
            //preventDefault should keep the form from submitting
}) 
```

# java - 从 XML 解析的字符串形成 DOM 元素时出错

> ID：12478423
> 
> 赞同：0
> 
> 时间：2012-09-18T13:51:54.600
> 
> 标签：java, android, xml, dom

我正在尝试从包含**阿拉伯字符**的编码 XML 解析文件中获取`DOM`元素。下面的方法采用解析的 xml 字符串，应该返回文档。`UTF-8`

 ****这是xml的链接：**

`http://212.12.165.44:7201/UniNews121.xml`

```
public Document getDomElement(String xml){

    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

    try {

        DocumentBuilder db = dbf.newDocumentBuilder();
        InputSource is = new InputSource();
        StringReader xmlstring=new StringReader(xml);
        is.setCharacterStream(xmlstring);
        is.setEncoding("UTF-8");
                    //APP CRASHES HERE
        doc = db.parse(is); 

    } catch (ParserConfigurationException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    } catch (SAXException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    } catch (IOException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    }
    // return DOM
    return doc;
} 
```

错误：

```
09-18 13:36:20.031: E/Error:(3846): Unexpected token (position:TEXT xml version="1.0...@2:1 in java.io.InputStreamReader@4144ac08) 
```

**感谢您的帮助，但请在您的回答中具体说明**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:03:54.530

这在我身上发生了很多次，你应该仔细检查你正在打开的文件的编码。我建议您使用手动设置编码的文件的本地副本对此进行测试。**

# jquery - Jquery UI 1.9 工具提示在带有单选按钮的表格中显示两次？

> ID：12478424
> 
> 赞同：0
> 
> 时间：2012-09-18T13:51:57.057
> 
> 标签：jquery, jquery-ui, jquery-tooltip

有人知道这里发生了什么吗？

[jsbin 显示两个工具提示，其中应该只有一个](http://jsbin.com/uqipug/15/edit)

代码：

```
<!DOCTYPE html>
<html>
<head>

  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />

<meta charset="utf-8">
<title>jQuery UI Autocomplete - Combobox</title>
<script src="https://raw.github.com/jquery/jquery-ui/8fcbe502ee548fe8c10cf64d7053c70837fdcca3/jquery-1.7.2.js"></script>
<script src="https://raw.github.com/jquery/jquery-ui/master/ui/jquery.ui.core.js"></script>
<script src="https://raw.github.com/jquery/jquery-ui/master/ui/jquery.ui.widget.js"></script>
<script src="https://raw.github.com/jquery/jquery-ui/master/ui/jquery.ui.button.js"></script>
<script src="https://raw.github.com/jquery/jquery-ui/0a1cd9501c01b92a7f007cea1040f50ef4997400/ui/jquery.ui.position.js"></script>
<script src="https://raw.github.com/jquery/jquery-ui/master/ui/jquery.ui.menu.js"></script>
<script src="https://raw.github.com/jquery/jquery-ui/master/ui/jquery.ui.autocomplete.js"></script>
<script src="https://raw.github.com/jquery/jquery-ui/interactions/ui/jquery.ui.tooltip.js"></script>

<meta charset=utf-8 />
<title>JS Bin</title>

  </head>  

  <body>
    <style>
      /*!
 * jQuery UI Tooltip @VERSION
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
.ui-tooltip {
    padding:8px;
    position:absolute;
    z-index:9999;
    -o-box-shadow: 0 0 5px #aaa;
    -moz-box-shadow: 0 0 5px #aaa;
    -webkit-box-shadow: 0 0 5px #aaa;
    box-shadow: 0 0 5px #aaa;
}
/* Fades and background-images don't work well together in IE6, drop the image */
* html .ui-tooltip {
    background-image: none;
}
body .ui-tooltip { border-width:2px; }

    </style>
       Please mouseover the blue area, then from there over a radio.

    <table id="targetID" style="background-color: lightblue;">
    <tbody><tr>
<td>
<input type="radio"  name="targetID" checked="checked"><label for="targetID:0"> 3a</label></td>
<td>
<input type="radio" value="2" id="targetID:1" name="targetID"><label for="targetID:1"> 3b</label></td>
    </tr>
</tbody></table>

  <script language="javascript" type="text/javascript">     

    $(document).ready(function(){
      $("#targetID").tooltip({content : function(){return "Sad tooltip should only appear once :.-(";}, items: "[id]"});
    });
  </script> 

  </body>

  </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:34:59.040

原因是因为第二个输入也有一个 id 属性，所以它匹配你的提示 id 选项。

似乎工具提示不会检查工具提示项是否嵌套在另一个工具提示项内。我认为这确实有道理。例如，如果您有一个非常大的区域需要工具提示，那么里面的一堆较小的项目也需要工具提示。

我建议更改 items 选项以不过滤掉 id。

# android - 无法在 Android 中添加电子邮件签名

> ID：12478426
> 
> 赞同：2
> 
> 时间：2012-09-18T13:52:04.543
> 
> 标签：android, email, signature

我正在尝试撰写和发送一封电子邮件，该电子邮件将在我在 android 中的电子邮件内容底部包含一个签名。我可以发送电子邮件，但无法添加自己的签名。你有什么建议吗？

这是我的代码：

```
public void addListener() {
                final Button button = (Button) findViewById(R.id.button1);
                button.setOnClickListener(new View.OnClickListener() {
                        public void onClick(View v) {
                                findViewById = (TextView) findViewById(R.id.t1);
                                Intent i = new Intent(Intent.ACTION_SEND);
                                i.setType("text/plain");
                                i.putExtra(Intent.EXTRA_EMAIL,
                                                new String[] { "some@gmail.com"});
                                /*i.putExtra(Intent.EXTRA_CC,
                                                new String[] { "some@gmail.com" });*/
                                i.putExtra(Intent.EXTRA_SUBJECT, "Android Test");
                                i.putExtra(Intent.EXTRA_TEXT, "Body");
                                //i.putExtra(Intent.EXTRA_TEXT, "signature");
                                try {
                                        startActivity(Intent.createChooser(i, "Choose mail app..."));
                                } catch (android.content.ActivityNotFoundException ex) {                                       
                                }

                        }
                });
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T15:19:03.827

我不认为“签名”真的是电子邮件的不同部分。我认为您可以将签名附加到您的身体上。

```
i.putExtra(Intent.EXTRA_TEXT, "Body" + "\\n" + "Signature"); 
```

# c# - Silverlight中的滚动覆盖

> ID：12478427
> 
> 赞同：0
> 
> 时间：2012-09-18T13:52:07.430
> 
> 标签：c#, scroll, overlay

我正在使用 C#、Silverlight、WP7。

我一直在查看 Metro Grid Helper（[请参阅此链接](http://www.jeff.wilcox.name/2011/10/metrogridhelper/)），因为我也有兴趣在现有应用程序上进行覆盖。基本上我想突出一个区域，这将在叠加层上添加一个矩形。

不同之处在于我希望叠加层随页面滚动，以便矩形将保持在下面的项目（如 TextBlock）上方。我对如何做到这一点感到困惑。

关于我应该为此研究哪些方法、属性或事件的任何建议？
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:31:03.307

由于我仍在学习 Silverlight 中的一切工作原理，因此我今天弄清楚了这一点。

原始问题中链接的 MetroGridHelper 类将叠加对象添加为页面主 Grid 的子级。这意味着无论应用程序的其他控件是什么（如 Pivot、Panorama 或 ScrollViewer），覆盖对象都不会移动。

因此，要让对象滚动（或使用 Pivot 或 Panorama 滑动），对象需要是控件的子项。因此，在主网格中，查找控件并将其设为对象的父级。

# python - Z3Python 中的散列表达式

> ID：12478429
> 
> 赞同：1
> 
> 时间：2012-09-18T13:52:12.540
> 
> 标签：python, z3

看起来 z3 表达式有一个`hash()`方法，但没有`__hash__()`。有理由不使用`__hash__()`吗？这允许表达式是可散列的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:14:07.920

没有理由不调用它`__hash__()`。我之所以叫它是`hash()`因为我是 Python 新手。我将`__hash__()`在下一个版本（Z3 4.2）中添加。

**编辑：**正如评论中所指出的，我们还需要`__eq__`或`__cmp__`能够使用 Z3 对象作为 Python 字典中的键。不幸的是，该`__eq__`方法（定义于`ExprRef`）用于构建 Z3 表达式。也就是说，如果`a`和`b`正在引用 Z3 表达式，则`a == b`返回表示表达式的 Z3 表达式对象`a = b`。这个“特性”便于用 Python 编写 Z3 示例，但它有一个讨厌的副作用：Python 字典类将假定所有 Z3 表达式彼此相等。实际上，情况更糟，因为 Python 字典只调用`__eq__`具有相同哈希码的对象的方法。因此，如果我们定义`__hash__()`我们可能有这样的错觉，即使用 Z3 表达式对象作为 Python 字典中的键是安全的。出于这个原因，我不会包括`__hash__()`在课堂`AstRef`上。想要在字典中使用 Z3 表达式作为键的用户可以使用以下技巧：

```
from z3 import *

class AstRefKey:
    def __init__(self, n):
        self.n = n
    def __hash__(self):
        return self.n.hash()
    def __eq__(self, other):
        return self.n.eq(other.n)

def askey(n):
    assert isinstance(n, AstRef)
    return AstRefKey(n)

x = Int('x')
y = Int('y')
d = {}
d[askey(x)] = 10
d[askey(y)] = 20
d[askey(x + y)] = 30
print d[askey(x)]
print d[askey(y)]
print d[askey(x + y)]
n = simplify(x + 1 + y - 1)
print d[askey(n)] 
```

# javascript - 用jquery在html中格式化json

> ID：12478430
> 
> 赞同：-1
> 
> 时间：2012-09-18T13:52:12.627
> 
> 标签：javascript, jquery, json

我有 json 对象，我想将它作为 html 页面放入。

这是json：

```
[
    {
        "name":"Temoignage",
        "id":"2"
    },
    {
        "name":"Bien etre",
        "id":"3"
    },
    {
        "name":"paradis",
        "id":"5"
    },
    {
        "name":"guerir",
        "id":"6"
    },
    {
        "name":"energie",
        "id":"9"
    }
] 
```

我想使用 append 函数把它放在一个 div 标签中，比如：

```
<div id="content">
<p><a href="id"> name </a></p>
<p><a href="id"> name </a></p>
<p><a href="id"> name </a></p>
.
.
.
</div> 
```

注意： id 和 name 是我的 json 对象的条目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T13:55:23.047

```
var items="";
$.each(data,function(index,item){
    items+="<p><a href='"+item.id+"'>"+item.name+"</a></p>";
});
$("#content").html(items); 
```

假设数据变量将具有`JSON`数据。

工作示例[http://jsfiddle.net/Qq2e6/](http://jsfiddle.net/Qq2e6/)

[当您使用 JSON 时， JsonLint](http://jsonlint.com/)是验证 JSON 的有用工具

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T13:58:30.893

使用遍历您的数组`each`并将每个项目附加到`content`div 使用`appendTo`：

```
var json = [{"name":"Temoignage","id":"2"},{"name":"Bien etre","id":"3"},{"name":"paradis","id":"5"},{"name":"guerir","id":"6"},{"name":"energie","id":"9"}]​;

var $content = $("#content");
$.each(json, function () {
    $("<a>", { href: this.id }).text(this.name).appendTo($content).wrap("<p>");
}); 
```

**[​演示](http://jsfiddle.net/KNMFk/)** 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T17:36:56.497

作为替代方案，您也可以使用众多模板库之一。

[这是一个使用Mustache.js](https://github.com/janl/mustache.js/)的示例

小提琴：http: [//jsfiddle.net/bboone/dCVwt/1](http://jsfiddle.net/bboone/dCVwt/1)

**JS**

```
var json = [{"name":"Temoignage","id":"2"},{"name":"Bien etre","id":"3"},{"name":"paradis","id":"5"},{"name":"guerir","id":"6"},{"name":"energie","id":"9"}]; 

$('#content').html(Mustache.render($('#template').html(), {items:json})); 
```

**HTML**

```
<div id='content'></div>
<script type='text/html' id='template'>
    {{#items}}
        <p><a href="{{id}}">{{name}}</a></p>
    {{/items}}
</script>​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T13:57:54.957

```
var jsArray; // Your JSON content into this variable

$.each(jsArray, function(i,e) {
   var $element = $("<p>").append($("<a>").attr('id', e.id).text(e.name)),
   $("#content").append($element);
});

<div id="content">

</div> 
```

或者，我建议您为此学习 MVVM (Knockout.js)，它将您的层分开并使此过程更容易。

# git - Git子模块行为异常

> ID：12478431
> 
> 赞同：0
> 
> 时间：2012-09-18T13:52:27.767
> 
> 标签：git, git-submodules

我有一个超级项目，我在项目中添加了一个子模块，我已经重命名了子模块所在的目录并编辑了相应的文件。

反正，

经过大量工作后，我`cd`进入了子模块目录，运行时`git status`我收到这些可爱的消息，通知我已删除我的一个文件夹，并通过关联所有内容并显然添加了更改，因此它们已准备就绪提交。我不记得这样做了。

然而，如果我跳入我的文件浏览器，文件就在那里。现在这些文件包括我也修改过的一些文件，但修改不会显示在 git status 中，就 git 而言，我已经删除了该文件夹。

那么，下一个是，

如果我这样做，`git pull`我会收到一条消息，通知我拉取将覆盖我提到我已更改的文件中的更改。但不要出现在 git status 中，我应该提交或存储文件。

但是，运行`git add /path/to/file.ext`我得到`fatal: pathspec 'path/to/file.ext' did not match any files`了这很有意义，因为 git 认为我已经删除了该文件夹。

这里发生了什么？

我想我可以使用`git reset HEAD path/to/file.ext`.

但是，我对所谓的已删除文件所做的更改会怎样？

另外，从子模块内部，如果我调用`git add <path to folder inside submodule>`最初拉出子模块时不存在的目录，那么我会得到`fatal: '<path to folder inside submodule>' is outside repository`

# c++ - 分配给数组成员时，Clang 中的“只读变量不可分配”

> ID：12478432
> 
> 赞同：2
> 
> 时间：2012-09-18T13:52:27.743
> 
> 标签：c++, clang, hashset, readonly

我有一些涉及迭代`std::hash_set`这样的代码：

```
typedef std::hash_set< VEdge, VEdge > MyHashSet;
MyHashSet hs;

for( int i=0; i < numFaces; ++i )
{
    VEdge myEdge( someValue, someOtherValue );

    MyHashSet::iterator it = hs.find(myEdge);

    if ( it->face[0] == -1 )
        it->face[0] = i;        // Error: "Read-only variable is not assignable"
} 
```

我已经更改了代码以简化它，但您可以看到它在做什么。`VEdge`在一个结构中定义，该结构具有`int face[2]`作为其成员之一。我遇到的问题是 Clang 告诉我这`it->face[0]`是只读的，即使相同的代码适用于 MSVC（或者我被告知）。Clang 有什么东西意味着我必须以`face`某种方式将变量定义为可写的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T14:09:13.123

`hash_set`类是非标准的。Microsoft 的版本允许您通过 修改对象的内容`iterator`，但 SGI 的版本，我猜您正在使用 Clang 的版本，具有`iterator`和`const_iterator`作为相同类型，这意味着您不能修改容器的内容通过迭代器。

也一样，因为容器中对象的位置是由它们的哈希值决定的，而它们的哈希值是由它们的值决定的。更改它们的值将需要更改它们的位置，但哈希集无法检测到您正在更改它们的值，因此容器会不一致。（也许您正在修改的成员不会真正影响哈希，但无法`hash_set`知道这一点。如果您修改内容，Microsoft 的版本可能会留下未定义的行为，而 SGI 则完全禁止该操作。）

# jquery - jqplot 无法正确显示图表

> ID：12478433
> 
> 赞同：0
> 
> 时间：2012-09-18T13:52:28.990
> 
> 标签：jquery, jqplot

```
jQuery(document).ready(function() {
     var firstv=10;
            var secondv=20;
            var thirdv=70;
            var name1=ram;
            var name2=kumar;
            var name3=manju;
      var data = [ [name1, firstv],[name2, secondv], [name3, thirdv]];

var plot1 = jQuery.jqplot('chart', [data],
        {
            grid: {
                shadow: false,
                background: '#FFFFFF',                                                                                          
            },
            seriesDefaults: {
                // Make this a pie chart.
                renderer: jQuery.jqplot.PieRenderer,
                rendererOptions: {
                    showDataLabels: true,
                    padding: 20,
                    startAngle: 270
                }
            },
            legend: {
                show: true,
                location: 'e',
                fontSize: 11,
                marginTop: 10,                                
            }
        });
}); 
```

[工作代码链接](http://jsfiddle.net/Rxm3L/25/)

如果我将值分配给 var ，它不会获取它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:57:04.433

你的意思是存储一个字符串吗？

```
var secondv=20;
var thirdv=70;
var name1=ram; //  var name1='ram';
var name2=kumar; // var name2='kumar';
var name3=manju; // var name3='manju'; 
```

如果不是，您从哪里获得这些变量？

如果您只使用这些值一次。您可以直接在数据中分配它们

```
var data = [
    ["ram", 10], 
    ["kumar", 20],
    ["manju", 70]
];​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:56:39.200

检查错误控制台：

```
Uncaught ReferenceError: ram is not defined 
```

将您的名称分配更改为带引号的名称：

```
var name1="ram";
var name2="kumar";
var name3="manju"; 
```

[这是更新的示例](http://jsfiddle.net/kXrfR/)。

# php - DOMDocument 保留 ASCII 编码？

> ID：12478456
> 
> 赞同：1
> 
> 时间：2012-09-18T13:53:36.760
> 
> 标签：php, xml, encoding, ascii, domdocument

好的，我有一个名为“ **temp.xml** ”的文件，其中包含大约 100 个条目。这是子条目的示例..

```
<title>&#169; 2008 Some Company</title> 
```

现在，我想获得“**标题**”中的确切内容，但通过这样做......

```
$doc = new DOMDocument();
$doc->load('temp.xml');
foreach ($doc->getElementsByTagName('entry') as $node) {
echo $node->getElementsByTagName('title')->item(0)->nodeValue;
} 
```

我得到...

> ```
> Â© 2008 Some Company 
> ```

而且我要...

> ```
> &#169; 2008 Some Company 
> ```

Php 正在转换 ASCII 字符，我希望它们完好无损。我现在在谷歌上搜索了两个多小时无济于事......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:30:16.747

好的，似乎使用 XAMPP 与 MySql 的连接不是在 UTF-8 中完成的......所以这就是解决我的问题的方法......

```
$link2 = mysql_connect('localhost', 'root', '');
mysql_set_charset('utf8',$link2); //Set the connection to UTF-8
mysql_select_db('mydb') or die( "Unable to select database");
$doc = new DOMDocument();
$doc->load('temp.xml');
foreach ($doc->getElementsByTagName('entry') as $node) {
$title = $node->getElementsByTagName('title')->item(0)->nodeValue;
$query = "INSERT INTO sb_temp (id, title) VALUES ('', '$title')";
$result = mysql_query($query);
} 
```

我只是将mysql连接设置为... mysql_set_charset('utf8',$link2); 现在数据按原样保存。否则，例如“©”符号被保存为“Â©”。无论如何感谢您的帮助：]

# html - 基于开关在代码中在运行时将 html 添加到 ui web 视图

> ID：12478460
> 
> 赞同：0
> 
> 时间：2012-09-18T13:53:47.177
> 
> 标签：html, objective-c, ios, text

我是否可以在没有单独的 html 文件的情况下将文本添加到 uiwebview 并更改此视图中的文本和颜色？所以我在 switch 语句中定义了 html 文件中的内容？我目前使用标签来执行此操作，但标签中不能有超过一种颜色，因此我需要使用 html，因为核心文本看起来非常复杂。

```
switch (counter)
{
    case 0:
        titleLabel.text = @"needs to be more than one colour";
      break;
    case 1:
        titleLabel.text = @"needs to be more than one colour";
        break; 
```

等等...

我可以以某种方式在这些开关的代码中的标签中定义 html 文件中的内容，而不是使用单独的 html 文件吗？如果是这样，我会怎么做？

干杯，

刘易斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:09:44.357

假设您的 HTML 包含一个名为 myCssClass 的 CSS 类，您可以在其中指定颜色和标签：

```
<label id="myTextElement">A Label</label> 
```

您可以使用如下代码以编程方式执行 javascript 来设置不同的 CSS 类：

```
UIWebView *webView; 
.
.
.
[webView stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"myTextElement\").className = \"myCssClass\";"]; 
```

不过老实说，如果您在 CoreText 上观看 WWDC 2012 视频，您可能不会那么害怕……

# joomla2.5 - 主要组件模块的 yt 框架 div

> ID：12478468
> 
> 赞同：1
> 
> 时间：2012-09-18T13:54:17.063
> 
> 标签：joomla2.5

我在 Firebug 中使用 yt 框架（joomla 2.5）

```
<div style="width: 0px;float:right; display:none" id="yt_col2"> 
```

但这行不在 index.php 文件中。我在哪里可以找到这条线？

我检查了很多php文件，没有运气。需要删除它，因为模块显示不正确。

谢谢。

# linux - 每分钟执行一次 shell 脚本的 crontab

> ID：12478473
> 
> 赞同：1
> 
> 时间：2012-09-18T13:54:43.423
> 
> 标签：linux, shell, cron, crontab

我在我的红帽服务器上制作了一个 shell 脚本，需要每分钟运行一次。我的脚本位于`/media`. 我已经像这样编辑了 crontab：

```
* * * * * /media/statusshellscript.sh 
```

我的脚本肯定在上面的位置，我知道 5 星意味着每分钟运行一次。

哦..我的脚本肯定有效！因为当我做一个 ./statusshellscript 它工作正常。无论如何，这是我的脚本，它基本上只是运行我制作的一个让生活更轻松的 php 脚本。

```
#!/bin/bash
# Script to execute the PHP Script

cd ~
cd /media/PHPServerTest
php -f index.php 
```

Crontab 目前完全没有做任何事情。不确定接下来要尝试什么？

另外..权限不应该像我所做的那样成为问题`chmod 777 statusshellscript`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:20:36.733

如果它不是通过**cronjob**运行，而是通过**命令**运行正常，那么可能有**两个**原因

1）你从来没有让你的文件**可执行**，你可以使用命令解决我的问题

```
sudo chmod +x filename 
```

2）您的路径不正确，要查找绝对路径，您可以使用命令

```
realpath(filename) 
```

如果尚未安装**realpath**，它将向您提及如何安装它的命令

通过检查这些点，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:14:50.900

`PATH`crontab 与 shell 中的不同。

确保`PATH`在 crontab 中定义了包含脚本所需的所有内容的 a。

此外，请确保脚本以`#!`指向所需外壳的有效标记开头。

或者，使用脚本中*所有*命令的完整路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:51:31.387

正如其他人所说，我敢打赌 PATH 配置错误。尝试将其放入您的路径中：

“* * * * * /media/statusshellscript.sh”

运行脚本时检查该输出文件以查看 PATH。与其在 crontab 中定义 PATH，不如在脚本中定义它。

# ios - 在 Dropbox/Facebook 登录后在弹出窗口中推送另一个 VC

> ID：12478480
> 
> 赞同：0
> 
> 时间：2012-09-18T13:55:15.467
> 
> 标签：ios, dropbox, pushviewcontroller

我有一个 iOS 应用程序，它将列出来自 3rd 方存储（Dropbox、Facebook）的照片到弹出窗口，在使用他们的完成第 3 方身份验证后，您将 pushViewController 放在哪里，以便为第 3 方内容（dropbox 或 Facebook）推送另一个 ContentDetailVC开发工具包？

所以顺序是这样的

单击设置图标->打开一个显示菜单项的弹出窗口->单击一个菜单项（下拉框）->它打开第3方（下拉框登录modalVC）->登录成功->弹出框的NavController将下拉框DetailVC推送到弹出框。理想情况下，我想保持弹出框仍然可见，但一旦第 3 方登录成功，就会推送到新的 VC。

我目前将登录方法放在 DetailVC 的 ViewDidLoad 中，因此第 3 方 loginVC 显示正确，但是一旦 loginVC 关闭，我的 DetailVC 内容无法刷新，因为 ViewDidLoad 已经完成......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:58:48.903

在 viewWillAppear 或 viewDidAppear 中进行刷新。每次视图出现时都会调用这些（当 DetailVC 被推送或视图被弹出以显示您的 DetailVC 时）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:59:00.640

使用此代码

```
[((UINavigationController*)self.parentViewController) pushViewController:nextVC animated:YES] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:24:39.420

您需要编写代码来找到重新加载 ViewController 的类方法

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url{
   //write the code for finding out your respective ViewController and then the method to reload the view controller.
} 
```

这肯定会解决您的问题，因为它帮助我们解决了类似的情况。

# android - Android：如何基于 achartengine lib 在绘图轴中创建负值？

> ID：12478481
> 
> 赞同：1
> 
> 时间：2012-09-18T13:55:16.527
> 
> 标签：android, achartengine

我想在两个轴上创建带有正数和负数的 XY 图。默认情况下，achartnegine 显示系列的负值，但起始点始终为零^ 图形从零开始，下一个数字类似于 -50、-40 等。我试图避免这种情况，但还没有成功。你能建议正确的方法吗？

```
 XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
            dataset.addSeries(seriesXY);

            XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
            //renderer.setXAxisMin(-10f);
            //renderer.setYAxisMin(-250f);
            //renderer.setBarSpacing(SPACING);
            //renderer.setRange(new double[] { -250d, 250d});
            XYSeriesRenderer sRenderer = new XYSeriesRenderer();
            sRenderer.setColor(Color.BLUE);
            sRenderer.setFillBelowLine(false);
            sRenderer.setChartValuesSpacing(SPACING);
            sRenderer.setFillBelowLineColor(Color.WHITE);
            sRenderer.setFillPoints(false);

            renderer.addSeriesRenderer(sRenderer);
            renderer.setApplyBackgroundColor(true);
            renderer.setBackgroundColor(Color.WHITE);
            renderer.setMarginsColor(Color.WHITE);
            renderer.setAxesColor(Color.BLACK);
            renderer.setXLabelsColor(Color.BLUE);
            renderer.setYLabelsColor(0, Color.BLUE);
            renderer.setXLabelsAlign(Align.RIGHT);
            renderer.setYLabelsAlign(Align.RIGHT);

        GraphicalView chartView = ChartFactory.getLineChartView(
                getActivity(),
                dataset, renderer);
        plot.removeAllViews();
        plot.addView(chartView, new LayoutParams(
                LayoutParams.MATCH_PARENT, 200));

        chartView.repaint(); 
```

我使用 LineChartView

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:12:51.320

答案是您不能使用 AChartEngine 将轴放在图表的中心，因为它是开箱即用的。

# grails - 连接到插件服务调用

> ID：12478482
> 
> 赞同：0
> 
> 时间：2012-09-18T13:55:20.317
> 
> 标签：grails

我有一个作为后台进程执行服务调用的插件。也就是说，它在计时器上执行一些与任何用户操作没有直接关系的操作。

我需要做的是每次该服务调用完成时在“主”应用程序中执行一些代码。有没有办法挂钩该插件代码？我可以访问插件代码，因此更改它并不是一个巨大的障碍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:27:44.683

您可以让您的插件服务在完成时发布一个事件，然后在您的主应用程序中监听该事件。我已经使用过这种模式几次，它是一种非常方便的方式来解耦我的应用程序的各个部分。为此，请创建一个[事件](http://static.springsource.org/spring/docs/1.2.9/api/org/springframework/context/ApplicationEvent.html)类。

```
class PluginEvent extends ApplicationEvent {
   public PluginEvent(source) {
      super(source)
   }
} 
```

然后，让您的插件服务实现`ApplicationContextAware`。这为您的插件提供了一种发布事件的方法

```
class PluginService implements ApplicationContextAware {
  def applicationContext

  def serviceMethod() {
     //do stuff
     publishPluginEvent()  
  }

  private void publishPluginEvent() {
    def event = new PluginEvent(this)
    applicationContext.publishEvent(event)
  }
} 
```

然后在您的主应用程序中，创建一个侦听器服务，该服务将在事件发布时做出响应：

```
class ApplicationService implements ApplicationListener<PluginEvent> {
   void onApplicationEvent(PluginEvent event) {
     //whatever you want to do in your app when 
     // the plugin service fires.
   }
} 
```

这个监听器不需要是 Grails 服务，你可以使用 POJO/POGO，但你需要将它配置为内部的 spring bean `resources.groovy`。

我最近一直在使用这种方法，它对我来说效果很好。它绝对是您的 Grails 工具箱中的一个不错的工具。

# cryptography - RSA 的创建者可以读取所有编码的消息吗？

> ID：12478486
> 
> 赞同：-1
> 
> 时间：2012-09-18T13:55:33.750
> 
> 标签：cryptography, rsa, prime-factoring

根据此页面[http://en.wikipedia.org/wiki/RSA_numbers](http://en.wikipedia.org/wiki/RSA_numbers) ，每个 RSA 版本都使用一个难以分解的常量长数字。

这是正确的吗？

例如，RSA-100 使用数字

```
1522605027922533360535618378132637429718068114961380688657908494580122963258952897654000350692006139 
```

这是在 1991 年考虑的。

同时 RSA-210 使用数字

```
245246644900278211976517663573088018467026787678332759743414451715061600830038587216952208399332071549103626827191679864079776723243005600592035631246561218465817904100131859299619933817012149335034875870551067 
```

尚未考虑在内。

我的问题是：这是否意味着任何特定 RSA 版本的创建者都知道因子编号并因此可以读取所有编码消息？如果他们不知道分解，那么他们如何生成一个数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:27:02.427

这些数字只是**样本**随机数，RSA 使用这些随机数来判断算法的充分性。为了安全起见，RSA 非对称密钥算法本身依赖于分解大量数字的难度。

分解这些数字的大致时间或难度是算法中使用的其他此类数字将如何影响我们拥有的计算能力的指标。

这些数字是挑战，描述如下。

**（引自[参考](http://www.rsa.com/rsalabs/node.asp?id=2094#WhyIs)）**

> RSA 质询号码是使用安全过程生成的，该过程保证每个号码的因数不能通过除对已发布值进行因式分解以外的任何方法获得。没有人，甚至 RSA 实验室都不知道任何挑战数字的因素。这一代发生在没有任何网络连接的康柏笔记本电脑上。过程如下：
> 
> 首先，使用连接到笔记本电脑并行端口的 ComScire QNG 硬件随机数生成器生成 30,000 个随机字节。
> 
> 在 RSA BSAFE 库的 4.0 版中，随机字节被用作 B_GenerateKeyPair 函数的种子值。
> 
> 生成的密钥对的私有部分被丢弃。公共部分以 DER 格式导出到磁盘文件。
> 
> 从 DER 文件中提取模数并转换为十进制以发布在网页上。
> 
> 笔记本电脑的硬盘被破坏了。

当可靠地分解特定大小的数字变得相当简单和快速时，通常意味着是时候转向更长的数字了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:24:05.033

看看[罗恩错了，怀特是对的](http://eprint.iacr.org/2012/064.pdf)。是对重复RSA密钥使用和RSA密钥使用共同因素的详细分析（你描述的问题）。文章中有很多内容，但引用其结论：

> 我们检查了我们在网络上收集的数百万个公钥的计算属性。大多数似乎没有明显的弱点，可以预期提供预期的安全级别。我们发现大约 0.003% 的公钥是不正确的，这似乎不是不可接受的。

是的，这是一个问题，而且问题将继续增长，但可能的密钥数量之多意味着问题不是太严重，至少现在还不是。请注意，这篇文章也没有涵盖越来越容易暴力破解较短的 RSA 密钥。

请注意，这不是 RSA 算法或用于生成密钥的随机数生成器的问题（尽管论文确实提到播种可能仍然是一个问题）。将新生成的密钥与来自任意、有时断开连接的设备的不断扩展的现有密钥列表进行检查是很困难的。这不同于[已知的 DES 弱密钥](http://en.wikipedia.org/wiki/Weak_key)，例如，弱密钥是预先知道的。

# c# - 如何在可移植类库中引用 Microsoft.CSharp？

> ID：12478489
> 
> 赞同：2
> 
> 时间：2012-09-18T13:56:04.000
> 
> 标签：c#, .net, .net-4.0

我正在尝试在可移植类库中使用 .NET 4 的动态类型，但我无法让所有必需的引用正常工作。我可以很好地引用 System.Core，但 Microsoft.CSharp 给我带来了一些麻烦。似乎我需要添加所有不同版本的 Microsoft.CSharp.dll 作为对我的项目的引用，但 Visual Studio 只允许我添加一个；如果我添加另一个，我会收到一条错误消息，指出它已被引用。不过，我不能只用其中一个来编译——如果我引用 Windows 的话，我会得到：

缺少编译器所需的成员“Microsoft.CSharp.RuntimeBinder.Binder.InvokeMember”

当我尝试构建项目时。如果我引用 Silverlight 一个，该引用似乎由于某种原因无效 - 它在解决方案资源管理器的引用列表中有一个黄色警告图标！

那么有什么方法可以在不破坏我的项目或将其转换为非便携式库的情况下引用这两个 DLL？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T15:57:34.113

您无法创建使用.NET 4.0 中的[`dynamic`关键字的可移植库。](http://msdn.microsoft.com/en-us/library/dd264741.aspx)

[.NET 4.5 添加了对可移植库中的动态类型的支持](http://msdn.microsoft.com/en-us/library/gg597391.aspx#assemblies)。

在 .NET 4.0 中，您必须使用反射来进行您想要进行的调用（如果您无法升级到 4.5）。

# arrays - 在 Powershell 中提取一系列数组

> ID：12478494
> 
> 赞同：15
> 
> 时间：2012-09-18T13:56:27.673
> 
> 标签：arrays, loops, powershell

假设变量 $a 中有一个这样创建的数组，

```
$a  = ,@(1,2,3)
$a += ,@(4,5,6)
$a += ,@(7,8,9)
$a += ,@(10,11,12) 
```

我想将数组的一部分（比如 $a[1] 和 $a[2]）提取到另一个变量中，比如 $b，这样，

```
$b[0] = @(4,5,6)
$b[1] = @(7,8,9) 
```

我可以使用一个简单的 for 循环来完成这项任务，但我在想是否有更“优雅”的方式来做到这一点......可能是单线？

提前致谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-18T14:19:27.120

您可以使用 Range 运算符对数组进行切片：

```
$b = $a[1..2] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-11T15:53:28.210

值得注意的是 Range 运算符支持动态值 - 当您想要动态计算范围时非常有用，例如：

```
$a = @(0,1,2,3,7)
$b = @(4,5,6)
$twotoseven = $a[($a.Length-($a.Length-2))..($a.Length-2)] + $b + $a[-1] 
```

输出：

```
2 3 4 5 6 7 
```

# ruby-on-rails - Ruby从父类调用子方法

> ID：12478499
> 
> 赞同：4
> 
> 时间：2012-09-18T13:56:38.430
> 
> 标签：ruby-on-rails, ruby, superclass

我正在编写一个程序，其中一个类与另一个类具有相同的行为。唯一的区别是有一个类变量 ，`@secret_num`它在两个类之间的计算方式不同。我想调用一个特定的超类方法，但使用子类中的类变量。棘手的是类变量不是常量，所以我在它自己的方法中设置它。有什么办法可以做我在下面尝试做的事情吗？谢谢

```
Class Foo
  def secret
    return [1,2,3].sample
  end

  def b
    @secret_num = secret
    ... # lots of lines of code that use @secret_num
  end
end

Class Bar < Foo
  def secret
    return [4, 5, 6].sample
  end

  def b
    super    # use @secret_num from class Bar.
  end
end 
```

这不起作用，因为调用`super`也调用了父类的`secret`方法， ie `Foo#secret`，但我需要使用子类的秘密号码， ie `Bar#secret`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T14:01:25.023

```
class Foo
  def secret
    [1,2,3].sample
  end

  def b(secret_num = secret)
    <lots of lines of code that use secret_num>
  end
end

class Bar < Foo
  def secret
    [4, 5, 6].sample
  end
end 
```

请注意，您不需要`secret`作为参数传递给`b`. 只要您不在`b`子类中重新定义，继承就会负责调用`secret`.

我的偏好是将它作为参数，以便我可以在测试中传递各种值。

# ios - 如何在ios中获取图像元数据

> ID：12478502
> 
> 赞同：16
> 
> 时间：2012-09-18T13:56:45.967
> 
> 标签：ios, image, metadata

我想使用 ios 显示图像元数据。元数据，如光圈、快门速度、曝光补​​偿、ISO、镜头焦距等。所以如果有人有想法，请帮助我。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-18T14:13:55.267

```
CGImageSourceRef source = CGImageSourceCreateWithURL( (CFURLRef) aUrl, NULL);
CGImageSourceRef source = CGImageSourceCreateWithData( (CFDataRef) theData, NULL);
NSDictionary* metadata = (NSDictionary *)CFBridgingRelease(CGImageSourceCopyPropertiesAtIndex(source,0,NULL));
CFRelease(source); 
```

[在此处](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CGImageProperties_Reference/Reference/reference.html#//apple_ref/doc/uid/TP40005103)查看字典内容。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-25T06:46:15.540

这是从图像路径获取元数据的代码：

```
NSData *imagedata = [NSData dataWithContentsOfFile:imagePath];
CGImageSourceRef source = CGImageSourceCreateWithData((CFMutableDataRef)imagedata, NULL);
NSDictionary *metadata = [(NSDictionary *)CGImageSourceCopyPropertiesAtIndex(source,0,NULL)autorelease]; 
```

或者，如果使用 swift 4.0：

```
var imagedata = Data(contentsOfFile: imagePath) 
var source: CGImageSourceRef = CGImageSourceCreateWithData((imagedata as? CFMutableDataRef), nil) 
var metadata = CGImageSourceCopyPropertiesAtIndex(source, 0, nil) as? [AnyHashable: Any] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-12-12T14:09:14.310

迅速 4

```
static func imageDataProperties(_ imageData: Data) -> NSDictionary? {
    if let imageSource = CGImageSourceCreateWithData(imageData as CFData, nil)
    {
      if let dictionary = CGImageSourceCopyPropertiesAtIndex(imageSource, 0, nil) {
        return dictionary
      }
    }
    return nil
  } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-16T13:45:47.667

通过包装为 Swift 结构的 Core Graphics 读取图像属性：

```
struct ImageMetadata {

    var imageProperties : [CFString: Any]

    init?(data: Data) {
        let options = [kCGImageSourceShouldCache: kCFBooleanFalse]
        if let imageSource = CGImageSourceCreateWithData(data as CFData, options as CFDictionary),
            let imageProperties = CGImageSourceCopyPropertiesAtIndex(imageSource, 0, nil) as? [CFString: Any] {
            self.imageProperties = imageProperties
        } else {
            return nil
        }
    }

    var dpi : Int? { imageProperties[kCGImagePropertyDPIWidth] as? Int }
    var width : Int? { imageProperties[kCGImagePropertyPixelWidth] as? Int }
    var height : Int? { imageProperties[kCGImagePropertyPixelHeight] as? Int }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-04T09:00:32.483

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
  NSURL *referenceURL = [info objectForKey:UIImagePickerControllerReferenceURL];

    if(referenceURL) {
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    [library assetForURL:referenceURL resultBlock:^(ALAsset *asset) {
        ALAssetRepresentation *rep = [asset defaultRepresentation];
        NSDictionary *metadata = rep.metadata;
        NSLog(@"image data %@", metadata);

    } failureBlock:^(NSError *error) {
        // error handling
    }];
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-05T12:17:16.423

使用照片框架更新到 iOS 11

**目标 - C：**

```
#import <Photos/Photos.h>

- (void)imagePickerController:(UIImagePickerController *)imagePicker didFinishPickingMediaWithInfo:(NSDictionary<NSString *,id> *)info {

    PHAsset* asset = info[UIImagePickerControllerPHAsset];

    [asset requestContentEditingInputWithOptions:nil completionHandler:^(PHContentEditingInput *contentEditingInput, NSDictionary *info) {
        CIImage *fullImage = [CIImage imageWithContentsOfURL:contentEditingInput.fullSizeImageURL];

        NSLog(@"%@", fullImage.properties.description);
    }];

    [imagePicker dismissViewControllerAnimated:YES completion:nil];
} 
```

您还需要照片库使用（NSPhotoLibraryUsageDescription）的权限，然后可以添加以下代码来查看是否加载或查看确实出现

```
[PHPhotoLibrary requestAuthorization:^(PHAuthorizationStatus status) {
    switch (status) {
        case PHAuthorizationStatusAuthorized:
            NSLog(@"PHAuthorizationStatusAuthorized");
            break;
        case PHAuthorizationStatusDenied:
            NSLog(@"PHAuthorizationStatusDenied");
            break;
        case PHAuthorizationStatusNotDetermined:
            NSLog(@"PHAuthorizationStatusNotDetermined");
            break;
        case PHAuthorizationStatusRestricted:
            NSLog(@"PHAuthorizationStatusRestricted");
            break;
    }
}]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-10T01:53:45.413

这是我用来获取图像大小的内容：

```
+ (CGSize) sizeOfImage:(NSString *) fileName withPath: (NSURL *) fullDirectoryPath;
{
    NSURL *imageNameWithPath = [NSURL URLWithString:fileName relativeToURL:fullDirectoryPath];

    CGImageSourceRef source = CGImageSourceCreateWithURL( (CFURLRef) imageNameWithPath, NULL);
    if (!source) return CGSizeZero;

    CFDictionaryRef dictRef = CGImageSourceCopyPropertiesAtIndex(source,0,NULL);
    NSDictionary* metadata = (__bridge NSDictionary *)dictRef;
    NSLog(@"metadata= %@", metadata);
    CGSize result = CGSizeZero;
    CGFloat width = [metadata[@"PixelWidth"] floatValue];
    CGFloat height = [metadata[@"PixelHeight"] floatValue];
    NSLog(@"width= %f, height= %f", width, height);

    // The orientation in the metadata does *not* map to UIImageOrientation. Rather, see: https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGImageProperties_Reference/index.html#//apple_ref/doc/constant_group/Individual_Image_Properties
    // This idea of orientation seems a little odd to me, but it seems it translates to even numbers need to be switched in width/height, odd numbers do not.
    NSUInteger orientation = [metadata[@"Orientation"] integerValue];

    switch (orientation) {
        // Comments give "Location of the origin of the image"
        case 1: // Top, left
        case 3: // Bottom, right
        case 5: // Left, top
        case 7: // Right, bottom
            result = CGSizeMake(width, height);
            break;

        case 2: // Top, right
        case 4: // Bottom, left
        case 6: // Right, top
        case 8: // Left, bottom
            result = CGSizeMake(height, width);
            break;

        default:
            NSAssert(NO, @"Should not get to here!");
            break;
    }

    CFRelease(source);
    NSLog(@"size: %@, orientation: %d", NSStringFromCGSize(result), orientation);

    return result;
}

/* Example meta data:
    ColorModel = RGB;
    Depth = 8;
    Orientation = 6;
    PixelHeight = 1936;
    PixelWidth = 2592;
    "{Exif}" =     {
        ColorSpace = 1;
        PixelXDimension = 2592;
        PixelYDimension = 1936;
    };
    "{JFIF}" =     {
        DensityUnit = 0;
        JFIFVersion =         (
                               1,
                               1
                               );
        XDensity = 1;
        YDensity = 1;
    };
    "{TIFF}" =     {
        Orientation = 6;
    };
}
*/ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-28T11:08:15.270

回答我自己的问题。获取 GPS 元数据的内存有效且快速的方法是

```
let options = [kCGImageSourceShouldCache as String: kCFBooleanFalse]
if let data = NSData(contentsOfURL: url), imgSrc = CGImageSourceCreateWithData(data, options) {
    let metadata = CGImageSourceCopyPropertiesAtIndex(imgSrc, 0, options) as Dictionary
    let gpsData = metadata[kCGImagePropertyGPSDictionary] as? [String : AnyObject]
} 
```

第二个选项是

```
if let img = CIImage(contentsOfURL: url), metadata = img.properties(), 
gpsData = metadata[kCGImagePropertyGPSDictionary] as? [String : AnyObject] { … } 
```

它在 Swift 中看起来更好，但使用更多内存（通过 Profiler 测试）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-21T19:32:58.570

这是一个示例代码，可以帮助我们读取光圈、快门速度、曝光补​​偿、ISO、镜头、焦距等并将其转换为字典格式。
考虑单个类的所有以下功能

```
guard let imageSource = CGImageSourceCreateWithURL(fileURL as CFURL, nil),
      let metadata = CGImageSourceCopyMetadataAtIndex(imageSource, 0, nil),
      let tags = CGImageMetadataCopyTags(metadata),
      let imageInfo = self.readMetadataTagArr(tagArr: tags) else { return } 
```

然后有一些帮助函数实际上完成了将数据提取/转换为字典格式的所有工作。

```
 /// Reads the Arrays of tags and convert them into a dictionary of [String: Any]
private static func readMetadataTagArr(tagArr: CFArray) -> [String: Any]? {
    var result = [String: Any]()
    for (_, tag) in (tagArr as NSArray).enumerated() {
        let tagMetadata = tag as! CGImageMetadataTag
        if let cfName = CGImageMetadataTagCopyName(tagMetadata) {
            let name = String(cfName)
            result[name] = self.readMetadataTag(metadataTag: tagMetadata)
        }
    }
    return result
}

    /// convert CGImageMetadataTag to a dictionary of [String: Any]
private static func readMetadataTag(metadataTag: CGImageMetadataTag) -> [String: Any] {
    var result = [String: Any]()
    guard let cfName = CGImageMetadataTagCopyName(metadataTag) else { return result }
    let name = String(cfName)
    let value = CGImageMetadataTagCopyValue(metadataTag)

    /// checking the type of `value` object and then performing respective operation on `value`
    if CFGetTypeID(value) == CFStringGetTypeID() {
        let valueStr = String(value as! CFString)
        result[name] = valueStr
    } else if CFGetTypeID(value) == CFDictionaryGetTypeID() {
        let nsDict: NSDictionary = value as! CFDictionary
        result[name] = self.getDictionary(from: nsDict)
    } else if CFGetTypeID(value) == CFArrayGetTypeID() {
        let valueArr: NSArray = value as! CFArray
        for (_, item) in valueArr.enumerated() {
            let tagMetadata = item as! CGImageMetadataTag
            result[name] = self.readMetadataTag(metadataTag: tagMetadata)
        }
    } else {
        // when the data was of some other type
        let descriptionString: CFString = CFCopyDescription(value);
        let str = String(descriptionString)
        result[name] = str
    }
    return result
}

    /// Converting CGImage Metadata dictionary to [String: Any]
private static func getDictionary(from nsDict: NSDictionary) -> [String: Any] {
    var subDictionary = [String: Any]()
    for (key, val) in nsDict {
        guard let key = key as? String else { continue }
        let tempDict: [String: Any] = [key: val]
        if JSONSerialization.isValidJSONObject(tempDict) {
            subDictionary[key] = val
        } else {
            let mData = val as! CGImageMetadataTag
            let tempDict: [String: Any] = [key: self.readMetadataTag(metadataTag: mData)]
            if JSONSerialization.isValidJSONObject(tempDict) {
                subDictionary[key] = tempDict
            }
        }
    }
    return subDictionary
} 
```

这是提取的所有字典键的列表 [![这是提取的所有字典键的列表](../Images/0206183ca8fc199cc756da43169867de.png)](https://i.stack.imgur.com/yHEBR.png)

以下是一些示例字典值，例如 FocalLength、ApertureValue、LensSpecification 等 [![在此处输入图像描述](../Images/fb63abfa0aa97b7dbbe165decf717f3c.png)](https://i.stack.imgur.com/l9m8n.png)

LensModel、ShutterSpeedValue 等 [![细节](../Images/3f741451947625f898cecdf40f48f71b.png)](https://i.stack.imgur.com/TwiZR.png)

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2014-07-15T11:34:40.500

您需要使用资产库来读取图像的 exif 元数据。

```
#import <AssetsLibrary/AssetsLibrary.h> 
```

然后添加以下代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSURL *assetURL = [info objectForKey:UIImagePickerControllerReferenceURL];

    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    __block NSMutableDictionary *imageMetadata = nil;
    [library assetForURL:assetURL
             resultBlock:^(ALAsset *asset)  {
                 NSDictionary *metadata = asset.defaultRepresentation.metadata;
                 imageMetadata = [[NSMutableDictionary alloc] initWithDictionary:metadata];
                 NSLog(@"%@",imageMetadata.description);
             }
            failureBlock:^(NSError *error) {
            }];
} 
```

希望这会有所帮助

# java - Cloudwatch 指标从不返回任何结果

> ID：12478505
> 
> 赞同：1
> 
> 时间：2012-09-18T13:57:03.413
> 
> 标签：java, amazon-web-services, amazon-dynamodb, amazon-cloudwatch

我一直在尝试让一个简单的应用程序运行，它返回一些 cloudwatch 指标。我尝试了 3 个不同的 Web 示例，但没有一个返回任何数据。我可以在 AWS 控制台上看到数据。也许有人可以发现我的错误或指出一个已知有效的简单示例？

我想要实现的原则是：我想知道我们的应用程序何时接近其 dynamoDB 读/写限制，然后增加它们。我假设我需要编写一些线程来轮询询问统计信息，如果它达到容量的 80%，则增加限制。

```
private static void findCloudWatchData() throws InterruptedException {
    AmazonCloudWatchClient cloudWatch = new AmazonCloudWatchClient(new BasicAWSCredentials(key, secret));
    cloudWatch.setEndpoint("monitoring.eu-west-1.amazonaws.com");

    GetMetricStatisticsRequest getMetricStatisticsRequest = new GetMetricStatisticsRequest();

    GregorianCalendar g = new GregorianCalendar(2012, 9, 17, 12, 0);

    getMetricStatisticsRequest.setStartTime(g.getTime());
    g.add(Calendar.DAY_OF_MONTH, 2);
    getMetricStatisticsRequest.setEndTime(g.getTime());

    getMetricStatisticsRequest.setNamespace("AWS/DynamoDB");
    getMetricStatisticsRequest.setMetricName("SuccessfulRequestLatency");
    getMetricStatisticsRequest.setPeriod(5*60);

    Dimension tableDimension = new Dimension();
    tableDimension.setName("TableName");
    tableDimension.setValue("personalisation.user_favourite-int");

    Dimension operationDimension = new Dimension();
    operationDimension.setName("Operation");
    operationDimension.setValue("Query");

    getMetricStatisticsRequest.setDimensions(Arrays.asList(tableDimension, operationDimension));

    Collection<String> statistics = new ArrayList<String>();
    statistics.add("Average");

    getMetricStatisticsRequest.setStatistics(statistics);
    getMetricStatisticsRequest.setUnit(StandardUnit.Count);

    //results
    GetMetricStatisticsResult result = cloudWatch.getMetricStatistics(getMetricStatisticsRequest);
    System.err.println(result.getDatapoints().size());  //this returns 0 always
    for (Datapoint p : result.getDatapoints()) {
        System.out.println(p.getTimestamp() + " " + p.getAverage());
    }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T15:38:39.643

我发现了问题。如果我将“SuccessfulRequestLatency”更改为：

```
 getMetricStatisticsRequest.setMetricName("ConsumedWriteCapacityUnits"); 
```

或 getMetricStatisticsRequest.setMetricName("ConsumedReadCapacityUnits");

并像这样设置日期：

```
 now.add(Calendar.MINUTE, -5);
    getMetricStatisticsRequest.setEndTime(now.getTime());
    now.add(Calendar.DAY_OF_MONTH, -1);
    getMetricStatisticsRequest.setStartTime(now.getTime()); 
```

它开始返回数据。令人尴尬的是，我错误地使用了日期范围，并假设月份 = 9 是九月，而实际上月份 = 8 是九月。Dynamo 不会抛出任何无效范围异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:54:16.857

我在评论中建议，您可以依赖 CloudWatch 警报。它将避免您运行自己的监控工具的痛苦。

您可以将“[操作](http://docs.amazonwebservices.com/AmazonCloudWatch/latest/DeveloperGuide/CHAP_Glossary.html#glossary_action)”附加到警报。其中一项行动是`SNS topic`。`SNS`进而可用于触发 HTTP(S) 调用、发送 JSON、feed `SQS`......

这可能需要更多的设置工作，但我相信它会更容易维护。顺便说一句，您将轻松适应免费层。

# asp.net - Asp.net 事件代码 3003

> ID：12478507
> 
> 赞同：1
> 
> 时间：2012-09-18T13:57:10.980
> 
> 标签：asp.net

我的事件日志中有数千条代码 3003 条目，上面写着“发生了验证错误。”。我正在正确处理服务器端的验证，并且在 global.asax 中捕获了错误，并向用户显示了正确的消息。我不想通过 javascript 添加代码来处理客户端的字符或打开 ValidateRequest=false 我关心的只是事件日志条目，有什么方法可以阻止 asp.net 不在事件日志中记录事件 3003 ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:00:38.180

只需添加：

```
<pages validateRequest="false" enableEventValidation="false"/> 
```

到您的 web.config 以将其应用于整个站点。

**编辑：**

进入 System.web 部分。

# .htaccess - CakePHP 将 .php 重定向到控制器

> ID：12478508
> 
> 赞同：0
> 
> 时间：2012-09-18T13:57:11.293
> 
> 标签：.htaccess, cakephp, mod-rewrite

我的旧网站 URL 结构是这样的：

```
http://www.example.com/index.php?go=archives&data=lastweek 
```

今天，我迁移到 CakePHP，所以那个 URL 不起作用。所以我想将它重定向到这个 URL：

```
http://www.example.com/archives/find?data=lastweek 
```

（我不想将查询字符串更改为操作参数，出于某种原因，我应该将其保留为查询字符串。）

我应该怎么办？（编辑哪个`.htaccess`文件？CakePHP 有 3 个文件！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:19:33.880

在文档根目录的 htaccess 文件中（最好在可能已经存在的任何规则之上），添加以下内容：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^go=archives&data=([^&]+)
RewriteRule ^/?index.php$ /archives/find/?data=%1 [L,R=301] 
```

这应该 301 重定向`/index.php?go=archives&data=anything`到`/archives/find?data=anything`.

# c# - Google Admin Audit api - 如何在 C# 中获取 CustomerID

> ID：12478509
> 
> 赞同：3
> 
> 时间：2012-09-18T13:57:16.990
> 
> 标签：c#, google-admin-audit-api

我是 Google API 和基于 Web 的编程的新手，所以请原谅我的普遍无知。我正在尝试使用 Google Admin Audit API，但没有找到一个示例，说明如何进行调用以获取 ClientID 以便能够进行需要 CustomerID 的 Google API 调用之一——比如管理员审计。我已经运行了其他简单的示例，例如检索任务列表等，但问题是这些类型的调用不需要您使用客户 ID。

根据其他 Google API 示例以及审核所需的 Google.Apis.Audit.v1，我拥有所有权利。我在我的管理控制台中启用了供应 API，并在 API 控制台中创建了一个新的基于客户端的项目，并且还为该项目启用了审核 API 服务。

这通常是我正在做的事情：

```
 public IAuthenticator GetServiceInterface()
   {
      ClientProvider = new NativeApplicationClient(GoogleAuthenticationServer.Description);
      ClientProvider.ClientIdentifier = "MY_CLIENT_ID";
      ClientProvider.ClientSecret = "MY_CLIENT_SECRET";
      IAuthenticator IAuth = new OAuth2Authenticator<NativeApplicationClient>(ClientProvider, GetAuthorization);
      return IAuth;

   }

   private IAuthorizationState GetAuthorization(NativeApplicationClient client)
   {
      string[] ScopeList = new string[2] { "https://apps-apis.google.com/a/feeds/policies/", "https://www.googleapis.com/auth/apps/reporting/audit.readonly" };
      IAuthorizationState IAuthState = new AuthorizationState(ScopeList);
      IAuthState = AuthorizationMgr.RequestNativeAuthorization(client, ScopeList);
      return IAuthState;

   }

   public void GoogleAuditTest()
   {
      //Get a Audit Service Interface
      AuditService AuService = new AuditService( GetServiceInterface() );

      ????????????????????????????
      ...How do I get the CustomerID required by the audit service calls to list activities, etc

   } 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T17:21:50.957

有一种简单的方法可以通过 API 的资源管理器获取 customerId（无需编码）。

1.  登录域
2.  转到： [https ://developers.google.com/apis-explorer/#s/reports/v1/reports.customerUsageReports.get?date=2013-05-18&_h=1&](https://developers.google.com/apis-explorer/#s/reports/v1/reports.customerUsageReports.get?date=2013-05-18&_h=1&)
3.  授权 OAuth
4.  运行报告时，您会在响应中看到 customerId。

# java - 如何在java中使用NSApplication和NSWindow来访问在mac中打开的窗口及其内容？

> ID：12478510
> 
> 赞同：1
> 
> 时间：2012-09-18T13:57:17.180
> 
> 标签：java, eclipse, cocoa

我是一名 Java 程序员，这种情况要求我在我的 Java 代码中使用 Objective C 或 Applescripts。如何在 java 中使用 Objective C 或 Applescripts？任何库/罐子？我尝试了“rococoa”库，但它似乎没有 NSApplication 和 NSWindow 。我正在使用 Eclipse IDE。

基本上，我想访问在 mac 中打开的窗口及其内容。

如果有的话，请分享图书馆/罐子。以及如何使用它们的片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:33:50.347

使用该`osascript`命令执行任何 AppleScript，例如：

```
osascript -e 'tell application "Firefox" to quit' 
```

# wpf - 在 WPF 中使用 MonoGame

> ID：12478511
> 
> 赞同：6
> 
> 时间：2012-09-18T13:57:23.337
> 
> 标签：wpf, xaml, xna, windows-runtime, monogame

我可以在 WPF 应用程序中将 MonoGame 与 XAML 混合使用吗？例如：游戏的核心是用 MonoGame 编写的，但 UI 是用 XAML 编写的并放置在 MonoGame-Canvas 之上。我知道我可以[在 WinRT 的 MonoGame 上使用 XAML](http://gamedevresources.blogspot.com/2012/08/using-xaml-on-monogame-for-winrt-part-2.html)。我可以在 WPF 中做同样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T03:47:09.477

您应该阅读 Nick Gravelyn 的博客文章：http: [//blogs.msdn.com/b/nicgrave/archive/2010/07/25/rendering-with-xna-framework-4-0-inside-of-a-wpf-应用程序.aspx](http://blogs.msdn.com/b/nicgrave/archive/2010/07/25/rendering-with-xna-framework-4-0-inside-of-a-wpf-application.aspx)

这也应该适用于 MonoGame，除了最后一部分使用内容构建管道，因为 MonoGame 还没有自己的内容构建管道实现。

您可以在这里找到一些示例：[https ://github.com/CartBlanche/MonoGame-Samples](https://github.com/CartBlanche/MonoGame-Samples)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T21:57:11.930

MonoGame 3.2 现在支持 WPF/DirectX 互操作。[http://www.monogame.net/2014/04/07/monogame-3-2/](http://www.monogame.net/2014/04/07/monogame-3-2/)

# c# - 如何在 ShareDenyWrite 模式下打开 StreamReader？

> ID：12478512
> 
> 赞同：6
> 
> 时间：2012-09-18T13:57:23.430
> 
> 标签：c#, streamreader, sharing, fileshare, textreader

我如何打开一个[`StreamReader`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx), [`FILE_SHARE_READ`, `FILE_SHARE_WRITE`？`FILE_SHARE_DELETE`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)

* * *

## 同样的问题，稍微扩大

我如何打开一个`StreamReader`，以便我可以读取编码的文本文件，并使用共享选项，以便另一个进程可以读取该文件？

我如何打开一个`StreamReader`以便我可以读取编码的文本文件，并带有共享选项，以便另一个进程可以在我读取文件时修改它？

我如何打开一个`StreamReader`以便我可以读取编码的文本文件，并带有共享选项，以便另一个进程可以在我读取文件时删除它？

* * *

## 同样的问题，稍微扩大一点

在 .NET Framework 类库中有一个名为`StreamReader`. 它是唯一设计用于阅读**“文本”**的类，这就是它源自抽象基`TextReader`类的原因。`TextReader/StreamReader`允许您指定您尝试打开的文件使用的编码，并可以为您解码文件，返回文本`Strings`。

一旦我打开了一个文件`StreamReader`：

```
var sr = new StreamReader(path); 
```

该文件被锁定，其他进程无法*修改*或*删除*该文件。我需要的是相当于一个[`FileStream`](http://msdn.microsoft.com/en-us/library/5h0z48dh.aspx)类的[`FileShare`](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)枚举：

*   **无**：拒绝共享当前文件。任何打开文件的请求（通过这个进程或另一个进程）都会失败，直到文件被关闭。
*   **Read** "：允许后续打开文件进行读取。如果未指定此标志，则任何打开文件进行读取的请求（由此进程或其他进程）将失败，直到文件关闭。但是，即使此标志为指定时，可能仍需要其他权限才能访问该文件。
*   **写入**：允许随后打开文件进行写入。如果未指定此标志，则任何打开文件进行写入的请求（由该进程或另一个进程）将失败，直到文件关闭。但是，即使指定了此标志，仍可能需要其他权限才能访问该文件。
*   **ReadWrite**：允许随后打开文件以进行读取或写入。如果未指定此标志，则任何打开文件进行读取或写入的请求（由该进程或其他进程）都将失败，直到文件关闭。但是，即使指定了此标志，仍可能需要其他权限才能访问该文件。
*   **删除**：允许随后删除文件。

除了，出于显而易见的原因，我不能使用`FileStream`- 必须使用 a `StreamReader`。

我怎样才能打开`StreamReader`一个`FileShare.ReadWrite | FileShare.Delete`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T14:01:08.273

`StreamReader` [有一个](http://msdn.microsoft.com/en-us/library/yhfzs7at)可以接受流的构造函数。因此，不要使用带有字符串路径的构造函数，而是首先使用所需`FileStream`的选项创建 a，然后将其传递`FileStream`给`StreamReader`构造函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-18T14:01:32.213

> 如何使用 FileShare.ReadWrite 打开 StreamReader | 文件共享。删除？

当您解决了 Stream 的问题后，Reader 很容易：

```
var fs = new FileStream(fileName, FileMode.Open, FileShare.ReadWrite|FileShare.Delete);
var sr = new StreamReader(fs); 
```

当然，这应该被包裹在一个`using() { }`块中。

# excel - VBA 下标超出范围 - 错误 9

> ID：12478514
> 
> 赞同：9
> 
> 时间：2012-09-18T13:57:28.803
> 
> 标签：excel, vba

有人可以帮我处理这段代码吗，我得到一个*下标超出范围的*错误：

![在此处输入图像描述](../Images/22e2f1c0ecb976ff9eae3673b65cf0a3.png)

'创建工作表后的行在调试器中以黄色突出显示

```
'Validation of year
 If TextBox_Year.Value = Format(TextBox_Year.Value, "0000") Then

 'Creating Process
'Creation of new sheet
Workbooks.Add
ActiveWorkbook.SaveAs FileName:= _
    "" & Workbooks("Temperature Charts Sheet Creator").Sheets("MENU").Cells(4, 12).Value & "Data Sheet - " & ComboBox_Month.Value & " " & TextBox_Year.Value & ".xls", FileFormat _
    :=xlNormal, Password:="", WriteResPassword:="", ReadOnlyRecommended:= _
    False, CreateBackup:=False

'Creating of the sheets
Windows("Data Sheet - " & ComboBox_Month.Value & " " & TextBox_Year.Value & ".xls").Activate

    Sheets("Sheet3").Select
    Sheets("Sheet3").Name = "31 " & ComboBox_Month.Value
    Sheets("Sheet2").Select
    Sheets("Sheet2").Name = "30 " & ComboBox_Month.Value
    Sheets("Sheet1").Select
    Sheets("Sheet1").Name = "29 " & ComboBox_Month.Value

For i = 28 To 1 Step -1

    Sheets.Add
    ActiveSheet.Name = i & " " & ComboBox_Month.Value

Next 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T01:57:42.450

建议进行以下简化：从后面捕获返回值`Workbooks.Add`而不是下标`Windows()`，如下：

```
Set wkb = Workbooks.Add
wkb.SaveAs ...

wkb.Activate ' instead of Windows(expression).Activate 
```

*一般哲学建议：*

避免使用 Excel 的内置插件：ActiveWorkbook、ActiveSheet 和 Selection：捕获返回值，并且更倾向于使用限定表达式。

仅在最外层的宏（subs）中使用内置函数并在宏开始时捕获，例如

```
Set wkb = ActiveWorkbook
Set wks = ActiveSheet
Set sel = Selection 
```

during 和 within 宏不依赖这些内置名称，而是捕获返回值，例如

```
Set wkb = Workbooks.Add 'instead of Workbooks.Add without return value capture
wkb.Activate 'instead of Activeworkbook.Activate 
```

另外，尝试使用限定表达式，例如

```
wkb.Sheets("Sheet3").Name = "foo" ' instead of Sheets("Sheet3").Name = "foo" 
```

或者

```
Set newWks = wkb.Sheets.Add
newWks.Name = "bar" 'instead of ActiveSheet.Name = "bar" 
```

使用限定表达式，例如

```
newWks.Name = "bar" 'instead of `xyz.Select` followed by Selection.Name = "bar" 
```

这些方法通常会更好地工作，产生更少令人困惑的结果，在重构时会更健壮（例如在方法内和方法之间移动代码行），并且会在不同版本的 Excel 中更好地工作。例如，在从一个 Excel 版本到另一个版本的宏执行期间，选择会发生不同的变化。

**`.Activate`另请注意，您可能会发现在使用更多限定表达式时几乎不需要那么多。（这可能意味着对于用户来说屏幕闪烁会减少。）因此整行`Windows(expression).Activate`可以简单地被消除而不是被替换`wkb.Activate`。**

（另请注意：我认为您显示的 .Select 语句没有贡献，可以省略。）

（我认为 Excel 的宏记录器负责推广这种使用 ActiveSheet、ActiveWorkbook、Selection 和 Select 的更脆弱的编程风格；这种风格留有很大的改进空间。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T14:16:36.407

当您尝试引用无效集合的索引时，会发生下标超出范围错误。

最有可能的是，Windows 中的索引实际上并不包含 .xls。窗口索引应与 Excel 标题栏中显示的工作簿名称相同。

作为猜测，我会尝试使用这个：

```
Windows("Data Sheet - " & ComboBox_Month.Value & " " & TextBox_Year.Value).Activate 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-18T05:54:31.013

```
Option Explicit

Private Sub CommandButton1_Click()
Dim mode As String
Dim RecordId As Integer
Dim Resultid As Integer
Dim sourcewb As Workbook
Dim targetwb As Workbook
Dim SourceRowCount As Long
Dim TargetRowCount As Long
Dim SrceFile As String
Dim TrgtFile As String
Dim TitleId As Integer
Dim TestPassCount As Integer
Dim TestFailCount As Integer
Dim myWorkbook1 As Workbook
Dim myWorkbook2 As Workbook

TitleId = 4
Resultid = 0

Dim FileName1, FileName2 As String
Dim Difference As Long

'TestPassCount = 0
'TestFailCount = 0

'Retrieve number of records in the TestData SpreadSheet
Dim TestDataRowCount As Integer
TestDataRowCount = Worksheets("TestData").UsedRange.Rows.Count

If (TestDataRowCount <= 2) Then
  MsgBox "No records to validate.Please provide test data in Test Data SpreadSheet"
Else
  For RecordId = 3 To TestDataRowCount
    RefreshResultSheet

    'Source File row count
    SrceFile = Worksheets("TestData").Range("D" & RecordId).Value
    Set sourcewb = Workbooks.Open(SrceFile)
    With sourcewb.Worksheets(1)
      SourceRowCount = .Cells(.Rows.Count, "A").End(xlUp).row
      sourcewb.Close
    End With

    'Target File row count
    TrgtFile = Worksheets("TestData").Range("E" & RecordId).Value
    Set targetwb = Workbooks.Open(TrgtFile)
    With targetwb.Worksheets(1)
      TargetRowCount = .Cells(.Rows.Count, "A").End(xlUp).row
      targetwb.Close
    End With

    ' Set Row Count Result Test data value
    TitleId = TitleId + 3
    Worksheets("Result").Range("A" & TitleId).Value = Worksheets("TestData").Range("A" & RecordId).Value

    'Compare Source and Target Row count
    Resultid = TitleId + 1
    Worksheets("Result").Range("A" & Resultid).Value = "Source and Target record Count"
    If (SourceRowCount = TargetRowCount) Then
       Worksheets("Result").Range("B" & Resultid).Value = "Passed"
       Worksheets("Result").Range("C" & Resultid).Value = "Source Row Count: " & SourceRowCount & " & " & " Target Row Count: " & TargetRowCount
       TestPassCount = TestPassCount + 1
    Else
      Worksheets("Result").Range("B" & Resultid).Value = "Failed"
      Worksheets("Result").Range("C" & Resultid).Value = "Source Row Count: " & SourceRowCount & " & " & " Target Row Count: " & TargetRowCount
      TestFailCount = TestFailCount + 1
    End If

    'For comparison of two files

    FileName1 = Worksheets("TestData").Range("D" & RecordId).Value
    FileName2 = Worksheets("TestData").Range("E" & RecordId).Value

    Set myWorkbook1 = Workbooks.Open(FileName1)
    Set myWorkbook2 = Workbooks.Open(FileName2)

    Difference = Compare2WorkSheets(myWorkbook1.Worksheets("Sheet1"), myWorkbook2.Worksheets("Sheet1"))
    myWorkbook1.Close
    myWorkbook2.Close

    'MsgBox Difference

    'Set Result of data validation in result sheet
    Resultid = Resultid + 1

    Worksheets("Result").Activate
    Worksheets("Result").Range("A" & Resultid).Value = "Data validation of source and target File"

    If Difference > 0 Then
        Worksheets("Result").Range("B" & Resultid).Value = "Failed"
        Worksheets("Result").Range("C" & Resultid).Value = Difference & " cells contains different data!"
        TestFailCount = TestFailCount + 1
    Else
      Worksheets("Result").Range("B" & Resultid).Value = "Passed"
      Worksheets("Result").Range("C" & Resultid).Value = Difference & " cells contains different data!"
      TestPassCount = TestPassCount + 1
    End If

  Next RecordId
End If

UpdateTestExecData TestPassCount, TestFailCount
End Sub

Sub RefreshResultSheet()
  Worksheets("Result").Activate
  Worksheets("Result").Range("B1:B4").Select
  Selection.ClearContents
  Worksheets("Result").Range("D1:D4").Select
  Selection.ClearContents
  Worksheets("Result").Range("B1").Value = Worksheets("Instructions").Range("D3").Value
  Worksheets("Result").Range("B2").Value = Worksheets("Instructions").Range("D4").Value
  Worksheets("Result").Range("B3").Value = Worksheets("Instructions").Range("D6").Value
  Worksheets("Result").Range("B4").Value = Worksheets("Instructions").Range("D5").Value
End Sub

Sub UpdateTestExecData(TestPassCount As Integer, TestFailCount As Integer)
  Worksheets("Result").Range("D1").Value = TestPassCount + TestFailCount
  Worksheets("Result").Range("D2").Value = TestPassCount
  Worksheets("Result").Range("D3").Value = TestFailCount
  Worksheets("Result").Range("D4").Value = ((TestPassCount / (TestPassCount + TestFailCount)))
End Sub 
```

# javascript - 如何识别浏览器标签？

> ID：12478517
> 
> 赞同：3
> 
> 时间：2012-09-18T13:57:32.577
> 
> 标签：javascript, browser, cross-browser

我想使用 JavaScript 识别浏览器选项卡（在我的域上）。我的意思是，如果用户在我的网站上打开多个选项卡并仅在一个页面上提交 Web 表单，我只想通知该页面，即使用户从该页面移动。它应该是最大跨浏览器解决方案。

PS 一种可能的解决方案是使用“window.name”属性，但我不想使用它，因为其他人可以使用它。

PS-2：我发现了另一种可能的解决方案：使用[sessionStorage](http://www.whatwg.org/specs/web-apps/current-work/multipage/webstorage.html)。FF3.5+、Chrome4+、Safari4+、Opera10.5+、IE8+支持。哦哦哦，我需要IE7！！！！

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:01:09.277

我不认为这是可以做到的。打开的每个浏览器选项卡基本上就像一个新的浏览器实例。就像用户打开另一个浏览器一样。一个选项卡在设计上对另一个选项卡一无所知。这是应该的。如果网站开发人员可以将代码添加到他们的页面以“查看”您在浏览器中打开了哪些其他网站，您能想象这会产生什么影响吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:02:06.420

`window.name`是您可以用于此目的的唯一持久数据元素，如您的要求所述。

> 我只想通知这个页面，即使用户从这个页面移动。

这是不可能的。一旦用户离开页面，您就失去了对该选项卡的控制。您不能推送到页面，它需要从该页面发出服务器请求，即使它是 ajax 也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:29:25.867

使用会话存储。FF3.5+、Chrome4+、Safari4+、Opera10.5+、IE8+支持。

For IE7 using "window.name" property.

# c# - 在 Oracle / SqlServer 和 SqlLite 上进行数据库迁移的解决方案

> ID：12478519
> 
> 赞同：3
> 
> 时间：2012-09-18T13:57:39.057
> 
> 标签：c#, sql-server, oracle, sqlite, database-versioning

我正在寻找一种可以在 TFS 内进行数据库迁移和版本控制的工具（最好是开源的），并且能够在部署/构建期间自动部署它。

### 背景

我们开发了一个经常更新的应用程序，有时会更改数据库，有时不会更改。该数据库在 Oracle 11g 上运行，还有一个 Sqlite 数据库可以运行测试。我们将 NHibernate 与 Fluent-NHibernate 结合使用作为 ORM（Fluent-NHibernate 用于映射）。

### 现在的情况

此时数据库更改是手动完成的。更改用于创建数据库的流畅映射并编写 SQL 脚本来更改/删除/创建我们需要的任何内容。要进入测试/验收/生产，我们针对不同的配置进行构建，然后将内容复制到特定服务器并在数据库上运行特定的 SQL 脚本。

### 缺点

NHibernate 的 schemaupdate 不允许破坏性更新，因此如果我们正在寻找 NHibernate 解决方案，则必须手动完成。

### 首选情况

[以上是一个可行的解决方案，但现在我们需要对这些更改进行版本化，以便我们可以在使用Expand/Contract](http://exortech.com/blog/2009/02/01/weekly-release-blog-11-zero-downtime-database-deployment/)部署新版本时向上/回滚（如果需要）。当我们将新版本部署到数据库时，最好自动完成。

### 问题

1.  是否有使用 Expand 和 Contract 生成架构的迁移工具
2.  它是否适用于 Oracle 11g、SqlLite 和 SqlServer
3.  可以继续使用 NHibernate / Fluent-NHibernate
4.  自动部署特定构建的好方法（不是必须的，有足够的工具来做到这一点，但也许有一些可以做所有事情的好方法）

### 被调查

*   [圆屋E](https://code.google.com/p/roundhouse/)
    *   没有回滚。
    *   无法让它与我们的映射一起使用。
*   [FluentMigrator](https://github.com/schambers/fluentmigrator)
    *   不能与 NHibernate 映射结合使用它自己的 Fluent 接口。
*   [适用于 Oracle 的 Red-Gate 部署套件](http://www.red-gate.com/products/oracle-development/)
    *   工具不能轻易地与我们的环境集成。

我希望这很清楚，如果不能随意发表评论

# android-dialogfragment - 如何设置DialogFragment的宽高？

> ID：12478520
> 
> 赞同：208
> 
> 时间：2012-09-18T13:57:40.903
> 
> 标签：android-dialogfragment, android-dialog

假设我`DialogFragment`在一个名为的 xml 布局文件中指定了 my 的布局，并将其根视图的值和值`my_dialog_fragment.xml`指定为固定值（例如）。然后我在我的方法中膨胀这个布局，如下所示：`layout_width``layout_height``100dp``DialogFragment``onCreateView(...)`

```
View view = inflater.inflate(R.layout.my_dialog_fragment, container, false); 
```

可悲的是，我发现当我`DialogFragment`出现时，它不尊重其 xml 布局文件中指定的`layout_width`和`layout_height`值，因此它会根据其内容缩小或扩展。任何人都知道我是否或如何让我`DialogFragment`尊重其 xml 布局文件中指定的`layout_width`和`layout_height`值？目前，我必须`Dialog`在 my`DialogFragment`的`onResume()`方法中指定 another 的宽度和高度，如下所示：

```
getDialog().getWindow().setLayout(width, height); 
```

这样做的问题是我必须记住对两个地方的宽度和高度进行任何未来的更改。

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2012-10-16T21:35:27.673

如果您直接从资源值转换：

```
int width = getResources().getDimensionPixelSize(R.dimen.popup_width);
int height = getResources().getDimensionPixelSize(R.dimen.popup_height);        
getDialog().getWindow().setLayout(width, height); 
```

然后在对话框的布局中指定 match_parent：

```
android:layout_width="match_parent"
android:layout_height="match_parent" 
```

你只需要担心一个地方（把它放在你的`DialogFragment#onResume`）。它并不完美，但至少它适用于将 RelativeLayout 作为对话框布局文件的根。

* * *

## 回答 #2

> 赞同：167
> 
> 时间：2014-06-13T21:18:09.260

我最终覆盖`Fragment.onResume()`并从底层对话框中获取属性，然后在那里设置宽度/高度参数。我将最外面的布局高度/宽度设置为`match_parent`. 请注意，此代码似乎也尊重我在 xml 布局中定义的边距。

```
@Override
public void onResume() {
    super.onResume();
    ViewGroup.LayoutParams params = getDialog().getWindow().getAttributes();
    params.width = LayoutParams.MATCH_PARENT;
    params.height = LayoutParams.MATCH_PARENT;
    getDialog().getWindow().setAttributes((android.view.WindowManager.LayoutParams) params);
} 
```

* * *

## 回答 #3

> 赞同：108
> 
> 时间：2012-10-09T17:40:10.157

我有一个固定大小的 DialogFragment 在 XML 主布局中定义以下内容（在我的例子中是 LinearLayout）：

```
android:layout_width="match_parent"
android:layout_height="match_parent"
android:minWidth="1000dp"
android:minHeight="450dp" 
```

* * *

## 回答 #4

> 赞同：95
> 
> 时间：2017-01-05T21:53:13.320

**2021 年更新**

对于 Kotlin 用户，我制作了几个简单的扩展方法，可以将您的宽度设置为`DialogFragment`屏幕宽度的百分比或接近全屏：

```
/**
 * Call this method (in onActivityCreated or later) to set 
 * the width of the dialog to a percentage of the current 
 * screen width.
 */
fun DialogFragment.setWidthPercent(percentage: Int) {
    val percent = percentage.toFloat() / 100
    val dm = Resources.getSystem().displayMetrics
    val rect = dm.run { Rect(0, 0, widthPixels, heightPixels) }
    val percentWidth = rect.width() * percent
    dialog?.window?.setLayout(percentWidth.toInt(), ViewGroup.LayoutParams.WRAP_CONTENT)
}

/**
 * Call this method (in onActivityCreated or later) 
 * to make the dialog near-full screen.
 */
fun DialogFragment.setFullScreen() {
    dialog?.window?.setLayout(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT)
} 
```

然后在你的`DialogFragment`in 或 after `onActivityCreated`：

```
override fun onActivityCreated(savedInstanceState: Bundle?) {
    super.onActivityCreated(savedInstanceState)
    setWidthPercent(85)
} 
```

为后代考虑这个答案的其余部分。

## 问题 #13：`DialogFragment`布局

真是让人有点心塞。

创建 时`DialogFragment`，您可以选择覆盖`onCreateView`（传递 a`ViewGroup`以将您的 .xml 布局附加到）或`onCreateDialog`不覆盖。

> 但是，您不能覆盖这两种方法，因为您很可能会混淆 Android 何时或是否您的对话框的布局被夸大了！怎么回事？

选择是否覆盖`OnCreateView`或`OnCreateDialog`取决于您打算如何使用该对话框。

*   如果您打算让`DialogFragment`控制自己内部的渲染`Dialog`，那么您应该重写`OnCreateView`。
*   如果您打算手动控制`DialogFragment`'s 的`Dialog`呈现方式，则应覆盖`OnCreateDialog`.

这可能是世界上最糟糕的事情。

## `onCreateDialog`疯狂

因此，您在`onCreateDialog`创建`DialogFragment`自定义实例`AlertDialog`以在窗口中显示时重写。凉爽的。但请记住，`onCreateDialog`不会收到`ViewGroup`将您的自定义 .xml 布局附加*到*. 没问题，您只需传递`null`给该`inflate`方法。

让疯狂开始吧。

当您覆盖时`onCreateDialog`，Android会**完全忽略**您膨胀的 .xml 布局的根节点的几个属性。这包括但可能不限于：

*   `background_color`
*   `layout_gravity`
*   `layout_width`
*   `layout_height`

> 这几乎是可笑的，因为您需要设置每个 .xml 布局的`layout_width`和`layout_height`，否则 Android Studio 会给您一个漂亮的红色小徽章。

光是这个*词* `DialogFragment`就让我想吐。我可以写一部充满 Android 陷阱和混乱的小说，但这是一部最深入人心的小说。

为了恢复理智，首先，我们声明一种恢复 JUST 的样式`background_color`，`layout_gravity`我们期望：

```
<style name="MyAlertDialog" parent="Theme.AppCompat.Dialog">
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:layout_gravity">center</item>
</style> 
```

上面的样式继承自 Dialogs 的基本主题（在`AppCompat`本例中的主题中）。

接下来，我们以编程方式*应用*样式来放回 Android 刚刚抛弃的值并恢复标准`AlertDialog`外观：

```
public class MyDialog extends DialogFragment {
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        View layout = getActivity().getLayoutInflater().inflate(R.layout.my_dialog_layout, null, false);
        assert layout != null;
        //build the alert dialog child of this fragment
        AlertDialog.Builder b = new AlertDialog.Builder(getActivity());
        //restore the background_color and layout_gravity that Android strips
        b.getContext().getTheme().applyStyle(R.style.MyAlertDialog, true);
        b.setView(layout);
        return b.create();
    }
} 
```

上面的代码会让你`AlertDialog`看起来又像一个`AlertDialog`。也许这已经足够好了。

## 但是等等，还有更多！

如果您希望设置一个**SPECIFIC** `layout_width`或在它显示时`layout_height`为您设置`AlertDialog`（很可能），那么猜猜看，您还没有完成！

当您意识到如果您尝试设置特定的`layout_width`或`layout_height`您喜欢的新样式时，欢闹仍在继续，Android 也会完全忽略这一点！：

```
<style name="MyAlertDialog" parent="Theme.AppCompat.Dialog">
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:layout_gravity">center</item>
    <!-- NOPE!!!!! --->
    <item name="android:layout_width">200dp</item>
    <!-- NOPE!!!!! --->
    <item name="android:layout_height">200dp</item>
</style> 
```

要设置特定的窗口宽度或高度，您可以继续使用整个 'nuther 方法并处理`LayoutParams`：

```
@Override
public void onResume() {
    super.onResume();
    Window window = getDialog().getWindow();
    if(window == null) return;
    WindowManager.LayoutParams params = window.getAttributes();
    params.width = 400;
    params.height = 400;
    window.setAttributes(params);
} 
```

> 许多人追随 Android 的坏例子，将其转换`WindowManager.LayoutParams`为更通用的`ViewGroup.LayoutParams`，只是右转并在几行之后再`ViewGroup.LayoutParams`转换回。`WindowManager.LayoutParams`该死的高效Java，除了使代码更难破译之外，没有任何必要的强制转换。

> 旁注：在`LayoutParams`整个 Android SDK 中有 20 次重复——一个极差设计的完美例子。

### 总之

对于`DialogFragment`覆盖的 s `onCreateDialog`：

*   要恢复标准`AlertDialog`外观，请创建设置`background_color`=`transparent`和`layout_gravity`=的样式`center`并将该样式应用到`onCreateDialog`.
*   要设置特定的`layout_width`和/或`layout_height`，请以编程`onResume`方式使用`LayoutParams`
*   为了保持理智，尽量不要考虑 Android SDK。

* * *

## 回答 #5

> 赞同：55
> 
> 时间：2015-04-03T03:59:25.883

控制您`DialogFragment`的宽度和高度的一种方法是确保其对话框尊重您视图的宽度和高度（如果它们的值为`WRAP_CONTENT`.

## 使用`ThemeOverlay.AppCompat.Dialog`

实现此目的的一种简单方法是利用`ThemeOverlay.AppCompat.Dialog`Android 支持库中包含的样式。

**`DialogFragment`与`Dialog`：**

```
@NonNull
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    LayoutInflater inflater = LayoutInflater.from(getContext());
    View view = inflater.inflate(R.layout.dialog_view, null);

    Dialog dialog = new Dialog(getContext(), R.style.ThemeOverlay_AppCompat_Dialog);
    dialog.setContentView(view);
    return dialog;
} 
```

**`DialogFragment`与`AlertDialog`（警告：）`minHeight="48dp"`：**

```
@NonNull
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    LayoutInflater inflater = LayoutInflater.from(getContext());
    View view = inflater.inflate(R.layout.dialog_view, null);

    AlertDialog.Builder builder = new AlertDialog.Builder(getContext(), R.style.ThemeOverlay_AppCompat_Dialog);
    builder.setView(view);
    return builder.create();
} 
```

* * *

您还可以`ThemeOverlay.AppCompat.Dialog`在创建对话框时将其设置为默认主题，方法是将其添加到应用程序的 xml 主题中。
*小心，因为许多对话框确实需要默认的最小宽度才能看起来不错。*

```
<!-- Base application theme. -->
<style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
    <!-- For Android Dialog. -->
    <item name="android:dialogTheme">@style/ThemeOverlay.AppCompat.Dialog</item>

    <!-- For Android AlertDialog. -->
    <item name="android:alertDialogTheme">@style/ThemeOverlay.AppCompat.Dialog</item>

    <!-- For AppCompat AlertDialog. -->
    <item name="alertDialogTheme">@style/ThemeOverlay.AppCompat.Dialog</item>

    <!-- Other attributes. -->
</style> 
```

**`DialogFragment`与`Dialog`, 利用`android:dialogTheme`:**

```
@NonNull
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    LayoutInflater inflater = LayoutInflater.from(getContext());
    View view = inflater.inflate(R.layout.dialog_view, null);

    Dialog dialog = new Dialog(getContext());
    dialog.setContentView(view);
    return dialog;
} 
```

**`DialogFragment`with `AlertDialog`, 使用`android:alertDialogTheme`or `alertDialogTheme`(警告: `minHeight="48dp"`):**

```
@NonNull
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    LayoutInflater inflater = LayoutInflater.from(getContext());
    View view = inflater.inflate(R.layout.dialog_view, null);

    AlertDialog.Builder builder = new AlertDialog.Builder(getContext());
    builder.setView(view);
    return builder.create();
} 
```

* * *

## 奖金

在较旧的 Android API 上，`Dialog`s 似乎有一些宽度问题，因为它们的标题（即使你没有设置）。
如果您不想使用`ThemeOverlay.AppCompat.Dialog`样式并且`Dialog`不需要标题（或有自定义标题），则可能需要禁用它：

```
@NonNull
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    LayoutInflater inflater = LayoutInflater.from(getContext());
    View view = inflater.inflate(R.layout.dialog_view, null);

    Dialog dialog = new Dialog(getContext());
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(view);
    return dialog;
} 
```

* * *

## 过时的答案，在大多数情况下不起作用

[我试图让对话框尊重我的布局的宽度和高度，而不以编程方式指定固定大小。]

[我想到了这一点`android:windowMinWidthMinor`，并`android:windowMinWidthMajor`导致了问题。即使它们没有包含在 my `Activity`or的主题中`Dialog`，它们仍然以某种方式应用于`Activity`主题。]

[我想出了三个可能的解决方案。]

[**解决方案 1：**创建自定义对话框主题，并在`DialogFragment`.]

```
<style name="Theme.Material.Light.Dialog.NoMinWidth" parent="android:Theme.Material.Light.Dialog">
    <item name="android:windowMinWidthMinor">0dip</item>
    <item name="android:windowMinWidthMajor">0dip</item>
</style> 
```

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    return new Dialog(getActivity(), R.style.Theme_Material_Light_Dialog_NoMinWidth);
} 
```

[**解决方案 2：**创建一个自定义主题以用于`ContextThemeWrapper`对话框`Context`。如果您不想创建自定义对话框主题（例如，当您想使用由 指定的主题时`android:dialogTheme`），请使用此选项。]

```
<style name="Theme.Window.NoMinWidth" parent="">
    <item name="android:windowMinWidthMinor">0dip</item>
    <item name="android:windowMinWidthMajor">0dip</item>
</style> 
```

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    return new Dialog(new ContextThemeWrapper(getActivity(), R.style.Theme_Window_NoMinWidth), getTheme());
} 
```

[**解决方案 3（使用`AlertDialog`）：**强制执行`android:windowMinWidthMinor`并`android:windowMinWidthMajor`进入`ContextThemeWrapper`由`AlertDialog$Builder`.]

```
<style name="Theme.Window.NoMinWidth" parent="">
    <item name="android:windowMinWidthMinor">0dip</item>
    <item name="android:windowMinWidthMajor">0dip</item>
</style> 
```

```
@Override
public final Dialog onCreateDialog(Bundle savedInstanceState) {
    View view = new View(); // Inflate your view here.
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setView(view);
    // Make sure the dialog width works as WRAP_CONTENT.
    builder.getContext().getTheme().applyStyle(R.style.Theme_Window_NoMinWidth, true);
    return builder.create();
} 
```

* * *

## 回答 #6

> 赞同：51
> 
> 时间：2013-12-03T23:59:05.993

在我的情况下唯一有效的是这里指出的解决方案：http: [//adilatwork.blogspot.mx/2012/11/android-dialogfragment-dialog-sizing.html](http://adilatwork.blogspot.mx/2012/11/android-dialogfragment-dialog-sizing.html)

Adil 博客文章的片段：

```
@Override
public void onStart()
{
  super.onStart();

  // safety check
  if (getDialog() == null)
    return;

  int dialogWidth = ... // specify a value here
  int dialogHeight = ... // specify a value here

  getDialog().getWindow().setLayout(dialogWidth, dialogHeight);

  // ... other stuff you want to do in your onStart() method
} 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2015-09-03T21:43:48.607

当我需要使 DialogFragment 更宽时，我正在设置 minWidth：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:minWidth="320dp"
    ... /> 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2018-09-23T14:56:23.870

我没有看到一个令人信服的理由来覆盖`onResume`或`onStart`设置 inside 的宽度和高度——这些`Window`特定`DialogFragment`的`Dialog`生命周期方法可能会被反复调用，并且由于多窗口切换、背景等原因多次不必要地执行调整大小的代码然后前景化应用程序，依此类推。这种重复的后果是相当微不足道的，但为什么要满足于此呢？

在被覆盖的方法中设置宽度/高度`onActivityCreated()`将是一个改进，因为该方法实际上只在每个`DialogFragment`. 例如：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    Window window = getDialog().getWindow();
    assert window != null;

    WindowManager.LayoutParams layoutParams = window.getAttributes();
    layoutParams.width = ViewGroup.LayoutParams.MATCH_PARENT;
    window.setAttributes(layoutParams);
} 
```

上面我只是将宽度设置为`match_parent`与设备方向无关。如果您希望横向对话框不那么宽，您可以`getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT`事先检查是否。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-11-26T12:57:08.457

最外层布局中的尺寸在对话框中不起作用。您可以添加一个布局，其中在最外层下方设置尺寸。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content">

<LinearLayout
    android:layout_width="xxdp"
    android:layout_height="xxdp"
    android:orientation="vertical">

</LinearLayout> 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2020-06-05T08:32:07.110

在我的情况下，`DialogFragment`占用了完整的活动大小，例如`Fragment`. `DialogFragment`是基于 XML 布局的，而不是`AlertDialog`. 我的错误是将对话框片段添加`FragmentManager`为通常的片段：

```
fragmentManager?.beginTransaction()?.run {
    replace(R.id.container, MyDialogFragment.newInstance(), MyDialogFragment.TAG)
    addToBackStack(MyDialogFragment.TAG)
}?.commitAllowingStateLoss() 
```

相反，我需要`show`对话框片段：

```
val dialogFragment = MyDialogFragment.newInstance()
fragmentManager?.let { dialogFragment.show(it, MyDialogFragment.TAG) } 
```

经过一些编辑（我`ViewPager2`在布局中），对话框片段变得太窄：

[![在此处输入图像描述](../Images/8b63e79c773ef9c191e70afdcdbca6e4.png)](https://i.stack.imgur.com/FOUq8.png)

我使用了[N1hk](https://stackoverflow.com/a/52467320/2914140)的解决方案：

```
override fun onActivityCreated(savedInstanceState: Bundle?) {
    super.onActivityCreated(savedInstanceState)

    dialog?.window?.attributes?.width = ViewGroup.LayoutParams.MATCH_PARENT
    dialog?.window?.attributes?.height = ViewGroup.LayoutParams.MATCH_PARENT
} 
```

现在它已经定义了宽度和高度，而不是完整的活动大小。

我想说一下`onCreateView`和`onCreateDialog`。如果你有一个基于布局的对话框片段，你可以使用这两种方法中的任何一种。

1.  如果你使用`onCreateView`，那么你应该使用`onActivityCreated`来设置宽度。

2.  如果你使用`onCreateDialog`而不是`onCreateView`，你可以在那里设置参数。`onActivityCreated`不需要。

    覆盖有趣的 onCreateDialog(savedInstanceState: Bundle?): Dialog { super.onCreateDialog(savedInstanceState)

    ```
     val view = activity?.layoutInflater?.inflate(R.layout.your_layout, null)

     val dialogBuilder = MaterialAlertDialogBuilder(context!!).apply { // Or AlertDialog.Builder(context!!).apply
         setView(view)
         // setCancelable(false)
     }

     view.text_view.text = "Some text"

     val dialog = dialogBuilder.create()
     // You can access dialog.window here, if needed.

     return dialog 
    ```

    }

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2013-08-23T11:09:43.047

我修复了它设置根元素布局参数。

```
int width = activity.getResources().getDisplayMetrics().widthPixels;
int height = activity.getResources().getDisplayMetrics().heightPixels;
content.setLayoutParams(new LinearLayout.LayoutParams(width, height)); 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2015-07-06T09:43:32.897

这是一种在 xml 中设置 DialogFragment 宽度/高度的方法。只需将您的 viewHierarchy 包装在带有透明背景的 Framelayout 中（任何布局都可以）。

透明背景似乎是一个特殊的标志，因为当您这样做时，它会自动将 frameLayout 的子元素居中在窗口中。您仍然会在片段后面看到全屏变暗，表明您的片段是活动元素。

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/transparent">

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="300dp"
        android:background="@color/background_material_light">

      ..... 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2016-08-23T15:27:52.567

您可以使用百分比作为宽度。

```
<style name="Theme.Holo.Dialog.MinWidth">
<item name="android:windowMinWidthMajor">70%</item> 
```

我在这个例子中使用了 Holo 主题。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2019-10-01T07:30:26.377

这是科特林版本

```
 override fun onResume() {
        super.onResume()

        val params:ViewGroup.LayoutParams = dialog.window.attributes
        params.width = LinearLayout.LayoutParams.MATCH_PARENT
        params.height = LinearLayout.LayoutParams.MATCH_PARENT
        dialog.window.attributes = params as android.view.WindowManager.LayoutParams
    } 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2012-11-13T11:15:46.707

您可以在下面的代码中从 java 设置布局宽度和高度。

```
final AlertDialog alertDialog  = alertDialogBuilder.create();
final WindowManager.LayoutParams WMLP = alertDialog.getWindow().getAttributes();

WMLP.gravity = Gravity.TOP;
WMLP.y = mActionBarHeight;
WMLP.x = getResources().getDimensionPixelSize(R.dimen.unknown_image_width);

alertDialog.getWindow().setAttributes(WMLP);
alertDialog.show(); 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2018-01-21T14:17:46.407

简单而坚实：

```
@Override
    public void onResume() {
        // Sets the height and the width of the DialogFragment
        int width = ConstraintLayout.LayoutParams.MATCH_PARENT;
        int height = ConstraintLayout.LayoutParams.MATCH_PARENT;
        getDialog().getWindow().setLayout(width, height);

        super.onResume();
    } 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2014-01-28T01:04:17.010

我使用 AlertDialog.Builder 创建了对话框，因此我在 OnShowListener 中使用了 Rodrigo 的答案。

```
dialog.setOnShowListener(new OnShowListener() {

            @Override
            public void onShow(DialogInterface dialogInterface) {
                Display display = getWindowManager().getDefaultDisplay();
                DisplayMetrics outMetrics = new DisplayMetrics ();
                display.getMetrics(outMetrics);
                dialog.getWindow().setLayout((int)(312 * outMetrics.density), (int)(436 * outMetrics.density));
            }

        }); 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2015-11-23T19:20:33.000

在 Android 6.0 上工作，遇到了同样的问题。无论自定义视图的 root中的实际设置如何，`AlertDialog`都将默认为主题中的预定义设置。我能够让它正确设置。在没有进一步调查的情况下，似乎调整实际元素的大小并让根环绕它们使其按预期工作。下面是正确设置对话框的加载对话框的 XML 布局。使用[这个库](https://github.com/rahatarmanahmed/CircularProgressView)来制作动画。`width``width``Layout``width``loading_message` `TextView``Layout``width`

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@color/custom_color"
    android:padding="@dimen/custom_dimen">
    <com.github.rahatarmanahmed.cpv.CircularProgressView
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:id="@+id/progress_view"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_centerHorizontal="true"
        app:cpv_color="@color/white"
        app:cpv_animAutostart="true"
        app:cpv_indeterminate="true" />
    <TextView
        android:id="@+id/loading_message"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/progress_view"
        android:layout_centerHorizontal="true"
        android:gravity="center"
        android:textSize="18dp"
        android:layout_marginTop="@dimen/custom_dimen"
        android:textColor="@color/white"
        android:text="@string/custom_string"/>
</RelativeLayout> 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2017-03-17T07:18:02.260

将自定义对话布局的Parent layout设置为**RelativeLayout**，自动获取常用的宽度和高度。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"> 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2015-01-31T14:19:08.067

在我的情况下，它是由`align_parentBottom="true"`给定内部视图引起的`RelativeLayout`。删除了所有 alignParentBottom 并将所有布局更改为垂直 LinearLayouts 并且问题消失了。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2017-06-05T19:37:29.403

早期的解决方案之一几乎奏效了。我尝试了一些稍微不同的东西，它最终对我有用。

（确保您查看他的解决方案）这是他的解决方案..[单击此处](https://i.stack.imgur.com/JbEH3.png) 它工作除了：builder.getContext().getTheme().applyStyle(R.style.Theme_Window_NoMinWidth, true);

我把它改成

```
 @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        // Use the Builder class for convenient dialog construction
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

        // Get layout inflater
        LayoutInflater layoutInflater = getActivity().getLayoutInflater();

        // Set layout by setting view that is returned from inflating the XML layout
        builder.setView(layoutInflater.inflate(R.layout.dialog_window_layout, null));

        AlertDialog dialog = builder.create();

        dialog.getContext().setTheme(R.style.Theme_Window_NoMinWidth); 
```

最后一行是真的有什么不同。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2017-12-01T00:05:52.377

# 这是最简单的解决方案

我发现的最佳解决方案是覆盖`onCreateDialog()`而不是`onCreateView()`. setContentView() 将在充气之前设置正确的窗口尺寸。它消除了在资源文件中存储/设置尺寸、背景颜色、样式等并手动设置它们的需要。

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    Dialog dialog = new Dialog(getActivity());
    dialog.setContentView(R.layout.fragment_dialog);

    Button button = (Button) dialog.findViewById(R.id.dialog_button);
    // ...
    return dialog;
} 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2019-08-07T14:05:11.807

添加到您的`FragmentDialog`：

```
public void onResume() {
    Window window = getDialog().getWindow();
    Point size = new Point();
    Display display = window.getWindowManager().getDefaultDisplay();
    display.getSize(size);
    window.setLayout( (int)(size.x * 0.9), WindowManager.LayoutParams.WRAP_CONTENT );
    window.setGravity( Gravity.CENTER );
    super.onResume();
} 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2020-01-07T06:26:33.143

这将完美地工作。

```
@Override
public void onResume() {
    super.onResume();
    Window window = getDialog().getWindow();
    if(window == null) return;
    WindowManager.LayoutParams params = window.getAttributes();
    params.width = 400;
    params.height = 400;
    window.setAttributes(params);
} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-06-26T01:09:42.183

```
@Override
public void onStart() {
    super.onStart();
    Dialog dialog = getDialog();
    if (dialog != null)
    {
        dialog.getWindow().setLayout(-1, -2);
        dialog.getWindow().getAttributes().windowAnimations = R.style.DialogAnimation;
        Window window = getDialog().getWindow();
        WindowManager.LayoutParams params = window.getAttributes();
        params.dimAmount = 1.0f;
        window.setAttributes(params);
        window.setBackgroundDrawableResource(android.R.color.transparent);
    }
} 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-04-14T07:30:41.007

其他答案都不适合我。我只解决了**创建一种样式**，您可以在其中选择您希望对话框采用**的屏幕百分比：**

```
<style name="RelativeDialog" parent="android:style/Theme.Dialog">
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="windowNoTitle">true</item>
    <item name="windowActionBar">false</item>
    <item name="windowFixedWidthMajor">90%</item>
    <item name="windowFixedWidthMinor">90%</item>
    <item name="android:windowMinWidthMajor">90%</item>
    <item name="android:windowMinWidthMinor">90%</item>
    <item name="android:colorBackgroundCacheHint">@null</item>
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowAnimationStyle">@android:style/Animation</item>
</style> 
```

不仅仅是将此样式设置为对话框，例如：

```
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setStyle(STYLE_NO_TITLE, R.style.RelativeDialog)
} 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-07-16T09:57:59.173

使用**RelativeLayout**作为**DialogFragment的父级**

* * *

## 回答 #28

> 赞同：-4
> 
> 时间：2014-09-24T05:40:59.117

要获得一个几乎覆盖整个屏幕的 Dialog：首先定义一个 ScreenParameter 类

```
public class ScreenParameters
{
    public static int Width;
    public static  int Height;

    public ScreenParameters()
    {
        LayoutParams l = new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT);
        Width= l.width;
        Height = l.height;
    }
} 
```

然后你必须在你的 getDialog.getWindow().setLayout() 方法之前调用 ScreenParamater

```
@Override
public void onResume()
{
    super.onResume();
    ScreenParameters s = new ScreenParameters();
    getDialog().getWindow().setLayout(s.Width , s.Height);
} 
```

# sql - “内连接”和“外连接”是如何得名的？

> ID：12478522
> 
> 赞同：1
> 
> 时间：2012-09-18T13:57:48.360
> 
> 标签：sql

奇怪的问题，但为什么我们称它为`inner`vs. `outer join`？术语`join`,`left`和`right`对我来说很有意义，但`inner`并不`outer`那么明显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:05:28.463

每个查询背后都有关系代数。维恩图提供了对此的快速直观理解。检查此[维基百科链接](http://en.wikipedia.org/wiki/Venn_diagram)

*   这是一个[路口](http://upload.wikimedia.org/wikipedia/commons/9/99/Venn0001.svg)
*   这是一个[工会](http://upload.wikimedia.org/wikipedia/commons/3/30/Venn0111.svg)
*   和[差异](http://upload.wikimedia.org/wikipedia/commons/4/46/Venn0110.svg)

...哎呀...关闭

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:59:51.557

在底层 SQL 是一个关系代数引擎，看看[http://en.wikipedia.org/wiki/Relational_algebra](http://en.wikipedia.org/wiki/Relational_algebra)

# oauth - Google 是否已对其 OAuth2.0 流程进行了更新，从而破坏了多个帐户？

> ID：12478524
> 
> 赞同：5
> 
> 时间：2012-09-18T13:57:55.717
> 
> 标签：oauth

直到上周，当我在 Google 中登录多个帐户并调用 OAuth2.0 流程时，我会看到一个功能强大的丑陋屏幕（看起来像是被丑陋的棍子反复击打）。它将显示一个单选按钮列表，其中包含我登录的所有帐户，您选择一个并继续流程。

本周我现在得到了一个[漂亮的屏幕，但无法正常工作](http://grab.by/g9FI)（不列出帐户，登录按钮只会在我登录的帐户列表中添加一个额外的帐户）我应该指出我登录了 4 个不同的谷歌同时开户。我的应用程序的 OAuth2.0 似乎工作正常，就好像我在 Chrome 中启动一个隐身窗口，或者启动一个新会话并且只有一个帐户登录，我的 OAuth 流程正常继续。

这只是我还是每个人都被它击中了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T20:31:58.393

我们（谷歌）正在回滚新页面，几分钟后它应该会恢复到以前的行为。

你有没有机会让我们知道你登录的那 4 个帐户是什么类型的？萨姆勒？谷歌应用程序？普通的gmail？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T05:19:13.397

我们也正在经历这种情况。希望谷歌的人注意到并尽快解决这个问题！

编辑：澄清一下，我只有在同时登录个人 Google 帐户和 Google 应用程序帐户时才遇到此问题。目前没有测试其他情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T22:10:55.827

仅供参考，我们刚刚推出了新的 UI，因此您可能会开始看到现在可以使用的“漂亮屏幕”。:-) 感谢您的错误报告。

# linux - Linux 中的 /dev/uinput 和 /dev/input 有什么区别？

> ID：12478526
> 
> 赞同：10
> 
> 时间：2012-09-18T13:57:58.147
> 
> 标签：linux

我可以看到 /dev/uinput 和 /dev/input 都存在于我的 Ubuntu 中，它们是相似的。它们可用于检测/模拟键/鼠标/触摸事件。所以我很困惑他们之间有什么区别？谢谢！

**新增：** 是的，我知道 /dev/input 是一个目录，它包含 event0~6，其中一些是 key/mouse/touch 或其他东西。我仍然想知道为什么 uinput 和 input/eventX 一起存在。为什么和有什么区别？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T04:30:48.107

我在这里找到了答案：[http](http://thiemonge.org/getting-started-with-uinput) ://thiemonge.org/getting-started-with-uinput 正如它所说：“ **uinput 是一个 linux 内核模块，它允许从用户空间处理输入子系统。**它可以用来创建和处理来自应用程序的输入设备。**它在 /dev/input 目录中创建一个字符设备。**该设备是一个虚拟接口，它不属于物理设备。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T14:03:13.113

/dev/uinput 可能代表“用户输入”。我的 /dev/input 是一个目录，包含事件捕获器

```
pwadas@vao:~$ ls -al /dev/uinput /dev/input/ | sed -e 's/^/    /g'

crw------T 1 root root 10, 223 wrz 18 07:09 /dev/uinput

/dev/input/:
total 0
drwxr-xr-x  4 root root    460 wrz 18 07:09 .
drwxr-xr-x 14 root root   3660 wrz 18 07:09 ..
drwxr-xr-x  2 root root    120 wrz 18 07:09 by-id
drwxr-xr-x  2 root root    160 wrz 18 07:09 by-path
crw-------  1 root root 13, 64 wrz 18 07:09 event0
crw-------  1 root root 13, 65 wrz 18 07:09 event1
crw-------  1 root root 13, 74 wrz 18 07:09 event10
crw-------  1 root root 13, 75 wrz 18 07:09 event11
crw-------  1 root root 13, 76 wrz 18 07:09 event12
crw-------  1 root root 13, 77 wrz 18 07:09 event13
crw-------  1 root root 13, 78 wrz 18 07:09 event14
crw-------  1 root root 13, 79 wrz 18 07:09 event15
crw-------  1 root root 13, 80 wrz 18 07:09 event16
crw-------  1 root root 13, 66 wrz 18 07:09 event2
crw-------  1 root root 13, 67 wrz 18 07:09 event3
crw-------  1 root root 13, 68 wrz 18 07:09 event4
crw-------  1 root root 13, 69 wrz 18 07:09 event5
crw-------  1 root root 13, 70 wrz 18 07:09 event6
crw-------  1 root root 13, 71 wrz 18 07:09 event7
crw-------  1 root root 13, 72 wrz 18 07:09 event8
crw-------  1 root root 13, 73 wrz 18 07:09 event9
crw-------  1 root root 13, 63 wrz 18 07:09 mice
crw-------  1 root root 13, 32 wrz 18 07:09 mouse0 
```

# javascript - javascript 去混淆 GWT

> ID：12478530
> 
> 赞同：-1
> 
> 时间：2012-09-18T13:58:08.670
> 
> 标签：javascript, gwt, deobfuscation

有没有人知道在这里对 javascript 代码进行去混淆的工具：[https ://adwords.google.com/o/Targeting/deferredjs/E274D5492EC18DBF7224C8750D1F62C6/10.cache.js](https://adwords.google.com/o/Targeting/deferredjs/E274D5492EC18DBF7224C8750D1F62C6/10.cache.js)

（此网址更改，因此我将其发布在[https://raw.github.com/gist/3749896/7a071a60fab01dfb89fb52f804f931ad246977f6/gwt](https://raw.github.com/gist/3749896/7a071a60fab01dfb89fb52f804f931ad246977f6/gwt)）

我尝试了[https://github.com/GDSSecurity/GWT-Penetration-Testing-Toolset](https://github.com/GDSSecurity/GWT-Penetration-Testing-Toolset)中的那个，但它不起作用。

基本上我想知道'AVERAGE_TARGETED_MONTHLY_SEARCHES'是如何被填充的，因为它不是由ajax直接返回的。从页面

[https://adwords.google.com/o/Targeting/Explorer?_ *u=1000000000&* _c=1000000000&ideaRequestType=KEYWORD_IDEAS](https://adwords.google.com/o/Targeting/Explorer?__u=1000000000&__c=1000000000&ideaRequestType=KEYWORD_IDEAS)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:25:04.617

对于 GWT 反混淆，您需要包含经过混淆的方法名称和原始方法名称之间的映射的 symbolMaps 文件。您通常会在项目的 WEB-INF 文件夹中找到它们。您通常不会在公共网站上找到它们。

# iphone - Iphone ad hoc 分发无法正常工作，但完美地将设备连接到 xcode

> ID：12478534
> 
> 赞同：0
> 
> 时间：2012-09-18T13:58:24.123
> 
> 标签：iphone, ios, asihttprequest, ad-hoc-distribution

正如主题所说，我可以在调试模式下在设备上毫无问题地运行我的应用程序，但是当我尝试在测试设备（临时分发）上运行时，有些部分（不是全部）不起作用。

应用程序从服务器下载 json 数据并向用户显示解析后的数据（文本、视频、ecc）。

为了与服务器通信，我在应用程序的每个地方都使用了 ASIFormDataRequest。

有任何想法吗？

谢谢！

一些代码：

```
NSMutableString *url = [[NSMutableString alloc] initWithString:@"http://url"];
NSURL *urlElaborazioneDati = [NSURL URLWithString:url];

__weak __block ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:urlElaborazioneDati]; 
[request setCompletionBlock:^{
    __weak NSString *jsonData = [request responseString];
    NSArray *jsonArray = [jsonData JSONValue];scrollView = [[UIScrollView alloc] init];
    scrollView.frame = CGRectMake(0.0, 70.0, 320.0, 312.0);
    scrollView.backgroundColor = [UIColor colorWithRed:1 green:0.5 blue:0 alpha:0];

    scrollView.contentSize = CGSizeMake(320.0,marginTop*[jsonArray count]);
    [self.listaVideo addSubview:scrollView];

    for (int i=0; i<[jsonArray count]; i++) {
NSString *key = [NSString stringWithFormat:@"%d",i];
        NSArray *elemento = [jsonArray valueForKey:key];

        UIView *item = [[UIView alloc] initWithFrame:CGRectMake(148.0, (marginTop*i), 162.0, 67.0)];
        item.backgroundColor = [UIColor colorWithRed:1 green:0.5 blue:0 alpha:0];
        [scrollView addSubview:item];

        UILabel *titoloVideo = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 162, 20)];
        titoloVideo.backgroundColor = [UIColor colorWithRed:1 green:0.5 blue:0 alpha:0];
        titoloVideo.textColor = [UIColor whiteColor];
        titoloVideo.font = [UIFont boldSystemFontOfSize:17];
        [titoloVideo setText:[elemento valueForKey:@"titolo"]];
        [item addSubview:titoloVideo];

        UITextView *testoVideo = [[UITextView alloc] initWithFrame:CGRectMake(0, 30, 162, 37)];
        testoVideo.backgroundColor = [UIColor colorWithRed:1 green:0.5 blue:0 alpha:0];
        testoVideo.textColor = [UIColor whiteColor];
        testoVideo.font = [UIFont boldSystemFontOfSize:13];
        testoVideo.textAlignment = UITextAlignmentLeft;
        testoVideo.editable = NO;
        [testoVideo setContentInset:UIEdgeInsetsMake(-10, -7, 0, 0)];
        [testoVideo setText:[elemento valueForKey:@"testo"]];
        [item addSubview:testoVideo];

        [self embedYouTube:[elemento valueForKey:@"url"] frame:CGRectMake(10, (marginTop*i), 128, 67)];
}

}];
[request setFailedBlock:^{
    NSError *responseerror = [request error];

    NSString *responseerrorstring = [NSString stringWithFormat:@"%@",responseerror];

    UIAlertView *error = [[UIAlertView alloc] initWithTitle: @"Errore connessione"
                                       message: responseerrorstring
                                      delegate: self
                             cancelButtonTitle: @"Ok"
                             otherButtonTitles: nil];
    [error setTag:1];
    [error show];
}]; 
```

然后在 embedYouTube 中：

```
- (void)embedYouTube:(NSString *)urlString frame:(CGRect)frame {

NSString *embedHTML = @"\
<html><head>\
<meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = %0.0f\"/></head>\
<body style=\"background:#fff;margin-top:0px;margin-left:0px\">\
<div><object width=\"%0.0f\" height=\"%0.0f\">\
<param name=\"movie\" value=\"%@\"></param>\
<embed src=\"%@\"\
type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"%0.0f\" height=\"%0.0f\"></embed>\
</object></div></body></html>";

NSString *html = [NSString stringWithFormat:embedHTML, frame.size.width, frame.size.width, frame.size.height, urlString, urlString, frame.size.width, frame.size.height];
//NSLog(@"%0.0f, %0.0f, %@",frame.size.width, frame.size.height, html);
UIWebView *videoView = [[UIWebView alloc] initWithFrame:frame];
[videoView loadHTMLString:html baseURL:nil];
[scrollView addSubview:videoView]; 
```

}

这是似乎不适用于临时分发的部分之一......

* * *

如果这可以帮助处于相同情况的人，这里是 Apple Developer Technical Support 的回答：

在进行 Ad Hoc 构建时，默认情况下 Xcode 在编译项目时会应用更多优化。有关更多信息，请参阅[https://developer.apple.com/library/ios/qa/qa1764/](https://developer.apple.com/library/ios/qa/qa1764/)。

优化暴露代码中的错误并不少见。通常这是未定义的行为（例如踩踏内存，例如通过将字符串复制到太小而无法容纳它的缓冲区）在代码意外工作之前导致问题；或 ARC 更积极地提前释放对象，这可能会暴露 __unsafe_unretained 崩溃，或导致 __weak 对象更早消失。

你知道你的完成块是否被调用过吗？如果添加 NSLog(@"%s:%d", **func** , **LINE** ); 在您的代码中，您是否看到了您期望的方法？

你知道下载是否开始了吗？请求对象的释放是否比您预期的要快？

要弄清楚出了什么问题，您需要准确地将失败的事情归零。

如果问题仅在通过 iTunes 安装 IPA 时重现，您将需要使用 NSLog() 来跟踪程序流程，并检查变量的实际值，以查看哪些行为不符合您的预期。有关详细信息，请参阅“调试已部署的 iOS 应用程序” [http://developer.apple.com/library/ios/qa/qa1747/](http://developer.apple.com/library/ios/qa/qa1747/)。

您还可以尝试更改构建设置以在进行调试构建时使用与发布构建时相同的优化（通常是“最快、最小 -Os”）。这样您就可以使用调试器，但请注意优化会使其有些不可靠。如有疑问，请使用 NSLog()。

此致，

...

# powershell - 如何在 PowerShell 中执行带有参数的外部程序？

> ID：12478535
> 
> 赞同：14
> 
> 时间：2012-09-18T13:58:24.123
> 
> 标签：powershell

我已经阅读了这个答案[stackoverflow](https://stackoverflow.com/questions/1673967/how-to-run-exe-in-powershell-with-parameters-with-spaces-and-quotes)答案，它让我走到了一半。这是我需要做的。

执行这个命令：

```
"c:\myexe.exe <c:\Users\Me\myanswerfile.txt" 
```

如果我直接从我的 powershell 脚本中运行它

```
&'c:\myexe.exe <c:\Users\Me\myanswerfile.txt' 
```

我收到此错误：

```
The term 'C:\myexe.exe <c:\Users\Me\myanswerfile.txt' is not recognized as the name of
a cmdlet, function, script file, or operable program. Check the spelling of the name,or 
if a path was included, verif that the path is correct and try again. 
```

现在我尝试了几种变体，包括将原始命令放在一个名为 $cmd 的变量中，然后传递

如果我将“<”附加到 $cmd 变量，则该命令将失败，并出现与第一个类似的错误。

我难住了。有什么建议么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-18T14:17:50.227

如果要运行程序，只需键入其名称和参数：

```
notepad.exe C:\devmy\hi.txt 
```

如果您想运行一个 exe 并将标准输入重定向到它，您的示例似乎是一种尝试，请使用：

```
Get-Content c:devmy\hi.txt | yourexe.exe 
```

如果您需要指定程序的完整路径，那么您需要使用 & 和引号，否则 powershell 认为您正在定义一个纯字符串：

```
&"C:\Program Files (x86)\Notepad++\notepad++.exe" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-16T15:34:08.140

只需使用`&`运算符

```
& "Program\path\program.exe" "arg1" "arg2" .... 
```

# python - 如何在 Python 中实现多词名称的拼音算法

> ID：12478537
> 
> 赞同：3
> 
> 时间：2012-09-18T13:58:33.287
> 
> 标签：python, algorithm, phonetics

我读过很多帖子，例如：

*   [Levenshtein 基于距离的方法与 Soundex](https://stackoverflow.com/questions/42013/levenshtein-distance-based-methods-vs-soundex)
*   [轻量级模糊搜索库](https://stackoverflow.com/questions/41970/lightweight-fuzzy-search-library#41975)

我已经通过并找到了[双变位密码](https://github.com/dracos/double-metaphone/blob/master/metaphone.py)。

但是双变音位算法返回一个给定字符串的元组，假设该字符串是一个单词。有谁知道一个语音算法可以处理同名的多个单词？如果不是，最好的主意是简单地编写一个脚本来计算该列中每个单词的字数，然后在我的数据集中最常出现的单元格中的单词上运行双变音？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T07:24:16.563

实际上，变音位或双变音位的设计仅适用于专有名称而不适用于“字典单词”是不正确的。metaphone、double metaphone 和 metaphone 3 都被设计为同时处理名称和单词，并针对包含两者的数据库开发

# ruby-on-rails - 您可以直接从 S3 存储桶创建回形针附件吗？

> ID：12478539
> 
> 赞同：1
> 
> 时间：2012-09-18T13:58:37.593
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

我有一个 Rails 应用程序，它通过公开的 API 与各种语言的一些移动应用程序交互。

移动应用程序必须将视频文件发送到 Rails 应用程序，但文件太大，无法直接发送到 API 以使用 Paperclip 附加。

我将文件直接上传到移动设备上的 S3，然后使用与回形针附件无关的字段将上传文件的 URL 发送到 API。

在 Rails 控制器收到一个包含 upload_url 值的创建或更新请求时，我想在指定位置创建一个带有文件的回形针附件。

我知道我可以通过从 S3 中读取文件并再次将其存储回来来创建回形针附件，但是当起点和终点是 S3 上的同一个存储桶时，这似乎传输了很多不必要的数据。

所以我的问题是，我能否以某种方式使用 S3 gem 将文件移动或重命名为 Paperclip 可以识别的附件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:28:22.530

这取决于您对附件建模的方式（例如 s3 的路径和 url 方案），但在最常见的情况下，您可以简单地创建具有必要属性（包括文件名）的对象，这些属性应该从 upload_url 值派生而来。然后可以访问上传记录，就好像它最初是通过回形针创建的一样。

```
1.9.3p194 :069 > u = Attachment.new
 => #<Attachment id: nil, type: nil, attachable_id: nil, attachable_type: nil, attachment_file_name: nil, attachment_content_type: nil, attachment_file_size: nil, attachment_updated_at: nil, created_at: nil, updated_at: nil> 
1.9.3p194 :070 > u.attachment_file_name = 'fdssfd.txt'
 => "fdssfd.txt" 
1.9.3p194 :071 > u.attachment
 => /system/assets/images/paperclip/development//original/fdssfd.txt 
1.9.3p194 :072 > u.save
   (0.3ms)  BEGIN
  SQL (0.5ms)  INSERT INTO `attachments` (`attachable_id`, `attachable_type`, `attachment_content_type`, `attachment_file_name`, `attachment_file_size`, `attachment_updated_at`, `created_at`, `type`, `updated_at`) VALUES (NULL, NULL, NULL, 'fdssfd.txt', NULL, NULL, '2012-09-18 14:24:26', NULL, '2012-09-18 14:24:26')
[paperclip] Saving attachments.
   (1.4ms)  COMMIT
 => true 
1.9.3p194 :073 > u.attachment
 => /system/assets/images/paperclip/development/5/original/fdssfd.txt 
```

# azure - Azure 服务总线 - 确定活动连接数（主题/队列）

> ID：12478542
> 
> 赞同：2
> 
> 时间：2012-09-18T13:58:47.213
> 
> 标签：azure, servicebus

由于 Azure 服务总线将与队列或主题的最大并发连接数限制为 100，是否有一种方法可以用来查询我们的队列/主题以确定有多少并发连接？

我们知道我们可以捕获限制事件，但更喜欢主动方法，当系统处于高负载时，我们可以主动增加或减少队列/主题的数量。

这里的用例是一个等待回复消息的进程，其中回复来自一个长时间运行的进程，并且订阅使用关联过滤器来促进发布者和订阅者之间的双向通信。因此，我们必须有一个 BeginReceive() 来等待响应，并且每个这样的发布者将在他们的等待时间内消耗一个连接。系统已经在多个主题之间平衡了负载，但是我们需要一种方法来主动了解创建了多少主题，这样我们就不会经常受到限制，但同时也不会为此目的拥有过多的主题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:05:30.807

我认为目前无法查询听众人数。我认为订阅者对象也考虑到了这一点，所以理论上，如果每个主题最多有 2000 个订阅者，并且每个订阅者最多允许 100 个连接，那么就有很多潜在的连接。我们只需要记住，订阅者是合作的（每个人都得到所有消息的副本），订阅者上的接收者是竞争的（只有一个人得到它）。

当您开始运行超过 1,000 个订阅者时，我还看到了未经证实的性能延迟报告，因此请务必测试此场景。

但是...鉴于您的情况，我推断性能时间可能不是最大的因素（您已经有长时间运行的进程）。因此，在工作流程中引入几秒钟的延迟可能并不重要。如果是这种情况，我会将您的 BeginRecieve 的超时设置为相当短的时间（几秒钟），并在尝试之间有一个睡眠/等待延迟。这也为其他听众提供了获取消息的机会。我们可能还想考虑一种方法，尝试接收多条消息，然后将它们分配给其他进程进行处理（在这种情况下是协作？）。

突显一些想法。

# php - 以 Wordpress 用户身份登录 Facebook 用户

> ID：12478544
> 
> 赞同：2
> 
> 时间：2012-09-18T13:58:54.630
> 
> 标签：php, facebook, wordpress

抱歉这个问题的不断更新！从现在开始，我将一个人离开。

我可以通过 Facebook 登录将新用户注册到我的 Wordpress 数据库中。但我很难将用户登录到 Wordpress。

它应该通过 wp_signon( $credentials, $secure_cookie ) 完成，但我无法将 Wordpress 用户登录到 Wordpress。用户仍然需要通过 Wordpress 登录表单。

我得到的错误信息是

```
Warning: Cannot modify header information - headers already sent by (output started at 
.../file shown below.php:36) in ..../wp-includes/pluggable.php on line 680-682 
```

任何帮助都感激不尽！

```
<?php
try{
include_once "src/fbaccess.php";
}catch(Exception $e){
error_log($e);
}
try{
require_once "wp-blog-header.php";
}catch(Exception $e){
error_log($e);
}

try{
require_once "wp-includes/registration.php";
}catch(Exception $e){
error_log($e);
}

try{
require_once "wp-includes/user.php";
}catch(Exception $e){
error_log($e);
}

?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Florian's Facebook login</title>    

</head>
<body>
<!-- Copy the below code to display FB Login/Logout button -->
<?php if ($user): ?>
  <a href="<?php echo $logoutUrl; ?>">Logout</a>
<?php else: ?>
  <div>
  <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
  </div>
<?php endif ?>
<!-- Copy the above code to display FB Login/Logout button -->

<h3>PHP Session</h3>
<pre><?php print_r($_SESSION); ?></pre>

<?php if ($user): ?>
  <h3>You</h3>
  <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">

  <h3>Your User Object (/me)</h3>
   <?php $newusername = $user_profile [first_name]; ?>
<?php $newlastname = $user_profile [last_name]; ?>
   <?php $newemail    = $user_profile [email]; ?>
   <?php $newlocation = $user_profile [location]; ?>

<?php else: ?>
  <strong><em>You are not Connected.</em></strong>
<?php endif ?>

<?php
$newpassword = '1234';

$creds = array();
$creds['user_login'] = $newusername;
$creds['user_password'] = $newpassword;
if ( !empty( $remember ) ){ 
    $creds['remember'] = true;
}

$userWP = wp_signon( $creds, true );

if( is_wp_error( $userWP ) ) {
    echo $user->get_error_message();
}
else {
}
{
// Check that user doesn't already exist
if ( !username_exists($newusername) && !email_exists($newemail) )
{
// Create user and set role to subscriber

$user_id = wp_create_user( $newusername, $newpassword, $newemail);
if ( is_int($user_id) )
{
  $wp_user_object = new WP_User($user_id);
  $wp_user_object->set_role('subscriber');
  echo 'Successfully created new subscriber user.';
 }

else {
   echo 'Error with wp_create_user. No users were created.';
}
}
else {
   echo 'This user or email already exists. Nothing was done.';
}
}

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:38:53.233

如果您的登录失败，您可能需要查看以下内容：

```
if ( is_wp_error($userWP) )
   echo $user->get_error_message(); 
```

wp_signon 可以返回 WP_User 或 WP_Error ，您可以在此处看到[http://core.trac.wordpress.org/browser/tags/3.4.2/wp-includes/user.php#L55](http://core.trac.wordpress.org/browser/tags/3.4.2/wp-includes/user.php#L55)

您可能还想看看[http://codex.wordpress.org/Function_Reference/wp_signon](http://codex.wordpress.org/Function_Reference/wp_signon)

请发布 WP_Error 消息，我们会找到方法 :)

# android - 通过在android中使用soap方法使用Web服务显示条形图时发生空指针异常？

> ID：12478548
> 
> 赞同：0
> 
> 时间：2012-09-18T13:59:06.183
> 
> 标签：android, web-services, bar-chart

谁能告诉我这个 logcat 在说什么。这里我试图通过使用 SOAP 方法使用 Web 服务来显示 android 中的条形图。

**日志猫**

```
09-18 19:13:52.804: D/AndroidRuntime(367): Shutting down VM
09-18 19:13:52.804: W/dalvikvm(367): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
09-18 19:13:52.835: E/AndroidRuntime(367): FATAL EXCEPTION: main
09-18 19:13:52.835: E/AndroidRuntime(367): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.xmlparsing_test/com.example.xmlparsing_test.BarGraphActivity}: java.lang.NullPointerException
09-18 19:13:52.835: E/AndroidRuntime(367):  at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
09-18 19:13:52.835: E/AndroidRuntime(367):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
09-18 19:13:52.835: E/AndroidRuntime(367):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
09-18 19:13:52.835: E/AndroidRuntime(367):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
09-18 19:13:52.835: E/AndroidRuntime(367):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-18 19:13:52.835: E/AndroidRuntime(367):  at android.os.Looper.loop(Looper.java:123)
09-18 19:13:52.835: E/AndroidRuntime(367):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-18 19:13:52.835: E/AndroidRuntime(367):  at java.lang.reflect.Method.invokeNative(Native Method)
09-18 19:13:52.835: E/AndroidRuntime(367):  at java.lang.reflect.Method.invoke(Method.java:521)
09-18 19:13:52.835: E/AndroidRuntime(367):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-18 19:13:52.835: E/AndroidRuntime(367):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-18 19:13:52.835: E/AndroidRuntime(367):  at dalvik.system.NativeStart.main(Native Method)
09-18 19:13:52.835: E/AndroidRuntime(367): Caused by: java.lang.NullPointerException
09-18 19:13:52.835: E/AndroidRuntime(367):  at com.example.xmlparsing_test.BarGraphActivity.buildBarDataset(BarGraphActivity.java:114)
09-18 19:13:52.835: E/AndroidRuntime(367):  at com.example.xmlparsing_test.BarGraphActivity.DrawGraph(BarGraphActivity.java:56)
09-18 19:13:52.835: E/AndroidRuntime(367):  at com.example.xmlparsing_test.BarGraphActivity.onCreate(BarGraphActivity.java:22)
09-18 19:13:52.835: E/AndroidRuntime(367):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-18 19:13:52.835: E/AndroidRuntime(367):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
09-18 19:13:52.835: E/AndroidRuntime(367):  ... 11 more 
```

**图表.java**

```
public class Chart extends Activity 
{       
EditText edt1,edt2;
TextView txtv1;
Button btn;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    edt1 = (EditText)findViewById(R.id.editText1);
    edt2 = (EditText)findViewById(R.id.editText2);

    btn = (Button)findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener()
    {

        public void onClick(View v) 
        {
                getTMSChart(edt1.getText().toString(),edt2.getText().toString());
            Intent intnt = new Intent(v.getContext(), BarGraphActivity.class);
            startActivity(intnt);
        }
    });
 }

public void getTMSChart(String FromDate, String ToDate) 
{
    System.setProperty("http.keepAlive", "false");        
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);        

    envelope.dotNet = true;

    String METHOD = "GetTMSChart";
    String NAMESPACE = "http://tempuri.org/";
    String SOAP_ACTION = "http://tempuri.org/GetTMSChart"; 
    String URL = "http://54.251.60.177/TMSOrdersService/TMSDetails.asmx";

    SoapObject request = new SoapObject(NAMESPACE, METHOD); 

    request.addProperty("FromDate","");               
    request.addProperty("ToDate","");

    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try 
    {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapObject result = (SoapObject) envelope.bodyIn;
        SoapObject root =  (SoapObject) ((SoapObject)(result).getProperty(0)).getProperty("NewDataSet");
        int tablesCount = root.getPropertyCount();

    for (int i = 0; i < tablesCount; i++)
    {
        SoapObject table = (SoapObject) root.getProperty(i);
        int propertyCount = table.getPropertyCount();

     for (int j = 0; j < propertyCount; j++)
     {           
        //String ord = table.getPropertyAsString("");

         int orderNo = Integer.parseInt(table.getPropertyAsString("Order_No"));
         int freightRate =   Integer.parseInt(table.getPropertyAsString("Freight_Rate"));
         int marginPercent = Integer.parseInt(table.getPropertyAsString("Margin_Percent"));
        }
    }
}
catch (Exception e) 
{}
}   } 
```

**条形图活动.java**

```
public class BarGraphActivity extends Chart
{   
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);
    DrawGraph();
}

public void DrawGraph() 
{
Chart ch = new Chart();

String[] titles = new String[] { " Barcharts",""};

int[] x_axis =null;   
int[] y_axis =null;

List<int[]> values = new ArrayList<int[]>();
values.add(x_axis);
values.add(y_axis);

int[] colors = new int[] { Color.WHITE, Color.BLACK};

XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
renderer.setOrientation(Orientation.HORIZONTAL);
setChartSettings(renderer, "some texts", " ", " ",0,x_axis, 0,y_axis, Color.GRAY, Color.LTGRAY);

renderer.setXLabels(1);
renderer.addXTextLabel(2, "orderNo");
renderer.addYTextLabel(2, "freight");
renderer.setPanEnabled(false, false);

int length = renderer.getSeriesRendererCount();
for (int i = 0; i < length; i++) 
{
  SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
  seriesRenderer.setDisplayChartValues(true);
  }

ChartFactory.getBarChartIntent(this, buildBarDataset(titles, values), renderer,Type.DEFAULT);
}

public XYMultipleSeriesRenderer buildBarRenderer(int[] colors) 
{
    // creates a SeriesRenderer and initializes it with useful default values as well as colors

XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();

renderer.setAxisTitleTextSize(15);
renderer.setChartTitleTextSize(20);
renderer.setLabelsTextSize(15);
renderer.setLegendTextSize(15);

int length = colors.length;
for (int i = 0; i < length; i++) 
{
   SimpleSeriesRenderer r = new SimpleSeriesRenderer();
   r.setColor(colors[i]);
   renderer.addSeriesRenderer(r);
  }
  return renderer;
}

 public void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String  xTitle,
 String yTitle, int xMin, int[] x_axis, int yMin, int[] y_axis, int axesColor,int labelsColor) 
{
    // sets lots of default values for this renderer

renderer.setChartTitle(title);

renderer.setXTitle(xTitle);
renderer.setYTitle(yTitle);

renderer.setXAxisMin(xMin);

renderer.setYAxisMin(yMin);
renderer.setAxesColor(axesColor);
renderer.setLabelsColor(labelsColor);

renderer.setApplyBackgroundColor(true);
renderer.setBackgroundColor(Color.BLACK);
}

public XYMultipleSeriesDataset buildBarDataset(String[] titles, List<int[]> values) 
{
// adds the axis titles and values into the dataset

XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

int length = titles.length;

for (int i = 0; i < length; i++) 
{
   CategorySeries series = new CategorySeries(titles[i]);

   int[] v = values.get(i);

   int seriesLength = v.length;

   for (int k = 0; k < seriesLength; k++) 
   {
     series.add(v[k]);
    }

   dataset.addSeries(series.toXYSeries());
   }
 return dataset;
 } } 
```

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:11:27.483

我想这在`DrawGraph()`方法中与此有关

```
int[] x_axis =null;   
int[] y_axis =null; 
```

您正在`.get(i)`返回一个空数组。

您正在将 null 添加到您的`ArrayList<int[]>`（我认为这在 Java 中是完全合法的，不记得了），然后拉出 null，然后调用`v.length`

编辑：不……要进行真正的编辑！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:57:57.243

我将此添加为答案，只是为了避免评论列表中出现堆栈溢出:) 我不希望接受。

抱歉 Android_user，但您将不得不大幅重组您的代码。考虑一下：

```
int[] x_axis =null;   
int[] y_axis =null;

List<int[]> values = new ArrayList<int[]>();
values.add(x_axis);
values.add(y_axis); 
```

此时，您有一个整数数组列表。这个列表，即“值”，有 2 个元素，每个元素都是一个未初始化的 int 数组（x_axis 和 y_axis）。

稍后，在您的 buildBarDataset 方法中，您将“值”作为参数传递。现在考虑一下：

```
int[] v = values.get(i); 
```

values.get(i) 只能返回 null，因为它的两个元素都是 null，并且您尝试分配该 v。

你打算 x_axis 和 y_axis 包含什么？这对我来说意味着它们是 x 和 y 轴的比例值，而不是图形值？您是否打算在 buildBarDataset 返回时，x_axis 和 y_axis 的元素将包含值，或者它们应该包含 int[] v = values.get(i) 之前的值？

# c++ - 将模板类从 C++ 库导出到 VB.NET 和 C#

> ID：12478551
> 
> 赞同：0
> 
> 时间：2012-09-18T13:59:18.477
> 
> 标签：c++, vb.net, dll, dllexport, template-classes

我有以下问题：我在 C++ 中创建了一个 DLL，其模板类定义如下：

```
 template <class T>
 class myClass {
    public:
    //! Constructor
    myClass(int size = 10);

    //! Destructor
    ~myClass();

    someAttributes ... ;
    } 
```

我想导出它，所以我定义如下：

```
 template class __declspec(dllexport) myClass<double>; 
```

因为 - 我读过 - 在 Visual C++ 中，您不能导出模板，而只能导出它们的显式初始化。这种方式一切正常，我可以在新的 Visual C++ 代码中导入 DLL。现在：我是否必须为我需要的每种类型（myClass、myClass 等）导出显式实例化？还是有更好的方法 - 不那么天真 - 做到这一点？如何在 VB.NET 项目中导入我的模板类？有办法吗？还是我必须创建一个编组结构，然后在运行时将其转换到我的模板类中？

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:06:22.990

您必须为您希望使用的每种类型导出模板的显式类型实例化。此外，您*可能*必须至少一次从 C++ 代码中调用要显式使用的每个方法，以便将其目标代码包含在库中。

这样做的原因是，模板代码不是很容易编译到您的目标文件（或 dll）中的代码。编译器将在程序编译时生成所需的（通常仅是所需的）代码。如果您的 C++ 代码从不使用模板类，编译器将完全忽略该模板。模板类的方法也是如此。如果您不使用它，则允许编译器忽略它。

底线是：为打算从其他语言使用的库使用模板代码通常不是一个好主意......

# jquery - 定位值内的特定字符

> ID：12478558
> 
> 赞同：0
> 
> 时间：2012-09-18T13:59:48.000
> 
> 标签：jquery, html, css

我有以下输入文本字段（通过 Mailchimp 注册表单）：

```
<input type="text" value="First name*" name="FNAME" class="required" id="mce-FNAME"/> 
```

1.  是否可以将值设为两种不同的颜色？我想将包含“名字”的输入标签的值属性值设为黑色，将“*”设为红色。

2.  有没有办法在不丢失它保留的 Mailchimp 表单功能的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:36:41.897

我已经完成了以下操作：

```
.required {
    background-image: url('images/rwcmd-asterisk.png')!IMPORTANT;
    background-repeat:no-repeat!IMPORTANT;
    background-position:97% 16%;
    } 
```

不理想，但真的别无选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:28:38.953

您可以将内容修改为以下内容：

```
<p class="required">
    <input type="text" value="First name" name="FNAME"
        class="required" id="mce-FNAME" />
</p> 
```

CSS：

```
p.required:after {
    color:red;
    content:"*";
} 
```

[http://jsfiddle.net/uAKEa/](http://jsfiddle.net/uAKEa/)

# bash - bash：文件名中的空格

> ID：12478561
> 
> 赞同：0
> 
> 时间：2012-09-18T14:00:05.147
> 
> 标签：bash

我有一个简单的脚本：

```
#!/bin/sh
cd /tmp/pics
for pic in *.jpg;
do
  php -f /tmp/pics/covert.php $pic;
done 
```

当我的图片名称中有空格时，该脚本将不起作用。我怎么能解决这个问题？

如何修复我的脚本以正确处理空白，并处理其他 JPEG 扩展，例如“JPG”、“JPEG”、“jpeg”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:04:59.097

和其他 shell 中的引用规则`bash`与 Ruby 和 Python 和 Perl 等“普通”脚本语言中的引用规则不同，所以一开始这可能会让人感到困惑，但是如果你在 . 周围加上双引号`$pic`，bash 将正确处理变量的内容，即使它包含空格。

一个修复将使您的脚本看起来像这样

```
#!/bin/sh
cd /tmp/pics
for pic in *.jpg;
do
  php -f /tmp/pics/covert.php "$pic";
done 
```

我还将删除每行末尾的分号。仅当您将多条线路挤在一条线上时才需要这些。它们在 bash 中不需要它们在 PHP 或（在较小程度上）JavaScript 中的方式。

正如所写，这是使用 Bourne shell 而不是 bash。（目前我们将忽略 bash 可能会在您的系统上用于模拟 Bourne shell 的事实。）如果您想使用 bash，请更改顶部的“shebang”行。通常是`#!/bin/bash`.

要处理多个文件扩展名，您可以将它们彼此相邻堆叠，中间有空格，就像这样

```
for pic in *.jpg *.jpeg *.JPEG *.JPG 
```

正如 Jens 指出的那样，您可能会遇到文件扩展名混合大小写的奇怪极端情况。你可以用括号来处理它来分组字符

```
for pic in *.[jJ][pP][gG] *.[jJ][pP][eE][gG] 
```

或者您可以使用 glenn 设置 shell 选项的方法来忽略大小写（和[不匹配的模式](http://mywiki.wooledge.org/NullGlob)），然后使用更简单的 glob 模式

```
shopt -s nocaseglob nullglob
for pic in *.jpg *.jpeg 
```

如果我们采用后一种方法，最终的脚本将如下所示：

```
#!/bin/bash
cd /tmp/pics
shopt -s nocaseglob nullglob
for pic in *.jpg *.jpeg
do
  php -f /tmp/pics/covert.php "$pic"
done 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T14:10:01.780

对于像这样的短脚本，我会使用

```
#!/bin/sh
cd /tmp/pics
for pic in *.[jJ][pP][gG] *.[jJ][pP][eE][gG]; do
  php -f /tmp/pics/covert.php "$pic"
done 
```

这甚至可以处理奇怪的驼峰式扩展，例如`prettygirl.JpeG`:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T20:57:44.180

使用 bash，进行不区分大小写的文件匹配：

```
shopt -s nocaseglob nullglob
for pic in *{jpg,jpeg}
do
    php5 -f ./convert.php "$pic"
done 
```

# exception - 带有 ID 的 jqGrid.GetRowData 来自双击抛出异常

> ID：12478563
> 
> 赞同：0
> 
> 时间：2012-09-18T14:00:21.313
> 
> 标签：exception, jqgrid

我有工作流程...

```
ondblClickRow: function (id) {
            debugger;
            var rowData = $("#list").getRowData(id);
...
} 
```

此函数调用抛出异常，而它以前工作。实际上步入迷你代码，我可以看到有一个数组超出范围异常。只有七列，它似乎在调用第八列（零索引 - 我有从 0-6 的列，它似乎在要求第七列）。不确定该特定异常中发生了什么。我仍在研究，但这工作正常，几周内我没有更改任何与此相关的内容。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:58:15.477

这是一种黑客解决方法，但我只是根据 id 和我需要的列名获得了我需要的单元格值，这样我就可以规避任何可能发生的问题......即使我不确定发生了什么。我仍然很好奇为什么会发生这种情况。需要做更多的研究才能让我对这个解决方案更满意......

```
var FName = $('#list').getCell(id, 'First_Name'); 
```

# sdk - DirectX 11 中的查看矩阵 - 奇怪的转换

> ID：12478564
> 
> 赞同：0
> 
> 时间：2012-09-18T14:00:23.030
> 
> 标签：sdk, directx-11, 3dsmax, 3ds

我正在为基于 DirectX 11 的 3ds max 编写渲染器插件。

我从 3ds max 得到实际的视口矩阵，在反转后看起来：[Rx Ry Rz] [Ux Uy Uz] [Dx Dy Dz] [Px Py Pz]

*   其中 R 代表 Right，U 代表 Up，D id 方向，P 代表 Position。

我将此视图矩阵应用于 DirectX（我基于 rastertek 教程：[http](http://www.rastertek.com/dx11tut04.html) ://www.rastertek.com/dx11tut04.html ），但我没有创建自己的视图矩阵，而是使用 3ds max 的这个视图矩阵，它基本上相同的结构：[Rx Ry Rz 0] [Ux Uy Uz 0] [Dx Dy Dz 0] [Px Py Pz 1]

起初一切似乎都很好，因为最大视口中的视图和 DirectX 窗口中的渲染视图看起来几乎相同。但是最大视口和 DirectX 窗口中的变换并不相同。看起来像：当我在最大移动相机位置时，DirectX 中的相机目标正在移动，而当我在最大移动相机目标（或旋转相机）时，DirectX 中的相机位置正在移动。

感谢您的帮助...我无法弄清楚 3 天...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:25:18.323

我终于找到了解决方案...

首先，我从 3ds max 矩阵中获取方向和位置并手动创建视图矩阵，但使用：D3DXMatrixLookAtRH 和 D3DXMatrixPerspectiveFovRH（用于投影矩阵）而不是 D3DXMatrixPerspectiveFovLH 和 D3DXMatrixLookAtLH，它们解决了大多数问题......

然后，我注意到在平移相机期间未更新 3ds max 矩阵（仅更新了位置），因此，为了查看视图矩阵中的向量，我使用了“位置方向”...

# json - 在 jQuery 1.4 中使用相当于 $.when().done()

> ID：12478565
> 
> 赞同：3
> 
> 时间：2012-09-18T14:00:35.650
> 
> 标签：json, jquery-1.4

我需要执行两个不同的 JSON 请求并将这些请求组合到一个函数中。我本来希望使用以下结构：

```
$.when(
       $.getJSON(url1),
       $.getJSON(url2)
).done(function(data1, data2) {
       someFunction(data1, data2);
}); 
```

不幸的是，对于这个项目，我们使用的是 jQuery 1.4 和 $.when 从 jQuery 1.5 开始引入。在 jQuery 1.4 中是否有一些等价物？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:38:03.357

为了实现这个功能，我做了一个数组，其中每个元素都是一个标志，表示该特定 getJSON 是否已完成。同样在每个成功函数上，我检查要完成的完整数组，如果没有（确实如此），我将获得的 json（和一些上下文）添加到其他“结果数组”。但是如果一切都完成了，那么我对“结果数组”执行最终函数

# installation - Wix Installer - 基于属性创建文件夹层次结构

> ID：12478566
> 
> 赞同：3
> 
> 时间：2012-09-18T14:00:36.697
> 
> 标签：installation, wix

我正在使用[Wix 3.6](http://wixtoolset.org/)创建设置。我还在继续学习。那里的信息仍然分散在周围。我只是在等待我的 Wix 开发人员指南书到货。

我目前有一个自定义 UI 对话框，用户可以在其中输入一些应用程序配置。该配置的一部分是指定一个日志文件夹。这目前这只是设置一个属性[LogFolder]。这默认为 D:\Logs 之类的内容。

我希望安装程序在运行安装程序时创建该目录。我有以下尝试执行此操作，但它只是在我运行安装程序时在 D: 驱动器上创建了一个名为 [LOGFOLDER] 的文件夹。

```
<Product ...
    <Directory Id="TARGETDIR" Name="SourceDir" >
        <Directory Id="LogFolderDir" Name="[LOGFOLDER]" >
            <Component Id="LogFolderComponent" Guid="{7E7D6916-B321-40D6-ABAD-696B57A6E5FB}" KeyPath="yes">
                <CreateFolder />
            </Component>
        </Directory>
    </Directory>
    ...
</Product> 
```

我怎样才能用 Wix 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-16T12:33:08.000

第一步是创建一个设置为您想要的值的属性：

```
<Product>
  <Property Id="LOGFOLDER" Value="D:\Logs" />
</Product> 
```

第二步是创建一个对话框，您可以在其中设置此属性（或更改其值的另一件事）：

```
<Dialog>
  <Control Id="Edit_LogFolder" Type="Edit" Property="LOGFOLDER" />
</Dialog> 
```

然后您需要更改目录结构以在默认位置创建此文件夹：

```
<Directory Id="ProgramFilesFolder">
  <Directory Id="INSTALLFOLDER" Name="MyApp">

    <Directory Id="LOGFOLDER" Name="Logs" />

  </Directory>
</Directory> 
```

最后一步是创建一个将创建目录的组件，如下所示：

```
<ComponentGroup Id="ComponentGroup_LogFolder">
  <Component Id="Component_LogFolder" Guid="" Directory="LOGFOLDER">

    <CreateFolder Directory="LOGFOLDER" />

  </Component>
</ComponentGroup> 
```

**评论：**

如果 D:\ 是光盘驱动器并且您插入了光盘，则安装将失败，因为它将尝试创建文件夹并且不会成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:44:28.377

Name 属性不可格式化，因此您可以在其中使用属性。Id 'LogFolderDir' 没有诸如“ProgramFilesFolder”之类的父级，因此它默认为具有最大磁盘空间的卷。在本例中为 D 但 YMMV。

默认为 D: 是危险的，因为 D: 可能不存在。我如何设置这个目录是 Id="LOGDIR" Name="Logs" 并使其成为 INSTALLDIR/INSTALLLOCATION 目录元素的子元素。然后在您的自定义 UI 中，连接另一个 BrowseFolder 对话框，让用户能够覆盖它。或者，使其与所需的日志功能相关联，以便可以使用库存功能选择对话框来选择功能并浏览目标文件夹。

如果您仍然希望它“默认”为 D:\Logs，我会做一个自定义操作来检查 D: 是否存在并且是固定磁盘。如果是这样，设置 LOGDIR=D:\Logs

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-27T16:43:57.423

通过对属性和目录使用相同的 ID（不命名目录），有一个更简单的解决方案。但是您必须在属性中使用文件夹的完整路径。

假设日志目录是 C:\ProgramDirectory\Data\Log 并且您想要使用属性设置 Data（通常如果 Data 的值不同并且有条件地设置）。

```
<Property Id="PR_DATA_DIRECTORY" Value="C:\ProgramDirectory\Data" />
<Directory Id="TARGETDIR" Name="SourceDir">
    <Directory Id="DIR_PROGRAM" Name="C:\ProgramDirectory" >
        <Directory Id="PR_DATA_DIRECTORY">
            <Directory Id="DIR_LOG" Name="Log" />
        <Directory/>
    </Directory>
</Directory> 
```

# python - Python：Ogg/Speex 音频播放？

> ID：12478572
> 
> 赞同：0
> 
> 时间：2012-09-18T14:00:46.997
> 
> 标签：python, audio, ogg, speex

是否有一个模块支持在 Windows 上的 Python 2.6 中播放 Ogg/Speex（不是 Ogg/Vorbis）编码文件的音频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:29:42.557

到目前为止，VLC Python 绑定似乎对我来说是最简单的解决方案。对于 64 位 Python，我下载了 nightly build 可执行文件。

[http://wiki.videolan.org/Python_bindings](http://wiki.videolan.org/Python_bindings)

# jasper-reports - 单值输入控件在 JR 服务器上不可见

> ID：12478573
> 
> 赞同：0
> 
> 时间：2012-09-18T14:00:57.410
> 
> 标签：jasper-reports, jasperserver

我在报告中有两个参数：

1.  ***week*** ---> 有***isForPrompting="true"***属性
2.  ***年***---> 有***isForPrompting="true"***属性

*但是当我添加一个单值输入控件并在JasperReports Server*上运行相同的报告时，只打开了一个弹出窗口，而不是单值输入控件。

此外，如果我向其他报告添加单值输入控件，当我在*JR Server*上运行报告时，它会显示出来。

我真的不明白为什么当*iReport*设计器上的一切都运行良好时，当前报表没有显示单值输入控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:56:40.630

最常见的问题：您的输入控件不完全匹配。输入控件 ID 必须与参数匹配。请记住，它区分大小写。

# javascript - 在同时使用 linq.js 和 knockout.js 的 JavaScript 中，如何生成包含计算属性的 observableArray？

> ID：12478574
> 
> 赞同：0
> 
> 时间：2012-09-18T14:00:59.097
> 
> 标签：javascript, linq, functional-programming, knockout.js, linq.js

对不起，如果我的标题没有意义，但这是我到目前为止所做的：

```
function createPostsArray(last) {
                var postArr = 
                    generate(
                        function () { 
                            return { 
                                postGroup: [], 
                                visible: computed(
                                            function (){ //return true if 
                                                         //postGroup is empty
                            } 
                        }, last)
                    .toArray();

                posts(postArr);

            } 
```

基本上， postGroup[] 是空的，我想使用 CSS 显示一个“加载”屏幕。当 postGroup 获取一些元素时，自动可见应该变为 false。

稍后我将扩展这个计算函数以考虑另一个 observable，但这对我来说很棘手，因为 visible 取决于特定的 postGroup，即与之关联的 postGroup。

我怎样才能做到这一点？有人知道吗？

PS：Generate 是一个 linq.js 生成函数，Computed 是一个 ko.computed 函数

PS：阅读这些概念有什么好的参考资料？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:31:39.420

淘汰赛部分看起来像这样。postGroup 需要是一个 observableArray，因为您想观察数组本身。因为 visible 是一个 ko.computed ，所以只要 postGroup 中的元素数量发生变化，它就会运行它的函数。

extend({ throttle: 100 }) 不是必需的，但如果 postGroup 通过重复的 postGroup.push() 调用填充，它将有助于提高性能。它会导致计算出的 observable 延迟重新评估，直到它的依赖关系在指定的时间段内停止变化。[http://knockoutjs.com/documentation/throttle-extender.html](http://knockoutjs.com/documentation/throttle-extender.html)

```
return { 
    postGroup: ko.observableArray(), 
    visible: ko.computed(function() {
        return postGroup().length > 0;
    }).extend({ throttle: 100 })
} 
```

# f# - 将 OCaml 转换为 F#：OCaml 等效于 F# 规范，特别是初始化

> ID：12478575
> 
> 赞同：5
> 
> 时间：2012-09-18T14:01:02.100
> 
> 标签：f#, documentation, ocaml, specifications

在将OCaml [Format模块](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Format.html)转换为F#的过程中发现需要详细了解初始化过程。对于 F#，这在 F# 规范的第[12.5 节程序执行中进行了解释。](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc321997230)虽然[OCaml 文档](http://caml.inria.fr/resources/doc/index.en.html)页面列出了几个很好的文档，但我无法找到任何提供与 F# 规范中相同的详细级别的文档。

是否有任何文档为 OCaml 初始化提供相应级别的详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:44:48.303

简而言之，是否有像 F# 那样的 OCaml 规范手册？不

我今天花了一个小时寻找，仍然找不到。我瞪大了眼睛，查看了一些 OCaml 邮件列表，并查看了 OCaml 站点上的所有文档。OCaml 邮件列表中的其他人也注意到缺少 OCaml 规范手册。

与这些没有答案的情况一样，如果有人在这里参考 OCaml 规范手册（如 F# 手册）回答，那么我很乐意给他们接受投票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T22:22:24.970

我无法提供有关 OCaml 模块初始化的任何信息，但我确实将 Format 模块移植到 F# 作为我[`FSharp.Compatibility`](https://github.com/jack-pappas/FSharp.Compatibility)项目的一部分。如果你想看看，可以在这里找到：

[https://github.com/jack-pappas/FSharp.Compatibility/tree/master/FSharp.Compatibility.OCaml.Format](https://github.com/jack-pappas/FSharp.Compatibility/tree/master/FSharp.Compatibility.OCaml.Format)

# delphi - 为什么 WebApplication.SendFile 因“已设置回复类型”而失败？

> ID：12478576
> 
> 赞同：2
> 
> 时间：2012-09-18T14:01:02.037
> 
> 标签：delphi, intraweb, delphi-xe3

脚步：

1.  我使用`IntraWeb Application Wizard`.
2.  我在表格上放了一个 TIWButton。
3.  我将此代码放入 OnClick 事件处理程序中：

`WebApplication.SendFile('D:\Temp\ClearAll.sql');`

单击该按钮会引发`Exception`带有消息的类型异常`Reply type already set`。

任何想法出了什么问题？

Delphi 是带有 IntraWeb XIV 的 XE3。

我对 Deplhi 2007 (IntraWeb 9) 进行了同样的尝试，它可以工作，所以这似乎是 IntraWeb XIV 中的一个错误。

有人可以确认一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:49:58.570

正如 Jackson Gomes 所证实的，这确实是一个错误：

> > 我发现这不会发生在带有 Intraweb XII 的 XE2 上。所以这似乎是 Intraweb XIV 或 Delphi XE3 中的一个错误。
> 
> 正确的
> 
> > 此外，我们知道 Delphi XE3 和 Intraweb XIV 的注册副本仍然随机切换端口（例如，不使用我在服务器控制器中指定的端口）。
> 
> 我们会检查它...谢谢

[https://forums.embarcadero.com/thread.jspa?threadID=77064](https://forums.embarcadero.com/thread.jspa?threadID=77064)

# database - 数据库设计 - 规范化

> ID：12478579
> 
> 赞同：2
> 
> 时间：2012-09-18T14:01:07.943
> 
> 标签：database, normalization

这对我来说是一个新话题，我已经阅读了几篇文章，即使我不确定以下问题是否与这篇文章的标题有关，我仍然不清楚。

我的系统向用户发送数据。用户可以选择通过以下方式发送数据：

*   XML
*   电子邮件
*   邮政

根据用户选择的内容，需要几个额外但不同的变量。例如，电子邮件地址是通过电子邮件发送数据所必需的，但不是通过 XML 发送数据。

假设我们有一个存储“数据交付选择”（XML、电子邮件或邮政）的数据库表，最好在该表中存储额外需要的变量，这意味着如果选择 XML，则该行中的电子邮件字段将为空，或者创建三个新表来存储与“数据交付选择”表中每个可能的选择相关联的变量，然后通过“数据交付选择”PK关联这些表中的条目会更好吗？

或者，它以哪种方式完成并不重要？

出于问题的目的，忘记我可能已经在其他地方持有用户电子邮件地址等的事实。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:13:33.083

一些 RDBMS（[例如 PostgreSQL](http://www.postgresql.org/docs/9.0/static/ddl-inherit.html)）允许表继承。因此，您可以定义`DataDeliveryChoices`然后创建 3 个从它继承的附加表`DataDeliveryXML`，`DataDeliveryEmail`...

MSSQL 允许您在列中存储（和查询）XML 文档，因此您可以将附加数据存储在 XML 中（不是经典的数据库设计，但如果您需要添加一些数据字段，则非常灵活，无需更改架构）。

您添加三个附加表的方式是 IMO 也是一种可接受的解决方案。

可能性是无止境 ：）

# objective-c - Ios使用按钮而不使用导航控制器进入下一个视图

> ID：12478581
> 
> 赞同：0
> 
> 时间：2012-09-18T14:01:08.903
> 
> 标签：objective-c, ios, xcode

刚刚开始使用 IOS - 编写了一些教程 -

我在教程中使用的所有内容 - 单击按钮时，我一直在使用导航控制器转到下一个视图。

好吧，我正在查看 aticoD 的徽标测验应用程序。

1.  我在这个应用程序上看不到任何导航控制器 - 它有一些自定义箭头图片，用作后退按钮 - 但导航栏不可见。

是用这个方法吗？？？-

```
- (void)viewWillAppear:(BOOL)animated {
    [self.navigationController setNavigationBarHidden:YES animated:YES];
} 
```

--- 你可以在应用程序上看到，选择级别 - 你必须刷卡 -

谁能给我一些关于如何实现这部分的指导。或将我链接到教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:28:28.070

您需要设置此代码

```
UIViewController *viewController = [[UIViewController alloc] init];
//Animation 
CATransition *animation = [CATransition animation];
[animation setDuration:0.5];
[animation setType:kCATransitionMoveIn];
[animation setSubtype:kCATransitionFromRight];
[animation setFillMode:kCAFillModeForwards];
[animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear]];
 //animation add to layer.
[[viewController.view layer] addAnimation:animation forKey:@"pushAnimation"];

[[self.navigationViewController.view layer]addAnimation:animation forKey:@"pushAnimation"];
[self.navigationViewController pushViewController:seeAllViewController animated:YES]; 
```

对于不同类型的动画，您只需要更改动画`Type`，`subType`并且`fillMode`。

# android - 如何将 Android 应用程序与 Google 表格电子表格连接起来？

> ID：12478582
> 
> 赞同：11
> 
> 时间：2012-09-18T14:01:11.577
> 
> 标签：android, google-sheets, google-api, google-docs-api, google-sheets-api

我正在尝试做一个需要使用 Google 电子表格 API 的 Android 应用程序。我是新手，所以我从 api 的第 3 版开始：[https ://developers.google.com/google-apps/spreadsheets/](https://developers.google.com/google-apps/spreadsheets/)

我按照所有步骤，将所有 jar 文件下载到`lib`我的项目文件夹中的子文件夹，然后像往常一样添加到 Eclipse 中的构建路径。因此，虽然没有执行 Oauth 2.0 的 Java 示例，但我只是尝试声明：

```
SpreadsheetService service = new SpreadsheetService("v1"); 
```

但是当我模拟这条简单的线时，它给了我一个错误：

```
java.lang.NoClassDefFoundError: com.google.gdata.client.spreadsheet.SpreadsheetService 
```

我正在使用文档中包含的所有 jar，并且我有导入：

```
import com.google.gdata.client.spreadsheet.SpreadsheetService; 
```

但我完全迷路了。我不知道还要做什么才能开始，连接到 Google API 并使用电子表格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T17:30:08.693

没有 OAuth 2.0 的示例代码。但它建议执行 OAuth，因为它有利于安全目的。您还必须添加以下权限。

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCOUNT_MANAGER"/>
<uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

示例代码：-

```
try {
    SpreadsheetEntry spreadsheet;
    service = new SpreadsheetService("Spreadsheet");
    service.setProtocolVersion(SpreadsheetService.Versions.V3);
    service.setUserCredentials("username", "password");//permission required to add in Manifest
    URL metafeedUrl = new URL("https://spreadsheets.google.com/feeds/spreadsheets/private/full");
    feed = service.getFeed(metafeedUrl, SpreadsheetFeed.class);

    List<SpreadsheetEntry> spreadsheets = feed.getEntries();
    if (spreadsheets.size() > 0) {
        spreadsheet = spreadsheets.get(i);//Get your Spreadsheet
   }
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T12:19:08.217

非常感谢蝎子！有用！！我已经尝试这个太久了。好的，这是我的解决方案：我开始了一个新项目并包含了这些 jar：

```
gdata-client-1.0
gdata-client-meta-1.0
gdata-core-1.0
gdata-spreadsheet-3.0
gdata-spreadsheet-meta-3.0
guava-13.0.1 
```

和我的代码：

```
 SpreadsheetService spreadsheet= new SpreadsheetService("v1");
    spreadsheet.setProtocolVersion(SpreadsheetService.Versions.V3);

    try {
        spreadsheet.setUserCredentials("username", "password");
        URL metafeedUrl = new URL("https://spreadsheets.google.com/feeds/spreadsheets/private/full");
        SpreadsheetFeed feed = spreadsheet.getFeed(metafeedUrl, SpreadsheetFeed.class);

        List<SpreadsheetEntry> spreadsheets = feed.getEntries();
        for (SpreadsheetEntry service : spreadsheets) {             
            System.out.println(service.getTitle().getPlainText());
       }
    } catch (AuthenticationException e) {           
        e.printStackTrace();
    } 
```

当然，这是在另一个线程中执行的，而不是在主线程中。OAuth 2.0 没有 java 文档，但我会尝试，如果我做不到，我会在这里问。再次，非常感谢你，我希望在我足够的时间工作时能帮助你。:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-02T03:25:40.287

**（2017 年 2 月）**这个问题（和大多数答案）现在已经过时了：

1.  [GData API](http://developers.google.com/gdata/docs/directory)是上一代 Google API。虽然并非所有 GData API 都已被弃用，**但**[所有**现代**Google API](http://developers.google.com/api-client-library/java/apis)并不使用[Google Data 协议](http://developers.google.com/gdata)
***   Google于 2016 年[发布了新的 Google Sheets API](http://gsuite-developers.googleblog.com/2016/05/apps-dev-sheets-api.html)（v4；不是 GData），并且*   [Android Studio](http://developer.android.com/studio)现在是 Eclipse 的首选 IDE。为了使用 Google API，您需要获取[适用于 Android 的 Google API 客户端库](https://developers.google.com/api-client-library/java/google-api-java-client/android)（或者对于更通用的 Java，[请获取适用于 Java 的 Google API 客户端库](http://developers.google.com/api-client-library/java)）。现在你准备好了。**

 **首先，最新的[Sheets API](http://developers.google.com/sheets)比所有旧版本都要强大得多。最新的 API 提供了旧版本中没有的功能，即让开发人员可以像使用用户界面一样以编程方式访问工作表（创建冻结行、执行单元格格式设置、调整行/列大小、添加数据透视表、创建图表等。 ）。

也就是说，是的，当没有足够的好（工作）示例时，这很困难，对吧？在官方文档中，我们尝试以尽可能多的语言提供“快速入门”示例，以帮助您入门。本着这种精神，这里是[Android 快速入门代码示例](http://developers.google.com/sheets/api/quickstart/android)以及更通用的[Java 快速入门代码示例](http://developers.google.com/sheets/api/quickstart/java)。为方便起见，这里是[Sheets API JavaDocs 参考](https://developers.google.com/resources/api-libraries/documentation/sheets/v4/java/latest/)。

另一个答案建议使用 OAuth2 进行数据授权，您可以使用上面快速入门中的此身份验证片段以及正确的[范围](https://developers.google.com/resources/api-libraries/documentation/sheets/v4/java/latest/com/google/api/services/sheets/v4/SheetsScopes.html)来执行此操作：

```
// Sheets RO scope
private static final String[] SCOPES = {SheetsScopes.SPREADSHEETS_READONLY};
    :

// Initialize credentials and service object
mCredential = GoogleAccountCredential.usingOAuth2(
        getApplicationContext(), Arrays.asList(SCOPES))
        .setBackOff(new ExponentialBackOff()); 
```

如果您对 Python 没有“过敏”，我已经制作了几个视频，其中包含更多使用 Sheets API 的“真实世界”示例（虽然是非移动设备）：

*   [将 SQL 数据迁移到工作表](http://gsuite-developers.googleblog.com/2016/06/introducing-google-sheets-api-v4.html)[（](http://wescpy.blogspot.com/2016/06/using-new-google-sheets-api.html)代码深入研究）
*   [使用 Sheets API 格式化文本](http://gsuite-developers.googleblog.com/2016/11/formatting-cells-with-the-google-sheets-api.html)（代码深入[研究](http://wescpy.blogspot.com/2016/09/formatting-cells-in-google-sheets-with.html)）
*   [从电子表格数据生成幻灯片](http://gsuite-developers.googleblog.com/2016/11/generating-slides-from-spreadsheet-data.html)（代码深入[研究](http://wescpy.blogspot.com/2016/11/generating-slides-from-spreadsheet-data.html)）

最后，请注意，Sheets API 执行上述**面向文档的功能。**对于**文件级**访问，即导入、导出等，您可以使用[Google Drive API](http://developers.google.com/drive)；专门针对移动设备，使用[Google Drive Android API](http://developers.google.com/drive/android)。希望这可以帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-15T20:12:32.053

这是一个复杂的过程，但它可以做到！我写了[一篇](http://www.blogface.org/2013/07/reading-google-spreadsheets-from.html)关于启动和运行基础知识的博客文章。而且我还发布了一个[开源项目](https://github.com/nbeckman/NumberNDate)，它实际上很有用，但仍然非常少。它使用 OAuth，因此可以直接从 Android 的权限模型中提取权限（没有硬编码的电子邮件/密码！）。

您需要一些东西来启动“选择帐户意图”：

```
 View.OnTouchListener mDelayHideTouchListener = new View.OnTouchListener() {
    @Override
    public boolean onTouch(View view, MotionEvent motionEvent) {
         Intent intent = AccountPicker.newChooseAccountIntent(null, null, new String[]{"com.google"},
                 false, null, null, null, null);
         startActivityForResult(intent, 1);

        if (AUTO_HIDE) {
            delayedHide(AUTO_HIDE_DELAY_MILLIS);
        }
        return false;
    }
}; 
```

然后当该意图返回时，您可以尝试使用返回的令牌（尽管请注意，如果这是用户第一次可能必须明确授权您的程序；那就是 UserRecoverableAuthException）：

```
 protected void onActivityResult(final int requestCode, final int resultCode,
        final Intent data) {
    if (requestCode == 1 && resultCode == RESULT_OK) {
        final String accountName = data.getStringExtra(AccountManager.KEY_ACCOUNT_NAME);
        System.err.println(accountName);

        (new AsyncTask<String, String,String>(){
            @Override
            protected String doInBackground(String... arg0) {
                try {
                    // Turn account name into a token, which must
                    // be done in a background task, as it contacts
                    // the network.
                    String token = 
                            GoogleAuthUtil.getToken(
                                    FullscreenActivity.this, 
                                    accountName, 
                                    "oauth2:https://spreadsheets.google.com/feeds https://docs.google.com/feeds");
                    System.err.println("Token: " + token);

                    // Now that we have the token, can we actually list
                    // the spreadsheets or anything...
                    SpreadsheetService s =
                            new SpreadsheetService("Megabudget");
                    s.setAuthSubToken(token);

                    // Define the URL to request.  This should never change.
                    // (Magic URL good for all users.)
                    URL SPREADSHEET_FEED_URL = new URL(
                        "https://spreadsheets.google.com/feeds/spreadsheets/private/full");

                    // Make a request to the API and get all spreadsheets.
                    SpreadsheetFeed feed;
                    try {
                        feed = s.getFeed(SPREADSHEET_FEED_URL, SpreadsheetFeed.class);
                        List<SpreadsheetEntry> spreadsheets = feed.getEntries();

                        // Iterate through all of the spreadsheets returned
                        for (SpreadsheetEntry spreadsheet : spreadsheets) {
                          // Print the title of this spreadsheet to the screen
                          System.err.println(spreadsheet.getTitle().getPlainText());
                        }
                    } catch (ServiceException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                } catch (UserRecoverableAuthException e) {
                    // This is NECESSARY so the user can say, "yeah I want
                    // this app to have permission to read my spreadsheet."
                    Intent recoveryIntent = e.getIntent();
                    startActivityForResult(recoveryIntent, 2);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (GoogleAuthException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                return null;
            }}).execute();
  } else if (requestCode == 2 && resultCode == RESULT_OK) {
      // After the user YAYs or NAYs our permission request, we are
      // taken here, so if we wanted to grab the token now we could.
  }

} 
```**

# symfony - 如何在 OneToMany/ManyToOne 上订购

> ID：12478583
> 
> 赞同：35
> 
> 时间：2012-09-18T14:01:17.107
> 
> 标签：symfony, doctrine-orm

我有一个 Product 类，其中包含许多字段用于 ManyToMany，例如成分、大小、物种等。总共大约 14 个不同的字段并非所有字段都与每个产品相关。

我有这样的映射设置

```
Class product {
/**
 * @var Species[]
 * @ORM\ManyToMany(targetEntity="Species")
 * @ORM\JoinTable(name="product_species",
 *      joinColumns={@ORM\JoinColumn(name="productId", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="speciesId", referencedColumnName="id")}
 *      )
 * @ORM\OrderBy({"name" = "asc"})
 */
private $species; 
```

这适用于多对多/多对一。

问题出在我的 product_ingredients 表中我需要添加一个额外的字段，这意味着需要从 ManyToMany 切换到 OneToMany/ManyToOne 所以像这样

```
/**
     * @var ProductIngredient[]
     *
     * @ORM\OneToMany(targetEntity="ProductIngredient", mappedBy="product")
     * @ORM\JoinColumn(name="productId", referencedColumnName="id")
     */
    private $ingredients; 
```

现在我的 ProductIngredient 实体看起来像这样

```
 /**
     * @var IngredientType
     * @ORM\ManyToOne(targetEntity="IngredientType", fetch="EAGER")
     * @ORM\JoinColumn(name="ingredientTypeId", referencedColumnName="id")
     */
    private $ingredientType;

    /**
     * @var Ingredient
     *
     * @ORM\ManyToOne(targetEntity="Ingredient", inversedBy="products", fetch="EAGER")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="ingredientId", referencedColumnName="id")
     * })
     */
    private $ingredient;

    /**
     * @var Product
     *
     * @ORM\ManyToOne(targetEntity="Product", inversedBy="ingredients")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="productId", referencedColumnName="id")
     * })
     */
    private $product; 
```

因此，在我的物种产品类中，我使用@ORM\OrderBy 以便物种已经被订购。有没有办法我也可以在我的成分字段中做到这一点？

还是我的逻辑错了，这些甚至不应该是产品类上的字段，而应该只是在存储库中查找？

我希望它变得简单，这样我就可以循环遍历我的对象`$product->getIngredients()` 而不是做

```
$ingredients = $this->getDoctrine()->getRepository('ProductIngredient')->findByProduct($product->getId()); 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-09-19T13:45:46.357

在 Product 实体中，只需将 orderBy 添加到成分关系中

```
/**
 * ...
 * @ORM\OrderBy({"some_attribute" = "ASC", "another_attribute" = "DESC"})
 */
private $ingredients; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T02:27:01.440

好吧，我想出了一个 hackish 方式。因为我真的只关心输出的排序，所以我做了一个基本的 twig 扩展

```
use Doctrine\Common\Collections\Collection;

public function sort(Collection $objects, $name, $property = null)
{
    $values = $objects->getValues();
    usort($values, function ($a, $b) use ($name, $property) {
        $name = 'get' . $name;
        if ($property) {
            $property = 'get' . $property;
            return strcasecmp($a->$name()->$property(), $b->$name()->$property());
        } else {
            return strcasecmp($a->$name(), $b->$name());
        }
    });
    return $values;
} 
```

我想避免这种黑客攻击，但仍然想知道一个真正的解决方案

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-20T09:21:01.370

您应该在表单中使用“query_builder”选项：[http](http://symfony.com/doc/master/reference/forms/types/entity.html#query-builder) ://symfony.com/doc/master/reference/forms/types/entity.html#query-builder 该选项的值可以是这样的：

```
function(EntityRepository $er) {
    return $er->createQueryBuilder('i')->orderBy('i.name');
} 
```

不要忘记为 EntityRepository 添加“使用”语句

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-17T12:20:51.973

如果你使用 xml 映射，你可以使用

```
 <order-by>
            <order-by-field name="some_field" direction="ASC" />
        </order-by> 
```

在你的`<one-to-many>`标签里面。

# java - SpringSecurity - 自定义自动认证

> ID：12478589
> 
> 赞同：10
> 
> 时间：2012-09-18T14:01:50.603
> 
> 标签：java, spring, spring-security

这是我的场景：

*   Web 应用程序为许多应用程序执行某种 SSO
*   登录用户而不是单击链接，应用程序会向适当的应用程序发布用户信息（名称、密码 [无用]、角色）
*   我正在其中一个应用程序上实现 SpringSecurity 以从其功能中受益（会话中的权限、其类提供的方法等）

所以，我需要开发一个**自定义过滤器**- 我猜 - 能够从请求中检索用户信息，从数据库中检索，通过自定义**DetailsUserService**，有关用户的更多信息（电子邮件等......），然后执行身份验证根据从请求中检索到的角色，该用户。

我正在查看[预身份验证](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/preauth.html)过滤器，但我不确定它是否是正确的选择。当主体已经在会话中时，似乎应该使用这些对象，这是由一些先前的身份验证机制提出的（对吗？）。

我认为，一旦确定了正确的过滤器，我应该需要执行以下操作：

```
GrantedAuthority[] ga= new GrantedAuthority[1];
ga[0] = new GrantedAuthorityImpl(myUser.getRole());

SecurityContext sc = SecurityContextHolder.getContext();
Authentication a = new UsernamePasswordAuthenticationToken(userName, userPwd, ga);
a = authenticationManager.authenticate(a);
sc.setAuthentication(a); 
```

这是解决我的问题的正确方向吗？你有什么建议可以帮助我找到缺少的东西吗？

谢谢你们，

卢卡

***添加：***

嗨，Xearxess！很抱歉再次打扰您，但根据 SpringSecurity 2.0.4 翻译您的代码似乎比我想象的要困难：S 问题是 XML ......我尝试了不同的配置，但我总是遇到命名空间问题，缺少属性， ETC...

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:security="http://www.springframework.org/schema/security"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
              http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-2.0.4.xsd">  

    <security:http>
        <security:intercept-url pattern="/**" access="isAuthenticated()" />
        <security:logout logout-url="/logout" logout-success-url="http://milan-ias-vs.usersad.everis.int/DMTest/" invalidate-session="true" />
        <security:custom-filter position="PRE_AUTH_FILTER" ref="preAuthenticatedProcessingFilter" />
    </security:http>

    <bean id="preAuthenticatedProcessingFilter" class="it.novartis.ram.authentication.PreAuthenticatedProcessingFilter">
        <custom-filter position="PRE_AUTH_FILTER"/>
        <property name="authenticationManager" ref="authenticationManager" />
    </bean>

    <bean id="preauthAuthProvider" class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
        <property name="preAuthenticatedUserDetailsService">
            <bean class="it.novartis.ram.authentication.PreAuthenticatedUserDetailsService" />
        </property>
    </bean>

    <security:authentication-manager alias="authenticationManager">
        <security:authentication-provider ref="preauthAuthProvider" />
    </security:authentication-manager>

</beans> 
```

引用 CUSTOM-FILTER 元素的 2 行是两个不同的尝试，它们都被标记为错误。如何将过滤器的位置指定为属性？

身份验证管理器定义上的身份验证提供程序引用也被标记为错误。我认为我也需要像属性一样指定它，对吗？

希望你能给我最后一击；）再次感谢你，

*卢卡*

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2016-09-28T14:52:18.760

为了完整起见，在 Spring Security 4 中进行了轻微更改。例如，强烈建议使用 Java 配置。这样就更容易与 Spring Boot 集成。

它遵循与上述答案中给出的 XML 配置等效的 Java 配置。

```
@Configuration
@EnableWebSecurity
public class SecurityConfiguration extends WebSecurityConfigurerAdapter {

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.addFilterBefore(customAuthFilter(), AbstractPreAuthenticatedProcessingFilter.class)
            .authenticationProvider(preauthAuthProvider())
            .authorizeRequests()
            .anyRequest().authenticated();
    }

    @Autowired
    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {
        auth.authenticationProvider(preauthAuthProvider());
    }

    @Bean
    public PreAuthenticatedAuthenticationProvider preauthAuthProvider() {
        PreAuthenticatedAuthenticationProvider preauthAuthProvider =
            new PreAuthenticatedAuthenticationProvider();
                preauthAuthProvider.setPreAuthenticatedUserDetailsService(
                    userDetailsServiceWrapper());
        return preauthAuthProvider;
    }

    @Bean
    public OnlyRolesPreAuthenticatedUserDetailsService userDetailsServiceWrapper() {
        OnlyRolesPreAuthenticatedUserDetailsService service =
            new MyPreAuthenticatedUserDetailsService();
        return service;
    }

    @Bean
    public MyPreAuthenticatedProcessingFilter customAuthFilter() throws Exception {
        MyPreAuthenticatedProcessingFilter filter = new MyPreAuthenticatedProcessingFilter();
        filter.setAuthenticationManager(authenticationManager());
        return filter;
    }
} 
```

我认为上面的代码是值得的，因为互联网上的示例非常基础，而 Spring 文档缺乏这样的细节。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-18T18:04:37.087

是的，预认证方案正是您正在寻找的。

> 当主体已经在会话中时，似乎应该使用这些对象，这是由一些先前的身份验证机制提出的（对吗？）。

并非如此，您可以根据需要使用预身份验证[`PreAuthenticatedAuthenticationToken`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/authentication/preauth/PreAuthenticatedAuthenticationToken.html)从请求中创建。只需[做一些我在另一个问题中描述的事情](https://stackoverflow.com/a/12026557/708434)。

首先扩展[`AbstractPreAuthenticatedProcessingFilter`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/authentication/preauth/AbstractPreAuthenticatedProcessingFilter.html)以从请求中获取用户名和角色：

```
public class MyPreAuthenticatedProcessingFilter
    extends AbstractPreAuthenticatedProcessingFilter {

  public MyPreAuthenticatedProcessingFilter(
      AuthenticationManager authenticationManager) {
    setAuthenticationDetailsSource(new MyAuthenticationDetailsSource());
  }

  @Override
  protected Object getPreAuthenticatedPrincipal(HttpServletRequest request) {
    return "Anonymous";
  }

  @Override
  protected Object getPreAuthenticatedCredentials(HttpServletRequest request) {
    return "N/A";
  }

  public static class MyAuthenticationDetailsSource implements 
      AuthenticationDetailsSource<HttpServletRequest, MySessionUserDetails> {
    // roles probably should be encrypted somehow
    static final String ROLES_PARAMETER = "pre_auth_roles";

    @Override
    public MySessionUserDetails buildDetails(HttpServletRequest req) {
      // create container for pre-auth data
      return new MySessionUserDetails(req.getParameter(ROLES_PARAMETER));
    }
  }
} 
```

`MySessionUserDetails`类将带有角色的 spring 拆分为 List of[`SimpleGrantedAuthority`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/core/authority/SimpleGrantedAuthority.html)或任何其他`GrantedAuthority`实现。此外，建议使用 List 并且优于`GrantedAuthority[]`.

二、实施[`AuthenticationUserDetailsService`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/core/userdetails/AuthenticationUserDetailsService.html)：

```
public class MyPreAuthenticatedUserDetailsService implements 
    AuthenticationUserDetailsService<PreAuthenticatedAuthenticationToken> {

  @Override
  public UserDetails loadUserDetails(PreAuthenticatedAuthenticationToken token)
      throws UsernameNotFoundException {
    MySessionUserDetails sessionUserDetails =
        (MySessionUserDetails) token.getDetails();
    List<GrantedAuthority> authorities = sessionUserDetails.getAuthorities();
    return new User(token.getName(), "N/A", true, true, true, true, authorities);
  }
} 
```

然后在您的 XML 中将块连接在一起：

```
<security:http use-expressions="true">
  <security:intercept-url pattern="/**" access="isAuthenticated()" />
  <security:custom-filter position="PRE_AUTH_FILTER"
      ref="myPreAuthenticationFilter" />
</security:http>

<bean id="myPreAuthenticationFilter"
    class="com.example.MyPreAuthenticatedProcessingFilter">
  <property name="authenticationManager" ref="authenticationManager" />
</bean>

<bean id="preauthAuthProvider" class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
  <property name="preAuthenticatedUserDetailsService">
    <bean class="com.example.MyPreAuthenticatedUserDetailsService" />
  </property>
</bean>

<security:authentication-manager alias="authenticationManager">
  <security:authentication-provider ref="preauthAuthProvider" />
</security:authentication-manager> 
```

瞧！您应该[`User`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/core/userdetails/User.html)在您的应用程序中使用经过身份验证的主体。

我在这里编写的代码需要 Spring Security 3.1，如果您要使用它，我强烈建议您使用它（它确实需要 Spring 3.0.7+）。此外，[Spring Security 参考手册](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html)是您的朋友！

# google-maps - MODX getResources 与谷歌地图信息窗口

> ID：12478591
> 
> 赞同：0
> 
> 时间：2012-09-18T14:01:59.307
> 
> 标签：google-maps, modx

我正在使用以下代码填充 Google 地图：

```
 <script type="text/javascript">
  google.maps.event.addDomListener(window, 'load', function() {
    var map = new google.maps.Map(document.getElementById('gmap'), {
      zoom: 8,
      center: new google.maps.LatLng(51.414487, -0.207644),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infoWindow = new google.maps.InfoWindow;

    var onMarkerClick = function() {
      var marker = this;
      var latLng = marker.getPosition();
      infoWindow.setContent('<div class="map-info-window">\
                <h3>WEA [[+pagetitle]]</h3>\
                <p><strong>Branch contact:</strong> [[+branch-latlng]]</p>\
                <p><strong>Telephone no:</strong> [[+branch-phone:htmlent]]</p>\
                <p><strong>Email:</strong> [[+branch-email.htmlent]]</p>\
                [[+branch-more.htmlent]]\
              </div>' );

      infoWindow.open(map, marker);
    };
    google.maps.event.addListener(map, 'click', function() {
      infoWindow.close();
    });

[[getResources? &debug=`0` &showHidden=`1` &parents=`[[*id]]` &depth=`4` &tpl=`newBranchMapMarkerTpl` &includeTVs=`1` &processTVs=`1` &tvPrefix=`` &limit=`0` &where=`{"template:=":9}`]]

[[getResources? &debug=`0` &showHidden=`1` &parents=`[[*id]]` &depth=`4` &tpl=`newMarkerInit` &includeTVs=`1` &processTVs=`1` &tvPrefix=`` &limit=`0` &where=`{"template:=":9}`]]
  });
</script> 
```

并且 2 个 getResources 调用的内容如下：

newBranchMapMarkerTpl：

```
var marker[[+id]] = new google.maps.Marker({
      map: map,
      position: new google.maps.LatLng([[+branch-latlng]]),
                        title:"[[+pagetitle]]"
    }); 
```

新标记初始化：

```
google.maps.event.addListener(marker[[+id]], 'click', onMarkerClick); 
```

但它不会抓取 setContent 代码中列出的模板变量；这是因为它只在地图页眉中被引用一次，并且通常需要遍历每个文档。我试图在 BranchMapMarkerTpl 中创建一个新的信息窗口，它可以工作，但在打开另一个信息窗口时不会关闭最后一个信息窗口。

如何重新分解它以便获取模板变量值？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:42:35.050

模板中模板变量的语法是`[[*tvname]]`. 尝试：

```
infoWindow.setContent('<div class="map-info-window">\
    <h3>WEA [[*pagetitle]]</h3>\
    <p><strong>Branch contact:</strong> [[*branch-latlng]]</p>\
    <p><strong>Telephone no:</strong> [[*branch-phone:htmlent]]</p>\
    <p><strong>Email:</strong> [[*branch-email:htmlent]]</p>\
    [[*branch-more:htmlent]]\
</div>' ); 
```

`[[+tvname]]`在您的 getResources 块中使用是正确的，因为模板变量值正在输出到占位符，而不是通过模板变量标签进行解析。

# sql - 如何编辑具有重复键的行

> ID：12478595
> 
> 赞同：3
> 
> 时间：2012-09-18T14:02:16.240
> 
> 标签：sql, sql-server, sql-server-2008

我对 SQL 不是很有经验。我需要手动编辑表 [ ] 中在 [ ] 和 [ ]`TABLE_A`中具有相等值的行。我已经知道如何过滤表的编辑视图，我只需要正确的查询。`COLUMN_1``COLUMN_2`

例子：

```
 COLUMN_1 COLUMN_2 COLUMN_3
    A       100       3
    C       354       2
    A       999       3
    A       100       1
    C       255       1
    B       600       5
    B       600       5
    B       600       7 
```

我需要查询返回第 1、4、6、7 和 8 行。所以它应该返回如下表：

```
 COLUMN_1 COLUMN_2 COLUMN_3
    A       100       3
    A       100       1
    B       600       5
    B       600       5
    B       600       7 
```

我试过谷歌搜索，这是我能得到的最接近的东西，所以这就是我现在正在做的，但这不是我需要的。

```
SELECT COLUMN_1, COLUMN_2, COUNT(*) AS TotalCount
  FROM TABLE_A
 GROUP BY COLUMN_1, COLUMN_2
HAVING (COUNT(*) > 1)
 ORDER BY TotalCount DESC 
```

该查询的问题在于它不会返回每一行。它返回如下内容：

```
 COLUMN_1 COLUMN_2 TotalCount
    A       100        2
    B       600        3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T14:10:31.667

您可以使用[Window 函数](http://msdn.microsoft.com/en-us/library/ms189461.aspx)执行此操作-

```
;WITH CTE AS
(   SELECT  Column_1, 
            Column_2, 
            Column_3, 
            COUNT(*) OVER(PARTITION BY Column_1, Column_2) AS TotalDupes
    FROM    Table_A
)
SELECT  *
FROM    CTE
WHERE   TotalDupes > 1 
```

# javascript - javascript构造函数之间的区别

> ID：12478596
> 
> 赞同：0
> 
> 时间：2012-09-18T14:02:17.870
> 
> 标签：javascript, constructor

这有什么区别...

```
function Person(name, age, sex) {
  this.name = name;
  this.age = age;
  this.sex = sex;
} 
```

和这个...

```
function Person(name) {
  this.name = name;
  this.age = age;
  this.sex = sex;
} 
```

和这个...

```
function Person() {
  this.name = name;
  this.age = age;
  this.sex = sex;
} 
```

谢谢！

* * *

大卫，我有一段我正在构建的游戏的代码，看起来像这样......

```
function Player(node){
    this.node = node;
    this.grace = false;
    this.replay = 3; 
    this.shield = 3;
    this.respawnTime = -1;
  ...
return true;
} 
```

并且它不会返回参考错误。它是我正在构建的 javascript 游戏中玩家的对象...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:23:19.227

正如 Brett 所说，第二个和第三个构造函数会将任何全局变量分配给新 Person 实例的属性。但是，您仍然可以使用可能传递给构造函数的任何参数：

```
function Person()//no args
{
    //depending on which value is available:
    //prop = n-th argument OR global variable OR undefined
    this.name = arguments[0] || window.name || undefined;
    this.age = arguments[1] || window.age || undefined;
    this.sex = arguments[2] || window.sex || undefined;
}
var parrot = new Person('polly',1,'M');
console.log(parrot.name);//polly
var noSex = new Person('Joe',99);//if no global sex is set:
console.log(noSex.sex);//undefined
var sex = 'F';
var jane = new Person('Jane',25);
console.log(jane.sex);//F 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T14:04:37.983

第一个依靠通过参数设置的局部变量来设置它的实例变量/属性，第三个依靠全局变量来设置它的属性，第二个是混合的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:04:35.727

第一个是有效的，你用构造函数中发送的参数初始化你的局部变量。其余的并没有真正的意义。

在第二个中，您将参数与您可以访问的其他一些变量混合在一起，您只使用参数启动名称。

第三个是基于可访问变量，但没有一个是作为参数给出的，我从来没有看到使用第二个和第三个选项有用的东西..

# jquery - 2列灵活布局

> ID：12478597
> 
> 赞同：2
> 
> 时间：2012-09-18T14:02:24.833
> 
> 标签：jquery, css, css-float

我有 2 列结构。使用的 CSS 如下：

```
.div-left
{
position: relative;
float: left;
width: 18%;
margin: 1;
}

.div-right
{
position: relative;
float: right;
width: 81%;
margin: 0;
} 
```

从某种意义上说，我想要一个灵活的结构，当一列折叠时，另一列应该自动占用空间。

我试图隐藏第一列，如下所示：

```
$("#test").animate({width: 'toggle'}); 
```

这隐藏了我的第一列，但右列没有占用第一列释放的空间。

我用javascript从这里切换（http://www.learningjquery.com/2009/02/slide-elements-in-different-directions）。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:35:32.943

另一种解决方案：使用 CSS 过渡（我之所以提到它是因为您在标签中列出了 CSS3）和`.expanded`/`.collapsed`类。然后使用 jQuery 来切换类。

[**演示**](http://codepen.io/thebabydino/pen/ixbyd)（单击一列使其展开/返回初始宽度）

HTML：

```
<div class='left'></div>
<div class='right'></div> 
```

CSS：

```
* { margin: 0; }
div { min-height: 10em; transition: linear 1s; }
.left {
  float: left;
  width: 18%;
  background: crimson;
}
.right {
  float: right;
  width: 81%;
  background: dodgerblue;
}
.expanded { width: 100%; }
.collapsed { width: 0%; } 
```

jQuery：

```
$('div').click(function(){
    $(this).toggleClass('expanded').siblings().toggleClass('collapsed');
}); 
```

# java - 如何在 Android 中从单独的线程中设置文本

> ID：12478600
> 
> 赞同：4
> 
> 时间：2012-09-18T14:02:27.067
> 
> 标签：java, android, multithreading

我想从一个线程中设置文本。

这是我的线程代码：

```
private class GenerateThread implements Runnable {
    public void run(){
            // generate the first music
            music = generate(prevmusic, prevmusic.length);
            prevmusic = music;

            // write the midi
            writeMidi(music, song);
            textOut.setText("Initialising...");
            });
    }
} 
```

在我的主要代码中，我使用

```
Thread t = new Thread(new GenerateThread());
    t.start(); 
```

它不允许我从线程内设置文本。在互联网上的一些帖子之后，我尝试使用处理程序，但这给了我错误，我认为我以这种方式双重定义 Runnable。

处理程序处理程序（在 main 之前）

```
private class GenerateThread implements Runnable {
    public void run(){
            handler.post(new Runnable() {
            // generate the first music
            music = generate(prevmusic, prevmusic.length);
            prevmusic = music;

            // write the midi
            writeMidi(music, song);
            textOut.setText("Initialising...");
            });
    }
} 
```

如何从 Thread 中设置文本？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T14:30:47.383

除此之外`runOnUiThread`，[`View#post(Runnable)`](https://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29)我更喜欢这里，因为您不需要对外部 Activity ( `MyActivity.this.runOnUiThread()`) 的丑陋引用。

```
private class GenerateRunnable implements Runnable {
    public void run() {
        // this code is executed in a background thread.
        // generate the first music
        music = generate(prevmusic, prevmusic.length);
        prevmusic = music;

        // write the midi
        writeMidi(music, song);
        textOut.post(new Runnable() {
            public void run() {
                // this code is executed on the UI thread.
                textOut.setText("Initialising...");
            }
        });
    }
}

@Override
protected void onResume() {
    super.onResume();
    new Thread(new GenerateRunnable()).start();
} 
```

也不要混淆`Runnable`和`Thread`。A`Runnable`只是一个带有`run()`方法的普通类。它可以并且经常在新的`Thread`. 如果你愿意，你也可以像这样制作`GenerateThread`一个真实的`Thread`：

```
private class GenerateThread extends Thread {
    @Override
    public void run() {
        // code here.
    }
}
// start somewhere
new GenerateThread().start(); 
```

除了使用经典之外，`Thread`您还可以考虑使用`AsyncTask`，因为它专门用于执行长时间运行并且需要在之后或有进展时更新 UI 的任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T14:08:56.547

只能从 UI 线程更新 UI。 [runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)将允许您在 UI 线程下一次执行时运行它。您可以执行以下操作：

```
runOnUiThread(new Runnable() {
  public void run() {
      textOut.setText("Initialising...");
  }
}); 
```

**编辑：**

```
private class GenerateThread implements Runnable {
   public void run(){
      // generate the first music
      music = generate(prevmusic, prevmusic.length);
      prevmusic = music;

      // write the midi
      writeMidi(music, song);

      // Update the UI
      MyActivity.this.runOnUiThread(new Runnable() {
        public void run() {
          textOut.setText("Initialising...");
        }
      });
   }
} 
```

# java - 小程序的休息客户端？

> ID：12478601
> 
> 赞同：1
> 
> 时间：2012-09-18T14:02:29.033
> 
> 标签：java, spring, rest, applet, httpurlconnection

Applets 是否有“事实上的”REST 客户端？我需要将杰克逊映射为 JSON 的 POJO 发送到 Spring MVC 控制器。显而易见的选择是 Spring Android，因为它具有功能的缩减版本`RestTemplate`，但它显然也具有一些特定于确定正在运行的 Android 版本的功能。

有没有简单的方法可以做到这一点？

我尝试过使用“手动”执行此操作`HTTPUrlConnection`，但我从未在控制器中看到请求出现：

```
URL url = new URL("http", getDomain(), 8080, getBaseUrl()+"save");
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.setRequestProperty("Cookie", "JSESSIONID=" + getSessionId());

connection.setDoOutput(true);
connection.setRequestProperty("Content-Type", "application/json");
connection.setRequestProperty("Accept", "application/json");
connection.setRequestMethod("POST");    
connection.connect();           

OutputStream out = connection.getOutputStream();

mapper.writeValue(out, state);

out.flush();
out.close();
connection.disconnect(); 
```

# jsf - 带有单选按钮的 JSF 数据表

> ID：12478602
> 
> 赞同：0
> 
> 时间：2012-09-18T14:02:29.407
> 
> 标签：jsf, datatable, radio-button

我想使用带有下表的 JSF 创建一个网页：

```
Item 1 | ( ) good ( ) ok ( ) bad
Item 2 | ( ) good ( ) ok ( ) bad
Item 3 | ( ) good ( ) ok ( ) bad
[…] 
```

选中单选按钮后，我立即想提交并处理评级。dataTable 的当前代码如下所示：

```
<h:dataTable value="#{bean.list}" var="item">
    <h:column>
        <h:outputText value="#{item.title}"/>
    </h:column>
    <h:column>
        <h:form>
        <h:selectOneRadio id="rate" value="#{bean.rate}">
            <f:selectItem itemValue="1" itemLabel="good" />
            <f:selectItem itemValue="0" itemLabel="ok" />
            <f:selectItem itemValue="-1" itemLabel="bad" />
            <f:ajax event="click" execute="rate" />
        </h:selectOneRadio>
        </h:form>
    </h:column>
</h:dataTable> 
```

我现在面临的问题：我需要确定哪个项目实际被评分。有人可以提示我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:12:02.793

您可以在多种技术中进行选择。例如，您可以`Map`在 bean 中 使用 a `<h:selectOneRadio value="#{bean.ratePerItem[item]}"`

`Map<ItemClass, Integer> ratePerItem;`

这样，您必须遍历地图寻找值。满足您需求的一种更简单的方法可能是使用`h:inputHidden`存储项目的 a 。

或者，也许更好，`f:setPropertyActionListener`. 这取决于你到底想要什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:09:05.500

将“rate”属性添加到 Item 类将帮助您轻松确定对哪个 Item 进行评级。

```
<h:selectOneRadio id="rate" value="#{bean.rate}"
            <f:selectItem itemValue="1" itemLabel="good" />
            <f:selectItem itemValue="0" itemLabel="ok" />
            <f:selectItem itemValue="-1" itemLabel="bad" />
            <f:ajax event="click" execute="rate" />
        </h:selectOneRadio> 
```

把上面的代码改成

```
<h:selectOneRadio id="rate" value="#{item.rate}">
            <f:selectItem itemValue="1" itemLabel="good" />
            <f:selectItem itemValue="0" itemLabel="ok" />
            <f:selectItem itemValue="-1" itemLabel="bad" />
            <f:ajax event="click" execute="rate" />
        </h:selectOneRadio> 
```

# javascript - Javascript函数的意外结果

> ID：12478611
> 
> 赞同：1
> 
> 时间：2012-09-18T14:03:01.413
> 
> 标签：javascript, jquery, variables, conditional-statements

我是 JavaScript 的新手，但如果有人能告诉我我缺少什么，我将不胜感激。

基本上，我正在尝试从两个输入中测试大值。这是我到目前为止所做的：

```
$('#than_stock_submit').click(function() {
    var pur_rate = $('#pur_rate input').val(),
        sell_rate = $('#sell_rate input').val(),
        msg_div = $('#sell_rate .msg');

    if(greater_than(sell_rate, pur_rate, msg_div)==false){return false}
});

function greater_than(a, b, msg_div){
    msg_div.show().html( '' );
    if(a > b){
        msg_div.show().html( '<p class="success">Sell Rate is good</p>' );
        return true;
    } else {
        msg_div.show().html( '<p class="error">Sell Rate should be increased</p>' );
        return false;
    }
} 
```

我检查了几个值。当我使用小于 1000 的值进行测试并且两个值类似 b=500 和 a=5000 或 b=100 和 a=1000 时，它就可以工作了。其他值不起作用。

其他测试值是：

1.  a=751, b=750 并且结果=true
2.  a=0751, b=750 并且结果=假
3.  a=551, b=750 和结果=假
4.  a=1051, b=750 并且结果=假
5.  a=7500, b=750 并且结果=真
6.  a=6000, b=600 并且结果=真

我还检查了控制台，例如：console.log(a + b);

控制台窗口的结果类似于 1000750（当值类似于 a=1000 & b=750）或 0752750（当值类似于 a=0752 & b=750 时）。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T14:05:10.963

您应该在比较之前将字符串转换为数字（使用时它们会变成字符串`.val()`）。使用`parseInt`或`parseFloat`：

```
function greater_than(a, b, msg_div){
    a = parseInt(a, 10);
    b = parseInt(b, 10);
    // etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:04:12.760

您正在比较字符串并且`"1000">"99"`是错误的。

解决方案是首先使用[parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)或[parseFloat](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)解析您的数字：

```
 var pur_rate = parseFloat($('#pur_rate input').val()); 
```

或者

```
 var pur_rate = parseInt($('#pur_rate input').val(), 10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:07:53.793

读取输入值返回字符串。因此，如果您将字符串与字符串进行比较，则它是 ASCII 比较，而不是数字比较。请使用`parseInt(value, 10);`永远不要忘记基数！;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T14:25:43.570

这是一个更强大的解决方案（您正在做的是字符串比较而不是数字比较）。

```
function greater_than(a,b) {
  // first, convert both passed values to numbers
  // (or at least try)
  var nA = new Number(a),
      nB = new Number(b);

  // check if they were converted successfully.
  // isNaN = is Not a Number (invalid input)
  if (!isNan(nA) && !isNaN(nB)) {
    // now go ahead and perform the check
    msg_div.empty().show();
    if (nA > nB) {
      $('<p>',{'class':'success'})
        .text('Sell Rate is good')
        .appendTo(msg_div);
      return true;
    } else {
      $('<p>',{'class':'error'})
        .text('Sell Rate should be increased')
        .appendTo(msg_div);
    }
  }
  // In case you wanted to handle showing an error for
  // invalid input, you can uncomment the following lines
  // and take the necessary action(s)
  else{
    /* one of them was not a number */
  }
  return false;
} 
```

请注意，我使用 jQuery 来构建`<p>`您添加的内容。我也用[`.empty()`](http://api.jquery.com/empty/)assingning 代替`.html('')`。

还有一些文档：

*   [`Number`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number)
*   [`parseFloat`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)
*   [`parseInt`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)
*   [`isNaN`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/isNaN)

# ruby-on-rails - 未定义的方法 rails 3.2 的 _index_path

> ID：12478612
> 
> 赞同：0
> 
> 时间：2012-09-18T14:03:05.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3

好的，这继续让我感到困惑：

1）这是在我的控制器（personalias_controller.rb）

```
def new
  @personalia = Personalia.new
end 
```

2）我有一个名为personia.rb的模型

3）我有

```
resources :personalias 
```

在路线.rb

当我尝试呈现个性表单时（从views/personalias/new.html.erb中：

```
<%= form_for @personalia do |f| %> 
```

这让我发疯了：-|

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T14:19:09.227

这可能是因为personias不是personalia的复数，你可以在控制台中检查这个，`"personalia".pluralize`你可以添加一个变形并重新启动你的应用程序，方法如下：

配置 > 初始化程序 > inflections.rb

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.irregular 'personalia', 'personalias'
end 
```

# qt - 在QT中反转光标颜色

> ID：12478615
> 
> 赞同：1
> 
> 时间：2012-09-18T14:03:11.447
> 
> 标签：qt, user-interface, colors, cursor, inverse

我正在学习 QT 编程，我想知道是否有一种简单的方法可以动态地将光标颜色设置为与光标下的颜色完全相反。我假设在编译期间游标的确切形状是未知的，并且游标可以通过资源重载。

只需给我一些大方向，无需为我编写完整的工作代码 :)

谢谢你，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:35:37.417

我可以建议在 Qt 论坛上查看这个论坛帖子：[如何读取 Widget 上像素的颜色？](http://www.qtcentre.org/threads/26241-How-to-read-a-color-of-a-pixel-on-a-Widget)

在这里，他们解释说，在某个像素处获取颜色的最佳方法是使用**QImage::pixel(const QPoint & position)**函数。此函数返回给定位置的像素颜色。在您的情况下，您需要将此函数传递给鼠标光标的位置。

要跟踪光标的位置，请使用**QCursor::pos()**函数，或者如果您需要随时跟踪鼠标的位置，您可以根据需要覆盖 QMouseEvent 类中的函数，例如**pos() 或 globalPos()**。

现在，由于您知道光标的位置，光标在特定位置的颜色，您只需创建一个新的**QCursor并使用****QApplication::changeOverrideCursor(QCursor)**和新创建的光标将该光标设置到应用程序中。

其中一些方法的处理时间成本很高，因此我建议您仔细考虑您的应用程序试图实现的目标。

希望能给你一个起点。祝你好运。

# javascript - 如何自动填写此密码，弹出网页表单？

> ID：12478617
> 
> 赞同：2
> 
> 时间：2012-09-18T14:03:12.230
> 
> 标签：javascript, html, forms, greasemonkey, basic-authentication

我正在尝试自动填写弹出/警报网络表单：
![弹出表单](../Images/b87ecb7fedeed10c839811bc163a09d0.png)

到目前为止，Greasemonkey 似乎可以为我解决这个问题，但我的 javascript 几乎不存在。

我遇到过[Xavi 的自动填充 Greasemonkey 脚本](http://userscripts.org/scripts/show/39313)。虽然在页面中嵌入表单时它似乎工作得很好，但我不确定它是否能够弹出/警报窗口（对话框）。

我也遇到过[curl 的 formfind.pl](https://github.com/bagder/curl/blob/master/perl/contrib/formfind)，但它有一半时间会产生错误，然后是弹出/警报窗口的问题。

有更好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T01:45:09.210

该弹出对话框用于[“基本身份验证”](http://en.wikipedia.org/wiki/Basic_access_authentication)，它发生在浏览器和 Web 服务器之间的低级别。它发生在网页加载**之前以及 Greasemonkey 有任何可能看到它之前。**

一个 Firefox 附加组件可以操纵这种形式，但编写起来要复杂得多。无论如何，已经有几个附加组件可以帮助解决这个问题。我使用[***Secure Login***](https://addons.mozilla.org/en-US/firefox/addon/secure-login/)，它填补了 Firefox 密码管理中的一些漏洞，简化了登录，甚至可以为某些网站的登录状态制作书签。

对于其他可能性，请参阅[“如何自动化基本身份验证密码确认对话框”](https://superuser.com/q/46191/41023)的答案和类似问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:14:30.250

身份验证弹出类型位于任何浏览器的所有元素之上。弹出窗口出现后，您无法执行任何操作，除了确定和取消。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-18T14:12:24.270

此提示将在您的页面中的任何源代码行执行之前弹出，因此我看不出如何预填充它。

# git - 此设置的正确 git 工作流程？

> ID：12478620
> 
> 赞同：1
> 
> 时间：2012-09-18T14:03:18.577
> 
> 标签：git, workflow, git-workflow

所以我们有我们的`template_site`

这基本上是我们构建的任何网站的前端基础。

我们有我们的`cms`

这是站点的后端并且驻留在`template_site/cms`它自己的存储库中，因为我们经常使用它而不使用`template_site`它

我们有我们的模块，其中包含驻留的文件

`template_site/(all over the place)`和`cms/modules/(name of module)`

本质上，我们想要的是在它自己的 repo 中 拥有 The
在它自己的 repo 中。然后对于我们创建的每个模块，都将其作为另一个存储库的分支。但是我们只希望该存储库包含特定于模块的文件和对文件的更改，以便我们可以将模块拉入现有项目并让它只影响那些文件。`cms`
`template_site``cms_modules`

问题是基本上所有部分都是链接的，但是我们希望能够在处理模块时拉入对 的任何更改`template_site`，并拉入对`cms`

这种设置的原因是，对于我们创建的每个站点，我们都希望将其克隆`template_site`到它自己的存储库中，然后我们可以根据需要对其进行自定义。

我们应该怎么做？

或者这种设置有更好的工作流程吗？

我可以看到的适当设置是：

将`cms_modules`存储库作为“超级项目”
让主分支中没有模块。
添加`cms`为子模块
添加`template_site`为子模块

这样我们就可以将 repo 克隆到它自己的存储库中并解决它，并且仅在需要`cms_modules`时才初始化子模块。`template_site`但是我在这里可以看到的唯一问题是我们希望`cms_modules`副本（对于新站点）或分支（对于新模块）跟踪其根目录中的任何新文件，但也跟踪子模块内的任何更改或新文件，而不是他们各自的存储库会跟踪它们。

然后，如果存储库有更新，`template_site`我们`cms`可以 cd 进入它们各自的目录并发布更新，但同样我们希望将我们更改的任何文件的合并跟踪到存储`cms_modules`库而不是相应的子模块。

如果我们想添加另一个模块，我们可以合并到该模块的分支中。

我们怎么能设置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T00:03:16.573

**存储库结构：** `git submodules`似乎最适合您使用不受您控制的外部存储库的情况。这个想法是您正在当前存储库中移植不同的存储库，但部分技巧是外部存储库中分支的状态*将包含*子模块“当前版本”的提交哈希。换句话说，如果没有对外部树的额外提交，外部树将不会在内部树中显示进度。这对于外部案例很有意义——我不希望我的构建由于我使用的库中的开发而被破坏——但在你的案例中似乎有很多簿记。

如果您要为每个站点创建一个全新的存储库，那么子模块的更直观的用法是，然后拥有`cms`一个适当的子模块。这样，每个站点都可以与 CMS 文件夹的不同快照进行交互，并且您只有在准备好时才推出新版本。

**存储库数量：**因为您的数据实际上在您的控制之下，所以拥有一个存储库对我来说是最有意义的。例如，如果其中一个目录足够大（以兆字节为单位），或者如果您的一部分同事只能访问其中一个或另一个，那么您可以为单独的存储库提出一个很好的论据，但除此之外，保留几乎没有优势存储库部分分开。

**Branch per module:** I tend to agree with the Stack Overflow answer [here](https://stackoverflow.com/questions/466303/git-branches-with-completely-different-content) that recommends *against* putting entirely different content in each branch. In that condition, unless you create merge commits automatically or frequently, there will be no single branch that contains multiple modules (or all of your modules). There's nothing in git that prevents it from working that way, but it's atypical.

**My preferred branch structure:** Create a `master` branch that contains all modules and all sites. You can still create a branch per module or site to ease development, but once the code looks good, merge the branch into the master. Haven't touched a module in a while? Delete the branch--you can always recreate it later.

Hope that helps!

# python - 如何使用 Bottlenose 在亚马逊上获取产品价格

> ID：12478624
> 
> 赞同：0
> 
> 时间：2012-09-18T14:03:25.827
> 
> 标签：python, search, amazon, bottlenose

我正在使用`BottleNose`它，这是一个很好的选择，因为它的简单性并且它不需要`lxml`不想安装在 OpenSuse 12.2 上的库。

这是代码：

```
amazon = bottlenose.Amazon("****", "****","****")

response = amazon.ItemSearch(Keywords="the product searched", SearchIndex="All") 
```

我的问题是：是否可以获取产品价格？

我想做的是向客户展示他要购买的产品是否比具有相同名称且只有名称的产品更便宜或更贵。

更新：我尝试查看生成的 XML 文件，当使用 AptanaStudio 对其进行格式化时，没有名为**Price**的标签，有一个名为 ASIN 的东西，我如何使用这个值来获取价格？注意：即使使用这个模块[Amazon Simple Product API](https://github.com/yoavaviram/python-amazon-simple-product-api)它也没有工作！仅当您有 ItemID 且不进行一般查找时，才会返回价格！

# c - 在C中的动态内存中对齐数组的开头

> ID：12478628
> 
> 赞同：3
> 
> 时间：2012-09-18T14:03:43.760
> 
> 标签：c, arrays, dynamic-memory-allocation, memory-alignment, calloc

> **可能重复：**
> [对齐的内存管理？](https://stackoverflow.com/questions/5061392/aligned-memory-management)

我有一个数组，我要这样声明

```
int * myarray;
int num_of_element;

myarry = (int*) calloc(num_of_elements, sizeof(int)); 
```

int 的大小是 4 个字节，但是我想确保我的数组从 8 个字节的边界开始 - 所以我每次可以有效地加载两个值。有什么不同的方法或我可以做的其他事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:05:48.667

有几种方法。

2.  过度分配，并将返回的地址四舍五入到所需的对齐方式。

3.  定义一个具有所需对齐类型的联合，通常是`double`. 这需要低级知识，但在您想要分配数组时不是最佳选择。

[此外，您不应强制转换`malloc()`in C](https://stackoverflow.com/a/605858/28169)的返回值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T14:06:20.933

你试过了`posix_memalign`吗？

> 函数 posix_memalign() 分配`size`字节并将分配的内存地址放在`*memptr`. 分配内存的地址将是 的倍数`alignment`，必须是 2 的幂和 的倍数`sizeof(void *)`。

例子：

```
if (posix_memalign(&myarray, 8, num_of_elements*sizeof(int)) != 0) {
    // failed
} 
```

见[http://pubs.opengroup.org/onlinepubs/009696699/functions/posix_memalign.html](http://pubs.opengroup.org/onlinepubs/009696699/functions/posix_memalign.html)

Linux posix_memalign 手册页还记录了aligned_alloc() (c11), memalign() (obsolete)：

[https://www.kernel.org/doc/man-pages/online/pages/man3/posix_memalign.3.html](https://www.kernel.org/doc/man-pages/online/pages/man3/posix_memalign.3.html)

# android - 如何使用带有复杂 wsdl 文件的 KSoap2-android 设置 Android-Web 服务？

> ID：12478630
> 
> 赞同：0
> 
> 时间：2012-09-18T14:03:50.900
> 
> 标签：android, web-services, wsdl, android-ksoap2, complextype

**背景：**

我已按照以下教程进行操作： http: [//drclawx.wordpress.com/2011/06/24/77/](http://code.google.com/p/android-ws-client/wiki/androidWSClientHowToV12)

我只设法使用 hello(msg) 方法工作：

```
 String NAMESPACE = "http://tempuri.org/" // instead of tempuri.org (no slash)
 private static final int SOAP_VERSION = SoapEnvelope.VER11; 
```

但是对于常规的 helloWorld，我得到以下信息，我真的不知道为什么......

```
 org.xmlpull.v1.XmlPullParserException:unexpected type(position:END_DOCUMENT null@1:0 in java.io.InputStreamReader@40570bf8 
```

我还使用过：[android-ws-client](http://code.google.com/p/android-ws-client/wiki/androidWSClientHowToV12)和生成的存根文件，以及 android libs 并尝试在我的项目中使用它。我已经设置好了，但是当我运行它时，我得到一个状态 404 被返回，因此一个空响应，我不知道为什么。

所以我尝试开始使用 ksoap2-android ......

我还花了很多时间在堆栈溢出上，试图找到指向教程和其他建议的链接。

**问题：**

我正在使用的 WSDL 文件相当复杂——我希望能够使用其中的一种方法——使用 KSoap2-android——但我对指定命名空间、soap_action、url 等内容感到困惑。（我的尝试低于 WSDL 定义）。

请查看以下 WSDL 文件：

此 wsdl 文件位于：[http://bcgdev4.bcg.local:12970](http://bcgdev4.bcg.local:12970) （您将无法加载上面的链接，因此请参阅下面的 wsdl）：

```
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"   xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:tns="http://prometheus" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:i0="http://tempuri.org/" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" name="Commandor" targetNamespace="http://prometheus">
<wsdl:import namespace="http://tempuri.org/" location="http://bcgdev4.bcg.local:12970/?wsdl=wsdl0"/>
<wsdl:types/>
<wsdl:service name="Commandor">
<wsdl:port name="NetTcpBinding_ICommands" binding="i0:NetTcpBinding_ICommands">
<soap12:address location="net.tcp://bcgdev4:11970/"/>
<wsa10:EndpointReference>
<wsa10:Address>net.tcp://bcgdev4:11970/</wsa10:Address>
<Identity xmlns="http://schemas.xmlsoap.org/ws/2006/02/addressingidentity">
<Spn>host/BCGDEV4.BCG.local</Spn>
</Identity>
</wsa10:EndpointReference>
</wsdl:port>
<wsdl:port name="BasicHttpBinding_ICommands" binding="i0:BasicHttpBinding_ICommands">
<soap:address location="http://bcgdev4.bcg.local:13970/mobile"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

在第一个标签结束的地方之后——你会看到：

```
<wsdl:import namespace="http://tempuri.org/" location="http://bcgdev4.bcg.local:12970/?wsdl=wsdl0"/> 
```

在[http://bcgdev4.bcg.local:12970/?wsdl=wsdl0](http://bcgdev4.bcg.local:12970/?wsdl=wsdl0) - 您将获得以下 wsdl 定义：

您也无法访问此内容，因此请查看以下内容：

*我想访问**RunCommandMobile**方法，它接受一个字符串并返回一个字符串。*

```
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:tns="http://tempuri.org/" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" targetNamespace="http://tempuri.org/">
<wsp:Policy wsu:Id="NetTcpBinding_ICommands_policy">
<wsp:ExactlyOne>
<wsp:All>
<msb:BinaryEncoding xmlns:msb="http://schemas.microsoft.com/ws/06/2004/mspolicy/netbinary1"/>
<sp:TransportBinding xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
<wsp:Policy>
<sp:TransportToken>
<wsp:Policy>
<msf:WindowsTransportSecurity xmlns:msf="http://schemas.microsoft.com/ws/2006/05/framing/policy">
<msf:ProtectionLevel>EncryptAndSign</msf:ProtectionLevel>
</msf:WindowsTransportSecurity>
</wsp:Policy>
</sp:TransportToken>
<sp:AlgorithmSuite>
<wsp:Policy>
<sp:Basic256/>
</wsp:Policy>
</sp:AlgorithmSuite>
<sp:Layout>
<wsp:Policy>
<sp:Strict/>
</wsp:Policy>
</sp:Layout>
</wsp:Policy>
</sp:TransportBinding>
<msf:Streamed xmlns:msf="http://schemas.microsoft.com/ws/2006/05/framing/policy"/>
<wsaw:UsingAddressing/>
</wsp:All>
</wsp:ExactlyOne>
</wsp:Policy>
<wsdl:types>
<xsd:schema targetNamespace="http://tempuri.org/Imports">
<xsd:import schemaLocation="http://bcgdev4.bcg.local:12970/?xsd=xsd0" namespace="http://tempuri.org/"/>
<xsd:import schemaLocation="http://bcgdev4.bcg.local:12970/?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/"/>
</xsd:schema>
</wsdl:types>
<wsdl:message name="ICommands_RunCommand_InputMessage">
<wsdl:part name="parameters" element="tns:RunCommand"/>
</wsdl:message>
<wsdl:message name="ICommands_RunCommand_OutputMessage">
<wsdl:part name="parameters" element="tns:RunCommandResponse"/>
</wsdl:message>
<wsdl:message name="ICommands_RunCommandCompress_InputMessage">
<wsdl:part name="parameters" element="tns:RunCommandCompress"/>
</wsdl:message>
<wsdl:message name="ICommands_RunCommandCompress_OutputMessage">
<wsdl:part name="parameters" element="tns:RunCommandCompressResponse"/>
</wsdl:message>
<wsdl:message name="ICommands_RunCommandMobile_InputMessage">
<wsdl:part name="parameters" element="tns:RunCommandMobile"/>
</wsdl:message>
<wsdl:message name="ICommands_RunCommandMobile_OutputMessage">
<wsdl:part name="parameters" element="tns:RunCommandMobileResponse"/>
</wsdl:message>
<wsdl:message name="ICommands_RunCommandMobileCompress_InputMessage">
<wsdl:part name="parameters" element="tns:RunCommandMobileCompress"/>
</wsdl:message>
<wsdl:message name="ICommands_RunCommandMobileCompress_OutputMessage">
<wsdl:part name="parameters" element="tns:RunCommandMobileCompressResponse"/>
</wsdl:message>
<wsdl:portType name="ICommands">
<wsdl:operation name="RunCommand">
<wsdl:input wsaw:Action="http://tempuri.org/ICommands/RunCommand" message="tns:ICommands_RunCommand_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/ICommands/RunCommandResponse" message="tns:ICommands_RunCommand_OutputMessage"/>
</wsdl:operation>
<wsdl:operation name="RunCommandCompress">
<wsdl:input wsaw:Action="http://tempuri.org/ICommands/RunCommandCompress" message="tns:ICommands_RunCommandCompress_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/ICommands/RunCommandCompressResponse" message="tns:ICommands_RunCommandCompress_OutputMessage"/>
</wsdl:operation>
<wsdl:operation name="RunCommandMobile">
<wsdl:input wsaw:Action="http://tempuri.org/ICommands/RunCommandMobile" message="tns:ICommands_RunCommandMobile_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/ICommands/RunCommandMobileResponse" message="tns:ICommands_RunCommandMobile_OutputMessage"/>
</wsdl:operation>
<wsdl:operation name="RunCommandMobileCompress">
<wsdl:input wsaw:Action="http://tempuri.org/ICommands/RunCommandMobileCompress" message="tns:ICommands_RunCommandMobileCompress_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/ICommands/RunCommandMobileCompressResponse" message="tns:ICommands_RunCommandMobileCompress_OutputMessage"/>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="NetTcpBinding_ICommands" type="tns:ICommands">
<wsp:PolicyReference URI="#NetTcpBinding_ICommands_policy"/>
<soap12:binding transport="http://schemas.microsoft.com/soap/tcp"/>
<wsdl:operation name="RunCommand">
<soap12:operation soapAction="http://tempuri.org/ICommands/RunCommand" style="document"/>
<wsdl:input>
<soap12:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap12:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="RunCommandCompress">
<soap12:operation soapAction="http://tempuri.org/ICommands/RunCommandCompress" style="document"/>
<wsdl:input>
<soap12:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap12:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="RunCommandMobile">
<soap12:operation soapAction="http://tempuri.org/ICommands/RunCommandMobile" style="document"/>
<wsdl:input>
<soap12:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap12:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="RunCommandMobileCompress">
<soap12:operation soapAction="http://tempuri.org/ICommands/RunCommandMobileCompress" style="document"/>
<wsdl:input>
<soap12:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap12:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:binding name="BasicHttpBinding_ICommands" type="tns:ICommands">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="RunCommand">
<soap:operation soapAction="http://tempuri.org/ICommands/RunCommand" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="RunCommandCompress">
<soap:operation soapAction="http://tempuri.org/ICommands/RunCommandCompress" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="RunCommandMobile">
<soap:operation soapAction="http://tempuri.org/ICommands/RunCommandMobile" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="RunCommandMobileCompress">
<soap:operation soapAction="http://tempuri.org/ICommands/RunCommandMobileCompress" style="document"/> 
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
</wsdl:definitions> 
```

**问题：**

*使用 KSoap2-Android：如何使用 web 服务调用 RunCommandMobile？* 目前我有以下内容，这是不对的：

```
private static final String METHOD_NAME = "RunCommandMobile";
private static final String NAMESPACE = "http://tempuri.org/";
private static final String SOAP_ACTION = "http://tempuri.org/ICommands/RunCommandMobile";
private static final String URL = "http://bcgdev4.bcg.local:12970/?wsdl=wsdl0";
private static final int SOAP_VERSION = SoapEnvelope.VER11; 
```

这是调用该方法的代码片段：

```
private void hello(String message)
{
    try
    {
        //SoapObject request = new SoapObject(NAMESPACE, "Hello");
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("message", message);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SOAP_VERSION);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        //androidHttpTransport.call("http://tempuri.org/IService1/Hello",envelope);
        androidHttpTransport.call(SOAP_ACTION,envelope);
        Object result = (Object)envelope.getResponse();

        String resultData = result.toString();
        soapMessage.setText(resultData);
    } 
    catch (IOException e)
    {
        soapMessage.setText(e.toString());
        e.printStackTrace();
    } 
    catch (XmlPullParserException e)
    {
        soapMessage.setText(e.toString());
        e.printStackTrace();
    }
} 
```

我已将其设置为我的 Activity 中的按钮单击 - 设置soapMessage TextView。我只是得到一个`Exception END_DOCUMENT - XMLPullParserExceptiona`，因为 KSOAP2-Android 是一个 jar，我无法“看到”看到实际的 XML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:34:21.863

找出我的问题的根源：***除了这一行之外，一切都是正确的 -***

```
private static final String URL = "http://bcgdev4.bcg.local:12970/?wsdl=wsdl0"; 
```

这需要是：

```
 private static final String URL = "http://bcgdev4.bcg.local:13970/mobile"; 
```

因为它需要指向期望肥皂信封的 URL，而不是 WSDL 文件 url。

如果此信息对其他人没有用，我很抱歉，因为它是一个非常具体的案例，但它确实解决了我遇到的问题。谢谢您的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T04:31:59.750

XML Pull Parser Error 意味着您的 WSDL 存在错误。或者您的端点可能将肥皂消息指向预期 WSDL 的位置，或者相反。当我调试我的第一个 XML Pull 解析器时，它是三件事的组合：在 android 中使用 ksoap2 错误地构建了 soap 请求，没有符合 WS-I 的 WSDL，以及混淆了肥皂动作的指向。

为了弄清楚（除了我之外没有人能真正帮助我）我使用了这些链接。（仅供参考，我还下载了visual studio express并组装了一个soap客户端，只用了很短的时间就帮助我用WSDL隔离了WS-I问题）

使用SourceForge的[SoapUI工具](http://www.soapui.org/Getting-Started/your-first-soapui-project.html)

还附上[ksoap2-andriod的](https://github.com/mosabua/ksoap2-android/downloads)[源代码](https://github.com/mosabua/ksoap2-android/downloads)，以便我可以在调试时逐步完成。

您将能够单步执行代码并检查 (F5)。这很有帮助。

一条直接的建议，尝试使用 PropertyInfo 对象设置您的属性...

> ```
>  SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
>         PropertyInfo pi = new PropertyInfo();
>         pi.setName("message");
>         pi.setValue(message);
>         pi.setType(String.class);
>         request.addProperty(pi); 
> ```

我希望这有帮助。

# mysql - 日期查询之间的 MySQL 无法正常工作

> ID：12478633
> 
> 赞同：-1
> 
> 时间：2012-09-18T14:04:04.787
> 
> 标签：mysql

我正在努力完成这项工作，这个查询应该给出两个日期之间最便宜的价格，但不知何故它总是给出最便宜的报价，它有点忽略日期

```
SELECT offer_id 
FROM travel_offers o
WHERE price = (
    SELECT MIN(price) as minprice 
    FROM travel_offers om 
    WHERE 
        o.latitude = om.latitude AND
        o.longitude = om.longitude AND
        (o.time_from BETWEEN '2012-07-01' AND '2012-11-31') 
        AND
        (o.time_to BETWEEN '2012-07-01' AND '2012-11-31')
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:16:04.737

如果经度和纬度很重要，试试这个：

```
SELECT o.longitude, o.latitude, offer_id 
FROM travel_offers o
WHERE o.time_from BETWEEN '2012-07-01' AND '2012-11-31'
      AND o.time_to BETWEEN '2012-07-01' AND '2012-11-31')
      AND price = (
     SELECT MIN(price) as minprice 
     FROM travel_offers om 
     WHERE 
        o.latitude = om.latitude AND
        o.longitude = om.longitude AND
        (om.time_from BETWEEN '2012-07-01' AND '2012-11-31') 
        AND
        (om.time_to BETWEEN '2012-07-01' AND '2012-11-31')
) 
```

如果经度和纬度无关紧要：

```
SELECT offer_id 
FROM travel_offers o
WHERE o.time_from BETWEEN '2012-07-01' AND '2012-11-31'
      AND o.time_to BETWEEN '2012-07-01' AND '2012-11-31')
      AND price = (
     SELECT MIN(price) as minprice 
     FROM travel_offers om 
     WHERE 
        (om.time_from BETWEEN '2012-07-01' AND '2012-11-31') 
        AND
        (om.time_to BETWEEN '2012-07-01' AND '2012-11-31')
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:16:15.270

> 不知何故，它总是提供最便宜的报价，而且它有点忽略了日期

我猜你`1time_from`应该是`2012-07-01`而且`time_to`应该是`2012-11-31`。
因此，您需要像这样更正`WHERE`子句中`1time_from`的条件`1time_to`：

```
WHERE 
    o.latitude = om.latitude AND
    o.longitude = om.longitude AND
    (o.time_from >= '2012-07-01') 
    AND
    (o.time_to <= '2012-11-31') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:12:15.750

```
SELECT offer_id, MIN(price) as minprice 
FROM travel_offers
WHERE 
    time_from BETWEEN '2012-07-01' AND '2012-11-31'
    AND
    time_to BETWEEN '2012-07-01' AND '2012-11-31'
    and 
    time_from <= time_to
group by offer_id
order by minprice
limit 1 
```

# c# - 防止窗口捕捉到屏幕边缘

> ID：12478637
> 
> 赞同：0
> 
> 时间：2012-09-18T14:04:14.797
> 
> 标签：c#, wpf, snapping, aero-snap

> **可能重复：**
> [如何在应用程序中禁用 Aero Snap？](https://stackoverflow.com/questions/2470685/how-do-you-disable-aero-snap-in-an-application)

有没有办法防止 WPF 窗口捕捉到屏幕边缘（即 Aero 捕捉）？

我知道这可以由操作系统中的用户禁用，但我只想阻止我的窗口重新排列。

例如，模态窗口不会像那样被捕捉。我想它也可以为 WPF 窗口设置，但我不知道如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T14:07:15.027

没有直接的方法可以做到这一点，除非您`ResizeMode="NoResize"`手动设置和实现调整大小行为，或者**EXTREME SOLUTION**可以（基于应用程序）修改 .exe 的快捷方式，在“兼容性”选项卡上，选中“禁用桌面组合”。

# jsf - #{...} 不允许出现在模板文本中

> ID：12478640
> 
> 赞同：13
> 
> 时间：2012-09-18T14:04:47.703
> 
> 标签：jsf, ajax4jsf

```
<a4j:ajax event="click" render="tempval" listener="#{question.setParameters}" /> 
```

当我们使用此代码时，服务器会抛出异常并显示消息

```
#{...} is not allowed in template text 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-18T14:19:30.743

当您使用 JSP 作为视图技术并`#{...}`在模板文本中使用时，您将收到此错误，例如（这`<p>`只是示例，它可以是任何纯 HTML 元素）：

```
<p>#{bean.property}</p> 
```

JSP 不支持它，但它的后续 Facelets 支持它。在 JSP 中，您需要显式使用`<h:outputText>`：

```
<p><h:outputText value="#{bean.property}"></p> 
```

但是，在您已经`#{...}`在 J​​SF 组件中使用的特定代码片段中，只有当`a4j`标记库未正确注册为 JSP 标记库时`<%@ taglib %>`，或者`a4j`在类路径中找不到标记库时，才会发生这种情况。这样`<a4j:ajax>`标签就不会被解析，因此被视为纯文本，包括所有带有 EL 表达式的属性。因此`#{question.setParameters}`在模板文本中被视为 EL，这在 JSP 中不受支持。

`<a4j:ajax>`但是您的问题更大：作为其中一部分的 RichFaces 4.x 组件库**不支持 JSP**。JSP 自 JSF 2.0 起被弃用，并由 Facelets 接替。所有 JSF 组件库（例如 RichFaces）都决定放弃对 JSP 的支持，因为为两种不同的视图技术 JSP 和 Facelets 开发和支持标记库和组件需要大量的工作。因此，即使您已经在类路径中拥有 RichFaces 4.x 并且您已经通过 正确注册了它`<%@ taglib %>`，它也永远不会在 JSP 中工作，因为命名空间`.tld`不存在 JSP 文件`a4j`。

为了使用与 JSF 2.0 兼容的组件库，您必须从 JSP 迁移到 Facelets。另一种方法是改用较旧的 RichFaces 3.x 版本。版本 3.3.3 支持 JSP 上的 JSF 2.0。它提供了`<a4j:support>`实现相同目的的标签。但请记住，您会以这种方式在技术上倒退。你应该继续前进。放弃 JSP 并选择它的继任者 Facelets。

### 也可以看看：

*   [从 JSF 1.2 迁移到 JSF 2.0](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0)
*   [我们的 Facelets wiki 页面](https://stackoverflow.com/tags/facelets/info)- 在底部包含几个教程链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-28T03:33:20.900

我遇到了同样的问题，对我来说，错误的原因是 javascript 中使用 #{...} 为我页面中的字段分配值的注释行。一旦我删除它工作正常，听起来很奇怪，但这就是发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-12T10:28:23.690

如果您使用 jsp 作为视图技术，则需要导入以下两个库。

```
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %> 
```

如果您使用 xhtml，请在 html 标签中添加以下内容，例如

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jsp/jstl/core">
...
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-05T10:11:27.390

只需从 jsp 页面中删除 Xmlns

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:a4j="http://richfaces.org/a4j"
xmlns:rich="http://richfaces.org/rich"> 
```

现在为jsp页面添加标签库..

```
<%@taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@taglib uri="http://java.sun.com/jsf/html" prefix="h"%> 
```

它肯定会解决你的问题。

# html - 在 iOS 6 中自动播放 WebAudio API

> ID：12478642
> 
> 赞同：0
> 
> 时间：2012-09-18T14:04:54.193
> 
> 标签：html, audio, ios6

我在 iOS6 中使用 WebAudio API 执行了一些测试。似乎当您单击一个按钮时，AudioBufferSourceNode 将被正确创建并连接到 Contexts 目的地。

我只是想知道是否有任何方法可以在加载页面时自动播放声音，因为 iOS6 设备似乎正确构建了 SourceNode，但没有声音出来。

我在下面发布了我的代码：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>HTML 5 WebAudio API Tests</title>

    <script type="text/javascript">
        var audioContext,
            audioBuffer;

        function init() {
            try {
                audioContext = new webkitAudioContext();
                initBuffer('resources/dogBarking.mp3');
            } catch(e) {
                console.error('webkitAudioContext is not supported in this browser');
            }
        }

        function initBuffer(desiredUrl) {
            var url = desiredUrl || '';
            var request = new XMLHttpRequest();
            request.open("GET", url, true);
            request.responseType = "arraybuffer";
            request.onload = function() {
                audioContext.decodeAudioData(request.response, function(buffer) {
                    audioBuffer = buffer;
                }, onError);
            }

            request.send();
        }

        function playSound(startTime, endTime) {
            var audioSource = audioContext.createBufferSource();
            audioSource.buffer = audioBuffer;
            audioSource.connect(audioContext.destination);
            audioSource.noteOn(0);
            audioSource.noteOff(10);
        }
    </script>
</head>

<body onload="init()">
    <script type="text/javascript">
        (function() { 
            var buttonNode = document.createElement('input');
            buttonNode.setAttribute('type', 'button');
            buttonNode.setAttribute('name', 'playButton');
            buttonNode.setAttribute('onclick', 'playSound(0, 1)')
            buttonNode.setAttribute('value', 'playSound()');
            document.body.appendChild(buttonNode);

            document.write('<a id="test" onclick="playSound(0, 2)">hello</a>');

            var testLink = document.getElementById('test');
            var dispatch = document.createEvent('HTMLEvents');
            dispatch.initEvent("click", true, true);
            testLink.dispatchEvent(dispatch);
        }());
    </script>
</body>
</html> 
```

我希望这是有道理的。亲切的问候，杰米。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:07:20.387

这个问题非常类似于[No sound on iOS 6 Web Audio API](https://stackoverflow.com/questions/12517000/no-sound-on-ios-6-web-audio-api)。WebAudio API 需要初始化用户输入，并且在以这种方式播放第一个声音之后，WebAudioAPI 可以很好地工作，而无需在当前会话期间进行任何操作。

您可以通过向第一个窗口 touchstart 事件添加侦听器来初始化 API，如下所示：

```
w.addEventListener('touchstart', myFunctionThatPlaysAnyWebAudioSound); 
```

# php - Magento 在产品页面上显示子类别名称

> ID：12478646
> 
> 赞同：0
> 
> 时间：2012-09-18T14:05:13.963
> 
> 标签：php, magento

我正在查看在单个产品页面上显示已在 Magento 管理区域中选择的子类别的名称。

我打开了模板，但我只需要调用相关代码，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:07:05.787

尝试这个

```
<?php

$onCatalog = false;
if(Mage::registry('current_product')) {
    $onCatalog = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T22:44:47.440

好的，如果你在 catalog>product>view.phtml 或 catalog>product>list.phtml

```
<?php foreach($_product->getCategoryCollection() as $_cat): ?>
    <?php echo $_cat->getName() ?><br />
<?php endforeach ?> 
```

否则，第一行应该得到你的产品：

```
$_product = Mage::registry('current_product'); 
```

会给您当前选择的产品。

尽管：

```
$_product = Mage::helper('catalog/product')->load(35) 
```

会给你产品 35。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:07:26.543

你可以用这个。

```
<h2>This product is in the following categories</h2>
                <ul>
                  <?php 
                    $categories = $_product->getCategoryCollection();
                    $categories->addAttributeToSelect(array('name', 'url'));
                    foreach ($categories as $category){
                      if ($category->getName() == 'Default Category' || $category->getName() == 'Categories') {
                        continue;
                      }
                  ?>
                  <li><a href="<?php echo $category->getUrl() ?>"><?php echo $category->getName() ?></a></li>
                  <?php } ?>
                </ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T15:04:52.517

试试这个（假设您在产品视图模板 view.phtml 中）：

```
<?php foreach($_product->getCategoryCollection() as $_cat): ?>
    <?php echo $_cat->getName() ?><br />
<?php endofreach ?> 
```

这应该让您开始并获得产品已分配到的类别列表。

如果您希望拥有 ID：

```
<?php $categoryIds = $_product->getCategoryIds() // an array ?> 
```

# oracle - 如果超过 1，Oracle 连接 2 个具有详细信息行的表应返回 1

> ID：12478650
> 
> 赞同：2
> 
> 时间：2012-09-18T14:05:33.573
> 
> 标签：oracle, join

Oracle sql 查询根据事务类型返回行。这用于分析目的

```
SELECT YEAR
       , MONTH
       , source
       , count(distinct T.tx_id  ) no_of_txn
       , sum((CASE WHEN D.type = 1 THEN 1  ELSE 0 END ))  A_TXN 
       , sum((CASE WHEN D.type = 2 THEN 1  ELSE 0 END )) d_TXN
FROM TXN_HEADER T , TXN_DETAIL D  WHERE OPEN_AMT > 0   
AND  T.tx_id  = D.tx_id (+)
AND  T.tx_id  in ( 23414, 23123)
GROUP BY YEAR,MONTH,source 
```

输出

```
年月源 NO_OF_TXN A_TXN D_TXN
2012 09 11 2 17 2

```

这里明细表中的总行数为 19 (17 +2) 和标题 2 ( 2 Txn)

对我来说，所需的输出是总 txn 2、a_txn 2 和 D_txn 2。这意味着如果 txn 的 a_txn 超过 1 个，它将被视为与 D_txn 相同的 1

最终预期输出为

```
年月源 NO_OF_TXN A_TXN D_TXN
2012 09 11 2 2 2

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:40:22.520

您可以将[`COUNT`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions039.htm#i82697)and`DISTINCT`与*表达式*一起使用：它将计算所有不同且非空的*表达式*实例。因此，如果我正确理解您的要求，应该这样做：

```
SELECT YEAR
       , MONTH
       , source
       , count(distinct T.tx_id  ) no_of_txn
       , COUNT(DISTINCT CASE WHEN D.type = 1 THEN T.tx_id END)  A_TXN 
       , COUNT(DISTINCT CASE WHEN D.type = 2 THEN T.tx_id END)  d_TXN
FROM TXN_HEADER T , TXN_DETAIL D  WHERE OPEN_AMT > 0   
AND  T.tx_id  = D.tx_id (+)
AND  T.tx_id  in ( 23414, 23123)
GROUP BY YEAR,MONTH,source 
```

# gnu-make - 条件语句中的 Makefile 目标

> ID：12478651
> 
> 赞同：0
> 
> 时间：2012-09-18T14:05:34.423
> 
> 标签：gnu-make

我按以下方式构建了makefile。

```
.PHONY: DEPTARG1 DEPTARG2

$(info BUILD_AGAIN is $(BUILD_AGAIN)) 

TARGET: DEPTARG1 DEPTARG2

ifeq ($(BUILD_AGAIN),y)

DEPTARG1:
     @echo Building $@
DEPTARG2:
     @echo Building $@

endif 
```

如果 BUILD-AGAIN 为 n，我预计此 makefile 会引发错误，因为它没有可用的依赖项。但它没有。欢迎任何想法。

作为附加信息， **DETARG1**和**DEPTARG2**是**虚假目标**。

### BUILD_AGAIN 为 y 时的输出

```
BUILD_AGAIN is y
Building DEPTARG1
Building DEPTARG2 
```

### BUILD_AGAIN 为 n 时的输出

```
BUILD_AGAIN is n
make: Nothing to be done for `TARGET'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-30T12:47:46.877

在条件中移动`.PHONY:`声明将消除此错误。

话虽如此，您似乎正在经历很多恶作剧来重新创建`make`内置的东西。编写或不编写食谱不是运行或不运行它们的方法。Make 有一个标志，`make -B`即使目标是最新的，也会强制重建。替换整个设置一个`BUILD_AGAIN`变量恶作剧只是运行或不运行该标志应该可以解决问题。

# forms - Symfony2：验证不同级别的表单/实体

> ID：12478660
> 
> 赞同：1
> 
> 时间：2012-09-18T14:06:24.830
> 
> 标签：forms, symfony, validation

我允许只有用户名/电子邮件/密码的用户。但如果他们想进入某些区域，我需要更多信息并向他们出示表格。现在我想验证这个表单，但是无论发送什么数据，它都是有效的，因为实体只允许具有三个基本属性。

简单地检查访问某个区域所需的所需字段相当容易，但将缺少的字段传达给表单则更为复杂。我必须将字段与表单元素相匹配，添加自定义错误消息等等。

是否有解决我的问题的最佳方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:44:41.320

阅读[*验证组*](http://symfony.com/doc/current/book/validation.html#validation-groups)——这就是你所需要的。

# java - 如何将对象添加到 JList 并在列表界面上向用户显示对象的成员？

> ID：12478661
> 
> 赞同：5
> 
> 时间：2012-09-18T14:06:25.647
> 
> 标签：java, swing

我有一个对象的 ArrayList，它是 cd 的类型。我想将所有对象添加到 JList 并向用户显示名称字段。我可以将 String 类型添加到 JList 但是对象的特定字段呢？

光盘是：

```
class CD{
    public CD(String n){name = n;}
    private String name;
    public String getName(){return name;}
    public void setName(String n){name = n;}
} 
```

数组列表是：

```
ArrayList<CD> myList = new ArrayList<CD>(); 
```

现在我想将 myList 添加到 JList 中：

```
JList list = new JList(myList);
panel.add(list);
JScrollPane scrol = new JScrollPane(list);
frame.add(scrol,BorderLayout.EAST);
frame.add(panel);
frame.setVisible(true); 
```

首先，这种方式正确吗？其次，如何在列表中显示对象的用户名字段？我想要的界面是：

![在此处输入图像描述](../Images/67738ca68b8bcac90cf05027633544d3.png)

左边是我的对象的名字！提前致谢。伯纳德

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T14:37:18.423

使用基于 DefaultListCellRenderer 的自定义渲染器：

```
import java.awt.Component;
import java.util.ArrayList;
import java.util.List;
import java.util.Vector;

import javax.swing.DefaultListCellRenderer;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class TestJList {

    class CD {
        public CD(String n) {
            name = n;
        }

        private String name;

        public String getName() {
            return name;
        }

        public void setName(String n) {
            name = n;
        }
    }

    protected void initUI() {
        List<CD> cds = new ArrayList<CD>();
        cds.add(new CD("MJ - Bad"));
        cds.add(new CD("Mozart - Concerto 123"));
        cds.add(new CD("Nadeah - Odile"));
        JFrame frame = new JFrame(TestJList.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JList list = new JList(new Vector<CD>(cds));
        list.setVisibleRowCount(10);
        list.setCellRenderer(new DefaultListCellRenderer() {
            @Override
            public Component getListCellRendererComponent(JList<?> list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
                Component renderer = super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
                if (renderer instanceof JLabel && value instanceof CD) {
                    // Here value will be of the Type 'CD'
                    ((JLabel) renderer).setText(((CD) value).getName());
                }
                return renderer;
            }
        });
        frame.add(new JScrollPane(list));
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestJList().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T14:14:36.890

我认为如果你想`CD`直接使用类`JList`，你需要编写自己的渲染器，这将与`CD`类一起使用。渲染器可以扩展`JLabel`并显示`name`字段的内容。

还有其他方法：`for()`迭代`ArrayList`并仅将`name`字段添加到`DefaultListRenderer`. 你会做的方式是你的选择。

您还可以添加`ListSelectionListener`以显示所选列表项的专辑详细信息。

你需要知道的都在这里：

*   [http://docs.oracle.com/javase/tutorial/uiswing/components/list.html#renderer](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html#renderer)
*   [http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#renderer](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#renderer)
*   [http://docs.oracle.com/javase/tutorial/uiswing/components/list.html#selection](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html#selection)

// 感谢克娄巴特拉 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:18:02.010

JList 没有采用 ArrayList 的构造函数，但是您可以使用 Vector 或 Array（并且 ArrayList 可以轻松转换为 Array）。

要向用户显示您想要的内容，您可以使用自定义渲染器。或者，您可以只覆盖 CD 的 toString() 方法，如果我没记错的话，它是用于确定要显示什么的默认方法。

# stream - 提取传输流h264信息？

> ID：12478666
> 
> 赞同：0
> 
> 时间：2012-09-18T14:07:01.340
> 
> 标签：stream, structure, h.264, frames, transport

我需要提取一些关于包含 h264 视频的 ts 文件的信息。我想知道 I 帧在哪里。我在网上找不到解释 ts h264 结构的东西。所以如果有人有链接...

我已经使用包含 mpeg2 视频的流完成了它（我找到了这个页面：[http](http://dvd.sourceforge.net/dvdinfo/mpeghdrs.html) ://dvd.sourceforge.net/dvdinfo/mpeghdrs.html ）

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T00:24:01.913

真的是 superuser.com 的一个问题。

如果您只想要 I 图片的位置和其他一些细节，请使用 ffprobe [附带 ffmpeg]

```
 ffprobe -show_frames inputfile 
```

将提供图片类型、尺寸等的详细信息。

# node.js - npm install 与 update - 有什么区别？

> ID：12478679
> 
> 赞同：599
> 
> 时间：2012-09-18T14:07:54.633
> 
> 标签：node.js, npm

`npm install`和之间的实际区别是什么`npm update`？我什么时候应该使用哪个？

* * *

## 回答 #1

> 赞同：737
> 
> 时间：2013-11-06T22:26:10.017

**package.json中指定的包版本的**[npm install](https://docs.npmjs.com/cli/install)和[npm update](https://docs.npmjs.com/cli/update)处理之间的区别：

 **```
{
  "name":          "my-project",
  "version":       "1.0",                             // install   update
  "dependencies":  {                                  // ------------------
    "already-installed-versionless-module":  "*",     // ignores   "1.0" -> "1.1"
    "already-installed-semver-module":       "^1.4.3" // ignores   "1.4.3" -> "1.5.2"
    "already-installed-versioned-module":    "3.4.1"  // ignores   ignores
    "not-yet-installed-versionless-module":  "*",     // installs  installs
    "not-yet-installed-semver-module":       "^4.2.1" // installs  installs
    "not-yet-installed-versioned-module":    "2.7.8"  // installs  installs
  }
} 
```

**摘要**：唯一的大区别是**已经安装的带有模糊版本控制的模块**......

*   被忽略`npm install`
*   被更新`npm update`

**另外**：默认情况`install`下`update`以不同方式处理 devDependencies

*   `npm install`除非添加标志，否则将**安装/更新**devDependencies`--production`
*   `npm update`除非添加标志，否则将**忽略**devDependencies`--dev`

* * *

**为什么要使用`npm install`？**

因为`npm install`除了在`package.json`. 正如您在[npm install](https://docs.npmjs.com/cli/install)中看到的，您可以...

*   手动安装节点模块
*   *使用*_ _ `PATH`_`npm install -g <name>`
*   安装由 git 标签描述的某些版本
*   从 git url 安装
*   强制重新安装`--force`

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2012-09-18T15:15:37.767

**npm install**安装文件中列出的所有模块`package.json`及其依赖项。

**npm update**更新目录中的所有包`node_modules`及其依赖项。

**npm install express**仅安装 express 模块及其依赖项。

**npm update express**更新 express 模块（从 npm@2.x 开始，它不会更新其依赖项）。

因此，更新适用于您已经拥有该模块并希​​望获得新版本的情况。

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2014-01-15T22:46:54.647

在大多数情况下，这将安装在 npm 上发布的模块的最新版本。

```
npm install express --save 
```

或更好地将模块升级到最新版本使用：

```
npm install express@latest --save --force 
```

`--save`：包将出现在您的依赖项中。

更多信息：[npm-install](https://npmjs.org/doc/cli/npm-install.html)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-09-09T16:33:24.627

已经提到了许多区别。这里还有一个：

`npm install`在源目录顶部运行将运行各种脚本：`prepublish`、`preinstall`、`install`、`postinstall`。根据这些脚本的作用，a`npm install`可能比仅仅安装依赖项做更多的工作。

我刚刚有一个用例`prepublish`可以调用`make`，并且`Makefile`设计用于在更新时获取依赖`package.json`项。`npm install`从内部调用`Makefile`会导致无限递归，而调用`npm update`工作得很好，安装所有依赖项以便即使`make`直接调用也可以继续构建。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2019-03-07T07:25:51.287

`npm update`: 使用 package.json 中的最新节点模块安装和更新

`npm install`: 安装 package.json 中定义的节点模块（不更新）**

# sql - PostgreSQL 8.2.9 枚举类型

> ID：12478680
> 
> 赞同：2
> 
> 时间：2012-09-18T14:07:57.467
> 
> 标签：sql, postgresql, enums, postgresql-8.2

从 8.3 开始的 PostgreSQL 知道[Enumerated Types](http://www.postgresql.org/docs/8.3/static/datatype-enum.html)。

简单的问题：8.2(.9) 也知道它们吗？如果没有，可以用什么代替？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T14:31:01.920

8.2 不支持枚举类型。

作为替代方法，可以使用引用了列出可能值的表的列`text`。`foreign key`

```
CREATE TABLE fruit_enum (
    fruit text primary key
);

INSERT INTO fruit_enum(fruit) VALUES
('apple'),('pear'),('grape');

CREATE TABLE basket (
    -- ... blah columns ...
    fruit text,
    -- ... blah columns ...
    CONSTRAINT fruit_fk FOREIGN KEY (fruit) REFERENCES fruit_enum(fruit)
); 
```

这是经典的关系公式，通常比使用`enum`无论如何更可取。枚举在某些客户端应用程序中处理起来很痛苦，而且 Pg 目前也不支持从它们中删除值。

以下是上述的工作原理：

```
regress=# INSERT INTO basket(fruit) VALUES ('apple');
INSERT 0 1
regress=# INSERT INTO basket(fruit) VALUES ('cider');
ERROR:  insert or update on table "basket" violates foreign key constraint "fruit_fk"
DETAIL:  Key (fruit)=(cider) is not present in table "fruit_enum".
regress=# 
```

如果您愿意，可以通过整数 ID 间接枚举，其中外键指向枚举表的 ID，而不是枚举值。就我个人而言，我不喜欢这种方法，尽管它实际上只是一种真正的“枚举”，因为获取值总是需要昂贵的`JOIN`查询或子查询，而且通常节省的空间很少。

或者，正如@a_horse_with_no_name 所指出的，一个简单的`CHECK`约束通常就足够了：

```
CREATE TABLE basket (
    -- ... blah columns ...
    fruit text,
    -- ... blah columns ...
    CONSTRAINT fruit_in_allowed_list CHECK (fruit IN ('apple', 'pear', 'grape'))
); 
```

与外键方法（但与枚举不同）一样，这是 SQL 标准，应该适用于任何数据库。

另外，说真的，*8.2*？那是[生命的终结](http://www.postgresql.org/support/versioning/)，可悲的是，已经过时了。制定紧急升级计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:13:38.560

枚举是在 8.3 中引入的
这里是发行说明：[http ://www.postgresql.org/docs/8.3/static/release-8-3.html](http://www.postgresql.org/docs/8.3/static/release-8-3.html)

8.2 的数据类型记录在这里：[http ://www.postgresql.org/docs/8.2/static/datatype.html](http://www.postgresql.org/docs/8.2/static/datatype.html)

但是无论如何你都不应该使用 8.2（实际上我也不推荐 8.3）

# matlab - stateflow 和 simulink 有什么区别？

> ID：12478683
> 
> 赞同：7
> 
> 时间：2012-09-18T14:08:21.667
> 
> 标签：matlab, simulink, stateflow

据我所知，stateflow和simulink经常同时使用，都是Matlab开发的MathWorks开发的环境。我可以知道它们之间有什么区别吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-18T15:36:39.520

Simulink 在很大程度上是一个面向控制的解决方案。它以图形方式描述了数学，如乘积、总和、积分等。但是，它缺乏条件逻辑工具。在我看来，任何一种`if`构造都会很快变得简洁和难以管理。我见过很多模型，这里有一条明确的界限，Simulink 应该在哪里结束，Stateflow 应该在哪里开始。

Stateflow 非常好地处理逻辑，当然还有状态机。现在，通过在 Stateflow 中添加 Simulink Function 模块，我们有了一个强大的组合，可以让 Stateflow 中的状态机指导程序的其余部分。

就功能而言，它们在功能上都是完整的，这意味着您可以在 C 中编码的任何内容，您都可以在 Simulink 或 Stateflow 中编码。但是，我不建议在 Stateflow 中编写 PID 循环，但这是可能的。您也可以在 Simulink 中轻松创建状态机，但我不建议这样做。

至于代码生成；在融合之初，Stateflow 和 Simulink 有单独的代码生成器，它们与更多 Simulink 在代码生成时生成的 C 代码缝合在一起。然后是 CGIR（代码生成中介表示），它统一了 Stateflow 和 Simulink 之间的代码生成器。它出现在 2007 年左右，并继续显着提高性能。生成的代码在目标性能方面已提高到公司可以在其嵌入式系统中使用代码并实际获得性能**优势的程度**而不是小受打击。此外，生成代码的时间也大大减少。CGIR 是目标语言编译器的替代品，但是，不要担心，TLC API 仍然可用，对于那些开发了大量专有代码生成库的人来说可能永远可用。

希望这会有所帮助，让我知道是否有什么听起来可疑或者我需要澄清一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-30T09:40:17.720

引用[Stateflow 网络研讨会](http://de.mathworks.com/videos/introduction-to-stateflow-81549.html)：

> Simulink 用于响应动态变化的连续变化。Stateflow 用于响应动态变化的瞬时变化。现实世界的系统必须同时响应连续和瞬时的变化。同时使用 Simulink 和 Stateflow，以便您可以使用正确的工具来完成正确的工作。示例：汽车的悬架动力学使用 Simulink 建模，而齿轮传动系统使用 Stateflow 建模。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T21:26:21.147

了解更多关于 Stateflow 的一般信息：http: [//www.mathworks.com/products/stateflow/examples.html](http://www.mathworks.com/products/stateflow/examples.html)

Stateflow 已更新，可以非常轻松地在 R2012b 中创建[状态机](http://www.mathworks.com/products/stateflow/)和流程图。

主要更新包括新的图形编辑器、状态转换表、作为动作语言的 MATLAB 和集成调试器。查找这些功能的简短视频以及如何使用它们：

[http://www.mathworks.com/products/stateflow/whatsnew.html](http://www.mathworks.com/products/stateflow/whatsnew.html)

最好的，悉达多

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-08T12:38:39.190

我目前还参与了 simulink 和 stateflow。到目前为止，我在 Simulink 中完成了所有工作，但是一旦您必须实现逻辑（如果、案例），您的模型在编码后就变得难以在视觉上进行分析。但我认为理论上你也可以在 Simulink 中做所有事情（如果我错了，请纠正我）。

macduff 的回答很好地解释了这些差异。

问候， GR

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-20T06:11:45.887

我在 simulink 和状态流环境上都工作过，它们都是 Matlab 工具。当你当时想设计一个反应式系统或事件驱动系统时，我们应该更喜欢 stateflow 而不是 simulink。因为与 simulink 相比，我们可以更好地控制 stateflow 中的事件。虽然 simulink 中的调试很容易，但 stateflow 中的可读性和代码生成很容易。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-14T02:57:09.993

复杂状态机：Stateflow
复杂数学过程：Simulink 块
其他：Stateflow 和 Simulink 都可以

# ios - 动画完成后所有 UIElement 都无法访问

> ID：12478685
> 
> 赞同：2
> 
> 时间：2012-09-18T14:08:31.730
> 
> 标签：ios, objective-c, uielement

我试图通过拥有一个 CGRect 数组和每个灯光的坐标来实现城市灯光动画。然后围绕这些 CGRects 创建 UIViews。这个逻辑（感谢[Darren](https://stackoverflow.com/users/1077601/darren)帮助这个逻辑）工作正常，但是在动画完成后，屏幕上的所有其他元素（UIButtons、Sliders、其他 UIImageViews 等）都变得无法访问。甚至我的滑动手势也没有响应。在动画之前和期间，所有元素都响应良好，但是一旦动画完成，它们都变得不可访问。我还尝试`[UIView bringSubviewToFront:]`将一些元素放在前面，看看这是否有助于使它们易于访问，但没有帮助。我认为这不是问题，因为即使我尝试通过将它们发送到背景来创建灯光视图 `[self.view sendSubviewToBack:light];`动画完成后，一切都变得无法访问。

如果有人可以帮助/建议我缺少什么，我将不胜感激。

这是我的城市灯光动画的代码逻辑和相应的场景。rects 和 lits 是 ivars。

![在此处输入图像描述](../Images/0457e0962b4c778a0b080c4f4ed5dac2.png)

```
- (void)viewDidLoad {
    pageCount=5;
    AVAudioSession * audioSession = [AVAudioSession sharedInstance];
    //Setup the audio session
    //...
    pageNum=1;
    //put imageviews in place
    //...
    //load a page
    [self loadPage];
    [self loadAudio];

    [self cityLightsSetUp];
    [super viewDidLoad];
}

-(void)loadPage{
    //Logic to load page...    
    /...
    if (pageNum == 3){
      [self startCityLights];
    }
}

- (void)cityLightsSetUp
{
    rects = [[NSMutableArray alloc] init];
    lit = [[NSMutableArray alloc] init];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(58, 217, 10, 10)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(71, 217, 10, 10)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(84, 217, 10, 10)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(97, 217, 10, 10)]];

    [rects addObject:[NSValue valueWithCGRect:CGRectMake(58, 231, 10, 10)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(71, 231, 10, 10)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(84, 231, 10, 10)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(97, 231, 10, 10)]];

    [rects addObject:[NSValue valueWithCGRect:CGRectMake(58, 245, 10, 10)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(71, 245, 10, 10)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(84, 245, 10, 10)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(97, 245, 10, 10)]];

    [rects addObject:[NSValue valueWithCGRect:CGRectMake(58, 258, 10, 10)]];
    [rects addObject:[NSValue valueWithCGRect:CGRectMake(71, 258, 10, 10)]];
}

- (void)startCityLights
{
    [self lightRandomLight];
    [self performSelector:@selector(switchOffRandomLight) withObject:nil afterDelay:1.0];
}

- (void)lightRandomLight
{
    BOOL escape = NO;
    int rand;

    while (!escape) {
        BOOL alreadyLit = NO;
        rand = arc4random() % [rects count];
        // Check if already lit
        for (UIView *view in lit) {
            CGRect litRect = view.frame;
            CGRect ranRect = [[rects objectAtIndex:rand] CGRectValue];
            if (CGRectContainsRect(litRect, ranRect)) {
                alreadyLit = YES;
            }
        }

        if (!alreadyLit) {
            UIView *light = [[UIView alloc] initWithFrame:[[rects objectAtIndex:rand] CGRectValue]];
            light.backgroundColor = [UIColor orangeColor];
            [lit addObject:light];
            [self.view addSubview:light];
            //[self.view sendSubviewToBack:light];
            escape = YES;
        }
    }

    [self performSelector:@selector(lightRandomLight) withObject:nil afterDelay:0.2];
}

- (void)switchOffRandomLight
{
     NSLog(@"switchOffRandomLight");
    int rand = arc4random() % [lit count];
    UIView *light = [lit objectAtIndex:rand];
    [lit removeObject:light];
    [light removeFromSuperview];

    [self performSelector:@selector(switchOffRandomLight) withObject:nil afterDelay:0.5];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:11:49.553

似乎一旦所有的灯都亮了，while 循环就会不断运行，试图获得一个没有亮的随机数。这将阻塞主线程。

您只需检查方法开始时是否所有灯都点亮，如果没有则继续。

在您的 lightRandomLight 方法的底部，替换

```
[self performSelector:@selector(lightRandomLight) withObject:nil afterDelay:0.2]; 
```

和

```
if ([lit count] != [rects count]) {
    [self performSelector:@selector(lightRandomLight) withObject:nil afterDelay:0.2];
} else {
    [NSObject cancelPreviousPerformRequestsWithTarget:self];
} 
```

当所有的灯都亮起时它会停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:23:09.493

您正在阻塞主线程 -`lightRandomLight`完成后调用自身，延迟 0.2 秒。因此主线程永远不会响应用户交互。看看 UIView 提供的动画 API——不是通过添加和删除子视图来“动画化”，而是可以设置视图的 alpha 状态或背景颜色，还可以设置延迟和设置循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:24:09.880

我的猜测是这`while (!escape) {}`永远不会完成（所以逃避永远不会是）。

# css - 随窗口大小调整大小的圆形按钮

> ID：12478686
> 
> 赞同：4
> 
> 时间：2012-09-18T14:08:33.620
> 
> 标签：css, resize

我想制作一个圆形按钮（div 也可以）并将其放在中心，直径为窗口高度的 20%。我可以这样做，但如果窗口不完全是方形的，按钮将变为椭圆形（我希望宽度和高度相同 - 一个完美的圆形）。

```
.circle {
  height: 20%;
  width: 20%;
  border-radius: 100%;
  font-size: 20px;
  color: #fff;
  line-height: 100px;
  text-align: center;
  background: #000
} 
```

对像素值进行硬编码并不是一个很好的选择，因为它不会根据窗口调整大小。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T14:29:42.740

有两种方法可以实现这一目标；有和没有 JavaScript。

## JavaScript 方法

这是一个简单的演示：[小链接](http://jsfiddle.net/glee/3ZJz3/)。

HTML：

```
<div class = "circle"></div> 
```

CSS：

```
html, body {
    height: 100%;
}
.circle {
    border-radius: 1000px;
    background-color: rgb(0, 162, 232);
} 
```

JavaScript（使用 jQuery，但不是必需的）：

```
function upd() {
    var h = $("body").height();
    $(".circle").height(h / 5);
    $(".circle").width(h / 5);
}
upd();
window.onresize = upd; 
```

## 非 JavaScript (CSS) 方法

对于纯 CSS 解决方案，您需要使用所有`padding`值都是相对于元素 parent 计算的事实`width`，而不是`height`( [reference](http://www.w3.org/TR/CSS21/box.html#propdef-padding-top) )。小演示：[小链接](http://jsfiddle.net/glee/JnB6q/)。

HTML：

```
<div class = "wrapper">
    <div class = "main">

    </div>
</div> 
```

CSS：

```
html, body {
    height: 100%;
    width: 100%;    
}
.wrapper {
    width: 20%;
    display: inline-block;
    position: relative;
}
.wrapper:after {
    padding-top: 100%; /*1:1 ratio*/
    display: block;
    content: '';
}
.main {
    position: absolute;
    top: 0; bottom: 0; right: 0; left: 0; /*fill parent*/
    border-radius: 1000px;
    background-color: rgb(0, 162, 232);
    /*I wanted it to look good :)*/
    font-family: 'Arial', Helvetica, Sans-Serif;
    color: white;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T14:38:44.550

有一种方法可以在不使用任何 JS 的情况下实现完美的圆，它在于填充百分比的规范定义。当填充作为百分比应用时，它作为对象**宽度**的百分比应用，这意味着如果您将宽度和高度设置为 0，并为对象提供 20% 的填充，您最终会得到一个占 20% 的圆圈的可用宽度。不过，您需要发挥创造力才能使事情进入圈子。

```
<style>
    html, body {
        width:80%;
    }
    .square
    {
        width:0%;
        height:0%;
        padding:20%;
        position:relative;
        left:25%;/*Position central*/
        border-radius:100%;
        margin:auto;/*Position central*/
        border:1px solid #000000;   
    }
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-06T18:49:56.620

最简单的解决方法是向具有相同值的圆圈添加`min-height`和属性。`min-width`

```
.circle {
  min-width: 100px;
  min-height: 100px;
} 
```

# html - 如何检测电话功能

> ID：12478687
> 
> 赞同：0
> 
> 时间：2012-09-18T14:08:35.117
> 
> 标签：html, web-applications, browser-feature-detection

我正在构建一个 html5 网络应用程序，希望它主要从移动设备运行。该应用程序有一个电话号码，单击该电话号码时，会拨打显示的号码。

如果用户使用的是 iPhone 或 Android 等，这非常有用，但如果用户使用的是没有电话功能的 iPod Touch 或 iPad 怎么办？在 XCode 中的 iPhone 模拟器上，我收到一条错误消息，提示 safari 无法打开页面。

是否可以检测设备是否有电话，如果没有，请禁用链接

谢谢

# jquery - WordPress 阅读更多作为手风琴打开

> ID：12478696
> 
> 赞同：1
> 
> 时间：2012-09-18T14:09:17.430
> 
> 标签：jquery, wordpress, accordion

这次我的问题涉及 WordPress“阅读更多”链接。我让它正常运行，但不是让阅读更多打开一个新页面或 Fancybox 窗口，我想对其进行编码以打开手风琴。我将有一个包含 10 个帖子且没有存档列表的页面。也不会有上一个或下一个链接。它只是一个标准的 10 个帖子列表 这个想法是将每个帖子作为一个手风琴选项卡，显示更多标签之前的文本，当点击阅读更多时，它将展开该特定帖子。以下是我目前用于自定义循环的代码。提前致谢！

```
<script>
jQuery(document).ready(function() {
    jQuery('.more-link').before('<br/>');
});
</script> 
```

```
<?php query_posts(array('post_type' => 'news&events', 'showposts' => 10, 'orderby' => 'post_date', 'order' => 'DESC')); ?>
<?php while (have_posts()) : the_post(); ?>

<div class="newsArticle">

    <div class="newsThumb">
        <?php the_post_thumbnail('news-featured'); ?> 
    </div>

    <div class="newsPostContent">

        <div class="newsTitleDate">
            <span class="newsTitle"><?php the_title(); ?></span> <span class="newsDate"><?php echo get_the_date(); ?></span>
            <div class="clear"></div>
        </div>

        <?php 
            global $more;
            $more = 0;
            the_content('<img src="' . get_bloginfo("template_directory") . '/img/readMore.png" alt="Read More" />');
        ?>

    </div>

    <img class="newsDivider" src="<?php echo get_template_directory_uri(); ?>/img/newsDividerLine.png" alt="Divider Line" />

</div>

<?php endwhile;  wp_reset_query(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:45:16.317

我在[Read More Right Here 插件](http://wordpress.org/extend/plugins/read-more-right-here/)上取得了成功。它非常漂亮，但它允许在一个页面上扩展多个帖子。它的作用是`<p>`在包含您的阅读更多链接和其余帖子内容中的 AJAX 的元素内附加一个标签。您可以修改它以给插入`<p>`的类，并修改插件脚本以在扩展新帖子时隐藏所有其他（并重新切换更多链接文本）。

或者，作为概念证明，您可以构建循环以使用 jQuery UI 手风琴。[这是一个小提琴](http://jsfiddle.net/crowjonah/SqmwM/)，展示了它是如何完成的。

您可以指定手风琴将考虑的“标题”，然后它之后的 div 元素可以包含帖子内容。这消除了对 Read More 链接的需要，因为帖子内容已经被加载，并且只是被手风琴的性质所隐藏。

# php - PHP PDO 尝试捕获不捕获

> ID：12478699
> 
> 赞同：0
> 
> 时间：2012-09-18T14:09:22.917
> 
> 标签：php, pdo, try-catch

我有这段代码：

```
try {
    $dbh = new PDO('mysql:host='.$db_host.';dbname='.$db_database, $db_user, $db_pass);
    $dbh->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
    $dbh->prepare('DELECT userID FROM tblusers');
} catch (PDOException $e) {
    echo "Error!: " . $e->getMessage() . "<br/>";
    file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);
} 
```

`catch`当我在 IDE 中使用调试器单步执行代码时，即使我的`prepare`语句中有错误，它也永远不会进入块。

我究竟做错了什么？

我是 PDO 的新手并尝试/捕获块，所以如果这是一个愚蠢的问题，请耐心等待！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:13:42.090

尝试添加`$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);`

> 模拟的预处理语句不与数据库服务器通信，因此 PDO::prepare() 不检查语句。

参考： http: [//php.net/manual/en/pdo.prepare.php](http://php.net/manual/en/pdo.prepare.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T14:16:17.893

PDO_mysql 默认使用模拟的prepared statements（性能原因），因此prepare 不会抛出异常。`PDOStatement::execute`不过会。

您可以按照 jonnyynnoj 提到的方式关闭仿真，但我发现在执行时捕获异常通常就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:15:03.333

try / catch 只会捕获异常。其他错误（解析错误、运行时错误等）不会执行 catch 块。

在您的情况下，只有“PDOException”类型的异常被捕获，其他所有内容都可能被显示或记录（取决于您在 php.ini 中的错误报告指令）。

什么显示为错误？

# xml - 在清单文件中使用 dbDacFx

> ID：12478700
> 
> 赞同：1
> 
> 时间：2012-09-18T14:09:24.177
> 
> 标签：xml, webdeploy

我正在尝试创建一个包来部署网站和数据库。

**清单.xml：**

```
<sitemanifest>
   <iisApp path="webApp" />
   <dbDacFx path="database.dacpac" />
</sitemanifest> 
```

**参数.xml：**

```
<parameters>
  <parameter name="appPath" defaultValue="dev.local" tags="iisapp"> 
    <parameterEntry kind="ProviderPath" scope="iisApp" match="webApp" /> 
  </parameter>
  <parameter name="dbServer" defaultValue="localhost" tags="dbServer,sql" />
  <parameter name="connectionString" defaultValue="Server={dbServer};Initial Catalog=MyDatabase;Integrated Security=True;" tags="hidden,sql,sqlconnectionstring">
    <parameterEntry kind="ProviderPath" scope="dbDacFx" match="database.dacpac" /> 
    <parameterEntry kind="XmlFile" scope="webApp\\Web.config" match="//connectionStrings/add[@name='DB']/@connectionString" />
  </parameter>
</parameters> 
```

我收到以下错误：

```
There is no stream data associated with 'database.dacpac'. 
```

是否可以在清单中使用 dbDacFx 提供程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:45:27.080

看起来不可能直接在清单中使用 dbDacFx 提供程序，但有一种解决方法可以使用 msdeploy 创建包。

新**manifest.xml**（应包含**完整路径**）：

```
<sitemanifest>
  <iisApp path="C:\temp\my-test\webApp" />
  <dbDacFx path="C:\temp\my-test\database.dacpac" />
</sitemanifest> 
```

发出命令：

```
msdeploy.exe ^
-verb:sync ^
-source:manifest=C:\temp\my-test\manifest.xml ^
-dest:package=C:\temp\my-test\package.zip ^
-declareParam:name=appPath,defaultValue="dev.local",tags="iisapp",kind=ProviderPath,scope="iisApp",match="C:\\temp\\my-test\\webApp" ^
-declareParam:name=dbServer,defaultValue="localhost",tags="dbServer,sql" ^
-declareParam:name=connectionString,defaultValue="Server={dbServer};Initial Catalog=MyDatabase;Integrated Security=True;",tags="hidden,sql,sqlconnectionstring" ^
-declareParam:name=connectionString,kind=ProviderPath,scope=dbDacFx,match="C:\\temp\\my-test\\database.dacpac" ^
-declareParam:name=connectionString,kind=XmlFile,scope="webApp\\Web.config",match="//connectionStrings/add[@name='DB']/@connectionString" 
```

# c# - C# - 删除文件夹

> ID：12478703
> 
> 赞同：-2
> 
> 时间：2012-09-18T14:09:49.137
> 
> 标签：c#, winapi, io

我想用 C# 删除 java 文件夹，但我有一点问题。

这是代码

```
private void setDebug(string value)
{
    debug.Text = value;
}

private void buildButton_Click(object sender, EventArgs e)
{
    // delete java folder
    string java_folder = @"C:\Program Files\Java";
    if (Directory.Exists(java_folder))
    {
        setDebug("Deleting Java folder...");
        Directory.Delete(java_folder, true);
        progressBar.Value += 10;
    }
} 
```

当我单击按钮时程序卡住了，但是当我删除 Directory.Delete 行时，它将调试标签更改为“删除 java 文件夹...”

我知道程序卡住了，因为它删除了文件夹，但我希望它在删除文件夹之前先更改调试。

该怎么办？感谢帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T14:16:13.083

您的代码似乎无法正常工作的原因是 WinForms 处理 UI 更新的方式。

在您的方法完成之前，UI 不会重新绘制`buildButton_Click`- 直到那时 UI 也不会响应。该`Directory.Delete`行需要很长时间才能运行，因此您的程序“卡住”并且您看不到调试标签。

您需要做的是研究使用线程 - 阅读 Threads、Tasks 或 BackgroundWorker 类以了解它们是如何工作的。然后，不要`Directory.Delete`直接在您的方法中调用，而是使用其中一种技术在后台线程上运行删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:18:08.247

您需要将代码包装在不同的线程中，如下所示：

```
private void setDebug(string value)
{
    debug.Text = value;
}

private void buildButton_Click(object sender, EventArgs e)
{
    BackgroundWorker worker = new BackgroundWorker();
    string java_folder = @"C:\Program Files\Java";
    if (Directory.Exists(java_folder))
    {
        setDebug("Deleting Java folder...");
        worker.DoWork += (s, args) => // this is the off-thread code
        {
            // delete java folder
            Directory.Delete(java_folder, true);
        };
        worker.RunWorkerCompleted += (s,args)=>  // this goes off when .DoWork is done
        {
            progressBar.Value += 10; 
        };

        // this invokes .DoWork handler (which we defined above)
        worker.RunWorkerAsync();
    }
} 
```

# android - Android TimerTask SetColorFilter of Button

> ID：12478704
> 
> 赞同：1
> 
> 时间：2012-09-18T14:09:57.670
> 
> 标签：android, colors, timer

这是我的第一个问题，我希望我做对了。我需要在特定的时间间隔内更改某些按钮的颜色。

我决定用 Colorfilter 来做，因为 setBackground 方法让 Button 看起来很丑。

问题如下：如果我在 Runnable 中设置 ColorFilter，它就**不起作用**。

但是：在 onCreate 或 click 方法中设置 ColorFilter 是**有效**的。并且：在 Runnable 中使用 setBackgroundColor 设置 BackgroundColor 是**有效**的。

我忘了提一下，如果我在带有 android 4.1 但不是 2.3.3 的模拟器上运行它，一切正常。

有任何想法吗？这是代码

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    int counter = 0;
    Button b = null;

    final Handler handler = new Handler();
    final Runnable doit = new Runnable() {
        public void run() {

            if ( counter % 2 == 0) {
                b = (Button) findViewById(R.id.button1);
                b.setBackgroundColor(0xffff0000);  // working
                //b.getBackground().setColorFilter(0xFFD2691E, PorterDuff.Mode.MULTIPLY);   // doesnt work
            }
            else {
                //b.getBackground().clearColorFilter(); 
                b.setBackgroundColor(0xff00ff00);
            }
            counter++;
        }
    };

    public void click(View view) {
        // configure timer 1
        Timer timer = new Timer();
        TimerTask task = new TimerTask() {
            @Override
            public void run() {
                handler.post(doit);
            }
        };

        timer.schedule(task, 1111, 1111);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T07:35:45.693

我对图像视图有同样的问题。我找到了一个解决方案，你必须调用 invalidate() 方法：

```
ImageView img =(ImageView) findViewById(R.id.myimageview);
img.getDrawable().clearColorFilter();
img.invalidate(); 
```

# java - 是否可以将 Grizzly 设置为正常关机？

> ID：12478709
> 
> 赞同：7
> 
> 时间：2012-09-18T14:10:16.737
> 
> 标签：java, jersey, nio, grizzly

我有一个在嵌入式 Grizzly 上运行的 Jersey 应用程序，它的初始化如下：

```
HttpServer httpServer = GrizzlyServerFactory.createHttpServer(BASE_URI, rc); 
```

我想要实现的是让正在运行的请求在关闭时完成，但不让新请求进入。我找不到通过 HttpServer 的公共方法来实现这一点的方法，甚至无法使用私有方法等（尽管它是不好，通过反射访问私有内容的解决方案也可以）

有谁知道这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-03T06:52:05.727

使用 Grizzly 2.3.4 是可能的；请参阅有关[优雅终止灰熊运输](https://web.archive.org/web/20160913220533/http://www.notshabby.net/2013/08/gracefully-terminating-a-grizzly-transport/)的帖子。简而言之，使用[Transport.addShutdownListener()](https://javadoc.io/doc/org.glassfish.grizzly/grizzly-framework/2.3.16/org/glassfish/grizzly/Transport.html#addShutdownListener(org.glassfish.grizzly.GracefulShutdownListener))在特定于实现的传输机制（例如、或）上实现一个[GracefulShutdownListener](https://www.javadoc.io/doc/org.glassfish.grizzly/grizzly-framework/2.3.28/org/glassfish/grizzly/GracefulShutdownListener.html)注册。`NIOTransport``TCPNIOTransport``UDPNIOTransport`

# php - 当我登录到我的 Android 应用程序时，如何显示为在线？

> ID：12478712
> 
> 赞同：-1
> 
> 时间：2012-09-18T14:10:23.927
> 
> 标签：php, android, mysql

我制作了一个应用程序，其中的场景如下：用户可以注册，注册信息会发送到 PHP 服务器并存储在 MySQL 数据库中。这是我的 PHP 文件：

```
 <?php

  // Check if he wants to login:
  if (!empty($_POST[username]))
  {
    require_once("connect.php");

    // Check if he has the right info.
    $query = mysql_query("SELECT * FROM gen_users
    WHERE username = '$_POST[username]'
    AND password = '$_POST[password]'")
    or die ("Error - Couldn't login user.");
    $row = mysql_fetch_array($query)
    or die ("Error - Couldn't login user.");
    if (!empty($row[username])) // he got it.
    {
      echo "success";
      exit();
    }
    else // bad info.
    {
      echo "comes in else part";
      exit();
    }
  }
?> 
```

如果我输入与 MySQL 数据库匹配的用户名和密码，那么它会向 Android 类抛出“成功”一词，并将在应用程序中走得更远。我的应用程序中有一个注册人员的显示列表视图。

我怎么知道现在有多少人在使用我的应用程序？在应用程序中登录的人将在列表视图中显示为绿色图像，其他人将显示为红色图像。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:31:51.123

除了@GlaciesofPacis 回答，您还可以执行以下操作之一：

1.  每隔一段时间向服务器发送一个请求，并检查谁在线或不在线。
2.  您可以使用客户端-服务器机制——它更复杂但更高效和优雅——并在某些客户端现在关闭或打开时使服务器推送到所有在线客户端。

我真的不知道你的应用程序应该做什么，但选项 2 - 在我看来 - 值得努力工作..

链接：

1.  [php 中的套接字服务器介绍](http://devzone.zend.com/209/writing-socket-servers-in-php/)
2.  [java中的socket服务器介绍](http://zerioh.tripod.com/ressources/sockets.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:26:27.650

尝试在您的用户表中添加一个关于登录状态的列（tinyint(1)，因为它是一个 MySQL 表）。它将填充为 0（表示已注销）或 1（已登录）。登录后，需要在数据库中将该值设置为 1，并在您的注销功能中设置回 0。这样，您可以使用类似于以下内容（假设使用 User 对象）：

```
<?php
$users = getUsers();
foreach($users as $user)
{
    $display = "";
    if($user->isLoggedIn())
    {
        $display .= '<img src="green.png" alt="Logged In" />';
    }
    else
    {
        $display .= '<img src="red.png" alt="Logged Out" />';
    }
    $display .= $user->getUsername().'<br />';
    echo $display;
}
?> 
```

更改表的 SQL 命令：

```
ALTER TABLE gen_users ADD COLUMN loggedin TINYINT(1) DEFAULT 0; 
```

# objective-c - 在 iOS 应用程序中编写 C 代码时 EXC BAD ACCESS

> ID：12478716
> 
> 赞同：2
> 
> 时间：2012-09-18T14:10:33.713
> 
> 标签：objective-c, c

我正在尝试在 ios 应用程序中使用纯 c 编程语言来实现一些功能。当方阵大小为 50（w=h=50）时，代码运行良好。如果我将矩阵的大小增加到 100，我会收到 EXC BAD ACCESS 消息。下面是我正在使用的代码：

```
 double solutionMatrixRed[w][h];
    double solutionMatrixGreen[w][h];
    double solutionMatrixBlue[w][h];
    double solutionMatrixAlpha[w][h];

    for(int x=0;x<w;x++)
    {
        for(int y=0;y<h;y++)
        {

            //NSLog(@"x=%d y=%d",x,y);
            solutionMatrixRed[x][y] = 0;
            solutionMatrixGreen[x][y] = 0;
            solutionMatrixBlue[x][y] = 0;
            solutionMatrixAlpha[x][y] = 0;
        }
    } 
```

即使 w=h=100，总大小也应该是 100*100*8 Bytes 即 80KB，这是正常的。谁能告诉我可能出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T14:21:01.957

^(您的代码在自动存储*)中分配所有四个矩阵，这可能是有限的。对于移动设备来说，即使是 80K 的四倍也可能太多了。

如果您需要处理那么多内存，请考虑使用以下方法从动态内存中分配它`malloc`：

```
double (*solutionMatrixRed)[h] = malloc((sizeof *solutionMatrixRed) * w);
// allocate other matrices in the same way, then do your processing
free(solutionMatrixRed); // Do not forget to free the memory. 
```

* * *

^*通常被称为“堆栈”，由在实现自动存储中经常使用的数据结构的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:21:05.187

我相信 iOS 中的堆栈大小限制为 512 KB。在 w = 100 和 h = 100 时，您的数组将需要大约 312.5 KB。我怀疑您超出了堆栈大小，应该尝试在堆上分配数组（使用 malloc() 分配数组）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T14:22:46.530

因为您试图在堆栈上分配所有内存。虽然您应该使用动态分配（malloc）在堆上分配它：

```
double **solutionMatrixRed = malloc(h * sizeof(double *));
for(i=0; i<h; i++)
    solutionMatrixRed[i] = malloc(w * sizeof(double)); 
```

# c# - Visual Studio 2012 如何绘制它的窗口边框？

> ID：12478717
> 
> 赞同：3
> 
> 时间：2012-09-18T14:10:43.153
> 
> 标签：c#, winforms, visual-studio-2012

如何使用 windows 窗体实现在新的 Visual Studio 2012 主窗口中可以看到的相同 alpha 边框效果？它的窗户似乎在发光。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T21:18:40.430

所以我不确定这是否是最好的方法，但如果你使用 Spy++（32 位）并查看窗口，你可以看到在 Visual Studio 的主窗口下方，你可以看到 4 个“VisualStudioGlowWindow”对象。

我在 Spy++ 中钩住了消息，正如你想象的那样，4 个窗口代表表单周围的 4 个发光边框。进一步检查表明，这 4 个“发光窗口”实现了 WS_EX_LAYERED 扩展窗口样式，因此发光本身并没有在 WPF 中完成（据我所知）！

希望这可以解决一些问题。

![在此处输入图像描述](../Images/7a172f0960f04054ba01f3d2e1b453be.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:14:22.243

[AFAIK，您可以使用这种 chrome](https://stackoverflow.com/questions/3372303/dropshadow-for-wpf-borderless-window)和自定义 WPF 边框的混合使用 WPF 来做到这一点。不确定是否可以在 WinForms 上使用，因为它的样式选项有限（与 WPF 相比）。无论如何[，他们正在使用 WPF](https://softwareengineering.stackexchange.com/a/75323/15884)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:14:43.863

除非您想自己处理整个表格，否则您不能。因为 Visual Studio 2010 和 Visual Studio 2012 是在 WPF 之上编写的，并且使用的是 Windows 而不是 Forms。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T18:27:32.770

Visual Studio 2012 使用本机 Win32 函数绘制其窗口边框。它与 WPF 或 WindowsForms 无关——您可以同时使用这两者。

发光在主窗口顶部的透明窗口上渲染。主窗口调用 DWM API 将玻璃区域设置为 0。这样您就可以在原始边框和系统按钮上进行绘制。这是执行此操作的正确方法。

您可以查看 WPF Shell (http://archive.msdn.microsoft.com/WPFShell) 的代码，了解如何调用 DWM 以移除玻璃。它编写为与 WPF 兼容的事实并不重要，因为您所需要的只是窗口的句柄 (IntPtr)。

如果您有 WindowsForms 代码库，请不要迁移到 WPF。WPF 在最新的 .NET 框架版本中没有得到改进，并且由于其团队已集成到 Windows 8 团队中，因此没有改进或新功能的路线图。

# visual-studio-2010 - 安装sql 2012 express后，visual studio开始报运行时错误

> ID：12478720
> 
> 赞同：1
> 
> 时间：2012-09-18T14:11:12.320
> 
> 标签：visual-studio-2010, visual-studio

我正在使用 Visual Studio 2010 专业版。

安装 sql 2012 express 后，我开始出错。

我在这里做了说明：

[http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/59147ba0-82d2-418a-a33d-08f75eb68387](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/59147ba0-82d2-418a-a33d-08f75eb68387)

(

1.从控制面板手动删除Visual Studio 2010 Sp1

2.使用此工具删除 Visual Studio 2010 [http://archive.msdn.microsoft.com/vs2010uninstall](http://archive.msdn.microsoft.com/vs2010uninstall)

和这个命令：完成（VS2010_Uninstall-RTM.ENU.exe /full /netfx））

我也删除了所有用户数据和关于 Visual Studio 的每个文件夹并重新安装。我已删除所有加载项。

但结果是一样的。

以下是错误：

![错误](../Images/97c1f17218b3338fee6fd3a15468f986.png)

[这是日志文件 (ActivityLog.xml)](http://www.seckindurgay.com/activitylog.rar) 我该如何更正？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:44:36.977

看着 regkey

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\ExtensionManager\EnabledExtensions 
```

我删除了一个带有很多问号的条目：`??????????????????`
所有开始工作正常。

# c# - 如何通过传递的变量名称访问参数

> ID：12478721
> 
> 赞同：0
> 
> 时间：2012-09-18T14:11:12.650
> 
> 标签：c#, .net

有没有办法访问通过参数的变量名传递给方法的参数？

```
btn_Click(object sender, EventArgs e)
{
    SortedList<int, string> paygrades = new SortedList<int, string>();
    populatePaygrades(paygrades, sqlconnection);
    doStuffWithLists(paygrades);
}

protected void doStuffWithLists(params SortedList<int,string>[] lists)
{
 doStuffWithSubList(lists.paygrades) //??? how can I access it similar to this?
} 
```

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:17:05.067

不可能，`paygrades`名称在函数中是本地的`btn_click`。除非`SortedList`不包含名为 paygrades 的字段（我向您保证不包含），否则您将不会完成任何事情。

如果要按名称访问子列表，可以扩展 SortedList 添加名称字段并按名称搜索第一个。

扩展排序列表：

```
class MySortedList: SortedList {
    private string name;
    public string Name{
        get { return this.name; }
        set { this.name=value; }
    }

    //you then need to wrap all the constructors you need from SortedList
} 
```

在您的代码中使用它

```
protected void doStuffWithLists(params MySortedList<int,string>[] lists){
    foreach(MySortedList l in lists){
        if(l.Name == "paygrades")
             doStuffWithSubList(l);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T14:19:21.897

你不能。传递给您的方法的变量名称在方法中不可用。

**编辑：**根据您在其他地方的评论，我显然对您尝试做的事情有错误的印象。您可以传递字典，而不是使用名称来扩充 SortedList。

```
 public void CallsDoStuffWithLists()
    {
        SortedList<int, string> theFirstList = new SortedList<int, string>();
        SortedList<int, string> aSecondList = new SortedList<int, string>();
        SortedList<int, string> thirdList = new SortedList<int, string>();
        SortedList<int, string> theLastList = new SortedList<int, string>();

        PopulateTheFirstList(theFirstList);
        PopulateTheSecondList(aSecondList);
        //etc
        // call do stuff with lists.
        DoStuffWithLists(new Dictionary<string, SortedList<int, string>>{{"theFirstList", theFirstList}, {"aSecondList",aSecondList}, {"thirdList", thirdList}, {"theLastList", theLastList}});
     }

    public void DoStuffWithLists(Dictionary<string, SortedList<int,string>> lists)
    {
        // does not loop through all, 
        // does not throw exceptions..
        // if there is a list that was misnamed, it will not be handled.
        SortedList<int, string> temp;
        if(lists.TryGetValue("theFirstList", out temp)) DoStuffWithSubList(temp);
        if(lists.TryGetValue("aSecondList", out temp)) DoStuffWithSubList(temp);

        // loops through each and acts on them accordingly.
        // if DoStuffWithLists is 
        foreach (var list in lists)
        {
            //or use switch statement.
            if(list.Key == "theFirstList")
            {
                DoStuffWithSubList(list.Value);
            }
            else if(list.Key == "aSecondList")
            {
                DoOtherStuffWithSublist(list.Value);
            }
            //etc...
            else
            {
                //we got an unexpected list, what do we do with it?
            }
        } 
```

**附带说明：**虽然我已经向您展示了如何做您想做的事，但这并不意味着这是一个好主意。在这种情况下，您似乎在增加复杂性而没有任何收获。您有更复杂且容易出错的代码，尽管您将数据检索与每个列表的数据处理分开，但您正在组合所有列表的数据处理。

您是否考虑过让 DoStuffWithLists 实际上也进行数据检索？更不容易出错，无需匹配名称。

```
btn_Click(object sender, EventArgs e)                           
{                           

    DoStuffWithLists();                           
}    
public void DoStuffWithLists()
{
    //this is far simpler and less error prone.
    SortedList<int, string> theFirstList = new SortedList<int, string>();
    PopulateTheFirstList(theFirstList);
    DoStuffWithSubList(theFirstList);

    SortedList<int, string> aSecondList = new SortedList<int, string>();
    PopulateTheSecondList(aSecondList);
    DoOtherStuffWithSublist(aSecondList);

} 
```

或者更好的是仍然有一个方法来完全处理每个 List 并调用它......

```
btn_Click(object sender, EventArgs e)                           
{   
    //this is simpler yet, separates the concerns of each type of list.                        
    HandlePayGrade();                  
    HandleSecondList();
    HandleThirdList();
}   
public void HandlePayGrade()
{
    // you are still separating your data access and processing concerns here.
    SortedList<int, string> paygrades = new SortedList<int, string>();                               
    populatePaygrades(paygrades, sqlconnection);       
    DoStuffWithPaygrades(paygrades);
} 
```

**编辑：下面的原始答案-** 根据您命名（列表）的方式，您似乎希望同时处理传递给 doStuffWithLists 的所有列表。情况并非如此，每次调用它都会处理一个已通过的列表。

使用整数的示例...

```
//Double an int is invoked 3 times, each time dealing with one integer.
public int DoubleAnInt(int x)
{
    return x+x;   
}

public void CallsDoubleAnInt()
{
    int a = 1;
    int b = DoubleAnInt(a);

    int c = DoubleAnInt(b);
    int d = DoubleAnInt(c);
} 
```

看起来你正试图让 doStuffWithLists 根据它被调用的位置而表现不同。在这种情况下，您只需要不同的方法。

```
protected void doStuffWithPaygradeLists(SortedList<int,string> list)
{
    ...
}

protected void doStuffWithSomeOtherLists(SortedList<int,string> list)
{
   ...
} 
```

# database - 数据库设计的方法，哪一种？

> ID：12478723
> 
> 赞同：1
> 
> 时间：2012-09-18T14:11:22.243
> 
> 标签：database, database-design

我正在设计一个包含交易列表的数据库。有两种交易类型，我将它们命名为贷方（添加到余额）和借方（从余额中提取）。

信用交易很可能会到期，之后该信用余额将不再有效，并且会丢失。

借记交易必须存储它们来自哪个贷记交易。

到期日总是有宽大处理的余地。它不需要精确（例如，直到一天的其余时间）。

我和我的朋友想出了两种不同的解决方案，但我们无法决定使用哪个，也许你们中的一些人可以帮助我们：

**解决方案1：**

3 个表：借方、贷方、借方贷方

```
Debit: id | time | amount | type | account_id (fk)
Credit: id | time | amount | expiry | amount_debited | accountId (fk)
DebitFromCredit: amount | debit_id (fk) | credit_id (fk) 
```

在表 Credit 中，amount_debited 可以在发生借记交易时更新。当发生借记交易时，DebitFromCredit 保存有关哪些贷记交易已撤回该借记交易的信息。

有一个函数`getBalance()`，它将根据到期日、金额和借记金额获取余额。所以天平没有物理存储；每次都会计算。

还可以添加一个 cron 作业来检查过期交易，并可能添加一个“过期”作为类型的借记交易。

**解决方案 2**

3 个表：Transactions、CreditInfo、DebitInfo

```
Transactions: id | time | amount (+ or -) | account_id (fk)<br />
CreditInfo: trans_id (fk) | expiry | amount | remaining | isConsumed<br />
DebitInfo: trans_id (fk) | from_credit_id (fk) | amount<br /> 
```

Table Account 添加了一个“余额”列，用于存储余额。（另一种可能性是总结此帐户的交易行）。

任何交易（贷方或借方）都存储在表交易中，金额的符号区分它们。

贷记时，会将一行添加到 creditInfo。

在借记时，会将一行或多行添加到 DebitInfo（以根据需要处理从多个贷项中借记）。此外，信用信息行更新“剩余”列。

cron 作业在 CreditInfo 表上运行，每当找到过期行时，它都会添加一条带有过期金额的借记记录。

**辩论**

解决方案 1 提供了两个表之间的区别，并且每个表的获取数据都非常简单。此外，由于并不真正需要 cron 作业（除非将过期数据添加为借方），`getBalance()`因此可以获得正确的当前余额。需要某种联接来获取用于报告的数据。没有多余的数据。

解决方案 2 将两个事务保存在一个表中，其中 + 和 - 表示金额，并且该表没有发生更新；只插入。信用信息将在到期（cron 作业）或借记时更新。单表查询以获取用于报告的数据。一些冗余。

**选择？**

您认为哪种解决方案更好？余额应该物理存储还是应该计算（考虑到它可能会使用 cron 作业进行更新）？哪个会更快？

另外，如果你们有更好的建议，我们也很乐意听到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:30:36.040

> 您认为哪种解决方案更好？

解决方案 2\. 只有插入的事务表更容易进行财务审计。

> 余额应该物理存储还是应该计算（考虑到它可能会使用 cron 作业进行更新）？

天平应物理存储。它比每次需要时读取所有交易行来计算余额要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:34:46.993

我是IT学生，已经通过了一门叫做数据库的课程，请原谅我的经验不足。

我使用 MySQL 工作台制作了这个，可以通过电子邮件将模型发送给您，不会浪费时间从图片中重新创建模型。

这个模式是在 10 分钟内完成的。它持有一家普通商店的交易。

![在此处输入图像描述](../Images/f51664ca35d50144138af228683b5b67.png) 架构说明 我有一个可以拥有多个电话和地址的人。人在进行交易时进行交易，

*   您输入卡名，例如美国运通卡、信用卡类型信用卡或借记卡（据我所知，MySQL 工作台没有域或作为 power-designer 的约束，所以我将字段类型保留为 varchar）应该有限输入字符串借记卡或信用卡，
*   卡到期日期，例如 8/12，
*   卡号 例如 1111111111
*   要减少的金额，例如 20.0
*   输入数据时输入事务程序的时间戳
*   并将其链接到通过 person_idperson 字段进行交易的人。例如 1

虽然表 person 中的 id 1 有名字 John Smith

这一切提供了什么：

1.  交易是唯一使用卡的。信用卡或借记卡不能两者都不能。
2.  速度较少的表连接系统的速度更快。

什么程序需要：

1.  输入交易时，字段变量exactTimestamp 的连续比较小于变量cardExpiery。
2.  不断输入卡的详细信息。

什么系统没有

1.  特殊字段中使用的节省金额，但是可以通过Sql查询来完成
2.  剩下的存钱，我查到一个个人信息，我的意思是你来店里店主问我你还有多少钱？
3.  系统不会明确地将人与卡绑定。该人必须在场并使用带有卡详细信息的卡，并保持该人的匿名性。（它应该是一个足够复杂的查询，不能由业余爱好者手动输入，例如店主），如果我想知道上次我得到他的最后一笔交易并提取卡字段时使用的卡人。

我希望你认为这只是一个提议。

# php - 我有这个错误“注意：使用未定义的常量测试 - 假定为'测试'。”

> ID：12478727
> 
> 赞同：0
> 
> 时间：2012-09-18T14:11:27.940
> 
> 标签：php, wordpress, phalanger

`Notice: Use of undefined constant test - assumed 'test'.`

我不确定这个错误来自哪里。我正在使用 Widget Logic Plugin 并且已完全更新，但我似乎无法找到此问题所在。有没有人遇到过这个问题并知道如何解决？

![在此处输入图像描述](../Images/7896a479ff90ab4f9ebcde5d64840b0a.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T14:13:13.787

最可能的答案是您错过了在代码中某处`$`调用`$test`和使用的变量上的 a。`test`

如果没有您的代码，这很难验证，但您所指的错误消息通常是在没有`$`开头的情况下编写变量时通常会发生的情况 - PHP 试图假设它是同名的常量。

第二个选项是有一个`'test'`缺少引号的数组索引，即`$array[test]`代替`$array['test']`.

编辑：如果您自己不编写任何代码，并且仅使用插件，您可能想做两件事：

*   看看你是否能在他们的代码中找到错误（搜索一个前面`test`没有 a的变量`$`
*   在他们的网站上提出一个错误，以便他们可以更新它

# magento - Magento 类别 URL 重定向到其他产品 url

> ID：12478728
> 
> 赞同：1
> 
> 时间：2012-09-18T14:11:29.887
> 
> 标签：magento

我有一个 URL 键是**Toys**的类别，这也是产品的 URL 键。因此，每次我访问 Toys.html 时，它都会被重定向到产品页面而不是类别一。

现在，我已将产品 URL 更改为其他内容，但类别页面仍仅重定向到产品页面。请告诉我如何解决这个问题。

这是类别[链接](http://www.eyaas.com/children-eyases/toys.html)

**更新**：-当我将玩具类别重命名为玩具竞技场时，它开始工作。所以我使用 Toys-arena.html 重命名了 URL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T15:08:23.080

进入magento管理区域，目录-> URL重写

然后，您可以搜索您的产品或类别 url，并编辑或删除它们。您可以删除您不再想使用的任何旧要求。

# python - Python 到 SQL Server 存储过程

> ID：12478731
> 
> 赞同：3
> 
> 时间：2012-09-18T14:11:47.960
> 
> 标签：python, sql-server, sqlalchemy

我正在尝试使用 sqlalchemy 从我的 Python 代码中调用 SQL Server 存储过程。我发现python代码没有引发错误，并且存储过程没有执行。

示例代码：

```
def SaveData(self, aScrapeResult):
    sql = "EXECUTE mc.SaveFundamentalDataCSV @pSource='%s',@pCountry='%s',@pOperator='%s',@pFromCountry='%s',@pFromOperator='%s',@pToCountry='%s',@pToOperator='%s',@pSiteName='%s',@pFactor='%s',@pGranularity='%s',@pDescription='%s',@pDataType='%s',@pTechnology = '%s',@pcsvData='%s'"

    #   Need to convert the data into CSV
    util = ListToCsvUtil()
    csvValues = util.ListToCsv(aScrapeResult.DataPoints)

    formattedSQL = sql % (aScrapeResult.Source ,aScrapeResult.Country,aScrapeResult.Operator ,aScrapeResult.FromCountry ,aScrapeResult.FromOperator ,aScrapeResult.ToCountry ,aScrapeResult.ToOperator ,aScrapeResult.SiteName ,aScrapeResult.Factor ,aScrapeResult.Granularity ,aScrapeResult.Description ,aScrapeResult.DataType ,aScrapeResult.Technology ,csvValues)

    DB = create_engine(self.ConnectionString)
    DB.connect()

    result_proxy = DB.execute(formattedSQL)

    results = result_proxy.fetchall() 
```

检查格式化的 SQL 产生以下命令

```
EXECUTE mc.SaveFundamentalDataCSV @pSource='PythonTest', @pCountry='UK',
  @pOperator='Operator', @pFromCountry='None', @pFromOperator='None', 
  @pToCountry='None', @pToOperator='None', @pSiteName='None', @pFactor='Factor', 
  @pGranularity='Hourly', @pDescription='Testing from python', 
  @pDataType='Forecast',@pTechnology = 'Electricity',
  @pcsvData='01-Jan-2012 00:00:00,01-Feb-2012 00:15:00,1,01-Jan-2012 00:00:00,01-Feb-2012 00:30:00,2'; 
```

使用的各种版本和软件如下： SQL Server 2008 R2 Python 2.6.6 SQLAlchemy 0.6.7

我已经通过使用相同参数直接在 SQL Server Management Studio 中调用它来测试我的存储过程，没有问题。

值得一提的是，这点 Python 版本和 SQL server 版本是不可更改的。我对 sqlalchemy 没有强烈的忠诚度，并对其他建议持开放态度。

任何建议将不胜感激，如果需要，可以提供更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:50:21.123

现在已修复，但如果我在这里使用最佳实践，请接受意见。我使用了 sqlalchemy 公开的“文本”对象，工作代码如下：

```
def SaveData(self, aScrapeResult):
    sql = "EXECUTE mc.SaveFundamentalDataCSV @pSource='%s',@pCountry='%s',@pOperator='%s',@pFromCountry='%s',@pFromOperator='%s',@pToCountry='%s',@pToOperator='%s',@pSiteName='%s',@pFactor='%s',@pGranularity='%s',@pDescription='%s',@pDataType='%s',@pTechnology = '%s',@pcsvData='%s'"

    #   Need to convert the data into CSV
    util = ListToCsvUtil()
    csvValues = util.ListToCsv(aScrapeResult.DataPoints)

    formattedSQL = sql % (aScrapeResult.Source ,aScrapeResult.Country,aScrapeResult.Operator ,aScrapeResult.FromCountry ,aScrapeResult.FromOperator ,aScrapeResult.ToCountry ,aScrapeResult.ToOperator ,aScrapeResult.SiteName ,aScrapeResult.Factor ,aScrapeResult.Granularity ,aScrapeResult.Description ,aScrapeResult.DataType ,aScrapeResult.Technology ,csvValues)

    DB = create_engine(self.ConnectionString)
    conn = DB.connect()

    t = text(formattedSQL).execution_options(autocommit=True)

    DB.execute(t)

    conn.close() 
```

希望这对其他人有帮助！

# android - 显示照片的拍摄日期？

> ID：12478736
> 
> 赞同：1
> 
> 时间：2012-09-18T14:12:06.253
> 
> 标签：android, date, imageview

我想在我的 ImageView 上显示照片的拍摄日期。假设我的 girdview 上有照片。一旦我单击它，它将转到其他活动并显示图像的完整尺寸。现在在那个活动中，我需要显示它的拍摄日期。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T17:06:38.327

我可以看到在 Android 上执行此操作的两种可能方式。第一个是文件修改日期，可以这样实现：

```
String pathToFile = "Your file path";
File file = new File(pathToFile);
if(file.exists()) {
    long date = file.lastModified();
    /* Do your modified date stuff here */
} 
```

另一种方法是检查图像上的 EXIF 数据以获取照片的拍摄日期（如果该信息可用）：

```
ExifInterface intf = null;
try {
    intf = new ExifInterface(path);
} catch(IOException e) {
    e.printStackTrace();
}

if(intf == null) {
    /* File doesn't exist or isn't an image */
}

String dateString = intf.getAttribute(ExifInterface.TAG_DATETIME);
/* Do your date/time stuff here */ 
```

请注意，图像的 Exif 数据可能不包含日期。大多数手机相机和商用相机都会添加日期/时间 Exif 条目，但在计算机上创建的图像不太可能包含 Exif 数据。此外，Exif 日期/时间的格式不是很好。Exif 日期/时间字符串示例：（`2012:06:02 14:33:46`取自我用 Nexus S 拍摄的图像）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T16:36:53.797

如果您只是简单地将每个图像从外部存储中读取为`File`，则`File`调用一个方法`lastModified()`来获取文件的修改日期。虽然这不一定是文件的创建日期，但对于像图像这样的不可变文件来说，它很可能是创建日期。

```
for (File file : files) {
    //This is the date the file was modified/created
    long date = file.lastModified();
    //You can even convert it to a Date if you want
    Date fileData = new Date(date);
} 
```

如果您的应用程序是在外部存储上创建图像的应用程序，并且您绝对只需要文件的初始创建日期，那么您最好在创建图像时自己将该信息存储在本地数据库中。这就是`MediaStore`框架的作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:31:48.187

您可以使用 a`RelativeLayout`将 the`ImageView`和 a`TextView`与日期结合起来，检查[这个答案](https://stackoverflow.com/a/7707452/642161)。

# c++ - C++ 帮助理解偏特化

> ID：12478737
> 
> 赞同：2
> 
> 时间：2012-09-18T14:12:10.480
> 
> 标签：c++, class, templates, partial-specialization

我正在阅读一些 chromium 项目源代码，我发现一件事我无法理解，有一个模板采用一个参数和部分专业化，如下所示：

```
template <class Sig>
class Callback;

template <typename R, typename A1,typename A2>
class Callback<R(A1,A2)>
{

}; 
```

然后我可以像这个例子一样创建对象：

```
Callback < float ( int , string ) > myCallback;
Callback < int ( float , int ) > myCallback2;
etc. 
```

我正在尝试理解这个表达式“ float (int , string) ”，这通常意味着什么？它是某种没有名称的函数签名吗？我完全糊涂了。

有人可以尝试解释它是如何工作的吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T14:22:01.370

它是一种函数类型。`float(int,string)`描述一个函数，它接受两个参数，一个是 type `int`，一个是 type `string`，并返回 a `float`。

您可以像这样为此函数类型编写 typedef：

```
typedef float function_type(int, string); 
```

你可以在 C 中做到这一点，但在 C 中，你只能对函数类型做一件事：创建一个指向它的指针：

```
void f(function_type*); 
```

在 C++ 中，这种类型也可以用作模板的参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T14:14:14.380

这意味着它是需要传递此模板的可调用类型，即函子或函数指针或`std::function<float(int,string)>`在您的特定情况下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T14:17:22.913

它是函数的*类型*。您可能已经熟悉函数指针/引用：`int(*)(float, int)`或`int(&)(double)`. 删除`*`or `&`，你就剩下类型：`int(float, int)`or`int(double)`等

你也可以 typedef 一个函数类型：

```
typedef int FuncType(short);
FuncType* funcPtr; // pointer to function that takes a short and returns an int 
```

# python - 谜题：没有循环/导入的递归生成器

> ID：12478738
> 
> 赞同：1
> 
> 时间：2012-09-18T14:12:11.803
> 
> 标签：python, generator

今天是发电机。我今天看到一个[问题](https://stackoverflow.com/questions/12472338/flattening-a-list-recursively)，想找到一种方法来递归地展平列表而不使用循环和导入。[tobias_k](https://stackoverflow.com/users/1639625/tobias-k)用以下代码回答它：

```
def flatten(test_list):
    if isinstance(test_list, list):
        if len(test_list) == 0:
            return []
        first, rest = test_list[0], test_list[1:]
        return flatten(first) + flatten(rest)
    else:
        return [test_list] 
```

有没有办法创建一个生成器（保持规则：没有导入，循环）？

注意：它纯粹是教育性的。我知道这不是最好的主意，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T14:16:59.887

在 Python 3.3（开发版）中，您可以使用该[`yield from`](http://www.python.org/dev/peps/pep-0380/)构造来避免显式循环：

```
def flatten(x):
    if isinstance(x, list):
        if x:
            first, rest = x[0], x[1:]
            yield from flatten(first)
            yield from flatten(rest)
    else:
        yield x 
```

在当前版本中，我想不出不使用`itertools.chain`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T14:47:19.850

[生成器函数](http://www.python.org/dev/peps/pep-0255/)是一个函数，它至少包含一条[`yield`语句](http://docs.python.org/reference/simple_stmts.html#the-yield-statement)，并且不包含`return`采用表达式的语句。当一个生成器函数被调用时，它返回一个生成器迭代器，它在迭代时（例如，通过`for`循环，或显式地使用`next`）遍历函数体，冻结其状态并将控制权返回给每个`yield`语句的调用者（在 Python 3.3 中） ,`yield from`陈述）。

Python 函数中的流控制总是向前的；如果没有设置当前帧之类的技巧`f_lineno`（正如（愚人节）[`goto`语句](http://entrian.com/goto/)所做的那样），控制到达较早点的唯一方法是使用循环（`for`或`while`）。因此，如果没有循环 or `yield from`，可以调用生成器迭代器的最大次数受生成器`yield`函数中的语句数限制。

`flatten`请注意，编写返回迭代器的 a 很容易；采用原始解决方案并写作`return iter(flatten(first) + flatten(rest))`就可以了。但这不会是生成器迭代器，函数也不会是生成器函数。

这是一个滥用`f_lineno`无循环迭代的实现。不幸的是，它必须使用`import sys`：

```
def current_frame():
    i = None
    def gen():
        yield i.gi_frame.f_back
    i = gen()
    return next(i).f_back

class Loop(object):
    jump = False
    def __call__(self, frame, event, arg):
        if self.jump:
            frame.f_lineno = self.lineno
            self.jump = False
        return None if event == 'call' else self
    def __enter__(self):
        import sys
        sys.settrace(self)
        current_frame().f_back.f_trace = self
        self.lineno = current_frame().f_back.f_lineno
        return self
    def __exit__(self, exc_type, exc_value, traceback):
        if exc_type is None:
            self.jump = True
        else:
            import sys
            sys.settrace(None)
            current_frame().f_back.f_trace = None
            return exc_type is StopIteration

def flatten(x):
    if isinstance(x, list):
        if x:
            first, rest = flatten(x[0]), flatten(x[1:])
            with Loop():
                yield next(first)
            with Loop():
                yield next(rest)
            pass
    else:
        yield x 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-18T14:46:54.177

完成单行列表理解：

```
def flatten (test_list):
    return [element for temp in test_list for element in flatten(temp)] if isinstance(test_list, list) else [test_list]

print(flatten([1, [2, 1, [3, 6, 7]], [1, 2, [3, 2, 3], 4, [1, 2, 3, 4, 5]]]))
#[1, 2, 1, 3, 6, 7, 1, 2, 3, 2, 3, 4, 1, 2, 3, 4, 5] 
```

# php - 不正确的字符集

> ID：12478742
> 
> 赞同：0
> 
> 时间：2012-09-18T14:12:31.717
> 
> 标签：php, html, character-encoding

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:20:29.823

That is because you have Unicode characters and you are subtracting exactly in a wrong place and that letter cannot be rendered anymore.

Instead you should subtract by spaces, eg:

```
echo implode(' ', array_slice(explode(' ', strip_tags(html_entity_decode($sentence, ENT_QUOTES, 'UTF-8'))), 0, 50)); // for 50 words 
```

or use [substr_unicode](http://de.php.net/manual/en/function.mb-substr.php):

```
function substr_unicode($str, $s, $l = null) {
    return join("", array_slice(
        preg_split("//u", $str, -1, PREG_SPLIT_NO_EMPTY), $s, $l));
} 
```

# php - 验证 SQL 查询是否没有返回结果

> ID：12478745
> 
> 赞同：0
> 
> 时间：2012-09-18T14:12:32.443
> 
> 标签：php

下面是我的代码。$data 是查询的结果，我希望 PHP 在没有返回结果时实现并显示回显“没有匹配的结果...”如果数据库确实返回结果，则回显表。当没有返回结果时，以下没有意识到......

```
if ($data == null) {

        echo "<strong>There were no Matching Results...Please Return to the '<a href='section_search.php'>Section Search Page</a>'</strong></br></br></br>";

     }

     else {
      echo "<table border=0 cellpadding=10>";
    echo "<tr align = center bgcolor=white>
    <td><b>Company</b></td><td><b>Section</b></td><td><b>Question</b></td><td><b>Answer</b></td>" ; 
     while($info = mysql_fetch_array( $data )) 
     { 
     echo "<tr>"; 
     echo "<td width = 60px><b>".boldText($info['company_name'], $kword) . "</b></td> ";
     echo "<td width = 60px><b>".boldText($info['section_name'], $kword) . "</b></td> "; 
     echo "<td width = 360px>".boldText($info['question'], $kword) . " </td>";
     echo "<td width = 600px>".boldText($info['answer'], $kword) . " </td></tr>"; 
     } 
     echo "</table>"; 
     }
    } 
```

任何帮助都会很棒！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:13:38.580

用于`mysql_num_rows`确定查询返回的结果数。如果是`0`，则没有结果。

但总的来说，您应该停止使用旧的遗留`mysql_`方法。它们被标记为[deprecated](http://news.php.net/php.internals/53799)。你可以使用[PDO](http://php.net/manual/en/book.pdo.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)

# deployment - 在 TFS 2012 中使用持续集成进行自动部署

> ID：12478747
> 
> 赞同：14
> 
> 时间：2012-09-18T14:12:37.797
> 
> 标签：deployment, tfs, continuous-integration, tfsbuild, web-deployment

我已经为 WCF 项目设置了持续集成，并希望使用 MSBuild Arguments 将应用程序自动部署到远程服务器，但它没有部署。

当运行一个新的构建时，所有的测试都通过了，所有的项目都构建了，但是网站没有被部署。此外，我没有从构建中得到任何错误，说任何事情都出错了。

我在远程服务器上打开了端口 8172 以确保可以连接到 IIS，甚至禁用了防火墙。

在构建配置中，我指定了以下参数；

```
/p:DeployOnBuild=True /p:DeployTarget=MsDeployPublish /p:DeployIisAppPath="Default Web Site/MYSite" /p:MsDeployServiceUrl=http://mysite.com /p:username=MySite\Administrator /p:password=thePassword 
```

我从以下示例编译了此配置：

[http://vishaljoshi.blogspot.co.uk/2010/11/team-build-web-deployment-web-deploy-vs.html](http://vishaljoshi.blogspot.co.uk/2010/11/team-build-web-deployment-web-deploy-vs.html)

[http://www.chrissurfleet.co.uk/post/2011/07/21/Setting-Up-Continuous-Deployment-In-TFS.aspx](http://www.chrissurfleet.co.uk/post/2011/07/21/Setting-Up-Continuous-Deployment-In-TFS.aspx)

我已将服务器的 IIS 配置为启用远程连接，并且可以从构建服务器远程管理 IIS。此外，我还使用 Visual Studio 2012 发布选项成功部署了应用程序。

谁能看到我的 MS Build Arguments 有问题？我错过了什么吗？

任何帮助将不胜感激

**更新：**

我检查了构建服务器以检查是否安装了 MS deploy 并安装了 Web Deploy 3.0 以确保这是可行的，但没有解决我的问题。

我检查了 IIS 连接日志以查看是否正在建立与 IIS 的远程连接，并且没有从我的构建服务器建立到应用程序服务器的连接。

我尝试使用以下命令手动在构建服务器上为解决方案和项目运行 MSBuild.exe：

MSBuild.exe "项目位置" /p:DeployOnBuild=True /p:DeployTarget=MsDeployPublish /p:MSDeployPublishMethod=WMSVC /p:DeployIisAppPath="Default Web Site/app" /p:MsDeployServiceUrl= [http://appserver:8172/ MSDeploy.axd](http://appserver:8172/MSDeploy.axd) /p:AllowUntrustedCertificate=True /p:CreatePackageOnPublish=False /p:Username=username /p:Password=password

MSBuild 正在成功构建项目，但没有尝试部署它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T16:06:26.957

原来问题是构建服务器上缺少文件，正如对这个问题的回答中所描述的那样：

[类似的问题](https://stackoverflow.com/questions/2607428/msbuild-target-package-not-found/6413635#6413635)

此外，在使用 Web 平台安装程序安装 Web Deploy 3.0 时，并没有安装所有必需的功能，以便通过 MSBuild 命令行远程连接到 IIS。

我将 nessesery 文件从我的开发机器复制到构建服务器并手动安装了具有所有功能的 Web Deploy 3.0，现在可以正常工作了！

也许 TFS 2012 有一个错误？？？

# node.js - socket.io-client 在断开连接时保持运行状态

> ID：12478750
> 
> 赞同：0
> 
> 时间：2012-09-18T14:12:51.933
> 
> 标签：node.js, socket.io

服务器.js

```
var io = require('socket.io').listen(3000);

io.sockets.on('connection', function (socket)
{
    console.log("server is connected");
    socket.on('disconnect', function ()
    {
        console.log("disconnected");
    });
}); 
```

客户端.js

```
var socket = require('socket.io-client')
            .connect('http://localhost:3000/')
            .on('connect', function ()
            {
                console.log("client connected");
                socket.disconnect();
            })
            .on('disconnect', function ()
            {
                console.log('client disconnected');
                //not going to finish the client.js app imediately.
            }); 
```

为什么？

socket.io-client 在断开连接事件后约 1 分钟保持运行状态。

是否有任何基本修复或智能解决方法？

node.js v0.8.8

socket.io v0.9.10

socket.io-client v0.9.10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:48:51.740

对我来说似乎是一个错误。如果您不想等待，可以`process.exit()`在断开回调中进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:27:37.343

我只是简单地按照以下方式完成。

客户端.js

```
var socket = require('socket.io-client')
        .connect('http://localhost:3000/')
        .on('connect', function ()
        {
            console.log("client connected");

            process.abort();

          //  socket.disconnect();
        })
        .on('disconnect', function ()
        {
            console.log('client disconnected');
        }); 
```

# java - 将带有日数据的 JFreeChart 时间序列系列转换为周或月数据？

> ID：12478758
> 
> 赞同：3
> 
> 时间：2012-09-18T14:13:17.420
> 
> 标签：java, jfreechart

我意识到这可能是一个愚蠢的问题，并且我知道可以通过确定每个数据点所在的周或月等来完成，但是，我正在寻找一种避免编码的方法。如果它是在图书馆中完成的（大概是所有的陷阱），我宁愿使用它。

原始数据存储在 Excel 电子表格中，但我无法直接操作电子表格。如果这是唯一的解决方案，我可以制作一个副本并进行操作，但这将是最后的手段。我目前正在将此数据用于 JFreeChart 图表，如果这有什么不同的话。我也愿意使用任何图书馆。

非常感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T16:50:11.620

没有人说你必须使用`TimeSeries`or `RegularTimePeriod`。工厂方法`ChartFactory.createTimeSeriesChart()`将接受任何`XYDataset`域表示从 Java [epoch](http://en.wikipedia.org/wiki/Epoch_%28reference_date%29)开始的毫秒数。下面的示例扩展`AbstractXYDataset`到合成一系列天。您的实现必须规范化 Excel 日期，这些日期使用不同的[epoch](http://en.wikipedia.org/wiki/Epoch_%28reference_date%29)。

附录：[Apache POI](http://poi.apache.org/)`DateUtil.getJavaDate()`包括执行转换的静态方法。结果时间可以直接用于您选择的数据集中。一个完整的例子可以在[这里](https://stackoverflow.com/a/3562214/230513)找到。

![图片](../Images/024cafc1a3a6e647ddd7be28a9e776aa.png)

```
import java.awt.Dimension;
import java.text.DateFormat;
import java.util.Date;
import javax.swing.JFrame;
import org.jfree.chart.*;
import org.jfree.chart.axis.DateAxis;
import org.jfree.chart.plot.XYPlot;
import org.jfree.data.xy.AbstractXYDataset;
import org.jfree.data.xy.XYDataset;

/** @see https://stackoverflow.com/a/12481509/230513 */
public class AbstractXYTest {

    private static XYDataset createDataset() {
        return new AbstractXYDataset() {

            private static final int N = 16;
            private final long t = new Date().getTime();

            @Override
            public int getSeriesCount() {
                return 1;
            }

            @Override
            public Comparable getSeriesKey(int series) {
                return "Data";
            }

            @Override
            public int getItemCount(int series) {
                return N;
            }

            @Override
            public Number getX(int series, int item) {
                return Double.valueOf(t + item * 1000 * 3600 * 24);
            }

            @Override
            public Number getY(int series, int item) {
                return Math.pow(item, 1.61);
            }
        };
    }

    private static JFreeChart createChart(final XYDataset dataset) {
        JFreeChart chart = ChartFactory.createTimeSeriesChart(
            "Test", "Day", "Value", dataset, false, false, false);
        XYPlot plot = (XYPlot) chart.getPlot();
        DateAxis domain = (DateAxis) plot.getDomainAxis();
        domain.setDateFormatOverride(DateFormat.getDateInstance());
        return chart;
    }

    public static void main(String[] args) {

        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        XYDataset dataset = createDataset();
        JFreeChart chart = createChart(dataset);
        ChartPanel chartPanel = new ChartPanel(chart) {

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(800, 300);
            }
        };
        f.add(chartPanel);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }
} 
```

# javascript - Jquery 函数在 Internet Explorer 中只能使用一半

> ID：12478760
> 
> 赞同：0
> 
> 时间：2012-09-18T14:13:31.633
> 
> 标签：javascript, jquery, internet-explorer

我在我的页面中添加了一个简单的功能，用于在单击某些选项卡时隐藏/显示窗格。世界上最简单的事情，对吧？

在 Firefox 和 Chrome 中完美运行，但在 IE 中只能运行一半。它将隐藏所有 sopMonthContainers，但无法找到具有匹配 ID 的容器并显示它。

```
 $('.sopTab').click(function(e){
    if ($(this).hasClass("activeTab") === false){
        $(".sopTab").removeClass("activeTab");
        $(this).addClass("activeTab");
        };
    var selectionID = $(this).attr("id");
    $(".sopMonthContainer").css("display", "none");
    $(".sopMonthContainer#the"+selectionID).css("display", "block");
 }); 
```

我希望这不是我忽略的一些愚蠢的错字，但我已经盯着这个东西看了近一个小时，尝试不同的主题变化。我尝试修改选择器 ID 以确保它们是唯一的（因此最后一行选择器中的“the”），我尝试仅使用 ID 进行选择，我尝试使用不同的方法来隐藏/显示...无论如何，结果都是一样的。

编辑：相关标记。它有一些冷融合元素，## 之间的任何东西都是冷融合变量。

```
<div class="sopTab" id="sopContainer#DateFormat(pubdate,'mmmm')#" style="">
    #DateFormat(pubdate,"mmmm")#: <span id="sum#DateFormat(pubdate,"mmmm")#">0</span>
</div>

<cfoutput query="GetProductBasicInfo">
    <div class="sopMonthContainer" style="display:none;" 
    id="theSopContainer#DateFormat(pubdate,'mmmm')#">
        [div content goes here]
     </div>
</cfoutput> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:57:19.187

请注意，例如：

```
<div class="sopTab" id="sopContainerNovember" style="">November: <span id="sumNovember">0</span></div>

<div class="sopMonthContainer" style="display:none;" id="theSopContainerNovember"> 
```

当您单击 sopTab 时，您构建的选择器是

```
#thesopContainerNovember
//  ^ 
```

但目标的 ID 是

```
#theSopContainerNovember
//  ^ 
```

ID 不匹配（大写和小写`s`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:17:40.010

我认为最后一行应该是

```
$(".sopMonthContainer #the"+selectionID).css("display", "block"); 
```

这里应该有一个空间。但我可能错了。如果您发布指向 jsFiddle 或工作示例的链接，将会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:40:09.327

您的页面中有错误。我注意到有一些代码看起来好像有人试图将其注释掉但没有正确执行。

在您的 sopQuery.cfm 文件中，在此处更改代码：

```
<script language="javascript">
<!--
  cfform_submit_status["productSelections"]=null;

  function check_TF_productSelections( theForm ){ 
    cfform_isvalid = true;
    cfform_error_message = "";
   cfform_invalid_fields = new Object();

    if ( cfform_isvalid ){
      return true;
    }else{
      alert( cfform_error_message );
      return false;
    }
  }

//-->
</script> 
```

对此：

```
<!--
<script language="javascript">

  cfform_submit_status["productSelections"]=null;

  function check_TF_productSelections( theForm ){ 
    cfform_isvalid = true;
    cfform_error_message = "";
   cfform_invalid_fields = new Object();

    if ( cfform_isvalid ){
      return true;
    }else{
      alert( cfform_error_message );
      return false;
    }
  }

</script>
--> 
```

或者...如果代码应该被取消注释，请将其更改为此，**但请注意错误将持续存在，因为变量`cfform_submit_status`未在任何地方定义：**

```
<script language="javascript">

  cfform_submit_status["productSelections"]=null;

  function check_TF_productSelections( theForm ){ 
    cfform_isvalid = true;
    cfform_error_message = "";
   cfform_invalid_fields = new Object();

    if ( cfform_isvalid ){
      return true;
    }else{
      alert( cfform_error_message );
      return false;
    }
  }

</script> 
```

大概它应该在这里定义：

`<script type="text/javascript" src="/bluedragon/scripts/cfform.js"></script>`

但我看了看，那个文件是空的。

# c# - 如果使用 || 怎么写？, && 更短？

> ID：12478763
> 
> 赞同：1
> 
> 时间：2012-09-18T14:13:34.183
> 
> 标签：c#, .net

如果我有这样的东西怎么办：

```
if (data == null || (data != null && (data.Count() != 3 || data.IsNotCorrect()))
{
  //error...
} 
```

数据 == null 然后 || (data != null) 部分有点难看。那是如何在c#中解决这个问题？

编辑：对不起！改为`data.IsCorrect()`_`data.IsNotCorrect()`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T14:16:15.550

好。`data.Count() != 3 || data.IsCorrect()`. 您的意思是，如果计数为 3，则数据不正确。那么为什么要使用额外的 if 条件而不是在内部进行检查呢？

```
if (data == null || data.IsCorrect())
{
  //error...
} 
```

**更新**

似乎对我将验证逻辑移到类内部的意思感到困惑。所有类都应负责确定在正确的 OOP 中什么是有效状态。这叫做封装。

自从引入 OR/Ms、映射器等以来，让调用者而不是类本身来确定什么是正确或不正确的整个想法越来越多。但事实是，不验证自己信息的类不是真正正确设计的 OOP 类。它们只是像 DTO 这样的容器。

这样做的危险在于，每个调用代码块都负责确保 DTO 包含正确和有效的信息。这意味着`n`在您的代码中有一些地方可以引入错误，而不仅仅是`1`.

这就是为什么我建议您将所有验证逻辑移到内部`IsCorrect`或任何您喜欢的名称。但是，如果你***真的***想根据基本的 OOP 原则进行编码，你不应该让类永远处于不一致的状态。正如我在下面的博客文章中所描述的那样。

[http://blog.gauffin.org/2012/06/protect-your-data/](http://blog.gauffin.org/2012/06/protect-your-data/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-18T14:15:40.023

你可以离开`(data != null && ... )`（即离开`...`部分）。

如果参数 before`||`计算为`true`（即为`data`null），`||`则不会计算 after 参数 - 因此您不必担心 null 引用异常。这称为*短路*。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-18T14:15:47.937

由于延迟评估，您可以删除第二个`data != null`检查，然后您不再需要括号，因为您只剩下`||`运算符：

```
if (data == null || data.Count() != 3 || data.IsCorrect()) 
```

当然，以上内容有点可疑（我本来希望看到的`!data.IsCorrect()`）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-18T14:17:53.693

`||`仅当左侧不正确时才评估右侧（短路`||`）

> 条件或运算符 ( `||`) 对其布尔操作数执行逻辑或。如果第一个操作数的计算结果为真，则不计算第二个操作数。如果第一个操作数的计算结果为 false，则第二个运算符确定整个 OR 表达式的计算结果为 true 还是 false。

*引自[`||`运算符（C# 参考）](http://msdn.microsoft.com/en-us/library/6373h346%28v=vs.71%29.aspx)（MSDN）*

将其应用于您的表达式：

```
data == null || (data != null && (data.Count() != 3 || data.IsCorrect()) 
```

这意味着何时`data != null`到达，`data`保证与 不同`null`，因此`data != null`保证为真，您可以将其省略。

因此，您的表达式等效于：

```
data == null || data.Count() != 3 || data.IsCorrect() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-18T14:15:57.797

只是摆脱`data != null`部分。由于您已经通过了语句的第一部分，因此您知道那个时候数据不为空，因此无需检查它。

```
if (data == null || (data.Count() != 3 || data.IsCorrect())) 
```

# c# - 具有已知键列表的延迟加载缓存的多线程实现

> ID：12478767
> 
> 赞同：2
> 
> 时间：2012-09-18T14:13:39.277
> 
> 标签：c#, c#-3.0

我正在使用.Net 3.5 开发一个多线程应用程序，它从存储在数据库中的不同表中读取记录。读数非常频繁，因此需要延迟加载缓存实现。每个表都映射到一个 C# 类，并有一个字符串列，可用作缓存中的键。此外，还需要定期刷新所有缓存的记录。我本可以在每次读取时锁定缓存以确保线程安全的环境，但后来我想到了另一种解决方案，它依赖于获取所有可能键的列表很简单这一事实。

所以这是我写的第一个类，它存储了使用双重检查锁模式延迟加载的所有键的列表。它还有一个方法可以在静态变量中存储上次请求刷新的时间戳。

```
public class Globals
{
    private static object _KeysLock = new object();
    public static volatile List<string> Keys;
    public static void LoadKeys()
    {
        if (Keys == null)
        {
            lock (_KeysLock)
            {
                if (Keys == null)
                {
                    List<string> keys = new List<string>();
                    // Filling all possible keys from DB
                    // ...
                    Keys = keys;
                }
            }
        }
    }

    private static long refreshTimeStamp = DateTime.Now.ToBinary();
    public static DateTime RefreshTimeStamp
    {
        get { return DateTime.FromBinary(Interlocked.Read(ref refreshTimeStamp)); }
    }
    public static void NeedRefresh()
    {
        Interlocked.Exchange(ref refreshTimeStamp, DateTime.Now.ToBinary());
    }
} 
```

然后我写了一个`CacheItem<T>`类，它是一个指定表T的缓存单项的实现，通过键过滤。它具有`Load`记录列表延迟加载的方法和`LoadingTimeStamp`存储最后一条记录加载的时间戳的属性。请注意，静态记录列表被本地填充的新记录覆盖，然后`LoadingTimeStamp`也被覆盖。

```
public class CacheItem<T>
{
    private List<T> _records;
    public List<T> Records
    {
        get { return _records; }
    }

    private long loadingTimestampTick;
    public DateTime LoadingTimestamp
    {
        get { return DateTime.FromBinary(Interlocked.Read(ref loadingTimestampTick)); }
        set { Interlocked.Exchange(ref loadingTimestampTick, value.ToBinary()); }
    }

    public void Load(string key)
    {
        List<T> records = new List<T>();
        // Filling records from DB filtered on key
        // ...
        _records = records;
        LoadingTimestamp = DateTime.Now;
    }
} 
```

最后，这里是`Cache<T>`将表 T 的缓存存储为静态字典的类。如您所见，该`Get`方法首先在缓存中加载所有可能的键（如果尚未完成），然后检查刷新的时间戳（两者都使用双重检查锁定模式完成）。调用返回的实例中的记录列表`Get`可以被线程安全地读取，即使锁内有另一个线程正在执行刷新，因为刷新线程不会修改列表本身，而是创建一个新列表。

```
public class Cache<T>
{
    private static object _CacheSynch = new object();
    private static Dictionary<string, CacheItem<T>> _Cache = new Dictionary<string, CacheItem<T>>();
    private static volatile bool _KeysLoaded = false;

    public static CacheItem<T> Get(string key)
    {
        bool checkRefresh = true;
        CacheItem<T> item = null;
        if (!_KeysLoaded)
        {
            lock (_CacheSynch)
            {
                if (!_KeysLoaded)
                {
                    Globals.LoadKeys(); // Checks the lazy loading of the common key list
                    foreach (var k in Globals.Keys)
                    {
                        item = new CacheItem<T>();
                        if (k == key)
                        {
                            // As long as the lock is acquired let's load records for the requested key
                            item.Load(key);
                            // then the refresh is no more needed by the current thread
                            checkRefresh = false;
                        }
                        _Cache.Add(k, item);
                    }
                    _KeysLoaded = true;
                }
            }
        }
        // here the key is certainly contained in the cache
        item = _Cache[key];
        if (checkRefresh)
        {
            // let's check the timestamps to know if refresh is needed
            DateTime rts = Globals.RefreshTimeStamp;
            if (item.LoadingTimestamp < rts)
            {
                lock (_CacheSynch)
                {
                    if (item.LoadingTimestamp < rts)
                    {
                        // refresh is needed
                        item.Load(key);
                    }
                }
            }
        }
        return item;
    }
} 
```

定期`Globals.NeedRefresh()`调用以确保刷新记录。此解决方案可以避免每次读取缓存时锁定，因为缓存中预先填充了所有可能的键：这意味着内存中将存在等于所有可能键的数量的实例数（大约 20 ) 对于每个请求的类型 T（所有 T 类型大约为 100），但仅对于请求的键，记录列表不为空。请让我知道此解决方案是否存在线程安全问题或任何错误。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:45:55.617

鉴于：

*   您加载所有密钥一次并且永远不会更改它们
*   您创建每个字典一次并且永远不会更改它
*   CacheItem.Load 是线程安全的，因为它只会`List<T>`用新的完全初始化的列表替换私有字段。

您根本不需要任何锁，因此可以简化代码。

唯一可能需要锁是为了防止并发尝试运行`CacheItem.Load`。就我个人而言，我只是让并发数据库访问运行，但如果你想阻止它，你可以在`CacheItem.Load`. 或者从 .NET 4 中捏一下，然后按照我对[上一个问题](https://stackoverflow.com/q/12403440/13087)`Lazy<T>`的回答中的建议使用它。

另一条评论是，您的刷新逻辑使用`DateTime.Now`，因此（a）在夏令时结束时时钟返回期间和（b）如果系统时钟已更新，则不会按预期运行。

我会简单地使用每次`NeedRefresh`调用时递增的静态整数值。

来自评论：

> 例如，如果两个线程......尝试同时加载公共 Globals.Keys 会发生什么？”

在应用程序启动时可能会发生一次这种情况的风险很小，但那又如何呢？这将导致从数据库中读取 20 个键两次，但性能影响可能可以忽略不计。如果你真的想防止这种情况，任何锁定都可以封装在一个类中，比如`Lazy<T>`.

> 关于使用 DateTime.Now 的评论实际上是一个有趣的点，但我想也许我可以假设这些事件可能在应用程序未使用时发生。

您可以“假设”，但不能保证。您的机器可能随时决定将其时间与时间服务器同步。

> 关于在 NeedRefresh 中使用整数的建议，我不明白如何将它与由 DateTime 表示的每个记录列表状态进行比较。

据我所知，您只使用`DateTime`来检查您的数据是在最近一次调用之前还是之后加载的`NeedRefresh`。因此，您可以将其替换为：

```
public static class Globals
{
    ...

    public static int Version { get {return _version; } }
    private static int _version;

    public static void NeedRefresh()
    {
        Interlocked.Increment(ref _version);
    }
}

public class CacheItem<T>
{
    public int Version {get; private set; }

    ...

    public void Load(string key)
    {
        Version = Globals.Version;

        List<T> records = new List<T>();
        // Filling records from DB filtered on key
        // ...
        _records = records;
    }
} 
```

然后在访问缓存时：

```
item = _Cache[key];
if (item.Version < Globals.Version) item.Load(); 
```

** 更新 2 **

回应评论：

> ...如果一个线程尝试读取字典，而另一个线程在锁内向其中添加项目，则可能存在真正的完整性风险，不是吗？

您现有的代码仅在加载全局键后立即将所有键添加到字典中，并且随后永远不会修改字典。因此，只要在字典完全构建之前不分配 _Cache 属性，这是线程安全的：

```
var dictionary = new Dictionary<string, CacheItem<T>>(Global.Keys.Count);
foreach (var k in Globals.Keys)                       
{                           
    dictionary.Add(k, new CacheItem<T>());
}
_Cache = dictionary; 
```

# api - 如何使用 Instagram 的 API 显示我自己的照片库？

> ID：12478772
> 
> 赞同：18
> 
> 时间：2012-09-18T14:13:51.837
> 
> 标签：api, instagram

我想使用 Instagram 的 API 在网页上显示我自己的照片库。这可能吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-18T16:43:30.240

看看这里：http: [//instagram.com/developer/endpoints/users/](http://instagram.com/developer/endpoints/users/)

大多数端点都要求对用户进行身份验证。无需认证即可检索标记图片和热门图片。为了显示您自己的，您需要一个用户使用 Instagram 登录。

**编辑：**检查一下： http: [//www.blueprintinteractive.com/blog/how-instagram-api-fancybox-simplified](http://www.blueprintinteractive.com/blog/how-instagram-api-fancybox-simplified)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-06-20T11:40:36.413

**方法 1 - 使用 Instagram API**

不，您并不总是需要访问令牌。您还可以在此 API 请求中使用客户端 ID - [https://api.instagram.com/v1/tags/nofilter/media/recent?client_id=CLIENT-ID](https://api.instagram.com/v1/tags/nofilter/media/recent?client_id=CLIENT-ID)

用户照片端点 -
[https://api.instagram.com/v1/users/](https://api.instagram.com/v1/users/) {user-id}/media/recent/?client_id=CLIENT-ID

您需要替换上述 URL 中的用户 ID。输出将是 JSON 响应，因此您必须自己显示照片。

**方法 2 - 使用插件**

您可以直接使用一个插件，将您的 Instagram 帐户中的照片嵌入您的网站。一个很好的例子是 - InstaMax 插件，它将显示您所有的照片、视频以及喜欢和评论。

这里有一个插件的小演示 ​​- [http://demos.codehandling.com/instamax_demo/instamax_live_edit.html](http://demos.codehandling.com/instamax_demo/instamax_live_edit.html)

**2016 年更新**

由于 Instagram API 的变化，方法 1 在 2016 年 6 月之后将无法使用。您需要让您的应用获得 Instagram 的批准，然后生成访问令牌。

1.  生成令牌是容易的部分。您可以从浏览器中简单地使用以下 API -

    [https://api.instagram.com/oauth/authorize/?client_id=CLIENT-ID&redirect_uri=REDIRECT-URI&response_type=token](https://api.instagram.com/oauth/authorize/?client_id=CLIENT-ID&redirect_uri=REDIRECT-URI&response_type=token)

2.  坦率地说，最难的部分是让你的 APP 从 Instagram 获得批准。我花了一个月的时间和几次拒绝来了解他们的平台政策是什么以及如何发送批准请求。

我建议您使用已经拥有批准应用程序的插件，以便您可以使用他们的应用程序为他们的插件生成令牌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-30T20:01:56.893

使用来自 CDN 的 jQuery 最新版本，然后：

```
 $(document).ready(function{
    var token = 'Your Access Token', 
        userid = 'Your User ID',
        num_photos = 10; // how much photos you want to get

    $.ajax({
        url: 'https://api.instagram.com/v1/users/' + userid + '/media/recent',
        dataType: 'jsonp',
        type: 'GET',
        data: {access_token: token, count: num_photos},
        success: function(data){
            console.log(data);
            for( n in data.data ){                  
                $('body').append('<div><img src="'+data.data[n].images.standard_resolution.url+'"></div>');
            }
        },
        error: function(data){
            console.log(data);
        }
    });
}) 
```

[演示](https://mavidunyakres.com/fotograflar)

# javascript - 在 Chrome 中解析日期（带时间）

> ID：12478774
> 
> 赞同：2
> 
> 时间：2012-09-18T14:13:56.033
> 
> 标签：javascript, datetime

以下代码似乎在 Firefox 中有效，但在 Chrome 中无效：

```
var d = Date.parse("Sep 23, 2012 24:0:0");
alert (d); 
```

它在 Firefox 中以毫秒为单位发出警报，但我在 Chrome 中得到一个 NaN。

当然，最后 3 个数字 (24:0:0) 可能不会算作“日期”，但我想有一个简单的解决方案来让代码跨浏览器工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:47:21.947

这应该适用于您列出的格式：

```
var parts = "Sep 23, 2012 21:1:2".match(/(.*) (\d+):(\d+):(\d+)/)
var d = new Date(parts[1])
d.setHours(parts[2])
d.setMinutes(parts[3])
var tstamp = d.setSeconds(parts[4]) 
```

不确定您最终是否想要一个 Date 对象或整数时间戳，但这应该让你们两个都受益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:27:38.070

Chrome似乎不支持时间...

试试`Date.parse("Sep 23, 2012");` 应该可以

Date.parse 不应该根据规范解析时间。您需要第三方代码。请参阅： [从 Javascript 中的用户输入将时间解析为 Date 对象的最佳方法是什么？](https://stackoverflow.com/questions/141348/what-is-the-best-way-to-parse-a-time-into-a-date-object-from-user-input-in-javas)

# java - 在 Java 中逐像素访问图像

> ID：12478775
> 
> 赞同：4
> 
> 时间：2012-09-18T14:14:01.170
> 
> 标签：java

是否有任何内置的 Java API 或类库用于访问给定图像中的像素？我打算做的是在另一张图片中搜索一张图片。例如： img1 是 24x24px ， img2 是 1024x768px 假设一个符号，类似于 img1 可能存在于 img2 中。现在我想获取类似于 img1 的符号的 X 和 Y 坐标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T14:16:04.067

是的，有，如果你有你的图像，`BufferedImage`那么使用该`getRGB(int x, int y)`方法来获取位置 (x, y) 处的像素值。

请参阅[`java.awt.image.BufferedImage`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T14:16:47.920

您可以[`getRGB(...)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html#getRGB%28int,%20int%29)在 Java `BufferedImage`类中使用该方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T14:17:53.770

如果你有`java.awt.image.BufferedImage`，你可以调用`getRGB()`，它返回一个`int`包含每个像素颜色值的 s 数组。

如果您的 Image 不是 的实例`BufferedImage`，则可以使用`java.awt.image.PixelGrabber`该方法获得相同的结果`setPixels()`。

# python - PyGTK/Gobject 等待挂起的任务

> ID：12478778
> 
> 赞同：1
> 
> 时间：2012-09-18T14:14:10.073
> 
> 标签：python, gtk, pygtk, gobject

我想在开始一项耗时的操作（将几兆字节的文本加载到 TextBuffer 中）之前修改我的 PyGTK 应用程序中一些标签的文本。但是当我尝试这样做时，标签更新直到 TextBuffer 开始加载文件（文本出现在查看器中）之后才会发生，这需要几秒钟，在此期间程序似乎已冻结。为了我的用户着想，我想在开始加载文件之前显示这些消息，按照我的代码编写顺序。我怎样才能做到这一点？有没有办法让我的程序等待 gobject 主循环中未决事件的执行？（这是我假设调用 gtk.Label.set_text 的地方）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:01:09.680

这会强制刷新屏幕：

```
##  force the refresh of the screen
            while gtk.events_pending():
                gtk.main_iteration() 
```

# go - 如何为 interface{} 设置任何值

> ID：12478779
> 
> 赞同：6
> 
> 时间：2012-09-18T14:14:12.337
> 
> 标签：go

我有以下代码：

```
package main

import (
   "fmt"
)

type Point struct {
    x,y int
}

func decode(value interface{}) {
    fmt.Println(value) // -> &{0,0}

    // This is simplified example, instead of value of Point type, there
    // can be value of any type.
    value = &Point{10,10}
}

func main() {
    var p = new(Point)
    decode(p)

    fmt.Printf("x=%d, y=%d", p.x, p.y) // -> x=0, y=0, expected x=10, y=10
} 
```

我想将任何类型的值设置为传递给`decode`函数的值。Go中是否有可能，或者我误解了什么？

[http://play.golang.org/p/AjZHW54vEa](http://play.golang.org/p/AjZHW54vEa)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T14:26:44.190

通常，仅[使用反射](http://play.golang.org/p/uMUOjvIs0c)：

```
package main

import (
    "fmt"
    "reflect"
)

type Point struct {
    x, y int
}

func decode(value interface{}) {
    v := reflect.ValueOf(value)
    for v.Kind() == reflect.Ptr {
        v = v.Elem()
    }
    n := reflect.ValueOf(Point{10, 10})
    v.Set(n)
}

func main() {
    var p = new(Point)
    decode(p)
    fmt.Printf("x=%d, y=%d", p.x, p.y)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:17:26.420

我不确定你的确切目标。

如果你想[断言](http://golang.org/ref/spec#Type_assertions)它`value`是一个指针`Point`并改变它，你可以这样做：

```
func decode(value interface{}) {
    p := value.(*Point)
    p.x=10
    p.y=10
} 
```

# jquery - SpringMvc 和 Ajax Restful Web 服务

> ID：12478783
> 
> 赞同：0
> 
> 时间：2012-09-18T14:14:22.633
> 
> 标签：jquery, ajax, spring, rest, spring-mvc

当我退出用户名字段时，我试图完成验证，但是对 ajax 和 jquery 来说是新手。下面是我的代码，由于是 jquery 的新手，我可能会遇到很多错误。我收到以下错误：

“网络错误：500 内部服务器错误 -

```
http://localhost:8084/crimeTrack/validateUserName.htm?userName=hello" 
```

Javascript：

```
 $(document).ready(function(){
            $('#userName').blur(function(evt){
                CheckAvailability();                    
            });
        });         

        function CheckAvailability() {
            $.getJSON(
                "validateUserName.htm",
                {userName: $('#userName').val()},
                function(){
                    alert('Sorry UserName Taken');
            });
        } 
```

@Controller：OfficerRegistrationController

```
 @RequestMapping(value="validateUserName.htm", method=RequestMethod.GET)
 public boolean validateUserName(@RequestParam String userName) throws Exception{
     if (officerdao.OfficerExist(userName)) {
         return true;
     }
     return false;
 } 
```

小服务程序：

```
 <bean name="/validateUserName.htm" class="com.crimetrack.web.OfficerRegistrationController"/> 
```

道官

```
public boolean OfficerExist(String userName){

    logger.info("About to check if officers existing");

    String sql = "SELECT userName FROM crimetrack.tbloffficers WHERE userName = ?";
    Map<String, Object> results = getJdbcTemplate().queryForMap(sql, userName);
    String dbUserName = (String)results.get("userName");

    logger.info("Checking if officers exist "+sql);

    if (dbUserName.equals(userName)) {

        return true;

    }else{

        return false;
    }       
} 
```

错误日志：

```
31693 [http-8084-1] DEBUG org.springframework.web.servlet.DispatcherServlet  - Bound request context to thread: org.apache.catalina.connector.RequestFacade@64e5b2  
31693 [http-8084-1] DEBUG org.springframework.web.servlet.DispatcherServlet  - DispatcherServlet with name 'crimetrack' processing GET request for [/crimeTrack/validateUserName.htm]  
31693 [http-8084-1] DEBUG org.springframework.web.servlet.DispatcherServlet  - Testing handler map [org.springframework.web.servlet.handler.SimpleUrlHandlerMapping@18ddc48] in DispatcherServlet with name 'crimetrack'  
31693 [http-8084-1] DEBUG org.springframework.web.servlet.handler.SimpleUrlHandlerMapping  - No handler mapping found for [/validateUserName.htm]  
31693 [http-8084-1] DEBUG org.springframework.web.servlet.DispatcherServlet  - Testing handler map [org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping@f6852d] in DispatcherServlet with name 'crimetrack'  
31703 [http-8084-1] DEBUG org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping  - Mapping [/validateUserName.htm] to HandlerExecutionChain with handler [com.crimetrack.web.OfficerRegistrationController@1735602] and 1 interceptor  
31703 [http-8084-1] DEBUG org.springframework.web.servlet.DispatcherServlet  - Testing handler adapter [org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter@15fc606]  
31703 [http-8084-1] DEBUG org.springframework.web.servlet.DispatcherServlet  - Testing handler adapter [org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter@1966070]  
31703 [http-8084-1] DEBUG org.springframework.web.servlet.DispatcherServlet  - Testing handler adapter [org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter@1959352]  
31703 [http-8084-1] DEBUG org.springframework.web.servlet.DispatcherServlet  - Last-Modified value for [/crimeTrack/validateUserName.htm] is: -1  
31713 [http-8084-1] DEBUG org.springframework.web.bind.annotation.support.HandlerMethodInvoker  - Invoking request handler method: public boolean com.crimetrack.web.OfficerRegistrationController.validateUserName(java.lang.String) throws java.lang.Exception  
31713 [http-8084-1] DEBUG org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerExceptionResolver  - Resolving exception from handler [com.crimetrack.web.OfficerRegistrationController@1735602]: java.lang.NullPointerException  
31723 [http-8084-1] DEBUG org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver  - Resolving exception from handler [com.crimetrack.web.OfficerRegistrationController@1735602]: java.lang.NullPointerException  
31723 [http-8084-1] DEBUG org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver  - Resolving exception from handler [com.crimetrack.web.OfficerRegistrationController@1735602]: java.lang.NullPointerException  
31723 [http-8084-1] DEBUG org.springframework.web.servlet.DispatcherServlet  - Cleared thread-bound request context: org.apache.catalina.connector.RequestFacade@64e5b2  
31723 [http-8084-1] DEBUG org.springframework.web.servlet.DispatcherServlet  - Could not complete request  
java.lang.NullPointerException  
    at com.crimetrack.web.OfficerRegistrationController.validateUserName(OfficerRegistrationController.java:125)  
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)  
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)  
    at java.lang.reflect.Method.invoke(Unknown Source)  
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)  
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)  
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)  
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)  
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)  
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)  
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)  
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)  
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)  
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)  
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)  
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)  
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)  
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)  
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)  
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)  
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)  
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)  
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)  
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)  
    at java.lang.Thread.run(Unknown Source)  
31723 [http-8084-1] DEBUG org.springframework.web.context.support.XmlWebApplicationContext  - Publishing event in WebApplicationContext for namespace 'crimetrack-servlet': ServletRequestHandledEvent: url=[/crimeTrack/validateUserName.htm]; client=[127.0.0.1]; method=[GET]; servlet=[crimetrack]; session=[null]; user=[null]; time=[30ms]; status=[failed: java.lang.NullPointerException]  
31723 [http-8084-1] DEBUG org.springframework.web.context.support.XmlWebApplicationContext  - Publishing event in Root WebApplicationContext: ServletRequestHandledEvent: url=[/crimeTrack/validateUserName.htm]; client=[127.0.0.1]; method=[GET]; servlet=[crimetrack]; session=[null]; user=[null]; time=[30ms]; status=[failed: java.lang.NullPointerException] 
```

浏览器出错

org.springframework.web.util.NestedServletException：请求处理失败；嵌套异常是 java.lang.IllegalArgumentException: Invalid handler method return value: false org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894) org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:第778章）

根本原因

java.lang.IllegalArgumentException：无效的处理程序方法返回值：false org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter$ServletHandlerMethodInvoker.getModelAndView(AnnotationMethodHandlerAdapter.java:971) org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter .invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:438) org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424) org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923) org .springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852) org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) org.springframework.web.servlet.FrameworkServlet。doGet(FrameworkServlet.java:778) javax.servlet.http.HttpServlet.service(HttpServlet.java:617) javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:27:29.697

评论已经失控，因此要创建一个尝试的答案，并在事情发生变化时进行编辑。

我假设您可能正在使用您的 queryForMap 方法签名中的 SimpleJdbcTemplate

```
queryForMap(String sql, Object args...) 
```

要尝试的一件事是代替 Map，也许只尝试查询 Object，因为您知道您只是在查询用户名。

IE

```
getJdbcTemplate().queryForObject("select username...", String.class, userName) 
```

我还将专门为此 DAO 创建一个 JUnit 集成测试，该测试针对数据库，以便更轻松地调试导致问题的原因。有时异常可能会被重新抛出，等等，并且对于实际导致问题的原因可能会感到困惑。

试试这些，让我知道会发生什么，可能会使事情更容易调试。

一个示例 JUnit 可能如下所示

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"path/to/app/config.xml"})
public class IntegrationTestOfficerDao {
  @Autowired
  private OfficerDao officerDao;

  @Test
  @Rollback(value=true)
  @Transactional
  public void testUserExists()
  {
     // This would create the user and persist it
     OfficerUser user = createUser(...);
     assertTrue(officerDao.OfficerExist(user.username()));
  }
} 
```

# python - 从 2D 切片在 python 中创建 3D 图

> ID：12478788
> 
> 赞同：2
> 
> 时间：2012-09-18T14:14:38.997
> 
> 标签：python, plot

我想用 python 从一系列 2D 切片中绘制一个 3D 框。切片都是黑白的。我猜最后只会看到盒子的表面，因为黑色区域会覆盖白色的内部。至少这对我的目的也足够了。最好的办法是我可以添加 PNG 格式的单个切片（大约 200 个）来制作 3D 框。

这对python有可能吗？或者是否有任何其他程序可以代替？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:53:48.917

也许您可以通过提取 2D 切片的外表面来构建网格。[matplotlib](http://matplotlib.org/examples/mplot3d/surface3d_demo2.html)可以渲染简单的表面并将结果保存为 PNG 格式。

# cakephp - 编译 cakephp 应用程序时出现 hiphop-php 错误

> ID：12478793
> 
> 赞同：1
> 
> 时间：2012-09-18T14:15:03.367
> 
> 标签：cakephp

我正在尝试通过 Hiphop 编译我的 CakePHP 应用程序。

安装步骤后我遵循。

```
cd /root/hiphop/
export CMAKE_PREFIX_PATH=`pwd`/local
cd /root/hiphop/hiphop-php
export HPHP_HOME=`pwd`
export HPHP_LIB=`pwd`/bin
$HPHP_HOME/src/hphp/hphp test.php --keep-tempdir=1 --log=3
/tmp/path of the program -m server -p 80 
```

以上步骤对我有用。当我试图编译我的 CakePHP 应用程序时，它会给出如下所示的错误。

```
/tmp/hphp_AWLsty/php/lib/Cake/Utility/CakeTime.cpp: In static member function 'static HPHP::Variant HPHP::c_CakeTime::t_listtimezones(HPHP::Variant, const HPHP::Variant&, const HPHP::Variant&)':\n/tmp/hphp_AWLsty/php/lib/Cake/Utility/CakeTime.cpp:2519: error: 'q_DateTimeZone___ALL' was not declared in this scope\nmake[2]: *** [CMakeFiles/program.dir/php/lib/Cake/Utility/CakeTime.cpp.o] Error 1\nmake[1]: *** [CMakeFiles/program.dir/all] Error 2\nmake: *** [all] Error 2\n
compiling and linking CPP files took 11'59" (719602 ms) wall time
hphp failed
running hphp took 12'06" (726606 ms) wall time 
```

参考链接以编译 CakePHP 应用程序。[http://bakery.cakephp.org/articles/lorenzo/2012/01/30/running_cakephp_using_the_facebooks_hiphop_compiler](http://bakery.cakephp.org/articles/lorenzo/2012/01/30/running_cakephp_using_the_facebooks_hiphop_compiler)

# magento - Magento 层级价格批量更改

> ID：12478798
> 
> 赞同：0
> 
> 时间：2012-09-18T14:15:37.327
> 
> 标签：magento, updates, bulk

我需要一点帮助 - 下面是 Magento 中价格更新的示例 og php 代码，有人可以给我一个提示如何在此代码中放置关系。

例如，我需要这样：如果价格 >=500，则 tier= 1.8 下面的代码会提高所有价格，但我只需要提高等于或贵于 500 美元的产品的价格。

```
<?php

$server     = "localhost";
$database   = "";
$user       = "";
$password   = "";

$myConn = mysql_connect( $server, $user, $password ); 
$select = mysql_select_db( $database, $myConn );

$query = "SELECT
            value_id, value
        FROM
            catalog_product_entity_decimal
        ORDER BY
            value_id
        ASC";

$result = mysql_query($query) or die(mysql_error()); 

// 1.04 = 4% (duh) ovdje idu postavke marze
$tier   = 1.04;
$i      = 0;

while( $row = mysql_fetch_array($result) )
{
    if( $row["value"] != NULL )
    {
        $value          = 0;
        $value          = $row["value"];

        $value          = round( $value * $tier );

        $updQuery = "UPDATE
                        catalog_product_entity_decimal
                    SET
                        value = ".$value."
                    WHERE
                        value_id = ".$row["value_id"];

        $updResult = mysql_query($updQuery) or die(mysql_error());

        $i++;

        print "value_id: ".$row["value_id"]." | ";
        print "old price: ".$row["value"]." -> ";
        print "new price: ".$value."<br/>";
    }

}

print "<br/><br/><hr><br/><b>".$i."</b> records updated.<br/><br/>Now go to system -> index management -> and reindex everything"; 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:51:33.863

```
The Magento way
$tier = 1.04;
$products = Mage::getModel('catalog/product')->getCollection
    ->addAttributeToFilter('price' , array( 'gteq' => 500))
    ->load();
foreach($products as $product){
    $product->setPrice($product->getPrice() * $tier);
    $product-save();
}

sql direct query
//first get price attribute id
$sql = 'select attribute_id from eav_attribute where attribute_code= "price"';
$attribute_id = mysql_query($sql);

//get entity id  which price >=500
$sql = "select eneity_id from catalog_product_entity_decimal d where attribute_id = {$attribute_id[0]} and d.value >= 500";
while($row = mysql_fetch_array($result)){
    // do something
} 
```

# javascript - Javascript，从链接中删除参数

> ID：12478801
> 
> 赞同：0
> 
> 时间：2012-09-18T14:15:40.900
> 
> 标签：javascript, replace, trim

我想做的是创建一个小的 Chrome 扩展程序，它将自动`&bar=`从链接列表中修剪参数

所以一个链接，如：

```
http://www.website.com/page&foo=2&bar=3 
```

变成：

```
http://www.website.com/page&foo=2 
```

或者，只需复制链接即可删除`&bar=`参数的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:18:17.670

使用`replace`，例如：

```
var s = 'http://www.website.com/page&foo=2&bar=3';
s.replace(/&bar=[^&]*/, ""); 
```

# php - 为什么 PHP + MySQL 默认不使用文件缓存？

> ID：12478803
> 
> 赞同：1
> 
> 时间：2012-09-18T14:15:46.347
> 
> 标签：php, mysql, caching

如果我理解正确，从文件而不是数据库中检索数据要便宜得多。那么，为什么当我们使用时，`SELECT`MySQL 不会从每次使用时创建或更新的文件中检索数据`UPDATE`，等等？还有原因是安全问题吗？`INSERT``DELETE`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T14:19:48.750

问问自己：什么*是*数据库？它是一个以某种方式在某处存储数据并让您再次检索数据的程序。数据库以某种方式将这些数据存储在文件中以及在幕后某处。MySQL 通常作为守护进程运行。你联系那个守护进程并要求它提供数据。数据的来源完全取决于 MySQL。很多时候，它会从 RAM 中检索这些数据，这比打开文件并从那里读取要便宜得多*。*如果数据没有碰巧已经在 RAM 中，*那么*它将从文件中检索它。

所以，你的问题被误导了。MySQL*确实*在某些时候从文件中获取数据。不过，这*不一定*“便宜得多”。从将数据保存在 RAM 中的数据库中获取它可能会或可能不会更便宜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:19:21.490

也许您有兴趣了解有关 MySQL 查询缓存的更多信息：http: [//dev.mysql.com/doc/refman/5.1/en/query-cache.html](http://dev.mysql.com/doc/refman/5.1/en/query-cache.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T14:19:53.067

MySQL 通常默认使用一些缓存方法进行查询（查询缓存）。当然，缓存存储在内存中；）

除了 MySQL 基本上已经从文件中检索数据（取决于您的表引擎，您的整个数据库可能是一个文件），所以......

来源：[http ://dev.mysql.com/doc/refman/5.0/en/query-cache-configuration.html](http://dev.mysql.com/doc/refman/5.0/en/query-cache-configuration.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T14:18:29.870

当然是的。但是你应该使用**Memcache**或**APC**，这样你就可以有过期时间。不仅如此，例如，当您在管理面板中更新某些内容时，您可以删除指定的特定键以在下次加载时刷新该内容（点击数据库并保存直到下次更新或过期）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T14:22:57.747

如果您使用 MySql 作为文档存储，而不是作为关系数据库，那么如果写为 'file_get_contents("123.data")' ，那么“从 id=123 的事物中选择 *”*可能会更快*

如果您使用 MySql 作为数据库，那么 'select * from thing where name like "%doe%"' 将变成 '打开每个文件，检查名称字段，如果匹配将其添加到结果，下一个文件'，除非你有少量数据会慢得多。此外，当您在 php 中编写关系数据库时，任何类型的类似联接的操作都会变得令人头疼。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T17:05:20.427

从文件而不是数据库中检索数据并不便宜。数据库中的数据也存储在文件中，但以优化的方式存储，因此检索速度要快得多。在这里，我考虑文件和数据源位于同一台机器上。在这两种情况下，检索都是 I/O 受限的。

如果您想正确缓存，您应该使用 APC 或 Memcached 或两者兼而有之。您可以将 APC 用作本地缓存（存储应用程序配置、语言常量等），而您可以将 memcached 用作单独的缓存（用户信息、会话等）。

您还可以使用 MySQL 查询缓存，如果您有一个体面的写入繁重的应用程序，那么这不是一个好主意。此外，如果由于等待查询缓存互斥锁而导致对应用程序的写入过多，查询缓存可能会暂停您的查询。

# c# - 当您将方法内的局部变量的引用分配给公共静态变量时会发生什么

> ID：12478811
> 
> 赞同：4
> 
> 时间：2012-09-18T14:16:05.380
> 
> 标签：c#, static, heap-memory, stack-memory

同时在互联网上阅读我了解到**静态变量总是具有相同的内存地址。**因此，在编译程序时，编译器将决定分配给静态变量的内存地址。**阅读让我想到当你这样做时会发生什么：**

```
class Foo {}

class Program
{
    public static Foo someStaticVar;

    static void Main(string[] args)
    {
        Foo localVariable = new Foo();

        int x = 4;

        someStaticVar = localVariable; // is someStaticVariable still will have the same address?
    } 
    // variable x will be pushed of the stack
    // localVariable will be pushed of the stack
    // what happens then with someStatic var? 
} 
```

我还了解到，在方法中声明变量时，它们将在创建时被推入堆栈，并在方法返回时弹出堆栈。如果这一切都是真的，那么 someStaticVar 应该消失，但它不会。

我确信我一定理解错了。或者，也许在线 `someStaticVar = localVariable;`正在执行该对象的深拷贝，但我对此表示怀疑，因为互联网上有很多关于如何对对象进行深拷贝的问题，它们与这种方法有很大不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T14:19:12.413

在您提供的示例中，`localVariable`它只是该`Main`方法的一个局部变量。一旦 Main 方法结束执行，它就会超出范围。但是由于您已将其分配给静态字段，因此创建的 Foo 实例将继续存在于 Main 方法之外。并且由于它是静态字段，它甚至会存在于 Program 类之外。

所以这就是一步一步发生的事情：

```
static void Main(string[] args)
{
    // an instance of Foo is created and pushed on the heap
    // localVariable is now pointing to the address of this instance
    // localVariable itself is stored on the stack
    Foo localVariable = new Foo();

    // someStaticVar is now pointing to the same location on the heap as
    // the localVariable - the Foo instance created earlier
    someStaticVar = localVariable; 
} 
// at this stage the Main method finishes executing and all local
// variables are falling out of scope. But since you have a static variable
// pointing to the Foo instance that was created inside the Main method this
// instance is not illegible for garbage collection because there are still 
// references to it (someStaticVar). 
```

如果`someStaticVar`是一个实例字段并且不是静态的，那么将发生相同的过程，只是一旦不再有对包含类（程序）的任何引用，该实例将超出范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T14:26:38.493

在方法中声明变量时，它们将在创建时被压入堆栈，并在方法返回时弹出堆栈。

> Foo localVariable = new Foo();

将在堆上创建 Foo 对象，并且引用存储在堆栈上。当方法完成时，引用从堆栈中删除。垃圾收集器将完成从堆中删除 Foo 的工作，因为不会引用 Foo 对象。但，

> someStaticVar = localVariable;

，将导致 someStaticVar 引用堆上的 Foo 对象。即使在方法退出后， someStaticVar 仍将引用 Foo 对象。所以，垃圾收集器不会收集那个 Foo 对象。 **主要要记住的是，当创建引用类型的对象时，对象是在堆上创建的，而引用存储在堆栈上。**

**问题是“静态字段存储在哪里？”，对象的实例字段存储在堆上，局部变量存储在堆栈上，但是“静态变量存在于内存中的哪个位置？** ”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T14:23:31.667

没有对象的深拷贝：对象本身存储在堆上，而不是堆栈上。你是对的，`someStaticVariable`总是有相同的地址。我相信您的误解在于该地址*存储的内容。*

当您声明一个引用类型的变量（任何`object`类型，例如`Foo`在您的代码中）时，变量本身并不是对象：它是一个存储对象*地址*的变量。该地址只是一个数字。所以，“的地址`someStaticVariable`”不是`Foo`它本身的地址；它是*地址的*地址`Foo`。

同样，这就是为什么你`someStaticVar`不会“消失”的原因。在您的代码中发生的是 a`Foo`在内存中的某个地址创建，并*设置*为`localVariable`表示. 当您执行时，会发生*地址*是从复制到的，因此两个变量指向相同。消失时，不受影响。*`Foo``someStaticVar = localVariable`*`localVariable``someStaticVar``Foo``localVariable``someStaticVar`**

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T14:25:41.207

在这种情况下`Foo`是一个类，所以它是一个引用类型。类型变量`Foo`实际上只是指向内存中`Foo`实际存储对象的位置的指针。

当说静态变量具有恒定的内存地址时，**并不是**说该内存地址的值是恒定的。指向对象的指针的地址`Foo`不会改变，但存储在该固定内存位置的数字（在本例中为地址）很容易在各种潜在`Foo`对象（或`null`）之间变化。

除此之外，由于 C# 是一种托管语言而不是非托管语言，因此甚至不能说静态变量将具有恒定的内存地址。这当然是*可能的*，但它确实是您不应该依赖的 C# 内存管理器的实现细节。**

# android - 如何在表格布局底部显示按钮？

> ID：12478818
> 
> 赞同：1
> 
> 时间：2012-09-18T14:16:21.913
> 
> 标签：android, tablelayout, ui-design

我已经下载了示例 tablelayout 源代码，它工作正常。我试图在表格布局的底部显示四个图像按钮，但它仍然无法正常工作。

当前图像： ![在此处输入图像描述](../Images/ad764416ede16711f7fdf806a3be157f.png)

我试图在表格布局的底部显示这 4 个按钮： ![在此处输入图像描述](../Images/68fd6b57c90171f1697c263208df67c8.png)

这是我的代码：我希望将我的源代码合并到我的表格布局底部，请帮助我。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/ttt3"
        android:layout_width="150dip"
        android:layout_height="40dip"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:background="@drawable/bt_blue" />

    <Button
        android:id="@+id/ttt2"
        android:layout_width="150dip"
        android:background="@drawable/bt_yellow"
        android:layout_height="40dip"
        android:layout_alignParentBottom="true"
        android:layout_marginRight="20dp"
        android:layout_toLeftOf="@+id/ttt3"
         />

    <Button
        android:id="@+id/ttt1"
        android:layout_width="150dip"
       android:background="@drawable/bt_green"
        android:layout_height="40dip"
        android:layout_alignParentBottom="true"
        android:layout_marginRight="20dp"
        android:layout_toLeftOf="@+id/ttt2"
         />

    <Button
        android:id="@+id/ttt0"
        android:layout_width="150dip"
        android:layout_height="40dip"
        android:background="@drawable/bt_red"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:gravity="bottom"
         />

</RelativeLayout> 
```

表代码：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:shrinkColumns="*"
    android:stretchColumns="*">
    <TableRow
        android:id="@+id/tableRow4"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:gravity="center_horizontal">
        <TextView
            android:id="@+id/textView9"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textStyle="bold"
            android:typeface="serif"
            android:textSize="18dp"
            android:text="Weather Table"
            android:gravity="center"
            android:layout_span="6"></TextView>
    </TableRow>
    <TableRow
        android:id="@+id/tableRow1"
        android:layout_height="wrap_content"
        android:layout_width="match_parent">
        <TextView
            android:id="@+id/TextView04"
            android:text=""></TextView>
        <TextView
            android:id="@+id/TextView04"
            android:text="Feb 7"
            android:textStyle="bold"
            android:typeface="serif"></TextView>
        <TextView
            android:id="@+id/TextView03"
            android:text="Feb 8"
            android:textStyle="bold"
            android:typeface="serif"></TextView>
        <TextView
            android:id="@+id/TextView02"
            android:text="Feb 9"
            android:textStyle="bold"
            android:typeface="serif"></TextView>
        <TextView
            android:id="@+id/TextView01"
            android:text="Feb 10"
            android:textStyle="bold"
            android:typeface="serif"></TextView>
        <TextView
            android:text="Feb 11"
            android:id="@+id/textView1"
            android:textStyle="bold"
            android:typeface="serif"></TextView>
    </TableRow>
    <TableRow
        android:layout_height="wrap_content"
        android:id="@+id/tableRow2"
        android:layout_width="match_parent">
        <TextView
            android:text="Day High"
            android:id="@+id/textView2"
            android:textStyle="bold"></TextView>
        <TextView
            android:id="@+id/textView3"
            android:text="28°F"
            android:gravity="center_horizontal"></TextView>
        <TextView
            android:text="26°F"
            android:id="@+id/textView4"
            android:gravity="center_horizontal"></TextView>
        <TextView
            android:text="23°F"
            android:id="@+id/textView5"
            android:gravity="center_horizontal"></TextView>
        <TextView
            android:text="17°F"
            android:id="@+id/textView6"
            android:gravity="center_horizontal"></TextView>
        <TextView
            android:text="19°F"
            android:id="@+id/textView7"
            android:gravity="center_horizontal"></TextView>
    </TableRow>
    <TableRow
        android:layout_height="wrap_content"
        android:id="@+id/tableRow2"
        android:layout_width="match_parent">
        <TextView
            android:text="Day Low"
            android:id="@+id/textView2"
            android:textStyle="bold"></TextView>
        <TextView
            android:text="15°F"
            android:id="@+id/textView3"
            android:gravity="center_horizontal"></TextView>
        <TextView
            android:text="14°F"
            android:id="@+id/textView4"
            android:gravity="center_horizontal"></TextView>
        <TextView
            android:text="3°F"
            android:id="@+id/textView5"
            android:gravity="center_horizontal"></TextView>
        <TextView
            android:text="5°F"
            android:id="@+id/textView6"
            android:gravity="center_horizontal"></TextView>
        <TextView
            android:text="6°F"
            android:id="@+id/textView7"
            android:gravity="center_horizontal"></TextView>
    </TableRow>
    <TableRow
        android:id="@+id/tableRow3"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:gravity="center">
        <TextView
            android:id="@+id/textView8"
            android:text="Conditions"
            android:textStyle="bold"></TextView>
        <ImageView
            android:id="@+id/imageView1"
            android:src="@drawable/hot"></ImageView>
        <ImageView
            android:id="@+id/imageView2"
            android:src="@drawable/pt_cloud"></ImageView>
        <ImageView
            android:id="@+id/imageView3"
            android:src="@drawable/snow"></ImageView>
        <ImageView
            android:id="@+id/imageView4"
            android:src="@drawable/lt_snow"></ImageView>
        <ImageView
            android:id="@+id/imageView5"
            android:src="@drawable/pt_sun"></ImageView>
    </TableRow>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T14:21:06.513

如果您想将按钮放在屏幕底部，您可以进行如下设置：

```
<RelativeLayout>
    <RelativeLayout layout_alignParentBottom="true" android:id="buttons">
        <!-- your buttons go here -->
    </RelativeLayout>

    <TableLayout layout_height="match_parent" layout_above="buttons">
        <!-- your table content -->
    </TableLayout>
</RelativeLayout> 
```

请注意，这是伪代码。您将需要在 XML 元素上实际指定所有必需的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:18:49.213

如果您想在屏幕按钮上使用它，只需将表格包装在 LinearLayout 中。表格完成后，您可以通过复制粘贴或使用来添加相对布局

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-04T14:22:24.343

您可以使用相对布局和放置布局权重来实现。这是一个例子

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/app_background"
    android:orientation="horizontal"
    android:padding="10dip"
    android:id="@+id/biometric_layout">

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"    
    android:layout_marginTop="1dp" 
    android:layout_below="@+id/trans_Heading"
    android:id="@+id/headingRow"
    >   

 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"    
    android:weightSum="100"    
    >

 <ScrollView
        android:id="@+id/scrollViewDialog"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:fillViewport="true"
        android:isScrollContainer="false" 
        android:layout_gravity="center"
        android:orientation="vertical"
        android:layout_weight = "70"
        > 

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        >
       <ImageView
                android:id="@+id/ibTermsConditions"
                android:layout_width="match_parent"
                android:layout_height="match_parent" 
                android:src="@drawable/bio_finger_scan_image" 
                />       
    </LinearLayout> 
  </ScrollView>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" 
        android:layout_weight = "30"
        >

    <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"            
            android:layout_marginTop="15dp"
            android:gravity="center"
            android:orientation="horizontal"
            >
    <Button
        android:id="@+id/btBack"
        android:layout_width="wrap_content"
        android:layout_height="25dp"
        android:text="Back"        
        android:textSize="15sp" />

     <Button
        android:id="@+id/btNext"
        android:layout_width="wrap_content"
        android:layout_height="25dp"        
        android:text="Next>"
        android:textColor="#ffffff"
        android:textSize="15sp" />

      <Button
        android:id="@+id/btCancel"
        android:layout_width="wrap_content"
        android:layout_height="25dp"
        android:text="Cancel"
        android:textColor="#ffffff"
        android:textSize="15sp" />
     </LinearLayout>

    </LinearLayout>     

    </LinearLayout>
   </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-22T04:20:42.860

如果您希望将按钮放置在屏幕底部，请将您的线性布局替换为相对布局并将按钮放置在其中。

```
 <RelativeLayout>
        <RelativeLayout 
    layout_alignParentBottom="true" >
           <!-- Your Button is to be placed here -->
        </RelativeLayout>
    </TableLayout>
//Your table contents
    </TableLayout>
    </RelativeLayout> 
```

# php - 无法从浏览器中找到 include_path，但可以在终端中使用

> ID：12478824
> 
> 赞同：0
> 
> 时间：2012-09-18T14:16:46.050
> 
> 标签：php, linux, amazon-ec2

我是服务器管理员和 PHP 的新手，所以我很抱歉。这个真的让我卡住了。我重新启动了 EC2 服务器，但仍然没有运气。

PHP 文件

```
<?php
require_once "System.php";
var_dump(class_exists('System', false));
?> 
```

终端（有效）

```
[ec2-user@domU-12-31-39-10-26-22 current]$ php phpcheck.php
bool(true) 
```

浏览器 - 它没有找到文件

```
Warning: require_once(System.php): failed to open stream: No such file or directory in /etc/httpd/opt/app/current/phpcheck.php on line 2 Fatal error: require_once(): Failed opening required 'System.php' (include_path='.:/home/ec2-user/pear/share/pear') in /etc/httpd/opt/app/current/phpcheck.php on line 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:44:13.427

当我通常遇到这些问题时，我只需添加以下内容：

`require_once(dirname(__FILE__) . '/System.php');`

这样您就可以获得文件的完整路径。

但是，您的 include_path 看起来有点不稳定。-kc

# android - 如何检测“最近的应用程序”系统按钮点击（Honeycomb+）

> ID：12478826
> 
> 赞同：30
> 
> 时间：2012-09-18T14:16:51.820
> 
> 标签：android, button, user-interface, android-3.0-honeycomb, android-4.0-ice-cream-sandwich

我想知道这个按钮调用什么方法。

![在此处输入图像描述](../Images/177f03eb137212a37f104cc2401510c8.png)

我的游戏总是正确暂停/恢复，除了当我使用这个按钮时，这个按钮似乎没有调用[Activity](http://developer.android.com/reference/android/app/Activity.html)`onPause()`的and`onResume()`方法。如果我退出游戏，转到另一个窗口（如图片上的那个）然后使用此按钮继续，它会起作用。但是如果我只是按下这个按钮，当我进入游戏时，游戏会暂停，但线程不会像每隔一次那样恢复，游戏只是在屏幕上静止并闪烁了一下。

很难解释，但我希望我有点清楚，如果没有，请问！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-20T09:48:09.270

按下“最近的应用程序”按钮时，不会调用任何标准的[活动生命周期方法。](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)在最近的应用程序弹出列表之后，活动将保持活动状态。通过此列表的半透明左侧部分，您甚至可以观察到应用程序动画仍在运行，如果您运行的游戏带有一些没有正确处理这种情况的动画。实际上，Google Play 中的许多游戏都没有妥善处理这种情况，即使是好的游戏，比如愤怒的小鸟。

当用户打开“最近的应用程序”列表（或从它返回）时，唯一被调用的 Activity 方法是带有布尔参数的[onWindowFocusChanged](http://developer.android.com/reference/android/app/Activity.html#onWindowFocusChanged%28boolean%29)`hasFocus`。当用户打开使用equals`onWindowFocusChanged()`调用的最近 App 方法列表时，当用户在此列表中按 Back 时，使用equals调用相同的方法。`hasFocus``false``hasFocus``true`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-02-24T18:55:57.967

我有同样的问题，我解决了这个问题如下。

**为 Home 和 RecentApp 注册按钮单击广播**

```
InnerReceiver mReceiver = new InnerReceiver();
IntentFilter mFilter = new IntentFilter(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
registerReceiver(mReceiver, mFilter); 
```

**现在广播接收器代码**

```
class InnerReceiver extends BroadcastReceiver {
    final String SYSTEM_DIALOG_REASON_KEY = "reason";
    final String SYSTEM_DIALOG_REASON_RECENT_APPS = "recentapps";
    final String SYSTEM_DIALOG_REASON_HOME_KEY = "homekey";

    @Override
    public void onReceive(Context context, Intent intent) {

        if (intent.getAction().equals(Intent.ACTION_CLOSE_SYSTEM_DIALOGS)) {
            String reason = intent.getStringExtra(SYSTEM_DIALOG_REASON_KEY);
            if (reason != null) {
                if (mListener != null) {
                    if (reason.equals(SYSTEM_DIALOG_REASON_HOME_KEY)) {
                        // Home Button click
                    } else if (reason.equals(SYSTEM_DIALOG_REASON_RECENT_APPS)) {
                        // RecentApp or Overview Button click
                    }
                }
            }
        }
    }
} 
```

但不要忘记`unregisterReceiver`广播接收器

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-13T21:13:10.410

要检测何时按下“最近的应用程序”按钮，您可以使用辅助功能服务。您需要运行自己的辅助功能服务并接收类型为“TYPE_WINDOW_STATE_CHANGED”的事件并检查事件的类名。

1.  阅读android developer 中的[无障碍服务](https://developer.android.com/training/accessibility/service.html)。设置您自己的无障碍服务，请求用户许可。
2.  在您的无障碍服务覆盖方法中`onAccessibilityEvent()`
3.  在此方法中，您将收到`AccessibilityEvent event`对象，该对象包含有关您设备上刚刚发生的事件的所有必要信息。
4.  我们对 ClassName 感兴趣。ClassName 有时可以为 null，所以不要忘记 != null 检查。最近应用程序窗口的包名称将根据 Android 版本而有所不同：

    *   Android 4.1：“com.android.internal.policy.impl.RecentApplicationsDialog”
    *   Android 4.2 - 4.4：“com.android.systemui.recent.RecentsActivity”
    *   Android 5.0 - 7.1：“com.android.systemui.recents.RecentsActivity”（添加了“s”字母）

不知道旧设备的类名，但我认为 2017 年没有人维护它们；）

所以你会有这样的东西：

```
@Override
public void onAccessibilityEvent(AccessibilityEvent event) {
    if (event.getEventType() != AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED || event.getClassName() == null) 
        return;

    String className = String.valueOf(event.getClassName());

    if (className.equals("com.android.internal.policy.impl.RecentApplicationsDialog")
            || className.equals("com.android.systemui.recent.RecentsActivity")
            || className.equals("com.android.systemui.recents.RecentsActivity")){
        //Recent button was pressed. Do something.
    }
} 
```

我已经在以下真实设备上对其进行了测试：LG、Nexus、索尼和虚拟设备：摩托罗拉、三星。

如果有人知道这些类名的例外情况，请联系我。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-06T06:37:21.037

我遇到了类似的问题，所以，我需要知道用户何时按下最近的应用程序按钮（旧版本的 android 中的菜单键按钮）。经过几个小时的研究，当按下主页按钮或菜单按钮时，我没有发现要捕获的事件。我发现`onStop()`当用户按下主页按钮时调用需要更长的时间，所以我想出了一个技巧来区分这些与响应时间相关的两个按钮并覆盖两种方法：

@覆盖

```
public void onUserLeaveHint() {
    // do stuff
    super.onUserLeaveHint();
    userLeaveTime = System.currentTimeMillis() ;
    isNotPower = true;
} 
```

@覆盖

```
public void onStop() {
    super.onStop();
    if (isNotPower) {
        defStop = System.currentTimeMillis() - userLeaveTime;
        if (defStop > 200 ) {
            //home button
        }
        if (defStop < 200) {
            //recent apps button
        }
    }
    isNotPower = false;
} 
```

*   `isNotPower`用于检查未按下电源按钮的参数 - 当按下电源按钮时调用该方法`onStop()`，但不调用`onUserLeaveHint()`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-30T10:53:51.967

我发现最好的方法是收听名为“ACTION_CLOSE_SYSTEM_DIALOGS”的广播动作。来自谷歌文档：

*广播操作：当用户操作应请求关闭临时系统对话框时广播。临时系统对话框的一些示例是通知窗口阴影和**最近的任务对话框**。*

工作代码：

```
IntentFilter intentFilterACSD = new IntentFilter(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);

    BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            if (intent.getAction().equals(Intent.ACTION_CLOSE_SYSTEM_DIALOGS)) {
                    //do what you want here
            }
        }
    };
    this.registerReceiver(broadcastReceiver, intentFilterACSD); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-28T11:13:40.603

试试这个：

```
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);

    Log.d("Focus debug", "Focus changed !");

    if (!hasFocus) {
        Log.d("Focus debug", "Lost focus !");

    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-18T14:44:45.080

这只是这个特定游戏的问题吗？还是你玩的每一场比赛都这样？

除了`onPause()`and之外`onResume()`，还有另一个循环叫做`onStop()`。也许这里正在做一些基本的事情。按下“windows-open”按钮后，游戏可能不会进入 to`onStop`状态，而按下“home”按钮则会。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-26T10:32:15.457

我写了一个应用程序，它明确地展示了**最近应用程序**/最近**键**在活动和片段方面的行为。

（任何关于正常生命周期事件不是由该键触发的断言显然是错误的。）

在`onCreate()`主**Activity**中初始化一个数组以记录所有已知的*Activity*生命周期事件，并在第二个 FrameLayout 中触发主 Fragment。

在`onAttach()`主**Fragment**中初始化一个单独的数组，用于记录所有已知的*Fragment*生命周期事件。

出于日志记录的目的，*Activity*和*Fragment*都被视为`onWindowFocusChanged()`另一个生命周期事件。

记录的事件带有时间戳，因此可以在渲染时给出用户“暂停”指示（并且渲染发生在`onWindowFocusChanged()`when内`hasFocus==true`）。

以下是用户在启动测试应用程序时看到的内容：

[![在此处输入图像描述](../Images/4ba0fd7157d5e50b83c86ce2099fb64a.png)](https://i.stack.imgur.com/jNEdA.png)

几秒钟后，用户按下**recent-apps**，等待几秒钟，然后再次按下以查看真相：

[![在此处输入图像描述](../Images/574565dd07cbed8e40373a76dc0c5aab.png)](https://i.stack.imgur.com/8KnEo.png)

注意：如果不使用最近的应用程序按钮，而是通过 (a) 按下平板电脑关闭/打开按钮 (b) 按下 Start 2nd Activity 按钮 (c) 等来重复实验，则会产生相同的结果。

**对 OP 的回答：**
显然没有代码可以检测到最近应用程序键的实际按下！

但这并不重要，因为无论如何应用程序都需要正确处理相关的生命周期事件。

# powershell - Powershell Invoke-Command with-FilePath 给出 ItemNotFoundException

> ID：12478828
> 
> 赞同：0
> 
> 时间：2012-09-18T14:17:03.603
> 
> 标签：powershell, remoting

我建立了一个持久会话，然后尝试使用以下行远程执行脚本：

```
Invoke-Command -Session $Session  -FilePath "FullStopBizTalkApp.ps1"  -argumentlist $BizTalkMgmtDBConString, $ApplicationNameInBizTalk 
```

如果我然后执行： $_.Exception.ToString() 我可以看到以下错误：

```
System.Management.Automation.ItemNotFoundException: Cannot find path 'C:\Users\tfs_service\FullStopBizTalkApp.ps1' because it does not exist. 
```

使用 -ScriptBlock 时，我能够从同一个客户端调用命令到同一个目标服务器，我只在使用 -FilePath 时遇到问题

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:44:06.843

输入脚本的路径和文件名，或者确保您的会话工作目录是脚本文件的父目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:51:15.293

I was looking at this too long!

The error was relating to the local path of the file before it was copied to target server. I fixed this by changing the value for the -FilePath argument

# php - mongodb remove 不返回布尔值

> ID：12478831
> 
> 赞同：1
> 
> 时间：2012-09-18T14:17:06.483
> 
> 标签：php, mongodb, mongomapper, database

我一直在玩 mongodb 一段时间。我不明白当我尝试删除不存在的值或键时它不会给我一个错误。

```
 $host = '10.311.33.2';
        $user = 'admin'; $password = 'admin';
        tmpHost ="mongodb://$user:$password@$host";
        $m = new Mongo("$tmpHost");
        $db = $m->selectDB("common");
        $collection = new MongoCollection($db,"list");
        $result = array('name'=>'ali');
        $collection->insert($result);
        if($collection->remove($result)){
        echo "Remove";}
        else{
         echo "Not removed";}
        // Should display Not removed, since its not existing. but it displays Remove :S
        if($collection->remove($result)){
        echo "Remove";}
        else{
         echo "Not removed";} 
```

如何使用这样的数据库，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T22:41:03.287

您在选项中调用 MongoCollection::remove 时没有安全标志（您在没有任何选项的情况下调用它）。这意味着该命令以“即发即弃”的方式运行。它被发送到数据库，程序继续执行，无需等待回复。

当你这样称呼它时：

```
$collection->remove($result, array("safe" => true)) 
```

返回值将是一个数组，其中包含有关查询如何工作的信息。该数组的字段“n”包含受影响对象的数量。当删除命令什么都不做时，这应该是 0。

顺便说一句：我之前使用过的大多数数据库**都不**会将不影响任何内容的删除查询视为错误。

# c# - DateTimePicker 上无法从 System.DateTime' 转换为 'string' 错误

> ID：12478833
> 
> 赞同：-3
> 
> 时间：2012-09-18T14:17:08.923
> 
> 标签：c#, winforms

我正在尝试将我的 DateTimePicker 保存在我的主数据文件 (.MDF) 中

我尝试在 Internet 上搜索解决方案，但一无所获。

这是给我错误的代码部分：

```
private void cmdSave_Click(object sender, EventArgs e)
{
   dsSolomonNewTableAdapters.RegistrationTableAdapter ins = new       
     WindowsFormsApplication1.dsSolomonNewTableAdapters.RegistrationTableAdapter();
   ins.addStudent(this.dtoDOB.Value);
} 
```

这会引发错误：

> 无法从 System.DateTime' 转换为 'string'

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:28:37.450

根据该错误消息，这应该可以解决它：

```
ins.addStudent(this.dtoDOB.Value.ToString()); 
```

也就是说，似乎`addStudent`是在添加 DOB，而不是学生。由于我只有您发布的代码可供使用，因此我使用`.ToString()`.

编辑：看到您的最后一条评论后，看起来`addStudent`应该接受 a `DateTime`，而不是`string`. 因此`RegistrationTableAdapter`，您可能需要考虑将方法签名更改为`addStudent`：

```
public/internal void addStudent(DateTime dob)
{
    // Do stuff
} 
```

同样，我在这里做了很多假设，因为您根本没有发布太多代码。

# iphone - 根据用户的输入选择警报消息

> ID：12478834
> 
> 赞同：2
> 
> 时间：2012-09-18T14:17:10.277
> 
> 标签：iphone, xcode

我正在尝试检测用户是否按下了 actionSheet 上的取消按钮或破坏性按钮。根据他/她的输入，我想修改屏幕上显示的警报消息。

所以我尝试使用`if`来检查`buttonIndex`，但事实证明该`buttonIndex`值不会随着用户的输入而改变。

```
UIActionSheet *informUser = [[UIActionSheet alloc] initWithTitle:@"Missing data" delegate:self cancelButtonTitle:@"Thanks for telling me!" destructiveButtonTitle:@"I have ignored it!" otherButtonTitles:nil];

    [informUser showInView:self.view];

//        NSLog(@"Cancel button = %d", informUser.cancelButtonIndex);
//        NSLog(@"Destructive button = %d", informUser.destructiveButtonIndex);

    if(informUser.cancelButtonIndex == 1)
    {
        NSString *msg = [[NSString alloc] initWithFormat:@"Pls enter the number."];

        UIAlertView *alertUser = [[UIAlertView alloc] initWithTitle:@"Missing data" message:msg delegate:self cancelButtonTitle:@"Thanks!" otherButtonTitles:nil];

        [alertUser show];
    } 
```

我还尝试使用单独的方法：

```
-(void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex; 
```

`UIAlert`但是，当我在同一个屏幕上的不同点有多个时，我会得到错误的结果。

简而言之，我想对用户的`UIAlert`不同操作/输入使用不同的。因此，如何检测`actioSheet`用户按下了哪个按钮？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:30:07.293

实现`UIActionSheetDelegate`并使用方法：

```
– actionSheet:clickedButtonAtIndex: 
```

索引定义了您点击的按钮。

如果您不想使用按钮索引，您可以获取点击按钮的按钮标题

```
– buttonTitleAtIndex: 
```

然后您可以将结果与您的按钮标题字符串进行比较。

[在 Apple 文档中阅读更多内容](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIModalViewDelegate_Protocol/UIActionSheetDelegate/UIActionSheetDelegate.html#//apple_ref/doc/uid/TP40006799)

* * *

**编辑：** 如果您想使用更多操作表，您可以为每个操作表设置标签值。例如 ActionSheet1 有 actionsheet.tag = 1 等等。

然后您可以`– actionSheet:clickedButtonAtIndex:`通过给定操作表的标签进行切换。例如：

```
switch (actionsheet.tag) {
    case 1: 
        // do stuff
    break;
    case 2: 
        // do stuff
    break;
    default: break;
} 
```

* * *

**编辑 2：** 这是一个示例类，应该向您展示逻辑：

头文件：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIActionSheetDelegate>

@end 
```

实现文件：

```
#import "ViewController.h"

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    UIActionSheet *as1 = [[UIActionSheet alloc] initWithTitle:@"Title" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:@"Delete" otherButtonTitles:@"Ok", nil];
    as1.tag = 0;
    as1.delegate = self;

    UIActionSheet *as2 = [[UIActionSheet alloc] initWithTitle:@"Title2" delegate:self cancelButtonTitle:@"Cancel2" destructiveButtonTitle:@"Delete2" otherButtonTitles:@"Ok2", nil];
    as2.tag = 1;
    as2.delegate = self;
}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    switch (actionSheet.tag) {
        case 0: // as1
            switch (buttonIndex) {
                case 0:
                    // button index 0
                    break;

                case 1:
                    // button index 1
                    break;

                //....

                default:
                    break;
            }
            break;

        case 1: // as2
            switch (buttonIndex) {
                case 0:
                    // button index 0
                    break;

                case 1:
                    // button index 1
                    break;

                    //....

                default:
                    break;
            }
            break;

        default:
            break;
    }
}

@end 
```

# javascript - 增加每个输入的名称属性，但在使用 jQuery 克隆后保持单选按钮组合在一起

> ID：12478835
> 
> 赞同：1
> 
> 时间：2012-09-18T14:17:10.760
> 
> 标签：javascript, jquery

我有几种不同类型的输入，我正在使用 jQuery 克隆进行克隆。克隆时，每个输入的名称属性开头的数字是否可以递增？我一直试图弄清楚这一点，同时在每次增量后保持单选按钮的名称相同，以便它们保持组合在一起。

这是一个小提琴，可以看到我正在克隆的那个。

[http://jsfiddle.net/aHA2d/](http://jsfiddle.net/aHA2d/)

这是我的 HTML

```
<div class="container">
  <input type="radio" name="1_radio" class="some_vechicle" value="cars" /> Cars
  <input type="radio" name="1_radio" class="some_vechicle" value="bikes" /> Bikes
  <br />
  <br />
  <input type="text" name="2_text" class="some_name" value="" /> Model Name
  <br />
  <br />
  <input type="text" name="3_text" class="some_year" value="" /> Year
  <br />
  <br />
  <textarea name="4_area" rows="3" cols="10"  class="myArea" value=""></textarea>
  <br />
  <br />
  <input type="radio" name="5_radio" class="some_color" value="cars" /> Blue
  <input type="radio" name="5_radio" class="some_color" value="bikes" /> Red
  <br />
  <br />
  <input type="text" name="6_text" class="some_manufacturer" value="" /> Manufacturer
  <br />
  <br />
  <input type="button" class="btnAdd" value="Add" />
</div>​ 
```

这是我用来创建克隆的 JavaScript

```
$(document).ready(function() {
    $('.btnAdd').click(function() {
        var c = $('.container:first').clone(true);   
        $('.container:last').after(c);            
    });        
});​ 
```

这是我在克隆一次 div 标签后尝试创建的 HTML 示例。

```
<div class="container">
  <input type="radio" name="1_radio" class="some_vechicle" value="cars" /> Cars
  <input type="radio" name="1_radio" class="some_vechicle" value="bikes" /> Bikes
  <br />
  <br />
  <input type="text" name="2_text" class="some_name" value="" /> Model Name
  <br />
  <br />
  <input type="text" name="3_text" class="some_year" value="" /> Year
  <br />
  <br />
  <textarea name="4_area" rows="3" cols="10"  class="myArea" value=""></textarea>
  <br />
  <br />
  <input type="radio" name="5_radio" class="some_color" value="cars" /> Blue
  <input type="radio" name="5_radio" class="some_color" value="bikes" /> Red
  <br />
  <br />
  <input type="text" name="6_text" class="some_manufacturer" value="" /> Manufacturer
  <br />
  <br />
  <input type="button" class="btnAdd" value="Add" />
</div>​
<div class="container">
  <input type="radio" name="7_radio" class="some_vechicle" value="cars" /> Cars
  <input type="radio" name="7_radio" class="some_vechicle" value="bikes" /> Bikes
  <br />
  <br />
  <input type="text" name="8_text" class="some_name" value="" /> Model Name
  <br />
  <br />
  <input type="text" name="9_text" class="some_year" value="" /> Year
  <br />
  <br />
  <textarea name="10_area" rows="3" cols="10"  class="myArea" value=""></textarea>
  <br />
  <br />
  <input type="radio" name="11_radio" class="some_color" value="cars" /> Blue
  <input type="radio" name="11_radio" class="some_color" value="bikes" /> Red
  <br />
  <br />
  <input type="text" name="12_text" class="some_manufacturer" value="" /> Manufacturer
  <br />
  <br />
  <input type="button" class="btnAdd" value="Add" />
</div>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:47:52.630

尝试这个：

```
$(document).ready(function() {
    $('.btnAdd').click(function() {
        var b = $('.container [name]').length;
        var c = $('.container:first').clone().find('[name]').attr('name', function(i, cur) {
            var n = cur.match(/\d+/g).join('');
            var s = cur.match(/\D+/g).join('');
            return (b + ++n) + s;
        }).end()
        $('.container:last').after(c);
    });
});​ 
```

[http://jsfiddle.net/8E3sC/](http://jsfiddle.net/8E3sC/)

由于克隆按钮是动态生成的，您应该委托事件：

```
$(document).on('click', '.btnAdd', function() { // ...  }) 
```

# c# - 如何声明其值为字符串数组的 DefaultValue 属性？

> ID：12478837
> 
> 赞同：7
> 
> 时间：2012-09-18T14:17:17.250
> 
> 标签：c#, .net, attributes, default-value

我一直在代码生成器中使用 DefaultValue 属性，它从模式中编写 C# 类定义。

我被困在架构中的属性是字符串数组的地方。

我想在我的 C# 中写这样的东西：

```
[DefaultValue(typeof(string[]), ["a","b"])]
public string[] Names{get;set;} 
```

但这不会编译。

有什么方法可以成功声明字符串数组的默认值属性？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T14:19:40.680

你可以试试

```
[DefaultValue(new string[] { "a", "b" })] 
```

当你想传递一个新的字符串数组时，你必须实例化它——这是由`new string[]`. C# 允许初始化列表与数组的初始内容在大括号中，即`{ "a", "b" }`.

* * *

编辑：正如[Cory-G正确](https://stackoverflow.com/users/1884803/cory-g)[指出](https://stackoverflow.com/questions/12478837/how-do-i-declare-a-defaultvalue-attribute-whose-value-is-an-array-of-strings/12478891#comment121083184_12478891)的那样，您可能希望确保您的实际实例不会收到存储在属性中的数组实例。否则，对该实例的更改可能会影响整个应用程序的默认值。`DefaultValue`

相反，您可以使用属性的设置器来复制分配的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-24T22:01:22.093

另一种解决方案是利用虚拟特性`DefaultValueAttribute`并衍生出你自己的特性。下面是一些具有非常量类型的示例。

### 示例用法：

```
public class Foo
{
    [DefaultValueNew( typeof(List<int>), new int[]{2,2} )]
    public List<int> SomeList { get; set; }

    // -- Or --
    public static List<int> GetDefaultSomeList2() => new List<int>{2,2};

    [DefaultValueCallStatic( typeof(Foo), nameof(GetDefaultSomeList2) )]
    public List<int> SomeList2 { get; set; }
}; 
```

### 以下是这些属性的定义：

```
 public class DefaultValueNewAttribute : DefaultValueAttribute
  {
    public Type Type { get; }
    public object[] Args { get; }

    public DefaultValueNewAttribute(Type type, params object[] args)
      : base(null)
    {
      Type = type;
      Args = args;
    }

    public override object? Value => Activator.CreateInstance(Type, Args);
  };

  public class DefaultValueCallStaticAttribute : DefaultValueAttribute
  {
    public Type Type { get; }
    public string Method { get; }

    public DefaultValueCallStaticAttribute(Type type, string method)
      : base(null)
    {
      Type = type;
      Method = method;
    }

    public override object? Value => Type.GetMethod(Method, BindingFlags.Public | BindingFlags.Static).Invoke(null, null);
  }; 
```

## 需要注意的问题

定义自己的`DefaultValueAttribute`. 最重要的是，在创建它之前先了解一下如何使用它。对于像代码生成器这样的东西，上面可能没问题。但是，如果您将它与 Newtonsoft Json 或主要仅使用它来比较值的东西一起使用，那么您可能希望其中的值更加恒定，以节省时间而不是每次都重新创建对象。

对于您不希望每次都重新创建值的情况，您可以执行以下操作：

```
 public static readonly List<int> DefaultAges = new List<int>{2,2};
  private List<int> __ages = new List<int>(DefaultAges);
  [DefaultValueStatic( typeof(List<int>), nameof(DefaultAges) )]
  public List<int> Ages { get => __ages; set {__ages = new List<int>(value);} 
```

其中属性`DefaultValueStatic`定义为：

```
 public class DefaultValueStaticAttribute : DefaultValueAttribute
  {
    public DefaultValueStaticAttribute(Type type, string memberName) : base(null)
    {
      foreach (var member in type.GetMember( memberName, BindingFlags.Static | BindingFlags.Public ))
      {
        if (member is FieldInfo fi) { SetValue(fi.GetValue(type)); return; }
        if (member is PropertyInfo pi) { SetValue(pi.GetValue(type)); return; }
      }
      throw new ArgumentException($"Unable to get static member '{memberName}' from type '{type.Name}'");
    }
  }; 
```

上述版本将确保不会重新创建默认值。这对于像 Newtonsoft json 这样的东西很有用，在这种情况下，setter 不会经常被调用，但默认比较会。

同样，只需确保您了解该属性的使用方式。

# html - HTML5 重叠的身体

> ID：12478839
> 
> 赞同：0
> 
> 时间：2012-09-18T14:17:20.057
> 
> 标签：html, header

我是 HTML5 的新手，我似乎无法解决这个问题。您可以从下图中看到标题与内容区域重叠。我怎样才能解决这个问题？是我的标题 css 的问题吗？

[http://imgur.com/pJn4i](http://imgur.com/pJn4i)

```
<!DOCTYPE HTML>
<html>

<head>

<meta charset="UTF-8" />
<link href='http://fonts.googleapis.com/css?     family=Open+Sans:300italic,600italic,600,300' rel='stylesheet' type='text/css'> 

<!--Stylesheet-->
<link rel="stylesheet" type="text/css" href="style.css" media="screen" />

<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->   

<!--HTML5 video player-->
<link href="http://vjs.zencdn.net/c/video-js.css" rel="stylesheet">
<script src="http://vjs.zencdn.net/c/video.js"></script>

</head> 

<body>

<header>

    <div id="headercontainer">

        <h1><a class="introlink anchorLink" href="#intro">Test Site</a></h1>

        <nav> 
            <ul>
                <li><a class="introlink anchorLink" href="#intro">Intro</a>   </li>
                <li><a class="portfoliolink anchorLink"  href="#portfolio">Portfolio</a></li>
                <li><a class="aboutlink anchorLink" href="#about">About</a> </li>
                <li><a class="contactlink anchorLink" href="#contact">Contact</a></li>
            </ul>               
        </nav>

    </div>

</header> 

<div id="content">
<article>
<section>

    <h1 class="article"> Lorem ipsum</h1>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor        incididunt ut labore et dolore magna aliqua. 
    </section> 
```

这是相应的CSS：

```
body{
margin: 0;
font-family: 'Open Sans', sans-serif;
font-size: small;
background-image:url('Media\background.jpg');
background-repeat:repeat-y;
padding-top::50px;      
   }

header { padding: 5px 0; width: 100%; background-color: #000; margin-bottom: 25px; 
position: fixed; z-index: 10; float: left; }
#headercontainer, #contentcontainer { width: 960px; 
margin: 0 auto; position: relative; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:21:27.313

`position: fixed;`从标题 CSS 中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T14:24:48.540

如果你想保留header的固定位置，那么你需要应用`margin-top`到body来补偿它。

此外，您实际上不需要标题的固定位置`margin-bottom`。

```
body {
    margin: 25px 0 0 0; /* considering that the header is 25px */
    font-family: 'Open Sans', sans-serif;
    font-size: small;
    background-image:url('Media\background.jpg');
    background-repeat:repeat-y;
    padding-top: 50px;      
} 
```

# scroller - 滚动到一定程度后修复右列顶部

> ID：12478842
> 
> 赞同：0
> 
> 时间：2012-09-18T14:17:21.787
> 
> 标签：scroller

当我看到“#rightPanelscrl”的最后一部分时，我想修复它的位置。我正在使用下面的代码，它在 FF 中正常运行，但在 Chrome 中根本无法运行.. 谁能告诉我..！

```
 var sidebarScrollTop = 0;

$(window).load(function () {
    sidebarScrollTop = $("#rightPanelscrl").offset();
    if ($("#rightPanelscrl").height() > 500) {
        alert($("#rightPanelscrl").height());
        $(window).scroll(function () {

            var docScrollTop = $('body,html').scrollTop();
            //  alert(docScrollTop);
            if (docScrollTop > 500) {
                $("#rightPanelscrl").css({ position: 'fixed', top: '-500px' });
            }
            else {
                $("#rightPanelscrl").css({ position: 'static' });
            }
        });
    }
    else if ($("#rightPanelscrl").height() < 500) {
        $("#rightPanelscrl").css({ position: 'fixed', top: '35px' });
    }

});

$(window).resize(function () {
    sidebarScrollTop = $("#rightPanelscrl").offset().top;
});

$(document).resize(function () {
    sidebarScrollTop = $("#rightPanelscrl").offset().top;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:44:27.750

我更喜欢通过在滚动的某个点添加 CSS 类而不是使用 jQuery 来修改定位来做到这一点。它使代码更简单！[看看这个](http://jsfiddle.net/crowjonah/qd5Sk/)。

本质上，你有你的`#rightPanelscrl`

```
<ul id="rightPanelscrl">
    <li><a href="#">one</a></li>
    <li><a href="#">two</a></li>
    <li><a href="#">three</a></li>
    <li><a href="#">four</a></li>
    <li><a href="#">five</a></li>
</ul>​ 
```

你的CSS：

```
body {height: 2000px;}    
#rightPanelscrl {
    position:absolute; 
    top:140px; 
    z-index:4; 
    width:100%;  
}    
#rightPanelscrl.fixed {
    position:fixed; 
    top:0px;
}
​ 
```

和你的 jQuery：

```
$(document).ready(function() {
    var theLoc = $('#rightPanelscrl').position().top;
    $(window).scroll(function() {
        if(theLoc >= $(window).scrollTop()) {
            if($('#rightPanelscrl').hasClass('fixed')) {
                $('#rightPanelscrl').removeClass('fixed');
            }
        } else { 
            if(!$('#rightPanelscrl').hasClass('fixed')) {
                $('#rightPanelscrl').addClass('fixed');
            }
        }
    });
}); 
```

# java - 如何从 TCP 套接字获取数据到 ByteBuffer

> ID：12478845
> 
> 赞同：2
> 
> 时间：2012-09-18T14:17:25.237
> 
> 标签：java, sockets, tcp, bytebuffer, socketchannel

我需要将来自套接字的传入数据获取到 ByteBuffer 中，但我不知道该怎么做。我是这个领域的新手，因此不确定最好的开始方式。我发现了以下内容，但这不是我想要的，因为它可以获取数据，但我需要将我的所有数据都放在字节缓冲区中以用于其他目的。

```
ServerSocket welcomeSocket = new ServerSocket(Integer.parseInt(ibmPort));
while (true) {
    Socket connectionSocket = welcomeSocket.accept();                   
    BufferedReader inFromClient =  new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
    DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream());
    clientSentence = inFromClient.readLine();
    System.out.println("Received: " + clientSentence);
    setRequestDataFromCT(clientSentence);
    capitalizedSentence = clientSentence.toUpperCase() + '\n';
    outToClient.writeBytes(capitalizedSentence);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T16:34:25.700

此代码将读取所有字节并将它们存储在 ByteBuffer 中，您可能需要调整 bufferSize 以存储您需要的所有数据。

```
int bufferSize = 8192;
ServerSocket welcomeSocket = new ServerSocket(Integer.parseInt(ibmPort));
while (true) {
    Socket connectionSocket = welcomeSocket.accept();
    ByteBuffer bf = ByteBuffer.allocate(bufferSize);
    BufferedInputStream inFromClient = new BufferedInputStream(connectionSocket.getInputStream());
    while (true) {
        int b = inFromClient.read();
        if (b == -1) {
            break;
        }
        bf.put( (byte) b);
    }
    connectionSocket.close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T23:59:48.673

`int count = SocketChannel.read(ByteBuffer).`如果您不使用，不确定为什么要添加“socketchannel”标签`SocketChannels`，但这是如何做到的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-18T16:49:33.673

```
 ServerSocket welcomeSocket = new ServerSocket(Integer.parseInt(ibmPort));
        while (true) {
            Socket connectionSocket = welcomeSocket.accept();
            InputStream stream = connectionSocket.getInputStream();
            byte[] data = new byte[1024];
            int count = stream.read(data);
            ByteBuffer bb = ByteBuffer.allocate(data.length);
            bb.put(data);
            bb.flip();
        } 
```

# algorithm - 设计一个支持getMedian函数的Queue

> ID：12478847
> 
> 赞同：6
> 
> 时间：2012-09-18T14:17:32.630
> 
> 标签：algorithm, data-structures

这是一道面试题。您需要设计一个包含整数值的队列，并具有一个 getMedian() 函数，该函数返回当前队列的中值元素。您可以使用 O(n) 额外空间。

getMedian() 可以用时间复杂度 < O(n) 来实现吗？

例如：当队列具有以下值（2、1、2、2、6、4、2、5）时，此方法返回 2 并且不会删除该对象。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T15:01:02.033

您的问题的已知实现如下：

您需要实现的是 2 个堆，一个是最小堆，另一个是最大堆。
您还需要一个整数来告诉我们队列中的对象数量。

堆的约束如下：
1\. min-heap 将具有队列中较大的对象
2\. max-heap 将具有队列中较小的对象
3\. max-heap 将具有相同或多 1 个对象对象比你的最小堆

这样，如果您有奇数个对象，则中位数将恰好是您的最大堆中的最大对象。如果您有偶数个对象，那么您的中位数将是堆的两个根的平均值（最大堆的最大值，最小堆的最小值）。

重要的是要注意，如果您的堆变得不均匀，例如，如果您要从某个堆中“弹出”，您将需要从另一个堆中移除并移动它。但这不是问题，因为您需要处理的只是堆的根，仅此而已。

getMedian 的时间复杂度变为 O(1)

刚刚找到一篇关于这个主题的文章：[链接](http://cg.scs.carleton.ca/~morin/teaching/5408/refs/minmax.pdf)

**回复评论**

最大堆包含一半*最小*的元素。
当您向队列中添加新号码时，您首先检查队列中的对象数量。
如果要添加的数字是偶数，则意味着需要将其添加到最大堆中，因为两个队列的大小相等。
然后您会看到最大堆中的最大值是多少。
如果它大于你的数字，你可以将它插入到最大堆中。
如果它更小，则意味着您的新数字可能大于最小堆中的数字。
所以你会看到 min-heap 中的 min 是什么。
如果您的数字小于最小值，则可以将其插入最大堆中，如果更大，则将最小堆中的最小值移动到最大堆中，然后将新数字插入到最小堆中堆。
如果数字是奇数，则需要添加到最小堆中，因为最大堆还有一个，依此类推..

它有点复杂，但如果你仍然不明白，我不介意为你编写伪代码

# eclipse - 这个 Eclipse SVN 图标是什么意思？

> ID：12478859
> 
> 赞同：3
> 
> 时间：2012-09-18T14:18:05.860
> 
> 标签：eclipse, svn, subversive

![神秘图标](../Images/118465b24323a51ab44dd68f0e6de3de.png) 在同步存储库时，我有时会在 Eclipse 中看到这个图标。这通常意味着会有一些麻烦，因为它不想消失。我认为它出现在 Eclipse 在 SVN 同步时自动构建项目时。这是什么意思？它与空白的蓝色箭头有何不同？

编辑：我在 Eclipse 论坛上问过，但似乎没有人知道或打扰写答案。我不知道在 Eclipse 和各种扩展的庞大源代码中，处理显示这些图标的代码位于何处。因此，如果有人能指出我正确的方向，我将不胜感激，以便我可以进一步调查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:28:20.773

我相信它是来自存储库的传入更改。

我在另一个问题中发现了这一点：传入

![第一的](../Images/71ec700fb224e88b494748c1cdbb4678.png)将内容更改提交到将应用于本地副本的存储库的文件。

![第二](../Images/f507674b95c3ef8eaee71b4d8b7afcc6.png)将从存储库添加到本地副本的新文件。与传出文件添加一样，这可能是移动或重命名的结果。

![第三](../Images/06e112c99d35ec15cadc60a32d74b6b0.png)将从本地副本中删除的文件，因为它已从存储库中删除。与传出文件删除一样，这可能是移动或重命名的结果。

我认为它是第三个，虽然我没有看到箭头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:42:38.097

![图标](../Images/118465b24323a51ab44dd68f0e6de3de.png)方法

> 传入的删除图标表示该资源已从存储库位置删除，但仍包含在本地副本中。更新后将从本地副本中删除。

在下面的参考链接中，没有完全相同的图标，即带有文件夹+箭头的图标。给出了覆盖图标的描述，它们表示上述相同的图标。

截图供参考：

![在此处输入图像描述](../Images/dea0fffcf53214355c533a0490509e6d.png)

[eclipse svn 图标集的参考链接](http://www.eclipse.org/subversive/documentation/teamSupport/workspace_synch.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-29T09:50:10.343

自上次发布以来已经有一段时间了，但我还是回答了。

通常的“白色符号”是：

*   空白：项目已被修改
*   plus : 项目计划添加
*   减号：计划删除项目

白色箭头符号表示该项目已被替换，这意味着该文件已计划删除，并且计划添加一个具有相同名称的新文件以代替其添加。

它对应于 SVN 状态字母 R。

希望这可以帮助！

尼古拉斯

# linux - 包含路径错误？

> ID：12478865
> 
> 赞同：0
> 
> 时间：2012-09-18T14:18:38.140
> 
> 标签：linux, gcc, makefile

我尝试编译一个程序。但我认为它不起作用，因为包含路径不正确。

我使用 ELDK 中的 power-linux-gcc。

文件结构是这样的

```
linux-kernel ----- driver----graphic_test----- Makefile
               |                          |
               |                          | -- main.c
               |
                --  include--linux --- jiffies.h
                                    |
                                      -- semaphore.h 
```

这是我将它们包含在 semLib.c 文件中的方式

```
#include <jiffies.h>
#include <semaphore.h> 
```

我也试过

```
#include <linux/jiffies.h>
#include <linux/semaphore.h> 
```

我不太确定问题是否在于包含，但我认为。

那是我的Makefile：

```
CC=powerpc-linux-gcc

LIBS = ../../kernel/time/jiffies.o ../../kernel/semaphore.o #libdrmko.o libdrm.o libs3gko.o

INC =   -I../../include

C_SRC = main.c lstLib.c  systLib.c semLib.c    #taskLib.c

C_OBJ = main.o lstLib.o systLib.o semLib.o    # taskLib.o

graphics_test: $(LIBS) $(C_OBJ)
    $(CC) -o graphics_test $(LIBS) $(C_OBJ) $(INC) 
```

那是来自`make`

```
:~/Linux_Development_Workspace/linux-kernel/drivers/graphic_test$ make
powerpc-linux-gcc    -c -o ../../kernel/semaphore.o ../../kernel/semaphore.c
../../kernel/semaphore.c:28:28: error: linux/compiler.h: No such file or directory
../../kernel/semaphore.c:30:26: error: linux/module.h: No such file or directory
../../kernel/semaphore.c:32:29: error: linux/semaphore.h: No such file or directory
../../kernel/semaphore.c:33:28: error: linux/spinlock.h: No such file or directory
../../kernel/semaphore.c:34:26: error: linux/ftrace.h: No such file or directory
../../kernel/semaphore.c:36: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'void'
../../kernel/semaphore.c:37: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'int'
../../kernel/semaphore.c:38: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'int'
../../kernel/semaphore.c:39: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'int'
../../kernel/semaphore.c:40: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'void'
../../kernel/semaphore.c:53: warning: 'struct semaphore' declared inside parameter list
../../kernel/semaphore.c:53: warning: its scope is only this definition or declaration, which is probably not what you want
../../kernel/semaphore.c: In function 'down':
../../kernel/semaphore.c:57: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:58: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:59: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:62: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c: At top level:
../../kernel/semaphore.c:64: warning: data definition has no type or storage class
../../kernel/semaphore.c:64: warning: parameter names (without types) in function declaration
../../kernel/semaphore.c:75: warning: 'struct semaphore' declared inside parameter list
../../kernel/semaphore.c: In function 'down_interruptible':
../../kernel/semaphore.c:80: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:81: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:82: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:85: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c: At top level:
../../kernel/semaphore.c:89: warning: data definition has no type or storage class
../../kernel/semaphore.c:89: warning: parameter names (without types) in function declaration
../../kernel/semaphore.c:101: warning: 'struct semaphore' declared inside parameter list
../../kernel/semaphore.c: In function 'down_killable':
../../kernel/semaphore.c:106: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:107: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:108: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:111: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c: At top level:
../../kernel/semaphore.c:115: warning: data definition has no type or storage class
../../kernel/semaphore.c:115: warning: parameter names (without types) in function declaration
../../kernel/semaphore.c:130: warning: 'struct semaphore' declared inside parameter list
../../kernel/semaphore.c: In function 'down_trylock':
../../kernel/semaphore.c:135: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:136: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:138: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:139: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c: At top level:
../../kernel/semaphore.c:143: warning: data definition has no type or storage class
../../kernel/semaphore.c:143: warning: parameter names (without types) in function declaration
../../kernel/semaphore.c:155: warning: 'struct semaphore' declared inside parameter list
../../kernel/semaphore.c: In function 'down_timeout':
../../kernel/semaphore.c:160: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:161: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:162: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:165: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c: At top level:
../../kernel/semaphore.c:169: warning: data definition has no type or storage class
../../kernel/semaphore.c:169: warning: parameter names (without types) in function declaration
../../kernel/semaphore.c:178: warning: 'struct semaphore' declared inside parameter list
../../kernel/semaphore.c: In function 'up':
../../kernel/semaphore.c:182: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:183: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:184: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c:187: error: dereferencing pointer to incomplete type
../../kernel/semaphore.c: At top level:
../../kernel/semaphore.c:189: warning: data definition has no type or storage class
../../kernel/semaphore.c:189: warning: parameter names (without types) in function declaration
../../kernel/semaphore.c:194: error: field 'list' has incomplete type
../../kernel/semaphore.c:204: error: expected '=', ',', ';', 'asm' or '__attribute__' before '__down_common'
../../kernel/semaphore.c:236: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'void'
../../kernel/semaphore.c:241: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'int'
../../kernel/semaphore.c:246: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'int'
../../kernel/semaphore.c:251: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'int'
../../kernel/semaphore.c:256: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'void'
make: *** [../../kernel/semaphore.o] Fehler 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:42:16.200

您要么需要添加：

```
-I../../include/linux 
```

到命令行，或者您需要编写：

```
#include <linux/jiffies.h> 
```

以访问该文件。检查其他代码使用`jiffies.h`以查看哪个是标准样式。

* * *

另一个问题是单个文件编译没有获得`-I`选项：

```
powerpc-linux-gcc    -c -o ../../kernel/semaphore.o ../../kernel/semaphore.c 
```

您需要知道编译 C 文件的内置规则是什么样的。最终，您需要将`${INC}`价值转化为`${CFLAGS}`. 简单地说，这可能是：

```
CFLAGS = ${INC} 
```

更典型的是（至少以我的经验），CFLAGS 是由许多宏构建的。OTOH，看起来这对您来说不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:21:02.570

乔纳森描述了关键点。（或多或少）问题是/是编译器尝试编译/构建 semaphore.o 并使用默认包含路径。所以我编辑了我的 makefile ，你可以在下面看到它，是什么解决了这个问题。

```
CC=powerpc-linux-gcc

LIBS =  ../../kernel/semaphore.o  #libdrmko.o libdrm.o libs3gko.o #../../kernel/time/jiffies.o

INC  =  -I/home/linuxdev/Linux_Development_Workspace/linux-kernel/include/ 
INC +=  -I/home/linuxdev/Linux_Development_Workspace/linux-kernel/
INC +=  -I/home/linuxdev/Linux_Development_Workspace/linux-kernel/include/linux

KDIR =  /home/linuxdev/Linux_Development_Workspace/linux-kernel/

C_SRC = main.c lstLib.c  systLib.c semLib.c    #taskLib.c

C_OBJ = main.o lstLib.o systLib.o semLib.o    # taskLib.o

graphics_test: $(LIBS) $(C_OBJ)
    echo Halloq
    $(CC)  -o --sysroot=$(KDIR)  graphics_test   $(LIBS) $(C_OBJ)  #$(INC)

semaphore: semaphore.o
    $(CC)  -o --sysroot=$(KDIR) semaphore ../../kernel/semaphore.o

semaphore.o: 
    @echo pwd:  $(shell pwd)
    $(CC)  -c  $(INC) ../../kernel/semaphore.c 
```

我认为乔纳森描述的方式也可以，但我没有尝试过！

感谢所有试图帮助我的人

# input - 处理：如何使 mouseClicked 函数随点击次数变化？

> ID：12478866
> 
> 赞同：1
> 
> 时间：2012-09-18T14:18:40.730
> 
> 标签：input, click, processing

作为标题，我想通过处理实现：

屏幕上划过经典的圆圈，然后：

第一次单击鼠标时，所有圆圈都冻结（停止移动）；

第二次单击鼠标时，您将使用鼠标位置绘制一个新圆圈。

问题是：如何告诉计算机采取不同的行动？毕竟都是点击，对电脑来说都是一样的。

我正在考虑检测处理中是否已经发生了某些事情（比如第一次点击）。如果无法完成，我可以使用 javascript 来完成吗？无论如何，我想把它放在浏览器上。

有人知道吗？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:59:35.257

我认为这主要取决于您对交互的设想。它可以像您认为合适的那样简单或复杂。

如果有帮助，这里有几个想法：

1.对不同的[鼠标按钮](http://processing.org/reference/mouseButton.html)使用不同的动作（例如，常规/左键单击生成一个新圆圈，右键单击将现有圆圈移动到所需位置）：

```
void draw(){
  color bg = color(0);
  if(mousePressed){
    if(mouseButton == LEFT )  bg = color(192,0,0);
    if(mouseButton == CENTER) bg = color(0,192,0);
    if(mouseButton == RIGHT)  bg = color(0,0,192);
  }
  background(bg);  
} 
```

2.使用按钮和组合键。例如 a`SHIFT+CLICK`执行单独的操作而不是默认操作：

```
void draw(){
  color bg = color(0);//default
  if(mousePressed && keyPressed && keyCode == SHIFT) bg = color(255,192,0);//shift+click
  background(bg);  
} 
```

3.跟踪点击并使用点击数提示不同的状态：

```
int numClicks = 0;

void draw(){
  background(numClicks*25);  
}
void mousePressed(){
  numClicks++;
  if(numClicks > 10) numClicks = 0;//reset after 10 'states'/different clicks
} 
```

不过，这作为一种交互可能不太直观。在我看来，事情越简单（尤其是对用户而言）越好。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T00:08:02.683

如果我对您的理解正确，您是在问“我如何跟踪状态”。也就是说，要知道是“冻结”还是“画圈”。

你可以用一个简单的变量来做到这一点：

```
boolean freezeState = false;

void mousePressed(){

 if (freezeState == false){
    freezeState = true;

   // call method to freeze circles

 else if (freezeState == true){
   freezeState = false;

   // call method to draw circle
} 
```

# linq-to-sql - 如何按天对 Linq to SQL 结果进行分组并包括每组的计数？

> ID：12478867
> 
> 赞同：0
> 
> 时间：2012-09-18T14:18:44.020
> 
> 标签：linq-to-sql, group-by

我需要获取在一个时间跨度内创建的所有 CustomerOrders，按天对它们进行分组（无论那天是什么时间），然后还包括每天的 CustomerOrders 计数。我的 ChartDateCount 类有两个属性 - 日期和计数。

因此，这里有一些示例 SQL 数据：

```
OrderID     Created
1           1/1/2012 04:30:12  
2           1/1/2012 05:15:29  
3           1/1/2012 07:09:45  
4           1/3/2012 01:12:21  
5           1/4/2012 06:33:58  
6           1/4/2012 08:30:26  
7           1/5/2012 10:17:41  
8           1/5/2012 11:30:43  
9           1/6/2012 01:11:11 
```

我的输出应该是：

```
Date         Count
1/1/2012     3
1/3/2012     1
1/4/2012     2
1/5/2012     2
1/6/2012     1 
```

这就是我到目前为止所拥有的。

```
Dim chartData as List(Of ChartDateCount) = _
         ( _
            From co In dc.CustomerOrders _
            Where co.Created >= fromDate _
            And co.Created <= toDate _
            Select New ChartDateCount With {.Date = ???, .Count = ???} _
         ).ToList() 
```

我有点接近这个，但我无法让 Date 填充：

```
From co In CustomerOrders _
Where co.Created >= "1/1/2012" And co.Created <= "1/7/2012" _
Group co By co.Created.Value.Date Into g = Group _
        Select New ChartDateCount With {.Date = ????, .Count = g.Count()} 
```

**更新**

这正是我在理论上想要做的（见下文），但我得到一个错误这个错误：`The query operator 'ElementAtOrDefault' is not supported.`

```
From co In CustomerOrders _
Where co.Created >= "1/1/2012" And co.Created <= "1/7/2012" _
Group co By co.Created.Value.Date Into g = Group _
        Select New ChartDateCount With {.Date = g(0).Created.Value.Date, .Count = g.Count()} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:52:31.943

我想你正在寻找`g.Key`

```
 Select New ChartDateCount With {.Date = g.Key, .Count = g.Count()} 
```

Key 属性包含分组依据的值。

[http://msdn.microsoft.com/en-us/library/bb343251.aspx](http://msdn.microsoft.com/en-us/library/bb343251.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:05:13.770

我想出了一个方法，但如果有人有更有效的方法来解决这个问题，我肯定会给予你信任......

```
Dim chartData as List(Of ChartDateCount) = _
    (
        From co In dc.CustomerOrders _
                Where co.Created > fromDate _
                   And co.Created < toDate _
            Group By co.Created.Value.Date Into g = Group _
                   Select New ChartNameValue With _
                   {
                      .Date = (From co2 As CustomerOrder In g).Take(1).Single().Created.Value.Date, _
                      .Count = g.Count()
                   }
     ).ToList() 
```

# objective-c - 使一组按钮都有不同的响应

> ID：12478868
> 
> 赞同：0
> 
> 时间：2012-09-18T14:18:45.940
> 
> 标签：objective-c, ios, cocoa-touch

我正在为我正在制作的游戏制作一个二维按钮数组。实际的数组包含一个正方形类的实例，该类具有（除其他外）按钮应该去哪里的 X 和 Y 坐标。主“X 坐标”数组是一个类对象，但“Y 坐标”数组是通过程序创建的，正方形类的所有实例也是如此。到目前为止，我已经将按钮显示在正确的位置，但我需要一种方法让按钮知道它们在 X 和 Y 坐标方面的位置。我想这样做，以便在单击按钮时，其图像更改为“已选择”状态，但我不知道如何访问单击的特定按钮，因为它未连接到保存坐标的方形对象. 我一直在玩弄使用`addTarget:action:forControlEvents:`，但我没有

我认为我不需要为这个问题发布任何代码，因为我没有实际的编码错误，但是如果您想查看我的一些代码，或者如果您需要更多信息，请询问，我很乐意提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:25:45.547

您是否尝试过使用标签？用 设置它们`button0.tag = 0, button1.tag = 1, ...`。添加操作时，传递按钮的标签，并在您的操作中使用正确的标签更新按钮。

*注意：我可能错了，我不确定我是否完全理解您的上下文，但这就是我识别相同类型的不同元素的方式，所以它可能在这里可用:)。如果我完全错了，我很抱歉。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:53:26.730

处理坐标会很简单，因为所有按钮都会尽可能将它们指向同一个选择器。

```
[myButton addTarget:self action:@selector(buttonPressd:) forControlEvents:UIControlEventTouchUpInside]; 
```

然后在 buttonPressed: 选择器上...

```
- (IBAction)buttonPressed:(UIButton *)sender {
CGRect buttonFrame = [sender frame];
float buttonXCoord = buttonFrame.origin.x;
float buttonYCoord = buttonFrame.origin.y;

// The rest of your code goes here.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:38:51.270

通过接收指向被按下按钮的指针，您分配给按钮的任何信息都将在目标方法中可用。如果您需要知道按钮的坐标，那么您可以查看它的`frame`属性，该属性包含按钮边界框的原点和大小。只需确保在添加目标方法中正确添加选择器（它将以冒号 [:] 结尾）并正确设置方法 -`- (void)myButtonAction:(UIButton *)sender`

# xmpp - 使用 openfire 同时从不同资源加入 XMPP MUC 和一个 JID

> ID：12478871
> 
> 赞同：2
> 
> 时间：2012-09-18T14:18:52.333
> 
> 标签：xmpp, chat, openfire

我需要用一个 jid 加入 xmpp 聊天室，但同时来自不同的资源。

这是行不通的。服务器仅向最后加入的设备发送聊天消息。

如何配置 jabber 服务器 (Open Fire) 以允许房间保持与相同 JID 不同资源的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:19:50.853

Openfire 不支持在一个 MUC 中来自同一个 JID 的多个资源。见[OF-103](http://issues.igniterealtime.org/browse/OF-103)

# google-analytics - ga:entranceBounceRate 和 ga:visitBounceRate 之间的区别

> ID：12478874
> 
> 赞同：1
> 
> 时间：2012-09-18T14:19:02.537
> 
> 标签：google-analytics

ga:entranceBounceRate 和 ga:visitBounceRate 有什么区别？我从谷歌分析中找到了以下定义，比如

**ga:visitBounceRate**

*   单页访问的百分比（即用户从**首页**离开您的网站的访问）。

**ga:entranceBounceRate**

*   单页访问的百分比（即该人从**入口页面**离开您的网站的访问）。

我看到的唯一区别是首页和入口页。两者不一样吗？彼此有何不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:13:54.317

不同之处在于费率的计算方式：

> > **ga:entranceBounceRate**
> > 
> > 单页访问的百分比（即访问者从入口页面离开您的站点的访问）。
> > 
> > 计算：**（ga:bounces / ga:entrances）* 100**

**ga:entrances：**访问您网站的次数，以会话中的第一次浏览量来衡量。

> > **ga:visitBounceRate**
> > 
> > 单页访问的百分比（即用户从首页离开您的网站的访问）。
> > 
> > 计算：**（ga:bounces / ga:visits）* 100**

**ga:visits：**统计会话总数。

虽然对于网站来说它们可能几乎相同，因为入口通常等于访问量，但如果您在页面级别运行它，您可以看到哪些页面创建了高百分比的跳出，从而提高了整体网站的跳出率。

简而言之，[将 ga:entranceBounceRate 应用于特定页面](http://ga-dev-tools.appspot.com/explorer/?dimensions=ga%253ApageTitle&metrics=ga%253AentranceBounceRate&sort=-ga%253AentranceBounceRate&start-date=2012-09-04&end-date=2012-09-18&max-results=100)。

[将 ga:visitBounceRate 应用于站点](http://ga-dev-tools.appspot.com/explorer/?metrics=ga%253AvisitBounceRate&start-date=2012-09-04&end-date=2012-09-18)。

# r - 奇怪的行为

> ID：12478875
> 
> 赞同：2
> 
> 时间：2012-09-18T14:19:07.013
> 
> 标签：r, plot, line, time-series

我目前正在尝试绘制价格差价的时间序列，然后添加一个带有回归的 abline。目前这只是一个 AR(1)，因为我想在开始之前得到这个情节。

数据来自 .XLS，并在 OpenOffice 中按此方式组织

```
Date - Price1 - Price 2 - NA.(Empty) 
01.01.1982 - 1.56 - 2.53 -  
[...] 
```

我正在读这个

```
library(xlsx)
library(AER)
x<-read.xlsx("data.xlsx",1) 
```

然后我像这样填充空列

```
x$NA.=(x$Price1-x$Price2) 
```

所以我现在在内存中有一个生成这个 head() 的表

```
 Date Price1 Price2 NA.
1 1987-08-28  18.30  19.44 1.24
2 1987-08-31  18.65  19.75 1.12 
```

（日期之前有一个索引列，我真的不需要它，因为我按日期绘制但它在那里）

然后我做

```
plot(x$Date,x$NA.) 
```

我得到了正确的情节。我已经稍微修改了该绘图命令以获得正确的网格、轴和日期和线条等，但即使使用上面的简单绘图版本，我的问题也仍然存在，所以问题不在于我的编辑。

问题如下：

如果我现在尝试绘制一条线

```
abline(a=1,b=1,col="blue") 
```

它不起作用。该命令通过，但没有显示一行。然而：

```
abline(a=1,b=0,col="blue") 
```

按预期工作并显示一条蓝色的水平线。

我遇到的问题是我想将回归对象输入到情节中，例如像这样

```
SPRC=zoo(x$NA.,x$Date)
SPRC2=lag(SPRC, -1)
SPRC=SPRC[2:length(SPRC)]
LMO<-lm(SPRC ~ SPRC2)
abline(a=LMO$coefficients[2],b=LMO$coefficients[1],col="red") 
```

我想做的是一个简单的 AR 来测试。回归按预期工作，但 abline 不会产生输出。

我还尝试在没有变量的情况下进行 abline - 它仅在 b = 0 时才有效。我也尝试做一个

```
plot(SPRC) 
```

然后是任何类型的 abline，但要么没有出现，要么变成垂直线（！）。只有当 b=0 时，它才会变成一条水平线。

我想这与数据对象或输入有关，但我真的不知道为什么它不起作用。我还在 Date 对象上尝试了 as.Date ，但这并没有改变任何东西。所有其他绘图命令似乎都可以工作，例如添加自定义网格、par、定位器文本、轴等。如果我启动一个干净的 R 会话并且几乎只输入上面的代码，就会出现问题。我还尝试切换回归变量、a 和 b 值或绘图变量的顺序。它仍然不起作用

你能想象可能是什么问题吗？

编辑：如果typeof（），我刚刚检查了数据类型。typeof x 是“list”，其他一切都是“double”，即使我做了一个`x$Date<-as.Date(x$Date,"%d.%m.%Y")`

Edit2：我继续将文件保存为 csv 并用 read.csv 读取它然后我做了

```
plot(x$Price1) 
```

和

```
abline(a=40,b=1) 
```

它所做的只是产生一条顺时针略微转动的垂直（！）线。我的R坏了吗？ ![在此处输入图像描述](../Images/6f978059651f4e3b5c13d557cabc3d7b.png)

（我意识到价格的比例是关闭的 - 点差约为 0。但即使 a=40，这条线也是相同的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:50:11.213

```
x<- read.table(text="Date Price1 Price2 NA.
 28.08.1987  18.30  19.44 1.24
 31.08.1987  18.65  19.75 1.12", sep="", header=TRUE)
x$Date <- as.Date(x$Date, "%d.%m.%Y")

plot(x$Date, x$NA.) 
```

![在此处输入图像描述](../Images/1a9f9e809be2be47aee6053ea0e0124b.png)

我的语言环境设置是法语，所以 x 标签代表星期五到星期一。

```
# If we're trying to find the actual coordinates of some points on the plot
# here is what we find:
locator() 
$x
[1] 6449.495 6448.035 6450.967

$y
[1] 1.182379 1.186610 1.182908

# The x axis is running from 6448 to 6451 and here is the reason:

x$Date # Here is your date vector
[1] "1987-08-28" "1987-08-31"
as.numeric(x$Date) # And here it is converted in numerics
[1] 6448 6451 # Hence the values found on the plot with locator.

# The default origin for dates is the first of January, 1970
# 6448 is the number of days from that date to the 28th of August 1987.

# But you can still use regression tools:
lm(NA.~Date, data=x)->lmx
abline(lmx)  # YOu don't actually need to break your lm object into its coefficients, abline recognize lm objects. 
```

![在此处输入图像描述](../Images/8b413045aa267a684e559472513b12a1.png)

```
# And the same works with package zoo
library(zoo)
x<- read.table(text="Date Price1 Price2 NA.
 28.08.1987  18.30  19.44 1.24
 31.08.1987  18.65  19.77 1.12
 01.09.1987  18.65  19.75 1.10", sep="", header=TRUE)
x$Date <- as.Date(x$Date, "%d.%m.%Y")
SPRC<-zoo(x$NA.,x$Date)
SPRC2<-lag(SPRC, -1)
SPRC<-SPRC[2:length(SPRC)]
LMO<-lm(SPRC ~ SPRC2)
plot(SPRC)
abline(LMO) 
```

![在此处输入图像描述](../Images/c47f2a3f40805505bd8421c88964e691.png)

# r - 使用与现有 data.frame 相同的列名和行名初始化空白 data.frame

> ID：12478877
> 
> 赞同：4
> 
> 时间：2012-09-18T14:19:08.250
> 
> 标签：r, matrix, initialization, dataframe

有没有更好的方法来制作与现有 data.frame 具有相同维度、列名和行名的空白 data.frame？

```
BAM<-read.table(~/myfile)  # 10 rows and 10 columns, full of data
print(BAM)

              SNP AZ04 AZ05 AZ06 AZ07 AZ08 AZ09 AZ10 AZ11 AZ12
1    0512930_3028    1   15    3    3    2    0    2    9    4
2   0512933_33862    0    7    1    5   18    2    4   10    5
3   0512933_33866    0    7    1    5   18    2    4   10    5
4   0512933_49263    4   12   15   14   14    9    7   15   15
5  0512933_315059    2    3    6    6   18    3   11    3   14
6  0512933_319854    4    3   10    6    8    2    6   12    8
7  0512933_330379    0   12    5    0   16    1    8   10    7
8  0512933_359868    9    9    7    9   18    9   16   14   11
9  0512933_390380    8   18   19   10   26   10   12   17   18
10 0512933_405563    2   10   13   10   17   14   10   13   14

Initial.matrix<-matrix(nrow=nrow(BAM), ncol=ncol(BAM), dimnames=list(1:(ncol(BAM)), (colnames(BAM))))
Blank.data.frame<-data.frame(Initial.matrix)
Blank.data.frame$SNP=BAM$SNP
print(Blank.data.frame)

              SNP AZ04 AZ05 AZ06 AZ07 AZ08 AZ09 AZ10 AZ11 AZ12
1    0512930_3028   NA   NA   NA   NA   NA   NA   NA   NA   NA
2   0512933_33862   NA   NA   NA   NA   NA   NA   NA   NA   NA
3   0512933_33866   NA   NA   NA   NA   NA   NA   NA   NA   NA
4   0512933_49263   NA   NA   NA   NA   NA   NA   NA   NA   NA
5  0512933_315059   NA   NA   NA   NA   NA   NA   NA   NA   NA
6  0512933_319854   NA   NA   NA   NA   NA   NA   NA   NA   NA
7  0512933_330379   NA   NA   NA   NA   NA   NA   NA   NA   NA
8  0512933_359868   NA   NA   NA   NA   NA   NA   NA   NA   NA
9  0512933_390380   NA   NA   NA   NA   NA   NA   NA   NA   NA
10 0512933_405563   NA   NA   NA   NA   NA   NA   NA   NA   NA 
```

我上面的代码得到了我想要的。有更清洁或更简单的方法吗？

谢谢，安娜（R初学者）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T14:21:44.000

只需创建一个副本`BAM`并将所有数字元素乘以`NA`.

```
Blank.data.frame <- BAM
Blank.data.frame[,-1] <- Blank.data.frame[,-1] * NA 
```

或者，更一般地说：

```
Blank.data.frame <- BAM
numCols <- sapply(Blank.data.frame, is.numeric)
Blank.data.frame[,numCols] <- Blank.data.frame[,numCols] * NA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T23:11:38.650

``is.na<-``在语句中使用该函数`lapply`将起作用并保留列类型和因子级别和维度。用于`do.call(data.frame,...)`重新创建 data.frame

```
do.call(data.frame, lapply(BAM, `is.na<-`) 
```

例如

```
BAM <- data.frame(x=1:5, y =rnorm(5), z = factor(letters[1:5]))  
blank_bam <- do.call(data.frame,lapply(BAM, `is.na<-`))
str(blank_bam)

##     'data.frame':    5 obs. of  3 variables:
##  $ x: int  NA NA NA NA NA
##  $ y: num  NA NA NA NA NA
##  $ z: Factor w/ 5 levels "a","b","c","d",..: NA NA NA NA NA 

blank_bam
##    x  y    z
## 1 NA NA <NA>
## 2 NA NA <NA>
## 3 NA NA <NA>
## 4 NA NA <NA>
## 5 NA NA <NA> 
```

# 保留一些列

如果您只想转换`numeric`或`integer`（或任何特定子集），则`lapply`在该列子集上运行

例如，保留因子列。

`Filter`我将使用和过滤以仅选择非因子列`is.factor`

```
# convert the non factor columns
num_blank <- lapply(Filter(Negate(is.factor), BAM), `is.na<-`)
#subset the original columns
factor_original <- filter(is.factor, BAM)
# combine and return in original column order
bam_blank <- do.call(data.frame, c(factor_original, num_blank))[,names(BAM)]
bam_blank
##    x  y z
## 1 NA NA a
## 2 NA NA b
## 3 NA NA c
## 4 NA NA d
## 5 NA NA e

str(bam_blank)
## 'data.frame':    5 obs. of  3 variables:
##  $ x: int  NA NA NA NA NA
##  $ y: num  NA NA NA NA NA
##  $ z: Factor w/ 5 levels "a","b","c","d",..: 1 2 3 4 5 
```

# php - 为什么 PHP exec() 命令会启动一个 DOS 窗口？我可以隐藏这个吗？

> ID：12478885
> 
> 赞同：3
> 
> 时间：2012-09-18T14:19:28.060
> 
> 标签：php, apache, cgi

我在 Windows XP 上将 PHP 脚本作为 cgi 脚本执行，Web 服务器是 Apache 2.2，使用`phtmlenc()`. 这是在执行期间打开一个空白的 DOS 提示符（cmd.exe 窗口）。

这是测试脚本 test.php 我已将我的脚本放在 cgi-bin 目录中：

```
#! C:/PHP/bin
exec(WHOAMI); 
```

当我通过 Internet Explorer 通过键入启动脚本时，`localhost/cgi-bin/test.php` 我可以看到一个 DOS 窗口弹出。

1.  我可以通过更改 Apache 配置或 PHP 配置来抑制这种情况吗？
2.  原始脚本使用 a 加密`phtmldec()`，因此我无法更改实际`exec()`调用
3.  我可以编辑 PHP 以放置一些标题来隐藏或抑制 DOS 窗口吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:29:46.287

您无法隐藏窗口，因为它受操作系统控制，而不是 PHP 或 Apache。由于`whoami`是一个控制台应用程序，它在运行时会创建一个控制台。

顺便说一句，`'WHOAMI'`应该在引号中。

# java - 验证使用不同参数调用方法的顺序

> ID：12478887
> 
> 赞同：2
> 
> 时间：2012-09-18T14:19:30.397
> 
> 标签：java, mockito

我想验证我的方法是否以固定顺序使用不同的参数调用。我试过这个：

```
org.mockito.Mockito.verify(mock).myMethod(arg1);
org.mockito.Mockito.verify(mock).myMethod(arg2);
//was myMethod called with arg1 before it was called with arg2? 
```

但这并没有考虑到顺序。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T14:30:14.790

Mockito 提供[InOrder](http://javadoc.io/page/org.mockito/mockito-core/latest/org/mockito/InOrder.html)来验证订单调用

看看这个文件：[按顺序验证](http://javadoc.io/page/org.mockito/mockito-core/latest/org/mockito/Mockito.html#in_order_verification)

例子 ：

```
MyClass mock = mock(MyClass.class);
InOrder order = inOrder(mock);

order.verify(mock).myMethod("first");
order.verify(mock).myMethod("second"); 
```

最后两行将验证模拟对象是否按该顺序和参数调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T14:23:23.893

您可以使用[ArgumentCaptor](http://docs.mockito.googlecode.com/hg/org/mockito/ArgumentCaptor.html)。这是 Mockito Javadoc 的一个片段：

```
ArgumentCaptor<Person> peopleCaptor = ArgumentCaptor.forClass(Person.class);
   verify(mock, times(2)).doSomething(peopleCaptor.capture());

   List<Person> capturedPeople = peopleCaptor.getAllValues();
   assertEquals("John", capturedPeople.get(0).getName());
   assertEquals("Jane", capturedPeople.get(1).getName()); 
```

# php - 日志中时间戳的时区？

> ID：12478890
> 
> 赞同：3
> 
> 时间：2012-09-18T14:19:36.093
> 
> 标签：php, datetime, symfony, timezone, monolog

我已经正确设置了 PHP 的时区。但是 Symfony2 日志（Monolog）中的时间戳并没有反映这一点。

*   它是硬编码为 UTC+0 还是什么？
*   这是日志的最佳实践吗？
*   我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-18T14:29:29.103

至少有 2 种方法可以让 PHP 表现得好像它在您选择的时区中一样。

1.  按照此其他常见问题解答[更改整个帐户的时区。](http://support.modwest.com/content/20/257/en/how-do-i-change-the-timezone-for-my-account.html)

2.  如果您只希望特定的 PHP 脚本（而不是 shell 或其他 cgi 脚本）使用特定的时区，请在 PHP 代码中设置时区环境变量，如下所示：

    回显“原始时间：”。日期("h:i:s")."\n";

    putenv("TZ=美国/东部");

    回声“新时间：”。日期("h:i:s")."\n";

如果您将该行放入`putenv("TZ=US/Eastern");`所有其他 PHP 脚本包含（）的文件中，那么您的所有 PHP 脚本都将使用该时区。

一个可供选择的时区列表，除了你的 putenv() 的“美国/东部”之外：

[http://en.wikipedia.org/wiki/Lists_of_time_zones](http://en.wikipedia.org/wiki/Lists_of_time_zones)

# silverlight - 无法在 Silverlight XAML 中实例化简单 BCL 对象

> ID：12478892
> 
> 赞同：2
> 
> 时间：2012-09-18T14:19:40.273
> 
> 标签：silverlight, xaml, types, resourcedictionary, base-class-library

如果我声明了正确的 XML 命名空间，我可以使用 Silverlight XAML 中的公共和默认构造函数创建/实例化我自己的任何类`ResourceDictionary`。

但是，如果我尝试使用命名空间中基类库的任何（非 UI）类`System.*`，我会收到一个错误，即找不到类型。

例如：

```
<UserControl x:Class="BclObjectsInXamlDemo.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:crypt="clr-namespace:System.Security.Cryptography;assembly=System.Core"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White">
        <Grid.Resources>
            <crypt:AesManaged x:Key="AesManaged" />
        </Grid.Resources>
    </Grid>
</UserControl> 
```

给我错误`The type 'AesManaged' was not found because 'clr-namespace:System.Security.Cryptography;assembly=System.Core' is an unknown namespace. [Line: 12 Position: 37]`。

我很困惑，因为我认为这很容易实现。我正在使用 Visual Studio 2012 和 Silverlight 5。`System.Core`程序集在我的项目中正确链接（默认情况下）。我可以在 XAML 中以不同方式声明命名空间以使其工作吗？如果是这样，怎么做？

# php - 指示 mod_php 在发生脚本错误时发出 html 状态代码 - 可能吗？

> ID：12478895
> 
> 赞同：0
> 
> 时间：2012-09-18T14:19:47.237
> 
> 标签：php, error-handling

想象一下，您通过 apache + mod_php 提供了以下基于 php 的页面：

```
<?
blahblah!!!_!_!(___);
?> 
```

这显然是无效的 php，脚本会失败。

发生这种情况时，有什么方法可以向 mod_php / apache / php.ini (?) 发出基于 5xx 的状态代码 + 文档正文？

理想情况下，我可以自己编辑/创建...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:27:14.707

您最好的选择是查看在 PHP 中定义自定义错误处理程序和关闭函数来为您执行此操作。

您只需捕获错误，然后可以发送自定义 5XX 错误标头和您想要的任何其他内容（即自定义错误页面）。

PHP 手册中的以下链接应该可以为您提供所需的内容。

[set_error_handler 手册](http://php.net/manual/en/function.set-error-handler.php)

[register_shutdown_function 手册](http://php.net/manual/en/function.register-shutdown-function.php)

[标题手册](http://php.net/manual/en/function.header.php)

# html - 奇怪的 Firefox 页面大小问题（仅限 ff）

> ID：12478896
> 
> 赞同：0
> 
> 时间：2012-09-18T14:19:48.127
> 
> 标签：html, css, firefox, google-chrome, vertical-scrolling

我不确定如何最好地描述这个问题。我已经尝试无休止地对其进行故障排除。我可以这样描述：“页面垂直滚动的时间比 Firefox 上的内容要长得多。这不会出现在每个页面上，也不会出现在任何其他浏览器上。

当然，这不是很有帮助。我可以发布 html，但我没有帮助，因为它显然是 html 和 css 的问题。我认为解决问题的最简单方法是将链接发布到有问题的页面。

所以，我现在就这样做：[www.docutoss.com](http://docutoss.com/)

这些网站只是我的一个小项目，我真的被最后一个问题难住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T14:27:23.770

您对 DIV 元素的绝对定位导致了这种情况。当您以这种方式定位元素时，您会留下一个“洞”，这就是导致额外空间的原因。

考虑只使用浮动来呈现您的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:47:02.103

你用的是什么文档类型？过去使用不正确的文档类型已被证明是跨不同浏览器的主要问题。

# php - Yii 关系 CActiveRecords 表格

> ID：12478900
> 
> 赞同：0
> 
> 时间：2012-09-18T14:20:04.160
> 
> 标签：php, yii

我有几张桌子，想把它们放在一个表格上。这些表是相互依赖的，并且都是相关的。正确的方法是什么？

1.  在表单上使用几个 CActiveRecords？
2.  制作一个封装所有活动记录的 CModel？

# java - 在 Spring 初始化期间因严重错误而终止应用程序？

> ID：12478904
> 
> 赞同：2
> 
> 时间：2012-09-18T14:20:15.920
> 
> 标签：java, spring

如果我在 Spring 应用程序上下文的初始化过程中遇到严重错误，那么推荐的中止和关闭应用程序的方法是什么？我的应用程序不是网络应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:25:56.760

一般来说，你的应用程序应该总是优雅地退出。

你可以打电话`System.exit(0)`，但这并不优雅。

如果您的程序无法找到或解析应用程序上下文，则代码应正常退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:32:09.230

我不知道这是否是一个好习惯，但我通常会捕获异常，记录它，输出给用户，然后让应用程序自行完成。

大致：

```
main(String[]  args) {
   try {
       loadApp();
       while(running) { blah }
   }
   catch(LoadException e) {
       log(e);
       output(e);
   }
} 
```

# pentaho - Pentaho 数据集成中保存的转换在哪里

> ID：12478906
> 
> 赞同：4
> 
> 时间：2012-09-18T14:20:19.600
> 
> 标签：pentaho, data-integration

这可能是一个基本问题，但我想知道 Pentaho 数据集成中保存的转换在哪里。目前，我正在连接到一个存储库，我的所有工作和转换都保存在那里。我希望能够通过电子邮件将特定转换发送给另一个人。我在服务器上检查是否有任何 .ktr 文件但找不到任何文件。如何将转换保存到本地桌面。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:48:45.767

从存储库打开，然后导出到 XML（在文件菜单下）。将导出的文件命名为与存储库中的转换名称相同。.ktr 文件只是 XML。

澄清一下：.ktr 文件实际上*是*XML。如果您将文件导出为 XML，但将其命名为 .ktr，您将能够使用 PDI/Spoon 等打开和编辑它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T22:16:46.407

如果您有一个基于文件的存储库：在选择要连接的存储库时，按下编辑按钮（一支小铅笔），这将显示“基本目录”。这就是您的工作/转型所在。小心不要弄乱这些文件。

如果您有一个基于数据库的存储库，那么对于通过电子邮件发送几个转换之类的事情，您应该遵循@FremenFreedom 的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T06:16:27.907

看看名为 krex 的开源工具。它由 Roland 编写，非常有用，因为它将部分或全部数据库 repo 导出到 Ktr 和 kjb 文件。

最重要的是它本身就是一个 pdi 工作！

# sql - LinQ LIKE 运算符

> ID：12478907
> 
> 赞同：0
> 
> 时间：2012-09-18T14:20:22.503
> 
> 标签：sql, vb.net, linq, sql-like

我需要在 LINQ 查询中使用普通 SQL LIKE %% 运算符的帮助。

这是名为**Type**的行的数据（从没有 like 运算符的普通查询返回）：

```
Independent Contractor
Lease Program 
Teams
Teams interested 
```

这是我的（尝试的）LINQ 查询：

```
Public Shared Function SelectActiveByState(
    ByVal state_abbr As String, 
    ByVal catagory As String) As List(Of theLocations)

    Dim db As New MasterData
    db.CommandTimeout = 240

    Try            
        Return ( _
            From hl In db.Locations _
            Where hl.Active = True _
            And ( _
                hl.State = state_abbr Or _
                hl.AlternateLocation.Contains(state_abbr) And _
                hl.Type.Contains("/" & catagory & "/") _
            ) _
            Order By hl.Type Select hl).ToList()

    Catch ex As Exception
        Return Nothing
    End Try
End Function 
```

如果我省略**And hl.Type.Contains("/" & catagory & "/")**查询工作得很好（返回 4 条记录）。但是，当我添加该部分时，无论我的 like 运算符如何，它都会返回相同的记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:30:21.840

代替

```
hl.Type.Contains("/" & catagory & "/") 
```

试试这个：

```
SqlMethods.Like(hl.Type, "%"& category &"%") 
```

**编辑**：

我不擅长 VB.Net 语法。

**编辑：**

实际上，您的 LINQ 查询的结果 sql 变为：

```
SELECT *
FROM   myTable
WHERE  State = state_abbr OR
       AlternateLocation LIKE state_abbr AND
       Type LIKE category 
```

但我猜你需要这个：

```
SELECT *
FROM   myTable
WHERE  (State = state_abbr OR
       AlternateLocation LIKE state_abbr) AND
       Type LIKE category 
```

试试这个：

```
Return ( _ 
    From hl In db.Locations _ 
    Where hl.Active = True _ 
    And ( _ 
        (hl.State = state_abbr Or _ 
        hl.AlternateLocation.Contains(state_abbr)) And _ 
        SqlMethods.Like(hl.Type, "%"& category &"%") _ 
    ) _ 
    Order By hl.Type Select hl).ToList() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:05:38.943

我使用一些@Yaqub Ahmad 代码解决了这个问题：

```
Public Shared Function SelectActiveByState(
    ByVal state_abbr As String, 
    ByVal catagory As String) As List(Of theLocations)

    Dim db As New MasterData
    db.CommandTimeout = 240

    Try            
        Return ( _
            From hl In db.Locations _
            Where hl.Active = True _
            And ( _
                (hl.State = state_abbr Or _
                hl.AlternateLocation.Contains(state_abbr)) And _
                System.Data.Linq.SqlClient.SqlMethods.Like(hl.Type, "%" & category & "%") _
            ) _
            Order By hl.Type Select hl).ToList()

    Catch ex As Exception
        Return Nothing
    End Try
End Function 
```

# apache-flex - Flex 4 中的自定义视频搜索栏控制

> ID：12478914
> 
> 赞同：0
> 
> 时间：2012-09-18T14:20:39.590
> 
> 标签：apache-flex, progress-bar, seekbar, video-player

我正在 Flex 4 中创建自定义视频播放器。

我需要创建一个自定义搜索栏，使其具有三层，与 youtube 视频播放器相同。第一层是背景，第二层是下载进度，第三层是经过的视频。搜索栏也可以点击。

如何在 Flex 4 中创建这样的组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:22:25.100

不幸的是，我不相信内置的 ScrubBar 类具有此功能，因此您最好自己构建它（而不是将其添加到该类中）。

为此，我将创建一个基于 Group 的新 MXML 组件。在该组件中，您需要四件事：三个矩形用于条形/背景，一个椭圆（或另一个矩形或任何您想要的）用于播放头。将它们叠放在一起。将背景矩形设置为 100% 的高度和宽度，另外两个设置为 100% 的高度。

现在，您要做的是创建一个部分并编写一些 AS3 来处理更改。请注意，这是我个人会这样做的方式，但不一定是您必须这样做的方式。例如，我知道大多数人会不赞成使用 getter-setter，但我认为这是实现它的绝佳机会。

```
private var _progress:Number; //0-1
private var _download:Number; //0-1

public function set progress(value:Number):void{
    this._progress = value;
    this.progressBar.percentWidth = value * 100;
    this.playhead.x = value * this.width - this.playhead.width / 2;
    this.dispatchEvent(new Event(Event.PROGRESS)); //this line is optional and you would be better suited creating your own VideoEvent class to handle events across the entire player rather than using the built in events.
}

public function get progress():Number{
    return this._progress;
}

public function set download(value:Number):void{
    this._download = value;
    this.downloadBar.percentWidth = value * 100;
}

public function get download():Number{
    return this._download;
} 
```

显然，这只是基础。您可以更深入地研究它并添加更多功能。例如，没有擦洗播放头或单击进度条进行搜索的功能。两者都相对容易实现，但是，只要确保您派发事件，以便您可以从其他类知道这些事情何时发生。

现在，从您的 Video Controls 类中，您需要将 Scrubbar 类的`progress`和`download`属性绑定到您的 VideoDisplay 或 NetStream 事件。为此，您只需将 eventListeners 添加到您使用监听进度和缓冲区更改的任何一个（不确定您将用于 VideoDisplay，但对于 NetStream，您必须侦听 NetStatus.STATUS 以获取缓冲区和其他好东西，并且您必须不幸的是，创建一个计时器来监听进度）。在每个相应的函数中，您只需将适当的属性设置为您的 VideoDisplay 或 NetStream 对象为您提供的值（在 NetStream 的情况下，ns.time 为当前时间，ns.bytesLoaded 为下载）。

我只是略过了你需要做的事情，但这应该会给你足够的想法来开始这方面的工作。

# sql - Oracle：获取前 n 条记录的优雅方式（top-k 查询）

> ID：12478919
> 
> 赞同：5
> 
> 时间：2012-09-18T14:20:56.497
> 
> 标签：sql, oracle

假设我们要获取结果集的前 1 条记录。有没有更优雅的方法来做到这一点？

```
 WITH temp
        AS (  SELECT WKFC_CRONOLOGIA_ID
                FROM SIUWKF.WKF_CRONOLOGIA c
               WHERE     Ogg_oggetto_id = vOGG_ID
                     AND TOG_TIPO_OGGETTO_ID = vTOG
                     AND C.WKFC_DATA_FIN = TO_DATE ('31/12/9999', 'DD/MM/YYYY')
                     AND Wkfc_Tipo = 'STATO'
            ORDER BY WKFC_DATA_INI DESC)
   SELECT WKFC_CRONOLOGIA_ID
     INTO vCRONOLOGIA_ID
     FROM temp
    WHERE ROWNUM = 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:04:23.447

我认为你的解决方案没问题。Oracle 的唯一其他解决方案是使用`row_number()`分析功能，但这使其不那么优雅。其他数据库有该`TOP 1`语句，但没有其他 Oracle 与它等效，而不是`ROWNUM`在您使用中时在子查询之外`ORDER BY`。我同意使用`WITH`它使其更具可读性。以下可能会写得更快，但我不确定它是否更优雅。也许是口味问题：

```
SELECT * FROM
(  SELECT WKFC_CRONOLOGIA_ID
                FROM SIUWKF.WKF_CRONOLOGIA c
               WHERE     Ogg_oggetto_id = vOGG_ID
                     AND TOG_TIPO_OGGETTO_ID = vTOG
                     AND C.WKFC_DATA_FIN = TO_DATE ('31/12/9999', 'DD/MM/YYYY')
                     AND Wkfc_Tipo = 'STATO'
            ORDER BY WKFC_DATA_INI DESC)
WHERE ROWNUM = 1 
```

这就是 Oracle SQL 手册中关于`ROWNUM`前 N 个报告的内容，并确认了您执行此操作的方式。

![在此处输入图像描述](../Images/64b1d2127fc8da5060b5bb96f0469a92.png)

源 Oracle® 数据库 SQL 语言参考 11g 第 2 版 (11.2) E26088-01

# php - 如何从jquery ui datepicker输出日期并在每次输出时添加一天

> ID：12478920
> 
> 赞同：0
> 
> 时间：2012-09-18T14:21:00.337
> 
> 标签：php, javascript, jquery, jquery-ui

我有一个 jquery ui datepicker，我需要从中选择日期，然后将其输出到一个 div 中，然后为每个 div 添加一天。

html

```
<?php $date = $_POST['datepicker']; ?>

<input name="datepicker" class="calendarInput" type="text" id="datepicker">

<div>
<?php echo($date) ?>
</div>

<div>
<?php echo($date) ?>
</div>

<div>
<?php echo($date) ?>
</div> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:51:22.737

You can do it using the onSelect callback.

```
$('#datepicker').datepicker({
   onSelect: function(dateText) {
      var date = $(this).datepicker('getDate');
      date.setDate(date.getDate() + 1);
   }
}); 
```

Assign ids to your divs and then you can modify the contents.

# r - 如何在 r 中实现 histfit？

> ID：12478922
> 
> 赞同：3
> 
> 时间：2012-09-18T14:21:01.787
> 
> 标签：r

Matlab 中有 histfit 函数可以绘制直方图并通过 bin 值拟合分布。必须估计分布的参数。如何在 r 中实现 histfit？找了很久，还是没有运气。

这篇[文章](https://stackoverflow.com/questions/1497539)之前已经提到过这一点，但没有更好的解决方案。sn 包似乎支持几种发行版，没有那么多。

我用 hist 函数探索数据，直方图显示了一般的伽马分布。但是，如果我将 bin 相加并再次显示，图表将显示更多细节，并且 gamma 分布失败。fitdistr 也将无法找到参数。所以我想只使用直方图中的粗略数据来拟合数据。这是问题，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:05:58.857

MASS 包中的`fitdistr`函数可用于查找给定分布（包括伽马）的参数。该函数`density`和`logspline`包（以及其他）可用于估计数据的密度函数，而无需假设特定分布。

`lines`和`curve`函数可用于将估计的密度曲线添加到绘制的直方图（在创建直方图时使用）`prob=TRUE`。

如果您想将您的数据与特定分布进行比较，那么像 qqplots（`qqplot`函数或其他）或视觉测试（`vis.test`在 TeachingDemos 包中）之类的工具可能会比直方图和密度图更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T06:40:26.973

我必须自己回答，包“bda”可以在多个分布中拟合分箱数据，但它只能通过四舍五入来分箱数据。

# android - Android 旋转图像

> ID：12478930
> 
> 赞同：-1
> 
> 时间：2012-09-18T14:21:22.617
> 
> 标签：android, rotation

我想根据方向旋转 ImageButtons 。但没有重新启动活动。图像应该旋转，但视图不应该。[示例：默认的相机应用程序] 有什么想法吗？我想我应该修复方向（android:screenOrientation="portrait"）。

如果您旋转手机，活动将无法重建。但底部（或侧面）的图标会旋转。我怎样才能做到这一点？

**示例**：[http](http://www.youtube.com/watch?v=hT3stvtv_1c) ://www.youtube.com/watch?v= hT3stvtv_1c 在 00:40 - 只是图标旋转，而不是孔视图

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T14:27:47.213

```
Matrix matrix = new Matrix();
Bitmap b;
//...
imageView.setImageBitmap(b);
//...
// screen rotation
matrix.postRotate(90);
b = Bitmap.createBitmap(b, 0, 0, b.getWidth(), b.getHeight(), matrix, true);
imageView.setImageBitmap(b); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T14:38:14.683

您可以使用 ExifInterface 从文件中获取旋转信息

```
Matrix matrix = new Matrix();
    int orientation = 1;
    try {
        ExifInterface exif = new ExifInterface(filePath);
        orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);
    } catch (IOException e) {
        e.printStackTrace();
    }
    matrix.setRotate(0);
    switch (orientation) {
    case ExifInterface.ORIENTATION_ROTATE_90:
        matrix.setRotate(ROTATION_DEGREE);
        break;
    case ExifInterface.ORIENTATION_ROTATE_180:

        matrix.setRotate(ROTATION_DEGREE * 2);
        break;
    case ExifInterface.ORIENTATION_ROTATE_270:
        matrix.setRotate(-ROTATION_DEGREE);
        break;
    default:
        break;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-12T05:56:01.833

如果您想在单击按钮时动态旋转图像，请全局定义

```
 int angle; int valueangle = 0; 
```

以及按钮 mrotate.setOnClickListener(new OnClickListener() {

```
 @Override
        public void onClick(View v) {

            // TODO Auto-generated method stub
     ImageView mainimage22 = (ImageView) findViewById(R.id.mainimage22);
     Bitmap myImg = BitmapFactory.decodeResource(getResources(), R.drawable.image);

            angle = valueangle + 90;
            valueangle = angle;
            System.out.println("valueangle"+valueangle);
            if(valueangle == 360){
                valueangle=0;
                System.out.println("00"+valueangle);
            }
            System.out.println("angle"+angle);

            main_img.setVisibility(View.INVISIBLE);

            Matrix matrix = new Matrix();
            matrix.postRotate(angle);

            Bitmap rotated = Bitmap.createBitmap(myImg , 0, 0,
                    myImg .getWidth(), myImg .getHeight(), matrix, true);

            mainimage22.setImageBitmap(rotated);

        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-18T09:50:59.830

我使用`OrientationEventListener`并实现了该方法`onOrientationChanged(int orientation)`。在我的 MainActivity 中。这是强制肖像我创建一个调用实例并开始跟踪旋转：

> 公共类 RotationDetector 扩展 OrientationEventListener

在我的 MainActivity 中：

> mOrientationListener = new RotationDetector(this); mOrientationListener.enable();

不要忘记`disable()`它，当你不再使用它时。并注意 MaliEGL 错误。

# regex - 使用具有精确数字的正则表达式查找文件

> ID：12478932
> 
> 赞同：3
> 
> 时间：2012-09-18T14:21:24.707
> 
> 标签：regex, file, find, digits

我正在尝试在 linux 上查找与以下文件匹配的所有文件：

```
frontend_prod_20100112.log
frontend_prod_20110101.log
frontend_prod_20120101.log
frontend_prod_20121231.log 
```

这里唯一的变量是里面的 8 个数字（正好是 8 个）。我正在尝试运行：

```
find . -regex ".*frontend_prod_[0-9]{8}\.log" 
```

或者

```
find . -regex ".*frontend_prod_(\d){8}\.log" 
```

但它不起作用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T14:26:06.290

由于这是 POSIX，因此您需要稍微不同的语法：

```
find . -regex ".*frontend_prod_[0-9]\{8\}\.log" 
```

# c# - 如何从transform属性中计算出原来的x和y？

> ID：12478937
> 
> 赞同：2
> 
> 时间：2012-09-18T14:21:55.733
> 
> 标签：c#, svg, inkscape

我对 svg 文档中 flowroot 标记的 transform 属性有疑问：

```
<g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1">
    <g
       transform="translate(-871.96706,1441.3237)">
      <flowRoot
         xml:space="preserve"
         id="flowRoot4433"
         transform="translate(317.05134,-1593.0553)">
        <flowRegion
             id="flowRegion4435">
          <rect
             id="rect4437"
             width="281.93622"
             height="428.39651"
             x="784.78339"
             y="473.07156" />
        </flowRegion>
          <flowPara
             id="flowPara4439">Your response is requested by
          </flowPara>
      </flowRoot>      
    </g>
  </g> 
```

以上 svgdoc 包含 1 个流根。flowroot 标记的父级是 g。现在我的问题是两个节点（flowroot及其父g）中都存在的transform属性。我想计算 flowroot 的原始 x 和 y 。在这种情况下我该怎么做？如果inkscape编辑器中有任何选项会更好，这样当我们创建一个新的svg时，transform属性就不会随节点生成？

# r - 如何按多列对 data.table 进行分组？

> ID：12478943
> 
> 赞同：77
> 
> 时间：2012-09-18T14:22:10.317
> 
> 标签：r, group-by, data.table

我正在使用该`data.table`包来加快对数据集的一些汇总统计数据收集。

我很好奇是否有一种方法可以按多个列进行分组。我的数据如下所示：

```
 purchaseAmt        adShown        url
   15.54            00001         150000001
    4.82            00002         150000001
  157.99            05005         776300044
   ...               ...            ... 
```

我可以做这样的事情：

```
adShownMedian <- df1[,median(purchaseAmt),by="adShown"] 
```

得到每个广告的中位数。我将如何做一些结合`adShown`和的事情`url`？

我试过这个：

```
adShownMedian <- df1[,median(purchaseAmt),by=c("adShown","url")] 
```

但没有运气。

有什么建议么？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-09-18T14:38:49.910

使用`by=list(adShown,url)`代替`by=c("adShown","url")`

例子：

```
set.seed(007) 
DF <- data.frame(X=1:20, Y=sample(c(0,1), 20, TRUE), Z=sample(0:5, 20, TRUE))

library(data.table)
DT <- data.table(DF)
DT[, Mean:=mean(X), by=list(Y, Z)]

     X Y Z      Mean
 1:  1 1 3  1.000000
 2:  2 0 1  9.333333
 3:  3 0 5  7.400000
 4:  4 0 5  7.400000
 5:  5 0 5  7.400000
 6:  6 1 0  6.000000
 7:  7 0 3  7.000000
 8:  8 1 2 12.500000
 9:  9 0 5  7.400000
10: 10 0 2 15.000000
11: 11 0 4 14.500000
12: 12 0 1  9.333333
13: 13 1 1 13.000000
14: 14 0 1  9.333333
15: 15 0 2 15.000000
16: 16 0 5  7.400000
17: 17 1 2 12.500000
18: 18 0 4 14.500000
19: 19 1 5 19.000000
20: 20 0 2 15.000000 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-02-11T18:07:34.970

要添加 Jilber Urbina 答案，并解决 kahlo 评论：
如果您想为每个 Y - Z 组合获取单行以及您可以执行的聚合值

```
DT[, .(X=mean(X)), by=list(Y, Z)] 
```

这和做的一样

```
DT[, .(X=mean(X)), by=.(Y, Z)] 
# or
DT[, .(X=mean(X)), by=c('Y','Z')]
# or specify column names in vector
names = c('Y','Z')
DT[, .(X=mean(X)), by=names] 
```

（data.table 版本 1.12.6）

# php - PHP $_GET 变量检查

> ID：12478944
> 
> 赞同：4
> 
> 时间：2012-09-18T14:22:13.440
> 
> 标签：php, get

我有一些代码可以检查链接中 var 的值。

`Http://www.blah.com/index.php?var=`

但是当这样的链接被发送到服务器时，它会返回一个数据库错误，因为没有设置 var。我已经尝试过 isset （它被设置为不会停止它）但是 !empty 不会阻止 var 被发送到数据库。

这是代码

```
if(isset($_GET['id']) && !empty($_GET['id'])){
$id = mysql_prep($_GET['id']);
....
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T14:25:14.623

```
$id = isset($_GET['id']) ? (int)$_GET['id'] : 0;

if($id){
$id = mysql_prep($id);
....
} 
```

# php - 从数组中获取数据以在电子邮件中使用

> ID：12478949
> 
> 赞同：0
> 
> 时间：2012-09-18T14:22:23.080
> 
> 标签：php, cakephp

我在表单上有以下一系列复选框的示例：

```
<?php

echo $this->Form->input(
    'reason', array(
        'label'=>false,
        'type' => 'select', 
        'multiple' => 'checkbox',
        'options' => array(
            'Contact me' => 'Contact me',
            'Brochure request' => 'Brochure request',
            'Demonstration request' => 'Demonstration request',
            'Training' => 'Training',
            'Support' => 'Support',
            'Other' => 'Other'
        )
    ));

?> 
```

然后将其设置为控制器中的变量，例如：

```
$this->set('reason', $this->data['Contact']['reason']); 
```

然后在电子邮件模板中我尝试过这样做：

```
<?php var_dump( implode( ', ', $reason ) ); ?> 
```

结果如下：`string(28) "Contact me, Brochure request"`如何删除这些引号和 string(28) 前缀？

这样做的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:53:23.347

使用[字符串助手/文本助手](http://book.cakephp.org/2.0/en/core-libraries/helpers/text.html)。它具有内置`toList`功能。

```
// controller
App::uses('String', 'Utility');
echo String::toList($this->request->data['Contact']['reason']);

// or
// controller
$this->set('reason', $this->data['Contact']['reason']);
// view
echo $this->Text->toList($reason);
// outputs 1, 2, 3 and 4 
```

假设`reason`是一个格式如下的数组：

```
array(
    (int) 0 => '1',
    (int) 1 => '2',
    (int) 2 => '3',
    (int) 3 => '4'
) 
```

或者只是做一个简单的`foreach($reason as $k => $v) { echo $v; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:53:10.980

尝试在视图中访问您的原因：

控制器

```
$this->set('contact', $this->request->data); 
```

看法

```
$contact['Contact']['reason']; 
```

# c# - 这些事件回调将发生在哪个线程上？

> ID：12478950
> 
> 赞同：2
> 
> 时间：2012-09-18T14:22:29.277
> 
> 标签：c#, multithreading, visual-studio-2010

```
new System.Threading.Thread(() =>
    {
        var myObject = new CustomObject();
        myObject.SomeEvent += SomeMethod;
    }).Start(); 
```

**第 1 部分：**假设我在 winforms 应用程序的主 UI 线程上运行上述代码。哪个`Thread`电话会`SomeMethod`发生？`Thread`它们会发生在我创建对象时创建的同一处吗？

**第 2 部分：**使用 Visual Studio 2010，我如何自己解决这个问题？我不知道你在哪里找到`Thread`正在运行的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T14:25:54.280

事件处理程序`SomeMethod`将在引发事件的任何线程上运行。

您可以在事件处理程序中设置断点`SomeMethod`并查看“[线程”窗口](http://msdn.microsoft.com/en-us/library/w15yf86f.aspx)（您可能希望为线程提供有意义的名称以找到它们）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T14:26:33.013

要找出您当前正在执行的线程，您可以使用`Thread.CurrentThread.ManagedThreadId`.

回答您的问题： SomeMethod 将在引发事件的线程中执行。

在您的情况下，它实际上永远不会在您将方法分配给事件时执行，但从未真正引发事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:14:53.920

只是想添加一个简单的测试，允许您检查处理程序执行的线程：

```
class Test
{
    delegate void update();
    static event update updateEvent;

    static void Main(string[] args)
    {
        Console.WriteLine("Parent thread: " + Thread.CurrentThread.ManagedThreadId);
        updateEvent += new update(Test_updateEvent);
        var t = new Thread(
            () =>
            {
                Console.WriteLine("Child thread: " + Thread.CurrentThread.ManagedThreadId);
                updateEvent();
            });
        t.Start();
        t.Join();
    }

    static void Test_updateEvent()
    {
        Console.WriteLine("Event thread: " + Thread.CurrentThread.ManagedThreadId);
    }
} 
```

打印：

```
Parent thread: 1
Child thread: 3
Event thread: 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T14:37:05.843

您可以检查**ManagedThreadId**属性[http://msdn.microsoft.com/en-us/library/system.threading.thread.managedthreadid.aspx](http://msdn.microsoft.com/en-us/library/system.threading.thread.managedthreadid.aspx)

@Mike 这是示例

```
 Console.WriteLine("Main New Thread : {0}", System.Threading.Thread.CurrentThread.ManagedThreadId);

        new System.Threading.Thread(() =>
        {
            Console.WriteLine("Inside New Thread : {0}", System.Threading.Thread.CurrentThread.ManagedThreadId);
        }).Start();

        Console.WriteLine("Main New Thread : {0}", System.Threading.Thread.CurrentThread.ManagedThreadId); 
```

# asp.net - ASP.NET - 使用传递身份验证运行 PowerShell 脚本（Windows 身份验证）

> ID：12478951
> 
> 赞同：0
> 
> 时间：2012-09-18T14:22:29.990
> 
> 标签：asp.net, asp.net-mvc-3, powershell, windows-authentication

我正在 ASP.NET 中创建基于 MVC3 的 Intranet 应用程序。该应用程序非常简单：
- 要求输入（用户名）
- 使用提供的用户名运行 PowerShell 脚本（从远程数据库获取一些数据）
- 将脚本输出管道传输到 HTML 文件
- 重定向到创建的 HTML 文件。

出于安全原因，我使用 Windows 身份验证，仅对指定的用户组进行访问。这对应用程序本身非常有用 - 我可以在角落看到当前用户名，未指定的用户无权访问。

问题是 PS 脚本本身。它似乎不适用于用户的凭据，所以我`whoami`在脚本中添加了一行并得到了结果：`iis apppool\asp.net v4.0`。

这是我用来运行 PS 脚本的代码：

```
var ps = PowerShell.Create();
ps.Commands.AddScript(@"CommandHere");
ps.Invoke(); 
```

如何使用当前用户的凭据运行它？

# r - 将新数据附加到 r 列表中的特定元素

> ID：12478952
> 
> 赞同：2
> 
> 时间：2012-09-18T14:22:30.900
> 
> 标签：r, list, append, rbind

如果我的术语有误，请纠正我，因为在这个问题上，我不太确定我在处理关于元素、对象、列表的内容。我只知道它不是数据框。使用`prepksel {adehabitatHS}`我试图修改我自己的数据以适合他们的包的示例。在他们的示例数据上运行这个命令会创建一个对象？称为 x 这是一个包含 3 个部分的列表？元素？给它。示例数据代码：

```
 library(adehabitatHS)
    data(puechabonsp)
    locs <- puechabonsp$relocs
    map <- puechabonsp$map
    pc <- mcp(locs[,"Name"])
    hr <- hr.rast(pc, map)
    cp <- count.points(locs[,"Name"], map)
     x <- prepksel(map, hr, cp) 
```

查看 x 的结构，它是一个包含 3 个元素的列表，称为选项卡、权重和因子

```
str(x) 
List of 3
 $ tab   :'data.frame': 191 obs. of  4 variables:
  ..$ Elevation : num [1:191] 141 140 170 160 152 121 104 102 106 103 ...
  ..$ Aspect    : num [1:191] 4 4 4 1 1 1 1 1 4 4 ...
  ..$ Slope     : num [1:191] 20.9 18 17 24 23.9 ...
  ..$ Herbaceous: num [1:191] 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 ...
 $ weight: num [1:191] 1 1 1 1 1 2 2 4 0 1 ...
 $ factor: Factor w/ 4 levels "Brock","Calou",..: 1 1 1 1 1 1 1 1 1 1 ... 
```

对于我的数据，我将创建多个`"x"`列表并希望合并每个段内的数据。所以，我`"x"`为 2007 年、2008 年和 2009 年创建了一个。现在，我想将`"tab"`08 的元素附加到 07，然后将 09 附加到 07/08。`"weight"`并对这个列表的和`"factor"`元素做同样的事情`"x"`。你如何绑定这些数据？我考虑过`unlist`在列表的每个段上使用，然后附加然后加入每个段的年度数据，然后将三个段重新连接到一个列表中。但这很麻烦，而且似乎效率很低。

我知道这不是它的工作方式，但在我的脑海中这是我应该做的：

```
newlist<-append(x07$tab, x08$tab, x09$tab)
newlist<-append(x07$weight, x08$weight, x09$weight)
newlist<-append(x07$factor, x08$factor, x09$factor) 
```

也许`rbind`？`do.call("rbind", lapply(....uh...stuck`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:28:28.343

`append` works for vectors and lists, but won't give the output you want for data frames, the elements in your list (and they are lists) are of different types. Something like

```
tocomb <- list(x07,x08,x09)
newlist <- list(
  tab = do.call("rbind",lapply(tocomb,function(x) x$tab)), 
  weight = c(lapply(tocomb,function(x) x$weight),recursive=TRUE), 
  factor = c(lapply(tocomb,function(x) x$factor),recursive=TRUE)
) 
```

You may need to be careful with factors if they have different levels - something like `as.character` on the factors before converting them back with `as.factor`.

This isn't tested, so some assembly may be required. I'm not an R wizard, and this may not be the best answer.

# twitter-bootstrap - Twitter Bootstrap Modal - 水平调整大小？

> ID：12478953
> 
> 赞同：3
> 
> 时间：2012-09-18T14:22:33.257
> 
> 标签：twitter-bootstrap, resize, modal-dialog

我知道有很多关于如何垂直调整模态的答案，但我怎样才能水平调整（最好以响应方式）？每次我尝试最终都会对 CSS 犯下重罪。

**编辑**-如果重要的话，我正在尝试在`<table>`具有多列的模式中放入 a 。这些列超出了小模式窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T23:56:07.253

您可以在模态框添加一些 CSS 规则来设置宽度。

```
width: 900px 
```

如果您需要响应方式，请尝试在 css 中使用 @media。例如：

```
@media (min-width: 768px) and (max-width: 979px) {
  .modal {
    width: 800 px
  }
} 
```

# jaxb - 缺少球衣文本/html 消息正文作者

> ID：12478955
> 
> 赞同：2
> 
> 时间：2012-09-18T14:22:39.260
> 
> 标签：jaxb, jersey

我正在使用 jersey 客户端向 REST 服务器发送 POST 请求。我在请求和响应中都使用了 JAXB 对象。

```
public RegisterUserResponse apply(RegisterUserRequest input) {

    logger.debug("sending user authentication request");   
    return webResource.
            path(requestPath).
            path(registerUserPath).
            accept(MediaType.TEXT_HTML).      // set response content type
            type(MediaType.APPLICATION_XML).        // set request content type
            post(RegisterUserResponse.class, input);
} 
```

这里两个 RegisterUserRequest/Response 类都带有 xml 注释。

我得到的响应是一个 text/html 响应，它是一个 xml 字符串，其格式可以转换回 RegistrationResponse

我收到一条错误消息，提示缺少 RegistrationResponse 和 text/html 消息正文编写器。有什么办法可以解决这个问题。

我的异常堆栈跟踪如下

```
DEBUG RegisterUser - sending user registration request
com.sun.jersey.api.client.ClientHandlerException: com.sun.jersey.api.client.ClientHandlerException: A message body writer for Java type, RegisterUserRequest, and MIME media type, text/html, was not found
    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:151)   
    at com.sun.jersey.api.client.Client.handle(Client.java:648)
    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:680)
    at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)
    at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:568)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:74)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
    at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
    at org.testng.TestRunner.privateRun(TestRunner.java:749)
    at org.testng.TestRunner.run(TestRunner.java:600)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:312)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:274)
    at org.testng.SuiteRunner.run(SuiteRunner.java:223)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1039)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:964)
    at org.testng.TestNG.run(TestNG.java:900)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:110)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:205)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:174)
    at org.testng.RemoteTestNGStarter.main(RemoteTestNGStarter.java:111)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: com.sun.jersey.api.client.ClientHandlerException: A message body writer for Java type, RegisterUserRequest, and MIME media type, text/html, was not found
    at com.sun.jersey.api.client.RequestWriter.writeRequestEntity(RequestWriter.java:288)
    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler._invoke(URLConnectionClientHandler.java:213)
    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:149)
    ... 38 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:29:03.733

It appears as though JAX-RS/Jersey does not use JAXB by default for the `text/html` media type. You could leverage the standard `MessageBodyReader`/`MessageBodyWriter` mechanisms to plug-in your own handling for that media type that leverages JAXB.

Below is a link to an answer I gave that includes a sample `MessageBodyReader`:

*   [Validate JAXBElement in JPA/JAX-RS Web Service](https://stackoverflow.com/questions/3428273/validate-jaxbelement-in-jpa-jax-rs-web-service/3440388#3440388)

# c# - 如何将查找作为 2 个旧查找的联合？

> ID：12478958
> 
> 赞同：14
> 
> 时间：2012-09-18T14:22:56.280
> 
> 标签：c#, .net, linq

如何从 2 个旧查找的联合中获取查找？似乎`a = a.Union(b)`对他们不起作用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-18T14:33:46.050

如果您有查找来自的原始列表，则可能会更容易。`Dictionary`如果您使用s of`Lists`而不是查找，它也可能更容易。但是，仍然可以将两个查找对象合并为一个新对象。基本思想是从查找中检索原始值，然后从两者的连接集创建新查找。

```
var a = new[] {"apple","aardvark","barn"};
var b = new[] {"baboon", "candy", "cork"};

var al = a.ToLookup (x => x[0]);
var bl = b.ToLookup (x => x[0]);

var cl = al.Concat(bl).SelectMany(x => x).ToLookup(x => x[0]); 
```

如果您也不知道原始键选择器功能，可以使用此变体。

```
var cl = al.Concat(bl)
    .SelectMany(lookup => lookup.Select(value => new { lookup.Key, value}))
    .ToLookup(x => x.Key, x => x.value); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-08T04:24:57.607

我写了这个扩展方法，它利用了 an`ILookup<TK,TV>`是`IEnumerable<IGrouping<TK,TV>>`

```
 public static ILookup<TK, TV> Union<TK, TV>(this ILookup<TK, TV> self, IEnumerable<IGrouping<TK,TV>> moreGroupings)
    {
        return self.Concat(moreGroupings)
            .SelectMany(grouping => grouping.Select(val => new KeyValuePair<TK, TV>(grouping.Key, val)))
            .ToLookup(kvp => kvp.Key, kvp => kvp.Value);
    } 
```

这里有一些测试可以证明。此处的查找包含字符串，以它们的长度为键。

```
 [TestMethod]
    public void EmptyLookups_UnionReturnsEmpty()
    {
        var a = new string[] { }.ToLookup(x => x.Length, x => x);
        var b = new string[] { }.ToLookup(x => x.Length, x => x);
        var c = a.Union(b);
        Assert.AreEqual(0, c.Count);
        c = b.Union(a);
        Assert.AreEqual(0, c.Count);
    }

    [TestMethod]
    public void OneEmptyLookup_UnionReturnsContentsOfTheOther()
    {
        var a = new string[] { }.ToLookup(x => x.Length, x => x);
        var b = new string[] { "hello", "world" }.ToLookup(x => x.Length, x => x);
        var c = a.Union(b);
        Assert.AreEqual(1, c.Count);
        Assert.AreEqual("helloworld", string.Join("", c[5].OrderBy(x=>x)));
        c = b.Union(a);
        Assert.AreEqual(1, c.Count);
        Assert.AreEqual("helloworld", string.Join("", c[5].OrderBy(x=>x)));
    }

    [TestMethod]
    public void UniqueKeys_UnionAdds()
    {
        var a = new string[] { "cat", "frog", "elephant"}.ToLookup(x => x.Length, x => x);
        var b = new string[] { "hello", "world" }.ToLookup(x => x.Length, x => x);
        var c = a.Union(b);
        Assert.AreEqual(4, c.Count);
        Assert.AreEqual("cat", string.Join("", c[3]));
        Assert.AreEqual("frog", string.Join("", c[4]));
        Assert.AreEqual("elephant", string.Join("", c[8]));
        Assert.AreEqual("helloworld", string.Join("", c[5].OrderBy(x=>x)));
    }

    [TestMethod]
    public void OverlappingKeys_UnionMerges()
    {
        var a = new string[] { "cat", "frog", "horse", "elephant"}.ToLookup(x => x.Length, x => x);
        var b = new string[] { "hello", "world" }.ToLookup(x => x.Length, x => x);
        var c = a.Union(b);
        Assert.AreEqual(4, c.Count);
        Assert.AreEqual("cat", string.Join("", c[3]));
        Assert.AreEqual("frog", string.Join("", c[4]));
        Assert.AreEqual("elephant", string.Join("", c[8]));
        Assert.AreEqual("hellohorseworld", string.Join("", c[5].OrderBy(x=>x)));
    } 
```

我也碰巧需要处理不区分大小写的字符串，所以我有这个需要自定义比较器的重载。

```
 public static ILookup<TK, TV> Union<TK, TV>(this ILookup<TK, TV> self, IEnumerable<IGrouping<TK,TV>> moreGroupings, IEqualityComparer<TK> comparer)
    {
        return self.Concat(moreGroupings)
            .SelectMany(grouping => grouping.Select(val => new KeyValuePair<TK, TV>(grouping.Key, val)))
            .ToLookup(kvp => kvp.Key, kvp => kvp.Value, comparer);
    } 
```

这些示例中的查找使用第一个字母作为键：

```
 [TestMethod]
    public void OverlappingKeys_CaseInsensitiveUnionAdds()
    {
        var a = new string[] { "cat", "frog", "HORSE", "elephant"}.ToLookup(x => x.Substring(0,1), x => x);
        var b = new string[] { "hello", "world" }.ToLookup(x => x.Substring(0,1), x => x);
        var c = a.Union(b, StringComparer.InvariantCulture);
        Assert.AreEqual(6, c.Count);
        Assert.AreEqual("cat", string.Join("", c["c"]));
        Assert.AreEqual("frog", string.Join("", c["f"]));
        Assert.AreEqual("elephant", string.Join("", c["e"]));
        Assert.AreEqual("hello", string.Join("", c["h"].OrderBy(x=>x)));
        Assert.AreEqual("HORSE", string.Join("", c["H"].OrderBy(x=>x)));
        Assert.AreEqual("world", string.Join("", c["w"]));
    }

    [TestMethod]
    public void OverlappingKeys_CaseSensitiveUnionMerges()
    {
        var a = new string[] { "cat", "frog", "HORSE", "elephant"}.ToLookup(x => x.Substring(0,1), x => x);
        var b = new string[] { "hello", "world" }.ToLookup(x => x.Substring(0,1), x => x);
        var c = a.Union(b, StringComparer.InvariantCultureIgnoreCase);
        Assert.AreEqual(5, c.Count);
        Assert.AreEqual("cat", string.Join("", c["c"]));
        Assert.AreEqual("frog", string.Join("", c["f"]));
        Assert.AreEqual("elephant", string.Join("", c["e"]));
        Assert.AreEqual("helloHORSE", string.Join("", c["h"].OrderBy(x=>x)));
        Assert.AreEqual("helloHORSE", string.Join("", c["H"].OrderBy(x=>x)));
        Assert.AreEqual("world", string.Join("", c["w"]));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-23T13:55:44.033

对于任何数量的数组/列表，可以考虑更灵活的方式。例如，创建同义词的查找：

```
public ILookup<string, string> GetSynonyms()
{
    var data = new[]
        {
            new[] {"hello", "hi there", "привет"},
            new[] {"bye", "Tchau", "Adios"},
            new[] {"hello", "hi there"}
        };

    return data
        .SelectMany(words => words.SelectMany(
            keyWord => words.Where(word => word != keyWord).Select(word => new Tuple<string, string>(item1: keyWord, item2: word))))
        .Distinct(comparer: new DelegateComparer<Tuple<string, string>>(equals: Equals, hashCode: v => v.GetHashCode()))
        .ToLookup(keySelector: k => k.Item1, elementSelector: e => e.Item2);
}

public sealed class DelegateComparer<T> : IEqualityComparer<T>
{
    private readonly Func<T, T, bool> _equals;
    private readonly Func<T, int> _hashCode;

    public DelegateComparer(Func<T, T, bool> equals, Func<T, int> hashCode)
    {
        _equals = equals;
        _hashCode = hashCode;
    }

    public bool Equals(T x, T y)
    {
        return _equals(x, y);
    }

    public int GetHashCode(T obj)
    {
        return _hashCode != null ? _hashCode(obj) : obj.GetHashCode();
    }
} 
```

![执行结果](../Images/124fbd741d3575f40687a8162435afcd.png)

# android - 偶然生成位图

> ID：12478959
> 
> 赞同：0
> 
> 时间：2012-09-18T14:22:57.653
> 
> 标签：android

我怎样才能制作一段代码来偶然生成我的位图。我希望 bitmap1 有 50% 的机会，bitmap2 有 50% 的机会，bitmap3 有 20% 的机会。我可以就如何做到这一点获得一些建议吗？

我知道怎么做 550：

```
Random r = new Random();
int randBall = r.nextInt(2);

if (randBall == 0) {
   return Gball;
} else if (randBall == 1) {
   return Bball;
} 
```

但如果我想再添加一个有 20% 几率生成的球，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T14:26:30.487

您可以使用 java [Random.nextInt(int)](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#nextInt%28%29)方法。
调用`nextInt(100);`和使用

```
int p1 = 30;
int p2 = 50;

if ( n < p1 )
   return GBall;
else if ( n >= p1 && n < p1 + p2 )
   return BBall;
else // n < 100, always holds
   return RBall; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T14:27:30.393

所以你总共有 120% :)。但如果你的意思是 50/30/20 分布：

```
randBall = r.nextInt(10);
if (randBall < 5) return bitmap1;
else if (randBall < 8) return bitmap3;
else { return bitmap2; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T14:30:17.497

使用浮点数：

```
r = random number between 0.0 and 1.0    
if (r < 0.2) { do something with 20% probability)}
else if (r < 0.9) {do something with 70% probability}
else {do something with remaining 10% probability} 
```

# python - 无法使用 requests.get(url) 运行 BeautifulSoup

> ID：12478965
> 
> 赞同：1
> 
> 时间：2012-09-18T14:23:21.723
> 
> 标签：python, beautifulsoup, python-requests

```
start_url=requests.get('http://www.delicious.com/golisoda')
soup=BeautifulSoup(start_url) 
```

此代码显示以下错误：

```
Traceback (most recent call last):
  File "test2_requests.py", line 10, in <module>
    soup=BeautifulSoup(start_url)
  File "/usr/local/lib/python2.7/dist-packages/bs4/__init__.py", line 169, in __init__
    self.builder.prepare_markup(markup, from_encoding))
  File "/usr/local/lib/python2.7/dist-packages/bs4/builder/_lxml.py", line 68, in prepare_markup
    dammit = UnicodeDammit(markup, try_encodings, is_html=True)
  File "/usr/local/lib/python2.7/dist-packages/bs4/dammit.py", line 203, in __init__
    self._detectEncoding(markup, is_html)
  File "/usr/local/lib/python2.7/dist-packages/bs4/dammit.py", line 373, in _detectEncoding
    xml_encoding_match = xml_encoding_re.match(xml_data)
TypeError: expected string or buffer 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T14:25:05.427

使用`.content`响应的 ：

```
start_url = requests.get('http://www.delicious.com/golisoda')
soup = BeautifulSoup(start_url.content) 
```

或者，您可以使用解码后的 unicode 文本：

```
start_url = requests.get('http://www.delicious.com/golisoda')
soup = BeautifulSoup(start_url.text) 
```

请参阅文档的[响应内容部分](https://requests.readthedocs.io/en/latest/user/quickstart/#response-content)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:34:47.270

```
from BeautifulSoup import BeautifulSoup
import urllib2
data=urllib2.urlopen('http://www.delicious.com/golisoda').read()
soup=BeautifulSoup(data) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:26:57.523

您可能需要使用

使用

```
soup=BeautifulSoup(start_url.read()) 
```

或者

```
soup=BeautifulSoup(start_url.text) 
```

# c++ - 包括来自不同的库

> ID：12478971
> 
> 赞同：1
> 
> 时间：2012-09-18T14:23:41.660
> 
> 标签：c++, include

我必须创建一个可以从不同库创建对象的工厂方法。我的目录树如下所示：

libA/src/...
libB/src/...
libC/src/...
src/...

libA、libB 等是分开编译的。

让工厂类在 libA/src/Factory.h 中。它应该从 libB/src/someclass.h 创建一个对象。

如果我在 Factory.h 中包含 ../../libB/src/someclass.h，则 libA 无法编译，因为它无法从 someclass.h 中找到包含（编译器在 libA/src 中查找它们，但那些在 libB/src 中）如果我不包含，它不知道 Someclass，所以我不能创建它的实例。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:26:11.383

您正在寻找前向声明：在类只需要知道类型的标头中，声明它`class AFactory;`而不是包含整个 Factory.h。

[有关更多信息，请参阅此提示](http://www-subatech.in2p3.fr/~photons/subatech/soft/carnac/CPP-INC-1.shtml)。

编辑

重新阅读您的问题后，我发现您希望单独编译库这一事实与 libA 的工厂必须知道类 libB 之间存在矛盾。那时你不能单独编译，所以我只是提供所有必要的目录路径来包含路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:53:06.450

我试图重现此错误，但我的示例具有相同的目录结构并且工作正常。

```
#ifndef FACTORY_H_
#define FACTORY_H_

#include "../../libB/src/Someclass.h"

class Factory {
public:
    Factory();
    virtual ~Factory();
};

#endif /* FACTORY_H_ */ 
```

当存在直接依赖关系时，如何分别编译它们？也许您想使用静态链接库。请说明你的意图。

# c# - 如何获得 IFormatProvider 的文化

> ID：12478972
> 
> 赞同：1
> 
> 时间：2012-09-18T14:23:41.273
> 
> 标签：c#, globalization

我正在使用指定给我的文化将字符串转换为值`IFormatProvider`。

我想弄清楚他们给了我哪种文化。

我意识到`IFormatProvider`不一定必须对应于 a `System.Globalization.Culture`，但确实如此。

那么我怎样才能得到它的名字呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T14:29:30.810

该类`CultureInfo`实现`IFormatProvider`，因此您可以尝试强制转换：

```
IFormatProvider provider = ...
CultureInfo ci = provider as CultureInfo;
if (ci != null)
{
    string name = ci.DisplayName;
    ...
} 
```

# iphone - 我可以在 iOS 的项目名称中添加表情符号吗？

> ID：12478976
> 
> 赞同：2
> 
> 时间：2012-09-18T14:24:05.037
> 
> 标签：iphone, ios, ipad, emoji

我一直想知道我们是否可以在 iOS 项目的项目名称中添加表情符号图标。如果应用名称有表情符号图标，苹果会拒绝应用吗？

我尝试在我的项目名称中添加表情符号，并成功在我的应用名称中添加了表情符号图标。但我只想知道这合法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:34:25.470

除了我的经验，我没有其他来源，但看起来 Apple 允许这样做。如果您在 AppStore 上的 iDevice 上搜索“emoji”一词，您会发现多个标题中带有 emoji 图标的应用。他们没有理由批准这些并拒绝您的。唯一的缺点是它不可搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-13T22:54:43.487

我认为现在在 2019 年，答案是否定的。我找不到任何在标题/副标题中使用表情符号的应用程序。

# ruby-on-rails - Heroku 证书——不包括 CA 包，现在无法更新（Pem 不能为空白，无效，过期时间不能为空白）

> ID：12478978
> 
> 赞同：2
> 
> 时间：2012-09-18T14:24:09.257
> 
> 标签：ruby-on-rails, ssl, heroku, https, ssl-certificate

我有 NameCheap.com 提供的 COMODO 扩展验证。它给了我这些文件：

```
[domain]_com.crt
AddTrustExternalCARoot.crt
COMODOAddTrustServerCA.crt
COMODOExtendedValidationSecureServerCA.crt 
```

我做了所有我应该做的关于解包 site.key 的事情，但我没有做的是将上面列出的 4 个项目合并到一个文件中。我只是做了

```
$ heroku certs:add [domain]_com.crt site.key --app myapp 
```

在做了一些研究并将它们全部归入一个文件之后

```
$ cat [domain]_com.crt COMODOExtendedValidationSecureServerCA.crt /
  COMODOAddTrustServerCA.crt AddTrustExternalCARoot.crt > [domain]_com-bundle.pem 
```

我正在尝试做

```
$ heroku certs:update [new_file].pem site.key --app myapp 
```

但我得到这些错误：

```
Resolving trust chain... done
Updating SSL Endpoint [app].herokussl.com for [myapp]... failed
 !    Pem can't be blank
 !    Pem is invalid
 !    Expires at can't be blank 
```

我做错了PEM文件吗？我是不是`cat`按错了顺序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T18:34:42.313

我想我想通了，并在这里发表了一篇关于它的博客文章：http: [//starvingdeveloper.wordpress.com/2012/09/18/comodo-ev-ssl-with-heroku-if-you-did-it-wrong -第一次/](http://starvingdeveloper.wordpress.com/2012/09/18/comodo-ev-ssl-with-heroku-if-you-did-it-wrong-the-first-time/)

# httpwebrequest - 使用响应式扩展并行调用 2 个 httpwebrequests

> ID：12478980
> 
> 赞同：1
> 
> 时间：2012-09-18T14:24:10.350
> 
> 标签：httpwebrequest, system.reactive

我试图并行调用 2 个 httpwebrequest 并让它们在使用 Rx 扩展完成后调用相同的回调。但我不知道如何实现这一点..这是我的代码：

```
 private static IObservable<Stream> GetImage(string path)
    {
        var uri = new Uri(path);
        var thumburi = new Uri(path + "_thumb.jpg");
        return Observable.Create<Stream>(o =>
                                                  {
                                                        var request = (HttpWebRequest) HttpWebRequest.Create(uri);
                                                        var readComplete =
                                                          Observable.FromAsyncPattern<WebResponse>(
                                                              request.BeginGetResponse,
                                                              request.EndGetResponse)();
                                                        var subscription = readComplete
                                                          .Select(e => e.GetResponseStream())
                                                          .Subscribe(o);

                                                      return subscription;

                                                  });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:58:10.357

使用最新的位和 .Net 4.5，您可以执行以下操作：

```
private static IObservable<byte[]> GetImages(string path)
{
    var sources = new Uri[]
    {
        var uri = new Uri(path),
        var thumburi = new Uri(path + "_thumb.jpg")
    };

    var obs = from uri in sources.ToObservable()
              from data in Observable.Using(
                   () => new WebClient(),
                   client => client.DownloadDataTaskAsync(uri).ToObservable())
              select data;

    return obs;
} 
```

我确实想知道您是否真的只想返回数据流，而不关心哪个流对应于基础，哪个是缩略图。并行发出请求后，您将不再控制它们返回的顺序。如果需要，您可以投影一个包含 uri 和数据流的类型以消除它们的歧义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:01:07.857

为什么不直接使用 Zip？

```
GetStream("foo.jpg").Zip(GetStream("bar.jpg"), (foo, bar) => new { foo, bar })
    .Subscribe(fooAndBar => ...); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T01:06:45.717

我建议这种解决方案。

制作`GetImage`更通用的用途：

```
private static IObservable<Stream> GetImage(Uri uri)
{
    return Observable.Create<Stream>(o =>
    {
        var request = (HttpWebRequest)HttpWebRequest.Create(uri);
        var readComplete =
            Observable.FromAsyncPattern<WebResponse>(
                request.BeginGetResponse,
                request.EndGetResponse)();
        var subscription =
            readComplete
                .Select(e => e.GetResponseStream())
                .Subscribe(o);
        return subscription;
    });
} 
```

然后添加一个特定的`GetImages`方法来查询图像及其拇指：

```
private static IObservable<Tuple<Uri, Stream>> GetImages(string path)
{
    var uris = new []
    {
        new Uri(path + ".jpg"),
        new Uri(path + "_thumb.jpg"),
    }.ToObservable();

    return
        from uri in uris
        from stream in GetImage(uri)
        select Tuple.Create(uri, stream);
} 
```

我假设您的`path`变量不能包含“.jpg”扩展名，否则您必须进行一些字符串操作。

现在`GetImages`返回 a`IObservable<Tuple<Uri, Stream>>`因为`SelectMany`不保证流的返回顺序，所以我们需要使用`Uri`来消除流的歧义。

让我知道这是否适合您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T16:40:39.973

我猜你会拉出对两个单独流的异步调用，然后将它们连接起来，不是吗？像这样： http: [//leecampbell.blogspot.com/2010/06/rx-part-5-combining-multiple.html](http://leecampbell.blogspot.com/2010/06/rx-part-5-combining-multiple.html)

# javascript - iisnode 和 express

> ID：12478982
> 
> 赞同：5
> 
> 时间：2012-09-18T14:24:15.420
> 
> 标签：javascript, node.js, iisnode

我确信这个问题已经被问了一百万次，但我还没有找到任何解决以下问题的方法。

我有一个使用 nodejs 和 express 运行的基本应用程序。当我在节点中运行应用程序时，默认情况下它会将我发送到我的公用文件夹中的 index.html。即使我没有设置任何路线。我希望这发生。

我已经安装了 iisnode 并在“默认网站”下创建了一个名为“设备”的新应用程序。我把我的应用程序放在那里没有改变。阅读周围我需要用 web.config 整理一些东西，并决定使用这里提到的配置（不是 yaml）：

[http://tomasz.janczuk.org/2012/05/yaml-configuration-support-in-iisnode.html](http://tomasz.janczuk.org/2012/05/yaml-configuration-support-in-iisnode.html)

当我尝试在浏览器中加载应用程序时，它总是会尝试在我的 app.js 中查找路由并向我抛出消息，例如：

无法获取 /devices/

我真的用这个把头发拉出来，不知道该怎么办！我是否必须在 app.js 入口点内为静态内容设置默认路由？我有以下内容：

```
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
}); 
```

但是当我从它的根目录加载应用程序时，它仍然没有把我交给 index.html：

'http://localhost/devices/'

有人能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T16:41:04.777

解决此问题的最简单方法是为您的应用程序创建一个专用的 IIS 网站，而不是像您那样在 IIS 网站中创建一个 IIS 应用程序。

如果您在 IIS 中有一个专门用于 node.js 应用程序的网站，则可以在 URL 空间的根目录访问该应用程序，例如`http://myapp.com/`，这是默认快速路由配置所期望的。相反，如果您在 IIS 网站中创建一个 IIS 应用程序来托管您的 node.js 应用程序（例如`devices`），则可以通过从属于网站根 URL 的 URL 访问它，例如`http://myapp.com/devices/`. 额外的 URL 路径段 ( `devices`) 是您的快速应用程序不期望的，并且未配置为处理，因此它拒绝请求。

如果您坚持将 node.js 应用程序作为 IIS 应用程序托管在 IIS 中，则需要增加您的快速路由配置，以期望与 IIS 应用程序名称匹配的额外 URL 路径段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-01T22:46:49.273

可以在以下位置找到一个很好的建议：[iisnode 托管的 Web 应用程序可以计算出它托管的虚拟路径吗？](https://stackoverflow.com/questions/10540235/can-an-iisnode-hosted-web-application-work-out-the-virtual-path-at-which-it-is-h)本质上，您使用一个小变量来抽象路径和一个环境变量（如果存在）来控制它。另一个好帖子（可能更好的解决方案）可以在[https://github.com/tjanczuk/iisnode/issues/160找到](https://github.com/tjanczuk/iisnode/issues/160)

# full-text-search - Perforce 全文搜索

> ID：12478985
> 
> 赞同：2
> 
> 时间：2012-09-18T14:24:32.300
> 
> 标签：full-text-search, ms-office, perforce, full-text-indexing, document-management

快速的问题，我以后可能会有更多。

我目前正在研究文档管理解决方案，想知道是否有人能够设置 Perforce 库的全文搜索？专门针对 Microsoft Office 文档（word、excel），但是我可以看到这对一般文本文件有什么用处。

我记得不久前（在 P4 KB 或邮件列表上）阅读了有关全文搜索的内容，但经过几次搜索后找不到它。

如果不可能，一些关于如何实现解决方案的建议会很有帮助，例如使用 Windows 搜索服务 (Sharepoint)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:26:37.620

我不确定 excel/word 格式，但是在处理文本/代码文件时，P4 grep 命令可能对您有用。请试一试：

[P4 Grep 博客](http://www.perforce.com/blog/100712/p4-grep)和[P4 Grep 手册](http://www.perforce.com/perforce/r12.1/manuals/cmdref/grep.html)

希望你能从那里得到线索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T01:40:46.967

一种方法是（a）创建一个映射仓库有趣内容的客户端，（b）设置自动化以定期（例如，每秒一次）同步该客户端，以便它始终是最新的， (c) 设置 dig、Copernicus、Google 桌面搜索引擎或 Lucene 等软件来索引客户端同步的材料的内容，以及 (d) 设置提供结果的某种网络服务器对搜索者的索引引擎。

它需要将几个组件拼接在一起，但我在大约 10 年前的一个周末构建了一个这样的系统，并且在我离开那个组织之前，它可以很好地保持在一起 7 年多。

# android - 在 Android 虚拟键盘上捕获 KeyEvent

> ID：12478990
> 
> 赞同：0
> 
> 时间：2012-09-18T14:24:52.017
> 
> 标签：android, android-layout, android-widget, android-keypad

在输入 EditText 期间，有什么方法可以捕获 android 虚拟键盘上的键事件？

我想捕获 deleteKey 事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:41:25.717

这是一个很好的示例代码：

```
 @Override
    public boolean dispatchKeyEvent(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.KEYCODE_FORWARD_DEL) { 
/*Just switch out keycode if KEYCODE_FORWARD_DEL if its not the correct one*/
            Toast.makeText(MainActivity.this, "YOU CLICKED Delete KEY",
                    Toast.LENGTH_LONG).show();
            return true;
        }
        Toast.makeText(MainActivity.this, "Didnt work", Toast.LENGTH_SHORT)
                .show();
        return super.dispatchKeyEvent(e);
    }; 
```

我放了祝酒词，这样您就可以测试是否按下了键。[这里](http://developer.android.com/reference/android/view/KeyEvent.html)的开发者网站也有很多非常好的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:32:34.577

这段代码效果很好。请试一试。

```
public class MainActivity extends Activity implements View.OnKeyListener {
......
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        // TODO Auto-generated method stub
        // TODO Auto-generated method stub
        Log.e("setOnKeyListener", "Key Code:" + String.valueOf(keyCode));
        if(event.getAction() != KeyEvent.ACTION_DOWN) return true;
        Log.e("setOnKeyListener-ACTION_DOWN", "Key Code:" + String.valueOf(keyCode));
        return false;
    }
} 
```

# javascript - joomla中的订单不提交数据

> ID：12478992
> 
> 赞同：0
> 
> 时间：2012-09-18T14:24:55.887
> 
> 标签：javascript, joomla1.7

我有 Joomla 1.7 工作。我想在其中一个页面中包含订单。我有这部分代码，但问题是它没有将数据提交到电子邮件。我怎样才能将数据更改为提交？这是代码的一部分。

```
<div class="orderform"><form id="order_form" method="post" name="order_form">&gt;
<table>
<tbody id="personal_info">
<tr class="label"><th colspan="2">Personal Information</th></tr>
<tr id="row_firstname">
<td class="label">
 <div><label for="firstname">First name:<span class="required_star">*</span></label>

</div>
    </td>
    <td>
    <div><input id="firstname" type="text" name="firstname" value="" />
    <div id="error_firstname" class="validation_error">Enter your first name</div>
    </div>
    </td>
    </tr>
    <tr id="row_lastname">
    <td class="label">
    <div><label for="lastname">Last name:<span class="required_star">*</span></label></div>
    </td>
    <td>
    <div><input id="lastname" type="text" name="lastname" value="" />
    <div id="error_lastname" class="validation_error">Enter your last name</div>
    </div>
    </td>
    </tr>
    <tr id="row_email">
    <td class="label">
     <div><label for="email">Email:<span class="required_star">*</span></label></div>
      </td>
     <td>
     <div><input id="email" type="text" name="email" value="" />
     <div id="error_email" class="validation_error">Enter valid email address</div>
     </div>
     </td>
     </tr>
     <tr id="row_retype_email">
     <td class="label">
     <div><label for="retype_email">Re-type email:<span class="required_star">*</span></ label></div>
     </td>
     <td>
     <div><input id="retype_email" type="text" name="retype_email" value="" />
     <div id="error_retype_email" class="validation_error">Emails do not coincide</div>
     </div>
     </td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:53:14.017

您将需要 php，例如：

```
<?php

if (isset($_POST['Submit'])) {

    if ($_POST['name'] != "") {
        $_POST['name'] = filter_var($_POST['name'], FILTER_SANITIZE_STRING);
        if ($_POST['name'] == "") {
            $errors .= 'Please enter a valid name.<br/><br/>';
        }
    } else {
        $errors .= 'Please enter your name.<br/>';
    }

    if ($_POST['email'] != "") {
        $email = filter_var($_POST['email'], FILTER_SANITIZE_EMAIL);
        if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
            $errors .= "$email is <strong>NOT</strong> a valid email address.<br/><br/>";
        }
    } else {
        $errors .= 'Please enter your email address.<br/>';
    }

    if ($_POST['homepage'] != "") {
        $homepage = filter_var($_POST['homepage'], FILTER_SANITIZE_URL);
        if (!filter_var($homepage, FILTER_VALIDATE_URL)) {
            $errors .= "$homepage is <strong>NOT</strong> a valid URL.<br/><br/>";
        }
    } else {
        $errors .= 'Please enter your home page.<br/>';
    }

    if ($_POST['message'] != "") {
        $_POST['message'] = filter_var($_POST['message'], FILTER_SANITIZE_STRING);
        if ($_POST['message'] == "") {
            $errors .= 'Please enter a message to send.<br/>';
        }
    } else {
        $errors .= 'Please enter a message to send.<br/>';
    }

    if (!$errors) {
        $mail_to = 'me@somewhere.com';
        $subject = 'New Mail from Form Submission';
        $message  = 'From: ' . $_POST['name'] . "\n";
        $message .= 'Email: ' . $_POST['email'] . "\n";
        $message .= 'Homepage: ' . $_POST['homepage'] . "\n";
            $message .= "Message:\n" . $_POST['message'] . "\n\n";
        //mail($to, $subject, $message);

        echo "Thank you for your email!<br/><br/>";
    } else {
        echo '<div style="color: red">' . $errors . '<br/></div>';
    }
}
?>

<form name="form1" method="post" action="form-email.php">
Name: <br/>
<input type="text" name="name" value="<?php echo $_POST['name']; ?>" size="50" /><br/><br/>
Email Address: <br/>
<input type="text" name="email" value="<?php echo $_POST['email']; ?>" size="50"/> <br/><br/>
Home Page: <br/>
<input type="text" name="homepage" value="<?php echo $_POST['homepage']; ?>" size="50" /> <br/><br/>
Message: <br/>
<textarea name="message" rows="5" cols="50"><?php echo $_POST['message']; ?></textarea>
<br/>
<input type="submit" name="Submit" />
</form> 
```

只需确保您的 FORM 页面的名称是：form-email.php（在 FORM HTML 中查找操作并根据需要进行更改）。该脚本已经过测试并且可以正常工作，您只需将其正确插入您的 Joomla 页面即可。

# c# - 从 LINQ 查询结果中获取最低年份

> ID：12478994
> 
> 赞同：2
> 
> 时间：2012-09-18T14:25:06.760
> 
> 标签：c#, sql, linq

我试图从 LINQ 查询返回的一组行中找到最早的年份。ActivationDate 作为日期时间值存储在数据库中。

我知道我可以进行单独的查询来获取日期，但我宁愿使用现有查询的结果，因为它用于其他几件事。

```
IEnumerable<MonitoringPanel> panels = from rows in db.MonitoringPanels
                                      where rows.DealerEntity == dealerIDint
                                      select rows; 
```

然而，这不断抛出一个错误：

```
var testDate = panels.Min().ActivationDate; 
```

错误：

```
System.ArgumentException was unhandled by user code. 
```

即使我尝试选择最低的 PanelNumner（存储为 int），它也会引发错误，但以下操作确实有效：

```
var testDate = panels.FirstOrDefault().ActivationDate; 
```

**解决方案**

```
 DateTime testDate = (DateTime)panels.Min( thing => thing.ActivationDate);
        int lowYear = testDate.Year; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T14:29:52.283

除非 Enumerable 是外围类型，否则您需要添加一个 lambda 表达式来告诉它要使用类的哪个属性。尝试

```
var testDate = panels.Min(x => x.ActivationDate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:30:41.997

我认为您需要告诉`Min()`方法要查找的最小值。哪个字段是最小值。

```
var testDate = panels.Min(panel => panel.ActivationDate); 
```

# javascript - 以编程方式确定 Backbone.js .on 回调？

> ID：12478996
> 
> 赞同：0
> 
> 时间：2012-09-18T14:25:16.547
> 
> 标签：javascript, backbone.js

我正在尝试确定 Backbone.js 模型 .on 事件绑定到什么功能。例如，假设我有一个观点：

```
this.model.on('change', this.render, this); 
```

我希望能够以编程方式确定当模型发生更改时将调用渲染函数。

我查看了 Backbone.js 源代码，似乎绑定存储在 ._callbacks 中。在 ._callbacks 中，我可以确定模型绑定到的事件。从上面的示例中，我可以确定模型绑定了更改事件。但是，是否可以确定模型绑定到视图的渲染函数？

对于那些好奇的人，我正在尝试扩展我目前正在使用的视图的渲染功能。但是，当我扩展/重新分配渲染函数时，它会破坏模型的事件绑定。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:55:20.257

有几种方法可以解决这个问题。你的应该可以工作，但你必须手动禁用视图的正常绑定并添加你自己的：

```
function renderMore() {
    //do your pre-render code
    view.render()
    //do your post-render code
}
model.off('change', view.render);
model.on('change', renderMore); 
```

但是，这是一种非常糟糕的封装不良代码气味。您是否考虑过子类化您的视图并在子类`render`中的正确时间调用父类的方法？

我遇到了这样一种情况，我希望能够将对话框呈现为没有额外外观元素的纯窗口以及带有标题栏、关闭按钮等的 jquery 模态对话框。我让父类负责呈现基本内容，然后我可以添加 mixins 来处理 jquery 与 vanilla 的变体。