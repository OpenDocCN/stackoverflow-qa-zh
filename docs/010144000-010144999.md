# StackOverflow 问答 10144000-10144999

# nhibernate - NHibernate 关联在没有多对一 id 的情况下保存

> ID：10144000
> 
> 赞同：0
> 
> 时间：2012-04-13T15:43:10.807
> 
> 标签：nhibernate

我的根元素及其所有关联都已保存，但引用的 id 未保存。

实体关联

MeasureDomain 1 -> * MeasureSubDomains 1 -> * MeasureControls 1 -> * Measure

除了最后一个之外，我对所有实体都有 addRange 方法。这是一个例子：

```
/// <summary>
/// Gets or sets the sub domains.
/// </summary>
/// <value>
/// The sub domains.
/// </value>
public virtual IList<MeasureSubDomain> SubDomains { get; set; }
/// <summary>
/// Adds the sub domain.
/// </summary>
/// <param name="subDomain">The sub domain.</param>
public virtual void AddSubDomains(IEnumerable<MeasureSubDomain> subDomains)
{
    foreach (var item in subDomains)
        this.SubDomains.Add(item);
} 
```

当我在会话上调用 save 方法时，一切都被保存了，但引用丢失了。看我的例子：

**测量域条目**

```
id  code_1  omschrijving    createdat   createdby   modifiedat  modifiedby  toelichting
75  05  Beveiligingsbeleid  NULL    NULL    NULL    NULL    NULL 
```

**测量子域条目**

```
id  code    omschrijving    domein  createdat   createdby   modifiedat  modifiedby  toelichting
204 01  Informatiebeveo     NULL    NULL    NULL    NULL    NULL    Directie richting en ondersteuning bieden voor informatiebeveiliging overeenkomstig de bedrijfsmatige eisen en relevante wetten en voorschriften 
```

列域为 NULL 并且应该具有我保存的 MeasureDomain 的值 75，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:42:50.897

您需要告诉子域它属于哪个域

```
foreach (var item in subDomains)
{
        item.MeasureDomain = this;
        this.SubDomains.Add(item);
}
session.Update(this); 
```

# javascript - 如何使正则表达式仅匹配每个匹配项的第一次出现？

> ID：10144001
> 
> 赞同：5
> 
> 时间：2012-04-13T15:43:13.300
> 
> 标签：javascript, regex

```
/\b(keyword|whatever)\b/gi 
```

如何修改上述 javascript 正则表达式以仅匹配每个单词的第一次出现（我相信这被称为非贪婪）？

“关键字”的第一次出现和“whatever”的第一次出现，我可能会在那里放更多的词。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T15:44:23.053

从您的正则表达式中删除`g`标志：

```
/\b(keyword|whatever)\b/i 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T15:44:28.157

你正在做的事情是用一个单一的正则表达式根本无法实现的。相反，您必须将您希望找到的每个单词存储在一个数组中，遍历它们以寻找答案，然后对于任何匹配项，将结果存储在一个数组中。

**例子：**

```
var words = ["keyword","whatever"];
var text = "Whatever, keywords are like so, whatever... Unrelated, I now know " +
           "what it's like to be a tweenage girl. Go Edward.";
var matches = []; // An empty array to store results in.
/* When you search the text you need to convert it to lower case to make it
   searchable.
 * We'll be using the built in method 'String.indexOf(needle)' to match 
   the strings as it avoids the need to escape the input for regular expression
   metacharacters. */

//Text converted to lower case to allow case insensitive searchable.
var lowerCaseText = text.toLowerCase();
for (var i=0;i<words.length;i++) { //Loop through the `words` array
    //indexOf returns -1 if no match is found
    if (lowerCaseText.indexOf(words[i]) != -1) 
        matches.push(words[i]);    //Add to the `matches` array
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T15:44:16.160

从您的正则表达式中删除 g 修饰符。然后它将只找到一个匹配项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T17:40:19.563

你所说的不能用 JavaScript 正则表达式来完成。使用高级正则表达式功能（如 .NET 的无限制后视）可能是可能的，但 JavaScript 的功能集非常有限。甚至在 .NET 中，为每个单词创建一个单独的正则表达式并一个一个地应用它们可能是最简单的；在 JavaScript 中，这是您唯一的选择。

贪婪仅适用于使用量词的正则表达式，例如`/START.*END/`. `.`意思是“任何字符”，意思`*`是“零个或多个”。定位后`START`，`.*`贪婪地消耗文本的其余部分。然后它开始回溯，一次“回馈”一个字符，直到正则表达式的下一部分`END`成功匹配。
我们称这个正则表达式为“贪婪”，因为它匹配从 的第一次出现`START`到最后一次出现的所有内容`END`。

如果可能有多个 "START"-to-"END" 序列，并且您只想匹配第一个，则可以将 a 附加`?`到`*`以使其非贪婪：`/START.*?END/`。现在，每次`.`尝试使用下一个字符时，它*首先*检查它是否可以`END`在那个位置匹配。因此，它从第一个匹配`START`到之后的第一个`END`。如果你想单独匹配所有的“START”-to-“END”序列，你可以添加 'g' 修饰符`/START.*?END/g`：

当然，这比这要复杂一些。例如，如果这些序列可以嵌套，如`START…START…END…END`? 如果我对这个答案有点得意忘形，那是因为理解贪婪是掌握正则表达式的第一个重要步骤。：-/

# android - 定位视图，顶部表示为显示高度的百分比

> ID：10144002
> 
> 赞同：0
> 
> 时间：2012-04-13T15:43:15.270
> 
> 标签：android, android-layout

我只知道这很简单，大约 30 分钟后，我会恨自己...

我有一个闪屏，它由一个填充屏幕的静态图像组成。所以我只需设置我在布局中使用的任何根视图的背景属性。

该图像有一个空白区域，我需要在其上放置一个“我接受”按钮。为了处理不同的分辨率，我必须使用显示高度的百分比来定位它 - 58% 是点。

我不能使用 layout_weight 因为按钮的大小和 absolutelayout（在代码中设置 y 位置）已被弃用。

我怎样才能做到这一点？我不在乎哪个视图组是父级，我可以让“空白”视图填满空间。

我的目标是完全在布局 XML 中做到这一点，以保持我的代码干净......

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T15:51:34.483

你说你不能使用`layout_weight`，但如果你想纯粹用 XML 来做，那是你唯一的选择。我不明白为什么你认为你无论如何都不能使用它。这是一个示例，说明您可以如何做到这一点：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/splash"
    android:orientation="vertical" >

   <View
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="58" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="42" >

            <!-- Place buttons here -->

    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:58:47.770

我看不到使用 layout_weight 的任何其他方式...而且整个类`AbsoluteLayout`已被弃用，因此请尽量避免使用它。我建议使用`LinearLayout`给定 weight_sum 为 1 的 rootView。添加另一个 Space-filling LinearLayout 宽度，权重为 0.58，并在 Button 下方使用 wrap_content 属性。不幸的是，除非您发布您的 xml，否则我无法告诉您更多信息，以便我可以看到您尝试实现的目标。这种应该工作：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/your_desired_background"
    android:orientation="vertical" 
    android:weight_sum="1">
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight=".58" />
    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

# ruby-on-rails - 在线 Rails 开发环境

> ID：10144003
> 
> 赞同：2
> 
> 时间：2012-04-13T15:43:24.840
> 
> 标签：ruby-on-rails, ruby, heroku

在关闭之前是否有任何在线 Rails 开发环境（类似于 Heroku Gardens 的样子）？

我正在寻找一个完全托管的解决方案，类似于 pythonanywhere 为 pydjango 提供的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:18:55.273

看看Cloud9

[http://cloud9ide.posterous.com/introducing-heroku-support](http://cloud9ide.posterous.com/introducing-heroku-support)

它做你想做的事

# php - html数组索引名称到变量

> ID：10144004
> 
> 赞同：1
> 
> 时间：2012-04-13T15:43:26.207
> 
> 标签：php, html, arrays

我有如下表格：

```
<form name="basketSelectionForm" action="processBasket.php" method="POST">
            <div id="tabs-1">
                <table cellpadding="10" cellspacing="10" width="inherit">
                    <tr>
                        <td><img alt="itemNameb" src="images/itemName.jpg" width="70px" height="70px"/></td>
                        <td>Qty. <input value="0" id="itemName" name="basket[itemName]" type="text" style="width:40px;"/>&nbsp; &nbsp; &nbsp;</td>

                        <td><img alt="itemName" src="images/itemName.jpg" width="70px" height="70px"/></td>
                        <td>Qty. <input value="0" id="itemName" name="basket[itemName]" type="text" style="width:40px;"/></td> 
```

现在，当我转到第二页查看数组的条目时，我这样做：

```
<?php
    $itemsBasket = array( );
    $itemsBasket = $_POST['basket'];
    echo "<h1>The Items Are...</h1><br>";
    //print_r($itemsBasket);

    foreach ($itemsBasket as $value) 
    {
        if($value > 0){
            echo $value . "<br>";
        }
    }

?> 
```

这将在数​​组的索引处打印值...但是我需要存储索引的名称，所以可以说该项目是巧克力和 12 的值。我想从数组中提取该索引名称以将其存储在变量中然后为该变量赋值...

我有什么办法可以做到吗？现在我在迭代时只得到价值......

感谢您的帮助，如果问题不清楚，我会帮助解释得更好。

更新：这是意外的输出....

> whitethoab：Array 羊毛：22 shemag：22 汗衫：1 serwalthoab：22 袜子：12

这是显示为二维数组的元素的定义...

```
<td><img alt="White Thoab" src="images/whitethoub.jpg" width="70px" height="70px"/></td>
                        <td>Qty. <input value="0" id="whitethoab" name="basket[whitethoab]" type="text" style="width:40px;"/>&nbsp; &nbsp; &nbsp;</td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T15:46:21.540

就像是：

```
<form name="basketSelectionForm" action="processBasket.php" method="POST">
            <div id="tabs-1">
                <table cellpadding="10" cellspacing="10" width="inherit">
                    <tr>
                        <td><img alt="itemNameb" src="images/itemName.jpg" width="70px" height="70px"/></td>
                        <td>Qty. <input value="12" id="itemName" name="basket[chocolate]" type="text" style="width:40px;"/>&nbsp; &nbsp; &nbsp;</td>

                        <td><img alt="itemName" src="images/itemName.jpg" width="70px" height="70px"/></td>
                        <td>Qty. <input value="9" id="itemName" name="basket[onions]" type="text" style="width:40px;"/></td> 
```

...和...

```
<?php

    echo "<h1>The Items Are...</h1><br>";

    foreach ($_POST['basket'] as $name => $value) 
    {
        if($value > 0){
            echo $name . ": " . $value . "<br>";
        }
    }

/* Output:
 chocolate: 12
 onions: 9
*/

?> 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T15:45:13.037

不确定，但我想你想要这个

```
foreach ($itemsBasket as $key => $value) 
{
    if($value > 0){
        echo $key. "<br>\n"
        echo $value . "<br>\n";
    }
} 
```

# ruby-on-rails - 通过先写入redis，再写入磁盘来加速Web服务？

> ID：10144005
> 
> 赞同：3
> 
> 时间：2012-04-13T15:43:26.903
> 
> 标签：ruby-on-rails, ruby, web-services, redis, jruby

我有一个运行多个数据库查询的 Web 服务，大约需要 500 毫秒到 1,000 毫秒（取决于调用时 EC2 决定在给定交界处给我多少 I/O）。用户想要快于 1,000 毫秒的东西，这是可以理解的。我正在考虑做的是获取请求参数，将它们填充到redis队列中而不写入磁盘，然后在执行磁盘写入的异步队列中运行作业。这样的事情在实践中是否正常发生？我疯了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T15:49:10.417

只要您的 Redis 定期保存到磁盘，这应该可以工作。您希望限制可能丢失数据的场景数量。Redis 足够积极的持久性计划应该适用于大多数情况。

尝试立即向用户反馈他们的操作已收到并正在处理中。没有什么比出现可能会提示人们再次尝试上传的轻微延迟更令人困惑的了。

# sql - 如果表中没有相关数据，则从其他表中提取数据

> ID：10144006
> 
> 赞同：1
> 
> 时间：2012-04-13T15:43:28.910
> 
> 标签：sql, tsql

我是 sql 新手

我有一个 [month] 的 table1，[forecasted avg. 温度]作为列。我有另一个带有 [month]、[actual avg. 温度]作为列。现在对于某些日期，表一中没有可用的记录。在这种情况下，如果该表中有可用记录，我想从 table2 中提取记录。

例如，表 1 可能包含 2010 年 4 月至 12 月的记录。表 2 包含 2010 年 1 月至 12 月的记录。我想从表 2 中提取表 1 中缺失的 jan、feb、mar 月份的记录。

任何想法。我们正在使用 sql server 2008

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:46:29.340

```
select [month], [forecasted avg. temperature] as temperature from table1
union
select [month], [actual avg. temperature] as temperature from table2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T15:51:55.580

```
select 
   [month], isnull([forecasted avg. temperature], [actual avg. temperature]) as temperature 
from 
   table2 left outer join table1 on table1.[month] = table2.[month] 
```

更新来自 Dems 的每条评论，我更改了查询。原来的帖子听起来好像 table2 包含所有月份的数据，所以我只是切换了，而不是 FULL JOIN，所以它将从 table2 中提取所有记录，并在 table1 可用时加入，继续使用 ISNULL 作为临时。如果 table2 不包含所有数据，则需要 FULL JOIN。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:51:29.913

一种方法是与外部连接查询的联合

```
Select  [month], [forecasted avg. temperature] from Table1
Union
Select [month], [actual avg. temperature] From Table2
outer join Table1 on Table1.[Month] = Table2.Month
Where Table1.Month is null 
```

在我的脑海中，为了克苏鲁的缘故，给你的表和列合法的名字。

如果您想在输出上使用更友好的名称，请执行以下操作

```
Select ForeCastAvgTemp As [forecasted avg. temperature] From Table1 
```

# php - 检测 URI 是否在字符串中并输出锚点

> ID：10144010
> 
> 赞同：1
> 
> 时间：2012-04-13T15:43:42.273
> 
> 标签：php, security, uri, anchor

我想检测一个 URI 是否位于字符串中，对其进行适当的清理，并使用适当的锚标记输出它。

即，用户输入：

```
Check out our profile on facebook!
https://facebook.com/ourprofile

and our twitter!
twitter.com/#!/ourprofile

and email us!
ourprofile@stack.com 
```

有没有办法确定字符串中存在 URI，清理不安全字符并正确输出安全锚点？

所以输出将是：

```
Check out our profile on facebook!
<a href="https://www.facebook.com/ourprofile">https://www.facebook.com/ourprofile</a>

and our twitter!
<a href="http://www.twitter.com/#!/ourprofile">twitter.com/#!/ourprofile</a>

and email us!
<a href="mailto:ourprofile@stack.com">ourprofile@stack.com</a> 
```

我想到的想法是使用`preg_match`简单`preg_replace`的方法来删除不安全的字符，但这让我失望了，我只是在兜圈子，我真的不知道从哪里开始，因为我几乎可以肯定这样的黑名单方法是不合适的或安全。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:58:15.217

我在experts-exchange.com 上找到了这个。希望能帮助到你：

```
function make_links($text)
{
  return  preg_replace(
     array(
       '/(?(?=<a[^>]*>.+<\/a>)
             (?:<a[^>]*>.+<\/a>)
             |
             ([^="\']?)((?:https?|ftp|bf2|):\/\/[^<> \n\r]+)
         )/iex',
       '/<a([^>]*)target="?[^"\']+"?/i',
       '/<a([^>]+)>/i',
       '/(^|\s)(www.[^<> \n\r]+)/iex',
       '/(([_A-Za-z0-9-]+)(\\.[_A-Za-z0-9-]+)*@([A-Za-z0-9-]+)
       (\\.[A-Za-z0-9-]+)*)/iex'
       ),
     array(
       "stripslashes((strlen('\\2')>0?'\\1<a href=\"\\2\">\\2</a>\\3':'\\0'))",
       '<a\\1',
       '<a\\1 target="_blank">',
       "stripslashes((strlen('\\2')>0?'\\1<a href=\"http://\\2\">\\2</a>\\3':'\\0'))",
       "stripslashes((strlen('\\2')>0?'<a href=\"mailto:\\0\">\\0</a>':'\\0'))"
       ),
       $text
   );
} 
```

# javascript - 使用切换按钮和子 DIV 修复鼠标悬停

> ID：10144015
> 
> 赞同：0
> 
> 时间：2012-04-13T15:43:58.033
> 
> 标签：javascript, jquery, toggle, mouseover

我有一个效果很好的切换脚本，但我正在尝试添加鼠标悬停效果，但我遇到了麻烦。

我有四个标签，其中两个是带有背景颜色的简单 DIV，还有两个带有背景图像的附加按钮。

我为所有标签创建了鼠标悬停效果，但是当我单击按钮时它看起来不正确。单击按钮后，该按钮需要在单击时更改背景位置，并且鼠标悬停在按钮上。

这是我的链接：http: [//jsfiddle.net/eriksnet/9cr4F/1/](http://jsfiddle.net/eriksnet/9cr4F/1/)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:04:58.863

这是因为`#r6:hover .gnM`优先级高于`.button-toogle-on`. CSS 有一个 CSS 层次结构，取决于它的定义位置、是否内联以及您指定的元素数量。[在这里](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)阅读更多。

无论如何，这有效：

```
#r6 #bxGender .button-toggle-on {
    background-position: 0 -120px
} 
```

jsfiddle：http: [//jsfiddle.net/9cr4F/3/](http://jsfiddle.net/9cr4F/3/)

# c# - 我的登录从 VB.NET 到 C# 的转换问题

> ID：10144019
> 
> 赞同：1
> 
> 时间：2012-04-13T15:44:09.410
> 
> 标签：c#

好的，我有一些用于登录的 VB 代码，我希望它现在可以在 C# 中工作。我以为这会很直接，但我错了。行： string connString = ConfigurationManager.ConnectionStrings("MyConnection").ConnectionString; 在 ConnectionStrings 处引发错误，我不知道为什么。同样在 while 语句中，objDR 说它是一个变量，但被用作一种方法。任何帮助都会很棒。以下是整个代码：

```
Using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Configuration;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void  
    btnSubmit_Click(object sender, System.EventArgs e)
    {

        if (((string.IsNullOrEmpty(txtUserName.Text))))
        {
            lblErrorMessage.Text = "Username must be entered.";

            txtUserName.Focus();

            return;

        }

        string connString = ConfigurationManager.ConnectionStrings("MyConnection").ConnectionString;

        System.Data.SqlClient.SqlConnection myConnection = new System.Data.SqlClient.SqlConnection(connString);

        string sql = "Select * From TCustomers";

        System.Data.SqlClient.SqlDataReader objDR = default(System.Data.SqlClient.SqlDataReader);

        System.Data.SqlClient.SqlCommand objCmd = new System.Data.SqlClient.SqlCommand(sql, myConnection);

        myConnection.Open();

        objDR = objCmd.ExecuteReader(System.Data.CommandBehavior.CloseConnection);

        bool blnLogin = false;

        string strPassword = null;

        string strUserName = null;

        strPassword = txtPassword.Text;

        strPassword = strPassword.Trim();

        strUserName = txtUserName.Text;

        strUserName = strUserName.Trim();

        while (objDR.Read())
        {

            if (((objDR("strUserName").ToString().Trim() == strUserName)) & ((objDR("strPassword").ToString().Trim() == strPassword)))
            {

                blnLogin = true;

                Session["CustomerID"] = objDR("intCustomerID");

                Session["UserName"] = objDR("strUserName");

                Session["FirstName"] = objDR("strFirstName");

                Session["LastName"] = objDR("strLastName");

                Session["Email"] = objDR("strEmailAddress");

                Session["UserType"] = objDR("intUserTypeID");

                break; // TODO: might not be correct. Was : Exit While

            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T15:46:37.090

在 VB 中，方法调用或数组访问之间没有语法差异，它们都使用`(argument)`. 然而，在 C# 中，数组使用`[]`. 这不能通过自动/死记硬背正确转换，因为无法区分，因此您必须自己修复它：

```
ConfigurationManager.ConnectionStrings["MyConnection"].ConnectionString;
                                      ^              ^ convert to [] array access 
```

与访问 DataRow 的属性相同：

```
objDR["strUserName"]
     ^             ^ Convert to [] array access 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:48:45.007

我在您的代码中发现的第一个问题如下：

```
objDR("strUserName") 
```

你需要使用

```
objDR["strUserName"] 
```

将所有出现的括号更改为括号

这就解释了“objDR 说它是一个变量但被用作一种方法”的错误。

# c# - 用于提取参数的正则表达式

> ID：10144022
> 
> 赞同：3
> 
> 时间：2012-04-13T15:44:16.503
> 
> 标签：c#, regex

我正在尝试从像字符串这样的函数调用中提取参数，例如：

```
GetStatus("Param1", "Param2", "ParamWith\"Quotations\"") 
```

我对正则表达式没用，但是是否可以通过这种方式匹配这些参数值，包括转义的引号？

即Param1，Param2，ParamWith“报价”

更好的是，有没有办法提取函数名，如果括号和参数存在，只有参数？

如果这有所作为，我正在使用 C#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:54:22.023

您可以在 ( 上拆分和修剪以获取函数名称。

但是，仅因为这个原因，使用 \" 引号获取参数会有点困难：[Can regular expressions are used to match nested patterns?](https://stackoverflow.com/questions/133601/can-regular-expressions-be-used-to-match-nested-patterns)。参见 LB 的解决方案，但正如所说，正则表达式并不是为了处理嵌套而发明的。

您问如果参数周围没有引号，是否可以从字符串中获取函数名称和所有参数。考虑到您可以避免嵌套引号，我会说这更合理。我确信有很多关于如何解析类 Unix 命令的参考资料（即命令 -options 参数“带引号的参数”），但我会使用正则表达式来解决这个问题：

```
Regex reg = new Regex("\".*?\"") 
```

这将为您提供所有带有引号的参数。然后从原始字符串中删除所有匹配项，并在 ',' 上拆分剩余参数。这就是我的想法，但如果你研究它可能会有更简单的方法。

为了扩展我的最后一点，如果你有一个像这样的字符串 "GetStatus(Param1, Param2, ParamsWith\"Quotations\")" 我真的不知道该告诉你什么，特别是如果有 ',' 在 \ “报价单”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:03:32.623

您可以在“（”上执行 String.split 以获取方法名称，然后在“，”上进行拆分以拆分参数

编辑：代替使用正则表达式的更好解决方案，您始终可以自己进行解析。假设一个格式正确的字符串：

1.  通过查找第一次出现的 '(' 从参数列表中拆分名称。
2.  忽略空格，直到到达 '(' 之后的第一个字符
3.  如果你有一个 \" 读取​​参数，直到你找到另一个 \"。\" 没有前面的 \\ 表示参数的结尾。如果第一个非空格不是 \" 则读取直到找到空格（大概取决于哪些参数对您的字符串有效）。这是你的第一个参数。
4.  跳过空格，直到到达 ',' 或 ')'。如果是 ',' 则返回到第 2 步。如果是 ')' 你在参数列表的末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T16:40:56.380

假设你的参数只包含字母、数字和空格

```
string fxn = @"GetStatus(""Param1"", ""Param2"", ""ParamWith\""Quotations\"""")";

var result = Regex.Matches(fxn, @"\""(?<GRP>[\w \\\""]+)\""|(?<GRP>\w+[ ]*)")
    .Cast<Match>()
    .Select(m => m.Groups["GRP"].Value)
    .ToArray(); 
```

# python - 为了获得良好的风格，我应该在 Python 中的方法之前定义内部类，反之亦然？

> ID：10144024
> 
> 赞同：5
> 
> 时间：2012-04-13T15:44:24.490
> 
> 标签：python, coding-style, inner-classes

我阅读了[PEP 8: Style Guide for Python code](http://www.python.org/dev/peps/pep-0008/)，但我找不到任何关于我应该在类中定义内部类或方法的顺序。

例如，我应该做

```
class CustomClass(BaseClass):
    class Meta:
        foo = self.bar

    def foo_bar(self):
        return False

    bar = 1 
```

或者

```
class CustomClass(BaseClass):
    def foo_bar(self):
        return False

    class Meta:
        foo = self.bar

    bar = 1 
```

?

**编辑：**这是一个 Django 源代码。他们实际上定义`fields`, then `inner classes`, then `methods`:

```
class LogEntry(models.Model):
    action_time = models.DateTimeField(_('action time'), auto_now=True)
    user = models.ForeignKey(User)
    content_type = models.ForeignKey(ContentType, blank=True, null=True)
    object_id = models.TextField(_('object id'), blank=True, null=True)
    object_repr = models.CharField(_('object repr'), max_length=200)
    action_flag = models.PositiveSmallIntegerField(_('action flag'))
    change_message = models.TextField(_('change message'), blank=True)

    objects = LogEntryManager()

    class Meta:
        verbose_name = _('log entry')
        verbose_name_plural = _('log entries')
        db_table = 'django_admin_log'
        ordering = ('-action_time',)

    def __repr__(self):
        return smart_unicode(self.action_time)

    def __unicode__(self):
        if self.action_flag == ADDITION:
            return _('Added "%(object)s".') % {'object': self.object_repr}
        elif self.action_flag == CHANGE:
            return _('Changed "%(object)s" - %(changes)s') % {'object': self.object_repr, 'changes': self.change_message}
        elif self.action_flag == DELETION:
            return _('Deleted "%(object)s."') % {'object': self.object_repr}

        return _('LogEntry Object')

    def is_addition(self):
        return self.action_flag == ADDITION

    def is_change(self):
        return self.action_flag == CHANGE

    def is_deletion(self):
        return self.action_flag == DELETION

    def get_edited_object(self):
        "Returns the edited object represented by this log entry"
        return self.content_type.get_object_for_this_type(pk=self.object_id)

    def get_admin_url(self):
        """
        Returns the admin URL to edit the object represented by this log entry.
        This is relative to the Django admin index page.
        """
        if self.content_type and self.object_id:
            return mark_safe(u"%s/%s/%s/" % (self.content_type.app_label, self.content_type.model, quote(self.object_id)))
        return None 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T15:46:03.283

普遍接受的做法是定义字段，然后是内部类，然后是方法。

# objective-c - Interface Builder 中的绑定

> ID：10144030
> 
> 赞同：0
> 
> 时间：2012-04-13T15:44:36.250
> 
> 标签：objective-c, macos, binding

我是stackoverflow的新手，所以请对我温柔。

我目前正在努力开发objective-c和mac os x，目前我正忙于在我正在处理的一个小项目中将几个对象绑定在一起的简单任务：

我有一个对象 AppDelegate，它是从一个 NIB 文件创建的，包含一个 NSMutableArray。我想在另一个派生自 NSOpenGLView 的类（也从 NIB 文件创建）中访问该数组，以迭代存储在其中的对象。

如何在 Interface Builder 中实现这一点？

谢谢你的帮助。

更新：这是我的 AppDelegate 代码的一部分：

。H：

```
@interface AppDelegate : NSObject <NSApplicationDelegate> {

  IBOutlet NSMutableArray *_players;

}

@property (assign) NSMutableArray *_players; 
```

此外，我有一个 MyOpenGLView（实现 NSOpenGLView），我想在其中访问`_players`数组中的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:00:23.937

你`NSOpenGLView`有一个指向你的出口`AppDelegate`吗？如果没有，那么您可以制作一个或使用[此处](https://stackoverflow.com/questions/4363179/cocoa-call-app-delegate-method-from-another-class)的答案。

`[(YourAppDelegate *)[[UIApplication sharedApplication] delegate] uploadFiles:array]`

（这假设`AppDelegate`实际指的*是*应用程序委托。）

关于界面构建器基础知识（包括连接插座）的[Apple 教程。](http://developer.apple.com/library/ios/#documentation/IDEs/Conceptual/xcode_quick_start/020-Tutorial_Designing_a_User_Interface_with_Interface_Builder/interface_builder_tutorial.html#//apple_ref/doc/uid/TP40010575-CH3-SW1)

# javascript - 将 Javascript 方法更改为 Jquery

> ID：10144032
> 
> 赞同：0
> 
> 时间：2012-04-13T15:44:56.827
> 
> 标签：javascript, jquery

所以我有以下 Jquery 调用 Javascript 方法

```
$j("a.Pinterest").attr("href", "javascript:void(addScript());"); 
```

这是 Javascript 方法

```
 function addScript() {
    var e = document.createElement('script');
    e.setAttribute('type', 'text/javascript');
    e.setAttribute('charset', 'UTF-8');
    e.setAttribute('src', 'http://assets.pinterest.com/js/pinmarklet.js?r=' + Math.random() * 99999999);
    return document.body.appendChild(e);
} 
```

我想知道是否有办法在 Jquery 中拥有这一切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:55:13.250

```
$j("a.Pinterest").attr("href", "javascript:void(addScript());"); 
```

请不要这样做。我建议使用点击处理程序。

```
$j("a.Pinterest").click(addScript); 
```

然后在你的`addScript`你可以[`getScript`](http://api.jquery.com/jQuery.getScript/)用来加载脚本。

```
function addScript(e) {
    e.preventDefault();
    $j.getScript('http://assets.pinterest.com/js/pinmarklet.js');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T15:48:21.337

[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

```
$.getScript("http://assets.pinterest.com/js/pinmarklet.js")
    .done(function(script, textStatus) {
     console.log( textStatus );
 }) 
```

编辑：我没有尝试这个，我只是把你的地址扔到了 getScript 演示中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:50:17.297

```
function addScript() {
      return $('<script/>',{
                          'type':'text/javascript',
                          'charset':'UTF-8',
                          'src':'http://assets.pinterest.com/js/pinmarklet.js?r=' + Math.random() * 99999999 
              }).appendTo("body")[0];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T15:51:58.700

您可以使用 $ 选择器在 jQuery 中创建元素。

```
$('<script></script>') 
```

jQuery 也是可链接的，所以你可以这样：

```
$('<script></script>')
    .attr({
        'type' : 'text/javascript',
        'charset', 'UTF-8',
        'src' : 'http://assets.pinterest.com/js/pinmarklet.js?r=' + Math.random() * 99999999)
     })
     .appendTo(whatever) 
```

如果您正在执行条件脚本加载，您可能需要查看[yepnope](http://yepnopejs.com/ "是的")库。

我会质疑为什么您会在单击按钮时将脚本动态添加到页面中。似乎您希望脚本准备好并等待用户单击。如果您担心加载时间，但页面底部的脚本标签会延迟加载。

# c++ - 嵌套类的 typedef

> ID：10144034
> 
> 赞同：-1
> 
> 时间：2012-04-13T15:45:01.563
> 
> 标签：c++, typedef, nested-class

这是在 C++ 中 typedef 内部类的正确方法吗？

```
class Foo
{
public:
    struct A
    {
        typedef bool Type;
    };

    struct B
    {
        typedef int Type;
    };

    typedef struct Foo::nested;
}; 
```

该代码在 Visual Studio 2008 下编译，但我不确定它是否确实是嵌套类的 typedef，或者标准是否允许。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T15:49:00.477

不知道你在追求什么。如果您想 typedef 现有的嵌套结构之一，请尝试：

```
typedef struct Foo::A nested; 
```

在这种情况下，您很可能希望将 typedef 放在`Foo`结构之外——您已经可以`A`从内部访问。

如果你想在内部`Foo`为另一个结构的嵌套类型创建一个 typedef，你可以这样做：

```
typedef struct Bar::nested myNested; 
```

然后，您也可以从外部将其称为 Foo::myNested，只要您将 typedef 声明为 public。

# html - 当用户实际选择输入框时，如何设置输入密码的类型？

> ID：10144037
> 
> 赞同：0
> 
> 时间：2012-04-13T15:45:15.313
> 
> 标签：html, forms, passwords

这是我已经拥有的代码。当该框处于非活动状态时，它会显示文本“密码”。我想选择框时，它会删除“密码”文本，并将用户输入输入的点作为密码字段。

```
<div class="custom"><input type="text" class="custom" size="12" value="Password" onfocus="if(this.value == 'Password') { this.value = ''; }" onblur="if(this.value == '') { this.value = 'Password'; }"/></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:49:22.387

您可以通过 JS 更改类型，就像更改值一样：

```
<input type="text" class="custom" size="12" value="Password" onfocus="if(this.value == 'Password') { this.type = 'password'; this.value = ''; }" onblur="if(this.value == '') { this.type = 'text'; this.value = 'Password'; }"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:48:59.340

如果我理解正确，您只是在寻找：

```
this.type = 'password' 
```

反过来：

```
this.type = 'text' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:54:24.470

您应该首先将输入的类型设置为“密码”。如果要在值中显示字段的标签，我建议使用[JQuery watermark](http://code.google.com/p/jquery-watermark/)。它有效地完成了我认为您试图编码的事情，但永远不会提交“密码”一词作为表单字段的值。

# javascript - 在javascript中，是否可以在函数名中添加字符串？

> ID：10144050
> 
> 赞同：0
> 
> 时间：2012-04-13T15:45:48.777
> 
> 标签：javascript, function

我只是想问一下是否可以接受一个字符串，它总是不变的，并在其中添加一个函数的名称。一个例子：

```
function modifyFunctionName(theFunc)
{
    var newFunc = "link" +theFunc;
    return newFunc;
}
//Somewhere in the HTML:
<input type='submit' value='button' onclick='modifyFunctionName(CheckLogin())'/> 
```

所以`modifyFunctionName`将返回`linkCheckLogin()`。

编辑：对不起伙计们，实际上我真正想做的是：[https ://gist.github.com/2371187](https://gist.github.com/2371187)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:59:14.557

它在技术上是可能的，但你必须使用`eval`，这不是一个好主意。您可以做的是创建一个对象并仅存储对函数的引用，它的工作方式大致相同。

```
var obj={};

function addFunction(name,func){
  obj[name]=func;
}

function changeName(oName,nName){
  obj[nName]=obj[oName];
  delete obj[oName];
}

addFunction('test',function(){return 'hi'});
obj.test();//returns 'hi'
changeName('test','greet');
obj.greet();//returns 'hi' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:53:28.827

```
<script>

    function one() {
        alert("one");
    }

    eval("function two() { one();}");
    two();

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:53:29.853

基于这个问题：你打算做什么不是很清楚，无论如何，你可以评估任何附加到范围的东西：

```
myFunction(aString){
// window is the scope , the context.
window[aString] = myFunction ;
} 
```

问题是你为什么要这样做？

# jquery - Jquery从列表值中按类计算div元素

> ID：10144054
> 
> 赞同：1
> 
> 时间：2012-04-13T15:45:54.893
> 
> 标签：jquery, class, count, elements

您好，我想用列表项的值计算所有可见的 div 元素。
女巫被隐藏的项目计数为 0
如果我手动计数（逐项）它可以工作，这里是我的示例：

```
 var counter = $(".green").length-$(".green.hidden").length; 
```

这是我的页面我想如何使用它：

```
<html>
<head>
<script type="text/javascript" src="/jquery/jquery-1.7.1.min.js">
</script>
<style>
  a {text-decoration: none; }
  div { border:1px solid grey; width:200px; height: 10px; margin:3px; }
  .black { background-color:black; }
  .blue { background-color:blue; }
  .green { background-color:green; }
  .hidden { visibility:hidden; }
</style>
</head>
<body>
<ul id="list1"> 
  <li><a href="" value="">all<span></span></a></li>
  <li><a href="" value=".black">black<span></span></a></li>
  <li><a href="" value=".blue">blue<span></span></a></li>
  <li><a href="" value=".green">green<span></span></a></li>
</ul>
<div class="element black"></div>
<div class="element green hidden"></div>
<div class="element blue"></div>
<div class="element green "></div>
<script>
$(function(){
 var totalcount = 0;
 var counter = 0;
$("li a").each(function(){
 var counter = $(this).attr("value").length;
 var totalcount = totalcount+counter;

   $(this).find("span").html(" (" + counter + ") ");
});
   $("span", 'a[value|=""]').html(" (" + totalcount + ")");
});
</script>
</body>
</html> 
```

列表必须如下所示：
全部 (3)
黑色 (1)
蓝色 (1)
绿色 (1)

谢谢转发

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T15:52:12.207

`<a>`元素没有属性值，要计算具有可见类的元素，请执行以下操作：

```
var all = $('.element').filter(":visible").length,
    green = $('.green:visible').length,

....etc 
```

请注意，只是“可见性：隐藏”的元素被认为是可见的，这不适用于此类元素。

这是我的做法：

HTML：

```
<ul id="list1"> 
  <li><a href="#" data-color="all">all<span></span></a></li>
  <li><a href="#" data-color="black">black<span></span></a></li>
  <li><a href="#" data-color="blue">blue<span></span></a></li>
  <li><a href="#" data-color="green">green<span></span></a></li>
</ul>
<div class="element black"></div>
<div class="element green hidden"></div>
<div class="element blue"></div>
<div class="element green "></div> 
```

jQuery：

```
$(function(){
    $.each($('li a'), function(index, item) {
        if ($(item).data('color')=='all') {
            $('span', item).text(' ('+$('.element:visible').length+')');
        }else{
            $('span', item).text(' ('+$('.'+$(item).data('color')+':visible').length+')');
        }
    });
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/aTcR5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:52:38.227

不完全确定您要做什么，但是对于第一个示例，您可以做

```
var counter = $('div.element').not('.hidden').length 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T15:52:50.893

你的 JavaScript 离你不远了。

```
var counter = $($(this).attr("value")).length; 
```

您目前拥有的是您检索到的属性值的长度（希望这是有道理的！），但是您需要做的是然后使用 jQuery 获取该类的所有元素并查看有多少。

这是关于[jsfiddle](http://jsfiddle.net/Fu8Ye/3/)的示例。我实际上认为您的总数计算错误，它不应该添加计数器值，因为您最终会得到 4，您想要做的更像是：

```
var totalcount = $('.element').length; 
```

这可以在每个循环之外完成。

# mvc-mini-profiler - 由于客户端计时，SqlServerStorage.LoadInBatch() 函数中的 MiniProfiler NullReferenceException

> ID：10144061
> 
> 赞同：5
> 
> 时间：2012-04-13T15:46:29.260
> 
> 标签：mvc-mini-profiler

当我单击个人资料的共享链接时，出现以下异常。我正在使用来自 NuGet 的最新版本 2.0.1。

## 例外：

```
System.NullReferenceException: Object reference not set to an instance of an object.
   at StackExchange.Profiling.Storage.SqlServerStorage.LoadInBatch(DbConnection conn, Object idParameter) in C:\Users\sam\Desktop\MiniProfiler\StackExchange.Profiling\Storage\SqlServerStorage.cs:line 348    
   at StackExchange.Profiling.Storage.SqlServerStorage.Load(Guid id) in C:\Users\sam\Desktop\MiniProfiler\StackExchange.Profiling\Storage\SqlServerStorage.cs:line 297 
   at StackExchange.Profiling.UI.MiniProfilerHandler.Results(HttpContext context) in C:\Users\sam\Desktop\MiniProfiler\StackExchange.Profiling\UI\MiniProfilerHandler.cs:line 314 
   at StackExchange.Profiling.UI.MiniProfilerHandler.ProcessRequest(HttpContext context) in C:\Users\sam\Desktop\MiniProfiler\StackExchange.Profiling\UI\MiniProfilerHandler.cs:line 188 
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() 
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

## 编码：

[我在这里](https://github.com/SamSaffron/MiniProfiler/blob/master/StackExchange.Profiling/Storage/SqlServerStorage.cs#L348)的代码中找到了我认为是空引用的来源：

```
ClientTimings clientTimings = null;
if (clientTimingList.Count > 0)
{
    clientTimings.Timings = clientTimingList;
} 
```

我是否遗漏了什么，或者当 中有条目时总是会抛出异常`clientTimingList`？

## 解决方法：

*   我想也许如果我禁用批处理，我不会运行 LoadInBatch 函数，但 LoadIndividually 有同样的问题。

*   我寻找一种禁用客户端计时的方法，但找不到它的设置。

*   也许我可以在数据库中设置一个触发器来删除行，但这似乎有点极端。

如果我有时间，我会获取代码并提交拉取请求。我想首先确保我没有遗漏任何明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:21:27.633

看起来这是一个错误。我在 github 上添加了一张票和一个修复它的请求请求：[https ://github.com/SamSaffron/MiniProfiler/pull/40](https://github.com/SamSaffron/MiniProfiler/pull/40)

新代码如下所示：

```
if (clientTimingList.Count > 0)
{
    clientTimings = new ClientTimings();
    clientTimings.Timings = clientTimingList;
} 
```

# instruments - 代码完成在 Instruments UIAutomation 脚本编辑器中不起作用

> ID：10144064
> 
> 赞同：2
> 
> 时间：2012-04-13T15:46:32.427
> 
> 标签：instruments, code-completion, ios-ui-automation

在苹果文档中只有一个地方有一个声明，即 4.2 中的仪器支持 UIAutomation 脚本编辑器中的代码完成。但这对我不起作用。我能做些什么让它发挥作用吗？

# java - 如何在 Java 中格式化时间间隔？

> ID：10144072
> 
> 赞同：3
> 
> 时间：2012-04-13T15:47:01.467
> 
> 标签：java, format, intervals

我创建了 J2SE 应用程序，该应用程序需要以毫秒为单位将两次格式化为一个字符串，该字符串表示这两次之间的间隔。

`long time1 = 1334331041677L; //Fri Apr 13 17:30:41 CEST 2012
long time2 = time1+1000*60*2; //Fri Apr 13 17:32:41 CEST 2012`

我想得到类似“00:02:00”的东西。这很简单，但我需要格式化从几秒到几年的间隔 - 所以库应该处理它。理想情况下，如果这个库可以根据国家的习惯（如果有的话）格式化间隔。

我已经搜索了问题和答案，我的解决方案可能是来自 Apache Commons 的 Jodatime 或 Lang 库。您能给我一些建议吗？这些库中的哪个库可以更好地解决我的要求？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:44:12.983

您可以将标准 Java`Calendar`用于最多一天（24 小时）的时间间隔。不可能在更长的时间内（几天，几年）使用这个技巧，但是......

```
long start = System.currentTimeMillis();
/*
 * perform the measured activity here,
 * let's say it will take 2 minutes 5 seconds => 125 seconds => 125000ms
 */
Thread.sleep(125 * 1000);
long stop = System.currentTimeMillis();
Calendar c = Calendar.getInstance();
c.set(Calendar.HOUR_OF_DAY, 0);
c.set(Calendar.MINUTE, 0);
c.set(Calendar.SECOND, 0);
c.set(Calendar.MILLISECOND, 0);
c.setTimeInMillis(c.getTimeInMillis() + (stop - start));
DateFormat df = new SimpleDateFormat("HH:mm:ss.SSS");
System.out.println(df.format(c.getTime())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T15:50:12.910

[`PeriodFormat`](http://joda-time.sourceforge.net/api-release/org/joda/time/format/PeriodFormat.html)in [Joda Time](http://joda-time.sf.net)*可能*是您想要的 - 但您需要*非常*仔细地考虑如何格式化超过一天的值。请记住，月份和年份的长度是可变的——如果你很高兴拥有最大的单位作为一天，那可能会让事情变得简单。

您还应该注意 a `Period`（可以包括“月”之类的内容）和 a之间的 Joda Time 差异，a`Duration`是固定的毫秒数。两者之间的规范化恰好涉及上述问题:)基本上，您应该弄清楚您是否对两个*瞬间*之间经过的时间差异感兴趣，或者两个本地日期/时间之间的“日历”时间差异感兴趣价值观。例如，在特定时区的特定日期的午夜和凌晨 2 点之间可能是 1 小时、2 小时或 3 小时的经过时间......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:54:38.120

如果我理解正确，以下（使用 Joda Time）应该会有所帮助

```
import org.joda.time.DateTime;
import org.joda.time.Period;

private String formatDuration(DateTime dt1, DateTime dt2) {
  Period period = new Period(dt1, dt2);
  String str = String.format("%s:%02d:%02d:%02d:%02d:%02d", 
    period.getYears(), period.getMonths(), period.getDays(), 
    period.getHours(), period.getMinutes(), period.getSeconds());
    // Ignoring milliseconds

  String[] tokens = str.split(":");
  boolean currNonZero = false, flag = false, isFirst = true;
  int ctr = 0, pos = 0;
  StringBuilder sb = new StringBuilder();
  for (String token : tokens) {
    pos++;
    int val = Integer.parseInt(token);
    currNonZero = (val > 0);
    if ((ctr < 3 && (flag || currNonZero)) || (ctr == 0 && pos > 3)) {
      if (isFirst) { isFirst = false; }
      else { sb.append(":"); }
      sb.append(token);
      flag = (++ctr < 3);
    }
  }

  return sb.toString();  
} 
```

几个测试，

```
DateTime dt1 = new DateTime(2012, 1, 1, 8, 3, 5, 0);
DateTime dt2 = new DateTime(2012, 1, 2, 9, 5, 6, 0);
DateTime dt3 = new DateTime(2012, 2, 3, 11, 3, 5, 0);
DateTime dt4 = new DateTime(2012, 2, 3, 11, 3, 10, 0);
DateTime dt5 = new DateTime(2012, 2, 3, 11, 3, 10, 5); //5 millis away from dt4

formatDuration(dt1, dt2); // Returns "01:01:01"
formatDuration(dt1, dt3); // Returns "01:02:03"
formatDuration(dt3, dt4); // Returns "00:00:05"
formatDuration(dt4, dt5); // Returns "00:00:00" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-20T18:37:50.493

详细解答：[https ://stackoverflow.com/a/39600534/5330578](https://stackoverflow.com/a/39600534/5330578)

经过时间少于 24 小时的简单格式化。超过 24 小时，代码将仅显示第二天内的小时数，并且不会将经过的日期添加到小时数中。

```
public static String formatElapsedTime(long milliseconds) {

    SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss.SSS");
    sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

    return sdf.format(milliseconds);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-12T11:55:51.490

根据[这个答案](https://stackoverflow.com/a/21701635/1893325)，这是格式化经过时间的最有效方法：

```
public static String combinationFormatter(final long millis) {
    long seconds = TimeUnit.MILLISECONDS.toSeconds(millis)
            - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis));
    long minutes = TimeUnit.MILLISECONDS.toMinutes(millis)
            - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millis));
    long hours = TimeUnit.MILLISECONDS.toHours(millis);

    StringBuilder b = new StringBuilder();
    b.append(hours == 0 ? "00" : hours < 10 ? String.valueOf("0" + hours) : 
    String.valueOf(hours));
    b.append(":");
    b.append(minutes == 0 ? "00" : minutes < 10 ? String.valueOf("0" + minutes) : 
    String.valueOf(minutes));
        b.append(":");
    b.append(seconds == 0 ? "00" : seconds < 10 ? String.valueOf("0" + seconds) : 
    String.valueOf(seconds));
    return b.toString(); 
 } 
```

# java - 内置库以对 100GB 文件执行有效搜索

> ID：10144074
> 
> 赞同：0
> 
> 时间：2012-04-13T15:47:12.150
> 
> 标签：java, jakarta-ee

Java中是否有任何内置库用于在java中搜索大约100GB的大文件中的字符串。我目前正在使用二进制搜索，但效率不高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:02:29.410

如果您不想使用为搜索而构建的工具，则将数据存储在 DB 中并使用 sql。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:29:03.210

据我所知，Java 不包含任何文件搜索引擎，无论是否有索引。这也有一个很好的理由：搜索引擎实现本质上与*输入数据集*和*搜索模式格式*相关。两者的微小变化都可能导致搜索引擎发生巨大变化。

为了让我们能够提供更具体的答案，您需要：

*   *准确*描述数据集：文件的数量、路径结构和平均大小，每个条目的格式和每个包含的标记的格式。

*   *准确*描述您的搜索模式：那些是固定的字符串、glob 模式还是正则表达式？您希望模式匹配整行还是每行中的特定标记？

*   *准确*描述您想要的搜索结果：您想要完全匹配还是近似匹配？您想在文件中获得一个位置，还是提取特定的标记？

*   *准确*描述您的要求：您是否能够预先建立索引？数据集是否预计会实时修改？

*   解释*为什么*不能使用专为此类工作设计的第三方库，例如 Lucene。

*   解释*为什么*您当前的二分搜索（其复杂性应为`O(logn)`）不够有效。唯一*可能*更快、具有恒定复杂性的方法是使用哈希表。

最好用更广泛的术语描述您的问题。例如，人们可能会从您的样本数据集中假设您拥有的是一组单词和相关的偏移量或文档标识符列表。在这样的集合中进行搜索的一种简单方法是将单词/文件位置索引存储在哈希表中，以便能够在恒定时间内访问每个关联列表。

# java - 从 Arraylist (java) 中拆分字符串

> ID：10144076
> 
> 赞同：1
> 
> 时间：2012-04-13T15:47:20.100
> 
> 标签：java, arraylist, split, arrays

固定的！谢谢大家！

好的，所以我不确定为什么这会给我一个 ArrayIndexOutOfBoundsException ..

al 是一个数组列表，包含以下值：

```
2,6,m
1,7,w   
5,3,c   
0,4,w
1,6,w
2,3,w
1,5,w 
```

这是我试图获取每个数组列表索引的地方，将其拆分为：行、列、字母。就是说 temp[2] 越界了。为什么？我的意思是拆分方法应该包含 3 个部分，0,1 和 2。那么为什么 2 适合我。我进行了一些测试，它还为 temp[0] 和 temp[1] 调用提供了出界。

```
 for (int i = 0; i < al.size(); i++) {
        String[] temp = al.get(i).toString().split(",");
        System.out.println(temp.length);
        System.out.println(temp[1]);
        if (temp[2].equals("m")) {
            boardTiles[Integer.parseInt(temp[0])][Integer.parseInt(temp[1])].setIcon(mousetile);
            boardTiles[Integer.parseInt(temp[0])][Integer.parseInt(temp[1])].putClientProperty("mouse", true);
        }
        if (temp[2].equals("c")) {
            boardTiles[Integer.parseInt(temp[0])][Integer.parseInt(temp[1])].setIcon(cheesetile);
            boardTiles[Integer.parseInt(temp[0])][Integer.parseInt(temp[1])].putClientProperty("cheese", true);
        }
        if (temp[2].equals("w")) {
            boardTiles[Integer.parseInt(temp[0])][Integer.parseInt(temp[1])].setIcon(metalwall);
            boardTiles[Integer.parseInt(temp[0])][Integer.parseInt(temp[1])].putClientProperty("wall", true);
        }
    } 
```

我是在使用带有 split 方法的 String[] 错误还是什么？谢谢，-奥斯汀

编辑：

我刚刚在arraylist上运行了一个for循环，所有的值都在那里。

boardTiles[x][x] 是一个二维 JButton 数组。

索引发生异常：1。

.length 也显示为 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:52:41.537

`boardTiles`可能没有输入数组中定义的某些值的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:02:51.687

打印 al.get(i) 并仔细检查它确实是一个逗号分隔的值字符串。

# javascript - box2d 力（应用脉冲和应用力）

> ID：10144081
> 
> 赞同：3
> 
> 时间：2012-04-13T15:47:36.657
> 
> 标签：javascript, box2d, physics

尽管在 box2d 前花了几个小时，我仍然不明白 applyforce 和 applyimpulse 是如何工作的。我尝试使用一些视觉效果来更好地理解正在发生的事情（通过在身体位置和应用点之间划线），但我尝试的越多，它就越没有意义。

我想使用 applyimpulse 让我的 box2d 身体朝应用点的方向跳跃（在此尝试中为鼠标坐标）。它除了所需的点之外的任何地方......

到目前为止，这是我的一些尝试：

```
b.ApplyImpulse(
new b2Vec2(g.mouseX/SCALE,g.mouseY/SCALE),
new b2Vec2(b.GetPosition().x,b.GetPosition().y)); 
```

和相反的

```
b.ApplyImpulse(
new b2Vec2(b.GetPosition().x,b.GetPosition().y),
new b2Vec2(g.mouseX/SCALE,g.mouseY/SCALE)); 
```

两者都会产生我完全不理解的不可预测的结果。

请有人像我 5 岁一样向我解释 ApplyImpulse 吗？如何确定冲动的强度？和方向？似乎没有人在互联网上解释这一点。

请原谅我可怜的物理背景，我尝试了许多不同的方法，这个问题几乎让我在使用 Box2d 的任何时候都陷入困境。

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:57:43.767

我认为问题可能是画布的位置，用删除替换你的鼠标坐标，`canvas.left`它可以工作

# php - PHP 文件上传 - 无法上传/调试

> ID：10144083
> 
> 赞同：0
> 
> 时间：2012-04-13T15:47:43.600
> 
> 标签：php, windows, file-upload, iis-express

我正在尝试上传文件，但我不工作：

有用信息：运行 IIS Express（使用 PHP 5.3）- Windows 7 Professional 32 位

代码：

> move_uploaded_file($_FILES["imagem"]["name"], "/images/" . $_FILES["imagem"]["name"]) or die ("Error:".print_r($_FILES));

**它打印：** Array ( [imagem] => Array ( [name] => Chrysanthemum.jpg [type] => image/jpeg [tmp_name] => C:\Windows\Temp\php3D85.tmp [error] => 0 [大小] => 879394 ) )

我确定路径是正确的，我也做了 chmod() 来设置权限，但仍然没有上传。
有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T15:58:13.853

您的目标路径应该以图像目录的正确路径开始（`dirname(__FILE__)`可以提供帮助）。就目前而言，`"/images/" . $_FILES["imagem"]["name"]`意味着它将尝试写入可能不存在`C:/images/`的（假设脚本在驱动器中）。`C:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:02:24.403

由于它位于数组内部，因此您需要在 foreach 循环内执行移动上传文件功能。

```
foreach($_FILES['imagem'] as $f){
move_uploaded_file($f['tmp_name'], "/images/" . $f["name"]);
} 
```

您可能想尝试使用我的课程： [http ://code.google.com/p/daves-upload-class/source/browse/upload_class.php](http://code.google.com/p/daves-upload-class/source/browse/upload_class.php)

# javascript - 如何根据 Django 下拉菜单中的选择显示和隐藏表单字段

> ID：10144085
> 
> 赞同：4
> 
> 时间：2012-04-13T15:47:49.103
> 
> 标签：javascript, django, google-app-engine

我有一个关于如何根据 Django 中对其父字段的选择有条件地隐藏或显示字段的问题。

**更新：我可以通过在 JavaScript 中定义一个函数来实现这个特性，这个函数已经用一些简单的 HTML 代码进行了测试。但是，由于我的输入表是由 Django 创建的，谁能告诉我如何在 Django 'onchange' 中调用这个函数？**

最后更新：我认为使用 jQuery 更容易做到这一点。 [jQuery：有条件地显示基于下拉框选择的元素](https://stackoverflow.com/questions/10200498/jquery-conditional-show-an-element-based-on-drop-down-box-selection)

Javascript： 说明： 1\. 在进行任何选择之前，只能看到一个下拉菜单“应用方法” 2\. 如果从父框中选择“Aerial Spray”，则会出现一个新的下拉菜单“Aerial Size Dist” 3 . 如果从父框中选择“Ground Spray”，则需要输入另一个下拉列表“Ground spray type”

```
<script type="text/javascript">
function display(obj,id1,id2) {
txt = obj.options[obj.selectedIndex].value;
document.getElementById(id1).style.display = 'none';
document.getElementById(id2).style.display = 'none';

if ( txt.match(id1) ) {document.getElementById(id1).style.display = 'block';}
if ( txt.match(id2) ) {document.getElementById(id2).style.display = 'block';}
</script>

<table>
<tbody align="center">
<tr><th>Application method:</th>
<td><select onchange="display(this,'A','B')" name="method" id="id_method">
<option value="">Pick a method</option>
<option value="A">Aerial Spray</option>
<option value="B">Ground Spray</option>
</select></td></tr></tbody>

<tbody id="A" align="center" style="display: none;">
<tr><th><label for="id_aerial_size_dist">Aerial Size Dist:</label></th><td><select select name="aerial_size_dist" id="id_aerial_size_dist">
<option value="" selected="selected">Pick first</option>
<option value="A1">Very Fine to Fine</option>
<option value="A2">Fine to Medium (EFED Default)</option>
</select></td></tr>
</tr>
</tbody>

<tbody id="B" align="center" style="display: none;">
<tr><th><label for="id_spray_type">Ground spray type:</label></th><td><select name="spray_type" id="id_spray_type">
<option value="B1" selected="selected">Low Boom Ground Sprayer (20 Inches or Less)</option>
<option value="B2">High Boom Ground Sprayer (20 to 50 Inches: EFED Default)</option>
</select></td></tr></tbody></table> 
```

**Django 代码，现在不起作用。它需要有关所有已定义功能“显示”的帮助。**

**更新，添加 mark_safe 后，代码有效。**

```
class GENEECInp(forms.Form):
    application_method = forms.ChoiceField(required=True, choices=applicationmethod_CHOICES, initial='Aerial Spray',
                                           widget=forms.Select(attrs={'onchange':mark_safe("display(this,'A','B','C','D');")}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T15:52:33.640

您将需要一些自定义 javascript 来隐藏或取消隐藏相应的字段。你在这个小部件中有任何 javascript 吗？

# .net - 更新 SQL Server 中已有的 .NET 程序集

> ID：10144090
> 
> 赞同：0
> 
> 时间：2012-04-13T15:48:03.573
> 
> 标签：.net, sql-server-2005, assemblies

在 SQL Server 2005 中创建 .NET 程序集之后，当 MS 发布 .NET 服务包/错误修复程序然后通过通常的 Microsoft 更新安装时，我需要做些什么吗？SQL 程序集是指向原始 .NET .dll 的链接，还是 SQL Server 有自己的私有副本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:18:40.460

> 在 SQL Server 2005 中创建 .NET 程序集之后，当 MS 发布 .NET 服务包/错误修复程序然后通过通常的 Microsoft 更新安装时，我需要做些什么吗？

这取决于。SQL Server CLR 集成不支持每个 .NET 程序集，请参阅[SQL Server CLR 托管环境中未经测试的 .NET Framework 程序集的支持策略](http://support.microsoft.com/default.aspx?scid=kb;EN-US;922672)。如果您将自己限制为受支持的程序集（如下），那么您无需执行任何操作。

*   Microsoft.VisualBasic.dll
*   mscorlib.dll
*   系统数据.dll
*   系统.dll
*   System.Xml.dll
*   Microsoft.VisualC.dll
*   CustomMarshalers.dll
*   System.Security.dll
*   System.Web.Services.dll
*   System.Data.SqlXml.dll
*   System.Transactions.dll
*   System.Data.OracleClient.dll
*   System.Configuration.dll

但是，如果您引用未经测试的程序集，您可能会收到错误，因为

> 当 CLR 加载程序集时，CLR 会验证同一个程序集是否在 GAC 中。如果相同的程序集在 GAC 中，CLR 会验证这些程序集的模块版本 ID (MVID) 是否匹配。如果这些程序集的 MVID 不匹配，您会收到“症状”部分提到的错误消息。
> 
> 重新编译程序集时，程序集的 MVID 会更改。因此，如果您更新 .NET Framework，则 .NET Framework 程序集具有不同的 MVID，因为这些程序集被重新编译。此外，如果您更新自己的程序集，则会重新编译该程序集。因此，程序集也有不同的 MVID。
> 
> 执行 CLR 例程或在 SQL Server 2005[中使用程序集时出现错误消息：“主机存储中的程序集与 GAC 中的程序集具有不同的签名。（来自 HRESULT 的异常：0x80131050）”http://support.microsoft.com/ KB/949080](http://support.microsoft.com/kb/949080)

如果您确实遇到这种情况，您需要做的就是使用 ALTER ASSEMBLY 语句重新指向新程序集

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:49:33.707

> 当 MS 发布 .NET 服务包/错误修复，然后通过通常的 Microsoft 更新安装时，我需要做些什么吗？

不会。修复通常应用于运行时本身，因此您不需要重新构建程序集或任何东西。

> SQL 程序集是指向原始 .NET .dll 的链接，还是 SQL Server 有自己的私有副本？

SQL Server 会为自己保留副本，您可以在`sys.assembly_files`视图中看到这些副本。

# java - Android Sqlite 和外键失败

> ID：10144096
> 
> 赞同：1
> 
> 时间：2012-04-13T15:48:29.117
> 
> 标签：java, android, sqlite

我正在测试 Android 中的外键，但有一些我不明白的问题：

创建表（使用硬编码值）

```
db.execSQL("CREATE TABLE IF NOT EXISTS table_A ( " +
            "_id long primary key , value1 long  );");
db.execSQL("CREATE TABLE IF NOT EXISTS table_B ( " +
            "_id long primary key , value1fk long  , value2 long,"+
            "FOREIGN KEY (value1fk) REFERENCES table_A (value1) ON DELETE CASCADE);"); 
```

然后我执行：

```
 ContentValues values = new ContentValues();
    values.put("_id", 1);
    values.put("value1", 200);
    long result = mDb.insert("table_A", null, values);
    Log.e("","done (" + result + ")");

    values = new ContentValues();
    values.put("_id", 1);
    values.put("value1fk", 200);
    values.put("value2", 10);
    result= mDb.insert("table_B", null, values);
    Log.e("","done (" + result + ")"); 
```

输出是

```
done(1)
done(-1) 
```

给第二个插入**外键不匹配**

```
E/SQLiteDatabase(25476): Error inserting _id=1 value1fk=200 value2=10
E/SQLiteDatabase(25476): android.database.sqlite.SQLiteException: foreign key mismatch: , while compiling: INSERT INTO table_B(_id,value1fk,value2) VALUES (?,?,?) 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T16:09:13.080

根据关于外键 [http://www.sqlite.org/foreignkeys.html](http://www.sqlite.org/foreignkeys.html)的 sqlite 文档， 您需要：

*   使用主键作为你的外键

    FOREIGN KEY (value1fk) REFERENCES table_A (_id)

*   使用唯一列作为外键

    CREATE TABLE IF NOT EXISTS table_A (_id long primary key , value1 long UNIQUE);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T15:57:27.473

中的`value_1`字段`table_A`不是主键。难道不应该

```
FOREIGN KEY (value1fk) REFERENCES table_A (_id)... 
```

反而？

# javascript - 当前创建谷歌地图自定义信息窗口的方式

> ID：10144097
> 
> 赞同：2
> 
> 时间：2012-04-13T15:48:32.270
> 
> 标签：javascript, jquery, google-maps

这里有一篇关于这个主题的两年前的帖子：[在谷歌地图中创建自定义信息窗口](https://stackoverflow.com/questions/2579777/creating-custom-info-windows-in-google-maps)。

我想知道两年后这是否仍然是最好的解决方案，或者还有其他可能更简单的方法来创建自定义信息 windows。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:55:08.053

我还没有尝试过两年前的 InfoBox，但[我见过的 V3 的最佳自定义解决方案也称为 InfoBox](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/)。它有很多选项，所以它并不比旧的 InfoBox 简单。这对于休闲使用来说可能很烦人，但在您需要特定外观时却很强大。

[这是我使用 InfoBox 编写的页面](https://files.nyu.edu/hc742/public/googlemaps/mylatlng.html)，您可以通过单击标记 LatLngs。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:04:24.870

您基本上想要以下内容：

```
var map = new google.maps.Map(document.getElementById("map_canvas"), {});
var infoWin = google.maps.InfoWindow({ content: 'Window Content' });

infoWin.open(map); 
```

有关详细信息，请参阅以下内容：

[https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)

# php - PHP：如何从数据库返回本地时间

> ID：10144100
> 
> 赞同：1
> 
> 时间：2012-04-13T15:48:40.493
> 
> 标签：php, date, time, timezone

我将日期以 DATETIME 类型存储在我的数据库中，如下所示： Ymd H:i:s

我想要实现的是在用户本地时间从数据库中返回日期。例如，如果用户在法国，我将返回他的时区。是否可以在不存储用户时区的情况下实现这一目标？或者如果有其他可能，并且需要更改数据库中的存储格式，那么我可以这样做。但是，我试图在不存储用户时区的情况下实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:50:48.597

将时间以 UTC 格式存储在数据库中，然后在您的应用程序中进行时区本地化。不过，您需要知道用户的时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T15:52:03.613

好吧，我能想到的唯一方法是在不询问用户他们的时区的情况下这样做：

```
<p>The time is: <span id="time" data="<?php echo strtotime($time_from_db); ?>"></span></p>
<script type="text/javascript">
    (function () {
        var t = document.getElementById('time'), d = new Date();
        d.setTime(t.getAttribute("data"));
        t.innerHTML = d;
    })();
</script> 
```

这会将日期时间作为时间戳传递，然后 JS 将区域设置（包括时区）应用到该时间戳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T15:52:17.300

如果您将日期存储在 GMT 中，那么您可以在他们的时区将它们呈现给用户。

编辑：

```
 date_default_timezone_set('UTC');
 $today = getdate();
 print_r($today); 
```

检查这个：[php 将日期时间转换为 UTC](https://stackoverflow.com/questions/2095703/php-convert-datetime-to-utc) 和这个：[将 UTC 日期转换为 PHP 中的本地时间](https://stackoverflow.com/questions/3792066/convert-utc-dates-to-local-time-in-php) ，这个：[http ://www.php.net/manual/en/function.gmdate.php](http://www.php.net/manual/en/function.gmdate.php)

# opencv - 当 useProvidedKeypoints = true 时，cvExtractSURF 不起作用

> ID：10144106
> 
> 赞同：1
> 
> 时间：2012-04-13T15:49:00.960
> 
> 标签：opencv

所以，我试图提取一些 SURF 关键点，但我想强加这些关键点！因此，我将最后一个参数设置为“true”，即“useProvidedKeypoints”。

另外，当我创建我的关键点时，我使用了默认构造函数（所以那里有一些默认值）。我只改变点“pt”和我设置为 3 的八度。

我正在使用带有 SURF 的 C++ 接口。但我知道问题出在 cvExtractSURF，因为我复制了我的那部分代码来帮助我调试。

当我调用该函数时，最后一个参数设置为 true，我得到了这个错误：

```
OpenCV Error: Bad argument (Unknown array type) in cvarrToMat, file /home/widgg/opencv/trunk/modules/core/src/matrix.cpp, line 651
terminate called after throwing an instance of 'cv::Exception'
  what():  /home/widgg/opencv/trunk/modules/core/src/matrix.cpp:651: error: (-5) Unknown array type in function cvarrToMat 
```

我真的不知道我做错了什么！

编辑：

这是一些代码。首先我是如何创建关键点的（我留下了一些信息，比如 layer_id 的东西，但你明白了主要思想）：

```
for (json_pt_info_vector::iterator b_beg = beg->points.begin(); b_beg != b_end; ++b_beg)
{
  int layer_id = b_beg->layer_id;
  json_point_info_coord &jpic = b_beg->coord;

  jpic.feature_id = features[layer_id].keypoints.size();
  KeyPoint kp;
  kp.octave = 3;
  kp.pt.x = jpic.x;
  kp.pt.y = jpic.y;
  features[layer_id].keypoints.push_back(kp);
} 
```

这是对 SURF 的调用：

```
SURF surf(300, 3, 4);
for (int i = 0; i < nb_img; ++i)
{
  debug_msg("extract_features #4.1");
  cv::detail::ImageFeatures &cdif = features[i];
  Mat gray_image = imread(param.layer_images[i], 0);  // 0 = force to gray scale!

  debug_msg("extract_features #4.2");
  vector<float> descriptors;
  debug_msg("extract_features #4.3");
  surf(gray_image, Mat(), cdif.keypoints, descriptors, true); // MUST BE TRUE TO FORCE THE PROVIDED KEYPOINTS

  debug_msg("extract_features #4.4");
  cdif.descriptors = Mat(descriptors, true).reshape(1, (int)cdif.keypoints.size());
  debug_msg("extract_features #4.5");
  gray_image.release();

  debug_msg("extract_features #4.6");
  images[i] = imread(param.layer_images[i]);  // keep the image open
} 
```

它在调试消息中的 #4.3 之后崩溃！

希望有帮助！

编辑2：

我用 cv::SurfDescriptorExtracter 替换了一些部分。我用以下行替换从 4.3 到 4.5 的所有内容：

```
 extractor.compute(gray_image, cdif.keypoints, cdif.descriptors); 
```

所以现在，仍然有一个错误，但它位于其他地方，与这个问题无关！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:20:05.453

我很惊讶`surf(gray_image, Mat(), cdif.keypoints, descriptors, true)`甚至可以编译调用。`descriptors`参数应该是 cv::Mat，而不是向量。

# c# - 我可以将搜索结果从 xelement 查询到列表框，但不能从列表框到 xaml 文件

> ID：10144109
> 
> 赞同：1
> 
> 时间：2012-04-13T15:49:06.390
> 
> 标签：c#, xml, windows-phone-7, xaml, listbox

我正在编写一个 Windows Phone 7 应用程序，我有一个看起来像这样的 xml 文件

```
 <Barcodes>
  <Barcode code="7393997155338"
           companyName="Garbo Food AB"
           productName="Toast Loaf"/>

</Barcodes> 
```

我正在使用 xElement 搜索 xml 文件，如下所示，我在列表框上没有得到空值，它告诉我它已填充？！？

```
 var searchElement = XElement.Load("storedBarcodes.xml");
        var barcodeProductResult = from var in searchElement.Descendants("Barcodes") 
                                   where var.Attribute("code").Value == b
                                   select new ProductBarcodes()
                                   {
                                       code = var.Attribute("code").Value,
                                       companyName = var.Attribute("companyName").Value,
                                       productName = var.Attribute("productName").Value

                                   };
        if (barcodeProductResult != null)
        {
            tbSuccessfullSearchOrNot.Text = ("Search has found a matching product!");

            if (resultsListBox != null)
            {

                resultsListBox.ItemsSource = barcodeProductResult;
                tbSuccessfullSearchOrNot.Text = ("Search has found a matching product! but listbox is not empty");
            }
            else
            {

                tbSuccessfullSearchOrNot.Text = ("Search has found a matching product! but listbox is empty");
            }
                //tbProductBarcode.Text = ("Product Barcode : " + _code + Environment.NewLine);
            //tbCompanyName.Text = ("Company Name: " + _companyName + Environment.NewLine);
        }
        else
        {
            tbSuccessfullSearchOrNot.Text = ("No matching product found!");
        } 
```

填充列表框后，它应该在屏幕上输出，如下所示，我正在尝试几种方法，即。使用 {Binding Path=Element[code].Value}" 和 Text="{Binding code}，结果在输出屏幕上为空，

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <StackPanel>
        <Button Height="150" Content="Press here to scan a barcode !!" Click="Button_Click" Foreground="#FF2FFF07" />
        <TextBlock Margin="30" FontSize="36" TextWrapping="Wrap"   x:Name="tbSuccessfullSearchOrNot"/>
        <TextBlock Margin="30" FontSize="36" TextWrapping="Wrap"   x:Name="tbScanResultBarCode"/>
        <ListBox x:Name="resultsListBox" TabIndex="8" ItemsSource="barcodeProductResult" >
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="10" >
                        <TextBlock x:Name="results" Text="{Binding code}"   FontSize="22" FontWeight="Bold" FontStyle="Italic" Foreground="Orange"  />
                        <TextBlock Text="{Binding Path=Element[code].Value}" Foreground="Black"/>
                        <TextBlock Text="{Binding companyName}" Foreground="Black"/>
                        <TextBlock Text="{Binding productName}" Foreground="Black"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <!--<TextBlock Height="346" FontSize="36" x:Name="tbProductDetails" TextWrapping="Wrap"  Width="450" >

        </TextBlock>-->
        <TextBox Height="71" Name="tbProductBarcode"  Width="460" IsEnabled="False" IsReadOnly="True" DataContext="{Binding ElementName=tbProductBarcode}" />
        <TextBox Height="71" Name="tbCompanyName"  Width="460" IsEnabled="False" IsReadOnly="True" />
        <TextBox Height="71" Name="tbProductName"  Width="460" IsEnabled="False" IsReadOnly="True" />
        <!--<Button Height="150" Content="Tap to scan a QR code" Click="Button_Click_1"/>
        <TextBlock Margin="30" FontSize="36" TextWrapping="Wrap" x:Name="tbScanResultQR"/>-->

    </StackPanel>
</Grid> 
```

帖子编辑：这是我搜索的代码。这行得通，

```
 private void menuBtn_Click(object sender, RoutedEventArgs e)
    {
        var element = XElement.Load("SearchFile.xml");
        var filteredData = from var in element.Descendants("chipper")
                           where var.Attribute("County").Value.ToLower()==tbSearch.Text.ToLower() 
                           select new Counties()
                           {
                               LName = var.Attribute("LName").Value,
                               PlAddress = var.Attribute("PlAddress").Value,
                               County= var.Attribute("County").Value,
                               PhoneNumber = var.Attribute("PhoneNumber").Value

                           };

        ChipperListBox.ItemsSource = filteredData;
    } 
```

和xml：

```
 <StackPanel x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,90" Orientation="Horizontal">
    <ListBox x:Name="ChipperListBox" SelectionChanged="listBox_SelectionChanged">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Margin="10" >
                    <TextBlock x:Name="chipName" Text="{Binding LName}"   FontSize="22" FontWeight="Bold" FontStyle="Italic" Foreground="Orange" Tap="chipName_Tap" />
                    <TextBlock Text="{Binding PlAddress}" Foreground="Black"/>
                    <TextBlock Text="{Binding County}" Foreground="Black"/>
                    <TextBlock Text="{Binding PhoneNumber}" Foreground="Black"/>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</StackPanel> 
```

编辑：我在 Windows 手机上取消此应用程序，因为模拟器没有摄像头。在将元素名称更改为“条形码”后，来自调用堆栈的信息我得到一个 readerException，它几乎立即停止条形码扫描仪但是当我停止调试时我运行再次在手机上的 Visual Studio 之外运行应用程序，但仍然没有输出到 xaml 中的列表框

> “在 Silverlight_ZXing_Core.dll 中发生了‘com.google.zxing.ReaderException’类型的第一次机会异常
> 
> 附加信息：ReaderException"

```
Silverlight_ZXing_Core.dll!com.google.zxing.oned.UPCEANReader.findGuardPattern(com.google.zxing.common.BitArray row, int rowOffset, bool whiteFirst, int[] pattern) + 0xf1 bytes    
    Silverlight_ZXing_Core.dll!com.google.zxing.oned.UPCEANReader.findStartGuardPattern(com.google.zxing.common.BitArray row) + 0x8 bytes   
    Silverlight_ZXing_Core.dll!com.google.zxing.oned.UPCEANReader.decodeRow(int rowNumber, com.google.zxing.common.BitArray row, System.Collections.Generic.Dictionary<object,object> hints)    
    Silverlight_ZXing_Core.dll!com.google.zxing.oned.OneDReader.doDecode(com.google.zxing.BinaryBitmap image, System.Collections.Generic.Dictionary<object,object> hints) + 0x113 bytes 
    Silverlight_ZXing_Core.dll!com.google.zxing.oned.OneDReader.decode(com.google.zxing.BinaryBitmap image, System.Collections.Generic.Dictionary<object,object> hints) 
    Silverlight_ZXing_Core.dll!com.google.zxing.oned.OneDReader.decode(com.google.zxing.BinaryBitmap image) + 0x3 bytes 
>   WP7.ScanBarCode.dll!WP7.ScanBarCode.BarCode.cam_AutoFocusCompleted(object sender, Microsoft.Devices.CameraOperationCompletedEventArgs e) Line 114 + 0x7 bytes   C#
    Microsoft.Phone.dll!Microsoft.Devices.Camera.SafeFireEvent<Microsoft.Devices.CameraOperationCompletedEventArgs>.AnonymousMethod__1f(object ignored) + 0x17 bytes    
    mscorlib.dll!System.Threading.ThreadPool.WorkItem.WaitCallback_Context(object state) + 0x18 bytes   
    mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state) + 0x63 bytes    
    mscorlib.dll!System.Threading.ThreadPool.WorkItem.doWork(object o) + 0x47 bytes 
    mscorlib.dll!System.Threading.Timer.ring() + 0x70 bytes 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:25:48.167

`Barcodes`是你的根元素，你想要一个`Barcode`项目列表，所以使用它作为你的`from`：

```
from barcode in searchElement.Descendants("Barcode") 
```

作为旁注，您的空检查不正确。`barcodeProductResult`不会为空，但它的 a 可能`Count()`为 0。`resultsListBox`也永远不会为空。

# php - 如何在没有 Flash 支持的情况下使用 Ajax 和 Codeigniter 上传文件？

> ID：10144116
> 
> 赞同：2
> 
> 时间：2012-04-13T15:49:28.153
> 
> 标签：php, jquery, ajax, codeigniter, upload

我尝试了许多 javascript 插件，但最后不得不发布这个问题。使用 PHP CodeIgniter 框架和 Ajax 上传文件的最佳方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T16:26:01.163

我现在用[Plupload](http://www.plupload.com/)做所有事情。因为它主要是客户端驱动的，所以它几乎可以在任何网络浏览器和平台（.net、php 等）上运行

它使用聪明的方法来检测浏览器的兼容性；它尝试将 Flash 对象或 silverlight 注入客户端，以实现诸如允许上传大于 2gb 的分块上传、速度（kb/s）、队列管理等功能。

这真是一个了不起的上传者.. 但它太暴露了，我花了好几年才找到它。现在我的网站（有一点完美主义的工作）看起来像谷歌或 Facebook 风格的上传者......[免费！](http://www.plupload.com/example_queuewidget.php)

![在此处输入图像描述](../Images/f99682900865ddb86342b2b48a14d511.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:19:23.053

我在 web 应用程序中使用[http://valums.com/ajax-upload/取得了巨大成功。](http://valums.com/ajax-upload/)不过那是一年多以前的事了。我使用的是 Kohana，而不是 CI，但它在这件事上真的是不可知论者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T16:26:25.470

`ajax`本身不支持文件上传。您可以通过向 iframe 提交表单并阅读响应来实现此目的。有许多可用的插件以有组织的方式提供功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T22:06:07.533

使用这个： [http](http://www.phpletter.com/Demo/Tinymce-Ajax-File-Manager/) ://www.phpletter.com/Demo/Tinymce-Ajax-File-Manager/ ;)

# sharepoint - Mule ESB - CMIS 与 SharePoint 连接器

> ID：10144121
> 
> 赞同：1
> 
> 时间：2012-04-13T15:49:37.467
> 
> 标签：sharepoint, integration, esb, mule, cmis

有谁知道 CMIS (http://www.mulesoft.org/muleforge/cmis-cloud-connector) 和 SharePoint (http://www.mulesoft.com/cloud-connectors/sharepoint) 连接器在骡 ESB？

由于 SharePoint server 2010 仅支持 CMIS，我想知道 Mule 是否有适用于以前版本的 SharePoint 的解决方案。

谢谢，穆罕默德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:45:07.157

我从 MuleSoft 的一位联系人那里得到以下回复：

“关于 SharePoint – 您实际上为此使用了 CMIS 连接器。CMIS 是 SharePoint 的基础技术”

# jquery - MVC3 - 如何在回发时维护选项卡索引

> ID：10144122
> 
> 赞同：3
> 
> 时间：2012-04-13T15:49:41.037
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-ui, razor

我对 MVC 很陌生。我有一个带有 jQ​​uery 选项卡（如下所示）的视图。

```
<div class="demo">
<div id="demoTabs">
    <ul aria-labelledby="demoTabsLabel">
        <li><a href="#basicInfo">Basic Information</a> </li>
        <li><a href="#address">Address</a> </li>
        <li><a href="#tabbs">Tab 3</a> </li>
    </ul>
    <div id="basicInfo">
        @using (Html.BeginForm("Create", "Organisation", FormMethod.Post)) {
        <div class="editor-label">
            @Html.LabelFor(model => @Model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => @Model.Name) @Html.ValidationMessageFor(model => @Model.Name)
        </div>
        <div>
            <a class="nexttab" href="#address">
                <input id="Submit2" type="submit" value="Continue" /></a>
        </div>
        }
    </div>
    <div id="address">
        @Html.Label("Address") <a class="nexttab" href="#tabbs">
            <input id="Submit4" type="submit" value="Continue" /></a>
    </div>
    <div id="tabbs">
        @Html.Label("optional") </fieldset>
        <input id="Submit5" type="submit" value="Submit" />
    </div>
</div> 
```

当用户按下继续按钮时，控件使用下面的脚本移动到下一个选项卡。

```
$("#demoTabs").tabs();
$(".nexttab").click(function () {
    $("#demoTabs").tabs("select", this.hash);
}); 
```

但是，当请求在保存信息后从控制器返回时，它会重新加载页面并将控件再次移动到第一个选项卡。

你能建议我正确的做法吗？

非常感谢

**控制器**

```
[HttpPost]
public ActionResult Create(Xrm.Account account)
{
    //create
    org = orgModel.CreateOrUpdateOrg(account);
    return Redirect(Url.Action("Create", "Organisation") + "#tabbs");           
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T15:54:47.500

在您的控制器中，使用此行返回到您的 ActionResult。您需要在末尾附加正确的选项卡名称：

```
return Redirect(Url.Action("Action", "Controller") + "#tabname"); 
```

然后在您的页面中，添加此代码以在加载时显示正确的选项卡：

```
$("#demoTabs").tabs("select", window.location.hash); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:23:33.957

改变你的功能

```
$(".nexttab").click(function () {
    $("#demoTabs").tabs("select", this.hash);
}); 
```

对此

```
$(".nexttab").click(function () {
        $("#demoTabs").tabs("select", this.hash);
window.location.hash = this.hash
    }); 
```

和功能

```
$("#demoTabs").tabs(); 
```

到

```
$("#demoTabs").tabs("select", window.location.hash); 
```

# .net - 应用程序日志记录的粒度

> ID：10144124
> 
> 赞同：0
> 
> 时间：2012-04-13T15:50:04.550
> 
> 标签：.net, logging, nlog

大多数开发人员强烈建议您使用的任何日志记录框架（log4net、NLog、MS Diag 等）都做两件事：

1）为粒度实现特定于类的记录器，而不是通过单例发送所有内容 2）为您的日志框架创建一个外观以掩盖实际的框架选择（例如，您可以无缝地将 log4net 换成 NLog）

第二个我不知道我买了多少，它似乎是过度设计解决方案的完美例子。例如，我“可以”将我的应用程序编写为完全与数据库无关，并且能够连接到任何数据库提供程序。但在实践中这多久是必要的？95% 的时间你选择你的目标数据库类型并坚持使用它，对我来说日志框架是一样的，我选择了 NLog，这就是我打算在项目生命周期中使用的东西。如果在 5 年内我需要将其切换出来，那么它们可能会是一堆其他的东西，我也需要改变，所以我将把它作为重写的一部分。

虽然第一项似乎它可能有有用的应用程序。有人可以为我提供一些他们如何利用此功能的具体示例吗？您将如何在实践中实现这一点？就像说我有一个数据访问模块由于某种未知原因突然失败......我将如何动态修改我的日志记录设置以专注于该模块并获取详细的日志记录信息？它们是一种编程方式来告诉 NLog 在应用程序运行时重新加载其设置吗？

谢谢

# coldfusion - 从 CFLOOP 获取值

> ID：10144133
> 
> 赞同：0
> 
> 时间：2012-04-13T15:50:22.470
> 
> 标签：coldfusion, coldfusion-9, cfloop

我试图从 CFLOOP 中提取值并转储它们，但我似乎遗漏了一些东西。我需要从第一个循环中提取 openHours 并从第二个循环中提取 openMinutes 并将它们放入变量中，然后运行查询以提交值在数据库中。

这是我转储#form# 时的结构。我需要获取变量`form.openHours1`问题是openHours通过#CountVar#获取它的数字所以基本上我需要转储#form.openHours[CountVar]#之类的东西

```
struct  
FIELDNAMES   POSTITNOW,OPENHOURS1,OPENHOURS2,OPENHOURS3,OPENHOURS4,OPENHOURS5,OPENHOURS6,OPENHOURS7
OPENHOURS1   13
OPENHOURS2   13
OPENHOURS3   12
OPENHOURS4   0
OPENHOURS5   0
OPENHOURS6   0
OPENHOURS7   0
POSTITNOW    YES 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:41:42.873

而不是`#form.openHours[CountVar]#`你想要的是：

```
form["openHours" & CountVar] 
```

作为范围，FORM 也是一个结构，您可以使用数组表示法来获取值。

这是使用动态表单字段名称的关键。

澄清：

```
form.openHours7 
```

相当于

```
form["openHours7"] 
```

第一个通常称为点表示法，第二个称为数组表示法（因为它类似于您引用数组元素的方式。

由于括号中的值是字符串，您可以将其替换为变量。

```
<cfset fieldToUse = "openHours7">
<cfoutput>#form[fieldToUse]#</cfoutput> 
```

或者，正如我打开的那样，文字字符串和变量的组合。

你不能用点符号真正做到这一点。（至少不使用评估（），通常不推荐。）

[该文档](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=arrayStruct_07.html)有很多关于如何使用结构的信息，包括不同的符号方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T02:45:17.720

抱歉，这对我来说有点模糊，但这并没有阻止我参与进来。你是否会有相同数量的 openhours 和 openminutes？你能循环遍历form.fieldnames吗？就目前而言，您有名为 openhours1-N 的字段，听起来 openminutes1-N 尚未添加。似乎您可以遍历字段名，如果该字段以 openhours 开头，您会从末尾得到数字，然后您可以轻松创建相应的 openminutes 字段。正如 Al 之前所说的（很多），您很可能会使用数组表示法从表单结构中获取值。

另一个想法是表单字段名称不必是唯一的。如果您多次出现“openhours”，ColdFusion 会将其转换为您的列表，然后您可以遍历该列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T16:11:50.443

我想你想要这个，或者非常相似的东西：

```
<cfoutput>
<cfloop from="1" to="7" index="CountVar">        
     #openHours[CountVar]#<br>
</cfloop>
</cfoutput> 
```

# character-encoding - 转到 []int 到符文

> ID：10144139
> 
> 赞同：1
> 
> 时间：2012-04-13T15:50:42.907
> 
> 标签：character-encoding, go

```
for pos, char := range s {
        fmt.Println( utf8.RuneLen(char) )
} 
```

此代码适用于 Go（pre v1），但不适用于 Go1。

> 不能在函数参数中使用 char (type []int) 作为 rune 类型

我运行 go fix 将“utf8”导入更新为“unicode/utf8”，但现在我得到了以前的错误。

[rune](http://golang.org/doc/go1.html#rune)的文档提到一个简单的转换将解决这个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T16:13:27.353

您发布的代码适用于 Go1。假设`s`是一个字符串。

确保您没有意外引入或使用其他名为`char`type的变量`[]int`，并确保您的代码中没有会导致意外使用不同变量的拼写错误。

# static-variables - 如何使用另一个类的变量

> ID：10144140
> 
> 赞同：0
> 
> 时间：2012-04-13T15:50:43.250
> 
> 标签：static-variables

我有一个班级概述，我尝试在其中保存客户。现在我想在另一个类中使用该客户。现在我使用的是Public Static值，但是我的老师说使用静态变量不好。你能解决这个问题吗

```
public class OverView {
  public static Customer CurrentCustomer;

  CurrentCustomer = new Customer("Tom",23);
}

public class removeCustomer{

  Customer removeCustomer = OverView.CurrentCustomer;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:54:16.957

老师说的对，不要直接和静态变量接口，实现getter/setter方法

请参阅[http://en.wikipedia.org/wiki/Mutator_method](http://en.wikipedia.org/wiki/Mutator_method)了解更多信息！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:13:53.377

更好的是：在您的示例中，您根本不需要触摸 Customer 的实例。“删除”功能应该是 Customer 类的成员方法。我什至不确定您是否需要 currentCustomer 是静态的，但我保持它是静态的。

```
public class Customer {

    //Customer constructor, etc.

    * * * 

    public void remove() {
        //remove the customer, whatever that entails
    }

}

public class OverView {

    private static Customer currentCustomer;

    public static void someMethod() {
        currentCustomer = new Customer("Tom",23);

        * * *

        //all done with this customer
        currentCustomer.remove();

        //but notice that the currentCustomer object still exists
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:53:55.313

您需要一个 Overview 实例来访问其非静态成员。尝试：

```
public class OverView {
  public Customer CurrentCustomer = new Customer("Tom",23);
}

Public class removeCustomer{

  OverView ov = new OverView();
  Customer removeCustomer = ov.CurrentCustomer;
} 
```

也建议不要将 CurrentCustomer 声明为 public，并实现 public get/set 方法来访问它

# python - 无法在 Heroku 上使用 South 迁移 Django 应用程序

> ID：10144143
> 
> 赞同：1
> 
> 时间：2012-04-13T15:51:04.607
> 
> 标签：python, django, heroku

我已经在我现有的 Django 应用程序上安装了 South。这个 Django 应用程序也在 Heroku 上。

在不对模型进行任何更改的情况下，我在本地执行了以下命令：

*   `manage.py schemamigration app_name --initial`
*   `manage.py migrate --fake`

然后我试图推动heroku master，并迁移到那里。但我收到以下信息：

```
Running migrations for app_name:
- Nothing to migrate.
  - Loading initial data for notecards.
No fixtures found 
```

如果我尝试伪造 Heroku 迁移，我会收到相同的消息。

我想，这可能没问题，因为从技术上讲，由于数据库保持不变，因此没有什么可迁移的。

所以我对其中一个模型做了一个小改动，并做了以下事情：

*   `manage.py schemamigration app_name --auto`
*   `manage.py migrate`

然后我推送到 Heroku 并尝试迁移到那里，我仍然收到以下信息：

```
Running migrations for app_name:
- Nothing to migrate.
  - Loading initial data for notecards.
No fixtures found 
```

对我做错的任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-01T16:17:48.573

对于遇到此问题的其他任何人，以及我自己的参考。感谢 Chris Pratt 让我走上正轨。

这是通过以下方式解决的：

本地：

递归删除任何旧迁移`git rm -r migrations`

刷新旧数据库（这会删除所有数据，但对我来说这不是问题）`manage.py flush`

删除应用文件夹中的迁移文件夹

运行初始架构迁移`manage.py schemamigration --initial`

运行假迁移`manage.py migrate --fake`

推heroku大师

在 Heroku 上：

迁移`heroku run python manage.py migrate app_name`

然后，在本地，您可以运行 migrate --auto，推送到 heroku，然后运行 ​​migrate app_name

# objective-c - presentModalViewController 将新视图向上滑动并超出屏幕顶部

> ID：10144144
> 
> 赞同：0
> 
> 时间：2012-04-13T15:51:08.403
> 
> 标签：objective-c, uisplitviewcontroller, modalviewcontroller, presentmodalviewcontroller

```
-(void)reviewClicked:(id)sender
{
    ReviewViewController *newView = [[ReviewViewController alloc] init];
    newView.delegate = self;
    UINavigationController *navCon = [[UINavigationController alloc] initWithRootViewController:newView];
    [self presentModalViewController:navCon animated:YES];
} 
```

我有一个 splitViewController 设置，这可能会导致一些问题。在详细视图控制器中，我有一个按钮，单击该按钮会调用上述代码。

目标是从屏幕底部向上滑动视图，以便用户查看他们的选择，然后单击按钮返回到原始详细视图。此代码有效，您可以在模式视图和原始详细视图之间来回单击。

问题是，在它向上滑动屏幕后，它继续滑过它应该停止的位置，最后停止了 10-15 像素。基本上，这个模态视图会向上滑动，以至于很大一部分视图超出了屏幕顶部。同时，相同数量的空间是屏幕底部的“空白黑色空间”，进一步表明视图只是向上移动得太远了。

使事情复杂化的是，它在横向模式下滑动得很好。

所以问题是，有谁知道为什么会出现这个错误以使模态视图向上滑动太远并超过屏幕顶部？

-=-=-=-=-=-=-

编辑：对不起，我打算在那个地方输入 navCon。我把它固定在上面。

-=-=-=-=-=-=-

解决方案：

```
-(void)reviewClicked:(id)sender
{
    ReviewViewController *newView = [[ReviewViewController alloc] init];
    newView.delegate = self;
    UINavigationController *navCon = [[UINavigationController alloc] initWithRootViewController:newView];
    navCon.view.frame = CGRectMake(0, 0, 768, 1080);
    [self presentModalViewController:navCon animated:YES];
} 
```

经过一些试验和错误，我意识到我从未真正设置过视图的框架！一个如此简单的解决方案......我一直在运行包含 .xib 文件的示例，并且由于这些文件自动创建了框架，我完全忽略了它！

请记住，任何人在未来看到这个。此框架仅适用于纵向模式。如果您想要横向模式，只需相应地修改框架：

```
navCon.view.frame = CGRectMake(0, 0, 1080, 768); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:23:58.670

尽管我已经找到了问题中描述的问题的快速解决方案。事实是，仍然存在许多问题。经过进一步检查，我呼吁 appDelegate 调用这些方法：

```
[self.splitViewController presentModalViewController:navCon animated:YES];
[self.splitViewController dismissModalViewControllerAnimated:YES]; 
```

基本上，我让根视图类调用模态视图，它解决了我的所有问题。显然，从 splitview 的详细视图中调用模态视图与从根视图（恰好是 splitViewController）调用模态视图不同。我希望这对将来的任何人都有帮助。干杯。

-=-=-=-=-=-=-=-

有关更多参考，请参阅我偶然发现的这篇文章：

[UISplitViewController - 推送模态视图](https://stackoverflow.com/questions/3224176/uisplitviewcontroller-pushing-modal-view/10146923#10146923)

# http - WebDAV 的最小请求响应周期示例？

> ID：10144148
> 
> 赞同：7
> 
> 时间：2012-04-13T15:51:24.737
> 
> 标签：http, webdav

是否有一个典型的请求-响应周期的最小（可能带注释）示例，包含标头和正文。据我了解，这包括一个初始的 OPTIONS 和一个后续的 PROPFIND 交换 - 之后， GET 和 PUT 应该很简单，所以我不需要一个通用的例子。

我一直在考虑通过 WebDAV 公开现有的 RESTful 资源（其中的集合和单个项目）。我只需要基本功能即可工作——列出目录、读取和写入文件——AFAICT 意味着添加 PROPFIND 支持就足够了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-13T15:59:53.443

[该规范包括示例：](http://www.webdav.org/specs/rfc3648.html#rfc.section.10.1)

## 最小

要求：

```
OPTIONS /somecollection/ HTTP/1.1
Host: example.org 
```

回复：

```
HTTP/1.1 200 OK
Allow: OPTIONS, GET, HEAD, POST, PUT, DELETE, TRACE, COPY, MOVE
Allow: MKCOL, PROPFIND, PROPPATCH, LOCK, UNLOCK, ORDERPATCH
DAV: 1, 2, ordered-collections 
```

## 实际的

要求：

```
 PROPFIND /somecollection HTTP/1.1
    Depth: 0
    Content-Type: text/xml; charset="utf-8"
    Content-Length: xxx

    <?xml version="1.0" encoding="UTF-8" ?>
    <propfind xmlns="DAV:">
      <prop>
        <supported-live-property-set/>
        <supported-method-set/>
      </prop>
    </propfind> 
```

回复：

```
HTTP/1.1 207 Multi-Status
Content-Type: text/xml; charset="utf-8"
Content-Length: xxx

<?xml version="1.0" encoding="utf-8" ?>
<multistatus xmlns="DAV:">
  <response>
    <href>http://example.org/somecollection</href>
    <propstat>
      <prop>
        <supported-live-property-set>
          <supported-live-property>
            <prop><ordering-type/></prop>
          </supported-live-property>
          <!-- ... other live properties omitted for brevity ... -->
        </supported-live-property-set>
        <supported-method-set>
          <supported-method name="COPY" />
          <supported-method name="DELETE" />
          <supported-method name="GET" />
          <supported-method name="HEAD" />
          <supported-method name="LOCK" />
          <supported-method name="MKCOL" />
          <supported-method name="MOVE" />
          <supported-method name="OPTIONS" />
          <supported-method name="ORDERPATCH" />
          <supported-method name="POST" />
          <supported-method name="PROPFIND" />
          <supported-method name="PROPPATCH" />
          <supported-method name="PUT" />
          <supported-method name="TRACE" />
          <supported-method name="UNLOCK" />
        </supported-method-set>
      </prop>
      <status>HTTP/1.1 200 OK</status>
    </propstat>
  </response>
</multistatus> 
```

# git - git status 返回致命：不是 git 存储库，但存在 .git 并且 HEAD 具有适当的权限

> ID：10144149
> 
> 赞同：63
> 
> 时间：2012-04-13T15:51:25.840
> 
> 标签：git

当我在我的仓库上运行 git status 时，我得到`fatal: Not a git repository: /my repo/.git/modules/docs`

我已经检查过 .git 存在并包含具有适当权限的 HEAD 。我可以很好地运行各种其他命令。如果我运行 git gui，它会很好地打开并列出几个已更改的文件，但会丢失很多文件。

我猜 HEAD 中可能存在某种损坏，但不确定。知道如何在不清除整个回购的情况下解决这个问题吗？

更新：我意识到我已经更改了 repo 目录的名称。错误中引用的目录是该目录的旧名称。所以我目前的回购是在，`/new dir/.git`但错误是说`Not a git repository: /old dir/.git/modules/docs`。所以也许 git 很困惑？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-12-15T15:40:36.593

这两个文件包含绝对子模块路径：

```
{submodule}/.git
.git/modules/{submodule}/config 
```

因此，如果您移动了存储库，这两个文件中的绝对路径无效，并导致“不是 git 存储库”错误。只需手动修复这些文件。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-05-30T15:12:50.127

以前版本的 git 使用绝对路径来定位子模块的 gitdir。解决方法如下：

1.  将 git 升级到[最新版本](http://git-scm.com/download/)。有人说您至少需要 1.7.10 版本。我刚刚用 git 1.8.3 成功解决了这个问题。
2.  删除所有损坏的子模块文件夹：`rm -rf broken_submodule_folder`
3.  更新已注册的子模块：`git submodule update`. 您应该看到子模块被签出。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-16T20:02:37.860

我终于解决了这个问题是由于其中一个子模块的问题。简单地重命名 repo 目录会导致与该子模块发生冲突。在看到[如何使用子模块重命名 git 存储库中的讨论之后？](https://stackoverflow.com/questions/9878860/how-can-i-rename-a-git-repository-with-submodules)我意识到克隆 repo 是一种更好的方法，而不是重命名目录，并且解决了子模块的问题。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-03-14T05:57:43.877

在我的情况下，问题是 .git/HEAD 文件没有指向任何地方，它只包含一系列奇怪的字符。我将 .git/ORIG_HEAD 的内容复制到 .git/HEAD 并再次工作。

[来源](https://stackoverflow.com/a/22604593/813122)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-07-24T07:14:51.317

我通过重置所有 git-submodules 解决了这个问题

```
rm -rf .git/modules
git submodule update --init 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-09-05T00:17:39.257

在 @ax003d [answer](https://stackoverflow.com/a/13893585/102353)之后，您可以使用以下命令将所有旧路径 ( `old/path`) 替换为新路径 ( `new/path`)：

```
find . -type f \( -name ".git" -o \( -path "*.git/modules/*" -name config \) \)  -print0 | xargs -0 sed -i -e "s#old/path#new/path#g" 
```

您可能想在替换旧路径之前检查它们的样子：

```
find . -type f \( -name ".git" -o \( -path "*.git/modules/*" -name config \) \)  -print0 | xargs -0 grep --colour "old/path" 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-11-30T11:07:55.013

解决方案 ：

1）查看 HEAD 文件（在 .git 下）-> 如果它已损坏（包含一些随机值），用此文本替换内容 'ref: refs/heads/develop'（develop 是我正在处理的最后一个分支)

2）尝试-git状态。

3）如果步骤 2 不能解决您的问题，请尝试这些命令（可能不适用于所有人，但值得一试）

rm -f .git/index git reset

4) git 将在重置后为您提供未暂存的文件。根据您的意愿保留或丢弃

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-06-16T08:39:07.623

我也遇到了子模块的这个问题，但是在分析了这两个文件之后

{submodule}/.git .git/modules/submodules/{submodule}/config

我意识到在我的情况下这不是问题。

经过一番研究，我发现在我的情况下，我必须添加 git（命令：module add git）并且错误消失了。

# python - ZeroMQ 选择性发布/订阅模式？

> ID：10144158
> 
> 赞同：4
> 
> 时间：2012-04-13T15:51:54.437
> 
> 标签：python, zeromq

我正在尝试为*N*个前端服务器和*M*个后端工作人员设计 ZeroMQ 架构，其中前端服务器会将任务发送到后端服务器。前端服务器确实有后端服务器的信息，但后端服务器不知道前端的信息。我有两种类型的任务，一种类型应该使用循环并只去一个后端服务器，而另一种类型应该广播到所有后端服务器。我不想有一个中央经纪人，因为这将是单点故障。

对于第一种类型的任务，请求/响应模式似乎是正确的，而对于第二种类型，它将是发布者/订阅者模式。但是将两者结合起来的模式呢？如果我想向所有或仅向一个随机后端服务器发送消息，是否有任何模式可以让我在发送时进行选择？

我想出的解决方案只是使用发布者/订阅者，并在消息前面加上后端服务器 ID 和一些魔法值（如果它是针对所有人的）。但是，这会产生很多不必要的流量。有没有更清洁、更有效的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:48:34.953

我认为唯一的可能性是使用 DEALER-ROUTER 组合。前端是DEALER，后端是ROUTER。每个前端服务器都应为每个后端服务器（用于广播）包含一个 DEALER 套接字，并且顶部的一个 DEALER 套接字同时连接到所有后端服务器以用于循环事物。现在让我解释一下原因。

1.  在这种危急情况下，您不能真正使用 PUB-SUB，因为该模式可以很容易地静默丢弃消息，它不会排队。所以实际上发布到 PUB 的消息可以到达 SUB 的任何子集，因为它在后台（断开）连接。出于这个原因，您需要通过循环分配给所有后台服务器的 DEALER 套接字来模拟广播。如果后端部分未连接，它将对消息进行排队，但请注意 HWM。唯一的最终解决方案是使用心跳来了解后端何时死亡并销毁分配给它的套接字。
2.  后台的 ROUTER 套接字是一种合乎逻辑的解决方案，因为您可以异步接受任意数量的请求，并且由于它是 ROUTER 套接字，因此将响应发送回请求任务的前端非常容易。通过在后台服务器中使用单个 ROUTER，您可以使它们甚至不知道正在发生广播的事实，它们将所有内容视为对它们的直接请求。广播纯粹是前端的事情。此解决方案的唯一问题可能是，如果您的后端服务器不够快，所有前端服务器可能会填满它，以便它到达 HWM 并开始丢弃包。您可以通过让更多线程/进程处理来自 ROUTER 套接字的消息来防止这种情况。zmq_proxy() 是一个有用的函数。

希望这可以帮助 ;-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:56:30.157

我可能会使用[pub sub 消息信封](http://zguide.zeromq.org/lua%3aall#Pub-sub-Message-Envelopes)- 如果您通过 UDP 使用 pub/sub 广播，我不相信它会产生不必要的网络流量，但它会导致额外的处理，但是就像大多数这些事情一样，这是一个权衡设计优雅和性能。ØMQ倾向于先走性能路线，但我更倾向于衡量它并使用量化的性能结果来决定这是否可以接受。

对我来说，优雅的解决方案是使用两组套接字，因为这本身就是通过系统区分工作流 - 而使用单个套接字会以非常非 ØMQ 的方式混合事物，这些应该不同以允许未来的变化和动态/不稳定系统。

# java - 外部类可以定义为静态并包含内部静态类吗？

> ID：10144161
> 
> 赞同：1
> 
> 时间：2012-04-13T15:52:03.377
> 
> 标签：java, oop

将外部类定义为内部也有静态类的静态类是否正确？只需要外部类和内部类的一个实例。外部类可以是抽象的，而它的封闭类可以是静态的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T15:53:38.303

不，顶级课程不能是静态的。类声明中“静态”的含义*仅*与嵌套类有关。不过，您当然可以在抽象类中拥有一个静态嵌套类。

从[JLS 部分 8.1.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.1)：

> 修饰符 static 仅适用于成员类（第 8.5.1 节），不适用于顶级或本地或匿名类。

请注意，如果您想要一个类的“仅一个实例”，您应该可能将其设为单例 - 这是完全独立的，而不是影响类声明本身的东西。

# javascript - Css3 Webkit css 动画：调整 div 矩形的大小

> ID：10144171
> 
> 赞同：7
> 
> 时间：2012-04-13T15:52:36.873
> 
> 标签：javascript, jquery, iphone, css, webkit

我试图了解是否可以`animate`使用 webkit 动画在 Jquery中复制该方法

假设我使用 jquery 有一个 50px x 50 px 的 div，我可以使用以下方法轻松调整其大小和动画：

```
$('#mybox').animate({'width':'100px','height':'70px'}, 300) 

// so from 50x50 it animates to 100x70 
// the values 100 and 70 should ba dynamically 
// input so i can create a function (Width,Height) to alter my box 
```

我想知道如何做同样的事情，如果可能的话使用 CSS WebKit 动画

PS。我不需要他们在 Firefox 中工作，只是 Safari/Chrome 的一个项目

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T15:55:18.677

你可以使用这个 CSS：

```
div.mybox {
    width: 50px;
    height: 50px;
    background-color: red;
    -webkit-transition:width 300ms ease-in-out, height 300ms ease-in-out;
    -moz-transition:width 300ms ease-in-out, height 300ms ease-in-out;
    -o-transition:width 300ms ease-in-out, height 300ms ease-in-out;
    transition:width 300ms ease-in-out, height 300ms ease-in-out;
} 
```

然后您可以使用 jQuery 更新宽度和高度属性：

```
$(document).ready(function() {
    $("div.mybox").css({"width": "100px", "height": "70px"});
}); 
```

因此，如果浏览器支持它，这将是动画的。但是，当然，考虑将这些属性放到一个单独的类中，并将这个类添加到元素中。您可以像这样使用 .addClass() 函数。

```
$(document).ready(function() {
    $("div.mybox").addClass("enlarged");
}); 
```

或者，例如，您可以将它与 toggleClass 函数和单击事件一起使用（单击时框会放大，再次单击时会变为正常大小）。

```
$(document).ready(function() {
    $("div.mybox").click(function() {
        $(this).toggleClass("enlarged");
    });
}); 
```

在这种情况下，属性应该在 CSS 类中定义。

```
div.mybox.enlarged {
    width: 100px;
    height: 70px;
} 
```

此外，如果您希望动画在鼠标悬停时发生，那么您只需添加以下内容：

```
div.mybox:hover {
    width: 100px;
    height: 70px;
} 
```

这种动画可以完全不使用 JS 来执行。

此外，您应该阅读有关[CSS3 过渡属性](http://www.w3.org/TR/css3-transitions/)和转换函数的信息（它们可以在许多情况下使用）。它们在[此处](http://www.w3.org/TR/css3-2d-transforms/)进行了描述。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-13T21:30:19.617

CSS3 将使这对您来说非常容易！它将添加一个过渡，您可以使用 更改尺寸`:hover`。这是示例 div：

```
<div id="mydiv">
    <!-- Div content goes here -->
</div> 
```

所以，你的 div 是“mydiv”。其余的在 CSS3 中完成：

```
#mydiv {
    width: 50px;
    height: 50px;
    background: #f34543;
    -webkit-transition:width 300ms ease-in-out, height 300ms ease-in-out;
    -moz-transition:width 300ms ease-in-out, height 300ms ease-in-out;
    -o-transition:width 300ms ease-in-out, height 300ms ease-in-out;
    transition:width 300ms ease-in-out, height 300ms ease-in-out;
}
#mydiv:hover {
    width: 100px;
    height: 70px;
} 
```

JSFiddle：http: [//jsfiddle.net/dakoder/ZGHLM/](http://jsfiddle.net/dakoder/ZGHLM/)

而已！它会将其大小从 50x50px 调整为 100x70px。已在 Chrome 上测试，但尚未在 Safari 上测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T15:57:55.493

```
@keyframes animationName {
    0% {width: 50px; height:50px}
    100% {width: 100px; height:70px}
} 
```

看看这个： [http ://www.css3files.com/animation/](http://www.css3files.com/animation/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T00:36:04.900

您可以通过将 CSS 应用为新的 styleSheet 或内联样式来使用具有“动态”值的 CSS 动画和过渡，如下例所示：

[http://jsfiddle.net/4zD74/](http://jsfiddle.net/4zD74/)

# extjs - sass/compass: all-foo-sprites mixin 的嵌套包含

> ID：10144175
> 
> 赞同：4
> 
> 时间：2012-04-13T15:52:55.310
> 
> 标签：extjs, sass, compass-sass

我已经生成了自动精灵类

```
@import "icons/*.png";
@include all-icons-sprites; 
```

导入和包含将神奇地生成如下类：

```
.icons-application_go {
  background-position: 0 -16px;
} 
```

（对应于 icons/application_go.png 文件）

但是，我需要包含我的精灵，以便生成的类看起来像这样

```
.x-btn-icon.icons-application_go {
  background-position: 0 -16px;
}

.x-btn-icon.icons-delete {
  background-position: 0 0;
} 
```

我试过做

```
.x-btn-icon {
  @include all-icons-sprites;
} 
```

但这会导致

```
.x-btn-icon .icons-application_go {
  background-position: 0 -16px;
}

.x-btn-icon .icons-delete {
  background-position: 0 0;
} 
```

，所以选择 .x-btn-icon 的子元素，但不选择带有 class="x-btn-icon icons-delete" 的元素

现在，我有

```
.x-btn-icon.icons-add { @include icons-sprite(add); } 
```

在我的 SASS 中。但我需要为每个项目手动执行此操作。我在这个集合中正好有 1000 个图标，所以这会很乏味 :-)

有没有办法遍历所有图标名称（如“添加”）并输出

```
.x-btn-icon.icons-$foo { @include icons-sprite($foo); } 
```

?

根据@cram1010 的建议，我也尝试过

```
@import "icons/*.png";
$icons-sprite-base-class: "&.icons-";

.x-btn-icon {
  @include all-icons-sprites;
} 
```

但我收到以下错误：

```
Invalid CSS after "": expected selector, was "&.icons-"
  (in /Users/pasc/projects/bss-io-demo/vendor/gems/bss-io-app/app/assets/stylesheets/bss.io.app.css.scss) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T21:57:47.943

以下作品。关键是[引用父母选择器](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#referencing_parent_selectors_)。

萨斯：

```
@mixin all-icons-sprites {
  &.icons-application_go {
    background-position: 0 -16px;
  }
  &.icons-delete {
    background-position: 0 0;
  }
}

.x-btn-icon {
  @include all-icons-sprites;
} 
```

编译为以下 CSS：

```
.x-btn-icon.icons-application_go {
  background-position: 0 -16px;
}

.x-btn-icon.icons-delete {
  background-position: 0 0;
} 
```

**更新 1**

看来我误解了这个问题，因为您的 mixin 是自动生成的。

您是否尝试过更改`$<map>-sprite-base-class` [compass 中精灵的选项](http://compass-style.org/help/tutorials/spriting/customization-options/)，使其包含引用父选择器`&`？

```
$icons-sprite-base-class: "&.icons-"; 
```

**更新 2**

对于评论，由于指南针源代码，这似乎是不可能的。所以肯定应该向 Compass 团队报告一个新错误：[github.com/chriseppstein/compass/issues](http://github.com/chriseppstein/compass/issues)

# iphone - iphone中的UTF8String方法

> ID：10144176
> 
> 赞同：0
> 
> 时间：2012-04-13T15:52:56.223
> 
> 标签：iphone

如果我有

```
NSString *myString          = @"string for data1"    
const char *utfMyString     = [myString UTF8String];
NSLog(@"length of my myString is %d",[myString length]);
NSLog(@"length of my utfMyString is %lu",strlen(utfMyString)); 
```

我查找了方法 UTF8String 的定义，该方法在最后为接收者返回一个 null 终止。因此，我认为***utfMyString***的长度应该是**17**。

不幸的是，***utfMyString***的长度仍然是***16***。请纠正我这个问题。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:56:52.203

`strlen()`在其长度计数中不包括终止空字符。

# pentaho - 在 Pentaho 中刷新存储库缓存

> ID：10144178
> 
> 赞同：0
> 
> 时间：2012-04-13T15:53:01.147
> 
> 标签：pentaho

我想知道是否有办法使用 ant 刷新 Pentaho Repository 缓存。我们有一个构建设置来从版本控制中提取所有新的报告/作业等并更新 pentaho 解决方案。我只是停留在刷新解决方案存储库缓存的最后一步，以便可以使用新更新/添加的报告/作业等。

我的最后一个选择是在 Tomcat 中刷新 Pentaho webapp，但如果有一个 ant 作业或一个可以从 ant 发出的 http 请求来刷新缓存，那就太好了。

提前致谢。

问候， 斯里吉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T13:15:28.347

看看这个 jira 问题： http: [//jira.pentaho.com/browse/BISERVER-7632](http://jira.pentaho.com/browse/BISERVER-7632) 您可以使用这个 url 来刷新缓存存储库。

# resque - Resque + Airbrake，没有看到异常

> ID：10144182
> 
> 赞同：2
> 
> 时间：2012-04-13T15:53:25.607
> 
> 标签：resque, airbrake

我正在使用 Resque 附带的 Airbrake 支持：

```
require 'resque/failure/multiple'
require 'resque/failure/airbrake'
require 'resque/failure/redis'

Resque::Failure::Airbrake.configure do |config|
  config.api_key = 'xxxxx'
end

Resque::Failure::Multiple.classes = [Resque::Failure::Redis, Resque::Failure::Airbrake]
Resque::Failure.backend = Resque::Failure::Multiple 
```

并尝试一个简单的工作：

```
class Fail
  @queue = :propagation

  def self.perform
    raise "Fail!"
  end
end 
```

我在 resque-web 中看到了错误，但它从未出现在 Airbrake 中。我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:28:52.697

是的，这在 gem 自述文件中并不是那么清楚......

如果您在开发过程中出现错误，您应该尝试添加`config.development_environments = []`到您的 Airbrake 配置中。

来自 Airbrake 支持的欢呼！:)

# ios - iOS5中的JSON到字符串

> ID：10144183
> 
> 赞同：1
> 
> 时间：2012-04-13T15:53:28.540
> 
> 标签：ios, string, json, ios5, nsjsonserialization

[我在这里](http://www.lifeofatechdude.com/2012/01/nsjsonserialization-convert-nsstring-to.html)找到了一个代码片段，我想使用它，但我不知道如何让它回到“字符串”并查看它是否有效......

```
// some strings for test
NSString *cpu = [[NSString alloc] initWithFormat:@"%.0f", [_cpuSlider value]];
NSString *ram = [[NSString alloc] initWithFormat:@"%.0f", [_ramSlider value]];
NSString *hdd = [[NSString alloc] initWithFormat:@"%.0f", [_hddSlider value]];

// put them into dictionary
NSDictionary *test = [NSDictionary dictionaryWithObjectsAndKeys:cpu, @"CPU", ram, @"RAM", hdd, @"HDD", nil];
// start of the code from page above
NSMutableData *myData = [[NSMutableData alloc]init];  
NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc]initForWritingWithMutableData:myData];  
[archiver encodeObject:test forKey:@"MyKEY"];  
[archiver finishEncoding];  
id testJson = [NSJSONSerialization JSONObjectWithData:myData options:0 error:nil];
// end of code

// HERE I'd like know what to put in to see it as a string..e.g. { "CPU"=value; etc...}
UIAlertView *av = [[UIAlertView alloc] initWithTitle:@"MLIA" message:????? delegate:nil cancelButtonTitle:@"Zavřít" otherButtonTitles: nil];
[av show]; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:10:06.143

`NSKeyedArchiver`不产生 JSON (AFAIK)，所以我不知道那个链接的例子是如何工作的。如果要对字典进行 JSON 编码，可以使用`+dataWithJSONObject:options:error:`：

```
NSError *err;
NSData *json = [NSJSONSerialization dataWithJSONObject:test options:0 error:&err];
NSAssert1(json, @"Error: %@", err);

// If not using ARC, remember to (auto)release repr.
NSString *repr = [[NSString alloc] initWithData:json encoding:NSUTF8StringEncoding];

[[UIAlertView …] … message:repr …]; 
```

# java - JetS3t - 无异常连接，但是当我尝试做其他事情时出现“无效的类名”

> ID：10144188
> 
> 赞同：1
> 
> 时间：2012-04-13T15:53:34.903
> 
> 标签：java, eclipse, jets3t

我似乎能够正常连接，因为*新的 RestS3Service*不会引发异常。

但是，当我尝试执行*getBucket("name") 之*类的操作时，我得到：*Invalid class name: org.jets3t.service.utils.RestUtils$ConnManagerFactory*

知道如何解决这个问题吗？

谢谢！

我的代码：

```
 AWSCredentials awsCredentials = new AWSCredentials(awsAccessKey, awsSecretKey);
    S3Service s3Service = null;

    System.out.println("Credentials created, trying Service");

    try {
        s3Service = new RestS3Service(awsCredentials);
    } catch (S3ServiceException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    System.out.println("Service connected, trying bucket grab");

    try {
        S3Bucket bucket = s3Service.getBucket("mrbucket");
        System.out.println("bucket grabbed: "+bucket.getName());
    } catch (S3ServiceException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

输出：

```
Credentials created, trying Service

Installer - Installer service created

Service connected, trying bucket grab

org.jets3t.service.S3ServiceException: Request Error: java.lang.IllegalStateException: Invalid class name: org.jets3t.service.utils.RestUtils$ConnManagerFactory
  at org.jets3t.service.S3Service.getBucket(S3Service.java:1911)
  at org.red5.core.Application.myFunction(Application.java:78)
  at org.red5.core.Application.appStart(Application.java:42)
  at org.red5.server.adapter.MultiThreadedApplicationAdapter.start(MultiThreadedApplicationAdapter.java:408)
  at org.red5.server.adapter.ApplicationAdapter.start(ApplicationAdapter.java:54)
  at org.red5.server.Scope.start(Scope.java:1170)
  at org.red5.server.Scope.init(Scope.java:905)
  at org.red5.server.WebScope.register(WebScope.java:207)
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
  at java.lang.reflect.Method.invoke(Method.java:597)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1544)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1485)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
  at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
  at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
  at org.red5.server.tomcat.TomcatLoader$1.run(TomcatLoader.java:577)
Caused by: java.lang.IllegalStateException: Invalid class name: org.jets3t.service.utils.RestUtils$ConnManagerFactory
  at org.apache.http.impl.client.AbstractHttpClient.createClientConnectionManager(AbstractHttpClient.java:308)
  at org.apache.http.impl.client.AbstractHttpClient.getConnectionManager(AbstractHttpClient.java:445)
  at org.apache.http.impl.client.AbstractHttpClient.createHttpContext(AbstractHttpClient.java:274)
  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:797)
  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
  at org.jets3t.service.impl.rest.httpclient.RestStorageService.performRequest(RestStorageService.java:334)
  at org.jets3t.service.impl.rest.httpclient.RestStorageService.performRequest(RestStorageService.java:281)
  at org.jets3t.service.impl.rest.httpclient.RestStorageService.performRestGet(RestStorageService.java:981)
  at org.jets3t.service.impl.rest.httpclient.RestStorageService.listAllBucketsImpl(RestStorageService.java:1373)
  at org.jets3t.service.StorageService.listAllBucketsImpl(StorageService.java:1379)
  at org.jets3t.service.StorageService.listAllBuckets(StorageService.java:563)
  at org.jets3t.service.S3Service.listAllBuckets(S3Service.java:1367)
  at org.jets3t.service.S3Service.listAllBuckets(S3Service.java:84)
  at org.jets3t.service.StorageService.getBucket(StorageService.java:729)
  at org.jets3t.service.S3Service.getBucket(S3Service.java:1909)
  ... 24 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:35:07.883

您的类路径中似乎缺少 org.jets3t.service.utils.RestUtils$ConnManagerFactory.class。你有完整的 JetS3t 库吗？库中大约有19个jar，RestUtils$ConnManagerFactory.class在0.8.1a版本的jet3t-0.8.1a.jar中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-23T08:14:16.433

**Groovy 用户：如果您在使用***Grape的 groovy 脚本**中将 jets3t*声明为依赖项，也会引发此异常。

 *如果是这种情况，您需要配置 Grape 以使用系统类加载器：

```
@GrabConfig(systemClassLoader=true)
@Grab(group='net.java.dev.jets3t', module='jets3t', version='0.9.4') 
```*

# wpf - 是否有在 XAML 中应用 Binding.ValidationRules 的简洁方法

> ID：10144191
> 
> 赞同：2
> 
> 时间：2012-04-13T15:53:41.153
> 
> 标签：wpf, xaml, data-binding

我正在研究 WPF/XAML 中某些数据输入表单的验证规则。通过将验证规则显式应用于字段绑定，我已经能够获得我想要的用户体验：

```
<Binding 
        Path="qtyoffset"
        NotifyOnValidationError="True"
        ValidatesOnDataErrors="True"
        UpdateSourceTrigger="PropertyChanged"
        >
    <Binding.ValidationRules>
        <utility:DecimalValidationRule precision="1" />
    </Binding.ValidationRules>
</Binding> 
```

使用上述方法，每次按键都会验证该字段。如果用户输入“X”，该字段立即被标记为无效，错误消息显示在适当的位置，“提交”按钮立即被禁用，等等。一切都很好。如果用户在小数点后输入两位数，输入两位小数等，也会发生同样的情况。

我唯一的问题是冗长。上面的绑定代码需要为每个字段提供，如果在一个字段上不完全正确，则该字段将不太正确。我宁愿只指定绑定路径，并自动添加其余部分。在每个绑定上设置 NotifyOnValidationError、ValidatesOnDataErrors 和 UpdateSourceTrigger，根据绑定的类型设置适用于特定数据类型的验证规则。或者，至少，根据我在 XAML 中指定的类型。

我正在考虑在 JQuery 中进行验证的方式。我没有静态列出每个输入元素上的所有验证规则，而是设置了许多类。然后，在加载时，我会使用 JQuery 的 DOM 搜索功能来查找具有特定类集的每个输入元素，并动态添加适当的验证功能。

XAML 提供了一种非常好的方式来为显示元素提供这种简洁的配置，使用样式和设置器。但这不适用于绑定。

有没有合理的替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:05:41.197

简短的回答：不，不是。

但是你可以做两件事：

*   你可以把

    ```
     NotifyOnValidationError="True"
        ValidatesOnDataErrors="True"
        UpdateSourceTrigger="PropertyChanged" 
    ```

在资源中访问它们`StaticResource`，以排除冗余信息，然后您可以在一个地方更改所有这些属性。

*   您可以基于 Binding制作自己的[标记扩展。](http://www.hardcodet.net/2008/04/wpf-custom-binding-class)这将使 XAML 声明更短。你可以像这样使用它： `<TextBox Text={local:DecimalBinding Path=qtyoffset} />`

高温下，

呸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:09:35.090

对于您的需求，这可能是多余的，但是您可以做的一件事是对 WPF UserControl 进行子类化，然后在加载 UserControl 以及应用新绑定时编写一个函数，该函数沿着可视化树查找 Bindings相关类型并将验证应用于它们。

# javascript - 如何使用嵌套的 JSON 对象构建 JSON 对象

> ID：10144193
> 
> 赞同：0
> 
> 时间：2012-04-13T15:53:47.433
> 
> 标签：javascript, json

我正在用 Javascript 构建一个带有嵌套对象的 JSON 对象。有没有一种简单的方法可以在不使用 eval() 的情况下在 Javascript 中执行此操作？

```
var data_json = "data = {'"+field_name+"':{'answers':{";
for(var i=0; i<answers.length; i++){
    data_json += "'" + i + "':" + "'" + answers[i] + "',";
}
data_json = data_json.replace(/,$/,"");
data_json = data_json + "}}}";

eval(data_json); 
```

结果：

```
data={'myfield':{'answers':{'0':'The answer', '1':'Another answer'}}}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T15:56:54.427

```
var a, data = {};
data[field_name] = { "answers" : { } };
a = data[field_name]["answers"];

for(var i=0; i<answers.length; i++){
   a[i] = answers[i];
}

console.log(data); 
```

作为旁注，如果`data[field_name]["answers"]`只包含数字键，它应该是一个数组而不是一个对象，所以`data[field_name]`应该是`= { "answers" : [ ]};`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T15:57:33.593

就个人而言，我会使用 JSON.stringify 将您的 javascript 对象转换为 json 字符串格式。

查看这些以获取更多信息。

[http://msdn.microsoft.com/en-us/library/cc836459(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc836459(v=vs.85).aspx)

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)

你也可以使用 JSON.parse 去另一种方式（从字符串到对象）

```
var myObject = JSON.parse(myJSONtext, reviver); 
```

[http://www.json.org/js.html](http://www.json.org/js.html)

# java - Guava 如何过期其 CacheBuilder 中的条目？

> ID：10144194
> 
> 赞同：27
> 
> 时间：2012-04-13T15:53:47.590
> 
> 标签：java, caching, collections, map, guava

我想使用 CacheBuilder，这里推荐：

[带有过期键的 Java 基于时间的映射/缓存](https://stackoverflow.com/questions/3802370/java-time-based-map-with-expiring-keys)

但是我不明白Guava 什么*时候*知道条目过期。

Guava 是如何做到这一点的，它会产生什么性能成本？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-13T16:15:26.233

Guava 团队成员在这里。

Guava`Cache`实现在正常维护操作过程中使条目过期，这在缓存写入操作期间以每个段为基础发生，偶尔在缓存读取操作期间发生。条目通常不会在*确切*的到期时间到期，只是因为`Cache`故意决定不创建自己的维护线程，而是让用户决定是否需要持续维护。

我将专注于`expireAfterAccess`，但过程`expireAfterWrite`几乎相同。就机制而言，当您在 中指定`expireAfterAccess`时`CacheBuilder`，缓存的每个段都会为条目维护一个链表访问队列，按照从最近最少访问到最近访问的顺序排列。缓存条目实际上是链表中的节点，所以当一个条目被访问时，它会将自己从访问队列中的旧位置移除，并将自己移动到队列的末尾。

执行缓存维护时，缓存所要做的就是使队列前面的每个条目都过期，直到找到未过期的条目。这很简单并且需要相对较少的开销，并且它发生在正常的缓存维护过程中。（此外，缓存有意限制了单次清理中完成的工作量，从而最大限度地减少了任何单次缓存操作的费用。）通常，缓存维护的成本主要由计算缓存中实际条目的费用决定。

# asp.net - 从 Crystal Reports 查看器（ActiveX、ASP.Net）打印 Crystal Reports

> ID：10144196
> 
> 赞同：1
> 
> 时间：2012-04-13T15:53:54.860
> 
> 标签：asp.net, crystal-reports

我在尝试从 ASP.Net 页面打印 Crystal Reports 报告时遇到了一些严重问题。这是当前的设置：

*   Crystal Reports 查看器设置在页面上。查看报告时报告显示正常。
*   报表查看器 PrintMode 设置为 ActiveX
*   根据 SAP 的建议（在他们的知识库文章之一中找到），我正在从会话变量设置报告数据源。通过调用 WCF 服务设置报表数据源。传递到报告中的数据很好。（同样，报告显示得很好，显示所有内容都应该如此）。
*   ASP.Net 应用程序和相关服务的构建目标是 x86。
*   一切都使用 Crystal Reports 版本 13，ASP.Net Web 应用程序使用 .Net 4。它正在 Internet Explorer 8 中查看。
*   我已经尝试检查 Internet Explorer 8 上的 ActiveX 设置，它们都不应该是问题（一切都设置为允许或提示）。
*   无论是从 IDE 还是从单独服务器上的设置网站运行它，都会发生错误。
*   另一台服务器上 IIS 中的应用程序池设置被设置为允许 32 位应用程序。

当我单击报表查看器上的打印图标时，我收到以下错误消息：

“发生通信错误。将停止打印。”

同样的错误发生在不止一台机器上。如果我在错误消息上单击“确定”，下面的对话框会显示“正在加载 Crystal Reports 打印控件，请稍候。”。如果我等待，什么都不会发生。没有提示安装 ActiveX 控件，也没有弹出任何内容允许我选择打印机（我知道其中安装了几个）。

我试过做以下事情，但都没有奏效：

*   将报告类型切换为 PDF。如果我这样做，然后单击报告查看器上的打印按钮，我会收到以下错误：

Microsoft JScript 运行时错误：需要对象。”

它特别打破了这一行：

bobj.crv.stateManager.setComponentState('MainContent_reportViewer_UI *',eval('('+document.getElementById('* _CRYSTALSTATEctl00$MainContent$reportViewer').value+')'));

报告中有几个动态图像，但在查看报告时它们都正确显示。它们是我能想到的与此报告相关联的唯一二进制对象。错误发生在为页面动态创建的代码中——不是我写的。

*   我尝试从正确的 .cab 文件手动安装 ActiveX 控件。这在任何情况下都没有区别。
*   我已经安装了最新的 Crystal Reports 服务包（服务包 3）。同样，这并没有改变任何东西。
*   根据我遇到的一些论坛帖子的建议，我已尝试在默认网站内为 CrystalReportViewers13 设置虚拟目录。这也没有任何效果。
*   在页面上启用 ViewState 对打印是否有效没有影响。
*   我尝试添加我自己的打印按钮和一个包含可用打印机列表的下拉列表。当我单击自己的自定义打印按钮并调用 PrintToPrinter() 时，我收到与尝试打印 PDF 报告相同的错误消息：

“Microsoft JScript 运行时错误：需要对象”

...并且它在单击“打印”按钮时尝试打印 PDF 报告时在同一行中断。

至少一天以来，我一直在反对这一点，而且我还没有什么想法。任何人都知道可能导致这种情况的原因是什么？

编辑：

好吧，这就是我为了让事情正常工作而做的事情。它最终比我想象的要简单得多：

*   将整个 ReportDocument 填充到会话中。您的页面加载应如下所示：

    ```
    protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["report"] != null)
        {
            reportViewer.ReportSource = Session["report"];
        }

        BuildReport();
    } 
    ```

*   使 ReportViewer 尽可能简单 - 不要指定报告类型（PDF 或 ActiveX）。将其设置为任何东西似乎都会导致问题。这是它在页面源代码中的样子：

......就是这样。我不敢相信我花了大约一天的时间试图让它工作，结果却如此简单。希望这篇文章可以帮助其他面临同样问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:29:49.583

如果您收到大量用户请求，将整个报告存储在会话中是个坏主意。

在使用水晶报表时，您必须在发送响应之前重新初始化报表及其登录名和数据源、每个请求中的参数等（回发或不回发无关紧要）。Crystal 报表不保持完整的视图状态，这就是它每次都应该重新初始化的原因。

我认为您在回发请求期间没有重新初始化，因此出现错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T16:25:58.927

省去头痛并禁用 activeX 打印。它会使用临时文件炸毁您的 Web 服务器，仅适用于 IE，并且仅限于您可以同时打印的报告数量。将打印模式设置为 Pdf 并完成。很多浏览器都可以直接打印pdf。

```
crViewer.PrintMode = PrintMode.Pdf; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T11:47:05.480

我知道这个问题很老，但我想我会插话以防其他人有这个问题。

我发现[这个页面](http://forums.asp.net/t/1693771.aspx/1)有很多选项可以解决我认为与您的问题非常相似的问题。我收到了标题为“bobj is undefined”的错误，但真正归结为 IIS 无法找到 Crystal 的 JS 文件的正确路径。

对于我自己，我最终将一些文件夹放在我网站根目录 (wwwroot) 的 aspnet_client 目录中，并确保 NETWORK_SERVICE 可以访问 aspnet_client 文件夹。我必须对我的 x86 SAP 文件夹中的“crystalreportviewers”文件夹执行相同的操作

'C:\Program Files (x86)\SAP BusinessObjects\Crystal Reports 20XX\crystalreportviewers'

我还必须将该站点的配置添加到我的 web.config 中...然后查看器开始正常工作。

希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-13T08:33:21.300

我遇到了类似的问题，在页面上正确生成了报告，但是当我尝试缩放时，它说“没有可用的有效报告源”。为了克服这个问题，我只是在每次加载页面时加载报告，**无论是 Postback 还是 normal load**。

还要确保您正确处理 Crystal Report 文档，否则它可能会开始出现“Load Report Failed”错误。

# vba - 使用变量而不是单元格的 VBA 目标搜索

> ID：10144205
> 
> 赞同：1
> 
> 时间：2012-04-13T15:54:23.003
> 
> 标签：vba, excel, variables

我需要在我的 VBA 代码中使用Goalseek，而不是在我的电子表格中为目标“CELL”寻找目标，我需要在我的 VBA 代码中为“VARIABLE”寻找目标。

例如，我需要设置在我的 VBA 代码中声明的目标变量，而不是将某些目标 CELL 设置为“A3”。

当然，同样适用于“通过更改”字段。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:01:47.520

使用屏幕外的单元格位置进行计算，然后在该过程完成后，将单元格值加载到您的变量中，例如：

```
...GoalSeek ... ChangingCell:=Worksheets("Sheet1").Cells("A5000")
MyVar = Worksheets("Sheet1").Cells("A5000").Value 
```

# html - 告诉表单提交的字段顺序

> ID：10144206
> 
> 赞同：3
> 
> 时间：2012-04-13T15:54:24.047
> 
> 标签：html, forms, submit

我有一个表单，它允许用户将输入（使用 jQuery）移动到他们想要的任何顺序。对于下面的表单，用户可能希望“fieldD”后跟“fieldA”、“fieldB”、“fieldC”。

示例表格：

```
<form id="myForm" method="post">  
  <input type="submit">
  <table>
       <tr><td><input type="text" name="fieldA"></td></tr>
       <tr><td><input type="text" name="fieldB"></td></tr>
       <tr><td><input type="text" name="fieldC"></td></tr>
       <tr><td><input type="text" name="fieldD"></td></tr> 
  </table>  
</form> 
```

捕获用户在提交表单时选择的顺序的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:08:30.130

在过去，我做了以下事情：

```
<form id="myForm" method="post">  
  <input type="submit">
  <table>
       <tr><td><input type="text" name="fieldA"></td></tr>
       <tr><td><input type="text" name="fieldB"></td></tr>
       <tr><td><input type="text" name="fieldC"></td></tr>
       <tr><td><input type="text" name="fieldD"></td></tr> 
  </table>  
  <input type="hidden" name="fields" value="fieldA,fieldB,fieldC,fieldD" />
</form> 
```

即，添加了一个隐藏字段，其字段名称以正确的顺序排列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:58:10.763

您可以将这些输入值存储在一个数组中并对字段名称进行编号：

```
<form id="myForm" method="post">  
    <input type="submit">
    <input type="text" name="field[1]" />
    <input type="text" name="field[2]" />
    <input type="text" name="field[3]" />
    <input type="text" name="field[4]" />
</form> 
```

每次完成排序操作后，都需要重写字段名称。

```
// this will result in a PHP-array, e.g.
$_POST['field'][0]

foreach( $_POST['field'] as $indexAsSetViaJs => $fieldValue ) {
    // process values in desired order
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T16:01:03.630

从答案中汲取灵感，我最终使用 jQuery 遍历我的表以确定排序。当我实际实现它时，我会在提交表单时确定排序（通过遍历我的表）。

这是一个演示该概念的jsfiddle：

[http://jsfiddle.net/kq8tT/6/](http://jsfiddle.net/kq8tT/6/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-13T16:05:08.927

根据规范，表单数据中字段的顺序是未定义的。在实践中，它往往是文本订单，但特别是如果订单在客户端更改，我不会指望它。

最好的方法可能是创建一个字段名称数组，并在更改顺序时对其进行修改。如果在没有客户端脚本的情况下使用页面是有意义的，那么最安全的做法是包含一个隐藏字段，以文本顺序包含字段，并在提交表单数据时用数组中的数据动态替换其内容.

# php - 将 Android 数据库与服务器数据库同步

> ID：10144209
> 
> 赞同：4
> 
> 时间：2012-04-13T15:54:35.653
> 
> 标签：php, android, mysql, database, synchronization

我有一个带有两个数据库的 Android 应用程序。我需要将它们与 Web 服务器上的两个相同（相同的字段结构和字段名称）数据库同步。但首先我需要查看网络服务器上的另一个数据库，从中提取一些信息，然后将这两个数据库与第一个数据库中的一些附加数据同步。我已经在 Android 应用程序上工作了一段时间，我刚刚学会了足够的 PHP 和 MySQL 来构建一个具有基本 CRUD 的 Web 应用程序。

我有一些问题：

*   如何在 Android 中同步这些数据库？

*   同步可以双向工作吗？如果我在 Android 中更改数据库数据，我可以在 Web 服务器上相应地更改它们吗？反之亦然？

我正在为老年人开发一个基本的 GUI，以便他们可以使用 Android 手机。我的 Web 应用程序应该将联系人和提醒添加到 Android 应用程序的数据库中，但是当我在我的 Android 应用程序中手动添加联系人或提醒时，我也希望在我的 Web 应用程序中看到它们（双向同步）。

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:02:39.083

我认为您基本上想要做的是创建一个 API 来桥接设备上的数据和服务器上的数据。

在从头开始创建基本 API 时，这个[网站帮助了我很多。](http://www.gen-x-design.com/archives/create-a-rest-api-with-php/)您必须了解 GET 和 POST 如何工作的基础知识，但是一旦您了解了为简单数据传输制作 API 的过程就非常简单了。

如果您真的想简化使用 API 创建数据库的过程，我建议您查看一个名为[StackMob](http://stackmob.com/)的服务。该服务允许您设置一些非常简单（和复杂）的表格，并生成 API 来帮助您将这些表格连接到 HTML5、iOS 和 Android。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-15T12:46:54.213

我将分享如何使用 PHP 文件在 Android 应用程序和 PHP 服务器之间同步数据，它比 Web 服务等更容易。它给出相同的结果和相同的返回。

**查询**

*** - > PHP端：***

*   例如，创建您的表结构： MyTableName ：列 Login / Password
*   创建一个 PHP 文件以从您的表名中查询数据

    ```
    <?php
    //To Connect to your Data base
      mysql_connect("localhost","root","");
      mysql_select_db("YourDataBaseName");
    // To execute a query from Your table

      $sql=mysql_query("SELECT *  FROM `Your_Table_Name");

      while($row=mysql_fetch_assoc($sql))
      $output[]=$row;

     // Convert to Json format 
     print(json_encode($output));
     // mysql_close();
    ?> 
    ```

*   将您的 PHP 文件命名为您的表格名称，例如：MyTableName.php

*   将此文件放在您的根服务器目录中：例如在 Wamp 服务器中的 www 目录

*   使用浏览器测试返回数据，使用您的 URL，如 [www.localhost/MyTableName.php](http://www.localhost/MyTableName.php)，通常您将获得所有 Json 格式的查询内容。

*** -> 安卓端：***

*   下载这个类'ClientHTTP' [https://www.dropbox.com/s/odpaus1tjhd9orv/ClientHTTP.java](https://www.dropbox.com/s/odpaus1tjhd9orv/ClientHTTP.java)

*   在清单中添加 Internet 权限。

*   在单击按钮 Synchronize put 内：

    ```
    String lReturn=_myClientHtpp.readFromUrl(www.localhost/MyTableName.php);
    // It will return a json format (Like navigator)
    //Code to Clear your data from Sqlite data base  TABLE ....

     try {
     // Create your Json Array
     JSONArray lList=new JSONArray(lReturn);
     // Iterate the json arry to get each Json object
     for (int i = 0; i < lList.length(); i++) {

    JSONObject lObject=lList.getJSONObject(i);

    String lLogin=lObject.getString("Login");
    String lPWD=lObject.getString("PassWord");

    //Code to Insert in Sqlite data base .....
    }
    } catch (JSONException e) {
     e.printStackTrace();
    } 
    ```

**更新**

*** - > PHP端：***

```
<?php
//Connect to Database
  mysql_connect("localhost","root","");
  mysql_select_db("YourDataBase");

 $sql= mysql_query("INSERT INTO YourTableName (Login,PassWord) VALUES ('".$_REQUEST['PARAM_Login']."','".$_REQUEST['PARAM_PWD']."')");

 if($sql==1){
 echo "true";
 }else{
 echo "false";
 }

// mysql_close();
?> 
```

*   将此 PHP 文件放在您的主服务器目录 www 中，并将其命名为 Insert.php
*   使用带有此 URL [www.localhost/insert.php?PARAM_LOGIN=test&PARAM_PWD=test的浏览器测试您的插入](http://www.localhost/innsert.php?PARAM_LOGIN=test&PARAM_PWD=test)
*   通常，您会得到“True”，并且在您的服务器表名中将添加一个带有 test / test 的新行。

*** -> 安卓端：***

*   在单击“添加”按钮内写入：

    ```
     // List of params
    ArrayList<NameValuePair> lListOfParams=new ArrayList<NameValuePair>();

    // Param login
    BasicNameValuePair PARAM_Login=new BasicNameValuePair("PARAM_Login", "test from Android");
    // Param PWD
    BasicNameValuePair PARAM_PWd=new BasicNameValuePair("PARAM_PWD", "Test from Android");

    // Add params to List
    lListParams.add(PARAM_Login);
    lListParams.add(PARAM_PWd);

    // Execute the post method from your ClientHttp class
    boolean lIsInsert=_myClientHtpp.SendToUrl("www.localhost/insert.php", lListOfParams);

    if(lIsInsert)
        Toast.makeText(this, "Insert Success", Toast.LENGTH_LONG).show();
    else
        Toast.makeText(this, "Insert Error", Toast.LENGTH_LONG).show(); 
    ```

*   如果您有自己的服务器，请根据您的域名替换 localhost。

*   如果您使用的是模拟器，请根据您的实际 IP 地址替换您的 localhost 域名
    ，例如查询 URL 变为：192.168.1.2/MyTableName.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T07:26:59.453

您需要开发 Web 服务来实现同步。我使用 SOAP 协议在 android 应用程序和 asp.net 应用程序之间建立通信。基本上，我们已经开发了游戏应用程序，在 asp.net 和 sql server 2008 中具有管理面板和服务器数据库，而 android 应用程序具有 SQLite 数据库。这两个数据库都通过 Web 服务进行同步。您还可以使用 RESTful Web 服务而不是 SOAP

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T16:18:00.750

您需要一个 WebService，以便您可以与数据库服务器和 Android 设备进行通信。

开发 Web 服务：它应该具有从数据库服务器获取数据并返回到数据库服务器的逻辑。

在 Android 端，您可以使用 KSoap 来使用 Web 服务。[请在此处查看此示例。](https://stackoverflow.com/questions/3730312/how-to-call-a-php-webservice-from-android-using-ksoap2)

# java - Java Jar 文件：使用资源错误：URI 不是分层的

> ID：10144210
> 
> 赞同：72
> 
> 时间：2012-04-13T15:54:36.000
> 
> 标签：java, deployment, resources, executable-jar

我已将我的应用程序部署到 jar 文件。当我需要将数据从一个资源文件复制到 jar 文件之外时，我执行以下代码：

```
URL resourceUrl = getClass().getResource("/resource/data.sav");
File src = new File(resourceUrl.toURI()); //ERROR HERE
File dst = new File(CurrentPath()+"data.sav");  //CurrentPath: path of jar file don't include jar file name
FileInputStream in = new FileInputStream(src);
FileOutputStream out = new FileOutputStream(dst);
 // some excute code here 
```

我遇到的错误是：`URI is not hierarchical`。在IDE中运行时我没有遇到这个错误。

如果我将上面的代码更改为对 StackOverFlow 上其他帖子的帮助：

```
InputStream in = Model.class.getClassLoader().getResourceAsStream("/resource/data.sav");
File dst = new File(CurrentPath() + "data.sav");
FileOutputStream out = new FileOutputStream(dst);
//....
byte[] buf = new byte[1024];
int len;
while ((len = in.read(buf)) > 0) { //NULL POINTER EXCEPTION
  //....
} 
```

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-04-13T16:32:11.283

你不可以做这个

```
File src = new File(resourceUrl.toURI()); //ERROR HERE 
```

它不是一个文件！当您从 ide 运行时，您没有任何错误，因为您没有运行 jar 文件。在 IDE 中，类和资源被提取到文件系统上。

但是你可以这样打开一个`InputStream`：

```
InputStream in = Model.class.getClassLoader().getResourceAsStream("/data.sav"); 
```

删除`"/resource"`. 通常，IDE 将文件系统类和资源分开。但是当罐子被创建时，它们被放在一起。所以文件夹级别`"/resource"`只用于类和资源的分离。

当您从类加载器获取资源时，您必须指定资源在 jar 中的路径，即真正的包层次结构。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-06-21T15:26:41.440

如果由于某种原因您确实需要创建一个`java.io.File`对象来指向 Jar 文件中的资源，那么答案就在这里：[https ://stackoverflow.com/a/27149287/155167](https://stackoverflow.com/a/27149287/155167)

```
File f = new File(getClass().getResource("/MyResource").toExternalForm()); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-05-30T11:04:57.227

这是 Eclipse RCP / Plugin 开发人员的解决方案：

```
Bundle bundle = Platform.getBundle("resource_from_some_plugin");
URL fileURL = bundle.getEntry("files/test.txt");
File file = null;
try {
   URL resolvedFileURL = FileLocator.toFileURL(fileURL);

   // We need to use the 3-arg constructor of URI in order to properly escape file system chars
   URI resolvedURI = new URI(resolvedFileURL.getProtocol(), resolvedFileURL.getPath(), null);
   File file = new File(resolvedURI);
} catch (URISyntaxException e1) {
    e1.printStackTrace();
} catch (IOException e1) {
    e1.printStackTrace();
} 
```

`FileLocator.toFileURL(fileURL)`使用而不是非常重要`resolve(fileURL)` ，因为当插件被打包到 jar 中时，这将导致 Eclipse 在临时位置创建一个解压缩版本，以便可以使用 File 访问该对象。例如，我猜 Lars Vogel 在他的文章中有一个错误 - [http://blog.vogella.com/2010/07/06/reading-resources-from-plugin/](http://blog.vogella.com/2010/07/06/reading-resources-from-plugin/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-25T03:22:11.613

我之前遇到过类似的问题，我使用了代码：

```
new File(new URI(url.toString().replace(" ","%20")).getSchemeSpecificPart()); 
```

而不是代码：

```
new File(new URI(url.toURI()) 
```

解决问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-10T16:32:43.957

虽然我自己偶然发现了这个问题，但我想添加另一个选项（来自@dash1e 的完美解释）：

通过添加以下内容将插件导出为文件夹（而不是 jar）：

```
Eclipse-BundleShape: dir 
```

到你的`MANIFEST.MF`.

至少当您使用导出向导（基于`*.product`）文件导出您的 RCP 应用程序时，这会得到尊重并会生成一个文件夹。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-12T14:22:31.777

除了一般答案之外，您还可以从尝试从文件加载数据*集的***Unitils**库中获得“URI 不是分层的” 。当您将数据集保存在一个 Maven 子模块中，但在另一个子模块中进行实际测试时，可能会发生这种情况。*`.jar`*

 *甚至还提交了一个[错误 UNI-197 。](https://unitils.atlassian.net/browse/UNI-197)*

# mysql - 根据mysql查询写一个字符串

> ID：10144212
> 
> 赞同：0
> 
> 时间：2012-04-13T15:54:44.600
> 
> 标签：mysql, subquery

如果我有一个返回名字和姓氏的查询，我将如何将它们组合到 1 个字段中？

我希望能够选择一个 id - 然后根据该 id 找到名字和姓氏，然后将它们连接起来以获得最终返回的字符串。

我正在处理一个复杂的查询，其中返回了许多列 - 过去我已经进行了更多查询，并使用 php.ini 替换了一些值。但我想让这一切都在原始查询中工作。

现在我正在做类似的事情：

```
SELECT id From....etc 
```

然后在 php 中我执行此查询并将 id 替换为返回的名字和姓氏值

```
SELECT lastName, firstName FROM people, patient WHERE idpatient = $data AND people_id = id 
```

然后将结果更改为：

id:1 ---> id: 姓，名

有没有办法将这两个查询合并为一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T15:57:50.940

对于您问题的第一部分，请使用 CONCAT

```
SELECT CONCAT( lastName, firstName ) AS full_name 
FROM people, patient 
WHERE idpatient = $data AND people_id = id 
```

此外，您可以使用显式 JOIN 重写此查询

```
SELECT CONCAT( lastName, firstName ) AS full_name 
FROM people
    INNER JOIN patient ON people_id = id
WHERE idpatient = $data 
```

如果您只对在患者中有条目的人的行感兴趣，或者

```
SELECT CONCAT( lastName, firstName ) AS full_name 
FROM people
    LEFT JOIN patient ON people_id = id
WHERE idpatient = $data 
```

如果您还对可能在患者中没有条目的人的行感兴趣。

# php - PHP：从 CodeMirror 保存和显示用户代码的安全方式

> ID：10144216
> 
> 赞同：0
> 
> 时间：2012-04-13T15:54:53.720
> 
> 标签：php, security, codemirror, stripslashes

[我正在使用CodeMirror](http://CodeMirror.net)设置一个简单的基于 Web 的代码编辑器，以帮助学生学习基本的 HTML、CSS 和 JavaScript。

我希望学生们能够保存他们的代码，这样它就可以在一个独立的浏览器窗口中看到，它有自己的链接，可以与朋友和家人共享以展示他们的工作（即 mydomain.com/users/ *their-用户名*/test.html)。

我目前有以下 PHP，但我知道我的使用`$content`根本不安全：

```
if ($_POST['type'] == 'save') {

  $content = stripslashes($_POST['code']);
  $username = addslashes(strip_tags($_POST['username']))); //i.e. markrummel
  $filename = addslashes(strip_tags($_POST['filename']))); //i.e. test, index
  $ext = addslashes(strip_tags($_POST['filetype']))); //i.e. html, css, js
  $path = '/users/' . $username . '/';
  $URL = $path . $filename . '.' . $ext;

  file_put_contents($URL, $content);

} 
```

在大多数情况下`$content`应该是安全的 HTML、CSS 或 JavaScript，例如：`<p>My name is Mark</p>`，但我想做好准备，以防万一将恶意内容放入代码编辑器进行保存。

关于如何安全地保存和显示他们的代码的任何建议？有没有办法将每个用户的文件夹与其他用户文件夹和网站的其余部分隔离/沙箱？

也许没有安全的方法可以做到这一点，我不应该允许我不信任的任何人将代码保存到我的服务器，但如果有一种安全的方法可以做到这一点......那对这个项目来说会很棒！如果没有，我会想出别的办法。

感谢您提供的任何帮助或见解！-标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T17:31:12.003

`addslashes`根本`stripslashes`不为你做任何事。我不确定您要对它们做什么，但对字符串进行斜线处理对于文件名处理或您可能在 web 应用程序中遇到的任何上下文都不是一种有用的编码形式。

`strip_tags`对于与文件名有关的任何事情也没有用；它从字符串中删除 HTML（但即便如此，它也不能以一种足够好的方式正确地用作防止 HTML 注入的防护措施）。

```
$URL = $path . $filename . '.' . $ext;
file_put_contents($URL, $content); 
```

是的，这是非常不安全的。通过将`..`段放入用户名或文件名中，攻击者可以将文件存储在根路径之外。完全控制文件名，包括可以包含可执行文件（如 .php）或其他敏感文件（如 .php）的扩展名`.htaccess`。（即使`$ext`仅限于已知良好的值，根据您的服务器运行的操作系统，也有可能逃避该扩展附加。）

虽然可以通过限制文件名中可以​​使用的字符来清理文件名，但是当你可能运行时，要做到无懈可击比你想象的要难。Windows 服务器。自己生成文件名（例如，使用唯一的整数 ID 而不是攻击者提供的文件名）以存储在本地文件系统上几乎总是更好。您始终可以使用重写来使文件看起来具有不同的地址。

> 在大多数情况下，$content 应该是安全的 HTML、CSS 或 JavaScript

你确定那是安全的吗？

如果您从域内部提供一些用户提供的脚本，它可以控制您的任何用户在站点内所做的一切。它可以覆盖或伪造您拥有的任何用户级安全控制，以其他用户的名义上传文件等等。

您可以尝试对提交的 HTML 进行清理以使其仅使用安全标签，但这很难做到，而且如果您*想*允许用户运行 CSS/JS，那也毫无用处！

> 有没有办法将每个用户的文件夹与其他用户文件夹和网站的其余部分隔离/沙箱？

是的。从不同的主机名服务每个区域。例如。将主站点`http://www.example.com/`与沙箱放在`http://tom.users.example.com/`，`http://dick.users.example.com/`依此类推。

这可以防止直接跨站点脚本。为确保沙盒站点无法从主站点读取 cookie，请确保它也未在其上运行`example.com`（将其重定向到`www.example.com`）。

这不是一个完整的沙箱。如果您需要确保沙箱站点不能将 cookie 写入其他站点（可能会通过停止它们自己的 cookie 工作来破坏它们，那么您别无选择，只能在其自己的完整域中运行每个沙箱。如果您必须防范 Java 插件 URL 连接，每个沙箱都需要自己的 IP 地址。这很快就会变得昂贵！但这些攻击不那么严重。

# php - 如何获取包含内容作为字符串？

> ID：10144222
> 
> 赞同：9
> 
> 时间：2012-04-13T15:55:32.393
> 
> 标签：php, include

> **可能重复：**
> [执行 PHP 文件，并将结果作为字符串返回](https://stackoverflow.com/questions/1683771/execute-a-php-file-and-return-the-result-as-a-string)
> [PHP 捕获 print/require output in variable](https://stackoverflow.com/questions/4798142/php-capture-print-require-output-in-variable)

我正在尝试将包含的内容添加到字符串中。那可能吗？

例如，如果我有一个 test.php 文件：

```
echo 'a is equal to '.$a; 
```

我需要一个函数，比如 include_to_string 来包含 test.php 并返回字符串中的 in 输出内容。

就像是：

```
$a = 4;
$string = include_to_string(test.php); // $string = "a is equal to 4" 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-13T15:58:11.537

```
ob_start();
include 'test.php';
$string = ob_get_clean(); 
```

我想这就是你想要的。请参阅[输出缓冲](http://php.net/manual/en/ref.outcontrol.php)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T15:58:27.170

```
ob_start();
include($file);
$contents = ob_get_contents(); // data is now in here
ob_end_clean(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T15:58:31.307

您可以使用[输出缓冲](http://www.php.net/manual/en/function.ob-start.php)来做到这一点：

```
function include2string($file) {
    ob_start();
    include($file);
    return ob_get_clean();
} 
```

@DaveRandom 指出（正确地）将其包装在函数中的问题是您的脚本（$file）将无法访问全局定义的变量。对于动态包含的许多脚本来说，这可能不是问题，但如果这对您来说是个问题，那么可以在函数包装器之外使用此技术（如其他人所示）。

** 导入变量 您可以做的一件事是添加一组您想作为变量公开给脚本的数据。把它想象成将数据传递给模板。

```
function include2string($file, array $vars = array()) {
    extract($vars);
    ob_start();
    include($file);
    return ob_get_clean();
} 
```

你会这样称呼它：

```
include2string('foo.php', array('key' => 'value', 'varibleName' => $variableName)); 
```

现在`$key`并且`$variableName`将在您的 foo.php 文件中可见。

如果您觉得更清楚，您还可以为您的脚本“导入”一个全局变量列表。

```
function include2string($file, array $import = array()) {
    extract(array_intersect_key($GLOBALS, array_fill_keys($import, 1)));
    ob_start();
    include($file);
    return ob_get_clean();
} 
```

你可以调用它，提供一个你想暴露给脚本的全局变量列表：

```
$foo='bar';
$boo='far';
include2string('foo.php', array('foo')); 
```

`foo.php`应该可以看到`foo`，但是没有`boo`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T16:03:38.777

您也可以在下面使用它，但我推荐上面的答案。

```
// How 1th
$File = 'filepath';
$Content = file_get_contents($File);

echo $Content;

// How 2th  
function FileGetContents($File){
    if(!file_exists($File)){
        return null;
    }

    $Content = file_get_contents($File);
    return $Content;
}

$FileContent = FileGetContents('filepath');
echo $FileContent; 
```

PHP 手册中的函数：[file_get_contents](http://php.net/manual/fr/function.file-get-contents.php)

# oracle - 如何避免触发器中的 ORA-04091 错误

> ID：10144224
> 
> 赞同：1
> 
> 时间：2012-04-13T15:55:45.940
> 
> 标签：oracle, plsql, mutating-table

我在表 A 上有一个更新后触发器（触发器 A），它可以对表 B 进行更改。

我在表 B 上还有一个更新后触发器（触发器 B），它没有进行任何更改，但查询表 A 以对非规范化进行一些健全性检查。

所以触发器 B 可以触发以下两种方式之一：

1.  如果我直接更新表 B，或者
2.  如果我更新表 A 并且触发器 A 触发，导致表 B 更新。

在案例 2 中，我得到一个 ORA-04091: table name is mutating, trigger/function may not see it error。这似乎是正确的。

我想在触发器 B 中检查表 A 是否“处于错误状态”并提前退出（在这种情况下不需要运行健全性检查）。

在我的触发器中测试它的最佳方法是什么？只需添加一个吞下异常的异常处理程序？还有比这更优雅的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:09:58.410

您可以让 A 上的触发器做一些事情来提醒 B 上的触发器它不需要触发。有各种希望为会话设置某种状态。最简单的可能方法是创建一个带有布尔变量的包，`bypass_checks_on_b`在执行A`TRUE`之前设置为，一旦完成，然后在 B 上的触发器中检查此变量的状态，然后再执行验证。您也可以对临时表或上下文执行类似的操作，而不是使用包。效率较低，您可能会解析 B 上的触发器内的调用堆栈，以查看 A 上的触发器是否在调用堆栈中，但这往往会相当难看。`UPDATE``FALSE``UPDATE`

不过，我会对整个架构非常谨慎。当您发现 A 上的触发器导致 B 上的触发器触发想要查询 A 时，几乎总是这样的情况是您在触发器中放置了太多逻辑并且您会更好地移动将该逻辑放入可以调用的存储过程层，而不是应用程序执行直接插入或更新。当您将太多逻辑推入触发器时，您最终会得到一个非常难以理解的系统，因为从应用程序代码中看各种语句具有什么样的副作用并不明显。你最终会得到非常有状态的代码，根据调用者的不同，你有许多通过单个代码的路径。这几乎可以肯定意味着会有一些州你不测试或不测试' 不要想你会在哪里发现你的代码做了一些意想不到的事情。在拥有大量状态和拥有大量副作用的代码库之间，您可以非常快速地构建一个本质上不可维护的代码库。

# html - 让花车流过而不是落在彼此下方

> ID：10144225
> 
> 赞同：0
> 
> 时间：2012-04-13T15:55:46.590
> 
> 标签：html, css, overflow, css-float

我有许多 div `float:left;`，当然它们彼此相邻，但除了浮动 div 不再适合包装器 div。

我需要 div 彼此相邻并在 x 轴上流动。我知道可以通过为包装器设置固定宽度并将包装器包装在另一个包装器中来完成，但宽度不是静态的，并且不喜欢使用脚本来计算宽度。

情况是：

```
<div id="wrapper">
  <div class="floatleft"></div>
  <div class="floatleft"></div>
  <div class="floatleft"></div>
</div>

//Wrapper WITHOUT fixed width
#wrapper{
  overflow:hidden;
}

.floatleft{
  float:left;
  width:500px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:51:41.497

您可以[使用](http://jsfiddle.net/imsky/EbAFw/)`inline-block`http://jsfiddle.net/imsky/EbAFw/`white-space:nowrap`

```
<ul id="wrap">
    <li>A</li><li>B</li><li>C</li><li>D</li><li>E</li>    
</ul>

#wrap {margin:20px;width:300px;height:100px;background:yellow;overflow-x:scroll;overflow-y:hidden;white-space:nowrap}
li {display:inline-block;width:100px;height:100%;background:#5AA4D7;color:#fff;font-family:sans-serif} 
```

唯一的问题是标记将对空格敏感。

编辑：这适用于跨浏览器，IE7 及以下版本只需要规则`*display:inline;zoom:1`末尾的a 。`li`

# silverlight - Silverlight 或 WP7 图像按钮

> ID：10144226
> 
> 赞同：2
> 
> 时间：2012-04-13T15:55:48.053
> 
> 标签：silverlight, windows-phone-7, imagebutton

谁能告诉我这两个例子有什么区别

```
<Button>
    <Image Source="....."/>
</Button> 
```

和

```
<Button>
    <Button.Background>
        <ImageBrush ImageSource="....."/>
    </Button.Background>
</Button> 
```

他们做同样的事情——创建一个图像按钮。但我想知道它们之间的区别。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:58:47.050

第一个设置`Image`为 a `Button.Content`，第二个设置为 a `Background`，所以我很确定当您使用第二个解决方案时，您仍然可以在其上放置一些文本。

# html - CSS - 简单的特异性问题 - '#div-id ul' - 不会覆盖 'ul' 的列表样式

> ID：10144231
> 
> 赞同：0
> 
> 时间：2012-04-13T15:56:49.537
> 
> 标签：html, css, css-specificity

这是一个非常简单的 CSS 特异性问题，但我真的无法以某种方式弄清楚。

在我的样式表中，我有一个从列表中删除列表样式的简单规则：

```
ul { list-style: none; } 
```

然后，对于某些列表，我想指定一个列表样式，但无论如何，它不会覆盖上述规则？

```
#product ul { list-style: bullet !important; } 
```

问题是 UL 经常会被输入到 CMS 中的 WYSIWYG 框中，我不想强​​迫用户必须用 html 编写并给 UL 一个特定的 ID，所以我们经常会得到这样的代码作为：

```
<div id="product">
  <ul>
    <li>One</li>
    <li>Two</li>
    <li>Three</li>
  </ul>
</div> 
```

我有点惊讶这不起作用，除了使用 javascript 给 $('#product ul') 一个特定的类或 css 样式之外，没有办法解决这个问题吗？

--

JSBIN：http: [//jsbin.com/ohuzuz/4](http://jsbin.com/ohuzuz/4)

--

编辑：哎呀，对不起，我有：

```
<div id="#product"> 
```

jsbin 中的一个临时错误，但不是我的原始代码。我的错误，但问题确实是无效的

```
list-style: disc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T16:01:02.360

你的身份证有误

改变：

```
id="#product" 
```

到：

```
id="product" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T16:02:45.900

`bullet`不是有效的列表样式类型值。

此外，如果这不是问题，请检查您是否在任何地方都没有`li`样式。无论特殊性如何，元素的样式都会`li`覆盖元素的样式。`ul`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T16:02:44.627

这是正确的代码。你有错误的 id #product 应该是你的 div 中的产品。

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
<!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<style>
  article, aside, figure, footer, header, hgroup, 
  menu, nav, section { display: block; }

  ul { list-style: none; }

  #product ul, #product ul li { list-style: disc; }

</style>
</head>
<body>
  <p id="hello">Hello World</p>
  <div id="product">
    <ul>
      <li>One</li>
      <li>Two</li>
      <li>Three</li>
    </ul>
  </div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T16:00:19.943

我会去这样的事情，

```
ul { list-style:none; }
#product ul {list-style:disc inside none; } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T16:02:09.877

看起来你的 html 中有一个额外的字符

`<div id="#product">`

删除`#`它应该可以工作。

# mysql - 禁用保留 VARCHAR 列的尾随空格

> ID：10144233
> 
> 赞同：1
> 
> 时间：2012-04-13T15:56:53.687
> 
> 标签：mysql, settings

我们正在考虑从 MySQL 4.x 迁移到 MySQL 5.x。

但是，从 MySQL 5.0.3 开始，VARCHAR 列中保留尾随空格，而在 MySQL 4.x 中，VARCHAR 列中不保留尾随空格。

有人建议可能有一个 MySQL 设置允许我们告诉 MySQL 5.x 的行为与 MySQL 4.x 中的行为一样，并且不保留尾随空格。

我找不到这样的设置，但也许我忽略了它。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:15:09.233

AFAIK 没有用于恢复旧行为的 SQL 模式。如果您的应用程序依赖于这种行为，那么最好的办法可能是使用 BEFORE INSERT TRIGGERS 来修剪 varchar 值。

# java - 嵌入式 Java 应用程序崩溃，无异常且无明显原因

> ID：10144237
> 
> 赞同：2
> 
> 时间：2012-04-13T15:57:12.647
> 
> 标签：java, embedded, busybox

我有一个在嵌入式 linux (BusyBox v1.12.4) 上运行的 Java 应用程序。我使用的是 CDC 1.1，VM (cvm) 的版本是 CDC HI phoneme_advanced-Core-1.1.2-b111。

该应用程序的主要目的是收集一些数据并通过 GPRS 发送（使用 Apache commons library 的 FTPClient）

该应用程序运行良好，然后最近我添加了在发送之前压缩文件的功能。以下是压缩文件的代码：

```
public static boolean compressFile(String file, String fileCompressed)
{
   boolean result = false;

   try
    {
       Process process = Runtime.getRuntime().exec("tar -czvf " + fileCompressed + " " + file);
       System.err.println("Compression in progress");
       int returnValue = process.waitFor();
       System.err.println("Finished compression");
       BufferedReader stderror = new BufferedReader(new InputStreamReader(process.getErrorStream()));

       String s;

       s = stderror.readLine();
       if (s == null)
       {
          result = true;
       } else
       {
          result = false;
       System.err.println(s);
       }
     } catch (IOException e)
     {
          result = false;
          Log.getInstance().newMessage(e.getMessage(), Log.ERROR);

    } catch (InterruptedException e)
    {
          result = false;
          Log.getInstance().newMessage(e.getMessage(), Log.ERROR);
    }

    return result;
} 
```

添加此功能后，应用程序开始崩溃！该日志不包含任何内存错误或异常，并且它运行的系统缺少正确的配置，因此系统日志也没有显示任何内容（设备制造商告诉我它将在即将发布的版本中提供）。我什至无法在调试模式下启动 VM！

我必须补充一点，应用程序在压缩过程中不会崩溃，它只是在执行过程中随机崩溃。问题是它只有在启用压缩时才会崩溃！

有人见过这个吗？有人知道如何调试/解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T01:57:33.297

我将从查看 JVM 的退出代码开始——它会告诉你它是否死于信号，如果是，是哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:07:02.770

`gzip`我怀疑的第一件事是由压缩引擎的执行引起的内存不足的情况。尝试在 shell 中调用`dmesg`以查看[内核 OOM 杀手](http://linux-mm.org/OOM_Killer)是否牺牲了任何进程。

其他一些可以尝试的事情：

*   删除: 您似乎不需要额外的输出的`v`标志，它*可能*会在未来导致某种问题，具体取决于您的确切环境。`tar`

**   `tar`不带选项使用`z`：如果崩溃在禁用压缩的情况下消失，则可能是内存问题。

    *   尝试`cat`，您可以启动的最简单的外部进程之一，而不是`tar`看看会发生什么。

    *   对您的硬件进行压力测试：使用压缩可能只是暴露了通常不可见的潜在过热或数据损坏问题。*

# asp.net - 单击 ASP.Net 中的 FileUpload Browse 按钮 时如何选择多个文件？

> ID：10144238
> 
> 赞同：0
> 
> 时间：2012-04-13T15:57:13.333
> 
> 标签：asp.net, vb.net, dom-events

当我单击 FileUpload 浏览按钮上的浏览时，我希望能够选择多个文件。我现在可以选择一个文件并使用 jQuery 将其添加为列表，但我希望在单击打开时选择要添加的多个文件。有没有一种简单的方法可以做到这一点，是否有某种 Javascript 可以处理这个事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:03:33.590

[以这种方式](http://www.codeproject.com/Articles/68374/Upload-Multiple-Files-in-ASP-NET-using-jQuery)尝试或在[那里](http://www.telerik.com/products/aspnet-ajax/upload.aspx)或[那里](http://www.mediachase.com/fuploader/examples.aspx)或[那里](http://ajaxuploader.com/)寻找支付组件

# oracle-apex - APEX 3.2：页面提交后弹出确认

> ID：10144240
> 
> 赞同：1
> 
> 时间：2012-04-13T15:57:16.553
> 
> 标签：oracle-apex

使用 APEX 3.2：

当页面 1 成功提交后，我想在页面 2 上显示一个确认弹出窗口。现在我可以从“处理成功消息”中获取文本以显示在第 2 页上，但不是“处理成功消息”文本，我想要一个警报弹出窗口。知道怎么做吗？

注意：我不想将 javascript 放在第 1 页的“提交”按钮上，因为如果出现验证错误，每次单击“提交”按钮时都会出现警报弹出窗口。我只希望只有在第 1 页已成功提交时才会出现弹出窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:35:49.307

你可以这样做：

1) 编辑 Page 2 使用的页面模板。编辑 Success Message 子模板并在 #SUCCESS_MESSAGE# 占位符周围放置一个 span 标签，如下所示：

```
<span id="successMessage">#SUCCESS_MESSAGE#</span> 
```

2) 在页面 2 上创建一些 Javascript 以在页面加载时运行：

```
if ($x('successMessage')) alert ($x('successMessage').innerHTML); 
```

只有当有成功消息要显示时才会呈现成功消息，因此只有在也有成功消息要显示时才会发出警报。

3) 如果需要，您可以通过将 style="display:none" 添加到成功消息子模板的外部 div 来禁止在页面本身上显示成功消息。

**NB**模板更改将影响基于它的所有页面，而不仅仅是第 2 页，因此您可能需要先复制它。您可以在页面模板中包含 Javascript，这样您就不需要在每个页面上添加相同的加载 Javascript。

# iphone - SBJson 解析器对 [Ô] 不满意

> ID：10144246
> 
> 赞同：0
> 
> 时间：2012-04-13T15:57:41.013
> 
> 标签：iphone, json

我在找出从[http://www.hier-bin-ich-koenig.de/json/events](http://www.hier-bin-ich-koenig.de/json/events)收到的 json 字符串有什么问题以便能够解析它时遇到问题。它没有验证，至少没有使用 jsonlint，但我不知道问题出在哪里。所以当然 SBJson 也很不高兴。

我也不明白那个 [Ô] 是从哪里来的。我很想知道它是来自内容还是将内容转换为 json 的代码。能够找到验证错误的位置会很棒。

标记器发送的确切错误是：

JSONValue 失败。错误是：令牌的非法开始 [Ô]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T16:05:11.267

您的页面包含一个 UTF-16 BOM（字节顺序标记），后跟一个 UTF-8 编码文档。您应该完全删除 BOM。不推荐用于 UTF-8 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T09:20:36.803

我在解析由 PHP 页面生成的 json 字符串时遇到了同样的问题。我通过使用记事本++解决了这个问题，

1、打开php文件。2、menu->encoding->encode UTF8 without BOM 3、保存。

完成了。![在此处输入图像描述](../Images/4d21ae98468d4d82ed9ae5b6681b36fd.png)

# c - Printf() 和 Scanf() 的 C 分段错误

> ID：10144249
> 
> 赞同：0
> 
> 时间：2012-04-13T15:57:54.327
> 
> 标签：c, segmentation-fault

我是 C 的新手，我遇到了一个我无法理解的分段错误。我有以下程序，它试图计算严格正数的因子数：

```
#include <stdio.h>
#include <math.h>

int numberOfFactors (int number, int factor) {
    if (number % factor == 0) {
        number = number/factor;
        return numberOfFactors(number, factor) + 1;
    } else {
        return 0;
    }
}

int check (int x) {
    if (x>0) {
        return 1;
    } else {
        return 0;
    }
}

int main(void) {
    int number;
    printf("Please enter a positive integer n such that n >= 1: ");
    scanf("%d", &number);
    if (check(number)){
        int i;
        for (i=1; i<=number; i++) {
            int factors;
            factors = numberOfFactors(number, i);
            printf("%d^%d ", i, factors);
        }
    }
    return 0;
} 
```

在 main() 中的这些行之后输入整数和 ENTER 后立即发生分段错误：

```
printf("Please enter a positive integer n such that n >= 1: ");
scanf("%d", &number); 
```

这些行中的什么导致了分段错误，我该怎么做才能避免它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T16:03:20.783

如果您尝试除以因子一，您的递归不会停止。

让因子永远不会是 1：

```
 for (i=2; i<=number; i++) {
        int factors;
        factors = numberOfFactors(number, i);
        printf("%d^%d ", i, factors);
    } 
```

* * *

我应该说为什么会出现段错误：这是因为每个函数调用都会推送当前程序计数器（程序中您当前所在的位置）和堆栈上的函数参数（也称为调用堆栈），其中堆栈是使用的相对较小的内存块对于函数调用和局部变量。

因此，如果你用力推你的筹码，它就会倒下。游戏结束，又名段错误；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:00:57.397

您可能对此递归有疑问：

```
int numberOfFactors (int number, int factor) {
    if (number % factor == 0) {
        number = number/factor;
        return numberOfFactors(number, factor) + 1;
    } else {
        return 0;
    }
} 
```

将您的 numberOfFactors 更改为：

```
int numberOfFactors (int number)
{
    int i=1;
    int ret=0;
    for(;i<=number;i++) {
        if (number%i == 0) {
            ret++;
        }
    }
    return ret;
} 
```

然后，更改此部分：

```
if (check(number)){
    int i;
    for (i=1; i<=number; i++) {
        int factors;
        factors = numberOfFactors(number, i);
        printf("%d^%d ", i, factors);
    }
} 
```

对于更简单的事情，例如：

```
if (check(number)){
    factors = numberOfFactors(number);
    printf("%d^%d ", number, factors);
} 
```

# asp.net - 样式表对齐问题

> ID：10144250
> 
> 赞同：0
> 
> 时间：2012-04-13T15:57:55.217
> 
> 标签：asp.net, css, stylesheet

我正在使用以下代码在我的 MVC 应用程序中显示标签和复选框/文本框。

```
<div style="width:auto; clear:both;">       
            <div class="metadata-left">Default Domain: </div>        
            <div class="metadata-right-domain"><%= Html.EditorFor(c => c.IsDefault) %></div>
            <br />

            <div class="metadata-left">Disabled:</div>
            <div class="metadata-right-domain"><%= Html.EditorFor(c => c.IsDisabled) %></div>
            <br/>

            <div class="metadata-left">Name:</div>
            <div class="metadata-right-domain"><%= Html.EditorFor(c => c.Name) %></div>
            <br />

            <div class="metadata-left">Domain Name:</div>
            <div class="metadata-right-domain"><%= Html.EditorFor(c => c.DomainName) %></div>
            <br />

            <div class="metadata-left">Forward Url:</div>
            <div class="metadata-right-domain"><%= Html.EditorFor(c => c.ForwardUrl)%></div>
            <br />

            <div class="metadata-left">Unsubscribe Url: </div>
            <div class="metadata-right-domain"><%= Html.EditorFor(c => c.UnSubscribeUrl)%></div>
            <br />

            <div class="metadata-left">Privacy Url:</div>
            <div class="metadata-right-domain"><%= Html.EditorFor(c => c.PrivacyUrl)%></div>
            <br />

            <div class="metadata-left">Brand Number:</div>
            <div class="metadata-right-domain"><%= Html.EditorFor(c => c.BrandNumber)%>
                <%= Html.HiddenFor(c=>c.Id) %></div>
            <br />
        </div>
        <div style="margin-left: 0; text-align: center; padding-top: 4%; clear: both;" class="saveArea">
            <a href='' class="save">Save</a> or <a href="/Admin/EmailBlast/Domains" class="cancel">
                Cancel</a>
            <img src="/Content/img/loader.gif" style="display: none;" class="loading" />
        </div> 
```

但我没有得到正确的对齐方式。见图片： ![在此处输入图像描述](../Images/4bdb133ad0de8cf40d3ced9a52b45c55.png)

这是我使用的样式表：

```
.metadata-left
{
    float: left;
    width: auto;
    text-align: right;
     display:block;
}
.metadata-right-domain
{
    float: right;
    width:auto; 
    padding-left: 3%;
    text-align: left;
} 
```

如何获得正确的对齐方式？

编辑：我并排显示三个 DIV（如图所示）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:01:05.460

你需要给你的 DIV 一个宽度。Auto 是不够的，所以 div 框只和内容一样宽。您可以将 % 用于您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:05:15.507

这是个桌子。所以只需使用`table`元素来标记这些数据：

```
<style>
    .example TD {text-align: right; }
</style>

<table class="example">
    <tr>
        <th scope="row">Default Domain</th>
        <td>example.com</td>
    </tr>
    <tr>
        <th scope="row">Disabled</th>
        <td>No</td>
    </tr>
</table> 
```

如果需要，您可以并排放置多个表。例如，使用`float`属性：

```
<style>
    .example-tables TABLE {float: left; }
</style>

<div class="example-tables">
    <table>
        <!-- table 1 -->
    </table>

    <table>
        <!-- table 2 -->
    </table>

    <table>
        <!-- table 3 -->
    </table>
</div> 
```

# loops - 批处理 - 循环几次后错过命令

> ID：10144257
> 
> 赞同：0
> 
> 时间：2012-04-13T15:58:17.667
> 
> 标签：loops, batch-file

我试图编写简单的程序。它应该找到 .pak 文件（在这种情况下为 zip，但更改了 etension），提取它们并使用 arc 打包它们。

```
@echo off
for /r %%i in (*.pak) do ren %%~i %%~ni.arc
for /r %%i in (*.arc) do (
mkdir %%~ni
cd %%~ni
..\arc.exe x -o+ "%%~i" //extract archive at current location//
del "%%~i"
..\arc.exe a -m9 -r "%%~i" *.* //pack files and folders in current folder and create
archive at specific location//
cd..
RD /s /q %%~ni
)
pause 
```

我确信 Arc 命令有效。一切都很完美，直到几遍之后。似乎它突然停止执行 cd.. 命令，因为它开始一次又一次地创建文件夹，然后在里面创建文件夹。

文件位置：
...\arc.exe
...\program.bat
...\file1.pak
...\folder1\file2.pak
...\folder2\file3.pak
等用于包

我也试过

```
@echo off
setlocal enableextensions enabledelayedexpansion
for /r %%i in (*.pak) do ren %%~i %%~ni.arc
for /r %%i in (*.arc) do (
mkdir %%~ni
cd %%~ni
..\arc.exe x -o+ "%%~i"
del "%%~i"
..\arc.exe a -m9 -r "%%~i" *.*
cd..
RD /s /q %%~ni
)
pause 
```

同样的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:41:06.510

您绝对不想启用延迟扩展，因为如果它们碰巧包含`!`字符，它将损坏文件名。

我相信你的问题只是你没有引用你的路径/文件名。路径/名称中的空格和特殊字符会导致问题，除非它们被引用。

这是完全未经测试的，但我认为它可以解决你的问题：

```
@echo off
for /r %%i in (*.pak) do ren "%%i" "%%~ni.arc"
for /r %%i in (*.arc) do (
  mkdir "%%~ni"
  cd "%%~ni"
  ..\arc.exe x -o+ "%%~i" //extract archive at current location//
  del "%%i"
  ..\arc.exe a -m9 -r "%%i" *.* //pack files and folders in current folder and create archive at specific location//
  cd..
  rd /s /q "%%~ni"
)
pause 
```

# asp.net - 我在 asp.net 上得到了 HttpRequestValidationException 如何修复它？

> ID：10144261
> 
> 赞同：-1
> 
> 时间：2012-04-13T15:58:35.097
> 
> 标签：asp.net, postback

嗨，当我尝试发布此文本框文本时，出现此错误。

“Sys.WebForms.PageRequestManagerServerErrorException：处理服务器上的请求时发生未知错误。从服务器返回的状态代码为：500”

我的页面：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Yonetim/Yonetim.Master" AutoEventWireup="true"
CodeBehind="ImzaDetay.aspx.cs" Inherits="Yonetim.Detay" ValidateRequest="false" EnableEventValidation="false"%> 
```

我的文本框：

```
<asp:TextBox ID="txt_SQL_STR" TextMode="MultiLine" runat="server" Width="100%"
                                                        Height="1000px" /> 
```

我试试这个：

```
<%@ Page ValidateRequest="false" %> 
```

但我得到了同样的错误。

这个对我有用 ：

```
CREATE TABLE EMPLOYEE3 AS
   (SELECT PROJNO, PROJNAME, DEPTNO
    FROM EMPLOYEE
    WHERE DEPTNO = 'D11') WITH NO DATA 
```

它让我疯狂！：

```
SELECT 
       DATED,
       decode(dated,TRUNC(SYSDATE),'<div style="color: red;">') || to_char(t.dated,'dd.mm.yyyy') || decode(dated,TRUNC(SYSDATE),'</div')   DATED2,
       to_char(t.dated,'dd.mm.yyyy') DATED3,
       WEEK_NO  week_no,
       decode(dated,TRUNC(SYSDATE),'<div style="color: red;">') || WEEK_DAY  || decode(dated,TRUNC(SYSDATE),'</div') week_day  ,
       decode(dated,TRUNC(SYSDATE),'<div style="color: red;">') || CUSTOMER_ID  || decode(dated,TRUNC(SYSDATE),'</div') customer_id  ,
       decode(dated,TRUNC(SYSDATE),'<div style="color: red;">') || c_inf_api.get_name(t.customer_id) || decode(dated,TRUNC(SYSDATE),'</div') customer_name ,
       XXX_TABLE,
       XXX_TABLE,
       XXX_TABLE,
       XXX_TABLE,
       t.YYY_TABLE,
       T.OBJID,
       T.OBJVERSION,
       decode(dated,TRUNC(SYSDATE),'<div style="color: red;">') || T.STATE || decode(dated,TRUNC(SYSDATE),'</div')   state

FROM time_db_qry t,
     p_info p
WHERE p.person_id=t.person_id
AND t.dated BETWEEN trunc(SYSDATE)-4 AND trunc(SYSDATE) + 25
and p.user_id='XXXXX'
ORDER BY dated 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:29:09.700

我以前见过这个。看起来您将 html 标记放在文本框中，然后发布表单。出于安全原因，Asp.Net 捕获并抛出错误。它会使您的应用程序的安全性稍差一些，但如果您确实需要传递该 html，这将起作用：

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime requestValidationMode="2.0" />
</system.web> 
```

看来您也可以只为一页执行此操作。

```
<location path="XX/YY">
    <system.web>
        <httpRuntime requestValidationMode="2.0" />
    </system.web>
</location> 
```

[信用到期的信用](https://stackoverflow.com/questions/2673850/validaterequest-false-doesnt-work-in-asp-net-4)

# c# - 检查 Windows 安装程序互斥锁的可用性

> ID：10144268
> 
> 赞同：8
> 
> 时间：2012-04-13T15:59:04.637
> 
> 标签：c#, windows-installer

在我的一个集成测试中，我有两个线程先卸载然后安装程序，但是当按顺序运行时，它们会产生错误`Failed to grab execution mutex. System error 258.`

为了解决这个问题，我必须在卸载后睡觉。我尝试检查 msiexec 进程是否正在运行，但始终有 2-3 个，所以这不是一个好的指标。有没有办法检查 msiexec 执行互斥锁是否可用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T19:11:40.693

```
 bool msiIsRunning = false;
    try
    {
        using(var mutex = Mutex.OpenExisting(@"Global\_MSIExecute"))
        {
            msiIsRunning = true;
        }
    }
    catch (Exception)
    {
       // Mutex not found; MSI isn't running
    } 
```

# facebook-opengraph - 如何在 blogspot.com 中为 Facebook 制作动态帖子的预览图像？

> ID：10144270
> 
> 赞同：2
> 
> 时间：2012-04-13T15:59:07.233
> 
> 标签：facebook-opengraph, blogger

我想将帖子的预览图像添加到 facebook Open Graph 元标记。一种可能的解决方案是使用 ***data:blog.postImageThumbnailUrl***：

```
<meta expr:content='data:blog.postImageThumbnailUrl' property='og:image'/> 
```

但是，由 Blogger 创建的默认帖子图像缩略图太小（72px × 72px），当 facebook 在基于此图像缩略图创建帖子故事时尝试拉伸它时看起来不太好（facebook 说“所有og:image 引用的图像在两个维度上必须至少为 200 像素”）。

所以，问题是：

有没有办法以某种方式从帖子正文中检索图像的 url 并将其插入到上面提到的 facebook Open Graph 元标记中？（假设我博客的每篇文章在其正文中都有图像标签：

[http://loveclubhouse.blogspot.com/](http://loveclubhouse.blogspot.com/)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T09:53:45.257

是的！你可以。它看起来有点草率，但功能齐全。这是`og:image`我博客中的财产。如您所见，它实际上是从我的 Facebook 个人资料中抓取一张图片：

```
<meta content='http://sphotos.xx.fbcdn.net/hphotos-ash3/538645_3357819035748_1577184006_2624573_712999292_n.jpg' property='og:image'/> 
```

当您从 Facebook 的照片库中加载图像时，您通常可以右键单击它并选择“查看图像”。当您这样做时，您将看到 Facebook 存储的实际图像的 URL。只要图像可以公开访问，就不会有任何问题。

如果您决定单击推荐（当前页面）或喜欢（单个帖子），您可以在[我的博客](http://formlesspoet.blogspot.com/search/label/free%20verse)上看到它。:)

# css - Youtube iFrame 上下文菜单异常

> ID：10144272
> 
> 赞同：3
> 
> 时间：2012-04-13T15:59:15.200
> 
> 标签：css, html, google-chrome, iframe, youtube

我正在使用 youtube iframe 在我的网站上嵌入视频。我正在使用 iframe，以便没有安装 flash 的网站访问者可以看到支持 html5 的播放器。

一切都按预期播放和运行，直到您右键单击视频并选择“复制嵌入 HTML”之类的选项，然后视频跳到 iframe 的左侧。

在检查源代码时，似乎有一个带有类的 div`.player-actions-container`有一个 css 规则，`left: 101%`如果我删除了这个规则，玩家就会跳回到它的起始位置。

演示 [http://www.neilcremins.com/yt_test/](http://www.neilcremins.com/yt_test/)

未点击的图片 [http://www.neilcremins.com/yt_test/unclicked.png](http://www.neilcremins.com/yt_test/unclicked.png)

点击图片 [http://www.neilcremins.com/yt_test/clicked.png](http://www.neilcremins.com/yt_test/clicked.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:56:22.177

目前您对缺少 Flash 存在的担忧是[没有](http://www.adobe.com/products/flashplatformruntimes/statistics.html)根据的。

# c# - 俄罗斯方块清除线问题

> ID：10144273
> 
> 赞同：3
> 
> 时间：2012-04-13T15:59:19.253
> 
> 标签：c#, tetris

我正在为一个项目制作俄罗斯方块克隆。我几乎完成了，但我的清晰线条课程有一个我无法摆脱的错误。我制作了一个 10*20 的网格，将精灵绘制到其中。当我在地板上找到一条线时，它可以正常工作，但在此之上它只会删除该线并将其下方的所有内容也向下移动。这是我的明线类的代码：

```
public static void ClearLines()
{
    for (int CountY = Game1.LandedBlocks.GetLength(1) - 1; CountY >= 0; CountY--)
    {
        bool clearLine = true;
        for (int CountX = 0; CountX < Game1.LandedBlocks.GetLength(0); CountX++)
        {
            clearLine &= Game1.LandedBlocks[CountX, CountY] != -1;
        }
        if (clearLine)
        {
            for (int CountX = 0; CountX < Game1.LandedBlocks.GetLength(0); CountX++)
            {
                Game1.LandedBlocks[CountX, CountY] = -1;
            }
            for (int y = Game1.LandedBlocks.GetLength(1) - 1; y > 0; y--)
            {
                for (int CountX = 0; CountX < Game1.LandedBlocks.GetLength(0);                   CountX++)
                {
                    Game1.LandedBlocks[CountX, y] = Game1.LandedBlocks[CountX, y - 1];
                }
            }
            CountY++;
            Game1.rows++;
            Game1.score += 100;
        }
    }
} 
```

如果有人能阐明该怎么做，我将不胜感激。我已经尝试了很多，但没有任何效果:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:04:43.080

看起来问题出在

```
 for (int y = Game1.LandedBlocks.GetLength(1) - 1; y > 0; y--)
            {
                for (int CountX = 0; CountX < Game1.LandedBlocks.GetLength(0); CountX++)
                {
                    Game1.LandedBlocks[CountX, y] = Game1.LandedBlocks[CountX, y - 1];
                }
            } 
```

这（我认为）将所有行向下移动一行。问题在于循环边界总是到第 0 行。你应该只将这些行移到你要清除的那一行之上。将 更改为`y > 0`您`y > lineNumber`清除`lineNumber`的行的位置。

# c# - 为什么我的应用程序图标不透明？

> ID：10144275
> 
> 赞同：4
> 
> 时间：2012-04-13T15:59:25.857
> 
> 标签：c#, wpf, binding, icons, application-icon

在 XAML 中，我试图将窗口/应用程序图标绑定到文件系统上的图标。

在 Window.xaml 中

```
Icon="{Binding ApplicationIcon}" 
```

在 AppViewModel.cs 中

```
public ImageSource ApplicationIcon
{
  get
  {
    return new BitmapImage(new Uri(pathReadFromConfigFile));
  }
} 
```

当我这样做时，会显示图标但它不透明。但是，如果我在项目中设置图标（不使用绑定），则图标将添加到项目中，并且在我启动应用程序时它是透明的。为什么它在这两种情况下表现不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:13:31.083

弄清楚了。这是导致问题的 BitMapImage 创建。现在改用 BitmapFrame。

```
public ImageSource ApplicationIcon
{
  get
  {
    return BitmapFrame.Create(new Uri(pathReadFromConfigFile));
  }
} 
```

# php - json字符串转换成数组？

> ID：10144277
> 
> 赞同：-1
> 
> 时间：2012-04-13T15:59:45.153
> 
> 标签：php, jquery, json

> **可能重复：**
> [将 .get json 字符串转换为数组？](https://stackoverflow.com/questions/10143960/taking-get-json-string-turn-into-array)

我使用以下从 php 中检索字符串，我想知道如何将我的字符串变成一个数组。

**jQuery**

```
$.get("get.php", function(data){
    alert(data);
    //alert($.parseJSON(data));
}, "json"); 
```

注释掉的部分似乎没有效果，所以我真的不能告诉我做错了什么，有人可以请教吗？

**PHP**

```
<?php

$username="root";
$password="root";
$database="testing";

mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");

$name= $_GET['name'];

$query="SELECT * FROM tableone ";
$result=mysql_query($query);

$num=mysql_numrows($result);

mysql_close();

$array = array();

$i=0;
while ($i < $num) {

    $first=mysql_result($result,$i,"firstname");
    $last=mysql_result($result,$i,"lastname");
    $date=mysql_result($result,$i,"date");
    $ID=mysql_result($result,$i,"id");

    $array[$i] = $first;

    $i++;
}

echo json_encode($array);

?> 
```

**输出：**

`["James","Lydia","John"]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:02:09.177

```
$.getJSON("get.php", function(data) {
    // data is already an array => you can loop to get individual elements
    // for example
    $.each(data, function(index, element) {
        alert(element);
    });
}); 
```

还要确保在您的 PHP 文件中设置了正确的`Content-Type`响应标头 top `application/json`。

# xml - R语料库中每个文档的XPath

> ID：10144280
> 
> 赞同：0
> 
> 时间：2012-04-13T16:00:09.860
> 
> 标签：xml, r, xpath, text-mining, corpus

我在 R 中有一个语料库 x，它是从使用 DirSource 的目录创建的。每个文档都是一个文本文件，其中包含相关 vBulletin 论坛网页的完整 HTML。因为它是一个线程，所以每个文档都有多个我想用我的 XPath 捕获的单独的帖子。XPath 似乎可以工作，但我无法将所有捕获的节点放回语料库。

如果我的语料库有 25 个文档，每个文档平均有 4 个帖子，那么我的新语料库应该有 100 个文档。我想知道我是否必须做一个循环并创建一个新的语料库。

到目前为止，这是我凌乱的工作。来自 www.vbulletin.org/forum/ 中的线程的任何来源都是该结构的示例。

```
#for stepping through
xt <- x[[5]]
xpath <- "//div[contains(@id,'post_message')]"

getxpath <- function(xt,xpath){
  require(XML)

  #either parse
  doc <- htmlParse(file=xt)
  #doc <- htmlTreeParse(tolower(xt), asText = TRUE, useInternalNodes = TRUE)

  #don't know which to use
  #result <- xpathApply(doc,xpath,xmlValue)
  result <- xpathSApply(doc,xpath,xmlValue)

  #clean up
  result <- gsub(pattern="\\s+",replacement=" ",x=gsub(pattern="\n|\t",replacement=" ",x=result))

  result <- c(result[1:length(result)])

  free(doc)

  #converts group of nodes into 1 data frame with numbers before separate posts
  #require(plyr)
  #xbythread <- ldply(.data=result,.fun=function(x){unlist(x)})

  #don't know what needs to be returned
  result <- Corpus(VectorSource(result))
  #result <- as.PlainTextDocument(result)

  return(result)
}

#call
x2 <- tm_map(x=x,FUN=getxpath,"//div[contains(@id,'post_message')]") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:26:54.947

前一阵子想通了。htmlParse 需要 isURL=TRUE。

```
getxpath <- function(xt,xpath){
  require(XML);require(tm)
  x <- htmlParse(file=u,isURL=TRUE)
  resultvector <- xpathSApply(x,xpath,xmlValue)
  result <- gsub(pattern="\\s+",replacement=" ",x=gsub(pattern="\n|\t",replacement=" ",x=resultvector))
  return(result)
}

res <- getxpath("http://url.com/board.html","//xpath") 
```

要获取所有文件，我使用 list.files 获取文件列表，使用 Map/clusterMap 和 getxpath() 将它们放入列表中，使用 do.call 将它们放入向量中，并使用 Corpus(VectorSource(res)) 来将它们放入语料库中。

# asp.net - 如何找到对用户控件的所有引用

> ID：10144287
> 
> 赞同：2
> 
> 时间：2012-04-13T16:00:54.860
> 
> 标签：asp.net, visual-studio-2010, user-controls, vb.net-2010

在 Visual Studio 2010 中，我有一个非常大的 ASP.NET 网站项目，其中包含一堆用户控件。

如何确定在整个项目中引用特定 .ascx 用户控件的所有 .aspx 页面。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:03:58.550

我能想到的最简单的方法就是使用 Find In Files (Ctrl/Shift-F) 搜索对话框。

**查找内容：**用户控件的名称

**查看：**整个项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:06:56.513

右键单击您的班级`User Control`并选择以下选项。

## 查找所有参考

![在此处输入图像描述](../Images/5f3a4df64cbb87eefb2de0defc3aa5c9.png)

# asp.net-mvc-3 - MVC3 简单的自定义验证

> ID：10144290
> 
> 赞同：1
> 
> 时间：2012-04-13T16:01:04.323
> 
> 标签：asp.net-mvc-3, validation, validationattribute

简单的自定义验证，

我的模型和自定义验证：

```
public class Registration
{
    [Required(ErrorMessage = "Date of Birth is required")]         
    [AgeV(18,ErrorMessage="You are not old enough to register")]
    public DateTime DateOfBirth { set; get; }
}

public class AgeVAttribute : ValidationAttribute
{
    private int _maxAge;

    public AgeVAttribute(int maxAge)
    {
        _maxAge = maxAge;
    }

    public override bool IsValid(object value)
    {
        return false;       <--- **this never gets executed.... what am I missing?**
    } 
} 
```

（请参阅上面的内联评论）

看法：

```
@using (Html.BeginForm()) {
@Html.ValidationSummary("Errors")
<fieldset>
    <legend>Registration</legend>
    <div class="editor-label">
        @Html.LabelFor(model => model.DateOfBirth)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.DateOfBirth)    
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:10:23.383

无法复现。

模型：

```
public class Registration
{
    [Required(ErrorMessage = "Date of Birth is required")]
    [AgeV(18, ErrorMessage = "You are not old enough to register")]
    public DateTime DateOfBirth { set; get; }
}

public class AgeVAttribute : ValidationAttribute
{
    private int _maxAge;

    public AgeVAttribute(int maxAge)
    {
        _maxAge = maxAge;
    }

    public override bool IsValid(object value)
    {
        return false;
    }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new Registration
        {
            DateOfBirth = DateTime.Now.AddYears(-10)
        });
    }

    [HttpPost]
    public ActionResult Index(Registration model)
    {
        return View(model);
    }
} 
```

看法：

```
@model Registration

@using (Html.BeginForm()) 
{
    @Html.ValidationSummary("Errors")
    <fieldset>
        <legend>Registration</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.DateOfBirth)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.DateOfBirth)    
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

提交表单时始终会点击 IsValid 方法。另请注意，我没有启用客户端验证，因为我没有包含`jquery.validate.js`和`jquery.validate.unobtrusive.js`脚本。如果您已包含它们并且存在错误，则客户端验证可能会阻止您的表单甚至被提交到服务器，在这种情况下，不调用 IsValid 方法是正常的。

# knockout.js - JSON.NET 类名作为根

> ID：10144300
> 
> 赞同：1
> 
> 时间：2012-04-13T16:01:49.977
> 
> 标签：knockout.js, json.net, asp.net-mvc-4, asp.net-web-api, knockout-mapping-plugin

我正在使用 ASP.NET MVC4 WebApi 和 Knockout.js。

我的模型由包含 1-N *Controls的**页面*组成。当我需要加载一个新的*Page*时，我将获取 HTML 视图和 JSON 序列化对象，并将所有内容与 KO 放在一起。由于我的模型非常动态，我将使用 KO 映射插件，因此我不必定义所有的 observables。

 **这是我的（非常简化的）模型：

```
public class Page
{
    public string Name { get; set; }
    public List<Control> Controls { get; set; }        
}

public abstract class Control
{
    public string Name { get; set; }
    public abstract string SayHi();
}

public class Form : Control
{
    public override string SayHi()
    {
        return string.Format("Hi, I'm form {0}", Name);
    }
}

public class Datagrid : Control
{
    public override string SayHi()
    {
        return string.Format("Hi, I'm datagrid {0}", Name);
    }
} 
```

实际上，我得到了这个（用 JSON.NET 序列化）：

```
[
{
    "Name":"pagina1",
    "Controls":
    [
        {"Name":"laTablita"},
        {"Name":"theForm"}
    ]
},
{
    "Name":"pagina2",
    "Controls":
    [
        {"Name":"elFormito"},
        {"Name":"theDatagrid"}
    ]
}
] 
```

问题是我需要 JSON 将类名作为根键（因为 KO.Mapping 需要这种方式），而 JSON.NET 序列化程序不包含它。

这就是我需要 JSON 的方式：

```
[
{
    "Name":"pagina1",
    "Controls":
    [
        "Datagrid":
        {
            "Name":"laTablita"
        },
        "Form":
        {
            "Name":"theForm"
        }
    ]
},
{
    "Name":"pagina2",
    "Controls":
    [
        "Form":
        {
            "Name":"elFormito"
        },
        "Datagrid":
        {
            "Name":"theDatagrid"
        },
    ]
}
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:33:20.133

如评论中所述，您所需的 JSON 不符合 json 规范。如果我了解您的需求，您想确定每个控件的类型。有几种方法可以做到这一点。首先 JSON.NET 可以采用`JsonSerializerSettings`具有属性的对象`TypeNameHandling`。默认情况下，这设置为无。如果将其设置为 Object 类型名称将被包括在内。但是，这是 .NET 类型名称，可能不是您想要的。

一种简单的方法是向控件类添加一个 TypeName 属性，该属性返回一个表示类类型的字符串。

您返回的 JSON 看起来像这样。

```
[
{
    "Name":"pagina1",
    "Controls":
    [
        {"Name":"laTablita", TypeName: "Datagrid"},
        {"Name":"theForm", TypeName: "Form"}
    ]
},
{
    "Name":"pagina2",
    "Controls":
    [
        {"Name":"elFormito", TypeName: "Form"},
        {"Name":"theDatagrid", TypeName: "Datagrid"}
    ]
}
] 
```

希望这可以帮助。**

# iphone - 检测手指握在物体上

> ID：10144301
> 
> 赞同：2
> 
> 时间：2012-04-13T16:01:54.267
> 
> 标签：iphone, objective-c, xcode, ipad

我试图有一个图像，当用户触摸它时，它会摆动，一旦用户抬起手指，它就会停止。

是否有一个手势可以用来检测手指何时向下，而不仅仅是在初始触摸时，或者当用户在那里移动手指时？

我已经尝试过 LongPress 手势，但是在手指在视图上的整个过程中都不会调用它。任何人都可以帮助我以最好的方式来激活它。现在我正在使用 touchesBegin、touchesMoved、touchesEnd 进行操作，但我想知道是否有更好的方法。

非常感谢任何建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:12:58.007

**编辑** 根据评论，我稍微误解了原始问题，所以我编辑了我对不同解决方案的答案，希望它更清楚（并回答实际问题 - 而不是我脑海中的那个）。

LongPress 手势是连续的（点击手势不是）。这意味着，识别器回调将继续被调用，直到手势完成 - 这在“长按”释放之前不会发生。所以，以下应该做你想要的。注意：我认为您想在识别出长按时“开始摇动”视图，然后在松开手指时“停止摇动”视图。我只是假装你有这个功能。适当替换。

```
 - (void)handleLongPress:(UILongPressGestureRecognizer*)gestureRecognizer
{
    if (gestureRecognizer.state == UIGestureRecognizerStateBegan) {
        StartShakingView(gestureRecognizer.view);
    } else if (gestureRecognizer.state == UIGestureRecognizerStateEnded) {
        StopShakingView(gestureRecognizer.view);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:11:44.437

Apple [Touches 示例](https://developer.apple.com/library/ios/#samplecode/Touches/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007435)包含演示如何使用 UIResponder 和 UIGestureRecognizer 方法的代码。

任何一个都应该适用于你正在做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T17:34:36.780

听起来你想*继承*UIGestureRecognizer，我记得它获取`touchesBegan:...`和关联的方法。阅读 UIGestureRecognizer 参考中关于子类化的注释。或者按照 SomaMan 的建议使用 UIButton。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T16:06:25.910

简单的答案 - 您可以将图像设为 UIButton，然后在 TouchDown 上开始摆动，然后在 TouchUpInside 或 TouchUpOutside 上停止

# jquery - 动态div中的jQuery datepicker

> ID：10144303
> 
> 赞同：0
> 
> 时间：2012-04-13T16:02:04.630
> 
> 标签：jquery, html, datepicker

我有一个包含字段集的表单，并且能够添加新部分（前一个字段集的克隆）。我可以选择原始字段的日期，但是当我添加一个新部分时，不会生成 datepicker 函数。

我的代码和示例在此处列出-> [http://jsbin.com/aqijuh/15](http://jsbin.com/aqijuh/15)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:04:06.290

那是因为您必须`datepicker()`在新添加的元素上调用该函数

```
 document.getElementById("placeholder").appendChild(newFieldSet);
 $('input.date', newFieldSet).datepicker();
  window.lastClone = newFieldSet.id; 
```

[http://jsbin.com/aqijuh/17/edit](http://jsbin.com/aqijuh/17/edit)

# c# - C# 项目中的字符串资源

> ID：10144311
> 
> 赞同：0
> 
> 时间：2012-04-13T16:02:35.173
> 
> 标签：c#, .net

我已经使用反编译器研究了一些微软的程序集。我在每个程序集中都找到了“资源”文件夹。他们有一些价值。但我没有在汇编代码中找到任何对这个值的引用。谁能告诉我为什么我们使用资源？以及为什么我在反编译代码的任何地方都没有找到资源名称。

![在此处输入图像描述](../Images/e8415bb751b4348fb5866d08eb336b39.png)

您可以看到我选择了 System.Data.Entity.Design.resources，它位于“Resources”命名文件夹下。这些名称-值对在程序集中有什么用？那是我的问题。这个名称-值对在代码中的什么地方使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:21:55.273

资源字符串按名称加载（如[ResourceManager.GetString](http://msdn.microsoft.com/en-us/library/d17ax2xk.aspx)），因此无需在源代码中查找完整的字符串名称。其他一些程序集也可以使用字符串。

即资源：

```
Message_BadOne -> "Bad things happened"
Message_Cool -> "Soo cooooll" 
```

代码：

```
Console.WriteLine(resourceManager.GetString(
       "Message" + (isItCool? "_Cool" : "_BadOne")); 
```

# java - 如何在线程中注入 Spring Bean

> ID：10144313
> 
> 赞同：2
> 
> 时间：2012-04-13T16:02:37.387
> 
> 标签：java, multithreading, spring, javabeans

我有一个正在运行的 Spring 3 Web 应用程序。所有 bean 都已正确注入，并且一切正常（所有 Web 服务调用都正常工作）。

在扩展应用程序时，我需要添加可以通过 Web 服务启动和停止的线程。

在线程中，我需要注入一些 Spring bean。这些 bes 是服务（用@Service 注释）。在我的 applicationContext 中，bean 是通过组件扫描检测到的：

```
<context:component-scan base-package="<package>">
    <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Controller" />
</context:component-scan> 
```

但是当我尝试在线程中注入bean（使用@Resource）时，它们总是'null'（Spring不注入它们）。线程已启动，但在初始化时失败。

我还尝试通过在代码中加载 applicationContext 来注入它们：（应用程序上下文位于'src/main/resources'）

```
ClassPathXmlApplicationContext applicationContext = new ClassPathXmlApplicationContext("classpath:*applicationContext.xml");

if(applicationContext.containsBean("BeanName")) {

        beanObject = (BeanClass) applicationContext.getBean("BeanName");

} else {

    //Exception
} 
```

有谁知道如何在线程中注入 bean？还是不能在线程中注入 bean？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:01:09.870

最好将业务逻辑（取决于您的服务的代码）与管理线程的基础设施代码分开。

例如，您可以声明一个`Runnable`为您的业务逻辑实现的 bean，然后在需要启动一个`Thread`.

但是，`Thread`手动启动 s 也不是一个好习惯。最好改用线程池。实际上，Spring 为线程池和异步执行提供了一些内置支持，因此您可以利用它，请参阅[25\. 任务执行和调度](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/scheduling.html)。

# python - 电子邮件和地图减少工作

> ID：10144325
> 
> 赞同：2
> 
> 时间：2012-04-13T16:03:35.417
> 
> 标签：python, map, hadoop, mapreduce, reduce

我刚开始使用 Hadoop 并编写一些 Map Reduce 作业。我正在寻求有关在 python 中编写 MR 工作的帮助，该工作允许我接收一些电子邮件并将它们放入 HDFS，以便我可以搜索电子邮件的文本或附件？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:11:05.840

对于处理电子邮件，[`email`](http://docs.python.org/library/email)stdlib 中的模块可能会很方便。对于 Hadoop 方面，[使用 Python 和 Hadoop](http://werxltd.com/wp/2009/09/29/using-python-with-hadoop/)可能会很方便，尽管有很多 Google 搜索结果可供选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:49:59.077

Yea, you need to use hadoop streaming if you want to use write Python code for running MapReduce Jobs

# c - C/C++ 的 CMake 命令列表

> ID：10144331
> 
> 赞同：0
> 
> 时间：2012-04-13T16:03:56.323
> 
> 标签：c, build, cmake, qmake

我通常`qmake`为我的`C`和`C++`项目工作，但最近想学习`CMake`。一件好事`qmake`是他们在这里有一个变量引用：http: [//qt-project.org/doc/qt-4.8/qmake-variable-reference.html](http://qt-project.org/doc/qt-4.8/qmake-variable-reference.html)

我正在寻找类似的东西，`CMake`但找不到一个:(。有人可以指点我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:07:09.877

这是否符合您的需求：

*   [http://www.cmake.org/cmake/help/v2.8.8/cmake.html](http://www.cmake.org/cmake/help/v2.8.8/cmake.html)？

我最近为 cmake 设置了一个示例项目。可能它可以帮助您入门：

*   [https://github.com/moooeeeep/cmake_sample](https://github.com/moooeeeep/cmake_sample)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:02:56.040

cmake参考手册的路径改为[http://www.cmake.org/cmake/help/v2.8.8/cmake.html](http://www.cmake.org/cmake/help/v2.8.8/cmake.html)

# git - 我可以使用 git 删除别人放在我从未使用过的存储库中的文件吗？

> ID：10144336
> 
> 赞同：3
> 
> 时间：2012-04-13T16:04:00.403
> 
> 标签：git

在工作中，我们使用 git 作为源代码控制。在一个文件夹中，有一个我经常使用的脚本，但该文件夹中有几个其他脚本名称非常相似，但我从未使用过。这些其他脚本使我很难在我想运行它时用制表符完成脚本的名称，这让我每次运行这个脚本时都会感到烦恼。

我希望我可以将其他脚本的名称放在我的全局 .gitignore 文件中，然后删除它们，但 git 仍然认识到我已经删除了它们，并希望我提交这个更改。

为了解决这个问题，我刚刚为我的脚本名称创建了一个 bash 别名，但它仍然让我很好奇这个问题是否可以通过其他方式解决。我是否可以从我的本地 git 存储库中删除一个文件而没有 git 抱怨？

回答“否”是可以接受的。我只是不确定我失败是因为不可能，还是因为我的 git fu 不够强大。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T16:18:17.580

试试`git-update-index --assume-unchanged path/to/ignored/file`。这将阻止 git 检查该文件以查找本地工作树中的更改，但不会影响任何远程存储库。

# spring - Spring项目中的消息/事件框架

> ID：10144337
> 
> 赞同：5
> 
> 时间：2012-04-13T16:04:05.067
> 
> 标签：spring, events, messaging

我的 Spring 项目中需要一个消息传递或事件框架。

基本要求：

*   单个生产者/发送者，它将创建消息/事件
*   生产者将向其中发送消息的全局通道/队列/等
*   多个组件应该能够在此通道/队列中注册，以便它们可以接收消息/事件
*   所有组件都应该能够接收所有消息 - 所有接收者都可以看到每条消息，而不仅仅是一个（例如第一个）。所以单个消费者不能让消息消失并且对其他人不可见
*   消息应该以异步方式分布在所有消费者之间，因此它们都可以同时接收消息，而不仅仅是一个接一个

什么最适合我的需求？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T16:06:45.117

我认为您的要求符合 Spring Integration 的功能。

[http://www.springsource.org/spring-integration](http://www.springsource.org/spring-integration)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T16:22:57.593

Spring 原生支持[观察者模式（查看事件部分）](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch04s08.html)。检查它是否满足您的需求。如果没有，那么您可以使用 Spring 的 JMS 支持 + ActiveMQ。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:48:06.293

[Guava EventBus](http://code.google.com/p/guava-libraries/wiki/EventBusExplained)可以为您工作。它允许组件之间的发布-订阅式通信，而无需它们显式地相互了解。[这是](http://codingjunkie.net/guava-eventbus/)一篇不错的文章，通过一些示例进一步解释了它。

# html - 左侧导航仅在 IE7 中崩溃

> ID：10144339
> 
> 赞同：2
> 
> 时间：2012-04-13T16:04:12.873
> 
> 标签：html, css, internet-explorer-7, navigation

好的！所以我制作了这个导航栏，它在除 IE7 之外的所有浏览器中都能完美运行。它是一个左侧导航，由于某种原因它在 IE7 中折叠，但其他所有浏览器都可以正常显示。

这是html。

```
 <!doctype html>
    <html> 
    <head>
       <title>Test</title>
       <meta charset="utf-8">
       <link rel="stylesheet" href="reset.css">
       <link rel="stylesheet" href="styles.css">
</head> 
    <body>
<ul class="navbar">
    <li class="nav_head"><div class="navhd_outline"><a href="/admin/products/">Products</a></div></li>
        <ul>
            <li class="nav_subhead"><div class="navsub_outline"><a href="#">View Categories</a></div></li>
            <li class="nav_subhead"><div class="navsub_outline"><a href="#">Add/Remove</a></div></li>
        </ul>
    </li>
    <li class="nav_head"><div class="navhd_outline"><a href="/admin/email/">Email</a></div></li>
        <ul>
            <li class="nav_subhead"><div class="navsub_outline"><a href="#">New Blast</a></div></li>
            <li class="nav_subhead"><div class="navsub_outline"><a href="#">View Blast</a></div></li>
        </ul>
    </li>
    <li class="nav_head"><div class="navhd_outline"><a href="/admin/reports/">Reports</a></div></li>
        <ul>
            <li class="nav_subhead"><div class="navsub_outline"><a href="#">By Month</a></div></li>
            <li class="nav_subhead"><div class="navsub_outline"><a href="#">By Type</a></div></li>
        </ul>
    </li>
    <li class="nav_head"><div class="navhd_outline"><a href="/admin/recipes/">Recipes</a></div></li>
        <ul>
            <li class="nav_subhead"><div class="navsub_outline"><a href="#">View Recipes</a></div></li>
            <li class="nav_subhead"><div class="navsub_outline"><a href="#">Add/Remove</a></div></li>
        </ul>
    </li>
    <li class="nav_head"><div class="navhd_outline"><a href="/admin/television/">Television</a></div></li>
        <ul>
            <li class="nav_subhead"><div class="navsub_outline"><a href="#">View List</a></div></li>
            <li class="nav_subhead"><div class="navsub_outline"><a href="#">Add/Remove</a></div></li>
        </ul>
    </li>
    <li class="nav_head blog_head"><div class="navhd_outline"><a href="/admin/blog/">Blog</a></div></li>
        <ul>
            <li class="nav_subhead"><div class="navsub_outline"><a href="#">View Posts</a></div></li>
            <li class="nav_subhead"><div class="navsub_outline"><a href="#">Add/Remove</a></div></li>
        </ul>
    </li>
    <li class="nav_bottom">&nbsp;</li>
</ul>
    </body>
    </html> 
```

这是CSS。

```
.navbar {
    float: left;
    background-color: #4d89d1;
    background-repeat: no-repeat;
    background-position: 18px 0px;
    top: -25px;
    width: 200px;
    margin-top: 20px;
    margin-left: 30px;
    padding-top: 25px;
    padding-bottom: 30px;
}

.nav_head {
    margin: 0 auto;
    padding: 1px;
    height: 36px;
    list-style: none;
}

.nav_head a {
    font-size: 15px;
    color: #900606;
}

.nav_head a:hover {
    color: #f5bf2b;
}

.navhd_outline {
    margin: 1px;
    padding-top: 8px;
    padding-left: 40px;
    padding-bottom: 22px;
    border: 1px dashed #f5bf2b;
    width: 154px;
    height: 2px;
}

.nav_subhead {
    padding: 1px;
    background-color: #900606;
    height: 36px;
    list-style: none;
    margin-left: 25px;
    width: 155px;
    text-align: right;
}

.nav_subhead a {
    color: #ffffff;
    text-decoration: none;
    padding-right: 10px;
}

.nav_subhead a:hover {
    color: #f5bf2b;
}

.navsub_outline {
    margin: 1px;
    padding-top: 10px;
    padding-left: 20px;
    padding-bottom: 20px;
    border: 1px dashed #f5bf2b;
    width: 131px;
    height: 2px;
}

.nav_bottom {
    height: 30px;
    background-position: 33px 0px;
    background-repeat: no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:21:58.503

您仍然有无效的 HTML。这个问题在每一个都重复，`<li>`所以我只展示第一个......

```
<ul class="navbar">

    <li class="nav_head">
        <div class="navhd_outline"><a href="/admin/products/">Products</a></div>
    </li>  <!-- <<< this one closes the LI item -->
        <ul>
            <li class="nav_subhead">
                  <div class="navsub_outline"><a href="#">View Categories</a></div>
            </li>
            <li class="nav_subhead">
                  <div class="navsub_outline"><a href="#">Add/Remove</a></div>
            </li>
        </ul>
    </li>  <!-- <<< this is presently an extra one outside of the LI item -->

    ...
    <li class="nav_bottom">&nbsp;</li>

</ul> 
```

你仍然有一个额外的结束`</li>`标签为每一个`<li>`项目。内部`<ul>`需要包含*在 内部*，`<li></li>`您可以将它与另一个一起包含在*外部*`</li>`。`</li>`如下所示删除标签...

```
<ul class="navbar">

    <li class="nav_head">
        <div class="navhd_outline"><a href="/admin/products/">Products</a></div>
        <ul>  <!-- <<< the entire child UL is inside the LI where it belongs -->
            <li class="nav_subhead">
                  <div class="navsub_outline"><a href="#">View Categories</a></div>
            </li>
            <li class="nav_subhead">
                  <div class="navsub_outline"><a href="#">Add/Remove</a></div>
            </li>
        </ul>
    </li>  <!-- <<< this one closes the LI item -->

    ...
    <li class="nav_bottom">&nbsp;</li>

</ul> 
```

[通过W3C Validator](http://validator.w3.org/)运行您的页面。

# r - 使用数字和字母（字母数字）名称对文件/对象进行排序

> ID：10144340
> 
> 赞同：4
> 
> 时间：2012-04-13T16:04:21.240
> 
> 标签：r, sorting, alphanumeric

我的文件是：

```
CT.BP.50.txt
CT.BP.200.txt
CT.BP.500.txt 
GP.BP.50.txt
GP.BP.200.txt 
GP.BP.500.txt 

files <- c("CT.BP.50.txt", "CT.BP.200.txt", "CT.BP.500.txt", "GP.BP.50.txt", "GP.BP.200.txt", "GP.BP.500.txt") 
```

我想对它们执行特定的操作，我可以这样做：

```
for (i in 1:length(files)) {
    foo <- read.table(files[i])
    barplot(table(foo$V1), main = files[i])
} 
```

但是 R 按以下顺序绘制它们：

> “CT.BP.200.txt” “CT.BP.500.txt” “CT.BP.50.txt” “GP.BP.200.txt” “GP.BP.500.txt” “GP.BP. 50.txt"

我希望它们按排序顺序绘制：

> “CT.BP.50.txt” “CT.BP.200.txt” “CT.BP.500.txt” “GP.BP.50.txt” “GP.BP.200.txt” “GP.BP. 500.txt"

如何对具有字母数字名称的对象进行排序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T16:29:10.487

问题是它`list.files()`以标准（词法）排序顺序返回文件名，并且数字是逐位比较的，而不是作为数字的一部分。

```
files <- sort(c("Gen.Var_CT.BP.200.txt", "Gen.Var_CT.BP.500.txt", 
                "Gen.Var_CT.BP.50.txt", "Gen.Var_GP.BP.200.txt",
                "Gen.Var_GP.BP.500.txt", "Gen.Var_GP.BP.50.txt")) 
```

在我的系统上，这给出了：

```
> files
[1] "Gen.Var_CT.BP.200.txt" "Gen.Var_CT.BP.50.txt"  "Gen.Var_CT.BP.500.txt"
[4] "Gen.Var_GP.BP.200.txt" "Gen.Var_GP.BP.50.txt"  "Gen.Var_GP.BP.500.txt" 
```

该函数`gtools::mixedsort`将（通常）按您想要的方式排序：字符串中的一系列数字将被视为数字以进行排序。但是，您的示例存在一些问题，因为`mixedsort`假设`.`是数字的一部分，因此被`.200.`视为潜在数字，实际上不能将其排序为数字。由于您的示例中没有实际的小数点，因此您可以解决这个问题。

```
files <- files[mixedorder(gsub("\\.", " ", files))] 
```

所以文件现在排序为：

```
> files
[1] "Gen.Var_CT.BP.50.txt"  "Gen.Var_CT.BP.200.txt" "Gen.Var_CT.BP.500.txt"
[4] "Gen.Var_GP.BP.50.txt"  "Gen.Var_GP.BP.200.txt" "Gen.Var_GP.BP.500.txt" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T16:07:46.693

这能行吗？

```
files <- c("Gen.Var_CT.BP.50.txt", "Gen.Var_CT.BP.200.txt", "Gen.Var_CT.BP.500.txt",    "Gen.Var_GP.BP.50.txt", "Gen.Var_GP.BP.200.txt", "Gen.Var_GP.BP.500.txt"){
for (i in 1:length(files)) {
  b <- read.table(files[i])
  barplot(table(b$V1), main=files[i]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T16:24:32.023

看起来您想按特定顺序按文件名的特定组成部分进行排序。

因此，我首先将文件名分解为其组件，例如：

```
filesmat=matrix(unlist(strsplit(files,split='\\.')),byrow=T,ncol=4) 
```

然后提取要排序的列。

```
numbercomponent=as.numeric(filesmat[,3])

varname=filesmat[,1] 
```

然后用类似的东西重新排序文件名

```
files=files[order(varname,numbercomponent)] 
```

然后随心所欲地绘制。

# function - SQL Server 2008 R2是如何创建函数的？

> ID：10144344
> 
> 赞同：4
> 
> 时间：2012-04-13T16:04:46.633
> 
> 标签：function

我能够创建下面的存储过程，但现在我在删除它并将其创建为函数时遇到了一些麻烦。任何帮助将不胜感激：

```
CREATE PROC spTriangular
   @ValueIn int,
   @ValueOut int OUTPUT
AS
   DECLARE @InWorking int
   DECLARE @OutWorking int

   IF @ValueIn != 1
   BEGIN
         SELECT @InWorking = @ValueIn - 1
         EXEC spTriangular @InWorking, @OutWorking OUTPUT

         SELECT @ValueOut = @ValueIn + @OutWorking
   END
   ELSE
   BEGIN
         SELECT @ValueOut = 1
   END

   RETURN
GO 
```

运行此存储过程时：

```
DECLARE @WorkingOut int
DECLARE @WorkingIn int

SELECT @WorkingIn = 5

EXEC spTriangular @WorkingIn, @WorkingOut OUTPUT

PRINT CAST(@WorkingIn AS varchar) + ' Triangular is ' + CAST(@WorkingOut AS  varchar)
GO

Triangular is 15 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:11:46.277

尝试这个：

```
CREATE FUNCTION dbo.spTriangular
(@ValueIn int)
RETURNS  int
AS
  DECLARE @ValueOut int
  DECLARE @InWorking int
  DECLARE @OutWorking int
  IF @ValueIn != 1
  BEGIN
           SELECT @InWorking = @ValueIn - 1
            SELECT @OutWorking = dbo.spTriangular(@InWorking)

            SELECT @ValueOut = @ValueIn + @OutWorking
  END
  ELSE
  BEGIN
            SELECT @ValueOut = 1
  END
  RETURN(@ValueOut) 
```

# javascript - toProperCase Javascript 正则表达式 - 包括 hypen 等

> ID：10144345
> 
> 赞同：0
> 
> 时间：2012-04-13T16:04:49.570
> 
> 标签：javascript, regex

我正在使用以下函数（第一个）来更改某些文本的大小写，这很棒。但我希望它考虑到连字符等后的字母。谁能帮我修改它以包含这个？我已经能够执行第二个功能，但是我确定您必须能够将其放入正则表达式中？

```
function toProperCase(str)
{
    return str.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
}

//don't want to do it like this;
function toProperCase(str)
{
    str = str.replace("-", "- ");
    str = str.replace("'", "' ");
    str = str.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
    str = str.replace("- ", "-");
    str = str.replace("' ", "'");
    return str;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:04:47.073

```
function toProperCase(str) {
    return str.replace(/\b./g, 
           function(txt){return txt.toUpperCase()}
           )
    } 
```

这会找到每个以单词边界开头的字符并将其替换为其大写版本。

单词边界是字符串开头和结尾的位置，以及单词字符和非单词字符之间的位置。单词字符是字母、数字或下划线，非单词字符是其他所有字符。

你对“连字符、撇号等”不是很具体，所以我猜它适用于任何不是字母、数字或下划线的东西。

请注意，您不必细分找到的字符串或添加小写字符串，因为`replace`仅替换匹配的字符：在这种情况下，它是单个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:36:18.923

也许这对你有用？

```
str.replace(/\w*/g, function(txt){
                       return txt.charAt(0).toUpperCase() + 
                              txt.substr(1).toLowerCase();
                   }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T16:41:37.080

可能这对您的用例会更好：

```
str.replace(/\b[a-z][\w'-]*/ig, function(txt){
        return txt.charAt(0).toUpperCase() + 
               txt.substr(1).toLowerCase();
     }
); 
```

这基本上是找到所有第一个字符是字母表并且后面是单词字符或连字符或 apos 的单词。

# .net - 配置 WCF 客户端会出现错误“无法处理消息。这很可能是因为操作

> ID：10144348
> 
> 赞同：3
> 
> 时间：2012-04-13T16:04:58.140
> 
> 标签：.net, wcf, configuration, client

无论我设置什么配置，我的 Web 服务都会返回错误消息。我收到以下错误消息。

> *无法处理该消息。这很可能是因为“http://tempuri.org/ITestingWebService/DoWork”操作不正确，或者因为消息包含无效或过期的安全上下文令牌，或者因为绑定之间不匹配。如果服务由于不活动而中止通道，则安全上下文令牌将无效。为了防止服务过早中止空闲会话，请增加服务端点绑定的接收超时。*

这是我的 WCF 服务器和客户端`web.config`部分。

服务器：

```
<system.serviceModel>
   <behaviors>
      <serviceBehaviors>
         <behavior name="ConnectedStoreCCM.TestingWebServiceBehavior">
            <serviceMetadata httpGetEnabled="true"  httpGetUrl="" />
            <serviceDebug includeExceptionDetailInFaults="true"  />
         </behavior>
      </serviceBehaviors>
   </behaviors>
   <bindings>
      <wsHttpBinding>
         <binding name="WSHttpBinding_ITestingWebService" 
             openTimeout="00:01:00" receiveTimeout="00:10:00"
             sendTimeout="00:10:00" bypassProxyOnLocal="false"
             transactionFlow="false" hostNameComparisonMode="StrongWildcard"
             messageEncoding="Text" textEncoding="utf-8"
             useDefaultWebProxy="true" allowCookies="false"
             maxReceivedMessageSize="2097152" maxBufferPoolSize="1024768">
            <readerQuotas 
                maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                maxBytesPerRead="4096" maxNameTableCharCount="16384" />
            <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" />
            <security mode="None">
               <transport clientCredentialType="None" />
               <message clientCredentialType="None" negotiateServiceCredential="false" 
                        establishSecurityContext="false" />
            </security>
         </binding>
      </wsHttpBinding>
   </bindings>
   <services>
       <service behaviorConfiguration="ConnectedStoreCCM.TestingWebServiceBehavior"
                name="ConnectedStoreCCM.TestingWebService">
          <endpoint 
              address="" 
              binding="wsHttpBinding" 
              contract="ConnectedStoreCCM.ITestingWebService">
             <identity>
                <dns value="localhost" />
             </identity>
          </endpoint>
          <endpoint 
              address="mex" 
              binding="mexHttpBinding" 
              contract="IMetadataExchange" />
          <host>
             <baseAddresses>
                <add baseAddress="http://www.someuri.net/supertest/TestingWebService.svc?wsdl" />
             </baseAddresses>
          </host>
       </service>
    </services>
</system.serviceModel> 
```

客户：

```
<system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="WSHttpBinding_ITestingWebService" closeTimeout="00:10:00" openTimeout="00:10:00"
             receiveTimeout="00:10:00" sendTimeout="00:10:00"
             bypassProxyOnLocal="false" transactionFlow="false"
             hostNameComparisonMode="StrongWildcard"
             messageEncoding="Text" textEncoding="utf-8"
             useDefaultWebProxy="true" allowCookies="false"
             maxBufferPoolSize="1024768"
             maxReceivedMessageSize="2097152" >
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00"
            enabled="false" />
          <security mode="None">
            <transport clientCredentialType="None" />
            <message clientCredentialType="None" negotiateServiceCredential="false" establishSecurityContext="false" />
          </security>
        </binding>
      </wsHttpBinding>
   </bindings>
   <client>
      <endpoint name="WSHttpBinding_ITestingWebService" 
           address="http://www.someuri.net/supertest/TestingWebService.svc?wsdl"
           binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_ITestingWebService"
           contract="ServiceReference1.ITestingWebService" >
         <identity>
            <dns value="localhost" />
         </identity>
      </endpoint>
   </client>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:45:37.817

您很可能在`ITestingWebService`接口上存在服务合同不匹配的问题。尝试通过右键单击 Visual Studio 中的服务引用来运行“更新服务引用”，看看是否能解决问题。

# android - 使用自定义主题和选项的自定义选项菜单

> ID：10144350
> 
> 赞同：0
> 
> 时间：2012-04-13T16:05:07.007
> 
> 标签：android, android-theme, android-optionsmenu

我想创建如下的自定义选项菜单，并且还希望它在所有活动中都可用。

![示例 1](../Images/88f15c4a4c329ee31b128c008158f4bf.png)

![示例 2](../Images/e0bd39a6dec206c94be703ad0f2f8ccf.png)

到目前为止，我可以使用 onCreateOptionsMenu 方法添加选项菜单，并设置其图标。但不知道它是如何膨胀的，如图所示。

在做了一些谷歌搜索后发现了一个 [例子](http://www.codeproject.com/Articles/173121/Android-Menus-My-Way)。如果可以在实现自定义选项菜单方面获得更多帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:23:35.827

这些都不是选项菜单。如果它们碰巧是通过按下 MENU 按钮触发的，那么这些应用程序正在监视`onKeyDown()`MENU 按钮的按下情况。这也意味着他们的菜单将无法在缺少此类 MENU 按钮的设备上运行。

我强烈建议您遵循[Android 设计指南](http://developer.android.com/design/patterns/index.html)。我建议您开始[集成操作栏并使用操作项和操作溢出区域](http://android-developers.blogspot.com/2012/01/say-goodbye-to-menu-button.html)，也许利用[ActionBarSherlock](http://actionbarsherlock.com/)来支持 Android 2.x 设备。

# ios - Xcode 应用提交失败

> ID：10144356
> 
> 赞同：1
> 
> 时间：2012-04-13T16:05:26.447
> 
> 标签：ios, xcode, submission

当我尝试使用 Xcode 验证我的 iPad 应用程序时遇到问题：

*   干净的
*   为归档而构建
*   档案
*   单击管理器中的验证按钮
*   选择应用程序和分发配置，然后单击“下一步”。

然后它告诉我“打包操作失败”，仅此而已。

我检查了什么：

*   归档的构建配置是分发
*   我试图将构建配置从分发更改为发布
*   分配的准备是好的
*   捆绑包版本与 iTunes Connect 上的相同
*   我的项目文件夹中的文件夹中没有文件夹
*   我还尝试使用 cmd "find . -name '._ *.* ' -exec rm -f '{}' \;"删除 ._ 文件 在我的项目目录中

我该怎么做才能通过验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:49:46.007

我有所有这些症状。终于在 6 小时后，我通过了“验证”。我之前在多台计算机和网络连接的存储设备/NFS 系统之间移动了我的项目，并且确实发现了几个我删除的虚假“._*”文件。另一个症状：在模拟器中我没有“主页按钮”。

使用 cocoatech 的“Pathfinder”进行检查，我发现许多名为“Icon”（只有四个字母）的虚假文件，大小接近 300K，权限为 777，无缘无故地位于必须目录和子目录中。我删除了这些。我还在 Settings.bundle 中找到了一个，并将其删除。由于某种原因，该目录没有组执行权限，因此我将其修改为与其他目录一样。

最后我发现了一个额外的“zh-Hans.lproj”文件——这个应用程序是英文的，总共国际化了四七种语言，但是这个用于学习汉字的应用程序没有中文版本（我所有的其他应用程序都有。）所以我删除了 zh-hans.lproj 文件（再次从文件系统中），进行了新的清理，为存档构建，存档并能够通过验证。（我在 Xcode 的项目中找不到具有简体中文国际化的项目）。

任何时候都没有任何错误出现在任何日志文件中。只是“打包操作失败”。

如果有人知道这些故障记录在哪里，请告诉我们。

只有在成功验证后，Xcode 管理器才会显示 50MB 的应用程序大小；在那之前，它显示了一个微不足道的数字（187K 字节？），这也表明有些可疑。

感谢追查此事的人们提供的所有提示。请注意，这些图标文件在任何时候都无法通过我知道的任何命令从终端看到。他们被标记为隐藏。其中之一（用于 settings.bundle）确实出现在 Xcode 中，但我无法选择或删除它。

应用提交！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:07:25.257

存档的构建配置必须是 RELEASE （不确定这是问题所在）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T16:09:00.717

[这是](http://soulwithmobiletechnology.blogspot.co.uk/2011/03/how-to-create-distribution-build-with.html)Reetu Raj 关于创建发行版构建的优秀教程。

# javascript - 过渡 svg.arc 的 innerRadius - D3.js

> ID：10144361
> 
> 赞同：0
> 
> 时间：2012-04-13T16:05:47.103
> 
> 标签：javascript, svg, d3.js, transitions, sunburst-diagram

[我有一个问题，与这个](https://stackoverflow.com/questions/10089453/transitioning-sunburst-in-d3-js)问题密切相关。

与示例相反，我还需要转换旭日形的 innerRadius，因此 d3.svg.arc() 的 innerRadius 属性。我知道对于“d”的转换必须以类似的方式完成（通过存储旧的 innerRadius 使用 attrTween），但我没能做到。

有什么建议吗？一个代码片段会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:36:01.027

当你说“sunburst”时，你的意思是一个多彩的派，所有的弧线都不同吗？如果是这样，示例“ [Multiple D3 Pie Charts Mixed In With Common HTML Layout Constructs](http://bl.ocks.org/2212156) ”在绘制饼图时转换内半径（只需在代码中搜索单词转换）。

另一种选择是查看这个“ [Sunburst Coffee Flavor Wheel](http://www.jasondavies.com/coffee-wheel/) ”示例，它更复杂，但显示了如何同时转换多个弧。

我希望它有所帮助。

坦率

# xml - How to stop Mule when some condition is met in some class

> ID：10144363
> 
> 赞同：-1
> 
> 时间：2012-04-13T16:05:50.053
> 
> 标签：xml, mule

The class `phekheij.Tllas` implements `MuleContextNotificationListener` so that it can be run before everything else defined in Mule config:

```
...
<spring:beans>
    <spring:bean id="initializer" class="phekheij.Tllas" />
</spring:beans>

<notifications>
    <notification event="CONTEXT" />
    <notification-listener ref="initializer" />
</notifications>
... 
```

What do I have to do so that Mule does not continue running given some condition, for example, when an exception is thrown from inside that class?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:20:24.203

I've never tried shutting down Mule during its initialization sequence so I'm unsure what will happen but you could try doing this in phekheij.Tllas:

```
muleContext.stop();
muleContext.dispose(); 
```

Background threads may keep the JVM running after that so you may end up having to:

```
System.exit(-1); 
```

after a while.

# python - 为什么 [-1:-1:-1] 不能用于反转字符串？

> ID：10144364
> 
> 赞同：3
> 
> 时间：2012-04-13T16:05:50.863
> 
> 标签：python, string, slice

也许有人可以解释为什么反转字符串的特定切片操作不起作用。一定有一些关于切片的东西我不明白。基本操作：s[start:end:step]

给定

```
s='abcd' 
```

要反转这个字符串，我可以使用默认值

```
s[::-1] 
```

或者

```
s[-1::-1] 
```

这些都很好，但为什么不

```
s[-1:-1:-1] 
```

工作并给我整个字符串颠倒？它应该从字符串中的最后一个字符 (-1) 开始，步长为 -1。它应该在-1 之前下降到一个，即索引0。相反，我得到''。

```
for i in xrange(3, -2, -1):
    print 's[-1:%d:-1] => ' %i,
    print s[-1:i:-1] 
```

产量：

```
s[-1:3:-1] =>     # didn't expect any output
s[-1:2:-1] =>  d
s[-1:1:-1] =>  dc
s[-1:0:-1] =>  dcb
s[-1:-1:-1] =>    # shouldn't this be 'dcba'? 
```

我在这里想念什么？

（我确实看到了很多关于反转字符串的帖子，但是如果在某个地方解释了这个特定的项目，我就错过了）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T16:11:34.290

```
s[-1:-1:-1] 
```

由于相同的原因不起作用

```
s[0:0] 
```

不给你'abcd'。

切片时，您指的是两个元素*之间*的空间，而不是这些元素的位置。所以你要求-1和-1之间的空格，即''。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T16:10:51.077

在

```
>>> s[-1:-1:-1]
>>> '' 
```

`start`和`end`都是，所以`-1`它们是相同的。切片将数组中的每个元素从`start`到 ，`end`因为它`step`每次都增加。如果它已经达到了，`end`那么切片就完成了......因此它返回`''`。

尝试：

```
>>> s[1:1:1]
>>> '' 
```

这可能有助于使这更有意义，因为它几乎是同一件事，但是是积极的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T16:15:16.300

在这种情况下，负指数和非负指数是两个不同的类别：

*   非负索引从头开始；
*   负索引从末尾开始。

对我来说，切片的定义似乎很合乎逻辑，因此后者永远不会溢出到前者，正如您所说的那样：

> 它应该在 -1 之前下降到一个，即索引 0

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T16:12:15.747

你错过了切片的全部意义

`[start:end:stride]`是切片运算符的样子

如果步幅是负数，那么当你从高到低移动时，你的开始肯定应该大于结束。你所有失败的例子都违反了这一点。

你绝对应该开始阅读[扩展切片](http://docs.python.org/release/2.3.5/whatsnew/section-slices.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T16:14:56.250

您不能指望*同时*`-1`表示字符串中的最后一项和字符串*中*第一项的“之前的项目”。那将是不一致的。

 **也许您在想象 Python 将字符串视为循环，并认为`-1`它同时是“之前的项目”`0`和字符串中的最后一项。但事实并非如此。例如，如果是这种情况，那么这将成立：

```
'abcd'[-2:-1:-1] == 'cbad' 
```

但事实并非如此。结果只是空字符串。

```
>>> 'abcd'[-2:-1:-1] 
'' 
```

字符串切片中负索引的正确解释是从字符串末尾的反向索引，而不是从`0`.

作为进一步思考的食物，请考虑以下内容：

```
a = 'abcd'
a[-1:-(len(a) + 0):-1] == 'dcb'
a[-1:-(len(a) + 1):-1] == 'dcba'
a[-1:-(len(a) + 2):-1] == 'dcba' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-13T16:23:54.380

这有点不幸，不是吗？这是一个尴尬的解决方法。

```
for i in range(3, -2, -1):
    j = i if i != -1 else None
    print 's[-1:%s:-1] => ' % str(j),
    print s[-1:j:-1]

s[-1:3:-1] =>  
s[-1:2:-1] =>  d
s[-1:1:-1] =>  dc
s[-1:0:-1] =>  dcb
s[-1:None:-1] =>  dcba 
```

这是同一件事的变体。我不确定它是否不那么尴尬。

```
for i in range(3, -1, -1) + [None]:
    print 's[-1:%s:-1] => ' % str(i),
    print s[-1:i:-1]

s[-1:3:-1] =>  
s[-1:2:-1] =>  d
s[-1:1:-1] =>  dc
s[-1:0:-1] =>  dcb
s[-1:None:-1] =>  dcba 
```**

# svn - 为什么 subversion 默认忽略 .cshtml 文件？

> ID：10144365
> 
> 赞同：0
> 
> 时间：2012-04-13T16:05:57.463
> 
> 标签：svn, razor

当我将 .cshtml 文件添加到我的工作副本时，它们默认显示为“忽略”，我不知道为什么？

这是我对受影响文件夹的忽略模式：

> 测试结果 __MVC_BACKUP *.class *.exe *.dll *.mine *.obj *.ncb *.lib *.log *.idb *.pdb *.ilk .msi .res *.pch *.suo *.exp .~ .~ ~. cvs CVS .CVS .cvs release Release debug Debug ignore Ignore bin Bin obj Obj *.cspkg *.cache *.suo

（大部分来自这个线程[Best general SVN Ignore Pattern？](https://stackoverflow.com/questions/85353/best-general-svn-ignore-pattern)）

# c# - 编译中的声明捕获阶段

> ID：10144367
> 
> 赞同：3
> 
> 时间：2012-04-13T16:06:08.273
> 
> 标签：c#, compilation, declaration, forward-declaration

像 C 和 C++ 这样的语言依赖前向声明来解决类型或函数声明中的循环依赖关系。在 C# 中，这不再是必需的，因为声明捕获阶段分为两个阶段；一个捕获符号名称，另一个实际执行符号声明构造。

符号名称捕获阶段是否有标准名称？我会假设声明捕获将留给涉及解析声明中的所有符号的传统阶段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T00:20:56.930

C# 编译器实际上有一个声明阶段，它在其中构建符号表。Roslyn C# 编译器不是很清楚，因为并非所有事情都是在大范围的扫描阶段完成的。相反，每个符号都是根据需要单独构建的。但是，仍然需要将语法中的类型和成员声明转换为符号的步骤。绑定阶段在逻辑上紧随其后，使用声明的符号表解析对类型和成员名称的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:11:07.817

我认为这两个阶段被称为

1.  解析
2.  捆绑

解析是句法。绑定是为标识符和名称赋予意义。

C++ 也可以这样做。它只是被定义为不。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T20:24:12.280

我发现了 Eric Lippert 的这篇博客文章，它对我正在寻找的东西给出了最好的解释：

> C# 语言不要求在使用之前进行声明，这对用户和编译器编写者有两个影响。对用户的影响是，您不会只重新编译更改文件时更改的 IL；重新编译整个程序集。幸运的是，C# 编译器足够快，这很少是一个大问题。（另一种看待这一点的方式是，C# 中重新编译的“粒度”是在项目级别，而不是文件级别。）
> 
> 对编译器编写者的影响是我们必须有一个“两遍”编译器。在第一遍中，我们寻找声明并忽略正文。一旦我们从 C++ 中的头文件中获得的声明中收集了所有信息，我们对代码进行第二次遍历并为主体生成 IL。

...

> 然后，我们执行**“声明”传递**，在其中记录程序中每个命名空间和类型声明的位置。至此，我们已经完成了第一阶段的源代码的查看；随后的每一次传递都超过了从声明中推导出的一组“符号”。
> 
> 然后我们进行一次验证，验证所有声明的类型在其基本类型中没有循环。我们首先需要这样做，因为在随后的每一次传递中，我们都需要能够向上遍历类型层次结构，而不必处理循环。

[http://blogs.msdn.com/b/ericlippert/archive/2010/02/04/how-many-passes.aspx](http://blogs.msdn.com/b/ericlippert/archive/2010/02/04/how-many-passes.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T17:59:16.530

微软将在 .Net 5 中引入 Roslyn，即编译器即服务。[Roslyn 的这份概述](http://innovation.tss-yonder.com/2012/01/11/compilers-as-a-service/)将编译器在代码生成之前的三个步骤描述为：词法分析、句法分析和语义分析。[Roslyn 项目的概述](http://msdn.microsoft.com/en-us/hh500769)证实了这些描述，但语言不太精确。

# javascript - javascript 中的 Web 服务调用和 JSON 数组操作

> ID：10144368
> 
> 赞同：2
> 
> 时间：2012-04-13T16:06:13.323
> 
> 标签：javascript, jquery, sencha-touch, arrays

我需要从 javascript 调用 Web 服务，该服务返回以下格式的 JSON 数组：

```
["hello","there","I","am","an","array"] 
```

不幸的是，我正在使用（Sencha Touch）将此数据加载到小部件中的 javascript 库不接受该格式作为数据输入。但是，它将适用于这样的事情：

```
[["hello"],["there"],["I"],["am"],["an"],["array"]] 
```

所以这里有两个问题——如何在 javascript 中调用该 Web 服务，然后将返回的数组操作为我需要的格式？我一直在研究 jQuery 的 getJson() 方法，不确定这是要走的路还是有更好的方法。

提供 JSON 数组的 URL [就在这里。](http://fastmotorcycleservice.cloudapp.net/FastMotorCycleListService.svc/list/Bruno) 谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:30:02.890

这是一个 jsFiddle，显示了您所询问的两个部分。我将 jQuery 用于我的 AJAX 调用（在 jsFiddle 中伪造），并且我使用 Underscore.js 进行操作：

[http://jsfiddle.net/JohnMunsch/E7YTQ/](http://jsfiddle.net/JohnMunsch/E7YTQ/)

```
// Part 1: Get the raw data. Unfortunately, within a jsFiddle I can't go get it from a different domain. So I'm
// simulating the call instead.
var rawDataPromise = $.ajax({
    url : "/echo/json/",
    data : fakeData,
    type : "POST"
});
// var rawDataPromise = $.ajax("http://fastmotorcycleservice.cloudapp.net/FastMotorCycleListService.svc/list/Bruno");

rawDataPromise.done(
  function (results) {
    // Part 2: Manipulate the data into the form we need.
    var manipulatedResults = _.map(results, function (item) { return [ item ]; });

    console.log(manipulatedResults);
  }
);

// You could also pull that together into a single call $.ajax(...).done(function (results) { ... }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:13:36.700

一旦您在一个局部变量中拥有数据，您就可以根据需要对其进行操作：

```
var data = the_function_you_use_to_get_data();
var formatted_array = new Array();
for(i in data){
    var d = new Array();
    d[0] = i;
    formatted_array.push(d);
} 
```

我希望它回答了你的问题

# iphone - iOS5 工具栏背景图片

> ID：10144369
> 
> 赞同：0
> 
> 时间：2012-04-13T16:06:13.667
> 
> 标签：iphone, objective-c, ios5

我对 iOS 编程很陌生。我正在尝试将工具栏背景设置为自定义图像。我也在使用故事板。我该怎么做？我是否在 UI Kit 框架中编辑 UIToolbar？我需要更改 Storyboard 中的某些内容吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T19:38:47.093

您可以使用`UIToolbar`'s 的内置`-setBackgroundImage:forToolbarPosition:barMetrics:`方法：

```
// portrait
[yourToolbar setBackgroundImage:[UIImage imageNamed:@"YourToolbarBkg-Portrait.png"] forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault];

// landscape
[yourToolbar setBackgroundImage:[UIImage imageNamed:@"YourToolbarBkg-Landscape.png"] forToolbarPosition:UIToolbarPositionAny barMetrics: UIBarMetricsLandscapePhone]; 
```

*   `YourToolbarBkg-Portrait.png`肖像模式将是 320x44 bkg 图像
*   `YourToolbarBkg-Landscape.png`横向模式将是 480x32 bkg 图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T16:15:50.123

UIToolbar 继承自 UIView。这对我有用：

```
[topBar insertSubview:[[[UIImageView alloc] initWithImage:[UIImage imageNamed:BAR_BKG_IMG]] autorelease] atIndex:0]; 
```

**更新**

topBar ------ 是你正在使用的 UIToolBar 的出口

在你创建你的 UIToolBar 的地方使用这个代码实现 UIToolbar 的类。再加上告诉我你使用工具栏的主要目的是什么

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T16:14:36.973

与其编辑 UIToolBar，不如创建一个您想要的大小和皮肤相同的 UIView？如果你是新手，那会更容易。

或者如果你想覆盖 UIToolbar：

```
@implementation UIToolbar (CustomImage)
- (void)drawRect:(CGRect)rect {
    UIImage *image = [UIImage imageNamed: @"image.png"];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}
@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T09:39:20.403

对 ToolBars 和 NavBars 的背景图像很有帮助。我知道设置 NavBar 和 ToolBar 的背景图像通常是轻而易举的事。但是，当您展示模态 VC 时，出于某种疯狂的原因，在添加了 NavBar 并且您确实更改了背景图像时，它的大小似乎翻了一番。改变高度会产生奇怪的结果。

我的问题是我在整个应用程序中都使用了 NavController，但需要一个模式视图来显示它的一个或两个方面。很简单。但是，我需要一个带有完成按钮的 NavBar 或 ToolBar 类型的标题来将 VC 从堆栈中弹出。再次，不是问题。但我需要 NavBar 或 ToolBar 看起来与我的应用程序中的其他任何地方相同。

我选择了一个工具栏，因为 VC 是以模态方式呈现的。所以，我的工具栏就坐在那里，典型的苹果蓝色。很好，但不是我的应用程序的其余部分看起来如何，每个 NavBar 都使用了一个变黑的图像。使用 iOS 5 外观代理，我更改了工具栏的背景图像。这奏效了。但是，除非我的 UIImage 完全符合工具栏所期望的比例和大小，否则我就陷入了困境。图像根本看起来不正确。所以，我决定创建一个 UIIMageView，我可以在其中控制内容模式，然后在工具栏上插入一个子视图。

看看我下面的代码。

```
UIImageView *toolbarImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:NAV_BAR_BACKGROUND]];
    [toolbarImageView setFrame:[self.IBOToolBar bounds]];
[toolbarImageView setContentMode:UIViewContentModeScaleAspectFill];
[self.IBOToolBar insertSubview:toolbarImageView atIndex:1]; 
```

这有点毛骨悚然，但我希望这有助于有人改变他们工具栏上的图像。

NAV_BAR_BACKGROUND 可以定义如下：

```
#define NAV_BAR_BACKGROUND @"navBarBlackMattDarkSquare.png" 
```

# android - 在android中返回onActivityResult后无法显示对话框？

> ID：10144370
> 
> 赞同：0
> 
> 时间：2012-04-13T16:06:14.500
> 
> 标签：android, dialog

在我的应用程序中，我去了画廊并返回 onActivityresult 方法，在该方法中我打开了对话框，有时它显示对话框，有时不显示。

它显示此错误

> 活动 com.Iplaybook.Dashboardhome 泄露了最初添加在这里的窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@40f95ff0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:04:58.727

Think of the following scenario: You open dialog box and the you open gallery. At this point, Android doesn't have enough memory so it stops your current activity. When you close the gallery, android recreates your activity and doesn't display the dialog. To check it, you can put a breakpoint in onCreate() and see if it is called when you come back from the gallery.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:42:01.157

我认为您在转到 Galery 之前创建对话框并在 onActivityResult 方法中显示它。这是错误的方式。您应该只在 ActivityResult 方法中创建和显示对话框

# c - 为什么 strcmp 在这种情况下不返回 0？

> ID：10144375
> 
> 赞同：2
> 
> 时间：2012-04-13T16:06:30.380
> 
> 标签：c, strcmp

所以我从文件中一个一个地读取字符：

```
char temp[3];

temp[0] = nextchar;
printf("%c",temp[0]); //prints %

temp[1] = nextchar = fgetc(srcptr);
printf("%c",temp[1]); //prints 2

temp[2] = nextchar = fgetc(srcptr);
printf("%c",temp[2]); //prints 0

if(strcmp(temp, "%20") == 0) { printf("%s","blahblah"); } 
```

理想情况下，这应该在最后打印“blahblah”。然而，事实并非如此。那么为什么 strcmp 返回 0，更重要的是：*我该如何修复它？*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T16:07:41.333

您需要将终止温度设为空。

**编辑**

更改`char temp[3];`为`char temp[4]; temp[3] = 0;`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T16:08:42.107

改为使用`memcmp`，因为`strcmp`期望两个字符串都被`'\0'`终止（并且`temp`不是）：

```
if(memcmp(temp, "%20", sizeof(temp)) == 0) { printf("%s","blahblah"); } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T16:10:21.520

字符串是一个字符数组，以 '\0' 字符结尾。由于您的`tmp`数组可以容纳三个字符并且它们都不是终止空字符，因此 strcmp （和任何其他字符串函数）会认为它会继续，读取分配空间之后的内存，直到它遇到空字符（或在它累到时崩溃读取受限的内存空间）。

字符串 "%20" 实际上是字符：'%', '2', '0', '\0'

所以修复它的最简单方法是声明`tmp`一个更大的并将 '\0' 分配给最后一个元素：

```
char tmp[4];
...
tmp[3] = '\0'; 
```

# spring-security - 以编程方式使用不同的 Spring Security Authorities 重新登录用户

> ID：10144377
> 
> 赞同：0
> 
> 时间：2012-04-13T16:06:40.583
> 
> 标签：spring-security

**PreReq：**
用户登录并获得使用 userService 的自定义实现从数据库中获取的角色。IE

> 身份验证提供者 user-service-ref="securityPolicyService"

实现的方法*loadUserByUsername*被调用，并且为他们正在登录的特定俱乐部的用户加载角色，默认一个是第一次加载的。

然后，用户从 UI 中单击不同的俱乐部，然后我调用服务上的方法来获取该俱乐部的新权限列表。

然后我执行以下操作：

```
Object principle = SecurityContextHolder.getContext().getAuthentication().getPrincipal();
SecureMember sm = (SecureMember) principle;
Authentication auth = 
      new UsernamePasswordAuthenticationToken(sm, null, newAuthories); <br><br>
    SecurityContextHolder.getContext().setAuthentication(auth);<br>
request.getSession(false).invalidate(); 
```

SecureMember 从 SpringFramework 扩展 User。

问题是 SecureMember 权限永远不会更新为新权限。

谢谢加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:26:10.570

如果 为 null 并且在请求期间无效，则 Spring Security 不会存储安全上下文`HttpSession`，因此如果您在使会话无效后设置上下文（并且不创建新会话），则不会存储它。

如果是这种情况（并且您启用了调试日志记录），您应该会看到[此日志消息。](https://github.com/SpringSource/spring-security/blob/master/web/src/main/java/org/springframework/security/web/context/HttpSessionSecurityContextRepository.java#L305)

要么创建一个新会话，要么不使原始会话无效。

# magento - magento 增值税号 pdf 发票

> ID：10144381
> 
> 赞同：4
> 
> 时间：2012-04-13T16:06:49.307
> 
> 标签：magento, pdf

谁能帮我把增值税/税号放在 Magento 的 pdf 发票上？

我尝试了这段代码，但没有奏效：

```
$taxvat = $order->getData('customer_taxvat');
$page->drawText('Tax/Vat: '.$taxvat, 35, 567); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T07:28:22.763

你可以通过这样做来检索它； `$order->getCustomerTaxvat()`

如果这个值为空，你可以试试这个；

```
$customer = Mage::getModel('customer/customer')->load($order->getData('customer_id'));
$taxVat = $customer->getData('taxvat'); 
```

# mysql - MySQL 如何在一组中选择两个日志条目之间的时间差？

> ID：10144382
> 
> 赞同：0
> 
> 时间：2012-04-13T16:06:49.890
> 
> 标签：mysql, data-analysis

我有大量的日志条目需要对其进行分析。我想要做的是为每组日志选择开始和完整条目之间的时间差。我该怎么做呢？

```
Sample Log Set:

ExecuteTime, Entry, TrackKey
7.2408730984, Start update, 487996b0608b0006bfbe5501217c76bde879b728
9.9038851261, Complete update, 487996b0608b0006bfbe5501217c76bde879b728 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:16:58.453

我假设开始时间最短，结束时间最长。如果不是这样，这个查询会出错

```
select TrackKey, (MAX(ExecuteTime) - MIN(ExecuteTime)) as time_difference
FROM table
WHERE Entry IN('Start update', 'Complete update')
GROUP BY TrackKey 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:15:45.837

未经测试：

```
SELECT * FROM Table AS t1 LEFT JOIN (SELECT MIN(Sample) AS Min, MAX(Sample) AS Max FROM Table) AS t2 ON t1.TrackKey = t2.TrackKey 
```

更新 ：

```
SELECT
    (t3.End - t2.Start) AS Total
FROM Table AS t1
    LEFT JOIN
    (
        SELECT
            Sample AS Start
        FROM
            Table
        WHERE
            Entry = "Start update"
    ) AS t2 ON t1.TrackKey = t2.TrackKey
LEFT JOIN
    (
        SELECT
            Sample AS End
        FROM
            Table
        WHERE
            Entry = "Complete update"
    ) AS t3 ON t1.TrackKey = t3.TrackKey 
```

# sql - 您将如何使用 SQL 或 R 库 sqldf 完成此任务？

> ID：10144386
> 
> 赞同：4
> 
> 时间：2012-04-13T16:06:56.840
> 
> 标签：sql, sql-server-2005, r

我需要实现以下函数（理想情况下在 R 或 SQL 中）：给定两个数据框（有一个用户 ID 列，其余列是布尔属性（它们只允许为 0 或 1））我需要返回具有两列（用户 ID 和计数）的新数据框，其中 count 是两个表中每个用户的 0 和 1 匹配数。用户 F 可能出现在两个数据帧中，也可能只出现在一个数据帧中。在最后一种情况下，我需要为该用户数返回 NA。我写一个例子：

```
DF1
ID c1 c2 c3 c4 c5
1   0  1  0  1  1
10  1  0  1  0  0
5   0  1  1  1  0
20  1  1  0  0  1
3   1  1  0  0  1
6   0  0  1  1  1
71  1  0  1  0  0
15  0  1  1  1  0
80  0  0  0  1  0

DF2  
ID c1 c2 c3 c4 c5
5   1  0  1  1  0
6   0  1  0  0  1
15  1  0  0  1  1
80  1  1  1  0  0
78  1  1  1  0  0
98  0  0  1  1  1
1   0  1  0  0  1
2   1  0  0  1  1
9   0  0  0  1  0 
```

我的函数必须返回如下内容：（以下是子集）

```
DF_Return
ID Count
1    4
2    NA
80   1
20   NA
   .
   .
   . 
```

您能给我一些建议来执行此操作吗？我不是 sql 方面的专家。

我将代码放在 R 中以生成我上面使用的实验。

```
 id1=c(1,10,5,20,3,6,71,15,80)
 c1=c(0,1,0,1,1,0,1,0,0)
 c2=c(1,0,1,1,1,0,0,1,0)
 c3=c(0,1,1,0,0,1,1,1,0)
 c4=c(1,0,1,0,0,1,0,1,1)
 c5=c(1,0,0,1,1,1,0,0,0)
 DF1=data.frame(ID=id1,c1=c1,c2=c2,c3=c3,c4=c4,c5=c5)
 DF2=data.frame(ID=c(5,6,15,80,78,98,1,2,9),c1=c2,c2=c1,c3=c5,c4=c4,c5=c3) 
```

提前谢谢了。此致！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T17:19:10.700

这是适合您的方法。第一个硬编码要比较的列，而另一个更通用且不知道 DF1 和 DF2 有多少列：

```
#Merge together using ALL = TRUE for equivlent of outer join
DF3 <- merge(DF1, DF2, by = "ID", all = TRUE, suffixes= c(".1", ".2"))
#Calculate the rowSums where the same columns match
out1 <- data.frame(ID = DF3[, 1], count = rowSums(DF3[, 2:6] ==  DF3[, 7:ncol(DF3)]))

#Approach that is agnostic to the number of columns you have
library(reshape2)
library(plyr)
DF3.m <- melt(DF3, id.vars = 1)
DF3.m[, c("level", "DF")] <- with(DF3.m, colsplit(variable, "\\.", c("level", "DF")))
out2 <- dcast(data = DF3.m, ID + level ~ DF, value.var="value")
colnames(out)[3:4] <- c("DF1", "DF2")
out2 <- ddply(out, "ID", summarize, count = sum(DF1 == DF2))

#Are they the same?
all.equal(out1, out2)
#[1] TRUE

> head(out1)
  ID count
1  1     4
2  2    NA
3  3    NA
4  5     3
5  6     2
6  9    NA 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T16:22:03.477

```
SELECT
  COALESCE(DF1.ID, DF2.ID)  AS ID,
  CASE WHEN DF1.c1 = DF2.c1 THEN 1 ELSE 0 END +
  CASE WHEN DF1.c2 = DF2.c2 THEN 1 ELSE 0 END +
  CASE WHEN DF1.c3 = DF2.c3 THEN 1 ELSE 0 END +
  CASE WHEN DF1.c4 = DF2.c4 THEN 1 ELSE 0 END +
  CASE WHEN DF1.c5 = DF2.c5 THEN 1 ELSE 0 END AS count_of_matches
FROM
  DF1
FULL OUTER JOIN
  DF2
    ON DF1.ID = DF2.ID 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T17:18:28.347

可能有一种更优雅的方式，但这有效：

```
x <- merge(DF1,DF2,by="ID",all=TRUE)
pre <- paste("c",1:5,sep="")
x$Count <- rowSums(x[,paste(pre,"x",sep=".")]==x[,paste(pre,"y",sep=".")])
DF_Return <- x[,c("ID","Count")] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-26T00:29:00.610

我们可以`safe_full_join`从我的包[*safejoin*](https://github.com/moodymudskipper/safejoin)中使用，并`==` 在冲突的列之间应用。这将产生一个新的数据框，其中包含我们可以使用的逻辑 `c*`列`rowSums`。

```
# devtools::install_github("moodymudskipper/safejoin")
library(safejoin)
library(dplyr)

safe_full_join(DF1, DF2, by = "ID", conflict = `==`) %>%
  transmute(ID, count = rowSums(.[-1]))
#    ID count
# 1   1     4
# 2  10    NA
# 3   5     3
# 4  20    NA
# 5   3    NA
# 6   6     2
# 7  71    NA
# 8  15     1
# 9  80     1
# 10 78    NA
# 11 98    NA
# 12  2    NA
# 13  9    NA 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T16:12:11.823

您可以使用该`apply`函数来处理此问题。要获得每一行的总和，您可以使用：

```
sums <- apply(df1[2:ncol(df1)], 1, sum)
cbind(df1[1], sums) 
```

这将返回除第一列之外的所有列的总和，然后将其绑定到第一列以取回 ID。

您可以在两个数据帧上执行此操作。我不太清楚在那之后想要的行为是什么，但也许看看这个`merge`功能。

# mysql - 在第二个表中按匹配选择顺序

> ID：10144387
> 
> 赞同：2
> 
> 时间：2012-04-13T16:06:59.513
> 
> 标签：mysql, sql

我在尝试按投票次数排序的项目的选择 ID 时遇到了一些麻烦。投票是在单独的表格中进行的，但顺序没有按正确的顺序出现。

谁能指出这是哪里出错了？

表`CompetitionEntries`（未在查询中使用，但可能相关）

```
id | PhotoTitle
=======================
23 |   'Photo 1'
24 |   'Photo 2'
25 |   'Photo 3'
26 |   'Photo 4'
======================= 
```

桌子`CompetitionVotes`

```
id | IdOfPhotoVotedOn
=======================
10 |   23
11 |   24
12 |   22
13 |   22
14 |   22
15 |   24
======================= 
```

我正在尝试使用下面显示的语句“

```
SELECT `IdOfPhotoVotedOn`, COUNT(`IdOfPhotoVotedOn`) 'Votes' 
FROM `CompetitionVotes` 
WHERE 1
GROUP BY `IdOfPhotoVotedOn`
ORDER BY 'Votes' DESC, `IdOfPhotoVotedOn` 
```

我得到的是

```
IdOfPhotoVotedOn | Votes
==========================
   22            |   3
   23            |   1
   24            |   2 
```

我想得到的是

```
IdOfPhotoVotedOn | Votes
==========================
   22            |   3
   24            |   2
   23            |   1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:13:17.040

```
SELECT * FROM 
(SELECT `IdOfPhotoVotedOn`, COUNT(`IdOfPhotoVotedOn`) 'Votes' 
FROM `CompetitionVotes` 
WHERE 1
GROUP BY `IdOfPhotoVotedOn`) A
ORDER BY A.Votes DESC; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T16:13:30.503

尝试这个？

```
SELECT `IdOfPhotoVotedOn`, COUNT(`IdOfPhotoVotedOn`) 'Votes' 
FROM `CompetitionVotes` 
WHERE 1
GROUP BY `IdOfPhotoVotedOn`
ORDER BY COUNT(`IdOfPhotoVotedOn`) DESC, `IdOfPhotoVotedOn` 
```

# typo3 - 如果 tt_news 中的帖子属于某个类别，则有条件

> ID：10144388
> 
> 赞同：2
> 
> 时间：2012-04-13T16:07:00.843
> 
> 标签：typo3, typoscript

我为 tt_news 制作了一个自定义标记，它显示来自媒体字段的第一张图像，或者如果它属于某个类别（比如说 ID = 2 的类别），则显示第三张图像。我不知道如何使这个条件。这是我到目前为止所拥有的：

```
 10 = IMAGE
    10.file{
        width = 550
        height = 350
        import = uploads/pics/
        import{
            field = image
            listNum = 0

            #If also belongs to the category "Startseite", the listNum should be 2
            listNum.stdWrap.override = TEXT
            listNum.stdWrap.override{
                value = 0
                if{
                    #??????
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:45:45.233

您需要按照`userFunc`（底部）部分的文档中所述编写自定义条件

[http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.3.2/view/1/4/](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.3.2/view/1/4/)

新闻和类别与 MM 关系有关，因此您只需检查 MM 表是否包含这对...

`typo3conf/localconf.php`：

```
function user_newsInCategory($catUid) {
    $ttNewsGet = (t3lib_div::_GP('tx_ttnews'));
    $res = $GLOBALS['TYPO3_DB']->exec_SELECTquery(
        'uid_foreign',
        'tt_news_cat_mm',
        'uid_foreign = ' . $catUid . ' AND uid_local=' . intval($ttNewsGet['tt_news'])
    );
    return ($GLOBALS['TYPO3_DB']->sql_num_rows($res) > 0) ? true : false;
} 
```

**阻止后**在TS 中的某处`10 = IMAGE { ... }`：

```
[userFunc = user_newsInCategory(2)]
    10.file.import.listNum = 2
[end] 
```

**编辑：**

正如您在示例中看到的，它仅在显示新闻时才有效（即，如果参数 &tx_ttnews[tt_news] 存在于 URL 中）

要检查每个列表项的类似检查，您需要使用 extraItemMarkerProcessor 通过钩子（如**tt_news**[手册](http://typo3.org/extension-manuals/tt_news/3.2.0/view/1/5/)中所述）使用自定义标记- 然后您可以对每个 $row 使用类似的条件来显示不同的图像。

# php - MySQL - 使用 OR 时如何知道哪个字段与结果匹配

> ID：10144389
> 
> 赞同：1
> 
> 时间：2012-04-13T16:07:00.630
> 
> 标签：php, mysql, search, keyword

我正在创建一个引擎来使用 MySQL 在多个字段中查找结果，例如：

```
SELECT table1.*, table2.* FROM table1
JOIN table2
ON table1.id = table2.tid
WHERE 
(table1.field1 LIKE 'keyword%' OR table1.field2 LIKE 'keyword%')
AND
(table2.field1 LIKE 'keyword%' OR table2.field2 LIKE 'keyword%')
ORDER BY table1.id ASC; 
```

但是现在我需要知道哪个字段与关键字匹配......我该怎么做？

顺便说一句，我正在使用 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:11:45.413

未经证实：

```
SELECT table1.*, 
       table2.*, 
       case (table2.field1 LIKE 'keyword%' and table1.field1 LIKE 'keyword%')
           when 1 
           then 'f1' 
           else 'f2' 
       end as field
FROM table1
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:10:24.577

你可以做

```
SELECT table1.*, table2.*, 'table1' as `target` as FROM table1
JOIN table2
ON table1.id = table2.tid
WHERE 
(table1.field1 LIKE 'keyword%' OR table1.field2 LIKE 'keyword%')
UNION ALL 
SELECT table1.*, table2.*,'table2' as target FROM table1
JOIN table2
ON table1.id = table2.tid
WHERE 
(table2.field1 LIKE 'keyword%' OR table2.field2 LIKE 'keyword%') 
```

然后`target`在检索结果时检查是 table1 还是 table2

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T16:11:04.867

您可以为您的条件添加列

```
SELECT table1.*, table2.*, 
table1.field1 LIKE 'keyword%' AS Table1Field1Match, 
table1.field2 LIKE 'keyword%' AS Table1Field2Match,
table2.field1 LIKE 'keyword%' AS Table2Field1Match, 
table2.field2 LIKE 'keyword%' AS Table2Field2Match
FROM table1
JOIN table2
ON table1.id = table2.tid
WHERE 
(table1.field1 LIKE 'keyword%' OR table1.field2 LIKE 'keyword%')
AND
(table2.field1 LIKE 'keyword%' OR table2.field2 LIKE 'keyword%')
ORDER BY table1.id ASC; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T16:10:46.230

在您的循环中，您可以这样做：

```
Table X
Field1      Field2
-------------------
boat        caca
hello       boat

$Keyword = 'boat';
while($Res = blabla){
    if(strpos($Res['Field1'], $Keyword) !== false){
        echo 'String found in Field 1<br />';
    }

    if(strpos($Res['Field2'], $Keyword) !== false){
        echo 'String found in Field 2<br />';
    }
}

// Will output
String found in Field 1<br />
String found in Field 2<br /> 
```

# scala - 如何扩展 Play2 scala zentasks 身份验证以自动获取用户

> ID：10144393
> 
> 赞同：1
> 
> 时间：2012-04-13T16:07:22.497
> 
> 标签：scala, playframework, playframework-2.0

在 Play2 的 zentasks 示例中，我们有方法

```
def isAuthenticated(f: => String => Request[AnyContent] => Result) = {
  Security.Authenticated(username, onUnauthorized) { user =>
    Action(request => f(user)(request))
  }
} 
```

我想做的是添加另一种方法，如果我想直接从数据库中获取用户，我可以使用该方法。

必须在所有方法中添加包装器有点无聊

```
def method() = isAuthenticated { username => implicit request =>
  UserDAO.findOneByEmail(username).map { user =>
    Ok(html.user.view(user))
  }.getOrElse(Forbidden)
} 
```

我是函数式编程的新手，所有这些`=>`都让我头晕目眩:)

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T20:53:01.730

您可以定义另一个方法，例如`IsAuthenticatedUser`，它将采用类型的参数`User => Request[AnyContent] => Result`：

```
def IsAuthenticatedUser(f: User => Request[AnyContent] => Result) = IsAuthenticated { email => request =>
  UserDAO.findOneByEmail(email).map { user =>
    f(user)(request)
  }.getOrElse(Forbidden)
} 
```

然后，您可以按如下方式使用它：

```
def method = IsAuthenticatedUser { user => request =>
  Ok(html.user.view(user))
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T07:00:27.590

这是最终的解决方案

```
trait Secured {

  def username(request: RequestHeader) = request.session.get(Security.username)

  def onUnauthorized(request: RequestHeader) = Results.Redirect(routes.Application.login)

  def withAuth(f: => String => Request[AnyContent] => Result) = {
    Security.Authenticated(username, onUnauthorized) { user =>
      Action(request => f(user)(request))
    }
  }

  def withUser(f: User => Request[AnyContent] => Result) = withAuth { username => implicit request =>
    UserDAO.findOneByUsername(username).map { user =>
      f(user)(request)
    }.getOrElse(onUnauthorized(request))
  }

} 
```

用法：

```
object Application extends Controller with Secured {

  def index = withAuth { username => implicit request =>
    Ok(html.index(username))
  }

  def user() = withUser { user => implicit request =>
    val username = user.username
    Ok(html.user(user))
  }
} 
```

如您所见，如果会话不存在，用户将被重定向到特征中指定的登录页面。

如果在 DAO 中找不到用户名也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T16:29:26.383

半解决方案是将获取用户数据的步骤封装到某个函数中并从模板级别调用它（而不是在每个操作上），因为每个模板只是一个 scala 函数。

多亏了这种方法，如果您有多个使用相同视图（甚至布局）的操作，您不必每次都获取登录用户，即：

在`user view`：

```
@defining(Application.getLoggedUser){ user =>
    @yourlayout("Welcome") {
        <h2>Hello @user.name</h2>
        ...
    } 
} 
```

# c++ - Hashmap 实现邻接列表

> ID：10144394
> 
> 赞同：1
> 
> 时间：2012-04-13T16:07:23.323
> 
> 标签：c++, algorithm, data-structures, graph

我已经使用**向量向量**方法实现了一个邻接列表，向量向量的第 n 个元素指的是节点 n 的朋友列表。

我想知道**哈希映射**数据结构是否会更有用。我仍然犹豫不决，因为我根本无法识别它们之间的区别，例如，如果我想检查并在第 n 个元素邻居中执行操作（搜索、删除），它怎么能比向量的向量方法更有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T17:01:47.047

`vector<vector<ID>>`如果节点集是固定的，A是一个很好的方法。但是，如果您突然决定删除一个节点，您会很生气。您不能缩小向量，因为它会替换节点之后存储的元素，并且您会丢失引用。另一方面，如果您在旁边保留一个免费（可重用）ID 列表，则可以“取消”该插槽，然后再重用。非常有效率。

A`unordered_map<ID, vector<ID>>`允许您更轻松地删除节点。您可以继续为新创建的节点分配新的 ID，这样您就不会丢失空槽。它没有那么紧凑，尤其是在碰撞时，但也没有那么糟糕。当需要使用较旧的编译器移动向量时，重新散列可能会减慢一些速度。

最后，a`unordered_multimap<ID, ID>`可能是最容易管理的一种。它也会将记忆分散到风中，但是嘿:)

就我个人而言，我会开始使用 a 进行原型设计，`unordered_multimap<ID, ID>`并且只有当它证明对我的需求来说太慢时才会切换到另一种表示。

*注意：如果邻接关系是对称的，则可以减少一半的节点数量，而不是仅`(x, y)`存储关系`min(x, y)`。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:21:54.193

# 向量的向量

当您不需要删除边缘时，向量的向量是一个很好的解决方案。

您可以在 O(1) 中添加边，您可以在 O(N) 中迭代邻居。您可以删除边缘，`vector[node].erase(edge)`但它会很慢，复杂度只有 O（顶点数）。

# 哈希图

我不确定你想如何使用哈希图。如果插入边缘意味着设置`hash_map[edge] = 1`，那么请注意您无法迭代节点的邻居。

# android - 使用 TabHost 的 Android 仪表板布局

> ID：10144397
> 
> 赞同：1
> 
> 时间：2012-04-13T16:07:27.603
> 
> 标签：android, user-interface, android-activity, android-tabhost

我进行了搜索，似乎可以找到任何与我遇到的问题相近的东西，所以我想我会问。我有一个仪表板布局

![在此处输入图像描述](../Images/ed2fa7ff47f98d2ca2be46b2f5b1927b.png)

这一切正常

我想要做的是让它如下所示工作（我定义了 Tabhost，但我必须设置类来扩展 TabActivity，这会破坏 ActionBar 导航）

![在此处输入图像描述](../Images/7a9f91f208d840763256fe57ecc0fc40.png)

选项卡正确切换，但它不允许我使用操作栏上的任何按钮，并且它没有像应有的那样正确提取信息

![在此处输入图像描述](../Images/4fd01c01d118bf521ad761e6eb6ef936.png)

以上工作正常。所以我想我的问题是如何正确地将 TabHost 添加到我的类中并让它扩展或实现仪表板代码？我尝试过扩展 TabActivity 实现仪表板但没有运气。

到目前为止，这是我的代码

仪表板.java

```
 package com.ondrovic.bbym;

 import android.app.Activity;
 import android.content.Context;
 import android.content.Intent;
 import android.content.res.Configuration;
 import android.os.Bundle;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
 import android.widget.LinearLayout;
 import android.widget.TextView;

 public abstract class Dashboard extends Activity {
 public static final boolean usePrettyGoodSolution = false;

 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
 }

public void onDestroy() {
    super.onDestroy();
}

public void onPause() {
    super.onPause();
}

public void onRestart() {
    super.onRestart();
}

public void onResume() {
    super.onResume();
}

public void onStart() {
    super.onStart();
}

public void onStop() {
    super.onStop();
}

public void onClickHome(View v) {
    goHome(this);
}

public void onClickUpdate(View v) {
    //startActivity(new Intent(getApplicationContext(), Update.class));
}

public void onClickAbout(View v) {
    //startActivity(new Intent(getApplicationContext(), About.class));
}

public void goHome(Context context) {
    final Intent intent = new Intent(context, Home.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    context.startActivity(intent);
}

@Override
public void setContentView(int layoutID) {
    if (!usePrettyGoodSolution) {
        super.setContentView(layoutID);
        return;
    }

    Configuration c = getResources().getConfiguration();
    int size = c.screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK;
    boolean isLarge = (size == Configuration.SCREENLAYOUT_SIZE_LARGE);
    boolean isXLarge = (size == Configuration.SCREENLAYOUT_SIZE_XLARGE);
    boolean addFrame = isLarge || isXLarge;

    // if (isLarge) System.out.println ("Large screen");
    // if (isXLarge) System.out.println ("XLarge screen");

    int finalLayoutId = addFrame ? R.layout.large : layoutID;
    super.setContentView(finalLayoutId);

    if (addFrame) {
        LinearLayout frameView = (LinearLayout) findViewById(R.id.frame);
        if (frameView != null) {

            // If the frameView is there, inflate the layout given as an
            // argument.
            // Attach it as a child to the frameView.
            LayoutInflater li = ((Activity) this).getLayoutInflater();
            View childView = li.inflate(layoutID, null);
            if (childView != null) {
                LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
                        ViewGroup.LayoutParams.MATCH_PARENT,
                        ViewGroup.LayoutParams.MATCH_PARENT, 1.0F);
                frameView.addView(childView, lp);
                // childView.setBackgroundResource (R.color.background1);
            }

        }
    }
}

public void setTitleFromActivityLabel(int textViewID) {
    TextView tv = (TextView) findViewById(textViewID);
    if (tv !=null) {
        tv.setText(getTitle());
    }
}

} 
```

个人.java

```
 package com.ondrovic.bbym;

 import android.app.TabActivity;
 import android.content.Intent;
 import android.os.Bundle;
 import android.widget.TabHost;
 import android.widget.TabHost.TabSpec;

public class Individual extends TabActivity {
public void onCreate(Bundle savedSate) {
    super.onCreate(savedSate);
    setContentView(R.layout.individual);

    TabHost tabHost = getTabHost();
    TabSpec attspec = tabHost.newTabSpec("ATT");
    attspec.setIndicator("AT&T", getResources().getDrawable(R.drawable.icons_att_tab));
    Intent attIntent = new Intent(this, Individual_ATT.class);
    attspec.setContent(attIntent);

    TabSpec sprspec = tabHost.newTabSpec("SPRINT");
    sprspec.setIndicator("SPRINT", getResources().getDrawable(R.drawable.icons_sprint_tab));
    Intent sprIntent = new Intent(this, Individual_SPRINT.class);
    sprspec.setContent(sprIntent);

    TabSpec vzwspec = tabHost.newTabSpec("VERIZON");
    vzwspec.setIndicator("VERIZON", getResources().getDrawable(R.drawable.icons_verizon_tab));
    Intent vzwIntent = new Intent(this, Individual_VERIZON.class);
    vzwspec.setContent(vzwIntent);

    tabHost.addTab(attspec);

    tabHost.addTab(sprspec);

    tabHost.addTab(vzwspec);
}
 } 
```

这是我的个人.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:background="@color/background1"
 android:orientation="vertical" >

 <include layout="@layout/title_bar" />
 <include layout="@layout/tabs" />
 </LinearLayout> 
```

如果有任何其他代码需要发布，请告诉我并感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:34:24.670

所以我通过执行以下操作弄清楚了。即使这里可能有更好的方法是我所拥有的

个人.java

```
 package com.ondrovic.bbym;

 import android.app.LocalActivityManager;
 import android.content.Intent;
 import android.os.Bundle;
 import android.widget.TabHost;
 import android.widget.TabHost.TabSpec;

 public class Individual extends Dashboard {
     TabHost mTabs;
     protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.individual);
    setTitleFromActivityLabel(R.id.title_text);

    mTabs = (TabHost) findViewById(android.R.id.tabhost);
    LocalActivityManager mLocalActivityManager = new LocalActivityManager(this, false);
    mLocalActivityManager.dispatchCreate(savedInstanceState);
    mTabs.setup(mLocalActivityManager);

    TabSpec attspec = mTabs.newTabSpec("ATT");
    attspec.setIndicator("AT&T", getResources().getDrawable(R.drawable.icons_att_tab));
    Intent attIntent = new Intent(this, Individual_ATT.class);
    attspec.setContent(attIntent);

    TabSpec sprintspec = mTabs.newTabSpec("SPRINT");
    sprintspec.setIndicator("SPRINT", getResources().getDrawable(R.drawable.icons_sprint_tab));
    Intent sprintIntent = new Intent(this, Individual_SPRINT.class);
    sprintspec.setContent(sprintIntent);

    TabSpec verizonspec = mTabs.newTabSpec("VERIZON");
    verizonspec.setIndicator("VERIZON", getResources().getDrawable(R.drawable.icons_verizon_tab));
    Intent verizonIntent = new Intent(this, Individual_ATT.class);
    verizonspec.setContent(verizonIntent);

    mTabs.addTab(attspec);
    mTabs.addTab(sprintspec);
    mTabs.addTab(verizonspec);
}
} 
```

这是一切正常的结果:-)

![在此处输入图像描述](../Images/d9275292895d9f1db8e8d0ab9382a735.png)

# svn - 使用 bash 脚本自动提交到 Subversion

> ID：10144400
> 
> 赞同：0
> 
> 时间：2012-04-13T16:07:49.697
> 
> 标签：svn, bash

我有以下 bash 脚本，它由 cron 每 15 分钟运行一次。这个想法是它将任何新文件添加到 repo，然后提交所有更改：

```
#! /bin/sh

# Add any new files found in /wc
svn add /wc --force

# Commit all changes to repository
svn commit /wc -m "Auto commit" 
```

svn add 命令抛出错误：

```
svn: '/' is not a working copy 
```

我究竟做错了什么？

`svn add /wc --force`从命令行运行会引发相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:21:36.117

正如我一秒钟前测试的那样，这应该可以工作：

```
svn add --depth=infinity --force /wc/* 
```

我假设 /wc 是您的 svn 存储库的工作副本。

编辑：实际上你只需要添加 /* 可能，我认为 -depth=infinity 是默认设置的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:11:32.160

在运行 SVN 命令之前切换到目录（在 bash 脚本内），只需使用

```
cd /wc 
```

在你的脚本里面。

# java - Java 是否以某种方式支持 .htaccess 或有其他选择吗？

> ID：10144404
> 
> 赞同：1
> 
> 时间：2012-04-13T16:08:04.500
> 
> 标签：java, php, .htaccess

我有一个可以通过文件`Java`轻松维护的查询，例如： 我背后的主要问题是如何在 java中明确允许/禁止以*不同方式缓存**不同*的文件类型？ 在我目前在 Windows 7 上使用 JDK 7、Apache Tomcat 7.0.22 和 NetBeans 7.1 IDE 时，我可以用几行代码轻松完成。`PHP``.htaccess`
**`PHP``.htaccess`** 

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:11:54.703

`.htaccess`实际上是由您的网络服务器读取的，在这种情况下是 apache。你应该看看你的网络服务器支持什么。也许，您可以发布您正在使用的服务器，有人可以提出建议**

# javascript - 是否有 ruby s“#{}”序列的 JavaScript 等价物？

> ID：10144407
> 
> 赞同：2
> 
> 时间：2012-04-13T16:08:24.210
> 
> 标签：javascript, ruby

有没有比字符串连接更好的方法在 JavaScript 中构建字符串？

如果我可以做一些像 ruby​​ 这样的事情，你可以在字符串中扩展变量而不是做很多“foo”+bar+“baz”，它会让我的代码更干净。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T16:11:40.280

```
String.prototype.format = function() {
  var args = arguments;
  return this.replace(/{(\d+)}/g, function(match, number) { 
    return typeof args[number] != 'undefined'
      ? args[number]
      : match
    ;
  });
};

console.log("{0} bar {1}.".format("foo","baz")); 
```

将产生：

“富吧巴兹”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:15:53.363

[Chris Nielsen](https://stackoverflow.com/users/110164/chris-nielsen)在[这个答案](https://stackoverflow.com/a/1408373/512904)中提供了一个纯 JavaScript 解决方案：

```
String.prototype.supplant = function (o) {
    return this.replace(/{([^{}]*)}/g,
        function (a, b) {
            var r = o[b];
            return typeof r === 'string' || typeof r === 'number' ? r : a;
        }
    );
};

alert("I'm {age} years old!".supplant({ age: 29 }));
alert("The {a} says {n}, {n}, {n}!".supplant({ a: 'cow', n: 'moo' })); 
```

* * *

您还可以使用 CoffeScript，它是一种编译为 JavaScript 的语言。[它支持字符串插值](http://jashkenas.github.com/coffee-script/#strings)：

```
author = "Wittgenstein"
quote  = "A picture is a fact. -- #{ author }" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T19:49:39.553

对不起，伙计们，但这一切都不是很红宝石的方式，这是一个基本的 p 等价物，对不起 eval，这肯定可以做得更好..如果你只是想要连接，只需在第一个 return 替换 document.write解决方案

```
function p(str){
  document.write(str.replace(/#{(\w)}/g, function(match, s){return eval(s)})+"<br>");
}

String.prototype.p = function() {
  return this.replace(/#{(\w)}/g, function(match, s){return eval(s)})+"<br>";
};

var f="foo", b="bar"
p("#{f} #{b}")
document.write("#{f} #{b}".p());

=> foo bar
=> foo bar 
```

编辑：我添加了一个原型版本，对此有一些困难

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T16:11:11.327

```
var myStr = [];

myStr.push('something')

console.log(myStr.join("")) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T16:11:23.547

如果您处理*大量*字符串，那么使用一个数组，其中`push`包含字符串部分并在末尾`join`（以空字符串作为分隔符）似乎是跨平台最有效的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T16:14:37.470

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-13T16:16:47.130

[pylover 的回答](https://stackoverflow.com/a/10144470/105570)会给你一些你想要*的东西。*

您可能还会研究[CoffeeScript](http://coffeescript.org/)，它是一种很好的语言，可以编译为 JavaScript 并具有字符串插值以及其他（可能*太多*）功能。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-31T07:55:54.620

它被称为语法糖。

```
var a = 2;
var b = 4;
var c = "together";

var text = `Add ${a*b} elements ${c}.`;
console.log(text)

// "Add 8 elements together." (515,988,604 op/sec) 
```

对比

```
var text = "Add" + " " + a*b + " " + "elements" + " " + c + ".";
console.log(text)

// "Add 8 elements together." (511,188,184 op/sec 0.73% slower) 
```

第一种方法更快更好阅读。

此处测试的性能：[JSPerf 字符串测试](https://jsperf.com/speed-string-concat/1 "jsperf 字符串测试")

# parsing - Facebook 以编程方式触发重新解析 url

> ID：10144409
> 
> 赞同：2
> 
> 时间：2012-04-13T16:08:39.617
> 
> 标签：parsing, facebook-graph-api

有没有办法让 Facebook 重新解析页面以获取更新的打开图形对象？我知道 linter 调试工具，但我想知道是否有 API 或以编程方式执行它的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T00:24:29.540

根据位于“更新对象”下[https://developers.facebook.com/docs/technical-guides/opengraph/defining-an-object/的 Facebook 文档](https://developers.facebook.com/docs/technical-guides/opengraph/defining-an-object/)

```
curl -X POST \
  -F "id={object-url OR object-id}" \
  -F "scrape=true" \
  "https://graph.facebook.com" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T02:26:16.990

您所要做的就是使用授权会话点击[http://developers.facebook.com/tools/debug/og/object?q= {escaped URL}。](http://developers.facebook.com/tools/debug/og/object?q=)

我不得不重新整理几千个 URL，因此将它们打印为基本链接，然后使用浏览器插件将它们全部下载，因此只需要 15 分钟。

# ruby-on-rails - 使用 RABL 和 Draper 来渲染 to_json

> ID：10144411
> 
> 赞同：5
> 
> 时间：2012-04-13T16:08:42.690
> 
> 标签：ruby-on-rails, ruby, decorator, rabl, draper

我的`Ticket`模型应用程序中有一些相当复杂的 JSON 响应，我希望我`TicketDecorator`能成为构建这些响应的人。

但是，我已经为我的系统设置了 API，并使用 RABL 来构建这些 JSON 响应，所以我想重用我已经创建的模板。

我想知道是否可以从 inside 的方法中呈现 RABL 模板`TicketDecorator`，如下所示：

这是我的 RABL 模板`tickets/show.json.rabl`

```
object @ticket

attributes :id, :link, :reported_ago_in_words_with_reporter,
           :last_updated_in_words_with_updater, :priority_label, :status,
           :location, :category_list

node(:attachment_urls) { |ticket| [ asset_path(ticket.first_attachment_url),     asset_path(ticket.second_attachment_url), asset_path(ticket.third_attachment_url) ] }

node(:comment_count) { |ticket| ticket.comments.count }

child :recent_comments do
  extends 'comments/index'
end 
```

这是我的`TicketDecorator`方法：

```
class TicketDecorator < ApplicationDecorator
  def as_json
    h.render(template: "tickets/show", formats: :json)
  end
end 
```

但是，这不起作用，因为我无法成功设置@ticket，并且我收到一条错误消息： `undefined method `first_attachment_url' for nil:NilClass`因为`@ticket`是 nil。

关于如何使这两者很好地协同工作，有人有什么好的解决方案吗？

我唯一真正的想法是将模板渲染为字符串并手动使用 RABL，但我不确定如何`render_to_string`在 Draper 内部调用，因为它不是视图助手。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:52:56.297

如果这是访问 Rabl 中的对象的问题，也许[这](https://stackoverflow.com/questions/10708046/how-can-i-pass-an-object-to-rabl-views-from-rake-task/11020791#11020791)对您有帮助。

同样在您的自定义节点上，我将直接访问该对象，而不是依赖于块变量。后者是 imo 用于处理集合，如下所示：

```
collection @tickets
  attribute :name
  node(:some_complex_stuff) {|ticket| ticket.vendor.heavy_lifting} 
```

您可能还研究了这样一个事实，即您可以像属性一样调用任何对象方法，因为它仍然是 Ruby :)

```
class Ticket
  def we_got_what
    "the funk!"
  end
end 
```

为了让你的 Rabl 变得时髦，只需执行以下操作：

```
object @ticket
 attribute :we_got_what 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T04:55:56.280

现在有一个 rabl wiki 条目描述了这种情况。对于其他到达的人，[请在此处查看](https://github.com/nesquena/rabl/wiki/Managing-Complexity-with-Presenters)

解决方案是将装饰器发送给 rabl，而不是从装饰器渲染 rabl。翻转责任使事情变得容易一些。

# java - Oracle 与 JDBC 的连接

> ID：10144420
> 
> 赞同：1
> 
> 时间：2012-04-13T16:09:19.657
> 
> 标签：java, oracle, jdbc

所以我使用 JDBC 和 mySQL 连接到 java 应用程序中的测试 mySQL 数据库，一切正常。生产最终将在 oracle 数据库上。看来我可以更改驱动程序和连接来完成这项工作。

我得到了这个：/usr/local/oracle/product/10.1.0/client_1/bin/sqlplus -S user/password@SERVICE @something.sql

所以我假设这是在本地访问它的方式。我也得到了主人。所以我认为连接 url 将转换为以下内容，并且我能够做到这一点：

`String url = "jdbc:oracle:thin:user/password@//host/SERVICE"`

`Connection c = DriverManager.getConnection(url);`

但这似乎不起作用。我对@something.sql 部分感到困惑。我如何将它包含在我的连接网址中？我当前的连接 URL “jdbc:oracle:thin:user/password@//host/SERVICE”中是否还有任何明显的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:21:08.427

首先，sqlplus 是 Oracle 的一个命令行实用程序，他们为您提供了一个示例，其中值应该在他们的示例中被替换。

如果您有一个名为“ababa”的用户，其密码为“sesame”。假设服务是服务器“bottle”上的“精灵”。如果从命令行运行的 SQL 是“SELECT * FROM Wishes LIMIT 3”，它位于一个名为“/tmp/wishes.sql”的文件中。

从命令行，可以键入以下内容：

```
/usr/local/oracle/product/10.1.0/client_1/bin/sqlplus -S ababa/sesame@genie @/tmp/wishes.sql 
```

在 Java 中，人们会调用：

```
Connection conn = DriverManager.getConnection("jdbc:oracle:thin://bottle/genie",
                                              "ababa",
                                              "sesame"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:32:38.460

我通常不再直接在我的代码中使用连接字符串，但这看起来基本正确。真正的问题是Oracle 不是标准的，这就是为什么你在那里有愚蠢的@ 登录。

您可能还会发现您的某些 SQL 也不起作用。那是因为甲骨文有一些怪癖。在将代码投入生产之前，您确实应该针对 oracle 数据库测试您的代码。

# c# - MongoDB 错误：尝试插入列表时“子类必须实现 GetDocumentID”

> ID：10144421
> 
> 赞同：0
> 
> 时间：2012-04-13T16:09:26.503
> 
> 标签：c#, mongodb

我正在尝试添加一个简单的字符串列表：

```
string[] misc = {"a", "b", "c", "d"};
List<string> myList = new List<string>(misc);
mongo_collection.Insert(myList); 
```

它会返回错误：“子类必须实现 GetDocumentID”

我尝试了这个：

```
mongo_collection.InsertBatch(myList); 
```

但它导致了同样的错误。必须有一种方法可以在不创建继承自实现 GetDocumentID 的 List 的新类的情况下插入它，对吧？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:45:01.527

您正在尝试将 String 类型的 List 放入 mongo 数据库中。为了向 Mongo 添加一些东西，它要么必须是 Bson 对象，要么您必须创建一个自定义对象，并映射属性以便 Mongo 知道如何将您的对象转换为 BSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:41:00.840

插入到集合中的顶级对象必须是映射到 BSON 文档（而不是 BSON 数组）的对象。

此外，顶级对象必须始终有一个 Id 字段（映射到名为 _id 的元素）。

要将数据插入数据库，您将定义一个类似这样的类：

```
public class C
{
    public ObjectId Id;
    public List<string> Strings;
} 
```

然后你可以像这样插入数据：

```
var document = new C();
document.Strings = new List<string> { "a", "b", "c", "d" };
collection.Insert(document); 
```

请注意，将自动为 Id 分配一个值（只要 Id 属于支持自动生成唯一值的 ObjectId 之类的类型）。

# c++ - C++，从函数调用分配给类实例？

> ID：10144422
> 
> 赞同：0
> 
> 时间：2012-04-13T16:09:28.773
> 
> 标签：c++, class, constructor, variable-assignment, copy-constructor

我理解或至少知道为什么以下代码不起作用：

```
class Spambar {
    public:
        Spambar() {};
        Spambar(Spambar& sb) {};

        Spambar operator + (Spambar sb) {
            Spambar new_sb;
            return new_sb;
        }
};

int main() {
    Spambar sb1;
    Spambar sb2;
    Spambar sb3 = sb1 + sb2;  // <<< Error: "No matching function for call to ... "
} 
```

我想，问题在于复制构造函数需要对`Spambar`实例的引用。由于没有引用但返回浅实例，因此编译失败。

那么，我该如何让它发挥作用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:22:21.677

问题是结果`sb1 + sb2`是暂时的；用于初始化的复制构造函数`sb3`需要非`const`引用；并且您不能`const`对临时文件进行非引用。

您几乎肯定想通过将构造函数的参数类型更改为`Spambar const &`. 当您使用它时，您几乎可以肯定地对 执行相同`operator+`的操作，并且还使操作员本身`const`：

```
Spambar(Spambar const &);
Spambar operator + (Spambar const &) const; 
```

`mutable`如果您正在做一些非常奇怪的事情，并且实际上希望复制构造函数修改其参数，那么您将不得不避免将临时变量传递给它，或者使用or做一些令人讨厌的黑客行为`const_cast`。在 C++11 中，您将使用带有参数 type 的移动构造函数`Spambar &&`来处理这类事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T16:11:32.347

您的类没有`const`引用的复制构造函数。通常，复制构造函数如下所示：

```
Spambar(const Spambar&); 
```

您显示的表单仅在极少数情况下使用，它可能会阻止您的代码工作。

# jquery - Twitter Bootstrap rtl 评级星星

> ID：10144423
> 
> 赞同：6
> 
> 时间：2012-04-13T16:09:32.860
> 
> 标签：jquery, asp.net-mvc, user-interface, twitter-bootstrap

我正在使用 twitter bootstrap 来构建我的网站 UI。

我想创建一个星级评分页面。

我希望它是从右到左（意味着一颗星被选在右边）

我看到我最好的选择是使用 Jquery-UI 插件，因为引导程序没有这样的工具？

如何制定评级方向：rtl？

另外，如何将星星调整为黄色而不是红色

（悬停和选择后）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-19T17:14:07.100

我也使用引导程序。今天早上，我开始查看星级评分，发现了[FontAwesome](http://fortawesome.github.com/Font-Awesome/)网站。在这里，您将找到引导程序中星级评级的工作示例。

[CSS-tricks](http://css-tricks.com/star-ratings/)网站提供了所需的 CSS，并很好地解释了它在做什么。

*对于以下链接的缺失，我深表歉意。由于我是 stackoverflow 上的“新海报”，我只能包含两个超链接。因此，您需要将要点粘贴到 dabble.com URL 中才能看到它们。*（有人请投票支持我的声誉，以便我可以发布更多链接：）

您可以在 dabblet.com 站点上找到工作示例，以便在将其引入您的 cown 代码库之前对其进行一些操作。css-tricks dabblet 位于[https://gist.github.com/1709019](https://gist.github.com/1709019) 。

您可能还需要查看其他几个 dabblets：

[@chriscoyier 在https://gist.github.com/1718992](https://gist.github.com/1718992)有不同的实现 。您可以通过更改 float:right; 在此实现中从 LTR 更改为 RTL；浮动：左；

[@mprogano 在https://gist.github.com/1712123](https://gist.github.com/1712123)上有一个更简洁的版本。您可以使用方向从 LTR 更改为 RTL： rtl;

一些涉猎示例允许您更改星形颜色，其他示例使用图像，因此您必须创建自己的图像来更改颜色。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-29T18:02:18.863

得到了一些启发，并尝试了一些“更少代码”的东西。还添加了一个 js 功能来提醒选择的星星数量（当然可以很容易地改变它来做一些更花哨的事情）。

[http://jsfiddle.net/RpfLa/135/](http://jsfiddle.net/RpfLa/135/)

```
<div class="star-rating"><s><s><s><s><s></s></s></s></s></s></div>
<div class="star-rating-rtl"><s><s><s><s><s></s></s></s></s></s></div> 
```

玩得开心！

编辑：另见[http://jsfiddle.net/RpfLa/400/](http://jsfiddle.net/RpfLa/400/)预设评级。

```
<s class="rated"></s> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-16T00:02:35.823

这是一个简单的纯 CSS 解决方案，用于为 twitter bootstrap 的字体图标评分。要与任何其他字体图标（如 fontawesome 等）一起使用，只需更改 HTML 中的类名

HTML：

```
<div class="rating"
  <span id="5" class="glyphicon glyphicon-star"></span>
  <span id="4" class="glyphicon glyphicon-star"></span>
  <span id="3" class="glyphicon glyphicon-star"></span>
  <span id="2" class="glyphicon glyphicon-star"></span>
  <span id="1" class="glyphicon glyphicon-star"></span>
</div> 
```

CSS：

```
.rating span {
  font-size: 25px;
  cursor: pointer;
  float: right; //remove 'float right' for right to left
}
.rating span:hover, .rating span:hover ~ span{
  color: red; //gold or any other color 
} 
```

Jquery捕获点击评分

```
$('.rating span').click(function(){
    alert($(this).attr('id'));
}) 
```

这是[工作代码](http://jsfiddle.net/anuradhabajpai/L5KPw/7/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-03T19:06:15.287

前段时间我遇到了同样的问题，最后创建了一个小插件。我最近为 Bootstrap 3 更新了它：

[https://github.com/javiertoledo/bootstrap-rating-input](https://github.com/javiertoledo/bootstrap-rating-input)

欢迎您发送反馈或请求请求 :-)

最好的祝福！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-07T07:12:21.293

考虑到各种插件面临的问题 - 这是我使用各种可配置选项创建的[Bootstrap JQuery Star 评级插件](http://plugins.krajee.com/star-rating)（其中包含场景演示）。其中一些受到各种想法（例如，维克多）和其他用户需求的启发。我认为您可以针对提到的场景尝试此操作并告知。

尽可能使用 Bootstrap 3.x 字形和纯 CSS，包括 RTL 支持，支持插件事件和方法。你可以参考[这里的来源](https://github.com/kartik-v/bootstrap-star-rating)。

编辑：该插件现在支持分数星级评级，也很少有其他增强功能。

# jquery - 将 JSON 对象从 Python 脚本发送到 jQuery？

> ID：10144426
> 
> 赞同：2
> 
> 时间：2012-04-13T16:09:37.400
> 
> 标签：jquery, python, django, json, getjson

我正在尝试将从 .py 文件打印的 Json 对象发送到 Jquery 的 getJson 方法，但是出了点问题。我从我的大项目中做了一些简单的例子，其中包含不工作的代码。一些帮助将不胜感激！

* * *

html文件：

```
<html xmlns=" http://www.w3.org/1999/xhtml ">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Request json test</title> 
<script src="http://code.jquery.com/jquery-1.5.js"></script>
<script src="/js/json-jquery.js" type="text/javascript"></script> 
</head>
<body>
<a href="#" id="getdata-button">Get JSON Data</a>
<div id="showdata"></div>
</body>
</html> 
```

* * *

JS文件：

```
$(document).ready(function(){
    $('#getdata-button').live('click', function(){
        console.log("echo ")

        $.getJSON("/js/getActive.py", function(data) {
            console.log("echo "+ data)
            $('#showdata').html("<p>item1="+data.item1+"</p>");
        });
    });
}); 
```

* * *

.py 文件：

```
import json
impact="pedro"
print json.dumps({'item1': impact}) 
```

* * *

关于这个问题，它不会在 $.getJSON 指令下方打印任何内容。我检查了浏览器，找到了脚本并通过 http 获得了 OK 状态。真的不知道会发生什么。抱歉，如果这是显而易见的事情，请提前感谢您提供的帮助。

我尝试使用带有一些尊重 json 格式行的 .txt 文件来执行此操作，并且效果很好。

## ----------

更新：解决方案

由于我使用的是 Django，因此它的工作方式与示例略有不同，所以我并没有直截了当地思考。就这样。

JS 文件应该调用您在 URLs.py 上的某个 url，该 url 将您重定向到 views.py 中的某些功能

```
$(document).ready(function(){ 
    //attach a jQuery live event to the button
    $('#getdata-button').live('click', function(){
        console.log("echo ")

        $.getJSON("teste.html", function(data) {

        console.log("echo "+ data)
            //alert(data); //uncomment this for debug
            //alert (data.item1+" "+data.item2+" "+data.item3); //further debug
            $('#showdata').html("<p>teste="+data.item1+"</p>");
        });
    });
}); 
```

* * *

然后在views.py 中只处理你需要的信息，并使用JSON 将httpResponse 返回给JS 以将其处理到视图中。

```
def teste(request):
    to_json = {
        "item1": "pedro"
    }
    return HttpResponse(simplejson.dumps(to_json), mimetype='application/json') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:28:44.670

你如何为 getActive.py 服务？

您需要一个丰富的网络服务器来为 getActive.py 添加响应标头。“内容类型”=“应用程序/json。”

# perl - 扩展 Perl 正在破坏动态加载

> ID：10144427
> 
> 赞同：10
> 
> 时间：2012-04-13T16:09:39.287
> 
> 标签：perl, hp-ux, u2, perl-xs

我正在尝试将 XS 编译成 perl *[ed(ikegami): 这就是说他正在使用 ::MakeMaker's`make perl`创建一个`perl`带有静态链接的 C 供应商库]*但是当我这样做时，新版本的 perl 不支持动态加载模块。每当我尝试运行具有类似`use Socket`（或任何其他模块）的 perl 代码时，我都会得到：

```
Can't load module Socket, dynamic loading not available in this perl. 
```

是否有我设置不正确的编译器/链接器开关或什么？所有这些都是在 1998 年和 2004 年在另一个盒子上编译的（在 PA-RISC 上旧的 hpux），但我们正在转向一个新盒子（hpux11 itanium），我正在碰壁。

这是我的 Makefile.PL：

```
use ExtUtils::MakeMaker;
# See lib/ExtUtils/MakeMaker.pm for details of how to influence
# the contents of the Makefile that is written.
WriteMakefile(
    'NAME'      => 'Udtutil',
    'VERSION_FROM' => 'Udtutil.pm', # finds $VERSION
    'LIBS'      => '-L/usr/ud/PFUSION/Udtutil -L/usr/ud/lib -lapidummy ' .
                   '-lshare -ludsql -ludmach -lbasic ' .
                   '-lperf -lret1 -lides -lpipe -lfunc -lndx -lrep -lshm ' .
                   '-lmglm -lulc -lglm -ltpmem2 -lcmn ' .
                   '-llicn -ludus -lunix -lbci -lunirpc -lxmldl -leda ' .
                   '-lsslU2097e -lcryptoU2097e ' .
                   '-lodbc -lstd_v2 -lstream -lCsup -lpthread -lm -lcl ' .
                   '-ldld ' .
                   '-lnfaclnt -lodsdummy -lcl ' .
                   '-lCsup -lcl -lelf -lm -lcurses -lsec -lpam ',
    'INC'       => '-I/usr/ud/include',     # e.g., '-I/usr/include/other' 
    'OPTIMIZE'  => '-O -Ae +DD64 -q -z +u4 -w ',
    'LINKTYPE'  => 'dynamic',
    'OBJECT'    => '$(BASEEXT)$(OBJ_EXT) funchead.o interfunc.o callcf.o efs_init.o',
); 
```

这是我的 .xs 文件，Udtutil.xs

```
#ifdef __cplusplus
extern "C" {
#endif
#include "EXTERN.h"
#include "perl.h"
#include "XSUB.h"
#include "/usr/ud/include/share.h"
#include "/opt/iibase/PFUSION/Udtutil/udtutil.h"
#ifdef __cplusplus
}
#endif

extern int U_IGNSIGSET;

extern int Iflags[2];

#if OS_NT

#define U_backsig(ignsigcnt) { if (((U_IGNSIGSET=(ignsigcnt)) == 0) && (Iflags[0] || Iflags[1])) U_sig_resend(); if (!U_IGNSIGSET && pU_sigflags && U_sigflags) NT_sig_kill(); }

#else

#define U_backsig(ignsigcnt) { if (((U_IGNSIGSET=(ignsigcnt)) == 0) && (Iflags[0] || Iflags[1])) U_sig_resend(); }

#endif

MODULE = Udtutil                PACKAGE = Udtutil

int startudt(value1,value2)
    int value1
    int value2

    CODE:
    int jmpret, sat;

    U_SET_JMP(jmpret,sat);
    if (jmpret) {
            /* proceed with initialization */
            udtcallbasic_init(value1,value2);
            RETVAL = 1;
    } else {
            /* shutdown unibasic and return unsuccessful value */
            udtcallbasic_done(1);
            RETVAL = 0;
    }

    OUTPUT:
    RETVAL

void stopudt(status)
    int status

    CODE:
    udtcallbasic_done(status);

void calludt(progname, argcount, ...)
    char * progname
    int argcount

    PPCODE:
    char * returnval;
    int paramspassed = 0;
    int status = 0;
    char ** arglist = NULL;
    int i;

    if (argcount + 2 == items) {
            /* build the C array from the Perl array */
            paramspassed = 1;
            arglist = (char **)malloc(argcount);
            for (i = 0; i < argcount; i++) {
                    arglist[i] = (char *)malloc(sv_len(ST(i+2))+1);
                    strcpy(arglist[i], SvPV(ST(i+2),PL_na));
            }

            /* make the call into the database */
            status = U_callbas(&returnval, progname, argcount, arglist);

            for (i = 0; i < argcount; i++) {
                    free(arglist[i]);
            }
            free(arglist);

            /* EXTEND(sp, 2); */
            XPUSHs(sv_2mortal(newSViv(paramspassed)));
            XPUSHs(sv_2mortal(newSViv(status)));

            if (status == 0) {
                    /* EXTEND(sp, 1); */
                    XPUSHs(sv_2mortal(newSVpv(returnval, 0)));
                    free(returnval);
            }
    } else {
            /* EXTEND(sp, 1); */
            XPUSHs(sv_2mortal(newSViv(paramspassed)));
    } 
```

当我运行时`perl Makefile.PL`，一切看起来都很好：

```
> perl Makefile.PL
Checking if your kit is complete...
Looks good
Writing Makefile for Udtutil
Writing MYMETA.yml 
```

当我运行`make`or`make perl`时，一切顺利，它会创建一个新的本地 perl 二进制文件。

但是，当我执行时`./perl mytest.pl`，如果`mytest.pl`**使用**s 任何模块，我会得到：

```
Can't load module Socket, dynamic loading not available in this perl. 
```

关于如何编译这个新的 perl 并仍然保持动态加载工作的任何建议？

* * *

**附加信息：**

这是旧盒子（有效的）的配置数据：

```
 > perl -V:usedl
 usedl='define';

 > perl -V
 Summary of my perl5 (5.0 patchlevel 4 subversion 4) configuration:   Platform:
     osname=hpux, osvers=10, archname=PA-RISC2.0
     uname='hp-ux autocrft b.10.20 u 9000893 341130351 unlimited-user license '
     hint=recommended, useposix=true, d_sigaction=define
     bincompat3=y useperlio=undef d_sfio=undef   Compiler:
     cc='cc', optimize='-O', gccversion=
     cppflags='-D_HPUX_SOURCE -Aa'
     ccflags ='-D_HPUX_SOURCE -Aa'
     stdchar='unsigned char', d_stdstdio=define, usevfork=false
     voidflags=15, castflags=0, d_casti32=define, d_castneg=define
     intsize=4, alignbytes=8, usemymalloc=y, prototype=define   Linker and Libraries:
     ld='ld', ldflags ='-L/usr/local/lib -L/usr/ud/lib'
     libpth=/usr/local/lib /usr/lib/pa1.1 /usr/ud/lib /lib /usr/lib /usr/ccs/lib
     libs=-lnet -lnsl_s -lndbm -ldld -lm -lc -lndir -lcrypt
     libc=/lib/libc.sl, so=sl
     useshrplib=false, libperl=libperl.a
     Dynamic Linking:
     dlsrc=dl_hpux.xs, dlext=sl, d_dlsymun=undef, ccdlflags='-Wl,-E -Wl,-B,deferred '
     cccdlflags='+z', lddlflags='-b -L/usr/local/lib -L/usr/ud/lib'

 Characteristics of this binary (from libperl):    Built under hpux  
 Compiled at May  7 1998 13:59:51   @INC:
     /opt/perl5/lib/PA-RISC2.0/5.00404
     /opt/perl5/lib
     /opt/perl5/lib/site_perl/PA-RISC2.0
     /opt/perl5/lib/site_perl
     . 
```

...这是来自新盒子的配置数据（不工作的盒子）：

```
 > ./perl -V:usedl
 usedl='define';

 > ./perl -V
 Summary of my perl5 (revision 5 version 14 subversion 2) configuration:
       Platform:
     osname=hpux, osvers=11.31, archname=IA64.ARCHREV_0-LP64
     uname='hp-ux autocrft b.11.31 u ia64 1650208369 unlimited-user license '
     config_args=''
     hint=previous, useposix=true, d_sigaction=define
     useithreads=undef, usemultiplicity=undef
     useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
     use64bitint=define, use64bitall=define, uselongdouble=undef
     usemymalloc=n, bincompat5005=undef   Compiler:
     cc='cc', ccflags ='+DD64 -Ae -D_HPUX_SOURCE -Wl,+vnocompatwarnings -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64',
     optimize='+O2 +Onolimit',
     cppflags='-Aa -D__STDC_EXT__ -D_HPUX_SOURCE +DD64 -Ae -D_HPUX_SOURCE -Wl,+vnocompatwarnings -I/usr/local/include +DD64 -Ae -D_HPUX_SOURCE -Wl,+vnocompatwarn ings -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64'
     ccversion='B3910B', gccversion='', gccosandvers=''
     intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=87654321
     d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
     ivtype='long', ivsize=8, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8
     alignbytes=8, prototype=define   Linker and Libraries:
     ld='/usr/bin/ld', ldflags =' -L/usr/lib/hpux64'
     libpth=/usr/lib/hpux64
     libs=-L/usr/lib/hpux64 -lnsl -lnm -ldl -ldld -lm -lsec -lc
     perllibs=-lnsl -lnm -ldl -ldld -lm -lsec -lc
     libc=/usr/lib/hpux64/libc.so, so=so, useshrplib=false, libperl=libperl.a
     gnulibc_version=''
     Dynamic Linking:
     dlsrc=dl_hpux.xs, dlext=so, d_dlsymun=undef, ccdlflags='-Wl,-E -Wl,-B,deferred '
     cccdlflags='+DD64', lddlflags='-b +vnocompatwarnings'

 Characteristics of this binary (from libperl):
 Compile-time options: PERL_DONT_CREATE_GVSV PERL_MALLOC_WRAP
                         PERL_PRESERVE_IVUV USE_64_BIT_ALL USE_64_BIT_INT
                         USE_LARGE_FILES USE_PERLIO USE_PERL_ATOF   Built under hpux
 Compiled at Apr 13 2012 09:27:33
   @INC:
     /opt/iibase/perl/lib/site_perl/5.14.2/IA64.ARCHREV_0-LP64
     /opt/iibase/perl/lib/site_perl/5.14.2
     /opt/iibase/perl/lib/5.14.2/IA64.ARCHREV_0-LP64
     /opt/iibase/perl/lib/5.14.2
     . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:51:42.500

不知道这是否会有很大帮助，但您可以查看 App::Staticperl。我能够在 Solaris 中使用它构建 DBI 和 DBD::Informix，也许它也可以在 HP-UX 中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:07:13.277

我不知道这封电子邮件中是否有任何有用的东西是我收集并保存为 Perl 的 DBD::Informix 模块的背景信息的一部分。

```
Date: Wed, 13 Aug 1997 13:02:04 -0500 (CDT)
From: "Kent S. Gordon" [email deleted]
Subject: Re: Easy way to force static Informix libraries with DBD:Informix

>> "kgor" == Kent S Gordon <kgor@inetspace.com> wrote:
> Is there a easy way to create a DBD:Informix that uses static Informix
> libraries, but dynamic system libraries for everything else.

I have succeeded in building a perl with DBD:Informix that uses dynamic
loading for everything except DBD:Informix and DBI.  I got a runtime error of
not being able to find the symbol of boot_DBI if DBI was also not
statically built into perl.  Here is a short discription of what I did.

1)  Built perl 5.004_2 normally.
2)  Installed perl.
3)  Built DBI statically (make static).
4)  Installed DBI (make install).  This is not just the install of the perl
    binary, since DBI.a is needed later.
5)  Changed DBD Makefile.pl to call esql -static and esql -static -libs
    instead of esql and esql -libs.
6)  Created DBD Makefile using perl Makefile.PL.
7)  Built DBD statically (make static and make perl, etc.)
8)  The make test_static failed, due to wanting to create a dynamic object
    (Informix.sl failed due to trying fixup a symbol)
9)  Installed with make -k install to get pass error creating Informix.sl,
    while still installing Informix.pm (could not find a special install
    for static perl.
10) Installed new perl executable.  It seems to work after some initial
    test.

Kent S. Gordon
Senior Software Engineer
iNetSpace Co.
[Phone and email deleted] 
```

我当时注意到，由于对 Informix.sl 的引用，Kent 必须在 HP-UX 上构建。我认为这里没有任何用处，但这是我在构建 Perl 的静态链接版本时所拥有的唯一额外信息。如您所见，它已接近 15 岁。

我想知道 Perl 5.14.x 是否仍然完全支持和测试静态链接模块？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T12:56:30.977

从 perlxstut 手册页

动态加载与静态加载

通常认为，如果系统不具备动态加载库的能力，则无法构建 XSUB。这是不正确的。您可以构建它们，但是您必须将 XSUBs 子例程与 Perl 的其余部分链接起来，从而创建一个新的可执行文件。这种情况类似于 Perl 4。

本教程仍然可以在这样的系统上使用。XSUB 构建机制将检查系统并在可能的情况下构建一个可动态加载的库，或者构建一个静态库，然后可选地，一个新的静态链接可执行文件，其中链接了该静态库。

如果您希望在可以动态加载库的系统上构建静态链接的可执行文件，您可以在以下所有示例中执行不带参数的命令“make”，而是运行命令“make perl”。

如果您选择生成了这样一个静态链接的可执行文件，那么不要说“make test”，而应该说“make test_static”。在根本无法构建动态加载库的系统上，简单地说“make test”就足够了。

它说如果您使用行命令“make perl”，那么您就是在告诉它静态构建。

# python - Fabric 和 Sudo 作为另一个用户

> ID：10144430
> 
> 赞同：4
> 
> 时间：2012-04-13T16:09:46.993
> 
> 标签：python, postgresql, fabric

使用 Fabric 启动服务器，一切正常，除了我尝试启动 postgresql。

```
sudo("/usr/lib/postgresql/9.1/bin/pg_ctl -D /mnt/ebs/postgresql/data -l /mnt/ebs/logfile start", user='postgres') 
```

它输出“服务器启动”，但实际上并没有启动。postgresql 日志中没有显示任何内容。

如果我 ssh 并执行与用户相同的命令，`postgres`它就可以工作。如果我 ssh 进入并运行以下命令，它也可以工作。

```
 sudo su postgres -c '/usr/lib/postgresql/9.1/bin/pg_ctl -D /mnt/ebs/postgresql/data -l /mnt/ebs/logfile start 
```

我对用户使用面料的方式没有什么了解？还是linux用户的工作方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:26:42.613

[这是](http://docs.fabfile.org/en/1.4.1/faq.html#init-scripts-don-t-work)文档中针对您的用例的部分。它与 sudo 无关，而与默认调用的 pty 设置有关。常见问题解答中的更多信息。

# database - 如何搜索自定义数据库表（不是 wordpress 表）？

> ID：10144432
> 
> 赞同：2
> 
> 时间：2012-04-13T15:08:13.193
> 
> 标签：database, wordpress, search

我有一个已导入我的 wordpress 网站架构的定价表，现在我想允许用户搜索并查看它（但不能编辑它）。

**是否已经有一个插件**可以让我这样做？我发现 dbtoolkit 过于复杂，在这种简单的情况下不起作用。我尝试了其他几个插件，但它们似乎不适用于公共用户。我希望每个人都能够查看和搜索定价表，即使他们没有登录。

我可以编写自己的插件，但我想如果它已经存在，为什么要重新发明轮子。

***注意*：这不是一个标准的 wordpress 表，它与 wordpress 无关，除了我将它导入到同一个数据库模式中。但是，我想使用 wordpress 来搜索和查看这个表格，并以标准的 wordpress 格式显示它。

# iphone - iPhone 旋转和全屏视频

> ID：10144435
> 
> 赞同：2
> 
> 时间：2012-04-13T16:10:05.867
> 
> 标签：iphone, video, rotation, fullscreen

我遇到了一个奇怪的问题，我需要帮助解决。我的应用程序始终以纵向模式运行 - 我明确希望它是这样的。在应用程序的一个地方，我有一个 UIWebView，它工作得很好，正如预期的那样。此 Web 视图并非一直显示，而是动态添加到主视图并根据用户操作删除（即它仅在我需要时可见）。

现在，有时在这个视图中我可能有一个 youtube 视频。WebView 仅包含`<iframe>`youtube 嵌入。当用户单击 webview 中的视频预览框时，会启动一个全屏视频查看器来播放视频 - 这很好。

但是，如果在播放过程中用户旋转手机，则旋转全屏视频播放器并以横向模式播放视频。现在视频停止并且用户按下“完成”按钮而不将手机旋转回纵向模式，视频播放器关闭并且用户返回到我的应用程序 - 但是现在我的布局也旋转了！不仅仅是视频视图，还有整个布局——带有工具栏、导航控制器等。

我不想要任何旋转！我只希望我的应用程序中的所有内容都保持纵向模式！此外，现在即使手机旋转回纵向，应用程序也会保持横向模式。

请注意，到目前为止，我只在模拟器中对此进行了测试，因为我目前没有要测试的实体手机。我创建了一个简单的（质量很差！）视频（只是用旧手机摄像头在我的屏幕上拍摄了模拟器）来演示这个问题 - 视频在这里：[http ://shchuka.com/hosting/rotation_problem.mp4](http://shchuka.com/hosting/rotation_problem.mp4)

有什么想法我能做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:00:33.330

添加或更改它：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    return (UIInterfaceOrientation == UIInterfaceOrientationPortrait);

} 
```

这将阻止所有旋转，并且该应用程序只能在纵向模式下运行。您可以将`return`语句放在 IF 语句中，以便在某些情况下进行轮换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:19:26.440

当我希望 appDelegate 窗口高于其他所有视图时，我有时会向它们添加视图，并且令人讨厌的副作用是我必须显式调用我自己的旋转代码，因为没有 VC 来处理它。从好的方面来说，这可能意味着它可能非常适合您的需求 -

```
[[[[UIApplication sharedApplication] delegate] window] addSubview:myWebView]; 
```

...根据您的应用程序的方向等，在您首先加载视图之前，您可能需要在显示它之前旋转 webView。

# c# - 用于控件的 asp.net OnClick 事件

> ID：10144439
> 
> 赞同：2
> 
> 时间：2012-04-13T16:10:12.800
> 
> 标签：c#, asp.net, vb.net

我正在将一个 VB 项目转换为 C#，我注意到在 vb 中它将调用如下函数：

```
 Protected Sub WZTestResult_NextButtonClick(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.WizardNavigationEventArgs) Handles WZTestResult.NextButtonClick 
```

它处理向导的下一个按钮单击事件。

在 c# 中，我必须添加以下行：

```
 OnNextButtonClick="WZTestResult_NextButtonClick" 
```

在 asp.net 源页面上，否则它永远不会命中该功能。这是 c# 中的必需品，还是有一些我忽略或遗漏的东西？基本上，在 c# 中有没有一种方法可以像在 VB 中一样在不添加源页面上面的行的情况下实现该功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:14:22.183

VB 的 Handles 关键字没有等效项。

如果需要，您可以在页面初始化时在后面的代码中执行此操作

```
public Default() {

    this.Init += (_o, _e) => {
         this.Wizard.NextButtonClick += WZTestResult_NextButtonClick;
    }
} 
```

默认是页面构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:26:26.137

一般来说，IDE 会为您处理大部分工作。如果您在 Visual Studio 设计器中将按钮添加到表单并双击该按钮，它将带您进入代码中该控件的事件处理程序（在本例中为单击事件）。

```
 private void button1_Click(object sender, EventArgs e)
    {
    } 
```

您会注意到您所在的文件不包含将此方法附加到控件事件的代码。Visual Studio 将表单拆分为包含您的代码的部分类和包含自动生成的接线代码的生成类。在看起来像这样的解决方案资源管理器中：

Form1.cs -> 将代码添加到 Form1.Designer.cs 的文件 -> 自动生成的设计器文件

您不想更改 .designer.cs 文件，因为在可视化设计器中更改表单可能会覆盖您的更改。您只需要在 Form1.cs 文件中工作，您甚至可能永远不会看到事件分配代码。

因此，您的问题的答案是否定的，但需要注意的是，您很少需要添加或查看此代码：

```
this.Wizard.NextButtonClick += WZTestResult_NextButtonClick; 
```

# javascript - 缓存在 iOS AppCached 上的 Ajax 请求

> ID：10144440
> 
> 赞同：0
> 
> 时间：2012-04-13T16:10:18.057
> 
> 标签：javascript, ios, mobile-safari, offline-caching

我有一个 HTML5 离线应用程序执行以下操作：

1.  显示页面
2.  检查清单（根据规格）
3.  执行 ajax 请求（使用 Prototype）来检查是否在线。

我仅在 Mobile Safari iOS（不是 Safari，不是 Chrome，不是 Firefox）上遇到以下问题：

*   OK：在线运行场景
*   OK：离线运行场景（平面模式）
*   OK：停止服务器 OK
*   KO：重启服务器

**Ajax-Request 已执行但挂起直到超时，就像它离线一样**

解决方法

*   好的：如果我更新清单，缓存就会刷新
*   好的：如果我在 iOS 偏好设置中清理缓存
*   KO：如果我在 ajax-request 中放置一个参数（如 ?d={timemillis} ）
*   KO：ajax 请求在 POST 中
*   KO：请求具有标题：Cache-Control: no-store 和 Pragma: no-cache
*   KO：如果我杀死 MobileSafari 并重新加载
*   KO：清单的 NETWORK 部分明确了 URL

所以我不知道该怎么办：

*   我无法清理移动 Safari 存储，因为它也会清除 localStorage
*   我无法“触摸”服务器上的清单文件
*   我不能确定我的用户将始终处于“平面模式”

问题：

*   有没有办法强制缓存更新？（根据规格没有）
*   有没有办法禁止缓存 Ajax Request ？（清单除外）
*   是否有任何 jsFiddle 证明它可以在 iOS 上运行？

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:38:00.547

经过多次测试，iOS 上的 MobileSafari 似乎确实有问题。我的公司决定停止这个概念证明并等待改进版本或处理所有错误的框架。

# javascript - 用于判断链接是否为内部链接的 Javascript 逻辑

> ID：10144453
> 
> 赞同：0
> 
> 时间：2012-04-13T16:11:03.183
> 
> 标签：javascript, ajax, url, history.js

我在[https://github.com/browserstate/ajaxify中的以下函数存在一些问题](https://github.com/browserstate/ajaxify)

对于以下形式的 url：

```
http://rooturl.com/?alfa=a 
```

或任何其他查询字符串未被识别为内部链接。（rooturl.com 是我的内部主页）

```
 // Internal Helper
    $.expr[':'].internal = function(obj, index, meta, stack){
        // Prepare
        var
            $this = $(obj),
            url = $this.attr('href')||'',
            isInternalLink;

        // Check link
        isInternalLink = url.substring(0,rootUrl.length) === rootUrl || url.indexOf(':') === -1;

        // Ignore or Keep
        return isInternalLink;
    }; 
```

如何修改此函数以使其将带有查询字符串的内部 URL 计为“内部链接”？

作为参考，该函数在以下上下文中使用：

```
$this.find('a:internal:not(.no-ajaxy, .no-ajaxy a)').click(function(event){
     // so on...
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:18:21.023

我认为您需要做的就是检查 ? 在 URL 中，因为它是查询字符串所必需的

```
isInternalLink = url.substring(0,rootUrl.length) === rootUrl || url.indexOf('?') !== -1 || url.indexOf(':') === -1; 
```

但是另一个 URL 可能具有查询字符串并且是外部的，因此您可能需要使用 split() 并检查第一位是否与 rootUrl 匹配

```
var bits = url.split('?');

if (bits[0] === rootUrl) isInternalLink = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:17:24.627

像这样的东西应该工作

```
$('a[href^=http]') 
```

只会返回带有外部hrefs的链接

或做这样的事情

```
$('a').filter('[href^=http]') 
```

或者

```
$(this).is('[href^=http]')   //will return true if external hrefs 
```

在你的情况下

# java - Java多行字符串形成

> ID：10144462
> 
> 赞同：4
> 
> 时间：2012-04-13T16:11:27.983
> 
> 标签：java, string-concatenation

我绝不是 java 程序员，所以这看起来很基本。

当您想保持代码行简短时，其中哪一个“更好”。

```
String str = "First part of a string.";
str += " Second part of string."; 
```

或者

```
String str = "First part of string." +
" Second part of string." 
```

我想我的问题是 += 和 + 都创建一个新的 String 对象吗？如果他们这样做，那么两者都不是更好，这只是一个偏好问题。我给出的例子将是现实世界使用的一个很好的例子。我不希望用任何一种方法进行 3 次到 1000 次的串联比较。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:16:33.147

我更喜欢第二种方法。原因是编译器可能会在编译时将连接的结果组合成单个字符串，而第一种方法可能在运行时完成（取决于实际的实现）。除非你正在做某事，否则这是一件小事然而，数百万次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T16:23:59.357

Java 编译器实际上需要在编译时连接第二个示例。见[15.28。常量表达式](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)和[3.10.5。字符串文字](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T16:18:19.247

这是我编译然后反编译时得到的：

```
public static void main(String[] args) {
    String str = "First";
    str += " Second";
    System.out.println(str);

    String str2 = "First" + " Second";
    System.out.println(str2);
} 
```

变成：

```
public static void main(String args[]) {
    String s = "First";
    s = (new StringBuilder()).append(s).append(" Second").toString();
    System.out.println(s);
    String s1 = "First Second";
    System.out.println(s1);
} 
```

所以第二种方法更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T16:27:43.100

```
StringBuilder sb = new StringBuilder();
sb.append("First part");
sb.append("Second part");
System.out.print(sb.toString()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-21T17:55:13.677

遵循 Java 的编码约定：

```
String str = "First part of string. "
             + "Second part of string."; 
```

确保“+”运算符开始下一行，这提高了可读性。使用这种风格可以使代码具有可读性和高效性。 [https://www.oracle.com/technetwork/java/javase/documentation/codeconventions-136091.html#248](https://www.oracle.com/technetwork/java/javase/documentation/codeconventions-136091.html#248)

希望这可以帮助！

快乐编码，

布雷迪

# java - 如何获取 GWT CellTable 分页的总行数

> ID：10144466
> 
> 赞同：2
> 
> 时间：2012-04-13T16:11:37.113
> 
> 标签：java, gwt, pagination, gwt-celltable

我正在尝试在 CellTable 中实现分页，但它当前显示“1-10 of 10”记录而不是“1-10 of 1000”记录。我不确定在哪里可以更新总记录数。我的 AsyncDataProvider 看起来像这样：

```
 AsyncDataProvider<OutletSearchVO> latestProvider = new AsyncDataProvider<OutletSearchVO>() {

        @Override
        protected void onRangeChanged(HasData<OutletSearchVO> display) {
            final int start = display.getVisibleRange().getStart();
            int length = display.getVisibleRange().getLength();
            AsyncCallback<List<OutletSearchVO>> callback = new AsyncCallback<List<OutletSearchVO>>() {
                @Override
                public void onFailure(Throwable caught) {
                    Window.alert(caught.getMessage());
                }

                @Override
                public void onSuccess(List<OutletSearchVO> result) {
                    updateRowData(start, result);
                }
            };
            // The remote service that should be implemented
            service.getOutletPage(start, length, callback);

        }
    }; 
```

我用来获取记录的 SQL 类似于：

```
SELECT *
  FROM (SELECT outlet_id,
           outlet_name,
           image,
           ROWNUM rn
      FROM (  SELECT outlet_id outlet_id,
                     account_name outlet_name,
                     image_score image,
                FROM outlets)
            ORDER BY OOI.created_on DESC, OOI.account_name))
WHERE rn > ? AND rn < ? 
```

问号被准备好的语句中的开始和结束范围替换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:20:57.927

您必须`updateRowCount`从您的内部调用`AsyncDataProvider`（类似于您调用`updateRowData`的方式），这意味着您必须向服务器询问该计数（或至少一个近似值，然后选择是否将 a`true`或`false`作为第二个参数传递给`updateRowCount`）。

当然，您也可以`updateRowCount`从外部调用`onRangeChange`，特别是如果您可以预先知道您将拥有多少行，并且该数字不会发生太大变化。

# c++ - 我可以定义一个结构，其对象将始终位于单独的缓存行中

> ID：10144469
> 
> 赞同：4
> 
> 时间：2012-04-13T16:11:38.477
> 
> 标签：c++, c, caching, gcc, x86-64

我知道您可以通过在 gcc 中使用例如***属性**((align(64)))将变量与缓存行对齐。*但是，我对在结构声明时对齐（或者您可以将其称为填充）感兴趣。因此，例如，对于以下*结构*，我想要求编译器创建必要的填充，以便此结构的任何对象始终与缓存行对齐。

```
typedef struct
{
 int a;
 int b;
 // I want the compiler to create a padding here for cache alignment
} my_type; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:15:01.547

是的。我不记得我从哪里得到这个代码。我想可能是 Herb Sutter 的博客：

```
 #define CACHE_LINE_SIZE 64 // Intel Core 2 cache line size.

    template<typename T>
    struct CacheLineStorage {

    public:

       [[ align(CACHE_LINE_SIZE) ]] T data;

    private:

       char pad[ CACHE_LINE_SIZE > sizeof(T)
            ? CACHE_LINE_SIZE - sizeof(T)
            : 1 ];
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T18:12:36.973

这很简单。您可能只是错过了`aligned`.

```
typedef struct
{
 int a __attribute__((aligned(64)));
 int b;

} my_type; 
```

如果您创建变量或它的数组，则生成的结构在 b 之后将有一个 56 字节的填充。

# python - 保存后从 Django 表单中获取模型 ID

> ID：10144475
> 
> 赞同：6
> 
> 时间：2012-04-13T16:11:51.847
> 
> 标签：python, django

视图.py

```
someForm = SomeForm(request.POST)
...
someForm.customSave(request.user) 
```

表格.py

```
class SomeForm(ModelForm):

    class Meta:
        model = Some

    def customSave(self,user):
        lv = self.save(commit=False)
        lv.created_by = user
        lv.save() 
```

如何获取我刚刚保存的模型（或模型）的 ID `someForm`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T17:01:09.553

由于 ModelForm.save 的行为[是](https://github.com/django/django/blob/399c6ac7cc1b95c249b964d6c6d47ded43943fde/django/forms/models.py#L351)返回实例，您可能希望在 customSave 方法中返回实例

```
def customSave(self, user):
    lv = self.save(commit=False)
    lv.created_by = user
    lv.save()
    return lv 
```

然后您可以访问实例上的 pk 或 id

```
inst = someForm.customSave(request.user)
inst.pk or inst.id 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T16:22:01.663

只需在调用后使用`lv.pk`or 。id 在保存后在实例上设置。`lv.id``lv.save()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-21T12:40:45.283

在您的模型类中覆盖保存方法：

```
def save(self, form, *args, **kwargs):
    super(MyModel, self).save(*args, **kwargs)
    logger.debug(self.id) 
```

# entity-framework - 在 DbContext [代码优先] 中使用和不使用 using 语句有什么区别？

> ID：10144478
> 
> 赞同：1
> 
> 时间：2012-04-13T16:11:58.440
> 
> 标签：entity-framework, ef-code-first, idisposable

我想知道这两者有什么区别...

```
using (var db = new PteDotNetContext())
            {
                var blog = new Blog() { BlogType = 1, Title = "Blog 1", Description = TestInfo.UniqueRecordIdentifier, DateAdded = DateTime.Now, User = TestInfo.UniqueRecordIdentifier };
                db.Blogs.Add(blog);
                db.SaveChanges();
            }

            PteDotNetContext context2 = new PteDotNetContext();
            var blog2 = new Blog() { BlogType = 1, Title = "Blog 2", Description = TestInfo.UniqueRecordIdentifier, DateAdded = DateTime.Now, User = TestInfo.UniqueRecordIdentifier };
            context2.Blogs.Add(blog2);
            context2.SaveChanges(); 
```

是。我知道使用 using 语句基本上调用对象的析构函数。我只是好奇...

a) using 语句是否打开然后关闭 DbContext 上的 Sql 连接？b）如果是这样，第二个语句会发生什么，因为我从未真正打开它并且它仍然有效。那么我什么时候结束声明呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:17:22.847

> a) using 语句是否打开然后关闭 DbContext 上的 Sql 连接？

语句内部声明的变量`using`在 using 块结束时被 Disposed。在 DbContext 上，处置方法会关闭连接，因此一旦该代码块结束，连接就会关闭。

> b）如果是这样，第二个语句会发生什么，因为我从未真正打开它并且它仍然有效。那么我什么时候结束声明呢？

垃圾收集器在不再需要时清除上下文对象，然后关闭连接。

你应该阅读关于[`using`声明](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)和[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)。

# c - 从一个通信器到另一个通信器的 mpi 集体操作

> ID：10144479
> 
> 赞同：4
> 
> 时间：2012-04-13T16:11:58.913
> 
> 标签：c, fortran, mpi, communicator

我有一个与 MPI 并行化的应用程序，它被分成许多不同的任务。每个处理器只分配一个任务，分配相同任务的一组处理器分配它自己的通信器。定期地，任务需要同步。目前，同步是通过 MPI_COMM_WORLD 完成的，但这样做的缺点是不能使用集体操作，因为不能保证其他任务会到达该代码块。

作为一个更具体的例子：

```
task1: equation1_solver, N nodes, communicator: mpi_comm_solver1
task2: equation2_solver, M nodes, communicator: mpi_comm_solver2
task3: file IO         , 1 node , communicator: mpi_comm_io 
```

我想 MPI_SUM 在 task1 上的一个数组，并让结果出现在 task3 上。有没有一种有效的方法来做到这一点？（如果这是一个愚蠢的问题，我深表歉意，我在创建和使用自定义 MPI 通信器方面没有太多经验）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T20:07:11.070

查尔斯完全正确；相互沟通者允许您在沟通者之间进行交谈（或者，在这种情况下区分“正常”沟通者，“内部沟通者”，这对我来说并没有太大的改进）。

对于那些刚接触它的人来说，我总是发现这些互通器的使用有点令人困惑。不是有意义的基本想法，而是使用（比如说）`MPI_Reduce`其中之一的机制。执行归约的任务组指定远程通信器上的根等级，到目前为止一切顺利；但是在远程等级通信器中，*不是*根的每个人都指定`MPI_PROC_NULL`为根，而实际的根则指定`MPI_ROOT`. 为向后兼容所做的事情，嘿？

```
#include <mpi.h>
#include <stdio.h>

int main(int argc, char **argv)
{
    int commnum = 0;         /* which of the 3 comms I belong to */
    MPI_Comm   mycomm;       /* Communicator I belong to */
    MPI_Comm   intercomm;    /* inter-communicator */
    int cw_rank, cw_size;    /* size, rank in MPI_COMM_WORLD */
    int rank;                /* rank in local communicator */

    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &cw_rank);
    MPI_Comm_size(MPI_COMM_WORLD, &cw_size);

    if (cw_rank == cw_size-1)      /* last task is IO task */
        commnum = 2;
    else {
        if (cw_rank < (cw_size-1)/2)
            commnum = 0;
        else
            commnum = 1;
    }

    printf("Rank %d in comm %d\n", cw_rank, commnum);

    /* create the local communicator, mycomm */
    MPI_Comm_split(MPI_COMM_WORLD, commnum, cw_rank, &mycomm);

    const int lldr_tag = 1;
    const int intercomm_tag = 2;
    if (commnum == 0) {
        /* comm 0 needs to communicate with comm 2\. */
        /* create an intercommunicator: */

        /* rank 0 in our new communicator will be the "local leader"
         *  of this commuicator for the purpose of the intercommuniator */
        int local_leader = 0;

        /* Now, since we're not part of the other communicator (and vice
         * versa) we have to refer to the "remote leader" in terms of its
         * rank in COMM_WORLD.   For us, that's easy; the remote leader
         * in the IO comm is defined to be cw_size-1, because that's the
         * only task in that comm.   But for them, it's harder.  So we'll
         * send that task the id of our local leader. */

        /* find out which rank in COMM_WORLD is the local leader */
        MPI_Comm_rank(mycomm, &rank);

        if (rank == 0)
            MPI_Send(&cw_rank, 1, MPI_INT, cw_size-1, 1, MPI_COMM_WORLD);
        /* now create the inter-communicator */
        MPI_Intercomm_create( mycomm, local_leader,
                              MPI_COMM_WORLD, cw_size-1,
                              intercomm_tag, &intercomm);
    }
    else if (commnum == 2)
    {
        /* there's only one task in this comm */
        int local_leader = 0;
        int rmt_ldr;
        MPI_Status s;
        MPI_Recv(&rmt_ldr, 1, MPI_INT, MPI_ANY_SOURCE, lldr_tag, MPI_COMM_WORLD, &s);
        MPI_Intercomm_create( mycomm, local_leader,
                              MPI_COMM_WORLD, rmt_ldr,
                              intercomm_tag, &intercomm);
    }

    /* now let's play with our communicators and make sure they work */

    if (commnum == 0) {
        int max_of_ranks = 0;
        /* try it internally; */
        MPI_Reduce(&rank, &max_of_ranks, 1, MPI_INT, MPI_MAX, 0, mycomm);
        if (rank == 0) {
            printf("Within comm 0: maximum of ranks is %d\n", max_of_ranks);
            printf("Within comm 0: sum of ranks should be %d\n", max_of_ranks*(max_of_ranks+1)/2);
        }

        /* now try summing it to the other comm */
        /* the "root" parameter here is the root in the remote group */
        MPI_Reduce(&rank, &max_of_ranks, 1, MPI_INT, MPI_SUM, 0, intercomm);
    }

    if (commnum == 2) {
        int sum_of_ranks = -999;
        int rootproc;

        /* get reduction data from other comm */

        if (rank == 0)   /* am I the root of this reduce? */
            rootproc = MPI_ROOT;
        else
            rootproc = MPI_PROC_NULL;

        MPI_Reduce(&rank, &sum_of_ranks, 1, MPI_INT, MPI_SUM, rootproc, intercomm);

        if (rank == 0) 
            printf("From comm 2: sum of ranks is %d\n", sum_of_ranks);
    }

    if (commnum == 0 || commnum == 2);
            MPI_Comm_free(&intercomm);

    MPI_Finalize();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T16:23:34.550

您所需要的只是创建一个新的通信器，其中包括要一起通信的两个任务的节点。看看 MPI Groups and Communicators。你可以在网上找到很多例子，[例如这里](http://www.ib.cnea.gov.ar/~ipc/ipd2007/htmlcourse/6_groups.html)。

# c# - 从 JavaScript 执行 C# 函数和回发

> ID：10144482
> 
> 赞同：0
> 
> 时间：2012-04-13T16:12:11.920
> 
> 标签：c#, asp.net, telerik

我有一个 JavaScript 函数，当 radWindow 像这样关闭时调用它：

```
 function OnClientCloseSecure(oWnd, args) {
       var arg = args.get_argument();

       if (arg) {
           var ResultCode = arg.ResultCode;
           var AuthCode = arg.AuthCode;
           var ReferenceNumber = arg.ReferenceNumber;
           var TransactionID = arg.TransactionID;
           var ErrorCode = arg.ErrorCode;
           var ErrorDescription = arg.ErrorDescription;
           var CardNumber = arg.CardNumber;
           var PONumber = arg.PONumber;

           __doPostBack();
       }
   } 
```

我还有一个名为`GetComplete()`. 我想这样做，所以当调用上面的 JavaScript 函数时，它会执行 C# 函数`GetComplete()`并执行 PostBack，以便显示结果。这可能与JavaScript有关吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:19:34.320

## 标记

```
<asp:Button ID="btn" runat="server" style="display:none;" OnClick="Btn_Click"/> 
```

该按钮将被隐藏。执行单击并在后面的代码中调用其处理程序中的函数将很有用。现在在处理程序中编写代码来调用您的 c# 方法。

## Java 脚本

执行隐藏按钮的点击。

```
<script language="javascript" type="text/javascript">
    function PerformClick() {
        document.getElementById('<%=btn.ClientID %>').click();
    }
</script> 
```

## 代码背后

```
protected void btn_Click(object sender, EventArgs e)
{
    GetComplete();
} 
```

# c++ - typedef 结构在类内部或外部声明？

> ID：10144484
> 
> 赞同：6
> 
> 时间：2012-04-13T16:12:19.633
> 
> 标签：c++, visual-c++

我正在创建一个名为 ImageLoader 的类，它将用于加载各种图像格式。对于各种图像格式，使用了某些结构。例如，对于 bmp 文件，您有一个 BITMAPFILEHEADER 结构和另外两个结构。

我想知道的是，当我将类定义放在头文件中时，我是让 struct typedefs 成为类定义的一部分，还是应该在类定义之外将它们分开？

我不确定，因为如果我只是声明一个结构变量，那显然会在类中发生，但是因为我正在定义一个类型，我不确定在类中定义一个类型是否被认为是好的设计。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T16:15:38.870

我的一般规则是，如果它只与该类一起使用，则在内部声明它（这意味着所有权）；否则单独声明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T16:58:11.330

如果您尽可能地从标头中省略所有内容，您将获得更好的封装。即使您的类的某些方法需要结构体的参数或返回类型，您也可以使用前向声明。

只有当它是公共接口的一部分时，您才*需要*将其放在标头中。

至于它是否进入课堂，请考虑它是否单独有用，或者它是否完全服从于课堂。如果它可以独立，它可能应该放在自己的标题中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-14T05:08:34.350

我不会说在类中声明类型是糟糕设计的指标。假设您提到的“设计”意味着“可读性”，我会坚持一致性，并坚持以相同的方式表达相同的关系。

否则，您将不会被嵌套类型的神圣愤怒击倒（考虑到 SGI 不是冒烟的火山口）。这是非常以上下文为中心的，因此除了根据您的要求定义的内容之外，没有硬性规定。

如果客户端可访问性不是问题，我会在标题中的适当范围内声明大部分内容，并仅记录我的代码的含义。同样，这是如果我没有严格的使用/可读性指南来强制执行。如果我愿意，我会接受马克的建议。

两分钱：您可以尝试枚举图像类型并使用一个公共结构来存储配置数据，这样您就可以证明将其他所有东西都关在门后。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T17:10:40.970

[BITMAPFILEHEADER](http://msdn.microsoft.com/en-us/library/dd183374%28v=vs.85%29.aspx)是 Win32 平台 SDK 中定义的结构。我不确定我是否理解你的要求和你的课程......

一般来说，如果您要定义不向类的客户端公开的结构，我会在类的私有部分或`Details`头文件的子命名空间中定义它们，例如：

```
namespace YourCoolLibrary
{
  namespace Details
  {
    struct SomeInternalStructure
    {
      ...
    };

  } // namespace Details

  class YourCoolClass
  {
    ...
  private:
    Details::SomeInternalStructure m_something;
  };

} // namespace YourCoolLibrary 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T18:02:07.213

还有更多的选择。如果你把它放在类中，你必须选择它是公共的、受保护的还是私有的，使类定义对类的每个用户可见，只有派生类或没有其他类。

如果您不需要类定义的详细信息，我只会将声明放入 ImageLoader 以使其更简单。内部类的完整定义然后进入实现文件。

我的经验法则是使名称尽可能本地化，所以如果我不小心在错误的地方使用它，编译器会抱怨。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T16:14:19.383

如果`typedef`逻辑上属于您正在创建的类，请将其放在里面；如果它在全球范围内有意义，请将其留在外面。

# python-2.7 - 如何在python2.7中安装MySQLdb 在virtualenv中安装

> ID：10144486
> 
> 赞同：0
> 
> 时间：2012-04-13T16:12:24.490
> 
> 标签：python-2.7, virtualenv, mysql-python

我该如何解决[这个问题](http://dumpz.org/195742/)？

我也有 MySQL-python-1.2.3 dist 在*venv/lib*。在此之前它像 python setup.py install 一样安装如果我使用它，它就可以正常工作：

```
$ python
>>> import MySQLdb 
```

没有虚拟环境

可能存在某种方式将这个安装到任何选择的 virtualenv 中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:27:14.567

只需转到 python/Lib/site-package 并将所有 mysqldb.... 复制到您的虚拟环境

# java - 带有数字和下一个、上一个的 Jpa 分页

> ID：10144487
> 
> 赞同：8
> 
> 时间：2012-04-13T16:12:26.387
> 
> 标签：java, spring, hibernate, jpa, paging

如果有人已经问过这个问题，并且问了一个可能很愚蠢的问题，我很抱歉，但我是新手，你是专家，我很想从你的专家建议和经验中学习。

我想向每页显示 200 条记录的应用程序添加分页。页面底部应该有数字。如果有 1050，第一页将显示 100，页面底部将显示数字 1、2、3、4、5 和 6。

完成此任务的一般逻辑是什么？我知道数据库每次都必须选择 200 并且我必须跟踪第一条记录。

1.  有没有办法知道总共返回多少条记录，这样我就可以知道在页面底部显示多少个数字？它是否需要选择 count() 语句或其他内容？
2.  对于 1050 条记录，将显示数字 1、2、3、4、5 和 6，单击每一个都需要调用服务器。有没有办法知道在下一次调用服务器时将返回多少条记录？它是否需要选择 count() 语句或其他内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T16:39:01.607

您可以使用[JPA Criteria API](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/package-summary.html)来完成此操作。假设[TypedQuery](http://docs.oracle.com/javaee/6/api/javax/persistence/TypedQuery.html)，您将使用`setFirstResult`and`setLastResult`来限制从数据库返回的记录。当然，这些方法的值将取决于请求的页面以及每页显示的记录数。

```
first = (page - 1) * page size;
last = (page * size) - 1; 
```

注意：*这假设第一页是 1（而不是零）。*

要获得记录计数，您需要执行标准 Criteria 查询。举个例子：

```
final CriteriaBuilder builder = entityManager.getCriteriaBuilder();
final CriteriaQuery<Long> countQuery = builder.createQuery(Long.class);
countQuery.select(builder.count(countQuery.from(MyEntity.class)));
final Long count = entityManager.createQuery(countQuery)
        .getSingleResult(); 
```

您也可以自定义上述代码以执行相对于另一个查询的计数。最后，您需要某种方式将总计数传回给客户端。一种方法是将查询的结果集包装在另一个包含计数属性的对象中，或者作为 DAO 调用的结果返回所述对象。或者，您可以将 count 属性存储在请求范围内的对象中。

```
public class ResultListWrapper<T> {
    private Long count;
    private Collection<T> results;

    // constructor, getters, setters
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T16:35:20.717

您通常会执行相同的查询，除了在运行实际查询之前使用 count int 选择列表而不是列来查找有多少页。然后可以通过以下方式在休眠中获取特定页面：

```
int maxRecords = // page size ...
int startRow = // page number * page size
Query query = session.createQuery('...');
query.setMaxResults(maxRecords);
query.setFirstResult(startRow); 
```

如果执行额外查询的操作过于昂贵，那么您可以考虑只提供下一个/上一个链接，或者根据需要提供额外的页面（例如，当最后一个加载的数据进入视图时）通过 ajax。

为了显示分页结果，包括显示页码链接，我建议（假设您使用 jsp 页面来显示此数据）使用[display tag](http://www.displaytag.org) JSP 标记库。显示标签处理表格数据的分页和排序显示，假设您可以将其发送到 JSP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T16:25:41.320

是的，在获取行本身之前，您必须进行选择计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T11:13:19.227

看看[Spring Data JPA](http://www.springsource.org/spring-data/jpa)。它基本上按照 Perception 之前建议的方式工作，只是您不必这样做，框架会为您完成。默认情况下，您会获得分页和排序（如果您不想使用[Query DSL](http://www.querydsl.com/) ，您仍然需要自己进行过滤）。

他们在主页上有一个 1 小时的视频，其中显示了一个快速介绍，但您只需观看大约 15 分钟即可了解 id 的作用。

# jquery - 将来自 instagram 的 RSS 图像提要添加到网站中

> ID：10144488
> 
> 赞同：3
> 
> 时间：2012-04-13T16:12:34.780
> 
> 标签：jquery, html, css, rss, instagram

我正在尝试将 Instagram 提要中的最新图像添加到网页中，并且想知道是否可以在 div 中执行此操作，就像在页面上放置任何其他元素一样。

我想将每个图像的大小调整为 280 x 280，并且只想显示图像 - 没有文本或主题标签。

我不确定这是否是最好的方法，但我发现你可以从 statigram 中提取 RSS 提要，例如[http://statigr.am/feed/username](http://statigr.am/feed/username)

并意识到我需要完整显示图像并调整我在 RSS 图像上找到此页面的高度：http: [//www.w3schools.com/rss/rss_tag_image.asp](http://www.w3schools.com/rss/rss_tag_image.asp)

有谁知道我这样做的最佳方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T16:30:58.920

我还没有尝试过，但这看起来它会做你想要的：[http ://stuffthatspins.com/2012/03/30/display-instagram-picture-stream-really-easy-with-jquery-and-json /](http://stuffthatspins.com/2012/03/30/display-instagram-picture-stream-really-easy-with-jquery-and-json/)

您不会让 javascript 真正调整图像 AFAIK 的大小，但您可以设置 css 来限制它们的显示方式。例如，如果所有图像都有类 instagram：

```
img.instagram{width:280px; height:280px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T10:13:19.647

如果您想自己编写代码，那么获取提要的最佳方式是使用 Instagram 媒体 API - [https://instagram.com/developer/endpoints/users/#get_users_media_recent](https://instagram.com/developer/endpoints/users/#get_users_media_recent)

您将获得一个 JSON 提要，并且需要自己显示结果的样式。

或者，您可以节省自己的所有时间并使用完全编码的插件，该插件将从 Instagram 提取提要。一个很好的例子是尝试 InstaMax 插件。使用 Instamax，您可以显示来自任何用户帐户或 HashTag 的照片和视频。（几乎是你想要的）

干杯:)

# jaxb - JAXB/MOXy 可以像常规类（非枚举）一样序列化枚举吗？

> ID：10144489
> 
> 赞同：4
> 
> 时间：2012-04-13T16:12:36.120
> 
> 标签：jaxb, moxy

想象一下我有这样定义的枚举：

```
public enum ArchiveStatus implements Serializable {
  CANDIDATE         (0, "CANDIDATE", "Candidate for archival"),
  IN_LIBRARY          (1, "IN-LIBRARY", ".."),
  FROM_LIBRARY        (2, "FROM-LIBRARY", "..");

  private int id;
  private String shortName;
  private String longName;

  public ArchiveStatus( int id, String shortName, String longName ) {
    ..
  }

  public int getId() { .. }
  public String getShortName() { .. }
  public String getLongName() { .. }
} 
```

默认情况下，MOXy 会将其序列化为 JSON，如下所示：

```
{
   ..
   "archiveStatus": "CANDIDATE",
   ..
} 
```

有没有办法配置 MOXy（在映射文件中）以像常规类一样序列化枚举：

```
{
   ..
   "archiveStatus": { "id" : 0, "shortName": "CANDIDATE", "longName": "Candidate for archival" },
   ..
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T15:53:45.343

**Note:** I'm the [**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php) lead and a member of the [**JAXB 2 (JSR-222)**](http://jcp.org/en/jsr/detail?id=222) expert group.

**ArchiveStatusAdapter**

You can solve this use case by leveraging an `XmlAdapter`. `XmlAdapter` is a JAXB mechanism that allows you to marshal one type of object as another.

```
package forum10144489;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public class ArchiveStatusAdapter extends XmlAdapter<ArchiveStatusAdapter.AdaptedArchiveStatus, ArchiveStatus> {

    public static class AdaptedArchiveStatus {
        public int id;
        public String shortName;
        public String longName;
    }

    @Override
    public ArchiveStatus unmarshal(AdaptedArchiveStatus adaptedArchiveStatus) throws Exception {
        if(null == adaptedArchiveStatus) {
            return null;
        }
        return ArchiveStatus.valueOf(adaptedArchiveStatus.shortName);
    }

    @Override
    public AdaptedArchiveStatus marshal(ArchiveStatus archiveStatus) throws Exception {
        if(null == archiveStatus) {
            return null;
        }
        AdaptedArchiveStatus adaptedArchiveStatus = new AdaptedArchiveStatus();
        adaptedArchiveStatus.id = archiveStatus.getId();
        adaptedArchiveStatus.longName = archiveStatus.getLongName();
        adaptedArchiveStatus.shortName = archiveStatus.getShortName();
        return adaptedArchiveStatus;
    }

} 
```

**Root**

The `XmlAdapter` can be specified at the field, property, type, or package level using the `@XmlJavaTypeAdapter` annotation.

```
package forum10144489;

import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

public class Root {

    private ArchiveStatus archiveStatus;

    @XmlJavaTypeAdapter(ArchiveStatusAdapter.class)
    public ArchiveStatus getArchiveStatus() {
        return archiveStatus;
    }

    public void setArchiveStatus(ArchiveStatus archiveStatus) {
        this.archiveStatus = archiveStatus;
    }

} 
```

**jaxb.properties**

To specify MOXy as your JAXB provider you need to add a file called `jaxb.properties` in the same package as your domain classes with the following entry.

```
javax.xml.bind.context.factory = org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**Demo**

```
package forum10144489;

import java.io.StringReader;
import java.util.*;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(2);
        properties.put("eclipselink.media-type", "application/json");
        properties.put("eclipselink.json.include-root", false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Root.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StringReader jsonStringReader = new StringReader("{\"archiveStatus\" : {\"id\" : 0, \"shortName\" : \"CANDIDATE\", \"longName\" : \"Candidate for archival\"}}");
        StreamSource jsonSource = new StreamSource(jsonStringReader);
        Root root = unmarshaller.unmarshal(jsonSource, Root.class).getValue();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**Output**

Below is the output from running the demo code:

```
{
   "archiveStatus" : {
      "id" : 0,
      "shortName" : "CANDIDATE",
      "longName" : "Candidate for archival"
   }
} 
```

**For More Information**

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)
*   [http://blog.bdoughan.com/search/label/XmlAdapter](http://blog.bdoughan.com/search/label/XmlAdapter)
*   [http://blog.bdoughan.com/search/label/jaxb.properties](http://blog.bdoughan.com/search/label/jaxb.properties)

# c++ - 返回指向指针变量的指针的函数？

> ID：10144490
> 
> 赞同：-1
> 
> 时间：2012-04-13T16:12:48.053
> 
> 标签：c++, pointers

假设我有一个链表节点类

```
class node {
    private: 
        node *next_node;
    public:
        node *next() const;
};

node *node::next() const {
    return next_node;
} 
```

next() 是否返回节点 **next_node 或节点 *next_node。另外，在实现列表类函数（即插入、删除、查找）中，两者的意义是什么？

我认为它返回 **next_node 的原因是因为 next_node 已经是一个指针，并且在函数中将它作为指针返回会使它成为指向指针的指针。我读过其他问题，例如：[链表头双指针传递](https://stackoverflow.com/questions/3313233/linked-list-head-double-pointer-passing)双指针也适用于列表操作，所以我有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:14:39.717

The `node::next()` function as implemented is returning a copy of the `next_node` member variable. Both `next_node` and this copy point to the same `node` instance but they are otherwise independent of each other.

Here is some rather bad ASCII art that tries to demonstrate their relationship

```
next_node ----> [node instance]
                ^
the copy ------/

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:15:26.453

正如声明所说，它返回一个指向下一个节点的指针，类型为`node*`。

它用于在列表中前进；例如：

```
for (node * n = list.head(); n; n = n->next()) {
    // Process node n
} 
```

# javascript - 从外部视图模型层次结构范围遍历剔除到根

> ID：10144493
> 
> 赞同：1
> 
> 时间：2012-04-13T16:13:02.817
> 
> 标签：javascript, knockout.js, knockout-2.0

如果我不在淘汰对象层次结构的上下文中（例如在全局引用的公共类中），是否可以

1.  确定是否存在整体根视图模型（换句话说，确定是否为当前视图调用了 applyBindings）？
2.  如果存在，请找到我当前所在视图的整体根视图模型？

有谁知道这样做的任何实用程序或扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:42:07.500

您将希望查看使用`ko.dataFor`和/或`ko.contextFor`，如下所述：http: [//knockoutjs.com/documentation/unobtrusive-event-handling.html](http://knockoutjs.com/documentation/unobtrusive-event-handling.html)

给定一个元素，它们会告诉您可用于该级别绑定的数据或上下文（$data、$root、$parent、$parents）。

# ms-access - 在 MS Access 中创建存储过程？

> ID：10144494
> 
> 赞同：5
> 
> 时间：2012-04-13T16:13:08.760
> 
> 标签：ms-access, stored-procedures

我想知道是否可以在 Acces 数据库中创建一个`StoredProcedure`to`Insert`数据。我已经尝试了几件事，但到目前为止似乎没有任何效果。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:19:05.237

我知道可以`Stored Procedure`直接在访问中创建一个，但这并不好。

从这里您最好的选择是：

*   模拟`Stored Procedured`使用函数。[我在这里](http://dotnetnuke.adefwebserver.com/Default.aspx?tabid=167)找到了一个教程。但是我没有尝试过这种方法。
*   另一种流行的方法似乎是`SQLServer` `Stored Procedure`在 Acess 中导入并导入它。如果您喜欢这种方法， 请尝试[此链接。](http://accessexperts.net/blog/2011/07/29/sql-server-stored-procedure-guide-for-microsoft-access-part-1/)
*   如果您使用 MS Access 2010，StoredProcedures 将列在`Named Macros`.

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T16:17:05.100

这取决于 MS Access 的版本。Access 2010 既有存储过程，也有表触发器。

对于 access 2010，您打开表（非设计视图），然后选择表选项卡。您可以在那里看到创建存储过程和表触发器的选项。

在这里查看答案：

[如何在 MS Access 中创建存储过程？](https://stackoverflow.com/questions/3287545/how-do-i-make-a-stored-procedure-in-ms-access)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T16:20:35.017

当然。Access 2010 支持各种很酷的东西，例如存储过程和触发器。（编辑 - 有关更多信息，请参阅[@bluefeets](https://stackoverflow.com/a/10144560/183624)答案）。但是，如果您使用的不是 2010 年，您将不得不编写一个[自定义函数](https://stackoverflow.com/questions/230241/does-ms-access2003-have-anything-comparable-to-stored-procedure-i-want-to-run)来获得您正在寻找的结果。

# jquery - jquery克隆函数嵌套删除选项

> ID：10144495
> 
> 赞同：0
> 
> 时间：2012-04-13T16:13:16.840
> 
> 标签：jquery, clone

我的演示非常清楚，当我克隆我的元素时，我克隆并删除了 div，但是 :last 元素 (li) 不应该被删除。我错过了什么？

与此有关！：

```
$(document).on("click", 'li.delete',function () {
            $(this).closest(".outerDiv").remove();
    if ($(this).is(".outerDiv:last")){
            return false;
    } 
```

**演示：http:** [//jsfiddle.net/XeELs/86/](http://jsfiddle.net/XeELs/86/)

**JQUERY** var cloneCount = 0; $("#add-address").click(function() {

```
 $("#to-add-address").clone()
        .attr("id", "to-add-address_Clone" + cloneCount)
        .insertAfter("#to-add-address");
    $("#clone", "#to-add-address_Clone" + cloneCount)
        .attr("id", "clone_Clone" + cloneCount);
    cloneCount++;
});

$(document).on("click", '.options li a',function () {
            $(this).closest(".options").find('li a').removeClass('selected');
            $(this).addClass('selected');

        });
$(document).on("click", 'li.delete',function () {
            $(this).closest(".outerDiv").remove();
    if ($(this).is(".outerDiv:last")){
            return false;
    } 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:29:24.660

使用[size()](http://api.jquery.com/size/)方法找出有多少地址块，这将让您删除它们直到只剩下一个：

```
$(document).on("click", 'li.delete',function () {

    if ($('.outerDiv').size() > 1){
            $(this).closest(".outerDiv").remove();
    }

} 
```

[http://jsfiddle.net/2mby5/](http://jsfiddle.net/2mby5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:33:17.927

试试这个代码

```
var cloneCount = 0;
$("#add-address").click(function() {

    $("#to-add-address").clone()
        .attr("id", "to-add-address_Clone" + cloneCount)
        .insertAfter("#to-add-address").addClass('cloned');  //add a new class cloned to the cloned outerDivs
    $("#clone", "#to-add-address_Clone" + cloneCount)
        .attr("id", "clone_Clone" + cloneCount);
    cloneCount++;
});

$(document).on("click", '.options li a',function () {
            $(this).closest(".options").find('li a').removeClass('selected');
            $(this).addClass('selected');

        });
$(document).on("click", 'li.delete',function () {
            $(this).closest(".outerDiv").filter('.cloned').remove(); // and delete only the cloned ones
    if ($(this).is(".outerDiv:last")){
            return false;
    }   
}); 
```

# mysql - JDBC你如何执行'\. 一些sqlfile.sql'？

> ID：10144500
> 
> 赞同：0
> 
> 时间：2012-04-13T16:13:28.453
> 
> 标签：mysql, jdbc

您如何使用 jdbc 执行此类操作？

```
String x = ("\\. /home/user/Desktop/dbfile.sql");

Class.forName(Database.JDBC_DRIVER);
Connection conn = (Connection) DriverManager.getConnection(
    Database.DB_URL + "localhost" + "/" + "mydatabase", "root", "");
Statement stmt = (Statement) conn.createStatement();

stmt.execute(x); 
```

**结果：**线程“main” com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException 中的异常：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 '.

**我试过这个**

```
public static void main(String[] args) throws Exception
  {

    String x = readFileAsString("/home/user/Desktop/myDB.sql");

    Class.forName(Database.JDBC_DRIVER);
    Connection conn = (Connection) DriverManager.getConnection(
        Database.DB_URL + "localhost" + "/" + "mydb", "root", "");
    Statement stmt = (Statement) conn.createStatement();

    System.out.println(x);
    stmt.execute(x);

  }

  private static String readFileAsString(String filePath) throws Exception
  {
    byte[] buffer = new byte[(int) new File(filePath).length()];
    BufferedInputStream f = null;
    try
    {
      f = new BufferedInputStream(new FileInputStream(filePath));
      f.read(buffer);
    }
    finally
    {
      if (f != null)
        try
        {
          f.close();
        }
        catch (IOException ignored)
        {
        }
    }
    return new String(buffer);
  } 
```

**结果**

```
Exception in thread "main" com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */; 
```

**我的文件看起来像**

```
-- MySQL dump 10.13  Distrib 5.5.21, for Linux (x86_64)
--
-- Host: localhost    Database: DOG
-- ------------------------------------------------------
-- Server version   5.5.21

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `DOG`
--

DROP TABLE IF EXISTS `DOG`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `DOG` (
  `DOG_ID` mediumint(9) NOT NULL,
  `OWNER_ID` mediumint(9) NOT NULL,
  PRIMARY KEY (`DOG_ID`,`OWNER_ID`),
  KEY `CHANNEL_FK1` (`OWN_ID`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:15:42.100

你不能那样做。您需要打开`dbfile.sql`自己，并通过 JDBC API 运行所有行。

如果您每行有**一个 SQL 语句**，这可能会起作用：

```
Class.forName(Database.JDBC_DRIVER);
Connection conn = (Connection) DriverManager.getConnection(
    Database.DB_URL + "localhost" + "/" + "mydatabase", "root", "");
Statement stmt = (Statement) conn.createStatement();
BufferedReader reader = new BufferedReader( new FileReader ("/home/user/Desktop/dbfile.sql"));
String line  = null;
while( ( line = reader.readLine() ) != null ) {
    stmt.executeUpdate(line);    
}
stmt.close();
conn.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:18:38.987

我要做的是查看打开文件，将其全部读入字符串然后执行。如果您卡在这里，快速的 Google 搜索应该会对您有所帮助。

# java - 我可以在 Java 中创建一个替代方法名称，以便可以通过自定义名称或所需的方法名称调用它吗？

> ID：10144503
> 
> 赞同：0
> 
> 时间：2012-04-13T16:13:38.850
> 
> 标签：java, methods, alias

我需要在我的 Java 作业中使用方法名称 setNumberMeAndTheRest()。
是否可以定义一个更短、更贴切的名称，并允许以所需名称调用该方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T16:15:38.287

是的。您可以定义一个包装器方法。

例如：

```
 class MyClass {
      void setNumberMeAndTheRest( ) { ... }
      void setWithShorterName() { setNumberMeAndTheRest(); }
      ...
   } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T16:18:01.420

```
public void m(Object arg1) {
   ridiculouslyLongNamedMethod(arg1);
} 
```

您可能还想检查您的编辑器和/或 IDE 是否可以通过代码完成、缩写等方式为您提供帮助。

或者使用短名称编写您的作业，并在提交之前进行快速重构。您应该能够通过编译（在简单的情况下）和/或单元测试（更正确）来确认您的重构是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T16:22:42.887

简短的回答：是的。几个答案显示了如何做到这一点。然而，从风格上讲，长（足够）方法和变量名称提供的清晰性有很多话要说。您将“浪费”在输入它们的时间和精力可能会在您首先记住您的意思所花费的时间中弥补。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T16:16:47.823

您可以创建另一个名称较短的方法并从中调用长名称的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T16:18:29.267

```
void myfunction(args)
{

setNumberMeAndTheRest(args);

} 
```

调用 myfunction() 它会依次调用你的函数，简单！！！

# ruby-on-rails - Rails gem/plugin 用于模型中的动态自定义字段

> ID：10144504
> 
> 赞同：8
> 
> 时间：2012-04-13T16:13:43.920
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-plugins, dynamic-data

是否有任何用于 ruby​​ on rails 的 gem/plugin 可以**在运行时在模型中定义自定义字段，而无需为每个不同的字段更改模型本身**。

我正在寻找类似[Redmineacts_as_customizable](https://github.com/trappist/acts_as_customizable/blob/master/lib/acts_as_customizable.rb)插件的东西，它被打包为可在 rails 方式中使用的 gem，即

```
gem 'gemname'
rails g something
rails db:migrate

class Model < ActiveRecord::Base
  acts_as_something
end 
```

这是Redmine 中使用的[CustomField](https://github.com/edavis10/redmine/blob/master/app/models/custom_field.rb)和[CustomValue类。](https://github.com/edavis10/redmine/blob/master/app/models/custom_value.rb)

## 编辑：

由于我的问题不清楚，我添加了一个简短的用例来更好地解释我的需求：

> 我希望用户能够设计自己的表单，并收集在这些表单上提交的数据。一个重要的决定是如何存储和访问这些自定义动态记录的设计。

取自[这里](http://www.vaporbase.com/postings/Choosing_a_Schema_for_Dynamic_Records)，在本文中以不同的想法解决问题，但它们都有缺点。出于这个原因，我问是否已经在某些 gem 中解决了这个问题，而无需重新考虑整个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T10:22:50.717

我不知道有什么宝石可以做到这一点，但`serialize`效果很好，而且它是内置的。您将获得由 JSON/YAML 支持的 NoSQL 式文档存储。

如果您允许用户创建自定义表单，您可以将嵌套数组等直接传递到属性中。但是，如果您需要验证结构，则只能靠自己。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T08:42:08.690

从 Rails 3.2 开始，您可以使用`store`方法。只需在您的模型中包含以下内容：

```
store :properties, accessors: [:property1, :property2, :property3...] 
```

您只需要更改一次模型（将`properties`字段添加到 db 表）。您可以稍后添加更多属性而无需更改架构。

其工作方式是将属性哈希序列化为 YAML 并将其保存到数据库中。它适用于大多数情况，但如果您以后想在 db 查询中使用这些值，则不适用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T12:35:23.667

恐怕在 ActiveRecoand（通常在标准关系数据库中）中执行此操作可能会很棘手且复杂。看看[http://mongoid.org/docs/documents/dynamic.html](http://mongoid.org/docs/documents/dynamic.html) - 这个机制使用 nosql 特性。

您也可以尝试以下技巧：

1/ 使用数据库列中的自定义字段序列化哈希，例如`{ :foo => 'bar', :fiz => 'biz' }`

2/ 在从数据库加载一条记录后，进行一些元编程并在记录的单例类上定义相应的方法，例如（假设自定义字段存储在`custom_fields`列中并序列化）：

```
after_initialize :define_custom_methods
# ..or other the most convinient callback

def define_custom_methods
  # this trick will open record's singleton class
  singleton_class = (class << self; self; end)
  # iterate through custom values and define dynamic methods
  custom_fields.each_with_key do |key, value|
    singleton_class.send(:define_method, key) do
      value
    end
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T16:51:31.490

我不知道 gem，但这可以通过创建一个名为 custom_fields 的表来实现，如果您想按数据类型限制字段，则该表具有名称列和可能的数据类型列。然后，您为所需的表和值创建一个自定义字段的连接表，并执行您想要的任何验证。

# javascript - JQuery Mobile`showPageLoadingMsg`没有按预期工作

> ID：10144506
> 
> 赞同：2
> 
> 时间：2012-04-13T16:13:54.550
> 
> 标签：javascript, jquery, jquery-mobile

JQuery Mobile`showPageLoadingMsg`在我的应用程序中不起作用。以下代码仅生成没有文本的纺车：

```
$.mobile.showPageLoadingMsg("b", "please wait..."); 
```

我可以通过添加`true`作为最后一个参数来获得消息：

```
$.mobile.showPageLoadingMsg("b", "please wait...", true); 
```

但**我无法掌握方向盘和信息。**同时出现

我需要有自己的主题还是......我错过了什么？
这是关于 JSFiddle [http://jsfiddle.net/ashanova/VBavX/18/的示例](http://jsfiddle.net/ashanova/VBavX/18/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T20:21:02.847

您需要将 loadingMessageTextVisible 属性设置为 true。就像是：

```
$.mobile.loadingMessageTextVisible = true; // best to put this in mobile init 
```

来自文档： loadingMessageTextVisible 布尔值，默认值：false 显示加载消息时文本是否可见。对于加载错误，文本始终可见。

我认为这个属性和 showPageLoading 方法有些混乱，应该适当地更新或修复 showPageLoading。

这是您更新的示例[http://jsfiddle.net/VBavX/21/](http://jsfiddle.net/VBavX/21/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:27:27.793

实际上，它工作正常。

如果您看一下[这里](http://jquerymobile.com/test/docs/api/methods.html)（官方文档），您会看到“真”时，轮子在显示消息时是隐藏的。

# php - 使用 PHP 的 Ajax 时间警报

> ID：10144512
> 
> 赞同：0
> 
> 时间：2012-04-13T16:14:20.637
> 
> 标签：php, mysql, ajax

我在这里有一个问题：我正在创建一个涉及规划的项目。用户计划特定时间的特定程序并使用 PHP 提交到数据库 MySQL。

我希望系统在计划的时间已到或几分钟后发出警报。

就像是

```
if ($selectedDate==CURDATE() $$ selectedTime==CURTIME()){
  // some ajax to provide popup
} 
```

我会感谢有用的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:28:34.173

您将需要创建一个全局变量来存储您的事件列表，不确定您要使用什么类型。您将从 ajax 调用中填充变量（因此您可以在应用程序的每个页面上执行此操作），然后遍历事件以提示用户。

在页面加载时，您将希望从数据库中获取事件。

```
$(function()
{
     retrieveEvents();
     promptEvents();
}); 
```

创建一个可以调用以获取事件的函数，并将它们存储到全局变量中。

```
function retrieveEvents()
{
    // Make ajax call to get all events

    // Wait 1 minute, calls the function again to get new events
    setTimeout( "retrieveEvents()" , 60000 ); //60000 = 1 minute
} 
```

然后，您将需要一个函数来提示事件

```
function promptEvents()
{
     // At this point you will iterate the global variable of events
     // You can check if the event is 2 minutes away, or 5 seconds away
     // In those cases, you would then show a modal or alert box.

     // Wait 5 seconds, call this method again
     setTimeout( "promptEvents()" , 5000 ); //5000 = 5 seconds
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:18:56.017

您可以尝试运行重复的 ajax 调用（使用 javascript setTimeout）并在第二页上运行数据库查询以检索其存储的“计划时间”并针对当前时间进行测试。如果它正在接近（例如 2 分钟或某事），那么您的 ajax 调用将返回一个警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T16:19:23.570

使用javascript的`setInterval`函数检查时间是否更近。例子：

```
setInterval(function() {
    // ajax request and alert action goes here
}, 1000); 
```

上面示例中的 ajax 检查将每 1 秒（1000 毫秒）执行一次。您可以随意更改间隔，例如 5000（5 秒）。

# ajax - 通过 CORS 请求设置 cookie

> ID：10144521
> 
> 赞同：4
> 
> 时间：2012-04-13T16:14:57.973
> 
> 标签：ajax, cookies, cross-domain

我正在将 API 的客户端库从 JSONP 移植到 CORS。我已经在服务器中设置了所有正确的标头并在客户端中完成了所有指示的事情，但是我遇到了关于 cookie 的问题。该 API 身份验证方法适用于 cookie。使用 JSONP，它使用 API 密钥作为参数向 API 发出 GET 请求。然后服务器在 api.io.holalabs.com（API URL）设置一个 cookie，所以下次它调用 API 时，服务器会请求 cookie 并进行登录。问题是，虽然我在标题中看到了 Set-Cookie，但 api.io.holalabs.com 上没有设置 cookie，因此登录失败。这些是我的标题：

```
Access-Control-Allow-Credentials:true
Access-Control-Allow-Headers:Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version
Access-Control-Allow-Methods:GET
Access-Control-Allow-Origin:http://holalabs.com
Access-Control-Expose-Headers:X-Api-Version, X-Request-Id, X-Response-Time
Connection:close
Content-Length:13
Content-MD5:RjkY1fW5i5MKifxPk+r4tg==
Content-Type:application/json
Date:Fri, 13 Apr 2012 16:06:56 GMT
Server:nginx/1.0.14
Set-Cookie:apikey.sig=DYyrzLFUfJSjsmK5crkxHQg-rxQ; path=/; httponly
X-Api-Version:1.0.0
X-Request-Id:c78b4223-1caf-42db-a99e-b075bdc10ea5
X-Response-Time:2 
```

编辑：在 API 中使用 cookie 是一个可怕的想法，所以现在我们使用标头来验证用户。问题已关闭！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-18T08:31:49.150

问题应该已关闭，但如果有人遇到此问题并需要使用 cookie，这里有一个可能的解释和解决方案：

**解释**

会话 ID 作为 cookie 发送，并且由于请求是跨域的，因此被浏览器视为第三方 cookie。一些浏览器会阻止第三方 cookie，并且会话会丢失。

**解决方案**

在客户端（在浏览器中）生成会话 ID，使用 Javascript sessionStorage 存储会话 ID，然后将会话 ID 与每个请求一起发送到服务器。

（详情：[带有会话的 Javascript 跨域请求](https://404it.no/en/blog/javascript_cross-domain_request_with_session)）

# python - OpenCV相机校准，无法控制失真常数

> ID：10144522
> 
> 赞同：1
> 
> 时间：2012-04-13T16:14:58.843
> 
> 标签：python, matlab, opencv, computer-vision, simplecv

所有，我有一个使用 OpenCV 校准相机的 python 脚本。它现在在 stackoverflow 帮助的帮助下工作。但是，我遇到了失真常数的问题。我似乎无法控制适合的常量数量。我只想要 4 个失真常数，而不是 5 个。在文档中它指出“也就是说，如果向量包含四个元素，则意味着 K3=0”，这就是我想要的。于是我发起dist_const = np.zeros(4)，传给cv2.calibrateCamera，但是返回的dist_const有5个常量返回。我也尝试了标志 CV_CALIB_FIX_K3，但不​​断收到“必须分配一个迭代器”错误。有没有人见过这种行为，任何帮助将不胜感激。

```
import cv2 
from cv2 import cv 
import numpy as np

obj_points = [[-9.7,3.0,4.5],[-11.1,0.5,3.1],[-8.5,0.9,2.4],[-5.8,4.4,2.7],[-4.8,1.5,0.2],[-6.7,-1.6,-0.4],[-8.7,-3.3,-0.6],[-4.3,-1.2,-2.4],[-12.4,-2.3,0.9],[-14.1,-3.8,-0.6],[-18.9,2.9,2.9],[-14.6,2.3,4.6],[-16.0,0.8,3.0],[-18.9,-0.1,0.3],[-16.3,-1.7,0.5],[-18.6,-2.7,-2.2]]

img_points = [[993.0,623.0],[942.0,705.0],[1023.0,720.0],[1116.0,645.0],[1136.0,764.0],[1071.0,847.0],[1003.0,885.0],[1142.0,887.0],[886.0,816.0],[827.0,883.0],[710.0,636.0],[837.0,621.0],[789.0,688.0],[699.0,759.0],[768.0,800.0],[697.0,873.0]]

obj_points = np.array(obj_points,'float32')
img_points = np.array(img_points,'float32')

w = 1680
h = 1050
size = (w,h)

camera_matrix = np.zeros((3,3),'float32')
camera_matrix[0,0]= 2200.0
camera_matrix[1,1]= 2200.0
camera_matrix[2,2]=1.0

camera_matrix[0,2]=750.0 
camera_matrix[1,2]=750.0

dist_coefs = np.zeros(4,'float32')

retval,camera_matrix,dist_coefs,rvecs,tvecs = cv2.calibrateCamera([obj_points],[img_points],size,camera_matrix,dist_coefs,flags=cv.CV_CALIB_USE_INTRINSIC_GUESS)

print camera_matrix
print dist_coefs 
```

链接到我的另一个问题，有 dist_coefs 的结果，来自我试图用 python/opencv 替换的 caltech matlab 代码。

约翰

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T02:25:13.080

将您的 calibrateCamera 调用更改为：

```
retval,camera_matrix,dist_coefs,rvecs,tvecs = cv2.calibrateCamera([obj_points],[img_points],size,camera_matrix,dist_coefs,flags=cv2.CALIB_USE_INTRINSIC_GUESS + cv2.CALIB_FIX_K3) 
```

您不希望我像在示例中那样混合 cv2 和 cv 命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T02:19:20.877

我明白你的意思了。可能是因为您只使用单个图像进行校准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T12:25:41.663

我遇到了同样的问题，我找到的解决方案是：

```
import cv2
from cv2 import cv

... flags = cv2.cv.CALIB_USE_INTRINSIC_GUESS + ... 
```

# python - celery 在将其用作代理时可以优雅地忍受 mongodb 故障转移吗？

> ID：10144526
> 
> 赞同：2
> 
> 时间：2012-04-13T16:15:13.757
> 
> 标签：python, django, mongodb, replication, celery

我正在使用 mongodb 副本集作为 celery 的代理和结果存储。

我已经成功地让它在副本集上运行，但是当我关闭主 mongodb 节点，并且副本集将辅助提升到主节点时，celery worker 和 beat 进程就会死掉。

如果我重新启动它们，它们在新的主节点上运行得很好。有没有办法让 celery 等待片刻才能选出新的初选？

在这种情况下，芹菜正在 django-celery 下运行。

更新记录到kombu（芹菜使用的传输层）的问题：[https ://github.com/ask/kombu/issues/123](https://github.com/ask/kombu/issues/123)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-06T22:36:32.877

尝试运行“mongos”实例作为副本集的包装器。在你的情况下，这不是一个失败点。“mongos”将负责故障转移。

# emgucv - 如何使用 emgucv 从 ip camera 获取视频

> ID：10144527
> 
> 赞同：2
> 
> 时间：2012-04-13T16:15:13.637
> 
> 标签：emgucv, ip-camera

**概括：**

我正在尝试从 emgu 中的 IP 摄像机获取视频，我可以在浏览器中显示来自诸如“ [http://169.254.255.253](http://169.254.255.253) ”之类的 ip 的视频。

**问题：**

我怎么能从 emgu 显示这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-12T14:15:36.777

如果您使用的是 Emgu 3.1，请尝试以下操作：

```
Capture cameraCapture
cameraCapture = new Capture("http://user:passwd@http://169.254.255.253");
Mat frame = cameraCapture.QueryFrame();
imageBox1.Image = frame; 
```

这是捕获类参考：

[http://www.emgu.com/wiki/files/3.1.0/document/html/5edc4ff8-cec3-c5ee-8e62-629cf4c7940a.htm](http://www.emgu.com/wiki/files/3.1.0/document/html/5edc4ff8-cec3-c5ee-8e62-629cf4c7940a.htm)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:54:51.610

```
Capture _Capture = new Emgu.CV.CvInvoke.cvCreateFileCapture("http://username:pass@cam_address/axis-cgi/mjpg/video.cgi?resolution=640x480&req_fps=30&.mjpg"); 
```

我没有测试，但可能这个代码片段或方法可以帮助你。对于 OpenCV 示例，您可以查看此页面：[OpenCV with Network Cameras](https://stackoverflow.com/questions/712998/opencv-with-network-cameras)

您可以查看此方法的 wiki 页面：[http ://www.emgu.com/wiki/files/2.3.0/document/html/a26a5e9d-53d7-633a-5d50-508aa22dd1fd.htm](http://www.emgu.com/wiki/files/2.3.0/document/html/a26a5e9d-53d7-633a-5d50-508aa22dd1fd.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-23T05:42:18.657

通过 rstp 协议，您可以获得视频源

```
grabber = new Capture(@"rtsp://UserName:Password@172.198.8.44:654/Streaming/Channels/101") 
grabber.QueryFrame(); 
```

这是给海康威视相机的

# ruby - Ruby 的 %q / %Q 引用方法的用例是什么？

> ID：10144543
> 
> 赞同：74
> 
> 时间：2012-04-13T16:16:12.863
> 
> 标签：ruby, string, quotes

我一直在阅读 Thomas 的 Programming Ruby 1.9 并发现了另一种分隔单引号和双引号的方法 ( `%q / %Q`)。我也从其他 Ruby 语言参考资料中了解到它们。

```
%q/I'm acting like a single-quoted string/

%Q|"I'm acting like a double-quoted string" --Anonymous| 
```

我使用 Ruby 的时间不长，但我*从未*在生产代码中遇到过这种引用方法。

除了明显能够**避免使用反斜杠在内部转义引号**之外，这种引用常规单引号或双引号的方法的常见用例是什么？它们通常用于单行字符串还是多行字符串？如果在多行字符串中使用，它们是否比 HEREDOC 字符串更受青睐？是否有一个特别常见的 Ruby 习语？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-04-13T16:28:31.147

在您已经“用完”引用方法的情况下，它们对于使用 JavaScript 转义 HTML 非常有用：

```
link = %q[<a href="javascript:method('call')">link</a>] 
```

我还发现它们在处理多行 SQL 语句时非常有用：

```
execute(%Q[
  INSERT INTO table_a (column_a)
    SELECT value
      FROM table_b
      WHERE key='value'
]) 
```

这样做的好处是您不需要注意查询中使用的引用类型。它适用于单、双或两者。与 HEREDOC 风格的方法相比，它们也少了很多麻烦。

Ruby 提供了其他类似的便利方法，例如`%r`可以构造正则表达式。当试图编写一个处理类似的东西时，这避免了斜线炎，`http://`否则必须逃脱。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-15T20:34:36.357

### 概述

除了“避免内部转义引号”和@tadman 之前提供的示例之外，还有其他用例：

*   使用与生成器本身相同的语言自动生成代码（例如，Ruby 生成 Ruby）
*   提供格式清晰的代码，不会混淆文本编辑器的语法高亮功能
*   允许存储可能必须通过多个存储层的代码块（例如与网站交互的数据库，或与文本编辑器交互的片段管理系统，文本编辑器与子shell交互，等等）

### 细节

这种方法是一种通用且健壮的习惯用法，适用于任何类型的自动代码生成工具，包括但不限于用其他语言编写样板代码的工具，或管理 IDE 或文本编辑器的代码片段的工具.

除了@tadman 已经提供的示例之外，还有生成代码的一般情况，其中生成的代码与生成程序的代码具有相同或基本相似的语法。

在这些情况下，该解决方案不仅仅有助于避免使用反斜杠来转义引号。如果没有这样的解决方案，在某些情况下生成的代码会变得非常难以维护。

要查看这方面的示例，请随时查看以下参考资料。

### 参考

[参见例如，

*   [http://en.wikipedia.org/wiki/Leaning_toothpick_syndrome](http://en.wikipedia.org/wiki/Leaning_toothpick_syndrome)
*   [http://c2.com/cgi/wiki?QuineProgram](http://c2.com/cgi/wiki?QuineProgram)
*   [http://en.wikipedia.org/wiki/Delimiter#Delimiter_collision](http://en.wikipedia.org/wiki/Delimiter#Delimiter_collision)
*   [http://en.wikipedia.org/wiki/Quine_(计算)](http://en.wikipedia.org/wiki/Quine_(computing))

]

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-06-20T19:27:32.973

我知道这是一个旧线程，但我在调用[系统](https://apidock.com/ruby/Kernel/system)命令并想要插入一些值时在生产中使用它们，如下所示：

```
 system(%Q(ffmpeg -y -i "#{input_filepath}" -qscale:a 2 "#{output_filepath}")) 
```

超级好用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-30T15:32:24.793

可能值得注意的是，在生成 gemspecs 时，捆绑器和珠宝商默认使用 %q 用于 gemspec 的摘要/描述部分。这可以防止某人在摘要或描述中使用引号并破坏 gemspec。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-13T16:29:01.977

当您的字符串包含单引号或双引号时，它们很有用。这种情况并不经常发生，但这种技术在发生时非常有用。

# c++ - 使用向量进行简单的 2D 碰撞检测

> ID：10144549
> 
> 赞同：0
> 
> 时间：2012-04-13T16:16:44.473
> 
> 标签：c++, algorithm, animation, geometry

我正在尝试创建碰撞算法并在我的 Win32 2D GUI 应用程序中实现他。任务是我得到一个向量来确定 .bmp 图像的中底和四个位于菱形位置的向量。我想让它工作，以便算法知道图像是来自左、右、上还是下。互联网上有很多关于矩形、圆形和距离计算的碰撞检测的教程，但我在将它们应用于菱形时遇到了困难。还有一种叫做[轴对齐的边界](http://www.gamasutra.com/view/feature/131833/when_two_hearts_collide_.php?print=1)但我认为它适用于 3d 矢量。当谈到这个话题时，我很弱，所以如果有任何熟练的 C++ 程序员可以指导我阅读一些提到这个话题的好电子书，或者如果代码很小，可以打出来。我尝试在 ABCD 整个菱形上进行 X、Y 坐标的迭代，但失败了。

感谢所有帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:25:55.437

我不是计算机图形学方面的专家，但通常你的问题归结为确定一个点是否在凸多边形内。

为此，我将使用以下简单技术。有一个称为向量积的函数，它有助于确定从一个向量到另一个向量的旋转方向是正还是负。因此，您检查点 X 是否在由多边形 A_1、A_2、...、A_n 形成的菱形内只是检查所有向量积 (A_iA_{i+1}, A_iX) 是否具有相同的符号。

向量 (x1, y1) 和 (x2, y2) 的向量积定义为 x1 * y2 - x2 * y1。

现在，您的检测是这样进行的：如果先前的位置在多边形之外，而当前位置在多边形内部，则该点已击中多边形。为了确定哪一侧被交叉，您只需检查自上次位置更新以来向量积 (A_iA_{i+1}, A_iX) 的哪些符号发生了变化。

# c# - 使用样式定义解析类属性

> ID：10144550
> 
> 赞同：0
> 
> 时间：2012-04-13T16:16:45.147
> 
> 标签：c#, html, css, regex, styles

我会具体：

我该如何更换

```
<style type="text/css">
   .class1 {font-weight:bold; font-size:10pt;}
   .class2 {font-weight:bold; font-size:12pt;}
   ...
   .classN {font-weight:bold; font-size:8pt; vertical-align:sub;}
</style>

<div class="class2" style="color:blue;">
   Bold Text
</div> 
```

有了这个：

```
<div style="color:blue; font-weight:bold; font-size:12pt;">
   Bold Text
</div> 
```

**请注意 - 节点可以是任何节点 - 属性顺序无关紧要。- 类属性不需要被剥离

有任何 HTML 方法（C#）可以做到这一点吗？正则表达式？有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:36:38.303

如果您使用的是 jquery，则可以使用此插件：

```
/*
 * getStyleObject Plugin for jQuery JavaScript Library
 * From: http://upshots.org/?p=112
 *
 * Copyright: Unknown, see source link
 * Plugin version by Dakota Schneider (http://hackthetruth.org)
 */

(function($){
    $.fn.getStyleObject = function(){
        var dom = this.get(0);
        var style;
        var returns = {};
        if(window.getComputedStyle){
            var camelize = function(a,b){
                return b.toUpperCase();
            }
            style = window.getComputedStyle(dom, null);
            for(var i=0;i<style.length;i++){
                var prop = style[i];
                var camel = prop.replace(/\-([a-z])/g, camelize);
                var val = style.getPropertyValue(prop);
                returns[camel] = val;
            }
            return returns;
        }
        if(dom.currentStyle){
            style = dom.currentStyle;
            for(var prop in style){
                returns[prop] = style[prop];
            }
            return returns;
        }
        return this.css();
    }
})(jQuery); 
```

并尝试这样的事情

```
<div class="class2" style="color:blue;">
   Bold Text
</div>
<script type="text/javascript">
  var computedStyle;
  $("div[class^='class']").each(function(){
    computedStyle = $(this).getStyleObject();
    $(this).css(computedStyle);
    $(this).attr('class','');
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:37:42.203

使用此工具将您的 HTML/CSS 转换为内联 CSS。=

[http://inlinestyler.torchboxapps.com](http://inlinestyler.torchboxapps.com)

仅在必要时才使用它，例如样式化基于 HTML 的电子邮件等。

# c# - 无法让 DropDownList 与 ViewModel 一起使用

> ID：10144558
> 
> 赞同：2
> 
> 时间：2012-04-13T16:17:00.497
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor

我目前为博客设置了 ViewModel：

```
public class PostViewModel
{
    public string Title { get; set; }
    public DateTime DateCreated { get; set; }
    public string Content { get; set; }
    public int CommentCount { get; set; }
    public ICollection<Topic> Topics { get; set; }
    public ICollection<Comment> Comments { get; set; }
} 
```

与控制器完美配合：

```
private MyDB db = new MyDB();

public ActionResult Index()
{
    var posts = (from p in db.Set<BlogPost>()
                 select new PostViewModel
                 {
                     Title = p.Title,
                     DateCreated = p.DateCreated,
                     Content = p.Content,
                     Topics = p.Topics,
                     Comments = p.Comments,
                     CommentCount = p.Comments.Count
                 }).ToList();

    return View(posts);
} 
```

鉴于这两个部分，我可以遍历列表并生成带有相应评论和主题的博客文章。但是，我希望在其中包含主题列表的一侧有一个下拉列表。我猜我也需要改变我的 ViewModel 和 HomeController，但我只是不确定如何去做。

```
@Html.DropDownListFor(???????) 
```

然后会进入我的Index.cshtml，但我不知道当其他所有内容都以列表形式出现时我会如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:21:37.093

您可以调整您的视图模型，使其包含视图所需的所有必要信息。所以你提到了一些关于帖子列表和主题下拉列表的内容。所以这很简单：

```
public class BlogViewModel
{
    public PostViewModel Post { get; set; }

    public string TopicID { get; set; }
    public IEnumerable<SelectListItem> Topics { get; set; }
} 
```

然后当然你必须调整你的控制器动作，以便它从你的后端层获取所有需要的信息并创建正确的视图模型以传递给视图：

```
public ActionResult Index()
{
    var posts = (from p in db.Set<BlogPost>()
                 select new PostViewModel
                 {
                     Title = p.Title,
                     DateCreated = p.DateCreated,
                     Content = p.Content,
                     Topics = p.Topics,
                     Comments = p.Comments,
                     CommentCount = p.Comments.Count
                 }).ToList();

    IEnumerable<Topic> topics = ... go ahead and fetch the topics you want to show in the ddl

    var blog = new BlogViewModel
    {
        Posts = posts,
        Topics = topics.Select(t => new SelectListItem
        {
            Value = t.ID,
            Text = t.TopicText
        })
    };
    return View(blog);
} 
```

最后是视图：

```
@model BlogViewModel
...
@Html.DropDownListFor(x => x.TopicID, Model.Topics) 
```

当您想在帖子上循环或其他内容时，只需`Model.Posts`在您之前`Model`直接使用的视图中使用，因为您的视图被强类型化为`IEnumerable<PostViewModel>`.

# c# - 字符串替换（）/正则表达式替换 - 替换字符串数组中的字符串？

> ID：10144568
> 
> 赞同：-1
> 
> 时间：2012-04-13T16:17:34.603
> 
> 标签：c#, regex, arrays, string, replace

我正在编写一个控制台应用程序，它从 csv 文件中读取并将文件中的每个元素存储到字符串数组中。有一种方法我想遍历数组中的每个字符串并删除所有非字母字符和空格。我使用 regex.replace() 成功地使用字符串执行此操作，但是一旦我尝试使用字符串数组执行此操作，情况就发生了变化。然后我继续尝试使用 string.replace() 但无济于事。我认为正则表达式路径是一个更好的选择，但我还没有成功。如果有人可以帮助我，我将不胜感激。到目前为止，这是我的代码：

```
 public static string[] ChangeAddress(string[] address)
    {
        for (int i = 0; i < address.Length; i++)
        {
            Regex.Replace(i, @"(\s-|[^A-Za-z])", ""); 
            System.Console.WriteLine(address[i]);
        }
        return address;
    }

    static void Main(string[] args)
    {
        string[] address = null;
        //try...catch read file, throws error if unable to read
        //reads file and stores values in array
        try
        {
            StreamReader sr = new StreamReader("test.csv");
            string strLine = "";
            //while not at the end of the file, add to array
            while (!sr.EndOfStream)
            {
                strLine = sr.ReadLine();
                address = strLine.Split(',');
            }
        }
        catch (Exception e)
        {
            Console.WriteLine("File could no be read:");
            Console.WriteLine(e.Message);
        }

        //calls ChangeAddress method
        ChangeAddress(address);
    } 
```

csv 文件包含用逗号分隔的不同地址。我的目标是删除数字，只留下街道名称。例如，原始字符串可能是 123 假的，目标是删除“123”，以便将其替换为“假”。我想对数组中的每个元素执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:26:46.080

替换时，您需要对结果进行一些处理，类似以下的内容应该可以修复它。

```
public static string[] ChangeAddress(string[] address)
{
    for (int i = 0; i < address.Length; i++)
    {
        address[i] = Regex.Replace(address[i], @"(\s-|[^A-Za-z])", ""); 
        System.Console.WriteLine(address[i]);
    }
    return address;
} 
```

这里的关键是您必须将值传递到`RegEx.Replace`并更新您的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:31:32.610

除了米切尔的回答，这是一个问题：

```
StreamReader sr = new StreamReader("test.csv");
string strLine = "";

//while not at the end of the file, add to array
while (!sr.EndOfStream)
{
   strLine = sr.ReadLine();
   address = strLine.Split(',');
} 
```

...并且可以替换为[File.ReadAllLines](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)：

```
addresses = File.ReadAllLines("test.csv"); 
```

您可以使用[File.ReadLines](http://msdn.microsoft.com/en-us/library/dd383503.aspx)并即时修复地址：

```
var addresses = new List<string>();
foreach(var address in File.Readlines("test.csv"))
{
    var corrected = Regex.Replace(address, @"(\s-|[^A-Za-z])", "");
    addresses.Add(corrected);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T16:32:21.627

为什么不将正则表达式替换应用于 strLine，然后再将其放入地址数组？您可以执行以下操作：

```
`Regex.Replace(strLine, @"(\s-|[^A-Za-z])", "");`
`地址 = strLine.Split(',');`

```

当然，您可能还想修改您的正则表达式以不删除“，”。

# c# - 将排序列表排序为数据表顺序

> ID：10144569
> 
> 赞同：-1
> 
> 时间：2012-04-13T16:17:46.850
> 
> 标签：c#, datatable, sortedlist

我从有序数据表中填充排序列表，但在填充排序列表后，我的订单发生了变化

```
 for (int i = 0; i &lt; d.Rows.Count; i++)
        {
              int EmpID = Convert.ToInt32(d.Rows[i]["Fd_Emp"].ToString().Trim());
            string type=d.Rows[i]["Fd_Type"].ToString().Trim();
            emp.Add(EmpID, type);

        } 
```

我的数据表顺序是 31e,32e,33e,7i

我的 sortedlist 顺序变为 7i,31e,32e,33e

如何将我的数据表顺序保留在排序列表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:22:48.637

使用排序列表的想法是它使添加的元素保持排序顺序。这意味着如果数据库中的元素未排序（或排序方式与排序列表排序不同），排序列表中的元素将具有不同的顺序

如果 DB 中的值已排序，并且您希望从排序列表中获得相同的排序，则可以为元素提供自定义排序方法，在其中复制 DB 用于其值的比较逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:44:55.603

该类`SortedList<T>`根据您提供的比较函数对元素进行排序，或者，如果您不提供比较函数，则根据该类型的默认比较器对元素进行排序。但是，您的排序逻辑取决于不在排序列表中的数据（您说“我按另一列排序查询）。因此您无法对列表进行排序。

该类`List<T>`包含一个有序的元素序列；顺序是添加它们的顺序。换句话说，`List<T>`将使元素保持相同的顺序。由于您希望元素保留从数据库中检索它们的顺序，因此您应该使用`List<T>`.

> 不抱歉，但我有我的逻辑，所以我必须使用排序列表

如果您需要使用，`SortedList<T>`那么您将不得不以复杂的方式进行操作，以便您可以参考用于对数据进行排序的列中的值。有几种可能性。但我更倾向于改变对`SortedList<T>`. *为什么需要使用`SortedList<T>`？* 如果您能提供更多背景信息，我们或许可以帮助您解决更大的问题。您将其简化为的较小问题似乎过于复杂。

# sql - 选择表中的锁定记录

> ID：10144570
> 
> 赞同：0
> 
> 时间：2012-04-13T16:17:51.450
> 
> 标签：sql, sql-server-2008, tsql

我使用这个 Tsql 在我的数据库中选择锁定的对象：

```
select  
    object_name(P.object_id) as TableName, 
    resource_type, resource_description
from
    sys.dm_tran_locks L join sys.partitions P
                   on L.resource_associated_entity_id = p.hobt_id 
```

但这只会显示现在锁定的表。如何显示锁定的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:45:27.977

以下代码将帮助您查找 SQL Server 上的所有当前请求及其状态。我相信你无法达到创纪录的水平。我可能错了。

```
SELECT r.session_id, r.status, r.start_time, r.command, s.text, 
r.wait_time, r.cpu_time, r.total_elapsed_time, r.reads, r.writes, r.logical_reads, r.transaction_isolation_level 
,r.* 
FROM sys.dm_exec_requests r 
CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) s 
```

下面将告诉您是什么阻止了您的请求。

```
select distinct object_name(a.rsc_objid), a.req_spid, b.loginame 
from master.dbo.syslockinfo a (nolock) join 
master.dbo.sysprocesses b (nolock) on a.req_spid=b.spid 
where object_name(a.rsc_objid) is not null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-16T15:01:17.217

有一个（未记录的）方法！我知道为时已晚，但对于仍在寻找答案的人来说：

```
SELECT <main_key>
FROM <table>
WHERE %%lockres%% IN ( select dm_tran_locks.resource_description from sys.dm_tran_locks ) 
```

# iphone - PhoneGap IOS 5.1 - PhoneGap getPicture() 总是返回 imageUri 而不是 Base64

> ID：10144579
> 
> 赞同：1
> 
> 时间：2012-04-13T16:18:34.723
> 
> 标签：iphone, ios5, cordova

我正在尝试使用 PhoneGap 在 IOS5.1 应用程序上捕获图像。出于某种原因，我的成功回调函数总是被赋予文件 Uri 而不是 Base64 编码版本。这是我的 getPicture 调用：

```
navigator.camera.getPicture(captureSuccess, captureError,
                {
                    sourceType: Camera.PictureSourceType.CAMERA,
                    destinationType: Camera.DestinationType.DATA_URL,
                    quality : 40,
                    encodingType: Camera.EncodingType.JPEG
                }); 
```

有人能告诉我这是为什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:51:28.937

是的，这是一个错误。沙兹修好了。1.6.1 周一出。

[https://issues.apache.org/jira/browse/CB-496](https://issues.apache.org/jira/browse/CB-496)

# c# - 按自定义顺序排序

> ID：10144582
> 
> 赞同：1
> 
> 时间：2012-04-13T16:18:39.313
> 
> 标签：c#, sorting

我需要对一些代码进行排序，但是以一种奇怪的方式

我需要按非正常顺序排序，我需要先排序 40s，然后是 50s、90s、70s、80s、60s、20s、30s、10s、00s。

解决这个问题的最佳方法是什么？

它在 C#.net 3.5 中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:21:03.007

大多数排序方法都可以接受一个`IComparer`对象，所以如果你可以编写一个接受两个项目的方法，并且可以说出哪个在前，那么你可以使用该比较器方法进行排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T16:21:22.333

您通常可以提供自定义方法来进行排序（排序方法或包含这些值的排序集合类。

或者您是在问该方法中的算法应该是什么？

对于算法，您可以使用以下方法：

```
int getFirstOrder(int v) {
  if (50 <= v && v <= 59) {
    return 1;
  } else if (90 <= v && v <= 99) {
    return 2;
  }
  // and so on
}

int Compare (int v1, int v2)
{
  int o1 = getFirstOrder(v1);
  int o2 = getFirstOrder(v2);

  if (o1 < o2 || (o1 == o2 && v1 < v2)) {
    return -1;
  } else if (o1 > o2 || (o1 == o2 && v1 > v2)) {
    return 1;
  } else {
    return 0;
  }
} 
```

我确信有一种更有效的方法（尤其是对于`getFirstOrder()`，但这应该会让你朝着正确的方向前进

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T16:59:56.907

我最终使用了这个

```
private class CodeComparer : IComparer<Code>
{
    public int Compare(Code x, Code y)
    {
        var order = "4597862310";

        var bodyStyleX = x.Substring(6, 2);
        var bodyStyleY = y.Substring(6, 2);

        // Same body style group
        if (bodyStyleX[0].Equals(bodyStyleY[0]))
            return string.Compare(bodyStyleX, bodyStyleY, true);

        var indexX = order.IndexOf(bodyStyleX[0]);
        var indexY = order.IndexOf(bodyStyleY[0]);

        return indexX < indexY ? -1 : 1;
    }
} 
```

# c# - 如何在 linq 中设置 If else 语句

> ID：10144588
> 
> 赞同：-2
> 
> 时间：2012-04-13T16:19:07.753
> 
> 标签：c#, sql, linq

我想评估查询的结果并根据结果进行切换。如果“chk”查询从 t.c_pointsTotal 列返回为“0”，则使用 query1。我想我遇到了数据类型问题（评估为字符串，因为我只知道该怎么做）？？？在 db c_pointsTotal 中是一个浮点数。我该如何做到这一点？因为它是下面的代码没有正确评估。

ps 如果有人愿意，请告诉我何时或为什么使用 Linq 与 SQL（与 DataReader）相对，以获得相同的效果。

```
String zero = "0";
var chk = (from t in db.t_BannerUsers
           where t.c_call_id.ToString().ToLower().Equals(c_call_id.ToLower())     
           &&  t.c_user_id.ToString().ToLower().Equals(c_user_id.ToLower())
           select ((t.c_pointsTotal))).ToString();

if (String.Equals(chk, zero))
{
    return(query1.....)
}
else
{
    return (query2....)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:27:26.893

首先，您必须确保查询只返回一个结果。

关于数据类型，您可以更改：

```
String zero = "0"; 
```

对此：

```
decimal zero=0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:26:38.230

`chk`是一系列项目。 `zero`是单个字符串。如果`chk`只返回 1 个项目，您可以使用 LINQ`First`方法获取该项目，或者`FirstOrDefault`它可能为空。如果它可以返回多个，您需要决定您希望它的行为方式。如果它只看第一个，检查所有这些，等等。

编辑：实际上你调用`ToString`了查询，所以你只会得到`"IEnumerable<string>" in the query; you should remove that ToString`.

# c# - SSIS 自定义组件在 VS2008 中工作，但在 DTExec 下失败，可能与 LineageID 有关

> ID：10144590
> 
> 赞同：0
> 
> 时间：2012-04-13T16:19:14.710
> 
> 标签：c#, ssis, bids

我正在编写一个自定义 SSIS 组件，在 Visual Studio 中运行时可以正常工作；但是，使用 dtexec.exe 或 dtexecui.exe 运行时会失败。

`PreExecute`当我建立从列名到 LineageID 的映射时，方法中发生了故障。这就是我感到困惑的地方，因为我在调试器中查看东西我所做的就是将我得到的值传递`var foo = output.OutputColumnCollection[i].LineageID`给`bufferManager.FindColumnByLineageID(output.Buffer, foo)`

在这一点上，我得到一个异常抛出的`FindColumnByLineageID`说法，

> System.ArgumentException 未被用户代码处理 Message=Value 不在预期范围内。
> Source=Microsoft.SqlServer.DTSPipelineWrap StackTrace：InnerException：

我很茫然。代码在 BIDS 中运行良好，此时的逻辑似乎还可以，真的没有什么可做的，我只是将一个值从 SSIS 传递回 SSIS。我的感觉是，有些设置或配置搞砸了，但我不知道此时会是什么。任何猜测将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:46:50.807

您的 Visual Studio 机器是 64 位环境吗？您可能想尝试运行 DTExec.exe 的 32 位版本，即 Program Files (x86) 中的那个。

尝试使用 64 位版本运行包时会出现相当[多](http://toddmcdermid.blogspot.com/2009/10/quick-reference-ssis-in-32-and-64-bits.html)的[问题。](http://msdn.microsoft.com/en-us/library/ms141766.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:33:57.440

您是否注册了自定义组件？

自定义 SSIS 组件（例如自定义任务或自定义转换）不会随部署实用程序一起移动。您必须手动移动和注册组件以使 SSIS 包能够访问它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T19:46:02.050

一年多前，我承诺会对此进行跟进，对等待感到抱歉。时间的距离使一些细节褪色，但基本上我是个问题，因为组件实际上在两种环境中的接线方式不同。

在 BIDS 中运行时，会在组件图中添加一些在命令行案例中不存在的不可见组件。我怀疑这是为了提供对 GUI 更新的支持以及附加查看器的能力。

我试图变得聪明并从该图表中提取一些信息，并且由于隐藏在 BIDS 案例中的额外组件而幸运。（感觉就像是那些应该在堆上分配的东西在堆栈上分配的错误之一，而你的命运取决于堆栈的那部分何时会被踩到。）一旦我修复了我所做的错误假设然后组件图自行解决。

# java - 在不透明的 BufferedImage 上绘制透明的 BufferedImage

> ID：10144599
> 
> 赞同：1
> 
> 时间：2012-04-13T16:19:58.387
> 
> 标签：java, transparency, alpha, bufferedimage

我在绘制 BufferedImages 时遇到了问题。我正在开发一个基于 2D 瓦片的地图编辑器，当我绘制瓦片时，它首先绘制较低层，然后是顶层。像这样：

```
public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    g.drawImage(tileLayer, 0, 0, null);
    g.drawImage(objectLayer, 0, 0, null);
} 
```

请注意，此方法位于扩展 JLabel 的类中。它实际上是在重绘已设置的 ImageIcon。现在，要理解这个问题，您必须意识到在创建 objectLayer BufferedImage 之前，会检查每个像素的特定颜色。如果像素是该颜色，则该像素将设置为全白，alpha 值为 0（以便它透明）。例子：

```
 int transparentRed = transparentColor.getRed();
    int transparentGreen = transparentColor.getGreen();
    int transparentBlue = transparentColor.getBlue();

for (int x = 0; x < image.getWidth(); x++)
{
    for (int y = 0; y < image.getHeight(); y++)
    {
        int color = i.getRGB(x, y);

        int red = (color & 0x00FF0000) >> 16;
        int green = (color & 0x0000FF00) >> 8;
        int blue = color & 0x000000FF;

        // If the pixel matches the specified transparent color
        // Then set it to an absolute white with alpha at 0
        if (red == transparentRed && green == transparentGreen && blue == transparentBlue)
            i.setRGB(x, y, 0x00FFFFFF);
    }
}

    return i; 
```

重点是将顶层绘制在下层之上，而不会影响任何先前放置的下层像素。顶层的白色像素不应该出现。

问题是这对某些图像有效，而在其他图像上则无效。在某些图像上，当我去绘制顶层时，无论如何它只是绘制白色（好像 alpha 值没有设置为 0），而在其他图像上它就像一个魅力并且没有绘制白色像素在。

我一直只使用 .png 图像，所以我知道它与格式无关。我已经尝试了很多不同的东西，如果有人能帮忙，我会被困住。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T00:26:31.480

我相信默认情况下 BufferedImage 不支持 alpha 通道。在构造 BufferedImage 时，传入 BufferedImage.TYPE_INT_ARGB 解决了这个问题。

# hyperlink - 如何在fancybox里面放一个链接？

> ID：10144601
> 
> 赞同：1
> 
> 时间：2012-04-13T16:20:14.820
> 
> 标签：hyperlink, fancybox, lightbox

抱歉，我对 js 了解不多（任何东西），我正在为我正在做的网站使用 fancybox 版本 2。

问题是我需要将这两个文本链接放在灯箱内的照片下方。

细节

在 Flickr 上查看

但我不知道我需要如何以及在哪里放置它们！=S 如果有人可以帮助我，请！

谢谢，=D

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-13T16:21:23.493

创建一个包含所有信息的新页面（按您选择的布局）会更容易，然后使用 fancybox 的 iframe 模式链接到该页面。

# php - PHP、PDO、MySQL 和 InnoDB，如何使用 FK 更新/删除记录？

> ID：10144609
> 
> 赞同：2
> 
> 时间：2012-04-13T16:20:39.937
> 
> 标签：php, mysql, pdo, foreign-keys, innodb

我已经阅读了类似的问题，但没有关于使用 ON DELETE 和 ON UPDATE 的非常详细的解释，所以我无法理解，当你想删除或更新记录时，更新数据库的正确程序是什么FK约束，但在引用时不删除其他表中的记录，而是将这些引用设置为null或0或其他表中的内容。

# 背景

我正在尝试为该数据库（用于电子购物车系统）创建一个函数库，以便该数据库可以由管理员（如 CMS）管理。

我选择 InnoDB 引擎来使用外键和事务。

我还使用 PHP PDO 对象而不是标准`mysql_`-functions 来使用参数化查询。

这是这些表的 SQL 创建代码：

```
# TBL_MENU_CATEGORY

DROP TABLE IF EXISTS tbl_menu_category;
CREATE TABLE tbl_menu_category(
    id INT NOT NULL AUTO_INCREMENT,
    PRIMARY KEY(id),
    name VARCHAR(50)
) ENGINE = InnoDB;

# TBL_PRODUCT_CATEGORY

DROP TABLE IF EXISTS tbl_product_category;
CREATE TABLE tbl_product_category(
    id INT NOT NULL AUTO_INCREMENT,
    PRIMARY KEY(id),
    name VARCHAR(50)
) ENGINE = InnoDB;

# TBL_MENU_CAT_BASKET

DROP TABLE IF EXISTS tbl_menu_cat_basket;
CREATE TABLE tbl_menu_cat_basket(
    menu_id INT,
    FOREIGN KEY(menu_id) REFERENCES tbl_menu_category(id),
    cat_id INT,
    FOREIGN KEY(cat_id) REFERENCES tbl_product_category(id)
) ENGINE = InnoDB;

# TBL_PRODUCT_CAT_BASKET

DROP TABLE IF EXISTS tbl_product_cat_basket;
CREATE TABLE tbl_product_cat_basket(
    cat_id INT,
    FOREIGN KEY(cat_id) REFERENCES tbl_product_category(id),
    product_id INT,
    FOREIGN KEY(product_id) REFERENCES tbl_product(id)
) ENGINE = InnoDB; 
```

这是库中的一个功能，用于将子菜单添加到菜单（菜单 > 子菜单 > 产品）。

```
function addSubmenu($menu_id, $sub_name) {
    $success = false;
    if ( dbTransaction() ) {
        $sql = "INSERT INTO tbl_product_cat(name) VALUES ('?');";
        dbQuery($sql, array($sub_name));
        $rows = dbRowsAffected();
        if ($rows == 1) {
            $cat_id = dbLastInsertId();
            $sql = "INSERT INTO tbl_menu_cat_basket(menu_id, cat_id) VALUES ('?','?');";
            dbQuery($sql, array((int)$menu_id, (int)$cat_id));
            $rows = dbRowsAffected();
            if ($rows == 1) {
                $success = true;
            }
        }
        if ($success)
            dbCommit();
            return "Add submenu successful.";
        else
            dbRollback();
            return "Add submenu failed.";
    }
} 
```

查询是这样执行的：

```
require_once "pdo.php"; # Creates PDO object '$db'
$query;

function dbQuery($sql, $data) {
    global $db, $query;
    $query = $db->prepare($sql);
    $query->execute($data);
}

# other PDO & PDOStatement methods like this
# (rowCount, lastInsertId, fetchAll, transaction-stuff). 
```

# 问题

我什至不确定这是否正确。我是在走正确的道路还是做错了事？

现在我坚持创建类似的功能来更新也有外键的记录。我知道 InnoDB 会抛出记录无法更新的错误，因为它有引用（我认为？）。

我需要知道更新记录的正确程序以及我可以使用的功能。

我想了解 ON DELETE 和 ON UPDATE 约束，但我似乎找不到任何好的、对新手友好的教程（MySQL 文档非常不友好，甚至不突出语法）。

# 我想做的事

更新记录时，我想级联更新，以便更新所有引用。

删除记录时，我只想删除已删除的记录，但可以重置对它的任何引用（如果删除产品类别，则不应删除产品；如果删除产品，则不应删除该产品的所有订单但产品值设置为 0 或 null）

我如何使用 ON DELETE 和 ON UPDATE 来做到这一点 - 或者 - 我应该采取什么程序来实现我想要在这里做的事情？

感谢您的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:29:46.347

`ON UPDATE CASCADE ON DELETE SET NULL`在您的外键规范中指定应该可以解决问题。

例如，`FOREIGN KEY(product_id) REFERENCES tbl_product(id) ON UPDATE CASCADE ON DELETE SET NULL`。尽管我想知道您在哪里预见到更改主键值有意义的情况。

您可能对[MySQL Workbench](http://www.mysql.com/products/workbench/)感兴趣- 它可以帮助您直观地设计模式并显示相应的 DDL 语句。

# objective-c - 删除照片后 UIImagePickerController 崩溃

> ID：10144616
> 
> 赞同：1
> 
> 时间：2012-04-13T16:21:29.563
> 
> 标签：objective-c, ios, xcode, uiimagepickercontroller

似乎找不到其他有这个问题的人，所以就这样吧。我像这样创建我的 UIImagepickerview

```
UIImagePickerController *picker = [[UIImagePickerController alloc] init];
[picker setContentSizeForViewInPopover:CGSizeMake(250.0f, 450.0f)];
picker.delegate = self;
picker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
[EditChoicePopoverController setContentViewController:picker animated:YES];

[picker release]; 
```

我第一次创建它工作正常。我可以抓取图像并用它们做我喜欢的事情。当我退出我的应用程序，从应用程序外部加载我的照片库并删除图像时，问题就出现了。然后，当我从头开始打开我的应用程序并尝试再次打开 UIImagepickerview 时，它会因错误而崩溃。

***由于未捕获的异常“NSRangeException”而终止应用程序，原因：“-[NSOrderedSet initWithOrderedSet:range:copyItems:]: range {3, 2} 超出范围 [0 .. 3]”***

现在我假设这与给定的表格/预期值/实际值有关，但我不知道该怎么做。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:46:48.503

尝试实现应用程序委托的方法[applicationDidEnterBackground:](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationDidEnterBackground%3a)并释放每个保留对这些图片的引用的对象。
有可能，即使您退出应用程序，当您恢复应用程序时，一些引用仍会保持活动状态以加快加载速度。

# java - 我如何将这些控件向左对齐？

> ID：10144617
> 
> 赞同：0
> 
> 时间：2012-04-13T16:21:31.167
> 
> 标签：java, swing

这是它的输出：

![这是它的输出：](../Images/a7cba89ea6f25c7e949aafbfde482b45.png)

我想对齐最左边的“Imprimante : MonImprimante”以及 3 个复选框。

您可以通过使用 ctrl-f 搜索 *** 找到与我想要对齐的内容相关的代码

这是我的代码：`

```
package gui;

import java.awt.BorderLayout;
import java.awt.GridLayout;

import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JSlider;

public class ImprimanteWindow extends JFrame{

   //Declares the panels used to place the controls.
private JPanel JPanelBtn;
private JPanel JPanelChk;
private JPanel JPanelRad;
private JPanel JPanelDrpChk;
private JPanel JPanelWrap;
private JPanel JPanelSuperWrap;
private String[] QltImpression = { "Haute", "Medium", "Bas"};

public ImprimanteWindow(){

    //Initialise the panels
    JPanelBtn = new JPanel(new GridLayout(4,1, 10, 10));
    JPanelChk = new JPanel(new GridLayout(3,1));
    JPanelRad = new JPanel(new GridLayout(3,1));
    JPanelDrpChk = new JPanel();
    JPanelWrap = new JPanel(); //used to put the other panels inside
    JPanelSuperWrap = new JPanel();  //used to put everything in 1 big panel

            //Initialise the buttons and add them to the button Panel
    JPanelBtn.add(new JButton("Ok"));
    JPanelBtn.add(new JButton("Annuler"));
    JPanelBtn.add(new JButton("Paramètre"));
    JPanelBtn.add(new JButton("Aide"));
    this.add("East", JPanelBtn);

            //***I want to align this to the far left 
            //adds the check boxes to the checkbox panel
    JPanelChk.add(new JCheckBox("Image"));
    JPanelChk.add(new JCheckBox("Texte"));
    JPanelChk.add(new JCheckBox("Code"));

            ////adds the radio buttons to the radiobutton panel
    JPanelRad.add(new JRadioButton("Selection"));
    JPanelRad.add(new JRadioButton("Tous"));
    JPanelRad.add(new JRadioButton("Applet"));

            //***I want to align this to the far left 
            //adds the label to the top section of the panel
    JPanelSuperWrap.add(new JLabel("Imprimante : MonImprimante"));

            //adds the 2 panels and the slider to the middle section
    JPanelWrap.add(JPanelChk);
    JPanelWrap.add(JPanelRad);
    JPanelWrap.add(new JSlider());
    JPanelSuperWrap.add(JPanelWrap);    

            //adds a label, a combobox and a checkbox to the bottom.
    JPanelDrpChk.add(new JLabel("Qualite de l'impression :"));
    JPanelDrpChk.add(new JComboBox(QltImpression));
    JPanelDrpChk.add(new JCheckBox("Imprimer dans un fichier"));
    JPanelSuperWrap.add(JPanelDrpChk);
    this.add(JPanelSuperWrap);

    this.pack();

    this.setSize(500,170);
    this.setVisible(true);
    this.setDefaultCloseOperation(EXIT_ON_CLOSE);
    this.validate();
}

public static void main(String args[]){
    ImprimanteWindow gui = new ImprimanteWindow();

}
}` 
```

将控件放置在我的 gui 上的任何帮助都将得到极大的帮助！非常感谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:50:52.403

使用具有硬设置布局的嵌套面板和没有设置的包装器会使生活变得更加困难。如果您要在微观级别上进行显式控制并有特定的显示要求（例如您的标签盒），您应该在`JPanelWrap`和中具有显式布局`JPanelSuperWrap`。

此外，使用可以更好地传达您的意图的布局。[当BoxLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)更好地表达您的意图时，为什么您在嵌套组件中使用 3x1 [GridLayout ？](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)您正在以这种方式执行与 HTML 嵌套布局等效的 Swing。您可以使内部面板使用 Boxes 和 Filler，因为它们是简单的列，并使用 2x2 GridBagLayout for ，占用 2 行。`<table>``JPanelSuperWrap``JPanelBtn`

您可能还需要比这些面板实际名称更好的名称，并且您确实应该考虑将此 View 封装到从`ImprimanteWindow`. 换句话说，将片段之类的`JPanelBtn`部分放入另一个类中，该类在语义上定义了该分组是什么，例如`SelectionChoices`，然后在该类上定义一个返回 JPanel 的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:30:42.710

每次添加 JCheckBox、JLabel 或 JRadioButton（`j`从这里开始表示）时，尝试调用`j.setHorizontalTextAlignment(SwingConstants.LEFT);`. 但是，我怀疑这可能行不通，因为您使用`GridLayout`的是 ，这是一个相当不灵活的布局。

IHMO，如果您`GridBagLayout`在`JPanels`这些组件中使用并用于`GridBagConstraints`告诉布局如何在将这些组件添加到各自的面板时对齐这些组件，那就更好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-22T14:08:18.893

要做到这一点，你只需这样做

```
 JPanel scope = new JPanel();
scope.setBorder(BorderFactory.createTitledBorder("Scope"));
scope.setLayout(new BoxLayout(scope,BoxLayout.Y_AXIS));
scope.setAlignmentX(Component.LEFT_ALIGNMENT); 
```

# apache - .htaccess：无效命令“RewriteEngine”，可能拼写错误或由未包含在服务器配置中的模块定义

> ID：10144634
> 
> 赞同：362
> 
> 时间：2012-04-13T16:22:52.137
> 
> 标签：apache, .htaccess

尝试在本地浏览 php 文件时出现此错误

```
[Fri Apr 13 19:16:40 2012] [alert] [client 127.0.0.1] C:/AppServ/www/hr-website/.htaccess: Invalid command 'RewriteEngine', perhaps misspelled or defined by a module not included in the server configuration, referer: http://127.0.0.1/ 
```

问题是什么 ？

* * *

## 回答 #1

> 赞同：507
> 
> 时间：2012-07-25T12:42:45.623

在[Apache 2+](https://httpd.apache.org/docs/current/)下，您可以简单地执行以下操作（使用 Linux 终端）：

```
sudo a2enmod rewrite && sudo service apache2 restart 
```

或者

```
sudo a2enmod rewrite && sudo /etc/init.d/apache2 restart 
```

* * *

## 回答 #2

> 赞同：409
> 
> 时间：2012-04-13T16:28:47.510

> 或由未包含在服务器配置中的模块定义

检查以确保您已`mod_rewrite`启用。

来自：[https ://webdevdoor.com/php/mod_rewrite-windows-apache-url-rewriting](https://webdevdoor.com/php/mod_rewrite-windows-apache-url-rewriting)

1.  找到 httpd.conf 文件（通常您会在名为 conf、config 或类似内容的文件夹中找到它）
2.  在 httpd.conf 文件中取消注释 LoadModule rewrite_module modules/mod_rewrite.so 行（从行前删除井号'#'）
3.  还要找到 ClearModuleList 行未注释，然后找到并确保 AddModule mod_rewrite.c 行没有被注释掉。

如果`LoadModule rewrite_module modules/mod_rewrite.so`httpd.conf 文件中完全缺少该行，只需添加它。

### 示例命令

要在标准 ubuntu 中启用模块，请执行以下操作：

```
a2enmod rewrite
systemctl restart apache2 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2012-11-29T19:54:35.980

只需遵循简单的 1-2-3 步骤：

> 1) 转到任务栏
> 
> 2) 单击 WAMP 图标（左键单击）

![在此处输入图像描述](../Images/19cb9d9928af39bbf87fefbba4e57669.png)

> 3) 现在转到 Apache > Services > Apache Module 并检查 Rewrite_module 是否启用！如果不是，请单击它！WAMP 将自动重新启动，您就完成了！

![在此处输入图像描述](../Images/8b08ab4a0c6a2a6ed47c71ad6beeaba6.png)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-04-13T16:31:29.537

我可以看到您使用 AppServ，mod_rewrite 默认情况下在该 WAMP 包上被禁用（只是用谷歌搜索）

**解决方案：**

查找：`C:/AppServ/Apache/conf/httpd.conf`文件。

并取消注释此行 `#LoadModule rewrite_module modules/mod_rewrite.so`

**重启 apache...** Simplez

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-05-01T08:29:11.880

[来自verybadbug](https://stackoverflow.com/users/661843/verybadbug)的这条评论帮助了我：

```
ln -s /etc/apache2/mods-available/rewrite.load /etc/apache2/mods-enabled/rewrite.load 
```

之后我们需要重启 Apache：

```
sudo service apache2 restart 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-01-25T14:24:27.050

还要确保通过取消注释来启用 php

```
LoadModule php5_module libexec/apache2/libphp5.so 
```

紧随其后的线

```
LoadModule rewrite_module libexec/apache2/mod_rewrite.so 
```

确保这两行都在

```
/etc/apache2/httpd.conf 
```

未注释。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-03T23:27:21.703

这个错误发生在我身上，因为 mod_rewrite 没有启用。启用重写模块后一切正常： [https ://www.debuntu.org/how-to-enable-apache-modules-under-debian-based-system-page-2/](https://www.debuntu.org/how-to-enable-apache-modules-under-debian-based-system-page-2/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-09T10:51:09.623

启动 Apache httpd.exe 的步骤（我在这里使用 x64 VC11 示例）

```
http://www.apachelounge.com/download/VC11/ 
```

确保您已安装 Visual C++ Redistributable for Visual Studio 2012：VC11 vcredist_x64/86.exe

```
http://www.microsoft.com/en-us/download/details.aspx?id=30679 
```

您可能需要安装 Visual Studio 2012 Update 3 (VS2012.3)

```
http://www.microsoft.com/en-us/download/details.aspx?id=30679 (vcredirect.exe)
http://support.microsoft.com/kb/2835600 
```

解压 httpd-2.4.4-win64-VC11.zip 并复制粘贴进去

```
C:\Apache24 
```

解压 modules-2.4-win64-VC11.zip 并复制粘贴

```
C:\Apache24\modules

http://www.apachelounge.com/viewtopic.php?p=25091 
```

有关模块的更多信息，请参阅 Apache Lounge VC10 Win64 下载页面和/或 .zip 中的自述文件。

```
http://www.apachelounge.com/download/win64/ 
```

在

```
C:\Apache24\conf\httpd.conf 
```

取消注释（删除 # 符号）在此下方开始，例如在此处复制粘贴列表

```
# Example:
# LoadModule foo_module modules/mod_foo.so

LoadModule access_compat_module modules/mod_access_compat.so
LoadModule actions_module modules/mod_actions.so
LoadModule alias_module modules/mod_alias.so
LoadModule allowmethods_module modules/mod_allowmethods.so
LoadModule asis_module modules/mod_asis.so
LoadModule auth_basic_module modules/mod_auth_basic.so
LoadModule auth_digest_module modules/mod_auth_digest.so
LoadModule authn_anon_module modules/mod_authn_anon.so
LoadModule authn_core_module modules/mod_authn_core.so
LoadModule authn_dbd_module modules/mod_authn_dbd.so
LoadModule authn_dbm_module modules/mod_authn_dbm.so
LoadModule authn_file_module modules/mod_authn_file.so
LoadModule authn_socache_module modules/mod_authn_socache.so
LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
LoadModule authz_core_module modules/mod_authz_core.so
LoadModule authz_dbd_module modules/mod_authz_dbd.so
LoadModule authz_dbm_module modules/mod_authz_dbm.so
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
LoadModule authz_host_module modules/mod_authz_host.so
LoadModule authz_owner_module modules/mod_authz_owner.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule autoindex_module modules/mod_autoindex.so
LoadModule buffer_module modules/mod_buffer.so
LoadModule cache_module modules/mod_cache.so
LoadModule cache_disk_module modules/mod_cache_disk.so
LoadModule cern_meta_module modules/mod_cern_meta.so
LoadModule cgi_module modules/mod_cgi.so
LoadModule charset_lite_module modules/mod_charset_lite.so
LoadModule data_module modules/mod_data.so
LoadModule dav_module modules/mod_dav.so
LoadModule dav_fs_module modules/mod_dav_fs.so
LoadModule dav_lock_module modules/mod_dav_lock.so
LoadModule dbd_module modules/mod_dbd.so
LoadModule deflate_module modules/mod_deflate.so
LoadModule dir_module modules/mod_dir.so
LoadModule dumpio_module modules/mod_dumpio.so
LoadModule env_module modules/mod_env.so
LoadModule expires_module modules/mod_expires.so
LoadModule ext_filter_module modules/mod_ext_filter.so
LoadModule file_cache_module modules/mod_file_cache.so
LoadModule filter_module modules/mod_filter.so
LoadModule headers_module modules/mod_headers.so
LoadModule heartbeat_module modules/mod_heartbeat.so
LoadModule heartmonitor_module modules/mod_heartmonitor.so
LoadModule ident_module modules/mod_ident.so
LoadModule imagemap_module modules/mod_imagemap.so
LoadModule include_module modules/mod_include.so
LoadModule info_module modules/mod_info.so
LoadModule isapi_module modules/mod_isapi.so
LoadModule lbmethod_bybusyness_module modules/mod_lbmethod_bybusyness.so
LoadModule lbmethod_byrequests_module modules/mod_lbmethod_byrequests.so
LoadModule lbmethod_bytraffic_module modules/mod_lbmethod_bytraffic.so
LoadModule lbmethod_heartbeat_module modules/mod_lbmethod_heartbeat.so
LoadModule ldap_module modules/mod_ldap.so
LoadModule logio_module modules/mod_logio.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule log_debug_module modules/mod_log_debug.so
LoadModule log_forensic_module modules/mod_log_forensic.so
LoadModule lua_module modules/mod_lua.so
LoadModule mime_module modules/mod_mime.so
LoadModule mime_magic_module modules/mod_mime_magic.so
LoadModule negotiation_module modules/mod_negotiation.so
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
LoadModule proxy_balancer_module modules/mod_proxy_balancer.so
LoadModule proxy_connect_module modules/mod_proxy_connect.so
LoadModule proxy_express_module modules/mod_proxy_express.so
LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so
LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
LoadModule proxy_html_module modules/mod_proxy_html.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule proxy_scgi_module modules/mod_proxy_scgi.so
LoadModule ratelimit_module modules/mod_ratelimit.so
LoadModule reflector_module modules/mod_reflector.so
LoadModule remoteip_module modules/mod_remoteip.so
LoadModule request_module modules/mod_request.so
LoadModule reqtimeout_module modules/mod_reqtimeout.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule sed_module modules/mod_sed.so
LoadModule session_module modules/mod_session.so
LoadModule session_cookie_module modules/mod_session_cookie.so
LoadModule session_crypto_module modules/mod_session_crypto.so
LoadModule session_dbd_module modules/mod_session_dbd.so
LoadModule setenvif_module modules/mod_setenvif.so
LoadModule slotmem_plain_module modules/mod_slotmem_plain.so
LoadModule slotmem_shm_module modules/mod_slotmem_shm.so
LoadModule socache_dbm_module modules/mod_socache_dbm.so
LoadModule socache_memcache_module modules/mod_socache_memcache.so
LoadModule socache_shmcb_module modules/mod_socache_shmcb.so
LoadModule speling_module modules/mod_speling.so
LoadModule ssl_module modules/mod_ssl.so
LoadModule status_module modules/mod_status.so
LoadModule substitute_module modules/mod_substitute.so
LoadModule unique_id_module modules/mod_unique_id.so
LoadModule userdir_module modules/mod_userdir.so
LoadModule usertrack_module modules/mod_usertrack.so
LoadModule version_module modules/mod_version.so
LoadModule vhost_alias_module modules/mod_vhost_alias.so
LoadModule watchdog_module modules/mod_watchdog.so
LoadModule xml2enc_module modules/mod_xml2enc.so 
```

然后找到

```
C:\Apache24\bin\ApacheMonitor.exe 
```

并双击它。

然后在命令提示符（CMD.exe）中输入

```
C:\Apache24\bin\httpd.exe 
```

然后按回车。它显示任何剩余的错误。

使用最新的 Update 3 Visual Studio® 2012 aka VC11 构建。VC11 在性能、内存管理和稳定性等方面对 VC10 进行了改进、修复和优化。例如，跨不同代码生成区域为“速度”进行的代码质量调整和改进。并更多地利用现代处理器和 win7、win8、2008 和 Server 2012 内部功能。

VC11 二进制文件加载 VC11、VC10 和 VC9 模块，不能在 XP 和 2003 上运行。最低系统要求：Windows 7 SP1、Windows 8 / 8.1、Windows Vista SP2、Windows Server 2008 R2 SP1、Windows Server 2012 / R2

下载后和尝试安装之前，应确保它完好无损且未被篡改。使用 PGP 签名和/或 SHA 校验和来验证完整性。

谢谢

# java - 在 Java 中使用 DecimalFormat 舍入

> ID：10144636
> 
> 赞同：14
> 
> 时间：2012-04-13T16:23:21.650
> 
> 标签：java, decimalformat

让我们看一下Java中的以下语句。

```
System.out.println(new DecimalFormat("0").format(2.4)); //returns 2

System.out.println(new DecimalFormat("0").format(2.5)); //returns 2  <---Concentrate here
System.out.println(Math.round(2.5));                    //returns 3

System.out.println(new DecimalFormat("0").format(2.6)); //returns 3
System.out.println(new DecimalFormat("0").format(3.5)); //returns 4 
```

在上述陈述中，除以下情况外，所有其他情况都是显而易见的。

```
System.out.println(new DecimalFormat("0").format(2.5)); 
```

它应该返回`3`但它返回`2`。如何？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-13T16:27:53.750

默认的舍入模式[`DecimalFormat`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/DecimalFormat.html)是[`RoundingMode.HALF_EVEN`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/RoundingMode.html#HALF_EVEN). 这意味着如果数字更接近下一个邻居，它会向上取整或向下取整。当数字恰好在两个邻居之间（在您的情况下为 2 和 3）时，它会四舍五入到最接近的偶数（在您的情况下为 2）。

如您所见，当您使用 3.5 进行尝试时，它四舍五入为 4。

如果您想要更“直观”的行为，即经常教给孩子们的“校舍舍入”，请使用[`RoundingMode.HALF_UP`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/RoundingMode.html#HALF_UP).

```
setRoundingMode(RoundingMode.HALF_UP) 
```

如果数字正好在两个邻居之间，`HALF_UP`则总是向上取整。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-13T16:27:26.213

这是故意行为。从[文档中](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/DecimalFormat.html)：

> 四舍五入
> 
> DecimalFormat 使用半偶数舍入（请参阅 ROUND_HALF_EVEN）进行格式化。

关于[ROUND_HALF_EVEN](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#ROUND_HALF_EVEN)：

> 舍入模式向“最近的邻居”舍入，除非两个邻居是等距的，在这种情况下，向偶数邻居舍入。如果丢弃的分数左边的数字是奇数，则表现与 ROUND_HALF_UP 一样；如果它是偶数，则表现为 ROUND_HALF_DOWN。请注意，这是一种舍入模式，可在对一系列计算重复应用时最大限度地减少累积误差。

这也称为银行家四舍五入。

[`Math.Round`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#round%28double%29)另一方面，使用以下公式，即“正常”舍入：

```
(long)Math.floor(a + 0.5d) 
```

# android - 哔声的流激活

> ID：10144638
> 
> 赞同：1
> 
> 时间：2012-04-13T16:23:31.713
> 
> 标签：android, audio

我想对错误发出哔哔声。

我发现：

```
ToneGenerator tone = new ToneGenerator(AudioManager.STREAM_MUSIC, 50); 
```

和：

```
tone.startTone(ToneGenerator.TONE_CDMA_ABBR_ALERT); 
```

我尝试了其他各种流。

但我什么也没听到。

我必须设置权限吗？如果是这样，是哪一个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T12:53:22.110

我做的！

使用 STREAM_ALARM 和 TONE_PROP_BEEP

# php - Zend Framework 上的公用文件夹

> ID：10144643
> 
> 赞同：2
> 
> 时间：2012-04-13T16:23:52.590
> 
> 标签：php, zend-framework, .htaccess, frameworks

我安装了 Zend Framework，但我这里有一个大问题。当我进入我的应用程序的公用文件夹（localhost/webserver/project/public/）时，我遇到了这个错误：

> 发生错误
> 
> 找不到网页
> 
> 异常信息：
> 
> # 消息：指定的控制器无效（公共）
> 
> 堆栈跟踪：
> 
> 0 C:\webserver\project\library\Zend\Controller\Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
> 
> 1 C:\webserver\project\library\Zend\Application\Bootstrap\Bootstrap.php(97):>end_Controller_Front->dispatch()
> 
> 2 C:\webserver\project\library\Zend\Application.php(366):>Zend_Application_Bootstrap_Bootstrap->run()
> 
> 3 C:\webserver\project\public\index.php(40): Zend_Application->run()
> 
> 4 {主要}
> 
> # 请求参数：
> 
> 大批 （
> 
> '控制器' => '公共'，
> 
> '动作' => '索引'，
> 
> '模块' => '默认'，
> 
> )

我的公用文件夹被解释为控制器。我正在使用 Xampp 在 Apache2.2 和 PHP5.3 中运行该应用程序。

我在 htdoc 上设置的 Document_Root 是“C:/webserver”，因为我在同一台服务器上使用其他应用程序。我在公用文件夹的 htaccess 中使用重写规则。

```
SetEnv APPLICATION_ENV development

RewriteEngine On

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:34:56.517

打开你的 application.ini 并添加

```
resources.frontController.baseurl = "webserver/project/public" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:29:28.583

您可以尝试为您的项目创建虚拟主机。更好的解释在：[ZEND FRAMEWORK](http://framework.zend.com/manual/en/learning.quickstart.create-project.html) and [virtual host in apache](http://zendguru.wordpress.com/2009/04/24/apache-setting-virtual-host-on-local-system/)。对不起英语

# c - 从 GLib 单链表中弹出

> ID：10144647
> 
> 赞同：1
> 
> 时间：2012-04-13T16:24:08.013
> 
> 标签：c, list, glib

一个人如何从[GLib 中的单链表](http://developer.gnome.org/glib/unstable/glib-Singly-Linked-Lists.html)的开头习惯性地“弹出” ？有几个函数可以粘合在一起，但不会像[`g_slist_prepend`](http://developer.gnome.org/glib/unstable/glib-Singly-Linked-Lists.html#g-slist-prepend).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:39:32.687

根据您的用例，要么

```
// pop and discard head
list = g_slist_delete_link(list, list); 
```

或者

```
// pop head but keep it for further use
GSList *head = list;
list = g_slist_remove_link(list, head);
// do stuff with head
g_slist_free1(head); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T16:33:19.597

您可以使用具有和的[双端队列](http://developer.gnome.org/glib/unstable/glib-Double-ended-Queues.html)。`g_queue_push_head``g_queue_pop_head`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T16:33:57.023

```
list = g_slist_remove(list, list->data); 
```

# actionscript-3 - 如何列出文件夹内容 - 获取文件夹中的文件名

> ID：10144649
> 
> 赞同：1
> 
> 时间：2012-04-13T16:24:08.683
> 
> 标签：actionscript-3, flash, air, directory

我正在使用 AIR for andriod，我想在外部文件夹的文件夹中获取所有 jpg（或 Mp3）。它将存储在用户手机上并包含在应用程序中。

如何使用 Action-script 3 从 FLASH 执行此操作？

**更新：**

[这](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html)确实是寻求帮助的正确链接，但我如何编写一个数组来读取并获取文件夹中的所有文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:03:37.527

请确认您是否正在使用 AIR，这是一款使用 AIR 原生运行的应用程序，还是一款基于 Web 浏览器的移动设备上的 Flash 内容。如果前者你基本上可以使用 File 来解析路径，那么你可以使用 FileStream 来读/写文件。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html)

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/FileStream.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/FileStream.html)

如果是后者，您将没有权限从浏览器中访问本地文件系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T16:37:10.393

对于没有任何 PHP/XML 或没有 AIR 的纯 flash 和 AS3，这是不可能的。您可以查看[FileReference](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html)类，但我认为这不是您要寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T02:05:10.090

我只是在研究同样的事情。这对我来说效果很好：http: [//snipplr.com/view/25109/](http://snipplr.com/view/25109/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-01T18:12:49.577

如果我理解正确，您需要在安装应用程序时复制图片/mp3，以便您可以访问它们。您可以转到文件>发布设置并按下播放器旁边的扳手（应设置为空气 2.5）。在底部的“常规”选项卡中，您可以添加您的应用将使用的文件或文件夹。希望这可以帮助。

# jquery - jQuery 工具，无效消息，未被删除

> ID：10144650
> 
> 赞同：1
> 
> 时间：2012-04-13T16:24:12.833
> 
> 标签：jquery, html, jquery-validate, jquery-tools

我正在使用最新版本的 jQuery (1.7.1) 和最新版本的 jQuery 工具，它是 html5 验证器。

发生的事情是，当字段中有文本时，错误不会被删除。好像它是无效的，但它是。

这是我的输入：

```
<input type="text" class="text medium" name="first_name" placeholder="First Name*" rel="tip" title="First Name" required="required" data-message="Your first name is required"/> 
```

我认为这是页面中的其他内容，但我已经做了最简单的事情，它还在做吗？有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:57:54.953

我有一个类似的问题。包括来自 git ( [https://github.com/jquerytools/jquerytools](https://github.com/jquerytools/jquerytools) ) 的源文件，而不是他们下载页面中的源文件，出于某种原因修复了它。

# objective-c - 如何从当前日期获取数组中的最后 7 天？

> ID：10144651
> 
> 赞同：1
> 
> 时间：2012-04-13T16:24:15.193
> 
> 标签：objective-c, ios4

我想要从系统当前日期开始的数组中的最后 7 天（例如 FRI、THU、WED、TUE、MON、SUN、SAT、FRI）。如果有人有任何想法，请提供帮助。我们将不胜感激。非常感谢.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T17:22:39.670

我的两分钱：

```
NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateFormat:@"EEE"];

NSDate *now = [NSDate date];

NSMutableArray *results = [NSMutableArray arrayWithCapacity:8];

for (int i = 0; i < 8; i++)
{
    NSDate *date = [NSDate dateWithTimeInterval:-(i * (60 * 60 * 24)) sinceDate:now];
    [results addObject:[dateFormatter stringFromDate:date]];
}

NSLog(@"%@", results); 
```

通过这种方式，您可以获得本地化的工作日名称，而不必自己构建它们的数组。

事实上，它给你的正是你所要求的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T17:36:46.937

哈哈，好吧，当我在做其他事情时，你得到了一堆答案，但由于我已经完成了大部分，所以无论如何都在这里。这种方法甚至可以跨时间变化等工作，并提供本地化的日期名称。（如果您像在许多其他示例中那样减去时间值，如果您接近时间变化，那么当时间变化时您会遇到问题......）

```
// Subtract one day from the current date (this compensates for daylight savings time, etc, etc.)
- (NSDate *)dateBySubtractingOneDayFromDate:(NSDate *)date {
    NSCalendar *cal = [NSCalendar currentCalendar];

    NSDateComponents *minusOneDay = [[NSDateComponents alloc] init];
    [minusOneDay setDay:-1];
    NSDate *newDate = [cal dateByAddingComponents:minusOneDay 
                                           toDate:date 
                                          options:NSWrapCalendarComponents];
    return newDate;
}

- (NSArray *)lastSevenDays {
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"EEE"];

    NSDate *date = [NSDate date];
    NSMutableArray *weekDays = [[NSMutableArray alloc] initWithCapacity:8];
    for (int i = 0; i > -8; i--) {
        NSString *weekDay = [formatter stringFromDate:date];
        [weekDays addObject:weekDay];
        date = [self dateBySubtractingOneDayFromDate:date];
    }
    return weekDays;
}

// To use it, do this:
NSLog(@"%@", [self lastSevenDays]);
/* 
 * Results:
 * (
 *     Fri,
 *     Thu,
 *     Wed,
 *     Tue,
 *     Mon,
 *     Sun,
 *     Sat,
 *     Fri
 * )
 * 
 */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T16:30:42.510

我假设这是一个一般性的编程问题，并不特定于 iOS 环境。如果我的假设不正确，请随时忽略此答案。

构建一个包含星期几的数组。找到今天的索引，在数组上向后循环，将内容复制到您正在创建的数组中，当您到达零时，将索引设置为 6（假设基于零的数组）并循环回一周中的今天。

像这样（这个代码是名义上的）：

```
string[] days = {"Mon", "Tues" .... "Sun"};
string[] last8Days = new string[8];
int daysIndex, last8DaysIndex;
daysIndex = \\some code to get the index of today's day.
for (last8DaysIndex = 0; last8DaysIndex < 8; last8DaysIndex++)
{
   last8Days[last8DaysIndex] = days[daysIndex];
   daysIndex--;
   if(daysIndex < 0)
       daysIndex = 6;
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T17:22:53.490

我认为这个 StackOverflow 帖子最有用：

[如何检查一周中的哪一天（即周二、周五？）并比较两个 NSDate？](https://stackoverflow.com/questions/583692/how-to-check-what-day-of-the-week-it-is-i-e-tues-fri-and-compare-two-nsdate)

**请参阅那里的Can Berk Güder**的回答，它可能会帮助您了解**如何获取星期几**：

> 您可以为此使用 NSDateComponents：
> 
> 无符号单位 = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit；NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar]; NSDateComponents *components = [gregorian components:units fromDate:date]; 然后您可以像这样访问日期的各个部分：
> 
> [组件年份]；[组件月]；[组件日]；或者，您可以使用 NSCalendar 的 dateFromComponents 方法构造一个新的 NSDate 对象，并比较两个 NSDate 对象。

另请参阅下面的这篇文章，因为它可能会帮助您了解**如何获取从当前日期开始最近 7 天的逻辑**：

[获取 NSDate 今天、昨天、本周、上周、本月、上个月……变量](https://stackoverflow.com/questions/1889164/get-nsdate-today-yesterday-this-week-last-week-this-month-last-month-var)

参考**Ben S**的回答：

> 改编自[日期和时间编程指南](http://developer.apple.com/mac/library/documentation/cocoa/Conceptual/DatesAndTimes/Articles/dtDates.html)：
> 
> ```
> // Right now, you can remove the seconds into the day if you want
> NSDate *today = [NSDate date];
> 
> // All intervals taken from Google
> NSDate *yesterday = [today dateByAddingTimeInterval: -86400.0];
> NSDate *thisWeek  = [today dateByAddingTimeInterval: -604800.0];
> NSDate *lastWeek  = [today dateByAddingTimeInterval: -1209600.0];
> 
> // To get the correct number of seconds in each month use NSCalendar
> NSDate *thisMonth = [today dateByAddingTimeInterval: -2629743.83];
> NSDate *lastMonth = [today dateByAddingTimeInterval: -5259487.66]; 
> ```
> 
> 如果您想根据月份获得正确的确切天数，您应该使用[`NSCalendar`](http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html).

**您也可以在hasat**的同一篇文章中参考同样好的答案：

> 可能是写这篇文章的更好方法，但在这里我提出了 Ben 的 NSCalendar 建议并从那里工作到 NSDateComponents

```
NSCalendar *cal = [NSCalendar currentCalendar];
NSDateComponents *components = [cal components:( NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit ) fromDate:[[NSDate alloc] init]];

[components setHour:-[components hour]];
[components setMinute:-[components minute]];
[components setSecond:-[components second]];
NSDate *today = [cal dateByAddingComponents:components toDate:[[NSDate alloc] init] options:0]; //This variable should now be pointing at a date object that is the start of today (midnight);

[components setHour:-24];
[components setMinute:0];
[components setSecond:0];
NSDate *yesterday = [cal dateByAddingComponents:components toDate: today options:0];

components = [cal components:NSWeekdayCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:[[NSDate alloc] init]];

[components setDay:([components day] - ([components weekday] - 1))]; 
NSDate *thisWeek  = [cal dateFromComponents:components];

[components setDay:([components day] - 7)];
NSDate *lastWeek  = [cal dateFromComponents:components];

[components setDay:([components day] - ([components day] -1))]; 
NSDate *thisMonth = [cal dateFromComponents:components];

[components setMonth:([components month] - 1)]; 
NSDate *lastMonth = [cal dateFromComponents:components];

NSLog(@"today=%@",today);
NSLog(@"yesterday=%@",yesterday);
NSLog(@"thisWeek=%@",thisWeek);
NSLog(@"lastWeek=%@",lastWeek);
NSLog(@"thisMonth=%@",thisMonth);
NSLog(@"lastMonth=%@",lastMonth); 
```

希望这对您有所帮助。

# android - LayoutInflater，在 RelativeLayout 中打开带有活动的布局

> ID：10144652
> 
> 赞同：0
> 
> 时间：2012-04-13T16:24:27.263
> 
> 标签：android, xml, android-intent, layout-inflater

我有一个显示“tools.xml”的“Tools.java”正确吗？在这个“tools.xml”RelativeLayout 中有一个布局 id = @+/contentLayout 是空的。

我还有其他几个活动“tool1.java”、“tools2.java”......显示“tool1.xml”、“tool2.xml”......

例如，如何调用类“tool1.java”并让它在“tools.xml”中的 RelativeLayout 中显示“tool1.xml”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:40:18.393

看看这个

```
// this is you relativelayout from tool.xml
    RelativeLayout relativeLayout = (RelativeLayout )findViewById(R.id.contentLayout);

    LayoutInflater inflater = (LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                  // tool1 is your tool1.xml
            View tool1 = inflater.inflate(R.layout.tool1, null,false);

                // here add tool1 to tool.xml in relativelayout
            relativeLayout.addView(tool1 ); 
```

# codeigniter - 网页过期

> ID：10144655
> 
> 赞同：0
> 
> 时间：2012-04-13T16:24:36.873
> 
> 标签：codeigniter

我怎样才能让用户单击一个页面的链接并且只能查看该页面一小时？

在一小时结束时，我想关闭选项卡/窗口或将用户发送到另一个页面。

我使用 CodeIgniter 作为我的框架。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:41:58.807

你不能在你的视图中放置一个元刷新，将用户移动到你想要的任何页面吗？

这些方面的东西：

```
<meta http-equiv="refresh" content="3600; url=http://example.com/"> 
```

如果您想关闭窗口/选项卡，我想您可以使用一些 javascript

```
<script>
    setTimeout(360000, function(){
        window.top.close();
    });
</script> 
```

如果那个脚本没有做它应该做的事情，请原谅我，我已经很长时间没有使用这样的东西了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:33:37.443

这可以使用 cookie 进行。这个想法是使用您存储在数据库中的访问令牌和时间戳创建一个 cookie。

因此，当用户访问您的数据库时，您会创建一个随机字符串并将其插入数据库。使用 CodeIgniter，这可以通过类似的方式来完成

```
$this->load->helper('string');
$tokenKey = random_string('alnum', 32);
$this->db->insert('tokens', array('userid' => $userid, 'key' => $tokenKey)); 
```

该`tokens`表还应包含创建令牌时的时间戳。这是因为即使我们在 cookie 中添加了过期时间，仍然可以对其进行修改，因此如果我们没有这种双重检查，用户可能会获得对页面的永久访问权限。

现在是时候实际设置cookie了。我们将其过期时间设置为现在 + 3600 秒（从现在起一小时）。

```
setcookie('tokenKey', $tokenKey, time()+3600, '/'); 
```

每当用户尝试访问您的受保护页面时，您可以删除所有超过一小时的令牌（以确保您没有存储过期的令牌），然后查看该令牌是否存在于您的表中。如果是这样，它不到一个小时。

```
// delete old tokens
$tokenKey = $_COOKIE['tokenKey'];
// select token from database 
```

或者，您可以有一个 cronjob 或其他计划的事件来清理过期的令牌，以节省您的客户删除旧记录所需的额外时间。根据您网站的大小，这个时间可能很长。

# java - 带有 Hibernate Search + Infinispan 目录的事务 ACID 属性

> ID：10144656
> 
> 赞同：5
> 
> 时间：2012-04-13T16:24:48.780
> 
> 标签：java, transactions, hibernate-search, acid, infinispan

我有以下设置：

*   JPA (2.0) 到 Hibernate (4.1)
*   Infinispan 作为二级缓存 (5.1)
*   Hibernate Search 连接到 Hibernate (4.1)
*   Infinispan 作为 Hibernate Search (Lucene) 的目录
*   为 Infinispan 目录连接了一个 JDBC CacheStore
*   PostgreSQL (9.1) 数据库来存储实体和 Lucene 目录。
*   Bitronix (2.1.2) 作为事务管理器
*   我没有使用 Java EE，而是使用 Spring (3.1)

Infinispan 作为二级缓存很好，不需要恢复，并且由于缓存的性质，您可以在自己的事务中读取更改。

在阅读源代码数小时后，当我更新实体时，Hibernate Search 不会更新 Lucene 目录，而是在事务结束时（如果它提交），所以我想搜索我刚刚更新的文本，在同一笔交易中，我不能吗？

但此外，在事务完成后，Hibernate Search 在不同的线程中对目录进行更新。因此，如果其中一个目录更新失败，那么 Lucene 会与我的实体不一致吗？如果在更新被发送到目录之前发生了一些事情并且需要恢复，这些更新会丢失吗？

假设这个“第一个”事务成功提交，更新被发送到 Infinispan 目录。一个新的事务将在这里开始。通过谁？Lucene 可以选择使用 JMS 发送更新。假设该选项已激活，因此 JMS 消息初始化新事务。

Infinispan 将使用它接收到的更新来修改其内存目录，但持久性 CacheStore 将在此事务完成时再次更新，在提交之后。因此，如果在更新 jdbc CacheStore 时发生某些事情，它可能不会更新，但 Infinispan 内存目录将应用它们。

我的问题是，考虑到我使用的所有模块都支持事务，并且它们甚至支持加入全局事务 (XA)，*有没有办法实现真正​​的事务性？*也许我只是没有看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-03T20:11:15.550

我正在做一个非常相似的设置。使用这些版本，真正的事务性是不可能的。有几个原因，其中一些你已经注意到：

1.  *Hibernate Search 在提交*阶段执行索引更新
2.  后台线程上的休眠搜索进程 - 即使在“同步”时
3.  Infinispan 缓存存储更新在*提交*阶段完成

在这里，事务阶段很重要，因为最终插入数据库需要在事务的主体中完成并在最后提交。

我的解决方案是忽略索引更新的事务性，在我的情况下这不是绝对必要的。

# c# - C#隐式转换问题

> ID：10144658
> 
> 赞同：-3
> 
> 时间：2012-04-13T16:24:59.827
> 
> 标签：c#

好的，我已经完成了整个工作，直到休息后才开始工作；此时 If 表示检测到无法访问的代码，并且 if(Session["UserType"] = 1) 给出了一个错误，指出无法将类型对象隐式转换为 bool 类型。对于如何解决这个问题，有任何的建议吗？以下是整个代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Configuration;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
    }

    protected void  // ERROR: Handles clauses are not supported in C#
    btnSubmit_Click(object sender, System.EventArgs e)
    {
        if (((string.IsNullOrEmpty(txtUserName.Text))))
        {
            lblErrorMessage.Text = "Username must be entered.";
            txtUserName.Focus();
            return;
        }

        string connString = ConfigurationManager.ConnectionStrings["MyConnection"].ConnectionString;
        System.Data.SqlClient.SqlConnection myConnection = new System.Data.SqlClient.SqlConnection(connString);
        string sql = "Select * From TCustomers";
        System.Data.SqlClient.SqlDataReader objDR = default(System.Data.SqlClient.SqlDataReader);
        System.Data.SqlClient.SqlCommand objCmd = new System.Data.SqlClient.SqlCommand(sql, myConnection);
        myConnection.Open();

        objDR = objCmd.ExecuteReader(System.Data.CommandBehavior.CloseConnection);
        bool blnLogin = false;
        string strPassword = null;
        string strUserName = null;
        strPassword = txtPassword.Text;
        strPassword = strPassword.Trim();
        strUserName = txtUserName.Text;
        strUserName = strUserName.Trim();

        while (objDR.Read())
        {
            if (((objDR["strUserName"].ToString().Trim() == strUserName)) & ((objDR["strPassword"].ToString().Trim() == strPassword)))
            {
                blnLogin = true;
                Session["CustomerID"] = objDR["intCustomerID"];
                Session["UserName"] = objDR["strUserName"];
                Session["FirstName"] = objDR["strFirstName"];
                Session["LastName"] = objDR["strLastName"];
                Session["Email"] = objDR["strEmailAddress"];
                Session["UserType"] = objDR["intUserTypeID"];
                break;

                if ((blnLogin))
                {
                    if(Session["UserType"] = 1)
                    {
                        Response.Redirect("EditAccount.aspx");
                    }
                    {
                        Session["UserType"] = 2;
                        Response.Redirect("AdminPanel.aspx");
                    }
                    Response.End();
                }
                else
                {
                    lblErrorMessage.Text = "Username and/or password is incorrect.";
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T16:28:12.383

问题是您正在执行分配而不是下面代码中的比较

```
if(Session["UserType"] = 1)
{
    Response.Redirect("EditAccount.aspx");
} 
```

使用`==`而不是`=`进行比较。

赋值的结果是`int`，并且`int`不能`bool`在 C# 中隐式转换为。这就是报告的错误。

如果您更改`=`为，`==`您将收到另一个错误，因为您无法将 的值`Session["UserType"]`与`int`. 为此，您需要将其转换为`int`这样

```
if((int)Session["UserType"] == 1)
{
    Response.Redirect("EditAccount.aspx");
} 
```

但请记住，这假定该值可以转换为`int`. 如果不是这种情况，您将收到运行时错误。

代码中可能还有其他错误，但是您包含的代码比我的心理编译器可以处理的要多。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T16:29:04.053

```
if(Session["UserType"] = 1) 
```

...是一个任务，而不是一个比较；你可能想要更接近的东西：

```
if((int)Session["UserType"] == 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T16:30:14.220

您的 if 语句可能应该是比较而不是赋值使用

```
if(Session["UserType"] == 1) 
```

由于中断，您的代码无法访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T16:31:11.663

break 语句将退出 while 循环。它下面的代码将不会执行。因此，该代码是无法访问的。

# c# - 根据用户设置格式化日期和时间，但添加前导零

> ID：10144660
> 
> 赞同：1
> 
> 时间：2012-04-13T16:25:23.567
> 
> 标签：c#, formatting

我知道我可以使用 datetime.ToString("G") 从操作系统中的用户设置中获取正确的时间格式，但是我想添加前导零以确保日期/时间在列中对齐。有没有办法用前导零格式化时间（不使用自定义格式字符串）并让它以用户设置的格式输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:59:52.943

“G”和“g”模式取决于“d”（短日期）模式。请参阅[http://msdn.microsoft.com/en-us/library/8tfzyc64.aspx](http://msdn.microsoft.com/en-us/library/8tfzyc64.aspx)。

您可以基于 构建自定义`CultureInfo`或`DateTimeFormatInfo`对象`CultureInfo.CurrentCulture`，但不要直接从源文化中复制 ，而是`ShortDatePattern`将任何单字母出现的“M”或“d”分别替换为“MM”和“dd”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:58:54.840

您不能同时拥有默认格式和自定义格式。

我认为您想要查看[LongDatePattern](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.longdatepattern.aspx)以找出特定文化和相应分隔符的日/月/年顺序，并基于此创建自定义字符串。

旁注：

*   相反，您可以考虑简单地将文本表中的结果值按空格对齐。
*   如果您希望数据用于除人类消费之外的任何用途，则使用通用格式（可能使用 UTC 值）会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:41:00.490

有点低俗，但它的工作...

```
 CultureInfo ci = CultureInfo.CurrentUICulture;

                string longtimepattern = ci.DateTimeFormat.LongTimePattern;
                longtimepattern = longtimepattern.Replace("m", "mm").Replace("mmmm", "mm") ;
                longtimepattern = longtimepattern.Replace("h", "hh").Replace("hhhh", "hh");
                longtimepattern = longtimepattern.Replace("H", "HH").Replace("HHHH", "HH");
                longtimepattern = longtimepattern.Replace("s", "ss").Replace("ssss", "ss");

                string shortdatepattern = ci.DateTimeFormat.ShortDatePattern;
                shortdatepattern = shortdatepattern.Replace("d", "dd").Replace("dddd", "dd");
                shortdatepattern = shortdatepattern.Replace("M", "MM").Replace("MMMM", "MM");

                string datestr = new DateTime(obj.TestDateTime_utc).ToLocalTime().ToString(shortdatepattern + " " + longtimepattern); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T22:42:23.993

```
public static class DateTimeExtension
    {
        public static string GetLocaleDateTimeFormating(this DateTime T )  
        {
            DateTimeFormatInfo sysUIFormat = CultureInfo.CurrentUICulture.DateTimeFormat;
            string customFormat = sysUIFormat.ShortDatePattern.Replace("d", "dd").Replace("M", "MM");
            customFormat += " " + sysUIFormat.ShortTimePattern.Replace("h", "hh").Replace("H", "HH");
            string newDate = T.ToString(customFormat);
            return newDate;
        }
    } 
```

**获取日期时间格式的值**

```
 this.textBox1.Text = DateTime.Now.GetLocaleDateTimeFormating(); 
```

# c# - 为什么 Session.Timeout 不会使会话过期？

> ID：10144668
> 
> 赞同：0
> 
> 时间：2012-04-13T16:25:52.927
> 
> 标签：c#, asp.net, session, timeout

我在设置会话超时的 Asp.net 应用程序中遇到问题，经过一段时间后，会话仍未过期。这个应用程序有一个 SQL Server 2008 后端数据库，我在其中存储了这个应用程序的会话超时值。我目前将其设置为 3 分钟以进行测试。在 Global.asax 中，在 Session_Start 我有以下内容：

```
// Set the timeout
int timeout = GetSessionLength();
this.Session.Timeout = timeout; 
```

并且`GetSessionLength()`是一个在查询数据库会话超时后返回整数值的函数。

然后，在站点的母版页中，在 Page_Load 上，我有以下内容：

```
System.Web.UI.HtmlControls.HtmlMeta hmRefresh = new System.Web.UI.HtmlControls.HtmlMeta();
hmRefresh.HttpEquiv = "Refresh";
hmRefresh.Content = (this.Session.Timeout * 60).ToString();
Page.Header.Controls.Add(hmRefresh); 
```

一旦超时，这会导致页面自行刷新。我的页面使用它成功地刷新了自己。但是，我还有一些其他代码在会话过期时会被命中，但它永远不会被命中，因为它表明会话从未过期。

此外，我一直在我的计算机上开发一个不同的应用程序，我在该应用程序中使用相同的代码来检测会话超时，它非常适合该应用程序。所以我不确定为什么它不适合这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:32:06.860

我猜你在元刷新之间的同一个会话中有一些其他请求。同一会话中的任何请求都会滑动到期。此外，您尝试在会话到期时立即进行刷新，因此很有可能它会在元刷新时随机到期/不到期。

要调试使用 http 调试器（如[Fiddler](http://www.fiddler2.com/fiddler2/)）并验证发送了什么请求。

注意：对于 SQL 会话状态，没有关于过期的通知（与内存中的不同），因此在 SQL/State 服务案例中知道会话状态是否过期的唯一方法是查看 Session 对象是否为空。如果您使用 Session_End，请查看[Session-State Events 。](http://msdn.microsoft.com/en-us/library/ms178583.aspx)

> 仅当会话状态 Mode 属性设置为 InProc（默认设置）时，才支持 Session_OnEnd 事件。

# javascript - Javascript - 替换 CMS 格式内容中的标签 Pt。二

> ID：10144670
> 
> 赞同：0
> 
> 时间：2012-04-13T16:26:00.730
> 
> 标签：javascript

我正在处理一个格式化文本块的 CMS，如下所示：

> `<p id="V01-cntntTxt">`Lorem ipsum dolor sit amet, consectetur adipiscing elit。`<br>`Vivamus lacus ipsum, semper non consequat eu, facilisis at lectus。Vestibulum et magna ac `<br>`odio semper porttitor lacinia congue orci。Vivamus suscipit eleifend dolor，在 hendrerit `<br>`turpis bibendum ut。`<br><br>`Morbi interdum augue et nisl ullamcorper sit amet ornare `<br>`lorem tempus。Duis nec nisi quis ipsum pulvinar volutpat。Suspendisse venenatis malesuada metus,
> nec pretium dui cursus eget。Donec vitae lorem vitae risus dapibus malesuada congue vel nunc。`</p>`

使用此 CMS 的公司已将使用 SHIFT+Enter x 2 来指示段落分隔符和单个 Shift+Enter 作为换行符作为标准做法。我无法修补或更改 CMS 的工作方式。

这是期望的结果：

> `<p id="V01-cntntTxt">`Lorem ipsum dolor sit amet, consectetur adipiscing elit。Vivamus lacus ipsum, semper non consequat eu, facilisis at lectus。Vestibulum et magna ac odio semper porttitor lacinia congue orci。Vivamus suscipit eleifend dolor，在 hendrerit turpis bibendum ut。`</p><p>`Morbi interdum augue et nisl ullamcorper sit amet ornare lorem tempus。Duis nec nisi quis ipsum pulvinar volutpat。Suspendisse venenatis malesuada metus, nec pretium dui cursus eget。Donec vitae lorem vitae risus dapibus malesuada congue vel nunc。`</p>`

我需要`<br><br>`用结束和开始`</p><p>`标签替换双标签以保持分节符，然后删除任何剩余`<br>`的用于换行符的单个标签。

我已经尝试过了，它几乎可以工作：

```
<script>
$('#V01-cntntTxt').html($('#V01-cntntTxt').html().replace(/<br><br>/g, '</p>'));
$('#V01-cntntTxt').html($('#V01-cntntTxt').html().replace(/<br>/g, ' '));
</script> 
```

但是，结果以一个空段落结束。中间的两个`</p></p>`标签是反的。它应该是`</p><p>`而不是`<p></p>`。似乎正在插入一个开始标签，即使我没有指定它应该。

这是上面脚本的结果，标签向后：

> `<p id="V01-cntntTxt">`Lorem ipsum dolor sit amet, consectetur adipiscing elit。Vivamus lacus ipsum, semper non consequat eu, facilisis at lectus。Vestibulum et magna ac odio semper porttitor lacinia congue orci。Vivamus suscipit eleifend dolor，在 hendrerit turpis bibendum ut。`<p></p>`Morbi interdum augue et nisl ullamcorper sit amet ornare lorem tempus。Duis nec nisi quis ipsum pulvinar volutpat。Suspendisse venenatis malesuada metus, nec pretium dui cursus eget。Donec vitae lorem vitae risus dapibus malesuada congue vel nunc。`</p>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:28:58.823

似乎替换标签`innerHTML`中`<p>`的 并没有根据需要创建新`<p>`标签，因此您应该显式创建一个并在此时将内容拆分为新`<p>`标签。为此，我们将使用`string.split`将字符串的内容拆分为一个数组并`<p>`为每个数组索引创建一个新标签：

```
var par = $('#V01-cntntTxt'); // our first tag
var splits = par.html().split("<br><br>"); // using the first tag to get the array
par.html(splits[0].replace(/<br>/g, " ")); // handling the first index
splits.splice(0, 1) // deleting the first index so it doesnt happen twice
splits.forEach(function(str){ // iterating through the array of strings
    var nPar = $("<p></p>"); // a new <p> tag
    nPar.html(str.replace(/<br>/g, " ")); // removing single <br>s from it
    nPar.insertAfter(par);
    par = nPar; // if another is found it will insert after this
}) 
```

[这里](http://jsfiddle.net/lq_blocco/KjAjQ/13/)也有一个演示。

# javascript - jquery keyup 不能从代码工作，但可以从 chrome.console 工作

> ID：10144672
> 
> 赞同：1
> 
> 时间：2012-04-13T16:26:06.217
> 
> 标签：javascript, jquery, google-chrome-extension

我做了一个谷歌浏览器插件

任务（在sportsbet.com 上）：

*   投注价格
*   提交篮子

问题：

*   `$(".userItems input.amount").val(110);`-> 有效（但需要触发 keyup）
*   `$(".userItems input.amount").keyup();`-> 不起作用，但是当我在控制台中键入它时，它起作用了。

有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:44:53.517

这很有趣，但一个角度是创建一个*模拟的关键事件：*

```
function simulateKeyEvent() {
  var event = document.createEvent("KeyboardEvent");
  event.initKeyEvent(                                                                                      
             "keyup",
              true /*let event bubble up*/,                                                      
              true /*can the event be canceled?*/, 
              null, 
              false /*ctrl key held down?*/,
              false /*alt?*/,
              false /*shift?*/,
              false /*meta (cmd)?*/,
               9 /*keyCode*/,                                                      
               0);

  var cb = document.getElementById("checkbox"); 
  var canceled = !cb.dispatchEvent(event);
  if(canceled) {
    // A handler called preventDefault
    alert("canceled");
  } else {
    // None of the handlers called preventDefault
    alert("not canceled");
  }
} 
```

现在，要真正解决您的问题，您可能希望在页面的 javascript 中运行扩展隔离世界之外的代码。为此，我为您准备了一个绝妙的功能：

```
function runInPage(code) {
  var script = document.createElement('script');
  script.innerHTML = code;
  document.documentElement.insertBefore(script);
} 
```

然后尝试`runInPage('$(".userItems input.amount").keyup();');`

但是你可能需要在此之前加载 jQuery，所以这样做：

```
var jq = document.createElement('script');
jq.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js';
document.documentElement.appendChild(jq); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:29:30.840

.keyup() 不带参数只会触发任何回调附加到该输入的 keyup 事件

.val(110) 所要做的就是设置输入元素的值，这就是为什么不触发事件的原因。

.val(110).keyup() 两者都可以

# android - 如何从Android中的对象获取数据

> ID：10144687
> 
> 赞同：0
> 
> 时间：2012-04-13T16:27:10.307
> 
> 标签：android

在下面的代码中，单击列表项时，我想获取对象内部存在的变量，如何实现这一点

下面是代码片段

```
 private void onListViewItemClick() {
    // TODO Auto-generated method stub
    // item click switch to next activity
    listCustomListViewId.setOnItemClickListener(new OnItemClickListener() {
        /* on click gets list view item id */
        public void onItemClick(AdapterView<?> myAdapter, View myView,
                int myItemInt, long mylng) {
            // fetching clicked item id
            Object o = listCustomListViewId.getItemAtPosition(myItemInt);
            Log.i("Victory Item Id:.....", String.valueOf(o);
            long strid = (long) (listCustomListViewId
                    .getItemIdAtPosition((int) mylng));
            Log.i("Item Id...#######", String.valueOf(strid));

            /* switch on next 'ListItemDeleteUpdateActivity' activity */
            Intent intent = new Intent(FeedsActivity.this,
                    VictoryDetailActivity.class);

            intent.putExtra("customElements", o.toString());
            startActivity(intent);
        }
    });

} 
```

我试图将数据放入 Object 但无法获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:31:06.170

当 ListView 的项目被选中时处理事件。您必须覆盖 onListItemClick() 方法。该方法有4个参数：

```
 @Override
 protected void onListItemClickonListItemClick(ListView l, View v, int position, long id) 
```

要获取有关 ItemSelected 的信息，您只需调用 getItemAtPosition(position) 方法以返回包含数据的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:31:15.810

它应该是`onListItemClick()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T16:32:20.643

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {   
super.onListItemClick(l, v, position, id);

// Get the data associated with selected item
Object item = l.getItemAtPosition(position);
String myitem = item.toString();
edittxt.setText("Selected item is :"+ myitem); // You can Set EditText from Here.

 /* switch on next 'VictoryDetailActivity' activity */
        Intent intent = new Intent(FeedsActivity.this,VictoryDetailActivity.class);
        intent.putExtra("customElements",myitem);
        startActivity(intent);
} 
```

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T16:36:24.570

在 DataSource 上，您可能有一些东西的集合。myItemInt 表示您的集合中与单击的项目相对应的项目。用那个。

如果您需要获取单击视图中的某些视图，请在 myView 上使用 findViewbyId，如下所示：

```
myView.findViewbyId(R.id.myEditTextControl)  //demo, use yours 
```

如果这个答案对您来说还不够，请从您的适配器中发布一些代码，并告诉我们有关您需要做什么的更多详细信息。

# javascript - 使用 Javascript 字符串替换的 2 位或 4 位数字日期验证

> ID：10144689
> 
> 赞同：0
> 
> 时间：2012-04-13T16:27:18.967
> 
> 标签：javascript, string, debugging, validation

**编辑：对于在提出这个问题时犯同样错误的任何人，请在下面查找我的修改后的答案，该答案展示了一个更清洁的解决方案来解决这个问题。**

尝试允许用户输入 2 位或 4 位日期格式，并允许两者都通过验证，但使用 4 位等效值自动更正 2 位格式，假设前 2 位数字应与当前前 2 位数字相同。

我在使用 javascript`replace()`函数时遇到问题。这一行：

```
 input.replace(enteredDate, year); 
```

没有按预期工作。`spine.js`在我使用的框架的上下文中，在操纵应该进行验证的字段时，在其他任何地方都`input`引用`$(event.target)`并且似乎是正确的。`input`最终，我想用完全连接的字符串替换在输入字段中找到的原始字符串（我还没有构建出来），但是现在，如何用分配的 var替换`input`(where input is ) 的内容这里：`var = $(event.target)``year`

`var year = currentYear.charAt(0) + currentYear.charAt(1) + unparsedYear;`

这是到目前为止我所拥有的函数的完整代码，它在引用该`.replace()`行时引发以下错误 - `Uncaught TypeError: Object [object Object] has no method 'replace'`

```
validateDate: function(event) {

        var input = $(event.target);
        var enteredDate = input.val();

        input.destroyValidationMessage();

        var pattern = /^(\d{1,2})\/(\d{1,2})\/(\d{2})|(\d{4})$/;
        var result = enteredDate.match(pattern);

        if (result !== null) {
            var month = parseInt(result[1], 10);
            var day = parseInt(result[2], 10);
            var year = parseInt(result[3], 10);

            var unparsedYear = parseInt(result[3], 10);
            var unparsedYearStrLength = unparsedYear.toString().length;
            if ( unparsedYearStrLength < 4) {
                var currentYear = new Date().getFullYear().toString();

                var year = currentYear.charAt(0) + currentYear.charAt(1) + unparsedYear;
                alert('Autocorrected year will be ' + year);
                input.replace(enteredDate, year);
            }

            var date = new Date(year, month - 1, day);
            var isValid = date.getFullYear() === year && date.getMonth() === month - 1 && date.getDate() === day;

        } else {
            input.createValidationMessage('Invalid Date');
            input.addClass('invalid'); 
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:45:37.320

正如我在上面的评论中提到的：

`input`是一个 DOM 元素，但您实际上想要替换元素的*内容*与元素本身，所以使用`input.val(new_value)`而不是实际`input`元素。

# linq - 从规范化表中检索 JOINed 数据的标准模式是什么？

> ID：10144690
> 
> 赞同：1
> 
> 时间：2012-04-13T16:27:21.447
> 
> 标签：linq, linq-to-sql, linq-to-objects

我定义了以下简单的“教科书”类：

```
 public class Product
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public int Category { get; set; }
    }

    public class Category
    {
        public int Id { get; set; }
        public string Name { get; set; }
    } 
```

Product 中的 Category 字段是一个整数，引用 Category 类中的 Id 字段。在数据库中，它将是 Product 和 Category 表之间的外键关系。

但是我的应用程序需要显示产品类别的友好名称。

**Q1**：如下定义一个新类是否正确：

```
 public class ProductJ : Product
    {
        public string CategoryName { get; set; }
    } 
```

然后，如果我现在有一个方法 getProductsJ 如下：

```
 public class Test
    {
        public List<Category> Categories = new List<Category>() { ... };
        public List<Product> Products = new List<Product>() { ... };

        public List<ProductJ> getProductsJ()
        {
            var products = from p in Products
               join c in Categories on p.Category equals c.Id
               select new ProductJ { Id = p.Id, , Name = p.Name, CategoryName = c.Name }; //!
            return products.ToList();
        }
    } 
```

**Q2**：以上是检索具有类别名称的产品列表的最佳方法吗？

**Q3**：在select语句中（//！）有没有更快的方法来填充基类Product linq的字段而不必一一输入？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:07:32.703

您可以将连接的结果投影到包含对产品和类别的引用的对象中。

```
public class Product
{
  public int Id { get; set; }
  public string Name { get; set; }
  public int Category { get; set; }
}

public class Category
{
  public int Id { get; set; }
  public string Name { get; set; }
}

public class ProductCategory
{
  public Product Product { get; set; }
  public Category Category { get; set; }
}

class Program
{
  static void Main(string[] args)
  {
    List<Category> Categories = new List<Category>();
    List<Product> Products = new List<Product>();

    var products = from p in Products
                   join c in Categories on p.Category equals c.Id
                   select new ProductCategory { Product = p, Category = c };

    var list = products.ToList();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:46:18.157

每本书都属于一个类别，还是在您的情况下可以属于多个类别？因为如果一本书属于一个类别，那么您只需在 Book Table 中移动类别名称即可。我也建议看看

[MVC LINQ to SQL 表连接记录显示](https://stackoverflow.com/questions/278941/mvc-linq-to-sql-table-join-record-display)

# java - Java：找不到字符串替换

> ID：10144695
> 
> 赞同：-1
> 
> 时间：2012-04-13T16:27:44.280
> 
> 标签：java, string, replace, str-replace

mystring.replace() 在我的文本中找不到所有内容，例如：

```
replace = (CalendarInfo.Monday + " " + String.valueOf(dayofmonth) + " " + String.valueOf(CalendarInfo.Month[monthofyear]).toString());
                   str= str.replace(replace, "Hello"); 
```

我已经检查了`str`，`replace`但是替换仍然没有做任何事情！`str`完全有替换字符串。

那么为什么不替换替换！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:37:57.333

```
String str = "abcd".replace("ab", ""); //str is "cd" 
```

这意味着您的代码基本上可以工作。但是您的替换字符串并不完全在您的源字符串中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:33:32.577

可能是因为你的假设是错误的。

可能不同的（空白）空格数，或不同的代码（0x20 或 0xa0），或制表符“\011”

# javascript - TIMESTAMP 中的日期不正确，例如 DD_MM_YYYY_HH_MI_SS

> ID：10144699
> 
> 赞同：0
> 
> 时间：2012-04-13T16:28:13.767
> 
> 标签：javascript, variables, date, timestamp

Colls，我有一个代码应该创建一个 sToday 变量，它返回像“DD_MM_YYYY_HH_MI_SS”这样的时间戳：

```
var today = new Date();

var CurrentDay = today.getDay();
var CurrentMonth = today.getMonth();
var CurrentHours = today.getHours();
var CurrentMin = today.getMinutes();
var CurrentSec = today.getSeconds();

if (CurrentDay < 10)
   sToday = "0"+today.getDay().toString();
else 
   sToday = today.getDay().toString();

if(CurrentMonth<10)
  sToday += "_0"+today.getMonth().toString();
else 
  sToday += "_"+today.getMonth().toString();

sToday += "_"+today.getYear().toString();

if (CurrentHours<10)
  sToday += "_0"+today.getHours().toString();
else 
  sToday += "_"+today.getHours().toString();

if (CurrentMin<10)  
  sToday += "_0"+today.getMinutes().toString();
else 
  sToday += "_"+today.getMinutes().toString();

if (CurrentSec<10)
sToday += "_0"+today.getSeconds().toString();
else
sToday += "_"+today.getSeconds().toString(); 
```

但是当我在 13.04.2012 20:20:14 （我的电脑时间）运行它时，我会收到 05_03_2012_20_20_14 。如何解决此问题并接收 13_04_2012_20_20_14 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:33:59.513

[`.getDay`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getDay)返回星期几（0 代表星期日，1 代表星期一，...）。你想[`.getDate`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getDate)改用。

```
function tw(n){
    return (n < 10 ? '0' : '') +  n.toString();
}

var today = new Date();
var sToday = (tw(today.getDate()) + '_' + tw(today.getMonth()+1) + '_' +
             today.getYear().toString() +  '_' + tw(today.getHours()) +
             '_' + tw(today.getMinutes()) + '_' + tw(today.getSeconds())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:35:43.690

`getDate`返回日期 1-31。`getDay`返回 0-6 周中的哪一天，其中 0 是星期日。 `getMonth`返回月份 0-11，因此您需要在该值上加 1。

您现在不是打印日期、月份，而是打印日期、月份 - 1。

将您的代码更改为：

```
if (CurrentDay < 10)
   sToday = "0"+today.getDate().toString();
else 
   sToday = today.getDate().toString();

if(CurrentMonth<10)
  sToday += "_0"+ (today.getMonth() + 1).toString();
else 
  sToday += "_"+(today.getMonth() + 1).toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T16:36:42.127

使用 .getDate 表示日期并将月份加 1（月份从零开始，因此一月为 0，二月为 1，依此类推...）

# php - CakePHP 2.0，提交表单重定向未正确呈现

> ID：10144701
> 
> 赞同：0
> 
> 时间：2012-04-13T16:28:23.517
> 
> 标签：php, mysql, cakephp-2.0

嗨，我已经创建了一个文件上传表单，除了当我按下提交它不会将我重定向到 Uploads/add.ctp 之外，它都可以正常工作，但它确实将文件保存到目录和数据库中。事实上，如果我将重定向指向上传/浏览，它仍然不会带我去上传/浏览。

这是我的控制器

```
public function add() {

if(!empty($this->data)){

    $file = $this->request->data['Upload']['file'];
if ($file['error'] === UPLOAD_ERR_OK && $this->Upload->save($this->data)){
    $this->Upload->save($this->data);
    if(move_uploaded_file($file['tmp_name'],APP.'webroot/files/uploads'.DS.$this->Upload->id.'.mp4')) {
    $this->Session->setFlash(__('<p class="uploadflash">The upload has been saved</p>', true));
    $this->redirect(array('controller'=>'Uploads','action' => 'add'));
    } else{

    $this->Session->setFlash(__('<p class="uploadflash">The upload could not be saved. Please, try again.</p>', true));

    }
} 

}
} 
```

这是我的表格

```
 <div class="maincontent">
      <?php echo $this->Form->create('Upload', array('type' => 'file', 'class'=>'uploadfrm'));?>
<fieldset class='registerf'>
    <legend class='registerf2'>Upload a Video</legend>
<?php
    echo 'Upload your video content here, there is no size limit however it is       <b>.mp4</b> file format only.';
    echo '<br/>';
    echo '<br/>';
    echo $this->Form->input('name', array('between'=>'<br />', 'class'=>'input'));
    echo $this->Form->input('eventname', array('between'=>'<br />'));
    echo $this->Form->input('description', array('between'=>'<br />', 'rows'=> '7', 'cols'=> '60'));
    echo  $this->Form->hidden('userid', array('id' => 'user_id','value' => $auth['id']));
    echo $this->Form->hidden('username', array('id' => 'username', 'value' => $auth['username']));
    echo $this->Form->input('file', array('type' => 'file'));
    echo "<br/>"
?>
<?php echo $this->Form->end(__('Submit', true));?>
</fieldset> 
```

```
 <?php

   class UploadsController extends AppController {
   public $name = 'Uploads';

      public $helpers = array('Js');

// Users memeber area, is User logged in…
 public $components = array(
    'Session',
    'RequestHandler',
    'Auth'=>array(
        'loginRedirect'=>array('controller'=>'uploads', 'action'=>'browse'),
        'logoutRedirect'=>array('controller'=>'users', 'action'=>'login'),
        'authError'=>"Members Area Only, Please Login…",
        'authorize'=>array('Controller')
    )
  );

       public function isAuthorized($user) {
            // regular user can access the file uploads area
        if (isset($user['role']) && $user['role'] === 'regular') {
            return true;
             }

             // Default deny
                return false;
            }

function index() {
        $this->set('users', $this->Upload->find('all'));

}

// Handling File Upload Function and updating uploads database

    public function add() {

        if(!empty($this->data)){

            $file = $this->request->data['Upload']['file'];
            if ($file['error'] === UPLOAD_ERR_OK){
            $this->Upload->save($this->data); 
                if(move_uploaded_file($file['tmp_name'],APP.'webroot/files/uploads'.DS.$this->Upload->id.'.mp4')) 
                {
                    $this->redirect(array('controller' => 'Uploads', 'action' => 'add'));
                    $this->Session->setFlash(__('<p class="uploadflash">The upload has been saved</p>', true));

                    }   }else {

                        $this->Session->setFlash(__('<p class="uploadflash">The upload could not be saved. Please, try again.</p>', true));

                            }

                }
                }   

function browse () {
        // Find all in uploads database and paginates
$this->paginate = array(
    'limit' => 5    ,
    'order' => array(
        'name' => 'asc'
    )
    );
    $data = $this->paginate('Upload');
    $this->set(compact('data'));

     }

function recentuploads () {
$uploads =  $this->Upload->find('all', 
    array('limit' =>7,
    'order' => 
        array('Upload.date_uploaded' => 'desc')));
    if(isset($this->params['requested'])) { 
         return $uploads; 
         } 
            $this->set('uploads', $uploads); 
}

function watch ($id = null){
$this->set('isAjax', $this->RequestHandler->isAjax());

    // Read Uploads Table to watch video
    $this->Upload->id = $id;      
    $this->set('uploads', $this->Upload->read());

    // Load Posts Model for comments related to video
            $this->loadModel('Post');
    $this->paginate = array(
                'conditions' => array(
                'uploadid' => $id),
                'limit' => 4
                );

    $data = $this->paginate('Post');
    $this->set(compact('data'));

// Load Likes Model and retrive number of likes and dislikes

    $this->loadModel('Like');

    $related_likes = $this->Like->find('count', array(
        'conditions' => array('uploadid' => $id)
    ));
    $this->set('likes', $related_likes);
    }

}
    ?> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:20:43.423

此`add`功能在您的 UploadsController 中，对吗？并且您希望它重定向到上传/浏览？

在您的 UploadsController 中，`$name`设置为什么？

```
<?php
class UploadsController extends AppController {
   public $name = ?; // What is this variable set to?
} 
```

通过 Cake 的 Inflector，当你在重定向中指定控制器时，它应该是小写的：

```
$this->redirect(array('controller' => 'uploads', 'action' => 'browse')); 
```

或者，如果您引导的动作和要引导的动作在同一个控制器中，您甚至不需要指定控制器。例如，如果您从 UploadsController 提交表单`add()`并希望重定向到`browse()`：

```
$this->redirect(array('action' => 'browse')); 
```

试试看是否有帮助。

另请注意，您在`add`函数中调用了 $this->Upload->save($this->data) 两次。

```
public function add() {

    if(!empty($this->data)){
        $file = $this->request->data['Upload']['file'];
        if ($file['error'] === UPLOAD_ERR_OK && $this->Upload->save($this->data)) {
            $this->Upload->save($this->data);
            if(move_uploaded_file($file['tmp_name'],APP.'webroot/files/uploads'.DS.$this->Upload->id.'.mp4')) {
                $this->Session->setFlash(__('<p class="uploadflash">The upload has been saved</p>', true));
                $this->redirect(array('controller'=>'Uploads','action' => 'add'));
            } else {
                $this->Session->setFlash(__('<p class="uploadflash">The upload could not be saved. Please, try again.</p>', true));
            }
        }
    } 

} 
```

具体来说，这里：

```
if ($file['error'] === UPLOAD_ERR_OK && $this->Upload->save($this->data)) {
    $this->Upload->save($this->data);
    ... 
```

当您在`if`条件中调用它时，它仍然将数据保存到数据库中。去掉第二个就好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:40:09.743

如果我在函数中添加以下行添加

```
 $this->render(); 
```

一切都很完美，我一直在为自己的生活而奋斗，以弄清楚为什么我必须渲染视图，如果所有其他视图都默认渲染的话。但无论如何让它工作！希望这对其他人有帮助:)

# php - 获取页面父目录的 PHP 正则表达式是什么？

> ID：10144705
> 
> 赞同：0
> 
> 时间：2012-04-13T16:28:36.497
> 
> 标签：php, regex

我有一个页面：

`http://somewebsite.com/1234/test/`

如何`1234`使用 PHP 正则表达式从中提取？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T16:30:14.277

不要使用 RegEx 使用**[`parse_url()`](http://il.php.net/manual/en/function.parse-url.php)**and **[`explode()`](http://il.php.net/manual/en/function.explode.php)**。

* * *

对于一个级别，使用**[`dirname()`](http://il.php.net/manual/en/function.dirname.php)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T16:34:02.337

如果我不需要它，我喜欢避免使用正则表达式，所以我建议你这样做：

```
$url = explode("/", $_SERVER['PHP_SELF']); 
```

然后您可以使用以下方法引用您想要的 url 部分：

```
$url[1] 
```

如果您需要/想要使用正则表达式，我会考虑一下，稍后再尝试发布解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T16:32:30.470

要获得上面的一个，您可以使用

```
echo dirname("http://www.google.com/cake/lol"); 
```

输出

> [http://www.google.com/cake](http://www.google.com/cake)

或者只是/和/之间的那一点你可以做

```
var_dump(explode("/", "http://www.google.com/cake/lol")); 
```

或者在正则表达式中

```
preg_match_all('@/([^/]*)/@',$sourcestring,$matches); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T16:31:58.397

对它执行正则表达式`$_SCRIPT['REQUEST_URL']`或将其拆分为 '/' 并获取第一个元素 => 1234

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T16:36:21.090

如果 PHP 是通过启动该 URL 触发的，那么这些可能是真的：

```
$_SERVER['REQUEST_URI'] == "/1234/test/"

dirname($_SERVER['REQUEST_URI']) == "/1234"

basename(dirname($_SERVER['REQUEST_URI'])) == "1234" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T16:43:56.697

```
preg_match(".*\/(\w+)\/(\w+)\/", "$url", $matches); 
```

父目录是`$matches[1]`.

# ruby-on-rails - 在 Rails 3 中从未通过 mixin 调用 after_initialize

> ID：10144713
> 
> 赞同：1
> 
> 时间：2012-04-13T16:29:08.260
> 
> 标签：ruby-on-rails, ruby, activerecord, mixins

我正在使用 mixin 为我的模型（Person）添加一些功能。在 mixin 中，我需要进行一些初始化，因此我尝试使用“after_initialize”回调宏来调用初始化方法。模型（Person）只是其他一些模型的基类。

我遇到的问题是它永远不会被调用。我试图调试它，但断点从未被击中。日志记录也没有给我任何输出。

我找不到任何帮助（因为根据 Api 文档和这里的一些帖子，这个结构应该在 Rails 3 中工作）。

*/lib/mymodule.rb*

```
module MyModule
    after_initialize :generate_ids

    def generate_ids
      logger.info "invoked" #never hit
    end
end 
```

*/models/person.rb*

```
require "mymodule"

class Person < ActiveRecord::Base
    include MyModule
end 
```

*/models/customer.rb*

```
class Customer < Person
  # nothing so far
end 
```

*/controllers/customers_controller.rb (action => new)*

```
# GET /customers/new
# GET /customers/new.json
def new
  @person = Customer.new

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @customer }
  end
end 
```

请放纵我，因为我是 RoR 的“新手”。

非常感谢你 ！

最好的问候，托马斯

**更新**

重新启动本地应用服务器后，它给了我以下异常：

> ActionController::RoutingError（SequentialRecord:Module 的未定义方法 `after_initialize'）：

我假设这个回调不能在 mixins 中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:46:14.967

尝试类似的东西（未测试）。

```
module MyModule
  def self.included(base)
    base.after_initialize :generate_ids
  end

  def generate_ids
    logger.info "invoked" #never hit
  end
end 
```

# hibernate - 休眠多对多配置

> ID：10144716
> 
> 赞同：4
> 
> 时间：2012-04-13T16:29:14.270
> 
> 标签：hibernate, many-to-many

我在下面列出了一些复杂的结构。基本上我有一堆不同的“角色组”。每个角色组包含一组角色。一个用户可能有几个不同的角色组，并且一个角色组可以应用于许多不同的用户。因此，我选择了多对多关系。

我希望 RoleGroup 成为用户的一部分，如下所示。

一切都在起作用。但是，当我使用下面列出的插入语句时，我的代码中有一个错误。RoleGroup 仅包含 ROLE3。我不知道为什么，但不知何故，我的代码只允许一个角色成为当前设置的角色组的一部分。查询数据库产生所有 3 个角色都存在，但它们不在我的实体上。

请帮忙！

```
CREATE TABLE USER (
    USER_ID   NUMBER(38, 0) PRIMARY KEY,
    NAME      VARCHAR2(50) NOT NULL
);

CREATE TABLE ROLE_GROUPS (
    ROLE_GROUP_ID   NUMBER(38, 0) PRIMARY KEY,
    NAME            VARCHAR2(50) NOT NULL
    -- constraints
    CONSTRAINT UQ_ROLE_GROUP_NAME UNIQUE (NAME)
);

CREATE TABLE ROLE (
    ROLE_GROUP_ID   NUMBER(38, 0) NOT NULL,
    ROLE            VARCHAR2(10) NOT NULL,
    -- constraints
    CONSTRAINT PK_ROLES PRIMARY KEY (ROLE_GROUP_ID, ROLE),
    CONSTRAINT FK_ROLES FOREIGN KEY(ROLE_GROUP_ID) REFERENCES ROLE_GROUPS
);

CREATE TABLE ROLE_GROUP_X_USER (
    ROLE_GROUP_ID   NUMBER(38, 0) NOT NULL,
    USER_ID         NUMBER(38, 0) NOT NULL,

    -- constraints
    CONSTRAINT PK_1 PRIMARY KEY (ROLE_GROUP_ID, USER_ID),
    CONSTRAINT FK_1 FOREIGN KEY(ROLE_GROUP_ID) REFERENCES ROLE_GROUPS,
    CONSTRAINT FK_1 FOREIGN KEY(USER_ID) REFERENCES USER
);

INSERT INTO ROLE_GROUPS(ROLE_GROUP_ID, NAME) VALUES (1, 'GROUP_1');
INSERT INTO ROLE(ROLE_GROUP_ID, NAME) VALUES(1 ,'ROLE1');    
INSERT INTO ROLE(ROLE_GROUP_ID, NAME) VALUES(1 ,'ROLE2');    
INSERT INTO ROLE(ROLE_GROUP_ID, NAME) VALUES(1 ,'ROLE3');    
INSERT INTO ROLE_GROUP_X_USER(USER_ID,ROLE_GROUP_ID) SELECT USER_ID, 1 FROM USER where USER_ID IN ('1', '2', '3', '4');

@Entity
@Table(name="USER")
public class User {
   //Other code

   @ManyToMany(cascade = CascadeType.ALL, fetch=FetchType.EAGER)
   @JoinTable(name = "ROLE_GROUP_X_USER", 
   joinColumns = { @JoinColumn(name = "USER_ID") }, 
   inverseJoinColumns = { @JoinColumn(name = "ROLE_GROUP_ID") })
   private Set<RoleGroupEntity> roleGroupEntities;
}

@Entity
@Table(name="ROLE_GROUPS")
public class RoleGroupEntity {
   //Other code

   @ElementCollection(fetch=FetchType.EAGER)
   @CollectionTable(name="ROLE", joinColumns=@JoinColumn(name="ROLE_GROUP_ID"))
   @AttributeOverrides({
   @AttributeOverride(name="role", column=@Column(name="ROLE")) })
   private Set<Role> roles = new HashSet<Role>();
}

@Embeddable
public class Role {
    private String role;
    //Getter, Setter
    //Hashcode, equals override
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:02:44.000

看起来您的 joinColumn 是错误的。通常你在多对多连接上有两列，joinColumns 和 inverseJoinColumns，但我不得不说你使用了错误的列。

我认为您将需要一个单独的映射表来将角色包含在组中。将此添加到您的 RolesGroup 类：

```
@ManyToMany(fetch = FetchType.EAGER)
@JoinTable(name = "GROUP_ROLE_MAP_T", joinColumns = {
        @JoinColumn(name = "ROLE_GROUP_ID")
}, inverseJoinColumns = {
        @JoinColumn(name = "ROLE_ID")
})
private Set<Role> role = new HashSet<Role>(0); 
```

让你的角色也成为一张桌子：

```
@Entity
@Table(name = "ROLES_T")
@AttributeOverride(name = "id", column = @Column(name = "ROLE_ID"))
public class Role {
    @Column(name = "ROLE_ID", nullable = true)
    private Long roleId = new Long(0);

    @Column(name = "ROLE_NAME", nullable = false)
    private String role;
} 
```

不要忘记你的 getter/setter。

# html - Aptana Studio 和通过 html 节点切换

> ID：10144729
> 
> 赞同：0
> 
> 时间：2012-04-13T16:30:09.333
> 
> 标签：html, eclipse, ide, aptana, aptana3

我喜欢我可以在 Aptana 中通过 {}、[]、() 等进行制表符，但是当我编辑 HTML 并且我当前正在编辑的现有节点以相同的浅灰色边框突出显示时，我不可避免地会尝试跨步当我通过点击标签完成并重新发现它不起作用时，通过它。

![每次都让我](../Images/c1229864d8b81191e086cc7eaf7d5c1e.png)

我错过了一个非常明显的键盘快捷键吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:38:51.950

Shift+Enter 将跳转到下一行（同时还在当前行之后添加新行），但我认为没有捷径可以正常循环过去。

# git - 我如何让詹金斯跳过失败的分支直到他们改变？

> ID：10144733
> 
> 赞同：6
> 
> 时间：2012-04-13T15:39:35.653
> 
> 标签：git, continuous-integration, hudson, jenkins

我将 Jenkins 与 Multiple SCMs + Git 插件一起使用。Jenkins 正确地为每个分支进行了新的构建，但由于某种原因，当构建失败时，它只是不断尝试重做构建，即使分支没有更改。我该如何修复它，以便 Jenkins 继续前进到下一个分支，并且只有在当前分支发生变化时才尝试重建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:21:51.390

当我安装了 Delete Workspace 插件并且在作业配置中选中了“构建完成后删除工作区”复选框时，我的 Jenkins 作业出现了类似的行为。git 插件显然需要有一个工作区来存储有关它已经看到并尝试构建的分支的信息。如果构建后操作擦除了工作区，则 git 插件将失去其状态。

# ruby - 将 HTML 转换为纯文本（包含 s）

> ID：10144739
> 
> 赞同：10
> 
> 时间：2012-04-13T16:30:54.193
> 
> 标签：ruby, nokogiri

是否可以将带有 Nokogiri 的 HTML 转换为纯文本？我也想包含`<br />`标签。

例如，给定这个 HTML：

```
<p>ala ma kota</p> <br /> <span>i kot to idiota </span> 
```

我想要这个输出：

```
ala ma kota
i kot to idiota 
```

当我称之为`Nokogiri::HTML(my_html).text`排除`<br />`标签时：

```
ala ma kota i kot to idiota 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-16T12:48:52.840

我没有编写复杂的正则表达式，而是使用了 Nokogiri。

工作解决方案（亲吻！）：

```
def strip_html(str)
  document = Nokogiri::HTML.parse(str)
  document.css("br").each { |node| node.replace("\n") }
  document.text
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-13T17:08:03.767

默认情况下不存在这样的东西，但是您可以轻松地将接近所需输出的东西组合在一起：

```
require 'nokogiri'
def render_to_ascii(node)
  blocks = %w[p div address]                      # els to put newlines after
  swaps  = { "br"=>"\n", "hr"=>"\n#{'-'*70}\n" }  # content to swap out
  dup = node.dup                                  # don't munge the original

  # Get rid of superfluous whitespace in the source
  dup.xpath('.//text()').each{ |t| t.content=t.text.gsub(/\s+/,' ') }

  # Swap out the swaps
  dup.css(swaps.keys.join(',')).each{ |n| n.replace( swaps[n.name] ) }

  # Slap a couple newlines after each block level element
  dup.css(blocks.join(',')).each{ |n| n.after("\n\n") }

  # Return the modified text content
  dup.text
end

frag = Nokogiri::HTML.fragment "<p>It is the end of the world
  as         we
  know it<br>and <i>I</i> <strong>feel</strong>
  <a href='blah'>fine</a>.</p><div>Capische<hr>Buddy?</div>"

puts render_to_ascii(frag)
#=> It is the end of the world as we know it
#=> and I feel fine.
#=> 
#=> Capische
#=> ----------------------------------------------------------------------
#=> Buddy? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:32:06.317

尝试

```
Nokogiri::HTML(my_html.gsub('<br />',"\n")).text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T17:57:04.657

Nokogiri 将删除链接，所以我首先使用它来保留文本版本中的链接：

```
html_version.gsub!(/<a href.*(http:[^"']+).*>(.*)<\/a>/i) { "#{$2}\n#{$1}" } 
```

这将变成这样：

```
<a href = "http://google.com">link to google</a> 
```

对此：

```
link to google
http://google.com 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-06T07:23:05.977

如果您使用 HAML，您可以通过将 html 与 'raw' 选项放在一起来解决 html 转换问题，fe

```
 = raw @product.short_description 
```

# ios - 使用 NSRegularExpression 匹配或 ( | ) 的所有可能部分

> ID：10144742
> 
> 赞同：0
> 
> 时间：2012-04-13T16:31:13.477
> 
> 标签：ios, regex, nsregularexpression

我有一个看起来像这样的正则表达式：

```
(\bee[0-9]{9}in\b)|(\bee[0-9]{9}[a-zA-Z]{2}\b) 
```

现在如果输入字符串是匹配字符串`ee123456789ab`的第二部分。`|`但是，如果输入字符串的`ee123456789in`第一部分`|`消耗整个字符串，而第二部分没有更改以匹配字符串？我希望这两个部分`|`都进行更改以匹配字符串，以便我知道这两个部分都能够匹配字符串。甚至可以使用正则表达式来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:53:27.930

使用正则表达式是不可能的。如果其中任何部分匹配，则视为匹配。你必须用两个不同的表达式来做，看看是否都成功了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:05:31.960

您可以使用[前瞻断言](http://www.regular-expressions.info/lookaround.html)：

```
^(?=(ee[0-9]{9}in$)?)(?=(ee[0-9]{9}[a-zA-Z]{2}$)?) 
```

`\1`这将在和中捕获匹配项`\2`；如果两者中的任何一个为空，则正则表达式的相应部分不匹配。

我已将单词边界锚点更改为字符串锚点的开始/结束，因为您正在测试整个字符串，而不仅仅是子字符串。

在 Python 中：

```
>>> import re
>>> r = re.compile(r"^(?=(ee[0-9]{9}in$)?)(?=(ee[0-9]{9}[a-zA-Z]{2}$)?)")
>>> m = r.match("ee123456789ab")
>>> m.group(1)
>>> m.group(2)
'ee123456789ab'
>>> m = r.match("ee123456789in")
>>> m.group(1)
'ee123456789in'
>>> m.group(2)
'ee123456789in' 
```

**解释：**

```
^               # Start of string
(?=             # Look ahead to see if it's possible to match...
 (              # and capture...
  ee[0-9]{9}in  # regex 1
  $             # (end of string)
 )?             # (make the match optional)
)               # End of lookahead
(?=             # Second lookahead, same idea...
 (
  ee[0-9]{9}[a-zA-Z]{2}
  $
 )?
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T19:45:45.700

OR 是一个或无论如何，都无法解决这个问题。
正如@Tim 提到的，它可以通过前瞻来完成：

你可以站着不动，不止一次地看同一个文本。

因此，一种方法是不动地查看每个表达式，
每个表达式都是可选的。-

```
(?= ( ee [0-9]{9} in )? )
(?= ( ee [0-9]{9} [a-zA-Z]{3} )? ) 
```

这很糟糕，因为虽然位置会在最后一个
表达式之后前进，但它只会前进 1 个字符间位置。在全局上下文中搜索时，它还
允许重叠。

可以通过消耗一个字符来加快搜索速度 -

```
(?= ( ee [0-9]{9} in )? )
(?= ( ee [0-9]{9} [a-zA-Z]{3} )? )
. 
```

当某些东西被消耗时，引擎会进行优化，
以块的形式前进（不知道它是如何决定的）。

如果这些表达式中包含其他表达式，则需要将
位置提前到此处，否则将不匹配。这也可以消除
文本的重叠匹配（如果这是一个目标）。

实际上很难避免重叠，除非您确定一个表达式会
比另一个长。如果是这样的话，那么你总是可以做一个有条件的
（如果有的话）来使用更大的文本 -

```
(?= ( ee [0-9]{9} in )? )
(?= ( ee [0-9]{9} [a-zA-Z]{3} )? )
(?(2) \2 | \1 ) 
```

而且，如果你知道一个是另一个的子集，你可以这样做 -

```
(?= ( ee [0-9]{9} in )? ) ( ee [0-9]{9} [a-zA-Z]{3} ) 
```

无论哪种方式，根据表达式的不同，在将
消费设计到正则表达式中时必须考虑很多以避免重叠。

# ios - 模拟器 iOS 4.2

> ID：10144746
> 
> 赞同：2
> 
> 时间：2012-04-13T16:31:22.757
> 
> 标签：ios, ios-simulator

是否可以使用旧的模拟器 4.2 或 4.0 测试应用程序？

我从 Xcode 下载了模拟器 4.3 和“设备调试支持 iOS 4.9-4.1”，单击“更多模拟器”，但这仅允许我在没有安装 4.0 或 4.1 的真实设备上进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:02:08.257

不再支持旧版本的模拟器。Apple 的立场似乎是，如果您想支持 iOS <4.3，那么您需要在设备上进行测试，或者在旧版本的 OS X 上运行旧版本的 XCode。

# sql-server - Hibernate createSQLQuery 给我 I/O 错误：软件导致 SqlServer 2008 RS1 上的连接中止

> ID：10144766
> 
> 赞同：1
> 
> 时间：2012-04-13T16:32:50.497
> 
> 标签：sql-server, spring, hibernate

我使用 SqlServer FREETEXTTABLE 在视图上搜索一些产品，传递 3 个参数，要搜索的字符串，要返回的第一行和要返回的最后一行（通常的分页）。

代码如下：

```
public List searchProducto(final String claves,final  Integer pagina, final Integer nroFilas) {

    return getHibernateTemplate().executeFind(new HibernateCallback() {
        public Object doInHibernate(Session session) throws HibernateException, SQLException {
           String sql = "SELECT * FROM (SELECT ROW_NUMBER() OVER(ORDER BY RANK DESC) AS RowNr, * FROM vista_web_productos AS vwp INNER JOIN FREETEXTTABLE( producto,clave,:name) as ftt ON ftt.[KEY]=vwp.id_web) t WHERE RowNr BETWEEN :inicio AND :fin";                
            SQLQuery query = (SQLQuery) session.createSQLQuery(sql);
            query.addEntity(VistaWebProductoVO.class).setString("name",claves).setInteger("inicio", ((pagina - 1) * nroFilas)+1 ).setInteger("fin", ((pagina) * nroFilas)  );

            List list = query.list();
            return list;
        }
    });
} 
```

当我测试代码时，有时它可以工作（通常第一次工作正常并且它们），有时它不工作。特别是如果我调试我的测试并且我没有立即按下继续按钮（f5）它只是不起作用。关于问题原因的任何想法？我也在使用 Spring 3。

# asp.net - 使用 Date 与 DateTime 时是否需要考虑性能或存储差异？

> ID：10144767
> 
> 赞同：3
> 
> 时间：2012-04-13T16:32:57.983
> 
> 标签：asp.net, sql-server, performance

使用 SQL Server 和 ASP.NET 时，使用`Date`vs时是否需要考虑性能/存储`DateTime`？

即使我不需要它，我也一直在使用`DateTime`它

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T16:38:22.630

DateTime 每个值占用 8 个字节

日期为 3 个字节。

我不能说低水平的表现；但是一般来说，我们发现默认情况下将值存储为 DateTime 是错误的。迟早您会遇到 UTC 问题，并且必须开始计算时间部分中包含 00:00:00.000 的日期的偏移量！

如果您只是存储日期，我会坚持使用 Date 数据类型；您将在每页中放置更多行，并为自己省去很多麻烦

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:38:53.637

取决于您存储的行数以及您使用它的目的。日期为 3 个字节，日期时间为 8 个字节。当您拥有数十亿行数据或将其用于索引时，可以快速累加。当然，存储值的分辨率也存在差异。在 date 和 datetime 之间还有其他日期类型，例如 smalldatetime，它们更紧凑，但也有不同的折衷。

[SQL 日期/时间类型文档](http://technet.microsoft.com/en-us/library/ff848733%28v=sql.105%29.aspx "SQL 日期/时间类型文档")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T21:47:56.140

注意事项：

*   性能：日期类型的位数越少**意味着**每个 sql 页（数据页或索引页）的行数越多**，**执行查询时要读取的页数就越少
*   兼容性：`DATE`类型是在 SQL Server 2008 中引入的，因此您的应用程序不再与 SQL Server 2005 兼容
*   .NET：.NET 中没有`Date`类 -`DATE`转换为`DateTime`.NET 类
*   LINQ：LINQ2SQL（和 SQL Metal 工具）非常适合`DATE`SQL 类型
*   `DATETIME`你可能会从做事中减少几小时和几分钟`CAST(@myDateTimeParam AS DATE)`

根据我的经验：我喜欢这种新类型，并且在编写 T-SQL 或 C# 时没有遇到任何问题

请注意这一点（为比较日期混合数据类型）：

```
DECLARE @startDay DATE = '2012-04-11' -- day
DECLARE @endDay DATE = '2012-04-13' -- day
DECLARE @eventTime DATETIME = '2012-04-13 12:00' -- point in time (noon)

IF @eventTime BETWEEN @startDay AND @endDay PRINT 'In period.' ELSE PRINT 'Not in period!' 
```

结果是：

```
Not in period! 
```

我猜在`BETWEEN`比较`@endDay`中被归结为`DATETIME`（到时间点；与 的常见类型`@eventTime`） - 是什么给出了不直观的结果。

与之比较：

```
DECLARE @startDay DATE = '2012-04-11' -- day
DECLARE @endDay DATE = '2012-04-13' -- day
DECLARE @eventTime DATE = '2012-04-13' -- day

IF @eventTime BETWEEN @startDay AND @endDay PRINT 'In period.' ELSE PRINT 'Not in period!' 
```

结果：

```
In period. 
```

有了它：

```
DECLARE @startDay DATETIME = '2012-04-11' -- day, but point in time in fact 00:00.000
DECLARE @endDay DATETIME = '2012-04-13' -- day, but point in time in fact 00:00.000
DECLARE @eventTime DATETIME = '2012-04-13' -- day, but point in time in fact 00:00.000

IF @eventTime BETWEEN @startDay AND @endDay PRINT 'In period.' ELSE PRINT 'Not in period!' 
```

结果：

```
In period. 
```

# cakephp - 我们需要在 CakePHP 上测试私有函数吗？

> ID：10144771
> 
> 赞同：1
> 
> 时间：2012-04-13T16:33:13.857
> 
> 标签：cakephp, testing, code-coverage, cakephp-2.0, xdebug

我认为永远不应该测试私有函数，而应该只测试公共接口。

但是随后，使用 XDebug 查看我的函数的覆盖率，我发现它减少了，因为它考虑了私有函数。

你怎么看待这件事？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T19:57:51.090

我相信你应该测试你所有的方法，包括私有的和受保护的。尽管它们对其他类可见，但它们内部有需要测试的逻辑。为了测试受保护的方法，您通常需要创建一个使方法公开的代理类。

```
class MyClass {

   protected function protected_method() {
     // do stuff
   }

} 
```

在测试用例中，您将创建另一个类并将其受保护的方法公开，就像这样

```
class TestMyClass extends MyClass {

   public function protected_method() {
     return parent::protected_method();
   }

} 
```

现在您可以在测试用例`TestMyClass::protected_method()`中进行测试。

这不是唯一的方法。PHPUnit 的创建者 Sebastian Bergmann 在这里写了一篇关于它的博客文章：http: [//sebastian-bergmann.de/archives/881-Testing-Your-Privates.html](http://sebastian-bergmann.de/archives/881-Testing-Your-Privates.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-09T04:13:14.440

您应该确保您的私有/受保护方法作为测试的一部分运行，但不要直接测试它们。如果存在私有方法，则必须在某处由公共方法调用。因此，以依次调用私有方法的方式调用该公共方法。

测试的一个很酷的事情是能够对您的代码进行大量重构，而无需更改测试。你的测试就像一个锚，告诉你什么时候一切都恢复正常了。如果您测试您的私有方法，那么您的测试最终会与您的代码紧密耦合，并且这样的大型重构会很痛苦，因为您必须同时更改测试和代码。

# amazon-ec2 - Amazon EC2 的目的

> ID：10144776
> 
> 赞同：0
> 
> 时间：2012-04-13T16:33:28.000
> 
> 标签：amazon-ec2, amazon-web-services

我不太“了解”亚马逊的 EC2。我首先启动一个新的 EC2 实例。然后我通过远程桌面或 ssh 访问它。然后我根据自己的需要对其进行定制，例如在其上设置 Web 服务器，并在其上设置 Web 服务以供某人使用。无论我想要什么。

但我没有得到的是：现在我关闭了这个实例以避免被 24/7 计费——这应该是 EC2 的好处之一。然后怎样呢？我的数据没了？下次我启动一个实例时，我必须重新进行自定义（设置 Web 服务器等），对吗？那么这一切的意义何在？

我只是不“得到” EC2 以及它的实际目的是什么。每次需要时都要设置整个东西听起来很麻烦。在某些方面，它看起来像其他公司所说的“虚拟”或“专用”服务器，除了 EC2 只是临时的。有人可以澄清 EC2 的目的并提供一些真实的用例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:38:50.657

您可以将实例创建为[EBS 支持的](https://stackoverflow.com/questions/3630506/benefits-of-ebs-vs-instance-store-and-vice-versa/3630707#3630707)实例。然后，如果您关闭它，您只会产生非常小的成本（对于 EBS 存储）。您可以非常快速地从 EBS 存储重新启动您的服务器。

如果您购买物理服务器，则您需要 24/7 全天候支付，也就是说您会随着时间的推移分摊购买成本，并且可能会支付某人（或使用您自己的时间）来维护服务器。共享或专用主机也是如此。使用云解决方案，您可以（在一定范围内）仅在需要时为所需资源付费。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T16:41:28.023

通常，您会将 EC2 用于需要不同容量的站点，例如，在活动发布时负载较高而其他情况下负载较低的票务网站。由于您只在真正需要时才为容量付费，因此对于该用例来说这是一个非常好的价值。

当你有这样的负载时，你真的想为你的设置编写脚本，这样你就可以在需要时启动数百个 Web 服务器并让它们在第一次启动时自行安装，而不是安装数百台机器并保持状态/保持它们不断更新.

如果您真的想将它用作常规托管服务提供商并拥有一个在重新启动之间保存您的状态的磁盘，您可以使用[可启动的 EBS](http://aws.amazon.com/about-aws/whats-new/2009/12/03/amazon-ec2-instances-now-can-boot-from-amazon-ebs/)磁盘并在那里保存您的状态。但是，如果您有这种稳定的负载，您可能会发现使用常规托管服务提供商更便宜。

# php - 如何使用 flush() 在 MAMP 上回显进度

> ID：10144780
> 
> 赞同：0
> 
> 时间：2012-04-13T16:33:50.173
> 
> 标签：php, echo, mamp, progress, flush

我正在尝试在 MAMP 上运行一个简单的 PHP 脚本。我正在使用 PHP 5.2.17 并且我关闭了压缩。我试图执行这个简单的脚本

```
<?php
    ob_flush();
    foreach(range(1,9) as $n){
    echo $n."\n";
    flush();
    sleep(1);
} 
```

出于某种原因，这没有做它应该做的事情。它不是按顺序回显数字，而是在循环完成时简单地回显它们。我错过了什么吗？还有另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:56:45.487

> 输出缓冲是一种机制，用于控制 PHP 在将数据推送到客户端之前应在内部保留多少输出数据（不包括标头和 cookie）。如果您的应用程序的输出超出此设置，PHP 将发送该数据大致为您指定大小的块。启用此设置并管理其最大缓冲区大小可能会产生一些有趣的副作用，具体取决于您的应用程序和 Web 服务器。在您已经通过打印或回显发送输出后，您可能能够发送标头和 cookie。如果您的服务器由于缓冲输出而发出的数据包较少，而 PHP 在获得输出时对输出进行流式传输，您也可能会看到性能优势。在生产服务器上，出于性能原因，4096 字节是一个很好的设置。

**注意：输出缓冲也可以通过输出缓冲控制功能来控制。**

**php.ini 可能的值：**

```
On = Enabled and buffer is unlimited. (Use with caution) 
Off = Disabled    
Integer = Enables the buffer and sets its maximum size in bytes.  
eg: output_buffering = Off 
```

**注意：对于 CLI SAPI，此指令硬编码为 Off**

[http://php.net/output-buffering](http://php.net/output-buffering)

一个工作示例，如果 output_buffering 设置为 4096

```
<?php
ob_start();
// Output string to overflow browser php.ini output_buffering setting.
echo str_repeat(PHP_EOL, 4097);

for ($i=0; $i<5; $i++) {
  echo PHP_EOL.$i;
  ob_flush();
  flush();
  sleep(1);
}
ob_end_flush();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:37:25.647

确实是缓冲区大小

[PHP 缓冲区为什么 \r\n](https://stackoverflow.com/questions/4191349/php-buffer-why-r-n)

这个例子对我有用

# xml - 使用 xml 中的两 (2) 个表无法验证 XML - 两个 XML 合二为一？

> ID：10144784
> 
> 赞同：0
> 
> 时间：2012-04-13T16:34:04.717
> 
> 标签：xml, validation, dtd

给定下一个 XML 代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hotels SYSTEM "travel.dtd">
<hotels>
    <general>
        <city>MoscowCity</city>
        <address>Sherman23</address>
        <phone>423423432423</phone>
        <hotelDetails>
            <hotel_code>1</hotel_code>
            <hotel_rank>3</hotel_rank>
            <hotel_name>Jacky</hotel_name>
        </hotelDetails>
    </general>
</hotels>

<!DOCTYPE guests SYSTEM "travel.dtd">   // HERE Validation problem 
<guests>
    <guest>
            <id>00000001-0</id>
            <guestDetails>
                <name>Jones</name>
                <city>SomewhereOnlyWeKnow</city>
                <address>NiceStreet</address>
                <state>NiceState</state>
            </guestDetails>
    </guest>
</guests> 
```

及其 DTD 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!ELEMENT hotels (general+)>
<!ELEMENT general (city, address, phone, hotelDetails)>
<!ELEMENT hotelDetails (hotel_code, hotel_rank, hotel_name)>
<!ELEMENT address (#PCDATA)>
<!ELEMENT city (#PCDATA)>
<!ELEMENT hotel_rank (#PCDATA)>
<!ELEMENT phone (#PCDATA)>
<!ELEMENT hotel_code (#PCDATA)>
<!ELEMENT hotel_name (#PCDATA)>
<!ELEMENT guests (guest+)>
<!ELEMENT guest (id, guestDetails)>
<!ELEMENT guestDetails (name, city, address, state)>
<!ELEMENT name (#PCDATA)>
<!ELEMENT state (#PCDATA)> 
```

该文件不会得到验证，并且 XMLspy 输出是：

```
 Character 'D' is grammatically unexpected 
```

知道这意味着什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:40:36.690

我认为您不能在一个 XML 文档中拥有两个根元素。据我所知，这意味着您的 XML 格式不正确，因此在第一个根元素的结束标记之后出现错误消息。

# actionscript-3 - Actionscript 3在目录中搜索文件，返回路径

> ID：10144785
> 
> 赞同：0
> 
> 时间：2012-04-13T16:34:07.343
> 
> 标签：actionscript-3, apache-flex

我对 actionscript 以及如何用它编写一些代码有一个非常基本的了解，但我正在努力解决如何解决这个问题。

我们有一个运行大量 BIRT 报告的应用程序。它们当前存储在报告/文件夹中。最近我们越来越多，我们需要将它们重构为各个部门的子文件夹。

```
Reports/
    Campus 1/
        Budget Office/
             report1.rptdesign
             report2.rptdesign
        Human Resources/
    Campus 2
    Campus 3 
```

如果我知道报告名称并且它位于报告/* 目录中的某个位置，如何获取特定报告的路径名称？

例如，如果用户选择了report2.rptdesign，我怎样才能找回路径“reports/campus1/budget office/”？

一个示例或示例代码的 URL 至少可以让我朝着正确的方向前进，这将是一个巨大的帮助，谢谢！

我确实找到了这个[Flex, AIR: Search for .pdf files in specified folder](https://stackoverflow.com/questions/1384950/flex-air-search-for-pdf-files-in-specified-folder)，但不确定这是否是我需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:16:19.107

> 如果我知道报告名称并且它位于报告/* 目录中的某个位置，如何获取特定报告的路径名称？

很确定你不能在浏览器中这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:10:07.630

与其在 java 中进行递归搜索，不如尝试在 DB 中增加一个字段。这种方法会更好。您将从 flex 调用服务以从服务器获取报告，这将返回一个 Collection 类似于此示例。

```
 <reports>
    <report>
        <fileName> report1.rptdesign</fileName>
        <filePath>Campus 1/Budget Office/report1.rptdesign</filePath>
    </report>
    <report>
        <fileName> report1.rptdesign</fileName>
        <filePath>Campus 1/Human Resources/report1.rptdesign</filePath>
    </report>
    <report>
        <fileName> report1.rptdesign</fileName>
        <filePath>Campus 2/Budget Office/report1.rptdesign</filePath>
    </report>
    <report>
        <fileName> report1.rptdesign</fileName>
        <filePath>Campus 2/Human Resources/report1.rptdesign</filePath>
    </report>
</reports> 
```

这将在用户交互时节省一个调用来终止用户交互。

# android - Android 4.0.3 SDK 管理器

> ID：10144786
> 
> 赞同：0
> 
> 时间：2012-04-13T16:34:13.603
> 
> 标签：android, sdk, windows-vista, eclipse-adt

如何让 SDK 管理器从 Eclipse 内部“以管理员身份运行”以正确安装软件包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:02:31.333

即使您可以这样做，您也无法更新您当前使用的工具或任何库，因此我总是会以管理员或类似特权用户的身份在 Eclipse 之外更新 SDK 和工具。

# java - 是否可以通过某种方式限定最终参数以解决与匿名类成员的命名冲突？

> ID：10144789
> 
> 赞同：9
> 
> 时间：2012-04-13T16:34:25.910
> 
> 标签：java, scope, anonymous-class

“你为什么要这样做，你有什么问题吗？” 尽管如此，有没有办法在不更改最终方法参数名称的情况下完成此操作？

```
private Foo createAnonymousFoo(final Bar bar) {
    return new Foo() {
        private Bar bar = SomeUnknownScopeQualifier.bar;

        public Bar getBar() {
            return bar;
        }

        public void doSomethingThatReassignsBar() {
            bar = bar.createSomeDerivedInstanceOfBar();
        }
    };
} 
```

显然，如果没有 doSomethingThatReassignsBar 调用，您将不需要成员 Bar 等。在这种情况下，简单的解决方法是更改`final Bar bar`​​为类似`final Bar startBar`的内容，然后分配就可以了。但是出于好奇，是否可以专门指`final Bar`（类似于您所说的方式`Super.this`）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T17:15:04.027

我认为你的问题的答案是“不”。来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.4)：

> 局部变量（第 14.4 节）、形参（第 8.4.1 节）、异常参数（第 14.20 节）和本地类（第 14.3 节）只能使用简单名称（第 6.2 节）而不是限定名称（ §6.6)。

换句话说，您无法`SomeUnknownScopeQualifier`在示例代码中替换任何内容以使内部类中的赋值语句引用形式参数名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T16:53:56.433

我认为这是不可能的。重命名涉及的变量或创建别名：

```
private Foo createAnonymousFoo(final Bar bar) {
  final Bar alias = bar; 
  return new Foo() {
    private Bar bar = alias;

    // ...
  };
} 
```

# jquery-mobile - 检测设备是否被 jQuery Mobile 支持

> ID：10144793
> 
> 赞同：0
> 
> 时间：2012-04-13T16:34:47.367
> 
> 标签：jquery-mobile

有没有办法测试给定设备是否专门在[jQuery Mobile 支持的平台](http://jquerymobile.com/demos/1.1.0/docs/about/platforms.html)列表中，最好是支持等级（A、B、C）？

我知道[用户代理匹配](https://stackoverflow.com/questions/3514784/best-way-to-detect-handheld-device-in-jquery)（以及它的缺陷）。那不是我所追求的。如果 jQuery Mobile 中有类似[jQuery Support](http://jquerymobile.com/demos/1.0a1/experiments/api-viewer/docs/jQuery.support/index.html)的内容，表明该设备是目标移动平台以及支持哪些功能，那将是理想的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:37:51.023

您可以使用以下内容来确定浏览器是否为 A 级：

```
$.mobile.gradeA() 
```

返回`true`/`false`

# windows - 在 ClickOnce 部署中使用证书签署应用程序

> ID：10144795
> 
> 赞同：8
> 
> 时间：2012-04-13T16:34:57.647
> 
> 标签：windows, certificate, clickonce

对于我基于 Windows 的应用程序，我想使用[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)作为部署技术。我的申请将通过互联网分发。

在文章[ClickOnce 和 Authenticode](http://msdn.microsoft.com/it-it/library/ms172240.aspx)中，我读到：

> 对于 ClickOnce 应用程序，您必须拥有对代码签名有效的 Authenticode 证书。您可以通过以下三种方式之一获取代码签名证书：
> 
> 1.  从证书供应商处购买一个。
>     
>     
> 2.  从您组织中负责创建数字证书的小组接收一份。
>     
>     
> 3.  使用包含在 Windows 软件开发工具包 (SDK) 中的 MakeCert.exe 生成您自己的证书。

就我而言，数字 2 不适用。

正如我后来读到的几行：

> *默认情况下，**使用自证书签名并通过 Internet 部署的*ClickOnce 应用程序无法使用受信任的应用程序部署。

（强调我的。）

*默认情况下*我无法理解这个的含义。在我的情况下，选项#3 是否可行？

然后，要了解所有可能性，#1 意味着什么？（“从证书供应商处购买”）我应该购买什么样的证书？可以推荐哪个[证书颁发机构？](http://en.wikipedia.org/wiki/Certificate_authority)取决于我应该选择什么？一个证书的费用是多少？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T07:12:06.800

它必须是“Microsoft Authenticode 证书”。它允许我们签署各种 Windows 可执行文件和代码，包括、、、、`.exe`和文件。`.cab``.dll``.ocx``.xpi`

签署应用程序不是强制性的，但如果我们这样做，我们的用户将不会看到一条警告消息，指出该软件的作者未知。

Microsoft Authenticode 证书需要由受信任的证书颁发机构颁发。不幸的是，价格相当昂贵。*[Microsoft Authenticode Certificates](http://www.sslshopper.com/microsoft-authenticode-certificates.html)*页面上有更多信息和一些示例。

**更新**我通过[Comodo](http://en.wikipedia.org/wiki/Comodo_Group)零售商[KSoftware](http://codesigning.ksoftware.net/)购买了证书。与替代品相比，价格相当不错：95 美元/年。这个过程比我预期的要快：我早上申请，晚上我的证书已经可用。（对于那些感兴趣的人，我按照[这个分步指南进行操作](http://www.jeff.wilcox.name/2010/02/codesigning101/)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:54:15.080

请参阅[我对 Stack Overflow 问题*如何签署 ClickOnce 应用程序的*](https://stackoverflow.com/questions/9610556/how-to-sign-a-clickonce-application/9610744#9610744)回答。

我肯定会建议获得适当的代码签名证书 - 在这种情况下，您的应用程序安装屏幕看起来会更好。就我个人而言，我从[http://startssl.com](http://startssl.com)获得了我的代码签名证书——总共花费了 100 美元左右（并且您获得了网站的通配符域证书以及奖金）。它比使用[VeriSign](http://en.wikipedia.org/wiki/Verisign)或[TrustWave](http://en.wikipedia.org/wiki/Trustwave_Holdings)便宜得多。

# visual-c++ - RC2176：res\MyApp.ico 中的旧 DIB；通过 VC++ 2008 中的 SDKPAINT 传递它

> ID：10144799
> 
> 赞同：2
> 
> 时间：2012-04-13T16:35:25.567
> 
> 标签：visual-c++, mfc

是的，[存在关于此错误的问题](https://stackoverflow.com/q/3384112/1194873)。但我认为这与 OP 所处的情况完全不同。

我刚刚在 VC++ 2008（专业版）中创建了一个 MFC 应用程序并对其进行了编译。由于错误，编译失败

```
RC2176 : old DIB in res\MyApp.ico; pass it through SDKPAINT 
```

我一定错过了一些东西，因为 VC++ 创建了未编译的图标。任何线索将不胜感激。

更新：我暂时忘记了这个问题。我通过以下解决方案解决了这个问题 - [Can't open resource editor in VC++ 2008](https://stackoverflow.com/q/10218761/1194873)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:29:48.343

您是否安装了 Service Pack 1？此外，如果您安装较新的 Windows SDK 并在您的环境中使用它，这很可能会导致某种冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T02:52:09.543

已在链接问题中回答：[错误 RC2176：res\icon3.ico 中的旧 DIB；通过 SDKPAINT 传递它？](https://stackoverflow.com/q/3384112/1194873)

* * *

如果您要安装更新的（与 VS 2008 相同或更晚的发布日期）SDK 并将其与 VS 2005 集成，那么也可以解决它。您还可以转到`C:\Program Files\Microsoft Visual Studio 8\VC\bin`（或您的等效路径）并将文件替换为更新的 VS、WDK 或 SDK 中`rcdll.dll`的文件。`rc.exe`

**旁注：**`rcdll.dll`和`rc.exe` **必须**匹配的版本，即您需要从源代码（无论是 VS、WDK 还是 SDK）一次复制两者。对我来说，任何以 6.0 或 6.1 开头的版本都可以。这是从伴随 Vista SDK 和 VS 版本或更高版本的编译器开始的任何版本。

# c++ - 这个程序背后的逻辑是什么？

> ID：10144800
> 
> 赞同：0
> 
> 时间：2012-04-13T16:35:35.667
> 
> 标签：c++, type-conversion, inner-classes, data-conversion

运算符 int() 函数将字符串转换为 int

```
class mystring
{ 
  private:
    chat str[20];

  public:
   operator int()             // i'm assuming this converts a string to an int
   {
     int i=0,l,ss=0,k=1;

     l = strlen(str)-1;
     while(l>=0)
     {
       ss=ss+(str[l]-48)*k;
       l--;
       k*=10;
     }
     return(ss);
   } 
}

int main()
{
  mystring s2("123");
  int i=int(s2);
  cout << endl << "i= "<<i;
} 
```

那么背后的逻辑是`operator int()`什么？里面的48是什么？有人可以向我解释从字符串转换为 int 背后的算法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:49:22.183

Yes this converts a string to an integer. 48 is the ASCII value for '0'. If you subtract 48 from an ASCII digit you'll get the value of the digit (ex: '0' - 48 = 0, '1' - 48 = 1, ..). For each digit, your code calculates the correct power of 10 by using `k` (ranges between 1...10^{ log of the number represented by the input string}).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:48:06.353

It does indeed convert a string to an integer. The routine assumes that all characters are decimal digits (things like minus sign, space, or comma will mess it up).

It starts with the ones place and moves through the string. For each digit, it subtracts off the ASCII value of `'0'`, and multiplies by the current place value.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T16:52:41.843

这确实将字符串转换为整数。如果您查看 ascii 表，数字从值 48 开始。使用此逻辑（假设字符串“123”），while 循环将执行以下操作：

```
l=2

ss=0+(51-48)*1 
```

所以在这种情况下 ss = 3

下一个循环我们得到

```
l=1

ss=3+(50-48)*10 
```

所以 ss = 23

下一个循环

```
l=0
ss=23+(49-48)*100 
```

所以 ss = 123

循环中断，我们返回一个值 123 的整数。

希望这可以帮助！

# java - sessionFactory的正确使用方法

> ID：10144804
> 
> 赞同：3
> 
> 时间：2012-04-13T16:35:50.813
> 
> 标签：java, spring, hibernate, tomcat, spring-mvc

我正在尝试学习 spring 3 和 DAO 和 BO 类以及如何自动连接它，我想知道这是连接 sessionFactory 的正确方法，因为我已经读过它更好用

```
public void save(Customer customer) {
    sessionFactory.getCurrentSession().save(customer);
} 
```

而不是

```
public void save(Customer customer){
    getHibernateTemplate().save(customer);
} 
```

那么以下是连接 sessionFactory 的正确方法吗？

CustomHibernateDaoSupport 类

```
package com.fexco.helloworld.web.util;

import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.orm.hibernate3.support.HibernateDaoSupport;

public abstract class CustomHibernateDaoSupport extends HibernateDaoSupport
{    
@Autowired
@Qualifier("sessionFactory")
public void seSessionFactory(SessionFactory sessionFactory) {

    this.setSessionFactory(sessionFactory);
}
} 
```

CustomerDaoImpl 类

```
package com.fexco.helloworld.web.dao;

import java.util.List;

import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import com.fexco.helloworld.web.model.Customer;
import com.fexco.helloworld.web.util.CustomHibernateDaoSupport;

@Repository("customerDao")
public class CustomerDaoImpl extends CustomHibernateDaoSupport implements CustomerDao{

@Autowired
private SessionFactory sessionFactory;

public void save(Customer customer) {
    sessionFactory.getCurrentSession().save(customer);
} 
```

这是正确的还是我在某个地方犯了错误，因为我无法让它工作？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:50:48.827

这里解释了为什么我们不需要 Hibernate 3 的任何模板 [http://blog.springsource.com/2007/06/26/so-should-you-still-use-springs-hibernatetemplate-andor-jpatemplate/](http://blog.springsource.com/2007/06/26/so-should-you-still-use-springs-hibernatetemplate-andor-jpatemplate/)

# javascript - 选择 1 后无法切换到下一个案例

> ID：10144805
> 
> 赞同：0
> 
> 时间：2012-04-13T16:35:53.093
> 
> 标签：javascript, css, html, switch-statement, getelementbyid

我正在尝试在一个 div 中创建一个包含多个幻灯片的网站，而无需加载多个 url。我想出了以下解决方案，但是 switch 语句只能工作一次，我需要它无限次工作。我想知道如何清除旧值以设置新值；

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <html>
 <head>
 <title>Rivas2</title>

 <script type= "text/javascript">

 function changesrc(value) {

  var sets=document.getElementById('newset');

   switch(value) {

       case(1):

        sets.src='sidescroll.js';
        document.getElementById('slide').src ="1.jpg";
        document.getElementById('slide2').src ="2.jpg";
        document.getElementById('slide3').src ="3.jpg";
        document.getElementById('slide4').src ="4.jpg";
        document.getElementById('slide5').src ="5.jpg";

        break;

    case(2):

    sets.src='sidescroll2.js';
    document.getElementById('slide').src ="a1.jpg";
     document.getElementById('slide2').src ="a2.jpg";
         document.getElementById('slide3').src ="a3.jpg";
      document.getElementById('slide4').src ="a4.jpg";
       document.getElementById('slide5').src ="a5.jpg";
    default:

   }
}

 </script>
 <script id="newset" type="text/javascript"></script>
 <style type="text/css">
 body{
background-color:#66FFFF;
}
 .banner{
position:absolute; 
top: 15px; 
left: 300px;}
 .sideb1{
position:absolute;
top: 120px;
left: 25px;
height: 530px;
width: 150px;
overflow: auto;}
 .frame{
position:absolute; 
top: 120px; 
left: 400px;}   
 .scroll{
position: absolute;
top: 525px;
left: 400px;
}

 </style>
 </head>

 <body>

<div class="banner">
    <img src="RPM.jpg" alt="" />
</div>

<div class="sideb1" >
    <input type = 'image' src = '1.jpg' onclick = 'changesrc(1)' width= "120" height=   "100" alt= " " /><br/> House 1<br/>
    <input type = 'image' src = 'a5.jpg' onclick = 'changesrc(2)' width= "120" height= "100" alt= " " /><br/> House 2<br/>
    <a href="rivas2.html" ><img src="b5.jpg" width= "120" height= "100" alt="" /> </a>    <br/> House 3<br/>
    <a href="rivas3.html" ><img src="c5.jpg" width= "120" height= "100" alt="" /> </a><br/> House 4<br/>
    <a href="rivas2.html" ><img src="d5.jpg" width= "120" height= "100" alt="" /> </a><br/> House 5<br/>
</div>

<div class = "frame" >
    <img src="1.jpg" width="600" height= "400" id= "slide" alt="" />
</div>

<div class="scroll">
    <input type = 'image' src = "image.jpg " onclick = " plus(); plus2(); plus3();     plus4(); plus5(); " width="50" height="25" alt=" " />
    <img src="5.jpg" width= "120" height= "100" id= "slide5" alt="" />
    <img src="4.jpg" width= "120" height= "100" id= "slide4" alt="" />
    <img src="3.jpg" width = "120" height= "100" id= "slide3" alt="" />
    <img src="2.jpg" width = "120" height= "100" id= "slide2" alt="" />
    <input type = 'image' src = "image2.jpg" onclick = "min1(); min2(); min3(); min4(); min5();" width= "50" height= "25" alt=" " />

</div>

 </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:22:18.060

只需在切换之前清除 src 属性：

```
sets.src='';
document.getElementById('slide').src ="";
document.getElementById('slide2').src ="";
document.getElementById('slide3').src ="";
document.getElementById('slide4').src ="";
document.getElementById('slide5').src ="";

switch(value) {
... 
```

您可能需要考虑在某处缓存所有这些元素，这样您就不会在每次函数调用时都搜索 DOM 10 次。

# jaxb - 可以在 JAXB/MOXy 中为整个类或在映射文件中全局定义空值序列化策略吗？

> ID：10144812
> 
> 赞同：1
> 
> 时间：2012-04-13T16:36:35.357
> 
> 标签：jaxb, eclipselink, moxy

我只找到了一种为每个属性定义空处理策略的方法：

```
<xml-element java-attribute="something">
    <xml-null-policy xsi-nil-represents-null="false" empty-node-represents-null="false" null-representation-for-xml="EMPTY_NODE" is-set-performed-for-absent-node="true" />
</xml-element> 
```

有没有办法在 xml-bindings 级别或至少在 java-type 级别的映射文件中全局定义它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:15:19.077

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

我们目前没有一种机制来全局默认空表示。此功能有一个现有的增强请求。如果您有机会，请为这个错误投票，因为它将把它移到我们的优先级列表中。

*   [http://bugs.eclipse.org/368547](http://bugs.eclipse.org/368547)

# java - 如何在 JEditorPane 中的 word 下制作红色之字形

> ID：10144815
> 
> 赞同：2
> 
> 时间：2012-04-13T16:37:01.840
> 
> 标签：java, swing, jeditorpane, underline

我需要在 Java 中为我正在创建的应用程序制作一个简单的拼写检查器，我已经四处搜索，但没有找到任何直截了当的答案。

如何`JEditorPane`用红色之字形加下划线中的单词？像这样：

![红色之字形](../Images/8d61fac2f14a57c2e9813030595e8c07.png)

如果有人有任何简单且相当容易实现的想法，请与我分享。甚至可能是一些代码的链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T17:59:56.343

您可能会发现这个自定义编辑器工具包[示例](http://java-sl.com/editor_kit_tutorial_example.html)很有用。它展示了如何扩展`StyledEditorKit`以添加属性以绘制自定义下划线。

如果您想要一个完整的解决方案，您可以使用 Jide 的[StyledLabel](http://www.jidesoft.com/javadoc/com/jidesoft/swing/StyledLabel.html)。[在这里](http://www.jidesoft.com/articles/StyledLabel.pdf)查看。它应该是`jide-oss`- 通用开源库的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T15:37:41.793

您可以使用自定义荧光笔。以Squiggle [Painter](http://tips4java.wordpress.com/2008/10/28/rectangle-painter/)为例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-08T23:03:27.853

我使用[jtstand 的编辑器](http://jtstand.codehaus.org/dependency-info.html)and [`SquiggleUnderlineHighlightPainter`](https://svn.codehaus.org/jtstand/jtstand/tags/jtstand-1.5.7/jtstand-editor/src/main/java/org/fife/ui/rsyntaxtextarea/SquiggleUnderlineHighlightPainter.java)，它也是基于 javax 类的。我这样使用它：

```
JTextComponent editor = //... your editor component;
SquiggleUnderlineHighlightPainter sqpainter = new SquiggleUnderlineHighlightPainter(Color.RED);
try {
    editor.getHighlighter().addHighlight(beginPosition, endPosition, sqpainter);
} 
catch (BadLocationException e) {
    e.printStackTrace();
} 
```

这应该适用于任何`javax.swing.text.JTextComponent`，包括`JEditorPane`. 请参阅[addHighlighter](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/Highlighter.html#addHighlight%28int,%20int,%20javax.swing.text.Highlighter.HighlightPainter%29)。

# javascript - 获取 javascript 渲染页面的 html（与其交互后）

> ID：10144820
> 
> 赞同：34
> 
> 时间：2012-04-13T16:37:20.663
> 
> 标签：javascript, html, state, save

我希望能够在与 html 页面交互后保存它的状态。

假设我单击了一个复选框，或者 javascript 设置了各种元素的值。

如何保存“javascript-rendered”页面？

谢谢。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-11-16T21:05:21.463

在 Chrome（显然是 Firefox）中，有一个特殊的 copy() 方法可以将渲染的内容复制到剪贴板。然后，您可以通过将其粘贴到您喜欢的文本编辑器来做任何您想做的事情。

[https://developers.google.com/chrome-developer-tools/docs/commandline-api#copyobject](https://developers.google.com/chrome-developer-tools/docs/commandline-api#copyobject)

控制台示例：

```
copy(document.body.innerHTML); 
```

注意：我注意到该方法运行后 Chrome 报告未定义，但是，它似乎正确执行并且正确的内容在剪贴板中。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-04-13T16:39:00.653

应该这样做并且会抓取所有页面，而不仅仅是正文

```
console.log(document.getElementsByTagName('html')[0].innerHTML); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T16:38:29.113

`document.body.innerHTML`将为您提供当前文档正文的 HTML 表示形式。

这不一定包括 DOM 对象的所有内部状态，因为 HTML 包含对象的初始默认状态，不一定是它们可能已更改为的状态。保证您获得所有状态的唯一方法是列出您要保存的状态并实际以编程方式获得该状态。

要回答关于保存它的部分问题，您必须更多地描述您真正要解决的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-17T18:39:05.303

要获得与呈现 javascript 的等效**视图源**，包括 doctype 和 html 标记，请将命令复制到 chrome 控制台：

```
console.log(new XMLSerializer().serializeToString(document.doctype) + document.getElementsByTagName('html')[0].outerHTML); 
```

在 chrome 控制台中，将鼠标悬停在输出的末尾，然后单击复制链接以复制到粘贴板。

# python - 如何告诉 Python waf 在哪里放置包？它可以与virtualenv一起使用吗？

> ID：10144822
> 
> 赞同：1
> 
> 时间：2012-04-13T16:37:25.413
> 
> 标签：python, virtualenv, waf

我正在尝试在我选择的目录中安装现成的 waf 包（py2cairo）。理想情况下在我的 virtualenv`site-packages`中。这应该很简单，但我似乎无法让 waf 去做。

```
$ sudo ./waf install
  ./options()
Waf: Entering directory `/tmp/py2cairo-1.10.0/build_directory'
  ./build()
  src/build()
- install /usr/local/include/pycairo/pycairo.h (from src/pycairo.h)
+ install /usr/local/lib/python2.6/site-packages/cairo/_cairo.so (from build_directory/src/_cairo.so)
+ install /usr/local/lib/pkgconfig/pycairo.pc (from pycairo.pc)
Waf: Leaving directory `/tmp/py2cairo-1.10.0/build_directory'
- install /usr/local/lib/python2.6/site-packages/cairo/__init__.py (from src/__init__.py)
+ byte compiling '/usr/local/lib/python2.6/site-packages/cairo/__init__.py'
'install' finished successfully (0.130s) 
```

我想改变`/usr/local/lib/python2.6/site-packages/cairo/__init__.py`我选择的东西。我找不到可以为我执行此操作的配置选项。

该`--prefix`命令为字符串添加前缀，但不会更改它。`--destdir`似乎没有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:40:15.370

编辑：如果开发人员没有实现这样的选项，`--prefix`那么你得到的只是。

您可以自己挖掘并添加使用方法 .install_as 、 .symlink_as 、 .install_files 的选项。

有关详细信息，请参阅[wafbook 第 4.2.2 章](http://docs.waf.googlecode.com/git/book_16/single.html#_more_build_options)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-05T08:27:12.907

有一个参数可以与 .waf install 结合使用来指定位置：

`./waf install --destdir=/tmp/package`

# c++ - 是否有从文件中读取命名列的 C++ 库？

> ID：10144824
> 
> 赞同：1
> 
> 时间：2012-04-13T16:37:26.750
> 
> 标签：c++, file-io, io

我经常处理看起来像这样的文件（为了与 R 兼容）：

```
# comments
# more comments
col1 col2 col3
1 a hi
2 b there
. . . 
```

很多时候，我想将 col2 读入向量或其他容器中。编写一个解析这种文件的函数并不难，但如果没有经过良好测试的库可以为我做这件事，我会感到惊讶。有这样的图书馆吗？（正如我所说，自己动手并不难，但由于我不是 C++ 专家，所以使用允许我使用任意容器来包含任意数据类型的模板对我来说会有些麻烦。）

编辑：我知道我想要的列的名称，但不知道这个特定文件中的列的顺序。列由未知数量的空格分隔，可能是制表符或空格（可能不是两者）。每行的第一个条目前面可能有也可能没有空格，有时这会在一个文件中改变，例如

```
number letter
 8 g
 9 h
10 i 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:57:46.177

我不知道有任何 C++ 库可以做到这一点。然而，一个简单的解决方案是使用 linux `cut`。您必须先删除注释，这可以使用 sed 轻松完成：

```
sed -e '/^#/d' <your_file> 
```

然后您可以应用以下命令，该命令将仅从第三列中选择文本：

```
cut -d' ' -f3 <your_file> 
```

您可以将它们与管道组合在一起以使其成为单个命令：

```
sed -e '/^#/d' <your_file> | cut -d' ' -f3 <your_file> 
```

您可以以编程方式运行此命令，然后只需将每一行附加到 stl 容器。

```
//  pseudocode
while(file.hasNextLine())
{
  container << file.readNextLine();
} 
```

有关如何`cut`从代码中实际运行，请参阅[此答案](https://stackoverflow.com/q/478898/446554 "这个答案")。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T17:10:15.773

Boost [split](http://www.boost.org/doc/libs/1_49_0/doc/html/string_algo/usage.html#id3184031)可以做你想做的事，前提是你可以始终如一地分割空白。

# c# - 如何从用户控件中引发自定义路由事件？

> ID：10144826
> 
> 赞同：12
> 
> 时间：2012-04-13T16:37:36.520
> 
> 标签：c#, wpf, user-controls, routed-events

在我的用户控件中，我有一个按钮，单击该按钮会引发自定义路由事件。我试图提高它，但它不会在 MainWindow.xaml 中被触发。

UserControl 中按钮的 Xaml：

```
<Button x:Name="PART_Add" Content="+" Grid.Column="3" Margin="0,0,0,0" Style="{DynamicResource dTranspButton}" Click="btnAdd_Click"/> 
```

用户控件 C# 代码：

```
//AddClick Event

        public static readonly RoutedEvent AddClickEvent = EventManager.RegisterRoutedEvent("AddClick", RoutingStrategy.Bubble, typeof(RoutedEventHandler), typeof(dCB_Props));

        public event RoutedEventHandler AddClick
        {
            add { AddHandler(AddClickEvent, value); }
            remove { RemoveHandler(AddClickEvent, value); }
        }

        void RaiseAddClickEvent()
        {            
            RoutedEventArgs newEventArgs = new RoutedEventArgs(dCB_Props.AddClickEvent);
        }

        protected void OnAddClick()
        {
            RaiseAddClickEvent();
        }

//objects events

        private void btnAdd_Click(object sender, System.Windows.RoutedEventArgs e)
        {
            RaiseAddClickEvent();
        } 
```

MainWindow.xaml 中 UserControl 实例的 Xaml 代码：

```
<local:dCB_Props x:Name="cb1" Margin="41.166,0,36.19,25" VerticalAlignment="Bottom" Height="30" Width="141" AddClick="dCB_Props_AddClick">
    <local:dCB_Props.Items>
        <ComboBoxItem Content="item1"/>
    </local:dCB_Props.Items>
</local:dCB_Props> 
```

应该在 MainWindow.xaml.cs 中触发的 C# 代码：

```
private void dCB_Props_AddClick(object sender, System.Windows.RoutedEventArgs e)
{
    MessageBox.Show("This Works");
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-13T16:39:44.910

你需要打电话

```
RaiseEvent(new RoutedEventArgs(AddClickEvent)); 
```

# jquery - ajaxForum 插件发布参数

> ID：10144830
> 
> 赞同：0
> 
> 时间：2012-04-13T16:37:49.333
> 
> 标签：jquery, plugins, parameters, ajaxform

嘿，我开始使用 ajaxForm 插件，表单语句如下：

```
<form id="upload" action="upload.php" methor="POST">
<!-- form inputs etc etc -->
</form> 
```

一切正常，但是如果我尝试将操作参数从“upload.php”更改为“upload.php?some_param=value”，它只会调用 upload.php，任何人都知道如何使用 ajaxForm 发送另一个参数？

我通过以下方式查找：

```
<script type="text/javascript">
$('#upload').live('change',function() {
$(this).ajaxForm({
success: somefunction, // callback function
//i guess here should be another parameter to be sent to the file, but I couldn't find anything interesting on the web
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:41:55.160

尝试在表单中添加一个隐藏字段，其中包含您要发布的值：

```
<form id="upload" action="upload.php" method="POST">
    <!-- form inputs etc etc -->
    <input type="hiden" value="value" id="some_param" name="some_param" />
</form> 
```

这应该*在您发布表单时发布隐藏字段的值*

# c++ - C++中的字符和文件

> ID：10144832
> 
> 赞同：-6
> 
> 时间：2012-04-13T16:37:55.843
> 
> 标签：c++

我必须制作一个文件名由两部分组成的程序：第一个是固定的，第二个可以在程序期间更改，例如“fixpart_integer.dat”。我试图在 C++ 中做到这一点，但我没有成功。第一个问题是：如何将数字转换为字符；以及如何连接这两个字符；以及如何以正确的方式声明这个最终字符以打开这个文件名？

很多问题，但我确实找到了一个简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T16:39:54.663

```
#include <string>
#include <sstream>

std::string make_filename(std::string prefix, int id) {
  std::stringstream ss;
  ss << prefix << "_" << id << ".dat";
  return ss.str();
} 
```

然后我将字符串转换为char。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:44:56.133

如果您正在使用 c，您可以尝试这里[itoa中描述的功能](http://www.cplusplus.com/reference/clibrary/cstdlib/itoa/)

否则，如果你正在使用 c++，你可以尝试这样的事情：

```
#include <sstream>

int i = 5;
std::string s;
std::stringstream out;
out << i;
s = out.str(); 
```

# jquery - 使用 Jquery 传递隐藏字段值

> ID：10144837
> 
> 赞同：2
> 
> 时间：2012-04-13T16:38:18.767
> 
> 标签：jquery, ajax, http-post, query-string

`hidden` `Input field`我在生成的地方很正常`random` `string`。我需要将其附加到我尝试将数据发布到另一个页面的 URL。

我已经做到了并且工作得很好。

**`url:'Upload.html?field1=newvalue',`**

这是我隐藏的输入字段

```
<input type="hidden" id="randomdirectory"/> 
```

现在而不是`newvalue`在`query string`我需要通过我的`random directory value`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T16:43:43.807

只需执行以下操作即可轻松完成

```
var value = $("#randomdirectory").val();
url:'Upload.html?field1='+value , 
```

就是这样 ..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T16:41:05.047

只需为隐藏字段命名。

```
<input name="field1" type="hidden" id="randomdirectory" value="randomvalue"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T16:41:11.857

```
url: 'Upload.html?field1='+$("#randomdirectory").val() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T16:43:19.980

如果我的问题是正确的并且 ID 是随机生成的，那么您需要这种类型的东西：

```
url: 'Upload.html?field1=newvalue&field2=' + $('[type="hidden"]').val(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T16:54:46.943

假设这是一个 ajax 调用的参数（正如其他人已经拥有的那样），一个稍微好一点的做法是：

```
url: 'Upload.html',
data: { field1: $('#randomdirectory').val() } 
```

这将确保您的查询字符串是正确编码的 URL（jQuery 为您处理它）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-10T15:39:37.867

**page1.html**

```
<input type="hidden" id="hdnid" value="0">

<script>
    var id =$("#hdnid").val();
    window.location.href="pathofpage2.htmlpage" +"#"+id;
</script> 
```

**page2.html**

```
<script>
    var id =window.location.hash.substring(1);
</script> 
```

# android - Android -- 查看媒体播放器

> ID：10144838
> 
> 赞同：0
> 
> 时间：2012-04-13T16:38:21.090
> 
> 标签：android, media-player, overlay

我想构建一个应用程序，允许用户在观看视频时分享对任何视频的评论。为此，我需要查看媒体播放器视图。

谁能指导我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:43:20.267

您可以拥有 FrameLayout 或 RelativeLayout 并将所需的 View 堆叠在 MediaPlayer View 上。

希望这可以帮助！

# php - 为什么php中的mysql更新查询不起作用？

> ID：10144840
> 
> 赞同：-1
> 
> 时间：2012-04-13T16:38:24.103
> 
> 标签：php

请帮助我解决标题中指定的问题。

输入表单页面代码：

```
 <?
   db_connect();
  $query1 = "SELECT *, DATE_FORMAT(eventdate,'%m/%d/%y') AS 
   eventdate,DATE_FORMAT(throughdate,'%m/%d/%y') AS throughdate FROM events WHERE id = "     . mysql_real_escape_string($_REQUEST['id']);
  $result1 = mysql_query($query1) or die("Error - query failed " . mysql_error()); 

  if ( mysql_num_rows($result1) == 0 ) {
  print "<p>Error - no such event.</p>\n";
  return;
  }
 else {

 $qry_event1 = mysql_fetch_array($result1); 

  }

// default the formaction to the query
 if (! isset($_REQUEST['formaction']) ) { $_REQUEST['formaction'] = 'query'; }

?>
 <form name="eventform" method="post" action="act_updevent.php">
 <input type="hidden" name="submit_check" value="1">
 <input type="hidden" name="formaction" value="form">
  <!-- if we are editing, $id will exist.  Pass it along. -->
 <input type="hidden" name="id" value="<?php $qry_event1['id'];?>">
 <table>
 <tr>
 <td align="right" valign="center"><b><? displayformlabel('eventdate','Event Date:')?>  
  </b></td>
  <td><input name="eventdate" value="<? echo  $qry_event1['eventdate']; ?>">
  <a name="calendar1here" id="calendar1here" href="JavaScript:;"   
  onClick="cal1.select(document.forms[0].eventdate,'calendar1here','MM/dd/yy'); return    
  false;">
 <img src="resources/calendar.gif" alt="Calendar Icon" width="20" height="20"   
 border="0"></a>
 </td>
 </tr>

 <tr>
 <td align="right" valign="center"><b><? displayformlabel('throughdate','Through:')?>  
 </b></td>
 <td><input name="throughdate" value="<? echo $qry_event1['throughdate']; ?>">
 <a name="calendar2here" id="calendar2here" href="JavaScript:;" 
 onClick="cal2.select(document.forms[0].throughdate,'calendar2here','MM/dd/yy'); return    
 false;">
 <img src="resources/calendar.gif" alt="Calendar Icon" width="20" height="20" 
 border="0"></a>
 <span class="formnotes">Leave blank if only one day event</span>
 </td>
 </tr>

 <tr>
 <td align="right"><b><? displayformlabel('title','Event Title:')?></b></td>
 <td><input name="title" size="50" maxlength="50" value="<? echo $qry_event1['title'];? 
  >"></td>
 </tr>
 <tr>
 <td align="right"><? displayformlabel('website','Event Website:')?></td>
 <td><input name="website" size="50" maxlength="100" value="<? echo 
 $qry_event1['website']; ?>"></td>
 </tr>

 <tr>
 <td align="right"><? displayformlabel('email','Event Email:')?></td>
 <td><input name="email" size="50" maxlength="100" value="<? echo   
 $qry_event1['email'];?>"></td>
 </tr>

 <tr>
 <td align="right" valign="top"><? displayformlabel('notes','Notes:')?></td>
 <td><textarea name="notes" style="width: 320px; height: 60px;"><? echo  
 $qry_event1['notes']; ?></textarea></td>
 </tr>

 <tr>
 <td align="right"><? displayformlabel('venue','Venue:')?></td>

 <td><input name="venue" size="50" maxlength="50" value="<? echo $qry_event1['venue'];?  
  >"></td>
 </tr>

 <tr>
 <td align="right"><? displayformlabel('address','Address:')?></td>

 <td><input name="address" size="50" maxlength="50" value="<?echo   
 $qry_event1['address'];?>"></td>
  </tr>

  <tr>
  <td align="right"><? displayformlabel('city','City:')?></td>
  <td><input name="city" size="50" maxlength="50" value="<?echo $qry_event1['city'];?  
   >"></td>
  </tr>

   <tr>
  <td align="right"><? displayformlabel('state','State:')?></td>
  <td><input name="state" size="3" maxlength="2" value="<?echo $qry_event1['state'];?
   >"></td>
  </tr>

  <tr>
  <td align="right"><? displayformlabel('lat','Latitude:')?></td>
  <td><input name="lat" size="15" maxlength="15" value="<? echo $qry_event1['lat'];?>">  
  </td>
  </tr>

  <tr>
  <td align="right"><? displayformlabel('lon','Longitude:')?></td>
  <td><input name="lon" size="15" maxlength="15" value="<? echo $qry_event1['lon'];?>">
  &nbsp; &nbsp;
  <span class="formnotes"><a href="JavaScript:;" onclick="lookUp()">Look up</a>    
   coordinates using above address information.</span>
  </td>
 </tr>

  <tr>
  <td align="right"><? displayformlabel('accurate','Accurate:')?></td>
  <td><input name="accurate" type="checkbox" value="1" <?php if   
  (isset($qry_event1['accurate'])) { echo 'checked="checked"'; }?>>
  &nbsp; &nbsp; <a href="JavaScript:;" class="formnotes" onClick="window.open('<?php   
  print $vsf->self;?>?action=accuratehelp','helpwin','width=435,height=220');">Whats  
   this?</a> 
  </td>
  </tr>

  <tr>
  <td></td>
   <td><input type="submit" value="Submit"></td>
  </tr>

  </table>

  </form> 
```

更新页面：

```
<?php
 // updates a record in the database

 // do validation (shared with update logic)
 $id = $_REQUEST['id'];
  $eventdate = $_REQUEST['eventdate'];
  $throughdate = $_REQUEST['throughdate'];
  $title = $_REQUEST['title'];
   $website = $_REQUEST['website'];
  $email = $_REQUEST['email'];
 $notes = $_REQUEST['notes'];
 $venue = $_REQUEST['venue'];
 $address = $_REQUEST['address'];
 $city = $_REQUEST['city'];
 $state = $_REQUEST['state'];
 $lat = $_REQUEST['lat'];
 $lon = $_REQUEST['lon'];
 $accurate = $_REQUEST['accurate'];
 $errorwasthrown="";

 $database = 'mapcal';

 // database server
$dbsvr = 'localhost';

// username
$dbuser = 'root';

// password
$dbpass = 'usbw'; 
function db_connect() {
 global $dbsvr,$dbuser,$dbpass,$database;
 static $dbcon;

 if ( ! $dbcon ) {

$dbcon = mysql_connect($dbsvr,$dbuser,$dbpass);

if (! mysql_select_db($database) ) {
  die("Failure connecting to database - " . mysql_error());
  }
 }
 }
 if (! $eventdate ) {
adderrmsg('eventdate','Event date cannot be blank.');
$errorwasthrown=1;
 }
else {
// else date wasn't blank, so validate it
 if (! preg_match("/^\d\d\/\d\d\/\d\d$/",$eventdate) ) {
 adderrmsg('eventdate',"Event date must be in format mm/dd/yy.");
 $errorwasthrown=1;
 }
 }

 if ($throughdate && ! preg_match("/^\d\d\/\d\d\/\d\d$/",$throughdate) ) {
 adderrmsg('throughdate',"Through date must be in format mm/dd/yy.");
 $errorwasthrown=1;
 }

 if (! $title ) {
 adderrmsg('title','Title cannot be blank.');
 $errorwasthrown=1;
 }

 if ($errorwasthrown) {
  include('dsp_editevent.php');

 }
 else {

 db_connect();

 // format the date correctly for mysql
 $dateparts = split("/",$eventdate);
 $eventdate = "$dateparts[2]/$dateparts[0]/$dateparts[1]";

  if ($throughdate) {
  $dateparts = split("/",$throughdate);
  $throughdate = "$dateparts[2]/$dateparts[0]/$dateparts[1]";
  $throughdate = "'" . mysql_real_escape_string($throughdate) . "'";
  }
 else {
$throughdate = 'NULL';
}

// format event website if necessary
 if ($website && ! preg_match("/:\/\//",$website) ) {
$website = "http://" . $website;
 }

 // update record in the database
 $query = "UPDATE events SET ";
 $query .= "eventdate = '" . mysql_real_escape_string($eventdate) . "', " .
        "throughdate = " . $throughdate . ", " .
        "title = '" . mysql_real_escape_string($title)  . "', " .
        "website = '" . mysql_real_escape_string($website)  . "', " .
        "email = '" . mysql_real_escape_string($email)  . "', " .
        "notes = '" . mysql_real_escape_string($notes)  . "', " .
        "venue = '" . mysql_real_escape_string($venue)  . "', " .
        "address = '" . mysql_real_escape_string($address)  . "', " .
        "city = '" . mysql_real_escape_string($city)  . "', " .
        "state = '" . mysql_real_escape_string($state)  . "', " .
        "lat = '" . mysql_real_escape_string($lat)  . "', " .
        "lon = '" . mysql_real_escape_string($lon)  . "', " .
        "accurate = '" . mysql_real_escape_string($accurate)  . "' " .
        "WHERE id = " . mysql_real_escape_string($id);

    if ( ! mysql_query($query) ) {
    exit("Query failed! - $query");
   }

  print "<p style='color: green'>Event <b>$title</b> was updated.</p>\n";
  include('dsp_listevents.php');

   } // close else ! errorwasthrown

   ?> 
```

打印查询后我可以看到它没有获取 id 的值，而是获取表单中的所有字段，但为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:03:42.440

将 Id 值保留在引号中。“哪里 id = '”。mysql_real_escape_string($id)."'";

# c++ - 多重继承：QGraphicsPixmapItem 和 QGraphicsTextItem

> ID：10144841
> 
> 赞同：0
> 
> 时间：2012-04-13T16:38:25.623
> 
> 标签：c++, multiple-inheritance, qgraphicsitem

我需要一个结合了`QGraphicsPixmapItem`和`QGraphicsTextItem`（图像+文本）特征的对象。

多重继承是最好的方法还是有任何禁忌症？如果有，你有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:47:19.200

我认为多重继承在 Qt 中不是一个好主意，据我所知不推荐。我不知道确切的原因（可能是因为它们的信号和插槽机制）。

现在问你的问题，你想过使用 QGraphicsItemGroup 吗？

杰拉德

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T16:46:58.260

最好的解决方案是两者都不继承。如果您需要的是一个在某些文本旁边始终显示图像的对象，那么您最好创建自己的对象，该对象继承`QGraphicsItem`具有 a`QGraphicsPixmapItem`和具有`QGraphicsTextItem`. 那么你就完全不用处理多重继承的困难了。

# java - 从带有空行的文件中读取

> ID：10144843
> 
> 赞同：2
> 
> 时间：2012-04-13T16:38:36.087
> 
> 标签：java, java.util.scanner

我目前正在为我的一个 java 类编写一个程序，并且我一直在读取文件时遇到墙壁！我正在使用 JTable 来显示信息，因此当从文件中读取信息时，它会被添加到一行中。只要有空白行，扫描仪就无法读取它并抛出错误！我在最后一个扫描线上得到一个 java.util.NoSuchElementException ！截至目前，我正在起诉两个单独的扫描仪。我曾尝试使用 String.split 方法，这也给了我一个错误（ArrayIndexOutOfBoundsException：0）。我将在下面发布阅读保存方法（两个扫描仪版本和拆分）。

私人无效读取（）{

```
 try {
        Scanner scanner = new Scanner(new File("games.dat"));

        scanner.useDelimiter(System.getProperty("line.separator"));

        while (scanner.hasNext()) {
      String[] tableRow = new String[6];
            Scanner recIn = new Scanner(record);
            recIn.useDelimiter("\\s*\\|\\s*");
            tableRow[0] = recIn.next();
            tableRow[1] = recIn.next();
            tableRow[2] = recIn.next();
            tableRow[3] = recIn.next();
            tableRow[4] = recIn.next();
            //recIn.next();
            recIn.close();
            model.addRow(new Object[]{tableRow[0],
     tableRow[1], tableRow[2],
     tableRow[3], tableRow[4]}); 
```

}scanner.close(); 扫描仪=空；

```
 } catch (Exception ex) {
        JOptionPane.showConfirmDialog(null, "Could not connect to file! Make sure you are not in        zipped file!",
                "Warning!", JOptionPane.OK_OPTION,
                JOptionPane.ERROR_MESSAGE);
        ex.printStackTrace();

    }
}

private void save() {

    for (int i = 0; i < model.getRowCount(); i++) {

        String data = model.getValueAt(i, 0) + "|" + model.getValueAt(i, 1)
                + "|" + model.getValueAt(i, 2) + "|" + model.getValueAt(i, 3)
                + "|" + model.getValueAt(i, 4) + "|";
        games.add(data); 
```

}

```
 try {
        for (int i = 0; i < games.size(); i++) {
            fileOut.println(games.get(i));
        }
        fileOut.close();

    } catch (Exception ex) {
        JOptionPane.showConfirmDialog(null, "Could not connect to file! Make sure you are not in zipped file!",
                "Warning!", JOptionPane.OK_OPTION,
                JOptionPane.ERROR_MESSAGE);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:45:07.270

`recIn.next();`如果该行为空，则将失败，请使用以下命令对其进行保护`hasNext()`：

```
Scanner recIn = new Scanner(record); 
recIn.useDelimiter("\\s*\\|\\s*");
if (recIn.hasNext()) {
  tableRow[0] = recIn.next(); 
  tableRow[1] = recIn.next(); 
  tableRow[2] = recIn.next(); 
  tableRow[3] = recIn.next(); 
  tableRow[4] = recIn.next();
} 
```

这假设当记录中有一个元素时，所有元素都在那里。如果不能保证这一点，您需要保护每个`next()`调用，`hasNext()`并决定当记录中间的元素用完时该怎么办。

此外，您似乎有一个无限循环：

```
while (scanner.hasNext()) {
  // no calls to scanner.next()
} 
```

你有没有`String record = scanner.next();`从那个循环的顶部离开？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:33:40.513

从 java.util.Scanner JavaDoc，有这个方法，skip()：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#skip%28java.util.regex.Pattern%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#skip%28java.util.regex.Pattern%29)

最后一行内容为：“请注意，可以使用不匹配任何内容的模式跳过某些内容而不会冒 NoSuchElementException 的风险，例如 sc.skip("[ \t]*")。”

因此，也许添加作为循环的第一个调用，scanner.skip("[ \t]*);

# function - 这是成语Scala。制作def以缩短语句？

> ID：10144846
> 
> 赞同：6
> 
> 时间：2012-04-13T16:38:52.530
> 
> 标签：function, scala, functional-programming

我试图避免在参数列表中输入长句子。
这是一种习惯用法 Scala 存档的方式吗？

```
 def createRecaptchaHtml: String = {
    def config(s: String) = Play.current.configuration.getString(s).toString()
    ReCaptchaFactory.newReCaptcha(config("recaptcha.publicKey") , config("recaptcha.privateKey"), false).createRecaptchaHtml(null, null) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T16:54:09.950

是的，这种本地方法非常适合该应用程序。另一种方法是在范围内导入您需要的实例方法：

```
def createRecaptchaHtml: String = {
  import Play.current.configuration.getString
  ReCaptchaFactory.newReCaptcha(
    getString("recaptcha.publicKey").get,
    getString("recaptcha.privateKey").get, 
    false
  ).createRecaptchaHtml(null, null)
} 
```

# php - 更新数据库或插入新行时的 Ajax 计数警报

> ID：10144848
> 
> 赞同：-4
> 
> 时间：2012-04-13T16:38:58.287
> 
> 标签：php, mysql, ajax

拜托，我需要一个 ajax 脚本，它可以在不刷新整页的情况下增加未读消息的计数并减去消息的点击次数。在大多数电子邮件客户端中，与收件箱消息非常相似的东西。我将非常感谢任何有用的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:30:38.007

制作一个可以调用不同php文件的函数。

```
function useAjax(url1, area, send1)

{   

if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari

  xmlhttp=new XMLHttpRequest();

  } else {// code for IE6, IE5

  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");

  }

xmlhttp.onreadystatechange=function() {

  if (xmlhttp.readyState==4 && xmlhttp.status==200) {

    document.getElementById(area).innerHTML=xmlhttp.responseText;

    }

  }

xmlhttp.open(POST,url,true);

     xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

xmlhttp.send(send1);//to send post values "id="+id+"&message="+message"

return false;

} 
```

因此，您可以使用此函数调用“get_messages.php”或“read_message.php”并相应地设置 Post vaules

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:42:42.997

使用 javascript 的 setInterval 函数来检查是否有未读消息可用。例子：

setInterval(function() { // ajax 请求检查未读消息 }, 1000);

上面示例中的 ajax 检查将每 1 秒（1000 毫秒）执行一次。您可以随意更改间隔，例如 5000（5 秒）。

# python - Twisted - 踢特定客户端

> ID：10144851
> 
> 赞同：0
> 
> 时间：2012-04-13T16:39:03.597
> 
> 标签：python, client, twisted

我想在基于扭曲的应用程序中断开特定用户的连接。有人可以解释我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:03:33.290

```
from twisted.web import server, resource
from twisted.internet import reactor

bannedIPs = ["127.0.0.1"]

class HelloResource(resource.Resource):
    isLeaf = True
    numberRequests = 0

    def render_GET(self, request):
        clientIP = request.getClientIP()

        if clientIP in bannedIPs:
            return "you are banned"

        self.numberRequests += 1
        request.setHeader("content-type", "text/plain")
        return "I am request #" + str(self.numberRequests) + "\n"

reactor.listenTCP(8080, server.Site(HelloResource()))
reactor.run() 
```

# mongodb - 如何为 MongoDB 中的嵌入式文档创建唯一 ID？

> ID：10144852
> 
> 赞同：37
> 
> 时间：2012-04-13T16:39:06.373
> 
> 标签：mongodb

所以我需要从我的集合中的项目中唯一地引用特定的子文档。例如：

```
User = {
    'name': 'jim',
    'documents: [
        {'id': 0001, 'title': "My document"},
        {'id': 0002, 'title': "My second document!"},
    ]
} 
```

所以我需要能够为新文档自动创建 ID，最好不要在应用程序级别（因为在实际开发场景中会有竞争条件）。

有没有办法使用 mongo 的自动生成的 ObjectId（在集合级别的 _id 字段中使用）或类似的东西？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-13T16:51:01.577

是的，使用 mongo 的 ObjectId 是要走的路。唯一的事情是：您必须在应用程序代码中自己生成它们。它们应该是全局唯一的，不同的工作人员不会生成两个相同的 ObjectId，因此在这个意义上不存在竞争条件。

所有官方驱动程序都应该提供一种生成 ObjectId 的方法。下面是它在 Ruby 中的表现：

```
oid = BSON::ObjectId.new 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-13T16:51:31.603

所有驱动程序都具有生成 ObjectId 的功能。

在外壳中，您只需执行以下操作`new ObjectId()`：

```
> db.test.insert({x:new ObjectId()});
> db.test.find();
{ "_id" : ObjectId("4f88592a06c05e4de90d0bc1"), "x" : ObjectId("4f88592a06c05e4de90d0bc0") } 
```

在 Java`new ObjectId()`中也是如此。请参阅您的驱动程序的 API 文档以查看特定语法。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-12-07T09:17:10.580

使用**mongoengine**在嵌入式文档中创建一个 ObjectId，如下所示：

```
from bson.objectid import ObjectId

class Address(EmbeddedDocument):
    _id = ObjectIdField( required=True, default=ObjectId )
    street = StringField() 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-25T06:00:12.253

在 Meteor 的服务器上，使用：

```
new Meteor.Collection.ObjectID(hexString); 
```

请参阅：[http ://docs.meteor.com/#collection_object_id](http://docs.meteor.com/#collection_object_id)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-06T22:27:32.903

这就是你如何在 python (pymongo) 中做到这一点：

```
from pymongo import MongoClient
import bson

client = MongoClient('mongodb://localhost:27017/')
db = client.test_db

result=db.users.insert_one({'name': 'jim',
    'documents': [
        {'_id': bson.objectid.ObjectId(), 'title': "My document"},
        {'_id': bson.objectid.ObjectId(), 'title': "My second document!"},
    ]})

print list(db.users.find({})) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-22T12:00:23.840

假设使用 congomongo，下面是如何在 Clojure 中执行此操作：

```
(import org.bson.types.ObjectId)
(str (ObjectId.)) ; => "12345xxxxx" 
```

# c# - 什么是 xsd 文件，它是模式文件还是数据集文件？

> ID：10144856
> 
> 赞同：1
> 
> 时间：2012-04-13T16:39:27.397
> 
> 标签：c#, xml, xsd, dataset

我知道 XSD 是用于验证 XML 的 xml 模式定义语言文件，就像 DTD 所做的那样，但现在我真的怀疑它是 xml 文件还是数据集文件？背后的原因是，我有 c# 项目包含木材数据.xsd，但是当我打开时，我可以看到很多数据表，这意味着那是数据集文件??。但实际上我所知道的 xsd 是用于验证 xml 的模式文件，当我检查我们的数据库时，`mydata.xml`我可以看到如下所示的条目

```
<?xml version="1.0" standalone="yes"?>
<timberdataSchema xmlns="http://tempuri.org/timberdata.xsd"> 
```

所以这个xml文件是模式文件我的意思是xsd文件还是我在我们的项目“timberdata.xsd”中看到的包含很多数据表所以数据集。

另一个问题是，当我检查属性时，`timberdata.xsd`我可以看到 Customtool 条目充满了“MSDataSetGenerator”，这是什么意思？我可以看到与“timberdata.xsd”一起，木材数据.xsc 和木材数据.xss 都是 xml 格式，即 xsd 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T16:44:15.290

XSD 始终是一个 XML 文件（XML 是一种格式，它没有定义任何关于数据是什么的内容）。

XSD 可以轻松定义父子关系和定义表所需的基本类型限制 - 因此可以用作数据库模式。“MSDataSetGenerator”是“自定义工具”，它在保存 XSD 时从 XSD 构建所需的任何文件/二进制文件。

这是自定义工具的说明 -[单文件生成器以及如何在](http://msdn.microsoft.com/en-us/library/bb166817.aspx)[注册单文件生成器](http://msdn.microsoft.com/en-us/library/bb166527.aspx)中注册MSDataSetGenerator 。

如果你愿意，XSD 也可以定义奇怪和复杂的东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:16:02.357

我想您是在询问文件扩展名。Windows 和 Unix 是相当古老的操作系统，没有任何与文件相关的可靠类型信息，因此它们试图从文件名的最后部分（和/或文件的前几个字节）猜测文件中的内容！）。但是文件扩展名只是约定俗成的问题；例如，没有标准的文件扩展名注册表，也没有什么可以阻止任何人创建扩展名为 .xml 且不包含 XML 的文件。因此，扩展名为 .xsd 的文件可以包含任何内容。

事实上，操作系统通常允许用户或系统管理员在文件扩展名和特定程序之间建立关联，因此您可以将 .xsd 扩展名与 XML Schema 处理器相关联。但是其他人可能会将相同的扩展名与“数据集文件处理器”（无论是什么）相关联，这两者都不是对的或错的。

# java - 从 Gherkin 语句中转义数字或带引号的字符串

> ID：10144860
> 
> 赞同：0
> 
> 时间：2012-04-13T16:39:47.737
> 
> 标签：java, cucumber, gherkin

如果我的功能定义中有这样的子句：

```
Then I can see the "/relative-url-path" page 
```

Cucumber 会强加这个方法：

```
@When("^I can see the \"([^\"]*)\" page$")
public void I_open_the_page(String arg1) {
    // Express the Regexp above with the code you wish you had
    throw new PendingException();
} 
```

如果我确实想用引号突出显示 URL 相关部分，我如何强制 gherkin 解析器将 THEN close 解释为“纯字符串”。换句话说，我能以某种方式逃避它吗？

如果我有号码，同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:22:56.597

首先，如果您使用 Ruby 进行步骤定义，我认为您的“何时”前面不应该有 @ 符号。这可能会给您带来问题（我不知道。）如果您不使用 Ruby，那么了解您在步骤定义中使用的语言会很有帮助。

我可以告诉你我对引号中的文件路径做了什么：

```
When I upload invoice "C:\Ruby193\automation\myfile.txt" 
```

然后我使用了这段代码：

```
When /^I upload invoice "(.*)"$/ do |filename|
  @upload_invoice_page = UploadInvoicePage.new(@test_env)
  @upload_invoice_page.upload_file(filename, 'BIRD, INC.')
end 
```

按照该示例，在 Ruby 中，我将为您的步骤尝试此代码：

```
When /^ can see the "(.*)" page$/ 
```

您的代码可能看起来像 Java，所以它可能看起来像：

```
@When("^I can see the \"(.*)\" page$") 
```

您可以在其中放置一个更复杂的 Regex，但由于它是 Gherkin 步骤，因此您并不需要它。看起来目前您正在尝试获取不是双引号的任何内容。您不需要这样做，因为 Regex 已经在寻找开放式和关闭式报价。

请记住，您也可以完全摆脱引号：

```
Then I can see the /relative-url-path page

@When("^I can see the (.*) page$") 
```

仅当您觉得它更易于阅读时才保留引号。有关正则表达式的更多信息

要仅匹配数字，您将执行以下操作：

```
Then I can see the 123456

@Then("^I can see the (\d*)$") 
```

我发现 Richard Lawrence 的[Cucumber Regex Cheatsheet](http://www.richardlawrence.info/wp-content/uploads/2011/08/Cucumber-Regular-Expressions-Cheat-Sheet.pdf)非常有帮助。你会在那里找到你需要的大部分模式。如果您需要更复杂的模式，您可以考虑是否最好在步骤定义代码中进行评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:55:21.863

根据讨论，听起来您想要一个[非捕获组](http://www.regular-expressions.info/refadv.html)。这将允许您指定任何 URL，但在实际步骤中完全忽略它（即它不作为参数传递）。

放在`?:`组的开头将使其成为非捕获组。

```
@When("^I can see the \"(?:[^\"]*)\" page$")
public void I_open_the_page() {
    // Express the Regexp above with the code you wish you had
    throw new PendingException();
} 
```

# iolanguage - io 赋值运算符不评估？

> ID：10144862
> 
> 赞同：3
> 
> 时间：2012-04-13T16:39:56.247
> 
> 标签：iolanguage

```
OperatorTable addAssignOperator(":", "myAssignMethod")
"foo" : "bar" 
```

这给出了一个错误，即序列不响应“：”（“：”仍被视为消息，而不是运算符）。

我认为它应该被评估为`myAssignMethod("foo", "bar")`（因为`"foo" = "bar"`成为`updateSlot("foo", "bar")`），但事实并非如此。然而：

```
OperatorTable addAssignOperator(":", "myAssignMethod")
doString("\"foo\" : \"bar\"") 
```

确实可以正常工作，`myAssignMethod`并被调用。`doString()`那么，在文件的主代码中工作期间，我如何获得代码上发生的任何处理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T04:11:01.843

`:`是一个有效的标识符，并且具有特殊的含义。它用于指示objective-c 绑定中的参数数量。强烈建议您选择其他运营商。

另请注意，所有运算符表修改必须在您使用它们加载和解析的文件之前完成，因为运算符改组发生在编译时（加载文件时）而不是评估时。REPL 隐藏了这个问题，因为每次你按回车时它都有一个新的编译。

此外，如果您想查看某些内容将被编译成什么（对操作员有用），请将其包装在`message()`调用中。即，`message(1 + 2)`将`1 +(2)`在 REPL 中产生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:33:42.020

原来这似乎是最近修复的 Mac 环境中的一个错误；我正在使用 Io 的 MacPorts 构建，环境的“20090105”版本有这个错误。在 Windows/Linux 二进制文件上运行相同的代码会产生预期的行为。

# php - 运行 SQL 存储过程时 PHP 页面超时并为空白

> ID：10144866
> 
> 赞同：1
> 
> 时间：2012-04-13T16:40:02.123
> 
> 标签：php, sql-server-2005, stored-procedures

我有一个调用 SQL 存储过程的 PHP 页面。该过程是一个插入语句，插入 40,000 条记录...

```
INSERT INTO CJFDEV.JDE_CRP.CRPDTA.F3002
SELECT * FROM F3002

SELECT 'HEY HEY' 
```

PHP 页面永远不会等到它完成……它会超时并只是打开一个空白页面。插入语句完成，但脚本永远不会继续显示“嘿嘿”。如果我将其修改为仅插入 19,000 条记录，它将完成并每次显示“嘿嘿”。我增加了 PHP.ini 和网络服务器本身的超时设置。我还增加了网络服务器内存设置。谢谢您的帮助！

# mysql - 在列之后添加新列并定义默认值

> ID：10144867
> 
> 赞同：5
> 
> 时间：2012-04-13T16:40:13.767
> 
> 标签：mysql, database, alter-table

我正在尝试在另一列之后添加一列，同时还指定默认值。以下是我的尝试，但不起作用。

```
alter table pageareas add content_userDefined BIT( 1 ) NULL default 0 after content; 
```

如果我删除“内容后”，它会起作用：

```
alter table pageareas add content_userDefined BIT( 1 ) NULL default 0; 
```

如果我删除“默认 0”，它会起作用：

```
alter table pageareas add content_userDefined BIT( 1 ) NULL after content; 
```

如何在指定列之后添加它，同时定义默认值？

我正在使用 MySql 5.1.36

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T16:55:24.653

如果这次我正确阅读了[文档`alter table`](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)...您只能指定`after`or `default`，但不能同时指定两者。您可以通过使用创建列来解决此问题`after`，然后将其更改为`default`：

```
alter table pageareas add content_userDefined BIT( 1 ) NULL after content;
alter table pageareas alter content_userDefined set default 0; 
```

# wpf - 如何使用 xaml 触发器或样式选择器根据可用空间调整控件的大小

> ID：10144868
> 
> 赞同：1
> 
> 时间：2012-04-13T16:40:14.030
> 
> 标签：wpf, xaml

我正在尝试制作一个按钮，该按钮的样式可以根据可用空间的多少来更改其布局以使其自身更小。

这些按钮将始终有一个堆栈面板，其中包含一个图像和一个文本块。我的目标是能够为这些按钮定义 3-4 种不同的样式，每种样式都会产生不同的按钮大小。

对于每个按钮图像，如果图像具有不同的分辨率，我有 4 个版本。16、32、48和64。这些图像存储在不同的文件夹中；即Images\Icons\16\Add.png 和Images\Icons\32\Add.png。这两张图是一样的，只是大小不同。我选择使用多种尺寸，因为我发现只有一张图像并缩放其尺寸会导致它相当模糊。

为了方便选择不同大小的图像，我创建了一个转换器，我在绑定图像源时使用它：

```
class ImagePathResolutionConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        Image sender = (Image)value;
        int imageSize = (parameter != null) ? (parameter is int) ? (int)parameter : (parameter is string) ? Int32.Parse((string)parameter) : 16 : 16;
        Uri returnImage = new Uri(String.Format(@"Images\Icons\{0}\{1}", imageSize, sender.Tag as string), UriKind.Relative);
        return returnImage;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

} 
```

绑定看起来像这样：

```
<Setter Property="Source" 
        Value="{Binding ., 
                Converter={StaticResource ImagePathResolutionConverter}, 
                RelativeSource={RelativeSource Self}, 
                ConverterParameter='16'}" 
/> 
```

使用此设置意味着我可以将 16、32、48 或 64 传递给 ConverterParameter，并且将返回适当的图像路径。

现在，对于这个例子，我有两种风格；

大的：

```
<!-- Big Button Container Style -->
<Style TargetType="Button" x:Key="MultiResButton_Big">
    <Setter Property="HorizontalAlignment" Value="Left" />
    <Setter Property="VerticalAlignment" Value="Top" />
    <Style.Resources>
        <!-- Button.StackPanel Style -->
        <Style TargetType="StackPanel">
            <Setter Property="Orientation" Value="Vertical" />
            <Style.Resources>
                <!-- Button.StackPanel.Image Style -->
                <Style TargetType="Image">
                    <Setter Property="Stretch" Value="None" />
                    <Setter Property="Margin" Value="5 2 5 0" />
                    <Setter Property="Source" Value="{Binding ., Converter={StaticResource ImagePathResolutionConverter}, RelativeSource={RelativeSource Self}, ConverterParameter='32'}" />
                </Style>
                <!-- Button.StackPanel.TextBlock Style -->
                <Style TargetType="TextBlock">
                    <Setter Property="Margin" Value="5 0 5 2" />
                </Style>
            </Style.Resources>
        </Style>
    </Style.Resources>
</Style> 
```

...和小

```
<!-- Small Button Container Style -->
<Style TargetType="Button" x:Key="MultiResButton_Small">
    <Setter Property="HorizontalAlignment" Value="Left" />
    <Setter Property="VerticalAlignment" Value="Top" />
    <Style.Resources>
        <!-- Button.StackPanel Style -->
        <Style TargetType="StackPanel">
            <Setter Property="Orientation" Value="Horizontal" />
            <Style.Resources>
                <!-- Button.StackPanel.Image Style -->
                <Style TargetType="Image">
                    <Setter Property="Stretch" Value="None" />
                    <Setter Property="Margin" Value="5 2" />
                    <Setter Property="Source" Value="{Binding ., Converter={StaticResource ImagePathResolutionConverter}, RelativeSource={RelativeSource Self}, ConverterParameter='16'}" />
                </Style>
                <!-- Button.StackPanel.TextBlock Style -->
                <Style TargetType="TextBlock">
                    <Setter Property="Margin" Value="0 5 2 5" />
                </Style>
            </Style.Resources>
        </Style>
    </Style.Resources>
</Style> 
```

这些按钮之一的 XAML 是：

```
<Button Style="{StaticResource ResourceKey=MultiResButton_Big}">
    <StackPanel>
        <Image Tag="Multi.png" />
        <TextBlock Text="Button Text" />
    </StackPanel>            
</Button> 
```

目前，我可以为其中一个或这些设置一个按钮，结果是一个大按钮或小按钮。现在我只需要弄清楚如何确定何时使用哪个，以及如何以编程方式使用。

在我看来，我有两个选择：将两种样式合并为一个并使用某种触发器，或者创建一个 styleSelector 类并让它选择要使用的样式。

我的问题是我不知道如何以编程方式确定要使用的样式。我发现当按钮被推到容器的可见范围之外时，“RenderSize.Width”设置为 0。我的问题是，当 5 个按钮在容器的可见边界之外时，将 5 设置为使用较小的样式将无济于事......我还必须为其他可见按钮使用较小的尺寸才能“制作”超出界限的 5 个房间。

我很乐意为容器中的所有按钮设置样式...当一个按钮 renderSize.Width = 0 时，将所有同级按钮降低到样式大小较低...

我正在尝试的甚至可能吗？我是否必须创建一个自定义容器才能覆盖所有子控件的呈现？如果可以的话，我宁愿避免这种情况......但我看不到任何其他可能的方式......

作为我正在尝试完成的示例，打开 Word 或 Excel 2007/2010，然后慢慢调整窗口大小以使其更小。当你这样做时，ribon 中的按钮会“收缩”以腾出更多空间。

对于我是否从正确的方向接近这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:04:49.413

您可以使用第二个转换器来绑定样式。

创建一个 IMultiValueConverter，它采用两个值，ActualWidth 和计算将基于的元素（在我的示例中，我使用的是 Window）：

```
class ImageButtonStyleSelectorConverter : IMultiValueConverter
{
    #region IMultiValueConverter Members

    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        Double actualWidth = values[0] as Double? ?? 0;
        FrameworkElement element = values[1] as FrameworkElement;

        if (element != null)
        {
            // perform calculations and return button size (using even/odd for illustration purposes)
            if (element.Width % 2 == 0)
            {
                return element.Resources["MultiResButton_Small"];
            }
            else
            {
                return element.Resources["MultiResButton_Big"];
            }
        }
        return Binding.DoNothing;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

然后，更改您的按钮以使用转换器选择样式：

```
 <Button>
            <Button.Style>
                <MultiBinding Converter="{StaticResource ImageButtonStyleSelectorConverter}"
                              FallbackValue="{StaticResource MultiResButton_Big}">
                    <Binding RelativeSource="{RelativeSource AncestorType=Window, Mode=FindAncestor}" Path="ActualWidth"/>
                    <Binding RelativeSource="{RelativeSource AncestorType=Window, Mode=FindAncestor}" Path="."/>
                </MultiBinding>
            </Button.Style>
            <StackPanel>
                <Image Tag="Multi.png" />
                <TextBlock Text="Button Text" />
            </StackPanel>
        </Button> 
```

我添加了 FallbackValue，否则我无法从设计视图中看到任何一种样式。

# python - 如何在 Neo4j python-embedded 中附加列表？

> ID：10144869
> 
> 赞同：4
> 
> 时间：2012-04-13T16:40:16.023
> 
> 标签：python, list, neo4j

我正在尝试使用这些文档在 Neo4j python-embedded 中制作图表：http: [//docs.neo4j.org/chunked/snapshot/python-embedded-reference-core.html](http://docs.neo4j.org/chunked/snapshot/python-embedded-reference-core.html) “允许的属性值包括字符串、数字、布尔值，以及这些原语的数组”。所以，我正在尝试构建一个字符串列表，然后附加该列表。

```
from neo4j import GraphDatabase
db = GraphDatabase('/home/username/Neo4j/')
with db.transaction:
    testNode = db.node()
    testNode['stringList'] = ["one","two"]
    string_list_edit = testNode['stringList']
    string_list_edit.append("three") 
```

给我这个错误：

```
AttributeError: 'java.lang.String[]' object has no attribute 'append' 
```

这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:46:22.183

好吧，错误说明了一切。该对象没有`append()`方法。

为什么？我的第一个想法是它是一个桥对象（“java.lang.String[]”是 Java 中的 String 数组类型）来处理 Java 和 Python 之间的转换，而不是真正的 Python 列表。试着把它列个清单

```
string_list_edit = list(testNode['stringList'])
string_list_edit.append("three") 
```

希望设置它仍然以相同的方式工作。

我认为这*与 Python 中的 append 不太*`+=`一样——当你不使用列表时，我相信字面意思是或者我可以看到使用奇怪的桥对象。*`+=``string_list_edit = string_list_edit + "three"``string_list_edit = string_list_edit + ["three"]`*

 *确认桥梁对象理论的一种简单方法 - 尝试 a`print type(testNode['stringList'])`或类似的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:18:07.383

如果您粘贴所有代码，则可以评估它是否存在其他错误。查看文档：[http ://docs.neo4j.org/chunked/snapshot/python-embedded-reference-core.html](http://docs.neo4j.org/chunked/snapshot/python-embedded-reference-core.html)

你包括吗？

```
with db.transactions: 
```

在你的代码之前？你必须这样做。另外，试试这个：

```
testNode['stringList'] = ["one","two"]
string_list_edit = testNode['stringList']
string_list_edit.append("three")
testNode['stringList'] = string_list_edit 
```*

# c# - 从 MySQL 数据库获取图像 - C#

> ID：10144870
> 
> 赞同：1
> 
> 时间：2012-04-13T16:40:18.393
> 
> 标签：c#, mysql, database

我必须在 MySQL 数据库中存储和恢复图像。为此，我使用了此页面上给出的说明：[MySQL Forum](http://forums.mysql.com/read.php?47,223360,226759#msg-226759)，我可以通过以下代码成功存储图像：

**保存图片：**

```
 void SaveImage()
    {
        MemoryStream ms = new MemoryStream();
        pictureBox1.Image.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
        cmd = new MySqlCommand("INSERT INTO " + tableName + " ( Product, Manufacturer, Description, Price, Image) Values ('New_Product', 'New_Manufacturer', 'New_Description', '0', @Image)", conn);
        cmd.Parameters.Add(new MySqlParameter("@Image", Convert.ToBase64String(ms.ToArray())));
        cmd.ExecuteNonQuery();
    } 
```

但我无法从数据库中**获取**图像：我正在使用以下代码，请检查这里有什么问题：

**获取缩略图：**

```
 void GetThumbnail()
     {
        string TN = tableNames[comboBox1.SelectedIndex];
        cmd = new MySqlCommand("SELECT Image FROM " + tableName + " WHERE Product = " + ProductTitle(), conn);
        object imgObj = cmd.ExecuteScalar();
        byte[] b = Convert.FromBase64String(Convert.ToString(imgObj));
        MemoryStream ms = new MemoryStream(b);
        pictureBox2.Image = Image.FromStream(ms);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T16:57:35.953

如何将图像存储到二进制字段中？它比 Base64 编码更有意义：

```
void SaveImage(byte[] image)
{
    using (var conn = new MySqlConnection(ConnectionString))
    using (var cmd = conn.CreateCommand())
    {
        cmd.CommandText = "INSERT INTO pictures (Product, Manufacturer, Description, Price, Image) VALUES ('New_Product', 'New_Manufacturer', 'New_Description', '0', ?Image)";
        cmd.Parameters.Add("?Image", image);
        cmd.ExecuteNonQuery();    
    }
}

byte[] GetImage(string product)
{
    using (var conn = new MySqlConnection(ConnectionString))
    using (var cmd = conn.CreateCommand())
    {
        cmd.CommandText = "SELECT Image FROM pictures WHERE Product = ?product";
        cmd.Parameters.Add("?product", product);
        using (var reader = cmd.ExecuteReader())
        {
            if (!reader.Read())
            {
                return null;
            }

            const int CHUNK_SIZE = 2 * 1024;
            byte[] buffer = new byte[CHUNK_SIZE];
            long bytesRead;
            long fieldOffset = 0;
            using (var stream = new MemoryStream())
            {
                while ((bytesRead = reader.GetBytes(reader.GetOrdinal("Image"), fieldOffset, buffer, 0, buffer.Length)) > 0)
                {
                    stream.Write(buffer, 0, (int)bytesRead);
                    fieldOffset += bytesRead;
                }
                return stream.ToArray();
            }
        }
    }
} 
```

接着：

```
using (var ms = new MemoryStream())
{
    pictureBox1.Image.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
    SaveImage(ms.ToArray());
} 
```

当你想检索时：

```
byte[] image = GetImage("New_Product");
MemoryStream stream = new MemoryStream(image);
pictureBox2.Image = Image.FromStream(ms); 
```

# file - 使用 TCOM 使用变量存储 csv 文件

> ID：10144872
> 
> 赞同：2
> 
> 时间：2012-04-13T16:40:21.560
> 
> 标签：file, tcl

我想使用 TCOM 中变量的值保存 csv 文件。

这是我使用硬编码值 test1.csv 保存它的方法，效果很好。

```
 $workbook SaveAs {c:\test\test1.csv} $XlFileFormat(xlCSV) 
```

但是当我想用一个类似于的变量的值来保存它时

```
 $workbook SaveAs {c:\test\$testname.csv} $XlFileFormat(xlCSV) 
```

我得到错误或者我只是得到名为 $testname.csv 的文件，但不是变量的值。这该怎么做。？我什至试过 ${testname}，这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T16:44:13.133

将 somethnig 括在[大括号](http://www.tcl.tk/man/tcl8.4/TclCmd/Tcl.htm#M9)中意味着几乎不执行替换。取下大括号并执行类似的操作`$workbook SaveAs "C:/test/$testname.csv" $XlFileFormat(xlCSV)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:53:52.823

试试这个

```
$workbook SaveAs "c:\test\${testname.csv}" $XlFileFormat(xlCSV) 
```

# visual-studio-2010 - VS2010 - 进入 .NET 源代码

> ID：10144873
> 
> 赞同：1
> 
> 时间：2012-04-13T16:40:30.897
> 
> 标签：visual-studio-2010, debugging

有没有人能够使用 VS 2010 SP1 实现这一点？

我已经尝试过以下说明：

[http://msdn.microsoft.com/en-us/library/x54fht41.aspx](http://msdn.microsoft.com/en-us/library/x54fht41.aspx)

[http://referencesource.microsoft.com/serversetup.aspx](http://referencesource.microsoft.com/serversetup.aspx)

[http://blogs.microsoft.co.il/blogs/arik/archive/2010/07/12/step-into-net-framework-4-0-source-code.aspx](http://blogs.microsoft.co.il/blogs/arik/archive/2010/07/12/step-into-net-framework-4-0-source-code.aspx)

[http://referencesource.microsoft.com/troubleshooting.aspx](http://referencesource.microsoft.com/troubleshooting.aspx)

这非常令人沮丧。

更新（更多信息）：

我的调试测试代码如下所示：

```
private void TestSymbolDebugging()
{
     string myValue = this.txtData.Text;
} 
```

并且断点设置在方法中唯一的代码行上。

如果我只是 F11 （进入）它会跳过该行而没有错误，但它也不会破坏任何东西。

如果我右键单击并选择“Step into specific”，我可以选择 System.Windows.Forms.get_Text。这让我没有可用的源窗口。

我选中了“启用 .NET Framework 源单步执行”。

我未选中“跳过属性和运算符（仅限托管）”。

我有'启用源服务器支持

我选中了“要求源文件与原始版本完全匹配”。

在模块窗口中，我显示 System.Windows.Forms 程序集已加载。

# php - PHP 'IN' 查询仅返回 1 行

> ID：10144878
> 
> 赞同：1
> 
> 时间：2012-04-13T16:40:50.827
> 
> 标签：php, arrays, implode

谁能解释我为什么最后一个查询总是返回 1 行。它应该返回超过 1，因为数据库中有很多记录！

对不起，我的英语不好

```
 $query=mysql_query("SELECT book_id FROM ".DB_PREF."books_cats_list WHERE cat_id='".$cat."'");
            if($row=mysql_num_rows($query))
            {

                //fetching all books from $cat category
                for($i=0; $fetch=mysql_fetch_assoc($query); $i++)
                {
                    $records[$i]=$fetch['book_id'];
                }

                //Joining all records in a string for next query
                $records=implode(",",$records);

                //returning num rows if there're book_id records in $records array
                $query=mysql_query("SELECT * FROM ".DB_PREF."books WHERE book_id IN ('".$records."')");
                $rows=mysql_num_rows($query);
                echo $rows; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T16:43:50.047

您的查询将如下所示：

```
SELECT * FROM books WHERE book_id IN ('2,3,4,5') 
```

注意在里面`IN`，它都是一个字符串。这一个字符串将被转换为一个 int。这发生在第一个非数字字符处停止。因此，查询变为：

```
SELECT * FROM books WHERE book_id IN (2) 
```

尝试删除`IN`.

注意：如果您的值不是整数，请尝试将 更改`implode`为：`implode("','",$records)`，并将引号保留在`IN`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:49:26.103

快速浏览一下，我建议使用 for 循环：

```
for($i=0; $fetch=mysql_fetch_assoc($query); $i++) 
```

应该是一个while循环：

```
while($fetch=mysql_fetch_assoc($query)) 
```

我希望它只用那个 for 循环代码做一个记录。

但是我建议你做一个左连接选择

```
SELECT * FROM books_cats_list as cat
left join books as book on cat.book_id = book.book_id
WHERE cat.cat_id='$cat' 
```

就我期望的数据库性能而言，这将更加优化。

# php - 带有奇怪字符的 PHP 中的 mail() 函数

> ID：10144886
> 
> 赞同：0
> 
> 时间：2012-04-13T16:41:19.943
> 
> 标签：php, javascript, jquery, ajax, email

我正在使用 php 邮件功能，它工作得很好，我真的不喜欢使用这个功能，但必须为此做。

所以问题是，特殊的欧洲字符在电子邮件中以一种有趣的方式显示，我试图将编码设置为 iso-8859-1，同样的情况正在发生：

```
$to = $eemail;
$subject = $campos[4];
$message = $campos[5];
$message = mb_convert_encoding($message, 'HTML-ENTITIES', 'iso-8859-1');
$from = $campos[1];
$headers = "From:".$from."\r\n";

$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
$headers .= "X-Priority: 3\r\n";
$headers .= "X-Mailer: PHP". phpversion() ."\r\n"; 
```

剩下的是一个基本的邮件表单，通过 AJAX 发送：

```
$(function() {  
  $(".submita").click(function() {        
      var nome = $('#nome').attr('value');
      var email = $('#email').attr('value');
      var telemovel = $('#telemovel').attr('value');
      var loja = $('#loja').attr('value');
      var assunto = $('#assunto').attr('value');
      var mensagem = $('#mensagem').attr('value');

      var dataString = 'nome='+ nome + '&email=' + email + '&telemovel=' + telemovel + '&loja=' + loja + '&assunto=' + assunto + '&mensagem=' + mensagem;
      $.ajax({
    type: "POST",
    url: "ajaxload/conemail.php",
    data: dataString,
    success: function() {
        $(".mensagem").fadeIn();
      }
      });
      return false;
  }); 
}); 
```

出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:46:46.860

chk 这个链接来自 php.net

```
http://php.net/manual/en/function.mail.php 
```

希望这会有所帮助，这是我给出的 php.net 页面中的小内容

```
Sending messages with polish special characters:
<?php
function plmail($mail, $sub, $mes){
    $headers = "From: ExRobot <robot@example.com>\r\n";
    $headers .= "MIME-Version: 1.0\r\n"; 
    $headers .= "Content-type: text/plain; charset=utf-8\r\n";
    $headers .="Content-Transfer-Encoding: 8bit";

    $mes=htmlspecialchars_decode($mes,ENT_QUOTES);//optional - I use encoding to POST data
    mail($mail, "=?utf-8?B?".base64_encode($sub)."?=", $mes, $headers);
}
?>
Page must be in utf-8 encoding. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:50:56.087

如果您的编码或“编码”跨平台（即消息/电子邮件、表单、网络浏览器等）不同，您将得到奇怪的结果......

大多数时候你会想要使用 utf-8

编辑，如果您无法摆脱使用 utf-8，但可以控制显示消息的页面，您可以设置元标记

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
```

# networking - 网络输出在 LUA 脚本中不起作用——Conky

> ID：10144889
> 
> 赞同：0
> 
> 时间：2012-04-13T16:41:29.843
> 
> 标签：networking, lua, conky

对于熟悉**Conky**的人来说，这应该更有意义。

我正在尝试获取以下 Lua 脚本来实际显示“NET”环的值。我知道代码在**Conky**本身的脚本之外工作，因为运行`conky -t '${downspeedf wlan0}'`输出一个可接受的值。我也知道`conky_parse`下面代码中的位有效，因为所有其他环都运行良好。为什么它不将值输出为数字（在环的中心）或作为环本身？

（我删掉了一些不相关的东西，以便适合这个问题。）

```
-------------------------------------------------------------------------------
--                                                              draw_gauge_ring
-- display gauges
--
function draw_gauge_ring(data)
    local value = data.value
    local value_max = data.value_max
    local x, y = data.x, data.y
    local graph_radius = data.graph_radius
    local graph_thickness, graph_unit_thickness = data.graph_thickness, data.graph_unit_thickness
    local graph_start_angle = data.graph_start_angle
    local graph_unit_angle = data.graph_unit_angle
    local graph_bg_colour, graph_bg_alpha = data.graph_bg_colour, data.graph_bg_alpha
    local graph_fg_colour, graph_fg_alpha = data.graph_fg_colour, data.graph_fg_alpha
    local hand_fg_colour, hand_fg_alpha = data.hand_fg_colour, data.hand_fg_alpha
    local graph_end_angle = (value_max * graph_unit_angle) % 360

    if value == nil then value=0  end

    -- background ring
    cairo_arc(cr, x, y, graph_radius, angle_to_position(graph_start_angle, 0), angle_to_position(graph_start_angle, graph_end_angle))
    cairo_set_source_rgba(cr, rgb_to_r_g_b(graph_bg_colour, graph_bg_alpha))
    cairo_set_line_width(cr, graph_thickness)
    cairo_stroke(cr)

    -- arc of value
    local val = value % (value_max + 1)
    local start_arc = 0
    local stop_arc = 0
    local i = 1
    while i <= val do
        start_arc = (graph_unit_angle * i) - graph_unit_thickness
        stop_arc = (graph_unit_angle * i)
        cairo_arc(cr, x, y, graph_radius, angle_to_position(graph_start_angle, start_arc), angle_to_position(graph_start_angle, stop_arc))
        cairo_set_source_rgba(cr, rgb_to_r_g_b(graph_fg_colour, graph_fg_alpha))
        cairo_stroke(cr)
        i = i + 1
    end
    local angle = start_arc

    -- hand
    start_arc = (graph_unit_angle * val) - (graph_unit_thickness * 2)
    stop_arc = (graph_unit_angle * val)
    cairo_arc(cr, x, y, graph_radius, angle_to_position(graph_start_angle, start_arc), angle_to_position(graph_start_angle, stop_arc))
    cairo_set_source_rgba(cr, rgb_to_r_g_b(hand_fg_colour, hand_fg_alpha))
    cairo_stroke(cr)

    -- graduations marks
    local graduation_radius = data.graduation_radius
    local graduation_thickness, graduation_mark_thickness = data.graduation_thickness, data.graduation_mark_thickness
    local graduation_unit_angle = data.graduation_unit_angle
    local graduation_fg_colour, graduation_fg_alpha = data.graduation_fg_colour, data.graduation_fg_alpha
    if graduation_radius > 0 and graduation_thickness > 0 and graduation_unit_angle > 0 then
        local nb_graduation = graph_end_angle / graduation_unit_angle
        local i = 0
        while i < nb_graduation do
            cairo_set_line_width(cr, graduation_thickness)
            start_arc = (graduation_unit_angle * i) - (graduation_mark_thickness / 2)
            stop_arc = (graduation_unit_angle * i) + (graduation_mark_thickness / 2)
            cairo_arc(cr, x, y, graduation_radius, angle_to_position(graph_start_angle, start_arc), angle_to_position(graph_start_angle, stop_arc))
            cairo_set_source_rgba(cr,rgb_to_r_g_b(graduation_fg_colour,graduation_fg_alpha))
            cairo_stroke(cr)
            cairo_set_line_width(cr, graph_thickness)
            i = i + 1
        end
    end

    -- text
    local txt_radius = data.txt_radius
    local txt_weight, txt_size = data.txt_weight, data.txt_size
    local txt_fg_colour, txt_fg_alpha = data.txt_fg_colour, data.txt_fg_alpha
    local movex = txt_radius * math.cos(angle_to_position(graph_start_angle, angle))
    local movey = txt_radius * math.sin(angle_to_position(graph_start_angle, angle))
    cairo_select_font_face (cr, "ubuntu", CAIRO_FONT_SLANT_NORMAL, txt_weight)
    cairo_set_font_size (cr, txt_size)
    cairo_set_source_rgba (cr, rgb_to_r_g_b(txt_fg_colour, txt_fg_alpha))
    cairo_move_to (cr, x + movex - (txt_size / 2), y + movey + 3)
    cairo_show_text (cr, value)
    cairo_stroke (cr)

    -- caption
    local caption = data.caption
    local caption_weight, caption_size = data.caption_weight, data.caption_size
    local caption_fg_colour, caption_fg_alpha = data.caption_fg_colour, data.caption_fg_alpha
    local tox = graph_radius * (math.cos((graph_start_angle * 2 * math.pi / 360)-(math.pi/2)))
    local toy = graph_radius * (math.sin((graph_start_angle * 2 * math.pi / 360)-(math.pi/2)))
    cairo_select_font_face (cr, "ubuntu", CAIRO_FONT_SLANT_NORMAL, caption_weight);
    cairo_set_font_size (cr, caption_size)
    cairo_set_source_rgba (cr, rgb_to_r_g_b(caption_fg_colour, caption_fg_alpha))
    cairo_move_to (cr, x + tox + 5, y + toy + 3)
    -- bad hack but not enough time !
    if graph_start_angle < 105 then
        cairo_move_to (cr, x + tox - 30, y + toy + 1)
    end
    cairo_show_text (cr, caption)
    cairo_stroke (cr)
end

-------------------------------------------------------------------------------
--                                                                    draw_ring
-- simple rings
--
function draw_ring(data)

    local value = data.value
    local value_max = data.value_max
    local bgc = data.bg_colour
    local bga = data.bg_alpha
    local fgc = data.fg_colour
    local fga = data.fg_alpha
    local xc, yc = data.x, data.y
    local radius = data.radius
    local thickness = data.thickness
    local sa = data.start_angle
    local ea = data.end_angle
    local lr = data.lr
    if value == nil then value=0  end
    local pct = value/value_max

    local angle_0 = sa * math.pi/180 - math.pi/2
    local angle_f = ea * math.pi/180 - math.pi/2
    local pct_arc = pct * (angle_f - angle_0)

    -- Draw background ring
    cairo_arc(cr, xc, yc, radius, angle_0, angle_f)
    cairo_set_source_rgba(cr, rgb_to_r_g_b(bgc, bga))
    cairo_set_line_width(cr, thickness)
    cairo_stroke(cr)

    -- Draw indicator ring
    cairo_arc(cr, xc, yc, radius, angle_0, angle_0 + pct_arc)
    cairo_set_source_rgba(cr, rgb_to_r_g_b(fgc, fga))
    cairo_stroke(cr)
end

-------------------------------------------------------------------------------
--                                                              draw_gauge_bars
-- display gauge
--
function draw_gauge_bars(data)
    local x=data.x
    local y=data.y
    local divisions=data.divisions
    local div_width=data.div_width
    local div_height=data.div_height
    local div_gap=data.div_gap
    local br,bg,bb,ba=rgb_to_r_g_b(data.bg_color, data.bg_alpha)
    local sr,sg,sb,sa=rgb_to_r_g_b(data.st_color, data.fg_alpha)
    local mr,mg,mb,ma=rgb_to_r_g_b(data.mid_color, data.fg_alpha)
    local er,eg,eb,ea=rgb_to_r_g_b(data.end_color, data.fg_alpha)

    if data.value==nil then value=0 else value=data.value end

    local value_max=data.value_max
    local value_divs=(value/value_max)*divisions

    cairo_set_line_width (cr,div_width)

    for i=1,divisions do
        if i<(divisions/2) and i<=value_divs then
            colr=((mr-sr)*(i/(divisions/2)))+sr
            colg=((mg-sg)*(i/(divisions/2)))+sg
            colb=((mb-sb)*(i/(divisions/2)))+sb
            cola=((ma-sa)*(i/(divisions/2)))+sa
        elseif i>=(divisions/2) and i<=value_divs then
            colr=((er-mr)*((i-(divisions/2))/(divisions/2)))+mr
            colg=((eg-mg)*((i-(divisions/2))/(divisions/2)))+mg
            colb=((eb-mb)*((i-(divisions/2))/(divisions/2)))+mb
            cola=((ea-ma)*((i-(divisions/2))/(divisions/2)))+ma
        else
            colr=br
            colg=bg
            colb=bb
            cola=ba
        end

        cairo_set_source_rgba (cr,colr,colg,colb,cola)
        if data.orientation == "horizontal" then
            cairo_move_to (cr,x+((div_width+div_gap)*i-1),y)
        else
            cairo_move_to (cr,x,y-((div_width+div_gap)*i-1))
        end
        cairo_rel_line_to (cr,0,div_height)
        cairo_stroke (cr)
    end
end--function bars

-------------------------------------------------------------------------------
--                                                                         MAIN
function conky_main(color, theme, drawbg, unit, area_code, posfix)

    if conky_window == nil then return end

    local cs = cairo_xlib_surface_create(conky_window.display, conky_window.drawable, conky_window.visual, conky_window.width, conky_window.height)

    cr = cairo_create(cs)

    local updates=tonumber(conky_parse('${updates}'))
    if updates>5 then

    -- BACKGROUND COLOR
    if color == "white" then
        bgc = 0xffffff
        bga = 0.4
    else
        bgc = 0x1e1c1a
        bga = 0.8
    end

    local theme = ("0x" .. theme)
    local w = conky_window.width
    local h = conky_window.height
    local hori_space = w*0.07
    local vert_space = h*0.5
    local xp = hori_space
    local yp = vert_space

    -- BACKGROUND
    if drawbg == "on" then
    settings={
        x=0-1    , y=0 ,
        w=w+1    , h=h ,
        border=1 ,
        colour={{0,bgc,0.2},},
    };draw_box(settings)
    settings={
        x=0-1 , y=0 ,
        w=w+1 , h=h ,
        colour={{0.5,bgc,bga},{1,bgc,bga-0.1},},
        linear_gradient={0,0,w/2,h/2},
    };draw_box(settings)
    end

    -- APPEARANCE
    if color == "white" then
        bgc = 0x1e1c1a
        fgc = 0x1e1c1a
        bga = 0.15
        fga = 0.8
    else
        bgc = 0xffffff
        fgc = 0xffffff
        bga = 0.1
        fga = 0.8
    end

    settings = {--HOUR
        txt="88:88",
        x=(w/2)-140             , y=50          ,
        txt_weight=1        , txt_size=50,
        txt_fg_colour=fgc , txt_fg_alpha=bga ,
        font = "Digital Readout Thick Upright"
    };display_text(settings)
    settings = {--HOUR
        txt=conky_parse("${time %H:}"),
        x=(w/2)-140            , y=50          ,
        txt_weight=1        , txt_size=50,
        txt_fg_colour=theme , txt_fg_alpha=fga ,
        font = "Digital Readout Thick Upright"
    };display_text(settings)
    settings = {--MINUTES
        txt=conky_parse("${time %M}"),
        x=(w/2)-78             , y=50          ,
        txt_weight=1        , txt_size=50 ,
        txt_fg_colour=theme , txt_fg_alpha=fga ,
        font = "Digital Readout Thick Upright"
    };display_text(settings)

    if unit =='f' then
        unitChar = 'F°'
    else
        unitChar = 'C°'
    end

    settings = {--DAY TEMP
        txt="Temp: " .. get_yahoo_weather_info("cur", area_code, unit) .. unitChar,
        x=(w/2)+60               , y=20            ,
        txt_weight=0        , txt_size=12 ,
        txt_fg_colour=fgc , txt_fg_alpha=fga    ,
    };display_text(settings)
    settings = {--DATA
        txt=conky_parse("${time %d}") .. " " .. conky_parse("${time %b}") .. " " .. conky_parse("${time %Y}"),
        x=(w/2)+60               , y=35            ,
        txt_weight=0        , txt_size=12 ,
        txt_fg_colour=theme , txt_fg_alpha=fga    ,
    };display_text(settings)
    settings = {--NAME WEEK
        txt=conky_parse("${time %A}"),
        x=(w/2)+60               , y=48           ,
        txt_weight=0        , txt_size=12 ,
        txt_fg_colour=fgc , txt_fg_alpha=fga    ,
    };display_text(settings)

    settings = {--DAYS GRAPH
        value=tonumber(conky_parse("${time %d}")),
        value_max=31               ,
        x=w/2                     , y=yp                        ,
        graph_radius=33            ,
        graph_thickness=5          ,
        graph_start_angle=215      ,
        graph_unit_angle=3.6       , graph_unit_thickness=2.6    ,
        graph_bg_colour=bgc        , graph_bg_alpha=bga          ,
        graph_fg_colour=theme      , graph_fg_alpha=fga          ,
        hand_fg_colour=theme       , hand_fg_alpha=0.0           ,
        txt_radius=42              ,
        txt_weight=1               , txt_size=8.0                ,
        txt_fg_colour=fgc          , txt_fg_alpha=fga            ,
        graduation_radius=28       ,
        graduation_thickness=0     , graduation_mark_thickness=1 ,
        graduation_unit_angle=27   ,
        graduation_fg_colour=theme , graduation_fg_alpha=0.4     ,
        caption=''                 ,
        caption_weight=1           , caption_size=10.0           ,
        caption_fg_colour=fgc      , caption_fg_alpha=fga        ,
    };draw_gauge_ring(settings)

    settings = {--MONTHS GRAPH
        value=tonumber(conky_parse("${time %m}")),
        value_max=12               ,
        x=w/2                     , y=yp                        ,
        graph_radius=33            ,
        graph_thickness=5          ,
        graph_start_angle=34       ,
        graph_unit_angle=9.2       , graph_unit_thickness=8.2    ,
        graph_bg_colour=bgc        , graph_bg_alpha=bga          ,
        graph_fg_colour=theme      , graph_fg_alpha=fga          ,
        hand_fg_colour=theme       , hand_fg_alpha=0.0           ,
        txt_radius=42              ,
        txt_weight=1               , txt_size=8.0                ,
        txt_fg_colour=fgc          , txt_fg_alpha=fga            ,
        graduation_radius=28       ,
        graduation_thickness=0     , graduation_mark_thickness=1 ,
        graduation_unit_angle=27   ,
        graduation_fg_colour=theme , graduation_fg_alpha=0.3     ,
        caption=''                 ,
        caption_weight=1           , caption_size=10.0           ,
        caption_fg_colour=fgc      , caption_fg_alpha=fga        ,
    };draw_gauge_ring(settings)

    settings = {--SECONDS
        value=tonumber(conky_parse("${time %S}")),
        value_max = 60    ,
        x = w/2          , y = yp          ,
        bg_colour = bgc   , bg_alpha = bga  ,
        fg_colour = theme , fg_alpha = fga  ,
        radius =25        , thickness = 10  ,
        start_angle = 0   , end_angle = 360 ,
        lr = 0            ,
    };draw_ring(settings)

    settings = {--CLOCK HANDS
        xc = w/2          ,
        yc = yp          ,
        colour = bgc     ,
        alpha = 1        ,
        show_secs = true ,
        size = 40        ,
    };clock_hands(settings)

    xp = ((w/2)/2.6) - posfix
    settings = {--CPU GRAPH CPU1
        value=tonumber(conky_parse("${cpu cpu1}")),
        value_max=100              ,
        x=xp                       , y=yp                        ,
        graph_radius=22            ,
        graph_thickness=5          ,
        graph_start_angle=180      ,
        graph_unit_angle=2.7       , graph_unit_thickness=2.7    ,
        graph_bg_colour=bgc        , graph_bg_alpha=bga          ,
        graph_fg_colour=theme      , graph_fg_alpha=fga          ,
        hand_fg_colour=theme       , hand_fg_alpha=0.0           ,
        txt_radius=35              ,
        txt_weight=1               , txt_size=8.0                ,
        txt_fg_colour=fgc          , txt_fg_alpha=fga            ,
        graduation_radius=28       ,
        graduation_thickness=0     , graduation_mark_thickness=1 ,
        graduation_unit_angle=27   ,
        graduation_fg_colour=theme , graduation_fg_alpha=0.3     ,
        caption='CPU'              ,
        caption_weight=1           , caption_size=10.0           ,
        caption_fg_colour=fgc      , caption_fg_alpha=fga        ,
    };draw_gauge_ring(settings)

    settings = {--CPU GRAPH CPU2
        value=tonumber(conky_parse("${cpu cpu2}")) ,
        value_max=100              ,
        x=xp                       , y=yp                        ,
        graph_radius=17            ,
        graph_thickness=5          ,
        graph_start_angle=180      ,
        graph_unit_angle=2.7       , graph_unit_thickness=2.7    ,
        graph_bg_colour=bgc        , graph_bg_alpha=bga          ,
        graph_fg_colour=theme      , graph_fg_alpha=fga          ,
        hand_fg_colour=theme       , hand_fg_alpha=0.0           ,
        txt_radius=0               ,
        txt_weight=1               , txt_size=8.0                ,
        txt_fg_colour=fgc          , txt_fg_alpha=fga            ,
        graduation_radius=28       ,
        graduation_thickness=0     , graduation_mark_thickness=1 ,
        graduation_unit_angle=27   ,
        graduation_fg_colour=theme , graduation_fg_alpha=0.3     ,
        caption=''                 ,
        caption_weight=1           , caption_size=10.0           ,
        caption_fg_colour=fgc      , caption_fg_alpha=fga        ,
    };draw_gauge_ring(settings)

    xp = xp + hori_space
    settings = {--MEMPERC GRAPH
        value=tonumber(conky_parse("${memperc}")),
        value_max=100              ,
        x=xp                       , y=yp                        ,
        graph_radius=22            ,
        graph_thickness=5          ,
        graph_start_angle=180      ,
        graph_unit_angle=2.7       , graph_unit_thickness=2.7    ,
        graph_bg_colour=bgc        , graph_bg_alpha=bga          ,
        graph_fg_colour=theme      , graph_fg_alpha=fga          ,
        hand_fg_colour=theme       , hand_fg_alpha=0.0           ,
        txt_radius=0               ,
        txt_weight=1               , txt_size=8.0                ,
        txt_fg_colour=fgc          , txt_fg_alpha=fga            ,
        graduation_radius=22       ,
        graduation_thickness=4     , graduation_mark_thickness=2 ,
        graduation_unit_angle=27   ,
        graduation_fg_colour=theme , graduation_fg_alpha=0.5     ,
        caption='MEM'              ,
        caption_weight=1           , caption_size=10.0           ,
        caption_fg_colour=fgc      , caption_fg_alpha=fga        ,
    };draw_gauge_ring(settings)

    xp = xp + hori_space
    settings = {--SWAP FILESYSTEM USED GRAPH
        value=tonumber(conky_parse("${swapperc}")),
        value_max=100              ,
        x=xp                       , y=yp                        ,
        graph_radius=22            ,
        graph_thickness=5          ,
        graph_start_angle=180      ,
        graph_unit_angle=2.7       , graph_unit_thickness=2.7    ,
        graph_bg_colour=bgc        , graph_bg_alpha=bga          ,
        graph_fg_colour=theme      , graph_fg_alpha=fga          ,
        hand_fg_colour=theme       , hand_fg_alpha=0.0           ,
        txt_radius=0               ,
        txt_weight=1               , txt_size=8.0                ,
        txt_fg_colour=fgc          , txt_fg_alpha=fga            ,
        graduation_radius=22       ,
        graduation_thickness=4     , graduation_mark_thickness=2 ,
        graduation_unit_angle=27   ,
        graduation_fg_colour=theme , graduation_fg_alpha=0.5     ,
        caption='SWAP'             ,
        caption_weight=1           , caption_size=10.0           ,
        caption_fg_colour=fgc      , caption_fg_alpha=fga        ,
    };draw_gauge_ring(settings)

    xp = w/2 + 170
    disks = {'/', '/home'}
    disksLabel = {'ROOT', 'HOME'}
    for i, partitions in ipairs(disks) do
        settings = {--ROOT FILESYSTEM USED GRAPH
            value=tonumber(conky_parse("${fs_used_perc " .. partitions .. "}")),
            value_max=100              ,
            x=xp                       , y=yp                        ,
            graph_radius=22            ,
            graph_thickness=5          ,
            graph_start_angle=180      ,
            graph_unit_angle=2.7       , graph_unit_thickness=2.7    ,
            graph_bg_colour=bgc        , graph_bg_alpha=bga          ,
            graph_fg_colour=theme      , graph_fg_alpha=fga          ,
            hand_fg_colour=theme       , hand_fg_alpha=0.0           ,
            txt_radius=0               ,
            txt_weight=1               , txt_size=8.0                ,
            txt_fg_colour=fgc          , txt_fg_alpha=fga            ,
            graduation_radius=23       ,
            graduation_thickness=0     , graduation_mark_thickness=2 ,
            graduation_unit_angle=27   ,
            graduation_fg_colour=theme , graduation_fg_alpha=0.5     ,
            caption=disksLabel[i]      ,
            caption_weight=1           , caption_size=10.0           ,
            caption_fg_colour=fgc      , caption_fg_alpha=fga        ,
        };draw_gauge_ring(settings)
    end

    xp = xp + hori_space
    settings = {--NETWORK GRAPH DOWN
        value=tonumber(conky_parse("${downspeedf wlan0}")),
        value_max=100              ,
        x=xp                       , y=yp                        ,
        graph_radius=22            ,
        graph_thickness=5          ,
        graph_start_angle=180      ,
        graph_unit_angle=2.7       , graph_unit_thickness=2.7    ,
        graph_bg_colour=bgc        , graph_bg_alpha=bga          ,
        graph_fg_colour=theme      , graph_fg_alpha=fga          ,
        hand_fg_colour=theme       , hand_fg_alpha=0.0           ,
        txt_radius=35              ,
        txt_weight=1               , txt_size=8.0                ,
        txt_fg_colour=fgc          , txt_fg_alpha=fga            ,
        graduation_radius=28       ,
        graduation_thickness=0     , graduation_mark_thickness=1 ,
        graduation_unit_angle=27   ,
        graduation_fg_colour=theme , graduation_fg_alpha=0.3     ,
        caption='NET'              ,
        caption_weight=1           , caption_size=10.0           ,
        caption_fg_colour=fgc      , caption_fg_alpha=fga        ,
    };draw_gauge_ring(settings)

    settings = {--NETWORK GRAPH UP
        value=tonumber(conky_parse("${upspeedf wlan0}")),
        value_max=100              ,
        x=xp                       , y=yp                        ,
        graph_radius=17            ,
        graph_thickness=5          ,
        graph_start_angle=180      ,
        graph_unit_angle=2.7       , graph_unit_thickness=2.7    ,
        graph_bg_colour=bgc        , graph_bg_alpha=bga          ,
        graph_fg_colour=theme      , graph_fg_alpha=fga          ,
        hand_fg_colour=theme       , hand_fg_alpha=0.0           ,
        txt_radius=0               ,
        txt_weight=1               , txt_size=8.0                ,
        txt_fg_colour=fgc          , txt_fg_alpha=fga            ,
        graduation_radius=28       ,
        graduation_thickness=0     , graduation_mark_thickness=1 ,
        graduation_unit_angle=27   ,
        graduation_fg_colour=theme , graduation_fg_alpha=0.3     ,
        caption=''                 ,
        caption_weight=1           , caption_size=10.0           ,
        caption_fg_colour=fgc      , caption_fg_alpha=fga        ,
    };draw_gauge_ring(settings)

    end-- if updates>5
    cairo_destroy(cr)
    cairo_surface_destroy(cs)
    cr=nil
end-- end main function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:30:44.833

我正在编辑错误的脚本副本。

这很尴尬……

# jquery - 网站未在 IE 中加载 jQuery 图像轮播

> ID：10144891
> 
> 赞同：2
> 
> 时间：2012-04-13T16:41:37.660
> 
> 标签：jquery, internet-explorer

我的网站[http://alexjoneswork.com/](http://alexjoneswork.com/)在 chrome、mozilla、safari 中运行良好，但它似乎没有在 IE（基本上是网站）中加载 jquery 图像轮播。它使用了一个很棒的图像轮播插件：[http](http://buildinternet.com/2011/07/supersized-3-2-fullscreen-jquery-slideshow/) ://buildinternet.com/2011/07/supersized-3-2-fullscreen-jquery-slideshow/ 它似乎在 IE 中加载但由于某种原因我的网站（使用相同的脚本) 不起作用。代码中有什么突出的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:50:29.313

我在 IE9 上检查了它，确实它显示它好像它在不渲染网站的情况下永远加载。从我在您提到的插件链接的评论部分中读到的内容，直到 2012 年 1 月，所有遇到 IE 问题的人都还没有解决它们。

但是，在我看来，您也应该联系插件的开发人员。

另外，检查你的 DOCTYPE 和里面的元标记，因为它有：

```
<!DOCTYPE html PUBLIC "> 
```

和

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

您可以将 DOCTYPE 替换为

```
<!DOCTYPE html> 
```

我建议删除与 IE8 标签的兼容性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:49:54.803

If not working in any versions of IE, try adding DOCTYPE declaration for universal compatibility:

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

# asp.net - 需要简单表单的 ASP 代码 - 单选按钮重定向到 url

> ID：10144892
> 
> 赞同：0
> 
> 时间：2012-04-13T16:41:39.780
> 
> 标签：asp.net, forms, radio-button

有人可以指导我处理一个只有单选按钮的表单的 asp 代码示例吗？功能：选中单击单击单击的单个单击时，用户将重定向到特定的URL。onclick="window.location='http://www.google.com';" 不会在这里做的伎俩。我们必须等到“提交”被点击。

```
<form name="input" action="the_code_you_are_helping_me_with.asp" method="get">
<input type="radio" name="option1" value="1" />option1<br />
<input type="radio" name="option2" value="2" />option2<br />
<input type="radio" name="option3" value="3" />option3<br />
<input type="radio" name="option4" value="4" />option4<br />
<input type="radio" name="option5" value="5" />option5<br />

<input type="submit" value="Submit" /> 
```

提前致谢，

dp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:49:04.613

See a working demo here: [http://jsfiddle.net/89s6R/3/](http://jsfiddle.net/89s6R/3/)

```
<script>
function onRadioClick(radio) {
  radio.form.action = radio.value;
}
function onFormSubmit(form) {
  window.location = form.action;
  return false;   
}
</script>

<form name="input" action="#" method="get" onsubmit="return onFormSubmit(this)">
    <label><input type="radio" name="destination" onclick="onRadioClick(this)" value="http://google.com" />Google</label><br />
    <label><input type="radio" name="destination" onclick="onRadioClick(this)" value="http://nyt.com" />New York Times</label><br />
    <label><input type="radio" name="destination" onclick="onRadioClick(this)" value="http://twitter.com" />Twitter</label><br />
    <label><input type="radio" name="destination" onclick="onRadioClick(this)" value="http://microsoft.com" />Microsoft</label><br />
    <label><input type="radio" name="destination" onclick="onRadioClick(this)" value="http://apple.com" />Apple</label><br />
  <input type="submit" value="Submit" />
</form>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:53:40.113

上面的客户端答案将起作用。但是，如果你想要“asp 代码”，我假设你想要一些服务器端的东西。所以：

1.  将您的提交按钮变成`asp:Button`.
2.  将您的单选按钮变成`asp:RadioButtonList`.
3.  在按钮的onClick事件中，获取选中按钮的值。然后用户`Response.Redirect`重定向到该网址。

# algorithm - 每个元素的最长递增子序列

> ID：10144899
> 
> 赞同：3
> 
> 时间：2012-04-13T16:42:29.857
> 
> 标签：algorithm

给定一个列表 {x_i}，我想找到从每个元素开始的[最长递增子序列](http://en.wikipedia.org/wiki/Longest_increasing_subsequence)，使得起始元素包含在子序列中。

显而易见的方法是对每个元素执行通常的最长递增子序列算法，给出 O(n^2 logn)。这能打吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:46:26.263

您可以使用 DP 并将其降低到 O(n^2)。

设输入为 x1, x2, ..., xn

令 f1, f2, ..., fn 为从第 i 个元素开始的最长递增序列的长度。将它们全部初始化为 1。

现在，

```
for i = n-1, n-2, .... , 1:
    for j = i,i+1,...,n:
        if x[i]<x[j]:
            fi=max(fi, fj+1) 
```

如果除了长度之外还需要实际序列，请跟踪另一个变量 g1,g2, ..., gn，其中 gi 是要遵循的下一个元素。将 gis 初始化为 NULL。

```
for i = n-1, n-2, .... , 1:
    for j = i,i+1,...,n:
        if x[i]<x[j]:
            if fi<fj+1:
                fi=fj+1
                gi=j 
```

一旦你有了 gs，我会让你弄清楚如何从特定位置开始枚举序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:39:56.077

更有效的算法将依赖于每次迭代共享相同的数据结构，而不是每次都重新启动算法。一种方法是找到输入列表反向的*最长递减子序列。*这应该为您提供一个数据结构，使您可以恒定时间访问每个元素的前任，以及从该元素开始的子序列的长度。

对于每个起始元素：如果它在最长的递减子序列中，则跟随其前辈到最后。如果不是，则找到其右侧较大且具有最多前辈的元素，并遵循该元素的前辈。

这将给出 O(N^2) 的最坏情况时间复杂度，但至少需要这样才能输出结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T21:55:50.143

 ``> int main(){

```
int arr[]={1,10,5,12,17,18,19};
int t[]={1,0,0,0,0,0,0};
int i,j;
vector<int>v[7];
v[0].push_back(1);       
for(i =1;i<7;i++){

    for(j =0;j<i;j++){
          if(arr[j]<arr[i]){

             if(t[j]>=t[i]){
                 t[i]=t[j]+1;
                 v[i].push_back(arr[j]);
             }
          }
     }
     if(i==j){
        v[i].push_back(arr[i]);
     }
}

for(i=0;i<7;i++){
    for(j=0;j<v[i].size();j++){
        cout<<v[i][j]<<" ";
    }
    cout<<endl;
}

return 0; 
```` 

`}`

这是 C++ 代码，时间复杂度是 N^2。我会想出更优雅（使用 map 和 pair）的解决方案，而不是这个。那将是 nlogn 顺序。我没有在这里编写该代码，因为这将取决于数据密度。如果数据密集，那么我将编写该方法，否则它将始终正常工作。`

# facebook - 从我的网站发布到页面墙（使用“从新闻源中隐藏”）

> ID：10144907
> 
> 赞同：0
> 
> 时间：2012-04-13T16:43:16.193
> 
> 标签：facebook, facebook-wall

可以手动将帖子添加到我的墙上并选中“从新闻提要中隐藏”，但是有没有办法使用 PHP 从我的网站使用“从新闻提要中隐藏”选项发布到我的墙上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:04:57.690

通过查看[Graph API 文档](https://developers.facebook.com/docs/reference/api/post/)，您可以看到 Post 没有这样的选项。此外，如果您从 Graph API 检索新闻提要，则隐藏的帖子不会出现在返回的 json 中。您可以通过查询有关您的新闻提要的 Grap API、隐藏帖子并再次查询来尝试它。如果您比较两个 json，您会发现隐藏的帖子在第二个中不存在。所以我会说这是不可能的。

# c# - 列表框刷新绑定wp7

> ID：10144908
> 
> 赞同：0
> 
> 时间：2012-04-13T16:43:17.840
> 
> 标签：c#, windows-phone-7, binding

我实际上在我的 Listbox 上显示了我从 XML 检索的项目列表。当我单击一个项目时，我将返回相同的方法并创建一个新列表以显示不同的项目。

我想知道为什么它没有清​​除以前的列表。

这是我使用的代码，我无法弄清楚..

```
if (e.Error == null)
        {
            // Retrieving the subfolders
            XDocument xdoc = XDocument.Parse(e.Result, LoadOptions.None);
            XNamespace aNamespace = XNamespace.Get("http://schemas.datacontract.org/2004/07/System.IO");

            var folders = from query in xdoc.Descendants(aNamespace.GetName("DirectoryInfo"))
                          select new Folder
                          {
                              Name = (string)query.Element("OriginalPath"),
                          };

            ObservableCollection<Folder> LFolders = new ObservableCollection<Folder>();

            foreach (Folder f in folders)
            {
                LFolders.Add(f);
            }

            listBox1.ItemsSource = LFolders;
            listBox1.SelectionChanged += new SelectionChangedEventHandler(listBox1_SelectionChanged);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:10:45.470

两个建议：

1.  考虑使用 MVVM 模式，然后在视图模型上存储和更新 ObservableCollection。
2.  在 XAML 中设置 SelectionChanged 事件，而不是现在设置它的位置。对于此方法的每次调用，您都将附加一个事件处理程序到您的 listBox1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:15:54.343

如果在设置新值之前将 Itemssource 设置为 null，我相信这会起作用。此外，您可以尝试将 LFolders 设为类变量。当您开始使用该方法时，请清除该集合，然后将其添加到其中。绑定到列表框的可观察集合将负责更新列表框。

# mysql - 是否有使用嵌套 SELECT 的这种（不允许的）UPDATE 的替代方法？

> ID：10144913
> 
> 赞同：2
> 
> 时间：2012-04-13T16:43:40.297
> 
> 标签：mysql

我有一个现有的联系人表，其中包含大约 140k 条记录。我正在介绍一个父表（我们称它们为“parent_contacts”），这样一个 parent_contact 可以有多个联系人；但最初， parent_contacts 将被播种为数据库中当前存在的每个联系人都有一个记录。

我以为我很聪明地尝试了以下类似的事情，我现在明白这是不允许的（假设所有必要的 parent_contact 记录都已提前创建）：

```
UPDATE contacts
SET contacts.parent_id = 
  (SELECT parent_contacts.id FROM parent_contacts
   WHERE NOT EXISTS
     (SELECT * FROM contacts AS c WHERE c.parent_id = parent_contacts.id) LIMIT 1) 
```

（如果不是很明显，这里的想法是将每个联系人的 parent_id 设置为另一个联系人尚未链接到的第一个 parent_contact 的 id）

由于这种特定方法是不可能的，是否有另一种不涉及执行 140k 单独更新语句的方法？

跟进：我通过在父表上引入临时 child_id 解决了这个问题，然后在播种完成后将其删除。但在最初的问题的背景下，我认为托尼在下面的回答听起来很恰当。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:14:43.917

你似乎已经倒退了

将 Parent_id 添加到联系人（还没有约束！）使用唯一编号填充 Parent_id 更新联系人。创建 ParentContracts，不要将身份放入或主键中。

回填 ParentContacts 用 Insert into ParentContacts Select Parent_id, .... From Contacts

将标识（不要忘记下一个值的种子）和主键添加到 ParentContacts 将外键约束添加到联系人。

非常简单的步骤，并且易于检查每个步骤，而不是您现在正在尝试的整个布料操作。

# mysql - 棘手的多重where条件MySQL查询

> ID：10144917
> 
> 赞同：0
> 
> 时间：2012-04-13T16:43:51.497
> 
> 标签：mysql, join, where-clause

我有一个表客户，一个具有不同标准的表（然后使用这些标准进行评级）。另一个表中包含值及其键。

```
table company
==============
int company_id
varchar name
bool status

table criteria
==============
int criteria_id
varchar name
bool status

table company_criteria
==============
int company_id
int criteria_id
int criteria_value
varchar comments 
```

现在我以选择框的形式显示所有标准，这些选择框将根据每个标准（已经在数据库中）有一个值。现在我希望用户能够搜索具有这些特定标准和储值的不同公司。

例如：表 customer 有一条 id 为 1 的记录 table criteria 有记录 1--->Reputation, 2--> Salary

表 company_criteria 有以下记录：

```
 company_id | criteria_id | criteria_value |
   ============================================
        1            1            10
        1            2            20 
```

现在用户看到两个选择框（记住条件表中有两条记录） - 具有不同的选项。他从第一个选择框中选择了 10 个，从第二个选择框中选择了 20 个。我将如何编写查询 - 我尝试了以下

```
 SELECT DISTINCT `co`.*
 FROM (`company` co)
 JOIN `company_criteria` cc ON `co`.`company_id` = `cc`.`company_id`
 WHERE (`cc`.`criteria_id`=1 AND `cc`.`criteria_value`>=10) AND (`cc`.`criteria_id`=2 AND `cc`.`criteria_value`>=20) 
```

它只是不起作用-总是没有结果。感谢任何帮助-谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:49:49.057

Probably you want to put and OR instead of the AND here

```
SELECT DISTINCT `co`.*
 FROM (`company` co)
 JOIN `company_criteria` cc ON `co`.`company_id` = `cc`.`company_id`
 WHERE (`cc`.`criteria_id`=1 AND `cc`.`criteria_value`>=10) OR (`cc`.`criteria_id`=2 AND `cc`.`criteria_value`>=20) 
```

between the 2 where conditions....they both cant be true at the same time I think

# iphone - iPhone iOS通过缩放计算UIScrollView中的位置

> ID：10144921
> 
> 赞同：0
> 
> 时间：2012-04-13T16:44:12.450
> 
> 标签：iphone, objective-c, ios, uiscrollview, coordinates

我在 UIScrollView 中有一个颜色图，并且正在尝试对该图的像素颜色进行采样。示例标线位于滚动视图上方，而用户将滚动视图的内容移动到标线下方。

用户可以通过轻击手势放下标线，但我想提供一个额外的选项来移动标线下的视图。

我试图找出**如何理解缩放视图的 x,y 坐标当前位于 reticle 下**。到目前为止，这个逻辑让我难以理解，特别是因为涉及到放大/缩小。

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView
{

    CGPoint mapLocation = [tapGestureRecognizer locationInView:self.surfaceMap];

     NSLog(@"mapLocation (x,y) %.0f,%.0f",mapLocation.x,mapLocation.y);

    NSLog(@"contentOffset (x,y) %.0f,%.0f",self.scrollView.contentOffset.x,self.scrollView.contentOffset.y);

    //calculate where the marker is pointing to in the surface map while the scrollview is scrolling

    int frameWidth = self.surfaceMap.frame.size.width;
    int frameHeight = self.surfaceMap.frame.size.height;

//this is what I'm trying to calculate
    CGPoint trueLocation = CGPointMake(self.scrollView.contentOffset.x+frameWidth-self.surfaceMap.frame.origin.x, self.scrollView.contentOffset.y-self.surfaceMap.frame.origin.y);
    NSLog(@"trueLocation (x,y) %.0f,%.0f",trueLocation.x,trueLocation.y);

    [self colorOfPixelAtPoint:trueLocation];

} 
```

任何输入表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:48:27.750

You may want to a have look at these two methods in UIView:

```
- (CGPoint)convertPoint:(CGPoint)point toView:(UIView *)view;
- (CGPoint)convertPoint:(CGPoint)point fromView:(UIView *)view; 
```

# redirect - 使用 dns 重定向到另一个域

> ID：10144929
> 
> 赞同：2
> 
> 时间：2012-04-13T16:44:45.693
> 
> 标签：redirect, dns

我有托管计划的域：testing.com 其他域，但没有托管计划：test.com 和 test2.com 都是在同一家公司购买的，所以 NS 记录相同。

也许 DNS 类型 A 在这种情况下会有所帮助？

简而言之，如果有人尝试使用 test.com 或 test2.com，所有用户都会被重定向到 testing.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T17:27:54.507

我假设您在谈论网络托管。如果您的托管计划是基于名称的虚拟主机（这可能是您所拥有的），答案是：DNS 是不够的。

你有两个选择：

1.  向您的主机添加多个域名（大多数主机将允许最多免费 N 个域，或收取一些额外费用或作为更昂贵计划的一部分）。

2.  使用 URL 转发（又名 URL 重定向）服务，比如[这个](http://www.domain.com/domains/tools.php)（还有很多其他提供商）。

使用这两种方法，您的域中都需要适当的 DNS 记录，它可能由选项 1 的托管或选项 2 的 URL 转发提供商处理。基本上，您将需要指向您的托管或 URL 转发网络服务器的 A 记录.

# string - Scala Map，字符串的隐含符号键

> ID：10144930
> 
> 赞同：2
> 
> 时间：2012-04-13T16:44:51.420
> 
> 标签：string, scala, map, symbols, implicit-conversion

**更新**
这里的所有答案都很好，但@senia's 这样做是最直接的，不需要额外的步骤。这可能会导致错误，但是当在数百种方法中使用 Map[Symbol, T] 约定时，最好在创建映射之前进行 1 步隐式转换（避免符号映射密钥永久存储）。无论如何，这是皮条客：

```
class SymbolProvidesPair(i: Symbol) { def ->[T](s: T) = (i.toString.tail, s) }
@inline implicit def symbol2String(i: Symbol) = new SymbolProvidesPair(i) 
```

**原创**
在 Maps 中使用字符串键有点困扰我，只是让我慢下来，而且，IMO，在语法上不像符号键那样容易。

```
val map: Map[String, Int] = Map("strings" -> 1, "blow" -> 2)
val map: Map[String, Int] = Map('symbols -> 1, 'rock -> 2) 
```

所以，我创建了一个隐式来抓挠我的痒：

```
implicit def symbolKey2String[A <: Symbol, B](x:(A,B)) = (x._1.toString, x._2) 
```

几件事：
1）这是正确的签名吗？以上工作，但`A <: Symbol`我的意思是，从符号派生的东西与等于符号的东西。

2）当我手动输入地图时，我将使用它；即只是为了方便。我会用这种隐含的方式遇到任何障碍吗？似乎边缘情况足以不会引起问题（例如 string2Int），但不确定我是否遗漏了一些东西。

谢谢

**编辑**
好吧，好吧＃1我实际上可以说出我的意思，`[Symbol, B]`而不是`[A <: Symbol, B]`

但是现在我发现自己遇到了另一个问题，符号到字符串的隐式将我置于某种角落，因为我必须为所有新 Map 显式定义 Map[String, Type]为了能够使用符号键。

那么如何在不指定类型签名时获得两全其美的映射符号键，但使用推断的 [String, Type] 呢？即当我这样做时让编译器推断 Map[String, Int] ：

```
val map = Map('foo -> 1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:05:43.050

您不需要明确指定地图的类型：

```
scala> class SymbolToPait(i: Symbol) { def ->[T](s: T) = (i.toString().tail, s)}
defined class SymbolToPait

scala> implicit def symbolToPair(i: Symbol) = new SymbolToPait(i)
symbolToPair: (i: Symbol)SymbolToPait

scala> 'Symbol -> "String"
res0: (String, String) = (Symbol,String)

scala> Map('Symbol -> "String")
res1: scala.collection.immutable.Map[String,String] = Map(Symbol -> String)

scala> Map('Symbol -> 1)
res2: scala.collection.immutable.Map[String,Int] = Map(Symbol -> 1) 
```

这种行为可能会让其他开发人员感到惊讶。`->`也许换成其他词会更好？例如`:->`或`~>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T17:07:04.463

正如您所指出的，不需要`A`. 您可能还想删除第一个字符，这始终是`'`

```
implicit def symbolKeyToString[B](x: (Symbol, B)) = (x._1.toString.tail, x._2) 
```

至于障碍，你必须每次都输入地图的签名，并且你的密钥不能包含空格或操作符字符。这不是我自己会做的事……

编辑：如果您不想每次都输入签名，请使用替代方法`Map.apply`并忘记隐式：

```
object Map2 {
  def apply[B](xs: (Symbol, B)*) = 
    xs map {case (k, v) => (k.toString.tail, v)} toMap
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T03:51:49.320

我对当前的解决方案有几个警告。

首先，您正在更改 的含义`'sym -> x`，这将意味着与 不同的东西`('sym, x)`。我会觉得这很混乱。

您还很难将使用此转换的代码与实际需要的代码混合在一起`Map[Symbol, _]`。

在将符号放入地图之前，不要将它们转换为字符串，我建议只转换地图。对我来说似乎更直接。

```
scala> implicit def symMap2strMap[T](m: Map[Symbol, T]): Map[String, T] = m.map {
     |   case (key, value) => key.toString.tail -> value
     | }
symMap2strMap: [T](m: Map[Symbol,T])scala.collection.immutable.Map[String,T]

scala> val sym = Map('foo -> 1, 'bar -> 2)
sym: scala.collection.immutable.Map[Symbol,Int] = Map('foo -> 1, 'bar -> 2)

scala> sym: Map[String, Int]
res0: Map[String,Int] = Map(foo -> 1, bar -> 2) 
```

*编辑*：

您永远不必指定要显式转换`Map[Symbol, T]`为`Map[String, T]`. 只需将其保留为 a `Map[Symbol, T]`，直到您遇到需要字符串键的 API，然后让 Scala 将其隐式转换为您想要的类型。

# ruby-on-rails-3 - 如何将路径字符串转换为控制器 + 动作 + 参数？

> ID：10144933
> 
> 赞同：2
> 
> 时间：2012-04-13T16:44:59.550
> 
> 标签：ruby-on-rails-3, routing, actioncontroller, actiondispatch

（我确定我已经看到了这个问题的答案，但是在挖掘了几分钟后找不到它。这应该是一个容易回答的问题......）

## 动机

在控制台中，您可以`get`使用路径参数调用该方法，例如：

```
app.get posts_path(321) 
```

这会调用`ActionDispatch::Integration::RequestHelpers#get`，它将“/posts/321”转换为适当的控制器、动作和参数，例如 {:controller => "posts", :action => "show", :id => "321"}。

但是你不能在控制器测试中这样做。要获得相同的效果，您需要：

```
get :show, :id => "321" 
```

这是因为`get`方法是由 定义的`ActionController::TestCase#get`，它期望动作和参数已经被解析出来。

我可以在手动填写 :controller、:action 和任何参数的地方编写测试，但这似乎是引入错误的好方法。

## 问题

是否有一种方法可以将字符串（例如 的调用`posts_path(321)`）解析为适当的 :controller、:action 和参数，适合传递给`ActionController::TestCase#get`?

这将使编写测试更简单，更不容易出错。

[编辑：我意识到您需要 HTTP 动词 ( `get`) 以及路径 ( `/posts/321`) 来唯一地映射到：controller 和：action，但问题仍然存在……]

# svg - 放大后在 Chrome 上转换字体大小

> ID：10144934
> 
> 赞同：3
> 
> 时间：2012-04-13T16:44:59.857
> 
> 标签：svg, d3.js

关于 SVG 样式转换的另一个问题... :)

这次我试图在文本元素上转换字体大小。在我增加 Chrome 中的页面缩放之前，它工作正常。一旦我这样做，它似乎在过渡开始时将尺寸设置为原始缩放尺寸，然后再过渡到正确的结果尺寸。结果是我看到字体大小在变大之前一瞬间变小了。

使用默认缩放，过渡看起来很平滑。其他浏览器似乎没有这个问题。

想知道我是否可以通过一些样式设置技巧再次尝试我的运气，这些技巧将在浏览器中更可靠地工作......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T17:10:20.407

这是因为 D3 的样式转换用于`getComputedStyle`检索要插入的起始值。请参阅[此处](https://github.com/mbostock/d3/pull/476)了解更多信息。当使用 WebKit 的整页缩放时，这将为过渡返回不同的起始值。这种差异仅限于某些情况，包括`font-size`，这就是为什么您可能不会在其他地方看到它。

事实上， after `.style("font-size", A)`，检索 via`.style("font-size")`并不能保证返回`A`在使用整页缩放时设置的值。

我过去曾为此使用过以下解决方法：

```
.styleTween("font-size", function(d) {
  return d3.interpolate(
    this.style.getPropertyValue("font-size"),
    d.size + "px"
  );
}); 
```

这会覆盖 D3 的使用`getComputedStyle`并直接检索当前`font-size`样式（并假设`font-size`在您的选择中已经设置了一个`.enter()`）。

再次，我的[词云](http://www.jasondavies.com/)经验派上了用场。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:02:04.467

浏览器页面缩放与 SVG 结合使用时存在问题。您可以使用 CSS 修复缩放级别，例如`* { zoom: 1; }`，但这会给用户带来其他不便。您可以尝试解决 JavaScript 中的错误，但我认为这将是很多工作。

# performance - 奇怪的 get 优化行为

> ID：10144937
> 
> 赞同：4
> 
> 时间：2012-04-13T16:45:13.093
> 
> 标签：performance, clojure, clojure-java-interop

跟进这个关于[get性能的问题](https://stackoverflow.com/questions/10133094/clojure-why-is-aget-so-slow)

在优化方面似乎有一些非常奇怪的事情。我们知道以下情况是正确的：

```
=> (def xa (int-array (range 100000)))
#'user/xa

=> (set! *warn-on-reflection* true)
true

=> (time (reduce + (for [x xa] (aget ^ints xa x))))
"Elapsed time: 42.80174 msecs"
4999950000

=> (time (reduce + (for [x xa] (aget xa x))))
"Elapsed time: 2067.673859 msecs"
4999950000
Reflection warning, NO_SOURCE_PATH:1 - call to aget can't be resolved.
Reflection warning, NO_SOURCE_PATH:1 - call to aget can't be resolved. 
```

然而，一些进一步的实验真的让我很奇怪：

```
=> (for [f [get nth aget]] (time (reduce + (for [x xa] (f xa x)))))
("Elapsed time: 71.898128 msecs"
"Elapsed time: 62.080851 msecs"
"Elapsed time: 46.721892 msecs"
4999950000 4999950000 4999950000) 
```

没有反射警告，不需要提示。通过将 get 绑定到根 var 或 let 可以看到相同的行为。

```
=> (let [f aget] (time (reduce + (for [x xa] (f xa x)))))
"Elapsed time: 43.912129 msecs"
4999950000 
```

知道为什么绑定的 get 似乎“知道”如何优化，而核心功能不知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:44:37.620

它与扩展为的`:inline`指令有关，而正常的函数调用涉及. 试试这些：`aget``(. clojure.lang.RT (aget ~a (int ~i))``Reflector`

```
user> (time (reduce + (map #(clojure.lang.Reflector/prepRet 
       (.getComponentType (class xa)) (. java.lang.reflect.Array (get xa %))) xa)))
"Elapsed time: 63.484 msecs"
4999950000
user> (time (reduce + (map #(. clojure.lang.RT (aget xa (int %))) xa)))
Reflection warning, NO_SOURCE_FILE:1 - call to aget can't be resolved.
"Elapsed time: 2390.977 msecs"
4999950000 
```

那么，您可能想知道内联的意义何在。好吧，看看这些结果：

```
user> (def xa (int-array (range 1000000))) ;; going to one million elements
#'user/xa
user> (let [f aget] (time (dotimes [n 1000000] (f xa n))))
"Elapsed time: 187.219 msecs"
user> (time (dotimes [n 1000000] (aget ^ints xa n)))
"Elapsed time: 8.562 msecs" 
```

事实证明，在您的示例中，一旦您通过反射警告，您的新瓶颈就是`reduce +`部分而不是数组访问。此示例消除了这一点，并显示了类型提示、内联的数量级优势`aget`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:05:48.770

当您通过高阶函数调用时，所有参数都被强制转换为对象。在这些情况下，编译器无法确定被调用函数的类型，因为在编译函数时它是未绑定的。只能确定它将是可以用一些参数调用的东西。不会打印任何警告，因为任何事情都会起作用。

```
user> (map aget (repeat xa) (range 100))
(0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99) 
```

您已经找到了 clojure 编译器放弃的优势，而只是将对象用于所有内容。（这是一个过于简单的解释）

如果您将其包装在任何自行编译的内容中（例如匿名函数），则警告将再次可见，尽管它们来自编译匿名函数，而不是编译对 map 的调用。

```
user> (map #(aget %1 %2) (repeat xa) (range 100))
Reflection warning, NO_SOURCE_FILE:1 - call to aget can't be resolved.
(0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99) 
```

然后当类型提示添加到匿名但不变的函数调用时，警告就会消失。

# magento - 在 Magento 中覆盖 Mage/Core/Controller/Varien/Action

> ID：10144939
> 
> 赞同：0
> 
> 时间：2012-04-13T16:45:25.350
> 
> 标签：magento

我已尽力解决这个问题，但我似乎无法在 Magento 中覆盖以下控制器：

**法师/核心/控制器/瓦里安/动作**

现在我的扩展有以下文件：

**app/local/MyCompany/MyModule/Core/Controller/Front/Action.php**

**应用程序/本地/MyCompany/MyModule/Core/etc/config.xml**

**应用程序/etc/modules/MyCompany_MyModule.xml**

我的困惑在于 config.xml。我之前覆盖了在**controllers**目录中找到的 Controllers ，但没有覆盖**Controller**。我不完全清楚区别，或者在 Controller 目录中覆盖文件的方法是否不同。

这是我的 config.xml 中的内容

```
 <?xml version="1.0"?>
    <config>
        <modules>
            <MyCompany_MyModule>
                <version>0.0.1</version>
            </MyCompany_MyModule>
        </modules>
        <global>
            <controller>
                <Mage_Core>
                    <rewrite>
                        <front_action>MyCompany_MyModule_Core_Controller_Front_Action</front_action>
                    </rewrite>
                </Mage_Core>
            </controllers>
        </global>
    </config> 
```

有人可以让我知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T17:51:45.973

您无法通过 Magento 配置的类名重写来完成您想要的。如果您注意到，您正在更改一个超类（其他类从它扩展），并且类定义的发现是通过`Varien_Autoload::autoload()`.

如果您必须更改此类的定义，您可以将整个文件复制到*app/code/local/Mage/Core/Controller/Varien/*并在那里进行更改。在升级 Magento 的任何时候，您都需要将更新合并到此类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:48:45.333

我也曾经修改过控制器功能，但我想我最终只是修补了原始控制器而不是覆盖它。我可能错了，但我认为 Magento 不支持覆盖 Controller 类。

如果我没记错的话，它们甚至在某些时候在代码中被静态调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T08:37:05.490

由于在 magento 控制器上的声明

`class Mage_Catalog_ProductController extends Mage_Core_Controller_Front_Action`

如果是直接扩展类。我所做的是以某种方式替换所有控制器。

`class Mage_Catalog_ProductController extends MyCompany_Core_Controller_Front_Action`

要替换所有控制器，我使用这个 linux 命令

`find app/code/core/Mage/*/controllers/ -name "*.php" -print | xargs sed -i 's/Mage_Core_Controller_Front_Action/MyCompany_Core_Controller_Front_Action/g'`

# c++ - 如何理解定制绘制？我可以使用哪些工具？

> ID：10144943
> 
> 赞同：-5
> 
> 时间：2012-04-13T16:45:45.857
> 
> 标签：c++, c, windows, user-interface, custom-draw

我想知道漂亮的 UI 程序使用的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:54:00.857

你将不得不问一个更好的问题。你的目标是什么平台？你用的是什么框架？“美丽”在情人眼中。

# android - 如何在 Android 中玩 Flash 游戏

> ID：10144944
> 
> 赞同：0
> 
> 时间：2012-04-13T16:45:54.023
> 
> 标签：android, flash

我已经在 flash 中开发了一个游戏，现在我想在 android os 中运行该 flash 文件。我在这里关注了几个问题，但无法获得解决方案，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:53:27.250

在 AS3 中开发的应用程序可以在 Adob​​e AIR 环境中运行。您的设备上需要 Adob​​e AIR，我认为应用程序需要针对 AIR 进行优化。

当然，如果你有 Flash Player，你也可以在浏览器中运行它，但它会带来非常糟糕的用户体验。

# c++ - 如何编写返回对单个位的引用的 bool& operator[](int index)

> ID：10144945
> 
> 赞同：1
> 
> 时间：2012-04-13T16:46:11.347
> 
> 标签：c++, operators

让我们看一下非常基本的实现`Bitset`。

```
struct Bitset {
    bool mask[32];

    bool& operator[] (int index) {
        return mask[index];
    }
}; 
```

现在我可以写了

```
Bitset bitset;
bitset[0] = 1;
std::cout << bitset[0] << "\n"; 
```

有可能的优化。我可以使用`unsigned int`而不是`bool mask[32]`.

```
struct Bitset {
    unsigned int mask;

    bool& operator[] (int index) {
        // ??
    }
}; 
```

可以`bool& operator[] (int index)`用这样的规范写吗？我认为`std::bitset`正在做类似的事情，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T16:54:20.537

不，您不能形成对任何小于`char`.

相反，您可以返回一个可转换为`bool`、支持赋值并知道要读取和写入的位的对象，如下所示：

```
class bit_proxy
{
public:
    bit_proxy(unsigned & mask, unsigned bit) : mask(mask), index(index) {}

    operator bool() const {return mask & (1 << index);}
    void operator=(bool bit) {mask = (mask & ~(bit << index)) | (bit << index);}

private:
    unsigned & mask;
    unsigned index;
};

bit_proxy bitset::operator[](unsigned index)
{
    return bit_proxy(mask, index);
}

my_bitmask[3] = true;     // sets bit 3
bool bit = my_bitmask[3]; // gets bit 3 
```

如评论中所述，您可能还需要一些复合赋值操作来更全面地模拟引用。您可能还需要一个单独的类型，包含`const`引用和无赋值运算符，以`const`从`operator[]`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T16:52:18.897

不，这是不可能的。变量内的位没有唯一的地址，因此您不能形成指针或对各个位的引用。

您将不得不返回一个“智能引用”对象而不是原始引用。

# c++ - boost.lambda 或 boost.phoenix 的静态函数

> ID：10144948
> 
> 赞同：8
> 
> 时间：2012-04-13T16:46:22.913
> 
> 标签：c++, boost, lambda, boost-phoenix, boost-proto

我经常使用 boost.lambda（和 phoenix）在 C++ 中定义 lambda 函数。我真的很喜欢它们的多态属性、它们的简单表示以及它们使 C++ 中的函数式编程变得如此容易的方式。在某些情况下，使用它们来定义小函数并在静态范围内命名它们会更干净、更易读（如果您习惯阅读它们）。

存储这些与传统函数最相似的函数的方法是将它们捕获在一个`boost::function`

```
const boost::function<double(double,double)> add = _1+_2; 
```

但问题是这样做的运行时效率低下。尽管`add`这里的函数是无状态的，但返回的 lambda 类型不是空的，并且`sizeof`大于 1（因此`boost::function`默认 ctor 和复制 ctor 都会涉及`new`）。我真的怀疑编译器或 boost 方面是否有一种机制来检测这种无状态并生成相当于使用的代码：

```
double (* const add)(double,double) = _1+_2; //not valid right now 
```

当然可以使用 c++11 `auto`，但是变量不能在非模板上下文中传递。使用以下方法，我终于设法做几乎我想做的事：

```
#include <boost/lambda/lambda.hpp>
using namespace boost::lambda;

#include <boost/type_traits.hpp>
#include <boost/utility/result_of.hpp>
using namespace boost;

template <class T>
struct static_lambda {

    static const T* const t;

    // Define a static function that calls the functional t
    template <class arg1type, class arg2type>
    static typename result_of<T(arg1type,arg2type)>::type 
        apply(arg1type arg1,arg2type arg2){
        return (*t)(arg1,arg2); 
    }

    // The conversion operator
    template<class func_type>
    operator func_type*() {
       typedef typename function_traits<func_type>::arg1_type arg1type;
       typedef typename function_traits<func_type>::arg2_type arg2type;
       return &static_lambda<T>::apply<arg1type,arg2type>;
    }
};

template <class T>
const T* const static_lambda<T>::t = 0;

template <class T>
static_lambda<T> make_static(T t) {return static_lambda<T>();}

#include <iostream>
#include <cstdio>

int main() {
    int c=5;
    int (*add) (int,int) = make_static(_1+_2);
    // We can even define arrays with the following syntax
    double (*const func_array[])(double,double) = {make_static(_1+_2),make_static(_1*_2*ref(c))};
    std::cout<<func_array[0](10,15)<<"\n";
    std::fflush(stdout);
    std::cout<<func_array[1](10,15); // should cause segmentation fault since func_array[1] has state
} 
```

使用 gcc 4.6.1 编译该程序的输出是（无论优化级别如何）：

```
25
Segmentation fault 
```

正如预期的那样。在这里，我保留了一个指向 lambda 表达式类型的静态指针（出于优化目的，尽可能为 const）并将其初始化为`NULL`. 这样，如果您尝试“静态化”带有状态的 lambda 表达式，您肯定会遇到运行时错误。如果你静态化一个真正无状态的 lambda 表达式，一切都会解决。

关于问题：

1.  该方法似乎有点脏，您能想到任何会导致这种行为不端的情况或编译器假设（预期行为：如果 lambda 是无状态的，则可以正常工作，否则会出现段错误）。

2.  当 lambda 表达式有状态时，你能想到任何尝试这样做会导致编译器错误而不是段错误的方法吗？

在 Eric Niebler 回答后编辑：

```
#include <boost/phoenix.hpp>
using namespace boost::phoenix;
using namespace boost::phoenix::arg_names;

#include <boost/type_traits.hpp>
#include <boost/utility/result_of.hpp>
using boost::function_traits;

template <class T>
struct static_lambda {
    static const T t;

    // A static function that simply applies t
    template <class arg1type, class arg2type>
    static typename boost::result_of<T(arg1type,arg2type)>::type 
    apply(arg1type arg1,arg2type arg2){
    return t(arg1,arg2); 
    }

    // Conversion to a function pointer
    template<class func_type>
    operator func_type*() {
    typedef typename function_traits<func_type>::arg1_type arg1type;
        typedef typename function_traits<func_type>::arg2_type arg2type;
        return &static_lambda<T>::apply<arg1type,arg2type>;
    }
};

template <class T>
const T static_lambda<T>::t; // Default initialize the functional

template <class T>
static_lambda<T> make_static(T t) {return static_lambda<T>();}

#include <iostream>
#include <cstdio>

int main() {
    int (*add) (int,int) = make_static(_1+_2);

    std::cout<<add(10,15)<<"\n";

    int c=5;

    // int (*add_with_ref) (int,int) = make_static(_1+_2+ref(c)); causes compiler error as desired
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T22:26:15.127

1.  没有办法让这个更干净。您正在通过空指针调用成员函数。这是各种未定义的行为，但你已经知道了。
2.  您无法知道 Boost.Lambda 函数是否是无状态的。这是一个黑匣子。Boost.Phoenix 是另一回事。它建立在 DSL 工具包 Boost.Proto 之上，Phoenix 发布了它的语法并为您提供了内省它生成的 lambda 表达式的钩子。你可以很容易地编写一个 Proto 算法来查找有状态的终端，如果找到的话，可以在编译时将其轰出。（但这并没有改变我对上面＃1的回答。）

您说您喜欢 Boost 的 lambda 函数的多态性，但您没有在上面的代码中使用该属性。我的建议：使用 C++11 lambda。无状态的已经隐式转换为原始函数指针。这正是你要找的，IMO。

**===更新===**

尽管通过空指针调用成员函数是一个糟糕的想法（不要这样做，你会失明），但您*可以*默认构造一个与原始类型相同的*新*lambda 对象。如果你把它和我在上面#2 中的建议结合起来，你就能得到你想要的。这是代码：

```
#include <iostream>
#include <type_traits>
#include <boost/mpl/bool.hpp>
#include <boost/mpl/and.hpp>
#include <boost/phoenix.hpp>

namespace detail
{
    using namespace boost::proto;
    namespace mpl = boost::mpl;

    struct is_stateless
      : or_<
            when<terminal<_>, std::is_empty<_value>()>,
            otherwise<
                fold<_, mpl::true_(), mpl::and_<_state, is_stateless>()>
            >
        >
    {};

    template<typename Lambda>
    struct static_lambda
    {
        template<typename Sig>
        struct impl;

        template<typename Ret, typename Arg0, typename Arg1>
        struct impl<Ret(Arg0, Arg1)>
        {
            static Ret apply(Arg0 arg0, Arg1 arg1)
            {
                return Lambda()(arg0, arg1);
            }
        };

        template<typename Fun>
        operator Fun*() const
        {
            return &impl<Fun>::apply;
        }
    };

    template<typename Lambda>
    inline static_lambda<Lambda> make_static(Lambda const &l)
    {
        static_assert(
            boost::result_of<is_stateless(Lambda)>::type::value,
            "Lambda is not stateless"
        );
        return static_lambda<Lambda>();
    }
}

using detail::make_static;

int main()
{
    using namespace boost::phoenix;
    using namespace placeholders;

    int c=5;
    int (*add)(int,int) = make_static(_1+_2);

    // We can even define arrays with the following syntax
    static double (*const func_array[])(double,double) = 
    {
        make_static(_1+_2),
        make_static(_1*_2)
    };
    std::cout << func_array[0](10,15) << "\n";
    std::cout << func_array[1](10,15);

    // If you try to create a stateless lambda from a lambda
    // with state, you trigger a static assertion:
    int (*oops)(int,int) = make_static(_1+_2+42); // ERROR, not stateless
} 
```

*免责声明：*我不是凤凰的作者。我不知道是否保证所有无状态 lambda 的默认可构造性。

使用 MSVC-10.0 测试。

享受！

# ios - 未找到符号：kUTTypeImage

> ID：10144961
> 
> 赞同：82
> 
> 时间：2012-04-13T16:47:30.067
> 
> 标签：ios, objective-c, linker-errors, mobilecoreservices

[我从苹果的文档](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/CameraAndPhotoLib_TopicsForIOS/Articles/PickinganItemfromthePhotoLibrary.html)中复制了一些代码——我得到了这两个错误：

```
Undefined symbols for architecture i386:
  "_kUTTypeImage", referenced from:
      -[ImagePicker imagePickerController:didFinishPickingMediaWithInfo:] in ImagePicker.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我究竟做错了什么？

编辑：代码：

```
- (IBAction) showSavedMediaBrowser {
    [self startMediaBrowserFromViewController: self
                                usingDelegate: (id)self];
}

- (BOOL) startMediaBrowserFromViewController: (UIViewController*) controller
                               usingDelegate: (id <UIImagePickerControllerDelegate,
                                               UINavigationControllerDelegate>) delegate {

    if (([UIImagePickerController isSourceTypeAvailable:
          UIImagePickerControllerSourceTypeSavedPhotosAlbum] == NO)
        || (delegate == nil)
        || (controller == nil))
        return NO;

    UIImagePickerController *mediaUI = [[UIImagePickerController alloc] init];
    mediaUI.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;

    // Displays saved pictures and movies, if both are available, from the
    // Camera Roll album.
    mediaUI.mediaTypes =
    [UIImagePickerController availableMediaTypesForSourceType:
     UIImagePickerControllerSourceTypeSavedPhotosAlbum];

    // Hides the controls for moving & scaling pictures, or for
    // trimming movies. To instead show the controls, use YES.
    mediaUI.allowsEditing = YES;

    mediaUI.delegate = delegate;

    [controller presentViewController:mediaUI animated:YES completion:nil];
    return YES;
}

- (void) imagePickerController: (UIImagePickerController *) picker
 didFinishPickingMediaWithInfo: (NSDictionary *) info {

    NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];
    UIImage *originalImage, *editedImage, *imageToUse;

    // Handle a still image picked from a photo album
    if (CFStringCompare ((__bridge_retained CFStringRef) mediaType, kUTTypeImage, 0)
        == kCFCompareEqualTo) {

        editedImage = (UIImage *) [info objectForKey:
                                   UIImagePickerControllerEditedImage];
        originalImage = (UIImage *) [info objectForKey:
                                     UIImagePickerControllerOriginalImage];

        if (editedImage) {
            imageToUse = editedImage;
        } else {
            imageToUse = originalImage;
        }
        // Do something with imageToUse
    }

    [[picker parentViewController] dismissModalViewControllerAnimated: YES];
} 
```

我认为错误是最后一个方法开始的地方，但我不确定。

您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-04-13T16:51:21.897

查找符号 ( `kUTTypeImage`) 并找到它应该存在的图像/库（`MobileCoreServices.framework`在这种情况下）。然后将您的二进制文件与该框架链接。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2016-07-24T22:49:05.137

强制性的斯威夫特答案：

```
import MobileCoreServices 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-19T18:17:41.037

与 do 一起使用时`UIDocumentPickerViewController`：

```
import MobileCoreServices

let type = String(kUTTypeImage)
let documentPickerViewController = UIDocumentPickerViewController(documentTypes: [type], in: .import) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-22T00:07:17.007

对于 Swift，它似乎在

```
import UniformTypeIdentifiers

let type = String(describing: UTType.image) 
```

# python - Centering line-broken axis label in matplotlib

> ID：10144962
> 
> 赞同：10
> 
> 时间：2012-04-13T16:47:48.253
> 
> 标签：python, latex, matplotlib

Any idea why the ylabel isn't center justified and how I might go about centering it?

![ylabel not centered in plot](../Images/dd0fee59734c8f0a7e7e50965e155d54.png) Rendering text with LaTeX (`text.usetex: True`)

`ylabel('Soil Moisture Sensitivity,\n(0.01 K m$^3$ m$^{-3}$)')`

Tried adding \centering, didn't work.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-13T16:56:45.613

你试过了吗

`ylabel('Soil Moisture Sensitivity,\n(0.01 K m$^3$ m$^{-3}$)', multialignment='center')`?

如此处所示：http: [//matplotlib.sourceforge.net/examples/pylab_examples/multiline.html](http://matplotlib.sourceforge.net/examples/pylab_examples/multiline.html)

# html - 您如何检测客户端 Web 浏览器？

> ID：10144967
> 
> 赞同：-3
> 
> 时间：2012-04-13T16:48:02.513
> 
> 标签：html, safari

我正在尝试根据使用的 Web 浏览器执行特殊行为。我更喜欢 HTML 的解决方案，但脚本语言也可以。

特殊行为非常少，仅适用于 safari 用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:50:34.223

javascript 中的 navigator 对象将为您执行此操作。

给你：

[http://www.w3schools.com/js/js_browser.asp](http://www.w3schools.com/js/js_browser.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:57:30.180

我知道的唯一解决方案只使用 HTML 代码而没有 JS 是条件注释。IE9及以下或IE10+及非IE浏览器均可使用。

在 CSS 中，前缀供应商（如`-webkit-some-experimental-property`）用于仍然是实验性属性和非标准属性。

作为一般建议：永远不要尝试使用 JS 或服务器端检测浏览器，否则其中一个迟早会咬你。解释你的问题到底是什么，你可能会学会如何用另一种方法来解决。

# objective-c - chipmunk cpVect type in method argument incompatble

> ID：10144977
> 
> 赞同：0
> 
> 时间：2012-04-13T16:48:52.853
> 
> 标签：objective-c, xcode4, chipmunk

Im trying to pass an array cpVect in a method arguments like this;

```
cpVect v1[] = {
        cpv(-31.5f/2.0, 70.5f/2.0),
        cpv(43.5f/2.0, 65.5f/2.0),
        cpv(34.5f/2.0, -69.5f/2.0),
        cpv(-52.5f/2.0, -69.5f/2.0)
    };

Rocks *rock = [[Rocks alloc] initWithSpace:space location:ccp(200, 700) filename:@"2_piedra1.png" verts:v1]; 
```

and the method:

```
- (Rocks *)initWithSpace:(cpSpace *)theSpace location:(CGPoint)location filename:(NSString *)filename verts:(cpVect)verts; 
```

but fails with the type

thanks for the help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:21:38.087

您的方法应如下所示：

*   (Rocks *)initWithSpace:(cpSpace *)theSpace location:(CGPoint)location 文件名:(NSString *)filename verts:(cpVect *)verts;

请注意最后一个参数的 cpVect 之后的“*”。您正在传递一个 cpVect 值的数组（指针），而不仅仅是一个值。

# python - Python returning error when attempting to multiply two numpy matrices of appropriate dimension

> ID：10144984
> 
> 赞同：3
> 
> 时间：2012-04-13T16:49:30.033
> 
> 标签：python, numpy

my code is pretty simple, but when I try to multiply a 3x2 and 2x1 matrix, I get the following error (which, to me, makes no sense):

```
ValueError: operands could not be broadcast together with shapes (3,2) (2,1) 
```

In this program, the first thing I do is randomly generate two points in the domain [-1,1] x [-1,1], and define a line by these points, using the variables `slope` and `y_int`. Then, I create N random `x` values of the form {x_0, x_1, x_2} where x_0 is always 1, and x_1,x_2 are randomly generated numbers in the range [-1,1]. These N values comprise the `x_matrix` in the code.

The `y_matrix` is the classification of each of the values x_1,...,x_N. If x_1 is to the right of the random line specified by `slope` and `y_int`, then the value of y_1 is +1, and is otherwise -1\.

Now, once `x_matrix` and `y_matrix` have been specified, I just want to multiply the pseudo-inverse of `x_matrix` (`pinv_x` in the code) by `y_matrix`. This is where the error comes in. I'm at my wit's end and I cannot think of anything that could be wrong.

Any help is greatly appreciated. The code is below:

```
from numpy import *
import random

N = 2

# Determine target function f(x)                                                                                
x_1 = [random.uniform(-1,1),random.uniform(-1,1)]
x_2 = [random.uniform(-1,1),random.uniform(-1,1)]
slope = (x_1[1] - x_2[1]) / (x_1[0] - x_2[0])
y_int = x_1[1] - (slope * x_1[0])

# Construct training data.                                                                                       
x_matrix = array([1, random.uniform(-1,1), random.uniform(-1,1)])
x_on_line = (x_matrix[1] / slope) - (y_int / slope)
if x_matrix[1] >= x_on_line:
    y_matrix = array([1])
else:
    y_matrix = array([-1])

for i in range(N-1):
    x_val = array([1, random.uniform(-1,1), random.uniform(-1,1)])
    x_matrix = vstack((x_matrix, x_val))
    x_on_line = (x_val[1] / slope) - (y_int / slope)
    if x_val[1] >= x_on_line:
    y_matrix = vstack((y_matrix, array([1])))
    else:
        y_matrix = vstack((y_matrix, array([-1])))

pinv_x = linalg.pinv(x_matrix)
print y_matrix
print pinv_x
w =  pinv_x*y_matrix 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T16:56:48.243

您使用的是数组，而不是矩阵。要从数组中获取矩阵乘法，您需要使用`dot()`函数，而不是`*`. 请参阅[此页面](http://www.scipy.org/NumPy_for_Matlab_Users#head-e9a492daa18afcd86e84e07cd2824a9b1b651935)。当`*`数据在数组中时，运算符是逐元素乘法，因此形状必须完全匹配。

# android - How to show files from a folder on sdcard in android?

> ID：10144993
> 
> 赞同：0
> 
> 时间：2012-04-13T16:50:12.077
> 
> 标签：android, android-sdcard

I have created a folder on sdcard for storing different type of files.

Now, i just need to show all file on click of application icon.

Can anyone provide me correct source code for this ?

Its urgent !!

Thanks in Advance !!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:57:32.737

你只是想要一个清单吗？

```
File directory = getMyDirectory(); // do this however you want
File[] files = directory.listFiles(); // gets an array of files in the dir. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:37:05.620

```
public void directoryPath(File path) {
        // TODO Auto-generated method stub
        if( path.exists() ) {
            File[] files = path.listFiles();
            for(int i=0; i<files.length; i++) {
                //you can do what you want here
            }
        }
    } 
```

上面的代码给出了文件夹中的所有文件......

# box2d - Box2d 中的速度度量是多少？

> ID：10144995
> 
> 赞同：0
> 
> 时间：2012-04-13T16:50:20.890
> 
> 标签：box2d, box2d-iphone

Box2d（iPhone，C++）中的速度度量是多少？

当我们使用 command`body->GetLinearVelocity()`时，我们得到什么度量？（例如，公里/小时或米/秒）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:03:13.913

Box2d 属于 MKS 系统，即米-千克-秒。所以度量必须是 m/s。

# php - 数组中值的排列

> ID：10144996
> 
> 赞同：3
> 
> 时间：2012-04-13T16:50:23.397
> 
> 标签：php, arrays, combinations, combinatorics

假设一个数组是

```
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => 4
) 
```

我想通过提供具有以下排列的两个参数（两个数组）来调用一个函数-

```
array(1) and array(2,3,4)
array(1,2) and array(3,4)
array(1,2,3) and array (4)
array(1,3) and array(2,4)
array(1,4) and array(2,3)
array(2) and array(1,3,4)
and so on... 
```

当然，实际的数组会更大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:00:52.047

我不知道如何调用“排列”（甚至可能不是排列），但是利用集合中的元素是有序的这一事实，它看起来很有希望（如果不是，则有索引的顺序，所以使用索引而不是值）以便从右向左移动并将所有左与右组合结合起来。

这可以通过递归或堆栈实现，我通常更喜欢堆栈。

建议的用法（封装函数调用）：

```
$funky = function($a, $b) {
    printf("(%s) and (%s)\n", implode(',', $a), implode(',', $b));
};

$paired = function($function) {
    return function(array $array) use ($function) {
        ...
    };
};

$funkyAll = $paired($funky);
$funkyAll(range(1, 5)); 
```

使用排序的（需要更多内存）堆栈消耗策略运行此命令会给出以下输出（按列格式化）：

```
(1) and (2,3,4,5)    (2,4) and (1,3,5)    (1,4,5) and (2,3)
(2) and (1,3,4,5)    (2,5) and (1,3,4)    (2,3,4) and (1,5)
(3) and (1,2,4,5)    (3,4) and (1,2,5)    (2,3,5) and (1,4)
(4) and (1,2,3,5)    (3,5) and (1,2,4)    (2,4,5) and (1,3)
(5) and (1,2,3,4)    (4,5) and (1,2,3)    (3,4,5) and (1,2)
(1,2) and (3,4,5)    (1,2,3) and (4,5)    (1,2,3,4) and (5)
(1,3) and (2,4,5)    (1,2,4) and (3,5)    (1,2,3,5) and (4)
(1,4) and (2,3,5)    (1,2,5) and (3,4)    (1,2,4,5) and (3)
(1,5) and (2,3,4)    (1,3,4) and (2,5)    (1,3,4,5) and (2)
(2,3) and (1,4,5)    (1,3,5) and (2,4)    (2,3,4,5) and (1) 
```

示例性实现（[作为 gist 的完整源代码](https://gist.github.com/2379191)）是内存优化的，并产生这个顺序（`array_pop`而不是`array_shift`）：

```
(1) and (2,3,4,5)    (2,4) and (1,3,5)    (1,4,5) and (2,3)
(2) and (1,3,4,5)    (2,5) and (1,3,4)    (1,3,4) and (2,5)
(3) and (1,2,4,5)    (2,4,5) and (1,3)    (1,3,5) and (2,4)
(4) and (1,2,3,5)    (2,3,4) and (1,5)    (1,3,4,5) and (2)
(5) and (1,2,3,4)    (2,3,5) and (1,4)    (1,2,3) and (4,5)
(4,5) and (1,2,3)    (2,3,4,5) and (1)    (1,2,4) and (3,5)
(3,4) and (1,2,5)    (1,2) and (3,4,5)    (1,2,5) and (3,4)
(3,5) and (1,2,4)    (1,3) and (2,4,5)    (1,2,4,5) and (3)
(3,4,5) and (1,2)    (1,4) and (2,3,5)    (1,2,3,4) and (5)
(2,3) and (1,4,5)    (1,5) and (2,3,4)    (1,2,3,5) and (4) 
```

执行：

```
$stack[] = array(array(), $array);
while (list($left, $right) = array_pop($stack)) {
    $min = end($left);
    foreach ($right as $value)
    {
        if ($value < $min) continue;
        $left2 = array_merge($left, array($value));
        $right2 = array_diff($right, $left2);
        if (!($left2 && $count = count($right2))) continue;
        $function($left2, $right2);
        --$count && $stack[] = array($left2, $right2);
    }
} 
```

我希望这很有用。

另一种与数组相关的算法：[用模数排序](https://stackoverflow.com/q/9445369/367456)（仅供参考，在写这个时我被提醒到那个矩阵的东西）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:47:12.027

如何将 array_pop 与 array_merge 一起使用

查一下这个网址

```
http://php.net/manual/en/function.array-pop.php 
```

并将 sarafov 的建议与 url 一起使用

```
http://www.sonyjose.in/blog/?p=62 
```

就像是

```
foreach($combinations as $combination)
    while(in_array($combination)){
        $arr = array_pop($combination);
        foo($fruit , $combination); 
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T17:51:05.457

我认为这就是你所需要的。

**代码 ：**

```
<?php

function combinations($arr, $n)
{
    $res = array();

    foreach ($arr[$n] as $item)
    {
        if ($n==count($arr)-1)
            $res[]=$item;
        else
        {
            $combs = combinations($arr,$n+1);

            foreach ($combs as $comb)
            {
                $res[] = "$item $comb";
            }
        }
    }
    return $res;
}

// Your ARRAY
//
// you can put as many items in each subarray as you like... 
// and as many subarrays as you like
$words = array(array('A','B'),array('C','D'), array('E','F'));

$combos = combinations($words,0);  // ALWAYS, call it with 0 as the last parameter
print_r($combos);

?> 
```

**输出 ：**

```
Array
(
    [0] => A C E
    [1] => A C F
    [2] => A D E
    [3] => A D F
    [4] => B C E
    [5] => B C F
    [6] => B D E
    [7] => B D F
) 
```

**用法：（**就像你的例子一样）

```
$combos = combinations(array(array(1,4),array(2,3))); 
```