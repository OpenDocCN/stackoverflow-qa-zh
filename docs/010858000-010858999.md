# StackOverflow 问答 10858000-10858999

# c++ - 将元素从向量复制到另一个

> ID：10858004
> 
> 赞同：0
> 
> 时间：2012-06-01T22:17:39.747
> 
> 标签：c++, stl, vector

我有两个指针向量：`arr`已经包含一些元素`temp`，以及我想要将特定元素复制到的新向量`arr`。例如，我想复制`arr`要复制到的第二个元素`temp`并从中删除`arr`。怎么做到呢？

我试过这个，但它并不好：

```
void deleteobject(vector < figure3d *> &arr,int index,vector < figure3d *> &temp)
{
     vector < figure3d * > :: iterator i=arr.begin();
     temp.insert(temp.begin(),*i);
     delete *i;
     arr.erase(i);
     temp[0]->print();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:31:07.150

您不应该`delete`复制您要复制的对象，因为您想保留它`temp`- 只是`erase`它来自`arr`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:35:27.853

`arr.begin()`给你一个指向第一个元素的迭代器，所以如果你想要第二个元素，你应该提前`i`一个：

```
++i; 
```

如果你想要第th 元素，你`index`应该提前`i`：`index`

```
i += index; 
```

将原始指针存储在向量中，并且在从向量中删除它们时必须记住删除它们是等待发生的内存泄漏。而 ass molbdnilo 在另一个答案中提到，您实际上有一个内存处理错误，因为您正在删除 temp 具有指针的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T22:35:31.953

据我了解，您想复制指定索引处的元素（参数`index`）并将其从 vector 中删除`temp`。这个函数看起来很简单，如下所示：

```
void deleteobject(std::vector<figure3d*> &arr, int index, std::vector<figure3d*> &temp)
{
    temp.insert(temp.begin(), arr[index]);
    arr.erase(arr.begin() + index);
} 
```

在这种情况下，您不会复制对象本身，而只是对其的引用——因此您不需要释放存储该对象的内存。

另请注意，在您调用的函数中，`delete *i;`它释放了存储指向的对象的内存`i`- 并且存储的指针`arr`变得无效（**悬空指针**），因为它指向已经释放的内存。

而且我还建议您使用对象向量而不是指向对象的指针向量 - 尽管元素被复制，但它通常足够快并且没有与之相关的麻烦的内存管理。如果您有充分的理由使用指针向量（[何时在 C++ 中使用指针](https://stackoverflow.com/q/2169322/1168156)），我建议您改用智能指针向量：如果您支持 TR1 或 C++11，请使用`std::shared_ptr`，否则使用`boost::shared_ptr`( [shared_ptr 在哪里？](https://stackoverflow.com/q/2918202/1168156)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T22:47:35.313

这看起来像是一份工作！
这样的事情是我会做的：

```
Class removePredicate{
Public: 
    bool operator() (figure3d** item) {
       //remove logic goes here
    }
};

remove_copy_if(arr.begin(), arr.end(), back_inserter(tmp), not1(removePredicate)); 
```

这会将您要删除的所有元素复制到 tmp 中。实际上从 arr 中删除它们只是 remove-erase 习惯用法的简单应用：

```
erase(remove_if(arr.begin(), arr.end(), not1(removePredicate)), arr.end()); 
```

可能有一种方法可以将这两个步骤组合成一行，但您可能会失去可读性。

# regex - Express中路由匹配的正则表达式

> ID：10858005
> 
> 赞同：77
> 
> 时间：2012-06-01T22:17:40.153
> 
> 标签：regex, node.js, express

我对正则表达式不是很好，所以我想确保我正确地做到了这一点。假设我有两条非常相似的路线，`/discussion/:slug/`并且`/page/:slug/`. 我想创建一个匹配这两个页面的路由。

```
app.get('/[discussion|page]/:slug', function(req, res, next) {
  ...enter code here...
}) 
```

这是正确的方法吗？现在我只是创建了两条单独的路线。

```
someFunction = function(req, res, next) {..}
app.get('/discussion/:slug', someFunction)
app.get('/page/:slug', someFunction) 
```

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-12-02T00:48:04.420

`app.get('/:type(discussion|page)/:id', ...)`作品

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-06-01T23:56:31.417

您应该使用文字 javascript 正则表达式对象，而不是字符串，并且 @sarnold 是正确的，您希望使用括号进行交替。方括号用于字符类。

```
const express = require("express");
const app = express.createServer();
app.get(/^\/(discussion|page)\/(.+)/, function (req, res, next) {
  res.write(req.params[0]); //This has "discussion" or "page"
  res.write(req.params[1]); //This has the slug
  res.end();
});

app.listen(9060); 
```

这`(.+)`意味着必须存在至少 1 个字符的 slug，否则此路由将不匹配。`(.*)`如果您希望它也匹配一个空的蛞蝓，请使用它。

# jquery - jquery.mobile.scrollview.js：避免滚动反弹回原来的位置

> ID：10858007
> 
> 赞同：1
> 
> 时间：2012-06-01T22:17:51.653
> 
> 标签：jquery, jquery-mobile, cordova, scroll, scrollview

我正在使用滚动视图滚动在我的应用程序中包含在 div 中的动态生成的表格，因此我无法将固定高度应用于 div 包装器。我让它滚动，但滚动内容弹回到起始位置。有没有人知道如何正确执行此操作，以便我可以移动内容并将其保留在我滚动的位置？

几天以来我一直在谷歌搜索以找到解决方案。希望这里有人遇到同样的问题并解决了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:37:00.603

该选项`scrollMethod`默认设置为`translate`。将其设置`scroll`为取消反弹（此外，在移动设备上的性能会更好）。

# java - Android 共享意图选择器 - 与 Facebook/Twitter 社交媒体等共享文本

> ID：10858009
> 
> 赞同：6
> 
> 时间：2012-06-01T22:18:00.257
> 
> 标签：java, android, facebook, android-intent

如果我只发送文本，共享意图选择器不会将 Facebook/Twitter 作为选项。

只有 Gmail、Skype 和 Evernote 是选项。

这是我的代码

```
Intent shareIntent = new Intent(Intent.ACTION_SEND);

shareIntent.setType("plain/text");
shareIntent.putExtra(Intent.EXTRA_TEXT, text)
startActivity(Intent.createChooser(shareIntent, "Share using")); 
```

我尝试了不同的 setType() 组合，包括“text/*”、“text/html”和在 putExtra 中传递 HTML 文本，如下所示：

```
shareIntent.putExtra(Intent.EXTRA_TEXT, Html.fromHtml("<p>This is the text that will be shared.</p>")); 
```

当我使用“文本/纯文本”时，Facebook 会作为一个选项出现，但在选择它时不会加载文本。但文本确实会加载到 Twitter、电子邮件、SMS。

有没有其他人遇到过这个问题？

当我分享一张图片时，没有问题，Facebook 以及其他社交媒体应用程序都在列表中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T17:26:02.607

根据文档，它也应该是“text/plain”而不是“plain/text”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T22:33:05.700

这取决于每个应用程序定义的意图过滤器。
例如，如果我添加意图过滤器 `android.intent.action.send`

如果我从图库中选择单个图像，我的应用程序将出现在列表中。但是，如果我选择多个我的应用程序将不会出现，因为我没有添加意图文件`android.intent.action.send_multiple`

因此，这取决于 facebook 过滤的意图。您需要查看发行说明或帮助或开发人员页面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T19:00:12.060

facebook 问题是 facebook 权限的限制。使用脸书 API

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-07T10:40:49.953

**通过推特分享：**

```
Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
shareIntent.setType("text/plain");

shareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, (String)v.getTag(R.string.app_name));

shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, (String)v.getTag(R.drawable.ic_launcher)); 
```

// 用于查找 twitter 包名 ---- >>

```
 PackageManager pm = v.getContext().getPackageManager();

   List<ResolveInfo> activityList = pm.queryIntentActivities(shareIntent, 0);

     for (final ResolveInfo app : activityList) 
      {
        if ("com.twitter.android.PostActivity".equals(app.activityInfo.name))
          {
             final ActivityInfo activity = app.activityInfo;
             final ComponentName name = new ComponentName(activity.applicationInfo.packageName, activity.name);
             shareIntent.addCategory(Intent.CATEGORY_LAUNCHER);
             shareIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
             shareIntent.setComponent(name);
             v.getContext().startActivity(shareIntent);
            break;
          }
        } 
```

**通过 Facebook 分享**

```
 Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
   shareIntent.setType("text/plain");
   shareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,String)v.getTag(R.string.app_name));

   shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, (String) 

v.getTag(R.drawable.ic_launcher));

// finding facebook package name 

   PackageManager pm = v.getContext().getPackageManager();
   List<ResolveInfo> activityList = pm.queryIntentActivities(shareIntent, 0);
     for (final ResolveInfo app : activityList) 
     {
         if ((app.activityInfo.name).contains("facebook")) 
         {
           final ActivityInfo activity = app.activityInfo;
           final ComponentName name = new ComponentName(activity.applicationInfo.packageName, activity.name);
          shareIntent.addCategory(Intent.CATEGORY_LAUNCHER);
          shareIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
          shareIntent.setComponent(name);
          v.getContext().startActivity(shareIntent);
          break;
        }
      } 
```

**通过 Gmail 分享**

```
 Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);

   shareIntent.setType("text/plain");         

shareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT(String)v.getTag(R.string.app_name));

 shareIntent.putExtra(android.content.Intent.EXTRA_TEXT(String)v.getTag(R.drawable.ic_launcher));

// finding gmail package name  --- 

  PackageManager pm = v.getContext().getPackageManager();

   List<ResolveInfo> activityList = pm.queryIntentActivities(shareIntent, 0);

       for (final ResolveInfo app : activityList) 
        {
          if ((app.activityInfo.name).contains("gmail")) 
           {
             final ActivityInfo activity = app.activityInfo;
             final ComponentName name = new ComponentName(activity.applicationInfo.packageName, activity.name);
            shareIntent.addCategory(Intent.CATEGORY_LAUNCHER);
            shareIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
             shareIntent.setComponent(name);
             v.getContext().startActivity(shareIntent);
             break;
           }
       } 
```

# extjs - ExtJS+Selenium：@value 什么也没给

> ID：10858034
> 
> 赞同：0
> 
> 时间：2012-06-01T22:21:36.153
> 
> 标签：extjs, selenium

我正在使用只读表单并将其加载到控制器中

```
"popup.down('form').loadRecord(record);" 
```

表单字段定义为

```
items:[
{
  xtype:'textfield',
  fieldLabel:'Array Id',
  name:'id'
},
{
  xtype:'textfield',
  fieldLabel:'Array Name',
  name:'name'
}
] 
```

价值观：`[ id:10, name: 'testing']`

生成的 HTML 代码为：

```
<form id = 'arraydevicewindowid'>

  <input type="text" autocomplete="off" class="x-form-field x-form-text" size="20"     name="${array.arrayName}" id="ext-gen1314" readonly="" aria-readonly="true" aria-invalid="false" placeholder="--NA--" role="textbox" aria-describedby="textfield-1260-errorEl" aria-required="false" data-errorqtip="" style="width: 281px; height: 23px;">

</form> 
```

我尝试使用以下 xpath 从 Extjs 生成的文本字段组件中选择值：

```
(//div[@id='arraydevicewindowid']//input)[1]//@value 
```

但没有运气。

```
(//div[@id='arraydevicewindowid']//input)[1] 
```

可以让我选择我想要的文本字段，但`@value`不起作用。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:47:23.633

问题是 Selenium 不能与返回 HTML 元素以外的任何内容的 XPath 一起使用。但是`value`属性 ... 是节点的属性，XPath 本质上返回一个字符串。因此，您必须选择正确的元素，然后使用 Selenium 内置方法获取其值。

使用 Selenium IDE：使用[`storeValue`](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html#storeValue).

使用 Java + Selenium RC：

```
// assuming 'selenium' is a healthy instance of Selenium
String value = selenium.getValue("xpath=yourXpath"); 
```

使用 Java + Selenium WebDriver：

```
// assuming 'driver' is a healthy instance of WebDriver
String value = driver.findElement(By.xpath('yourXpath')).getAttribute("value"); 
```

# dynamics-crm - 将备注从任务复制到案例

> ID：10858040
> 
> 赞同：1
> 
> 时间：2012-06-01T22:23:11.870
> 
> 标签：dynamics-crm, dynamics-crm-2011

我有一个手动调用的过程，它与帐户实体相关联。这个过程有许多步骤。第一步是创建一个任务并将其分配给某人。预计此人将添加一些注释并完成任务。

在这个过程中，我有一个步骤来创建服务案例。创建完成后，我想将上面任务中的注释复制到新创建的服务案例中。

我创建了一个自定义工作流活动来尝试完成此操作。我已经在我的流程中部署并使用它而没有任何错误，它确实将内容复制到服务案例的注释字段中，但是它复制了任务的标题，而不是注释内容，我不能找出原因。

```
public class CopyNotes : CodeActivity
{
    protected override void Execute(CodeActivityContext executionContext)
    {
        //Create the context
        IWorkflowContext context = executionContext.GetExtension<IWorkflowContext>();
        IOrganizationServiceFactory serviceFactory = executionContext.GetExtension<IOrganizationServiceFactory>();
        IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);

        //get the notes associated with the source entity
        Guid copyFromId = CopyFrom.Get(executionContext).Id;
        Guid copyToId = CopyTo.Get(executionContext).Id;

        EntityCollection copyFromNotes = RetrieveNotes(service, copyFromId);

        if (copyFromNotes.Entities.Any())
        {
            foreach (Entity e in copyFromNotes.Entities)
            {
                Entity newNote = new Entity("annotation");
                newNote.Attributes["subject"] = e.Attributes["subject"];
                newNote.Attributes["notetext"] = e.Attributes["notetext"];
                newNote.Attributes["objectid"] = new EntityReference() { Id = copyToId, LogicalName = CopyTo.Get(executionContext).LogicalName };
            }
        }
    }

    private EntityCollection RetrieveNotes(IOrganizationService service, Guid relatedObject)
    {

        ConditionExpression condition = new ConditionExpression();
        condition.AttributeName = "objectid";
        condition.Operator = ConditionOperator.Equal;
        condition.Values.Add(relatedObject.ToString());

        ColumnSet columns = new ColumnSet("subject", "notetext");

        QueryExpression query = new QueryExpression();
        query.ColumnSet = columns;
        query.EntityName = "annotation";
        query.Criteria.AddCondition(condition);

        EntityCollection results = service.RetrieveMultiple(query);

        return results;

    }

    [RequiredArgument]
    [ReferenceTarget("task")]
    [Input("Copy notes from item")]
    public InArgument<EntityReference> CopyFrom { get; set; }

    [RequiredArgument]
    [ReferenceTarget("incident")]
    [Input("Copy notes to item")]
    public InArgument<EntityReference> CopyTo { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T05:56:46.857

我认为您需要在定义 newNote 之后实际创建它。

```
foreach (Entity e in copyFromNotes.Entities)
{
     Entity newNote = new Entity("annotation");
     newNote.Attributes["subject"] = e.Attributes["subject"];
     newNote.Attributes["notetext"] = e.Attributes["notetext"];
     newNote.Attributes["objectid"] = new EntityReference() { Id = copyToId, LogicalName = CopyTo.Get(executionContext).LogicalName };
     service.Create(newNote);
} 
```

一旦我这样做了，您的代码就可以很好地创建一个带有标题和注释文本的新注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:20:10.130

如果异步创建速度足够快，您可以使用标准工作流程执行此操作。

安德烈亚斯

# facebook - Rails 预启动 + 设计 + OmniAuth Facebook

> ID：10858046
> 
> 赞同：2
> 
> 时间：2012-06-01T22:23:57.860
> 
> 标签：facebook, ruby-on-rails-3, devise, omniauth

有没有人得到 Rails Prelaunch 项目：[https](https://github.com/RailsApps/rails-prelaunch-signup) ://github.com/RailsApps/rails-prelaunch-signup使用 Devise+OmniAuth Facebook 登录：[https](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview) ://github.com/plataformatec/devise/wiki/OmniAuth:-Overview ？

我可以登录 Facebook 并检索信息，但是，当

```
sign_in_and_redirect @user, :event => :authentication 
```

被调用时，它会回到我的登录屏幕，说即使我能够在实现 OmniAuth Facebook 之前登录（预启动要求在允许登录之前激活帐户），该帐户也没有被激活。

更新：

我一直在调试更多。我试图通过电子邮件登录。似乎在电子邮件登录成功后，它仍然尝试使用 cookie 中的任何内容通过 Facebook 进行身份验证。

# php - 我的 php 代码中有一个解析错误

> ID：10858051
> 
> 赞同：-1
> 
> 时间：2012-06-01T22:24:24.830
> 
> 标签：php

我有一段我正在努力的代码。我希望 onclick 函数在函数中显示“问题”行，但是当我放在`'$questionrow['QuestionContent']'`括号内时，它给了我一个错误说明：

解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，在第 119 行的 /xxx7/Mobile_app/previousquestions.php 中需要 T_STRING 或 T_VARIABLE 或 T_NUM_STRING

如何在下面的函数中正确地将 QuestionContent 放在括号内：

```
 onclick='parent.addwindow('$questionrow['QuestionContent']');'>Add</button> 
```

下面是整个代码：

```
<?php

$output = "";

        while ($questionrow = mysql_fetch_assoc($questionresult)) {
$output .= "
<table>
      <tr>
<td class='questiontd'>{$questionrow['QuestionContent']}</td>
      <td class='addtd'><button type='button' class='add' onclick='parent.addwindow('$questionrow['QuestionContent']');'>Add</button></td>
      </tr>";
        }
        $output .= "        </table>";

        echo $output;

        ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T22:28:19.790

`{}`像第一个一样把它放在一边：

```
'parent.addwindow('{$questionrow['QuestionContent']}');'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T22:38:31.700

我发现关闭您的字符串并与句点连接要容易得多。它比将它们封装在大括号中更容易阅读。

```
<?php
$output = "";
while ($questionrow = mysql_fetch_assoc($questionresult))
{
    $output .= "
    <table>
        <tr>
            <td class='questiontd'>" . $questionrow['QuestionContent'] . "</td>
            <td class='addtd'><button type='button' class='add' onclick='parent.addwindow('" . $questionrow['QuestionContent'] . "');'>Add</button></td>
        </tr>";
}
$output .= "</table>";
echo $output;
?> 
```

# android - OpenCV2.4 与 Android Native Activity

> ID：10858055
> 
> 赞同：3
> 
> 时间：2012-06-01T22:24:53.630
> 
> 标签：android, opencv, native-activity

我目前面临的问题与[此问题中提出的问题](https://stackoverflow.com/questions/7346580/problem-using-opencv2-3-1-with-android-native-activity)相同，只是我使用的是 2.4 版本而不是 2.3.1。

我已将本机活动（从 ndk 示例）转换为 c++ 并修改了 android.mk 和 application.mk。

我有同样的错误（有 ~Mat 等等）。

当我阅读问题的答案时，我意识到我需要添加`OPENCV_INSTALL_MODULES:=on and OPENCV_LIB_TYPE:=STATIC`（这很奇怪，因为我有另一个使用本机 openCV 的项目不需要这两行）。

但它仍然无法正常工作。

Android.mk 如下：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

OPENCV_LIB_TYPE:=STATIC
OPENCV_INSTALL_MODULES:=on

include includeOpenCV.mk

ifeq ("$(wildcard $(OPENCV_MK_PATH))","")
    #try to load OpenCV.mk from default install location
    include $(TOOLCHAIN_PREBUILT_ROOT)/user/share/OpenCV/OpenCV.mk
else
    include $(OPENCV_MK_PATH)
endif

LOCAL_MODULE    := native-activity
LOCAL_SRC_FILES := main.cpp engine.cpp
LOCAL_LDLIBS    := -llog -landroid -lEGL -lGLESv1_CM
LOCAL_STATIC_LIBRARIES += android_native_app_glue

include $(BUILD_SHARED_LIBRARY)

$(call import-module,android/native_app_glue) 
```

我收到以下错误：

```
./obj/local/armeabi-v7a/libopencv_core.a(persistence.cpp.o): In function `icvPuts(CvFileStorage*, char const*)':
persistence.cpp:(.text._ZL7icvPutsP13CvFileStoragePKc+0x20): undefined reference to `gzputs'
./obj/local/armeabi-v7a/libopencv_core.a(persistence.cpp.o): In function `icvGets(CvFileStorage*, char*, int)':
persistence.cpp:(.text._ZL7icvGetsP13CvFileStoragePci+0x26): undefined reference to `gzgets'
./obj/local/armeabi-v7a/libopencv_core.a(persistence.cpp.o): In function `icvXMLSkipSpaces(CvFileStorage*, char*, int)':
persistence.cpp:(.text._ZL16icvXMLSkipSpacesP13CvFileStoragePci+0x1e2): undefined reference to `gzgets'
persistence.cpp:(.text._ZL16icvXMLSkipSpacesP13CvFileStoragePci+0x208): undefined reference to `gzeof'
persistence.cpp:(.text._ZL16icvXMLSkipSpacesP13CvFileStoragePci+0x33c): undefined reference to `gzeof'
./obj/local/armeabi-v7a/libopencv_core.a(persistence.cpp.o): In function `_ZL16icvYMLSkipSpacesP13CvFileStoragePcii.clone.3':
persistence.cpp:(.text._ZL16icvYMLSkipSpacesP13CvFileStoragePcii.clone.3+0x124): undefined reference to `gzgets'
persistence.cpp:(.text._ZL16icvYMLSkipSpacesP13CvFileStoragePcii.clone.3+0x170): undefined reference to `gzeof'
/cygdrive/d/soft/NVPACK/android-ndk-r7c/build/core/build-binary.mk:366: recipe for target `obj/local/armeabi-v7a/libnative-activity.so' failed
persistence.cpp:(.text._ZL16icvYMLSkipSpacesP13CvFileStoragePcii.clone.3+0x28e): undefined reference to `gzeof'
./obj/local/armeabi-v7a/libopencv_core.a(persistence.cpp.o): In function `cvReleaseFileStorage':
persistence.cpp:(.text.cvReleaseFileStorage+0x24): undefined reference to `gzclose'
./obj/local/armeabi-v7a/libopencv_core.a(persistence.cpp.o): In function `cvOpenFileStorage':
persistence.cpp:(.text.cvOpenFileStorage+0x66e): undefined reference to `gzopen'
persistence.cpp:(.text.cvOpenFileStorage+0x8fc): undefined reference to `gzclose'
persistence.cpp:(.text.cvOpenFileStorage+0xaea): undefined reference to `gzrewind'
persistence.cpp:(.text.cvOpenFileStorage+0xbee): undefined reference to `gzrewind'
persistence.cpp:(.text.cvOpenFileStorage+0xc0a): undefined reference to `gzclose'
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi-v7a/libnative-activity.so] Error 1 
```

有什么我错过的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-18T12:20:48.550

虽然这是一个老问题，但我遇到了同样的问题并通过添加来修复它

```
LOCAL_LDLIBS    += -lz # Compression library 
```

到我的 Android.mk

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T22:52:22.087

尝试更换

```
LOCAL_LDLIBS    := -llog -landroid -lEGL -lGLESv1_CM 
```

和

```
LOCAL_LDLIBS    += -llog -landroid -lEGL -lGLESv1_CM 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-05T07:51:10.577

我结束了本地等离子项目的尝试（其中显示是通过写入位图来完成的）并且效果很好。

也许*GLES*搞砸了*OpenCV。*我认为这两个项目之间没有任何其他区别。

在某种程度上，问题得到了解决。不过，如果有人遇到同样的问题并解决了它，我很想了解导致它的原因以及如何解决它。

# java - 如何将我自己的 java 类加载到 javascript 中？

> ID：10858068
> 
> 赞同：0
> 
> 时间：2012-06-01T22:26:19.177
> 
> 标签：java, javascript

我需要有能力在 JS 中使用我自己的 java 类，但我不知道该怎么做，因为我是 JS 的新手。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:32:45.887

看看这些。

[DWR（直接 Web 远程处理）](http://directwebremoting.org/dwr/index.html)

[GWT（谷歌网络工具包）](https://developers.google.com/web-toolkit/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:28:25.983

请参阅本指南：[http ://docs.oracle.com/javase/1.5.0/docs/guide/plugin/developer_guide/js_java.html](http://docs.oracle.com/javase/1.5.0/docs/guide/plugin/developer_guide/js_java.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T22:31:04.307

Java 和 JavaScript 确实很少有共同点，这就是它被正式重命名为 ECMAScript 的原因。您可以使用交叉编译器为您完成一些工作（GWT 将 Java 编译为 JavaScript），但实际上它们在不同的习语中是两个非常不同的东西。我假设您在这里谈论的是客户端浏览器 JavaScript。它已被用于古怪的 hijynx 的服务器端实现。

# php - 如何根据体重选择数字

> ID：10858072
> 
> 赞同：3
> 
> 时间：2012-06-01T22:26:41.337
> 
> 标签：php, random

假设我有一个对象：

```
$person->name = array('James',
                      'Sam',
                      'Kevin',
                      'Mike');
$person->weight = array(1,
                        3,
                        1,
                        7); 
```

在上面的示例`James`中，权重为`1`，`Sam`权重为`3`等（基于索引位置）

我希望能够只呼应一个人的名字。权重越高，您的名字被选中的机会就越大。权重越低，您的名字被选中的机会就越低。有点像彩票，但有权重。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T22:32:14.170

这应该有效：

```
$weighted = array();
foreach($person->weight as $key => $value) {
    $weighted = array_merge($weighted, array_fill(0, $value, $key));
}
$index = array_rand($weighted);
echo $person->name[$index]; 
```

基于[这个答案](https://stackoverflow.com/a/4623099/625231)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T22:31:42.560

创建一个新数组，将名字 Sam 添加到数组中 3 次，mike 7 次，其他一次，然后随机选择一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T22:41:51.543

You could also sum up all the weights and generate a random number between one and that sum. Then you could iterate over the array of weights summing them up until the result is >= the random number and take that person. Might be slightly faster.

# r - 在R中实现具有不同绘图宽度的多个绘图

> ID：10858074
> 
> 赞同：4
> 
> 时间：2012-06-01T22:26:49.790
> 
> 标签：r, plot

我想在单个绘图窗口中创建多个绘图，其中每个绘图的面板宽度与每个绘图的 xlim 成正比。

目前我使用：

```
layout(matrix(c(1:8,10,9), 5, 2, byrow = FALSE), widths=2)       
layout.show(10) 
```

基本上，我想`width`单独应用于每个图而不是列中的所有图。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T08:30:49.823

`layout`仅当绘图可以排列在规则网格上时才有效，但它们不需要具有相同的宽度。

```
layout(
  matrix(
    c(1,1,2,3,3,2,4,5,5,6,6,6), 
    nc=3, byrow = TRUE
  )
)
layout.show(6) 
```

如果你想要一些非常不规则的东西，你可以使用`par(fig=...,new=TRUE)`.

```
plot.new()
par(mar=c(2,2,1,1))
k <- 4
f <- function() 
  plot(rnorm(20),rnorm(20), xlab="", ylab="", main="", las=1)
for(i in 1:k) {
  par(fig=c(0,i/(k+1), (i-1)/k, i/k), new=TRUE)
  f()
  par(fig=c(i/(k+1),1, (i-1)/k, i/k), new=TRUE)
  f()
} 
```

# memcached - Memcached 和虚拟内存

> ID：10858076
> 
> 赞同：4
> 
> 时间：2012-06-01T22:27:14.763
> 
> 标签：memcached, virtual-memory

根据[这个线程](http://apartm.net/hackernews/index.php?id=3519145)（不是很可靠，我知道）memcached 不使用磁盘，甚至不使用**虚拟内存**。

我的问题是：

1.  这是真的？

2.  如果是这样，memcached 如何确保分配给他的内存**永远不会溢出**到磁盘？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T22:38:18.953

`memcached`避免通过两种机制进行交换：

1.  通知系统管理员机器不应该去交换。这允许管理员可能不为机器配置交换空间（对我来说似乎是个坏主意）或配置正在运行的应用程序的内存限制以确保没有任何东西进入交换。（不仅仅是`memcached`，而是*所有*应用程序。）

2.  `mlockall(2)`可以使用系统调用 ( )`-k`来确保*所有*进程的内存始终锁定在内存中。这是通过`setrlimit(2)` `RLIMIT_MEMLOCK`控件调节的，因此管理员需要进行修改，例如`/etc/security/limits.conf`允许`memcached`用户帐户锁定比正常情况更多的内存。（锁定内存是为了防止不受信任的用户帐户使系统的其余部分缺乏可用内存。）

*假设*机器的目的是运行，这两个步骤都是公平的`memcached`，也许其他的很少。这通常是一个公平的假设，因为更大的部署将把多台（或多台）机器专用于`memcached`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T22:52:59.597

您将 memcached 配置为使用固定数量的内存。当该内存已满时，memcached 只会删除旧数据以保持在限制之下。就是这么简单。

# c# - 计算位数组中 1 的所有可能位置

> ID：10858077
> 
> 赞同：1
> 
> 时间：2012-06-01T22:27:30.770
> 
> 标签：c#

我有一个方法，它接收一个数字`n`作为参数并计算所有可能的组合，正好包含`n 1`在一个 bit(0,1) 数组中，返回的结果是数字 1 的位置

例如假设我们的位数组有`3`元素和

```
 for n = 1
   the function gives : [0] - [1] - [2] (three possible positions)
 for n=2
   the result will be [0,1] -  [0,2] - [1,2] (three possible positions) 
```

对于 n=3，结果将是 [0,1,2] （一个可能的位置）

该函数对具有 3 个元素的数组正常工作，但对 4 个元素给出错误的结果

```
 n = 2 result : [0,1] - [0,2] - [0,3] -[1,2] - [1,3] - [1,2,3] 
```

任何人都可以解释为什么它会为 arraysize >= 4 给出意想不到的结果

提前致谢

```
 const int arraySize = 4;

    static private void Positions(int n, int start, ArrayList prepend, ArrayList results)
    {
        ArrayList tmp = new ArrayList(prepend);
        int end = arraySize - n;
        for (int i = start; i <= end; i++)
        {
            if (end < arraySize - 1)
            {
                prepend.Add(i);
                Positions(n - 1, i + 1, prepend, results);                    
                prepend = tmp;
            }
            else
                results.Add(new ArrayList(prepend) { i });
        }
    } 
```

这就是我使用该方法的方式

```
 static void Main(string[] args)
    {
        ArrayList results = new ArrayList();            
        Positions(2, 0, new ArrayList(), results);

        foreach (ArrayList array in results)
        {
            foreach (var elem in array)
                Console.Write(elem);
            Console.WriteLine();
        }

        Console.Read();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:49:59.403

我认为问题出在这一行：

```
prepend = tmp; 
```

您打算我认为在方法开始时将 prepend 数组的状态恢复为原始状态。但是，您正在设置直接引用，因此在每次循环迭代时，您都在修改原始的前置数组。如果您每次都在这里复制数组，它似乎可以正常工作：

```
prepend = new ArrayList(tmp); 
```

然而，所有这些数组的复制都不是很有效。您可以尝试删除刚刚添加的条目以及另一种选择：

```
prepend.Add(i);
Positions(n - 1, i + 1, prepend);
prepend.Remove(i); 
```

然后从技术上讲，您甚至不再需要`tmp`副本。

**编辑**：另外，对于你的`if`陈述，我认为你想要类似的东西

```
if (n > 1) 
```

# tomcat7 - 带有 Java 7 JRE_HOME 的 Tomcat 7 不处理 Java 7 bean

> ID：10858078
> 
> 赞同：2
> 
> 时间：2012-06-01T22:27:48.987
> 
> 标签：tomcat7, java-7

我已经使用*Java 7* JRE_HOME在*Ubuntu 12上设置了我的**Tomcat 7 ：*

 **```
$ /usr/share/tomcat7/bin/version.sh 
Using CATALINA_BASE:   /usr/share/tomcat7
Using CATALINA_HOME:   /usr/share/tomcat7
Using CATALINA_TMPDIR: /usr/share/tomcat7/temp
Using JRE_HOME:        /usr/lib/jvm/java-7-openjdk-i386
Using CLASSPATH:       /usr/share/tomcat7/bin/bootstrap.jar:/usr/share/tomcat7/bin/tomcat-juli.jar
Server version: Apache Tomcat/7.0.26
Server built:   Apr 11 2012 12:24:08
Server number:  7.0.26.0
OS Name:        Linux
OS Version:     3.2.0-24-generic-pae
Architecture:   i386
JVM Version:    1.7.0_03-b147
JVM Vendor:     Oracle Corporation 
```

但是在部署一个编译为 1.7 的简单 JSF 应用程序时，Tomcat 会抱怨

```
SEVERE: Critical error during deployment: 
com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! java.util.concurrent.ExecutionException: java.lang.UnsupportedClassVersionError: com/corejsf/UserBean : Unsupported major.minor version 51.0 (unable to load class com.corejsf.UserBean) 
```

当我将 Ant build.xml 更改为编译为“1.6”时，应用程序部署良好。这种与 Java 7 的不兼容是否可以预料？关于 Tomcat 7 / Java 7 兼容性有一个 6 个月大的[相关问题](https://stackoverflow.com/questions/9294355/is-tomcat-7-now-compatible-with-java-7)，但那里的答案似乎表明支持 Java 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T15:41:28.000

我遇到了完全相同的问题。这是我的步骤：

编辑文件：

> /etc/default/tomcat7

替换 JAVA_HOME

从

> JAVA_HOME=/usr/lib/jvm/openjdk-6-jdk

到

> JAVA_HOME=/usr/lib/jvm/jdk1.7.0_09

重新启动 Tomcat。**

# python - python - 从矩阵到单行字典

> ID：10858084
> 
> 赞同：1
> 
> 时间：2012-06-01T22:28:43.077
> 
> 标签：python, dictionary, list-comprehension

> 矩阵

是具有相同长度的列表的列表。我必须返回表格的字典

```
{i:(l1[i],l2[i],...,lm[i])} 
```

其中键 i 与每个列表中第 i 个元素的元组匹配。说

```
matrix=[[1,2,3,4],[9,8,7,6],[4,8,2,6]] 
```

所以这一行：

`>>> dict([(i,tuple(matrix[k][i] for k in xrange(len(matrix)))) for i in xrange(len(matrix[0]))])`

做得很好并输出：

`{0: (1, 9, 4), 1: (2, 8, 8), 2: (3, 7, 2), 3: (4, 6, 6)}`

但如果矩阵为空则失败：`matrix=[]`. 输出应该是：`{}`

我该如何处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T22:36:03.990

这个怎么样：

```
>>> matrix = [[1,2,3,4],[9,8,7,6],[4,8,2,6]]
>>> dict(enumerate(zip(*matrix)))
{0: (1, 5, 4), 3: (4, 8, 6), 2: (3, 7, 2), 1: (2, 6, 8)}    
>>> matrix = []
>>> dict(enumerate(zip(*matrix)))
{} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T22:38:23.287

尝试更改部分“len(matrix[0])” 如果矩阵为空，这将尝试查找不存在的索引。

而是让它

len(matrix[0]) if matrix else 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T03:37:26.143

如果您想要一个简单的解决方案（而不是知道您的解决方案出了什么问题），我建议您使用列表而不是字典。就其大小和键而言，将其视为矩阵是相当静态的。

这可以简单地通过`zip(*matrix)`

```
>>> matrix = [[1,2,3,4],[9,8,7,6],[4,8,2,6]]
>>> dict_ = dict(enumerate(zip(*matrix)))
>>> list_ = zip(*matrix)
>>> for key_ in dict_:
...     print dict_[key_] == list_[key_]
...
True
True
True
True 
```

# javascript - 用于逗号分隔字符串的 Javascript 正则表达式

> ID：10858090
> 
> 赞同：1
> 
> 时间：2012-06-01T22:29:43.760
> 
> 标签：javascript, regex

我需要一个对输入/类型=隐藏字段的值执行“包含”功能的正则表达式。此隐藏字段将唯一值存储在逗号分隔的字符串中。

这是一个场景。
value: "mix" 需要添加到隐藏字段。仅当它不作为逗号分隔值存在时才会添加。

由于我对正则表达式的了解有限，我无法阻止搜索返回所有出现的“混合”值。例如，如果：hiddenField.val = 'mixer, mixon, mixx'，则正则表达式始终返回 true，因为所有三个单词都包含“mix”字符。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T22:41:53.893

您可以使用`\b`元字符来设置单词边界：

```
var word = "mix";
new RegExp("\\b" + word + "\\b").test(hidden.value); 
```

**演示：http:** [//jsfiddle.net/ztYff/](http://jsfiddle.net/ztYff/)

* * *

**更新。**为了保护我们在使用变量而不是硬编码时可能出现问题的正则表达式（见下面的注释），我们需要对`word`变量中的特殊字符进行转义。[一种可能的解决方案](http://simonwillison.net/2006/jan/20/escape/)是使用以下方法：

```
RegExp.escape = function(text) {
    return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
} 
```

**演示：http:** [//jsfiddle.net/ztYff/1/](http://jsfiddle.net/ztYff/1/)

* * *

**更新 2.**按照[@Porco 的回答](https://stackoverflow.com/a/10858113/1249581)，我们可以结合正则表达式和字符串拆分来获得另一个通用解决方案：

```
hidden.value.split(/\s*,\s*/).indexOf(word) != -1; 
```

**演示：http:** [//jsfiddle.net/ztYff/2/](http://jsfiddle.net/ztYff/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T22:31:39.117

```
hiddenField.val.split(',').indexOf('mix') >= 0 
```

也可以使用正则表达式（startofstring OR comma + mix + endofstring OR comma）：

```
hiddenField.val.match(/(,|^)mix($|,)/) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T22:32:53.617

```
hiddenField.val.match(/^(mix)[^,]*/); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T22:48:12.957

怎么样：

```
/(^|,)\s*mix\s*(,|$)/.test(field.value) 
```

It matches `mix`, either if it is at the beginning of a string or at the end or in between commas. If each entry in the list can consist of multiple words, you might want to remove the `\s*`.

# javascript - 用于构建动态但服务器端驱动的前端的 JavaScript 框架

> ID：10858096
> 
> 赞同：1
> 
> 时间：2012-06-01T22:30:04.733
> 
> 标签：javascript, jquery, frameworks, knockout.js, javascript-framework

我正在考虑构建一个或多或少包含几个嵌套列表的小型应用程序，并且在每个列表中选择各种项目将过滤其他嵌套列表的内容。

**清单一**

*   苹果
    *   电话

        *   苹果手机
    *   电脑

        *   MacBook Air
        *   三星
    *   电话

        *   银河小号

**清单二**

*   百思买
    *   密歇根州安娜堡
    *   伊利诺伊州芝加哥
*   沃尔玛
    *   密歇根州兰辛

如果用户点击“Apple > Phone”，服务器将在列表 2 中找到相关条目，并更新列表 2 以仅显示“Best Buy”（假设 Best Buy 是唯一一家销售 Apple 制造的手机的商店）

我的问题是，有没有人推荐我应该使用什么前端 JS 库来构建它？这将基于来自服务器的 AJAX JSON 响应来更新 DOM（列表）。

我查看了 KnockoutJS，但尝试为每个列表创建 viewModel 并通过 KnockoutJS 映射库更新它似乎变得一团糟。

我正在考虑简单地使用 jQuery，但我不喜欢用它构建大部分 DOM（它似乎很快变得丑陋）。

我想避免的一件事（以及为什么我在看 KnockoutJS）是我不喜欢在代码中编写标记。我喜欢在“HTML”中维护我的标记，并通过框架将 JS 数据“绑定”到这些元素的想法。

此外，我希望将 jQuery 用于所有视觉“绒毛”、事件绑定等。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:02:23.887

我最终选择了 Backbone.js [1]

就绑定而言，它似乎比 Knockout.js 更灵活一些。我正在使用 Backbone 支持的 JS 模板来构建每个列表级别。这需要一些代码，但 Backbone 非常灵活（因此需要一些代码）。我确信这在许多其他 JS 框架中是可能的，但我认为我已经能够取得更大的进步更冗长，但正因为如此，它更容易拼凑出一切是如何运作的。

[1] [http://backbonejs.org/](http://backbonejs.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:48:57.010

这更像是一个部分答案，试图解决“在'HTML'中维护......标记”的概念。我会在 HTML 中创建一个通用菜单项，它可以作为每个菜单项的模板，如下所示：

```
<li id="menuItemTemplate" class="menuItem">
  <span class="menuItemText"></span>
  <ul class="submenu"></ul>
</li> 
```

这不会出现在您页面上的可见位置；它只是为每个菜单项插入的 HTML。然后，当您添加菜单项时，您的 JavaScript 将负责`menuItem`在列表中添加所需数量的元素。就 HTML 操作而言，JavaScript 只需要执行诸如添加`id`或`class`属性之类的操作来组织或设置数据样式，以及添加每个项目的文本内容。示例实现可能如下所示（我喜欢 jQuery）：

```
function loadMenuItem(text, parentId) {
  // Grab the template
  var newItemHtml = $("#menuItemTemplate")[0];
  // Set its id to something unique
  $(newItemHtml).attr("id", getNextId());
  // Set the text
  $(newItemHtml).find("span.menuItemText").html(text);
  // Put it in the clicked menu
  $(parentId + "ul.submenu").append( newItemHtml );
} 
```

不过，最后，我不会为您的项目编程。我只能给你我的偏好。如果这需要很长时间，我想说对你来说最好的办法是尝试所有听起来有趣的框架（显然是小规模的），以大致了解如何你喜欢在每一个中开发 DOM 转换应用程序。这将使您更好地了解您更喜欢哪个，并向您介绍不同的框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T10:33:14.897

不是这个问题的直接答案 - 仍然值得一看`Kendo UI MVVM`

1.  [通过三个简单的步骤使用 Kendo UI 的 MVVM](http://telerikhelper.net/2013/08/09/mvvm-using-kendo-ui-in-three-simple-steps/)
2.  [Kendo UI Web MVVM](http://blog.longle.net/2012/07/28/teleriks-kendo-ui-web-mvvm-framework-rocks/)
3.  [了解 MVVM – JavaScript 开发人员指南](http://addyosmani.com/blog/understanding-mvvm-a-guide-for-javascript-developers/)
4.  [Kendo UI 演练中的 MVVM](http://docs.telerik.com/kendo-ui/tutorials/mvvm-in-kendo-ui)
5.  [构建单页应用程序 - 第 7 部分 - MVVM 和 KnockoutJS](http://www.johnpapa.net/spapost7/)

# jquery - 直到第二次搜索才显示 jquery UI 自动编译选项

> ID：10858099
> 
> 赞同：0
> 
> 时间：2012-06-01T22:30:11.677
> 
> 标签：jquery, ajax, plugins, user-interface

这是我的代码：

```
$("#hifind-find").keyup(function(){

  var val = $(this).val();

  if (val.length > 1) {
    var posturl = '/hifind/jquery_ui/autocomplete/'+val;

    $.post(posturl, function(r) { 

      $("#hifind-find").autocomplete({
        source: r,
        delay: 50,
        minLength: 2
      });

      $("#hifind-find").bind('autocompleteselect', function(){
        alert('test');
      });

    }, "json");
  }

}); 
```

我在#hifind-find 字段中键入一个字母。正如预期的那样，没有任何反应，因为 val 还没有大于 1。我键入第二个字符。正如预期的那样，帖子触发并且萤火虫中的响应是我所期望的。但是 jquery ui 插件不显示字段下方的匹配项。如果我然后退格一次，然后再次输入第二个字符，则帖子会再次触发，这一次会显示选项。结果总是在连续第二*次*进行相同的搜索时显示。所以...

1.  ba（未提供选项）
2.  退格两次，然后...
3.  ba（“banana”作为选项提供，“babe ruth”等）。

但是，如果我重新加载，然后...

1.  ba（没有提供）
2.  ap（没有提供）
3.  ba（没有提供）
4.  ap（什么都没有，依此类推，直到我连续两次进行相同的搜索）

我可以在 firebug 中看到回调的响应每次都是相同的，并且包含正确的数据。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:12:58.403

仅在第二次键入后，您才将组件转换为自动完成。

这是没有意义的——为什么不直接关注他们的演示呢？这比你做的要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T23:19:04.913

您的问题是 keyup 事件不等待 AJAX 返回并执行回调函数。keyup 事件在自动完成源包含任何数据之前完成。当您第二次执行此操作时，源已从先前的 AJAX 调用中填充，因此它可以工作（有点）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T23:21:43.973

你做错了。您应该为自动完成搜索字段提供回调，而不是自己绑定到 keyup。这样，自动完成将进行缓存，而这不适合您。

看到这篇文章：http: [//jqueryui.com/demos/autocomplete/#remote-with-cache](http://jqueryui.com/demos/autocomplete/#remote-with-cache)

关于如何更好地使用自动完成器。

在您的示例中，它看起来像这样：

```
 $("#hifind-find").autocomplete({
        source: function(request, response) {
          var posturl = '/hifind/jquery_ui/autocomplete/'+request.term;
          $.post(posturl, function(data) { 
             response(data);
          }, "json");
         },
        delay: 50,
        minLength: 2
      });

      $("#hifind-find").bind('autocompleteselect', function(){
        alert('test');
      }); 
```

我建议您按照我链接到的帖子中的描述添加一个缓存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T22:59:00.890

我想这是因为它首先需要被填充，然后它就会准备好获取字符，所以你为什么不尝试在它第一次获取字符时填充它，所以在第二个字符之后它会准备好...

这段代码：

```
val.length > 1 
```

应该：

```
val.length > 0 
```

另外，我认为为每个按下的键调用一个帖子并不是一个好主意，它应该第一次获得帖子，以便它可以填充自动完成对象，然后它应该使用该对象......

# visual-studio-2010 - 如何抑制 Visual Studio 2010 应用已触发断点提示？

> ID：10858100
> 
> 赞同：1
> 
> 时间：2012-06-01T22:30:13.407
> 
> 标签：visual-studio-2010, debugging, breakpoints

我正在将一个大型项目从 VC++ 6.0 迁移到 Visual C++ 2010（WinXP x64 上的 32 位应用程序）。我使用了一个特殊的 BREAK 宏，它最终解析为 _asm { int 3 }。在 VC++ 6.0 中，这将像手动断点 (F9) 一样简单地停止调试器。在 VC++ 2010 中，我收到一条提示**“myapp.exe 已触发断点”**，然后提示我**Break**或**Continue**。

**有没有办法抑制这个提示？** 我花了几个小时试图找到无济于事的解决方案。这个提示没有附加价值，真的让我慢下来。

非常感激任何的帮助！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:45:59.937

当这种情况发生时，这意味着发生了一个未处理的异常，任何调用代码都无法或没有解决该异常。我认为这是调试器的一项安全功能，旨在使这些错误更加明显。

如果你想打破“就像一个断点”。为什么不直接使用断点？

# python - pyRserve data.frame 到矩阵的转换

> ID：10858101
> 
> 赞同：1
> 
> 时间：2012-06-01T22:30:27.697
> 
> 标签：python, r, rserve, pyrserve

我想我在 pyRserve 中发现了一个错误，但不知道在哪里报告。

当我使用 pyRserve 时，我可以按预期的方式得到一个 R 矩阵：

```
import pyRserve
con = pyRserve.connect(host = 'localhost') # this is a bug too in windows
testMatrix = con.r("matrix(rnorm(10), ncol=2)")

array([[ 1.01571435,  0.35465894],
   [-0.36201676, -0.21100438],
   [-3.05266506,  1.49179003],
   [ 0.27192553,  1.51428093],
   [ 1.45269568,  0.57196333]]) 
```

但是，当我尝试对使用 data.matrix 转换的东西做同样的事情时，我得到了这个：

```
testMatrixConversion = con.r("data.matrix(iris)")
testMatrixConversion[1:10]
AttrArray([[ 5.4, 4.6, 5., 4.4, 4.9],
    [5.4,4.8,4.8,4.3,5.8],
... 
```

它使尺寸正确，但按列而不是按行填充它们。

有人知道怎么修这个东西吗？或者至少如何向开发人员报告？

谢谢; 凯尔

# javascript - 自定义 jQuery 图腾标签插件

> ID：10858102
> 
> 赞同：0
> 
> 时间：2012-06-01T22:30:32.753
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用[图腾标记](http://buildinternet.s3.amazonaws.com/projects/totem/index.html)jQuery 插件，但需要能够以编程方式停止它。它似乎没有提供这个功能，所以我看了一下[源代码](https://github.com/buildinternet/totem/blob/master/js/jquery.totemticker.js)，看看我是否可以自己添加它。

看来我需要做的就是弄清楚如何打电话

```
base.stop_interval() 
```

但是，我似乎无法使`base`调用者可以访问存储在其中的对象。我做了几次不成功的尝试，但希望对 jQuery 插件如何工作有更多了解的人可以为我指明正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:38:04.613

这里的源代码中有一行：

```
base.$el.data("omr.totemticker", base); 
```

它的基本作用是通过 data 函数使基础对象可用于 jQuery 对象。

使用 jQuery 选择它并调用`.data('omr.totemticker')`以获取`base`对象。

这是您链接到的演示的检查（在 Chrome 的开发工具中）。

![检查的示例](../Images/5e78f2f85860c725aa440a0e73161ecc.png)

所以调用`$("#vertical-ticker").data("omr.totemticker").stop_interval();`应该停止股票的自动旋转。

# c# - 使用 JSON.NET 反序列化任意 JSON 对象

> ID：10858103
> 
> 赞同：1
> 
> 时间：2012-06-01T22:30:56.893
> 
> 标签：c#, silverlight, windows-phone-7, json.net

我想反序列化这样的 JSON 字符串

```
{
   "status":"1",
   "since":"1245626956',
   "list":{
      "1":{
         "item_id":"1"
      },
      "2":{
         "item_id":"2"
      }
   }
} 
```

为此，我有一个解析它的对象

```
public class ListResponse
{
    public String status { get; set; }
    public String since { get; set; }
    public IDictionary<String, Item> list { get; set; }
} 
```

我用这句话：

```
ListResponse list = JsonConvert.DeserializeObject<ListResponse>(message); 
```

这很好，但我有一个问题，因为响应可能是这样的

```
{
   "status":"1",
   "since":"1245626956',
   "list":[]
} 
```

当试图反序列化引发异常时，因为需要一个数组来解析“列表”，但我的对象有一个 IDictionary。

```
Cannot deserialize the current JSON array (e.g. [1,2,3]) into type 'System.Collections.Generic.IDictionary`2[System.String,Item]' because the type requires a JSON object (e.g. {"name":"value"}) to deserialize correctly.
To fix this error either change the JSON to a JSON object (e.g. {"name":"value"}) or change the deserialized type to an array or a type that implements a collection interface (e.g. ICollection, IList) like List<T> that can be deserialized from a JSON array. JsonArrayAttribute can also be added to the type to force it to deserialize from a JSON array. 
```

如何在不使用 Linq 获取 JObject 并“手动”进行映射的情况下处理此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:49:48.057

一个简单的解决方法是在反序列化之前执行此操作：

```
yourString = yourString.Replace("\"list\":[]", "\"list\":{}"); 
```

# python - 如何在 linux 中从 Microsoft Word 中提取表格？

> ID：10858104
> 
> 赞同：0
> 
> 时间：2012-06-01T22:31:02.010
> 
> 标签：python, ms-word

如何在 linux 中从 Microsoft Word 中提取表格？

或者至少，有什么方法可以提取*原始布局*的文本？

谢谢

# c# - C# 私有（隐藏）基类

> ID：10858107
> 
> 赞同：18
> 
> 时间：2012-06-01T22:31:07.743
> 
> 标签：c#, inheritance, private, base-class

是否可以使 C# 基类只能在它编译到的库程序集中访问，同时使从它继承的其他子类公开？

例如：

```
using System.IO;

class BaseOutput: Stream           // Hidden base class
{
    protected BaseOutput(Stream o)
    { ... }

    ...lots of common methods...
}

public class MyOutput: BaseOutput  // Public subclass
{
    public BaseOutput(Stream o):
        base(o)
    { ... }

    public override int Write(int b)
    { ... }
} 
```

在这里，我希望`BaseOutput`我的图书馆的客户无法访问该类，但允许子类`MyOutput`完全公开。我知道 C# 不允许基类比子类具有更严格的访问权限，但是还有其他合法的方法可以达到同样的效果吗？

**更新**

我对这个特定库的解决方案是制作基类`public`和`abstract`，并用*“不要直接使用这个基类”*来记录它。我还制作了基类的构造函数`internal`，有效地防止了外部客户端使用或继承该类。

（很遗憾，因为其他 OO 语言让我有隐藏的基类。）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-01T22:32:54.427

不幸的是没有。您不能从内部或私有类派生公共类。

您需要公开基类，或者需要为所有类似类声明所有方法。如果您再次声明所有方法的路线，那么创建一个具有它们的实际实现的辅助类可能很有用。仍然是相当多的样板。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T22:33:03.277

考虑一个模式，例如 Facade。这就是他们的目的。我不认为你可以通过直接继承来实现你所需要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T23:03:46.670

根据“许多常用方法”正在做什么，您可以使用内部扩展方法来实现其中的一些：

```
internal static class MyStreamExtensions
{
   internal static int UsefulOne(this Stream stream)
   {
     return 42; 
   }
} 
```

另一种方法是使构造函数内部化以防止从该类意外派生：

```
public class BaseOutput: Stream
{
    internal BaseOutput(Stream o)
    { ... }

    ...lots of common methods...
} 
```

与层次结构中的“不真正可见”的中间类相比，这将使代码更易于理解。

# objective-c - NSURLConnection 在 GET 上提前关闭

> ID：10858110
> 
> 赞同：4
> 
> 时间：2012-06-01T22:31:23.857
> 
> 标签：objective-c, json, nsurlconnection

我正在研究一种方法来集中我的 URL 连接，以便从服务器发送和接收 JSON 数据。它适用于 POST，但不适用于 GET。我正在使用 Google App Engine 服务器，在我的计算机上它将处理 POST 请求并返回正确的结果（并适当地记录），但是当我尝试使用 GET 方法请求时出现以下错误：

```
Error Domain=kCFErrorDomainCFNetwork Code=303 "The operation couldn’t be completed. (kCFErrorDomainCFNetwork error 303.)" UserInfo=0xd57e400 {NSErrorFailingURLKey=http://localhost:8080/api/login, NSErrorFailingURLStringKey=http://localhost:8080/api/login} 
```

此外，GAE 开发服务器显示“管道断开”错误，表明客户端在服务器完成发送所有数据之前关闭了连接。

这是方法：

```
/* Connects to a given URL and sends JSON data via HTTP request and returns the result of the request as a dict */
- (id) sendRequestToModule:(NSString*) module ofType:(NSString*) type function:(NSString*) func params:(NSDictionary*) params {

    NSString *str_params = [NSDictionary dictionaryWithObjectsAndKeys:func, @"function", params, @"params", nil];
    NSString *str_url = [NSString stringWithFormat:@"%@%@", lds_url, module];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:str_url]];
    NSData *data = [[NSString stringWithFormat:@"action=%@", [str_params JSONString]] dataUsingEncoding:NSUTF8StringEncoding];
    [request setHTTPMethod:type];
    [request setHTTPBody:data];
    [request setValue:[NSString stringWithFormat:@"%d", [data length]] forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

    NSError *error = nil;
    NSURLResponse *response = nil;
    NSData *result = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    NSLog(@"Error: %@", error);
    NSLog(@"Result: %@", [[NSString alloc] initWithData:result encoding:NSUTF8StringEncoding]);
    return [result objectFromJSONData];
} 
```

一个示例调用将是：

```
NSDictionary *response = [fetcher sendRequestToModule:@"login" ofType:@"GET" function:@"validate_email" params:dict]; 
```

同样，这适用于 POST，但不适用于 GET。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-03T08:28:06.443

就我而言，我没有调用 [request setHTTPMethod: @"POST" ]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T03:34:26.363

我认为根本原因是您的 URL 无效。

JSON 编码将包括诸如“{”、“}”、“[”和“]”之类的内容。所有这些都需要在添加到 URL 之前进行 URL 编码。

```
NSString *query = [NSString stringWithFormat:@"?action=%@", [str_params JSONString]];
query = [query stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSURL *URL = [NSURL URLWithString:[NSString stringWithFormat:@"%@%@", str_url, query]]; 
```

* * *

直接回答你的问题：

根据[CFNetwork 错误代码参考](https://developer.apple.com/library/mac/#documentation/Networking/Reference/CFNetworkErrors/Reference/reference.html)，错误是[kCFErrorHTTPParseFailure](https://developer.apple.com/library/mac/#documentation/Networking/Reference/CFNetworkErrors/Reference/reference.html#//apple_ref/doc/c_ref/kCFErrorHTTPParseFailure)。这意味着客户端未能正确解析 HTTP 响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:27:56.103

原因是 GET 不包含正文。为什么要在 GET 中提交 JSON？

如果目标 api 仅返回数据，则您将其传递到 url 参数中。

如果您想发送数据并“获取”响应，请使用帖子并在返回时检查正文。

示例帖子：

```
NSError *error;
NSString *urlString = [[NSString alloc] initWithFormat:@"http://%@:%@/XXXX/MVC Controller Method/%@",self.ServerName, self.Port, sessionId  ];   
NSURL *url = [NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding ]];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];

// hydrate the remote object
NSString *returnString = [rdc JSONRepresentation];
NSData *s10 = [returnString dataUsingEncoding:NSUTF8StringEncoding];
[request setHTTPBody:s10];
NSURLResponse *theResponse = [[NSURLResponse alloc] init];
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&theResponse error:&error];
NSString *message = [[NSString alloc] initWithFormat: @"nothing"];

if (error) {
    message = [[NSString alloc] initWithFormat:@"Error: %@", error];

} else {
    message = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

}

NSLog(@"%@", message);

return message; 
```

# svn - TortoiseSVN 中的本地挂钩是什么？

> ID：10858116
> 
> 赞同：2
> 
> 时间：2012-06-01T22:31:51.847
> 
> 标签：svn, tortoisesvn, svn-hooks

我刚刚意识到 TSVN 支持本地挂钩。

有人能解释一下它们有什么用吗？

我已经使用服务器端挂钩来强制输入日志消息以进行提交并防止某些文件被签入；还使用 post-commit 钩子在提交时发送电子邮件。

我们也使用 AnkhSVN，我的理解是它不支持本地挂钩，对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T22:45:40.350

这在 Tortoise SVN 帮助文件中得到了相当彻底的解释（右键单击，`Tortoise SVN->Help`并在索引中搜索`Hooks`；有一个直接指向 的链接`4.30.8\. Client Side Hook Scripts`，其中部分说明（特别是前两段）：

> 此对话框允许您设置挂钩脚本，这些脚本将在执行某些 Subversion 操作时自动执行。与第 3.3 节“服务器端钩子脚本”中解释的钩子脚本相反，这些脚本在客户端本地执行。
> 
> 此类挂钩的一个应用程序可能是调用 SubWCRev.exe 之类的程序以在提交后更新版本号，并可能触发重建。
> 
> 出于各种安全和实施原因，挂钩脚本是在机器上本地定义的，而不是作为项目属性。您定义会发生什么，无论其他人向存储库提交什么。当然，您始终可以选择调用本身受版本控制的脚本。

它继续说目前支持六种类型的钩子（从 TSVN v1.6.15 64 位开始）：

> 目前有六种类型的钩子脚本可用
> 
> *   开始提交
> *   预提交
> *   提交后
> *   开始升级
> *   更新前
> *   更新后

# c++ - 是否可以在 pcl 中进行点向量重播？

> ID：10858121
> 
> 赞同：0
> 
> 时间：2012-06-01T22:32:31.423
> 
> 标签：c++, raycasting, point-cloud-library

我有一个 3d 点世界。我有指向它`a [x,y,z]`和方向（方位角`θ`和极角）我想得到`b [x2,y2,z2]`我的光线（从我的点发送`a`到方向）将停止的点。（仅从一点且仅针对一个方向）。如何在 pcl 中做这样的事情，是否有可能（我看到一个[射线投射器类](http://docs.pointclouds.org/trunk/structpcl_1_1gpu_1_1_ray_caster.html#ad7b64edce595a883b446cfb2006f7121)，但它似乎在整个世界上都有效，而不是点对点）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:47:25.610

我认为这`OctreePointCloudSearch`门课可能会对你有所帮助。快速浏览一下这个`OctreePointCloudSearch::getIntersectedVoxelIndices`方法：一旦你的点云被组织成一个八叉树，它允许你指定用于光线投射的光线的原点和方向。在您的情况下，原点将是点**a**，方向将从方位角和极角获得（[请参阅此](https://en.wikipedia.org/wiki/Spherical_coordinate_system)）

该函数将索引返回到相交体素内的点。

如果您在谷歌上搜索该类名称，您可以轻松找到大量工作示例（[此示例](http://rovis.unitbv.ro/rovis/trunk/src/tracking/CPointCloudTracker.cpp)从云的每个点向相机投射光线并检查遮挡）。

# ajax - Django和ajax图片文件上传错误和csrf

> ID：10858126
> 
> 赞同：0
> 
> 时间：2012-06-01T22:32:47.023
> 
> 标签：ajax, django

我尝试了[Alex Kuhl 的 ajax 脚本](http://kuhlit.blogspot.com/2011/04/ajax-file-uploads-and-csrf-in-django-13.html)将图像上传到 Django 1.4。

我的第一个问题是为什么我得到一个空白页面，萤火虫告诉我我有一个错误：

在我的模板 html 中：

```
 $ is not defined
element: $('#file-uploader')[0], 
```

这是我的整个 html 文件： http: [//pastebin.com/NjbV5gMn](http://pastebin.com/NjbV5gMn)

我的第二个问题是为什么 ajax 代码使用`{{ csrf_token }}`而不是`{% csrf_token %}`. 但如果我使用`{% csrf_token %}`，我会得到萤火虫错误：

```
 missing } after property list

'csrf_token': '<div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='Cx0zFFak6OLgrHiAnFa3k4BPDmn4BgoT' /></div>', 
```

编辑：我将元素更改为`document.getElementById('file-uploader')`它似乎工作，所以我想我已经解决了我的第一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:08:25.707

第一个问题`$`是jQuery库引入的，使用前需要加载。（或使用`document.getElementById('file-uploader')`相当于`$('#file-uploader')[0]`）

对于第二个问题，javascript 行需要一个 csrf 令牌，它可以通过 引入`{{ csrf_token }}`，而不是一个 div 标签，其中包含一个带有 csrf 令牌的输入字段作为其值，它`{% csrf_token %}`确实如此。

为了工作，请检查[文档](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#how-to-use-it)`{{ csrf_token }}`中的第三步，添加到您的视图中并在您的视图中使用。`'django.core.context_processors.csrf'``TEMPLATE_CONTEXT_PROCESSORS``RequestContext`

# jpa - 只能在事务处于活动状态时执行操作

> ID：10858139
> 
> 赞同：1
> 
> 时间：2012-06-01T22:34:14.747
> 
> 标签：jpa, openjpa

我在 cxf(jax-rs) + [Struts](http://en.wikipedia.org/wiki/Apache_Struts) 2 中使用 OpenJPA。没有外部事务管理器。为什么我会收到“只能在事务处于活动状态时执行操作。”？

我`persistence.xml`的是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

    <persistence-unit name="myPU"
        transaction-type="RESOURCE_LOCAL">

        <class>com.bb.bba.entity.Advertisement</class>
        <class>com.bb.bba.entity.Poi</class>

        <properties>
            <property name="openjpa.ConnectionDriverName" value="org.apache.derby.jdbc.ClientDriver" />
            <property name="openjpa.ConnectionURL" value="jdbc:derby://localhost:1527/bba;create=true" />
            <property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema" />
            <property name="openjpa.DynamicEnhancementAgent" value="false" />
            <property name="openjpa.RuntimeUnenhancedClasses" value="supported" />
            <property name="openjpa.ConnectionUserName" value="APP" />
            <property name="openjpa.ConnectionPassword" value="asdasd" />
            <property name="openjpa.Log" value="SQL=TRACE"/>
        </properties>
    </persistence-unit>
</persistence> 
```

我收到以下错误。

```
35692  2012-06-02 03:50:57,847 DEBUG [http-33791-1] resolver.DefaultTraversableResolver.initJpa (DefaultTraversableResolver.java:77) - Found javax.persistence.PersistenceUtil on classpath.
35729  2012-06-02 03:50:57,884 DEBUG [http-33791-1] resolver.DefaultTraversableResolver.initJpa (DefaultTraversableResolver.java:91) - Instantiated an instance of org.apache.bval.jsr303.resolver.JPATraversableResolver.
35755  2012-06-02 03:50:57,910 TRACE [http-33791-1] jsr303.DefaultMessageInterpolator.loadBundle (DefaultMessageInterpolator.java:189) - ValidationMessages not found by thread local classloader
35755  2012-06-02 03:50:57,910 TRACE [http-33791-1] jsr303.DefaultMessageInterpolator.loadBundle (DefaultMessageInterpolator.java:189) - ValidationMessages not found by validator classloader
35756  2012-06-02 03:50:57,911 DEBUG [http-33791-1] jsr303.DefaultMessageInterpolator.getFileBasedResourceBundle (DefaultMessageInterpolator.java:176) - ValidationMessages not found. Delegating to org.apache.bval.jsr303.ValidationMessages
35778  2012-06-02 03:50:57,933 DEBUG [http-33791-1] xml.ValidationParser.parseXmlConfig (ValidationParser.java:88) - No META-INF/validation.xml found. Using annotation based configuration only.
646  myPU  INFO   [http-33791-1] openjpa.Runtime - OpenJPA dynamically loaded a validation provider.
922  myPU  INFO   [http-33791-1] openjpa.Runtime - Starting OpenJPA 2.1.1
1703  myPU  INFO   [http-33791-1] openjpa.jdbc.JDBC - Using dictionary class "org.apache.openjpa.jdbc.sql.DerbyDictionary".
11326  myPU  WARN   [http-33791-1] openjpa.Enhance - Creating subclass for "[class com.bb.bba.entity.Poi, class com.bb.bba.entity.Advertisement]". This means that your application will be less efficient and will consume more memory than it would if you ran the OpenJPA enhancer. Additionally, lazy loading will not be available for one-to-one and many-to-one persistent attributes in types using field access; they will be loaded eagerly instead. 
```

我在这里

> ......非致命用户错误> org.apache.openjpa.persistence.TransactionRequiredException：只能在事务处于活动状态时执行操作。在 org.apache.openjpa.kernel.BrokerImpl.assertActiveTransaction(BrokerImpl.java:4658) 在 org.apache.openjpa.kernel.DelegatingBroker.assertActiveTransaction(DelegatingBroker.java:1386) 在 org.apache.openjpa.persistence.EntityManagerImpl.flush (EntityManagerImpl.java:661) 在 com.bb.bba.dao.MyDao.createPoi(MyDao.java:21) 在 com.bb.bba.services.Service.createPoi(POIService.java:36)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T08:57:20.563

您必须先打开一个事务，然后才能对 EntityManager 执行操作。这是预期的行为。您会为您的应用程序找到一些事务策略。所以你必须决定哪个组件打开事务（尤其是在哪一层）以及它是如何完成的（声明式的或程序式的）。

您正在使用哪些其他框架？例如，如果您也在使用 Spring，则可以使用 Spring 的声明式事务管理支持非常轻松地管理事务。

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T03:44:23.013

问题已经解决了。我正在使用`resource_local`这意味着我对交易负责。添加`em.getTransaction.begin`解决了这个问题。

# printing - jqgrid 打印视图的一个想法

> ID：10858141
> 
> 赞同：5
> 
> 时间：2012-06-01T22:34:22.140
> 
> 标签：printing, jqgrid

我想在 jqgrid 中有两个视图：

1) 带有可排序列、分页等的常规网格视图（它很棒，而且效果很好……喜欢它！）。

2）一个“打印视图”，可以很容易地用css设置样式并定制打印。类结构不要太复杂，因为我想轻松制作自己的样式表。一件重要的事情是能够在每个打印页面上重复列标题。（我不喜欢从 jqgrid 打印。即使我使用“media=print”添加 jqgrid 样式表，打印结果也很难控制。）

所以，我所做的是首先创建一个 jqGrid。然后，使用它的数据，创建我自己的表格并从中打印。这有点骇人听闻。但它有效。

1- 创建网格并将其插入到 div 中。注意我在“loadComplete”函数中调用了“build_print_view”，基于变量的存在。这使我可以控制是否要首先显示“打印视图”或“网格视图”：

```
 function classGrid(select_val, showgrid){               
    jQuery.get('/lookupgrid/lookupgrid/get_grid', function(data) {            
        var _html= jQuery(data);
        jQuery('#resultdiv').html(_html);            
        var gridtable = jQuery("#list");
        var formdata = new Array();
        formdata.push({
            name: "var1",
            value: "whatever"
        }); 
        formdata.push({
            name: "var2",
            value: "whateverelse"
        });

        var lastsel; 
        console_log("in classGrid");    
        gridtable.jqGrid({
            url:'/lookupgrid/lookupgrid/class_grid',                       
            colNames:['var1','var2'],
            colModel :[
            {
                name:'var1',
                index:'var1',
                width:95
            },
            {
                name:'var2', 
                index:'var2', 
                width:95
            }],
            datatype: 'json',
            mtype: 'POST',
            pager: '#pager',    
            rowList:[10,20,30],            
            loadComplete: function() {
                    if(!showgrid){
                        build_print_view();
                    }
            },
            onSelectRow: function(id){
                var rowdata = gridtable.jqGrid('getRowData',id);                    
                alert('Selected row ID ' + id + " var1 is " + rowdata.var1);
            },
            loadonce: true,  
            postData:formdata,
            width: 800,
            height: 300,
            pgtext:"Page {0}",
            viewrecords: true,
            gridview: true,                
            caption: 'Class Results'            
        });

        gridtable.jqGrid('navGrid','#pager',{
            edit:false,
            add:false,
            del:false                       
        });   
    });
    } 
```

2 - 在 build_print_view() 中，您可以从 jqgrid 中提取数据并将其放入一个表格中，该表格可以使用您自己的样式表设置为您喜欢的样式。

```
 function build_print_view(){                

        var gridtable = jQuery("#list");
        var lista = gridtable.jqGrid('getGridParam','data');
        var tablestr = "";             
        for(var i=0;i<lista.length;i++){
            var rowData = lista[i];
            tablestr += "<tr>"
            tablestr += "<td class=\"wide cycle\" style=\"width:50px;\" id=\"sku\">"+rowData.var1+"</td>";
            tablestr += "<td class=\"wide cycle\" style=\"width:300px;\" id=\"skudesc\">"+rowData.var2+"</td>";             
            tablestr += "</tr>";  
        }

    jQuery.get('/lookupgrid/lookupgrid/get_print_view', function(data) {            
        var _html= jQuery(data);        
        _html.find('#printresults').append(tablestr);
        jQuery('#resultdiv').html(_html);        
    });
} 
```

3 - 表格的其余部分和其他标签由对“/lookupgrid/lookupgrid/get_print_view”的ajax“get”调用返回，我只是将tablestr放入“#printresults”div，即：

```
 <div id="printview">
<table id="clsitems" class="wide">
    <thead>
        <tr>
            <th colspan="10" class="wide" id="label">                
            </th>
        </tr>
        <tr>                
            <td class="wide label">
                var1:
            </td>
            <td class="wide label">
                var2:
            </td>            
        </tr>
    </thead>
    <tbody id="printresults">

    </tbody>
</table>
</div> 
```

4 - 唯一奇怪的是，如果请求“打印视图”，jqGrid 被创建并在屏幕上闪烁一秒钟，然后打印视图表在其 div 中替换它。

实际上，如果有一种很好的方法来构造 jqGrid 而不显示它，我更愿意这样做。如果请求“屏幕视图”，我可以稍后显示 jqGrid。

# c# - WinSCP：如何确保 SFTP 上传从 .zip.filepart 重命名为 .zip？

> ID：10858143
> 
> 赞同：6
> 
> 时间：2012-06-01T22:34:41.150
> 
> 标签：c#, sftp, scp, winscp, winscp-net

使用 WinSCP 的 .NET 程序集上传文件。 `OperationResultBase.Check()`抛出以下错误：

> WinSCP.SessionRemoteException：传输已成功完成，但无法将临时传输文件“testfile.zip.filepart”重命名为目标文件名“testfile.zip”。如果问题仍然存在，您可能需要关闭传输恢复支持。

我尝试发送的任何 zip 文件似乎都会发生这种情况。如果有所不同，这些是使用 DotNetZip 库创建的 zip 文件。

我正在使用的代码几乎直接取自 WinSCP 文档中的示例：

```
public void uploadFile(string filePath, string remotePath)
{
    TransferOptions transferOptions = new TransferOptions();
    transferOptions.TransferMode = TransferMode.Binary;
    TransferOperationResult transferResult;
    transferResult = currentSession.PutFiles(filePath, remotePath, false, transferOptions);
    transferResult.Check();
    foreach (TransferEventArgs transfer in transferResult.Transfers)
    {
        Console.WriteLine("Upload of {0} succeeded", transfer.FileName);
    }
} 
```

[WinSCP 论坛上的讨论](http://winscp.net/forum/viewtopic.php?t=11139)表明该程序集还不允许对传输恢复支持进行编程控制。有解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T22:40:22.140

听起来好像文件上传到的目标服务器上的文件系统不允许文件更改权限。这可能会导致在上传完成时重命名文件失败，尽管整个文件已上传并使用传输过程中使用的临时文件名写入文件系统。如果您没有对目标服务器的管理访问权限，则可以通过尝试重命名目标服务器上已经存在的文件来进行测试。如果这也失败了，那么您将需要更改目标服务器上的适当权限才能使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-08T02:05:01.793

关闭简历支持：

```
put *.txt -nopreservetime -nopermissions -resumesupport=off 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-22T15:02:45.307

*如果您包含完整的错误消息，包括服务器返回的根本原因，这将有所帮助。*

我的猜测是服务器端正在运行一个防病毒应用程序（或类似应用程序）。上传完成后，防病毒应用程序会检查任何文件。这与上传完成后 WinSCP 尝试重命名文件相冲突。对于 .ZIP 档案，问题可能更频繁地发生，或者因为它们往往更大，或者仅仅因为它们需要在检查之前被提取（这需要时间）。

无论如何，您可以使用[`TransferOptions.ResumeSupport`](https://winscp.net/eng/docs/library_transferoptions#resumesupport).

另请参阅[错误消息“传输已成功完成，但临时传输文件...无法重命名为目标文件名...”的文档](https://winscp.net/eng/docs/message_transfer_finished_could_not_rename)

# java - 为什么我在 Android 中的倒数计时器这么慢？

> ID：10858147
> 
> 赞同：0
> 
> 时间：2012-06-01T22:35:24.647
> 
> 标签：java, android, timer

我正在尝试在 android 中制作一个倒数计时器，以便在小型 android 应用程序中使用。该应用程序将从一定的秒数倒计时到 0，然后它将执行一些操作。我正在使用 android.os.countdowntimer 提供的倒计时计时器。这是我的代码：

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.quizlayout);

    new CountDownTimer(30000, 1000) {

        TextView tx = (TextView) findViewById(R.id.textView2);

         public void onTick(long millisUntilFinished) {
             tx.setText("seconds remaining: " + millisUntilFinished / 1000);
         }

         public void onFinish() {
             tx.setText("done!");
         }
      }.start();
} 
```

但是，这个倒数计时器真的很慢。计时器倒计时一秒需要大约 3 秒的实时时间。我想知道发生了什么事？我上面的代码或多或少是直接从谷歌（[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)）复制的

任何人都可以根据为什么我的计时器这么慢来帮助我，并提供一种加快速度的方法吗？

（编辑）：我在模拟器上运行它，英特尔原子 x86。我正在模拟一个 android 2.3.3 环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:46:28.270

根据倒数计时器的Android文档

> 对 onTick(long) 的调用与此对象同步，因此在前一个回调完成之前不会发生对 onTick(long) 的调用。这仅在 onTick(long) 的实现花费与倒计时间隔相比显着的时间来执行时才相关。

看看这个 倒数计时器的[例子 倒数计时器的例子](http://androidcookbook.oreilly.com/Recipe.seam;jsessionid=D1AE1124EDE7B7782E3AB52E3CF420D3?recipeId=1205&recipeFrom=ViewTOC)

或者，您可以生成一个新线程，让该线程在您想要的时间间隔内休眠，并在它唤醒时采取行动，反之亦然。

你也可以定时任务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T23:00:39.227

使用将发布相同 runnable 的处理程序。这将消除对额外线程的需要：

```
Handler handler=new Handler();
handler.postRunnable(... , 1000) ; 
```

在 runnable 中，为同一个处理程序再次调用 postRunnable（并添加何时停止的条件）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-18T23:31:03.220

无论 ui 更新性能如何，CountDownTimer 效率都不高。对于完美的 ui 更新，最好创建自定义倒计时。我自己做了，所以就在这里。它在我的应用程序上完美无缺。

```
public abstract class CountDown {

int totalTime = 0;
int tickTime = 0;

Thread thread;
boolean canceled = false;

public CountDown(int totalTime,int tickTime){
    this.totalTime = totalTime;
    this.tickTime = tickTime;
}

public abstract void onTick();

public abstract void onFinish();

public void start(){

    thread = new Thread(new Runnable() {

        @Override
        public void run() {
            // Do in thread

            canceled = false;

            for (int elapsedTime = 0; elapsedTime < totalTime; elapsedTime += tickTime) {

                if(!canceled){

                        onTick();
                        try {
                            thread.sleep(tickTime);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }

                }else{
                    break;
                }
            }

            if(!canceled){
                onFinish();
            }

        }

    });

    thread.start();
}

public void cancel(){
    canceled = true;
}
} 
```

请记住，每次您必须更新您的 ui 时，调用一个 runOnUiThread，否则您将遇到异常，您不在处理程序中，也不在 ui 线程上。以下是如何在您的代码中使用它，它与 CountDownTimer 相同，因此您只需重命名代码中的行：

```
 CountDown cDown = new CountDown(10000, 20) {

        public void onTick() {

        // Do something

        }

        public void onFinish() {

            runOnUiThread(new Runnable() {
                @Override
                public void run() {

                    myButton.setImageDrawable(drawable);

                }
            });

        }
    }; 
```

# objective-c - 从 NSDictionary 创建一个枚举

> ID：10858149
> 
> 赞同：0
> 
> 时间：2012-06-01T22:35:30.187
> 
> 标签：objective-c, ios, enums, nsdictionary

假设我有一个枚举如下：

```
typedef enum {
    FooGoods = 0,
    FooInsurance = 1,
} FooCategory; 
```

我将它作为另一个对象中的属性和 ivar

```
@property (nonatomic) FooCategory *category; 
```

当我创建另一个对象时，我正在填充来自的值`NSDictionary`所以我做这样的事情：

```
[baz setCategory:[aDictionary objectForKey:@"Category"]]; 
```

但是，因为我的枚举不是指针，所以我得到一个错误。

这样做也会得到一个警告，“不兼容的整数到指针的转换”：

```
[baz setCategory:[[aDictionary objectForKey:@"Category"] intValue]]; 
```

还有其他没有错误/警告的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:39:45.867

以下不正确

```
@property (nonatomic) FooCategory *category; 
```

应该改为

```
@property (nonatomic) FooCategory category; 
```

现在这应该可以在没有警告的情况下工作

```
baz.category = (FooCategory)[aDictionary objectForKey:@"Category"] intValue]; 
```

# bash - awk 如何将 unix 命令的结果作为参数？

> ID：10858152
> 
> 赞同：3
> 
> 时间：2012-06-01T22:35:35.840
> 
> 标签：bash, shell, awk

假设有一个带有制表符分隔字段的输入文件，第一个字段是整数

```
1 abc
1 def
1 ghi
1 lalala
1 heyhey
2 ahb
2 bbh
3 chch
3 chchch
3 oiohho
3 nonon
3 halal
3 whatever 
```

首先，我需要计算第一个字段中唯一值的计数，即：

```
5 for 1, 2 for 2, and 6 for 3 
```

然后我需要找到这些计数的最大值，在这种情况下，它是 6。

现在我需要将“6”作为参数传递给另一个 awk 脚本。

我知道我可以使用下面的命令来获取计数列表：

```
cut -f1 input.txt | sort | uniq -c | awk -F ' ' '{print $1}' | sort 
```

但是我如何获得第一个计数并将其作为参数而不是输入文件传递给下一个 awk 命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T22:48:05.070

这对于 awk 来说并没有什么特别之处。

任何一个程序都可以从标准输入中读取，然后您可以使用管道传递输入：

```
prg1 | prg2 
```

或者您的程序需要输入作为参数，然后您使用

```
prg2 $(prg1) 
```

请注意，在这两种情况下，prg1 在 prg2 之前处理。

一些程序允许这两种可能性，而大量数据很少作为参数传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T04:03:37.963

此 AWK 脚本替换了您的整个管道：

```
awk -v parameter="$(awk '{a[$1]++} END {for (i in a) {if (a[i] > max) {max = a[i]}}; print max}' inputfile)" '{print parameter}' otherfile 
```

where`'{print parameter}'`是您的其他 AWK 脚本的替身，“otherfile”是该脚本的输入。

**注意：**这两个 AWK 脚本***极***有可能合并为一个，这比以您的问题 ( `awk`feeding `awk`) 中概述的方式执行它的方式更少。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T22:42:10.993

您可以使用 shell 的`$()`命令替换：

```
awk -f script -v num=$(cut -f1 input.txt | sort | uniq -c | awk -F ' ' '{print $1}' | sort | tail -1) < input_file 
```

（我添加了`tail -1`以确保最多使用一行。）

# maven - 您如何处理具有跨平台代码和平台特定测试的 Maven 构建？

> ID：10858154
> 
> 赞同：0
> 
> 时间：2012-06-01T22:35:56.317
> 
> 标签：maven, cross-platform

我有跨平台的 Maven java 构建。我想在每个平台上运行单元测试，但只需要从一个平台编译/打包/部署。

**例如：**

1.  在窗口上结帐
2.  构建-测试-包-部署
3.  使用 maven-repo 在其他平台上运行单元测试

目前，我正在所有平台上构建和测试，但这会消耗资源并导致生成多代工件，从 Maven 的角度来看，这似乎是错误的。

你如何处理这种情况？

谢谢

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T01:19:32.197

我目前有一个跨平台构建，需要在 windows、32 位 ubuntu、64 位 ubuntu 和 red hat 上构建。我在 32 位 ubuntu 上开发，并在 pom 文件中包含我所有目标环境的配置文件。当我需要测试构建时，我会在虚拟机中进行测试，或者对某人大喊大叫以检查干净的副本并尝试构建（最好确保没有任何特定于机器的（环境变量、本地文件等）的东西弄乱用它），虽然我的大部分代码都是相当可移植的，所以我的情况可能与你无关。

# php - php：试图找到一个等价的地图

> ID：10858160
> 
> 赞同：0
> 
> 时间：2012-06-01T22:36:22.150
> 
> 标签：php, arrays, object

我正在努力构建一个对象的对象，而不是一个对象数组（这有效，但稍后与 json 一起使用不太容易）

使用[http://writecodeonline.com/php/](http://writecodeonline.com/php/)进行测试

```
$a = Array();
$obj = new stdClass();
$obj->key = "name";
$obj->value = "durant";
array_push($a, $obj);

$obj = new stdClass();
$obj->key = "friend";
$obj->value = "johns";
array_push($a, $obj);

$preds = Array();
foreach( $a as $v ){
$item = Array(); // new stdClass(); 
$item[$v->key] = $v->value; // ^  doesn't work
array_push($preds, $item);
}
$obj = new stdClass();
$obj->key = "data";
$obj->value = $preds;
array_push($a, $obj);

//var_dump($a);

echo(json_encode($a[2]->value));  // returns: [{"name":"durant"},{"friend":"johns"}] 
```

我希望能够轻松地执行 $arr['name'] 或 $arr['friend']

**编辑**：像那样工作（谢谢 Dani）：我对 Php 完全不熟悉，所以如果有人可以解释（JSON_FORCE_OBJECT 选项没有解决它）

```
$a = Array();
$obj = new stdClass();
$obj->key = "name";
$obj->value = "durant";
array_push($a, $obj);

$obj = new stdClass();
$obj->key = "friend";
$obj->value = "johns";
array_push($a, $obj);

$preds = new stdClass();
foreach( $a as $v ){
$k = $v->key;
$preds->$k = $v->value;
}
$obj = new stdClass();
$obj->key = "data";
$obj->value = $preds;
array_push($a, $obj);

echo(json_encode($a[2]->value)); // returns: {"name":"durant", "friend":"johns"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:53:01.117

您可以将关联数组强制转换为对象，因此如果您想要快速轻松地初始化对象，您可以使用数组语法然后进行强制转换：

```
$var = (object) array(
    'dit'=>'dat',
    'foo'=>'bar',
); 
```

（`{{"tob":"durant"},{"caty":"johns"}}`是无效的 JavaScript，所以我有点猜测你想要 `{0:{"tob":"durant"},1:{"caty":"johns"}}`什么。如果你将普通数组转换为对象，你会得到什么。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T23:08:17.063

转换为 JSON 时，关联数组（具有至少 1 个字符串键的数组）将始终转换为 JSON 对象。

当转换空数组或没有字符串键（数字键）的数组时，数组将始终转换为 JSON 数组 []。

为了确保空数组或数值数组也被转换为对象，在将它们作为参数传递时使用 (object) 进行转换。

但是，如果您有嵌套数组，则像这样将标志传递给 json_encode 会容易得多：（**`json_encode($arrNestedArraysAndObjects, JSON_FORCE_OBJECT);`**您需要 > PHP 5.3，它已经存在多年了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T22:45:15.937

这不能回答您的问题，但是您尝试完成的工作可以使用简单的 PHP（关联）数组来完成，您可以将其与 Ruby 的哈希或 JavaScript 的对象进行比较：

```
$myArray = array('foo' => 'bar'); 
```

或者，在 PHP 5.4 语法中：

```
$myArray = ['foo' => 'bar'] 
```

此外，正如其他人所说，`{{"tob":"durant"},{"caty":"johns"}}`它不是一个有效的对象，因为它没有键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T23:19:02.027

您可以使用可变变量：

```
$name = 'bar';
$foo->$name = 123; 
// same as:
$foo->bar = 123; 
```

# javascript - 在 jQuery 中做一个滚入/滚出幻灯片

> ID：10858163
> 
> 赞同：0
> 
> 时间：2012-06-01T22:36:47.507
> 
> 标签：javascript, jquery, css, jquery-animate, slideshow

我正在尝试在 jQuery/JavaScript 中创建一个滚入/滚出幻灯片。我的问题是，它需要重复。现在，当它重新开始时，图片不再来自右侧:(

我创建 slideLeft 函数的原因是，之后我需要创建 2 个函数，用户可以在其中手动按下左键或右键中断幻灯片。

这就是我所拥有的：

```
<script class="jsbin" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

<div style='background: #c4c4c4; border: 1px solid #7b7b7b; height: 220px; overflow: hidden; padding: 5px; position: absolute; width: 590px;'>
  <div id='slider-image-1' style='left: 5px; background: red; height: 216px; padding: 2px; position: absolute; top: 5px; width: 586px;'></div>
  <div id='slider-image-2' style='left: 600px; background: yellow; height: 216px; padding: 2px; position: absolute; top: 5px; width: 586px;'></div>
  <div id='slider-image-3' style='left: 600px; background: green; height: 216px; padding: 2px; position: absolute; top: 5px; width: 586px;'></div>
  <div id='slider-image-4' style='left: 600px; background: blue; height: 216px; padding: 2px; position: absolute; top: 5px; width: 586px;'></div>
</div>

<script type='text/javascript'>
  $(document).ready(function() {
    var amount = 0;
    var nextamount = 1;
    setInterval(function() {
      amount++;
      nextamount++;
      if (nextamount === 5) nextamount = 1;
      if (amount === 5) amount = 1;
        slideLeft(amount, nextamount);
      }, 2000);
    });

  function slideLeft(i, j) {
    var $theItem = $('#slider-image-' + i);
    $theItem.animate({
      left: parseInt($theItem.css('left'), 10) == 5 ? -$theItem.outerWidth() : 5
    }, 500);

    var $theItem = $('#slider-image-' + j);
    $theItem.animate({
      left: parseInt($theItem.css('left'), 10) == 5 ? $theItem.outerWidth() + 10 : 5
    }, 500);

  };
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:26:35.770

您需要准备要滚动的元素，使其位于右侧。

```
function slideLeft(i, j) {
  var $theItem = $('#slider-image-' + i);
  $theItem.animate({
    left: parseInt($theItem.css('left'), 10) == 5 ? -$theItem.outerWidth() : 5
  }, 500);

  var $theItem = $('#slider-image-' + j);
  $theItem.css('left', '600px'); // moves in item to the right before animation
  $theItem.animate({
    left: parseInt($theItem.css('left'), 10) == 5 ? $theItem.outerWidth() + 10 : 5
  }, 500);

}; 
```

我想你已经用你的 parseInt 试过了，但它不起作用，所以你可以摆脱它。

```
function slideLeft(i, j) {
  var $outItem = $('#slider-image-' + i);
  $outItem.animate({ left: -$outItem.outerWidth() }, 500);

  var $inItem = $('#slider-image-' + j);
  $inItem.css('left', '600px');
  $inItem.animate({ left: 5 }, 500);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:47:32.127

我以前做过这样的事情，我不知道这是否会对你有所帮助，我所做的是：在图像/幻灯片集合的末尾添加第一张幻灯片的副本。然后，当您显示最后一张“真实”图像时，它看起来就像您正在滚动到第一张图像（但这只是第一张图像的副本），然后当动画完成时，您可以使用默认“左”css 值。如果您希望它双向滚动，您可以对第一张图像之前的最后一张图像/幻灯片的副本执行相同的操作，但是您必须以偏移量开始滑动条。

这有点难以解释，你明白了吗？:)

# javascript - JavaScript 和 Python 之间的 UDP 通信

> ID：10858172
> 
> 赞同：0
> 
> 时间：2012-06-01T22:38:00.810
> 
> 标签：javascript, python, udp, multiplayer

我计划在服务器端使用基于 JavaScript 的客户端 UI 和 Python 制作多人游戏。游戏将是动态的，因此通信速度非常重要——因此我决定使用 UDP。有没有人对我可以利用的实现有任何提示。你会为这个项目推荐什么工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T22:43:31.803

我建议做~~最愚蠢最~~简单的事情来让你的项目工作，这意味着可能是 http 和 Json。然后处理任何性能问题。否则，您将把项目的大部分时间花在一个可能并不重要的硬优化问题上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T23:19:42.913

我一直在使用 SockJS + Tornado 来做这类事情。易于上手，并在现代浏览器中得到很好的支持。

# jquery - jQuery函数在按钮单击和输入/返回（键）上执行

> ID：10858178
> 
> 赞同：8
> 
> 时间：2012-06-01T22:39:09.933
> 
> 标签：jquery

我正在尝试创建一个小搜索框，允许您根据在输入字段中输入的关键字搜索 Twitter。虽然它有效，但只有在您按下提交按钮时才有效。我还希望能够按 Enter 或 Return 键来启动搜索。我尝试使用 .sumbit 函数并将我的输入包装在表单元素周围，但没有成功。任何见解将不胜感激！

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

<script>
$(document).ready(function(){

function(data) {

$('#startSearch').click(function(){ 

$('#tweets .results').remove();

    var searchTerm = 'http://search.twitter.com/search.json?q=' + $('#twitterSearch').val() + '&callback=?'

    $.getJSON(searchTerm,  function(data) {
        $.each(data.results, function() {
            $('<div class="results"></div>')
            .hide()
            .append('<a class="userPicLink" href="http://twitter.com/' + this.from_user + '">'  + '<img class="userImg" src="' + this.profile_image_url + '">' + '</a>')
            .append('<span class="userName">' + '<a href="http://twitter.com/' + this.from_user + '">' + this.from_user + '</span>')
            .append('<span class="userText">' + this.text + '</span>')
            .append('<time class="textTime">' + relTime(this.created_at) + '</time>')
            .appendTo('#tweets')
            .fadeIn();

        });

  });

</script> 
```

```
<body>

<label id="searchLabel" for="twitterSearch">Search</label>
<input type="search" list="searchSugg" id="twitterSearch" placeholder="css3 animation" required aria-required="true">
<input id="startSearch" type="submit">

<datalist id="searchSugg">
<option value="css3 mulitple backgrounds">
<option value="html5 video">
<option value="responsive web design">
<option value="twitter api">
</datalist>

<div id="tweets">
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-01T22:45:10.340

编辑：正如 Spudley 建议的那样“使用 jQuery 的要点之一是阻止您必须使用嵌入在 HTML 标记中的事件触发器”，因此更好的解决方案是

```
<script>
$(document).ready(function(){

function(data) {

$('#twitterSearch').keydown(function(event){    
    if(event.keyCode==13){
       $('#startSearch').trigger('click');
    }
});

$('#startSearch').click(function(){ 

$('#tweets .results').remove();

    var searchTerm = 'http://search.twitter.com/search.json?q=' + $('#twitterSearch').val() + '&callback=?'

    $.getJSON(searchTerm,  function(data) {
        $.each(data.results, function() {
            $('<div class="results"></div>')
            .hide()
            .append('<a class="userPicLink" href="http://twitter.com/' + this.from_user + '">'  + '<img class="userImg" src="' + this.profile_image_url + '">' + '</a>')
            .append('<span class="userName">' + '<a href="http://twitter.com/' + this.from_user + '">' + this.from_user + '</span>')
            .append('<span class="userText">' + this.text + '</span>')
            .append('<time class="textTime">' + relTime(this.created_at) + '</time>')
            .appendTo('#tweets')
            .fadeIn();

        });

  });

</script> 
```

或 - 先前的提案：

```
<input type="search" onkeydown="if(event.keyCode==13)$('#startSearch').trigger('click');" list="searchSugg" id="twitterSearch" placeholder="css3 animation" required aria-required="true"  > 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T22:54:14.923

如果你想用不突兀的 js 放置事件，那么你也可以使用这个系统：

```
$("#element").keydown(function(event) {
if (event.keyCode == 13) {
    // do stuff
} 
```

此外，如果您有提交按钮，这是另一种选择，#element 必须是您要捕获事件的文本字段。

参考这个：[回答](https://stackoverflow.com/questions/302122/jquery-event-keypress-which-key-was-pressed)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-02T00:51:01.010

尝试为按键和鼠标单击创建侦听器。

```
function myFunction(e){
    if (e.which=='13' || e.type=='click'){
        // Run your code here
    }
}
$(document)
  .on('click', '#startSearch', myFunction)
  .on('keypress', this, myFunction); 
```

在行动 [http://codepen.io/scottyzen/pen/akWPJd](http://codepen.io/scottyzen/pen/akWPJd)

# html - 将office文档转换为html5

> ID：10858184
> 
> 赞同：0
> 
> 时间：2012-06-01T22:39:34.183
> 
> 标签：html, ms-office

我正在做一个项目，我需要office web app之类的东西，我不知道我是否可以自己制作，如何阅读office文件格式并将其转换为html5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:43:35.207

将任意 Office 文档转换为 HTML 5 是一个非常重要的项目。

Office 本身一般可以保存为 HTML 格式。您很可能使用各种 Office 产品提供的互操作库来保存为 HTML。看着：

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._workbook.saveas(v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._workbook.saveas(v=office.11).aspx)

如果您想从头开始（不使用现有实现或互操作库），您可以查看 Open XML 格式

[http://msdn.microsoft.com/en-us/library/aa338205(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/aa338205(v=office.12).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:47:08.383

请记住，微软已经开发了像 Office 365 for Cloud 这样的解决方案。此外，您可以使用 Google Docs 在线“查看”和（当然）编辑文档，但它有其局限性。例如，Excel 宏和其他高级功能可能存在问题。

你到底想要什么？您的文件的复杂程度如何？

# javascript - 如何预加载 Javascript/JQuery/HTML 对话框

> ID：10858185
> 
> 赞同：1
> 
> 时间：2012-06-01T22:39:37.207
> 
> 标签：javascript, jquery, html, css, jquery-ui

我在 Swing 和 WPF 方面有很多经验，但在 Javascript 方面经验不多。我边走边学。以下是我想做的

*   为最终用户提供一个 HTML 页面
*   将响应用户操作而显示的预加载对话框

目前，我将对话框的所有 div 作为文档的一部分加载，然后在`$(document).ready()`我调用的文档函数中加载`hide()`。

然后我打开和关闭它们。所有这些目前都有效。但是我有以下问题：

*   div 有时会在页面加载时暂时出现
*   令我烦恼的是，所有这些不属于索引页面的对话框都必须作为索引页面的一部分加载。（我对代码组织有点强迫症）。

提前致谢，

圭多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:42:21.383

jQueryUI 对话框将缓解您的显示问题。我发现它比我自己写的任何东西都更稳定。您可以使用 AJAX 动态加载内容并将该标记放入单个对话框 DIV。就像知道 DIV 的 ID，根据 AJAX 响应设置 html，然后在弹出窗口上调用 .dialog() 一样简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T22:43:47.500

您可以使用设置为的样式属性启动对话框 div：

```
style="display:none;" 
```

这就是 jQuery 在调用 .hide() 时所做的事情，那么在隐藏元素之前您不必等待 jquery 准备好，CSS 会自动为您完成

# sql-server-2008 - SQL Server 2008 中是否有等效的 LookupSet ...不是 r2？

> ID：10858190
> 
> 赞同：0
> 
> 时间：2012-06-01T22:40:19.530
> 
> 标签：sql-server-2008, reporting-services, sql-server-2008-r2, ssrs-2008

刚刚花了一天时间弄清楚如何正确使用 LookupSet 方法，却发现我的生产数据库不支持它，而我的生产数据库没有运行 SQL Server 2008 R2（它只是运行 SQL Server 2008）。

那么，有没有办法重新生成该功能以便它可以与旧的 SQL Server 2008 一起使用？

谢谢-wg

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T22:05:26.400

您可以编写自定义代码 - 我不建议这样做，因为在查询中首先关联数据可能更简单。如果其中一个数据源是非关系型的，则使用 SSIS 将其放入表中，然后使用查询将两组数据组合起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:50:55.667

正如 Gordon Linoff 在评论中指出的那样，这通常可以在 SQL 查询中实现。如果 LookupSet 目标的数据源与主查询足够相似，那么您可以使用[公共表表达式](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.100%29.aspx)或SQL 中的[相关子查询来完成此操作。](http://msdn.microsoft.com/en-us/library/ms187638%28v=sql.100%29.aspx)

# sdk - Java JDK、SDK、SE？

> ID：10858193
> 
> 赞同：65
> 
> 时间：2012-06-01T22:40:30.403
> 
> 标签：sdk, java

如果您能回答这些问题或清楚地帮助我，将不胜感激：

* * *

*   Java 7 只是 Java SE 7 吗？Java 6 是 Java SE 6 吗？
*   Java SE 7 也是 Java JDK 7 吗？还有什么是JDK？
*   这是否意味着Java JDK与Java号（Java SE 7）相同？
*   什么是 Java 1.5 和 1.6？以及它如何对应于 java 编号（Java SE ...）？
*   Java的SDK和JDK一样吗？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-06-01T23:00:29.170

是的，这可能会令人困惑。

你没有要求，但我会从这里开始。JVM 是 Java 虚拟机。它是一个程序，可以读取已编译的 Java 代码（.class 文件和 .jar 文件，这些文件只是包含一堆 .class 文件打包在一起的 .zip 文件）并执行它。JVM 有很多，例如你需要一个用于 Windows 的 JVM，一个用于 Linux，一个用于 OSX 等，但也有许多替代的 JVM，用于嵌入式设备的 JVM 等（很多人会不同意并说 JVM 只是一个，它是一个规范。但是，通常系统管理员会说“JVM”来指示服务器上运行的实际二进制文件）。

您也没有要求以下内容。JRE 是 Java 运行时环境。*它包括运行*Java 应用程序所需的一切，即 JVM 本身、标准库和一堆其他文件。标准库本身就非常重要，因为它包含了许多您在开发 Java 应用程序时会用到的有用的东西。它包含 java.* 包中的所有内容和 com.sun、com.oracle 包中的一些私有内容。

Java的不同版本（1.0、1.1等一直到1.7，也称为Java 7）通常都包含对JVM和标准库的改进，所以两者通常需要一起运行，并且打包在杰瑞。

如果您在计算机上运行任何 Java 程序，那么您已经安装了 JRE。

JDK 是 Java 开发工具包。它包含 JRE 以及许多其他用于*开发*Java 应用程序的有用的东西。这显然包括编译器（出于某种充分的原因，它也包含在 JRE 中，但您现在可以忽略这个事实）、用于创建 .jar 文件的 JAR 实用程序、许多用于“反编译”类文件的工具、检查 .jar 文件、重新包装它们，等等。

它通常还包含标准库的文档以及标准库的所有源代码，因为它们对于开发人员阅读和检查很有用。如果你想认真开发Java应用程序，你需要JDK。

当谈到 JavaSE、JavaEE、JavaME 等时，这些都是所谓的“版本”。基本上，由于 Java 生态系统非常庞大，Sun 决定提供不同版本的 Java：

*   JavaSE：是标准版，通常非常适合客户端软件、普通应用程序等。
*   JavaME：是移动版，它是旧手机上的小游戏制作的，但它基本上是适用于非常低容量处理器的“较小”版本的 Java。
*   JavaEE：是“企业版”。它用于开发服务器端的东西，所以它包含了很多服务器端使用的库。

关于编号，他们搞砸了很多。实际上，在 Java 1.4 之后，他们创建了 JCP，让社区参与到 Java 本身的开发中，从 Java 1.5 开始，它被正式命名为“Java 5”，尽管业内大多数人都称它为 1.5。此外，Java 1.2 就是 Java 2，但我认识的当时不在[Sun 工作的每个人都称它为 1.2](http://en.wikipedia.org/wiki/Java_version_history)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-01T22:59:40.603

> Java 7 只是 Java SE 7 吗？Java 6 是 Java SE 6 吗？

是的。

有几个Java“版本”，即Java SE，“标准版”，Java EE，“企业版”和Java ME，“微型版”。

“Java N”，其中 N 是某个数字，指的是 SE。Java EE 有单独的版本号，现在最高为版本 6。Java ME 也有自己的版本——目前是第 3 版。Java ME 适用于移动设备和小型设备。

Java EE 是一组库和接口，例如构建在 Java SE 之上的 EJB、JMS、JNDI、Servlets/JSP。

> Java SE 7 也是 Java JDK 7 吗？还有什么是JDK？

JDK = Java 开发工具包。当您下载 Java 时，您可以获得仅允许您运行已编译的 Java 应用程序的 JRE（Java 运行时环境），或者您可以获得允许您编译和运行 Java 应用程序的 JDK。Java SE 7 指的是 JDK 和 JRE。

> 这是否意味着java JDK与java编号相同（Java SE 7）？

是的。

> 什么是 Java 1.5 和 1.6？以及它如何对应于 java 编号（Java SE ...）？

Sun 对 Java 的编号在中途发生了变化，有点令人困惑。他们从 1.0 到 1.1，然后是 1.2。然后他们决定将 1.2 称为“Java 2”，这个标签一直持续到 Java 1.4。然后 Java 5 被称为 1.5 和 5.0 并且一直在继续 - Java 7 也是 Java 1.7，Java 6 也是 Java 1.6，等等。

> Java的SDK和JDK一样吗？

是的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T22:49:57.580

答案 1：SE 代表标准版。就像现在每个 JRE 都处于标准版一样，因此您可以将 Java 7 和 Java SE 7 视为同一个东西。

答案 2：JDK 代表 Java Development Toolkit。Java SE 是技术，JDK 是用于开发该技术的工具集。

答案 3：技术上是的。实际上，您最有可能在“Java 6”旁边看到“JDK 1.6”，在“Java 7”旁边看到“JDK 1.7”等等。

答案 4：我猜与 3 相同。

答案 5：Java 的软件开发工具包等于 Java 的开发工具包，所以是的。

此图可能会有所帮助：

[http://www.oracle.com/technetwork/java/javase/tech/index.html](http://www.oracle.com/technetwork/java/javase/tech/index.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T22:56:06.060

SE = 标准版，java 的标准版，通常只命名为 java X。另一个版本是 EE，更面向组件。

JDK = java开发工具包，这是用于开发Java应用程序的sdk的子集，是一个框架。

版本号有 1.7 被命名为 java 7。你可以得到这个版本的 SE 版本或 SDK。

无论如何，您可以在 Wikipedia 上找到全部信息

# tdd - TDD 可以在没有前期设计的情况下处理复杂的项目吗？

> ID：10858194
> 
> 赞同：0
> 
> 时间：2012-06-01T22:40:35.533
> 
> 标签：tdd, uml

TDD 的想法很棒，但如果没有预先提出设计，我正试图围绕如何实现复杂系统。

例如，假设我有多个服务用于支付处理应用程序。如果前期没有可靠的设计，我不确定我是否理解开发将/可以如何跨多个开发人员进行。

如果有人可以提供一个示例和高级步骤来以这种方式组合一个系统，那就太好了。我可以看到 TDD 如何导致更简单、更健壮的代码，我只是不确定它如何将 1）不同的开发人员聚集到一个共同的架构愿景和 2）导致一个可以抽象行为的系统，以防止必须重构大量代码（例如，接受不同的支付方式或基于长期开发路线图的定价模型）。

我将重构视为生产系统中的巨大开销，其中数据模型更改会增加客户和公司的风险。

显然，我可能错过了 TDD 专家发现的一些东西....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T06:49:44.783

恕我直言，这取决于团队的组成和风险偏好。

*   如果团队由几位经验丰富且优秀的设计师组成，则您需要一个不太正式的“架构”阶段。它可能只是餐巾纸背面的涂鸦，也可能是白板上的几个小时，然后是疯狂的编码来证明这个想法。如果团队分散和/或包含许多技能较低的设计师，您需要在设计阶段投入更多时间/精力（思考和记录），然后每个人都走上自己的道路
*   我能想到的下一个项目是风险第一。持续评估您的项目有哪些风险，计算您的风险/影响并制定缓解计划。首先关注有风险且难以逆转的决策。如果决定很容易逆转，那就少花点时间。

熟练的设计师能够以微小的步骤发展架构......如果你拥有它们，你可以在明确的设计阶段降低严谨性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:18:49.323

TDD 可能需要**一些**前期设计，但绝对不需要前期**大型**设计。因为无论您在开始编写代码之前认为您的设计多么完美，大多数情况下它都不会通过 TDD 强制它的现实检查，并且会在您的 TDD 会话中途炸毁（或者您的代码会炸毁）如果您绝对想将其弯曲到您的原始计划）。

TDD 的巨大力量恰恰在于它让您的设计在您编写测试和重构时出现并完善。因此，您应该从小而简单开始，事先对细节做出尽可能少的假设。

实际上，您可以做的是与您的一对（或整个团队，如果您确实需要就您将要编写的内容达成共识）勾勒出几个 UML 图，并使用这些图作为起点你的测试。但是，一旦您编写了最初的几个测试，就摆脱这些模型，因为它们弊大于利，误导您坚持不再正确的愿景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T02:36:03.833

首先，我并不声称自己是 TDD 大师，但这里有一些基于您问题中的信息的想法。

我对上面 #1 的想法：正如您所提到的，您需要预先进行架构设计——如果没有这个，我想不出一种可以成功的方法。该架构为您的团队提供凝聚力和远见。您可能希望预先进行足够的设计，但这取决于您想要的敏捷程度。开发人员团队需要在开始编码之前知道如何将系统的各个组件组合在一起，否则这将只是一场大型黑客盛会。

> 如果有人可以提供一个示例和高级步骤来以这种方式组合一个系统，那就太好了

如果您正在组装一个由服务组成的系统，那么我将首先定义服务接口和它们将交换的任何消息。这定义了系统的各种组件将如何交互（这将是您预先设计的一个示例）。一旦有了这个，您就可以分配各种开发资源来并行构建服务。

至于#2；TDD 的优点之一是它在重构期间为您提供了一个“安全网”。由于您的代码包含单元测试，因此当您更改某些代码时，您很快就会知道是否有问题，特别是如果您正在运行持续集成（大多数人使用 TDD 方法）。在这种情况下，您要么需要调整单元测试以涵盖新行为，要么修复代码以使单元测试通过。

> 导致系统可以抽象出行为，以防止不得不重构大量代码

这取决于您的设计，例如使用[策略模式](http://www.dofactory.com/Patterns/PatternStrategy.aspx)来允许您抽象和替换行为。TDD 并没有规定您的设计必须受到影响。它只是要求您只做满足某些功能要求所需的事情。如果要求系统必须能够适应新的支付方式或定价模型，那么这就是您设计的重点。TDD 如果做得正确，将确保您满足您的要求并且您的设计是正确的。

> 我将重构视为生产系统中的巨大开销，其中数据模型更改会增加客户和公司的风险。

软件设计的问题之一是它是一个[邪恶的问题](http://www.codinghorror.com/blog/2004/09/development-is-inherently-wicked.html)这意味着重构几乎是不可避免的。是的，重构在生产系统中是有风险的，但是您可以减轻这种风险，TDD 将帮助您。您还需要有一个灵活的设计和一个低耦合的系统。TDD 将有助于减少耦合，因为您将代码设计为可测试的。编写可测试代码的副产品之一是减少了对系统其他部分的依赖；您倾向于对接口进行编码，从而允许您用模拟或存根替换实现。一个很好的例子是用返回一些已知数据的模拟/存根替换对数据库的调用——你不想在单元测试中访问数据库。我想我可以在这里提到一个好的模拟框架对于 TDD 方法是无价的（[Rhino mocks](http://hibernatingrhinos.com/open-source/rhino-mocks)和[Moq](http://code.google.com/p/moq/)都是开源的）。

我确信有一些真正的 TDD 大师可以给你一些智慧的珍珠……就我个人而言，我不会考虑在没有 TDD 方法的情况下开始一个新项目。

# facebook - 带有 html 元素的 Facebook 登录按钮

> ID：10858202
> 
> 赞同：2
> 
> 时间：2012-06-01T22:41:53.240
> 
> 标签：facebook, login, xfbml

大约一年前，在我们的页面上，我们包含了一个 fb:login-button，而不是简单的按钮文本文本，它内部有一个 html 元素。

```
<fb:login-button onlogin="document.getElementById('buttonid').click();">
<span onclick="some_function();">Login with Facebook</span>
</fb:login-button> 
```

span 元素是必需的，因为有一个处理不同点击的实现（例如，如果按住 ctrl）。这一直持续到6月5日左右。我试图找到有关最近更改的任何信息，但没有运气。有谁知道是否还有办法在 fb:login-button 标记中包含 html 元素？

# java - JSF - 分组数据和列跨度

> ID：10858210
> 
> 赞同：0
> 
> 时间：2012-06-01T22:43:19.873
> 
> 标签：java, jsf

我有一个包含如下数据的事务表：DATETIME 格式为 dd/MM/yyyy。

```
+--------+------------------+----------------+------ ---+
| 身份证 | START_DATETIME | END_DATETIME | 用户 |
+--------+------------------+----------------+------ ---+
| 1 | 2012 年 1 月 1 日 00:00 |2012 年 1 月 1 日 01:00| 鲍勃 |
+--------+------------------+----------------+------ ---+
| 2 | 2012 年 2 月 1 日 00:00 |2012 年 2 月 1 日 01:00| 富 |
+--------+------------------+----------------+------ ---+

```

在一天之内，可能会发生多笔交易。对于最终用户，我想按天对交易进行分组，如下面的数据表所示：

```
+--------+----------------+------------+----------+-- -----+
| 身份证 | START_TIME | END_TIME | 持续时间 | 用户 |
+--------+----------------+------------+----------+-- -----+
| 2012 年 1 月 1 日星期日 |
+--------+----------------+------------+----------+-- -----+
| 1 | 00:00 | 01:00 | 01:00 | 鲍勃 |
+--------+----------------+------------+----------+-- -----+
| 2012 年 1 月 2 日星期一 |
+--------+----------------+------------+----------+-- -----+
| 2 | 00:00 | 01:00 | 01:00 | 富 |
+--------+----------------+------------+----------+-- -----+

```

如何使用 JSF 2.0 中的数据表执行此操作？你我必须创建一个自定义组件吗？

服务层提供这样的交易：`java.util.List<Transaction>`

```
class Transaction {
  private int id;
  private Date start;
  private Date end;
  private User user;

  // getters and setters ...
} 
```

* * *

**编辑：**
根据 chkal 的回答，这是我想出的解决方案

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Group by day</title>
</head>

<body>
    <table border="1">
        <thead>
            <tr>
                <th colspan="4">The last 10 transactions</th>
            </tr>
            <tr>
                <th>ID</th>
                <th>START DATE</th>
                <th>END DATE</th>
                <th>USER</th>
            </tr>
        </thead>

        <!-- Firstly iterate other dates -->
        <ui:repeat value="#{transactionBean.distinctTransactionsDates}" var="entry">
        <tbody>
            <tr>
                <th colspan="4" align="left"><h:outputText value="#{entry}" /></th>
            </tr>

            <!-- Secondly iterate other transactions -->
            <ui:repeat var="t" value="#{transactionBean.getTransactionList(entry)}">
            <tr>
                <td><h:outputText value="#{t.id}" /></td>
                <td><h:outputText value="#{t.startDate}" /></td>
                <td><h:outputText value="#{t.endDate}" /></td>
                <td><h:outputText value="#{t.user}" /></td>
            </tr>
            </ui:repeat>
        </tbody>
        </ui:repeat>
    </table>
</body>
</html> 
```

**输出**

```
<table border="1">
    <thead>
        <tr>
            <th colspan="4">The last 10 transactions</th>
        </tr>
        <tr>
            <th>ID</th>
            <th>START DATE</th>
            <th>END DATE</th>
            <th>USER</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th colspan="4" align="left">Sun Jan 01 00:00:00 CET 2012</th>
        </tr>
        <tr>
            <td>1</td>
            <td>Sun Jan 01 00:00:00 CET 2012</td>
            <td>Sun Jan 01 01:00:00 CET 2012</td>
            <td>bob</td>
        </tr>
        <!-- Other rows appear here -->
    </tbody>
    <!-- Other tbodies appear here -->
</table> 
```

*注意* `ui:repeat`是 JSF 2.0 中的新功能。`h:dataTable` 它是结帐本[教程](http://www.mkyong.com/jsf2/jsf-2-repeat-tag-example/)的替代方法以获取更多[详细信息](http://www.mkyong.com/jsf2/jsf-2-repeat-tag-example/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:01:41.107

我认为这里没有适合的现成组件。

您可以尝试将事务条目分为两个级别。第一级是一个列表，其中每个条目代表至少一个交易发生的日期。这些条目中的每一个都有一个包含实际交易的第二个列表。

然后，您可以使用两个嵌套`<ui:repeat>`组件来呈现所需的表格。但在这种情况下，您必须自己渲染所有 HTML 表格内容。

我认为这应该有效。:)

# c# - WPF 应用程序中的组合框，带有全选/取消全选

> ID：10858217
> 
> 赞同：2
> 
> 时间：2012-06-01T22:44:16.477
> 
> 标签：c#, wpf

目前我们有一个使用 Visual Studio 2010 在 C# 中构建的 WPF 应用程序。有一个包含复选框的组合框，但我们希望有一个全选/取消全选选项。这与您在 MS Excel 2007/2010 的自动筛选下拉菜单中看到的基本相同，您可以在其中选择所有复选框或取消选择所有复选框。组合框由 SQL Compact 数据库中的字段填充，其记录取决于在另一个组合框中选择的值（因此，另一个组合框充当您将在此下拉列表中看到的值的过滤器）。

这个功能已经在我们的盘子上几个月了，但技术团队一直在推迟下一个版本，因为他们说它太难实现了。我是应用程序的业务分析师，而不是真正的程序员，但我想我会来这里寻求一些帮助。

这真的很难实现吗（例如，至少需要一周的时间才能实现）？实现这一目标的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T00:00:07.540

[这是MSDN](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/86229c53-15bd-4780-bee3-c6c2cdae81e7)上某人的解决方案。我创建了一个新的 WPF 项目来试用它……它可以工作。您可以选中单个复选框。如果您选中或取消选中 Select All 选项，则所有其他复选框都会相应地选中或取消选中。创建和测试大约需要 5 分钟。

![在此处输入图像描述](../Images/64e856ea1b8fe3777e126b06f62fa1b6.png)

当然，可能是您的团队以某种方式覆盖了控件的功能，或者他们会遇到其他限制而无法实现这一点，但组合框应该支持它。

# mysql - 主机 'localhost' 不允许连接到这个 MySQL 服务器

> ID：10858218
> 
> 赞同：2
> 
> 时间：2012-06-01T22:44:18.917
> 
> 标签：mysql, phpmyadmin, wamp

我希望在我的 PC 上安装 WAMP 服务器，然后在 Apache 上安装 Wordpress。我成功安装了 WAMP。启动该服务以实现 phpmyadmin 无法正常工作。我收到了标题中提到的错误。所以我想重置root密码，刷新权限，然后创建一个数据库（我可以通过phpmyadmin完成）。

所以我重置了mysql root密码。然后我再次尝试运行 phpmyadmin.. 不工作！（我确实编辑了配置文件）

最糟糕的是mysql控制台也无法工作！我犯了同样的错误！

我对这一切有点陌生......请帮助1！:'(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:15:39.357

我改变了这个：

```
GRANT ALL ON database.* TO user@* IDENTIFIED BY 'password'; 
```

至：

```
GRANT ALL ON database.* TO user IDENTIFIED BY 'password'; 
```

然后它工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T22:59:29.097

*   转到cmd。
*   cd 到`C:\wamp\bin\mysql\mysql5.5.8\bin`（或您拥有的 wtvr 路径）
*   跑`mysql -uroot -p`
*   `GRANT ALL ON database.* TO user@* IDENTIFIED BY 'password';` 例如： `GRANT ALL ON mydatabase.* TO root@* IDENTIFIED BY 'secretpass';`
*   同花顺特权；

从 phpMyAdmin 正确设置 config.inc.php（用户 root、密码 wtvr、主机 localhost 等）：

```
$cfg['Servers'][$i]['verbose'] = 'localhost';
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = 'secretpass'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T17:29:07.487

尝试这个-

1) 转到 C 盘上的 WAMP 文件夹。

2) 转到别名文件夹并打开 phpmyadmin.conf 文件

3）原始文件看起来像这样 -

```
Options Indexes FollowSymLinks MultiViews
AllowOverride all
Order Deny,Allow
Deny from all
Allow from 127.0.0.1 
```

改成——

```
Options Indexes FollowSymLinks MultiViews
AllowOverride all
Order Deny,Allow
Allow from all 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-27T06:47:21.170

你应该用这个..,

```
mysql> GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION;

mysql> CREATE USER 'root'@'%' IDENTIFIED BY 'password';

mysql> GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' WITH GRANT OPTION; 
```

# javascript - 从 Mozilla 扩展运行二进制文件的推荐方法（使用标准 I/O 通信）？

> ID：10858219
> 
> 赞同：3
> 
> 时间：2012-06-01T22:44:19.420
> 
> 标签：javascript, firefox, firefox-addon, ipc, xpcom

我正在开发一个 Firefox 扩展，并想从中调用一个外部二进制文件。如果我可以使用标准输入/输出进行通信，那就太好了，所以我正在寻找最好的（也是最简单的）可能的选择。这是我到目前为止所学到的：

*   [nslProccess](https://developer.mozilla.org/en/nsIProcess)不合适，因为我需要获取字符串作为返回值。nslProcess 只能提供退出代码。
*   我可以使用[XPCOM](https://developer.mozilla.org/en/XPCOM)，但如果我不需要修改二进制代码（它是 C，BTW），我会更喜欢。我还想让最便携的解决方案成为可能。
*   Protozilla IPC 看起来像是一个解决方案，但我不确定这个项目是否得到维护。最后一次提交是 10 年前。

据我了解，此功能是在 Enigmail 中实现的，它使用命令行 gpg 工具。有没有人对此有一些细节？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T06:45:42.747

据我所知，Enigmail 使用二进制 XPCOM 组件来实现这一点，通常这不是一个可行的扩展解决方案。通过标准输入/输出与另一个进程通信不是 Gecko 平台的一部分。所以我认为你有三个选择：

1.  使用[js-ctypes](https://developer.mozilla.org/en/js-ctypes)直接调用必要的 OS 函数。例如，在 Windows 上，您将[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)在参数中调用并指定标准输入/输出的句柄`lpStartupInfo`。当然，您还必须使用操作系统功能来处理流。如果您需要支持多个操作系统，这很快就会变得非常麻烦。
2.  使用 shell 重定向输出。请参阅[此答案](https://stackoverflow.com/questions/10215643/how-to-execute-a-windows-command-from-firefox-addon/10216452#10216452)，了解如何在 Windows、类 Unix 系统上使用 shell 运行命令，`"/bin/sh"`而不是`env.get("COMSPEC")`. 您可以将命令行应用程序的输入数据写入`in.txt`然后运行命令`foo < in.txt > out.txt`- 命令完成后将显示输出`out.txt`。显然，如果您需要在应用程序运行时与之交互，这将不起作用。
3.  您可以更改应用程序以使用不同的 IPC 方法，即 Gecko 平台支持的方法。通常这意味着[使用](https://stackoverflow.com/questions/8525428/whats-the-best-way-to-communicate-with-a-firefox-addon/8531503#8531503)绑定到`localhost`. 或者你把它变成一个动态库（`.dll`在 Windows 上，`.so`在类 Unix 系统上）并通过[js-ctypes](https://developer.mozilla.org/en/js-ctypes)与它通信。

# mysql - 根据id匹配逗号分隔字段查询表

> ID：10858221
> 
> 赞同：1
> 
> 时间：2012-06-01T22:44:20.557
> 
> 标签：mysql

我的数据库中有一个表格，列出了要显示的不同部分。如果用户 ID 在名为“userAccess”的数据库列中，我们只想显示这些部分，该列将有一个逗号分隔的用户列表，可以看到它。

示例行

```
id    section   userAccess
1     editNews  1,13,15 
```

那么我怎样才能查询出来并说出类似的话

```
SELECT `section` WHERE '$userID' is in `userAccess` 
```

我尝试了 LIKE %，但显然如果我做 LIKE %1%，这将返回所有 3 个用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:50:42.500

```
SELECT `section` WHERE FIND_IN_SET('$userID', `userAccess`) != 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:48:59.743

您可以考虑移动到基于组的权限结构，然后拥有一个 GroupAccess 表，其中包含您的部分和组 ID 的 FK。用户将被分配到 UserGroup 链接表中的组。这为您提供了很大的灵活性（但更复杂）。

或者失败了，只需拥有

```
id section  userAccess
1  editNews 1
2  editNews 13
3  editNews 15 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T23:09:25.060

另一种选择：

```
SELECT `section`
FROM t
WHERE concat(',', '$userID', ',') like concat(',', `userAccess`, ',') 
```

换句话说，如果将分隔符放在两个字符串周围，则可以使用 like。我提供这个是因为它与您尝试的解决方案更相似，并且您可以在其他数据库中使用相同的方法。

# python - Python time.sleep() 遇到浮点异常

> ID：10858225
> 
> 赞同：1
> 
> 时间：2012-06-01T22:45:01.067
> 
> 标签：python, floating-point-exceptions

我在 GNURadio 程序中使用 Python time.sleep() 函数。然而，尽管我提供了一个浮点参数，代码还是遇到了一个意外的浮点异常。请在下面找到相关的代码片段（请忽略调试“呵呵”的:-)）：

```
while not ack and timeout < 5: #FIXME: Hard-coded timeout interval
    print "Hehe5"   
    timeout+=1
    print "Hehe6"
    time.sleep(0.5)
    print "Hehe7"
    with lock:
        ack=recvd_prev_ack
    print "Hehe8" 
```

这给出了以下输出：

```
Sent pktno=   0
Hehe
Hehe1
Hehe2
Hehe3
Hehe4
Hehe5
Hehe6
Floating point exception 
```

所以错误点确实是time.sleep()。有人可以解释一下这里会发生什么吗？我的 Python 版本是 2.7.1。

谢谢和问候， Dhrubo

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T22:48:03.837

这里发生的事情是您的程序是线程化的，并且浮点异常发生在另一个线程中（不是您认为的）。

# mysql - SQL - 列计数与第 1 行的值计数不匹配

> ID：10858228
> 
> 赞同：4
> 
> 时间：2012-06-01T22:45:25.297
> 
> 标签：mysql, count

我正在尝试将其放入数据库中。所有行都是正确的。每行也是字符串/文本，除了“Id”，它是一个自动递增的 Int 值。

但是，我遇到了一个意外错误，说**Column count doesn't match value count at row 1**。查询有什么问题？

```
INSERT INTO  `world2_main`.`Messages` (
`Id` ,
`ToId` ,
`FromId` ,
`Subject` ,
`Message` ,
`Read` ,
`Original Sender` ,
`Date`
)
VALUES (
NULL,  '3611',  '156',  'You are so...',  'Cool.',  '0',  '3611'  '1338590308'); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T22:47:36.333

那么 Id 是一个自动递增的 int 值，并且您在其中放置了一个 null 。

做就是了

```
INSERT INTO  `world2_main`.`Messages` (
`ToId` ,
`FromId` ,
`Subject` ,
`Message` ,
`Read` ,
`Original Sender` ,
`Date`
)
VALUES (  '3611',  '156',  'You are so...',  'Cool.',  '0',  '3611'  '1338590308'); 
```

编辑：实际上只是在 3611 之后缺少逗号。但是避免插入 id 仍然很好。

```
INSERT INTO  `world2_main`.`Messages` (
    `ToId` ,
    `FromId` ,
    `Subject` ,
    `Message` ,
    `Read` ,
    `Original Sender` ,
    `Date`
    )
    VALUES (  '3611',  '156',  'You are so...',  'Cool.',  '0',  '3611',  '1338590308'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-29T14:17:45.457

我还发现，如果您在要插入的表上有一个触发器，并且该触发器有另一个包含不匹配列和值的插入语句，它将引发错误“列计数与行的值计数不匹配” .

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-19T21:15:43.363

You may have defined different number of parameters and are probably passing a different number of parameters.

You may have:

```
INSERT INTO `buyers`(`key1`,  `key2` )
VALUES (value1,value2,value3 ); 
```

or more number of arguments in INSERT INTO than in the VALUES

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-16T20:54:44.383

记住3点：

1.  参数数量必须匹配
2.  应该注意自动增量
3.  （这是我的问题）插入多个属性时

不要这样做——

```
insert into agent(eid, ename, email, phone, score) values(
    (2, 'b', 'b', 5, 3),
    (1, 'a', 'a', 5, 3)
   ); 
```

你必须这样做

```
insert into agent(eid, ename, email, phone, score) values
    -> (1, 'a', 'a', 5, 3),
    -> (2, 'b', 'b', 5, 3); 
```

谢谢

# c# - Silverlight Gridview - 在属性更改时更新组

> ID：10858229
> 
> 赞同：0
> 
> 时间：2012-06-01T22:45:31.130
> 
> 标签：c#, silverlight, gridview, silverlight-toolkit

假设我们有一个具有两个字符串属性的简单类，实现 INPC：

```
 public class TestClass : INotifyPropertyChanged
    {
        private string _category;
        public string Category
        {
            get { return _category; }
            set { _category = value; NotifyPropertyChanged("Category"); }
        }

        private string _name;
        public string Name
        {
            get { return _name; }
            set { _name = value; NotifyPropertyChanged("Name"); }
        }

        private void NotifyPropertyChanged(string property)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(property));
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
    } 
```

让我们创建一个 ObservableCollection 并将它们分配给 PagedCollectionView：

```
public PagedCollectionView MyItems { get; set; }

public void Test()
{
    var items = new ObservableCollection<TestClass>();
    items.Add(new TestClass { Category = "A", Name = "Item 1" });
    items.Add(new TestClass { Category = "A", Name = "Item 2" });
    items.Add(new TestClass { Category = "B", Name = "Item 3" });
    items.Add(new TestClass { Category = "B", Name = "Item 4" });
    items.Add(new TestClass { Category = "C", Name = "Item 5" });
    items.Add(new TestClass { Category = "C", Name = "Item 6" });
    items.Add(new TestClass { Category = "C", Name = "Item 7" });

    MyItems = new PagedCollectionView(items);
    MyItems.GroupDescriptions.Add(new PropertyGroupDescription("Category"));
} 
```

*   请注意，我们还设置了类别分组

然后，使用 MVVM 我们将其绑定到我们的 XAML 中：

```
<sdk:DataGrid ItemsSource="{Binding Path=MyItems}" /> 
```

如果我们然后进入并编辑其中一个类别，例如将其中一个“C”更改为“A”，gridview 可以出色地处理它。它维护组的折叠状态，甚至在需要时添加新的组标题！

当我们在视图模型中以编程方式更改类别（或者，例如，从绑定到相同数据的另一个网格视图中）时，就会出现问题。在这种情况下，*类别文本*将更新，但项目不会移动到新的适当组中，不会创建新组，不会更新行标题等。

当属性在 gridviews 编辑功能之外更改时，如何触发 gridview 更新其组？

欢迎任何解决方法，但是触发简单的 Refresh() 不会消除滚动/折叠/等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T22:53:17.637

您需要使用 EditItem() 和 CommitEdit() 包装编辑

```
 // The following will fail to regroup
        //(MyItems[3] as TestClass).Category = "D";

        // The following works
        MyItems.EditItem(MyItems[3]);
        (MyItems[3] as TestClass).Category = "D";
        MyItems.CommitEdit();

        // The following will also fail to regroup            
        //(MyItems[3] as TestClass).Category = "D";
        //items[3] = items[3];

        // fails as well, surprisingly
        //(MyItems[3] as TestClass).Category = "D";
        //TestClass tmp = items[3];
        //items.RemoveAt(3);
        //items.Insert(3, tmp); 
```

# android - 在 Android 上创建 PDF 文件

> ID：10858230
> 
> 赞同：1
> 
> 时间：2012-06-01T22:45:38.970
> 
> 标签：android

> **可能重复：**
> [如何在 android 上创建 pdf 文件](https://stackoverflow.com/questions/3521097/how-to-create-pdf-files-on-android)

我有一个程序要求用户提供信息，然后我需要将此信息放在文档/合同上。我想我想使用 itext 创建一个包含该信息的 pdf 文件（其他替代方式也将不胜感激）。虽然，我发现 itext 版本不是为 android 构建的（至少是免费版本）。我唯一的解决方案是创建一个服务器，将此信息发送到创建 pdf 的服务器，然后将 pdf 发送回我的手机。我不知道该怎么做。或者，如果有人知道如何为 android 制作 itext 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:53:13.583

欢迎来到stackoverflow。在与您联系之前，请先搜索您的问题。如果您想在服务器上执行此操作，您可以创建一个简单的 PHP 脚本来为您生成 PDF。

只是 Google for PHP 生成 PDF，它会给你很多链接。如果你想在设备上生成 pdf，你可以利用一个为你做的 java 库。试试这个stackoverflow链接[在Android上创建pdf文件](https://stackoverflow.com/questions/3521097/how-to-create-pdf-files-on-android)

# user-interface - solr 用户界面

> ID：10858232
> 
> 赞同：0
> 
> 时间：2012-06-01T22:45:45.747
> 
> 标签：user-interface, solr, lucene

**大家好**

我是**Solr/Lucene**的菜鸟。我想要一本关于如何制作简单的**UI**（用户界面）以与 Solr/Lucene Apache 对话的教程或书籍，或者更好的简单用户界面。我更喜欢在 Apache tomcat 上使用 Java 脚本、html 和所有这些创建用户界面。

**谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:56:32.247

您可以从 - 使用[教程索引数据开始](http://lucene.apache.org/solr/api/doc-files/tutorial.html)

该示例提供了基于[Velocity](http://wiki.apache.org/solr/VelocityResponseWriter)和 JQuery 的漂亮简单界面，可以进一步定制。（检查浏览请求处理程序）
您还可以通过[XSLT](http://wiki.apache.org/solr/XsltResponseWriter)创建自定义 UI 设计。

Solr 提供了许多客户端来帮助您使用诸如用于 Java 的 Solrj、用于 Ruby 的 rsolr 和 sunspot 等语言设计接口。

对于一本书，您可以查看[LucidWorks for Solr 参考指南](http://www.lucidimagination.com/downloads)。
它可以免费下载，并且可以让您开始使用基础知识（但是它可能无法为您提供 UI 设计）

# c - 有效地测试一个列表是否是另一个列表的排列

> ID：10858238
> 
> 赞同：2
> 
> 时间：2012-06-01T22:46:22.790
> 
> 标签：c, arrays, assembly, permutation

我正在阅读[http://comicjk.com/comic.php/906](http://comicjk.com/comic.php/906)，其中提出了检查一个列表是否是另一个列表的排列的问题，并提出了两种解决方案。

'c Brain' 解决方案“你知道列表将始终包含四个更少的数字，并且每个数字将小于 256，因此我们可以将所有排列字节打包成 32 位整数，然后......”

“python 大脑”解决方案是对两者进行排序然后比较它们，这似乎更明显，但我对更有效（和低级）的解决方案感兴趣。

## 我最初的方法是：

```
int permutations(int a[4], int b[4]){
  int A = a[0] | a[1]*1<<8 | a[2]*1<<16 | a[3]*1<<24;
  int B = b[0] | b[1]*1<<8 | b[2]*1<<16 | b[3]*1<<24;

  unsigned int c=0, i=0;

  for( i=0xFF; i>0; i<<=8 ){
      if( 
        A&i == B&0xFF ||
        A&i == B&0xFF00 ||
        A&i == B&0xFF0000 ||
        A&i == B&0xFF000000
      ) c |= i;
  }

  if( c == 0xFFFFFFFF )
    return 1;
  return 0;
} 
```

但是除非我能找到一种简单的方法将 A&i 和 B*0xxxxxxxxx 都定位在同一个字节上（删除我们正在查看的字节后的任何尾随 0），否则这将无法工作。所以像

```
(a&i>>al)>>ar == b(&j>>bl)>>br 
```

其中 al+ar == bl+br == 4 用于确定我们正在检查的字节。

## 另一种方法

评论框中有人说“在 C 中，为什么不简单地动态分配一段适当大小的内存并将其视为单个数字？确实它比使用 int 慢一点，但它也不受限制包含四个或更少的元素或最大数量为 256，并且仍然比排序更快（无论是在 C 还是 Python 中）......”

如果我们可以有一个长度大于我们的最大数的数组，那么我们可以设置适当的位并比较数组，但这会提供更多的比较，因为我们会进行比较，除非我们可以有效地将其视为一个大数在c。

在 x86（我刚刚开始学习）中，我们有 SBC 指令，因此我们可以减去每个部分，如果结果全为零（我们可以用 JNE/JNZ 测试）它们是相等的。

据我所知，我们仍然需要做 / SBC 和跳跃

## 实际问题

我想知道如何

1.  字节包装
2.  将整个列表视为一个大数

可用于检查一个列表是否是另一个列表的排列（假设列表不超过 4 个项目并且每个项目小于 256）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T23:04:57.643

假设结果可能为“否”的优化：计算每个列表的总和（或异或，或其他一些廉价的、关联的、可交换的运算符）。如果总和不同，则答案是否定的，无需进一步测试。如果总和相同，则执行更昂贵的测试以获得明确的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T00:44:29.147

我认为您只想要一个不受排列影响的哈希值。加法作为一种方法提供。[我正在考虑一种与布隆](http://en.wikipedia.org/wiki/Bloom_filter%28%28%28a%29)过滤器兼容的方法，这样你就可以用它做更多的事情。

布隆过滤器可以处理任意长度和任意大小的列表。它可用于查看列表是否与一组列表具有相同的排列。它可用于查看元素是否可能存在于列表中。

布隆过滤器基本上是一个位数组。您只需“或”组成列表的元素位一起生成布隆过滤器。以任何顺序具有相同元素的任何列表都将设置相同的位。对于小型列表，您可以对位数组使用整数大小的数字：

```
unsigned char b = a1|a2|a3|a4; // where a1..n are items (8 bit numbers) 
```

如果您有项目 a1 和一个带有bloom b 的列表，并且想知道 a1 是否在列表中：

```
fPossibleMatch = ((a1&b) == a1); 
```

如果您有两个带有 b1、b2 的任意长度的列表，并且想知道 b1 的所有项目是否可能存在于 b2 中：

```
fPossibleMatch = ((b1&b2) == b1); 
```

如果您想知道具有相同 # 元素的列表 b1 和 b2 是否是彼此的排列。

```
fPossibleMatch = (b1==b2); 
```

要减少误报，请扩大布隆过滤器。如果我们使用 64 位bloom，我们可以使用这个任意选择的算法来展开位：

```
unsigned long long b = (a1<<(a1&0x1F)) | (a2<<(a2&0x1F)) | (a3<<(a3&0x1F)) | a4<<(a4&0x1F); 
```

我有一种感觉，我扩大绽放的算法并不好。它可能只是将所有位设置为糊状。其他人可能知道更好的方法。我想你明白了。

我认为这更好：

```
#define MUNGE(a) ((a)<<(((a)&7)<<3))
unsigned long long b = MUNGE(a1)|MUNGE(a2)|MUNGE(a3)|MUNGE(a4) 
```

我不擅长创建哈希。

您仍然需要仔细检查任何具有匹配布隆过滤器的列表。误报的数量随着列表长度和元素大小的增加而增加。假阳性随着绽放大小的增加而减少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T18:21:28.120

使用哈希表并遍历每个列表。这将给出一个需要 O(n) 时间和 O(n) 内存的解决方案。

# ios - 如何验证提交到应用商店的存档代码

> ID：10858243
> 
> 赞同：0
> 
> 时间：2012-06-01T22:47:22.723
> 
> 标签：ios, xcode, app-store

我向 Apple App Store 提交了我的 iOS 应用程序的完整版和精简版以进行增量发布 (1.2) - 这两个应用程序都已出售。我在我的精简版中添加了应用内购买。

我的完整版获得批准，但我的精简版没有。在与 Apple 讨论时，他们提供了一个屏幕截图，显示他们无法访问 Lite 版本中的应用内功能，但屏幕截图来自我的完整版，它没有该功能。

我正在上诉，并希望他们能解决。

这是我第一次有任何应用程序被拒绝，我有几个问题希望得到经历过这个的开发人员的任何建议。

1.  有没有办法让我运行我从 Organizer/Archive 提交的确切代码，以便我可以验证我的 Lite 版本确实是 Lite 版本而不是 Full 版本？我可以在本地文件系统中看到它们，并且有 2 个大小不同的不同文件。

2.  如果我必须重建我的应用程序并重新提交，我可以从 Organizer 中的同一个存档中执行此操作吗？

3.  如果我必须重建，我想我会遇到一些麻烦，因为在过去的一周半里，我一直在埋头苦干下一个版本。有没有办法访问用于构建存档的版本？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:55:18.677

1.  您可以将发布的版本重新签名为临时版本并在您的设备上运行它。
2.  如果它需要一个新版本，它不会让你提交相同的版本号，这可能会阻止你使用相同的存档。
3.  我的习惯是为这个案例的每个版本制作快照。如果您没有保存的快照，或者您没有使用源代码管理，那么您可能在那个快照上不走运。

# c# - 如何对 IEnumerable 进行排序 或使用 LINQ 对两个数据表连接进行排序？

> ID：10858249
> 
> 赞同：2
> 
> 时间：2012-06-01T22:47:35.973
> 
> 标签：c#, linq

我正在加入两个数据表并使用 LINQ 进行选择。我在“orderby”行中遇到错误。“当前上下文中不存在名称‘联系人’”。如果我按“客户”变量中的列排序，它可以工作，但不使用“联系人”变量中的列。

然后我删除了 orderby 行并尝试使用 lambda 表达式对其进行排序，例如：

```
orders.OrderBy(o => (string) o["ContactName"]; 
```

并且我收到一个错误“无法将 [] 索引应用到 'AnonymousType#1' 类型的表达式。我不想创建一个仅用于排序的新类。

任何想法如何进行这种排序。我将使用两个表中的多个列进行排序。

代码：

```
 var orders = (from customer in Customers.AsEnumerable()
                          join contact in Contacts.AsEnumerable()
                              on (int) customer["CustomerID"] equals (int) contact["CustomerID"] into outer
                                from contact in outer.DefaultIfEmpty()
                                orderby contact["ContactName"]   
                          select new
                                     {
                                         ContactID = (int) contact["ContactID"]),
                                         Name =  (string) contact["ContactName"]),
                                         City =  (string) contact["City"])
                                  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:50:41.317

存在一些语法问题（括号太多， fe `contact["ContactID"])`），这应该有效：

```
var orders =  from customer in Customers.AsEnumerable()
              join contact in Contacts.AsEnumerable()
              on customer.Field<int>("CustomerID") equals contact.Field<int>("CustomerID") into outer
                  from contact in outer.DefaultIfEmpty()
                  orderby contact["ContactName"]   
                  select new
                  {
                        ContactID = contact.Field<int>("ContactID"),
                        Name =  contact.Field<String>("ContactName"),
                        City =  contact.Field<String>("City")
                  }; 
```

旁注：我会使用强类型`Field`扩展方法。

# java - 如何将 Spring 与 JDBC 集成？

> ID：10858251
> 
> 赞同：0
> 
> 时间：2012-06-01T22:47:46.123
> 
> 标签：java, mysql, spring, jdbc

我目前正在使用以下代码连接到 mysql 数据库，但项目经理表示我必须使用 Spring 框架来处理连接。

我怎么能做到这一点？

使用 Spring 处理数据库连接会提高整个系统的质量吗？

这是该类的示例

```
import com.mysql.jdbc.Connection;
import com.mysql.jdbc.Statement;
import java.sql.DriverManager;
import java.sql.ResultSet;

public class SomeClass {
   Connection connection = null;
   ResultSet resultSet;
   Statement state;
   ArrayList aList = new ArrayList();

   public void connectToDatabase(String databaseName)
   {
      try
      {
         Class.forName("com.mysql.jdbc.Driver").newInstance();
         connection = (Connection) DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306/" + databaseName, "username", "password");
         state = (Statement) connection.createStatement();
      }
      catch(Exception e)
      {
         JOptionPane.showMessageDialog(null, e);
      }
   }

private void populateAList() {
   try
   {
      connectToTable("testDB");
      resultSet = state.executeQuery("SELECT listItems FROM tblListItems WHERE ID = '" + theIDYouWant + "'");

      while(resultSet.next())
      {
         aList.add(resultSet.getString("listItems"));
      }

      resultSet.close();
      state.close();
   }
   catch(Exception e)
   {
      JOptionPane.showMessageDialog(null, e);
   }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T22:50:43.700

Spring 参考指南提供[了它对 JDBC 的支持的详细文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jdbc.html)。至少，使用[JdbcTemplate](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html)`new JdbcTemplate(...)` ——除了最基本的用法，你不需要任何东西——会：

*   消除大量样板代码，
*   删除忘记关闭语句和连接的能力，
*   减少对不适当异常处理的诱惑，以及
*   使摆脱低效的连接处理变得非常容易。

您展示的代码受到所有这四个问题的影响，所以我不得不说切换到 Spring 对您来说将是一个巨大的好处。

此外，如果您使用的是多线程应用程序（所有 web 应用程序都是多线程的），请将“自动线程安全”添加到您的代码也缺少的列表中。

# c# - wpf应用程序的画布上未显示椭圆

> ID：10858252
> 
> 赞同：0
> 
> 时间：2012-06-01T22:47:54.530
> 
> 标签：c#, wpf, user-controls

我有一个 wpf 用户控件，在里面我放了一个名为 VisualFeedback 的画布，现在我以编程方式添加一个 Eclipse 使用：

```
 Ellipse ellipse = new Ellipse
        {
            Fill = new SolidColorBrush(Colors.Red),
            Width = 5,
            Height = 5,
            Opacity = 1,
            Margin = new Thickness(10, 10, 0, 0)
        };
        VisualFeedback.Children.Add(ellipse); 
```

但它不会显示在应用程序主窗口中的用户控件画布中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:18:43.507

你的代码对我有用——你确定你不只是错过它吗？- 它很小。

# java - 基于注释的字符串验证

> ID：10858258
> 
> 赞同：0
> 
> 时间：2012-06-01T22:48:19.663
> 
> 标签：java, string

是否有一个库允许在 Java 中进行基于 AOP 的字符串验证。像这样的东西：

```
@StringValidate("some_regex_pattern")
String sample; 
```

最好在编译时

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T23:05:55.077

您是否查看过任何[JSR-303 实现](http://www.hibernate.org/subprojects/validator.html)或[https://java.net/jira/browse/JAVAEE_SPEC-20 6 文档](http://docs.oracle.com/javaee/6/tutorial/doc/gircz.html)？

你会想要`@Pattern`注释。

我不理解“在编译时”，因为这似乎有点没用，并且不会真的是通常是运行时字节码操作的 AOP IMO。有 SpringContracts，这显然是 Spring，还有一些基于 AspectJ 的库（虽然你自己的库并不难）。

# c++ - 为什么这个不变量会变成假的？

> ID：10858260
> 
> 赞同：2
> 
> 时间：2012-06-01T22:48:27.797
> 
> 标签：c++, invariants

在阅读加速 c++ 时，我对为什么不变量变为假的解释感到困惑（参见下面的代码）：

作者（在这种情况下）将不变量定义为：

> 我们的不变式是到目前为止我们已经写了 r 行输出。当我们定义 r 时，我们给它一个初始值 0。此时，我们还没有写任何东西。将 r 设置为 0 显然使不变量为真，因此我们满足了第一个要求。

```
// invariant: we have written r rows so far
int r = 0;

// setting r to 0 makes the invariant true
while (r != rows) {
    // we can assume that the invariant is true here

    // writing a row of output makes the invariant false <- WHY?
    std::cout << std::endl;

    // incrementing r makes the invariant true again
    ++r;
}   
// we can conclude that the invariant is true here 
```

然后后来解释...

> 写一行输出会导致不变量变为假，因为 r 不再是我们写的行数

鉴于定义，我无法在两者之间建立联系。

当一行输出正在写入时，为什么不变量会变为假？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T22:52:19.040

`r`定义为已打印的行数。因此，不变量只有在

```
r == number of rows that have been printed 
```

在打印一行和递增`r`以更新到目前为止打印的行数之间，该不变量不成立。

`r`等于某个数字（例如`n`），并且“已打印的行数”比该数字（`n + 1`）大一，因为您刚刚打印了行。因此，不变量不成立，因为`n != n + 1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:52:28.007

> 到目前为止，我们已经编写了 r 行输出

`r`从 0 开始，并且在`cout`r 仍然为 0的点。`cout`写了 1 行但`r`为 0。因此不变量暂时为假，因为如果将 的值`r`插入到上面的语句中，则“我们到目前为止已写出 0 行输出”。

递增`r`导致不变量再次变为真。

# makefile - 如果未设置变量，如何中止makefile？

> ID：10858261
> 
> 赞同：182
> 
> 时间：2012-06-01T22:48:52.910
> 
> 标签：makefile

如何根据未设置/赋值的makefile变量中止make/makefile执行？

我想出了这个，但只有在调用者没有明确运行目标（即`make`只运行）时才有效。

```
ifeq ($(MY_FLAG),)
abort:   ## This MUST be the first target :( ugly
    @echo Variable MY_FLAG not set && false
endif

all:
    @echo MY_FLAG=$(MY_FLAG) 
```

我认为这样的事情是个好主意，但在make的手册中没有找到任何东西：

```
ifndef MY_FLAG
.ABORT
endif 
```

* * *

## 回答 #1

> 赞同：343
> 
> 时间：2012-06-01T22:57:53.963

**TL;DR**：使用[`error`功能](http://www.gnu.org/software/make/manual/make.html#Make-Control-Functions)：

```
ifndef MY_FLAG
$(error MY_FLAG is not set)
endif 
```

请注意，这些行不能缩进。更准确地说，这些行之前不能有制表符。

* * *

# 通用解决方案

如果您要测试许多变量，则值得为此定义一个辅助函数：

```
# Check that given variables are set and all have non-empty values,
# die with an error otherwise.
#
# Params:
#   1\. Variable name(s) to test.
#   2\. (optional) Error message to print.
check_defined = \
    $(strip $(foreach 1,$1, \
        $(call __check_defined,$1,$(strip $(value 2)))))
__check_defined = \
    $(if $(value $1),, \
      $(error Undefined $1$(if $2, ($2)))) 
```

以下是如何使用它：

 ****```
$(call check_defined, MY_FLAG)

$(call check_defined, OUT_DIR, build directory)
$(call check_defined, BIN_DIR, where to put binary artifacts)
$(call check_defined, \
            LIB_INCLUDE_DIR \
            LIB_SOURCE_DIR, \
        library path) 
```** 

 **这将输出如下错误：**

 **```
Makefile:17: *** Undefined OUT_DIR (build directory).  Stop. 
```

## 笔记：

真正的检查在这里完成：

```
$(if $(value $1),,$(error ...)) 
```

这反映了`ifndef`条件的行为，因此定义为空值的变量也被认为是“未定义的”。但这仅适用于简单变量和显式空递归变量：

```
# ifndef and check_defined consider these UNDEFINED:
explicitly_empty =
simple_empty := $(explicitly_empty)

# ifndef and check_defined consider it OK (defined):
recursive_empty = $(explicitly_empty) 
```

正如@VictorSergienko 在评论中所建议的那样，可能需要稍微不同的行为：

> `$(if $(value $1)`测试该值是否为非空。**如果变量定义为空值，**有时也可以。我会用`$(if $(filter undefined,$(origin $1)) ...`

和：

> 此外，**如果它是一个目录并且在运行检查时它必须存在**，我会使用`$(if $(wildcard $1))`. 但将是另一个功能。

# 特定目标检查

还可以扩展解决方案，以便仅在调用某个目标时才需要变量。

### `$(call check_defined, ...)`从食谱里面

只需将支票移入配方：

 ****```
foo :
    @:$(call check_defined, BAR, baz value) 
```**  **前导`@`符号关闭命令回显，并且`:`是实际命令，即 shell [no-op stub](https://stackoverflow.com/questions/3224878/what-is-the-purpose-of-the-colon-gnu-bash-builtin/3224910#3224910)。

### 显示目标名称

该`check_defined`功能可以改进为还输出目标名称（通过`$@`变量提供）：

```
check_defined = \
    $(strip $(foreach 1,$1, \
        $(call __check_defined,$1,$(strip $(value 2)))))
__check_defined = \
    $(if $(value $1),, \
        $(error Undefined $1$(if $2, ($2))$(if $(value @), \
                required by target `$@'))) 
```

因此，现在失败的检查会产生格式良好的输出：

```
Makefile:7: *** Undefined BAR (baz value) required by target `foo'.  Stop. 
```

### `check-defined-MY_FLAG`特殊目标

我个人会使用上面简单直接的解决方案。但是，例如，[此答案](https://stackoverflow.com/questions/4728810/makefile-variable-as-prerequisite/4731504#4731504)建议使用特殊目标来执行实际检查。可以尝试将其概括并将目标定义为隐式模式规则：

```
# Check that a variable specified through the stem is defined and has
# a non-empty value, die with an error otherwise.
#
#   %: The name of the variable to test.
#   
check-defined-% : __check_defined_FORCE
    @:$(call check_defined, $*, target-specific)

# Since pattern rules can't be listed as prerequisites of .PHONY,
# we use the old-school and hackish FORCE workaround.
# You could go without this, but otherwise a check can be missed
# in case a file named like `check-defined-...` exists in the root 
# directory, e.g. left by an accidental `make -t` invocation.
.PHONY : __check_defined_FORCE
__check_defined_FORCE : 
```

用法：

 ****```
foo :|check-defined-BAR 
```** 

**请注意，`check-defined-BAR`被列为[仅订单](https://www.gnu.org/software/make/manual/make.html#Prerequisite-Types)( `|...`) 先决条件。**

 **优点：

*   （可以说）更简洁的语法

缺点：

*   无法指定自定义错误消息
*   运行`make -t`（请参阅[代替执行食谱](https://www.gnu.org/software/make/manual/make.html#Instead-of-Execution)）会用大量`check-defined-...`文件污染您的根目录。[这是无法声明`.PHONY`](https://stackoverflow.com/questions/3095569/when-declaring-the-pattern-rule-as-phony-it-is-not-triggered)模式规则这一事实的可悲缺点。

[`eval`](https://www.gnu.org/software/make/manual/make.html#Eval-Function)我相信，可以使用一些魔法和[二次扩展](https://www.gnu.org/software/make/manual/make.html#Secondary-Expansion)技巧来克服这些限制，尽管我不确定这是否值得。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2017-01-18T14:35:57.010

使用外壳功能`test`：

```
foo:
    test $(something) 
```

用法：

```
$ make foo
test 
Makefile:2: recipe for target 'foo' failed
make: *** [foo] Error 1
$ make foo something=x
test x 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-07-09T14:29:02.007

您可以使用 IF 来测试：

```
check:
        @[ "${var}" ] || ( echo ">> var is not set"; exit 1 ) 
```

结果：

```
$ make check
>> var is not set
Makefile:2: recipe for target 'check' failed
make: *** [check] Error 1 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-06-01T11:29:31.300

对未设置的变量使用 shell 错误处理（注意 double `$`）：

```
$ cat Makefile
foo:
        echo "something is set to $${something:?}"

$ make foo
echo "something is set to ${something:?}"
/bin/sh: something: parameter null or not set
make: *** [foo] Error 127

$ make foo something=x
echo "something is set to ${something:?}"
something is set to x 
```

如果您需要自定义错误消息，请将其添加到`?`：

```
$ cat Makefile
hello:
        echo "hello $${name:?please tell me who you are via \$$name}"

$ make hello
echo "hello ${name:?please tell me who you are via \$name}"
/bin/sh: name: please tell me who you are via $name
make: *** [hello] Error 127

$ make hello name=jesus
echo "hello ${name:?please tell me who you are via \$name}"
hello jesus 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-03-07T11:44:36.527

为简单起见：

```
$ cat Makefile
check-%:
        @: $(if $(value $*),,$(error $* is undefined))

bar:| check-foo
        echo "foo is $$foo" 
```

输出：

```
$ make bar
Makefile:2: *** foo is undefined. Stop.
$ make bar foo="something"
echo "foo is $$foo"
foo is something 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-23T19:49:03.990

另外的选择：

```
MY_FLAG = $(error Please set this flag) 
```

尝试在任何地方使用此变量都会导致错误，除非它被命令行覆盖。

要接受环境变量，请使用`?=`：

```
MY_FLAG ?= $(error Please set this flag) 
```************

# uinavigationcontroller - UINavigationController pushViewController 内存管理

> ID：10858264
> 
> 赞同：0
> 
> 时间：2012-06-01T22:49:12.923
> 
> 标签：uinavigationcontroller, io, pushviewcontroller

我有这样的代码：

```
MyViewController *myController = [[MyViewController alloc] init];
[self.myNavController pushViewController:myController animated:YES];
[myController release]; 
```

在上述情况下，MyViewController 的 deallc 被调用两次，导致崩溃。如果我删除最后一行“[myController release];” 一切都很好。

这不违反内存管理准则吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:37:43.280

如果我真的理解，你必须使用 initWithNibName 来对抗 init，如下所示：

```
MyViewController *myController = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil]; 
```

请试试这个并回复，最好的问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T08:59:12.430

您确定 MyViewController 的 dealloc 方法不会多次释放 someObj 吗？您可以尝试清除 dealloc 内容，然后再次运行该应用程序。

# javascript - 获取同级 HTML 元素的标签？(jQuery)

> ID：10858267
> 
> 赞同：0
> 
> 时间：2012-06-01T22:49:40.730
> 
> 标签：javascript, jquery, html

目前，我有以下内容：

```
 if ($(this).next().attr("tagName") == "INPUT") {
                        increment += 20;
                    } 
```

我正在使用 EXT.NET，它在形成元素的方式上真的很古怪。无论如何，我需要的是在 HTML 中找到下一个元素的标签。里面的代码如下所示：

```
 <div class="x-form-field-wrap x-form-field-trigger-wrap" id="ext-gen80" style="width:    167px; ">
  <input type="hidden" name="ctl00_MainContent_Department_Value" id="ext-gen82" value="" style="border-bottom-width: 2px; border-bottom-color: rgb(87, 196, 255); ">
  <input type="text" size="24" autocomplete="off" id="ctl00_MainContent_Department" name="ctl00_MainContent_Department" class="x-form-text x-form-field" style="width: 142px; border-bottom-width: 2px; border-bottom-color: rgb(252, 164, 76); ">
  <img src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" class="x-form-trigger x-form-arrow-trigger" id="ext-gen81" style="">
  <input type="hidden" size="20" autocomplete="off" id="ctl00_MainContent_Department_SelIndex" name="ctl00_MainContent_Department_SelIndex" class=" x-form-hidden x-form-field" style="border-bottom-width: 2px; border-bottom-color: rgb(87, 196, 255); "></div> 
```

当我尝试使用 alert($(this).next().attr("tagName")); 它返回“身份不明”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:52:12.237

从 jQuery 1.6 开始使用`.prop("tagName");`。

# javascript - 在服务器端创建的 DIV 元素的工具提示

> ID：10858272
> 
> 赞同：0
> 
> 时间：2012-06-01T22:50:12.547
> 
> 标签：javascript, jquery, asp.net-mvc, qtip

我有多个在服务器端创建的 DIV 元素，然后使用 ASP .Net MVC Html.Raw Helper 方法在客户端呈现。我希望在鼠标悬停时添加一个弹出窗口。每个 DIV 元素的弹出内容是不同的。如何使用 JQuery 或 qTip 做到这一点？这是我的示例 DIV 元素。任何建议都会非常有帮助。

```
<div class="gantt" style="border-width:medium;border-color:black;background:green;width:2%;margin-left:10%;">11</div>
<div class="gantt" style="border-width:medium;border-color:black;background:green;width:7%;margin-left:12%;">11</div> 
```

我试图弄清楚如何在服务器端为弹出窗口创建文本，然后使用 JQuery 将其显示为鼠标悬停时的弹出窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:35:44.170

qTip 还提供 AJAX 调用，因此您可以从服务器获取必须在弹出窗口中呈现的内容。

一个简单的例子

```
$('.selector').qtip({
    content: {
        text: 'Loading...', // The text to use whilst the AJAX request is loading
        ajax: {
            url: '/path/to/file', // URL to the local file
            type: 'GET', // POST or GET
            data: {} // Data to pass along with your request
        }
    }
}); 
```

[你可以从这里](http://craigsworks.com/projects/qtip2/docs/plugins/ajax/)读到很多

# django - DRY django 模型，创建对象列表

> ID：10858273
> 
> 赞同：2
> 
> 时间：2012-06-01T22:50:19.633
> 
> 标签：django, django-models, dry

我有一些用户资料模型，我希望能够存储几种类型的信息，但有一些尊重（如家庭或工作电话号码），但我不想使用 ForeignKey 关系......我会怎么做去做？

就像是：

```
class Profile(models.Model):
    phone = ? list of some kind ?

    class Phone(???):
        TYPE_CHOICES = (
                ('H', 'Home'),
                ('W', 'Work'),
                ('F', 'Fax'),
                )
        type = models.CharField(max_length = 1, choices = TYPE_CHOICES) 
        number = models.CharField(max_length = 16)
        private = models.BooleanField() 
```

谢谢！

**编辑：**我不想使用外键只是因为我最初希望与用户相关的所有信息都显示在个人资料管理页面上。但是...嗯...这不是太关键

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T04:59:24.863

为什么不想使用外键？如果您想拥有多个电话号码，这就是您需要/必须这样做的方式。

使用 Django 和外键很容易，您可以轻松地将内联模型表单集添加到管理页面中，以创建/编辑具有大量电话号码的用户配置文件。

您的模型应如下所示：

```
class Profile(models.Model):
    name = models.CharField(max_length=40, verbose_name="User name")

class Phone(models.Model):

    TYPE_CHOICES = (
        ('H', 'Home'),
        ('W', 'Work'),
        ('F', 'Fax'),
    )

    profile = models.ForeignKey(Profile)
    type = models.CharField(max_length = 1, choices = TYPE_CHOICES) 
    number = models.CharField(max_length = 16)
    private = models.BooleanField() 
```

然后，您可以使用类似[的](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#inlinemodeladmin-objects)方法在一个管理页面中轻松添加/编辑每个配置文件的多个电话号码。

在您的示例中，您应该执行以下操作（在 admin.py 文件中，在您的 django 应用程序中）：

```
class PhoneInline(admin.TabularInline):
    model = Phone

class ProfileAdmin(admin.ModelAdmin):
    inlines = [
        PhoneInline,
    ]

admin.site.register(Profile, ProfileAdmin) 
```

现在，您可以转到管理界面并尝试添加新的配置文件。您将看到您可以为每个配置文件添加多个电话。我希望它可以帮助你...

最后，我会推荐你​​参观一下 django 的[教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)。您将了解很多事情，并且对如何使用它有一个很好的了解。

# c++ - 使用模板“void f(int x[M][N])”时“f(int[4][4])”没有匹配函数？

> ID：10858275
> 
> 赞同：5
> 
> 时间：2012-06-01T22:50:30.567
> 
> 标签：c++, templates

```
#include <iostream>

template <int M, int N>
void print1(int src[M][N]) { }

void print2(int src[4][4]) { }

int main() {

    int src[][4] = {
        { 1,  2,  3,  4},
        { 5,  6,  7,  8},
        { 9, 10, 11, 12},
        {13, 14, 15, 16},
    };

    print1(src);
    // gives error
    // error: no matching function for call to 'print1(int [4][4])'

    print2(src);
    // works!
} 
```

在上面的代码中，`print2()`按预期工作，但`print1()`给了我错误

> 错误：没有匹配的函数调用'print（int [4] [4]）'

我不明白，它们看起来完全一样，我只是将硬编码值替换为使用模板，以便它可以接受任何大小的数组。

为什么它不起作用？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T23:01:42.543

在声明中

```
void print2(int src[4][4]) 
```

第一个`4`是没有意义的。此函数与您将其声明为一样

```
void print2(int src[][4]) 
```

或作为

```
void print2(int (*src)[4]) 
```

这是因为在 C 和 C++ 中数组从不按值传递。相反，当将数组传递给函数时，它会隐式转换为指向其初始元素的指针。同样，当函数参数的类型为“array of `T`”时，它会自动转换为“pointer to `T`”类型。实际上，C 和 C++ 中没有数组类型参数。

因此，让我们考虑您的函数模板：

```
template <int M, int N>
void print1(int src[M][N]) 
```

与 类似`print2`，这个函数模板等价于：

```
template <int M, int N>
void print1(int src[][N]) 
```

为了在调用中不显式声明模板参数的情况下调用此函数，编译器必须能够从参数的类型中 推断出什么`M`和是。并没有*真正*出现在参数列表中的任何位置，因此无法从参数中推断出它。您可以在调用时通过显式提供模板参数来调用此函数：`N``M`

 *```
print1<4, 4>(src) 
```

然而，正如我们在上面看到的，编译器可以`N`自行推断；只是`M`它无法推断。因此，您也可以通过仅提供参数`M`并让编译器推断来进行调用`N`：

```
print1<4>(src) 
```

或者，您可以将函数模板声明为对数组的引用：

```
template <int M, int N>
void print1(int (&src)[M][N]) 
```

这会抑制数组到指针的转换。为什么？请记住，在前面的示例中，参数是“指向 . 的一维数组的指针`int`”。但是，在此函数模板中，参数是“对 . 的二维数组的引用`int`”。两个范围（维度）都是类型的一部分，因此两者都可以由编译器推导出来。

* * *

但是，在大多数情况下，最好避免使用多维数组和对数组的引用，因为它们很麻烦。两者都不能很好地用于动态分配，而且防止数组到指针的转换通常很麻烦。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T22:58:48.427

使用此语法来声明您的模板函数：

```
template <int M, int N>
void print1(int (&src)[M][N])
{
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T23:01:54.290

像这样的参数声明`int src[4]`只是`int *src`. 这同样适用于数组数组，因此`print2`有效：

```
void print2(int (*src)[4]); 
```

也就是说，它需要一个指向`int[4]`.

对于您的模板功能，这归结为

```
template <int M, int N>
void print1(int (*src)[N]) { } 
```

此外，当您尝试调用该函数时，作为参数提供的数组也会衰减为指向`int[4]`.

由此，编译器无法推导出模板参数`M`，也不会找到匹配的函数。

要解决此问题，您可以在函数调用中显式指定模板参数，或者通过引用传递数组：

```
template <int M, int N>
void print1(int (&src)[M][N]) { } 
```

当通过引用传递时，数组的类型信息不会丢失。参数声明确实指定了对给定维度数组的引用，并且在调用函数时，传递的数组不会衰减为指针。根据这些信息，编译器可以自动推导出模板参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T22:57:23.097

您必须说出要使用的模板，例如：

```
print1<4,4>(src); 
```

但请注意，模板是**在编译期间**实例化的，因此您不能在其中放置变量（`print1<k,m>(src)`不起作用）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T22:57:41.657

您要求编译器了解编译时已知的数组大小，然后从那里推断出**int**模板参数。

您可以让编译器推断类型参数，但不能让编译器从您的类型（在本例中为数组大小）获取信息并推断整数模板参数。

例如，这是因为编译器将类型推断为 int[4][4]。

```
template <class T>
void printFoo(T t)
{
} 
```

并且使用这样的模板当然可以：

```
print1<4,4>(src); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-02T05:06:06.480

模板函数调用只能利用类型的模板参数推导。不能推导出非类型模板参数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-01T22:57:06.790

您应该传递模板参数。像这样：

```
print1<4,4>(src); 
```*

# wso2 - WSO2 ESB 在代理服务上提供 HTTP 202 响应

> ID：10858281
> 
> 赞同：0
> 
> 时间：2012-06-01T22:51:25.660
> 
> 标签：wso2, wso2esb

我正在尝试设置非常简单的 WSO2 ESB 代理服务。在使用它时，我收到了 HTTP 202 响应，并且 WSO2 ESB 除了记录它之外没有对请求做任何事情。这是我的设置的背景

我的服务实现是使用 SOAP 1.2 而不是 Http 1.1。当我的客户端打开与服务器的连接时，它会触发第一个请求并要求保持连接。ESB 将请求传递给实际的实现，并将响应以传输编码作为分块发送回来。到目前为止，它可以按需要工作。

在初始请求响应交换之后，我的客户端并行提交了几个请求，我得到了所有请求的 HTTP 202 响应。查看日志，似乎 ESB 从未将请求发送到实际实现。

有什么我做错了吗？我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-03T15:03:15.037

在这种情况下发生的情况是，您的后续请求正在访问 WSO2 ESB 的主序列。这就是为什么您只能看到这些请求的日志。正如您已经缩小范围，这是由于附加到 URL 的 jsessionId 而发生的。要克服这个问题，您可以创建一个带有 URL 模式的 REST API 以匹配正确的 URL 路径。请参考以下文档。

[https://docs.wso2.com/display/ESB481/Creating+APIs](https://docs.wso2.com/display/ESB481/Creating+APIs)

# algorithm - 获取修改后的斐波那契数列的第 N 位

> ID：10858285
> 
> 赞同：3
> 
> 时间：2012-06-01T22:51:36.360
> 
> 标签：algorithm, math

在今天的一次采访中，我得到了这个序列，这是一种修改后的斐波那契：

1, 1, 2, 4, 6, 13, 19, 42, 61, 135, ...,

我被要求编写一个函数来返回*n*位置的数字。

所以，如果 n = 4，函数应该返回 4，n = 6 返回 13，以此类推。

我相信你已经注意到了，不同之处在于偶数项等于前 4 项，而奇数项等于前 2 项。

如果您使用递归，这不是问题。这就是我所做的，但这不是我想要的方法。

斐波那契计算是这样的（在 PHP 中）：

```
$n = 17;
$phi = (1 + sqrt(5)) / 2;
$u = (pow($phi, $n) - pow(1 - $phi, $n)) / sqrt(5); 
```

*$u*在这种情况下是 1597。

但是，我不知道如何使用像这样的斐波那契数列的修改版本来解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T10:12:06.790

如果我对您的理解正确，您希望有效地计算 [ie in O( log(n) )] 序列定义为：

```
a[2n + 5] = a[2n + 4] + a[2n + 3] + a[2n + 2] + a[2n + 1]
a[2n + 2] = a[2n + 1] + a[2n] 
```

让我们定义两个新序列。第一个对应偶数位置的**a**值，第二个对应偶数位置的值：

```
b[n] = a[2n]
c[n] = a[2n + 1] 
```

现在我们有：

```
c[n] = b[n] + c[n - 1] + b[n - 1] + c[n - 2]
b[n] = c[n - 1] + b[n - 1] 
```

从我们得到的第一个方程中减去第二个方程（经过一些变换）：

```
b[n] = ( c[n] - c[n-1] ) /2 
```

接下来将此公式代入第一个方程以获得**c**的公式：

```
c[n] = 2 c[n-1] + c[n-2] 
```

请注意，此等式仅涉及**c**中的元素。因此，现在可以使用[此处](http://en.wikipedia.org/wiki/Recurrence_relation#Linear_homogeneous_recurrence_relations_with_constant_coefficients)描述的技术计算**c**的元素。通过进一步变换方程，您也可以有效地计算**b**。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T23:03:26.273

> 与由具有恒定系数的线性递归定义的每个序列一样，斐波那契数具有封闭形式的解。

[http://en.wikipedia.org/wiki/Fibonacci_number#Closed-form_expression](http://en.wikipedia.org/wiki/Fibonacci_number#Closed-form_expression)

但是，我不知道如何为这个特定序列创建一个封闭的形式表达式。

我可以补充的是，您无需递归即可求解斐波那契或任何类似序列，例如：

[http://forum.codecall.net/topic/41540-fibonacci-with-no-recursion-for-fun/](http://forum.codecall.net/topic/41540-fibonacci-with-no-recursion-for-fun/)

因此，您可以使用循环而不是堆栈来解决问题。**

# c++ - 用于不同应用程序的 CUDA 设备堆内存

> ID：10858288
> 
> 赞同：2
> 
> 时间：2012-06-01T22:51:52.800
> 
> 标签：c++, cuda, heap-memory

我正在尝试做一个实验。我有两个应用程序。在一个应用程序中，我将堆内存从默认的 8MB 更改为 4MB，然后启动内核，最后我忙着等待。在另一个应用程序中，我只是查询设备堆内存的大小。有趣的是，对于内核启动后的第一个应用程序，我继续获得 4MB，而对于其他应用程序，我继续获得 8MB。为什么这样？

应用程序 1 的代码是 -

```
__global__ void kernelA()
{
    printf("I am running on kernelA\n");
}
int main()
{
    size_t size;
    cudaDeviceSetLimit(cudaLimitMallocHeapSize,100*sizeof(float));
    cudaDeviceGetLimit(&size, cudaLimitMallocHeapSize);
    printf("Heap size found to be %dn",(int)size);
    kernelA<<<1,10>>>();
    cudaThreadSynchronize();
    while(1)
    {           
        cudaDeviceGetLimit(&size, cudaLimitMallocHeapSize);
        printf("Heap size found to be %d\n",(int)size); 
    }
} 
```

应用程序 2 的代码是 -

```
int main()
{
    int k=1;
    size_t size;    
    for(k=1;k<1000000;k++)
    {
        cudaDeviceGetLimit(&size, cudaLimitMallocHeapSize);
        printf("Heap size found to be %d\n",(int)size);     
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:14:41.620

CUDA 运行时 API 调用仅影响与特定设备关联的调用进程中的 CUcontext。cudaDevice* 不会直接影响可能在同一 CUDA 设备上运行的同一进程中的其他进程或其他 CUcontext 的状态。

# ruby-on-rails-3 - 在 Rails ActiveResource 中显示 POST 参数

> ID：10858291
> 
> 赞同：1
> 
> 时间：2012-06-01T22:52:18.103
> 
> 标签：ruby-on-rails-3, rest, params, activeresource

我正在使用[ActiveResource](http://api.rubyonrails.org/classes/ActiveResource/Base.html)从外部 API 获取和发布资源。即使在日志中我可以看到正在执行的调用，但我看不到参数。默认情况下不应该打印参数哈希吗？

我应该如何/添加什么才能看到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-24T11:07:06.457

**ActiveResource Post 调用语法为：**

```
post(your_custom_method_name, options={}, body='') 
```

这里*的选项是查询参数*

前任：

```
Customer.post(:bulk_import, {}, { new_customers: new_customers}.to_json) 
```

# android - 当数据库被不同的作家关闭时“数据库未打开”

> ID：10858298
> 
> 赞同：0
> 
> 时间：2012-06-01T22:52:51.897
> 
> 标签：android, sqlite, sqliteopenhelper

`Fragments`我的应用程序中有很多`ViewPager`。在应用程序启动时，其中三个尝试连接到数据库以检索数据。

对于数据库处理，我使用带有`SQLiteOpenHelper`. 当我需要我的数据库时，我这样称呼它：`SQLiteDatabase db=DatabaseHelper.getInstance(this.getContext()).getWritableDatabase();`.

**问题：**

如果我不关闭数据库，`db.close()`我`android.database.sqlite.DatabaseObjectNotClosedException`当然会得到一个。所以我愿意。但由于它是一种单例方法，当我的一个片段完成获取数据时，它会关闭数据库并且其余片段无法使用它。

当我从中读取某些内容时，检查数据库是否在每次迭代中都打开似乎非常多余。**我还可以做些什么？**

# objective-c - 核心数据选择个别领域

> ID：10858302
> 
> 赞同：0
> 
> 时间：2012-06-01T22:53:14.513
> 
> 标签：objective-c

我有一个包含以下信息的核心数据模型：

**实体：** CourseSubjects
**属性：**
-account_id
-course_code
-course_id
-name

我需要能够从该数据库中**仅选择一条**数据，其字段 course_id 与我想要的匹配。我如何才能从该数据库中仅选择一个具有 course_id 的字段？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T23:12:11.110

阅读“Predicate to Predicates Programming Guide”和 NSPredicate 文档。简而言之，您将为 course_id 创建一个谓词，然后使用该谓词执行提取。

# javascript - 带有回调的 jQuery 克隆函数 - 未按预期工作

> ID：10858304
> 
> 赞同：1
> 
> 时间：2012-06-01T22:53:35.637
> 
> 标签：javascript, jquery, html, clone

首先，这是我工作的 JSfiddle：http: [//jsfiddle.net/xzGxR/](http://jsfiddle.net/xzGxR/)

**JavaScript：**

```
function dataClonePrototype(JSOtarget, ElementPrototype, callback) {
    for (i = 0; i < JSOtarget.length; i++) {
        var TargetElement;
        if (!Eclone) { // Only create it on first interval
            TargetElement = $(ElementPrototype);
            var Eclone = TargetElement.clone(); // We only want to create a copy of this clone...
        } else {
            TargetElement = Eclone.clone().insertAfter(ElementPrototype);
        }
        callback(TargetElement, JSOtarget[i]);
    }
}

var returnedJSO = 
{
    "Animals": [
        {
            "Title": "Dogs",
            "Amount": 300
        },
        {
            "Title": "Pigs",
            "Amount": 230
        },
        {
            "Title": "Cats",
            "Amount": 340
        }
    ]
}

dataClonePrototype(returnedJSO.Animals, "section#animals", function(Element, JSOtargetAtKey) {
    Element.children("header").html(JSOtargetAtKey.Title);
    Element.children("article").html(JSOtargetAtKey.Amount);
});​ 
```

**和 HTML：**

```
<section id="animals">
     <header></header>
     <article></article>
</section>​ 
```

**输出应该（视觉上）如下所示：**

```
Dogs
300
Pigs
230
Cats
340 
```

**然而，它看起来像这样。**

```
Dogs
300
Cats
340
Pigs
230
Cats
340 
```

这样做的目的是使用 HTML 并创建它的克隆 - 然后用来自 javascript 对象的数据填充这些克隆。它应该像这样填充：

```
<section id="animals">
   <header>Dogs</header>
   <article>300</article>
</section>​ 
```

克隆的代码有问题，但我不知道是什么。非常感谢任何建议/帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:04:15.320

试试这个[jsFiddle](http://jsfiddle.net/xzGxR/1/)

```
function dataClonePrototype(JSOtarget, ElementPrototype, callback) {

    $TargetElement = $(ElementPrototype);
    for (i = 0; i < JSOtarget.length; i++) {

        var $Eclone = $TargetElement.clone(); // We only want to create a copy of this clone...

        callback($Eclone, JSOtarget[i], $TargetElement);
    }
}

dataClonePrototype(returnedJSO.Animals, "section#animals", function($Element, JSOtargetAtKey, $Prototype) {
    $Element.children("header").html(JSOtargetAtKey.Title);
    $Element.children("article").html(JSOtargetAtKey.Amount)
        $Element.insertAfter($Prototype);
});​ 
```

# java - Google App Engine 祖先查询

> ID：10858306
> 
> 赞同：1
> 
> 时间：2012-06-01T22:53:53.857
> 
> 标签：java, google-app-engine, ancestor

我显然对 GAE 祖先查询应该如何工作感到困惑。我的理解是祖先查询应该返回所有后代，而不仅仅是直系子代。然而，如果我按如下方式修改开发人员指南中的示例，我只检索直系子级，而不是孙级。我错过了什么？

```
 Entity person = new Entity("Person", "tom");

        Entity weddingPhoto = new Entity("Photo", person.getKey());
        weddingPhoto.setProperty("imageUrl",
                                 "http://domain.com/some/path/to/wedding_photo.jpg");

        Entity babyPhoto = new Entity("Photo", person.getKey());
        babyPhoto.setProperty("imageUrl",
                              "http://domain.com/some/path/to/baby_photo.jpg"); 
```

// 添加这个孙子：

```
 Entity grandbabyPhoto = new Entity("Photo", babyPhoto.getKey());
        grandbabyPhoto.setProperty("imageUrl",
                              "http://domain.com/some/path/to/grandbabyPhoto.jpg");

        Entity dancePhoto = new Entity("Photo", person.getKey());
        dancePhoto.setProperty("imageUrl",
                               "http://domain.com/some/path/to/dance_photo.jpg");

        Entity campingPhoto = new Entity("Photo");
        campingPhoto.setProperty("imageUrl",
                                 "http://domain.com/some/path/to/camping_photo.jpg");
        getDatastore().put(
           java.util.Arrays.asList(person, weddingPhoto, babyPhoto, dancePhoto, campingPhoto));

        Query userPhotosQuery = new Query("Photo");
        userPhotosQuery.setAncestor(person.getKey());

        // This returns weddingPhoto, babyPhoto and dancePhoto, but
        // not grandbabyPhoto --- why???
        List<Entity> results = 
              getDatastore().prepare(userPhotosQuery).asList(
                 FetchOptions.Builder.withDefaults()); 
```

非常感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:25:19.833

因为您的`put(..)`语句不包含`grandbabyPhoto`，所以它不会被保存。

# c# - 进程输出流的 wcf basichttpbinding 流不能按预期工作

> ID：10858309
> 
> 赞同：1
> 
> 时间：2012-06-01T22:54:21.707
> 
> 标签：c#, wcf, process, streaming, basichttpbinding

我对 WCF 流有疑问。我的解决方案中有两个组件：

*   托管在 Windows 服务中的 WCF 服务
*   使用服务的客户端应用程序（现在是控制台应用程序）

WCF 服务只有一种方法：RunProcess。此方法不带任何参数并且正在启动一个进程。它返回一个对应于流程标准输出流 (StandardOutput.BaseStream) 的 Stream（这是一个 WCF 流方法）。

WCF 服务公开一个带有 basicHttpBinding 的端点（使用 transferMode="streamed"）。

客户端代码非常简单，它调用 RunProcess 方法并将 Stream 结果传递给 StreamReader，在其上调用 ReadLine() 直到流结束（ReadLine() 返回 null）。每个 ReadLine() 结果都发送到控制台 (Console.WriteLine())

所以这很简单......但是当我启动客户端时，控制台没有按预期立即刷新。它正在等待启动的进程结束的某种原因，因为很长一段时间没有在控制台中显示任何内容，并且一旦进程完成，它就会立即显示所有输出。

我有另一个控制台项目，不依赖 WCF 服务，我直接启动进程，获取标准输出流，并使用完全相同的算法，将流写入控制台，问题不存在，输出流在进程启动后直接实时显示。

我不明白这种行为。任何帮助将不胜感激 ！

谢谢。

编辑：一些代码/配置可能确实有帮助。

--- 绑定配置

```
<basicHttpBinding>
    <binding name="BasicHttpBindingStreamed" maxReceivedMessageSize="67108864" transferMode="Streamed"/>        
</basicHttpBinding> 
```

--- WCF 方法

```
public Stream RunProcess()
    {
        Process p = new Process();
        p.StartInfo.CreateNoWindow = true;
        p.StartInfo.UseShellExecute = false;
        p.StartInfo.RedirectStandardOutput = true;
        p.StartInfo.FileName = "XXXXXX";          
        p.Start();            

        return p.StandardOutput.BaseStream;            
    } 
```

--- 客户消费者

```
Stream cmdOutputStream = serviceClient.RunProcess();
string currentLine = null;
using (TextReader reader = new StreamReader(cmdOutputStream))
{                                
   currentLine = reader.ReadLine();
   while (currentLine != null)
   {
      Console.WriteLine(currentLine);
      currentLine = reader.ReadLine();
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T23:27:55.840

解决了......愚蠢的问题，我在 WCF 服务器端配置上指定了 transferMode="Streamed" 但忘记了客户端。

# linux - 想要将内核驱动程序永久挂载到系统中

> ID：10858313
> 
> 赞同：1
> 
> 时间：2012-06-01T22:54:59.640
> 
> 标签：linux, debian, linux-device-driver, insmod

我为 USB 设备编写了自己的内核驱动程序。在我用 make 编译它之后，我有 kernelobejct 文件 usbdriver.ko 和 sudo insmod usbdriver.ko 我可以安装然后使用它。但是如果我重新启动我的 Debian，我需要再次执行 insmod 才能使用它......我怎样才能将该驱动程序永久安装/安装到系统中，以便在操作系统启动时加载它？我如何才能授予除 root 以外的其他用户访问 /dev/usbdriver0 下的关联设备文件的权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:14:14.897

1.  将您的驱动程序复制到`/lib/modules/$(uname -r)/kernel/drivers/`并将其添加到`/etc/modules`：[http](http://www.cyberciti.biz/tips/compiling-linux-kernel-module.html) ://www.cyberciti.biz/tips/compiling-linux-kernel-module.html 。
2.  我不知道，但我认为它在某处的源代码中。

# html - HTML - html 源代码中的星号

> ID：10858314
> 
> 赞同：0
> 
> 时间：2012-06-01T22:55:03.753
> 
> 标签：html, character

我想在我的`<title>`标签中添加一个星号 ( `&starf;`)。放置不是问题，`&starf`但是`&#9733;`当我将这样的内容放入 html 代码中时，当我查看网站的源代码时，我会看到真正的 html 代码。我想在源代码中看到星号。有可能吗 - 我可以在这里看到：[http ://www.kabinysanitarne.pl/](http://www.kabinysanitarne.pl/)

有人知道我该怎么做吗？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T22:56:44.733

您键入 ★ 并确保HTML[的字符编码](http://www.w3.org/International/O-charset.en.php)与 HTTP 标头（以及指定它的任何元标记）中指定的编码相匹配。

# r - R：在 R 函数中将参数传递给 glm

> ID：10858318
> 
> 赞同：6
> 
> 时间：2012-06-01T22:55:25.200
> 
> 标签：r, function, glm

我正在尝试习惯 R 中的范围问题。我想在函数中调用该函数`glm()`，但它不起作用，显然是出于范围界定的原因，我没有设法用函数`assign()`或`eval()`.

这是一个简化版本：

```
ao <- function (y, x, phi = seq (0,1,0.1), dataset, weights) {
    logLikvector <- rep(0,length(phi))  # vector of zeros to be replaced thereafter
    for (i in 1:length(phi)) {          # loop to use glm()   
        fit <- glm (y ~ x, data = dataset, family = binomial, weights = weights)         
        logLikvector[i] <- logLik(fit)      # get log likelihood
    }
    logLikvector
} 
```

现在我想在我的数据集上使用函数 ao()

```
 ao (y = Prop, x = Age, dataset = mydata, weights = Total) 
```

这不起作用，但以下工作：

```
ao (y = mydata$Prop, x = mydata$Age, dataset = mydata, weights = mydata$Total) 
```

有谁知道该怎么做？

任何帮助将不胜感激 ！！！

顺便说一句，这里是如何用我正在使用的数据集复制我的问题

```
library("MASS")
data(menarche)
mydata <- menarche
mydata$Prop <- mydata$Menarche / mydata$Total 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T08:28:23.407

替代解决方案（@DWin 建议）。

```
function(y, x, dataset, weights){
  f <- substitute(glm(y~x, data=dataset, weights=weights, family=binomial))
  logLik(eval(f))
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T00:57:44.763

```
ao <- function (x, y, phi = seq (0,1,0.1), dataset, weights) {
    logLikvector <- rep(0,length(phi))
    x <- dataset[,substitute(x)]
    y <- dataset[,substitute(y)]
    weights <- dataset[,substitute(weights)]
        for (i in 1:length(phi)) {          # loop to use glm()
        fit <- glm (y ~ x, data = dataset, family = binomial, weights = weights)
        logLikvector[i] <- logLik(fit)      # get log likelihood
    }
    return(logLikvector)
}

library("MASS")
data(menarche)
mydata <- menarche
mydata$Prop <- mydata$Menarche / mydata$Total
ao(y = "Prop",x = "Age", dataset = mydata, weights = "Total")

[1] -55.37763 -55.37763 -55.37763 -55.37763 -55.37763 -55.37763
 [7] -55.37763 -55.37763 -55.37763 -55.37763 -55.37763 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T04:25:23.007

我建议使用 创建公式`paste`并使用 调用函数`do.call`。

```
ao <- function (y, x, phi = seq (0,1,0.1), dataset, weights) {
  logLikvector <- rep(0,length(phi))  # vector of zeros to be replaced thereafter
  for (i in 1:length(phi)) {          # loop to use glm()
    f <- as.formula(paste(y, x, sep="~"))
    fit <- do.call("glm", list(formula=f, data=as.name(dataset), 
                   family="binomial", weights=as.name(weights)))
    logLikvector[i] <- logLik(fit)      # get log likelihood
  }
  logLikvector
} 
```

然后像这样调用它：

```
ao("Prop", "Age", dataset="mydata", weights="Total") 
```

有关更多详细信息，请参阅[https://stackoverflow.com/a/7668846/210673](https://stackoverflow.com/a/7668846/210673)。

# google-app-engine - 如何将日期时间转换为时间戳 Python

> ID：10858319
> 
> 赞同：1
> 
> 时间：2012-06-01T22:55:47.653
> 
> 标签：google-app-engine, python-2.7, unix-timestamp, seconds

我需要获取自创建元素以来经过了多少秒，该元素作为日期时间元素存储在数据存储区（Google App Engine）中。我正在使用日期时间变量。但我无法将时差转换为秒。(Python 2.7)

这是我的目标：

```
def time_difference(datetime_time):
    return int(datetime.now()-datetime_time) #result should be in seconds like 612 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T23:07:15.357

减去 datetime 会返回一个 timedelta。在 Python 2.7 timedelta 中有一个 total_seconds() 方法。

```
def time_difference(datetime_time):
    delta = datetime.now() - datetime_time
    return int(delta.total_seconds()) 
```

# android - Froyo 和 Gingerbread 应用程序中的 ICS 样式

> ID：10858325
> 
> 赞同：5
> 
> 时间：2012-06-01T22:56:40.730
> 
> 标签：android, styles, themes, android-4.0-ice-cream-sandwich, android-2.2-froyo

我正在为 Android 开发一个应用程序，我使用的是 API 级别 8。但是我希望这个应用程序在 Froyo 和 Gingerbread 上运行时使用 ICS 的主题，因为 ICS 的主题更漂亮。我希望至少按钮的配色方案和形状是相同的。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T23:01:47.247

您可能要查看的第一件事是 ActionbarSherlock，因为它为您的 pre-ics 代码增加了很多一致性，即使这与主题没有直接关系。

然后查看 GitHub 上的[HoloEverywhere](https://github.com/Prototik/HoloEverywhere)项目，以在专为 pre-ics 设备设计的应用程序上使用 Holo 主题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T10:26:32.430

我发现最好的是[android-holo-colors](http://android-holo-colors.com/)，您将在其中获得所有控件，还可以选择`holo-light`或`holo-dark`使用您想要的自定义颜色。

我希望这能帮到您

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T23:05:21.503

SDK 文件夹包含 ICS 中使用的大多数主题、样式和可绘制对象。查看 `SDK folder\platforms\android-15\data\res.`

[您可以像这样](http://developer.android.com/guide/topics/ui/themes.html)在您的应用程序中应用主题/样式

# python - 在网络上使用 Python 实现心理物理学实验的最佳在线时间

> ID：10858337
> 
> 赞同：2
> 
> 时间：2012-06-01T22:58:25.783
> 
> 标签：python, web, fastcgi, timing, psychtoolbox

我想在网络浏览器中显示视觉/听觉刺激以进行心理物理学实验。我打算使用 python，但我担心时间。我显然不能依靠屏幕刷新来计时，这在这些类型的任务中很常见。在网络上计时的准确性以及与 Python 一起使用的最佳工具是什么方面，我希望有多少。我正在考虑使用 FastCGI

我只是想听听人们对此的看法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T15:23:12.763

在 JS 中进行计时，在 document.ready 上以毫秒为单位保存当前时间，然后在用户按下键时保存。

使用任一基准测试您的测试

*   高速摄像机，或
*   “击中”一个键的测试装置，例如屏幕闪烁 -> pohototransistor -> USB 设备 -> 虚拟键盘

# haskell - Haskell 读取前 n 行

> ID：10858346
> 
> 赞同：2
> 
> 时间：2012-06-01T22:59:13.263
> 
> 标签：haskell, functional-programming, stdout, stdin

我正在尝试学习 Haskell 以适应函数式编程语言。我决定在[interviewstreet](https://www.interviewstreet.com/challenges/dashboard/#problem/4eac48496bee2)尝试一些问题来开始。我在从标准输入读取和使用 haskell 的惰性 io 做一般 io 时遇到问题。

大多数问题的数据来自标准输入，格式如下：

```
n
data line 1
data line 2
data line 3
...
data line n 
```

其中 n 是来自标准输入的后续行数，下一行是数据。

如何一次在 n 行的每一行上运行我的程序并将解决方案返回到标准输出？

我知道标准输入输入不会很大，但我要求一次评估每一行，假装输入大于内存中可以容纳的内容，只是为了学习如何使用haskell。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T23:06:53.877

您可以`interact`结合使用 ,`lines`来一次处理来自标准输入的数据。这是一个示例程序，用于`interact`访问标准输入，`lines`在每个换行符上拆分数据，列表推导将函数`perLine`应用于输入的每一行，并将`unlines`输出`perLine`重新组合在一起。

```
main = interact processInput

processInput input = unlines [perLine line | line <- lines input]

perLine line = reverse line -- do whatever you want to 'line' here! 
```

您无需担心通过标准输入获得的数据大小；Haskell 的惰性确保您随时只将实际正在处理的部分保留在内存中。

编辑：如果您仍然只想处理第一`n`行，您可以使用`take`上面示例中的函数，如下所示：

```
processInput input = unlines [perLine line | line <- take 10 (lines input)] 
```

这将在前十行被读取和处理后终止程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-05T11:43:31.247

您还可以使用简单的递归：

```
getMultipleLines :: Int -> IO [String]
getMultipleLines n
    | n <= 0 = return []
    | otherwise = do
        x <- getLine
        xs <- getMultipleLines (n-1)
        return (x:xs) 
```

然后在你的 main 中使用它：

```
main :: IO ()
main = do
    line <- getLine
    let numLines = read line :: Int
    inputs <- getMultipleLines numLines 
```

# com-interop - .NET 中免注册 COM 互操作的确切步骤（调用复制的 COM dll 而不使用 regsvr32）

> ID：10858349
> 
> 赞同：6
> 
> 时间：2012-06-01T22:59:42.143
> 
> 标签：com-interop, regfreecom

我想向我的 .NET 应用程序添加免注册 COM 引用。免注册意味着用户无需将 COM 组件注册到他们的系统即可运行应用程序。

我找到了很多关于这个主题的文章（例如[MSDN](http://msdn.microsoft.com/en-us/library/fh1h056h)、[这个 S/O question](https://stackoverflow.com/questions/4903385/is-it-possible-to-register-a-net-assembly-for-com-interop-without-adding-regist/)等），但没有一个包含具体步骤。这是我尝试过但没有奏效的方法：

1.  [如本答案](https://stackoverflow.com/a/476986/986080)`foo.dll`中所述，使用 mt.exe 为COM dll（例如）生成清单。
2.  添加`foo.dll`到`foo.dll.manifest`我的应用程序中作为“构建操作”=“内容”和“复制到输出目录”=“始终复制”。
3.  添加对`interop.foo.dll`附带的引用`foo.dll`。
4.  使用此部分添加应用清单文件：

    ```
    <dependency>
      <dependentAssembly>
        <assemblyIdentity type="win32" name="foo" />
      </dependentAssembly>
    </dependency> 
    ```

5.  构建并运行。

错误提示应用程序配置不正确。`<assemblyIdentity>`在没有运气的情况下尝试了不同的值。

有人可以分享经验吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T05:10:54.857

汉斯的答案有正确的信息，但当我第一次阅读它时我不清楚该怎么做。在尝试了许多不同的事情之后，我终于让它工作了，而且非常简单：

1.  在开发者机器上注册 COM 类。
2.  在应用程序项目中，添加 COM 引用。
3.  在参考属性中，设置这些：
    *   隔离 = 真
    *   复制本地 = True
    *   Embed Interop Types = False（Hans 在评论中指出这是不必要的，但我尚未验证）

通过执行这些步骤，将`interop.foo.dll`自动生成应用程序清单。这允许用户无需注册即可使用 COM 组件。

相反，如果你不在 dev 机器上注册 COM，你仍然可以通过添加引用来开发和构建应用程序`interop.foo.dll`（可以在注册了 COM 类的机器上生成然后复制），但是构建结果只能在注册了 COM 组件的机器上运行。可能有一个解决方案，但需要更深入地了解 MSBuild 如何使用 COM 引用，我没有花时间调查。

所以简而言之，运行时免注册COM的关键是在开发机上注册COM类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T23:56:36.440

您的清单不正确。它应该包含`<file>`元素而不是`<dependentAssembly>`元素。使用`<comClass>`声明可创建的共同类的元素。

生成清单是 VS 构建系统中的内置功能。为了使它工作，需要在你的开发机器上正确安装 COM 组件。不要尝试无 reg 的 COM 清单，除非您可以在没有它的情况下使其在您的机器上运行，否则您将面临*两个*问题而不是一个问题。因此，对于初学者，请确保使用供应商的安装程序或部署说明正确安装了服务器。并确保创建对象和调用方法的测试程序正常运行。

使用可以在任何机器上使用的已知良好的 COM 服务器来执行此操作很有用。从控制台应用程序项目模板创建一个新项目。项目 + 添加引用，浏览选项卡，选择 c:\windows\system32\shell32.dll。选择添加的 Shell32 引用并将其独立属性更改为 True。构建+重建。

查看项目的 bin\Debug 构建目录并使用记事本打开 app.exe.manifest 文件。观察 file 和 comClass 元素，这也是你需要的。如果这没有帮助，那么求助于 COM 服务器的所有者，他应该能够为您提供所需的清单。

# c# - 如何从excel填充C#中的数据表

> ID：10858351
> 
> 赞同：2
> 
> 时间：2012-06-01T23:00:18.060
> 
> 标签：c#, excel-2007

我正在使用以下代码将数据从 excel 2007 电子表格选项卡导入数据表。

```
 DataTable dtImport1 = new DataTable();
                DataTable dtImport2 = new DataTable();
                DataTable dtImport3 = new DataTable();
                string strRange1;
                string strRange2;
                string strRange3;

                strRange1 = "A0:I22000";
                strRange2 = "A22000:I41999";
                strRange3 = "A41999:I58432";

                OleDbDataAdapter cmdExcel1 = new OleDbDataAdapter("select * from [" + importTabs[i].ToString() + "$" + strRange1 + "]", connExcel);
                cmdExcel1.Fill(dtImport1);
                dtImport1.AcceptChanges();

                OleDbDataAdapter cmdExcel2 = new OleDbDataAdapter("select * from [" + importTabs[i].ToString() + "$" + strRange2 + "]", connExcel);
                cmdExcel2.Fill(dtImport2);
                dtImport2.AcceptChanges();

                OleDbDataAdapter cmdExcel3 = new OleDbDataAdapter("select * from [" + importTabs[i].ToString() + "$" + strRange3 + "]", connExcel);
                cmdExcel3.Fill(dtImport3);
                dtImport3.AcceptChanges(); 
```

到目前为止的情况如下：

dtImport1 可以很好地导入范围。

第二个数据表，dtImport2 导入没有错误，但最后一条记录仍然部分填充，

dtimport3 根本不导入，并给我以下异常：

> “此表格包含超出此电子表格中定义的单元格范围的单元格”

如何改进代码，以便它从 excel 中提取所有行而不会出现任何错误？

**附加信息：**

我在 excel 中有大约 58433 行需要导入的数据。

从 .xlsx (2007 Excel) 导入

我尝试只使用一个数据表并导入整个选项卡，但它给了我与 dtImport3 数据表相同的错误。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T23:12:32.280

您可以查看以下文章将
[数据从 Excel 导入 SQL Server](http://dotnetfinder.wordpress.com/2012/03/20/import-data-from-excel-to-sql-server/)
希望对您有所帮助。
问候。

# c++ - 检测阵列中的上升。（值的密度）

> ID：10858352
> 
> 赞同：0
> 
> 时间：2012-06-01T23:00:23.993
> 
> 标签：c++, arrays, signals, blob

我面临一个挑战，想征求你的建议。

我正在用 c/c++ 编码，我有一个如下所示的数组。

```
A[40]={0,0,1,0,2,7,18,45,80,85,88,91,88,65,12,3,0,1,0,2,1,2,5,45,88,89,78,79,65,12,5,2,1,0,0,1,0,0,1} 
```

如您所见，有 2 个上升，我们也可以称它们为曲线。该数组存储实时信号相对于时间的值。它像队列一样工作，并为每个新值刷新自身。

我想检测和计算上升，到目前为止我已经尝试了一些方法，但还没有找到一致的解决方案。

我的问题是：如何检测这些曲线并判断数组 A 中有 2 条曲线？

你知道有什么好的方法可以连贯地检测它们吗？或者有没有一种方法或东西来处理这种信号作品？

我真的需要答案来推进我的项目，所以欢迎您的所有答案。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T23:24:52.967

您可以通过在比较相邻值时查找符号翻转的点来发现数据中的峰值：

```
#include <vector>
#include <algorithm>
#include <iterator>
#include <iostream>

namespace {
  int diff(const int& a, const int& b) {
    if (b-a > 0) 
      return 1;
    else if (b-a < 0) 
      return -1;
    return 0;
  }
}

int main() {
  const int A[]={0,0,1,0,2,7,18,45,80,85,88,91,88,65,12,3,0,1,0,2,1,2,5,45,88,89,78,79,65,12,5,2,1,0,0,1,0,0,1};
  std::vector<int> delta;
  std::transform(A, A+((sizeof A/sizeof *A) - 1), A+1, std::back_inserter(delta), diff);
  for (std::vector<int>::const_iterator it = ++delta.begin(); it != delta.end(); ++it) {
    if (*it < 0 && *it != *(it - 1))
      std::cout << "Peak at: " << A[it-delta.begin()] << "\n";
  }
} 
```

请注意，您的数据中实际上有两个以上的峰值：

```
峰值：1
峰值：91
峰值：1
峰值：2
峰值：89
峰值：79
峰值：1

```

如果它们不是真正的峰值（只是数据中的噪音），那么您可以通过以下几种方式解决它：

1.  数据量化。
2.  平滑 - 即以某种方式将每个值更改为更像其邻居。
3.  临界点。不仅要记录符号，还要记录大小。忽略小于特定大小的更改。

# javascript - AJAX 调用后调用 Javascript 函数

> ID：10858353
> 
> 赞同：1
> 
> 时间：2012-06-01T23:00:26.133
> 
> 标签：javascript, jquery

我有一个 javascript 函数，我正在向其传递一个 functionName，我需要在进行 ajax 调用后调用该函数。ajax 调用返回一些包含对 js 文件的引用的 html。传递给我的函数的 functionName 在 html 中，但它引用了 js 文件中的对象。我注意到该对象有时存在，有时不存在。有没有办法确保对象始终存在（或等到它存在）然后只调用 javascript 函数。请注意，我不知道对象变量是什么，所以有没有办法确保脚本文件已加载到 dom 中，然后调用该函数。

```
 function(functionName)
   {
      $.ajax({
    url: properties.url,
    type: properties.type,
    data: properties.data,
    dataType: properties.format,
    success: function (data) {
     // data contains <div>myname</div><script src="/myfile.js" type="text/javascript"></script>
     // Put the data in some div
     BindData(data);

     // How to ensure that the script myfile.js is loaded in dom before I call eval
     eval(functionName);
     }   );      

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T00:49:59.253

```
function(functionName)
   {
      $.ajax({
    url: properties.url,
    type: properties.type,
    data: properties.data,
    dataType: properties.format,
    success: function (data) {
     // data contains <div>myname</div><script src="/myfile.js" type="text/javascript"></script>
     // Put the data in some div
     BindData(data);

    //ensure the script has loaded.
    $.getScript($('script:first',data).attr('src'), function(){
            eval(functionName);
    });

    });      

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T23:06:56.960

您可以尝试在 ajax 调用结束之前查看什么是数据。不确定，但是，如果数据是“未定义的”，你可以检查这样的事情

```
var data = GetAjaxData();
while(typeof data === undefined);
bind, eval ecc ecc 
```

但是，如果 GetAjaxData 返回其他内容，这将改变。您可以尝试相同的操作，但在此之前：

```
var data = null;
data = GetAjaxData();
while(data == null);
do stuff 
```

您还可以尝试 $.ajax jquery 与成功处理程序回调希望帮助

# c - 如何从 txt 文件中取出数字和单词并将它们分配给 int 和 char*

> ID：10858363
> 
> 赞同：0
> 
> 时间：2012-06-01T23:01:59.287
> 
> 标签：c

我正在制作基于文本的游戏，并希望用户能够保存。当他们保存所有变量时，将被保存到一个文本文件中。

我不知道如何将它们从文件中取出并将它们分配给特定的变量和指针。

该文件看起来有点像这样：

```
jesse
hello
yes
rifle
0
1
3
20 
```

无论如何我可以指定我想用 fscanf 取出哪一行？还是我必须采取不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:06:39.337

虽然我无法准确说出您想要什么，但我会提出一些建议：

*   使用 SQLite 文件而不是文本文件。这样您就可以使用 SQL 准确地获得您想要的东西。你的捷径：[http ://www.sqlite.org/](http://www.sqlite.org/)

*   如果您仍想使用文本文件，请使用逗号分隔而不是空格分隔。这是一种更常见的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T23:31:17.643

无法指定从哪一行读取，因为 C 中文件流的概念没有明确区分新行。它们被简单地视为一个字符。要从特定行读取，您必须向前循环`fseek`，`fgetc`直到您找到`'\n'`可以更新一些变量来保存流指向的当前行号。

解决此问题的一种方法是在固定偏移量处获取信息。例如，假设您正在存储玩家信息，那么如果您将玩家信息设置为固定大小 X 并将组成数据放在每个结构的固定索引处，您就可以`fseek`立即到正确的位置。

但是，如果您有结构化数据，则可能更适合使用能够固有地表示这些结构的格式，例如 XML 或 JSON。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T00:01:19.863

我为我的 C 程序创建了一个简单的设置阅读器，了解如何解析测试文件可能对您有用 [https://codereview.stackexchange.com/questions/8620/coding-style-in-c](https://codereview.stackexchange.com/questions/8620/coding-style-in-c)

# visual-studio-2010 - 在 VB.NET 和 SQL 生成的 Excel 电子表格底部添加动态总计行

> ID：10858364
> 
> 赞同：0
> 
> 时间：2012-06-01T23:02:36.373
> 
> 标签：visual-studio-2010, row, excel-2010, add

我有一个使用 SQL 和 VB.NET 动态生成的 Excel 电子表格。列数 (2) 永远不会改变，但是记录数会根据用户指定的数据而改变。在 SQL 运行并填充电子表格后，我需要在表底部添加一条记录，显示第 2 列中记录的总计（int 值）。

就像是：

xlSheet.Range(bottom record, column1) = "Total" xlSheet.Range(bottom record, column2) = 第 2 列中所有上述记录的总和

我正在使用 VS 2010 和 Excel 2010。

我的表类似于：

```
*Group*     *Refered Cases*
4H BOSS                 0
4H BSG                  0
4H SALES AND MKTG       0
ACCOUNTS RECEIVABLE     0
ASSET MANAGEMENT        0
AUDIT                   0
BOSS                    0
CORPORATE BSG           0
CUSTOMER SUPPORT        0
NETWORK ENGINEERING     0
PRODUCTION ENGINEERING  0
PRODUCTION OPERATIONS   0
SECURITY                0
SNFAL PRODUCT TEAM      0
VOICE SERVICES          0
XEROX                   0 
```

**回答：**

好的，我可以使用以下代码动态查找第一列的最后一个单元格并将“TOTAL”输入到单元格中并相应地对其进行格式化。

```
Dim lTotalRows As Long, lTotalCols As Long
    lTotalRows = xlSheet.UsedRange.Rows.Count
    lTotalCols = xlSheet.UsedRange.Columns.Count

With xlSheet.Range("A" & (lTotalRows + 1).ToString) 'Dynamically finds the last cell of the first column, and sets it equal to "Total" and formats the cell
    .Value = "TOTAL"
    .Interior.ColorIndex = 41 'Cell Background Changed to Black
    .Columns("A:B").EntireColumn.AutoFit()
    With .Font
        .ColorIndex = 2 'Cell Font Changed to White
        .Bold = True
        .Underline = Excel.XlUnderlineStyle.xlUnderlineStyleSingle
    End With
End With 
```

我能够使用以下代码将第二列的最后一个单元格设置为等于第二列所有单元格的总和。

```
Dim totals as Integer
For Each dr As DataRow In dt.Rows
    totals += dr.Item(1)
Next

xlSheet.Range("B" & (lTotalRows + 1).ToString).Value = totals 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T23:40:38.680

如果您知道总行数，则可以将下面的公式插入到列底部的单元格中。您的示例数据显示 16 行，不包括顶部标题行。

```
=SUM(INDIRECT(ADDRESS(ROW()-16,COLUMN())):INDIRECT(ADDRESS(ROW()-1,COLUMN()))) 
```

# c++ - 匹配 int [c++] 中的 nulls(0)

> ID：10858369
> 
> 赞同：-3
> 
> 时间：2012-06-01T23:03:34.170
> 
> 标签：c++, windows, int

我在检查 0 时遇到问题，我试图从文件中获取数字（我明白了）但如果是 0，那么我说>

```
0 maybe its not found!(0 | 0)   
0 maybe its not found!(1 | 1)   
0 maybe its not found!(2 | 2)   
0 maybe its not found!(3 | 3)   
0 maybe its not found!(4 | 4) 
```

如果我想要 1 并且我从行中得到正确的行：

```
0 maybe its not found!(0 | 0)   
[Line0]: 1 1 1 200 150 6 1 10000000 1     
[Line1]: 1 1 13 14    
0 maybe its not found!(2 | 2)     
0 maybe its not found!(3 | 3)     
0 maybe its not found!(4 | 4) 
```

检查功能是：

```
int myClass = 0; //'\0'
for(int i=0; i < Show.line0 && Show.line1; i++)
{
    if( Show.Get[i].m_Class0 && Show.Get[i].m_Class1 == myClass )
    {
      ........
    }
    else
    {
        cout << myClass; cout << " maybe its not found!";
        cout << "(";
        cout << Show.Get[i].m_Class0; 
        cout << " | ";
        cout << Show.Get[i].m_Class1; 
        cout << ")"; 
        cout << endl;
    } 
```

m_class0/1 是 int 并且它的值是从加载的文件中获取的。在 myClass 上大于 0 的其他值中，我从文件中获取以想要的数字开头的相同行，但不适用于 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:18:48.517

您的错误在于以下行：

```
if( Show.Get[i].m_Class0 && Show.Get[i].m_Class1 == myClass ) 
```

在这里，编译器评估：

```
Show.Get[i].m_class0 
```

如果是`true`，编译器继续评估：

```
Show.Get[i].m_Class1 == myClass 
```

如果是这样`true`（此时另一个必须为真，除非 && 被重载），则`if`块执行。

问题在于第一个条件。当不等于 0`true`时。`Show.Get[i].m_Class0`

在这种情况下，您真正​​想要的是相反的（因为`myClass`是 0）：

```
if( Show.Get[i].m_Class0 == myClass && Show.Get[i].m_Class1 == myClass ) 
```

现在我在里面提到了几件事。第一个是只有在第一个是 时才会评估第二个部分`true`。这称为短路评估，用于节省时间。但是，如果过载`operator&&`，则不再发生短路。这是第二种情况，这就是为什么这样做通常不是一个好主意，因为第二种情况会产生意想不到的副作用。

例如：

```
if (false && ++x) 
```

`x`如果 && 是本机的，则会离开，但`x`如果它是重载版本，则会增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T23:16:35.923

> ```
> if( Show.Get[i].m_Class0 && Show.Get[i].m_Class1 == myClass ) 
> ```

正如@chris 评论的那样，这并没有按照您的想法进行。

`if (A && B == 0)`并不意味着*“如果 A 和 B 都等于零”*

它的意思是*“如果 A 为真，并且 B 等于零”*并且当`A`为零时失败，因为零是`false`

你想要`if (A == 0 && B == 0)`这意味着*“如果 A 等于零**并且**B 等于零”*

# c - 如何在 C 字符串中使用美元符号？

> ID：10858373
> 
> 赞同：0
> 
> 时间：2012-06-01T23:04:06.903
> 
> 标签：c, windows, powershell

如何在以下代码或任何字符串中打印美元符号 $？

```
system("powershell -executionpolicy unrestricted -file \"$env:userprofile\\Desktop\\Test.ps1\""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:20:58.380

$env 是 PowerShell 变量。
在 c 中使用 getenv
或
使用 %%USERPROFILE%% (BATCH(shell:cmd.exe) 变量)

例如

```
#include <stdio.h>
#include <stdlib.h>

int main(void){
    char *userprofile;
    char command[1024];
    userprofile = getenv("USERPROFILE");
    sprintf(command, "powershell -executionpolicy unrestricted -file \"%s\\Desktop\\Test.ps1\"", userprofile);
    system(command);
    //or
    system("powershell -executionpolicy unrestricted -file \"%%USERPROFILE%%\\Desktop\\Test.ps1\"");
    return 0;
} 
```

# css - Google Web 字体在 Chrome Mac 上显示不佳

> ID：10858376
> 
> 赞同：2
> 
> 时间：2012-06-01T23:04:25.130
> 
> 标签：css, google-chrome, webfonts, google-webfonts, text-rendering

我在一个网站上使用 Google Web Fonts，它在 Chrome Mac 版本 19.0.1084.52 中的渲染效果很差。这似乎只是`font-weight: 700 (bold);`使用时的问题。这是我的网站的屏幕截图比较以及它在 Google Web Fonts 网站上的呈现方式：http: [//cl.ly/0Q3m2F1X0f3S3I190U2n](http://cl.ly/0Q3m2F1X0f3S3I190U2n)

它的大小和重量相同，但在我的网站上却没有那么干净和清晰。`-webkit-font-smoothing: antialiased;` 也将不胜感激使用任何洞察力。谢谢！

# python - Python将文本文件的格式更改为新格式

> ID：10858380
> 
> 赞同：-4
> 
> 时间：2012-06-01T23:04:42.650
> 
> 标签：python, parsing, lines

我给出了一个格式如下的文本文件：

```
3     Bham    Hoover - Vestiva 
123 234 1 456 876 1 876 745 1
0
4     Bham    Vestiva - Greensprings
235 876 1 647 987 1 098 765 1 234 546 1
0 
```

这持续了几行，但我正在尝试将此格式转换为以下格式：

```
Event
Disconnect branch from bus 123 to 234 circuit 1
Disconnect branch from bus 456 to 876 circuit 1
Disconnect branch from bus 876 to 745 circuit 1
end
Event 
Disconnect branch from bus 235 to 876 circuit 1
Disconnect branch from bus 647 to 987 circuit 1
Disconnect branch from bus 098 to 765 circuit 1
Disconnect branch from bus 234 to 546 circuit 1
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:25:24.803

```
from itertools import islice
with open('file.txt', 'r') as f:
    # iterate over every 3rd line, starting with the 2nd
    for line in islice(f, 1, None, 3):
        parts = line.split()
        print 'Event'
        # iterate over 3-element chunks
        for x in zip(*(iter(parts),) * 3):
            print 'Disconnect branch from bus %s to %s circuit %s' % x
        print 'end' 
```

输出：

```
Event
Disconnect branch from bus 123 to 234 circuit 1
Disconnect branch from bus 456 to 876 circuit 1
Disconnect branch from bus 876 to 745 circuit 1
end
Event
Disconnect branch from bus 235 to 876 circuit 1
Disconnect branch from bus 647 to 987 circuit 1
Disconnect branch from bus 098 to 765 circuit 1
Disconnect branch from bus 234 to 546 circuit 1
end 
```

分块代码的功劳转到[列表切片上的迭代](https://stackoverflow.com/questions/1335392/iteration-over-list-slices/1335618#1335618)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T23:22:29.170

```
with open("data.txt") as inf:
    for head,data,tail in zip(inf,inf,inf):
        print("Event")
        items = iter(data.split())
        for bus1,bus2,cct in zip(items,items,items):
            print("Disconnect branch from bus {} to {} circuit {}".format(bus1,bus2,cct))
        print("end") 
```

结果是

```
Event
Disconnect branch from bus 123 to 234 circuit 1
Disconnect branch from bus 456 to 876 circuit 1
Disconnect branch from bus 876 to 745 circuit 1
end
Event
Disconnect branch from bus 235 to 876 circuit 1
Disconnect branch from bus 647 to 987 circuit 1
Disconnect branch from bus 098 to 765 circuit 1
Disconnect branch from bus 234 to 546 circuit 1
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-01T23:17:00.407

我不确定你的真正需要。但是如果你想像你展示的那样输出你的文件，你可以在你的文本上插入一个分隔符，然后使用 re 模块解析并按照你需要的顺序获取数据！

# java - 是否有与 oracle 中的 q 运算符等效的 java ？

> ID：10858382
> 
> 赞同：1
> 
> 时间：2012-06-01T23:04:56.863
> 
> 标签：java, string, oracle, operators, string-literals

在 Oracle 中，如果您使用[`q`运算符](http://ronaldsoracle.wordpress.com/2012/02/17/using-the-q-operator-for-quoting-strings/)，它将采用字面给出的字符串。例如：

```
select q'[You're awesome]' from dual; 
```

即使字符串中间有一个单引号也可以正常工作。这很好，因为您不必转义字符串中的所有无效字符。

**我想知道**（出于好奇）Java 中是否有与此等价的东西。我似乎在 Google 上找不到任何关于它的信息。它可能是这样的：

```
String literal = q"[I'm a "literal" string]"; //maybe... 
```

感谢您的提示！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T23:06:18.040

很不幸的是，不行。双引号语法是 Java 字符串文字的唯一语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T23:07:14.377

没有办法做到这一点。

通常原始字符串将被放置在属性文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T23:17:57.933

您可以使用反斜杠转义引号。

`String literal = "I'm a \"literal\" string";`

没有等效于 q 运算符。

# python - 终端命令未完成

> ID：10858388
> 
> 赞同：1
> 
> 时间：2012-06-01T23:05:33.123
> 
> 标签：python, terminal, command

我在终端中有一个没有完成的命令。我的意思是它不像执行完成后的“ls”。我在我的 python 代码中使用这个命令，所以我需要它来完成！因为我必须继续。知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:16:04.083

看起来你可以只使用 Python`Popen`创建一个子进程，然后不等待子进程完成

[http://docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html)

# css - 什么原因导致自动 br

> ID：10858390
> 
> 赞同：0
> 
> 时间：2012-06-01T23:05:56.393
> 
> 标签：css

我有 3 个用于精灵的 CSS 函数，并与它们创建了一个链接。加载图像时，它们是这样的 ![在此处输入图像描述](../Images/33857fb310480895ee31d4d508b905a7.png)

我的一些代码如下：

```
#twitterReply
{
  width:16px;
  height:16px;
  text-decoration:none;
  display:block;
  background-image:url('path');
  background-position:-0px -0px;

}
#twitterReply:hover,#twitterReply:active  { background-position:-16px -0px; }

#twitterRetweet
{
  width:16px;
  height:16px;
  text-decoration:none;
  display:block;
  background-image:url('path');
  background-position:-32px -0px;
}
#twitterRetweet:hover,#twitterRetweet:active  { background-position:-48px -0px; }

#twitterFavorite
{
  width:16px;
  height:16px;
  text-decoration:none;
  display:block;
  background-image:url('path');
  background-position:-64px -0px;
}
#twitterFavorite:hover,#twitterFavorite:active  { background-position:-80px -0px; } 
```

我怎样才能把它们放在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T23:13:45.143

他们都有`display: block`，这就是原因。块占据其父元素的整个宽度，因此一系列块看起来像一个堆栈。

改为使用`display: inline-block`。

# c - 为什么即使缺少 return 语句，C 中的程序也能编译？

> ID：10858391
> 
> 赞同：5
> 
> 时间：2012-06-01T23:05:59.720
> 
> 标签：c

我在 C 中实现了一些基本的数据结构，我发现如果我从函数中省略返回类型并调用该函数，编译器不会产生错误。我用编译`cc file.c`但没有使用`-Wall`（所以我错过了警告）但在其他编程语言中这是一个严重的错误，程序将无法编译。

根据 Graham Borland 的要求，这里有一个简单的例子：

```
int test() 
{
  printf("Hi!");
}

int main() 
{ 
    test();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T23:13:08.283

C 是一门古老的语言，在它被引入的时候，返回整数已经足够普遍，可以作为函数的默认返回类型。人们后来开始意识到，对于更复杂的返回类型，最好指定 int 以确保您不会忘记返回类型，但为了保持与旧代码的向后兼容性，C 无法删除此默认行为。相反，大多数编译器都会发出警告。

如果函数在没有返回语句的情况下到达末尾，则返回除`main`函数外的未定义值，则返回 0。这与上面的原因相同。

```
/* implicit declaration of printf as: int printf(int); */

/* implicit int type */
main()
{
    printf("hello, world\n");
} /* implicit return 0; */ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-01T23:08:20.523

这是因为在 C 中，任何变量/函数都是隐式的`int`。

这与您可以使用`register`代替`register int`，或`unsigned`代替`unsigned int`，`auto`代替`auto int`，和`static`代替的原因相同`static int`。我个人总是用 明确限定我的变量`int`，但是否这样做是你的选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-02T03:20:21.613

到目前为止，我还没有看到任何答案都很好地解决了*原因。**在 C 中，只要调用者不尝试使用返回值*，具有非 void 返回类型的函数在没有返回语句/值的情况下结束是完全合法的。例如（有点不平凡的例子）：

```
#include <stdio.h>
int foo(int want_result)
{
    puts("hello");
    if (want_result) return 42;
}

int main()
{
    foo(0);
    printf("%d\n", foo(1));
} 
```

这个例子有点做作，但如果返回类型是一个巨大的结构，需要很长时间才能返回，它实际上可能变得有意义。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-01T23:08:18.583

函数的返回类型是可选的，如果未指定，则视为“int”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T23:19:15.737

正如上面的答案所说，该函数不会返回 0。实际上，printf 返回一个值：打印的字符数。在您的情况下，printf 是您的测试函数中的最后一个表达式，它将返回 3。因此，函数*test*将返回 3。

# .htaccess - .htaccess 重定向以字符串开头的产品

> ID：10858394
> 
> 赞同：0
> 
> 时间：2012-06-01T23:06:04.043
> 
> 标签：.htaccess, redirect

我有各种形式的断开链接：

[http://www.mysite.com/categA/categB/product](http://www.mysite.com/categA/categB/product) *.html

（网址的最后部分以字符串“product”开头）

我想创建一个 .htaccess 规则将它们重定向到：

[http://www.mysite.com/categC/categD/product](http://www.mysite.com/categC/categD/product) *.html

...

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:11:28.490

我相信这会奏效。

```
RewriteEngine On
RewriteBase /
RewriteRule ^categA/categB/product(.+)\.html$ categC/categD/product$1.html [L,R=301] 
```

# c++ - 程序无法运行 OpenCV，即使其他程序可以

> ID：10858397
> 
> 赞同：7
> 
> 时间：2012-06-01T23:06:24.507
> 
> 标签：c++, linux, ubuntu, opencv

我正在尝试运行一个使用 OpenCV 的程序，并且我已经让它在其他机器上运行，并且我机器上的其他程序使用它运行，但是这个返回：

```
programname.cpp:  fatal error: opencv/cv.h: No such file or directory 
```

任何人都知道如何修复路径或可能出了什么问题？我正在运行 Ubuntu 12.04 和 OpenCV-2.4.0

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T06:28:59.247

更改自：

`#include <opencv/cv.h>`

到：

`#include <opencv2/opencv.hpp>`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-01T23:14:13.130

在我的 Ubuntu 11.04 上，标题位于： 中`*/usr/include/opencv-2.3.1/*`，我认为它应该`*/usr/include/opencv-2.4.0/*`适合您。

你有两个解决方案：

*   编译时，使用以下`-I`选项：`g++ -o [name] [src] -I/usr/include/opencv-2.4.0`
*   在*/usr/include中创建指向**opencv-2.4.0/opencv*和*opencv-2.4.0/opencv2*的符号链接。

 *如果您使用 CMake，则第二种解决方案很有用，因为 FindOpenCV2 不会在`/usr/include/opencv-2.4.0`. 我希望这个（丑陋的）黑客能解决你的问题。*

# python - 多对多和保存自定义的问题

> ID：10858398
> 
> 赞同：0
> 
> 时间：2012-06-01T23:06:29.087
> 
> 标签：python, django

我有两个课程：**Story**和**XmlLink**。并且它们之间存在多对多的关系。
我正在尝试自定义 XmlLink 的保存方法。

想法：当我添加新的 xmllink-object 时，一个新的故事对象（temp）会在 db 中创建一些记录。但我还需要在*def save中自定义***.story**以替换 m-to-m 关系，例如 (6,7)

 *```
class Story(models.Model):
  title = models.CharField(max_length=100)
  content = models.TextField()

class XmlLink (models.Model):
  title = models.CharField(max_length=150)
  story = models.ManyToManyField(Story)
  pk = 1

  def save(self):
    **self.story = (6,7)**

    temp = Story(title = 'temp',
        content = 'testtttt',
    temp.save()
    super(XmlLink, self).save() 
```

我试图搜索一些例子，以及解决这个问题的不同方法，但是......也许有人可以简化程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T23:58:52.843

这可能对如何在 django 中保存 M2M 关系有所帮助：[https](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many) ://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many 。

我发现直接在视图中保存通常更直接、更容易，而不是在模型上定义保存方法。

此外，这个答案可能会有所帮助：[创建具有 M2M 和 FK 关系的模型对象](https://stackoverflow.com/questions/6170583/creating-a-model-object-with-a-m2m-and-fk-relationship/6170694#6170694)。*

# string - NSComparisonPredicate 查找空字符串

> ID：10858404
> 
> 赞同：0
> 
> 时间：2012-06-01T23:07:04.270
> 
> 标签：string, cocoa, nspredicate

我需要使用 NSComparisonPredicate 检查数组中的字符串是否为空。正在执行的谓词是： string MATCHES[c] "" 但是结果中没有显示任何内容，它没有列出我的空字符串。我的谓词是错误的，还是有另一种使用 NSPredicate 处理空字符串的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:04:28.227

我不确定你为什么使用 NSComparisonPredicate ，我从来没有使用过那个，所以我不熟悉它。您是否尝试过 predicateWithFormat ？

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"self.length == 0"]; 
```

目前尚不清楚您想如何使用谓词，但如果您使用它来过滤数组，这应该可以工作。

如果您想知道数组中空字符串的索引，则可以使用 indexOfObjectsPassingTest: 如下所示：

```
NSIndexSet *indxs = [array indexesOfObjectsPassingTest:^BOOL(NSString *aString, NSUInteger idx, BOOL *stop) {
        return aString.length == 0;
    }];
    NSLog(@"%@",indxs); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T08:06:08.200

正如**rdelmar**上面提到的，对于这样的任务，您应该只检查字符串的长度`string.length==0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T08:43:22.643

您可以使用块过滤阵列。我建议不要使用 NSPredicate 的方法。这是一些示例代码：

```
//creating array
NSArray *myArray = [NSArray arrayWithObjects:@"a", @"b", @"", @"c", nil];

//filtering 
NSIndexSet *iset = [myArray indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
    NSString *str = obj;
    return !str.length;
}
];

//creating my result array with empty strings
NSArray *emptyStrings = [myArray objectsAtIndexes:iset];

//logging all strings
for (NSString *str in myArray) {
    NSLog(@"string: %@", str);
}

//logging empty strings
for (NSString *str in emptyStrings) {
    NSLog(@"empty string: %@", str);
} 
```

**编辑：** 如果你真的需要使用 NSComparisonPredicate，这里是：

```
NSExpression *left = [NSExpression expressionForKeyPath:@"length"];
NSExpression *right = [NSExpression expressionForConstantValue:[NSNumber numberWithInt:0]];

NSComparisonPredicateModifier modifier = NSDirectPredicateModifier;
NSPredicateOperatorType operator = NSEqualToPredicateOperatorType;

NSPredicate *predicate = [NSComparisonPredicate predicateWithLeftExpression:left rightExpression:right modifier:modifier type:operator options:0];

NSArray *filtered = [myArray filteredArrayUsingPredicate:predicate]; 
```

# c# - 如何将类关联到 XAML 上的控件

> ID：10858410
> 
> 赞同：0
> 
> 时间：2012-06-01T23:08:01.353
> 
> 标签：c#, wpf, xaml, textbox, controls

我正在查看 Microsoft 网站上提供的源代码，其中一个类是从该类派生的，`Adorner`并使用覆盖将新样式添加到`TextBox`XAML 中的新样式。代码不完整，所以我在如何将此代码分配给`TextBox`XAML 上的控件 () 时遇到问题。

专家可以给我一些想法如何`TextBox`与继承的类相关联吗？

[http://msdn.microsoft.com/en-us/library/ms743737.aspx#Y1457](http://msdn.microsoft.com/en-us/library/ms743737.aspx#Y1457)

问候， 阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:13:38.257

我会声称 MSDN 足够清楚：

> 要将装饰器绑定到特定的 UIElement，请执行以下步骤：
> 
> 1.  调用静态方法 GetAdornerLayer 以获取要装饰的 UIElement 的 AdornerLayer 对象。GetAdornerLayer 从指定的 UIElement 开始向上遍历可视化树，并返回它找到的第一个装饰层。（如果没有找到装饰层，则该方法返回 null。）
>     
>     
> 2.  调用 Add 方法将装饰器绑定到目标 UIElement。

您可能无法在 XAML 中执行此操作，除非您可以获取解析器调用的方法，例如通过`IList`接口。当然，您可以使用为您执行必要的必要步骤的[标记扩展几乎任意扩展 XAML。](http://msdn.microsoft.com/en-us/library/ee855815.aspx)

# javascript - JavaScript for 循环错误在 Google 地图上放置标记

> ID：10858415
> 
> 赞同：0
> 
> 时间：2012-06-01T23:08:38.647
> 
> 标签：javascript, ajax, google-maps-markers

接近解决一个为期三天的问题。我正在尝试使用长期存储在 Django 模型中的 lat 在谷歌地图上放置标记。我以前从未使用过 AJAX，但我正在尝试这样做来实现这一点。使用 Firebug，它说明我在 JavaScript 中有一个 for 循环错误，尽管我确定它是什么（JavaScript 的新功能）。源显示 lat，longs 拉起，虽然我确信格式是完美的（以逗号结尾）。

如果有人发现错误，代码如下。洞察力非常感谢：

```
<script>
function mainGeo()
    {
         if (navigator.geolocation) 
            {
              navigator.geolocation.getCurrentPosition( mainMap, error, {maximumAge: 30000, timeout: 10000, enableHighAccuracy: true} );
        }
        else
        {
              alert("Sorry, but it looks like your browser does not support geolocation.");
        }
    }

var map;

 function mainMap(position)
 {
       // Define the coordinates as a Google Maps LatLng Object
       var coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

       // Prepare the map options
       var mapOptions =
      {
                  zoom: 15,
                  center: coords,
                  mapTypeControl: false,
                  navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                  mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        // Create the map, and place it in the map_canvas div
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

        // Place the initial marker
        var marker = new google.maps.Marker({
                  position: coords,
                  map: map,
                  title: "Your current location!"
        });
    }

function error() {
        alert("You have refused to display your location. You will not be able to submit stories.");
        }

mainGeo();

var stories = [{% for story in stories %}
            {latitude:{{story.latitude}},longitude:{{story.longitude}}}, {% endfor %}];

loadMarkers(stories);

 function loadMarkers(stories)
    for (var s in stories) {
        var story = story[s];
        var point = new google.maps.LatLng(story.latitude, story.longitude);
        var marker = new google.maps.Marker({position: point, map: map});
    }

 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T00:20:23.623

也许这句话`var story = story[s];`应该是`var story = stories[s];`。

# java - AdMob 和 ActionBarSherlock

> ID：10858419
> 
> 赞同：0
> 
> 时间：2012-06-01T23:08:59.643
> 
> 标签：java, android, admob, actionbarsherlock

我有一个使用 ActionbarSherlock 的 android 应用程序，我想在 ListView 屏幕的底部放置一个广告。

我已按照此处提供的信息[https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals)并没有编译说“java.lang.NoClassDefFoundError：com.google.ads.AdView”

所以我的问题是：我必须做什么才能让广告发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T23:52:18.937

你有什么ADT版本？17？如果是这样，请尝试将`lib`文件夹重命名为`libs`

Android Tools 的 ADT 17 要求 /lib 文件夹为 /libs。

这个问题是由于以下事实：

> 库的管理方式与新的 ADT 构建不同。不再有 2 种不同的库管理（一种用于 Android 库项目，一种用于标准 jar），现在两者都合并到 Android Dependencies 项中。

[在此链接](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)中查看更多信息

# facebook - Symfony2 异常中断应用程序

> ID：10858423
> 
> 赞同：0
> 
> 时间：2012-06-01T23:09:39.363
> 
> 标签：facebook, symfony

我将 Facebook PHP SDK 与 Symfony 一起使用。每当我使用 SDK 时，我都会尝试使用它。然而，Symfony 破坏了应用程序并抛出了一个错误页面。通常这对于调试非常有用，但对于 FB 异常，我更希望它让我在应用程序本身内处理它。

无论如何我可以告诉 Symfony 像普通 php 一样处理它吗？

例如

```
$this->fb = new \Facebook($this->config);
$url = (string)
try {
    $result = $this->fb->api($url, 'POST');
    return $result;
}
catch (FacebookApiException $e) {
    return;
} 
```

当我想自己处理它时，我从 Symfony 获得一个描述异常的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:20:44.003

抛出的异常没有被捕获，因为它不同于`FacebookApiException`.
由于您在控制器中，因此您需要在异常名称中添加反斜杠：`\FacebookApiException`，因此 PHP 会在全局命名空间中查找它，而不是在控制器的命名空间中查找。

# python - 双重编码的html代码

> ID：10858425
> 
> 赞同：0
> 
> 时间：2012-06-01T23:09:53.153
> 
> 标签：python, postgresql, wysiwyg, html-content-extraction

我使用 xinha 作为 html-content 的所见即所得编辑器。我通过 post-form 将 html-articles 发送到 postgresql。到目前为止一切顺利，他们似乎还可以。但是当我从 pg 接收并输出到 html 页面时，我看到双重编码，即像这样的损坏的 html 代码

```
&lt;p&gt;&lt;a href=&quot;http://google.com&quot;&gt;google.com&lt;/a&gt;&lt;/p&gt;   &lt;p&gt; &lt;/p&gt;   &lt;p&gt; 
```

关于在哪里搜索问题的任何想法？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T05:20:51.553

```
import HTMLParser
hp=HTMLParser.HTMLParser()
s="&lt;p&gt;&lt;a href=&quot;http://google.com&quot;&gt;google.com&lt;/a&gt;&lt;/p&gt;   &lt;p&gt; &lt;/p&gt;   &lt;p&gt;"
print hp.unescape(s)

# u'<p><a href="http://google.com">google.com</a></p>   <p> </p>   <p>' 
```

# esri - 如何创建具有纬度和经度的 ArcObjects 点

> ID：10858427
> 
> 赞同：1
> 
> 时间：2012-06-01T23:10:21.810
> 
> 标签：esri, arcgis-server

我需要在 C# (Visual Studio 2008) 中使用 ArcGIS Server 10 的 .NET API 在现有要素类中添加一个点。我正在使用来自 ESRI 资源中心 (ArcGIS_SimpleEdit_CSharp) 的示例。下面显示了使用 X/Y 坐标创建新点的代码部分。

```
ESRI.ArcGIS.Geometry.IPoint aoPoint = serverContext.CreateObject("esriGeometry.Point") as 
            ESRI.ArcGIS.Geometry.IPoint;
aoPoint.PutCoords(actionRecord.Location.X, actionRecord.Location.Y); 
```

但我需要使用纬度和经度（小数精度）而不是 X/Y 坐标。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:38:47.693

如果您的数据在纬度/经度中并且您的要素类在某个投影坐标系中，那么您需要在将点添加到要素类之前投影纬度/经度数据*。*为此，您需要使用 IGeometry.Project 方法，您可以在[此处](http://help.arcgis.com/en/sdk/10.0/arcobjects_net/componenthelp/index.html#/Project5_Method/002m000001rz000000/)找到更多信息。

请注意，根据纬度/经度数据的基准面以及要素类的基准面，您可能需要在投影过程中执行*基准面转换*。在这种情况下，您将需要 IGeometry.ProjectEx 方法（更多信息[here](http://help.arcgis.com/en/sdk/10.0/arcobjects_net/componenthelp/index.html#/ITransformation_Interface/002m000003wt000000/)和[here](http://help.arcgis.com/en/sdk/10.0/arcobjects_net/componenthelp/index.html#/ITransformation_Interface/002m000003wt000000/) - 请注意后一个链接包含指向底部一些示例的链接，这可能会有所帮助）。

我知道这不是一个完整的答案，但希望我已经提供了一些指导，让您朝着正确的方向前进。如果你能提供更多关于你到底想要做什么的细节，那么也许我可以提供一些更具体的帮助。

最后一点 - 看来您在这里使用的是 ArcGIS Server Web ADF - 您是否知道 Web ADF 本地连接在 Server 10.1 版本中将消失？根据项目的性质，您可能需要考虑另一种方法，例如使用 SOAP 或 REST API、地理处理服务和/或为任何真正需要自定义 ArcObjects 的工作编写服务器对象扩展 (SOE)。

# asp.net - 从不同的表 ASP.NET 中选择下拉列表值并显示 gridview

> ID：10858428
> 
> 赞同：1
> 
> 时间：2012-06-01T23:10:45.317
> 
> 标签：asp.net, drop-down-menu

我创建 Web 应用程序。我添加下拉列表。我将列表与表类别名称连接起来。例如 1、2、3。当我选择值 1 时，应创建填充有表 1 数据的网格视图。当我选择 2 时，创建填充有表 2 数据的网格视图。我连接 SQL 数据库中的表。PrimaryKey 类别ID，外键1，外键2。

我知道如何通过在下拉列表中选择值来填充网格视图，但是从一个表中选择值。在这种情况下，我有 4 张桌子，我不知道如何实现这一点。有人可以帮助我吗？通过一些教程或一段代码？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:18:22.557

试试这个...

页面：

```
<body>
    <form runat="server">
    <asp:DropDownList runat="server" ID="ddlDb" AutoPostBack="True" OnSelectedIndexChanged="ddlDb_SelectedIndexChanged">
        <asp:ListItem Text="-- Select --" Value=""></asp:ListItem>
        <asp:ListItem Text="Students" Value="Students"></asp:ListItem>
        <asp:ListItem Text="Classes" Value="Classes"></asp:ListItem>
    </asp:DropDownList>
    <asp:GridView ID="GridView1" runat="server">
    </asp:GridView>
    </form>
</body> 
```

aspx.cs：

```
protected void ddlDb_SelectedIndexChanged(object sender, EventArgs e)
{
    if (!string.IsNullOrEmpty(ddlDb.SelectedValue))
    {
        var dbPath = Server.MapPath(@"\App_Data\Database1.mdf");
        var scon = "Data Source=.\\SQLEXPRESS;AttachDbFilename='" + dbPath + "';Integrated Security=True;User Instance=True";
        var cmd = "select * from " + ddlDb.SelectedValue;

        var dt = new DataTable();
        var da = new SqlDataAdapter(cmd, scon);
        da.Fill(dt);

        GridView1.DataSource = dt;
        GridView1.DataBind();                
    }
} 
```

![在此处输入图像描述](../Images/c15e8e5d8a19007df4b25c74fc4ae4bc.png)

![在此处输入图像描述](../Images/162315e6bcf9cff4664b892b3a1fc233.png)

# hadoop - 如果数据不是本地的，任务跟踪器如何从另一个节点获取地图任务的数据？

> ID：10858430
> 
> 赞同：0
> 
> 时间：2012-06-01T23:10:49.123
> 
> 标签：hadoop

如果数据不是本地的，任务跟踪器如何从另一个节点获取地图任务的数据？

它是直接与包含数据的机器的数据节点对话，还是与它自己的数据节点对话，后者又与另一个节点对话？

谢谢，苏雷什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T00:56:43.413

任务跟踪器本身不获取数据 - 它启动（或重用）JVM 来运行 Map 任务。map 任务使用 DFS 文件系统客户端来查询名称节点以获取它要处理的文件的块位置。客户端然后连接到数据节点，其中一个块被复制以实际获取文件内容（作为流）。

如果你想深入研究，源代码是一个很好的理解的好地方——查看 DFSClient 和内部类 DFSInputStream （尤其是 bestNode 方法）

*   [http://svn.apache.org/viewvc/hadoop/common/tags/release-0.20.2/src/hdfs/org/apache/hadoop/hdfs/DFSClient.java?view=markup](http://svn.apache.org/viewvc/hadoop/common/tags/release-0.20.2/src/hdfs/org/apache/hadoop/hdfs/DFSClient.java?view=markup)
    *   课程从第 1443 行开始
    *   `openInfo()`方法@第 1494 行
    *   `chooseDataNode()`方法@1800

# c# - 来自 SQL Server 的 C# 文本框值作为键入

> ID：10858434
> 
> 赞同：2
> 
> 时间：2012-06-01T23:11:55.360
> 
> 标签：c#, sql-server

我正在为我的兄弟在他的商店中为用户创建一个 C# 应用程序。

我有一个存储所有已售商品的 SQL Server 数据库，这些商品是从应用程序中添加的。

当用户在应用程序的“客户名称”字段中输入文本时，我希望它进行数据库调用并检查具有相同客户名称（或迄今为止输入的名称）的任何先前销售并填写文本框将名称。

我遇到的问题是：如果有一个客户叫 John，另一个叫 Joe，我需要选择 John，如果我在框中输入 J，它只会选择 Joe，然后将文本光标返回到开头文本框相当烦人和不方便。

理想的解决方案是，如果我在文本框中键入 J，文本框正下方会出现一个下拉框，显示所有带有 J 的客户，允许用户选择一个客户，然后用值填写文本框。如果我然后键入 Jo，则 Jo 的所有记录将出现在下拉列表等中。

编码部分应该不是问题（希望如此），我只是想知道解决这个问题的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T23:34:21.353

首先在您的文本框中添加/更改这些属性

```
textBox1.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
textBox1.AutoCompleteSource = AutoCompleteSource.CustomSource; 
```

那么您可以使用此方法获取以您的前缀开头的客户名称列表。

```
public List<string> GetCustomerInfo(string custName)
{
    List<string> result = new List<string>();
    string sql = "Select Name from Customers Where Name like @partName";
    using(SqlConnection con = GetConnection())
    using(SqlCommand cmd = new SqlCommand(sql, con))
    {
         con.Open();
         cmd.Parameters.AddWithValue("@partName", custName + "%"); 
         using(SqlDataReader r = cmd.ExecuteReader())
         {
              while(r.Read()) 
              {
                  if(!r.IsDbNull(0)) 
                      result.Add(r.GetString(0)); 
              }
         }
    } 
    return result; 
} 
```

作为保障，我将检查您在组合框中输入的文本是否至少为三个字符

```
if(textBox1.Text.Length >= 3)
    textBox1.AutoCompleteCustomSource = GetCustomerInfo(textBox1.Text);
else
    textBox1.AutoCompleteCustomSource = null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T00:17:53.753

首先，您需要设置文本框的这些属性或将它们写入表单：

```
yourTextbox.AutoCompleteMode = AutoCompleteMode.Suggest;
yourTextBox.AutoCompleteSource = AutoCompleteSource.CustomSource; 
```

然后您可以根据需要创建 ArrayList、String 数组或 List（或字典，如果您需要客户名称的 ID）的实例。

或者只是你可以使用`AutoCompleteStringCollection`- 它也是 C# 类实例中实现的字符串数组/集合来将数据检索到..

然后设置`txtName.AutoCompleteCustomSource = yourListOfTheMatchedNames;`

一个小例子给你一个想法：

```
void yourTextBox_TextChanged (object sender, EventArgs e)
{
   SqlDataReader dReader;
   SqlConnection conn = new SqlConnection();
   conn.ConnectionString = strConnection;
   SqlCommand cmd = new SqlCommand();
   cmd.Connection = conn;
   cmd.CommandType = CommandType.Text; //better is to use a stored proc or if you use a .NET 3.5 or higher framework then LinqtoSQL
   cmd.CommandText = "Select [yourNameColumn] from yourNameTable where yourNameColumn LIKE" + yourTextBox.Text +"%"; //before lines from this you can set them initializing code part of your form..it will be your choice
   conn.Open();
   dReader = cmd.ExecuteReader();
   if (dReader.HasRows == true)
   {
       yourListOfTheMatchedNames.Clear(); // to clear previous search..its optional to depends of your choice
       while (dReader.Read())
       {                  
              yourListOfTheMatchedNames.Add(dReader["Name"].ToString());    
       }
    }
    else
    {
        MessageBox.Show("There is No Customer Name Starts with You Typed");
    }
    dReader.Close();

    txtName.AutoCompleteMode = AutoCompleteMode.Suggest;
    txtName.AutoCompleteSource = AutoCompleteSource.CustomSource;
    txtName.AutoCompleteCustomSource = yourListOfTheMatchedNames;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T23:30:24.037

最好的方法是使用 jQuery 对服务器端函数进行 AJAX 调用，以便为您进行查找。

**考虑这个 C#**：

```
public string getNames(string prefix)
{
     //logic to perform your name retrieval from the SQL Server database based on the passed in string parameter: "prefix"
     return "John,Joe,Joseph";
} 
```

**jQuery** :

```
$(document).ready(function(){
    //assign the getNames() function each time the key is 
    //pressed on the txtNames input
    $('#txtName').keyup(function(){
        getNames();
    });
});

function getNames(){
    $.ajax({
        type: 'POST',
        url: 'page-to-post-to.ashx',
        data: {
            prefix: 'J'
        },
        success: function(data){
            //data will return : 'John,Joe,Joseph'
            //use your javascript logic to separate these names by the comma delimiter
            //and use them!
        }
    });
} 
```

**HTML**：

```
<input id="txtName" /> 
```

这可能不是 100% 正确，但它至少应该让你走上正确的道路。

# mysql - mysql - 锁是否通过复制传播？

> ID：10858436
> 
> 赞同：14
> 
> 时间：2012-06-01T23:12:12.967
> 
> 标签：mysql, replication, myisam, locks

我有一个带有 MyISAM 表的 Mysql 主从复制。所有更新都在主设备上完成，选择在主设备或从设备上完成。

当我们进行某些更新时，似乎我们可能需要手动锁定一些表。虽然此写锁定在表上，但锁定的表上不会发生任何选择。但是关于奴隶呢？锁是否传播出去？

假设我有 table_A 和 table_B。我在 master 上的 table_A 和 table_B 上启动锁定并开始执行更新。这时候没有其他连接可以从master上读取table_A和table_B？但是，如果此时另一个连接试图从从站读取表，他们可以这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-26T16:08:19.577

MySQL 复制的所有内容都可以在二进制日志中找到。

您可以运行以下命令来查看详细信息。

```
show global variables like 'log_bin%'; 
```

log_bin_basename 将告诉您带有基本文件名的二进制日志的路径。

并运行

```
show binary logs 
```

查找服务器上当前存在的二进制文件。

`mysqlbinlog`您可以通过将命令与文件名一起使用或`show binlog events ...`从 MySQL CLI运行来检查写入文件的实际命令 。

另外，检查您使用的是什么 binlog_format。

基本上 - 表的锁定不会直接传播到从属服务器，但当时，乳清将执行执行的更新，如果需要，它们将执行更新表的锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-03T01:24:37.940

据我所知，写锁不会传播到二进制日志中，您可以通过快速测试并查看二进制日志来验证这一点。如果您还想避免 master 上的问题并且由于某种原因无法迁移到 InnoDB，请考虑将 GET_LOCK() 之类的东西集成到您的应用程序中，而不是完全锁定表。MyISAM 在并发方面相当不确定。

# webserver - TortoiseHg 网络服务器说它已经停止，即使它仍在运行

> ID：10858437
> 
> 赞同：2
> 
> 时间：2012-06-01T23:12:14.690
> 
> 标签：webserver, tortoisehg

当我右键单击我的 Hg 文件夹并选择**TortoiseHg** > **Web Server**时，我可以毫无问题地在端口 7999 上启动 Web 服务器。然后我关闭了那个对话框。如果我`netstat -a -o`从命令提示符下运行，我可以看到 的实例`thgw.exe`正在运行并正在侦听端口 7999（即使在关闭对话框之后）。具有讽刺意味的是，在任务管理器中，该`thgw.exe`过程被称为“Mercurial SCM 的 TortoiseHg GUI 工具”，即使没有运行 GUI。

## 问题

**如果我通过TortoiseHg** > **WebServer**再次打开该对话框，它会报告状态为“已停止”，并且启用了“**开始**”按钮。这是不正确的，因为端口仍在侦听。如果我单击开始按钮，我会在日志中收到此消息，如我所料：

> abort: cannot start server at ':7999': 每个套接字地址（协议/网络地址/端口）通常只允许使用一次

## 问题

1.  那么为什么 TortoiseHg 没有意识到现有`thgw.exe`的端口正在运行呢？

2.  除了 netstat 和任务管理器之外，还有更好的方法来检查 TortoiseHg 是否正在侦听 Web 端口？并了解哪个端口代表哪个文件夹？

3.  我无法停止网络服务器，那么你应该如何优雅地关闭 TortoiseHg 网络服务器而不从任务管理器中杀死它？这对我的生产源代码控制系统来说似乎是一件可怕的事情！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T18:00:14.103

**单击“服务**”窗口的“**关闭”**按钮时，窗口实际上并没有关闭，而是将自身最小化到通知区域中。请参阅下面屏幕截图中的地球图标：

 **![通知区域中的服务窗口图标](../Images/0af712cece3514440f79f73237e7dc7e.png)

如果单击该图标，则会出现原始的“**服务**”窗口，其中“**开始**”按钮实际上被禁用，而**“停止”**则被启用。您可以从那里停止服务器。

此行为已在 TortoiseHg 2.4、Windows 7 上进行了测试。

我在这里看到的唯一问题是，当您选择适当的菜单项时，原始窗口没有打开。

另请参阅TortoiseHg 错误跟踪器上的[issue 1845 。](https://bitbucket.org/tortoisehg/thg/issue/1845)**

# containers - 浮动：左和浮动：右 div 之间的 CSS 自动调整容器

> ID：10858438
> 
> 赞同：11
> 
> 时间：2012-06-01T23:12:22.913
> 
> 标签：containers, autosize, css

我正在寻找一种方法让 CSS(3) 能够在`float:left`div 和`float:right`div 之间自动调整中心容器 div 的宽度。

中心 div 还需要有一个`min-width`设置，类似于 google+ -> home，其中中心内容自动安装在左侧导航按钮和右侧聊天窗格之间。然后，当屏幕宽度缩小到某个点（使用 javascript 检测到）时，聊天窗格会最小化以节省空间。

这是一个有效的模型来工作：http: [//jsfiddle.net/9vrby/](http://jsfiddle.net/9vrby/)

另外，这是我现在使用的 css 代码：

```
#left{ float:left; width:200px; height:400px; border:1px solid #000; }

#center{ float:left; width:auto; height:400px; border:1px solid red; }

#right{ float:right; width:100px; height:400px; border:1px solid blue; } 
```

如果您需要更多信息，请告诉我，并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-01T23:48:17.560

上`#center`，删除`float: left`和添加`overflow: hidden`。另外，`#center`需要在 HTML 中移到最后。

[http://jsfiddle.net/thirtydot/9vrby/14/](http://jsfiddle.net/thirtydot/9vrby/14/)

这适用于所有现代浏览器，甚至 IE7。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T23:44:30.977

一个技巧是不使用浮点数，而是使用 display:table-cell。

[http://jsfiddle.net/9vrby/8/](http://jsfiddle.net/9vrby/8/)

HTML：

```
<div id='left'></div>
<div id='center'></div>
<div id='right'></div> 
```

CSS：

```
#left{ display:table-cell; min-width:200px; height:400px; border:1px solid #000; }
#center{ display:table-cell; min-width:200px; width:100%; height:400px; border:1px solid red; }
#right{ display:table-cell; min-width:100px; height:400px; border:1px solid blue; } 
```

但请注意，这种方法在 IE7 中不起作用（以及更低版本，但谁仍然支持这种废话呢？）。但也许你可以看看[CSS3Pie](http://css3pie.com)，它使你能够将 CSS(3) 用于官方不支持它的浏览器，比如 IE7。所以也许 display:table-cell 也会起作用。

# c - cvNamedWindow 销毁任何以前的窗口

> ID：10858445
> 
> 赞同：0
> 
> 时间：2012-06-01T23:13:20.220
> 
> 标签：c, opencv

我正在尝试创建两个命名窗口，一个显示原始视频，另一个显示处理后的视频，但是，第二个命名窗口的创建会破坏第一个。该文档没有包含太多关于命名窗口的信息，我在谷歌上找不到任何相关的内容。

这是我的代码：

```
cvNamedWindow( "Source", 1);
cvMoveWindow("Source", 0, 200);

// If I comment out the following lines, the original window continues on screen
cvNamedWindow( "Wire", 1);
cvMoveWindow("Wire", 600, 200); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T00:26:29.523

您可能看不到它，因为它没有内容。尝试向窗口添加内容。这段代码：

```
int main(int argc, char *argv[]) {
    cv::Mat image, image2;
    image = cv::imread("pic1.jpg");
    image2 = cv::imread("pic2.jpg");

    if (!image.data || !image2.data) {
        std::cout << "Image file not found\n";
        return 1;
    }

    cv::namedWindow("Source");
    cv::moveWindow("Source", 0, 200);
    cv::namedWindow("Wire");
    cv::moveWindow("Wire", 400, 200);

    cv::imshow("Source", image);
    cv::imshow("Wire", image2);
    // wait for key
    cv::waitKey(0);

    return 0;
} 
```

产生这个：

![两个有内容的窗口](../Images/cc5dc1b0309e882c0bd1c864bb9a0f92.png)

# jquery - location.href 不适用于按钮

> ID：10858448
> 
> 赞同：1
> 
> 时间：2012-06-01T23:13:46.483
> 
> 标签：jquery, function, button, href

我想用一个按钮分配下面的功能，但由于某种原因，该功能中的“location.href”部分不起作用。如果我从按钮更改为 div 它可以工作，所以问题似乎出在按钮上。

为什么它不起作用，有没有办法解决它（我真的想使用一个按钮）？

```
<button id="back">Cancel</button> // Doesn't work
<div id="back">Cancel</div> // Works

    $('#back').click(function(){
        var imageId = $('#id').attr('href');
        var id = imageId.split('/');
        location.href = '/blog/' + id[3];
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:52:16.113

您的问题不是按钮，您的问题是当您将单击绑定到具有默认行为的元素（如 a `link`or `button`）时，浏览器会执行脚本但首先开始遵循默认行为。

**您可以使用** `return false;`来防止触发默认行为，也可以防止与元素相关的其他操作冒泡：

请参阅此工作[小提琴示例](http://jsfiddle.net/zuul/eCB6N/)！

```
$('#back').click(function(){
    return false;  // prevent the regular click action for the element
    alert('bubu'); // this will not run
}); 
```

**或者您用于** `.preventDefault();`仅阻止默认行为但执行与元素关联的其他操作：

请参阅此工作[小提琴示例](http://jsfiddle.net/zuul/754zk/)！

```
$('#back').click(function(event){
    event.preventDefault(); // prevent the regular click action for the element
    alert('bubu'); // this will run
}); 
```

[这里](http://css-tricks.com/return-false-and-prevent-default/)有一篇关于这个主题的好文章！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T23:30:45.167

好的，我设法自己解决了。问题是您显然需要添加“preventDefault();” 如果您使用按钮让“location.href”工作。

我修改后的现在可以工作的代码是：

```
 $('#back').click(function(e){
        e.preventDefault();
        var imageId = $('#id').attr('href');
        var id = imageId.split('/');
        location.href = '/blog/' + id[3];
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T23:22:36.953

似乎它是一个 ID 而不是类问题？我用 ID 尝试了这个示例，但它不起作用，但切换到类，它很好。

[http://jsfiddle.net/rexzc/](http://jsfiddle.net/rexzc/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T00:38:36.653

如果单击按钮，将尝试提交表单或文档，您可以使用 type='button' 属性来防止这种情况。

# wpf - mvvm treeview 不绑定视图模型

> ID：10858453
> 
> 赞同：0
> 
> 时间：2012-06-01T23:14:18.127
> 
> 标签：wpf, mvvm, treeview

我在树视图的实现中缺少什么？这是所见： ![在此处输入图像描述](../Images/9052a44d5db38213a937d4922f1d21b8.png)

看法：

```
<TreeView Style="{StaticResource ExpandAllStyle}" ItemsSource="{Binding Titles}">
            <TreeView.Resources>
                <HierarchicalDataTemplate DataType="{x:Type vm:TitleViewModel}">
                    <Grid ShowGridLines="False">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <TextBlock Text="{Binding Path=DisplayedStartTime}" Margin="0,0,10,0" />
                        <TextBlock Grid.Column="1" Text="" />
                        <TextBlock Grid.Column="2" Text="{Binding Path=Text}" />
                    </Grid>
                </HierarchicalDataTemplate>
            </TreeView.Resources>
        </TreeView> 
```

我的存储库：

```
public class TitleRepository : INotifyPropertyChanged
{
    #region Titles

    private ObservableCollectionEx<Title> _titles;

    public ObservableCollectionEx<Title> Titles
    {
        get { return _titles; }
        set 
        { 
            _titles = value;
            OnPropertyChanged(new PropertyChangedEventArgs("Titles"));
        }
    }

    #endregion

    #region Current Title

    private Title _currentTitle;

    public Title CurrentTitle
    {
        get { return _currentTitle; }
        set { _currentTitle = value; }
    }

    #endregion

    public TitleRepository()
    {
        _titles = new ObservableCollectionEx<Title>();

        _titles.Add(new Title("This is a title test"));
    } 
```

和我的视图模型：MainTreeViewModel：

```
 public class MainTreeViewModel : ViewModelBase
    {
        private readonly TitleRepository _titleRepository;

        private ObservableCollection<TitleViewModel> _titles;

        public ObservableCollection<TitleViewModel> Titles
        {
            get { return _titles; }
            set { _titles = value; }
        }

        public MainTreeViewModel()
        {
            _titleRepository = ((App)Application.Current).TitleRepository;

            _titleRepository.Titles.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(Titles_CollectionChanged);

            _titles = new ObservableCollection<TitleViewModel>(
                (from t in _titleRepository.Titles
                 select new TitleViewModel(t)).ToList());
        }

        void Titles_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
        {
            _titles.Add(new TitleViewModel(_titleRepository.Titles[_titleRepository.Titles.Count - 1]));
        } 
```

标题视图模型：

```
public class TitleViewModel : ViewModelBase
    {
        readonly Title _title;

        #region Displayed Start Time

        public string DisplayedStartTime
        {
            get { return _title.DisplayedStartTime; }
        }

        #endregion

        #region Text

        public string Text
        {
            get { return _title.Text; }
        }

        #endregion

        public TitleViewModel(Title title)
        {
            _title = title;

        } 
```

我在 View.cs 中绑定视图模型：

```
 MainTreeViewModel vm = new MainTreeViewModel();
        this.DataContext = vm; 
```

我希望看到我在存储库中填充的标题“这是一个磁贴测试”。它是一棵动态树。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T08:29:04.180

srry 发现了问题...... MainWindow 中的另一个绑定到 dataContext。MVVM 模式有效且有效。

# c++ - C++ - 避免在类定义中定义的函数的隐式内联

> ID：10858458
> 
> 赞同：2
> 
> 时间：2012-06-01T23:15:22.537
> 
> 标签：c++

在我的实现文件（.cc 文件）中，我经常发现在类定义中定义成员函数（例如 Pimpl 类的函数）很方便。例如：

```
struct X::Impl {
    void DoSomething() {
        ...
    }
}; 
```

代替

```
struct X::Impl {
    void DoSomething();
};

void X::Impl::DoSomething() {
    ...
} 
```

我认为这比在类定义之外实现函数更可取，原因有几个。它增强了可读性并促进了保持方法小（通过使其易于添加）的实践。代码也更容易维护，因为您不必更新方法声明。

我看到的唯一缺点是类声明中定义的方法是隐式内联的，由于目标代码大小的增加，这通常是不可取的。

我的问题是：

1.  我有这个权利吗？我缺少这种做法的其他缺点吗？

2.  隐式内联是否值得担心？编译器是否足够聪明，可以拒绝我对不应内联的内联方法的隐式请求？

3.  是否可以（通过编译器扩展或其他方式）声明类定义中定义的方法不被内联？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T23:40:53.260

简单的答案是你不应该关心。在类定义中定义的成员函数是隐式的`inline`，但这并不意味着它们是*内联*的（即代码不需要在调用处内联）。

编译器实现者花费了大量时间和资源来提出启发式方法，根据函数的大小、复杂性以及是否可以内联（递归函数不能内联^([*])）。与我们大多数人相比，编译器拥有更多关于生成代码及其运行架构的信息。相信它，然后如果您觉得可能存在问题，配置文件，并且如果配置文件表明您应该更改代码，请执行此操作，但*在事后*做出明智的决定。

如果你想验证函数是否真的被*内联*了，你可以查看程序集并检查是否有对函数的调用或者代码是否真的被内联了。

* * *

^([*])如果编译器可以将递归转换为迭代，就像尾递归的情况一样，那么理论上可以内联转换后的函数。但是，带有循环的函数无论如何被内联的可能性较小......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T23:23:31.260

我不知道防止内联的可移植方式，但是使用 GCC 你可以使用属性。例如：

```
struct X::Impl {
    void DoSomething() __attribute__((noinline)) {
        ...
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T23:44:57.117

将您的内联选择所节省的所有 CPU 时间加起来。在他们身上花的钱比你自己的少。线性路径长度担忧适用于现在每天处理数万亿次执行的路径。在 L1 中，40 亿已经足够接近一秒了。250 次不是五分钟。如果没有人抱怨性能，那么您和您的编译器的选择至少在正确的联盟中发挥作用。

关于可读性的意见大相径庭。重要的是你的听众的意见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T23:46:58.510

一般来说，编译器会随心所欲地内联，不会过多关注`inline`程序员给出的任何关键字。`inline`通常被视为或多或少与`static`.

例如，递归函数通常不能完全内联（您要内联的函数体将再次包含应该内联的调用）。为了测试你的特定编译器的行为，你可以定义一个这样的类：

```
class Fib {
public:      
   int calc(int i);
};

int Fib::calc(int i) {
  if (i > 1)
     return calc(i-1) + calc(i-2);
  return 1;
} 
```

有了这个定义，如果编译器觉得有义务内联所有对 的调用，则以下示例程序将无法在合理的时间或大小内编译`calc`：

```
#include "tst.hpp"
#include <iostream>                
int main() {
   Fib f;
   std::cout << f.calc(1000) << std::endl;
}; 
```

所以你可以通过编译这个程序来测试你的编译器行为。如果编译成功，编译器不会内联所有对`Fib::calc`.

# c++ - 如何使用 QWebView 更改网页的默认标题

> ID：10858459
> 
> 赞同：0
> 
> 时间：2012-06-01T23:15:52.840
> 
> 标签：c++, qt

我正在使用以下代码显示网页。但标题始终显示为我们的公司名称（XYZ）。

```
QString msg;
QWebView view = new QWebView();
view->page()->mainFrame()->setHtml(msg);
view->show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T23:58:56.620

title 属性似乎是只读的`QWebView`，只能通过使用/更改 HTML 文档中的标题标签来设置。

但是，运行上述代码时弹出的窗口的标题可以用 更改`view->setWindowTitle()`，就像任何用作顶级窗口的 Qt 小部件一样。

# php - 当用户点击链接时插入 click_url、时间戳和用户名

> ID：10858461
> 
> 赞同：0
> 
> 时间：2012-06-01T23:15:58.513
> 
> 标签：php, mysql, logging, hyperlink, insert

我将有一个由图像组成的菜单，这些图像根据用户上次访问后是否添加了新记录而有所不同。

但是我决定放弃这个想法，我现在将点击链接上的最后一个时间戳与新记录上的时间戳进行比较。

我试图找到一个解决方案，但我现在卡在这条线上，也许你可以看到它有什么问题（点击是我想要存储点击的表格）：

```
$sql = "insert into clicks (username, link_url, click_timestamp) values ($_SESSION[$username], "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]", now())";
$result=mysql_query($sql); 
```

那么，有人有什么好主意吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T23:18:48.153

你的 SQL 语法有错误，试试这个：

```
$sql = 'INSERT INTO clicks (username, link_url, click_timestamp) VALUES
        ("' . $_SESSION[$username] . '",  
         "http://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'] . '", 
          NOW()
        )'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T23:20:48.267

检查那个字符串。据我所知，PHP 可以解决字符串内的普通变量，但不能解决数组，所以`$_SESSION`在这种情况下应该在字符串之外。此外，如果您想在字符串中添加引号，请在其前面使用反斜杠，例如`\"`，因此它将被解释为引号字符而不是字符串的结尾。

# android - 以编程方式永久启用和禁用 android 中闪烁的 LED 通知灯

> ID：10858465
> 
> 赞同：4
> 
> 时间：2012-06-01T23:16:29.857
> 
> 标签：android, notifications, led

我一直在寻找通过代码禁用和启用 LED 通知灯的能力。我看到了这个线程[Disable/enable notification led](https://stackoverflow.com/questions/3304971/disable-enable-notification-led)，但它已经很老了，我想知道新的 API 版本是否支持完全关闭它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:32:49.723

如果您的应用在没有其他应用发出通知时发出通知，您只能控制 LED。

在某些设备上可以绕过android直接在unix shell中控制，但显然不推荐这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T23:21:13.147

> 我想知道新的 API 版本是否支持完全关闭它

您无法通过 Android SDK 启用或禁用 LED 行为，除非在您自己的应用程序中，您可以控制`Notification`您提出的任何行为。

# objective-c - 实现 [UIColor colorWithRGBString:@"#3A6FFC"] 的好方法是什么？

> ID：10858466
> 
> 赞同：1
> 
> 时间：2012-06-01T23:16:30.620
> 
> 标签：objective-c, uikit

我可能会使用`scanf`，然后`&`使用`0xff, 0xff00, 0xff0000`并移动它们以获得 RGB 的 3 个值，然后调用`[UIColor colorWithRed: green: blue: alpha: 1]`. 有没有更好或更简单的方法来实现它？

前面的`#`在字符串中应该是可选的，它不应该区分大小写，所以`3a6ffc`应该和`#3A6FFC`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:19:45.190

您必须将 nsstring 转换为十六进制值，然后从十六进制中获取 R、G 和 B 以下 stackoverflow 答案就是您要寻找的

[如何将 HEX RGB 颜色代码转换为 UIColor？](https://stackoverflow.com/questions/3805177/how-to-convert-hex-rgb-color-codes-to-uicolor)

# php - PHP - 具有两个条件的正则表达式

> ID：10858467
> 
> 赞同：0
> 
> 时间：2012-06-01T23:16:32.840
> 
> 标签：php, regex

我正在寻找与 php 一起使用的正则表达式：

我在数组中有 4 个这样的字符串：

```
$strA = 'John P. Beck';   // name and surname
$strB = '12012 BlaBla Xx';  // street
$strC = 'Houston TX 12345-6789';  // city + zip code
$strD = '(123) 456-7890';  // telephone number 
```

现在我在 for 循环中使用正则表达式，但它总是返回第一个和第二个字符串，有时返回第一个和第三个字符串....

```
for($i = 0; $i < count($array); $i++)
{
    if(preg_match("/[A-Z]/", $array[$i]))
    {
      echo $array[$i] . '<br>';
    }
    else echo 'no match<br>';
} 
```

我需要一个具有以下条件的正则表达式： - 字符串中至少有 1 个大写字母并且绝对没有数字...只返回 $strA .....

非常感谢

编辑

对不起，也许我解释得不好，没有添加细节......这是数组的结构（示例）：

```
[0] => <p>
[1] =>                41
[2] => <br />
[3] =>                John P. Beck
[4] => <br />
[5] =>                12012 BlaBla Xx
[6] => <br />
[7] =>                Houston TX 12345-6789
[8] => <br />
[9] =>                (123) 456-7890
[10] => <br />
[11] =>                42
[12] => <br />
[13] =>                Linda F. Green
[14] => <br />
[15] =>                1888 BlaBla Xx
[16] => <br />
[17] =>                Saint Louis, MO 12345-6789
[18] => <br />
[19] =>                (123) 456-7890
[20] => <br />
...
...
... 
```

我只需要存储第 4 个字符串和第 14 个字符串......等等......

@nickb：使用 $array[0] 它总是返回 ap 标签..我在一个 for 循环中...... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:27:30.940

0 个或多个字符（数字除外），后跟一个或多个大写字母，后跟 0 个或多个字符（数字除外）：

```
/[^0-9]*[A-Z]+[^0-9]*/ 
```

如果您希望数据以大写字母开头：

```
/^[A-Z]+[^0-9]*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T00:25:33.490

**如果字符串的任何部分**与正则表达式匹配，preg_match 将匹配。如果要测试整个字符串，请使用 ^ 和 $ 表示字符串的开头和结尾。

# azure - 从管理门户中完全删除订阅

> ID：10858470
> 
> 赞同：22
> 
> 时间：2012-06-01T23:16:42.853
> 
> 标签：azure, azure-configuration

在我的 Windows Azure 管理门户中，我仍然看到“3 个月免费试用”订阅，尽管它已经过期并被自动取消。我已经删除了其中的托管服务和数据库，但它仍然没有消失。

我该怎么做才能完全删除订阅？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-10-25T11:10:32.450

根据 Azure 支持，（当前）无法删除已取消的订阅。

> 来自 Microsoft Azure 的问候。我查看了您的请求，并想提一下，很遗憾，没有选项可以从 Azure 门户中删除已禁用的订阅。这是为了让客户从创建 Azure 帐户之日起就可以查看他们购买的订阅。

我认为这是一个糟糕的设计选择，但这可能只是我自己。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-01T23:30:41.537

访问门户。在右上角，您应该会看到 Billing 的链接。

![结算链接](../Images/5e02ce1cb2b2d90901d65caccf8b2aa2.png)

这将带您进入订阅列表。

![在此处输入图像描述](../Images/a251904351e56d04ac30952013d7854b.png) 选择您的订阅。然后，在右侧，您会看到几个选项，底部的一个应该是“取消订阅”。

![在此处输入图像描述](../Images/9997fb01e08e26d561f9d6fcd436d6de.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T23:21:18.037

几个月前，我通过致电支持取消了订阅，此后一直将其放在界面中。最近他们通知我他们将很快删除它（及其相关存储）。我希望它会消失。因此，我认为他们会保留订阅一段时间，以防你打电话给他们说“嘿，我真的不想取消它！”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-03T10:37:47.997

此外，您也无法完全删除您的帐户。您可以请求取消订阅（根据原始问题），Azure 支持可以采取行动，但他们不能/不会删除您的实际帐户/登录。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-10-15T21:44:17.113

我不确定，但根据[这个页面](https://docs.microsoft.com/en-us/azure/cost-management-billing/manage/cancel-azure-subscription#what-happens-after-i-cancel-my-subscription)，订阅似乎在取消后 30 到 90 天被永久删除。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2017-02-20T10:26:13.860

你可以通过 Azure PowerShell 删除订阅。

如何安装：[https ://docs.microsoft.com/en-us/powershell/azureps-cmdlets-docs/](https://docs.microsoft.com/en-us/powershell/azureps-cmdlets-docs/)

使用方法：C:\PS> Remove-AzureSubscription "Test"

[https://msdn.microsoft.com/ru-ru/library/dn495109.aspx](https://msdn.microsoft.com/ru-ru/library/dn495109.aspx)

# sql-server - 在 SQL Server 2000 中正确使用 @@Error

> ID：10858472
> 
> 赞同：2
> 
> 时间：2012-06-01T23:17:10.297
> 
> 标签：sql-server, sql-server-2000

以 SQL Server 2000 文档为例，或类似

```
Use Northwind
Go

Alter Procedure spu_UpdateOrderDetails(
@ProductID Int, 
@OrderId Int,
@ErrorCode Int OutPut,
@ErrorMessage Varchar(100) Output
)
As

UPDATE [Order Details]
SET ProductID = @ProductID
WHERE OrderID = @OrderId

Set @ErrorCode = @@ERROR

IF @ErrorCode <> 0
    Set @ErrorMessage = 'Some error ocurred'
GO

Declare @MyErrorCode Int
Declare @MyErrorMsg Varchar(100)

Exec spu_UpdateOrderDetails 999, 10248, @MyErrorCode OutPut, @MyErrorMsg OutPut

Print @MyErrorCode
Print @MyErrorMsg 
```

这将导致外键错误，我将正确打印@MyErrorMsg。但我仍然得到丑陋的外键错误。

现在，如果我从我的应用程序中运行，它可能是 Delphi 或 Visual Studio，我仍然会收到丑陋的错误消息。

我应该如何“捕获”错误，以便向用户显示我的自定义错误？

（我知道较新的 SQL Server 版本提供 Try/Catch，但这是 SQL Server 2000）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:52:29.123

将其放入事务中，如果错误则将其回滚，如果成功则提交：

```
SET QUOTED_IDENTIFIER ON
SET ANSI_NULLS ON
GO

CREATE PROCEDURE spu_UpdateOrderDetails
AS

DECLARE @ErrorCode int
       --,@myRowCount int
       ,@ProductID  
       ,@OrderId 
       --,@ErrorMessage Varchar(100) Output

SET NOCOUNT ON

BEGIN TRAN 
    UPDATE [Order Details]
    SET ProductID = @ProductID
    WHERE OrderID = @OrderId

    SELECT @ErrorCode = @@ERROR--, @myRowCount = @@ROWCOUNT 
    IF @ErrorCode != 0 GOTO HANDLE_ERROR

COMMIT TRAN -- No Errors, so go ahead
RETURN 0

HANDLE_ERROR:
ROLLBACK TRAN
RETURN @ErrorCode
GO 
```

# jquery-ui - knockoutjs 模板 jquery 自动完成 - 如何在自动完成选择中填充输入？

> ID：10858475
> 
> 赞同：1
> 
> 时间：2012-06-01T23:17:25.113
> 
> 标签：jquery-ui, knockout.js

选择自动完成项后，我想在模板中填充多个输入。我正在关注[http://jsfiddle.net/rniemeyer/MJQ6g/](http://jsfiddle.net/rniemeyer/MJQ6g/)但不确定如何将其应用于多个输入。

模型：

```
<script>
        var ContactModel = function (contactsInfo) {
            var self = this;
            self.Company = ko.observable();
            self.ContactsInformation = contactsInfo;
            self.Name = ko.observable();
        };

        var ContactsInformationModel = function () {
            var self = this;
            self.Address1 = ko.observable();
        };

     var viewModel;

     var ViewModel = function () {
         var self = this;
         self.Contact1 = new ContactModel(new ContactsInformation);
         self.Contact2 = new ContactModel(new ContactsInformation);
     };

     $(function () {
         viewModel = new ViewModel();
         ko.applyBindings(viewModel);
     });

    function getContacts(searchTerm, sourceArray) {
        $.getJSON("web_service_uri" + searchTerm, function (data) {
            var mapped = $.map(data, function (item) {
                return {
                    label: item.Name,
                    value: item
                };
            });
            return sourceArray(mapped);
        });
    }
</script> 
```

模板：

```
<script type="text/html" id="contact-template">                 
     <div>   
            Name
              <input data-bind="uniqueName: true,
                jqAuto: { autoFocus: true, html: true }, 
                jqAutoSource: $root.Contacts, 
                jqAutoQuery: getContacts, 
                jqAutoValue: Name, 
                jqAutoSourceLabel: 'label', 
                jqAutoSourceInputValue: 'value', 
                jqAutoSourceValue: 'label'"
                class="name" />    
     </div>
    <div>
        Company
        <input data-bind="value: Company, uniqueName: true" class="company" />
    </div>
    <div>
        Address
        <input data-bind="value: ContactsInformation.Address1, uniqueName: true" class="address1" />
    </div>        
</script> 
```

html:

```
<div data-bind="template: { name: 'contact-template', data: Contact1 }">
        </div>
<hr/>
        <div data-bind="template: { name: 'contact-template', data: Contact2 }">
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:31:28.860

如果您从 中省略该`jqAutoSourceValue`选项`data-bind`，那么它会将值设置为等于实际对象。然后，您可以读取该对象的属性。

通常，您将有一个可观察对象：`mySelectedPerson`然后将一个部分（可能带有`with`绑定）绑定到它并访问该对象的各个属性/可观察对象。

这是修改为省略`jqAutoSourceValue`选项的示例，绑定`jqAutoValue`到调用的可观察对象`mySelectedPerson`并使用`with`绑定显示所选对象的一些属性。 [http://jsfiddle.net/rniemeyer/YHvyL/](http://jsfiddle.net/rniemeyer/YHvyL/)

# java - Java arraylist找不到构造函数，使用arrays.aslist

> ID：10858476
> 
> 赞同：8
> 
> 时间：2012-06-01T23:17:42.367
> 
> 标签：java, arrays, generics, arraylist

我在我的代码中使用 Arrays.asList().contains() 方法，如最佳答案所示：[如何测试数组是否包含某个值？](https://stackoverflow.com/questions/1128723/in-java-how-can-i-test-if-an-array-contains-a-certain-value)，所以我将在代码中使用 Arrays.asList() 。

但是，编译器拒绝以下代码。是因为我的素数数组使用了原语，而不是引用类型吗？由于自动装箱，我不这么认为，但我只是想检查一下。

```
import java.math.*;
import java.util.ArrayList;
import java.util.Arrays;

public class .... {
    public static void main(String[] args) {
        int[] primes = formPrimes(15);
        ArrayList<Integer> primes1 = new ArrayList<Integer>(Arrays.asList(primes));
        // Rest of code...
    }

    public static int[] formPrimes(int n) {
        // Code that returns an array of integers
    }
} 
```

我收到一个错误，一个找不到符号错误。

符号：构造函数 ArrayList(java.util.List)

位置：类 java.util.ArrayList ArrayList primes1 = new ArrayList(Arrays.asList(primes));

基本上，我有一个返回整数数组的函数，我想将其转换为数组列表，但在使用 ArrayList 构造函数时遇到了麻烦。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T23:21:46.957

是的。自动装箱不适用于数组，仅适用于基元。

我在 Eclipse 中遇到的错误是 `The constructor ArrayList<Integer>(List<int[]>) is undefined`

那是因为 ArrayList 中的构造函数定义为`public ArrayList(Collection<? extends E> c)`. 如您所见，它只接受 Collection 的子类型，而 int 不接受。

只需将您的代码更改为：

```
public class .... {
    public static void main(String[] args) {
        Integer[] primes = formPrimes(15);
        ArrayList<Integer> primes1 = new ArrayList<Integer>(Arrays.asList(primes));
        // Rest of code...
    }

    public static Integer[] formPrimes(int n) {
        // Code that returns an array of integers
    }
} 
```

一切都应该很好，假设您从`fromPrimes`.

**从 Andrew 的评论中更新** ，并在查看 Arrays.asList 的源代码后：

```
public static <T> List<T> asList(T... a) {
    return new ArrayList<T>(a);
} 
```

所以这里真正发生的是它`Arrays.asList(new int[] {})`实际上会返回 a `List<int[]>`，而不像`Arrays.asList(new Integer[] {})`which 会返回 a `List<Integer>`。显然 ArrayList 构造函数不会接受 a `List<int[]>`，因此编译器会抱怨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T23:34:57.253

`primes`是原始`int`类型的数组；该类型不是派生自`Object`，因此可以自动放入 a `List`（与所有 一样`Collections`，只能包含`Object`s）。@贾斯汀是对的；您需要手动将数组中的项目添加到列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T00:15:25.900

如果您这样做是为了访问 contains 方法，您不妨编写自己的方法。

```
public boolean contains(int[] array, int item) {
  for (int element: array)
    if (element == item)
      return true;

  return false;
} 
```

# java - Java/Javascript 将包含小程序的浏览器窗口置于前台

> ID：10858491
> 
> 赞同：8
> 
> 时间：2012-06-01T23:20:27.293
> 
> 标签：java, javascript, browser, window, focus

有没有办法将浏览器窗口从 Java 小程序警报窗口拉到前台/焦点？我在一个 html 页面中有一个小程序，它会在其中显示一个带有按钮的警报。当按下按钮时，我希望原始浏览器窗口从它所在的任何地方弹出（最小化，覆盖等）我相信有一种方法可以将 Java 连接到 Javascript 来做到这一点，但我不知道 Javascript。

这是Java小程序代码：

```
/** An applet that posts an alert and waits for the alert button to be pressed.
* Version 1 uses http://java.sun.com/products/plugin/1.3/docs/jsobject.html
*/

import netscape.javascript.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Bounce extends JApplet implements ActionListener {
    JDialog dialog;
    JSObject window;
    String message;

    public void paint(Graphics g) {
        g.clearRect(0,0, 400,40);
        g.drawString(message,40,20);
    }

    public void init() {
        JFrame frame= null;
        dialog= new JDialog(frame, "Bounce App");

        JButton setupButton= new JButton("Bounce it back!");
        setupButton.addActionListener(this);

        JPanel contentPane= new JPanel();
        contentPane.add(setupButton);
        contentPane.setOpaque(true);
        dialog.setContentPane(contentPane);

        dialog.setSize(new Dimension(400, 110));
        dialog.setVisible(true);

        message= "This applet posts an alert panel.";
        window= JSObject.getWindow(this);
//      String[] params= { "An alert message" };
//      window.call("alert", params);
//      window.eval("alert('Important Alert!')");
    }

    public void actionPerformed(ActionEvent e) {
        dialog.setVisible(false);
        dialog.dispose();
        System.err.println("button has been pushed; focus set");
        message= "Somebody pushed my bounce-back button."; 
        JSObject document= (JSObject)window.getMember("document");
        document.setMember("bgColor", "orange");
        window.eval("focus()");
        repaint();
    }

} 
```

这是 HTML 代码：

```
 <HTML>
    <HEAD><TITLE>The Reappearing Page</TITLE></HEAD>
    <body bgcolor="#f0ffc0">

    <H2>Make this page reappear</H2>
    This page will start an applet (white box below) that sets up an alert.
    Before you respond to the alert, hide the window you are reading right now,
    using one of these methods:<ul>
    <li> cover it with another window, </li>
    <li> Hide it using a menu item, </li>
    <li> Minimize it, or </li>
    <li> move it to another workspace or desktop. </li>
    </ul>
    Then click on the button in the alert. 

    <P>
    <EMBED type="application/x-java-applet;version=1.3" width="400" height="40" 
        align="baseline" code="Bounce.class" MAYSCRIPT=true
       pluginspage="http://java.sun.com/products/plugin/1.3/plugin-install.html">
    <NOEMBED>
       No JDK 1.3 support for APPLET!!
    </NOEMBED>
    </EMBED>

    <P>What is supposed to happen is that the main window 
    will emerge from wherever you hid it and reappear.
    Since I don't know how to do this, it is your challenge to actually make it happen.
    We need to be able to achieve this magic from any of the situations listed above.</P>

    </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-25T12:39:24.840

（从评论更改为回答，因此我可以为您发布一个体面的代码片段）没有可靠的方法来使用 JavaScript “前景”窗口，除非它是您从父页面自己创建的窗口，原因很明显（“恭喜！ ！您是我们的第 1000 位客户，您中奖了！！！！！！”）。如果您使用 window.open 从另一个窗口将您的小程序窗口加载为弹出窗口，您可以尝试使用 window.focus：

```
var w = window.open(appletPageUrl);
w.focus() 
```

我想弹出窗口拦截器不喜欢这种东西，所以 YMMV。就个人而言，我建议您考虑一下如果用户选择隐藏/最小化您的应用程序，他们是否想知道您的警报。

# iphone - iTunes Connect 下拉菜单中没有新的 Bundle ID

> ID：10858492
> 
> 赞同：1
> 
> 时间：2012-06-01T23:20:41.383
> 
> 标签：iphone, app-store, app-store-connect

我正在尝试`APNS`在 iTunes Connect 门户上注册一个启用的应用程序。我的团队为此应用程序创建的内容在表单的下拉菜单`bundle ID`中不可用。`Bundle ID``"App Information"`

我作为个人创建的每个 Bundle ID 都在那里，但不是作为公司创建的。从个人到公司的转变会影响`Bundle ID`iTunes Connect 下拉菜单中新功能的出现吗？如果没有，任何人都可以提出不可用的替代原因`Bundle ID`（自创建以来已超过 36 小时）。

谢谢！

# sharepoint - 如果列为零，SharePoint 计算条件公式以返回零

> ID：10858495
> 
> 赞同：1
> 
> 时间：2012-06-01T23:21:06.720
> 
> 标签：sharepoint

我计算了 Projected NVSMR 列的日期公式：

```
=DATE(YEAR([Last NVMSR])+[3yr], MONTH([Last NVMSR]), DAY([Last NVMSR])) 
```

这是伟大的。但是，如果 3yr 列为零，我也希望它返回零。我已经为列出的所有成员或语法错误尝试了不同`DATEDIFF`的和只是`IF`公式和 SharePoint 返回`#NUM`。

我是奖项监督员，只有某些人才能获得三年奖。如果不允许他们获得三年奖励，我想在 Projected NVMSR 列“0”中输入“0”并返回“0”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:55:42.287

您需要的是 IF(TEST,TRUE,FALSE) - 请参阅此[SharePoint 计算列备忘单](http://blog.pentalogic.net/2011/05/sharepoint-calculated-column-cheat-sheet/)以获取快速参考和示例。

所以

```
=IF([3yr]=0,0,DATE(YEAR([Last NVMSR])+[3yr], MONTH([Last NVMSR]), DAY([Last NVMSR]))) 
```

或格式化以便于阅读

```
=IF( [3yr] = 0,
     0,
     DATE(YEAR([Last NVMSR])+[3yr], MONTH([Last NVMSR]), DAY([Last NVMSR]))
   ) 
```

# windows - 如何使 vcredist 成为我的 MSI 安装程序的启动条件？

> ID：10858498
> 
> 赞同：1
> 
> 时间：2012-06-01T23:21:27.190
> 
> 标签：windows, installation, windows-installer, vcredist

我有一个安装项目，我想为我的应用程序安装程序创建[vcredist_x86 2008](http://www.microsoft.com/en-us/download/details.aspx?id=29)和[2010](http://www.microsoft.com/en-us/download/details.aspx?id=5555) [启动条件](http://msdn.microsoft.com/en-us/library/ay12wede%28v=vs.100%29.aspx)。有没有办法做到这一点？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:57:18.687

请看一下[这篇博文](http://blogs.msdn.com/b/astebner/archive/2010/05/05/10008146.aspx)

# python - Python 导入 cookie

> ID：10858499
> 
> 赞同：1
> 
> 时间：2012-06-01T23:21:28.883
> 
> 标签：python, http, url, authentication, cookies

> **可能重复：**
> [python：urllib2 如何使用 urlopen 请求发送 cookie](https://stackoverflow.com/questions/3334809/python-urllib2-how-to-send-cookie-with-urlopen-request)

如果我的浏览器中有 cookie，如何让 python 脚本将这些保存的 cookie 用于 url 请求？

对于一个特定的站点，我正在寻找一种方法让我的 python 脚本获取我的身份（当我在浏览器上登录时），然后向服务器发出请求。它不需要从磁盘读取 cookie，而是我想做这样的事情：

```
cookies = {"username": "USERNAME", "session": "xxxxxxx"...}
urlopen(url, cookies=cookies) # I know that this doesn't work, just showing you what I intend to do 
```

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T23:44:04.307

Cookielib 是你的朋友。但是您需要从浏览器获取更多信息，而不仅仅是 cookie 名称和值：

```
cookies = {"username": "USERNAME", "session": "xxxxxxx"...} 
```

如果您提供这些值，您应该能够在您的请求中重新创建会话：

```
cookies = [{
    "name": "username",
    "value": "USERNAME",
    "domain": "domain",
    "path": "path",
    "secure": "secure",
}] 
```

使用以下命令重新创建会话：

```
import cookielib
import urllib2

cj = cookielib.CookieJar()

for cookie in cookies:
    c = cookielib.Cookie(version=1,
                         name=cookie["name"],
                         value=cookie["value"],
                         port=None,
                         port_specified=False,
                         domain=cookie["domain"],
                         domain_specified=False,
                         domain_initial_dot=False,
                         path=cookie["path"],
                         path_specified=True,
                         secure=cookie["secure"],
                         expires=None,
                         discard=True,
                         comment=None,
                         comment_url=None,
                         rest={'HttpOnly': None},
                         rfc2109=False)
    cj.set_cookie(c)

opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
opener.open(urllib2.Request('http://www.example.com') 
```

未经测试的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T23:28:42.470

Firefox 和 Chrome 使用 SQLite 来编写它们的 cookie。

您可以编写一个从那里获取 cookie 的适配器。我找到了如何执行此操作的示例并将 cookie 设置在 a 中`CookieJar`，但我想您实际上可以将 python`CookieJar`类子类化为您即时执行此操作并将值存储回来。

[http://www.guyrutenberg.com/2010/11/27/building-cookiejar-out-of-firefoxs-cookies-sqlite/](http://www.guyrutenberg.com/2010/11/27/building-cookiejar-out-of-firefoxs-cookies-sqlite/)

# jmeter - 在 JMeter 中一次且仅运行一次大型文件列表（可能以特定顺序）

> ID：10858505
> 
> 赞同：2
> 
> 时间：2012-06-01T23:22:15.823
> 
> 标签：jmeter

我试图通过 JMeter 运行大约 15000 个肥皂请求。我在一个文件夹中有 15000 个单独的肥皂文件。

我知道[WebService(SOAP) Request](http://jmeter.apache.org/usermanual/component_reference.html#WebService%28SOAP%29_Request)组件可以选择指向一个文件夹。

但是，问题是文件夹中的文件会被随机提取并运行，并且一个文件可以多次运行。

这并不理想，因为每个请求都有一个唯一的关联 id，如果一个文件运行两次，第二次运行将由于重复的关联 id 而失败。

无论如何，我可以告诉 jmeter 只运行一次文件吗？

此外，由于某些soap 请求依赖于已经运行的其他请求，因此希望能够以指定的顺序运行这些请求。这可能吗？

这些似乎是应该已经解决的常见问题。但是，我在谷歌上找不到太多。

你们有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-04T21:49:30.253

我会使用[JSR223 Sampler](http://jmeter.apache.org/usermanual/component_reference.html#JSR223_Sampler)来运行一个脚本（例如 Groovy）来遍历目录中的文件并将每个文件的文本存储在一个字符串中。

例如，请参阅[this other answer](https://stackoverflow.com/a/9733568/62667) about using a Groovy script to iterate a list of values。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:44:59.590

您可以将数据放入 csv 文件并使用 CSV 数据集配置读取它。如果您需要多个线程的唯一值，那么您必须创建多个文件，每个线程一个。

您还可以将数据放入数据库并使用 JDBC 配置/采样器来访问它，确保 a：在读取数据后删除数据，或 b：使用标志将其标记为“已读取”。这两种方法都可以防止相同的记录被不同的线程读取两次。

如果您需要运行请求以便构建测试计划，则请求将按顺序发出，从上到下。

# php - 构建一个逐字符读取的词法分析器？

> ID：10858512
> 
> 赞同：2
> 
> 时间：2012-06-01T23:23:11.730
> 
> 标签：php, lexer

我正在用 PHP 构建一个基本的词法分析器，就像一个练习一样。现在我正在使它成为 lex PHP 源代码并通过 HTML 标记输出突出显示的源代码，但我使用的是真正的令牌名称和东西，而不仅仅是一些广泛的正则表达式匹配。

我设置它的方式是逐个字符地读取 PHP 源代码。它检查当前字符以确定当前标记*可能*是什么，然后读入与适当模式匹配的下一个*x*字符。

例如，如果当前字符是“，我将读入所有字符，直到遇到另一个前面没有转义 \ 的“。这是一种不好的做法吗？我见过并理解的唯一另一种方法是制作一个编译大量正则表达式并同时匹配所有标记的类，但这对我来说似乎并不灵活。

想法？

```
 $str = '';

    $php = str_replace( "\r\n", "\n", $php );
    $php = str_split( $php );
    $len = count( $php );
    $keyword = '';

    for ( $i = 0; $i < $len; $i++ ) {
        $char = $php[$i];

        // Detect PHP strings and backtick execution operators
        if ( strpos( self::STRING_CHARACTERS, $char ) !== FALSE ) {
            $string         = $char;
            $opening_quote  = $char;
            $escaped        = FALSE;

            while ( isset( $php[++$i] ) && ( $escaped || $php[$i] != $opening_quote ) ) {
                $string .= $php[$i];

                if ( $php[$i] == '\\' ) {
                    $escaped = !$escaped;
                }
            }

            $string .= $php[$i];

            if ( $opening_quote == "'" ) {
                $str .= '<span class="php-string php-single-quoted-string">' . htmlspecialchars( $string ) . '</span>';
            } else if ( $opening_quote == '"' ) {
                $str .= '<span class="php-string php-double-quoted-string">' . htmlspecialchars( $string ) . '</span>';
            } else if ( $opening_quote == '`' ) {
                $str .= '<span class="php-execution-operator php-backtick">' . htmlspecialchars( $string ) . '</span>';
            }
            continue;
        }

        $str .= $char;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T23:48:05.330

如果您打算将其保留为手写工具，那么一定要继续使用当前的方法。

如果您正在编写诸如`flex`ANTLR 之类的工具，并且您希望能够整天为各种语言构建高效的解析器，那么巨型匹配引擎方法非常棒。但是，如果您只对解析一种语言感兴趣，则需要付出相当多的额外努力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T23:57:08.280

A typical handwritten approach would be to create a list of regex or automata. You run down the list and the first element that successfully matches from your current possition in the input, gives you the next token and classification. You can speed it up a little by using a map that limits the list by the current character.

If you want to get fancier, you can combine automata into one giant one, but typically a tool is used for that.

You might be interested in the free Stanford compiler course offered by [https://class.coursera.org/](https://class.coursera.org/).

# php - Linux 服务器上的自动化脚本（不是 cron 作业）

> ID：10858513
> 
> 赞同：2
> 
> 时间：2012-06-01T23:23:13.553
> 
> 标签：php, linux, multithreading, concurrency, daemon

我正在 Linux CentOS 服务器上编写一个网站（我计划升级到一个 VPS 计划，在那里我将拥有 root 访问权限）。许多网站将依赖于自动化的脚本。

我有 2 个关于启动自动化流程的问题。

*   有什么办法可以启动一个守护线程，或者类似的东西，它将不断运行。每次电子邮件帐户收到新电子邮件时，我都需要执行一个脚本。我知道可以每分钟运行一次的 cron 作业，但是有一个不断运行的脚本是理想的，所以我可以在新电子邮件到达的那一刻执行脚本。

*   有没有办法从代码（理想情况下是 PHP）启动一个线程，该线程与主程序同时运行。在我使用的脚本中，imap_open 用于连接电子邮件帐户，每次需要几秒钟。但是，如果我可以同时触发多个并发脚本，那将理想地减少程序的时间。有没有办法做到这一点？

对于这些问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T23:28:31.283

您当然可以编写一个不断运行的守护程序/服务。有关入门教程，请参阅

[http://www.netzmafia.de/skripten/unix/linux-daemon-howto.html](http://www.netzmafia.de/skripten/unix/linux-daemon-howto.html)

您的守护程序可以实现 SMTP（现有的库可支持此功能）以定期检查电子邮件帐户是否有新电子邮件并采取相应措施。

这是一个带有 SO 答案的问题，讨论了如何使用 Python 完成所有这些

[如何使 Python 脚本像 Linux 中的服务或守护程序一样运行](https://stackoverflow.com/questions/1603109/how-to-make-a-python-script-run-like-a-service-or-daemon-in-linux)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T23:31:19.927

对于第一部分，有两个简单的解决方案：

1.  使用 Vixie cron`@reboot`启动规范以标准用户身份在重新启动时启动您的守护进程。这个和每分钟的 cron-jobs 是唯一可以让用户轻松运行守护进程式服务的机制。

2.  用于`procmail`在每次发送电子邮件时启动新脚本。这里的缺点是它`procmail`会在每封电子邮件上运行然后启动一个新程序——当你每秒收到一百封电子邮件时，与用于`inotify(7)`提醒长期存在的程序有关新邮件的守护程序相比，这可能是一个严重的障碍。电子邮件。

对于第二部分，寻找`fork(2)`系统调用的包装器。它将程序干净地分成两半——父母和孩子——并允许每个人从那时起继续独立执行。如果将来孩子和父母需要再次通信，那么也许看看PHP是否支持线程执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T23:35:51.137

那么[incron](http://inotify.aiken.cz/)呢？可能有一种方法可以在您的情况下使用它，但您必须产生一个文件系统事件（例如创建一个新文件）。

# wordpress - Wordpress 永久链接问题 - 漂亮永久链接中的额外“index.php”

> ID：10858516
> 
> 赞同：1
> 
> 时间：2012-06-01T23:23:32.897
> 
> 标签：wordpress, nginx, permalinks

我将我的网站从 Apache 迁移到 Nginx，现在的问题是我的永久链接在 URL 中有一个额外的 index.php，我无法确定这是 wordpress 问题还是我的配置问题。

当我的帖子呈现原始链接时的示例：[http://hs.com/2012/04/30/a-new-question/](http://hs.com/2012/04/30/a-new-question/) 现在被链接为[http://hs.com/](http://hs.com/) * *index.php/* *2012 /04/30/一个新问题/

我尝试了 nginx 兼容性插件。还尝试了使用和不使用插件的自定义结构选项，但我无法理解发生了什么。Wordpress 说自定义的永久链接结构被保存，即使网站中的所有链接都被错误地呈现。

这是我对该站点的 nginx 配置。

```
server {
server_name harshasagar.com www.harshasagar.com;
access_log /srv/www/harshasagar.com/logs/access.log;
error_log /srv/www/harshasagar.com/logs/error.log;
root /srv/www/harshasagar.com/public_html;

if ($host ~* www\.(.*)) {
   set $host_without_www $1;
   rewrite ^(.*)$ http://$host_without_www$1 permanent; # $1 contains '/foo', not 'www.mydomain.com/foo'
}

location / {
    index index.html index.htm index.php;
    try_files $uri $uri/ /index.php?q=$uri&$args;
}

location ~ \.php$ {
    try_files $uri =404;
    include fastcgi_params;
    fastcgi_pass  127.0.0.1:9000;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME /srv/www/harshasagar.com/public_html$fastcgi_script_name;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:27:13.827

换行：

```
try_files $uri $uri/ /index.php?q=$uri&$args; 
```

和

```
try_files $uri $uri/ /index.php?$args; 
```

并安装这个插件 - [http://wordpress.org/extend/plugins/nginx-helper/](http://wordpress.org/extend/plugins/nginx-helper/)

如果您在此之后遇到问题，请告诉我。

# css - 调整元素大小的 CSS 变换

> ID：10858523
> 
> 赞同：68
> 
> 时间：2012-06-01T23:25:24.770
> 
> 标签：css, css-transforms

我发现了这个：[变换后的宽度/高度](https://stackoverflow.com/questions/7565542/width-height-after-transform)

和其他几个，但没有什么不是我想要的。我想要的是将某些东西缩放到其大小的 50%（当然还有漂亮的动画过渡），并让页面布局重新调整到元素的新（视觉）大小。默认情况下似乎发生的情况是元素在布局结构中仍保留其原始大小，并且仅使用相关的转换进行绘制。

基本上，我希望用户单击文本块（或其他内容），然后将该文本缩放到其大小的 50%（或其他）并将其粘贴在下面的面板中以指示它已被选中。移动元素后，我不希望元素周围有 50% 的空白。

我尝试重新设置高度/宽度，但这会导致元素本身经历新的布局，然后将比例应用于新布局，这仍然给我留下了 50% 的空白空间。我的 mozilla 特定（为简单起见）代码如下所示：

```
<script type="text/javascript">
 function zap(e) {

  var height = e.parentNode.offsetHeight/2 + 'px';
  var width = e.parentNode.offsetWidth/2 + 'px';
  e.parentNode.style.MozTransform='scale(0.0)'; 
  e.parentNode.addEventListener(
    'transitionend', 
    function() { 
      var selectionsArea = document.getElementById("selected");
      selectionsArea.appendChild(e.parentNode);
      e.parentNode.style.MozTransform='scale(0.5,0.5)'; 
      e.parentNode.style.display = 'inline-block';
      e.parentNode.style.height = height;
      e.parentNode.style.width = width;
    },
    true) 
}
</script> 
```

我真的希望我不必为了实现这一目标而陷入负边距或相对定位的混乱......

**编辑：**自从写这篇文章以来，我发现了一个非常相似的问题，既没有评论也没有答案。它略有不同，因为我不关心它是一个特定于 html5 的解决方案，我怀疑该解决方案要么不存在，要么位于 CSS/javascript 中，无论 html 级别如何。

[使用 CSS3 转换 scale() 缩放/缩放 DOM 元素及其占用的空间](https://stackoverflow.com/questions/10627306/scale-zoom-a-dom-element-and-the-space-it-occupies-using-css3-transform-scale)

**编辑2：（**另一个非工作尝试）

我也试过这个，但是缩放和平移函数似乎以一种使最终位置无法预测的方式相互作用......并且变换之前的缩放似乎与变换然后缩放不同。不幸的是，这不仅仅是通过比例因子调整翻译的问题......

```
function posX(e) {
    return e.offsetLeft + (e.offsetParent ? posX(e.offsetParent) : 0)
}

function posY(e) {
    return e.offsetTop + (e.offsetParent ? posY(e.offsetParent) : 0)
}

function placeThumbNail(e, container, x, y, scale) {
    var contX = posX(container);
    var contY = posY(container);
    var eX = posX(e);
    var eY = posY(e);
    var eW = e.offsetWidth;
    var eH = e.offsetHeight;

    var margin = 10;
    var dx = ((contX - eX) + margin + (x * eW * scale));
    var dy = ((contY - eY) + margin + (y * eH * scale));

    // assumes identical objects     
    var trans = 'translate(' + dx + 'px, ' + dy + 'px) ';
    var scale = 'scale(' + scale + ',' + scale + ') ';
    e.style.MozTransform =  trans + scale ; 
} 
```

即使它有效，上面仍然需要我在运行此代码之前先将元素移动到页面底部（以摆脱空白），此外，我还需要在重新调整大小时重新计算转换.. .所以无论如何我对这个尝试开始不太满意。

另请注意，如果您在上面使用`scale + trans`vs `trans + scale`，则结果会大不相同。

**编辑 3：**我发现了放置问题......转换按指定的顺序应用，并且`scale(0.5,0.5)`基本上将像素的大小更改为原来的一半（可能暗示他们如何在内部实现它）。如果我把 translate 放在第一位，那么翻译稍微少/多一点来解释由比例引起的左上角位置的变化就可以了，但是当 dom 发生变化时管理对象的位置并调整变换合理的方式仍然让我望而却步。这种感觉是错误的，因为我正朝着用 javascript 编写自己的布局管理器的方向漂移，只是为了获得这种效果。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-06T11:27:51.313

我注意到的问题是，当元素缩放时，浏览器会改变它的像素比率，而不是像素数量。元素更小，但它不会改变它在 DOM 中的实际像素大小。因此，我认为不存在仅 CSS 的解决方案。

我将可缩放元素放入容器中，该容器与其他元素保持相同的像素比。使用 Java 脚本，我只需更改容器的大小。一切仍然基于 CSS3 变换：缩放。也许 JS 代码可以更简单，但现在都是关于这个想法（只是一个概念证明）；）摆弄两个例子：http: [//jsfiddle.net/qA5Tb/9/](http://jsfiddle.net/qA5Tb/9/)

HTML：

```
<div class="overall-scalable">
    <div class="scalable" scalex='0.5' scaley='0.5'>
        Nunc et nisi ante. Integer in blandit nisi. Nulla facilisi. Vestibulum vulputate sapien eget mauris elementum sollicitudin. Nullam id lobortis dolor. Nulla vitae nibh vitae sem volutpat pretium. Nunc et nisi ante. Integer in blandit nisi. Nulla facilisi. Vestibulum vulputate sapien eget mauris elementum sollicitudin. Nullam id lobortis dolor. Nulla vitae nibh vitae sem volutpat pretium.
    </div>
</div> 
```

CSS：

```
.overall-scalable {width: 350px; height: 150px; overflow: hidden; -webkit-transition: all 1s;}
.scalable {color: #666; width: 350px; height: 150px; -webkit-transform-origin: top left; -webkit-transition: all 1s;} 
```

JS：

```
$('button').click(function() {
    $('.scalable').each(function(){
        rescale($(this));
    })
});

function rescale(elem) {

    var height = parseInt(elem.css('height'));
    var width = parseInt(elem.css('width'));
    var scalex = parseFloat(elem.attr('scalex'));
    var scaley = parseFloat(elem.attr('scaley'));

    if (!elem.hasClass('rescaled')){
        var ratioX = scalex;
        var ratioY = scaley;
    }else{          
        var ratioX = 1;
        var ratioY = 1;
    }

    elem.toggleClass('rescaled');
    elem.css('-webkit-transform', 'scale('+ratioX +', '+ratioY+')');        
    elem.parent().css('width', parseInt(width*ratioX) + 'px');
    elem.parent().css('height', parseInt(height*ratioY) + 'px');
}​ 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-02-27T23:06:17.390

**我终于想出了一个简单的解决方案，它与我开始的地方非常相似。**

我承认，（在过去一年左右的时间里）花了很多努力才最终弄明白。我实际上是在寻找这个问题的答案。我以前遇到过这个问题。无论如何，我再次开始解决这个问题，我确实找到了一个简单的解决方案。

无论如何，诀窍是将边距底部与 CSS calc 脚本一起使用。

此外，您必须为对象 (div) 声明绝对高度。如果 div 可以扩展，我认为这不会起作用，否则，经过多次尝试和数小时后，我终于有了一个非常简单、干净、有效的解决方案。

因此，例如，高度 = 300 像素（不是 30%，或者没有高度）。如果可以的话，我什至会设置 overflow-y = hidden。如果您希望 div 增长（没有绝对高度），我相信您将需要 JavaScript。我没有尝试。否则，这在所有测试中都可以正常工作。

我相信这将适用于 SASS 或 LESS，因为您可以使用 CSS 中的变量声明一些重复的内容。我还没有尝试过。

**关于我的解决方案的一些重要评论：**

1.  请注意，我使用对象的高度和 CSS calc 方法以及变换大小来计算底部边距。
2.  我对我的工作进行了颜色编码，以帮助显示正在发生的事情。
3.  wrap div 确实有填充，只是为了表明它正在工作。它们是绝对的，不会影响内部对象。
4.  如果您像我一样构建响应式页面，则可以使用媒体查询与类来获得相同的效果。
5.  我正在使用 transform-origin: 50% 0; 这段代码最终没有我最初想象的那么重要。我正在使用底部边距来解决我遇到的问题。
6.  在此示例中，我只是将 div 置于父 div 的中心。如果您需要放置 div，它会稍微复杂一些，但类似的解决方案也可以。我没有尝试。
7.  您可以在 jQuery 与 CSS 中使用相同的解决方案。这个想法是一样的。您将在页面中搜索所有具有转换的元素并根据需要添加 CSS。

我还设置了一个 Codepen 来测试和分享。

[https://codepen.io/cyansmiles/details/yvGaVP](https://codepen.io/cyansmiles/details/yvGaVP)

```
.box-wrap {
  display: block;
  position: relative;
  box-sizing: border-box;
  width: 100%;
  margin: auto;
  text-align: center;
  margin: 30px 10px;
  padding: 40px;
  background: yellow;
}

.box-wrap:before {
  content: "";
  display: block;
  box-sizing: border-box;
  position: absolute;
  background: rgba(0, 0, 0, 0.5);
  width: calc(100% - 80px);
  height: calc(100% - 80px);
  top: 40px;
  left: 40px;
}

.box {
  display: inline-block;
  box-sizing: border-box;
  position: relative;
  transform-origin: 50% 0;
  width: 300px;
  height: 150px;
  background: red;
}

.box.size-80 {
  transform: scale(0.8);
  margin: 0 auto calc(-150px * (1 - 0.8));
}

.box.size-70 {
  transform: scale(0.7);
  margin: 0 auto calc(-150px * (1 - 0.7));
}

.box.size-60 {
  transform: scale(0.6);
  margin: 0 auto calc(-150px * (1 - 0.6));
}

.box.size-50 {
  transform: scale(0.5);
  margin: 0 auto calc(-150px * (1 - 0.5));
}

//etc
```

```
<div class="box-wrap">
  <div class="box">
    <h1>Box at 100%</h1>
  </div>
</div>

<div class="box-wrap">
  <div class="box size-80">
    <h1>Box at 80%</h1>
  </div>
</div>

<div class="box-wrap">
  <div class="box size-70">
    <h1>Box at 70%</h1>
  </div>
</div>

<div class="box-wrap">
  <div class="box size-60">
    <h1>Box at 60%</h1>
  </div>
</div>

<div class="box-wrap">
  <div class="box size-50">
    <h1>Box at 50%</h1>
  </div>
</div>
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-28T02:33:12.550

我不得不从上面稍微调整我的代码。

它现在适用于所有方面（不仅仅是上下）。我看到了一些编辑，我认为这是 CSS 问题（您可以在代码中添加另一个像素来解决这个问题）。

这是有效的 Codepen 链接。如果您使用它，请随时告诉我。终于弄清楚这一点感觉很好。

[https://codepen.io/cyansmiles/pen/bLOqZo](https://codepen.io/cyansmiles/pen/bLOqZo)

附言。我正在分叉我的代码笔以添加可移动的 CSS。

```
.box-wrap {
  display: block;
  position: relative;
  box-sizing: border-box;
  width: 100%;
  margin: auto;
  text-align: center;
  margin: 30px 10px;
  padding: 40px;
  background: yellow;
}

.box-wrap:before {
  content: "";
  display: block;
  box-sizing: border-box;
  position: absolute;
  background: rgba(0, 0, 0, 0.5);
  width: calc(100% - 80px);
  height: calc(100% - 80px);
  top: 40px;
  left: 40px;
}

.box {
  display: inline-block;
  box-sizing: border-box;
  position: relative;
  transform-origin: 50% 0;
  width: 300px;
  height: 150px;
  background: red;
  color: #fff;
}

.box.size-80 {
  background: red;
  transform: scale(0.8);
  margin: 0 calc((-300px * (1 - 0.8)) / 2) calc(-150px * (1 - 0.8));
}

.box.size-70 {
  background: blue;
  transform: scale(0.7);
  margin: 0 calc((-300px * (1 - 0.7)) / 2) calc(-150px * (1 - 0.7));
}

.box.size-60 {
  background: green;
  transform: scale(0.6);
  margin: 0 calc((-300px * (1 - 0.6)) / 2) calc(-150px * (1 - 0.6));
}

.box.size-50 {
  background: orange;
  transform: scale(0.5);
  margin: 0 calc((-300px * (1 - 0.5)) / 2) calc(-150px * (1 - 0.5));
}

//etc
```

```
<div class="box-wrap">
  <h1>This is a bunch of boxes!</h1>
  <div class="box size-50">
    <h1>Box at 50%</h1>
  </div>
  <div class="box size-60">
    <h1>Box at 60%</h1>
  </div>
  <div class="box size-80">
    <h1>Box at 80%</h1>
  </div>
  <div class="box size-70">
    <h1>Box at 70%</h1>
  </div>
  <div class="box size-50">
    <h1>Box at 50%</h1>
  </div>
  <div class="box size-60">
    <h1>Box at 60%</h1>
  </div>
  <div class="box size-50">
    <h1>Box at 50%</h1>
  </div>
  <div class="box size-60">
    <h1>Box at 60%</h1>
  </div>
  <div class="box size-80">
    <h1>Box at 80%</h1>
  </div>
  <div class="box size-70">
    <h1>Box at 70%</h1>
  </div>
  <div class="box size-50">
    <h1>Box at 50%</h1>
  </div>
  <div class="box size-60">
    <h1>Box at 60%</h1>
  </div>
</div>

<div class="box-wrap">
  <div class="box">
    <h1>Box at 100%</h1>
  </div>
</div>

<div class="box-wrap">
  <div class="box size-80">
    <h1>Box at 80%</h1>
  </div>
</div>

<div class="box-wrap">
  <div class="box size-70">
    <h1>Box at 70%</h1>
  </div>
</div>

<div class="box-wrap">
  <div class="box size-60">
    <h1>Box at 60%</h1>
  </div>
</div>

<div class="box-wrap">
  <div class="box size-50">
    <h1>Box at 50%</h1>
  </div>
</div>
```

# javascript - 如何检索 CSS 中定义的背景图片 url？

> ID：10858526
> 
> 赞同：0
> 
> 时间：2012-06-01T23:26:11.837
> 
> 标签：javascript, html, css

假设我有一个 div
`<div id="div_a" style="background-image:url('xxx')"></div>`

然后我可以通过使用获取 url 信息

```
document.getElementById("div_a").style.backgroundImage 
```

获取其 url 信息。

但是，如果样式是在 CSS 中定义的，那么上面的代码将返回空白

有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T23:39:51.377

您正在寻找的是计算样式[getComputedStyle](http://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-CSSview-getComputedStyle)

```
window.getComputedStyle(document.getElementById("div_a"), null).getPropertyValue('background-image') 
```

# java - 以编程方式同步 Google 帐户，无需通过设置屏幕

> ID：10858529
> 
> 赞同：1
> 
> 时间：2012-06-01T23:26:34.263
> 
> 标签：java, android, api, gmail, provisioning

我有一个场景，我有一个保存用户名/密码的服务器。因此，在启动我的 android 应用程序和经过身份验证的用户时，我想自动同步他的帐户（例如 Gmail），而无需通过传统的设置屏幕。是否有任何我可以用于此目的的公共 googe/gmail API。在这一点上的任何帮助将不胜感激。

# jquery - 在悬停（或鼠标悬停）时获取元素 ID

> ID：10858533
> 
> 赞同：0
> 
> 时间：2012-06-01T23:27:04.080
> 
> 标签：jquery

仍然在掌握 jQuery，我很高兴能做到这一点，尤其是从这个论坛的帖子中得到的帮助。但是，现在有了一个可以满足我要求的工作功能，即创建一个看起来像按钮的单选组。它通过 json 提取数据并循环创建单选按钮。

我想获取生成的单选按钮的 id，以便我可以解析到应用程序的下一步，但我无法让它工作。

```
function FillDiv(groups, side) {
    var cnt = 1;
    var newClass = '';
    var newType = '';
    if (side == '#ck-button-left') {
        newClass = 'leftClass';
        newType = 'radio'
    }
    else {
        newClass = 'rightClass';
        newType = 'checkbox'
    }

    $.each(groups, function (index, groups) {
        $(side)
        .append(
            $(document.createElement('label')).attr({
                id: cnt + 'lbl'
            })
        );
        $('#' + cnt + 'lbl')
        .append(
            $(document.createElement('input')).attr({
                id: groups.GroupCode,
                type: newType,
                name: 'testGroup',
                class: newClass
            })
        );
        $('#' + groups.GroupCode).after
        (
            $(document.createElement('span')).text(groups.GroupName).attr('class', 'leftSpan')
        );
        $('#' + cnt + 'lbl').after($(document.createElement('br')));
        cnt = cnt + 1;
    });
} 
```

浏览各种搜索，它应该适用于......

```
$('#leftSpan').mouseover(function () {
        $('#lblOutput').html(this.id);
}); 
```

或者，正如我怀疑的那样，这与我需要引用父级或子级的标签/输入的嵌套有关。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T23:30:21.523

似乎您正在使用`id`选择器来选择 a `class`，试试这个：

```
$('.leftSpan').mouseover(function () {
        $('#lblOutput').text(this.id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T22:36:43.990

这导致了后续帖子“我尚未解决的与我的'悬停（或鼠标悬停）时获取元素ID'有关的问题”中的进一步问题。解决方案位于[我尚未解决的与“悬停（或鼠标悬停）时获取元素 ID”帖子相关的问题](https://stackoverflow.com/questions/10923631/an-issue-i-have-not-resolved-related-to-my-get-element-id-on-hover-or-mouseove)

# c# - 将拆分字符串的第一个数字放入二维数组

> ID：10858535
> 
> 赞同：2
> 
> 时间：2012-06-01T23:27:33.997
> 
> 标签：c#, multidimensional-array, split

在 C# 控制台应用程序中，如何将拆分字符串的第一个数字放入二维数组中？

```
string[,] table3x3 = new string[3, 3];  
string myString = "11A23A4A5A87A5"; 
string[] splitA = myString.Split(new char[] { 'A' }); 
```

假设我有一个 3x3 的二维数组和一个带有数字和元音的字符串。我将它们拆分，以便可以将它们放入 2Darray 中。我应该包括什么样的循环，以便输出是

```
Console.WriteLine(table3x3[0, 0]); //output: blank
Console.WriteLine(table3x3[0, 1]); //output: blank
Console.WriteLine(table3x3[0, 2]); //output: 2
Console.WriteLine(table3x3[1, 0]); //output: blank
Console.WriteLine(table3x3[1, 1]); //output: 4
Console.WriteLine(table3x3[1, 2]); //output: 5
Console.WriteLine(table3x3[2, 0]); //output: 8
Console.WriteLine(table3x3[2, 1]); //output: blank
Console.WriteLine(table3x3[2, 2]); //output: 5 
```

从视觉上看，输出如下：

```
[ ][ ][2]
[ ][4][5]
[8][ ][5] 
```

字符串中有 9 个数字和 5 个元音。它根据它们的序列将拆分字符串的第一个数字返回到特定的 2Darray 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T23:51:58.327

这应该这样做：

```
string[,] table3x3 = new string[3, 3];  
string myString = "11A23A4A5A87A5";

int stringIndex = -1;
bool immediatelyFollowsA = false;
for (int row = 0; row < 3; row++)
    for (int col = 0; col < 3; col++)
    {
        while (myString[++stringIndex] == 'A')
        {
            immediatelyFollowsA = true;
        }

        if (immediatelyFollowsA)
        {
            table3x3[row,col] = myString[stringIndex].ToString();
            immediatelyFollowsA = false;
        }
    } 
```

演示：http: [//ideone.com/X0LdF](http://ideone.com/X0LdF)

* * *

或者，添加到您的原始起点：

```
string[,] table3x3 = new string[3, 3];  
string myString = "11A23A4A5A87A5";
string[] splitA = myString.Split(new char[] { 'A' });

int index = 0;
bool first = true;
foreach (string part in splitA)
{
    int row = index / 3;
    int col = index % 3;

    if (!first)
    {
        table3x3[row, col] = part[0].ToString();
    }

    index += part.Length;
    first = false;
} 
```

演示：http: [//ideone.com/7sKuR](http://ideone.com/7sKuR)

# java - 如何从 JTextArea 中提取具有给定字体的文本的单词和换行信息

> ID：10858537
> 
> 赞同：1
> 
> 时间：2012-06-01T23:27:40.383
> 
> 标签：java, swing, svg, word-wrap, jtextarea

我必须将样式文本转换为包装的简单文本（用于 SVG 自动换行）。我无法相信无法从`JTextArea`. 所以我创建了一个小框架程序：

```
package bla;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.Frame;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JTextArea;

public class Example1 extends WindowAdapter {
    private static String content = "01234567890123456789\n" + "0123456 0123456 01234567 01234567";
    JTextArea text;

    public Example1() {
        Frame f = new Frame("TextArea Example");
        f.setLayout(new BorderLayout());
        Font font = new Font("Serif", Font.ITALIC, 20);
        text = new JTextArea();
        text.setFont(font);
        text.setForeground(Color.blue);
        text.setLineWrap(true);
        text.setWrapStyleWord(true);
        f.add(text, BorderLayout.CENTER);
        text.setText(content);
        // Listen for the user to click the frame's close box
        f.addWindowListener(this);
        f.setSize(100, 511);
        f.show();
    }

    public static List<String> getLines( JTextArea text ) {
        //WHAT SHOULD I WRITE HERE
        return new ArrayList<String>();
    }

    public void windowClosing(WindowEvent evt) {
        List<String> lines = getLines(text);
        System.out.println( "Number of lines:" + lines.size());
        for (String line : lines) {
            System.out.println( line );
        }
        System.exit(0);
    }

    public static void main(String[] args) {
        Example1 instance = new Example1();
    }

} 
```

如果你运行它，你会看到：

![显示的图像是这个](../Images/97847624aff9e40932e6061d1328a8ee.png)

以及我期望的输出：

```
Number of lines:6
0123456789
0123456789
0123456
0123456
01234567
01234567 
```

我应该写什么来代替评论？

## 完整答案：

因此，基于接受的答案的完整解决方案实际上不显示框架（请注意，您应该从结果中删除实际的换行符）：

```
package bla;

import java.awt.Color;
import java.awt.Font;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JTextArea;
import javax.swing.text.BadLocationException;
import javax.swing.text.Utilities;

public class Example1 {
    private static String content = "01234567890123456789\n" + "0123456 0123456 01234567 01234567";

    public static List<String> getLines( String textContent, int width, Font font ) throws BadLocationException {
        JTextArea text;
        text = new JTextArea();
        text.setFont(font);
        text.setForeground(Color.blue);
        text.setLineWrap(true);
        text.setWrapStyleWord(true);
        text.setText(content);
        text.setSize(width, 1);
        int lastIndex = 0;
        int index = Utilities.getRowEnd(text, 0);
        List<String> result = new ArrayList<String>();
        do {
            result.add( textContent.substring( lastIndex, Math.min( index+1, textContent.length() ) ) );
            lastIndex = index + 1;
        }
        while ( lastIndex < textContent.length() && ( index = Utilities.getRowEnd(text, lastIndex) ) > 0 );
        return result;
    }

    public static void main(String[] args) throws BadLocationException {
        Font font = new Font("Serif", Font.ITALIC, 20);
        Example1 instance = new Example1();
        for (String line : getLines(content,110,font)) {
            System.out.println( line.replaceAll( "\n", "") );
        }
    }

} 
```

我的开放性问题（不是那么重要），为什么包含 jtextarea 的 100px 宽度的框架比没有具有相同宽度的框架的 jtextarea 更晚地包装文本。对此有什么想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T00:40:14.587

`JTextArea`不支持带样式的文本，但它确实支持对其模型的面向行的访问`PlainDocument`，如下所示。以供参考，

*   不要不必要地混合 AWT ( `Frame`) 和 Swing ( ) 组件。`JTextArea`
*   Swing GUI 对象应该*只*在[事件分派线程](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建和操作。
*   [如此处](https://stackoverflow.com/a/5998117/230513)所述，该`getLineCount()`方法计算`line.separator`分隔行，而不是换行。
*   `BasicTextUI`处理外观和感觉相关的渲染；方法`viewToModel()`并`viewToModel()`在两个坐标系之间进行转换。

安慰：

```
01234567890123456789
0123456 0123456
01234567 01234567

```

代码：

```
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Font;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.text.BadLocationException;
import javax.swing.text.PlainDocument;

public class Example2 {

    private static final Character SEP = Character.LINE_SEPARATOR;
    private static String content = ""
        + "01234567890123456789" + SEP
        + "0123456 0123456" + SEP
        + "01234567 01234567";
    private JTextArea text;

    public Example2() {
        JFrame f = new JFrame("TextArea Example");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Font font = new Font("Serif", Font.ITALIC, 20);
        text = new JTextArea(4, 8);
        text.setFont(font);
        text.setForeground(Color.blue);
        text.setLineWrap(true);
        text.setWrapStyleWord(true);
        text.setText(content);
        f.add(new JScrollPane(text));
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
        for (String s : getLines(text)) {
            System.out.println(s);
        }
    }

    private List<String> getLines(JTextArea text) {
        PlainDocument doc = (PlainDocument) text.getDocument();
        List<String> list = new ArrayList<String>();
        for (int i = 0; i < text.getLineCount(); i++) {
            try {
                int start = text.getLineStartOffset(i);
                int length = text.getLineEndOffset(i) - start;
                list.add(doc.getText(start, length));
            } catch (BadLocationException ex) {
                ex.printStackTrace(System.err);
            }
        }
        return list;
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                Example2 instance = new Example2();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T23:51:42.167

JTextArea 确实有一个 : [getLines() 方法](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JTextArea.html)，这对你不起作用吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T15:06:21.807

使用 Utilities.getRowEnd() 传递 0 作为起始偏移量，然后是上一行的结束偏移量 +1

# vb.net - 关闭 Acrobat 时 Acrobat.exe 进程未终止

> ID：10858539
> 
> 赞同：1
> 
> 时间：2012-06-01T23:28:10.063
> 
> 标签：vb.net, acrobat

我在关闭 Acrobat 时遇到问题。我正在使用 vb.net 在运行 Acrobat 时签署 PDF 文件。完成后，我关闭 Acrobat 并尝试删除当前签名的 PDF 文件，但我收到一条错误消息，告诉我该文件正在被另一个进程使用。我尝试关闭并设置为 Nothing AcroApp、AcroAVDoc、AcroPDDoc JSO，但这仍然不起作用。我尝试用 Marshal.ReleaseComObject(...) 释放它们仍然没有效果。

```
 acroPDDoc.Close()
        acrobatAVDoc.Close(False)
        acrobatApp.Exit()

        Try
            Marshal.ReleaseComObject(javaScriptObj)
        Catch ex As Exception
        End Try

        Try
            Marshal.ReleaseComObject(acroPDDoc)
        Catch ex As Exception
        End Try

        Try
            Marshal.ReleaseComObject(acrobatAVDoc)
        Catch ex As Exception
        End Try

        Try
            Marshal.ReleaseComObject(acrobatApp)
        Catch ex As Exception
        End Try

        javaScriptObj = Nothing
        acroPDDoc = Nothing
        acrobatAVDoc = Nothing
        acrobatApp = Nothing 
```

我不想使用下面的替代方法，因为它会杀死所有我不想要的打开的 PDF 文档。

```
'Gets All Acrobat Processes
Dim tProcess() As Process = System.Diagnostics.Process.GetProcessesByName("Acrobat")

'Kills Each Acrobat Process
For Each AcrobatProcess As Process In tProcess
    AcrobatProcess.Kill()
Next 
```

请帮我找到解决这个问题的方法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:48:46.610

我想出了一个类似的解决方案。您可以查看我的示例（下面的链接），它可能会对您的情况有所帮助。记录所有打开的 acrobat 文档，然后杀死并重新打开它们。然后，用户可以手动关闭每个文档，而 Acrobat 不会挂起。它可能不是最好的解决方案，但它是一个可行的解决方案。

[VB.Net / Acrobat - 用户手动退出程序后 Acrobat 挂起](https://stackoverflow.com/questions/10884104/vb-net-acrobat-acrobat-hangs-after-user-manually-exits-program)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:36:08.670

确认所有对象都已释放。我在使用 C# 编写的实用程序中遇到了同样的问题，该实用程序使用该方法合并 pdf并通过界面`PDDoc InsertPages`添加书签。`JSObject`

我发现一旦我释放了存储我的对象`bookmarkRoot`，Acrobat.exe 进程将在最后一个对象被释放后释放。我不必终止该进程。

# css - 浮动：左悬停效果。我希望它居中，但由于 float:left 它保持在左侧

> ID：10858540
> 
> 赞同：0
> 
> 时间：2012-06-01T23:28:27.237
> 
> 标签：css, hover

我如何让我的链接保持中心。我想把它放在我的容器上方。它一直向左走。如果我改变浮动它会停止跳跃效果。我尝试设置边距，但无济于事。请帮助我想要跳跃悬停效果，但我不希望它向右或向左，而是在中心。除了我下面的代码之外，有谁知道让我的链接在悬停时跳转的另一种方法。

```
 A.main:link, A.main:active, A.main:visited{
         font-family: arial narrow; 
         color: #404040; 
         font-size: 20px; 
         text-align: center; 
         letter-spacing: 5px; 
         text-transform: lowercase; 
         font-weight: normal;
         border:double;
         float: left;
         margin: 15px;
         -webkit-transition: margin 0.5s ease-out;
         -moz-transition: margin 0.5s ease-out;
         -o-transition: margin 0.5s ease-out;
          }

      A.main:hover {
         margin-top: 2px;
         }

           #container {
             margin: 0px auto;
           padding-left:15px;
           width: 800px;
           height: auto;
           background: #000;
           border-style:double;
           box-shadow: 15px 15px 5px #333;
          -moz-box-shadow: 10px 10px 5px #333;
          -webkit-box-shadow: 10px 10px 5px #333;}

         </head> 
         <body>

           <div id="header">
         </div>
          <center>
            <a href="file:///C|/Users/JESS/Desktop/URL" class="main">LINK</a>
            <a href="file:///C|/Users/JESS/Desktop/URL" class="main">LINK</a>
            <a href="file:///C|/Users/JESS/Desktop/URL" class="main">LINK</a>
            <a href="file:///C|/Users/JESS/Desktop/URL" class="main">LINK</a>
            <a href="file:///C|/Users/JESS/Desktop/URL" class="main">LINK</a>
            <a href="file:///C|/Users/JESS/Desktop/URL" class="main">LINK</a>
            </center>

            <div id="container">

            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T23:53:26.080

在菜单中添加一个未排序的列表和 li 项。然后将 text-align:center 添加到 ul 并将 display:inline 或 inline-block 添加到 li。这是一个关于它的小提琴。[http://jsfiddle.net/XhmGe/](http://jsfiddle.net/XhmGe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T23:56:27.000

尝试操作填充而不是边距。

```
 A.main:link, A.main:active, A.main:visited{
...
         margin: 0 15px 15px;
         paddding-top:15px;
...
}
     A.main:hover {
         padding-top: 2px;
         } 
```

如果这不起作用，您可以重写代码如下：

抛弃“中心”元素。将其替换为 div。将此 div 的样式设置为“位置：相对”。如果需要，将样式指定为“text-align:center”。

用 span 元素替换每个链接。为每个 span ="document.location=你想去的 url" 指定 onclick。在每个跨度的 CSS 中，使用绝对定位。然后，您可以将它们放置在您喜欢的任何位置（使用样式中的左、右、上和/或下）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T00:21:50.917

我已经想出了一个代码来解决所有问题。这以我的标签为中心:)

```
 #centeredmenu {
             float:left;
             width:100%;
             background:#fff;
             overflow:hidden;
             position:relative;
                    }
          #centeredmenu ul {
             clear:left;
             float:left;
             list-style:none;
             margin:0;
             padding:0;
              position:relative;
             left:50%;
             text-align:center;
                 }
               #centeredmenu ul li {
                 display:block;
                 float:left;
                 list-style:none;
                 margin:0;
                 padding:0;
                 position:relative;
                 right:50%;
                         }
                #centeredmenu ul li a {
                  display:block;
                   margin:0 0 0 1px;
                  padding:3px 10px;
                  background:#ddd;
                  color:#000;
                  text-decoration:none;
                   line-height:1.3em;
                       }
                 #centeredmenu ul li a:hover {
                    background:#369;
                     color:#fff;
                         }
                #centeredmenu ul li a.active,
                #centeredmenu ul li a.active:hover {
                     color:#fff;
                      background:#000;
                      font-weight:bold;
                             } 
```

# javascript - 链接的外部文件中的 Firebug Javascript 语法错误导致文件被忽略

> ID：10858546
> 
> 赞同：0
> 
> 时间：2012-06-01T23:30:14.663
> 
> 标签：javascript, firebug

我无法让**FireBug**报告某些**Javascript**语法错误。我在此站点上看到了较早的讨论[，](https://stackoverflow.com/questions/3984507/how-to-check-javascript-syntax-error)并且我知道如何启用 Javascript 错误检查。但是，如果**链接的外部脚本文件中存在****语法**错误，FireBug 会直接删除整个文件而不加注释，甚至不会将该文件包含在其脚本列表中。语法错误应该是最容易检测和纠正的，但我只能退回到旧脚本并逐步添加代码，直到脚本无法加载，从而将我指向有问题的代码。每次对 FireBug 的评论都对它的调试能力赞不绝口，我知道我一定做错了什么，但是什么？钍

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:39:38.460

*   你能创建一些给你这种行为的简约代码吗？
*   您如何包含外部脚本、使用`<script src=".."></script>`XHR 或使用 XHR 加载它？
*   什么版本的 Firefox / Firebug？

确实，Firebug 不会在“脚本”面板中显示损坏的脚本，但在这两种情况下（脚本标签包括 / XHR 和 eval），您应该在控制台面板中收到一条带有语法错误的消息。

你`Console > Show JavaScript Errors`检查过吗？

![在此处输入图像描述](../Images/d6884388091a6def60563302fcc5c5b2.png)**

# java - 适配器设计模式 - 方法调用或构造函数中的依赖关系？

> ID：10858557
> 
> 赞同：1
> 
> 时间：2012-06-01T23:33:10.403
> 
> 标签：java, design-patterns, adapter

这个例子是高度做作的，所以请耐心等待。

我有两个 Java 类`Chair`和`Desk`，它们来自第三方（即我无法更改它们）。

```
public class Chair {
  //...
}

public class Desk {
  //...
} 
```

对于这些类中的每一个，我都需要运行一个方法`doWork()`，它取决于`DatabaseService`. 我的方法是创建一个`OfficeFurniture`为每个类实现接口的适配器。

```
public class ChairAdapter implements OfficeFurniture {
  //...
}

public class DeskAdapter implements OfficeFurniture {
  //...
}

public interface OfficeFurniture {
  public doWork(DatabaseService databaseService);
} 
```

最后，问题是：是传递调用更好，还是传递`DatabaseService`到`doWork()`构造函数中`ChairAdapter`并`DeskAdapter`在类字段中存储一个实例？还是有其他更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T23:46:54.183

这取决于适配器的客户端是否应该知道有关数据库服务的任何信息？可能不是，所以你把它放在构造函数中。如果客户端必须对数据库服务有所了解，那么传递它会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T23:45:23.600

如果`DatabaseService`该类是单例类或每个类只需要实例化一次，`Adapter`则传递给构造函数；特别是如果您在每个`Adapter`类中都有多个将使用该`DatabaseService`实例的方法。如果它会在调用之间发生变化，则将其传递给方法。

# php - php 文件模式正则表达式中的 preg_split php 函数

> ID：10858559
> 
> 赞同：0
> 
> 时间：2012-06-01T23:33:21.333
> 
> 标签：php, regex, pattern-matching, preg-split

> **可能重复：**
> [解析 PHP 代码以提取函数名称？](https://stackoverflow.com/questions/8446099/parse-php-code-to-extract-function-names)

我正在编写一个脚本来读取我的 PHP 文件并获取所有函数作为返回。

我`preg_split()`用来将我的文件拆分为一组函数。

我在编写模式以获取所有返回的函数时遇到问题（当函数名称包含“函数”一词时遇到问题。我愿意接受任何其他解决方案/建议。

预期输出：

```
array (
  0 => 'function write{$oneparam, $two, $three){return $two}',
  1 => 'function read{$oneparam, $two, $tthree){returne $awesome}',
  2 => 'function edit{$oneparam, $two, $three){return $two},
  3 => 'function delete{$oneparam, $two, $three){return $two}',
  4 => 'function lastfunction{$oneparam, $two, $three){return $two}'
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:41:30.413

您可以尝试这样的事情来捕获名称/声明：

```
#(function\s+\w+\(.*?\)#s 
```

或者这包括函数的主体（假设它们像您的示例一样在一行上）：

```
#(function\s+\w+\(.*?\)\s*{.*?})#s 
```

[它适用于您的所有测试用例](http://codepad.viper-7.com/h7uVQL)，并且没有任何示例输入或更多详细信息，我无法进一步详细说明。

# java - Java - 通过套接字传输时可序列化的图像是黑色的

> ID：10858563
> 
> 赞同：1
> 
> 时间：2012-06-01T23:33:46.600
> 
> 标签：java, image, sockets, awt, serializable

我通过 Java 中的套接字发送图像，当客户端和服务器都在一台计算机上时一切都很好，但是当我通过 LAN 运行它时，生成的图像是黑色的。我使用 Robot 类拍摄屏幕图像，然后使用 AffineTransform 将其缩小。客户端代码：

```
 BufferedImage s = null;
        socket = new Socket("AJ-PC", 4444);
        out = new ObjectOutputStream(socket.getOutputStream());
        Robot r = new Robot();
        while(true) {
              s = r.createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));
              double scale = 0.75;
              int w = (int) (s.getWidth() * scale);
              int h = (int) (s.getHeight() * scale);
              BufferedImage outImage = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);                
              AffineTransform trans = new AffineTransform();
              trans.scale(scale, scale);
              Graphics2D g = outImage.createGraphics();
              g.drawImage(s, trans, null);
              g.dispose();
              Thread.sleep(400);
              out.writeObject(new SerializableImage(outImage));
       } 
```

服务器代码：

```
 server = new ServerSocket(4444);
        socket = server.accept();
        System.out.println(socket);
        in = new ObjectInputStream(socket.getInputStream());
        while(running) {
            bi = (SerializableImage) in.readObject();
            b = true;
            System.out.println("new");
            panel.repaint();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:42:31.777

我正在使用来自[http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)的 PsExec 实用程序，这似乎是问题所在。当我不使用它来远程执行时，它运行良好。

# javascript - Twitter API 调用仅使用 javascript 获取 OAuth 的 access_token

> ID：10858566
> 
> 赞同：0
> 
> 时间：2012-06-01T23:34:18.553
> 
> 标签：javascript, cordova, oauth, twitter, twitter-oauth

我想弄清楚是否可以在一个简单的 ajax 调用中使用 Twitter OAuth 对用户进行身份验证。我需要使用 javascript，因为我正在使用 Phonegap 在 iOS 上构建应用程序。这是 Facebook 用于在该用户登录并授权应用后直接检索该用户的 access_token 的 api。

如果有的话，这个 API 调用的 Twitter 等价物是什么？

```
https://www.facebook.com/dialog/oauth?
    client_id=YOUR_APP_ID
   &redirect_uri=YOUR_REDIRECT_URI
   &scope=COMMA_SEPARATED_LIST_OF_PERMISSION_NAMES
   &response_type=token 
```

我已经尝试过应用 3 腿身份验证，当然无济于事。我不喜欢使用 pin 授权方法。

任何帮助将不胜感激，非常感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T00:11:28.880

xAuth 将[满足](https://dev.twitter.com/docs/oauth/xauth)您的需求。根据 Twitter 的说法，“xAuth 允许桌面和移动应用程序跳过 request_token 和授权步骤，并直接跳转到 access_token 步骤。” 唯一需要注意的是，您需要向 Twitter 请求许可才能让您的应用程序使用 xAuth。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T08:33:15.820

+1 为 Mark S，因为 xAuth 是用户体验和易于实施的一个引人注目的选项。如果你能得到 Twitter 的批准，我肯定会这样做。

[您还可以使用自定义 URL](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)注册您的 iOS 应用程序，您可以将其用作授权步骤的回调。这将允许您直接将 oauth_verifier 接收到您的应用程序，而无需通过用户输入 PIN。

另一个技巧是简单地从任何有效的回调中刮取 oauth_verifier。WebView 加载后，您可以检查 WebView 的 address 属性以获取 oauth_verifier 参数。一旦验证者是您的，您将能够获得访问令牌。

# javascript - 如何在 if 语句中正确表达条件

> ID：10858570
> 
> 赞同：0
> 
> 时间：2012-06-01T23:34:54.773
> 
> 标签：javascript, jquery, html, if-statement, conditional

好的，我需要一个 div 来`fadeIn`点击，但前提是没有播放视频，所以我认为 if 语句是要走的路。我想要它，这样只有在视频没有播放时才会发生淡入淡出。我不确定如何设置它。我试过

```
if($("#myVid") != "playing") {
            $("#MyT").fadeIn(0);
        } 
```

我大概是走投无路了。请问我能得到一些帮助吗？

aaaand，我正在使用 html5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:44:17.273

假设您使用的是 HTML5`<video>`标签，您可以使用以下代码来确定视频当前是否正在播放：

```
var elem = $('#myVid')[0]; // get the DOM element
if(!elem.ended && !elem.paused) {
    alert('playing');
} 
```

有关各种属性的描述，请参阅[https://developer.mozilla.org/en/DOM/HTMLMediaElement](https://developer.mozilla.org/en/DOM/HTMLMediaElement)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T23:47:43.467

试试这个：

```
var myvid = document.getElementById('myVid');
if (myvid.error) {
 switch (myvid.error.code) {
   case MEDIA_ERR_ABORTED:
      alert("You stopped the video.");
      break;
   case MEDIA_ERR_NETWORK:
      alert("Network error - please try again later.");
      break;
   case MEDIA_ERR_DECODE:
      alert("Video is broken..");
      break;
   case MEDIA_ERR_SRC_NOT_SUPPORTED:
      alert("Sorry, your browser can't play this video.");
      break;
 }
} 
```

[来源](http://www.chipwreck.de/blog/2010/03/01/html-5-video-dom-attributes-and-events/)

# c# - 当文件名有点“自由格式”时，有没有办法将文件名一致地转换为日期时间值？

> ID：10858574
> 
> 赞同：1
> 
> 时间：2012-06-01T23:35:52.667
> 
> 标签：c#, algorithm, parsing, datetime

假设文件名将始终包含嵌入其中的日期，但它不会是统一的，有没有办法解析这样的文件名并将文件名一致地转换为日期时间？

更具体地说，如果文件名始终具有相同的格式，例如：

“NNNNN.YYYY-MM-DD.log”

...这很容易。

但是，如果文件名可以是以下任何一种格式：

“NNN.YYYY-MM-DD.log”或“NNNNN.YYYY-MM-DD.txt”或“NNNNNNN.YYYY-MM-DD.bunyan”——甚至可能：“NNNNN.MM-DD-YYYY。 xlw" -and: "NNNNN.YYYY-DD-MM.zsj"

-- IOW，文件名总是包含以某种方式表示的日期，但除此之外，所有的赌注都没有了，有希望吗？还是没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T23:43:05.480

不，除非您可以将扩展名匹配到已知格式，否则没有希望。

有些天/月组合你会像 2012-12-31 一样幸运。显然，31 不是月份值，您至少可以推断出日/月/4 位数年份组合。

正如阿列克谢所提到的，2 位数的年份使问题进一步复杂化。

附带说明一下，这与 SQL Server 问题非常相似。在以不同的日期时间格式期望运行之前，这很好而且很花哨：

`SELECT CAST('2012-05-01' AS DATETIME)`

根据语言环境，这可能是 2012 年 5 月 1 日或 2012 年 1 月 5 日。（请参阅此线程：[由于语言环境而将字符串转换为日期时间时出错](https://stackoverflow.com/questions/10818796/error-converting-string-to-datetime-due-to-locale)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T23:43:13.063

不，如果您允许 YYYY-DD-MM 和 YYYY-MM-DD 对或 2 位数字表示年份，则这是不可能的。

什么是 10-11-12（YY-DD-MM、DD-MM-YY、....）？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T23:41:35.300

通过列表拆分字符串`-`并循环。如果您看到 3 个连续数字，则可能是命中。然后解析这些数字以获得日期。它不会捕获所有，但会捕获大部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T23:45:53.560

你必须做出*一些*假设才能到达我认为的任何地方。您的所有示例都采用 NNN.SOMEDATEFORMAT.EXTENSION 格式。DateTime.Parse 足够聪明，可以处理大多数（全部？）有效的日期/时间格式。试试这个;

```
string path = "123.2001-01-01.log";
string filename = Path.GetFileNameWithoutExtension(path);
int indexFirstSeparator = filename.IndexOf('.') + 1;
string datepart = filename.Substring(indexFirstSeparator);
DateTime dt = DateTime.Parse(datepart); 
```

# python - 在python的List中通过其成员查找对象

> ID：10858575
> 
> 赞同：22
> 
> 时间：2012-06-01T23:36:09.047
> 
> 标签：python, list, search, find

让我们假设以下简单对象：

```
class Mock:
    def __init__(self, name, age):
        self.name = name
        self.age = age 
```

然后我有一个包含一些对象的列表，如下所示：

```
myList = [Mock("Dan", 34), Mock("Jack", 30), Mock("Oli", 23)...] 
```

是否有一些内置功能可以让我获得所有年龄为 30 岁的 Mocks？当然我可以遍历他们并比较他们的年龄，但是像

```
find(myList, age=30) 
```

会好的。有没有类似的东西？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-01T23:44:32.920

您可能希望对它们进行预索引 -

```
from collections import defaultdict

class Mock(object):
    age_index = defaultdict(list)

    def __init__(self, name, age):
        self.name = name
        self.age = age
        Mock.age_index[age].append(self)

    @classmethod
    def find_by_age(cls, age):
        return Mock.age_index[age] 
```

**编辑：**一张图值一千字：

![在此处输入图像描述](../Images/b7ef476f2bbf97ecf44bfb05e5961d78.png)

X 轴是 myList 中的 Mocks 数，Y 轴是运行时间，以秒为单位。

*   红点是@dcrooney 的 filter() 方法
*   蓝点是@marshall.ward 的列表理解
*   隐藏在 X 轴后面的绿点是我的索引；-)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-06-01T23:39:21.557

你可以试试[filter()](http://docs.python.org/library/functions.html#filter)：

```
filter(lambda x: x.age == 30, myList) 
```

这将返回一个列表，其中仅包含那些满足 lambda 表达式的对象。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-06-01T23:40:30.973

列表推导可以选择这些：

```
new_list = [x for x in myList if x.age == 30] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-02T00:50:51.890

列表推导式几乎总是做这些事情的更快方法（这里的速度是 2 倍），尽管如前所述，如果您关心速度，索引会更快。

```
~$ python -mtimeit -s"from mock import myList" "filter(lambda x: x.age==21, myList)"
1000000 loops, best of 3: 1.34 usec per loop
~$ python -mtimeit -s"from mock import myList" "[x for x in myList if x.age==21]"
1000000 loops, best of 3: 0.63 usec per loop 
```

对于`mock.py`当前目录中的文件：

```
class Mock:
    def __init__(self, name, age):
        self.name = name
        self.age = age

myList = [Mock('Tom', 20), Mock('Dick', 21), Mock('Harry', 21), Mock('John', 22)] 
```

# javascript - 如何将 JSON 对象分解回具有关联方法的对象？

> ID：10858576
> 
> 赞同：1
> 
> 时间：2012-06-01T23:36:10.967
> 
> 标签：javascript, json, class, persistence

所以，我有一个 javascript 对象，我通过原型附加了几个方法。

那里不用担心。

现在，当我将该对象保存到 JSON 时，只保存实际的属性值。这很有意义。无论如何，您将如何坚持方法，对吗？

但是，当我取消 JSON 对象时，我当然会得到一个看起来像我的原始对象的对象，它根本不再有任何关联的方法。

我明白+为什么+会发生这种情况。

我的问题是，是否已经有某种模式来处理这种情况？

就我自己而言，我创建了一个名为[Classy classes for JS](http://classy.pocoo.org/)的小型 js 库，它允许您执行类似的操作。

```
var MyClass = Class.$extend({
  __init__ : function() { alert('called'); },
  toString() : function() {
    return this.value;
  })
});
var obj = MyClass.$withData({value: 42});
alert(obj.toString()); 
```

这 +does+ 工作，但我看不到一种方法可以轻松地将其应用于对象的深层层次结构。

编辑：我最初不是很清楚。我知道Classy（和jquery，正如我刚刚知道的那样）可以将数据应用于特定对象以融入原型方法，但真正的问题是如何为更深层次的对象做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T23:46:26.663

如果你有例如 jQuery，你可以使用`$.extend(obj, yourDataFromJSON);`

这会将来自第二个对象的所有数据合并到第一个对象中，覆盖现有值。

但是，根据[*Classy*代码](https://github.com/mitsuhiko/classy/blob/master/classy.js#L149)，您实际上`MyClass.$withData(yourDataFromJSON);`甚至可以简单地用于嵌套数据：

```
for(var key in data) {
    var value = getOwnProperty(data, key);
    if(value !== undefined) rv[key] = value;
} 
```

如您所见，所有 from`data`都被放入对象中——无论它是另一个对象（如果您有嵌套数据）、数组还是其他任何不存在的对象（`undefined`甚至在 JSON 中都不存在）

# javascript - 错误：严格验证失败

> ID：10858580
> 
> 赞同：0
> 
> 时间：2012-06-01T23:37:38.797
> 
> 标签：javascript, google-apps-script

我正在尝试从 doGet() 函数访问电子表格，该函数在从表单提交中获取电子邮件的用户单击链接时执行。我想我不能从 doGet() 调用 getActiveSpreadsheet。所以我通过链接发送了电子表格ID以及行号，然后通过openById调用了我需要的电子表格，但是当我这样做时，我得到一个奇怪的错误“strictValidationFailed”。就是这样，这就是关于错误的全部内容。它没有给出任何行号。或错误类型。似乎自从我开始使用 openById 功能时开始出现此错误以来，该错误可能与此有关。我在下面附上了与​​此相关的代码片段。

```
function onFormSubmit(event) { //On form submission send an email to the approver. 
var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
var approvalsheet = spreadsheet.getSheetByName("Approval Worksheet");
//Get values that have to be put on the email.
var timestamp = event.values[0]; 
var username = event.values[1]; 
var campus = event.values[2];
var gltype = event.values[3]; 
var fullname = event.values[4];
var eMailAdd = event.values[5];
var description = event.values[6];
var replacement = event.values[7];
var usage = event.values[8];
var members = event.values[9];
var notes = event.values[11];
var initialowner = event.values[12];
//The service url that is required for approval on the email.
var serviceurl = //hiding the service URL
serviceurl+='&spreadsheetId='+spreadsheet.getId();
serviceurl+='&row='+approvalsheet.getLastRow();
//Setting the message that goes on the email sent to the approver.
var message = 'There is a new Submission to the UAF List or Group aprooval  Workflow\n\n\n'+'You can aproove this request here: '+serviceurl+
  '\n\nTime of Submission: '+timestamp+'\n\nSubmitter Username: '+username
  +'\n\nCampus: '+campus+'\n\nFull Name: '+fullname+'\n\nMiddle Portion of Email Address: '+eMailAdd
  +'\n\nDescription of the List/Group: '+description + '\n\nIs this replacing an existing eMail List or Group? '
  +replacement+'\n\nUsage: '+usage+'\n\nAnticipated number of members: '+members+'\n\nBrief notes about the request :'
  +notes+'\n\nAre you the initial owner :'+initialowner;
//Title for the mail sent.
var title = 'New Submission at '+timestamp;
//Email address for the approver that gets the submission notification.
var mailAdd = 'rssimon@alaska.edu'
//Sending Email to the approver.    
MailApp.sendEmail(mailAdd, title, message);
}

function doGet(e) //On hitting approve button in the mail.
{
//retrieving spreadsheet ID from the approval link.
var spreadsheet = SpreadsheetApp.openById(e.parameter['spreadsheetId']);
//if (spreadsheet != null) {
var approvalsheet = spreadsheet.getSheetByName("Approval Worksheet");
//}
var row = e.parameter['row'];//retreiving row value that came from the approval link.
//if(spreadsheet!=null)
//{
approvalsheet.getRange(row, 17).setValue('Yes');//Setting the approval value on the spreadsheet to Yes.
approvalsheet.getRange(row, 17).setBackground('White');//Setting the approval box color to white.
//}
//Creating UiApp for approval notification.
var app = UiApp.createApplication(); //Create an instance of UiApp
var label = app.createLabel(); //Create a lable on the UiApp
label.setText('The list or group was approved');//Set text on the Label.
app.add(label);//Add label to the UiApp instance.
return app;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:04:42.563

该错误似乎与电子表格中的数据验证有关。您能否检查以确保您尝试写入电子表格的值没有违反任何数据验证规则？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T03:07:36.277

我已经测试了您的代码（doGet 部分），它对我来说效果很好。你确定你正在运行这个吗？

无论如何，尝试将所有内容包装在 try-catch 中并解析错误堆栈跟踪，它可能会有所帮助，例如

```
function doGet(e) {
  try {
    //all your spreadsheet code
  } catch(err) {
    stack = parseErr_(err);
    if( !app ) //maybe the error is after you've "createApplication"
      app = UiApp.createApplication();
    return app.add(app.createLabel(stack));
  }
}

//Try to parse errors stacktrace into a nicer format
function parseErr_(e) {
  var ret;
  if( e !== undefined && e !== null && e.stack ) {
    ret = e.name +': '+e.message+' \nStacktrace: \n';
    var stack = e.stack.replace(/\n/g,'').match(/:\d+( \([^\)]+\))?/g);
    for( var i in stack )
      ret += stack[i].replace(/[\(\):]/g,'').split(/ /).reverse().join(':') + ' \n';
  } else
    ret = e;
  return ret;
} 
```

# ruby-on-rails - 带有 simple_form 的按钮内的 HTML 代码

> ID：10858582
> 
> 赞同：36
> 
> 时间：2012-06-01T23:37:56.487
> 
> 标签：ruby-on-rails, ruby, twitter-bootstrap, simple-form

我是 Rails 新手，刚刚发现了 simple_form gem。我用引导支持安装了它，但现在我无法让这段代码按照我想要的方式工作

```
<%= f.button :submit, "<i class='icon-ok icon-white'></i> Save", class: "btn btn-primary" %> 
```

我只想将图标放在按钮内，但是当我这样做时，它会向我显示一个带有文本'<i class='icon-ok icon-white'></i> Save'的按钮

我也尝试过

```
<%= f.button :submit, class: "btn btn-primary" do %><i class="icon-ok icon-white"></i> Save<% end %> 
```

但没有成功。如何使用 simple_form gem 在按钮内添加一些 HTML？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-05T14:24:33.607

不要使用 content_tag。以下作品：

```
 <%= button_tag(type: 'submit', class: "btn btn-primary") do %>
    <i class="icon-ok icon-white"></i> Save
  <% end %> 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-08-28T13:14:56.880

在 simple_form 3.0rc 中使用 :button 按钮类型（它将您的块传递给原始 ActiveView 按钮助手）：

```
<%= f.button :button do %>
  <i class="icon-save"></i>
  Commit
<% end %> 
```

或者编写额外的按钮包装器。

有关其他信息，请查看 simple_form/form_builder.rb FormBuilder#button 方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-02T02:09:34.050

I think you can't do it with simple_form. But I have good news for you. You should be fine using rails helper along side with simple form.

just do

```
button_tag(type: 'submit', class: "btn btn-primary") do
  content_tag(:i, class: "icon-ok icon-white")
  "Save"
end 
```

Not sure if this works, even the syntax but it should give you a hint

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-17T01:51:48.493

### 在带有引导 btn 类的 Rails 中，一行示例提交按钮：

```
<%= button_tag(type: 'submit', class: "btn btn-primary") do %> Save <% end %> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-25T13:34:44.640

您可以使用以下代码执行此操作：

```
= f.button :button, 'Send', data: { disable_with: "<i class='fi-heart'></i> Sending..." } 
```

请注意，您要使用，`f.button`而不是`f.submit` 另请注意，`:button`需要成为第一个参数`f.button`

# c++ - C/C++ 中某些头文件中的 sys/type.h

> ID：10858583
> 
> 赞同：4
> 
> 时间：2012-06-01T23:38:41.257
> 
> 标签：c++, c

我遇到了包含头文件的问题，该文件具有`sys/type.h`. 当我使用它编译时`g++`，`gcc filename.cpp`它总是向我显示错误：`sys/type.h, no such a file or directory`. 很困惑。有人能帮我吗？

```
#include<stdio.h>
#include<sys/type.h>
#include<unistd.h>

int main()
{

        pid_t child_pid;

        printf("the main program ID is %d\n", (int)getpid());

        child_pid = fork();

        if (child_pid != 0) {
                printf("This is the parent process, with id %d\n",
                       (int)getpid());
                printf("the child's process ID is %d\n", (int)child_pid);
        } else {
                printf("this is the child process, with id %d\n",
                       (int)getpid());
        }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T23:42:21.530

它应该`<sys/types.h>`带有's'

# java - Android缩放和触摸问题

> ID：10858585
> 
> 赞同：0
> 
> 时间：2012-06-01T23:39:13.923
> 
> 标签：java, android, ontouchlistener, onclicklistener

我正在开发一个允许用户将图像上传到我的服务器的 android 应用程序。在选择屏幕上，我允许他们使用双指缩放来缩放图像，然后他们通过点击它来选择图像。我在实现它时遇到了两个问题。

我遇到的第一个问题是当我使用 an`OnClickListener`来检测图像何时被点击时。只要我的手指在图像上，这就会阻止我放大或缩小图像。我是这样实现的：

```
setOnClickListener(new OnClickListener()
{
    public void onClick(View arg0) 
    {
        ToggleSelection();
        invalidate();
    }
}); 
```

因为我希望他们即使用手指在图像上仍然能够缩放图像，所以我决定采用我的第二种方法。我添加了一个`OnTouchListener`。

```
setOnTouchListener(new OnTouchListener()
{
    public boolean onTouch(View v, MotionEvent event) 
    {
        int i = event.getAction();
        Log.d("TouchInfo123","Event action: " + i);
        switch(i & MotionEvent.ACTION_MASK)
        {
        case MotionEvent.ACTION_UP:
        {
            ToggleSelection();
            invalidate();
            break;
        }
        }
        return false;
    }
}); 
```

然后我注意到`event.getAction()`总是返回 0，即`MotionEvent.ACTION_DOWN`. 所以我转而听`MotionEvent.ACTION_DOWN`哪个有效。有点儿。

我现在遇到的问题是，当我去缩放图像时，如果我的手指触摸其中一个图像，它会切换选择，这真的很烦人。

我希望能够做以下两件事之一：

使用`OnClickListener`但允许我`ScaleGestureDetector`缩放图像，即使我的手指正在触摸图像

**或者**

使用the 进行`OnTouchListener`工作，`MotionEvent.ACTION_UP`以便我知道它们在触发触摸事件时不会缩放。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T00:24:51.280

我设法解决了这个问题。我无法获得的原因`MotionEvent.ACTION_UP`是因为我总是返回 false 所以我没有消费该事件。我这样做是为了让它像我预期的那样工作

```
boolean mouseDown = false;

public boolean onTouchEvent(MotionEvent event) 
{
    switch(event.getAction() & MotionEvent.ACTION_MASK)
    {
    case MotionEvent.ACTION_UP:
    {
        if(mouseDown)
        {
            ToggleSelection();
            invalidate();
            mouseDown = false;
        }
        break;
    }
    case MotionEvent.ACTION_OUTSIDE:
    case MotionEvent.ACTION_CANCEL:
    case MotionEvent.ACTION_POINTER_DOWN:
    case MotionEvent.ACTION_POINTER_UP:
    {
        mouseDown = false;
        break;
    }
    case MotionEvent.ACTION_DOWN:
    {
        mouseDown = true;
        return true;
    }
    }
    return false;
} 
```

# asp.net-mvc - Unable to get TinyMCE working with jQuery Unobtrusive Validation

> ID：10858591
> 
> 赞同：2
> 
> 时间：2012-06-01T23:40:41.800
> 
> 标签：asp.net-mvc, jquery-validate, tinymce

I've got a form that's using unobtrusive validation and works as expected for all of my fields but once I added TinyMCE (or any other WYSIWYG editor) the textarea it uses gets hidden and is preventing the field from being included in client-side validation. Is there a way I could hook into the validation to include this hidden field, or maybe a different way to hide the textarea so it gets validated before the post back?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T23:59:09.337

I had the same issue this week. Ended up solving it with this:

```
// sync tinymce content to validate before submitting form
$('form input[type=submit]').click(function () {
    tinyMCE.triggerSave();
}); 
```

...we also use the save plugin, but in order to get it to trigger validation, had to put this in the TinyMCE editor template:

```
function onSavePluginCallback(ed) {
    var form = $(ed.formElement);
    var isValid = form.valid();
    if (isValid) {
        form.submit();
    }
}

(function () {

    tinyMCE.init({
        ...
        save_onsavecallback: 'onSavePluginCallback',
        ... 
```

**Update**

That does make sense that the textarea isn't being unobtrusively validated while it's hidden. I forgot to add another piece of javascript I had to make this work:

```
$.validator.setDefaults({
    ignore: ''
}); 
```

By default, jquery validate ignores fields that are not visible. The default value for the ignore parameter is ':hidden'. By setting it to an empty string, you are telling jquery validate to not ignore hidden inputs.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T06:01:56.057

What I came up with for now is to unhide the `textarea` and then float it off screen. Then following what @danludwig said I trigger the save event on submit.

```
$(function () {
    var tinymce = $('#Content');
    tinymce.tinymce({
        setup: function (e) {
            e.onInit.add(function () {
                tinymce.css({
                    position: 'absolute',
                    height: 0,
                    width: 0,
                    top: -100
                }).show();
            });
        }
    });

    $('form input[type=submit]').click(function () {
        tinyMCE.triggerSave();
    });
}); 
```

I'm also using [Bootstrap](http://twitter.github.com/bootstrap/base-css.html#forms) so to get this fully working with jQuery Validate/Unobtrusive Validation I added in the following to the top of my page.

```
// makes form field highlighting work with bootstrap's css
$.validator.setDefaults({
    highlight: function (element, errorClass, validClass) {
        $(element).closest('.control-group').addClass('error');
    },
    unhighlight: function (element, errorClass, validClass) {
        $(element).closest('.control-group').removeClass('error');
    }

});
$(function () {
    // makes form field highlighting work with bootstrap's css on post backs
    $('.input-validation-error').each(function (i, element) {
        $(element).closest('.control-group').not('.error').addClass('error');
    });
}); 
```

And to get the TinyMCE editor highlighted when there's an error I added this to my stylesheet.

```
.control-group.error table.mceLayout,
.control-group.error table.mceLayout tr.mceFirst td,
.control-group.error table.mceLayout tr.mceLast td {
    border-color: #b94a48;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T15:46:27.530

In my situation: tinyMCE 4, Bootstrap 2.3.1 and jQuery validate 1.9 this is what works:

```
$('#form1').data('validator').settings.ignore = ''; 
```

Make sure to put that line inside your document ready function. Reason for that is because I have other forms on the same page that need to continue to work with the default: do not validate ':hidden' fields. Check [jQuery Validate - Enable validation for hidden fields](https://stackoverflow.com/questions/8466643/jquery-validate-enable-validation-for-hidden-fields) for a full explanation.

And the css for bootstrap and the new version of tinyMCE will be something like this:

```
.control-group.error .mce-panel {
border-color: #b94a48;
-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
-moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-17T17:14:05.260

I tried this solution as well as a few other similar ones and was unable to get any of them to work and this is what I came up with instead. It isn't a perfect solution but does the job I needed. I did not add any other additional code to the page.

```
$('form button[type=submit]').not('.cancel').click(function () {
  var form = $('#FormName');
  var isValid = form.valid();
  var istinymceValid = $('#ContentField').valid();
  if (!isValid || !istinymceValid) {
    return false;
  }
  return true;
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-21T11:23:06.653

This worked for me...

```
 $(function () {
        var myForm = $('#MyFormId');

        $.data(myForm[0], 'validator').settings.ignore = "null";

        tinymce.init({
            selector: '.MyTextareaClass',
            height: 200,
            setup: function (editor) {
                editor.on('keyUp', function () {
                    tinyMCE.triggerSave();

                    if (!$.isEmptyObject(myForm.validate().submitted))
                        myForm.validate().form();
                });
            },
            relative_urls: false,
            theme: "modern",
            plugins: [
                "advlist autolink lists link image charmap print preview hr anchor pagebreak",
                "searchreplace wordcount visualblocks visualchars code fullscreen",
                "insertdatetime media nonbreaking save table contextmenu directionality",
                "template paste"
            ],
            paste_as_text: true,
            toolbar1: "undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | print preview"
        });
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-09T16:55:54.563

Things have probably changed since previous answers to this were written as it's a very old question, but then again my solution just drew on what's already been written and simplified it. Assuming your text field using TinyMCE only needs to be validated when the form is being submitted and not on each key press, this will work.

1.  Add a CSS class to the textarea that's going to be replaced with a TinyMCE editor:

```
<textarea id='myTextArea' class='hidden-by-tinymce' rows='10'></textarea> 
```

2.  Modify the configuration of the jQuery validation so that your textarea is not ignored, as per [the docs](https://jqueryvalidation.org/validate/#ignore):

```
$.validator.setDefaults({
    ignore: 'hidden:not(.hidden-by-tinymce)'
}); 
```

3.  Make sure you call the `triggerSave()` method of the TinyMCE editor when your form is submitted:

```
$('#myForm').submit(function(e) {
    e.preventDefault();
    tinyMCE.triggerSave(); // this is the key to making sure the TinyMCE editor is validated
    let $form = $(this);
    let isValid = $form.valid();
    if (isValid) {
        $form.submit();
    }
}); 
```

That was all I needed.

# iphone - 使用 UIBackgroundModes 在后台模式下运行代码

> ID：10858598
> 
> 赞同：1
> 
> 时间：2012-06-01T23:41:43.743
> 
> 标签：iphone, objective-c, ios, cocoa-touch

有没有人尝试使用`UIBackgroundModes`注册任何网络的东西？即使我的应用程序在后台或设备处于睡眠状态，我也想继续运行我的服务器获取代码并根据服务器响应播放一些声音。

对此有任何线索，使用它会有什么影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:24:33.073

如果您使用`UIBackgroundModes`声明您的应用程序用于 VoIP 并注册一个定期的 keepalive 处理程序，您可以在后台执行几乎任何您想要的操作。但是除非你真的是一个 VoIP 应用程序，否则你不会用它进入 App Store。请参阅[文档](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)以了解在后台允许哪些类型的东西，哪些不是。

# three.js - 如何确定平面是否在 Three.js 相机 Frustum 中

> ID：10858599
> 
> 赞同：11
> 
> 时间：2012-06-01T23:41:45.223
> 
> 标签：three.js

如果飞机在相机的视锥体内，我很难制作一个返回 true 的函数。我[在 github 上](https://github.com/mrdoob/three.js/issues/1209)找到了这篇文章，但无论对象是否在截锥体中，配方总是返回 false。

有人已经智能地实现了这一点吗？非常感谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-02T00:38:06.650

也许矩阵没有更新？

```
camera.updateMatrix(); // make sure camera's local matrix is updated
camera.updateMatrixWorld(); // make sure camera's world matrix is updated
camera.matrixWorldInverse.getInverse( camera.matrixWorld );

plane.updateMatrix(); // make sure plane's local matrix is updated
plane.updateMatrixWorld(); // make sure plane's world matrix is updated

var frustum = new THREE.Frustum();
frustum.setFromMatrix( new THREE.Matrix4().multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse ) );
alert( frustum.contains( plane ) ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-03T00:47:29.597

如果我错了，请纠正我，但为什么要第二次计算截锥体？

我正在从事一个复杂的项目，而接受的答案对我来说并不是最好的解决方案。我认为没有必要重新计算 aleady 的计算结果。出于我的目的，我修改了我的 three.js 的副本，如果在截锥体中检测到某些东西，我会提出一个标志。稍后只需检查您的对象 if object.inFrustum === true

下面一行

```
if ( webglObjects && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) { 
```

添加

```
object.inFrustum = true; 
```

还在 if 块结束的地方添加一个相反的标志

```
else {
    object.inFrustum = false;
} 
```

我在 r70 中的最终结果完美运行：

```
if ( webglObjects && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) {

    object.inFrustum = true; // The line to add

    for ( var i = 0, l = webglObjects.length; i < l; i ++ ) {

        var webglObject = webglObjects[i];

        unrollBufferMaterial( webglObject );

        webglObject.render = true;

        if ( _this.sortObjects === true ) {

            _vector3.setFromMatrixPosition( object.matrixWorld );
            _vector3.applyProjection( _projScreenMatrix );

            webglObject.z = _vector3.z;

        }

    }

} else { // Create second condition like that
    object.inFrustum = false;
} 
```

# django - Django 基本网址：example.com

> ID：10858600
> 
> 赞同：0
> 
> 时间：2012-06-01T23:42:13.360
> 
> 标签：django, url-routing

如何在我的 urls.py 中捕获以下两个 url？

```
example.com
example.com/ 
```

现在我正在做：

```
from django.conf.urls import patterns, url, include

urlprefix = 'websites.app'
urlpatterns = patterns(urlprefix,
        (r'index/$', 'public.views.index'), # landing page
        ) 
```

如果我添加：

```
 (r'$', 'public.views.index'), # landing page 
```

作为一个包罗万象，然后它得到所有规则。我只是希望它在有斜杠或基本 url 之后没有任何内容时进入索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:00:54.263

`(r'^$', 'public.views.index'), # landing page`

然后在[settings](https://docs.djangoproject.com/en/dev/ref/settings/#append-slash)`APPEND_SLASH`中设置为true 。

# jquery - Jquery Mobile 水平按钮

> ID：10858604
> 
> 赞同：1
> 
> 时间：2012-06-01T23:42:43.790
> 
> 标签：jquery, jquery-mobile

啊，其中一个让我头疼。

[http://jsfiddle.net/jmHTc/41/](http://jsfiddle.net/jmHTc/41/)

三个按钮应该是内联的，代码看起来不错，但我不能让它们每个都不在一条线上……有人知道吗？

jQuery 移动 1.1.0。

一如既往的感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T23:51:41.430

放弃列表视图。

```
<div data-role='controlgroup' data-type="horizontal">
    <a href='?page=tickets&igstatus=0' data-role='button' data-transition='fade'>New</a>
    <a href='?page=tickets&igstatus=1' data-role='button' data-transition='fade' class='ui-btn-active'>Pending</a>
    <a href='?page=tickets&igstatus=2' data-role='button' data-transition='fade'>Closed</a>
</div> 
```

# php - 从安全网站获取特定数据

> ID：10858605
> 
> 赞同：1
> 
> 时间：2012-06-01T23:42:49.583
> 
> 标签：php, javascript, asp.net, curl, information-retrieval

我有几个网站，我会定期查看这些网站以比较产品价格。Atm 我必须手动登录并在每个网站上通过产品 ID 进行搜索才能获取产品详细信息（价格）。

一段时间后，这既费时又无聊。

我正在考虑制作一个 Web 应用程序，我可以在其中使用我的登录凭据进入所有这些网站。我只需要输入一个产品 ID，我的 webapp 就应该从这些网站获取所有结果并以可比较的方式显示它们。

我不会假设这些网站有 API，所以我正在寻找解决这个问题的最佳方法。我认为这不是那么简单，因为我需要登录 + 搜索产品。

关于我如何做到这一点的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T02:03:54.667

+1 to Marc B's comment. If the TOS doesn't explicitly forbid it (and since this would also be considered a crawler), you should see if `/robots.txt` disallows you from accessing the product search. If neither forbid you, I would suggest using a browser-based bot to fetch results for you, simply because it sounds more practical and you wouldn't have to deal with cookies.

If you want to make the page requests with PHP, though, I would direct you to [HttpRequest](http://www.php.net/manual/en/class.httprequest.php). Have a page where you can log into all the sites (using a POST request right on the login scripts), and keep the session cookies returned handy. When you search the product pages, identify what part of the HTML consistently returns the list of products after it (a regex may be helpful), and create an algorithm (which should be different for every website you want to scrape) that returns information about the product. Then compare the results!

# mongodb - MongoDB 中删除了多少文档

> ID：10858608
> 
> 赞同：2
> 
> 时间：2012-06-01T23:43:06.100
> 
> 标签：mongodb, spring-data

使用 Spring Data (1.1.0.M1) 有没有办法确定删除了多少文档？

目前我在类上使用该[`remove()`](http://static.springsource.org/spring-data/data-mongodb/docs/1.1.0.M1/api/org/springframework/data/mongodb/core/MongoTemplate.html)方法`MongoTemplate`，但它不返回任何关于操作的信息。

如果没有通过`MongoTemplate`，是否有其他方法可以删除文档并找出删除了多少？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T02:46:38.590

当您在 MongoDB 中写入文档（包括删除）时，您可以调用[getLastError()](http://www.mongodb.org/display/DOCS/getLastError+Command)来查看您上次写入操作的效果。

您遇到的问题是，当没有错误时，您仍然想知道有多少对象（文档）受到您的操作的影响。

在 shell 中，您可以通过检查返回的对象来查看详细信息`getLastErrorObj()`。在 Java 中，Mongo Java 驱动程序提供了等效的[方法。](http://api.mongodb.org/java/2.6/com/mongodb/WriteResult.html#getN%28%29)

在删除操作的情况下，该字段`"n"`将对应于受影响文档的数量。这是一个示例的一小部分：

```
import com.mongodb.WriteResult;
...
   WriteResult wr = collection.remove(new BasicDBObject());  // removes everything
   System.out.println(wr.getN());        // prints the number of removed documents 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T23:53:34.063

我对 MongoDB 没有太多经验，因为我是新手，不确定我要推荐的内容是否适用于您的情况。将标志 safe=true 传递给查询时，它会返回一个键“n”，该键显示查询中受影响的行数。你应该调查一下。。

# http - 如果 HTTP 请求发生并且 intrent 连接丢失会发生什么？

> ID：10858610
> 
> 赞同：0
> 
> 时间：2012-06-01T23:43:25.113
> 
> 标签：http, httpclient

假设我们`http client`在中间请求如果互联网连接丢失他们会发生什么。

假设我们正在使用 android java

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T23:50:24.000

取决于您感兴趣的[特定 OSI 层](http://en.wikipedia.org/wiki/OSI_model)。在大多数情况下，客户端库实现（或预期实现）*TCP 超时*错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T23:46:00.667

HTTP 是少状态。因此，根据发出请求的软件是什么，它不会收到回复。所以它必须决定什么时候做什么。

# extjs - 如果存储被缓冲，加载方法不会加载任何东西

> ID：10858619
> 
> 赞同：0
> 
> 时间：2012-06-01T23:44:47.337
> 
> 标签：extjs, extjs4

我试图检测存储中何时加载了某些内容，但是我刚刚发现，如果存储被缓冲，则在调用加载时一切正常，除了数据没有直接加载。

我可以很容易地禁用缓冲来测试它（一切都正常了），所以我不明白如何像网格一样触发加载调用。

我需要加载我的记录，有什么办法吗？是的，无论如何我都可以禁用“缓冲”，但如果网格可以加载我的商店，我应该也可以加载。哪个是正确的使用方法？

我用 loadPage 和 loadData 做了一些测试，但它们不起作用。有谁知道在使用缓冲存储时我应该使用哪种方法在存储上加载数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T02:44:04.533

我认为这是一个设计决策，将使用预取方法。

但是，我目前建议避免使用缓冲存储。似乎它们没有经过广泛的测试，并且会给您带来组合框的问题（如果存储被缓冲，实际上没有分页系统，也会显示问题）和其他类似的事情。

# html - Yii - CActiveForm - 附加表单属性

> ID：10858626
> 
> 赞同：4
> 
> 时间：2012-06-01T23:45:50.487
> 
> 标签：html, css, jquery-mobile, yii

我需要将 data-ajax = "false" 属性传递给表单。jQuery Mobile 需要此属性以使其停止使用 Ajax 加载页面。

这是我的代码：

```
<div class="form">
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'login-form',
    'enableClientValidation'=>true,
    'clientOptions'=>array(
        'validateOnSubmit'=>true,
    ),  
    'focus'=>array($model,'username'),
    'data-ajax'=>false,
)); ?>

......

<?php $this->endWidget(); ?>
</div><!-- form --> 
```

所以我的 html 输出看起来像这样：

```
<form id="login-form" method="post" action="/*********" data-ajax ="false"> 
```

不幸的是，我得到了一个 CException “未定义属性“CActiveForm.data-ajax”。” 错误。我错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T23:51:21.800

通过添加解决了这个问题

```
'htmlOptions' => array("data-ajax"=>"false")

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'login-form',
    'enableClientValidation'=>true,
    'clientOptions'=>array(
        'validateOnSubmit'=>true,       
    ),  
    'htmlOptions' => array("data-ajax"=>"false"),
    'focus'=>array($model,'username'),

)); ?> 
```

# javascript - 函数是 javascript 对象属性的有效键吗？

> ID：10858632
> 
> 赞同：16
> 
> 时间：2012-06-01T23:46:48.553
> 
> 标签：javascript

我想将函数用作 javascript 对象中的键。以下工作，至少在 Chrome 中：

```
var registry = {};
function Foo(){  };
function Bar(){  };
registry[Foo] = 42;
registry[Bar] = 43;
alert(registry[Foo] + " < " + registry[Bar]); 
```

这是否包含在标准中？支持哪些浏览器？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-01T23:51:47.657

您放在方括号之间的所有内容都会转换为字符串，即使您放置了一个函数、一个日期、一个正则表达式，也会发生这种情况......所以，您实际上是在创建一个像这样的对象：

```
var registry = {
    "function Foo(){  }" : 42,
    "function Bar(){  }" : 43
}; 
```

这是默认行为，如果您想知道，它也适用于 IE。它实际上被 John Resig 在他[著名的`addEvent`功能](http://ejohn.org/projects/flexible-javascript-events/)中利用了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-02T00:02:28.310

> **ECMAScript 5.1 - 第 11.2.1 节：**
> 
> 生产`MemberExpression : MemberExpression [ Expression ]`评估如下：
> 
> 1.  让 baseReference 成为评估 MemberExpression 的结果。
> 2.  让 baseValue 为 GetValue(baseReference)。
> 3.  让propertyNameReference 成为计算Expression 的结果。
> 4.  让 propertyNameValue 为 GetValue(propertyNameReference)。
> 5.  调用 CheckObjectCoercible(baseValue)。
> 6.  **让 propertyNameString 为 ToString(propertyNameValue)。**
> 7.  如果正在评估的语法产生包含在严格模式代码中，则让 strict 为真，否则让 strict 为假。
> 8.  返回一个 Reference 类型的值，其基值为 base Value ，其引用名称为 propertyNameString ，其严格模式标志为 strict。

所以在使用时`obj[whatever]`，`whatever`会转换为字符串。对于函数，这将是一个包含函数源代码的字符串。

例子：

```
js> var func = function() { return 'hi'; };
js> function helloworld() { return 'hello world'; }
js> var obj = {};
js> obj[func] = 123;
js> obj[helloworld] = 456;
js> obj
({'function () {\n    return "hi";\n}':123,
  'function helloworld() {\n    return "hello world";\n}':456
}) 
```

# objective-c - 启用静音开关时如何在 iOS 上播放声音

> ID：10858640
> 
> 赞同：1
> 
> 时间：2012-06-01T23:47:40.170
> 
> 标签：objective-c, ios, avaudiosession

> **可能重复：**
> [即使在静音模式下也能在 iPhone 上播放声音](https://stackoverflow.com/questions/3740528/play-sound-on-iphone-even-in-silent-mode)

我正在尝试播放短声音（表示计时器完成）并将其实现为系统声音。由于我的应用程序是一个计时器，因此即使启用了静音开关，我也希望声音可以听到。

```
// Load the sound

NSString *path = [[NSBundle mainBundle] pathForResource:@"tinshaw"
                                                 ofType:@"wav"];
NSLog(@"tinshaw: %@", path);
NSURL *pathURL = [NSURL fileURLWithPath:path];

// Create a system sound object representing the sound file.
AudioServicesCreateSystemSoundID ( ((__bridge CFURLRef)pathURL), &completionSound);

// Play the Sound
AudioServicesPlaySystemSound(completionSound); 
```

我尝试将音频会话类别更改为“AVAudioSessionCategoryPlayback”，但这没有用。在那儿

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-06-02T04:48:26.397

+1 @Shaggy Frog。尽管无论静音开关状态如何，都有用于播放声音的 API，但它们绝对是私有的。因此，基本上，您的问题的答案是无法完成。但是，您可以做的是，每次应用程序启动时（在该方法中）使用某种警报消息`viewDidLoad`来礼貌地提醒您的用户，如果他们想要来自您的应用程序的警报，请不要让他们的手机静音。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-06-02T00:48:11.567

想一想你在问什么。如果第 3 方应用程序可以选择忽略它并播放声音，静音开关有什么用？

设备静音时播放声音的时间有一些例外，但不适用于第 3 方应用程序。

# java - 如何从键盘读取 Unicode Greek？

> ID：10858643
> 
> 赞同：3
> 
> 时间：2012-06-01T23:47:48.777
> 
> 标签：java, eclipse, unicode, character-encoding

我正在尝试编写一个希腊词汇测验程序。问题是我无法正确解释输入字符。下面是我整理的一些示例代码来演示该问题。（如果您不想为您的机器设置希腊语输入的麻烦，当程序要求输入单词时，您可以复制并粘贴希腊语字符串。如果它很重要，我正在运行它64 位 Win7 上的 Eclipse。）

```
import java.io.BufferedReader;
import java.io.InputStreamReader;

public class GreekKeyboardExample {

    public static void main(String[] args) {
        String word = "αβγδεζηθικλμνξοπρσςτυφχψω";
        System.out.println("\n\n" + word + "\n");
        String answer = getInput("Type the word above: ");

        System.out.println("\nThis is what the computer took from the keyboard:");  
        printCharsAndCode(answer);

        System.out.println("\nThis is what it should look like:");  
        printCharsAndCode(word);
    }

    private static String getInput(String prompt) {
        System.out.print(prompt);
        System.out.flush();

        try {
            BufferedReader in = new BufferedReader(new InputStreamReader(System.in, "UTF8"));
            return in.readLine();
        } 
        catch (Exception e) {
            return "Error: " + e.getMessage();
        } 
    }

    /* prints the character and its (unicode) code */
    public static void printCharsAndCode(String str) {
//      int len = str.length();
        char[] c = str.toCharArray();
        System.out.println(str);
        for (char d : c) {
            System.out.print("    " + d + " ");
            if (Character.getType(d) == 6) System.out.print(" "); //extra space to make combining diacritics display rightly (NON_SPACING_MARK)
        }
        System.out.println();
        for (char d : c) {
            int ic = (int) d;
            System.out.printf("%1$#05x ", (int) d);
        }
        System.out.println();
    }
} 
```

这是输出：

```
αβγδεζηθικλμνξοπρσςτυφχψω

输入上面的单词：αβγδεζηθικλμνξοπρσςτυφχψω

这是计算机从键盘获取的内容：
Î±Î²Î³Î´ÎµÎ¶Î·Î¸Î¹ÎºÎ»Î¼Î½Î¾Î¿Ï€Ï�ÏƒÏ,Ï„Ï…Ï†Ï‡ÏˆÏ‰
    Î ± Î ² Î ³ Î ´ Î µ Î ¶ Î · Î ¸ Î ¹ Î º Î » Î ¼ Î ½ Î ¾ Î ¿ Ï € Ï � Ï ƒ Ï ‚ Ï „ Ï … Ï † Ï ‡ Ï ^ Ï ‰
0x0ce 0x0b1 0x0ce 0x0b2 0x0ce 0x0b3 0x0ce 0x0b4 0x0ce 0x0b5 0x0ce 0x0b6 0x0ce 0x0b7 0x0ce 0x0b8 0x0ce 0x0b9 0x0ce 0x0ba 0x0ce 0x0bb 0x0ce 0x0bc 0x0ce 0x0bd 0x0ce 0x0be 0x0ce 0x0bf 0x0cf 0x20ac 0x0cf 0xfffd 0x0cf 0x192 0x0cf 0x201a 0x0cf 0x201e 0x0cf 0x2026 0x0cf 0x2020 0x0cf 0x2021 0x0cf 0x2c6 0x0cf 0x2030

这应该是这样的：
αβγδεζηθικλμνξοπρσςτυφχψω
    α β γ δ ε ζ η θ ι κ λ μ ν ξ ο π ρ σ ς τ υ φ χ ψ ω
0x3b1 0x3b2 0x3b3 0x3b4 0x3b5 0x3b6 0x3b7 0x3b8 0x3b9 0x3ba 0x3bb 0x3bc 0x3bd 0x3be 0x3bf 0x3c0 0x3c1 0x3c3 0x3c2 0x3c4 0x3c79033x

```

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T00:08:46.100

您的代码假定通过 传入的字节`System.in`已使用 UTF-8 进行编码。除非您将平台的默认编码设置为 UTF-8，否则这是不太可能的。

如果您指定与平台默认编码匹配的编码而不是 UTF-8，会发生什么情况？

例如，我的 Linux 机器的默认编码设置为 UTF-8，当我运行你的程序时，我得到了“正确”的答案。但是，我确实必须更改 to 的定义`word`：

```
String word = "\u03b1\u03b2\u03b3\u03b4\u03b5\u03b6\u03b7\u03b8\u03b9\u03ba\u03bb\u03bc\u03bd\u03be\u03bf\u03c0\u03c1\u03c3\u03c2\u03c4\u03c5\u03c6\u03c7\u03c8\u03c9"; 
```

因为当我尝试将希腊字母剪切并粘贴到我的编辑器中时，我的编辑器不理解它们。将它们作为 unicode 转义序列输入会得到*完全相同*的字符串，就好像我有一个可以理解输入希腊字母的编辑器一样。

因此，当我使用该更改运行您的程序时，我得到：

```
αβγδεζηθικλμνξοπρσςτυφχψω

Type the word above: αβγδεζηθικλμνξοπρσςτυφχψω

This is what the computer took from the keyboard:
αβγδεζηθικλμνξοπρσςτυφχψω
    α     β     γ     δ     ε     ζ     η     θ     ι     κ     λ     μ     ν     ξ     ο     π     ρ     σ     ς     τ     υ     φ     χ     ψ     ω 
0x3b1 0x3b2 0x3b3 0x3b4 0x3b5 0x3b6 0x3b7 0x3b8 0x3b9 0x3ba 0x3bb 0x3bc 0x3bd 0x3be 0x3bf 0x3c0 0x3c1 0x3c3 0x3c2 0x3c4 0x3c5 0x3c6 0x3c7 0x3c8 0x3c9 

This is what it should look like:
αβγδεζηθικλμνξοπρσςτυφχψω
    α     β     γ     δ     ε     ζ     η     θ     ι     κ     λ     μ     ν     ξ     ο     π     ρ     σ     ς     τ     υ     φ     χ     ψ     ω 
0x3b1 0x3b2 0x3b3 0x3b4 0x3b5 0x3b6 0x3b7 0x3b8 0x3b9 0x3ba 0x3bb 0x3bc 0x3bd 0x3be 0x3bf 0x3c0 0x3c1 0x3c3 0x3c2 0x3c4 0x3c5 0x3c6 0x3c7 0x3c8 0x3c9 
```

它对我有用的原因是我的计算机设置为使用 UTF-8。因此，当我在终端中键入时，该终端程序和/或操作系统将使用 UTF-8 将这些字符转换为字节，而当 Java 使用 UTF-8 读取这些字节时，一切都很好。

但是，如果我的计算机设置为 ISO-8859-1，那么在终端上键入会生成在 UTF-8 中没有意义的字节，并且程序会从键盘读取“垃圾”。但如果程序改为使用 ISO-8859-1，那么它可能会起作用。（我说“可能”是因为我不知道 ISO-8859-1 是否可以有效地将希腊字母编码为字节。）。因此，要使您的程序正常工作，您需要满足两件事：

1.  环绕时`Reader`使用的编码`System.in` **必须**与您在终端键入时计算机用于将字节转换为字符的编码相同。
2.  无论您的计算机使用什么编码，它都需要能够将希腊字母编码为在该编码中有效的字节序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T02:51:52.713

查看 Eclipse 运行/调试配置的“通用”选项卡以了解编码。您可以输入正确的代码页或 ISO 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T16:21:38.247

我将其报告为[错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=382257)，并且刚刚被[确认](http://www.eclipse.org/forums/index.php?t=rview&goto=885155#msg_885155)为：

“我确认这是一个错误，将在下一个版本（Kepler）中修复。”

我感谢大家在这里的意见。

# html - 将不安全的 HTML 字符编码为 HTML 字符实体引用的 T-SQL 算法

> ID：10858646
> 
> 赞同：2
> 
> 时间：2012-06-01T23:48:34.757
> 
> 标签：html, sql-server, sql-server-2008, tsql, html-entities

我需要在我的 SQL Server 2008 R2 数据库中创建一个**插入后触发器。**

触发器需要从 INSERTED 中获取一些字段，处理它们并将它们放在插入的同一行中的不同字段中。

关于。加工：

我需要帮助想出T-SQL 代码中的**算法，该算法****将不安全的 HTML 字符**（例如 <（小于）和 >（大于））编码为**HTML 字符引用**。

理想情况下，我希望以类似于 ASP.NET Server.HtmlEncode(myUnsafeHtml) 的方式执行此操作，并且理想情况下不要到处使用文字或额外的表格，即一种聪明的算法。

**只是寻求帮助。**

所以总而言之，插入后触发器获取**UnsafeHtml 列**中的值，对其进行处理并将其放入插入行的**SafeHtml 列**中。

两列都是**NVARCHAR**类型。

提前致谢。

PS考虑过**UDF**会更合适，我可以在很多地方使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T04:11:46.647

**使用递归 CTE 编码五个特殊字符：**

```
DECLARE 
  @unsafe NVARCHAR(MAX),
  @safe   NVARCHAR(MAX) 

--
-- Create the unsafe html string
-- 
SET @unsafe = N'html''s encoding "method" is <= or >= & 1234 ' + NCHAR(129) 
--
-- Use a recursive CTE to iterate through each character in the string
-- 
;WITH cte AS 
(
  -- 
  -- The first row will contain the original
  -- string, an empty string to be used to 
  -- build the "safe" string, and a position
  -- column to mark the character position
  -- of the loop
  -- 
  SELECT 
    @unsafe AS unsafe_html,
    CONVERT(NVARCHAR(MAX), '') AS safe_html,
    1 AS pos
  WHERE @unsafe IS NOT NULL AND LEN(@unsafe) > 0 
  UNION ALL
  -- 
  -- Create a loop: 
  -- The anchor row starts at position one.
  -- Increment the position by one for each pass.
  -- Stop when the position value is equal to the string lenth.
  -- Evaluate the character in each string
  -- If the ASCII value > 128, use the &# format.
  -- Otherwise, check for 5 special characters: " & ' < >
  -- Use the encoding reference or just the original character
  --
  SELECT 
    @unsafe AS unsafe_html,
    CONVERT(NVARCHAR(MAX), safe_html + 
    CASE WHEN UNICODE(SUBSTRING(unsafe_html, pos, 1)) > 128 
         THEN '&#' + CONVERT(NVARCHAR(10), UNICODE(SUBSTRING(unsafe_html, pos, 1)))  
         ELSE CASE SUBSTRING(unsafe_html, pos, 1)
              WHEN '"'  THEN '&quot' 
              WHEN '&'  THEN '&amp'
              WHEN '''' THEN '&apos'
              WHEN '<'  THEN '&lt'
              WHEN '>'  THEN '&gt'
              ELSE SUBSTRING(unsafe_html, pos, 1)
              END 
         END ) AS safe_html,
    pos + 1 AS pos
  FROM cte
  WHERE pos <= LEN(@unsafe)
) 
--
-- Each pass through the string creates a row in the CTE
-- The last row will have the position value of the string length + 1
-- Use that row as the safe html string
-- SQL Server allows a max recursion of 32767
-- 
SELECT @safe = (
  SELECT safe_html 
  FROM cte
  WHERE pos = LEN(@unsafe) + 1
) 
OPTION (MAXRECURSION 32767) 

SELECT @safe

-- html&aposs encoding &quotmethod&quot is &lt= or &gt= &amp 1234 &#129 
```

**初始版本：**

```
DECLARE @s NVARCHAR(100)

SET @s = '<html>unsafe & safe<html>'
SELECT @s 
SELECT (SELECT @s FOR XML PATH(''))

---------------------------------------
<html>unsafe & safe<html>

-----------------------------------------
&lt;html&gt;unsafe &amp; safe&lt;html&gt; 
```

**包含所有官方参考的完整编码：**

```
DECLARE 
    @unsafe  NVARCHAR(MAX),
    @safe NVARCHAR(MAX) 

-- Build string with first 10,000 unicode chars
SELECT @unsafe = COALESCE(@unsafe, '') + NCHAR(number) + ' ' 
FROM (
    SELECT TOP 10000 ROW_NUMBER() OVER (ORDER BY (SELECT 0)) AS number
    FROM sys.all_objects s1 CROSS JOIN sys.all_objects s2 
) t

-- Build table variable with character entity references defined in HTML 4.0
-- Reference: http://www.htmlcodetutorial.com/characterentities_famsupp_69.html
DECLARE @t TABLE (
    name NVARCHAR(25) NOT NULL, 
    unicode_val INT NOT NULL PRIMARY KEY 
) 

INSERT @t 
VALUES
('&quot', 34),
('&amp', 38),
('&apos', 39),
('&lt', 60),
('&gt', 62),
('&nbsp', 160),
('&iexcl', 161),
('&cent', 162),
('&pound', 163),
('&curren', 164),
('&yen', 165),
('&brvbar', 166),
('&sect', 167),
('&uml', 168),
('&copy', 169),
('&ordf', 170),
('&laquo', 171),
('&not', 172),
('&shy', 173),
('&reg', 174),
('&macr', 175),
('&deg', 176),
('&plusmn', 177),
('&sup2', 178),
('&sup3', 179),
('&acute', 180),
('&micro', 181),
('&para', 182),
('&middot', 183),
('&cedil', 184),
('&sup1', 185),
('&ordm', 186),
('&raquo', 187),
('&frac14', 188),
('&frac12', 189),
('&frac34', 190),
('&iquest', 191),
('&Agrave', 192),
('&Aacute', 193),
('&Acirc', 194),
('&Atilde', 195),
('&Auml', 196),
('&Aring', 197),
('&AElig', 198),
('&Ccedil', 199),
('&Egrave', 200),
('&Eacute', 201),
('&Ecirc', 202),
('&Euml', 203),
('&Igrave', 204),
('&Iacute', 205),
('&Icirc', 206),
('&Iuml', 207),
('&ETH', 208),
('&Ntilde', 209),
('&Ograve', 210),
('&Oacute', 211),
('&Ocirc', 212),
('&Otilde', 213),
('&Ouml', 214),
('&times', 215),
('&Oslash', 216),
('&Ugrave', 217),
('&Uacute', 218),
('&Ucirc', 219),
('&Uuml', 220),
('&Yacute', 221),
('&THORN', 222),
('&szlig', 223),
('&agrave', 224),
('&aacute', 225),
('&acirc', 226),
('&atilde', 227),
('&auml', 228),
('&aring', 229),
('&aelig', 230),
('&ccedil', 231),
('&egrave', 232),
('&eacute', 233),
('&ecirc', 234),
('&euml', 235),
('&igrave', 236),
('&iacute', 237),
('&icirc', 238),
('&iuml', 239),
('&eth', 240),
('&ntilde', 241),
('&ograve', 242),
('&oacute', 243),
('&ocirc', 244),
('&otilde', 245),
('&ouml', 246),
('&divide', 247),
('&oslash', 248),
('&ugrave', 249),
('&uacute', 250),
('&ucirc', 251),
('&uuml', 252),
('&yacute', 253),
('&thorn', 254),
('&yuml', 255),
('&OElig', 338),
('&oelig', 339),
('&Scaron', 352),
('&scaron', 353),
('&Yuml', 376),
('&fnof', 402),
('&circ', 710),
('&tilde', 732),
('&Alpha', 913),
('&Beta', 914),
('&Gamma', 915),
('&Delta', 916),
('&Epsilon', 917),
('&Zeta', 918),
('&Eta', 919),
('&Theta', 920),
('&Iota', 921),
('&Kappa', 922),
('&Lambda', 923),
('&Mu', 924),
('&Nu', 925),
('&Xi', 926),
('&Omicron', 927),
('&Pi', 928),
('&Rho', 929),
('&Sigma', 931),
('&Tau', 932),
('&Upsilon', 933),
('&Phi', 934),
('&Chi', 935),
('&Psi', 936),
('&Omega', 937),
('&alpha', 945),
('&beta', 946),
('&gamma', 947),
('&delta', 948),
('&epsilon', 949),
('&zeta', 950),
('&eta', 951),
('&theta', 952),
('&iota', 953),
('&kappa', 954),
('&lambda', 955),
('&mu', 956),
('&nu', 957),
('&xi', 958),
('&omicron', 959),
('&pi', 960),
('&rho', 961),
('&sigmaf', 962),
('&sigma', 963),
('&tau', 964),
('&upsilon', 965),
('&phi', 966),
('&chi', 967),
('&psi', 968),
('&omega', 969),
('&thetasym', 977),
('&upsih', 978),
('&piv', 982),
('&ensp', 8194),
('&emsp', 8195),
('&thinsp', 8201),
('&zwnj', 8204),
('&zwj', 8205),
('&lrm', 8206),
('&rlm', 8207),
('&ndash', 8211),
('&mdash', 8212),
('&lsquo', 8216),
('&rsquo', 8217),
('&sbquo', 8218),
('&ldquo', 8220),
('&rdquo', 8221),
('&bdquo', 8222),
('&dagger', 8224),
('&Dagger', 8225),
('&bull', 8226),
('&hellip', 8230),
('&permil', 8240),
('&prime', 8242),
('&Prime', 8243),
('&lsaquo', 8249),
('&rsaquo', 8250),
('&oline', 8254),
('&frasl', 8260),
('&euro', 8364),
('&image', 8465),
('&weierp', 8472),
('&real', 8476),
('&trade', 8482),
('&alefsym', 8501),
('&larr', 8592),
('&uarr', 8593),
('&rarr', 8594),
('&darr', 8595),
('&harr', 8596),
('&crarr', 8629),
('&lArr', 8656),
('&uArr', 8657),
('&rArr', 8658),
('&dArr', 8659),
('&hArr', 8660),
('&forall', 8704),
('&part', 8706),
('&exist', 8707),
('&empty', 8709),
('&nabla', 8711),
('&isin', 8712),
('&notin', 8713),
('&ni', 8715),
('&prod', 8719),
('&sum', 8721),
('&minus', 8722),
('&lowast', 8727),
('&radic', 8730),
('&prop', 8733),
('&infin', 8734),
('&ang', 8736),
('&and', 8743),
('&or', 8744),
('&cap', 8745),
('&cup', 8746),
('&int', 8747),
('&there4', 8756),
('&sim', 8764),
('&cong', 8773),
('&asymp', 8776),
('&ne', 8800),
('&equiv', 8801),
('&le', 8804),
('&ge', 8805),
('&sub', 8834),
('&sup', 8835),
('&nsub', 8836),
('&sube', 8838),
('&supe', 8839),
('&oplus', 8853),
('&otimes', 8855),
('&perp', 8869),
('&sdot', 8901),
('&lceil', 8968),
('&rceil', 8969),
('&lfloor', 8970),
('&rfloor', 8971),
('&lang', 9001),
('&rang', 9002),
('&loz', 9674),
('&spades', 9824),
('&clubs', 9827),
('&hearts', 9829),
('&diams', 9830)

-- Build numbers table to parse the string
DECLARE @numbers TABLE (number INT NOT NULL PRIMARY KEY) 
INSERT @numbers
SELECT TOP (LEN(@unsafe)) ROW_NUMBER() OVER (ORDER BY (SELECT 0)) AS number
FROM sys.all_objects s1 CROSS JOIN sys.all_objects s2

-- Use numbers table to parse each character.
-- If a match is found in character entity reference table,
-- then use the safe substitute. Otherwise, if the unicode
-- value is greater than 128, use &#<unicode char value>.
-- Finally, use the original character if nothing else
-- is a match
SELECT @safe = COALESCE(@safe,'') 
       + COALESCE(name, 
         CASE WHEN UNICODE(SUBSTRING(@unsafe, number, 1)) > 128 THEN '&#' 
          + CONVERT(NVARCHAR(10), UNICODE(SUBSTRING(@unsafe, number, 1))) 
          ELSE SUBSTRING(@unsafe, number, 1) END)
FROM @numbers 
LEFT OUTER JOIN @t  
  ON UNICODE(SUBSTRING(@unsafe, number, 1)) = unicode_val

SELECT @safe AS [safe]

Results:  
! &quot # $ % &amp &apos ( ) * + , - . / 0 1 2 3 4 5 6 7 8 9 : ; 
&lt = &gt ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z 
[ \ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { 
| } ~   &#129 &#130 &#131 &#132 &#133 &#134 &#135 &#136 &#137 &#138 
&#139 &#140 &#141 &#142 &#143 &#144 &#145 &#146 &#147 &#148 &#149 
&#150 &#151 &#152 &#153 &#154 &#155 &#156 &#157 &#158 &#159 &nbsp 
&iexcl &cent &pound &curren &yen &brvbar &sect &uml &copy &ordf 
&laquo &not &shy &reg &macr &deg &plusmn &sup2 &sup3 &acute &micro 
&para &middot &cedil &sup1 &ordm &raquo &frac14 &frac12 &frac34 
&iquest &Agrave &Aacute &Acirc &Atilde &Auml &Aring &AElig &Ccedil 
&Egrave &Eacute &Ecirc &Euml &Igrave &Iacute &Icirc &Iuml &ETH &Ntilde 
&Ograve &Oacute &Ocirc &Otilde &Ouml &times &Oslash &Ugrave &Uacute 
&Ucirc &Uuml &Yacute &THORN &szlig &agrave &aacute &acirc &atilde &auml 
&aring &aelig &ccedil &egrave &eacute &ecirc &euml &igrave &iacute &icirc 
&iuml &eth &ntilde &ograve &oacute &ocirc &otilde &ouml &divide &oslash 
&ugrave &uacute &ucirc &uuml &yacute &thorn &yuml &#256 &#257 &#258 &#259 
&#260 &#261 &#262 &#263 &#264 &#265 &#266... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-04T23:38:44.253

```
Declare @Expression nvarchar(max) = 'Y<1'

Select @Expression = (Select @Expression For XML Path(''))

Select @Expression 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T04:29:25.413

如何在 .NET 中创建一个调用 Server.HtmlEncode(myUnsafeHtml) 的 SQL UDF 并将其加载到 SQL 服务器中？开始：

[http://blog.sqlauthority.com/2008/10/19/sql-server-introduction-to-clr-simple-example-of-clr-stored-procedure/](http://blog.sqlauthority.com/2008/10/19/sql-server-introduction-to-clr-simple-example-of-clr-stored-procedure/)

[http://www.codeproject.com/Articles/37377/SQL-Server-CLR-Functions](http://www.codeproject.com/Articles/37377/SQL-Server-CLR-Functions)

[http://msdn.microsoft.com/en-us/library/ms254498(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms254498(v=vs.80).aspx)

# php - 在 CodeIgniter 中与 MongoDB 交互

> ID：10858647
> 
> 赞同：5
> 
> 时间：2012-06-01T23:48:39.183
> 
> 标签：php, codeigniter, mongodb

是否有像这样抛出查询 mongoDB 的函数，`$this->db->query($query)`因为我想在 codeigniter 中创建 mongoDB 执行程序，所以如果我像这样键入这个查询：

```
db.users.find({age:33}) 
```

... codeigniter 将该查询直接抛出到 mongodb 服务器还是有其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T00:47:21.907

您应该使用[MongoDB PHP Driver](http://php.net/manual/en/book.mongo.php)[`MongoDB::command()`](http://php.net/manual/en/mongodb.command.php)将此类数据库命令传递给 mongodb 服务器 。

在 CodeIgniter 中，您可以使用一些社区构建的 MongoDB 库。由于我检查了几乎所有这些，请接受我的建议并使用[CodeIgniter MongoDB Active Record](https://github.com/alexbilbie/codeigniter-mongodb-library/tree/v2)。这是一个示例代码：

```
<?php
// Somewhere in your model, controller, etc.

// Load MongoDB library
$this->load->library('mongo_db');

// Query MongoDB: Active document library usage example
$docs = $this->mongo_db->where('age', '33')->get('collection_name_here');  

// Query MongoDB: Command usage example
$docs = $this->mongo_db->command(array(
    'geoNear'    => 'buildings', 
    'near'       => array(53.228482, -0.547847), 
    'num'        => 10, 
    'nearSphere' => TRUE,
));

// Theme results, pass to the view, etc. 
```

以下是您可能希望与活动记录一起使用的其他一些库：

*   [CodeIgniter MongoDB 会话库](https://github.com/sepehr/ci-mongodb-session)
*   [CodeIgniter MongoDB IonAuth 身份验证库](https://github.com/sepehr/ci-mongodb-ionauth)
*   [CodeIgniter MongoDB REST 服务器库](https://github.com/sepehr/ci-mongodb-restserver)
*   [CodeIgniter MongoDB 基础模型](https://github.com/sepehr/ci-mongodb-base-model)

# sql - SQL - 将 NULL 转换为 string.empty

> ID：10858654
> 
> 赞同：5
> 
> 时间：2012-06-01T23:49:55.540
> 
> 标签：sql

我正在尝试对我们的数据库进行一些升级维护。我需要从一个表的所有行中移动 3 列数据，并将该数据作为新行插入到新表中。

```
INSERT INTO [dbo].[SnmpSettings]([NetworkDiscoveryId], [RoCommunities], [RwCommunities])
    SELECT id, Ro_Community, RW_Communities
    FROM [dbo].[Network_Discovery] 
```

上面的代码可以正常工作，但是 Ro_Community 和 RW_Communities 允许 NULL，而 RoCommunities 和 RwCommunities 不允许 NULL。我应该如何将 NULL 转换为空字符串，然后插入到我的新表中？

编辑：

```
INSERT INTO [dbo].[SnmpSettings]([NetworkDiscoveryId], [RoCommunities], [RwCommunities])
    SELECT id, Ro_Community, RW_Communities
    ISNULL(Ro_Community,'')
    FROM [dbo].[Network_Discovery] 

Msg 102, Level 15, State 1, Line 27
Incorrect syntax near 'Ro_Community'. 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-01T23:53:05.293

```
SELECT ISNULL(Ro_Community, '') 
```

或者

```
SELECT COALESCE(Ro_Community, '') 
```

注意：`COALESCE`自 SQL Server 2005 起受支持。它是 ANSI-92 SQL 标准的一部分，因此许多人认为它优于`ISNULL`. 然而，也有报告说它[有点慢](http://sqlserverperformance.idera.com/tsql-optimization/performance-coalesce-null/)。

# backbone.js - 在骨干模型从集合中移除、销毁并从 DOM 中移除后，是否还有僵尸需要处理？

> ID：10858656
> 
> 赞同：0
> 
> 时间：2012-06-01T23:49:59.650
> 
> 标签：backbone.js, backbone-events

从我读过的[http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)和[Backbone.js ：重新填充或重新创建视图？](https://stackoverflow.com/questions/7567404/backbone-js-repopulate-or-recreate-the-view)我了解到隐藏视图应该与事件解除绑定。

删除模型怎么样？打电话后

*   `remove()`关于收藏
*   `destroy()`在模型上
*   `remove()`在视图中

`off()`最后一步我要调用Model 吗？

假设没有其他人持有对模型实例的引用，那么僵尸杀戮就结束了吗？视图可能仍然有对模型的引用，视图应该`this.model`设置为`null`?

还有内存泄漏吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T01:11:14.603

阅读注释源，很清楚 model.destroy() 做了什么，**它不会删除模型**，只是请求服务器删除 REST 资源。如果您想摆脱脚本中的模型，您可以为您的视图创建一个销毁函数，该函数将删除您想要摆脱的任何对象。

[http://documentcloud.github.com/backbone/docs/backbone.html](http://documentcloud.github.com/backbone/docs/backbone.html)

关于事件，我不确定，但是你可以取消，你也可以在你的浏览器开发工具中监视模型的内部事件对象，看看它在你删除模型后是否仍然存在。

# apache - htaccess 浏览器缓存特定域

> ID：10858662
> 
> 赞同：0
> 
> 时间：2012-06-01T23:51:21.230
> 
> 标签：apache, .htaccess

如何为图像、css、js 等指定浏览器缓存，但仅限于某些域？我们有自己的基本 CDN，并且希望来自子域的图像与主域上的图像分开缓存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T23:55:19.593

您应该能够将其添加到所需域/子域根目录中的 .htaccess

```
<FilesMatch ".(js|css|gif|jpg|jpeg|png|ico)$">
Header set Cache-Control "max-age=604800"
</FilesMatch> 
```

# php - Smarty 迭代并获取记录中的上一列

> ID：10858668
> 
> 赞同：0
> 
> 时间：2012-06-01T23:51:50.903
> 
> 标签：php, smarty, iteration

在我的循环中，我想将记录集中的当前列与下一个列进行比较，以便在不同时添加一个额外的空白行。

```
{if $smarty.section.row.next.pc_name != $timeblocks[row].pc_name}
    <tr bgcolor="#333333"><td colspan="6">&nbsp;</td></tr>
{/if} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:18:45.747

我总是通过检查以前的记录来完成这些事情，如下所示：

```
{assign var="last" value=""}

{section name=row loop=$rows}
    ...
    {if $last != $timeblocks[row].pc_name}
        <tr bgcolor="#333333"><td colspan="6">&nbsp;</td></tr>
        {assign var="last" value=$timeblocks[row].pc_name} {* UPDATE LAST *}
    {/if}
{/section} 
```

但是，**如果你想保持你的逻辑**，你可以使用**[`index_next`section 属性](http://www.smarty.net/docs/en/language.function.section.tpl)**，它给你下一个迭代索引（不幸的是不是下一个迭代元素，但没有问题）：

```
{if $timeblocks[$smarty.section.row.index_next].pc_name != $timeblocks[row].pc_name}
    <tr bgcolor="#333333"><td colspan="6">&nbsp;</td></tr>
{/if} 
```

# c# - 如何制作 ObjectIds 的字符串表示，而不必为每个成员指定它

> ID：10858673
> 
> 赞同：4
> 
> 时间：2012-06-01T23:52:49.713
> 
> 标签：c#, mongodb

我将 MongoDB 与 C# 的官方 MongoDb 驱动程序一起使用。

我的域对象都有一个字符串类型的 Id 属性

```
string Id { get; set;} 
```

但我想在实际数据库中存储 12 个字节的二进制 ObjectId，这是在类映射中实现的，如下所示：

```
 BsonClassMap.RegisterClassMap<X>(cm => {
    cm.AutoMap();
    cm.GetMemberMap(c => c.Id).SetRepresentation(BsonType.ObjectId);
  }); 
```

其他集合的外部 ObjectId 键也表示为字符串，也应保存为对象 ID。

现在，如果可以避免的话，我不想为每个 Id 和外键编写相同的 SetRepresenttion 内容。

那么有没有办法一劳永逸地说，所有字符串 Id 字段都应该表示为 db 中的 ObjectIds 并且名称以“Id”结尾的所有字符串属性也应该表示为 db 中的 ObjectIds？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:22:35.057

有一个称为 ISerializationOptionsConvention 的约定。看看这里的文档：[http](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-Writeacustomconvention) ://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-Writeacustomconvention 。

使用它，您将能够测试成员类型是否为字符串且名称以“Id”结尾，然后将其分配给您的序列化选项。

# java - 一副纸牌

> ID：10858674
> 
> 赞同：2
> 
> 时间：2012-06-01T23:53:05.347
> 
> 标签：java, arrays, eclipse, exception

我是一个试图学习 Java 的相当笨的人，我在完成我给自己的任务时遇到了一点麻烦。[基本上我正在尝试在本页](http://docs.oracle.com/javase/tutorial/java/javaOO/QandE/creating-questions.html)末尾进行练习。

我设法完成了三节课。**卡片**：

```
public class Card {

public int nRank; // Used later
public int maxRank = 13; //The max number of Ranks
public int nSuit; // Used later
public int maxSuit = 4; // Max number of suits

//Associate both rank and suit numbers with strings

public String[] ranks = new String[maxRank - 1];
{
    ranks[0] = "two";
    ranks[1] = "three";
    ranks[2] = "four";
    ranks[3] = "five";
    ranks[4] = "six";
    ranks[5] = "seven";
    ranks[6] = "eight";
    ranks[7] = "nine";
    ranks[8] = "ten";
    ranks[9] = "Jack";
    ranks[10] = "Queen";
    ranks[11] = "King";
    ranks[12] = "Ace";

    }

public String[] suits = new String[maxSuit - 1];
{
    suits[0] = "Clubs";
    suits[1] = "Diamonds";
    suits[2] = "Spades";
    suits[3] = "Hearts";
    }

public String suit = suits[nSuit]; //The suit string of the card whose suit number is nSuit
public String rank = ranks[nRank]; //Same but with ranks

//Constructor for the Card object, with two arguments, x for rank, y for suit
public Card(int x,int y){
    this.nRank = x;
    this.nSuit = y;
}

//method to get which card it is in a string
public String whatCard(){
    return rank + " of " + suit;
}
} 
```

**甲板：**

```
 public class Deck {

public static int nRanks = 13; //number of ranks
public static int nSuits = 4; // number of suits
public static int nCard = nRanks * nSuits; // number of cards

Card[] deck = new Card[nCard -1]; //new array called deck to store all the cards 
int h = 0; //a variable to control the place of each card in the array
//constructor for the Deck
public Deck() {

while(h < 52){ // loop until there are 52 cards

// cycles through all the possible combinations between i(ranks) and j(suits) and creates a card with each
for(int i = 1; i <= nRanks; i++){

    for(int j = 1; j <= nSuits; j++){

        deck[h] = new Card(i,j); // creation of the card
        h++; // adds 1 to to h so the program knows how many cards are there
        }
    }

}
}
//method for getting a card depending on its position in the array(x)
    public Card getCard(int x){
    return deck[x-1];   
}
} 
```

还有我称之为**Shuffle**的卡片/甲板的展示器：

```
public class Shuffle {

public static void main(String[] args){
        Deck newDeck = new Deck(); // creates a new Deck object
        //loops through all the cards in the deck
    for(int i = 0; i < Deck.nCard; i++){
        System.out.println(newDeck.getCard(i).whatCard()); // prints each card
    }

} 
```

}

虽然 eclipse 没有注意到代码中的任何错误，但当我尝试编译时，我看到了这个：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 12
    at Card.<init>(Card.java:26)
    at Deck.<init>(Deck.java:20)
    at Shuffle.main(Shuffle.java:5) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T23:56:17.150

在所有长度为 N 的循环中，您正试图从元素 1..N 访问。您应该从 0..(1-N) 循环。

例如，如果您有 4 套西装，则您有一个包含元素 0、1、2、3 的数组。通过说`(for j=1; j<=4, j++)`，您正在尝试访问超出范围的元素 4。

它应该是`(j=0; j<4; j++)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T23:56:34.753

rank[] 和 suits[] 的索引都从 0 到 12。

您正在尝试从 1 访问到 13 （在您的 for 循环中）

使用此代码：

```
for(int i = 0; i < nRanks; i++){

    for(int j = 0; j < nSuits; j++){

        deck[h] = new Card(i,j); // creation of the card
        h++; // adds 1 to to h so the program knows how many cards are there
    }
} 
```

编辑 ：

我注意到另一个错误，即生成越界的错误：在您的 Card 类中，更改以下行：

```
public String[] ranks = new String[maxRank - 1];
public String[] suits = new String[maxSuit - 1]; 
```

经过

```
public String[] ranks = new String[maxRank];
public String[] suits = new String[maxSuit]; 
```

创建数组时，不指定最后一个索引，而是指定可用的位置。因此，如果您想输入 13 个值，请指定新的 String[13]。

* * *

编辑：完整的甲板课程：

```
public class Deck {

   public static int nRanks = 13;  
   public static int nSuits = 4; 
   public static int nCard = nRanks * nSuits; 

   Card[] deck = new Card[nCard]; //nCard indexes, not nCard - 1

   public Deck() {
      //remove the while, double loop useless
      for(int i = 0; i < nRanks; i++){
         for(int j = 0; j < nSuits; j++){
            deck[j * nRanks + i] = new Card(i,j);
         }
      }
   }

   public Card getCard(int x){
      return deck[x-1];   
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T23:57:02.923

Java 数组是从零开始的......因此创建一个包含 13 - 1 == 12 个元素的新数组，但数组从零开始，这意味着访问元素“12”实际上是第 13 个元素，因此数组越界异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T23:58:33.877

在卡片中，您有：

```
public int nRank; // Used later
public int maxRank = 13; //The max number of Ranks
public int nSuit; // Used later
public int maxSuit = 4; // Max number of suits 
```

然后后来

```
public String suit = suits[nSuit]; //The suit string of the card whose suit number is nSuit
public String rank = ranks[nRank]; //Same but with ranks 
```

nSuit 和 nRank 没有被初始化为任何理智的东西。尝试设置为 0 之类的值。但是，我认为这实际上不是您想要的，因为套装和等级将在对象构造时设置，而不是您调用构造函数的结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T23:58:55.967

当您尝试运行它时会发生该错误（而不是在您尝试编译它时）。这有点挑剔，但最好用正确的术语。

问题是您试图在数组中获取索引超出范围的元素。在您的数组声明（等级和西装）中，您使用`max - 1`，而它应该是`max`。例如，`suits[3] = "Hearts"`无效，因为`suits`它的长度仅为 3 ( `maxSuit -1`= 3)。

# c# - 使用相机将照片捕捉为完美的正方形？

> ID：10858678
> 
> 赞同：2
> 
> 时间：2012-06-01T23:53:35.677
> 
> 标签：c#, windows-phone-7, camera, windows-phone-7.1

我正在使用 WP7 相机示例，在捕获图像时遇到了问题。现在它使用标准 480(w) x 800(h) 拍照。我想要做的是将图片作为一个正方形，因为我的应用程序要求图像是一个完美的正方形。

我将 VideoBrush 调整为仅显示 480x480，并且最初拍摄的图像似乎拍摄了一张方形照片，但是当您在图片中心内查看时，它是一张普通的 480x800 肖像。

有谁知道如何设置相机拍摄方形照片或裁剪顶部和底部？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T04:25:06.970

您需要手动将像素复制到新位图。因此，如果相机是水平的，并且您希望裁剪图像的左侧部分以使新的宽度等于高度，那么这样的事情就可以了（我没有测试这段代码，但即使它不是 100% 正确，它应该给你基本的想法）：

```
 WriteableBitmap SquareImage(WriteableBitmap srcBitmap)
     {
         int[] srcData = srcBitmap.Pixels;
         int[] destData = new int[srcBitmap.PixelHeight * srcBitmap.PixelHeight];

         for (int row = 0; row < srcBitmap.PixelHeight; ++row)
        {
            for (int col = 0; col < srcBitmap.PixelHeight; ++col)
            {
                destData[(row * srcBitmap.PixelHeight) + col] = srcData[(row * srcBitmap.PixelWidth) + col];
            }
        }

         WriteableBitmap squareBitmap = new WriteableBitmap(srcBitmap.PixelHeight, srcBitmap.PixelHeight);
         destData.CopyTo(squareBitmap.Pixels, 0);

         return squareBitmap;
    } 
```

# shared-libraries - gyp：shared_library 中未定义的符号

> ID：10858680
> 
> 赞同：2
> 
> 时间：2012-06-01T23:53:52.550
> 
> 标签：shared-libraries, gyp

以下 gyp 文件有什么问题？

```
 'targets': [
    {
      'target_name': 'cr',
      'type': 'shared_library',
      'sources': ['cr.cc'],
      'include_dirs': ['.'], 
    },
  ], 
```

当我构建这个 gyp 代码时，它会编译，但输出 .so 文件中没有符号。当我这样做的时候

```
 "nm cr.so" 
```

我得到以下最小符号列表。它不包含任何必需的符号。

```
 0000000000001de0 d _DYNAMIC
0000000000001fe8 d _GLOBAL_OFFSET_TABLE_
                 w _Jv_RegisterClasses
0000000000001dc0 d __CTOR_END__
0000000000001db8 d __CTOR_LIST__
0000000000001dd0 d __DTOR_END__
0000000000001dc8 d __DTOR_LIST__
0000000000000ac0 r __FRAME_END__
0000000000001dd8 d __JCR_END__
0000000000001dd8 d __JCR_LIST__
0000000000002010 A __bss_start
                 U __ctype_b_loc
                 w __cxa_finalize
0000000000000a60 t __do_global_ctors_aux
00000000000009b0 t __do_global_dtors_aux
0000000000002008 d __dso_handle
                 w __gmon_start__
                 U __printf_chk
                 U __snprintf_chk
                 U __sprintf_chk
                 U __stack_chk_fail
0000000000002010 A _edata
0000000000002020 A _end
0000000000000a98 T _fini
0000000000000950 T _init
                 U bsearch
0000000000000990 t call_gmon_start
                 U calloc
0000000000002010 b completed.7382
0000000000002018 b dtor_idx.7384
                 U fclose
                 U fopen64
0000000000000a30 t frame_dummy
                 U fread
                 U free
                 U localtime
                 U log10
                 U memcmp
                 U memcpy
                 U memmove
                 U memset
                 U pow
                 U qsort
                 U realloc
                 U strcmp
                 U strlen
                 U strncat
                 U strncmp
                 U strncpy
                 U time
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:23:14.320

尝试将您的 cr.h 文件也添加到源中。

如果您向我们提供完整的 .gyp 文件以及您尝试将哪些文件包含到共享库中（即，可能是一些额外的头文件、一些库、标志等），将会很有帮助

# perl - 这个 Perl 单行代码实际上是如何工作的？

> ID：10858682
> 
> 赞同：21
> 
> 时间：2012-06-01T22:48:43.000
> 
> 标签：perl

所以，我碰巧注意到 last.fm 正在我所在的地区招聘，因为我认识一些[在](http://dekstop.de/weblog/) [那里](http://russ.garrett.co.uk/)工作的人，所以我想申请。

但我想我最好先看看[现在的员工](http://www.last.fm/about/team)。

该页面上的每个人都有一条可爱/聪明/愚蠢的标语，例如“生命不是太短一千倍，我们不会让自己无聊吗？”。事实上，这很有趣，直到我明白了这一点：

```
perl -e'print+pack+q,c*,,map$.+=$_,74,43,-2,1,-84, 65,13,1,5,-12,-3, 13,-82,44,21, 18,1,-70,56, 7,-77,72,-7,2, 8,-6,13,-70,-34' 
```

我忍不住将它粘贴到我的终端中（也许这是一件愚蠢的事情），但它打印了：

> 又一个 Last.fm 黑客，

我认为弄清楚 Perl 单行代码是如何工作的相对容易。但我无法真正理解文档，而且我不了解 Perl，所以我什至不确定我是否正在阅读相关文档。

因此，我尝试修改数字，但无济于事。所以我认为这真的很有趣，值得一试。

所以，“它是如何工作的”有点含糊，我的问题主要是，

那些数字是什么？为什么有负数和正数，负数或正数重要吗？

运算符的组合有`+=$_`什么作用？

在做什么`pack+q,c*,,`？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-01T23:41:42.660

这是[Perl meme “Just another Perl hacker”</a> 的变体。随着 JAPH 的发展，这个相对温和。](http://en.wikipedia.org/wiki/Just_another_Perl_hacker)

 [您需要做的第一件事是弄清楚如何解析 perl 程序。它在函数调用周围没有括号，`+`并以有趣的方式使用类似引号的运算符。原来的程序是这样的：

```
print+pack+q,c*,,map$.+=$_,74,43,-2,1,-84, 65,13,1,5,-12,-3, 13,-82,44,21, 18,1,-70,56, 7,-77,72,-7,2, 8,-6,13,-70,-34 
```](http://en.wikipedia.org/wiki/Just_another_Perl_hacker) 

[`pack`](http://perldoc.perl.org/functions/pack.html)是一个函数，而[`print`](http://perldoc.perl.org/functions/print.html)和[`map`](http://perldoc.perl.org/functions/map.html)是[列表运算符](http://perldoc.perl.org/perlop.html#List-Operators-%28Rightward%29)。无论哪种方式，紧跟加号的函数或非空运算符名称都不能`+`用作二元运算符，因此`+`开头的两个符号都是[一元运算符](http://perldoc.perl.org/perlop.html#Symbolic-Unary-Operators)。[手册](http://perldoc.perl.org/perlop.html#Terms-and-List-Operators-%28Leftward%29)中描述了这种奇怪之处。

如果我们添加括号，使用块语法`map`，并添加一些空格，我们得到：

```
print(+pack(+q,c*,,
            map{$.+=$_} (74,43,-2,1,-84, 65,13,1,5,-12,-3, 13,-82,44,21,
                         18,1,-70,56, 7,-77,72,-7,2, 8,-6,13,-70,-34))) 
```

下一个棘手的问题是`q`这里是`q` [类似于引号的操作符](http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators)。它更常用单引号写成：

```
print(+pack(+'c*',
            map{$.+=$_} (74,43,-2,1,-84, 65,13,1,5,-12,-3, 13,-82,44,21,
                         18,1,-70,56, 7,-77,72,-7,2, 8,-6,13,-70,-34))) 
```

请记住，一元加号是无操作的（除了强制标量上下文），所以现在应该看起来更熟悉了。这是对该[`pack`](http://perldoc.perl.org/functions/pack.html)函数的调用，格式为`c*`，意思是“任意数量的字符，由它们在当前字符集中的编号指定”。另一种写法是

```
print(join("", map {chr($.+=$_)} (74, …, -34))) 
```

该[`map`](http://perldoc.perl.org/functions/map.html)函数按顺序将提供的块应用于参数列表的元素。对于每个元素，`$_`设置为元素值，`map`调用的结果是在连续元素上执行块返回的值列表。编写此程序的更长方法是

```
@list_accumulator = ();
for $n in (74, …, -34) {
    $. += $n;
    push @list_accumulator, chr($.)
}
print(join("", @list_accumulator)) 
```

该`$.`变量包含数字的运行总计。选择这些数字，以便总和是作者想要打印的字符的 ASCII 代码： 74= `J`、 74+43=117= `u`、 74+43-2=115=`s`等。它们是负数还是正数取决于每个字符是否按 ASCII 顺序在前一个字符之前或之后。

对于您的下一个任务，请解释这个 JAPH（由[EyesDrop](http://search.cpan.org/dist/Acme-EyeDrops/lib/Acme/EyeDrops.pm)制作）。

```
''=~('(?{'.('-)@.)@_*([]@!@/)(@)@-@),@(@@+@)'
^'][)@]`}`]()`@.@]@%[`}%[@`@!#@%[').',"})') 
```

不要在生产代码中使用任何这些。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-01T23:16:38.737

这背后的基本思想非常简单。您有一个包含字符的 ASCII 值的数组。为了使事情变得更复杂一点，您不使用绝对值，而是使用除第一个以外的相对值。所以想法是在前一个的基础上加上具体的值，例如：

1.  74 ->`J`
2.  74 + 43 ->`u`
3.  74 + 42 + (-2) ->`s`

尽管`$.`它是 Perl 中的一个特殊变量，但在这种情况下它并不意味着任何特殊。它只是用于保存之前的值并添加当前元素：

```
map($.+=$_, ARRAY) 
```

基本上，这意味着将当前列表元素 ( `$_`) 添加到变量`$.`中。这将返回一个新数组，其中包含新句子的正确 ASCII 值。

Perl 中的`q`函数用于单引号的文字字符串。例如，您可以使用类似的东西

```
q/Literal $1 String/
q!Another literal String!
q,Third literal string, 
```

这意味着`pack+q,c*,,`基本上是`pack 'c*', ARRAY`。`c*`修饰符 in将`pack`值解释为字符。例如，它将使用该值并将其解释为一个字符。

它基本上归结为：

```
#!/usr/bin/perl
use strict;
use warnings;

my $prev_value = 0;

my @relative = (74,43,-2,1,-84, 65,13,1,5,-12,-3, 13,-82,44,21, 18,1,-70,56, 7,-77,72,-7,2, 8,-6,13,-70,-34);
my @absolute = map($prev_value += $_, @relative);

print pack("c*", @absolute); 
```

# java - Android - 编辑文本错觉

> ID：10858686
> 
> 赞同：0
> 
> 时间：2012-06-01T23:55:22.400
> 
> 标签：java, android

我想在虚拟键盘上键入时更改 EditText 的值；我的目标是在显示另一个文本时隐藏用户键入的内容。例如，如果我想输入“Stack”但显示“Overf”，它将是这样的：当输入“S”（并隐藏在缓冲区中）时，它显示“O”，然后我输入“t”并得到“v” ” 等等。最后我在 EditText 上看到的是“Overf”，但在缓冲区中我得到了“Stack”。我尝试了 TextWatcher，但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:25:39.953

尝试在 EditText 上`TextWatcher`使用添加一个。`addTextChangedListener(TextWatcher watcher)`然后您应该能够覆盖 TextWatcher 的`afterTextChanged(Editable s)` 方法来捕获新的用户输入，将其存储在内部字符串中，并用您自己想要的文本替换它。

# mono - 如何使用 MonoDevelop 中的 WebBrowser 类

> ID：10858687
> 
> 赞同：2
> 
> 时间：2012-06-01T23:55:41.760
> 
> 标签：mono, web, browser, monodevelop

如何在 c# 中使用 Mono WebBrowser 类，我读了一千遍，仍然无法理解。我想在 Ubuntu 中使用 monodevelop 创建一个带有嵌入式浏览器的应用程序。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:49:48.063

您是否查看过像 WebKit.Net 这样的外部浏览器库？[http://webkitdotnet.sourceforge.net/](http://webkitdotnet.sourceforge.net/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T21:02:17.740

WebBrowser 类不属于 Mono 命名空间，而是属于 System.Windows.Forms： [//msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)

这并不意味着它不能在 Mono 上运行。这意味着您可以使用 MSDN 作为参考在 VisualStudio 中简单地编写您的应用程序（以防您不了解如何从 MonoDevelop 执行此操作），然后尝试直接使用 Mono 运行您的 .exe。

话虽如此，我听说 Mono 中的 WebBrowser 后端正在使用 Gecko API，而这个 API 最近被破坏了，所以如果你使用的是一个非常新的 Linux 发行版，它可能无法工作。

只需测试它并让我们知道。

# javascript - IE 或 Firefox （根本）没有执行 Java 脚本，但 Chrome 没有问题

> ID：10858688
> 
> 赞同：0
> 
> 时间：2012-06-01T23:55:51.743
> 
> 标签：javascript, jquery, internet-explorer, firefox, google-chrome

所以我刚写完一大堆javascript，却发现我在Chrome中看到的内容被Firefox和ie 8都忽略了（根据我们的统计，这是目标浏览器）。代码如下：

```
 <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js" type="text/javascript"></script>
   <script type="text/jscript" language="javascript" >

   alert("here");
    $(window).load(function () {

        $('div#pop-up').hide();
        $('div#pop-up-side').hide();
   .... 
```

我投入

```
 alert("here"); 
```

并很快意识到唯一甚至可以发出警报（“此处”）的浏览器是 Chrome。关于什么可以解决这个问题的任何想法？我不确定还能为您提供什么，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:59:45.893

该`type`属性是可选的，`text/javascript`如果不存在则默认为。`language`浏览器会忽略该属性。你可以省略两者。

另外，你最好使用`.ready()`

```
$(document).ready(function () {
    alert("here");
    $('div#pop-up').hide();
    $('div#pop-up-side').hide();
    ... 
```

并检查控制台是否有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T05:39:08.613

使用正确的类型（not `text/jscript`but `text/javascript`）将有助于 Firefox。不知道你在IE中看到了什么......

# c# - 当我使用非共享运行时构建 Monodroid 项目时，获取编码失败

> ID：10858690
> 
> 赞同：6
> 
> 时间：2012-06-01T23:56:11.813
> 
> 标签：c#, character-encoding, xamarin.android

我正在尝试在我的 Monodroid 应用程序中使用 DotNetZip 库。当我启用共享运行时构建选项时，一切似乎都运行良好。当我禁用共享运行时，该行

```
static System.Text.Encoding ibm437 = System.Text.Encoding.GetEncoding("IBM437"); 
```

生成异常（不支持编码名称“IBM437”）。我已经检查了“其他支持的编码”列表中的每个框，但它似乎没有帮助。有人有想法么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T23:13:05.663

我有同样的问题。

首先，确保您在项目属性中添加了“West”编码：

[Xamarin 国际化](http://docs.xamarin.com/ios/advanced_topics/internationalization)

如果这不起作用，问题是所需的 dll 没有被复制到 .apk 的程序集文件夹中。这应该自动发生，但事实并非如此。我提交了一个错误，因此您可以查看它是否已修复：

[Mono for Android / Xamarin Bugzilla](https://bugzilla.xamarin.com/show_bug.cgi?id=7543)

如果没有，这是一个对我有用的解决方法（来自 Xamarin）：

1.  手动添加对 I18N.dll 和 I18N.West.dll 的引用
2.  将两个 dll 的“复制本地”属性设置为“真”
3.  添加以下虚拟代码以将 2 个 dll 添加到 .apk

    > 变种忽略 = 新 I18N.West.CP437();

4.  确保“链接”设置为“无”

希望这可以帮助！

# selenium - 驱动程序无法找到 Web 元素

> ID：10858691
> 
> 赞同：0
> 
> 时间：2012-06-01T23:56:14.763
> 
> 标签：selenium, selenium-webdriver

你好，

我有以下来源。驱动程序无法单击名称为“comment”的文本区域。想知道跨度ID是否与此有关！任何帮助将非常感激。谢谢。

```
<TD vAlign=top>
   <TEXTAREA style="DISPLAY: none" class=textinput rows=10 cols=50 name=comment>
   </TEXTAREA>
   <SPAN id=_editor_toolbar> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T09:38:51.390

如果你想用 webdriver 与网页上的元素交互，这个元素应该首先显示，而你的*textarea*不是：`style="DISPLAY: none"`

# python - 重复平铺背景 pygame

> ID：10858700
> 
> 赞同：6
> 
> 时间：2012-06-01T23:57:03.653
> 
> 标签：python, opengl, pygame

pygame中是否有类似的功能？

```
screen.fill(pygame.image.load('brick.bmp').convert()) 
```

我想用图像填充窗口（背景）以产生类似这样的效果：

![在此处输入图像描述](../Images/3d62c035de448ae42d183828e788473b.png)

我唯一的想法是将每块砖块都粘贴到屏幕上，但我认为这会减慢游戏速度。有谁知道如何做到这一点（并提供一些示例代码）？

这是一个有效但速度慢的方法片段

```
 While True:
        for y in range(0,600,32):
            for x in range(0,800,32):
                screen.blit( self.img,(x,y))
        ...
        pygame.display.flip() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T00:18:04.647

> 将每一块砖块涂抹到屏幕上，但我认为这会减慢游戏速度。

没有你想象的那么多。bliting 非常快。即使有某种“填充”命令，它仍然相当于将图像复制到表面，直到表面被覆盖。

如果背景图像是静止的，您可以在程序启动时渲染到屏幕外的表面，而不是通过填充纯色来擦除屏幕，而是对预渲染的背景进行 blit。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T12:18:28.303

我在 Pygame 中找不到这个功能。但是，我有一种方法可以提高您方法的性能。您可以先创建一个曲面。让我们称之为`bgSurface`。`bgSurface`然后你用你的双循环方法把所有的砖都拼起来。然后在主循环中，您执行`screen.blit(bgSurface, (0, 0))`. 试试。

# iphone - Xcode 调试控制台输出已更改

> ID：10858704
> 
> 赞同：0
> 
> 时间：2012-06-01T23:57:40.253
> 
> 标签：iphone, objective-c, ios, xcode

这似乎是一个愚蠢的问题，但它困扰着我。

我最近不得不将配置文件从我的个人切换到我的公司。这是因为我们需要安装我们的应用程序以在 40 台左右的 iPad 上进行测试。无论如何，在发生这种情况的过程中，调试控制台似乎发生了变化。

它不再输出正常的调试控制台内容 - 仅输出 NSLog 语句等。例如，在它显示 [switching to process 0xblahblah] 之前，除其他内容外，例如有关产品的一般信息等。现在它不会。可能是什么原因造成的，或者我可以查看哪些设置来获取这些消息？恐怕这会在将来弄乱控制台中的错误报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:59:43.720

这似乎是一个 LLDB 和 GDB 问题，似乎 xcode 已将调试器从一个更改为另一个

看来您更改了活动模式，这可能会从一个调试器切换到另一个默认调试器是 LLDB，我个人更喜欢 GDB

要更改调试器请阅读此 [http://developer.apple.com/library/mac/#documentation/IDEs/Conceptual/Xcode4TransitionGuide/Debugging/Debugging.html](http://developer.apple.com/library/mac/#documentation/IDEs/Conceptual/Xcode4TransitionGuide/Debugging/Debugging.html)

# android - Android应用程序编程与游戏编程不同？

> ID：10858705
> 
> 赞同：0
> 
> 时间：2012-06-01T23:58:06.013
> 
> 标签：android

我正在制作一个商业应用程序，但我一直在关注 Mario Zechner 的《Beginning Android Games》教程（我打算先制作一个游戏）。

在 Mario 的教程中，他为整个应用程序使用了一个 Activity，并没有真正使用 xml 布局。他还直接使用assetmanager而不是Resource对象，并创建了自己的渲染线程。

以编程方式开发商业应用程序和游戏应用程序之间有哪些主要区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T00:07:10.320

我一直在开发应用工具，但后来我开始涉足游戏领域。我试图保持相同的概念，这太难了。您受到动画功能的限制。然后我发现你可能需要使用表面视图作为你的渲染空间，这样你就可以移动东西并让图形交互。您仍然可以使用 xml 创建它，但实际交互是通过编程完成的

然后我最近发现了一些东西。那里有 android 游戏引擎（只是 googlr 他们）thay 使 Gaming.much 更简单和更高效。我建议您从商业应用程序的普通 android 方式开始，然后转移到游戏应用程序的游戏引擎，因为它基于 android 基础知识祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T00:00:06.890

我建议您使用 xml 布局并使用资源文件。基本上遵循Android方式。

# wordpress - .htaccess 和 index.html

> ID：10858713
> 
> 赞同：0
> 
> 时间：2012-06-01T23:59:09.770
> 
> 标签：wordpress, .htaccess, http-status-code-301

这是一个 Wordpress 博客。我可以正确重定向目录级 URL。在这种情况下，我希望 /digests 转到 /digests_wp（wp 用于 Wordpress，并且是一个虚拟目录，或者实际上是一个存在于数据库中的 Wordpress 页面）。这有效：

```
Redirect 301 /digests /digests_wp 
```

但是，由于很多点击都是在寻找摘要/index.html 我希望它也能正确重定向。这不起作用。

```
Redirect 301 /digests/index.html /digests_wp 
```

相反，我得到一个 Page Not Found 错误，因为 /digest_wp 并不真正作为正确的目录存在，我猜。无论如何，我希望它忽略查找 index.html 并像在其他重定向中一样工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:02:19.043

我没有测试过这个，但我认为它会工作

```
RewriteEngine On
RewriteBase /
RewriteRule ^digests(/index\.html)?$ digests_wp [L,R=301] 
```

或者你可以试试

```
RewriteEngine On
RewriteBase /
RewriteRule ^digests/?$ digests_wp [L,R=301]
RewriteRule ^digests/index\.html$ digests_wp [L,R=301] 
```

# vim - 如何在 VIM 中运行 g++ 并在水平拆分中显示结果

> ID：10858714
> 
> 赞同：3
> 
> 时间：2012-06-01T23:59:11.613
> 
> 标签：vim, g++

我使用这个命令 :!g++ % -g -lm && a.exe & pause 结果出现在一个新的命令提示符中。我正在使用 gvim7.3。我怎样才能让 VIM 在同一个窗口中显示结果（水平分割）？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T00:10:51.563

:make 然后 :copen 应该可以解决问题。您也可以使用 :cclose 关闭窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T00:20:16.990

尝试这个：

```
:new +r\ !g++\ #\ -g\ -lm 
```

这会打开一个新的“窗口”并将 g++ 命令的输出读入其中。请注意，您需要使用 # 而不是 % 因为您已切换到新缓冲区。

我不确定如何让 && 工作，所以我只需要创建一个可以编译和执行的脚本。

您可能还想执行“设置 nomod”，这样您就可以在不保存文件的情况下关闭该窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T03:40:51.090

从 my `.vimrc`，一个功能类似于您想要的功能。我使用 vim 而不是 gvim，所以希望它仍然对工作目录使用相同的约定。您需要使用该`filetype`插件才能使自动命令正常工作（该函数调用该插件，`<F6>`因此请注意这一点）。如果出现编译错误，这将切换到快速修复模式。它还运行带有输入文件的程序（存在一个输入文件）（应该很明显如何删除该功能）。非常正在进行中的工作，因此欢迎发表评论！

```
function! MakeAndRun()
  w
  let progName = expand('%:r')
  if filereadable(progName . '.in')
    let shCmd = 'time ./' . progName . ' < ' . progName . '.in 2>&1'
  else
    let shCmd = 'time ./' . progName . ' 2>&1'
  endif

  execute "normal \<F6>"
  call setqflist([])
  redraw | echo 'Compiling ' . progName

  silent! belowright new Run\ results
  setlocal buftype=nofile bufhidden=wipe nobuflisted noswapfile nowrap nonumber 
  autocmd WinEnter <buffer> if winnr('$') == 1 | :q! | endif

  execute 'silent %! make ' . progName
  if v:shell_error
    setlocal buftype=quickfix
    cbuffer
    execute 'wincmd p'
    setlocal statusline=%qRun\ results
  else
    resize 4
    redraw | echo 'Running program...<CTRL-C> to abort'

    execute 'silent $read !'. shCmd
  endif

  normal gg
  execute 'resize ' . min([12, line('$')+1])
  execute 'wincmd p'
endfunction

autocmd FileType cpp nnoremap <buffer> <F5> :call MakeAndRun()<CR>
autocmd FileType cpp nnoremap <buffer> <silent> <F6> :if bufexists('Run results')\
                                                       \| execute bufwinnr('^Run results$') . 'wincmd w'\
                                                       \| :q!\
                                                       \| endif<CR>
autocmd FileType cpp imap <buffer> <F5> <C-O><F5>
autocmd FileType cpp imap <buffer> <F6> <C-O><F6> 
```

# javascript - 如何使用 find()、text()、val() 从 div 和输入中同时查找值（如连续）

> ID：10858716
> 
> 赞同：1
> 
> 时间：2012-06-01T23:59:20.003
> 
> 标签：javascript, jquery, html

**已解决-各种方法，谢谢我再次学到的人**

的HTML

```
<div class="container">

  <div class="row">
    <div class="c1">value1</div>
    <div class="c2">value2</div>
    <div class="c3><input type="number" value="3" class="i1" /></div>
  </div>

  <div class="row">
    <div class="c1">value3</div>
    <div class="c2">value4</div>
    <div class="c3><input type="number" value="1" class="i1" /></div>
  </div>

</div> 
```

[我使用此代码提取值（此处](https://stackoverflow.com/questions/4098934/build-json-to-send-to-php-using-a-for-loop-maybe)稍作修改）

```
var fields = [ 'c1', 'c2','i1'];

var data = [];

$('.container .row').each(function(i, tr) {
    var row = {};
    for (var f = 0; f < fields.length; ++f) {
        row[fields[f]] = $(tr).find('.' + fields[f]).text()
    }
    data.push(row);
    console.log(data);
}); 
```

这很完美，但不适用于所有数据

> c1 = 值1
> 
> c2 = 值2
> 
> i1 =
> 
> * * *
> 
> c1 = 值 3
> 
> c2 = 值4
> 
> i1 =

因为`i1`是输入，`text()`所以我不需要`val()`，我想知道如何获取 的值`i1`并将其添加到，`row[fields[f]]`因此最终输出为：

> （第 1 行）c1 = value1
> 
> c2 = 值2
> 
> i1 = 3
> 
> * * *
> 
> （第 2 行）
> 
> c1 = 值 3
> 
> c2 = 值4
> 
> i1 = 1

1.  使用`if/else`不起作用它会做一个或另一个
2.  添加另一个 .find() 会破坏它
3.  使用 function(){} 不起作用。
4.  使用 append 或 appendTo 不起作用
5.  [在这种情况下这](https://stackoverflow.com/questions/7826685/how-to-get-div-text-also-with-its-inputs-values/7826758#7826758)似乎不起作用

必须有办法做到这一点。谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T00:02:12.403

尝试添加 if 子句来检查元素是否属于`input`类型。如果是这样，它将获得价值`val()`，否则`text()`。

```
for (var f = 0; f < fields.length; ++f) {
    var el = $(tr).find('.' + fields[f]);
    row[fields[f]] = el.is(":input") ? el.val() : el.text();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T00:05:28.457

最简单的方法很简单：

```
var fields = ['c1', 'c2', 'i1'];

var data = [];

$('.container .row').each(function(i, tr) {

    var row = {};
    for (var f = 0; f < fields.length; ++f) {
        row[fields[f]] = $(tr).find('.' + fields[f]).text() || $(tr).find('input.' + fields[f]).val();
    }
    data.push(row);
    console.log(data);
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/aAnDx/)。

如果没有文本，这种方法分配`text()`or，如果没有文本，则分配`val()`特定类名的元素的 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T00:05:56.420

这有效 - 演示在[http://jsfiddle.net/alnitak/82Tep/](http://jsfiddle.net/alnitak/82Tep/)

```
var fields = {
    c1: 'text',
    c2: 'text',
    i1: 'val'
};

var data = $('.container .row').map(function(row, tr) {
    var obj = {};
    $.each(fields, function(key, func) {
        obj[key] = $('.' + key, tr)[func]();
    })
    return obj;
}).get(); 
```

早期版本不正确，因为我没有发现 OP 想要一个对象而不是内部维度的数组。

这种方法的优点是您可以在这些元素上调用*其他*jQuery 函数而无需更改实际代码 - 只需更改`fields`地图以说明您要调用哪个函数。

# python - Python拟合数据的正态曲线：matplotlib / scipy and graph

> ID：10858717
> 
> 赞同：2
> 
> 时间：2012-06-01T23:59:23.170
> 
> 标签：python, matplotlib, scipy, curve-fitting, smoothing

我正在尝试将归一化曲线拟合到我的数据中。我在一个 csv 文件中有数千个数据点，我正在使用 matplotlib 来绘制它。我不确定要准确使用哪个统计数据。我在想这将是一个正态/高斯分布。如果是这样，我仍然不确定如何计算/绘制它。

这是我当前绘制的数据的示例：

![示例图](../Images/60c575b59042d6c3f839f4df99bcce6b.png)

这是我的数据的一小部分：

```
71910, 2012-06-01 05:16:58.823148
78540, 2012-06-01 05:17:58.975718
73350, 2012-06-01 05:18:59.112917
74700, 2012-06-01 05:19:59.264698
69270, 2012-06-01 05:20:59.408202
69270, 2012-06-01 05:21:59.521627
71580, 2012-06-01 05:22:59.643570
75450, 2012-06-01 05:23:59.796075
70320, 2012-06-01 05:24:59.966520
69900, 2012-06-01 05:26:00.089748
76950, 2012-06-01 05:27:00.248423
72300, 2012-06-01 05:28:00.407092
71220, 2012-06-01 05:29:00.588237
71370, 2012-06-01 05:30:00.748330
75750, 2012-06-01 05:31:00.903936
76320, 2012-06-01 05:32:01.064029
65430, 2012-06-01 05:33:01.212079
75870, 2012-06-01 05:34:01.369971
77190, 2012-06-01 05:35:01.541307
74910, 2012-06-01 05:36:01.713357
82830, 2012-06-01 05:37:01.892127
75390, 2012-06-01 05:38:02.059375
78690, 2012-06-01 05:39:02.238673
74460, 2012-06-01 05:40:02.394993
78180, 2012-06-01 05:41:02.636044
77370, 2012-06-01 05:42:02.801483
75510, 2012-06-01 05:43:02.974502
73830, 2012-06-01 05:44:03.149257
75960, 2012-06-01 05:45:03.349482
71970, 2012-06-01 05:46:03.522843
80460, 2012-06-01 05:47:03.655879
76200, 2012-06-01 05:48:03.797326
75090, 2012-06-01 05:49:03.976444
78510, 2012-06-01 05:50:04.114751
71220, 2012-06-01 05:51:04.301188
78540, 2012-06-01 05:52:04.489870
75540, 2012-06-01 05:53:04.684908
76710, 2012-06-01 05:54:04.857187
72810, 2012-06-01 05:55:05.061263
84810, 2012-06-01 05:56:05.243845
72900, 2012-06-01 05:57:05.468686
80730, 2012-06-01 05:58:05.690607
80160, 2012-06-01 05:59:05.843441
81990, 2012-06-01 06:00:06.011187
79560, 2012-06-01 06:01:06.210168
82050, 2012-06-01 06:02:06.390090
84870, 2012-06-01 06:03:06.599912
76620, 2012-06-01 06:04:06.808242
78750, 2012-06-01 06:05:07.023915 
```

最后，这是我目前用来绘制数据的代码：

```
import matplotlib
matplotlib.use('Agg')                                     
from matplotlib.mlab import csv2rec                             
import matplotlib.pyplot as plt                                
import matplotlib.dates as mdates                             
from pylab import *                                           

output_image_name='output.png'                                     
input_filename="counter.log"
output_tmp_filename="counter.log_noneg"

input = open(input_filename, 'r')
output = open(output_filename, 'w')                                                                                                                            

filtered = (line for line in input if not line.startswith('-'))
for line in filtered:                                                                                                                                                   
        output.write(line)     

input.close()
output.close()

data = csv2rec(output_tmp_filename, names=['values', 'time'])   
rcParams['figure.figsize'] = 10, 5                              
rcParams['font.size'] = 8                                     

fig = plt.figure()                                                                                 

plt.plot(data['time'], data['values'])                                             

ax = fig.add_subplot(111)                                     
ax.plot(data['time'], data['values'])                          
hours = mdates.HourLocator()                                   
fmt = mdates.DateFormatter('%D - %H:%M')                       
ax.xaxis.set_major_locator(hours)                            
ax.xaxis.set_major_formatter(fmt)                              

ax.grid()                                              

plt.ylabel("Values")                                          
plt.title("Capture Log")            

fig.autofmt_xdate(bottom=0.2, rotation=90, ha='left')          

plt.savefig(output_image_name)

os.remove(output_tmp_filename) 
```

我的最终目标是摆脱数据/图表中的所有上限和下限峰值，并在现有数据之上拟合一条漂亮的线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T01:54:39.703

这实际上与编程无关，但我想说您只是希望平滑数据，因此只需绘制滚动平均值而不是原始数据。我会把它变成一个可变大小的列表，你 append() 和 pop(0) 到。请注意，您需要 pop(0)，而不仅仅是 pop()，它将删除您刚刚附加的项目。

您可能希望使用不同数量的平滑来绘制它（即使用不同大小的列表绘制平均值），看看是什么给了您想要的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T10:40:48.013

这看起来是测量一些噪声值的实验数据。将正态分布“拟合”到明显表现出某些周期性行为的事物的概念可能不是正确的方法。您可以通过使用适当数量的间隔绘制数据的直方图来测试数据是否近似正态分布。为了平滑数据，我建议应用某种类型的低通滤波器来消除您拥有的高频噪声。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T04:56:32.527

我决定采用滚动平均方法，它运行良好，并且对于我的目的来说足够快。这将创建一个数组，其中第一部分是原始值，第二部分是滚动连续平均值，第三部分是数据时间。

```
import matplotlib
from matplotlib.mlab import csv2rec                           
import matplotlib.pyplot as plt                                                           
import numpy
import datetime

inputfilename="test_tpm_log.log"

data = csv2rec(inputfilename, names=['packets', 'time'])

old_value = 0
counter_tpm = []
counter_rollmean = []

for tpm in data['packets']:
        new_value = (tpm + old_value) / 2
        old_value = tpm
        counter_tpm.append(tpm)
        counter_rollmean.append(new_value)

dates_in_file = str(data['time'])
for dates in dates_in_file:
        print dates

rec = zip(counter_tpm, counter_rollmean, data['time'])

print rec 
```

# c++ - 由于超时取消 async_read

> ID：10858719
> 
> 赞同：5
> 
> 时间：2012-06-01T23:59:39.363
> 
> 标签：c++, boost-asio

我正在尝试编写一个包装器同步方法`async_read`以允许在套接字上进行非阻塞读取。按照互联网上的几个示例，我开发了一个似乎几乎正确但不起作用的解决方案。

该类声明了这些相关的属性和方法：

```
class communications_client
{
    protected:
        boost::shared_ptr<boost::asio::io_service> _io_service;
        boost::shared_ptr<boost::asio::ip::tcp::socket> _socket;
        boost::array<boost::uint8_t, 128> _data;

        boost::mutex _mutex;
        bool _timeout_triggered;
        bool _message_received;
        boost::system::error_code _error;
        size_t _bytes_transferred;

        void handle_read(const boost::system::error_code & error, size_t bytes_transferred);
        void handle_timeout(const boost::system::error_code & error);
        size_t async_read_helper(unsigned short bytes_to_transfer, const boost::posix_time::time_duration & timeout, boost::system::error_code & error);

        ...
} 
```

该方法`async_read_helper`是封装所有复杂性的方法，而其他两个`handle_read`只是`handle_timeout`事件处理程序。下面是这三种方法的实现：

```
void communications_client::handle_timeout(const boost::system::error_code & error)
{
    if (!error)
    {
        _mutex.lock();
        _timeout_triggered = true;
        _error.assign(boost::system::errc::timed_out, boost::system::system_category());
        _mutex.unlock();
    }
}

void communications_client::handle_read(const boost::system::error_code & error, size_t bytes_transferred)
{
    _mutex.lock();
    _message_received = true;
    _error = error;
    _bytes_transferred = bytes_transferred;
    _mutex.unlock();
}

size_t communications_client::async_read_helper(unsigned short bytes_to_transfer, const boost::posix_time::time_duration & timeout, boost::system::error_code & error)
{
    _timeout_triggered = false;
    _message_received = false;

    boost::asio::deadline_timer timer(*_io_service);
    timer.expires_from_now(timeout);
    timer.async_wait(
        boost::bind(
            &communications_client::handle_timeout,
            this,
            boost::asio::placeholders::error));

    boost::asio::async_read(
        *_socket,
        boost::asio::buffer(_data, 128),
        boost::asio::transfer_exactly(bytes_to_transfer),
        boost::bind(
            &communications_client::handle_read,
            this,
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred));

    while (true)
    {
        _io_service->poll_one();
        if (_message_received)
        {
            timer.cancel();
            break;
        }
        else if (_timeout_triggered)
        {
            _socket->cancel();
            break;
        }
    }

    return _bytes_transferred;
} 
```

我的主要问题是：为什么这适用于循环`_io_service->poll_one()`而没有循环和调用`_io_service->run_one()`？另外，我想知道对于更习惯使用 Boost 和 Asio 的人来说，它是否正确。谢谢！

* * *

## **修复提案 #1**

根据[Jonathan Wakely](https://stackoverflow.com/users/981959/jonathan-wakely)所做的评论，可以在操作完成后使用`_io_service->run_one()`调用来替换循环。[`_io_service->reset()`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/reference/io_service/reset.html)它应该看起来像：

```
_io_service->run_one();
if (_message_received)
{
    timer.cancel();
}
else if (_timeout_triggered)
{
    _socket->cancel();
}

_io_service->reset(); 
```

经过一些测试，我已经检查过这种解决方案本身是行不通的。使用错误代码连续调用该`handle_timeout`方法`operation_aborted`。如何停止这些呼叫？

## **修复提案 #2**

[twsansbury](https://stackoverflow.com/users/1053968/twsansbury)的答案是准确的，并且基于可靠的文档基础。该实现导致以下代码`async_read_helper`：

```
while (_io_service->run_one())
{
    if (_message_received)
    {
        timer.cancel();
    }
    else if (_timeout_triggered)
    {
        _socket->cancel();
    }
}
_io_service->reset(); 
```

以及对方法的以下更改`handle_read`：

```
void communications_client::handle_read(const boost::system::error_code & error, size_t bytes_transferred)
{
    if (error != boost::asio::error::operation_aborted)
    {
        ...
    }
} 
```

该解决方案在测试过程中被证明是可靠和正确的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T05:09:09.220

[`io_service::run_one()`](http://www.boost.org/doc/libs/1_58_0/doc/html/boost_asio/reference/io_service/run_one/overload1.html)和之间的主要区别在于[`io_service::poll_one()`](http://www.boost.org/doc/libs/1_58_0/doc/html/boost_asio/reference/io_service/poll_one/overload1.html)它将`run_one()`阻塞直到处理程序准备好运行，而`poll_one()`不会等待任何未完成的处理程序准备好。

假设唯一未完成的处理程序`_io_service`是`handle_timeout()`和`handle_read()`，则`run_one()`不需要循环，因为它只会返回一次`handle_timeout()`或者`handle_read()`已经运行。另一方面，`poll_one()`需要一个循环，因为`poll_one()`将立即返回，因为既没有`handle_timeout()`也没有`handle_read()`准备好运行，导致函数最终返回。

原始代码以及修复建议 #1 的主要问题是`async_read_helper()`返回时 io_service 中仍有未完成的处理程序。在下一次调用 时`async_read_helper()`，要调用的下一个处理程序将是上一次调用的处理程序。该[`io_service::reset()`](http://www.boost.org/doc/libs/1_58_0/doc/html/boost_asio/reference/io_service/reset.html)方法只允许 io_service 从停止状态恢复运行，它不会删除任何已排队进入 io_service 的处理程序。要解决此问题，请尝试使用循环来使用 io_service 中的所有处理程序。使用完所有处理程序后，退出循环并重置 io_service：

```
// Consume all handlers.
while (_io_service->run_one())
{
  if (_message_received)
  {
    // Message received, so cancel the timer.  This will force the completion of
    // handle_timer, with boost::asio::error::operation_aborted as the error.
    timer.cancel();
  }
  else if (_timeout_triggered)
  {
    // Timeout occured, so cancel the socket.  This will force the completion of
    // handle_read, with boost::asio::error::operation_aborted as the error.
    _socket->cancel();
  }
}

// Reset service, guaranteeing it is in a good state for subsequent runs.
_io_service->reset(); 
```

从调用者的角度来看，这种形式的超时是同步的`run_one()`。但是，I/O 服务的工作仍在进行中。另一种方法是使用 Boost.Asio[对 C++ 期货的支持](http://www.boost.org/doc/libs/1_58_0/doc/html/boost_asio/overview/cpp2011/futures.html)来等待未来并执行超时。这段代码更容易阅读，但它至少需要一个其他线程来处理 I/O 服务，因为等待超时的线程不再处理 I/O 服务：

```
// Use an asynchronous operation so that it can be cancelled on timeout.
std::future<std::size_t> read_result = boost::asio::async_read(
    socket, buffer, boost::asio::use_future);

// If timeout occurs, then cancel the operation.
if (read_result.wait_for(std::chrono::seconds(1)) == 
    std::future_status::timeout)
{
  socket.cancel();
}
// Otherwise, the operation completed (with success or error).
else
{
  // If the operation failed, then on_read.get() will throw a
  // boost::system::system_error.
  auto bytes_transferred = read_result.get();
  // process buffer
} 
```

# algorithm - 装箱任务的修改版本的最佳解决方案

> ID：10858726
> 
> 赞同：2
> 
> 时间：2012-06-02T00:00:25.283
> 
> 标签：algorithm, backtracking, greedy

**问题**

假设我们有一组*N*个实数 *A = {x_1, x_2, ..., x_N}*。

目标是将此集合划分为*A_1、A_2、...、A_L*子集，并限制*sum( A_i ) <= T*并**最小化**此项：

*成本 := sum( abs( sum(A_i) - T ) )*

其中*sum(A_i)*表示 A_i 中数字的总和，*T*是*给*定的阈值。

*我正在寻找一种非进化最优算法。*

**更新：** *x_i*是实数并且不大于*T* ( *0 < x_i <= T* )。

**更新 2：**固定成本函数。

* * *

**不错的尝试，贪心算法！**

一个简单的想法是使用[贪婪](http://en.wikipedia.org/wiki/Greedy_algorithm)方法来解决问题。这是一个伪代码：

```
 1\. create subset A_1 and set i=1.
 2\. remove the largest number x from A.
 3\. If sum(A_i) + x <= T
  * put x into A_i
 4\. Else
  * create a new subset A_i+1, 
  * put x into A_i+1 
  * set i=i+1
 5\. If A is non-empty
  * goto step 2.
 6\. Else
  * return all created A_i s 
```

问题是这个解决方案不是最优的。例如，在某些情况下，最好不要将两个最大的数*x1*和*x2*放在第一个子集*A_1*中，即使它们不超过*T*，因为没有其他 *x_i* 可用于添加到该集合并使它的总和更接近*T*。另一方面，如果我们将*x1*和*x2*放在不同的集合中，则可以找到更好的解决方案（*成本*值较小的解决方案）。

**可能的解决方案**

我曾想过使用[回溯](http://en.wikipedia.org/wiki/Backtracking)算法，它也可以找到最佳解决方案，但我猜它在这个问题中的复杂性会很高。

我已经阅读了维基百科上的一些文章，例如[装箱问题](http://en.wikipedia.org/wiki/Bin_packing_problem)（NP-hard *[sighs...]*）和[切割库存问题](http://en.wikipedia.org/wiki/Cutting_stock_problem)，显然我的问题与这个标准问题非常相似，但我不确定哪一个符合我的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:19:59.280

**更新：** 使用校正后的成本函数，请注意 sum(A_i) - T 将始终为负，因为 A_i <= T。所以我们的目标是最小化

总和（abs（总和（A_i）-T））=总和（T-总和（A_i））= L*T-总和（A）

sum(A) 是常数，因此任务是最小化使用的 bin 数量。因此，您的问题相当于经典的装箱问题。

[为了解决这个问题，您可以使用像这样](http://scip.zib.de/doc/examples/Binpacking/index.html)的装箱求解器。

# imageresizer - 使用 ImageResizer 调整 PDF 大小有时会导致异常，直到重新启动应用程序池才能解决

> ID：10858731
> 
> 赞同：2
> 
> 时间：2012-06-02T00:01:28.303
> 
> 标签：imageresizer

我们正在使用 ImageResizer (imageresizing.net) 来生成 PDF 首页的缩略图。它工作得很好（与 ImageResizer 相关的几乎所有其他事情一样），除了我在此处发布的以下场景，这些场景可能信息不足，希望有人以适当的解决方案遇到相同的问题。

1) 在数千个 PDF 中，有几个 PDF 不允许生成缩略图。每次尝试都会导致以下异常：

```
Message :  An error occurred while parsing EntityName. Line 3, position 85.
Source: System.Xml
Stack Trace : 
at System.Xml.XmlTextReaderImpl.Throw(String res, String arg)
at System.Xml.XmlTextReaderImpl.ParseEntityName()
at System.Xml.XmlTextReaderImpl.ParseEntityReference()
at System.Xml.XmlTextReaderImpl.Read()
at System.Xml.XmlReader.ReadString()
at System.Xml.XmlReader.ReadElementString()
at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderPdfInfo.Read4_PdfInfo(Boolean isNullable, Boolean checkType)
at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderPdfInfo.Read5_pdf()

TargetSite : Void Throw(System.String, System.String) 
```

我们的假设是，实际的 PDF 文件实际上以某种方式（无论是元数据还是其他方式）损坏，导致在尝试对其进行解析时出现异常。不幸的是，无法从源重新生成它们（源不再可用）。

似乎没有发布与此问题相关的任何 GhostScript 或 ImageResizer 错误。

2) 当尝试一次在多个 PDF 上生成缩略图时（即批量 > ~100），它通常工作正常，但偶尔它会在一个 PDF 上踢罐头（没有韵律或原因），并且所有后续缩略图生成尝试都失败*，直到应用程序池重新启动*。哎哟。最初我们并不太担心，因为我们只是在开始时进行批量生成，而随后的缩略图生成数量会少得多。然而，我们后来发现，即使数量较少，这个问题也会偶尔出现。我们会自动收到警报，但必须重置应用程序是必须使用的大锤。

```
Source: ImageResizer
Stack Trace : 
 at ImageResizer.ImageBuilder.LoadImage(Object source, ResizeSettings settings, Boolean restoreStreamPos)
 at ImageResizer.ImageBuilder.BuildJob(ImageJob job)
 at ImageResizer.ImageBuilder.Build(ImageJob job)
 at ImageResizer.ImageBuilder.Build(Object source, Object dest, ResizeSettings settings, Boolean disposeSource, Boolean addFileExtension)
 at ImageResizer.ImageBuilder.Build(Object source, Object dest, ResizeSettings settings, Boolean disposeSource)
 at ImageResizer.ImageBuilder.Build(Object source, Object dest, ResizeSettings settings)
 at ImageResizer.InterceptModule.<>c__DisplayClass2.<HandleRequest>b__1(Stream stream)
 at ImageResizer.Plugins.DiskCache.CustomDiskCache.<>c__DisplayClasse.<TryWriteFile>b__d()
 at ImageResizer.Plugins.DiskCache.LockProvider.TryExecute(String key, Int32 timeoutMs, LockCallback success)
 at ImageResizer.Plugins.DiskCache.CustomDiskCache.TryWriteFile(CacheResult result, String physicalPath, String relativePath, ResizeImageDelegate writeCallback, DateTime sourceModifiedUtc, Int32 timeoutMs, Boolean recheckFS)
 at ImageResizer.Plugins.DiskCache.CustomDiskCache.GetCachedFile(String keyBasis, String extension, ResizeImageDelegate writeCallback, DateTime sourceModifiedUtc, Int32 timeoutMs, Boolean asynchronous)
 at ImageResizer.Plugins.DiskCache.DiskCache.Process(IResponseArgs e)
 at ImageResizer.Plugins.DiskCache.DiskCache.Process(HttpContext context, IResponseArgs e)
 at ImageResizer.InterceptModule.HandleRequest(HttpContext context, String virtualPath, NameValueCollection queryString, IVirtualFile vf)
 at ImageResizer.InterceptModule.CheckRequest_PostAuthorizeRequest(Object sender, EventArgs e)
 at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
 at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
 TargetSite : System.Drawing.Bitmap LoadImage(System.Object, ImageResizer.ResizeSettings, Boolean) 
```

在这个问题上，我们假设这是一个内存/资源问题，但同样，如果无法忠实地重现问题，希望其他人已经遇到了问题并找到了解决方案。

*   IIS 7.5 (Windows Server 2008 R2)
*   ASP.NET MVC 3

在 App Start 中使用以下内容强制生成指定文件夹中所有 PDF 的特定大小和类型的图像（通过不同的路径处理对 PDF 的实际访问以进行身份​​验证和下载跟踪）：

```
 Config.Current.Pipeline.Rewrite += delegate(IHttpModule sender, HttpContext context, IUrlEventArgs ev)
        {
            if (!ev.VirtualPath.StartsWith(VirtualPathUtility.ToAbsolute("~/pdf/"), StringComparison.OrdinalIgnoreCase))
                return;

            ev.QueryString["width"] = "160";
            ev.QueryString["format"] = "png";
        }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T14:38:19.553

如果在同一个可执行文件中启动多个实例，GhostScript 将永久崩溃。

*   如果您在应用程序池中有多个应用程序或应用程序文件夹，则会发生这种情况
*   或者，如果您没有手动禁用重叠回收。

[更新]

特定于 PDF 的问题是由于元数据中未编码的 & 符号造成的；这是 PostScript 脚本中的一个缺陷，它返回有关 PDF 的信息，应该可以修复。

# c# - 如何从列表中删除负值 ?

> ID：10858735
> 
> 赞同：5
> 
> 时间：2012-06-02T00:02:08.730
> 
> 标签：c#, algorithm, generics, arraylist

我最终在我的列表中得到了一堆整数（名为“listInts”）。

这不应该让任何人感到惊讶。

我的问题是我不想要任何负数，但有可能有三个，特别是 -1、-2 和 -3。

我可以通过以下方式笨拙地删除它们：

```
if (listInts.Contains(-1) {
    int i = listInts.IndexOf(-1);
    listInts.Remove(i);
    // etc.
} 
```

......但我知道这散发出比整个鸡貂更臭的代码气味。

有什么更好的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T00:04:25.703

```
listInts.RemoveAll(t => t < 0) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-02T00:03:57.210

我会使用 LINQ：

```
listInts = listInts.Where(i => i >= 0).ToList(); 
```

根据将如何使用它，您还可以避免`ToList()`调用并且不重新保存值：

```
var positiveInts = listInts.Where(i => i >= 0); 
```

这仍然可以让您根据需要进行枚举。

如果需要在原地更改列表，[`List<T>.RemoveAll`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)其实是一种更高效的方法：

```
listInts.RemoveAll(i => i < 0); 
```

但是，我不喜欢这种方法，因为它会导致副作用，并且如果您使用其他 LINQ 扩展方法，往往会造成混淆（因此妨碍维护）。

# html - 更改图像和侧边栏

> ID：10858738
> 
> 赞同：0
> 
> 时间：2012-06-02T00:02:19.087
> 
> 标签：html, css, tabview

我正在尝试通过单击鼠标来获得下拉菜单的外观。我到目前为止的 html 看起来有点像这样

```
<div id="tabs">
<ul id="tab_list">
    <li><a href="" id="tab1" class="active">Contents</a></li>
    <li><a href="" id="tab1" class="active">Contents</a></li>
    <li><a href="" id="tab1" class="active">Contents</a></li>
</ul>
</div>
<div id="tab_contents">
<div class="">
<h2>The table of contents</h2>
<p>The descriptive text for this tab</p>
</div>
<div class="hide">
<h2>About the author</h2>
</div>
<div class="hide">
<h2>About the downloads</h2>
</div>
</div> 
```

和CSS

```
#tabs{margin-top: 1em;} 
#tab_list{margin: 0;
          padding: 3px 6px;
          border-bottom: 1px solid black;}            
#tab_list li {list-style-type: none;
              display: inline;}               
#tab_list li a {padding: 3px 1em;
                margin-left: 3px;
                text-decoration: none;
                font-weight: bold;
                color: black;
                background: yellow;
                border: 1px solid black;
                border-bottom: none;}                   
#tab_list li a:hover{background: white;
                    border-color: black;}                       
#tab_list li a:active{background-color: white;
                      border-bottom: 1px solid white;}                        
#tab_contents div{padding: 5px 10px 10px;
                  border: 1px solid black;
                  border-top: 0;
                  height: 100px;}                     
.hide {display: none;} 
```

现在我想根据我选择的类别隐藏和显示每个内容页面。我怎样才能获得这种效果？请直接在我的示例中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T00:13:57.240

如果我正确理解你想要什么，我不确定没有 js 是否可以完成，为什么你有相同 id 的标签？

# ruby - Ruby：多模块声明

> ID：10858741
> 
> 赞同：1
> 
> 时间：2012-06-02T00:02:52.133
> 
> 标签：ruby

我试图理解一段带有多个模块的代码

```
module a; module b; module c;

def foo
    #something 
end

end
end
end 
```

那么上面的代码到底是什么意思呢？是不是所有 3 个模块都有 foo 并且我可以访问 a.foo 或 b.foo 等...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T02:28:10.533

我可以看到这会令人困惑。它的布局非常糟糕。将模块声明拆分为单独的行，这样更有意义。如果写在一行上，Ruby 允许用分号分隔某些内容……这在这里被滥用，只会导致混乱。

如果布局正确，代码会扩展到此：

```
module a
  module b
    module c
      def foo
        #something 
      end
    end
  end
end 
```

使用分号在单行上编写定义的其他示例包括：

```
class Foo < Bar; def zip; if @terrifying; puts "Yes"; else; puts "No"; end; end; end 
```

您可能会明白为什么我说这写得不好。此外，模块名称应以大写字母开头。

# android - Android无法在mac power book上旋转模拟器

> ID：10858743
> 
> 赞同：0
> 
> 时间：2012-06-02T00:03:37.833
> 
> 标签：android

我尝试了每个组合键，在我的 Mac 上它不会旋转，我可以在我的 Windows 计算机上旋转它，我尝试了命令箭头键、ctrl 箭头键、选项箭头键、命令 f11、f11 和一堆其他组合键。

有没有办法做到这一点？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T00:06:32.300

您是否使用`F1`,`F2`等作为标准功能键？

1.  进入**系统偏好设置**。
2.  单击**键盘**。
3.  选中**使用所有 F1、F2 等键作为标准功能键**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T00:32:44.153

可能已经尝试过但是：**Cmd+F12**？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T01:10:08.807

你试过用吗，

**Fn+Ctrl+F12**

# jquery - 带有验证的 Jquery 问题

> ID：10858744
> 
> 赞同：0
> 
> 时间：2012-06-02T00:03:39.947
> 
> 标签：jquery

我在下面有问题我的个人资料页面包含用户名，电子邮件，城市等...执行验证时，我将检查用户名是否已经存在以及其他常规内容，例如电子邮件验证，整数检查等...我的问题是用户名检查是ajax 调用，所以在完成用户名检查验证之前完成并插入了已经存在的错误用户名..我怎样才能防止这种情况发生。

我的代码在下面

```
function doValidation()
{   
var err = '0' ;
var errWebuser='0';
if($('#FHE_0_user_name').val()!="")
    {
    alert("call check");
    errWebuser=checkWebUserName('FHE_0_user_name');
    alert(errWebuser);
    }
$('.required input').each(function(){
    if(  ($(this).val() == '')  )
    {
        var id = $(this).attr('id');
        err = '1';
        $(this).css('border','1px solid #F00');
        appendError(id,'required');

    } 
```

在那个 checkWebUserName 是 ajax 调用

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T00:24:46.787

首先执行所有客户端验证，如果都通过，则在单个数据库事务中执行服务器端验证和创建。阅读数据库事务。您不想在同一步骤中混合使用客户端和服务器端验证。

# android - android广播接收器和Application对象

> ID：10858746
> 
> 赞同：1
> 
> 时间：2012-06-02T00:03:50.440
> 
> 标签：android, broadcastreceiver

我在 XML 清单中定义了一个广播接收器。我的另一个应用程序正在通过广播向接收者发送一些事件。我还在清单中定义了一个应用程序对象。当一个活动被触发时，应用程序 on create 方法被触发。但是，广播接收器并非如此。有没有办法连接广播接收器，使其成为应用程序的“一部分”并启动该对象的 oncreate 方法？

# c - “fread()”、“fwrite()”和“fseek()”的意外行为

> ID：10858749
> 
> 赞同：3
> 
> 时间：2012-06-02T00:04:24.543
> 
> 标签：c, stdio

我写了一个简单的 C 程序，它接受一个`.txt`文件并用连字符替换所有空格。然而，程序进入了一个无限循环，结果是无穷无尽的连字符数组。

这是输入文件：

```
a b c d e f 
```

这是进程崩溃后的文件：

```
a----------------------------------------------------------------------------
----------------------------------------... (continues thousands of times)... 
```

`fread()`我猜测,`fwrite()`和的意外行为的原因`fseek()`，或者我对这些功能的误解。这是我的代码：

```
#include <stdlib.h>
#include <stdio.h>

#define MAXBUF 1024

int main(void) {

    char buf[MAXBUF];
    FILE *fp;
    char c;
    char hyph = '-';

    printf("Enter file name:\n");
    fgets(buf, MAXBUF, stdin);
    sscanf(buf, "%s\n", buf);   /* trick to replace '\n' with '\0' */

    if ((fp = fopen(buf, "r+")) == NULL) {
        perror("Error");
        return EXIT_FAILURE;
    }

    fread(&c, 1, 1, fp);

    while (c != EOF) {
        if (c == ' ') {
            fseek(fp, -1, SEEK_CUR); /* rewind file position indicator to the position of the ' ' */
            fwrite(&hyph, 1, 1, fp); /* write '-' instead */
        }
        fread(&c, 1, 1, fp); /* read next character */
    }

    fclose(fp);

    return EXIT_SUCCESS;
} 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T00:10:03.343

你有两个问题：

1）您应该检查 fread 返回您请求的项目数，例如您得到 1 返回。

2）然后您应该检查 feof(fp)，而不是将您读取的字符与 EOF 进行比较。这将告诉您您的阅读是否由于 EOF 或其他原因返回了较少/没有项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T00:34:37.357

你有几个问题...

检查标准 C 库函数返回的类型以及返回值的含义。标准 C 库定义`EOF`为*整数*-1。由于完整的字符集是 256 个字符，并且 char 类型可以容纳 0 到 255（256 个差异值），因此有必要制作`EOF`一个整数。

撇开所有的咆哮不谈......你也在检查`EOF`错误。

问题，详细说明：

您应该检查返回值`fread`

```
if( fread(&c, 1, 1, fp) != 1 )
{
    // Handle the error
}

// `EOF` is the integer -1\.  It will not fit in a char.  So, your while loop becomes endless unless you get a -1 in the data stream

// The "correct" way to do what you want to do is using the stdlib function feof(fp)
while( !feof( fp ) )
{
    if (c == ' ')
    {
        // You should check the value returned by fseek for errors
        fseek(fp, -1, SEEK_CUR); /* rewind file position indicator to the position of the ' ' */
        // You should check the value returned by fwrite for errors
        fwrite(&hyph, 1, 1, fp); /* write '-' instead */
    }

    if( fread(&c, 1, 1, fp) != 1 )
    {
        // Handle the error
    }
} 
```

综上所述……在现代系统上一次读取一个字符是非常低效的。调整您的代码以一次读取一个已满的缓冲区并一次将整个修改后的缓冲区写出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-08T15:06:23.083

原因：

对于为更新而打开的文件（包含“+”号的文件），在其上允许输入和输出操作，应在读取操作之前刷新流（fflush）或重新定位（fseek、fsetpos、rewind）写操作。在读取操作之后的写入操作之前（只要该操作未到达文件末尾），应重新定位流（fseek，fsetpos，rewind）。

解决方案：

您应该添加“fflush(fp);” 在 fwrite 行之后。

# java - 从对象获取 ArrayList

> ID：10858754
> 
> 赞同：1
> 
> 时间：2012-06-02T00:04:43.940
> 
> 标签：java, object, arraylist

我有一种方法可以返回一个带有两个数组列表的对象：

```
return new Object[] {work, play}; 
```

我正试图用另一种方法让他们回来。我曾尝试强制转换为 ArrayList，但我收到错误“需要数组，但找到了 java.lang.Object”。

```
ArrayList setWork = (ArrayList)obj[0];
ArrayList setPlay = (ArrayList)obj[1]; 
```

ArrayList 创建的完整代码：

```
public static Object[] getWorkandPlay(ArrayList al) {

    ArrayList work = new ArrayList();
    ArrayList play = new ArrayList();

    for (int i=0; i<al.size(); i++){
        String item = (String) al.get(i);

        if (item.startsWith("w.")) {
            System.out.println("w " + item);
            work.add(item);
        } else if (item.startsWith("p.")) {
            System.out.println("p " + item);
            play.add(item);
        } else {
            System.out.println("Entries must start with either w. or p.\n");
        }
    }
    return new Object[] {work, play};
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:09:17.530

返回新对象 [] {工作，游戏}；我认为返回一个对象数组。尝试 ArrayList 结果 = new ArrayList(); 将工作和播放放在结果中，然后返回结果。然后

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T00:15:05.747

在您的调用代码中，您应该将 obj 的引用类型设置为 Object 数组。你的代码中可能有 `Object obj = getWorkandPlay(anArrayList);`。将其更改为`Object[] obj = getWorkandPlay(anArrayList);`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T00:19:53.177

我正在根据您的代码做这样的事情，它可以工作......

```
class Test{
    public static Object[] getWorkandPlay(ArrayList al) {
        ArrayList work = new ArrayList();
        ArrayList play = new ArrayList();

        for (int i=0; i<al.size(); i++){
            String item = (String) al.get(i);

            if (item.startsWith("w.")) {
                System.out.println("w " + item);
                work.add(item);
            } else if (item.startsWith("p.")) {
                System.out.println("p " + item);
                play.add(item);
            } else {
                System.out.println("Entries must start with either w. or p.\n");
            }
        }
        return new Object[] {work, play};
    }
    public static void main(String[] args) {
        ArrayList<String> al=new ArrayList<>();
        al.add("w. test");
        al.add("p. test");
        Object[] obj=getWorkandPlay(al);
        ArrayList setWork = (ArrayList)obj[0];
        ArrayList setPlay = (ArrayList)obj[1];
    }
} 
```

输出

```
w w. test
p p. test 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T00:20:15.820

您的代码中的某处可能有**错字。**这为我编译：

```
import java.util.*;

public class SampleClass {

    public static void main(String[] args) {
        // Create an ArrayList and add some sample Strings
        ArrayList al = new ArrayList();
        al.add("w. test");
        al.add("p. test");

        Object[] obj = getWorkandPlay(al);

        ArrayList setWork = (ArrayList)obj[0];
        ArrayList setPlay = (ArrayList)obj[1];
    }

    public static Object[] getWorkandPlay(ArrayList al) {
        ArrayList work = new ArrayList();
        ArrayList play = new ArrayList();

        for (int i=0; i<al.size(); i++){
            String item = (String) al.get(i);

            if (item.startsWith("w.")) {
                System.out.println("w " + item);
                work.add(item);
            } else if (item.startsWith("p.")) {
                System.out.println("p " + item);
                play.add(item);
            } else {
                System.out.println("Entries must start with either w. or p.\n");
            }
        }

        return new Object[] {work, play};
    }
} 
```

# javascript - 将 JQuery 与 HTML 画布一起使用？

> ID：10858755
> 
> 赞同：0
> 
> 时间：2012-06-02T00:04:46.507
> 
> 标签：javascript, jquery, html, canvas

自从我完成网络编程以来已经有一段时间了，我正在尝试重新开始。但是，我似乎无法让 JQuery 工作。

在我的 javascript 文件中，我有以下代码：

```
$(document).ready(function() {
    $('#canvas').mousedown(function(e){
      alert("I am an alert box!");
    });
}); 
```

但是，当我单击画布时没有任何反应。

我知道所有内容都已正确链接，因为在我的 javascript 文件顶部我有这个：

```
function loader()
{
var canvas = $('#canvas')[0].getContext('2d');
canvas.fillStyle = "rgba(200, 0, 200, 0.5)";
canvas.fillRect(225, 105, 200, 200);
} 
```

（在我拥有的 HTML 文件中`<body onload="loader()">`）

当我加载页面时，它工作正常并显示一个粉红色的框。

任何人都知道为什么会发生这种情况？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T00:16:15.800

知道了！

问题是我在 jQuery 文件之前链接了我的 javascript 文件。

基本上，切换了这两行：

```
<script type="text/javascript" src="canvas.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

# iphone - 上传图片到服务器时出现编码问题！为什么这段代码会出错？

> ID：10858758
> 
> 赞同：0
> 
> 时间：2012-06-02T00:05:14.753
> 
> 标签：iphone

我正在尝试使用发布操作将一些数据上传到 Web 服务但是在 didReceiveData 上发生以下错误。

```
400 Bad Request
a 404 Not Found 
```

你能帮我解决这个编码问题吗？

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url                                                       cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60];
NSMutableData *postData = [[NSMutableData alloc] init];
NSString *boundary = [NSString stringWithString:@"------------------147378098Aadfsn1987XdaoTwq"];

// First name
[postData appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[@"Content-Disposition: form-data; name=\"firstname\"\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[firstName dataUsingEncoding:NSUTF8StringEncoding]];

NSData  *photo = UIImageJPEGRepresentation(takePhoto, 0.5f);
// Photo data
[postData appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[@"Content-Disposition: form-data; name=\"picture1\"; filename=\"photo.jpg\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
if (takePhoto != nil) {
    [postData appendData:photo];
}

NSString *postLength = [NSString stringWithFormat:@"%d", postData.length];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary] forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];
NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:34:12.000

这些是服务器错误而不是 iPhone 错误。您发送错误的 URL 或您的服务未正确读取您的 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T05:14:41.237

试试这个从 iPhone 上传照片到服务器的代码。

```
- (IBAction)uploadImage {
/*
 turning the image into a NSData object
 getting the image back out of the UIImageView
 setting the quality to 90
*/
NSData *imageData = UIImageJPEGRepresentation(image.image, 90);
// setting up the URL to post to
NSString *urlString = @"Your URL string where you want to POST Photo";

// setting up the request object now
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

/*
 add some header info now
 we always need a boundary when we post a file
 also we need to set the content type

 You might want to generate a random boundary.. this is just the same
 as my output from wireshark on a valid html post
*/
NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

/*
 now lets create the body of the post
*/
NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"rn--%@rn",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name="userfile"; filename="ipodfile.jpg"rn"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-streamrnrn"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
[body appendData:[[NSString stringWithFormat:@"rn--%@--rn",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
// setting the body of the post to the reqeust
[request setHTTPBody:body];

// now lets make the connection to the web
NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

NSLog(returnString);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T01:21:03.210

您的网址可能未编码。试试这样的..

```
NSString* url =
[@"http://your-url-.com" stringByAddingPercentEscapesUsingEncoding:
                    NSASCIIStringEncoding]; 
```

# javascript - 在javascript中转换日期格式

> ID：10858759
> 
> 赞同：0
> 
> 时间：2012-06-02T00:05:25.057
> 
> 标签：javascript, jquery

我有一个输入字段，在页面加载时看起来像这样：

```
<input type="input" id="start_date" name="start_date" value="May 12, 2012"/> 
```

我希望发生以下情况：

*   当用户单击该字段输入日期时，格式将更改为 YYYY-MM-DD。(2012-05-12)
*   用户离开该字段后，格式会更改回 MMM DD, YYYY（2012 年 5 月 12 日）。
*   通过邮寄方式提交数据时，格式为 YYYY-MM-DD (2012-05-12)。

我将如何使用 jQuery 完成此任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T00:30:43.660

如果您不想依赖特定的框架/插件，可以这样做：

```
$("#start_date").click(function() {
    var d = new Date($(this).val());
    $(this).val(d.getFullYear() + "-"
        + String(d.getMonth() + 101).slice(-2) + "-"
        + String(d.getDate() + 100).slice(-2));
}).blur(function() {
    // Eventual format checking goes here

    var m = $(this).val().split("-"),
        d = new Date(m[0], m[1] - 1, m[2]),
        s = d.toString().split(" ");
    $(this).val(s[1] + " " + s[2] + ", " + s[3]);
}); 
```

# android - 如何从 Android 应用程序将图像上传到 Twitter

> ID：10858767
> 
> 赞同：1
> 
> 时间：2012-06-02T00:06:29.677
> 
> 标签：android, twitter, image-upload

我已经在 Android 中执行了 Twitter 集成。我已经完成了状态（消息发布部分）。但我无法在 Twitter 上发布图片。请让我尽快一步一步地知道。提前致谢。

# php - Perl 中的动态下拉列表

> ID：10858769
> 
> 赞同：0
> 
> 时间：2012-06-02T00:06:35.423
> 
> 标签：php, javascript, perl, forms, dynamic

我是网络编程的新手，但最近我在暑期实习期间接到了一些脚本作业。我一直在使用 Perl 为我雇主的内部网站创建 CGI 脚本，主要供那里的开发人员使用（非关键）。我目前正在处理的问题是根据服务器上选择的目录生成报告。用户应该能够从下拉框中选择一个选项，而另一个下拉框应该有子选项。这些必须是动态的；如果第一个框被更改，则必须重新生成第二个框中的选项。Perl 能做到这一点吗？PHP 或 JavaScript 会是解决这个问题的更好工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T00:08:54.507

您可以使用 Perl 以及其他任何东西。[您可能会从CGI::Ajax](http://p3rl.org/CGI%3a%3aAjax)模块中受益。

# gwt - 未找到 GWT+JPA Persistence.Exception 源代码

> ID：10858772
> 
> 赞同：2
> 
> 时间：2012-06-02T00:06:57.463
> 
> 标签：gwt, jpa, persistence, requestfactory

我正在尝试使用 JPA 创建一个简单的数据库连接。它工作正常，但是当我尝试向客户端抛出异常时，我得到了错误：

```
[ERROR] [browsereditor] - Line 210: No source code is available for type javax.persistence.EntityExistsException; did you forget to inherit a required module?

[ERROR] [browsereditor] - Line 212: No source code is available for type javax.persistence.EntityNotFoundException; did you forget to inherit a required module? 
```

我在开发模式下没有错误，它编译得很好，但是当应用程序模块被加载时，我得到了错误。

我在 server/Composer 和 client/Presenter 类中有所需的导入

```
import javax.persistence.EntityExistsException;
import javax.persistence.EntityNotFoundException; 
```

我还将以下 jar 添加到类路径和构建路径中：

javax.persistence.jar

jpa-annotations-source.jar (http://code.google.com/p/google-web-toolkit/issues/detail?id=1830#c14)

我也尝试添加到 gwt.xml

```
<source path='client'/>
<source path='shared'/>
<source path='server'/> 
```

关于如何告诉 eclipse 在哪里可以找到源代码的任何想法？

谢谢

这是代码：

//从服务器中的 Composer.class 创建作曲家

```
 public static Composer createComposer(String name)
        throws EntityExistsException {
    Composer comp = new Composer();
    comp.setName(name);
    comp.setId(1);

    EntityManager entityManager = entityManager();
    entityManager.getTransaction().begin();
    entityManager.persist(comp);
    entityManager.getTransaction().commit();
    entityManager.close();

    return comp;
} 
```

///从 Presenter.class 中的 createComposer(above) 触发请求

```
req.fire(new Receiver<ComposerProxy>() {

                        public void onSuccess(ComposerProxy arg0) {

                            ComposerProxy comp;
                            comp = arg0;
                        }

                        public void onFailure(Throwable caught)
                                throws Throwable {
                            // Convenient way to find out which exception
                            // was thrown.
                            try {
                                throw caught;
                            } catch (EntityExistsException e) {

                            } catch (EntityNotFoundException e) {

                            }
                        }});
                }});

[ERROR] [browsereditor] - Line 210: No source code is available for type javax.persistence.EntityExistsException; did you forget to inherit a required module?
[ERROR] [browsereditor] - Line 212: No source code is available for type javax.persistence.EntityNotFoundException; did you forget to inherit a required module? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:09:29.507

您根本不能在客户端 GWT 代码中使用`EntityExistsException`或之类的类型。`EntityNotFoundException`

这些是普通的 Java 类，GWT 不知道如何将它们转换为 JavaScript。

您只能在客户端代码中使用非常有限的部分外部库。这些库（例如[Visualization](http://code.google.com/p/gwt-google-apis/)）是专门为客户端设计和准备的，需要在应用程序的模块中继承它们的 GWT 模块。

我认为你真正想做的是这样的：

```
public void onFailure(ServerFailure failure) throws Throwable {
    if(failure.getExceptionType().equals("javax.persistence.EntityExistsException")){
          ...
    }else if(failure.getExceptionType().equals("javax.persistence.EntityNotFoundException")){
       ...
    }
} 
```

因为您可以将服务器端异常的类型读取为字符串，请参阅[Receiver](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/index.html?com/google/gwt/core/client/GWT.html)和[ServerFailure](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/web/bindery/requestfactory/shared/ServerFailure.html)的 Javadoc 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T16:21:28.710

感谢 Piotr 的帮助。

这是我最终所做的代码：

客户端中的代码

```
req.fire(new Receiver<ComposerProxy>() {

                        public void onSuccess(ComposerProxy arg0) {

                            ComposerProxy comp;
                            comp = arg0;
                        }

                        public void onFailure(ServerFailure failure) {

                            serverError.getServerError(failure,
                                    "onAddButtonClicked");

                        }

                    }); 
```

我创建了一个类来处理错误

```
public class ServerError {

public ServerError() {
}

public void getServerError(ServerFailure failure, String message) {
    // Duplicate Key Error
    if (failure.getMessage().contains(
            "IntegrityConstraintViolationException")) {

        Window.alert("Duplicate Key " + message);
        return;
    }
    // Connection Error
    if (failure.getMessage().contains("NonTransientConnectionException")) {
        Window.alert("Connection error ");
        return;
    }
    // TimeOut Error
    if (failure.getMessage().contains("TimeoutException")) {
        Window.alert("Timeout Error" + message);
        return;
    }
    // Other Error
    else {
        Window.alert("Duplicate Key " + message);
        return;
    }

}
} 
```

服务器中的服务

```
public static Composer createComposer(String name) throws Throwable {
    EntityManager entityManager = entityManager();
    Composer comp = new Composer();

    try {
        comp.setName(name);
        comp.setId(1);

        entityManager.getTransaction().begin();
        entityManager.persist(comp);
        entityManager.getTransaction().commit();

    } catch (Exception e) {

        log.error("Error in Composer::createComposer( " + name + ") //"
                + e.toString());
        throw e;
    } finally {
        entityManager.close();
    }
    return comp;
} 
```

我发现的一个问题是变量“ServerFailure failure”仅包含 failure.message 中的信息；所有其他变量为空。

# c# - 它没有从 DataReader 获取任何数据

> ID：10858777
> 
> 赞同：0
> 
> 时间：2012-06-02T00:08:01.623
> 
> 标签：c#, asp.net, sqldatareader

我在 C# 中使用 N tiers tec 进行工作，试图使其易于使用并且能够更改任何数据库类型而无需重新编写所有 cod，我的代码在这里没有出现任何错误，但它没有得到我的文本框的任何值
（我试图从表中获取数据到许多文本框以便稍后更新它）以及代码的工作原理：**{ 首先，我创建了一些函数来获取任何设置的任何类型的参数或设置任何命令，然后我创建其他函数来执行我设置或从数据库中获取的所有函数我在文件夹名称中构建它（数据访问层）然后我创建了其他文件夹（数据构建层）来使用所有这些功能来完成我想要在任何页面中执行的操作（插入、更新、删除、选择），最后我认为我这样做是为了调用我在（数据构建层）到我的页面或控件，我这样做是因为如果我更改数据库类型，我只更改一个类，其他类仍然相同我希望我解释得足够多（抱歉我的英语不够好）}**

代码 ：

**类 DataAccessLayer**

```
public static void Setcommand (SqlCommand cmd,CommandType type,string commandtext)
{
    cmd.CommandType=type;
    cmd.CommandText=commandtext;

}

public static void AddSQLparameter(SqlCommand cmd, int size,SqlDbType type,object value,string paramName,ParameterDirection direction)
{
    if (cmd == null)
{
     throw (new ArgumentException("cmd"));
}

    if (paramName == null)
{
     throw (new ArgumentException("paramName"));
}
    SqlParameter param=new SqlParameter();
    param.ParameterName= paramName;
    param.SqlDbType=type;
    param.Size=size;
    param.Value=value;
    param.Direction=direction;
    cmd.Parameters.Add(param);
}

public static SqlDataReader ExecuteSelectCommand(SqlCommand cmd)
{
    if (cmd == null)
    {
        throw (new ArgumentNullException("cmd"));
    }
    SqlConnection con = new SqlConnection();
    cmd.Connection = con;
    con.Open();
    SqlDataReader dr = cmd.ExecuteReader();
    con.Close();        
    return dr ;

} 
```

**类 DatabuildLayer**

```
SqlCommand com;
public DatabuildLayer()
{
  com = new SqlCommand();
  //
  // TODO: Add constructor logic here
  //
}
public SqlDataReader SelectCatalog(int catid)
{
   DataAccessLayer.Setcommand(com, CommandType.Text, "select    catname,catdescription,photo from category where catid=@catid" );
     DataAccessLayer.addSQLparameter(com,16,SqlDbType.Int,catid,"@catid",ParameterDirection.Input);

    return DataAccessLayer.ExecuteSelectCommand(com);;
} 
```

这是我最后一个将数据检索到某个文本框的代码

在我的页面加载中：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        DatabuildLayer= new DatabuildLayer();
        SqlDataReader dr ;
         dr = obj.SelectCatalog(catselectddl.SelectedIndex);
         if (dr.Read())
         {
             catnametxt.Text = dr["catname"].ToString();
             catdestxt.Text = dr["catdescription"].ToString();
         }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:22:14.943

您当前的包装器代码没有做任何特别有用的事情（只是替换现有方法或您自己的方法*做同样的事情*），并且它**没有**正确关闭连接。这……有点乱。

如果您对原始 ADO.NET 接口还不是很熟悉，那么可以考虑使用类似“ [dapper](http://nuget.org/packages/Dapper) ”的东西，它会为您完成所有这些工作，并使用一个*健全*的API：

```
short catid = 16;
using(var conn = GetOpenConnection()) {
    var row = conn.Query(
        "select catname,catdescription,photo from category where catid=@catid",
        new { catid }).FirstOrDefault();
    if(row != null) {
        string name = row.catname, desc = row.catdescription;
        // ...
    }
} 
```

或者，如果您有一个具有 CatName / CatDescription 属性的类：

```
 var obj = conn.Query<Catalogue>(
        "select catname,catdescription,photo from category where catid=@catid",
        new { catid }).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T00:45:22.533

查询是否有可能没有返回任何内容，而 dr.Read() 是否返回 false？假设代码实际执行（从这里很难判断），这可能是唯一会阻止它工作的东西 - 无论是那个还是空列。

值得我认为，您的代码需要从结构和约定的角度进行一些整理。您可能应该查看您的代码并考虑 .NET 框架的命名准则。当其他人阅读您的代码时，他们会希望它的格式与本文档一致。[http://msdn.microsoft.com/en-us/library/xzf533w0(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/xzf533w0(v=vs.71).aspx)

此外，现在大多数使用 ASP.NET 的人都在尝试寻找某种方法来将外部依赖项（例如数据库）注入到他们的代码中，使用像 [http://webformsmvp.com/](http://webformsmvp.com/)上提供的 WebFormsMVP 这样的框架以及像IoC 这样的容器autofac 可在[http://code.google.com/p/autofac/ 获得](http://code.google.com/p/autofac/)。

使用这种方法，您可以将所有外部依赖项从接口后面的应用程序中推出，这使得插入不同的数据库引擎变得相当简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T02:49:51.613

根据我的经验，当您关闭与 DataReader 关联的连接时，无法再从阅读器中检索任何内容。

```
//You closed the connection before returning the dr in the your method below:
public static SqlDataReader ExecuteSelectCommand(SqlCommand cmd)
{
   if (cmd == null)
   {
       throw (new ArgumentNullException("cmd"));
   }
   SqlConnection con = new SqlConnection();
   cmd.Connection = con;
   con.Open();
   SqlDataReader dr = cmd.ExecuteReader();
   con.Close();  //here your connection was already closed
   return dr ;   //this dr is disconnected
} 
```

# delphi - 如何让编辑器在 Virtualtreeview 中保持活力？

> ID：10858778
> 
> 赞同：7
> 
> 时间：2012-06-02T00:08:39.530
> 
> 标签：delphi, delphi-2009, delphi-2007, virtualtreeview

我正在尝试基于 VirtualTreeView 构建一个简单的 2 列网格“属性编辑器”。

（我想模仿在 Delphi 的 IDE 对象检查器上看到的外观和用户体验）

* * *

该组件几乎可以工作并且可以处理多个编辑器， **但我面临一个烦人的错误：**

当我单击一个新节点（新行）时，该节点被选中并出现编辑器，而与我单击的列无关。这是预期的，可以的。

然后，当我单击同一行的第一列时，我希望看到我的编辑器内容得到验证并且编辑器保持焦点（就像在 delphi 的对象检查器中一样）。

但是编辑器内容被验证然后它消失并且整个节点（行）被选中。编辑器不会返回（即使我单击第二列），直到我选择另一个节点并单击先前选择的节点。

**编辑：**添加了关于我的代码的说明和精度。

![问题说明](../Images/a3402c29c51b95dea1c1d627db7cd04c.png)

*关于代码：* 我没有在此处插入代码，因为我使用（作为起点）与高级演示（属性页面）上找到的完全相同的代码

* * *

我尝试并发现了什么：

[在这里找到](http://www.soft-gems.net/index.php/all-downloads "在页面上下载项目#3")的 2003 年编译的高级演示（属性树页面）似乎与我对组件（和虚拟树视图）的期望一样。

但是当我编译这个相同的演示（我在谷歌代码的当前主干上尝试使用版本 4.5.2、4.8.7 甚至 5.0.0，在 delphi 2007 和 2009 上）时，错误再次出现！

我首先认为在 2003 年和最近的版本之间有一个记录在案的重大变化，但我找不到任何东西。我也尝试了所有可用的选项来解决这个问题，但没有成功。

我仍然不知道这个问题是来自新的 delphi RTL 还是 virtualtreeview 中的重大更改（错误？）。

所以我的问题：

*   编译 Advanced demo 时有同样的问题吗？
*   代码中的任何提示或解决方法可以解决我的问题吗？

* * *

作为旁注，我今天下午几乎放弃了 virtualtreeview，我想尝试使用另一个组件的解决方案...我发现了这个[有趣的问题](https://stackoverflow.com/questions/10701189 "自定义对象检查器组件？")并决定尝试 berg 的组件，但在阅读关于的建议时在购买过程中停止了他们的主页（请参阅我对相关问题的评论）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:27:15.593

VST 的 onChange 只是通过更改节点的选择来调用。如果节点已经被选中，状态将不再改变。因此，您必须自己实现类似于 Object Inspector 的行为，例如通过在 OnClick-Callback 中调用 VST 的 EditNode()-Method：

```
procedure TMainForm.VSTClick(Sender: TObject);
var node: PVirtualNode;
begin
  node:= VST.GetFirstSelected();
  if(node <> nil) then
    VST.EditNode(node, EDITABLE_COLUMN_INDEX);
end; 
```

# android - SQLite 日期 - 从今天开始查找事件

> ID：10858784
> 
> 赞同：0
> 
> 时间：2012-06-02T00:10:02.000
> 
> 标签：android, sqlite

我想从 SQLite 数据库中检索具有`start_time`“今天”的事件列表。`start_time`包含一个时间戳，例如这样`1338613200000`。

我试过这个：

`SELECT * FROM events WHERE date(start_time, 'unixepoch')=date('now')`

不工作...

我用这样的语句在 MySQL 中实现了同样的事情：

`SELECT * FROM events WHERE DATE(start_time)=CURDATE();`

**编辑：** 这是我的时间戳的问题。他们三个零太多了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:51:30.253

自 Unix 时代以来，Java 使用毫秒，而我猜 SQLite 使用秒。

在查询数据库之前将 System.currentTimeMillis() 除以 1000。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T00:22:01.343

你可以尝试这样的事情：

```
SELECT * FROM events 
WHERE datetime(start_time,'unixepoch', 'localtime')
BETWEEN DATE('now') AND DATE('now', '+1 day') 
```

[在此处](http://www.sqlite.org/lang_datefunc.html)查看更多详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T00:26:08.650

尝试

```
Calendar c= Calendar.getInstance();
long l=c.getTimeInMillis(); 
```

并执行以下操作：

```
SELECT * FROM events WHERE start_time=l; 
```

看看这是否有效。

# go - Go 中标签的用途是什么？

> ID：10858787
> 
> 赞同：516
> 
> 时间：2012-06-02T00:10:27.360
> 
> 标签：go, struct, reflection, tags

在[Go Language Specification](https://golang.org/ref/spec#Struct_types)中，它提到了标签的简要概述：

> 字段声明后面可以跟一个可选的字符串文字标记，它成为相应字段声明中所有字段的属性。标签通过反射界面可见，但在其他方面被忽略。
> 
> ```
> // A struct corresponding to the TimeStamp protocol buffer.
> // The tag strings define the protocol buffer field numbers.
> struct {
>   microsec  uint64 "field 1"
>   serverIP6 uint64 "field 2"
>   process   string "field 3"
> } 
> ```

这是一个非常简短的解释 IMO，我想知道是否有人可以向我提供这些标签的用途？

* * *

## 回答 #1

> 赞同：865
> 
> 时间：2015-06-17T10:49:23.137

字段的标签允许您将元信息附加到可以使用反射获取的字段。通常它用于提供有关如何将结构字段编码为另一种格式或从另一种格式解码（或从数据库中存储/检索）的转换信息，但您可以使用它来存储您想要的任何元信息，或者用于另一个包装或供您自己使用。

正如 的文档中所提到的[`reflect.StructTag`](http://golang.org/pkg/reflect/#StructTag)，按照惯例，标记字符串的值是一个以空格分隔的`key:"value"`对列表，例如：

```
type User struct {
    Name string `json:"name" xml:"name"`
} 
```

`key`通常表示后续用于的包，例如`"value"`密钥`json`由[`encoding/json`](https://golang.org/pkg/encoding/json/)包处理/使用。

如果要在 中传递多个信息`"value"`，通常用逗号 ( `','`) 分隔来指定，例如

```
Name string `json:"name,omitempty" xml:"name"` 
```

通常一个短划线值 ( `'-'`)`"value"`表示从进程中排除字段的方式（例如，如果`json`它意味着不编组或取消编组该字段）。

### 使用反射访问自定义标签的示例

我们可以使用反射（[`reflect`](https://golang.org/pkg/reflect/)包）来访问结构字段的标记值。基本上我们需要获取[`Type`](https://golang.org/pkg/reflect/#Type)我们的结构体，然后我们可以查询字段，例如使用`Type.Field(i int)`or `Type.FieldByName(name string)`。这些方法返回一个[`StructField`](https://golang.org/pkg/reflect/#StructField)描述/表示结构字段的值；并且`StructField.Tag`是类型[ `StructTag`] [6](https://golang.org/pkg/reflect/#StructTag)的值，它描述/表示标签值。

之前我们谈到了*“约定”*。这个约定意味着如果您遵循它，您可以使用[`StructTag.Get(key string)`](https://golang.org/pkg/reflect/#StructTag.Get)解析标签值并返回您指定的值的`"value"`方法`key`。该*约定*已实现/内置到此`Get()`方法中。如果您不遵守约定，`Get()`将无法解析`key:"value"`对并找到您要查找的内容。这也不是问题，但是您需要实现自己的解析逻辑。

还有一个[`StructTag.Lookup()`](https://golang.org/pkg/reflect/#StructTag.Lookup)（在 Go 1.7 中添加）*“类似`Get()`但将不包含给定键的标签与将空字符串与给定键相关联的标签区分开来”*。

所以让我们看一个简单的例子：

```
type User struct {
    Name  string `mytag:"MyName"`
    Email string `mytag:"MyEmail"`
}

u := User{"Bob", "bob@mycompany.com"}
t := reflect.TypeOf(u)

for _, fieldName := range []string{"Name", "Email"} {
    field, found := t.FieldByName(fieldName)
    if !found {
        continue
    }
    fmt.Printf("\nField: User.%s\n", fieldName)
    fmt.Printf("\tWhole tag value : %q\n", field.Tag)
    fmt.Printf("\tValue of 'mytag': %q\n", field.Tag.Get("mytag"))
} 
```

[输出（在Go Playground](http://play.golang.org/p/Al_m3GYl5j)上试试）：

```
Field: User.Name
    Whole tag value : "mytag:\"MyName\""
    Value of 'mytag': "MyName"

Field: User.Email
    Whole tag value : "mytag:\"MyEmail\""
    Value of 'mytag': "MyEmail" 
```

* * *

GopherCon 2015 有一个关于结构标签的演示文稿，称为：

**[结构标签的多面性（幻灯片）](https://github.com/gophercon/2015-talks/blob/master/Sam%20Helman%20%26%20Kyle%20Erf%20-%20The%20Many%20Faces%20of%20Struct%20Tags/StructTags.pdf)**（和[视频](https://www.youtube.com/watch?v=_SCRvMunkdA)）

### 以下是常用标签键的列表：

*   `json     `- 由[`encoding/json`](https://golang.org/pkg/encoding/json/)包使用，详细信息见[`json.Marshal()`](https://golang.org/pkg/encoding/json/#Marshal)
*   `xml      `- 由[`encoding/xml`](https://golang.org/pkg/encoding/xml/)包使用，详细信息见[`xml.Marshal()`](https://golang.org/pkg/encoding/xml/#Marshal)
*   `bson     `- 由[gobson](https://labix.org/gobson)使用，详细信息在[`bson.Marshal()`](http://godoc.org/gopkg.in/mgo.v2/bson#Marshal); 也由[mongo-go](https://github.com/mongodb/mongo-go-driver)驱动程序，在[bson package doc中有详细说明](https://pkg.go.dev/go.mongodb.org/mongo-driver/bson#hdr-Structs)
*   `protobuf `-[`github.com/golang/protobuf/proto`](http://godoc.org/github.com/golang/protobuf/proto)使用者，在包装文档中有详细说明
*   `yaml     `- 由[`gopkg.in/yaml.v2`](https://godoc.org/gopkg.in/yaml.v2)包使用，详细信息见[`yaml.Marshal()`](https://godoc.org/gopkg.in/yaml.v2#Marshal)
*   `db       `- 被[`github.com/jmoiron/sqlx`](https://godoc.org/github.com/jmoiron/sqlx)包使用；也被[`github.com/go-gorp/gorp`](https://github.com/go-gorp/gorp)包使用
*   `orm      `- 由[`github.com/astaxie/beego/orm`](https://godoc.org/github.com/astaxie/beego/orm)包使用，详见[Models – Beego ORM](https://beego.me/docs/mvc/model/overview.md)
*   `gorm     `- 使用[`gorm.io/gorm`](https://gorm.io/)，示例可以在他们的[文档中找到](https://gorm.io/docs/)
*   `valid    `- 由[`github.com/asaskevich/govalidator`](https://github.com/asaskevich/govalidator)包使用，示例可以在项目页面中找到
*   `datastore`- 由[`appengine/datastore`](https://cloud.google.com/appengine/docs/go/datastore/reference)（Google App Engine 平台、Datastore 服务）使用，详情见[属性](https://cloud.google.com/appengine/docs/go/datastore/reference#hdr-Properties)
*   `schema   `- 用于[`github.com/gorilla/schema`](http://godoc.org/github.com/gorilla/schema)填充`struct`HTML 表单值，在包文档中有详细说明
*   `asn      `- 由[`encoding/asn1`](https://golang.org/pkg/encoding/asn1/)包使用，详细信息在[`asn1.Marshal()`](https://golang.org/pkg/encoding/asn1/#Marshal)和[`asn1.Unmarshal()`](https://golang.org/pkg/encoding/asn1/#Unmarshal)
*   `csv      `- 被[`github.com/gocarina/gocsv`](https://github.com/gocarina/gocsv)包使用
*   `env` - 被[`github.com/caarlos0/env`](https://github.com/caarlos0/env)包使用

* * *

## 回答 #2

> 赞同：163
> 
> 时间：2012-06-02T00:24:34.900

这是一个非常简单的标签示例，它与[`encoding/json`](http://golang.org/pkg/encoding/json/)包一起使用，以控制在编码和解码期间如何解释字段：

现场直播：[http ://play.golang.org/p/BMeR8p1cKf](http://play.golang.org/p/BMeR8p1cKf)

```
package main

import (
    "fmt"
    "encoding/json"
)

type Person struct {
    FirstName  string `json:"first_name"`
    LastName   string `json:"last_name"`
    MiddleName string `json:"middle_name,omitempty"`
}

func main() {
    json_string := `
    {
        "first_name": "John",
        "last_name": "Smith"
    }`

    person := new(Person)
    json.Unmarshal([]byte(json_string), person)
    fmt.Println(person)

    new_json, _ := json.Marshal(person)
    fmt.Printf("%s\n", new_json)
}

// *Output*
// &{John Smith }
// {"first_name":"John","last_name":"Smith"} 
```

json 包可以查看字段的标签并被告知如何映射 json <=> 结构字段，以及额外的选项，例如在序列化回 json 时是否应忽略空字段。

基本上，任何包都可以在字段上使用反射来查看标签值并对这些值进行操作。
[在反射包http://golang.org/pkg/reflect/#StructTag](http://golang.org/pkg/reflect/#StructTag)中有更多关于它们的信息：

> 按照惯例，标签字符串是可选用空格分隔的键：“值”对的串联。每个键都是一个非空字符串，由除空格 (U+0020 ' ')、引号 (U+0022 '"') 和冒号 (U+003A ':') 以外的非控制字符组成。每个值都被引用使用 U+0022 '"' 字符和 Go 字符串文字语法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-03T18:45:46.257

它是某种规范，指定包如何处理带有标签的字段。

例如：

```
type User struct {
    FirstName string `json:"first_name"`
    LastName string `json:"last_name"`
} 
```

json 标记通知`json`包编组以下用户的输出

```
u := User{
        FirstName: "some first name",
        LastName:  "some last name",
    } 
```

会是这样的：

```
{"first_name":"some first name","last_name":"some last name"} 
```

另一个例子是`gorm`包标签声明必须如何进行数据库迁移：

```
type User struct {
  gorm.Model
  Name         string
  Age          sql.NullInt64
  Birthday     *time.Time
  Email        string  `gorm:"type:varchar(100);unique_index"`
  Role         string  `gorm:"size:255"` // set field size to 255
  MemberNumber *string `gorm:"unique;not null"` // set member number to unique and not null
  Num          int     `gorm:"AUTO_INCREMENT"` // set num to auto incrementable
  Address      string  `gorm:"index:addr"` // create index with name `addr` for address
  IgnoreMe     int     `gorm:"-"` // ignore this field
} 
```

在此示例中，对于`Email`带有 gorm 标签的字段，我们声明数据库中字段 email 的对应列必须是 varchar 类型，最大长度为 100，并且它还必须具有唯一索引。

另一个例子是在包`binding`中最常使用的标签。`gin`

```
type Login struct {
    User     string `form:"user" json:"user" xml:"user"  binding:"required"`
    Password string `form:"password" json:"password" xml:"password" binding:"required"`
}

var json Login
if err := c.ShouldBindJSON(&json); err != nil {
     c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})
     return
} 
```

此示例中的绑定标记向 gin 包提示发送到 API 的数据必须具有用户和密码字段，因为这些字段是按要求标记的。

**所以一般标签是包需要知道他们应该如何处理不同结构类型的数据的数据，熟悉包需要的标签的最佳方法是完整地阅读包文档。**

# jquery - 使用jquery对话框上传文件不起作用

> ID：10858792
> 
> 赞同：2
> 
> 时间：2012-06-02T00:11:43.360
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-3, file-upload

我想使用 jquery 对话框上传文件。我创建了一个局部视图并在对话框中显示该局部视图。

问题是，当我直接浏览局部视图并上传文件时，它工作得很好。但是当我将部分视图放在 jquery 对话框中时，它会提交表单，但不提交文件。所以我有空值。我真的不明白这里有什么区别！

希望有人可以帮助我找出问题所在。

这是一些代码；

jQuery代码：

```
$('#UploadDialog').dialog({
        autoOpen: false,
        width: 580,
        resizable: false,
        modal: true,
        open: function (event, ui) {
        $(this).load('@Url.Action("Upload","Notes")');
        },
        buttons: {
            "Upload": function () {
                $("#upload-message").html(''); 
                $("#noteUploadForm").submit();
            },
            "Cancel": function () {
                $(this).dialog("close");
            }
        }
    });
    $(".uploadLink").click(function () {
        $('#UploadDialog').dialog('open');
        });
        return false;
}); 
```

部分观点：

```
@using (Ajax.BeginForm("Upload", "Notes", null, new AjaxOptions
{
UpdateTargetId = "upload-message",
InsertionMode = InsertionMode.Replace,
HttpMethod = "POST",
OnSuccess = "uploadSuccess"
}, new { id = "noteUploadForm" , enctype="multipart/form-data"}))
{
<div>
<div id="upload-message"></div>
<div class="editLabel">
    @Html.LabelFor(m => m.Notes.NoteTitle)
</div>
<div class="editText">
    @Html.TextBoxFor(m => m.Notes.NoteTitle)
</div>
<div class="clear"></div>

<div class="editLabel">
    @Html.Label("Upload file")
</div>
<div class="editText">
    <input type="file" name="file" />(100MB max size)
</div>

</div>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:40:21.603

那是因为您无法使用 AJAX 上传文件。

尝试这个

[http://jquery.malsup.com/form/#file-upload](http://jquery.malsup.com/form/#file-upload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:17:10.590

无法通过 ajax 直接上传文件内容，您需要序列化文件数据。您需要使用一些插件来执行此操作，或手动序列化文件数据。一些现成的插件是：

1.  [http://www.openjs.com/articles/ajax/ajax_file_upload/](http://www.openjs.com/articles/ajax/ajax_file_upload/)

2.  [http://jquery.malsup.com/form/](http://jquery.malsup.com/form/)

其次，请记住 JQuery 对话框将输入元素移出表单。看到这个问题：

[未发送 Jquery UI 对话框中的输入？](https://stackoverflow.com/questions/1611687/input-inside-jquery-ui-dialog-not-being-sent)

确保在提交之前附加元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T16:37:35.547

您不能使用 ajax 提交带有 multipart/form-data 的表单。您需要为此使用一些插件。

另一个解决方法（获得类似 ajax 的效果）是**`<iframe>`**在您的视图中使用 iframe()，该视图将被**隐藏，然后将表单作为****目标**发布到此 iframe 。如果需要，您可以使用这种形式创建一个对话框。

```
<form action="controller/action" method="post" target="iframename" id="yourformid"> 
```

现在在 iframe 上，您可以绑定加载事件以检查回发的状态，例如：

```
 $('#iframename').load(function(){.......}); 
```

# iphone - 连续调用 startRecordingToOutputFileURL：

> ID：10858793
> 
> 赞同：18
> 
> 时间：2012-06-02T00:11:46.860
> 
> 标签：iphone, ios, avfoundation, avcam

[Apple 文档](https://web.archive.org/web/20140814091047/http://developer.apple.com/library/ios/DOCUMENTATION/AVFoundation/Reference/AVCaptureFileOutput_Class/Reference/Reference.html)似乎表明，在将视频录制到文件时，应用程序可以动态更改 URL，没有问题。但我看到了一个问题。当我尝试这个时，录制委托被调用并出现错误......

> 手术无法完成。（OSStatus 错误 -12780。）信息字典为：{ AVErrorRecordingSuccessfullyFinishedKey = 0; }

*（“无法”中的时髦单引号来自日志记录 [错误本地化描述]）*

这是代码，基本上是对 WWDC10 AVCam 示例的调整：

**1) 开始录制。启动计时器以每隔几秒更改一次输出 URL**

```
- (void) startRecording
{
    // start the chunk timer
    self.chunkTimer = [NSTimer scheduledTimerWithTimeInterval:5
                                                       target:self
                                                     selector:@selector(chunkTimerFired:)
                                                     userInfo:nil
                                                      repeats:YES];

    AVCaptureConnection *videoConnection = [AVCamCaptureManager connectionWithMediaType:AVMediaTypeVideo fromConnections:[[self movieFileOutput] connections]];
    if ([videoConnection isVideoOrientationSupported]) {
        [videoConnection setVideoOrientation:[self orientation]];
    }

    if ([[UIDevice currentDevice] isMultitaskingSupported]) {
        [self setBackgroundRecordingID:[[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{}]];
    }

    NSURL *fileUrl = [[ChunkManager sharedInstance] nextURL];
    NSLog(@"now recording to %@", [fileUrl absoluteString]);
    [[self movieFileOutput] startRecordingToOutputFileURL:fileUrl recordingDelegate:self];
} 
```

**2）当定时器触发时，在不停止录制的情况下更改输出文件名**

```
- (void)chunkTimerFired:(NSTimer *)aTimer {

    if ([[UIDevice currentDevice] isMultitaskingSupported]) {
        [self setBackgroundRecordingID:[[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{}]];
    }

    NSURL *nextUrl = [self nextURL];
    NSLog(@"changing capture output to %@", [[nextUrl absoluteString] lastPathComponent]);

    [[self movieFileOutput] startRecordingToOutputFileURL:nextUrl recordingDelegate:self];
} 
```

注意：[self nextURL] 生成文件 url，如 file-0.mov、file-5.mov、file-10.mov 等。

**3) 每次文件更改时都会调用它，并且每次调用都是错误...**

```
- (void)              captureOutput:(AVCaptureFileOutput *)captureOutput
didFinishRecordingToOutputFileAtURL:(NSURL *)outputFileURL
                    fromConnections:(NSArray *)connections
                              error:(NSError *)error
{
    id delegate = [self delegate];
    if (error && [delegate respondsToSelector:@selector(someOtherError:)]) {
        NSLog(@"got an error, tell delegate");
        [delegate someOtherError:error];
    }

    if ([self backgroundRecordingID]) {
        if ([[UIDevice currentDevice] isMultitaskingSupported]) {
            [[UIApplication sharedApplication] endBackgroundTask:[self backgroundRecordingID]];
        }
        [self setBackgroundRecordingID:0];
    }

    if ([delegate respondsToSelector:@selector(recordingFinished)]) {
        [delegate recordingFinished];
    }
} 
```

当它运行时，file-0 被写入，然后我们在将 url 更改为 file-5 后立即看到错误 -12780，file-10 被写入，然后是一个错误，然后是好的，等等。

动态更改 URL 似乎不起作用，但它会停止写入，从而允许下一个 URL 更改起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T15:26:34.103

谢谢大家，对此的评论和好的想法。这是来自 Apple DTS 的词...

> 我与我们的 AV Foundation 工程师进行了交谈，这绝对是一个错误，因为此方法没有按照文档中的说明进行操作（“当另一个录制正在进行时，您无需在调用此方法之前调用 stopRecording。”）。[请使用 Apple Bug Reporter ( http://developer.apple.com/bugreporter/](http://developer.apple.com/bugreporter/) )提交错误报告，以便团队进行调查。确保并在报告中包含您的最小项目。

我已将此作为错误 11632087 提交给 Apple

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:49:13.613

在文档中说明了这一点：

`If a file at the given URL already exists when capturing starts, recording to the new file will fail.`

你确定你检查的`nextUrl`是一个不存在的文件名吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:30:12.930

根据文档，不支持连续调用 2 个 startRecordingToOutputFileURL。

你可以[在这里阅读](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVCaptureFileOutput_Class/Reference/Reference.html)

> 在 iOS 中，不支持这种帧精确文件切换。您必须在再次调用此方法之前调用 stopRecording 以避免任何错误。

# internet-explorer - 并排安装 Internet Explorer 8 和 9

> ID：10858794
> 
> 赞同：13
> 
> 时间：2012-06-02T00:11:57.633
> 
> 标签：internet-explorer, cross-browser

有没有办法做到这一点？我目前不想安装新的，因为它很可能会覆盖 ie 8。Web 开发需要确保它在普通浏览器上是可以接受的，并且 8 仍然是市场的重要组成部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T01:14:57.863

我过去在[IETester](http://www.my-debugbar.com/wiki/IETester/HomePage)上运气不错：

> IETester 是一个免费（个人和专业用途）WebBrowser，它允许您在 Windows 7、Vista 和 XP 上**拥有 IE10 预览、IE9、IE8、IE7 IE 6 和 IE5.5 的渲染和 javascript 引擎，**以及在同一进程中安装 IE。

这是我所知道的最好的 [也是唯一的] 方法，实际上是在同一 Windows 安装中*同时*运行 IE 版本：它实际上使用*不同*的IE 引擎，所以它不是“IE9 伪装成 IE8”。

IETester 并不*像*使用安装了不同 Windows/IE 版本的单独 VM 那样孤立，但它对我来说效果很好，并且在许多情况下是一个更实用的解决方案。

快乐编码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T00:50:34.783

您可以使用 IE9 来模拟 IE8，但它并不完美。唯一真正的解决方案是使用虚拟机。

Microsoft 有您可以使用的 IE“图像”：http: [//www.microsoft.com/en-us/download/details.aspx?id=11575](http://www.microsoft.com/en-us/download/details.aspx?id=11575)。我发现它们有点痛苦，而且不稳定。也许是 YMWV。

如果您有一个可以安装到 VM 中的 Windows 磁盘，那么您可以运行该 VM 并在其上安装 IE8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T19:23:02.460

目前我正在使用 IE10 来测试与以前版本的大多数兼容性问题。这并不完美，但我发现对于大多数问题，它都可以正常工作。要像在 IE8 中一样进行测试，请打开 IE 并按 F12。这应该会打开您的开发工具窗口。在顶部，您会看到正常的下拉菜单，然后是管道，然后是浏览器模式：IE10 - 单击它，然后选择您要模拟的任何版本。

再一次 - 这对我来说很有效，但是在*Backbone* & Marionette 中开发时，我发现了一些它没有解决的问题。

# iphone - 在 iOS 上的 PhoneGap 应用中定义 iFrame 的高度和宽度

> ID：10858801
> 
> 赞同：2
> 
> 时间：2012-06-02T00:13:34.393
> 
> 标签：iphone, css, ios, cordova

我们在 iOS 上的 PhoneGap 应用程序中设置 iFrame 的高度和宽度时遇到问题。

我们在 CSS 中设置值并在 iFrame 元素本身上内联。两者都无法控制 iFrame 的尺寸。

这可能吗？

我们正在使用 PhoneGap 1.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T01:05:06.000

也许使用 device-pixel-ratio 设置正确的值可以帮助你。

对于视网膜显示器，设备像素比 = 2，其他显示器为 1.5。

在 css 中将此比率与媒体查询一起使用：

```
@media only screen and (-webkit-device-pixel-ratio: 2.0), only screen and (device-pixel-ratio: 2.0) {
/* your css */
} 
```

在 JavaScript 中：

```
var ratio = window.devicePixelRatio; 
```

# r - 测试 S4 对象是否为实例

> ID：10858807
> 
> 赞同：5
> 
> 时间：2012-06-02T00:14:50.050
> 
> 标签：r, cran, s4

如何测试对象是否是 S4 类的**实例**（不确定这是否是正确的术语）？但是，我知道该函数`isS4`，这对于类定义等也返回 true。例如：

```
traj <- setClass(
  Class="Trajectories",
  representation=representation(
    times = "numeric",
    traj = "matrix"
  )
)

trajclass <- getClass("Trajectories")
trajobject <- new(Class="Trajectories",times=c(1,3),traj=matrix(1:4,ncol=2))

isS4(traj)
isS4(trajclass)
isS4(trajobject) 
```

`trajobject`在这种情况下，我只对包含数据的对象感兴趣；在方法或类定义中没有那么多。是否有可用于测试 S4 对象是否为实际对象的本机函数？即当使用`print(object)`输出开始时：

*“foo”类的对象.....*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T00:31:01.630

S4 类（和参考类，就此而言，也许让一些人感到懊恼）是使用 S4 类定义的（很酷（？）嗯？）

```
> class(trajclass)
[1] "classRepresentation"
attr(,"package")
[1] "methods"
> getClass(class(trajclass))
Class "classRepresentation" [package "methods"]

Slots:

Name:             slots         contains          virtual        prototype
Class:             list             list          logical              ANY

Name:          validity           access        className          package
Class: OptionalFunction             list        character        character

Name:        subclasses       versionKey           sealed
Class:             list      externalptr          logical

Known Subclasses: "ClassUnionRepresentation", "refClassRepresentation" 
```

我认为你能做的最好的就是沿着

```
isS4(trajclass) && !is(trajclass, "classRepresentation") 
```

S4`show`用作 ; 的同义词（某种）`print`。有一个 S4`show`方法`classRepresentation`是

```
> selectMethod(show, class(traj))
Method Definition:

function (object) 
{
    cat(gettextf("Class generator function for class \"%s\" from package \"%s\"\n", 
        object@className, object@package))
    show(as(object, "function"))
}
<bytecode: 0x1522d40>
<environment: 0xf1d808>

Signatures:
        object                  
target  "classGeneratorFunction"
defined "classGeneratorFunction" 
```

而 for 的`show`方法`trajobject`是默认的，即

```
> selectMethod(show, class(trajobject))
Method Definition (Class "derivedDefaultMethod"):

function (object) 
showDefault(object, FALSE)
<bytecode: 0x1516d08>
<environment: namespace:methods>

Signatures:
        object        
target  "Trajectories"
defined "ANY" 
```

里面有肉`methods::showDefault`。我想你可以实现

```
setGeneric("isNotS4ClassDef",
    function(object) standardGeneric("isNotS4ClassDef"))

setMethod(isNotS4ClassDef, "ANY",
    function(object) TRUE)

setMethod(isNotS4ClassDef, "classRepresentation",
    function(object) FALSE) 
```

# matlab - 在 MATLAB 中，这个级联 if / elseif / else 构造是否有简洁的替代方法？

> ID：10858810
> 
> 赞同：2
> 
> 时间：2012-06-02T00:15:42.070
> 
> 标签：matlab, syntax, if-statement

我正在做一个项目，该项目需要在整个地方用数字量制作离散值。目前我正在使用级联 if / elseif / else 构造，例如：

```
 if M > 6
        evidence{2} = 3;
    elseif M > 2
        evidence{2} = 2;
    else
        evidence{2} = 1;
    end 
```

我想用更易于维护（和简洁）的语法来替换它，但在我想出自己的习惯之前，我想知道 MATLAB 中是否已经有一个方便的函数或语法可用。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T00:19:39.607

```
evidence{2} = 1 + (M > 2) + (M > 6); 
```

但在我看来，它的可维护性较差。你的更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T04:19:53.110

怎么样：

```
evidence{2} = sum( M > [-inf 2 6] ) 
```

基本上，您正在搜索 M 所在的区间： (-inf,2], (2,6], (6,+inf)

因此，即使您的值不是 1/2/3，您也可以将找到的范围索引映射到其他一些值...

# java - 延迟影响整个区块

> ID：10858811
> 
> 赞同：1
> 
> 时间：2012-06-02T00:15:55.613
> 
> 标签：java, delay

我在下面有一个代码......看看。

```
enter.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            if (enter.getText().length()>0){

            addToChat("You: "+enter.getText());
                enter.setText("");
                delay(1000);
                addToChat("oie");
            }

        }
    }); 
```

这是延迟无效。

```
 public static void delay(int delayTime){
    try
    {
        Thread.sleep(delayTime);
    } catch (InterruptedException ie)
    {
    }
} 
```

问题是，无论我在文本框中输入什么内容并按回车键，都需要一秒钟时间才能显示在文本区域中，而且“你：”文本块也需要一秒钟才能显示出来，这是在延迟之前. 为什么这种延迟会影响之前的事情，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T00:19:22.430

在您的动作侦听器完成之前，UI 没有机会更新。如果您想在延迟后更改某些内容，则应将其安排在不同的线程上，而不是在事件处理程序中等待：

```
addToChat("You: "+enter.getText());
enter.setText("");
new Thread(
    new Runnable() {
        public void run() {
            delay(1000);
            addToChat("oie");
        }
    }
).start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T00:21:22.767

您`sleep()`在[Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)中，这意味着您的 UI 被冻结并且无法重新绘制自身，或接受输入，或任何东西。您应该只在 EDT 中执行非常快速的操作以避免这种影响。查看[图形用户界面](http://docs.oracle.com/javase/tutorial/ui/index.html)和以下教程，了解 UI 编程的基础知识。

# php - PHP强制PDF下载不适用于Android上的浏览器

> ID：10858812
> 
> 赞同：0
> 
> 时间：2012-06-02T00:15:58.130
> 
> 标签：php, android, pdf, pdftk, fdf

我使用 POST 请求来传输动态创建可下载文档所需的数据。

提交表单时，$_POST 数组被传递给一个函数，该函数返回创建的 FDF 文件的路径。

编码：

```
header('Content-Type: application/pdf');
header('Content-Disposition: attachment; filename="'.$file.'"');
passthru("pdftk file.pdf fill_form ".$fdf_file." output - ");
exit; 
```

适用于所有浏览器（Safari、Firefox、Opera、Chrome、Internet Explorer），但不适用于 Android 库存浏览器。

在 Android 浏览器中，下载发生但文件内容为空或一些 HTML 垃圾，或者浏览器下载文件但忽略我的文件名并尝试将文件保存在生成​​它的脚本的名称下。

任何帮助深表感谢。

谢谢！

**更新！！！**

解决方案： http: [//digiblog.de/2011/04/19/android-and-the-download-file-headers/](http://digiblog.de/2011/04/19/android-and-the-download-file-headers/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T08:37:45.347

解决方案：

Android 和 HTTP 下载文件头 [http://digiblog.de/2011/04/19/android-and-the-download-file-headers/](http://digiblog.de/2011/04/19/android-and-the-download-file-headers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T04:53:00.257

尝试发送二进制编码标头：

```
header("Content-Transfer-Encoding: binary"); 
```

如果仍然没有，您可能必须以不同的文件类型发送文件。

# google-api - 将使用 Google OAuth2.0 的登录电子邮件限制为特定域名

> ID：10858813
> 
> 赞同：94
> 
> 时间：2012-06-02T00:16:05.657
> 
> 标签：google-api, oauth-2.0, google-oauth

我似乎找不到任何有关如何限制登录到我的 Web 应用程序（使用 OAuth2.0 和 Google API）的文档，以仅接受来自具有特定域名或一组域名的电子邮件的用户的身份验证请求。我想加入白名单而不是黑名单。

有没有人有关于如何做到这一点的建议，关于官方接受的这样做方法的文档，或者一个简单、安全的解决方法？

作为记录，在他们尝试通过 Google 的 OAuth 身份验证登录之前，我不知道有关用户的任何信息。我收到的只是基本的用户信息和电子邮件。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-12T17:18:12.167

所以我有一个答案给你。在 oauth 请求中，您可以添加“hd=domain.com”，它将限制对来自该域的用户进行身份验证（我不知道您是否可以执行多个域）。[您可以在此处](https://developers.google.com/accounts/docs/OAuth2Login#hd-param)找到记录的 hd 参数

我从这里使用谷歌 api 库：[http](http://code.google.com/p/google-api-php-client/wiki/OAuth2) ://code.google.com/p/google-api-php-client/wiki/OAuth2所以我不得不手动编辑 /auth/apiOAuth2.php 文件到这个：

```
public function createAuthUrl($scope) {
    $params = array(
        'response_type=code',
        'redirect_uri=' . urlencode($this->redirectUri),
        'client_id=' . urlencode($this->clientId),
        'scope=' . urlencode($scope),
        'access_type=' . urlencode($this->accessType),
        'approval_prompt=' . urlencode($this->approvalPrompt),
        'hd=domain.com'
    );

    if (isset($this->state)) {
        $params[] = 'state=' . urlencode($this->state);
    }
    $params = implode('&', $params);
    return self::OAUTH2_AUTH_URL . "?$params";
} 
```

编辑：我仍在开发这个应用程序并发现了这个，这可能是这个问题的更正确答案。[https://developers.google.com/google-apps/profiles/](https://developers.google.com/google-apps/profiles/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-11-02T16:42:20.687

# 客户端：

使用`auth2`init 函数，您可以传递`hosted_domain`参数以将登录弹出窗口中列出的帐户限制为与您的`hosted_domain`. 您可以在此处的文档中看到这一点：[https ://developers.google.com/identity/sign-in/web/reference](https://developers.google.com/identity/sign-in/web/reference)

# 服务器端：

即使使用受限的客户端列表，您也需要验证`id_token`与您指定的托管域匹配。对于某些实现，这意味着`hd`在验证令牌后检查您从 google 收到的属性。

## 全栈示例：

### 网页代码：

```
gapi.load('auth2', function () {
    // init auth2 with your hosted_domain
    // only matching accounts will show up in the list or be accepted
    var auth2 = gapi.auth2.init({
        client_id: "your-client-id.apps.googleusercontent.com",
        hosted_domain: 'your-special-domain.com'
    });

    // setup your signin button
    auth2.attachClickHandler(yourButtonElement, {});

    // when the current user changes
    auth2.currentUser.listen(function (user) {
        // if the user is signed in
        if (user && user.isSignedIn()) {
            // validate the token on your server,
            // your server will need to double check that the
            // `hd` matches your specified `hosted_domain`;
            validateTokenOnYourServer(user.getAuthResponse().id_token)
                .then(function () {
                    console.log('yay');
                })
                .catch(function (err) {
                    auth2.then(function() { auth2.signOut(); });
                });
        }
    });
}); 
```

### 服务器代码（使用谷歌 Node.js 库）：

如果您不使用 Node.js，您可以在此处查看其他示例：[https ://developers.google.com/identity/sign-in/web/backend-auth](https://developers.google.com/identity/sign-in/web/backend-auth)

```
const GoogleAuth = require('google-auth-library');
const Auth = new GoogleAuth();
const authData = JSON.parse(fs.readFileSync(your_auth_creds_json_file));
const oauth = new Auth.OAuth2(authData.web.client_id, authData.web.client_secret);

const acceptableISSs = new Set(
    ['accounts.google.com', 'https://accounts.google.com']
);

const validateToken = (token) => {
    return new Promise((resolve, reject) => {
        if (!token) {
            reject();
        }
        oauth.verifyIdToken(token, null, (err, ticket) => {
            if (err) {
                return reject(err);
            }
            const payload = ticket.getPayload();
            const tokenIsOK = payload &&
                  payload.aud === authData.web.client_id &&
                  new Date(payload.exp * 1000) > new Date() &&
                  acceptableISSs.has(payload.iss) &&
                  payload.hd === 'your-special-domain.com';
            return tokenIsOK ? resolve() : reject();
        });
    });
}; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-12-13T02:59:20.723

在定义您的提供者时，请在末尾使用 'hd' 参数传入一个哈希值。你可以在这里阅读。[https://developers.google.com/accounts/docs/OpenIDConnect#hd-param](https://developers.google.com/accounts/docs/OpenIDConnect#hd-param)

例如，对于 config/initializers/devise.rb

```
config.omniauth :google_oauth2, 'identifier', 'key', {hd: 'yourdomain.com'} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-03T14:57:44.087

自 2015 年以来，库中有一个[函数](https://github.com/googleapis/google-api-php-client/blob/dee3a8b840d87635b0e26da63202b163512f2d4e/src/Google/Client.php#L630)可以设置它，而无需像 aaron-bruce的[解决方法那样编辑库的源代码](https://stackoverflow.com/a/11001585/3088158)

在生成网址之前，只需调用`setHostedDomain`您的 Google 客户端

```
$client->setHostedDomain("HOSTED DOMAIN") 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-09T16:58:59.927

这是我在 node.js 中使用护照所做的。`profile`是尝试登录的用户。

```
//passed, stringified email login
var emailString = String(profile.emails[0].value);
//the domain you want to whitelist
var yourDomain = '@google.com';
//check the x amount of characters including and after @ symbol of passed user login.
//This means '@google.com' must be the final set of characters in the attempted login 
var domain = emailString.substr(emailString.length - yourDomain.length);

//I send the user back to the login screen if domain does not match 
if (domain != yourDomain)
   return done(err); 
```

然后只需创建逻辑来查找多个域而不仅仅是一个域。我相信这种方法是安全的，因为 1\. '@' 符号在电子邮件地址的第一部分或第二部分中不是有效字符。我无法通过创建像`mike@fake@google.com`2 这样的电子邮件地址来欺骗该功能。在传统的登录系统中我可以，但这个电子邮件地址永远不会存在于 Google 中。如果不是有效的 Google 帐户，则无法登录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-02T13:55:59.273

使用 Laravel Socialite 通过 Google 登录 [https://laravel.com/docs/8.x/socialite#optional-parameters](https://laravel.com/docs/8.x/socialite#optional-parameters)

```
use Laravel\Socialite\Facades\Socialite;

return Socialite::driver('google')
    ->with(['hd' => 'pontomais.com.br'])
    ->redirect(); 
```

# iphone - NSCache 自动删除策略

> ID：10858815
> 
> 赞同：9
> 
> 时间：2012-06-02T00:16:31.580
> 
> 标签：iphone, objective-c, ios, cocoa-touch

NSCache 的自动删除策略有哪些？苹果的文档没有提到它们，我通过实验发现 NSCache 没有响应内存警告。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-09T04:23:17.727

`NSCache`不响应`UIApplicationDidReceiveMemoryWarningNotification`，但它会在内存不足的情况下自动驱逐其对象，显然是使用其他一些机制。

虽然我之前建议观察`UIApplicationDidReceiveMemoryWarningNotification`，但事实并非如此。不需要对内存不足的情况进行特殊处理，因为`NSCache`它会自动处理。

* * *

更新：

从 iOS 7 开始，`NSCache`不仅不响应内存警告，而且它似乎也没有在内存压力下正确清除自身（请参阅[达到内存限制时 NSCache 崩溃（仅在 iOS 7 上）](https://stackoverflow.com/questions/19546054/nscache-crashing-when-memory-limit-is-reached-only-on-ios-7)）。

我子类`NSCache`观察`UIApplicationDidReceiveMemoryWarningNotification`，并在内存警告时清除缓存：

```
@interface AutoPurgeCache : NSCache
@end

@implementation AutoPurgeCache

- (id)init
{
    self = [super init];
    if (self) {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(removeAllObjects) name:UIApplicationDidReceiveMemoryWarningNotification object:nil];
    }
    return self;
}

- (void)dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationDidReceiveMemoryWarningNotification object:nil];

    // if not ARC, also
    //
    // [super dealloc];
}

@end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-02T00:44:37.353

你最好尽可能地把`NSCache`它当作一个黑匣子。

来自[缓存和可清除内存](http://developer.apple.com/library/mac/#technotes/CachingPurgeableMemory/Introduction/Introduction.html)（强调我的）：

> 将项目添加到缓存时，您可以指定与每个键值对关联的成本值。调用该`setTotalCostLimit:`方法设置所有缓存对象成本总和的最大值。因此，当添加的对象`totalCost`超过 时`totalCostLimit`，缓存可以自动驱逐它的一些对象，以便回到阈值以下。***无法保证此逐出过程，因此尝试操纵`cost`值以实现特定行为可能会损害缓存的性能。***如果没有什么有用的就传入，或者使用不需要`0`传入代价的方法。`cost``setObject:forKey:`
> 
> ***注意：计数限制和总成本限制并未严格执行。也就是说，当缓存超过其限制之一时，它的一些对象可能会立即、稍后或永远不会被驱逐，这一切都取决于缓存的实现细节。***

# java - 在 Oracle JDBC 中是否可以批量存储过程调用和检索 OUT 参数？

> ID：10858816
> 
> 赞同：9
> 
> 时间：2012-06-02T00:17:21.003
> 
> 标签：java, stored-procedures, jdbc, oracle11g, batch-processing

我在像 f(a IN, b IN, c OUT) 这样的 Oracle 11g 数据库中有一个存储过程。我想以批处理模式从 JDBC 调用它，然后读取所有 OUT 变量。
这可能吗？到目前为止我有这个

```
 CallableStatement statement = connection.prepareCall("f(?, ?, ?)");
  for(Item i : items) {
     int i = 0;
     statement.setString(++i, item.getA());
     statement.setString(++i, item.getB());
     statement.registerOutParameter(++i, Types.NUMERIC);
     statement.addBatch();
  }
  statement.executeBatch();
  int[] answers =  ? 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T01:58:10.383

可悲的是没有。

> CallableStatement 对象的批量更新能力与 PreparedStatement 对象的能力相同。事实上，CallableStatement 对象被限制为与 PreparedStatement 对象具有相同的功能。更准确地说，当使用批量更新工具时，CallableStatement 对象只能调用带有输入参数或根本不带参数的存储过程。

参考：[http ://docs.oracle.com/javase/1.4.2/docs/guide/jdbc/getstart/callablestatement.html#1000220](http://docs.oracle.com/javase/1.4.2/docs/guide/jdbc/getstart/callablestatement.html#1000220)

# android - AlertDialog 中的按钮大小不匹配

> ID：10858819
> 
> 赞同：0
> 
> 时间：2012-06-02T00:18:08.600
> 
> 标签：android, layout, android-alertdialog

我注意到，如果我使用构建器创建一个标准的双按钮`AlertDialog`，并且一个按钮包含跨越多行的文本，而另一个按钮适合一行，则按钮大小不匹配。只有两行文本按钮变大了，而且看起来最粗糙：

![丑陋的警报对话框](../Images/e9bbfab24369290a37d04e85c128b60e.png)

是否有一个简单的解决方法来仍然使用`AlertDialog`构建器并哄骗按钮大小匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:21:53.200

我认为这是一个 Android 错误/功能并[报告](http://code.google.com/p/android/issues/detail?id=32579)了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:04:11.427

您可以使用自构建布局文件创建自己的对话框。因此，您可以随意操作底部按钮的文本、背景等。

氪

# objective-c - 为 Objective-C 学习 C

> ID：10858820
> 
> 赞同：10
> 
> 时间：2012-06-02T00:18:24.800
> 
> 标签：objective-c, c

我相对精通 Objective-C，但我一直在研究一些我将来可能会使用的框架和库，并且我越来越多地看到 C 的使用。到目前为止，我编写的唯一应用程序只包含 Objective-C。我知道 Objective-C 是 C 的超集，但是当我说我只用 Objective-C 编写时，我的意思是我只使用了 Objective-C 的方法和与 C 明显不同的 Objective-C 的语法句法。我一直在研究有关 C 和 Objective-C 之间关系的问题（见下面的链接），我想开始学习 C，但显然 C 有三种类型（K&R、C89 和 C99），我是想知道我应该学习哪种类型来帮助我使用 Objective-C。我从学习Objective-C中知道我也在不知不觉中学会了C，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T00:22:57.393

我建议你看一些关于 C 的介绍性课本，并学习课本所教的任何 C 方言。这可能是 C89 或 C99。

K&R C 缺少现代功能，例如“原型”（声明函数参数的数量和类型）。C89 添加了所有这些东西。

C99 主要具有在特定领域有用的小增量功能。您需要学习的大部分内容在 C89 和 C99 中应该是相同的。有趣的事实：微软从不费心实施 C99。

实际上，我会建议一个具体的介绍性文本：使用K&R*第二版*。这基本上将 K&R 更新为 C89。K&R 是一本优秀的书，也是学习 C 语言的绝佳选择。

[https://stackoverflow.com/questions/1646667/kr-1st-edition-vs-2nd-edition](https://stackoverflow.com/questions/1646667/kr-1st-edition-vs-2nd-edition)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T00:24:36.693

C 的类型甚至更多。与此同时，C0X 和 C11 被定义......它们都只是从前辈的小进化步骤，所以你不应该太担心。Objective-C 基于 C99（实际上减去浮点编译指示），所以现在这可能是最合适的。

您的问题并不完全清楚，但是您确实注意到 C 的这些变体只是不同年份的规范演变？K&R 来自 ca。1978 年，1989 年的 C89，1999 年的 C99 等等……Objective-C 被设计为 C 的严格超集，因此您可能期望 Objective-C 有一天会合并 C11 的特性。

（注意：进行了几处编辑以包含评论中的信息）

# php - $_SESSION，用于保存数据是否明智？

> ID：10858831
> 
> 赞同：1
> 
> 时间：2012-06-02T00:20:55.353
> 
> 标签：php

我想知道使用 $_SESSION['data'] 是否是保存有关已登录用户的信息的明智方法。

例如：

假设我有一个游戏，我想显示他们的级别/exp/用户名等，目前每个页面加载我都必须调用数据库......所以我想知道我是否将它存储在 SESSION 中我可以使用布尔值来告诉 PHP如果它需要重新更新其数据......从而减少MYSQL调用量？

这是一个聪明的想法，是否有一些我不知道的缺陷？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T00:25:49.097

数据库更新之间的竞争呢？您如何知道数据是否不再是最新的？如果这是对登录用户的直接且保留的数据，允许他在给定时间仅登录一次，那么为什么不呢:-)

如果您寻求替代方案，则可以使用 HTML5 的本地存储这一新事物

[http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

# php - 只是我还是这本关于 PHP 和 MySQL 的教科书错了？

> ID：10858833
> 
> 赞同：-2
> 
> 时间：2012-06-02T00:21:00.697
> 
> 标签：php, mysql

这是一张图片：http: [//i.imgur.com/KvPm8.png](http://i.imgur.com/KvPm8.png)

最后一行。它清楚地显示了具有 NULL orderids 的客户......我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:24:13.700

是的，最后一行似乎有冲突。错别字很自然。如果这让人们感到不安，我建议给作者发电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T00:22:43.683

并非所有客户都可以拥有订单（以及相应的订单 ID）。

（另外，最后一行是在描述下面的另一个表格吗？如果不是，那是书中的错误。）

执行该操作的查询需要一个`WHERE`子句：

`... WHERE orderid IS NOT NULL`

# google-app-engine - Google App Engine：SimpleAuth：即时重定向网址

> ID：10858834
> 
> 赞同：4
> 
> 时间：2012-06-02T00:21:06.483
> 
> 标签：google-app-engine, authentication, redirect, oauth-2.0

我在我的 GAE 应用程序中使用 Alex (https://github.com/crhym3/simpleauth) 的 SimpleAuth。我的基本模板中有一个 Jquery Powered Login 框，这意味着用户可以从应用程序内的任何 url 登录。我希望将用户重定向回他们请求登录的页面。有什么方法可以使用 Oauth2 实现这一点，或者我们可以只将用户重定向回特定的 url 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T16:46:53.670

如果您使用的是 SimpleAuth，我假设您可能使用的是 webapp2，所以 @jmort253 的示例并不完全符合我的要求（例如 webapp2 具有内置会话，那么为什么还要使用另一个库来处理会话）。

不过，从概念上讲它是正确的：您需要在开始身份验证过程之前将原始 URL 存储在会话中的某个位置。然后在成功验证后使用该存储的 URL 进行最终重定向。

从 SimpleAuth 的示例应用程序代码开始，您基本上需要更改的是[_on_signin() 的最后一行，](https://github.com/crhym3/simpleauth/blob/master/example/handlers.py#L166)以将用户重定向到他们来自的原始 URL（而不是 '/profile'）。

要存储原始请求 URL，您可以使用简单的包装器，例如

```
def simpleauth_login_required(handler_method):
    """A decorator to require that a user be logged in to access a handler.

    To use it, decorate your get() method like this:

        @simpleauth_login_required
        def get(self):
            user = self.current_user
            self.response.out.write('Hello, ' + user.name())
    """
    def check_login(self, *args, **kwargs):
        if self.request.method != 'GET':
            self.abort(400, detail='The login_required decorator '
                'can only be used for GET requests.')

        if self.logged_in:
            handler_method(self, *args, **kwargs)
        else:
            self.session['original_url'] = self.request.url
            self.redirect('/my-login-page-where-users-can-choose-auth-method')

    return check_login 
```

现在，回到那个 _on_signin() 重定向行，而不是`self.redirect('/profile')`你做这样的事情：

```
target = self.session['original_url']
self.redirect(target) 
```

几点注意事项：

*   上面的示例假设您有一个`logged_in`方法来指示当前请求是否由已通过身份验证的用户发出；
*   您可能希望从会话中清除“original_url”（如果他们成功通过身份验证）

上述示例的功劳[归于 webapp2_extras.appengine.users 模块](http://webapp-improved.appspot.com/api/webapp2_extras/appengine/users.html#module-webapp2_extras.appengine.users)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T00:51:31.490

当您的用户尝试登录时，您的应用首先请求访问令牌，然后构建 Google OAuth2 URL。您的应用会将用户重定向到您的用户必须登录的 google.com。此登录 URL 包含来自您的服务器对 Google 的请求的访问令牌。出于安全目的，它与该重定向 URL 相关联。

此重定向 URL 旨在通过将成功的登录操作返回到您的应用程序来完成登录过程，以便您可以完成用户登录、注册该用户或执行您的应用程序需要执行的任何操作。

在那之后，球就在你的球场上了，你可以对你的应用程序进行编程来做任何你想做的事情。换句话说，Google 只关心将请求发送到您的安全端点。一旦完成，谷歌就不再关心你做了什么；这是你的应用程序。

因此，要将您的用户重定向回他/她在登录之前所在的页面，这是一个很棒的可用性改进，请执行以下操作：

**重定向用户的步骤：**

1 在用户登录之前，将他/她所在的页面存储在会话中。

```
session = appengine_utilities.sessions.Session()
session["target_url"] = "/example_page.html"   # sets keyname to current page 
```

2 接下来，继续并正常登录用户。

3 Google 将用户重定向到您的身份验证重定向 URL 后，从会话中检索目标 URL：

```
target_url = session['target_url'] 
```

4 最后，将用户重定向到此 URL。

简而言之，您可以实现将用户重定向到任何目标 URL 的目标，只要您首先接受来自 Google 的重定向到单个已建立的重定向 URL。

会话示例来自[Beaker](http://beaker.readthedocs.org/en/latest/sessions.html#using)网站。此外，[Nick Johnson 的 Webapps on Appengine 第 5 部分](http://blog.notdot.net/2010/02/Webapps-on-App-Engine-Part-5-Sessions)博客文章深入探讨了与 Beaker 的会话。

# php - 如何向 php mail() 消息添加正确的图像签名？

> ID：10858838
> 
> 赞同：1
> 
> 时间：2012-06-02T00:21:48.890
> 
> 标签：php

我正在尝试将带有公司徽标的“签名”附加到调用 mail() 函数时发送的消息的底部。这是我拥有的 HTML/PHP：

```
$message = '<html>
            <body>'
                . $_POST['message'] .
                '<BR><HR><BR>
                <img src="http://www.mysite.com/images/logo.gif">
            </body>
            </html>'; 
```

例如，当您单击发送到 gmail 的电子邮件时，会出现一个对话框并说

`Images are not displayed. Display images below - Always display images from person@mysite.com`

我希望仅显示签名图像，而无需单击对话框中给出的选项之一。显示来自其他人的电子邮件签名，而没有显示该对话框。有没有办法让我做同样的事情？

如果用户每次都必须单击该选项来显示我的签名，那真是非常烦人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T02:44:03.570

您应该在电子邮件中包含图像数据。

您可以通过在 base64 中编码图像数据来做到这一点

```
<img src="data:image/gif;base64,<?php echo base64_encode(file_get_contents('logo.gif')); ?>"> 
```

# sql - 使用 ANT 从 JPA/Hibernate 注释类创建 DDL 脚本

> ID：10858844
> 
> 赞同：0
> 
> 时间：2012-06-02T00:22:43.683
> 
> 标签：sql, hibernate, jakarta-ee, orm, ant

我想使用 ANT 从 Hibernate/JPA 注释类生成 SQL DDL 脚本。

下面是我基于 Hibernate Dev Docs URL 编写的 ANT 脚本：http: [//docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/)

```
 <project name="yourmarketnet" default="all" basedir=".">
<target name="ddl_generation">
<!-- paths to required jars  -->
<path location="web/WEB-INF/lib/hibernate-annotations.jar" />
<path location="web/WEB-INF/lib/ejb3-persistence.jar" />
<path location="web/WEB-INF/lib/hibernate-entitymanager.jar" />
<path location="web/WEB-INF/lib/javaassist.jar" />
<path location="web/WEB-INF/lib/hibernate-tools.jar"/>
<taskdef name="hibernatetool" classname="org.hibernate.tool.ant.HibernateToolTask.jar">
     <classpath path="${build.dir}/web/WEB-INF/lib/hibernate-tools.jar"/> 
    </taskdef>
<!-- output destination -->
<hibernatetool destdir="${build.dir}">
    <!-- were the annotation beans files are located-->
<classpath>
<path location="${build.dir}/web/WEB-INF/classes/com/yourmarketnet/beans" />
</classpath>
<!-- list exporters here -->
<hbm2ddl
export="false"
update="false"
drop="true"
create="true"
outputfilename="myApps.ddl"
delimiter=";"
format="false"
haltonerror="true"/>
</hibernatetool>
</target>
</project> 
```

我得到 ERROR taskdef class org.hibernate.tool.ant.HibernateToolTask​​ cannot be found using the classloader AntClassLoader[]

我还检查了 hibernate-tools.jar 是否真的在路径中，它是 (C:\Users\naim\Documents\NetBeansProjects\yourmarketnet\build\web\WEB-INF\lib\hibernate-tools.jar)

有人可以逐步告诉我如何修复/调试此问题，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:48:06.797

错误信息清楚地告诉你 ant 找不到你的工具。当你声明

```
<taskdef name="hibernatetool" classname="org.hibernate.tool.ant.HibernateToolTask" >
   <classpath path="${build.dir}/web/WEB-INF/lib"/>
</taskdef> 
```

它已经错了，因为工具类不在目录中，而是在 jar 中。其次，您的意图似乎是`${build.dir}`用作输出位置，那么为什么它会包含工具类？无论如何，你甚至没有定义这个目录。

所以如果你真的有你`hibernate-tools.jar`的`web/WEB-INF/lib`，你可能想要类似的东西

```
<taskdef name="hibernatetool" classname="org.hibernate.tool.ant.HibernateToolTask" >
   <classpath path="web/WEB-INF/lib/hibernate-tools.jar"/>
</taskdef> 
```

请注意，它与您的项目目录相关。

# php - PHP排序mutlidim数组usort不起作用

> ID：10858845
> 
> 赞同：1
> 
> 时间：2012-06-02T00:22:49.253
> 
> 标签：php

嗨，我需要按日期对数组进行排序：

这是我的数组 $get：

```
Array ( 
    [0] => Array ( 
        [Date] => 02.06.2012 
        [Theme] => test 
    ) 
    [1] => Array ( 
        [Date] => 03.07.2012 
        [Theme] => lol 
    ) 
    [2] => Array ( 
        [Date] => 09.06.2012 
        [Theme] => hm 
    ) 
) 
```

我尝试了以下代码：

```
function date_sort($a, $b) {
  return strcmp($a['Date'], $b['Date']);
}

usort($get, 'date_sort'); 
```

但我得到的只是无序的日期。我的日期设置为 dd.mm.yyyy！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T00:24:42.077

尝试做

```
function date_sort($a, $b) {
    return strtotime($a['Date']) - strtotime($b['Date']);
} 
```

# reporting-services - 从 SSDT 部署 SSRS 2012 失败 - 找不到指定的报表服务器 URL

> ID：10858846
> 
> 赞同：0
> 
> 时间：2012-06-02T00:22:55.553
> 
> 标签：reporting-services, sql-server-2012, sql-server-data-tools

我最近在笔记本电脑上安装了 SQL Server 2012 Developer。我使用 AdventureWorks201 创建了一个简单的 SSRS 报告。该报告构建良好，但不会部署。我收到错误“找不到指定的报表服务器 URL http:/localhost/Reports_MSSQLSERVER2012”

我可以毫无问题地浏览到所述 URL。我什至可以上传报告并运行它就好了。在这两种情况下（在 URL 上和 SSDT 内），我都使用管理员帐户。

SSDT 看不到我指定的 URL 有什么原因吗？

# android - AdMob for Android 编译错误

> ID：10858849
> 
> 赞同：0
> 
> 时间：2012-06-02T00:23:13.867
> 
> 标签：android, admob

我正在尝试将 AdMob 广告添加到我的应用中。我按照这里的说明进行操作：[https](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals) ://developers.google.com/mobile-ads-sdk/docs/android/fundamentals ，当我尝试运行它时，我得到了这些错误：

```
 06-01 19:16:23.337: E/AndroidRuntime(30602): FATAL EXCEPTION: main
 06-01 19:16:23.337: E/AndroidRuntime(30602): java.lang.RuntimeException: Unable to    start activity ComponentInfo{com.ComedyZone/com.ComedyZone.MainActivity}: java.lang.NullPointerException
 06-01 19:16:23.337: E/AndroidRuntime(30602):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1696)
 06-01 19:16:23.337: E/AndroidRuntime(30602):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1716)
 06-01 19:16:23.337: E/AndroidRuntime(30602):   at android.app.ActivityThread.access$1500(ActivityThread.java:124)
 06-01 19:16:23.337: E/AndroidRuntime(30602):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:968)
 06-01 19:16:23.337: E/AndroidRuntime(30602):   at android.os.Handler.dispatchMessage(Handler.java:99)
 06-01 19:16:23.337: E/AndroidRuntime(30602):   at android.os.Looper.loop(Looper.java:130)
 06-01 19:16:23.337: E/AndroidRuntime(30602):   at android.app.ActivityThread.main(ActivityThread.java:3806)
 06-01 19:16:23.337: E/AndroidRuntime(30602):   at java.lang.reflect.Method.invokeNative(Native Method)
 06-01 19:16:23.337: E/AndroidRuntime(30602):   at java.lang.reflect.Method.invoke(Method.java:507)
 06-01 19:16:23.337: E/AndroidRuntime(30602):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 06-01 19:16:23.337: E/AndroidRuntime(30602):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 06-01 19:16:23.337: E/AndroidRuntime(30602):   at dalvik.system.NativeStart.main(Native Method)
 06-01 19:16:23.337: E/AndroidRuntime(30602): Caused by: java.lang.NullPointerException
 06-01 19:16:23.337: E/AndroidRuntime(30602):   at com.ComedyZone.MainActivity.onCreate(MainActivity.java:37)
 06-01 19:16:23.337: E/AndroidRuntime(30602):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 06-01 19:16:23.337: E/AndroidRuntime(30602):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1660)
 06-01 19:16:23.337: E/AndroidRuntime(30602):   ... 11 more 
```

MainActivity.java：

```
package com.ComedyZone;

import android.content.Intent;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.LinearLayout;
import android.widget.ListView;

import com.actionbarsherlock.app.SherlockListActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;
import com.google.ads.*;

public class MainActivity extends SherlockListActivity {
public static int THEME = R.style.Theme_Sherlock;
private AdView adView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);        

    String[] countries = getResources().getStringArray(R.array.jokes_array);
    setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, countries));

    ListView lv = getListView();
    lv.setTextFilterEnabled(true);

 // Create the adView
    adView = new AdView(this, AdSize.BANNER, "a14fc778668df3b");

    // Lookup your LinearLayout assuming it’s been given
    // the attribute android:id="@+id/mainLayout"
    LinearLayout layout = (LinearLayout)findViewById(R.id.mainLayout);

    // Add the adView to it
    layout.addView(adView);

    // Initiate a generic request to load it with an ad
    adView.loadAd(new AdRequest());
  }

  @Override
  public void onDestroy() {
    if (adView != null) {
      adView.destroy();
    }
    super.onDestroy();
  }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add("Options")
    .setIcon(R.drawable.ic_options)
    .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    Intent intent = new Intent(this, Preferences.class);
    startActivity(intent);
    return true;
}
} 
```

主要.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:id="@+id/mainLayout"
android:layout_height="fill_parent"
android:orientation="vertical">

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dp"
android:textSize="16sp" >
</TextView>

<ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

</LinearLayout> 
```

显现：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.ComedyZone"
    android:versionCode="1"
    android:versionName="1.0.1" >

    <uses-sdk android:minSdkVersion="7" />

    <uses-permission android:name="android.permission.INTERNET"/>
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock.Light">
        <activity android:name="com.ComedyZone.Preferences" />
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.google.ads.AdActivity"
              android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T01:37:14.520

`setContentView(R.layout.your_layout)`您的代码中遗漏了！

当你使用时你得到一个空指针异常

```
layout.addView(adView); 
```

尝试调试您的代码！

ListActivity 不需要您通过**setContentView()**方法为其分配布局，如果您只想显示一个 ListView ListActivity 默认包含一个 ListView。

如果您需要在 ListActivity 中包含更多视图（即广告的情况），那么您仍然可以为您的 Activity 分配一个布局。在这种情况下，您的布局**必须**包含一个 ListView，其中 android:id 属性设置为**@android:id/list**。

我想你的 SherlockListActivity 是从 ListActivity 扩展而来的，这就是我上面所说的你应该注意的！

```
<ListView
  android:id="@android:id/list"
  android:layout_width="match_parent"
  android:layout_height="wrap_content" >
</ListView> 
```

更改`android:id="@+id/list"`为`android:id="@android:id/list"`

列表活动在 android sdk 中为列表视图使用默认 ID，它是**android:id="@android:id/list"**你必须记住这一点！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T01:20:05.040

由于您正在使用 ListActivity 而您没有使用`setContentView(R.layout.main)`您的`layout`遗嘱`null`，您将获得 NullPointerException。

请更关注[https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals中的示例](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals)

一种解决方案是通过 XML 执行此操作。

> 除了在 Java 中创建 AdView 之外，还可以完全在 XML 中设置一个。这样做很简单：

[https://developers.google.com/mobile-ads-sdk/docs/android/banner_xml](https://developers.google.com/mobile-ads-sdk/docs/android/banner_xml)

看不到广告的问题与它需要的最小尺寸有关。AdMob 视图至少应为 320 x 50，否则，您将永远不会在应用程序中看到广告。

[https://developers.google.com/mobile-ads-sdk/docs/android/intermediate?hl=nl#bannersizes](https://developers.google.com/mobile-ads-sdk/docs/android/intermediate?hl=nl#bannersizes)

尝试这样的事情：

主.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         android:orientation="vertical">
       <LinearLayout android:layout_width="fill_parent"
                  android:id="@+id/home_layout"
                  android:orientation="vertical"
                  android:layout_height="wrap_content">
         <ListView 
            android:id="@id/android:list" 
            android:layout_height="wrap_content"
            android:layout_width="wrap_content" />
     </LinearLayout>

    <LinearLayout android:layout_width="fill_parent"
                      android:id="@+id/ad_layout"
                      android:layout_height="wrap_content"
                      android:gravity="bottom"
                      android:layout_alignParentBottom="true"
                      android:layout_alignBottom="@+id/home_layout">

     <com.google.ads.AdView android:id="@+id/adView"
                             android:layout_width="fill_parent"
                             android:layout_height="wrap_content"
                             ads:adUnitId="youaddunitid"
                             ads:adSize="BANNER"
                             android:gravity="bottom"
                             ads:testDevices="TEST_EMULATOR, yourphoneid"
                             ads:loadAdOnCreate="true"/>
    </LinearLayout>
</RelativeLayout> 
```

MainActivity.java：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);        
        setContentView(R.layout.main);
        String[] countries = getResources().getStringArray(R.array.jokes_array);
        ListView lv = getListView();

        lv.setTextFilterEnabled(true);
        lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, countries));
} 
```

这是经过测试的，它正在工作

# objective-c - 在Objective-C的CALayer中绘制圆弧和矩形

> ID：10858850
> 
> 赞同：1
> 
> 时间：2012-06-02T00:23:40.187
> 
> 标签：objective-c, ios, calayer, cgcontext

我在向用户呈现一个弧形然后在同一个 CALayer 中呈现矩形时遇到问题。我成功地绘制了两者，但仅在弧线相同或在矩形坐标上方绘制时才显示矩形。

知道我错过了什么吗？

```
-(void)drawLayer:(CALayer *)layer inContext:(CGContextRef)p_contex
{
    CGMutablePathRef thePath = CGPathCreateMutable();
    CGPathMoveToPoint(thePath,NULL,mReference.x,mReference.y);
    CGPathAddArc(thePath,NULL,
                 mReference.x, mReference.y,
                 S_RADIO, lStartAngle, lStopAngle ,
                 0); 
    CGPathCloseSubpath(thePath);

    CGContextSetRGBFillColor(p_contex, lRed,lGreen,lBlue,lAlpha);
    CGContextSetRGBStrokeColor(p_contex, lRed,lGreen,lBlue,lAlpha);
    CGContextAddPath(p_contex, thePath );

    CGContextSaveGState(p_contex);
    CGContextClip(p_contex);
    CGContextDrawRadialGradient(p_contex, 
                                [self buildGradientColor], 
                                mReference , 5, mReference, S_RADIO, 0);

    CGContextSaveGState(p_contex);

    // release the path
    CFRelease(thePath);
    CGGradientRelease(mGradient);

    CGMutablePathRef retPath = CGPathCreateMutable();
    CGRect rect = CGRectMake(0,300, 200, 40);
    float radius = 10;
    CGRect innerRect = CGRectInset(rect, radius, radius);

    CGFloat inside_right = innerRect.origin.x + innerRect.size.width;
    CGFloat outside_right = rect.origin.x + rect.size.width;
    CGFloat inside_bottom = innerRect.origin.y + innerRect.size.height;
    CGFloat outside_bottom = rect.origin.y + rect.size.height;

    CGFloat inside_top = innerRect.origin.y;
    CGFloat outside_top = rect.origin.y;
    CGFloat outside_left = rect.origin.x;

    CGPathMoveToPoint(retPath, NULL, innerRect.origin.x, outside_top);

    CGPathAddLineToPoint(retPath, NULL, inside_right, outside_top);
    CGPathAddArcToPoint(retPath, NULL, outside_right, outside_top, outside_right, inside_top, radius);
    CGPathAddLineToPoint(retPath, NULL, outside_right, inside_bottom);
    CGPathAddArcToPoint(retPath, NULL,  outside_right, outside_bottom, inside_right, outside_bottom, radius);

    CGPathAddLineToPoint(retPath, NULL, innerRect.origin.x, outside_bottom);
    CGPathAddArcToPoint(retPath, NULL,  outside_left, outside_bottom, outside_left, inside_bottom, radius);
    CGPathAddLineToPoint(retPath, NULL, outside_left, inside_top);
    CGPathAddArcToPoint(retPath, NULL,  outside_left, outside_top, innerRect.origin.x, outside_top, radius);

    CGPathCloseSubpath(retPath);

    CGContextAddPath(p_contex, retPath );
    CGContextFillPath(p_contex); 
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:29:02.217

这里的问题是您正在绘制一个弧然后是一个填充的矩形，因此弧被绘制在这个填充的矩形后面

一个快速的解决方法是在绘制矩形之后移动圆弧的绘制 在绘制矩形之后移动圆弧的绘制

# php - 在 PHP 类中声明变量 vars？

> ID：10858857
> 
> 赞同：0
> 
> 时间：2012-06-02T00:24:19.903
> 
> 标签：php, oop

我是 OOP 的菜鸟，对于必须是非常简单的问题的一些帮助，我将不胜感激。

在非 OOP PHP 中，我会这样做：

```
$fruit = banana;

function showFruit(){
  global $fruit;
  echo $fruit;    
} 
```

这将打印“香蕉”，我可以毫无问题地在函数之外定义变量。

上课怎么样？

```
$fruit = "apple";

class showFruit(){
  var $string = ?????;
  // Functions here...
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T00:37:58.163

这是你要找的吗？

```
class foo {
    private $fruit = "apple";

    public function showFruit() {
        echo $this->fruit;
    }
}

$foo = new foo();
$foo->showFruit(); // Prints "apple" 
```

[演示](http://codepad.viper-7.com/3fcFjA)

# java - 在 Scala 应用程序中处理摆动异常

> ID：10858862
> 
> 赞同：4
> 
> 时间：2012-06-02T00:24:42.603
> 
> 标签：java, swing, scala, exception-handling, event-dispatching

我想将 swing 用于 scala GUI。应用程序状态由 akka actor 处理，并且可以通过其容错恢复。

我想在摆动故障后恢复应用程序。我为 Java 程序员找到了几个用于建立 EDT 异常处理程序以及创建 EDT 代理的方法。处理摇摆异常的scala方式是什么？scala 包装器是否提供更好的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:23:08.680

在大多数情况下，Scala 允许使用类似 Java 的编码风格。更具体地说，可以在 scala 中使用 try/catch 块。但是，catch 块的语法略有不同。

```
catch {
  case e: ExceptionTypeOne => //fill in
  case e: ExceptionTypeTwo => //fill in
  case e: ExceptionTypeThree => //fill in
} 
```

如您所见，`catch`捕获*所有*异常，然后设置 Scala 样式开关。

我不是 Scala 专家或任何东西，我欠我对[这个网站的回答的确切语法](http://tutorials.jenkov.com/scala/exception-try-catch-finally.html)

# mysql - Mysql 处理数十亿行的能力

> ID：10858868
> 
> 赞同：0
> 
> 时间：2012-06-02T00:25:30.697
> 
> 标签：mysql, performance, capacity

我有这台机器：Core 2 CPU 6600, 4GB, 64 bit system, Windows VISTA。

我正在设计一个有 100 亿行的系统，这个表有一个指向另一个表的外键，它应该包含 10x100 亿行。通常，我只是插入两个表。我通常不做连接。

我不需要面向用户的实时性能。我想知道 mysql 是否可以以稳定和合理的性能处理这个大小。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:22:11.873

这取决于您使用的引擎。在这篇文章中，您可以找到更多信息：

[MySQL 数据库表中的最大记录数](https://stackoverflow.com/questions/2716232/maximum-number-of-records-in-a-mysql-database-table)

一般来说，如果可以的话，我建议你使用不同于 VISTA 的其他操作系统，mysq 最适合 linux 机器，

另外，我建议您在插入所有行之前尝试进行一些基准测试。

在这里查看更多参考资料：

[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function%5Fbenchmark](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function%5Fbenchmark)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:28:19.200

这里的决定因素将是您在字段中使用的数据类型。100 亿 x 10 列的文本字段和图像 blob 将比 10 列 int(2) 大几个数量级。

我也同意 Vista 在数十亿行中自找麻烦。它在理论上可能有效，但如果您有大量客户端，它可能会在负载下崩溃和烧毁。

# sorting - 如何对 Guendelman 冲击传播的对象进行分类？

> ID：10858871
> 
> 赞同：3
> 
> 时间：2012-06-02T00:25:38.870
> 
> 标签：sorting, 3d, distance, topology

这是一个关于在 3D 中形成地形树的问题。一点上下文：我有一个物理引擎，其中有身体和碰撞点以及一些约束。这不是家庭作业，而是多线程实验。

我需要使用属于本文档中的图层的对象组以自下而上的方式对主体进行排序：请参阅“冲击传播”部分 [http://www2.imm.dtu.dk/visiondag/VD05/图形/幻灯片/kenny.pdf](http://www2.imm.dtu.dk/visiondag/VD05/graphical/slides/kenny.pdf)

![排序树](../Images/b4ae2338838d237e66b4ff7a95ec6ee9.png)

他用来描述如何遍历树的伪代码非常有意义：

```
shock-propagation(algorithm A)
compute contact graph
for each stack layer in bottom up order
     fixate bottom-most objects of layer
     apply algorithm A to layer
     un-fixate bottom-most objects of layer
next layer 
```

我已经找到了算法 A（我的脉冲代码）。**带有 3D 点列表的树/层排序（拓扑排序？）的伪代码会是什么样子？**

IE，我不知道在哪里停止/开始下一个“梯级”或“分支”。我想我可以将它按 y 位置分块，但这看起来很笨重且容易出错。我是否研究[地形排序？](http://en.wikipedia.org/wiki/Topological_sorting)我真的不知道如何在 3D 中进行此操作。如果这是这样做的方法，我将如何获得拓扑排序的“边缘”？

我是不是在想这个，我只是通过找到点 p1 然后是 p2.y > p1.y 的最远的下一个点 p2 来“连接点”？我在这里看到一个问题，使用纯距离，p1 到 p0 的距离可能大于 p2，这会导致排序错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:19:42.077

我自己解决了这个问题。

我在链接到本文的可下载源代码中找到了如何完成此操作的示例：

[http://www-cs-students.stanford.edu/~eparker/files/PhysicsEngine/](http://www-cs-students.stanford.edu/~eparker/files/PhysicsEngine/)

特别是从第 221 行开始的 WorldState.cs 文件。

但是想法是您为所有静态对象分配级别为-1，并为每个其他对象分配不同的默认级别，例如-2。然后，对于与级别 -1 的物体的每次碰撞，您将与之碰撞的物体添加到列表中，并将其级别设置为 0。

之后使用 while 循环 while(list.Count > 0) 检查与它发生碰撞的物体并将其设置为 body.level + 1。

之后，对于模拟中仍然具有默认级别（我之前说过 -2）的每个主体，将其级别设置为最高级别。

还有一些更精细的细节，但是查看示例中的代码会比我以往任何时候都更好地解释它。

希望能帮助到你！

来自 Evan Parker 代码的相关代码。[斯坦福]

```
{{{

// topological sort (bfs)
            // TODO check this
            int max_level = -1;
            while (queue.Count > 0)
            {
                RigidBody a = queue.Dequeue() as RigidBody;
                //Console.Out.WriteLine("considering collisions with '{0}'", a.Name);
                if (a.level > max_level) max_level = a.level;
                foreach (CollisionPair cp in a.collisions)
                {
                    RigidBody b = (cp.body[0] == a ? cp.body[1] : cp.body[0]);
                    //Console.Out.WriteLine("considering collision between '{0}' and '{1}'", a.Name, b.Name);
                    if (!b.levelSet)
                    {
                        b.level = a.level + 1;
                        b.levelSet = true;
                        queue.Enqueue(b);
                        //Console.Out.WriteLine("found body '{0}' in level {1}", b.Name, b.level);
                    }
                }
            }

            int num_levels = max_level + 1;

            //Console.WriteLine("num_levels = {0}", num_levels);

            ArrayList[] bodiesAtLevel = new ArrayList[num_levels];
            ArrayList[] collisionsAtLevel = new ArrayList[num_levels];
            for (int i = 0; i < num_levels; i++)
            {
                bodiesAtLevel[i] = new ArrayList();
                collisionsAtLevel[i] = new ArrayList();
            }

            for (int i = 0; i < bodies.GetNumBodies(); i++)
            {
                RigidBody a = bodies.GetBody(i);
                if (!a.levelSet || a.level < 0) continue; // either a static body or no contacts

                // add a to a's level
                bodiesAtLevel[a.level].Add(a);

                // add collisions involving a to a's level
                foreach (CollisionPair cp in a.collisions)
                {
                    RigidBody b = (cp.body[0] == a ? cp.body[1] : cp.body[0]);
                    if (b.level <= a.level) // contact with object at or below the same level as a
                    {
                        // make sure not to add duplicate collisions
                        bool found = false;
                        foreach (CollisionPair cp2 in collisionsAtLevel[a.level])
                            if (cp == cp2) found = true;

                        if (!found) collisionsAtLevel[a.level].Add(cp);
                    }
                }
            }

            for (int step = 0; step < num_contact_steps; step++)
            {
                for (int level = 0; level < num_levels; level++)
                {
                    // process all contacts
                    foreach (CollisionPair cp in collisionsAtLevel[level])
                    {
                        cp.ResolveContact(dt, (num_contact_steps - step - 1) * -1.0f/num_contact_steps);
                    }
                }
            }

}}} 
```

# objective-c - UITableView 使用非英语（阿拉伯语、汉语、希伯来语、乌尔都语等）文本时滚动缓慢

> ID：10858880
> 
> 赞同：2
> 
> 时间：2012-06-02T00:26:24.523
> 
> 标签：objective-c, ios, uitableview, scroll

我正在使用 iOS 5 并制作 iPad 应用程序。我的应用程序中有一个 UITableView，其中每个单元格都包含一个 UITextView。但是，当将非英文文本加载到文本视图中时，它会经历非常缓慢的滚动。

这是我为演示该问题而创建的示例项目。这使用了一个 UITableView，其中每个 UITableViewCell 都有一个 UITextView，标签为 1。它滚动非常缓慢：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 20;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"BasicCellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    UITextView *textView = (UITextView *)[cell viewWithTag:1];
    textView.text = @"أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎. أَبْجَدِيَّة عَرَبِيَّة‎.";
    return cell;
} 
```

我已经使用 NSLog 来验证仅此行会导致减速。删除它会使一切正常工作，但我需要设置文本。我已经阅读了有关性能调整的所有内容，但这对我来说仍然是一个大问题。

慢速滚动仅是阿拉伯语、中文、希伯来语等语言的问题，而不是英语、法语、德语（可能与字符集或 unicode 有关？） 5000 个字符的英文字符串除了阿拉伯语字符串之外根本没有减速有200个。

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T00:56:06.733

似乎在这里延迟执行的是在可编辑的 UITextView 中设置长文本

根据讨论，将 UITextView 设置为不可编辑提高了我建议使其不可编辑并且可能稍后将其更改为可编辑的性能

# ruby-on-rails - 在编写模型规范时，检查有效性和成功保存之间有区别吗？

> ID：10858884
> 
> 赞同：1
> 
> 时间：2012-06-02T00:26:54.587
> 
> 标签：ruby-on-rails, rspec

在为 Rails 模型编写规范时，检查模型是否应该有效和 save 是否应该是真的有区别吗？我在其他代码库中看到这两个条件是独立测试的，但 Rails API 似乎解释了在调用 save 时运行此验证检查。

是否存在模型可以有效但不能保存的任何情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T00:38:47.507

当然，数据库可能已关闭。与验证无关的回调可能会失败。

但关键是测试应该测试小的隔离位，因此验证逻辑是单独测试的。

# css - CSS3 iOS徽章文本不垂直居中

> ID：10858885
> 
> 赞同：0
> 
> 时间：2012-06-02T00:27:16.590
> 
> 标签：css, padding, cross-browser

我已经设置了一个 CSS 配置文件来创建一个 iOS 类型的通知徽章。除了内部字体垂直对齐外，一切都运行良好。Firefox 使内部文本完美居中，但是 webkit 浏览器（safari、chrome 等）的行为就像应用了一个 padding-top 将字体推离顶部太远。这是一个演示的小提琴：http: [//jsfiddle.net/F5wdp/](http://jsfiddle.net/F5wdp/)

这是代码：

```
.alert-notify-circle{
        float:left;
        background: radial-gradient( center -9px, circle closest-side, white 0, red 26px );
        background: -moz-radial-gradient( center -9px, circle closest-side, white 0, red 26px );
        background: -ms-radial-gradient( center -9px, circle closest-side, white 0, red 26px );
        background: -o-radial-gradient( center -9px, circle closest-side, white 0, red 26px );
        background: -webkit-radial-gradient( center -9px, circle, white 0, red 26px );
        background-color: red;
        border: 2px solid white;
        border-radius: 15px;
        box-shadow: 1px 1px 2px black;
        color: white;
        font:15px Helvetica, Verdana, Tahoma;
        font-weight:500;
        padding-top:0px;
        height: 14px;
        line-height:16px;
        padding-left:1px;
        text-align: center;
        width: 14px;
        z-index:10;
    }

<div class='alert-notify-circle notify-upper-left'>2</div> 
```

如果您需要更多信息，请告诉我，并提前感谢您提供的任何和所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:13:12.410

我相信这是字体度量的问题。使用 line-height 进行垂直对齐可能会在浏览器之间产生不同的结果，具体取决于它们呈现文本的方式。我建议使用填充来平衡垂直间距，例如：

```
.alert-notify-circle {
min-width:.5em;
height:1.3em;
padding:0 .375em;
font:bold 1em Arial;
line-height:1.4em;
color: white;
border-radius: 1em;
border: 2px solid white;
box-shadow: 0 .25em .4em rgba(0,0,0,.33);
background-clip:padding-box;

background-color:#e91823;
background-image: linear-gradient(top, #F9BABD 0%, #ED3F48 50%, #E91822 50%, #C50104 100%);
background-image: -o-linear-gradient(top, #F9BABD 0%, #ED3F48 50%, #E91822 50%, #C50104 100%);
background-image: -ms-linear-gradient(top, #F9BABD 0%, #ED3F48 50%, #E91822 50%, #C50104 100%);
background-image: -moz-linear-gradient(top, #F9BABD 0%, #ED3F48 50%, #E91822 50%, #C50104 100%);
background-image: -webkit-linear-gradient(top, #F9BABD 0%, #ED3F48 50%, #E91822 50%, #C50104 100%);
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #F9BABD), color-stop(0.5, #ED3F48), color-stop(0.5, #E91822), color-stop(1, #C50104)); 
```

}

以我为您制作的这个徽章为例。我更新了它以获得更好的跨浏览器兼容性：

[http://jsfiddle.net/x2xjB/3/](http://jsfiddle.net/x2xjB/3/)

推荐阅读：

[http://blog.typekit.com/2010/07/14/font-metrics-and-vertical-space-in-css/](http://blog.typekit.com/2010/07/14/font-metrics-and-vertical-space-in-css/)

# c - 基本 C 指针

> ID：10858890
> 
> 赞同：11
> 
> 时间：2012-06-02T00:28:36.900
> 
> 标签：c, pointers

我是 C 语言的初学者，在过去一两个小时内一直试图找出我的代码出了什么问题。我一直在阅读 K&Rs 的书，我一直在看它，但仍然不明白我的逻辑错误。

```
while (*argv>0){
    while (**argv>0){
        printf("%c\n",**argv);
        **argv++;
    }
    argv++;
} 
```

任务：打印出使用 argv 提供给我的程序的所有参数。

据我了解， argv 是一个指向数组的指针，其中包含指向字符指针数组的更多指针。所以，我说当 *argv>0 或者当第一个数组仍然有元素时，我们应该跟随从第一个数组到下一个数组的指针。然后我们应该打印出下一个数组中的所有元素。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-02T00:50:37.940

此行中的 * 太多：

```
**argv++; 
```

它应该是这样的：

```
*argv++; 
```

加上额外的大括号，因为`++`操作具有更高的优先级：

```
(*argv)++; 
```

它会起作用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-02T00:37:24.760

我建议您不要像下标符号 ( `[]`) 允许您这样做时那样使用指针取消引用来混淆自己。

```
#include <stdio.h>

int main(int argc, char** argv)
{
    int i;
    for(i = 0; argv[i]; i++)
        printf("%s\n", argv[i]);
    return 0;
} 
```

这也将打印`argv[0]`，这是程序的名称/路径。

现在我的代码做了什么？当解析为 false （即aka ）时，从元素开始`for(i = 0; argv[i]; i++)`计数，即数组的最后一个元素。然后对于数组中的每个元素，它使用格式说明符来打印它。您也可以将作为第一个也是唯一的参数传递给，但这通常是不受欢迎的，因为它为某些字符串格式攻击打开了大门。`i``0``argv[i]``0``NULL``argv``%s``printf``argv[i]``printf`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-02T00:32:00.707

`argv`是类型，`char *argv[]`即指向字符串数组（`char*`'s）的指针。`argv++`移动到数组中的下一个字符串。

通常这个函数会写成这样：

```
 int main(int argc, char *argv[]){
   int i;
   for (i = 0; i < argc; i++){ //loop from 0 to argc (argument count)
      printf("%s ", argv[i]);
   }
   return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-02T00:57:27.980

这将工作::

```
while(argc--)//can't use *argv here, because *argv would be the  address of the 
              // element which argv is pointing to, just by knowing the address u can't say whether it still has elements or not
{
    while( **argv )
    {
        printf("%c", **argv);
        (*argv)++;  //by using **argv++, you are actually moving argv to next array, not to the next character of current array 
    }
    argv++;
    printf("\n");//move your \n to here, else you will end up printing every character in a new line
} 
```

# java - 将 BigDecimal 转换为可以在 ViewText 字段中显示的类型

> ID：10858891
> 
> 赞同：0
> 
> 时间：2012-06-02T00:28:59.803
> 
> 标签：java, android

全部-我很难获取 EditText 的值并将其弄乱以执行方程式和诸如舍入和乘法之类的任务。我听说 BigDecimal 是一种很好的方法，但是很难将变量转换为可以成为 BigDecimal 变量的类型（View->String->Float->BigDecimal），然后再将它们转换为一种类型它们可以在哪里输出（BigDecimal->？）。这是我的代码：

```
 public class TippingActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
    public void calculateNumbers(View view) throws ParseException {
        // Bill
        EditText text = (EditText)findViewById(R.id.edit_bill);             
        String value;
        value = text.getText().toString();
        float bill = Float.parseFloat(value);       
        BigDecimal billbd;
        billbd = new BigDecimal(bill);

        //Tip
        EditText text2 = (EditText)findViewById(R.id.edit_tip);
        String value2;
        value2 = text2.getText().toString();    
        if(!value2.contains("."))
            value2 = "."+value2;
        float tip = Float.parseFloat(value2);
        BigDecimal tipbd;
        tipbd = new BigDecimal(tip);

        //People
        EditText text3 = (EditText)findViewById(R.id.edit_people);
        String value3;
        value3 = text3.getText().toString();
        float people = Float.parseFloat(value3);
        BigDecimal peoplebd;
        peoplebd = new BigDecimal(people);
        //Answer
        TextView answer = (TextView) findViewById(R.id.answer);
        //Answer to string
        String answerstring;
        answerstring = answer.getText().toString();
        //Answer to Float
        float answerfloat = Float.parseFloat(answerstring);
        //Answer to BigDecimal
        BigDecimal answerbig;
        answerbig = new BigDecimal(answerfloat);
        answerbig.setScale(2, RoundingMode.HALF_UP);
        answerbig = billbd.multiply(tipbd).add(billbd).divide(peoplebd);
        //Answer to String
        String answerfrombd = answerbig.getText().toString();        
        answer.setText(answerfrombd);       
    }
} 
```

在底部的第二行代码中，我得到一个错误

```
`String answerfrombd = answerbig.getText().toString();` 
```

因为我不能从 BigDecimal 转到 String。有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T00:33:54.873

您可以这样做，具体取决于您希望它如何显示。

```
answerbig.toPlainString() 
```

或者：

```
answerbig.toBigInteger().toString() 
```

# objective-c - 如何正确测量 NSInputStream 数据速率

> ID：10858894
> 
> 赞同：2
> 
> 时间：2012-06-02T00:29:34.093
> 
> 标签：objective-c, ios, ios5, nsrunloop, nsinputstream

我正在尝试测量 ftp 下载期间的实际传输速度，下载本身正在运行，流连接在运行循环中。在事件开始时使用 CFTimeGetCurrent 在 NSStreamEventHasBytesAvailable 中完成测量，最后，在将数据写入文件后，使用 (double)previousTimestamp-CFAbsoluteTimeGetCurrent 计算经过的时间，但我得到的时间绝对不合理。在模拟器和设备上测试过，有人能启发我吗？

代码：

```
 switch (eventCode) {
    case NSStreamEventOpenCompleted: {            
    } break;
    case NSStreamEventHasBytesAvailable: {

        if ([[self.fileStream propertyForKey:NSStreamFileCurrentOffsetKey] intValue]==0) {

            previousTimestamp = CFAbsoluteTimeGetCurrent();

        }

        NSInteger       bytesRead;
        uint8_t         buffer[32768];

        bytesRead = [self.networkStream read:buffer maxLength:sizeof(buffer)];

        if (bytesRead == -1) 
        {
            [self _stopReceiveWithStatus:@"Err"];
        } 
        else if (bytesRead == 0) 
        {

            [self _stopReceiveWithStatus:nil];
        } 
        else 
        {
            [self completition:bytesRead];

            NSInteger   bytesWritten;
            NSInteger   bytesWrittenSoFar;

            // Write to the file.

            bytesWrittenSoFar = 0;
            do {
                bytesWritten = [self.fileStream write:&buffer[bytesWrittenSoFar] maxLength:bytesRead - bytesWrittenSoFar];
                assert(bytesWritten != 0);
                if (bytesWritten == -1) {
                    [self _stopReceiveWithStatus:@"File err"];
                    break;
                } else {
                    bytesWrittenSoFar += bytesWritten;
                }
            } while (bytesWrittenSoFar != bytesRead);

            [self downloadSpeedSave:bytesRead :previousTimestamp-CFAbsoluteTimeGetCurrent()];

            previousTimestamp = CFAbsoluteTimeGetCurrent(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:54:44.507

我使用的另一种方法是使用 time.h 和 c 例程来捕获时间。

[http://www.cplusplus.com/reference/clibrary/ctime/time/](http://www.cplusplus.com/reference/clibrary/ctime/time/)

SO iPhone 上的另一个好链接 [：如何获取当前毫秒数？](https://stackoverflow.com/questions/358207/iphone-how-to-get-current-milliseconds)

# xcode - 编码 NSMutableArray

> ID：10858895
> 
> 赞同：4
> 
> 时间：2012-06-02T00:29:35.497
> 
> 标签：xcode, nsmutablearray, nscoding

我有一个包含各种 NSString 对象和变量的对象，我使用 NSCoding 将其归档到磁盘上的文件中，然后再取消归档。到目前为止，一切都运行良好。

今天，我想向对象添加一个 NSMutableArray 并尝试使用以下代码进行编码：

```
[encoder encodeObject:myArray ForKey:@"myArray"]; 
```

然后使用以下方法对其进行解码：

```
[self setMyArray:[decoder decodeObjectForKey:@"myArray"]]; 
```

它似乎不起作用，虽然我在编码或解码本身没有任何错误，但如果我在从文件解码后尝试修改数组的值，我确实会收到错误消息。

我确定我在这里做错了什么，但不完全确定是什么。我在想也许它可能与它在取消归档期间没有正确分配有关。

有什么看起来很明显是问题的根源吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-02T00:43:09.513

> 它似乎不起作用，虽然我在编码或解码本身没有任何错误，但如果我在从文件解码后尝试修改数组的值，我确实会收到错误消息。

解码档案会为您提供不可变的对象，无论它们在编码时是可变的还是不可变的。你没有做任何特别错误的事情——它像宣传的那样工作。

有关类似问题的另一个示例和解决方案，请参[见此答案：](https://stackoverflow.com/a/10392017/643383)

```
[self setMyArray:[[decoder decodeObjectForKey:@"myArray"] mutableCopy]; 
```

# html - 从 R PCA 中提取 3D 坐标

> ID：10858904
> 
> 赞同：-1
> 
> 时间：2012-06-02T00:31:01.920
> 
> 标签：html, r, canvas, pca

我正在尝试找到一种方法使 R 的 3D PCA 可视化更便携；我已经在 2D 矩阵上使用`prcomp()`.

1.  如何导出数据点的 3D 坐标以及与每个相关的标签和颜色 (RGB)？
2.  `princomp()`和的实际区别是什么`prcomp()`？
3.  关于如何使用 HTML5 和画布最好地查看 3D PCA 图的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T07:51:38.920

这是一个可以使用的示例：

```
pc <- prcomp(~ . - Species, data = iris, scale = TRUE) 
```

1.  轴分数是从组件中提取的`x`；因此，您可以使用以下方式将（您没有说您希望如何导出）作为 CSV 写出：

    ```
    write.csv(pc$x[, 1:3], "my_pc_scores.csv") 
    ```

    如果您想为这些分数分配信息（颜色和标签，它们与 PCA 无关，而是您自己分配的东西），然后将它们添加到分数矩阵中，然后导出。在上面的示例中，有 3 个物种，每个物种有 50 个观测值。如果我们希望将这些信息与分数一起导出，那么这样的事情就可以了

    ```
    scrs <- data.frame(pc$x[, 1:3], Species = iris$Species,
                       Colour = rep(c("red","green","black"), each = 50))
    write.csv(scrs, "my_pc_scores2.csv") 
    ```

    `scrs`看起来像这样：

    ```
    > head(scrs)
            PC1        PC2         PC3 Species Colour
    1 -2.257141 -0.4784238  0.12727962  setosa    red
    2 -2.074013  0.6718827  0.23382552  setosa    red
    3 -2.356335  0.3407664 -0.04405390  setosa    red
    4 -2.291707  0.5953999 -0.09098530  setosa    red
    5 -2.381863 -0.6446757 -0.01568565  setosa    red
    6 -2.068701 -1.4842053 -0.02687825  setosa    red 
    ```

    **更新**错过了关于 RGB 的要点。请参阅`?rgb`在 R 中指定此内容的方法，但如果您想要的只是 RGB 字符串，则将上面的内容更改为使用类似

    ```
     Colour = rep(c("#FF0000","#00FF00","#000000"), each = 50) 
    ```

    相反，您可以在其中指定所需的 RGB 字符串。

2.  `princomp()`和之间的本质区别`prcomp()`是用于计算 PCA 的算法。`princomp()`使用协方差或相关矩阵的特征分解，同时`prcomp()`使用原始数据矩阵的奇异值分解 (SVD)。`princomp()`仅处理数据中至少有相同数量的样本（行）和变量（列）的数据集。可以处理列多于行`prcomp()`的那种类型的数据*和数据集。*此外，也许更重要的是，取决于您想到的用途，SVD 优于特征分解，因为它具有更好的数值精度。

3.  我已经用[html5](/questions/tagged/html5 "显示标记为“html5”的问题")和[canvas](/questions/tagged/canvas "显示标记为“画布”的问题")标记了 Q，希望这些专家可以提供帮助。如果您没有收到任何回复，请从您的 Q 中删除第 3 点，并专门针对使用画布显示 PC 的主题开始一个新的，请参考这一点以获取详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T00:41:21.080

您可以通过执行来了解任何 R 对象`str(object_name)`。在这种情况下：

```
m <- matrix(rnorm(50), nrow = 10)
res <- prcomp(m)
str(m) 
```

`prcomp`如果你通过doing查看帮助页面`?prcomp`，你会发现scores在`res$x`里面，loadings在里面`res$rotation`。这些已由 PC 标记。没有颜色，除非您决定在绘图过程中分配一些颜色。请参阅相应的帮助页面以比较`princomp`这`prcomp`两个功能之间的比较。基本上，它们之间的区别与幕后使用的方法有关。你最后一个问题我帮不了你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T16:08:01.943

您声明您在 2D 矩阵上执行 PCA。如果这是您的数据矩阵，则无法获得 3D PCA。当然，您的二维矩阵可能是数据的协方差矩阵，在这种情况下，您需要使用`princomp`（不是`prcomp`！）并明确传递协方差矩阵`m`，如下所示：

```
princomp(covmat = m) 
```

传递协方差矩阵，如：

```
princomp(m) 
```

不会产生正确的结果。

# xml - WCF - 让客户端选择返回格式

> ID：10858907
> 
> 赞同：7
> 
> 时间：2012-06-02T00:31:29.723
> 
> 标签：xml, json, wcf, wcf-endpoint

我正在尝试自己学习一些 WCF。我有 C#/ASP.net 知识，但我是 WCF 新手。我在学习的同时使用 Visual Studio 2010 开发一些应用程序。

我开发了一个小型 Web 服务，它充当 TODO/任务管理器的后端，用户可以在其中创建/删除/编辑新事件；这一切都非常简单和基本。

我的问题如下：

1.  有没有办法让客户端选择他想要的返回格式（例如xml/json/rdf）而无需编写新的操作合同？
2.  如何在客户端上看到 Web 服务发送给我的确切消息（以便我可以检查它是例如 json 表示还是 xml 消息）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T11:15:12.957

使用 WCF 创建 REST 服务时，支持内容协商。

您只需在端点上 设置[`automaticFormatSelectionEnabled`](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.webhttpendpoint.automaticformatselectionenabled.aspx)为。`true`

另请参阅：[WCF Web HTTP 格式](http://msdn.microsoft.com/en-us/library/ee476510.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T01:40:54.217

Web 浏览器从网站选择响应格式的方式是通过[内容协商](http://en.wikipedia.org/wiki/Content_negotiation)，特别是通过使用[Accept](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1)和[Content-Type](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17) HTTP 标头。

例如，如果您的客户端需要 JSON 格式的响应，它将向服务器发送一个如下所示的 HTTP 请求：

```
GET /resource HTTP/1.0
User-Agent: YourClient 1.0
Accept: application/json 
```

反过来，服务器将使用如下 HTTP 数据包进行响应：

```
HTTP/1.0 200 OK
Content-Type: application/json
Content-Length: 20

{ "type" : "json" } 
```

不幸的是，WCF 无法处理开箱即用的内容协商，但是有一个非常好的第三方库，可以在没有太多工作的情况下启用它，称为[WcfRestContrib](https://github.com/mikeobrien/WcfRestContrib)。他们的[文档](https://github.com/mikeobrien/WcfRestContrib/wiki/De-serialization-Overview)描述了您必须采取的（非常简单的）步骤才能使其工作。总结一下，你必须

1.  根据您希望支持的内容类型装饰您的服务类，
2.  装饰您希望内容协商感知的方法，以及
3.  从该方法返回一个可序列化的业务对象。

至于您的第二个问题，[Fiddler](http://www.fiddler2.com/fiddler2/)是测试客户端和服务器的不错选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T05:17:47.123

Instead of going for a SOAP based service you can try REST model. The new way of creating REST or HTTP services using MS technologies is using [Web API](http://www.asp.net/web-api) that will be available ASP.NET MVC 4.

Advantages of REST:

1.  Content Negotiation - The client can specify the data-type(JSON, XML..) through the `Accept-Type` parameter in the `Request` header.

2.  Use HTTP methods explicitly

3.  Directory structure-like URIs

and more..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T00:47:38.833

我的经验是 WCF 在这方面不是很好。MVC 的“操作结果”概念是一个很大的改进，它让您可以返回给定端点所需的任何内容。（据说新的“Web API”将是 WCF 和 MVC 功能的结合。）

也就是说，让客户端选择响应格式的最简单的 WCF 方法是指定*Stream*返回类型，并根据要求对结果进行序列化。

因此，像这样声明方法，并使用您为[JSON](http://json.codeplex.com/)和[XML](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)选择的序列化程序。

```
[OperationBehavior]
[WebGet()]
public Stream SomeOperation(string format)
{
    string test = "Hello world";
    string encodedResult;
    if (format.ToLower() == "xml") {
        // serialize as XML (eg, XML Serializer)
        HttpContext.Current.Response.ContentType = "text/xml";
    }
    else if (format.ToLower() == "json") {
        // serialize as JSON (eg, Newtonsoft Json)
        HttpContext.Current.Response.ContentType = "application/json";
    }
    var ms = new MemoryStream(Encoding.UTF8.GetBytes(encodedResults));
    return ms;
} 
```

对于您的第二个问题，我建议使用像 Fiddler 这样的免费工具来检查来自服务器的原始 HTTP 响应。

# sql - 插入语句的 SQL 命令中缺少逗号

> ID：10858909
> 
> 赞同：2
> 
> 时间：2012-06-02T00:31:44.503
> 
> 标签：sql

我有以下查询用于将值插入到我的导师表中：

```
INSERT INTO Tutor ( tutor_ID NUMBER(3), 
                    F_name VARCHAR(14), 
                    L_name VARCHAR(13), 
                    Date_Joined DATE, 
                    Phone NUMBER(10), 
                    Email VARCHAR(30),
                    amount_of_allowance VARCHAR(5), 
                    tutoree_ID NUMBER(6)
                  ) VALUES
                  ( 610, 
                    'DAVID', 
                    'FOONG', 
                    '02/07/2007', 
                    02104465, 
                    'DAVIDFOONG@YAHOO.COM', 
                    '800', 
                    007); 
```

运行后它写道

```
"Error starting at line 28 in command:
INSERT INTO Tutor (tutor_ID NUMBER(3), F_name VARCHAR(14), L_name VARCHAR(13), Date_Joined DATE, Phone NUMBER(10), Email VARCHAR(30), amount_of_allowance VARCHAR(5), tutoree_ID NUMBER(6))
VALUES  (610, 'DAVID', 'FOONG', '02/07/2007', 02104465, 'DAVIDFOONG@YAHOO.COM', '800', 007)

Error at Command Line:28 Column:28
Error report:
SQL Error: ORA-00917: missing comma
00917\. 00000 -  "missing comma"
*Cause:    
*Action:" 
```

但我不明白我在哪里错过了逗号？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T00:34:02.253

您不应在插入语句中包含数据类型定义：

```
insert into Tutor
(tutor_ID, F_name, L_name, Date_Joined, Phone, Email, amount_of_allowance, tutoree_ID)
values 
(610, 'DAVID', 'FOONG', '02/07/2007', 02104465, 'DAVIDFOONG@YAHOO.COM', '800', 007); 
```

# google-maps - Google Map API SetPosition 错误

> ID：10858913
> 
> 赞同：0
> 
> 时间：2012-06-02T00:32:54.247
> 
> 标签：google-maps, google-maps-api-3

我正在使用谷歌地图 API v3。只要标记未定义，我的脚本就可以正常工作并显示汽车图标。但是当我在数据库中更新long lat并且ajax函数通过json返回一个新的long lat时，`marker.setPosition(newLatLng)`使标记消失......

请帮帮我，这是什么问题？这是我的代码：

```
 $(document).ready(function () {
    var map;
    var marker;
    function initialize() {
        var myLatlng = new google.maps.LatLng(<?php echo $c_lat; ?>, <?php echo $c_long; ?>);
        var myOptions = {
            zoom: 19,
            center: myLatlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }

        map = new google.maps.Map(document.getElementById('driver_loc'), myOptions);
    }
function getLongLat(){
     $.ajax({
           type: "POST",
           url: "config/getLongLat.php?id=<?php echo $driverId; ?>",
           dataType: "json",
           success: function(data)
                {   
            var lat=data.lat; //returns new lat via db
            var lon=data.lon;
                // alert(lat);   
           var newLatLng = new google.maps.LatLng(lat, lon);

            if (marker != undefined)
                marker.setPosition(newLatLng);
            else
                marker = new google.maps.Marker({
                    position: newLatLng,
                    map: map,   
                    icon: 'images/car.png',
                    animation: google.maps.Animation.DROP, 
                    draggable: true
                });
            }
        });
        console.log(marker);
    }
    // Onload handler to fire off the app.
    google.maps.event.addDomListener(window, 'load', initialize);
  //  google.maps.event.addDomListener(window, 'load', callPosition);
    window.setInterval(function(){
  getLongLat();
}, 6326);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T04:01:51.347

一个好的做法是对 json 数据使用 parseFloat 方法。新位置可以在当前视口之外。要处理它，只需使用 map.setCenter([new_position]) 方法。您还可以使用 map.setZoom([zoom_level]) 更改缩放级别。在你的情况下：

```
 $(document).ready(function () {
    var map;
    var marker;
    function initialize() {
      var myLatlng = new google.maps.LatLng(<?php echo $c_lat; ?>, <?php echo $c_long; ?>);
      var myOptions = {
        zoom: 19,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }
      map = new google.maps.Map(document.getElementById('driver_loc'), myOptions);
    }
    function getLongLat(){
      $.ajax({ type: "POST", url: "config/getLongLat.php?id=<?php echo $driverId; ?>", dataType: "json",
               success: function(data){   
                 var lat=parseFloat(data.lat); //returns new lat via db
                 var lon=parseFloat(data.lon);
                 var newLatLng = new google.maps.LatLng(lat, lon);

                 if (marker != undefined){
                   marker.setPosition(newLatLng);
                 } else {
                   marker = new google.maps.Marker({
                     position: newLatLng,
                     map: map,   
                     icon: 'images/car.png',
                     animation: google.maps.Animation.DROP, 
                     draggable: true
                   });
                 }
                 //Center map on a new position
                 map.setCenter(newLatLng);
                 //Change zoom level
                 //map.setZoom(19);
               }
      });
    }
    // Onload handler to fire off the app.
    google.maps.event.addDomListener(window, 'load', initialize);
    //  google.maps.event.addDomListener(window, 'load', callPosition);
    window.setInterval(function(){
      getLongLat();
    }, 6326);
  }); 
```

# ld - .... ubuntu 11.10 需要 libc.so.6()（64 位）

> ID：10858915
> 
> 赞同：2
> 
> 时间：2012-06-02T00:33:25.587
> 
> 标签：ld, glibc, ubuntu-11.10

我正在尝试在 Ubuntu 11.10（64 位）上为 vPostgres（Vmware 的 postgres 版本）安装 odbc 驱动程序。我已经下载了安装程序（64 位）的 rpm 文件，当我尝试使用以下命令安装 rpm 时：

rpm -ivh Vmware-vPostgres-client.rpm，它显示了这个错误：

```
错误：失败的依赖项：
    VMware-vPostgres-client-1.0.1.1145-532311.x86_64 需要 libc.so.6()(64bit)
    VMware-vPostgres-client-1.0.1.1145-532311.x86_64 需要 libc.so.6(GLIBC_2.2.5)(64bit)
    VMware-vPostgres-client-1.0.1.1145-532311.x86_64 需要 libc.so.6(GLIBC_2.3)(64bit)
    VMware-vPostgres-client-1.0.1.1145-532311.x86_64 需要 libc.so.6(GLIBC_2.3.3)(64bit)
    VMware-vPostgres-client-1.0.1.1145-532311.x86_64 需要 libdl.so.2()(64bit)
    VMware-vPostgres-client-1.0.1.1145-532311.x86_64 需要 libdl.so.2(GLIBC_2.2.5)(64bit)
    VMware-vPostgres-client-1.0.1.1145-532311.x86_64 需要 libpthread.so.0()(64bit)
    VMware-vPostgres-client-1.0.1.1145-532311.x86_64 需要 libpthread.so.0(GLIBC_2.2.5)(64bit)
    VMware-vPostgres-client-1.0.1.1145-532311.x86_64 需要 libresolv.so.2()(64bit)
    VMware-vPostgres-client-1.0.1.1145-532311.x86_64 需要 libresolv.so.2(GLIBC_2.2.5)(64bit)

```

我尝试过的几件事：

定位 libpthread.so.0 返回：

```
/lib/i386-linux-gnu/libpthread.so.0

/lib/x86_64-linux-gnu/libpthread.so.0

/lib32/libpthread.so.0

```

我得到所有其他文件的类似位置：locate libc.so.6

```
/lib/i386-linux-gnu/libc.so.6

/lib/x86_64-linux-gnu/libc.so.6

/lib32/libc.so.6

```

等等。

我尝试使用以下方法创建符号链接：

```
sudo ln -s lib/x86_64-linux-gnu/libc.so.6
 /lib64/libc.so.6

sudo ln -s lib/x86_64-linux-gnu/libc.so.6
 /lib/libc.so.6

sudo ln -s lib/x86_64-linux-gnu/libc.so.6
 libc.so.6

```

但他们都没有工作。我不确定它到底在哪里尝试搜索这些文件。

ldd Vmware-vPostgres-client.rpm 没有多大帮助，并返回预期的“不是动态可执行文件”

我尝试在 /etc/ld.so.conf 文件中添加路径

包括 lib/x86_64-linux-gnu/libc.so.6

我还尝试将 LD_LIBRARY_PATH 设置为指定的文件，但没有用。

ldd --version 显示 GLIBC 2.13

谁能帮我弄清楚它在哪里搜索文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T05:53:57.817

最后，找到了解决方案.. 使用外星人。rpm 软件包适用于基于 redhat 的 Linux 发行版，例如 CentOS 和 redhat。对于基于 debian 的系统（Ubuntu），您需要 deb 包。Alien 是一个可以将 rpm 文件转换为 deb 文件的产品，然后可以安装在 ubuntu 上。

# linux - Linux bash 多线程/处理小型作业

> ID：10858922
> 
> 赞同：4
> 
> 时间：2012-06-02T00:35:22.840
> 
> 标签：linux, multithreading, bash, shell, multiprocessing

我有一个脚本可以运行一些数据处理命令 10K 次。

```
foreach f (folderName/input*.txt)
  mycmd $f
end 
```

我已将每个“mycmd $f”的运行时间定为 0.25 秒。运行 10K 次，加起来超过 1 小时。我在 16 核 nehalem 上运行它。不在剩余的 15 个内核上运行是一种巨大的浪费。

我已经尝试过睡眠，不知何故，脚本在 3900 次迭代左右因警告或错误而死，见下文。睡眠时间越短，它死得越快。

```
foreach f (folderName/input*.txt)
  mycmd $f & ; sleep 0.1
end 
```

必须有更好的方法。注意：我更喜欢 shell 脚本解决方案，我们不要徘徊在 C/C++ 领域。

谢谢

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T00:42:13.853

将文件列表通过管道传输到

```
xargs -n 1 -P 16 mycmd 
```

例如：

```
echo folderName/input*.txt | xargs -n 1 -P 16 mycmd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T07:17:33.260

使用以下应用程序之一可能还有其他一些解决方案：

[xjobs](http://www.maier-komor.de/xjobs.html)

[平行线](http://mi.eng.cam.ac.uk/~er258/code/parallel.html)

[PPSS - 并行处理 Shell 脚本](http://code.google.com/p/ppss/)

[运行参数文件](http://lug.fh-swf.de/shell/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T07:20:13.017

`batch`用;提交工作 这应该可以解决负载平衡和资源不足的问题。

```
for f in folderName/input.*; do
    batch <<____HERE
        mycmd "$f"
____HERE
done 
```

（不能 100% 确定报价是否正确和/或有用。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T15:33:12.860

使用 GNU Parallel，您可以：

```
parallel mycmd ::: folderName/input*.txt 
```

来自： http: [//git.savannah.gnu.org/cgit/parallel.git/tree/README](http://git.savannah.gnu.org/cgit/parallel.git/tree/README)

= 完整安装 =

GNU Parallel 的完整安装非常简单：

```
./configure && make && make install 
```

如果您不是 root，您可以将 ~/bin 添加到您的路径并安装在 ~/bin 和 ~/share 中：

```
./configure --prefix=$HOME && make && make install 
```

或者，如果您的系统缺少“make”，您可以简单地将 src/parallel src/sem src/niceload src/sql 复制到路径中的目录。

= 最少安装 =

如果您只需要并行并且没有安装“make”（可能系统是旧的或 Microsoft Windows）：

```
wget http://git.savannah.gnu.org/cgit/parallel.git/plain/src/parallel
chmod 755 parallel
cp parallel sem
mv parallel sem dir-in-your-$PATH/bin/ 
```

观看介绍视频以进行快速介绍： [https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

# ruby-on-rails - Rails 3.2.4 SQL 查询在 find(:all) 上缓存结果

> ID：10858923
> 
> 赞同：2
> 
> 时间：2012-06-02T00:35:30.383
> 
> 标签：ruby-on-rails, caching, activerecord, scope, sqlite3-ruby

我不确定这个系统是否正在缓存数据，但它具有一些缓存的特性。

基本上我在使用 rails 3.2.4 并且系统开始不显示一些结果。我认为这是我放入代码模型的默认范围的露水，但即使如此，它也应该显示所有结果，而不是 10 个中的 9 个。但是我总是会丢失我创建的新记录以及我之后创建的任何其他记录那个记录。我检查我的 sqlite3 数据库以查看数据是否放置在其中，并检查所有连接信息以及确保缓存已关闭。但是，如果我更改任何模型文件或控制器文件然后保存它，我可以让数据显示出来。甚至不会更改代码，只需触摸命令即可。我认为这与范围有关，但我不能完全确定。我发现的一种解决方案就是回到 Rails 3.2.2。它似乎可以解决问题。

发展.rb

```
 # Show full error reports and disable caching
  config.consider_all_requests_local       = true
  config.action_controller.perform_caching = false 
```

房子.rb

```
class House < ActiveRecord::Base
  attr_accessible :name

  default_scope :order => 'created_at DESC', :limit => 50
  validates_presence_of :name
  has_many :roomies
end 
```

架构.rb

```
ActiveRecord::Schema.define(:version => 20120601204050) do
  create_table "houses", :force => true do |t|
    t.string   "name"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end
end 
```

房屋控制器.rb

```
class HousesController < ApplicationController
  def index
    @houses = House.all
  end

  def new
    @house = House.new
  end

  def show
    @house = House.find(params[:id])
  end

  def create
    @house = House.new(params[:house])

    if @house.save
      flash[:success] = "Your house has been created and is ready to have people added to it."
      redirect_to houses_path
    else
      flash[:error] = "Your house could not be added dew to a error!"
      render :action => :new
    end
  end
end 
```

房屋/index.html.erb

```
<%= debug @houses %> 
```

正如你所看到的，没有什么超级疯狂的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T02:18:19.713

Rails 3.2.4 对无意缓存对范围的调用进行了回归。请尝试使用 rails 3.2.5，其中包含[此提交](https://github.com/rails/rails/commit/7056079761eba049bbc6108946a1626fe169dbdf)

# javascript - 防止视频阵列循环

> ID：10858925
> 
> 赞同：0
> 
> 时间：2012-06-02T00:37:15.930
> 
> 标签：javascript, jquery, arrays, html, html5-video

这似乎是任何人都遇到过的相反问题。基本上，播放数组中的视频（html5），但对于我的生活，我似乎无法阻止它们自动循环播放。我试过让它播放下一个视频，只有当索引值小于数组长度时，

```
if(currentVideo < videos.length){
                playVideo( (currentVideo + 1) % videos.length );

            } 
```

但由于某种原因它仍在循环，它不应该......我在这里做错了什么？或者ii有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:42:16.193

尝试递增`currentVideo`.

```
if ( currentVideo < videos.length ) {
    playVideo( currentVideo++ );
} 
```

# python - 在 reStructuredText 中制作编号列表

> ID：10858927
> 
> 赞同：3
> 
> 时间：2012-06-02T00:37:38.137
> 
> 标签：python, python-sphinx, restructuredtext

如何在 reStructuredText 中创建一个编号列表，其中每个项目都是指向下面一些相应文本的链接？例如，用于“常见问题解答”页面，其中问题被列出并编号为超链接，每个问题的链接都指向页面下方的答案。例如：

```
1\. question 1 [links to #1 below]
2\. question 2 [links to #2 below]
3\. question 3 [links to #3 below]
4\. ...

#1 question 1:
the answer to question 1

#2 question 2:
the answer to question 2

#3 question 3:
the answer to question 3 
```

在 HTML 中，这可以用`hrefs`和`#`符号来完成，但我想知道等效的 reStructuredText 语法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T23:02:54.950

一个很好的例子是[Docutils 常见问题解答](http://docutils.sourceforge.net/FAQ.html)（reStructuredText 是与 Docutils 一起开发的，而 Sphinx 只是 Docutils 的扩展）。此处的常见问题解答仅由章节标题和[目录指令构成](http://docutils.sourceforge.net/docs/ref/rst/directives.html#table-of-contents)（请参阅 reStructuredText 源代码，页面底部的链接）。

你在评论中说你的页面上已经有一个目录，所以你想要的是第二个目录，它是常见问题部分的本地目录。这可以通过指令的`:local:`选项来完成`contents`。尝试以下示例以查看此本地目录的实际效果：

```
=======================================
Testing the inclusion of an FAQ section
=======================================

.. contents:: Table of Contents
   :depth: 1

Some uninteresting section
==========================

with some text...

FAQ
===

.. contents::
  :local:
  :backlinks: none
  :depth: 1

Question 1
----------

Lorem ipsum dolor sit amet...

Question 2
----------

Suspendisse tortor tellus...

Question 3
----------

Mauris in magna sed arcu semper auctor vitae eu risus...

Some other uninteresting section
================================

with some text... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T01:03:38.037

请参阅“重组文本列表”的第一个 Google 结果中的[枚举列表](http://docutils.sourceforge.net/docs/user/rst/quickref.html#enumerated-lists)和[内部超链接目标](http://docutils.sourceforge.net/docs/user/rst/quickref.html#internal-hyperlink-targets)。您可以像这样组合这些：

```
#. `question 1`_
#. `question 2`_

.. _question 1:
the answer to question 1 
```

对于每个评论的反向引用，您可以使用“[内联内部目标](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#inline-internal-targets)”，快速参考提到但只有完整参考实际描述。不幸的是，同一文本似乎不可能既是链接又是目标（即使语法在技术上允许这样做，它也会模棱两可），因此列表项中需要更多的文本而不仅仅是问题。您最好的方法可能是将每个问题链接回*列表*而不是特定列表项 - 例如，

```
.. _List of questions:
...

.. _question 1:
the answer to question 1
`List of questions`_ 
```

# python - 在使用 setup.py 构建/安装模块期间，如何指定或添加目录到 Python.h 搜索路径？

> ID：10858934
> 
> 赞同：9
> 
> 时间：2012-06-02T00:38:56.857
> 
> 标签：python, build, installation, include-path, setup.py

我正在运行 Linux，并且已经下载了一个我必须安装的 python 模块，除了我的特定 /home/user 目录之外，我不能访问任何其他目录（我没有 root 权限，也没有追求它们的选项）。

这当然需要 Python 源代码。我已经下载并放置在所述用户目录中。

虽然要求管理员将正确的文件复制到 /usr/include/python2.7 是解决此问题的最简单方法，但我希望为此类问题提供更通用和可移植的解决方案。

仅更改模块源中的数据（MANIFEST.in、README.txt、setup.py 等），如何将任意目录添加到 Python.h 和朋友的搜索路径？

（如果没有解决方案，“python setup.py build”将继续返回“Python.h：没有这样的文件或目录”错误）

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T06:28:58.683

为了构建已编译的包，您需要告诉配置步骤`setup.py`在不同的位置查找包含文件。我相信这可以这样做：

```
python setup.py config --with-includepath=/path/to/your/install/of/python/includes/ 
```

您可能还需要告知`setup.py`其他文件（例如库）的位置，在这种情况下，请查看：

```
python setup.py config --help 
```

并查看`--libraries`和`--library-dirs`选项。要更改生成的软件包的安装位置，请在构建后使用前缀选项，例如：

```
python setup.py install --prefix=/path/to/install/to/ 
```

尽管您需要的选项的确切组合可能取决于您正在安装的软件包。如果您需要经常这样做，我认为可以通过指定`setup.cfg`配置文件来完成，如此[处](http://docs.python.org/distutils/configfile.html)所述。

# backbone.js - 在 Backbone 的集合中销毁每个模型的最干净的方法？

> ID：10858935
> 
> 赞同：17
> 
> 时间：2012-06-02T00:39:13.277
> 
> 标签：backbone.js

在第一次尝试时，我写了

```
this.collection.each(function(element){
    element.destroy();
}); 
```

这不起作用，因为它类似于`ConcurrentModificationException`在 Java 中删除所有其他元素。

我尝试在模型上绑定“删除”事件以按照建议[一步销毁集合中的主干模型来销毁自己？](https://stackoverflow.com/questions/6280553/destroying-a-backbone-model-in-a-collection-in-one-step)，但是如果我对属于集合的模型调用destroy，这将触发2个删除请求。

我查看了下划线文档，看不到一个`each()`向后循环的变体，这将解决删除每个元素的问题。

作为销毁模型集合的最干净的方法，您会建议什么？

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-02T00:48:47.750

你也可以使用一个好的，老式的~~流行音乐~~就地销毁：

```
var model;

while (model = this.collection.first()) {
  model.destroy();
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-02-25T19:37:32.897

I recently ran into this problem as well. It looks like you resolved it, but I think a more detailed explanation might also be useful for others that are wondering exactly why this is occurring.

## So what's really happening?

Suppose we have a collection (library) of models (books).

For example:

```
console.log(library.models); // [object, object, object, object] 
```

Now, lets go through and delete all the books using your initial approach:

```
library.each(function(model) {
  model.destroy();
}); 
```

`each` is an underscore method that's [mixed into the Backbone collection](http://backbonejs.org/docs/backbone.html#section-121). It uses the collections reference to its models (`library.models`) as a default argument for these various underscore collection methods. Okay, sure. That sounds reasonable.

Now, when model calls `destroy`, it [triggers a "destroy" event on the collection](http://backbonejs.org/docs/backbone.html#section-120) as well, which will then [remove its reference to the model](http://backbonejs.org/docs/backbone.html#section-88). Inside `remove`, you'll notice this:

```
this.models.splice(index, 1); 
```

If you're not familiar with `splice`, see the [doc](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice). If you are, you can might see why this is problematic.

Just to demonstrate:

```
var list = [1,2];
list.splice(0,1); // list is now [2] 
```

This will then cause the `each` loop to skip elements because the its reference to the model objects via `models` is being modified dynamically!

Now, if you're using JavaScript < 1.6 then you may run into this error:

```
Uncaught TypeError: Cannot call method 'destroy' of undefined 
```

This is because in the underscore implementation of `each`, it falls back on its own implementation if the native `forEach` is missing. It complains if you delete an element mid-iteration because it still tries to access non-existent elements.

If the native `forEach` did exist, then it would be used instead and you would not get an error at all!

Why? According to the [doc](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach):

> If existing elements of the array are changed, or deleted, their value as passed to callback will be the value at the time forEach visits them; **elements that are deleted are not visited**.

So what's the solution?

Don't use `collection.each` if you're deleting models from the collection. Use a method that will allow you to work on a new array containing the references to the models. One way is to use the underscore [`clone` method](http://underscorejs.org/#clone).

```
_.each(_.clone(collection.models), function(model) {
  model.destroy();
}); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-07-18T00:46:21.770

我在这里有点晚了，但我认为这也是一个非常简洁的解决方案：

```
_.invoke(this.collection.toArray(), 'destroy'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-25T23:44:08.073

捎带肖恩安德森的答案。可以直接访问骨干集合数组，因此您可以这样做。

```
_.invoke(this.collection.models, 'destroy'); 
```

或者只是`reset()`在没有参数的情况下调用集合，该集合`destroy`中模型上的方法将被双向触发。

```
this.collection.reset(); 
```

[http://backbonejs.org/#Collection-models](http://backbonejs.org/#Collection-models)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T00:45:50.997

这行得通，有点惊讶我不能为此使用下划线。

```
for (var i = this.collection.length - 1; i >= 0; i--)
    this.collection.at(i).destroy(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-30T07:43:52.200

你不需要下划线和`for`循环。

```
this.collection.slice().forEach(element => element.destroy()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-29T06:30:03.597

我更喜欢这种方法，特别是如果您需要在每个模型上调用destroy，清除集合，而不是调用`DELETE`服务器。删除`id`或任何`idAttribute`设置是允许的。

```
var myCollection = new Backbone.Collection();
var models = myCollection.remove(myCollection.models);
_.each(models, function(model) {
  model.set('id', null); // hack to ensure no DELETE is sent to server
  model.destroy();
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://underscorejs.org/underscore-min.js"></script>
<script src="http://backbonejs.org/backbone-min.js"></script>
```

# c# - ASPX 空字符错误

> ID：10858936
> 
> 赞同：2
> 
> 时间：2012-06-02T00:39:25.743
> 
> 标签：c#, asp.net

我有一个要渲染的 .aspx 页面，但是当我去渲染字符时，我得到了奇怪的结果。

```
<%= default(char) %> 
```

在 FF 和 Chrome 中扩展为以下内容，但在 IE 中没有：

```
� 
```

如果它是空字符，有没有办法忽略该值？我试过`default(char).ToString()`了，但似乎有相同的结果。当有一个空字符时，我只想忽略它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T00:49:07.383

char 的默认值为 \0 或等效于 null 但实际上不是 System.Null 值，因此行为符合预期。

如果您想避免该测试：

```
<%= mychar != '\0' ? mychar : '' %> 
```

记住对字符使用单引号很重要。

我担心的是，要做到这一点还有很长的路要走。您实际上要在主代码中做什么？

编辑：为我的评论中解释的修复提供代码示例：

```
<%= myobj.charProp == '\0' ? "''" : myobj.charProp.ToString() %> 
```

# webserver - 为什么我的 vpshost 服务器可以看到我的 vpses 而我的其他机器看不到？

> ID：10858937
> 
> 赞同：1
> 
> 时间：2012-06-02T00:39:45.077
> 
> 标签：webserver, vps

我刚刚将 ubuntu server 12.04 安装到一台新机器上，在那台服务器上我有两个 VPS，每个都运行 ubuntu server 12.04。

除了运行它们的 vpshost 机器外，我似乎无法从网络上的任何其他机器上找到我的 vps。从 vpshost ping vps1：来自 192.168.122.94 的 64 个字节：icmp_req=2 ttl=64 time=0.027 ms

通过 winxp 从我的笔记本电脑 ping vps1： ping 192.168.122.94 与 32 字节数据：

```
Request timed out. 
```

当我尝试通过 firefox 浏览服务器时出现类似的错误（它们都在运行 apache）。连接已超时 192.168.122.139 的服务器响应时间过长。

作为教程的一部分，我确实创建了一座桥，是否有可能这座桥无法正常工作，因此不允许任何外部的东西看到它们？

网桥的样子： auto br0 iface br0 inet 静态地址 192.168.1.43 网络掩码 255.255.255.0 网络 192.168.1.0 广播 192.168.1.255 网关 192.168.1.1 bridge_ports eth0 bridge_fd 9 bridge_hello 2 bridge_maxage 12 bridge_stp off

# ios - segue：目标视图控制器的怪异

> ID：10858939
> 
> 赞同：7
> 
> 时间：2012-06-02T00:40:05.710
> 
> 标签：ios, ios5, uiviewcontroller, uistoryboardsegue

在我的应用程序中，我使用了故事板和转场，并且我经常在进行转场之前将数据传递给目标视图控制器，如下所示：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
{
    if ([segue.destinationViewController respondsToSelector:@selector(setMyData:)]) {
        [segue.destinationViewController performSelector:@selector(setMyData:) 
                                          withObject:myData];
    }
} 
```

除了在一个地方外，它在任何地方都有效。选择器被调用，数据被设置，但是当 segue 完成并且目标控制器出现时，它没有我刚刚设置的数据。在源视图控制器和目标视图控制器中打印视图控制器的 id 后，我发现`segue.destinationViewController`上面代码中的视图控制器实例与显示的实例不同。这里发生了什么？

**[更新 1]** 我查看了目标视图控制器的生命周期，它首先在 segue 执行期间被加载，但是在我设置属性之后！这意味着，当我调用`performSelector`它时，视图控制器对象没有被初始化！这就是我设置的数据不粘的原因。不明白为什么会这样，以及为什么同样的方法适用于我的应用程序的其他部分。

**[更新 2]**`setMyData`按要求 发布代码。起初我根本没有这个方法，因为`locationToOpen`是公共财产。我只是添加它以确保它被调用并打印调试信息。

```
- (void)setMyData:(MyData *)myData
{
    DLog(@"self: %@", (id)self);
    _myData = myData;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T12:31:24.083

我会这样做 -

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
{
    if ([segue.identifier isEqualToString:@"NextSegue"]) 
    {
        DestinationViewController *dest = [segue destinationViewController];

        dest.myData = self.myData; 
    }
} 
```

在 DestinationViewController.h 中，您应该创建一个属性 -

```
#import <UIKit/UIKit.h>

@interface DestinationViewController : UIViewController

@property (nonatomic, strong) NSObject *myData;

@end 
```

此外，确保在 DestinationViewController.m 中合成 myData 属性 -

```
@interface DestinationViewController ()

@end

@implementation DestinationViewController

@synthesize myData = _myData;

// other methods here

@end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-15T12:45:28.660

我有同样的问题。对我来说，我在 prepareForSegue: 代码中设置的目标 ViewController 属性被声明为弱，因为我复制并粘贴了 InterfaceBuilder 自动创建的属性，但我的不是 Storyboard 对象。所以我的财产在从 prepareForSegue: 退出时被 ARC 释放和归零。使其成为非弱属性修复了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T17:42:35.443

我有一个类似的问题，我正在做segue的ViewController在某个奇怪的地方发生了变化，在环顾四周之后，似乎segue创建了一个新的ViewController。

为了解决数据传递问题，我使用了通知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-19T17:04:13.520

我知道这个线程很旧，应该找到解决方案。但由于最终解决方案未在此处发布，因此我想列出一个可能的根本原因（这就是我的情况）。我有同样的问题，试图在 segue 的目标视图控制器中设置变量。根本原因是我忘记实例化（[[Class alloc]init]）对象变量。在我的情况下我需要它，因为我正在设置对象的属性而不是指向其他对象。希望这有帮助。

# css - firebug 不显示浏览器特定的 css 声明。

> ID：10858943
> 
> 赞同：0
> 
> 时间：2012-06-02T00:40:27.180
> 
> 标签：css, internet-explorer, firefox, google-chrome, firebug

> **可能重复：**
> [Firebug 杀死 CSS 文件中的 -webkit 设置 - 为什么？](https://stackoverflow.com/questions/2808146/firebug-kills-webkit-settings-in-css-file-why)

firebug 在 Firefox 中向我展示：

```
.boxShadow {
  box-shadow: 3px 3px 5px #000;
} 
```

原始CSS声明：

```
.boxShadow {
  -webkit-box-shadow: 3px 3px 5px #000;
  -moz-box-shadow: 3px 3px 5px #000;
  box-shadow: 3px 3px 5px #000;
} 
```

如何在 firebug 中显示所选元素的浏览器特定 css 声明？

Chrome Inspector 做得对。

# 萤火虫

![火狐](../Images/eebea4ad65417276b0da74a94bc994ce.png "火狐")

# 铬检查器

![象牙](../Images/bf3d301b44361e15a975fc9c64f8a8e3.png "象牙")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T01:45:42.857

渲染引擎无法处理这些规则，因此它们被丢弃，就像任何其他无效规则一样。即使它们是可访问的，它们也不会对元素的渲染做出贡献，并且您将无法确认它们的有效性或计算值。

# php - else 语句不向 textarea 添加内容

> ID：10858945
> 
> 赞同：0
> 
> 时间：2012-06-02T00:40:46.170
> 
> 标签：php, javascript, jquery

我在下面有一个函数，当单击“添加”按钮时将内容添加到单个文本区域时，if 语句起作用：

```
function addwindow(questionText) { 

    if(window.console) console.log();

    if($(plusbutton_clicked).attr('id')=='mainPlusbutton') { 
        $('#mainTextarea').val(questionText); 
        } else { 
            $(plusbutton_clicked).parent('td').next('td.question').find('textarea.textAreaQuestion').val(questionText);
            }

    $.modal.close(); 
    return false;
} 
```

问题是在附加文本区域之一中添加内容时，else 语句不起作用。我想要的是，如果用户单击加号按钮并通过单击“添加”按钮添加内容，则与单击的加号按钮位于同一行的文本区域将添加内容。为了做到这一点，我需要改变什么？

下面是显示附加的文本区域和加号按钮的代码：

```
 var plusbutton_clicked;

 function insertQuestion(form) {

var $tbody = $('#qandatbl > tbody'); 
var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
var $plusrow = $("<td class='plusrow'></td>");
var $question = $("<td class='question'></td>");

 $('.questionTextArea').each( function() {

 var $this = $(this);
var $questionText = $("<textarea class='textAreaQuestion'></textarea>").attr('name',$this.attr('name')+"[]")
.attr('value',$this.val());

 $question.append($questionText);

});

 $('.plusimage').each( function() {

var $this = $(this);
var $plusimagerow = $("<a onclick='return plusbutton();'><img src='Images/plussign.jpg' width='30' height='30' alt='Look Up Previous Question' class='imageplus'/></a>").attr('name',$this.attr('name')+"[]")
.attr('value',$this.val());

$plusrow.append($plusimagerow);

 });

$tr.append($plusrow);
$tr.append($question);
$tbody.append($tr);                     

} 
```

下面是 php 代码，其中显示了每一行的“QuestionContent”和“Add”按钮。当用户单击“添加”按钮时，它会将“问题内容”添加到顶部的单个文本区域中，但不会添加到附加的多个文本区域中。

```
 <?php

    $output = "";

            while ($questionrow = mysql_fetch_assoc($questionresult)) {
    $output .= "
    <table>
          <tr>
          <td class='addtd'><button type='button' class='add' onclick='parent.addwindow();'>Add</button></td>
          </tr>";
            }
            $output .= "        </table>";

            echo $output;

            ?> 
```

你可以[在这里](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)查看申请。请按照以下步骤使用该应用程序：

1.  单击“添加问题”按钮，然后将在新行中添加一个文本区域。
2.  单击刚刚添加的表格行中的“绿色加号”按钮，将出现一个模式窗口。
3.  在模态窗口中显示一个搜索栏，在搜索栏中输入“AAA”并单击“搜索”按钮
4.  搜索结果将出现，单击“添加”按钮添加一行。您会发现模态窗口已关闭，但“问题”字段中的内容未添加到您单击绿色加号按钮的行内的文本区域中

如果您在顶部 textarea （水平线上方的那个）中执行了这些步骤，那么它确实有效，但它不适用于您刚刚添加的 textarea

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:27:02.023

您的错误之一：

```
$('.plusimage').live('click', function() {
    plusbutton($(this));
}); 
```

您在页面中使用 jQuery 1.7，该`.live`方法自 jQuery 以来已被弃用`1.7`。你应该`.on`改用。

您还在`plusbutton`生成的链接中触发了您的功能：

```
<a value="" name="plusbuttonrow[]" onclick="return plusbutton();"> 
```

没有将任何元素作为参数传递给您的`plusbutton`函数将存储在您`plusbutton_clicked`期望的全局变量中。那时没有对单击的元素的引用，因此当您在函数中使用`plusbutton_clicked`var时，它不会找到任何元素。`addwindow`

保留`.on`方法或`onclick`上面的调用以防止函数被触发两次。

可能还有其他错误（例如，您正在检查动态生成的元素不存在的 id 属性），但这是主要错误。另外，我想知道您是否没有任何截止日期来完成此问题，这是我在过去 3 周内第 10 次看到此问题.. 至少您取得了一些进展，恭喜。

# c# - 如何将 xml doc 编码为 base64 二进制对象

> ID：10858955
> 
> 赞同：0
> 
> 时间：2012-06-02T00:42:56.040
> 
> 标签：c#, encoding, xml-rpc, binary-data

我正在尝试调用一个 xml-rpc Web 服务方法，该方法采用 1 个参数（值数组）键和引导。

键必须命名为“键”并且必须具有字符串类型的值。Leads 是一个包含潜在客户数据的 xml 文档。这必须打包为二进制对象。此值必须命名为潜在客户，并且必须是 base64 类型。

好的，所以在 python 中这个方法调用的 SINGLE 参数是：

```
 r = proxy.leads({'key': key, 'leads': doc}) 
```

我的第一个问题是如何在 c# 中做到这一点？.net 最接近的东西是一个字典对象，它不会为此工作。

其次，如何使 xml 文档成为 base64 类型的二进制对象？这与将 byte[] 数组转换为 base64 字符串相同吗？像这样：

```
 Convert.ToBase64String(byteArray) 
```

以下是请求的外观：

```
 <?xml version="1.0" encoding="iso-8859-1"?>
 <methodCall>
 <methodName>leads</methodName>
 <params>
 <param>
 <value>
 <struct>
  <member>
  <name>key</name>
 <value>
 <string>XXXXXXXXXXX</string>
 </value>
 </member>
 <member>
 <name>leads</name>
 <value>
 <base64>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGxlYWRzPgogICA8bGVhZD4K
      ICAgICAgPGlkPjM5OTk3PC9pZD4KICAgICAgPEZpcnN0TmFtZT5Cb2IgSmltPC9GaXJzdE5hbWU+
      CiAgICAgIDxMYXN0TmFtZT5TbWl0aDwvTGFzdE5hbWU+CiAgICAgIDxBZGRyZXNzPjEyMzQgV2Vz
      :
      :
      ICAgICA8UmVjZWl2ZUFkZGxJbmZvPlllczwvUmVjZWl2ZUFkZGxJbmZvPgogICAgICA8bG9wX3dj
      X3N0YXR1cz5ObzwvbG9wX3djX3N0YXR1cz4KICAgPC9sZWFkPgo8L2xlYWRzPg==
 </base64>
 </value>
 </member>
 </struct>
 </value>
 </param>
 </params>
 </methodCall> 
```

我完全被这个问题困住了。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:19:14.263

查看[http://codinghints.blogspot.com/2010/03/xml-rpc-calls-with-c.html](http://codinghints.blogspot.com/2010/03/xml-rpc-calls-with-c.html)了解如何手动调用该服务。可能有图书馆可以很好地做到这一点......

您如何指定参数取决于您找到构建请求的方法。如果手动构建请求（我建议 XDocument 构建 XML，而不是 String.Format，但 String.Format 在像您的示例这样非常简单的情况下可能没问题），您只需将值放在样板 XML 中的正确位置...

是的，base64 的字节数组是`Convert.ToBase64String(byteArray)`.

以下内容可能就足够了（但请尝试使用正确的方法为非一次性代码构造 XML）：

```
String.Format("<?xml versi... <name>key</name><value><string>{0}</string>...", 
      key, Convert.ToBase64String(byteArray)); 
```

# ios - 网站不会在 iOS 版 Facebook 应用程序中打开，也不会重定向到 Safari

> ID：10858957
> 
> 赞同：1
> 
> 时间：2012-06-02T00:43:27.930
> 
> 标签：ios, facebook, html, uiwebview, safari

我在这里不是一个沉重的编码员，所以我会尽力而为。

我们制作了一本关于我们家乡的小册子。然而，通过 facebook 传播它的用户在他们的 facebook 应用程序中无法打开链接。该应用程序也不会将其发送到 Safari。如果直接从 safari 打开是没有问题的。

链接是[http://visit.lodingen360.com](http://visit.lodingen360.com)

当在 ios 的 facebook 应用程序中单击链接时，我可以对 site/index.html/whatever 做些什么让它在 safari 中打开？（不会影响从电脑等访问网站）

是否有任何 uiwebview 无法读取的内容可以强制它进入 safari，以便我们可以从 safari 中打开的内容重定向到该站点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:37:34.290

您的页面将在 Mobile Safari 中加载和显示，我尝试使用 UIWebView，它会加载而不会显示错误，但不会显示小册子页面内容。

Safari 和 UIWebView 有不同的用户代理 - 因此我的猜测是，因为您的网站使用 flash 但它检查浏览器的类型，您没有正确执行 UIWebView 的检查，并且页面正在尝试使用不受支持的 flash。

# c# - 使用多线程从 SQL Server 中的单个表中读取

> ID：10858958
> 
> 赞同：-1
> 
> 时间：2012-06-02T00:43:28.873
> 
> 标签：c#, sql-server

使用多线程处理从 SQL Server 中的单个表读取的最佳方法，并确保不会使用 c# 在不同线程中读取相同的记录两次

提前谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T00:54:29.227

您是在尝试从表中并行读取记录以加快检索数据的速度，还是只是担心线程访问相同数据时数据损坏？

像 MsSQL 这样的数据库管理系统可以非常好地处理并发性，因此如果您有多个线程读取同一个表，则在这方面的线程安全不是您必须在代码中关注的事情。

如果您想在没有任何重叠的情况下并行读取数据，您可以运行带有分页的 SQL 命令，并让每个线程获取不同的页面。您可以说 20 个线程同时读取 20 个不同的页面，并且可以保证它们不会读取相同的行。然后你可以连接数据。页面越大，您从创建线程中获得的性能提升就越大。

[实现分页的有效方法](https://stackoverflow.com/questions/548475/efficient-way-to-implement-paging)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T03:12:18.927

**解决方案 1：**
我假设您正在尝试从大表中处理或提取数据。如果我被分配了这个任务，我会首先查看 paging 。如果您试图在线程之间分配工作，那就是。所以线程 1 处理页面 0 到 10，线程 2 处理页面 11 到 20，等等……或者您可以使用实际的行号对行进行批处理。所以在你的存储过程中你会这样做；

```
WITH result_set AS (
  SELECT
    ROW_NUMBER() OVER (ORDER BY <ordering>) AS [row_number],
    x, y, z
  FROM
    table
  WHERE
    <search-clauses>
) SELECT
  *
FROM
  result_set
WHERE
  [row_number] BETWEEN @IN_Thread_Row_Start AND @IN_Thread_Row_End; 
```

另一个更有效的选择是，如果您有一个自然键或一个非常好的代理项，则使用该键进行分页并让线程传递键参数而不是它感兴趣的记录（或页码）。

对此解决方案的直接担忧是：

1.  ROW_NUMBER 次效果
2.  CTE 性能（我相信它们存储在内存中）

因此，如果这是我要解决的问题，我会通过键查看分页。

**解决方案 2：**
第二种解决方案是在处理行时对其进行标记，虚拟锁定它们，即如果您具有数据写入权限。因此，您的表将有一个名为 Processed 或 Locked 的字段，因为您的线程选择了行，它们被更新为 Locked = 1;

然后您从其他线程中选择仅选择未锁定的行。当您的过程完成并处理所有行时，您可以重置锁。

很难说什么会在一些试验中表现最好...... GL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T00:54:36.467

假设依赖于 SQL Server，您可能会查看 SQL Server Service Broker 功能来为您提供排队。需要记住的一件事是，目前 SQL Server 服务代理在 SQL Azure 上不可用，因此如果您计划迁移到 Azure 云上，这可能是个问题。

无论如何 - 使用 SQL Server Service Broker，并发访问是在数据库引擎层进行管理的。另一种方法是让一个线程读取数据库，然后以消息作为输入来调度线程。这比尝试使用数据库中的事务来确保消息不会被读取两次要容易一些。

就像我说的那样，SQL Server Service Broker 可能是要走的路。或者适当的外部排队机制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-21T21:01:56.883

这个问题非常古老，但仍然非常相关，我花了很多时间来寻找这个解决方案，所以我想把它发布给其他遇到这个问题的人。这在使用 sql 表作为队列而不是 msmq 时很常见。

解决方案（经过大量调查）很简单，可以通过在 ssms 中打开 2 个选项卡进行测试，每个选项卡运行自己的事务以模拟多个进程/线程访问同一个表。

快速回答是这样的：关键是在您的选择上使用 updlock 和 readpast 提示。

为了说明没有重复的读取工作，请查看这个简单的示例。

--在 ssms 中的选项卡 1

```
begin tran
SELECT TOP 1 ordno FROM table_queue WITH (updlock, readpast) 
```

--在 ssms 中的选项卡 2

```
begin tran
SELECT TOP 1 ordno FROM table_queue WITH (updlock, readpast) 
```

您会注意到第一个选定的记录被锁定，并且不会被第二个选项卡/进程上的 select 语句复制。

现在在现实世界中，您不会像上面的简单示例那样只在表上执行选择。如果您将表用作队列，您可以将记录更新为“isprocessing=1”或类似的东西。上面的代码只是演示了这允许并发读取而不重复。

因此，在现实世界中（例如，如果您将表用作队列并使用多个服务处理此队列），您很可能会在子查询中执行 select 以更新语句。

像这样的东西。

```
begin tran
    update table_queue set processing= 1 where myId in
    (
        SELECT TOP 50  myId FROM table_queue WITH (updlock, readpast)
    )

commit tran 
```

您还可以将 yoru update 语句与 output 关键字结合起来，这样您就可以得到一个现在锁定的所有 id 的列表（处理 = 1），以便您可以使用它们。

如果您使用表作为队列处理数据，这将确保您不会在选择语句中重复记录，而无需分页或其他任何东西。

这个解决方案正在一个企业级应用程序中进行测试，当我们被运行在许多不同机器上的许多服务监视时，我们的选择语句中出现了很多重复。

# c++ - G++ 如何找到我没有的标头？

> ID：10858961
> 
> 赞同：0
> 
> 时间：2012-06-02T00:45:14.000
> 
> 标签：c++, header, g++, codeblocks

我是 C++ 新手，并试图了解它是如何查找标头的。最初我只是想找出哪些类可供我包含在我的源代码中。我相信不同的编译器会使用不同的包含目录，因此类的可用性会有所不同。我的计划是找到编译器正在使用的“包含”目录，并假设我可以在其中包含任何内容。所以我只是在我去的时候变得更加困惑。

首先，我在 Windows 7 上的 Code::Blocks 中编写 C++ 代码。IDE 设置为使用 GNU GCC 进行编译，我了解到这意味着它使用 G++ 编译器来编译 C++ 代码。我在这里找到了我的编译器：C:\MinGW\bin\mingw32-g++.exe，Code::Blocks 设置指向那个。

所以我假设 G++ 必须递归地使用 C:\MinGW\include 来查找它的所有头文件。为了测试我的理论，我搜索了“iostream.h”。令我惊讶的是，我的 C 盘上什至没有“iostream.h”。尽管如此，当我包含它时，我的代码仍然可以编译和工作。

所以我的问题：

1.  当我的硬盘驱动器甚至没有 iostream 标头时，G++ 如何找到它？

2.  所有 C++ 编译器都可以使用所有标准 C++ 头文件（如下所列：http: [//msdn.microsoft.com/en-us/library/ct1as7hw.aspx ）吗？](http://msdn.microsoft.com/en-us/library/ct1as7hw.aspx)具有相同的确切名称，所以我不必更改我的源代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T01:03:29.740

关于第二个问题，该标准不要求标头可作为文件使用。它要求`#include`指令出现在程序中，并且编译器的行为就像标准所需的声明出现在程序中一样。但是编译器可以自由地以它认为合适的任何方式注入声明。

话虽如此，g++ 确实有文件备份每个标题。在不知道您的特定配置的情况下，我无法告诉您标头的位置，但您可以在预处理器*之后*停止编译过程并检查输出：

```
$ cat test.cpp
#include <iostream>
int main() {
   std::cout << "Hi\n";
}
$ g++ -E test.cpp | head -10
# 1 "test.cpp"
# 1 "<built-in>"
# 1 "<command-line>"
# 1 "test.cpp"
# 1 "/usr/include/c++/4.2.1/iostream" 1 3
# 42 "/usr/include/c++/4.2.1/iostream" 3

# 43 "/usr/include/c++/4.2.1/iostream" 3 
```

上面的路径是在 MacOSX Lion 上，它表明在这个特定的配置`iostream`中包含来自`/usr/include/c++/4.2.1/iostream`. 在 windows`head`中可能不可用，但您可以将输出重定向到文件并从那里读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T00:52:16.753

1.  使用引号将在移动到使用尖括号搜索的目录之前搜索当前目录。除了 中列出的文件之外，还有其他目录`\include`。在那里你会找到那些没有任何扩展名的。您可能`c++`在其中有一个包含这些文件的文件夹，但即使使用 Windows 7 搜索从 CodeBlocks 目录中搜索它们也会显示它们所在的位置。

2.  是的，它们都应该可以使用相同的名称访问，使用尖括号包含来访问它们。当然，总有一些可能会丢失的可能性很小。如果是这种情况，乍一看，这种实现似乎非常不可靠。今天所有主要的编译器都应该坚持这一点。

要在类中使用您自己的头文件，它们应该与主 cpp 文件位于同一目录中，并且您应该使用引号包含。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T01:13:34.723

1) 找不到 iostream.h 的原因是没有这样的头文件，它是`iostream`用标准 C++ 拼写的。如果你尝试`#include <iostream.h>`它会失败，所以它不会找到你没有的标题:)

如果您运行`g++ -v test.cpp`，它将显示编译时用于查找标头的所有路径`test.cpp`

2）是的，如果它们丢失或根据您的编译器具有不同的名称，它们将不是*标准头文件！*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T00:57:38.753

答案 1：我使用 Code::Blocks 的时间很短，但我记得在 Dev-C++ 和 MSVC++ 中，头文件位于 IDE 的目录中。（例如，我的 MSVC++ 包含目录在 C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include 中，它有 iostream 文件。）

答案 2：最常见的头文件在最常见的 IDE/编译器集中。

提示：您不是说“iostream”而不是“iostream.h”吗？

# ios - 在 iOS 中访问外部 SQL 数据库

> ID：10858965
> 
> 赞同：1
> 
> 时间：2012-06-02T00:47:23.210
> 
> 标签：ios, sql-server, xcode4, database-connection

我正在编写一个需要从外部 SQL Server 2005 数据库访问数据的 iOS 应用程序。我已经有一个访问相同数据的网站。

出于安全原因，我通常使用 .NET 和存储过程访问 SQL Server 数据库。我需要填充一个本身会填充另一个的数组`TableViewController`。由于我对整个 iOS 还很陌生，请让我知道如何做到这一点。如果可能，请为此建议语法或 Google 关键字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T00:49:29.637

我建议制作一个简单的 WCF .NET REST 服务来查询您的数据库并返回您需要的内容。

我很确定您的 iOS 应用程序将无法直接连接到它。

查看以下内容； [http://msdn.microsoft.com/en-us/library/bb412178.aspx](http://msdn.microsoft.com/en-us/library/bb412178.aspx)

[http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide](http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide)

代码项目教程非常容易上手。您可以下载项目代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T00:48:51.197

听起来您会想要创建一个 API 来访问您的数据库，并且您可以通过 Web 请求访问它。本质上，您将执行 Web 请求并以 json 或 xml 从您的站点响应，在您的 iOS 客户端代码中，您可以解析它并使用它做您需要的事情。

# php - 如何跟踪 MySQL 表中刚刚删除的行？

> ID：10858967
> 
> 赞同：2
> 
> 时间：2012-06-02T00:47:43.053
> 
> 标签：php, mysql

我在删除时级联的 MySQL 表上设置了外键约束。当我删除用户时，我需要跟踪所有其他受影响的表和行，因为涉及的物理文件也必须删除。有没有办法记录这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T01:01:06.600

好吧，通过在您想要跟踪的每个表上添加一个触发器，您可以轻松地：

*   提供审计表
*   运行后台作业以删除相应的文件

就像米奇说的，这也取决于你，你到底想做什么。

例如，您可能还希望保留这些行以用于历史记录。在这种情况下，您可以通过在表中使用“已删除”标志来实现自己的行“抑制”，因此只要您想删除一行，就可以将其设置为 1。[...]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T00:55:00.243

我想不是。但是你可以做一个小技巧。例如，在删除表 A 中的一条记录之前，选择其他表中与已删除记录相关的所有记录。

```
 $sql = "SELECT Id FROM b WHERE b.a_id ='$deleted_A_Id'";
   //delete physical file and any other things
   $sql = "DELETE FROM A where A.id = '$deleted_A_Id'";
   //just exec sql the normal way 
```

# c++ - 在 C++ 中使用数组创建哈希表表示

> ID：10858968
> 
> 赞同：1
> 
> 时间：2012-06-02T00:47:46.637
> 
> 标签：c++, arrays, hash, chaining

如何使用 C++ 中的数组为表制作哈希表表示并对其应用哈希函数`k % 10`？我将使用链接来解决冲突（即表是一个链表数组）。

我还要在该表中插入、搜索和删除值。

到目前为止，我有：

```
struct Node {
    int value;
    Node* next;
}; 

void insert(int n, Node* hashtable[]) {

    int x = n % 10;
... ... 
```

例如对于 value `10`，我的哈希函数会产生`0`，所以`10`进入数组/哈希表的第一个槽。
然后，如果我有 value `100`，`100`也会去第一个插槽，所以我`10`会“指向” `100`......我将如何编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T01:04:38.063

就像是

```
Node* oldFront = hashtable[hashcode];
Node* newNode = new Node(value, oldFront);
hashtable[hashcode] = newNode; 
```

这会将最近的碰撞添加到链表的前面，即它作为堆栈运行。将其添加到后面作为提问者的练习！

# css - 如何创建像 Apple.com 这样的 div 阴影？

> ID：10858980
> 
> 赞同：4
> 
> 时间：2012-06-02T00:51:06.657
> 
> 标签：css

我有两个关于创建阴影的问题，例如[www.apple.com/ipodshuffle](http://www.apple.com/ipodshuffle) ...

1.  在网站上，您会看到白色背景的主要部分 - 它包含有关 iPod Shuffle 的所有信息。这个主要部分的左右和底部都有阴影，但顶部没有。我该如何编码？

2.  就在 iPod Shuffle 的第二张图片上方（它们都堆叠在一起，文字写着“设计。既美观又可穿戴。”）有一个阴影边框，看起来像是从里面弹出来的页面，然后淡入页面。我该如何编码？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-02T00:55:21.627

这是您要搜索的代码：

```
.box{
  padding: 20px;
  border-radius: 5px;

  -webkit-box-shadow: rgba(0, 0, 0, 0.3) 0 1px 3px;
  -moz-box-shadow: rgba(0,0,0,0.3) 0 1px 3px;
  box-shadow: rgba(0, 0, 0, 0.3) 0 1px 3px;
}
```

```
<div class="box">
  Lorem ipsum
</div>
```

有关`box-shadow`此处的更多信息：[http ://www.css3.info/preview/box-shadow/](http://www.css3.info/preview/box-shadow/)

对于中央阴影，他们只使用了图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-13T11:07:36.893

```
.box {
        width: 200px;
        height: 100px;
        margin: auto;
        padding: 20px;
        border-radius: 5px;

        background-color: #e4e4e4;
        border: 1px solid #adadad;
        -webkit-box-shadow: 0 20px 70px rgba(0, 0, 0, 0.55);
        -moz-box-shadow: 0 20px 70px rgba(0, 0, 0, 0.55);
        box-shadow: 0 20px 70px rgba(0, 0, 0, 0.55);
    }
```

```
<div class="box">
        Lorem ipsum
    </div>
```

# c# - 通过代码创建 web.config

> ID：10858983
> 
> 赞同：-4
> 
> 时间：2012-06-02T00:52:00.007
> 
> 标签：c#, asp.net, asp.net-mvc-3

我正在创建一个社交网站，并希望用户能够上传视频和照片以进行分享。上传的文件将存储在个人目录中，只有用户和他/她的朋友可以访问。

为了限制访问，我正在考虑为每次上传创建一个 web.config 文件。到目前为止，我还没有找到通过代码创建和更新 web.config 文件的方法（例如，当用户接受好友请求时，必须将新好友添加到 web.config 文件中）。

有人对我如何通过代码创建 web.config 文件有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T00:59:53.970

您可能不想以这种方式处理用户上传的内容。有几个原因：

1.  允许用户上传物理存储在应用程序目录中的内容可能会使您面临重大安全风险。
2.  每次更新 Web.config 时，应用程序池都会循环使用，从而使您的应用程序无法使用。
3.  随着您的社交网络扩展，您需要在多个服务器之间分配负载，此时将数据存储在本地服务器上而不是某种集中式或分布式缓存将是不可行的。

我建议您为用户提供上传内容的工具，然后将该内容存储在某种 blob 存储机制中（数据库、云服务提供商都有这些）。从那里，您可以在请求特定 URL 时通过应用程序代码将数据汇集回来，或者，如果您的 Blob 存储提供程序支持访问控制，您可以生成一个允许从 Blob 存储直接下载的密钥。这样做的好处是您通常可以轻按一个开关并启用流行内容 CDN。

祝你的社交网络好运！

# properties - Groovy 属性断言失败

> ID：10858985
> 
> 赞同：1
> 
> 时间：2012-06-02T00:52:21.637
> 
> 标签：properties, groovy, assert

这是我的 groovy 文件的内容：

```
def KEY = "a"

Properties myProp = new Properties()
myProp[KEY] = "b"
assert(myProp[KEY] == myProp.getProperty(KEY))

Properties results = new Properties(myProp)
assert(results[KEY] == results.getProperty(KEY)) 
```

我希望两个断言都能通过，但只有第一个断言通过，第二个断言失败。

对此的任何解释都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:05:52.600

因此，当文档说“创建一个空的属性列表”时，它就是这样做的：

```
println(results)
>>> [:] 
```

看看有什么`getProperty`作用：

> 在此属性列表中搜索具有指定键的属性。如果在该属性列表中未找到该键，则递归地检查默认属性列表及其默认值。如果未找到该属性，则该方法返回 null。

得出的结论是`[]`( `getAt`) 不*搜索*默认属性列表。

我们可以通过这个来看看 Groovy 是如何实现的`getAt`：

```
public static <K,V> V getAt(Map<K,V> self, K key) {
    return self.get(key);
} 
```

所以它正在调用底层`Hashtable`的`get`方法，它对默认属性列表一无所知——默认值是 的一部分`Properties`，而不是`Hashtable`：

```
println(results.getProperty(KEY))
>>> b
println(results.getAt("a"))
>>> null
println(results.get("a"))
>>> null 
```

这是“正确”的行为吗？可能不会——也许 a是合适的`Properties.getAt`。

# meteor - Meteor 中会话变量的零星行为

> ID：10858989
> 
> 赞同：2
> 
> 时间：2012-06-02T00:54:01.103
> 
> 标签：meteor

我一直在摸索为什么这段代码在某些时候会起作用，但不是全部（或至少在大多数情况下）。我发现它确实有时会在浏览器中显示正确的内容，但奇怪的是，有几天我会回到相同的代码，运行服务器（正常）并加载页面将在控制台中收到错误：`TypeError: 'undefined' is not an object (evaluating 'Session.get('x').html')`

（当我收到该错误时，有时控制台中的下一行会读取`Error`- 引用`err`对象，而其他时候会读取`Object`- 引用`data`对象！？）。

我显然在 Meteor 中遗漏了一些关于 Session 变量的东西，并且一定是在滥用它们？我希望有经验的人能指出我正确的方向。

谢谢，提前提供任何帮助！

这是我的虚拟代码：

```
/client/del.html
<head>
  <title>del</title>
</head>

<body>
  {{> hello}}
</body>

<template name="hello">
  Hello World!
  <div class="helloButton">{{{greeting}}}</div>
</template> 
```

我的客户端 javascript 文件是：

```
/client/del.js
Meteor.call('foo', 300, function(err, data) {
  err ? console.log(err) : console.log(data);
  Session.set('x', data);
});

Template.hello.events = {
  'click div.helloButton' : function(evt) {
    if ( Session.get('x').answer.toString() === evt.target.innerHTML ) {
      console.log('yay!');
    }
  } 
};

Template.hello.greeting = function() {
  return Session.get('x').html;
}; 
```

我的服务器端 javascript 是：

```
/server/svr.js
Meteor.methods({

  doubled: function(num) {
    return num * 2;
  },

  foo: function(lmt) {
    var count = lmt,
        result = {};

    for ( var i = 0; i < lmt; i++ ) {
        count++;
    }

    count = Meteor.call('doubled', count);

    result.html = "<em>" + count + "</em>";
    result.answer = count;
    return result;

  }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:34:00.030

我认为只是客户端首次启动时尚未设置会话变量。所以`Session.get('x')`会返回`undefined`，直到你的方法调用（`foo`）返回，这几乎肯定不会在模板第一次绘制之前发生。

然而，在那之后它将在会话中，所以一旦你刷新，事情可能会正常运行。

答案是`undefined`在尝试访问变量之前检查它是否是。例如：

```
Template.hello.greeting = function() {
  if (Session.get('x')) return Session.get('x').html;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T23:03:34.000

Meteor的[七大原则之一是：](http://docs.meteor.com/#sevenprinciples)

> *延迟补偿*。在客户端上，使用预取和模型模拟使其看起来像与数据库的零延迟连接。

由于存在延迟，您的客户端将首先尝试根据客户端连接时的数据绘制布局。然后它将进行调用，然后根据调用进行更新。有时，呼叫可能能够足够快地响应以同时被绘制。

由于现在有可能不设置变量，它会在那种情况下抛出异常并因此中断执行（因为调用堆栈中的函数将不会继续运行）。

对此有两种可能的解决方案：

1.  使用时检查变量是否已设置。

    `return Session.get('x') ? Session.get('x').html : '';`

2.  通过在脚本顶部设置变量来确保变量具有初始值。

    `Session.set('x', { html = '', answer = ''});`

另一种方法是在呼叫响应后添加模板。

```
Meteor.call('foo', 300, function(err, data) {
    Session.set('x', data);
    $('#page').html(Meteor.ui.render(function() {
        return Template.someName();
    }));
}); 
```

# java - 为什么使用 JUnit 进行测试？

> ID：10858990
> 
> 赞同：132
> 
> 时间：2012-06-02T00:54:05.900
> 
> 标签：junit, java, unit-testing, junit, tdd

也许我的问题是一个新手，但我不能真正理解在什么情况下我会使用[junit](/questions/tagged/junit "显示标记为“junit”的问题")？

无论我是编写简单的应用程序还是更大的应用程序，我都会使用`System.out`语句对其进行测试，这对我来说很容易。

为什么要使用 JUnit 创建测试类，如果我们仍然必须调用相同的方法，在项目中创建不必要的文件夹，检查它们返回的内容，然后我们有注释所有内容的开销？

为什么不编写一个类并使用`System.out`但不创建测试类立即对其进行测试？

PS。我从未参与过我刚刚学习的大型项目。

那么目的是什么？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-06-02T00:56:35.343

那不是测试，那是“手动查看输出”（在商业中称为 LMAO）。更正式地说，它被称为“手动查找异常输出”（LMFAO）。^(（见下面的注释）)

每次更改代码时，都必须为受这些更改影响的所有代码运行应用程序和 LMFAO。即使在小型项目中，这也是有问题且容易出错的。

现在，只要您更改代码，就可以扩展到 50k、250k、1m LOC 或更多，以及 LMFAO。这不仅令人不快，而且是不可能的：你已经扩大了输入、输出、标志、条件的组合，而且很难运用所有可能的分支。

更糟糕的是，LMFAO 可能意味着访问网页应用程序的页面、运行报告、在数十个文件和机器上仔细研究数百万条日志行、阅读生成和发送的电子邮件、检查短信、检查机器人的路径、填充一瓶苏打水，从一百个网络服务聚合数据，检查金融交易的审计线索......你明白了。“输出”并不意味着几行文本，“输出”意味着聚合系统行为。

![](../Images/7293d19f06498b232bb17b8f6d4a96ca.png)

最后，单元和行为测试*定义*系统行为。测试可以由持续集成服务器运行并检查正确性。当然，`System.out`s 也可以，但是 CI 服务器不会知道其中一个是否错误——如果是，它们是单元测试，您不妨使用框架。

无论我们认为自己有多好，人类都不是好的单元测试框架或 CI 服务器。

* * *

注意：LMAO*正在*测试，但在*非常*有限的意义上。它不能在整个项目或作为流程的一部分以任何有意义的方式重复。它类似于在 REPL 中增量开发，但从不将这些增量测试形式化。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-06-02T13:51:59.937

我们编写测试来验证程序行为的正确性。

**通过用眼睛**检查输出语句的内容来验证程序行为的正确性是一个*手动*的，或者更具体地说，是一个*可视化*的过程。

你可以争辩说

> *目视检查有效*，我检查代码是否符合这些情况，一旦我看到它是正确的，我们就可以开始了。

现在首先，很高兴您对代码是否正常工作感兴趣。这是好事。你走在了曲线的前面！可悲的是，这种方法存在问题。

目视检查的第一个问题是，您将永远无法再次检查代码的正确性，这是一次严重的焊接事故。

第二个问题是，使用的那双眼睛与眼睛主人的大脑紧密耦合。如果代码的作者还拥有视觉检查过程中使用的眼睛，那么验证正确性的过程依赖于视觉检查员大脑中内化的程序知识。

仅仅因为它们没有与原始编码器的大脑合作，就很难有一双新的眼睛进来并验证代码的正确性。第二双眼睛的拥有者必须与代码的原作者*交谈才能完全理解有问题的代码。*众所周知，对话作为一种分享知识的方式是不可靠的。如果原始编码器对新的眼睛不可用，则这一点没有实际意义。在那种情况下，新的眼睛必须阅读原始代码。

阅读单元测试未涵盖的其他人的代码比阅读具有相关单元测试的代码更困难。最好的情况是阅读其他人的代码是一项棘手的工作，最坏的情况是这是软件工程中最艰巨的任务。雇主在宣传职位空缺时强调项目是新建项目（或全新项目）是有原因的。从头开始编写代码比修改现有代码更容易，从而使广告工作对潜在员工更具吸引力。

通过单元测试，我们将代码分成其组成部分。然后，对于每个组件，我们都设置了说明程序*应该*如何运行的档位。每个单元测试都讲述了程序的该部分应如何在特定场景中运行的故事。每个单元测试就像合同中的一个条款，从客户端代码的角度描述应该发生的事情。

这意味着一双新的眼睛有**两**股关于相关代码的**实时和准确**的文档。

首先他们有代码本身，实现，*代码是如何完成的*；其次，他们拥有原始编码器在一组正式陈述中描述的所有知识，这些陈述讲述了该代码*应该如何表现的故事。*

单元测试捕获并正式描述了原作者在实施课程时所拥有的知识。它们提供了该类在客户端使用时的行为方式的描述。

您质疑这样做的用处是正确的，因为有可能编写无用的单元测试，不涵盖所有有问题的代码，变得陈旧或过时等等。我们如何确保单元测试不仅模仿而且改进了知识渊博、尽职尽责的作者在运行时目视检查其代码的输出语句的过程？首先编写单元测试，然后编写代码以使该测试通过。完成后，让计算机运行测试，它们速度很快，它们擅长做重复性任务，它们非常适合这项工作。

每次触发他们测试的代码并为每个构建运行测试时，通过审查它们来确保测试质量。如果测试失败，请立即修复。

我们将运行测试的过程自动化，以便在每次构建项目时运行它们。我们还自动生成代码覆盖率报告，详细说明测试覆盖和执行的代码百分比。我们争取高比例。如果一些公司没有编写足够的单元测试来描述代码行为的任何变化，他们会阻止将代码更改签入源代码控制。通常，第二双眼睛会与更改的作者一起审查代码更改。审阅者将检查更改以确保更改可以理解并被测试充分覆盖。所以审查过程是手动的，但是当测试（单元和集成测试以及可能的用户验收测试）通过这个手动审查过程时，就成为自动构建过程的一部分。每次签入更改时都会运行这些。[持续集成](/questions/tagged/continuous-integration "显示标记为“持续集成”的问题")服务器执行此任务作为构建过程的一部分。

自动运行的测试，维护代码行为的完整性，并有助于**防止将来对代码库的更改破坏代码**。

最后，提供测试允许您积极地[重构代码](http://en.wikipedia.org/wiki/Code_refactoring)，因为您可以安全地对代码进行重大改进，因为您知道您的更改不会破坏现有测试。

[测试驱动开发](http://en.wikipedia.org/wiki/Test-driven_development)有一个警告，那就是您必须编写代码以使其可测试。这涉及对接口进行编码并使用诸如依赖注入之类的技术来实例化协作对象。查看[Kent Beck](http://en.wikipedia.org/wiki/Kent_Beck)的工作，他很好地描述了 TDD。查找[接口编码](https://stackoverflow.com/questions/1970806/coding-to-interfaces/1970833#1970833)并研究[设计模式](/questions/tagged/design-patterns "显示标记为“设计模式”的问题")

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-02T00:57:12.703

当您使用 System.out 之类的东西进行测试时，您只是在测试一小部分可能的用例。当您处理可以接受几乎无限数量的不同输入的系统时，这不是很彻底。

单元测试旨在允许您使用非常庞大且多样化的不同数据输入集在您的应用程序上快速运行测试。此外，最好的单元测试还考虑了边界情况，例如位于被认为有效的边缘的数据输入。

人类测试所有这些不同的输入可能需要数周时间，而机器可能需要几分钟。

可以这样想：您也不是在“测试”静态的东西。您的应用程序很可能会不断变化。因此，这些单元测试旨在在编译或部署周期的不同点运行。也许最大的优势是：

*如果您破坏了代码中的某些内容，您现在*就会知道它，而不是在部署之后，而不是在 QA 测试人员发现错误时，而不是在您的客户取消时。您也将有更好的机会*立即*修复故障，因为很明显，破坏有问题的代码部分的事情很可能发生在您上次编译之后。因此，解决问题所需的调查工作量大大减少。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-06-03T00:44:24.683

我添加了一些其他 System.out 不能做的事情：

*   使每个测试用例独立（这很重要）

    JUnit 可以做到：每次都会创建并`@Before`调用新的测试用例实例。

*   将测试代码与源代码分开

    JUnit 可以做到。

*   与 CI 集成

    JUnit 可以用 Ant 和 Maven 做到这一点。

*   轻松安排和组合测试用例

    JUnit 可以做`@Ignore`和测试套件。

*   易于检查结果

    JUnit 提供了许多 Assert 方法 ( `assertEquals`, `assertSame`...)

*   模拟和存根使您专注于测试模块。

    JUnit 可以做到：使用 mock 和 stub 让您设置正确的夹具，并专注于测试模块逻辑。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-02-26T05:50:01.427

单元测试确保代码按预期工作。它们也非常有助于确保代码仍然按预期工作，以防您以后必须更改它以构建新功能来修复错误。对代码进行高测试覆盖率可以让您继续开发功能，而无需执行大量手动测试。

您的手动方法`System.out`很好，但不是最好的方法。这是您执行的一次性测试。在现实世界中，需求不断变化，大多数时候您对现有函数和类进行大量修改。所以……不是每次你测试已经写好的代码。

JUnit中还有一些更高级的功能，比如

## 断言语句

JUnit 提供了测试某些条件的方法，这些方法通常以断言开始，并允许您指定错误消息、预期和实际结果

其中一些方法是

1.  `fail([message])`- 让测试失败。可用于检查代码的某个部分是否未到达。或者在实现测试代码之前进行失败的测试。
2.  `assertTrue(true)`/ `assertTrue(false)`- 永远是真/假。如果测试尚未实施，可用于预定义测试结果。
3.  `assertTrue([message,] condition)`- 检查布尔值`condition`是否为真。
4.  `assertEquals([message,] expected, actual)`- 测试两个值是否相等（`equals`如果实现则根据方法，否则使用`==`参考比较）。注意：对于数组，检查的是引用，而*不是*内容，`assertArrayEquals([message,] expected, actual)`用于检查。
5.  `assertEquals([message,] expected, actual, delta)`- 测试两个浮点数或双精度值是否彼此相距一定距离，由`delta`值控制。
6.  `assertNull([message,] object)`- 检查对象是否为空

等等。[在此处](http://junit.sourceforge.net/javadoc/org/junit/Assert.html)查看所有示例的完整 Javadoc 。

## 套房

使用测试套件，您可以在某种意义上*将*多个测试类组合到一个单元中，这样您就可以一次执行它们。一个简单的例子，将测试类合并`MyClassTest`到`MySecondClassTest`一个名为的套件中`AllTests`：

```
import org.junit.runner.RunWith;
import org.junit.runners.Suite;
import org.junit.runners.Suite.SuiteClasses;

@RunWith(Suite.class)
@SuiteClasses({ MyClassTest.class, MySecondClassTest.class })
public class AllTests { } 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-06-02T00:56:44.713

JUnit 的主要优点是它是自动化的，而不是您必须手动检查打印输出。您编写的每个测试都保留在您的系统中。这意味着，如果您进行的更改具有意想不到的副作用，您的测试将捕获它并失败，而不是您必须记住在每次更改后手动测试所有内容。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-02-13T09:59:27.977

JUnit 是 Java 编程语言的单元测试框架。它在测试驱动开发中很重要，并且是统称为 xUnit 的单元测试框架家族之一。

JUnit提倡“先测试后编码”的思想，强调为一段代码设置测试数据，可以先测试，然后可以实现。这种方法就像“一点点测试，一点点代码，一点点测试，一点点代码……”，它提高了程序员的生产力和程序代码的稳定性，从而减少了程序员的压力和调试所花费的时间。

特点 JUnit 是一个开源框架，用于编写和运行测试。

提供注释以标识测试方法。

为测试预期结果提供断言。

为运行测试提供测试运行器。

JUnit 测试允许您更快地编写代码，从而提高质量

JUnit 非常简单。它不那么复杂，花费的时间也更少。

JUnit 测试可以自动运行，它们会检查自己的结果并提供即时反馈。无需手动梳理测试结果报告。

JUnit 测试可以组织成包含测试用例甚至其他测试套件的测试套件。

Junit 在测试进度条中显示测试进度，如果测试正常，则显示为绿色，测试失败时变为红色。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-06-27T15:41:36.617

我对为什么需要 JUnit 的看法略有不同。

您实际上可以自己编写所有测试用例，但这很麻烦。以下是问题：

1.  而不是`System.out`我们可以添加`if(value1.equals(value2))`并返回 0 或 -1 或错误消息。在这种情况下，我们需要一个“主”测试类来运行所有这些方法并检查结果并维护哪些测试用例失败和哪些通过。

2.  如果您想添加更多测试，您还需要将它们添加到这个“主”测试类中。对现有代码的更改。如果要从测试类中自动检测测试用例，则需要使用反射。

3.  eclipse 不会检测到您的所有测试和运行测试的主类，您需要编写自定义调试/运行配置来运行这些测试。不过，您仍然看不到那些漂亮的绿色/红色输出。

这是 JUnit 正在做的事情：

1.  它具有`assertXXX()`用于从条件打印有用的错误消息并将结果传达给“主”类的方法。

2.  “main”类叫做runner，它是JUnit提供的，所以我们不用写。它通过反射自动检测测试方法。如果您添加带有`@Test`注释的新测试，则会自动检测到它们。

3.  JUnit 也有 eclipse 集成和 maven/gradle 集成，所以运行测试很容易，您不必编写自定义运行配置。

我不是 JUnit 方面的专家，所以这就是我现在所理解的，将来会添加更多。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-09-14T05:21:21.910

如果不使用测试框架，您就不能编写任何测试用例，否则您将不得不编写测试框架来为您的测试用例提供公正。除了可以使用 TestNG 框架之外，这里还有一些关于 JUnit 框架的信息。

什么是朱尼特？

Junit 是与 Java 编程语言一起广泛使用的测试框架。您可以将此自动化框架用于单元测试和 UI 测试。它可以帮助我们使用不同的注释定义代码的执行流程。Junit 建立在“先测试后编码”的理念之上，这有助于我们提高测试用例的生产力和代码的稳定性。

Junit 测试的重要特性 -

1.  它是一个开源测试框架，允许用户有效地编写和运行测试用例。
2.  提供各种类型的注解来标识测试方法。
3.  提供不同类型的断言来验证测试用例执行的结果。
4.  它还为测试运行器提供了有效运行测试的方法。
5.  它非常简单，因此可以节省时间。
6.  它提供了以测试套件的形式组织测试用例的方法。
7.  它以简单而优雅的方式给出测试用例结果。
8.  您可以将 jUnit 与 Eclipse、Android Studio、Maven & Ant、Gradle 和 Jenkins 集成

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-16T11:21:11.033

JUNIT 是 java 开发人员通常接受的方法。他们可以为函数提供类似的预期输入，并据此决定编写的代码是否完美编写，或者如果测试用例失败，则可能还需要实施不同的方法。JUNIT将加快开发速度，确保功能0缺陷。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-05T11:05:07.013

**JUNIT：观察和调整**

这是我对 JUNIT 的看法。

JUNIT 可用于：
1）在系统中添加新单元时观察系统行为。
2）对系统进行调整，迎接系统中的“新”单元。
什么？确切地。

> 现实生活例如。

当您的亲戚访问您的大学宿舍时，
1）您会假装更负责任。
2）你会把所有的东西放在它们应该放在的地方，比如鞋架上的鞋子不在椅子上，衣橱里的衣服不在椅子上。
3）你会摆脱所有的违禁品。
4）您将在您拥有的每台设备中开始清理。

> 在编程方面

系统：您的代码
单位：新功能。
由于 JUNIT 框架用于 JAVA 语言，所以 JUNIT = JAVA UNIT（可能是）。

假设你已经有一个很好的防弹代码，但是一个新的需求来了，你必须在你的代码中添加新的需求。这个新要求可能会破坏您的某些输入（测试用例）的代码。

适应这种变化的简单方法是使用单元测试（JUNIT）。
为此，您应该在构建代码库时为您的代码编写多个测试用例。每当有新需求出现时，您只需运行所有测试用例以查看是否有任何测试用例失败。如果否，那么您是 BadA** 艺术家，您已准备好部署新代码。
如果任何测试用例失败，那么您更改代码并再次运行测试用例，直到您获得绿色状态。

# javascript - CSS媒体查询高度大于宽度，反之亦然（或如何用JavaScript模仿）

> ID：10858994
> 
> 赞同：34
> 
> 时间：2012-06-02T00:54:54.163
> 
> 标签：javascript, css

如今，大多数台式机和笔记本电脑屏幕的宽度都大于高度。屏幕是“宽”而不是“高”。智能手机通过让手机的方向影响内容的呈现方式做了一些相当酷的事情。

我想用媒体查询来做到这一点，这样如果有人在带有大显示器的 Mac 上将浏览器窗口的大小设置为非常“高”（高度大于宽度），他们会看到页眉和页脚。但如果他们进入全屏或“宽”（宽度大于高度），他们会在左侧看到侧边栏，也可能在右侧看到侧边栏。

我正在尝试充分利用宽屏幕和方向等。如何使用媒体查询或 javascript 做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-09T15:40:29.507

我相信你现在已经有了，但这里是路过的其他人的一个例子。正如前人所说，人们应该花时间阅读：[http ://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

**现在**，这里有一个答案。您可以在@media 规则中将“横向”或“纵向”与宽度和高度结合使用。这假设高度大于宽度，反之亦然。我通常只使用 min-width ，然后有一些单独的 @media 规则专门用于这些规则。一个例子是横向：水平滚动（桌面）和纵向：常规垂直（平板电脑/手机）

但是，这两个不会单独完成，您需要一些组合。我认为我们可以假设您的侧边栏在小于 600 像素宽的屏幕上会成为障碍。

```
/* 01 */
@media (min-width: 0) {
   /* this is the same as not using a media query... */
   .main-content {
     width: 100%;
     float: left;
   }

   .side-bar {
     width: 100%;
     float: left
   }

}

/* 2 */
@media (min-width: 600px) and (orientation:landscape) {

   .main-content {
     width: 70%;
     float: left;
   }

   .side-bar {
     width: 30%;
     float: left
   }

} 
```

[这里是一个 jsfiddle](http://jsfiddle.net/sheriffderek/JNK54/) - 注意 box-sizing: border-box; 用于填充问题。

## 2017 年更新

我想现在大多数人都会使用 flexbox：[https ://jsfiddle.net/sheriffderek/egxcgyyd/](https://jsfiddle.net/sheriffderek/egxcgyyd/)

```
.parent {
  display: flex;
  flex-direction: column;
}

@media (min-width: 600px) and (orientation:landscape) {
  .parent {
    flex-direction: row;
  }
  .child-1 {
    min-width: 260px; /* or flex-basis: xx - try them both */
  }
  .child-2 {
    flex-basis: 100%; /* "if at all possible... please try to be this size..." */
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T01:06:06.640

对于支持它的现代浏览器，媒体查询可能会成为您的解决方案。您可以从此处获取文档的副本：

> [http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

但是您可能会发现以下教程很有用（Google for: Media Queries Tutorial）：

> [http://webdesignerwall.com/tutorials/css3-media-queries](http://webdesignerwall.com/tutorials/css3-media-queries)

一旦你掌握了基础知识，如果屏幕低于特定分辨率，就可以隐藏元素：

```
@media screen and (max-width: 600px)
{
  .sidebar
  {
    display: none;
  }
} 
```

希望这可以帮助。

# clojure - core.logic 占主导地位的竞技场 [软]

> ID：10858997
> 
> 赞同：10
> 
> 时间：2012-06-02T00:55:25.943
> 
> 标签：clojure, prolog, logic, minikanren

## 社区维基

我不在乎声望点，我只想要好的答案。随时将此问题标记为社区 wiki。

## 语境

我一直在通过 The Reasoned Schemer 工作，并发现了以下观察结果：

*   逻辑编程非常有趣。
*   逻辑编程有时是违反直觉的
*   逻辑编程通常是“低效的”（或者至少是我编写的代码）。

    好像从

*   汇编 -> C++，我“放弃”了编写自己的机器代码的控制权
*   C++ -> Clojure，我放弃了对内存管理的控制
*   Clojure -> core.logic/prolog/minikanren，我失去了对如何完成计算的部分控制

## 问题：

除了（1）解决逻辑难题和（2）类型推理之外，逻辑编程主导的问题领域是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T07:56:13.857

[约束逻辑编程](http://en.wikipedia.org/wiki/Constraint_logic_programming)对于解决各种调度、资源分配和其他重要的约束满足/组合优化问题非常有用。您所拥有的只是声明性的：约束（例如，一次只能在跑道上运行一架飞机），以及您可能想要最小化/最大化（吞吐量/等待）的东西。

Prolog 中有各种众所周知的风格，包括在有限整数域中工作的[CLP(FD)](http://www.swi-prolog.org/man/clpfd.html)和在实域中工作的 CLP(R)。至少 CLP(FD) 似乎在[core.logic 的直接路线图](https://github.com/clojure/core.logic)中。

我相信这种源自 Prolog 的解决方案正在积极地用于[空中交通管制](http://www.pdc-aviation.com/About/about.asp)和其他物流任务，尽管很难获得准确的信息，这些关键任务和生命的公司到底在使用哪些技术。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T01:04:32.160

人工智能研究，特别是认知机器人学和基于逻辑的知识表示的其他应用，是 Prolog 与逻辑理论密切相关的领域。这种关系非常有用，因为它基本上将理论带入了生活。定理可以在纸上证明，然后在 prolog 中几乎可以轻松地实现并执行，并且执行的程序具有证明的性质。这允许程序“通过构造正确”，这与首先编写程序然后尝试证明它们的属性相反（就像在正式方法中所做的那样，使用例如模型检查）。

语义网是逻辑编程发挥越来越大作用的另一个地方。

# c++ - 如何获取析构函数的成员函数指针？

> ID：10858998
> 
> 赞同：5
> 
> 时间：2012-06-02T00:56:00.623
> 
> 标签：c++, destructor, member-function-pointers, c++03

假设我有

```
struct X {
  ~X() {}
}; 
```

`X::~X()`C++03 中的成员函数指针是什么类型以及如何获取？

我不想实际调用它，只需在 SFINAE 中使用来确定给定类型是否存在析构函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T00:58:16.310

您无法获取析构函数或构造函数的函数指针。尽管如此，一个类型总是存在析构函数，并且您无法检测到它的`private`with as 访问说明符是否不被*SFINAE*考虑。

关于调用标量类型的析构函数的主题，标准说*[class.dtor]/16*：

> [注意：显式调用析构函数的符号可用于任何标量类型名称（5.2.4）。允许这样做可以编写代码，而不必知道给定类型是否存在析构函数。例如，
> 
> typedef int I;
> 
> 我* p;
> 
> p->I::~I();
> 
> ——尾注]