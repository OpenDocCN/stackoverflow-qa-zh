# StackOverflow 问答 10073000-10073999

# php - javascript (jquery) 中的组合树

> ID：10073002
> 
> 赞同：0
> 
> 时间：2012-04-09T12:13:11.153
> 
> 标签：php, javascript, jquery, css

我正在寻找一个在组合（选择）中启用显示树的组件。类似的东西：http: [//www.jeasyui.com/demo/index.php](http://www.jeasyui.com/demo/index.php)

但是这个组件不允许直接导入 JSON，只能从文件中导入。

它以这种方式工作：

```
$('#cc').combotree({  
        url:'tree_data.json'  
    }); 
```

我需要（伪代码）：

```
$('#cc').combotree({  
        data:'[{"id":1,"text":"City","children":[{"id":11,"text":"Wyoming","children":[{"id":111,"text":"Albin"}]}]}]' 
    }); 
```

或（伪代码）：

```
$('#cc').combotree({  
        data:'<?php $json_string; ?>'  
    }); 
```

可能吗？或者，也许您知道任何能够做到这一点的组件？

问候，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:32:58.090

```
<?php

$obj = json_encode('['.json_encode($objects).']');
$jquery_obj = str_replace(",\\\"name\\\":", ",\\\"text\\\":", $obj);
print $jquery_obj;

?>

<script>
$(document).ready(function(){
var jq_data = $.parseJSON(<? print $jquery_obj; ?>);

$('#cc').combotree({  

    animate:true,
    data:jq_data
});

});

</script>
<select id="cc" class="easyui-combotree"></select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:29:22.347

你试过`data`参数吗？文档说它应该可以工作。（将数据作为数组而不是字符串提供。）您也可以将数据作为`ul`列表提供。检查文档以获取`tree`.

# android - Android SAX解析检索很慢

> ID：10073005
> 
> 赞同：0
> 
> 时间：2012-04-09T12:13:16.533
> 
> 标签：android, android-emulator, sax, android-parser

在我的应用程序中，我有大约 50 到 100 个数据要解析......还有一些 2 MB 大小的图像......所有这些都将被检索到单个活动并在那里进行排序和显示......

但它需要大约 2 分钟......那太多了。

如何减少解析时间？

还是我使用 SAX 解析错了???请提出建议....

```
SAXParserFactory spf = SAXParserFactory.newInstance();
      SAXParser sp = spf.newSAXParser();
      XMLReader xr = sp.getXMLReader();

      /** Send URL to parse XML Tags */
      URL sourceUrl = new URL(url);

      /** Create handler to handle XML Tags ( extends DefaultHandler ) */
      XmlHandler xmlHandler4Profile = new XmlHandler();
      xr.setContentHandler(xmlHandler4Profile);
      xr.parse(new InputSource(sourceUrl.openStream()));

      } 
```

XmlHandler.java 的代码

```
public class XmlHandler extends DefaultHandler{
static GetXml getxml;
Boolean currentElement = false;
String currentValue = null;

@Override
public void startElement(String uri, String localName, String qName,
    Attributes attributes) throws SAXException {
// TODO Auto-generated method stub
currentElement=true;
   if (localName.equals("root"))
    {
        /** Start */ 
       getxml = new GetXml();
    } 
}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    // TODO Auto-generated method stub
    currentElement=false;

    //**************************display page************************

    if (localName.equalsIgnoreCase("DisplayId"))
         getxml.setDisplayId(currentValue);     

     if (localName.equalsIgnoreCase("DisplayPage"))
         getxml.setDisplayPage(currentValue);

    //**************************category details************************

        if (localName.equalsIgnoreCase("CategoryId"))
             getxml.setCategoryId(currentValue);        

         if (localName.equalsIgnoreCase("CategoryName"))
             getxml.setCategory(currentValue);

        //**************************news details************************ 

         if (localName.equalsIgnoreCase("Picture"))
             getxml.setPictureName(currentValue);       

         if (localName.equalsIgnoreCase("newsHeading"))
             getxml.setNewsHeading(currentValue);

         if (localName.equalsIgnoreCase("Mainnews"))
             getxml.setMainNews(currentValue);

}
    @Override
public void characters(char[] ch, int start, int length)
        throws SAXException {
    // TODO Auto-generated method stub
     if (currentElement) {
            currentValue = new String(ch, start, length);
            currentElement = false;
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:03:58.027

您确实应该分析您的代码并找出它花费时间的地方。

我可以在您发布的代码中看到一个性能问题和一个正确性问题。

通过在代码中添加一些`else`用法，您会有所收获。`endElement`一旦你知道`localName`匹配的东西，就没有必要检查它与以后不可能匹配的所有可能性。

这可能收益不大，但肯定值得一试。

您的`characters`方法是错误的，但这与正确性有关，而不是与效率有关。请参阅[我](https://stackoverflow.com/questions/5855421/android-sax-parsing-returns-null-values-and-retrieve-values-in-tags-of-same-nam/5855796#5855796)对有关 SAX 解析的另一个问题的回答，了解问题所在以及如何编写正确的`characters`方法。更改还需要更改`endElement`获取值的方式，因为必须将其收集到缓冲区中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T12:30:44.503

答案很可能是您使用的 SAX 解析器正在 Internet 上检查您的 xml 内容的架构或 DTD。如果您编写一个绕过这些检查的 entityResolver，您可能会缩短开始时间（通常是 2 分钟左右）。

有关更多详细信息，请参阅此内容。

[如何在 Java 中读取格式良好的 XML，但跳过模式？](https://stackoverflow.com/questions/1185519/how-to-read-well-formed-xml-in-java-but-skip-the-schema)

这解决了我使用 Xerces 的问题......

# asp.net - 在 Orchard 中创建/编辑后清空内容项

> ID：10073023
> 
> 赞同：2
> 
> 时间：2012-04-09T12:15:17.070
> 
> 标签：asp.net, orchardcms

我正在使用指南在 Orchard (ocs.orchardproject.net/Documentation/Creating-1-n-and-nn-relations) 中创建 n 对 n 关系，并稍作修改。虽然示例代码运行良好，但在创建或编辑项目后，我自己的内容部分始终为空白。我无法弄清楚，因为我*发誓*我的代码几乎与他们的相同（除了内容部分具有更多/更少不相关的字段）。

我怀疑这可能与驱动程序中的前缀有关。我真的不知道前缀应该做什么，但是将其设置为一个值会在创建/编辑时产生运行时错误，其他值只会产生所有字段空白的结果。

原始样本工作正常，所以它必须是我做过或没做过的事情，但我就是不知道它是什么。

一些相关的类：

```
using System.Linq;
using JetBrains.Annotations;
using Orchard.ContentManagement;
using Orchard.ContentManagement.Drivers;
using ArealAds.Models;
using ArealAds.Services;
using ArealAds.ViewModels;

namespace ArealAds.Drivers {
    [UsedImplicitly]
    public class StreetPartDriver : ContentPartDriver<StreetPart> {
        private readonly IStreetService _streetService;

        private const string TemplateName = "Parts/Street";

        public StreetPartDriver(IStreetService streetService) {
            _streetService = streetService;
        }

        // this one gives a runtime error with blank description,
        // other values produce result with all fields blank
        protected override string Prefix {
            get { return "Area"; }
        }

        protected override DriverResult Display(StreetPart part, string displayType, dynamic shapeHelper) {
            return ContentShape("Parts_Street",
                            () => shapeHelper.Parts_Street(
                                ContentPart: part,
                                Name: part.Name,
                                Areas: part.Areas,
                                Districts: part.Districts));

        }

        protected override DriverResult Editor(StreetPart part, dynamic shapeHelper) {
            return ContentShape("Parts_Street_Edit",
                    () => shapeHelper.EditorTemplate(
                        TemplateName: TemplateName,
                        Model: BuildEditorViewModel(part),
                        Prefix: Prefix));
        }

        protected override DriverResult Editor(StreetPart part, IUpdateModel updater, dynamic shapeHelper) {
            var model = new EditStreetViewModel();
            updater.TryUpdateModel(model, Prefix, null, null);

            if (part.ContentItem.Id != 0) {
                _streetService.UpdateAreasForContentItem(part.ContentItem, model.Areas);
            }

            return Editor(part, shapeHelper);
        }

        private EditStreetViewModel BuildEditorViewModel(StreetPart part) {
            var itemAreas = part.Areas.ToLookup(r => r.Id);
            return new EditStreetViewModel {
                Areas = _streetService.GetAreas().Select(r => new AreaEntry {
                    Area = r,
                    IsChecked = itemAreas.Contains(r.Id)
                }).ToList()
            };
        }
    }
}

using System.Collections.Generic;
using System.Linq;
using Orchard;
using Orchard.ContentManagement;
using Orchard.Data;
using ArealAds.Models;
using ArealAds.ViewModels;

namespace ArealAds.Services {
    public interface IStreetService : IDependency {
        void UpdateAreasForContentItem(ContentItem item, IEnumerable<AreaEntry> areas);
        IEnumerable<AreaRecord> GetAreas();
    }

    public class StreetService : IStreetService {
        private readonly IRepository<AreaRecord> _areaRepository;
        private readonly IRepository<StreetAreaRecord> _streetAreaRepository;

        public StreetService(
            IRepository<AreaRecord> areaRepository,
            IRepository<StreetAreaRecord> streetAreaRepository) {

            _areaRepository = areaRepository;
            _streetAreaRepository = streetAreaRepository;
        }

        public void UpdateAreasForContentItem(ContentItem item, IEnumerable<AreaEntry> areas) {
            var record = item.As<StreetPart>().Record;
            var oldAreas = _streetAreaRepository.Fetch(
                r => r.StreetRecord == record);
            var lookupNew = areas
                .Where(e => e.IsChecked)
                .Select(e => e.Area)
                .ToDictionary(r => r, r => false);
            // Delete the areas that are no longer there and mark the ones that should stay
            foreach(var streetAreaRecord in oldAreas) {
                if (lookupNew.ContainsKey(streetAreaRecord.AreaRecord)) {
                    lookupNew[streetAreaRecord.AreaRecord] = true;
                }
                else {
                    _streetAreaRepository.Delete(streetAreaRecord);
                }
            }
            // Add the new areas
            foreach(var area in lookupNew.Where(kvp => !kvp.Value).Select(kvp => kvp.Key)) {
                _streetAreaRepository.Create(new StreetAreaRecord {
                    StreetRecord = record,
                    AreaRecord = area
                });
            }
        }

        public IEnumerable<AreaRecord> GetAreas() {
            return _areaRepository.Table.ToList();
        }
    }
}

using System.ComponentModel.DataAnnotations;
using Orchard.ContentManagement;
using Orchard.ContentManagement.Records;

namespace ArealAds.Models {
    public class StreetAreaRecord : ContentPartRecord {
        public virtual StreetRecord StreetRecord { get; set; }
        public virtual AreaRecord AreaRecord { get; set; }
    }
}

using System;
using System.Collections.Generic;
using System.Data;
using Orchard.ContentManagement.Drivers;
using Orchard.ContentManagement.MetaData;
using Orchard.ContentManagement.MetaData.Builders;
using Orchard.Core.Contents.Extensions;
using Orchard.Data.Migration;
using ArealAds.Models;

namespace ArealAds {
    public class Migrations : DataMigrationImpl {

        public int Create() {
            //
            // Street-Area-District
            //

            SchemaBuilder.CreateTable("DistrictRecord", table => table
                .ContentPartRecord()
                .Column<string>("Name")
            );

            ContentDefinitionManager.AlterPartDefinition(
                typeof(DistrictPart).Name, cfg => cfg.Attachable());

            ContentDefinitionManager.AlterTypeDefinition(
                "District", cfg => cfg
                .WithPart("CommonPart")
                .WithPart("DistrictPart")
                .Creatable()
            );

            SchemaBuilder.CreateTable("AreaRecord", table => table
                .ContentPartRecord()
                .Column<string>("Name")
                .Column<int>("DistrictRecord_Id")
            );

            ContentDefinitionManager.AlterPartDefinition(
                typeof(AreaPart).Name, cfg => cfg.Attachable());

            ContentDefinitionManager.AlterTypeDefinition(
                "Area", cfg => cfg
                .WithPart("CommonPart")
                .WithPart("AreaPart")
                .Creatable()
            );

            SchemaBuilder.CreateTable("StreetRecord", table => table
                .ContentPartRecord()
                .Column<string>("Name")
            );

            ContentDefinitionManager.AlterPartDefinition(
                typeof(StreetPart).Name, cfg => cfg.Attachable());

            ContentDefinitionManager.AlterTypeDefinition(
                "Street", cfg => cfg
                .WithPart("CommonPart")
                .WithPart("StreetPart")
                .Creatable()
            );

            SchemaBuilder.CreateTable("StreetAreaRecord", table => table
                .Column<int>("Id", column => column.PrimaryKey().Identity())
                .Column<int>("StreetRecord_Id")
                .Column<int>("AreaRecord_Id")
            );

            //
            // Address-Ad
            //

            SchemaBuilder.CreateTable("AddressRecord", table => table
                .ContentPartRecord()
                .Column<int>("StreetRecord_Id")
                .Column<int>("Building")
                .Column<int>("Kor")
                .Column<int>("Str")
                .Column<int>("Vl")
                .Column<string>("Note")
                .Column<int>("AreaRecord_Id")
                .Column<int>("DistrictRecord_Id")
                .Column<string>("Phone1")
                .Column<string>("Phone2")
                .Column<string>("Phone3")
            );

            ContentDefinitionManager.AlterPartDefinition(
                typeof(AddressPart).Name, cfg => cfg.Attachable());

            return 1;
        }
    }
}

@model ArealAds.ViewModels.EditStreetViewModel
<fieldset>
    <legend>Улица</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Street.Name)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => model.Street.Name)
        @Html.ValidationMessageFor(model => model.Street.Name)
    </div>
<ul>

@for (int i = 0; i < Model.Areas.Count; i++) {
    <li>
        <input type="hidden" value="@Model.Areas[i].Area.Id"
               name="@Html.FieldNameFor(m => m.Areas[i].Area.Id)"/>

        <label for="@Html.FieldNameFor(m => m.Areas[i].IsChecked)">

            <input type="checkbox" value="true"
                name="@Html.FieldNameFor(m => m.Areas[i].IsChecked)"
                id="@Html.FieldNameFor(m => m.Areas[i].IsChecked)"
                @if (Model.Areas[i].IsChecked) {<text>checked="checked"</text>}/>

            @Model.Areas[i].Area.Name
        </label>
    </li>
}
</ul>
</fieldset> 
```

这几天我一直在碰壁，请提出任何你认为理论上可能有帮助的建议，因为我很绝望:(

UPD： StreetHandler 类：

```
using ArealAds.Models;
using Orchard.ContentManagement.Handlers;
using Orchard.Data;

namespace ArealAds.Handlers {
    public class StreetHandler : ContentHandler {
        public StreetHandler(IRepository<StreetRecord> repository) {
            Filters.Add(StorageFilter.For(repository));
        }
    }
} 
```

日志上有一个异常：

```
2012-04-10 00:07:58,515 [7] Orchard.ContentManagement.Drivers.Coordinators.ContentPartDriverCoordinator - IdentifierGenerationException thrown from IContentPartDriver by ArealAds.Drivers.StreetPartDriver
NHibernate.Id.IdentifierGenerationException: attempted to assign id from null one-to-one property: ContentItemRecord
   â NHibernate.Id.ForeignGenerator.Generate(ISessionImplementor sessionImplementor, Object obj)
   â NHibernate.Event.Default.AbstractSaveEventListener.SaveWithGeneratedId(Object entity, String entityName, Object anything, IEventSource source, Boolean requiresImmediateIdAccess)
   â NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.SaveWithGeneratedOrRequestedId(SaveOrUpdateEvent event)
   â NHibernate.Event.Default.DefaultSaveEventListener.SaveWithGeneratedOrRequestedId(SaveOrUpdateEvent event)
   â NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.EntityIsTransient(SaveOrUpdateEvent event)
   â NHibernate.Event.Default.DefaultSaveEventListener.PerformSaveOrUpdate(SaveOrUpdateEvent event)
   â NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.OnSaveOrUpdate(SaveOrUpdateEvent event)
   â NHibernate.Impl.SessionImpl.FireSave(SaveOrUpdateEvent event)
   â NHibernate.Impl.SessionImpl.Save(Object obj)
   â Orchard.Data.Repository`1.Create(T entity) â d:\TeamCity\Projects\Orchard-Default\src\Orchard\Data\Repository.cs:ñòðîêà 96
   â Orchard.Data.Repository`1.Orchard.Data.IRepository<T>.Create(T entity) â d:\TeamCity\Projects\Orchard-Default\src\Orchard\Data\Repository.cs:ñòðîêà 36
   â ArealAds.Services.StreetService.UpdateAreasForContentItem(ContentItem item, IEnumerable`1 areas) â c:\Users\Mom\Teritoriya\Modules\ArealAds\Services\Street.cs:ñòðîêà 46
   â ArealAds.Drivers.StreetPartDriver.Editor(StreetPart part, IUpdateModel updater, Object shapeHelper) â c:\Users\Mom\Teritoriya\Modules\ArealAds\Controllers\Street.cs:ñòðîêà 47
   â System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   â Orchard.ContentManagement.Drivers.ContentPartDriver`1.Orchard.ContentManagement.Drivers.IContentPartDriver.UpdateEditor(UpdateEditorContext context) â d:\TeamCity\Projects\Orchard-Default\src\Orchard\ContentManagement\Drivers\ContentPartDriver.cs:ñòðîêà 30
   â Orchard.ContentManagement.Drivers.Coordinators.ContentPartDriverCoordinator.<>c__DisplayClass10.<UpdateEditor>b__f(IContentPartDriver driver) â d:\TeamCity\Projects\Orchard-Default\src\Orchard\ContentManagement\Drivers\Coordinators\ContentPartDriverCoordinator.cs:ñòðîêà 61
   â Orchard.InvokeExtensions.Invoke[TEvents](IEnumerable`1 events, Action`1 dispatch, ILogger logger) â d:\TeamCity\Projects\Orchard-Default\src\Orchard\InvokeExtensions.cs:ñòðîêà 19 
```

编辑：一些模型类：

```
using System.ComponentModel.DataAnnotations;
using Orchard.ContentManagement;
using Orchard.ContentManagement.Records;

namespace ArealAds.Models {
    public class AreaRecord : ContentPartRecord {
        public virtual string Name { get; set; }
        public virtual DistrictRecord DistrictRecord { get; set; }
    }

    public class AreaPart : ContentPart<AreaRecord> {
        [Required]
        public string Name {
            get { return Record.Name; }
            set { Record.Name = value; }
        }

        [Required]
        public DistrictRecord DistrictRecord {
            get { return Record.DistrictRecord; }
            set { Record.DistrictRecord = value; }
        }
    }
}

using System.Collections.Generic;
using System.Linq;
using System.ComponentModel.DataAnnotations;
using Orchard.ContentManagement;
using Orchard.ContentManagement.Records;

namespace ArealAds.Models {
    public class StreetRecord : ContentPartRecord {
        public virtual string Name { get; set; }
        public virtual IList<StreetAreaRecord> Areas { get; set; }

        public StreetRecord() {
            Areas = new List<StreetAreaRecord>();
        }
    }

    public class StreetPart : ContentPart<StreetRecord> {
        [Required]
        public string Name {
            get { return Record.Name; }
            set { Record.Name = value; }
        }

        public IEnumerable<AreaRecord> Areas {
            get {
                return Record.Areas.Select (r => r.AreaRecord);
            }
        }

        public IEnumerable<DistrictRecord> Districts {
            get {
                return Record.Areas.Select (r => r.AreaRecord.DistrictRecord).Distinct();
            }
        }
    }
}

using System.ComponentModel.DataAnnotations;
using Orchard.ContentManagement;
using Orchard.ContentManagement.Records;

namespace ArealAds.Models {
    public class StreetAreaRecord : ContentPartRecord {
        public virtual StreetRecord StreetRecord { get; set; }
        public virtual AreaRecord AreaRecord { get; set; }
    }
}

using ArealAds.Models;
using Orchard.ContentManagement.Handlers;
using Orchard.Data;

namespace ArealAds.Handlers {
    public class AreaHandler : ContentHandler {
        public AreaHandler(IRepository<AreaRecord> repository) {
            Filters.Add(StorageFilter.For(repository));
        }
    }
}

using ArealAds.Models;
using Orchard.ContentManagement.Handlers;
using Orchard.Data;

namespace ArealAds.Handlers {
    public class StreetHandler : ContentHandler {
        public StreetHandler(IRepository<StreetRecord> repository) {
            Filters.Add(StorageFilter.For(repository));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T02:59:06.907

您的 StreetAreaRecord 模型缺少 Id 属性。由于它不是 ContentPartRecord，因此您必须手动设置该属性。

```
public virtual int Id { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:54:08.503

前缀是为了确保部件编辑器的 html 字段中的唯一 id 属性。您可能在具有“名称”字段的单个内容类型中有多个部分。如果没有前缀，则 html 将无效，并且回发将不起作用，因为将有两个 id="Name" 字段。您可以简单地将前缀设置为零件的名称。

我不确定前缀是什么阻止你的部分保存。你检查过你的处理程序吗？确保它为 StreetPartRecord 设置了过滤器，这通常是导致新部件没有在回发时保存的原因。

# java - 安卓3D游戏

> ID：10073024
> 
> 赞同：1
> 
> 时间：2012-04-09T12:15:22.370
> 
> 标签：java, android

我想为 android 创建 3d 游戏，但我没有任何相关信息。我想像大公司一样以最先进的方式做到这一点。“最先进的方式”意味着我不使用快速返回结果的简单工具，但没有办法进行创造力和创造。我需要一个具有完整资源的标准方式等等......

我也想知道这一点： 1- 我需要一个游戏引擎，或者我可以用自己的引擎创建游戏？如何？2- [重要] 我需要学习 3D Max 或 Maya 等...？

每一个指导都会推动我前进。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:24:19.057

我认为***Unity***是您开发 3D 游戏所需的工具。

**Unity**是一种让您不受阻碍的开发环境，让您可以专注于简单地创建游戏。

链接：[http ://unity3d.com/unity/](http://unity3d.com/unity/)

# java - Java：JIT 方法内联

> ID：10073025
> 
> 赞同：16
> 
> 时间：2012-04-09T12:15:24.903
> 
> 标签：java, inline, jit

*Java JIT何时*内联方法调用？它是基于#times调用调用者方法（如果是，那个数字是多少？），还是其他一些标准（那会是什么？）

我读过 JIT 可以内联“最终”方法，但它也内联基于运行时统计的非最终方法，所以想知道触发条件是什么。

我猜答案会根据 JVM 实现而有所不同，但也许所有这些都有一些共同点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-09T12:21:28.430

简短的回答是随时随地。

很多时候，JITC 会自动内联小型最终或伪最终方法，而无需先收集任何统计信息。这是因为很容易看出内联实际上节省了代码字节而不是对调用进行编码（或者至少它几乎是“清洗”）。

除非统计数据表明它是值得的，否则通常不会内联真正的非最终方法，因为内联的非最终方法必须以某种方式“保护”，以防意外的子类出现。

至于在 JITCed 或内联之前可能调用的次数，这是高度可变的，即使在运行的 JVM 中也可能会发生变化。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-30T06:36:16.807

运行服务器 Hotspot 编译器的 JVM 的默认内联阈值是 35 个字节码。

[官方文档](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T12:18:33.990

通常 JIT 默认只内联“小”方法。除此之外，它完全取决于实现。

# java-native-interface - 对 JNI 的确切需求是什么？

> ID：10073028
> 
> 赞同：0
> 
> 时间：2012-04-09T12:15:40.260
> 
> 标签：java-native-interface

当我们可以用JAVA开发整个应用程序时，为什么还需要JNI来访问native。

问候， 苏贾尼安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T03:52:22.413

> 当我们可以用JAVA开发整个应用程序时，为什么还需要JNI来访问native。

如果你由此断言你总是可以用 Java 开发整个应用程序，那你就错了。您不能总是这样做，而 JNI 可以弥补这一差距。

另一方面，如果您的意思是“如果”而不是“何时”，那么答案是在这些情况下您不需要 JNI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:19:40.943

当您无法用 Java 开发整个应用程序时，就需要 JNI。例如，当存在仅在 C 中可用的遗留库或需要与系统驱动程序通信时，可能会发生这种情况。如果你可以用纯 Java 编写整个应用程序，那么你当然不需要 JNI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:20:48.480

当您可以用纯 Java 开发整个应用程序时，您就不需要 JNI。这也是首选方式。

然而：

*   您可能想调用现有的本机代码库。可以用 Java 重写它们，但这可能需要大量工作（在端口中以及稍后维护两个版本）

*   您可能需要编写一些低级代码以直接与硬件/操作系统对话，而 JVM 不允许您这样做

# javascript - node.js 将局部变量保留在函数中，为什么？

> ID：10073029
> 
> 赞同：0
> 
> 时间：2012-04-09T12:15:44.520
> 
> 标签：javascript, node.js

我在进行 node.js 异步编码时有一个问题。以下是示例代码：

```
function foo(arg) {
  var a = arg;
  console.log(a + ' start');
  setTimeout(function () {console.log(a);}, 500);
};
foo(1);
foo(2); 
```

它输出：

```
1 start
2 start
1
2 
```

我很困惑。我认为它应该输出↓，因为局部变量被 foo(2)

```
1 start
2 start
2
2 
```

你们能告诉我为什么/如何 node.js 为内部回调函数访问保留局部变量吗？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T12:18:28.077

因为它是局部变量，而不是全局变量。这就是局部变量的意义所在。

`var a`创建一个在函数调用的生命周期内存在的变量。在其中声明一个函数会延长生命周期以覆盖该函数。当匿名函数被调用时，它会继续使用`a`存在于它创建的范围内的函数。

由于您两次调用外部函数，因此您有两个`a`s。每个呼叫一个。您有两个匿名函数，每个调用一个。每个匿名函数都是在与其中一个 s 相同的范围内创建`a`的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:21:03.023

JavaScript 变量的范围是函数声明，而不是块。因此，您正在使用两个不同的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:21:25.480

它完全按照应有的方式工作。您`a`在函数中声明了变量，`var a;`并且您知道，声明了一个局部变量。的回调`setTimeout`与您的函数在同一范围内（您的 也是如此`var a`）。话虽这么说，这只是了解范围如何工作的问题。这是一篇关于它的古老而好的帖子：[http ://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)

或者你可以在谷歌上搜索“javascript scopes”，你会发现很多参考。

# c# - 将 Visual Web Developer 项目转换为 Web Matrix

> ID：10073034
> 
> 赞同：1
> 
> 时间：2012-04-09T12:16:15.910
> 
> 标签：c#, asp.net, .net, visual-studio

标题几乎概括了它。我怎样才能做到这一点？任何可用的工具可以做到这一点？或导入/导出设置？有关如何解决此问题的任何提示或指示？

# java - 使用正则表达式删除不必要的 XML 标签

> ID：10073039
> 
> 赞同：1
> 
> 时间：2012-04-09T12:16:43.660
> 
> 标签：java, regex

我有一个 XML 文件，我想格式化一个 XML 文件以删除像“ `<scientific_max></scientific_max>`”这样的标签。我使用了该代码，但它不起作用

```
String regex = "<([a-z_]+)></($1)>";
result = result.replaceAll(regex, ""); 
```

祝你今天过得愉快！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:24:25.343

如果您坚持使用正则表达式执行此类任务，您可能想知道[反向引用](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)在 java中表示为`\n`，而不是`$n`：

```
String regex = "<([a-z_]+)></\\1>";
result = result.replaceAll(regex, ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:18:36.650

Java 在文件的模式匹配和字符串替换方面并不是最好的，如果您正在考虑基于标签提取数据，请使用 jaxb

如果您想对 xml 进行永久更改，您可以使用 sed

sed -i 's/<\*scientific_max>*$//' input_xml.xml

# asp.net - 屏幕抓取 - 但无法模拟 javascript

> ID：10073042
> 
> 赞同：1
> 
> 时间：2012-04-09T12:17:47.720
> 
> 标签：asp.net

我没有问题下载特定 URL 的内容。

但是我有一个 ASP.NET 页面，我必须在单击按钮后的有趣数据处进行屏幕抓取。如何模拟单击该按钮并获取网络服务器将生成的数据？

按钮运行这个 javascript：

```
javascript:__doPostBack('ctl00$ctl01$DefaultSiteContentPlaceHolder1$Col1$ucNavBar$rptButtons$ctl00$btnPage','') 
```

现在我正在使用这个 ASP.NET 代码来获取特定 URL 的内容：

```
public string GetDataFromUrl(string strUrl) 
{
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(strUrl);
 request.Accept = "text/html, application/xhtml+xml, */*";  
request.UserAgent = "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64;      Trident/5.0)";
 request.KeepAlive = true;
 using (StreamReader streamReader = new          StreamReader(request.GetResponse().GetResponseStream(), Encoding.UTF8, true))
 {
 return streamReader.ReadToEnd();
 }
} 
```

- 编辑

我找到了解决方案。使用程序 Fiddler 能够准确地看到当我单击按钮时会发生什么。然后我尝试制作一个看起来与真实通话尽可能相似的 POST。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:20:45.877

您查看`__doPostBack`函数中的代码，并重现它的作用。

手动执行此操作并不难。模拟 Javascript 引擎以便它可以处理任何类型的脚本是完全不同的事情。

# python - 试图在python中加载位图图像

> ID：10073045
> 
> 赞同：0
> 
> 时间：2012-04-09T12:17:59.513
> 
> 标签：python, pygame

我正在 python 中加载我认为正确的图像，但它仍然不显示。不知道是图太大还是怎么回事。

```
import pygame
import math

pygame.display.init()
window = pygame.display.set_mode((600, 500))
mapImg = pygame.image.load("mapoftheusa.bmp")

done = False

while not done:

    window.fill((0,0,0))
    evtList = pygame.event.get()
    for evt in evtList:
         if evt.type == pygame.QUIT:
            done = True

    window.blit(mapImg, (0,0)) #<<will not blit

pygame.quit() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:33:47.637

`pygame.display.update()`您忘记在之后添加呼叫`window.blit(mapImg, (0,0))`。

因此，您的完整代码应该是：

```
import pygame
import math

pygame.display.init()
window = pygame.display.set_mode((600, 500))
mapImg = pygame.image.load("mapoftheusa.bmp")

done = False

while not done:

   window.fill((0,0,0))
   evtList = pygame.event.get()
   for evt in evtList:
       if evt.type == pygame.QUIT:
          done = True

   window.blit(mapImg, (0,0)) #<<will not blit
   pygame.display.update() # solution: you forgot this...

pygame.quit() 
```

`pygame.display.update()`用您的图纸更新窗口（屏幕）。如果您不调用它，您将什么也看不到。`pygame.display.flip()`也可以，但应该在使用双缓冲或硬件表面时使用。

另外，我认为最好通过调用来初始化 pygame，`pygame.init()`因为这将初始化它的所有模块，包括显示。

# java - 忽略从数据库中获取的冗余值

> ID：10073054
> 
> 赞同：1
> 
> 时间：2012-04-09T12:18:57.860
> 
> 标签：java, sql, database, oracle11g, duplicate-removal

以下是 SQL 查询的示例 o/p -

```
 BUG_ID   |  LINKED_BUG_ID
-----------|-----------------
3726       |  45236
45236      |  3726
3726       |  45254
45254      |  3726
3726       |  45402
45402      |  3726
3726       |  1182
1182       |  55745 
```

在我的 SQL o/p 中，有两行，其中一行是多余的。例如*Bug Id* **3726**和*Linked Bug Id* **45326**和*Bug Id* **45326**和*Linked Bug Id* **3726**在 o/p 中出现两次，其中我们只需要一行并忽略这种**重复的行**（其中一个值在*Bug Id*列或*Linked Bug Id*列），而不影响包含不同值的 o/p。

目前，我可以使用以下查询识别此类**重复行**，但我只需要从此类重复行中提取一行。

```
SELECT 
  BUG_ID, 
  LINKED_BUG_ID, 
  CASE 
    WHEN BUG_ID IN (select LINKED_BUG_ID FROM MY_BUG_LINKS) AND 
      LINKED_ISSUE_ID IN (SELECT BUG_ID FROM MY_BUG_LINKS) 
    THEN 'true' ELSE 'false'  
  END AS EQUAL 
FROM MY_BUG_LINKS; 
```

以下是我在代码中用于获取所有行（甚至包括重复行）的 SQL 查询

```
SELECT BUG_ID, LINKED_BUG_ID FROM MY_BUG_LINKS; 
```

如何避免在数据库级别本身或我的 java 代码中获取冗余的重复行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:37:13.727

如果这只是将`(B, A)`其视为的副本，`(A, B)`并且您并不特别关心返回的行是否为`(A, B)`or `(B, A)`，则可以执行以下操作：

```
SELECT DISTINCT
  CASE WHEN BUG_ID > LINKED_BUG_ID THEN LINKED_BUG_ID ELSE BUG_ID AS BUG_ID,
  CASE WHEN BUG_ID > LINKED_BUG_ID THEN BUG_ID ELSE LINKED_BUG_ID AS LINKED_BUG_ID
FROM MY_BUG_LINKS; 
```

也就是说，如果`BUG_ID`值大于`LINKED_BIG_ID`，则查询交换两个 ID，否则返回值不变。因此，`(A, B)`总是`(B, A)`产生重复的行（两者都是`(A, B)`or `(B, A)`），并`DISTINCT`确保最终结果中没有重复行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:59:38.817

you may try something similar to this:

```
select 
distinct bug_id from
(
    select bug_id as bug_id from TABLE
 union
    select linked_bug_id as bug_id from TABLE
) 
```

# string - Powershell：字符串操作

> ID：10073056
> 
> 赞同：0
> 
> 时间：2012-04-09T12:18:59.077
> 
> 标签：string, powershell, wmi

我将通过示例解释我想要什么，不知道如何以另一种方式解释它。

这是我使用的代码：

```
Get-WmiObject win32_share | select name, path 
```

上面的示例条目是：

名称路径
ADMIN$ C:\windows
C$ C:\

我想将所有名称和路径放入一个变量中。我希望字符串看起来像：

> “名称：管理员，路径：C:\windows；名称：c$，路径：C:\；等等。”

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:09:06.023

@SINTER 的回答稍作修改并使用更多 POSH 语法：

```
$out="";Get-WmiObject win32_share | %{ $out+="Name: {0}, Path: {1}; " -f $_.Name, $_.Path} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:26:42.257

像这样的东西：

```
[string]::Join("; ", (Get-WmiObject win32_share | % { [string]::Format("Name: {0}, Path: {1}", $_.Name, $_.Path)})) 
```

# objective-c - UIScrollview 倾斜

> ID：10073058
> 
> 赞同：3
> 
> 时间：2012-04-09T12:19:06.533
> 
> 标签：objective-c, ios, uiscrollview

我正在尝试使用倾斜 350 度的 UIScrollview，我首先想到的是使用变换属性，滚动上的倾斜度起作用了，但是现在滚动上的一切看起来都错了，当我谈论一切时，我的意思是所有的位置和大小这卷轴的孩子。我尝试了一些不同的方法，但没有奏效。有人知道是否可能？

谢谢，JS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:11:43.407

在包含您的 UIScrollView 的 UIView 中应用转换，而不是直接在 UISCrollView 中。

确保所有视图都没有 autoresizingMask。这样 UIScrollView 将比直接应用转换时具有更好的外观。

我使用的转换是 CGAffineTransformMakeRotation。

# c# - 提取短语中的双引号项目

> ID：10073061
> 
> 赞同：3
> 
> 时间：2012-04-09T12:19:25.153
> 
> 标签：c#, regex, string, split

我想提取输入短语中的所有双引号短语并将不匹配的元素保留为单词

假设我有“销售人员” IT 我希望输出是：

```
sales people

  IT 
```

对于 input="SO \"sales manager\"marketing\"management\"" 也是一样的

输出是：

```
SO
sales manager
marketing
management 
```

如果输入="SO\"销售经理\"营销管理\"保险"

输出是：

```
SO
sales manager
marketing
management
insurance 
```

我找到了正则表达式：但我不知道如何提取：

```
string InputText="SO \"sales manager\" marketing \"management\"" ;
string pattern0 = "^\"(.*?)\"$";
string pattern = "^(.*?)\"(.*?)\"(.*?)$";
Regex regex = new Regex(pattern);
string[] temOperands;
bool isMatch = regex.IsMatch(InputText);
if (isMatch)
{
    //here goes the extraction
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T13:27:30.727

我认为您需要类似`"(?<word>[^"]+)"|(?<word>\w+)`. 这将匹配双引号和单个单词中的文本：

```
var str = @"SO ""sales manager"" marketing hello ""management""";
var regex = new Regex(@"""(?<word>[^""]+)""|(?<word>\w+)");
var words = regex.Matches(str)
    .Cast<Match>()
    .Select(m => m.Groups["word"].Value)
    .ToArray(); 
```

对于测试字符串，这将返回：

```
SO
sales manager
marketing
hello
management 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:26:15.950

输入字符串在双引号中只有两个单词“Sales manager”和“marketing”。下面的代码可以提取双引号内的字符串。

```
 ArrayList arr = new ArrayList();

        int x1 ;
        int nextPos=0;
        x1 = InputText.IndexOf('\"', 0) +1 ;
        while (x1 != -1)
        {
            if (x1 >= 0)
            { 
                nextPos = InputText.IndexOf('\"',x1);
                arr.Add(InputText.Substring(x1, nextPos - x1));
            }
            nextPos++;
            x1 = InputText.IndexOf('\"', nextPos) + 1;
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-09T12:43:07.070

您可以使用“替换”

```
string InputText="SO \"sales manager\" marketing \"management\"" ;
InputText=InputText.Replace("\"","\n"); 
```

在输出中你会得到你想要的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-09T12:55:22.807

您还可以使用拆分功能

```
string s="SO \"sales manager\" marketing \"management\"";
string[] ExtractedString= Regex.Split(s, "\""); 
```

# c++ - 有没有开源真正的路线图路由实现？

> ID：10073063
> 
> 赞同：0
> 
> 时间：2012-04-09T12:19:39.290
> 
> 标签：c++, dijkstra, a-star

我想知道是否存在用于在具有大量节点的真实地图上搜索最佳点对点路线的开源实现？就像 Dijkstra 和 A* 的实现一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:24:10.397

[Gosmore](http://wiki.openstreetmap.org/wiki/Gosmore)是 OpenStreetMap 数据的开源路由器。通过下载 OSM 文件，您可以进行真正的道路布线。

# grails - Grails GORM findAll 返回空集合

> ID：10073072
> 
> 赞同：0
> 
> 时间：2012-04-09T12:20:31.743
> 
> 标签：grails, grails-orm, findall

考虑以下领域模型：

```
class Sales{
    String salesInvoice
    Customer customer
}

class Customer{
    int customerNumber
    String name
} 
```

问题：我正在尝试检索给定客户的所有销售额。因此代码：

```
def sales = Sales.findAllByCustomer(Customer.get(params.id)) 
```

我在获得客户方面没有问题。但是当我使用时，`println sales.dump()`我会得到类似的东西

```
<java.util.ArrayList@d3a25f8 elementData=[mypackage.Sales : null, mypackage.Sales : null] size=2 modCount=3> 
```

如果我理解正确，这意味着查询能够获得一个列表，`Sales`但我不太明白的是为什么它返回一个空值列表？我已经尝试过急切地获取，但我认为这在这个特定问题上不起作用。那么如何获取非空`Sales`对象的列表呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:13:53.387

您显示的对象不是 NULL，但`id`对象的当前为 NULL：每个 grails 域对象都有一个`toString()`将打印的方法`${name of the class} : ${id of the instance}`。如果您收到输出，如您所示，这通常意味着您的实例是存在的（否则会抛出 NPE！），但是尚未从数据库中获取 id。

1.  我猜你之前在代码中创建了对象。您需要刷新上下文，否则不会创建 id。
2.  您应该声明，您`Sale`属于`Customer`. [http://grails.org/doc/latest/guide/GORM.html#manyToOneAndOneToOne](http://grails.org/doc/latest/guide/GORM.html#manyToOneAndOneToOne)

顺便说一句：以单数命名您的域类。所以重命名`Sales`为`Sale`.

# iphone - 获取 iOS 应用版本 Corona SDK

> ID：10073074
> 
> 赞同：0
> 
> 时间：2012-04-09T12:20:33.943
> 
> 标签：iphone, version, coronasdk, info.plist

我正在开发一个需要访问应用程序版本号的 iOS 应用程序。

通过访问 Info.plist，我知道它在 Objective-C + Xcode 中更简单，但我希望 Corona SDK 中有这个功能。

这可能吗？如果是，那怎么办？
请帮忙，因为我被困在这里，无法前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:43:49.560

构建时属性可以在可选的 build.settings 文件中提供，该文件使用 Lua 语法。[您可以通过此处](http://developer.anscamobile.com/content/configuring-projects)显示的示例设置和检索 plist 值。

```
settings =
{
   orientation =
   {
       default = "portrait",
       supported =
       {
            "portrait", "portraitUpsideDown", "landscapeRight", "landscapeLeft"
     }
},

iphone =
{
    plist =
    {
        UIInterfaceOrientation = "UIInterfaceOrientationLandscapeRight",

        UISupportedInterfaceOrientations =
        {
            "UIInterfaceOrientationLandscapeLeft",
            "UIInterfaceOrientationLandscapeRight"
        },

        UIApplicationExitsOnSuspend = true,
        UIStatusBarHidden = true,
        UIPrerenderedIcon = true

       }
    }
}

settings.iphone.plist["UIInterfaceOrientation~ipad"] = "UIInterfaceOrientationPortrait"
settings.iphone.plist["UISupportedInterfaceOrientations~ipad"] = 
{
    "UIInterfaceOrientationPortrait",
    "UIInterfaceOrientationPortraitUpsideDown"
} 
```

# c++ - 如何在 C++ 中读取没有回声的单个字符？

> ID：10073084
> 
> 赞同：0
> 
> 时间：2012-04-09T12:21:11.283
> 
> 标签：c++

> **可能重复：**
> [从 std::cin 读取密码](https://stackoverflow.com/questions/1413445/read-a-password-from-stdcin)

我是 C++ 编程的新手，我有以下情况。我正在从标准输入读取一个字符并将其分配给一个变量“v”。使用“cin”变量在读取之前打印到标准输出。我只想阅读它并存储在“v”中，而不是打印它。

```
#include <iostream>  
using namespace std;  

int main()  
{  
    char v;  
    cout << "Choose!\n";  
    cout << "a. Choose a\n";  
    cout << "b. Choose b\n";  
    cin >> v;  
    return 0;  
} 
```

谢谢指教。

# qt - 在 Qt 中销毁从插件返回的 QWidget

> ID：10073085
> 
> 赞同：0
> 
> 时间：2012-04-09T12:21:16.137
> 
> 标签：qt, plugins, qt4, qmainwindow

我的应用程序加载了一个创建窗口 ( `QWidget`) 的插件，但是当我退出时我无法销毁它`QMainWindow`，显然是因为从插件返回的小部件不是`QMainWindow`. 问题是，如果我让那个窗口成为主窗口的子窗口，我会在另一个窗口上得到一个窗口。但我需要将它们分开。我将它们分开（但主窗口无法控制来自插件的窗口），在我的情况下，我不知道如何在应用退出时从插件中关闭窗口。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:39:35.807

只需删除它。如果您不为其分配父级，则没有其他小部件拥有所有权。因此，您应该能够在退出时自己销毁它。

# javascript - 重写对coffeescript的ajax jquery调用

> ID：10073086
> 
> 赞同：0
> 
> 时间：2012-04-09T12:21:20.537
> 
> 标签：javascript, jquery, ajax, coffeescript

如何将此代码重写为咖啡脚本：

```
 $('.delete_action').click(function(event) {
    $.get('/delete_action?name=' + event.target.name + '&date=' + $(this).attr('date'), function(data) {
    });

    $(this).parent().remove();

    return false;
  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:25:11.520

嗯，如果您了解咖啡脚本，那将是一件容易的事。所以，学习吧：[http ://arcturo.github.com/library/coffeescript/](http://arcturo.github.com/library/coffeescript/)

还有一个 js 到咖啡转换器：

[http://js2coffee.org/](http://js2coffee.org/)

这给了我们：

```
$(".delete_action").click (event) ->
  $.get "/delete_action?name=" + event.target.name + "&date=" + $(this).attr("date"), (data) ->

  $(this).parent().remove()
  false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:29:01.893

像这样：

```
$('.delete_action').click (event) -> 
    $.get '/delete_action?name=' + event.target.name + '&date=' + $(this).attr('date'), (data) -> 

    $(this).parent().remove();

    false; 
```

如果您再次遇到这种情况，请检查此处 [1] 并点击“尝试咖啡脚本”

[1] [http://coffeescript.org/](http://coffeescript.org/)

# facebook - 递归 Facebook API 调用

> ID：10073087
> 
> 赞同：1
> 
> 时间：2012-04-09T12:21:22.347
> 
> 标签：facebook, facebook-javascript-sdk

基本上这就是我想做的

```
- Get all my likes (page likes)
- Get all my friends
- for each of my friends, get their likes
- for each of their likes, do something 
```

现在，我这样做的方式是使用 JS SDK，因为我已经尝试过 PHP SDK 并且它真的很慢（如此慢以至于最大执行时间的 PHP 错误开始出现），PHP SDK 总是比 JS 慢吗？我的脚本是这样的：

```
var newArray = [];
FB.api('me/likes', function(response){
   FB.api('me/friends', function(friends){
       $(friends).each(function(){
           FB.api(this.uid+'/likes', function(fr_likes){
             $(fr_likes).each(function(){
               //save this friend likes to newArray
               newArray.push(this);
             });
           });
       });
   });
});

//call newArray outside FB scope doesn't work at first
console.log(newArray);  //returns [] / empty 
```

但是如果我在一段时间后使用 chrome 控制台调用 newArray，newArray 会慢慢填充 FB 数据。

所以我的问题是：

1.  在做 FB 范围之外的事情之前，我可以等待所有 FB.api 调用完成吗？
2.  做这样的事情（递归 FB api 调用）的最佳实践是什么？

感谢你的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:25:21.193

您应该阅读[Batch API](https://developers.facebook.com/docs/reference/api/batch/)。它允许您在一次往返 Facebook 的服务器中发出多个请求。应该大大加快速度。

# android - Xmlapter 示例不起作用 .contains（联系人阅读器、Rss 提要、照片显示）

> ID：10073097
> 
> 赞同：4
> 
> 时间：2012-04-09T12:21:58.807
> 
> 标签：android, android-layout, android-manifest, android-activity

我正在 从基本的 google 资源文件夹开发**RSS Feeds应用程序。**现在，我正在按照示例中的建议显示所有三个内容。

1.联系方式。2.照片。3.RSS提要

这是链接：

[RSS 字段 -xml 适配器](http://developer.android.com/resources/samples/XmlAdapters/src/com/example/android/xmladapters/index.html)

我按照我的要求很好地管理了代码。只更改包和项目名称。但其显示致命错误：

**日志猫：**

```
 04-09 17:40:02.894: E/AndroidRuntime(770): FATAL EXCEPTION: main
    04-09 17:40:02.894: E/AndroidRuntime(770): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.satyamdswt.agreader/com.satyamdswt.agreader.ContactsListActivity}: java.lang.IllegalArgumentException: The layout specified in contacts does not exist
    04-09 17:40:02.894: E/AndroidRuntime(770):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at android.os.Handler.dispatchMessage(Handler.java:99)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at android.os.Looper.loop(Looper.java:123)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at android.app.ActivityThread.main(ActivityThread.java:3683)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at java.lang.reflect.Method.invokeNative(Native Method)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at java.lang.reflect.Method.invoke(Method.java:507)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at dalvik.system.NativeStart.main(Native Method)
    04-09 17:40:02.894: E/AndroidRuntime(770): Caused by: java.lang.IllegalArgumentException: The layout specified in contacts does not exist
    04-09 17:40:02.894: E/AndroidRuntime(770):  at com.satyamdswt.agreader.Adapters$XmlCursorAdapterParser.parse(Adapters.java:219)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at com.satyamdswt.agreader.Adapters.createCursorAdapter(Adapters.java:168)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at com.satyamdswt.agreader.Adapters.createAdapterFromXml(Adapters.java:151)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at com.satyamdswt.agreader.Adapters.loadAdapter(Adapters.java:105)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at com.satyamdswt.agreader.Adapters.loadAdapter(Adapters.java:92)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at com.satyamdswt.agreader.ContactsListActivity.onCreate(ContactsListActivity.java:12)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    04-09 17:40:02.894: E/AndroidRuntime(770):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
    04-09 17:40:02.894: E/AndroidRuntime(770):  ... 11 more 
```

在 LogCat 中，您会看到：

```
com.satyamdswt.agreader/com.satyamdswt.agreader.ContactsListActivity 
```

我不知道为什么这发生了两次。

更多我在这里显示我的 Manifest.xml： **Manifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.satyamdswt.agreader"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.READ_CONTACTS"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".ContactsListActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>

         <activity android:name="PhotosListActivity"
                  android:label="@string/photos_list_activity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".AGRssReaderActivity">
             <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

请指导我错误在哪里。

**ContactListActivity.java**

```
public class ContactsListActivity extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.contacts_list);
        setListAdapter(Adapters.loadAdapter(this,R.xml.contacts ));
    }

} 
```

**编辑的** contacts.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<cursor-adapter  xmlns:android="com.satyamdswt.agreader"
     xmlns:app="http://schemas.android.com/apk/res/com.satyamdswt.agreader"
    android:layout_width="@layout/contact_item"
    app:selection="has_phone_number = 1 "
    app:uri="content://com.satyamdswt.contacts/contacts" >

     <bind
        app:from="display_name"
        app:to="@id/name" 
         app:as="string"/>

    <bind
        app:as="drawable"
        app:from="starred"
        app:to="@id/star" >
        <map
            app:fromValue="0"
            app:toValue="@android:drawable/star_big_off" />
        <map
            app:fromValue="1"
            app:toValue="@android:drawable/star_big_on" />
    </bind>
    <bind
        app:as="com.satyamdswt.agreader.ContactPhotoBinder"
        app:from="_id"
        app:to="@id/name" />

</cursor-adapter> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:02:20.783

我重新创建了你的错误。问题出在您的`res/xml/contacts.xml`文件中

更改此行：

```
xmlns:app="com.satyamdswt.agreader" 
```

到这一行：

```
xmlns:app="http://schemas.android.com/apk/res/com.satyamdswt.agreader" 
```

它是您应用的 XML 命名空间的正确格式：`http://schemas.android.com/apk/res/package_name`

**更新：**您不应该更改`<cursor-adapter>`标签中的其他参数。正确的形式：

```
<cursor-adapter xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/com.satyamdswt.agreader"
    app:uri="content://com.android.contacts/contacts"
    app:selection="has_phone_number=1"
    app:layout="@layout/contact_item"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:35:27.517

将 contacts_list.xml 放入您的布局文件夹 [http://developer.android.com/resources/samples/XmlAdapters/res/layout/contacts_list.html](http://developer.android.com/resources/samples/XmlAdapters/res/layout/contacts_list.html)

从这里下载文件并放入您的布局文件夹 [http://developer.android.com/resources/samples/XmlAdapters/res/layout/index.html](http://developer.android.com/resources/samples/XmlAdapters/res/layout/index.html)

**编辑**

我认为错误在于这个文件 [http://developer.android.com/resources/samples/XmlAdapters/res/xml/contacts.html](http://developer.android.com/resources/samples/XmlAdapters/res/xml/contacts.html)

请检查您的布局文件夹中是否有布局“contact_item”

你可以在这里找到它 - [http://developer.android.com/resources/samples/XmlAdapters/res/layout/contact_item.html](http://developer.android.com/resources/samples/XmlAdapters/res/layout/contact_item.html)

# jquery - 在 jQuery 中使用 Multiple .click 最高效的 Wyt

> ID：10073098
> 
> 赞同：1
> 
> 时间：2012-04-09T12:21:59.913
> 
> 标签：jquery, click

我有一个按预期工作的简单表格。这是一个多步骤表格，一次只显示一个问题。当用户点击一个输入字段（所有单选按钮）时，他们会被带到下一个问题，这取决于他们点击的内容，最后他们在最后一个问题之后得到一个提交按钮。
我目前有几个`.click`功能，而且效果很好。但是，我确信这不是最有效的方法，就写作和性能而言。有没有更有效的方法来使用多种`.click`功能？

```
$('.male').click(function() {
  $('#male').show();
  $('#gender').hide();
});

$('.female').click(function() {
  $('#female').show();
  $('#gender').hide();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T16:13:25.947

假设您的 HTML 具有逻辑结构，例如：

```
<form action="#" method="post">
    <fieldset>
        <legend>Question 1: gender</legend>
        <label for="m">Male</label>
        <input type="radio" name="gender" id="m" />
        <label for="f">Female</label>
        <input type="radio" name="gender" id="f" />
    </fieldset>
    <fieldset>
        <legend>Question title</legend>
        <!-- answer options -->
    </fieldset>
    <!-- other questions... -->
</form> 
```

那么我能想到的最简单的选择如下：

```
$('form').on('click','input',
              function(){
                  var fieldset = $(this).closest('fieldset');
                  fieldset.fadeOut(500,
                      function(){
                          fieldset.next('fieldset').fadeIn(500);
                      });
              });​ 
```

​<a href="http://jsfiddle.net/davidThomas/sQW79/1/" rel="nofollow">JS Fiddle 演示。

为了允许重新审视以前的问题，我建议按照以下方式进行调整：

```
<form action="#" method="post">
    <fieldset>
        <legend>Question 1: gender</legend>
        <label for="m">Male</label>
        <input type="radio" name="gender" id="m" />
        <label for="f">Female</label>
        <input type="radio" name="gender" id="f" />
        <div class="controls">
            <a href="#" class="prev">Previous</a>
            <a href="#" class="next">Next</a>
        </div>
    </fieldset>
    <!-- other questions... -->
</form> 
```

再加上jQuery：

```
$('fieldset').not($('fieldset:eq(0)')).hide();
$('.controls a.prev:first, .controls a.next:last').addClass('disabled');
$('form').on('click', 'input, a', function(e) {
    var target = e.target,
        targetType = target.tagName.toLowerCase(),
        targetClass = target.className,
        fieldset = $(this).closest('fieldset'),
        prev = fieldset.prev().length,
        next = fieldset.next().length;

    if (targetType == 'input' && next > 0) {
        fieldset.fadeOut(500, function() {
            fieldset.next('fieldset').fadeIn(500);
        });
    }
    else if (targetType == 'a') {
        if (targetClass == 'prev' && prev > 0) {
            fieldset.fadeOut(500, function() {
                fieldset.prev('fieldset').fadeIn(500);
            });
        }
        else if (targetClass == 'next' && next > 0) {
            fieldset.fadeOut(500, function() {
                fieldset.next('fieldset').fadeIn(500);
            });
        }
    }
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/sQW79/2/)。

参考：

1.  jQuery的东西：

    *   [`addClass()`](http://api.jquery.com/addClass/).
    *   [`closest()`](http://api.jquery.com/closest/).
    *   [`fadeIn()`](http://api.jquery.com/fadeIn/).
    *   [`fadeOut()`](http://api.jquery.com/fadeOut/).
    *   [`next()`](http://api.jquery.com/next/).
    *   [`not()`](http://api.jquery.com/not/).
    *   [`on()`](http://api.jquery.com/on/).
    *   [`prev()`](http://api.jquery.com/prev/).
2.  原生 JavaScript 的东西：

    *   [`element.className`](https://developer.mozilla.org/en/DOM/element.className).
    *   [`e.target`](https://developer.mozilla.org/en/DOM/event.target).
    *   [`element.tagName`](https://developer.mozilla.org/en/DOM/element.tagName).
    *   [`toLowerCase()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/toLowerCase).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:45:49.810

由于事件冒泡，您可以这样做：

```
​$('body').on('click',function(e){
    switch ($(e.target).attr('class')){
        case "male":
            $('#male').show();
            $('#gender').hide();
            break;
        case "female":
            $('#female').show();
            $('#gender').hide();
            break;
        default:
            alert("default function!");
            break;            
    }
});​​​​​​ 
```

这是一个演示：http: [//jsfiddle.net/748sE/2/](http://jsfiddle.net/748sE/2/)

当然，默认功能将在您单击该页面上尚未捕获的任何内容上返回...

顺便说一句，您可以替换`$(e.target).attr('class')`为`e.target.className`优化它，就像大卫托马斯在他的回答中所做的那样......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:37:20.797

因为您`#male`和`#female`元素都需要在单击它们时运行代码，所以它们都需要自己的单击处理程序。但是，您可以通过将它们都包含在同一个选择器中并调用单个函数来处理它们来简化此代码。试试这个：

```
$(".male, .female").click(showDivs);

function showDivs() {
    if ($(this).hasClass("male")) {
        $("#male").show();
    }
    else {
        $("#female").show();
    }
    $("#gender").hide();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T12:45:19.670

您可以将所有问题归类为“问题”，然后每个答案都可以有一个对应于您要显示的即将到来的分支的类（或其他）属性的 id。

因此，每个响应都将包含接下来*要为您*显示的内容的名称，并且您将只能拥有一个单击处理程序。

IE：

```
$("input").click(function() {
    $(".question").hide();
    var itemToShow = $(this).attr("id");
    //alert(itemToShow);
    if ($("."+itemToShow).length > 0) {
        $("."+itemToShow).show("normal");
    } else {
        $(".finale").show("normal");
    }
}); 
```

您可能需要稍微尝试一下，直到控件按您的意愿工作。这是一个[可以](http://jsfiddle.net/xwz24/)解决的问题。

更新：这是最新的[小提琴演示](http://jsfiddle.net/xwz24/3/)。

# java - 在构造函数中实现了listner的（java / android）类是否应该具有与listner动作相关的静态方法？

> ID：10073099
> 
> 赞同：0
> 
> 时间：2012-04-09T12:22:01.303
> 
> 标签：java, android, static-methods

好的，所以我会尽量让这个问题更简单一点。

这个问题的核心更多地是关于何时使用静态方法，但是在通过什么是静态方法与实例方法的要点理论概念之后，我想要一个更实用/实施建议，使用如下所述的现实世界问题。

1.  我有一个处理设置和获取共享首选项的 andoid 类（MyPreferences）。
2.  我在 MyPreferences 的构造函数中注册了一个自定义侦听器，它显示每次更改时更改的首选项。
3.  构造函数也有共同的东西： settings = ctx.getSharedPreferences(MyConfig.NAME_SHARED_PREFERENCES, 0); 编辑器 = settings.edit(); settings.registerOnSharedPreferenceChangeListener(listener);

现在正如我之前提到的，MyPreference 有 10 个函数可以获取/更新共享首选项键...

```
public static void setPrefsIsAppEnabled(Boolean boolValue) {
        editor.putBoolean(MyConfig.PREFS_IS_APP_ENABLED, boolValue);
        editor.commit();            
}

public static boolean getPrefsIsAppEnabled()
{
    return settings.getBoolean(MyConfig.PREFS_IS_APP_ENABLED, false);
} 
```

现在我使用静态方式（即 MyPreferences.getPrefsIsAppEnabled()

好吧，这显然会引发错误，因为没有调用具有共享首选项对象的初始化的构造函数。

我的问题：在访问 getter 和 setter 方法之前，让所有这 10 个方法都非静态并在我的项目中实例化 MyPreference 是否是一个更好的逻辑，或者我应该将构造函数中存在的代码移动到所有 setter/getter 函数中并重复在调用 MyPreferences 类的方法之前，它无处不在。请通过说明您建议该解决方案的原因来帮助我更清楚地理解。

我知道这是一个非常n00b的问题。请原谅我。我对 Java 很陌生，所以只是建立我的概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:34:59.413

您的方法显然是有状态的（因为它们需要访问编辑器字段），因此将它们实现为静态方法并不是一个好主意。相反，您应该使用类实例。（静态方法通常是无状态的效用函数，即当输入相同时它们的结果总是相同的）。

您可以每次都实例化一个新对象或实现[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)。单例类只能实例化一次。提供了一个静态方法 (getInstance) 以便访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:26:16.870

如何使您的类`single instance`并使所有方法非静态并创建获取其实例的方法..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:19:24.003

也许您不应该为首选项定义 getter/setter 方法：它们似乎是多余的。需要访问首选项的类可以调用 standard`ctx.getSharedPreferences(...)`等。

您在标题中声称侦听器与静态方法相关联，但我认为从您所展示的内容来看并非如此。除非侦听器使用您的 getter/setter，否则它应该只使用标准方式来访问首选项。

更一般地说，我不确定您是否需要 MyPreferences 类。也许您可以在另一个类的某个构造函数或方法中注册侦听器。我还没有看到你的完整应用程序，所以我不确定它是否合适。查看您调用的位置`new MyPreferences()`，看看是否有一种方法可以代替。

顺便说一句，我考虑过使用*静态初始化块*来初始化`settings`and `editor`，但这不起作用，因为`getSharedPreferences`需要一个 Context。

# ruby-on-rails - omn iauth 身份验证/失败消息=invalid_credentials

> ID：10073101
> 
> 赞同：2
> 
> 时间：2012-04-09T12:22:12.220
> 
> 标签：ruby-on-rails, omniauth, linkedin

我将 omiauth 与 ROR 一起使用，但出现以下错误，

omn​​iauth 身份验证/失败消息=invalid_credentials，

我能够连接到linkedin，在提供页面重定向发生的所有内容后，我被要求提供用户凭据，并且出现上述错误。

这是我的回调：

```
class SessionsController < ApplicationController
        def create
          auth = request.env["omniauth.auth"]
          user = User.find_by_provider_and_uid(auth["provider"], auth["uid"]) || User.create_with_omniauth(auth)
          session[:user_id] = user.id
          redirect_to root_url, :notice => "Signed in!"
        end

        def destroy
          session[:user_id] = nil
          redirect_to root_url, :notice => "Signed out!"
        end
end 
```

而且 routes.rb 是

```
Lovelinkedin::Application.routes.draw do
  root :to => "users#index" 

  match "/auth/:provider/callback" => "sessions#create"
  match "/auth/failure" => "users#index"
  match "/signout" => "sessions#destroy", :as => :signout

end 
```

我的omniauth.rb是

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :linkedin, 'xxxxx', 'ffffffff'
end 
```

请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:30:02.543

您的 OmniAuth.config.full_host 在您的 omniauth.rb 文件中等于什么？

如果它重定向到一个安全站点，那么它应该是这样的：“https://#{SITE_BASE}”

否则，如果它不是一个安全的站点，则将其删除

# couchdb - 有人知道 YCSB 中 CouchDB 的数据库层吗？

> ID：10073105
> 
> 赞同：1
> 
> 时间：2012-04-09T12:22:40.743
> 
> 标签：couchdb, benchmarking, ycsb

我想使用 YCSB 来检查 CouchDB。但我发现 CouchDB 没有 DB 层。YCSB 中有 CouchDB 的 DB 层吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-06T16:25:53.340

是的，我已经为 kundera-couchdb 基准测试编写了它，你可以在这里找到它。 [https://github.com/impetus-opensource/Kundera/blob/trunk/test/benchmark/ycsb/src/main/java/com/impetus/kundera/ycsb/benchmark/CouchDBNativeClient.java](https://github.com/impetus-opensource/Kundera/blob/trunk/test/benchmark/ycsb/src/main/java/com/impetus/kundera/ycsb/benchmark/CouchDBNativeClient.java)

请让我知道你遇到任何问题。

# maven - 将 applicationcontext.xml 文件放在 jar 中的位置（spring 项目）

> ID：10073109
> 
> 赞同：0
> 
> 时间：2012-04-09T12:23:03.080
> 
> 标签：maven, jar, pom.xml

我创建了一个春季项目。我需要创建这个项目的 jar 文件。我可以创建一个 jar 文件，但是当我打开 jar 时，applicationcontext.xml 放在外面。但是我需要将 applicationcontext.xml 准确地放置在 jar 中，以便加载它并且我可以在 jar 中使用 spring bean。

如何在 pom.xml 中指定 applicationcontext.xml 应该放在 META-INF 文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:12:30.890

我把它放在这里-

src/main/资源/

它奏效了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:10:12.417

您需要将 applicationcontext.xml 文件放在 maven 项目的 src/main/resources/META-INF 文件夹下。

# python - python中的巨大整数文件排序

> ID：10073112
> 
> 赞同：-4
> 
> 时间：2012-04-09T12:23:42.033
> 
> 标签：python

我想创建一个整数文件（大小超过 2 GB）（每个超过 64 位）并有效地对文件进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:09:13.357

1）将其划分为可以在内存中有效排序的大文件。
2）将这些排序的文件合并到一个文件中。

您在使用模块功能的答案 [ [1](https://stackoverflow.com/a/1001625/448474) ] 中找到的详细信息。`heapq``merge`

更好的是使用一半的内存然后冒险交换。

我看不出这个问题有什么问题。这只是问题原理的一个简单示例。

# javascript - 如何使用 JSON 对象填充 HTML 组合框

> ID：10073116
> 
> 赞同：2
> 
> 时间：2012-04-09T12:24:11.753
> 
> 标签：javascript

我正在使用 jsp 创建一个用户注册表单，其中有一个从组合框中选择状态的选项。我正在使用一个简单的 html 组合框，但我从 Web 服务接收状态作为 json 对象。那么如何填充带有 json 对象的组合框。

状态Json如下，

```
{"States":[{"id":"1","stateName":"Alabama","code":"AL"},
{"id":"4","stateName":"Arkansas","code":"AR"},
{"id":"8","stateName":"Delaware","code":"DE"}]} 
```

我的 Javascript 函数是，

```
function getStates(){    
url = WSPath;
response=initiateRequest(url);} 
```

我的 HTML 组合框是`<select name="State">`

我需要用上面的 json 对象填充组合框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T12:35:18.537

纯js：

```
var select = document.createElement("select");
var obj = JSON.parse(response);

for (var i=0; i < obj.States.length; i++)
{
  var option = document.createElement("option");
  option.id = obj.States[i].id;
  option.value = obj.States[i].code;
  option.innerHTML = obj.States[i].stateName;
  select.appendChild(option);
} 
```

根据您的需要调整 id、value 和 innerHTML。

# iphone - 当我通过 iPhone 的 Graph-API 发布到 Facebook 时，应用程序崩溃

> ID：10073117
> 
> 赞同：0
> 
> 时间：2012-04-09T12:24:14.703
> 
> 标签：iphone, facebook-graph-api, facebook-oauth

我目前正在集成这个 API [https://github.com/reallylongaddress...book-Graph-API](https://github.com/reallylongaddress...book-Graph-API)

集成一切正常，我正在使用“发布”方法将内容发布到人们的墙上，一切正常。原始 API 中的代码也是如此，但下面是我的修改版本...

```
NSMutableDictionary *variables = [NSMutableDictionary dictionaryWithCapacity:6];
[variables setObject:strMessageFb forKey:@"message"];
[variables setObject:@"http://fundaciomiro-bcn.org" forKey:@"link"];
[variables setObject:@"Joan Miró" forKey:@"name"];
[variables setObject:@"I am using Joan Miró's iPhone App, The Ladder of Escape, that allows me to take a tour through the artist's Barcelona. Download it now!" forKey:@"description"];
[variables setObject:@"http://nostrostudio.com/clientes/miro/ICONO_512x512.png" forKey:@"picture"];
[variables setObject:@"L'escala de l'evasió" forKey:@"caption"];

FbGraphResponse *fb_graph_response = [fbGraph doGraphPost:@"me/feed" withPostVars:variables];
NSLog(@"postMeFeedButtonPressed:  %@", fb_graph_response.htmlResponse); 
```

但我的问题是，

它在模拟器上完美运行。但是当我尝试在真实设备上运行时，我可以运行这个脚本两次。第三次崩溃了。我觉得它与字典有关。

有什么帮助吗？

[此外，此 Post 方法不适用于 IOS 5.0 模拟器。当我尝试发布某些内容时，应用程序会崩溃，但内容已成功发布在 Facebook 上。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:34:05.100

您没有使用官方 SDK，即[FB iOS SDK](https://github.com/facebook/facebook-ios-sdk)

您也可以发布一些崩溃日志...

# iphone - iOS 5 在现有应用程序中实现带有情节提要的页面控制器

> ID：10073118
> 
> 赞同：6
> 
> 时间：2012-04-09T12:24:16.137
> 
> 标签：iphone, objective-c, ios, storyboard, uipagecontrol

我有一个需要显示一系列图表的应用程序（使用 Core Plot）。我希望这些图表中的每一个都显示在自己的视图中，最好使用分页控制器。我有 8 个图表。

有人可以将我引导到一个资源，该资源显示如何在 iOS 5 中使用故事板实现类似的东西？我似乎根本找不到任何可以用故事板解释这一点的东西。

谢谢，

杰克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T21:14:21.367

这很容易。您只需要将 UIScrollView 拖到控制器中，选择它，然后选中*“启用分页”*选项。您还可以拖入一个“页面控件”并将自己设置为 UIScrollViewDelegate 协议委托，并在 UIScrollView 调用该`-scrollViewDidScroll:`方法时对其进行更新。

不要忘记通过 Control+Drag 从 UIScrollView 设置您的 UIScrollView 的委托到您的 ViewController。

[UIScrollView 上的精彩教程](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)（向下滚动到“使用 UIScrollView 进行分页”）。
[Apple 的](https://developer.apple.com/library/ios/documentation/windowsviews/conceptual/UIScrollView_pg/ScrollViewPagingMode/ScrollViewPagingMode.html)带有[PageControl](https://developer.apple.com/library/ios/samplecode/PageControl/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007795)示例的文档。

# macos - 在 mac osx lion 上安装并启动 jboss 6

> ID：10073120
> 
> 赞同：0
> 
> 时间：2012-04-09T12:24:21.987
> 
> 标签：macos, jakarta-ee, jboss6.x

我已经在我的 mac 上安装了 jboss 服务器，但是，当我启动服务器时我遇到了一些问题

我进入 jboss_home/bin 目录并执行命令：./run.sh 来启动服务器。

它给了我：“run.sh：缺少所需文件：/jboss-6.0.0.Final/bin/run.jar”

谁能告诉我那是什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:50:19.297

你想从你的 jboss-6.0.0.Final 目录运行它，所以

jboss-6.0.0.Final > bin/run.sh

# c# - 如何从 C# 中的表迭代中获取值

> ID：10073122
> 
> 赞同：-2
> 
> 时间：2012-04-09T12:24:27.790
> 
> 标签：c#, asp.net, textbox, iteration

我是编程新手，在 asp.net 工作。
我用迭代制作了一个表，这是我的代码：

```
 int row2 = Convert.ToInt32(Request.QueryString["coll"]);
        Session.Add("sumColl", row2);
        TableRow tr2;
        TableCell tc2;
        TextBox tb2;
        RequiredFieldValidator rfv;

        for (int j = 0; j < row2; j++)
        {
            tr2 = new TableRow();
            tc2 = new TableCell();
            tc2.Controls.Add(new LiteralControl((j + 1).ToString()));
            tr2.Cells.Add(tc2);
            tc2 = new TableCell();
            tb2 = new TextBox();
            tb2.ID = "name" + (j + 1).ToString();
            btn = new Button();
            btn.ID = "search" + (j + 1).ToString();
            btn.Text = "Search";
            btn.OnClientClick = "javascript:openChild('popupA.aspx?dest=" + tb2.ID + "','win2')";
            btn.CausesValidation = false;
            rfv = new RequiredFieldValidator();
            rfv.ID = "rfvR" + (j + 1).ToString();
            rfv.ControlToValidate = tb2.ID;
            rfv.Display = ValidatorDisplay.Dynamic;
            rfv.ErrorMessage = "**";
            tc2.Controls.Add(tb2);
            tc2.Controls.Add(btn);
            tc2.Controls.Add(rfv);
            tr2.Cells.Add(tc2);
            tblA.Rows.Add(tr2);
        } 
```

我想从数据库中获取值，其中输入来自上表中的文本框。
得到值后，我想对它们求和。
问题是我不知道如何从上面的迭代中获取输入。
我做了类似下面的代码。

```
 int sumsColl = Convert.ToInt32(Session["sumColl"]);
        double sum_coll = 0;

        for (int j = 0; j < sumsColl; j++)
        {
            TextBox tb2 = new TextBox();
            tb2 = this.Page.FindControl("name" + (j + 1).ToString()) as TextBox;
            if (tb2 != null)
            {                    
                string sqlCol2 = "select p from somewhere where nameColl = '" + tb2.Text + "'";
                DataTable dtcol2 = db.setDataTableSQL(sqlCol2);
                for (int i = 0; i < j; i++)
                {
                   Session.Add("P" + (j + 1).ToString(), dtcol2.Rows[0]["p"]);
                }

                sum_coll = sum_coll + Convert.ToDouble(Session["P"+(j + 1).ToString()]);
            }

        }

        if (sum_coll < value)
        {
            Msg.Text = "Error . " + Msg.Text;
            valid = false;
        } 
```

我知道这是一团糟，请帮助我，如果您需要其他线索，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:32:08.933

我不知道你想做什么。试试 DataGrid 或 DataGridView、ListView 控件来显示数据。你的代码看起来很复杂。那里有专门显示表格数据的控件。

# qt - QAbstractTableModel 数据返回html代码显示

> ID：10073124
> 
> 赞同：2
> 
> 时间：2012-04-09T12:24:45.700
> 
> 标签：qt, qabstractitemmodel, qabstracttablemodel, qabstractlistmodel

我希望我的 AbstracttableModel 子类`data()`方法返回 html 即

```
PreText<b>Text</b>PostText 
```

并且此文本必须以 html 格式显示 int 表： PreText **Text** PostText

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T19:02:40.407

您可以为将显示 html 的视图创建一个委托。

```
class HtmlDelegate : public QItemDelegate {
public:
    HtmlDelegate(QObject *parent = 0) : QItemDelegate(parent) {}

    // This function is only called to paint the text
    void drawDisplay(QPainter *painter, const QStyleOptionViewItem &option,
                     const QRect &rect, const QString &text) const
    {
        QTextDocument doc;

        // Since the QTextDocument will do all the rendering, the color,
        // and the font have to be put back inside the doc
        QPalette::ColorGroup cg = option.state & QStyle::State_Enabled
                                  ? QPalette::Normal : QPalette::Disabled;
        if (cg == QPalette::Normal && !(option.state & QStyle::State_Active))
            cg = QPalette::Inactive;
        QColor textColor = option.palette.color(cg, QPalette::Text);
        doc.setDefaultStyleSheet(QString("body { color: %1}")
                                 .arg(textColor.name()));
        doc.setDefaultFont(option.font);
        doc.setHtml(text);
        doc.setDocumentMargin(1); // the default is 4 which is too much

        painter->save();
        painter->translate(rect.topLeft());
        doc.drawContents(painter);
        painter->restore();
    }

    // bold and underlined characters take more space
    // so you have to redefine this function as well
    // (if you have a checkbox or an icon in the item, you will have
    // to include their size to the returned value)
    QSize sizeHint(const QStyleOptionViewItem &option,
                   const QModelIndex &index) const
    {
        QTextDocument doc;
        doc.setDefaultFont(option.font);
        doc.setHtml(index.data(Qt::DisplayRole).toString());
        doc.setDocumentMargin(1);
        return doc.size().toSize();
    }
}; 
```

然后将其分配给视图：

```
view->setItemDelegateForColumn(0, new HtmlDelegate(view)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-17T11:15:42.710

alexisdm 答案工作正常，但也许使用 a`QLabel`比它更轻`QTextDocument`，它也很聪明：

```
class HtmlDelegateWithLabel : public QItemDelegate 
{
public:
    HtmlDelegateWithLabel(QObject *parent = 0) : QItemDelegate(parent) 
    {
    }

    inline void setupLabel( QLabel& label, const QModelIndex &index ) const
    {
        QString txt = index.model()->data( index, Qt::DisplayRole ).toString();
        label.setText( txt );
    }

    // This function is only called to paint the text
    void drawDisplay(QPainter *painter, const QStyleOptionViewItem &option,
                     const QRect &rect, const QString &text) const
    {
        QLabel label;
        setupLabel( label, option.index );
        label.setEnabled( option.state & QStyle::State_Enabled );
        label.setAttribute(Qt::WA_TranslucentBackground);

        painter->save();
        painter->translate(rect.topLeft());
        label.resize( rect.size() );
        label.render( painter );
        painter->restore();
    }

    QSize sizeHint(const QStyleOptionViewItem &option,
                   const QModelIndex &index) const
    {
        QLabel label;
        setupLabel( label, index );
        return label.sizeHint();
    }
}; 
```

此外，文本在行上垂直对齐，使用`QTextDocument`.

# javascript - 动态javascript日期选择器

> ID：10073131
> 
> 赞同：0
> 
> 时间：2012-04-09T12:25:04.190
> 
> 标签：javascript, jquery, html, css, datepicker

我有一个用于动态 javascript 日期选择器的脚本，取自[此处](http://www.monkeyphysics.com/mootools/script/2/datepicker)。请向下滚动到我想要实现**的按元素切换，**但它不起作用

```
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
     <SCRIPT type="text/javascript" src="js/jquery.min.js"></SCRIPT> 
```

**编辑：我添加了以下 mootools 脚本**

```
<script src='http://cdnjs.cloudflare.com/ajax/libs/mootools/1.3.2/mootools-yui-
compressed.js'
type='text/javascript'></script>

      <SCRIPT type="text/javascript" src="datepicker.js"></SCRIPT>
      <SCRIPT type="text/css" src="datepicker.css"></SCRIPT>
      <SCRIPT type="text/css" src="datepicker_vista.css"></SCRIPT>
</head>
 <body>    
 <script language="JavaScript">
   window.addEvent('load', function() {
    new DatePicker('.demo_allow_empty', {
    pickerClass: 'datepicker_dashboard',
    allowEmpty: true
 });
  });
 </script>
<label>Datepicker starting at and allowing no value:</label>
<input name='date_allow_empty' type='text' value='' class='date demo_allow_empty' />
</body>
</html> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:28:52.750

似乎它需要 mootools，我在您的源代码中看不到任何 mootools 脚本标签。它与jQuery无关。

编辑：这是一个例子：

```
<script src='http://cdnjs.cloudflare.com/ajax/libs/mootools/1.3.2/mootools-yui-compressed.js'
type='text/javascript'></script> 
```

把它放在日期选择器脚本之前

# c++ - 每1分钟后如何在c ++中执行特定代码

> ID：10073136
> 
> 赞同：3
> 
> 时间：2012-04-09T12:25:24.877
> 
> 标签：c++, scheduled-tasks

我需要做一些事情（我称之为调度程序），每分钟检查一次系统的时间，如果时间发生变化，假设它是 17:52，下一刻是 17:53，所以它会在 17:53 调用一个函数日志更新

我怎么做这只是我不知道互斥锁和所有人。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T12:39:14.900

我不确定我是否理解要求，但您的问题是“*如何在每 1 分钟后在 c++ 中执行特定代码*”，因此，在 c++11 中您可以这样做：

```
#include <thread>
#include <chrono>

int main() {

  while (true) {
    std::this_thread::sleep_for(std::chrono::seconds(60));
    // call your c++ code
  }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-07T11:16:18.013

如果您希望任务的执行独立于主程序流程，请考虑多线程。

这个例子在 C 中，应该也适用于 C++ 注意有些人认为我过度使用指针，我同意，特别是多线程，它会导致不安全的线程，从而导致数据损坏，甚至更糟，分段错误。然而，据我所知，这是将参数传递给线程的唯一方法。

```
#include <pthread.h>
int main(int argc, char *argv[]) {
  pthread_t thread1;
  int variables=10;
  pthread_create( &thread1, NULL, scheduler, (void*)&variables);
  while(1){
    .... do stuff as main program.
  }
  return 0;
}

void *scheduler (void* variables) {
  int vars;
  int* p_vars = (int*) variables;
  vars = *p_vars;
  while (1){
    .. do scheduler stuff
    sleep (vars);
  }
} 
```

# python - 如何同时获取元组的第一个和最后一个元素

> ID：10073137
> 
> 赞同：9
> 
> 时间：2012-04-09T12:25:26.573
> 
> 标签：python, indexing, tuples, slice

我需要获取任意大小的 numpy.ndarray 的第一个和最后一个维度。

如果我有`shape(A) = (3,4,4,4,4,4,4,3)` 我的第一个想法，`result = shape(A)[0,-1]`但这似乎不适用于元组，为什么不呢？

有没有比这更简洁的方法

```
s=shape(A)
result=(s[0], s[-1]) 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-09T12:28:32.893

我不知道怎么了

```
(s[0], s[-1]) 
```

另一种选择是使用`operator.itemgetter()`：

```
from operator import itemgetter
itemgetter(0, -1)(s) 
```

不过，我不认为这会更好。（如果不计算实例化`itemgetter`实例所需的时间可能会稍微快一点，如果经常需要此操作，可以重复使用。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-09T12:28:40.177

```
s = (3,4,4,4,4,4,4,3)
result = s[0], s[-1] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-06T15:29:17.787

这么晚才遇到；但是，只是为了添加如前所述的非索引方法。

元组解包可以很容易地用于获取第一个和最后一个元素。注意：下面的代码使用特殊的星号 '*' 语法，它返回中间部分的列表，其中 a 和 c 存储第一个和最后一个值。

前任。

```
A= (3,4,4,4,4,4,4,3)
a, *b, c = A
print((a, c)) 
```

输出 (3, 3)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T12:36:45.023

如果您使用的是 numpy 数组，那么您可以这样做

```
s = numpy.array([3,4,4,4,4,4,4,3])
result = s[[0,-1]] 
```

其中`[0,-1]`是第一个和最后一个元素的索引。它还允许更复杂的提取，例如`s[2:4]`

# php - 从 PHP 返回的 JQuery 链接按钮不起作用，但如果没有则起作用

> ID：10073140
> 
> 赞同：0
> 
> 时间：2012-04-09T12:26:06.603
> 
> 标签：php, json, jquery

我有一个在 jquery 中不起作用的按钮。使用 json 对象将一个按钮从 php 传递到 Jquery。我已经删除了所有其他代码，只是测试按钮以尝试解决这个问题。我创建了相同的链接并将其放在我的 php.ini 页面上。当点击链接时，会出现一个警报并且有效。

在同一页面上，我有一个附加按钮，它是同一个按钮，但是这个按钮已经从 PHP 通过 json 返回到 Jquery 并附加到 div。此链接/按钮不起作用？为什么是这样？两者看起来都一样！

希望有人可以就这里发生的事情提出建议

谢谢

从 PHP 返回的按钮

```
 //Jquery basic test button for functionality (works if link button is already on HTML page)
    $("[href='#test']").click(function() {      
    alert("has been clicked");
    });

//JQuery extract of my code 

var content;
$.each(data, function(i, item) {
content += item;

});
$(content).appendTo('#theframe');
},'json'); 
```

也试过

```
$.each(data, function(i, item) {
content += item;

});
$('#theframe').html(content);
},'json');

//php returned
$json[] = '<a href="#test">View Post</a>';
echo json_encode($json);

//php button on page
<a href="#test">View Post</a> 
```

谢谢

在所有帖子的帮助下解决了，谢谢！@Anthony 的示例添加了框架 $('#theframe').on('click', '[href="#test"]', function(e) { alert('has been clicked'); });

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:32:10.583

您将需要使用 jQuery on() 或 delegate() 函数将 click 事件添加到动态添加的新页面元素（在页面加载后）。

如果您使用的是 jQuery 1.7 或更高版本，您应该使用 on()：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

如果您使用的是旧版本的 jQuery，请使用委托：[http ://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:33:29.173

该`.click()`函数仅将事件处理程序添加到代码运行时存在的元素，因此不会影响以后动态添加的任何元素。解决这个问题的最简单的解决方案是设置事件委托，使用[`.on()`](http://api.jquery.com/on/)（jQuery 1.7+）或[`.delegate()`](http://api.jquery.com/delegate/)（1.7 之前的）函数。该`.on()`示例如下所示：

```
$('body').on('click', '[href="#test"]', function(e) {
    alert('has been clicked');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:33:50.287

它不起作用的原因是您的文档就绪功能仅触发一次。这意味着在您的第二个按钮通过 ajax 加载后，没有附加事件处理程序。

尝试使用“on”或“live”：

```
$("body").on("click", a[href="#target"], function(event){
alert("has been clicked");
}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/) <- “on”的文档

[http://api.jquery.com/](http://api.jquery.com/) <- 你最喜欢的新网站！

希望这可以帮助！

# matlab - 指定非线性方程组的正解

> ID：10073146
> 
> 赞同：0
> 
> 时间：2012-04-09T12:26:33.220
> 
> 标签：matlab

我想在matlab中求解一个非线性方程组，使得解是正的。我可以在 matlab 中指定我想要未知变量的正解吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:31:42.550

[是的，您可以使用以下符号](http://www.mathworks.co.uk/help/toolbox/symbolic/syms.html)定义变量：

```
syms x y positive 
```

并且这些变量被限制为正数。定义变量约束后，请参阅[fsolve](http://www.mathworks.co.uk/help/toolbox/optim/ug/fsolve.html)以了解如何找到解决方案。

# php - 从 mySQL 读取浮点数

> ID：10073151
> 
> 赞同：2
> 
> 时间：2012-04-09T12:26:44.950
> 
> 标签：php, mysql, floating-point, mysql-error-1064

我有两个相等的浮点变量，我通过 PHP 检索它们并减去它们。结果等于 (7.105427357601E-15) 我试图更改为双精度或十进制，但均无效。这是我在 PHP 中使用的：

```
$giftcard_balance = $giftcard['balance'];
$total = $product['price'];

$total -= $giftcard_balance;
echo $total; 
```

这里不是显示 0，而是显示 (7.105427357601E-15)

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:21:27.407

在处理价格和账户余额时，您会发现 DECIMAL(6, 2) 比 FLOAT 更容易处理。如果您在使用 DECIMAL 数据类型时遇到同样的问题，请发布一个具体示例。

使用`round()`或类似是一个非常糟糕的主意，因为它只是掩盖问题，而不是解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:33:49.363

为了消除浮点数的不准确性，例如，您可以使用数字格式。

```
$a = 7.105427357601E-15;
$b = number_format($a, 2);
echo $a , "\n", $b , "\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:32:43.623

也许您正在寻找 php`intval` [函数](http://php.net/manual/en/function.intval.php)。

或者也许`round` [功能](http://php.net/manual/en/function.round.php)。

# python - git log --follow，gitpython方式

> ID：10073154
> 
> 赞同：39
> 
> 时间：2012-04-09T12:27:07.870
> 
> 标签：python, git, gitpython

我正在尝试访问单个文件的提交历史记录，如下所示：

```
git log --follow -- <filename> 
```

我必须使用[gitpython](https://github.com/gitpython-developers/GitPython)，所以我现在正在做的是：

```
import git 
g = git.Git('repo_dir') 
hexshas = g.log('--pretty=%H','--follow','--',filename).split('\n') 
```

然后我构建提交对象：

```
repo = git.Repo('repo_dir')
commits = [repo.rev_parse(c) for c in r] 
```

有没有办法以更 gitpython-ic 的方式做到这一点？我都尝试了`commit.iter_parents()`and `commit.iter_items()`，但他们都依赖`git-rev-list`，所以他们没有`--follow`选择。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-11-19T12:57:45.310

例如，

有范围时间：

```
g = git.Git("C:/path/to/your/repo") 
loginfo = g.log('--since=2013-09-01','--author=KIM BASINGER','--pretty=tformat:','--numstat')
print loginfo 
```

输出：

```
3       2       path/in/your/solutions/some_file.cs 
```

您可以看到添加的行、删除的行以及具有这些更改的文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-02-08T11:07:15.483

我建议您改用**[PyDriller](https://github.com/ishepard/pydriller)**（它在内部使用 GitPython）。更容易使用：

```
for commit in RepositoryMining("path_to_repo", filepath="here_the_file").traverse_commits():
    # here you have the commit object
    print(commit.hash) 
```

# silverlight - 如果 .xap 文件的版本有任何变化，请下载 .Xap

> ID：10073162
> 
> 赞同：1
> 
> 时间：2012-04-09T12:28:04.267
> 
> 标签：silverlight

我在 Silverlight 中使用 MEF 来动态下载 .xap 文件。我只想下载一次 .xap 文件，然后我只想在 .xap 文件的版本发生任何变化时才下载 .xap 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:31:51.977

你描述的是正常行为。只有在以下情况下才会下载 .xap 文件：

1.  服务器上的 .xap 文件发生了变化。
2.  用户清除了他们的缓存，因此他们的机器上不再有该文件。

我们已经看到在发生更改时*未*下载 .xap 文件的情况。

您看到什么让您认为每次都在下载 .xap 文件？

缓存中的上次访问时间仅显示上次*运行*应用程序的时间，而不是上次下载 .xap 文件的时间。

# php - 在 PHP 中创建时为空对象

> ID：10073163
> 
> 赞同：0
> 
> 时间：2012-04-09T12:28:07.480
> 
> 标签：php, oop, kohana, cassandra

我正在使用 Kohana MVC 框架。我想添加一个可与 PHPCassa 对象（Cassandra NoSQL）一起使用的模块。

问题是，当我创建对象时，我拥有它的所有属性，并且可以在构造中与它进行交互，但是当我从不同的地方创建它时，它会作为空对象返回。

我确信我错过了一些东西，因为我对 OOP 很陌生。请帮帮我。

模块文件

```
<?php

// Loading cassandra libraries, tried to load them here, did not help
//require 'application/modules/cassandra/lib/connection.php';
//require 'application/modules/cassandra/lib/columnfamily.php';

class Cassandra {

    function __construct($columnFamily) {
        // Loading cassandra libraries
        require 'application/modules/cassandra/lib/connection.php';
        require 'application/modules/cassandra/lib/columnfamily.php';

        $pool = new ConnectionPool('localhost');
        $cf = new ColumnFamily($pool, $columnFamily);

        // print_r($cf); // This will print object with all the proporties that I can use

        return $cf;
    } 
```

将加载模块并创建空对象的类

```
<?php

class Controller_Main extends Controller {

    public function action_index() {
        $a = new Cassandra('timeline');
        echo '<pre>';
        print_r($a); // This will print out empty Cassandra object
        die();

        //$this->response->body('hello, world!');
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:40:54.583

*ConnectionPool*和*ColumnFamily*仅在构造函数中使用，因此一旦完成，它们将不再存在。此外，当使用**new**调用 PHP 构造函数时，它会返回一个新实例，而不是`return`您尝试的值。也许尝试这样的事情：

```
<?php

require_once 'application/modules/cassandra/lib/connection.php';
require_once 'application/modules/cassandra/lib/columnfamily.php';

class Cassandra {

    public $pool = null;
    public $cf = null;

    function __construct($columnFamily) {

        $this->pool = new ConnectionPool('localhost');
        $this->cf = new ColumnFamily($this->pool, $columnFamily);

        return $this;

    }
} 
```

尝试这样做，然后`var_dump()`在**$a**上查看整个 Cassandra 对象或在**$a->cf**上查看 ColumnFamily 对象。应该告诉你你需要什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:46:49.310

做错了，你在构造函数中创建了两个对象，一个是 `Cassandra`对象，另一个是 `ColumnFamily`显然`new Cassandra('timeline');`将返回`Cassandra`对象。

试试这种方式：

```
class Cassandra {

    static function LoadCassandra($columnFamily) {
        // Loading cassandra libraries
        require 'application/modules/cassandra/lib/connection.php';
        require 'application/modules/cassandra/lib/columnfamily.php';

        $pool = new ConnectionPool('localhost');
        $cf = new ColumnFamily($pool, $columnFamily);

        return $cf;
    } 
```

并使用它：

```
class Controller_Main extends Controller {

    public function action_index() {
        $a =  Cassandra::LoadCassandra('timeline');
        echo '<pre>';
        print_r($a); // This will print out empty Cassandra object
        die();

        //$this->response->body('hello, world!');
    }

} 
```

# jquery - jquery检测div滚动条到达终点

> ID：10073166
> 
> 赞同：1
> 
> 时间：2012-04-09T12:28:30.833
> 
> 标签：jquery

当下面的代码运行时浏览器挂起。这是我的代码

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
<script src="Scripts/CenterDiv.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#Main').center();
        $('#Main').bind('scroll', function () {
            if ($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {
                //var new_div = '<div class="new_block"></div>';
                //$('.main_content').append(new_div.load('/path/to/script.php'));
                alert("end");
            }
        });

    });
</script>
<style type="text/css">
.centered
{
    height:640px;
    width:700px;
    border-color:Black;
    border-width:2px;
    border-style:solid;
    overflow:scroll
}
</style>
</head>
<body>
<form id="form1" runat="server">
<div id="Main" class="centered">
    <img src="images/img1.jpg" />
</div>
</form>
</body>
</html> 
```

实际上导致浏览器挂起的代码是

```
$('#Main').bind('scroll', function () {
            if ($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {
                //var new_div = '<div class="new_block"></div>';
                //$('.main_content').append(new_div.load('/path/to/script.php'));
                alert("end");
            }
        }); 
```

通过上面的代码，我试图检测滚动条是否拖到 div 的末尾。为什么我会出错....请指教。谢谢

# google-chrome - Google Chrome 本地主机上的 Cookie

> ID：10073168
> 
> 赞同：7
> 
> 时间：2012-04-09T12:28:40.023
> 
> 标签：google-chrome, cookies, localhost

我只想知道当我尝试在谷歌浏览器中访问本地主机上的网站时是否创建了 cookie。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T12:31:42.007

仅当 localhost 上的页面创建 cookie（客户端或服务器端）时。
外部资源（图像、框架）也可能会创建 cookie，具体取决于您的偏好。

您可以通过打开开发者工具 ( `F12`) -> 资源 -> Cookies 自行检查。

![开发工具](../Images/2c9f883a443a222d9fda896bfec8ac1d.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-25T09:00:03.690

只需按F12，打开`Application`选项卡，`Cookies`在左侧菜单中展开，右键单击`localhost`和然后单击`Clear`！

[![删除特定站点 chrome 的 cookie](../Images/b3c510f01453a6886274af2c1bdb2280.png)](https://i.stack.imgur.com/Wn1mZ.png)

# java - Wsimport 在 Maven 构建期间失败

> ID：10073170
> 
> 赞同：7
> 
> 时间：2012-04-09T12:28:44.490
> 
> 标签：java, maven, soap, jax-ws

我正在尝试使用 wsimport 从 WSDL 生成类。

我正在使用 Netbeans (7.1) 生成的 Maven POP，但是当我尝试构建它时得到以下输出：

```
[jaxws:wsimport]
Processing: C:\Users\...\src\wsdl\ShipService_v5.wsdl
jaxws:wsimport args: [-s, C:\Users\...\target\generated-sources\jaxws-wsimport, -d, C:\Users\...\target\classes, -verbose, -catalog, C:\Users\...\src\jax-ws-catalog.xml, -wsdllocation, file:/C:/Users/.../Desktop/ShipService_v5.wsdl, -extension, -Xnocompile, C:\Users\...\src\wsdl\ShipService_v5.wsdl]
parsing WSDL...

------------------------------------------------------------------------
BUILD FAILURE
------------------------------------------------------------------------
Total time: 1.361s
Finished at: Mon Apr 09 12:51:52 BST 2012
Final Memory: 4M/120M
------------------------------------------------------------------------
Failed to execute goal org.codehaus.mojo:jaxws-maven-plugin:1.10:wsimport (wsimport-generate-ShipService_v5) on project RPDataStreams: Error executing: wsimport [-s, C:\Users\...\target\generated-sources\jaxws-wsimport, -d, C:\Users\...\target\classes, -verbose, -catalog, C:\Users\...\src\jax-ws-catalog.xml, -wsdllocation, file:/C:/Users/.../Desktop/ShipService_v5.wsdl, -extension, -Xnocompile, C:\Users\...\src\wsdl\ShipService_v5.wsdl] -> [Help 1] 
```

我的 POM 中的插件部分是：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>jaxws-maven-plugin</artifactId>
    <version>1.10</version>
    <executions>
        <execution>
            <goals>
                <goal>wsimport</goal>
            </goals>
            <configuration>
                <wsdlFiles>
                    <wsdlFile>ShipService_v5.wsdl</wsdlFile>
                </wsdlFiles>
                <wsdlLocation>file:/C:/Users/.../Desktop/ShipService_v5.wsdl</wsdlLocation>
                <staleFile>${project.build.directory}/jaxws/stale/ShipService_v5.stale</staleFile>
            </configuration>
            <id>wsimport-generate-ShipService_v5</id>
            <phase>generate-sources</phase>
        </execution>
    </executions>
    <dependencies>
        <dependency>
            <groupId>javax.xml</groupId>
            <artifactId>webservices-api</artifactId>
            <version>1.4</version>
        </dependency>
    </dependencies>
    <configuration>
        <sourceDestDir>${project.build.directory}/generated-sources/jaxws-wsimport</sourceDestDir>
        <xnocompile>true</xnocompile>
        <verbose>true</verbose>
        <extension>true</extension>
        <catalog>${basedir}/src/jax-ws-catalog.xml</catalog>
    </configuration>
</plugin> 
```

我知道我正在使用的 WSDL 没有任何问题，我也使用来自[http://graphical.weather.gov/xml/DWMLgen/wsdl/ndfdXML.wsdl](http://graphical.weather.gov/xml/DWMLgen/wsdl/ndfdXML.wsdl)的 WSDL 进行了尝试。

我尝试从 Netbeans 和 Ubuntu 服务器的命令行构建这个项目，两次都得到相同的结果。

我现在已将其范围缩小到对 jconfig 的依赖。如果我注释掉下面的块，则 Web 服务源构建成功。

```
 <dependency>
        <groupId>org.jconfig</groupId>
        <artifactId>jconfig</artifactId>
        <version>2.9</version>
        <exclusions>
            <exclusion>
                <artifactId>jmxri</artifactId>
                <groupId>com.sun.jmx</groupId>
            </exclusion>
        </exclusions>
    </dependency> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T20:08:24.220

你应该使用：

```
<groupId>org.jvnet.jax-ws-commons</groupId>
<artifactId>jaxws-maven-plugin</artifactId>
<version>2.2</version> 
```

这是最新版本（请注意插件已移至 org.jvnet.jax-ws-commons）

编辑：

您可以尝试有选择地排除 jconfig 构建依赖项。完整列表如下所示：

```
<dependency>
    <groupId>org.jconfig</groupId>
    <artifactId>jconfig</artifactId>
    <version>2.9</version>
    <exclusions>
        <exclusion>
            <groupId>com.sun.jmx</groupId>
            <artifactId>jmxri</artifactId>
        </exclusion>
        <exclusion>
            <groupId>javax.xml.parsers</groupId>
            <artifactId>jaxp-api</artifactId>
        </exclusion>
        <exclusion>
            <groupId>crimson</groupId>
            <artifactId>crimson</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

编辑：你真的需要jconfig吗？如果没有，请摆脱它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-03T08:59:43.247

在项目运行配置的 JRE 选项卡中，选择备用 JRE 并添加已安装 JDK 的路径。对我来说，这样做解决了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-21T07:08:50.340

您可能使用的是 JRE 而不是 JDK。

请尝试更改 JDK 并再次运行 maven build。

将 JRE 更改为 JDK - [http://www.gamefromscratch.com/post/2011/11/15/Telling-Eclipse-to-use-the-JDK-instead-of-JRE.aspx](http://www.gamefromscratch.com/post/2011/11/15/Telling-Eclipse-to-use-the-JDK-instead-of-JRE.aspx)

# iphone - 使用自定义扩展名在 iPhone 中保存 pdf 文件

> ID：10073174
> 
> 赞同：-1
> 
> 时间：2012-04-09T12:29:08.387
> 
> 标签：iphone, objective-c, ios, pdf, xcode4.2

我想将 .pdf 文件保存在 iphone 的文档目录中，但需要一些自定义扩展。即Test.pdf 文件作为Test.pdf1 存储在documents 目录中。而且当我检索那个 pdf 文件时，它会以正确的 pdf 格式显示给我。请任何对此有想法的人，然后请回复。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:43:33.757

```
 NSString *oldPath = @".../123.pdf";
NSString *newPath = [[oldPath stringByDeletingLastPathComponent] stringByAppendingPathComponent:@"123.pdf1"];
[[NSFileManager defaultManager] moveItemAtPath:oldPath toPath:newPath error:nil]; 
```

# android - 一个按钮上有多个文本行。每行都有不同的文本样式

> ID：10073177
> 
> 赞同：4
> 
> 时间：2012-04-09T12:29:25.947
> 
> 标签：android, button

您好我正在尝试创建一个包含多行文本的按钮。请参见下面的示例。每行文本都应用了不同的文本大小和颜色。该按钮还需要能够将用户发送到下一页。这在 XML 中可能吗？我到处找，找不到解决办法。谢谢。

BUTTON HEADING TEXT（绿色大字体） 第一个按钮文字（灰色小字体） 第二个按钮文字（白色小字体）

参见示例：

![在此处输入图像描述](../Images/7a89a181cc423987e49f6e62e84987b7.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T12:40:32.633

图片无法访问。但根据您的问题，您可以实现一个 LinearLayout 作为主要组件并将其属性设置为可点击和可聚焦，并将其背景设置为 android.R.drawable.btn_default。将此布局的方向设置为垂直。

在 xml 中或动态地在此线性布局中添加任意数量的任何样式的 TextView。但是将所有 TextViews 的可聚焦和可点击属性设置为 false。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T13:39:14.667

Html.fromHtml(string) 可以解释一些 hmtl 标签，因此您可以使用 html 来设置按钮文本的样式。

假设您已经在 XML 文件中定义了按钮，那么您可以在 Java 代码中像这样设置按钮的文本。

```
Button button = (Button) findViewById(R.id.button1);
    String styledText = "<big> <font color='#008000'>"
            + "My orders" + "</font> </big>" + "<br />" 
            + "<small>" + "You have no current orders" + "</small>";
    button.setText(Html.fromHtml(styledText));

    // Attach a listener to the button that will make something 
    // happen when the button is clicked
    button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {

            // Put your Intent code here
            Log.d("onclick", "Button click registered");

            }
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-20T20:20:29.473

您可以堆叠`<big>`和`<small>`HTML 标签来增加它们的效果：

```
private final String btnInnerHTML = "<big><big><big><font color='#000000'><b>%s</b></font></big></big></big><br/><small>%s</small>";
btn0.setText(Html.fromHtml(String.format(btnInnerHTML, "Line1", "Line2"))); 
```

# java - 在Java中处理带有模式的数据数组？

> ID：10073180
> 
> 赞同：0
> 
> 时间：2012-04-09T12:29:33.003
> 
> 标签：java, arrays, split

所以我得到了这个带有书籍信息的字符串：

```
String data = "Harry Potter 1 | J.K. Rowling| 350 | Fantasy | Hunger Games | Suzanne Collins | 500 | Fantasy | The KingKiller Chronicles | Patrick Rothfuss | 400 | Heroic Fantasy" 
```

然后我拆分字符串：

```
String splitData = data.split("\\|"); 
```

这将导致哈利波特 1 处于位置 0，JK 罗琳处于位置 1，350 处于位置 2，等等。

您可能会在这里看到一个模式，即位置 0 是书名，位置 1 是作者，位置 2 是页数，位置 3 是类型。然后它再次从位置 4 开始，这又是一本书的标题，位置 5 是书的作者，等等。我假设你明白我要去哪里。

现在假设我想分别显示所有这些元素，比如分开打印所有标题、所有作者、所有页数等。我将如何实现这一点？

这应该是可能的，因为标题在 0、4、8 中。作者在 1、5、9 等中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T12:38:11.557

```
String data = "Harry Potter 1 | J.K. Rowling| 350 | Fantasy | Hunger Games | Suzanne Collins | 500 | Fantasy | The KingKiller Chronicles | Patrick Rothfuss | 400 | Heroic Fantasy"; 
    String[] splitData = data.split("\\|");
    for(int i=0; i<splitData.length;i++) {
        if(i % 4 == 0) System.out.println("Title: "+splitData[i]);
        else if(i % 4 == 1) System.out.println("Author: "+splitData[i]);
        else if(i % 4 == 2) System.out.println("Pages: "+splitData[i]);
        else if(i % 4 == 3) System.out.println("Genre: "+splitData[i]);
    } 
```

很难，不是吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T12:36:36.900

您可以回想一下，`for`循环允许您在最后一个表达式中执行*任何*修改，而不仅仅是`i++`. 对于这种情况，您可以使用`i += 4`. 然后在每次迭代中，名称将是 ne at `splitData[i]`，作者 at `splitData[i+1]`，页数 at`splitData[i+2]`和流派 at `splitData[i+3]`。

# html - 启动 node.js 项目

> ID：10073184
> 
> 赞同：3
> 
> 时间：2012-04-09T12:29:44.793
> 
> 标签：html, templates, node.js, mongodb

我即将开始一个项目，该项目将成为一个存储照片的网站。上传方式为拖拽方式（桌面，与Imgur相同），可以给照片评分，也可以评论。

对于这个项目，我将使用 Node.js 以及 HTML5、CSS3 和 jQuery。问题是我完全是 Node.js 的新手，并且真的可以在入门方面使用一些帮助。对于这个项目，我当然需要一个数据库，而且我知道 MongoDB 是一个不错的选择。有没有这种组合的模板，这样我就不需要从头开始了？

我已经安装了 Node.js 并遵循了一些教程，但我真的觉得我想要一个模板，如果有的话。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T14:39:25.363

正如您所说，您是初学者，您可以为您的项目选择最好的独立模块并开始使用。而不是将预定义的必要组件包作为单个模块。问题是您最终可能无法理解整个包装并变得更加偏颇。

因此，我建议如上所述使用 Expressjs（最佳选择）进行 url 路由。

和，

文件上传管理：

[强大](https://github.com/felixge/node-formidable)- 具有文件部分读取和进度通知器等的高性能文件上传服务器。

模板引擎（自定义 html 的标记库）：

[玉](https://github.com/visionmedia/jade)

[咖啡杯](https://github.com/mauricemach/coffeekup)

如果您需要，也可以考虑将[Bootstrap用于预构建模板。](http://twitter.github.com/bootstrap/)

Mongo - 不错的选择。

[Mongo 模块](https://github.com/joyent/node/wiki/modules#wiki-db-nosql-mongo)

这些库应该会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:57:18.760

看看[HTML5 Boilerplate](http://html5boilerplate.com/) + [Express.js](http://expressjs.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:59:19.513

作为一个基本的起点，这是一个流行的框架：

[http://expressjs.com/](http://expressjs.com/)

在这里，您将找到一些示例应用程序的链接：

[Node.js Web 应用程序示例/教程](https://stackoverflow.com/questions/3823403/node-js-web-application-examples-tutorials)

[https://github.com/heroku/facebook-template-nodejs](https://github.com/heroku/facebook-template-nodejs)

[开源 Node.js（和 Express）项目](https://stackoverflow.com/questions/9114176/open-source-node-js-and-express-projects)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T14:51:43.950

Express JS 很好，但我建议你也看看[铁路 JS](http://railwayjs.com/)。它基于 Express，支持众多模板引擎和数据库适配器（包括 MongoDB）。它更加模块化，因此使用它应该不会有太多麻烦（在我看来）。查看：也[使用 Node.js、Express 和 Mongoose 上传图像](https://stackoverflow.com/questions/5149545/uploading-images-using-nodejs-express-and-mongo)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-21T13:19:17.470

这是我使用 themeefy 编译的资源列表以启动 node.js 项目[http://www.themeefy.com/AvinashEga2/nodejs](http://www.themeefy.com/AvinashEga2/nodejs)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-09T14:15:36.947

我认为[Tower.js](http://towerjs.org/)就像您所追求的那样。

# php - PHP 有时会忽略函数重新声明吗？

> ID：10073185
> 
> 赞同：1
> 
> 时间：2012-04-09T12:30:05.793
> 
> 标签：php, compiler-errors, redeclare, redeclaration

我和几个朋友在一个网站上工作，最近，用户抱怨一个相当重要的功能除了返回一个空白页面什么都不做。这只发生在某些用户身上，而其他用户可以完美地使用它。

我查阅了调试输出，结果发现一个函数被声明了两次。一次在功能的主页 ( `foo.php`) 中，另一次在获得`require_once`'ed 的文件中。显然，我现在正走在修复它的正确道路上，但让我感到困惑的是，许多人在访问该页面时并**没有**遇到这个问题。两个函数声明是相同的；身体似乎已从一个文件复制+粘贴到另一个文件。这些函数声明都不是有条件的；它们都应该总是发生。

有谁知道 PHP 能够处理我的错误并使页面正常工作的情况，尽管有这个致命错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:44:31.153

它可能是您的函数声明的类型是公共的、私有的或受保护的，因此您可能不会幸运地遇到致命错误，因为据我所知，php 不允许以任何方式重新声明函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:39:06.593

抱歉，PHP 永远不能忽略致命错误或函数重新声明，因为在这种情况下，PHP 会混淆要考虑哪些函数声明，是使用旧声明还是新声明。

*   致命错误的意思是，有些地方出了问题，PHP 对下一步该做什么感到困惑，因此您的工作就是把它做好。

*   抱歉，PHP 不会试图找出两个或多个声明是否相同，然后忽略其中一个。如果必须这样做，已经很慢的 PHP 将变得更慢。因此，为了社区的利益，您应该考虑编写正确的代码，而不是让 PHP 解释器为您更正。

# device-driver - 网络统计收集器（可加载内核模块）不起作用？

> ID：10073188
> 
> 赞同：1
> 
> 时间：2012-04-09T12:30:16.543
> 
> 标签：device-driver, kernel-module

我对 linux 内核模块有点陌生，我正在尝试编写自己的模块，以提供有关设备的一些统计信息（此处为 NIC）。虽然我使用的是内核 2.6.35 并且我已经包含`linux/netdevices`，但编译一直说该函数`ndo_get_stats`是隐式声明的。谁能告诉我发生了什么事？

这是模块，我知道很简单，

```
#include <linux/module.h>       /* Needed by all modules */
#include <linux/kernel.h>       /* Needed for KERN_INFO */
#include <linux/netdevice.h>    /* Needed for netdevice*/

static int __init hello_start(void)
{
     struct net_device *dev;
     struct net_device_stats *devstats;

    printk(KERN_INFO "Loading Stats module...\n");
    printk(KERN_ALERT "Hello world\n");
    dev = first_net_device(&init_net);
    while (dev)
    {
         printk(KERN_INFO "found [%s] and it's [%d]\n", dev->name, dev->flags & IFF_UP);

         printk(KERN_INFO "End of dev struct ... now starts the get_stats struct\n");

     devstats = ndo_get_stats(dev);

     printk(KERN_INFO "recive errors: [%li]\n transmission errors: [%li]\n number of collisions: [%li]", devstats->rx_errors , devstats->tx_errors, devstats->collisions);

      dev = next_net_device(dev);
     }

    return 0;
}

static void __exit hello_end(void)
{
    printk(KERN_ALERT "Goodbye.\n");
}

module_init(hello_start);
module_exit(hello_end); 
```

# python - Django-cms haystack 搜索 - 占位符内容

> ID：10073189
> 
> 赞同：0
> 
> 时间：2012-04-09T12:30:17.633
> 
> 标签：python, django, templates, django-haystack, django-cms

我对 django-cms 和 haystack 搜索的结果有疑问。我正在使用 django-cms-search 插件，haystack 作为后端。Haystack 返回正确的结果。但我想在搜索结果中显示“预告片”。

我可以通过这种方式通过模板访问绝对 URL 和页面标题：

```
{% for result in page.object_list %}
<div class="searchResults">
<h2>{{ result.object.get_title }}</h2>
{{ result.object.placeholders.all }}           
<p><a href="{{ result.object.get_absolute_url }}">{% blocktrans %} Read more {% endblocktrans %}</a></p> 
```

有问题的部分是`{{ result.object.placeholders.all }}`。我在每个页面内容的占位符中都有名称内容。

`{{ result.object.placeholders.all }}`仅返回占位符的名称。

搜索结果应如下所示：

页面标题

页面预告

阅读更多链接

在预告片中应该有来自搜索匹配页面的前 50 个单词。

这是否可以从模板访问占位符内容？

谢谢你的提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:06:15.377

Haystack 有模板标签 higlight 可以根据我的要求创建“预告片”。

模板代码可能如下所示：

```
{{ result.object.get_title }}
{% highlight result.text with request.GET.q max_lenght 40 %}
{{ result.object.get_absolute_url }} 
```

感谢来自#haystack IRC 频道的人。

# spring - JSP中的Spring注入

> ID：10073190
> 
> 赞同：2
> 
> 时间：2012-04-09T12:30:26.790
> 
> 标签：spring, jsp, dependency-injection, struts2

我有一个需要java代码的jsp页面。

这个jsp里面的java代码需要一个服务类。

现在我的服务类是使用 Spring DI 和 DAO 创建的 java，其他东西是使用 Spring 注入到服务类中的。

但是当我想在jsp中使用它时，我应该如何要求spring在jsp中为我提供服务对象？

JSP -> Java 代码 -> 服务 -> DAO

我使用 struts2 和 spring DI 作为框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:40:27.343

您可以创建一个受 Spring 管理且可感知应用程序上下文的类。此类将通过代码中任何位置的静态方法提供 Spring bean。

```
@Service
public class SpringBeansProvider implements ApplicationContextAware {

    static private ApplicationContext applicationContext;

    public static <T> T getBean(String beanName, Class<T> type) {
        return applicationContext.getBean(beanName, type);
    }

    @Override
    public void setApplicationContext(ApplicationContext context) {
        applicationContext = context;
    }

} 
```

从代码中的任何位置，使用`SpringBeansProvider.getBean("myBean", MyBean.class)`. 是的，这打破了 bean 注入的概念，混淆了静态和非静态方法的使用，但是这样的任务总是会导致那些不公平的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:44:27.470

您不会注入 JSP 页面；您注入动作类并使用正常的 S2 机制进行访问。

# sql - 使用存储过程搜索表数据的首选方法是什么？

> ID：10073195
> 
> 赞同：1
> 
> 时间：2012-04-09T12:30:46.557
> 
> 标签：sql, sql-server, sql-server-2008, tsql, search

我有一个带有,的`customer`表格，并且搜索基于以上三个中的任何一个或全部。`Cust_Id``Name``City`

我应该去哪一个？

1.  动态 SQL：

    ```
    declare @str varchar(1000)
    set @str = 'Select [Sno],[Cust_Id],[Name],[City],[Country],[State] 
                from Customer where 1 = 1'
    if (@Cust_Id != '')
        set @str = @str + ' and Cust_Id    =  ''' + @Cust_Id + ''''
    if (@Name != '')
        set @str = @str + ' and Name like ''' + @Name + '%'''
    if (@City  != '')
        set @str = @str + ' and City like ''' + @City + '%'''
    exec (@str) 
    ```

2.  简单查询：

    ```
    select
        [Sno],[Cust_Id],[Name],[City],[Country],[State]
    from
        Customer
    where
        (@Cust_Id  = '' or Cust_Id    =  @Cust_Id) and
        (@Name     = '' or Name     like @Name + '%') and
        (@City     = '' or City     like @City + '%') 
    ```

我应该更喜欢哪一个（1或2），有什么优势？

**经过大家的建议，这就是我终于得到的。**

```
 DECLARE @str NVARCHAR(1000)
  DECLARE @ParametersDefinition NVARCHAR(500)
  SET @ParametersDefinition = N'@InnerCust_Id varchar(10),
                              @InnerName varchar(30),@InnerCity varchar(30)'

 SET @str = 'Select [Sno],[Cust_Id],[Name],[City],[Country],[State]
                                          from Customer where 1 = 1'

 IF(@Cust_Id != '')
    SET @str = @str + ' and Cust_Id = @InnerCust_Id'
 IF(@Name != '')
    SET @str = @str + ' and Name like @InnerName'
 IF(@City  != '')
    SET @str = @str + ' and City like @InnerCity'

-- ADD the % symbol for search based upon the LIKE keyword
SELECT  @Name = @Name + '%', @City = @City+ '%'

EXEC sp_executesql @str, @ParametersDefinition,
                      @InnerCust_Id = @Cust_Id,
                      @InnerName    = @Name,
                      @InnerCity    = @City; 
```

**注意**：`@Cust_Id`和是传递给存储过程的`@Name`参数 `@City`

参考：http: [//blogs.lessthandot.com/index.php/DataMgmt/DataDesign/changeing-exec-to-sp_executesql-doesn-tp](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/changing-exec-to-sp_executesql-doesn-t-p)

[http://www.sommarskog.se/dynamic_sql.html](http://www.sommarskog.se/dynamic_sql.html)

[http://msdn.microsoft.com/en-us/library/ms175170.aspx](http://msdn.microsoft.com/en-us/library/ms175170.aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T13:20:13.097

动态 SQL 编写起来可能有点困难，如果你不小心，它很容易受到 SQL 注入的影响。但是，它优于“非动态”/简单或查询。

在此处阅读更多相关信息。 [http://blogs.lessthandot.com/index.php/DataMgmt/DBProgramming/do-you-use-column-param-or-param-is-null](http://blogs.lessthandot.com/index.php/DataMgmt/DBProgramming/do-you-use-column-param-or-param-is-null)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T13:38:05.883

动态 SQL 可能具有更高的性能，这在搜索中通常很重要。

但是，编写和调试和测试比较困难。首先，您需要确保它不会允许 SQL 注入攻击。接下来，您需要确保您使用的变量足够大以包含您将创建的最大可能的最终 SQl 语句。

然后你需要创建大量的测试用例来确保没有某种微妙的错误。

您还需要授予对基础表的读取权限，如果您使用存储过程，通常不需要这样做。

最后，在存储过程中执行动态 SQL 时，请添加一个名为 @debug 的输入变量作为最后一个输入变量，并给它一个默认值 0。当传入 1 时，它会发送给您，而不是执行动态 SQL创建的 SQL。这将帮助您调试 proc，并且在将来的某些搜索中出现错误时特别有用，因为您可以准确地看到为这些值运行的 SQL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:35:44.960

根据我的经验，动态 SQL 仅在减少 JOIN 数量时才有意义（提高性能）。

否则只会恶化代码的可读性和可维护性。

# android - 使用 ContextMenu 从基础中删除

> ID：10073200
> 
> 赞同：0
> 
> 时间：2012-04-09T12:31:13.217
> 
> 标签：android

所以我对这个 SQLite 很陌生，我终于设法创建基础并使用它等。现在我创建了 ContextMenu，你将能够从打开上下文菜单的 listView 中删除项目。这是我当前的代码。

```
import java.util.List;
import java.util.Random;

import android.app.ListActivity;
import android.os.Bundle;
import android.text.Editable;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.MenuInflater;
import android.view.View;
import android.widget.AdapterView.AdapterContextMenuInfo;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Toast;
import android.view.MenuItem;

public class Ann extends ListActivity{
    private CommentsDataSource datasource;
    EditText edit;
    ListView bump;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ann);

        datasource = new CommentsDataSource(this);
        datasource.open();      

        List<Comment> values = datasource.getAllComments();

        ArrayAdapter<Comment> adapter = new ArrayAdapter<Comment>(this,
                android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter);
        registerForContextMenu(getListView());
    }

    public void onClick(View view) {
        @SuppressWarnings("unchecked")
        ArrayAdapter<Comment> adapter = (ArrayAdapter<Comment>) getListAdapter();
        Comment comment = null;
        switch (view.getId()) {
        case R.id.add:  
            edit = (EditText)findViewById(R.id.editTxt);            
            Editable txt=(Editable)edit.getText();
            String vnos = txt.toString();           
            comment = datasource.createComment(vnos);
            adapter.add(comment);
            edit.setText("");
            break;  
        }
        adapter.notifyDataSetChanged();
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo){
        super.onCreateContextMenu(menu, v, menuInfo);
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.context_menu, menu);
    }

    @Override
    protected void onResume() {
        datasource.open();
        super.onResume();
    }

    @Override
    protected void onPause() {
        datasource.close();
        super.onPause();
    }

} 
```

现在我知道我需要为`public boolean onContextItemSelected(MenuItem item)`

但是现在如何管理删除被选中的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:05:53.283

我可以问你为什么不使用 SimpleCursorAdapter 来创建列表吗？看起来你正在获得一个光标并变成一个数组......为什么要采取额外的步骤？这很有用，如果您对数据库进行添加/删除，您可以简单地使用该`requery()`方法重新生成/更新列表。

无论如何，如果您决定使用 SimpleCursorAdapter，那`onContextItemSelected(MenuItem item)`将是您的最佳选择。我的一个项目中的一个例子：

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
    if (item.getTitle() == "Delete Member") {
        mDbHelper.deleteMember(info.id);
  mMemberCursor.requery();
  return true;
    }
    return super.onContextItemSelected(item);
} 
```

请注意，我以编程方式创建了菜单视图，因此您可能需要将`if`语句更改为更适合使用膨胀菜单资源的设置的内容。

`info.id`是来自数据库的行 ID，它代表您单击的列表的行。 `mDbHelper.deleteMember()`是我的数据库助手中用于删除记录的方法。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:38:46.693

上下文菜单不是特定于 listItem 的，即。id 不知道点击了哪个项目。

选择 onItemClicked 或 onItemLongClick 版本。

要执行后者，请在您的活动上实现 onItemLongClick 接口

`public class Ann extends ListActivity implements OnItemLongClickListener`

并添加 onItemLongClick 方法

```
@Override
public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
    // do something with your datasource and the position
    return false;
} 
```

# java - SunX509 有什么用途，它可以与使用 IbmX509 的各方一起使用吗？

> ID：10073202
> 
> 赞同：15
> 
> 时间：2012-04-09T12:31:25.547
> 
> 标签：java, ssl-certificate, jsse

当我手动创建一个`KeyManager`时，其中一个步骤是：

```
KeyManagerFactory.getInstance("SunX509") 
```

这在我需要指定“IbmX509”的 IBM jre 上不起作用。
我的问题：

1.  我读到这被称为“证书编码算法”。这意味着什么？什么时候使用？
2.  当客户端使用 IBM 算法而服务器使用 Sun 算法时会发生什么？

谢谢，
多伦

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-10T01:36:43.400

> 我读到这被称为“证书编码算法”。

不，不是。它是定义提供者和内容类型的密钥管理器算法，在本例中为“Sun”或“IBM”和 X.509。基本上它是一种密钥库类型。

无论如何，最好的解决方案是不使用任何一个。只需使用

```
KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm()); 
```

并且`KeyManager`只`KeyManagerFactory`处理本地密钥库/信任库。对等方不关心这些，只关心其中的证书，而且只是间接关心。

# java - 为什么调整 JTable 列的大小会产生垃圾？

> ID：10073205
> 
> 赞同：2
> 
> 时间：2012-04-09T12:31:36.400
> 
> 标签：java, swing, garbage-collection, jtable

我目前正在实现一个使用 JTable 来显示一些信息的程序。该表包含不超过 10 行（所以它很小）。

在开发过程中，我通常使用该`-verbose:gc`选项运行程序。

如果我单击 2 列之间的线并继续向左移动，然后向右移动，以此类推，我注意到生成了很多垃圾。**当我这样做时，该程序绝对没有做任何事情**，因此没有其他潜在的垃圾来源。此外，如果我停止，垃圾收集器也会停止收集。

如果我继续调整这些列的大小一分钟左右，就会产生大约**100MB+ 的垃圾**，这似乎很多。

这不会影响我的程序的运行方式，但它看起来很奇怪。为什么它会这样？

**编辑**

这是一个SSCCE：

```
import javax.swing.*;
import javax.swing.table.DefaultTableModel;

public class JTableTest
{
    public static void main (String[] args)
    {
        SwingUtilities.invokeLater (new Runnable ()
        {
            @Override public void run ()
            {
                JFrame frame = new JFrame ();
                frame.setDefaultCloseOperation (JFrame.DISPOSE_ON_CLOSE);
                frame.setLayout (null);
                frame.setSize (700, 300);
                frame.setResizable (false);

                JTable table = new JTable ();
                table.setAutoResizeMode (JTable.AUTO_RESIZE_ALL_COLUMNS);

                String[] titles = { "Title 1", "Title 2", "Title 3", "Title 4", "Title 5" };

                String[][] data = {
                                { "Row 1, Column 1", "Row 1, Column 2", "Row 1, Column 3", "Row 1, Column 4", "Row 1, Column 5"},
                                { "Row 2, Column 1", "Row 2, Column 2", "Row 2, Column 3", "Row 2, Column 4", "Row 2, Column 5"},
                                { "Row 3, Column 1", "Row 3, Column 2", "Row 3, Column 3", "Row 3, Column 4", "Row 3, Column 5"},
                                { "Row 4, Column 1", "Row 4, Column 2", "Row 4, Column 3", "Row 4, Column 4", "Row 4, Column 5"},
                                { "Row 5, Column 1", "Row 5, Column 2", "Row 5, Column 3", "Row 5, Column 4", "Row 5, Column 5"}
                                };

                table.setModel (new DefaultTableModel (data, titles)
                {
                    @Override public boolean isCellEditable (int row, int column)
                    {
                        return false;
                    }
                });

                JScrollPane scrollpane = new JScrollPane (table);
                scrollpane.setHorizontalScrollBarPolicy (ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
                scrollpane.setVerticalScrollBarPolicy (ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);

                scrollpane.setBounds (20, 20, 650, 250);
                frame.add (scrollpane);

                frame.setVisible (true);
            }
        });
    }
} 
```

`-verbose:gc`使用该选项运行程序。运行时，在“Title x”和“Title y”（x != y）之间单击并调整这些列的大小。保持鼠标点击并保持左右移动。您将看到`stdout`垃圾收集器在您执行此操作时正在收集垃圾。（在我的系统上它大约每分钟 10 次）。**如果/当您停止时，将不再收集垃圾。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:37:56.650

请

*   代码的一些变化

*   添加了 JTextArea

*   您确认我们您的输出与打印到 JTextArea 的输出相同吗

(WinXP, Java6 --> 看起来永远一样)

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import javax.swing.*;
import javax.swing.table.DefaultTableModel;
import javax.swing.text.DefaultCaret;

public class JTableTest {

    private javax.swing.Timer timer = null;
    private JTextArea text = new JTextArea();

    public JTableTest() {
        String[] titles = {"Title 1", "Title 2", "Title 3", "Title 4", "Title 5"};
        String[][] data = {
            {"Row 1, Column 1", "Row 1, Column 2", "Row 1, Column 3", "Row 1, Column 4", "Row 1, Column 5"},
            {"Row 2, Column 1", "Row 2, Column 2", "Row 2, Column 3", "Row 2, Column 4", "Row 2, Column 5"},
            {"Row 3, Column 1", "Row 3, Column 2", "Row 3, Column 3", "Row 3, Column 4", "Row 3, Column 5"},
            {"Row 4, Column 1", "Row 4, Column 2", "Row 4, Column 3", "Row 4, Column 4", "Row 4, Column 5"},
            {"Row 5, Column 1", "Row 5, Column 2", "Row 5, Column 3", "Row 5, Column 4", "Row 5, Column 5"}
        };
        JTable table = new JTable();
        table.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);
        table.setModel(new DefaultTableModel(data, titles) {

            private static final long serialVersionUID = 1L;

            @Override
            public boolean isCellEditable(int row, int column) {
                return false;
            }
        });
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollpane = new JScrollPane(table);
        scrollpane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        scrollpane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);

        DefaultCaret caret = (DefaultCaret) text.getCaret();
        caret.setUpdatePolicy(DefaultCaret.ALWAYS_UPDATE);
        JScrollPane scroll = new JScrollPane(text);

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setLocation(150, 150);
        frame.setSize(700, 300);
        frame.setResizable(false);
        frame.add(scrollpane, BorderLayout.NORTH);
        frame.add(scroll, BorderLayout.CENTER);
        frame.setVisible(true);
        start();
    }

    private void start() {
        timer = new javax.swing.Timer(1000, updateCol());
        timer.start();
    }

    public Action updateCol() {
        return new AbstractAction("text load action") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                text.append("FreeMemory in Kb " + Runtime.getRuntime().freeMemory() / 1000 + "\n");
                text.append("MaxMemory in Kb " + Runtime.getRuntime().maxMemory() / 1000 + "\n");
                text.append("TotalMemory in Kb " + Runtime.getRuntime().totalMemory() / 1000 + "\n");
                text.append("UsedMemory in Kb " + ((Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory()) / 1000) + "\n");
                text.append("\n");
            }
        };
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JTableTest jTableTest = new JTableTest();
            }
        });
    }
} 
```

编辑 JTable 和 GC 几列 75k 行 (82 -85Mb)

```
import java.awt.*;
import java.awt.event.*;
import java.beans.PropertyChangeListener;
import java.text.DecimalFormat;
import java.util.Timer;
import java.util.TimerTask;
import java.util.Vector;
import javax.swing.*;
import javax.swing.table.AbstractTableModel;

public class TriState extends JPanel {

    private static final long K = 1024;
    private static final long M = K * K;
    private static final long G = M * K;
    private static final long T = G * K;
    protected static int ctr = 1;
    private static final long serialVersionUID = 1L;
    private JButton btnShow = new JButton("Show Form");
    private JLabel lblMem = new JLabel();
    private static final DecimalFormat df = new DecimalFormat("#,##0.#");
    protected Timer updateTimer = new Timer();

    public TriState() {
        this.setLayout(new GridLayout());
        add(btnShow);
        add(lblMem);
        updateTimer.scheduleAtFixedRate(new UpdateTimerTask(), 1000, 1000);
        btnShow.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                FrmReferrals fr = new FrmReferrals();
                fr.setVisible(true);
            }
        });
    }

    class UpdateTimerTask extends TimerTask {

        public void run() {
            SwingUtilities.invokeLater(new Runnable() {

                @Override
                public void run() {
                    dumpMemoryUsage();
                }
            });
        }
    }

    protected void dumpMemoryUsage() {
        System.gc();
        Long t = Runtime.getRuntime().totalMemory();
        long f = Runtime.getRuntime().freeMemory();

        String st = convertToStringRepresentation(t);
        String sf = convertToStringRepresentation(f);
        String su = convertToStringRepresentation(t - f);
        System.out.println("Total:" + st + "(" + t + ") Free:" + sf + "(" + f + ") Used:" + su + "(" + (t - f) + ")");
        lblMem.setText(su + "/" + st);

    }

    public static String convertToStringRepresentation(final long value) {
        final long[] dividers = new long[]{T, G, M, K, 1};
        final String[] units = new String[]{"TB", "GB", "MB", "KB", "B"};
        if (value < 1) {
            throw new IllegalArgumentException("Invalid file size: " + value);
        }
        String result = null;
        for (int i = 0; i < dividers.length; i++) {
            final long divider = dividers[i];
            if (value >= divider) {
                final double dr = divider > 1 ? (double) value / (double) divider : (double) value;
                result = df.format(dr) + units[i];
                break;
            }
        }
        return result;
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("SimpleTableDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Create and set up the content pane.
        TriState newContentPane = new TriState();
        newContentPane.setOpaque(true); // content panes must be opaque
        frame.setContentPane(newContentPane);

        // Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                createAndShowGUI();
            }
        });
    }

    protected class PopupMenu extends JPopupMenu {

        public PopupMenu() {
            JRadioButtonMenuItem item1 = new JRadioButtonMenuItem(new AbstractAction("Insert Item") {

                @Override
                public void actionPerformed(ActionEvent e) {
                    System.out.println(e.getActionCommand());
                }
            });
            item1.setActionCommand("Insert");
            add(item1);

            JRadioButtonMenuItem item2 = new JRadioButtonMenuItem(new AbstractAction("Delete Item") {

                @Override
                public void actionPerformed(ActionEvent e) {
                    System.out.println(e.getActionCommand());
                }
            });
            item2.setActionCommand("Delete");
            add(item2);
        }
    }

    public class FrmReferrals extends JFrame {

        public FrmReferrals() {
            super();
            init();
        }

        protected void init() {
            jbInit();
        }

        protected void closeIt() {
            uninit();
        }
        // variables here
        final Dimension dimPreferred = new Dimension(1270, 995);
        final JTabbedPane tabbedPane = new JTabbedPane();
        private JTable tblReferrals = null;
        private PopupMenu popMenu = new PopupMenu();

        protected void jbInit() {
            setPreferredSize(dimPreferred);
            setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
            setTitle("Referrals");
            JPanel pnl = new JPanel();
            pnl.setOpaque(false);
            pnl.setLayout(new BorderLayout());
            pnl.add(tabbedPane, BorderLayout.CENTER);
            // put it all in the frame
            add(pnl);
            pack();
            setLocationRelativeTo(null);
            // init the table and model
            ReferralsTableModel ctm = new ReferralsTableModel(buildDummyVector());
            tblReferrals = new JTable(ctm);
            tblReferrals.setComponentPopupMenu(popMenu);
            tblReferrals.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
            tabbedPane.add(new JScrollPane(tblReferrals, JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED, JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED));

            addWindowListener(new WindowListener() {

                @Override
                public void windowActivated(WindowEvent e) {
                }

                @Override
                public void windowClosed(WindowEvent e) {
                }

                @Override
                public void windowClosing(WindowEvent e) {
                    closeIt();
                }

                @Override
                public void windowDeactivated(WindowEvent e) {
                }

                @Override
                public void windowDeiconified(WindowEvent e) {
                }

                @Override
                public void windowIconified(WindowEvent e) {
                }

                @Override
                public void windowOpened(WindowEvent e) {
                }
            });
        }

        protected Vector<DBO_Referrals> buildDummyVector() {
            Vector<DBO_Referrals> vr = new Vector<DBO_Referrals>();
            for (int x = 0; x < 75000; x++) {
                DBO_Referrals r = new DBO_Referrals(x + (5000 * ctr));
                vr.add(r);
            }
            return vr;
        }

        protected void uninit() {
            tblReferrals.setComponentPopupMenu(null);
            for (Component c : popMenu.getComponents()) {
                PropertyChangeListener[] pl = c.getPropertyChangeListeners();
                for (PropertyChangeListener l : pl) {
                    c.removePropertyChangeListener(l);
                }
                if (c instanceof JMenuItem) {
                    ActionListener[] al = ((JMenuItem) c).getActionListeners();
                    for (ActionListener l : al) {
                        ((JMenuItem) c).removeActionListener(l);
                    }
                }
            }
            popMenu = null;
        }

        protected class DBO_Referrals {

            private long id;
            private String Employee;
            private String Rep;
            private String Asst;
            private String Client;
            private String Dates;
            private String Status;
            private String Home;

            public DBO_Referrals(long id) {
                this.id = id;
                Employee = "Employee" + id;
                Rep = "Rep" + id;
                Asst = "Asst" + id;
                Client = "Client" + id;
                Dates = "Dates" + id;
                Status = "Status" + id;
                Home = "Home" + id;
            }

            public long getId() {
                return id;
            }

            public String getEmployee() {
                return Employee;
            }

            public String getRep() {
                return Rep;
            }

            public String getAsst() {
                return Asst;
            }

            public String getClient() {
                return Client;
            }

            public String getDates() {
                return Dates;
            }

            public String getStatus() {
                return Status;
            }

            public String getHome() {
                return Home;
            }
        }

        public class ReferralsTableModel extends AbstractTableModel {

            private static final long serialVersionUID = 1L;
            private Vector<DBO_Referrals> data = new Vector<DBO_Referrals>();
            final String[] sColumns = {"id", "Employee", "Rep", "Assistant", "Client", "Date", "Status", "Home", "R"};

            public ReferralsTableModel() {
                super();
            }

            public ReferralsTableModel(Vector<DBO_Referrals> data) {
                this();
                this.data = data;
            }

            @SuppressWarnings("unchecked")
            @Override
            public Class<?> getColumnClass(int col) {
                switch (col) {
                    case 0:
                        return Long.class;
                    default:
                        return String.class;
                }
            }

            @Override
            public int getColumnCount() {
                return sColumns.length;
            }

            @Override
            public int getRowCount() {
                return data.size();
            }

            @Override
            public Object getValueAt(int row, int col) {
                if (row > data.size()) {
                    return null;
                }
                DBO_Referrals a = data.get(row);
                switch (col) {
                    case 0:
                        return a.getId();
                    case 1:
                        return a.getEmployee();
                    case 2:
                        return a.getRep();
                    case 3:
                        return a.getAsst();
                    case 4:
                        return a.getClient();
                    case 5:
                        return a.getDates();
                    case 6:
                        return a.getStatus();
                    case 7:
                        return a.getHome();
                    case 8:
                        return "+";
                    default:
                        return null;
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T14:00:04.520

它产生垃圾仅仅是因为它可以。Java 是一种垃圾收集语言，基本上它所做的一切都会产生垃圾。

当您按住并拖动该按钮时，java 正在执行原始活动（即鼠标按钮状态、光标位置状态、时间等）并创建事件。然后，它将事件流与旧光标位置等内容进行比较，以检测程序是否真的想要对这些信息做任何事情。当您移动它时，Java 需要绘制线条、文件矩形、绘制文本等。

所有这些活动都会留下一些东西，垃圾，最终需要收集。

只是闲置，您的程序正在创建垃圾，很可能是非常缓慢的，因为内部计时器等会死掉并被回收。尝试使用 jconsole 程序来观察堆，您会看到它随着时间的推移逐渐增加。

这是正常的，无需担心。这是一个功能，而不是一个错误。

# javascript - 如何在代码中定义文本字段值

> ID：10073208
> 
> 赞同：0
> 
> 时间：2012-04-09T12:31:43.717
> 
> 标签：javascript

```
<form id="form2" name="form2" action="">
   <div class="form_colour" id="formcolour"><img src="../Images/red_car.jpg" alt=""   width="370" height="124" />This car is
      <label for="textarea"></label>
      <input name="text_1" type="text" class="form_colour" id="text_1" />
   </div>
   <p>&nbsp;</p>
   <p><img src="../Images/green_car.jpg" width="370" height="124" />This car is
      <input name="text_2" type="text" class="form_colour" id="text_2" />
   </p>
   <p>
      <img src="../Images/Yellow_car.jpg" width="370" height="124" />This car is
      <input name="text_3" type="text" class="form_colour" id="text_3" maxlength="8" />
   </p>
   <p>
      <input name="confirm" type="button" class="form_colour" id="confirm" value="Confirm" />
   </p>
</form> 
```

我目前有以下代码用于其中包含 3 个文本字段的表单（表单代码在此上方，Javascript 代码在此文本下方）。

我的目标是基于文本值的输入，用户将收到一条消息并留在页面上，或者如果它们是正确的，则收到一条消息并转到另一个页面。我以前为下拉列表做过这个。我所做的只是将变量从下拉列表名称更改为文本字段名称。现在当我运行它时，什么也没有发生，我需要做更多的事情吗？？？

```
</script>

<script type="text/javascript">

function checkValues() {  // this line must be within the script tags
   var a = document.form2.text_1.value;    
   var b = document.form2.text_2.value; 
   var c = document.form2.text_3.value; 

   if (a == "red" && b == "green" && c == "yellow"){ 
      alert ("Correct you have won press OK for your Reward!") 
      window.location.href = "Reward.html";   // redirect to new page
   } 
   else { 
      alert ("Not right Please try again!"); 
      window.location.href = "Money_Match.html";
   } 
}

</script>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:38:49.323

您还没有在按钮单击时调用您的脚本，请在此处查看工作示例[http://jsfiddle.net/3CgcH/7/](http://jsfiddle.net/3CgcH/7/)

`checkValues`您需要为将调用函数的按钮指定 onclick 处理程序

```
<input name="confirm" type="button" class="form_colour" id="confirm" value="Confirm" onclick="checkValues();" /> 
```

更合适的方法是在 html 元素上使用`addEventListener`和`attachEvent`注册事件

# java - com.sun.star.uno 不存在错误

> ID：10073210
> 
> 赞同：0
> 
> 时间：2012-04-09T12:31:59.413
> 
> 标签：java, import, classpath, openoffice.org, uno

嗨，我指的是以下文档，用于使用 OpenOffice.org 和 Dojo 的基于 Web 的电子表格

[http://www.javaworld.com/javaworld/jw-05-2008/jw-05-spreadsheets.html?page=1](http://www.javaworld.com/javaworld/jw-05-2008/jw-05-spreadsheets.html?page=1)

我第一次开发这样的东西..

我创建了 java 类，但是当我编译类“SpreadsheetDoc.java”时，出现以下错误：

```
com.sun.star.uno does not exists 
```

我可能会错误地跳过一些步骤，不知道是什么。尝试设置`openoffice/program`文件夹的类路径，但仍然遇到问题

我正在使用 apache tomcat 7.0、Open office 3、JDK 6。

我怎样才能获得命名空间的正确导入。

```
com.sun.star.uno 
```

我认为这可能是一些与

```
juh.jar
jurt.jar
ridl.jar
unoil.jar 
```

参考但不确定...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:54:40.397

您是否安装了 OpenOffice SDK？

# android - 如何在表格布局中的列之间设置分隔符？

> ID：10073211
> 
> 赞同：10
> 
> 时间：2012-04-09T12:31:59.980
> 
> 标签：android, divider, android-tablelayout

我想创建一个带有列分隔符的表。我想用垂直条形图像划分我的列。为了实现这一点，我已经使用`"android:divider="@drawable/abc"` 但它不起作用。以下是我的 xml 文件：

```
 <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="horizontal" 
   android:stretchColumns="*"
    android:padding="5dip"
android:divider="@drawable/tracking_green"
>
<TableRow  >

<TextView
    android:id="@+id/retaileritem1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:text="xxxxxxx" />

<TextView
    android:id="@+id/retaileritem2"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:text="xxxxxxx" />

<ImageView
    android:id="@+id/retailerimage1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:src="@drawable/tracking_green" />

</TableRow> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T03:51:35.520

添加 android:showDividers="middle"

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="horizontal" 
  android:stretchColumns="*"
  android:padding="5dip"
  android:divider="@drawable/tracking_green"
  android:showDividers="middle"
> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-18T06:55:44.663

我就是这样做的！

***代码***

```
<LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="5dp" >

                <TextView
                    android:id="@+id/textView4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:layout_weight="1"
                    android:paddingBottom="50dp"
                    android:text="Salary Details"
                    android:textAppearance="?android:attr/textAppearanceLarge"
                    android:textStyle="bold" />

                <TableLayout
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:shrinkColumns="0"
                    android:stretchColumns="1" >

                    <TableRow
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:layout_gravity="center_vertical" >

                        <TextView
                            android:layout_gravity="center_vertical"
                            android:gravity="left"
                            android:text="Financial Year"
                            android:textColor="@android:color/white"
                            android:textSize="14sp"
                            android:textStyle="bold" />

                        <Spinner
                            android:id="@+id/spnSearchByCity"
                            android:layout_width="fill_parent"
                            android:layout_height="40dp"
                            android:layout_gravity="center_vertical"
                            android:entries="@array/year"
                            tools:listitem="@android:layout/simple_spinner_dropdown_item" />
                    </TableRow>
                </TableLayout>

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:background="#d30059"
                    android:orientation="vertical"
                    android:paddingTop="50dp" >

                    <TableLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content" >

                        <TableRow
                            android:id="@+id/tableRow1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:background="@android:color/white" >

                            <TextView
                                android:id="@+id/textView1"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="1dp"
                                android:layout_marginLeft="1dp"
                                android:layout_marginTop="1dp"
                                android:layout_weight="1"
                                android:background="#d30059"
                                android:gravity="center"
                                android:text="Month"
                                android:textAppearance="?android:attr/textAppearanceMedium" />

                            <TextView
                                android:id="@+id/textView2"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="1dp"
                                android:layout_marginLeft="1dp"
                                android:layout_marginTop="1dp"
                                android:layout_weight="1"
                                android:background="#d30059"
                                android:gravity="center"
                                android:text="Net Salary"
                                android:textAppearance="?android:attr/textAppearanceMedium" />

                            <TextView
                                android:id="@+id/textView3"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="1dp"
                                android:layout_marginLeft="1dp"
                                android:layout_marginRight="1dp"
                                android:layout_marginTop="1dp"
                                android:layout_weight="1"
                                android:background="#d30059"
                                android:gravity="center"
                                android:text="Click"
                                android:textAppearance="?android:attr/textAppearanceMedium" />
                        </TableRow>

                        <TableRow
                            android:id="@+id/tableRow2"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:background="@android:color/white" >

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="1dp"
                                android:layout_marginLeft="1dp"
                                android:layout_weight="1"
                                android:background="#d30059"
                                android:gravity="center"
                                android:text="Jan"
                                android:textAppearance="?android:attr/textAppearanceMedium" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="1dp"
                                android:layout_marginLeft="1dp"
                                android:layout_weight="1"
                                android:background="#d30059"
                                android:gravity="center"
                                android:text="11305"
                                android:textAppearance="?android:attr/textAppearanceMedium" />

                            <LinearLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="1dp"
                                android:layout_marginLeft="1dp"
                                android:layout_marginRight="1dp"
                                android:layout_weight="1"
                                android:background="#d30059"
                                android:gravity="center"
                                android:orientation="vertical" >

                                <TextView
                                    android:id="@+id/txtDetailsOneId"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_weight="1"
                                    android:background="#000000"
                                    android:text="DETAILS"
                                    android:textAppearance="?android:attr/textAppearanceMedium" />
                            </LinearLayout>
                        </TableRow>

                        <TableRow
                            android:id="@+id/tableRow3"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:background="@android:color/white" >

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="1dp"
                                android:layout_marginLeft="1dp"
                                android:layout_weight="1"
                                android:background="#d30059"
                                android:gravity="center"
                                android:text="Feb"
                                android:textAppearance="?android:attr/textAppearanceMedium" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="1dp"
                                android:layout_marginLeft="1dp"
                                android:layout_weight="1"
                                android:background="#d30059"
                                android:gravity="center"
                                android:text="11405"
                                android:textAppearance="?android:attr/textAppearanceMedium" />

                            <LinearLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="1dp"
                                android:layout_marginLeft="1dp"
                                android:layout_marginRight="1dp"
                                android:layout_weight="1"
                                android:background="#d30059"
                                android:gravity="center"
                                android:orientation="vertical" >

                                <TextView
                                    android:id="@+id/txtDetailsTwoId"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_weight="1"
                                    android:background="#000000"
                                    android:text="DETAILS"
                                    android:textAppearance="?android:attr/textAppearanceMedium" />
                            </LinearLayout>
                        </TableRow>

                        <TableRow
                            android:id="@+id/tableRow4"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" >
                        </TableRow>
                    </TableLayout>
                </LinearLayout>
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="50dp" >

                <Button
                    android:id="@+id/btnMainMenuId"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:layout_marginTop="5dp"
                    android:text="MAIN MENU"
                    android:textColor="@android:color/white"
                    android:textSize="12sp" />
            </LinearLayout>
        </LinearLayout> 
```

* * *

***快照***

![在此处输入图像描述](../Images/6f20124387f7772e80062019fc187a29.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-12-03T10:46:45.340

回答这个问题已经很晚了，但这是正确的方法。

对于行之间的分隔符：

```
<TableLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:divider="@color/colorPrimary"
    android:showDividers="middle"> 
```

对于列之间的分隔符：

```
<TableRow
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:divider="@color/colorPrimary"
    android:showDividers="middle"> 
```

解释：

中的分隔符标签`<TableLayout>`用于在其直接子项之间放置分隔符，即**Rows**。

虽然分隔符标签`<TableRow>`用于在其直接子项之间放置分隔符，即**列**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-14T10:33:11.930

我想要的是这样的桌子

![带有垂直分隔线的表格图像](../Images/a3610908fe5dff131d0de557af0b902f.png)

我在我的styles.xml中添加了这个

```
 <style name="Divider">
        <item name="android:layout_width">1dip</item>
        <item name="android:layout_height">match_parent</item>
        <item name="android:background">@color/divider_color</item>
    </style>

    <style name="Divider_invisible">
        <item name="android:layout_width">1dip</item>
        <item name="android:layout_height">match_parent</item>
    </style>

Then in my table layout 

 <TableLayout
            android:id="@+id/table"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:stretchColumns="*" >

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:background="#92C94A" >

                <TextView
                    android:id="@+id/textView11"
                    android:paddingBottom="10dp"
                    android:paddingLeft="5dp"
                    android:paddingRight="5dp"
                    android:paddingTop="10dp" />

                <LinearLayout
                    android:layout_width="1dp"
                    android:layout_height="match_parent" >

                    <View style="@style/Divider_invisible" />
                </LinearLayout>

                <TextView
                    android:id="@+id/textView12"
                    android:paddingBottom="10dp"
                    android:paddingLeft="5dp"
                    android:paddingRight="5dp"
                    android:paddingTop="10dp"
                    android:text="@string/main_wo_colon"
                    android:textColor="@color/white"
                    android:textSize="16sp" />

                <LinearLayout
                    android:layout_width="1dp"
                    android:layout_height="match_parent" >

                    <View style="@style/Divider" />
                </LinearLayout>

                <TextView
                    android:id="@+id/textView13"
                    android:paddingBottom="10dp"
                    android:paddingLeft="5dp"
                    android:paddingRight="5dp"
                    android:paddingTop="10dp"
                    android:text="@string/side_wo_colon"
                    android:textColor="@color/white"
                    android:textSize="16sp" />

                <LinearLayout
                    android:layout_width="1dp"
                    android:layout_height="match_parent" >

                    <View style="@style/Divider" />
                </LinearLayout>

                <TextView
                    android:id="@+id/textView14"
                    android:paddingBottom="10dp"
                    android:paddingLeft="5dp"
                    android:paddingRight="5dp"
                    android:paddingTop="10dp"
                    android:text="@string/total"
                    android:textColor="@color/white"
                    android:textSize="16sp" />
            </TableRow>

            <!-- display this button in 3rd column via layout_column(zero based) -->

            <TableRow
                android:id="@+id/tableRow2"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="#6F9C33" >

                <TextView
                    android:id="@+id/textView21"
                    android:padding="5dp"
                    android:text="@string/servings"
                    android:textColor="@color/white"
                    android:textSize="16sp" />

                <LinearLayout
                    android:layout_width="1dp"
                    android:layout_height="match_parent" >

                    <View style="@style/Divider" />
                </LinearLayout>

..........
.......
...... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T22:38:08.083

In a list with a vertical divider use the ImageView as follows:

```
<ImageView 
    android:id="@+id/divider"
    android:contentDescription="@string/divider"
    android:layout_width="1dp"
    android:layout_height="65dp"
    android:layout_marginTop="8sp" 
    android:background="#3B3B3B"
    /> 
```

To avoid showing a divider when there aren't elements in the list you can delete the `android:background="#3B3B3B"` line and set it programmatically:

```
((ImageView) view.findViewById(R.id.divider)).setBackgroundColor(Color.parseColor("#3B3B3B")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-16T07:36:29.210

尝试设置第二个 textview marginleft=1dp。如果你不想要分隔线设置 marginleft = 0dp

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-12T22:29:08.200

由于 tablelayout 不直接提供此功能，因此一种可能的方式可能是 framelayout。将所需的表格放在另一个 background_table 上方，该表格只有一行，高度/宽度为“match_parent”。添加具有所需布局权重的 3 列。将垂直分隔线图像视图添加到第二列。主表也应该在它的行中使用相同的 layout_weihts +margin 以看起来不错。

水平分隔线可能可以通过在“待分离”表行之间添加一个图像视图来实现。

尚未测试，只是一种方法

奥奈

# html - JSF 2.0 EL 标签不在浏览器中呈现

> ID：10073212
> 
> 赞同：1
> 
> 时间：2012-04-09T12:32:02.383
> 
> 标签：html, eclipse, jsf-2, tomcat7, el

以下是我`index.html`包含 JSF 的文件：http: [//pastie.org/3755252](http://pastie.org/3755252)

当我`Run as > Run on Server`在 Eclipse Indigo 中选择 (Tomcat 7.0.12) 时，我得到一个页面，其中仅显示以下内容：

```
You have login attempts left. 
```

同样的情况也发生在 Chrome 中。虽然在查看页面的源代码后，它显示的内容与我在 Eclipse 中编写的一样（之前的粘贴文件），但似乎应该将其翻译为 html。

这是我的 Member.java 文件：[http](http://pastie.org/3755277) ://pastie.org/3755277 这是我的 web.xml：[http ://pastie.org/3755284](http://pastie.org/3755284)

在我注意到我将 JSF 2.0 与 JSF1.* 语法混合之前，它曾经可以工作。然后我将我的 *.jsp 更改为 *.html 并且它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:24:15.787

Pastie 似乎已关闭（我无法读取您的文件）...但 Tomcat 不是完整的 Java EE 容器。您需要 Mojarra 运行时。你的构建中包含它吗？

编辑：NM 又回来了。我在你的 web.xml 中看到了 JSF servlet，所以你可以忽略这个答案。

EDIT2：将此添加到您的 web.xml：

```
 <context-param>
  <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
  <param-value>.xhtml</param-value>
 </context-param> 
```

然后将您的 .html 文件重命名为 .xhtml。我感觉 servlet 不知道它应该使用 JSF 呈现您的文件。

EDIT3：所以我认为正在发生的事情是您对服务器是否应该使用 Faces 呈现页面感到困惑。您的网址栏中的网址是“localhost/app/faces/index.html”，它与文件完全匹配。那么它应该做一个 sendfile 还是应该通过 servlet 运行它？重命名为 .xhtml 的原因可能是因为它在内部知道必须将 .html 请求映射到 .xhtml 文件。

所以也许尝试将你的文件重命名为 .html5，然后在你的 web.xml 中设置它：

```
 <context-param>
  <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
  <param-value>.html5</param-value>
 </context-param> 
```

我认为任何扩展都可以工作......你也可以这样做：

```
 <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
  </servlet-mapping>
  <context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.html</param-value>
  </context-param> 
```

那么您的主页将是`http://localhost/app/index.jsf`

# android - ViewPager.setOffscreenPageLimit(0) 无法按预期工作

> ID：10073214
> 
> 赞同：103
> 
> 时间：2012-04-09T12:32:09.863
> 
> 标签：android, android-viewpager, android-support-library

我在我的`ViewPager`实例中使用的片段非常耗费资源，所以我只想一次加载一个。当我尝试以下操作时：

```
mViewPager.setOffscreenPageLimit(0);
mViewPager.setAdapter(mPagerAdapter); 
```

我的`FragmentStatePagerAdapter.getItem(int position)`override 函数被调用了 3 次，这就是我调用`mViewPager.setOffscreenPageLimit(1)`. 我希望它只被调用一次，因为我指定了 0 个屏幕外页面。

我相信我正确调用了所有内容，因为如果我调用`mViewPager.setOffscreenPageLimit(2)`,`FragmentStatePagerAdapter.getItem(int position)`会像我预期的那样被调用 5 次。

ViewPager 是否需要至少 1 个屏幕外页面，或者我在这里做错了什么？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2014-09-04T23:08:35.777

我发现最好的方法是[setUserVisibleHint](http://developer.android.com/reference/android/support/v4/app/Fragment.html#setUserVisibleHint(boolean))
将它添加到你的片段

```
@Override
public void setUserVisibleHint(boolean isVisibleToUser) {
    super.setUserVisibleHint(isVisibleToUser);
    if (isVisibleToUser) {
        // load data here
    }else{
       // fragment is no longer visible
    }
} 
```

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2012-04-09T13:27:29.743

> ViewPager 是否需要至少 1 个屏幕外页面

是的。如果我正确阅读了源代码，您应该会在 LogCat 中收到关于此的警告，例如：

```
Requested offscreen page limit 0 too small; defaulting to 1 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-06-20T01:47:03.817

You can try like this :

```
public abstract class LazyFragment extends Fragment {
    protected boolean isVisible;
    /**
     * 在这里实现Fragment数据的缓加载.
     * @param isVisibleToUser
     */
    @Override
    public void setUserVisibleHint(boolean isVisibleToUser) {
        super.setUserVisibleHint(isVisibleToUser);
        if(getUserVisibleHint()) {
            isVisible = true;
            onVisible();
        } else {
            isVisible = false;
            onInvisible();
        }
    }
    protected void onVisible(){
        lazyLoad();
    }
    protected abstract void lazyLoad();
    protected void onInvisible(){}
```

```
protected abstract void lazyLoad();
protected void onInvisible(){} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-09-23T05:30:22.360

首先添加

```
 boolean isFragmentLoaded = false; 
```

比

```
@Override
public void setUserVisibleHint(boolean isVisibleToUser) {
    super.setUserVisibleHint(isVisibleToUser);
    if (isVisibleToUser && !isFragmentLoaded) {
        //Load Your Data Here like.... new GetContacts().execute();

        isFragmentLoaded = true;
    }
else{
     }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-09T01:27:44.377

这可能是旧线程，但这似乎对我有用。重写此函数：

```
@Override
public void setMenuVisibility(boolean menuVisible) { 
    super.setMenuVisibility(menuVisible);

    if ( menuVisible ) {
        /**
         * Load your stuffs here.
         */
    } else  { 
        /**
         * Fragment not currently Visible.
         */
    } 
} 
```

快乐的编码...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-23T08:47:11.170

ViewPager 默认加载下一页（片段），您无法通过 setOffscreenPageLimit(0) 更改。但是你可以做一些事情来破解。您可以在包含 ViewPager 的 Activity 中实现 onPageSelected 函数。在下一个片段（您不想加载）中，您编写了一个函数，比如说 showViewContent()，您在其中放入所有资源消耗的初始化代码，并且在 onResume() 方法之前什么都不做。然后在 onPageSelected 中调用 showViewContent() 函数。希望这会有所帮助。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-09-24T11:54:05.657

就我而言，我想在视图中开始一些动画，但是 setUserVisibleHint 遇到了一些问题......
我的解决方案是：

1/ addOnPageChangeListener 为您的适配器：

```
mViewPager.addOnPageChangeListener(this); 
```

2/ 实现 OnPageChangeListener ：

```
public class PagesFragment extends Fragment implements ViewPager.OnPageChangeListener 
```

3/ 覆盖 3 种方法：

```
@Override
public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels)
{

}

@Override
public void onPageSelected(int position)
{ 
}

@Override
public void onPageScrollStateChanged(int state)
{
} 
```

4/ 在你的类上声明和初始化这个变量

```
private static int mTabState = 1; 
```

**注意**：我的适配器中有三个片段，并将 mTab​​State 用于 setCurrentItem 和适配器的当前位置，以识别及时向用户显示哪个片段... 5/ 在 onPageSelected 方法中添加以下代码：

```
if (mTabState == 0 || position == 0)
    {
        Intent intent = new Intent("animation");
        intent.putExtra("current_position", position);
        LocalBroadcastManager.getInstance(mContext).sendBroadcast(intent);
    } 
```

如果上一页或当前页是第 0 页（位置 0 的片段），则执行此操作

6/ 现在在你的片段类中（片段在适配器的位置 0），你必须创建广播接收器并在 onResume 方法中注册它并在 onPause 方法中取消注册它：

```
BroadcastReceiver broadcastReceiver = new BroadcastReceiver()
{
    @Override
    public void onReceive(Context context, Intent intent)
    {
        if (Objects.equals(intent.getAction(), "animation"))
        {
            int currentPosition = intent.getIntExtra("current_position", 0);
            if (currentPosition == 0)
            {
                startAnimation();
                setViewsVisible();
            } else
            {
                setViewsInvisible();
            }
        }
    }
};

@Override
public void onResume()
{
    super.onResume();
    LocalBroadcastManager.getInstance(mContext).registerReceiver(broadcastReceiver, new IntentFilter("animation"));
}

@Override
public void onPause()
{
    super.onPause();
    LocalBroadcastManager.getInstance(mContext).unregisterReceiver(broadcastReceiver);
} 
```

**摘要：**我有片段寻呼适配器女巫在其中显示三个片段，我想在适配器的位置 0 的片段中的视图上显示一些动画，为此我使用广播接收器。选择片段时，我启动动画方法并向用户显示视图，当片段未向用户显示时，我尝试隐藏视图...

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-02-13T15:51:47.983

查看只有一页的寻呼机：

这是 2021 年 - 2 月，Alhamdulillah，我只能使用 viewPager 添加一页。该方法是使用 : `ViewPager`、`FragmentPagerAdapter`、`Tablayout`和 a `fragment`。就我而言，我可以用 many 填充 many `Pages`，`tabs`或者只`Page`用 one填充`Tab`。当一个标签页和一个页面向左或向右滑动时，我可以设法更改文档的章节（我接下来要显示）。当有很多页面和很多标签时，我可以更改整本书的文档。

在主要的 Activity Oncreate 中：（这是我的工作代码方法，我的工作代码没有改变任何内容）：

```
if(getIntent()!=null){
            if(getIntent().getStringExtra("ONLY_TAFHEEM")!=null)
             sectionsPagerAdapter = new SectionsPagerAdapter(this, getSupportFragmentManager(), suraName, suraId, ayatId, true);
            else
            sectionsPagerAdapter = new SectionsPagerAdapter(this, getSupportFragmentManager(), suraName, suraId, ayatId, false);
        }else {
            sectionsPagerAdapter = new SectionsPagerAdapter(this, getSupportFragmentManager(), suraName, suraId, ayatId, false);
        }

        final ViewPager viewPager = findViewById(R.id.view_pager);
        viewPager.setAdapter(sectionsPagerAdapter);
        tabsLayout = findViewById(R.id.tabs);
        tabsLayout.animate();

        tabsLayout.setupWithViewPager(viewPager); 
```

在适配器中：

```
 @NonNull
    @Override
    public Fragment getItem(int position) {

    // getItem is called to instantiate the fragment for the given page.
    // Return a PlaceholderFragment (defined as a static inner class below).
    return PlaceholderFragment.sendData(mContext, postion, suraName, suraId, ayahId, ARABIC_AYAH, BENGALI_AYAH, actualDbNames[position], tafsirDisplayNames[position]);
}

@Nullable
@Override
public CharSequence getPageTitle(int position) {

    return tafsirDisplayNames[position];
}

@Override
public int getCount() {
   // this is the tricky part // Show pages according to array length. // this may only one // this is the tricky part : 
    return tafsirDisplayNames.length;
} 
```

最后是片段公共构造函数：

```
 public static PlaceholderFragment sendData(Context mContext, int tabIndex, String suraName, String suraId, String ayahNumber, String arabicAyah, String bengaliAyah, String actualDbName, String displayDbName) {

        Log.i("PlaceHolder", "Tafhim sendData: " + bengaliAyah);
        PlaceholderFragment fragment = new PlaceholderFragment();
        Bundle bundle = new Bundle();
        mContext_ = mContext;
        BENGALI_AYAH = bengaliAyah;
        _DISPLAY_DB_NAME = displayDbName;
        bundle.putInt(ARG_SECTION_NUMBER, tabIndex);
        bundle.putString(SURA_NAME, suraName);
        bundle.putString(SURA_ID, suraId);
        bundle.putString(AYAH_NUMBER, ayahNumber);
        bundle.putString(ARABIC_AYAH, arabicAyah);
        bundle.putString(ACTUAL_DB_NAME, actualDbName);
        bundle.putString(DISPLAY_DB_NAME, displayDbName);
        fragment.setArguments(bundle);
        return fragment;
    } 
```

就是这样，只需将数组（标签标签）传递给适配器，（它可能只有一个元素，以防万一，一页），根据我的需要，我可以填充一页或多页，并据此填充一个选项卡或多个选项卡：在上面的代码中，数组是：`tafsirDisplayNames`。我也可以在适配器中手动创建数组，当适配器第一次调用时，或者，在重新创建 MainActivity 时使用 +-elements 重新创建数组。

就是这样，所有，Alhamdulillah，快乐编码.......

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-06-03T06:28:15.713

请尝试此代码以解决 Viewpager 中刷新视图的问题......

```
/* DO NOT FORGET! The ViewPager requires at least “1” minimum OffscreenPageLimit */
int limit = (mAdapter.getCount() > 1 ? mAdapter.getCount() - 1 : 1);
mViewPager.setOffscreenPageLimit(limit); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-07-06T12:41:12.777

对于“instantiateItem”功能，只需准备片段，但不要加载繁重的内容。

使用 "onPageChangeListener" ，这样每次您转到特定页面时，您都会加载其繁重的内容并显示它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-04-05T08:11:10.160

```
// step 1: add  BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT FragmentPagerAdapter contractor

    public class BottomTabViewPager extends FragmentPagerAdapter {

        private final List<Fragment> mFragmentList = new ArrayList<>();
        private final List<String> mFragmentTitleList = new ArrayList<>();

        public BottomTabViewPager(FragmentManager manager) {
            super(manager, BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT);

        }

        @Override
        public Fragment getItem(int position) {
            return mFragmentList.get(position);
        }

        @Override
        public int getCount() {
            return mFragmentList.size();
        }

        public void addFragment(Fragment fragment, String title) {
            mFragmentList.add(fragment);
            mFragmentTitleList.add(title);
        }

        public void addTabs(String title) {

            mFragmentTitleList.add(title);
        }

        @Override
        public CharSequence getPageTitle(int position) {
            return mFragmentTitleList.get(position);
            // return null;
        }
    }

   // step  2:  You can try like this :

    public class MyFragment extends Fragment  {

        public MyFragment() {
            // Required empty public constructor
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                                 Bundle savedInstanceState) {
            // Inflate the layout for this fragment
            View view = inflater.inflate(R.layout.fragment_ui, container, false);

            return view;
        }

     @Override
        public void onResume() {
            super.onResume();
            /**
             * Load your stuffs here.
             */
        }

      } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-08-20T11:36:32.353

我有同样的问题。我在这个网站上找到了一些有用的代码并对其进行了转换。

mViewPager.setOffscreenPageLimit(...); 的最小值 为 1，因此即使您将其更改为 0，您仍将加载 2 个页面。

首先要做的是创建一个静态 int，我们将调用 maxPageCount 并覆盖 FragmentStatePagerAdapter 方法 getCount() 以返回 maxPageCount：

```
 @Override
    public int getCount() {
        return maxPageCount;
    } 
```

然后创建一个可从程序中的任何位置访问的静态方法，该方法将允许您更改此 maxCount：

```
public static void addPage(){
    maxPageCount++; //or maxPageCount = fragmentPosition+2
    mFragmentStatePagerAdapter.notifyDataSetChanged(); //notifyDataSetChanged is important here.
} 
```

现在将 maxPageCount 初始化为 1。您可以随时添加另一个页面。在我的情况下，当我需要用户在生成另一个页面之前先处理当前页面。他这样做，然后可以毫无问题地滑动到下一页。

希望它可以帮助某人。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-08-24T11:14:14.593

使用这个 // 创建用于获取数据的布尔值 private boolean isViewShown = false;

```
@Override
public void setUserVisibleHint(boolean isVisibleToUser) {
    super.setUserVisibleHint(isVisibleToUser);
    if (getView() != null) {
        isViewShown = true;
        // fetchdata() contains logic to show data when page is selected mostly asynctask to fill the data
        fetchData();
    } else {
        isViewShown = false;
    }
} 
```

# unix - 在 unix 中使用“yes”命令会浪费大量 CPU 周期吗？

> ID：10073218
> 
> 赞同：2
> 
> 时间：2012-04-09T12:32:29.610
> 
> 标签：unix

使用“是”命令会浪费大量 CPU 周期吗？

我有一个长时间运行的脚本（脚本代码不在我的控制范围内），它只接受一次输入。然后脚本运行很长时间。为了自动化，我使用“yes”命令来提供输入

是的你好| 我的脚本

yes 命令会窃取/浪费大量 CPU 周期吗？根据我阅读的文档，它不断将字符串参数打印到管道程序

我给了顶级命令，我没有在顶部看到“是”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:35:34.177

`yes`将在有机会时打印字符串“hello”——这意味着接收端（您的脚本）必须等待 I/O（即，期待输入）。所以：不，`yes`接收端不等待输入时不占用任何CPU，进程被阻塞。

查看进程的运行状态`yes`以`ps auxf`进行确认。

# c++ - 从现有的 mfc 项目创建 dll

> ID：10073223
> 
> 赞同：0
> 
> 时间：2012-04-09T12:32:59.720
> 
> 标签：c++, dll, mfc

我有一个 MFC 项目，其中包含许多项目。现在我想制作这个项目的 dll 文件，谁能提供有关如何**从现有 mfc 项目创建 dll 的**信息？

**编辑**

我试过以下

*   项目属性 > 配置 > 常规 > 配置类型，应从应用程序 (.exe) 更改为动态库 (.dll)
*   项目属性 > 配置 > C\C++ > 常规 > 预处理器定义，添加 _AFXDLL

我已经为启动项目做了这个，它是否包含 dll 中的所有依赖项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:15:44.823

您是否尝试过：
1\. 右键单击​​解决方案资源管理器下的“解决方案 XXX”
2\. 单击“新建项目”
3\. 弹出对话框
4\. 选择 V​​isual C++ -> MFC -> MFC DLL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:19:47.933

听起来您想采用多个项目，每个项目输出一个 dll，然后将它们编译成一个 dll。如果这是正确的，那么一种方法是将解决方案中的所有类添加到一个项目中。虽然我看不出这是一个有用的开发决定。你为什么要这个？

# vbscript - 使用 vbscript 保存快照

> ID：10073224
> 
> 赞同：3
> 
> 时间：2012-04-09T12:33:08.713
> 
> 标签：vbscript, automation, screenshot, clipboard, browser-automation

我是 vbscript 的新手。我想保存使用 vbscript 打开的 Internet Explorer 窗口的 vbscript 拍摄的快照。

加载页面的代码

```
Dim IE, stateString
Set IE = WScript.CreateObject("InternetExplorer.Application")
ie.toolbar = 1
ie.statusbar = 1
ie.width = 999
ie.height = 500
ie.left = 20
ie.theatermode = false
ie.theatermode = true
ie.theatermode = false
ie.top = 50
ie.navigate("file:///C:\Users\Vinit_Tiwari\Documents\vbscripts\someform.html")
'stateString = cstr(ie.readystate)
waitforload(ie)

ie.visible = 1

Set wshShell = CreateObject("Wscript.Shell")

wshShell.AppActivate "Some Form"
wshShell.SendKeys "% x" 
```

拍摄快照的代码

```
Dim oWordBasic
set oWordBasic = CreateObject("Word.Basic")
oWordBasic.sendkeys "{prtsc}"
oWordBasic.AppClose "Microsoft Word"
Set oWordBasic = Nothing
Wscript.Sleep 2000 
```

保存快照

```
dim paint
set paint = wshShell.exec("mspaint")
do while paint.status = 0:loop
wshShell.appactivate("untitled-Paint")'this returns false
Wscript.sleep 500
WshShell.SendKeys "^v"
wscript.sleep 500
wshshell.sendkeys "^s"
wscript.sleep 500
wshshell.sendkeys "d:\test.png"
wscript.sleep 500
wshell.sendkeys "{Enter}"
Set wshshell = Nothing 
```

实际上，先前打开的 ie 窗口具有焦点，并且击键被发送到 ie 而不是绘图。那么是否有任何功能可以执行相反的工作`AppActivate`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:42:20.153

这行不通。按下 Print Screen 按钮时，Microsoft Word 处于焦点位置。您可以通过完全不使用 Microsoft Word 轻松消除此问题。这不是必需的。Print Screen 功能是系统热键，与 Microsoft Word 无关。您应该使用 Alt+PrintScreen 组合将当前聚焦窗口的屏幕截图捕获到剪贴板。

其次，如果Paint而不是IE而不是焦点，那是因为你的窗口标题错误。你正在正确地做那部分。如果 AppActivate 找不到具有指定标题的窗口，则返回 false。老实说，Paint 应该已经有了焦点，但最好确保首先激活窗口。

另外，这是一个非常古老的系统吗？出于好奇，您为什么还要使用 Word.Basic 自动化对象？

# android - 动态微调器选项未打开

> ID：10073225
> 
> 赞同：0
> 
> 时间：2012-04-09T12:33:15.610
> 
> 标签：android, arrays, spinner, adapter

我在 TabActivity 中有一个将动态生成的 Spinner。只是为了测试，我手动进行了：

```
Spinner sp_departure = (Spinner) findViewById(R.id.spinner_departure);

// This array will be generated through a database
String[] array_spinner = new String[2];
array_spinner[0] = "Departure 1";
array_spinner[1] = "Departure 2";

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, array_spinner);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
sp_departure.setAdapter(adapter); 
```

当我运行应用程序时看起来不错，因为选择的选项是“Departure 1”，但是当我单击打开选项时出现一些错误并且应用程序已关闭。

知道有什么问题吗？

提前致谢。

**- 更新**

这是由 LogCat 生成的：http: [//pastebin.com/1QPKZdKB](http://pastebin.com/1QPKZdKB)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:38:56.750

是的，您可能已经设置`setContetView(R.layout.yourxml`）...，

将其更改为：

```
View viewToLoad = LayoutInflater.from(this.getParent()).inflate(R.layout.yourxm, null);
        this.setContentView(viewToLoad); 
```

并使用

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(getParent(), android.R.layout.simple_spinner_item, array_spinner); 
```

试试吧，也许对你有帮助

# jquery - facebook注册不显示

> ID：10073228
> 
> 赞同：0
> 
> 时间：2012-04-09T12:33:46.123
> 
> 标签：jquery, facebook

我正在检查用户是否注册了我的应用程序，如果没有，我正在尝试显示一个 facebook 注册按钮，但它没有显示出来。

这是我网页页脚中的 javascript 代码：

```
<div id="fb-root"></div>
<script type="text/javascript">
  window.fbAsyncInit = function() {
    FB.init({
      appId   : '281914178557709',
      status  : true, // check login status
      cookie  : true, // enable cookies to allow the server to access the session
      xfbml   : true // parse XFBML
    });

    FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {
        var uid = response.authResponse.userID;
        var accessToken = response.authResponse.accessToken;
      } 
      else if (response.status === 'not_authorized') {
        alert("Show registration");
        $('#fb_register').html('<label class="control-label" for="fname">&nbsp;</label><div class="controls"><fb:login-button registration-url="/register_facebook.php" /></div>');
      }
   });             
};

(function() {
  var e = document.createElement('script');
  e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
  e.async = true;
  document.getElementById('fb-root').appendChild(e);
}()); 
```

我的 div 标签就是这样的：

```
<div class="control-group" id="fb_register"></div> 
```

我看到我的警报消息，所以我知道我点击了正确的区域，但按钮无法呈现。如果我使用纯文本，它会呈现。知道为什么 XFBML 没有被渲染吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:20:42.413

我相信在插入 facebook 登录按钮之前正在解析 xfbml，最好的方法是将 facebook 登录按钮包装在 div 中并将其显示设置为无，然后切换它的显示以阻止用户通过身份验证。

# c# - 如何阻止用户在 HTML 文件输入控件中手动编辑文件路径？

> ID：10073233
> 
> 赞同：0
> 
> 时间：2012-04-09T12:34:02.063
> 
> 标签：c#, javascript, asp.net

我有一个带有 5 个 HTML 文件输入控件的 asp.net 表单，带有 runat=server 和一个提交按钮。用户选择文件并单击提交按钮后，文件将上传到服务器。

问题是 HTML 文件输入控件是可编辑的，用户可以在从浏览按钮中选择文件后编辑路径。

如果他输入了一个无效的文件路径，则该文件不会上传，因为它不存在。

如何阻止用户手动更改文件路径？我试图使控件只读，但它也禁用了浏览按钮。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T12:35:52.280

你不能。编写服务器端逻辑以应对丢失的上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:42:36.533

您可以尝试使用隐藏字段，当用户从浏览中选择文件时，它也会填充到隐藏字段。然后，当他们上传时，您要么从隐藏字段中读取上传内容，要么使用 JS 将值替换回原始控件并从中读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:57:04.237

这是你想要的吗...

您可以这样做，当用户选择文件时隐藏控件，如果他不同意，则仅在 div 中显示用户的路径，让他单击路径 div 旁边名为“选择另一个”的链接，因此当用户单击“选择另一个”切换刷新前一个值的相同 div

看到这个小提琴：http: [//jsfiddle.net/T2D3X/](http://jsfiddle.net/T2D3X/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T04:45:26.917

虽然布赖恩的建议有效（感谢布赖恩），但最终我们决定遵循服务器端处理方法。因为在无效文件的情况下，文件大小为零，所以响应是即时的，我们不需要等到文件上传，因为在这种情况下首先没有文件。

```
//check if file exists

                if (uploadCtrl.PostedFile.ContentLength > 0)
                {
                    uploadCtrl.PostedFile.SaveAs(fileNameWithPath);
                    uploadCtrl.Dispose();
                }
                else
                {
                    fileNameWithPath = "invalid";
                } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T05:03:43.863

您还可以使用以下方法：

验证前一：http: [//jsfiddle.net/T2D3X/1/](http://jsfiddle.net/T2D3X/1/)

一经验证：http: [//jsfiddle.net/T2D3X/2/](http://jsfiddle.net/T2D3X/2/)

在我重新修改之前，我的朋友发布了相同的答案。

第二个链接上有一些内部 jsfiddle 错误，您可以忽略它，我刚刚添加了更多功能来检查提交您发送的确切值。

如果您觉得它有帮助，请告诉我们；）谢谢！

# opengl - 常规OpenGL下学习OpenGL ES 2.0——编译

> ID：10073237
> 
> 赞同：1
> 
> 时间：2012-04-09T12:34:13.423
> 
> 标签：opengl, opengl-es, opengl-es-2.0

我正在学习 OpenGL，目的是为 Android / iPhone 构建 OpenGL ES 应用程序。

因为我从一开始就学习它，所以我更愿意学习新规范，而不接触旧的东西（glBegin 等）。不幸的是，当我通过一些教程并实现一些东西时，事实证明这些示例 与 ES 2.0*不兼容。*例如，在[那些优秀的教程](http://www.lighthouse3d.com/tutorials/glsl-tutorial/lighting/)之后，我知道如何实现灯光，什么在我的 PC 上有效，但在移动设备上无效（`gl_LightSource`后者[不支持](http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=269233)）。

我想做的是在我的 PC 上开发代码，并将API*限制*为 OpenGL ES 支持的命令（例如，在 上抛出错误`glLight`）。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:56:34.523

假设您使用 Windows 进行开发，那么您可以使用[Google ANGLE](http://code.google.com/p/angleproject/)将 API 限制为仅 OpenGL ES 2.0 。ANGLE 基本上是对 DirectX 的封装，但您可以通过完全符合标准的 OpenGL ES 2.0 接口来使用它。

如果您有 AMD Radeon GPU，您还有另一个选择：[AMD OpenGL ES SDK](http://developer.amd.com/samples/sampleapps/pages/AMDOpenGLESSDK.aspx)还提供完全兼容的 2.0 接口。

在这两种情况下，如果您不小心使用了非 OpenGL ES 2.0 功能，代码将不会在运行时编译或失败，以防参数组合不受支持。着色器也是如此，`glCompileShader`调用将失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T14:53:32.593

如果您想学习 OpenGL ES 2 并确保您只使用与 OpenGL ES 2 兼容的调用和技术，请考虑学习 WebGL。

WebGL 几乎与 OpenGL ES 2 相同。您可以获得 javasript 控制台（带有[firebug](http://getfirebug.com/)或 chrome 的内置开发人员工具）的优势，并且在某些环境中（我认为 windows 上的 chrome？）您在做某事时会收到非常有用的错误消息错误的。除此之外，您还可以自动访问多达 4 个 WebGL 实现来进行测试（firefox、chrome、safari、opera），并且您拥有一套非常好的工具来测试您的 OpengGL。

这基本上就是我学习 OpenGL ES 2 的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T14:19:01.577

如[Mali GPU OpenGL ES 应用程序开发指南](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0363d/CJAJHGHF.html)中所述：

> OpenGL ES 1.1 和 OpenGL ES 2.0 是完整 OpenGL 标准的子集。使用 OpenGL ES API 时，在开发应用程序时必须注意一些限制。
> 
> 例如，以下 OpenGL 功能在 OpenGL ES 1.1 或 OpenGL ES 2.0 中均不存在：
> 
> 1.  不支持 glBegin 或 glEnd。请改用顶点数组和顶点缓冲区对象。
>     
>     
> 2.  唯一支持的光栅化基元是点、线和三角形。不支持四边形。
>     
>     
> 3.  没有多项式函数评估阶段。
>     
>     
> 4.  您不能将片段块直接发送到单个片段操作。
>     
>     
> 5.  不支持显示列表。
>     
>     
> 
> 此外，OpenGL ES 2.0 中不存在以下 OpenGL 功能：
> 
> 1.  不支持固定功能的图形管线。您必须使用自己的顶点和片段着色器程序。
>     
>     
> 2.  不支持查看 glFrustumf 等转换。您必须计算自己的变换矩阵，将其作为统一变量传递给顶点着色器，并在着色器中执行矩阵乘法。
>     
>     
> 3.  不支持 glVertexPointer 和 glNormalPointer 等专用函数。请改用 glVertexAttribPointer。

您可以随时参考[OpenGL ES 规范](http://www.khronos.org/opengles/2_X/)并查看是否支持某个功能/特性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T12:53:59.963

在[http://www.learnopengles.com/](http://www.learnopengles.com/)上有一组很好的 OpenGL ES 2.0 课程。在 PC 上开发可以尝试使用模拟器；许多不同的 GPU 供应商提供他们自己的仿真器，将调用转换为桌面 GL。但是，确保您的代码按预期工作的最佳方法是在实际设备上运行它。

编辑：Android 的新模拟器支持 OpenGL ES 2.0：[http ://android-developers.blogspot.ca/2012/04/faster-emulator-with-better-hardware.html](http://android-developers.blogspot.ca/2012/04/faster-emulator-with-better-hardware.html)

# java - Java 源代码的版权/许可问题

> ID：10073239
> 
> 赞同：-1
> 
> 时间：2012-04-09T12:34:13.497
> 
> 标签：java, licensing

曾几何时（实际上是一周前）我从一些开放的 github 存储库中下载了一小段 Java 源代码。github 和来源都不包含任何版权/许可参考。作者没有反应。

所以问题是：我可以将其视为公共领域吗？或者我应该使用任何其他方法来使用这些来源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:43:58.657

如果您不知道代码的许可证，那么您必须像没有许可证一样对待它。而当没有许可证时，这基本上意味着，你不能对代码做任何事情。这是因为代码的所有权利仍归作者所有。

要成为“公共领域”，必须有这样的声明——这就像一个许可证。

这不是一厢情愿的想法（如“我可以将其视为公共领域吗？”）是合适的。

# plsql - 如何在 UTL_FILE 过程中包含一个巨大的 SQL 语句？

> ID：10073241
> 
> 赞同：-1
> 
> 时间：2012-04-09T12:34:22.830
> 
> 标签：plsql, utl-file

我使用 UTL_FILE 编写了一个程序：

```
CREATE OR REPLACE PROCEDURE UTL_CREATE_FILE 
(
       output_file in  UTL_FILE.file_type,
       log_file    in UTL_FILE.file_type,
       filename    in VARCHAR2 (64),
       ddate       in VARCHAR2 (19),
       sep         in NVARCHAR2 (3)

)

  IS

   BEGIN

           sep := Chr(9);
           ddate := TO_CHAR (SYSDATE, 'YYYYMMDD');
           filename := 'EXT' || ddate || '.dat';
           output_file := UTL_FILE.fopen ('C:/home/S/', filename, 'w', 32000);
           log_file := UTL_FILE.fopen ('C:/home/S/', 'WEEKLY.log', 'a', 32000);

           UTL_FILE.put_line (log_file, TO_CHAR (SYSDATE, 'DD-MM-YYYY HH24:MI:SS') || 'Started with file ' || filename);

   select 'HUGE SQL STATEMENT'|| sep || 'Anykey' as OUTLINE from DUAL;
          UTL_FILE.put_line (output_file, OUTLINE);
          UTL_FILE.fclose (output_file);
          UTL_FILE.put_line (log_file, TO_CHAR (SYSDATE, 'DD-MM-YYYY HH24:MI:SS') || 'Finished for file ' || filename);
          UTL_FILE.fclose (log_file);
  END; 
```

但 Toad 返回警告：已编译但存在编译错误。

有人可以帮助我吗？

因此，我想在 C:/home/S/ 目录中接收 EXT.DAT（和日志）。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:21:20.993

TOAD 应该给你编译错误——它们可能在一个单独的选项卡上（我已经有一段时间没有使用那个特定的 IDE了）。

但是，很容易发现一个大器：我们不能为在 IN 模式中定义的参数赋值。这些参数的目的是*调用程序*分配它们的值。

但是，在这种情况下，我认为您需要分配`ddate`and `filename`，因此您应该将它们移出过程的签名并进入其声明部分。

`sep`我会保留作为参数，但给它一个默认值。

请记住，SQL 将我们限制为每列 4000 个字符。因此，如果 'HUGE SQL STATEMENT' 超过 3993 个字符，您的代码将抛出运行时错误。

* * *

如果您犯了这些类型的错误，您可能没有跟上从 PL/SQL 编写文件的复杂性。我建议您阅读我[以前的答案](https://stackoverflow.com/a/9819328/146325)以及有关[此](https://stackoverflow.com/a/2753582/146325)主题的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:29:10.980

您应该能够将其附加到脚本的末尾以获取错误（我不使用 TOAD，但我希望它能够支持它）。它在最后一个结束之后;。

```
/
show errors; 
```

对我来说突出的编译错误 -

1.  正在分配参数。这作为“in”参数是非法的。它们似乎不用于输入，因此应该将它们从签名中删除。如果这是一个代码片段并且他们确实提供

# java - 出界异常。在哪里放置边界检查？

> ID：10073242
> 
> 赞同：-1
> 
> 时间：2012-04-09T12:34:30.253
> 
> 标签：java, runtime-error, maze, indexoutofboundsexception

我在哪里放置边界检查以便程序生成整个迷宫？代码应该打印一个网格，其中包含通过打破单元格之间的墙壁绘制的迷宫。然而，令我沮丧的是，网格在到达索引 0 或 24 时停止。我需要程序在它停止之前访问每个单元格（如果它进入边界，它会向后移动）。

这是我得到的上一个错误：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: -1
        at Grid.genRand(Grid.java:73)
        at Grid.main(Grid.java:35) 
```

这是源代码：

```
import java.awt.*;
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.util.ArrayList;

public class Grid extends Canvas {

    Cell[][] maze;
    int size;
    int pathSize;
    double width, height;
    ArrayList<int[]> coordinates = new ArrayList<int[]>();

    public Grid(int size, int h, int w) {
        this.size = size;
        maze = new Cell[size][size];
        for(int i = 0; i<size; i++){
            for(int a =0; a<size; a++){
            maze[i][a] = new Cell();
            }
        }
        setPreferredSize(new Dimension(h, w));
    }

    public static void main(String[] args) {
        Frame y = new Frame();
        y.setLayout(new BorderLayout());
        Panel r = new Panel();
        r.setLayout(new BorderLayout());
        Grid f = new Grid(25, 400, 400);
        r.add(f, BorderLayout.CENTER);
        y.add(r, BorderLayout.CENTER);
        f.genRand();
        f.repaint();
        y.pack();
        y.setPreferredSize(new Dimension(450, 450));
        y.setVisible(true);
    }

    public void push(int[] xy){
        coordinates.add(xy);
        int i = coordinates.size();
        coordinates.ensureCapacity(i++);
    }

    public int[] pop(){
        int[] x = coordinates.get((coordinates.size())-1);
        coordinates.remove((coordinates.size())-1);
        return x;
    }

    public int[] top(){
        return coordinates.get((coordinates.size())-1);
    }

    public void genRand(){
        // create a CellStack (LIFO) to hold a list of cell locations [x]
        // set TotalCells = number of cells in grid  
        int TotalCells = size*size;
        // choose a cell at random and call it CurrentCell 
        int m = randomInt(size);
        int n = randomInt(size);
        while(m<1){
            m = randomInt(size);
        }
        while(n<1){
            n = randomInt(size);
            }
        Cell curCel = maze[m][n];
        // set VisitedCells = 1  
        int visCel = 1;
        int o = 0;
        int p = 0;
        int h;
        int d;
        int[] q;
        // while VisitedCells < TotalCells 
        while( visCel < TotalCells){
            d = 0;
            // find all neighbors of CurrentCell with all walls intact
            if(m!=0&&n!=0){
                if(m<size&&n<size){
                    if(maze[m-1][n].countWalls() == 4)
                        {d++;}
                    if(maze[m+1][n].countWalls() == 4)
                        {d++;}
                    if(maze[m][n-1].countWalls() == 4)
                        {d++;}
                    if(maze[m][n+1].countWalls() == 4)
                        {d++;}
                }
            }
            // if one or more found 
            if(d!=0){
                Point[] ls = new Point[4];
                ls[0] = new Point(m-1,n);
                ls[1] = new Point(m+1,n);
                ls[2] = new Point(m,n-1);
                ls[3] = new Point(m,n+1);
                // knock down the wall between it and CurrentCell
                h = randomInt(3);
                switch(h){
                    case 0: o = (int)(ls[0].getX());
                            p = (int)(ls[0].getY());
                            curCel.destroyWall(2);
                            maze[o][p].destroyWall(1);
                        break;
                    case 1: o = (int)(ls[1].getX());
                            p = (int)(ls[1].getY());
                            curCel.destroyWall(1);
                            maze[o][p].destroyWall(2);
                        break;
                    case 2: o = (int)(ls[2].getX());
                            p = (int)(ls[2].getY());
                            curCel.destroyWall(3);
                            maze[o][p].destroyWall(0);
                        break;
                    case 3: o = (int)(ls[3].getX());
                            p = (int)(ls[3].getY());
                            curCel.destroyWall(0);
                            maze[o][p].destroyWall(3);
                        break;
                }   
                // push CurrentCell location on the CellStack 
                push(new int[] {m,n});
                // make the new cell CurrentCell
                m = o;
                n = p;
                curCel = maze[m][n];
                // add 1 to VisitedCells
                visCel++;
            }
            // else 
            else{
                // pop the most recent cell entry off the CellStack 
                q = pop();
                m = q[0];
                n = q[1];
                curCel = maze[m][n]; 
                // make it CurrentCell
                // endIf
            }
        // endWhile  
        }   
    }

    public int randomInt(int s) { return (int)(s* Math.random());}

    public void paint(Graphics g) {
        int k, j;
        width = getSize().width;
        height = getSize().height;
        double htOfRow = height / (size);
        double wdOfRow = width / (size);
//checks verticals - destroys east border of cell
        for (k = 0; k < size; k++) {
            for (j = 0; j < size; j++) {
                if(maze[k][j].checkWall(2)){
                g.drawLine((int) (k * wdOfRow), (int) (j * htOfRow), (int) (k * wdOfRow), (int) ((j+1) * htOfRow));
            }}
        }
//checks horizontal - destroys north border of cell
        for (k = 0; k < size; k++) {
            for (j = 0; j < size; j++) {
                if(maze[k][j].checkWall(3)){
                g.drawLine((int) (k * wdOfRow), (int) (j * htOfRow), (int) ((k+1) * wdOfRow), (int) (j * htOfRow));
            }}
        }
    }
}

class Cell {

    private final static int NORTH = 0;
    private final static int EAST = 1;
    private final static int WEST = 2;
    private final static int SOUTH = 3;
    private final static int NO = 4;
    private final static int START = 1;
    private final static int END = 2;
    boolean[] wall = new boolean[4];
    boolean[] border = new boolean[4];
    boolean[] backtrack = new boolean[4];
    boolean[] solution = new boolean[4];
    private boolean isVisited = false;
    private int Key = 0;

    public Cell(){
    for(int i=0;i<4;i++){wall[i] = true;}
    }
    public int countWalls(){
    int i, k =0; 
    for(i=0; i<4; i++) {
    if (wall[i] == true)
    {k++;}
    }
    return k;}
    public boolean checkWall(int x){
    switch(x){
        case 0: return wall[0];
        case 1: return wall[1];
        case 2: return wall[2];
        case 3: return wall[3];
    }
    return true;
    }
    public void destroyWall(int x){
    switch(x){
        case 0: wall[0] = false; break;
        case 1: wall[1] = false; break;
        case 2: wall[2] = false; break;
        case 3: wall[3] = false; break;
        }
    }
    public void setStart(int i){Key = i;}   
    public int getKey(){return Key;}
    public boolean checkVisit(){return isVisited;}
    public void visitCell(){isVisited = true;}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:55:46.277

我很快就忽略了你的代码：

1.  当坐标为空时调用 top() 或 pop() 时可能会出现异常 --> coordinate.get(coordinates.size()-1) 如果大小为 0，则尝试寻址索引 -1 -> BAM！

2.  有些方法看起来确实很复杂。您可以将该功能拆分为单独的方法/功能

3.  您不要混合 AWT 和 SWING 组件，因为它们的行为不同

4.  永远不要在事件调度程序线程 (EDT) 之外执行 GUI 操作（显示、隐藏、更改内容、单击、JFrame、JPanel 等中的任何内容）-> 这可能会导致死锁

# android - 使用（兼容性）库对 android 项目进行 Proguard

> ID：10073244
> 
> 赞同：5
> 
> 时间：2012-04-09T12:34:48.480
> 
> 标签：android, proguard

我正在尝试通过 Package Explorer Export > Export Android Application 中的内置 Proguard 支持来使用 Proguard。主项目正在使用一个库项目，该库项目又使用 android 兼容性库，它也使用这个兼容性库本身。基本上是这样的：

BaseLibraryProject BaseActivity libs:android-support-v4.jar MainProject 使用库 BaseLibraryProject libs:android-support-v4.jar

这个应用程序在设备和模拟器上都可以正常运行。但是 Proguard 会发出很多警告，并且与代码 1 一起存在。

这是 Proguard 相关列表的最后一点：

```
[2012-04-09 14:19:49 - MainProject] Warning: android.support.v4.widget.SearchViewCompatHoneycomb: can't find referenced class android.widget.SearchView
[2012-04-09 14:19:49 - MainProject] Warning: android.support.v4.widget.SearchViewCompatHoneycomb: can't find referenced class android.widget.SearchView
[2012-04-09 14:19:49 - MainProject] Warning: android.support.v4.widget.SearchViewCompatHoneycomb: can't find referenced class android.widget.SearchView$OnQueryTextListener
[2012-04-09 14:19:49 - MainProject] Warning: android.support.v4.widget.SearchViewCompatHoneycomb: can't find referenced class android.widget.SearchView
[2012-04-09 14:19:49 - MainProject] Warning: android.support.v4.widget.SearchViewCompatHoneycomb$1: can't find referenced class android.widget.SearchView$OnQueryTextListener
[2012-04-09 14:19:49 - MainProject] Warning: android.support.v4.widget.SearchViewCompatHoneycomb$1: can't find referenced class android.widget.SearchView
[2012-04-09 14:19:49 - MainProject] Warning: there were 131 unresolved references to classes or interfaces.
[2012-04-09 14:19:49 - MainProject]          You may need to specify additional library jars (using '-libraryjars').
[2012-04-09 14:19:49 - MainProject] Warning: there were 29 unresolved references to program class members.
[2012-04-09 14:19:49 - MainProject]          Your input classes appear to be inconsistent.
[2012-04-09 14:19:49 - MainProject]          You may need to recompile them and try again.
[2012-04-09 14:19:49 - MainProject]          Alternatively, you may have to specify the option 
[2012-04-09 14:19:49 - MainProject]          '-dontskipnonpubliclibraryclassmembers'.
[2012-04-09 14:19:49 - MainProject] java.io.IOException: Please correct the above warnings first. 
```

如您所见：它找不到兼容性库。

这是包含 -libraryjars 和 -dontskipnonpubliclibraryclassmembers 的 proguard.cfg 文件的开始：

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontskipnonpubliclibraryclassmembers
-dontpreverify
-verbose
-libraryjars libs/android-support-v4.jar 
```

没有什么区别。我尝试了将库添加到 BaseLibrary 项目/MainProject 的各种组合，完全限定的路径名​​。似乎没有任何帮助。

proguard 上的大多数 stackoverflow 问题似乎都与设置 Ant 相关。知道什么可能导致这个问题，以及如何让 Proguard 在这个使用多个库的项目上工作吗？

提前致谢，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-09T12:55:32.987

ADT 17 的发布为 Proguard 的工作方式带来了许多改进，包括更好的默认设置，我认为这应该可以解决您的支持库问题。

见 - [http://tools.android.com/recent/proguardimprovements](http://tools.android.com/recent/proguardimprovements)

**Eclipse (project.properties)**

从 ADT 17 开始，默认的 project.properties 文件现在包含以下行，它引用了标准 Proguard 配置文件 (proguard-android.txt) 和项目特定的 Proguard 配置文件 (proguard-project.txt) ...

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

我建议创建一个新的 Android 项目以查看其布局和使用这些新文件的方式。随着 Proguard 和默认配置的改进，您的应用程序将长期受益。

**更新**

**摇篮（build.gradle）**

以下将使用默认的标准 proguard 配置和本地项目 proguard 规则。

```
android {
    release {
        runProguard true
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'
    }
 } 
```

# android - 使用 libgdx 加载多个多维数据集

> ID：10073246
> 
> 赞同：1
> 
> 时间：2012-04-09T12:34:53.113
> 
> 标签：android

我有 1200 个网格阵列。当我使用 libgdx 渲染它时，它需要大约 70 秒。你能告诉我如何减少渲染时间吗？

谢谢

# java - java.sql.SQLException：在托管 bean 中分配连接时出错

> ID：10073247
> 
> 赞同：1
> 
> 时间：2012-04-09T12:34:59.003
> 
> 标签：java, jsf, jsf-2

我尝试根据本[教程使用 JSF 页面调试托管 bean](http://balusc.blogspot.com/2008/10/effective-datatable-paging-and-sorting.html)

这是 JSF 页面的代码：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>
    </h:head>
    <h:body>

        <h1><img src="resources/css/images/icon.png" alt="NVIDIA.com" /> History Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>

        </div>  

        <div id="greenBand" class="ui-state-default ui-corner-allh" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Dashboard"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_sessions.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                    <h:form id="form">

                        <!-- The sortable data table -->
                        <h:dataTable value="#{SessionsController.dataList}" var="item">
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Account Session ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Account Session ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.aSessionID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="User ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="User ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.userID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity Start Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity Start Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityStart}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity End Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity End Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityEnd}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activity}" />
                            </h:column>
                        </h:dataTable>

                        <!-- The paging buttons -->
                        <h:commandButton value="first" action="#{SessionsController.pageFirst}"
                                         disabled="#{SessionsController.firstRow == 0}" />
                        <h:commandButton value="prev" action="#{SessionsController.pagePrevious}"
                                         disabled="#{SessionsController.firstRow == 0}" />
                        <h:commandButton value="next" action="#{SessionsController.pageNext}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                        <h:commandButton value="last" action="#{SessionsController.pageLast}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                        <h:outputText value="Page #{SessionsController.currentPage} / #{SessionsController.totalPages}" />
                        <br />

                        <!-- The paging links -->
                        <ui:repeat value="#{SessionsController.pages}" var="page">
                            <h:commandLink value="#{page}" actionListener="#{SessionsController.page}"
                                           rendered="#{page != SessionsController.currentPage}" />
                            <h:outputText value="#{page}" escape="false"
                                          rendered="#{page == SessionsController.currentPage}" />
                        </ui:repeat>
                        <br />

                        <!-- Set rows per page -->
                        <h:outputLabel for="rowsPerPage" value="Rows per page" />
                        <h:inputText id="rowsPerPage" value="#{SessionsController.rowsPerPage}" size="3" maxlength="3" />
                        <h:commandButton value="Set" action="#{SessionsController.pageFirst}" />
                        <h:message for="rowsPerPage" errorStyle="color: red;" />

                    </h:form>

                </div>   

                <div id="settingsdiva" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:400px">

                </div>   

                <div id="settingsdivb" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:800px">

                </div>   
            </div>  
        </div>

    </h:body>
</html> 
```

这是托管 bean 的代码：

```
 import java.io.Serializable;
import javax.enterprise.context.SessionScoped;
// or import javax.faces.bean.SessionScoped;
import javax.inject.Named;
/* include SQL Packages */
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import javax.annotation.PostConstruct;
import javax.sql.DataSource;
import javax.annotation.Resource;
import javax.faces.bean.ViewScoped;
import javax.faces.component.UICommand;
import javax.faces.context.FacesContext;
import javax.inject.Inject;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
// or import javax.faces.bean.ManagedBean; 
import javax.faces.event.ActionEvent;

import org.glassfish.osgicdi.OSGiService;

// source http://balusc.blogspot.com/2008/10/effective-datatable-paging-and-sorting.html
@Named("SessionsController")
@ViewScoped
public class Sessions implements Serializable {

    /* Call the Oracle JDBC Connection driver */
    @Resource(name = "jdbc/Oracle")
    private DataSource ds;
    // Data.
    private List<ActiveSessionObj> dataList;
    private int totalRows;
    // Paging.
    private int firstRow;
    private int rowsPerPage;
    private int totalPages;
    private int pageRange;
    private Integer[] pages;
    private int currentPage;
    // Sorting.
    private String sortField;
    private boolean sortAscending;

    /* Constructor */
    public Sessions() {
        /* Set default properties */
        rowsPerPage = 10; // Default rows per page (max amount of rows to be displayed at once).
        pageRange = 10; // Default page range (max amount of page links to be displayed at once).
        sortField = "ASESSIONID"; // Default sort field.
        sortAscending = true; // Default sort direction.
    }

    private static class ActiveSessionObj {

        /* Oracle table structure
        CREATE TABLE ACTIVESESSIONSLOG(
        ASESSIONID VARCHAR2(30 ) NOT NULL,
        USERID VARCHAR2(30 ),
        ACTIVITYSTART TIMESTAMP(6),
        ACTIVITYEND TIMESTAMP(6),
        ACTIVITY CLOB
        )
         */
        private String aSessionID;
        private String userID;
        private Date activityStart;
        private Date activityEnd;
        private String activity;

        public ActiveSessionObj(String aSessionID, String userID, Date activityStart, Date activityEnd, String activity) {
            this.aSessionID = aSessionID;
            this.userID = userID;
            this.activityStart = activityStart;
            this.activityEnd = activityEnd;
            this.activity = activity;
        }

        public String getaSessionID() {
            return aSessionID;
        }

        public void setaSessionID(String aSessionID) {
            this.aSessionID = aSessionID;
        }

        public String getactivity() {
            return activity;
        }

        public void setactivity(String activity) {
            this.activity = activity;
        }

        public Date getactivityEnd() {
            return activityEnd;
        }

        public void setactivityEnd(Date activityEnd) {
            this.activityEnd = activityEnd;
        }

        public Date getactivityStart() {
            return activityStart;
        }

        public void setactivityStart(Date activityStart) {
            this.activityStart = activityStart;
        }

        public String getuserID() {
            return userID;
        }

        public void setuserID(String userID) {
            this.userID = userID;
        }

        private ActiveSessionObj() {
            throw new UnsupportedOperationException("Not yet implemented");
        }
    }

    // Paging actions -----------------------------------------------------------------------------
    public void pageFirst() {
        page(0);
    }

    public void pageNext() {
        page(firstRow + rowsPerPage);
    }

    public void pagePrevious() {
        page(firstRow - rowsPerPage);
    }

    public void pageLast() {
        page(totalRows - ((totalRows % rowsPerPage != 0) ? totalRows % rowsPerPage : rowsPerPage));
    }

    public void page(ActionEvent event) {
        page(((Integer) ((UICommand) event.getComponent()).getValue() - 1) * rowsPerPage);
    }

    private void page(int firstRow) {
        this.firstRow = firstRow;
        loadDataList(); // Load requested page.
    }

    // Sorting actions ----------------------------------------------------------------------------
    public void sort(ActionEvent event) {
        String sortFieldAttribute = (String) event.getComponent().getAttributes().get("sortField");

        // If the same field is sorted, then reverse order, else sort the new field ascending.
        if (sortField.equals(sortFieldAttribute)) {
            sortAscending = !sortAscending;
        } else {
            sortField = sortFieldAttribute;
            sortAscending = true;
        }

        pageFirst(); // Go to first page and load requested page.
    }

    // Loaders ------------------------------------------------------------------------------------
    private void loadDataList() {

        // Load list and totalCount.
        try {
            dataList = list(firstRow, rowsPerPage, sortField, sortAscending);
            totalRows = countDBRowNum(); //count the tablerows
        } catch (Exception e) {
            throw new RuntimeException(e); // Handle it yourself.
        }

        // Set currentPage, totalPages and pages.
        currentPage = (totalRows / rowsPerPage) - ((totalRows - firstRow) / rowsPerPage) + 1;
        totalPages = (totalRows / rowsPerPage) + ((totalRows % rowsPerPage != 0) ? 1 : 0);
        int pagesLength = Math.min(pageRange, totalPages);
        pages = new Integer[pagesLength];

        // firstPage must be greater than 0 and lesser than totalPages-pageLength.
        int firstPage = Math.min(Math.max(0, currentPage - (pageRange / 2)), totalPages - pagesLength);

        // Create pages (page numbers for page links).
        for (int i = 0; i < pagesLength; i++) {
            pages[i] = ++firstPage;
        }
    }

    // Getters ------------------------------------------------------------------------------------
    public List<ActiveSessionObj> getDataList() {
        if (dataList == null) {
            loadDataList(); // Preload page for the 1st view.
        }
        return dataList;
    }

    public int getTotalRows() {
        return totalRows;
    }

    public int getFirstRow() {
        return firstRow;
    }

    public int getRowsPerPage() {
        return rowsPerPage;
    }

    public Integer[] getPages() {
        return pages;
    }

    public int getCurrentPage() {
        return currentPage;
    }

    public int getTotalPages() {
        return totalPages;
    }

    // Setters ------------------------------------------------------------------------------------
    public void setRowsPerPage(int rowsPerPage) {
        this.rowsPerPage = rowsPerPage;
    }

    // Actions ------------------------------------------------------------------------------------
    /**
     * Returns list of ActiveSessionObj items starting at the given first index with the given row count,
     * sorted by the given sort field and sort order.
     * @param firstRow First index of rows to be returned.
     * @param rowCount Amount of rows to be returned.
     * @param sortField Field to sort the data on.
     * @param sortAscending Whether to sort data ascending or not.
     * @return list of ActiveSessionObj items starting at the given first index with the given row count,
     * sorted by the given sort field and sort order.
     * @throws DAOException If something fails at DAO level.
     */
    public List<ActiveSessionObj> list(int firstRow, int rowCount, String sortField, boolean sortAscending) throws SQLException {

        String SqlStatement = null;

        if (ds == null) {
            throw new SQLException();
        }

        Connection conn = ds.getConnection();
        if (conn == null) {
            throw new SQLException();
        }

        String sortDirection = sortAscending ? "ASC" : "DESC";

        SqlStatement = "SELECT * FROM ACTIVESESSIONSLOG WHERE ROWNUM >= ? AND ROWNUM <= ? ORDER BY %s %s";

        String sql = String.format(SqlStatement, sortField, sortDirection);

        PreparedStatement ps = null;
        ResultSet resultSet = null;
        List<ActiveSessionObj> dataList = new ArrayList<ActiveSessionObj>();

        try {
            conn.setAutoCommit(false);
            boolean committed = false;
            try {
                ps = conn.prepareStatement(sql);
                ps.setInt(1, firstRow);
                ps.setInt(2, rowCount);

                resultSet = ps.executeQuery();
                /* take the result from the SQL query and insert it into Array List collection */
                dataList = ActiveSessionsArrayList(resultSet);

                conn.commit();
                committed = true;

            } finally {
                if (!committed) {
                    conn.rollback();
                }
            }

        } finally {
            ps.close();
            conn.close();
        }

        return dataList;
    }

    /**
     * Returns total amount of rows in table.
     * @return Total amount of rows in table.
     * @throws DAOException If something fails at DAO level.
     */
    public int countDBRowNum() throws Exception {

        String SqlStatement = null;

        if (ds == null) {
            throw new SQLException();
        }

        Connection conn = ds.getConnection();
        if (conn == null) {
            throw new SQLException();
        }

        SqlStatement = "SELECT count(*) FROM ACTIVESESSIONSLOG";

        PreparedStatement ps = null;
        ResultSet resultSet = null;
        int count = 0;

        try {
            conn.setAutoCommit(false);
            boolean committed = false;
            try {
                SqlStatement = "SELECT count(*) FROM ACTIVESESSIONSLOG";

                ps = conn.prepareStatement(SqlStatement);
                resultSet = ps.executeQuery();

                if (resultSet.next()) {
                    count = resultSet.getInt(1);
                }

                conn.commit();
                committed = true;
            } finally {
                if (!committed) {
                    conn.rollback();
                }
            }
        } finally {
            ps.close();
            conn.close();
        }

        return count;
    }

    /**
     * Map the current row of the given ResultSet to ActiveSessionObj.
     * @param resultSet The ResultSet of which the current row is to be mapped to ActiveSessionObj.
     * @return The mapped ActiveSessionObj from the current row of the given ResultSet.
     * @throws SQLException If something fails at database level.
     */
    private static ArrayList<ActiveSessionObj> ActiveSessionsArrayList(ResultSet rs) throws SQLException {
        ArrayList<ActiveSessionObj> al = null;

        try {
            while (rs.next()) {
                al.add(new ActiveSessionObj(
                        rs.getString("ASESSIONID"),
                        rs.getString("USERID"),
                        timestampToDate(rs.getTimestamp("ACTIVITYSTART")),
                        timestampToDate(rs.getTimestamp("ACTIVITYEND")),
                        rs.getString("ACTIVITY")));
            }
        } catch (Exception x) {
            x.printStackTrace();
        }

        return al;

        /*
        CREATE TABLE ACTIVESESSIONSLOG(
        ASESSIONID VARCHAR2(30 ) NOT NULL,
        USERID VARCHAR2(30 ),
        ACTIVITYSTART TIMESTAMP(6),
        ACTIVITYEND TIMESTAMP(6),
        ACTIVITY CLOB
        )
         */
    }
    // select all button handle
    private Map<Long, Boolean> selectedIds = new HashMap<Long, Boolean>();

    // get the list from the JSF page
    public Map<Long, Boolean> getSelectedIds() {
        return selectedIds;
    }

    // call this method from the JSF page to delete the selected rows
    public String deleteAction() {

        // do something with the selected rows
        return null;
    }

    private static Date timestampToDate(java.sql.Timestamp ts) {
        Date d = null;
        try {
            d = new Date(ts.getTime());
        } catch (Exception e) {
            e.printStackTrace();
        }

        return d;
    }
} 
```

当我运行 JSF 页面时，我没有将任何数据输入到 JSF 页面中。我已经用 3 行数据填充了 Oracle 表。这还不是最糟糕的。我在 Glassfish 中收到此错误堆栈，并且当我多次重新加载页面时 JSF 页面挂起。如何解决这个问题？

最好的祝愿

**编辑：**我更正了代码。现在连接已关闭，页面没有挂起，但是当我尝试打开 JSF 页面时收到此错误消息。JSF 页面仍然没有显示来自数据库的任何数据。

```
[#|2012-04-09T16:46:33.241+0300|SEVERE|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=173;_ThreadName=Thread-2;|java.lang.NullPointerException
    at com.DX_57.HM_57.Sessions.ActiveSessionsArrayList(Sessions.java:375)
    at com.DX_57.HM_57.Sessions.list(Sessions.java:293)
    at com.DX_57.HM_57.Sessions.loadDataList(Sessions.java:190)
    at com.DX_57.HM_57.Sessions.getDataList(Sessions.java:214)
    at sun.reflect.GeneratedMethodAccessor839.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:363)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:138)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:183)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIData.getValue(UIData.java:731)
    at javax.faces.component.UIData.getDataModel(UIData.java:1798)
    at javax.faces.component.UIData.setRowIndexWithoutRowStatePreserved(UIData.java:484)
    at javax.faces.component.UIData.setRowIndex(UIData.java:473)
    at com.sun.faces.renderkit.html_basic.TableRenderer.encodeEnd(TableRenderer.java:191)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:54:48.057

根本原因是您的连接池运行连接*“正在使用的连接等于最大池大小和过期的最大等待时间。无法分配更多连接。”*

在发布的代码中，您忘记在方法中关闭连接`public int count()`。

# android - 首次运行后的 Android C2DM（推送通知）

> ID：10073251
> 
> 赞同：1
> 
> 时间：2012-04-09T12:35:23.340
> 
> 标签：android, notifications, message, android-c2dm, notificationmanager

我尝试发送推送通知；**一切似乎都很好，但是我在第一次运行后将**有效负载传递给通知时遇到了问题。

这是我的代码。

```
public void createNotification(Context context, String payload) {
        NotificationManager notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.icon,
                "Received message", System.currentTimeMillis());
        // Hide the notification after its selected
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        Intent intent = new Intent(context, MessageReceivedActivity.class);
        intent.putExtra("payload", payload);

        Log.d("C2DM", "OK.. TRUE MESSAGE --->: payload = " + payload);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);
        notification.setLatestEventInfo(context, "news",
                "news...", pendingIntent);
        notificationManager.notify(0, notification);

    } 
```

..之后，当我阅读通知时：

```
public class MessageReceivedActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        setContentView(R.layout.activity_result);
        super.onCreate(savedInstanceState);
    }

    @Override
    protected void onStart() {
        super.onStart();

        Bundle extras = getIntent().getExtras();
        if (extras != null) {

            String message = extras.getString("payload");
            Log.d("C2DM", "ERROR: ALWAYS FIRST MESSAGE!! --> " + message);
            if (message != null && message.length() > 0) {
                TextView view = (TextView) findViewById(R.id.result);
                view.setText(message);
            }
        }
    } 
```

我发送给第二个活动的消息永远不会更新！

# c - 如何在运行时区分c中的工会成员

> ID：10073258
> 
> 赞同：2
> 
> 时间：2012-04-09T12:35:52.293
> 
> 标签：c, unions

我对工会有疑问。假设有一个联合定义为

```
union emp{
    float f;
    int i;
}; 
```

有没有办法确定使用哪个联合字段。我遇到过一种情况，如果使用 float 字段，则必须打印 float，如果使用 int 字段，则必须打印 int。函数可能类似于

```
void print(union u){

    // if float field is initialized
    printf("float field = %f\n",u.f);

    // if int field is initialized
    printf("int field = %d\n",u.i);

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T12:38:19.470

你不能只用`union`; 通常，您将其包装在`struct`包含某种标记值的 a 中。

```
struct val {
  enum { EMP_INT, EMP_FLOAT } tag;
  union emp {
    int i;
    float f;
  } emp;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:39:09.893

并非如此，取决于您访问内存的字段将被解释为 a`float`或 an `int`。

您最好的选择是使联合成为结构的一部分，并保留一个指示使用哪个字段的标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:41:34.990

你不能，信息不会在运行时存储在任何地方。

您可以执行以下操作：

```
struct emp {
        enum storedValue type;
        union {
                float f;
                int   i;
        }
}; 
```

手动存储类型。然后枚举具有类似`floatval`和`intval`或类似的值。

您可以使用布尔值来代替枚举，例如`isFloat`.

# php - 在单个数据库列中保存和获取多个下拉值作为逗号分隔的字符串

> ID：10073259
> 
> 赞同：0
> 
> 时间：2012-04-09T12:35:53.633
> 
> 标签：php, mysql

我有一个下拉框，其中 opiton 值和 id 是从数据库表中获取的：

```
First table:
----------
id | value
----------
1  | Value1
2  | Value2
3  | Value3
-----------

<option id=1>Value1</option>
<option id=2>Value2</optoin>
<option id=3>Value3</option> 
```

现在我想像这样保存所选值的ID

第二个表：（假设我选择了前两个选项）

```
id | Selected
-------------
1  |   1,2
------------ 
```

现在，我想获取字符串并显示相应的选定选项

有什么建议么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:42:45.927

```
$query = 'SELECT value FROM firsttable WHERE id IN (' . $fieldvalue . ')'; 
```

只需从数据库中检索值并将其放入查询中，它已经按照 IN 的需要进行了格式化。然后对结果和所有内容进行循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:37:28.870

不要将它们以逗号分隔的形式插入单列，而是为每个选择添加一行。

```
id | Selected
-------------
1  |   1
2  |   2
------------ 
```

# vb6 - 如何通过 VB6.0 从 EDID 文件中获取附加显示器的 NATIVE 分辨率？

> ID：10073261
> 
> 赞同：2
> 
> 时间：2012-04-09T12:36:08.507
> 
> 标签：vb6

我正在开发一个 VB 应用程序，我需要知道显示器的原始分辨率，而不是用户设置的分辨率（当前分辨率）。所以我需要直接从显示器读取 EDID（扩展显示识别数据）。

我确实尝试通过一些程序找到显示器的分辨率......但它返回的只是当前分辨率。任何直接从监视器的 EDID 读取信息的帮助都是可行的。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T14:19:55.493

经过大量研究，我能够解决我的问题.. 感谢 Yahia 提供的宝贵信息。

首先，我们需要找到 EDID 数据。物理显示信息实际上可通过扩展显示标识数据 (EDID) 提供给操作系统。EDID 块的副本保存在 Windows 注册表中。但问题是要获得正确的 EDID，因为注册表中存储了有关在任何时间点连接到系统的所有监视器的信息。因此，首先我们使用 WMI 类“Win32_DesktopMonitor”，并通过一个简单的 SQL 查询获取 PNP 设备 id 以找到可用（非离线）的监视器。然后我们可以深入注册表以查找数据。

`'for monitor in wmiquery('Select * from Win32_DesktopMonitor'):

regkey = ('HKLM\SYSTEM\CurrentControlSet\Enum\' + monitor.PNPDeviceID + '\Device Parameters\EDID') edid = get_regval(regkey)'`

其次，需要解析数据。显示器的基本 EDID 信息在包含相关制造商和操作相关数据的 128 字节数据结构中传送。这些信息中的大部分对我们来说都是无趣的。

要了解 NATIVE 分辨率，我们需要开始查看从 byte = 54 开始的 DTD（详细时序描述符）。

以下是从 EDID 中找到最大分辨率的逻辑

`dtd = 54 # 详细时序描述的起始字节。

水平分辨率 = ((edid[dtd+4] >> 4) << 8) | edid[dtd+2] 垂直分辨率 = ((edid[dtd+7] >> 4) << 8) | edid[dtd+5] res=(horizo​​ntalRes,verticalRes)`

获得的值是十六进制值，可以将其转换为十进制以找到以像素为单位的 NATIVE RESOLUTION。

谢谢希望它可以帮助萨钦

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:43:45.413

有关读取 EDID 块的一些源代码（尽管是 C/C++），请参见此[链接](http://thetweaker.wordpress.com/2011/11/13/reading-monitor-physical-dimensions-or-getting-the-edid-the-right-way/)的第 5 点。通过[Windows Setup API](http://msdn.microsoft.com/en-us/library/cc185682%28VS.85%29.aspx)检索此信息的唯一官方方法。

有关 EDID 格式说明，请参见[此处](http://en.wikipedia.org/wiki/Extended_display_identification_data)的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-22T05:37:23.043

'这是一个完整的解决方案，除了实际设置分辨率。这将从活动监视器的 EDID 中读出原始分辨率设置。

设置 WshShell = WScript.CreateObject("WScript.Shell")

常量 HKEY_LOCAL_MACHINE = &H80000002 常量 DTD_INDEX = 54

strComputer =“。”

设置 objWMIService = GetObject("winmgmts:\" & strComputer & "\root\cimv2") 设置 oReg=GetObject("winmgmts:{impersonationLevel=impersonate}!\" & strComputer & "\root\default:StdRegProv")

Set colItems = objWMIService.ExecQuery("Select * from Win32_DesktopMonitor",,48) For Each objItem in colItems 'Gets active monitor EDID registry path strKeyPath = "SYSTEM\CurrentControlSet\Enum\" & objItem.PNPDeviceID & "\Device Parameters"
Next

oReg.GetBinaryValue HKEY_LOCAL_MACHINE,strKeyPath,"EDID",arrRawEDID

hor_resolution = arrRawEDID(DTD_INDEX + 2) + (arrRawEDID(DTD_INDEX + 4) 和 240) * 16 vert_resolution = arrRawEDID(DTD_INDEX + 5) + (arrRawEDID(DTD_INDEX + 7) 和 240) * 16

WshShell.Run "res.exe " & hor_resolution & " " & vert_resolution

# python - 最快的类字典匹配

> ID：10073267
> 
> 赞同：3
> 
> 时间：2012-04-09T12:36:38.460
> 
> 标签：python, algorithm, optimization, data-structures, spell-checking

我将不得不在 Python 中执行类似拼写检查的操作，如下所示：

我有一个巨大的单词列表（我们称之为词典）。我现在得到了一些文本（我们称之为样本）。我必须在词典中搜索每个示例单词。如果我找不到它，则该示例词是错误的。

简而言之 - 强力拼写检查器。然而，在词典中线性搜索每个样本词势必会很慢。有什么更好的方法来做到这一点？

复杂的因素是样本和词典都不是英文的。它是一种语言，而不是 26 个字符，可以有超过 300 个字符 - 以 Unicode 存储。

任何算法/数据结构/并行化方法的建议都会有所帮助。以低于 100% 的准确度为代价的高速算法将是完美的，因为我不需要 100% 的准确度。我知道 Norvig 的算法，但它似乎是特定于英语的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T12:39:34.700

您可以使用一组 Unicode 字符串：

```
s = set(u"rabbit", u"lamb", u"calf") 
```

并使用`in`运算符检查是否出现单词：

```
>>> u"rabbit" in s
True
>>> u"wolf" in s
False 
```

这种查找本质上是 O(1)，因此字典的大小无关紧要。

**编辑**：这是（区分大小写）拼写检查器（2.6 或更高版本）的完整代码：

```
from io import open
import re
with open("dictionary", encoding="utf-8") as f:
    words = set(line.strip() for line in f)
with open("document", encoding="utf-8") as f:
    for w in re.findall(r"\w+", f.read()):
        if w not in words:
            print "Misspelled:", w.encode("utf-8") 
```

（`print`假设您的终端使用 UTF-8。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:49:25.830

就像每个人都告诉你的那样，用一组试试。集合查找由经验丰富的程序员在 python 的 C 代码中进行了优化，因此您无法在您的小应用程序中做得更好。

Unicode 不是问题：集合和字典键可以是 unicode 或英文文本，没关系。您唯一需要考虑的可能是 unicode 规范化，因为不同的变音符号顺序不会比较相等。如果这对您的语言来说是个问题，我会首先确保词典以标准化形式存储，然后在检查之前对每个单词进行标准化。例如，`unicodedata.normalize('NFC', word)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:39:56.143

这就是[集合](http://docs.python.org/library/sets.html)到位的地方。创建字典中所有单词的集合，然后使用成员运算符检查字典中是否存在该单词。

这是一个简化的例子

```
>>> dictionary = {'Python','check-like', 'will', 'perform','follows:', 'spelling', 'operation'}
>>> for word in "I will have to perform a spelling check-like operation in Python as follows:".split():
    if word in dictionary:
        print "Found {0} in the dictionary".format(word)
    else:
        print "{0} not present in the dictionary".format(word)

I not present in the dictionary
Found will in the dictionary
have not present in the dictionary
to not present in the dictionary
Found perform in the dictionary
a not present in the dictionary
Found spelling in the dictionary
Found check-like in the dictionary
Found operation in the dictionary
in not present in the dictionary
Found Python in the dictionary
as not present in the dictionary
Found follows: in the dictionary
>>> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T12:46:06.050

使用树结构来存储单词，这样从根到叶的每条路径都代表一个单词。如果您的遍历无法到达叶子，或者在单词结尾之前到达叶子，则您的词典中没有单词。

除了 Emil 在评论中提到的好处之外，还请注意，这允许您执行诸如回溯之类的操作以查找替代拼写。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T18:00:47.450

这是我写的关于检查这些事情的帖子。让谷歌建议/拼写检查器工作是相似的。

[http://blog.mattalcock.com/2012/12/5/python-spell-checker/](http://blog.mattalcock.com/2012/12/5/python-spell-checker/)

希望能帮助到你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T12:40:10.853

python字典中散列搜索的平均时间复杂度为O(1)。因此，您可以使用“没有值的字典”（又名集合）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-09T12:40:30.440

这就是 python 字典和集合的用途！:) 如果每个单词都有一些值（比如频率），则将您的词典存储在字典中，或者如果您只需要检查是否存在，则将其存储在字典中。搜索它们是 O(1)，所以它会非常快。

```
lex = set(('word1', 'word2', .....))

for w in words:
    if w not in lex:
        print "Error: %s" % w 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-09T13:14:24.547

首先，您需要为您的词典创建索引。例如，您可以制作自己的索引系统，但更好的方法是使用全文搜索引擎 [全文搜索引擎](http://en.wikipedia.org/wiki/Full_text_search) 我可能会为您推荐 apache lucene 或 sphinx。它既快速又开源。在您可以将搜索查询从 python 发送到搜索引擎并捕获回复之后。

# android - 在android中访问自定义视图

> ID：10073271
> 
> 赞同：0
> 
> 时间：2012-04-09T12:37:00.167
> 
> 标签：android, android-layout, android-widget

我正在尝试在其下方创建一个图标和简短描述。我创建了一个带有 ImageView 和 TextView 的自定义 View 类，并将它与我的 xml 文件集成，现在 imageView 和默认文本出现在屏幕上，我不知道如何更改 textview 的文本内容或图像视图的来源。

我的视图.java

```
package sda.jk;

public class MyView extends LinearLayout{

    public MyView(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
        LayoutInflater li=(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v= li.inflate(R.layout.myview, this);
    }

} 
```

我的视图.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_launcher"
        />
    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="my view"/>

</LinearLayout> 
```

主要的.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/sda.jk"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
<sda.jk.MyView
        android:id="@+id/myView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    </sda.jk.MyView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:42:36.597

您在 sda.jk.MyView 中编写一个函数来设置文本。要更改文本，只需使用字符串参数调用函数

```
 Class MyView extends LinearLayout
 {
     //...

     public void setUserText(String str)
     {
          textview.setText(str);
     }

     //...
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:06:27.740

**Step-1**首先将id分配给myview中的image view和text view。xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView 
        android:id="@+id/myImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_launcher"
        />
    <TextView 
        android:id="@+id/myText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="my view"/>

</LinearLayout> 
```

**第 2 步** 使用 oncreate 方法初始化您自己的视图

```
MyView mv = (MyView)findViewById(R.id.myView1); 
```

**step-3** 使用自己视图的 findViewById 方法初始化图像视图和文本视图

```
TextView textView = (TextView) mv.findViewById(R.id.myText);
        ImageView imageView = (ImageView) mv.findViewById(R.id.myImage); 
```

**step-4** 使用 setText 方法将文本设置为文本视图

```
textView.setText("Sunil Kumar Sahoo"); 
```

使用将背景图像设置为图像视图

```
imageView.setBackgroundResource(R.drawable.ic_launcher); 
```

您的 oncreate 方法将如下所示（从第 2 步到第 4 步）

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         setContentView(R.layout.main);
        MyView mv = (MyView)findViewById(R.id.myView1);
        TextView textView = (TextView) mv.findViewById(R.id.myText);
        textView.setText("Sunil Kumar Sahoo");
        ImageView imageView = (ImageView) mv.findViewById(R.id.myImage);
        imageView.setBackgroundResource(R.drawable.ic_launcher);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:41:27.940

TextView 中有一个有用的功能，称为 compund drawables，它允许您合并一个可在文本的上方、下方、左侧或右侧绘制的可绘制对象。像这样使用它：

```
<TextView
    android:id="@+id/txt"
    android:text="my compound drawable textview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:drawableTop="@drawable/xxxxx" /> 
```

您也可以使用 drawableBottom、drawableLeft 等。这样你就不需要实现你自己的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T12:45:07.003

您可以通过编写自定义 attr.xml 并在自定义视图的构造函数中加载属性来添加自定义属性。有关完整示例，请查看此页面 [http://javawiki.sowas.com/doku.php?id=android:custom-view-attributes](http://javawiki.sowas.com/doku.php?id=android:custom-view-attributes)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T13:00:31.147

要从视图层次结构中访问单个元素，请使用该`findViewById`方法。参考[http://developer.android.com/reference/android/view/View.html#findViewById%28int%29](http://developer.android.com/reference/android/view/View.html#findViewById%28int%29)

您必须在 XML 中为视图元素提供标识符，因此：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imgView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/txtView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="my view" />

</LinearLayout> 
```

并从您的自定义视图类中引用它们：

```
ImageView imageView = (ImageView)v.findViewById(R.id.imgView);
TextView textView = (TextView)v.findViewById(R.id.txtView); 
```

通常，您希望将视图保留为实例变量（成员），以便您可以从其他方法更改它们。

# objective-c - 当我使用 ASIHTTPRequest 和 SBJSON 时，iOS 5.1 出错

> ID：10073273
> 
> 赞同：6
> 
> 时间：2012-04-09T12:37:11.560
> 
> 标签：objective-c, asihttprequest, sbjson, libz

我收到此错误：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_ASIHTTPRequest", referenced from:
      objc-class-ref in FirstViewController.o
  "_OBJC_CLASS_$_SBJsonParser", referenced from:
      objc-class-ref in FirstViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

注意我添加了框架核心图形、系统配置、移动核心服务、libz.dylib、libz.1.2.5.dylib、CF Network、UI Kit 和 Foundation。我搜索了所有论坛并花了将近 4 天时间，但找不到原因。

当我评论我的 ASIHTTPRequest 和 SBJSON 代码行时，它工作正常。我已经为 ASIHTTPRequest 和 SBJSON 添加了所有类并检查了三次。谁能建议我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T16:10:26.360

我会看一下 Target 中的 Build Phases 部分。在“编译源”下，确保看到 ASIHTTPRequest 和 SBJson 的 .m 文件。有时，当您将外部类拖到项目中时，即使您选中复选框以将文件复制到项目中，它们也不会进入这些编译源。当您将文件拖入 Xcode 时，会出现一个复选框以将文件添加到目标。如果未选中此项，该文件将不会进入编译源。删除文件并重新添加它们，确保选中此文件（或者如果您愿意，可以手动添加 .m 文件）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T08:54:51.887

对于 ASIHTTP 请求，添加以下框架：

*   libz.1.2.5.dylib
*   系统配置
*   UIKit
*   基础
*   核心图形
*   移动核心服务
*   CF网络

如果您在 iOS 5 或更高版本中使用 ASIHttp 类，则需要通过使用ASI API 类为`ASIHttpRequest`Project-> Build Phases -> Compile Sources 中的类关闭 ARC 。`-fno-objc-arc`

希望它能解决问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T04:36:33.193

我有同样的问题，但是当我包含以下框架时![在此处输入图像描述](../Images/6e6e675708272535532374fa8230c3f7.png)

它现在工作正常..不要忘记在编译源中包含 -fno-objc-arc![在此处输入图像描述](../Images/5763b155cc6100ae44f4804e3aec4df9.png)

最好的祝愿.......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T15:57:12.327

对于 ASIHTTPRequest 错误，听起来您还没有将 ASIHTTPRequest.m 添加到您的项目中。

（或者您添加了 ASIHTTPRequest.m，但忘记提及 xcode 发出的关于 ARC 的 40 亿个错误 - 请参阅[为什么我的 ASIHTTPRequest 文件显示 ARC 错误？](https://stackoverflow.com/questions/8375508/why-are-my-asihttprequest-files-showing-arc-errors)）

# flash - AIR 3.2 for iOS - ADL 错误地定位舞台 真的

> ID：10073278
> 
> 赞同：0
> 
> 时间：2012-04-09T12:37:37.083
> 
> 标签：flash, mobile, air

我一直在使用适用于移动设备的 AIR 3.2，但遇到了一个令人沮丧的问题：当`<fullScreen>`应用程序配置 XML 中的参数设置为`true`时，舞台在 y 轴上严重错位，有时甚至到了点其中只有一小部分舞台在 ADL 窗口的顶部可见。

在设备上运行测试时不会发生这种情况，但鉴于目前在设备上安装应用程序的繁琐性，我真的希望能够在 ADL 中进行测试。当 fullScreen 参数设置为 false 时，ADL 使用 320x460 的分辨率而不是 320x480 来允许系统栏，并且舞台对齐始终正确。

有没有人发现一种方法可以成功地让 ADL 在以全屏分辨率运行时正确显示舞台？

# iphone - 应用程序因启动失败而被拒绝？...和别的

> ID：10073281
> 
> 赞同：1
> 
> 时间：2012-04-09T12:38:11.703
> 
> 标签：iphone, objective-c, ios

由于以下两个原因，我的游戏刚刚被 AppStore 拒绝...

> 我们发现您的应用无法在运行 iOS 5.1 的 iPhone 4 上通过 Wi-Fi 和蜂窝网络启动。
> 
> 我们在主屏幕上选择应用程序时遇到问题 - 应用程序显示启动图像然后意外退出

和

> 在 iPad 上查看时，您的应用程序没有以 iPhone 分辨率和/或 2x iPhone 3GS 分辨率运行。

这两个都让我感到困惑，我目前没有安装 Lion，因此无法在 5.1 中进行测试，但它在 5.0.1 及更低版本中运行良好。

另外，我只在我的 iPad 上进行了测试，没有要测试的 iPhone，但游戏和图形在 iPad 上运行得很好。尽管！我只有标记为@2x.png 的图形文件，没有它。这可能是这里的问题吗？

如果有人有任何很棒的建议，我会回应苹果的拒绝，但我敢打赌他们需要一段时间才能回复你，我真的很想继续前进。谢谢！

**更新

我的`didFinishLaunchingWithOptions:`

如下

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    // Override point for customization after application launch.

    [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:NO];

    mainMenu = [[MainMenu alloc] init];
    self.navController = [[UINavigationController alloc] initWithRootViewController:mainMenu];
    self.navController.navigationBar.hidden = YES;

    [self.window addSubview:navController.view];

    [self.window makeKeyAndVisible];

    [[GCHelper sharedInstance] authenticateLocalUser];

    if ([[[NSUserDefaults standardUserDefaults] objectForKey:@"missingWordsAdded"] intValue] != 1) {
        [self forceAddWords];
    }

    if (![[NSUserDefaults standardUserDefaults] objectForKey:@"EnableSoundEffects"]){
        [[NSUserDefaults standardUserDefaults] setObject:@"YES" forKey:@"EnableSoundEffects"];
    }

    return YES;
} 
```

GCHelper 设置 GameCenter。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:05:49.940

我有几个建议：

1.  在您的模拟器上进行重置，启动您的程序并查看它是否有效
2.  从 iPad 上卸载你的应用程序，从 Xcode 运行它，看看它是否有效
3.  请朋友测试一个临时副本，或附加到您的 Xcode 并运行调试副本
4.  根据您的实现，您应该对您的启动代码（`didFinishLaunchingWithOptions`或单例实例）进行一些盲检。特别是那些涉及 GCD、@synchronize、访问`NSArray`或`NSDictionary`. 而像默认首选项初始化和数据库创建这样的事情很可能会产生这种问题。

关于审核过程，我的日志显示 Cupertino 的 Apple 员工使用带有 WiFi 连接的 iPad 2 来运行您的应用程序。如果他们说他们无法运行您的应用程序，他们并不是在玩弄您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:50:38.343

1) 手机和 iOS 不同配置的“应用程序启动失败”是一个大问题，因为您手头可能没有所有具有不同 iOS 版本的手机。例如，您可以尝试[https://testflightapp.com/ ，并且可以通过不同的配置了解您的应用程序性能。](https://testflightapp.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:03:45.327

我的应用也因同样的原因被拒绝。在这里，您首先检查需要它的互联网连接，而不是您的代码。

要检查内部连接，您可以使用可达性类。

# java - 使用类似记事本的编辑器和命令行进行 Android 开发

> ID：10073283
> 
> 赞同：7
> 
> 时间：2012-04-09T12:38:21.720
> 
> 标签：java, android, eclipse, ide

我有 Eclipse 的问题。这对我来说很慢。我的电脑是一台旧电脑，我对性能并不满意。是否有 Eclipse 的轻量级替代品（适用于 Windows 和 Linux）？我要速度！

我的理想是在像记事本这样的编辑器中编写我的代码并用命令行进行补充！如何在这种环境下编译我的代码？如何更新我的 R.java 文件或构建我的项目配置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:43:51.547

该[文档](http://developer.android.com/guide/developing/projects/projects-cmdline.html)提供了有关使用命令行工具的非常好的说明。构建是在 Ant 工具的帮助下进行的。您还可以使用比记事本更高级的编辑器（例如 Notepad++）。

但是，如果您的机器速度较慢，那么无论如何您都会在开发过程中受到影响。您还应该忘记使用模拟器进行调试。模拟器需要很长时间才能加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:42:08.453

通过命令行查看链接[管理项目](http://developer.android.com/guide/developing/projects/projects-cmdline.html)

它提供了有关如何在没有任何 IDE 的情况下开发 android 应用程序的简要说明

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:42:22.670

如果你想要速度，你应该买一台更快的电脑。

看来您是初学者-> 如果您处于不知道如何编译代码的阶段，我建议您购买几乎所有的 Java 书籍，或者访问带有教程的网站。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T12:42:27.533

好吧，没有什么能阻止您使用记事本并使用 javac 手动编译：

[http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javac.html](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javac.html)

就像 kgiannakakis 指出的那样；您还需要 Android SDK：

[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

# html - Unicode 字符和浏览器

> ID：10073284
> 
> 赞同：2
> 
> 时间：2012-04-09T12:38:29.083
> 
> 标签：html, browser, unicode, fonts

考虑一个编码为 UTF-8 的 HTML 页面，其中出现了一个[奇怪的 unicode 字符](http://t-a-w.blogspot.com/2008/12/funny-characters-in-unicode.html)——形成一种罕见的语言或其他一些 Unicode 特性。

这种情况是否有标准行为？浏览器会尝试找到合适的字体吗？可以使用 HTML 参数配置浏览器行为吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T13:14:16.930

CSS 2.1[字体匹配算法](http://www.w3.org/TR/CSS2/fonts.html#algorithm)意味着浏览器应为每个字符从适用`font-family`声明中建议的字体中选择一个字形，如果不这样做，则使用与浏览器相关的默认字体。如果它甚至不包含该字符，那么“UA [= 浏览器] 可能会使用其他方式来确定该字符的合适字体。UA 应该将没有合适字体的每个字符映射到 UA 选择的可见符号，最好是来自 UA 可用字体之一的“缺失字符”字形。”</p>

所以它定义得很好，但是有浏览器依赖。该算法允许浏览器显示丢失的字符符号，即使系统中的*某些*字体包含它的字形也是如此。现代浏览器通常不这样做，但 IE 在这方面也不是特别现代。此外，浏览器中存在一些怪癖和奇怪之处，部分原因是它们有时无法从字体本身获取有关字体的正确信息。

您无法配置基本行为，但您可以按照其规则进行操作。最有效的是使用作者提供的字体系列。如果你有一个奇怪的字符，你应该尝试确定一组包含它的字体并编写合适的 CSS 规则。然而，对于非常罕见的字符，选项实际上是：1）使用可下载的字体，2）使用图像。更多信息：[http ://www.cs.tut.fi/~jkorpela/html/characters.html](http://www.cs.tut.fi/~jkorpela/html/characters.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T12:53:38.577

是的，浏览器通常会尽量以某种字体显示它。某些浏览器/操作系统比其他浏览器/操作系统做得更好。如果页面的默认字体不包含该字符，有些人可能会简单地放弃，但大多数人会尝试查找包含该字符的其他已安装字体。如果没有匹配，浏览器将显示一些占位符，通常是一个正方形。

就这样。没什么奇怪的，这就是字体渲染的工作原理。

# android - 预期为 BEGIN_ARRAY，但为 BEGIN_OBJECT，包含三个元素的数组

> ID：10073290
> 
> 赞同：0
> 
> 时间：2012-04-09T12:38:54.570
> 
> 标签：android, json, spring, gson

我正在开发 Android 3.1 及更高版本的应用程序。

我正在使用适用于 Android 的 Spring Framework 1.0.0.0RC1 和 Google GSon 2.1。

尝试解析 JSON 时出现错误。

这是**"http://192.168.1.128/RestServiceImpl.svc/forms/"**返回的**JSON**。

 **```
{
    "allFormsResult": [
        {
            "FormId": 1,
            "FormName": "Formulario 1"
        },
        {
            "FormId": 2,
            "FormName": "Formulario 2"
        },
        {
            "FormId": 3,
            "FormName": "Formulario 3"
        }
    ]
} 
```

在这里我做所有事情：

```
public class FormSpringController
{
    public static List<Form> LoadAll()
    {
        HttpHeaders requestHeaders = new HttpHeaders();
        requestHeaders.setAccept(Collections.singletonList(new MediaType("application","json")));
        HttpEntity<?> requestEntity = new HttpEntity<Object>(requestHeaders);

        String url = "http://192.168.1.128/RestServiceImpl.svc/forms/";

        GsonHttpMessageConverter messageConverter = new GsonHttpMessageConverter();
        List<HttpMessageConverter<?>> messageConverters = new ArrayList<HttpMessageConverter<?>>();
        messageConverters.add(messageConverter);

        RestTemplate restTemplate = new RestTemplate();
        restTemplate.setMessageConverters(messageConverters);

        ResponseEntity<Form[]> responseEntity = restTemplate.exchange(url, HttpMethod.GET, requestEntity, Form[].class);
        Form[] result= responseEntity.getBody();

        return Arrays.asList(result);
    }
} 
```

当我尝试解析它时，出现以下错误：

```
W/System.err(519): Caused by: java.lang.IllegalStateException: Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 1 column 2 
```

你知道我该如何解决吗？

**更新**
@hotveryspicy 建议我 JSON 存在“问题”。这就是我生成 JSON 响应（C# 代码）的方式：

```
public class RestServiceImpl : IRestServiceImpl
{
    public List<FormContract> allForms()
    {
        List<FormContract> list = null;
        using (var vAdmEntities = new ADMDatabase.ADMEntities())
        {
            list = new List<FormContract>();
            foreach (var form in vAdmEntities.Form)
            {
                FormContract formC = new FormContract
                {
                    FormName = form.name.Trim(),
                    FormId = form.formId
                };
                list.Add(formC);
            }
        }

        return list;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:42:02.107

因为您的字符串以“ `{`”开头，这意味着它是一个对象（json 概念），并且您似乎将其视为一个数组，这是错误的。

编辑：

```
{"data":
   {
    "allFormsResult": [
        {
            "FormId": 1,
            "FormName": "Formulario 1"
        },
        {
            "FormId": 2,
            "FormName": "Formulario 2"
        },
        {
            "FormId": 3,
            "FormName": "Formulario 3"
        }
    ]
  }
} 
```

只需附加一个对象“数据”，然后继续解析。当 Json 将第一个元素作为数组“ `[`”时，这是一个问题。**

# vim - 检查视觉模式

> ID：10073294
> 
> 赞同：10
> 
> 时间：2012-04-09T12:39:10.090
> 
> 标签：vim, mode

在 vimscript 中检查当前处于活动状态的视觉模式（视觉或视觉块）的最佳方法是什么？

我读过`mode()`但我无法让它工作。
`echo mode()`对我
`if mode() == "v"`不起作用 对我也不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T14:29:40.887

看帮助`mode()`。相关部分：

> ```
>  v       Visual by character
>           V       Visual by line
>           CTRL-V  Visual blockwise 
> ```

您需要检查`mode() == "\<C-V>"`（文字`^V`字符），而不是`mode() == "v"`检查块视觉模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-10T13:09:23.253

@Remonn 已经在评论中说过，但对我来说不是很清楚。这就是我设法看到结果的方式：

```
function! F()
    normal! gv
    throw mode()
endfunction
vnoremap <F9> <ESC>:call F()<CR> 
```

进入不同的视觉模式，然后点击`F9`查看。

我需要投掷，因为该`-- VISUAL --`行涵盖了任何回声消息。任何人都可以在 VISUAL 模式下回显吗？

一般来说，我认为当你需要时最好的办法`mode()`是制作两个不同的映射，然后是两个不同的函数，它们做完全不同的事情：

```
function! Fnorm()
endfunction

function! Fvis()
endfunction

nnoremap <F9> :call Fnorm()<CR>
nnoremap <F9> <ESC>:call Fvis()<CR>gv 
```

或单个函数并根据映射为其提供不同的参数：

```
function! F(param)
endfunction

nnoremap <F9> :call F(1)<CR>
nnoremap <F9> <ESC>:call F(2)<CR>gv 
```

另一个相关的技巧是，如果你想在可视模式下做某事，比如移动光标，该怎么做。我能做的最好的是：

```
function! Fvis()
    normal! gv
    cursor(1, 1)
endfunction

nnoremap <F9> <ESC>:call Fvis()<CR>gv 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-06T03:58:09.823

老问题。通过 DDG 搜索来到这里。
函数[模式](https://vimhelp.org/eval.txt.html#mode%28%29)在 vimscript 中不起作用。
有一个新的函数[visualmode](https://vimhelp.org/eval.txt.html#visualmode%28%29)用于 vimscript 函数。它返回最后使用的视觉模式。所以要检查块视觉模式......

```
if visualmode() == "\<C-V>"
   " we are in visual block mode
endif 
```

# java - 在java中实现互联网语音聊天应用程序有哪些不同的方法？

> ID：10073298
> 
> 赞同：0
> 
> 时间：2012-04-09T12:39:19.457
> 
> 标签：java

我正在尝试使用 java 中的 swing 创建一个桌面应用程序，它允许用户进行语音和视频聊天。我想知道有哪些不同的方法？（比如使用 xmpp jingle 等，jmf 等）我应该从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:42:40.653

试试[Kryonet](http://code.google.com/p/kryonet/)。它在桌面上工作，我听说过很好的事情。

# objective-c - 如何在圆形轨迹上移动uiview？

> ID：10073300
> 
> 赞同：6
> 
> 时间：2012-04-09T12:39:31.530
> 
> 标签：objective-c, ios, uiview, core-animation

有什么方法可以使 uiview 与 cicle 轨迹一起移动？![在此处输入图像描述](../Images/df77a494f2679b538349a1d19b496221.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T12:55:07.910

您将必须创建一个圆形路径并在路径上为您的视图设置动画。您可以使用 UIBezierPath 创建圆形路径。[这](https://stackoverflow.com/a/4708894/641062)是一个完全符合您要求的示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T03:25:19.040

有几个选项。可能最简单的方法是将您的视图放在父视图上，然后围绕其 Z 轴动画旋转父视图。

我猜你也可以构建一个变换来改变你的视图，然后旋转它，并将变换设置为不同的旋转值。我不得不修补它。我知道第一种方法设置起来既快速又容易。

正如另一张海报所说，您还可以创建一个关键帧动画，该动画使用 CGPath 沿近似圆形的曲线为您的视图设置动画，但这需要更多的工作。

# android - 如何在 Android RelativeLayout 中拖放视图

> ID：10073304
> 
> 赞同：3
> 
> 时间：2012-04-09T12:39:47.767
> 
> 标签：android, android-layout, drag-and-drop

我制作了自己的拖放功能。

我想用 a 来做到这一点`RelativeLayout`，但这似乎效果不佳。一开始我可以通过将其设置在之前的下方来告诉每个`View`我想拖动它应该在哪个位置`View`。

但是当我想拖动一个视图时，它下面的所有其他视图也会移动，因为它们想要保持我设置它们的顺序。

但是我可以使用什么其他布局呢？我必须在不同的屏幕尺寸上使用这个拖放功能，所以我不能给它们固定`x`的`y`值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T15:00:05.150

前段时间我遇到了同样的麻烦，如果您不想将其他视图（在您的视图下方或上方或在您的视图旁边）与被拖动的视图一起拖动，则使用`ViewGroup.LayoutParams`而不是`RelativeLayout.LayoutParams`，如果您按下 Ctrl-Shift 则会导入后者-O，所以手动改成前者。

编辑：既然你想描述我是如何实现的，这里是实际的代码

```
 MarginLayoutParams marginParams = new MarginLayoutParams(image.getLayoutParams());              
 int left = (int) event.getRawX() - (v.getWidth() / 2);
 int top = (int) event.getRawY() - (v.getHeight());
 marginParams.setMargins(left, top, 0, 0);
 RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(marginParams);
 image.setLayoutParams(layoutParams); 
```

我必须做很多研究才能达到同样的效果，我花了 2 天时间才发现存在一个叫做 MarginLayoutParams 的东西......

确保你有

```
import android.view.ViewGroup.LayoutParams;
import android.view.ViewGroup.MarginLayoutParams; 
```

作为你的进口而不是`RelativeLayout.LayoutParams`.

还要确保你将 marginparams 投射到你的相对布局祝你好运......

# iphone - Iphone+Xcode+Badge“A”或“M”类似于什么？

> ID：10073305
> 
> 赞同：1
> 
> 时间：2012-04-09T12:39:47.800
> 
> 标签：iphone, xcode, xcode4.2

在 Xcode 中，在左侧的导航区域，在几个文件旁边，右侧有一个小图标徽章，`M`或者有时`A`.

那是做什么用的？

在创建新项目时我是否有任何选项被选中，或者是否有任何项目设置对此负责？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:43:40.080

这是因为您可能在创建应用程序项目时选择了如下图所示的选项，因此这将为您的应用程序创建一个存储库：

![在此处输入图像描述](../Images/8e93d3b723f83e514ff74941a7a196f1.png)

```
A indicates Added Files
M indicates Modified Files which are came by default with project 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T12:44:01.917

这会响应您的 git/svn 存储库

来源：[Apple Dev Library：管理项目的版本](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/SCM/SCM.html)

```
M
Locally modified

U    
Updated in repository

A
Locally added    

D
Locally deleted

I
Ignored

R
Replaced in the repository

–
The contents of the folder have mixed status; display the contents to see individual status

?
Not under source control 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:43:21.480

不，它只是向您显示文件是 A 表示已添加，M 表示用户已修改

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T12:44:11.217

这可能是因为您在创建项目时启用了 Git SCM。M 表示修改，A 表示添加。当您提交更改时，标记将消失。

# javascript - CoffeeScript 类变量

> ID：10073309
> 
> 赞同：0
> 
> 时间：2012-04-09T12:40:14.150
> 
> 标签：javascript, class, variables, coffeescript

```
class Example
  constructor: ->
    $.each [1, 2, 3], (key, value) ->
      @test = value
    return @test
  render: ->
    alert @test

example = new Example()
example.render()​​​​​​​​​​​​​​​​​​​​​​ 
```

我正在使用 CoffeeScript (+ jQuery)，这是一个类示例，我将在 @test 变量中获得值 3。但这不会发生，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T12:49:54.193

这是一个范围问题： `$.each`接受一个函数，该函数在范围内，因此，您的`this`变量不是您期望的。

工作代码：

```
class Example
  constructor: ->
    $.each [1, 2, 3], (key, value) =>
      @test = value
    return @test
  render: ->
    alert @test

example = new Example()
example.render()​​​​​​​​​​​​​​​​​​​​​​ 
```

发生了什么变化？检查`$.each`呼叫上的箭头，它现在是一个粗箭头。Fat arrows 可以设置一个 _this 变量，并在您使用`@...`使您的范围成为您期望的范围时使用它。

有关更多详细信息，请查看“功能绑定”部分的[http://coffeescript.org ！](http://coffeescript.org)

# android - AVD 无法启动，在使用模拟器时卡住

> ID：10073310
> 
> 赞同：1
> 
> 时间：2012-04-09T12:40:18.877
> 
> 标签：android, eclipse

我试图运行我的应用程序（清除应用程序，在“新项目”之后），在登录中看到这个：

```
[2012-04-09 15:20:25 - Test] ------------------------------
[2012-04-09 15:20:25 - Test] Android Launch!
[2012-04-09 15:20:25 - Test] adb is running normally.
[2012-04-09 15:20:25 - Test] Performing test.project.TestActivity activity launch
[2012-04-09 15:20:25 - Test] Automatic Target Mode: launching new emulator with compatible AVD 'myAVD'
[2012-04-09 15:20:25 - Test] Launching a new emulator with Virtual Device 'my 
```

但后来我等了，什么都没有发生……

# java - 如何在 Java 中包含头文件 (.h)

> ID：10073311
> 
> 赞同：0
> 
> 时间：2012-04-09T12:40:19.907
> 
> 标签：java

我想使用[它](http://fallabs.com/tokyocabinet/spex-en.html#tcadbapi)，它说要使用我必须在我的 java 代码中包含 tcutil.h 的特定方法。任何人都可以帮助我，该怎么做？另一点：我们可以轻松地创建一个头文件并将其包含在 C 代码中，但为什么反向如此困难（意味着必须做很多工作）？可能很愚蠢，但一点点提示会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:42:32.513

您不能将 C/C++ 标头包含到 java 源代码中。

也许您想为 java 方法定义本机实现。

[http://java.sun.com/docs/books/jni/](http://java.sun.com/docs/books/jni/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:43:16.260

他们似乎有一个 Java API，您需要下载并包含在您的类路径中。您不能在 Java 中包含 C 头文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:44:21.073

你不能直接在java中做到这一点。您必须在 C 程序中包含头文件并使用 JNI 调用您想要使用的函数。

请参考：[JNI 参考](http://java.sun.com/docs/books/jni/html/jniTOC.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T12:44:42.790

要从 Java 运行本机代码，您需要使用 JNI 技术。试试[http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jni.html](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jni.html)或[http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/functions.html](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/functions.html)谷歌的关键字“JNI，教程”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-09T12:45:01.837

这可能比你想象的要复杂。.h 文件是 C 语言包含文件，通常描述 C 库的方法和数据结构。您必须使用 Java 本机接口 (JNI) 才能将这些库包含在您的 Java 代码中。

你基本上有两个选择

*   通过这样的[教程](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jni.html)

*   或者寻找一个java实现。

已经有可用的[java 绑定](http://sourceforge.net/projects/tokyocabinet/files/tokyocabinet-java/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-09T12:45:20.667

该页面提到有可用的 Java API，但没有显示。您应该向他们索要 Java 文档。API 最好是 JDBC 驱动程序。

# c# - 在 C# 中返回匿名类型

> ID：10073319
> 
> 赞同：115
> 
> 时间：2012-04-09T12:41:03.713
> 
> 标签：c#, .net, anonymous-types, return-type

我有一个返回匿名类型的查询，并且该查询在一个方法中。你怎么写这个：

```
public "TheAnonymousType" TheMethod(SomeParameter)
{
  using (MyDC TheDC = new MyDC())
  {
     var TheQueryFromDB = (....
                           select new { SomeVariable = ....,
                                        AnotherVariable = ....}
                           ).ToList();

      return "TheAnonymousType";
    }
} 
```

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-04-09T12:42:34.367

你不能。

您只能返回`object`, 或对象容器，例如`IEnumerable<object>`,`IList<object>`等。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-04-09T12:44:35.630

您可以返回`dynamic`这将为您提供匿名类型的运行时检查版本，但仅限于 .NET 4+

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2017-03-29T07:46:40.197

在 C# 7 中，我们可以使用元组来完成此操作：

```
public List<(int SomeVariable, string AnotherVariable)> TheMethod(SomeParameter)
{
  using (MyDC TheDC = new MyDC())
  {
     var TheQueryFromDB = (....
                       select new { SomeVariable = ....,
                                    AnotherVariable = ....}
                       ).ToList();

      return TheQueryFromDB
                .Select(s => (
                     SomeVariable = s.SomeVariable, 
                     AnotherVariable = s.AnotherVariable))
                 .ToList();
  }
} 
```

您可能需要安装`System.ValueTuple`nuget 包。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2012-04-09T12:42:40.640

您不能返回匿名类型。你能创建一个可以返回的模型吗？否则，您必须使用`object`.

[这是 Jon Skeet 写的一篇关于这个主题的文章](https://codeblog.jonskeet.uk/2009/01/09/horrible-grotty-hack-returning-an-anonymous-type-instance)

文章中的代码：

```
using System;

static class GrottyHacks
{
    internal static T Cast<T>(object target, T example)
    {
        return (T) target;
    }
}

class CheesecakeFactory
{
    static object CreateCheesecake()
    {
        return new { Fruit="Strawberry", Topping="Chocolate" };
    }

    static void Main()
    {
        object weaklyTyped = CreateCheesecake();
        var stronglyTyped = GrottyHacks.Cast(weaklyTyped,
            new { Fruit="", Topping="" });

        Console.WriteLine("Cheesecake: {0} ({1})",
            stronglyTyped.Fruit, stronglyTyped.Topping);            
    }
} 
```

[或者，这是另一篇类似的文章](http://tomasp.net/blog/cannot-return-anonymous-type-from-method.aspx)

或者，正如其他人评论的那样，您可以使用`dynamic`

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2014-07-02T16:55:55.260

当需要返回时，您可以使用 Tuple 类代替匿名类型：

注意：元组最多可以有 8 个参数。

```
return Tuple.Create(variable1, variable2); 
```

或者，对于原始帖子中的示例：

```
public List<Tuple<SomeType, AnotherType>> TheMethod(SomeParameter)
{
  using (MyDC TheDC = new MyDC())
  {
     var TheQueryFromDB = (....
                           select Tuple.Create(..., ...)
                           ).ToList();

      return TheQueryFromDB.ToList();
    }
} 
```

[http://msdn.microsoft.com/en-us/library/system.tuple(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.tuple%28v=vs.110%29.aspx)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-04-09T13:22:58.000

C# 编译器是一个两阶段编译器。在第一阶段，它只检查命名空间、类层次结构、方法签名等。方法主体仅在第二阶段编译。

在编译方法体之前，不会确定匿名类型。

所以编译器无法在第一阶段确定方法的返回类型。

这就是为什么匿名类型不能用作返回类型的原因。

正如其他人所建议的那样，如果您使用的是 .net 4.0 或更高版本，则可以使用`Dynamic`.

如果我是你，我可能会创建一个类型并从方法中返回该类型。这样，对于维护您的代码和更具可读性的未来程序员来说，这很容易。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2012-04-09T12:47:13.557

三个选项：

选项1：

```
public class TheRepresentativeType {
    public ... SomeVariable {get;set;}
    public ... AnotherVariable {get;set;}
}

public IEnumerable<TheRepresentativeType> TheMethod(SomeParameter)
{
   using (MyDC TheDC = new MyDC())
   {
     var TheQueryFromDB = (....
                           select new TheRepresentativeType{ SomeVariable = ....,
                                        AnotherVariable = ....}
                           ).ToList();

     return TheQueryFromDB;
   } 
} 
```

选项 2：

```
public IEnumerable TheMethod(SomeParameter)
{
   using (MyDC TheDC = new MyDC())
   {
     var TheQueryFromDB = (....
                           select new TheRepresentativeType{ SomeVariable = ....,
                                        AnotherVariable = ....}
                           ).ToList();
     return TheQueryFromDB;
   } 
} 
```

您可以将其迭代为对象

选项 3：

```
public IEnumerable<dynamic> TheMethod(SomeParameter)
{
   using (MyDC TheDC = new MyDC())
   {
     var TheQueryFromDB = (....
                           select new TheRepresentativeType{ SomeVariable = ....,
                                        AnotherVariable = ....}
                           ).ToList();

     return TheQueryFromDB; //You may need to call .Cast<dynamic>(), but I'm not sure
   } 
} 
```

您将能够将其作为动态对象进行迭代并直接访问它们的属性

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-11-16T15:29:34.780

使用**C# 7.0**我们仍然不能返回匿名类型，但我们支持**元组类型**`tuple`，因此我们可以返回(`System.ValueTuple<T1,T2>`在这种情况下)的集合。目前`Tuple types` [不支持表达式树](https://github.com/dotnet/roslyn/issues/12897)，您需要将数据加载到内存中。

您想要的最短代码版本可能如下所示：

```
public IEnumerable<(int SomeVariable, object AnotherVariable)> TheMethod()
{
    ...

    return (from data in TheDC.Data
        select new { data.SomeInt, data.SomeObject }).ToList()
        .Select(data => (SomeVariable: data.SomeInt, AnotherVariable: data.SomeObject))
} 
```

或者使用流利的 Linq 语法：

```
return TheDC.Data
    .Select(data => new {SomeVariable: data.SomeInt, AnotherVariable: data.SomeObject})
    .ToList();
    .Select(data => (SomeVariable: data.SomeInt, AnotherVariable: data.SomeObject)) 
```

使用**C# 7.1**，我们可以省略元组的属性名称，它们将从元组初始化中推断出来，就像它适用于匿名类型一样：

```
select (data.SomeInt, data.SomeObject)
// or
Select(data => (data.SomeInt, data.SomeObject)) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-04-09T12:43:13.850

在这种情况下，您可以返回对象列表。

```
public List<object> TheMethod(SomeParameter)
{
  using (MyDC TheDC = new MyDC())
  {
     var TheQueryFromDB = (....
                           select new { SomeVariable = ....,
                                        AnotherVariable = ....}
                           ).ToList();

      return TheQueryFromDB ;
    }
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-04-09T12:49:54.900

```
public List<SomeClass> TheMethod(SomeParameter)
{
  using (MyDC TheDC = new MyDC())
  {
     var TheQueryFromDB = (....
                           select new SomeClass{ SomeVariable = ....,
                                        AnotherVariable = ....}
                           ).ToList();

      return TheQueryFromDB.ToList();
    }
}

public class SomeClass{
   public string SomeVariable{get;set}
   public string AnotherVariable{get;set;}
} 
```

创建自己的类并查询它是我所知道的最好的解决方案。据我所知，您不能在另一种方法中使用匿名类型返回值，因为它不会被识别。但是，它们可以在同一个方法中使用方法。我曾经将它们返回为`IQueryable`or `IEnumerable`，尽管它仍然无法让您看到匿名类型变量内部的内容。

我之前在尝试重构一些代码时遇到过这样的事情，你可以在这里查看：[重构和创建单独的方法](https://codereview.stackexchange.com/questions/3677/refactoring-and-creating-separate-methods)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-04-01T11:44:08.640

您只能使用动态关键字，

```
 dynamic obj = GetAnonymousType();

   Console.WriteLine(obj.Name);
   Console.WriteLine(obj.LastName);
   Console.WriteLine(obj.Age); 

   public static dynamic GetAnonymousType()
   {
       return new { Name = "John", LastName = "Smith", Age=42};
   } 
```

但是使用动态类型关键字，您将失去编译时安全性、IDE IntelliSense 等...

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-12-19T09:12:26.943

用反射。

```
public object tst() {
    var a = new {
        prop1 = "test1",
        prop2 = "test2"
    };

    return a;
}

public string tst2(object anonymousObject, string propName) {
    return anonymousObject.GetType().GetProperties()
        .Where(w => w.Name == propName)
        .Select(s => s.GetValue(anonymousObject))
        .FirstOrDefault().ToString();
} 
```

样本：

```
object a = tst();
var val = tst2(a, "prop2"); 
```

输出：

```
test2 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-10-25T14:37:05.967

实际上可以从特定用例中的方法返回匿名类型。我们来看一下！

使用 C# 7 可以从方法返回匿名类型，尽管它带有轻微的约束。我们将使用一种称为[局部函数](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/local-functions)的新语言特性和一个间接技巧（另一层间接可以解决任何编程挑战，对吧？）。

这是我最近确定的一个用例。我想在从`AppSettings`. 为什么？因为有一些关于缺失值的逻辑可以恢复为默认值，一些解析等等。应用逻辑后记录值的一种简单方法是将它们全部放在一个类中并将其序列化到日志文件（使用 log4net）。我还想封装处理设置的复杂逻辑，并将其与我需要对它们做的任何事情分开。所有这些都无需创建仅用于一次性使用的命名类！

让我们看看如何使用创建匿名类型的本地函数来解决这个问题。

```
public static HttpClient CreateHttpClient()
{
    // I deal with configuration values in this slightly convoluted way.
    // The benefit is encapsulation of logic and we do not need to
    // create a class, as we can use an anonymous class.
    // The result resembles an expression statement that
    // returns a value (similar to expressions in F#)
    var config = Invoke(() =>
    {
        // slightly complex logic with default value
        // in case of missing configuration value
        // (this is what I want to encapsulate)
        int? acquireTokenTimeoutSeconds = null;
        if (int.TryParse(ConfigurationManager.AppSettings["AcquireTokenTimeoutSeconds"], out int i))
        {
            acquireTokenTimeoutSeconds = i;
        }

        // more complex logic surrounding configuration values ...

        // construct the aggregate configuration class as an anonymous type!
        var c = new
        {
            AcquireTokenTimeoutSeconds =
                acquireTokenTimeoutSeconds ?? DefaultAcquireTokenTimeoutSeconds,
            // ... more properties
        };

        // log the whole object for monitoring purposes
        // (this is also a reason I want encapsulation)
        Log.InfoFormat("Config={0}", c);
        return c;
    });

    // use this configuration in any way necessary...
    // the rest of the method concerns only the factory,
    // i.e. creating the HttpClient with whatever configuration
    // in my case this:
    return new HttpClient(...);

    // local function that enables the above expression
    T Invoke<T>(Func<T> func) => func.Invoke();
} 
```

我已经成功地构建了一个匿名类，并且还封装了处理复杂设置管理的逻辑，所有这些都`CreateHttpClient`在它自己的“表达式”内部和内部。这可能不是 OP 想要的，但它是一种具有匿名类型的轻量级方法，目前在现代 C# 中是可能的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-10-15T00:21:59.177

另一种选择可能是使用自动映射器：只要公共属性匹配，您将从匿名返回的对象转换为任何类型。关键点是，返回对象，使用 linq 和 autommaper。（或使用类似的想法返回序列化的json等或使用反射..）

```
using System.Linq;
using System.Reflection;
using AutoMapper;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Newtonsoft.Json;

namespace UnitTestProject1
{
    [TestClass]
    public class UnitTest1
    {
        [TestMethod]
        public void TestMethod1()
        {
            var data = GetData();

            var firts = data.First();

            var info = firts.GetType().GetProperties(BindingFlags.Instance | BindingFlags.Public).First(p => p.Name == "Name");
            var value = info.GetValue(firts);

            Assert.AreEqual(value, "One");
        }

        [TestMethod]
        public void TestMethod2()
        {
            var data = GetData();

            var config = new MapperConfiguration(cfg => cfg.CreateMissingTypeMaps = true);
            var mapper = config.CreateMapper();

            var users = data.Select(mapper.Map<User>).ToArray();

            var firts = users.First();

            Assert.AreEqual(firts.Name, "One");

        }

        [TestMethod]
        public void TestMethod3()
        {
            var data = GetJData();

            var users = JsonConvert.DeserializeObject<User[]>(data);

            var firts = users.First();

            Assert.AreEqual(firts.Name, "One");

        }

        private object[] GetData()
        {

            return new[] { new { Id = 1, Name = "One" }, new { Id = 2, Name = "Two" } };
        }

        private string GetJData()
        {

            return JsonConvert.SerializeObject(new []{ new { Id = 1, Name = "One" }, new { Id = 2, Name = "Two" } }, Formatting.None);
        }

        public class User
        {
            public int Id { get; set; }
            public string Name { get; set; }
        }
    }

} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-02-11T14:40:01.933

现在尤其是使用本地函数，但是您总是可以通过传递一个创建匿名类型的委托来做到这一点。

因此，如果您的目标是在相同的源上运行不同的逻辑，并能够将结果组合到一个列表中。不确定为了达到既定目标而缺少什么细微差别，但只要您返回 a`T`并将委托传递给 make `T`，您就可以从函数返回匿名类型。

```
// returning an anonymous type
// look mom no casting
void LookMyChildReturnsAnAnonICanConsume()
{
    // if C# had first class functions you could do
    // var anonyFunc = (name:string,id:int) => new {Name=name,Id=id};
    var items = new[] { new { Item1 = "hello", Item2 = 3 } };
    var itemsProjection =items.Select(x => SomeLogic(x.Item1, x.Item2, (y, i) => new { Word = y, Count = i} ));
    // same projection = same type
    var otherSourceProjection = SomeOtherSource((y,i) => new {Word=y,Count=i});
    var q =
        from anony1 in itemsProjection
        join anony2 in otherSourceProjection
            on anony1.Word equals anony2.Word
        select new {anony1.Word,Source1Count=anony1.Count,Source2Count=anony2.Count};
    var togetherForever = itemsProjection.Concat(otherSourceProjection).ToList();
}

T SomeLogic<T>(string item1, int item2, Func<string,int,T> f){
    return f(item1,item2);
}
IEnumerable<T> SomeOtherSource<T>(Func<string,int,T> f){
    var dbValues = new []{Tuple.Create("hello",1), Tuple.Create("bye",2)};
    foreach(var x in dbValues)
        yield return f(x.Item1,x.Item2);
} 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2021-08-30T20:02:04.840

我不确定这个构造的名称，我认为这被称为匿名类型，但我可能错了。无论如何，我一直在寻找这个：

```
private (bool start, bool end) InInterval(int lower, int upper)
{
    return (5 < lower && lower < 10, 5 < upper && upper < 10);
}

private string Test()
{
    var response = InInterval(2, 6);
    if (!response.start && !response.end)
        return "The interval did not start nor end inside the target";
    else if (!response.start)
        return "The interval did not start inside the target";
    else if (!response.end)
        return "The interval did not end inside the target";
    else
        return "The interval is inside the target";
} 
```

另一种调用方式可能是：

```
 var (start, end) = InInterval(2, 6); 
```

# ruby - 显示过时的宝石？

> ID：10073329
> 
> 赞同：13
> 
> 时间：2012-04-09T12:41:49.003
> 
> 标签：ruby, gem, bundler

为了避免崩溃，我为我的每个 gem 指定了版本号`Gemfile`：

```
gem 'sass-rails',   '~> 3.1.5'
gem 'coffee-rails', '~> 3.1.1'
gem 'uglifier', '~> 1.0.3'
gem 'haml-rails', "~> 0.3.4"
gem 'simple_form', '~> 1.5.2' 
```

但我至少想知道是否有一些我没有安装的更新版本。例如，`simple_form 2.0.0`已发布。

我可以在 RubyGems 上检查每个 gem，但必须有一个自动工具来完成这项工作，对吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-09T12:43:46.550

使用最新版本 (1.1) 的[捆绑](http://getbundler.com)器，您可以执行此操作`bundle outdated`（[请参阅此页面。](http://gembundler.com/v1.1/bundle_outdated.html)）

要将捆绑器更新到最新版本，您可以运行`gem update bundler`

```
gazler@gazler-laptop:~/development/rails/livestax$ bundle outdated
Fetching gem metadata from http://rubygems.org/.......
Fetching gem metadata from http://rubygems.org/..

Outdated gems included in the bundle:
  * multi_json (1.2.0 > 1.0.3)
  * activesupport (3.2.3 > 3.1.0)
  * activemodel (3.2.3 > 3.1.0)
  * rack (1.4.1 > 1.3.5)
  * rack-cache (1.2 > 1.0.3)
  * sprockets (2.4.0 > 2.0.3)
  * actionpack (3.2.3 > 3.1.0)
  * mime-types (1.18 > 1.17.2) 
```

还有[Gemnasium](https://gemnasium.com/)，但我从未使用过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T17:28:17.323

同意@Gazler，您可以使用 bundle outdated 查看可用的最新 gem。您还可以使用 SourceNinja (www.sourceninja.com) 之类的服务，当有更新的 gem 可用时，它会向您发送电子邮件通知。

披露：我在 SourceNinja 工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-15T17:31:03.383

`bundle outdated`将完成这项工作。但这不是自动化的。如果你想自动化这个过程，你应该使用[VersionEye](https://www.versioneye.com/)。[VersionEye](https://www.versioneye.com/)可以监控您在 GitHub 或 Bitbucket 上的 Gemfile，并通过电子邮件通知您项目中过时的依赖项。

顺便一提。我是创建 VersionEye 的人。

# ruby - 剥离非字母数字字符但在 Ruby 中留下空格

> ID：10073332
> 
> 赞同：21
> 
> 时间：2012-04-09T12:42:02.450
> 
> 标签：ruby, string

试图改变这一点：

```
"The basketball-player is great! (Kobe Bryant)" 
```

进入这个：

```
"the basketball player is great kobe bryant" 
```

想要小写并删除所有标点符号但留下空格......

试过`string.downcase.gsub(/[^a-z ]/, '')`但它删除了空格

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-09T12:46:34.270

您可以简单地添加`\s`（空格）

`string.downcase.gsub(/[^a-z0-9\s]/i, '')`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-09T13:55:54.223

如果您也想捕捉非拉丁字符：

```
str = "The basketball-player is great! (Kobe Bryant) (ひらがな)"
str.downcase.gsub(/[^[:word:]\s]/, '')
#=> "the basketballplayer is great kobe bryant ひらがな" 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-09T13:18:49.527

一些很好的解决方案，但最简单的通常是最好的：

```
string.downcase.gsub /\W+/, ' ' 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-04-07T22:03:27.200

所有其他答案也去掉了数字。这适用于给出的示例，但并不能真正回答如何去除**non-alphanumeric**的问题。

```
string.downcase.gsub(/[^\w\s]/, '') 
```

请注意，这不会删除下划线。如果你需要，那么：

```
string.downcase.gsub(/[^a-zA-Z\s\d]/, '') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-09T12:47:18.153

`a.downcase.gsub(/[^a-z ]/, "")`

请注意我在 az 之后添加的空格。此外，如果您想替换所有空格（不仅使用 gmalette 建议的空间使用 \s）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-16T11:09:02.993

之前的所有答案都使篮球运动员成为篮球运动员或完全删除数字，这并不是所需要的。

以下代码完全符合您的要求：

```
text.downcase
    .gsub(/[^[:word:]\s]/, ' ') # Replace sequences of non-alphanumerical chars by a single space 
```

希望这对某人有帮助！

# android - 安卓天文台

> ID：10073339
> 
> 赞同：3
> 
> 时间：2012-04-09T12:42:23.633
> 
> 标签：android, chronometer

如何以默认 00:00 以外的特定时间启动计时器？是否可以设置 chronometerObj.setBase(startTime) ？

`ch.setBase(SystemClock.elapsedRealtime()-anylongvalue); ch.start();`如果我放了anylongvalue，我可以设置开始时间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T07:56:36.217

一般来说：

> mChronometer.setBase(SystemClock.elapsedRealtime() - (nr_of_min * 60000 + nr_of_sec * 1000)))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-23T21:18:18.033

Chronometer 对象在实例化时默认设置为现在的基本时间（'now' 与您从中获得的值一样`SystemClock.elapsedRealtime()`）。

您可以通过调用更改基准时间（00:00 时间）`setBase(<some other value>)`。

据推测，虽然我没有尝试过这个实验，但你可以看到自上次系统启动以来经过的时间，使用`setBase(0)`.

因此，您可以使用 chronometer 查看自您过去任意调用`SystemClock.elapsedRealtime()`. 诀窍是您需要将该值存储在某个地方，尽管应用程序和手机状态发生变化，您仍可以可靠地取回它。（参见[Android：chronometer as an persistent stopwatch。如何设置开始时间？什么是 Chronometer“Base”？](https://stackoverflow.com/q/2324701/165164)例如。）

许多答案建议在意图中坚持过去的任意时间。但是，充其量，这只会使计时器在手机保持开机状态时继续计数。

我已经在使用数据库并将我的开始时间存储在那里。我为它创建了一个单列表并在其中存储了一条记录。我的计时器开始时间在手机重启后仍然存在。

# php - php 和正则表达式：在字符串中搜索单词

> ID：10073351
> 
> 赞同：0
> 
> 时间：2012-04-09T12:42:56.587
> 
> 标签：php, mysql, regex

我如何在这个字符串中使用正则表达式在字符串中找到单词

**字符串是Mysql查询**

```
SELECT 
  id,
  name,
  desc,
  (SELECT id as lid FROM comments WHERE lid = id order by id desc limit 1) as lid_com
 FROM posts limit 3 
```

在这里我想在字符串的最后一个搜索**限制**

字符串可能是

```
 limit 3
  limit 3, 3
  limit 3 , 3
  limit 3 ,3 
```

3 这里可以是任何数字

我试过这个正则表达式，但我是初学者

> "/ 限制 [0-9]{0,9}+\,[0-9]{0,9} /i$"

我怎样才能做到这一点

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:51:34.397

```
"/limit[\s]+[\d]+[\s]*,[\s]*[\d]+$/i" 
```

这搜索不区分大小写：

*   “限制”
*   一个或多个空格
*   一位或多位数字
*   零个或多个空格
*   逗号
*   零个或多个空格
*   一位或多位数字
*   在字符串的末尾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:53:11.843

```
$string = 'SELECT
  id,
  name,
  desc,
  (SELECT id as lid FROM comments WHERE lid = id order by id desc limit 1) as lid_com
 FROM posts limit 3 ,3';

echo preg_match('/(limit)\s\d(((\,\s)|(\s\,\s)|(\s\,))\d)?$/i', $string, $matches);  //1
print_r($matches); //$matches['0'] == 'limit 3 ,3' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:56:44.877

不记得了，是否`LIMIT`总是最后一条 SQL 语句，所以我会使用

```
/limit\s+(\d+)(?:\s*,\s*(\d+))?(?=[^\n]+\Z)/mi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T13:03:33.483

试试这个条件 -

```
SELECT * FROM table WHERE column
  REGEXP '(^limit[[:space:]]+[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+$)|(^limit[[:space:]]+[[:digit:]]+[[:space:]]*$)'; 
```

第一部分找到像'limit 3,3'这样的字符串 -

```
^limit[[:space:]]+[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+$ 
```

第二个找到像'limit 3'这样的字符串 -

```
^limit[[:space:]]+[[:digit:]]+[[:space:]]*$ 
```

# javascript - 突出显示部分文本并显示信息对话？

> ID：10073355
> 
> 赞同：0
> 
> 时间：2012-04-09T12:42:59.873
> 
> 标签：javascript, jquery, jquery-ui

我正在我的博客上工作，不知道如何制作一个 javascript 来突出显示我的文本的某些部分并提供更多信息。像：

> 我在我的电脑上工作

如果我单击 pc，则在 Jquery UI 对话框中有一个窗口和更多信息。

我自己尝试过，但我必须为我想要的每一个信息创建一个 div。然后我能够打开一个盒子

```
$(foo).dialog('open') 
```

我认为这是太多的 div。你能给我一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:50:53.163

很难说你真正需要什么。下次你应该提供更多代码......但我会试一试：我不知道你如何提供文本的突出显示，但我认为[这个演示](http://jsfiddle.net/Gk8SR/2/)可以帮助你。

HTML：

```
<p> Text blabla
<span data-title="Title 1" data-text="Text 1" class="a2u">Highlight 1</span>
more blabla
<span data-title="Title 2" data-text="Text 2" class="a2u">Highlight 2</span>
more blabla
<span data-title="Title 3" data-text="Text 3" class="a2u">Highlight 3</span>
more blabla
</p> 
```

Javascript：

```
$().ready(function() {
    $("#alert2ui").dialog({
        autoOpen: false
    });
    $(".a2u").click(function() {
        $("#alert2ui").dialog("option", "title", $(this).attr("data-title"));
        $("#alert2ui").html($(this).attr("data-text"));
        $("#alert2ui").dialog('open');
    });
});​ 
```

您通过给定的文本突出显示文本，`css class`并使用 html5`data-*`属性设置详细信息。

# android - 颜色内容辅助 XML

> ID：10073361
> 
> 赞同：0
> 
> 时间：2012-04-09T12:43:25.930
> 
> 标签：android, xml, eclipse, colors, content-assist

对于颜色不好的 XML 文件，我的 Eclipse Content Assist 无法更改。

.jar 文件的内容辅助具有白色背景和黑色字体非常好。但是 XML 文件是白色背景和白色字体，我看不到写的是什么。

有谁知道如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:27:42.903

只需找到您的 gtk 配置文件夹，然后（如果您使用 Linux） exec: grep "GtkTreeView" * -R 编辑包含此项目的文件并使用您喜欢的颜色设置 "GtkTreeView:: *_* _color"。还有处理文本颜色的“ text[NORMAL] = ”选项。

# sql - 如何将此 SQL 转换为 LINQ 或 Lambda 表达式？

> ID：10073372
> 
> 赞同：0
> 
> 时间：2012-04-09T12:43:58.140
> 
> 标签：sql, linq, lambda

下面是我的 sql 查询：
你们能帮我把它转换成更干净的吗？

```
SELECT [PurchaseRequestID], [ProjectID],[FullName]
FROM PurchaseRequest
  WHERE [PurchaseRequestID] IN
    (SELECT [PurchaseRequestID] FROM PurchaseRequestDetail )
    AND [PurchaseRequestID] NOT IN
      (SELECT [PurchaseRequestID] FROM [PurchaseOrder] ) 
```

虽然我已经成功地转换了这个，但我认为这是不可读的，需要重写：

```
var query = from a in db.PurchaseRequests
where
   (from b in db.PurchaseRequestDetails
    select new
    {
        b.PurchaseRequestID
    }).Contains(new { a.PurchaseRequestID }) &&
!(from c in db.PurchaseOrders
    select new
    {
        c.PurchaseRequestID
    }).Contains(new { a.PurchaseRequestID })
select a; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:56:50.147

你真的不需要所有那些匿名对象。使用[let](http://msdn.microsoft.com/en-us/library/bb383976.aspx)关键字引入临时变量，而不是直接对子查询进行操作。

```
from a in db.PurchaseRequests
let b = from b in db.PurchaseRequestDetails select b.PurchaseRequestID
let c = from c in db.PurchaseOrders select c.PurchaseRequestID
where b.Contains(a.PurchaseRequestID) && !c.contains(a.PurchaseRequestID)
select a; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:56:51.100

```
var query = from a in db.PurchaseRequests
where
   db.PurchaseRequestDetails.Any(x => x.PurchaseRequestID == a.PurchaseRequestID) &&
   !db.PurchaseOrders.Any(x => x.PurchaseRequestID == a.PurchaseRequestID)
select a; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:03:07.733

如果您设置了导航属性，则可以这样编写查询：

```
IQueryable<PurchaseRequest> query = 
  from purchaseRequest in myDataContext.PurchaseRequests
  where purchaseRequest.PurchaseRequestDetail.Any()
  where !purchaseRequest.PurchaseOrder.Any()
  select purchaseRequest; 
```

或者如果你喜欢这个 lambda/method 风格......

```
IQueryable<PurchaseRequest> query2 = myDataContext.PurchaseRequests
  .Where(purchaseRequest => purchaseRequest.PurchaseRequestDetail.Any())
  .Where(purchaseRequest => !purchaseRequest.PurchaseOrder.Any()); 
```

# mysql - 取一个范围内的数字，它不会与 bash shell 中存在的数字冲突

> ID：10073384
> 
> 赞同：0
> 
> 时间：2012-04-09T12:44:47.313
> 
> 标签：mysql, linux, bash, shell

在 bash 中，我必须向 MySQL 插入一条具有有效端口号（1-65535）的新记录，现有的 MySQL 表已经有一些随机端口值的记录，我怎样才能选择一个新的随机端口号，它确实如此' t 与 MySQL 中现有的端口值冲突，有什么聪明的方法可以轻松做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:00:24.343

您需要为此创建一个逻辑：

1.  创建一个单列的表，其值为 1 到 65535。
2.  然后编写一个查询以获取不在工作表中的新表中的 id 列表。
3.  然后从结果列表中选择第一个 id。

# c# - 使用 MethodCall 表达式调用 Attribute.GetCustomAttributes

> ID：10073389
> 
> 赞同：1
> 
> 时间：2012-04-09T12:45:23.353
> 
> 标签：c#, expression-trees

我正在尝试使用表达式树创建一个委托来读取自定义属性。示例代码是

```
 [AttributeUsage(AttributeTargets.Class)]
public class TestAttribute : Attribute
{
    public string Description { get; set; }
}

 [TestAttribute(Description="sample text")]
 public class TestClass
 {
 } 
```

我想使用 Func 委托获取 Description 属性值。我想用在运行时创建这个委托的表达式来实现这一点。所以我试着写一些类似的东西

```
public  Func<T, string> CreateDelegate<T>()
    {
       //Below is the code which i want to write using expressions
        //TestAttribute attribute = typeof(T).GetCustomAttributes(typeof(TestAttribute), false)[0];
        //return attribute.Description;

        ParameterExpression clazz = Expression.Parameter(typeof(T),"clazz");
        ParameterExpression description = Expression.Variable(typeof(string),"description");
        ParameterExpression attribute=Expression.Variable(typeof(TestAttribute),"attribute");

        MethodCallExpression getAttributesMethod = Expression.Call(typeof(Attribute).GetMethod("GetCustomAttributes"),clazz);

        Expression testAttribute = Expression.TypeAs(Expression.ArrayIndex(getAttributesMethod, Expression.Constant(0)), typeof(TestAttribute));
        BinaryExpression result = Expression.Assign(description, Expression.Property(testAttribute, "Description"));

        BlockExpression body = Expression.Block(new ParameterExpression[] { clazz, attribute,description },
            getAttributesMethod, testAttribute, result);             

        Func<T, string> lambda = Expression.Lambda<Func<T, string>>(body, clazz).Compile();
        return lambda;
    } 
```

但是当我调用这个方法时，我在 getAttributesMethod 行得到了一个 AmbiguousMatchException，它说“找到了不明确的匹配”。那么如何在表达式树中使用 Attribute.GetCustomAttribute() 方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:51:29.543

它实际上是这里的反射块：

```
typeof(Attribute).GetMethod("GetCustomAttributes") 
```

`GetMethod`如果它有重载并且您没有指定参数类型，则会抛出该异常。

尝试：

```
typeof(Attribute).GetMethod("GetCustomAttributes", new [] {typeof(MemberInfo)}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:32:53.853

试试这个：

```
MethodCallExpression getAttributesMethod = Expression.Call(typeof(Attribute),
    "GetCustomAttributes", null, Expression.Constant(typeof(T))); 
```

但是你为什么要返回一个`Func<T, string>`？您在委托调用中使用什么作为参数？

# servlets - Servlet 3.0 中 AsyncContext.start(...) 的目的是什么？

> ID：10073392
> 
> 赞同：21
> 
> 时间：2012-04-09T12:45:32.603
> 
> 标签：servlets, servlet-3.0

Servlet API 说“AsyncContext.start”：

> 无效开始（java.lang.Runnable 运行）
> 
> 使容器调度线程（可能来自托管线程池）以运行指定的 Runnable。容器可以将适当的上下文信息传播到 Runnable。

从这个描述中，不清楚当作业需要等待时它与优化线程使用的任务有何关系。

在“Servlet & JSP”中，Budi Kurniawan 给出了 Servlet 3.0 异步特性的示例，在他使用的地方`AsyncContext.start`，我将展示示例的简化版本：

```
public void doGet(...) {
    final AsyncContext asyncContext = request.startAsync();

    asyncContext.start(new Runnable() {                        
        @ Override
        public void run() {
            // do some work here which involves waiting
            ...
            asyncContext.complete();
        }
    });
} 
```

在我遇到的大多数其他示例中，服务方法只是将 AsyncContext 存储在某处，并在其他地方进行处理（例如，由后台线程）。在此示例中，该作业看起来只是传递给另一个线程，该线程完成了请求。据我了解，现在它只是工作线程，浪费时间等待。

通过将工作（包括等待）从一个线程传递到另一个线程，您真的获得了一些东西吗？如果不是，那它的目的是`AsyncContext.start(...)`什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-09T13:07:45.277

你找到了一个糟糕的例子，恕我直言。事实上，我什至不知道[`AsyncContext.start()`](http://docs.oracle.com/javaee/6/api/javax/servlet/AsyncContext.html#start(java.lang.Runnable))存在。

我快速浏览了[Jetty](http://grepcode.com/file/repo1.maven.org/maven2/org.eclipse.jetty/jetty-server/7.2.2.v20101205/org/eclipse/jetty/server/AsyncContinuation.java#AsyncContinuation.start(java.lang.Runnable))和[Tomcat](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.tomcat/tomcat-catalina/7.0.26/org/apache/catalina/core/AsyncContextImpl.java#AsyncContextImpl.start(java.lang.Runnable))如何实现这一点。事实上，它们似乎有一些独立处理异步调用的线程池。

API 的这种使用不会给您带来任何好处或很少。不是阻塞 HTTP 线程，而是阻塞其他线程池。所以我可以想象应用程序仍然接受新的连接，但问题仍然存在——容器无法处理它们，因为额外的线程池仍然有限。

的全部要点`AsyncContext`是能够通过单个线程处理多个请求。通常您只需要一个线程来处理数千个异步连接 - 例如，当恰好一个线程等待假设要广播给多个客户端的数据时。另请参阅[AsyncContext.start() 的有限用途](https://dzone.com/articles/limited-usefulness)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-07T14:20:37.583

一开始我也有同样的反应——如果你只是将工作传递给另一个线程，你会得到什么？该规范在解释为什么这是一个好主意方面没有多大帮助。但是[这篇文章](https://web.archive.org/web/20190415152803/http://www.softwareengineeringsolutions.com/blogs/2010/08/13/asynchronous-servlets-in-servlet-spec-3-0/)做得很好。基本上，它是让服务器在重负载下优雅地降级，而不是仅仅因为线程耗尽而失败。实际工作是在一个固定大小的线程池中完成的，因此服务器可以接受任意数量的请求，而不必为每个请求保留一个线程直到它完成。当然，您可能必须调整您的 O/S 设置才能同时保持打开数千个套接字。

一旦拥有了这种能力，您就可以更轻松地利用 Comet（服务器推送）架构，其中客户端 Javascript 保持 AJAX 请求打开，以便服务器可以在某些事件发生时立即通知它，而不必轮询服务器以查明是否发生了什么事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-10T21:15:33.503

这可能有用的一个原因是，当您想要释放传入的 Web 线程，做一些其他工作，完成后 - 返回到 Web 线程（可能是另一个线程，但仍然来自 Web 服务器池）以完成原始操作并向客户端发送响应。

例如：

```
1\. ac = request.startAsync();
2\. forward("some data", "another system"); // async outbound HTTP request
3\. (at this point, incoming servlet thread is released to handle other requests)
4\. (in some other, non-servlet thread, upon "forward" response arrival)
   ac.start(new Runnable() { /* send response to the client */ }); 
```

You could, of course, send response in the non-servlet thread, but this has one disadvantage - you use non-servlet thread to do servlet-typical operations, which means you're implicitly changing the balance between amount of thread power reserved for servlet work vs. other work.

In other words - it gives you the ability to post Runnable into servlet thread pool. Obviously these are rare needs, but still - it gives some reasoning for AsyncContext.start() method.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-20T12:23:13.543

[Tomcat ThreadPoolExecutor](https://tomcat.apache.org/tomcat-8.5-doc/api/org/apache/tomcat/util/threads/ThreadPoolExecutor.html) based on [`java.util.concurrent.ThreadPoolExecutor`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html) and configured in [Apache Tomcat 8 Configuration Reference](http://tomcat.apache.org/tomcat-8.5-doc/config/executor.html). It handles all Tomcat request, so, if you have long running task its better to handle them in own small-size Fixed/Cached thread pool and submit task like [described here](https://stackoverflow.com/a/7293118/548473).

# .htaccess - Drupal 中的 RewriteBase 不起作用

> ID：10073398
> 
> 赞同：2
> 
> 时间：2012-04-09T12:45:55.320
> 
> 标签：.htaccess, drupal, mod-rewrite

我刚刚开发了基于 Drupal 的网站，而不是旧的“定制”网站。

我面临的问题是网站的根不是 apache 根。它在目录中：

```
/public_html/mydomain/htdocs/ 
```

由于所有这些，我的链接现在看起来像：

```
http://www.mydomain.com/mydomain/htdocs/php
http://www.mydomain.com/mydomain/htdocs/java
http://www.mydomain.com/mydomain/htdocs/jquery 
```

尝试更改 Drupal 的 .htaccess 文件中的指令，其中：

```
RewriteBase /mysite/htdocs 
```

...但这并没有改变链接。

此外，对于以前的网站，所有链接都可以正常工作...

你能告诉我如何修复这个指令吗？

先感谢您！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-09T14:54:33.667

RewriteBase 不用于此目的。您需要编辑`virtual host`或 vhost 文件。在您的 apache 配置中找到 vhost 文件并将其更改`DocumentRoot`为您的文件夹`/public_html/mydmian/htdocs/`，然后将 rewritebase 注释掉。

RewriteBase 是如果您的站点位于“文档根目录”的子文件夹中。您拥有的是文档根目录。

# embedded - SPI真的需要等待循环吗？

> ID：10073399
> 
> 赞同：3
> 
> 时间：2012-04-09T12:45:59.983
> 
> 标签：embedded, spi, iar

我正在使用带有 IAR Embedded Workbench 5.10 的 msp430f5418。

图形 LCD (ST7565R) 通过 SPI 连接到 MSP..

MSP 主机使用 8 位、MSB 优先模式和 SMCLK。

通常我们必须在使用 SPI 传输字节之前检查忙位，对吗？

但就我而言，即使我在不​​检查忙位的情况下连续发送数据，它也可以正常工作，并且我可以正确查看显示数据。

任何人都可以解释为什么它工作？

是否需要检查就绪位或是否安全？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T13:39:42.273

您的软件可能足够慢，以至于 spi 事务每次都完成。如果您可以验证情况确实如此并且总是如此，那么您可以争辩不添加更多代码来进行检查。删除执行检查的代码可能会加速您的例程，以至于对于 spi 接口来说太快并导致冲突。

一般来说，您应该确保一件事在另一件事开始之前完成。通常，您如何确保可以使用硬件功能或通过分析或实验。如果硬件具有该功能并且您以某种方式确定您不需要检查，那么在有或没有检查的情况下进行性能测试仍然是一个好主意。如果性能不重要或没有太大差异，那么在某个地方离开检查仍然可能更安全，即使您的代码带有大量警告注释，编译器或代码更改可能就足以让它没有工作没有检查。

# android - Android SDK ADT 插件！安装 VIA 安装新软件时出错

> ID：10073400
> 
> 赞同：0
> 
> 时间：2012-04-09T12:46:04.927
> 
> 标签：android, eclipse, adt

我知道这个问题已经被问过很多次了，但我去了 evenrythgn 建议我使用的是 Mac 10.6.8、Ecllipse 3.7.0 和[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)。

我得到这个错误

```
`Cannot complete the install because of a conflicting dependency.
  Software being installed: Android Development Tools 17.0.0.v201203161636-291853 (com.android.ide.eclipse.adt.feature.group 17.0.0.v201203161636-291853)
  Software currently installed: Eclipse SDK 3.7.0.I20101028-1441 (org.eclipse.sdk.ide 3.7.0.I20101028-1441)
  Only one of the following can be installed at once: 
    Core Runtime 3.6.100.v20100628 (org.eclipse.core.runtime 3.6.100.v20100628)
    Core Runtime 3.7.0.v20110110 (org.eclipse.core.runtime 3.7.0.v20110110)
  Cannot satisfy dependency:
    From: Android Development Tools 17.0.0.v201203161636-291853 (com.android.ide.eclipse.adt.feature.group 17.0.0.v201203161636-291853)
    To: org.eclipse.wst.sse.ui 0.0.0
  Cannot satisfy dependency:
    From: EMF Common 2.7.0.v20110605-0747 (org.eclipse.emf.common 2.7.0.v20110605-0747)
    To: bundle org.eclipse.core.runtime [3.7.0,4.0.0)
  Cannot satisfy dependency:
    From: EMF Common 2.7.0.v20110912-0920 (org.eclipse.emf.common 2.7.0.v20110912-0920)
    To: bundle org.eclipse.core.runtime [3.7.0,4.0.0)
  Cannot satisfy dependency:
    From: EMF Common 2.7.0.v20120127-1122 (org.eclipse.emf.common 2.7.0.v20120127-1122)
    To: bundle org.eclipse.core.runtime [3.7.0,4.0.0)
  Cannot satisfy dependency:
    From: Eclipse Platform 3.7.0.v20100923-9fF7JHAiFsAuq4Goz-NCfThFOyVEwz0z0Pmu4 (org.eclipse.platform.feature.group 3.7.0.v20100923-9fF7JHAiFsAuq4Goz-NCfThFOyVEwz0z0Pmu4)
    To: org.eclipse.rcp.feature.group [3.7.0.v20101022-9TBTFsGFwgqdN7ZkIU1WURQ]
  Cannot satisfy dependency:
    From: Eclipse RCP 3.7.0.v20101022-9TBTFsGFwgqdN7ZkIU1WURQ (org.eclipse.rcp.feature.group 3.7.0.v20101022-9TBTFsGFwgqdN7ZkIU1WURQ)
    To: org.eclipse.core.runtime [3.6.100.v20100628]
  Cannot satisfy dependency:
    From: Eclipse Project SDK 3.7.0.v20100629-7Q7t-DPX2naDL1jfutmm2idmoY-eH81sz-yIoQxy-Yeup (org.eclipse.sdk.feature.group 3.7.0.v20100629-7Q7t-DPX2naDL1jfutmm2idmoY-eH81sz-yIoQxy-Yeup)
    To: org.eclipse.platform.feature.group [3.7.0.v20100923-9fF7JHAiFsAuq4Goz-NCfThFOyVEwz0z0Pmu4]
  Cannot satisfy dependency:
    From: Eclipse SDK 3.7.0.I20101028-1441 (org.eclipse.sdk.ide 3.7.0.I20101028-1441)
    To: org.eclipse.sdk.feature.group [3.7.0.v20100629-7Q7t-DPX2naDL1jfutmm2idmoY-eH81sz-yIoQxy-Yeup]
  Cannot satisfy dependency:
    From: Structured Source Editor 1.3.0.v201105101529 (org.eclipse.wst.sse.ui 1.3.0.v201105101529)
    To: bundle org.eclipse.emf.common [2.4.0,3.0.0)
  Cannot satisfy dependency:
    From: Structured Source Editor 1.3.1.v201108191312 (org.eclipse.wst.sse.ui 1.3.1.v201108191312)
    To: bundle org.eclipse.emf.common [2.4.0,3.0.0)
  Cannot satisfy dependency:
    From: Structured Source Editor 1.3.2.v201201041522 (org.eclipse.wst.sse.ui 1.3.2.v201201041522)
    To: bundle org.eclipse.emf.common [2.4.0,3.0.0)` 
```

已经厌倦了一切，但无法通过这个任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:41:58.693

从**Eclipse IDE for Java Developers**包开始，而不是 Eclipse Classic (SDK)。SDK 构建不包括下载 ADT 所需的某些插件所需的 Indigo 发布存储库。

# xml - xsd验证问题

> ID：10073405
> 
> 赞同：1
> 
> 时间：2012-04-09T12:46:16.800
> 
> 标签：xml, xsd

我知道我已经多次发布了这个问题。但我现在遇到了一个新错误，我需要帮助。这是我收到的错误。“s4s-elt-invalid-content.1：‘#AnonType_orders’的内容无效。元素‘element’无效、错位或出现频率过高。”

这是我的 xsd 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:simpleType name="reach">
        <xs:restriction base = "xs:integer">
          <xs:enumeration value = "50" />
          <xs:enumeration value = "75" /> 
          <xs:enumeration value = "100" />
         </xs:restriction>
 </xs:simpleType>
<xs:simpleType name = "language">
    <xs:restriction base = "xs:string">
        <xs:enumeration value = "Spanish" />
        <xs:enumeration value = "Chinese" />
        <xs:enumeration value = "English" />
        <xs:enumeration value = "German" />
        <xs:enumeration value = "French" />
     </xs:restriction>
   </xs:simpleType>
<xs:simpleType name="caseColor">
    <xs:restriction base="xs:string">
        <xs:enumeration value="Lemonde" />
        <xs:enumeration value="Strawberry" />
        <xs:enumeration value="Lime" />
        <xs:enumeration value="Blueberry" />
    </xs:restriction> 
  </xs:simpleType>
<xs:simpleType name="numOfBat">
    <xs:restriction base="xs:integer">
        <xs:enumeration value="1" />
        <xs:enumeration value="2" />
        <xs:enumeration value="3" />
        <xs:enumeration value="4" />
    </xs:restriction> 
  </xs:simpleType>
<xs:simpleType name="numOfCam">
    <xs:restriction base="xs:string">
        <xs:pattern value="1|2" />
    </xs:restriction> 
  </xs:simpleType>
<xs:simpleType name="volt">
    <xs:restriction base="xs:string">
        <xs:enumeration value="110-120" />
        <xs:enumeration value="220-240" />
    </xs:restriction> 
  </xs:simpleType>
<xs:element name="orders">
<xs:complexType>
<xs:element name ="order" maxOccurs="unbounded"> 
<xs:complexType>
 <xs:sequence>
    <xs:element name="custName" type ="xs:string" />
                <xs:attribute name ="custID" />
<xs:element name="case" type="xs:caseColor" >
</xs:element>
<xs:element name="batteries" type="xs:numOfBat" default = 
"1"> 
</xs:element>
<xs:element name="recharger" type="xs:volt" /> 
<xs:element name="arm"> 
   <xs:element name ="reaches" minOccurs="2" maxOccurs="3" 
type="xs:reach" />
</xs:element>
<xs:element name ="camera" type="xs:numOfCam" /> 
<xs:element name = "speech" type="xs:language" />
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:complexType>
</xs:element>
</xs:schema> 
```

这是我的 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<orders>
<order>
<custName custID="11223"> John Doe </custName>
<case> Strawberry </case>
<batteries> 2 </batteries>
<recharger> 110-120 V </recharger>
<arm>  
   <reach> 50 </reach>
   <reach> 100 </reach>
</arm>
<camera> 2 </camera>
<speech> Spanish </speech>
</order>
<order>
<custName custID="45392"> Jane Camp </custName>
<case> Lime </case>
<batteries> 4 </batteries>
<recharger> 220-240 V </recharger>
<arm> 3
   <reach> 75 </reach>
   <reach> 75 </reach>
   <reach> 100 </reach>
</arm>
<camera> 1 </camera>
<speech> Chinese </speech>
</order>
<order>
<custName custID="69482"> George Carlton </custName>
<case> Blueberry </case>
<batteries> 1 </batteries>
<recharger> 110-120 V </recharger>
<arm> 
   <reach> 75 </reach>
   <reach> 100 </reach>
</arm>
<camera> 2 </camera>
<speech> French </speech>
</order>
</orders> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:41:30.963

你`xsd`的形成很糟糕，特别是你的`orders`元素。您还为自定义类型引用了错误的命名空间。我会解决我看到的问题。

首先：您的`orders`节点被定义为 a`xs:complexType`并且您有一个`order`元素作为 的`complexType`子节点，但 element 不是允许的子节点。您需要在两者之间放置`xs:sequence`或`xs:all`：

```
<xs:element name="orders">
  <xs:complexType>
    <xs:sequence>
      <xs:element name ="order" maxOccurs="unbounded">
         <!-- existing nodes -->
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

下一步：您的`arm`元素有 1 个子元素，但`xs:element`在此上下文中是不允许的。您需要将其定义为`complexType`然后`sequence`或`all`再次。

```
<xs:element name="arm">
    <xs:complexType>
        <xs:sequence>
            <xs:element name ="reaches" minOccurs="2" maxOccurs="3" type="reach" />
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

第三：您的`custId`属性未在正确的位置定义。 `xs:attributes`必须将其定义为元素下的子节点，其中它们被定义为属性，但是 xs:simpleType 不能有属性节点，因此您需要将其定义为 complexType。这是您的问题的可能解决方案：

```
<xs:element name="custName">
    <xs:complexType>
        <xs:simpleContent>
            <xs:extension base="xs:string">
               <xs:attribute name="custID" type="xs:int" use="required" />
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>
</xs:element> 
```

最后：当您引用所有自定义类型（`reach`、`numOfBat`、`volt`等）时，您将它们作为`xs:`命名空间的一部分进行引用，但是这些类型并未在`xs:`命名空间中定义。由于您没有为 XSD 定义 targetNamespace，因此您的自定义类型将成为默认命名空间的一部分。您只需`xs:`要从类型中删除 。

例如，您应该将它们声明为：`type="reach"`、、、`type="numOfBat"`等`type="caseColor"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:19:01.063

我不知道您使用什么工具进行验证，但它产生的消息似乎毫无帮助。有关信息，以下是撒克逊人产生的消息：

```
Saxon-EE 9.5.0.1J from Saxonica
Java version 1.6.0_27
Using license serial number M008277
Loading schema document file:/Users/mike/Desktop/temp/test.xsd
Error at xs:element on line 48 column 49 of test.xsd:
  Element xs:element cannot appear here: expected one of {choice, sequence, assert,
  openContent, annotation, attributeGroup, anyAttribute, simpleContent, all, attribute,
  group, complexContent}
Error at xs:attribute on line 52 column 48 of test.xsd:
  Element <xs:attribute> is not allowed as a child of <xs:sequence>
Error at xs:element on line 61 column 19 of test.xsd:
  Element xs:element cannot appear here: expected one of {annotation, simpleType, key,
  complexType, keyref, unique, alternative}
Error at xs:element on line 61 column 19 of test.xsd:
  Element <xs:element> is not allowed as a child of <xs:element>
Schema processing failed: 4 errors were found while processing the schema 
```

我希望你发现这些更清楚。本质上，问题在于 xs:element 不能作为 xs:complexType 的子项出现：您可能需要介于两者之间的 xs:sequence 之类的东西。

# c# - 将类型列表作为通用参数传递

> ID：10073406
> 
> 赞同：3
> 
> 时间：2012-04-09T12:46:17.110
> 
> 标签：c#

我想知道是否可以将类型列表作为泛型参数传递。我有一个类需要获得不定数量的类型并使用它们。 **像这样的东西：**

```
class o<TTypeCollection>
{
    private void someMethod()
    {

        repository.Save < TTypeCollection.First() > (MyCollectionViewSource.CurrentItem as TTypeCollection.First());

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:00:48.450

没有办法在 C# 中以 C++ 风格进行模板元编程，但您可以使用反射来完成：

```
private void someMethod() {
    var genericSave = repository // This can be done during initialization
        .GetType()
        .GetMethods()
        .Where(m => m.Name == "Save" && m.IsGenericMethodDefinition);
    var t = MyCollectionViewSource.CurrentItem.GetType();
    genericSave
        .MakeGenericMethod(new[] {t})
        .Invoke(new object[] {MyCollectionViewSource.CurrentItem});
} 
```

# php - CodeIgniter 2.1.0：在模型中访问模型

> ID：10073411
> 
> 赞同：1
> 
> 时间：2012-04-09T12:46:59.870
> 
> 标签：php, class, codeigniter, model, codeigniter-2

我在 CodeIgniter 中有四个模型用于我正在构建的论坛：

```
forum_model
category_model
user_model
subject_model 
```

我希望访问论坛模型中的类别、用户和主题模型（即：按用户/类别/主题浏览线程）但它们需要独立于各个功能（即：添加用户/主题/类别）

还有更多独立的功能，基本上我想知道的是创建“主”论坛模型是否是不好的做法（以及创建模型的最佳方法是什么）或者我是否应该只在控制器中进行链接?

我正在考虑像这样设置 forum_model ：

```
class Forum_model extends CI_Model {
    function __construct() {
        parent::construct();
        $this->load->model('Category_model', 'category');
        $this->load->model('User_model', 'user');
        $this->load->model('Subject_model', 'subject');
    }
} 
```

然后可能使用变量变量访问方法中的其他模型`$this->$model->method()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:06:11.683

在 2.1.0 中，任何未在模型范围内定义的属性（即模型引用、库等）都将神奇地访问 CI 超级对象：

```
<?php
function __get($key)
{
    return get_instance()->$key;
} 
```

因此，只要您的论坛模型中没有`$category` `$user`或`$subject`成员变量，这应该可以工作。

*但是*，通常在 MVC 中，模型彼此不了解是一种很好的做法。我提醒您不要让您的论坛模型像控制器或库一样运行（否则，它应该是控制器或库！）。

# asp.net - aspx 不包含 this.Bounds 的定义

> ID：10073412
> 
> 赞同：-1
> 
> 时间：2012-04-09T12:47:07.113
> 
> 标签：asp.net, screenshot, buttonclick

大家好，我正在编写一个程序，该程序在单击按钮时捕获屏幕的一部分。下面是我的代码

```
**default.aspx**
    <%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
        CodeBehind="Default.aspx.cs" Inherits="_9marchexp._Default" %>

    <asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    </asp:Content>
    <asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
        <h2>
            Welcome to ASP.NET!
        </h2>
        <p>
            To learn more about ASP.NET visit <a href="http://www.asp.net" title="ASP.NET Website">www.asp.net</a>.
        </p>
        <p>
            You can also find <a href="http://go.microsoft.com/fwlink/?LinkID=152368&amp;clcid=0x409"
                title="MSDN ASP.NET Docs">documentation on ASP.NET at MSDN</a>.
        </p>
        <p>
            &nbsp;</p>
        <p>
            &nbsp;</p>
        <p>
            <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
        </p>
    </asp:Content> 
```

和

**默认.aspx.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;
using System.Data;
using System.Runtime.InteropServices;
using System.ComponentModel;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.Drawing.Drawing2D;
using System.Drawing.Imaging;

namespace _9marchexp
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {

            Rectangle formRect = this.Bounds; // saving information aout your window in formRect <br/>
                       // (height, width, x, y, etc

      using (Bitmap bitm = new Bitmap(formRect.Width, formRect.Height)) // creating new bitmap of the same <br/>
                                       // height and width as our own window
      {
        using (Graphics graphic = Graphics.FromImage(bitm))
        {
          graphic.CopyFromScreen(new Point(formRect.Left, formRect.Top), Point.Empty, formRect.Size);
        }
        bitm.Save("C:\\Users\\xxxx\\Desktop\\myscreenshot.jpg", ImageFormat.Jpeg); // saving the bitmap bile to destination dir. <br/>
                               // with specified name

        }
    }
    }
} 
```

但是问题是当我执行代码时会显示一条错误消息

```
***'_9marchexp._Default' does not contain a definition for 'Bounds' and no extension method 'Bounds' accepting a first argument of type '_9marchexp._Default' could be found (are you missing a using directive or an assembly reference?)*** 
```

如何纠正，有人可以帮助我吗？

此外，如果我将**this.Bounds**替换为**Screen.PrimaryScreen.Bounds**代码运行完美，但整个屏幕的屏幕截图被截取，这是我不想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:16:38.567

****使用后面的代码****是不可能捕获**浏览器、用户、服务器、桌面或其他任何东西的屏幕的。**

 ****可以在此处找到读取页面并将其打印到图像的解决方案 [将网页转换为 ASP.NET 中的图像](https://stackoverflow.com/questions/2715385/convert-webpage-to-image-from-asp-net)****

# ftp - 将 FTP 连接到服务器时出现“MLSD”命令错误

> ID：10073418
> 
> 赞同：6
> 
> 时间：2012-04-09T12:47:22.897
> 
> 标签：ftp, connection, ftp-client

我有一个可以完全访问设置的 Web 托管服务器。我是一名 Web 开发人员，所以 FTP 是我更新网站的日常使用。我正在使用 FTP 客户端，设置服务器信息后，当我尝试连接时，我收到一个错误，而 FTP 客户端已向服务器发送“MLSD”命令。

这是客户端日志：

```
Status: Resolving address of si****.co (edited)
Status: Connecting to 74.208.***.***:21... (edited)
Status: Connection established, waiting for welcome message...
Response:   220 ProFTPD 1.3.3e Server (ProFTPD) [74.208.***.***] (edited)
Command:    USER si***** (edited)
Response:   331 Password required for si*****
Command:    PASS ********
Response:   230 User si***** logged in
Command:    SYST
Response:   215 UNIX Type: L8
Command:    FEAT
Response:   211-Features:
Response:    MDTM
Response:    MFMT
Response:    TVFS
Response:    UTF8
Response:    MFF modify;UNIX.group;UNIX.mode;
Response:    MLST modify*;perm*;size*;type*;unique*;UNIX.group*;UNIX.mode*;UNIX.owner*;
Response:    LANG en-US*;fr-FR;it-IT;ja-JP;ko-KR;ru-RU;zh-CN;zh-TW;bg-BG
Response:    REST STREAM
Response:    SIZE
Response:   211 End
Command:    OPTS UTF8 ON
Response:   200 UTF8 set to on
Status: Connected
Status: Retrieving directory listing...
Command:    PWD
Response:   257 "/" is the current directory
Command:    TYPE I
Response:   200 Type set to I
Command:    PASV
Response:   227 Entering Passive Mode (74,208,*,*,149,88).
Command:    MLSD
Error:  Connection timed out
Error:  Failed to retrieve directory listing 
```

我不知道出了什么问题。我用于不同服务器的其他 FTP 帐户在相同的 FTP 客户端软件上运行良好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-05T16:32:54.923

我最近也偶然发现了这个问题。我发现我在第一次谷歌搜索中找到的解决方案都没有用，但幸运的是找到了我自己的解决方案......

在站点管理器中，将加密更改为“仅使用普通 FTP”，我之前是“如果可用，使用显式 FTP over TLS”。

仅供参考，我之前尝试过的修复是：

*   路由器上的防火墙配置 - 由于工作网络而无法配置，发现只有我的电脑。
*   更改远程服务器上的某些内容以与端口有关 - 同样，不可能，只有我的 PC 有故障。
*   将 Filezilla 从被动切换到主动 - 无效
*   改用 SSH - 被拒绝

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-04T16:09:25.797

这个问题有两种解决方案

1.  将传输模式从默认更改为活动

2.  使用 SFTP - SSH 文件传输协议。

两者都在站点管理器窗口中完成。我在 Windows 10 中使用最新版本的 FileZilla 客户端。更改这两个都不能解决我的问题！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-26T16:24:22.213

检查您的 ftp 配置文件，取消注释并允许使用被动端口 30000 到 35000。

```
pasv_min_port=30000
pasv_max_port=35000 
```

还将这些端口范围添加到您的防火墙`TCP_IN`和`TCP_OUT`(30000:35000)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-23T11:44:04.087

此问题是由防火墙阻止 pure-ftp 守护程序侦听的被动连接端口范围引起的

这个问题可以通过在 pro-ftpd.conf 文件中添加被动端口范围来解决，如下所示

被动端口 60000 62000

确保在防火墙允许的传入端口的 TCP_IN 中打开提到的被动端口范围

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-14T23:23:11.323

我在 ubuntu 上使用 FileZilla 时遇到了同样的错误。我通过以下步骤消除了错误： 1\. 在 FileZilla 上，打开顶部选项卡“站点管理器”页面，在右上角，选择“传输设置”选项卡。2\. 在“传输设置”页面，有“默认”、“主动”和“被动”三种传输模式。选择“活动”。3\. 再次尝试连接。

# linux - 将外部域和子目录指向站点的文件夹

> ID：10073419
> 
> 赞同：0
> 
> 时间：2012-04-09T12:47:29.780
> 
> 标签：linux, apache, .htaccess

我们网站中的很多页面都使用旧的子域来存储图像、css 和 javascript 文件。我从新手开发人员那里继承了这个项目，他们没有使用任何通用的设计模板。结果是数百页具有对内容的静态引用，示例如下：

```
http://static.foo.bar/css/sample.css
http://static.foo.bar/brochure/css/sample.css
http://static.foo.bar/company/newsletter/js/common.js
http://static.foo.bar/images/version2/header.jpg 
```

...以及数百个其他地点。我需要将它们全部指向主域而不是子域，而无需在 .htaccess 文件中为每个域创建规则。所以：

```
http://static.foo.bar/css/sample.css 
should point to: 
http://www.foo.bar/css/sample.css

http://static.foo.bar/brochure/css/sample.css
should point to: 
http://www.foo.bar/brochure/css/sample.css

http://static.foo.bar/company/newsletter/js/common.js
should point to: 
http://www.foo.bar/company/newsletter/js/common.js

http://static.foo.bar/images/version2/header.jpg
should point to: 
http://www.foo.bar/images/version2/header.jpg 
```

我知道这是可能的，只是我不是服务员。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:13:24.837

~~`.htaccess`在文档根目录中创建一个包含以下内容的文件：~~

将此添加到您的服务器配置中，`%{HTTP_HOST}`检查不起作用`.htaccess`：

```
<IfModule mod_rewrite.c>
# bad matching: RewriteCond %{HTTP_HOST}   !^static\.foo\.bar [NC]
#
# correction, matching everything other than www.foo.bar :
RewriteCond %{HTTP_HOST}   !^www\.foo\.bar$ [NC]
RewriteCond %{HTTP_HOST}   !^$
RewriteRule ^/(.*)         http://www.foo.bar/$1 [L,R]
</IfModule> 
```

见[http://httpd.apache.org/docs/2.0/misc/rewriteguide.html#url](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html#url)

更新：再给它一秒钟，如果它托管在同一台服务器上，只需添加

```
ServerAlias static.foo.bar 
```

到 www.foo.bar 配置也可以提供静态内容。

更新 #2 基于反馈：

这应该在 .htaccess 文件中工作（在我的电脑上工作），这会将所有请求重定向`static.foo.bar/*`到`www.foo.bar/*`：

```
RewriteCond %{HTTP_HOST}    ^static\.foo\.bar [NC]
RewriteRule ^(.*)$          http://www.foo.bar/$1 [R,L] 
```

不，ServerAlias 命令仅适用于 VirtualHost 配置：

[http://httpd.apache.org/docs/2.2/mod/core.html#serveralias](http://httpd.apache.org/docs/2.2/mod/core.html#serveralias)

# android - Android 将文件上传到 .NET Web 服务器

> ID：10073420
> 
> 赞同：1
> 
> 时间：2012-04-09T12:47:32.943
> 
> 标签：android, file-upload

我想编写一个可以将文件上传到交流基础网络服务器的 android 应用程序。到目前为止，我没有运气。我不断收到协议不支持的地址系列。我在清单文件中添加了 INTERNET 和 WRITE_EXTERNAL_STORAGE。请记住，我在模拟器中运行它。

任何想法或建议都非常感谢。

提前谢谢贾斯汀

无论如何，这是我的代码 Android - Uploader.java

```
package com.main;

import java.io.DataOutputStream;
import java.io.FileInputStream;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;

import android.os.AsyncTask;
import android.util.Log;
import android.widget.TextView;

public class Uploader extends AsyncTask<Object, String, Object>
{
    URL connectURL;
    String params;
    String responseString;
    String fileName;
    byte[] dataToServer;
    FileInputStream fileInputStream;
    TextView info;

    private static final String TAG = "Uploader";

    void setUrlAndFile(String urlString, String fileName, TextView info)
    {
        Log.d(TAG,"StartUploader");
        this.info = info;
        try
        {
            fileInputStream = new FileInputStream(fileName);
            connectURL = new URL(urlString);
        }
        catch(Exception e)
        {
            publishProgress(e.toString());
        }
        this.fileName = fileName;
    }

    synchronized void doUpload()
    {
        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary = "*****";
        Log.d(TAG,"lv1");

        try
        {
            Log.d(TAG,"doUpload");
            publishProgress("Uploading...");
            HttpURLConnection conn = (HttpURLConnection)connectURL.openConnection();
            conn.setDoInput(true);
            conn.setDoOutput(true);
            conn.setUseCaches(false);
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Connection","Keep-Alive");
            conn.setRequestProperty("Content-Type","multipart/form-data;boundary=" + boundary);
            DataOutputStream dos  = new DataOutputStream(conn.getOutputStream());
            dos.writeBytes(twoHyphens + boundary + lineEnd);
            dos.writeBytes("Content-Disposition:form-data; name=\"uploadedfile\";filename=\"" + fileName + "\"" + lineEnd);
            dos.writeBytes(lineEnd);

            Log.d(TAG,"LvA");
            Log.d(TAG,twoHyphens + boundary + lineEnd + ";Content-Disposition:form-data; name=\"uploadedfile\";filename=\"" + fileName + "\"" + lineEnd);

            int bytesAvailable = fileInputStream.available();
            int maxBufferSize = 1024;
            int bufferSize = Math.min(bytesAvailable, maxBufferSize);

            byte[] buffer = new byte[bufferSize];

            int bytesRead = fileInputStream.read(buffer,0, bufferSize);
            Log.d(TAG,"LvB");
            while(bytesRead > 0)
            {
                dos.write(buffer, 0, bufferSize);
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }

            dos.writeBytes(lineEnd);
            dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

            fileInputStream.close();
            dos.flush();

            InputStream is = conn.getInputStream();
            int ch;
            Log.d(TAG,"LvC");
            StringBuffer buff = new StringBuffer();
            while((ch=is.read()) != -1)
            {
                buff.append((char)ch);
            }
            publishProgress(buff.toString());
            dos.close();
            Log.d(TAG,"lv2");
        }

        catch(Exception e)
        {
            publishProgress(e.toString());
        }
    }

    @Override
    protected Object doInBackground(Object... arg0) 
    {
        Log.d(TAG,"lv1a");
        doUpload();
        Log.d(TAG,"lv1b");
        return null;
    }

    protected void onProgressUpdate(String... progress)
    {
        this.info.setText(progress[0]);
    }

} 
```

这是主要活动

```
package com.main;

import java.io.File;
import java.io.FileOutputStream;
import java.io.FilePermission;
import java.io.OutputStreamWriter;
import java.net.SocketException;

import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.TextView;

public class ReadWriteToPCActivity extends Activity 
{
    private static final String TAG = "ReadWriteToPCActivity";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        View upload = findViewById(R.id.Upload);
        final EditText path = (EditText)findViewById(R.id.Path);
        final TextView info = (TextView)findViewById(R.id.Info);
        Log.d(TAG,"Start");

        File fn = new File(Environment.getExternalStorageDirectory()+"/new.xml");

        upload.setOnClickListener
        (
                new OnClickListener()
                {
                    public void onClick(View v)
                    {
                        try
                        {
                            Log.d(TAG,"Step1");
                            WriteFile();
                            Uploader uploader = new Uploader();
                            //uploader.setUrlAndFile("http://192.168.0.123/receiver.aspx", path.getText().toString(), info);
                            uploader.setUrlAndFile("http://192.168.0.123/personalfinance/receiver.aspx", Environment.getExternalStorageDirectory()+"/samplefile.txt", info);
                            //uploader.setUrlAndFile("http://10.0.2.2/personalfinance/receiver.aspx", Environment.getExternalStorageDirectory()+"/new.xml", info);
                            //uploader.setUrlAndFile("http://192.168.0.123/personalfinance/ReceiveUpload.aspx", Environment.getExternalStorageDirectory()+"/new.xml", info);
                            Log.d(TAG,"Upload." + Environment.getExternalStorageDirectory()+"/samplefile.txt;" + info.getText().toString());
                            uploader.execute();
                        }
                        catch(Exception e)
                        {
                            path.setText(e.toString());
                            Log.d(TAG,e.toString());
                        }
                    }

                    private void WriteFile() 
                    {
                        try
                        {
                            Log.d(TAG,"Step 1 write file");
                            File newfile = new File(Environment.getExternalStorageDirectory() + "/samplefile.txt");
                            Log.d(TAG,"Step 2 write file");
                            if(!newfile.exists() && !newfile.createNewFile())
                            {
                                Log.d(TAG,"File exists");
                            }
                            Log.d(TAG,"cp3");
                            newfile.createNewFile();
                            Log.d(TAG,"Step 3 write file");
                            FileOutputStream fos = null;
                            Log.d(TAG,"Step 4 write file");
                            fos = new FileOutputStream(newfile);
                            Log.d(TAG,"Step 5 write file");
                            OutputStreamWriter osw = new OutputStreamWriter(fos);
                            osw.write("Hello Android");
                            osw.flush();
                            osw.close();
                            FilePermission fp;
                            fp = new FilePermission(Environment.getExternalStorageDirectory()+"/samplefile.txt","read");
                            Log.d(TAG,"File created");
                        }
                        catch(Exception e)
                        {
                            Log.d(TAG,e.toString());
                        }

                    }
                }
        );

    }
} 
```

最后，这是我的接收文件

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace PersonalFinance
{

    public partial class receiver : System.Web.UI.Page
    {

        protected void Page_Load(object sender, EventArgs e)
        {
            HttpFileCollection uploadFiles = Request.Files;

            HttpPostedFile postedFile = uploadFiles[0];

            System.IO.Stream inStream = postedFile.InputStream;
            byte[] fileData = new byte[postedFile.ContentLength];
            inStream.Read(fileData, 0, postedFile.ContentLength);

            postedFile.SaveAs(Server.MapPath("Data") + "\\" + postedFile.FileName);

        }
    }
} 
```

# php - 有没有办法在 PHP 中获取可用语言环境的列表？

> ID：10073425
> 
> 赞同：22
> 
> 时间：2012-04-09T12:48:00.823
> 
> 标签：php, internationalization, locale

在 Java 中，您可以调用`Locale.getAvailableLocales()`以获取可用语言环境的列表。

[我期待 PHP Locale](http://php.net/manual/en/class.locale.php)类的等价物，但找不到。

有没有办法获得所有有效语言环境的数组？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2017-08-23T00:29:58.537

这里的部分困惑是 PHP 有两个称为“语言环境”的概念，它们几乎完全分开。

第一个是较旧的，它基本上只使用 C 语言环境功能。`setlocale`这就是PHP 的一些函数（`money_format`例如）的背后和语言环境支持。这就是提到`locale -a`在命令行上运行和使用的其他答案`setlocale`正在谈论的内容。

PHP 的`Locale`类和[扩展中的](http://php.net/manual/en/book.intl.php)[其他相关功能`intl`](http://php.net/manual/en/book.intl.php)较新，并且工作方式不同。它没有使用 libc 语言环境的东西，而是使用一个名为 ICU 的库，该库提供自己的语言环境数据。PHP*确实*提供了一种方法来确定*该*系统支持哪些语言环境：[ResourceBundle::getLocales](http://php.net/manual/en/resourcebundle.locales.php)。这里的文档有点冗长，但您可以将其作为静态方法调用并传递空白字符串以使用 ICU 的默认资源，从而获得支持的语言环境列表`intl`：

```
ResourceBundle::getLocales(''); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-09T12:57:08.743

我认为没有内置功能。您需要询问操作系统安装了哪些语言环境。

例如，如果您在 unix 系统上运行，则需要执行以下命令：

```
$ locale -a 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-28T19:51:10.403

我现在也解决了这个问题。这就是发生的事情。

```
<?php
return array(
    'aa_DJ' => 'Afar (Djibouti)',
    'aa_ER' => 'Afar (Eritrea)',
    'aa_ET' => 'Afar (Ethiopia)',
    'af_ZA' => 'Afrikaans (South Africa)',
    'sq_AL' => 'Albanian (Albania)',
    'sq_MK' => 'Albanian (Macedonia)',
    'am_ET' => 'Amharic (Ethiopia)',
    'ar_DZ' => 'Arabic (Algeria)',
    'ar_BH' => 'Arabic (Bahrain)',
    'ar_EG' => 'Arabic (Egypt)',
    'ar_IN' => 'Arabic (India)',
    'ar_IQ' => 'Arabic (Iraq)',
    'ar_JO' => 'Arabic (Jordan)',
    'ar_KW' => 'Arabic (Kuwait)',
    'ar_LB' => 'Arabic (Lebanon)',
    'ar_LY' => 'Arabic (Libya)',
    'ar_MA' => 'Arabic (Morocco)',
    'ar_OM' => 'Arabic (Oman)',
    'ar_QA' => 'Arabic (Qatar)',
    'ar_SA' => 'Arabic (Saudi Arabia)',
    'ar_SD' => 'Arabic (Sudan)',
    'ar_SY' => 'Arabic (Syria)',
    'ar_TN' => 'Arabic (Tunisia)',
    'ar_AE' => 'Arabic (United Arab Emirates)',
    'ar_YE' => 'Arabic (Yemen)',
    'an_ES' => 'Aragonese (Spain)',
    'hy_AM' => 'Armenian (Armenia)',
    'as_IN' => 'Assamese (India)',
    'ast_ES' => 'Asturian (Spain)',
    'az_AZ' => 'Azerbaijani (Azerbaijan)',
    'az_TR' => 'Azerbaijani (Turkey)',
    'eu_FR' => 'Basque (France)',
    'eu_ES' => 'Basque (Spain)',
    'be_BY' => 'Belarusian (Belarus)',
    'bem_ZM' => 'Bemba (Zambia)',
    'bn_BD' => 'Bengali (Bangladesh)',
    'bn_IN' => 'Bengali (India)',
    'ber_DZ' => 'Berber (Algeria)',
    'ber_MA' => 'Berber (Morocco)',
    'byn_ER' => 'Blin (Eritrea)',
    'bs_BA' => 'Bosnian (Bosnia and Herzegovina)',
    'br_FR' => 'Breton (France)',
    'bg_BG' => 'Bulgarian (Bulgaria)',
    'my_MM' => 'Burmese (Myanmar [Burma])',
    'ca_AD' => 'Catalan (Andorra)',
    'ca_FR' => 'Catalan (France)',
    'ca_IT' => 'Catalan (Italy)',
    'ca_ES' => 'Catalan (Spain)',
    'zh_CN' => 'Chinese (China)',
    'zh_HK' => 'Chinese (Hong Kong SAR China)',
    'zh_SG' => 'Chinese (Singapore)',
    'zh_TW' => 'Chinese (Taiwan)',
    'cv_RU' => 'Chuvash (Russia)',
    'kw_GB' => 'Cornish (United Kingdom)',
    'crh_UA' => 'Crimean Turkish (Ukraine)',
    'hr_HR' => 'Croatian (Croatia)',
    'cs_CZ' => 'Czech (Czech Republic)',
    'da_DK' => 'Danish (Denmark)',
    'dv_MV' => 'Divehi (Maldives)',
    'nl_AW' => 'Dutch (Aruba)',
    'nl_BE' => 'Dutch (Belgium)',
    'nl_NL' => 'Dutch (Netherlands)',
    'dz_BT' => 'Dzongkha (Bhutan)',
    'en_AG' => 'English (Antigua and Barbuda)',
    'en_AU' => 'English (Australia)',
    'en_BW' => 'English (Botswana)',
    'en_CA' => 'English (Canada)',
    'en_DK' => 'English (Denmark)',
    'en_HK' => 'English (Hong Kong SAR China)',
    'en_IN' => 'English (India)',
    'en_IE' => 'English (Ireland)',
    'en_NZ' => 'English (New Zealand)',
    'en_NG' => 'English (Nigeria)',
    'en_PH' => 'English (Philippines)',
    'en_SG' => 'English (Singapore)',
    'en_ZA' => 'English (South Africa)',
    'en_GB' => 'English (United Kingdom)',
    'en_US' => 'English (United States)',
    'en_ZM' => 'English (Zambia)',
    'en_ZW' => 'English (Zimbabwe)',
    'eo' => 'Esperanto',
    'et_EE' => 'Estonian (Estonia)',
    'fo_FO' => 'Faroese (Faroe Islands)',
    'fil_PH' => 'Filipino (Philippines)',
    'fi_FI' => 'Finnish (Finland)',
    'fr_BE' => 'French (Belgium)',
    'fr_CA' => 'French (Canada)',
    'fr_FR' => 'French (France)',
    'fr_LU' => 'French (Luxembourg)',
    'fr_CH' => 'French (Switzerland)',
    'fur_IT' => 'Friulian (Italy)',
    'ff_SN' => 'Fulah (Senegal)',
    'gl_ES' => 'Galician (Spain)',
    'lg_UG' => 'Ganda (Uganda)',
    'gez_ER' => 'Geez (Eritrea)',
    'gez_ET' => 'Geez (Ethiopia)',
    'ka_GE' => 'Georgian (Georgia)',
    'de_AT' => 'German (Austria)',
    'de_BE' => 'German (Belgium)',
    'de_DE' => 'German (Germany)',
    'de_LI' => 'German (Liechtenstein)',
    'de_LU' => 'German (Luxembourg)',
    'de_CH' => 'German (Switzerland)',
    'el_CY' => 'Greek (Cyprus)',
    'el_GR' => 'Greek (Greece)',
    'gu_IN' => 'Gujarati (India)',
    'ht_HT' => 'Haitian (Haiti)',
    'ha_NG' => 'Hausa (Nigeria)',
    'iw_IL' => 'Hebrew (Israel)',
    'he_IL' => 'Hebrew (Israel)',
    'hi_IN' => 'Hindi (India)',
    'hu_HU' => 'Hungarian (Hungary)',
    'is_IS' => 'Icelandic (Iceland)',
    'ig_NG' => 'Igbo (Nigeria)',
    'id_ID' => 'Indonesian (Indonesia)',
    'ia' => 'Interlingua',
    'iu_CA' => 'Inuktitut (Canada)',
    'ik_CA' => 'Inupiaq (Canada)',
    'ga_IE' => 'Irish (Ireland)',
    'it_IT' => 'Italian (Italy)',
    'it_CH' => 'Italian (Switzerland)',
    'ja_JP' => 'Japanese (Japan)',
    'kl_GL' => 'Kalaallisut (Greenland)',
    'kn_IN' => 'Kannada (India)',
    'ks_IN' => 'Kashmiri (India)',
    'csb_PL' => 'Kashubian (Poland)',
    'kk_KZ' => 'Kazakh (Kazakhstan)',
    'km_KH' => 'Khmer (Cambodia)',
    'rw_RW' => 'Kinyarwanda (Rwanda)',
    'ky_KG' => 'Kirghiz (Kyrgyzstan)',
    'kok_IN' => 'Konkani (India)',
    'ko_KR' => 'Korean (South Korea)',
    'ku_TR' => 'Kurdish (Turkey)',
    'lo_LA' => 'Lao (Laos)',
    'lv_LV' => 'Latvian (Latvia)',
    'li_BE' => 'Limburgish (Belgium)',
    'li_NL' => 'Limburgish (Netherlands)',
    'lt_LT' => 'Lithuanian (Lithuania)',
    'nds_DE' => 'Low German (Germany)',
    'nds_NL' => 'Low German (Netherlands)',
    'mk_MK' => 'Macedonian (Macedonia)',
    'mai_IN' => 'Maithili (India)',
    'mg_MG' => 'Malagasy (Madagascar)',
    'ms_MY' => 'Malay (Malaysia)',
    'ml_IN' => 'Malayalam (India)',
    'mt_MT' => 'Maltese (Malta)',
    'gv_GB' => 'Manx (United Kingdom)',
    'mi_NZ' => 'Maori (New Zealand)',
    'mr_IN' => 'Marathi (India)',
    'mn_MN' => 'Mongolian (Mongolia)',
    'ne_NP' => 'Nepali (Nepal)',
    'se_NO' => 'Northern Sami (Norway)',
    'nso_ZA' => 'Northern Sotho (South Africa)',
    'nb_NO' => 'Norwegian Bokmål (Norway)',
    'nn_NO' => 'Norwegian Nynorsk (Norway)',
    'oc_FR' => 'Occitan (France)',
    'or_IN' => 'Oriya (India)',
    'om_ET' => 'Oromo (Ethiopia)',
    'om_KE' => 'Oromo (Kenya)',
    'os_RU' => 'Ossetic (Russia)',
    'pap_AN' => 'Papiamento (Netherlands Antilles)',
    'ps_AF' => 'Pashto (Afghanistan)',
    'fa_IR' => 'Persian (Iran)',
    'pl_PL' => 'Polish (Poland)',
    'pt_BR' => 'Portuguese (Brazil)',
    'pt_PT' => 'Portuguese (Portugal)',
    'pa_IN' => 'Punjabi (India)',
    'pa_PK' => 'Punjabi (Pakistan)',
    'ro_RO' => 'Romanian (Romania)',
    'ru_RU' => 'Russian (Russia)',
    'ru_UA' => 'Russian (Ukraine)',
    'sa_IN' => 'Sanskrit (India)',
    'sc_IT' => 'Sardinian (Italy)',
    'gd_GB' => 'Scottish Gaelic (United Kingdom)',
    'sr_ME' => 'Serbian (Montenegro)',
    'sr_RS' => 'Serbian (Serbia)',
    'sid_ET' => 'Sidamo (Ethiopia)',
    'sd_IN' => 'Sindhi (India)',
    'si_LK' => 'Sinhala (Sri Lanka)',
    'sk_SK' => 'Slovak (Slovakia)',
    'sl_SI' => 'Slovenian (Slovenia)',
    'so_DJ' => 'Somali (Djibouti)',
    'so_ET' => 'Somali (Ethiopia)',
    'so_KE' => 'Somali (Kenya)',
    'so_SO' => 'Somali (Somalia)',
    'nr_ZA' => 'South Ndebele (South Africa)',
    'st_ZA' => 'Southern Sotho (South Africa)',
    'es_AR' => 'Spanish (Argentina)',
    'es_BO' => 'Spanish (Bolivia)',
    'es_CL' => 'Spanish (Chile)',
    'es_CO' => 'Spanish (Colombia)',
    'es_CR' => 'Spanish (Costa Rica)',
    'es_DO' => 'Spanish (Dominican Republic)',
    'es_EC' => 'Spanish (Ecuador)',
    'es_SV' => 'Spanish (El Salvador)',
    'es_GT' => 'Spanish (Guatemala)',
    'es_HN' => 'Spanish (Honduras)',
    'es_MX' => 'Spanish (Mexico)',
    'es_NI' => 'Spanish (Nicaragua)',
    'es_PA' => 'Spanish (Panama)',
    'es_PY' => 'Spanish (Paraguay)',
    'es_PE' => 'Spanish (Peru)',
    'es_ES' => 'Spanish (Spain)',
    'es_US' => 'Spanish (United States)',
    'es_UY' => 'Spanish (Uruguay)',
    'es_VE' => 'Spanish (Venezuela)',
    'sw_KE' => 'Swahili (Kenya)',
    'sw_TZ' => 'Swahili (Tanzania)',
    'ss_ZA' => 'Swati (South Africa)',
    'sv_FI' => 'Swedish (Finland)',
    'sv_SE' => 'Swedish (Sweden)',
    'tl_PH' => 'Tagalog (Philippines)',
    'tg_TJ' => 'Tajik (Tajikistan)',
    'ta_IN' => 'Tamil (India)',
    'tt_RU' => 'Tatar (Russia)',
    'te_IN' => 'Telugu (India)',
    'th_TH' => 'Thai (Thailand)',
    'bo_CN' => 'Tibetan (China)',
    'bo_IN' => 'Tibetan (India)',
    'tig_ER' => 'Tigre (Eritrea)',
    'ti_ER' => 'Tigrinya (Eritrea)',
    'ti_ET' => 'Tigrinya (Ethiopia)',
    'ts_ZA' => 'Tsonga (South Africa)',
    'tn_ZA' => 'Tswana (South Africa)',
    'tr_CY' => 'Turkish (Cyprus)',
    'tr_TR' => 'Turkish (Turkey)',
    'tk_TM' => 'Turkmen (Turkmenistan)',
    'ug_CN' => 'Uighur (China)',
    'uk_UA' => 'Ukrainian (Ukraine)',
    'hsb_DE' => 'Upper Sorbian (Germany)',
    'ur_PK' => 'Urdu (Pakistan)',
    'uz_UZ' => 'Uzbek (Uzbekistan)',
    've_ZA' => 'Venda (South Africa)',
    'vi_VN' => 'Vietnamese (Vietnam)',
    'wa_BE' => 'Walloon (Belgium)',
    'cy_GB' => 'Welsh (United Kingdom)',
    'fy_DE' => 'Western Frisian (Germany)',
    'fy_NL' => 'Western Frisian (Netherlands)',
    'wo_SN' => 'Wolof (Senegal)',
    'xh_ZA' => 'Xhosa (South Africa)',
    'yi_US' => 'Yiddish (United States)',
    'yo_NG' => 'Yoruba (Nigeria)',
    'zu_ZA' => 'Zulu (South Africa)'
); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-25T07:00:12.153

在 Windows 上，您可以尝试`setlocale()`使用以下列表中的所有项目调用 php 函数：http:
[//msdn.microsoft.com/en-us/goglobal/bb895996.aspx](http://msdn.microsoft.com/en-us/goglobal/bb895996.aspx)

这是一个代码片段，用于列出基于 Windows 的主机上的所有可用语言环境：

```
<?php
header( 'Content-Type: text/html; charset=utf-8' );
// source of the list:
// http://msdn.microsoft.com/en-us/library/39cwe7zf(v=vs.90).aspx
$langs = array(
    // language, sublanguage, codes
    array( 'Chinese', 'Chinese', array( 'chinese' ) ),
    array( 'Chinese', 'Chinese (simplified)', array( 'chinese-simplified', 'chs' ) ),
    array( 'Chinese', 'Chinese (traditional)', array( 'chinese-traditional', 'cht' ) ),
    array( 'Czech', 'Czech', array( 'csy', 'czech' ) ),
    array( 'Danish', 'Danish', array( 'dan', 'danish' ) ),
    array( 'Dutch', 'Dutch (default)', array( 'dutch', 'nld' ) ),
    array( 'Dutch', 'Dutch (Belgium)', array( 'belgian', 'dutch-belgian', 'nlb' ) ),
    array( 'English', 'English (default)', array( 'english' ) ),
    array( 'English', 'English (Australia)', array( 'australian', 'ena', 'english-aus' ) ),
    array( 'English', 'English (Canada)', array( 'canadian', 'enc', 'english-can' ) ),
    array( 'English', 'English (New Zealand)', array( 'english-nz', 'enz' ) ),
    array( 'English', 'English (United Kingdom)', array( 'eng', 'english-uk', 'uk' ) ),
    array( 'English', 'English (United States)', array( 'american', 'american english', 'american-english', 'english-american', 'english-us', 'english-usa', 'enu', 'us', 'usa' ) ),
    array( 'Finnish', 'Finnish', array( 'fin', 'finnish' ) ),
    array( 'French', 'French (default)', array( 'fra', 'french' ) ),
    array( 'French', 'French (Belgium)', array( 'frb', 'french-belgian' ) ),
    array( 'French', 'French (Canada)', array( 'frc', 'french-canadian' ) ),
    array( 'French', 'French (Switzerland)', array( 'french-swiss', 'frs' ) ),
    array( 'German', 'German (default)', array( 'deu', 'german' ) ),
    array( 'German', 'German (Austria)', array( 'dea', 'german-austrian' ) ),
    array( 'German', 'German (Switzerland)', array( 'des', 'german-swiss', 'swiss' ) ),
    array( 'Greek', 'Greek', array( 'ell', 'greek' ) ),
    array( 'Hungarian', 'Hungarian', array( 'hun', 'hungarian' ) ),
    array( 'Icelandic', 'Icelandic', array( 'icelandic', 'isl' ) ),
    array( 'Italian', 'Italian (default)', array( 'ita', 'italian' ) ),
    array( 'Italian', 'Italian (Switzerland)', array( 'italian-swiss', 'its' ) ),
    array( 'Japanese', 'Japanese', array( 'japanese', 'jpn' ) ),
    array( 'Korean', 'Korean', array( 'kor', 'korean' ) ),
    array( 'Norwegian', 'Norwegian (default)', array( 'norwegian' ) ),
    array( 'Norwegian', 'Norwegian (Bokmal)', array( 'nor', 'norwegian-bokmal' ) ),
    array( 'Norwegian', 'Norwegian (Nynorsk)', array( 'non', 'norwegian-nynorsk' ) ),
    array( 'Polish', 'Polish', array( 'plk', 'polish' ) ),
    array( 'Portuguese', 'Portuguese (default)', array( 'portuguese', 'ptg' ) ),
    array( 'Portuguese', 'Portuguese (Brazil)', array( 'portuguese-brazilian', 'ptb' ) ),
    array( 'Russian', 'Russian (default)', array( 'rus', 'russian' ) ),
    array( 'Slovak', 'Slovak', array( 'sky', 'slovak' ) ),
    array( 'Spanish', 'Spanish (default)', array( 'esp', 'spanish' ) ),
    array( 'Spanish', 'Spanish (Mexico)', array( 'esm', 'spanish-mexican' ) ),
    array( 'Spanish', 'Spanish (Modern)', array( 'esn', 'spanish-modern' ) ),
    array( 'Swedish', 'Swedish', array( 'sve', 'swedish' ) ),
    array( 'Turkish', 'Turkish', array( 'trk', 'turkish' ) )
);
echo '<table>'."\n";
echo '<tr>'."\n";
echo '  <th>Languange</th>'."\n";
echo '  <th>Sub-Languange</th>'."\n";
echo '  <th>Languange String</th>'."\n";
echo '</tr>'."\n";
foreach ( $langs as $lang ) {
    echo '<tr>'."\n";
    echo '  <td>'.$lang[0].'</td>'."\n";
    echo '  <td>'.$lang[1].'</td>'."\n";
    $a = array();
    foreach ( $lang[2] as $lang_code ) {
        $loc = setlocale( LC_ALL, $lang_code );
        $a []= $lang_code.' '.( false === $loc ? '✖' : '✔ - '.$loc );
    }
    echo '  <td>'.implode( '<br>', $a ).'</td>'."\n";
    echo '</tr>'."\n";
}
echo '</table>'."\n";
// Note: Norvegian (Bokmal) is Norvegian (Bokmål), see: http://en.wikipedia.org/wiki/Bokmål
?> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-19T08:59:34.063

您通常只需要与 UTF-8 兼容的语言环境即可在 html 中使用它

因此，ResourceBundle 是无用的，但您仍然可以这样调用它

```
\ResourceBundle::getLocales('') 
```

确定它是多么无用。

因此，您需要获取 Ubuntu 支持的列表（因为 Ubuntu 是您所需要的）

```
 $string           = shell_exec("locale -a|grep .utf8");
    $array            = explode('.utf8' . "\n", $string); 
```

无论您在 ubuntu 上安装什么，您都会得到类似`en_US`, `ru_RU`, - 的东西。`zh_CN`现在拿一个并像这样使用它

```
$locale  = $array[0].'.UTF-8';
setlocale(LC_MONETARY, $locale); 
```

但你可以`locales`在你的 Ubuntu 上安装更多

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-08-06T03:27:07.180

这可能与 OP 略有偏差，但我觉得这是一个足够常见的用例，可以在这里提及。如果您想要[ICU 定义的](http://userguide.icu-project.org/locale#TOC-Language-code)*语言代码*列表而不是*语言环境*列表怎么办？

 *# 所有语言列表

基于的解决方案`ResourceBundle::getLocales('');`将为您提供*locales*。然后您需要将它们映射到*语言代码*。但即使在那之后，语言列表**也不完整**。

这是与如何正确执行此操作的比较：

```
<?php

function getListFromLocales(): array
{
    return array_filter(ResourceBundle::getLocales(''), function ($value) {
        return strpos($value, '_') === false;
    });
}

function getListFromLanguages(): array
{
    $resourceBundle = new ResourceBundle('en', 'ICUDATA-lang', false);
    $languagesBundle = $resourceBundle['Languages'];

    $languages = [];
    foreach ($languagesBundle as $languageCode => $languageName) {
        $languages[] = $languageCode;
    }

    return $languages;
}

function languageForEndUser($language): string
{
    return Locale::getDisplayLanguage($language, $language) . ' (' . Locale::getDisplayLanguage($language) . ')';
}

$list1 = getListFromLocales();
$list2 = getListFromLanguages();

echo 'languages in list1: ' . count($list1) . PHP_EOL;
echo 'languages in list2: ' . count($list2) . PHP_EOL;
echo 'languages that exists in list1, but not in list2: ' . count(array_diff($list1, $list2)) . PHP_EOL;
echo 'languages that exists in list2, but not in list1: ' . count(array_diff($list2, $list1)) . PHP_EOL;

Locale::setDefault('fr'); // Assume end-user speaks french

echo 'examples of language for end-user: ' . PHP_EOL;
echo '    - ' . languageForEndUser('en') . PHP_EOL;
echo '    - ' . languageForEndUser('fr') . PHP_EOL;
echo '    - ' . languageForEndUser('ko') . PHP_EOL; 
```

这将输出类似于：

```
languages in list1: 204
languages in list2: 620
languages that exists in list1, but not in list2: 0
languages that exists in list2, but not in list1: 416
examples of language for end-user: 
    - English (anglais)
    - français (français)
    - 한국어 (coréen) 
```

我们可以看到正确的方法可以产生大约 400 种（！）更多的语言。

您可以在[https://3v4l.org/TS292上查看正在运行的代码](https://3v4l.org/TS292)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-30T08:48:14.313

`system("locale -a|grep XX");`语言代码在哪里，`XX`即。`system("locale -a|grep de");`*

# android - 是否可以在 Android 应用程序中使用 extendAccessTokenIfNeeded 扩展 Facebook 令牌？

> ID：10073426
> 
> 赞同：13
> 
> 时间：2012-04-09T12:48:03.880
> 
> 标签：android, facebook, facebook-android-sdk, facebook-access-token

我认为这可能会影响到很多 Facebook/Android 开发人员，但似乎并没有太多关于这个话题的讨论......

**我的问题**

***有没有人使用 extendAccessTokenIfNeeded 函数成功刷新了令牌？如果您确实成功了，那么设备（或模拟器）运行的是什么版本？***

**背景**

我收到一封来自 Facebook 的电子邮件，说从 2012 年 5 月 1 日起将弃用 offline_access 权限，并且 Facebook 建议升级到他们最新的 SDK。美好的。

我升级到最新的 SDK，官方的 Facebook 应用程序安装在我的设备上，并且（最终！）单点登录似乎工作正常。我收到了 60 天的代币，这又没问题。

当我尝试使用 extendAccessTokenIfNeeded(Context context, ServiceListener serviceListener) 时出现问题。我无法让它在更长的到期时间内刷新我的令牌。我在两次尝试之间等待了 24 小时，但令牌不会刷新。我可以获得刷新令牌的唯一方法是注销并登录。这也发生在我使用示例项目“Hackbook”时。

最明显的答案是我做错了什么，但是，向 Facebook 提交了一份[错误报告](http://developers.facebook.com/bugs/329021273822477/?browse=search_4f72ff9a4923b1722706530)说......“应该ExtendAccessToken 实际上几乎总是返回错误。” 该报告已被列为优先“愿望清单”。

**extendAccessTokenAsNeeded() 的替代方案**

在[Facebook 文档中，关于 offline_access 弃用](http://developers.facebook.com/roadmap/offline-access-removal/)令牌可以使用 Graph API 进行扩展。但是，这样做的[缺点是需要](https://stackoverflow.com/questions/9549689/protecting-app-secret-for-extendaccesstoken-usage-java-android)在 URL 中包含“App Secret”。一个优点是用户不需要在他们的设备上安装官方的 Facebook 应用程序。

**其他想法和顾虑**

*   通过将 Facebook.java 中的 extendAccessTokenIfNeeded 函数更改为始终返回 true，我想我让它刷新一次。（我说“认为”的原因是因为它不会重复这种行为，我怀疑我必须再等 24 小时才能再次成功）

*   我注意到 Hackbook 需要导入[AndroidHttpClient](http://developer.android.com/reference/android/net/http/AndroidHttpClient.html)。这仅适用于 API 8 及更高版本。这是否意味着 Facebook SSO（特别是令牌刷新）只能在 API 8 及更高版本的设备上运行？

*   [SDK 中包含](https://github.com/facebook/facebook-android-sdk/)的Facebook.apk相当陈旧。也许这就是为什么令牌在运行 API 8 及更高版本的模拟器上不刷新的原因？

*   最后，所有这些都只与那些安装了官方 Facebook 应用程序的人有关！对于那些没有官方 Facebook 应用程序的人，需要完成另一种方法（现在只是抱怨！）

**相关 Facebook 链接**

[GitHub 上的 Facebook-Android-SDK](https://github.com/facebook/facebook-android-sdk/)

[Facebook 安卓教程](http://developers.facebook.com/docs/mobile/android/build/)

[Facebook offline_access 权限弃用](http://developers.facebook.com/roadmap/offline-access-removal/)

[脸书错误报告](http://developers.facebook.com/bugs/329021273822477/?browse=search_4f72ff9a4923b1722706530)

**相关堆栈溢出问题**

[Facebook 60 天访问令牌和已弃用的 Offline_Access](https://stackoverflow.com/questions/9329564/facebook-60-day-access-token-and-deprecated-offline-access)

[Facebook 访问令牌无法扩展](https://stackoverflow.com/questions/9190276/facebook-access-token-can-not-be-extended)

[在 5 月 1 日后弃用后，offline_access 将如何工作？](https://stackoverflow.com/questions/9930311/how-would-offline-access-work-after-deprecation-after-may-1st)

[Facebook 访问令牌无法扩展](https://stackoverflow.com/questions/9190276/facebook-access-token-can-not-be-extended)

[保护用于 extendAccessToken 使用的应用程序机密 (Java/Android)](https://stackoverflow.com/questions/9549689/protecting-app-secret-for-extendaccesstoken-usage-java-android)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T22:52:22.060

我不了解 Android 开发，但如果您对该功能有疑问，也许 Android 中有一个类似的 CURL 功能可以让您调用 `https://graph.facebook.com/oauth/access_token?
client_id=APP_ID& client_secret=APP_SECRET& grant_type=fb_exchange_token& fb_exchange_token=EXISTING_ACCESS_TOKEN`

（谷歌透露：[http](http://thesoftwarerogue.blogspot.com/2010/05/porting-of-libcurl-to-android-os-using.html) ://thesoftwarerogue.blogspot.com/2010/05/porting-of-libcurl-to-android-os-using.html关于如何从 Android 卷曲）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:24:08.610

尝试更改 的时间`REFRESH_TOKEN_BARRIER`，这样您就不必每次要测试时都等待 24 小时。我将我的更改为大约 2 分钟，当我在 2 分钟后重新启动应用程序时，我能够看到访问令牌实际上正在扩展。

# macos - 在Applescript中获取部分字符串

> ID：10073428
> 
> 赞同：0
> 
> 时间：2012-04-09T12:48:10.067
> 
> 标签：macos, applescript

我尝试制作一个读取文件夹中文件并且只占用文件名的一部分的applescript。这些文件看起来像这样：the.name.of.a.tv.show.s01e01

我可以搜索 s01，但我必须为每个可能到来的季节制定规则。

有没有办法查找 s--e-- 然后在此之前获取文件名的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:02:08.043

尝试：

```
set xxx to "the.name.of.a.tv.show.s01e01 etc etc"
set yyy to (do shell script "echo " & xxx & " | sed 's/.s[0-9][0-9]e[0-9][0-9].*//'")
return yyy 
```

结合您之前的问题：

```
set seasonList to {}
repeat with aShow in listOfShows
set aShow to aShow as string
set end of seasonList to (do shell script "echo " & aShow & " | sed 's/.s[0-9][0-9]e[0-9][0-9].*//'")
end repeat
return seasonList 
```

# android - 如何在中国平板电脑上测试 Android 应用程序？

> ID：10073431
> 
> 赞同：1
> 
> 时间：2012-04-09T12:48:38.110
> 
> 标签：android, apk

很抱歉便宜但我有一个中文 Android 4.0.3 标签。除了将 apk 文件复制到设备并安装它之外，我不知道如何在此设备上测试我的应用程序，这是一个非常漫长的过程。有什么方法可以像其他品牌设备一样使用 apk 直接运行应用程序。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:24:57.257

使用 adb 工具，您可以将应用程序直接安装到您的 android 设备上，

```
adb install <aaa>.apk 
```

但是要执行此过程，您需要在您的环境中配置 adb 工具并检查您的设备制造商支持，配置 adb [http://esausilva.com/2010/05/13/setting-up-adbusb-drivers-for-android-devices -在-linux-ubuntu/](http://esausilva.com/2010/05/13/setting-up-adbusb-drivers-for-android-devices-in-linux-ubuntu/)

检查上面 url 中的 USB 供应商 ID 以检查您的 android 制造商对此的支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:53:13.753

只要它具有 USB 驱动程序支持，您就可以直接调试到设备，但是如果失败了，我不明白为什么当您希望测试构建到“测试 APK”文件夹然后使用 .bat 执行冗长的步骤时您不能这样做为您复制到设备。

# windows-phone-7 - 同时播放两个视频

> ID：10073433
> 
> 赞同：4
> 
> 时间：2012-04-09T12:48:43.727
> 
> 标签：windows-phone-7, mediaelement

我需要在我的应用程序中同时循环播放两个视频（每个视频长度为 15 秒）。有时我需要更改一个视频的不透明度（在 DoubleAnimation 中），让它出现在另一个视频的上方。播放两个视频需要用于同步目的。

我尝试使用 MediaElements 播放视频，但我无法让它们同时播放视频。我认为这是不可能的。我对吗？

我还尝试将我的视频分成 450 帧（每秒 30 帧）并使用 ObjectAnimationUsingKeyFrames，（例如：[http](http://compiledexperience.com/windows-phone/tutorials/candle) ://compiledexperience.com/windows-phone/tutorials/candle ），但这种方式使用了太多内存（已用内存大约 250 MB，但最大使用量必须为 90 MB）。

最后我尝试使用 DispatcherTimer 并在它的 Tick 程序中更改两个图像的源属性，但它的工作速度很慢。

请帮助我，有没有什么方法可以做到这一点没有滞后？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:20:14.870

另一种选择是尝试使用**CompositionTarget.Rendering** ，如下所述：http: [//msdn.microsoft.com/en-us/library/ms748838.aspx](http://msdn.microsoft.com/en-us/library/ms748838.aspx)

您可能会遇到的问题是调用之间的时间无法保证，因此您可能会使帧运行得更快或更慢。

然而，Charles Petzold 有一篇文章展示了如何确定经过的时间，这种方式允许您在 Rendering 事件发生时选择正确的帧来显示。示例代码应该会有所帮助： http: [//www.charlespetzold.com/blog/2010/06/CompositionTarget-Rendering-and-RenderEventArgs.html](http://www.charlespetzold.com/blog/2010/06/CompositionTarget-Rendering-and-RenderEventArgs.html)

# ajax - 在动态创建的元素上使用 jQuery 时查找 $(this)

> ID：10073434
> 
> 赞同：1
> 
> 时间：2012-04-09T12:48:49.807
> 
> 标签：ajax, jquery

假设我有一个`li`通过 AJAX 动态创建的列表：

```
​&lt;ul id="demo-list"> 
    <li data-test="test1" >Test 1</li>
    <li data-test="test2" >Test 2</li>
    <li data-test="test3" >Test 3</li>
</ul>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

单击其中一个时`li`，我想获取该特定的数据属性测试`li`。

我尝试了类似的东西：

```
$('#demo-list').on('click', 'li', function() {
    console.log($(this).find('li').data('test'));
}); 
```

但它显然会获取所有列表项，而不仅仅是事件发生的特定项。

另外，我知道如何使用`.live()`，但我的问题是如何通过`.on()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T12:50:33.290

您必须在`$(this)`通话后删除查找：

```
$('#demo-list').on('click', 'li', function() {
console.log($(this).data('test'));
}) 
```

您可以在下面找到工作示例：

> [http://jsfiddle.net/P356B/2/](http://jsfiddle.net/P356B/2/)

编辑：

如果您有一个生成该内容的小部件/插件，也许您可​​以在插件中附加点击事件处理程序。或具有以下构造：

```
(function($){
  $(function(){
   $('#demo-list').on('click', 'li', function() {
   console.log($(this).data('test'));
   })
  });
})(jQuery) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:49:44.230

我不认为你想要`find`。做就是了

```
console.log($(this).data('test')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T12:55:27.823

尝试这样做：

```
 console.log($(this).data('test')); 
```

在这里检查：http: [//jsfiddle.net/wDzkW/4/](http://jsfiddle.net/wDzkW/4/)

# c# - 有可写的 VirtualPathProvider 这样的东西吗？

> ID：10073436
> 
> 赞同：1
> 
> 时间：2012-04-09T12:48:56.130
> 
> 标签：c#, virtualpathprovider

我正在考虑使用 VirtualPathProviders 来抽象出对文件系统上文件的访问，以便可以轻松地将其换出以与其他服务（例如 Amazon S3）一起使用。

虽然这对于读取文件非常有效，但我想知道是否有类似的东西也支持写入？还是我必须自己创建类似 WritableVirtualPathProvider 的东西？

非常感谢

马特

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-17T09:04:51.703

你可以试试 Dokan [http://dokan-dev.net/en/](http://dokan-dev.net/en/)

# asp.net-mvc-3 - 多个 ASP MVC 3 应用程序中的单点登录

> ID：10073437
> 
> 赞同：3
> 
> 时间：2012-04-09T12:49:00.883
> 
> 标签：asp.net-mvc-3, authentication, single-sign-on

我有一个有两个应用程序的解决方案。是否可以让用户只登录一次？

例如，在主应用程序中，我像这样进行身份验证：

```
FormsAuthentication.SetAuthCookie(ContactFound.ContaLogin, model.RememberMe); 
```

我把这段代码放在`web.config`文件中：

```
<authentication mode="Forms">
  <forms 
    loginUrl="~/Account/LogIn" 
    defaultUrl="~/Account/LogOn" 
    timeout="15"
  />      
</authentication> 
```

我应该添加什么，以便当用户登录时，在主应用程序中，当他连接到第二个应用程序时，我们不会要求他再次登录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T12:59:32.880

由于您将在同一地址托管两个应用程序，因此通过将`<machineKey>`(web.config) 设置为两个应用程序的相同值应该很容易。之后，您应该在登录到另一个应用程序后自动登录到另一个应用程序。

进一步阅读：

*   [跨域 ASP.NET 应用程序的单点登录 (SSO)](http://www.codeproject.com/Articles/106439/Single-Sign-On-SSO-for-cross-domain-ASP-NET-applic)（请参阅身份验证如何在同一域下的多个 ASP.NET 站点中工作）
*   [machineKey 元素（ASP.NET 设置架构）](http://msdn.microsoft.com/library/w8h3skw9.aspx)
*   [使用表单身份验证单点登录](https://stackoverflow.com/q/2453677/11963)

# jsp - JSF 2 (MyFaces 2.0.12)：防止登录页面被缓存问题

> ID：10073438
> 
> 赞同：0
> 
> 时间：2012-04-09T12:49:22.687
> 
> 标签：jsp, jsf, myfaces

为了防止我的应用程序上的登录屏幕被浏览器缓存，我使用了以下代码和平：

```
public class SessionHandler implements Filter {

public void init(FilterConfig filterConfig) throws ServletException {
}

public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException, ServletException {
    if ((request instanceof HttpServletRequest) && (response instanceof HttpServletResponse)) {
    .
    .
    .
    try {
        HttpServletRequest httpReq = (HttpServletRequest) request;
        HttpServletResponse httpRes = (HttpServletResponse) response;

        //ignore images/css...etc
        if(!httpReq.getRequestURI().startsWith(httpReq.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER)){
            //if login screen or home - don't cache 
            if(httpReq.getRequestURI().equalsIgnoreCase("/jsp/auth_login.faces")
                    || httpReq.getRequestURI().equalsIgnoreCase("/jsp/def_home.faces") ) {

                System.out.println(httpReq.getRequestURI() + " ----- " + " WON'T BE CACHED");

                httpRes.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
                httpRes.setHeader("Pragma", "no-cache"); // HTTP 1.0.
                httpRes.setDateHeader("Expires", 0); // Proxies.                    
            }
        }           
        filterChain.doFilter(request, response);
    ... 
```

使用我在此处回答的问题之一中找到的代码`BalusC`来防止缓存。我的问题是该页面似乎仍在被浏览器缓存。使用 Chrome 开发人员工具查看页面的 HTML 标题，我在初始页面加载时看到以下内容：

![在此处输入图像描述](../Images/456e8b4f20a4b86b081d4cabe9e21db7.png)

如果成功登录后返回登录页面，我会看到：

![在此处输入图像描述](../Images/be35787be2cc157070090594c8ab3db4.png)

有谁能告诉我为什么登录页面被缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T02:20:54.770

问题是由于请求 URI 的隐式查找引起的，在这种情况下，如果应用程序未部署在根路径下，则未使用逻辑。

```
 if(!httpReq.getRequestURI().startsWith(httpReq.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER)){
        //if login screen or home - don't cache 
        if(httpReq.getRequestURI().equalsIgnoreCase("/jsp/auth_login.faces")
                || httpReq.getRequestURI().equalsIgnoreCase("/jsp/def_home.faces") ) 
```

改为：

```
 if(!httpReq.getRequestURI().startsWith(httpReq.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER)){
        //if login screen or home - don't cache 
        if(httpReq.getRequestURI().endsWith("/jsp/auth_login.faces")
                || httpReq.getRequestURI().endsWith("/jsp/def_home.faces") ) 
```

这一切都按预期工作。

# playframework - 发现集群中的 Akka actor

> ID：10073446
> 
> 赞同：43
> 
> 时间：2012-04-09T12:49:57.420
> 
> 标签：playframework, playframework-2.0, akka, akka-cluster

最近，我一直在尝试围绕 Akka 和基于 actor 的系统的概念展开思考。虽然我现在对 Akka 基础知识有了很好的理解，但在集群和远程 Actor 方面，我仍然在一些事情上苦苦挣扎。

我将尝试使用[Play Framework 2.0 附带的 WebSocket 聊天示例](https://github.com/playframework/Play20/tree/master/samples/java/websocket-chat)来说明这个问题：有一个角色持有 WebSocket，并保留了当前连接用户的列表。演员基本上在技术上和逻辑上都代表了聊天室。只要在单个服务器上运行一个聊天室，它就可以很好地工作。

现在我试图理解当我们谈论在服务器集群上运行的许多动态聊天室（可以随时打开/关闭新房间）时，如何扩展这个示例（添加或删除单个节点）根据当前需求）。在这种情况下，用户 A 可以连接到服务器 1，而用户 B 连接到服务器 2。两者可能在同一个聊天室中交谈。在每台服务器上，仍然会有一个参与者（对于每个聊天室？），它持有 WebSocket 实例以接收和发布事件（消息）给正确的用户。但从逻辑上讲，服务器 1 或服务器 2 上应该只有一个聊天室参与者保存当前连接的用户（或类似任务）的列表。

您将如何实现这一点，最好是在“纯 akka”中并且不添加像 ZeroMQ 或 RabbitMQ 这样的额外消息传递系统？

到目前为止，这是我想出的，请让我知道这是否有意义：

1.  用户 A 连接到服务器 1，并且分配了一个持有他的 WebSocket 的演员。
2.  参与者检查（使用路由器？EventBus？其他东西？）活动聊天室的“聊天室参与者”是否存在于任何连接的集群节点上。因为它不是，它会以某种方式请求创建一个新的聊天室参与者，并将向/从这个参与者发送和接收未来的聊天消息。
3.  用户 B 在服务器 2 上连接，并且也为他的 WebSocket 分配了一个演员。
4.  它还检查请求的聊天室的参与者是否存在于某处，并在服务器 1 上找到它。
5.  服务器 1 上的聊天室参与者现在充当给定聊天室的中心，向所有“连接”的聊天成员参与者发送消息并分发传入的参与者。

如果服务器 2 出现故障，则必须以某种方式在服务器 2 上重新创建/移动聊天室参与者，尽管这不是我现在主要关心的问题。我最想知道的是，演员的这种动态发现如何传播到各种基本独立的机器上，可以使用 Akka 的工具集来完成。

我已经查看 Akka 的文档很长一段时间了，所以也许我在这里遗漏了明显的东西。如果是这样，请赐教:-)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-02T14:37:22.783

我正在从事一个私人项目，该项目基本上是聊天室示例的一个非常扩展的版本，而且我也遇到了 akka 的启动问题和整个“去中心化”思维。所以我可以告诉你我是如何“解决”我的扩展聊天室的：

我想要一个无需太多额外配置即可轻松部署多次的服务器。我使用 redis 作为所有打开的用户会话（其 ActorRef 的简单序列化）和所有聊天室的存储。

服务器有以下参与者：

*   `WebsocketSession`：它保持与一个用户的连接并处理来自用户的请求并转发来自系统的消息。
*   `ChatroomManager`：这是中央广播器，部署在服务器的每个实例上。如果用户想向聊天室发送消息，WebSocketSession-Actor 会将所有信息发送到 ChatroomManager-Actor，然后由 ChatroomManager-Actor 将消息广播给聊天室的所有成员。

所以这是我的程序：

1.  用户 A 连接到分配新 WebsocketSession 的服务器 1。这个actor将这个actor的绝对路径插入到redis中。
2.  用户 A 加入聊天室 X，该聊天室 X 还将他的绝对路径（我将其用作用户会话的唯一 ID）插入 redis（每个聊天室都有一个“连接”集）
3.  用户 B 连接到服务器 2 -> redis
4.  用户 B 加入聊天室 X -> redis
5.  用户 B 向聊天室 X 发送消息如下：用户 B 通过 Websocket 将他的消息发送给他的会话参与者，会话参与者（经过一些检查）向 ChatroomManager 发送参与者消息。这个actor实际上从redis（与akka的`actorFor`-method一起使用的绝对路径）中检索聊天室的用户列表，然后将消息发送给每个会话actor。然后这些会话参与者写入他们的 websocket。

在每个 ChatroomManager-actor 中，我都会进行一些`ActorRef`缓存，从而提高速度。我认为这与您的方法不同，尤其是这些 ChatroomManager 处理所有聊天室的请求。但是一个聊天室只有一个演员是我想避免的单点故障。此外，这会导致更多消息，例如：

*   用户 A 和用户 B 在服务器 1 上。
*   聊天室 X 在服务器 2 上。

如果用户 A 想与用户 B 交谈，他们都必须通过服务器 1 上的聊天室参与者进行通信。

此外，我使用 akka 的功能（如（循环）路由器）在每个系统上创建 ChatroomManager-actor 的多个实例来处理许多请求。

我花了几天时间结合序列化和 redis 设置整个 akka 远程基础设施。但是现在我可以创建任意数量的服务器应用程序实例，这些实例使用 redis 来共享`ActorRef`（序列化为带有 ip+port 的绝对路径）。

这可能会进一步帮助您，并且我愿意接受新问题（请不要谈论我的英语；）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-20T08:44:16.657

跨多台机器横向扩展的关键是尽可能隔离可变状态。尽管您可以使用分布式缓存来协调所有节点的状态，但这会给您带来同步以及在扩展到大量节点时遇到的瓶颈问题。理想情况下，应该只有一个参与者知道聊天室中的消息和参与者。

您的问题的核心是，如果聊天室由在单台机器上运行的单个演员表示 - 或者确实存在这样的房间。诀窍是使用标识符（例如聊天室的名称）路由与给定聊天室相关的请求。计算名称的哈希值，并根据数字从 n 个框中选择一个。该节点将了解其当前的聊天室，并可以安全地为您找到或创建正确的聊天室参与者。

您可以查看以下讨论 Akka 中的集群和横向扩展的博客文章：

[http://blog.softmemes.com/2012/06/16/clustered-akka-building-akka-2-2-today-part-1/](http://blog.softmemes.com/2012/06/16/clustered-akka-building-akka-2-2-today-part-1/)

[http://blog.softmemes.com/2012/06/16/clustered-akka-building-akka-2-2-today-part-2/](http://blog.softmemes.com/2012/06/16/clustered-akka-building-akka-2-2-today-part-2/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-02T21:47:26.273

我会使用 Zookeeper+Norbert 来了解哪些主机正在上升和下降：

[http://www.ibm.com/developerworks/library/j-zookeeper/](http://www.ibm.com/developerworks/library/j-zookeeper/)

现在我的聊天室服务器场中的每个节点都可以知道逻辑集群中的所有主机。当节点离线（或上线）时，他们会收到回调。任何节点现在都可以保留当前集群成员的排序列表，对聊天室 ID 进行哈希处理，并按列表大小进行 mod 以获得列表中的索引，该索引应该是托管任何给定聊天室的节点。我们可以加 1 并 rehash 来选择第二个索引（需要一个循环，直到你得到一个新的索引）来计算第二个主机来保存聊天室的第二个副本以实现冗余。在两个聊天室主机中的每一个上都有一个聊天室参与者，它只是将所有聊天消息转发给每个作为聊天室成员的 Websocket 参与者。

现在我们可以使用自定义 Akka 路由器通过两个活跃的聊天室参与者发送聊天消息。客户端只发送一次消息，路由器将执行哈希模块并发送给两个远程聊天室参与者。我会使用 twitter 雪花算法为正在发送的消息生成唯一的 64 位 ID。请参阅以下链接中代码的 nextId() 方法中的算法。可以使用 norbert 属性设置 datacenterId 和 workerId 以确保在不同的服务器上不会生成冲突 ID：

[https://github.com/twitter/snowflake/blob/master/src/main/scala/com/twitter/service/snowflake/IdWorker.scala](https://github.com/twitter/snowflake/blob/master/src/main/scala/com/twitter/service/snowflake/IdWorker.scala)

现在，每条消息的两个副本将通过两个活跃的聊天室参与者中的每一个发送到每个客户端端点。在每个 Websocket 客户端参与者中，我将取消对雪花 ID 的位掩码，以了解发送消息的 datacenterId+workerId 编号，并跟踪从集群中每个主机看到的最高聊天消息编号。然后我会忽略任何不高于给定发送方主机的给定客户端已经看到的消息。这将对通过两个活动聊天室参与者传入的消息对进行重复数据删除。

到目前为止，一切都很好; 我们将拥有弹性消息传递，因为如果任何节点死亡，我们不会丢失聊天室的一个幸存副本。消息将自动通过第二个聊天室不间断地流动。

接下来，我们需要处理从集群中退出或重新添加到集群中的节点。我们将在每个节点内收到一个 norbert 回调，以通知我们有关集群成员资格的更改。在这个回调中，我们可以通过自定义路由器发送一条 akka 消息，说明新的成员列表和当前主机名。当前主机上的自定义路由器将看到该消息并更新其状态以了解新的集群成员，以计算新的节点对以发送任何给定的聊天室流量。新集群成员身份的确认将由路由器发送到所有节点，以便每个服务器都可以跟踪所有服务器何时赶上成员身份更改并现在正确发送消息。

会员变更后，幸存的聊天室可能仍处于活动状态。在这种情况下，所有节点上的所有路由器将继续正常向其发送消息，但也会推测性地向新的第二个聊天室主机发送消息。第二个聊天室可能尚未启动，但这不是问题，因为消息将通过幸存者流动。如果在成员资格更改后幸存的聊天室不再处于活动状态，则所有主机上的所有路由器将首先发送到三个主机；幸存者和两个新节点。可以使用 akka 死亡监视机制，以便所有节点最终都可以看到幸存的聊天室关闭，从而通过两个主机重新路由聊天流量。

接下来，我们需要根据情况将聊天室从幸存的服务器迁移到一两个新主机上。幸存的聊天室参与者将在某个时候收到一条消息，告诉它新的集群成员身份。它将首先向新节点发送聊天室成员的副本。此消息将在新节点上创建具有正确成员资格的聊天室参与者的新副本。如果幸存者不再是应该拥有聊天室的两个节点之一，它将进入退役模式。在退役模式下，它只会将任何消息转发到新的主节点和辅助节点，而不是任何聊天室成员。Akka 消息转发非常适合这一点。

退役聊天室将监听来自每个节点的 norbert 集群成员身份确认消息。最终它将看到集群中的所有节点都已经确认了新的集群成员。然后它知道它将不再接收任何要转发的消息。然后它可以杀死自己。Akka 热交换非常适合实现退役行为。

到目前为止，一切都很好; 我们有一个弹性消息设置，不会因为节点崩溃而丢失消息。在集群成员发生变化时，我们将获得节点内流量的激增，以将聊天室复制到新节点。我们还有一连串的节点内消息转发到节点，直到所有服务器都赶上哪些聊天室已经移动了两个哪些服务器。如果我们想扩展系统，我们可以等到用户流量的低点，然后打开一个新节点。聊天室将自动在新节点之间重新分配。

以上描述基于阅读以下论文并将其翻译成akka概念：

[https://www.dropbox.com/s/iihpq9bjcfver07/VLDB-Paper.pdf](https://www.dropbox.com/s/iihpq9bjcfver07/VLDB-Paper.pdf)

# objective-c - 将 xcode 4.2 更新到 4.3 版本

> ID：10073448
> 
> 赞同：0
> 
> 时间：2012-04-09T12:50:19.627
> 
> 标签：objective-c, xcode

在我的项目中将 Xcode 4.2 更新到 4.3 版本后，所有导航按钮都消失了。源代码没有改变。

代码：

```
UIBarButtonItem * button = [[UIBarButtonItem alloc] initWithTitle:title
                                                   style:UIBarButtonItemStyleBordered
                                                  target:target
                                                  action:action]; 
```

`title = null`它使用, but `button != nil`and `target`and `action`too创建了按钮。

```
button.title = @"ololo"; 
```

这也不起作用。

# c# - 使用 wamp 服务器的 MYSQL 在 Asp.net C# 中的网格视图

> ID：10073452
> 
> 赞同：0
> 
> 时间：2012-04-09T12:50:47.660
> 
> 标签：c#, asp.net, mysql, gridview, wamp

我想在我的 Asp.new c# 表单的网格视图中显示我的数据。我正在使用 Wamp Server 的 MySQL 数据库。我已经厌倦了将数据库与网格视图绑定。请帮忙。

我的代码：

```
 public partial class Temp : System.Web.UI.Page
{

    string conString = ConfigurationManager.ConnectionStrings["AASProject"].ConnectionString;

    protected void Page_Load(object sender, EventArgs e)
    {
        MySqlConnection con = new MySqlConnection(conString);
        con.Open();

        gvFoodDetail.RowEditing+= new GridViewEditEventHandler(gvFoodDetail_RowEditing);
        gvFoodDetail.RowDeleting += new GridViewDeleteEventHandler(gvFoodDetail_RowDeleting);
        gvFoodDetail.RowUpdating += new GridViewUpdateEventHandler(gvFoodDetail_RowUpdating);
        //gvFoodDetail_RowCancelingEdit += new GridViewCancelEditEventArgs(gv);
       // gvFoodDetail.RowEditing += new GridViewEditEventHandler(gvFoodDetail_RowEditing);
       // gvFoodDetail.RowDeleting += new GridViewDeleteEventHandler(gvFoodDetail_RowDeleting);
       // gvFoodDetail.RowUpdating += new GridViewUpdateEventHandler(gvFoodDetail_RowUpdating);
       // gvFoodDetail.RowCancelingEdit += new GridViewCancelEditEventHandler(gvFoodDetail_RowCancelingEdit);

        gvFoodDetail.PageIndexChanging += new GridViewPageEventHandler(gvFoodDetail_PageIndexChanging);

        if (!IsPostBack)
        {
            gvFoodDetail.Visible = true;
            loadFoodDB();
        }

    }
    public void loadFoodDB()
    {

        string getFoodDetails = "Select Emp_ID,intime,outtime,date From datetime";
        MySqlConnection con = new MySqlConnection(conString);
        con.Open();

        MySqlCommand cmd = new MySqlCommand(getFoodDetails, con);
        DataTable dt = new DataTable();
        MySqlDataAdapter da = new MySqlDataAdapter(cmd);
        da.Fill(dt);
        con.Close();

        gvFoodDetail.DataSource = dt;
        gvFoodDetail.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:30:09.947

```
datagridview.Datasource = datasource
datagridview.databind() 
```

这应该设置并显示数据。您必须手动或自动处理列和所有内容。

# svn - SVN 忽略与 coda 颠覆

> ID：10073456
> 
> 赞同：1
> 
> 时间：2012-04-09T12:51:17.037
> 
> 标签：svn, coda

我在我的 Mac 上使用 coda 作为编辑器，并使用内置的 svn 客户端，这确实很有帮助。

但是它缺少文件的忽略功能，我正在尝试通过命令行来完成

通过终端，我转到要从中排除文件的文件夹并运行此命令“svn propedit svn:ignore database.php”。

结果我得到了这个

svn：环境变量 SVN_EDITOR、VISUAL 或 EDITOR 均未设置，也未找到“editor-cmd”运行时配置选项

请问我能得到一些帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:01:25.140

The `svn propedit` or `svn pedit` command requires an editor in order to work, and that's what your error message is telling you. You need to set up an *environment variable* that contains the name of the editor you want to use.

The Mac has several text editors that can work. Remember, you're not talking about things like `TextEdit`, but terminal editors. For example, you can look at `vim`, `pico`, and `emacs`. I prefer `vim`, but that can be fairly difficult for a person who has never been exposed to it to understand. You can try `pico` which is friendlier.

To set an environment variable in your shell, you'd do something like this:

```
$ EDITOR=pico; export EDITOR 
```

What Subversion does is take the editors in the following order:

*   Whatever `SVN_EDITOR` is set to. If this isn't set...
*   Whatever `VISUAL` is set to. If this isn't set...
*   Whatever `EDITOR` is set to. If this isn't set, you're in trouble

Most of the time, you set your editor environment variable in your `$HOME/.profile` file or if you're using bash, your `$HOME/.bash_profile` file. This way, when you first log in, your editor will be set.

Another method is to edit the `$HOME/.subversion/config` file to set your editor there. This will override your environment variable settings.

Take a look at that file, and you'll see a section like this:

```
### Section for configuring external helper applications.
[helpers]
### Set editor-cmd to the command used to invoke your text editor.
###   This will override the environment variables that Subversion
###   examines by default to find this information ($EDITOR, 
###   et al).
# editor-cmd = editor (vi, emacs, notepad, etc.) 
```

You'll be changing that last line by removing the `#` in front, and setting `editor-cmd` to your favorite editor:

```
### Section for configuring external helper applications.
[helpers]
### Set editor-cmd to the command used to invoke your text editor.
###   This will override the environment variables that Subversion
###   examines by default to find this information ($EDITOR, 
###   et al).
editor-cmd = pico 
```

If none of this makes sense to you, it's about time to learn a bit about the underlying Unix system that's at the heart of your Mac. You might want to look at [Take Control of the Mac Command Line with Terminal](http://shop.oreilly.com/product/9781933671550.do) as a first step. After that, I recommend to look at some of O'Reilly's BASH command shell books since that's what the Mac's shell defaults to.

I would also recommend you learn [VI/VIM](http://shop.oreilly.com/product/9780596529833.do). This is an old editor first published by Bill Joy in 1976\. Bill Joy would later be famous for founding Sun Microsystems and his work on NFS, Sparc, and Java. He also wrote the [C Shell](http://www.faqs.org/faqs/unix-faq/shell/csh-whynot/#b), but I'm willing to let that ride.

Anyway, this 37 year old editor is probably the most powerful programming editor ever invented (and don't listen to those EMAC people. [They're just a cult group](http://en.wikipedia.org/wiki/Editor_war)). It can be tough for a beginner, but once you've learned it, you'll find it fast, simple, and powerful.

# forms - MS-Access 2003：从一个表单创建多个记录

> ID：10073460
> 
> 赞同：0
> 
> 时间：2012-04-09T12:51:42.197
> 
> 标签：forms, ms-access

谁能指出一个可以基于一个表单创建多个记录（在单个表中）的 Access 表单的示例？

扩展：我们正在记录有关给定日期在项目上花费的时间的信息。我们有一个单一表单的请求，允许用户在一个表单上输入给定一周中 5（或 7）天的数据。他/她会从日历控件中选择一周，从列表框中选择一个项目，然后输入最多 7 个数字来表示该周花费的时间。

我确实检查了似乎不适用的问题 5294128 和问题 8070706，这似乎暗示这只能在 VBA 中完成（不使用 GUI）。有什么选择吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:14:35.450

这些线上的东西应该适合。这是一个带有子表单的未绑定表单。

![形式](../Images/1db3f9c2fc55bc254307545c87b0c66f.png)

您可以从表单向导中获取表单类型

![在此处输入图像描述](../Images/787c29224ca7cdf17f82d5c5510ba343.png)

要正常工作，您将需要一些代码，例如：

```
Private Sub cmdGo_Click()
Dim rs As DAO.Recordset
Dim sSQL As String
Dim sSDate As String
Dim sEDate As String

    sSDate = "#" & Format(Me.txtStartDate, "yyyy/mm/dd") & "#"
    sEDate = "#" & Format(Me.txtStartDate + Me.txtNoDays, "yyyy/mm/dd") & "#"

    sSQL = "SELECT * FROM MyTable WHERE DataDate Between " & sSDate _
        & " AND " & sEDate

    Set rs = CurrentDb.OpenRecordset(sSQL)

    If rs.RecordCount < Me.txtNoDays Then
        AddRecords sSDate, sEDate
    End If

    Me.DataSubform.Form.RecordSource = sSQL
End Sub

Sub AddRecords(sSDate, sEDate)
''Uses counter table with integers from 0 to
''highest required number
''Another useful table is a calendat table, which would
''save some work here.

    sSQL = "INSERT INTO MyTable (DataDate) " _
        & "SELECT AddDate FROM " _
        & "(SELECT " & sSDate _
        & " + [counter.ID] AS AddDate " _
        & "FROM [Counter] " _
        & "WHERE " & sSDate _
        & "+ [counter.ID] Between " & sSDate _
        & " And " & sEDate & ") a " _
        & "WHERE AddDate NOT In (SELECT DataDate FROM MyTable)"

    CurrentDb.Execute sSQL, dbFailOnError
End Sub 
```

# javascript - 我如何更新facebook页面的状态？

> ID：10073464
> 
> 赞同：0
> 
> 时间：2012-04-09T12:51:48.170
> 
> 标签：javascript, facebook, facebook-graph-api

我如何从其他网站从 javascript 更新我的 facebook 页面的状态。请告诉我我该怎么做。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:59:14.790

这应该对你有很大帮助

> [https://developers.facebook.com/docs/reference/api/page/#posts](https://developers.facebook.com/docs/reference/api/page/#posts)

# objective-c - 将音频样本从 Float32 移位到 SInt16 会导致严重的削波

> ID：10073467
> 
> 赞同：5
> 
> 时间：2012-04-09T12:51:52.693
> 
> 标签：objective-c, ipad, ios5, core-audio, audiounit

我是 iOS 及其 C 基础的新手，但不是一般的编程新手。我的困境是这样的。我正在基于复杂 AudioUnits 的应用程序中实现回声效果。该应用程序需要混响、回声和压缩等。但是，只有当我为我的应用程序中生成的音频样本使用特定的**AudioStreamBasicDescription格式时，回声才能正常工作。**但是，这种格式不适用于其他 AudioUnit。虽然还有其他方法可以解决这个问题，但修复回显算法中的位旋转可能是最直接的方法。

与 echo 一起使用的* *AudioStreamBasicDescription * 的***mFormatFlag**为： *kAudioFormatFlagsAudioUnitCanonical*；它的具体情况是：

```
AudioUnit Stream Format (ECHO works, NO AUDIO UNITS)
Sample Rate:              44100
Format ID:                 lpcm
Format Flags:              3116 = kAudioFormatFlagsAudioUnitCanonical
Bytes per Packet:             4
Frames per Packet:            1
Bytes per Frame:              4
Channels per Frame:           2
Bits per Channel:            32
Set ASBD on input
Set ASBD on  output
au SampleRate rate: 0.000000, 2 channels, 12 formatflags, 1819304813 mFormatID, 16 bits per channel 
```

**除了 mFormatFlag 之外，与AudioUnits**一起使用的流格式是相同的：*kAudioFormatFlagIsFloat | kAudioFormatFlagsNativeEndian | kAudioFormatFlagIsPacked | kAudioFormatFlagIsNonInterleaved——*它的细节是：

```
AudioUnit Stream Format (NO ECHO, AUDIO UNITS WORK)
Sample Rate:              44100
Format ID:                 lpcm
Format Flags:                41 
Bytes per Packet:             4
Frames per Packet:            1
Bytes per Frame:              4
Channels per Frame:           2
Bits per Channel:            32
Set ASBD on input
Set ASBD on  output
au SampleRate rate: 44100.000000, 2 channels, 41 formatflags, 1819304813 mFormatID, 32 bits per channel 
```

为了创建回声效果，我使用了两个函数将样本数据移位到**SInt16**空间，然后返回。正如我所说，这适用于*kAudioFormatFlagsAudioUnitCanonical*格式，但不适用于其他格式。当它失败时，声音会被削波和失真，但它们仍然存在。我认为这表明这两种格式之间的区别在于数据在**Float32**中的排列方式。

```
// convert sample vector from fixed point 8.24 to SInt16
void fixedPointToSInt16( SInt32 * source, SInt16 * target, int length ) {
    int i;
    for(i = 0;i < length; i++ ) {
        target[i] =  (SInt16) (source[i] >> 9);
        //target[i] *= 0.003;

    }
} 
```

*如您所见，我尝试修改样本的幅度以消除削波——显然这不起作用。

```
// convert sample vector from SInt16 to fixed point 8.24 
void SInt16ToFixedPoint( SInt16 * source, SInt32 * target, int length ) {
    int i;
    for(i = 0;i < length; i++ ) {
        target[i] =  (SInt32) (source[i] << 9);
        if(source[i] < 0) { 
            target[i] |= 0xFF000000;
        }
        else {
            target[i] &= 0x00FFFFFF;
        }
    }
} 
```

如果我可以确定*kAudioFormatFlagIsFloat |之间的区别 kAudioFormatFlagsNativeEndian | kAudioFormatFlagIsPacked | kAudioFormatFlagIsNonInterleaved*，那么我可以相应地修改上述方法。但我不确定如何解决这个问题。CoreAudio 中的文档很神秘，但是从我在那里读到的内容以及从**CoreAudioTypes.h**文件中收集的内容来看，这两个**mFormatFlag** (s) 都引用了相同的 Fixed Point 8.24 格式。显然有些不同，但我不知道是什么。

感谢您阅读这个长长的问题，并提前感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T13:12:25.430

`kAudioFormatFlagIsFloat`表示缓冲区包含浮点值。如果`mBitsPerChannel`是 32，那么您正在处理`float`数据（也称为 Float32），如果是 64，那么您正在处理`double`数据。

`kAudioFormatFlagsNativeEndian`指的是缓冲区中的数据与处理器的字节序匹配，因此您不必担心字节交换。

`kAudioFormatFlagIsPacked`意味着数据中的每一位都是重要的。例如，如果您以 32 位存储 24 位音频数据，则不会设置此标志。

`kAudioFormatFlagIsNonInterleaved`意味着每个单独的缓冲区由一个数据通道组成。音频数据通常是交错的，样本在 L 和 R 通道之间交替：`LRLRLRLR`. 对于 DSP 应用，通常更容易对数据进行去交错处理并一次在一个通道上工作。

我认为在您的情况下，错误是您将浮点数据视为定点。浮点数据通常缩放到区间 [-1, +1)。要转换`float`为`SInt16`您需要将每个样本乘以最大 16 位值 ( `1u << 15`, 32768)，然后剪辑到区间 [-32768, 32767]。

# php - 如何从 php 中的 mysql 日期时间字段中获取平均天数？

> ID：10073469
> 
> 赞同：1
> 
> 时间：2012-04-09T12:51:56.467
> 
> 标签：php, mysql, datetime, average

我有一个 mysql 数据库，其中我有两个`datetime`字段，一个是`start_date`另一个是`end_date`. 所以让我们说**scorer1**有一个`start_date`和`end_date`| 同样**scorer2**有 a`start_date`和`end_date`。

现在我怎样才能得到所有**得分手的平均****天数**？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:05:07.840

您可以使用mysql选择日期之间的差异：

```
SELECT SUM(DATEDIFF(end_date, start_date)) as difference_in_days, COUNT(id) as total_rows FROM table 
```

这将为您提供总天数差异以及它适用的总行数。

然后，一旦你从数据库中提取了它，使用一些 PHP 来计算平均值：

```
$average = $row['difference_in_days'] / $row['total_rows']; 
```**

# objective-c - NSArrayController 键路径绑定崩溃

> ID：10073470
> 
> 赞同：1
> 
> 时间：2012-04-09T12:52:04.900
> 
> 标签：objective-c, cocoa, binding, nsarraycontroller

我将 的内容数组绑定`NSArrayController`到我的文件所有者（这是我的 NSViewController 的子类）`device.files`键路径。两者`device`都`files`支持 KVO。

当我释放我的视图控制器时，我得到了

`[NSKeyValueObservance retain]: message sent to deallocated instance`异常（打开所有调试器内存选项）

如果我把它`NSObjectController`放在我的 xib 中，将它绑定到并`FO.device`绑定`NSArrayController`到`NSObjectController`，一切都很好。`Controller Key = selection``Model key Path = files`

有人可以解释一下绑定到关键路径有什么问题吗？据我所知，绑定到一个关键路径应该观察这个路径中的所有项目..

# java - 如何避免递归函数的 StackOverflowError

> ID：10073471
> 
> 赞同：16
> 
> 时间：2012-04-09T12:52:09.280
> 
> 标签：java, stack-overflow

我正在编写一个可以调用自身多达 5000 次的函数。当然，我得到一个`StackOverflowError`. 有什么方法可以以相当简单的方式重写此代码？：

```
void checkBlocks(Block b, int amm) {

    //Stuff that might issue a return call

    Block blockDown = (Block) b.getRelative(BlockFace.DOWN);
    if (condition) 
        checkBlocks(blockDown, amm);

    Block blockUp = (Block) b.getRelative(BlockFace.UP);
    if (condition) 
        checkBlocks(blockUp, amm);

    //Same code 4 more times for each side

} 
```

顺便问一下，我们可以调用函数的深度有什么限制？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-09T12:57:07.000

使用明确的对象堆栈和循环，而不是调用堆栈和递归：

```
void checkBlocks(Block b, int amm) {
  Stack<Block> blocks = new Stack<Block>();
  blocks.push(b);
  while (!blocks.isEmpty()) {
    b = blocks.pop();
    Block blockDown = (Block) b.getRelative(BlockFace.DOWN);
    if (condition)
      blocks.push(block);
    Block blockUp = (Block) b.getRelative(BlockFace.UP);
    if (condition) 
      blocks.push(block);
  }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-09T13:05:15.827

java中的默认堆栈大小为512kb。如果超过该程序将终止抛出 StackOverflowException

您可以通过传递 JVM 参数来增加堆栈大小：-Xss1024k

现在堆栈大小为 1024kb。您可以根据您的环境给予更高的价值

我认为我们不能以编程方式改变这一点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:57:49.447

您可以使用 -Xss4m 增加堆栈大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T12:58:34.550

只要块可用，您就可以将“块”放入队列/堆栈中并进行迭代。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T13:00:28.837

很明显，您获得了具有递归分支因子的 StackOverflow。在其他语言中，它可以[通过 Tail Call Optimization](http://en.wikipedia.org/wiki/Tail_call)来实现。但我想你的问题需要另一种方法来解决。

理想情况下，您对 Block 进行一些检查。也许您可以获取所有块的列表并迭代检查每个块？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T14:45:42.730

在大多数情况下，递归的使用方式是错误的。您不应该得到堆栈溢出异常。您的方法没有返回类型/值。你如何确保你的初始块 b 是有效的？

如果您使用递归，请回答以下问题：

*   我的递归锚是什么（我什么时候停止递归）
*   我的递归步骤是什么（如何减少计算次数）

例子：

*   嗯！=> n*n-1！

我的递归锚是 n == 2（结果是 2），所以我可以计算从这个锚开始的所有结果。

我的递归步骤是 n-1 （所以每一步我都更接近解决方案（实际上是我的递归锚点））

# php - 带有 json_encode 的 Cakephp JSON 响应不起作用

> ID：10073472
> 
> 赞同：0
> 
> 时间：2012-04-09T12:52:14.453
> 
> 标签：php, jquery, ajax, json, cakephp

我正在使用 ajax 函数为我的 jquery 自动完成取回数据，但它似乎没有解析 json 响应，我找不到原因。

我查看了console.log，其中一个正在工作，另一个是json响应，另一个不工作，在chrome控制台中，我可以在下面看到。第一个不工作，第二个工作。

```
["17","17","16","20","19","18","23","18","20","18","23","23"]
["25", "24", "25", "24", "24", "23", "21", "23", "22", "21", "22", "22"] 
```

我可以看到第二个数字上有红色，我不知道为什么。

有人能找出为什么它不解析这个 JSON 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:56:24.273

第二个在每个逗号后都有一个空格（或其他显示的字符）。如果这是您的`json_encode()`调用输出它的方式，您可以运行一个额外的措施以确保在将其返回给您的 AJAX 函数之前不存在这些空间：

```
$encoded_text = str_replace(" ","",$encoded_text); 
```

如果您可能有通常有空格的数据，请不要使用它。我不确定这是否是导致它不起作用的原因，但这是您向我们展示的字符串的唯一区别。

您还可以使用[JSONLint](http://jsonlint.com/)免费验证您的 JSON。

# android - Android 客户端和 Java 服务器 TCP 通信

> ID：10073473
> 
> 赞同：9
> 
> 时间：2012-04-09T12:52:15.960
> 
> 标签：android, tcp, client, communication

我正在开发一个 Android 应用程序（客户端）并希望它使用 TCP 通信与我的 Java 服务器连接。

我已经完成了代码——简单的程序，客户端发送一条消息，服务器回显它——如下：

服务器代码：

```
 import java.net.*;

public class Server {

    public static void main(String[] args) {

        int nreq = 1;
        try
        {
            ServerSocket sock = new ServerSocket (8080);
            for (;;)
            {
                Socket newsock = sock.accept();
                System.out.println("Creating thread ...");
                Thread t = new ThreadHandler(newsock,nreq);
                t.start();
            }
        }
        catch (Exception e)
        {
            System.out.println("IO error " + e);
        }
        System.out.println("End!");
    }
} 
```

服务器同一项目文件中的线程处理程序代码：

```
 import java.io.*;
import java.net.*;

class ThreadHandler extends Thread {
    Socket newsock;
    int n;

    ThreadHandler(Socket s, int v) {
        newsock = s;
        n = v;
    }

    public void run() {
        try {

            PrintWriter outp = new PrintWriter(newsock.getOutputStream(), true);
            BufferedReader inp = new BufferedReader(new InputStreamReader(
                    newsock.getInputStream()));

            outp.println("Hello :: enter QUIT to exit \n");
            boolean more_data = true;
            String line;

            while (more_data) {
                line = inp.readLine();
                System.out.println("Message '" + line + "' echoed back to client.");
                if (line == null) {
                    System.out.println("line = null");
                    more_data = false;
                } else {
                    outp.println("From server: " + line + ". \n");
                    if (line.trim().equals("QUIT"))
                        more_data = false;
                }
            }
            newsock.close();
            System.out.println("Disconnected from client number: " + n);
        } catch (Exception e) {
            System.out.println("IO error " + e);
        }

    }
} 
```

这是客户端（Android）：

```
package com.android.client;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import java.util.Scanner;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Client extends Activity {
    /** Called when the activity is first created. */
    Scanner scanner = new Scanner(System.in);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final EditText msg = (EditText) findViewById(R.id.etMsg);
        Button send = (Button) findViewById(R.id.bSend);
        final TextView convo = (TextView) findViewById(R.id.tvConvo);
        final TextView status = (TextView) findViewById(R.id.tvStatus);

        try {
            send.setOnClickListener(new View.OnClickListener() {

                Socket s = new Socket("localhost", 8080);
                String message = msg.getText().toString();

                @Override
                public void onClick(View v) {
                    status.setText("...");
                    PrintWriter outp = null;
                    BufferedReader inp = null;
                    status.setText("Established connection..");
                    String serverMsg = null;

                    try {
                        outp = new PrintWriter(s.getOutputStream(), true);
                        inp = new BufferedReader(new InputStreamReader(s.getInputStream()));
                        serverMsg = inp.readLine();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                    convo.append(serverMsg + "\n");

                    if (message != null) {
                        if (msg.getText().toString().trim() == "QUIT") {
                            try {
                                s.close();
                            } catch (IOException e) {
                                e.printStackTrace();
                            }
                            status.setText("Disconnected from server.");

                        } else {
                                try {

                                    convo.append(message + "\n");
                                    outp.println(message); 
                                    serverMsg = inp.readLine();
                                    convo.append(serverMsg + "\n");
                                } catch (IOException e) {
                                    e.printStackTrace();
                                }
                        }

                    }
                    else
                        status.setText("Problem in connection..!");
                }
            });
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

这是 XML 文件：

```
<?xml version="1.0" encoding="utf-8" ?> 
- <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent" android:orientation="vertical">
  <TextView android:id="@+id/tvText" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Your message here:" /> 
- <EditText android:id="@+id/etMsg" android:layout_width="match_parent" android:layout_height="wrap_content" android:ems="10">
  <requestFocus /> 
  </EditText>
  <TextView android:id="@+id/tvStatus" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Status..." android:textAppearance="?android:attr/textAppearanceSmall" /> 
  <Button android:id="@+id/bSend" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Send" /> 
  <TextView android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Conversation:" android:textAppearance="?android:attr/textAppearanceLarge" /> 
  <TextView android:id="@+id/tvConvo" android:layout_width="fill_parent" android:layout_height="wrap_content" android:text="" /> 
  </LinearLayout> 
```

我尝试运行它，但没有任何反应。当我单击按钮时，TextView 不会查看来自服务器的“Hello”消息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T13:05:34.620

您将 Android 客户端连接到`localhost`.

```
Socket s = new Socket("localhost", 8080); 
```

这仅在您的服务器在 Android 设备上运行时才有效。但我认为它正在您的 PC 上运行。因此，当您在 Android 模拟器上运行您的应用程序时，您可以连接到[10.0.2.2](https://stackoverflow.com/questions/8240338/http-10-0-2-2-works-on-the-android-emulator-but-not-on-android-device-used-as)以联系主机。在真实设备上，您必须找出您的服务器 IP 地址，Android 设备可以访问该地址，例如通过 Wi-Fi。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T02:55:29.457

如果您的服务器在 Windows 上，请`cmd`在“开始”菜单搜索框中键入，然后`ipconfig`在命令提示符处键入。你会看到类似`IVP4 Address----- 192.168.0.101`. 您需要在客户端上使用此地址和端口号。

# java - 在 JadaSite 中实现的网上商店

> ID：10073475
> 
> 赞同：0
> 
> 时间：2012-04-09T12:52:34.143
> 
> 标签：java, webshop

我对这个主题进行了快速的谷歌搜索，但我找不到任何相关的结果。那么，是否有人知道至少一个使用 JadaSite 作为其网上商店实现的真实网页示例？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:07:12.717

这个使用 jada 发布的在线商店： [http ://www.silver-river.com.au/](http://www.silver-river.com.au/)

# c# - ListView ItemCheck 事件

> ID：10073476
> 
> 赞同：0
> 
> 时间：2012-04-09T12:52:44.533
> 
> 标签：c#, winforms, events, listview

我有一个自定义 ListView 控件和具有三态复选框的自定义 ListViewItem，当我使用`myListView1_ItemCheck`事件时，`ItemCheckEventArgs e` 该项目的类型是 listviewitem 而不是我制作的自定义项目，我如何修改事件以处理自定义 listviewitem我有吗？谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:00:57.947

您无法真正更改现有代码，但您应该能够将项目类型转换为您的类型。

# php - 通过 jquery getJSON 的 Json RPC 请求

> ID：10073477
> 
> 赞同：1
> 
> 时间：2012-04-09T12:52:51.227
> 
> 标签：php, jquery, json, getjson, json-rpc

我正在尝试使用 jquery getJSON 方法将 json-rpc 请求发送到远程服务器。这是我的代码：

```
json_string=JSON.stringify(obj);
var jqxhr = $.getJSON("https://91.199.226.106/ssljson.php?jsoncallback=?", json_string, function(data){
    alert("aaaaaa");
});
jqxhr.error(function() { alert("error"); }) 
```

这是我的 json-rpc 字符串示例：

```
{"jsonrpc":"2.0","method":"merchant_check","params":[{"hostID":150999,"orderID":116,"amount":"150","currency":"051","mid":15001038,"tid":15531038,"mtpass":"12345","trxnDetails":""}],"id":116} 
```

这是我得到的错误：

```
{"jsonrpc":"2.0","id":null,"error":{"code":-32600,"message":"Invalid JSON-RPC 2.0 request error (-32600)"}} 
```

我不明白是什么问题。难道我做错了什么？也许我需要用 php 而不是 jquery 发送请求？那我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T07:38:06.100

`getJSON`顾名思义，如果`GET`您想使用 JSON-RPC，您需要使用 POST，例如：

```
var json_string = JSON.stringify(obj);
$.post('https://91.199.226.106/ssljson.php', json_string, function(response) {
   // process response
}, 'json'); 
```

但这仅在您的页面位于同一服务器上时才有效，除非您使用 CORS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:26:45.263

该特定错误消息*应该*告诉您消息信封根据 JSON-RPC 2.0 规范无效，或者 JSON 本身存在解析错误。

不幸的是，在实践中，许多服务在更广泛的情况下返回此错误。（例如：缺少身份验证令牌等）

**您的示例消息有具体问题吗？**

Web 服务是否接受`GET`请求？（即：这应该是一个`POST`代替吗？）

Web 服务真的需要这个`?jsoncallback=?`位吗？这通常用于 JSONP 请求而不是 JSON-RPC。该服务正在返回一个真正的 JSON-RPC 错误状态，所以如果它需要该 GET 参数，我会感到非常惊讶，并且（取决于 Web 服务配置）可能会被解释为信封的一部分，这将使其成为无效的 JSON-RPC 请求！

是否`merchant_check`将一组一个或多个事务作为其唯一参数？如果不是，那么您的 . 语法错误`params`。有些服务想`params`成为一个`Array`，有些服务想成为一个`Object`。请查阅 SMD/文档以确定是哪种情况。

该服务可能需要`text/json`（或其他）作为`mime-type`请求的。

**推荐方法**：

为避免这些问题，您可能应该首先使用专门构建的 JSON-RPC 库，如 Dojo 工具包中提供的库，并使用由 Web 服务发布的 SMD（如果有）。（我建议不要手动构建 JSON-RPC 消息）。

# iphone - 在 UIImagePicker 中禁用旋转

> ID：10073483
> 
> 赞同：13
> 
> 时间：2012-04-09T12:53:31.967
> 
> 标签：iphone, objective-c, ios5, uiimagepickercontroller

您好我需要禁用 UIImagePicker 的旋转。
如果用户在 iPhone 处于“横向”模式时拍照，按钮将旋转，并且所拍摄的照片也会旋转。我想禁用该选项，因此加速度计将无法工作，并且它总是会像在纵向模式下一样拍照。
我怎样才能做到这一点？
谢谢，马坦拉多姆斯基。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-15T10:39:46.457

这是解决方案：[[UIDevice endGeneratingDeviceOrientationNotifications]](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/occ/instm/UIDevice/endGeneratingDeviceOrientationNotifications)。

为什么这么难找？两个原因：

1.  记录打开或关闭方向通知的`UIDevice`次数。如果开启次数多于关闭次数，仍会发出通知。
2.  显示`UIImagePickerController`这些通知时会打开这些通知。

因此，调用此方法一次对图像选择器没有任何作用。为了确保方向通知关闭并*保持*关闭，您需要在选择器出现之前*和之后将它们关闭。*

这不会影响 iOS 或其他应用程序。它甚至不会完全影响您自己的应用程序：与我建议的其他方法一样，相机按钮会继续响应方向变化，并且拍摄的照片也可以感知方向。这很奇怪，因为如果不需要，设备方向硬件应该被关闭。

```
@try 
{
    // Create a UIImagePicker in camera mode.
    UIImagePickerController *picker = [[[UIImagePickerController alloc] init] autorelease]; 
    picker.sourceType = UIImagePickerControllerSourceTypeCamera;  
    picker.delegate = self; 

    // Prevent the image picker learning about orientation changes by preventing the device from reporting them.
    UIDevice *currentDevice = [UIDevice currentDevice];

    // The device keeps count of orientation requests.  If the count is more than one, it continues detecting them and sending notifications.  So, switch them off repeatedly until the count reaches zero and they are genuinely off.
    // If orientation notifications are on when the view is presented, it may slide on in landscape mode even if the app is entirely portrait.
    // If other parts of the app require orientation notifications, the number "end" messages sent should be counted.  An equal number of "begin" messages should be sent after the image picker ends.
    while ([currentDevice isGeneratingDeviceOrientationNotifications])
        [currentDevice endGeneratingDeviceOrientationNotifications];

    // Display the camera.
    [self presentModalViewController:picker animated:YES];

    // The UIImagePickerController switches on notifications AGAIN when it is presented, so switch them off again.
    while ([currentDevice isGeneratingDeviceOrientationNotifications])
        [currentDevice endGeneratingDeviceOrientationNotifications];
}
@catch (NSException *exception) 
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Camera" message:@"Camera is not available" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert show];
    [alert release];
} 
```

如上所述，拍摄的照片可能仍处于错误的方向。如果您希望它们的方向一致，请检查它们的纵横比并相应地旋转。我建议[如何将 UIImage 旋转 90 度？](https://stackoverflow.com/a/7721814/1318452)

```
//assume that the image is loaded in landscape mode from disk
UIImage * landscapeImage = [UIImage imageNamed: imgname];
UIImage * portraitImage = [[UIImage alloc] initWithCGImage: landscapeImage.CGImage scale:1.0 orientation: UIImageOrientationLeft] autorelease]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T13:42:19.420

Back in 2010, [How to prevent a modal UIImagePickerController from rotating?](https://stackoverflow.com/q/4357045/1318452) found no happy answer to this question.

I found an alternative, but it's also like to get you rejected from the App Store: remove all observers from the window.

If some part of your app outside a viewController needs orientation change messages, it can register for them:

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:) name:UIDeviceOrientationDidChangeNotification object:[UIDevice currentDevice]]; 
```

The window, not surprisingly, registers for such notifications, then rotates the view controllers if they accept the new orientation. It's not conveniently watching for `UIDeviceOrientationDidChangeNotification`, so there must be a privately named equivalent. All you can do is remove *every* notification from the window:

```
[[NSNotificationCenter defaultCenter] removeObserver:[[self view] window]]; 
```

There is no restoring this, if you just wanted to temporarily suppress orientation changes. Neither can we tell if the window was watching for any important notifications from other sources. It's incomplete, too - the button for turning over, and the button for taking a photo, move and rotate on their own.

![Screenshot of iPad in landscape mode with camera UI still in portrait](../Images/b4d6c857f4db9a9323566e3950a6a769.png)

How can you fix that quirk? You could switch off `showsCameraControls` on the UIImagePicker, and provide your own `cameraOverlayView` with the camera buttons on it. Or continue randomly removing notifications by traversing an entire view hierarchy (also rejection material) removing notifications from everything:

```
- (void) removeAllNotificationsFromView:(UIView*) view;
{
    // This recurses through the view hierarchy removing all notifications for everything.
    // This is potentially destructive, and may result in rejection from the App Store.
    [[NSNotificationCenter defaultCenter] removeObserver:view];
    for (UIView *subview in [view subviews])
        [self removeAllNotificationsFromView:subview];
}

[self removeAllNotificationsFromView:imagePicker.view]; 
```

I don't recommend using this, but it provides some interesting insights into how orientation changes are detected and propagated.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-02T02:49:15.337

以上解决方案都不适合我。这是什么工作（对于我已经测试过的iOS 7）-

1.  子类`UIImagePickerController`

2.  覆盖`shouldAutorotate`方法并返回`NO`。

```
 -(BOOL)shouldAutorotate
    {
        return NO;
    } 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-09T13:26:52.070

将以下代码添加到您的视图中

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
     return NO;
} 
```

# android - 如何使用 TrafficStats.incrementOperationCount()？

> ID：10073488
> 
> 赞同：3
> 
> 时间：2012-04-09T12:53:58.143
> 
> 标签：android

的文档 [`TrafficStats.incrementOperationCount()`](http://developer.android.com/reference/android/net/TrafficStats.html#incrementOperationCount%28int,%20int%29)说：

> 在给定记帐标签下执行的网络操作的增量计数。这可用于派生每个操作的字节数。

我想找到在特定网络操作期间传输的总字节数。由于此 API 声称有助于派生每个操作的字节数，有人可以帮助我了解如何使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:00:38.400

[CountingInputStream](http://commons.apache.org/io/apidocs/org/apache/commons/io/input/CountingInputStream.html) [CountingOutputStream](http://commons.apache.org/io/apidocs/org/apache/commons/io/output/CountingOutputStream.html) 我不确定这是否会对您有所帮助，但它确实有助于我获取在特定流中发送和接收的字节数。

您可以塑造它的实际使用，创建这样的逻辑，即加法（发送和接收的字节数）是在特定网络操作期间传输的字节总数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T20:44:24.797

不知道你真的想做什么，但也许这个例子可以帮助：[http ://www.techrepublic.com/blog/app-builder/create-a-network-monitor-using-androids-trafficstats-class/774](http://www.techrepublic.com/blog/app-builder/create-a-network-monitor-using-androids-trafficstats-class/774)

另一种可能的方法是使用像[https://play.google.com/store/apps/details?id=vadim.ofer.sniffer&hl=en这样的嗅探器](https://play.google.com/store/apps/details?id=vadim.ofer.sniffer&hl=en)

# android - 在 Android 中连接到 WPA2 Enterprise 后 WiFi 不工作

> ID：10073491
> 
> 赞同：2
> 
> 时间：2012-04-09T12:54:06.953
> 
> 标签：android, wifi, enterprise

我正在以编程方式尝试配置我们的组织 WiFi 接入点，这需要以下设置，

```
Sec.Type  : WPA2-Enterprise 
Enc.Type  : AES 
Net.Auth.Method : PEAP 
```

它还需要 org Active Directory 用户名和密码进行身份验证。

在 iPhone 中，我可以很容易地使用带有 AD 用户名和密码的 WPA2-Enterprise 安全类型来配置它。

但是，在 Android 中，我可以使用以下详细信息配置相同的接入点。

```
Security : 802.1x EAP.
EAP Method : PEAP
Phase 2 authentication : None.
CA Certificate : Unspecified.
user certificate : Unspecified.
Identity : ad user name.
password : ad password. 
```

一旦我配置了 about 网络，它就会进行身份验证并使用有效的 ip 连接到网络。

但是，问题来了，即使连接到网络后，也无法浏览任何内容，甚至无法 ping 连接在同一个 WiFi 网络中的笔记本电脑。

需要任何指示或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-07T16:00:42.257

在我的例子中，除了选择 MSCHAPv2 作为阶段 2 之外，我还必须以用户名@域的格式编写身份字段，而不是 Windows 中通常使用的域\用户名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T17:26:23.370

使用[PEAP](http://en.wikipedia.org/wiki/Protected_Extensible_Authentication_Protocol)，您**必须选择**第 2 阶段。通常使用[MSCHAPv2](http://en.wikipedia.org/wiki/Protected_Extensible_Authentication_Protocol#PEAPv0_with_EAP-MSCHAPv2)。

# android - 安卓支付库

> ID：10073493
> 
> 赞同：4
> 
> 时间：2012-04-09T12:54:17.137
> 
> 标签：android, paypal, in-app-purchase

我知道有应用内计费，但​​有没有办法将钱转回给客户？例如在他的贝宝账户上？还是客户只​​能付款而不能收款？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:52:31.870

您可以退还购买的款项，款项会退回到客户的 Google Checkout 帐户（通常由信用卡支持）。除此之外的任何东西都超出了 Android Market/Play 支付系统的范围。您当然可以使用 PayPal 或银行转账，甚至是支票给任何人钱 :)

# java - 使用 PageFactory 初始化和使用 WebDriver PageObject 的最佳方法是什么？

> ID：10073500
> 
> 赞同：0
> 
> 时间：2012-04-09T12:54:50.083
> 
> 标签：java, design-patterns, webdriver, instantiation, pageobjects

通过 WebDriver 和 PageFactory，我们正在使用 Java 实现一个新的自动化项目，并且我们一直在尝试各种创建 PageObjects 的方法。我们被一些不同的想法所困扰，并希望确保我们不会陷入困境。

是否最好，如 WebDriver 文档中所述，向 PageFactory 提供初始化的 WebDriver，以及创建新 PageObject 的类模板？

```
driver.get(URL);
PageObject page = PageFactory.initElements(driver, PageObject.class);

// elsewhere
class PageObject {
  private WebDriver driver;

  public PageObject(WebDriver driver) {
    this.driver = driver;
    this.validateUrl();
  }

  public void validateUrl() throws Exception {
    if (!driver.getUrl().equals(url)) {
      throw new Exception("URL not valid");
    }
  }
} 
```

但是，既然 PageObject 知道很多关于它自己的信息，比如它的 URL，我们可以不让 Page Object 来做这项工作吗？

```
PageObject page = new PageObject(driver);
page.goToUrl();

// elsewhere
class PageObject {
  private WebDriver driver;
  private String url;

  public PageObject(WebDriver driver) {
    PageFactory.initElements(driver, this);
  }

  public void goToUrl() {
    driver.get(url);
  }
} 
```

我想我认为让 PageFactory 进行实例化与仅进行初始化相比没有太大的优势，但是如果有理由的话，我不想偏离架构师的标准设置。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:47:32.973

最好的方法是让 Geb 和 Thucydides 等框架抽象出 PageObjects 及其初始化。为此，我一直在使用[Geb](http://www.gebish.org/) + [Spock BDD](http://code.google.com/p/spock/)组合，迄今为止的结果非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T08:50:15.860

页面工厂的优势之一：

设想：

在您的应用程序中，您在一个页面中有 100 个字段。同一个页面被调用了 50 次。

如果这种场景是通过使用Page Object的方式来完成的，它会一次又一次地找到每个元素。性能可能会下降。

如果使用 Page Factory 的方式来完成相同的场景，它只会第一次找到元素，然后从缓存中取出。以此提高性能。

# pyqt - 是否可以在最新的 OSX (10.7) 上使用最新的 Qt (4.8) 构建 pyQt

> ID：10073501
> 
> 赞同：0
> 
> 时间：2012-04-09T12:54:56.177
> 
> 标签：pyqt

我有一个依赖于 pyQt 的软件（它是 TortoiseHG，它不支持 pyside）。是否可以使用最新的 Qt 在最新的 OSX 版本上构建 pyQt？我已经从官方网站 (http://www.riverbankcomputing.co.uk) 下载了 pyQt，但它首先失败，配置步骤出现“i386 架构”链接错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:55:05.167

[MacPorts](http://www.macports.org/)有[许多 PyQT 版本](http://www.macports.org/ports.php?by=name&substr=pyqt)（包括撰写本文时的 4.9.1 版），因此它似乎是可能的。

如果仅通过 MacPorts（推荐）获取它不是一个选项，您可以检查[他们的 portfile](https://trac.macports.org/browser/trunk/dports/python/py-pyqt4/Portfile)以查看他们如何配置和构建它，然后在本地执行相同的操作。

# c# - 将文件上传到 asp.net 中的 ftp 文件夹

> ID：10073504
> 
> 赞同：3
> 
> 时间：2012-04-09T12:55:17.530
> 
> 标签：c#, asp.net, upload, ftp

在做了一些研究之后，我对这个主题的看法相对空白。我要做的基本上是当用户点击上传按钮到我们公司的公共网站时，从 asp.net 页面上传文件（.jpeg）。这些文件存储在 ftp 站点上的文件夹中。

有人可以指出我正确的方向来开始这件事吗？我有 ftp 凭据，我可以登录并查看我需要上传的实际文件夹，我只需要一些指导。我以前从未通过 asp.net 使用过 ftp。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:26:33.723

*使用FtpWebRequest*类应该可以上传。

*FtpWebRequest*类的使用细节和示例可在以下位置获得：http: [//msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx)

还要检查以下站点是否有用： http: [//nethelp.wikidot.com/ftpupload](http://nethelp.wikidot.com/ftpupload)

# javascript - 骨干路由器作为 /en/#xyz 而不是 /#en/xyz

> ID：10073509
> 
> 赞同：0
> 
> 时间：2012-04-09T12:55:36.063
> 
> 标签：javascript, backbone.js, pushstate

我正在尝试做一些非常简单的事情。

场景如下：我有一个与启用 pushstate 的浏览器配合得很好的整个站点。该网站的工作基于语言是“实际页面”，例如：

```
/en/whatever/etc  = index.en.php with  with english headers and encoding & tweaks
/ar/whatever/etc  = index.ar.php with  with arabic headers and encoding & tweaks
/ru/whatever/etc  = index.ru.php with  with russian headers and encoding & tweaks 
```

正如我提到的，它真的很漂亮，并且可以很好地与 pushstate 配合使用。问题是当我尝试将相同的路由器代码与散列选项一起使用时。

Backbone 的路由器似乎想要这样做：

```
/#/en/whatever/etc = bad because it's not based correctly
/#/ar/whatever/etc = and so on 
```

我想要它做的是：

```
/en/#whatever/etc
/ar/#whatever/etc
/ru/#whatever/etc
..and so on

or even:

/en/#/whatever/etc
/ar/#/whatever/etc
/ru/#/whatever/etc
..and so on 
```

但是如果不调整骨干源来实现这一点，我就找不到方法。我有点反对改变backbone.js，除非我真的必须因为未来的因素而改变。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T16:25:36.967

您需要使用[Backbone](http://documentcloud.github.com/backbone/#History)[对象](http://documentcloud.github.com/backbone/#History)`root`中的选项：[`History`](http://documentcloud.github.com/backbone/#History)

引用文档：

> 如果您的应用程序不是从您的域的根 url / 提供服务，请务必告诉 History 根的真正位置，作为一个选项：`Backbone.history.start({pushState: true, root: "/public/search/"})`

您将不得不在登录页面上执行一些代码，查看他们使用的语言，然后将它们发送到`/[LANG CODE]/`. 然后在您的服务器上，您只需将请求映射`/[LANG CODE]/`到您的 .html 文件。

在您的 HTML 文件中查看`location.pathname`变量，剥离第一`/[LANG CODE]/`部分并将其用作`root`选项哈希的值。

```
var lang = "/"+_.first(location.pathname.split('/')+"/";
Backbone.history.start({pushState: true, root: lang}); // if you're using pushState, otherwise omit or set to false 
```

这将导致您的网址为：

```
/en/#whatever/etc
/ru/#whatever/etc 
```

# windows - Windows 的节点框

> ID：10073514
> 
> 赞同：1
> 
> 时间：2012-04-09T12:55:54.307
> 
> 标签：windows, macos, graph

有没有类似Windows 的[NodeBox](http://nodebox.net/code/index.php/Home)的东西？或者是否有任何Windows版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:58:13.473

[http://www.processing.org/](http://www.processing.org/)

> Processing 是一种开源编程语言和环境，适用于想要创建图像、动画和交互的人。最初开发用作软件速写本并在视觉环境中教授计算机编程的基础知识，Processing 也已发展成为生成完成的专业工作的工具。今天，有成千上万的学生、艺术家、设计师、研究人员和业余爱好者使用 Processing 进行学习、原型设计和生产。
> 
> ```
> » Free to download and open source
> » Interactive programs using 2D, 3D or PDF output
> » OpenGL integration for accelerated 3D
> » For GNU/Linux, Mac OS X, and Windows
> » Projects run online or as double-clickable applications
> » Over 100 libraries extend the software into sound, video, computer vision, and more...
> » Well documented, with many books available 
> ```

[它在http://alternativeto.net/software/nodebox/](http://alternativeto.net/software/nodebox/)上被列为最受欢迎的 Nodebox 替代品，可在 Mac、Windows 和 Linux 上使用。在替代品上，您可以看到其他流行的替代品，例如 Vvvv（专用于 windows）Shoebot（跨平台）、Protovis、Evaldraw 和 Context Free。

# wordpress - 备份/恢复 wordpress 站点（更改域）

> ID：10073516
> 
> 赞同：0
> 
> 时间：2012-04-09T12:56:14.650
> 
> 标签：wordpress

我在 localhost 上开发了一个基于 wordpress 的网站。我想将其迁移到 www.mydomain.com。我将 /var/www/wordpress 中的所有文件从本地主机签入到 svn 存储库。在 www.mydomain.com，我进行了 svn 结帐。我还导出了 wordpress 数据库并将其导入到我的新域中。

我正在使用石墨烯主题。

我将 wp_options 表中的所有 localhost 修改为我的域名。得到它的工作，但注意到缺少一些东西。

*   映射我的 3 个菜单，主要、次要和页脚
*   我在本地主机上为侧栏插件添加的帖子在我的新域中丢失
*   从外观->背景设置背景颜色

我错过了什么吗？文件夹还是别的什么？

编辑：也只需阅读 [http://lorelle.wordpress.com/2005/12/01/search-and-replace-in-wordpress-mysql-database/](http://lorelle.wordpress.com/2005/12/01/search-and-replace-in-wordpress-mysql-database/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:49:10.777

> 我将 wp_options 表中的所有 localhost 修改为我的域名

你是怎么做到的？在带有数据库转储的文本编辑器中？这将破坏数据库中的一些数据。

最好在 phpmyadmin 中使用查询来更改数据库中的 URL。采用：

```
UPDATE wp_options SET option_value = replace(option_value, 'http://www.olddomain.com/', 'http://www.newdomain.com/') WHERE option_name = 'home' OR option_name = 'siteurl';

UPDATE wp_posts SET guid = replace(guid, 'http://www.olddomain.com/','http://www.newdomain.com/');

UPDATE wp_posts SET post_content = replace(post_content, 'http://www.olddomain.com/', 'http://www.newdomain.com/');

UPDATE wp_postmeta SET meta_value = replace(meta_value, 'http://www.olddomain.com/', 'http://www.newdomain.com/'); 
```

在您的虚拟主机上使用 phpmyadmin 或将其用作插件；请参阅[WordPress › 便携式 phpMyAdmin « WordPress 插件。](http://wordpress.org/extend/plugins/portable-phpmyadmin/)

**但最好使用** [interconnectit.com WordPress 序列化PHP 搜索替换工具](http://interconnectit.com/products/search-and-replace-for-wordpress-databases/)，它可以正确反序列化/重新序列化数据库中的数据，因为使用上面的普通查询可能会破坏序列化数据。

并查看[移动 WordPress « WordPress Codex。](http://codex.wordpress.org/Moving_WordPress)

# iphone - Setup controller title with the string "Settings" not working

> ID：10073523
> 
> 赞同：1
> 
> 时间：2012-04-09T12:56:46.367
> 
> 标签：iphone, ios, uinavigationcontroller, uinavigationbar, title

I'm tring to setup the title for my navigation controller to the text "Settings". I'm testing it in iOS 5.0 and it displays "Item" instead. If I specify any other dummy string (for the Settings key value in my resource bundle file for en) it is displayed correct.

```
[self setTitle:[NSString stringWithFormat:@"%@", NSLocalizedString(@"Settings", @"")]]; 
```

Settings is reserved and could not be specified as the title name for a navigation controller? I know I've tested on 3.X and was displayed.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:25:16.793

I'm guessing this has nothing to do with the title, but rather your localization. `NSLocalizedString(@"Settings", @"")` Tells the system to look up Settings, and if it can't find it in a en.lproj then it will put instead `@""` as a result. My guess is your localization is incorrect. `NSLocalizedString(@"Settings", @"Settings")` probably would have worked for you, no?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:58:27.973

use this...

```
self.navigationItem.title=  @"Some string"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:22:09.263

Try out this code:

```
self.title=yourString; 
```

# xcode - 图标作曲家位置

> ID：10073524
> 
> 赞同：1
> 
> 时间：2012-04-09T12:56:47.763
> 
> 标签：xcode, icons

我还没有 Xcode 4，但我需要知道 Icon Composer 的位置（以及确切的 Xcode 4 版本）。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T14:34:17.403

如果您使用的是 Xcode 3 或 4 到 4.2，我相信，您可以在此位置找到 Icon Composer...

> ```
> /Developer/Applications/Utilities 
> ```

但是，如果您拥有最新版本的 Xcode 之一（来自 App Store），则可以在此位置找到图标编写器

> ```
> /Applications/Xcode.app/Contents/Applications 
> ```

要到达这个位置，您可以导航到您的应用程序文件夹，右键单击 Xcode 并单击“显示包内容”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:08:43.603

假设您在 /Developer 中安装了 Xcode，您可以在 /Developer/Applications/Utilities 中找到它。

# c# - 使动态表在所有页面中可见

> ID：10073529
> 
> 赞同：0
> 
> 时间：2012-04-09T12:56:52.317
> 
> 标签：c#, asp.net

我正在使用 c# 创建一个动态表，在一个 TableCell 中我有一个下拉列表。我已经为我的下拉列表事件创建了一个 SelectedIndexChanged，现在我想引用我的 TableCell。

```
 public void CreareTabel()
{
TableRow row = new TableRow();
                    TableCell celula = new TableCell();
                    celula.Style.Add("width", "200px");
                    celula.Style.Add("background-color", "red");

                    celula.RowSpan = 2;} 
```

并在我的 selectedindexchanged 中：

```
 private void drop_SelectedIndexChanged(object sender, EventArgs e)
        {
             var drop = (DropDownList)sender;
             if (drop.SelectedValue == "1")
             {
                 celula.RowSpan= drop.SelectedValue;
             }

        } 
```

但是，如果我这样做，我的 celula.RowSpan 将无法识别。如何在我的 selectedindexchanged 中引用 celula.Rowspan????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:19:02.327

尝试这样的事情

```
private void drop_SelectedIndexChanged(object sender, EventArgs e)
    {
         var drop = (DropDownList)sender;
         TableCell celula = (TableCell)drop.Parent;
         if (drop.SelectedValue == "1")
         {
             celula.RowSpan= drop.SelectedValue;
         }

    } 
```

drop.Parent 所做的是抓取下拉列表的父级，即包含它的表格单元。

# html - 让 IE、Opera、Firefox 和 chrome 识别声音格式

> ID：10073530
> 
> 赞同：0
> 
> 时间：2012-04-09T12:56:53.953
> 
> 标签：html, flash

我将音频放置在页面上的控制器中，但是当我加载不同的浏览器时，浏览器甚至看不到声音文件，或者它们不起作用。我已将文件转换为 wav。这显然适用于 IE、Opera、Firefox 和 Chrome，但是更改文件格式并不会改变这种情况。我知道它与 HTML 音频标签或其他东西有关，但我仍然不确定

```
<embed src="../Sounds/home_page_readout.wma" width="405" hidden="false" height="39"   pluginspage="../Plugin/niftyplayer.fla" autoplay="false" controller="true"></embed> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:52:15.023

根据您部署的*控制器*，答案是不同的。但是我很确定您的问题与文件格式无关，您应该检查天气不同的浏览器是否可以找到该文件。

作为一般性答案，我喜欢使用一些经过测试的解决方案将音频嵌入到 Niftyplayer 等网页中：

[https://github.com/progrium/niftyplayer](https://github.com/progrium/niftyplayer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:34:49.890

从[w3schools HTML5 音频元素页面](http://www.w3schools.com/html5/html5_audio.asp)：

> 目前，该元素支持 3 种文件格式：MP3、Wav 和 Ogg：

```
Browser             MP3 Wav Ogg
Internet Explorer 9 YES NO  NO
Firefox 4.0         NO  YES YES
Google Chrome 6     YES YES YES
Apple Safari 5      YES YES NO
Opera 10.6          NO  YES YES 
```

列出的解决方案是以多种格式提供文件：

```
<audio controls="controls">
  <source src="song.ogg" type="audio/ogg" />
  <source src="song.mp3" type="audio/mpeg" />
  Your browser does not support the audio element.
</audio> 
```

希望有帮助。

# wpf - 如何将 DataTemplate 中的按钮绑定到 ViewModel？

> ID：10073531
> 
> 赞同：1
> 
> 时间：2012-04-09T12:56:59.220
> 
> 标签：wpf, binding, mvvm, prism, mvvm-light

我有一个`DataTemplate`放在一个`ResourceDictionary`，里面有一个按钮，`DataTemplate`我把它`DataTemplate`放在一个窗口中。现在我想将按钮命令绑定到的属性`windowViewModel`，我该怎么做？这是代码：

```
 <DataTemplate DataType="{x:Type types:User}" x:Key="UserTemp">
    <Grid  >
        <Button  Command="{Binding  RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ????}, AncestorLevel=1}, Path=SelectLocationCommand}" />
    </Grid>
</DataTemplate> 
```

在 Window.xaml 中

```
<ContentControl x:Name="UserTemp" /> 
```

在 WindowViewModel 中：

```
 public ICommand SelectLocationCommand
    {
        get {return new RelayCommand(selectLocationCommand); }
    }
    void selectLocationCommand()
    {
        _welcomeTitle = "AA";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:35:55.610

简短的回答是您不需要在代码中执行此操作。

您将 DataTemplate 定义为“用户”对象的模板。这意味着这就是用户对象应该在 UI 中显示的方式。因此，为了使用您的 DataTemplate，您应该在 WindowViewModel 中有一个“用户”实例。这意味着 SelectLocationCommand 应该在 User 对象中，而不是在 WindowViewModel 中。

说了这么多，你的代码应该是这样的：

在 Window.xaml 中

```
<ContentControl Content="{Binding User}" ContentTemplate="{StaticResource UserTemp}" /> 
```

在 WindowViewModel 中

```
public User User {get;set} 
```

在用户中

```
public ICommand SelectLocationCommand
{
    get {return new RelayCommand(selectLocationCommand); }
}
void selectLocationCommand()
{
    _welcomeTitle = "AA";
} 
```

此外，请确保 Window.xaml 的 DataContext 是 WindowViewModel。有许多更好的方法可以做到这一点，但最简单的方法是：

在 Window.xaml.cs 中

```
public MainWindow()
{
    InitializeComponent();
    this.DataContext = new WindowViewModel();
} 
```

# java - 我可以为对象的每个实例创建一个循环吗？

> ID：10073539
> 
> 赞同：0
> 
> 时间：2012-04-09T12:57:26.987
> 
> 标签：java, loops, collision-detection

我有很多对象“块”的实例，我需要添加一个碰撞检测来查看我的精灵是否触及了一个块。但是必须复制、粘贴和编辑每个代码将花费很多时间，因为我将在每个级别上大约有 200 个块......这里是碰撞检测，有没有办法可以进行循环以便所有块都得到分配的值会发生变化，例如，第一个将是“block.bottomry”，第一个是“block2.bottomry”，第二个是“block2.bottomry”，第三个是“block3.bottomry”，依此类推，直到所有块都走了。以下是部分代码：

```
public void iscollided() {
        // bottom right touching block?
        if (sprite.bottomrx < block.bottomrx && sprite.bottomrx > block.bottomlx && sprite.bottomry < block.bottommy && sprite.bottomry > block.topry ){
                Log.d(TAG, "Collided!!!!!!!!!!!!1");

        }

        // bottom left touching block?
        if (sprite.bottomlx < block.bottomrx && sprite.bottomlx > block.bottomlx && sprite.bottomly < block.bottommy && sprite.bottomly > block.topry ){
            Log.d(TAG, "Collided!!!!!!!!!!!!1");

        }
        // top right touching block?
        if (sprite.toprx < block.bottomrx && sprite.toprx > block.bottomlx && sprite.topry < block.bottommy && sprite.topry > block.topry ){
            Log.d(TAG, "Collided!!!!!!!!!!!!1");

        }
        //top left touching block?
        if (sprite.toprx < block.bottomrx && sprite.toprx > block.bottomlx && sprite.topry < block.bottommy && sprite.topry > block.topry ){
            Log.d(TAG, "Collided!!!!!!!!!!!!1");

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:02:23.953

当然 :) 您可以将块添加到列表数据结构中，并在列表中循环检查每个块。

```
public class Foo {

    private SpecialSprite sprite = new SpecialSprite();
    private List<Block> blocks = new ArrayList<Block>();

    public void addBlocks() {

        blocks.add(new Block(...));
        blocks.add(new Block(...));
        blocks.add(new Block(...));
    }

    public void isCollided() {

        for(Block block : blocks) {

            // collision detection for each block.
            if(sprite.bottomrx < block.bottomrx ... ) {

                Log.d(TAG, "Collided!!!!!!!!!!!!");
            }
        }
    }
} 
```

编辑：更具体的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:09:56.010

我从你那里得到的问题是块是固定的，而精灵是移动/浮动的。由于块是固定的，您可以将它们放在一个数组中，并将此冲突逻辑放在 for-each 循环中。

另一点是块可以在精灵的上方、下方、前方或后方，并且每种情况下的碰撞逻辑都会有所不同。在块对象中，您可以设置位置并在 for-each 循环中进行检查。

我猜 Blocks 的数组将在运行时使用 Block in view 进行更新，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:23:04.253

您想要的模式称为“工厂方法”，它创建块并“注册”它。这是执行此操作的代码（我省略了所有与答案不直接相关的代码，并`...`在您可能需要填写内容的地方使用）：

```
public class Block {

    private static final List<Block> BLOCKS = new ArrayList<Block>();

    // A private constructor means everyone has to go through `create()`,
    // which is what you want so they all get registered
    private Block(...) {
        ...
    }

    public static Block create(...) {
        Block block = new Block(...);
        BLOCKS.add(block);
    }

    public static boolean hasCollided(Sprite sprite) {
        for (Block block : BLOCKS) {
            if (sprite.bottomlx < block.bottomrx && sprite.bottomlx > block.bottomlx && sprite.bottomly < block.bottommy && sprite.bottomly > block.topry ) {
                return true;
            }
        }
        return false;
    }
} 
```

每当你创建一个`Block`，使用`Block.create()`方法（这意味着新的块被注册）
每当你想检查一个精灵是否碰撞，使用`if (Block.hasCollided(someSprite))`

# asp.net - 带有 ReportViewer 的 RDL 报告的数据源

> ID：10073540
> 
> 赞同：1
> 
> 时间：2012-04-09T12:57:32.160
> 
> 标签：asp.net, reporting-services, reportviewer, rdl

我有一些使用 SQL Server BI Development Studio 创建的 RDL 报告，现在我需要使用 ASP.NET 报告查看器来呈现它们。尽管我的 RDL 包含对 SQL 服务器和 SELECT 查询的引用，但它一直说我需要为报告指定数据源。有没有办法使用 RDL 中的数据源，还是必须通过 C# 代码将数据源传递给报表查看器？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T13:53:27.293

我想您在本地模式下使用报告查看器：

```
viewer.ProcessingMode = Microsoft.Reporting.WinForms.ProcessingMode.Local 
```

你用`viewer.LocalReport`. 在这种情况下，您必须自己运行查询并将结果传递给查看器：

```
dim tbl as new DataTable() 
```

填写数据，例如 tbl.load(datareader)。

```
Dim VDS As New ReportDataSource
VDS.Name = "Your Data Source Name"
VDS.Value = tbl
viewer.LocalReport.DataSources.Add(VDS) 
```

如果要使用服务器模式

```
viewer.ProcessingMode = Microsoft.Reporting.WinForms.ProcessingMode.Remote 
```

你必须使用`viewer.ServerReport`

```
viewer.ServerReport.ReportServerUrl = New Uri(ReportServerURL) 
```

并且可能`viewer.ServerReport.SetDataSourceCredentials`

[Visual Studio 中的 Reporting Services 和 ReportViewer 控件](http://msdn.microsoft.com/en-us/library/ms345248.aspx)

**编辑**
**如何从 rdl**
初始化获取查询：

```
Dim XRep As New XmlDocument
XRep.Load(ReportPath)
Dim xmlnsManager As New System.Xml.XmlNamespaceManager(XRep.NameTable)
dim DefaultNSURI as string = XRep.GetElementsByTagName("Width")(0).NamespaceURI
xmlnsManager.AddNamespace("rep", DefaultNSURI) 
```

数据集处理：

```
For Each nd As XmlNode In XRep.SelectNodes("/rep:Report/rep:DataSets/rep:DataSet", xmlnsManager)
   'DataSourceName can be used to find iformation about connection' 
   Dim DataSourceName As String = nd.SelectSingleNode("rep:Query/rep:DataSourceName", xmlnsManager).InnerText  
   Dim DSName As String = nd.Attributes("Name").Value       
   cmd.CommandText = nd.SelectSingleNode("rep:Query/rep:CommandText", xmlnsManager).InnerText
   Dim tbl As New DataTable(DSName)
   tbl.Load(cmd.ExecuteReader)
    'The table created here is to be passed to  LocalReport as datasource'
 Next 
```

注意要转换 vb.net<->c#，我使用[Convert VB.NET to C#](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:30:32.707

您是否验证了 RDL 中的 DataSourceReference 元素？它需要报告服务器的路径。

> DataSourceReference 元素可以包含完整的文件夹路径（例如，/SampleReports/AdventureWorks）或相对路径（例如，AdventureWorks）。相对路径从与报告相同的文件夹开始。共享数据源必须与报表位于同一服务器上。

也验证 DataSourceID。看看[这个问题的答案](https://stackoverflow.com/questions/1797180/using-a-shared-data-source-for-dynamically-generated-and-deployed-reports)。看起来它可能与您遇到的问题相同。

如果您使用的是 RDLC，您还可以使用[ReportDataSource](http://msdn.microsoft.com/en-us/library/ms254370.aspx)手动设置报告的数据源。下面示例中的“GetMyData”将实现 IEnumerable 或 IDataSource。

```
ReportDataSource reportDataSource = new ReportDataSource("MyDataName", GetMyData(startAt, endAt));
ReportViewer1.LocalReport.DataSources.Add(reportDataSource);
ReportViewer1.LocalReport.ReportPath = Server.MapPath("~/Reporting/MyReport.rdlc");

ReportParameterCollection col = new ReportParameterCollection();
ReportParameter startAtParam = new ReportParameter("StartAt", startAt.ToString("MMM, dd yyyy"));
col.Add(startAtParam);
ReportParameter endAtParam = new ReportParameter("EndAt", endAt.ToString("MMM, dd yyyy"));
col.Add(endAtParam);

ReportViewer1.LocalReport.SetParameters(col); 
```

如果您要将 RDL 转换为 RDLC，您可以[按照此处的步骤](http://msdn.microsoft.com/en-us/library/ms252109%28v=vs.90%29.aspx)操作。请注意，您需要重新创建数据源和查询信息。此外，XML 模式定义在 2005 年和 2008 年之间有所不同。

# php - 从调用当前页面的页面获取 url

> ID：10073541
> 
> 赞同：2
> 
> 时间：2012-04-09T12:57:43.497
> 
> 标签：php, javascript, mysql

我有一个错误页面，我想从我网站中的多个页面调用。在这个错误页面中，我传递了一条消息（现在使用 url），但我也想传递一个页面的链接。

错误页面将使用此链接将用户重定向到我想要的页面。我曾想过使用会话传递链接或使用带有隐藏输入的表单（方法帖子）。哪一个更好？还有其他方法吗？

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T13:01:31.113

您正在寻找`$_SERVER['HTTP_REFERER'];`PHP 的 $_SERVER 预定义变量之一...

更多可以在[这里阅读](http://php.net/manual/en/reserved.variables.server.php)

**tl;博士**

### HTTP_REFERER

> 将用户代理引向当前页面的页面地址（如果有）。这是由用户代理设置的。不是所有的用户代理都会设置这个，有些提供修改 HTTP_REFERER 作为一个特性的能力。简而言之，它不能真正被信任。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:05:03.653

你有没有试过`$_SERVER['HTTP_REFERER']`。

我读过它不是很值得信赖，但值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:03:44.780

我认为，您必须使用 HTTP 引用...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T13:05:09.877

您可以尝试这种方法：

您的普通文件：

```
<?php
$_SESSION['message'] = 'your message here';
$_SESSION['redirect_url'] = 'your page url here'; // this will allow you to redirect the user to any url of your choice and not just the referrer.

header('Location: error.php');
?> 
```

错误.php：

```
<?php
echo $_SESSION['message'];
?>
<html>
   <head>
      <meta http-equiv="refresh" content="2;url=<?php echo $_SESSION['redirect_url'];?>">
   </head>
</html> 
```

希望这可以帮助。

# symfony - PHP 树枝模板

> ID：10073547
> 
> 赞同：1
> 
> 时间：2012-04-09T12:58:08.340
> 
> 标签：symfony, twig

有时我的内容有两列，否则为 1 列。

*   一种选择是具有基本树枝模板，然后覆盖内容块并编写`<div class="col-2">bla bla</div> <div class="sidebar">blah</div>` **OR** `<div class="col-1">blah bal</div>`，如果我需要 1 列。在这种情况下，缺点是我必须总是写这些东西。

*   另一种解决方案是拥有 3 个基本模板 1) base、2) one-col、3)two-col，然后覆盖我想要的块。one-col 将具有（inner_content） two-col 将具有（inner_content）和（sidebar_content），除了另外两个文件之外没有任何缺点。

*   另一种解决方案是仅更改会更改 div col-2 或 col-1 的类的 twig 变量。

这里最好的解决方案是什么？我认为拥有 3 个模板是最好的，因为它允许在需要时使用默认值等。有​​更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:31:44.110

根据文档中描述[的三级继承](http://symfony.com/doc/master/book/templating.html#three-level-inheritance)方法，我建议使用*base* / *one-col* / *two-col方法。*

# java - rich:pickList 选择按钮箭头从右到左的语言方向

> ID：10073549
> 
> 赞同：0
> 
> 时间：2012-04-09T12:58:20.080
> 
> 标签：java, jakarta-ee, richfaces, jsf-1.2

我正在使用richfaces 3.3.2，应用程序以英语和阿拉伯语运行。我在标签中遇到问题。在从右到左的模式下，主、子列表切换位置，但选择控件中的指向箭头不会相应旋转。

目前我已经在风格上设置了它的方向 =“ltr”，但可能需要适当的解决方案。

我截图了，但是我是新手，不能上传

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:51:39.333

我有同样的问题，虽然我使用的是 Richfaces 4.x。我尝试的一种可能的解决方案是用 span 或 div包装**rich:pickList并设置**

```
目录=“ltr”
```

希望它没有帮助。

还要检查[https://community.jboss.org/thread/197043](https://community.jboss.org/thread/197043)

更新：我终于可以解决这个问题了 :)
1\. 在您的项目中创建一个新的 Java 类 org.richfaces.renderkit.html.PickListRenderer。使用当前 Richfaces 版本的源代码。
2\. 在方法 encodeEnd() 中替换

```
responseWriter.writeAttribute("style","width: 1px; position: absolute; left: -32767px;",null);
```

经过

```
responseWriter.writeAttribute("style", "visibility:hidden;", null);
```

**这会将在rich:pickList** 列表上方创建的按钮样式替换为*visibility:hidden*。

请注意您的容器。我使用 Tomcat，它在 /WEB-INF/lib/*.jar 之前读取 /WEB-INF/classes 下的类[[在 Java Web 应用程序中覆盖库 JAR 中的类文件]](https://stackoverflow.com/questions/8362319/overriding-a-class-file-from-a-library-jar-in-a-java-web-app)

# java - 如何在 Ubuntu 中检查 Java 中的 isFile() 或 isDirectory() 函数？

> ID：10073553
> 
> 赞同：0
> 
> 时间：2012-04-09T12:58:38.443
> 
> 标签：java, android, ubuntu

在 ubuntu 中，`isFile()`并`isDirectory()`不能完美地工作。我使用这段代码来确定某个东西是文件还是目录：

```
boolean fileName= file.getName().lastIndexOf('.') == -1; 
```

但问题是我创建了一个名为`bhargav.panchal`. 使用上面的函数，这个文件夹被认为是一个文件，而不是一个文件夹。

```
File file=new File("/home/asd/My_Shared_File/bhargav.panchal");

if(file.exists()){
    if(!file.isDirectory()) {
        Toast.makeText(activity, "This is File", Toast.LENGTH_SHORT).show();
    } else {
        Toast.makeText(activity, "This is Directory", Toast.LENGTH_SHORT).show();
    }
} else {
    Toast.makeText(activity, "File or Directory doesn't exist.", Toast.LENGTH_SHORT).show();
} 
```

在这种情况下，`isDirectory()`and`isFile()`方法总是返回 false。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T06:12:10.140

不，你在某个地方错了。相反，您无法使用 DVM 访问外部环境。

原因：基于操作系统级别的安全性，应用程序之间不可能相互干扰，Dalvik VM 仅限于单个操作系统进程，*Dalvik 本身不关心运行时安全性*。尽管不依赖 Dalvik 的安全性，但有趣的是，大多数标准 Java 安全类仍保留在 Android 发行版中。其中包括 java.lang.SecurityManager 和 java.security 包中的一些类。在标准 Java 环境中，SecurityManger 扮演的角色类似于 Android 中的 OS 进程级安全性。**SecurityManager 通常控制对 JVM 外部资源的访问，例如文件、进程和网络**. 在 Android 发行版中，标准的安全框架显然是为应用程序在其内部使用的，`own application space`但*既没有完全实现也没有配置（不存在 java.policy 文件）以实现进程间安全。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:07:31.530

代替

```
 if(file.isDirectory()){
           Toast.makeText(activity, "This is File", Toast.LENGTH_SHORT).show();                    
       } else {
           Toast.makeText(activity, "This is Directory", Toast.LENGTH_SHORT).show();
       } 
```

在这

```
 if(!file.isDirectory()){
            Toast.makeText(activity, "This is File", Toast.LENGTH_SHORT).show();                    
        } else {
            Toast.makeText(activity, "This is Directory", Toast.LENGTH_SHORT).show();
        } 
```

# javascript - 选中一个复选框 选中所有复选框

> ID：10073554
> 
> 赞同：0
> 
> 时间：2012-04-09T12:58:41.070
> 
> 标签：javascript, jquery, asp.net

如果选中一个复选框，我想检查所有其他复选框。我的代码

```
<tr>
    <td class="small"><asp:CheckBox ID="chkReportModuleName" runat="server" name="report"></asp:CheckBox></td>
    <td class="particulrs"></td>
    <td class="small"><asp:CheckBox ID="chkReportAdd" runat="server" name="reports"></asp:CheckBox></td>
    <td class="small"><asp:CheckBox ID="chkReportEdit" runat="server" name="reports"></asp:CheckBox></td>
    <td class="small"><asp:CheckBox ID="chkReportDelete" runat="server" name="reports"></asp:CheckBox></td>
    <td class="small"><asp:CheckBox ID="chkReportView" runat="server" name="reports"></asp:CheckBox></td>
    <td class="small"><asp:CheckBox ID="chkReportPrint" runat="server" name="reports"></asp:CheckBox></td>
    <td class="othr"><span><input type="checkbox" id="chkReportActivity1" name="reports" /></span></td>
</tr> 
```

检查名为报告的复选框。我想检查所有名称为报告的复选框。

有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:04:31.393

好的：

```
$('input[name="report"]').click(function(){
   $('input[name="reports"]').prop("checked", this.checked);
}); 
```

单击“报告”复选框时，所有“报告”复选框将设置为与“报告”相同的状态。如果您希望它仅以一种方式工作，即，如果取消选中“报告”复选框不应取消选中其他复选框，则执行以下操作：

```
$('input[name="report"]').click(function(){
   if (this.checked)
       $('input[name="reports"]').prop("checked", true);
}); 
```

以上内容应该放在 document.ready 处理程序和/或出现在所有复选框之后的脚本块中。

如果您使用的是旧版本的 jQuery，则需要`.attr()`使用`.prop()`.

简单的演示（也展示了如何使用 document.ready）：http: [//jsfiddle.net/eHLcS/](http://jsfiddle.net/eHLcS/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T13:04:59.817

试试这个：

```
$('input[name="report"]').change(function() {
    $('input[name="reports"]').attr("checked", $(this).is(":checked"));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T13:05:36.747

用这个：

```
$(function(){

    // add multiple select / deselect functionality
    $("#selectall").click(function () {
          $('.case').attr('checked', this.checked);
    });
}); 
```

`#selectall`您的“报告”复选框的 id在哪里，并且`.case`是您希望在单击时选择的所有复选框的 cssclass`#selectall`

您还可以使用`prop`函数而不是`attr`较新版本的 jquery

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T13:56:47.880

在所有复选框的 onclick 事件中附加以下功能（名称=='report'）

```
function CheckAllReportCheckboxes()
{
    var elm = document.getElementsByTagName("input");
    for (i = 0; i < elm.length; i++) {
        if (elm[i].type == "checkbox" && elm[i].name == 'report') {
                elm[i].checked = 'checked';
        }
    }
} 
```

请记住，取消选中复选框将不起作用。

# c++ - 如何创建一个可以被多个进程访问的共享内存段

> ID：10073555
> 
> 赞同：1
> 
> 时间：2012-04-09T12:58:50.610
> 
> 标签：c++, linux

我们已经非常熟悉在单个进程中由多个线程访问的共享数据。但是我们如何才能让多个进程共享一块内存呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:02:33.747

您想要的例程是`mmap`，它接受一个文件描述符，并返回一个指向一块内存的指针。然后，多个进程都使用相同的文件名来访问它。当然，您需要协调读取/写入，以便没有人需要处理损坏的数据。

文件名可以是文件系统中实际文件的名称，也可以只是传递给`shm_open`.

实际上，这取决于您要做什么。如果您只是`fork()`为了创建附加进程，则子进程与父进程共享内存，但有某些（记录在案的）例外情况。除非和直到你打电话`exec()`。但是，使用`fork()`without`exec()`可能会导致无数头痛，因此除了简单的情况外，不应这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:56:03.573

有关详细信息，请参阅[`shm_overview(7)`](http://www.kernel.org/doc/man-pages/online/pages/man7/shm_overview.7.html)，但这里有一个快速调用函数来创建/删除匿名内存映射：

*   [`shm_open(2)`](http://www.kernel.org/doc/man-pages/online/pages/man3/shm_open.3.html)创建和/或附加到共享内存并为其获取文件描述符
*   可选[`ftruncate(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/ftruncate.2.html)，在创建时设置内存段的大小
*   [`mmap(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)将共享内存映射到您的进程地址空间
*   [`munmap(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/munmap.2.html)从进程地址空间中删除映射
*   [`shm_unlink(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/shm_unlink.3.html)删除共享内存段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T02:31:59.530

为了完整的其余答案，您还可以使用[shmget(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/shmget.2.html)来创建共享内存块，使用[shmat(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/shmat.2.html)来进行附加。这就是 Linux 版 Google Chrome 用来在其进程之间共享内存的方式。

# javascript - 为什么 $(functionName()) 不起作用？

> ID：10073557
> 
> 赞同：-1
> 
> 时间：2012-04-09T12:59:06.527
> 
> 标签：javascript, jquery

此代码按预期工作：

```
$(function() { 
    $("tr:odd").css("background-color","#dddddd");
}) 
```

这不会：

```
function temp() {
    $("tr:odd").css("background-color","#dddddd");
}

$(temp()); 
```

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T13:01:33.110

因为你应该写

```
$(temp) 
```

因为 temp 是一个回调

你在第二个片段中所做的是

```
$(temp()) // => $(undefined) since temp doesnt return anything 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T13:00:39.790

在您的第二个示例中，您正在传递`temp`函数的结果。你需要通过它的身体。所以，使用这个：

```
$(temp); 
```

代替

```
$(temp()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T13:01:02.830

jQuery 需要回调。尝试：

```
$(temp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T13:03:41.127

`$(function()`是 的快捷方式`$(document).ready`，它基本上在页面加载时运行。因此，在您的最佳解决方案中，您在加载时添加了该功能，而不是在底部添加了该功能。

试试这个：

```
function temp() {
    $("tr:odd").css("background-color","#dddddd");
};

$(function() {
    temp();
}); 
```

# iphone - flowcover 从底部的图像中删除镜像

> ID：10073560
> 
> 赞同：0
> 
> 时间：2012-04-09T12:59:15.653
> 
> 标签：iphone, ios, coverflow

我正在使用这个库在我的应用程序 [http://www.chaosinmotion.com/flowcover.html中实现coverflow](http://www.chaosinmotion.com/flowcover.html)

现在我想从图像中删除镜像，如您在上面的链接中所见。它是用opengl开发的。谁能告诉我如何从中删除镜像？

谢谢阿亚兹阿拉维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:42:51.187

在 FlowCoverView.m 文件中替换此方法将消除镜像效果。

```
- (void)drawTile:(int)index atOffset:(double)off
{
FlowCoverRecord *fcr = [self getTileAtIndex:index];
GLfloat m[16];
memset(m,0,sizeof(m));
m[10] = 1;
m[15] = 1;
m[0] = 1;
m[5] = 1;
double trans = off * SPREADIMAGE;

double f = off * FLANKSPREAD;
if (f < -FLANKSPREAD) {
    f = -FLANKSPREAD;
} else if (f > FLANKSPREAD) {
    f = FLANKSPREAD;
}
m[3] = -f;
m[0] = 1-fabs(f);
double sc = 0.45 * (1 - fabs(f));
trans += f * 1;

glPushMatrix();
glBindTexture(GL_TEXTURE_2D,fcr.texture);
glTranslatef(trans, 0, 0);
glScalef(sc,sc,1.0);
glMultMatrixf(m);
glDrawArrays(GL_TRIANGLE_STRIP,0,4);

// reflect
    //  glTranslatef(0,-2,0);
    //  glScalef(1,-1,1);
    //  glColor4f(0.5,0.5,0.5,0.5);
    //  glDrawArrays(GL_TRIANGLE_STRIP,0,4);
    //  glColor4f(1,1,1,1);

glPopMatrix(); 
```

}

# javascript - 如何将 Python 字典转换为 JavaScript 哈希表？

> ID：10073564
> 
> 赞同：8
> 
> 时间：2012-04-09T12:59:22.817
> 
> 标签：javascript, python, django, django-templates

我已经传递给模板常规 Python 字典，我需要在里面

`$(document).ready(function() {.. }`

将该 Python 字典转换为 JavaScript 字典。我试过了

```
var js_dict={{parameters}}; 
```

但我得到了错误（**'**而不是**'**并且所有字符串都以**u'**开头）。如何将 Python 字典转换为 JavaScript 哈希表？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-09T13:11:10.563

Python 和 javascript 对于如何表示字典有不同的想法，这意味着您需要一个中间表示来在它们之间传递数据。最常见的方法是[JSON](http://www.json.org/)，它是一种简单的轻量级数据交换格式。

使用[python json 库](http://docs.python.org/library/json.html)将您的 python dict 转换（或转储）为 JSON 字符串。然后在 javascript 中将 JSON 字符串解析为 javascript dict。（如果您使用的是 JQuery，则使用[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-09T13:01:29.057

您可以将其转换为 JSON 并在该模板中使用它

在你的 python 代码中做

```
import json
...
...
return {'parameters': json.dumps(parameters)} #This data goes into your template 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-26T00:10:22.667

你可以`json.dumps(parameters)`使用`mark_safe()`

```
def custom_view(request):
    ...
    return render(request, 'tmpl.html', {'parameters': mark_safe(json.dumps(parameters))}) 
```

随着`mark_safe()`我在模板中得到未转义的代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-05T03:11:56.487

我发现这对包含 [ ' ] 的字符串也有帮助

```
const convertPythonDictToJSON = function (data) {
    let d = data.replace(new RegExp(`(?<=[a-zA-Z])'(?=[a-zA-Z ])`, "g"), '__')
    d = d.replace(new RegExp("'", 'g'), '"')
    d = d.replace(new RegExp("__", 'g'), "'")
    d = d.replace(new RegExp("None", 'g'), 'null')
    d = d.replace(new RegExp("False", 'g'), 'false')
    d = d.replace(new RegExp("True", 'g'), 'true')
    return JSON.parse(d)
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-09T16:53:27.557

正如其他人已经建议的那样，在您的视图中将您的字典转换为 JSON，然后将 JSON 传递给模板上下文确实是您最好的方法，但是如果您想在模板中将其保留为 python 字典，您可以；你只需要手动创建 javascript 版本（即你不能只是用 dump 它`{{ parameters }}`）

```
<script>
    var js_dict = {
        {% for k, v in parameters %}
        "{{ k }}": "{{ v }}"{% if not forloop.last %},{% endif %}
        {% endfor %}
    }
</script> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-13T10:09:53.367

一个受 Chris Patt 下面回答启发的工作示例（注意区别）：

```
 42     var js_dict = [
 43         {% for k, v in parameters.iteritems %}
 44             ["{{ k }}","{{ v }}"] {% if not forloop.last %},{% endif %}
 45         {% endfor %}
 46     ]; 
```

在 Django 中处理模板中的变量时，默认的 python 的 json 库似乎对我不起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-29T04:15:11.383

您不需要发送字典。

这是我如何实现的：

**视图.py**

```
def mess_opi(request):
    data = Opi_calculated.objects.all()

return render(request,'hab_app/opi_student_portal.html', {'data': data}) 
```

**我的模板（对于 morris.html）：**

```
data: [{% for item in data %}
    { "y": '{{ item.hostelName }}', "a": '{{ item.opi_value }}' }{% if not forloop.last %},{% endif %}
{% endfor %}], 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-11T13:24:25.380

如何通过在模板页面上传递对象而不是从 py 文件传递​​字典来处理这种情况，并且我在模板本身上创建了所需的字典。像：

在我的 py 上：

```
def abc(request): 
     conf = assessment_master.objects.all()
     return render(request, "enter_scheme.html", {'conf':conf}) 
```

在我的 django 模板上：在我的脚本标签中：

```
<script>
           var conf_dict_list = {};
           {% for obj in conf_dict_list %}
               conf_dict_list["{{ obj.short_name }}"] = "{{ obj.select }}"
           {% endfor %}

            alert(JSON.stringify(conf_dict_list));
            // alert('key' in conf_dict_list); to check key is present in dict

</script> 
```

# php - CakePHP-2.0，我如何上传用户资料的图片？

> ID：10073572
> 
> 赞同：-2
> 
> 时间：2012-04-09T13:00:03.663
> 
> 标签：php, cakephp, upload, cakephp-2.0, cakedc

我使用过 CakeDC 用户插件。我需要为用户上传/添加个人资料图片。

我怎样才能做到这一点？

任何人都可以发布代码以上传图片吗？

[http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)

我添加了这个，但我只有一个按钮。

```
echo $this->Form->create('Document', array('enctype' => 'multipart/form-data'));
echo $this->Form->file('Document.submittedfile');
echo $this->Form-end(); 
```

如何设置/获取上传文件的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:11:53.293

无论您使用什么框架，这都适用于 PHP。

[http://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

PD：我建议下一次，试着在你的问题中更具体一些。

# python - 多序列比对（最长公共子序列）？

> ID：10073577
> 
> 赞同：4
> 
> 时间：2012-04-09T13:00:21.877
> 
> 标签：python, objective-c, perl, lcs, sequence-alignment

好的，这就是我想要做的：

获取两个以上的字符串并“对齐”它们（没有 DNA/RNA 序列等，只是常规字符串，每个字符串都不像 1000 个项目）

我已经完成了一些成对对齐（对齐两个字符串）的工作，但是当我尝试对齐多个字符串时，“间隙”给我带来了一些问题。

**示例*（我目前正在测试的一个）*：**

```
ABCDEF
ABGHCEEF
AJKLBCDYEOF

AB--CDEF
ABGHCEEF
=======================
AB--C-EF

A-B--C--E-F
AJKLBCDYEOF
=======================
A----C--E-F 
```

**还有另一个（更具说明性的）示例：**

```
http://nest.drkameleon.com
http://www.google.com
http://www.yahoo.com

http://nest.drkameleon.com
http://-www.--google--.com

=======================
http://----.------le--.com

http://----.------le--.com
http://-www.-----yahoo.com

=======================
http://----.----------.com 
```

**我目前在做什么：**

*   对字符串进行排序（较长的字符串在列表中排在第一位）
*   对齐第一对：AB 并得到结果（比方说`R1`）
*   然后对齐第二对：`R1`和`C`（结果`R2`）
*   然后对齐第三对：`R2`和`D`
*   等等...

那么你的想法是什么？我怎么能去呢？有没有更好的办法？（当然，必须有……）

我宁愿在 Perl/Python 或类似的东西中这样做，但是任何类型的代码/参考都会受到欢迎！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:18:19.577

我认为您可以将此问题转换为更一般的字符串*差异*问题而不是字符串*对齐*问题。考虑如何使用 GNU`diff`来查找两个文件之间的差异，并使用与执行 N-way 相同的算法`diff`。

我不确定这种方法的时间/内存复杂性是否符合您的需求，但您至少可以这样考虑问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:46:38.963

有一种基于 Levenshtein 算法的算法来计算最长的公共序列，带有可选的空格。不确定这是否有帮助。

# javascript - 提示文本没有被删除

> ID：10073582
> 
> 赞同：0
> 
> 时间：2012-04-09T13:00:38.537
> 
> 标签：javascript, jquery

[http://jsfiddle.net/udit_sharma/GFknc/](http://jsfiddle.net/udit_sharma/GFknc/)

我创造了这个小提琴。它有一个输入框，它有提示文本。当我专注于这个输入框时，它的提示文本正在被正确清除。当我专注于这个输入框提示时，如果用户没有输入任何内容，则会再次显示文本。

但是有一个问题。假设您现在专注于输入框并单击浏览器中的另一个选项卡，如果您再次回到这个小提琴，请注意提示文本在离开此页面时显示为空。并且在单击输入框时也不会清除它。?

所以我发现的问题是当我点击另一个选项卡时，onblur 没有被调用，因此变量“valueChanged”没有被设置为假。因此，在再次聚焦时，它不会清除默认的提示文本值。

所以我不明白为什么没有调用 onBlur。如果有人对此有所了解，请告知或有其他方法可以执行此功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:30:31.363

看起来 Chrome 正在为文本框触发两次 onblur。我能够通过将 blur 事件设为命名函数并在 focus 期间绑定 blur 来解决此问题`addOptionInputEle.off('blur').on('blur', onAddOptionBlur);`。然后，在 onAddOptionBlur 中，我创建了一个循环来取消绑定模糊处理程序的所有实例。

```
while(addOptionInputEle.data('events').blur)
{
    addOptionInputEle.off('blur');
} 
```

注意：未在 chrome 以外的任何地方进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:06:33.637

你可以试试这个：

```
<input type="text" name="placeHolder" placeholder="hy i'm a place holder" /> 
```

它是一个 html5 属性，因此，您可以在`<!DOCTYPE html>`html 文件的顶部添加 。

# java - 创建支持 UTF-8 的文件

> ID：10073589
> 
> 赞同：0
> 
> 时间：2012-04-09T13:01:05.870
> 
> 标签：java, file, csv, utf-8

> **可能重复：**
> [如何用 Java 编写 UTF-8 文件？](https://stackoverflow.com/questions/1001540/how-to-write-a-utf-8-file-with-java)

我想使用java创建一个csv文件并写入支持UTF-8的文件。我怎样才能做到这一点。？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T13:04:17.787

```
new OutputStreamWriter(new FileOutputStream("path/to/file"), Charset.forName("UTF-8")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:06:35.820

```
Writer myWriter= new BufferedWriter(new OutputStreamWriter(
    new FileOutputStream("filename"), "UTF-8"));
try {
    myWriter.write(stringdata);
} catch(Exception e){
e.printStacktrace();
} 
```

# touch - Sencha Touch 2 - 将基本帐户变成高级帐户

> ID：10073590
> 
> 赞同：0
> 
> 时间：2012-04-09T13:01:09.713
> 
> 标签：touch, in-app-purchase, versioning, extjs, sencha-touch-2

我目前正在通过 sencha touch 2 + phonegap 开发应用程序。我的问题是，应该有一个基本版本的应用程序，但是，如果我想让它升级我的帐户怎么办？有没有办法在 sencha touch 上实现这个功能。如果是这样，我该怎么做。问题是，如果它是一个 android 应用程序，它会自动转到 google play，以便您可以购买，但在这种情况下，我不知道该怎么做。

希望阙问题足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:29:45.800

据我所知，您不能为您的应用创建不同的“离线”版本，例如：免费版、具有不同代码和功能的商业版，因为在这种情况下，您的语言是 Javascript。

但是，如果您的应用程序往往是 Web 服务，您可以使用服务器端授权来执行此操作。

# c++ - C++：const static DEBUG 和 if 语句，实际的执行时间开销是多少？

> ID：10073595
> 
> 赞同：0
> 
> 时间：2012-04-09T13:01:38.977
> 
> 标签：c++, debugging, compiler-construction

在学校里，我经常被告知预处理器语句很容易出错，因为您定义的字符串，例如：

```
#define PI 3.1415926 
```

在代码中的每个位置都被替换，当变量名包含字符串时会导致奇怪的替换`PI`。

因此，在调试时，我会避开以下方法：

```
#define _DEBUG
...
#ifdef _DEBUG
    // debug code
#endif
... 
```

但坚持使用它会“更安全”：

```
const static bool DEBUG = true
int main()
{
    ...
    if(DEBUG){ /* debug code*/ }
    ...
} 
```

这很好用，但我想知道，与预处理器语句方法相比，这种方法的运行时开销是什么？使用预处理器方法，一切都发生*在*编译之前，因此不会出现运行时开销。

我知道一个简单的`if`-statement 的开销几乎可以忽略不计，但是当它深入到一些运行大量时间的嵌套循环中时，这并不成立（小事加起来就是大事）。

`DEBUG`编译器是否识别出事实`const static`并将其*硬编码*到可执行文件中，已经在编译时启用或禁用调试代码？让我怀疑的是，前几天，在处理一些不相关的代码时，编译器警告我代码的某些部分已经过时，因为`if`围绕它的 -statement 永远不会成为真的（如果我没记错的话）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:05:38.803

不可能给出硬性保证：这取决于每个单独的编译器如何处理您提供给它的代码。

但是，任何现实世界的编译器都会为您优化这一点。它是现有的最简单、最微不足道的优化之一，即使您禁用优化，大多数编译器也可能会这样做。

为本质上的内容生成代码是没有意义的`if (true)`。

所以在运行时应该有零开销。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T13:06:29.503

如果编译器可以静态（在编译时）确定它永远不会运行，则标准中没有任何内容说编译器不能完全省略一段代码。

另一方面，标准中也没有任何内容说编译器*必须*进行优化（在一般情况下）。

所以如果你给你的编译器足够的信息，并打开它的优化特性，它很可能会完全消除这些分支。但唯一可以确定的方法是查看生成的代码。

对于像这样的“微不足道的”调试启用代码，大多数现代编译器将在大多数情况下完全消除死块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T14:41:02.503

> 在学校里，我经常被告知预处理器语句很容易出错，因为您定义的字符串，例如：
> 
> #define PI 3.1415926
> 
> 在代码中的每个位置都被替换，当变量名包含字符串 PI 时会导致奇怪的替换

不，`PI`只替换整个单词 (token) `PI`，而不是在另一个标记内。例如`myPI`不展开`PI`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T16:54:33.787

这是一个细节，但由于 DEBUG 现在是一个 const bool，你应该用小写字母写它：

```
const static bool debug = true; 
```

大写名称保留给预处理器宏。

# xaml - 尝试使用 Silverlight Path 元素创建十字标志

> ID：10073596
> 
> 赞同：1
> 
> 时间：2012-04-09T13:01:47.313
> 
> 标签：xaml, silverlight-4.0, shapes

这是我到目前为止写的，但这不起作用。第一条线段可以，从 (0,0) 到 (20,20) - 从左上角到右下角的对角线。但是，第二条线段不是从右上角到左下角的对角线。

我想，我不知道这个元素的语义。

请告诉我如何纠正这个问题？

```
<Path Stroke="White" StrokeThickness="3">
<Path.Data>
<GeometryGroup>
<LineGeometry StartPoint="0,0" EndPoint="20,20" />
<LineGeometry StartPoint="20,0" EndPoint="0,20" />
</GeometryGroup>
</Path.Data>
</Path> 
```

这就是它所创造的：-

![尝试创建十字标志](../Images/190ba98c1e22f150d05910a0f079363e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T17:24:05.867

将您的路径放在视图框中，使其缩放到按钮的大小。例如

```
<Grid>
    <Button Height="23">
        <Viewbox>
                <Path Stroke="White" StrokeThickness="3">
                    <Path.Data>
                        <GeometryGroup>
                            <LineGeometry StartPoint="0,0" EndPoint="20,20" />
                            <LineGeometry StartPoint="20,0" EndPoint="0,20" />
                        </GeometryGroup>
                    </Path.Data>
                </Path>
        </Viewbox>
    </Button>
</Grid> 
```

或者

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <Button HorizontalContentAlignment="Left">
        <StackPanel Orientation="Horizontal">
            <Viewbox>
                <Path StrokeEndLineCap="Triangle" StrokeStartLineCap="Triangle" 
                      Stroke="White" StrokeThickness="3">
                    <Path.Data>
                        <GeometryGroup>
                            <LineGeometry StartPoint="0,0" EndPoint="20,20" />
                            <LineGeometry StartPoint="20,0" EndPoint="0,20" />
                        </GeometryGroup>
                    </Path.Data>
                </Path>
            </Viewbox>

            <TextBlock Margin="5,0,0,0" VerticalAlignment="Center" Text="Press me"/>
        </StackPanel>
    </Button>
</Grid> 
```

# android - SurfaceView 的多线程

> ID：10073598
> 
> 赞同：0
> 
> 时间：2012-04-09T13:02:11.717
> 
> 标签：android, multithreading, surfaceview

我能够在 android 中使用 SurfaceView 显示单个视频。现在我想使用 SurfaceView 显示多个视频。所以，我的问题是我应该为多个视频创建多个 SurfaceView 还是单个 SurfaceView 可以是多线程的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:52:40.860

对于每个视频，我都会有一个单独的表面视图，每个视频都有自己的线程。注意多线程的内存泄漏

# silverlight - Silverlight MSBuild 任务 - Xap 复制到 ClientBin 后执行命令行

> ID：10073600
> 
> 赞同：1
> 
> 时间：2012-04-09T13:02:27.183
> 
> 标签：silverlight, command-line, msbuild

我有一个 Silverlight 项目，安排如下：

*   例子
    *   银光
        *   垃圾桶

            *   调试
    *   示例代码
        *   {多个子目录}
*   Silverlight.Web
    *   垃圾桶
        *   调试
            *   客户端
                *   Silverlight.Web.xap

{Multiple Sub Directories} 下的代码包含在 silverlight DLL 中并已编译，但是我还想将这些文件作为“内容”包含在 xap 文件中。想想 .NET 控件的演示应用程序，它向您展示了一个演示以及实现它的 C#/xaml 代码。这就是我想要做的。

*   我不能选择包含作为内容，因为它们已经包含在编译中
*   我不能将文件包含两次并编译一个并包含另一个，因为 VS2010 不会让你这样做。

我想在输出 xap 文件中包含 Examples/Silverlight/ExampleCode 文件夹下的所有文件/文件夹。为了实现这一点，我尝试了 Silverlight.Web 项目的构建后事件。语法如下：

```
"$(SolutionDir)..\Lib\7Zip\7z.exe" a  -tzip 
    "$(ProjectDir)ClientBin\Silverlight.Web.xap" 
    "$(SolutionDir)Examples\Silverlight\Bin\Debug\ExampleCode" 
```

现在，如果我在控制台窗口中执行它，它会完美运行。xap 文件已更新。但是，如果我从 Silverlight.Web 中的构建后事件执行它，则没有任何反应（没有失败，只是没有）。

我假设在创建 xap 文件*之前触发了构建后事件。*

有谁知道在将 xap 文件复制到 ClientBin*后如何使用参数运行 MSbuild 任务或命令行构建后事件？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T22:27:30.960

您可以通过将文件添加到Silverlight 项目`XapFilesInputCollection`的目标来解决此问题。`AfterCompile`但是请注意，在 Visual Studio 中编译时，直接在项目中包含 bin 文件夹可能会导致访问被拒绝错误。

```
<Target Name="AfterCompile">
  <ItemGroup>
    <XapFilesInputCollection Include="$(SolutionDir)Examples\Silverlight\Bin\$(Configuration)\ExampleCode"/>
  </ItemGroup>
</Target> 
```

# c# - 如何使用 ListView 中的类对项目进行排序？

> ID：10073605
> 
> 赞同：0
> 
> 时间：2012-04-09T13:02:52.670
> 
> 标签：c#, javascript, jquery, asp.net

我有一个`ListView`. 在里面我`<table>`用作项目模板。我想使用`<td>`类名对项目进行排序。

我怎样才能做到这一点？这应该适用于按钮点击。

```
<asp:ListView ID="lstvRCGroupSource" runat="server" ViewStateMode="Disabled">
    <LayoutTemplate>
        <ul id="list3" class="conn" style="width: 90%; height: 171px;">
            <asp:PlaceHolder runat="server" ID="itemPlaceholder"></asp:PlaceHolder>
        </ul>
    </LayoutTemplate>
    <ItemTemplate>
        <li class="add" id="l3">
            <table id="tbl" style="width: 100%;">
                <tr class="mytr" style="width: 100%;">
                    <td class="border1" style="width: 50%;"><%# Eval("code") %></td>
                    <td class="border2" style="width: 50%;"><%# Eval("regon_name") %></td>
                </tr>
            </table>
        </li>
    </ItemTemplate>
</asp:ListView> 
```

```
function sortUnorderedList(ul, sortDescending) {
    if (typeof ul == "string")
        ul = document.getElementById(ul);

    var lis = ul.getElementsByTagName("li");
    var vals = [];

    for (var i = 0, l = lis.length; i < l; i++)
        vals.push(lis[i].innerHTML);

    vals.sort();

    if (sortDescending)
        vals.reverse();

    for (var i = 0, l = lis.length; i < l; i++)
        lis[i].innerHTML = vals[i];
}

window.onload = function () {
    var desc = false;
    document.getElementById("stCodeDSC").onclick = function () {
        sortUnorderedList("list3", desc);
        desc = !desc;
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:27:36.077

我会使用 DataGrid 或 DataGridView。它已经内置了排序机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:47:56.317

看看这个[jQuery 排序功能](http://james.padolsey.com/javascript/sorting-elements-with-jquery/)。使用您的代码应该很容易实现。

这是功能：

```
jQuery.fn.sortElements = (function(){

    var sort = [].sort;

    return function(comparator, getSortable) {

        getSortable = getSortable || function(){return this;};

        var placements = this.map(function(){

            var sortElement = getSortable.call(this),
                parentNode = sortElement.parentNode,

                // Since the element itself will change position, we have
                // to have some way of storing its original position in
                // the DOM. The easiest way is to have a 'flag' node:
                nextSibling = parentNode.insertBefore(
                    document.createTextNode(''),
                    sortElement.nextSibling
                );

            return function() {

                if (parentNode === this) {
                    throw new Error(
                        "You can't sort elements if any one is a descendant of another."
                    );
                }

                // Insert before flag:
                parentNode.insertBefore(this, nextSibling);
                // Remove flag:
                parentNode.removeChild(nextSibling);

            };

        });

        return sort.call(this, comparator).each(function(i){
            placements[i].call(getSortable.call(this));
        });

    };

})(); 
```

实现应该是这样的：

```
$("#list3 li td").sortElements(function(a, b){
    return $(a).attr("class") > $(b).attr("class") ? 1 : -1;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:28:24.127

为什么不使用 OnItemCommand：

将 LinkBut​​ton 保留在 ListView 的表中：

```
<table id="tbl" style="width: 100%;">
            <tr class="mytr" style="width: 100%;">
                <td class="border1" style="width: 50%;">
                    <asp:LinkButton ID="LinkButton1" runat="server"><%# Eval("code") %></asp:LinkButton>
                    </td>
                <td class="border2" style="width: 50%;">
                <asp:LinkButton ID="LinkButton2" runat="server"><%# Eval("regon_name") %></asp:LinkButton>
                </td>
            </tr>
        </table> 
```

在 OnItemCommand 中找到 LinkBut​​ton Click 事件：

```
protected void ListView1_ItemCommand(object sender, ListViewCommandEventArgs e)
    {
        if (e.CommandName.Equals("Code"))
        {
            // sorting code
        }

        if (e.CommandName.Equals("RegionName"))
        {
            // sorting code
        }
    } 
```

# php - 使用 php 创建迷你配置文件，上传照片时遇到问题并将其分配给每个成员

> ID：10073606
> 
> 赞同：0
> 
> 时间：2012-04-09T13:03:02.437
> 
> 标签：php, database, image, image-uploading

我正在尝试创建一个迷你个人资料，其中显示人员姓名、公司职位、电话号码、电子邮件、简历和个人资料照片的插槽。我的问题是我已经知道如何上传图像并裁剪它们，但是我狂热地搜索却无济于事，试图找出一种可以上传个人资料以链接每个用户 ID 的方法，例如。就像您的 facebook 个人资料图片如何自动链接到您的用户 ID 一样，有什么建议吗？我是否必须使用相同的数据库（Mysql）表才能这样做？或者我可以打电话给一个特定的ID吗？如果我想稍后更改同一个人资料的图片，我是否必须重新创建个人资料？或者有没有办法可以标记每个配置文件并在点击时访问每个配置文件？

```
<?php
error_reporting(0);
include('connect.php');

if(is_dir('hftpnyc/dir_thumbs') == false ){
mkdir('hftpnyc/dir_thumbs', 0744);} 

$dir_pos = mysql_real_escape_string($_POST['Dir_pos']);
$dir_name=mysql_real_escape_string($_POST['Dir_name']);
$occu=mysql_real_escape_string($_POST['Occu']);
$bio = mysql_real_escape_string($_POST['Bio']);
$pic = mysql_real_escape_string($_POST['dir_pic']);
$email = mysql_real_escape_string($_POST['email']);
$Numb = mysql_real_escape_string($_POST['num']);
$cr8 = isset($_POST['cr8']);
$errmsg = array();
$sql= mysql_query("SELECT * FROM `directors`");
$get = mysql_fetch_assoc($sql);

if($cr8){

if( $dir_pos && $dir_name && $occu){
    mysql_query("INSERT INTO `hftpnyc`.`directors` (`Positition`,`name`,`Email`,`Num`,`occupation`,`Bio`,`dir_pic`) VALUES     ('{$dir_pos}','{$dir_name}','{$email}','{$Numb}','{$occu}','{$bio}','{$encoded}')");

header('location:Directors.php');
}
}

?>

<form name="Director_create" method="post" id="form" actio="<?php echo $_SERVER['PHP_SELF']; ?>"/>
Director position: <br/> 
<input class="text_user"  id="nick" type="text" name="Dir_pos" MAXLENGTH="55"   />  

Director name:

<input  name="Dir_name" type="text" id="messagebox" />

Contact Number:
<p style="color:#F00; font-size:9px; margin-top:0px; margin-bottom:0px;">*optional*</p>

   <input  name="num" type="text" id="messagebox" />

Email Address:

<input  name="email" type="text" id="messagebox" />

Occupation:

<input  name="Occu" cols="20" class="text" id="messagebox" />

Biography:

<textarea ty  name="Bio" class="text" id="messagebox"  ></textarea>
<br/> 
<input id="send" name="cr8" type="submit" value="CREATE" /> 

</form> 
```

我有代码来显示下面每个配置文件应该回显的内容。

```
<?php
$query=mysql_query("SELECT * FROM `directors` ORDER BY  `Director_id` DESC;") ;
while ($row=mysql_fetch_assoc($query))
{

$email1 = $row['Email'];
$enc = $row['dir_pic'];
$name= $row['name'];
$posit = $row['Positition'];
$num1 = $row['Num'];
$occupation = $row['occupation'];
$Biography = $row['Bio']; 

?>

<div id="direc" style="height:10px; width:100%;margin-bottom:8px;">

<h3 class="heading" style="margin:0px auto;color:#666; border-bottom: #A3308E solid 1px;font-family: Tahoma, Geneva, sans-serif; font-size:15px"> <?php echo $posit; ?>: <?php    echo $name; ?></h3> </div>

<div class="photocase" style="width:100px; height:100px; float:left;border-width: 1px;border:solid black 1px;margin: 5px; ">
<img src="<?php echo /*This is where i want each photo*/; ?>" width="100px" />
</div>
<div  style="width:360px;height:30px; display:block;float:left;margin-top:5px; line-height:3px;">

<p>OCCUPATION: <?php echo $occupation; ?></p>
</div>    

<div  style="width:360px;height:30px; display:block;float:left;margin-top:5px; line-height:3px;">

<p align="justify">Email: <?php echo $email1; ?></p>
</div>  

<div  style="width:360px;height:30px; display:block;float:left;margin-top:5px; line-height:3px;">

<p align="justify">Contact #: <?php echo $num1; ?></p>
</div>

<div style="float:left;display:block;width:98%;height:16px;margin-bottom:0px;margin-left:1.5%; ">
<p>Bio:<?php echo $Biography;?></p>
</div>
</div>
<?php

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:14:58.800

创建一个类似于用户表的表，其中包含用户的所有典型信息。在同一个表中有一个名为 profile_pic 的列，它可能只包含图像名称或图像的整个路径。在这种情况下，您只存储图像名称，确保将所有图像上传到特定文件夹。这里的问题是随着更多用户添加到数据库中，该文件夹变得非常大。解决它的一种方法是为新的一个月自动创建一个新文件夹。稍后当您想要访问配置文件的图像时，您可以从用户创建时间的时间戳中知道该文件夹。

关于如何访问个人资料的第二个问题，它非常简单。每个表创建的基础是有一个名为 id 的键/列，它是表的主键。它当然是独一无二的。所以每个用户都被这个名为 id 的键引用。您可以在此列中放置一个自增属性。因此，每次添加新用户时，mysql 都会自动创建他的 ID 号。

现在假设用户的 id 是 43。要查看特定的个人资料，您将有一个名为 profile.php 的页面

如果请求是这样的

```
profile.phP?id=43 
```

然后从 $_GET['id']，你可以像在数据库中查询一样

```
'select * from users where id = "'.$_GET['id'].'" '; 
```

# c# - 使用 LINQ 计算 Group 中的指定列

> ID：10073607
> 
> 赞同：3
> 
> 时间：2012-04-09T13:03:09.723
> 
> 标签：c#, sql, linq, count

我得到了以下查询，它执行得很好，只是它始终具有 ResubCount = 1，而不是每个 UserId 的值。

现在：

```
ResolvedDate: Date

ResubCount = 1

UserId = UserId 
```

该查询现在从数据库返回（假设）十个结果。

我希望它是这样的：

```
ResolvedDate: Date

ResubCount = 10

UserId = UserId 
```

这是我的查询：

```
var result = (from a in _dataContext.Activities
                          where a.IsResolved && a.ResolvedDate != null
                          group a by new { a.ResolvedDate, a.UserId }
                              into agroup
                              select new
                                         {
                                             ResolvedDate = EntityFunctions.TruncateTime(agroup.Key.ResolvedDate),
                                             ResubCount = agroup.Count(),
                                             UserId = from item in agroup select new { item.UserId }

                                         }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:06:22.187

我相信 DateTime 的时间部分可能会影响分组：

```
var result = (from a in _dataContext.Activities
              where a.IsResolved && a.ResolvedDate != null
              group a by new 
              { 
                  ResolvedDate = EntityFunctions.TruncateTime(a.ResolvedDate), 
                  UserId = a.UserId 
              } into agroup
              select new
              {
                  ResolvedDate = agroup.Key.ResolvedDate,
                  ResubCount = agroup.Count(),
                  UserId = agroup.Key.UserId
              }); 
```

* * *

编辑：我有`a.ResolvedDate.Date`，但是，我不相信这是支持的。

# c++ - LPCSTR 函数的返回值变得无用

> ID：10073608
> 
> 赞同：0
> 
> 时间：2012-04-09T13:03:32.140
> 
> 标签：c++, string, function, lpcstr

我正在编写一个简单的 XOR 加密程序，然后我注意到函数的返回值不是我期望看到的那种。

我只是在我的代码中找不到问题，有人可以帮助我吗？

这是程序代码：

```
#include "windows.h"
#include "iostream"

using namespace std;

LPCSTR hasala(string original, char key){

  string changed;

  for (int temp = 0; temp < original.size(); temp++){
  changed += original[temp] ^ (int(key) + temp) % 255;
  }

  cout << changed.c_str()<<"\n\n";//works, output "acagaca"

  LPCSTR adart = changed.c_str();

  cout << adart<<"\n\n";//works, output "acagaca"

  return adart;

}

int main(){

    cout << hasala("abcdefg", 0);//doesn't work, output "||||@ER|||"...

    cout << "\n\n";

    Sleep(8000);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:04:52.343

您拥有的指针指向`std::string`堆栈上的内存 - 当`std::string`超出范围时，它会释放它，然后您读取它。你必须返回`std::string`，不是`LPCSTR`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T13:06:49.693

您正在返回`changed.c_str()`，它只是指向由`changed`. `changed`是一个局部变量，并在函数结束时被销毁，所以你最终返回一个指向不再存在的东西的指针。

直接返回 std::string `changed`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T13:06:38.807

您正在返回在堆栈上分配的局部变量。

基本上你的代码翻译成：

```
LPCSTR hasala(string original, char key){
string changed;
return changed.c_str();
} 
```

分配内存（调用者必须释放它）或返回 std::string

# ipad - 安装后如何检索 NSUserDefaults 并推送第二个视图

> ID：10073610
> 
> 赞同：1
> 
> 时间：2012-04-09T13:03:35.103
> 
> 标签：ipad, ios5, nsuserdefaults, login-control

我有一个基于 Web 的应用程序，它从我的服务器获取几乎所有的数据。`loginMethod`在我的登录视图中，我输入一些用户信息`NSUserDefaults`并创建一个对服务器的 GET 请求（我在一个名为一个新的视图控制器（我的主视图）。到这里为止一切正常，但我想在我的 AppDelegate 类中添加一个控件，如果默认值中没有数据（意思是，如果是第一次）我想显示登录视图控制器，如果有我想要保存的数据显示主菜单。我尝试了几种方法，但总是失败。这是我的代码：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
//uName, serve1r and pasword are my user defaults
        NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];
         uName   = [defaults objectForKey:@"kUsername1"];
         serve1r = [defaults objectForKey:@"kServer1"];
         pasword = [defaults objectForKey:@"kPassword1"];
        self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
        if([uName isEqualToString:@""]){
            //BNT_DetailViewController is my login class
         detailViewController1 = [[[BNT_DetailViewController alloc] initWithNibName:@"BNT_DetailViewController" bundle:nil] autorelease];
            navigationController = [[[UINavigationController alloc] initWithRootViewController:detailViewController1] autorelease];
            self.window.rootViewController = self.navigationController;
            [self.window makeKeyAndVisible];
            application.applicationIconBadgeNumber=0;}
        else{
            //controller is an instance of MainMenu class
            controller = [[[MainMenu alloc] initWithNibName:@"MainMenu" bundle:nil] autorelease];
            navigationController = [[[UINavigationController alloc] initWithRootViewController:controller] autorelease];
            self.window.rootViewController = self.navigationController;
            [self.window makeKeyAndVisible];
            application.applicationIconBadgeNumber=0;
        }
        return YES;
    } 
```

**编辑**它不会崩溃，但会显示黑屏。保存值没有问题

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-09T13:15:53.500

认为如果值不存在则方法 objectForKey 返回 nil 而不是空的 strigna，然后假设到达时不会检查第一个条件。

# emacs - ECB：截断符号定义缓冲区中的行

> ID：10073618
> 
> 赞同：2
> 
> 时间：2012-04-09T13:03:59.417
> 
> 标签：emacs, cedet, emacs-ecb

Emacs ECB 2.40 有一个名为 的布局`left-symboldef`，它有`*ECB Symboldefinition*`缓冲区，我想设置

```
(setq truncate-lines nil) 
```

那里。我浏览了自定义组：

```
M-x customize-group ecb-symboldef 
```

它没有这样的选择。但它提到了钩子。所以我尝试了：

```
(add-hook 'ecb-symboldef-buffer-sync (lambda ()
                                   (setq truncate-lines nil)
                                   )) 
```

它不起作用。比我试过的：

```
(if (string= (buffer-name) "*ECB Symboldefinition*") (setq truncate-lines nil)) 
```

但这也无济于事。实际上当我去`*ECB Symboldefinition*`缓冲区做

```
(setq truncate-lines nil) 
```

手动 - 它也只能工作一段时间。所以必须有某个变量的默认值。

# c# - DataFormatString 将小数四舍五入到更大的值

> ID：10073619
> 
> 赞同：0
> 
> 时间：2012-04-09T13:04:02.660
> 
> 标签：c#, asp.net, .net, decimal, rounding

`DataFormatString="{0:F2}"`在我的 ascx 页面中，值为**0.0001**的结果为“ **0.00** ”，而我需要的是“ **0.01** ”，即从零四舍五入。是否可以在 asp.net 中使用 DataFormatString 实现，或者我应该使用一些自定义舍入方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:06:28.070

您无法通过任何类型的舍入来实现这一点。2 位数的 0.0001 将始终变为 0.00 。

如果你真的想要这个，你需要编写一个转换方法。先写出规格。

DataFormatString 建议使用数据绑定控件，因此您可能需要一个额外的（计算的）列，例如 `r = (v < 0.01 && r > 0.0) ? 0.01 : v;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:57:33.960

你可以试试这个：

```
float fno=2.67f;
int no=Convert.ToInt32(fno);

//using Math.Round Function
decimal d=Math.Round(Convert.Toint64(fno));

//if we want after point 2 decimal then
decimal d=Math.Round(Convert.Toint64(fno),2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-26T19:59:09.070

```
 /// <summary>
        /// Formats a number using a format string without rounding.
        /// </summary>
        /// <param name="value"></param>
        /// <param name="formatString"></param>
        /// <returns></returns>
        public static string Format(object value, string formatString)
        {
            double val;

            if (!Double.TryParse(value.ToString(), out val))
            {
                return "";
            }

            // Special handling for decimals
            if (formatString.Contains("."))
            {
                int multiplier = (int)Math.Pow(10, getDecimalPlaces(formatString) + 1);

                // Handle percentage
                if (!formatString.Contains('%'))
                {
                    multiplier /= 100;
                }

                return (Math.Truncate(val * multiplier) / multiplier).ToString(formatString); // prevent rounding by truncating
            }

            return val.ToString(formatString);
        } 
```

# javascript - 在 jqPlot 图表上添加鼠标悬停

> ID：10073620
> 
> 赞同：1
> 
> 时间：2012-04-09T13:04:11.720
> 
> 标签：javascript, jquery, charts, jqplot

默认情况下，当我们将鼠标悬停在 jqplot 图表的任何区域上时，它会改变颜色 - 这很好。但我希望在悬停时它应该显示它的价值。例如，我在图表上有 2 个区域：

1.  标签=客户项目，价值=20
2.  标签=POC，值=10

现在鼠标悬停它应该显示标签以及值。例如它应该显示为

> 客户项目：20

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T20:58:14.217

这是一个利用标签只是文本 div 的事实的 hack：

```
previousPoint = null;
$('#chartdiv').bind('jqplotDataMouseOver', function (ev, seriesIndex, pointIndex, data) { 
    var labels = $('#chartdiv .jqplot-data-label');
    if (previousPoint != null)
    {
       labels[previousPoint['idx']].innerHTML = previousPoint['data'][1]+'';               
    }
    labels[pointIndex].innerHTML = data[0] + ": " + data[1];
    previousPoint = {'idx':pointIndex, 'data':data};
}); 
```

[在这里](http://jsfiddle.net/larsenmtl/c2PmK/2/)工作小提琴。记得缓存 jqplot 文件。

# jquery - 完全删除 JQuery tinyMCE

> ID：10073625
> 
> 赞同：5
> 
> 时间：2012-04-09T13:04:49.490
> 
> 标签：jquery, tinymce

我已经像这样初始化了 tinyMCE：

```
$('#text').tinymce({
    // Location of TinyMCE script, optional, already loaded in page.
    script_url : '../adminContent/js/tiny_mce/tiny_mce.js',

    // General options
    theme : "advanced",
    plugins : "table,advimage,advlink,iespell,inlinepopups,preview,contextmenu,paste,visualchars",

    // Theme options
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,forecolor,|,justifyleft,justifycenter,justifyright,justifyfull,formatselect,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image",
    theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,removeformat,cleanup,code,|,preview,tablecontrols,|,hr,visualaid,|,charmap,iespell",
    theme_advanced_buttons3 : "",

    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_resizing : true
}); 
```

上面的代码完美运行。问题是当我尝试删除 tinyMCE 时。

我的删除代码是：

```
$('#text').tinymce().execCommand('mceRemoveControl', false, 'text'); 
```

我也试过：

```
$('#text').remove(); 
```

和

```
$('#text').tinymce().remove(); 
```

第一个似乎没有做任何事情。最后两个给了我这个错误：

> 未捕获的 ReferenceError: t 未定义

尽管 HTML 文档加载了 tinymce，但我正在加载另一个脚本：

```
$.getScript(viewPath + '/mod/adminContent/js/editContent.js', function(){
    initEditContent(popup);
}); 
```

popup 是对加载 tinymce 的弹出窗口的引用。它只是一个使用 jquery 创建的 div。使用 jquery ajax 加载 div 的内容。

editContent.js 看起来像这样：

```
var contentID;
function initEditContent(popup){
    contentID = $('#contentID').val();

    tinyMCE.execCommand("mceAddControl", true, 'text');

    setTimeout(reposition, 50);
    setTimeout(reposition, 150);
    setTimeout(reposition, 250);

    // Submit form
    $('#editTextForm').ajaxForm(
    {
        // Before submit
        beforeSubmit: function(){
            //setPopupMessage(popup, '<div id="loading"><img src="../../img/loading.gif" />&nbsp;Please wait...</div>');
        },

        // Once submit completed
        success: function(responseText){
            tinyMCE.execCommand("mceRemoveControl", true, 'text');
            //closePopup(popup);

            // Update button with new data
            $('#' + contentID).html(responseText);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T18:35:58.647

从 3.5b3 版开始，这看起来像是 tinyMCE 的问题。它适用于版本 3.5b2。

请参阅[我的小提琴](http://fiddle.tinymce.com/Xpbaab/2)示例。

您会注意到它可以正常加载和卸载。但是将版本更改为edge或3.5b3，卸载时会出现错误。

正如[tinyMCE 错误网站](http://www.tinymce.com/develop/bugtracker_view.php?id=5136)所述：

> **问题描述**：
> 
> 第 13518 行出现 Javascript 错误。未定义 t。
> 
> **重现步骤**：
> 
> 1.  调用 tinyMCE.execCommand('mceRemoveControl', false, idOfTextarea);
> 
> **问题**：
> 
> 在 3.5b3 中，您将 t 重命名为 self，但没有在同一行中重命名 used 变量来获取文档。
> 
> **解决方案**：
> 
> 将第 13518 行（在函数 hide() 中）更改为：var self = this, doc = self.getDoc();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:05:30.967

问题解决了。对于那些感兴趣的人，我在 HTML 文档中加载了 tinyMCE，然后当我需要初始化它时，我做了：

```
tinyMCE.init({
    mode : "textareas",
    // General options
    theme : "advanced",
    plugins : "table,advimage,advlink,iespell,inlinepopups,preview,contextmenu,paste,visualchars",

    // Theme options
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,forecolor,|,justifyleft,justifycenter,justifyright,justifyfull,formatselect,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image",
    theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,removeformat,cleanup,code,|,preview,tablecontrols,|,hr,visualaid,|,charmap,iespell",
    theme_advanced_buttons3 : "",

    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_resizing : true,

    oninit: function(){
        alert('tinyMCE loaded');
    }
}); 
```

每次需要 tinyMCE 编辑器时都会调用上述代码。然后我在关闭弹出窗口时将其删除，如下所示：

```
tinyMCE.remove('text'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:18:11.060

尝试

```
$('#text').tinymce().execCommand('mceRemoveControl', true, 'text'); 
```

其中“文本”是您的编辑器的 ID

```
<textarea id='text' ..... 
```

# java - subprocess.call 未按预期运行

> ID：10073628
> 
> 赞同：0
> 
> 时间：2012-04-09T13:04:56.370
> 
> 标签：java, python, bash, weka

我正在尝试通过以下代码使用 python 重复执行外部程序...

```
3 javarun='java -classpath /home/jrm6u/code/weka_dir/weka.jar'
4 java1='java'
5 java2='-classpath'
6 java3='/home/jrm6u/code/weka_dir/weka.jar'
7 weka_args='weka.clusterers.DBScan'
8 db_type='weka.clusterers.forOPTICSAndDBScan.Databases.SequentialDatabase'
9 db_dist='weka.clusterers.forOPTICSAndDBScan.DataObjects.EuclidianDataObject' 
```

...

```
28   traindir = './arff_dir/'
29   trainfile = 'of3_O_0_0.arff'
30   trainer = traindir + trainfile 
```

...

```
45       subprocess.call([java1, java2, java3, weka_args, '-E', str(eps), '-M', str(min), '-I', db_type, '-D', db_dist, '-t', trainer], shell=True) 
```

其中 eps 和 min 分别是`0.125`和`10`。

在执行我的 python 代码时，我收到以下错误：

```
Usage: java [-options] class [args...]
       (to execute a class)
or  java [-options] -jar jarfile [args...]
       (to execute a jar file)
where options include:
-d32          use a 32-bit data model if available
-d64          use a 64-bit data model if available
-server       to select the "server" VM
              The default VM is server. 
```

之后有进一步的输出。`java`这是我在进入bash shell时得到的完全相同的输出。这让我相信，不知何故， subprocess.call 并没有阅读每一个论点。是这种情况吗？我应该如何让它正确评估这个命令？

请注意，这个命令可以正确地手动输入到 shell 中，但是使用这个脚本背后的动机是让它循环遍历`min`和`eps`以及训练文件的值，以便我可以自动执行这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:42:57.410

我不认为它忽略了参数，但除非必要，否则我会尽量避免使用 Shell 参数，有时它会出现奇怪的行为（与命令行解析相关，而不是 python）。

我对Java一无所知，但我敢打赌你给了它错误的参数，输出错误没有告诉我们任何东西（除了`java`找到它并且它没有得到正确的参数，这并不意味着它没有得到任何参数）。

尝试调试您传递给 subprocess.call 的字典（即使在上一行中使用简单的 print 或`import pdb`调用来`pdb.set_trace()`获取调试器），并检查带有这些参数的命令是否按预期工作。

我知道这不是一个正确的答案，但这对于评论行来说太长了。

# python - pip 源需求版本控制

> ID：10073629
> 
> 赞同：4
> 
> 时间：2012-04-09T13:04:59.807
> 
> 标签：python, pip, easy-install

我正在使用 pip 需求文件来管理项目的 virtualenv。有一些模块要么没有在 PyPi 上定期更新，要么我需要一个开发版本。在这种情况下，pip 有一个很棒的功能可以从源代码中提取。我可以把它放在我的需求文件中：

```
hg+https://bitbucket.org/ubernostrum/django-registration@fad7080fe769 
```

这样做的问题是它每次`pip -r`运行时总是下载包。相反，我可以指定一个 egg 名称，以便它知道它已经安装：

```
hg+https://bitbucket.org/ubernostrum/django-registration@fad7080fe769#egg=django-registration 
```

我现在遇到的问题是，如果我更新 URL 中的哈希，则模块不会更新，除非我通过传递`-U`到`pip`. 这需要很长时间，因为*每个*包都在需求文件中更新。

更新存储库哈希时是否有某种方法可以增加版本号，以便 pip 知道需要更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:48:06.063

我认为最简单的做法是在鸡蛋名称中添加一个版本字符串，例如

`hg+https://bitbucket.org/ubernostrum/django-registration@fad7080fe769#egg=django-registration-1.2`

然后每当您更改哈希时都会碰撞版本字符串

# iphone - 故事板：自定义 UITableView

> ID：10073638
> 
> 赞同：0
> 
> 时间：2012-04-09T13:05:25.777
> 
> 标签：iphone, ios, xcode, storyboard, tableview

我在我的项目中使用 Storyboard。

如果我**使用**我的`h.-File`代码**将是**：

```
IImage * backgroundImage = [UIImage imageNamed:@"bg_image.png"];
UIImageView * backgroundView = [[UIImageView alloc] initWithImage:backgroundImage];
self.tableView.backgroundColor = [UIColor clearColor];
self.tableView.backgroundView = backgroundView;
self.tableView.separatorColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.2]; 
```

有没有办法在 Interface Builder 中进行这些自定义？

我猜不会。

**所以我的第二个问题是**，如果我使用代码，我怎样才能保留我在 Interface Builder 中制作的`Static cells`和？`navigation segues`仅仅省略委托方法将是无稽之谈。

那么我可以把所有东西放在一起吗？静态单元格、导航序列和自定义背景？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:56:01.183

嘿伙计，我在这里发布代码希望它对你有帮助

-（无效）创建表{

myTableView=[[UITableView alloc] initWithFrame:CGRectMake(0,132, 320, 350) style:UITableViewStylePlain];

```
myTableView.delegate=self;
myTableView.dataSource=self;
myTableView.backgroundColor=[UIColor clearColor];
myTableView.separatorColor=[UIColor clearColor];
myTableView.tag=2;
[self.view addSubview:myTableView];
[myTableView release]; 
```

现在只需通过 [self createTable] 调用此方法；

# django-admin - 删除所有 Django 管理模型的删除权限

> ID：10073643
> 
> 赞同：0
> 
> 时间：2012-04-09T13:05:42.363
> 
> 标签：django-admin

我有大约 50 个以 ModelAdmin 作为基类的管理模型。现在我想删除所有 50 个模型的删除功能。我认为有两种方法。

1.  重新定义 has_delete_permission 方法以返回 false 并删除所有 50 个模型的“delete_selected”操作（大量工作）。
2.  在 django.contrib.admin.AdminModel 中执行与上述相同的操作。这意味着更改源代码。

我不想更改源代码。他们是否有任何其他方式来做到这一点，期望以上两种方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T22:25:14.970

3\. 创建一个具有这两个调整的管理 mixin 类，并添加到现有 50 个 ModelAdmins 的基类中

4\. Monkeypatch ModelAdmin（将影响所有模型，而不仅仅是您的 50 个模型）

5\. Monkeypatch 你的管理员（如果它是你*所有*的应用程序模型，你可以遍历注册的管理员并匹配属于你的应用程序的那些）

我个人会选择 3。这些 ModelAdmin 是否还有其他共同点？添加基类/mixin 是一次性的工作，然后您可以非常轻松地进行其他更改。

PS：如果你想确保模型没有被删除，最好确保他们的默认管理器的 QuerySet 也不会被删除：[https ://stackoverflow.com/a/6459797/640759](https://stackoverflow.com/a/6459797/640759)

# c# - 带有枚举的正则表达式属性

> ID：10073644
> 
> 赞同：3
> 
> 时间：2012-04-09T13:05:47.897
> 
> 标签：c#, regex, c#-4.0, data-annotations

我的枚举值为 None，这意味着尚未选择一个值。永远不应该将任何内容保存到数据库中。

```
enum MyEnum
{
    None = 0,
    SomeValue = 1,
...
} 
```

有没有一种方法可以使用 Data annotation RegularExpression，如果选择 None 值，验证应该失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:11:12.810

您将有更好的机会`[Range(SomeValue, LastValue)]`受到约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:10:31.253

如果您的所有枚举都将 None 定义为 0，我会很想执行以下操作：

```
 [RegularExpression("[1-9][0-9]*", ErrorMessage = "None should never be saved to database.")]
 public MyEnum val { get; set; } 
```

# javascript - 如何跟踪页面上的所有 javascript 事件（移动浏览器）？

> ID：10073647
> 
> 赞同：0
> 
> 时间：2012-04-09T13:05:55.777
> 
> 标签：javascript, javascript-events

有没有办法获取给定页面上生成的所有事件的日志？例如，将事件的名称打印到控制台就足够了。

原因是要知道特定用户操作会发生什么（http://stackoverflow.com/questions/10071397/is-there-a-way-to-see-that-a-browser-window-is-minimized-while -用户是开关）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:51:51.263

如果您正在调试 Mobile Safari，请在 iOS 模拟器中运行 iOS >= 5.0 并运行[iWebInspector](http://www.iwebinspector.com/)。在 Timeline 选项卡中，您应该能够在按下记录按钮后看到浏览器触发的每个事件。

# asp.net-mvc - 自定义路线管理

> ID：10073653
> 
> 赞同：1
> 
> 时间：2012-04-09T13:06:25.700
> 
> 标签：asp.net-mvc, asp.net-mvc-3

是否可以使用自定义路由处理代码？
例如客户端请求服务器`http://server.com/api/v1/json/profile/`和我的代码调用`ApiController`，`MyAction`带有参数的操作`version=1`，，。`format=json``action=profile`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:09:15.230

像这样的东西？您必须为操作使用不同的参数名称，这样您就不会与控制器操作发生冲突。

```
.MapRoute("name", "api/v{version}/{format}/{_action}", new { controller = "ApiController", action = "MyAction" }); 
```

**EDIT**使版本按您想要的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:14:32.027

我首先将“action”参数重命名为其他名称，否则路线会变得非常混乱（也许称之为目的？）。另外，我相信类似以下的方法会起作用：

```
routes.MapRoute(
    // name of your route
    "MyRoute",

    // route template
    "api/v{version}/{format}/{purpose}",

    // default route values
    new {
        controller = "ApiController",
        action = "MyAction",
    },

    // constraints placed on parameters (make sure they are valid) 
    new {
        version = @"^\d+$",            // number only (can also include decimals)
        format = @"^(json|text|xml)$", // if you want filtering...
    }
); 
```

然后：

```
public ApiController : Controller
{
  public ActionResult MyAction(Int32 version, String format, String purpose)
  {
    throw new NotImplementedException();
  }
} 
```

# ios - 故事板转为多个视图？

> ID：10073662
> 
> 赞同：5
> 
> 时间：2012-04-09T13:06:48.300
> 
> 标签：ios, iphone, objective-c, storyboard

我在我的故事板中设置了一堆视图控制器，并有一个“下一步”按钮。

我需要这个来切换到两个不同的视图，但是我的故事板不允许这样做。例如，如果满足某些条件，则下一步按钮将转到一个视图，如果不满足，它将转到另一个视图。

任何帮助都非常感谢实现这一目标。

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-09T14:55:27.400

您需要从视图控制器创建两个 segue，而不是从按钮。在情节提要中，从视图控制器控制并拖动到您希望segue 去的地方。重复另一个segue。单击每个 segue 并为其指定唯一标识符（在此演示中，我将使用“segue1”和“segue2”）。

然后，转到启动 segues 的 ViewController。您需要为您的按钮设置一个操作。

```
-(void)buttonPressed:(UIButton*)sender{
   if(criteria met){
        [self performSegueWithIdentifier:@"segue1" sender:self];
     }
   else {
        [self performSegueWithIdentifier:@"segue2" sender:self];
   }
 } 
```

在这种情况下，Sender 是 self 因为它是导致 segue 的视图控制器，而不是直接的按钮。您还需要实现 prepareForSegue。

# ssis - smtp 连接管理器编辑器上没有“确定”按钮

> ID：10073664
> 
> 赞同：-1
> 
> 时间：2012-04-09T13:06:54.203
> 
> 标签：ssis

我正在尝试在 SSIS 中编辑发送邮件任务，但无法创建新的 SMTP 连接管理器。编辑器屏幕上没有“确定”按钮。有人知道原因吗？

![在此处输入图像描述](../Images/c315fc68aca9734ab7490420a9cc5e0e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:38:26.260

尝试在 SSIS 2008 中遵循此示例[发送邮件任务](http://sql-bi-dev.blogspot.co.uk/2010/07/send-mail-task-in-ssis-2008.html)，当我添加新的 smtp 连接时，我得到以下信息

![smtp](../Images/6a016ce2eacfa1bedfe0e62a64789bdd.png)

要附加屏幕截图，打印屏幕，粘贴/保存到 mspaint，然后使用图像按钮包含屏幕截图

![图像按钮](../Images/2d118df483d03b40724c2717987095c8.png)

# aspectj - 我如何使用 AspectJ - ajc 编织两个类文件？

> ID：10073670
> 
> 赞同：0
> 
> 时间：2012-04-09T13:07:12.763
> 
> 标签：aspectj

我想用AspectJ-ajc来编织两个类文件，即我想实现字节码编织。

Hello.class //它是一个java类文件

AspectHello.class // 它是一个切面类文件

我如何在命令行上实现它？

提前致谢

杨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:04:20.577

所以它应该是这样的：

```
ajc -inpath <path to Hello.class> -aspectpath <path to AspectHello.class> -d <path of output directory> 
```

# emacs - 在emacs的指定窗口中打开文件

> ID：10073673
> 
> 赞同：3
> 
> 时间：2012-04-09T13:07:37.460
> 
> 标签：emacs, dired

如何在 emacs 中指定一个用于打开新文件/缓冲区的窗口？

当我打开一个文件时，比如说使用`o`命令，它会在一个新窗口中打开。但我希望这个文件在我指定的窗口中打开。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T18:39:01.993

```
(defun dired-window () (window-at (frame-width) 1))

(eval-after-load 'dired
  '(define-key dired-mode-map (kbd "o")
     (lambda ()
       (interactive)
       (let ((dired-window (dired-window)))
         (set-window-buffer dired-window
                            (find-file-noselect 
                             (dired-get-file-for-visit)))
         (select-window dired-window))))) 
```

# liferay - 如何隐藏 Liferay 5.2.3 留言板限制类别？

> ID：10073677
> 
> 赞同：0
> 
> 时间：2012-04-09T13:07:53.733
> 
> 标签：liferay

我想隐藏受限类别而不是红色且不可点击的选项。我认为 Liferay 5.2.3 中没有用于隐藏受限类别的 GUI 选项。谁能建议我在代码中可以改变什么来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:28:25.540

[在此链接http://issues.liferay.com/browse/LPS-8344](http://issues.liferay.com/browse/LPS-8344)的帮助下，我找到了一个解决方案。

转到 tomcat-6.0.18\webapps\ROOT\html\portlet\message_boards\view.jsp

并更改以下行

```
if (restricted) {
    row.addText(StringPool.BLANK);
} 
```

到

```
if (restricted) {
    continue;
} 
```

我希望如果有人有更好的解决方案，那么这将发布在这里。:)

# ruby - 监控网站上的活动 SMTP 服务

> ID：10073678
> 
> 赞同：1
> 
> 时间：2012-04-09T13:07:55.447
> 
> 标签：ruby, sockets

我正在尝试检查网络服务（即 HTTP、HTTPS、TCP、SMTP、FTP、Telnet）是否已在网站上激活并正常运行而没有任何中断。我编写了以下代码，在远程端口上打开与远程主机的 TCP 连接，并检查是否可以与网站建立连接。

```
require 'timeout'
require 'socket'

def ping(host,port)
 begin
  Timeout::timeout(5) do
   s=TCPSocket.new(host,port)    
   s.close 
   return true 
   end 
  rescue Err::ECONNREFUSED
   return false
  rescue Err::Timeout
   return false
 end
end 
```

我还编写了代码来监控已经在网站上运行的 SMTP 服务。

```
smtp=Net::SMTP.start("mail.google.com",25).started? 
```

但是输出是错误的，而 gmail 支持 SMTP 服务。所以问题是：

应该如何监控网站上已经运行的 SMTP 服务？

# javascript - jVectorMap 在 onRegionClick 改变颜色

> ID：10073683
> 
> 赞同：1
> 
> 时间：2012-04-09T13:08:37.773
> 
> 标签：javascript, jvectormap

我刚刚开始使用 jVectorMap。我希望能够通过单击选择国家并保持所选国家的颜色，直到用户选择一个新国家。无法弄清楚我在这里做错了什么？

```
$(function () {
    function showSelectedCountry(event, code) {
        viewModel.selectedCountry(code);
        $('#map').vectorMap('set', 'colors', {code: '#f00' });
    }

    $('#map').vectorMap({
        hoverColor: '#f00',
        backgroundColor: '#C8C8C8',
        onRegionClick: showSelectedCountry
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T10:54:37.807

我遇到了我怀疑是同样的问题。我像你一样设置颜色，但这种颜色不会持久。事实证明 regionMouseOut 正在将“选定”颜色重置为其原始值。尝试阻止您选择的国家/地区对 regionMouseOut 的默认操作，或者在鼠标移出时再次设置颜色（我只能让后者为我工作）。

```
// Prevent selected country colour being changed on mouseOut event 
$('#map').bind('regionMouseOut.jvectormap', function(event, code){
    if( code == selectedCountry ) {
        var data = {};
        data[code] = "#0000ff";
        $("#map").vectorMap("set", "colors", data);
    }
}); 
```

我遇到的其他问题：“代码”作为字符串而不是 var 值传递。您可能需要稍微修改您的原件：

```
$(function () {
    function showSelectedCountry(event, code) {
        viewModel.selectedCountry(code);
        var data = {};
        data[code] = "#f00";            
        $('#map').vectorMap('set', 'colors', data);
    }

    $('#map').vectorMap({
        hoverColor: '#f00',
        backgroundColor: '#C8C8C8',
        onRegionClick: showSelectedCountry
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T08:56:06.883

有点晚了，但是对于那些仍在搜索的人（就像我所做的那样）[，该事件被称为](http://jvectormap.com/documentation/javascript-api-v1/jvm-worldmap/)

```
onRegionOver: function(e,code){e.preventDefault();} 
```

它不是（不再是？）`regionMouseOut`

# c# - 无法在回调方法中添加视图并在 Windows Phone 7 中出现错误“UnauthorizedAccessException”

> ID：10073685
> 
> 赞同：2
> 
> 时间：2012-04-09T13:08:44.310
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我是 Windows Phone 7 和 C# 的新手。我面临导航到新屏幕的问题。我的要求是我需要检查服务器的登录凭据，如果可以，则进入下一个屏幕。但我收到错误为**“UnauthorizedAccessException”** -“无效的跨线程访问”。.

在下面找到代码

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {     
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(new Uri(uri));
        request.ContentType = "application/x-www-form-urlencoded";
        request.Method = "POST";
        request.BeginGetResponse(ResponseCallback, request);
    }   

  private void ResponseCallback(IAsyncResult asynchronousResult) 
    {
        var request = (HttpWebRequest)asynchronousResult.AsyncState;
        var response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);

        if (response.StatusCode  == HttpStatusCode.OK)
        {
            this.NavigationService.Navigate(new Uri("/tabview.xaml", UriKind.Relative));
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:53:06.350

尽管 OP 已经解决了他的问题，[但这篇](http://social.msdn.microsoft.com/Forums/en-US/windowsphone7series/thread/594e1422-3b69-4cd2-a09b-fb500d5eb1d8/)MSDN 文章详细解释了其背后的基本原理。

# css - CSS精灵活动状态不起作用？

> ID：10073687
> 
> 赞同：0
> 
> 时间：2012-04-09T13:08:51.857
> 
> 标签：css, css-sprites

谁能帮我找出问题所在？我正在尝试使 css sprite 的活动状态起作用。

目前，它什么也没做

**HTML**

```
<ul id="nav">
    <li id="Contact"><a href="contact.html">Contact</a></li>
    <li id="Manual"><a href="manual.html">Manual</a></li>
    <li id="FAQ"><a href="faq.html">FAQ</a></li>
</ul> 
```

**CSS**

```
#nav {
    background:url("../img/nav_final.png") no-repeat;
    width: 372px;
    height: 47.5px;
    margin: 70px auto;
    margin-bottom:25px;
    padding: 0;
}

#nav li, #nav a {
    height: 47.5px;
    display: block;
}

#nav li {
    float: left;
    list-style: none;
    display: inline;
    text-indent: -9999em;
}

#Contact { width: 120px; }
#Manual { width: 140px; }
#FAQ { width: 112px; }

#Contact a:hover, #Contact a:active { background:url("../img/nav_final.png") 0px -47.5px no-repeat; }
#Manual a:hover,  #Manual a:active  { background:url("../img/nav_final.png") -118px -47.5px no-repeat; }
#FAQ a:hover,  #FAQ a:active  { background:url("../img/nav_final.png") -260px -47.5px no-repeat; } 
```

谢谢阅读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:22:42.337

:active 选择器是当您按下鼠标键时。不是当您在实际链接位置时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:29:10.413

尝试在导航内的链接上定义背景图像。`background-repeat: no-repeat`使用负定位时也会导致问题。

[这是一个简化的测试用例](http://dabblet.com/gist/2343300)

# c# - 简单的 Windows 窗体游戏中的类之间的依赖关系

> ID：10073689
> 
> 赞同：1
> 
> 时间：2012-04-09T13:08:56.853
> 
> 标签：c#, winforms, oop, dependencies, concept

我在基于 Windows 窗体的简单游戏项目中组织 clesses 时遇到概念性问题。我必须使用 Windows 窗体实现[Whack-A-Mole游戏。](http://en.wikipedia.org/wiki/Whac-A-Mole)Molehills 由复选框表示。如果选中复选框，则痣丘中有一颗痣。可以通过单击选中的复选框来杀死鼹鼠。

我设法创建`GamePlay`了包含 ia 类的类：（`GameBoard`基于`TableLayoutPanel`复选框和数组的游戏板表示），`Rules`（概率，一轮中的最大痣数，一轮持续时间等）。在`GamePlay`课堂上也有`PointsCounter`（到目前为止已经杀死了多少痣）。我的解决方案中有更多的类/结构，但在这个问题的上下文中它们并不重要。

游戏板的大小可以在配置窗口中设置，因此我在点击*开始游戏*按钮后动态地在*TableLayoutPanel上创建复选框。*复选框数组和它们的事件处理程序放置在类中。鼹鼠被杀后我必须更新（实际上我必须添加从类中调用的适当值）。但我不能在这样的类模型中。事件处理程序*复选框鼠标单击*（在类中）无法访问（在类中）。*`GameBoard``pointsForMoleKilling``Rules``PointsCounter``GamePlay`*`GameBoard`**

 **我应该如何重新组织类之间的依赖关系？
我的临时解决方案是 make`Rules`和（`pointsForMoleKilling`也`score()`来自`GamePlay`类）**static**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:58:12.383

我认为你和 Peekay 的回答是倒退的。你`GameBoard`是一个视图（游戏状态的特定表示），不应该直接依赖于`GamePlay`类，这听起来非常像一个控制器类。您也不应该将游戏模型的概念与该模型的视图（您似乎在 中所做的`GameBoard`）混为一谈。我建议您查看 MVC 模式。

如果用户想在中途保存游戏，请考虑您希望将哪些元素保存到磁盘。您可能需要`rules`为特定游戏保存 、`score`、当前`time`和 的状态`board`。这些东西是你的模型：`GameModel`有`rules`、`score`、`time`和`state`。

现在...您希望能够以某种视觉表示形式向用户显示此模型。这被称为视图。A`GameView`显示您`GameModel`使用的 Windows 窗体。它可能通过用 a 显示分数，用 a 显示`ScoreView`时间，用 a或其他分隔符`TimeView`显示棋盘来做到这一点。`BoardView`

最后，您需要响应 UI 事件（例如鼹鼠敲击，或暂停/退出游戏）。此类负责订阅 UI 事件，并通过更新模型来处理这些事件。它被称为控制器。

由于使其状态全局化而使类静态化通常不是 OO 世界中的最佳主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:05:41.670

我找到了在 C#（使用 XNA）简单游戏中设计类依赖项的好方法。
这是一种模板。它被称为**游戏状态管理，它与****[ungood](https://stackoverflow.com/users/559492/ungood)**的概念非常相似。

更多细节：

*   [create.msdn.com/en-US/education/catalog/sample/game_state_management](http://create.msdn.com/en-US/education/catalog/sample/game_state_management)
*   [nazspace.com/wp/2008/02/04/using-the-game-state-management-sample](http://www.nazspace.com/wp/2008/02/04/using-the-game-state-management-sample/)**

# java - 使用 API 的 Youtube 视频评论的最大数量？

> ID：10073690
> 
> 赞同：1
> 
> 时间：2012-04-09T13:08:58.630
> 
> 标签：java, youtube

使用什么 Java API 代码来检索超过 50 条所选视频的评论？或者这是不可能的？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:42:01.377

根据[文档](https://developers.google.com/youtube/2.0/reference)，max-results 参数的最大值是 50。但是，可以使用[start-index](https://developers.google.com/youtube/2.0/reference#start-indexsp)参数创建一个每次迭代读取 50 个项目的循环：

*   [http://gdata.youtube.com/feeds/api/videos/gzDS-Kfd5XQ/comments?v=2&alt=json&start-index=1&max-results=50&prettyprint=true](http://gdata.youtube.com/feeds/api/videos/gzDS-Kfd5XQ/comments?v=2&alt=json&start-index=1&max-results=50&prettyprint=true)
*   [http://gdata.youtube.com/feeds/api/videos/gzDS-Kfd5XQ/comments?v=2&alt=json&start-index=51&max-results=50&prettyprint=true](http://gdata.youtube.com/feeds/api/videos/gzDS-Kfd5XQ/comments?v=2&alt=json&start-index=51&max-results=50&prettyprint=true)
*   [http://gdata.youtube.com/feeds/api/videos/gzDS-Kfd5XQ/comments?v=2&alt=json&start-index=101&max-results=50&prettyprint=true](http://gdata.youtube.com/feeds/api/videos/gzDS-Kfd5XQ/comments?v=2&alt=json&start-index=101&max-results=50&prettyprint=true)
*   ...

笔记：

1.  返回的提要包含一个名为的属性，该属性`openSearch$totalResults`为您提供（大约）总结果数。或者，当您获得少于 50 个结果时，您可以退出循环。
2.  您可以使用`alt=rss`或者`alt=atom`如果您想要 XML 格式的数据
3.  `prettyprint=true`添加参数只是为了可读性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:22:02.053

根据我的研究，您可以检索的最大结果（视频/评论）似乎是 50，但不建议这样做。看[这里](https://developers.google.com/youtube/2.0/reference?hl=it-IT#max-resultssp)

# c# - 如何将嵌套组框中的单选按钮设置为与该组框外的单选按钮相同的组

> ID：10073692
> 
> 赞同：4
> 
> 时间：2012-04-09T13:09:08.617
> 
> 标签：c#, winforms, radio-button

我有winform应用程序（.NET 4.0）

有没有办法手动设置一组单选按钮？

我有四个单选按钮，其中两个在组框内，另外两个在该框外。如何将它们全部设置为同一个组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T15:13:53.417

这可能已经在另一篇文章中得到了回答，听起来是一样的：

[在 C# 中使用不同的父控件对 Windows 窗体单选按钮进行分组](https://stackoverflow.com/questions/4627314/grouping-windows-forms-radiobuttons-with-different-parent-controls-in-c-sharp)

这是公认的解决方案：

> 恐怕你必须手动处理这个......实际上并没有那么糟糕，你可以将所有 RadioButton 存储在一个列表中，并为所有这些使用单个事件处理程序：
> 
> ```
> private List<RadioButton> _radioButtonGroup = new List<RadioButton>();
> private void radioButton_CheckedChanged(object sender, EventArgs e)
> {
>     RadioButton rb = (RadioButton)sender;
>     if (rb.Checked)
>     {
>         foreach(RadioButton other in _radioButtonGroup)
>         {
>             if (other == rb)
>             {
>                 continue;
>             }
>             other.Checked = false;
>         }
>     }
> } 
> ```

编辑：这是另一个问同样问题的问题： [Radiobuttons as a group in different panel](https://stackoverflow.com/questions/5727415/radiobuttons-as-a-group-in-different-panels)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T15:17:10.477

我不确定这在 WinForms 中是否可行。

根据文档：

> 给定容器（如 Form）中的所有 RadioButton 控件构成一个组。

您可以自己创建课程

```
public class ButtonGroup {
   private IList<RadioButton> radiogroup;

   public ButtonGroup(IEnumerable<RadioButton> selection) {
      radiogroup = new List<RadioButton>(selection);
      foreach (RadioButton item in selection) {
          item.CheckedChanged += uncheckOthers;
      }
   }

   private void uncheckOthers(object sender, EventArgs e) {
      if (((RadioButton)sender).Checked) {
        foreach (RadioButton item in radiogroup) {
          if (item != sender) { item.Checked = false; }
        }
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T01:34:06.100

GroupName 是 Web.UI.RadioButton 中用于将一组单选按钮分组为一个单元的属性。所有具有相同 GroupName 值的单选按钮将组成一个组。

但是，此功能在 winforms 中不可用。

所以在winforms中对单选按钮进行分组的唯一方法是将它们放在同一个容器中（通常是一个组合框）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-09T13:26:18.993

有一个称为“验证”组的属性或类似的属性，它将所有控件分组到一个验证中。仅检查其中之一。其他的取消勾选。

# spring - 在 Spring mvc 3.1 中添加自定义 RequestCondition

> ID：10073695
> 
> 赞同：5
> 
> 时间：2012-04-09T13:09:17.677
> 
> 标签：spring, spring-mvc

我有一个 Spring mvc (3.1.1) 应用程序，我想定义超出 RequestMapping 中可用的条件。我有几件事想用它来做。

首先，如果我可以为不同的用户类型显示不同的主页，那就太好了：

```
@Controller
public class HomepageController {

    @RequestMapping(value = "/")
    @CustomCondition(roles = Guest.class)
    public String guestHome() { /*...*/ }

    @RequestMapping(value = "/")
    @CustomCondition(roles = Admin.class)
    public String adminHome() { /*...*/ }

} 
```

其次，我希望该应用程序既可用作网站又可用作 REST 服务（例如，对于移动应用程序），因此我想让网站同时访问 html 和 json 操作，并仅让服务（不同的子域）访问 json 操作（其中某种`@CustomCondition(web = true)`只匹配网站 url）

这可以用于我计划的两种用途中的任何一种吗？

我发现关于自定义条件的文档很少，但我确实找到[了一个](https://github.com/rstoyanchev/spring-mvc-31-demo)[实现自定义条件](https://github.com/rstoyanchev/spring-mvc-31-demo/tree/master/src/main/java/org/springframework/samples/mvc31/requestcondition/mvc)的示例，这可能是我想要的，但它使用一个`@Configuration`类而不是我正在使用的 XML 配置，我不想移动我的整个spring xml定义到一个`@Configuration`类。

我可以`RequestMappingHandlerMapping`在 XML 中定义 customMethodCondition 吗？

我尝试了 subclassing`RequestMappingHandlerMapping`和 override `getCustomMethodCondition`，以返回我的 custom `RequestCondition`，但它没有用 -`getMatchingCondition()`在我的情况下没有触发。

任何帮助将不胜感激！

**更新**

我读了更多，它看起来像是`RequestMappingHandlerMapping`一个新课程（从 3.1 版开始）。

在我的应用程序中发生的情况是，试图覆盖并因此重新定义`requestMappingHandlerMapping`bean 的 @Configuration 确实有效，但 url 映射（ s`@RequestMapping`中的方法`@Controller`）似乎*被处理了两次*，一次由子类处理，`ExtendedRequestMappingHandlerMapping`一次由原始`RequestMappingHandlerMapping`--first 处理自定义条件，然后再没有它。

底线是我的自定义条件被简单地忽略了。

这应该是一种高级模式，但 IMO 它应该很常见......

评论有人吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:27:48.213

Spring MVC 已经提供了一种区分 json 和 html 的机制，RequestMapping 注解采用了一个查看请求内容类型的消费者属性...

```
// REST version, Content-type is "application/json"
@RequestMapping(value = "/", consumes = "application/json")
public void myRestService() {
...

// HTML version, Content-type is not "application/json"
@RequestMapping(value = "/", consumes = "!application/json")
public void myHtmlService() {
... 
```

使用相同 url 但具有不同方法的另一种方法是使用 param 或 headers 属性...

```
// the url is /?role=guest
@RequestMapping(value = "/", param = "role=guest")
public void guestService() {

// the url is / with header role=admin
@RequestMapping(value = "/", headers = "role=admin")
public void adminService() { 
```

我认为您会想要不同的网址以确保安全。通常，使用 Spring Security 之类的东西，您会将所有管理功能放在 /admin 下，并让框架管理它们......

```
<http auto-config="true">
  <intercept-url pattern="/admin/**" access="ROLE_ADMIN" />
... 
```

这对于您的用例是否足够？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T21:19:45.337

如果您扩展了 RequestMappingHandlerMapping（例如 ExtendedRequestMappingHandlerMapping），则必须在应用程序上下文 xml 中注册这个新映射略有不同。

您不能使用`<mvc:annotation-driven/>`Spring MVC 来配置它，因为它在内部定义了它自己的 handlerMapping，您可以按照这些方式做一些事情（或按照`@Configuration`您提供的链接中的方法）：

```
<bean name="handlerAdapter" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
    <property name="webBindingInitializer">
        <bean class="org.springframework.web.bind.support.ConfigurableWebBindingInitializer">
            <property name="conversionService" ref="conversionService"></property>
            <property name="validator">
                <bean class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/>
            </property>
        </bean>
    </property>
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.StringHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.ResourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.XmlAwareFormHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"></bean>
        </list>
    </property>
</bean>

<bean name="handlerMapping" class="..ExtendedRequestMappingHandlerMapping">
</bean> 
```

这应该确保您的映射生效，并确保组件`handler method`找到适当的映射`handlerAdapter`。

# javascript - 在 JavaScript 中用前导零填充数字

> ID：10073699
> 
> 赞同：589
> 
> 时间：2012-04-09T13:09:41.360
> 
> 标签：javascript, formatting

在 JavaScript 中，我需要填充。

例如，如果我有数字 9，它将是“0009”。如果我有一个数字，比如 10，它将是“0010”。注意它总是包含四个数字。

做到这一点的一种方法是将数字减去 4 以获得我需要输入的 0 的数量。

有没有更巧妙的方法来做到这一点？

* * *

## 回答 #1

> 赞同：756
> 
> 时间：2012-04-09T13:18:28.563

## ES2017 更新

您可以使用内置的[String.prototype.padStart()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart)

```
n = 9;
String(n).padStart(4, '0'); // '0009'

n = 10;
String(n).padStart(4, '0'); // '0010' 
```

* * *

到目前为止还没有很多“光滑”：

```
function pad(n, width, z) {
  z = z || '0';
  n = n + '';
  return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;
} 
```

当您使用数字初始化数组时，它会创建一个`length`设置为该值的数组，以便该数组看起来包含那么多`undefined`元素。尽管一些 Array 实例方法跳过了没有值的数组元素，`.join()`但不会，或者至少不完全；它将它们视为它们的值是空字符串。因此，您会在每个数组元素之间获得零字符（或任何“z”）的副本；这就是为什么里面有一个`+ 1`。

示例用法：

```
pad(10, 4);      // 0010
pad(9, 4);       // 0009
pad(123, 4);     // 0123

pad(10, 4, '-'); // --10 
```

* * *

## 回答 #2

> 赞同：277
> 
> 时间：2012-04-09T13:16:22.400

```
function padToFour(number) {
  if (number<=9999) { number = ("000"+number).slice(-4); }
  return number;
} 
```

类似的东西？

*额外的难以理解但更流畅的单行 ES6 版本：*

```
let padToFour = number => number <= 9999 ? `000${number}`.slice(-4) : number; 
```

ES6 主义：

*   `let`是块作用域变量（与`var`'s 函数作用域相反）
*   `=>`是一个箭头函数，除其他外，它替换`function`并由其参数前置
*   如果箭头函数采用单个参数，则可以省略括号（因此`number =>`）
*   如果箭头函数体有一行以您开头，`return`则可以省略大括号和`return`关键字，只需使用表达式
*   为了将函数体缩减为一行，我作弊并使用了三元表达式

* * *

## 回答 #3

> 赞同：234
> 
> 时间：2012-04-09T13:13:47.633

尝试：

```
String.prototype.lpad = function(padString, length) {
    var str = this;
    while (str.length < length)
        str = padString + str;
    return str;
} 
```

现在测试：

```
var str = "5";
alert(str.lpad("0", 4)); //result "0005"
var str = "10"; // note this is string type
alert(str.lpad("0", 4)); //result "0010" 
```

[`DEMO`](http://jsfiddle.net/4RWAp/1)

* * *

在**ECMAScript 2017**中，我们有新的方法[`padStart`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart)， [`padEnd`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd) 其语法如下。

> ```
> "string".padStart(targetLength [,padString]): 
> ```

所以现在我们可以使用

```
const str = "5";
str.padStart(4, "0"); // "0005" 
```

* * *

## 回答 #4

> 赞同：70
> 
> 时间：2012-04-09T15:35:27.383

有趣的是，我最近不得不这样做。

```
function padDigits(number, digits) {
    return Array(Math.max(digits - String(number).length + 1, 0)).join(0) + number;
} 
```

像这样使用：

```
padDigits(9, 4);  // "0009"
padDigits(10, 4); // "0010"
padDigits(15000, 4); // "15000" 
```

不漂亮，但有效。

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2012-04-09T14:10:17.290

你确实说过你有一个号码——

```
String.prototype.padZero= function(len, c){
    var s= '', c= c || '0', len= (len || 2)-this.length;
    while(s.length<len) s+= c;
    return s+this;
}
Number.prototype.padZero= function(len, c){
    return String(this).padZero(len,c);
} 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2012-04-09T13:50:15.880

你可以这样做：

```
function pad ( num, size ) {
  return ( Math.pow( 10, size ) + ~~num ).toString().substring( 1 );
} 
```

编辑：这只是一个函数的基本思想，但要添加对更大数字（以及无效输入）的支持，这可能会更好：

```
function pad ( num, size ) {
  if (num.toString().length >= size) return num;
  return ( Math.pow( 10, size ) + Math.floor(num) ).toString().substring( 1 );
} 
```

这做了两件事：

1.  如果数字大于指定的大小，它将简单地返回数字。
2.  使用`Math.floor(num)`代替`~~num`将支持更大的数字。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-04-09T13:19:01.450

这并不是真正的 'slick'，但是执行整数运算比为每个 padding 执行字符串连接要快`0`。

```
function ZeroPadNumber ( nValue )
{
    if ( nValue < 10 )
    {
        return ( '000' + nValue.toString () );
    }
    else if ( nValue < 100 )
    {
        return ( '00' + nValue.toString () );
    }
    else if ( nValue < 1000 )
    {
        return ( '0' + nValue.toString () );
    }
    else
    {
        return ( nValue );
    }
} 
```

此函数也根据您的特殊需要进行了硬编码（4 位填充），因此它不是通用的。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-04-09T13:19:38.893

为了好玩，而不是使用循环来创建额外的零：

```
function zeroPad(n,length){
  var s=n+"",needed=length-s.length;
  if (needed>0) s=(Math.pow(10,needed)+"").slice(1)+s;
  return s;
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-04-09T14:17:01.863

既然你提到它的长度总是 4，我不会做任何错误检查来使这个光滑。;)

```
function pad(input) {
    var BASE = "0000";
    return input ? BASE.substr(0, 4 - Math.ceil(input / 10)) + input : BASE;
} 
```

想法：只需将'0000'替换为提供的数字......问题是，如果`input`是0，我需要对其进行硬编码以返回'0000'。哈哈。

这应该足够光滑。

JSFiddler：http: [//jsfiddle.net/Up5Cr/](http://jsfiddle.net/Up5Cr/)

# c++ - 这个数组程序有什么问题？

> ID：10073701
> 
> 赞同：-1
> 
> 时间：2012-04-09T13:09:45.417
> 
> 标签：c++, arrays, multidimensional-array, new-operator, dynamic-arrays

我在该程序的 2 个不同位置遇到了相同的错误，该程序应该创建一个 1d、一个 2d 和一个 3d 数组并存储值并同时显示它们。错误：下标需要数组或指针类型/表达式必须具有指向对象类型的错误是表达式 c[r][c][depth]

```
#include<iostream>
using namespace std;
#define ROW 5
#define COL 5
 #define DEPTH 5

int main()
{
int *a;           // 1d array
a=new int [COL];

int (*b) [COL];          //2d array
b=new int [ROW][COL];

int (*c)[ROW][COL];
c=new int [ROW][COL][DEPTH]; // 3d array

//---------------------------------------------------------------------------------

// storing values in the arrays:

for(int i=0;i<COL;i++)
{
    a[i]=i+2;
    cout << a[i];
}

// 2d array
for(int r=0;r<ROW;r++)
{
    for(int c=0;c<COL;c++)
    {
        b[r][c]=r+c+2;
        cout << b[r][c];
    }
}

// 3d array
for(int r=0;r<ROW;r++)
{
    for(int c=0;c<COL;c++)
    {
        for(int depth=0;depth<DEPTH;depth++)
        {
            c[r][c][depth]=r+c+depth+2;             //error
            cout << c[r][c][depth];                 //same error
        }
    }

}

//-------------------------------------------------------------------------------------    

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T13:17:04.447

您使用了两次变量名`c`：一次用于数组，第二次用于循环计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:54:31.730

霍华德是对的。您在嵌套的 for 循环中将 c 重新声明为整数`for(int c=0;c<COL;c++)`。

您将 c 重新声明为循环范围的 int 。您需要为循环提供不同的变量名称。

前任：

```
for(int k=0;k<COL;k++)
{
    for(int depth=0;depth<DEPTH;depth++)
    {
        c[r][k][depth]=r+k+depth+2;             
        cout << c[r][k][depth];                 
    }
} 
```

那应该编译并解决您的问题它可能有助于将来使用更有意义的变量名。

# c - 普通 C 中的通用堆栈不会正确复制结构

> ID：10073705
> 
> 赞同：1
> 
> 时间：2012-04-09T13:10:13.670
> 
> 标签：c, generics, stack, memcpy, structure

所以我在普通 C 中实现了一个通用堆栈。它应该复制不同类型的数据，包括结构。通过结构我有问题。

所以这里是栈的结构：

```
/*
 * Definite genStack as a structure.
 * Pointer elems points to the objects lying on the stack
 * The variable elemSize spiecifies the size of an element
 * The variable logLength specifies the number of actually
 * lying on the stack objects
 * The variable allocLenght specifies the allocated size
 */

typedef struct{
void* elems; 
int elemSize; 
int logLength; 
int allocLength;
}genStack; 
```

推送和弹出功能：

```
void GenStackPush(genStack *s, const void *elemAddr)
{
    /* if stack is full - allocates more memory */
    if (GenStackFull(s))
    {
        GenStackAlloc(s, s->elemSize);
    }
    memcpy((char*) (s->elems)+(s->logLength), elemAddr, sizeof(*elemAddr));
    s->logLength++;
}

void GenStackPop(genStack *s, void *elemAddr)
{
      if(GenStackEmpty(s))
      {
        fprintf(stderr, "Can't pop element from stack: stack is empty.\n");
      } else
      {
        s->logLength--;
        memcpy((void*) elemAddr, (s->elems)+(s->logLength), sizeof(s->elems[s->logLength]));
      }
} 
```

简单结构测试：

gentest.h：

```
#ifndef GENTEST1_H
#define GENTEST1_H

typedef struct {
  char* name;
  int age;
  char gender;
}person;

#endif 
```

gentest.c：

```
#include <stdio.h>
#include <stdlib.h>
#include "gentest1.h"
#include "genstacklib.h"

int main(int argc, char* argv[])
{

  genStack StructStack;
  person testPerson[5];
  person* newPerson;
    person* test;
  int i;

  newPerson = (void*) malloc (sizeof(person));

  testPerson[0].name = "Alex";
  testPerson[0].age = 21;
  testPerson[0].gender = 'm';

  testPerson[1].name = "Vanja";
  testPerson[1].age = 20;
  testPerson[1].gender = 'm';

  testPerson[2].name = "sjrgsde";
  testPerson[2].age = 11;
  testPerson[2].gender = 'w';

  testPerson[3].name = "wergsggsd";
  testPerson[3].age = 99;
  testPerson[3].gender = 'y';

  testPerson[4].name = "adaasxx";
  testPerson[4].age = 13;
  testPerson[4].gender = 'g'; 

  GenStackNew(&StructStack, sizeof(person));
    printf("sizeof(person) = %lu\n", sizeof(person));

  for (i = 0; i < 5; i++) {
    newPerson = &testPerson[i];
      GenStackPush(&StructStack, newPerson);
    printf("Pushed: %s, %d, %c\n", newPerson->name, newPerson->age, newPerson->gender);
  } 

test = (void*) malloc (sizeof(person));
test->name = "test";
test->age = 0;
test->gender = 't';
  while(!GenStackEmpty(&StructStack))
  { 
      GenStackPop(&StructStack, test);
      printf("Popped: %s, %d, %c\n", test->name, test->age, test->gender);
  }

  GenStackDispose(&StructStack);
  return 0;
} 
```

这是我得到的输出：

```
./gentest1
elemSize = 16   GenStackInitialAlocationSize = 4
sizeof(person) = 16
Pushed: Alex, 21, m
Pushed: Vanja, 20, m
Pushed: sjrgsde, 11, w
Pushed: wergsggsd, 99, y
    New size of alloc = 8
Pushed: adaasxx, 13, g
Popped: adaasxx, 0, t
Popped: wergsggsd, 0, t
Popped: sjrgsde, 0, t
Popped: Vanja, 0, t
Popped: Alex, 0, t 
```

如您所见，我可以接收姓名，但不能接收年龄或性别。我尝试了很多选项，但仍然得到 Segmentation Fault 或上面的输出。目前，上面的输出是我得到的最好的输出，但仍然不是我想要的。

问题是 - 我怎样才能得到我需要的输出？提前致谢。

为了避免一些问题： sizeof(person) = s->elemSize

它是通过创建堆栈来定义的：

genstacklib.c：

```
void GenStackNew(genStack *s, int elemSize)
{
    void* newElems;

    /* Allocate a new array to hold the contents. */
    newElems = (void*) malloc(elemSize * GenStackInitialAlocationSize);
    printf("elemSize = %d\tGenStackInitialAlocationSize = %d\n",
              elemSize, GenStackInitialAlocationSize);
    if (newElems == NULL)
    {
        fprintf(stderr, "Error with allocating the stack.\n");
        exit(1); /* Exit, returning error code. */
    }
    s->elems = newElems;
    s->elemSize = elemSize;
    s->allocLength = GenStackInitialAlocationSize;
    s->logLength = 0; /*is empty*/

} 
```

gentest.c：

```
GenStackNew(&StructStack, sizeof(person));
printf("sizeof(person) = %lu\n", sizeof(person)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:16:15.163

您的 push 函数正在复制`sizeof(*elemAddr)`，即 a `void *`，因此它具有指针的大小而不是结构的 inteded 大小`person`。所以你可能只复制前 4 个字节

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:15:12.027

你没有`elemSize`在所有相关的地方使用......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:51:12.667

如上所述，推送正在复制错误大小的数据。应该是`elemSize`。`memcpy`也覆盖了自己的数据。像这样的东西应该工作。

`memcpy((char*) (s->elems)+(s->logLength)*elemSize, elemAddr, elemSize); s->logLength++;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T15:58:21.087

```
void GenStackPush(genStack *s, const void *elemAddr) 
{
  ...     
  memcpy((char*) (s->elems)+(s->logLength), elemAddr, sizeof(*elemAddr));
                                                      ^^^^^^^^^^^^^^^^^ 
```

这是*非常*错误的；表达式的类型`*elemAddr`是`void`，这是违反约束的（`sizeof`不能在不完整类型的表达式上调用，并且`void`是不完整类型）。您将需要提高编译器的警告级别。我编写了一个测试程序来计算和`sizeof`类型的表达式，我收到了一个警告。如果我放弃我不会收到警告，但我得到的结果是 1，我很确定这*不是*a 的大小。你为什么不在这里使用？ `void *``void``gcc -pedantic``-pedantic``sizeof (void)`*`person``s->elemSize`*

 *其次，你为什么要`s->elems`投到`char *`？

**编辑**

如果我可以提供一些建议，我过去曾使用过一些通用容器，以下是我得到的经验教训：

首先，将*所有*类型感知操作（分配、解除分配、复制、比较、显示等）委托给单独的函数，这些函数通过作为参数传递给通用容器函数的函数指针调用；即，推送将被定义为

```
GenStackPush(genStack *stack, const void *data, void *(*copy)(const void *))
{
  stack->elems[++stack->logLength] = copy(data);
}
...
void *myIntCopyFunc(const void *data)
{
  const int *inputData = (const int *) data;
  int *copy = malloc(sizeof *copy);
  if (copy)
    *copy = *inputData;
  return copy;
}
...
GenStackPush(&myIntStack, &intVal, myIntCopyFunc); 
```

您的类型存在的一个问题`person`是您没有对成员进行深层复制`name`；您只是将指针值复制到堆栈中。在这种情况下，这没什么大不了的，因为您使用的是字符串文字，但是如果您使用的是 local `char []`，那么您就会遇到问题。通过为每种类型编写单独的复制函数，您可以处理这类问题，而不是尝试在容器函数本身中进行一刀切的分配。

其次，不要直接调用你的通用容器函数；在你和容器之间放置一个类型感知接口（基本上是穷人版本的函数重载）：

```
void pushInt(GenStack *stack, int intVal)
{
  GenStackPush(stack, &intVal, myIntCopyFunc);
}
...
genStack myIntStack;
...
pushInt(&myIntStack, 5); 
```

这给您带来两个好处；首先，它允许您将文字值作为参数传递（对于 type 的参数，您不能这样做`void *`）。其次，它为您提供了一种在容器上强制执行类型安全的方法。您不能以这种方式意外推送错误类型的值。

这是很多额外的工作吗？哦，是的。要使通用容器类型正常工作，必须在幕后发生很多*魔术。*如果您尝试复制与 C++`std::stack`容器类型相同的功能，您将编写*大量*代码。*

# c++ - C++ lambda 表达式中的按值捕获是否需要使用 lambda 对象复制该值？

> ID：10073709
> 
> 赞同：4
> 
> 时间：2012-04-09T13:10:31.250
> 
> 标签：c++, lambda, c++11

标准是否定义了这段代码会发生什么？

```
#include <iostream>

template <typename Func>
void callfunc(Func f)
{
   ::std::cout << "In callfunc.\n";
    f();
}

template <typename Func>
void callfuncref(Func &f)
{
   ::std::cout << "In callfuncref.\n";
    f();
}

int main()
{
    int n = 10;
    // n is captured by value, and the lambda expression is mutable so
    // modifications to n are allowed inside the lambda block.
    auto foo = [n]() mutable -> void {
       ::std::cout << "Before increment n == " << n << '\n';
       ++n;
       ::std::cout << "After increment n == " << n << '\n';
    };
    callfunc(foo);
    callfunc(foo);
    callfuncref(foo);
    callfunc(foo);
    return 0;
} 
```

使用 g++ 的输出是：

```
$ ./a.out 
In callfunc.
Before increment n == 10
After increment n == 11
In callfunc.
Before increment n == 10
After increment n == 11
In callfuncref.
Before increment n == 10
After increment n == 11
In callfunc.
Before increment n == 11
After increment n == 12 
```

标准是否需要此输出的所有功能？

特别是，如果制作了 lambda 对象的副本，则所有捕获的值也会被复制。但是如果 lambda 对象是通过引用传递的，则不会复制任何捕获的值。并且在调用函数之前不会对捕获的值进行复制，因此在调用之间会保留对捕获值的突变。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T13:36:56.103

lambda 的类型只是一个类（n3290 §5.1.2/3），具有`operator()`执行主体（/5）和隐式复制构造函数（/19），通过复制捕获变量等效于复制-将其初始化（/21）为此类的非静态数据成员（/14），并且该变量的每次使用都被相应的数据成员（/17）替换。经过这种转换，lambda 表达式仅成为该类的一个实例，C++ 的一般规则如下。

这意味着，您的代码应以与以下方式相同的方式工作：

```
int main()
{
    int n = 10;

    class __Foo__           // §5.1.2/3
    {
        int __n__;          // §5.1.2/14
    public:
        void operator()()   // §5.1.2/5
        {
            std::cout << "Before increment n == " << __n__ << '\n';
            ++ __n__;       // §5.1.2/17
            std::cout << "After increment n == " << __n__ << '\n';
        }
        __Foo__() = delete;
        __Foo__(int n) : __n__(n) {}
      //__Foo__(const __Foo__&) = default;  // §5.1.2/19
    }
    foo {n};                // §5.1.2/21

    callfunc(foo);
    callfunc(foo);
    callfuncref(foo);
    callfunc(foo);
} 
```

很明显`callfuncref`这里做了什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T13:32:31.650

我发现通过手动将 lambda 扩展为结构/类最容易理解这种行为，这或多或少是这样的（`n`按值捕获，按引用捕获看起来有点不同）：

```
class SomeTemp {
    mutable int n;
    public:
    SomeTemp(int n) : n(n) {}
    void operator()() const
    {
       ::std::cout << "Before increment n == " << n << '\n';
       ++n;
       ::std::cout << "After increment n == " << n << '\n';
    }
} foo(n); 
```

您的功能`callfunc`和`callfuncref`操作或多或少在这种类型的对象上。现在让我们检查您所做的调用：

```
callfunc(foo); 
```

这里你通过值传递，所以`foo`将使用默认的复制构造函数进行复制。中的操作`callfunc`只会影响复制值的内部状态，实际 foo 对象中的状态不会改变。

```
callfunc(foo); 
```

同样的东西

```
callfuncref(foo); 
```

啊，这里我们通过引用传递 foo，所以`callfuncref`（调用`operator()`）将更新实际`foo`对象，而不是临时副本。这将导致`n`之后`foo`被更新`11`，这是常规`pass-by-reference`行为。因此，当您再次调用它时：

```
callfunc(foo); 
```

您将再次对一个副本进行操作，但将`foo`where的副本`n`设置为 11。这显示了您的期望。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T13:12:52.727

`[&]`除非您明确地全部捕获或通过引用捕获特定变量，否则该值是通过复制捕获的`[&n]`。所以整个输出是标准的。

# c# - 将单元格位置字符串解析为行和列

> ID：10073710
> 
> 赞同：6
> 
> 时间：2012-04-09T13:10:37.117
> 
> 标签：c#, excel

我有`string col= "AB21"`这是一个excel单元格位置。

我想将其解析为`string column = "AB"`&`int row = 21;`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T13:17:55.093

```
string col = "AB21";
int startIndex = col.IndexOfAny("0123456789".ToCharArray());
string column = col.Substring(0, startIndex);
int row = Int32.Parse(col.Substring(startIndex)); 
```

当然，您应该保证输入字符串的格式正确。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T13:25:57.387

您拥有的一种选择是使用正则表达式来验证和解析输入字符串。请参阅下面的代码。

```
using System;
using System.Text.RegularExpressions;

namespace DemoRegExForStackOverflow
{
    class Program
    {
        static void Main(string[] args)
        {
            var regex = new Regex(@"(?<col>([A-Z]|[a-z])+)(?<row>(\d)+)");
            var input = @"AB12";
            var match = regex.Match(input);

            if( match != null )
            {
                var col = match.Groups["col"];
                var row = match.Groups["row"];

                Console.WriteLine("Input is: {0}", input);
                Console.WriteLine("Column is {0}", col.Value);
                Console.WriteLine("Row is {0}", row.Value);
             }
             else
             {
                 throw new ArgumentException("Invalid input");
             }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T14:41:16.060

如果这是 Excel，我会依赖 Excel，因为有效范围的定义取决于版本。与前面的答案不同，此例程将拒绝看起来像范围但不是有效范围的字符串，例如 Excel 2003、“XB21”或“AB66000”。我假设下面的函数可以转换为 C#。

```
Sub SplitRangeStg(ByVal RngStg As String, ByRef RowNum As Long, _
                                          ByRef ColNum As Long)

  Dim RngErr As Boolean

  Err.Number = 0
  RngErr = False
  On Error Resume Next
  RowNum = Range(RngStg).Row      ' Sets Err.Number if range invalid
  If Err.Number <> 0 Then
    RngErr = True
    Err.Number = 0
  End If
  ColNum = Range(RngStg).Column   ' Sets Err.Number if range invalid
  If Err.Number <> 0 Then
    RngErr = True
    Err.Number = 0
  End If
  If RngErr Then
    RowNum = 0
    ColNum = 0
    Call MsgBox(RngStg & " not recognised as an Excel range", vbOKOnly)
  End If
  On Error GoTo 0

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-10T10:24:24.617

主要是为了我自己将来的参考：

```
 public static void Parse( string address )
        {
           string sheet;
           string col;
           int row;

           int sheetLength = address.IndexOf( '!' );

           if ( sheetLength > 0 )
           {
              sheet = address.Substring( 0, sheetLength );
           }
           else
           {
               sheet = string.Empty;
           }

           ++sheetLength; //skip the ! or start at 0

           int i = sheetLength;
           StringBuilder sb = new StringBuilder( );

           for( ; i < address.Length
                   && ! Char.IsDigit( address[ i ] ) 
                ; ++i )
           {
               sb.Append( address[ i ] );
           }

           col = sb.ToString( );
           sb.Clear( );

           for ( ; i < address.Length
                    && Char.IsDigit( address[ i ] )
                 ; ++i )
           {
               sb.Append( address[ i ] );
           }

           row = Int32.Parse( sb.ToString( ) );
       } 
```

使用 IndexOfAny 的方法不是很有效，正则表达式解决方案也不是。两种解决方案也都忽略了工作表。

# java - 为什么附加 JPanel 更好？

> ID：10073719
> 
> 赞同：5
> 
> 时间：2012-04-09T13:12:01.577
> 
> 标签：java, swing, jframe, jpanel

我刚刚开始编写视频游戏，我听说在 JPanel 上进行所有绘图并将该面板附加到 JFrame 上比简单地在 JFrame 上绘图要好。我只是想知道为什么这更好？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T13:31:23.723

出于各种原因，它会更好，包括：

*   在大多数 Swing 组件中，自定义绘制是通过覆盖该`paintComponent(Graphics)`方法来实现的。顶级 Swing 容器（例如`JFrame`, `JApplet`）`JWindow`只有`paint(Graphics)`. 由于绘画的通用方法，回答的人经常忘记通用组件和顶级组件之间的这种区别，因此提出愚蠢的建议。;)
*   A`JComponent`可以添加到 a`JFrame`或 a`JApplet`或 a或`JDialog`a 中的布局约束中。就在您认为您的 GUI 完成时，客户说“嘿，这不是很好加入工具栏并作为小程序提供？” 该方法很容易适应这一点。`JPanel``JInternalFrame``JComponent`
*   正如 Richante 所解释的（完整的代码！），更容易计算绘制自定义组件所需的坐标，如果它具有首选大小，则将其`JFrame`调整为“完全正确的大小”以包含 GUI （使用`pack()`）。在添加其他组件时尤其如此。

* * *

现在，对所提供的建议有两个小分歧。

如果整个组件是自定义绘制的，最好在/组合`BufferedImage`内简单地放置一个。这是一个[绘制图像](https://stackoverflow.com/a/10055672/418556)的示例。当需要更新它时：`ImageIcon``JLabel`

1.  要求`getGraphics()`一个`Graphics`或`createGraphics()`一个`Graphics2D`
2.  将自定义绘画绘制到该图形实例
3.  处理图形实例
4.  `repaint()`在标签上调用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-09T13:14:53.947

这是进行双缓冲的一种简单方法。

让我详细说明一下。在电子游戏中，为了避免重绘造成的闪烁，显示更流畅的图形，人们通常会使用双缓冲。他们创建一个离屏表面，在其上绘制所有内容，然后一次性在屏幕上显示整个离屏表面。

![双缓冲](../Images/c3c5f6cead566f7ac7dae374a6b454a4.png)

在 Java2D 和 Swing 中，最简单的方法是在 JPanel 上绘制游戏精灵，然后将 JPanel 添加到 JFrame。

其次，通过在 JPanel 上绘制东西，您可以在 JFrame 上显示更多的 GUI 小部件和其他图形对象，而无需在游戏循环中手动绘制它们。例如按钮、菜单、其他面板，甚至其他渲染 JPanel。

第三，它允许您为您的游戏使用自动翻译的坐标。您可以绘制从左上角到右下角的所有内容，而不必担心窗口管理器的特定内容，例如窗口边框宽度、任务窗格、标题等！

![翻译坐标](../Images/122f3d2a7d0ffb0e5f2c83b071282254.png)

此外，这不仅仅是 Java 游戏程序员使用的约定。在使用带有内部主循环的库（如 GUI 工具包）编写游戏时，创建单独的*游戏板*、*渲染面板*或*图形小部件非常流行。*您可以在 Windows 窗体中使用用户窗体，在 GTK+ 中使用绘图板。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-09T13:16:24.930

JFrame 包括菜单、标题栏和边框等内容。因此，当您提到坐标时，您必须考虑这些。您可能还决定将菜单栏或其他一些组件添加到框架中。如果您的绘画全部在 JPanel 中，那么这不会改变您需要参考坐标的方式。

例如，尝试：

```
public class Test extends JFrame {

 public Test() {
   super();
   setVisible(true);
   setBounds(100, 100, 200, 100);
 }

 @Override
 public void paint(Graphics g) {
   g.fillRect(0, 0, 50, 50);
 }

 public static void main(String[] args) {
   new Test();
 }

} 
```

你会看到黑色方块不是正方形！因为 (0, 0) 是整个帧的左上角，而不是可见区域的角。

# prolog - 列出构建问题

> ID：10073720
> 
> 赞同：2
> 
> 时间：2012-04-09T13:12:07.210
> 
> 标签：prolog, clpfd

对于我的程序，我需要制作一个列表列表，每个子列表包含 2 个数字 X 和 Y 以及这两个数字的总和和乘积。到目前为止，我有以下内容：

```
genList(95, X,[]):-!.
genList(N, X,[[X,Y,Sum,Product]|Xs]):-
    Y is N+1,
    Sum is X+Y,
    Sum<101,
    Product is X*Y,
    N1 is N+1,
    genList(N1, X,Xs). 
```

这适用于我的 genList(5,5,Q) 测试用例。但是，我无法使其适用于任何起始号码。

目标是找到 sum<= 100 的每一对数字。因此，对于一个起始值，X 将找到每一对 1 < X < Y，其中 sum<=100，并用所有数字 2 遍历它-N 将给出可能对的完整列表。

对于那些感兴趣的人，我正在解决的问题是总和/乘积问题，[在这里](http://www.mathematik.uni-bielefeld.de/~sillke/PUZZLES/logic_sum_product)描述（第二页）

如果有人可以提供帮助，将不胜感激！

此外，无法使用内置的 prolog 谓词，因此执行此操作的方法很复杂，而不是使用 findall。

此谓词产生的输出的一小部分摘录如下：

[[5,6,11,30],[5,7,12,35],[5,8,13,40],[5,9,14,45],[5,10,15,50] ,[5,11,16,55],[5,12,17,60],[5,13,​​18,65],[5,14,19,70],[5,15,20,75] ,[5,16,21,80],[5,17,22,85],[5,18,23,90],[5,19,24,95],[5,20,25,100],[ 5,21,26,105],[5,22,27,110], ...

编辑：

好的，所以经过一些编辑，这是我的代码的最新版本。

我认为它非常接近，但仍有一些不太对劲的地方。

它在数字对中循环，但需要使用“;” 查看所有答案，这不是我想要的。此外，在所有答案都用完后，它会返回 false。我就是想不通。

此外，它在中间给出了一个完整的答案，但每次都会删除一个子列表，直到我只剩下最后一组对。

例如 genList(0,48,48,Q)。给我：

```
[[48,49,97,2352],[48,50,98,2400],[48,51,99,2448],[48,52,100,2496]]
[[48,49,97,2352],[48,50,98,2400],[48,51,99,2448],[48,52,100,2496],[49,50,99,2450],[49,51,100,2499]]
[[48,49,97,2352],[48,50,98,2400],[48,51,99,2448],[49,50,99,2450],[49,51,100,2499]]
[[48,49,97,2352],[48,50,98,2400],[49,50,99,2450],[49,51,100,2499]]
[[48,49,97,2352],[49,50,99,2450],[49,51,100,2499]]
[[49,50,99,2450],[49,51,100,2499]]
false. 
```

如您所见，每次都会删除一个子列表，我就是不明白为什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:31:36.163

我感觉你以错误的方式解决问题；我必须承认我真的不明白你的谓词在做什么。

> 目标是找到 sum<= 100 的每一对数字。

假设您的意思是无序的非负整数对，那就是

```
between(0, 100, Sum),
between(0, Sum, X),
Y is Sum - X,
X =< Y. 
```

然后可以用 构造所有此类对的集合（作为列表）`findall/3`。

您也可以使用 CLP(fd) 执行此操作：

```
use_module(library(clpfd)).
[X, Y, Sum] ins 0..100,
X #=< Y,
X + Y #= Sum,
label([X,Y,Sum]). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:33:56.137

您可以在此处利用 Prolog 回溯。只要说出你想要的。例如你可以说：

*   我想`X`介于`1`和之间`100`。
*   我想`Y`介于`1`和之间`min(100 - X, X)`。
*   然后我想要他们的一对

让我们看看`validPair/1`谓词是什么样的：

```
validPair(X-Y) :-
    between(1, 100, X),
    Limit is min(100 - X, X),
    between(1, Limit, Y). 
```

你可以用它来调用它

```
?- validPair(X). 
```

并使用 浏览结果`;`，或使用 构建所有匹配对的列表`findall/3`。

编辑：即使使用递归，我们也可以保留我们的语句：

*   我想`X`介于`1`和之间`100`。
*   我想`Y`介于`1`和之间`min(100 - X, X)`。
*   然后我想要他们的一对

因此，这样做的一个想法是设置一个工作者谓词：

```
validPair(Result) :-
    validPair(0, 0, Result).
validPair(X, Y, R) :-
    ... 
```

然后设置基本情况：

```
validPair(101, _Y, []) :- !. 
```

在 worker 谓词中，实现我们在某些条件下所做的语句：

```
validPair(X, Y, [SomeStuff|R]) :-
    X =< 100,
    Limit is min(100 - X, X),
    Y =< Limit,
    !,
    % we can go on and increment Y once we're finished
    validPair(X, NextY, R).
validPair(X, Y, R) :-
    % if we come here that means that Y is finished growing and
    % we have to increment X
    NextX is X + 1,
    validPair(NextX, 0, R). 
```

# apache-flex - 在 Flex 移动应用程序中使用 FXG 图形适用于 MXML，但不适用于 ActionScript

> ID：10073724
> 
> 赞同：0
> 
> 时间：2012-04-09T13:12:26.583
> 
> 标签：apache-flex, flex4.5, flex-mobile, flex4.6, fxg

我已阅读 Adob​​e 的文档[Using FXG](http://help.adobe.com/en_US/Flex/4.0/UsingSDK/WSda78ed3a750d6b8f26c150d412357de3591-8000.html)和[Embedding application assets](http://www.adobe.com/devnet/flex/quickstarts/embedding_assets.html#UsingFXGDocuments)，但只能通过 MXML 嵌入 FXG -

![在此处输入图像描述](../Images/e7af8b232ffce4fb74de7a207b645149.png)

**MyStars.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:ViewNavigatorApplication 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    firstView="views.Home">
</s:ViewNavigatorApplication> 
```

**Home.mxml（工作正常，通过 MXML 嵌入 FXG 时）：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:comps="assets.*"
        title="Home">

    <comps:Star />
</s:View> 
```

**Star.fxg（位于 src/assets/Star.fxg）：**

```
<?xml version='1.0' encoding='UTF-8'?>
<fxg:Graphic xmlns:fxg="http://ns.adobe.com/fxg/2008" version="2">    
    <fxg:Path x="9.399" y="10.049" data="M 82.016 78.257 L 51.895 69.533 L 27.617 89.351 L 26.621 58.058 L 0.231 41.132 L 29.749 30.52 L 37.714 0.241 L 56.944 24.978 L 88.261 23.181 L 70.631 49.083 Z">
        <fxg:fill>
            <fxg:SolidColor color="#FFFFFF"/>
        </fxg:fill>
        <fxg:stroke>
            <fxg:SolidColorStroke 
                caps="none" 
                color="#4769C4" 
                joints="miter" 
                miterLimit="4" 
                weight="20"/>
        </fxg:stroke>
    </fxg:Path>
</fxg:Graphic> 
```

然而，当我尝试通过 ActionScript 实例化 FXG 图形时（仍在同一个 Flex 移动项目中），我收到编译错误：

![在此处输入图像描述](../Images/56a891c75881c0018c4f0402c486130c.png)

```
Call to a possibly undefined method Star 
```

**主页.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:comps="assets.*"
        title="Home">

    <fx:Script>
        <![CDATA[
            import spark.core.SpriteVisualElement;

            private static const STAR:SpriteVisualElement = new Star();
        ]]>
    </fx:Script>  

<s:BitmapImage source="{STAR}" />
</s:View> 
```

我也尝试过**import comps；**和/或**新的 comps.Star();**

当我将 FXG 文件移动到**src/**并使用**xmlns:comps="*"**一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:25:03.113

在 ActionScript 中导入 Star，根据您的代码，我假设它是这样的：

```
import assets.Star
private static const STAR:SpriteVisualElement = new Star(); 
```

我怀疑这将摆脱编译器错误。但是，我不确定您是否可以使用 SpriteVisualElement 作为 BitmapImage 的源。您可能必须将 SpriteVisualElement 添加为父容器的子容器，并使用 Flex 组件生命周期来执行此操作。

我已经对此进行了一些试验，并将[这段代码贡献给了 Apache Flex](http://svn.apache.org/repos/asf/incubator/flex/whiteboard/jhouser/FXGImage/)。 [具体的类在这里](http://svn.apache.org/repos/asf/incubator/flex/whiteboard/jhouser/FXGImage/Workspace/FXGImageLibrary/src/org/apache/utils/FXGImage.as)。虽然，出于某种原因，我错过了 FXG 元素可能是 SpriteVisualElements 的事实。如果您在 ActionScript 中创建组件，则使用我的 FXGImage 类不会免除您必须在 ActionScript 中调整组件大小和位置的责任。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T01:59:34.163

对于 FXG 图形，请注意您的图稿尺寸。当您使用 FXG 创建对象时，图标周围的空白很重要。确保将图稿大小设置为图标的大小（图标周围没有多余的空白）。这样，当您嵌入到 bitmapImage 时，FXG 资产看起来会更好。

# java - 为什么我们应该扩大覆盖方法的可访问性？

> ID：10073731
> 
> 赞同：-2
> 
> 时间：2012-04-09T13:13:20.580
> 
> 标签：java

为什么我们应该扩大覆盖方法的可访问性？如果超类具有受保护的方法，而子类具有与公共相同的方法。为什么会发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:16:38.133

这是不同的方法！子类不继承私有方法！所以你根本没有“压倒一切”。您只是在定义一个与超类中的私有方法同名的方法。

```
 class A
   {
      private void myMethod() { }
   }

 class B extends A
   {
     public void myMethod() { } // a completely different method. Has nothing to do with the above method. It is not an override. 
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:17:04.303

因为在对象层次结构中，JVM 将始终运行 Overriden 方法。如果您的覆盖方法不可访问，那么它是无用的。

```
public class A{
    void A(){}
}
public class B extends A{
    private void A(){} //this makes no sence and its impossible
    PSV main(String ..){
        A a = new B();
        a.A(); //error as JVM cannot call overriden method which is private.
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T13:22:03.897

声明为私有或静态的方法不能被覆盖！

注解@Override 表示方法声明旨在覆盖超类中的方法声明。如果一个方法被这个注解类型注解但没有覆盖超类方法，编译器需要生成一个错误信息。

每次重写方法时使用它有两个好处。这样，如果您犯了拼写错误的方法名称或未正确匹配参数的常见错误，您将被警告您的方法实际上并没有像您认为的那样覆盖。其次，它使您的代码更容易理解，因为当方法被覆盖时它会更加明显。在 Java 1.6 中，您可以使用它来标记方法何时实现接口以获得相同的好处。

# php - 如何从 PHP Drupal 发送 JS 代码以执行

> ID：10073734
> 
> 赞同：0
> 
> 时间：2012-04-09T13:13:32.557
> 
> 标签：php, javascript, drupal-7, validation

我在 Drupal 7 - hook_FORM_ID_form_alter() 中实现了一个自定义表单验证，方法是设置一个简单的回调函数，如下所示：

```
$form['#submit'][]= 'mymodule_myformid_submission_submit'; 
```

在提交函数中，我自己进行表单验证，并且基于此操作，我想在原始页面中执行一个 JavaScript 函数，在那里我重定向（使用 a`header('Location: ...')`或`$form_state['redirect'];`两者都可以正常工作）。我已经达到通过使用实现 JS 发送和执行：

```
unset($_SESSION['messages']);
drupal_set_message("<script>aftersubmit();</script>"); 
```

我唯一的问题是我在页面顶部有一个小的空白条纹，对应于 Drupal 消息区域（尽管我使用完全自定义的主题，只有一个内容区域 + 面板），我可以通过这样做取出`location.reload(true);`在 JS 函数的末尾。但这需要 1 秒才能重新加载。我曾尝试使用 echo，但它不起作用（我知道为什么）。我确信我发送 JS 代码的方式`drupal_set_message()`是不合适的。我应该怎么办？（不想使用Ajax，因为我刚开始学习Drupal）谢谢

# cocoa - malloc 错误：无法分配区域

> ID：10073736
> 
> 赞同：1
> 
> 时间：2012-04-09T13:13:38.220
> 
> 标签：cocoa, malloc

我正在使用带有 ARC 的 xcode 4.2，但我不断收到此错误：

```
Fly(7258,0x7fff72157960) malloc: *** mmap(size=18446744073709522944) failed (error code=12)
*** error: can't allocate region 
```

我发现这是导致问题的区域，但我看不出有什么问题：

```
for (int i = 0; i < [lineArray count]; i++) {

    if ([[lineArray objectAtIndex:i]length] >0) {
        if ([[lineArray objectAtIndex:i]characterAtIndex:0]== 'v') {
            if ([[lineArray objectAtIndex:i]characterAtIndex:1]== ' ') {
                for (int b = 0; b <[[lineArray objectAtIndex:i]length]; b++) {
                    int charLoc;
                    if ([[lineArray objectAtIndex:i]characterAtIndex:b] ==' ') {

                        NSString *string = [[lineArray objectAtIndex:i] substringWithRange:NSMakeRange(charLoc+1, b-charLoc-1)]; 

                        charLoc = b;
                    }
                }
            }
        }
    }
} 
```

任何帮助将不胜感激，本

# objective-c - Objective-C：如何将选择器对象的 int 转换为 id？

> ID：10073740
> 
> 赞同：1
> 
> 时间：2012-04-09T13:13:55.043
> 
> 标签：objective-c

我收到了来自 SQLite fetch 的返回值

```
int primaryKey = sqlite3_column_int(statement, 0); 
```

我将把它用作选择器的对象：

```
[[ABC alloc] performSelector:@selector(abcWithAAA:) withObject:[NSNumber numberWithInt:primaryKey]]; 
```

primarykey 的 NSLog 结果是数字 4：

```
NSLog(@"primaryKey：%i",primaryKey);
4 
```

但 [NSNumber numberWithInt:primaryKey] 的 NSLog 结果为 131628896。

为什么？以及如何正确转换 int 值？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-17T18:54:01.383

我使用为 withObject 方法进行强制转换的适配器方法解决了这个问题。我的问题是我想使用 typedef 枚举并将其作为值传递给 withObject。

我想使用 performSelect 消息调用此方法：

```
-(void) requestInfosAndPersistByMonsterType:(MonsterTypes)monsterType {

} 
```

如您所见，它请求一个 MonsterTypes typedef 定义如下：

```
typedef enum
{
    MonsterTypeIWerwolf = 0,
    MonsterTypeITempler = 1,
    MonsterTypeIUndefined,
} MonsterTypes; 
```

实际上，为了能够调用上面的方法，我构建了这个调用它的适配器：

```
 -(void)monsterTypeFromObject:(id)_monsterType {
        if ([_monsterType respondsToSelector:@selector(intValue)]) {
            int _t = [_monsterType intValue];
            switch (_t) {
                case MonsterTypeIWerwolf:
                    _t = MonsterTypeIWerwolf;
                    break;
                case MonsterTypeITempler:
                    _t = MonsterTypeITempler;
                    break;
                default:
                    _t = MonsterTypeIUndefined;
                    break;
            }
            [self requestInfosAndPersistByMonsterType:_t];
        }
    } 
```

它是这样使用的：

```
[self performSelector:@selector(monsterTypeFromObject:) withObject:[NSNumber numberWithUnsignedInt:monsterType] afterDelay:5.0f]; 
```

你可以在这里找到更详细的解释：http: [//kerkermeister.net/objective-c-adapter-from-nsinteger-to-id-when-using-performselector-withobject/](http://kerkermeister.net/objective-c-adapter-from-nsinteger-to-id-when-using-performselector-withobject/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T13:19:41.103

当您 log 时`[NSNumber numberWithInt:primaryKey]`，您正在记录 NSNumber 对象的地址。如果你想看看里面应该是什么`[[NSNumber numberWithInt:primaryKey] intValue]`。

换句话说，这并没有表明您的转换是一个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T13:30:04.180

`[NSNumber numberWithInt:primaryKey]`是对象。用于`%@`对象。

```
NSLog(@"%@", [NSNumber numberWithInt:primaryKey]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T13:21:53.367

131628896 是 NSNumber 对象的内存地址。

采用：

```
- (void)abcWithAAA: (NSNumber *)number {
      int primaryKey = [number intValue];
      NSLog("%i", primaryKey);
} 
```

# sql - 如何根据 sql server 2008 中的日期时间对表列进行排序？

> ID：10073754
> 
> 赞同：-4
> 
> 时间：2012-04-09T13:15:09.710
> 
> 标签：sql, sql-server

我在表中添加了很多行。它按 ID 排序但是，我想按日期时间排序。

表名是 rss，列名是 rss_date(type: DateTime)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:54:16.263

您可以`ORDER BY`使用`ASCENDING`或`DESCENDING`。

如果要按升序显示，则无需放置`ASC`. 因为`DESCENDING`你必须`DESC`在列名之后使用。

例如：

```
SELECT *
FROM tableName
ORDER BY columnName DESC; -- or ASC; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T13:16:32.570

嗯，你可以使用`ORDER BY`从句...

```
SELECT *
FROM rss
ORDER BY rss_date; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T13:16:41.753

```
Select * From rss Order by rss_date ASC; 
```

您可以使用`ASC`或`DESC`

# sql - 获取大型 (1 GB) xml 文件的有效架构

> ID：10073757
> 
> 赞同：2
> 
> 时间：2012-04-09T13:16:00.263
> 
> 标签：sql, xml, xsd, sqlbulkcopy, sqlxml

我需要将巨大的 xml 文件批量加载到 SQL Server 2005。我决定在我的 C# 应用程序中使用 SQLXMLBULKLOAD，但我需要获取这些 xml 文件的有效 xsd 模式来加载它们。哪个是生成 xsd 文件的最佳方法？我尝试了 MS VS xsd.exe，但它尝试将文件加载到内存中，这会导致 OutOfMemory 异常。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:08:06.863

有很多工具可以从实例生成模式，但我不知道其中有多少能够在纯流模式下运行。无论文件大小如何都可以使用的一种工具是 DTDGenerator，它最初是 Saxon 的一部分。你可以在这里找到它：

[http://saxon.sourceforge.net/dtdgen.html](http://saxon.sourceforge.net/dtdgen.html)

它生成 DTD 而不是模式，但是有很多工具可用于将 DTD 转换为模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:19:44.757

剥离文件以创建一个代表整体的较小文件，然后从中生成一个 XSD。然后，您可以根据需要调整结果。

# android - 从视频中获取额外内容

> ID：10073758
> 
> 赞同：0
> 
> 时间：2012-04-09T13:16:10.920
> 
> 标签：android

我一直在尝试获取与本机相机应用程序捆绑在一起的附加功能列表，我想拍摄视频，保存它然后保留文件路径

```
Intent chooseCamera = new Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
                startActivityForResult(chooseCamera,cameraData); 
```

到目前为止，我已经得到了这个，我找到了一个关于获取静止图像而不是视频的位图的教程。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:24:33.673

用这个 ：

```
cameraData=2;
Intent chooseCamera  = new  Intent(MediaStore.ACTION_VIDEO_CAPTURE);   
startActivityForResult(chooseCamera, cameraData);  

@Override  
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {   
        try{   
            if(resultCode==Activity.RESULT_OK){   
                if(requestCode==cameraData){   
                    path = data.getData().toString();   //VIDEO path 
                }   
            }   
        }catch(Exception e){   
            e.printStackTrace();   
        }   
    } 
```

# php - PHP ajax 与 jquery 滑动

> ID：10073760
> 
> 赞同：1
> 
> 时间：2012-04-09T13:16:20.077
> 
> 标签：php, jquery, mysql, ajax

我有一个复杂的 PHP 难题。我的数据库中有一个不断更新的表（让我们称之为 TABLE），其中添加了多条记录，这些结果将使用 PHP 在使用 AJAX 的页面（page.php）上发布。

显示的帖子的最大数量是每三秒 1 个，为此我有一个相关性算法。我不知道如何将 jquery 转换与表中不断更新的记录合并（由 AJAX 获得）。我想出的最好的方法并不比 hack 好多少，并且不能容纳无限数量的帖子。

查询：

```
$(#5).delay(1000).slideDown(700);
$(#4).delay(4000).slideDown(700);
$(#3).delay(8000).slideDown(700);
$(#2).delay(12000).slideDown(700);
$(#1).delay(16000).slideDown(700); 
```

PHP：不需要

HTML：

```
<div id='5' class='post'></div>
<div id='4' class='post'></div>
<div id='3' class='post'></div>
<div id='2' class='post'></div>
<div id='1' class='post'></div> 
```

我不知道如何处理 AJAX。

任何帮助将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:24:44.893

如果您的问题只是如何向下滑动最新附加的 div，请尝试以下操作：

HTML：

```
<div id="updatePanel">
    <div id='div5' class='post'></div>
    <div id='div4' class='post'></div>
    <div id='div3' class='post'></div>
    <div id='div2' class='post'></div>
    <div id='div1' class='post'></div>
</div> 
```

注意：`id`以数字开头的属性无效。

jQuery

```
setInterval(getData, 3000);

function getData() {
    // call ajax, get data.
    // success: function () {...
    var id = parseInt($("#updatePanel div:first").attr("id").replace("div", "")) + 1;

    $div = $("<div></div>").attr("id", id)
        .addClass("post")
        .text(dataFromAJAX)
        .css("display", "none") // change this to be a class - this is just to make it clear.
        .prependTo("#updatePanel")
        .slideDown();
} 
```

[**示例小提琴**](http://jsfiddle.net/UQ246/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:22:44.423

我不确定，但这基本上是每三秒检查一次新帖子，然后向下滑动显示它们吗？

如果是这样，一旦您使用 ajax 拉出新帖子，请将代码附加/前置到包装容器，将 div 预设为隐藏，然后将其向下滑动。

如果这是你想要的，我可以帮助你编写代码，但你需要发布你的 ajax，这样我才能得到一个更好的主意。

# c - 我的练习算术测验程序以及我制作的几乎所有其他程序都缺少原型

> ID：10073772
> 
> 赞同：0
> 
> 时间：2012-04-09T13:16:50.963
> 
> 标签：c

昨天我能够制作一个有同样问题的程序（ASCII 转换器等）[当我构建程序时每个函数都有一个缺少原型的错误]我能够通过随机试验和错误来修复它，不知道我是怎么做的它。这是我的算术测验练习程序。我也试过把 int initialize(),clear(),exit(),additionquiz(),subtractionquiz(),divisionquiz(),multiplicationquiz(); 它仍然给了我一个缺失的原型。

```
 #include <stdio.h>
    /* Main Menu */
    int numbers[10];
    int main()
    {
        while(1==1)
        {
            int choice;
            initialize();
            printf("Arithmetic Quiz Program\n");
            printf("1 - Addition\n2 - Subtraction\n3 - Multiplication\n4 - Division\n5 - Exit\n");
            scanf("%d",&choice);
            if(choice==1)
            {
                clear();
                additionquiz();
            }
            else if(choice==2)
            {
                clear();
                subtractionquiz();
            }
            else if(choice==3)
            {
                clear();
                multiplicationquiz();
            }
            else if(choice==4)
            {
                clear();
                divisionquiz();
            }
            else if(choice==5)
            {
                exit();
            }
            else
            {
                printf("%cPlease choose a number from 1 - 5",7);
                clear();
                continue;
            }
        }
        return 0;
    }
    /* For clearing the page */
    int clear()
    {
        int i;
        for(i=0;i<25;i++)
        {
            printf("\n");
        }
    }
    /* Assigns the array */
    int initialize()
    {
        numbers[0]=6;
        numbers[1]=0;
        numbers[2]=2;
        numbers[3]=5;
        numbers[4]=3;
        numbers[5]=1;
        numbers[6]=9;
        numbers[7]=4;
        numbers[8]=7;
        numbers[9]=8;
        return 0;
    }
    /* addition quiz */
    int addition()
    {
        int a,diff,b,answer,choice;
        a=0;
        diff=1;
        b=a+diff;
        while(1==1)
        {
            if(a>9)
            {
                a=0;
                diff++;
            }
            if(b>9)
            {
                b=0;
            }
            if(diff>9)
            {
                diff=0;
            }
            printf("%d + %d = ",number[a],number[b]);
            scanf("%d",&answer);
            if(answer==number[a]+number[b])
            {
                printf("\nCORRECT!!!\n");
                a++;
            }
            else
            {
                printf("\nWRONG!!!\n");
                clear();
                additionquiz();
            }
            printf("\nWhat do you want to do next?\n1 - Answer another addition Question\n2 - Go back to main menu\n3 - Exit program\n");
            scanf("%d",&choice);
            if(choice==1)
            {
                clear();
                additionquiz();
            }
            else if(choice==2)
            {
                clear();
                main();
            }
            else if(choice==3)
            {
                exit();
            }
            else
            {
                printf("%cPlease choose a number from 1 to 3",7);
            }
        }
        return 0;
    }
    /* The subtraction quiz */
    int subtraction()
    {
    int a,diff,b,answer,choice;
        a=0;
        diff=1;
        b=a+diff;
        while(1==1)
        {
            if(a>9)
            {
                a=0;
                diff++;
            }
            if(b>9)
            {
                b=0;
            }
            if(diff>9)
            {
                diff=0;
            }
            if(numbers[a]-numbers[b]<0)
            {
                a++;
                subtraction();
            }
            printf("%d - %d = ",numbers[a],numbers[b]);
            scanf("%d",&answer);
            if(answer==numbers[a]-numbers[b])
            {
                printf("CORRECT!!!\n\n");
            }
            else
            {
                printf("WRONG!!!\n\n");
                clear();
                subtractionquiz();
            }
            printf("\nWhat do you want to do next?\n1 - Answer another subtraction Question\n2 - Go back to main menu\n3 - Exit program\n");
            scanf("%d",&choice);
            if(choice==1)
            {
                clear();
                subtractionquiz();
            }
            else if(choice==2)
            {
                clear();
                main();
            }
            else if(choice==3)
            {
                exit();
            }
            else
            {
                printf("%cPlease choose a number from 1 to 3",7);
            }
        }
        return 0;
    }
    /* multiplication quiz */
    int multiplicationquiz()
    {
    int a,diff,b,answer,choice;
        a=0;
        diff=1;
        b=a+diff;
        while(1==1)
        {
            if(a>9)
            {
                a=0;
                diff++;
            }
            if(b>9)
            {
                b=0;
            }
            if(diff>9)
            {
                diff=0;
            }
            printf("%d * %d = ",number[a],number[b]);
            scanf("%d",&answer);
            if(answer==number[a]*number[b])
            {
                printf("\nCORRECT!!!\n");
                a++;
            }
            else
            {
                printf("\nWRONG!!!\n");
                clear();
                multiplicationquiz();
            }
            printf("\nWhat do you want to do next?\n1 - Answer another multiplication Question\n2 - Go back to main menu\n3 - Exit program\n");
            scanf("%d",&choice);
            if(choice==1)
            {
                clear();
                multiplicationquiz();
            }
            else if(choice==2)
            {
                clear();
                main();
            }
            else if(choice==3)
            {
                exit();
            }
            else
            {
                printf("%cPlease choose a number from 1 to 3",7);
            }
        }
        return 0;
    }
    /* Division quiz */
    int divisionquiz()
    {
        int a,diff,b,answer,choice,remain;
        a=0;
        diff=1;
        b=a+diff;
        while(1==1)
        {
            if((numbers[a]<numbers[b])||numbers[b]==0)
            {
                a++;
                clear();
                divisionquiz();
            }
            if(a>9)
            {
                a=0;
                diff++;
            }
            if(b>9)
            {
                b=0;
            }
            if(diff>9)
            {
                diff=0;
            }
            printf("%d % %d = \n",numbers[a],numbers[b]);
            printf("What is the whole number?\n");
            scanf("%d",&answer);
            printf("What is the remainder? (0 if none\n)");
            scanf("%d",&remain);
            if(answer==numbers[a]/numbers[b] && remain==numbers[a]%numbers[b])
            {
                printf("\nCORRECT!!!");
                a++;
            }
            else
            {
                printf("\nWRONG!!!");
                clear();
                divisionquiz();
            }
            printf("\nWhat do you want to do next?\n1 - Answer another division Question\n2 - Go back to main menu\n3 - Exit program\n");
            scanf("%d",&choice);
            if(choice==1)
            {
                clear();
                divisionquiz();
            }
            else if(choice==2)
            {
                clear();
                main();
            }
            else if(choice==3)
            {
                exit();
            }
            else
            {
                printf("%cPlease choose a number from 1 to 3",7);
            }
        }
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:26:20.277

`exit`是一个外部函数，您需要在源代码顶部包含它的标头：

```
#include <stdlib.h>   // exit 
```

请注意，在函数调用中调用了加法函数，`addition`并且在函数定义`additionquiz`中。减法也一样。

对于其他函数，您应该在调用它们之前声明它们：即在`main`函数定义之前。

```
int initialize(void);
int clear(void);
int additionquiz(void);
int subtractionquiz(void);
int divisionquiz(void);
int multiplicationquiz(void);

int main(void)
{
    /* ... */ 
```

请注意，一次性声明所有函数，如下所示：

```
int initialize(void), clear(void), additionquiz(void),
    subtractionquiz(void), divisionquiz(void), multiplicationquiz(void); 
```

是允许的，但它的可读性不是很好，可能会让读者感到惊讶。

最后，如果这些函数不是从另一个源代码调用的，你应该通过`static`在声明的开头添加一个说明符来告诉读者（和编译器），如下所示：

```
static int clear(void);  // the function is only called in this source code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:19:25.520

C 编译器从上到下工作。在您尝试调用它们*之前*，它必须知道您的函数存在。所以你有两个选择：

1.  ***在上面* **定义**你的函数`main`（即移动整个函数体）。**
***   ***在上面* **声明**你的函数`main`。即把`int initialize();`等放在上面`main`。****

 ****另请注意，在 C 中，`int initialize()`与`int initialize(void)`. 您应该使用第二个版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:37:19.747

更多关于我上面那个人所说的信息可以在这里找到。本页概述了如何在代码中禁止或启用不同类型的警告：

[http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)

还有另一个提示。您使用以下语法在代码中编写了几个 while 循环：

```
while (1==1)
{
    ...
} 
```

这会做同样的事情

```
while(1) 
{

} 
```

原因如下：如果括号内的代码为真，while 循环、if 语句、else 语句和 else if 语句都将执行它们下面的代码。由于 C 中的 1 为真而 0 为假，因此我上面的 while 循环与您的循环相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T13:25:37.513

首先，学习在启用所有警告和调试信息的情况下进行编译（例如，`gcc -Wall -g`在 Linux 上使用）。然后改进你的程序，直到编译器没有给出警告（相信编译器）。

然后，学习为每个函数声明。用它们开始你的唯一源文件，或者，如果你有多个源文件，用它们制作一个头文件。

所以你可以在你的`#include`行之后添加：

```
// clear the screen
void clear(void);

// initialize the numbers
int initilize(void);

// addition quiz
int addition(void);

// subtraction quiz
int subtraction(void);

// multiplication quiz
int multiplicationquiz(void);

// division quiz
int divisionquiz(void); 
```

顺便说一句，您的函数可能会更好地命名，并且您可以在其中包含正式参数（否则`void`用作参数列表）。而且我不明白为什么他们都返回`int`你不使用的。****

# spring - 为什么 Mockito 的 when() 没有被触发？

> ID：10073778
> 
> 赞同：3
> 
> 时间：2012-04-09T13:17:07.890
> 
> 标签：spring, unit-testing, mocking, mockito

我需要测试一个服务类，但是当我尝试模拟 dao 类时，它不会被触发，因此无法使用 ThenReturn()。

我认为问题是因为我在服务类（Spring MVC 3.1）中为我的 Dao 和 @Autowired 使用了一个接口：

界面：

```
public interface TestDao {
    int createObject(Test test) throws NamingException;
} 
```

实施：

```
@Repository
public class TestDaoImpl implements TestDao {

    @Override
    public int createObject(Test test) {
        KeyHolder keyHolder = new GeneratedKeyHolder();
        jdbcTemplate.update(new InsertNewTest(test), keyHolder);
        return ((java.math.BigDecimal)keyHolder.getKey()).intValue();
    }
} 
```

服务：

```
public class RegTest {
    @Autowired
    TestDao testDao;

    public int regTest(int .....) {
        .
        .
        int cabotageId = testDao.createObject(test);
    }
} 
```

在测试中我有：

```
@RunWith(MockitoJUnitRunner.class)
public class TestRegService {
    @InjectMocks
    private RegTest regTest = new RegTest();

    @Mock
    TestDao testDao;

    @Test()
    public void test() {
        .
        when(testDao.createObject(null)).thenReturn(100);
        .
    } 
```

testDao.createObject(null) 返回 0（由于被模拟）而不是 100，因为我试图实现。

有人可以帮忙吗？

# 问题解决了！

传递给 createObject() 的测试对象不匹配。使用

```
testDao.createObject(any(Test.class)) 
```

成功了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T20:07:49.737

如果您的测试实际上将一个值传递给 createObject，那么`when(testDao.createObject(null)`......永远不会匹配。`Test`您可以匹配with的任何实例，而不是匹配 null `testDao.createObject(any(Test.class))`...

Also when you tried later to supply `new Test()` as the argument to match, it will literally try to match on that exact instance of `Test`, but presumably your real code is new-ing up a different one. So the use of `Matchers.any(Test.class)` as the parameter to match is the way to go.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T16:59:31.227

Mockito 注入机制不知道 Spring @Autowired 或 CDI @Inject 注释。它只是尝试根据模拟的类型和名称找到最佳候选者，并且它也可以查找私有字段。请参阅 @InjectMocks 的 javadoc：http: [//docs.mockito.googlecode.com/hg/1.9.0/org/mockito/InjectMocks.html](http://docs.mockito.googlecode.com/hg/1.9.0/org/mockito/InjectMocks.html)

您使用的语义是正确的，但如果您遇到问题，我宁愿寻找不正确的交互或不正确的论点。

你确定`test`变量 in`regTest.regTest(int...)`真的是`null`传递给`testDao.createObject(test)`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T14:49:02.633

我不知道这是否是示例中的拼写错误，但您`RegTest.regTest()`调用`createTest()`而不是`createObject()`. 否则，我不认为 @Autowired 与它有任何关系，因为您的测试本身没有在具有 Spring 管理的容器中运行。如果它不是拼写错误，并且`createTest`实际上是与 不同的真实方法`createObject`，则 Mockito 中模拟对象的默认行为是为数字返回类型返回适当类型的零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T14:27:11.263

我认为你对自动接线没有被调用是正确的。您可以使用 setTestDao() 调用自己注入 dao。Mockito 还支持[spy](http://docs.mockito.googlecode.com/hg/org/mockito/Spy.html)，它允许您跟踪对象代码并仅替换函数。

# html - 兄弟有属性时的CSS选择器

> ID：10073782
> 
> 赞同：-1
> 
> 时间：2012-04-09T13:18:00.353
> 
> 标签：html, css, selector

是否可以在 CSS 选择器中包含“兄弟”？

案子：

1)

```
<div>
  <textarea/>
  <input/>
</div> 
```

2)

```
<div>
  <textarea/>
  <input style="display:none;"/>
</div> 
```

款式：

```
div > texarea {
  height: 100%;
  width: 100%;
  bottom-padding: 20px;
  ....
}
div > input {
  bottom: 0px;
  ....
} 
```

在这两种情况下，我都希望 textarea 适合父 div。但在第一种情况下，输入应该在 div 的底部，所以我使用底部填充。第二种情况怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:19:49.903

CSS 目前不支持基于其子项的某些条件对父项进行样式设置。

我建议您根据其中的内容在父 DIV 上放置一个类，并根据该类设置 DIV 的样式。

# matlab - 在 MATLAB 中围绕兴趣点绘制 3D 立方体

> ID：10073784
> 
> 赞同：-2
> 
> 时间：2012-04-09T13:18:12.323
> 
> 标签：matlab

我想在兴趣点周围绘制大小为 2x2x5 (x,y,z) 的 3D 立方体，以获得离它最近的点并在立方体内。兴趣点可能在立方体的中心。

如何获得离兴趣点最近的点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:37:07.543

[这里](http://www.mathworks.com/matlabcentral/newsreader/view_thread/235581)有几种绘制立方体的技巧。您将需要选择一个可以让您指定大小和来源的选项。大小将为 2,2,5，原点将是兴趣点的坐标。

# java - UrlBasedViewResolver 中的 viewClass 属性

> ID：10073787
> 
> 赞同：1
> 
> 时间：2012-04-09T13:18:24.693
> 
> 标签：java, spring, jakarta-ee

在使用 Spring Framework 创建应用程序时，如果我们想使用 UrlBasedViewResolver 我们需要指定属性 viewClass，我找不到任何好的文档来解释为什么需要这个属性以及使用这个属性可以实现什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:58:11.443

此属性指定将使用什么类来呈现视图。默认情况下它是 AbstractUrlBasedView。

[http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/servlet/view/UrlBasedViewResolver.html](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/servlet/view/UrlBasedViewResolver.html)

# c# - 使用 gson 解析 Json 文件：MalformedJsonException

> ID：10073790
> 
> 赞同：1
> 
> 时间：2012-04-09T13:18:41.417
> 
> 标签：c#, json, parsing, exception, gson

我想读取格式为 JSON 文件的字符串并将其打印在屏幕上。因此我正在使用 GSON-Library。

每次我想编译时，我都会在线程“main”com.google.gson.JsonSyntaxException错误中得到一个**异常**

我的代码看起来像这样

```
public class Test {

public static void main(String... args) throws Exception {
    String json = 
        "{"
                    + "'tag_name' : 'M mit Mbrunnen',"
                    + "'tag_id' : 'de_bw_xx_mstall',"
                    + "'tag_description': 'false',"
                    + "'tag_latitude': '42.704895',"
                    + "'tag_longitude': '10.652187',"
                    + "'tag_description_f_a': 'Ein weiteres Highlight in H',"
        + "}";

    // Now do the magic.
    Data data = new Gson().fromJson(json, Data.class);

    // Show it.
    System.out.println(data);
}
}

class Data {
private String tag_name;
private String tag_id;
private String tag_description;
private String tag_latitude;
private String tag_longitude;
private String tag_descrption_f_a;  

public String getName() { return tag_name; }
public String getId() { return tag_id; }
public String getDescription() { return tag_description; }
public String getLatitude() { return tag_latitude; }
public String getLongitude() { return tag_longitude; }
public String getDescriptionVoice() { return tag_descrption_f_a; }

public void setName(String name)                            { this.tag_name = name; }
public void setId(String id)                                { this.tag_id = id; }
public void setDescription(String description)              { this.tag_description = description; }
public void setLatitude(String latitude)                    { this.tag_latitude = latitude; }
public void setLongitude(String longitude)                  { this.tag_longitude = longitude; }
public void setDescriptionVoice(String descriptionVoice)    { this.tag_descrption_f_a = descriptionVoice; }

public String toString() {
    return String.format("%s,%s,%s,%s,%s,%s", tag_name, tag_id, tag_description, tag_latitude, tag_longitude, tag_descrption_f_a);
}
} 
```

我收到错误消息：

> 线程“主”com.google.gson.JsonSyntaxException 中的异常：com.google.gson.stream.MalformedJsonException：com.google.gson.Gson.fromJson(Gson.java:769) 处第 1 行第 221 列的预期名称.google.gson.Gson.fromJson(Gson.java:721) 在 com.google.gson.Gson.fromJson(Gson.java:670) 在 com.google.gson.Gson.fromJson(Gson.java:642) 在Test.main(Test.java:19) 原因：com.google.gson.stream.MalformedJsonException：com.google.gson.stream.JsonReader.syntaxError(JsonReader.java:1298) 的第 1 行第 221 列的预期名称com.google.gson.stream.JsonReader.nextInObject(JsonReader.java:739) 在 com.google.gson.stream.JsonReader.peek(JsonReader.java:382) 在 com.google.gson.stream.JsonReader.hasNext( JsonReader.java:349) 在 com.google.gson.internal.bind。ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:169) at com.google.gson.Gson.fromJson(Gson.java:755) ... 还有 4 个

所以错误发生在这里：

> ```
>  // Now do the magic.
>     Data data = new Gson().fromJson(json, Data.class); 
> ```

我认为我的 JSON-Data 以错误的格式提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:29:38.637

我认为您的 JSON 格式不正确

它应该是这样的

```
"{
    "tag_name": "M mit Mbrunnen",  // always use double quotes, single quote is not a valid json
    "tag_id": "de_bw_xx_mstall",
    "tag_description": "false",
    "tag_latitude": "42.704895",
    "tag_longitude": "10.652187",
    "tag_description_f_a": "Ein weiteres Highlight in H" // extra comma removed from here
}" 
```

你可以在这里验证你的 JSON [http://jsonlint.com/](http://jsonlint.com/)

# android - 为 Android 创建简单的小部件。为什么小部件总是 1x1 单元格大？

> ID：10073792
> 
> 赞同：0
> 
> 时间：2012-04-09T13:18:47.790
> 
> 标签：android

在我的手机上安装后（也发生在模拟器上），小部件只有 1x1 单元格。

我已经尝试完全卸载该应用程序，然后再次安装它，但是当我创建它的实例时，小部件仍然只有 1x1 单元格大。

有任何想法吗？

这是我的提供者信息 XML 文件 (callernator_widget_provider_info.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android">
    android:minWidth="294dp"
    android:minHeight="294dp"
    android:updatePeriodMillis="86400000"
    android:initialLayout="@layout/widgetmain"
</appwidget-provider> 
```

这是布局文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="32dp"
        android:text="Bertus van Zyl" />

    <Button
        android:id="@+id/button2"
        android:layout_width="fill_parent"
        android:layout_height="32dp"
        android:text="Button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="fill_parent"
        android:layout_height="32dp"
        android:text="Button" />

</LinearLayout> 
```

这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="android.callernator"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-permission 
      android:name="android.permission.READ_CONTACTS">
    </uses-permission>
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <receiver android:name=".CallernatorWidgetProvider" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>
            <meta-data android:name="android.appwidget.provider" android:resource="@xml/callernator_widget_provider_info" />      
        </receiver> 
        <activity android:name=".CallernatorActivity" android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:45:25.140

您在小部件提供程序中的错误位置有右括号 >。它应该在声明的末尾，而不是在第一行的末尾。

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="294dp"
    android:minHeight="294dp"
    android:updatePeriodMillis="86400000"
    android:initialLayout="@layout/widgetmain">
</appwidget-provider> 
```

我遇到了完全相同的问题 - 小部件总是出现在 1 个单元格中。在我的案例中，原因是小部件提供程序的 url 中缺少 http://。

请记住：在您的设备/模拟器上重新添加小部件后，小部件大小更改将生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:59:40.400

1.  在 android 4.0 及以上的原生系统上，如果你的 manifest.xml 有`action android:name="android.intent.action.CREATE_SHORTCUT"`，那么会出现 1x1 的单元格。

2.  并且`action android:name="android.intent.action.CREATE_SHORTCUT"`是在长按主屏幕时添加快捷方式。

这两个特征相互冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:25:18.830

首先你创建你的小部件布局 xml 文件..

示例 :: 我创建 widget_layout.xml

`

```
<RelativeLayout
    android:id="@+id/relativeLayout2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="1dp"
    android:layout_marginRight="1dp"
    android:layout_marginTop="1dp"
     >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:gravity="center_horizontal"
        android:text="Title"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/white"
        android:typeface="serif" />
</RelativeLayout>

<LinearLayout
    android:id="@+id/layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginBottom="1dp"
    android:layout_marginLeft="1dp"
    android:layout_marginRight="1dp"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/update"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/relativeLayout2"
        android:gravity="center"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="@color/black"
        android:typeface="serif" />
</LinearLayout> 
```

`

添加 callernator_widget_provider_info.xml 后...

android:initialLayout="@layout/widget_layout"

# php - 下拉jQuery没有执行

> ID：10073797
> 
> 赞同：1
> 
> 时间：2012-04-09T13:19:18.093
> 
> 标签：php, jquery, codeigniter

当用户单击下拉菜单并进行不同的选择然后更改名为 defaultCharacterID 的会话密钥时，将运行此脚本，我很想弄清楚它何时在控制台中显示“您拥有的操作”的发布请求不允许请求。

PHP：

```
public function changeDefaultCharacter()
{
    if ($this->input->post('defaultCharacterID'))
    {
        $this->session->set_userdata($this->input->post('defaultCharacterID'));
    }
} 
```

jQuery：

```
$(document).ready(function() {
    $('#charactersDrop').change(function() {
    // POST the changed value to a method in a controller that can accept
    // a parameter and that'll set the session variable for you
        $.post('dashboard/changeDefaultCharacter',
          { defaultCharacterID: this.value },
           'html'
          ); 
    });
}); 
```

编辑：

```
$(document).ready(function() {
$('#charactersDrop').change(function() {
    // POST the changed value to a method in a controller that can accept
    // a parameter and that'll set the session variable for you
    $.post('dashboard/changeDefaultCharacter',
      { defaultRosterListID: this.value },
      <?php echo $this->security->get_csrf_token_name(). ':'. 
           $this->security->get_csrf_hash(); ?>
      }
   ,
   'html'
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:45:06.470

更改`config.php`并确保：

```
 $config['csrf_protection'] = FALSE; 
```

由于 ajax 保护，检查会话令牌而导致此错误。您也可以只为一个控制器临时设置它

```
 $this->config->set_item("csrf_protection",FALSE); 
```

**更新**

或者更好的离开保护`true`并添加`csrf token`到您的请求中

```
$.post('dashboard/changeDefaultCharacter',
      {
         defaultCharacterID: this.value, 
        <?php echo $this->security->get_csrf_token_name(). ':'. 
               $this->security->get_csrf_hash();
        ?>
       }
       ,
       'html'
      );
   ... 
```

# c# - 通过高级语言访问物理内存，例如

> ID：10073807
> 
> 赞同：0
> 
> 时间：2012-04-09T13:19:49.963
> 
> 标签：c#, memory, dump, ram, memory-dump

我正在研究通过高级编程语言（例如 C#）执行 Windows 7 机器的内存 (RAM) 转储的最佳方法。我已经对此进行了大量研究，我将在下面进行总结。

*•Microsoft API 对内存的访问似乎在一段时间前被切断了 (\Device\PhysicalMemory)*

•<em>现在看来，要访问内存，您的代码必须在内核模式下执行，而不是在用户模式下才能让您访问内存

•<em>我研究了系统挂起时 Windows 转储的内存（小、大和内核转储），这种方法不适合我的要求

我想知道是否有人对我应该如何访问机器的物理内存有很好的了解。由于我习惯于编写窗口应用程序，因此我对低级编码语言的了解很少。到目前为止，我收到的建议包括编写一个驱动程序来访问内存，然后通过更高级别的编程语言调用它。

任何社区可以提供的任何帮助都将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:24:33.563

使用[procdump -ma](http://technet.microsoft.com/en-us/sysinternals/dd996900)。这给出了单个进程的完整状态。将操作系统的调试留给内核模式的人。

根据我使用 WinDBG 进行内核模式调试的短暂经验，我建议从第二台 PC 和 Firewire 链接开始。在被测系统上，卸下硬盘驱动器并安装带有符号的操作系统。确保您有一个带有符号的操作系统的良好基础映像，以便在您破坏它时使用。

在我要阅读的 WinDBG 书籍的简短列表中，有“Programming the Windows Driver Model”，Oney，MSPress。

[这可能会有所帮助。](http://www.moonsols.com/windows-memory-toolkit/)

# javascript - 动态改变onclick方法

> ID：10073809
> 
> 赞同：1
> 
> 时间：2012-04-09T13:20:03.693
> 
> 标签：javascript, jquery-ui, jquery

如何动态更改按钮的 onclick 方法。？

我有两种方法，一种方法的成功我想设置另一种方法..就像一个按钮的成功转移一样

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:22:23.800

由于您使用的是 jQuery，因此您将使用`$.on`and`$.off`来绑定和取消绑定事件。

如果您像这样附加您的处理程序：

```
$("#foo").on("click", function(e) {
  // event handler
}); 
```

您可以删除该处理程序并像这样添加另一个：

```
$("#foo")
  .off("click")
  .on("click", function(e){
    // new event handler
  }); 
```

值得注意的是`$.on`，`$.off`从 jQuery 1.7 开始，它是现在使用的首选方法。有关这些方法的更多信息，请参阅[文档](http://api.jquery.com/category/events/event-handler-attachment/)以及宣布它们[的博客文章。](http://blog.jquery.com/2011/11/03/jquery-1-7-released/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:28:33.847

```
<input id="btn" type="button" onclick="success();" value="click me!" />
<script>
    var btn = document.getElementById('btn');
    function success(){
        alert('something');
        btn.onclick = otherFunction;
    }

    function otherFunction(){
        alert('Something new');
        // Now when you clik btn this code is going to be executed
        btn.onclick = success;
    }

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:24:18.547

从 jQuery 1.7 开始，[.on()](http://api.jquery.com/on/)方法是将事件处理程序附加到文档的首选方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T13:25:27.840

给你的按钮一个`id`，然后在第一个方法中，添加以下行：

```
getElementById("THE_ID_OF_THE_BUTTON").onclick = theOtherMethod; 
```

# android - 将值从网页传递到您的应用程序 - Android / Blackberry

> ID：10073810
> 
> 赞同：0
> 
> 时间：2012-04-09T13:20:10.290
> 
> 标签：android, blackberry

只是想知道以下是否可能：

(A) 应用程序使用 webview (Android) / browserfield (BBerry) 加载托管在远程服务器上的登录页面 (B) 在 webview / browserfield 中的网页上进行身份验证 (C) 成功登录后 - 一些参数从传回网页并在应用程序的后续屏幕中使用。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:28:19.540

在安卓上：

您可以在 webview 上公开 javascript 接口。这允许您在 java 中定义一个回调，并从用户登录后加载的页面调用它。

流动：

1.  `addJavascriptInterface`使用[1]创建您的界面

2.  应用打开网页视图

3.  用户登录

4.  网络服务器返回一个带有 js 的页面，调用您的公开接口并传递您想要的变量/值

5.  申请继续

[1] [http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface(java.lang.Object](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface(java.lang.Object) , java.lang.String)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:02:06.427

黑莓

1.  在您的 html 页面中编写一个 Javascript 函数，该函数将在登录后传递数据。

//html中的示例代码。

```
function passData() {
            makeblackberry.pass('Hello','1234');
        }

// in blackberry class
_browserField.extendScriptEngine("makeblackberry.pass",
                    new ScriptableFunction() {
                public Object invoke(Object thiz,final Object[] args)
                {
                              // here args will give you params passed by javascript                       
                              //function
                              // args[0] = Hello and args[1] = 1234
                              //TODO do your task here...

                      return thiz;
                }
            }); 
```

# java - 如何为秒值打印高达 6 位精度的时间

> ID：10073813
> 
> 赞同：15
> 
> 时间：2012-04-09T13:20:29.980
> 
> 标签：java, date, timestamp, design-patterns

我在列中有一个时间戳类型的值。假设我有一个值**2007-05-04 08:48:40.969774**

现在，当尝试从数据库中获取值并将这个时间戳值返回给函数时，我应该使用什么 SimpleDateFormatter 模式，以便秒旁边的小数部分也被返回。

我使用了**yyyy-MM-dd hh:mm:ss**，但它只返回到秒数并忽略秒数旁边的分数（.969774）。我还需要帮助以 6 位精度返回这个小数部分。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T13:24:41.347

`java.util.Date`格式化（或）的默认方式`java.sql.Timestamp`只有毫秒精度。您可以使用`yyyy-MM-dd hh:mm:ss.SSS`来获得毫秒精度。

A`java.sql.Timestamp`实际上确实具有（高达）纳秒精度（假设数据库服务器和驱动程序实际上支持它）。在 Java 8 中格式化它的最简单方法是将时间戳转换为`java.time.LocalDateTime`（使用`Timestamp.toLocalDateTime()`）并使用支持高达纳秒的`java.time`格式化选项。`java.time.format.DateTimeFormatter`

如果您使用 Java 7 或更早版本，则需要付出一些额外的努力，因为普通的日期格式化程序不支持它。例如，您可以使用带有模式`yyyy-MM-dd hh:mm:ss`的日期格式化程序（仅格式化最多秒）并附加您自己的亚秒纳秒（使用适当的零填充）`Timestamp.getNanos()`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T14:04:52.463

您必须有一种获得微秒时间戳的方法。我将 System.currentTimeMillis() 与 System.nanoTime() 结合使用。然后你需要一种方法来显示它。您可以将其除以 1000 并正常显示毫秒，然后显示时间的最后 3 位。即有一个时间，就像

```
long timeUS = System.currentTimeMillis() * 1000 + micros; 
```

这是一个更详细的示例

[HiresTimer.java](http://code.google.com/p/core-java-performance-examples/source/browse/trunk/src/main/java/com/google/code/java/core/time/HiresTimer.java)和[HiresTimerTest.java](http://code.google.com/p/core-java-performance-examples/source/browse/trunk/src/test/java/com/google/code/java/core/time/HiresTimerTest.java)

测试打印

```
2012/04/09T14:22:13.656008
2012/04/09T14:22:13.656840
2012/04/09T14:22:13.656958
2012/04/09T14:22:13.657066
 ....
2012/04/09T14:22:13.665249
2012/04/09T14:22:13.665392
2012/04/09T14:22:13.665473
2012/04/09T14:22:13.665581 
```

* * *

编辑：相关代码是

```
private static final SimpleDateFormat SDF = new SimpleDateFormat("yyyy/MM/dd'T'HH:mm:ss.SSS");
private static final DecimalFormat DF = new DecimalFormat("000");

public static String toString(long timeUS) {
    return SDF.format(timeUS / 1000) + DF.format(timeUS % 1000);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T14:31:42.007

在 Java 中处理微秒或纳秒并不总是那么简单。

```
 import java.sql.Timestamp;
import java.text.DateFormat;
import java.text.DecimalFormat;
import java.text.NumberFormat;
import java.text.SimpleDateFormat;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.Date;

public class Main {

  public static void main(String args[]) throws Exception {
    long time = System.currentTimeMillis();
    Date d = new Date(time);
    Timestamp t = new Timestamp(time);
    /* micro-seconds as OP requested */
    {
      t.setNanos(123456000);
      System.out.println(d);
      System.out.println(t);
      DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss'.'");
      NumberFormat nf = new DecimalFormat("000000");
      System.out.println(df.format(t.getTime()) + nf.format(t.getNanos() / 1000));
      /* using Java Time API (available since JDK 1.8) */
      DateTimeFormatter dtf = DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss.SSSSSS");
      LocalDateTime ldt = t.toLocalDateTime();
      System.out.println(ldt.format(dtf));
    }
    /* nanoseconds just for the sake of completness */
    {
      t.setNanos(123456789);
      System.out.println(t);
      DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss'.'");
      NumberFormat nf = new DecimalFormat("000000000");
      System.out.println(df.format(t.getTime()) + nf.format(t.getNanos()));
      /* using Java Time API (available since JDK 1.8) */
      DateTimeFormatter dtf = DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss.nnnnnnnnn");
      LocalDateTime ldt = t.toLocalDateTime();
      System.out.println(ldt.format(dtf));
    }
  }
} 

```

产生的输出是（在我的国家，我的语言环境）：

```
2021 年 8 月 31 日星期二 13:26:08 CEST
2021-08-31 13:26:08.123456
2021-08-31 13:26:08.123456
2021-08-31 13:26:08.123456
2021-08-31 13:26:08.123456789
2021-08-31 13:26:08.123456789
2021-08-31 13:26:08.123456789

```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-12T21:19:32.523

在 Java 8 及更高版本中，[java.time](https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)包支持将日期/时间解析和操作到纳秒精度。这意味着在几分之一秒内最多可输入 9 位数字。

# php - 使用查询生成器设置 mysql 用户定义的变量

> ID：10073823
> 
> 赞同：4
> 
> 时间：2012-04-09T13:21:13.430
> 
> 标签：php, mysql, codeigniter, variables

我在使用 codeigniter 设置 mysql 用户定义变量时遇到问题。如何将 SET 与 CI 查询生成器一起使用？

```
SET @weekVideoCount := (SELECT COUNT(*) FROM videos v );

SELECT @weekVideoCount; 
```

当我在 Sqlyog 上执行此查询时，结果将成功显示，但如果我在模型中这样调用此查询

```
function getWeeklyUserData(){
        $query= $this->db->query("SET @weekVideoCount := (SELECT COUNT(*) FROM videos v);
                                SELECT @weekVideoCount;
                                ");
        return $query->result();
    } 
```

错误已产生

![在此处输入图像描述](../Images/071a07ab80a31197b483a68d33f33644.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-09T13:30:05.130

尝试分开查询

```
 $this->db->query("SET @weekVideoCount := (SELECT COUNT(*) FROM videos v)");
 $query= $this->db->query("SELECT @weekVideoCount"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T15:13:07.697

你应该知道 $this->db->query() 只执行一个 sql 语句，就像 mysql_query 一样。

# objective-c - Objective-C：如何执行 performSelector:@selector？

> ID：10073824
> 
> 赞同：2
> 
> 时间：2012-04-09T13:21:18.620
> 
> 标签：objective-c

好吧，我正在创建一个自定义 SEL，例如：

```
NSArray *tableArray = [NSArray arrayWithObjects:@"aaa", @"bbb", nil];
for ( NSString *table in tableArray ){
    SEL customSelector = NSSelectorFromString([NSString stringWithFormat:@"abcWith%@", table]);
    [self performSelector:customSelector withObject:0];
} 
```

我收到一个错误： **由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[Sync aaaWithaaa]：无法识别的选择器已发送到实例**

但如果我用真实的方法名运行它，它就可以工作！

```
[self performSelector:@selector(aaaWithaaa:) withObject:0]; 
```

如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T13:23:15.453

您已经从字符串创建了选择器 - 将其传递给 performSelector: 方法：

```
[self performSelector:customSelector withObject:0]; 
```

**编辑：**请注意，如果您的方法采用参数，那么在从中创建选择器时**必须**使用冒号：

```
// Note that you may need colon here:
[NSString stringWithFormat:@"abcWith%@:", table] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:25:06.237

```
NSArray *tableArray = [NSArray arrayWithObjects:@"aaa", @"bbb", nil];

for ( NSString *table in tableArray ){
     SEL customSelector = NSSelectorFromString([NSString stringWithFormat:@"abcWith%@:", table]);
     [self performSelector:customSelector withObject:0];
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:24:54.483

关闭。

不同之处在于`@selector(aaaWithaaa:)`您传递的是方法名称，但`@selector(customSelector:)`传递的是 SEL 类型的变量（带有备用冒号）。

相反，您只需要：

```
[self performSelector:customSelector withObject:0]; 
```

另一个区别是你在结尾处*写*`stringWithFormat:`了一个冒号，但你没有。这一点很重要; 这意味着该方法需要一个参数。如果你的方法有一个参数，它需要在那里，即

```
[NSString stringWithFormat:@"abcWith%@:", table] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T13:26:18.183

```
- (id)performSelector:(SEL)aSelector withObject:(id)anObject 
```

第一个参数是`SEL`类型。

```
SEL customSelector = NSSelectorFromString([NSString stringWithFormat:@"abcWith%@", table]);
[self performSelector:customSelector withObject:0]; 
```

# objective-c - 如何在后台线程处理 MKNetworkKit 的数据？

> ID：10073825
> 
> 赞同：4
> 
> 时间：2012-04-09T13:21:19.413
> 
> 标签：objective-c, ios, nsurlconnection

我是 MKNetworkKit 的新手，我有一点设计问题。我正在尝试在后台线程上处理 MKNetworkOperation 获取的数据，但我不确定在哪里执行以保持设计整洁。

```
[op onCompletion:^(MKNetworkOperation *completedOperation) {
    NSDictionary *jsonDictionary = [completedOperation responseJSON];

    // This part is always called on the main thread but
    // I want to process here my jsonDictionary on a background thread
    // to avoid blocking the main thread
} onError:^(NSError* error) {
    errorBlock(error);
}]; 
```

我的 jsonDictionary 的处理时间很长，我真的不想在主线程上这样做，您如何建议我切换到后台线程，同时保持 MKNetworkKit 的设计和理念干净？

谢谢，
马丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:34:25.867

在您的完成处理程序中使用此代码。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{

    //asynchronous code
    dispatch_async(dispatch_get_main_queue(), ^{

        //synchronous code
    });
}); 
```

# php - 按数组中的数组计数对数组进行分组

> ID：10073827
> 
> 赞同：0
> 
> 时间：2012-04-09T13:21:34.503
> 
> 标签：php, arrays, sorting, grouping

我有一系列 IP 网络

```
<?php
$array = array(
    '217.192' => array(
        array(
            'ip' => '217.192.133.52',
            'id' => '1',
        ),
        array(
            'ip' => '217.192.98.111',
            'id' => '2',
        ),
    ),
    '21.170' => array(
        array(
            'ip' => '21.170.171.23',
            'id' => '3',
        ),
        array(
            'ip' => '21.170.212.22',
            'id' => '4',
        ),
    ),
    '148.11' => array(
        array(
            'ip' => '148.11.11.12',
            'id' => '5',
        ),
        array(
            'ip' => '148.11.122.33',
            'id' => '6',
        ),
        array(
            'ip' => '148.11.22.89',
            'id' => '7',
        ),
    ),
    '72.1' => array(
        array(
            'ip' => '72.1.98.9',
            'id' => '8',
        ),
    ),
); 
```

我需要按计数输出这个数组排序并按子网排序（数组的键）。

`arsort($array)`不像我想要的那样工作。

我需要 148.11, 21.170, 217.192, 72.1 AND 在这些内部，所以对 ips 进行排序...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:25:37.827

您将不得不使用“自定义排序功能”：[http](http://www.php.net/usort) ://www.php.net/usort并编写自己的排序逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:29:18.290

试试这个：

```
function sortHelper(array $a, array $b) {
    $aCnt = count($a);
    $bCnt = count($b);
    if ($aCnt == $bCnt) {
        return 0;
    } else if ($aCnt > $bCnt) {
        return -1;
    } else {
        return 1;
    }
}

uasort($array, 'sortHelper');

// UPDATE: sort inside by IP

function ipSortHelper(array $a, $b) {
    $aIp = ip2long($a['ip']);
    $bIp = ip2long($b['ip']);
    if ($aIp == $bIp) {
        return 0;
    } else if ($aIp < $bIp) {
        return -1;
    } else {
        return 1;
    }
}

foreach ($array as $prefix => $group) {
    uasort($group, 'ipSortHelper');
    $array[$prefix] = $group;
} 
```

# actionscript-3 - 我们可以在动作脚本（flex）中的哪个集合对象中获取来自 java 类的 Tree 数据？

> ID：10073829
> 
> 赞同：0
> 
> 时间：2012-04-09T13:21:47.807
> 
> 标签：actionscript-3, apache-flex, actionscript-2

我们想从动作脚本（flex）的一些集合对象中的 java 类中获取**Tree**数据。使用哪个对象来存储数据以及如何在树状结构中填充它？

下面是我们自定义的 Tree 类。

```
public class Tree 
{
    public Node root;

    public static class Node 
    {
        public String file;
        public String fileType;
        public String comments;
        public LinkedList<Node> children;

        public Node(String file, String fileType, String comments) {
            this.file = file;
            this.fileType = fileType;
            this.comments = comments;
            children = new LinkedList<Node>();
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:53:54.843

这取决于您的项目使用什么作为中间层。您可以使用 [RemoteClass] 走“手动”路线，它将前端类的别名注册到中间层表示。这可能需要使用 AMF 的 ByteArray 传输进行一些手动按摩，特别是如果前端使用它自己的属性名称访问。如果项目使用 LCDS，那么这会更容易一些，因为集合通常由 ArrayList 表示，而 LCDS 会自动转换它。

请参阅：[http ://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf680e1-7ffe.html#WS2db454920e96a9e51e63e3d11c0bf69084-7a25](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf680e1-7ffe.html#WS2db454920e96a9e51e63e3d11c0bf69084-7a25)

# linux - sed 在重音中执行时出现奇怪的行为 - `

> ID：10073830
> 
> 赞同：0
> 
> 时间：2012-04-09T13:21:48.200
> 
> 标签：linux, bash, sed, sh

出于某种原因，我需要在一些字符串中转义正斜杠

```
# echo "http://google.com" | sed -e 's/[/]/\\\//g'
http:\/\/google.com 
```

但是当我尝试在里面执行相同的``它告诉我：

```
# somevar=`echo "http://google.com" | sed -e 's/[/]/\\\//g'`
sed: -e expression #1, char 10: unknown option to `s' 
```

我的 sed 版本：

```
# rpm -q sed
sed-4.1.5-8.el5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:26:59.150

这是因为在解析命令之前，内部的反引号（又名反引号、重音符号）`\\`被替换为。`\`

从 bash 手册页：

> 当使用旧式反引号形式的替换时，反斜杠保留其字面含义，除非后面跟着 $、` 或 \。前面没有反斜杠的第一个反引号会终止命令替换。使用 $(command) 形式时，括号之间的所有字符组成命令；没有人受到特殊对待。

只需使用`$(...)`而不是反引号，除非您真的需要 pre-posix`sh`兼容性

```
somevar=$(echo "http://google.com" | sed -e 's/[/]/\\\//g') 
```

我还建议使用正则表达式分隔符，而不是`/`让这更容易，例如

```
somevar=$(echo "http://google.com" | sed -e 's|/|\\/|g') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:27:31.053

使用不同的分隔符，你会没事的。我不能告诉你为什么它可以从命令行工作，但只需修复它，让它在任何地方都可以工作。

```
somevar=`echo "http://google.com" | sed -e 's%[/]%\\/%g'` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:33:44.723

您必须再次转义字符串。

```
$ echo `echo \x`  # tilde is executing "echo x"
x
$ echo `echo \\x`   # tilde is executing "echo \x"
x
$ echo `echo \\\x`   # tilde is executing "echo \\x"
\x 
```

在您的情况下，您应该添加 2 个额外的斜杠

```
$ echo `echo "http://google.com" | sed -e 's/[/]/\\\\\//g'`
http:\/\/google.com 
```

# python - 转义 html 标签

> ID：10073836
> 
> 赞同：-2
> 
> 时间：2012-04-09T13:22:13.100
> 
> 标签：python, django, django-templates

我在使用 autoescape django 模板标签时遇到问题，这是我的代码

```
msg="&lt;p&gt;&lt;b&gt;Location. &lt;/b&gt; &lt;br /&gt;Marriott Dallas Addison Quorum Galleria is located in Dallas&apos;s Addison - Galleria neighborhood, close to Galleria Dallas, Cavanaugh Flight Museum, and Northwood Club. Additional area points of interest include University of Texas at Dallas. &lt;/p&gt;&lt;p&gt;&lt;b&gt;Hotel Features. &lt;/b&gt;&lt;br /&gt;Dining options at Marriott Dallas Addison Quorum Galleria include a restaurant and a coffee shop/café. A bar/lounge is open for drinks. Room service is available. The hotel serves buffet breakfasts (surcharges apply). Recreational amenities include an outdoor pool, an indoor pool, and a spa tub. This 3.5-star property has a business center and offers small meeting rooms, limo/town car service, and audio-visual equipment. Wireless Internet access (surcharge) is available in public areas. The property offers a roundtrip airport shuttle (surcharge).  Guest parking is available for a surcharge. Additional property amenities include a concierge desk, gift shops/newsstands, and ATM/banking services. &lt;/p&gt;&lt;p&gt;&lt;b&gt;Guestrooms. &lt;/b&gt; &lt;br /&gt; 547 air-conditioned guestrooms at Marriott Dallas Addison Quorum Galleria feature coffee/tea makers and complimentary newspapers. Wired high-speed and wireless Internet access is available for a surcharge. In addition to desks, guestrooms offer multi-line phones with voice mail. Televisions have premium cable channels and pay movies. Rooms also include hair dryers and irons/ironing boards. A turndown service is available nightly, housekeeping is offered daily, and guests may request wake-up calls. &lt;/p&gt; &lt;br /&gt;&lt;br /&gt; &lt;p&gt;&lt;strong&gt;Notifications and Fees:&lt;/strong&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;The following fees and deposits are charged by the property at time of service, check-in, or check-out.  &lt;ul&gt;&lt;li&gt;Self parking fee: USD 12 per day&lt;/li&gt;&lt;li&gt;Valet parking fee: USD 17 per day&lt;/li&gt;&lt;li&gt;Fee for wireless Internet in public areas: USD 3.95 per day (rates may vary)&lt;/li&gt; &lt;li&gt;Fee for in-room high-speed Internet (wired): USD 12.95 per day (rates may vary)&lt;/li&gt;&lt;li&gt;Fee for in-room wireless Internet: USD 12.95 per day (rates may vary)&lt;/li&gt;&lt;li&gt;Buffet breakfast fee: USD 17 per person (approximate amount)&lt;/li&gt; &lt;/ul&gt;&lt;/p&gt;&lt;p&gt;The above list may not be comprehensive. Fees and deposits may not include tax and are subject to change. &lt;/p&gt; &lt;br /&gt;&lt;br /&gt; &lt;p&gt;&lt;strong&gt;Notifications and Fees:&lt;/strong&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;The following fees and deposits are charged by the property at time of service, check-in, or check-out.  &lt;ul&gt;&lt;li&gt;Self parking fee: USD 12 per day&lt;/li&gt;&lt;li&gt;Valet parking fee: USD 17 per day&lt;/li&gt;&lt;li&gt;Fee for wireless Internet in public areas: USD 3.95 per day (rates may vary)&lt;/li&gt; &lt;li&gt;Fee for in-room high-speed Internet (wired): USD 12.95 per day (rates may vary)&lt;/li&gt;&lt;li&gt;Fee for in-room wireless Internet: USD 12.95 per day (rates may vary)&lt;/li&gt;&lt;li&gt;Buffet breakfast fee: USD 17 per person (approximate amount)&lt;/li&gt; &lt;/ul&gt;&lt;/p&gt;&lt;p&gt;The above list may not be comprehensive. Fees and deposits may not include tax and are subject to change. &lt;/p&gt;"

{% autoescape off %}{{msg}}{% endautoescape %} 
```

但它仍然显示html标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:35:45.660

尝试这个：

```
{% filter escape %} msg {% endfilter %} 
```

或者您可能需要使用 force_escape 过滤器，具体取决于情况

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:27:04.737

似乎您想将您的 html 内容放在某个变量中并且不希望它在模板中转义并希望它用作普通的 html。在这种情况下，

```
msg = "<p>Location</p>"
{% autoescape off %}{{msg}}{% endautoescape %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T03:31:53.150

我不完全跟随你，但你试过吗

```
{{ msg|safe }} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T04:13:28.683

如果您的转义文本来自模型中的字段（或以另一种方式来自后端），您可以（除了人们已经说过的）`mark_safe`在 Python 代码中使用，而不是在模板中做任何事情。见这里：[https ://docs.djangoproject.com/en/dev/ref/utils/#django.utils.safestring.mark_safe](https://docs.djangoproject.com/en/dev/ref/utils/#django.utils.safestring.mark_safe)

假设模型中的字段始终填充有将自动转义的字符：您可能希望向模型添加一个方法，该方法返回标记为安全的值。例如：

```
from django.utils.safestring import mark_safe

class Something(models.Model):
    html_text = models.CharField(max_length=30)
    #...

    def get_html(self):
        return mark_safe(self.html_text) 
```

然后在您的模板中，您只需使用`{{ my_something.get_html }}`

# sql - SQL Inner Join Sum（引用另一列）

> ID：10073837
> 
> 赞同：2
> 
> 时间：2012-04-09T13:22:21.683
> 
> 标签：sql, ms-access

我正在处理一个 SQL 查询，其中最终结果是使用表 1 和表 2 在其中包含一个总和的列。

**表 1：**成员：

```
 Level
    Individual
    Super 
```

**表 2：** MLevel：

```
 Level . . . . . Fee
    Super . . . . . 700
    Individual .. . 400 
```

为第 1 列中的水平赋予价值：700 + 400 + 700 = 1800

**期望的结果：**

```
 Total . . . . . 1800 
```

我的代码：

**第一次代码尝试：**

```
SELECT SUM(Members.Level) as TotalRevenue
FROM MLevel 
INNER JOIN Members ON Members.Level = MLevel.Level 
```

**结果：**条件表达式中的数据类型不匹配

**第二次代码尝试：**

```
SELECT SUM(MLevel.Fee) as TotalRevenue
FROM MLevel 
INNER JOIN Members ON MLevel.Level= Members.Level 
```

**结果：**弹出框（输入MLevel.Fee的参数值）

所有代码结果都是错误的。我将如何修复此代码以使输出为 1800？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:29:50.017

只需对表 2 中的费用列进行总和

所以别名第二个表然后在您的 sum 语句中引用 alias.columnName

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:03:55.167

这将取决于表结构和数据类型，但我刚刚测试了以下内容`MS Access 2003`并使用以下内容：

```
Members table:
Level
Individual
Super

MLevel Table:
Level       Fee
Super       700
Individual  400

SELECT SUM(MLevel.Fee) as TotalRevenue
FROM MLevel 
INNER JOIN Members ON Members.Level = MLevel.Level 
```

使用查询给了我 1100 的总和，因为我在成员中只有 2 个条目，添加更多会正确增加总和。

您的第一个查询将不起作用，因为 上的数据类型`Members.Level`是文本字段，因此您得到数据类型不匹配，因为成员中的级别不是数字。

```
SELECT SUM(Members.Level) as TotalRevenue
FROM MLevel 
INNER JOIN Members ON Members.Level = MLevel.Level 
```

# haskell - 使用 Haskell 进行 Web 开发的主要好处是什么？

> ID：10073842
> 
> 赞同：8
> 
> 时间：2012-04-09T13:22:50.510
> 
> 标签：haskell

我正在学习Haskell [。](http://urli.st/4n5/uki)

我很喜欢 OOP 和各种类型的系统。我使用 Java 开发 webapps（Java EE、spring、Hibernate、struts 1.x），现在我经常使用 Python（pylons、django、sqlalchemy、pymongo）和 Javascript。我的个人生产力有了很大的提高：轻量级的方法、鸭式打字、很棒的迭代器、作为一等公民的功能、简单的语法和配置、快速的工具`pip`和`distribute`（以及更多）帮助了我很多。

但我提高生产力的第一个原因是*Python 语言本身*。

使用 Haskell 进行 Web 开发的主要好处是什么？例如，它的类型推断如何真正改进我的 Web 应用程序？到目前为止，我注意到当你用类型签名装饰你的函数时，**你正在为你的程序添加很多语义**。我希望所有这些努力**都会**以某种方式回归，以节省许多代码行并使它们听起来更合理。我真的很喜欢类型和数据之间的明显区别，我开始了解它们是如何工作的，但我想要一些东西：P

不要误会我的意思，我刚开始学习 Haskell，所以`Maybe`我错过了一些很棒的东西，但我真的很想了解它的范例以及何时值得使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:31:52.470

大多数 Web 应用程序旨在实现[无状态](https://stackoverflow.com/questions/844536/advantages-of-stateless-programming)并[很好地处理并发性](http://www.haskell.org/haskellwiki/Software_transactional_memory)。扩展也相当重要（[谷歌搜索引擎优化原因和用户体验](http://www.codinghorror.com/blog/2011/06/performance-is-a-feature.html)）。

Haskell 很好地处理了这些问题（尽管恕我直言，以更具学术性且可能不那么“人性化”的直观方式）。

话虽这么说，由于完全缺乏做 Web 应用程序开发的人（与 node.js 相比），而且传统的 Web 应用程序开发更专注于 OOP 思维框架，这可能相当困难。

我在尝试使用它时遇到了一些问题，您可以在下面的问题中看到：

[如何对数据对象进行自动数据序列化？](https://stackoverflow.com/questions/2690455/how-do-i-do-automatic-data-serialization-of-data-objects-in-haskell)

[处理函数式编程中的增量数据建模更改](https://stackoverflow.com/questions/2807629/handling-incremental-data-modeling-changes-in-functional-programming)

# c# - 通过泛型参数强制转换

> ID：10073844
> 
> 赞同：-1
> 
> 时间：2012-04-09T13:23:01.757
> 
> 标签：c#, types, casting

我正在尝试使用 C# `(foo<mypara>)obj`中的泛型参数来转换对象，例如`mypara`泛型参数。

```
public class foo<T>
{
   public string name {get;set;}
    public func<T> value {get;set;}
}

var mypara = myfoo.GetType().GetGenericArguments(); 
```

其中的值为`mypara.Name`or `"int"`，`"string"`它实际上是该类型的字符串表示形式。

但是我怎样才能得到真正的 mypara 类型呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:25:29.853

一个代码示例会很有帮助，但是我认为您需要的只是`obj.GetType()`？这就是您获取对象类型的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:35:28.483

你可以这样做：

```
if (value != null)
{
    if (value.GetType().IsGenericType == true
        && value.GetType().GetGenericArguments().Length >= 0)
    {
        IList _valuesList = null;

        if (value.GetType().GetGenericArguments()[0].ToString().ToLower().Contains("int"))
        {
            _valuesList = value as List<int>;
        }
        else if (value.GetType().GetGenericArguments()[0].ToString().ToLower().Contains("decimal"))
        {
            _valuesList = value as List<decimal>;
        }
        else if (value.GetType().GetGenericArguments()[0].ToString().ToLower().Contains("double"))
        {
            _valuesList = value as List<double>;
        }
        else if (value.GetType().GetGenericArguments()[0].ToString().ToLower().Contains("string"))
        {
            _valuesList = value as List<string>;
        }
    }
} 
```

参考：
[使用反射获取泛型实例泛型类型反射](https://stackoverflow.com/questions/6359338/get-generic-instance-generic-type-using-reflection)
[泛型列表类型的属性](https://stackoverflow.com/questions/6294030/reflection-a-properties-of-type-of-generic-list)
[反射和泛型类型](https://stackoverflow.com/questions/196936/reflection-and-generic-types)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:36:02.867

使用反射。任何对象上的 GetType() 都将获取类型的名称。需要更多的反射才能使其成为对象类型。

# javascript - Google Maps Markermanager：标记不显示在 IE 中

> ID：10073847
> 
> 赞同：0
> 
> 时间：2012-04-09T13:23:16.347
> 
> 标签：javascript, internet-explorer, google-maps, internet-explorer-8, markermanager

我正在使用谷歌地图来在地图上显示标记。我从谷歌地图的实用程序库版本 1.1 中使用 Markermanager (http://gmaps-utility-library-dev.googlecode.com/svn/tags/markermanager/1.1/src/markermanager.js)

该脚本在 Firefox、Chrome 和 Opera 中完美运行，但在 IE7 和 IE8 中，地图显示时没有标记。IE 给我一个错误：

'posn.0' 为空或没有对象 googlemaps.js 代码：0 URI：mydomain.com/googlemaps.js

Googlemaps.js 看起来像：

```
 var officeLayer = [
{
"zoom": [0, 1],
"places": [
  {
    "name": "USA",
    "posn": [40.72, -73.9826]
  },
  {
    "name": "Europe",
    "posn": [52.370, 4.8966]
  }
]
},
{
"zoom": [2, 17],
"places": [
  {
    "name": "Amsterdam",
    "posn": [52.370, 4.8966]
  },
  {
    "name": "Barcelona",
    "posn": [41.388, 2.1833]
  },
  {
    "name": "Berlin",
    "posn": [52.5166, 13.4000]
  },
  {
    "name": "New York City",
    "posn": [40.72, -73.9826]
  },
  {
    "name": "Paris",
    "posn": [48.860, 2.3333]
  }
]
},
{
"zoom": [9, 17],
"places": [
 {
  "name": "&klevering Centraal",
  "posn": [52.379446, 4.893913]
},
{
  "name": "290 Square Meters",
  "posn": [52.368906, 4.902288]
}
]
}
];

var map;
var mgr;
var icons = {};
var allmarkers = [];

function getIcon(images) {
var icon = null;
if (images) {
if (icons[images[0]]) {
icon = icons[images[0]];
} else {
icon = new GIcon();
icon.image = "img/"
  + images[0] + ".png";
var size = iconData[images[0]];
icon.iconSize = new GSize(size.width, size.height);
icon.iconAnchor = new GPoint(size.width >> 1, size.height >> 1);
icon.shadow = "img/"
  + images[1] + ".png";
size = iconData[images[1]];
icon.shadowSize = new GSize(size.width, size.height);
icons[images[0]] = icon;
}
}
return icon;
}

function setupOfficeMarkers() {
allmarkers.length = 0;
for (var i in officeLayer) {
var layer = officeLayer[i];
var markers = [];
for (var j in layer["places"]) {
var place = layer["places"][j];
var icon = getIcon(place["icon"]);
var title = place["name"];
var posn = new GLatLng(place["posn"][0], place["posn"][1]);
var marker = createMarker(posn,title,icon);
markers.push(marker);
allmarkers.push(marker);
}
mgr.addMarkers(markers, layer["zoom"][0], layer["zoom"][1]);
}
mgr.refresh();
}

function createMarker(posn, title, icon) {
var marker = new GMarker(posn, {title: title, icon: icon, draggable:false });
return marker;
}

function reloadMarkers() {
setupOfficeMarkers();
} 
```

[您可以在http://www.trendy-places.com/Amsterdam](http://www.trendy-places.com/Amsterdam)现场查看脚本

我无法找出导致错误的原因。

提前谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:47:43.073

检查您的位置数组中的尾随逗号。IE 可能期待另一个元素并导致错误。

```
"places": [
  {
    "name": "USA",
    "posn": [40.72, -73.9826]
  },
 {
    "name": "Europe",
    "posn": [52.370, 4.8966]
  }**,** 
```

# javascript - Is it possible to create an HTML link or button that closes a full screen app running in mobile Safari?

> ID：10073850
> 
> 赞同：2
> 
> 时间：2012-04-09T13:23:27.673
> 
> 标签：javascript, ipad, html, mobile-safari, ipad-2

I am running an HTML5 (+ CSS3 and JavaScript) app in mobile Safari on the iPad. The following meta tag in my HTML file lets the app run full screen when started using an icon on the iPad's home screen:

```
<meta name="apple-mobile-web-app-capable" content="yes" /> 
```

In the main menu of my app there is a 'close' option. Does anyone know whether I can attach a JavaScript handler to that option that closes the Safari browser (which hopefully will also make the user return to the home screen?) The trivial JavaScript command 'window.close()' does not work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:23:10.857

No. iOS applications don't have internal quit functions. Other than launching a different application from inside the app, only the home button will leave an application on that platform.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-09T14:19:29.303

Are you using phonegap or something similar?

In phonegap I use

```
navigator.app.exitApp(); 
```

and it works nice

# java - batchUpdate 如何锁定表/行

> ID：10073856
> 
> 赞同：0
> 
> 时间：2012-04-09T13:23:41.693
> 
> 标签：java, jdbc, batch-processing, jdbctemplate, spring-jdbc

任何人都可以帮助我解决这个问题：如果我执行 JDBC **batchUpdate**，它更新了几个表并且没有包装到任何事务中，它会锁定任何表或行吗？

我的代码执行了一堆 UPDATE 语句，所有这些语句如下所示

```
 String sql = "UPDATE contacts SET ref_counter = ? where uid = ?";
    jdbcTemplate.batchUpdate(sql, new CustomBatchPreparedStatementSetter(elements)); 
```

任何文档链接将不胜感激（我还没有找到任何...）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:26:12.890

锁定（如果有）依赖于实现，因此不是由 JDBC 本身定义的。

# combinatorics - 应用负载均衡和第二类斯特林数

> ID：10073857
> 
> 赞同：1
> 
> 时间：2012-04-09T13:24:01.727
> 
> 标签：combinatorics, approximation

比如说，我有 P 个线程和 N > P 个任务要使用上述方法执行。我有一个与每个任务相关的正整数值，表示该特定任务意味着多少工作。

我想在 P 个线程之间划分 N 个任务，这样如果我们考虑每个线程的“工作整数”之和，它们将大致相同。

进行这种“调度”的一种简单但精确的方法必须考虑 S(N,P) 任务分区，其中 S(N,P) 是第二类斯特林数（在现实世界的计算中应该是不切实际的大）。

问：有没有什么好的高效的近似算法来计算这种“负载均衡”的任务划分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T12:57:01.263

如果您只有 2 个处理器，则将任务分成两个相等的任务的问题称为[分区问题](http://en.wikipedia.org/wiki/Partition_problem)。众所周知，它是 NP 难的。因此，这可能表明找到最佳解决方案可能是一个难题。我只想要一个近似值，我会选择某种贪婪算法：系统地将最大的剩余任务分配给工作量较少的线程。这将为您提供一个易于实现的算法，时间复杂度为 O（任务数 * 线程数）。

# sql-server-2005 - 客户\供应商联系方式

> ID：10073860
> 
> 赞同：0
> 
> 时间：2012-04-09T13:24:16.533
> 
> 标签：sql-server-2005, self-referencing-table

我想知道存储供应商和客户联系方式的最佳方式是什么。

我在想的是会有

GUID、ParentGUID、类型、TypeDesc、详细信息

类型将是整数，typedesc 将用于其他情况，详细信息显然是数据。

我发现的问题是如何将这一切联系起来。

这是 A 客户 -> 联系人（职务、姓名、中间名、姓氏）-> 电话 -> 别名

这可能是一个层次结构的情况。

到目前为止，由于向后兼容性，无法连接供应商和客户表。但是以后会做。

此外，由于某些客户端限制，必须假定 MSSQL 2005 否则不会有问题，因为这在 2008 年通过 getroot() 和其他有用的功能得到了解决。

我可能会在很多情况下搜索其中一个字段。并要求了解客户或供应商。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:32:56.657

我最终使用递归 CTE 来检索数据

# c++ - 如何获取源代码（C++）深处的变量的值？（例如，haar.cpp、OpenCV 中 stage_sum 的值）

> ID：10073863
> 
> 赞同：0
> 
> 时间：2012-04-09T13:24:19.837
> 
> 标签：c++, opencv

我想从位于 OpenCV 库源代码深处的变量中获取一个值。具体来说，我试图从文件 haar.cpp 中打印出 stage_sum 的值。我的起点，facedetect.cpp，调用方法detectMultiScale，然后调用函数cvHaarDetectObjects，调用cvHaarDetectObjectsForROC等，直到最后到达函数cvRunHaarClassifierCascadeSum，计算stage_sum。

有没有一种方法可以轻松地将值输出到 facedetect.cpp，而无需更改所有前面的函数/方法、标头等的声明？简单地尝试直接在源代码中 cout 或 printf 值并没有给出任何结果。

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:04:13.267

一种选择是简单地使用调试器。

但是，如果您想以编程方式执行此操作（即，将变量作为应用程序代码的一部分访问），那么除非变量在库的公共接口中公开，否则有两个选项可用：

*   修改库的源代码，然后重新编译。
*   诉诸未定义的行为（摆弄构成对象的原始字节等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:49:21.317

只是为了指出明显，在*haar.cpp*`std::cout()`中添加or`printf()`调用不会成功。您需要**重新编译**OpenCV 以使更改生效，然后在系统上**重新安装**库。

# symfony - symfony2 控制台参数

> ID：10073864
> 
> 赞同：14
> 
> 时间：2012-04-09T13:24:20.323
> 
> 标签：symfony, console, command-line-arguments

我想为 symfony 命令创建一个**命名参数/选项。**并希望 symfony 区分这 3 个选项：

*   `my:command`，这意味着类似`my:command --arg=null`
*   `my:command --arg`， 意思是`my:command --arg=defalutValue`
*   `my:command --arg=someValue`，这是完全明确的。

即，我希望该命令下的代码有两种工作模式：默认一种和带有附加参数的非默认模式，并且该 arg 应该具有默认值。

我明白，我可以创建 2 个 args，但我正在寻找一个 arg-to-rule-them-all 解决方案。

是否可以使用内置类来实现这一点，还是应该创建自定义类？如果解决方案仅适用于自定义类，请告诉我，从哪里开始（即“创建...的子类”或“安装名为...的包”），因为我不熟悉 Symfony2 的体系结构。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-08T10:14:59.860

有可能的：

```
->addOption('arg', 'a', InputOption::VALUE_NONE) 
```

*   我的：命令 =>`$input->getOption('arg') //false`
*   我的：命令--arg =>`$input->getOption('arg') //true`
*   我的：命令--arg=5 =>`$input->getOption('arg') //5`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-03T09:58:28.267

corvax 的回答是不正确的并且不起作用。到今天为止，你只是无法实现这一点。

它甚至在控制台文档中有所说明：[使用命令选项](http://symfony.com/doc/current/console/input.html#using-command-options)。

另请参阅 GitHub 上的这些问题：

*   [#8135 [控制台] InputOption::VALUE_OPTIONAL 和 InputOption::VALUE_NONE 的输入选项无法按预期工作](https://github.com/symfony/symfony/issues/8135)
*   [#11883 [控制台] 添加了三态长选项](https://github.com/symfony/symfony/pull/11883)
*   [＃12769 [控制台]只有在通过该选项时才能使用选项默认值](https://github.com/symfony/symfony/issues/12769)
*   [#12773 [控制台] 添加方法以了解已解析的选项](https://github.com/symfony/symfony/pull/12773)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-11T15:42:51.530

Symfony2 有控制台组件，可以单独使用。[您可以在此处](http://symfony.com/doc/current/components/console.html)查看文档。有关更多示例，您可以检查SensioGeneratorBundle 的[实现](https://github.com/sensio/SensioGeneratorBundle/tree/master/Command)。

# android - 淡入仅发生在第一个动画android

> ID：10073865
> 
> 赞同：0
> 
> 时间：2012-04-09T13:24:26.707
> 
> 标签：android, android-animation, android-imageview, android-image

我正在创建一个动画，其中我有 3 个将在屏幕上显示动画的图像。当中间图像到达屏幕中间时，它会淡入。

一切都工作正常，除了只有当第一张图像打到中间时它会淡入，当第二张和第三张图像打到中间时它们不会淡入。

每个图像都有自己的视图。并且淡入方法在所有相同的视图上执行。

请看下面的代码。如果您需要更多信息，请告诉我。

这是模拟幻灯片在屏幕上移动的过程。moveThree 是动画中的淡入淡出。moveOne 和 moveTwo 是屏幕上图像的翻译。

```
 public static int secondProcess(AnimationListener activity, View apa1,View apa2, View apa3,int animationmove)
 {
     Log.d("2", "SECOND PROCESS");
     moveOne(activity, apa2);
     moveTwo(activity,apa1);
     animationmove = 3;
     return animationmove;

 }

 public static int thirdProcess(AnimationListener activity, View apa1,View apa2,View apa3, int animationmove)
 {
     Log.d("3", "THIRD PROCESS");
     moveThree(activity,apa1);
     animationmove = 4;
     return animationmove; 
 }

 public static int fourthProcess(AnimationListener activity, View apa1, View apa2,View apa3,int animationmove)
 {
     Log.d("4", "FOURTH PROCESS");
     moveOne(activity, apa3);
     moveTwo(activity, apa2);
     moveFour(activity,apa1);
     animationmove = 5;
     return animationmove;

 }

 public static int fifthProcess(AnimationListener activity, View apa1,View apa2,View apa3, int animationmove)
 {
     Log.d("5", "FIFTH PROCESS");
     moveThree(activity,apa2);//IN THE SECOND VIEW HERE THE IMAGE IS NOT FADING 
     animationmove = 6;
     return animationmove; 

 } 
```

moveThree 方法：

```
private static void moveThree(AnimationListener activity, View apa)
{
    Log.v("MOVETHREE", "Started move3");
    AnimationSet picMov3 = new AnimationSet(true);
    picMov3.setAnimationListener(activity);
    AlphaAnimation fadein = new AlphaAnimation((float) 0.3, 1);
    fadein.setFillAfter(true);

    fadein.setDuration(duration);
    picMov3.addAnimation(fadein);
    TranslateAnimation trans1 = new TranslateAnimation(-500, -500, 0, 0);
    trans1.setDuration(duration);
    picMov3.setFillAfter(true);
    picMov3.setInterpolator(interpolator);
    picMov3.addAnimation(trans1);

    apa.startAnimation(picMov3);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:30:43.997

您只为第一个视图调用 moveThree。您还需要为其他视图调用 if：

```
moveThree(activity,apa1);
moveThree(activity,apa2);
moveThree(activity,apa3); 
```

# c# - 使用 WCF 生成 JSON 数组

> ID：10073866
> 
> 赞同：2
> 
> 时间：2012-04-09T13:24:26.497
> 
> 标签：c#, json, wcf, rest

我正在开发一个返回此的 WCF Web 服务：

```
{
    "allFormsResult": [
        {
            "FormId": 1,
            "FormName": "Formulario 1"
        },
        {
            "FormId": 2,
            "FormName": "Formulario 2"
        },
        {
            "FormId": 3,
            "FormName": "Formulario 3"
        }
    ]
} 
```

这是代码：

```
public class RestServiceImpl : IRestServiceImpl
    {
        public List<FormContract> allForms()
        {
            List<FormContract> list = null;
            using (var vAdmEntities = new ADMDatabase.ADMEntities())
            {
                list = new List<FormContract>();
                foreach (var form in vAdmEntities.Form)
                {
                    FormContract formC = new FormContract
                    {
                        FormName = form.name.Trim(),
                        FormId = form.formId
                    };
                    list.Add(formC);
                }
            }

            return list;
        }
    } 
```

**我该怎么做才能以这种方式生成它？**

```
[
    {
        "FormId": 1,
        "FormName": "Formulario 1"
    },
    {
        "FormId": 2,
        "FormName": "Formulario 2"
    },
    {
        "FormId": 3,
        "FormName": "Formulario 3"
    }
] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T13:43:17.997

问题在这里：

```
namespace ADM
{
    [ServiceContract]
    public interface IRestServiceImpl
    {
        [OperationContract]
        [WebInvoke(Method = "GET",
            ResponseFormat = WebMessageFormat.Json,
            BodyStyle = WebMessageBodyStyle.Wrapped,
            UriTemplate = "forms/")]
        List<FormContract> allForms();
    }
} 
```

我必须这样使用它：

```
namespace ADM
{
    [ServiceContract]
    public interface IRestServiceImpl
    {
        [OperationContract]
        [WebInvoke(Method = "GET",
            ResponseFormat = WebMessageFormat.Json,
            BodyStyle = WebMessageBodyStyle.Bare,
            UriTemplate = "forms/")]
        List<FormContract> allForms();
    }
} 
```

改变`BodyStyle`：

```
BodyStyle = WebMessageBodyStyle.Bare 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T16:29:32.240

此行为也可以通过 Web.Config 设置为默认值，无需直接将属性添加到合约中。

```
<services>
  <service name="MyServiceNameSpace.MyServiceClass">
    <endpoint
        address="http://yourservicedomain.ext/MyServiceClass.svc/"
        binding="webHttpBinding"
        contract="MyServiceNameSpace.MyServiceContract"
        behaviorConfiguration="MyEndpointBehavoir"
        listenUri="/" />        
  </service>      
</services>

<behaviors>
  <endpointBehaviors>
    <behavior name="MyEndpointBehavoir">
      <webHttp defaultOutgoingResponseFormat="Json" defaultBodyStyle="Bare"/>
    </behavior>        
  </endpointBehaviors>
</behaviors> 
```

# javascript - 制作几个“GM_listValues”的列表，调用一个函数来删除自己

> ID：10073870
> 
> 赞同：0
> 
> 时间：2012-04-09T13:24:37.557
> 
> 标签：javascript, greasemonkey

我目前正在研究一个 Greasemonkey 脚本，它允许将用户添加到一个忽略列表中，这将阻止他们的评论被呈现。

我通过“GM_setValue”存储他们的用户 ID。一切正常，但我无法渲染脚本的“管理您的禁令列表”部分以赦免用户。

**我遇到问题的代码块：**

```
var banList = GM_listValues(); // Array of Usernames
var manageBans = $("#content_content"); //The <div> I want to render the Banlist in.
manageBans.append("<h4>Manage ignorelist</h4>");

for (var i=0; i < banList.length; i++) {
    var currentUser = banList[i];   

    manageBans.append($('<b>'+currentUser+'</b><a href ="javascript:void(null)"><img src="/redaktion/style/delete.png" width="16" height="16" alt="unblock_user"></a></br>').click(function(){ unbanUser(currentUser)}));
}

var unbanUser = function(name) {                    
        GM_deleteValue(name);
}; 
```

所以基本上这工作正常，所有被禁止的用户都呈现在一个列表中，我可以点击解禁。但是，一旦我单击任何用户调用“unbanUser”，列表中的最后一个用户就会被取消禁止，而不是我单击的那个用户。

我猜变量“currentUser”始终是列表中的姓氏，我有点希望它成为 for 循环完成后每个用户的修复链接。这是一项非常琐碎的任务，但我没有找到合适的解决方案。

你有什么提示吗？问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:47:01.623

在循环结束时，`currentUser`每次迭代都会被覆盖。在`click`函数内部，您指的是`currentUser`，它等于 的最后一个定义`currentUser`。

要修复它，请使用闭包：

```
function doSomething(currentUser) {
    manageBans.append($('<b>'+currentUser+'</b><a href="javascript:void(null)"><img src="/redaktion/style/delete.png" width="16" height="16" alt="unblock_user"></a></br>').click(function(){
        unbanUser(currentUser)
    }));
}

for (var i=0; i < banList.length; i++) {
    doSomething(banList[i]);
} 
```

# php - mod_rewrite 只接受破折号和字母数字，否则抛出 404

> ID：10073871
> 
> 赞同：1
> 
> 时间：2012-04-09T13:24:37.780
> 
> 标签：php, html, regex, mod-rewrite

我正在使用 mod_rewrite 将 URL 的末尾传输到我的 php 脚本，该脚本将充当 microcms。我的网址看起来像这样： `mysite.com/articles/some-article-about-css`

这会将以下内容传递给我的 PHP 脚本 index.php： `index.php?action=read&article=some-article-about-css`

我有问题：

1.  我不确定如何使用 mod_rewrite 只接受带有破折号的字母数字的最佳方法。我在互联网上找到了这条规则`((?:[a-z]+)?(?:[0-9]+)?-?)+`，它显然不允许双破折号更好，但它又长又令人困惑。我可以使用另一个（更短，更快）的规则吗？

2.  我想验证这条规则对我想要完成的事情是否有效。我对 mod_rewrite 不太擅长： `RewriteRule ^/articles/((?:[a-z]+)?(?:[0-9]+)?-?)+ /index.php?action=read&article=$1`

3.  我可以使用什么规则，以便如果 /articles/ 之后的 url 不是有效的字母数字 /w 破折号 url，自动抛出 404 而不是传递给我的脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:49:06.740

RewriteRule ^/articles/([a-zA-Z0-9-]*) /index.php?action=read&article=$1 [QSA,L]

重写规则 ^/articles/ - [R=404]

仅适用于字母数字和破折号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:41:14.887

我相信你不需要那个复杂的正则表达式。试试这个

```
RewriteRule ^articles/([^a-zA-Z0-9-]*) /index.php?page=$1 [L]
RewriteRule ^articles(.*) [R=404] 
```

# ios - Xcode 传递数据

> ID：10073873
> 
> 赞同：0
> 
> 时间：2012-04-09T13:24:42.040
> 
> 标签：ios, iphone, xcode, nsstring, textfield

(iPhone 开发 Xcode 4.3)

我在视图控制器上有一个文本字段，在另一个控制器上有一个 NSString。我想要做的是允许用户在文本字段中输入 URL 并将其作为路径传递给我的其他控制器。

这是我目前正在使用的 NSString：

```
NSString * path = @"http://www.test.com"; 
```

所以我想做类似的事情：

```
NSString * path = INPUT FROM USER; 
```

希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:29:41.747

利用

```
 NSString *path = textField.text; 
```

为那个 textField 创建 IBOutlate

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:24:56.677

基本上你需要两件事：

1.  从用户那里获取字符串

正如您已经知道的，您需要做的就是在您的文本字段上设置您的 IBOutlet 并读取字符串。

1.  将其传递给另一个视图控制器

您有两种选择：

首先，您可以将一个字符串添加到您的第二个视图控制器并设置它的属性。然后创建一个自定义 -init 来接收 url 字符串。在您的第一个视图控制器中，当您创建第二个视图控制器时（我假设是这种情况），使用您的自定义 -init 来设置值。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil andURL:(NSString *) url
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    // Custom initialization

    self.urlString = url;

    }
    return self;
} 
```

您还有另一个选择：在第二个视图控制器上创建一个方法。

所以在你的第二个视图控制器中，这样做：

```
-(void) setURL: (NSString *) url
{
    self.rulString = url;
} 
```

在您的第一个视图控制器中，执行以下操作：

```
SecondViewController *secondVC = [SecondViewController alloc] init];

// get url string from user input and store it in a local string variable named tempURL
[secondVC setURL:tempURL]; 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:38:29.007

```
NSString *urlString = [NSURL URLWithString:textfield.text]; 
```

# php - PHP认证注册用户

> ID：10073876
> 
> 赞同：1
> 
> 时间：2012-04-09T13:24:45.987
> 
> 标签：php, mysql, authentication

当您对注册用户进行身份验证时，您会提出请求，例如我发现的一个示例：

```
$user = $_POST['user'];
$pw = $_POST['password'];

$sql = "SELECT user,password FROM users 
    WHERE user='$user' 
    AND password='$pw' 
    LIMIT 1";
$result = mysql_query($sql);

if (mysql_num_rows($result)){
    //we have a match!
}else{
    //no match
} 
```

现在最终有什么好处或任何意义`LIMIT 1`？以及为什么只需要选择 user_id 就需要选择用户名和密码？

不会

```
SELECT user_id FROM users
WHERE user = '{$user}'
AND password = '{$pw}' 
```

相同的物流但更短的代码？

编辑：考虑到这个小细节，我又找到了一项防止黑客的检查。不应有多个用户具有相同的电子邮件和密码，因此如果他们以某种方式提供而不是密码，`123`例如字符串`' OR password = '*'`（或类似的逻辑），这将损害我的查询，没有限制会有所帮助，因为下一步我可以数数

```
if (count($result) > 1) {
   echo "we got hacked";
else 
   <proceed...> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T13:29:09.177

假设每个用户名/密码对在数据库中只有一行，LIMIT 子句通过在找到第一个匹配项后停止搜索来提高性能，主要是在与 ORDER BY 子句结合使用时。

从[MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/limit-optimization.html)：

> 如果将 LIMIT row_count 与 ORDER BY 一起使用，MySQL 会在找到排序结果的第一个 row_count 行后立即结束排序，而不是对整个结果进行排序。如果使用索引进行排序，则速度非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:31:23.840

最有可能的是，您将拥有一个唯一的`user`列，因此`LIMIT 1`没有必要 - 无论如何您不会有超过 1 行。

在这种情况下，它可能是一个装饰元素——自我解释的语法告诉阅读代码的程序员，该查询预计返回不超过一行。

除了你的问题，我强烈建议使用一些密码加密，例如`MD5()`. 教您存储纯密码的教程不是最好的...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T13:39:20.323

您可以阅读“ [SQL 注入：如何防止 PHP / MySQL 中的安全漏洞](http://www.learnphponline.com/security/sql-injection-prevention-mysql-php)”，看看如果没有适当的措施，您的登录可能会变得毫无用处。

上面更聪明的海报回答了其他所有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T13:30:59.837

在大多数情况下，您的表将保存唯一的用户名，因此您将始终返回 1 或 0 行。就您的代码而言，它没有任何区别。即使您返回了多行，您的代码仍然可以工作，因为您只检查是否存在行而不是返回了多少行（但这是错误的，因为您不知道实际登录的用户） .

基本上它只是告诉 MySQL 在找到满足 WHERE 条件的第一行之后停止搜索表。在某些情况下，甚至这可能是多余的（例如，如果您在“用户”字段上有一个 UNIQUE 索引）。

与您的问题无关的另一件事：请不要将此代码用于学习之外的任何事情。它充满了安全漏洞。在将此代码投入生产之前，请在 Google 上搜索“SQL 注入”和“安全存储密码”。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-09T13:34:40.927

首先，您需要从注入中清除字符串：

```
class main{
public function sanitize($str,$remove_nl=true)
        {
            stripslashes($str);

            if($remove_nl)
            {
                $injections = array('/(\n+)/i',
                    '/(\r+)/i',
                    '/(\t+)/i',
                    '/(%0A+)/i',
                    '/(%0D+)/i',
                    '/(%08+)/i',
                    '/(%09+)/i'
                    );
                $str = preg_replace($injections,'',$str);
            }

            return $str;
        }
} 
```

接下来是你的代码：

```
$main_class = new main();

$user = $main_class->sanitize(trim($_POST['user']));
$pw = $main_class->sanitize(trim($_POST['password']));

$sql = "SELECT * FROM `users` WHERE `user`='".$user."' AND `password`='".$pw."' LIMIT 0,1";
$result = mysql_query($sql) or die(mysql_error());
$count = mysql_num_rows($result);

if($count > 0){
    //we have a match!
}else{
    //no match
} 
```

# yii - Yii 自定义 CRUD。不同表的通用模型扩展

> ID：10073878
> 
> 赞同：1
> 
> 时间：2012-04-09T13:24:57.587
> 
> 标签：yii

我有 20 张桌子的项目。所有表中数据的管理都是相同的。只有表中的列会有所不同。所以我想为所有表创建通用模型、通用控制器和通用视图文件夹，然后只为每个表扩展所有这些类

**模型/Crud.php**

```
<?php

class Crud extends CActiveRecord
{
    public $crudTable = '';
    public $crudColumns = array();

    public static function model($className=__CLASS__)
    {
        return parent::model($className);
    }

    public function tableName()
    {
        return '{{'.$this->crudTable.'}}';        
    }

    public function rules()
    {
        $rules = array();

        foreach ($this->crudColumns as $k=>$v) {
            foreach ($v ['rules'] as $vv) {
                $rules[] = array_merge(array($k), $vv);    
            }
            if($v['search']) $rules[] = array_merge(array($k), array('safe', 'on'=>'search'));
        }

        return $rules;
    }

    public function relations()
    {
        return array(
        );
    }

    public function attributeLabels()
    {
        $attributeLabels = array();

        foreach ($this->crudColumns as $k=>$v) 
        {
            $attributeLabels[$k] = $v['attributeLabel'];
        }
        return $attributeLabels;
    }

    public function search()
    {
        $criteria=new CDbCriteria;

        foreach ($this->crudColumns as $k=>$v) 
        {
            if($v['search'])
            {
                $criteria->compare($k,$this->$k,(($v['search'] == 'partial') ? 'partial' : false));                
            }
        }

        return new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
        ));
    }
} 
```

**模型/国家.php**

```
class Country extends Crud
{
    public $crudTable = 'country';
    public $crudColumns = array(    
        'id' => array(
            'atributeLabel' =>'ID',
            'rules' => array (
                array('numerical', 'integerOnly'=>true)
            ),
            'search'=>true,
            'grid'=>true,                 
            'view'=>true,
            'form'=>true,                
        ),
        'title' => array(
            'atributeLabel' =>'Title',
            'rules' => array (
                array('required'),
                array('length', 'max'=>128)                                    
            ),
            'search'=>'partial',
            'grid'=>true,
            'view'=>true,
            'form'=>true,                                            
        ),                                 
        'code' => array(
            'atributeLabel' =>'Code',
            'rules' => array (
                array('required'),
                array('length', 'max'=>2)                                    
            ),
            'search'=>'partial',
            'grid'=>true,
            'view'=>true,
            'form'=>true,                                            
        ),        
        'description' => array( 
            'atributeLabel' =>'Description',
            'rules' => array (
                array('safe'),
            ),
            'search'=>'partial',
            'view'=>true,
            'form'=>true,                            
        ),                                 
        'onoff' => array(
            'atributeLabel' =>'Onoff',
            'rules' => array (
                array('numerical', 'integerOnly'=>true),
            ),
            'search'=>true,
            'grid'=>true,                
            'view'=>true,
            'form'=>true,                            
        )
    );

    public static function model($className=__CLASS__)
    {
        return parent::model($className);
    }

    public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
            'providers' => array(self::HAS_MANY, 'Provider', 'country_id'),
        );
    }
} 
```

**组件/CrudController.php**

```
class CrudController extends CController
{
    public $crudModel='';    
    public $crudModelString='';
    public $menu=array();
    public $breadcrumbs=array();

    public function filters()
    {
        return array(
            'accessControl', // perform access control for CRUD operations
        );
    }

    public function accessRules()
        {
        return array(
            array('allow',  // allow all users to perform 'list' and 'show' actions
                'actions'=>array('index', 'view'),
                'users'=>array('*'),
            ),
            array('allow', // allow authenticated users to perform any action
                'users'=>array('@'),
            ),
            array('deny',  // deny all users
                'users'=>array('*'),
            ),
        );
    }

    public function actionIndex()
    {
        $model=new $this->crudModel('search');
        $model->unsetAttributes();  // clear any default values
        if(isset($_GET[$this->crudModel]))
            $model->attributes=$_GET[$this->crudModel];

        $this->render('/crud/index',array(
            'model'=>$model,
        ));
    }        

    public function actionView($id)
    {
        $this->render('/crud/view',array(
            'model'=>$this->loadModel($id),
        ));
    }

...
Some code
...

    public function loadModel($id)
    {
        $model=Crud::model()->findByPk($id);
        if($model===null)
            throw new CHttpException(404,'The requested page does not exist.');
        return $model;
    }

...
Some code
...} 
```

**控制器/CountryController.php**

```
class CountryController extends CrudController
{
    public $crudModel='Country';
    public $crudModelString='country';    
} 
```

它在索引操作中正常工作，但 ?r=country/view&id=278 向我发送错误

`The table "Crud" for active record class "Crud" cannot be found in the database.`

如何将表名发送到静态方法并使此代码正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:31:39.140

像这样改变`loadModel`：

```
public function loadModel($id)
{
    $model=Crud::model($this->crudModel)->findByPk($id);
    if($model===null)
        throw new CHttpException(404,'The requested page does not exist.');
    return $model;
} 
```

这将加载适当表的模型。

# javascript - 反复绘制更新图像到画布（Safari 在加载过程中将图像空白）

> ID：10073890
> 
> 赞同：1
> 
> 时间：2012-04-09T13:25:39.900
> 
> 标签：javascript, canvas, safari

我正在画布的背景上绘制图像。此图像每秒刷新一次，但画布需要更频繁地重绘，每 0.5 秒一次。我似乎遇到的问题是 Safari 在更新画布时闪烁，因为它似乎丢失了 bgImg 变量中的图像数据。Firefox 按预期工作，没有闪烁。

有没有人知道如何避免这种情况？我错过了一些非常明显的东西吗？

要测试此代码，只需将下面的整个代码粘贴到 html 文件中，然后使用浏览器加载即可。它应该做的是：

*   创建画布
*   每秒加载一张图片
*   使用图像作为背景，每 500 毫秒重画一次画布。

这是代码：

```
<html>
<head>
<script type="text/javascript">
var bgImg = new Image();
var firstload = false;
var cv;
var ctx;

var updateBackground = function() {
    bgImg.onload = function() {
      firstload = true;
      console.log("image loaded. Dimensions are " + bgImg.width + "x" + bgImg.height);
    }
    bgImg.src = "http://mopra-ops.atnf.csiro.au/TOAD/temp.php?" + Math.random() * 10000000;
    setTimeout(updateBackground, 1000);
  }

  var initGraphics = function() {
    cv = document.getElementById("canvas");
    ctx = cv.getContext("2d");
    cv.width = cv.clientWidth;
    cv.height = cv.clientHeight;
    cv.top = 0;
    cv.left = 0;  
  }

  var drawStuff = function() {
    console.log("Draw called. firstload = " + firstload );
    ctx.clearRect(0, 0, cv.width, cv.height);
    if ( firstload == true) {
      console.log("Drawing image. Dimensions are " + bgImg.width + "x" + bgImg.height);
      try {
        ctx.drawImage(bgImg, 0, 0);                
      } catch(err) {
        console.log('Oops! Something bad happened: ' + err);
      }
    }
    setTimeout(drawStuff, 500);
  }

  window.onload = function() {
    initGraphics();
    setTimeout(updateBackground, 1000);
    setTimeout(drawStuff, 500);
    }
    </script>

    <style>
body    {
   background: #000000;
   font-family: Verdana, Arial, sans-serif;
   font-size: 10px;
   color: #cccccc;
   }

.maindisplay {
       position:absolute;
       top:    3%;
       left:   1%;
       height: 96%;
       width: 96%;
       text-align: left;
    border: 1px solid #cccccc;
}
       </style>
</head>
<body>
<div id="myspan" style="width: 50%">
<canvas id="canvas" class="maindisplay"></canvas>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T19:57:55.970

您的问题是您在`bgImg`加载时正在绘图。Webkit 在加载新图像时不会缓存旧图像数据；一旦`.src`设置了新图像，它就会清除图像。

您可以通过使用两个图像来解决此问题，在加载下一个图像时使用最后一个有效加载的图像进行绘图。

我在网上放了一个例子：http: [//jsfiddle.net/3XW8q/2/](http://jsfiddle.net/3XW8q/2/)

为 Stack Overflow 后代简化：

```
var imgs=[new Image,new Image], validImage, imgIndex=0;

function initGraphics() {
  // Whenever an image loads, record it as the latest-valid image for drawing
  imgs[0].onload = imgs[1].onload = function(){ validImage = this; };
}

function loadNewImage(){
  // When it's time to load a new image, pick one you didn't last use
  var nextImage = imgs[imgIndex++ % imgs.length];
  nextImage.src = "..."+Math.random();
  setTimeout(loadNewImage, 2000);
}

function updateCanvas(){
  if (validImage){ // Wait for the first valid image to load
    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
    ctx.drawImage(validImage, 0, 0);
  }
  setTimeout(updateCanvas, 500);
} 
```

# c# - MVC 使用从另一个视图中使用的基本视图模型派生的视图模型

> ID：10073891
> 
> 赞同：0
> 
> 时间：2012-04-09T13:25:46.280
> 
> 标签：c#, asp.net-mvc-3

这是一个 asp.net mvc3 项目。我有两个视图和它们自己对应的视图模型。

Home.aspx 有一个视图模型 HomeVM

HomeChild.aspx 有一个作为 HomeChildVM 的视图模型。

现在 HomeChildVM 是从 HomeVM 派生的，并且还有一些属性在它自己的视图中使用。我的控制器有一个返回 Home 视图的操作方法和另一个返回 HomeChild 视图的操作方法。这两种操作方法都调用一个业务方法，该方法返回一个类型为 HomeVM。然后我的操作方法将相同的返回到 aspx 视图。

```
return View(objHomeVM); 
```

现在，我不再编写另一个业务方法并重新重复所有代码以返回另一个视图模型类型，即 HomeChildVM，而是将 objHomeVM 的属性一个一个地分配给 objHomeChildVM，如下所示：

```
 objHomeChildVM.prop1 = objHomeVM.prop1;
 objHomeChildVM.prop2 = objHomeVM.prop2; 
```

然后返回它：

```
 return View(objHomeChildVM); 
```

有没有比一个一个地分配属性更好的方法呢？我觉得这种方法太原始了，除非这是唯一的方法。

HomeChild.aspx 目前有这个页面指令

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<HomeChildVM>" %> 
```

如果我将其更改为 HomeVM，那么我将无法使用 HomeChildVM 具有的仅特定于 HomeChild.aspx 页面的额外属性。

对此有什么想法吗？

谢谢你的时间...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:59:55.873

只是关于您的视图模型的注释。我会为这两个视图创建一个视图模型，即使两者都使用了一些属性。如果您必须删除 HomeVM 中的某个属性，您会怎么做？然后 HomeChildVM 分崩离析。

回到你关于一一分配属性的问题。我建议你看看[Auto Mapper](http://automapper.codeplex.com/)。它负责为您映射对象之间的属性。

**更新**

一旦你有了你的类型和对 AutoMapper 的引用，你就可以为这两种类型创建一个映射：

```
Mapper.CreateMap<Customer, CustomerDto>();  // Create the map 
```

左边的类型是源类型，右边的类型是目标类型。要执行映射，请使用 Map 方法：

```
CustomerDto dto = Mapper.Map<Customer, CustomerDto>(customer); 
```

以下是一些示例代码，您可以编写/使用它们在 2 个对象之间进行映射：

```
public static Customer Map(CustomerEntity entity)
{
     return new Customer
     {
          CustomerId = entity.CustomerId,
          Company = entity.CompanyName,
          City = entity.City,
          Country = entity.Country
     };
} 
```

然后使用它看起来像这样：

```
Mapper.Map(customer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:03:13.797

您是否考虑过在业务方法之外创建所需的 ViewModel，然后将 ViewModel 的引用作为 HomeVM 的一种类型传递到您的业务方法中以进行填充？IE：

```
public ActionResult HomeAction()
{
   HomeVM objHomeVM = new HomeVM();

   BusinessMethod(objHomeVM);

   return View(objHomeVM);
}

public ActionResult HomeChildAction()
{
   HomeChildVM objHomeChildVM = new HomeChildVM();

   BusinessMethod(objHomeChildVM);

   return View(objHomeChildVM);
}

private void BusinessMethod(HomeVM objHomeVM)
{
   ...
   objHomeVM.prop1 = prop1;
   objHomeVM.prop2 = prop1;
   ...
} 
```

记住 ViewModel 只是普通的对象。它们唯一的特别之处在于它们被称为 ViewModel。

# java - 如何在休眠中比较日期

> ID：10073893
> 
> 赞同：17
> 
> 时间：2012-04-09T13:26:09.013
> 
> 标签：java, spring, hibernate

在我的数据库日期为`2012-04-09 04:02:53` `2012-04-09 04:04:51` `2012-04-08 04:04:51`等，我需要在日期字段中检索具有当前日期的数据。我的意思是我只需要匹配`2012-04-09'`。我如何使用休眠标准来做到这一点。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-09T13:42:21.393

使用[Restrictions.between()](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/criterion/Restrictions.html#between%28java.lang.String,%20java.lang.Object,%20java.lang.Object%29)生成日期列在“2012-04-09 00:00:00”和“2012-04-09 23:59:59”之间的 where 子句

```
SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
Date fromDate = df.parse("2012-04-09 00:00:00");
Date toDate = df.parse("2012-04-09 23:59:59");

criteria.add(Restrictions.between("dateField", fromDate, toDate)); 
```

请注意，Criteria API 中使用的所有属性都是 Java 属性名称，而不是实际的列名称。

* * *

更新：仅使用 JDK 获取当前日期的 fromDate 和 toDate

```
Calendar calendar = Calendar.getInstance();
calendar.set(Calendar.HOUR_OF_DAY, 0);
calendar.set(Calendar.MINUTE, 0);
calendar.set(Calendar.SECOND, 0);
Date fromDate = calendar.getTime();

calendar.set(Calendar.HOUR_OF_DAY, 23);
calendar.set(Calendar.MINUTE, 59);
calendar.set(Calendar.SECOND, 59);
Date toDate = calendar.getTime();

criteria.add(Restrictions.between("dateField", fromDate, toDate)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T13:44:31.607

像这样？

```
criteria.add(Expression.eq("yourDate", aDate)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-22T10:03:03.477

```
fromDate.setTime(new Date());
fromDate.set(Calendar.HOUR_OF_DAY, 0);
fromDate.set(Calendar.MINUTE, 0);
fromDate.set(Calendar.SECOND, 0);
fromDate.set(Calendar.MILLISECOND, 0); 
```

这段代码非常危险......如果当天切换到夏令时（例如 06.04.1980），您最终会出现以下异常！！！

```
 java.lang.IllegalArgumentException: HOUR_OF_DAY: 0 -> 1day

HQL: from human pat where year(pat.birthdate) = :start_day and month(pat.birthdate) = :start_month and year(pat.birthdate) = :start_year ");

params.put("start_day", startDate.get(Calendar.DAY_OF_MONTH));
params.put("start_month", startDate.get(Calendar.MONTH) + 1);
params.put("start_year", startDate.get(Calendar.YEAR)); 
```

年/月/日函数使用底层 db 函数（提取、...）并仅比较这些值。因此，我不需要将导致上述异常的时间设置为 0。只是我如何解决问题的一个例子！也许它有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T13:36:28.077

最简单的方法是获取日期在给定日期的开始和结束之间的所有记录：

```
WHERE date BETWEEN :from AND :to 
```

`from`并`to`在您的 Java 代码中进行计算。

对于计算午夜：

```
import static org.apache.commons.lang.time.DateUtils.ceiling;
import static org.apache.commons.lang.time.DateUtils.truncate;

Date someDay = new Date();
Date from = truncate(someDay, Calendar.DAY_OF_MONTH);
Date to = new Date(ceiling(someDay, Calendar.DAY_OF_MONTH).getTime() - 1); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-09T13:42:47.447

如何在 Hibernate 中进行操作已经说过。您可以`Timestamp`使用例如以下方法在 Java 代码中准备对象：

```
Calendar cFrom = Calendar.getInstance();
cFrom.setTime(new Date()); /* today */
cFrom.set(Calendar.HOUR_OF_DAY, 0);
cFrom.set(Calendar.MINUTE, 0);
cFrom.set(Calendar.SECOND, 0);
cFrom.set(Calendar.MILLISECOND, 0);
Timestamp from = new Timestamp(cFrom.getTime().getTime());
Calendar cTo = Calendar.getInstance();
cTo.setTime(new Date()); /* today */
cTo.set(Calendar.HOUR_OF_DAY, 23);
cTo.set(Calendar.MINUTE, 59);
cTo.set(Calendar.SECOND, 59);
cTo.set(Calendar.MILLISECOND, 999);
Timestamp to = new Timestamp(cTo.getTime().getTime());

final String QUERY = ""
  + "SELECT tr "
  + "FROM Type tr "
  + "WHERE tr.timestamp >= :timestampFrom AND tr.timestamp <= :timestampTo";
Query query = entityManager.createQuery(QUERY);
query.setParameter("timestampFrom", from);
query.setParameter("timestampTo", to);
@SuppressWarnings("unchecked")
List<Type> ts = (List<Type>)query.getResultList(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T13:39:34.747

```
Restrictions.between("dateColumn", midnight1, midnight2) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T10:40:47.723

```
The following code will work

Calendar fromDate = Calendar.getInstance();
fromDate.setTime(new Date());
fromDate.set(Calendar.HOUR_OF_DAY, 0);
fromDate.set(Calendar.MINUTE, 0);
fromDate.set(Calendar.SECOND, 0);
fromDate.set(Calendar.MILLISECOND, 0);

Calendar toDate = Calendar.getInstance();
toDate.setTime(new Date());
toDate.set(Calendar.HOUR_OF_DAY, 23);
toDate.set(Calendar.MINUTE, 59);
toDate.set(Calendar.SECOND, 59);
toDate.set(Calendar.MILLISECOND, 999);

criteria.add(Restrictions.between("loadDate", fromDate.getTime(),
                    toDate.getTime())); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-06T21:37:37.020

// 日期时间比较 Hibernate 4.3

```
 Select c from Customer c where c.date<{d '2000-01-01'} 
```

# asp.net-mvc - 在 ASP.NET MVC 3 中使用 HtmlHelper 获取当前视图的 URL

> ID：10073894
> 
> 赞同：4
> 
> 时间：2012-04-09T13:26:10.193
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

[我在这里](https://stackoverflow.com/questions/10069687/use-htmlhelper-to-get-action-in-beginform-method-of-asp-net-mvc-3)问了一个类似的问题，我认为这是一个非常简单的问题（当然不适合我）。我有一个 Html 助手的扩展方法，我需要使用 HtmlHelper 获取当前视图的 url。有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T14:14:12.597

根据您的评论和您链接到的原始线程，我认为您想使用 Url 助手来获取表单操作的 URL，但我可能误解了您想要的内容：

在视图中：

```
 @Url.Action(null) returns the current controller/action
 @Url.Action("Action") returns a custom action with current controller
 @Url.Action("Action","Controller") returns a custom controller and action 
```

在 HTML 助手中：

```
 public static MvcHtmlString MySpecialHelper(this HtmlHelper htmlHelper)
 {
      UrlHelper urlHelper = new UrlHelper(htmlHelper.ViewContext.RequestContext,htmlHelper.RouteCollection);
      string url = urlHelper.Action("Controller","Action");

      //To get the action based on the current Action/Controller use:
      url = urlHelper.Action(htmlHelper.ViewData["action"] as string);

      //or
      url = urlHelper.Action(null);

      return new MvcHtmlString(url);
 } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-09T13:56:15.883

如果您想获取有关路由信息的信息，例如调用的控制器或操作方法

您可以从对象访问`RouteData`字典`ViewContext`

会是这样

```
@ViewContext.RouteData.Values["Controller"] 
```

使用`RouteData`字典，您可以获得有关控制器、操作和额外参数名称所需的所有信息，具体取决于您想要什么

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-09T13:36:44.827

如果您只想要请求的 url，那么您可以通过`Request.Url`对象获取它。这会返回一个 Uri，但如果你想要原始 url，那么`Request.RawUrl`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-08T20:48:12.060

死灵术

```
public static MvcHtmlString MyHelper(this HtmlHelper htmlHelper)
{
    var url = htmlHelper.ViewContext.HttpContext.Request.Url;
    //more code
} 
```

OP 询问“Html 助手的扩展方法” - 所以是的，就是这样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-31T18:48:13.810

您可以使用 Html Helper 传递对象页面作为参考，如下所示：

```
@helper GoHome(WebViewPage page)
{
   <a href="@page.Url.Action("Index", "Home")"></a>
} 
```

在视图中只使用：

```
@Links.GoHome(this) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T10:27:37.200

您可以使用 Request.RawUrl 属性或 Request.Url.ToString() 或 Request.Url.AbsoluteUri。

# python - 如何在 panda3d 中使用 setRamImage？

> ID：10073897
> 
> 赞同：1
> 
> 时间：2012-04-09T13:26:16.650
> 
> 标签：python, panda3d

编辑：一个最小的失败测试用例现在在 github 上： [https ://github.com/shadowmint/Panda-setRamImage-problem](https://github.com/shadowmint/Panda-setRamImage-problem)

--

我有一个 C 库，它将 unsigned char * 指针传递回 python，其中包含 RGB 像素数据。

执行此操作的 python api 是：

```
# unsigned char *ar_get_rgb(void *handle);
libar.ar_get_rgb.argtypes = [ c_void_p ]
libar.ar_get_rgb.restype = POINTER(c_char) 
```

在 panda3d 中，我试图将这些数据渲染为纹理。这里有一篇关于如何做到这一点的博客文章：http: [//www.panda3d.org/blog/?p=96](http://www.panda3d.org/blog/?p=96)

但是，我发现这样做有一些非常严重的限制，我在这里讨论过：http: [//www.panda3d.org/forums/viewtopic.php?t=13183](http://www.panda3d.org/forums/viewtopic.php?t=13183)，结果我现在正在尝试使用 setRamImage() api 设置纹理内存。

似乎必须有一种方法可以做到这一点，但我目前能够做到的唯一方法是在纹理上使用逐像素设置调用，如下所示：

```
 def updateTextureTask(self, t):
    expectedSize = self.getExpectedRamImageSize()
    print("Expected length: " + str(expectedSize))
    (rgb, depth) = self.__vision.next()
    p = PTAUchar.emptyArray(expectedSize)
    for i in range(0, self.__vision.width * self.__vision.height * 3):
      p.setElement(i, ord(rgb[i]))
    print("PTAU length: " + str(p.size()))
    self.setRamImage(CPTAUchar(p))
    return Task.cont 
```

这行得通……但它每 2 秒以惊人的 1 帧运行。

如果我调用 p.setData(rgb) 来设置 PTAUchar 的数据（提示： http: [//www.panda3d.org/dox/python/html/classpanda3d_1_1core_1_1PTAUchar.html](http://www.panda3d.org/dox/python/html/classpanda3d_1_1core_1_1PTAUchar.html)）我得到：

```
Expected length: 921600
RGB buffer size: 921600 <-- C debugging data
PTAU length: 4
Assertion failed: compression != CM_off || image.size() == do_get_expected_ram_image_size() at line 833 of panda/src/gobj/texture.cxx
Traceback (most recent call last): 
```

我对这个“4”长度的来源感到困惑，因为 RGB 数组中前 20 个奇数值的转储就像：

```
0: 163, 1: 151, 2: 162, 3: 85, 4: 83, 5: 190, 6: 241, 7: 252, 8: 249, 9: 121, 10: 107, 11: 82, 12: 20, 13: 19, 14: 233, 15: 226, 16: 45, 17: 81, 18: 142, 19: 31
PTAU length: 4 
```

必须有一种方法可以将我的 unsigned char * 数组转换为可以输入 PTAUchar.setData 或 PTAUchar.setSubdata 的东西，但我想不通。

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:11:00.057

该`setData`函数的定义是：

```
PTAUchar.setData(string data) 
```

你没有传递一个字符串。您正在传递一个指向字符串的指针。我认为您想要做的是让您的 C 库将 python 字节字符串传递回您的 python 代码，然后将其传递给`setData`.

PS：来到 freenode 上的#panda3d 是获得实时帮助的好地方。

# android - TYPE_KEYGUARD 拨打电话后保持全屏模式

> ID：10073898
> 
> 赞同：5
> 
> 时间：2012-04-09T13:26:17.327
> 
> 标签：android, window, overriding, statusbar

我们将向客户提供设备，他们需要能够通过按钮呼叫我们。在我的全屏`Activity`中，我有一个按钮可以拨打帮助台电话号码，因此`onClick()`它执行以下操作：

```
 try {
        Intent intent = new Intent(Intent.ACTION_CALL);
        intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
        intent.setData(Uri.parse("tel:" + phoneNumber));
        mContext.startActivity(intent);
    } catch (Exception e) {
        Toast.makeText(mContext, mContext.getString(R.string.couldntcall), Toast.LENGTH_LONG).show();
    } 
```

当拨号器关闭时，标题栏突然保持可见，我猜它与覆盖`HOME`按钮有关：

```
@Override
public void onAttachedToWindow()
{  //HOMEBUTTON
    if(OnLockMode())
    {   
        this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
          super.onAttachedToWindow();
    }
    else
    {
        this.getWindow().setType(WindowManager.LayoutParams.TYPE_APPLICATION); 
        super.onAttachedToWindow();
    }
} 
```

有人有这个问题的解决方案吗？

我尝试了以下方法：

我在清单中输入：

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

并用于`OnCreate`：

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

在这两个`onCreate()`以及在`onResume()`：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN); 
```

仍然显示标题栏。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-17T12:36:44.050

将此添加到清单中。

```
<uses-permission android:name="android.permission.EXPAND_STATUS_BAR"/> 
```

在 onCreate() 里面

```
this.requestWindowFeature(Window.FEATURE_NO_TITLE); 
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_home);
    View v = findViewById(R.id.home_view);
    v.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE); 
```

其中 home_view 是 xml 文件的父视图。

```
 @Override
     public boolean onKeyDown(int keyCode, KeyEvent event) {
            return false;
        }

 public void onWindowFocusChanged(boolean hasFocus)
     {
             try
             {
                if(!hasFocus)
                {
                     Object service  = getSystemService("statusbar");
                     Class<?> statusbarManager = Class.forName("android.app.StatusBarManager");
                     Method collapse = statusbarManager.getMethod("collapse");
                     collapse .setAccessible(true);
                     collapse .invoke(service);
                }
             }
             catch(Exception ex)
             {
             }
     } 
```

您无法捕获 home 事件，唯一可以做的就是给您的应用程序 home 类别并让用户选择。

```
 <category android:name="android.intent.category.HOME" /> 
```

# jsf - 显示数据库 blob 图像 里面

> ID：10073905
> 
> 赞同：34
> 
> 时间：2012-04-09T13:26:36.437
> 
> 标签：jsf, primefaces, dynamic-content, uirepeat, graphicimage

我在 JBoss 7.1.1 上使用 PrimeFaces 3.2。

我正在尝试显示存储在 MySQL 数据库中的 BLOB 中的图像`<ui:repeat>`。图像存储在a中`byte[]`，然后转换为a `StreamedContent`，如下所示：

```
InputStream stream = new ByteArrayInputStream(ingredient.getImage());
ingredient.setJsfImage(new DefaultStreamedContent(stream, "image/jpg")); 
```

然后我试图在 Facelet 中显示它，如下所示：

```
<ui:repeat var="ingredient" value="#{formBean.ingredientResultSet}">
    <p:panel id="resultsPanel" header="#{ingredient.location.shopName}">
        <p:graphicImage value="#{ingredient.jsfImage}" alt="No picture set" />
... 
```

但是，在加载页面时，我在 JBoss 中收到以下错误：

> 严重 [org.primefaces.application.PrimeResourceHandler] (http--127.0.0.1-8080-12) 流式动态资源错误。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-15T12:07:28.580

您需要意识到，`<p:graphicImage>`实际上只使用一个 URL 呈现一个`<img src>`元素，然后 Web 浏览器将在解析获得的 HTML 标记并呈现结果时单独调用该 URL。

所以，无论你在它的 getter 方法中做什么，都`<p:graphicImage>`必须设计成可以在每个请求的基础上调用它。因此，最明智的方法是创建一个`<p:graphicImage>`，`<f:param>`其中`<p:graphicImage value>`指向一个完全独立的请求或应用程序范围的 bean（因此绝对不是视图或会话范围），并且这些`<f:param value>`点是唯一的图像标识符。

例如

```
<p:graphicImage value="#{images.image}">
    <f:param name="id" value="#{someBean.imageId}" />
</p:graphicImage> 
```

支持bean`Images`看起来像这样：

```
@Named
@ApplicationScoped
public class Images {

    @EJB
    private ImageService service;

    public StreamedContent getImage() throws IOException {
        FacesContext context = FacesContext.getCurrentInstance();

        if (context.getCurrentPhaseId() == PhaseId.RENDER_RESPONSE) {
            // So, we're rendering the view. Return a stub StreamedContent so that it will generate right URL.
            return new DefaultStreamedContent();
        }
        else {
            // So, browser is requesting the image. Return a real StreamedContent with the image bytes.
            String id = context.getExternalContext().getRequestParameterMap().get("id");
            Image image = service.find(Long.valueOf(id));
            return new DefaultStreamedContent(new ByteArrayInputStream(image.getBytes()));
        }
    }

} 
```

或者，如果您已经在使用[OmniFaces 2.0 或更新版本](http://omnifaces.org)，那么请考虑使用它[`<o:graphicImage>`](http://showcase.omnifaces.org/components/graphicImage)来代替它，它可以更直观地使用，几乎完全符合您的预期。另请参阅有关该主题[的博客](http://balusc.blogspot.com/2014/11/omnifaces-20-released.html)。

### 也可以看看：

*   [使用 p:graphicImage 和 StreamedContent 显示来自数据库或远程源的动态图像](https://stackoverflow.com/questions/8207325/display-image-from-database-with-pgraphicimage/12452144#12452144)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T14:10:03.407

我不明白你为什么需要这个。您可以创建一个 servlet，该 servlet 将使用映射“/images/yourimage.jpg”从数据库中获取图像。

这是一个快速教程，其中包含有关如何执行此操作的相应代码。

[**JSF - 在 JSF 中显示来自数据库的图像**](http://tutslink.blogspot.com/2012/04/jsf-displaying-images-from-database-in.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-02T13:00:49.333

谢谢BalusC。我通过在支持 bean 中定义一个整数并在更新图像的 ByteArray 时为其分配一个不同的值来做到这一点。该整数用作图像的唯一标识符。然后我将此整数设置为页面`<f:param>`内`<p:graphicImage>`的值。

图片标签看起来像

```
 <p:graphicImage value="#{empBean.image}">
    <f:param name="id" value="#{empBean.imageId}" />
  </p:graphicImage>` 
```

并将支持 bean 中的图像设置为

```
 if(user.getPicture()!=null){
        imageId = (int) new Date().getTime();
        BinaryStreamImpl bs = new BinaryStreamImpl(user.getPicture());  
//picture is byte[] property in user class      
        this.image =   new DefaultStreamedContent(bs.getInputStream(), "image/png");
    } 
```

它现在工作良好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T15:32:50.567

您必须记住`graphicImage`组件在页面上呈现的内容。它呈现给 HTML`<img>`元素。在浏览器中，将对 JSF 页面进行请求，然后对页面上的每个图像也将发生后续请求。

这些图像来自 PrimeFaces 资源 servlet 而不是 FacesServlet，这意味着托管 Bean 的范围及其属性可能不适用。

尝试先将 blob 加载到字节数组中，然后这可能会开始工作。

**编辑：**请参阅我对这个类似问题的以下回答。 [图形图像未在 Primefaces 中呈现流式内容](https://stackoverflow.com/questions/9525013/graphicimage-not-rendering-streamedcontent-in-primefaces/9533162#9533162)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-19T09:15:22.890

```
InputStream is = new ByteArrayInputStream((byte[]) yourBlobData);
myImage = new DefaultStreamedContent(is, "image/png"); 
```

在jsf页面中；

```
<p:graphicImage value="#{controller.myImage}" style="width:200px;width:500px" /> 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-14T18:22:29.013

嗯，我 99% 肯定这`<p:graphicImage`不适用于 ui:repeat 你会遇到很多问题（因为我做了 XD），我建议你创建一个 servlet 并将图像作为输入流提供（有很多例子出来那里）。

# migration - 将与源组件关联的自定义元数据迁移到 Tridion 环境的最佳方式

> ID：10073906
> 
> 赞同：3
> 
> 时间：2012-04-09T13:26:47.733
> 
> 标签：migration, metadata, tridion

如果我们将内容从源 Content Management System 迁移到 Tridion，将与源 Content Management System 的组件（内容）关联的自定义元数据迁移到 Tridion 的最佳方法是什么？是直接迁移到sql server还是可以选择xml文件等形式迁移？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T13:53:52.773

不支持直接迁移到 SQL Server，由于可能存在数据一致性问题，整个系统在那时将不受支持。

最直接的方法是从源系统读取数据，并使用 Tridion API 重新创建项目。

如果迁移元数据，某些数据可能最适合分类，这意味着您需要先迁移关键字/结构，然后在内容进入 Tridion 时对其进行标记。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T13:56:11.233

将内容迁移到 Tridion 时，您有几个选择。

如果您正在谈论迁移到 SQL 服务器作为中间格式，或者直接迁移到 Tridion 数据库，我无法从上面理解。直接导入 Tridion 数据库绝对不是受支持的解决方案，并且可能导致不可预知的结果。

您需要使用 API，Core Service 或 TOM.NET API（如果您有 Tridion 2011）或旧的 TOM API（如果没有）。

一种流行的方法是将所有内容导出为 XML 格式，然后您可以使用 .NET 应用程序对其进行处理。

Ryan Durkin和 Nuno Linhares[这里](http://blog.building-blocks.com/creating-custom-pages-using-the-core-service-in-sdl-tridion-2011)有一些关于将内容迁移到 Tridion 的好文章[。](http://nunolinhares.blogspot.co.uk/2011/06/importing-content-into-tridion.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T22:50:30.237

如前所述，如果您打算使用 SDL Tridion 作为最终的 CMS，则不能直接迁移到数据库中。除了为 Migrate 选择的支持机制外，请注意如何在新 CMS 中构建元数据，因为取决于元数据项之间的卷、结构、层次结构和关系，该过程可能会变得复杂。还要特别注意蓝图概念，因为您可能可以将旧系统中的重复值合并到仅继承的值中。

不要只考虑如何将元数据放入系统，还要考虑如何在新 CMS 中使用和维护元数据，在本例中为 SDL Tridion

您还可以查看有关迁移和计划迁移的最新帖子，以防添加更多信息

[我们可以自动迁移到 SDL Tridion 吗？](https://stackoverflow.com/questions/9645999/can-we-automate-migrating-to-sdl-tridion/9934000#9934000)

# mysql - 是否可以在 SQL 数据库中存储图片、声音、视频？

> ID：10073909
> 
> 赞同：1
> 
> 时间：2012-04-09T13:27:02.850
> 
> 标签：mysql, sql, database, insert

是否可以在 SQL 数据库（或任何其他数据库）中存储图片、声音、视频？如果是，它应该是什么格式，如果有的话，请指定必须配置的特殊设置。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T13:57:51.447

在 MySQL 中，您可以使用列的 BINARY 或 VARBINARY 数据类型将任何二进制内容存储在表中。相当所有的数据库系统都是这样的数据类型。它可用于存储完整的文件内容，例如图片、视频、声音……或只是一个二进制片段。

然而，将二进制文件存储在数据库中被认为是一种不好的做法，因为它总是会让人失望。事实上，存储在数据库中的文件无法轻松处理以进行下载、包含在 HTML 页面中、流式传输等。由于它的长度，操作起来总是很复杂。大多数情况下，与存储在目录中的文件相比，在数据库中排序的文件是不利的。建议将文件名存储在数据库中，并将实际文件保存在物理目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:30:41.223

虽然一般不建议将图像存储在数据库中，但最好存储图像的路径。尽管如此，可以使用 longblob 数据类型将图像存储在数据库中。从 MySql 论坛查看这个[示例。](http://forums.mysql.com/read.php?20,17671,27914)

# android - 如何在android中创建一个具有多种类型列表的对话框？

> ID：10073912
> 
> 赞同：0
> 
> 时间：2012-04-09T13:27:12.583
> 
> 标签：android, dialog

我想创建一个对话框，其中包含一个具有 2 个选项的简单列表。但我还想在底部添加一个复选框条目。这是代码。

```
 final String s1 = "item 1";
    final String s2 = "item 2";
    final CharSequence[] items = { s1, s2 };

    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    builder.setItems(items, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {

if (items[item].toString().equalsIgnoreCase(s1)) {
                item1selected();

            } else if (items[item].toString().equalsIgnoreCase(s2)) {
                item2selected();
            }
        }
    }).create();
    builder.setMultiChoiceItems(R.array.select_dialog_item,
                    new boolean[]{false},
                    new DialogInterface.OnMultiChoiceClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton,
                                boolean isChecked) {

                            preferences.edit().putBoolean(getString(R.string.pref_entry), isChecked).commit();
                        }
                    }).create();
builder.show(); 
```

此处仅显示复选框项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:51:13.120

你不能将两者结合起来。

setMultiChoiceItems 定义为：

```
public Builder setMultiChoiceItems(int itemsId, boolean[] checkedItems, 
            final OnMultiChoiceClickListener listener) {
        P.mItems = P.mContext.getResources().getTextArray(itemsId);
        P.mOnCheckboxClickListener = listener;
        P.mCheckedItems = checkedItems;
        P.mIsMultiChoice = true;
        return this;
    } 
```

重置之前设置的项目。

```
public Builder setItems(CharSequence[] items, final OnClickListener listener) {
        P.mItems = items;
        P.mOnClickListener = listener;
        return this;
    } 
```

执行您尝试的方法是在对话框 [1] 中使用自定义视图或使用合并适配器 [1] 并将不同的列表组合到一个适配器并使用 setAdapter 将其设置为警报对话框。

[1] [http://developer.android.com/reference/android/app/AlertDialog.html#setView(android.view.View](http://developer.android.com/reference/android/app/AlertDialog.html#setView(android.view.View) , int, int, int, int)

[2] [https://github.com/commonsguy/cwac-merge](https://github.com/commonsguy/cwac-merge)

# c# - C语言中的C#Array.Copy()之类的函数

> ID：10073921
> 
> 赞同：4
> 
> 时间：2012-04-09T13:27:56.907
> 
> 标签：c#, c

我正在寻找一个类似于 C# Array.Copy() 的 C 函数。我只找到了 memcpy()，但我也需要从特定索引中复制。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T13:31:53.410

如果你有这样的数组：

```
SomeType myArray[50]; 
```

并且您想要复制索引为 19-29 的元素（第 20 到第 30 个元素）。

然后你做：

```
memcpy(dest, &myArray[19], 10 * sizeof(SomeType)); 
```

*注意：此代码段未提供初始化`myArray`或分配内存到`dest`*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T13:29:54.000

`memcpy`就是你所拥有的。如果你想复制特定的范围，它是这样的：

```
memcpy(dst, &src[i_start], num_to_copy * sizeof(*src)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T13:29:50.843

使用指针算法。这是邪恶的，但在 C 中，它是你的朋友。

# android - 具有多个布局的 ListView 在滚动时崩溃

> ID：10073922
> 
> 赞同：2
> 
> 时间：2012-04-09T13:27:58.170
> 
> 标签：android, android-layout, adapter

我有一个自定义适配器来显示无聊的东西列表。现在，我想添加一个带有摘要（简历）的最后一项。

我正在使用两个布局和两个视图，它有点工作 ![在此处输入图像描述](../Images/01745d7894d399c95d171c51a68340ba.png)

**当我滚动回第一项时，问题就开始了**。当“简历”项消失（最后一项）时，活动崩溃。

让我向您展示适配器代码（相关行）

```
public class AdapterListaDeudaCliente extends BaseAdapter
{
    final private int VIEW_TYPES = 2;
    final private int TIPO_FACTURA = 1;
    final private int TIPO_RESUMEN = 2;

    public int getViewTypeCount()
    {
        return VIEW_TYPES; 
    }

    public int getItemViewType(int position) 
    {
        if(position%2==0)
            return TIPO_RESUMEN;
        else
            return TIPO_FACTURA;
    }

    public int getCount()
    {
        return data.length;
    }

    public View getView(int position, View convertView, ViewGroup parent)
    {
         int tipo = getItemViewType(position);
            switch(tipo)
            {
                case TIPO_FACTURA: convertView = layoutInflater.inflate(R.layout.elemento_deuda_basico, null);
                                                 break;
                case TIPO_RESUMEN: convertView = layoutInflater.inflate(R.layout.elemento_deuda_resumen, null);
                                                 break;
            }
        return convertView;
    }
} 
```

最后，崩溃日志：

```
FATAL EXCEPTION: main
java.lang.ArrayIndexOutOfBoundsException
    at android.widget.AbsListView$RecycleBin.addScrapView(AbsListView.java:4078)
    at android.widget.AbsListView.trackMotionScroll(AbsListView.java:2915)
    at android.widget.AbsListView.onTouchEvent(AbsListView.java:2065)
    at android.widget.ListView.onTouchEvent(ListView.java:3315)
    at android.view.View.dispatchTouchEvent(View.java:3766)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:897)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1701)
    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1111)
    at android.app.Activity.dispatchTouchEvent(Activity.java:2086)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1685)
    at android.view.ViewRoot.handleMessage(ViewRoot.java:1785)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4635)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:916)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:674)
    at dalvik.system.NativeStart.main(Native Method) 
```

如果这段代码根本不起作用，我会怀疑这是显而易见的事情，但只会在摘要视图消失时崩溃......我无法检测到失败。

谢谢！！

我更改了适配器和布局。每个布局仅由一个纯文本视图组成。当我滚动 listView 时应用程序崩溃。

这很奇怪。

更多信息：我正在使用 API 级别 8 和兼容性包。该活动是一个 FragmentActivity，我在 ViewPager 中使用 listView。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T11:59:12.010

这很奇怪......但问题就在这里：

```
final private int VIEW_TYPES = 2;
final private int TIPO_FACTURA = 1;
final private int TIPO_RESUMEN = 2; 
```

我将其更改为：

```
final private int VIEW_TYPES = 2;
final private int TIPO_FACTURA = 0;
final private int TIPO_RESUMEN = 1; 
```

现在它起作用了......

我个人认为这没有任何意义......为什么视图类型应该从零开始？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:19:46.350

我猜数组的长度和数组中的项目数存在一些问题..这导致了问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:43:17.473

不是你为什么会崩溃的答案，但听起来你真正想要的是页脚。请参阅[此示例](http://www.vogella.de/articles/AndroidListView/article.html#miscellaneous_headerfooter)。这样您就可以摆脱开关和类别代码。请记住，您**必须先**打电话`addFooterView()` **，然后**再打电话`setAdapter()`。

# objective-c - 通过编码了解 Wi-fi 信号强度，即点 1 点、2 点等..iPhone

> ID：10073923
> 
> 赞同：0
> 
> 时间：2012-04-09T13:28:01.803
> 
> 标签：objective-c, ios4, xcode4, wifi

我想知道 Wifi 信号强度。通过编码

谁能给我一些示例代码或示例

任何帮助都不仅仅是感谢。

# javascript - 如何在谷歌分析中停止会话（跟踪）

> ID：10073927
> 
> 赞同：0
> 
> 时间：2012-04-09T13:28:05.190
> 
> 标签：javascript, google-analytics

我使用来自谷歌分析主页的代码和远程 ga.js。除了一件事之外，所有作品都很酷：平均。页面上的时间。我在浏览器中关闭页面，但我的会话保持活动状态。我想从 JS 方便地停止会话。我尝试搜索但没有。我该怎么做 ？

**更新**

你想我。我**知道**向 GA 说会议结束的那一刻。我的应用在 iOS 上的 UIWebView 中播放。所以我想在应用退出时发送终止。就是这么简单。不是吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:58:33.257

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:45:58.330

JavaScript 不知道页面关闭和页面刷新以及页面导航离开之间的区别。另外，当调用 unload 事件时，JavaScript 没有可靠的方法将信息发送到服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T21:51:56.110

您正在寻找网站/页面上的真实时间 看看[Savio 提出的策略](http://www.savio.no/blogg/a/96/how-to-measure-true-time-with-google-analytics)

# c++ - G++ 编译器错误或错误代码？: "非模板的模板定义"

> ID：10073928
> 
> 赞同：10
> 
> 时间：2012-04-09T13:28:05.900
> 
> 标签：c++, templates, gcc, c++11, g++

作为大型程序的特征类的一部分，我尝试创建一个静态类变量，该变量可能具有不同的值，具体取决于实例化封闭类模板的类型。

我已经简化了相关代码以生成我正在谈论的基本示例：

```
#include <iostream>
#include <string>
#include <type_traits>

template <class T, class Enable = void>
struct Foo;

template <class T>
struct Foo<T,
    typename std::enable_if<std::is_integral<T>::value>::type
>
{
    static std::string message;
};

template <class T>
struct Foo<T,
    typename std::enable_if<std::is_floating_point<T>::value>::type
>
{
    static std::string message;
};

template <class T, class Enable>
std::string Foo<T, Enable>::message; 
```

使用 GCC 4.6，这会产生编译器错误：`template definition of non-template ‘std::string Foo<T, Enable>::message`. 问题的出现是因为最后两行，我只是在其中定义静态变量`std::string Foo<T, Enable>::message`。

我很困惑为什么会这样。如果我省略最后两行，编译器错误就会消失（但这当然会导致链接器错误。）这是 GCC 的编译器错误吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T13:42:29.723

这仅在您的模板参数与部分特化匹配时才有效：

```
template <class T>
std::string Foo<T,
    typename std::enable_if<std::is_integral<T>::value>::type
>::message;

template <class T>
std::string Foo<T,
    typename std::enable_if<std::is_floating_point<T>::value>::type
>::message; 
```

这在 C++03 标准的第 14.5.4.3 节中指定。这个想法是部分特化是一个新模板，并且外部定义的成员的模板参数必须匹配类定义的模板参数，以便它知道该成员使用哪个模板。

在您的示例中，该规则避免为非整数或浮点类型定义消息成员。

# html - 跨度是垂直的

> ID：10073933
> 
> 赞同：0
> 
> 时间：2012-04-09T13:28:42.770
> 
> 标签：html, css

我正在尝试在我的页面中实现分页。

```
<span height="40px"><span class="pg-normal" onclick="pager.prev();"> « Prev </span>
 |
<span id="pg1" class="pg-selected" onclick="pager.showPage(1);" style="display: block;">1</span>
<span id="sp1" style="display: block;">|</span>
<span id="pg2" class="pg-normal" onclick="pager.showPage(2);" style="display: block;">2</span>
<span id="sp2" style="display: block;">|</span>
<span id="pg3" class="pg-normal" onclick="pager.showPage(3);" style="display: block;">3</span>
    <span id="sp3" style="display: block;">|</span></span> 
```

除了这个 CSS 问题，它几乎完成了。
我创建了一个[JSFIDDLE](http://jsfiddle.net/bGMa9/)。我想要它不会出现的单行结果。任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:33:37.080

那是因为它们都具有`display: block`将它们从内联 tekst 流中取出并将它们放在单独的行上的样式。

这是一个有效的小提琴：http: [//jsfiddle.net/sg3s/bGMa9/2/](http://jsfiddle.net/sg3s/bGMa9/2/)

如果您想将它们设置为像块元素一样的样式，但不让它们离开 tekst 流程，您可以使用`display: inline-block`或将它们设为块级元素，但用于`float: left;`使它们彼此相邻。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T13:30:54.830

跨度是堆叠的，因为你给了它们`display: block;`。只需删除它，它们应该都是内联的。

**更新**

你说你想显示和隐藏元素。要使用内联元素做到这一点，只需设置`display`为`none`隐藏，设置为`''`（空字符串）或`inline`显示。

见[http://jsfiddle.net/bGMa9/4/](http://jsfiddle.net/bGMa9/4/)

# php - MongoDB 在 VPS 或未安装 mongoDB 的云服务上的性能

> ID：10073934
> 
> 赞同：1
> 
> 时间：2012-04-09T13:28:59.030
> 
> 标签：php, python, mongodb, vps

我必须构建一个使用 Python、php 和 MongoDB 的 Web 应用程序。

*   Python - 用于在我的本地家用计算机上填充离线数据库，然后将 db 导出到 VPS。稍后我打算使用 cron 来安排这项工作。
*   PHP - 用于网络脚本。

我想购买的 VPS 默认支持 Python 和 LAMP Stack，但不支持 mongoDB（myhosting.com LAMP stack VPS）。现在由于默认情况下不支持 mongoDB，我必须在 VPS 上手动安装 mongoDB。所以我想知道的是，如果我的 VPS 支持 mongoDB，我是否会在性能和可扩展性方面受益。也有人可以推荐一个适合我的VPS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:32:24.540

嗯，MongoDb 没有不锈钢要求。可以这么说，它将在可能编译二进制的地方运行。

但是您可能会对它在慢速机器或弱 VPS 上的性能感到失望，但您可以通过仅测试您的工作负载来发现这一点。您还可以查看相关的 SO 帖子：

[MongoDB、Riak 和 HyperTable（或 HBase）的内存需求/利用率](https://stackoverflow.com/questions/7439952/memory-requirement-utilization-for-mongodb-riak-and-hypertable-or-hbase)

[mongodb安装 - 要求？](https://stackoverflow.com/questions/3643958/mongodb-install-requirements)

和[Google Groups 发布](https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/H3Ug1Ty9L4A)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:36:14.687

如果您正在查看的 vps 限制了您可以安装的软件包，并且您需要他们禁止的东西，我会寻找另一个 vps。rackspace 和 amazon 都有一系列实例，以及众多支持的操作系统。使用它们中的任何一个，您都可以选择您的操作系统，并且可以自由安装您想要的任何东西。

# iphone - 在 ipad 应用程序上包含图像的最佳方法，涉及不同型号

> ID：10073935
> 
> 赞同：1
> 
> 时间：2012-04-09T13:28:59.933
> 
> 标签：iphone, ios, ipad

我正准备设计一个新的 iPad 应用程序，它将被锁定在横向模式。它将是相对重要的形象，因为它将成为酒店和度假村的销售工具。会有不少酒店的“英雄镜头”，即全屏或半屏图像，旨在突出酒店。

随着 2 和 3 之间分辨率的跳跃，我希望它在两个版本上看起来都像样。为此设计的标准方法是什么？我是否包含 3 的最高分辨率镜头，然后在较低版本上渲染时让它在软件中按比例缩小？我是否包含每个图像的两个版本？我是否只包括 2 可以渲染的最高分辨率，并希望在 3 上最好？

# magento - Magento：模块开发人员是否有安装基础（按版本）的统计信息？

> ID：10073946
> 
> 赞同：1
> 
> 时间：2012-04-09T13:29:44.887
> 
> 标签：magento, module, version

正如问题所述，我正准备在 Magento Connect 商店中部署我的前几个模块，并希望确保我的目标是最好的版本。事实证明，在 1.3 上进行测试有点痛苦，如果只有少数人使用该版本，我宁愿花时间改进模块！

谷歌还没有提供帮助，尽管我认为我使用的关键词正在被当作其他更具体的技术问题（例如谷歌基地）。

这个信息存在吗？你的个人经历呢？对我来说，我只遇到过低于 1.5 Community (1.10 Enterprise) 的升级项目。我个人还没有遇到过使用 1.4 并计划继续使用 1.4 的客户。

谢谢！

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:27:33.007

有相当多的人拥有旧版本并且不会升级，因为他们对商店所做的复杂性和修改量很大。现在大多数使用社区版本的人似乎都在使用 1.5 或 1.6，但如果您想测试旧版本，只需从存档下载本地安装，看看它是否适用于旧版本。如果您决定在这些旧版本上进行测试，这是一个指向可下载版本的 magento 的链接：

[http://www.magentocommerce.com/download](http://www.magentocommerce.com/download) - 单击顶部的已发布存档选项卡

# ios - 第二次点击 UITextField（在 UITableViewCell 子类中）意外关闭键盘

> ID：10073957
> 
> 赞同：0
> 
> 时间：2012-04-09T13:30:16.907
> 
> 标签：ios, uitableview, uitextfield

我正在实现一个包含几个自定义 UITableViewCells 的 UITableView，每个 UITableViewCells 都包含 UITextField。

与大多数希望键盘在某些事件中消失的人不同，我希望它一直出现。问题是第一次点击 UITextField 会触发键盘出现而没有任何问题。但是一旦我再次点击它，当前出现的键盘就会消失。

此外，另一个相关问题是我无法更改光标在 UITextField 中的位置。一旦我按住 UITextField 以更改光标的当前位置，放大镜就会按预期弹出。但是一旦我松开水龙头，键盘就会立即关闭。

我该如何解决这个问题？

```
- (void)viewDidLoad
{
    ...
    TagDetailCell *cell1 = [[[NSBundle mainBundle] loadNibNamed:@"TagDetailCellView" owner:self options:nil] lastObject];
    TagDetailCell *cell2 = [[[NSBundle mainBundle] loadNibNamed:@"TagDetailCellView" owner:self options:nil] lastObject];
    TagDetailCell *cell3 = [[[NSBundle mainBundle] loadNibNamed:@"TagDetailCellView" owner:self options:nil] lastObject]; 
    self.cells=[NSArray arrayWithObjects:cell1, cell2, cell3, nil];
    ...
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell=[self.cells objectAtIndex:indexPath.row];
    cell.selectionStyle=UITableViewCellSelectionStyleNone;

    switch (indexPath.row) {
        ...
        ((TagDetailCell*)cell).fieldLabel.text= ...;
        ((TagDetailCell*)cell).fieldValue.clearButtonMode=UITextFieldViewModeWhileEditing;
        ((TagDetailCell*)cell).fieldValue.text=...;
        [((TagDetailCell*)cell).fieldValue addTarget:self action:@selector(textFieldChanged:) forControlEvents:UIControlEventEditingChanged];
        ...
    }
    return cell;

} 
```

我没有实现 UITextField 的任何代表。我是不是该？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:38:53.043

我真蠢啊。我继承 UITextField 并覆盖以下方法，以防止用户复制/粘贴文本：

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender    
{    
    [UIMenuController sharedMenuController].menuVisible = NO;  //do not display the menu
    [self resignFirstResponder];                      //do not allow the user to selected anything
    return NO;
} 
```

键盘关闭的问题来自`[self resignFirstResponder]`. 因此，删除它可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:09:34.687

查看文档中的`UIViewController`方法`disablesAutomaticKeyboardDismissal`。
引用 Apple 文档：

> 在子类中重写此方法以在从需要输入视图的控件更改为不需要的控件时允许或禁止关闭当前输入视图（通常是系统键盘）。在正常情况下，当用户点击需要输入视图的控件时，系统会自动显示该视图。在不需要输入视图的控件中轻按随后会导致当前输入视图被关闭，但可能并非在所有情况下都如此。您可以在那些未解决的情况下覆盖此方法以允许关闭输入视图或使用此方法来防止在其他情况下关闭视图。

# javascript - offsetX 和 offsetWidth

> ID：10073958
> 
> 赞同：1
> 
> 时间：2012-04-09T13:30:17.047
> 
> 标签：javascript, html, css, positioning

我在确定 div 的值时遇到问题。

当我调整窗口大小时，div 的 offsetX 属性会相应改变。例如在最大化的窗口上，offsetX 从 0 到 100 开始。但是当我调整窗口大小时，offsetX 根据我调整大小的窗口宽度从 0 开始到 70,50 等。

但是无论窗口大小如何，div 的 offsetWidth 都保持不变。css/js 中是否有任何属性用于 div，它会改变 offsetWidth，类似于 offsetX 所做的那样？

# django - 在 Django 中缓存半动态视图

> ID：10073959
> 
> 赞同：2
> 
> 时间：2012-04-09T13:30:18.980
> 
> 标签：django, caching, django-templates, django-views

我在 Django 中有一个“半动态”视图。就我而言，它为首次访问者和回访者提供不同的内容。我知道我的视图可以在呈现响应之前运行各种逻辑，但这会使视图（及其他）级别的缓存变得不可能，因为不同类型的用户（根据 cookie、会话数据或用户数据）将获得不同的反应。

我正在考虑几个选项来实现这一点：

*   从我的视图重定向到另一个缓存的视图。我不喜欢这种方法，因为它会影响用户体验（更改 URL）。我知道如果我想缓存在 HTTP 服务器级别，我需要选择这种方法。
*   使用缓存标签在模板级别缓存（实际上可以缓存整个模板，从头到脚）。这样，我仍然可以为每种情况使用不同的模板。我想这是一个不错的方法，它仍然涉及运行模板引擎，这是我宁愿避免的。
*   直接使用缓存框架在视图中缓存准备好的 HttpResponse 对象。实际上，这听起来像是它会提供最佳性能，但感觉有点像“重新发明轮子”。

还有其他想法吗？有什么标准的方式来做我所缺少的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:39:52.027

在处理动态响应时，使用缓存模板标签是最好的选择。每当您对登录用户、会话存储等内容进行更改时，您根本无法缓存整个响应。使用缓存模板标签缓存模板中不变的位是下一个最好的事情。然后，至少，只需要处理实际的动态部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T11:54:00.433

或者，您可以缓存页面并改变页面的动态位。这可以使用[两阶段渲染](https://github.com/codysoyland/django-phased)来实现。

# android - 创建意图时的Android NoClassDefFoundError

> ID：10073962
> 
> 赞同：0
> 
> 时间：2012-04-09T13:30:31.927
> 
> 标签：android, android-mapview, noclassdeffounderror

尝试为从 MapActivity 继承的类创建 Intent 时出现 NoClassDefFoundError。

这是我得到异常的代码： Intent mapTabIntent = new Intent(this, MapTab.class); 这是 TabActivity

我厌倦了 Android 2.1 和 2.2 Google API。我将清单文件放在应用程序之外：我也在清单中使用了 android.permission.INTERNET。

我的应用程序在没有 MapTab 的情况下完美运行。我已经重新创建了 MapTab 类和 maptab 布局，结果是一样的。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:34:56.653

检查这个问题：[https](https://stackoverflow.com/a/5719847/1317080) ://stackoverflow.com/a/5719847/1317080 看来你的问题与虚拟机没有找到你继承的谷歌地图类有关

# sql-server - Drupal-6.25 和 SQL Server 2005 在 Linux 上速度较慢，但 在 Windows 上速度较快

> ID：10073966
> 
> 赞同：0
> 
> 时间：2012-04-09T13:30:44.947
> 
> 标签：sql-server, windows, linux, drupal, freetds

我一直在尝试在 SQL Server 2005 上安装 Drupal-6.25。我从[http://drupal.org/files/d6mssql.zip获得了 MSSQL 驱动程序补丁](http://drupal.org/files/d6mssql.zip)

问题是，当我使用 Linux 作为操作系统的 Web 服务器时，性能非常慢。每个页面需要 10 到 20 秒来加载。

当我使用 Windows 作为操作系统的 Web 服务器时，这个问题就不再存在了。加载页面只需几毫秒。

Linux 配置如下（我用许多 Linux 发行版测试过）：

*   VMWare 工作站 8.0
*   Ubuntu 10.04 / Ubuntu 12.04 / Fedora 16 (IP: 192.168.14.12x)
*   最新的 Apache2，最新的 PHP 5.3.10
*   Ubuntu 上的 php5-sybase，Fedora 上的 freetds
*   我的 Windows-7 机器（IP：125.0.0.7）上的 SQL Server 2005。

Windows 配置如下：

*   Windows 7 x64 (IP: 125.0.0.7)
*   XAMPP 1.7.3 与 PHP 5.3.8 和来自[http://docs.moodle.org/20/en/Installing_MSSQL_for_PHP的 Freetds 扩展](http://docs.moodle.org/20/en/Installing_MSSQL_for_PHP)

两个系统都使用这个 freetds 配置：

```
[global]
     host = 125.0.0.7
     port = 1433
     client charset = UTF-8
     tds version = 8.0
     text size = 20971520 
```

任何人都有建议或一些调试帮助？谢谢！

# android - 在 Windows Vista Home 高级版中开发 Android 应用程序需要安装的软件/先决条件？

> ID：10073970
> 
> 赞同：-1
> 
> 时间：2012-04-09T13:31:13.067
> 
> 标签：android, windows, android-emulator

我打算开发一个android应用程序。您能否建议在 windows vista home 高级版中开发 Android 应用程序要安装的软件/先决条件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T13:38:33.997

只需去这里：http: [//developer.android.com/sdk/installing.html](http://developer.android.com/sdk/installing.html)

并按照分步说明开始，然后我建议观看以下视频（当然提供您和 Android 编码初学者）

[http://www.youtube.com/playlist?list=PLB03EA9545DD188C3&feature=plcp](http://www.youtube.com/playlist?list=PLB03EA9545DD188C3&feature=plcp)

之后

[http://www.youtube.com/playlist?list=PL7F399983B3D570AA&feature=plcp](http://www.youtube.com/playlist?list=PL7F399983B3D570AA&feature=plcp)

# ios - 在 UIScrollView 中使用我自己的 UIView

> ID：10073986
> 
> 赞同：0
> 
> 时间：2012-04-09T13:31:55.750
> 
> 标签：ios, uiview, uiscrollview

我对 iPhone 开发相当陌生，所以如果之前有人问过这个问题，请原谅我。

我刚开始玩`UIScrollView`。我想让它的工作原理与 a 基本相同，`UITableView`但具有更多定制的“单元”，我已经实现了这一点并且效果很好，但我只是想澄清一下。

最初，当我设计这些“单元”时，我只在 Xcode 中创建了一个 UIView，它只为我提供了一个用于视图的 nib 文件，但这在处理引用插座和动作处理程序时并没有帮助我。

然后我创建了一个`UIViewController`，但我发现自己只是将视图添加`UIViewController`到`UIScrollView`- `[scrollView addSubview:myViewController.view]`- 这感觉不对，因为它打破了“`UIViewController`每个屏幕一个”范式。

然后我去创建一个`UIView`子类，在初始化方法中我将控件添加到我的视图（一些标签和图像），根据我在笔尖中的设计方式定位它们。

最后一种方法几乎可以按我的意愿工作，但是我无法直观地设计单元格并利用 nib 文件感觉不对。

我怎样才能拥有自己的自定义`UIView`（非`UIViewController`）类，该类使用 nib 来获取可用于`UIScrollView`.

如果我无法使用`UIScrollView`'s，请告诉我在哪里查看。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:15:43.537

您可以使用笔尖制作自己的 UIViews -

```
NSArray *nibContents = [[NSBundle mainBundle] loadNibNamed:@"MyView" owner:self options:nil];

UIView *mySpecialView = [nibContents objectAtIndex:0];

[self addSubview:mySpecialView]; 
```

我已经使用了这个负载 - 当然没有必要为您需要添加的每个视图制作一个 UIViewController 的极端！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T20:46:34.397

我认为您在这里尝试使用的方法确实使问题复杂化了。UITableView 实际上包含一个 UIScrollView （尽管您无法访问它），因此默认情况下它已经完成了您想要实现的目标。另外，为什么您认为每个视图应该只有一个视图控制器？在实践中，需要尽可能多的视图控制器来使您的应用程序正常工作和组织。

我建议您使用 UITableView 和自定义 UITableViewCell。您可以轻松地在 nib 中设计单元格，只需删除新 .xib 附带的默认视图并在其位置拖动 UITableViewCell 即可。这确实意味着您将需要一个 ViewController 用于您的自定义 UITableViewCell 但控制器不需要做任何事情，除非您需要设置单元格的文本。此外，您可以轻松地将单元格重用于内存目的（尽管您可以重用普通视图，但它不像单元格那样对内存友好 - 因为 Apple 专门设计了可重用的单元格。）

您需要我发布任何代码来帮助自定义单元格吗？让我知道我明天再回来看看，如果你这样做。

希望这对您的项目有所帮助，祝您好运。

# linq - 将子查询合并为 1 个查询 Linq

> ID：10073996
> 
> 赞同：0
> 
> 时间：2012-04-09T13:32:58.687
> 
> 标签：linq

有没有办法可以重写以下查询以使其只是一个查询？

```
 try
            {
                var fileIds = (from f in context.SignalTo
                               where f.SignalFileID == 2
                               select new { f.GFileID }).ToList();

                foreach (var id in fileIds)
                {
                  var pp = (from p in context.ProjectFiles
                                   where p.FileID == id.GFileID &&  p.ProjectID == ProjectID
                                   select p);

                    if (pp != null)
                    {
                        ProjectFiles projectFile =(ProjectFiles) pp;
                        projectFile.MStatus = Status;
                        projectFile.DateLastUpdated = DateTime.Now;
                        context.SaveChanges();
                    }

                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:37:34.327

您可以将代码的两个*查询*部分合二为一。

然后，您需要遍历结果集，进行更新。然后，您将调用 context.SaveChanges 以提交一批中的所有更改。

我无法判断您现有的代码是否实际运行或编译，但您需要这样的东西：

获取您感兴趣的文件 ID 列表：

```
var fileIds = from f in context.SignalTo
              where f.SignalFileID == 2
              select f.GFileID; 
```

**fileIds**在这一点上是一个 IQueryable，我假设 T 是一个 Int。尚未执行任何查询。

现在你可以做

```
var pps = from p in context.ProjectFiles
         where fileIds.Contains(p.FileID) &&  p.ProjectID == ProjectID
         select p; 
```

仍然没有执行查询。

然后遍历结果集

```
foreach( var pp in pps ) // query executed now
{
    pp.MStatus = Status;
    pp.DateLastUpdated = DateTime.Now;
}

context.SaveChanges(); // batch of updates executed now 
```

# c# - 在 app.config 中定义变量

> ID：10073998
> 
> 赞同：0
> 
> 时间：2012-04-09T13:33:20.787
> 
> 标签：c#, xml, app-config

是否可以在 app.config 文件中定义变量？

也许是这样：

```
<xsl:variable name="folder">
  C:\Data\Log\
</xsl:variable> 
```

...并以这种方式在 app.config 中使用它：

```
<file value="$folder\ErrorLog.txt" /> 
```

我的 app.config 中有一些不同的文件夹，不会一一更改每条路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:14:45.780

您可以在 Visual Studio 中右键单击项目，然后选择属性。然后去设置那里添加不同数据类型（例如字符串）的设置。

此外，如果您正在寻找特定于 log4net 的解决方案，这个问题/答案可能会有所帮助：stackoverflow.com/questions/1535736

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:43:45.350

您可以定义`LogBaseDir`为环境变量并在 app.config 中使用它：

```
<appender name="RollingFileError" type="log4net.Appender.RollingFileAppender">
  <file value="${LogBaseDir}\ErrorLog.txt" />
  <!-- ... -->
</appender> 
```