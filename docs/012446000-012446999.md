# StackOverflow 问答 12446000-12446999

# iphone - 打开 UITableViewController 作为 UItabbarcontroller 的一项

> ID：12446001
> 
> 赞同：0
> 
> 时间：2012-09-16T10:00:46.630
> 
> 标签：iphone, ios, ipad, ipod

我创建了一个UITabbarController，它的第一项是UIViewController，这个UIViewController 包含一个必须打开UITableViewController 的按钮。

我在 StoryBoard 中创建了 UITableViewController 和 UIViewController 并给了它们标识符名称。

我的问题是，当我按下 UIViewController 中的按钮打开表格时，它会打开 UITableViewController 但没有 tabBar，我希望 UITableViewController 作为 tabBar 中的一个项目（项目打开其他项目）

这该怎么做 ？？谁能给我看示例代码对不起我的错误解释。

考虑到我正在使用 Xcode4.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T10:21:08.733

将您的视图控制器嵌入导航控制器中。将此导航控制器作为 tabBar 控制器的视图控制器（第一项）。不要以模态方式呈现表视图控制器。而是使用导航控制器对其进行定位。

# c - C 等价于 std::endl

> ID：12446004
> 
> 赞同：3
> 
> 时间：2012-09-16T10:01:12.457
> 
> 标签：c

C++ 有`std::endl`. 有谁知道 C 中有什么可以用来做这个的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T10:04:11.717

`std::endl`具有打印换行符`'\n'`然后刷新输出流的效果。

如果您要打印到标准输出，C 等效项将是：

```
putchar('\n');
fflush(stdout); 
```

但在大多数情况下，这`fflush`是不必要的。

请注意，`std::endl`它*不*具有提供独立于平台的行结尾的目的。该字符`'\n'`已经是一个独立于平台的行结尾。当写入文本流时，它将被转换为平台使用的任何行结尾（`\r\n`对于 Windows，仅`\n`对于 Unix，等等）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-16T10:02:30.380

```
#include <stdio.h>

putchar ('\n');   /* To the stdout stream. */
printf ("\n");    /* Ditto. */ 
```

对于任意流`fp`，

```
fputc (fp, '\n'); 
```

这应该适用于行缓冲和非缓冲流。`fflush(NULL)`如果您想立即查看结果，则需要完全缓冲的流。那么哪个是哪个？C99 标准的血腥细节：

> 最初打开时，标准错误流没有完全缓冲；当且仅当可以确定流不引用交互式设备时，标准输入和标准输出流才被完全缓冲。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T10:04:59.227

`std::endl`刷新流，但在 C 中打印换行符不会这样做。所以你必须使用`fflush`.

# java - APU+GPU 的 OpenCL

> ID：12446012
> 
> 赞同：-2
> 
> 时间：2012-09-16T10:02:28.527
> 
> 标签：java, c++, opencl, cpu, multi-gpu

我正在考虑组装这个系统：

*   AMD CPU（A8-3870 APU，内置 Radeon HD 6550D：400 个流处理器：xxx GFLOPS）近 110 美元
*   AMD显卡：HD 7750（512个流处理器：819 GFLOPS峰值性能）近170$
*   合适的内存（1600MHz 总线）和主板

我可以使用 OpenCL 和类似程序实现官方网站中提到的 819+xxx GFLOPS 峰值性能吗？

我可以将所有 912 个内核与 OpenCL/Jocl 一起使用吗？将 cpu 内核添加到锅中是否很重要（其中 4 个（当然其中 2 个将用于馈送 gpu））？

C++ 或 Java，哪一个拥有最多的库以在计算机上使用多个 gpu 或 apu？

**如果我取消 apu 和 gpu 并购买单个 Nvidia GTX-660 会怎样？这个赢了？（229$ -1800GFLOPS）（有一个简单的 4 核 cpu 最便宜的没有 apu）**

我不想做一个 VS 问题。我需要知道什么对科学计算（75% 的时间）和游戏（%25 的时间）更好，因为我的预算很低。对于“科学计算”，我的意思是流体动力学+固态物理模拟。对于游戏，我的意思是那些有 openCL 和 PhysX。

你能给出一个使用多个 GPU 的 OpenCL 代码的非常简单的例子吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T10:19:39.280

> 我可以使用 OpenCL 和类似程序实现官方网站中提到的 819+xxx GFLOPS 吗？

这是巅峰表现。峰值性能的一种定义是；*制造商保证不超过此额定值*。

您最有可能达到这个数字，但没有做一些有用的事情。您可以针对您的特定要求实现什么在很大程度上取决于它是什么。您可能期望在现实中获得该值的 0.1% 到 10%。

> C++ 或 Java，哪一个拥有最多的库以在计算机上使用多个 gpu 或 apu？

我会使用你最喜欢的任何东西。您可以从其中任何一个中调用 GPU，但您使用的语言类似于 C，因此“宿主”语言是什么并不重要。

> 如果我取消 apu 和 gpu 并购买单个 Nvidia GTX-660 会怎样？

不可能说，但是无论您选择什么，都很有可能会好起来。

> 你能给出一个使用多个 GPU 的 OpenCL 代码的非常简单的例子吗？

网络上有很多示例，但您确实需要关注您将使用该系统的目的。

# jquery - jQuery 消息框

> ID：12446014
> 
> 赞同：0
> 
> 时间：2012-09-16T10:02:38.463
> 
> 标签：jquery

我有一个列表页面，其中列出了多个用户（登录用户的收藏夹列表）。有一个消息按钮可以打开一个覆盖。然后，用户可以使用覆盖中的消息框发送消息。jQuery代码是：

```
$('#message').click(function(){
  var str = $(this).attr('name');
  var n=str.split("####");

  $('#user_new').val(n[0]);
  $('#msgto_username').html(n[1]);
  $('#bodybg').show();
  $('.confirmBox').fadeIn();
  return false;
}); 
```

但是，只有列表中的第一个条目能够显示消息框，对于其他条目，页面只会刷新。消息按钮 HTML 是：

```
<a href="" id="message" class="btn" name="<?php echo $user['userid'] .'####'. ucfirst($user['name']) ." ". ucfirst($user['first_name']." ".$user['last_name']); ?>" title="<?php echo 'Send message to ' . ucfirst($user['name']) ." ". ucfirst($user['first_name']." ".$user['last_name']); ?>">Message</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:33:53.640

更新代码，使用 .live()，.click() 不检查新的 html 条目。[更多信息](http://api.jquery.com/live/)

```
$('#message').live("click", function(){
    var str = $(this).attr('name');
    var n=str.split("####");

    $('#user_new').val(n[0]);
    $('#msgto_username').html(n[1]);
    $('#bodybg').show();
    $('.confirmBox').fadeIn();
    return false;
}); 
```

我希望这就是你要找的东西？

# c++ - 求一棵树的直径

> ID：12446018
> 
> 赞同：0
> 
> 时间：2012-09-16T10:02:43.413
> 
> 标签：c++, algorithm, tree

我已经编写了用于查找二叉树直径的代码。但我无法弄清楚哪里出了问题。我编写的两个函数及其定义如下：-

```
 int btree::diameteroftree(node* leaf)
    { 
     if (leaf==NULL) 
     return 0;

     int lheight = hieghtoftree(leaf->left);
     int rheight = hieghtoftree(leaf->right);

     int ldiameter = diameteroftree(leaf->left);
     int rdiameter = diameteroftree(leaf->right);

     return max(lheight + rheight + 1,max(ldiameter,rdiameter));
   }

   int btree::hieghtoftree(node* leaf)
   {
    int left=0,right=0;
    if(leaf==NULL)
    return -1;
    else
    {
     left=hieghtoftree(leaf->left);
     right=hieghtoftree(leaf->right);
     if(left > right)
     return left +1;
     else
     return right+1;   
    }
   } 
```

我无法弄清楚我在哪里出错了。谁能告诉我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:34:17.597

您想返回最长路径上的节点数。因此，您的算法中的问题是这一行：

```
return max(lheight + rheight + 1,max(ldiameter,rdiameter)); 
```

在哪里

```
rootDiameter = lheight + rheight + 1 
```

是从左树最深节点到右树最深节点的路径长度。但是，这个计算是不正确的。单个节点返回高度为 0，因此不会被计算在内。你有两个选择：

1.  更改`hieghtoftree`以返回最深路径上的节点数，而不是“跳数”
2.  在你的总结中解决这个问题

.

```
return max(lheight + rheight + 3,max(ldiameter,rdiameter)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T10:10:46.773

在有向根树中，任何一对节点之间总是最多有一条路径，并且到任何节点的最长路径总是从根开始。由此可见，[直径](http://mathworld.wolfram.com/GraphDiameter.html)就是整棵树的高度`height(root)`，可以用递归来计算。

```
height(leaf) = 0
height(node) = max(height(node.left), height(node.right)) + 1 
```

**编辑**：您在评论中链接到的页面描述了*无向*树的直径。您需要不同的树表示，例如邻接矩阵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T10:11:06.727

考虑一个具有根 R 和 2 个叶子 L1、L2 的 3 节点树。然后 heightoftree(L1) == heightoftree(L2) == -1。因此，Diameteroftree(R) 将是 (-1)+(-1)+1 = -1 ?!?

我建议返回-1；--> 返回 0；并返回 max(lheight + rheight + 1,max(ldiameter,rdiameter)); --> return max(lheight + rheight + 2,max(ldiameter,rdiameter));

结果将是路径上的边数。如果您计算节点数，则根据您的需要从最终结果中加一或减一。

# jquery - IE9 输入文件上的 jquery .trigger() 失败

> ID：12446022
> 
> 赞同：2
> 
> 时间：2012-09-16T10:03:20.760
> 
> 标签：jquery, html

> **可能重复：**
> [JQuery .submit() 在 IE9 中失败](https://stackoverflow.com/questions/12445499/jquery-submit-fails-in-ie9)

[http://jsfiddle.net/BayjF/8/](http://jsfiddle.net/BayjF/8/)

这段 Jquery 在 IE 中不起作用：

```
$('div#photoCropContainer').click(function() { 
    $('input#file').trigger('click'); 
}); 
```

在 IE9 上的 JSFiddle 中 - 如果您单击浏览按钮，则提交会自动触发。

但是，如果您单击“单击我！” 并选择一个提交不会触发的文件。

看来问题在于 IE9 上的 .trigger() - 有人有任何想法或建议吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T10:08:01.643

是的，这是 IE 中的安全限制。

您应该在*输入*`<label>`周围使用 a （或使用属性）。单击标签将自动触发您输入的单击事件，从而打开文件选择器。*`for="file"`*

# ajax - 使用 MVC 4 API 控制器发布 JSON

> ID：12446024
> 
> 赞同：17
> 
> 时间：2012-09-16T10:03:47.407
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我有这个代码：

```
 $.ajax({

        type: "POST",
        url: "/api/slide",
        cache: false,
        contentType: "application/json; charset=utf-8",
        data: '{"Title":"fghfdhgfdgfd"}',
        dataType: "json", 
```

这是我的控制器：

```
public class SlideController : ApiController
{

    // POST /api/Slide
    public void Post(string Title)
    {
    } 
```

当我运行代码并调用 /api/Slide 时，[Title] 没有数据并且为空。

如何将 JSON 发布到 API 控制器？

```
POST http://127.0.0.2:81/api/slide HTTP/1.1
Host: 127.0.0.2:81
Connection: keep-alive
Content-Length: 18
Origin: http://127.0.0.2:81
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1
Content-Type: application/json; charset=UTF-8
Accept: application/json, text/javascript, */*; q=0.01
Referer: http://127.0.0.2:81/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

Title=fghfdhgfdgfd 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-16T12:11:18.000

定义视图模型：

```
public class SlideViewModel
{
    public string Title { get; set; }
} 
```

然后让您的控制器操作将此视图模型作为参数：

```
public class SlideController : ApiController
{
    // POST /api/Slide
    public void Post(SlideViewModel model)
    {
        ...
    }
} 
```

最后调用动作：

```
$.ajax({
    type: 'POST',
    url: '/api/slide',
    cache: false,
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify({ title: "fghfdhgfdgfd" }),
    success: function() {
        ...    
    }
}); 
```

原因是字符串等简单类型是从 URI 绑定的。我还邀请您阅读[以下](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)有关 Web API 中的模型绑定的文章。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-22T00:08:40.687

确保您尝试转换为的对象具有默认（空）构造函数。

经验法则：如果要反序列化为对象，则需要使创建对象变得简单。这些指南可以帮助：

*   所有要传递的属性**必须是公共的**

*   该对象需要能够在**没有任何参数的情况下构造**。

这个 JSON 字符串/对象例如：

```
{ Name: "John Doe", Phone: "123-456-7890", Pets: [ "dog", "cat", "snake" ] } 
```

可以从以下类转换为对象：

```
 public class Person {

     public string Name { get; set; }
     public string Phone { get; set; }
     public string[] Pets { get; set; }

  } 
```

或者这个：

```
public class Person {

   public string Name { get; set; }
   public string Phone { get; set; }
   public string[] Pets { get; set; }
   public Person() {}
   public Person(string name, string phone) {
      Name = name;
      Phone = phone;
   }

} 
```

或者这个：

```
public class Person {

    public string Name { get; set; }
    public string Phone { get; set; }
    public string[] Pets { get; set; }
    public Person() {}

 } 
```

但不是这个

```
public class Person {

    public string Name { get; set; }
    public string Phone { get; set; }
    public string[] Pets { get; set; }
    public Person(string name, string phone) {
      Name = name;
      Phone = phone;
    }

} 
```

现在让 ASP.NET MVC 4 完成剩下的工作

```
public class PersonController : ApiController
{
        // .. other actions 
        public HttpResponseMessage PostPerson(Person person)
        {
            if ( null != person)
                // CELEBRATE by doing something with your object
            else 
                // BE SAD and throw and exception or pass an error message

        }
        // .. other actions 
} 
```

如果您的类没有默认构造函数，或者您无权访问该类的源代码，您可以创建一个适配器类

*   有一个默认构造函数
*   公开那些需要公开的属性

使用上面没有默认构造函数的 Person 类，适配器可能看起来像

```
public class PersonAdapter {

    public Person personAdaptee;

    public string Name {
        get { return personAdaptee.Name; }
        set { personAdaptee.Name = value }
    }

    public string Phone {
        get { return personModel.Phone; }
        set { personModel.Phone = value; }
    }

    public string[] Pets {
        get { return personAdaptee.Pets; }
        set {personAdaptee.Pets = value }
    }

    public PersonAdapter() {

        personAdaptee = new Person("", "", null);

    }

} 
```

现在让 ASP.NET MVC 4 完成剩下的工作

```
public class PersonController : ApiController
{
        // .. other actions 
        public HttpResponseMessage PostPerson(PersonAdapter person)
        {
            if ( null != person)
                // CELEBRATE by doing something with your object
            else 
                // BE SAD and throw and exception or pass an error message

        }
        // .. other actions 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T10:25:50.030

试试这个：

```
$.ajax({
    type: "POST",
    url: "/api/slide",
    data: { Title: "fghfdhgfdgfd" }
}); 
```

导致这种情况的是 data 属性周围的引号：

即>>数据：{标题：“fghfdhgfdgfd”}
不是>>数据：**'** {标题：“fghfdhgfdgfd”} **'**

更新：
你的控制器看起来也有点奇怪，虽然很难在没有看到你的路由等的情况下分辨出来。

我希望看到更像这样的东西：

```
public class SlideController : ApiController
{
    public HttpResponseMessage PostSlide(string Title)
    {
        // Do your insert slide stuff here....

        string uri = Url.Link("DefaultApi", new { id = item.Id });
        response.Headers.Location = new Uri(uri);
        return response;
    }
} 
```

显然，您还需要更新 jQuery 中的 URL。

看看这里：

[http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)

另一个更新：

通常创建一个 CLR 对象来匹配您的 Json 并使用 MVC 模型绑定器直接绑定到该对象。如果您不想这样做，您可以绑定到对象并反序列化为字典：

```
// POST api/values
public void Post(object json)
{
    Dictionary<string, string> values = JsonConvert.DeserializeObject<Dictionary<string, string>>(json.ToString());
    var x = values["Title"];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T14:04:30.643

将动作参数转换为 FromBody 即：

```
public class SlideController : ApiController
{

    // POST /api/Slide
    public void Post([FromBody]string Title)
    {
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-18T12:20:33.400

```
$.ajax({
    type: 'POST',
    url: '/api/slide',
    cache: false,
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify({ title: "fghfdhgfdgfd" }),
    success: function() {
        ...    
    }
}); 
```

控制器是

```
public class SlideController : ApiController
{

    // POST /api/Slide
    public void Post(string Title)
    {
    } 
```

您的网址无效，网址必须针对**幻灯片**控制器中的操作**发布**

 **编辑你的 url 到 url:" `~/ControllerName/ActionName`" 在这种情况下必须是`Url:"~/Slide/Post"`**

# sql - 搜索和替换序列化数据库转储

> ID：12446027
> 
> 赞同：2
> 
> 时间：2012-09-16T10:04:05.233
> 
> 标签：sql, regex, database, serialization

我正在将数据库从一台服务器移动到另一台服务器，并且那里有很多序列化数据。所以，我想知道：

是否可以`regex`用来替换所有出现的情况，如下所示（和类似的）

```
s:22:\"http://somedomain.com/\"  
s:26:\"http://somedomain.com/abc/\" 
s:29:\"http://somedomain.com/abcdef/\" 
```

至

```
s:27:\"http://someOtherdomain.com/\"  
s:31:\"http://someOtherdomain.com/abc/\"  
s:34:\"http://someOtherdomain.com/abcdef/\" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:22:48.953

如果包含这些数据的列具有相同的长度，并且这些出现`22, 26, 29,...`在字符串开头的相同位置。然后，对于 SQL Server，您可以使用[`REPLACE`](http://msdn.microsoft.com/en-us/library/ms186862.aspx), [`SUBSTRING`](http://msdn.microsoft.com/en-us/library/ms187748.aspx)with[`CHARINDEX`](http://msdn.microsoft.com/en-us/library/aa258228%28v=sql.80%29.aspx)来做到这一点：

```
DECLARE @s VARCHAR(50);
DECLARE @sub INT;
SET @s = 's:27:\"http://somedomain.com/\"';
SET @sub = CONVERT(INT, SUBSTRING(@s, CHARINDEX(':', @s) + 1, 2));
SELECT REPLACE(REPLACE(@s, 'somedomain', 'someOtherdomain'), @sub, @sub + 5); 
```

所以`s:number:\"http://somedomain.com/\"`会变成`s:number + 5:\"http://someOtherdomain.com/\"`。

如果你想`UPDATE`对该表运行，你可以这样写：

```
UPDATE @t 
SET s = REPLACE(REPLACE(s, 'somedomain', 'someOtherdomain'), 
            CONVERT(INT, SUBSTRING(s, CHARINDEX(':', s) + 1, 2)),
            CONVERT(INT, SUBSTRING(s, CHARINDEX(':', s) + 1, 2)) + 5); 
```

这个查询的作用是，它搜索出现的`somedomain`并将其替换为`someOtherdomain`，获取前两个之间的数字`:`，将其转换为`INT`并替换为相同的数字 `+ 5`。以下是运行上一个查询后数据的外观：

```
s:27:\"http://someOtherdomain.com/\"
s:31:\"http://someOtherdomain.com/abc/\"
s:34:\"http://someOtherdomain.com/abcdef/\" 
```

## 这是一个[**现场演示**](https://data.stackexchange.com/stackoverflow/query/80128/sql-search-and-replace)。

# java - 找到余弦的角度！矢量产品

> ID：12446030
> 
> 赞同：0
> 
> 时间：2012-09-16T10:04:29.740
> 
> 标签：java

我正在寻找一个答案来找到余弦的角度α。

```
cos(alpha)=RT(vector).R(vector)/(modulus)RT(vector).(modulus)R(vector) 
```

那么我应该需要找到角度α。

```
public double dot1(double[] vectorA, double[] vectorB){
        double[] vecPro;
        vecPro = new double[2];
        vecPro[0] = vectorA[0]*vectorB[0];
        vecPro[1] = vectorA[1]*vectorB[1];
        return 0;
    } 
```

这段代码只是我到目前为止所做的一个示例！对于 的点积`RT(vector).R(vector)`。嗯，我这样做是正确的，因为我是 Java 语言的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:11:30.037

那不计算点积。[这确实](http://en.wikipedia.org/wiki/Dot_product)

```
public double dot1(double[] vectorA, double[] vectorB){ //if they're from R^2
        double[] vecPro = new double[2];
        vecPro[0] = vectorA[0]*vectorB[0];
        vecPro[1] = vectorA[1]*vectorB[1]; 
        //you did fine up to here
        //But, you should return the result (sum of components products) @see wiki link
        //0 surely isn't the result you want for two arbitrary vectors
        return vecPro[0] + vecPro[1]; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T10:12:22.903

很难弄清楚你真正要问的是什么，但是找到正弦、余弦和正切等三角函数实现的地方就是[`java.lang.Math`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html)类。

# python - pycassa TypeError: A str or unicode, cannot be do cassandra insert

> ID：12446033
> 
> 赞同：5
> 
> 时间：2012-09-16T10:05:24.723
> 
> 标签：python, string, error-handling, cassandra, pycassa

我的脚本是 python，而 cassandra 是数据 stax 社区版。

```
TypeError: A str or unicode value was expected, but int was received instead (3902503) 
```

这是我在尝试插入 cassandra 列族时遇到的错误。

代码是这样的：

```
for x in feed:
    cf.insert(uuid.uuid4(), x) 
```

x 是“{key:value}”形式的简单数组

错误日志提示：

```
 Traceback (most recent call last):
      File "C:\Users\me\Desktop\pro1\src\pro1.py", line 73, in <module>
        str("swf"): str("aws")
      File "c:\Python27\lib\site-packages\pycassa\columnfamily.py", line 969, in insert
        mut_list = self._make_mutation_list(columns, timestamp, ttl)
      File "c:\Python27\lib\site-packages\pycassa\columnfamily.py", line 504, in _make_mutation_list
        columns.iteritems())
      File "c:\Python27\lib\site-packages\pycassa\columnfamily.py", line 503, in <lambda>
        return map(lambda (c, v): Mutation(self._make_cosc(_pack_name(c), _pack_value(v, c), timestamp, ttl)),
      File "c:\Python27\lib\site-packages\pycassa\columnfamily.py", line 462, in _pack_value
        return packer(value)
      File "c:\Python27\lib\site-packages\pycassa\marshal.py", line 231, in pack_bytes
        % (v.__class__.__name__, str(v)))
    TypeError: A str or unicode value was expected, but int was received instead (3902503) 
```

我在这里似乎很想念一些东西……这就是我来这里问专家的原因！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T10:32:37.927

确保您的值与您的列族类型相匹配。看来您的列族要么是 BytesType 要么没有与之关联的类型，因此 pycassa 将只接受字符串值。您可以将所有值映射到`str`带有嵌套字典理解的列表理解（后者需要 python 2.7 及更高版本）：

```
cf.insert(uuid.uuid4(), [{k: str(v) for k, v in d.iteritems()} for d in x]) 
```

# actionscript-3 - ActionScript：执行非图形操作

> ID：12446035
> 
> 赞同：1
> 
> 时间：2012-09-16T10:05:33.530
> 
> 标签：actionscript-3, web-applications, file-upload, actionscript

据我了解，ActionScript 主要用于控制 Flash 网站上的图形输出：例如基于 Flash 的游戏。

但是，我希望 ActionScript 执行与图形输出无关的任务。出于浏览器兼容性原因的任务更适合 ActionScript：例如文件上传。

因此，是否可以使用 ActionScript 代替 JavaScript 或完成 JavaScript 无法完成的任务，例如文件上传？

以下可能吗？

*   在 HTML 按钮按下时运行 ActionScript？
*   从 HTML/JavaScript 向 ActionScript 发送信息？
*   在 ActionScript 中处理没有任何图形输出的信息？
*   从 ActionScript 到 HTML/JavasScript 的输出信息？

我想知道，如果 ActionScript 可以做我想做的事。

我将有一张要调用的正确函数的图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:27:59.127

你不能真正用 actionscript 替换 javascript，但你可以与之交互。

“在 HTML 按钮按下时运行 ActionScript？” - 是的，这可以通过`ExternalInterface.registerCallback`. 但是，许多操作（iirc，打开文件浏览器）只能在 Flash 中的用户交互上完成，因此您需要一个 Flash 按钮。

“从 HTML/JavaScript 向 ActionScript 发送信息？” 也可以通过 externalInterface 或 flashvars（但仅在启动时）。

“在 ActionScript 中处理没有任何图形输出的信息？” - 这是一种编程语言，当然。你有什么想法？

“从 ActionScript 到 HTML/JavasScript 的输出信息？” - 是的，也可以通过 ExternalInterface。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:58:59.003

ExternalInterface 是你的朋友： [http ://help.adobe.com/nl_NL/Flash/CS5/AS3LR/flash/external/ExternalInterface.html](http://help.adobe.com/nl_NL/Flash/CS5/AS3LR/flash/external/ExternalInterface.html)

使用 ExternalInterface 时的一些提示：

*   在 html 嵌入代码中设置`allowScriptAccess`为“始终”
*   确保 flash 在您的 html 代码中有一个 id

一些简单的例子：

**1.从javascript中抓取一个值到flash**

```
// actionscript 3 code
if (ExternalInterface.available)
{
  var url:String = ExternalInterface.call("document.location");

  // output to textfield
  var t:TextField = new TextField();
  addChild(t);
  t.text = url;
} 
```

**2.从flash调用一个带参数的函数**

```
// actionscript 3 code 
if (ExternalInterface.available)
{
   var result:String = "Flash rocks"
   ExternalInterface.call("alert", result);
} 
```

**3.从javascript调用一个带参数的函数到Flash：**

```
// javascript
window.onLoad = function()
{
   document.getElementById('flashId').doSomething("javascript rocks");
} 
```

.. 和

```
// actionscript 3

if (ExternalInterface.available)
{
   ExternalInterface.addCallback("doSomething", handleSomethingFromJavascript);// links js function to as3 function
   function handleSomethingFromJavascript(value:String):void
   {
      // output to textfield
      var t:TextField = new TextField();
      addChild(t);
      t.text = value;
   }
} 
```

您可以在 flash 和 javascript 之间做很多事情，因为您可以看到集成几乎是无痛的！唯一需要注意的是，在 flash 中 ExternalInterface 不可用，因此您必须在浏览器中进行测试。您可以使用`wmode="transparent"`. 您不能使用`display:none`or `visibility`(css)，因为这样闪存不会执行或动作较慢。为了确保它继续运行，请将它`position:fixed`（css）放在页面的角落或其他地方。浏览器使 Flash 对象在屏幕外或非活动时（即在非活动选项卡中）以一种睡眠模式运行（较慢）

# ruby-on-rails - 从 form.text_field 方法中删除默认的 :size

> ID：12446036
> 
> 赞同：3
> 
> 时间：2012-09-16T10:05:36.013
> 
> 标签：ruby-on-rails

`:size => nil`我看到自己为此写了很多`f.text_field`：

```
<%= f.text_field :street_address, :size => nil %>
<%= f.text_field :post_code, :size => nil %>
<%= f.text_field :city, :size => nil %> 
```

这只是愚蠢的。如果没有`:size => nil`上述内容， text_field 会呈现`<input>`一个`size="some number"`（通常`size="30"`）我不需要或不想要的。

那么，如何实现 DRY 并使其默认`f.text_field`不会生成`size=30`or`size="some number"`属性？这样我就可以避免总是不得不输入`:size => nil`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T10:55:07.800

所有默认字段选项都存储在一个哈希中。它默认为以下内容：

```
# action_view/helpers/form_helper
DEFAULT_FIELD_OPTIONS = { "size" => 30 } 
```

例如，您可以在初始化程序中从中删除“大小”。

```
ActionView::Helpers::InstanceTag::DEFAULT_FIELD_OPTIONS.delete("size") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T11:08:03.490

[`with_options`Rails 使用方法](http://api.rubyonrails.org/classes/Object.html#method-i-with_options)扩展了 Object 类。您可以利用它：

```
<%= form_for :foo do |f| %>
    <% f.with_options :size => nil do |f_nil| %>
        <%= f_nil.text_field :street_address %>
        <%= f_nil.text_field :post_code %>
        <%= f.text_field :city %> <!-- you can use old f here too! -->
    <% end %>
<% end %> 
```

给出：

```
<input id="foo_street_address" name="foo[street_address]" type="text" />
<input id="foo_post_code" name="foo[post_code]" type="text" />
<input id="foo_city" name="foo[city]" size="30" type="text" /> <!-- you can use old f here too! --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T10:21:49.897

尝试像这样封装 text_field：

```
def no_size_text_area(form, method) form.text_area(method, {:size => nil}) end 
```

把函数放在你的帮助文件中。

并在其位置使用 no_size_text_area ，如下所示：

```
no_size_text_area(f,:city) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-15T22:59:32.977

Rails 团队已经从 version 中删除了这些默认值`4.0.x`。也无法再设置全局默认值。唯一简单的解决方案是使用 CSS 来设置尺寸。

# email - 更改 PHP 邮件函数中的返回路径

> ID：12446039
> 
> 赞同：27
> 
> 时间：2012-09-16T10:06:32.907
> 
> 标签：email, php

是否可以更改通过 PHP 的 mail() 函数发送的电子邮件中的 Return-Path 值？

在我在我的站点中发送的电子邮件中，它的值是“www-data@mydomain.com”，它会导致电子邮件传递失败过程中出现一些问题。我想将其设置为我的电子邮件地址。

这是我尝试过的代码：

```
$headers = 'MIME-Version: 1.0' . "\n";
$headers .= "Content-type: text/html; charset=utf-8" . "\n";
$headers .= "Return-Path: <adminemail@yahoo.com>"."\n";
$headers .= "Errors-To: <adminemail@yahoo.com>"."\n";
// Additional headers
$headers .= "To: email1@yahoo.com <adminemail@yahoo.com>" . "\n";
$headers .= "From: adminemail@yahoo.com <adminemail@yahoo.com>";
// Mail it
mail('email1@yahoo.com', 'test', 'salam', $headers, "f"); 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-16T10:12:23.613

您可以将回复和返回路径设置为标题，如下所示

```
$headers = 'From: webmaster@example.com' . "\r\n" .
'Reply-To: webmaster@example.com' . "\r\n" .
'Return-Path: webmaster@example.com' 
```

OR作为第五个参数调整返回路径

```
mail($to, $subject, $message, $headers, "-f email@wherever.com"); 
```

其中 email@wherever.com 应替换为您的邮件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T18:06:34.190

问题是邮件格式要求标题使用`\r\n`行尾......不是`\n`，诀窍是一些服务器会接受两者（为你转换它们，它似乎神奇地工作）而其他人会认为那些没有`\r\n`结尾的人是无效的，基本上忽略所有标题。所以试试吧：

```
$headers = "MIME-Version: 1.0\r\n".
   "Content-type: text/html; charset=utf-8\r\n".
   "Return-Path: adminemail@yahoo.com";
mail ("email1@yahoo.com","test","salam",$headers); 
```

顺便说一句，return-path 需要一个 RFC1123 邮箱（没有尖括号，只有电子邮件地址）......不知道为什么要像示例中那样设置 return-path，因为它与发件人地址相同（太多余了）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-27T10:40:53.877

只需定义返回路径

```
$returnPath = "-fadminemail@yahoo.com"; //-f will do the job
mail('email1@yahoo.com', 'test', 'salam', $headers, $returnPath); 
```

# python - Twisted Library 可以用于 LAN Messenger 开发吗？

> ID：12446040
> 
> 赞同：-2
> 
> 时间：2012-09-16T10:06:41.517
> 
> 标签：python, udp, twisted, lan, messenger

我正在尝试开发一个简单的 LAN Messenger，它可以发现网络上的其他客户端并帮助与它们进行通信。

我可以使用扭曲库来实现吗？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T10:37:44.977

是的。虽然这个答案的正文需要至少 30 个字符，所以是的。

# php - 使用 API 问题将图像上传到 Flickr

> ID：12446047
> 
> 赞同：1
> 
> 时间：2012-09-16T09:45:49.163
> 
> 标签：php, api, flickr

我对使用 API 将图像上传到 Flickr 有疑问。在上传时，我们是否需要像在令牌获取中那样将签名作为参数包含在内？如果是这样，计算签名时需要包含哪些参数？

我浏览了文档，但他们没有指定签名计算需要哪些所有参数。因此，我面临 Invalid_signature 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:36:12.153

```
xxxxxxxxxxxxxapi_keyxxxxxxxxxxauth_tokenxxxxxxxxxxxformatphp_serialmethodflickr.people.getPhotosuser_idxxxxxxxxxx 
```

上面的示例用于生成用于拉取用户照片的签名。如您所见，调用 flickr api 所需的所有参数都是必需的。您必须生成上述字符串的 md5 哈希，这将是 api 请求的签名。

字符串的第一个“xxxxxxx”部分（在 api_key 之前）是 api_secret。用 api_key、auth_token(access_key) 和 user_id 填充剩余部分。

为了上传图片，

```
xxxxxxxxapi_keyxxxxxxxauth_tokenxxxxxxxxxtitleUploadTest 
```

上面的字符串用于生成签名以上传标题为“UploadTest”的图片。如果包含其他参数，则必须包含这些参数（例如：描述、标签）并使用 md5 生成签名。更好地使用库来执行这些任务。我正在使用 phpflickr 类（phpflickr.com）。希望能帮助到你.....

# jquery - 如何从一个 ajax 调用中检索多个 json 编码？

> ID：12446061
> 
> 赞同：1
> 
> 时间：2012-09-16T10:10:20.923
> 
> 标签：jquery, json

例如，我有这个 ajax 函数，但我只能在这里调用一个 json，添加什么代码才能获得超过 1 个 json：

```
var blue_name = $("#blue_team #blue_name").val().trim();
            var blue_type = $("#blue_team #blue_type").val().trim();
            var red_name = $("#red_team #red_name").val().trim();
            var red_type = $("#red_team #red_type").val().trim();
            $.ajax({
                url: "battle_review.php",
                type: "post",
                datatype: "json",
                data: { bname: blue_name
                btype: blue_type
                rname: red_name
                rtype: red_type},
                success:function(data){
                    var toAppend = '';
                    if(typeof data === "object"){
                        for(var i=0;i<data.length;i++){
                            //append data here
                        }
                        $("#table1").append(toAppend);// first json
                    }
                }
            }); 
```

这是我的 php 代码，我如何将数据放在我想要的 json 上是我可以获得两个 json 的 $blue 和 $red 怎么做？：

```
 //get blue_team attributes
$blue = array();

$blue_result = $db->dataWarrior($battle,$name);

foreach($blue_result as $warrior){
    $blue[] = $names;
}

//get red_team attributes
$red = array();

$red_result = $db->dataWarrior($battle,$name);

foreach($red_result as $warrior){
    $red[] = $names;
}

echo json_encode(array('red'=>$red,'blue'=>$blue)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T10:26:46.240

您想在一次 AJAX 调用中检索多个数组吗？只需制作...数组数组！

而不是两个`json_encode`电话，只需放：

```
echo json_encode(array('red' => $red, 'blue' => $blue));

```

然后，在您的 Javascript 代码中，您可以通过`data.blue`和访问它们`data.red`。

# mysql - 不同行上的mysql时间差

> ID：12446062
> 
> 赞同：0
> 
> 时间：2012-09-16T10:10:24.793
> 
> 标签：mysql, temp-tables

我需要得到他们之间一天的时差。有没有不使用 TEMP TABLE 的简单方法？

![在此处输入图像描述](../Images/8fb19e7054275985853e1897ea8da272.png)

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T10:18:44.273

```
select timediff(min(time_out), min(time_in)) as time_diff
from your_table
group by emp_id, `date` 
```

# javascript - 带小数的 javascript for 循环

> ID：12446063
> 
> 赞同：4
> 
> 时间：2012-09-16T10:10:36.920
> 
> 标签：javascript, jquery

我正在尝试使用此`for`循环来显示 div。但是我从 jQuery 库中得到一个奇怪的错误。

错误：语法错误，无法识别的表达式：=10]

我已经阅读了有关 javascript 小数的问题，但我仍然不明白为什么这不起作用：

```
for (var i = 10.00; i >= ui.value; i -= 0.25) {
    $("data_id=" + Math.floor(i) + "]").show();
} 
```

隐藏 div 时，我使用它并且效果很好：

```
for (var i = 0.00; i < ui.value; i += 0.25) {
    $("[data_id=" + Math.floor(i) + "]").hide();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T10:14:55.820

您在第一个循环中忘记了 [，这将起作用：

```
for (var i = 10.00; i >= ui.value; i -= 0.25) {
    $("[data_id=" + Math.floor(i) + "]").show();
} 
```

无论如何，如果您是 .floor() 数字，您应该将其转换为整数循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T10:15:20.250

您缺少属性等于选择器的左方括号：

```
for (var i = 10.00; i >= ui.value; i -= 0.25) {
    $("[data_id=" + Math.floor(i) + "]").show();
} 
```

* * *

然而，正如其他人所提到的，绝对没有理由为此使用浮点数，因为调用`.floor()`本质上意味着您`.show()`不必要地调用每个 div 4 次：

```
for (var i = 10; i >= ui.value; i--) {
    $("[data_id=" + i + "]").show();
} 
```

在大约四分之一的工作中，这应该完全符合您的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T10:15:54.150

`[`您在此处的选择器中缺少 a ：

```
$("data_id=" + Math.floor(i) + "]").show(); 
```

应该是：

```
$("[data_id=" + Math.floor(i) + "]").show(); 
```

您可能还应该加上`'`的值`data_id`，所以最终结果应该是：

```
$("[data_id='" + Math.floor(i) + "']").show(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T10:16:44.227

您**永远不**应该依赖浮点运算来处理迭代/索引变量。它们可能会让你陷入奇怪的情况，更糟糕的是，不同的处理器处理浮点的方式不同。您的示例似乎没有浮点的任何副作用，但使用浮点确实是一种不好的做法。

# php - FACEBOOK：使用 PHP 查找登录用户

> ID：12446064
> 
> 赞同：-1
> 
> 时间：2012-09-16T10:10:42.950
> 
> 标签：php, facebook, wordpress, facebook-graph-api, facebook-php-sdk

我在我的 wordpress 网站中使用以下 php 代码

```
<?php
session_start();

require 'src/facebook.php';
include 'config.php'; 
$facebook = new Facebook(array(
  'appId'  => $app_id,
  'secret' => $app_secret
));

// Get User ID
$user = $facebook->getUser();

if ($user) {
  try {
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

if ($user) {
echo "loggedin";

}

else
{
echo "not loggedin";
}

?> 
```

但即使我对我的应用程序进行身份验证，我也会一直处于**未登录**状态。上面的代码在普通应用程序上运行良好，但在我的 wordpress 站点中，我收到会话错误，标头已发送。

请任何人告诉解决此问题的替代方法。

注意：我不想要 javascript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:52:46.053

当您执行 session_start 时，实际上可能会发送该错误，因为已经构建了一些非标题元素，因此页面的标题已经发送。意思是，您需要在之前的脚本中显示任何文本之前执行此操作（例如，如果您将其包含在某个地方的中间，只需在之前调用的脚本中执行此操作）。

既然你说这是wordpress，你只是把它放在某个地方，你可能想把第一部分分成项目的另一部分（在发送标题之前），然后在这个地方使用回声。

也可能是（我注意到您正在使用关闭？>），如果您只编写 PHP，您可能希望避免在文件末尾使用 ?>，因为之后的任何空行都可能发送到输出。

# java - 如何检查 Java 字符串中的每个值？

> ID：12446074
> 
> 赞同：1
> 
> 时间：2012-09-16T10:11:27.363
> 
> 标签：java, string

如果我有一个字符串，说：

```
String name; 
```

有没有办法可以用循环检查每个字母？所以如果他们输入一个名字，我可以检查每个字母是什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T10:15:49.667

有几种方法可以做到这一点 - 您可以`for`使用索引执行循环，或者`foreach`在`char[]`数组上执行循环：

```
for (int i = 0 ; i != s.length() ; i++) {
    char c = s.charAt(i);
    ....
}

for (char c : s.toCharArray()) {
    ....
} 
```

除了单独检查每个字母之外，您还可以使用[*正则表达式*](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)一次检查所有字母（或您想要的任何子集） 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T10:12:50.393

使用该[`String.toCharArray()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toCharArray%28%29)功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T10:13:07.740

```
char[] chars = name.toCharArray();
for (int i =0; i < chars.length; i++)
{
    System.out.println(chars[i]);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T10:14:31.623

这应该做

```
for ( int i=0 ; i < name.length(); i++)
{
   name.charAt(i);
} 
```

另请阅读此 [http://docs.oracle.com/javase/tutorial/java/data/manipstrings.html](http://docs.oracle.com/javase/tutorial/java/data/manipstrings.html)

# encryption - 如何在本地 xmpp 网络上禁用加密

> ID：12446078
> 
> 赞同：1
> 
> 时间：2012-09-16T10:12:12.947
> 
> 标签：encryption, xmpp, ejabberd

我想查看用于开发、调试等的 xmpp 消息内容的纯 xml 文本，所以我已经安装了“ejabberd”作为 xmpp 服务器和“empathy”作为 xmpp 客户端。（我用wireshark 跟踪数据包）我认为应该由更改 xmpp 服务器中的配置，但我不知道如何？！我希望有人指导我禁用加密并在wireshark中以纯文本形式查看xmpp请求。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:13:33.497

在 ejabberd.cfg 的 listen 部分中，查找 ejabberd_c2s 的配置。注释掉指定证书和 starttls 支持的行。如果没有 starttls，将不会提供加密（您可能需要在客户端上确认*要*在不加密的情况下进行连接，因为某些客户端默认情况下会阻止这种情况）。

# debugging - 节点检查器：运行代码——不仅仅是单步执行

> ID：12446079
> 
> 赞同：1
> 
> 时间：2012-09-16T10:12:13.593
> 
> 标签：debugging, node.js, google-chrome-devtools, web-inspector, node-inspector

## 我想要的是

我希望能够在使用Web Inspector进行调试期间**运行**整个脚本。- 我**不想单****步**执行各个 JavaScript 调用。`node``node-inspector`

 ****## 我做了什么

*（我的 PowerShell 说明）*

```
PS C:\Users\JK> node-inspector
   info  - socket.io started
visit http://0.0.0.0:8080/debug?port=5858 to start debugging
...

==[In another PowerShell instance:]==

PS %> node —debug-brk myscript.js
debugger listening on port 5858 
```

## 为什么我想要那个

我正在写一个节点脚本。在这个脚本中我`console.log`有很多对象，以便能够在调试过程中探索它们。但是简单的静态文本控制台输出并不是很好——你不能折叠和展开对象的属性或获取函数的源代码：

*（例如）*

```
{ [Function: Xy]
  a: [Function],
  b: 8.2,
  c: [Function],
  d: [Circular],
  e: '2011-11-11' } 
```

所以我决定使用 Web Inspector`node-inspector`以获得良好的对象浏览体验（因为 Web Inspector 的输出格式很好）。

## 为什么我不通过

*（我的脚本的结构）*

```
var fs = require('fs');

fs.readFile('myfile', function (err, data) {
    if (err) {
        throw err;
    }

    //My Script...

    console.log(something);
}); 
```

1.  调用在的`console.log()`回调函数中执行 `require('fs').readFile()`。我不会仅仅通过“正常”步骤到达那里。
2.  一次又一次地单击“*步骤*”按钮很无聊。

## 我的问题

*   是否有可能在不单步执行以下 Web Inspector 用户界面的情况下运行脚本？**（我不想使用`node —debug myscript.js`，而不是`node —debug-brk myscript.js`因为然后 Inspector 抛出`Error: connect ECONNREFUSED Is node running with --debug port 5858?`，因为脚本运行太快）**

*（网络检查员界面）* ![网页检查器界面](../Images/3f20473eca9506108fe1d4e6942e86c4.png)

*   或者至少有**任何其他方法**可以做我上面描述的事情（在*我为什么想要那个*部分）。

谢谢。- （我希望很清楚我想问什么。 - 如果不是，请写评论。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:32:26.060

你有几个选择。

使用`--debug-brk`：

1.  启动你的脚本，让它停在第一行。

    在“脚本”窗格中，单击回调内的行号（本例中为第 4 行）。

    单击“继续”（右侧面板上方的“|>”图标）。

使用`--debug`：

1.  将该行添加`debugger;`到您的回调中。这将在此时停止调试器。完成后单击“|>”。****

# php - javascript函数使用查询结果

> ID：12446088
> 
> 赞同：-1
> 
> 时间：2012-09-16T10:13:47.787
> 
> 标签：php, javascript, mysql, html

编辑：感谢 Alexander 的建议，我已经稍微编辑了我的代码，但我仍然遇到 div 内容没有显示的问题，我查找了正确的关闭并且看不到其他地方，或者我是否需要在代码中的其他任何地方添加它. 我的更新问题是，我缺少什么才能使它起作用？谢谢

我有一个从查询生成的表，在这个表中有一个 div，我需要这个 div 来显示/隐藏 onclick，现在我有一个有效的显示/隐藏 javascript（如下所示），但这仅适用于 1 个 div。

我该如何修改它，以便从我的数据库（$id）生成的带有 id 的 div 都可以单独显示/隐藏？

javascript:

```
 <script language="javascript">
    function toggle(id) {
       var ele = document.getElementById(id);
       var text = document.getElementById(id);
                 if(ele.style.display == "block") {
                 ele.style.display = "none";
                 text.innerHTML = "show";
     }
     else {
        ele.style.display = "block";
        text.innerHTML = "hide";
     } 
     } 
     </script> 
```

html:

```
 Info: <a id='$id' href='javascript:toggle(\"$id\");'>show</a>
          <div id='$id' style='display: none'></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T10:18:07.410

在您生成的 HTML 中，您可以将`id`值传递给您的`toggle()`函数，因此生成的 HTML 代码看起来像

```
Info: <a id='$id' href='javascript:toggle("$id");'>show</a>
      <div id='$id' style='display: none'></div> 
```

javascript

```
function toggle(id) {
       var ele = document.getElementById(id);
       var text = document.getElementById(id);
                 if(ele.style.display == "block") {
                 ele.style.display = "none";
                 text.innerHTML = "show";
     }
     else {
        ele.style.display = "block";
        text.innerHTML = "hide";
     } 
} 
```

# windows - 在 OSX 上使用 Qt 保持领先

> ID：12446090
> 
> 赞同：1
> 
> 时间：2012-09-16T10:14:08.567
> 
> 标签：windows, macos, qt4

使用 Qt 4.8，我想将我的框架设置为“保持在顶部”。Qt 方式并不完美，因为它需要重新创建涉及丑陋闪烁的窗口。

在 Win32 下，它存在一个本地方法：

```
SetWindowPos(winId(), <HWND_TOPMOST:HWND_NOTOPMOST>, 0,0,0,0, SWP_NOMOVE|SWP_NOSIZE|SWP_NOACTIVATE); 
```

但是在 OS-X 下我必须使用什么代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T18:11:32.497

这是我用来在 Linux、Mac 和 Windows 上设置窗口最顶层的代码：

```
setWindowFlags(
    #ifdef Q_OS_MAC
        Qt::SubWindow | 
    #else
        Qt::Tool |
    #endif
        Qt::FramelessWindowHint |
        Qt::WindowSystemMenuHint |
        Qt::WindowStaysOnTopHint
    ); 
```

您可以通过克隆此存储库来查看代码的工作演示：[https ://github.com/pcmantinker/Tray-Notification-System](https://github.com/pcmantinker/Tray-Notification-System)

我构建了这个存储库来制作一个类似于 Mac OS X 的 Growl 的通知系统。它还经过优化，因此在运行全屏应用程序时不会窃取焦点，如果您正在玩游戏或观看视频，这非常棒。它应该给你一个开始。

# java - 在 Java 中使用 Regex 解析 CSV 文件

> ID：12446092
> 
> 赞同：0
> 
> 时间：2012-09-16T10:14:13.693
> 
> 标签：java, regex, csv

我正在尝试创建一个程序，它使用正则表达式从目录中读取 CSV 文件，它解析文件的每一行并在匹配正则表达式模式后显示这些行。例如，如果这是我的 csv 文件的第一行

```
1997,Ford,E350,"ac, abs, moon",3000.00 
```

我的输出应该是

```
1997 Ford E350 ac, abs, moon 3000.00 
```

我不想使用任何现有的 CSV 库。我不擅长正则表达式，我使用了我在网上找到的一个正则表达式，但它在我的程序中不起作用这是我的源代码，如果有人告诉我在哪里以及我需要修改什么，我将不胜感激为了使我的代码工作。请解释一下。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.nio.CharBuffer;
import java.nio.MappedByteBuffer;
import java.nio.channels.FileChannel;
import java.nio.charset.Charset;
import java.nio.charset.CharsetDecoder;
import java.util.regex.Pattern;
import java.util.regex.Matcher;

public class RegexParser {

private static Charset charset = Charset.forName("UTF-8");
private static CharsetDecoder decoder = charset.newDecoder();
String pattern = "\"([^\"]*)\"|(?<=,|^)([^,]*)(?=,|$)";

void regexparser( CharBuffer cb)
{ 
    Pattern linePattern = Pattern.compile(".*\r?\n");
    Pattern csvpat = Pattern.compile(pattern);
    Matcher lm = linePattern.matcher(cb);
    Matcher pm = null;

    while(lm.find())
    {   
        CharSequence cs = lm.group();
        if (pm==null)
            pm = csvpat.matcher(cs);
            else
                pm.reset(cs);
        if(pm.find())
                     {

            System.out.println( cs);
                      }
        if (lm.end() == cb.limit())
        break;

        }

    }

public static void main(String[] args) throws IOException {
    RegexParser rp = new RegexParser();
    String folder = "Desktop/sample";
    File dir = new File(folder);
    File[] files = dir.listFiles();
    for( File entry: files)
    {
        FileInputStream fin = new FileInputStream(entry);
        FileChannel channel = fin.getChannel();
        int cs = (int) channel.size();
        MappedByteBuffer mbb = channel.map(FileChannel.MapMode.READ_ONLY, 0, cs);
        CharBuffer cb = decoder.decode(mbb);
        rp.regexparser(cb);
        fin.close();

    }

}

  } 
```

这是我的输入文件

年份，制造，型号，描述，价格

1997,福特,E350,”ac,abs,moon”,3000.00

1999，雪佛兰，“冒险”“加长版”“”，“”，4900.00

1999，雪佛兰，“Venture”“加长版，非常大”“”，“”，5000.00

1996，吉普，大切诺基，“必须卖！

空气, 月顶, 装载",4799.00

我得到的输出与我的代码中的问题在哪里？为什么我的正则表达式对代码没有任何影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:46:38.430

使用 regexp 似乎“花哨”，但使用 CSV 文件（至少在我看来）是不值得的。对于我的解析，我使用[http://commons.apache.org/csv/](http://commons.apache.org/csv/)。它从来没有让我失望过。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T15:00:11.543

无论如何，我自己找到了解决方法，谢谢大家的建议和帮助。

这是我的初始代码

```
 if(pm.find()
        System.out.println( cs); 
```

现在将其更改为

```
 while(pm.find()
  {
 CharSequence css = pm.group();
 //print css
   } 
```

我也使用了不同的正则表达式。我现在得到了想要的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T10:23:12.697

你可以试试这个：`[ \t]*+"[^"\r\n]*+"[ \t]*+|[^,\r\n]*+`用这个代码：

```
try {
    Pattern regex = Pattern.compile("[ \t]*+\"[^\"\r\n]*+\"[ \t]*+|[^,\r\n]*+", Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE | Pattern.MULTILINE);
    Matcher matcher = regex.matcher(subjectString);
    while (matcher.find()) {
        // Do actions
    } 
} catch (PatternSyntaxException ex) {
    // Take care of errors
} 
```

但是，是的，如果这不是一个非常关键的需求，请尝试使用已经工作的东西:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T21:15:22.953

接受所提供的建议，不要使用正则表达式来解析 CSV 文件。该格式的使用方式看似复杂。

以下答案包含指向 wikipedia 和描述 CSV 文件格式的 RFC 的链接：

*   [csv文件的字段大小限制](https://stackoverflow.com/questions/9971542/field-size-limitation-of-csv-file/9972468#9972468)

# objective-c - 如何使用 coredata 导入视频？

> ID：12446094
> 
> 赞同：0
> 
> 时间：2012-09-16T10:14:22.417
> 
> 标签：objective-c, ios, xcode

我正在开发一个名为 safekeep 的应用程序。我必须通过转换为数据来使用 coredata 导入视频。

```
if ([[info objectForKey:UIImagePickerControllerMediaType] isEqualToString:@"public.movie"]) 
{
     NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];
     NSLog(@"Q: video path: %@",[videoURL description]);

     self.videoData=[NSData dataWithContentsOfURL:videoURL];
     if(self.videoData)
      {
        NSLog(@"data is present");
        NSManagedObjectContext *context = [appDelegate managedObjectContext];
        NSManagedObject *imagetblObj= [NSEntityDescription insertNewObjectForEntityForName:@"VideoData" inManagedObjectContext:context];
        [imagetblObj setValue:self.videoData forKey:@"videodata"];
        [imagetblObj setValue:str forKey:@"date"];
        NSError *err;
        if (![context save:&err]) 
         {
            NSLog(@"Couldn't save history item into coredata");
         }

        NSLog(@"data saved");
        [self videodatafromdb];
    }
}

-(void)videodatafromdb
{
    NSManagedObjectContext *context = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"VideoData" inManagedObjectContext:context];
    [request setEntity:entity];
NSError *error;
NSArray *recordsData=[context executeFetchRequest:request error:&error];
self.videoarray=[[recordsData reverseObjectEnumerator]allObjects];
NSLog(@"Array count is %d",[self.videoarray count]);
if ([self.videoarray count]>0) 
{
  [self createScrollViewvideo];
}
}

-(void)createScrollViewvideo
{
    NSLog(@"in create scrollviewvideo");
    //add views to scrolview
    int x=5;
    int y=17;
    for(int i=0;i<[videoarray count];i++)
    {
        UIImage *imag=[[UIImage alloc] init];
        UIView *videoview=[[UIView alloc] initWithFrame:CGRectMake(x, y, 100, 100)];
        videoview.tag=i;

        UIButton *userButton=[[UIButton alloc]initWithFrame:CGRectMake(1, 1, 100,100)];
        [userButton addTarget:self action:@selector(userVideoClicked:) forControlEvents:UIControlEventTouchUpInside];
        userButton.tag=i;
        imag=[UIImage imageWithData:videoData];

        [userButton setBackgroundImage:imag forState:UIControlStateNormal];

        [videoview addSubview:userButton];
        [self.scrollview addSubview:videoview];

        [userButton release];
        [videoview release];

        x+=104;
        if ((i+1)%3==0) 
        {
            y+=110;
            x=5;
        }

    }
    NSLog(@"10000in create scrollview");
    if (y+110>self.scrollview.frame.size.height) 
    {
        self.scrollview.contentSize=CGSizeMake(320, y+110);
    }
    else
    {
        self.scrollview.contentSize=CGSizeMake(320, self.scrollview.frame.size.height+60);
    }
 }
} 
```

-(IBAction)userVideoClicked:(id)sender { NSLog(@"video clicked");

```
UIButton *button=(UIButton*)sender;

VideoData *videoobj=(VideoData *)[self.videoarray  objectAtIndex:[button tag]];

NSLog(@"video data is %@",videoobj);

VidoesVIewController *videoviewcontroller=[[VidoesVIewController alloc] initWithNibName:@"VidoesVIewController" bundle:nil];

videoviewcontroller.videodata=[videoobj valueForKey:@"videodata"];

[self.navigationController pushViewController:videoviewcontroller animated:YES];

[videoviewcontroller release]; 
```

}

视频未在滚动视图中显示。但是当单击视频文件时，它正在导航。当图像设置为按钮时，图像显示在视图中。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:17:53.097

请参阅我的答案：

[我可以访问 Core Data 中用于外部二进制存储的文件吗？](https://stackoverflow.com/questions/10222632/can-i-access-the-files-used-for-external-binary-storage-in-core-data/13497992#13497992)

我想出了一个“创造性”的解决方案（无论它是最佳实践是否有人猜测），但它允许您使用 Core Data 来管理您的文件，同时仍然能够通过它们的路径访问真实文件。

通过在二进制字段上使用“允许外部存储”选项，您可以允许核心数据为您管理对文件的引用，从而抽象出大量繁忙的工作。

# django - 在 django auth 中重新加载页面时会话到期

> ID：12446106
> 
> 赞同：0
> 
> 时间：2012-09-16T10:15:35.227
> 
> 标签：django, django-authentication

每当我重新加载页面时，在浏览器的地址栏 URL 中单击 enter 或在另一个选项卡中打开相同的 URL，会话似乎已过期。我的意思是我的页面正在导航到登录页面。

这是我的看法。下面的视图将呈现在一个 HTML 页面中，即 index.html。每当用户登录的用户名/密码登录表单以其他方式显示时，它都会说谢谢您的登录。所以这个功能运行良好。

```
def index(request):
     if request.user.is_authenticated():
            return HttpResponseRedirect('/myapp/')

     if request.method == 'POST':
            form = UserLoginForm(request.POST)
            if form.is_valid():
                username = form.cleaned_data['username']
                password = form.cleaned_data['password']
            if request.user.is_authenticated():
                return HttpResponseRedirect('/myapp/')
            else:
                user = authenticate(username = username, password = password)
            return shortcuts.render_to_response('index.html',locals(),
                                    context_instance = context.RequestContext(request))
     else:
            form = UserLoginForm

return shortcuts.render_to_response('index.html',locals(),
                                    context_instance = context.RequestContext(request)) 
```

供您参考，我在我的应用程序中安装了中间件类。

```
MIDDLEWARE_CLASSES = (
'django.middleware.common.CommonMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware', 
```

有人可以帮我吗？

-内存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:31:03.393

那是因为您使用的是“身份验证”方法而不是“登录”方法。您尝试做的事情将通过使用“登录”而不是“身份验证”来完成。当您使用“登录”时，它将用户的 ID 保存在会话。请参阅此[https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.login](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.login)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T10:31:20.663

添加对[登录](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.login)函数的调用，因为该函数负责在会话中保存用户的 ID，如下所示：

```
else:
    user = authenticate(username = username, password = password)
    if user is not None:
        login(request, user)
    else:
        ... 
```

# django - Django 音乐 API

> ID：12446108
> 
> 赞同：0
> 
> 时间：2012-09-16T10:15:51.013
> 
> 标签：django

我目前正在学习 django 并从事我的项目。我的项目包括分享我创作的音乐并允许人们免费下载。是否有 django 的 API 可以让我上传我的音乐并让用户随意下载？

任何建议表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:34:26.153

总的来说，我同意 Rajat 的观点，您想要实现的目标（至少按照您描述的方式）可以通过标准的 Django 表单和文件处理来完成。但是，这个[应用程序](https://github.com/rizumu/django-podcasting)应该已经内置了很多你需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T10:21:43.500

您不需要 API 将文件上传到您的服务器。您只需要一个表单即可。为了使您的用户能够下载内容，您只需要指向文件的链接。您可以使用一些 api 只允许经过身份验证的用户从您的网站下载内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-01T23:35:24.763

您可以将文件用户提交的文件添加到媒体文件夹中，稍后您可以找到它的路径以供您的用户使用

# mysql - Wordpress 距离搜索 SQL

> ID：12446115
> 
> 赞同：1
> 
> 时间：2012-09-16T10:16:54.493
> 
> 标签：mysql, wordpress, search, distance, latitude-longitude

我有两张表，一张包含英国的所有邮政编码以及它们的纬度和经度。第二个是带有商店位置的表。

我需要创建一个快速搜索查询，以从最近到最远的顺序返回用户指定半径内的所有商店（帖子）及其距离。

表结构为：

邮政编码表字段：ID、邮政编码、纬度、经度

位置表字段：商店名称、PostID、Lat、Lng

搜索将返回帖子名称和与该商店相关的信息摘录。

获取用户提交的邮政编码的查询，从 Postcodes 表中获取该邮政编码的纬度和经度，然后在 Postcodes 表纬度/经度和位置中的每个 Lat/Long 之间运行距离计算，返回那些在用户指定的距离是我想象的需要，但在创建两组 lat/lng 之间的距离计算时没有运气。

所需距离最多 10 英里、最多 20 英里、最多 50 英里、最多 100 英里和超过 100 英里。

非常感谢任何帮助。

非常感谢，

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:32:15.600

正如[@OllieJones 评论](https://stackoverflow.com/questions/12446115/wordpress-distance-search-sql/12446499#comment16736392_12446115)的那样，您需要使用[haversine 公式](http://en.wikipedia.org/wiki/Haversine_formula)来计算[大圆距离](http://en.wikipedia.org/wiki/Great-circle_distance)。改编自 Google Code's [Creating a Store Locator with PHP, MySQL & Google Maps](https://developers.google.com/maps/articles/phpsqlsearch_v3#findnearsql)以尽可能多地缓存：

```
ALTER TABLE Postcodes
  ADD tc DOUBLE COMMENT 'cosine of latitude',
  ADD ts DOUBLE COMMENT   'sine of latitude',
  ADD gr DOUBLE COMMENT 'longitude in radians',
  ADD UNIQUE INDEX (Postcode);

CREATE TRIGGER Postcode_insert BEFORE INSERT ON Postcodes FOR EACH ROW SET
  NEW.tc = cos(radians(NEW.Latitude)),
  NEW.ts = sin(radians(NEW.Latitude)),
  NEW.gr =     radians(NEW.Longitude);

CREATE TRIGGER Postcode_update BEFORE UPDATE ON Postcodes FOR EACH ROW SET
  NEW.tc = cos(radians(NEW.Latitude)),
  NEW.ts = sin(radians(NEW.Latitude)),
  NEW.gr =     radians(NEW.Longitude);

UPDATE Postcodes SET tc = NULL; -- trigger will do the rest

CREATE VIEW distance AS
  SELECT s.Id AS PostID, u.Postcode,
         acos(s.tc*u.tc*cos(s.gr-u.gr) + s.ts*u.ts) AS radii
  FROM   Postcodes s, Postcodes u; 
```

那么你需要做的就是：

```
SELECT   Locations.*, 3959 * distance.radii AS miles
FROM     Locations JOIN distance USING (PostID)
WHERE    distance.Postcode = ?
HAVING   miles < ? 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/c4695/1/0)上查看。

# c# - 将字符串列表随机分组

> ID：12446116
> 
> 赞同：4
> 
> 时间：2012-09-16T10:17:03.947
> 
> 标签：c#, algorithm

给定一个项目字符串列表`n`，我希望将其划分为每个`b`组`(b<=n)`都有`i to j (j>=i)`项目的组

一个例子：说

```
List<string> lst=new List<string>(new string[]{"a","b","c","d"}); 
```

（因此`n=4`）

假设提供此功能的功能是

```
List<List<string>> DivideIntoGroup(List<string> lst, b, i, j) 
```

可能的结果之一`DivideIntoGroup(lst, 3, 1, 2)`是

```
{"a"},
{"b","c"},
{"d"} 
```

我应该如何编写 DivideIntoGroup 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T10:34:24.740

我不是 C# 专家，所以我会给你一个纯粹的数学解决方案，希望你能用你的语言翻译它。

基本上，您的任务由两个独立的部分组成：选择 b 组 i 到 j 个元素，以及随机性。第二个应该很容易 - 最初只是随机打乱元素，然后进行组拆分。让我们来看看有趣的部分：

如何将 n 个元素分成`b`包含每个元素的组？一个直接的解决方案是在第一组的元素数量之间取随机数，然后是第二组，等等。但是，不能保证这样做你不会留下最后一组元素编号不在和之间。这种解决方案也不是纯粹的随机分布。`i``j``i``j``i``j`

正确的方法是获取第一组的元素数量，当您采用尽可能多的元素时，尊重整体组分裂的解决方案的概率 - 您基本上感兴趣的是总体上有多少解决方案`task(n, b, i, j)`以及存在多少解决方案`task(n-k, b-1, i, j)`如果我们假设我们`k`在第一组中取元素。如果我们能够仅计算解决方案的数量，您可以取每个 k 及其各自的概率，并对第一组的 k 进行随机抽样，然后是第二组，依此类推......

所以现在的问题是：有多少解决方案`task(n, b, i, j)`？请注意，`task(n, b, i, j) = sum(k=i to j) task(n-k, b - 1, i, j)`您可以使用递归轻松找到这些数字（使用动态优化，因此您无需多次计算这些值）。

PS：解决方案的数量可能有一个封闭形式的解决方案，但我无法立即弄清楚，只要`n * b`保持相对较小（< 10 ^ 6）递归解决方案应该可以工作。

**编辑**
PS2：实际上，其中的数字`task(n, b, i, j)`可能会很快变得非常大，因此请考虑使用大整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T11:05:53.113

作为解决方案，我会做的是，这当然是伪代码：

```
func( n, b, i, j )
{
    if(n == 0)
        return //finished
    if(i>j or i>min(j,n))
        return //no solution possible down this path
    out = choose_random_between (i , min(j,n)) 
    current_ave_of_cells_per_group = ( (n - out) / (b - 1) )
    if current_ave_of_cells_per_group < i
        func ( n, b, i, min(out-1,n) )
    else if current_ave_of_cells_per_group > j
        func ( n, b, out+1, min(j,n) )
    else    
        **form the group consisting of 'out' numbers**
        func ( n-out, b-1, i, min(j,n-out) )
} 
```

# javascript - JavaScript OSX MouseWheel 问题

> ID：12446117
> 
> 赞同：1
> 
> 时间：2012-09-16T10:17:11.233
> 
> 标签：javascript, jquery, macos, mousewheel

在 OSX 上使用 JavaScript MouseWheel 似乎不适用于精确的步进滚动。

知道如何为 OSX 修复此示例：

[http://jsfiddle.net/daslicht/Qbq4k/](http://jsfiddle.net/daslicht/Qbq4k/)

问题是，在 OSX 上会调度多个 MouseWheel 事件。我只需要触摸 Logitech Anywhere MX 鼠标的 MouseWheel，就会调度 3 个或更多事件。

当我尝试使用触摸板滚动列表时，由于 MouseWheel 事件过多，无法进行精确滚动。

在 Windows scolling List 上，就像一个魅力，因为每个 MouseWheel Step 上只有一个 Event 被调度（即使在 Anywhere Mouse 的超滚动模式下）

我什至尝试阻止传入事件或降低阈值，但没有什么能像在 Windows 上那样好用：

[http://jsfiddle.net/daslicht/Qbq4k/](http://jsfiddle.net/daslicht/Qbq4k/) //第一次传入n ms后阻塞事件

你们如何处理 OSX 上的 MouseWheel？

```
if(osx){
   mouse=false; //?
} 
```

# http - DNS 查找时间和 Windows DNS 缓存

> ID：12446121
> 
> 赞同：4
> 
> 时间：2012-09-16T10:17:57.513
> 
> 标签：http, windows-7, dns, fiddler, browser-cache

出于 DNS 解析测试目的...我想禁用 Windows 7 中的所有 DNS 缓存

我仍然看到`"DNS Lookup : 0 ms"`同一域的连续请求。

我已经尝试了明显的`"ipconfig /flushdns"`，并且还完全停止了该服务：

```
net stop dnscache 
```

此命令也具有相同的效果：

```
 net stop "DNS Client" 
```

而且我知道浏览器在很短的时间内缓存 DNS 查找。所以我刷新他们的缓存，关闭打开浏览器，或者我在不同的浏览器（Firefox、chrome、chrome incognito、IE）中打开同一个域以绕过该 DNS 缓存。

所以第一次，DNS 查找时间可以是 25 毫秒（使用 8.8.8.8），但是下一次 DNS 查找缓存在系统的某个地方，时间是 0 毫秒。**只有当我等待大约3 到 5 分钟**以重复请求时才会消失。

我能做些什么来强制系统每次都解析 DNS，即使它在同一个 DNS 请求之间是 5 秒？

与保持活动或 Windows 对 TCP 连接的某种重用有关吗？它不应该，因为我重新打开浏览器。但我没有想法，

你能解释一下这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T15:27:18.027

听起来您的目标是模拟一个在野外不存在的不存在的配置（因为所有客户端都有 DNS 缓存）。尚不完全清楚为什么这是一个有趣的测试配置，但可以这样做。

正如您所提到的，所有浏览器都有 DNS 缓存。Windows 的 DNS 客户端本身有一个缓存。您可能使用的任何上游代理也具有 DNS 缓存。

在这种情况下，您遇到了两个问题：首先，Fiddler 本身维护着一个 DNS 缓存。其次，无论您是否关闭浏览器客户端，Fiddler 都会保持与服务器的连接。

如 Fiddler 书中所述，您可以使用首选项控制 Fiddler DNS 缓存`fiddler.network.timeouts.dnscache`。默认值为`150000`（以毫秒为单位，因此为 2.5 分钟）。您可以设置此值`0`以防止 DNS 缓存。

为了防止重复使用连接，您可以在 Fiddler 会话列表中按 CTRL+X，也可以`FiddlerApplication.oProxy.PurgeServerPipePool`根据需要调用该方法。

# java - Java：将画布保存到图像文件会导致空白图像

> ID：12446126
> 
> 赞同：0
> 
> 时间：2012-09-16T10:19:00.507
> 
> 标签：java, awt, bufferedimage

我有一个扩展`Canvas`并实现以下方法的类。问题是，每当我打电话时`exportImage`，我得到的只是一张空白的白色图像。图片上应该有图纸。

```
/**
  * Paint the graphics
  */
public void paint(Graphics g) {
    rows = sim.sp.getRows();
    columns = sim.sp.getColumns();
    createBufferStrategy(1);
    // Use a bufferstrategy to remove that annoying flickering of the display
    // when rendering
    bf = getBufferStrategy();
    g = null;
    try{
        g = bf.getDrawGraphics();
        render(g);
    } finally {
        g.dispose();
    }
    bf.show();
    Toolkit.getDefaultToolkit().sync();    
}

/**
 * Render the cells in the frame with a neat border around each cell
 * @param g
 */
private Graphics render(Graphics g) {
    // Paint the simulation onto the graphics...

}

/**
  * Export the the display area to a file
  * @param imageName the image to save the file to
  */
public void exportImage(String imageName) {
    BufferedImage image = new  BufferedImage(getWidth(), getHeight(),BufferedImage.TYPE_INT_RGB);
    Graphics2D graphics = image.createGraphics();
    paintAll(graphics);
    graphics.dispose();
    try {
        System.out.println("Exporting image: "+imageName);
        FileOutputStream out = new FileOutputStream(imageName);
        ImageIO.write(image, "png", out);
        out.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:03:02.210

我将您的`paint`方法简化为如下所示的简单方法，并且导出工作正常。但是，我建议您覆盖`paintComponent`而不是`paint`：

```
public void paint(Graphics g) {
    g.setColor(Color.BLUE);
    g.drawRect(10, 10, getWidth() - 20, getHeight() - 20);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T15:20:14.360

尝试使用`paint`方法，而不是`paintAll`

```
public void exportImage(String imageName) {
    BufferedImage image = new  BufferedImage(getWidth(), getHeight(),BufferedImage.TYPE_INT_RGB);
    Graphics2D graphics = image.createGraphics();
    paint(graphics);
    graphics.dispose();
    try {
        System.out.println("Exporting image: "+imageName);
        FileOutputStream out = new FileOutputStream(imageName);
        ImageIO.write(image, "png", out);
        out.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:13:38.350

我使用`render`而不是`paint`在`exportImage`将图形打印到图像的方法中。好像是`bufferStrategy`我用的有问题。

# regex - perl替换中的确切字符串

> ID：12446128
> 
> 赞同：0
> 
> 时间：2012-09-16T10:19:13.680
> 
> 标签：regex, string, perl, match

我正在尝试在 perl 中使用以下内容，但它似乎不起作用。如何在不插入任何字符串字符的情况下匹配确切的字符串？我尝试了引号和 \Q，\E 但没有任何效果

```
$string=~ s/\`date +%s\`/anotherthinghere/; 
```

为清楚起见，我要匹配的字符串是

```
`date +%s` 
```

哦，忘了说`date +%s`是在变量中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:11:47.530

您一定误用了`\Q`..`\E`说明符，因为这正是您想要的

我认为，从你所说的，你有``date +%s``，并且反引号已经被降价吃掉了

在这种情况下，此代码将执行您想要的操作。变量插值*先*完成，然后再解释特殊字符。

```
use strict;
use warnings;

my $string = 'xxx `date +%s` yyy';

my $pattern = '`date +%s`';

$string =~ s/\Q$pattern/anotherthinghere/;

print $string; 
```

**输出**

```
xxx anotherthinghere yyy 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T10:35:51.890

如果我很好理解你的问题，那么：

```
my $var = q/`date +%s`/;
my $string = q/foo `date +%s` bar/;
$string =~ s/\Q$var/another/;
say $string; 
```

**输出：**

```
foo another bar 
```

# macos - webView 不适用于 osx

> ID：12446130
> 
> 赞同：0
> 
> 时间：2012-09-16T10:19:38.687
> 
> 标签：macos, webview, crash

我尝试制作一个显示谷歌页面的网页视图，但如果我运行我的程序，它就会崩溃。我在.h中的代码：

```
#import <Cocoa/Cocoa.h>
#import <WebKit/WebKit.h>

@interface AppDelegate : NSObject <NSApplicationDelegate> 

@property (assign) IBOutlet NSWindow *window;
@property (weak) IBOutlet WebView *myWebView; //here I want to show google.com

@end 
```

我在 .m 中的代码：

```
#import "AppDelegate.h"

@implementation AppDelegate
@synthesize myWebView;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
[self loadWeb];
}

-(void)loadWeb {
[[webv mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:          @"http://www.google.de"]]]; // here I want to load the page
}

@end 
```

问题总是说： int main(int argc, char *argv[]) { return NSApplicationMain(argc, (const char ** )argv); //绿色标记：线程1：信号SIGABRT }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:00:54.047

你有没有尝试过：

```
#import <WebKit/WebView.h>
#import <WebKit/WebKit.h> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T10:10:06.837

webview 实例是一个 IBOutlet ，所以你应该从 awakeFromNib 调用它，像这样，

-(void)awakeFromNib{ [ self loadWeb]; }

# python - 如何检索和操作 ndb StructuredProperty 对象？

> ID：12446132
> 
> 赞同：1
> 
> 时间：2012-09-16T10:20:07.580
> 
> 标签：python, google-app-engine, google-cloud-datastore

[以下是文档中的 StructuredProperty](https://developers.google.com/appengine/docs/python/ndb/properties#structured)示例：

```
class Address(ndb.Model):
    type = ndb.StringProperty() # E.g., 'home', 'work'
    street = ndb.StringProperty()
    city = ndb.StringProperty()

class Contact(ndb.Model):
    name = ndb.StringProperty()
    addresses = ndb.StructuredProperty(Address, repeated=True)

guido = Contact(name='Guido',
                addresses=[Address(type='home',
                                   city='Amsterdam'),
                           Address(type='work',
                                   street='Spear St',
                                   city='SF')])

guido.put() 
```

想象一下，Guido 暂时在马里的廷巴克图市工作。我将如何检索和更新他的工作地址？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T10:32:09.010

我会尝试这样的事情。

```
for address in guido.addresses:
    if address.type == 'work':
        address.street = "Main Street"
        address.city = "Timbuktu"

guido.put() 
```

**编辑** 添加了一个冒号

# android - 按下时更改图像按钮

> ID：12446135
> 
> 赞同：2
> 
> 时间：2012-09-16T10:20:19.543
> 
> 标签：android, xml, android-layout, android-button

我想制作图像按钮，所以当它按下时，我会将未按下的图像替换为按钮的按下图像，然后转到其他活动。我在drawable中有两个不同的图像。

我有两个 xml 文件：

第一个-加载主要活动：背景和图像按钮

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:background="@android:color/black"
 android:orientation="vertical" >

<ImageButton
    android:id="@+id/b1_l"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/s1"
    android:scaleType="centerCrop"  
    android:background="@color/trans"

    android:src="@drawable/b1_l" />

</RelativeLayout> 
```

第二个：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

   <item android:state_pressed="false"
   android:drawable="@drawable/image_not_pressed" />

   <item android:state_pressed="true"
   android:drawable="@drawable/image_pressed"" />

</selector> 
```

除了我的xml，我还需要写什么代码？还是我可以传递 xml 并将其仅作为代码编写...？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:31:08.833

您通常需要对按下和默认（未按下）状态进行绘制。为此，您可以拥有像这样（如下）的 xml 文件。您需要将此 xml 文件放在 drawable 文件夹中，然后用作 ImageButton 的 src 或 Button 的背景源。

**让我们将其命名为 mybutton.xml**

```
<?xml version="1.0" encoding="utf-8"?> 
<selector xmlns:android="http://schemas.android.com/apk/res/android"> 
    <item android:state_focused="true" android:state_pressed="true" 
                android:drawable="@drawable/your image name" /> 
    <item android:state_focused="false" android:state_pressed="true" 
                android:drawable="@drawable/your image name" /> 
    <item   android:drawable="@drawable/your image name" /> 
</selector> 
```

**您为主要活动布局文件：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:background="@android:color/black"
 android:orientation="vertical" >

<ImageButton
    android:id="@+id/b1_l"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/s1"
    android:scaleType="centerCrop"  
    android:background="@color/trans"

    android:src="@drawable/mybutton" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T10:34:47.020

您可能想查看有关此的 android 开发人员指南

[http://developer.android.com/guide/topics/ui/controls/button.html](http://developer.android.com/guide/topics/ui/controls/button.html)

# regex - 使用正则表达式匹配可以以 " 或 ' 开头的字符串的开头和结尾

> ID：12446155
> 
> 赞同：2
> 
> 时间：2012-09-16T10:23:24.740
> 
> 标签：regex, string, pattern-matching

我有两个字符串

```
string a = "text 'text'"
string b = 'text "text"' 
```

在这种语言中，`"`and`'`都可以用来开始和结束字符串文字，并且它们可以在其中包含其他符号（引号在撇号内有效，反之亦然）

我需要一个可以同时处理两者的正则表达式，目前我有：

```
(?:\"|')(?<content>[^\"']*)(?:\"|') 
```

但用于`string a`，这只会给我`"text '`而不是完整的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:40:46.033

怎么样：

```
('|")(?<content>[^\1]*)\1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:00:53.247

基本技术是：

`(["'])((?:(?!\1).)*)\1`

开头的引号在组 #1 中被捕获，并且`(?:(?!\1).)*`匹配零个或多个除被捕获的字符*之外*的任何字符。这包含在另一组捕获括号中，因此内容被捕获在组 #2 中。然后最终`\1`匹配结束报价。

但是您正在使用命名组来捕获内容，因此最好在整个过程中使用命名组（特别是因为您没有说明您使用的是哪种风格，并且命名组和编号组之间的交互从一种口味到另一种口味）。这应该适用于 .NET 或 PHP：

```
(?<quote>["'])(?<content>(?:(?!\k<quote>).)*)\k<quote> 
```

但是，如果您使用的是 .NET，我建议您改用它：

```
(?:"(?<content>[^"]*)"|'(?<content>[^']*)') 
```

大多数风格使得在同一个正则表达式中重用组名变得困难或不可能，但在 .NET 中一切正常。

# .net - 通过数据库检索复选框及其嵌套的复选框

> ID：12446160
> 
> 赞同：2
> 
> 时间：2012-09-16T10:25:30.747
> 
> 标签：.net, sql

![表格截图](../Images/b0d33f554056a8e3d4185f24d2fd850e.png)

我正在做一个项目，我需要客户选择一个复选框列表，尽管一些复选框包含嵌套的复选框，这些复选框也需要被选中（根据客户的需要）。

尽管我付出了很多努力，但我无法推断出一种方法来保存并仅在下一页上显示选定复选框的列表。

我在这里很困惑。我已经了解了很多工具，但它们都是基于客户端的工具，例如`ajax` `accordion`等等。因为我打算在服务器端使用它，所以所有方法都失败了。

我打算创建一个由机构选择的课程和分支列表。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T05:07:09.113

所以...复选框可以有父复选框。规范结构是自引用的：

```
create table boxes ( box int primary key, parent int )
select a.*, b.box as 'sub-box'
from boxes as a join boxes as b on b.parent = a.box 
```

这给了你一个层次。要获得整个层次结构，请使用递归视图。

# php - php odbc_connect 到 mssql 在 linux/ubuntu 命令行而不是浏览器中工作

> ID：12446162
> 
> 赞同：3
> 
> 时间：2012-09-16T10:25:52.870
> 
> 标签：php, sql-server, linux, odbc, freetds

我真的觉得我已经对这个问题进行了详尽的搜索，发现了类似的问题并且尝试了很多事情都没有成功，所以我第一次在这里发布一个问题：

我做了很多网页/网络编程（主要是 PHP/jQuery）并将这些页面托管在我的数字图书馆部门的 Drupal/Ubuntu 服务器上。我只是对它们进行编码并通过 Dreamweaver 发布它们，因为我对 Drupal 前端没有太多用处。我只需要我的页面的服务器。

无论如何，我想制作一些可以连接到我们的库目录的 PHP 页面，所以我一直在使用 Drupal/Ubuntu 服务器的命令行。我安装了 unixODBC，遇到了一些麻烦，安装了 FreeTDS，设置了驱动程序和 DSN。

最后...

1.  我能够通过 tsql 连接到我们的目录并运行查询。

2.  我制作了一个基本的 PHP 脚本来测试连接：

    *   它从服务器的 Ubuntu 命令行工作（连接成功）。

    *   当我在浏览器中加载它时它不起作用。我得到了可怕的：

> 警告：odbc_pconnect(): SQL 错误：[unixODBC][Driver Manager]Data source name not found, and no default driver specified, SQL 状态 IM002 in SQLConnect in SQLConnect in /var/www/mydirectory/mytestpage.php on line 15

**更新：**我在笔记本电脑的一个分区中安装了一个测试 Ubuntu Server，我开始清理，安装了 Apache2/PHP5（带有 mssql 和 odbc 模块等）/FreeTDS 等。我得到了一个 tsql 连接。我制作了基本的 PHP 脚本并从命令行成功运行它。然后我从浏览器导航到 php 页面，*它工作了！*我仍然需要在 Drupal 服务器版本上实现这一点，但现在我至少已将问题缩小到 Drupal 服务器上的问题。

我搜索并发现了以下可能的原因：

1.  文件权限，我认为我已得到纠正，但不行

2.  那可能是我设置了用户 DNS 而不是系统 DNS，我已尽力使用正确的“odbcinst”命令选项进行更正

3.  那也许 php 需要以 CGI 模式而不是作为模块运行。但从我读到的内容看来，这似乎不太可能。而且我不确定这会如何影响 Drupal。（我应该在这里进行的系统范围的更改是有限制的。）

4.  很多人说是 SElinux 阻止了 Apache 在浏览器中显示页面，但是暂时禁用 SElinux 没有用。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-21T15:35:36.503

如果您要在命令行上测试 odbc 源，我建议您使用 isql 实用程序而不是 tsql。isql 使用您在 odbc.ini 中定义的 DSN 连接到数据库，而 tsql 直接连接到您的数据库。

如果它适用于 isql，它也应该适用于您的网页。

还要检查 Drupal/Ubuntu 服务器文件 /etc/odbc.ini（您的 DSN 源）和 /etc/odbcinst.ini（TDS 驱动程序设置），看看它们是否与正在运行的 Ubuntu 安装上的匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:52:26.133

我的猜测是它与php有关。ini 文件。在我的 Ubuntu 系统上，我有 2 个。一个在 /etc/php5/apache2/php.ini 一个在 /etc/php5/cgi/php.ini 需要调整 apache2 路径中的值以允许连接. 不幸的是，除此之外，我用的不是太多，因为我使用 MySQL 和 Mongo

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:24:39.407

检查您是否已在以下位置启用 mssql.so 等

/etc/php5/apache2/php.ini，你将在 /etc/php5/cli/php.ini 有另一个

在 ubuntu 中，php.ini 将单独维护 cli & mod_php apache 配置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-28T08:27:17.887

将您`php.ini`从工作服务器复制到非工作服务器，在启动 Web 服务器之前添加使所需的环境变量可访问，并确保您的 Web 服务器对您的`odbc`和`odbcinst ini-files`. 因此，使用 mssql 知识库或帮助。

# java - 从 Slick2D 游戏中获取 Applet 参数

> ID：12446167
> 
> 赞同：0
> 
> 时间：2012-09-16T10:26:49.733
> 
> 标签：java, applet, lwjgl, slick2d

在 Slick2D 游戏中，如何访问传递给`AppletGameContainer`?

我有一个 Slick2D 游戏，我想将它作为 applet 和作为独立应用程序运行。

当游戏作为小程序运行时，我想访问传递给它的一些信息。我在想也许我可以`instanceof`检查`GameContainer`in `StateBasedGame#initGameStates`，但`AppletGameContainer`不继承自`GameContainer`.

Slick2D 框架是否有允许轻松访问小程序参数的功能，或者更好的是，一些抽象层允许访问小程序参数或命令行参数，而我的游戏不必知道它是由哪个容器启动的?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:04:43.637

`AppletGameContainer`不共享相同的遗产，而是定义了一个公共内部类，命名相当模糊`Container`。它是传递给实现的*this*`StateBasedGame`的一个实例。

因此，检查应该是：

```
container instanceof AppletGameContainer.Container 
```

...以及获取参数的代码：

```
((AppletGameContainer.Container) container).getParameter("paramKey"); 
```

# javascript - 在特定代码后更改字体颜色

> ID：12446169
> 
> 赞同：1
> 
> 时间：2012-09-16T10:26:59.110
> 
> 标签：javascript, html, colors

当在文本区域中键入 ^1 之类的代码时，我希望将该代码之后的任何文本的字体颜色更改为 ^1 分配给的任何颜色，

截至目前，我有以下内容：

```
<form method="post" action="index.php">
<textarea id="text" onkeypressed="changecolor()"></textarea>
<input type="submit" value="Add">
</form> 
```

javascript:

```
function changecolor() { //code here } 
```

所以基本上当我输入 ^1 并将蓝色分配给该代码时，该代码之后的文本将是蓝色，但是当输入第二个代码时；例如 ^2 之后的文本将是分配给该代码的颜色，

我非常了解如何将数据插入数据库，但我需要能够找到获取原始数据的方法；即最初使用 ^1 和 ^2 之类的代码输入到 textarea 的数据

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T10:31:16.873

您不能针对文本区域中的特定文本片段。除非您监视其内容并添加一个抽象 div 层以从中输出样式化的 html，否则您想做什么是我不知道的。许多所见即所得的文本编辑器都是这样做的，或者使用'contenteditable'属性来允许在现代浏览器中编辑html......你可以这样开始：

```
<script type="text/javascript">
    var display, input, displayHtml;
    function init(){
       display = document.getElementById('display');
       input = document.getElementById('input');
    }
    function onContentChange(){
        displayHtml = parseContent(this.value);
        display.innerHtml = displayHtml;
    }
    function parseContent(text){
        var html = ... // Generate html according to content
        return html;
    }
    document.onload=init;
</script> 
```

html:

```
<textarea id='input' onkeypress="javascript:onContentChange" />
<div id='display'></div> 
```

# c++ - 拆分函数 c++

> ID：12446170
> 
> 赞同：0
> 
> 时间：2012-09-16T10:27:09.133
> 
> 标签：c++, split

> **可能重复：**
> [在 C++ 中拆分字符串](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

我需要一个分裂的功能。

必须像这样工作：

```
buffer = split(str, ' '); 
```

我搜索了一个拆分函数，尝试了 boost 库，但一切都不好：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:32:37.903

标准 c 库中的 strtok() 非常好，可以满足您的需求。除非你热衷于从多个线程中使用它并且担心函数不能重入，我不怀疑这里是这种情况。

PS 上面假设您有一个字符数组作为输入。如果它是 c++ 字符串，您仍然可以在使用 strtok 之前使用 string.c_str 来获取 c 字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T10:32:48.493

[升压库](http://www.boost.org/doc/libs/1_60_0/more/getting_started/unix-variants.html)应该也可以工作。

像这样使用它：

```
vector <string> buffer;
boost::split(buffer, str_to_split, boost::is_any_of(" ")); 
```

**补充**：
确保包括算法：

```
#include <boost/algorithm/string.hpp> 
```

将其打印到 std::cout ，如下所示：

```
vector<string>::size_type sz = buffer.size();
cout << "buffer contains:";
for (unsigned i=0; i<sz; i++)
cout << ' ' << buffer[i];
cout << '\n'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-16T10:33:02.550

我想[`strtok()`](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)这就是你要找的。

它允许您始终返回由给定字符分隔的第一个子字符串：

```
char *string = "Hello World!";
char *part = strtok(string, " "); // passing a string starts a new iteration
while (part) {
    // do something with part
    part = strtok(NULL, " "); // passing NULL continues with the last string
} 
```

请注意，此版本不得同时在多个线程中使用（还有一个版本（`strtok_s()`，[此处有更多详细信息](https://stackoverflow.com/questions/5999418/why-is-strtok-considered-unsafe)），它有一个附加参数，可以使其在并行化环境中工作）。对于您想在循环中拆分子字符串的情况也是如此。

# javascript - 简单的数据操作。XML？阿贾克斯？php？

> ID：12446171
> 
> 赞同：0
> 
> 时间：2012-09-16T10:27:21.760
> 
> 标签：javascript, jquery, database, dom

我正在制作这样的网站原型

原文：http: [//imageshack.us/a/img513/6013/tavor.png](http://imageshack.us/a/img513/6013/tavor.png)

我的网站：http: [//imageshack.us/a/img507/8461/manok.png](http://imageshack.us/a/img507/8461/manok.png)

右图为div id ovsian，左边小图为ovsia-mini

```
<div id="ovsian" name="ovsian" value="15" onclick="test()">OVSIA 15r</div>

<script type="text/javascript">
document.getElementById('ovsia-mini').style.backgroundImage="url('http://localhost/musli/mini.png')";
var kaina = this.ovsian.value;
$('#price').html("kaina");
}
</script> 
```

我试图这样做，但后来意识到你不能给 div 元素赋值（至少对于 html）。

如何将“ovsian”（图片右侧）的价格值设置为 15，然后`onclick`将 15 添加到总价并打印在左侧的灰色框中？

我应该使用什么技术？XML，AJAX？PHP/MYSQL？我一个都不认识。

我打算在 cookie 中传递最终的价格和产品选择。我知道这是一个安全故障，但在这样一个简单的购物车中没有个人信息，所以会话劫持和所有这些东西都不是问题。

你觉得这样的项目有多难？最好的方法是什么？该网站的目的主要是学习，因此您可以编写的所有细节将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:41:30.240

当您谈论技术时，这将取决于您的技能。

您提到了 AJAX、PHP/MySQL。我推断您正在谈论 javascript 来处理客户端处理和 PHP/MySQL 后端。这些语言肯定会起作用，而且它们很容易学习和使用，而且它们周围有一个很棒的社区。

我还建议学习[jQuery](http://jquery.com)框架。它使客户端编程非常容易。

您还提到了 XML。XML主要用于服务器端和客户端之间的数据交换。虽然它有效，但我更喜欢使用[JSON](http://json.org)，它在服务器端和客户端都易于操作和处理。

# javascript - 在表单中获取焦点输入类或 id

> ID：12446172
> 
> 赞同：1
> 
> 时间：2012-09-16T10:27:36.310
> 
> 标签：javascript, jquery, focus

您好，我想检索重点输入的类。例如我有这个代码：

```
<div class="form-all">
<ul class="form-section">
  <li class="form-line" id="id_8">
    <label class="form-label-left" id="label_8" for="input_8">  </label>
    <div id="cid_8" class="form-input">
      <input type="text" class="form-textbox" id="input_8" name="q8_8" size="50" placeholder="Full Name">
    </div>
  </li>
  <li class="form-line" id="id_7">
    <label class="form-label-left" id="label_7" for="input_7">  </label>
    <div id="cid_7" class="form-input">
      <input type="text" class="form-textbox" id="input_7" name="q7_7" size="50" placeholder="Company Name">
    </div>
    </li>
    <li class="form-line" id="id_4">
    <label class="form-label-left" id="label_4" for="input_4">  </label>
    <div id="cid_4" class="form-input">
      <input type="email" class="form-textbox validate[Email]" id="input_4" name="q4_4" size="50" placeholder="Email Address">          
    </div>
  </li>
</ul>
 </div>​​​​​​​​​​​​​​​​​​​​​​​ 
```

这是一个有 23 个输入的表格。我希望当我关注一个输入以向`<li>` in 女巫添加一个类时输入。我知道如何将类添加到 中`li`，问题是如何找到重点输入.... `$("#input_"+ var).parent().addClass("field-active");`

是什么`var`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:30:06.953

您可以尝试***[`:focus`](http://api.jquery.com/focus-selector/)***选择器：

```
$('input:focus').attr('id'); 
```

访问`class`：

```
$('input:focus').attr('class'); 
```

如有必要，您可以更改选择器。

### 检查这个

```
$('input').on('focus', function() {
    $('.field-active').removeClass('field-active')
    $(this).parent().addClass("field-active");
}).on('blur',function() {
    $('.field-active').removeClass('field-active')
});​ 
```

***[演示](http://jsfiddle.net/4exM3/5/)***

# javascript - Javascript 的 Sphinx API 文档

> ID：12446173
> 
> 赞同：2
> 
> 时间：2012-09-16T10:27:41.197
> 
> 标签：javascript, python-sphinx

我在文档中广泛使用 Sphinx，并且对它感到满意。

然而，我发现自己做的 Javascript（前端）比 Python 更多。

是否有任何插件或方法可以使用 Sphinx 从 JavaScript 代码注释中执行类似的 API 文档，就像 Python 文档字符串一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-07-18T15:18:39.340

我有同样的问题，所以我写了[sphinx-js](https://pypi.python.org/pypi/sphinx-js/)来解决它。它基本上是 JavaScript 的 autodoc，还有一些其他的细节。Mozilla Hacks 博客上有[更深入的文章。](https://hacks.mozilla.org/2017/07/introducing-sphinx-js-a-better-way-to-document-large-javascript-projects/)与类似包相比的优势是更好的润色、无 Java 依赖、源代码中的标准 JSDoc 语法以及 autodoc-esque 而不是基于包含的工作流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T10:51:36.260

您可能想查看[jsdoc-for-sphinx](https://github.com/stdbrouw/jsdoc-for-sphinx)。我还没有尝试过，所以不知道效果如何。

# php - 如何根据变量的值对列表进行排序？(php)

> ID：12446175
> 
> 赞同：1
> 
> 时间：2012-09-16T10:27:55.547
> 
> 标签：php, mysql, wordpress

对熟悉wordpress的人的第一个问题：资源/系统负载明智直接查询mysql并在那里订购结果更好吗？或使用 wordpress 钩子 WP_query 获取所有帖子并根据评论变量对它们进行排序？

我有这段代码，它可以获取所有内容。我想根据`comments_number( '0', '1', '%' );`（顶部评论较高的）订购此列表，并将显示的总数限制在前 4 位。

到目前为止我的代码：

```
 <ul>
    <?php

    global $post;
    $all_events = tribe_get_events(
      array(
        'eventDisplay'=>'upcoming',
        'posts_per_page'=>-1
    )
    );

    foreach($all_events as $post) {
    setup_postdata($post);
    ?>

    <li>
          <a title="<?php the_title(); ?>" href="<?php the_permalink(); ?>">
                    <?php
                      if ( has_post_thumbnail () ) {
                          echo get_the_post_thumbnail(array(100,100));
                      } else {
                          echo '<img width="100" height="100" alt="'
                               .get_the_title().'" title="'
                               .strip_tags(get_the_excerpt()).'" src="'
                               .get_bloginfo('template_url')
                               .'/thumbs/event-recent-thumb-na.png">';
                      }
                    ?>
          </a>

          <h3><a title="<?php the_title(); ?>" href="<?php the_permalink(); ?>">
              <?php the_title(); ?></a></h3>
          <span><?php echo tribe_get_start_date( $p->ID, true, 'M j, D.' ) . " - "
                         . tribe_get_end_date( $p->ID, true, 'D.' ); ?></span>
          <p><?php echo strip_tags(get_the_excerpt()); ?></p>
          <span class="eventinterested"><?php comments_number( '0', '1', '%' ); ?>
          <?php _e('interested so far','holidayge'); ?></span>
    </li>

    <?php } //endforeach ?>

          <?php wp_reset_query(); ?>

 </ul> 
```

有没有办法在那里修改`foreach`和订购列表？我不是 php 程序员，但它似乎合乎逻辑......我正在阅读有关[Sort](http://php.net/manual/en/function.sort.php)似乎是正确的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:45:52.403

MySQL 在查询方面比 PHP 快得多，所以你应该尽量不要要求比你想要的更多的帖子。将所有帖子加载到 PHP 中并不能很好地扩展。

我猜tribe_get_events() 使用get_posts()。如果这是正确的，这应该可以解决问题：

```
$all_events = tribe_get_events(
    array(
        'eventDisplay'   => 'upcoming',
        'posts_per_page' => 4,
        'orderby'        => 'comment_count',
        'order'          => 'DESC'
    )
); 
```

更多信息可以[在 get_posts() 的文档](http://codex.wordpress.org/Template_Tags/get_posts)中找到。

# php - 用php socket编程操作打印机

> ID：12446177
> 
> 赞同：2
> 
> 时间：2012-09-16T10:28:05.583
> 
> 标签：php, sockets, printing, status

如何仅使用套接字程序操作打印机。
当我在 windows 中尝试 cups、带 php 的 IPP 和 printer_open 函数时，
但我担心的是不依赖于 Linux、window 等平台。
它应该是平台独立的。

下面是为打印机创建套接字的代码。

代码未优化，但已成功打印文本。
唯一的问题是我无法检查打印作业状态。

```
<?php
$host = "printer_ip";
$port    = 9100; //default listening port for printer
$message = "This text is going to print by printer";
// create socket
$socket = socket_create(AF_INET, SOCK_STREAM, 0);
if(!$socket){
    $errorcode = socket_last_error();
    $errormsg = socket_strerror($errorcode);
    socket_close($socket);
   die("Could not create socket: [$errorcode] $errormsg\n");
}
// connect to server
$result = socket_connect($socket, $host, $port);  
if(!$result){
        $errorcode = socket_last_error();
        $errormsg = socket_strerror($errorcode);
    socket_close($socket);
    die("Could not connect to server: [$errorcode] $errormsg\n");
}
// send string to server
$socket_wrt = socket_write($socket, $message, strlen($message));
if(!$socket_wrt){
    $errorcode = socket_last_error();
    $errormsg = socket_strerror($errorcode);
    socket_close($socket);
    die("Could not send data to server: [$errorcode] $errormsg\n");
}
// get server response
$result = socket_read($socket, 1024);
if(!$result){
    $errorcode = socket_last_error();
    $errormsg = socket_strerror($errorcode);
    socket_close($socket);
    die("Could not read server response: [$errorcode] $errormsg\n");
}
echo "Reply From Server:".$result;
// close socket
socket_close($socket);
?> 
```

编辑：
这个

```
$result = socket_read($socket, 1024); 
```

没有对数据给予任何帮助。
由于打印机空闲并且除了我之外没有人在使用，这就是为什么每次请求打印机都
可以轻松打印数据而不会拒绝任何连接。
虽然 socket_read 响应的回显，但连接数据“来自服务器的回复”也不会打印。
任何帮助都会帮助我很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:14:40.637

如果您可以从 JetDirect（端口 9100）切换到标准 LPR，这种方法可以帮助您。 [http://www.phpclasses.org/package/2540-PHP-Abstraction-for-printing-documents.html](http://www.phpclasses.org/package/2540-PHP-Abstraction-for-printing-documents.html)

最初来自： [从 PHP 应用程序通过网络打印](https://stackoverflow.com/questions/5694144/printing-over-network-from-php-app)

# jquery - Internet Explorer 中的 jquery ajax 发布错误

> ID：12446178
> 
> 赞同：1
> 
> 时间：2012-09-16T10:28:06.613
> 
> 标签：jquery, ajax, facebook

我正在使用以下代码在 facebook 上发布图像

```
$.ajax({type: "POST",
            url: "https://graph.facebook.com/me/photos",
            data: {message: "",
                url: "my Image url",
                access_token: accessToken,
                format: "json"},
           dataType: "json",

              success: function(data){

               uploads(id);
            },
            error: function(data){alert("Failed! " + data.error);}
    }); 
```

此代码在 Chrome、firefox 和世界上发明的任何其他浏览器上运行良好，但在 Internet Explorer 中无法运行。这段代码有什么问题？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T10:32:33.890

这是一个跨域请求。所以使用

```
 dataType: "jsonp", 
```

设置`jsonpCallback`为ajax配置。那是：

```
$.ajax({
    type: "POST",
    url: "https://graph.facebook.com/me/photos",
    data: {
        message: "",
        url: "my Image url",
        access_token: accessToken,
        format: "json"
    },
    dataType: "jsonp",
    jsonpCallback: 'blah', // here
    success: function(data) {

        uploads(id);
    },
    error: function(data) {
        alert("Failed! " + data.error);
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:33:39.673

> 这段代码有什么问题？

错误的问题:-)

正确的问题：您为什么要尝试通过 AJAX 自己做这件事——而不是仅仅使用 JS SDK 并调用它的 API 方法？

这将为您处理一切。

# qt - 将数据添加到 qml XmlDataModel

> ID：12446181
> 
> 赞同：1
> 
> 时间：2012-09-16T10:29:03.960
> 
> 标签：qt, qml

gi，我有一个关于 qml 和 XmlDataModel 的问题。我有一个 xml 文件，其中有这样的内容：

```
<model>
  <item title="one" />
  <item title="two" />
</model> 
```

我有一个包含以下数据的 listView：

```
ListView {
    id: listView
    dataModel: XmlDataModel {
        source: "data/model1.xml"
    }
} 
```

现在，当我按下按钮时，我不想向这个模型添加一些数据。这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T22:08:01.767

`XmlListModel`设计为只读模型。`ListModel`但是，您可以使用它方便地获取数据并使用可变模型填充该数据。[你可以在这里](/questions/10774587/typecast-xmllistmodel-to-listmodel/10789466#10789466)找到一个例子。

# php - 在codeigniter中调试路由？

> ID：12446184
> 
> 赞同：8
> 
> 时间：2012-09-16T10:29:35.990
> 
> 标签：php, debugging, codeigniter, logging, codeigniter-routing

我想知道是否有任何简单的方法可以在代码点火器中调试路由？

最好我希望能够在日志中看到以下内容：

```
Client sent : apps/something
Route found : apps/(:any) --> applications/searchbyname/$1
Redirecting : apps/something --> applications/searchbyname/something
//and just cause we can lets make the searchbyname function not exist
ERROR - 2012-09-16 22:10:05 --> 404 Page Not Found --> applications/searchbyname/something 
```

基本上，这意味着我们可以看到我们何时到达路线以及它试图加载的位置。

有什么方法可以实现这些方面的功能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T11:17:11.190

刚刚写了一个Router核心系统类的小扩展：

[https://github.com/Philo01/CodeIgniter-Route-Debugging](https://github.com/Philo01/CodeIgniter-Route-Debugging)

它将按照您描述的方式进行调试。（除了404，我还需要补充）

# r - R：rbind 矩阵并创建指标变量

> ID：12446187
> 
> 赞同：1
> 
> 时间：2012-09-16T10:29:52.897
> 
> 标签：r

我在列表中调用`index.1`了30 个矩阵。我可以使用以下方法将它们组合成一个矩阵：`index.30``listname``do.call`

```
new.matrix = do.call(rbind, listname) 
```

但是如何在矩阵中创建一个变量作为指标来显示每个观察最初来自哪个矩阵？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:42:18.250

```
mat1<-matrix(c(1,1,0,0),byrow=TRUE,nrow=2)
mat2<-matrix(c(13,3,0,0),byrow=TRUE,nrow=2)
mat1
mat2
matindex<-c(rep(1,length(mat1[,1])),rep(2,length(mat2[,1])))
listname<-list(mat1,mat2)
new.matrix <- do.call(rbind, listname)
finalnewmatrix<-cbind(new.matrix,matindex)
finalnewmatrix
# or if you want the index as rownames then...
# rownames(new.matrix)<-matindex 
```

要更加自动化并节省许多矩阵的输入，您可以执行以下操作：

```
lengths  <- sapply(listname, nrow)
matindex <- rep(seq_along(listname), lengths)
new.matrix <- do.call(rbind, listname)
finalnewmatrix <- cbind(new.matrix, matindex) 
```

# android - ICS 4.0.3 AVD 未在线显示

> ID：12446190
> 
> 赞同：2
> 
> 时间：2012-09-16T10:30:16.860
> 
> 标签：android, adb, android-4.0-ice-cream-sandwich, avd

这里我有一个应用程序，它应该在 4.0.3 AVD 上运行（在属性中选择）。 [![特性](../Images/80883c46a35c7dd6b3ecb8b57cb3bd88.png)](https://i.stack.imgur.com/7dzpo.png)

但只要我运行该应用程序，它就会自动以 2.2 AVD 启动。

因此，我已将“运行配置”中的运行选项更改为`Always prompt to pick up device`.

[![](../Images/2241baeb2c07fadf1232ed8ba101ff6d.png)](https://i.stack.imgur.com/8JavX.png)

现在我同时运行了 2.2 和 4.0.3 AVD：

[![](../Images/79ceac6f94fb43cc88979209919f3f71.png)](https://i.stack.imgur.com/hlXzx.jpg)

但是，只要我运行该应用程序，eclipse 就会给出我拥有的在线设备列表，并且只有 1 台设备（2.2）在线： [![](../Images/e39870248ce928e144a3247301154982.png)](https://i.stack.imgur.com/dLfj9.jpg)

如何让我的应用程序在 4.0.3 AVD 上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T10:55:04.163

通常这个问题是通过两个简单的命令来解决的，我建议你从你的 DOS 提示符（在 windows 中）或 shell（在 Linux 的情况下）运行这两个命令

```
adb kill-server
adb start-server 
```

# c# - 无法从其他窗口更改对象属性

> ID：12446193
> 
> 赞同：1
> 
> 时间：2012-09-16T10:30:20.507
> 
> 标签：c#, .net, wpf

我有主窗口和另一个窗口。在第二个窗口中我创建了新`canvas`的，我想从主窗口更改它的属性，我尝试失败了：

这是第二个窗口的类：

```
public partial class window2 : Window
{
    public Canvas painting = new Canvas();

    public window2()
    {
    }
} 
```

在这里我尝试从主窗口更改其属性：

```
window2 paint = new window2();

private void button1_Click(object sender, RoutedEventArgs e)
{
    paint.painting.Background = Brushes.Black;
} 
```

当我单击按钮时，它什么也不做。

**编辑：**

我认为如果我使用 Application.current.properties 并存储画布对象会更好，但我不知道如何使用它，我试过这个：

```
Application.Current.Properties["p1"] = painting; 
```

现在如何使用我刚刚创建的“p1”变量从主窗口设置属性？我试过`p1.background`了，但我不能使用 p1 作为变量，那我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:14:29.867

您的`window2`构造函数应包含以下内容：

```
this.AddChild(painting); 
```

每当您创建新控件（如`Canvas`）时，都应设置其父容器。

这是我来自window2的代码：

```
public Canvas painting = new Canvas();

public window2()
{
    this.AddChild(painting);
} 
```

和主窗口：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    window2 w = new window2();
    w.Show();
    w.painting.Background = Brushes.Black;
} 
```

我相信你说的是你有数量不确定的画布，你想访问它们。我建议您将它们保存在`List`画布中或`HashTable`（您需要使用`System.Collections`命名空间）中。也不要忘记设置父容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T11:39:16.133

就 WPF 控件而言， A`Canvas`有点奇怪。它的大小可能为零，因此您看不到变化。尝试硬编码大小以检查代码是否有效。在`window2`构造函数中这样做：

```
painting.Width = 100;
painting.Height = 100; 
```

# c# - 通用方法与非通用方法 - 是否有任何性能优势？

> ID：12446196
> 
> 赞同：4
> 
> 时间：2012-09-16T10:30:58.343
> 
> 标签：c#, .net, generics, extension-methods

我正在用 C# 创建我的第一个网站。

我注意到我在智能感知中得到了一些重复的扩展方法。进一步调查是这两个：

```
public static void ThrowNullOrEmpty<T>(this IEnumerable<T> obj, string param)
{
}

public static void ThrowNullOrEmpty(this string obj, string param)
{
} 
```

看来字符串也可以`IEnumerable<char>`。

从编译的基础上，我可以删除字符串变体，但是是否有任何性能问题或其他我应该注意的问题？

更新

刚刚测试了超过 1m 次迭代。

```
public bool IsNullOrEmpty1(string @this)
{
    return String.IsNullOrEmpty(@this);
} 
```

对比

```
public bool IsNullOrEmpty2<T>(IEnumerable<T> @this)
{
    return @this == null || !@this.Any();
} 
```

IsNullOrEmpty1 在我的开发机器 IsNullOrEmpty2 (125 - 250ms) 上运行 12 毫秒，因此慢了 10 - 20 倍。

在现实世界中，我采用了每月 3000 万次迭代的极高数字，这相当于每分钟 1388 次（每天 12 小时）。两者的结果都小于 1ms。

因此，删除 IsNullOrEmpty1 不是最好的方法，但它也不是网站杀手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T10:39:17.813

这可能取决于这些方法的实现——字符串版本可以针对性能进行优化，而`IEnumerable<T>`需要更通用。调用泛型方法没有开销，它已经在编译时解析为正确的泛型参数。

字符串版本可以这样实现，开销很小（基本上需要做两次比较）：

```
if (String.IsNullOrEmpty(value)) 
```

`IEnumerable<T>`另一方面，可能必须实现如下：

```
if (value == null || !value.Any()) 
```

这里的关键是`Any`调用 GetEnumerator 方法并返回一个枚举器。（为简单起见，我们将在此处忽略框架可能在内部对某些类型使用的性能优化）。这意味着实现实际上创建了一个新对象，稍后需要对它进行垃圾收集 - 与`string`版本中提到的两次比较相比，两者都需要更多的时钟周期。

在实践中，除非这些方法被非常频繁地调用，否则我怀疑是否存在任何显着的性能差异。

顺便说一句，这行得通的原因是，这`string`是一个`IEnumerable<char>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T10:48:06.203

`string`是一个密封类，所以我们可以直接调用`string`类中的方法，而不需要访问虚函数指针。理论上，它比通过 I 更快`Enumerable<char>`。但在实践中，这取决于您在方法中调用`string`方法的次数。

# c# - 如何使用一个属性的不同值填充 AutoCompleteBox 过滤器？

> ID：12446211
> 
> 赞同：1
> 
> 时间：2012-09-16T10:33:15.857
> 
> 标签：c#, linq, visual-studio-lightswitch

我的表有一个日期字段，我想从中查询所有不同的年份，并在我的 ACB 屏幕过滤器中为同一张表使用这些年份。

我正在尝试找出我需要的 Linq 代码。我只需要查询返回如下内容：

2012

2011

2010

并将这些值用作我的自动完成框的选择列表。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:29:53.367

如果您的 Date 字段从不包含 null，则此查询将在 EF 上执行：

```
 var years = (from row in ctx.YourTable
                 select row.DateField.Year).Distinct().AsEnumerable().Select(e => e.ToString()); 
```

这将返回一个 IEnumerable< string > 但如果适合您，则在末尾添加 .ToList() 或 ToArray() 。

为了完整性，如果您的 Date 字段可以为空，您应该过滤掉空值：

```
 var years = (from row in ctx.YourTable
                 where row.DateField != null
                 select row.DateField.Value.Year).Distinct().AsEnumerable().Select(e => e.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:46:55.627

您可以做任何事情的唯一方法是创建自定义 RIA 服务，然后将其添加为数据源。第一次可能看起来令人生畏，但它真的很容易。

此链接将解释基础知识。那么您可以使用 Kyle 在他的回答中展示的 LINQ 语法。

[我如何：显示基于聚合数据的图表](http://blogs.msdn.com/b/lightswitch/archive/2011/04/08/how-do-i-display-a-chart-built-on-aggregated-data-eric-erhardt.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:36:49.547

您不能以编程方式设置 AutoCompleteBox 的选择列表。请参阅[这个 SO 问题](https://stackoverflow.com/questions/10064263/in-lightswitch-how-to-fill-choice-list-of-query-parameter-from-a-table)。

`_PreprocessQuery`但是，您可以在该方法中使用 LINQ 。使用查询设计器创建一个空查询，单击“编写代码”旁边的向下箭头并选择`_PreprocessQuery`方法。然后像这样使用@xeondev 的 LINQ 代码：

```
partial void Query1_PreprocessQuery(ref IQueryable<TableName> query)
{
    query = (from row in query
             where row.DateField != null
             select row.DateField.Value.Year).Distinct().AsEnumerable().Select(e => e.ToString());
} 
```

# java - 如何在jpa中实现自动增量

> ID：12446214
> 
> 赞同：4
> 
> 时间：2012-09-16T10:34:07.247
> 
> 标签：java, mysql, eclipse, jpa

我正在学习 JPA，我想知道我们如何告诉实体管理器主键字段是使用数据库自​​动递增到表中生成的？我正在使用 Mysql 5.5 和 Oracle Enterprise For Eclipse(OEFE) 感谢您的帮助

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-16T10:36:27.063

如果您有需要自动递增的 id，那么，

```
@Id @GeneratedValue(strategy=GenerationType.IDENTITY)
private Long id; 
```

# python - SQLAlchemy 不会更新我的数据库

> ID：12446220
> 
> 赞同：12
> 
> 时间：2012-09-16T10:34:31.653
> 
> 标签：python, sqlalchemy, pyramid, python-3.2

我正在使用 SQLAlchemy-0.7.8 制作一个 Pyramid 应用程序。我正在使用 64 位 Python3.2。

问题是，为什么以下函数没有向数据库提交任何内容？

```
def create_card(sText,sCard):
    """
    create a wildcard instance if all is well (ie,sCard match in sText)
    return 
        oCard, dCard
    otherwise return False,False
    """
    oMatch = re.search(sCard,sText)
    if oMatch:
        oCard = WildCard()
        #set up some stuff about the WildCard

        DBSession.add(oCard)
        DBSession.flush()
        dCard = {
                    'id'            : oCard.id,
                    'span'          : oMatch.span(),
                    'card'          : oCard.card_string,
                            }
        return oCard,dCard
    return False,False 
```

我从另一个脚本导入 DBSession。定义如下：

```
DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension())) 
```

以下是一些背景信息：

我正在制作的应用程序将用于通过使用正则表达式来表征大块 HTML。如果应用程序卡住并认为一段文本应该有一个通配符匹配，那么用户会得到一个小表单来填写。一旦提交表单，就会调用 create_card。如果通配符与字符串匹配，则创建通配符实例。

WildCard 类没有什么特别之处，它只是存储一个字符串和几个整数。如果我打印出 dCard，它看起来好像 WildCard 已成功提交，因为它有一个整数 id。如果我不在数据库会话上调用刷新，则 dCard['id'] 为无。

id 字段如下所示：

```
id = Column(Integer,Sequence('wild_seq'), primary_key=True) 
```

add 和 flush 行导致以下控制台输出：

```
2012-09-16 12:30:34,845 INFO  [sqlalchemy.engine.base.Engine][Dummy-2] INSERT INTO wildcard_wildcards (card_string, range_id, brand_id, category_id, group_cat_map_id, heading_group_id, heading_to_grp_map_id, heading_id, value_map_id, igneore_match) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2012-09-16 12:30:34,845 INFO  [sqlalchemy.engine.base.Engine][Dummy-2] ('sCard contents', None, None, None, None, None, None, None, None, 0) 
```

所以到目前为止，一切都像预期的那样表现得很好。

这就是问题所在：即使 WildCard 实例看起来已经提交到数据库，并且没有引发异常，但直接检查数据库表明没有进行任何更改。

用 commit() 替换 flush() 会引发以下异常：

```
AssertionError: Transaction must be committed using the transaction manager 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-16T10:36:48.503

您需要*提交*您的交易。

您可以显式执行此操作（通过调用`DBSession.commit()`或使用[`pyramid_tm`中间件](http://docs.pylonsproject.org/projects/pyramid_tm/en/latest/)；后者在成功响应时自动提交事务（使用 2xx HTTP 响应）。

`ZopeTransactionExtension`如果您将扩展与会话制造商一起使用，后者仅提交 SQLAlchemy 的事务：

```
from zope.sqlalchemy import ZopeTransactionExtension

DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension())) 
```

如果您已经在使用`ZopeTransactionExtension`并想显式提交您的事务，则需要使用`transaction`包：import transaction

```
transaction.commit() 
```

# linux - FASM：字符串存储和控制台输出

> ID：12446225
> 
> 赞同：1
> 
> 时间：2012-09-16T10:34:52.457
> 
> 标签：linux, assembly, fasm

“消息”块有问题，它的输出（print_less、print_more、print_equal、print_final）。我真的不知道如何存储字符串，所以这就是为什么我在输出中获取所有字符串而不是其中的两个（print_less 或 print_more 或 print_equal + print_final）。

这是代码：

```
format ELF64 executable

;=============================================
;================== DATA =====================
;=============================================
segment readable writeable
;=============================================

;=============================================
;                 variables
;=============================================

a dq 26h
b dq 100h 
c dq 4h
d dq 3h

;=============================================
;                 messages
;=============================================

msg_less db 'a < b',0xA,0
msg_more db 'a > b',0xA,0
msg_equal db 'a = b',0xA,0
msg_final db 'Completed successfully',0xA,0

;=============================================
;               message sizes
;=============================================

msg_more_size = $-msg_more
msg_less_size = $-msg_less
msg_equal_size = $-msg_equal
msg_final_size = $-msg_final

;=============================================
;================== CODE =====================
;=============================================
segment readable executable
;=============================================

entry $

_begin:
    mov rcx,[a]
    cmp rcx,[b]

    jl  print_less
    jg  print_more
    je  print_equal

_final:
    mov edx,msg_final_size
    lea rsi,[msg_final]

    mov edi,1   ; STDOUT
    mov eax,1   ; sys_write
    syscall

    jmp syscall_exit

;=============================================
;             print message segment
;=============================================

print_less:
    mov edx,msg_less_size
    lea rsi,[msg_less]
    jmp syscall_msg

print_more:
    mov edx,msg_more_size
    lea rsi,[msg_more]
    jmp syscall_msg

print_equal:
    mov edx,msg_equal_size
    lea rsi,[msg_equal]
    jmp syscall_msg

;=============================================
;               syscall segment
;=============================================

syscall_msg:
    mov edi,1   ; STDOUT
    mov eax,1   ; sys_write
    syscall

    jmp _final

syscall_exit:
    xor edi,edi ; exit code 0
    mov eax,60  ; sys_exit
    syscall 
```

输出：

```
[look@me ~]$ fasm ~/workspace/ASM/ASM1/asm.asm && ~/workspace/ASM/ASM1/asm
flat assembler  version 1.70.03  (16384 kilobytes memory)
3 passes, 364 bytes.
a < b
a > b
a = b
Completed successfully
Completed successfully 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:03:40.400

您的长度计算不正确。例如 的值`msg_more_size`将是：

```
msg_more_size = msg_equal-msg_more 
```

$ 实际上表示您当前的代码位置。所以`$-msg_more`意味着几乎整个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T11:05:52.290

可能是因为您的字符串不是 Null 终止的。添加`0`在您的字符串的末尾，然后再试一次。

```
msg_less db 'a < b',0xA, 0 ; <-- Null added 
```

那是因为 print 命令继续打印字符，直到遇到 null。

# deployment - 如何将带有 SQL Server CE 的 ASP.NET MVC4 应用程序部署到 Azure 网站

> ID：12446226
> 
> 赞同：2
> 
> 时间：2012-09-16T10:35:49.173
> 
> 标签：deployment, sql-server-ce, asp.net-mvc-4, azure-web-app-service

我用 SQL Server CE 数据库部署了一个 ASP.NET MVC4 应用程序，但我得到了

> *抱歉，处理您的请求时出现了一个错误*

我正在使用 VS2012 将此应用程序发布到 azure 网站。我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:38:32.203

总结一下，因此可以在此标记答案以帮助下一个人。

在[azure-web-sites上遇到问题时，](/questions/tagged/azure-web-sites "显示标记为“天蓝色网站”的问题") **FTP**是一个方便的调试工具，它使您能够：

*   验证**bin 目录**`dll`中是否存在 ***   有时 .gitignore 文件会阻止目录被签入** 
***   验证您的`web.config`文件是否配置了正确版本的程序集
    *   [NuGet](http://nuget.org)可以提供帮助，但最终取决于您来验证您的依赖关系**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-28T07:49:38.327

这是一篇关于这个主题的好文章：http: [//www.dotnetcurry.com/showarticle.aspx?](http://www.dotnetcurry.com/showarticle.aspx?ID=883) ID= 883 不幸的是，VS 2013 Compact 版本不再受支持，所以事情有些棘手。**

# c++ - 参数包参数消耗

> ID：12446229
> 
> 赞同：5
> 
> 时间：2012-09-16T10:35:57.237
> 
> 标签：c++, variadic-templates

可以像[这样获取参数包的](http://liveworkspace.org/code/b4647e5d743523e095a3a86c288d7528)*第一个*元素

```
template <typename... Elements>
struct type_list
{
};

template <typename TypeList>
struct type_list_first_element
{
};

template <typename FirstElement, typename... OtherElements>
struct type_list_first_element<type_list<FirstElement, OtherElements...>>
{
    typedef FirstElement type;
};

int main()
{
   typedef type_list<int, float, char> list;
   typedef type_list_first_element<list>::type element;
   return 0;
} 
```

但不可能像[这样获得](http://liveworkspace.org/code/9839be4eb3c2e7d7b12eab8dbd310ab4)*最后一个*元素

```
template <typename... Elements>
struct type_list
{
};

template <typename TypeList>
struct type_list_last_element
{
};

template <typename LastElement, typename... OtherElements>
struct type_list_last_element<type_list<OtherElements..., LastElement>>
{
    typedef LastElement type;
};

int main()
{
   typedef type_list<int, float, char> list;
   typedef type_list_last_element<list>::type element;
   return 0;
} 
```

与 gcc 4.7.1 抱怨：

> 错误：“struct type_list_last_element<type_list<int, float, char>>”中的“type”未命名类型

标准中的哪些段落描述了这种行为？

在我看来，模板参数包在某种意义上是*贪婪*的，它们消耗所有匹配的参数，在这种情况下，这意味着`OtherElements`消耗所有三个参数（`int`，`float`和`char`），然后什么都没有，`LastElement`所以编译失败。我的假设是否正确？

**编辑：**

澄清一下：我不是在问如何从参数包中提取最后一个元素，我知道该怎么做。我真正想要的是从后面而不是前面挑选包，因此对于每个元素一直递归到后面是无效的。显然，事先颠倒顺序是最明智的选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:36:28.693

相关条款是 14.5.5:8 末尾的项目符号：

> ### 14.5.5 类模板部分特化 [temp.class.spec]
> 
> 8 - 在类模板部分特化的参数列表中，适用以下限制：[...]
> 
> *   参数不应包含未扩展的参数包。如果一个参数是一个包扩展（14.5.3），它应该是模板参数列表中的最后一个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T19:38:43.677

观察：

1.  的最后`<first,...>`一个元素与`<...>` if only`...`的最后一个元素不为空相同。
2.  一个元素列表的最后一个元素`<elem>`是`elem`

因此，您必须使用尾部模板递归地执行此操作：

递归：

```
template <typename TypeList>
struct type_list_last_element;

template <typename FirstElement, typename... OtherElements>
struct type_list_last_element<type_list<FirstElement, OtherElements...>>
{
    typedef typename type_list_last_element<type_list<OtherElements...>>::type type;
}; 
```

尾巴：

```
template <typename LastElement>
struct type_list_last_element<type_list<LastElement>>
{
    typedef LastElement type;
}; 
```

**[更新]**和用法：

```
int main()
{
   typedef type_list<int, float, char> list;
   typedef type_list_last_element<list>::type last;
   return 0;
} 
```

**[结束更新]**

见[ideone](http://ideone.com/e8R82)

# .net - 文件对话框异常

> ID：12446230
> 
> 赞同：0
> 
> 时间：2012-09-16T10:36:00.970
> 
> 标签：.net, exception, c++-cli

我试图`OpenFileDialog`在下面的代码中使用，但编译器显示异常`System::NullReferenceException`，一旦我将代码放在`try`和`catch`块之间，不会引发异常，但现在显示对话框！？

```
try 
{ 
    if(openFileDialog1->ShowDialog() == System::Windows::Forms::DialogResult::OK)
    { 
         this->textBox18->Text=openFileDialog1->FileName->ToString();  

    } 
} 
catch(System::NullReferenceException^ e){ e->Message;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:53:54.993

在使用它之前，您必须创建`OpenFileDialog`该类的实例。在此代码段中：

```
private: System::Windows::Forms::OpenFileDialog^ openFileDialog1; 
```

您只是声明了一个类型的变量`OpenFileDialog`（用 初始化`null`），但您需要先实例化它才能使用它

```
OpenFileDialog^ openFileDialog1 = gcnew OpenFileDialog; 
```

# php - 如何在 Erlide 中使用 YAWS - Erlang

> ID：12446237
> 
> 赞同：1
> 
> 时间：2012-09-16T10:37:44.827
> 
> 标签：php, erlang, yaws, erlide

我读过 Erlang 有一个内置的网络服务器（YAWS）；我正在使用 Eclipse 插件 Erlide 开发 Erlang，我想知道如何访问这样的网络服务器，例如运行一个简单的“hello world”PHP 脚本；只是为了开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T12:09:30.370

Yaws 没有内置在 Erlang 中——Erlang 中的内置 Web 服务器称为[inets](http://www.erlang.org/doc/apps/inets/http_server.html)。您可以在[Yaws 网站上找到有关 Yaws 的更多信息，您可以在其](http://yaws.hyber.org/)[PDF 文档](http://yaws.hyber.org/yaws.pdf)中找到其 PHP 支持的所有详细信息。如果您在开始使用 Yaws 时遇到任何问题，您可以在[Yaws 邮件列表](https://lists.sourceforge.net/lists/listinfo/erlyaws-list)上寻求帮助。

# javascript - 在按钮单击时在特定 td 中添加额外的下拉列表

> ID：12446240
> 
> 赞同：0
> 
> 时间：2012-09-16T10:38:12.140
> 
> 标签：javascript, html-table

我们有一个特定的功能需要添加动态行。在第三列的每一行中，都有一个添加组合的按钮，它应该能够在该单元格中添加额外的组合。我们已经尝试过 appendChild 但不工作。知道如何添加额外的组合框。下面是 addSubRow 的代码和函数。

```
<HTML>
<HEAD>
    <SCRIPT language="javascript">
        function addRow(tableID) {

            var table = document.getElementById(tableID);

            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var colCount = table.rows[0].cells.length;

            for(var i=0; i<colCount; i++) {

                var newcell = row.insertCell(i);

                newcell.innerHTML = table.rows[0].cells[i].innerHTML;
                newcell.innerHTML = newcell.innerHTML +"<br> TEST";
                //alert(newcell.childNodes);
                /*switch(newcell.childNodes[0].type) {
                    case "text":
                            newcell.childNodes[0].value = "";
                            newcell.childNodes[0].id = "input" + rowCount;
                            break;
                    case "checkbox":
                            newcell.childNodes[0].checked = false;
                            newcell.childNodes[0].id = "checkbox" + rowCount;     
                            break;
                    case "select-one":
                        newcell.childNodes[0].selectedIndex = 0;
                        newcell.childNodes[0].id = "select" + rowCount; 
                            break;
                }*
                if(newcell.childNodes[0].type=="button")
                {
                    alert("TEST");
                    newcell.childNodes[0].id=rowCount;
                }*/
            }

            var table = document.getElementById(tableID);
            var rows = table.getElementsByTagName('tr');
            for (var i = 0, row; row = table.rows[i]; i++) {
                  row.id="row"+i;
                  row.name="row"+i;
                  var rowName = "row"+i;
               //iterate through rows
               //rows would be accessed using the "row" variable assigned in the for loop
               for (var j = 0, col; col = row.cells[j]; j++) {
                 //iterate through columns
                 //columns would be accessed using the "col" variable assigned in the for loop
                 col.id="col_"+i+"_"+j;
                   col.name="col_"+i+"_"+j;
                 var cels = rows[i].getElementsByTagName('td')[j];
                 var realKids = 0,count = 0;
                 kids = cels.childNodes.length;
                 while(count < kids){
                        if(cels.childNodes[i].nodeType != 3){
                            realKids++;
                        }
                        count++;
                    }
                    alert("I : "+i+"   "+"J : "+j+"  "+"realKids :"+cels.childElementCount);
                //alert();

               }  
            }
        }

        function addSubRow(tableID,colID) {

            var tdID = document.getElementById(colID);

            var table = document.getElementById(tableID);

            var comboBox1 = table.rows[0].cells[2].childNodes[1];
            comboBox1 = comboBox1;

      tdID.appendChild(comboBox1);
      //tdID.appendChild(comboBox1);
      //tdID.appendChild(comboBox1);
        }

        function deleteRow(tableID) {
            try {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;

            for(var i=0; i<rowCount; i++) {
                var row = table.rows[i];
                var chkbox = row.cells[0].childNodes[0];
                if(null != chkbox && true == chkbox.checked) {
                    if(rowCount <= 1) {
                        alert("Cannot delete all the rows.");
                        break;
                    }
                    table.deleteRow(i);
                    rowCount--;
                    i--;
                }

            }
            var table = document.getElementById(tableID);
            for (var i = 0, row; row = table.rows[i]; i++) {
                  row.id="row"+i;
               //iterate through rows
               //rows would be accessed using the "row" variable assigned in the for loop
               for (var j = 0, col; col = row.cells[j]; j++) {
                 //iterate through columns
                 //columns would be accessed using the "col" variable assigned in the for loop
                 //alert("J : "+j);
                 col.id="col"+i;
                 if(j==0)
                 {

                 }
                 else if(j==1)
                 {

                }
               }  
            }

            }catch(e) {
                alert(e);
            }
        }

    </SCRIPT>
</HEAD>
<BODY>

    <INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />

    <INPUT type="button" value="Delete Row" onclick="deleteRow('dataTable')" />

    <TABLE id="dataTable" width="350px" border="1">
        <TR>
            <TD><INPUT type="checkbox" name="chk"/></TD>
            <TD><INPUT type="text" name="txt"/></TD>
            <TD id="col_0_2">
                <INPUT type="button" value="Add Combo" onclick="addSubRow('dataTable','col_0_2')" />
                <SELECT name="country">
                    <OPTION value="in">India</OPTION>
                    <OPTION value="de">Germany</OPTION>
                    <OPTION value="fr">France</OPTION>
                    <OPTION value="us">United States</OPTION>
                    <OPTION value="ch">Switzerland</OPTION>
                </SELECT>
            </TD>
        </TR>
    </TABLE>

</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:33:54.390

我不确定这是否是您真正想要的，但这是一个`addSubRow`用于附加组合框的工作函数。

我添加了一些评论来解释我做了什么：

```
function addSubRow(tableID,colID) {
    var tdID = document.getElementById(colID);
    var table = document.getElementById(tableID);

    // Create a new combobox element
    var new_comboBox = document.createElement('select');

    // Define / Add new combobox's attributes here
    //new_comboBox.setAttribute('id', 'something');
    // ...
    // ...

    // Add new combobox's options - you may use a 'for' loop...
    var option_1 = document.createElement('option');
    option_1.setAttribute('value', '1');
    var txt_1 = document.createTextNode("OPTION 1");
    option_1.appendChild(txt_1);

    var option_2 = document.createElement('option');
    option_2.setAttribute('value', '2');
    var txt_2 = document.createTextNode("OPTION 2");
    option_2.appendChild(txt_2);

    var option_3 = document.createElement('option');
    option_3.setAttribute('value', '3');
    var txt_3 = document.createTextNode("OPTION 3");
    option_3.appendChild(txt_3);
    // ... 
    // ...

    // Appending options to the new combobox
    new_comboBox.appendChild(option_1);
    new_comboBox.appendChild(option_2);
    new_comboBox.appendChild(option_3);
    // ... 
    // ...

    // Appending the combobox to the TD
    tdID.appendChild(new_comboBox);
} 
```

**PS：**

*   定义组合框的属性及其选项的属性时要注意

*   我认为您不需要`tableID`在函数中使用表的 ID 。您可以`addSubRow`通过删除此参数来简化您的功能？

希望这有助于交配。

# sql-server-2008 - SSAS/SSRS 2008：MDX 显示测量 IF 在日期范围内

> ID：12446243
> 
> 赞同：1
> 
> 时间：2012-09-16T10:38:30.163
> 
> 标签：sql-server-2008, reporting-services, ssas, mdx

基于上一个[问题](https://stackoverflow.com/questions/12423687/ssrs-mdx-display-measure-upto-date-in-fiscal-year-display-all-children-in-fis)，我试图实现以下结果集以在 SSRS 2008 报告中使用。

```
 Utilisation  New Measure
Apr-12    70.7%        70.7%
May-12    74.5%        74.5%
Jun-12    74.6%        74.6%
Jul-12    76.7%        76.7%
Aug-12    79.5%        79.5%
Sep-12    78.5%        (null)
Oct-12    79.0%        (null)
Nov-12    79.6%        (null)
Dec-12    78.9%        (null)
Jan-13    79.7%        (null)
Feb-13    79.0%        (null)
Mar-13    79.4%        (null) 
```

到目前为止，我的 MDX 查询如下：

```
WITH MEMBER [Measures].[New Measure]
    AS IIF(
        ISEMPTY(
            EXISTS(
                    [Date].[Fiscal Year-Month].[Fiscal Month].CurrentMember
                    , {[Date].[Fiscal Year-Month].[Fiscal Month].&[2012/13]&[1]
                      :[Date].[Fiscal Year-Month].[Fiscal Month].&[2012/13]&[5]}
                   )
                )
            , NULL
            , [Measures].[Utilisation]
           )
           , FORMAT_STRING = "0.0%"

SELECT      {
            [Date].[Fiscal Year-Month].[2012/13].children
            } ON ROWS

            , 
            {
            [Measures].[Utilisation]
            , [Measures].[New Measure]
            } ON COLUMNS

FROM        [Elective] 
```

尽管新度量返回与利用率度量相同的结果，并且在我不想要这些值的月份不返回 Null。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T06:33:21.870

你很接近，但语法不太正确。试试这个：

```
WITH MEMBER [Measures].[New Measure]
    AS IIF(
             EXISTS(
                    {[Date].[Fiscal Year-Month].[Fiscal Month].&[2012/13]&[1]
                    :[Date].[Fiscal Year-Month].[Fiscal Month].&[2012/13]&[5]},
                     [Date].[Fiscal Year-Month].[Fiscal Month].CurrentMember
                   ).Count = 1
            , [Measures].[Utilisation]
            , NULL
           )
           , FORMAT_STRING = "0.0%"

SELECT      {
            [Date].[Fiscal Year-Month].[2012/13].children
            } ON ROWS

            , 
            {
            [Measures].[Utilisation]
            , [Measures].[New Measure]
            } ON COLUMNS

FROM        [Elective] 
```

使用 EXISTS 函数，第一个参数是要检查的完整集合 - 您希望为其显示值的日期范围 - 第二个参数是行上的当前成员，因此您需要执行与最初尝试相反的操作。EXISTS 函数返回一个集合，所以可以使用 COUNT 函数查看集合是否有东西（当前成员），当有匹配时应该只有 1。ISEMPTY 不适合您的原因是 MDX 在计算中包含当前度量，当当前日期成员和 Utilization 度量存在值时，表达式解析为 false 并返回 Utilisation。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:09:57.637

您可以使用[排名](http://msdn.microsoft.com/en-us/library/ms144726.aspx)功能：

```
WITH MEMBER [Measures].[New Measure]
    AS IIf(Rank(([Date].[Fiscal Year-Month].[Fiscal Month].CurrentMember)
                , [Date].[Fiscal Year-Month].[Fiscal Month].&[2012/13]&[1]:[Date].[Fiscal Year-Month].[Fiscal Month].&[2012/13]&[5]
                ) < 1
            , NULL
            , [Measures].[Utilisation]
           ) 
```

# algorithm - 最少的切换以创建交替链

> ID：12446244
> 
> 赞同：2
> 
> 时间：2012-09-16T10:38:54.990
> 
> 标签：algorithm, recursion, dynamic-programming

我正在尝试在 SPOJ 上解决这个问题：[http ://www.spoj.pl/problems/EDIT/](http://www.spoj.pl/problems/EDIT/)

我试图得到一个体面的算法递归描述，但我失败了，因为我的想法一直在转圈！你们能帮我解决这个问题吗？我将尝试描述我试图解决这个问题的方法。

基本上我想解决一个大小为 ji 的问题，其中 i 是起始索引，j 是结束索引。现在，应该有两种情况。如果 ji 是偶数，那么开头和结尾的字母必须是相同的大小写，当 ji 是奇数时，它们必须是相反的大小写。我也想减少较小规模的问题（ji-1 或 ji-2），但我觉得如果我知道较小问题的解决方案，那么构建一个更大问题的解决方案也应该考虑到较小问题的开始和结束字母大小写。这正是我感到困惑的地方。你们能把我的想法放在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T13:40:46.530

我认为递归不是解决这个问题的最佳方法。如果我们采取不同的方法，它可以很快解决！

让我们考虑二进制字符串。假设大写字符为**1**，小写字符为**0**。例如

```
AaAaB -> 10101
ABaa  -> 1100
a     -> 0 
```

“正确”的交替链是*10101010* .. 或*010101010* ..

我们将一个字符串更改为另一个字符串所需的最小替换次数称为字符串之间的**[汉明距离](http://en.wikipedia.org/wiki/Hamming_distance)**。我们要找到的是输入二进制字符串与两个相同长度的交替链之一之间的最小汉明距离。

这并不难：我们对每个字符串进行异或运算，然后计算 1 的数量。（[链接](http://en.wikipedia.org/wiki/Hamming_distance#Algorithm_example)）。例如，让我们考虑以下字符串：*ABaa*。

*   我们将其转换为二进制：

    ABaa -> 1100

*   我们生成了仅有的两个长度为 4 的交替链：

    1010

    0101

*   我们将它们与输入进行异或：

    1100 异或 1010 = 0101

    1100 异或 0101 = 1010

*   我们计算结果中的 1 并取最小值。在这种情况下，它是**2**。

我用 Java 编写了这个过程，做了一些小的优化（缓冲 I/O，不需要生成交替链），它被接受了：（0.60 秒）。

![在此处输入图像描述](../Images/cf7dcebe7cb40bb79ea2cf3ca50098be.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T10:51:48.137

给定任何长度为 n 的字符串 s，只有两个可能的“交替链”。这两个变体可以通过设置第一个字母状态来顺序定义（如果第一个是上，那么第二个是下，第三个是上......）。

一个简单的线性算法是对第一个字母做两个简单的假设：

1.  第一个字母是大写
2.  第一个字母是小写

对于每个假设，运行一个简单的编辑距离算法，你就完成了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T15:17:53.823

您可以递归地执行此操作，但是您需要在函数之间传递和返回大量状态信息，当这个问题可以通过一个简单的循环来解决时，我认为这是不值得的。

正如其他人所说，有两种可能的“期望结果”字符串：一种以大写字母开头（我们称之为 result_U），另一种以小写字母开头（result_L）。我们想要 EditDistance(input, result_U) 和 EditDistance(input, result_L) 中较小的一个。

还要注意，要计算 EditDistance(input, result_U)，我们不需要生成 result_U，我们只需要一次扫描输入 1 个字符，每个不是预期大小写的字符都需要 1 次编辑才能使其成为正确的情况，即在编辑距离上加 1。EditDistance（输入，result_L）同上。

此外，我们可以组合这两个循环，以便我们只扫描一次输入。事实上，这可以在读取每个输入字符串时完成。一种天真的方法如下所示：

伪代码：

```
EditDistance_U = 0
EditDistance_L = 0

Read a character
To arrive at result_U, does this character need editing?
  Yes => EditDistance_U += 1
  No  => Do nothing
To arrive at result_L, does this character need editing?
  Yes => EditDistance_L += 1
  No  => Do nothing
Loop until end of string
EditDistance = min(EditDistance_U, EditDistance_L) 
```

也可以对上述内容进行明显的优化，但我会把它留给你。

提示 1：循环中真的需要 2 个条件吗？它们是如何相互关联的？

提示 2：什么是 EditDistance_U + EditDistance_L？

# knockout.js - 在淘汰赛中绑定到对象时出错

> ID：12446245
> 
> 赞同：0
> 
> 时间：2012-09-16T10:38:55.323
> 
> 标签：knockout.js, javascript

我正在努力理解 Knockout。在开发过程中，我遇到了一个名为 total 的场景中的计算变量问题。尽管从 UI 绑定到总变量，但它似乎没有在我的 UI 界面中更新。它还具有隐藏绑定总控件后面的其他控件的效果，在这种情况下，我的选择下拉菜单被隐藏了。请问我是不是做错了什么。这是我的 Javascript

```
<head><title>Hello Knockout</title></head>
<body>

    <p>
        <input type="text" data-bind="value : Listprice , valueUpdate : 'afterkeydown'" />
        <span data-bind="text : formatCurrency(Listprice)"></span>  
     <span data-bind= "text : total"/> 

     <select data-bind="options : color  , optionsText : 'name' , value:selectedColor,  optionsCaption : 'Choose item..'" />
        <span data-bind="text : selectedColor" /> 
```

```
 <script type="text/javascript" src="Scripts/knockout-2.1.0.debug.js"></script>
    <script type="text/javascript" src="Scripts/jquery-1.8.1.min.js"></script>
    <script type="text/javascript" >

        var data = {
            "Id": 1001,
            "SalePrice": 1649.01,
            "ListPrice": 2199.00,
            "ShortDesc": "Taylor 314CE",
            "Description": "Taylor 314-CE Left-Handed Grand Auditorium Acoustic-Electric Guitar"

        };
        $(function () {
            var Colored = function (id, name) {
                this.id = ko.observable(id),
            this.name = ko.observable(name)
            };

            var vm = {
                id: ko.observable(data.Id),
                saleprice: ko.observable(data.SalePrice),
                Listprice: ko.observable(data.ListPrice),
                ShortDesc: ko.observable(data.Description),
                color: ko.observableArray([
                new Colored(1, "Black"),
                new Colored(2, "Red"),
                new Colored(3, "Blue")

                ]),
                selectedColor: ko.observable(),
                quantity: ko.observable(2)

            };

            vm.total = ko.computed(function () {
                return this.Listprice,10 ?  this.ListPrice: 0;
            }, vm);

            vm.formatCurrency = function (value) {
                return "$" + value();
            };

            ko.applyBindings(vm);

        });
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T12:06:06.270

确保您始终像这样格式化您的跨度：

```
<span data-bind="text: total"></span> 
```

而不是

```
<span data-bind= "text : total"/> 
```

编辑：

Also`Listprice`是一个 observable，它是一个函数。如果要获取当前值，请确保使用 () 调用它：

```
return this.Listprice() ?  this.Listprice(): 0; 
```

这是一个你可以玩的小提琴：http: [//jsfiddle.net/jearles/vDmP2/](http://jsfiddle.net/jearles/vDmP2/)

# iphone - 制作视频缩略图时 CMTimeMake 崩溃

> ID：12446246
> 
> 赞同：0
> 
> 时间：2012-09-16T10:38:56.867
> 
> 标签：iphone, objective-c, ios

我正在尝试制作视频缩略图，并且正在关注 SO 上的另一个教程。我确定我已经完成了它让我做的所有事情，但它仍然无法正常工作......

这是我得到的错误：

```
Undefined symbols for architecture armv7:
"_CMTimeMake", referenced from:
  -[MainMenuController imagePickerController:didFinishPickingMediaWithInfo:] in MainMenuController.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

编码：

```
AVURLAsset* asset = [AVURLAsset URLAssetWithURL:[NSURL URLWithString:movieUrl] options:nil];
    AVAssetImageGenerator* imageGenerator = [AVAssetImageGenerator assetImageGeneratorWithAsset:asset];
    pickedImage = [UIImage imageWithCGImage:[imageGenerator copyCGImageAtTime:CMTimeMake(1, 1) actualTime:nil error:nil]]; 
```

你们中有人知道可能出了什么问题吗？

我已经包含了 AVFoundation 框架，仅供参考...

在此先感谢，汤姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T10:48:49.473

`CMTimeMake`是在 CoreMedia 框架中定义的，所以你可能必须添加

```
#import <CoreMedia/CoreMedia.h> 
```

到您的源代码。

# javascript - 让谷歌美化与动态视图博客模板一起工作

> ID：12446247
> 
> 赞同：3
> 
> 时间：2012-09-16T10:38:57.310
> 
> 标签：javascript, syntax-highlighting, blogs, blogger, google-code-prettify

我已经尝试过[这个](https://stackoverflow.com/a/1909814/560302)和[这个](https://stackoverflow.com/a/2696361/560302)，这两个以前的解决方案都是堆栈溢出，但是这两个解决方案都不适用于 Blogger 的动态视图模板。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T13:12:14.460

写了一篇关于博客的**简单语法高亮的博文**

[http://blog.jpilora.com/2012/06/easy-syntax-highlighting-for-blogs.html](http://blog.jpillora.com/2012/06/easy-syntax-highlighting-for-blogs.html)

目前在博客上运行，虽然我没有在所有浏览器上测试它，但我看不出它为什么不起作用。让我知道事情的后续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-20T11:54:10.090

请参考下面的stackoverflow答案，将Google代码修饰符添加到博主..

添加 google prettifier synatx 荧光笔非常容易..

[https://stackoverflow.com/a/27579776](https://stackoverflow.com/a/27579776)

另请参阅以下文档。

[如何使用 Google Prettify 为 Blogger 添加语法荧光笔](http://blog.smarttutorials.net/2014/12/syntax-highlighter-blogger-using-google.html)

在标签之前添加以下代码...

```
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script> 
```

在之间添加您的代码

```
<pre class="prettyprint">...</pre> 
```

# c# - 立即更新标签控件

> ID：12446250
> 
> 赞同：-3
> 
> 时间：2012-09-16T10:39:33.343
> 
> 标签：c#

我的程序正在通过串口接收数据，我想通过标签控件显示它（数据）。接收数据正在连续更新。

如何立即刷新标签的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:57:13.067

这是你必须做的：

首先：在新线程中调用你的函数：

```
Thread t = new Thread(new ThreadStart(yourfunction));
t.Start(); 
```

第二：您必须从表单中调用标签：

```
void yourfunction()
{
    while (..) // I think you have a loop in your function
    {
        if (this.label1.InvokeRequired)
        {
            this.Invoke(
            new changeLabelDelegateMethod(changeLabelText), label1, "your text");
        }
        else
            label1.Text = "your text";
    }
}
delegate void changeLabelDelegateMethod(Label l, string text);
void changeLabelText(Label l, string text)
{
        l.Text = text;
} 
```

# cakephp - 所有错误的 Cakephp 自定义错误页面

> ID：12446255
> 
> 赞同：0
> 
> 时间：2012-09-16T10:40:45.637
> 
> 标签：cakephp, error-handling, cakephp-2.1, custom-error-pages

我创建了这个：

```
<?php

class AppExceptionHandler
{
    public static function handle($error)
    {       
        $this->controller->redirect('www.google.com');
        //echo 'Oh noes! ' . $error->getMessage();
        // ...
    }
    // ...
}

?> 
```

回声会输出正常，但我如何使用布局或视图？我不断收到这个错误：

```
Fatal error: Using $this when not in object context in ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:22:32.503

尝试在 AppController.php 中添加以下方法

```
public function appError($error) {
    //Do whatever you want
    debug($error);
} 
```

# jquery - JQuery data selector returning value + undefined

> ID：12446256
> 
> 赞同：0
> 
> 时间：2012-09-16T10:40:58.753
> 
> 标签：jquery, jquery-selectors, undefined

I have a piece of jquery which drags the value from a page. One of the elements is a data attribute that is dynamically created dependent on form input. It returns the value but sticks 'undefined' infront of it on the first loop.

Relevent Code is as follows...

```
var get_files_split=get_files.split("*^*");
        var files_count=get_files_split.length-1;
        if(files_count!=0)
        {
            $('.uploaded_files').html("");
            var app_files="";
            for(var y=0;y<files_count;y++)
            {
                var files_split=get_files_split[y].split("|");
                app_files+="<div class='upfile_holder'>";
                app_files+="<div class='f_h'><span class='fil1'  data-this_file='"+files_split[0]+"'>"+files_split[1]+"</span> (<span class='fil5'>"+files_split[6]+"</span>)</div>";
                app_files+="<div class='f_h fil2'>"+files_split[2]+"</div>";
                if(files_split[4]!="")
                {
                app_files+="<div class='f_h'>&pound;<span class='fil3'>"+files_split[4]+"</span> <span class='fil4'>"+files_split[5]+"</span></div>";
                }
                if(files_split[3]!="")
                {
                    app_files+="<div class='f_notes'>";
                    app_files+="<p class='fil6'>"+files_split[3]+"</p>";
                    app_files+="</div>";
                }
                app_files+="</div>";

            }
            $(app_files).appendTo('.uploaded_files');
        } 
```

This places the data on the page

JQuery that reselects the data is as follows...

```
var files_inform;
if($('.upfile_holder').length)
{
    $('.upfile_holder').each(function(){
            var file_ids=$('.fil1', this).data('this_file');
            var file_name=$('.fil1', this).text();
            var file_type=$('.fil5', this).text();
            var file_priority=$('.fil2', this).text();
            var file_price=$('.fil3', this).text();
            var file_tender=$('.fil4', this).text();
            var file_notes=$('.fil6', this).text();
            files_inform+=file_ids+"|"+file_name+"|"+file_type+"|"+file_priority+"|"+file_price+"|"+file_tender+"|"+file_notes+"*^*";
            alert(files_inform);
        });
} 
```

The reason for reselecting the data is that the appended part is contained within a different function to when it is extracted.

Can't figure out why it is coming up as indefined.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:57:53.487

The `files_inform` variable is equal to `undefined` when the loop starts, and then you start appending string values to it. `undefined + "SomeString"` is `"undefinedSomeString"`. Initialise `files_inform` to an empty string:

```
var files_inform = ''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T11:00:13.783

I have found the problem:-

```
var files_inform; 
```

Should be -

```
var files_inform=""; 
```

Just by declaring the variable seems to mean this first state is undefined whereas declaring it as an empty means that it contains nothing.

# java - 使用自定义身份验证过滤器时使用 getRemoteUser() 访问用户名

> ID：12446257
> 
> 赞同：2
> 
> 时间：2012-09-16T10:41:29.153
> 
> 标签：java, servlets, servlet-filters

`HttpServletRequest.getRemoteUser()`简短版本：当我使用自定义身份验证过滤器时，如何返回用户名？

长版：

我正在修改当前使用声明性安全性（web.xml 和 tomcat-users.xml）的 Tomcat 应用程序，以使用自定义（由我编写）身份验证过滤器（派生自 javax.servlet.Filter）。有很多关于如何做到这一点的信息，而且看起来非常简单。

但是，现有应用程序调用`HttpServletRequest.getRemoteUser()`，并且我假设除非我在过滤器中设置此属性，否则它将返回 null。我找不到有关如何`getRemoteUser()`在过滤器中填充属性的任何信息（没有`setRemoteUser()`）。我在[那里发现了一篇帖子](http://struts.1045723.n5.nabble.com/how-to-set-remoteuser-td3483472.html)，建议将请求对象包装在过滤器中。如果必须，我会这样做，但我希望有一种侵入性较小的方法来实现这一点。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T11:02:16.623

是的，修改`HttpServletRequest`or的唯一方法`HttpServletResponse`是装饰它并通过覆盖它们为感兴趣的方法提供您自己的实现。这是带有身份验证过滤器的标准模式，这就是`HttpServletRequestWrapper`（响应对应物是`HttpServletResponseWrapper`）的目的。我们这样做是为了包装一个kerberized请求，如下

```
public class KerbHttpServletRequest extends HttpServletRequestWrapper
{
    private Principal myPrincipal;
    private String myAuthType;

    public KerbHttpServletRequest(HttpServletRequest aRequest,
        Principal aPrincipal,
        String aAuthType)
    {
        super(aRequest);
        myPrincipal = aPrincipal;
        myAuthType = aAuthType;
    }

    /**
     * This method returns the Remote User name as user\@domain.com.
     */
    @Override
    public String getRemoteUser()
    {
        return myPrincipal.getName();
    }

    @Override
    public String getAuthType()
    {
        return myAuthType;
    }

    @Override
    public Principal getUserPrincipal()
    {
        return myPrincipal;
    }
} 
```

# java - tomcat中wtpwebapps和webapps文件夹的区别

> ID：12446263
> 
> 赞同：26
> 
> 时间：2012-09-16T10:43:27.570
> 
> 标签：java, eclipse, tomcat

当我从 Eclipse 运行我的动态 Web 项目时，它会被部署到 wtpwebapps。但是我想将war文件部署到tomcat，所以当我在这里检查时，出现了 [How to deploy a war file in Tomcat 7](https://stackoverflow.com/questions/5109112/how-to-deploy-war-in-tomcat-7)

它说我必须部署到 tomcat 中的 webapps 文件夹。

谁能解释一下tomcat中wtpwebapps文件夹和webapps文件夹之间的详细信息，以及我是否可以将war文件部署到wtwebpapps文件夹而不是webapps文件夹。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-16T10:47:41.180

wtpwebapps 是当您在 Eclipse 中的 Tomcat 上运行动态 Web 项目时创建的特定于 Eclipse 的文件夹。

Webapps 目录位于 Tomcat 主目录中，您可以在其中手动复制 WAR 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-06T09:28:35.913

最近，我在 Eclipse 中调试时遇到了 webapp 奇怪的行为。我注意到它是双重部署的。

我的设置是：

*   具有与文档库不同的上下文路径的 web 模块；
*   在 server.xml 中启用自动部署；
*   并将 deploy 设置为 webapps 目录。

在检查 tomcat-manager 时，我注意到这个 webapp 被部署了一次，它的上下文路径名和一次文档基名。

以下是文档的说明（[所有学分归 octopus](https://octopus.com/blog/defining-tomcat-context-paths)和[Tomcat 文档](https://tomcat.apache.org/tomcat-9.0-doc/config/context.html)所有）：

> 如果要使用与基本文件名无关的上下文路径部署 WAR 文件或目录，则必须使用以下选项之一来防止重复部署：

> 禁用 autoDeploy 和 deployOnStartup 并在 server.xml 中定义所有上下文 在主机的 appBase 之外找到 WAR 和/或目录，并使用带有 docBase 属性的 context.xml 文件来定义它。

而且，我相信这是在 Eclipse 中使用 wtpwebapps 而不是 webapps 的 Tomcat 的主要原因。

# java - C3P0 配置！在哪里以及如何？

> ID：12446266
> 
> 赞同：11
> 
> 时间：2012-09-16T10:44:31.090
> 
> 标签：java, hibernate, jpa-2.0, connection-pooling, c3p0

我们正在使用 JPA2.0 和 Hibernate3.0 实现一个 Web App。连接池配置在 META-INF 文件夹中的 persistence.xml 中设置。

* * *

持久性.xml：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="2.0">
    <persistence-unit name="MyPU" transaction-type="RESOURCE_LOCAL">
        <!-- Entity Classes-->
        <properties>
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect"/>
            <property name="hibernate.show_sql" value="true"/>
            <property name="bytecode.provider"   value="org.hibernate.bytecode.javassist.BytecodeProviderImpl"/>
            <property name="hibernate.connection.username" value="{username}"/>
            <property name="hibernate.connection.password" value="{password}"/>
            <property name="hibernate.hbm2ddl.auto" value="update"/>
            <property name="hibernate.format_sql" value="true"/>
            <property name="hibernate.connection.url" value="{jdbc url}"/>

            <property name="hibernate.c3p0.min_size" value="1"/>
            <property name="hibernate.c3p0.timeout" value="1000"/>
            <property name="hibernate.c3p0.acquire_increment" value="1"/>
            <property name="hibernate.c3p0.idle_test_periods" value="600"/>
            <property name="hibernate.c3p0.testConnectionOnCheckin" value="true"/>
            <property name="hibernate.c3p0.preferredTestQuery" value="SELECT 1;"/>
       </properties>
    </persistence-unit>
</persistence> 
```

* * *

我们的连接池配置有问题。配置好像没有效果，8小时后连接断开。我们是否需要另一个配置文件，如 hibernate.cfg.xml 或 hibernate.properties？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:44:31.673

I had this same problem with the proprieties that I put in persistence.xml didn't affect c3p0.

Looking into [http://www.mchange.com/projects/c3p0/index.html#configuration_files](http://www.mchange.com/projects/c3p0/index.html#configuration_files) I tried to put an xml file named `c3p0-config.xml` and put it in `WEB-INF/classes` and it work perfectly.

Here is an example of a `c3p0-config.xml` file:

```
<c3p0-config>
  <default-config>
    <property name="automaticTestTable">con_test</property>
    <property name="checkoutTimeout">30000</property>
    <property name="idleConnectionTestPeriod">30</property>
    <property name="initialPoolSize">10</property>
    <property name="maxIdleTime">30</property>
    <property name="maxPoolSize">100</property>
    <property name="minPoolSize">10</property>
    <property name="maxStatements">200</property>

    <user-overrides user="test-user">
      <property name="maxPoolSize">10</property>
      <property name="minPoolSize">1</property>
      <property name="maxStatements">0</property>
    </user-overrides>

  </default-config>
</c3p0-config> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T13:23:45.290

好问题，坏标题。:) 我想我在你的转贴中回答了这个问题：[c3p0 的最佳配置](https://stackoverflow.com/questions/12507021/best-configuration-of-c3p0/12531444#12531444)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-09T14:40:35.597

我有同样的问题，我的问题是我的 Web 应用程序容器（Tomcat）正在管理我的数据库连接。我不得不将 c3p0 配置从我的 persistence.xml 文件移动到 Tomcat 的 context.xml。如果这是您的问题，Domenic D 提供的链接是一个很好的起点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-14T11:12:51.467

你的设置有错别字，应该`idle_test_period`不是`idle_test_periods`。

有关设置的信息，请参阅此帖子：[c3p0.idle_test_period 的使用。](https://stackoverflow.com/questions/10175957/the-use-of-c3p0-idle-test-period#10176231)

# c++ - 在 Windows 7 上使用 Windows Media Foundation 将原始音频文件转换为 AAC

> ID：12446269
> 
> 赞同：6
> 
> 时间：2012-09-16T10:44:50.697
> 
> 标签：c++, audio, encoding, aac, ms-media-foundation

感谢您花时间阅读我的问题。

我正在使用 Qt 和 windows API 开发一个 C++ 应用程序。

我正在以原始格式录制 10 秒的小音频文件中的麦克风输出，我想将它们转换为 aac 格式。

我尝试阅读尽可能多的内容，并认为从 Windows Media Foundation 转码 API 开始会是一个好主意。

问题是，我似乎无法在“CreateObjectFromUrl”函数中使用 .raw 或 .pcm 文件，所以我现在几乎被困在这里。它一直在失败。hr 返回码等于 3222091460。我尝试将 .mp3 文件传递​​给函数，当然它可以工作，因此不涉及 url-human-failure。

```
MF_OBJECT_TYPE ObjectType = MF_OBJECT_INVALID;

IMFSourceResolver* pSourceResolver = NULL;
IUnknown* pUnkSource = NULL;

// Create the source resolver.
hr = MFCreateSourceResolver(&pSourceResolver);
if (FAILED(hr))
{
    qDebug() << "Failed !";
}

// Use the source resolver to create the media source.

 hr = pSourceResolver->CreateObjectFromURL(
        sURL,                       // URL of the source.
        MF_RESOLUTION_MEDIASOURCE,  // Create a source object.
        NULL,                       // Optional property store.
        &ObjectType,                // Receives the created object type.
        &pUnkSource                 // Receives a pointer to the media source.
        ); 
```

MFCreateSourceResolver 工作正常，但 CreateObjectFromURL 不成功:(

所以我有两个问题要问你们：

1.  是否可以使用 Windows Media Foundation 将原始音频文件编码为 aac 文件？
2.  如果是，我应该阅读什么来完成我想要的？

我想指出我不能只使用 ffmpeg 或 libav，因为我买不起我的软件的任何许可证，并且不希望它处于 GPL 许可证下。但是，如果有 Windows 媒体基础的替代方案可以将原始音频文件编码为 aac，我会很高兴听到它们。

最后，对不起我的英语不好，这显然不是我的母语，如果我让你流血了，我很抱歉。（如果我让你发笑，我会很高兴）

祝你今天过得愉快

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T11:02:00.043

> hr 返回码等于 3222091460

那些是`HRESULT`代码。使用[这个“ShowHresult”工具](http://alax.info/blog/1383)可以方便地为您解码。该代码表示`0xC00D36C4` `MF_E_UNSUPPORTED_BYTESTREAM_TYPE`​​“不支持给定 URL 的字节流类型”。

问题基本上是不支持这些原始文件，.WAV 是原始音频的良好来源 - 该文件包含格式描述符和有效负载。

您显然可以自己从原始音频文件中读取数据，并通过其接口使用 Media Foundation 的[AAC 编码器压缩成 AAC。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd742785%28v=vs.85%29.aspx)`IMFTransform`这相当容易，并且您在输出上有 AAC 数据，例如写入 raw `.AAC`。

Alternate options to Media Foundation is DirectShow (there are suitable codecs, though I thought it might be not so easy to start), [`libfaac`](http://en.wikipedia.org/wiki/FAAC), FFmpeg's `libavcodec` (available under LGPL, not GPL).

# android - 将xml文件发送到android中的本地服务器

> ID：12446270
> 
> 赞同：1
> 
> 时间：2012-09-16T10:45:15.213
> 
> 标签：android

我想在使用 telnet 更改位置时将 xml 文件中的两个变量（lat 和 longi）发送到本地服务器，调用 d 中的客户端代码。当我更改位置时，它显示“不幸的是，您的应用程序已停止”。我正在使用 post 方法。我是android中客户端服务器代码的新手。请任何人帮助我....

这是我的代码

```
String responseBody;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    /* Use the LocationManager class to obtain GPS locations */
    LocationManager mlocManager =
    (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    LocationListener mlocListener = new MyLocationListener();
    mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

/* Class My Location Listener */
public class MyLocationListener implements LocationListener
{
    double lat, longi;

public void onLocationChanged(Location loc)    {
    lat = loc.getLatitude();
    longi = loc.getLongitude();
    String Text = "My current location is: "+"Latitude = "+lat+"Longitude = "+longi;
    Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_LONG).show();

    // problem starts here
     try 
    { 
    String s = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" 
                   +"<lat>" + lat +"</name>\n" 
                   +"<long>" + longi + "</number>\n"; 
    String url = "http://localhost:8080/android/test.php?data="+s; 
    HttpClient httpclient = new DefaultHttpClient(); 
     HttpPost httpPost = new HttpPost(URI.create(url)); 
     httpPost.setHeader("Content-type","text/xml; charset=ISO-8859-1"); 
    ResponseHandler<String> responseHandler = new BasicResponseHandler(); 
    responseBody = httpclient.execute(httpPost, responseHandler); 
    } 

    catch(IOException e) 
    { 
    e.printStackTrace(); 
    } 

}

public void onProviderDisabled(String provider)    {
    Toast.makeText( getApplicationContext(), "Gps Disabled", Toast.LENGTH_SHORT ).show();
}

public void onProviderEnabled(String provider)    {
    Toast.makeText( getApplicationContext(), "Gps Enabled", Toast.LENGTH_SHORT).show();
}

public void onStatusChanged(String provider, int status, Bundle extras)
{

}

}/* End of Class MyLocationListener */ 
```

# scala - 了解 SBT、Scala、SBT-Idea 和 Play 框架如何协同工作

> ID：12446272
> 
> 赞同：5
> 
> 时间：2012-09-16T10:45:26.450
> 
> 标签：scala, playframework, sbt, sbt-idea

我是新手，使用 SBT 构建了一些简单的 Scala 应用程序/教程。我继续使用 Play 框架并使用`g8 typesafehub/play-scala`. 我做了一些测试以确保它正确生成。这检查得很好，我添加了 sbt-idea 插件`https://github.com/mpeltonen/sbt-idea`，来生成一个 IntelliJ 项目。这就是地狱爆发的地方。

我必须找到正确的 Scala、SBT、Play 框架和 sbt-idea 版本组合才能完美编译。否则，编译会因为正确的错误或让我猜测的警告而中断。到目前为止，我拥有的最好的“组合”是

```
Scala 2.9.2 
Play 2.0.1 
SBT 0.11.2 
sbt-idea 1.1.0 
```

带有以下警告

```
 [warn]  [NOT FOUND  ] maven-plugins#maven-cobertura-plugin;1.3!maven-cobertura-plugin.plugin (282ms)
[warn] ==== Typesafe Releases Repository: tried
[warn]   http://repo.typesafe.com/typesafe/releases/maven-plugins/maven-cobertura-plugin/1.3/maven-cobertura-plugin-1.3.plugin
[warn]  [NOT FOUND  ] maven-plugins#maven-findbugs-plugin;1.3.1!maven-findbugs-plugin.plugin (284ms)
[warn] ==== Typesafe Releases Repository: tried
[warn]   http://repo.typesafe.com/typesafe/releases/maven-plugins/maven-findbugs-plugin/1.3.1/maven-findbugs-plugin-1.3.1.plugin
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::              FAILED DOWNLOADS            ::
[warn]  :: ^ see resolution messages for details  ^ ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: maven-plugins#maven-cobertura-plugin;1.3!maven-cobertura-plugin.plugin
[warn]  :: maven-plugins#maven-findbugs-plugin;1.3.1!maven-findbugs-plugin.plugin
[warn]  :::::::::::::::::::::::::::::::::::::::::::::: 
```

如果我使用最新版本，SBT 0.12 和 Play 2.0.3，我会得到一个编译错误。任何想法或解释如何让所有这些工作很好地结合在一起？现在对我来说是一个版本混乱。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T11:13:20.767

我认为你应该从原始网站开始玩：[http](http://www.playframework.org/) ://www.playframework.org/你会发现有最新的稳定版本可供下载（目前是 2.0.3）。

它包含正确的依赖项，其安装就像解压缩 ZIP 并导出路径一样简单，如：[安装](http://www.playframework.org/documentation/2.0.3/Installing)文档中所述。

我可以向您保证，这种方法是最简单和最可靠的方法，它按预期工作，创建适当的 IntelliJ 项目等。如果我没记错 IntelliJ 支持在 2.0.1 之后修复，其他索引也有一些改进，所以有如果不是真的需要，与 2.0.1 战斗是没有意义的。

# shell - Nginx - 密码保护目录

> ID：12446273
> 
> 赞同：2
> 
> 时间：2012-09-16T10:45:50.363
> 
> 标签：shell, nginx, passwords

我想用密码保护我的整个网站。我正在运行 Debian Squeeze。假设我希望我的用户名是“Jane”，密码是“V3RySEcRe7”。

在我的 app-nginx.conf 中：

`auth_basic "Restricted"; auth_basic_user_file /etc/nginx/htpasswd;`

在我的 shell 脚本中，我有这个：

`printf "Jane:$(openssl passwd -1 V3RySEcRe7)\n" >> /etc/nginx/htpasswd`

当我访问我的站点时，它受密码保护，但我使用的凭据不起作用。我在哪里错了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T12:39:24.953

我相信你现在已经解决了这个问题，但我想我会为其他人添加这个：

[Nginx 文档](http://nginx.org/en/docs/http/ngx_http_auth_basic_module.html)对此有点神秘，但确实提到应该使用“基于 MD5 的密码算法 (apr1) 的 Apache 变体”来生成密码哈希。所以使用**-apr1**标志而不是 -1 将起作用：

```
printf "Jane:$(openssl passwd -apr1 V3RySEcRe7)\n" >> /etc/nginx/htpasswd 
```

# javascript - JavaScript中相同的输入，不同的输出？

> ID：12446277
> 
> 赞同：1
> 
> 时间：2012-09-16T10:46:12.690
> 
> 标签：javascript, variables

我现在正在重写我的一个脚本，遇到了一个我无法弄清楚的问题。`command`是一个输入变量，现在我已经运行了这个测试（两个正则表达式是相同的）：

```
var parts = command.match(/([^\s"]+(?=\s*|$))|(".+?")/g);
console.log(command === "view -10 10 -10 10");
console.log(parts);
console.log(String("view -10 10 -10 10").match(/([^\s"]+(?=\s*|$))|(".+?")/g)); 
```

控制台现在说

```
true
[]
["view", "-10", "10", "-10", "10"] 
```

这完全让我感到困惑。为什么`command`即使在使用时它也等于我的测试字符串时也不以相同的方式分开`===`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:55:11.190

*来自 OP*

这是整个问题的解决方案：程序的基本结构如下

```
while (<condition>) {
    var command = getNextCommand();

    var parts = command.match(/([^\s"]+(?=\s*|$))|(".+?")/g);
    processParts(parts);
} 
```

其中`processParts()`操纵了论点：

```
function processParts(parts) {
    var foo = parts.shift();
    doSomethingElse(foo);
} 
```

这导致`parts`主程序缩小，并且在我的代码中`processParts`实际上`shift`编辑了所有元素，导致`console.log(parts)`写入一个空数组，因为它被延迟记录（参见dystroy的评论）。

最重要的是，我的`processParts()`函数有一个我没有注意到的错误，这就是我指责空的原因`parts`。在修复了这个错误之后，上面的代码再次工作，因为我不再需要`parts`它并且可以忍受它已经缩小了。不过，总的来说，您可能需要注意这一点…… JavaScript 做了一些奇怪的事情。

# jquery - 使用jQuery从右向左滑动div

> ID：12446281
> 
> 赞同：-1
> 
> 时间：2012-09-16T10:46:58.100
> 
> 标签：jquery, html, css

我正在制作一个有多个页面的网站。我希望它们不是不同的网页，而是同一页面上的不同 div。然后我有两个左右按钮，当用户单击特定 div 时，它应该根据箭头向左或向右滑动。如何使用 jQuery、HTML、CSS 做到这一点？

我的分区：

```
<div id="main-page">    
</div>
<div id="about-us">
</div>
<div id="contact-us">
</div> 
```

Div 有一个特定的背景图像，它们的大小是全屏的。

我的脚本：

```
$("#main-page").click(function() {
    $("#main-page").hide("slide", {direction: "left"}, 1000);
    $("#about-us").show("slide", {direction: "right"}, 1000);
}); 
```

正如我所说，我不想那样做。我想要箭头来检查哪个 div 可以向左或向右滑动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T12:47:57.637

**HTML**

```
<div id="wrapper">
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
</div>
<input type="button" class="next" value="Next">
<input type="button" class="prev" value="Prev"> 
```

**CSS**

```
#wrapper {
    white-space: nowrap;
    width: 1500px
}

.box {
    width: 200px;
    height: 200px;
    border: thin solid red;
    margin: 0 10px 0 0;
    display: inline-block
}

​.prev,
.next { position: fixed; top: 50% }

.prev { left: 0 }
.next { right: 0 } 
```

**JS**

```
$(function() {
    // We create an array and populate
    // it with all .box left offsets
    var boxLefts = [];
    $('.box').each(function(i, el) {
        boxLefts.push(this.offsetLeft);
    });

    // Now we attach an on click event handler
    // to our prev/next buttons
    $(".prev, .next").click(function(e) {
        var dir = false,
            targetLeft = -1;

        // to get the current direction
        // we use the className of the current clicked button
        var target = e.target.className;

        // we set the earlier defined direction variable
        // based on the clicked button
        if (target == 'next') {
            dir = 1;
        } else {
            dir = -1;
        }

        // when the next-button is clicked
        // we loop through the .box-offsets array
        if (dir) {
            // prevent the default onclick behaviour
            e.preventDefault();

            // get the current scroll-offset
            winLeft = window.scrollX;

            $.each(boxLefts, function(i, v) {
                // we check that we are not at the end or beginning
                // of the viewport. If we are not
                // we set targetLeft to the current/matching offsets-array item.
                if ((dir == 1 && winLeft < v && targetLeft < 0) || (dir == -1 && winLeft > v)) {
                    targetLeft = v;
                }
            });

            // if truthy we animate the scrolling to the next/previous box-offset
            if (!targetLeft) {
                $('html:not(:animated), body:not(:animated)').stop().animate({
                    scrollLeft: targetLeft
                }, 1000);
            }
        }

        // prevent the default onclick behaviour
        return false;
    });
}); 
```

[演示](http://jsfiddle.net/ARTsinn/s2TJQ/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T11:46:01.237

它可能是这样的：

```
<div class='container'>
    <div class='all-pages'>
        <div class='page' id='page-1'>PAGE 1</div>
        <div class='page' id='page-2'>PAGE 2</div>
        <div class='page' id='page-3'>PAGE 3</div>
        <div class='page' id='page-4'>PAGE 4</div>
    </div>
</div>

.container {
   width: 960px;
   overflow: hidden;
   position: relative;
}

.all-pages {
   float:left;
   width: 10000px;
   position: relative;
   left: 0;
   top:0;
}

.page {
   float: left;
   width: 960px;
} 
```

本质上，它与 jCarousel 的原理相同，只是您将元素的定位和宽度基于更大的比例，因此每个项目都填充页面：

*   `container`- 可视区域

*   `all-pages`- 实际上是所有页面的“卷轴”

接下来，您需要向页面（或菜单？）添加左右按钮来滚动显示。这些必须绝对定位，以便它保持在容器视图中。

当您为左右按钮添加功能时，您只需使用 jQuery 动画样式函数来更改所有页面 div 内的 left 值，这将创建一个平滑的过渡。

# php - shell_exec() 在 WordPress 的管理面板中不起作用

> ID：12446284
> 
> 赞同：1
> 
> 时间：2012-09-16T10:47:29.993
> 
> 标签：php, xampp, background-process, wordpress

我正在使用`shell_exec()`在我的 WordPress 插件中运行后台进程，并发`shell_exec()`现在管理选项页面中使用 WordPress 时会以某种方式感到困惑。使用相对路径的包含似乎无法正确处理。

这是我为演示问题而编写的示例插件：

```
/* Plugin Name: Sample ShellExec */

add_action('admin_menu', 'sample_shellexec_menu');
function sample_shellexec_menu() {
    add_options_page(
        'Sample Shell Exec', 
        'Sample Shell Exec', 
        'manage_options',
        'sample_shell_exec', 
        'sample_shellexec_admin');
}
function sample_shellexec_admin() {
    ?>
    <div class="wrap">
    <?php
        $phppath = 'php';
        // $phppath = 'Z:\xampp\php\php.exe'; // in my case
        echo ABSPATH . '<br />';
        $output = shell_exec($phppath . ' "' . ABSPATH . '/index.php" 2>&1');       
        echo $output;
    ?>
    </div>
    <?php
} 
```

转到选项页面，您会看到一条错误消息，例如，

> 警告：需要（./wp-blog-header.php）：无法打开流：第 17 行的*[WordPress 的路径]* \index.php 中没有这样的文件或目录调用堆栈：0.0002 320664 1\. {main}（ ) *[WordPress 的路径]* \index.php:0 致命错误：require()：在*[ WordPress 的路径]* \index.php 第 17 行调用堆栈：0.0002 320664 1\. {main}() *[WordPress 的路径]* \index.php:0

`shell_exec()`如果在管理面板之外使用，则不会发生该错误。我想知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:58:18.607

您可以尝试强制环境以正确的路径运行您的命令：

```
shell_exec("cd " . escapeshellarg(ABSPATH) . "; " . $phppath . ' index.php 2>&1'); 
```

我习惯了 Linux 系统，所以我不知道这是否适用于 Window。

# view - Ember.js 视图参数将 html 显示为纯文本

> ID：12446292
> 
> 赞同：2
> 
> 时间：2012-09-16T10:49:55.990
> 
> 标签：view, parameters, ember.js

我有这样的看法：

```
<script type="text/x-handlebars" data-template-name="articlesOne">
<div class="main">
    <div id="articlesOne">
        <h2 id="article-title">{{App.ArticlesOneController.article.title}}</h2>
        <h3 id="article-lead">{{App.ArticlesOneController.article.lead}}</h3>
        <div id="article-body">{{App.ArticlesOneController.article.body}}</div>
    </div>
</div>
</script> 
```

当我将`App.ArticlesOneController.article.title`属性更改为 时，`<p>Pragraph</p>`浏览器会显示纯文本，***而不是***解析为 HTML。

由于在该 div 上构建了一个编辑器，我想用 HTML 显示它。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:52:12.237

您应该尝试使用`{{{App.ArticlesOneController.article.title}}}`. 我认为此链接对您有用：[显示包含 html 标记的属性](https://stackoverflow.com/questions/11450602/show-property-which-includes-html-tags)

# java - 如何在不完成/停止子活动的情况下从子活动完成父活动？

> ID：12446293
> 
> 赞同：4
> 
> 时间：2012-09-16T10:49:55.997
> 
> 标签：java, android, mobile, android-activity, android-lifecycle

我是android的初学者。谁能帮我举个例子？

到目前为止，我已经搜索过它，但没有找到有用的东西。才发现关闭父Activity也需要用setResult()方法关闭子Activity。

我到底在寻找的是，我的父活动应该从子活动中关闭，而无需完成子活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T15:33:30.617

创建 Context 的静态变量，如 **static Context cntxofParent；**在父活动中

然后在 Parent Activiy 中初始化该引用，例如

**cntxofParent=ParentActivityName.this;**

当您处于子活动中时，请收集该上下文并将其转换为 Activity，如下所示，

**活动父活动；**

**parentActivity=(Activity)cntxofParent;**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:33:10.700

在子活动中，尝试使用返回父活动的 getParent() 方法，然后完成它！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-12T20:40:31.100

活动回栈就像一个栈一样工作，即您可以将活动弹出和推送到它上面。如果不首先在堆栈上删除其上方的活动，则无法从堆栈中删除活动。因此，如果不先完成自己，孩子可能不可能完成父母的活动。

通过使用启动模式和[Intent](http://developer.android.com/guide/components/tasks-and-back-stack.html#TaskLaunchModes)[标志](http://developer.android.com/reference/android/content/Intent.html)，您可以使用多种方法重新排序甚至清除活动回栈 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T11:37:44.970

我建议您阅读有关[任务和返回堆栈的信息](http://developer.android.com/guide/components/tasks-and-back-stack.html)

首先，如果我没记错的话，android 中的活动被放在一个名为 Activity Stack 的堆栈上。当你开始一个活动时，你可以添加一个会影响堆栈的意图标志，比如

addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK)

我想我以前做过你想做的事情（我不确定我用的是什么标志，那是很久以前的事了：p）。但是只需阅读有关活动任务的信息，即可了解哪种意图标志适合您尝试执行的操作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-16T12:16:01.357

活动 A -> 活动 B ，删除活动 A ，

如果这是您正在寻找的

```
 Intent intent = new Intent(this, B.class);
    startActivity(intent);
    finish(); 
```

# python - Python中的时间表达识别

> ID：12446296
> 
> 赞同：2
> 
> 时间：2012-09-16T10:50:40.220
> 
> 标签：python, regex, expression, temporal

有谁知道 Python 模块可以轻松提取时间表达式，例如`12/01/2011`和`Monday, 12/3/1987`或其他（英文格式）？

想避免构建大量的正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T10:57:28.847

在标准库中你不会找到全面的东西，但如果你安装[dateutils](http://labix.org/python-dateutil)，你可以这样做：

```
>>> from dateutils import parser
>>> parser.parse('January 12, 2012').strftime('%s')
'1326315600'
>>> parser.parse('01/12/2012').strftime('%s')
'1326315600'
>>> parser.parse('Sunday, 16/09/2012').strftime('%s')
'1347742800' 
```

Martijn 有一点，所以这里是正常的表示 - 这是[`datetime`object](http://docs.python.org/library/datetime.html)：

```
>>> parser.parse('Sunday, 16/09/2012')
datetime.datetime(2012, 9, 16, 0, 0)
>>> parser.parse('01/12/2012')
datetime.datetime(2012, 1, 12, 0, 0)
>>> parser.parse('January 12, 2012')
datetime.datetime(2012, 1, 12, 0, 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T10:52:27.973

使用标准`datetime.datetime.strptime()`。

例子：

```
In : datetime.datetime.strptime("12/01/2012", "%m/%d/%Y")
Out: datetime.datetime(2012, 12, 1, 0, 0) 
```

# php - Codeigniter 在每次页面加载时创建新会话

> ID：12446297
> 
> 赞同：6
> 
> 时间：2012-09-16T10:51:03.223
> 
> 标签：php, codeigniter

我使用 codeigniter 2.1.0 为客户开发电子商务网站。该网站已经运行了大约 3 个月，然后突然之间，登录没有坚持，会话数据没有设置。我检查了数据库，发现每次页面加载都会创建一个新会话。

这是我的配置值

```
$config['sess_cookie_name']     = 'myu';
$config['sess_expiration']      = 7200;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = '_sessions';
$config['sess_match_ip']        = TRUE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 3600;

$config['cookie_prefix']    = "";
$config['cookie_domain']    = "";
$config['cookie_path']      = "/";
$config['cookie_secure']    = FALSE; 
```

我编辑了会话表上的 user_agent 字段以容纳较长的 user_agent 字符串。可能是什么问题呢？我会很感激任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T18:43:49.240

确保您在以下位置设置了正确的`/application/config/config.php`域`$config['cookie_domain']`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-13T19:42:04.060

您还应该检查会话表中“user_agent”的大小。我遇到了一些关于“varchar(40)”的问题，因为 MacOS（山狮，20.0 版）中的 Firefox 用户代理在您的 UA 中报告了 60 多个字符。

将字段从“varchar(40)”更改为“varchar(255)”解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T17:11:12.553

我发布这个是希望它可以帮助其他人。我已经尝试了多个站点上提到的许多建议，并为此工作了 2 天。没有一个解决方案奏效。

然后我决定检查我的 cookie 中显示的内容。我`$config['sess_encrypt_cookie'] = FALSE;`在 config.php 文件中进行了设置，以便我可以读取数据并删除所有旧 cookie。我还更改`$config['sess_cookie_name']`了网站名称。它最初是默认的“cisession”。突然之间，它开始正常工作。我不知道是清除了我的旧 cookie 还是关闭了加密或更改了名称造成了不同，但我很高兴它终于起作用了。我猜也许我的 cookie 已损坏。由于我看到网站对相同的设置提出了完全不同的建议（例如，有人说将 ['cookie_domain'] 留空，有人说在您的根域中添加（至少有 2 个句点）等），我将我的设置包括在内在 config.php 文件中：

```
$config['sess_cookie_name']     = 'easyeverydayenglish';
$config['sess_expiration']      = 14400;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = TRUE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300;

$config['cookie_prefix']    = "";
$config['cookie_domain']    = ".eee.loc";
$config['cookie_path']      = "/";
$config['cookie_secure']    = FALSE; 
```

现在讨论我的下一个问题，即尝试让 CI 在 goDaddy 上工作。啊。

# c++ - 如何在单个for循环中反转链表？

> ID：12446304
> 
> 赞同：2
> 
> 时间：2012-09-16T10:52:37.453
> 
> 标签：c++

> **可能重复：**
> [反转单链表](https://stackoverflow.com/questions/1801549/reverse-a-singly-linked-list)

如何在单个 for 循环中反转单链表？这是在一次采访中被问到的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:31:04.023

在伪代码中，这看起来像：

```
// Cache the start element
current = first;
next = current->next;
while (next != null) {
   // Cache the next pointer to not lose the reference
   temp = next->next;
   next->next = current;
   // Increment
   current = next;
   next = temp;
}
first = current; 
```

我知道它不在 for 循环中，但可以很容易地重写为。随着时间的推移，它使它更具可读性。

# c# - 如何使用自定义字体 asp.net 应用程序

> ID：12446307
> 
> 赞同：0
> 
> 时间：2012-09-16T10:53:46.080
> 
> 标签：c#, asp.net

如何使用自定义字体 asp.net 应用程序。
我有一个字体文件。我想将该文件添加为资源并在项目中使用它。怎么做？

```
 PrivateFontCollection pfc = new PrivateFontCollection();
        Stream fontStream = this.GetType().Assembly.GetManifestResourceStream(Server.MapPath("~/Resources/EAN-13.ttf"));

        byte[] fontdata = new byte[fontStream.Length];
        fontStream.Read(fontdata, 0, (int)fontStream.Length);
        fontStream.Close();

        unsafe
        {
            fixed (byte* pFontData = fontdata)
            {
                pfc.AddMemoryFont((System.IntPtr)pFontData, fontdata.Length);
            }
        } 
```

我试过这个。但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:58:27.090

您必须**区分在服务器上运行的代码和在客户端**浏览器上运行的代码。

您在计算机上、服务器上拥有的字体无法使用后面的代码在用户计算机上显示，因为您加载了字体。

所以你在这里有两个选择。

1.  加载字体，并使用此字体在图像中渲染文本，然后将此图像显示给用户。

2.  使用客户端技术来显示此字体。其中一些是**跨浏览器字体嵌入**，另一些可以是可以在客户端呈现它们的 javascript。

您可以使用“嵌入自定义字体网站”搜索它。

您也可以检查：[http](http://typeface.neocracy.org/)
: //typeface.neocracy.org/[是否可以使用自定义字体 - 使用 font-face？](https://stackoverflow.com/questions/8789295/is-it-possible-to-use-custom-fonts-using-font-face)

# java - FTP连接java

> ID：12446309
> 
> 赞同：0
> 
> 时间：2012-09-16T10:54:03.110
> 
> 标签：java, android

我正在尝试将文件上传到服务器。通过 FTP 将文件上传到服务器的方式是什么？

我写了这门课：

服务器连接.java：

```
import java.io.IOException;
import java.net.SocketException;
import org.apache.commons.net.SocketClient;
import org.apache.commons.net.ftp.FTPClient;

public class serverconnection
{

    public FTPClient connectftp() 
    {
        FTPClient ftp = null;
        try {
            ftp.connect("ftp://ftp.drivehq.com/");
            ftp.login("zule", "*****");
        //  ftp.changeWorkingDirectory("/public");
        //  ftp.makeDirectory("200");
        } catch (SocketException en) {
            // TODO Auto-generated catch block
            en.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return ftp;
    }
} 
```

这是 mainActivity （只有相关代码）：

```
import android.view.View;
import android.view.View.OnClickListener;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.widget.Button;
import android.widget.TextView;
import java.io.IOException;
import java.net.SocketException;
import org.apache.commons.net.ftp.FTPClient;

public class MainActivity extends Activity implements OnClickListener {
    Button scan;
    String contents;
    String format;
    TextView contentstext;
    TextView formattext;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //----------------------FTP-------------
        serverconnection ftpconnect =new serverconnection();
        FTPClient ftp=ftpconnect.connectftp();
        scan=(Button)findViewById(R.id.scanbutton);
        ..... 
```

当我在手机上安装应用程序时出现错误：“不幸的是，您的应用程序必须停止...”

新代码：

```
public class MainActivity extends Activity implements OnClickListener {
    Button scan;
    String contents;
    String format;
    TextView contentstext;
    TextView formattext;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //----------------------FTP-------------
        //serverconnection ftpconnect =new serverconnection();
        //SimpleFTP ftp=ftpconnect.connectftp();
        SimpleFTP ftp = new SimpleFTP();
        try {
            ftp.connect("market.bugs3.com", 21, "u884282808", "lionetwork1");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

新的日志猫：

```
09-16 13:43:31.131: E/AndroidRuntime(1203): FATAL EXCEPTION: main
09-16 13:43:31.131: E/AndroidRuntime(1203): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.market/com.example.market.MainActivity}: android.os.NetworkOnMainThreadException
09-16 13:43:31.131: E/AndroidRuntime(1203):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at android.os.Looper.loop(Looper.java:137)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at java.lang.reflect.Method.invokeNative(Native Method)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at java.lang.reflect.Method.invoke(Method.java:511)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at dalvik.system.NativeStart.main(Native Method)
09-16 13:43:31.131: E/AndroidRuntime(1203): Caused by: android.os.NetworkOnMainThreadException
09-16 13:43:31.131: E/AndroidRuntime(1203):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at java.net.Socket.tryAllAddresses(Socket.java:108)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at java.net.Socket.<init>(Socket.java:177)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at java.net.Socket.<init>(Socket.java:149)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at org.jibble.simpleftp.SimpleFTP.connect(SimpleFTP.java:68)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at com.example.market.MainActivity.onCreate(MainActivity.java:31)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at android.app.Activity.performCreate(Activity.java:4465)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-16 13:43:31.131: E/AndroidRuntime(1203):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-16 13:43:31.131: E/AndroidRuntime(1203):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T14:02:49.713

**注意：`AsyncTask`类在 API 级别 30 中已弃用。请[`java.util.concurrent`](https://developer.android.com/reference/java/util/concurrent/Executor)改用。**

问题是您试图在主线程上进行网络调用。这在 Android 3.0 或更高版本上是不允许的。

您应该通过在不同线程上调用 FTP 服务器来解决此问题。一个很好的方法是使用 AsyncTask：

```
private class FtpTask extends AsyncTask<Void, Void, FTPClient> {
     protected FTPClient doInBackground(Void... args) {
        serverconnection ftpconnect =new serverconnection();
        FTPClient ftp=ftpconnect.connectftp();
        return ftp;
     }

     protected void onPostExecute(FTPClient result) {
         Log.v("FTPTask","FTP connection complete");
         ftpClient = result;
         //Where ftpClient is a instance variable in the main activity
     }
 } 
```

然后您可以在主线程中使用以下代码运行此后台线程：

```
new FtpTask().execute(); 
```

编辑：

如果要在不同方法之间传递参数，可以更改 `AsyncTask<Void, Void, Void>`超类初始化。

例如`AsyncTask<String, Double, Integer>`，可以将 String 变量传递给 doInBackground 方法，使用 double 跟踪进度并使用整数作为结果类型（结果类型是 doInBackground 的返回类型，它将作为一个发送到 onPostExecute范围）。

# xaml - Visual Studio 2012 显示没有错误的 xaml 错误

> ID：12446311
> 
> 赞同：4
> 
> 时间：2012-09-16T10:54:28.383
> 
> 标签：xaml, visual-studio-2012

例如，我为一个窗口做：

```
Icon="/Prayon.Common.Images;component/Application/Prayon.ico" 
```

这很好用，在 Visual Studio 2010 中没有错误。现在，在 Visual Studio 2012 中，我看到了错误

```
Could not find a part of the path 'C:\Prayon.Common.Images;component\Application\Prayon.ico'. 
```

在错误列表中。但是`Prayon.ico`在大会`Prayon.Common.Images`中是正确引用的。

为什么 Visual Studio 2012 将此报告为错误？

我可以毫无问题地编译和运行项目。VS2012 的 ErrorList 中只有很多错误消息，这使得很难得到“真正的”错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:43:49.240

我很确定您以一种有趣的方式引用图像，不应该更像这样吗？

```
pack://application:,,,/Resources/Prayon.png" 
```

或更准确地说，这个

```
<Image Source="/ClassLibraryName;Component/images/myimage.png"/> 
```

您可以在此处找到有关 WPF 包 URI 的更多信息：http: [//msdn.microsoft.com/en-us/library/aa970069.aspx](http://msdn.microsoft.com/en-us/library/aa970069.aspx)

# xquery - xquery-获取单个父项中不为空的那些元素的计数

> ID：12446312
> 
> 赞同：6
> 
> 时间：2012-09-16T10:54:39.710
> 
> 标签：xquery

请考虑以下 XML--

```
<div id="test">
    <p> Text sihdfaif</p>
    <p />
    <p> Text sihdfaif</p>
    <p />
    <p> Text sihdfaif</p>
    <p> Text sihdfaif</p>
    <p> Text sihdfaif</p>
</div> 
```

现在，我想获取其中包含一些文本的 p 元素的数量。在这种情况下，该值 = 5（有 2 个“p”元素为空）

这是我想出的 XQuery——

```
 let $claims_main := $doc//div[@id="test"]
        let $claims := $doc//div[@id="test"]/p
        let $n := count($claims)
        where $claims_main/p != '' 
        return $n 
```

然而我从上面得到的结果是7，即包括空的'p'元素。

我想到的另一种选择是对所有“p”元素使用for循环，但在这种情况下，我如何检索循环的元素总数？如果我在这种情况下使用 count ，那么我只会得到 [1,1,1,1,1]- 即。每个 p 元素的计数（因为在 for 循环中，计数将针对每个 'p' 元素，而不是 div 本身）...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T16:13:17.650

**由于问题专门询问“`p`其中包含一些文本的元素”，因此**这里是如何获得精确此类`p`元素的数量：

```
count(/*/div/p[string(.)]) 
```

这将生成`p`具有非空字符串值的所有元素的数量，这些元素`div`是 XML 文档顶部元素的子元素的子元素。

**此外，如果“非空”也意味着具有非纯空格字符串值**：

```
count(/*/div/p[normalize-space(.)]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T11:06:39.510

试试这个：

```
count($doc//div[@id='test']/p[node()]) 
```

第二个谓词`[node()]`只选择包含子节点的元素，它等价于`[./node()]`.

# java - Eclipse 使用的是哪种 Java？

> ID：12446316
> 
> 赞同：7
> 
> 时间：2012-09-16T10:56:14.383
> 
> 标签：java, eclipse

我从 eclipse.org 下载了适用于 Linux 的“Eclipse IDE for Java EE Developers”。我能够编写、编译和运行 Java 程序。但我不明白使用的是什么 JDK/JRE。

如果我开始一个新的“Java 项目”，我可以选择使用哪个 JRE，但如果我选择例如“JavaSE-1.6”，我仍然不知道那是什么？甲骨文？IBM？而且我不知道该 JRE 在我的文件系统中的位置。

假设我想使用相同的 JRE 从命令行执行我的 Java 程序，我如何找到“java”可执行文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-01-11T10:52:20.970

当您在 Eclipse 中时：

*   打开帮助 -> 关于 Eclipse
*   点击安装详情
*   选择选项卡配置

搜索条目

```
eclipse.vm= 
```

应该有使用的 JRE 的路径。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-16T12:51:21.877

如果您想知道 Java 在您的系统中的位置，请在终端中运行它`whereis java`。

如果您想知道系统中使用的是哪个 Java，请在终端中运行它`which java`。

如果您想知道默认使用的是什么 Java 版本，请在终端中运行它`java --version`

如果想知道 Eclipse 中使用的是哪个 JDK，请参考 Project->Properties->Java Compiler。

如果想知道 Eclipse 中使用的是哪个 JRE，请参考 windows->preferences->Installed JREs

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-16T10:59:56.093

这取决于您的配置。

转到 Windows/首选项，然后检查：

Java/已安装的 JRE 和 Java/编译器/

您还可以覆盖每个项目的设置：项目首选项、Java 编译器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T12:34:14.767

Eclipse 为您提供了一个选项来选择`JDK`每个**项目**以及**所有项目。**

**对于所有项目：**

Windows ---> Preferences ---> Java Compiler ---> Compiler compliance level ---> 选择您希望使用的 JDK。

**对于特定项目：**

Project ---> Properties ---> Java Compiler ---> Compiler compliance level ---> 选择您希望使用的 JDK。

特定项目的设置优先于所有项目设置...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-16T13:04:50.193

*（评论太长了）*

> 假设我想使用相同的 JRE 从命令行执行我的 Java 程序，我如何找到“java”可执行文件？

在 Linux 上，java 可执行文件是在您的路径中找到的第一个名为“java”的可执行文件。

例如：

```
... $  echo $PATH
/home/f/jdk1.6.0_33/bin:/usr/local/bin:/usr/bin:/bin
... $  which java
/home/f/jdk1.6.0_33/bin/java 
```

您可以安装任意数量的 JRE/JDK。您甚至可以轻松地创建使用 Java 的用户帐户（*例如*，用于开发的用户帐户）和不使用 Java 的用户帐户（*例如*，没有 Java的用户帐户，您只能用于浏览 Web [参见评论]）。

如果您尝试在 $PATH 不包含任何 Java 可执行文件时启动 Eclipse，并且如果您没有在*~/eclipse/*中安装任何 JRE/JDK ，则 Eclipse 将抱怨并拒绝启动：

*“必须安装 JRE 或 JDK 才能启动 Eclipse”*

此时，如果您确实安装了 Java，您可以简单地将其添加到 $PATH 和 Eclipse 将启动：

```
... $  export PATH=~/jdk1.6.0_33/bin:$PATH 
```

# javascript - 更改 url 而不使用 javascript 重定向

> ID：12446317
> 
> 赞同：107
> 
> 时间：2012-09-16T10:56:47.780
> 
> 标签：javascript, jquery, ajax, redirect

我想知道如何在不重定向的情况下更改 url，就像在这个网站[http://dekho.com.pk/ads-in-lahore](http://dekho.com.pk/ads-in-lahore)上一样， 当我们单击选项卡时，url 会发生变化，但页面会完全重新加载。stackoverflow 上还有其他问题表明这是不可能的，但我想知道上述网站是如何实现它的。谢谢

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-09-16T11:10:45.080

使用`pushState`：

```
window.history.pushState("", "", '/newpage'); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-16T11:53:34.810

如果您想确切地知道他们使用的是什么，那就是**Backbone.js**（参见行`4574`和`4981`）。它与 jQuery 源代码混在一起，但这些是带[注释的`Backbone.Router`源](http://backbonejs.org/docs/backbone.html#section-108)文档页面的相关行：

支持[检查](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1029)：

```
 this._wantsPushState = !!this.options.pushState;
  this._hasPushState = !!(this.options.pushState && window.history && window.history.pushState); 
```

`route`功能：

```
route: function(route, name, callback) {
    Backbone.history || (Backbone.history = new History);

    if (!_.isRegExp(route)) route = this._routeToRegExp(route);

    if (!callback) callback = this[name];

    Backbone.history.route(route, _.bind(function(fragment) {
        var args = this._extractParameters(route, fragment);

        callback && callback.apply(this, args);

        this.trigger.apply(this, ['route:' + name].concat(args));

        Backbone.history.trigger('route', this, name, args);
    }, this));

    return this;
}, 
```

[在哈希和推送状态](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1043)之间进行选择：

```
// Depending on whether we're using pushState or hashes, and whether
// 'onhashchange' is supported, determine how we check the URL state.
if (this._hasPushState) {
    Backbone.$(window).bind('popstate', this.checkUrl);
} else if (this._wantsHashChange && ('onhashchange' in window) && !oldIE) {
    Backbone.$(window).bind('hashchange', this.checkUrl);
} else if (this._wantsHashChange) {
    this._checkUrlInterval = setInterval(this.checkUrl, this.interval);
}​ 
```

更多关于他们在做什么：

```
// If we've started off with a route from a `pushState`-enabled browser,
// but we're currently in a browser that doesn't support it...
if (this._wantsHashChange && this._wantsPushState && !this._hasPushState && !atRoot) {
    this.fragment = this.getFragment(null, true);
    this.location.replace(this.root + this.location.search + '#' + this.fragment);

    // Return immediately as browser will do redirect to new url
    return true;

    // Or if we've started out with a hash-based route, but we're currently
    // in a browser where it could be `pushState`-based instead...
} else if (this._wantsPushState && this._hasPushState && atRoot && loc.hash) {
    this.fragment = this.getHash().replace(routeStripper, '');
    this.history.replaceState({}, document.title, this.root + this.fragment);
}

if (!this.options.silent) return this.loadUrl(); 
```

[政变的](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1132)恩典：

```
// If pushState is available, we use it to set the fragment as a real URL.
if (this._hasPushState) {
     this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);
} 
```

您应该阅读我在顶部提供的带注释的 Backbone.js 链接。信息量很大。

# android - 获取两个日期之间的天数差异

> ID：12446326
> 
> 赞同：0
> 
> 时间：2012-09-16T10:58:33.760
> 
> 标签：android, jodatime, jexcelapi

我正在使用 jxl api 读取 android 中的 excel 文件。当我从 excel 中获得类似“30/11/2012”的日期时，LabelCell 输出显示我的日期为“11/30/12”。

1）我需要在读取excel文件时以dd/MM/yyyy格式获取输出，因为它在excel中以这种方式存在，所以我不想不必要地将它转换成另一种格式。怎么做 ？

2）在读取 excel 列的日期后，我生成了 2 个变量，一个具有 excel 日期 - 20 天（我们称之为 excelMinus20）和另一个 excel 日期 + 10 天（我们称之为 excelPlus10。现在，我想检查一下此外，如果当前系统日期（智能手机的日期）>= excelMinus20 并且当前系统日期<= excelPlus10。

如何使用 java.text.Date 来完成这一切？我也尝试过使用 joda time，但是使用起来太复杂了。请至少指导我正确的方向。

在此先感谢 Omkar Ghaisas

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:07:27.937

要从文本格式解析您的日期：

```
DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy");
Date date = formatter.parse("30/11/2012"); 
```

更多信息 ：[`SimpleDateFormat doc`](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

要从您的日期中减去天数：

```
public static Date substractDays(Date date, int days)
{
    long millis = date.getTime();
    long toSubstract = days * 1000 * 60 * 60 * 60 * 24;
    //                       1milli  1s   1m   1h   1d
    return new Date(millis-toSubstract);
} 
```

添加一些天将是相同的，除了将 - 替换为 +

`String`要从Date 对象中取回表示：

```
DateFormat formatter = new SimpleDateFormat("...pattern...");
String formatedDate = formatter.format(date.getTime()); 
```

**编辑：**

您还可以使用您建议的方法进行日期加/减：

```
public static Date substractDays(Date date, int days)
{
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(date);
    calendar.add(Calendar.DATE, -20 /*or +10*/); 
    return calendar.getTime();
} 
```

如果要检查日期是否在区间内，则：

```
public static boolean isInInterval(Date date, Date from, Date to)
{
    return date.getTime()<to.getTime() && date.getTime() > from.getTime();
} 
```

# php - 在 Wordpress 中编辑侧边栏

> ID：12446329
> 
> 赞同：1
> 
> 时间：2012-09-16T10:59:14.733
> 
> 标签：php, wordpress, sidebar

我将在 Wordpress 中使用 dynamic_sidebar 函数生成的侧边栏中添加页脚。如您所知，dynamic_sidebar 生成具有以下结构的侧边栏：

```
<li class="sidebox">
    <h3>The Header</h3>

    <ul>
        <li></li>
        <li></li>
    </ul>
</li>
<li class="sidebox">
    <h3>The Header</h3>

    <ul>
        <li></li>
        <li></li>
    </ul>
</li> 
```

但我想将其转换为：

```
<li class="sidebox">
    <h3>The Header</h3>

    <ul>
        <li></li>
        <li></li>
    </ul>
    <div class="footer"></div>
</li>
<li class="sidebox">
    <h3>The Header</h3>

    <ul>
        <li></li>
        <li></li>
    </ul>
    <div class="footer"></div>
</li> 
```

我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:58:33.263

不知道你将如何在 PHP 中进行此操作，但如果你的 JavaScript 没问题，那么你可以将 child 附加到侧边框 li，假设 1- 页脚包含相同的内容，或者 2- 你有一个差异化因素（通常是一个 id以递增的数字）来识别每个单独的块。

# android - TextView & StringArray 功能失常

> ID：12446333
> 
> 赞同：0
> 
> 时间：2012-09-16T11:00:44.440
> 
> 标签：android, textview

好吧，我做了一个活动，我正在根据字符串数组的大小创建一些 TextViews！但是，尽管我的字符串数组上有 4 个项目，我通过调试对其进行了测试，但创建的文本视图只有 1 个。如果有人对此有任何想法，请告诉我 :)

```
setContentView(R.layout.program);

    String[] daily_lessons = getResources().getStringArray(R.array.firstGradeLessons);
    final TextView[] tv = new TextView[daily_lessons.length];
    final LinearLayout layout = (LinearLayout) findViewById(R.id.linear1);
    fasa = (TextView) findViewById(R.id.textView1);
    fasa.setText(String.valueOf(daily_lessons.length));

    for (int i=0; i<daily_lessons.length; i++){
        tv[i] = new TextView(this);
        tv[i].setText(daily_lessons[i]);
        tv[i].setTextSize(20);
        tv[i].setLayoutParams(new LinearLayout.LayoutParams((int)LayoutParams.FILL_PARENT,(int) LayoutParams.WRAP_CONTENT));
        tv[i].setGravity(Gravity.CENTER);
        layout.addView(tv[i]);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:29:59.893

TextView 似乎已创建，但现在可能在 GUI 上可见，可能相互堆叠等。

1.在父线性布局上使用**layout.setOrientation(ORIENTAIION.VERTICAL) 。**

2.在布局上使用**childCount()**以确保所有 4 个文本视图都已添加到片段中。

3.还确保您没有使用**removeALLView()**等方法来研究问题案例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:07:35.983

如果您仍然需要这个问题的答案，这就是我会做的。

```
 setContentView(R.layout.program);

    String[] daily_lessons = getResources().getStringArray(R.array.firstGradeLessons);
    LinearLayout layout = (LinearLayout) findViewById(R.id.linear1);
    fasa = (TextView) findViewById(R.id.textView1);
    fasa.setText(String.valueOf(daily_lessons.length));

    TextView tmpView = null;
    for (int i=0; i<daily_lessons.length; i++){
        tmpView = new TextView(this);
        tmpView.setText(daily_lessons[i]);
        tmpView.setTextSize(20);
        layout.addView(tmpView , new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
    } 
```

我将这种类型的代码用于我的动态生成的内容（从预填充的数据库中获取内容）。

# php - CodeIgniter 选择并在视图中显示结果

> ID：12446334
> 
> 赞同：2
> 
> 时间：2012-09-16T11:01:13.543
> 
> 标签：php, codeigniter

我有以下简单代码：模型：

```
function get_last_ten_entries()         
{
    $this->db->get('property');
} 
```

控制器：

```
public function load_recent()
{
    $data['info'] = $this->propertymodel->get_last_ten_entries();
    $this->load->view('load_property', $data);
} 
```

看法：

```
<?
echo $data['id'];
?> 
```

这是行不通的。确定我做错了什么，因为显示的错误说

> 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：未定义变量：数据
> 
> 文件名：views/load_property.php
> 
> 行号：2

属性是数据库中的一个表，其中有一个名为 id 的字段。怎么了？

谢谢你们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T11:09:43.627

要修复错误，您需要`$info`在视图中使用，而不是`$data`控制器中的数组索引对应于视图中的变量。

`$this->db->get('property')`返回 table 中的所有行`property`，但您的函数名称表明您正在尝试获取最后 10 个条目。我建议您阅读[CodeIgniter 的 Active Record 文档](http://codeigniter.com/user_guide/database/active_record.html)以获取更多信息。你还需要`return`你的查询。

您需要从查询中生成结果。[CodeIgniter 的查询结果文档](http://codeigniter.com/user_guide/database/results.html)提供了有关如何使用查询结果的有用信息。您要实现的目标有点模糊，但您的代码可能如下所示：

**模型**

```
function get_last_ten_entries()         
{
    return $this->db->get('property');  //Perform query (you'll need to update to select what you actually want from you database)
} 
```

**控制器**

```
public function load_recent()
{
    $data['last_entries'] = $this->propertymodel->get_last_ten_entries();
    $this->load->view('load_property', $data);
} 
```

**看法**

```
foreach ($last_entries->result_array() as $entry)
{
   echo $entry['id'];
} 
```

或者，如果您更愿意使用对象而不是数组：

```
foreach ($last_entries->result() as $entry)
{
   echo $entry->id;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T11:12:29.103

首先，您在模型中的函数不会返回任何内容。试试这个：

```
function get_last_ten_entries()         
{
    $result = $this->db->get('property');
    return $result->result_array();
} 
```

当你修复它时，你的视图中将有变量 $info 可用，因为 Codeigniter 将给定的数组评估为不同的变量`load->view( $view, $givenarray);`

例子

```
$data['variable1'] = 'first var';
$data['array'] = array('id' => 1, 'name' => 'myname' );
$this->load-view('view', $data); 
```

将让您在视图文件中使用变量，如下所示

```
echo $variable1; // echoes 'first var';
echo $array['name']; // echoes myname 
```

# ssrs-2008 - 根据 tablix 值隐藏矩形

> ID：12446335
> 
> 赞同：0
> 
> 时间：2012-09-16T11:01:23.037
> 
> 标签：ssrs-2008, reporting-services

美好的一天..我是 SSRS 的新手，我想知道，是否可以根据 tablix 值隐藏一个 SSRS 矩形......？

谢谢，

关联

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:55:34.257

如果矩形不在 tablix 的同一组内，则否。如果是，您可以使用`ReportItems!Textbox##.value`函数访问 tablix 值（例如）。

但是，您可以通过使用普通聚合函数或使用该`Lookup`函数直接对馈送 tablix 的数据集执行操作。

[http://msdn.microsoft.com/en-us/library/dd255275.aspx](http://msdn.microsoft.com/en-us/library/dd255275.aspx) 和 [http://msdn.microsoft.com/en-us/library/ee210531.aspx](http://msdn.microsoft.com/en-us/library/ee210531.aspx)

# asp.net - 如何在 razor asp.net 中获取表单输入的 id 值

> ID：12446337
> 
> 赞同：0
> 
> 时间：2012-09-16T11:01:49.633
> 
> 标签：asp.net, razor, webmatrix-2

我有这样的形式，我想在 foreach 循环中获取每个 id 的值

```
Price      <input type="text" id="1" name="items" value="" /> <br />
Condition  <input type="text" id="2" name="items" value="" /> <br />
Brand      <input type="text" id="3" name="items" value="" /> <br />

       string[] items = Request.Form.GetValues("items");

       foreach(var ax in items){

           Response.Write("<br/>" + ax +  "-" +Request['id']);
       } 
```

在 asp.net 中这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:55:00.613

您需要为每个输入提供唯一的名称。然后，您可以遍历 Request.Form 集合并像这样获取它们的值...

```
<form action="" method="post">
Price      <input type="text" id="1" name="items_1" value="" /> <br /> 
Condition  <input type="text" id="2" name="items_2" value="" /> <br /> 
Brand      <input type="text" id="3" name="items_3" value="" /> <br /> 
<input type="submit">
</form>

@{
       foreach(string ax in Request.Form){ 
           if (ax.StartsWith("items_")) {
               string id = ax.Substring(6);
               Response.Write("<br/>" + id +  "-" +Request.Form[ax]); 
           }
       } 
} 
```

# python - OpenCV - Python 绑定中的 IPP、TBB 和 CUDA

> ID：12446340
> 
> 赞同：2
> 
> 时间：2012-09-16T11:02:52.617
> 
> 标签：python, opencv, compilation, cuda, tbb

我正在使用 OpenCV 的 Python 绑定，这基本上只需编译 OpenCV 包并将 .pyd 文件放在我的 Python 发行版中即可。

我的问题是：如果我用 Intel IPP、TBB 和 CUDA 编译 OpenCV 包，它会影响 Python 绑定吗？如果是的话，我可以从编译的人那里得到 .pyd 文件吗（因为我在这样做时遇到了一些麻烦）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:53:54.057

OpenCV-Python 只是底层 C++ 代码的包装器。所以如果你用 IPP,TBB 编译，你的 python 代码也应该使用它。

但是对于 CUDA，OpenCV 具有用于 GPU 操作的单独功能。直到现在，这些函数还没有 Python 绑定。因此，您将无法从 Python 访问它们。（当然，他们也计划为 GPU 函数创建包装器，所以将来你可以使用它，但不是现在）。

现在，如果您已经进行了所有可能的优化并且仍然认为代码很慢，您将不得不使用其他方法，例如 cython，或者在 C 上编写代码并从 C 等中调用它。

# c - C 的 Opencv 2.4.2 安装

> ID：12446342
> 
> 赞同：1
> 
> 时间：2012-09-16T11:03:05.653
> 
> 标签：c, opencv, mingw

我一直在尝试为我的 Windows 7 64 位安装 opencv。我的基本目标是在 C 语言中使用 opencv。我有 borland 和 mingw 编译器。我完全按照描述[使用了 Windows 7 上的 OpenCV 2.4 和 MinGW 入门指南。](https://stackoverflow.com/questions/10860352/getting-started-with-opencv-2-4-and-mingw-on-windows-7)但我不断收到以下回复：

```
C:\Users\Rachit Dell\Pictures>g++ -I"C:\opencv\build\include" -L"C:\opencv\build
\x86\mingw\lib" loadimg.cpp -lopencv_core240 -lopencv_highgui240 -o loadimg
loadimg.cpp:1:39: error: opencv2/highgui/highgui.hpp: No such file or directory
loadimg.cpp:4: error: 'cv' is not a namespace-name
loadimg.cpp:4: error: expected namespace-name before ';' token
loadimg.cpp: In function 'int main(int, char**)':
loadimg.cpp:9: error: 'Mat' was not declared in this scope
loadimg.cpp:9: error: expected ';' before 'im'
loadimg.cpp:10: error: 'im' was not declared in this scope
loadimg.cpp:16: error: 'im' was not declared in this scope
loadimg.cpp:16: error: 'imshow' was not declared in this scope
loadimg.cpp:17: error: 'waitKey' was not declared in this scope 
```

我使用的是 2.4.2 版。

有人可以指导我。我只需要设置一个 IDE 就可以在 C 中编译 opencv。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:55:34.040

我遇到了这个错误。您需要知道您是否不会使用 ffmpegs，您可以在 cmake 阶段之前禁用此设置。这个属性对 opencv 的大部分专业都是有效的。我认为你必须用它解决你的问题。

否则，您可以通过在您的 cmake 过程之后创建的 CMakeCache.txt 来解决您的问题。您应该为一些库添加路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T21:07:50.080

你在 MinGW 中安装了 pkg-config 吗？尝试在 MinGW 控制台中键入 pkg-config --cflags --libs opencv。它应该输出一些 -I/c/opencv/build/include 和 -L/stuff。顺便说一句，我认为路径应该以 MinGW 方式而不是标准 Windows 方式输入。如果 pkg-config 有效，您还可以使用以下命令编译代码：

```
g++ loadimg.cpp -o loadimg `pkg-config --cflags --libs opencv` 
```

（不要忘记反引号）

# javascript - 存储 UTC 时间。以当地时间显示

> ID：12446344
> 
> 赞同：0
> 
> 时间：2012-09-16T11:04:23.160
> 
> 标签：javascript, asp.net-mvc, datetime, asp.net-mvc-4, client-side

我正在编写一个将在全球范围内使用的 mvc4 应用程序。应用程序的一部分正在记录添加或修改事务的时间。

所以我将交易日期时间保存为 UTC。从客户端，我最好的方式来显示他们期望的日期是什么？

这是我应该使用的javascript函数还是应该在视图中做某事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:14:36.713

这取决于您的喜好。如果您在服务器端有用户时区，存储在数据库中，最简单的方法是使用`DateTimeOffset`.

示例：[在 c# fx 3.5 中的特定时区创建 DateTime](https://stackoverflow.com/questions/246498/creating-a-datetime-in-a-specific-time-zone-in-c-sharp-fx-3-5)。

或者，使用[JavaScript getTimezoneOffset() 方法](http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp)，设置 cookie 并在服务器上读取它。您也可以使用许多客户端库，特别是如果您使用客户端模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:23:00.213

在内部，javascript 日期对象将时间存储为自一个纪元 UTC (1970-01-01T00:00:00Z) 以来的毫秒数。传输时间的最简单方法是使用该数字，因此：

```
// 2012-09-16T10:30:00.000Z
var ms = 1347791400000;

// Create a new date object using UTC milliseconds
var d = new Date(ms);

alert(d); // Shows local time equivalent, e.g. 2012-09-16T20:30:00GMT+1000 
```

或者，您可以传递 UTC 时间戳，将其拆分为组件并使用[Date.UTC](http://es5.github.com/#x15.9.4.3)将其转换为日期对象。请注意，月份是从零开始的，因此必须从日历月份数中减去一个。

要获取本地时间的 UTC 毫秒值，请使用[Date.prototype.getTime](http://es5.github.com/#x15.9.5.9)。对于上面的例子：

```
alert(d.getTime()); // 1347791400000 
```

# mysql - MySQL SELECT 通过数据库物理插入反向查询

> ID：12446349
> 
> 赞同：1
> 
> 时间：2012-09-16T11:05:22.177
> 
> 标签：mysql, select, indexing

这个查询：

```
SELECT * FROM table WHERE field = 'EN' 
```

我想以相反（desc）的顺序修改选择，将其物理插入到数据库中，而不使用任何索引（例如：DESC NO-INDEX）？

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:10:16.950

除非您有一个反映物理插入顺序的列，否则您不能（使用或不使用索引）。

您只能按查询包含的数据对查询进行排序。如果您没有存储插入时间戳或某种形式的 id，则无法生成所需的订单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T12:02:51.140

MyISAM 使用插入顺序存储项目，并用新的行填充已删除的行（您可以在 select * from... without order 中看到它）。默认情况下，插入顺序未保存在数据库中（如果您想使用自动增量字段来存储此顺序，您可以）。

INNODB 按 PK 存储行，因此`select ... from ... order by PK desc`无论何时插入行，您都可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T11:10:56.847

由于数据库中的各种空间重用策略，这实际上是不可能的。可能最接近您的是读取没有指定任何顺序的记录，然后以相反的方向遍历您的结果集。

# apache2 - 无法访问詹金斯

> ID：12446352
> 
> 赞同：6
> 
> 时间：2012-09-16T11:05:52.037
> 
> 标签：apache2, jenkins

我已经使用本指南在我的 Ubuntu 12.04 台式机上安装了 Jenkins：

[https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+on+Ubuntu](https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+on+Ubuntu)

我还需要遵循本指南：

[http://aslamnajeebdeen.com/blog/how-to-fix-apache-could-not-reliably-determine-the-servers-fully-qualified-domain-name-using-127011-for-servername-error-on- ubuntu](http://aslamnajeebdeen.com/blog/how-to-fix-apache-could-not-reliably-determine-the-servers-fully-qualified-domain-name-using-127011-for-servername-error-on-ubuntu)

从我的另一台机器（mac 笔记本电脑）我现在尝试通过 safari 访问 Jenkins：

```
http://192.168.1.100/jenkins 
```

我的台式机的 IP 地址在哪里`192.168.1.100`，但出现错误 404。我也尝试过：

```
http://jenkins 
```

但什么也没发生。我错过了什么？

Jenkins 服务正在我的台式电脑上运行：

```
service jenkins status
...
Jenkins Continuous Integration Server is running with the pid 3713 
```

如果我输入：`localhost:8080`在我的台式电脑上的浏览器中，我会得到 jenkins 网络界面。

问题已解决：我已遵循本指南：

[http://www.zzorn.net/2009/11/setting-up-hudson-on-port-80-on-debian.html](http://www.zzorn.net/2009/11/setting-up-hudson-on-port-80-on-debian.html)

现在它可以工作了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-22T21:26:09.700

我有同样的问题，但没有使用 Apache，而只是 Ubuntu 上的 Jenkins

我通过替换`HTTP_HOST=127.0.0.1`为`HTTP_HOST=0.0.0.0`on解决了它`/etc/default/jenkins`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T06:24:01.300

默认情况下， Jenkins 设置为侦听**端口 8080**，
因此您应该将浏览器指向：

http:// **localhost:8080** /
（或者，在你的情况下： http://192.168.1.100:8080 */*）

**编辑：**

如果仍然无法连接，您可能希望检查您的防火墙设置。

# php - Symfony2 OneToMany 关系和形式

> ID：12446358
> 
> 赞同：3
> 
> 时间：2012-09-16T11:06:53.397
> 
> 标签：php, forms, symfony, doctrine

我一直在将 Symfony2 用于一个新项目并且遇到了一个相当愚蠢的问题。

我的两个学说实体 Item 和 Comment 之间存在 OneToMany 关系。我现在有一个表单供用户为给定项目创建新评论。在创建新评论时，该评论当然有一个属性 Item，这应该设置为当前正在评论的项目。

当单击项目上的评论链接时，一个 id 作为参数发送到表单页面，我的计划是让这个 id 填充一个隐藏字段，然后使用数据转换器在回发时将其转换为项目。

但我如何真正做到这一点？如何将此 id 放入表单中的隐藏字段中，以便数据转换器可以正确处理它？或者在 Symfony2 中使用表单时是否有更好/更正确的方法来处理这种关系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T14:31:44.310

您不需要为此设置隐藏字段。您的操作必须知道用户正在评论哪个项目，因此您可以在评论上设置项目：

```
/**
 * @Route("/item/{id}/comment")
 */
public function commentAction(Item $item)
{
    $comment = new Comment;
    $comment->setItem($item);

    $form = $this->createForm('item_comment', $comment);

    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T11:18:16.343

无需数据转换器。只需为您的“项目”属性创建一个表单字段并将其设置为隐藏。就像是

```
 $item = $this->getDoctrine()
    ->getRepository('AcmeDemoBundle:Item')
    ->find($id);

    $comment = new Comment();
    $comment->setItem($item);

    $form = $this->createFormBuilder($comment)
            ... //add some fields
            ->add('item', array('hidden'=>true));
            ->getForm(); 
```

当您收到表单并绑定它时，Comment 对象的 'item' 属性将被正确设置

# c++ - 将字符串转换为 TDateTime 变量

> ID：12446360
> 
> 赞同：1
> 
> 时间：2012-09-16T11:07:04.037
> 
> 标签：c++, string, typeconverter, tdatetime

我正在使用 C++ 开发约会系统。

我可以在将字符串转换为 TDateTime 变量方面提供一些帮助吗？

这是一个我需要帮助的例子；

```
TDateTime appDateTime(2012, 9, 15, 14, 0, 0, 0); 
```

我将其保存到文件中（使用其他字符串和布尔值）。当作为字符串加载时，字符串值为：

> 2012 年 9 月 15 日下午 2:00:00

如何将其转换为 TDateTime 变量？

谢谢

**更新**

我正在尝试通过使用字符串的构造函数创建 TDateTime 变量。这是我的代码：

```
 string stringTestConstructorDate = "12/05/1990";

TDateTime testConstruct(stringTestConstructorDate); 
```

我收到此错误：E2285 找不到匹配的 'TDateTime::TDateTime(string)'

如何使用字符串变量来构造 TDateTime 变量？

这是我的第二个选项的代码：

```
string stringDateToConvert = "17/09/2012 09:00:02 a.m.";

struct tm DateTime;

if (NULL == strptime("17/09/2012 09:00:02 a.m.", "%D %T", &DateTime)) {

  printf("strptime() failed.\n");

  exit(EXIT_FAILURE);

}

printf("tm_sec  = %3d\n", DateTime.tm_sec );

printf("tm_min  = %3d\n", DateTime.tm_min );

printf("tm_hour = %3d\n", DateTime.tm_hour);

printf("tm_mday = %3d\n", DateTime.tm_mday);

printf("tm_mon  = %3d\n", DateTime.tm_mon );

printf("tm_year = %3d\n", DateTime.tm_year); 
```

这很好用。但是，我能否在将“stringDateToConvert”传递给“strptime”函数方面提供一些帮助。目前我收到以下错误：

> E2034 无法将 'string' 转换为 'const char *'

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-18T11:09:48.847

`StrToDateTime`SysUtils 中有一个-Function。

[http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/SysUtils_StrToDateTime@string.html](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/SysUtils_StrToDateTime@string.html)

还有一个`StrToDateTimeDef`-Function 在解析失败的情况下采用默认值。

[http://docwiki.embarcadero.com/Libraries/XE4/de/System.SysUtils.StrToDateTimeDef](http://docwiki.embarcadero.com/Libraries/XE4/de/System.SysUtils.StrToDateTimeDef)

它们都具有接受 TFormatSettings-Object 的重载，该对象可用于提供元数据以解析具有某些区域设置格式的日期。

# java - 如果垃圾收集器运行异常，是否是内存泄漏？

> ID：12446367
> 
> 赞同：5
> 
> 时间：2012-09-16T11:09:24.267
> 
> 标签：java, garbage-collection

我开发了一个 J2ME Web 浏览器应用程序，它运行良好。我正在测试它的内存消耗。在我看来，它存在内存泄漏，因为代表内存监视器（无线工具包）消耗的内存的绿色曲线达到了浏览器每完成 7 个请求所分配的最大内存（即 687768 字节），（即当最终用户在 Web 浏览器中从一页导航到另一页 7 页）之后，垃圾收集器运行并释放分配的内存。

我的问题是：

*   当垃圾收集器每 7 页导航自动运行时，它是内存泄漏吗？
*   我是否需要为每个请求手动运行一次垃圾收集器 (System.gc()) 以防止达到最大分配内存？

请指导我，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T11:19:06.313

要确定它是否是内存泄漏，您需要更多地观察它。

根据您的描述，即一旦达到最大内存，GC 就会启动并能够释放内存以供您的应用程序运行，这听起来不像有泄漏。

你也不应该自己打电话给GC，因为

1.  这只是一个迹象
2.  可能会影响底层算法，从而影响其性能。

相反，您应该关注为什么您的应用程序在如此短的时间内需要如此多的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T12:00:43.517

> 我的问题是：当垃圾收集器每 7 页导航自动运行一次时，是否存在内存泄漏？

不必要。也可能是：

*   您的堆对于您要解决的问题的大小来说太小了，或者

*   您的应用程序正在高速生成（可收集的）垃圾。

事实上，鉴于您提供的数字，我倾向于认为这主要是一个堆大小问题。如果 GC 运行之间的间隔随着时间的推移而减少，那么这将是指向内存泄漏的证据，但如果速率保持平均稳定，则表明内存使用率和回收率处于平衡状态；即没有泄漏。

> 我是否需要为每个请求手动运行一次垃圾收集器 (System.gc()) 以防止达到最大分配内存？

不不不。

调用`System.gc()`不会治愈内存泄漏。如果是真正的内存泄漏，那么调用`System.gc()`不会回收泄漏的内存。事实上，你要做的就是让你的应用程序运行得慢很多……假设 JVM 没有完全忽略调用。

* * *

**HotSpot JVM 的默认**行为是尊重 System.gc() 调用的直接和间接证据：

*   “例如，DisableExplicitGC 选项的默认设置会导致 JVM 支持显式垃圾收集请求。” - [http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.express.doc/info/exp/ae/rprf_hotspot_parms.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.express.doc/info/exp/ae/rprf_hotspot_parms.html)

*   “当以这种方式启用 JMX 时，一些进行分布式垃圾收集的 JVM（例如 Sun 的）会定期调用 System.gc，从而导致 Full GC。” - [http://static.springsource.com/projects/tc-server/2.0/getting-started/html/ch11s07.html](http://static.springsource.com/projects/tc-server/2.0/getting-started/html/ch11s07.html)

*   “最好使用标志 -XX:+DisableExplicitGC 来禁用显式 GC。” - [http://docs.oracle.com/cd/E19396-01/819-0084/pt_tuningjava.html](http://docs.oracle.com/cd/E19396-01/819-0084/pt_tuningjava.html)

并且来自 Java 7 源代码：

./openjdk/hotspot/src/share/vm/runtime/globals.hpp

```
 product(bool, DisableExplicitGC, false,                                   \
          "Tells whether calling System.gc() does a full GC")               \ 
```

其中`false`是选项的默认值。（请注意，这是在代码树的 OS / M/C 独立部分。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T02:45:41.080

我写了一个库，努力强制 GC。如前所述，`System.gc()`它是异步的，它自己不会做任何事情。您可能希望使用此库来分析您的应用程序并找到产生过多垃圾的位置。[你可以在这篇文章](http://mentablog.soliveirajr.com/2012/11/real-time-java-programming-without-gc/)中阅读更多关于它的内容，我详细描述了 GC 问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T12:26:06.357

那是（半）正常行为。在堆大小达到某个阈值之前，不会收集可用（未引用）存储，从而触发收集周期。

您可以通过更加“堆感知”来减少 GC 周期的频率。例如，许多程序中的一个常见错误是通过使用子字符串来解析字符串，不仅解析出最左边的单词，而且还通过向右子字符串化来缩短剩余的字符串。为单词创建一个新字符串不容易避免，但可以很容易地避免重复对原始字符串的“尾部”进行子串化。

运行 System.GC 将一事无成——在大多数平台上它是无操作的，因为它经常被滥用。

请注意（在脑死亡的 Android 之外）您不能在 Java 中出现真正的“内存泄漏”（除非存在严重的 JVM 错误）。Java 中通常所说的“泄漏”是未能删除对不再使用的对象的所有引用。例如，您可能会一直将数据放入链中，并且永远不会清除指向链远端不再使用的内容的指针。所产生的症状是使用的 MINIMUM 堆（即 GC 运行后立即的大小）在每个循环中不断上升。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T15:22:26.243

添加到其他出色的答案：

看起来您将*内存泄漏*与*垃圾收集*混淆了。

*内存泄漏*是当未使用的内存无法被垃圾收集时，因为它仍然在某处有引用（尽管它们没有用于任何事情）。

*垃圾收集*是指某个软件（垃圾收集器）自动释放未引用的内存。

您不应手动调用垃圾收集器，因为这会影响其性能。

# mysql - SQL：返回每个人最常见的值

> ID：12446368
> 
> 赞同：10
> 
> 时间：2012-09-16T11:09:27.910
> 
> 标签：mysql, sql

编辑：我正在使用 MySQL，我发现另一个帖子有同样的问题，但它在 Postgres 中；我需要 MySQL。

[获取 SQL 中另一列的每个值的最常见值](https://stackoverflow.com/questions/344665/get-most-common-value-in-sql)

在广泛搜索此站点和其他站点后，我提出了这个问题，但没有找到符合我预期的结果。

我有一张人员表（recordid、personid、transactionid）和一个事务表（transactionid、rating）。我需要一个可以返回每个人最常见的评分的 SQL 语句。

我目前有这个 SQL 语句，它返回指定人员 ID 的最常见评级。它有效，也许它可以帮助其他人。

```
SELECT transactionTable.rating as MostCommonRating 
FROM personTable, transactionTable 
WHERE personTable.transactionid = transactionTable.transactionid 
AND personTable.personid = 1
GROUP BY transactionTable.rating 
ORDER BY COUNT(transactionTable.rating) desc 
LIMIT 1 
```

但是，我需要一个语句来执行上述语句对 personTable 中的每个 personid 所做的事情。

我的尝试如下；但是，它使我的 MySQL 服务器超时。

```
SELECT personid AS pid, 
(SELECT transactionTable.rating as MostCommonRating 
FROM personTable, transactionTable 
WHERE personTable.transactionid = transactionTable.transactionid 
AND personTable.personid = pid
GROUP BY transactionTable.rating 
ORDER BY COUNT(transactionTable.rating) desc 
LIMIT 1)
FROM persontable
GROUP BY personid 
```

您能给我的任何帮助将不胜感激。谢谢。

**`PERSONTABLE`**：

```
RecordID,   PersonID,   TransactionID
1,      Adam,       1
2,      Adam,       2
3,      Adam,       3
4,      Ben,        1
5,      Ben,        3
6,      Ben,        4
7,      Caitlin,    4
8,      Caitlin,    5
9,      Caitlin,    1 
```

**`TRANSACTIONTABLE`**：

```
TransactionID,  Rating
1       Good
2       Bad
3       Good
4       Average
5       Average 
```

我正在搜索的 SQL 语句的输出是：

**输出**：

```
PersonID,   MostCommonRating
Adam        Good
Ben         Good
Caitlin     Average 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-16T14:42:53.920

## 初步评论

请学习使用显式 JOIN 表示法，而不是旧的（1992 年之前）隐式连接表示法。

老款式：

```
SELECT transactionTable.rating as MostCommonRating 
FROM personTable, transactionTable 
WHERE personTable.transactionid = transactionTable.transactionid 
AND personTable.personid = 1
GROUP BY transactionTable.rating 
ORDER BY COUNT(transactionTable.rating) desc 
LIMIT 1 
```

首选风格：

```
SELECT transactionTable.rating AS MostCommonRating 
  FROM personTable
  JOIN transactionTable 
    ON personTable.transactionid = transactionTable.transactionid 
 WHERE personTable.personid = 1
 GROUP BY transactionTable.rating 
 ORDER BY COUNT(transactionTable.rating) desc 
 LIMIT 1 
```

每个 JOIN 都需要一个 ON 条件。

此外，`personID`数据中的值是字符串，而不是数字，因此您需要编写

```
 WHERE personTable.personid = "Ben" 
```

例如，让查询在显示的表上工作。

* * *

## 主要答案

您正在寻找聚合的聚合：在这种情况下，是计数的最大值。因此，任何通用解决方案都将涉及 MAX 和 COUNT。您不能将 MAX 直接应用于 COUNT，但可以将 MAX 应用于子查询中的列，而该列恰好是 COUNT。

使用测试驱动的查询设计 - TDQD 构建查询。

### 选择人员和交易评级

```
SELECT p.PersonID, t.Rating, t.TransactionID
  FROM PersonTable AS p
  JOIN TransactionTable AS t
    ON p.TransactionID = t.TransactionID 
```

### 选择人员、评分和评分出现次数

```
SELECT p.PersonID, t.Rating, COUNT(*) AS RatingCount
  FROM PersonTable AS p
  JOIN TransactionTable AS t
    ON p.TransactionID = t.TransactionID
 GROUP BY p.PersonID, t.Rating 
```

这个结果将成为一个子查询。

### 查找此人获得任何评分的最大次数

```
SELECT s.PersonID, MAX(s.RatingCount)
  FROM (SELECT p.PersonID, t.Rating, COUNT(*) AS RatingCount
          FROM PersonTable AS p
          JOIN TransactionTable AS t
            ON p.TransactionID = t.TransactionID
         GROUP BY p.PersonID, t.Rating
       ) AS s
 GROUP BY s.PersonID 
```

现在我们知道每个人的最大计数是多少。

## 所需结果

为了得到结果，我们需要从子查询中选择具有最大计数的行。请注意，如果某人有 2 个好和 2 个差的评级（并且 2 是该人的同一类型的最大评级数），则将为该人显示两条记录。

```
SELECT s.PersonID, s.Rating
  FROM (SELECT p.PersonID, t.Rating, COUNT(*) AS RatingCount
          FROM PersonTable AS p
          JOIN TransactionTable AS t
            ON p.TransactionID = t.TransactionID
         GROUP BY p.PersonID, t.Rating
       ) AS s
  JOIN (SELECT s.PersonID, MAX(s.RatingCount) AS MaxRatingCount
          FROM (SELECT p.PersonID, t.Rating, COUNT(*) AS RatingCount
                  FROM PersonTable AS p
                  JOIN TransactionTable AS t
                    ON p.TransactionID = t.TransactionID
                 GROUP BY p.PersonID, t.Rating
               ) AS s
         GROUP BY s.PersonID
       ) AS m
    ON s.PersonID = m.PersonID AND s.RatingCount = m.MaxRatingCount 
```

如果您也想要实际的评分计数，那么很容易选择。

这是一段相当复杂的 SQL。我不想尝试从头开始写。确实，我可能不会打扰；我会逐步开发它，或多或少如图所示。但是因为我们在将子查询用于更大的表达式之前已经对它们进行了调试，所以我们可以对答案充满信心。

### WITH子句

请注意，标准 SQL 提供了一个 WITH 子句作为 SELECT 语句的前缀，命名一个子查询。（它也可以用于递归查询，但我们在这里不需要。）

```
WITH RatingList AS
     (SELECT p.PersonID, t.Rating, COUNT(*) AS RatingCount
        FROM PersonTable AS p
        JOIN TransactionTable AS t
          ON p.TransactionID = t.TransactionID
       GROUP BY p.PersonID, t.Rating
     )
SELECT s.PersonID, s.Rating
  FROM RatingList AS s
  JOIN (SELECT s.PersonID, MAX(s.RatingCount) AS MaxRatingCount
          FROM RatingList AS s
         GROUP BY s.PersonID
       ) AS m
    ON s.PersonID = m.PersonID AND s.RatingCount = m.MaxRatingCount 
```

这样写起来更简单。不幸的是，MySQL 还不支持 WITH 子句。

* * *

上面的 SQL 现在已经针对在 Mac OS X 10.7.4 上运行的 IBM Informix Dynamic Server 11.70.FC2 进行了测试。该测试暴露了初步评论中诊断的问题。主要答案的 SQL 可以正常工作，无需更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-18T13:59:02.080

`max`这是对 MySQL 中的聚合函数对 varchars 进行词法排序（以及对整数/浮点数的预期数字排序）这一事实的一种有点粗俗的滥用：

```
SELECT 
  PersonID, 
  substring(max(concat(lpad(c, 20, '0'), Rating)), 21) AS MostFrequentRating 
FROM (
    SELECT PersonID, Rating, count(*) c 
    FROM PERSONTABLE INNER JOIN TRANSACTIONTABLE USING(TransactionID) 
    GROUP BY PersonID, Rating
) AS grouped_ratings 
GROUP BY PersonID; 
```

这给出了所需的：

```
+----------+--------------------+
| PersonID | MostFrequentRating |
+----------+--------------------+
| Adam     | Good               |
| Ben      | Good               |
| Caitlin  | Average            |
+----------+--------------------+ 
```

（请注意，如果每个人有多种模式，它将选择具有最高字母条目的模式，因此 - 几乎是随机的 - 好而不是坏，坏而不是平均）

您应该能够`max`通过检查以下内容来查看正在运行的内容：

```
SELECT PersonID, Rating, count(*) c, concat(lpad(count(*), 20, '0'), Rating) as LexicalMaxMe 
FROM PERSONTABLE INNER JOIN TRANSACTIONTABLE USING(TransactionID) 
GROUP BY PersonID, Rating
ORDER BY PersonID, c DESC; 
```

哪个输出：

```
+----------+---------+---+-----------------------------+
| PersonID | Rating  | c | LexicalMaxMe                |
+----------+---------+---+-----------------------------+
| Adam     | Good    | 2 | 00000000000000000002Good    |
| Adam     | Bad     | 1 | 00000000000000000001Bad     |
| Ben      | Good    | 2 | 00000000000000000002Good    |
| Ben      | Average | 1 | 00000000000000000001Average |
| Caitlin  | Average | 2 | 00000000000000000002Average |
| Caitlin  | Good    | 1 | 00000000000000000001Good    |    
+----------+---------+---+-----------------------------+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-20T12:26:22.100

对于使用 Microsoft SQL Server 的任何人：您可以创建自定义聚合函数以获得最常见的值。Ahmed Tarek Hasan 的这篇博文的示例 2 描述了如何做到这一点：

[http://developmentsimplyput.blogspot.nl/2013/03/creating-sql-custom-user-defined.html](http://developmentsimplyput.blogspot.nl/2013/03/creating-sql-custom-user-defined.html)

# html - 为什么我的 3d 转换 div 被剪裁，即使父元素设置为溢出：可见？

> ID：12446374
> 
> 赞同：0
> 
> 时间：2012-09-16T11:10:17.047
> 
> 标签：html, css, css-transforms

我在网站侧边栏的另一个 div 中有一个 div。我对内部 div 应用了变换。内部 div 按预期进行转换。然而，内部 div 并没有伸出外部 div，而是看起来像父 div`overflow: hidden`应用了属性并被剪裁了。这是为什么？

**样式：**

```
div#outer{
    float: left;
    width: 200px;
    -webkit-perspective: 250px;
    overflow: visible;
    position: relative;
    top: 0;
    left: 0;
}

div.inner {
    z-index: 1;
    -webkit-transform: matrix3d(
      0.9109, 0, -0.103279, 0,·
      0, 1, 0, 0,·
      0.203279, 0, 0.2109, 0,
      0, 0, 0, 1);
} 
```

**的HTML：**

```
<div id="#outer">
  <div class="inner">
    Inner Div
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T12:04:03.323

尝试删除外部 id 值前面的**# 。**

```
<div id="outer">
  <div class="inner">
    Inner Div
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T12:20:56.477

多哈。父母的父母已经`overflow:hidden`设置，剪辑元素。无论如何感谢您的帮助！

# php - 在codeigniter中使用hmvc时没有加载routes.php文件？

> ID：12446377
> 
> 赞同：3
> 
> 时间：2012-09-16T11:10:53.943
> 
> 标签：php, codeigniter, routing, hmvc, codeigniter-routing

我有 hmvc 设置并且工作正常，

我有一个画廊模块。

图库模块分为三个控制器，其结构如下：

```
/modules/gallery/
/modules/gallery/config/
/modules/gallery/helpers/
/modules/gallery/controllers/
/modules/gallery/controllers/gallery.php
/modules/gallery/controllers/galleries.php
/modules/gallery/controllers/images.php
/modules/gallery/models/
/modules/gallery/models/galleriesmodel.php
/modules/gallery/models/imagesmodel.php
/modules/gallery/views/dashboard.tpl
/modules/gallery/views/galleries/dashboard.tpl
/modules/gallery/views/images/dashboard.tpl 
```

无论如何，我的`images.php`控制器中有一个名为`list_items`

所以我想将网址
[http://example.com/gallery/images/list](http://example.com/gallery/images/list)映射到
[http://example.com/gallery/images/list_items](http://example.com/gallery/images/list_items)

所以我想，甜蜜的，我会在`/modules/gallery/config/routes.php`里面添加一个带有路线的。

但似乎这些路线没有被包括在内。

包含来自的路线`/application/config/routes.php`，如果我`die('loaded')`在模块`routes.php`中放入 a 它确实会杀死脚本，

但是跑步

`print_r($this->router)`从其中一个控制器不显示来自模块的任何路由`routes.php`。

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T06:52:50.237

据我所知，

HMVC 仅在每个模块内查找请求的控制器，具有不同的层次模型，但从不读取模块内使用 routes.php 的路由覆盖。

`MX_Router::locate`调查它永远不会`routes.php`在任何模块中寻找。

它也不会覆盖在配置文件夹`CI_Router::_set_routing`中查找的内容。`routes.php`

您必须覆盖`CI_Router::_set_routing`并读取`config/router.php`每个可用模块，以便您的模块路由覆盖工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T13:08:00.483

Broncha 给你指路，我给你看代码。**我使用这个解决方案：**

您必须在 MY_Router 类 ( ) 中编辑`_set_routing()`或`system/core/Router.php`扩展此方法（更好`third_party/Router.php`）。

现在它应该总是加载`module/config/routes.php`...... *（大约在第 140 行）*

```
// Load the routes.php file.
        if (defined('ENVIRONMENT') AND is_file(APPPATH.'config/'.ENVIRONMENT.'/routes.php'))
        {
            include(APPPATH.'config/'.ENVIRONMENT.'/routes.php');
        }
        elseif (is_file(APPPATH.'config/routes.php'))
        {
            include(APPPATH.'config/routes.php');
        }

        // Include routes every modules
        $modules_locations = config_item('modules_locations') ? config_item('modules_locations') : FALSE;
        if(!$modules_locations)
        {
            $modules_locations = APPPATH . 'modules/';
            if(is_dir($modules_locations))
            {
                $modules_locations = array($modules_locations => '../modules/');
            }
            else
            {
                show_error('Modules directory not found');
            }
        }
        foreach ($modules_locations as $key => $value)
        {
            if ($handle = opendir($key))
            {
                while (false !== ($entry = readdir($handle)))
                {
                    if ($entry != "." && $entry != "..")
                    {
                        if(is_dir($key.$entry))
                        {
                            $rfile = Modules::find('routes'.EXT, $entry, 'config/');
                            if($rfile[0])
                            {
                                include($rfile[0].$rfile[1]);
                            }
                        }
                    }
                }
                closedir($handle);
            }
        } 

        $this->routes = ( ! isset($route) OR ! is_array($route)) ? array() : $route;
        unset($route); 
```

我希望它会有所帮助...

# java - 使用hadoop时如何使用logger api编写java日志文件

> ID：12446379
> 
> 赞同：5
> 
> 时间：2012-09-16T11:11:06.723
> 
> 标签：java, logging, hadoop

我写了一个我想调试的 map reduce 代码。

为此，我不能使用标准输出，因为 Hadoop 平台不会将其打印到屏幕上，除非发生错误。

相反，我尝试使用记录器来创建日志文件。

我使用处理程序将其拆分为两个文件，不幸的是，“严重”日志文件显示为空，而通用日志文件仅记录在主线程中发生的事情，而不是在 map reduce 函数中发生的事情。

**问题如下：**

hadoop 和日志文件有问题还是我的记录器配置有问题？如果是这样如何纠正它。

日志配置代码：我为整个应用程序使用一个记录器（这次是根记录器）

```
public static Logger configureLogging() 
    {
        try
        {
            logger=Logger.getLogger("");
            //FileSystem hdfs=FileSystem.get(URI.create(Misc.S3FS),getConfiguration());
            logger.setLevel(Level.ALL);

            //StreamHandler handler=new StreamHandler(hdfs.create(new Path(Misc.LOGS_PATH+"mylog.log")),new SimpleFormatter());
            FileHandler handler=new FileHandler(Misc.LOGS_PATH+"mylog.xml",true);   
            FileHandler severeHandler=new FileHandler(Misc.LOGS_PATH+"mylogSevere.xml",true);
            severeHandler.setLevel(Level.INFO);
            logger.addHandler(handler);
            logger.addHandler(severeHandler);

        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
        return logger;

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T14:21:20.253

Hadoop 带有预配置的 log4j。您所要做的就是导入两个类：

```
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory; 
```

现在你可以在你的映射器、reducers 和任何你想要的地方定义记录器：

```
private static final Log LOG = LogFactory.getLog(MyClass.class); 
```

并记录您需要的内容：

```
LOG.info("My message"); 
```

这些消息将在作业执行期间显示。您可以调整 log4j 配置

```
conf/log4j.properties 
```

# objective-c - 在 iOS 上制作二维表的最简单方法是什么？

> ID：12446381
> 
> 赞同：2
> 
> 时间：2012-09-16T11:11:22.783
> 
> 标签：objective-c, ios, nstableview

我想在 iOS 中创建一个二维表，类似于 NSTableView（不是 UITableView）。

用户不应该能够编辑它，并且单元格将只包含文本。

有没有可以制作这样一张桌子的课程？

**编辑：**

我根本不需要对用户交互的支持。

我只想要这样的东西：

```
aaaaaa | bbbbb | cccccc
1111   | fff   | fffffffff
222    | 4444  | 44444 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:49:22.860

正如其他人所提到的，已经准备好使用该任务的类，但另一方面，这些可能或可能不是您所需要的。

一般来说，你想要的是一种坚持`UITableView`（de/queing of cells）优点的方法。因此我的建议有点抽象，但通常是我过去使用的模式；

使用`UITableView`与`UITableViewCell`s 连接的 in 来覆盖行。现在，为了覆盖列，将`UITableViewCell`s 划分为图块，一旦`UITableView`要求您提供单元格 ( `cellForRowAtIndexPath`)，您就可以从图块中渲染单元格并将该行反馈给`UITableView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T11:16:29.720

查看[DTGridView](https://github.com/danielctull/DTGridView) - 它可能是您正在寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T11:19:51.403

好吧，我认为 a`GridView`会在你的情况下工作。您可以将每个网格视为一个单元格。

这是“简单”的一个（KKGridView）：

[http://maniacdev.com/2011/09/open-source-high-speed-interactive-ios-grid-view-component/](http://maniacdev.com/2011/09/open-source-high-speed-interactive-ios-grid-view-component/)

我还建议您看一下具有更多选项的更复杂的产品：

[https://github.com/AlanQuatermain/AQGridView](https://github.com/AlanQuatermain/AQGridView)

**编辑：**

好吧，这也是一个事实，那`AQGridView`就是“圣何塞 iPadDevCamp 2010 最佳开发人员工具/助手奖的获得者”。但是，正如我所说，它有点复杂。

# jquery - 淡出、替换图像和淡入

> ID：12446383
> 
> 赞同：0
> 
> 时间：2012-09-16T11:11:28.063
> 
> 标签：jquery

我在使用这个脚本时遇到了一些问题，希望能得到一些帮助以使其正常工作。首先我淡出旧图像，然后加载同时淡入的新图像。当我使用淡入时，新图像不会被替换！？

```
$("#image2").click(function () {
    $("#portfolio").fadeOut('slow', function () {
        $("#portfolio").attr("src", "Images/Portfolio/portfolio_strv.jpg", function () {
            $(this).fadeIn(400);
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T11:14:46.430

```
$("#image2").click(function() {
    $("#portfolio").fadeOut('slow', function() {
        $(this)  // this refers to #portfolio
            .attr("src", "Images/Portfolio/portfolio_strv.jpg") // change src
            .load(function() { 
                // after load complete 
                // fade in the image
                $(this).fadeIn(400);
        });
    });
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T11:16:44.707

需要绑定图片的onload事件，然后加载图片。

```
$("#image2").click(function () {
    $("#portfolio").fadeOut('slow', function () {
        $(this).load(function () {
            $(this).fadeIn(400);
        }).attr("src", "Images/Portfolio/portfolio_strv.jpg");
    });
}); 
```

# java - 隐藏组件时停止 Swing 计时器

> ID：12446385
> 
> 赞同：7
> 
> 时间：2012-09-16T11:12:05.983
> 
> 标签：java, swing, animation, timer

我有一个 Swing 计时器 ( [javax.swing.Timer](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html) )，用于在自定义 Swing 组件中执行一些动画。

但是，这会导致问题 - 特别是即使在所有窗口都关闭之后，它似乎也会因为实时计时器线程而停止应用程序终止。当看不到动画时，避免在隐藏对象上运行计时器的开销也会很好。

理想情况下，我想做以下事情：

*   组件隐藏时停止计时器
*   只要组件变得可见，就重新开始计时

这可能吗（当然是以线程安全的方式！）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T14:38:48.740

我对你的第一个前提持怀疑态度：这个简单[的反例](https://stackoverflow.com/a/3078354/230513)表明运行`javax.swing.Timer`并不排除`EXIT_ON_CLOSE`. package-private, shared`javax.swing.TimerQueue`启动一个守护线程，它允许[*Program Exit*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.8)。您可能不愿意*依赖*此实现细节，这是可以理解的，但可能值得寻找程序无法退出的另一个原因。

如果遵循@kleopatra on `AncestorListener`; 它应该允许您`Timer`根据需要控制。组件动画的占空比通常相当轻，通常以渲染为主；当组件不可见时，后者的开销很小。可能值得进行分析以验证建议的优化是否值得付出努力。如果是这样，请考虑`WindowListener`在非活动或图标化窗口中最小化活动。

附录：一个现已删除的答案建议覆盖`setVisible()`以调节计时器。虽然表面上很吸引人，但这种方法很脆弱并且扩展性很差。侦听器方法利用了[Swing 架构](http://www.oracle.com/technetwork/java/architecture-142923.html)中常用的[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T06:40:15.413

事件队列应该安静一秒钟，以便初始化关机。这是 AWTAutoShutdown 类中的硬编码值。

因此，如果您的摇摆计时器不断生成事件，相隔不到一秒，这将使应用程序无法终止。

看这个例子（下）。它不会终止，因为线程，即使它被标记为守护进程，也会不断向队列中添加事件。如果我们将睡眠时间增加到 1500（1.5 秒）——它会愉快地终止。

```
public static void main(String[] args)
{
    Thread thread = new Thread(new Runnable()
    {
        @Override
        public void run()
        {
            while (true)
            {
                // Submit an empty event to the queue
                EventQueue.invokeLater(new Runnable()
                {
                    @Override
                    public void run()
                    {
                    }
                });
                try
                {
                    Thread.sleep(500);
                }
                catch (InterruptedException e)
                {
                    throw new IllegalStateException(e);
                }
            }
        }
    });
    thread.setDaemon(true);
    thread.start();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-02T08:22:35.750

我们这样做：

```
 private static final class DisplayabilityListener implements HierarchyListener {
  private final JComponent component;
  private final Timer timer;

  private DisplayabilityListener(JComponent component, Timer timer) {
     this.component = component;
     this.timer = timer;
  }

  @Override
  public void hierarchyChanged(HierarchyEvent e) {
     if ((e.getChangeFlags() & HierarchyEvent.DISPLAYABILITY_CHANGED) > 0) {
        if (component.isDisplayable()) {
           timer.start();
        } else {
           timer.stop();
        }
     }
  } 
```

}

# c# - T4 模板中无法识别 EnvDTE 类型

> ID：12446386
> 
> 赞同：3
> 
> 时间：2012-09-16T11:12:20.353
> 
> 标签：c#, t4, envdte

我正在尝试跟上 T4 模板的速度。我找到了以下示例（[此处](http://www.olegsych.com/2008/07/t4-template-for-generating-sql-view-from-csharp-enumeration/)）：

```
<#@ template hostspecific="True" #>
<#@ output extension="txt" #>
<#@ include file="T4Toolbox.tt" #>
<#@ import namespace="EnvDTE" #>
<#
  CodeEnum enumeration = GetEnum("ContactType.cs");
  WriteLine("Found enumeration " + enumeration.Name);
  foreach (CodeElement element in enumeration.Children)
  {
    CodeVariable value = element as CodeVariable;
    if (value != null)
      WriteLine("… found value " + value.Name);
  }
#>
<#+
  private CodeEnum GetEnum(string enumFile)
  {
    ProjectItem projectItem = TransformationContext.FindProjectItem(enumFile);
    FileCodeModel codeModel = projectItem.FileCodeModel;
    return FindEnum(codeModel.CodeElements);
  }

  private CodeEnum FindEnum(CodeElements elements)
  {
    foreach (CodeElement element in elements)
    {
      CodeEnum enumeration = element as CodeEnum;
      if (enumeration != null)
        return enumeration;
      enumeration = FindEnum(element.Children);
      if (enumeration != null)
        return enumeration;
    }
    return null;
  }
#> 
```

不知何故，EnvDTE 命名空间中的所有类型都无法识别。我正在使用 Visual T4 扩展。所有 EnvDTE 类型都用红色下划线。模板没有运行，我得到一个错误列表，例如：

```
The type or namespace ... could not be found (are you missing a using directive or assembly reference?) 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:36:33.777

尝试像这样使用

```
 DTE env = GetVSEnvironment(); 
```

……

```
private DTE GetVSEnvironment() {
            DTE env = null;
            var provider = Host as IServiceProvider;
            if (provider != null) {
                env = provider.GetService(typeof(DTE)) as DTE;
            }

            if (env == null) {
                throw new InvalidOperationException("Template must be executed from Visual Studio");
            }

            return env;
        } 
```

现在你做`env.blablabla` 例如：`env.Solution.FindProjectItem(Host.TemplateFile).ContainingProject;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:07:36.007

嗯，我认为以下包括

```
<#@ template hostspecific="True" #> 
```

会拉入大会，但也许不会。首先，尝试将以下内容添加到模板的顶部。

```
<#@ Assembly Name="EnvDTE" #> 
```

如果这不起作用，请尝试添加完整路径。对我来说，它

```
<#@ Assembly Name="C:\Program Files (x86)\Common Files\microsoft shared\MSEnv\PublicAssemblies\envdte.dll" #> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T14:52:23.640

您是否在项目中添加了对 ENVDTE 和 ENVDTE80（90 等）的引用？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-13T04:27:13.417

添加这一行这对我有用：

```
<#@ Assembly Name="EnvDTE" #> 
```

# android - 撤消/重做位图

> ID：12446388
> 
> 赞同：1
> 
> 时间：2012-09-16T11:12:41.417
> 
> 标签：android

我想对我的画图进行撤消/重做。我看过教程，但不知道我是怎么做到的。有任何想法吗。

第一部分： http: [//pastebin.com/chYbqT37](http://pastebin.com/chYbqT37) 和第二 部分[http://pastebin.com/LECPZttY](http://pastebin.com/LECPZttY)

我做了湖，但什么也没做：

```
public void back() {

    GRAPHICOBJECTS.remove(GRAPHICOBJECTS.size()-1);

    //invalidate();

    } 
```

如果您能帮助我，我将不胜感激:)

# c# - XML XNA 如何忽略一个元素

> ID：12446391
> 
> 赞同：0
> 
> 时间：2012-09-16T11:13:12.283
> 
> 标签：c#, xml, xna, linq-to-xml

我正在尝试制作一个允许我加载多种类型敌人的系统。一种类型的敌人比其他类型的敌人需要更多的元素。举个例子。

```
XDocument doc = XDocument.Load("Levels\\Level"+ levelIndex + "\\Waves" + levelIndex + ".xml");

List<WaveInfo> waveInfo = new List<WaveInfo>();

        waveInfo = (from wave in doc.Descendants("wave")
                          select new WaveInfo()
                          {
                          enemiesInfo = (from i in wave.Descendants("enemy")
                                     select new EnemyInfo()
                                     {
                                         type = Convert.ToInt32(i.Element("type").Value),
                                         colour = Convert.ToInt32(i.Element("colour").Value),
                                         speed = (float)Convert.ToDouble(i.Element("speed").Value),
                                         spawnTime = (float)Convert.ToDouble(i.Element("spawnTime").Value),
                                     }).ToList()
                          }).ToList(); 
```

这工作正常，可以加载两种类型的敌人。但在我的 xml 中，我必须向不需要它的敌人类型添加颜色元素。我想要发生的是，对于一种类型的敌人，我可以不用费心编写颜色标签，而序列化程序只是将其处理为空值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:07:08.890

这应该有效：

```
colour = i.Element("colour") != null ?
        Convert.ToInt32(i.Element("colour").Value) : 0, 
```

或者，更好的是，您可以使用[显式运算符](http://www.hanselman.com/blog/ImprovingLINQCodeSmellWithExplicitAndImplicitConversionOperators.aspx)，例如[this one](http://msdn.microsoft.com/en-au/library/bb340386.aspx)，如下所示：

```
colour = (int?)i.Element("colour") ?? 0, 
```

# asp.net-mvc - 动态添加的链接操作会产生“此请求已被阻止...”错误

> ID：12446397
> 
> 赞同：0
> 
> 时间：2012-09-16T11:14:24.190
> 
> 标签：asp.net-mvc, json, jquery

当我在控制器操作中添加类别时，我返回 JSON 对象：

```
return Json(new { categoryName = category.Name, isPrimary = isPrim ? "1" : "-1", categoryId = categoryId }, JsonRequestBehavior.AllowGet); 
```

在 JS 处理程序函数中，我在页面上添加项目：

```
...
var totalLink = "<li style='color: #bbbbbb;'>" + result.categoryName + "<a class='removeCategoryButton' href='#lnk#'>remove</a></li>";

                            var lnk = '@Url.Action("RemoveCategoryFromLocation", "Location", new{locationId = Model.Location.TicketId,  categoryId=-1})';

                            totalLink = totalLink.replace('#lnk#', lnk);
                            totalLink = totalLink.replace('-1', result.categoryId);

                            $('#otherCategories').append(totalLink);
... 
```

当我单击删除链接时，我调用以下函数：

```
$(function () {
            $('.removeCategoryButton').click(function (event) {
                event.preventDefault();
                $.ajax({
                    url: this.href,
                    type: 'POST',
                    context: this,
                    success: function (result) {
                        if(result.categoryName == 1) {
                            $(this).closest('li').remove();
                        }
                    }
                });
                return false;
            });
        }); 
```

但我收到以下错误：

```
This request has been blocked because sensitive information could be disclosed to third party web sites when this is used in a GET request. To allow GET requests, set JsonRequestBehavior to AllowGet. 
```

仅当我添加项目并希望在添加页面后立即将其删除时才会发生此错误。如果我刷新页面并单击删除链接，它可以正常工作。
请注意，当我从上述类别中删除错误时，调用它只是出于某种原因弹出此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:05:16.160

您似乎正在动态添加删除链接，但是`.click`当 DOM 准备好时，您只订阅了一次事件处理程序。因此，请确保您以[*活泼的方式进行*](http://api.jquery.com/live/)操作。但是由于不推荐使用 .live() 方法，根据您使用的 jQuery 版本，您应该使用其中一个[`.delegate()`](http://api.jquery.com/delegate/)或[`.on()`](http://api.jquery.com/on/)方法。

因此，对于最新版本的 jQuery，建议使用`.on()`：

$(document).on(事件、选择器、数据、处理程序);

```
$(document).on('click', '.removeCategoryButton', function () {
    $.ajax({
        url: this.href,
        type: 'POST',
        context: this,
        success: function (result) {
            if(result.categoryName == 1) {
                $(this).closest('li').remove();
            }
        }
    });
    return false;
}); 
```

请注意，您不再需要将其包装在`document.ready`回调中。

# c# - 向实体添加新的构造函数

> ID：12446398
> 
> 赞同：4
> 
> 时间：2012-09-16T11:14:29.040
> 
> 标签：c#, .net, entity-framework, partial-classes

我正在使用 EF4.3。这是我的第一个项目，所以我边走边学。

在某些情况下，我需要为实体实现额外的构造函数。我创建了一个额外的部分类来执行此操作，因此实体用户将具有关联的类 User2。

我注意到 EF 总体上不会创建构造函数，但是有这样的实例：

```
public partial class User
{
    public User()
    {
        this.BookmarkedDeals = new HashSet<BookmarkedDeal>();
        this.BookmarkedStores = new HashSet<BookmarkedStore>();
    }

    public System.Guid UserId { get; set; }
    public int UserStatusId { get; set; }
    public int UserRoleId { get; set; }
    public System.DateTime CreatedOn { get; set; }
    public System.DateTime LastVisitedOn { get; set; }

    public virtual ICollection<BookmarkedDeal> BookmarkedDeals { get; set; }
    public virtual ICollection<BookmarkedStore> BookmarkedStores { get; set; }
    public virtual Subscriber Subscriber { get; set; }
} 
```

这让我有点担心，因为它很容易通过设计器添加导航属性，而基本构造函数中的代码错过了。

```
 public User()
    {
        this.BookmarkedDeals = new HashSet<BookmarkedDeal>();
        this.BookmarkedStores = new HashSet<BookmarkedStore>();
    } 
```

我的问题是，我是否需要从我的其他构造函数中调用基本构造函数，我是否应该将代码（：this User()）在所有情况下调用我的基本构造函数作为保障？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T11:38:19.277

EF（数据库优先或模型优先）创建那些默认构造函数......

```
public User()
{
    this.BookmarkedDeals = new HashSet<BookmarkedDeal>();
    this.BookmarkedStores = new HashSet<BookmarkedStore>();
} 
```

...仅作为实例化导航集合以保护您免受`NullReferenceException`s 的帮助。但这不是必需的。如果您`User`从数据库加载一个实体，包括EF，无论如何都会实例化集合`BookmarkedDeals`。`BookmarkedStores`如果您`User`自己创建一个，如果构造函数不存在，您只需要手动实例化集合：

```
var user = new User { BookmarkedDeals = new HashSet<BookmarkedDeal>() };
user.BookmarkedDeals.Add(new BookmarkedDeal()); 
```

如果您添加一个新的构造函数，我将调用默认构造函数以使所有构造函数之间的集合实例化保持一致。但我认为它必须是`this`，不是`base`因为两个构造函数都在同一个类中，而不是在继承层次结构中：

```
public User(SomeType SomeParameter) : this()
{
    //Do somthing with SomeParameter...
} 
```

# java - struts2 对话和验证

> ID：12446402
> 
> 赞同：2
> 
> 时间：2012-09-16T11:15:00.747
> 
> 标签：java, struts2, validation, bean-validation, conversation-scope

我正在研究一个具有相互依赖形式的 struts2 项目。我找到了 struts2-conversation，逐步完成了他们的[简单示例](http://code.google.com/p/struts2-conversation/wiki/EclipseAndMavenGuide) 并理解了到目前为止的对话机制（如果我有错误，请纠正我）：

*   Controller 映射在 struts.xml 中
*   它拥有可序列化的 ConversationContext 和 Storing-Service
*   ConversationContext 保存通过命名约定映射到表单上的 POJO

现在我的问题是在哪里放置验证？

在这个结构中，控制器只是一个扩展 ConversationSupport 的控制器，因此 ActionSupport 提供了 validate、prepare 和 addField- & ActionError 方法。但是在控制器内验证意味着验证整个上下文，这并不能真正解决问题。

我尝试通过 POJO 中的注释进行验证，在如上所述的上下文中，这给了我一些 NullPointerException 好像上下文没有刷新，我认为 struts2 的 xml 验证方法太僵硬了。（顺便说一句，如何让生成的 javascript 在提供服务之前缩小？为什么有这么多选项？）

Mark 的对话拦截器方法也出现了[类似的问题](http://www.vitarara.org/cms/struts_2_cookbook/using_a_conversation_scope#comment-1958)，这是我没有真正得到的解决方法。也许你可以在那里帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:08:25.507

如果您想在模型类上使用注释，它可以与插件配合使用（与其他验证方法一样）。

要验证您的模型，请添加`@VisitorFieldValidator`到`getModel()`控制器中的方法。在示例应用程序中，您还将添加`@VisitorFieldValidator`到`getContact()`and`getPreferences()`方法。然后，您可以在要验证的字段上使用[验证注释](http://struts.apache.org/2.x/docs/annotations.html)。

示例中的服务只是作为在 Struts2 控制器中使用注入服务的简单示例，以及如何轻松与对话框架集成，但它不是直接相关或不需要的（我建议使用 Spring、Guice ，或 CDI 用于现实世界中的依赖注入）。

ConversationContext 类主要供框架内部使用。您应该能够通过使用注释和约定来避免与之交互。除非你只是想冒险。

要在示例应用程序中使用 XML 验证，您必须更改包名称以删除“struts2”字样，以便 Struts2 资源加载工具加载 XML。

# objective-c - 用户使用 UISegmentedControl 更改显示单位后立即更改显示单位

> ID：12446403
> 
> 赞同：0
> 
> 时间：2012-09-16T11:15:20.107
> 
> 标签：objective-c, ios, xcode, uisegmentedcontrol

我有一个 UISegmentedControl 来处理温度单位 (ºC/ºF) 的设置。
它可以正常工作，但如果用户更改设置，除非用户导航到另一个视图控制器然后返回到有问题的视图控制器，否则显示的单元不会更改（刷新自身）。

我正在使用

```
- (void)viewWillAppear:(BOOL)animated
{
//Gets user setting choice for Fahrenheit or Celsius
NSUserDefaults *preferences = [NSUserDefaults standardUserDefaults];
temperatureSetting = [[preferences valueForKey:@"temperature setting"]intValue];
//For getting the current value of temperature from the JSON data
NSInteger temp = [[conditions objectForKey:@"temperature"]intValue];
//For checking the user's setting to display either Fahrenheit or Celsius
if (temperatureSetting == 0) {
    temp = (temp * 1.8) + 32;
    temperatureLabel.text = [NSString stringWithFormat:@"%i°F", temp];
} else {
    temperatureLabel.text = [NSString stringWithFormat: @"%iºC", temp];
}
}

- (IBAction)temperatureSelection:(UISegmentedControl *)sender {
//Used to save settings
NSUserDefaults *temperaturePreference = [NSUserDefaults standardUserDefaults];
//To check which segment is selected and save the value but also remember it
if ([sender selectedSegmentIndex] == 0) {
    [temperaturePreference setInteger:0 forKey:@"temperature setting"];
    [selectedSegment setInteger:0 forKey:@"segment setting"];
} else if ([sender selectedSegmentIndex] == 1) {
    [temperaturePreference setInteger:1 forKey:@"temperature setting"];
    [selectedSegment setInteger:1 forKey:@"segment setting"];
}
//To make sure the setting is saved
[temperaturePreference synchronize];
[selectedSegment synchronize];

} 
```

如何在用户更改后立即更改显示单位？
谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:31:28.090

将里面的代码`viewWillAppear:`移到一个单独的方法中。当用户更改设置时调用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T11:39:50.493

尝试在方法结束之前添加该行代码`- (IBAction)temperatureSelection:(UISegmentedControl *)sender`。

```
- (IBAction)temperatureSelection:(UISegmentedControl *)sender{
//..etc
temperatureSetting = [[temperaturePreferences valueForKey:@"temperature setting"]intValue];
if (temperatureSetting == 0) {
 temp = (temp * 1.8) + 32;
 temperatureLabel.text = [NSString stringWithFormat:@"%i°F", temp];
} else {
 temperatureLabel.text = [NSString stringWithFormat: @"%iºC", temp];
}
 [self.view setNeedsDisplayInRect:temperatureLabel.frame];//probably is not needed it forces the view to redraw itself as it mark as dirty
} 
```

# c++ - C++ 程序中的 TCHAR 和未解析的外部符号 (LNK2019) 错误？

> ID：12446404
> 
> 赞同：1
> 
> 时间：2012-09-16T11:15:22.467
> 
> 标签：c++, winapi, lnk2019, tchar

我的项目有两个 cpp 文件和一个头文件。一个 cpp 文件包含一个类的实现，它的声明在头文件中。另一个 cpp 文件包含该`int main`函数。

该类的构造函数之一包括一个参数，它在链接器错误`TCHAR`中被引用为未解析的函数。`LNK2019`

我正在使用 Visual Studio 2010，并且我已将`Character set`项目属性中的选项设置为，`Not Set`以便我可以在`char`和`wchar_t`使用宏`UNICODE`之间进行选择。`_UNICODE`

目前我已经在我的主 cpp 文件的开头定义了这些，并且头文件包含在这两个之后。但是，如果我在头文件的开头定义这些宏，则项目可以完美编译。

有没有办法解决这个问题？还是我必须对类进行硬编码才能使用`char`or `wchar_t`？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T15:48:32.697

您收到链接器错误，因为您在 main.cpp 中定义`UNICODE`/`_UNICODE` 宏，但不在类的实现 .cpp 中。因此，当 main.cpp 包含您的类的头文件时，它会显示`TCHAR`为`wchar_t`，但是当您的实现 .cpp 包含您的头文件时，它会显示`TCHAR`为`char`。您的不匹配导致链接器错误，因为 main.cpp 调用了`wchar_t`您尚未实际实现的构造函数。

您应该寻找`UNICODE`/`_UNICODE`宏的存在，而不是手动定义它们。将“字符集”选项设置为 MBCS 或 Unicode，以便 IDE/编译器可以为您全局管理整个项目的宏。我不知道将其设置为“未设置”实际上做了什么，但这不是您在这种情况下真正需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T11:51:59.207

宏是显然让您感到困惑的预处理器结构。你的代码，即使你成功了，也会让其他人感到困惑。宏`UNICODE`和`_UNICODE`必须在定义之前`TCHAR`定义，在`TCHAR`使用之前定义它们为时已晚。最好将其留给您的项目设置。

将项目设置`Character Set`为`Unicode`，即 Windows 内部使用的字符集。然后`TCHAR`就是`wchar_t`API 调用宏`Something()`总是扩展为`SomethingW()`. 您可以在任何地方显式地使用`char`和`wchar_t`，代码的读者将确切地看到什么是什么，`TCHAR`对他们来说没有模糊和不清楚。

Windows API 函数`SomethingA()`只是包装器，`SomethingW()`因此大量使用 A 版本效率低下。如果您需要调用 API 函数`SomethingA()`，请明确执行，这样每个人都会看到您必须做一些低效的事情。

# java - 如何获得字符串中正则表达式的第一个匹配项？

> ID：12446405
> 
> 赞同：1
> 
> 时间：2012-09-16T11:15:22.633
> 
> 标签：java, android, regex, string, matcher

如何读取与我的模式匹配的第一个子字符串？我试过了

```
while (m.find()) {
              URL=(m.group(1));

            } 
```

调用中的1`group`应用程序崩溃，如果我什么都不放，我只会得到最后一个匹配项，我必须读取第一个匹配的字符串，我该怎么办？它给了我一个关于正则表达式的错误，但这很奇怪，因为在 () 之间没有 1，应用程序运行良好，并且不会给我任何关于我的正则表达式的错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:21:49.983

它是如何崩溃的？什么是正则表达式？`group(0)`是整个比赛，`group(i), i >0`如果有的话，会给你正则表达式中的捕获。还`while(m.find())`处理字符串，直到剩下任何匹配项。因此`find()`，如果您需要第一场比赛，请只打一次电话。

# regex - sed中的特殊字符

> ID：12446406
> 
> 赞同：7
> 
> 时间：2012-09-16T11:15:23.383
> 
> 标签：regex, sed, grep

有人知道特殊字符的完整列表`sed`是什么吗？

请不要给出这样的答案，它与 的特殊字符列表相同`grep`，因为这只是将我的问题转换为：有人知道特殊字符的完整列表`grep`是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T18:55:53.733

这取决于。严格来说，符合标准的 sed 只能使用标准规定[的](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_03)基本正则表达式：

BRE 特殊字符及其具有特殊含义的上下文如下：

`.[\` 句点、左方括号和反斜杠应该是特殊的，除非在括号表达式中使用（请参阅 RE 括号表达式）。包含前面没有反斜杠且不属于括号表达式的“[”的表达式会产生未定义的结果。

`*`星号应该是特殊的，除非在括号表达式中使用，作为整个 BRE 的第一个字符（在初始 '^' 之后，如果有的话），或作为子表达式的第一个字符（在初始 '^' 之后，如果任何）; 请参阅匹配多个字符的 BRE

`^`当用作锚（参见 BRE 表达式锚定）或作为括号表达式的第一个字符（参见 RE 括号表达式）时，抑扬符应该是特殊的

`$`美元符号在用作锚点时应是特殊的。

所以完整的列表是`.[\*^$`，但上下文很重要。此外，许多 sed 提供使用扩展正则表达式 (ERE) 的选项，这将扩展列表并更改字符特殊的上下文。例如，没有 ERE 的分组是使用`\(`and组成的`\)`，但有 ERE的`(`and`)`本身是特殊的，必须转义才能按字面意思匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T16:04:38.050

我认为这是字符 [\^$.|?*+() 的完整列表，sed 将以不同于普通字符的方式对其进行响应。

# prolog - Prolog 查找 N 个素数

> ID：12446407
> 
> 赞同：0
> 
> 时间：2012-09-16T11:15:39.877
> 
> 标签：prolog, primes

我对 Prolog 的递归函数有疑问。我相信我没有正确实施它，需要帮助。

我需要生成前 N 个素数并将其返回到列表中。生成素数不是问题，而是在列表中生成它是我遇到的问题。

这是相关代码的一部分：

```
genList(_, 0, _).
genList(X, N, PrimeList, PrimeList):-
    N > 0,
    isprime(X),
    X1 is X +1,
    N1 is N -1,
    genList(X1,N1,[X|PrimeList], [X|PrimeList]),!.
genList(X, N, PrimeList, PrimeList):-
    N>0,
    \+isprime(X),
    X1 is X + 1,
    genList(X1,N,PrimeList, PrimeList). 
```

这是我在 Prolog 解释器中输入的内容：

```
genList(1,N, [],L). 
```

对于第一行，我如何制作基本情况，以便何时`N=0`停止递归？它是否正确？

至于接下来的 2 个子句，我在逻辑编程方面难以思考。我绝对觉得这不是逻辑编程风格。

我想说的是，当`isPrime(X)`失败时，我们继续下一个数字而不保存任何内容，但是当`isPrime(X)`为真时，我们递归并继续下一个数字，保存`X`。

我如何在 Prolog 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T11:45:33.277

首先，如果您只需要两个，则您的主要谓词不需要 4 个参数。在这里你想要第一个素数的列表直到`N`。所以`N`列表的一个参数和一个参数就足够了：

```
primeList(N, L) :-
    % eventually in the body a call to a worker predicate with more arguments 
```

现在在这里，用这些术语解释您的逻辑：

```
primeList(N, [N|L]) :-
    % If we're not at the base case yet
    N > 0,
    % If N is a prime
    isPrime(N),
    NewN is N - 1,
    % Let's recurse and unifie N as the head of our result list in the head
    % of the predicate
    primeList(NewN, L).

primeList(N, L) :-
    % Same as above but no further unification in the head this time.
    N > 0,
    % Because N isn't a prime
    \+ isPrime(N),
    NewN is N - 1,
    primeList(NewN, L). 
```

为此，您必须添加基本案例

```
primeList(0, []). 
```

您可以通过以下方式重写它：

```
primeList(0, []) :- !.
primeList(N, [N|L]) :-
    isPrime(N),
    !,
    NewN is N - 1,
    primeList(NewN, L).
primeList(N, L) :-
    NewN is N - 1,
    primeList(NewN, L). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T05:55:06.873

这是您要写的内容：

```
genList(N, L) :- genList(2, N, L, []).

genList(X, N, L, Z):-  % L-Z is the result: primes list of length N
    N > 0 ->
      ( isprime(X) -> L=[X|T], N1 is N-1 ; L=T, N1 is N ),
      X1 is X + 1,
      genList(X1,N1,T,Z)
    ;
      L = Z. 
```

*if-then-else*结构体现了削减。你是对的，它本质上是一种*函数*式编程风格。

* * *

我们可以对其进行一些改动，禁止对 0 素数的请求（无论如何这都没有意义），这样我们也可以取回最后生成的素数：

```
genList(1, [2], 2) :- !.
genList(N, [2|L], PN) :- N>1, L=[3|_], N2 is N-2, gen_list(N2, L, [PN]).

gen_list(N, L, Z) :- L=[P|_], X is P+2, gen_list(X, N, L, Z).

gen_list(X, N, L, Z) :-  % get N more odd primes into L's tail
    N > 0 ->
      ( isprime(X) -> L=[_|T], T=[X|_], N1 is N-1 ; L=T, N1 is N ),
      X1 is X + 2,
      gen_list(X1,N1,T,Z)
    ;
      L = Z.           % primes list's last node 
```

运行：

```
?- genList(8,L,P).

L = [2, 3, 5, 7, 11, 13, 17, 19]
P = 19 
```

这也使我们能够从停止的点停止并继续生成素数，而不是从头开始：

```
?- L = [3|_], gen_list(8, L, Z),    Z=[P10|_],  writeln([2|L]), 
              gen_list(10, Z, Z2),  Z2=[P20],  writeln(Z).

[2, 3, 5, 7, 11, 13, 17, 19, 23, 29|_G1037]
[29,31,37,41,43,47,53,59,61,67,71]

P10 = 29
P20 = 71 
```

# jquery - jQuery CSS 背景图像声明？

> ID：12446409
> 
> 赞同：0
> 
> 时间：2012-09-16T11:15:45.607
> 
> 标签：jquery, css

这就是我所拥有的：

```
$("#list .active").closest('.header').css({
'background-color' : '#1a2e51',
'background-image' : '-webkit-gradient(linear, left top, left bottom, from(#2c3c6f), to(#071f31))',
'background-image' : '-webkit-linear-gradient(top, #2c3c6f, #071f31)',
'background-image' : '-moz-linear-gradient(top, #2c3c6f, #071f31)',
'background-image' : '-o-linear-gradient(top, #2c3c6f, #071f31)',
'background-image' : 'linear-gradient(to bottom, #2c3c6f, #071f31)'
}); 
```

在线示例：http: [//jsfiddle.net/qSfvK/](http://jsfiddle.net/qSfvK/)

但是，它不会向我显示渐变，因为我在 jQuery 中没有很好地编写它，那么该怎么做呢？

**编辑**

我可以使它在 CSS 中工作，但不能在 jquery 中工作，通过查看此链接了解我的意思：http:
[//jsfiddle.net/qSfvK/10/](http://jsfiddle.net/qSfvK/10/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:25:04.563

这不是 html 或您的选择器的问题，而是 css 映射函数的工作方式。在这种情况下，您不会向浏览器发送一个样式表，它可以解析并决定使用哪个背景语句。相反，jQuery 每次都会覆盖 background-image 属性，因此任何浏览器的最终 background-image 属性都是最后一个`'linear-gradient(to bottom, #2c3c6f, #071f31)'`. 您可以像我一样通过删除与浏览器不兼容的渐变线并重新运行小提琴来测试这一点。

解决这个问题的方法是添加 JavaScript 的条件行，根据正在使用的浏览器分配适当的 background-image 属性。

所以...

如果 Safari 4+，Chrome 1-9 ...

```
$("#list .active").closest('.header').css({
    'background-color' : '#1a2e51',
    'background-image' : '-webkit-gradient(linear, left top, left bottom, from(#2c3c6f), to(#071f31))'
});​ 
```

ELSE IF Safari 5.1+、移动版 Safari、Chrome 10+ ...

```
$("#list .active").closest('.header').css({
    'background-color' : '#1a2e51',
    'background-image' : '-webkit-linear-gradient(top, #2c3c6f, #071f31)'
});​ 
```

否则，如果 Firefox 3.6+ ...

```
$("#list .active").closest('.header').css({
    'background-color' : '#1a2e51',
    'background-image' : '-moz-linear-gradient(top, #2c3c6f, #071f31)'
});​ 
```

否则，如果 Opera 11.10+ ...

```
$("#list .active").closest('.header').css({
    'background-color' : '#1a2e51',
    'background-image' : '-o-linear-gradient(top, #2c3c6f, #071f31)'
});​ 
```

等等。

# php - Facebook Open Graph - 如何在 URL 中传递参数？

> ID：12446410
> 
> 赞同：0
> 
> 时间：2012-09-16T11:15:46.463
> 
> 标签：php, facebook, url, facebook-graph-api, facebook-javascript-sdk

如果我尝试将此 URL 传递到 Open Graph

```
$url = 'http://abc.com/index.php';
$facebook->api('/me/url_app:action','POST', array('something'=>$url)); 
```

一切正常。但是如果我尝试添加一些参数，比如

```
$url = 'http://abc.com/index.php?a=b&c=d';
$facebook->api('/me/url_app:action','POST', array('something'=>$url)); 
```

然后我会收到这个错误

```
Fatal error: Uncaught Exception: Object at URL 'http://abc.com/index.php?a=b&c=d' of type 'url_app:action' is invalid because the given value '' for property 'og:url' could not be parsed as type 'url'. thrown in _PATH_/base_facebook.php on line 1050 
```

为什么我不能在 URL 地址中添加一些参数？

**编辑**另外，这里是编码链接的 PHP 函数：

```
function encodeURIComponent($str) {
    $revert = array('%21'=>'!', '%2A'=>'*', '%27'=>"'", '%28'=>'(', '%29'=>')', '%3D'=>'=', '%3F'=>'?');
    return strtr(rawurlencode($str), $revert);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:38:41.393

您必须对您的网址进行 urlencode。

> $url = encodeURIComponent('http://abc.com/index.php?a=b&c=d');
> $facebook->api('/me/url_app:action','POST', array('something'=>$url));

这可能会解决您的问题...

# docx4j - docx4j 支持的 XHTML 标签列表

> ID：12446413
> 
> 赞同：3
> 
> 时间：2012-09-16T11:16:35.380
> 
> 标签：docx4j

是否有一个列表显示 docx4j XHTML 导入器支持哪些 XHTML 标记和 CSS 属性？
谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:23:23.987

**披露：我写了有问题的 docx4j 代码 **

没有明确的清单。但是，至少支持：

*   p、div、li
*   桌子
*   h1 到 h3
*   桌子
*   图像
*   跨度
*   一种
*   br

目前不支持字体颜色，也不支持 u（下划线）。

支持分为两个阶段：

*   飞碟（XHTMLRenderer）需要支持

    FS 支持几乎所有的 CSS 2.1；请参阅[What_XHTML CSS_features_does_Flying_Saucer_currently_support](http://code.google.com/p/flying-saucer/wiki/FAQ#What_XHTML/CSS_features_does_Flying_Saucer_currently_support?)

*   docx4j 需要将相关的 Flying Saucer 构造转换为 WordML

如果有疑问，只需在您感兴趣的 XHTML 上尝试一下。

# javascript - 使用 javascript 在另一个窗口中打开

> ID：12446414
> 
> 赞同：0
> 
> 时间：2012-09-16T11:16:42.990
> 
> 标签：javascript, jquery, html

我的地图在[这里](http://bluewingholidays.com/)。

当我单击地图上的单独部分时，目标页面会在同一窗口中打开。但我想在另一个窗口中打开它。

```
<iframe 
    src="http://bluewingholidays.com/map/map.html" 
    frameborder="0" 
    scrolling="no"  
    width="500" 
    height="800">

</iframe> 
```

这是[IFRAME 内容](http://jsfiddle.net/v7E8h/1/)的完整代码：

http://jsfiddle.net/v7E8h/1/

我应该如何更改 iframe 代码以获得所需的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:17:33.913

添加属性`target="_parent"`

那就是如果我理解你在问什么是正确的。否则尝试`target="_blank"`链接

您应该提供更多信息

# qt - 在 Qt ImageViewer 上绘图示例

> ID：12446425
> 
> 赞同：1
> 
> 时间：2012-09-16T11:17:40.520
> 
> 标签：qt, drawing, image-viewer, paintevent

我是 Qt 的新手，并开始基于 qt 提供的示例项目之一开发应用程序：“图像查看器”。

这是示例项目本身：[http ://doc.qt.io/qt-4.8/qt-widgets-imageviewer-example.html](http://doc.qt.io/qt-4.8/qt-widgets-imageviewer-example.html)

为了确保我没有做错任何事情来扩展项目的功能，我创建了一个新项目并简单地从示例项目中复制了文件（请参阅[“图像查看器示例”页面](http://doc.qt.io/qt-4.8/qt-widgets-imageviewer-example.html)顶部的“文件”部分）

然后，我编辑了*imageviewer.h*文件：

添加

```
#include <QPainter> 
```

和

```
protected:
    void paintEvent(QPaintEvent *); 
```

到 ImageViewer 类。

然后我在*imageviewe.cpp中定义了**paintEvent*：

 *```
void ImageViewer::paintEvent(QPaintEvent * e)
{
    QPainter p(this);

    p.drawLine(0,0,100,100);
} 
```

我预计会在左上角画一条线，但事实并非如此。

在我看来，关键是*scrollArea*与线重叠，使其“不可见”。所以，我注释掉了这一行

```
setCentralWidget(scrollArea); 
```

在*ImageViewer::ImageViewer()*定义中。

当然，这条线出现了，但没有显示图像。

然后我尝试在*scrollArea*本身上绘图，更改*paintEvent*代码：

```
void ImageViewer::paintEvent(QPaintEvent * e)
{
    QPainter p(scrollArea);

    p.drawLine(0,0,100,100);
} 
```

这导致了类似的消息

> QPainter::begin: 绘制设备返回引擎 == 0，类型：1

尝试用谷歌搜索它，但解决方案与*scrollArea*重叠线无关（或者只是不起作用）。

将不胜感激任何帮助。*

# scala - Scala中的方法命名约定——可变而不是版本？

> ID：12446431
> 
> 赞同：3
> 
> 时间：2012-09-16T11:18:32.237
> 
> 标签：scala, naming-conventions, method-names

*这个例子是微不足道的，只是为了说明这一点。*

假设我使用矩阵库，但缺乏一些功能，假设将矩阵中的每个元素加倍对我来说非常重要，我决定编写一个方法`doubleIt`。但是，我可以编写此方法的 2 个版本

1.  可变——`doubleItInPlace`
2.  不可变——`doubleItByCreatingNewOne`

这有点冗长，所以可以考虑命名约定，添加到可变版本`_!`后缀，或者在它前面加上单词“mut”。

**是否有任何建立命名约定来产生这种差异？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T11:55:35.237

约定是用命令式形式的动词命名可变（通常是副作用）版本。此外，更重要的是，`()`最后使用空参数列表：

```
def double()
def doubleIt() 
```

不可变版本，即产生一个新对象的版本，您应该以被动形式通过动词命名。更重要的是，最后不要使用空参数列表`()`：

```
def doubled
def doubledMatrix 
```

请注意，不总是以被动形式命名无副作用的方法（例如标准集合库），但这是一个好主意，除非它使名称过于冗长。

来源：[Scala 风格指南](http://docs.scala-lang.org/style/naming-conventions.html#methods)。

# wordpress - Wordpress - 手风琴自定义 ID（类别）

> ID：12446432
> 
> 赞同：1
> 
> 时间：2012-09-16T11:18:48.420
> 
> 标签：wordpress, accordion, custom-post-type, categories

我已经完成了我命名为手风琴的自定义帖子类型，并且我确实设置了一个简单的带有短代码的手风琴，它可以工作。但是现在我想知道如何允许用户为手风琴制作自己的 ID（类别），然后如何使用简码显示该类别（ID）。因为现在正如我所拥有的，他会展示你所做的每一个新的手风琴帖子，而你不能在不同的页面上制作不同的手风琴。

```
add_action('init', function(){

    $labels = array(
        'name' => _x('accordion', 'post type general name'),
        'singular_name' => _x('Accordion', 'post type singular name'),
        'add_new' => _x('Add New Accordion', 'Accordion'),
        'add_new_item' => __('Add New Accordion'),
        'edit_item' => __('Edit Accordion'),
        'new_item' => __('New Accordion'),
        'all_items' => __('All Accordions'),
        'view_item' => __('View Accordions'),
        'search_items' => __('Search Accordions'),
        'not_found' => __('No Accordion found'),
        'not_found_in_trash' => __('No Accordion found in Trash'),
        'parent_item_colon' => '',
        'menu_name' => 'Accordion'

    );
    $args = array(
        'labels' => $labels,
        'public' => true,
        'publicly_queryable' => true,
        'show_ui' => true,
        'show_in_menu' => true,
        'query_var' => true,
        'rewrite' => true,
        'capability_type' => 'post',
        'has_archive' => true,
        'hierarchical' => false,
        'menu_position' => null,
        'supports' => array('title', 'editor', 'thumbnail', 'page-attributes')
    );
    register_post_type('Accordion', $args);
});

add_shortcode('accordion', function(){

    $posts = get_posts(array(
        'numberposts' => 10,
        'orderby' => 'menu_order',
        'order' => 'ASC',
        'post_type' => 'accordion',
    ));

    $accordion  = '<div id="accordion" class="accordion">'; ///Open the container
    foreach ( $posts as $post ){

        $accordion .= sprintf(('<h2>%1$s</a></h2><div>%2$s</div>'), // Generate the markup for each Question
            $post->post_title,
            wpautop($post->post_content)
        );
    }

    $accordion .= '</div>'; //Close the Container

    return $accordion; //Return the HTML

}); 
```

# c++ - 调试 GLSL - NVIDIA Nsight 导致错误 - glslDevil 也不起作用

> ID：12446434
> 
> 赞同：1
> 
> 时间：2012-09-16T11:19:07.653
> 
> 标签：c++, debugging, glsl

我很难调试我的 GLSL 着色器。

我已经安装了 NVIDIA 的 Nsight 的 64 位版本，但这会导致问题。

如果不运行 Nsight，我现在在尝试退出我的应用程序时会收到以下错误。

> My.exe 中 0x77dd15de (ntdll.dll) 处未处理的异常：0xC0000005：访问冲突读取位置 0x6f637869。

在安装 Nsight 之前，我没有收到此类错误。如果我从我的系统中删除 Nsight，则不再发生错误。

当我尝试在 VS2010 ( *Nsight -> Start Graphics Debugging* )中使用 Nsight 调试我的 .exe 时，会调用*R6010 - abort()*。

我正在运行 64 位计算机，因此我必须安装 64 位版本，但我正在为我的 OpenGL 应用程序使用 32 位库。

作为替代方案，我尝试了 glslDevil。

问题是当我使用*Jump to next draw call (F7)*时，它陷入了*wglGetExtensionsStringEXT()的无限循环*

 *谁能帮助解决这两种软件解决方案可能存在的问题，或者可能提出替代方案？如果可能的话，我想使用其中任何一个，但我已经用两者碰了壁。*

# c++ - 在类中映射命名空间枚举

> ID：12446437
> 
> 赞同：1
> 
> 时间：2012-09-16T11:20:02.817
> 
> 标签：c++, enums, namespaces

假设我有这样的代码：

```
namespace foo {
  enum bar
  {
    fooBarA,
    fooBarB
  };
}

struct baz
{
  // TODO: map "bar" in this struct to make valid:
  bar returnSomething() { return fooBarA; }
};

// and also this:
void doSomething()
{
  baz myBaz;

  if( baz::fooBarA == myBaz.returnSomething() )
  { /* ... */ }
} 
```

我可以在 TODO 部分放置什么样的代码以使其余部分有效？一些`using`或`typedef`？

PS：为了避免关于“为什么”的问题：命名空间存在于它自己的头文件中，并且可能被几个不同的类使用，这些类应该就值达成一致，`fooBarA`但`fooBarB`也隐藏它们所基于的，`foo`因为这与伙计们使用`baz`.

PPS：允许使用 C++11。会有`enum class`帮助吗？

PPPS：其他问题，例如[使用枚举声明？](https://stackoverflow.com/questions/438192/using-declaration-with-enum)处理枚举在类中而不是直接在命名空间中的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:45:40.383

这种方式需要在 foo 命名空间中进行少量工作。但它对 foo::bar 的现有用户应该是透明的。只需将您的 foo::bar 的值包含在一些从中派生出您的 baz 类的结构中：

```
namespace foo {
  struct barValues
  {
    enum Values {
      fooBarA,
      fooBarB
   };
  };

  typedef barValues::Values bar;
  static const bar fooBarA = barValues::fooBarA;
  static const bar fooBarB = barValues::fooBarB;
}

struct baz : foo::barValues
{
  typedef foo::bar bar;
  bar returnSomething() { return fooBarA; }
};

// and also this:
void doSomething()
{
  baz myBaz;

  if( baz::fooBarA == myBaz.returnSomething() )
  { /* ... */ }
  if( foo::fooBarA == myBaz.returnSomething() )
  { /* ... */ }
} 
```

与其他答案相比，它的优势在于您将 foo::bar 值包含在命名空间 foo 中 - 只有在那里您才能添加/修改/删除此枚举值。我相信这更安全。与其他答案相比，它的缺点是您必须修改其他不能选择的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:00:43.393

这会起作用

```
struct baz
{
    typedef foo::bar   bar;
    static const bar fooBarA = foo::fooBarA;
    static const bar fooBarB = foo::fooBarB;

  // This is now valid
  bar returnSomething() { return fooBarA; }
}; 
```

但我不知道它是否真的有用。如果您的用户试图重载某些功能或其他东西，他们可能会感到惊讶。

# javascript - 使用 window.location.href 指向启用 javascript 的页面

> ID：12446441
> 
> 赞同：1
> 
> 时间：2012-09-16T11:21:19.913
> 
> 标签：javascript, jquery, html

我正在创建一个个人网站。所以，它是一个非常轻量级的网站！

该网站使用大量。因此，`jquery`如果没有`javascript`启用目标浏览器，我的网站将无法运行。为了解决这个问题，我使用了这个 html

```
<html>

<head>

<script>
window.location.href="javascriptEnabled.html";
/*Since javascript is enabled redirect to javascript based page*/
</script>

</head>

<body>
Showing Static Website since javascript is not enabled..
</body>

</html> 
```

`javascript`如您所见，如果目标浏览器支持，我将重定向到启用的页面。

但如果`javascript`未启用，脚本将无法运行，然后将加载`body`标签中的静态 html！

我有两个问题。

1>这是解决`javacript-no javascript issue`浏览器问题的最佳方法吗？

2>如果我使用`window.location.href`并且`javascript`启用了浏览器，它会下载整个页面还是会停止`window.location.href`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:25:45.633

1.  为了简单起见，是的，这是一个不错的主意。`<noscript>`您可以使用标签加载内容
2.  一旦浏览器点击`window.location.href`它就会开始重定向，但它仍然会下载所有 DOM。浏览器下载所有文档，然后它将开始呈现。

    您可以使用：`<body onload="document.body.style.display = 'none';">`隐藏它的内容，直到发生重定向。

# jquery - jquery 通过使用 parent 完全克隆原始图像

> ID：12446444
> 
> 赞同：0
> 
> 时间：2012-09-16T11:22:03.643
> 
> 标签：jquery

我正在尝试在我们的网上商店中将图像（产品）移动到购物车动画。寻找有关如何克隆智能的帮助

我想要的是 - 克隆图像， - 然后在完全相同的位置附加/前置 - （实际上作为位于原件顶部的副本） - 然后移动到新位置

到目前为止，这是我的代码

更新：首先我试图找到要附加到的图像的父级，但现在我正在测试 wrap()，然后附加到新的 wrap。

```
 if(jQuery('img#basket-image'+id)){
        var prod_img    = jQuery('img#basket-image'+id);
        var prod_div    = jQuery(prod_img).wrap('<div class="prod_div'+id+'" />');
        var basket  = jQuery("#bottom-checkout")
        // Idee is om frame te sluiten, dan plaatje te pakken en die naar basket te gooien.
        // Code komt van: http://www.webresourcesdepot.com/fly-to-basket-effect-with-jquery/
        var basketX         = basket.offset().left;
        var basketY         = basket.offset().top;
        var productX        = jQuery(window).width() - prod_img.width();
        var productY        = jQuery(window).height() - prod_img.height(); 
        var gotoX       = basketX - productX;
        var gotoY       = basketY - productY;
        var newImageWidth   = 64;
        var newImageHeight  = 64; 
        jQuery(prod_img).clone().prependTo(prod_div).css({'position':'absolute','z-index':301}).animate({width:newImageWidth,height:newImageHeight,left:gotoX,top:gotoY},1400, function() {
            $(this).remove();
            jQuery(basket).effect("shake", {times:6, distance:8}, 140);
            })
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:47:28.450

诀窍是创建一个母 DIV 元素并稍后引用它

似乎有点过头了，但它奏效了；）

# r - 如何根据指示变化方向的两个观察值之间的差异创建新变量？

> ID：12446447
> 
> 赞同：1
> 
> 时间：2012-09-16T11:23:04.173
> 
> 标签：r, variables, loops, dataframe

想象一下，你有五个国家在十年内的表现得分。您确实知道，某些国家/地区的表现在特定年份发生了很大变化。现在，您想知道它们的变化是积极的还是消极的。正是这最后一步让我感到困扰。

**样本数据：**

```
mydata<-1:3
mydata<-expand.grid(
country=c('A', 'B', 'C', 'D', 'E'),
year=c('1980','1981','1982','1983','1984','1985','1986','1987','1988','1989'))
mydata$score=sapply(runif(50,0,2), function(x) {round(x,4)})
library(reshape)
mydata<-reshape(mydata, v.names="score", idvar="year", timevar="country", direction="wide") 
```

**变更识别：**

```
score.cols <- grep("score", colnames(mydata), value=TRUE)
period.cols <- gsub("score", "period", score.cols)
compute.period <- function(x)as.integer(c(NA, abs(diff(x)) >= 0.5))
cbind(mydata, `names<-`(lapply(mydata[score.cols], compute.period), period.cols))

> cbind(mydata, `names<-`(lapply(mydata[score.cols], compute.period), period.cols))
   year score.A score.B score.C score.D score.E period.A period.B period.C period.D period.E
1  1980  0.4029  0.3308  1.0432  0.7405  0.7254       NA       NA       NA       NA       NA
6  1981  1.7577  0.5479  1.4437  1.3996  0.8454        1        0        0        1        0
11 1982  1.9603  0.5404  1.2687  1.4317  0.0203        0        0        0        0        1
16 1983  0.5509  1.5834  1.3954  0.4935  0.4994        1        1        0        1        0
21 1984  1.9672  1.0628  1.8436  0.4327  0.0144        1        1        0        0        0
26 1985  1.6799  1.5873  0.5898  0.9553  1.3475        0        1        1        1        1
31 1986  1.2918  1.7049  0.3448  0.1841  0.9270        0        0        0        1        0
36 1987  0.1719  0.3297  0.6386  0.4075  1.8494        1        1        0        0        1
41 1988  0.7123  1.2378  0.9220  0.3278  1.5888        1        1        0        0        0
46 1989  0.2998  0.4418  1.0640  1.1405  0.7034        0        1        0        1        1 
```

**识别变化方向：**

```
direct.cols<-gsub("score", "direction", score.cols)
compute.direction<-function(mydata){
for (i in 1:length(score.cols))
{ 
direct.cols[,i] <- ifelse((period.cols[i] == 1) & (score.cols[i] >= score.cols[i-1]), 1, 
+ ifelse((period.cols[i] == 1) & (score.cols[i] <= score.cols[i-1]), 2,
+ ifelse((period.cols[i] != 1), 0, NA)))
}}
cbind(mydata, `names<-`(lapply(mydata[score.cols], compute.direction), direct.cols)) 
```

**问题：** 运行最后一步时，我收到以下错误消息：

```
 Error in direct.cols[, i] <- ifelse((period.cols[i] == 1) & (score.cols[i] >=  : 
  incorrect number of subscripts on matrix 
```

*为什么？我做错了什么？*

任何帮助将不胜感激。太感谢了。

这个问题建立在[flodel](https://stackoverflow.com/users/1201032/flodel)和[Maiasaura](https://stackoverflow.com/users/313163/maiasaura)对我之前提出的问题[[https://stackoverflow.com/questions/12443202/how-to-get-the-difference-in-value-between-subsequent-observations-国年]](https://stackoverflow.com/questions/12443202/how-to-get-the-difference-in-value-between-subsequent-observations-country-year) .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:41:55.587

对象`period.cols`是一个向量，因此是一维的。采用

```
period.cols[i] 
```

访问`i`它的 th 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T13:23:20.627

如果您尝试复制我对上一个问题的建议（http://stackoverflow.com/questions/12443202/how-to-get-the-difference-in-value-between-subsequent-observations-country-year） ，那么您`compute.diff`应该是一个仅将分数向量作为输入的函数。它将应用于数据中的每个`score.A`、`score.B`等列。所以你应该使用类似的东西：

```
compute.direction <- function(x) {
   x.diff <- c(NA, diff(x))
   ifelse(x.diff > 0.5, 1,
          ifelse(x.diff < -0.5, 2,
                 NA))
} 
```

但是，请查看我对上一个问题的回答所做的编辑：您似乎越来越没有使用最佳数据结构。我建议您先处理原始数据（未重新整形的数据），而不是附加多个列块（五个 for `period`，五个 for ）：`direction`

```
mydata <- within(mydata, period    <- ave(score, country, FUN = compute.period),
                         direction <- ave(score, country, FUN = compute.direction)) 
```

然后只重塑您的数据。

# javascript - 如何使用 selectionStart？

> ID：12446449
> 
> 赞同：1
> 
> 时间：2012-09-16T11:23:18.307
> 
> 标签：javascript, jquery, textselection

据我了解， selectionStart 必须从输入文本或 textarea 元素中的选定文本返回开始位置

我有这个js代码

```
 $("#inpt").on("mouseup" , function () {
    alert( $("#inpt").selectionStart);
}); 
```

和 html

```
<input id="inpt" type="text" value="bla bla bla" /> 
```

当我选择文本“bla bla bla”中的某个部分时，结果是“未定义”。请大喊大叫，我哪里做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T11:25:40.317

试试看`this.selectionStart`，不是 jQuery 对象的属性，而是`HTMLInputElement`' 的属性。

```
$("#inpt").on("mouseup" , function () {
    console.log(this.selectionStart);
}); 
```

# c - C 中的 clone() 系统调用和共享

> ID：12446455
> 
> 赞同：4
> 
> 时间：2012-09-16T11:25:24.137
> 
> 标签：c, linux, clone, fork

我正在尝试使用 clone() 系统调用来创建一个与父进程共享资源的线程。在书中我读到，如果我使用以下标志，我将能够这样做：CLONE_VM | 克隆文件 | 克隆_SIGHAND | 克隆_FS

但似乎变量没有被共享。

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <linux/sched.h>
#include <string.h>
#define STACK_SIZE 65536
#define BUFSIZE 200
int n = 5;
int Child(void *);
int main() {
    pid_t pid;
    char *stack;
    stack = malloc(STACK_SIZE);
    pid = clone(Child,stack + STACK_SIZE, CLONE_SIGHAND|CLONE_FS|CLONE_VM|CLONE_FILES);
    wait(NULL);
    char buf[BUFSIZE];
    sprintf(buf,"Back to parent: Value of n: %d\n",n);
    write(1,buf,strlen(buf));
    return 0;
}
int Child(void *args) {
    n += 15;
    char buf[BUFSIZE];
    sprintf(buf,"In child: Value of n: %d\n",n); 
    write(1,buf,strlen(buf));
} 
```

输出也在不断变化。我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:32:53.913

```
int n = 5;
int Child(void *);
int main() {
    int n = 5; 
```

你有两个变量叫做`n`. `Child`对全局变量进行操作，但`main`使用在其范围内定义的变量。

您还应该将`wait`呼叫更改为`waitpid(-1, NULL, __WALL)`，否则您实际上不会等待克隆的进程。（或者您可以添加`|SIGCHLD`到克隆选项。）

从[`clone(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/clone.2.html)文档：

> flags 的低字节包含子进程死亡时发送给父进程的终止信号的编号。如果此信号指定为 SIGCHLD 以外的任何信号，则父进程在使用 wait(2) 等待子进程时必须指定 __WALL 或 __WCLONE 选项。如果未指定信号，则在子进程终止时不会向父进程发出信号。

# android - ScrollView 在达到其边界时停止更新项目

> ID：12446457
> 
> 赞同：3
> 
> 时间：2012-09-16T11:25:29.007
> 
> 标签：android, scrollview, ondraw, fisheye, onscroll

所以我现在面临的问题如下，我想创建一个鱼眼视图（所以一个包含项目的视图，而中间的项目比你在 MAC OS 项目栏或其他地方看到的其他项目更大）。

到目前为止，我已经扩展了 Horizo​​ntalScrollView 来实现这一点，经过一些测试，一切似乎都很好，所以在移动滚动视图时，项目会根据它们的位置正确更新。

但是，如果滚动视图“反弹”其边界，则会出现一个问题。因此，如果 ScrollView 快速移动，“getScrollX()”会给我一个小于 0 或大于最大界限的值。在那之后，项目不再调整大小，这很奇怪。

我检查了我的代码并调用了我的项目的调整大小方法，但我不知道为什么项目不再更新。

ScrollView 类如下所示

```
public class HorizontalFishEyeView extends HorizontalScrollView
{
    //****************************************************************************************************
    //                                  enums
    //****************************************************************************************************  
    public enum ONTOUCHEND
    {
        //-----undefined value
        NONE,
        //-----meaning to keep scrolling after the touch event ended
        SCROLL_ON_END,
        //-----meaning to continue to the next base after the touch event ended
        CONTINUE_ON_END,
        //-----meaning to switch the element after the on touch event ended
        CHANGE_ELEMENT_ON_END
    }

    public enum MODE
    {
        //-----none mode meaning the view is not scrolling or doing the finish animation, thus being idle
        NONE,
        //-----scroll meaning the view is scrolling after an accelleration
        SCROLL,
        //-----finish meaning the view is doing the finish animation to move to the actual element
        FINISH,
    }

    //****************************************************************************************************
    //                                  variables
    //****************************************************************************************************
    //-----determines if the view will continue when the finish animation is played
    private boolean m_bContinueOnClick = false;

    //-----time for the scroll animation
    private long m_nScrollAnimationTime = 0;

    //------the multiplier to be used for the velocity on initaial start
    private float m_fVelocityMultiplier = 1.0f;

    //-----the direction of the velocity however the reverse value to use it in conjunction with the decrement
    private int m_nVelocityDirectionReverse = 0;

    //------the velocity provided when the event has ended
    private float m_fVelocity = 0.0f;

    //-----determines hwo much the velocity decreases per millisecond
    private float m_fVelocityDecrement = 0.001f; 

    //-----time when the touch event was started
    private long m_nStartTime = 0;

    //-----the x position of the touch event
    private float m_nXPosition = -1.0f;

    //-----determines when the animation for moving shall be canceled
    private final float m_fVelocityThreshold = 0.25f; 

    //-----determines the time, e.g the start time of the animation and stores the time each time the draw method is called
    //-----while the finish animation is in progress
    private long m_nFinishAnimationTime = 0;

    //-----determines how much pixel the layout will be moved for each millisecond passed,
    //-----while the finish animation is playing
    private double m_dFinishAnimationIncrements = 0.0;

    //-----the actually duration of the finish animation, this value is dependent of the difference distance
    //-----which the view has to be moved, so at max this will bei 0.5 times m_nFinishAnimationTime
    private int m_nFinishAnimationDuration = 0;

    //-----determines the distance which the view has to be moved in order to set the selected element into focus
    private int m_nFinishRemainingDiff = 0;

    //-----the position which the view will have as its left margin, 
    //-----this value us determined when the user lets go of the view
    private int m_nFinishTargetPosition = 0;

    //-----the animation time the finish animation when the user lets go of the view
    private int m_nAnimationTime = 0;

    //-----the position of the element which is closest to the selector, thus it actually is the selected element
    private FishEyeItem m_nClosestElement = null;

    //-----scalefactor used to calculate the min item size, thus m_nItemSizeMin = nItemSize * m_fItemSizeMaxScale
    private float m_fItemSizeMinScale = -1;

    //-----the size of the image of the item when not selected
    private int m_nItemSizeMin = -1;

    //-----scalefactor used to calculate the max item size, thus m_nItemSizeMax = nItemSize * m_fItemSizeMaxScale
    private float m_fItemSizeMaxScale = -1;

    //-----the size of the image of the item when selected
    private int m_nItemSizeMax = -1;

    //-----the difference in item size between the max and the min value
    private int m_nItemSizeDiff = -1;

    //-----determines at which distance the item size will always be min
    private int m_nMaxDiff = 0;

    //-----the middel point of the view, used to determine the distance of an item and thus its size
    private int m_nReferenceX = 0;

    //-----event listener attached to this view
    protected AnimationEventListener m_oEventListener;

    //-----this factor is multiplied by the velocity up on the UP event to determine the remaining scroll
    private float m_fVelocityScaleFactor = 0.25f;

    //-----the mode in which the fisheyeview currently is
    private MODE m_eMode = MODE.NONE;

    //-----the reference to the one and only child in the scrollview, as it should be
    private LinearLayout m_oChild = null; 

    //-----number of items whose bitmap will still be available even if they are not visible
    private int m_nItemBuffer = 2;

    //-----activity to use
    private Activity m_oActivity = null;

    //-----scalefactor to use
    private float m_fScaleFactor = 1.0f;

    //-----determines if the itemsize is stable thus each item is the same size, used to prevent unnecessary calculations 
    private boolean m_bItemSizeStable = false;

    //****************************************************************************************************
    //                                  constructor
    //****************************************************************************************************
    public HorizontalFishEyeView(Context context) 
    {
        super(context);
    }

    public HorizontalFishEyeView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
    }

    //****************************************************************************************************
    //                                  public
    //****************************************************************************************************
    /**
     * this method will set up the view before it is used, thus it needs to be called before
     * @param oActivity
     * @param fItemSizeMinScale
     * @param fItemSizeMaxScale
     * @param fScaleFactor
     * @param bItemSizeStable
     */
    public void Initialize(Activity oActivity, float fItemSizeMinScale, float fItemSizeMaxScale, float fScaleFactor, boolean bItemSizeStable)
    {
        try
        {
            m_oActivity = oActivity;
            m_nReferenceX = (int)(getWidth()*0.5f);
            m_fItemSizeMaxScale = Math.min(1.0f, Math.max(0.0f, fItemSizeMaxScale));
            m_fItemSizeMinScale = Math.min(1.0f, Math.max(0.0f, fItemSizeMinScale));
            m_bItemSizeStable = bItemSizeStable;
            m_fScaleFactor = fScaleFactor;
        }
        catch(Exception e)
        {
            Log.d("Initialize", e.toString());
        }
    }

    public void Clear()
    {
        try
        {
            if(m_oChild!=null)
            {
                for(int i=0;i<m_oChild.getChildCount();i++)
                {
                    View oChild = m_oChild.getChildAt(i);
                    if(oChild instanceof FishEyeItem)
                    {
                        NetcoMethods.RecycleImageView(((FishEyeItem)oChild).GetImageView());
                    }
                }
                m_oChild.removeAllViews();
            }
        }
        catch(Exception e)
        {
            Log.d("Clear", e.toString());
        }
    }

    public void AddItem(FishEyeItem oItem, LinearLayout.LayoutParams oParams)
    {
        try
        {
            if(m_oChild!=null)
            {
                m_oChild.addView(oItem, oParams);
            }
        }
        catch(Exception e)
        {
            Log.d("AddItem", e.toString());
        }
    }

    public MODE GetMode()
    {
        return m_eMode;
    }

    public void Reinitialize()
    {

    }

    public void Deinitialize()
    {

    }

    /**
     * adds an animation listener to the list
     * @param listener
     */
    public void SetAnimationEventListener(AnimationEventListener listener) 
    {
        m_oEventListener = listener;
    }

    public void ScrollTo()
    {
        try
        {

        }
        catch(Exception e)
        {
            Log.d("ScrollTo", e.toString());
        }
    }

    public LinearLayout GetChild()
    {
        return m_oChild;
    }

    //****************************************************************************************************
    //                                  private
    //****************************************************************************************************
    /**called when the size was calculated*/
    private void SizeCalculated(Object o) 
    {
        try
        {
            if(m_oEventListener!=null)
            {
                m_oEventListener.AnimationEvent(o);
            }
        }
        catch(Exception e)
        {
            Log.d("AnimationEndEvent", e.toString());
        }   
    }

    /**
     * calculates the sizes for an item, if m_bItemSizeStable is set to true this will only be done once
     * @param nItemSize, the size of the item which will be used
     */
    private void CalulateItemSize(int nItemSize)
    {
        try
        {
            if(!m_bItemSizeStable)
            {
                m_nItemSizeMax = (int)(nItemSize * m_fItemSizeMaxScale);
                m_nItemSizeMin = (int)(nItemSize * m_fItemSizeMinScale);
                m_nItemSizeDiff = m_nItemSizeMax - m_nItemSizeMin;
                m_nMaxDiff = nItemSize*2;
            }
            else if(m_nItemSizeMax==-1)
            {
                m_nItemSizeMax = (int)(nItemSize * m_fItemSizeMaxScale);
                m_nItemSizeMin = (int)(nItemSize * m_fItemSizeMinScale);
                m_nItemSizeDiff = m_nItemSizeMax - m_nItemSizeMin;
                m_nMaxDiff = nItemSize*2;
            }
        }
        catch(Exception e)
        {
            Log.d("CalculateItemSize", e.toString());
        }
    }

    /**
     * this method will Resize and item in the view depending on its position
     * @param oItem the item which shall be resized
     * @param nDiff the distance of the item from the middle of he view
     * @param nCurrentClosestDiff the currently know closest distance, if the item is closer the given nDiff will be used
     */
    private void DeterminenSize(FishEyeItem oItem, int nDiff, int nCurrentClosestDiff)
    {
        try
        {
            if(oItem!=null)
            {
                CalulateItemSize(oItem.getWidth());
                //-----check if the item can be resized
                if(oItem.GetCanBeResized())
                {
                    //System.out.println("Item is "+ oItem.GetImagePath());
                    //System.out.println("Item Diff is "+ nDiff);
                    //-----items is in range
                    if(nDiff<m_nMaxDiff)
                    {
                        //-----determine whether this element is closer to the selector then the previously known
                        if(nCurrentClosestDiff==-1)
                        {
                            nCurrentClosestDiff = nDiff;
                            m_nClosestElement = oItem;
                            SizeCalculated(m_nClosestElement);
                        }
                        else
                        {
                            if(nDiff<nCurrentClosestDiff)
                            {
                                nCurrentClosestDiff = nDiff;
                                m_nClosestElement = oItem;
                                SizeCalculated(m_nClosestElement);
                            }
                        }

                        //-----get the new size
                        float fRelative = 1.0f - (float)nDiff/(float)m_nMaxDiff;
                        int nNewItemSize = m_nItemSizeMin + (int)(fRelative * m_nItemSizeDiff);

                        //-----set the new size
                        oItem.Resize(nNewItemSize, nNewItemSize);
                        oItem.SetIsInRange(true);
                    }
                    else
                    {
                        //----if the item is now out of range set it to the minimum size
                        if(oItem.GetIsInRange())
                        {
                            //-----set the minimum size
                            oItem.Resize(m_nItemSizeMin, m_nItemSizeMin);
                            oItem.SetIsInRange(false);
                        }
                    }
                }   
            }
        }
        catch(Exception e)
        {
            Log.d("DeterminenSize", e.toString());
        }
    }

    //****************************************************************************************************
    //                                  overrides
    //****************************************************************************************************
    @Override
    protected void onScrollChanged(int l, int t, int oldl, int oldt) 
    {
        super.onScrollChanged(l, t, oldl, oldt);
        try
        {       
            if(m_eMode == MODE.FINISH)
            {

            }
            else
            {
                //------get the top element which must be a linear layout
                if(m_oChild!=null)
                {
                    m_oChild.setWillNotDraw(false);

                    FishEyeItem oFishEyeItem = null;
                    View oChildView = null;
                    ImageView oImage = null;
                    String cFilename = null;
                    int nPositionStart = 0;
                    int nPositionEnd = 0;
                    int nItemSize = 0;
                    int nScroll = getScrollX();
                    int nBoundEnd = getWidth();
                    int nItemPosition = 0;
                    int nCurrentClosestDiff = -1;

                    System.out.println(nScroll);

                    for(int i=0;i<m_oChild.getChildCount();i++)
                    {
                        oChildView = m_oChild.getChildAt(i);
                        //-----check if the child is of a certain type
                        if(oChildView instanceof FishEyeItem)
                        {
                            oFishEyeItem = (FishEyeItem)oChildView;
                            nItemSize = oFishEyeItem.getWidth();
                            nPositionStart = i * nItemSize;
                            nPositionEnd = nPositionStart + nItemSize;
                            oImage = oFishEyeItem.GetImageView();
                            cFilename = oFishEyeItem.GetImagePath();    
                            //-----check if the item is in visible area
                            if(oImage!=null)
                            {
                                //-----image is in visible area
                                if(nPositionEnd>=nScroll - (m_nItemBuffer * nItemSize) && nPositionStart - (m_nItemBuffer * nScroll)<=nBoundEnd)
                                {
                                    //-----check if image needs to be loaded
                                    if(!oFishEyeItem.GetIsImageLoaded())
                                    {
                                        oFishEyeItem.SetIsImageLoaded(true);
                                        new DownloadTaskImage(m_oActivity, 
                                                oImage, 
                                                cFilename, 
                                                nItemSize, 
                                                nItemSize, 
                                                m_fScaleFactor, 
                                                POWERROUNDMODES.ROUND).execute((Void)null);
                                    }

                                    //-----get the item position in the fisheyeview
                                    nItemPosition = nPositionStart - nScroll + (int)(nItemSize*0.5f);
                                    DeterminenSize(oFishEyeItem, Math.abs(m_nReferenceX - nItemPosition), nCurrentClosestDiff);
                                }
                                else
                                {
                                    //-----check if an image can be recycle
                                    if(oFishEyeItem.GetIsImageLoaded())
                                    {
                                        oFishEyeItem.SetIsImageLoaded(false);
                                        new RecycleTaskImage(oImage).execute((Void)null);
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        catch(Exception e)
        {
            Log.d("onScrollChanged", e.toString());
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent oEvent) 
    {
        super.onTouchEvent(oEvent);
        try
        {
            switch(oEvent.getAction())
            {
                case MotionEvent.ACTION_DOWN:
                    break;

                case MotionEvent.ACTION_UP:
                    break;

                case MotionEvent.ACTION_MOVE:
                    break;

                default:
                    break;
            }
        }
        catch(Exception e)
        {
            Log.d("onTouchEvent", e.toString());
        }
        return true;
    }

    protected void onFinishInflate()
    {
        super.onFinishInflate();
        try
        {
            m_oChild = (LinearLayout)getChildAt(0);
        }
        catch(Exception e)
        {
            Log.d("onFinishInflate", e.toString());
        }
    }
} 
```

不要介意一些未使用的变量，因为一旦视图本身完成滚动，它们将在以后用于实现自动滚动功能（这样当前关闭的项目将始终在放开滚动视图的中间） .

视图需要实际填充“FishEyeItem”，然后用于加载图像和调整内容大小。在我获得需要显示的项目列表后，这些项目会在运行时加载。

FishEyeItem 代码如下。

```
public class FishEyeItem extends RelativeLayout
{
    //****************************************************************************************************
    //                                  variables
    //****************************************************************************************************
    //-----determines if this item can be resized
    private boolean m_bCanBeResized = false;

    //-----path to the image of this fisheye items image
    private String m_cImagePath = null;

    //-----determines if this item is in range for the fisheye calculation
    private boolean m_bIsInRange = true;

    //-----determines if the image is loaded already, thus occupying memory
    private boolean m_bIsImageLoaded = false;

    //-----id of the image4view holding the image
    private int m_nImageViewID = -1;

    //-----the id of the view in this view which is responsible for resizing 
    private int m_nResizeViewID = -1;

    //****************************************************************************************************
    //                                  constructor
    //****************************************************************************************************
    public FishEyeItem(Context context) 
    {
        super(context);
    }

    public FishEyeItem(Context context, AttributeSet attrs)
    {
        super(context, attrs);
    }

    //****************************************************************************************************
    //                                  setter
    //****************************************************************************************************
    public void SetCanBeResized(boolean bValue)
    {
        m_bCanBeResized = bValue;
    }

    public void SetImagePath(String cValue)
    {
        m_cImagePath = cValue;
    }

    public void SetIsInRange(boolean bValue)
    {
        m_bIsInRange = bValue;
    }

    public void SetIsImageLoaded(boolean bValue)
    {
        m_bIsImageLoaded = bValue;
    }

    public void SetImageViewID(int nValue)
    {
        m_nImageViewID = nValue;
    }

    public void SetResizeViewID(int nValue)
    {
        m_nResizeViewID = nValue;
    }

    //****************************************************************************************************
    //                                  getter
    //****************************************************************************************************
    public boolean GetCanBeResized()
    {
        return m_bCanBeResized;
    }

    public String GetImagePath()
    {
        return m_cImagePath;
    }

    public boolean GetIsInRange()
    {
        return m_bIsInRange;
    }

    public boolean GetIsImageLoaded()
    {
        return m_bIsImageLoaded;
    }

    public int GetImageViewID()
    {
        return m_nImageViewID;
    }

    public int GetResizeViewID()
    {
        return m_nResizeViewID;
    }

    public ImageView GetImageView()
    {
        ImageView oView = null;
        try
        {
            oView = (ImageView)findViewById(m_nImageViewID);
        }
        catch(Exception e)
        {
            Log.d("GetImageView", e.toString());
        }
        return oView;
    }

    //****************************************************************************************************
    //                                  getter
    //****************************************************************************************************
    public void Resize(int nWidth, int nHeight)
    {
        try
        {
            View oView = findViewById(m_nResizeViewID);
            if(oView!=null)
            {
                System.out.println("Resizing Item" + m_cImagePath);

                //-----set the minimum size
                RelativeLayout.LayoutParams oParams = (RelativeLayout.LayoutParams)oView.getLayoutParams();
                oParams.width = nWidth;
                oParams.height = nHeight;
                oView.setLayoutParams(oParams);
            }
        }
        catch(Exception e)
        {
            Log.d("Resize", e.toString());
        }
    }
} 
```

因此，基本上每次调用 onScrollChanged() 时，都会加载或回收项目的图像（两者都在异步任务中运行，因此它们不会阻塞滚动和 GUI）。如果项目距离滚动视图的中间有一定距离，也将确定项目的大小。

就像我说的那样，总是调用 Resize() 方法（这就是 system.out 存在的原因），但是当“反弹”到边界时，项目不再调整大小。

所以我猜测问题出在Horizo​​ntalScrollView 类本身的某个地方，例如，在“弹跳”边界时设置了某个标志。

编辑：

好吧，我可以通过简单地检查 onscrollchanged() 中的 getScrollX() 并返回该值是否为 <= 0 或该值是否 >= 最大边界来防止项目无法再更新。然而，这仍然不能解释项目在“反弹”边界时不再更新的事实。

# windows-phone-7 - ReactiveValidatedObject 在 Windows Phone 7 上不可用？

> ID：12446461
> 
> 赞同：0
> 
> 时间：2012-09-16T11:25:49.063
> 
> 标签：windows-phone-7, reactiveui

我刚刚发现 ReactiveValidatedObject 不适用于 WP7，即 Validation.cs 不包括在 ReactiveUI_WP7.csproj 中构建。这是非常不幸的！我能问一下这背后的原因吗？某些平台服务在手机上不可用？这会在以后的版本中改变吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T20:32:11.810

ReactiveValidatedObject 不适用于 WP7，因为那里不存在[IDataErrorInfo - 如果 Microsoft 曾经添加它，那么 ReactiveValidatedObject 将随之而来](http://msdn.microsoft.com/en-us/library/system.componentmodel.idataerrorinfo.aspx)

# c - 12 元素数组，仅初始化 7

> ID：12446464
> 
> 赞同：1
> 
> 时间：2012-09-16T11:26:44.387
> 
> 标签：c, arrays

有 12 个元素的 *prim 数组，并且只初始化了 7 个元素。这是代码：

```
int f(int input)
{
    char *prim[12] = {"2", "3", "5", "7", "11", "13", "17"};
    int i;

    for(i=0; i<12; i++)
    {       
        if(i % input == 0)
        {
            strcat(result, prim[i]);
            strcat(result, " ");
        }
    }

    if(strlen(result) == 0)
    {
        printf("return -1");
    }
    else 
    {
        printf("%s\n", result);
        printf("return 0");
    }
} 
```

当 i = 8 调试器给我一个访问冲突读取位置。

我的朋友给了我这个他大学编程基础课程的考试样本，我需要帮助他通过考试。

所以，我的问题是：有没有关于 C 编程我不知道的东西，或者教授在声明 *prim 时犯了一个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T11:33:02.007

```
char *prim[12] = {"2", "3", "5", "7", "11", "13", "17"}; 
```

其余五个元素使用空指针初始化，就像您声明的那样：

```
char *prim[12] = {"2", "3", "5", "7", "11", "13", "17", 0, 0, 0, 0, 0}; 
```

使用空指针参数调用`strcat(result, prim[i]);`是未定义的行为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T11:32:18.327

如果在数组初始化中省略了初始化器，则相应的位置用 初始化`0`。所以这里所有丢失的`char`指针都用`0`. 试图取消引用这些空指针会使您的程序崩溃。

如果这对您的教授来说是意外的行为，如果您只是从黑板上复制错误，或者是否有其他错误，我不知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T11:34:50.080

位置 8 及以后被初始化为 0（NULL 指针），参见例如C 讲义的**[本节](http://www.eskimo.com/~scs/cclass/notes/sx4aa.html)**`strcat`，`NULL`指针未定义，将导致许多常见系统上的分段错误，或者在您的情况下，在*访问冲突读取位置*时`strcat`尝试读取在零地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T11:57:06.307

*考试题是：如果input=2，函数的结果是什么？*

这里有一些非常可疑的东西（这很可能是考试的重点）。

无论如何，这是我的观察：

*   *编辑： OP 已被编辑，因此不再是这种情况。*您发布的功能根本不使用该`input`参数。所以它的作用和结果（对于 result 的任何定义*）*独立于参数。

*   该函数被声明为返回一个`int`，但没有 return 语句。任何体面的编译器都会至少给你一个警告。

*   *编辑： OP 已被编辑，因此不再是这种情况，但如果参数为 2 至于评论，它仍然是正确的。*如果`strcat`引用标准库函数，则该函数保证会发生段错误，因为该函数最终会在第二个参数为 NULL 时调用它。

*   即使该函数由于某种原因没有段错误，也不清楚*结果*是什么意思。就副作用而言，该函数可能会将一些内容打印到标准输出。就返回值而言，该函数将返回一个整数，但缺少 return 语句就无法知道该整数是什么。它实际上是一个取决于实现的随机值。

# python - 如何在单独的线程 Python 中启动模拟 HTTP 服务器？

> ID：12446466
> 
> 赞同：1
> 
> 时间：2012-09-16T11:27:21.217
> 
> 标签：python, mocking, python-2.7, bottle

我试图在我的 python 脚本中模拟一个 HTTP 服务器，但它失败了。这是我正在做的事情：

```
import bottle
from restclient import GET
from threading import Thread

@bottle.route("/go")
def index():
    return "ok"

server = Thread(target = bottle.run)
server.setDaemon(True)
server.start()

print "Server started..."

response = GET("http://127.0.0.1:8080/go")

assert response.body == "ok"

print "Done..." 
```

基本上我试图在一个单独的线程中启动bottle.py http服务器和1个测试路由，然后模拟它的响应。

但它只是行不通。服务器没有在单独的线程中启动，因此在尝试请求它时我总是得到“errno 111 connection denied”。

**所以问题是：**如何解决？还有其他方法可以模拟 http 服务器吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T11:34:38.337

您没有留出足够的时间让网络服务器启动。

当你这样做时：

```
server.start()
print "Server started..."
response = GET("http://127.0.0.1:8080/go") 
```

您尝试在启动服务器后访问它，

根据哪个线程（主线程或服务器线程）首先运行（以及运行多长时间），当您尝试访问它时，您可能会遇到服务器尚未启动的情况，因此会`Connection Refused`出现错误.

您可以尝试执行以下操作：

```
server.start()
import time
time.sleep(...) # Something long enough
# Continue your stuff. 
```

正如您在[time.sleep 中看到的那样——睡眠线程或进程？](https://stackoverflow.com/questions/92928/time-sleep-sleeps-thread-or-process)，doing`time.sleep`只会休眠当前正在运行的线程，因此您可以为服务器线程留出足够的时间来启动。

现在，所有这一切都有些骇人听闻，因此您可能想查看您的服务器启动过程，看看是否有办法评估它是否已启动并运行，并在启动前等待这种情况。

现在看看瓶子来源，我想不出一个干净的解决方案；您总是可以尝试反复访问服务器，直到它最终响应，从而表明服务器处于活动状态。

# html - Eclipse 不会打开文件

> ID：12446468
> 
> 赞同：2
> 
> 时间：2012-09-16T11:27:34.797
> 
> 标签：html, eclipse, twig

在我项目的一个 *.html.twig 文件中，我只是在编辑一段 javascript（和往常一样）。

突然间，Eclipse 开始玩他自己的游戏。出现错误，现在，每当我尝试打开该文件时，都会出现以下错误。

（它只发生在这个文件上，我已经恢复了它的旧版本并不重要......它一直在做同样的事情）。

```
Could not open the editor: Editor could not be initialized.

java.lang.StackOverflowError
at org.eclipse.wst.xml.core.internal.parser.IntStack.push(IntStack.java:88)
at com.dubture.twig.core.documentModel.parser.TwigTokenizer.primGetNextToken(TwigTokenizer.java:2935)
at com.dubture.twig.core.documentModel.parser.TwigTokenizer.assembleEmbeddedContainer(TwigTokenizer.java:1191)
at com.dubture.twig.core.documentModel.parser.TwigTokenizer.assembleEmbeddedContainer(TwigTokenizer.java:1104)
at com.dubture.twig.core.documentModel.parser.TwigTokenizer.primGetNextToken(TwigTokenizer.java:2251)
at com.dubture.twig.core.documentModel.parser.TwigTokenizer.getNextToken(TwigTokenizer.java:1359)
at org.eclipse.wst.xml.core.internal.parser.XMLSourceParser.getNextRegion(XMLSourceParser.java:189)
at com.dubture.twig.core.documentModel.parser.TwigSourceParser.parseNodes(TwigSourceParser.java:103)
at org.eclipse.wst.xml.core.internal.parser.XMLSourceParser.getDocumentRegions(XMLSourceParser.java:173)
at com.dubture.twig.core.documentModel.parser.TwigSourceParser.getDocumentRegions(TwigSourceParser.java:56)
at org.eclipse.wst.sse.core.internal.text.StructuredDocumentReParser._core_reparse_text(StructuredDocumentReParser.java:355)
at org.eclipse.wst.sse.core.internal.text.StructuredDocumentReParser.core_reparse(StructuredDocumentReParser.java:752)
at org.eclipse.wst.sse.core.internal.text.StructuredDocumentReParser.reparse(StructuredDocumentReParser.java:1401)
at org.eclipse.wst.sse.core.internal.text.StructuredDocumentReParser.reparse(StructuredDocumentReParser.java:1333)
at com.dubture.twig.core.documentModel.parser.TwigStructuredDocumentReParser.reparse(TwigStructuredDocumentReParser.java:166)
at org.eclipse.wst.sse.core.internal.text.BasicStructuredDocument.updateModel(BasicStructuredDocument.java:2713)
at org.eclipse.wst.sse.core.internal.text.BasicStructuredDocument.internalReplaceText(BasicStructuredDocument.java:1923)
at org.eclipse.wst.sse.core.internal.text.BasicStructuredDocument.replaceText(BasicStructuredDocument.java:2423)
at org.eclipse.wst.sse.core.internal.text.BasicStructuredDocument.set(BasicStructuredDocument.java:2935)
at org.eclipse.core.internal.filebuffers.ResourceTextFileBuffer.setDocumentContent(ResourceTextFileBuffer.java:575)
at org.eclipse.core.internal.filebuffers.ResourceTextFileBuffer.initializeFileBufferContent(ResourceTextFileBuffer.java:286)
at org.eclipse.core.internal.filebuffers.ResourceFileBuffer.create(ResourceFileBuffer.java:245)
at org.eclipse.core.internal.filebuffers.TextFileBufferManager.connect(TextFileBufferManager.java:112)
at org.eclipse.ui.editors.text.TextFileDocumentProvider.createFileInfo(TextFileDocumentProvider.java:559)
at org.eclipse.dltk.internal.ui.editor.SourceModuleDocumentProvider.createFileInfo(SourceModuleDocumentProvider.java:1240)
at org.eclipse.ui.editors.text.TextFileDocumentProvider.connect(TextFileDocumentProvider.java:478)
at org.eclipse.dltk.internal.ui.editor.SourceModuleDocumentProvider.connect(SourceModuleDocumentProvider.java:1515)
at org.eclipse.ui.texteditor.AbstractTextEditor.doSetInput(AbstractTextEditor.java:4213)
at org.eclipse.ui.texteditor.StatusTextEditor.doSetInput(StatusTextEditor.java:237)
at org.eclipse.ui.texteditor.AbstractDecoratedTextEditor.doSetInput(AbstractDecoratedTextEditor.java:1451)
at org.eclipse.ui.editors.text.TextEditor.doSetInput(TextEditor.java:169)
at org.eclipse.wst.sse.ui.StructuredTextEditor.doSetInput(StructuredTextEditor.java:1918)
at org.eclipse.php.internal.ui.editor.PHPStructuredEditor.doSetInput(PHPStructuredEditor.java:2338)
at com.dubture.twig.ui.editor.TwigStructuredEditor.doSetInput(TwigStructuredEditor.java:193)
at org.eclipse.ui.texteditor.AbstractTextEditor$19.run(AbstractTextEditor.java:3200)
at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:464)
at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:372)
at org.eclipse.jface.window.ApplicationWindow$1.run(ApplicationWindow.java:759)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.jface.window.ApplicationWindow.run(ApplicationWindow.java:756)
at org.eclipse.ui.internal.WorkbenchWindow.run(WorkbenchWindow.java:2649)
at org.eclipse.ui.texteditor.AbstractTextEditor.internalInit(AbstractTextEditor.java:3218)
at org.eclipse.ui.texteditor.AbstractTextEditor.init(AbstractTextEditor.java:3245)
at org.eclipse.wst.sse.ui.StructuredTextEditor.init(StructuredTextEditor.java:2595)
at org.eclipse.php.internal.ui.editor.PHPStructuredEditor.init(PHPStructuredEditor.java:1200)
at org.eclipse.ui.internal.EditorManager.createSite(EditorManager.java:828)
at org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:647)
at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:465)
at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595)
at org.eclipse.ui.internal.EditorAreaHelper.setVisibleEditor(EditorAreaHelper.java:271)
at org.eclipse.ui.internal.EditorManager.setVisibleEditor(EditorManager.java:1459)
at org.eclipse.ui.internal.EditorManager$5.runWithException(EditorManager.java:972)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3938)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3615)
at org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:803)
at org.eclipse.ui.internal.Workbench$33.runWithException(Workbench.java:1600)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3938)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3615)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2609)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T08:03:25.827

遇到与您相同的问题，您的问题在谷歌搜索中排名第一。似乎这是[Eclipse WTP 项目中的一个错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=344723)。已在 WTP 版本 3.4.2 中解决

# java - AndEngine ButtonSprite 与单个 TextureRegion

> ID：12446469
> 
> 赞同：0
> 
> 时间：2012-09-16T11:27:37.050
> 
> 标签：java, android, andengine

我有一个使用 ButtonSprite 作为一些 UI 元素精灵的游戏。对于每个按钮，我都有一个用于正常和按下状态的纹理区域。

```
mSomeBottonTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mLoadTextureAtlas, this, "SomeBotton.png", 0, 0);
mSomeBottonPressedTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mLoadTextureAtlas, this, "SomeBottonPressed.png", 0, 0);
ButtonSprite someButtonSprite = new ButtonSprite(0, 0, mSomeBottonTextureRegion, mSomeBottonPressedTextureRegion, mEngine().getVertexBufferObjectManager()); 
```

我看到没有构造函数可以处理具有单个 TiledTextureRegion 的 ButtonSprite，您可以为每个状态提供不同的图块。

我错过了什么吗？有没有办法用 ButtonSprite 做到这一点？或者我是否必须扩展 TiledSprite 并添加按钮功能，这样我只需要制作一个 TextureRegion 而不是两个。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:15:52.630

您可以只向 ButtonSprite 提供 TiledTextureRegion，因为它旨在处理 3 种状态 - 正常、按下和禁用。检查 ButtonSprite.java，您将看到几个替代构造函数，它们采用 TiledTextureRegion 并将 stateCount 设置为传入的 TiledTextureRegion 中的图块数。

这是其中一个构造函数

```
public ButtonSprite(final float pX, final float pY, final ITiledTextureRegion pTiledTextureRegion, final VertexBufferObjectManager pVertexBufferObjectManager, final OnClickListener pOnClickListener) {
    super(pX, pY, pTiledTextureRegion, pVertexBufferObjectManager);

    this.mOnClickListener = pOnClickListener;
    this.mStateCount = pTiledTextureRegion.getTileCount();

    switch(this.mStateCount) {
        case 1:
            Debug.w("No " + ITextureRegion.class.getSimpleName() + " supplied for " + State.class.getSimpleName() + "." + State.PRESSED + ".");
        case 2:
            Debug.w("No " + ITextureRegion.class.getSimpleName() + " supplied for " + State.class.getSimpleName() + "." + State.DISABLED + ".");
            break;
        case 3:
            break;
        default:
            throw new IllegalArgumentException("The supplied " + ITiledTextureRegion.class.getSimpleName() + " has an unexpected amount of states: '" + this.mStateCount + "'.");
    }

    this.changeState(State.NORMAL);
} 
```

# excel - Excel日期公式

> ID：12446470
> 
> 赞同：1
> 
> 时间：2012-09-16T11:27:47.737
> 
> 标签：excel, excel-2007, excel-formula

我在 Excel 中有 3 个单元格，如下所示：

细胞

> A1=2012
> A2=12
> A3=15

其中分别包含年、月和日期值。我想用它制作一个日期字符串。

`Date`我知道使用功能很容易实现。但如果 A1、A2 或 A3 中的任何一个为空白，我也希望单元格保持空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:37:05.843

就像是

`=IF(COUNT(A1:A3)=3,DATE(A1,A2,A3),"")`

# c++ - linker error in boost regex

> ID：12446471
> 
> 赞同：3
> 
> 时间：2012-09-16T11:27:54.900
> 
> 标签：c++, regex, boost, linker

I would like to learn something about regex in boost lib and i try compile this simple example code:

```
// regex_search example
#include <iostream>
#include <string>
#include <boost/regex.hpp>

int main ()
{
  std::string s ("this subject has a submarine as a subsequence");
  boost::smatch m;
  boost::regex e ("\\b(sub)([^ ]*)");   // matches words beginning by "sub"

  std::cout << "Target sequence: " << s << std::endl;
  std::cout << "Regular expression: /\\b(sub)([^ ]*)/" << std::endl;
  std::cout << "The following matches and submatches were found:" << std::endl;

  while (boost::regex_search (s,m,e)) {
    for (auto x:m) std::cout << x << " ";
    std::cout << std::endl;
    s = m.suffix().str();
  }

  return 0;
} 
```

I use: `g++ -std=c++0x -I /usr/lib/boost/include -L /usr/lib/boost/lib -lboost_regex test_regex.cpp`

but g++ show me:

```
/tmp/ccjni2je.o: In function `boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::assign(char const*, char const*, unsigned int)':
test_regex.cpp:(.text._ZN5boost11basic_regexIcNS_12regex_traitsIcNS_16cpp_regex_traitsIcEEEEE6assignEPKcS7_j[boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::assign(char const*, char const*, unsigned int)]+0x22): undefined reference to `boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::do_assign(char const*, char const*, unsigned int)'
/tmp/ccjni2je.o: In function `bool boost::regex_search<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, char, boost::regex_traits<char, boost::cpp_regex_ 
```

and much more ...

Can anyone help me ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:40:28.353

Three things:

1.  The Boost.Regex library is likely called `libboost_regex**-mt**`.
2.  Unless you know that a Boost lib was compiled with C++11 support, you should remove the
    `-std=c++0x` option.
3.  You should always place LIBS at the end because GNU `ld` resolves symbols in the order that object files and LIBS appear in the command line.

Try:

```
g++ -I /usr/lib/boost/include -L /usr/lib/boost/lib test_regex.cpp -lboost_regex-mt

```

# java - 对这个简单的多态性示例感到困惑

> ID：12446472
> 
> 赞同：0
> 
> 时间：2012-09-16T11:28:08.333
> 
> 标签：java, polymorphism

请看一下这段代码：

```
class Foo {
    public int a;
    public Foo() {
        a = 3;
    }
    public void addFive() {
        a += 5;
    }
    public int getA() {
        System.out.println("we are here in base class!");
        return  a;
    }
}

public class Polymorphism extends Foo{
    public int a;
    public Poylmorphism() {
        a = 5;
    }
    public void addFive() {
        System.out.println("we are here !" + a);
        a += 5;
    }
    public int getA() {
        System.out.println("we are here in sub class!");
        return  a;
    }

    public static void main(String [] main) {
        Foo f = new Polymorphism();
        f.addFive();
        System.out.println(f.getA());
        System.out.println(f.a);
    }
} 
```

在这里，我们将类对象的引用分配给`Polymorphism`类型变量`Foo`，经典多态。现在我们调用`addFive`已在 class 中覆盖的方法`Polymorphism`。然后我们从一个 getter 方法打印变量值，该方法在类多态性中也被覆盖。所以我们得到答案为 10。但是当公共变量`a`被 SOP'ed 时，我们得到答案 3！

这怎么发生的？即使引用变量类型是 Foo 但它指的是多态类的对象。那么为什么访问`f.a`不会导致类中的 a 值`Polymorphism`被打印出来呢？请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T11:31:04.797

你隐藏了`a`-`Polymorphism`你实际上应该得到一个编译器警告。因此，这是两个不同的`a`领域。与方法相反，字段不能是虚拟的。好的做法是根本没有公共领域，而只有改变私有状态的方法（封装）。

如果你想把它变成虚拟的，你需要用访问器方法把它变成一个属性（例如你有什么：）`getA`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T11:32:08.673

这是因为您不能覆盖类变量。当访问一个类变量时，引用的类型，而不是对象的类型，决定了你会得到什么。

如果您在子类中删除 a 的重新声明，那么我认为行为会更符合预期。

# c# - 如何使用数据绑定将项目显示为堆栈

> ID：12446478
> 
> 赞同：0
> 
> 时间：2012-09-16T11:29:21.370
> 
> 标签：c#, windows-phone

在 C# 中有没有办法以某种方式动态构建一堆项目？就像一个列表，但没有滚动和选择。

我正在寻找一种通过绑定从列表中堆叠项目的方法。

现在我想用一个堆栈来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:55:25.043

是的。它被称为 ItemsControl，它没有 ScrollViewing + 选择。你可以这样做：

```
<ItemsControl ItemssSource="{Binding items}">
</ItemsControl> 
```

您可能需要更改 ItemsControl.ItemTemplate 和 ItemsControl.ItemPanelsTemplate

# jquery - 无法保存 jquery cookie

> ID：12446487
> 
> 赞同：0
> 
> 时间：2012-09-16T11:30:56.310
> 
> 标签：jquery, jquery-plugins, cookies

嘿朋友们，我用 jquery 制作了一个聊天框，但它无法保存 cookie 请看看我的 cade 并告诉我为什么它不起作用？

```
$(document).ready(function() {

    $(".trigger").click(function() {

        $(".chat").show("fast");

        $(this).showClass("active");

        $.cookie('chatbox', 'open', {
            expires: 7
        });

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:33:12.117

您发布的 cookie 代码无效。用这个：

```
$.cookie('chatbox', 'open'); 
```

# jquery - 跨域 $.ajax

> ID：12446493
> 
> 赞同：2
> 
> 时间：2012-09-16T11:31:21.683
> 
> 标签：jquery, ajax, jsonp

**更新 现在除了调整工作代码**之外，我什么也没收到。这个逻辑有什么问题？我使用 dataType:'jsonp' 进行 $.ajax 调用，因为它是跨域调用的唯一方法。我知道，该调用需要“jsonp”类型，而是接收“text/html”。如何解析这个响应（转换、预处理、过滤）？

谢谢！

这是一个问题。我只是想了解使用 JSON 的想法。这是一个有效的方法。

```
$(document).ready(function(){
    $('ul li a').click(function (){
    var test = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from html where url="www.mohtasebi.com/blog/2011/06/cross-domain-ajax-using-jquery-the-ultimate-guide/"') + '&format=xml&callback=?';
  //var test = "http://mohtasebi.com/blog/2011/06/cross-domain-ajax-using-jquery-the-ultimate-guide/";
    loadPage(test);
    });
});

function loadPage(test)
{
    $.ajax({
    url:test,
    dataType:'jsonp',
    crossDomain: 'true',
    success: function(data){    
    if ( data.results[0] ) {     
    alert("ok")
    } }
});

} 
```

**但如果我使用评论网址**

> var test = "http://mohtasebi.com/blog/2011/06/cross-domain-ajax-using-jquery-the-ultimate-guide/";

**而不是[YUI 转换](http://developer.yahoo.com/yql/console/)我得到这个错误：**

> 资源解释为脚本，但使用 MIME 类型 text/html 传输：“http://mohtasebi.com/blog/2011/06/cross-domain-ajax-using-jquery-the-ultimate-guide/?callback=jQuery18104882542605046183_1347794498881&_=1347794500464 ”。jquery.min.js:8169 Uncaught SyntaxError: Unexpected token < mohtasebi.com:1

我做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:39:04.637

```
var test = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from html where url="www.mohtasebi.com/blog/2011/06/cross-domain-ajax-using-jquery-the-ultimate-guide/"') + '&format=xml';

$.ajax({
    url: test,
    dataType: 'jsonp',
    jsonpCallback: 'blah',  // just add this and remove &callback=? from url last
    crossDomain: 'true',
    success: function(data) {
        console.log(data);  // see the console for data
        if (data.results[0]) {
            alert('OK');
        }
    }
});​ 
```

添加`jsonpCallback`到 ajax 配置并删除 &callback=? 从 url 最后一部分。

***[演示](http://jsfiddle.net/TWmqk/4/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T11:34:33.757

使用`$.getJSON`，这要简单得多。

```
var test = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from html where url="www.mohtasebi.com/blog/2011/06/cross-domain-ajax-using-jquery-the-ultimate-guide/"') + '&format=xml&callback=?';
$.getJSON(test, function (data) {
  console.log(data);
}); 
```

***[演示。](http://jsfiddle.net/TWmqk/)***

​</p>

# mysql - MySql：为每个文章ID创建一个唯一的字段

> ID：12446498
> 
> 赞同：0
> 
> 时间：2012-09-16T11:32:14.223
> 
> 标签：mysql, database, key

我只想跟踪每个文章页面的唯一访问者。我做了一个有 2 个字段的表格。`article_id`作为**主**键`ip`和**唯一**

预期的输出应该是这样的：

```
article_id    *       IP
52            -  100.200.300.400
52            -  20.30.20.40
52            -  30.40.50.60
93            -  108.207.302.403
93            -  10.30.20.40 
```

但它不起作用，这就是我得到的：

```
article_id    *       IP
52            -  100.200.300.400
93            -  10.30.20.40 
```

我想我把钥匙设置错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T11:45:44.750

当您定义`article_id`为主**键**时，您将永远不会有两条相同的记录`article_id`。

为避免`article_id`+`ip`对的重复，您可以定义**两个**字段的唯一索引：`article_id`AND `ip`。

例如：

```
CREATE  TABLE `visits` (
  `article_id` INT NOT NULL ,
  `ip` VARCHAR(15) NULL ,
  UNIQUE INDEX `unique_article_ip` (`article_id`, `ip`) )
ENGINE = MyISAM; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T11:38:09.770

主键也是唯一的，因此它最多会在表中出现一次。

> **定义**：关系表的主键唯一标识表中的每条记录。

正确的主键将是两列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T11:48:21.483

您需要一个包含以下内容的表格：

ID - 生成的唯一编号，这将是 PK DATE - 访问日期，这将有助于保留来自一个 IP 的唯一访问 ARTICLE_ID - 文章 ID IP - 仅 IP

现在您在以下位置创建 UNIQUE INDEX：ARTICLE_ID、ARTICLE_ID、IP - 可能按此顺序，但这取决于您要执行的 qyeries。通过这种方式，您将每天跟踪文章的唯一 IP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T11:50:35.683

主键唯一标识一行。一张表最多可以有一个主键，但可以有多个唯一键。你得到的输出清楚地证明了这一点，因为你有`article_id`作为**主键**

# java - 在java中将平面文件记录转换为xml

> ID：12446506
> 
> 赞同：3
> 
> 时间：2012-09-16T11:33:16.293
> 
> 标签：java, xml, xml-builder

我有一个场景，其中员工记录写在平面文件中，例如：

```
flatFile.txt
============
1|name1|dept1|10000
2|name2|dept2|12000
3|name3|dept3|9500
....
.... 
```

现在我想每次都读取这个平面文件并将上面的员工记录转换成一些新的 xml 文件，所以最后我应该有以下数据的 xml 文件：

```
<EMPLOYEES>
    <EMPLOYEE>
        <ID>1</ID>
        <NAME>name1</NAME>
        <DEPARTMENT>dept1</DEPARTMENT>
        <SALARY>10000</SALARY>
         </EMPLOYEE>
    <EMPLOYEE>
        <ID>2</ID>
        <NAME>name2</NAME>
        <DEPARTMENT>dept2</DEPARTMENT>
        <SALARY>12000</SALARY>
         </EMPLOYEE>
         ...
         ...
</EMPLOYEES> 
```

现在要实现这个概念，我需要处理数据的验证，例如：

1.  身份证和工资应该是数字
2.  名称长度应小于 20
3.  平面文件的单行应包含以上 4 个字段

如果任何验证失败，则需要将它们与错误行号一起反映在 xml 文件中，例如：

```
<NAME type="Error" Line="2"></NAME> (name length is greater than 20 in 2nd record of a flat file) 
```

或者

```
<EMPLOYEE type="Error" Line="1"></EMPLOYEE> (first record doesn't contains enough fields) 
```

现在应用程序需要以这样一种方式设计，即组件可以插入替代品。例如，应该可以将用于基于分隔符解析输入文件的解析器替换为另一个将其解析为固定长度的解析器。

所以不知何故，我将不得不以分层的方式设计这个概念，比如

```
Parsing -> Validation -> Output Generation. 
```

现在为了实现这个概念，我给出了一个想法，如下：

1.  使用 BufferedReader 从文件中读取所有记录并使用 StringTokenizer 对其进行标记。
2.  为每条记录初始化员工对象并将它们添加到某个集合（列表）中。
3.  将错误（字段不匹配或任何其他验证失败）保留到 Map>。
4.  使用一些 XML Builder API 将列表写入或编组到 xml 中（不清楚哪个是最好的）。

谁能给我更好的建议或任何提示来实现实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T14:24:55.677

自 Java SE 6 起，我将使用 JDK/JRE 中可用的库来执行以下操作。

1.  创建一个 StAX (JSR-173)`XMLStreamWriter`以将 XML 内容输出到文件。
2.  使用`XMLStreamWriter`来编写根元素。
3.  阅读输入的下一行
4.  将其转换为`Employee`对象
5.  使用 JAXB (JSR-222) 将对象编组到`XMLStreamWriter`
6.  如果有另一行重复步骤 3。
7.  使用`XMLStreamWriter`结束文档。

* * *

**更新**

执行实际验证有不同的选项，下面我将演示如何在 JAXB 实现可以用来产生所需结果的对象模型中表示结果信息。

**员工**

```
package forum12446506;

import javax.xml.bind.annotation.*;

@XmlRootElement(name="EMPLOYEE")
public class Employee {

    @XmlAttribute(name="Line")
    Integer line;

    @XmlAttribute
    String type;

    @XmlElement(name="ID")
    Value id;

    @XmlElement(name="NAME")
    Value name;

    @XmlElement(name="DEPARTMENT")
    Value department;

    @XmlElement(name="SALARY")
    Value salary;

    public Employee() {
    }

    public Employee(int line, String type) {
        this.line = line;
        this.type = type;
    }

} 
```

**价值**

```
package forum12446506;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Value {

    @XmlAttribute(name="Line")
    Integer line;

    @XmlAttribute
    String type;

    @XmlValue
    String value;

    public Value() {
    }

    public Value(Integer line, String type, String value) {
        this.line = line;
        this.type = type;
        this.value = value;
    }

} 
```

**输出**

```
<EMPLOYEE>
    <ID>1</ID>
    <NAME type="Error" Line="1"/>
</EMPLOYEE>

<EMPLOYEE type="Error" Line="2"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T12:22:57.410

阅读下面提到的教程链接**，了解如何将平面文件转换为 xml，**请务必完整阅读，**此外，为您提供本教程的原因是让您意识到没有神奇的 jumbo - mumbo to convert flat文件直接进入xml**，`but yes there is a proper way to do it.....`

[http://cafeconleche.org/books/xmljava/chapters/ch04.html](http://cafeconleche.org/books/xmljava/chapters/ch04.html)

# c++ - Qt Creator 中的 Qt GUI 应用程序构建设置

> ID：12446507
> 
> 赞同：0
> 
> 时间：2012-09-16T11:33:26.280
> 
> 标签：c++, qt, user-interface, mingw, qt-creator

当我使用 Qt Creator（Windows 中的 MinGW）开发一个小型 GUI 应用程序时，编译成功，并且生成了二进制文件。但是应用程序没有运行，它会崩溃。

下面是我的配置设置： **Qt 版本：** 4.8.2 **MinGW：**编译器路径：`C:\MinGW\bin\g++` 调试器：`C:\MinGW\bin\gdb`

如果我不使用 Qt 类（`QApplication`或`QWidget`）`QString`，它可以正常工作。我的意思是，如果我使用`std`lib 函数，它可以正常工作。

有人可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:33:47.340

你的 g++ 版本是什么？您需要将 g++-4.4 与从其站点下载的 Qt 二进制文件一起使用。

# teamcity - gradle 神器插件

> ID：12446516
> 
> 赞同：3
> 
> 时间：2012-09-16T11:35:22.320
> 
> 标签：teamcity, gradle, artifactory, teamcity-7.0

我是新来的神器和teamcity。我尝试使用 gradle-artifactory 插件。但它给我带来了以下错误..任何人都可以告诉我这个错误是关于什么的，并帮助我解决一些问题。

```
Error is 
  Caused by: org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object 'org.jfrog.gradle.plugin.artifactory.dsl.ArtifactoryPluginConvention@9bb457' with class 'org.jfrog.gradle.plugin.artifactory.dsl.ArtifactoryPluginConvention' to class 'org.jfrog.gradle.plugin.artifactory.dsl.ArtifactoryPluginConvention' 
```

我的 build.gradle 是

```
buildscript {
repositories {
    maven {
        url "http://repo.jfrog.org/artifactory/gradle"
    }
    dependencies {
        classpath(group: 'org.jfrog.buildinfo', name: 'build-info-extractor-gradle', version: '2.0.12')
    }
}   
}

   apply plugin: 'artifactory'
   artifactoryPublish.skip = true 
```

我的 gradle 版本是：**gradle-1.0-milestone-8a**

```
stackTrace is :

             [Gradle failure report] 
        [12:19:31][Gradle failure report] FAILURE: Build failed with an exception.
        [12:19:31][Gradle failure report] 
        [12:19:31][Gradle failure report] * Where:
        [12:19:31][Gradle failure report] Build file 'D:\Installations\Teamcity-7.1\TeamCity\buildAgent\work\5c4a802802673aca\account\build.gradle' line: 13
        [12:19:31][Gradle failure report] 
        [12:19:31][Gradle failure report] * What went wrong:
        [12:19:31][Gradle failure report] A problem occurred evaluating root project 'account'.
        [12:19:31][Gradle failure report] > Cannot cast object 'org.jfrog.gradle.plugin.artifactory.dsl.ArtifactoryPluginConvention@346762' with class 'org.jfrog.gradle.plugin.artifactory.dsl.ArtifactoryPluginConvention' to class 'org.jfrog.gradle.plugin.artifactory.dsl.ArtifactoryPluginConvention'
        [12:19:31][Gradle failure report] 
        [12:19:31][Gradle failure report] * Try:
        [12:19:31][Gradle failure report] Run with --info or --debug option to get more log output.
        [12:19:31][Gradle failure report] 
        [12:19:31][Gradle failure report] * Exception is:
        [12:19:31][Gradle failure report] org.gradle.api.GradleScriptException: A problem occurred evaluating root project 'account'.
        [12:19:31][Gradle failure report]   at org.gradle.groovy.scripts.internal.DefaultScriptRunnerFactory$ScriptRunnerImpl.run(DefaultScriptRunnerFactory.java:54)
        [12:19:31][Gradle failure report]   at org.gradle.configuration.DefaultScriptPluginFactory$ScriptPluginImpl.apply(DefaultScriptPluginFactory.java:127)
        [12:19:31][Gradle failure report]   at org.gradle.configuration.BuildScriptProcessor.evaluate(BuildScriptProcessor.java:38)
        [12:19:31][Gradle failure report]   at org.gradle.configuration.LifecycleProjectEvaluator.evaluate(LifecycleProjectEvaluator.java:43)
        [12:19:31][Gradle failure report]   at org.gradle.api.internal.project.AbstractProject.evaluate(AbstractProject.java:462)
        [12:19:31][Gradle failure report]   at org.gradle.api.internal.project.AbstractProject.evaluate(AbstractProject.java:74)
        [12:19:31][Gradle failure report]   at org.gradle.configuration.ProjectEvaluationConfigurer.execute(ProjectEvaluationConfigurer.java:23)
        [12:19:31][Gradle failure report]   at org.gradle.configuration.ProjectEvaluationConfigurer.execute(ProjectEvaluationConfigurer.java:21)
        [12:19:31][Gradle failure report]   at org.gradle.configuration.DefaultBuildConfigurer$1.execute(DefaultBuildConfigurer.java:38)
        [12:19:31][Gradle failure report]   at org.gradle.configuration.DefaultBuildConfigurer$1.execute(DefaultBuildConfigurer.java:35)
        [12:19:31][Gradle failure report]   at org.gradle.api.internal.project.AbstractProject.configure(AbstractProject.java:438)
        [12:19:31][Gradle failure report]   at org.gradle.api.internal.project.AbstractProject.allprojects(AbstractProject.java:433)
        [12:19:31][Gradle failure report]   at org.gradle.configuration.DefaultBuildConfigurer.configure(DefaultBuildConfigurer.java:35)
        [12:19:31][Gradle failure report]   at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:139)
        [12:19:31][Gradle failure report]   at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:110)
        [12:19:31][Gradle failure report]   at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:78)
        [12:19:31][Gradle failure report]   at org.gradle.launcher.cli.RunBuildAction.execute(RunBuildAction.java:42)
        [12:19:31][Gradle failure report]   at org.gradle.launcher.cli.RunBuildAction.execute(RunBuildAction.java:28)
        [12:19:31][Gradle failure report]   at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:201)
        [12:19:31][Gradle failure report]   at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:174)
        [12:19:31][Gradle failure report]   at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:170)
        [12:19:31][Gradle failure report]   at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:139)
        [12:19:31][Gradle failure report]   at org.gradle.launcher.exec.ExceptionReportingAction.execute(ExceptionReportingAction.java:31)
        [12:19:31][Gradle failure report]   at org.gradle.launcher.exec.ExceptionReportingAction.execute(ExceptionReportingAction.java:20)
        [12:19:31][Gradle failure report]   at org.gradle.launcher.Main.doAction(Main.java:48)
        [12:19:31][Gradle failure report]   at org.gradle.launcher.exec.EntryPoint.run(EntryPoint.java:45)
        [12:19:31][Gradle failure report]   at org.gradle.launcher.Main.main(Main.java:39)
        [12:19:31][Gradle failure report]   at org.gradle.launcher.ProcessBootstrap.runNoExit(ProcessBootstrap.java:50)
        [12:19:31][Gradle failure report]   at org.gradle.launcher.ProcessBootstrap.run(ProcessBootstrap.java:32)
        [12:19:31][Gradle failure report]   at org.gradle.launcher.GradleMain.main(GradleMain.java:24)
        [12:19:31][Gradle failure report] Caused by: org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object 'org.jfrog.gradle.plugin.artifactory.dsl.ArtifactoryPluginConvention@346762' with class 'org.jfrog.gradle.plugin.artifactory.dsl.ArtifactoryPluginConvention' to class 'org.jfrog.gradle.plugin.artifactory.dsl.ArtifactoryPluginConvention'
        [12:19:31][Gradle failure report]   at org.jfrog.gradle.plugin.artifactory.ArtifactoryPlugin.getArtifactoryPluginConvention(ArtifactoryPlugin.groovy:126)
        [12:19:31][Gradle failure report]   at org.jfrog.gradle.plugin.artifactory.ArtifactoryPlugin$getArtifactoryPluginConvention.callCurrent(Unknown Source)
        [12:19:31][Gradle failure report]   at org.jfrog.gradle.plugin.artifactory.ArtifactoryPlugin.apply(ArtifactoryPlugin.groovy:43)
        [12:19:31][Gradle failure report]   at org.jfrog.gradle.plugin.artifactory.ArtifactoryPlugin.apply(ArtifactoryPlugin.groovy)
        [12:19:31][Gradle failure report]   at org.gradle.api.internal.plugins.DefaultProjectsPluginContainer.providePlugin(DefaultProjectsPluginContainer.java:107)
        [12:19:31][Gradle failure report]   at org.gradle.api.internal.plugins.DefaultProjectsPluginContainer.addPluginInternal(DefaultProjectsPluginContainer.java:71)
        [12:19:31][Gradle failure report]   at org.gradle.api.internal.plugins.DefaultProjectsPluginContainer.apply(DefaultProjectsPluginContainer.java:37)
        [12:19:31][Gradle failure report]   at org.gradle.api.internal.plugins.DefaultObjectConfigurationAction.applyPlugin(DefaultObjectConfigurationAction.java:101)
        [12:19:31][Gradle failure report]   at org.gradle.api.internal.plugins.DefaultObjectConfigurationAction.access$200(DefaultObjectConfigurationAction.java:32)
        [12:19:31][Gradle failure report]   at org.gradle.api.internal.plugins.DefaultObjectConfigurationAction$3.run(DefaultObjectConfigurationAction.java:72)
        [12:19:31][Gradle failure report]   at org.gradle.api.internal.plugins.DefaultObjectConfigurationAction.execute(DefaultObjectConfigurationAction.java:114)
        [12:19:31][Gradle failure report]   at org.gradle.api.internal.project.AbstractProject.apply(AbstractProject.java:840)
        [12:19:31][Gradle failure report]   at org.gradle.api.Project$apply.call(Unknown Source)
        [12:19:31][Gradle failure report]   at org.gradle.api.internal.project.ProjectScript.apply(ProjectScript.groovy:34)
        [12:19:31][Gradle failure report]   at org.gradle.api.Script$apply.callCurrent(Unknown Source)
        [12:19:31][Gradle failure report]   at build_1u57rmsd94d5nc5gifnrrhi5j6.run(D:\Installations\Teamcity-7.1\TeamCity\buildAgent\work\5c4a802802673aca\account\build.gradle:13)
        [12:19:31][Gradle failure report]   at org.gradle.groovy.scripts.internal.DefaultScriptRunnerFactory$ScriptRunnerImpl.run(DefaultScriptRunnerFactory.java:52)
        [12:19:31][Gradle failure report]   ... 29 more
        [12:19:31][Gradle failure report] 
```

我正在使用 teamcity 7.1 运行构建

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:39:37.790

好的，我明白了 :) 在运行实际使用 artifactory 插件的项目时，请检查是否选中了“项目使用 Artifactory Gradle 插件”复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:49:01.713

看起来像一个类加载问题。可能插件版本与您使用的 Gradle 版本不兼容。我建议询问插件的作者。还要让他们知道 Gradle 版本和完整的堆栈跟踪 ( `-S`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-23T06:02:30.503

如果您在 jenkins 中运行作业时遇到此问题，则问题可能是由 jenkins 中的错误引起的：[https ://issues.jenkins-ci.org/browse/JENKINS-16603](https://issues.jenkins-ci.org/browse/JENKINS-16603)

在我的情况下，解决方法是删除 --init-script 参数，正如错误报告者所建议的那样。

# function - 函数内的循环内的函数？

> ID：12446518
> 
> 赞同：1
> 
> 时间：2012-09-16T11:35:23.407
> 
> 标签：function, for-loop, counter

我正在编写 3 个部分的电子邮件验证表。

第 1 部分 - 根据允许的字符列表检查单个字符并返回真/假。

第 2 部分 - 使用对每个连续字符调用前一个函数的循环来检查字符串作为“@”之前或之后的部分。

第 3 部分 - 检查一封完整的电子邮件，它只包含一个“@”，“@”之前和之后的子字符串都满足第 2 部分，并且“@”之后的子字符串只有一个句号。

我已经完成了第 1 部分，但我的第 2 部分循环不正确，并且对于除空白表单之外的所有输入值都返回 true。这是代码 -

```
 function isValidEmailPart(part)
        {   var emailPartInput = document.getElementById("isValidPartArg").value;
    var emailPartLength = alert(emailPartInput.length);
    {
    if (emailPartInput.length == "")
      {
      return (false)
      }
      else
      {
    NUMBER_OF_CHARACTERS = alert((emailPartInput.length) - 1);
    var i = 0;
      {for(var i=0; i<NUMBER_OF_CHARACTERS; i++)
        {
        function isValidEmailChar()
          { var validChars = 'a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,0,1,2,3,4,5,6,7,8,9,_,-,.,';
            var emailPartInput = document.getElementById("isValidPartArg").value;
            var charInput = emailPartInput.charAt(i);
            var inputVar = validChars.indexOf(charInput);
            if (inputVar < 0)
            {
            return (false)
            }
          }
        }
        return (true);
      }
      }
    }
     } 
```

我知道这一定很简单，没有返回错误我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:12:32.480

请仔细考虑以下事项：

*   **单独定义函数：**您可以从另一个函数调用一个函数，但**不要在函数内部定义函数**

*   **确保你的代码没问题，注意你的代码语法：**我发现了额外`{`的例子。通常，您的代码编辑器会突出显示代码语法错误。

*   **注意代码的缩进：**良好的缩进有助于您更清晰地查看代码，并帮助您发现潜在的代码错误。

*   **查看不同类型的变量：**在 javascript 中，变量可以有不同的类型：布尔型、整数、浮点型、字符串等。您只能比较相同类型的变量（不要将胡萝卜和土豆混在一起！）所以，您不能例如`emailPartInput`，与空字符串进行比较`""`。

*   **在阅读下面的代码之前，您应该尝试搜索您的代码有什么问题，以及必须修改哪些内容才能使其正常工作。**

*   **非常仔细地检查我在下面的代码中写的注释（我花了很多时间来写它们！）**

* * *

**javascript函数：**

```
// This functions verifies if a char 'my_char' is valid
function isValidEmailChar(my_char)
{ 
    // 'my_char' is a i-th character of 'emailPartInput'
    var output = false;

    // 'validChars' is the array containing all the valid characters
    var validChars = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
                      'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
                      '0','1','2','3','4','5','6','7','8','9','_','-','.'];

    // We want to check if 'my_char' is in the array 'validChar'
    // So, for each character in the array 'validChar', we check that there's at least
    //  1 character in it which is equal to 'my_char'
    for(var i=0; i<validChars.length; i++)
    {
        // 'output' is the result that the function 'isValidEmailChar' will return
        // It is initially set to "false"
        // The line below means: we store in 'output' 
        //   the result of " output OR ['my_char' EQUALS the i-th character in the array 'validChars'] ".
        //   Which means that, in the end, 'output' will be "true" if there's at least one i-th character 
        //      in the  array 'validChars' where 'my_char' EQUALS the i-th character in the array  'validChars'.
        output = (output || (my_char == validChars[i]));
    }

    // We return the output
    // Note: It is better to define 1 'return' and not several
    return output;
}

// This function verifies if a part of Email is valid
function isValidEmailPart(emailPartInput)
{   
    // 'emailPartInput' is the part of email

    // 'output' is your function's result to be returned
    var output = false;

    alert("INPUT = "+emailPartInput);

    var nb_of_characters = emailPartInput.length;       
    alert("number of characters = "+nb_of_characters);

    if (nb_of_characters != 0)
    {
        output = true;
        var i = 0;

        while(output && i<nb_of_characters)
        {
            // 'is_character_valid' is a boolean value which is set to:
            //     - true: if the i-th character of 'emailPartInput' is valid
            //     - false: if not valid
            var is_character_valid = isValidEmailChar(emailPartInput.charAt(i));

            // The line below means that we store in the variable 'ouput' the result of
            //    'output' AND 'is_character_valid', which means that:
            //        if there's at least one 'is_character_valid' set to false 
            //        (= one i-th character of 'emailPartInput' is not valid)
            //        'output' will then be equals to false
            output = output && is_character_valid;

            i++;

            // We remark that if 'output' is false, we quit the 'while' loop
            // because finding one invalid character means that 'emailPartInput' is invalid
            // so, we do not need to check the other characters of 'emailPartInput'
        }
    } 
    else 
    {
        alert("No emailPartInput has been input"); 
    }

    // We return the output
    return output;
} 
```

* * *

**这是一个工作示例，您可以在其中测试您的功能：**

```
<HTML>
    <HEAD>
        <SCRIPT language="javascript">

        // This functions verifies if a char 'my_char' is valid
        function isValidEmailChar(my_char)
        { 
            // 'my_char' is a i-th character of 'emailPartInput'
            var output = false;

            // 'validChars' is the array containing all the valid characters
            var validChars = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
                      'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
                      '0','1','2','3','4','5','6','7','8','9','_','-','.'];

            // We want to check if 'my_char' is in the array 'validChar'
            // So, for each character in the array 'validChar', we check that there's at least
            //  1 character in it which is equal to 'my_char'
            for(var i=0; i<validChars.length; i++)
            {
                // 'output' is the result that the function 'isValidEmailChar' will return
                // It is initially set to "false"
                // The line below means: we store in 'output' 
                //   the result of " output OR ['my_char' EQUALS the i-th character in the array 'validChars'] ".
                //   Which means that, in the end, 'output' will be "true" if there's at least one i-th character 
                //      in the  array 'validChars' where 'my_char' EQUALS the i-th character in the array  'validChars'.
                output = (output || (my_char == validChars[i]));
            }

            // We return the output
            // Note: It is better to define 1 'return' and not several
            return output;
        }

        // This function verifies if a part of Email is valid
        function isValidEmailPart(emailPartInput)
        {   
            // 'emailPartInput' is the part of email

            // 'output' is your function's result to be returned
            var output = false;

            alert("INPUT = "+emailPartInput);

            var nb_of_characters = emailPartInput.length;       
            alert("number of characters = "+nb_of_characters);

            if (nb_of_characters != 0)
            {
                output = true;
                var i = 0;

                while(output && i<nb_of_characters)
                {
                    // 'is_character_valid' is a boolean value which is set to:
                    //     - true: if the i-th character of 'emailPartInput' is valid
                    //     - false: if not valid
                    var is_character_valid = isValidEmailChar(emailPartInput.charAt(i));

                    // The line below means that we store in the variable 'ouput' the result of
                    //    'output' AND 'is_character_valid', which means that:
                    //        if there's at least one 'is_character_valid' set to false 
                    //        (= one i-th character of 'emailPartInput' is not valid)
                    //        'output' will then be equals to false
                    output = output && is_character_valid;

                    i++;

                    // We remark that if 'output' is false, we quit the 'while' loop
                    // because finding one invalid character means that 'emailPartInput' is invalid
                    // so, we do not need to check the other characters of 'emailPartInput'
                }
            } 
            else 
            {
                alert("No emailPartInput has been input"); 
            }

            // We return the output
            return output;
        }

        function test() {
            var my_input = document.getElementById("my_input").value;

            var result = isValidEmailPart(my_input);

            if(result) 
                alert("The part of email is valid");
            else
                alert("The part of email is NOT valid");
        }

        </SCRIPT>
    </HEAD>
    <BODY>
        Enter you Email part here:
        <INPUT type="text" id="my_input" value="" />
        <button onclick="javascript:test();">Check the Email part!</button>   
    </BODY>
</HTML> 
```

**注意：**最重要的是确保您了解您在代码中编写的内容以及错误所在。

我想你知道仅仅复制一个作品对你没有好处。

如果您阅读了我的代码，我希望您花时间理解它并仔细阅读注释（我花了很多时间来编写它们！：S）

您也可以查看免费的在线教程来学习 JavaScript！:)

希望这可以帮助。如果您有任何问题，请随时提问，我很乐意为您提供帮助。

# windows - Windows 8 中的 Base64String

> ID：12446520
> 
> 赞同：1
> 
> 时间：2012-09-16T11:35:57.513
> 
> 标签：windows, string, bitmap, base64, windows-runtime

我有一个 Windows 8 程序，它使用图像选择器并将所选图像下载到服务器上。服务器提供了一个API，需要将图像转换为base64string。并且图像必须小于 7Mb。

我正在使用下面的代码：

```
FileOpenPicker openPicker = new FileOpenPicker();
openPicker.ViewMode = PickerViewMode.Thumbnail;
openPicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
openPicker.FileTypeFilter.Add(".jpg");
openPicker.FileTypeFilter.Add(".jpeg");
openPicker.FileTypeFilter.Add(".png");
StorageFile file = await openPicker.PickSingleFileAsync();
if (file != null)
{
    // Application now has read/write access to the picked file
    bitmap = new BitmapImage();
    byte[] buf;
    using (var stream = await file.OpenStreamForReadAsync())
    {
        buf = ReadToEnd(stream);
    }

    using (var stream = await file.OpenAsync(FileAccessMode.Read))
    {
        base64String = Convert.ToBase64String(buf);
        bitmap.SetSource(stream);
    }
} 
```

位图发送到服务器。但是有一个问题：例如，位图大小比 jpg 的大小要大得多。而且小 jpg 文件都不会发送到服务器，因为它们的位图版本大于 7 Mb。

我可以将图像转换为 base64string 而不将其转换为位图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:21:42.997

在此代码中，您读取图像（以 jpeg 编码）并将其转换为 base 64 字符串。在不减小图像大小的情况下，您无法减小 base 64 的大小。

为此，您可以使用 BitmapEncoder/Decoder 并将图像调整为更小的尺寸。

问候

# php - 在类中将数据库对象从一种方法传递到另一种方法的正确方法是什么

> ID：12446521
> 
> 赞同：1
> 
> 时间：2012-09-16T11:36:24.597
> 
> 标签：php, mysql, parameter-passing

我需要帮助来理解将在一种方法中创建的对象（MySQL 连接）传递给同一类中的另一种方法的正确方法。

我正在尝试创建一个数据库类，它使用构造函数和所有其他方法加载连接，使用这个连接来执行它们各自的功能。

在尝试这样做时，我不断收到此错误：

> 致命错误：在第 44 行的 /database.php 中的非对象上调用成员函数 query()

我的代码：

```
class database
{ 
    public $mysqli;

    public function __construct($database_server, $database_name, $database_user, $database_pass)
    {
        $mysqli = new mysqli($database_server,$database_user, $database_pass, $database_name);

        if ($mysqli->connect_error)
        {
                  die('Connect Error (' . $mysqli->connect_errno . ') '. $mysqli->connect_error);
        }
        echo "Database connection established successfully.<br>";
        return $this->mysqli;

    }

    public function fetch_data()
    {

        $query = "select * from payment";
        if ($result = $this->mysqli->query($query))
        {

            // fetch associative array
            while ($row = $result->fetch_assoc())
            {
                printf ("%s (%s)\n", $row["id"], $row["status"]);
            }

        }

    }
} 
```

任何帮助，将不胜感激。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:38:33.127

```
public function __construct($database_server, $database_name, $database_user, $database_pass)
{
    $mysqli = new mysqli($database_server,$database_user, $database_pass, $database_name);

    if ($mysqli->connect_error)
    {
              die('Connect Error (' . $mysqli->connect_errno . ') '. $mysqli->connect_error);
    }
    echo "Database connection established successfully.<br>";

    // instead of return, just set the local variable to the `mysqli` property.
    $this->mysqli = $mysqli;

} 
```

或者

```
public function __construct($database_server, $database_name, $database_user, $database_pass)
{
    $this->mysqli = new mysqli($database_server,$database_user, $database_pass, $database_name);

    if ($this->mysqli->connect_error)
    {
       die('Connect Error (' . $this^>mysqli->connect_errno . ') '. $this->mysqli->connect_error);
    }
    echo "Database connection established successfully.<br>";    
} 
```

并且`public $mysqli;`会更好`protected`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T11:38:50.197

你没有`$this->mysqli`在任何地方设置，你需要做`$this->mysqli = $mysqli;`而不是`return $this->mysqli`在你的构造中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T11:38:52.067

您实际上并没有创建 $mysqli 作为类的属性。

你需要：

```
class database
{

public $mysqli;

public function __construct($database_server, $database_name, $database_user, $database_pass)
{
    $this->mysqli = new mysqli($database_server,$database_user, $database_pass, $database_name);

    if ($this->mysqli->connect_error)
    {
              die('Connect Error (' . $this->mysqli->connect_errno . ') '. $this->mysqli->connect_error);
    }
    echo "Database connection established successfully.<br>";
    return $this->mysqli;

} 
```

或者

```
class database
{

public $mysqli;

public function __construct($database_server, $database_name, $database_user, $database_pass)
{
    $mysqli = new mysqli($database_server,$database_user, $database_pass, $database_name);

    if ($mysqli->connect_error)
    {
              die('Connect Error (' . $mysqli->connect_errno . ') '. $mysqli->connect_error);
    }
    echo "Database connection established successfully.<br>";
    $this->mysqli = $mysqli;
    return $this->mysqli;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T11:47:25.360

正如其他人已经提到的那样，您应该像这样设置mysqli：

```
$this->mysqli = new mysqli($database_server,$database_user, $database_pass, $database_name); 
```

我建议不要死在构造函数中，这不是由数据库类决定，而是由数据库类的用户决定。像这样改变它：

```
class database
{ 
    private $mysqli;
    public $error = false;

    public function __construct($database_server, $database_name, $database_user, $database_pass)
    {
        $this->mysqli = new mysqli($database_server,$database_user, $database_pass, $database_name);

        if ($mysqli->connect_error)
          $this->error = 'Connect Error (' . $mysqli->connect_errno . ') '. $mysqli->connect_error);

    } 
```

像这样构建数据库时，`$db = new Database( ... );`您可以检查错误属性，然后决定要做什么。

# html - 仅使用 CSS 和 HTML 编写的简单博客

> ID：12446524
> 
> 赞同：0
> 
> 时间：2012-09-16T11:36:38.087
> 
> 标签：html, css, blogs

我有一个简单的 html/css-only 静态网站，我想在上面添加一个博客。不需要评论和 RSS。

现在，我该如何做到这一点，而不必用纯 html 编写我的所有条目？

我的网站由一个垂直菜单和它右侧的一个区域组成，所有内容都在每个页面上。我想在博客页面的那个区域内有一个博客，所以在一个单独的页面上拥有自己的布局的博客不是我想要的。

谷歌搜索这对我没有多大帮助，因为大多数点击都在提供博客服务的网站上。

提前谢谢，我希望我不会太难。如果您认为在提问之前我应该​​尝试一些事情，请就我的问题留下一些反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T11:58:23.783

如果我理解你想要的答案是在纯 html 和 css 中是不可能的。仅使用 Html 和 css 无法创建博客（如果您不想在每次编写条目时都编辑源代码并且必须为每个条目创建一个新文件等等）。

您需要一些能够将条目存储和加载到您的站点的代码（php 左右）。Html 和 css 并不是为了让事情正常工作。使用 Html 您可以定义元素，以便它们是结构化的，然后使用 css 您“样式化”您的工作。但是对于博客的任务（我认为您需要一个编辑器来编辑站点上的文本，能够编辑、删除、多个站点等等），您需要像 php 或 aps.net 这样能够“相互影响”。

# android - E/AndroidRuntime(21484) 无法启动活动 ComponentInfo{lt.prasom/lt.prasom.MainMenu}：java.lang.NullPointerException

> ID：12446526
> 
> 赞同：1
> 
> 时间：2012-09-16T11:36:55.593
> 
> 标签：android, android-activity

我正在构建一个应用程序，但那里有问题。当我尝试运行我的应用程序时，出现以下错误：

```
>09-16 14:07:35.768: E/AndroidRuntime(21484): FATAL EXCEPTION: main
>09-16 14:07:35.768: E/AndroidRuntime(21484): java.lang.RuntimeException: Unable to start activity ComponentInfo{lt.prasom/lt.prasom.MainMenu}: java.lang.NullPointerException
>09-16 14:07:35.768: E/AndroidRuntime(21484):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
>09-16 14:07:35.768: E/AndroidRuntime(21484):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
>09-16 14:07:35.768: E/AndroidRuntime(21484):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
>09-16 14:07:35.768: E/AndroidRuntime(21484):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
>09-16 14:07:35.768: E/AndroidRuntime(21484):   at android.os.Handler.dispatchMessage(Handler.java:99)
>09-16 14:07:35.768: E/AndroidRuntime(21484):   at android.os.Looper.loop(Looper.java:130)
>09-16 14:07:35.768: E/AndroidRuntime(21484):   at android.app.ActivityThread.main(ActivityThread.java:3683)
>09-16 14:07:35.768: E/AndroidRuntime(21484):   at java.lang.reflect.Method.invokeNative(Native Method)
>09-16 14:07:35.768: E/AndroidRuntime(21484):   at java.lang.reflect.Method.invoke(Method.java:507)
>09-16 14:07:35.768: E/AndroidRuntime(21484):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
>09-16 14:07:35.768: E/AndroidRuntime(21484):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
>09-16 14:07:35.768: E/AndroidRuntime(21484):   at dalvik.system.NativeStart.main(Native Method)
>09-16 14:07:35.768: E/AndroidRuntime(21484): Caused by: java.lang.NullPointerException
>09-16 14:07:35.768: E/AndroidRuntime(21484):   at lt.prasom.MainMenu.onCreate(MainMenu.java:19)
>09-16 14:07:35.768: E/AndroidRuntime(21484):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
>09-16 14:07:35.768: E/AndroidRuntime(21484):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
>09-16 14:07:35.768: E/AndroidRuntime(21484):   ... 11 more 
```

我的清单：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="lt.prasom"
    android:versionCode="1"
    android:versionName="1.0"
    android:installLocation="preferExternal" >"

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MainMenu"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Black.NoTitleBar" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".GoodOffers" android:theme="@android:style/Theme.Black.NoTitleBar" />
        <activity android:name=".Search" android:theme="@android:style/Theme.Black.NoTitleBar" />
        <activity android:name=".Groups" android:theme="@android:style/Theme.Black.NoTitleBar" />
        <activity android:name=".Specialmenu" android:theme="@android:style/Theme.Black.NoTitleBar" />
    </application>
    <uses-permission android:name="android.permission.INTERNET" />
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
</manifest> 
```

我的活动在 lt.prasom 包中。当我重命名包名称时出现错误。

主菜单.java：

```
package lt.prasom;

import lt.prasom.R;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainMenu extends Activity {
    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button search = (Button) findViewById(R.id.searchbutt);
        search.setOnClickListener(new OnClickListener(){

            public void onClick(View arg0) {
                Intent i = new Intent(MainMenu.this.getApplicationContext(), Search.class);
                startActivity(i);

            }

        });
        Button groups = (Button) findViewById(R.id.groupsbutt);
        groups.setOnClickListener(new OnClickListener(){

            public void onClick(View arg0) {
                Intent i = new Intent(MainMenu.this.getApplicationContext(), Groups.class);
                startActivity(i);

            }

        });
        Button goods = (Button) findViewById(R.id.specialbutt);
        goods.setOnClickListener(new OnClickListener(){

            public void onClick(View arg0) {
                Intent i = new Intent(MainMenu.this.getApplicationContext(), Specialmenu.class);
                startActivity(i);

            }

        });
    }
} 
```

主要.xml：

```
<?xml version="1.0" encoding="utf-8"?>

        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingTop="10dp"
    android:orientation="vertical"
     xmlns:ui="http://schemas.android.com/apk/res/lt.prasom" xmlns:app="http://schemas.android.com/apk/res/lt.prasom"

    android:background="#f8f9fe" >
    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="20dp"
        android:layout_gravity="center"
        android:src="@drawable/logo" />

<Button android:id="@+id/goodsbutt"
                    android:layout_width="fill_parent"  
                    android:layout_height="wrap_content"
                    android:padding="10dp"
                    android:text="Geri pasiūlymai"

                    />
<Button android:id="@+id/akcijabutt"
                    android:layout_width="fill_parent"  
                    android:layout_height="wrap_content"
                    android:padding="10dp"
                    android:text="Akcijinės prekės"

                    />
<Button android:id="@+id/newsbutt"
                    android:layout_width="fill_parent"  
                    android:layout_height="wrap_content"
                    android:padding="10dp"
                    android:text="Naujos prekės"

                    />

</LinearLayout> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:59:31.663

`searchbutt`id 未在当前活动的 main.xml 中声明。您必须选择当前显示的元素 setContentView()

所以 `Button search = (Button) findViewById(R.id.searchbutt);`搜索是`null`和

```
search.setOnClickListener(new OnClickListener(){ 
```

抛出异常

# php - usort php 数组/对象多维

> ID：12446529
> 
> 赞同：2
> 
> 时间：2012-09-16T11:37:18.093
> 
> 标签：php, usort

我无法使 php`usort`正常工作。

我从数据库中获取这个：

```
Array ( [0] => stdClass Object ( [ID] => 10 [post_author] => 1 [post_date] => 2012-09-14 15:09:33 [post_date_gmt] => 2012-09-14 15:09:33 [post_content] => asdad [post_title] => geo [post_excerpt] => [post_status] => publish [comment_status] => open [ping_status] => closed [post_password] => [post_name] => geo [to_ping] => [pinged] => [post_modified] => 2012-09-16 10:54:14 [post_modified_gmt] => 2012-09-16 10:54:14 [post_content_filtered] => [post_parent] => 0 [guid] => http://localhost/gold/?post_type=tribe_events&p=10 [menu_order] => 0 [post_type] => tribe_events [post_mime_type] => [comment_count] => 0 [EventStartDate] => 2012-09-19 00:00:00 [EventEndDate] => 2012-09-19 23:59:59 [filter] => raw ) [1] => stdClass Object ( [ID] => 39 [post_author] => 1 [post_date] => 2012-09-16 11:01:32 [post_date_gmt] => 2012-09-16 11:01:32 [post_content] =>
Sorry, this entry is only available in English and Russian.
[post_title] => 19 [post_excerpt] => [post_status] => publish [comment_status] => open [ping_status] => open [post_password] => [post_name] => 39 [to_ping] => [pinged] => [post_modified] => 2012-09-16 11:01:49 [post_modified_gmt] => 2012-09-16 11:01:49 [post_content_filtered] => [post_parent] => 0 [guid] => http://localhost/gold/?post_type=tribe_events&p=39 [menu_order] => 0 [post_type] => tribe_events [post_mime_type] => [comment_count] => 0 [EventStartDate] => 2012-09-19 08:00:00 [EventEndDate] => 2012-09-19 17:00:00 [filter] => raw ) [2] => stdClass Object ( [ID] => 37 [post_author] => 1 [post_date] => 2012-09-16 10:55:47 [post_date_gmt] => 2012-09-16 10:55:47 [post_content] => asd [post_title] => event [post_excerpt] => [post_status] => publish [comment_status] => open [ping_status] => open [post_password] => [post_name] => event [to_ping] => [pinged] => [post_modified] => 2012-09-16 10:55:47 [post_modified_gmt] => 2012-09-16 10:55:47 [post_content_filtered] => [post_parent] => 0 [guid] => http://localhost/gold/?post_type=tribe_events&p=37 [menu_order] => 0 [post_type] => tribe_events [post_mime_type] => [comment_count] => 1 [EventStartDate] => 2012-09-21 08:00:00 [EventEndDate] => 2012-09-21 17:00:00 [filter] => raw ) [3] => stdClass Object ( [ID] => 38 [post_author] => 1 [post_date] => 2012-09-16 10:57:01 [post_date_gmt] => 2012-09-16 10:57:01 [post_content] => asdsa [post_title] => sada [post_excerpt] => [post_status] => publish [comment_status] => open [ping_status] => open [post_password] => [post_name] => sada [to_ping] => [pinged] => [post_modified] => 2012-09-16 10:57:01 [post_modified_gmt] => 2012-09-16 10:57:01 [post_content_filtered] => [post_parent] => 0 [guid] => http://localhost/gold/?post_type=tribe_events&p=38 [menu_order] => 0 [post_type] => tribe_events [post_mime_type] => [comment_count] => 0 [EventStartDate] => 2012-09-27 08:00:00 [EventEndDate] => 2012-09-30 17:00:00 [filter] => raw ) [4] => stdClass Object ( [ID] => 38 [post_author] => 1 [post_date] => 2012-09-16 10:57:01 [post_date_gmt] => 2012-09-16 10:57:01 [post_content] => asdsa [post_title] => sada [post_excerpt] => [post_status] => publish [comment_status] => open [ping_status] => open [post_password] => [post_name] => sada [to_ping] => [pinged] => [post_modified] => 2012-09-16 10:57:01 [post_modified_gmt] => 2012-09-16 10:57:01 [post_content_filtered] => [post_parent] => 0 [guid] => http://localhost/gold/?post_type=tribe_events&p=38 [menu_order] => 0 [post_type] => tribe_events [post_mime_type] => [comment_count] => 0 [EventStartDate] => 2012-09-28 08:00:00 [EventEndDate] => 2012-10-01 17:00:00 [filter] => raw ) [5] => stdClass Object ( [ID] => 38 [post_author] => 1 [post_date] => 2012-09-16 10:57:01 [post_date_gmt] => 2012-09-16 10:57:01 [post_content] => asdsa [post_title] => sada [post_excerpt] => [post_status] => publish [comment_status] => open [ping_status] => open [post_password] => [post_name] => sada [to_ping] => [pinged] => [post_modified] => 2012-09-16 10:57:01 [post_modified_gmt] => 2012-09-16 10:57:01 [post_content_filtered] => [post_parent] => 0 [guid] => http://localhost/gold/?post_type=tribe_events&p=38 [menu_order] => 0 [post_type] => tribe_events [post_mime_type] => [comment_count] => 0 [EventStartDate] => 2012-09-29 08:00:00 [EventEndDate] => 2012-10-02 17:00:00 [filter] => raw ) [6] => stdClass Object ( [ID] => 38 [post_author] => 1 [post_date] => 2012-09-16 10:57:01 [post_date_gmt] => 2012-09-16 10:57:01 [post_content] => asdsa [post_title] => sada [post_excerpt] => [post_status] => publish [comment_status] => open [ping_status] => open [post_password] => [post_name] => sada [to_ping] => [pinged] => [post_modified] => 2012-09-16 10:57:01 [post_modified_gmt] => 2012-09-16 10:57:01 [post_content_filtered] => [post_parent] => 0 [guid] => http://localhost/gold/?post_type=tribe_events&p=38 [menu_order] => 0 [post_type] => tribe_events [post_mime_type] => [comment_count] => 0 [EventStartDate] => 2012-09-30 08:00:00 [EventEndDate] => 2012-10-03 17:00:00 [filter] => raw ) ) 
```

我想使用 usort 和 comment_count 对象来订购这个。我已经尝试过了（但这显然是错误的）：

```
function sortByComments($a, $b) {
    return ($a[0]->comment_count) - ($b[0]->comment_count);
}

$sorted_by_comments_array = usort($all_events, 'sortByComments'); 
```

错误： `Cannot use object of type stdClass as array`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:41:02.130

我发现读取数组的结构有点困难，但我认为我说数组的元素是您要排序的对象是正确的。这意味着`$a`并且`$b`它们本身将是您需要排序的对象。

因此，这意味着您不需要以以下方式访问它们，`$a[0]->comment_count`而只需以以下方式访问它们`$a->comment_count`：

```
function sortByComments($a, $b) {
    return $a->comment_count - $b->comment_count;
} 
```

（请注意，括号也是不必要的。）

# c - 在 C 中求和并查找数组的非零条目

> ID：12446530
> 
> 赞同：1
> 
> 时间：2012-09-16T11:37:37.963
> 
> 标签：c, arrays, gsl

我需要对 C 中的数组做两件事：

1.  汇总其条目。
2.  查找所有非零条目的位置。

我通过循环遍历数组的每个元素来做到这两点。例如

```
int sum_array(int a[], int num_elements)
{
   int i, sum=0;
   for (i=0; i<num_elements; i++)
   {
     sum = sum + a[i];
   }
   return(sum);
} 
```

对于任务 2，我将检查条目是否为 0。如果不是，则将其位置添加到另一个数组以将其标记为非零。

**问题**

有没有更有效的方法来做这些？

如果那里有更有效的解决方案，我也在使用 GNU Scientific Library (GSL)。我最近才开始 C。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:57:40.973

对于第 2 部分，您实际上不需要做任何工作。

如果数组中的值为零，那么它将评估为假。任何非零值都将评估为真。因此，您可以随时遍历数组，并忽略零值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:47:07.777

根据 Gregor、EvilTeach 和我自己的一些谷歌搜索的评论，我的方法是可以接受的。

# android - 如何将 JPEG 存储为 Byte[] 以加快加载速度？

> ID：12446533
> 
> 赞同：0
> 
> 时间：2012-09-16T11:37:47.467
> 
> 标签：android

我需要将大约 150 个 JPEG 图像加载到 ArrayList 中以播放动画。

如果我这样加载它们

```
ByteArrayOutputStream stream = new ByteArrayOutputStream();
BitmapFactory.decodeResource(getResources(), R.drawable.y1).compress(Bitmap.CompressFormat.JPEG, 80, stream);
byeArr.add( stream.toByteArray() ); 
```

150 张图像最多可能需要 10 秒，所以也许有办法加快速度？我可以以某种方式将这些图像存储在资源或资产中已经作为字节 [] 或其他东西吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:38:37.660

您可以使用以下方法从资源中获取原始数据。您无需解码然后再次压缩。

```
byte[] getBytesFromResource(final int res) {
    byte[] buffer = null;
    InputStream input = null;

    try {
        input = getResources().openRawResource(res);
        buffer = new byte[input.available()];
        if (input.read(buffer, 0, buffer.length) != buffer.length) {
            buffer = null;
        }
    } catch (IOException e) {
        buffer = null;
    } finally {
        if (input != null) {
            try {
                input.close();
            } catch (IOException e) {}
        }
    }

    return buffer;
} 
```

# google-drive-api - 在没有任何 UI 的情况下上传到 Google Drive？

> ID：12446535
> 
> 赞同：31
> 
> 时间：2012-09-16T11:38:08.583
> 
> 标签：google-drive-api

我正在寻找一个服务器应用程序来将文件上传到 Google Drive。我以前使用的是 Documents List API，但我发现它已被弃用。我想迁移到 Google Drive API，但这似乎非常受限于使用 web/OAuth 流。

我需要做的就是将 Word、Excel 文件等上传到 Google Drive，但我需要以完全自动化的方式完成此操作，无需任何类型的用户界面。我希望编写一个命令行应用程序，它可以在 cron 或其他任何东西上运行，并且不需要通过网络等进行人工干预。

我宁愿离开 Documents List API，因为我不想在他们最终关闭它时被烧毁，我想使用谷歌不会很快摆脱的受支持的 API。这存在吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T16:58:10.143

您的应用程序需要用户的许可才能对他的文件使用 API。该授权需要使用基于 Web 的 Oauth 进行。该授权的结果是您的服务器应用程序最终会获得一个可以存储的刷新令牌。您的应用可以随时将该刷新令牌转换为访问令牌并访问驱动器文件。

因此，只要您接受需要进行一次性授权，您就可以实现您想要的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-21T22:07:19.107

以下是使用[GitHub 的 Windows、Linux 和 MacOS 的说明 | 驱动器](https://github.com/prasmussen/gdrive)。

```
$ gdrive list
Go to the url... enter the oauth verification code... OK
$ gdrive upload file
$ gdrive mkdir UploadDir
ID_of_UploadDir
$ gdrive sync upload LocalDir ID_of_UploadDir 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-05T09:06:57.317

`gdrive`解决方案目前不起作用（登录问题）。所以你现在可以使用`rclone`. 你可以安装它

```
conda install -c conda-forge rclone 
```

然后按照配置文档[https://rclone.org/drive/](https://rclone.org/drive/)
配置后，您将能够使用此命令复制到谷歌驱动器（统计标志用于进度条）

```
rclone copy <filename> remote: --stats-one-line -P --stats 2s 
```

rclone 包含许多后端，因此您不仅可以上传到谷歌驱动器

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-08T13:52:25.900

由于[gdrive 工具](https://github.com/prasmussen/gdrive)不再维护。我找到了一个官方和更好的方法。

使用卷曲。

1.  安装卷曲

`sudo apt install curl`

2.  [在google 控制台](https://console.developers.google.com/apis/credentials?pli=1)上创建您的项目凭据。如果您没有帐户，请先注册一个帐户。

创建凭据 > 配置 OAth 同意屏幕（如果需要）> 应用程序类型 > 电视和受限输入设备 > 保存您的客户端 ID 和客户端密码。

3.  验证设备

`curl -d "client_id=<client_id>&scope=https://www.googleapis.com/auth/drive.file" https://oauth2.googleapis.com/device/code`

预期响应：

```
{"device_code": "<long string>",
"user_code": "xxx-xxx-xxx",
"expires_in": 1800,
"interval": 5,
"verification_url": "https://www.google.com/device"} 
```

然后进入`https://www.google.com/device`-->回车`"user_code"`-->赋予相关权限。

4.  保存`"device_code"`和`"user_code"`值。
5.  获取承载码

`curl -d client_id=<client id> -d client_secret=<client secret> -d device_code=<device code> -d grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Adevice_code https://accounts.google.com/o/oauth2/token`

预期输出：

```
{
"access_token": ".....",
"expires_in": 3599,
"refresh_token": "....",
"scope": "https://www.googleapis.com/auth/drive.file",
"token_type": "Bearer"
} 
```

6.  保存`"access_token"`值。

7.  开始上传

`curl -X POST -L -H "Authorization: Bearer <enter access_token here>" -F "metadata={name :'filename.zip'};type=application/json;charset=UTF-8" -F "file=@filename.zip;type=application/zip" "https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart"`

警告

在上传之前制作文件的 zip 存档。上面的代码适用于存档文件。我用上述方法成功上传了 10gb 的存档。

[来源](https://towardsdatascience.com/uploading-files-to-google-drive-directly-from-the-terminal-using-curl-2b89db28bb06)

# c - 在 C 中使用 scanf 进行模式匹配

> ID：12446539
> 
> 赞同：2
> 
> 时间：2012-09-16T11:38:28.987
> 
> 标签：c, pattern-matching, scanf

我一直被这个问题困扰。问题的要求很简单。我要做的就是检查用户输入并允许用户只输入小写字母。另一个约束是我只想使用 scanf() 来完成它。我知道我可以使用 gets() 和其他输入函数，但是为了更好地理解它，我还是想使用 scanf() 来做到这一点。

我在 GCC 上尝试了以下方法：

```
char str[100000];
return_value=scanf("%99999[a-z]",str);
if(return_value==0 || return_value==EOF)
{
  printf("illegal input");
}
else
  printf("input accepted"); 
```

以下工作绝对符合预期。因此，如果用户尝试以大写字母输入任何字符串，代码只会打印出：“非法输入”。

当我尝试将上述代码放入有限的 while 循环时，问题就出现了。例如：

```
int counter=0; 
char str[100000];
scanf("%2d",&counter);
while(counter>0)
{
  fflush(stdin);
  return_value=scanf("%99999[a-z]",str); //note
  if(return_value==0 || return_value==EOF)
  {
    printf("illegal input");
  }
  else
    printf("input accepted");
  counter--;
 }//end of while 
```

在上述情况下，只要用户输入变量“counter”的值并按下回车键，控件就会立即运行并打印“非法输入”，甚至无需等待用户输入字符串。

为了更正此错误，我尝试将以下内容代替标记为注释的行：

```
return_value=scanf("%99999s[a-z]",str); //note 
```

甚至这个：

```
return_value=scanf("%99999c[a-z]",str); //note 
```

在任何一种情况下，尽管允许用户在输入 'counter' 变量的值后输入输入字符串，但用户输入清理并未完成，即即使用户输入由大写字符组成的字符串，输出也不是“非法输入” ”（应该是这样），而是“接受输入”。

现在有人可以向我解释一下。我哪里出错了，还是我只是忽略了某些事情并犯了一些愚蠢的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:52:37.017

`fflush()`是一种不恰当的清除方式`stdin`。相反，用于`scanf`阅读直到`EOF`或只是

```
while((c = getchar()) != '\n' && c != EOF) { /* Discard */ } 
```

另外，我建议甚至对诸如 else 之类的单个语句进行范围界定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T11:40:40.757

您正在尝试一次又一次地阅读错误的输入。例如，如果您想跳过一个字符，您必须这样做，以防用户输入错误的输入，`scanf("%.*s")`-> 这将跳过所有内容，直到下一个 \n。

说明：如果 scanf() 失败，它什么也不读取 - 所以，当它再次尝试读取时，它将从之前失败的同一个地方开始。

# java - 证券交易所服务器算法

> ID：12446549
> 
> 赞同：-1
> 
> 时间：2012-09-16T11:38:58.710
> 
> 标签：java, algorithm, stocks

我正在寻找一种算法，该算法将根据购买/出售股票的人数计算股票的内在价值，并另外考虑看涨/看跌来波动股票价值。

本质上：

```
Current Price = Function(Stock Price, Number of Sellers, Number of Buyers) 
```

本质上，我想知道证券交易所服务器后端是如何工作的，以及计算股票价格所涉及的算法。

这方面的任何指南/帮助或文档都会非常有帮助。我尝试使用 google 环顾四周，但信息非常稀疏、不准确，我什至不知道要使用哪些关键字进行有效搜索。

此外，是否有任何现有的 Java 代码可供我参考？

此外，我发现 API 与我在[http://jessx.ec-lille.fr/index.php](http://jessx.ec-lille.fr/index.php)寻找的内容很接近。仍然有兴趣了解其背后的技术/算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:43:42.600

> 另外，是否有任何现有的 java 代码可供我参考？

如果您能获得真正的证券交易所系统的源代码，我会感到非常惊讶。

话虽如此，我不知道股票的内在价值是否与它的买卖价格不同。随意尝试，但你可能会通过研究相关的经济学文献做得更好，而不是在代码中寻找答案。您可能需要扎实的经济学基础才能理解代码。

（请记住：如果有可能通过“内在价值”衡量来赚钱，那么成千上万**真正聪明**的人可能已经尝试过......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T11:49:38.307

我认为你在这里混合了两件事。简单来说，交易所提供了一种服务，使买卖双方能够相互见面并实现交易。

交易发生的价格完全取决于交易所收到的订单（客户买卖），而不是交易所，交易所只报告交易发生的价格。

交易所可能会产生影响的地方是它启用某些类型的订单（例如止损订单）以及它如何处理它 - 但听起来你对那部分不感兴趣。

您似乎正在寻找的内容可能很简单：

*   定义资产的价格，例如 100
*   让买家和卖家以当前价格的 +/- 10 美分的限制随机发送订单
*   当买单遇到卖单时（比如买方想以 100.05 买入，而卖方也想以该价格卖出），生成一笔交易，为资产提供新价格
*   环形

但从实现的角度来看，（非常）棘手的部分在于*“买家和卖家**随机**发送订单......”*。

您还可以添加外部冲击（例如公告），这会改变买家与卖家的平衡，从而引发价格的大幅上涨（上涨或下跌）。

# c++ - 类模板、矩阵和加法

> ID：12446550
> 
> 赞同：0
> 
> 时间：2012-09-16T11:39:00.333
> 
> 标签：c++, templates, overloading, operator-keyword

我正在涉足运算符重载的世界。我已经在我的 Vector2 类上进行运算符重载取得了一些成功，我现在正在研究一个 Matrix 类，并且正在尝试编写一个函数，它将两个矩阵一起添加到一个新矩阵中。不过，我偶然发现了这个错误，谷歌搜索它并没有让我更进一步，因为人们似乎有一个完全不同的问题，但同样的问题。

这是类声明：

**矩阵.h**

```
#ifndef __MAGE2D_MATRIX_H
#define __MAGE2D_MATRIX_H

namespace Mage {
    template<class T>
    class Matrix {
    public:
        Matrix();
        Matrix(unsigned int, unsigned int);
        ~Matrix();

        unsigned int getColumns();
        unsigned int getRows();

        T&       operator[](unsigned int);
        const T& operator[](unsigned int) const;
        Matrix operator+(const Matrix&);
        Matrix operator-(const Matrix&);

    private:
        unsigned int rows;
        unsigned int columns;
        T*           matrix;
    };
}

#endif // __MAGE2D_MATRIX_H 
```

这是不工作的违规功能（这些是 matrix.cpp 的第 31 到 45 行）：

**矩阵.cpp**

```
template<class T>
Matrix Matrix<T>::operator+(const Matrix<T>& A) {
    if ((rows == A.getRows()) && (columns == A.getColumns())) {
        Matrix<T> B = Matrix<T>(rows, columns);
        for (unsigned int i = 0; i <= rows; ++i) {
            for (unsigned int j = 0; i <= columns; ++i) {
                B[i][j] = matrix[i][j] + A[i][j];
            }
        }

        return B;
    }

    return NULL;
} 
```

最后但并非最不重要的是，这是我遇到的两个错误。

```
1>ClCompile:
1>  matrix.cpp
1>src\matrix.cpp(32): error C2955: 'Mage::Matrix' : use of class template requires template argument list
1>          C:\Users\Jesse\documents\visual studio 2010\Projects\Mage2D\Mage2D\include\Mage2D/Math/Matrix.h(6) : see declaration of 'Mage::Matrix'
1>src\matrix.cpp(47): error C2244: 'Mage::Matrix<T>::operator +' : unable to match function definition to an existing declaration
1>          C:\Users\Jesse\documents\visual studio 2010\Projects\Mage2D\Mage2D\include\Mage2D/Math/Matrix.h(17) : see declaration of 'Mage::Matrix<T>::operator +'
1>          definition
1>          'Mage::Matrix Mage::Matrix<T>::operator +(const Mage::Matrix<T> &)'
1>          existing declarations
1>          'Mage::Matrix<T> Mage::Matrix<T>::operator +(const Mage::Matrix<T> &)'
1>
1>Build FAILED. 
```

有人知道这里发生了什么吗？这可能真的很简单，我很愚蠢。我需要一些咖啡:|

真挚地，

*杰西*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:42:10.707

> 'Mage::Matrix' : 使用类模板需要模板参数列表

在 operator+ 的定义中：

```
 template<class T>
 Matrix<T> Matrix<T>::operator+(const Matrix<T>& A)
        ^ 
```

# ios - 更改 UIDatePicker 模式后的 EXC_BAD_ACCESS

> ID：12446556
> 
> 赞同：0
> 
> 时间：2012-09-16T11:40:12.450
> 
> 标签：ios, ios5, ios5.1

我有一个日期选择器，它应该从 UIDatePickerModeDateAndTime 切换到 UIDatePickerModeTime ，反之亦然，具体取决于所选的表视图单元格。当视图被加载时，默认模式是 UIDatePickerModeDateAndTime，我可以毫无问题地更改选择器值。但是在选择下一个单元格后，UIDatePickerModeTime 被设置，从这一点开始，它不再可能更改选择器的值：它崩溃并出现 EXC_BAD_ACCESS 并且没有任何日志。

在重要代码下方：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  if (indexPath.row == 0) {
    self.dateTimePicker.minimumDate = [NSDate date];
    self.dateTimePicker.datePickerMode = UIDatePickerModeDateAndTime;
  }
  else {
    self.dateTimePicker.minimumDate = nil;
    self.dateTimePicker.datePickerMode = UIDatePickerModeTime;
  }
} 
```

我在这里想念什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:36:55.550

我的代码没有任何问题，这是 iOS 6 beta 3 的一个错误。
一旦我安装了最终的 iOS 6.0 版本，它就会自动修复。

# php - 将 POST 值传递给元素值

> ID：12446558
> 
> 赞同：1
> 
> 时间：2012-09-16T11:40:21.877
> 
> 标签：php

正如标题所说，我如何能够执行这就是我得到的：

这是容器：

```
 <select name="entrylevel">
   <options> val </option> 
```

这就是我的方式

```
<?php $lvl=$_POST['entrylevel']; ?>
<input type="text" readonly="readonly"  name="level" value="$lvl"> 
```

目前它只是在我的文本元素中吐出 $lvl 。将不胜感激任何帮助我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:42:58.780

首先，你的标记是错误的。你应该使用`<option>`not `<options>`。接下来，你应该像这样添加 value 属性`<option value="val">any text</option>`，所以它应该是这样的：

```
<select name="entrylevel">
<option value="val"> val </option> 
```

和代码

```
<?php $lvl=$_POST['entrylevel']; ?>
<input type="text" readonly="readonly"  name="level" value="<?php echo $lvl; ?>"> 
```

或者以更干净和更正的方式：

```
<?php
$lvl = $_POST['entrylevel'];
printf('<input type="text" readonly="readonly" name="level" value="%s">',
       htmlspecialchars($lvl));
?> 
```

顺便说一句：`type="text"`如果未指定，则为默认值，因此可以跳过它，但无论如何保留它都不是错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T11:42:37.643

需要告诉 PHP 打印变量值。

```
<input type="text" readonly="readonly"  name="level" value="<?=$lvl?>"> 
```

这是相当于以下的简短语法：

```
<input type="text" readonly="readonly"  name="level" value="<?php echo $lvl; ?>"> 
```

# ipad - 在启动屏幕上不受控制地全屏播放视频

> ID：12446561
> 
> 赞同：0
> 
> 时间：2012-09-16T11:40:44.790
> 
> 标签：ipad, video, fullscreen, playback

我正在创建一个 iPad 应用程序，我想在应用程序加载数据时在启动屏幕上无控制地播放视频全屏，我搜索并找到了一些关于 MPPlayerViewController 的文章，我使用它但我有一些问题如下：

*   我使用以下代码播放视频：

> ```
> NSString *moviePath = [ [[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"StartupVideo.mp4"];
>     moviePlayerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:moviePath]];
>     moviePlayerViewController.view.frame = self.view.bounds;
> 
>     [self.view addSubview:moviePlayerViewController.view];
>     [self.view sendSubviewToBack:moviePlayerViewController.view];
> 
>     [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieFinishedCallback:)
>                                                  name:MPMoviePlayerPlaybackDidFinishNotification
>                                                object:[moviePlayerViewController moviePlayer]];
> 
>     MPMoviePlayerController *player = [moviePlayerViewController moviePlayer];
>     player.fullscreen = YES;
>     player.movieSourceType = MPMovieSourceTypeFile;
>     player.initialPlaybackTime = -1.0;
>     [player play]; 
> ```

一切似乎都正确，但视频未加载，我只看到黑屏。

*   如何隐藏 MPVideoPlayerView 中的控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T21:22:09.147

代替 `[NSURL URLWithString:moviePath]`

利用

```
[NSURL fileURLWithString:moviePath] 
```

让我这么多次.. :)

# jquery - 如何显示谷歌地图式的慢 AJAX 请求警告？

> ID：12446565
> 
> 赞同：0
> 
> 时间：2012-09-16T11:41:31.107
> 
> 标签：jquery, ajax, settimeout

我目前正在使用 ajaxStart、ajaxStop 和 ajaxSetups 在使用 jQuery 的 .load() 函数加载页面时成功显示“加载”div。

我想做的是在ajax请求期间添加一个“这需要一段时间”警告，比如谷歌地图......

因此，在 ajaxStart 触发 5 秒后，“LOADING” div 变为“这很慢”。然后应该在 ajaxStop 上消失....

我目前拥有的（如下）不起作用。在加载页面时，“LOADING” div 会正确显示和消失，但在 5000 毫秒后出现“这很慢”错误，尽管页面已成功加载。

```
$.ajaxSetup({
error:function(x,e){
    if('parsererror'==e) {
        $('.ajax-warning, ajax-errors').fadeOut('fast');
        $('#technical-error').fadeIn('fast');
        window.setTimeout(function(){
            $("#technical-error").fadeOut('fast');
        }, 3000);
    } else if('timeout'==e) {
        $('.ajax-warning, ajax-errors').fadeOut('fast');
        $('#timeout-error').fadeIn('fast');
    }
    else if ( "status" in x ) {
        if(0 == x.status){
            $('.ajax-warning, ajax-errors').fadeOut('fast');
            $('#offline-error').fadeIn('fast');
            window.setTimeout(function(){
                $("#offline-error").fadeOut('fast');
            }, 3000);
        }else if (404 == x.status){
            $('.ajax-warning, ajax-errors').fadeOut('fast');
            $('#404-error').fadeIn('fast');
            window.setTimeout(function(){
                $("#404-error").fadeOut('fast');
            }, 3000);
        }else if(500 == x.status){
            $('.ajax-warning, ajax-errors').fadeOut('fast');
            $('#500-error').fadeIn('fast');
            window.setTimeout(function(){
                $("#500-error").fadeOut('fast');
            }, 3000);
        }
    }
    else {
        $('.ajax-warning, ajax-errors').fadeOut('fast');
        $('#unknown-error').fadeIn('fast');
        window.setTimeout(function(){
            $("#500-error").fadeOut('fast');
        }, 3000);
    }
}
});

$(document).ajaxStart(function(){
$('.ajax-warning, ajax-errors').fadeOut('fast');
$("#loading-warning").fadeIn('fast');
window.setTimeout(function(){
    $('.ajax-warning, ajax-errors').fadeOut('fast');
    $("#timeout-error").fadeIn('fast');
}, 5000);
});

$(document).ajaxStop(function(){
$("#loading-warning").fadeOut('fast');
clearTimeout();
});

$(document).ajaxError(function(){
$('.ajax-warnings').fadeOut('fast');
$('#loading-error').fadeIn('fast');
window.setTimeout(function(){
    $("#loading-error").fadeOut('fast');
}, 3000);
}); 
```

如果有人能指出我正确的方向，将不胜感激！

更新：

作为对 Korvin 的回应，我现在有以下代码 - 现在根本不会出现超时错误。

```
var loadingTimer = setTimeout(function(){
        $('.ajax-warning, ajax-errors').fadeOut('fast');
        $("#timeout-error").fadeIn('fast');
    }, 5000);

$(document).ajaxStart(function(){
$('.ajax-warning, ajax-errors').fadeOut('fast');
$("#loading-warning").fadeIn('fast');
setTimeout(loadingTimer);
});

$(document).ajaxStop(function(){
$("#loading-warning").fadeOut('fast');
clearTimeout(loadingTimer);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:44:26.663

您可以在其中创建一个 setTimeout 来清除 ajax 响应，如下所示：

```
var timer = setTimeout(function(){ alert('Woah, this is taking so long!'); },500);
$.post('myscript.format',{data:data},function(e) {
     clearTimeout(timer);
     do(stuff);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:38:29.043

好的，经过 Korvin 的大量帮助，我想出了这个解决问题的方法：

```
var loadingTimer = null;

$(document).ajaxStart(function(){
$('.ajax-warning, ajax-errors').fadeOut('fast');
$("#loading-warning").fadeIn('fast');
loadingTimer = setTimeout(function(){
        $('.ajax-warning, ajax-errors').fadeOut('fast');
        $("#timeout-error").fadeIn('fast');
        },3000);
});

$(document).ajaxStop(function(){
$(".ajax-warning, .ajax-errors").fadeOut('fast', function(){
    clearTimeout(loadingTimer);
});
}); 
```

本质上，它的作用是在我的每个 AJAX 事件加载 3 秒后显示一个 LOADING div（一个引导警报 div，很抱歉造成混淆）和一个“这很慢”的 div（另一个引导警报，这次是红色）地点。

# php - 表的条件sql查询

> ID：12446567
> 
> 赞同：6
> 
> 时间：2012-09-16T11:41:51.590
> 
> 标签：php, mysql, sql, sql-server, database

我必须从 SQL 运行查询。也许太容易了，但不幸的是我不懂SQL。所以这是我的表：

**电影**

```
id | movie_name
------------
1  | prometheus 
```

**名字**

```
id | person_name
-----------------
1  | Ridley Scott
2  | Noomi Rapace
3  | Michael Fassbender
4  | Charlize Theron
5  | Damon Lindelof 
```

**电影演员**

```
id | film_id | person_id | type
-------------------------------
1  | 1       | 1         | director
2  | 1       | 2         | actor
3  | 1       | 3         | actor
4  | 1       | 4         | actor
5  | 1       | 5         | writer 
```

我怎样才能从这些表中得出这样的结论：

**电影档案**

```
id | movie_name | director     | writer         | cast
---------------------------------------------------------------------------------------
1  | prometheus | Ridley Scott | Damon Lindelof | Noomi Rapace, Michael Fassbender, Charlize Theron 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T11:53:02.930

您需要[加入](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)您的表格，然后[`GROUP_CONCAT()`](http://dev.mysql.com/doc/en/group-by-functions.html#function_group-concat)在给定合适条件的情况下按电影对名称列执行聚合进行分组：

```
SELECT   f.id,
         f.movie_name,
         GROUP_CONCAT(IF(c.type='director', n.person_name, NULL)) AS director,
         GROUP_CONCAT(IF(c.type='writer',   n.person_name, NULL)) AS writer,
         GROUP_CONCAT(IF(c.type='actor',    n.person_name, NULL)) AS cast
FROM     films f LEFT JOIN films_cast c ON c.film_id   = f.id
                 LEFT JOIN names n      ON c.person_id = n.id
GROUP BY f.id 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/0f0dd/3/0)上查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T12:28:52.793

由于您的问题上也有`sql-server`标签，不幸的是 sql-server 没有，因此需要[FOR XML / STUFF 之](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-ms-sql-server-2005)`GROUP_CONCAT`类的替代方法：

```
SELECT f.id, f.movie_name,
       STUFF((SELECT ',' + p.person_name
              FROM persons p 
                INNER JOIN films_cast fc on fc.person_id = p.id
                WHERE fc.film_id = f.id AND fc.type = 'director'
              FOR XML PATH (''))
             , 1, 1, '') AS director,
        STUFF((SELECT ',' + p.person_name
              FROM persons p 
                INNER JOIN films_cast fc on fc.person_id = p.id
                WHERE fc.film_id = f.id AND fc.type = 'writer'
              FOR XML PATH (''))
             , 1, 1, '') AS writer,
        STUFF((SELECT ',' + p.person_name
              FROM persons p 
                INNER JOIN films_cast fc on fc.person_id = p.id
                WHERE fc.film_id = f.id AND fc.type = 'actor'
              FOR XML PATH (''))
             , 1, 1, '') AS cast
    FROM films f; 
```

[SQLFiddle在这里](http://sqlfiddle.com/#!3/e1cd1/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T11:54:01.697

尝试这个，

```
SELECT      a.id, a.movie_name,
            GROUP_CONCAT((CASE WHEN b.type = 'director' THEN c.person_name ELSE NULL END)) as `director`,
            GROUP_CONCAT((CASE WHEN b.type = 'writer' THEN c.person_name ELSE NULL END)) as `writer`,
            GROUP_CONCAT((CASE WHEN b.type = 'actor' THEN c.person_name ELSE NULL END)) as `cast`
FROM        films a
            LEFT JOIN film_cast b
                ON a.id = b.film_id
            LEFT JOIN names c
                ON b.person_id = c.id
GROUP BY    a.id, a.movie_name 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/0f0dd/2)

# coffeescript - 创建自定义 TextMate 命令以将 *.coffee 编译成 *.js

> ID：12446568
> 
> 赞同：1
> 
> 时间：2012-09-16T11:41:51.690
> 
> 标签：coffeescript, textmate

如何创建自定义 TextMate 命令将 *.coffee 编译成 *.js？我想编辑我的 *.coffee 文件，然后点击快捷方式（类似于 cmd-shift-B）并在与 *.coffee 文件相同的文件夹中获取我的新 *.js 文件。

我可以通过简单的命令在 bash 中实现相同的效果：

```
$ coffee -cb 
```

但是无法理解，如何通过 TextMate 的命令来做到这一点。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:10:47.760

你不需要自己做这件事。它已经完成了。请参阅此[捆绑包](https://github.com/jashkenas/coffee-script-tmbundle)以获取 TextMate。

它添加了`Cmd+B`用于构建和显示 CoffeeScript 文件的命令。

*更新*

如果你看一下[这个文件](https://github.com/jashkenas/coffee-script-tmbundle/blob/master/Commands/Compile%20and%20Display%20JS.tmCommand)，你会发现这个命令只是一个 shell 脚本，你可以很容易地操作它来将内容编译成一个文件。

# android - android上的hostTab

> ID：12446573
> 
> 赞同：1
> 
> 时间：2012-09-16T11:42:27.433
> 
> 标签：android, android-layout

我在 android 主机选项卡中使用滚动条，但它不起作用我添加了 4 个选项卡，但我想在滚动时同时显示 3 个其他视图

以及如何使布局底部

这是我的代码

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@android:id/tabhost"
xmlns:android="http://schemas.android.com/apk/res/android"
>
  <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

    android:orientation="vertical" >

    <HorizontalScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:fillViewport="true"
        android:scrollbars="none" >

<TabWidget
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:id="@android:id/tabs"
/>
</HorizontalScrollView>
 <FrameLayout
 android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@android:id/tabcontent"
 >
 </FrameLayout> 
```

# javascript - js（jquery）中的正则表达式反向googlemaps url

> ID：12446576
> 
> 赞同：0
> 
> 时间：2012-09-16T11:42:56.577
> 
> 标签：javascript, jquery, regex

知道如何使用正则表达式从原始 googlemaps 链接获取缩放级别、纬度和经度。我的想法是我只是将原始 googlemaps v3 链接放在我的 cms 中，我的问题是当我需要使用自定义标记在我的 cms 页面上显示它时使用此链接。需要对 gmap 链接进行一些反向解析。

感谢所有输入。

原始谷歌链接是这样的：（想以某种方式缩放水平，纬度和经度 - 也许使用正则表达式） [https://maps.google.com/maps?q=barcelona+spain&hl=en&ll=41.385052,2.184906&spn=0.336927,0.883026 &sll=57.029521,9.933014&sspn=0.488772,1.766052&t=h&hnear=巴塞罗那,+省+of+巴塞罗那,+加泰罗尼亚,+西班牙&z=11](https://maps.google.com/maps?q=barcelona+spain&hl=en&ll=41.385052,2.184906&spn=0.336927,0.883026&sll=57.029521,9.933014&sspn=0.488772,1.766052&t=h&hnear=Barcelona,+Province+of+Barcelona,+Catalonia,+Spain&z=11)

所以答案：

```
str= 'the googlemaps link';
zoomRegex= str.match(/&z=([^&]+)/);
zoomlevel = zoomRegex[1];

var ll = new Array();
LatLongRegex= str.match(/&ll=([^&]+)/);
LatLong = LatLongRegex[1];
ll = LatLong.split(',');

console.log("lat:" + ll[0]+ ", long:" + ll[1] +" - Zoomlevel:"+zoomlevel);​ 
```

认为这是它的谢谢。它需要改进吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:53:14.343

您可以解析出查询字符串的不同变量，如下所示：

```
str = "https://maps.google.com/maps?q=barcelona+spain&hl=en&ll=41.385052,2.184906&spn=0.336927,0.883026&sll=57.029521,9.933014&sspn=0.488772,1.766052&t=h&hnear=Barcelona,+Province+of+Barcelona,+Catalonia,+Spain&z=11";

matches = str.match(/&z=([^&]+)/);
zoomlevel = matches[1]; 
```

此示例用于缩放级别，我假设 lat/long 变量为`ll`. 如果您需要单独的纬度和经度，您可以`split`在逗号处。

# php - 从此数组中获取标题

> ID：12446580
> 
> 赞同：4
> 
> 时间：2012-09-16T11:43:31.020
> 
> 标签：php, arrays

对，我正在尝试从网页中获取链接。链接存储在数组 $links 中。

有没有办法让我从数组中的每个链接中获取标题（从下面的函数）。那会是一个多维数组吗？我怎样才能做到这一点？

```
$links = Array();
$URL = 'http://www.theqlick.com'; // change it for urls to grab  
// grabs the urls from URL 
$file  = file_get_html($URL);
foreach ($file->find('a') as $theelement) {
   $links[] = url_to_absolute($URL, $theelement->href);
} 
print_r($links);

    function getTitle($links) 
    {
      //change it for the original titles. 
      $str = file_get_contents("http://www.theqlick.com"); 
      if ( strlen( $str )>0 ) {
        preg_match( "/\<title\>(.*)\<\/title\>/", $str, $title );
     return $title[1];
    }
 } 

 $metatitle = getTitle();
 echo $metatitle; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:12:22.363

我没有安装正确的库来测试这个，但它应该让你知道从哪里开始：

```
$links = Array();
$URL = 'http://www.theqlick.com'; // change it for urls to grab  
// grabs the urls from URL 
$file  = file_get_html($URL);
foreach ($file->find('a') as $theelement) {
    $link = array();
    $link['url'] = url_to_absolute($URL, $theelement->href);
    $link['title'] = getTitle($link['url']);
    $links[] = $link;
} 
print_r($links);

function getTitle($url) 
{
    $file = file_get_html($url);
    $titles = $file->find('title');
    if (is_array($titles)) {
        return $titles[0];
    } else {
        return null;
    }
} 
```

# php - PHP 警告 ZipArchive::extractTo(): 权限被拒绝

> ID：12446583
> 
> 赞同：10
> 
> 时间：2012-09-16T11:43:59.710
> 
> 标签：php, warnings, permission-denied, ziparchive

我创建了一个应用程序，它使用 ZipArchive 类（php 中的标准）中的方法 extractTo() 并在 Windows 7 上的 localhost apache 服务器上对其进行了测试，没有任何问题。但是在我在一些unix生产服务器上尝试之后，它只是抛出

```
Warning: ZipArchive::extractTo(): Permission denied in /path/to/file.php on line 27 
```

我什至在 0777 上为应用程序使用的每个文件夹设置了 chmod，但这没有帮助。

你知道有什么问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-10-08T14:40:14.593

对于 linux / macosx 用户，更改

```
$zip->extractTo('/Directory/'); 
```

到

```
$zip->extractTo('Directory/'); 
```

也可以帮忙。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T11:53:20.027

检查运行 Apache 的用户（有时是用户“www-data”）是否有权访问相关的 zip 文件。

还尝试将文件的所有者更改为运行 Apache 的用户（检查`top`用户）。

# c++ - 在 C++ 的 for 循环中定义的局部变量

> ID：12446586
> 
> 赞同：9
> 
> 时间：2012-09-16T11:44:18.890
> 
> 标签：c++, variables, for-loop, local

在以下 C++ 代码中：

```
 for (int i=0; i<10; i++)
    {
        int y = someFunctionCall();

        //Some statements
    } 
```

变量 (y) 是在每次循环迭代时分配，然后在迭代完成时释放，还是为所有循环迭代分配一次？

上述代码是否等同于以下代码？：

```
 int y;
    for (int i=0;i<10;i++)
    {
        y = someFunctionCall();

        //Some statements
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T11:48:33.097

当函数被调用时，它将在堆栈上分配一次。在性能方面，这两种方式之间没有区别（但请记住，最后一种方式，`y`在循环之后仍然在范围内）。变量似乎在每次迭代之间被创建和销毁（因此它在迭代之间“丢失”其值）是由编译器创建的行为；实际的内存位置始终相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T11:50:49.457

它不是每次都分配的，而是在每次迭代中分配一个新值。循环在一个方法中，该方法有自己的堆栈帧。变量 y 在该堆栈帧中分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T11:48:32.893

循环中的每一轮都会创建一个新变量。

但是，对于`int`不重要的类型变量。最好为变量设置一个较小的范围。而且编译器可能足够聪明，每次都可以重用相同的空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T11:49:58.473

我认为每次进入循环时变量 y 都会在堆栈上分配，因为变量在离开此范围时将被释放。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T11:52:26.500

它不能等同于您提出的那个，因为`y`它超出了`for`循环的范围。

但这一切都取决于编译器，如果这是你所追求的，你必须测量两者之间的性能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-16T12:06:40.037

您的`y`代码中的 是一个局部变量。尽管许多人认为这些没有分配。它们可能会或可能不会在堆栈上为它们保留一些空间，但只有在优化后，它们的地址被占用时才能保证发生这种情况。

在所有其他情况下，它们可能根本没有在堆栈上保留空间。或者他们使用的堆栈上可能有一些空间，但是相同的空间被重复用于多个变量，甚至在某些情况下，用于将参数传递给您正在调用的函数。

当在堆栈上保留空间时（可能会或可能不会发生），通常会在函数进入时立即保留所有空间。然而，这是一个实现细节。这样做是因为它是最快的方法。不需要以这种方式完成，并且实现可以很好地动态更改当前堆栈帧的大小（在大多数现代处理器上，这样做是愚蠢的，但这样的实现仍然是正确的）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-25T15:21:05.727

对于内置类型，它并不重要（无论可见性范围如何）。对于对象，对象变量是否留在/退出 for 循环确实（！）很重要。考虑以下：

```
#include <iostream>

struct A
{

  static int i;
  void * a;

  A() : a(this) { ++i; }

};

int A::i = 0;

int main()
{

    for (int i = 0; i != 10; ++i)
    {

      A a;

      std::cout << a.a << " | " << a.i << std::endl;

    }

    return 0;
} 
```

# android - 使用 Runtime.getRuntime().exec() 时出现 IO 异常

> ID：12446588
> 
> 赞同：0
> 
> 时间：2012-09-16T11:44:50.887
> 
> 标签：android, command-line, ffmpeg

我想在 android 中使用命令行工具来使用 ffmpeg 库。但我在尝试时遇到 IO 异常，我已将 ffmpeg.exe 存储在 /files 文件夹中。这是代码：

```
public class MainActivity extends Activity {

    Process p;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Process p = Runtime.getRuntime().exec("/data/data/com.example.ffmpegnew/files/ffmpeg",null, new File("/data/data/com.example.ffmpegnew/files"));

        }
        catch(Exception e)
        {
            System.out.println("exception"+e);
        }

    }

} 
```

这是错误：

```
09-16 16:24:38.751: I/System.out(2209): exceptionjava.io.IOException: Error running exec(). Commands: [/data/data/com.example.ffmpegnew] Working Directory: /data/data Environment: null 
```

请告诉我是什么问题。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:48:47.660

我不认为`.exe`文件在 linux 上运行，更不用说可能是 x86 编译的二进制可执行文件。

此外，即使您获得了 arm 编译的 ffmpeg，您也必须通过 chmod 使其可执行

# c++ - C++ 提升绑定性能

> ID：12446596
> 
> 赞同：6
> 
> 时间：2012-09-16T11:45:59.690
> 
> 标签：c++, performance, boost, c++11, boost-bind

绑定函数（使用 Boost Bind）时是否有任何性能影响（正面或负面）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T12:11:04.643

也许，也许不是。这取决于。

`std::bind`(or also )的结果`boost::bind`是所谓的“绑定表达式”，它具有由实现确定的不可知类型。这种类型是*Callable*，它可以*转换*为`std::function`(or `boost::function`) 的实例。

在内部，`function`（可能）使用类型擦除来处理各种复杂的、有状态的“可调用对象”。在某些（尽管不一定是所有）情况下，这需要动态分配和虚拟分派。两者`bind`和`function`都是有状态的，因为它们存储绑定的参数。

结果是您应该尽可能避免将绑定表达式转换为`function`对象。绑定表达式本身可能更便宜，并且您不应该害怕使用`bind`（例如在将成员函数指针绑定到实例和参数时）。自由使用，但仅当您确实需要管理可调用实体的异构集合时才`bind`转换为。`function`

这里有两个典型的例子：

**坏的; 避免这种情况：**

```
std::function<int(bool, char)> f = std::bind(&Foo::bar, x, 12);

void do_something(std::function<int()> func, int & acc)
{
    acc += func();
} 
```

**更好的; 更喜欢这个：**

```
auto f = std::bind(&Foo::bar, x, 12);   // unknowable type, but perfectly fine

template <typename F>
void do_something(F && func, int & acc)  // can deduce unknowable types
{
    acc += func();
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-14T01:25:34.197

`boost::bind`并将`std::bind`复制它们的参数，以便返回的对象包含每个参数的副本，包括函数对象。如果这些参数的复制成本很高，那么将它们传递给`std::bind`.

您可以将其与创建所有参数的元组类似地考虑，例如

```
auto b = std::bind(func, arg1, arg2, arg3); 
```

在性能上应该大致相当于：

```
auto b = std::make_tuple(func, arg1, arg2, arg3); 
```

如果您不想复制参数，请使用`ref`实用程序将它们传递给 a`reference_wrapper`这是一种非常轻量级的类型，用于存储指向对象的指针：

```
auto b = std::bind(func, std::ref(arg1), arg2, arg3); 
```

当调用绑定函数时，每个绑定参数将作为左值传递给绑定函数（即没有完美转发）：

```
b();  // equiv to std::get<0>(b)(std::get<1>(b), std::get<2>(b), std::get<3>(b)) 
```

如果函数按值获取其参数，则绑定的参数将被复制到函数参数中。这可能很昂贵，但是无论您直接调用函数还是在`std::bind`...的结果中调用它都是一样的，它是被调用函数的属性，而不是绑定表达式。

因此，使用的唯一开销`boost::bind`是绑定参数的初始复制，您可以通过移动参数来控制它以避免复制：

```
auto b = std::bind(func, std::move(arg1), arg2, arg3); 
```

或通过引用传递它们：

```
auto b = std::bind(func, std::ref(arg1), arg2, arg3); 
```

上面的讨论忽略了`bind`诸如占位符和调用嵌套绑定表达式等特性，但这些并不影响性能，以上所有内容仍然适用。

# ubuntu - Ubuntu：从终端运行应用程序

> ID：12446599
> 
> 赞同：1
> 
> 时间：2012-09-16T11:46:02.657
> 
> 标签：ubuntu, terminal

Ubuntu中是否有任何命令可以从终端运行已安装的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T11:50:20.273

嗯，运行终端，然后输入程序名，如果它在 PATH 上，就会启动，例如“gimp”或“/usr/bin/gimp”。当然，您必须知道要运行的程序二进制文件的名称，并且区分大小写。如果您是 mac 用户，则没有“open -a”，如果您是 windows 用户，程序二进制文件通常没有“.exe”或“.bat”扩展名。

请在以后的问题中更加具体，谢谢。

# netty - Netty中Client与ClientHandler的通信

> ID：12446601
> 
> 赞同：1
> 
> 时间：2012-09-16T11:46:41.677
> 
> 标签：netty

我正在 Netty 之上开发一个拍卖系统。我使用 Netty 是因为谷歌搜索告诉我 NIO 可以处理比普通套接字编程更大的客户端。

基本上我是 Netty 的初学者。我已经介绍了教程和用户指南。就是这样。所以请理解我的问题是否不符合“问题”的条件。以下是我的客户端的伪代码。

```
public class AuctionClient
{
    private boolean loggedIn;

    public AuctionClient() //constructor

    ///
    .... // various functions
    ///

    public void run()
    {
        while (true)
        {
            int option = getUserOption(); //get user menu selection

            switch(option)
            {
                case 1:
                    login(); //user enters username and password. The info is converted into JSON string and sent to AuctionServer. 
                             //AuctionServer returns true if the info is correct, false otherwise
                    break;

                case 2:
                    startAuction(); //start a new auction
                    break;

                case 3:
                    makeBid(); //make a bid to an existing auction
                    break;

                case 4:
                    logout(); //log out from the AuctionServer
                    break;

                default:
                    break;
            }
        }
    }

    public static void main() // Creates AuctionClient class and runs it.
} 
```

这是我正在尝试做的事情的要点。问题是，只有当变量 loggedIn 为真时，我才想启用 startAuction()、makeBid() 和 logout()。所以我必须知道登录是否成功才能更改loggedIn的值。

但是由于处理 login() 的结果的是 AuctionClientHandler（虽然现在在这里显示），所以 AuctionClient 无法知道登录是否成功。

有没有优雅的方法来解决这个问题。我想避免使用 BlockingQueue 在 AuctionClient 和 AuctionClientHandler 之间传递信息。或者拍卖系统有更好的设计吗？

任何帮助，将不胜感激。

爱德华

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:17:58.083

我认为您的问题可以归结为一个简单的事实。您需要保留先前操作的“状态”。为此，每次在您的`PipelineFactory`实现中都需要创建一个新的处理程序。例如`pipeline.addLast('MyAuctionHandler',new AuctionHandlerClass());`
，第一次登录成功时，您`LoginHandler`应该`pipeline`发送一条消息给`AuctionClientHandler`一个特殊的对象，然后您可以使用该对象将`login`标志设置为`true`。
例如代码，您可能想看看我发布的[Java Game Server 。](https://github.com/menacher/java-game-server)它还处理类似的登录、会话管理等。这是[处理](https://github.com/menacher/java-game-server/blob/master/jetserver/src/main/java/org/menacheri/jetserver/handlers/netty/LoginHandler.java)登录的处理程序，唯一的区别是这个处理程序不是有状态的，因为我将状态移动到会话`LookupService`类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T04:59:48.907

另一种方法是将状态作为附件存储在 Channel 上。

```
Channel.setAttachment(..); 
```

# c# - 如何在某个应用程序中操作 tcp 发送数据包和接收数据包

> ID：12446604
> 
> 赞同：0
> 
> 时间：2012-09-16T11:47:45.920
> 
> 标签：c#

我想知道我应该学习什么/我应该做什么，因为我想做 ac# 应用程序来实现以下目标：

*   如何拦截某个应用程序发送的tcp数据包以及如何查看数据包中的信息。
    *   收到的数据包（同样的事情）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:52:49.883

您可以使用与 Wireshark 相同的库：Pcap。

这是一个教程：[http ://pcapdotnet.codeplex.com/wikipage?title=Pcap.Net%20Tutorial](http://pcapdotnet.codeplex.com/wikipage?title=Pcap.Net%20Tutorial)

# ios - 包括从 Facebook 到 AppStore / 应用页面的链接

> ID：12446610
> 
> 赞同：1
> 
> 时间：2012-09-16T11:48:33.777
> 
> 标签：ios, facebook

我有一个 IOS 应用程序，它使用以下方法向用户和他们的朋友墙发布视频：

```
 NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               videoData, @"Video.mp4",
                               @"video/quicktime", @"contentType",
                               @"My Title", @"title",
                               @"Description", @"description",
                               nil];

    [FBRequestConnection startWithGraphPath:@"me/videos" parameters:params HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error){ ... 
```

这是完美的工作，但我现在将链接以从这篇文章链接到 AppStore 和 Facebook 上的应用页面。我已经尝试过使用一些 HTML，但它只是以纯文本形式显示。

正如其他地方所建议的那样，我添加了“链接”属性并尝试了“属性”，但这些似乎没有向墙上的帖子添加任何内容。看起来他们只适用于提要，而不适用于墙贴。

任何人都可以建议一种显示这些链接的方式（或更好的整体方式），而不仅仅是放置完整的“http://itunes.appl......”

# mule - Issue calling flow with VM inbound endpoint

> ID：12446611
> 
> 赞同：2
> 
> 时间：2012-09-16T11:48:38.503
> 
> 标签：mule

I have one flow calling another flow via a VM endpoint. The call fails with the exception `NoReceiverForEndpointException`. The message in the logs is:

```
There is no receiver registered on connector "connector.VM.mule.default" for endpointUri vm://inner 
```

Does anyone know why? This is Mule 3.3.0 enterprise edition.

Thanks.

**The config file:**

```
<mule ...>
    <vm:endpoint name="inner" path="inner" />
    <flow name="inner.flow">
        <inbound-endpoint ref="inner" exchange-pattern="request-response" />
        <logger level="INFO" message="in inner flow" />
    </flow>

    <vm:endpoint name="outer" path="outer" />
    <flow name="outer.flow">
        <inbound-endpoint ref="outer" exchange-pattern="one-way" />
        <logger level="INFO" message="in outer flow" />
        <outbound-endpoint ref="inner" exchange-pattern="request-response" />
    </flow>
</mule> 
```

**The test case to exercise it:**

```
import org.junit.Test;
import org.mule.api.MuleException;
import org.mule.module.client.MuleClient;
import org.mule.tck.junit4.FunctionalTestCase;

public class VMEndpointTest extends FunctionalTestCase {

    @Test
    public void innerIsCalled() throws MuleException {
        final MuleClient client = new MuleClient(muleContext);
        client.sendNoReceive("outer", new Object(), null);
    }

    @Override
    protected String getConfigResources() {
        return "test.xml";
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:11:43.323

Ah, I figured this on my own:

1.  the outer endpoint is `one-way`, so I should have used `dispatch` to send a message to it.
2.  some mechanism is required for the unit test to wait for Mule to process the message in the `one-way` flow. I introduced a vm endpoint just for that with the accompanying `receive` call in the Java code.

**the config file:**

```
<mule ...>
    <vm:endpoint name="outer" path="outer" />
    <flow name="outer.flow">
        <inbound-endpoint ref="outer" exchange-pattern="one-way" />
        <logger level="INFO" message="in outer flow" />
        <outbound-endpoint ref="inner" exchange-pattern="request-response" />
    </flow>

    <vm:endpoint name="inner" path="inner" />
    <vm:endpoint name="inner.completed" path="inner.completed" />
    <flow name="inner.flow">
        <inbound-endpoint ref="inner" exchange-pattern="request-response" />
        <logger level="INFO" message="in inner flow" />
        <outbound-endpoint ref="inner.ftc" exchange-pattern="request-response" />
        <outbound-endpoint ref="inner.completed" exchange-pattern="one-way" />
    </flow>

    <vm:endpoint name="inner.ftc" path="inner.ftc" />
    <simple-service name="innerFtc" endpoint-ref="inner.ftc">
        <test:component />
    </simple-service>
</mule> 
```

**the test case:**

```
package foo;

import static org.junit.Assert.assertEquals;

import org.junit.Test;
import org.mule.module.client.MuleClient;
import org.mule.tck.functional.FunctionalTestComponent;
import org.mule.tck.junit4.FunctionalTestCase;

public class VMEndpointTest extends FunctionalTestCase {

    @Test
    public void innerIsCalled() throws Exception {
        final FunctionalTestComponent ftc = getFunctionalTestComponent("innerFtc");
        final Object object = new Object();
        final MuleClient client = new MuleClient(muleContext);

        client.dispatch("outer", object, null);
        client.request("inner.completed", RECEIVE_TIMEOUT);

        assertEquals(object, ftc.getLastReceivedMessage());
    }

    @Override
    protected String getConfigResources() {
        return "test.xml";
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-05T09:44:42.433

For both the vm endpoints you have to configure with the same name then only it will connect.

# php - 参数 1 传递给？

> ID：12446612
> 
> 赞同：0
> 
> 时间：2012-09-16T11:48:39.740
> 
> 标签：php, symfony, symfony-2.1

我尝试在 symfony2.1 中提交表格，但出现以下错误，我创建表格学生注册并尝试提交，我为此查看了可能的论坛，但没有得到任何适当的解决方案。

```
Error:Catchable Fatal Error: Argument 1 passed to
Frontend\EntityBundle\Entity\StudentRegistration::setIdCountry()
must be an instance of Frontend\EntityBundle\Entity\MasterCountry, string given,
called in C:\wamp\www\careerguide\src\Frontend\HomeBundle\Controller\RegistrationController.php
on line 41 and defined in C:\wamp\www\careerguide\src\Frontend\EntityBundle\Entity\StudentRegistration.php line 1253 
```

在控制器中我有：

```
$student_account = new \Frontend\EntityBundle\Entity\StudentRegistration();
$params = $request->get('student_registration');
$student_account->setIdCountry($params['idCountry']);
$em = $this->getDoctrine()->getEntityManager();
$em->persist($student_account);
$em->flush(); 
```

实体类：

```
/**
 * @var MasterCountry
 *
 * @ORM\ManyToOne(targetEntity="MasterCountry")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_country", referencedColumnName="id_country")
 * })
 */
private $idCountry; 
```

请建议我如何解决此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:48:50.723

当您使用原则设置多对一关系时，持有此关系的属性是相关实体的对象，而不是 id。它作为 id 保存在数据库中，但 Doctrine 会在您获取它时创建完整的对象，并在您持久保存对象时将其转换为 id。因此，为了反映这一点，该属性不应称为 $idCountry，而应改为 $country（这不是强制性的，您可以随意调用它，但这会使一切更清楚）。然后 setter 应该是 setCountry() 并且它应该接受一个 MasterCountry 对象。

因此，当您从表单中收到国家/地区 ID 时，您应该将其转换为 MasterCountry 对象（通过从数据库中获取），将此对象设置在 studentRegistration 中，然后将其持久化。就像是：

```
$student_account = new \Frontend\EntityBundle\Entity\StudentRegistration();
$params = $request->get('student_registration');
$country = $this->getDoctrine()->getRepository('AcmeStoreBundle:MasterCountry')
        ->find($params['idCountry']);
$student_account->setCountry($country);
$em = $this->getDoctrine()->getEntityManager();
$em->persist($student_account);
$em->flush(); 
```

虽然这应该可行，但这不是 Symfony 处理表单的方式。您应该创建一个 Form 对象，然后绑定并验证它。然后你不应该处理请求参数等......我建议你仔细阅读 Symfony 文档的这一章：

[http://symfony.com/doc/current/book/forms.html](http://symfony.com/doc/current/book/forms.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:39:07.693

我认为问题在于 $params 不是请求参数：

```
$params = $request->get('student_registration'); // looks like a String http param value
$student_account->setIdCountry($params['idCountry']); //what could be $params['idCountry'] 
```

你可能应该想要

```
$studentRegistrationId = $request->get('student_registration');
$studentRegistration = getStudentFromId( $studentRegistrationId); // I don't know how you retrieve the $studentRegistration object
$idCountry = $request->get('idCountry');
$student_account->setIdCountry($idCountry); 
```

我敢肯定这不完全是这样，但对我来说，它更有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T12:45:02.883

问题是通过使用学说设置关系，您声明“$idCountry”是 Country 对象。

如果您设置 idCountry 本身，它将作为快捷方式工作（Doctrine 允许您设置 id 而不是对象），但按照惯例，该属性应该命名为 $country，而不是 $idCountry，因为这个想法是为了抽象你仅通过引用对象进行编码时，ID 的存在性。

显示此错误是因为可能有一个类型提示将其强制为对象，因此请在 StudentRegistration 类中查找类似内容：

```
public function setIdCountry(MasterCountry $idCountry) 
```

或类似的东西，如果您希望能够设置 id，则希望删除类型提示（$idCountry 之前的 MasterCountry）。如果您不想触摸它，那么您可能需要检索国家对象并使用它而不仅仅是 id。

# git - 在不同的 git 分支中处理两个不相关的文件

> ID：12446614
> 
> 赞同：1
> 
> 时间：2012-09-16T11:48:47.527
> 
> 标签：git, version-control

我最近开始研究一个使用 Git 进行版本控制的项目。我必须修复两个缺陷，`Defect1`并且`Defect2`. 分别修复`Defect1`和`Defect2`需要更改。这两个文件彼此无关。`File1``File2`

我想在一个单独的 Git 分支中处理每个缺陷。我创建了两个分支，`fix_Defect1`和`fix_Defect2`，并希望独立处理它们。修复很复杂，所以我无法完成一个修复并在切换到另一个修复之前提交它。我观察到，当我从 切换`fix_Defect1`到时`fix_Defect2`，所做的任何更改`File1`也会出现（反之亦然）。有什么办法可以避免这种情况发生吗？

从 Git 帮助中，我想不出任何办法。我还在 SO 上搜索了[git work with multiple branches](https://stackoverflow.com/search?q=git%20work%20with%20multiple%20branches)，并找到了[Git and working on multiple branches](https://stackoverflow.com/questions/1334027/git-working-on-multiple-branches)和[Using git with multiple branches at once](https://stackoverflow.com/questions/12082525/using-git-with-multiple-branches-at-once)，这与我的问题很接近但有些不同。

我可以在一个单独的目录中为每个分支克隆多个存储库副本，但这样做似乎除了浪费磁盘空间之外，我还会错过 Git 分支的全部功能。您能否建议一种处理这种情况的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T12:17:10.330

您的问题源于您正在更改工作目录中的文件（例如`file1`and `file2`）但没有提交或存储这些更改。最好的解决方案是在您想切换分支时提交更改：

```
git add file1 file2 ;# add whichever ones you've fixed
git commit ;# commit the work in progress
git checkout fix_Defect2 ;# now checkout the other branch 
```

当然，厨房水槽提交，包括正在进行的工作和可能损坏的代码，对您的历史记录并不是特别好。您以后可以随时使用它`git rebase`来清理您的历史记录。例如，请参阅[此答案](https://stackoverflow.com/questions/12061948/how-to-combine-git-commits/12061949#12061949)以了解详细信息或[此答案](https://softwareengineering.stackexchange.com/a/155807/57052)以了解其背后的哲学。

最后，如果您不喜欢提交工作的想法，您也可以使用`git stash`来获得类似的结果：

```
git stash ;# when you're ready to switch
git checkout fix_Defect2 ;# work on this branch for a while
git commit -A ;# be sure to commit your work on 'fix_Defect2'
git checkout fix_Defect1 ;# checkout the original branch
git stash pop ;# reapply the work you stashed from the working directory 
```

一般来说，我不推荐存储解决方案。存储机制不是非常强大，并且更适合您需要修复某些东西的情况，而不是平衡两个同样复杂的功能分支。

有关更多详细信息，请查看[git-scm](http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository)文档中的“文件状态生命周期”图表。

# java - android相机意图不返回数据

> ID：12446627
> 
> 赞同：1
> 
> 时间：2012-09-16T11:51:49.330
> 
> 标签：java, android, camera

从相机意图拍摄照片后，我在从“onActivityResult”方法获取数据时遇到问题。

这是我调用相机意图的方法：

```
private void __initCamera() {

    String path = Environment.getExternalStorageDirectory() + "/vault/images/";

    File dir = new File(path);
    if (!dir.exists()) {
        dir.mkdirs();
        dir = new File(path);
    }
    String[] content = dir.list();
    String fileName = (content.length + 1) + ".jpg";
    File file = new File(path, fileName);
    if (!file.exists()) {
        try {
            file.createNewFile();
        } catch (IOException ex) {
            Log.e("my_app", ex.getMessage());
        }
    }

    Uri uri = Uri.fromFile(file);  
    Intent i = new Intent("android.media.action.IMAGE_CAPTURE");
    i.putExtra(MediaStore.EXTRA_OUTPUT, uri);
    startActivityForResult(i, 8765);
} 
```

这是我的 onActivityResult 方法：

返回码：`-1(should be: 1, right?),`

例外：`java.io.FileNotFoundException: No content provider: #Intent;action=inline-data;end`

data.toURI() ：`#Intent;action=inline-data;end`

```
 @Override
protected void onActivityResult(int requestCode, int returnCode, Intent data) {

    try {

        Bitmap bitmap = Media.getBitmap(getContentResolver(), Uri.parse(data.toURI()));
        FileOutputStream out = new FileOutputStream(file);
        bitmap.compress(Bitmap.CompressFormat.JPEG, 50, out);
        bitmap.recycle();
        out.close();
    } catch (Exception ex) {
        Log.e("TROLL", ex.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T00:24:20.247

这：

```
Bitmap bitmap = Media.getBitmap(getContentResolver(), Uri.parse(data.toURI())); 
```

应该是这样的：

```
Bitmap bitmap = (Bitmap) data.getExtras().get("data"); 
```

至少，这就是我通常检索图像的方式。另外，我建议检查正确的请求代码，而不是在那里使用包罗万象的异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-19T21:28:43.433

接受的答案仅提供了一种获取图像缩略图的方法，而不是全尺寸的。要获得完整尺寸的图像，您应该提供一个 uri，相机将在其中存储图像，如下所示：

```
intent.putExtra(MediaStore.EXTRA_OUTPUT, mUri); 
```

然后在你的`onActivityResult`你可以使用你保存的 uri 来获取图像：

```
Bitmap bitmap = Media.getBitmap(getContentResolver(), Uri.parse(mUri)); 
```

这是 Android[文档](https://developer.android.com/training/camera/photobasics.html)。

# javascript - 显示 div onclick

> ID：12446630
> 
> 赞同：1
> 
> 时间：2012-09-16T11:52:13.547
> 
> 标签：javascript, html, css

我在这里做错了什么..单击链接后，我试图通过 js 和 css 显示被调用的子 div。但它根本不会改变。

这是我的代码：

HTML：

```
<div id="container">

    <div id="sub1">content 1</div>
    <div id="sub2" class="hide">content 2</div>
    <div id="sub3" class="hide">content 3</div>

    <div id="navigation">
        <a href="#" class="mininav" onclick="switchContent('sub1'); return false;">link 1</a>
        <a href="#" class="mininav" onclick="switchContent('sub2'); return false;">link 2</a>
        <a href="#" class="mininav" onclick="switchContent('sub3'); return false;">link 3</a>
    </div>

</div> 
```

JS：

```
function switchContent(obj) {

        obj = (!obj) ? 'sub1' : obj;

        var contentDivs = document.getElementById('container').getElementsByTagName('div');
        for (i=0; i<contentDivs.length; i++) {
            if (contentDivs[i].id && contentDivs[i].id.indexOf('sub') != -1) {
                contentDivs[i].className = 'hide';
            }
        }
        document.getElementById(obj).className = '';

    } 
```

CSS：

```
.hide {
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:08:16.300

尝试将您的javascript代码放在您的html代码**之前**，以便`onclick`您的html代码的功能可以找到该`switchContent()`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:04:53.463

为什么不使用 Jquery？

```
$('subXX').hide(); 
```

# java - Hadoop 序列化嵌套对象

> ID：12446631
> 
> 赞同：0
> 
> 时间：2012-09-16T11:52:14.320
> 
> 标签：java, serialization, hadoop, writable

我有一堂课：

```
 class Class1 implements Writable{
       int intField;
       double doubleField;
       Class2 refToClass2;

       public void readField(DataInput in){...}
       public void write(DataOutput out){...}

 class Class2 implements Serializable, Writable{
     ....
 } 
```

当使用 Class1 作为输出值时，Hadoop 在 reducer 端抛出此错误：

```
 java.lang.NullPointerException
at org.apache.hadoop.io.serializer.SerializationFactory.getSerializer(SerializationFactory.java:73)
at org.apache.hadoop.io.SequenceFile$Writer.init(SequenceFile.java:961)
at org.apache.hadoop.io.SequenceFile$Writer.<init>(SequenceFile.java:892)
at org.apache.hadoop.io.SequenceFile.createWriter(SequenceFile.java:393)
at org.apache.hadoop.io.SequenceFile.createWriter(SequenceFile.java:354)
at org.apache.hadoop.io.SequenceFile.createWriter(SequenceFile.java:476)
at org.apache.hadoop.mapreduce.lib.output.SequenceFileOutputFormat.getRecordWriter(SequenceFileOutputFormat.java:61)
at org.apache.hadoop.mapred.ReduceTask$NewTrackingRecordWriter.<init>(ReduceTask.java:569) 
```

我的直觉告诉我，问题与 Class1 或更可能与实现 Serializable 和 Writable 的 Class2 有关。

有任何想法吗 ？

**更新：**

我将问题本地化：问题是 Class1，现在，我已更改为仅实现 Writable（而不是 Serializable）。我还对其进行了更改，因为它不再包含对 Class2 的引用。我仍然得到同样的错误。如果我将 Class1 替换为另一个 Writable 实现作为输出值，它就可以工作！为什么 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:41:02.210

问题是我犯了一个愚蠢的错误：我没有更新 jar。所以，基本上 Class1 没有在旧的（使用中的）jar 中实现 Writable 接口。

作为一般性观察：OP中指定的错误的根本原因是HADOOP无法找到您尝试序列化的特定类型的序列化程序（直接或间接，例如通过使用该类型作为输出核心价值）。由于以下两个原因之一，Hadoop 找不到 Serilizer：

1.  您的类型不可序列化（即它不实现可写或可序列化）
2.  对于您的类型实现的序列化类型，Hadoop 没有可用的序列化器（例如：您的类型实现 Writable 但由于某种原因 hadoop 无法使用 org.apache.hadoop.io.serializer.WritableSerialization 类）

# git - 如何按时间顺序记录所有 Git 提交？

> ID：12446633
> 
> 赞同：0
> 
> 时间：2012-09-16T11:52:33.810
> 
> 标签：git, svn, version-control, branch

我想记录推送到 Git 存储库的所有提交。我对所有提交感兴趣，而不仅仅是我在本地签出的分支。我还想查看已经被删除的分支中发生的提交。我需要的只是一个类似于`svn log`（在 Subversion 中）的命令。有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T14:51:27.410

我不确定您要的是什么，但我认为在 git 世界中这是不可能的。

我可以克隆您的存储库，并进行一些提交。但我没有义务与你分享。所以有些提交是你永远不会知道的。

同样，如果我确实与您共享提交，我可能会在本地进行 10 次提交，但在将它们发送给您之前将它们压缩为 1 次提交。您将无法判断 10 个原始提交是否存在。

您可以创建一个本地分支，进行一些提交，然后删除该分支而不将它们重新合并，并且`git gc`很可能永远销毁这些提交，因为它们不再可访问。

因此，有些提交是您永远无法知道的，要么是因为有人制作了它们但从未与您共享它们，要么是因为您制作了它们但后来通过删除引用它们的唯一分支使它们可用于垃圾收集。

如果您想查看您知道的所有提交*，*可能`gitk --all`就是您要查找的内容。它将向您显示可从所有分支（本地或远程）访问的所有提交的图形视图。同样，`git log --all`将向您显示可从所有分支访问的所有提交的文本摘要。

如果您专门在远程仓库上寻找悬空提交，我不确定如何执行此操作。`git fetch`默认情况下仅获取可从分支访问的提交；您可以指定`-t`从标签中获取那些可访问的；但我[认为您无法获取远程 reflog](https://stackoverflow.com/questions/10098095/git-can-i-view-the-reflog-of-a-remote)。

# android - 立即应用 ui 更改

> ID：12446636
> 
> 赞同：7
> 
> 时间：2012-09-16T11:52:43.500
> 
> 标签：android, user-interface

我在 android 上编写一些 ui 屏幕。有时我需要立即查看 ui 更改，但可以在下一个 ui 线程请求中看到更改。因此，例如，如果我删除屏幕上的一个视图并以编程方式添加另一个视图，然后更改整个视图（使用 viewAnimator），可以观察到删除视图，但不能观察到新视图。我确定添加了新视图，因为当我返回第一页时，新视图出现在屏幕上。

我应该调用哪个函数添加或删除屏幕上的某些视图以立即查看其效果？

我尝试了 invalidate()，但它不适用于我的情况

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T17:07:36.630

听起来，如果您说 UI 仅在下一个 UI 线程请求时更新，那么您正在从另一个线程修改 UI 元素。因此，您必须使用 runOnUiThread 在 Runnable 中修改它们。因此，例如：

```
//example code
//where you are trying to modify UI components, do this instead
runOnUiThread(new Runnable(){
    public void run(){
        //update UI elements
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T23:52:44.530

确保*视图准备就绪后立即对视图*进行更改的最佳方法是将 a 添加`Runnable`到视图的消息队列中：

```
view.post(new Runnable(){
    @Override
    public void run() {
        //TODO your code
    }
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-16T12:06:51.237

在没有可绘制（甚至透明）或没有子视图的视图上的 invalidate() 不会被调用。您必须在 setBackgroundDrawable(Color.Transparent) 所有这些或在开发时添加一个虚拟子视图以观察变化。

另请注意，在 Android 3 + 中，渲染系统发生了变化。当您使父母无效时，孩子并不总是无效。如果您想要与较低版本相同的行为，您应该手动使整个树无效

# android - Android 源文件夹

> ID：12446640
> 
> 赞同：1
> 
> 时间：2012-09-16T11:52:58.600
> 
> 标签：android, android-testing

我有一个 Android 项目，它有一个“src”源文件夹，我还创建了一个“test”源文件夹。这两个文件夹里面有一个同名的包。我在test文件夹中添加了一个activity并将其设置为主要activity，但是Android无法识别它，尽管正如我所说，它的包名与“src”文件夹的包名相同，这也是包名的应用程序。我错过了什么？我必须使用单独的项目进行测试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:55:58.750

从您的项目中删除测试文件夹并仅在 src 文件夹中创建类，因为 android 仅识别 src 文件夹用于编译应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:09:23.617

这不起作用，因为它只搜索文件`src`夹中的文件。你所有的java文件都需要放在那里。不要创建两个具有相同包名的文件夹，而是尝试在文件夹内创建两个包`src`并在每个包中放置一个类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T13:31:17.337

确保您的源文件夹位于 java 构建路径中。

（我假设您使用 Eclipse 作为您的 IDE）

选择您的项目，转到菜单栏中的**Project**，然后选择**Properties**。在弹出的窗口中，选择**Java Build Path**，并确保您的源文件夹在列表中，如果没有单击**Add Folder**，然后选择您要添加的源文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T14:26:35.207

对不起，我的错，我在清单文件中拼错了活动名称，这就是它不起作用的原因......感谢任何试图提供帮助的人。

# sed - 为什么 [A-Za-z0-9 ]* 匹配 sed 中非 ASCII 字母之间的空格？

> ID：12446642
> 
> 赞同：0
> 
> 时间：2012-09-16T11:53:08.507
> 
> 标签：sed

我正在尝试标记文件中的所有拉丁字母组件，例如：

```
This is English. 这是中文。 This is more English. 
```

这将被标记为：

```
\english{This is English.} 这是中文。 \english{This is more English.} 
```

我曾尝试用以`sed`下来标记：

```
sed 's/[A-Za-z0-9 ]*/\\english{&}/g' file 
```

运行后，基本是正确的，但是，它也在所有汉字之间放置了标记，例如：

```
\english{This is English.} 这\english{}是\english{}中\english{}文\english{}。 \english{This is more English.} 
```

它还标记只是一个空间但不需要标记的地方，例如：

```
这是中文。 这也是中文。 
```

这变成：

```
这是中文。\english{ }这也是中文。 
```

如何修改此`sed`脚本，使其不会将字符之间的空格标记为`\english{}`并且不会`\english{ }`在文件中放置任何 's？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T12:05:00.330

一种使用方式`GNU sed`：

```
LC_ALL="POSIX" sed -r 's/[^\o200-\o377]+/\\english{&}/g' file.txt 
```

结果：

```
\english{This is English. }这是中文。\english{ This is more English.} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T12:11:40.160

字符之间的标记是由`*`表示“零或更多”引起的。如果您的意思是“一个或多个”，请使用`\+`而不是`*`.

如果您不想匹配单个空格，则可以使用例如

```
sed 's/[A-za-z0-9][A-Za-z0-9 ]*/\\english{&}/g' 
```

这意味着必须至少有一个非空格字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T12:01:04.810

`[A-Za-z0-9 ]*`本质上意味着匹配任何拉丁字母、阿拉伯数字和空格。

你想要类似的东西`([A-Za-z][-A-Za-z0-9 ,.!?']*)`

有很好的 RegExp 实验工具，比如[RegexPal](http://regexpal.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T12:02:37.440

您的正则表达式意味着：匹配任何字母数字字符和任何空格。因此中文文本之间的空格也是匹配的。

试试这个：

```
 's/[A-Za-z0-9]* */\\english{&}/g' file 
```

含义匹配任何字母数字字符，后跟零个或多个空格。

# html - html - 右对齐表格列

> ID：12446645
> 
> 赞同：0
> 
> 时间：2012-09-16T11:53:20.257
> 
> 标签：html, css, alignment

我的网站有一个标题（见图）![标题按钮](../Images/2f20c8d78a70b3f06bdf289e54105676.png)

基本上都是`<td><a href>`用 css 设计的。现在我的问题是，如果想在同一行中添加一个或多个按钮但将它们向右对齐，我该怎么办？

它不一定是 CSS 解决方案，我正在寻找一种在 html`<table>`或`<td>`标签中执行此操作的方法。

谢谢。

编辑：这是生成标头的 php 部分：

```
echo<<<TOPBARHEREDOC2
<link rel="stylesheet" href="/css/horizontal_navbar.css" type="text/css" media="screen">
<table border="auto"  id="topbar" >        
    <td><a class="topbarlink" href="index.php">Ana Sayfa</a></td>
    <td><a class="topbarlink" href="userstats.php?category=$category">İstatistik</a></td>
    <td><a class="topbarlink" href="contact.php">İletişim</a></td>
    <td><a class="topbarlink" href="useful_links.php">Linkler</a></td>
    <td><a class="topbarlink" href=$lastlink_address>$lastlink_name</a></td>
</table>
<hr>
<br>
TOPBARHEREDOC2; 
```

这是CSS：

```
table a.topbarlink{
/*TOP, RIGHT, BOTTOM, & LEFT*/
margin:0px 0px 0px 0px;
font-family: Futura, "Trebuchet MS", Arial, sans-serif;
font-weight:bold;
color:#069;
background-color: #f2f2f2;
text-decoration: none;    
    border-bottom: 2px solid #ccc; 
    border-top: 2px #ccc;
    border-right: 2px solid #ccc;
    border-left: 2px #ccc;
    /*padding (ordered)*/
    padding-top:0.2em;
    padding-right: 1em;
    padding-bottom:0.2em;
    padding-left: 1em;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T12:01:40.923

首先，您真的不应该将表格用于表格数据以外的任何内容。语义标记总是更好，因此在您的情况下，最好为您的菜单使用无编号列表。

无论如何，假设这是你的桌子：

```
<table>
  <tr>
    <th><a href="#">Item 1</a></th>
    <th><a href="#">Item 2</a></th>
    <th><a href="#">Item 3</a></th>
    <th class="right"><a href="#">Item 4</a></th>
  </tr>
</table> 
```

然后您可以使用此 CSS 将一项向右对齐：

```
table { width: 100%; }
th { float: left; }
th.right { float: right; }​ 
```

[http://fiddle.jshell.net/6z97w/](http://fiddle.jshell.net/6z97w/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T12:05:09.373

这是你要找的吗？ [http://jsfiddle.net/henrikandersson/aayxV/](http://jsfiddle.net/henrikandersson/aayxV/)

# javascript - 回调函数和异步请求的使用

> ID：12446646
> 
> 赞同：0
> 
> 时间：2012-09-16T11:53:33.363
> 
> 标签：javascript, facebook, node.js

我正在使用一个`node.js`使用 Facebook API 的应用程序。在我的代码的一部分中，我需要`access_token`从一个通用函数返回。也就是说，很多其他函数都需要调用这个函数来检索 Facebook 访问令牌。

下面是我的代码：

```
function getAccesstoken(code) {
    var options = {
        host: 'graph.facebook.com',        
        path: '/oauth/access_token?client_id=xxxx&redirect_uri=xxxxxx&client_secret=xxxxx&code='+code.toString()
    };

    var acc_token = ''

    https.get(options, function(resp) {
        resp.on('data', function(d) {                                    
            acc_token = acc_token+d.toString()
        });    

        resp.on('end', function() {
            var expiry_index = acc_token.indexOf('&expires=')

            acc_token = acc_token.substring(0, expiry_index)            
        });
    });        

    return acc_token.toString()
} 
```

由于`https.get`调用是异步的，函数总是返回一个空字符串。最好的方法应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:58:28.417

您已经回答了标题中的问题 - 使用回调。

为此定义另一个变量`getAccesstoken`应该是一个在`acc_token`填充时调用的函数，并`acc_token`作为该函数使用的参数传递。

它的`https.get`工作方式相同 - 第二个参数是一个在请求完成时调用的函数，并传递请求的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:01:54.710

为您的 getAccesToken 函数提供一个回调函数，并在响应结束后调用该函数并将 acc_token 传递给该函数。

```
 function getAccessToken(code,cb){
    .....
    resp.on('end',function(){
       .....
       cb(null,acc_token)
    })
 } 
```

然后调用你的函数

```
getAccesToken("whatever",function(err,token){
  console.log("got token", token)
}) 
```

# python - Django 模型不可见

> ID：12446659
> 
> 赞同：1
> 
> 时间：2012-09-16T11:56:11.700
> 
> 标签：python, django

我创建项目**博客**和应用**书籍**。

接下来，我写入文件 models.py（djangobook 中的示例）

并更改设置文件（setting.py）

在块 INSTALLED_APPS 我添加：

```
'blog.books', 
```

但是，如果我写信给控制台：

```
python manage.py validate 
```

**没有名为 blog.books 的模块**

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T12:03:40.980

如果您的项目名为“blog”并且您的应用程序是“books”而不是在 settings.py 中，则您应该只声​​明应用程序名称：

'图书'，

Django 只知道查看当前项目。

项目名称应省略！

至于错误信息。Django 会寻找 blog.blog.books （会自动在 from 添加项目名称），找不到它，并且会抱怨它。只是因为你和 django 都添加了“博客”。最后得到你们都不想要的东西。

# javascript - jQuery Selector 获取ID末尾的ID

> ID：12446660
> 
> 赞同：1
> 
> 时间：2012-09-16T11:56:30.940
> 
> 标签：javascript, jquery, jquery-selectors

我有一些代表按钮的 DIV，所有按钮的 ID 结构如下：

```
Button_<id> 
```

例子：

```
Button_54 
```

有没有办法将点击侦听器附加到所有按钮并在侦听器中获取其 ID？我想出了以下解决方案，但我认为这不是这样做的方法......你有什么建议吗？

```
$('[id$="Button_"]').click(function() {
    var id = $(this).attr('id');
    var ButtonID = id.substring(id.lastIndexOf("Button_"));
    //.
    //. Do somthing which requires the ID
    //. of this button, for instance an AJAX request
    //.
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:02:03.563

是的，有可能。

```
 $('[id^="button_"]').click(function() {
        var id = $(this).attr('id');
        var ButtonID = id.split('_')[1];
        alert(ButtonID);
    }); 
```

[jsfiddle](http://jsfiddle.net/2VSg9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T12:10:24.993

您正在使用 Attribute Ends With 选择器，它不会选择您的元素，您应该改用 Attribute Starts With 选择器：

```
$('[id^="Button_"]').click(function() {
    var num = this.id.match(/\d+/g).join(''); // 54
    // ....

}); 
```

# function - Emacs 功能：[pre] 标记区域 [post]

> ID：12446661
> 
> 赞同：0
> 
> 时间：2012-09-16T11:56:32.450
> 
> 标签：function, emacs, latex, yasnippet

选择区域，如何在区域之前和之后获得（预）定义的部分？

例如，使用 LaTeX，我们想要`\begin{frame}{}`在**区域**之前和区域`\end{frame}`之后，如何通过一个函数使用 Emacs 完成这项工作？

```
 [pre-part]"Has to be around this"[post-part] 
```

我会鼓励使用 yasnippet。此外，也许“autopare”可以给出提示，因为它可以巧妙地在按下“.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:47:57.707

您可以使用 yasnippet。这是一个可以换行或不换行的 html 标签片段的示例。

```
# -*- mode: snippet -*-
# name: Wrap open close tags
# binding: C-c C-t
# expand-env: ((yas-wrap-around-region t))
# --
<$1>$0</${1:$(car (split-string text))}> 
```

这适用于最新的 github 版本的 yasnippet。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T16:35:26.937

在乳胶模式下，`C-c C-o`就是这样做的。

# c# - 在 Winform DataGridView 上填充 Combobox 列的向导

> ID：12446663
> 
> 赞同：1
> 
> 时间：2012-09-16T11:56:45.297
> 
> 标签：c#, winforms, entity-framework-4, datagridviewcombobox, datagridviewcomboboxcell

我正在使用 C# VS2010 Entity Framework sql Server。

我有一个非常（只读）简单的应用程序，可以按项目和学科显示和过滤工单。它使用 EF 来填充控件。使用向导，我将外键引用列“DisciplineID”(int) 更改为 ComboBox 列。当我使用向导更改它时，我使用学科表 (tblDiscipline) 的 EF 数据源填充该框，以简单地显示学科（管道、电气等）而不是整数外键。这是向导图像：

![浏览工单应用](../Images/1bac64c3b7a48a396724599e0f379fc0.png)

当我将 ProjectID 列保留为文本框控件时，它可以正常工作，显示整数 Discipline ID。当我如图所示进行更改时，我得到以下信息

> “System.ArgumentException：DataGridViewComboBoxCell 值无效”

.

DisciplineID 可以为空。是这个问题吗？我该如何处理？或者是其他什么问题。这是一个生产数据库，因此参照完整性保证没有无效的密钥，尽管允许为空......

想法？

# android - 是否可以在 Android 中自动滚动？

> ID：12446665
> 
> 赞同：0
> 
> 时间：2012-09-16T11:56:57.790
> 
> 标签：android, android-layout, scrollview

可以在android中自动滚动吗？我希望我的布局在我的用户加载屏幕时开始滚动，是否可以在他们不必触摸屏幕的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:04:48.483

我不认为，有一个默认的方法来解决这个问题。但是，`ScrollView`该类（您可能需要一个`ScrollView`, 以使内容可滚动）具有一种方法，该方法使您可以平滑地滚动内容：

[`smoothScrollBy(int,int)`](http://developer.android.com/reference/android/widget/ScrollView.html#smoothScrollBy%28int,%20int%29)

第一个 (x) 值是水平滚动，第二个 (y) 值是垂直滚动。您可以使用后台线程使用所需的参数调用此方法，直到到达 ScrollView 的末尾。

# qr-code - 是否可以在二维码中编码多个数据？

> ID：12446670
> 
> 赞同：2
> 
> 时间：2012-09-16T11:57:22.110
> 
> 标签：qr-code

我有一个用于我们学生会的分类网络应用程序，并且想要创建不同广告的可打印版本，学生可以打印并在校园内分发。要获得更多信息，人们应该能够使用智能手机从打印输出中读取二维码。

问题是：能否同时对广告调用的电话号码和二维码中的网站URL进行编码，这样人们就可以扫描二维码，然后选择是要打电话还是打开广告的网站？

我正在考虑使用电子名片，但这会将原本无用的信息添加到人们的联系人列表中。是否有类似 CSV 数据的东西，Android 可以正确读取来实现这一点？（最好是 iPhone）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T11:59:57.867

当然可以。

VCard 很好，它可以让其他 QR 阅读器正确解析它 - 所以你的 QR 将符合标准。

不过，您不必实现完整的[RFC](https://www.rfc-editor.org/rfc/rfc6350)，只需基本的 TEL 和 URL 字段即可。

# php - Zend Framework 2.0 接口未找到

> ID：12446671
> 
> 赞同：4
> 
> 时间：2012-09-16T11:57:39.927
> 
> 标签：php, codeigniter, zend-framework2

### 简洁版本

Client 类在哪里寻找`DispatchableInterface`接口？

```
class Client implements Libraries\Stdlib\DispatchableInterface 
```

* * *

我正在尝试将 ZF2 库添加到 CodeIgniter 安装中。整个 Zend 文件夹位于：

```
 /Users/stef/Sites/site_name/application/libraries/ 
```

在我的 CI 控制器中，我有

```
public function run()
{
    $CI =& get_instance();
    $CI->load->library('Zend');
    $CI->load->library('Zend/Http/Client');
    $client = new Client($url);

    //Do stuff
} 
```

当我访问 run() 方法时，我收到一个致命错误：

> 致命错误：`'Zend\Stdlib\DispatchableInterface'`在第 27 行的 /Users/stef/Sites/site_name/application/libraries/Zend/Http/Client.php 中找不到接口

在libraries/Zend.php（我添加的一个文件，不是ZF的一部分）我有

```
function __construct($class = NULL)
{
    // include path for Zend Framework
    // alter it accordingly if you have put the 'Zend' folder elsewhere
    ini_set('include_path',ini_get('include_path') . PATH_SEPARATOR . APPPATH . 'libraries/Zend/');
    } 
```

我将 include_path 设置为什么似乎并不重要，即使我输入了虚假值，致命错误也保持不变。所以看起来界面的加载`DispatchableInterface`并没有使用include_path。

我怎样才能让 Client.php “找到”接口，它在这里尝试这样做：

```
class Client implements Libraries\Stdlib\DispatchableInterface 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:29:07.837

最简单的解决方案可能是：

```
set_include_path(get_include_path() . PATH_SEPARATOR . '/Users/stef/Sites/site_name/application/libraries/');
require_once 'Zend/Loader/StandardAutoloader.php';
$loader = new Zend\Loader\StandardAutoloader(array('autoregister_zf' => true));
$loader->register(); 
```

然后跳过该`CI->load`部分。只需使用`new Zend\Http\Client`. 还要确保可调度接口在`/Users/stef/Sites/site_name/application/libraries/Zend/Stdlib/DispatchableInterface.php`

**更新：** 我刚刚注意到：

```
class Client implements Libraries\Stdlib\DispatchableInterface 
```

这是什么课？是 Zend 的课吗？我猜这是你的某个班级。而且您正在添加错误命名空间的接口。海事组织应该是`\Zend\Stdlib\DispatchableInterface`

# iphone - App在后台时预取一些数据

> ID：12446678
> 
> 赞同：0
> 
> 时间：2012-09-16T11:58:29.130
> 
> 标签：iphone, ios, cocoa-touch

我知道围绕这个话题已经提出了很多问题。但是，我写这个是因为他们似乎没有专门回答我的问题，而且有些没有列出任何正确答案。

**我想在我的 iPhone 应用程序中执行的操作 在应用** 程序未运行时获取一些数据（基本上，这是一个预取，以便在用户下次使用该应用程序时加快它）。最好的方法是什么？

**一些潜在的解决方案** 那些我能想到的&一些来自 Stackoverflow 的&这些资源：

**可能性 1**：在一天中的特定时间（可能在午夜之后？）获取数据。如果这首先可能的话，我并没有“清楚地”看到如何做到这一点。有人建议使用**NSTimer** -> 但是当应用程序暂停时计时器会被推迟，对吗？

**可能性2**：使用**本地通知**（？）但是我看到Apple的文档特别提到该通知将用于向用户传达某些信息，因此这将违反Apple的文档，对吗？

**可能性3**：通过 applicationDidEnterBackground -> **beginBackgroundTaskWithExpirationHandler**。不过，这不会在一天中的特定时间运行提取。但是，它可能会达到“预”提取的目的。这比其他两个好吗？

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:54:04.087

正如 samfisher 所说，没有你的规格。符合苹果主动后台要求。我唯一可以建议您的是使用`beginBackgroundTaskWithExpirationHandler` 我理解的“后取”而不是预取，但我想这是唯一的方法。
另一种方式，但有点棘手，是用某种地理位置伪装你的预取，这样你就可以选择一个活跃的背景。这涉及很多方面，例如：

*   应用商店拒绝
*   电池消耗

应用商店上有很多应用程序使用这个技巧，我记得一个计算数据流量的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T12:07:56.300

正如您已经知道的那样，您提供的任何选项都不适用于 ios，并且用户始终可以关闭后台应用程序，因此我建议您最好在下一个日历日获取数据应用程序正在运行。

# php - 如何将计算的金额传递给贝宝

> ID：12446679
> 
> 赞同：0
> 
> 时间：2012-09-16T11:58:40.737
> 
> 标签：php, paypal, currency, paypal-sandbox

我已经使用 java 脚本创建了价格计算。

当用户输入一个值时，它会自动计算总价格并显示。我想将计算的值传递给 PayPal（我使用立即购买按钮）。

我如何将值传递给 PayPal 沙箱？这可能吗

这是我的java脚本计算

```
 <script type="text/javascript">

   function  doMath() { 

                     var nvalue; var amount;
                    var price=0.10;
                    nvalue = parseInt(document.getElementById("message").value);
                     amount=(nvalue*price);
                       document.getElementById("total").value=amount ;
                    }
</script> 
```

这是我的 HTML

```
 <input type="" name="message" id="message" onkeyup="doMath()" maxlength="60">message 
          <input type="text" name="total" id="total" maxlength="60">amount 
```

此 Paypal 按钮链接

```
 <input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0"  name="submit" alt="PayPal - The safer, easier way to pay online!"> 
```

我想通过 Paypal 按钮链接中的计算金额这可能吗？我是贝宝的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:43:04.030

假设 PayPal 按钮提交的表单与`total`文本字段所在的表单相同，那么您需要将该`total`字段的名称更改为；

```
 <input type="text" name="amount" id="total" maxlength="60"> 
```

这会将金额提交给 PayPal。

# php - zend-framework 和 codeigniter 有什么区别

> ID：12446681
> 
> 赞同：-1
> 
> 时间：2012-09-16T11:59:00.837
> 
> 标签：php, codeigniter, zend-studio

我知道 ZF 和 CI 都是用面向对象的 MVC 模式编码的。我知道如何使用 PHP OOP 编程。我刚刚下载了 ZF 和 CI，但不知道。

1.  哪一个更容易使用？
2.  两个框架中的编码方式是否相似？
3.  我们应该将 Zend Studio 用于 CI 吗？

我不知道ZF和CI之间的区别。请给我一个想法，以便我可以选择先开始哪个或同时使用两者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T15:44:28.850

1.  **哪个更容易使用？**

    没有一致的方法来回答这个问题。这是主观的。一些喜欢 ZEND 结构的程序员会争辩说它更容易，因为它的架构方式很容易。其他人会争辩说，使用 CI 更容易，因为它不那么臃肿，而且要学习的东西也少得多。如果您没有框架方面的经验，我建议您使用 CI。

2.  **两个框架中的编码方式是否相似？**

    不，这些框架彼此不同。从苹果到橘子。相比之下，Zend 是一个极其抽象的框架，其中包括路由、命名空间和对象工厂等概念。

3.  **我们应该将 Zend Studio 用于 CI 吗？**

    完全取决于你。我使用 Emacs，其他人使用 Netbeans 或 Eclipse 或 Dreamweaver。谷歌搜索其他 IDE 的好处，看看 Zend Studio 是否坚持。

# c# - 这个应用程序是如何自我更新的？

> ID：12446685
> 
> 赞同：-2
> 
> 时间：2012-09-16T11:59:56.297
> 
> 标签：c#

我一直在寻找一种方法来更新我的应用程序，但仍然没有找到解决方案。（请不要说 ClickOnce，它不适合这个应用程序）。

几年前，我曾经使用 MCadmin 来运行 Minecraft 服务器，我记得当它启动时，有时它只会说“更新已下载，请重新启动！”。我试图找出这是如何完成的，所以我一直在查看源代码并发现了一些东西。

这是我发现的一些代码：

```
private void CheckUpdateThread()
    {
        Program.AddRTLine(Color.Green, "Verifying existence of essential files...\r\n", false);

        if (!File.Exists("ICSharpCode.SharpZipLib.dll"))
            Util.DownloadURLToFile("https://internal.mcadmin.eu/ICSharpCode.SharpZipLib.dll", "ICSharpCode.SharpZipLib.dll");
        if (!File.Exists("LICENSE.txt"))
            Util.DownloadURLToFile("https://internal.mcadmin.eu/LICENSE.txt", "LICENSE.txt");

        Program.AddRTLine(Color.Green, "Essential file validation completed!\r\n", false);

        if (Program.dontUpdate)
        {
            Program.AddRTLine(Color.Green, "Update checking disabled!!!\r\n", false); 
            return;
        }

        UpdateRunning = true;

        Program.AddRTLine(Color.Green, "Checking for updates...\r\n", false);

        bool isUpdate;

        if (Program.dontUpdateMCAdmin || 1 == 1)
        {
            Program.AddRTLine(Color.Green, "MCAdmin update checking disabled.\r\n", false);
        }
        else
        {
            isUpdate = Util.DownloadURLToAndDiff("https://internal.mcadmin.eu/MCAdmin.exe", "MCAdmin.exe.new", "MCAdmin.exe");
            if (!isUpdate)
            {
                if (OutOfDateMCA)
                {
                    Program.AddRTLine(Color.Orange, "MCAdmin update downloaded! Restart MCAdmin to apply update!\r\n", false);
                    SendAdminMessage("MCAdmin update downloaded, consider restarting.", 4);
                }
                else
                {
                    Program.AddRTLine(Color.Green, "MCAdmin already up to date!\r\n", false);
                }
            }
            else
            {
                try
                {
                    if (File.Exists("MCAdmin.exe.old"))
                        File.Delete("MCAdmin.exe.old");
                }
                catch { }
                try
                {
                    if (File.Exists("MCAdmin.exe"))
                        File.Delete("MCAdmin.exe");
                }
                catch { }

                if (File.Exists("MCAdmin.exe")) 
                    File.Move("MCAdmin.exe", "MCAdmin.exe.old");
                File.Move("MCAdmin.exe.new", "MCAdmin.exe");

                OutOfDateMCA = true;
                Program.AddRTLine(Color.Orange, "MCAdmin update downloaded! Restart MCAdmin to apply update!\r\n", false);

                SendAdminMessage("MCAdmin update downloaded, consider restarting.", 4);
            }

        } 
```

此代码来自名为“UpdateManager”的类中的单个 void。

看看它是如何处理整个“MCadmin.exe.old”和“MCadmin.exe.new”文件的，有点像影子复制。

更新程序代码还有更多内容，但我不太明白。

这是 SVN： [https ://code.google.com/p/mcadminfork/source/browse/](https://code.google.com/p/mcadminfork/source/browse/)

有人可以帮我找出这个更新程序是如何实现的吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T13:00:37.110

Util.DownloadURLToAndDiff() 进行实际的下载和文件比较。所以你可能想看看那个。

否则，这很简单：

1.  下载 MCAdmin.exe.new
2.  删除 MCAdmin.exe.old（上次更新的剩余部分）
3.  尝试删除当前的 MCAdmin.exe
4.  如果删除失败（文件可能正在使用中），重命名 MCAdmin.exe MCAdmin.exe.old
5.  重命名 MCAdmin.exe.new MCAdmin.exe

# sql-server - 将值插入 SQL Server 数据库

> ID：12446687
> 
> 赞同：1
> 
> 时间：2012-09-16T12:00:27.747
> 
> 标签：sql-server, database

我创建了一个具有以下值的 Web 表单

*   名
*   姓
*   地址第一行
*   地址线 2
*   城市
*   状态
*   联系人1
*   联系人2
*   电子邮件ID
*   密码
*   确认密码...

`savedata`单击提交按钮后，将调用存储过程。

字段`name`,`address`和`contacts`保存到表中`personal_details`，而`email`和`password`存储到`login_detail`.

该表`personal_details`有列`user_id int identity(1,1) pk`...在表中定义
相同...`user_id int identity(1,1) fk``login_detail`

现在，是否有可能 2 个用户 1 和 2 同时提交表单，并且 user1 的个人详细信息被推送到表中，然后 user2 的个人详细信息被推送。

分别生成 id 为 1 和 2...

但是对于登录详细信息，首先推送 user2 数据，然后推送 user1...生成 ids 1 和 2...这是错误的...。

有没有其他方法可以为两个表获取相同的 id？

谢谢

这是我的第一个问题……抱歉，如果我无法正确地构图……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T12:13:11.793

您应该在单个事务中执行以下步骤序列，以确保此保存操作的原子性：

1.  开始交易
2.  将记录插入`personal_details`表中。
3.  获取这条新增记录对应的user_id。
4.  将记录插入到`login_details`表中，user_id 与上一步中获得的相同。
5.  提交交易。

此外，当这两个表中的记录之间存在一一对应关系时，将用户的详细信息“垂直分区”到两个表中似乎并不合适。您可以只拥有一个表，除非用户的属性为单个用户 ID 携带多个值，即一对多关系。

# c# - Windows 8 Metro 风格应用中 .NET GeoCoordinate.GetDistanceTo 的等价物

> ID：12446694
> 
> 赞同：4
> 
> 时间：2012-09-16T12:01:14.607
> 
> 标签：c#, .net, windows-8, microsoft-metro, getdistance

Metro 风格的 Windows 8 应用程序中 System.Device.Location.GeoCoordinate.GetDistanceTo 方法的等价物是什么。

Metro 应用程序具有 Geocoordinate 类（使用小写“C”），但没有 GetDistanceTo 方法。

其次，Metro Geocoordinate 类没有构造函数。我怎样才能创建它的一个实例。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-17T09:28:16.347

我根据 BlackLight 反编译了 .NET 4.5 GetDistanceTo 方法。在这里复制以节省人们的一些精力。

```
public double GetDistanceTo(GeoCoordinate other)
{
    if (double.IsNaN(this.Latitude) || double.IsNaN(this.Longitude) || double.IsNaN(other.Latitude) || double.IsNaN(other.Longitude))
    {
        throw new ArgumentException(SR.GetString("Argument_LatitudeOrLongitudeIsNotANumber"));
    }
    else
    {
        double latitude = this.Latitude * 0.0174532925199433;
        double longitude = this.Longitude * 0.0174532925199433;
        double num = other.Latitude * 0.0174532925199433;
        double longitude1 = other.Longitude * 0.0174532925199433;
        double num1 = longitude1 - longitude;
        double num2 = num - latitude;
        double num3 = Math.Pow(Math.Sin(num2 / 2), 2) + Math.Cos(latitude) * Math.Cos(num) * Math.Pow(Math.Sin(num1 / 2), 2);
        double num4 = 2 * Math.Atan2(Math.Sqrt(num3), Math.Sqrt(1 - num3));
        double num5 = 6376500 * num4;
        return num5;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T12:15:14.087

一年前我写了一个小库来处理坐标，或者可以帮助你计算坐标之间距离的东西。它在 CodePlex 上可用：http: [//beavergeodesy.codeplex.com/](http://beavergeodesy.codeplex.com/)

然后计算距离就这么简单。

```
// Create a pair of coordinates
GeodeticCoordinate coordinate1 = new GeodeticCoordinate() { Latitude = 63.83451d, Longitude = 20.24655d };
GeodeticCoordinate coordinate2 = new GeodeticCoordinate() { Latitude = 63.85763d, Longitude = 20.33569d };
// Calculate the distance between the coordinates using the haversine formula
double distance = DistanceCalculator.Haversine(coordinate1, coordinate2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T09:33:45.247

由于某种原因，Metro`Geocoordinate`没有构造函数。`public`在我看来，实现这一点的最好方法是使用 Reflector 并复制它的实现`System.Device.Location.GeoCoordinate`也会给你`GetDistanceTo`。

希望这将在以后重新添加到 API 中。

# php - 通过 PHP 到 iOS 应用程序的 BLOB 图像：

> ID：12446701
> 
> 赞同：1
> 
> 时间：2012-09-16T12:02:09.480
> 
> 标签：php, ios, image, request, blob

我将图像存储为 MySQL 数据库中的 blob。现在我想将这张图片传送到我的 iOS 应用程序中，以便我可以在应用程序上展示它。

1.  如何在 PHP 中使用 blob 以及在发出请求时如何返回它？
2.  我应该使用什么代码从服务器获取图片？

任何示例/教程/答案都会有帮助，所以在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:29:10.347

您需要从 mysql 表中获取 blob 内容，然后执行 base64_encode。将编码的图像数据传递给您的 iOS 应用程序，然后在 iOS 级别进行解码

# mysql - 带有连接性能的 sql 计数结果查询

> ID：12446704
> 
> 赞同：1
> 
> 时间：2012-09-16T12:02:44.793
> 
> 标签：mysql, sql, performance, join, count

我有以下表格（示例）

```
t1 (20.000 rows, 60 columns, primary key t1_id)
t2 (40.000 rows, 8 columns, primary key t2_id)
t3 (50.000 rows, 3 columns, primary key t3_id)
t4 (30.000 rows, 4 columns, primary key t4_id) 
```

sql查询：

```
SELECT COUNT(*) AS count FROM (t1)
JOIN t2 ON t1.t2_id = t2.t2_id
JOIN t3 ON t2.t3_id = t3.t3_id
JOIN t4 ON t3.t4_id = t4.t4_id 
```

我已经在影响连接（例如 on `t1.t2_id`）的列上创建了索引，并在必要时创建了外键。查询很慢（600 毫秒），如果我放置 where 子句（例如`WHERE t1.column10 = 1`where`column10`没有索引），查询会变得慢得多。我使用的查询`select (*)`速度`LIMIT`很快，但我无法理解计数行为。有什么解决办法吗？

**编辑：**添加解释 SQL

```
id  select_type     table   type    possible_keys   key     key_len     ref  rows   Extra
1   SIMPLE          t4      index   PRIMARY     user_id     4           NULL  5259  Using index
1   SIMPLE          t2      ref     PRIMARY,t4_id   t4_id   4        t4.t4_id   1   Using index
1   SIMPLE          t1      ref     t2_id         t2_id     4        t2.t2_id   1   Using index
1   SIMPLE          t3      ref     PRIMARY     PRIMARY     4        t2.t2_id   1   Using index 
```

其中 user_id 是 t4 表的列

**编辑：**我从 innodb 更改为 myisam 并且速度提高了，特别是如果我放置 where 子句。但是我仍然有时间（100-150 毫秒）我想在我的应用程序中计数的原因是对于正在处理搜索表单的用户，他期望使用 ajax 的结果数。可能有更好的解决方案，例如创建一个临时表，每隔一小时更新一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:38:53.703

正如查询计划中所述，由于 INDEX ONLY SCAN，计数查询更快。您提到的查询仅包含索引列，这就是为什么在执行期间不需要接触物理数据的原因——所有查询都是在索引上执行的。当您放置一些由未编入索引的列组成的附加子句时，或者以阻止索引使用的方式编入索引时，需要通过物理地址访问存储在堆表中的数据 - 这非常慢。

编辑：另一个重要的事情是，那些是 PK，所以它们是独一无二的。优化器选择对第一个索引执行 INDEX RANGE SCAN，并且只检查后续索引中是否存在键（这就是为什么计划声明只会返回一行）。

EDIT2：感谢 J. Bruni，事实上这是聚集索引，上面不是“全部真相”。可能对第一个表进行了全扫描，并随后进行了三个 INDEX ACCESS 以确认 FK 存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:22:17.563

`count`遍历整个结果集并且不依赖于索引。对查询使用 EXPLAIN ANALYZE 来检查它是如何执行的。

select + limit 不会迭代整个结果集，因此它更快

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-16T12:22:56.040

关于`COUNT(*)`性能缓慢：您使用的是 InnoDB 引擎吗？看：

*   [http://www.mysqlperformanceblog.com/2006/12/01/count-for-innodb-tables/](http://www.mysqlperformanceblog.com/2006/12/01/count-for-innodb-tables/)
*   ["SELECT COUNT(*)" 很慢，即使有 where 子句](https://stackoverflow.com/questions/511820/select-count-is-slow-even-with-where-clause)

主要信息似乎是：“ *InnoDB 使用聚集的主键，因此主键与数据页中的行一起存储，而不是在单独的索引页中。* ”

因此，一种可能的解决方案是创建一个单独的索引并通过`USE INDEX`SQL 查询中的命令强制使用它。查看此评论以获取示例使用报告：

[http://www.mysqlperformanceblog.com/2006/12/01/count-for-innodb-tables/comment-page-1/#comment-529049](http://www.mysqlperformanceblog.com/2006/12/01/count-for-innodb-tables/comment-page-1/#comment-529049)

关于这个`WHERE`问题，如果将条件放在 JOIN 子句中，查询会执行得更好，如下所示：

```
SELECT COUNT(t1.t1_id) AS count FROM (t1)
JOIN t2 ON (t1.column10 = 1) AND (t1.t2_id = t2.t2_id)
JOIN t3 ON t2.t3_id = t3.t3_id
JOIN t4 ON t3.t4_id = t4.t4_id 
```

# ios - APNS错误响应报文中不同状态码的含义

> ID：12446705
> 
> 赞同：21
> 
> 时间：2012-09-16T12:02:44.683
> 
> 标签：ios, push-notification, apple-push-notifications

使用增强通知格式时，APNS 在错误响应数据包中返回以下状态代码。

```
0 - 没有遇到错误
1 - 处理错误
2 - 缺少设备令牌
3 - 缺少主题
4 - 缺少有效载荷
5 - 令牌大小无效
6 - 无效的主题大小
7 - 有效载荷大小无效
8 - 无效的令牌
255 - 无（未知）

```

我想知道这些状态代码中的哪些实际上表明问题实际上与设备令牌有关（即：我可以将数据库中的特定设备令牌标记为无效或不活动）。我确信当我收到 8 作为状态码时，我可以安全地做到这一点。此外，我很确定状态代码 2、4、5 和 7 表示什么以及它们何时返回。

但是对于其余的状态代码，我几乎一无所知。苹果的网站也没有包含太多关于它们的信息。

任何人都可以详细地告诉我这些状态代码中的每一个。提前谢谢了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T20:24:02.587

您对 2、4、5、7 和 8 的看法是正确的。0 显然是个好消息。我们剩下：

```
1   - Processing error
3   - Missing topic
6   - Invalid topic size
10  - Shutdown
255 - None (unknown) 
```

1是Apple方面的问题，与令牌无关。

3是，根据[Apple](https://developer.apple.com/library/IOs/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW4)：

```
The topic is currently the bundle identifier of the target application on an iOS device. 
```

6 与 3 相关。

10 是你无法控制的，但也很好处理。

显然，255 将无法帮助您定义令牌是否是问题所在。

如果您的目标是确定某个令牌在某个时候有效但不再有效，那么您应该真正参考[反馈服务 API](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Appendixes/BinaryProviderAPI.html#//apple_ref/doc/uid/TP40008194-CH106-SW4)。

# c++ - HBITMAP/BITMAP 到 BITMAPINFOHEADER -> 通过网络 -> BITMAPINFOHEADER 到 HBITMAP/BITMAP

> ID：12446715
> 
> 赞同：2
> 
> 时间：2012-09-16T12:04:49.877
> 
> 标签：c++, winapi, bitmap, structure

我认为标题非常具有解释性，但这里有一些我正在尝试做的细节。基本上说我**在内存中加载了一个 BITMAP。**

**我想从中提取 BITMAPINFOHEADER**并将其添加到我的数据包结构中，该结构将通过套接字传输。*

*转移它不是问题，但是一旦它到达我想把**它变成一个 BITMAP 以便我可以使用它。***

我一直在为此苦苦挣扎，我一直在寻找高低，但没有任何运气。我将需要完成此操作的示例和功能列表会有所帮助。

非常感谢。我在win32 c++中需要这个。[没有 .NET 或 MFC] 赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T12:11:18.630

发件人：

1.  你有`HBITMAP`
2.  获取其属性，例如宽度和高度，使用`GetObject`
3.  用于`CreateDIBSection`创建另一个具有指向原始字节`HBITMAP`的指针的相同分辨率的 24/32 位 RGB ；`VOID*`您将在代码中进行初始化`BITMAPINFOHEDER`- 此时您应该已经拥有所需的所有数据
4.  `BitBlt`从原始位图到这个
5.  `BITMAPINFOHEDER`在辅助位图数据指针处将您的 + 字节发送到网络（ `sizeof BITMAPINFOHEDER`+`BITMAPINFOHEDER::biSizeImage`字节）

接收者：

1.  用于使用您收到`CreateDIBSection`的创建位图；`BITMAPINFOHEDER`您再次获得指向原始数据的指针
2.  `memcpy`图像数据到给定指针下的内存位置，或者只是在那里逐步接收数据
3.  你`HBITMAP`又来了

# android - getLoadManager().initLoader(0, null, this) 不可接受

> ID：12446719
> 
> 赞同：0
> 
> 时间：2012-09-16T12:05:12.220
> 
> 标签：android, listview

1.  API 级别为 8
2.  我确定我使用了支持包
3.  我得到 getLoadManager().initLoader(0, null, this) 不可接受

我的代码如下：

```
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.CursorAdapter;
 public class ListViewLoader extends ListActivity implements LoaderManager.LoaderCallbacks<Cursor>
{

// This is the Adapter being used to display the list's data
SimpleCursorAdapter mAdapter;

// These are the Contacts rows that we will retrieve
static final String[] PROJECTION = new String[] { ContactsContract.Data._ID, ContactsContract.Data.DISPLAY_NAME };

// This is the select criteria
static final String SELECTION = "((" + ContactsContract.Data.DISPLAY_NAME + " NOTNULL) AND (" + ContactsContract.Data.DISPLAY_NAME + " != '' ))";

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    // Create a progress bar to display while the list loads
    ProgressBar progressBar = new ProgressBar(this);
    progressBar.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    progressBar.setIndeterminate(true);
    getListView().setEmptyView(progressBar);

    // Must add the progress bar to the root of the layout
    ViewGroup root = (ViewGroup) findViewById(android.R.id.content);
    root.addView(progressBar);

    // For the cursor adapter, specify which columns go into which views
    String[] fromColumns = { ContactsContract.Data.DISPLAY_NAME };
    int[] toViews = { android.R.id.text1 }; // The TextView in simple_list_item_1

    // Create an empty adapter we will use to display the loaded data.
    // We pass null for the cursor, then update it in onLoadFinished()
    mAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, null, fromColumns, toViews);
    setListAdapter(mAdapter);

    // Prepare the loader. Either re-connect with an existing one,
    // or start a new one.
    getLoadManager().initLoader(0, null, this);
}

// Called when a new Loader needs to be created
public Loader<Cursor> onCreateLoader(int id, Bundle args)
{
    // Now create and return a CursorLoader that will take care of
    // creating a Cursor for the data being displayed.
    return new CursorLoader(this, ContactsContract.Data.CONTENT_URI, PROJECTION, SELECTION, null, null);
}

// Called when a previously created loader has finished loading
public void onLoadFinished(Loader<Cursor> loader, Cursor data)
{
    // Swap the new cursor in. (The framework will take care of closing the
    // old cursor once we return.)
    mAdapter.swapCursor(data);
}

// Called when a previously created loader is reset, making the data unavailable
public void onLoaderReset(Loader<Cursor> loader)
{
    // This is called when the last Cursor provided to onLoadFinished()
    // above is about to be closed. We need to make sure we are no
    // longer using it.
    mAdapter.swapCursor(null);
}

@Override
public void onListItemClick(ListView l, View v, int position, long id)
{
    // Do something when a list item is clicked
} 
```

}

# android - Android 4.0.3 中的 NullPointerException Google MapView

> ID：12446729
> 
> 赞同：0
> 
> 时间：2012-09-16T12:06:53.717
> 
> 标签：android, nullpointerexception, android-mapview

我正在使用谷歌地图活动。我遇到了很多这样的异常。仅在 android 4.0.3 中这是 android 4.0.3 的错误吗？

```
Caused by: java.lang.NullPointerException
at com.google.android.maps.MapView.restoreMapReferences(MapView.java:402)
at com.google.android.maps.MapView.setup(MapView.java:327)
at com.google.android.maps.MapActivity.setupMapView(MapActivity.java:404)
at com.google.android.maps.MapView.<init>(MapView.java:289)
at com.google.android.maps.MapView.<init>(MapView.java:264)
at com.google.android.maps.MapView.<init>(MapView.java:247)
at com.dianping.widget.CustomLocationGoogleMapView.<init>(CustomLocationGoogleMapView.java:25)
... 29 more 
```

# genetic-algorithm - 随机优化算法

> ID：12446733
> 
> 赞同：1
> 
> 时间：2012-09-16T12:07:41.487
> 
> 标签：genetic-algorithm, particle-swarm

假设我们有 2 个随机优化算法（遗传算法、粒子群优化、布谷鸟搜索等），A 和 B，我们想要找到一个函数的全局最大值。那么，如果算法 A 在优化一维搜索空间上的函数 F 时比算法 B 执行得更好，那么它在优化 N 维搜索空间上的函数 F 时也比算法 B 执行得更好吗？

我将通过 F_ND 引用 N 维中的函数 F。请注意，F_1D 和 F_ND 是同一个函数，只是维度数不同；“风景”完全一样，只是维度不同。

例如：对于德容函数，我们有：

```
F_1D(x) = x[0]*x[0]
F_5D(x) = x[0]*x[0] + x[1]*x[1] + x[2]*x[2] + x[3]*x[3] + x[4]*x[4] 
```

F_1D 和 F_5D 具有相同的“类型”/“方面”

...否则：

如果 general_performance(A,F_1D) > general_performance(B,F_1D) 那么 general_performance(A,F_ND) > general_performance(B,F_ND) （当然对于更大的 N）也成立吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T22:47:21.500

目前尚不清楚这样的财产是否会保留。没有免费午餐定理 (NFL) 在这里并不完全适用，因为您谈论的是一组非常有限的问题。您绘制的问题在更高维度上仍然是独立的（可以单独优化每个变量并达到全局最优）。在这种情况下，有人可能会争辩说，您可以将该问题分为 5 个 1 维问题并分别解决每个维度。这应该总是比解决它们结合起来便宜（假设没有维度是免费的）。

我认为这在很大程度上取决于问题的类型，但总的来说，我不*相信*这样的属性成立，并且对于某些问题和某些 N，您可以找到一个算法 B，使得 A 优于 B <=> 维度 < N 和 B 优于 A <=> 维度 >= N。

# php - Wordpress 评论表单功能

> ID：12446737
> 
> 赞同：0
> 
> 时间：2012-09-16T12:08:33.093
> 
> 标签：php, wordpress

我试图让我的 wordpress 主题看起来像这样：

```
<input id="author" class="inputsection" name="author" type="text" onfocus=" if (this.value == 'name...') {this.value = '';}" value="name..." />

<input id="email" class="inputsection_right" name="email" type="text" onfocus=" if (this.value == 'email...') {this.value = '';}" value="email..." />

<textarea id="comment" name="comment" cols="5" rows="5" class="inputlargesection"></textarea>

<input name="submit" type="submit" value="Submit" class="formbutton"> 
```

我正在使用 wordpress 要求的标准 comment_form() 函数。

这就是我这样做的方式：

```
<?php

comment_form(

array(
    'author' => "<input id=\"author\" class=\"inputsection\" name=\"author\" type=\"text\" onfocus=\" if (this.value == 'name...') {this.value = '';}\" value=\"name...\" />",
    'email'  => "<input id=\"email\" class=\"inputsection_right\" name=\"email\" type=\"text\" onfocus=\" if (this.value == 'email...') {this.value = '';}\" value=\"email...\" />",
    'url'    => false,
    'comment_field' => '<textarea id="comment" name="comment" cols="5" rows="5" class="inputlargesection" aria-required="true"></textarea>'
)

) ; 

?> 
```

但这不起作用。

我怎么做才能让它看起来像我所追求的。没有其他元素，没有代码允许文本等。

我一直在通过 wordpress codex 和 google 进行排序，但我没有找到我真正需要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:15:10.750

看起来这些字段应该放在一个额外的数组中：

```
<?php

comment_form( array(

    'fields' => array(
        'author' => "<input id=\"author\" class=\"inputsection\" name=\"author\" type=\"text\" onfocus=\" if (this.value == 'name...') {this.value = '';}\" value=\"name...\" />",
        'email'  => "<input id=\"email\" class=\"inputsection_right\" name=\"email\" type=\"text\" onfocus=\" if (this.value == 'email...') {this.value = '';}\" value=\"email...\" />",
        'url'    => false,
    ),
    'comment_field' => '<textarea id="comment" name="comment" cols="5" rows="5" class="inputlargesection" aria-required="true"></textarea>'

) ); 

?> 
```

# java - 通过 Json 将变量从 java 客户端发送到 php 服务器

> ID：12446740
> 
> 赞同：2
> 
> 时间：2012-09-16T12:09:23.780
> 
> 标签：java, php, android, json

我是 Java 和 PHP 的初学者，我正在开发一个包含 2 部分的应用程序：

Android客户端（Java）和PHP服务器。

我尝试了许多可用的教程，并阅读了用户犯的错误，但没有成功！

这是我正在使用的教程之一：Java File

```
package org.postandget;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Main extends Activity {

TextView tv;
String text;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tv  = (TextView)findViewById(R.id.textview);
    text    = "";

    try {
        postData();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public void postData() throws JSONException{  
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://10.0.2.2/ReceiveLocation.php");
    JSONObject json = new JSONObject();

    try {
        // JSON data:
        json.put("name", "Fahmi Rahman");
        json.put("position", "sysdev");

        JSONArray postjson=new JSONArray();
        postjson.put(json);

        // Post the data:
        httppost.setHeader("json",json.toString());
        httppost.getParams().setParameter("jsonpost",postjson);

        // Execute HTTP Post Request
        System.out.print(json);
        HttpResponse response = httpclient.execute(httppost);

        // for JSON:
        if(response != null)
        {
            InputStream is = response.getEntity().getContent();

            BufferedReader reader = new BufferedReader(new InputStreamReader(is));
            StringBuilder sb = new StringBuilder();

            String line = null;
            try {
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                try {
                    is.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            text = sb.toString();
        }

        tv.setText(text);

    }catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
}
} 
```

这是php文件

```
<?php
include('ConnectionFunctions.php');
Connection(); 

$json = $_POST['jsonpost'];
echo "JSON: \n";
echo "--------------\n";
var_dump($json);
echo "\n\n";

$data = json_decode($json);
echo "Array: \n";
echo "--------------\n";
var_dump($data);
echo "\n\n";

$name = $data->name;
$pos = $data->position;
echo "Result: \n";
echo "--------------\n";
echo "Name     : ".$name."\n Position : ".$pos; 
 ?> 
```

这是我运行 php 时出现的错误

```
 Notice: Undefined index: HTTP_JSON in C:\xampp\htdocs\ReceiveLocation.php on line 5
  JSON: -------------- NULL Array: -------------- NULL
  Notice: Trying to get property of non-object in C:\xampp\htdocs\ReceiveLocation.php   on   line 17

  Notice: Trying to get property of non-object in C:\xampp\htdocs\ReceiveLocation.php on   line 18
  Result: -------------- Name : Position : 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:14:39.523

使用以下命令访问 JSON 数据：

```
$json = $_POST['jsonpost']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:26:32.687

您试图访问 php 文件中的无效字段，它应该是

```
 $json = $_POST['jsonpost']; 
```

或者

```
 $json = $_REQUEST['jsonpost']; 
```

如果您打算对数据进行数据库工作，请记住还要从 php 文件中的错误输入中消除数据。也可能你的本地主机路径应该从

```
 HttpPost httppost = new HttpPost("http://127.0.0.1/ReceiveLocation.php"); 
```

至

```
 HttpPost httppost = new HttpPost("http://10.0.2.2/ReceiveLocation.php"); 
```

希望我有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:47:55.047

您的代码有问题，JSON 数据仅添加到标头，而不是 HTTP 请求的 POST 部分。

所以当你输出：

```
print_r(getallheaders());

$headers = getallheaders();

$json = json_decode($headers['json']);

print_r($json); 
```

你应该看到你的数据。我现在还没有修复，但我正在努力。

# java - Android onLocationChanged 和 MainActivity 类

> ID：12446742
> 
> 赞同：1
> 
> 时间：2012-09-16T12:09:55.137
> 
> 标签：java, android, class, gps, locationlistener

我有以下代码：

```
public class MyLocationListener implements LocationListener {

@Override
public void onLocationChanged(Location loc) {
    // called when the listener is notified with a location update from the GPS
    Log.d("Latitude", Double.toString(loc.getLatitude()));
    Log.d("Longitude", Double.toString(loc.getLongitude()));
}
@Override
public void onProviderDisabled(String provider) {
   // called when the GPS provider is turned off (user turning off the GPS on the phone)
}
@Override
public void onProviderEnabled(String provider) {
   // called when the GPS provider is turned on (user turning on the GPS on the phone)
}
@Override
public void onStatusChanged(String provider, int status, Bundle extras) {

} 
```

在我的 MainActivity

```
 LocationListener locationListener = new MyLocationListener();
        LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener); 
```

现在，我想要的只是将设备的当前位置一次接收到 MainActivity 类（获取海拔和经度变量，以便稍后在应用程序中使用）。

A. 如何在单次后停止接收位置？函数 lm.removeUpdates(listener) 只能在 MainActivity 类中调用。

B. 基本相同。如何在 MyLocationListener 类和 MainActivity 之间进行连接？

抱歉，我是 Android 和 Java 开发的新手。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:49:13.370

您可以使用以下示例代码：

```
public class LocationGetter {
    private final Context context;
    private Location location = null;
    private final Cordinate gotLocationLock = new Cordinate();
    private final LocationResult locationResult = new LocationResult() {
        @Override
        public void gotLocation(Location location) {
            synchronized (gotLocationLock) {
                LocationGetter.this.location = location;
                gotLocationLock.notifyAll();
                Looper.myLooper().quit();
            }
        }
    };

    public LocationGetter(Context context) {
        if (context == null)
            throw new IllegalArgumentException("context == null");

        this.context = context;
    }

    public  void getLocation(int maxWaitingTime, int updateTimeout) {
        try {
            final int updateTimeoutPar = updateTimeout;
            synchronized (gotLocationLock) {
                new Thread() {
                    public void run() {
                        Looper.prepare();
                        LocationResolver locationResolver = new LocationResolver();
                        locationResolver.prepare();
                        locationResolver.getLocation(context, locationResult, updateTimeoutPar);
                        Looper.loop();
                    }
                }.start();

                gotLocationLock.wait(maxWaitingTime);
            }
        } catch (InterruptedException e1) {
            e1.printStackTrace();
        }
        gteAddress ();
    }

public double getLatitude() {
    return location.getLatitude();
}

public double getLongitude() {
    return location.getLongitude();
} 
```

在您的活动中使用：

```
_locationGetter=new LocationGetter(context);

_locationGetter.getLocation(200000000, 10000000);

_locationGetter.getLongitude();

_locationGetter.getLatitude(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:37:49.060

您还可以在获取坐标后使用 LocationManager.removeUpdates （并可能检查坐标是否足以满足您的需要）：

```
 @Override
    public void onLocationChanged(Location loc) {
        // called when the listener is notified with a location update from the GPS
        Log.d("Latitude", Double.toString(loc.getLatitude()));
        Log.d("Longitude", Double.toString(loc.getLongitude()));
        lm.removeUpdates(this);
    } 
```

# django - Django 脆表单、BaseGenericInlineFormSet 和 allow_delete

> ID：12446744
> 
> 赞同：7
> 
> 时间：2012-09-16T12:10:08.677
> 
> 标签：django, django-crispy-forms, form-layout

我在使用 django-crispy-forms 时遇到了一个问题，我无法得到答案。我有一个相当复杂的表单布局，到目前为止，一切都非常好用 cripy-forms。

表单的一部分使用通用的内联表单集。这也有效，但我的问题是，我无法弄清楚如何访问删除复选框（当有**can_delete=True**时）

相应的代码如下所示：

```
class BaseReleaseReleationFormSet(BaseGenericInlineFormSet): 

    def __init__(self, *args, **kwargs):

        self.instance = kwargs['instance']
        super(BaseReleaseReleationFormSet, self).__init__(*args, **kwargs)

        self.helper = FormHelper()
        self.helper.form_id = "id_relation_form"
        self.helper.form_class = 'form-horizontal'
        self.helper.form_method = 'post'
        self.helper.form_action = ''
        self.helper.form_tag = False

        base_layout = Row(
                Column(
                       Field('name', css_class='input-small'),
                       #Field('delete', css_class='input-small'),
                       css_class='span3'
                       ),
                Column(
                       Field('url', css_class='input-xlarge'),
                       css_class='span4'
                       ),
                css_class='row relation-row',
        )

        self.helper.add_layout(base_layout) 
```

name 和 url 字段根据需要使用清晰的表单呈现，但删除复选框出现在表单的末尾。而且我无法在布局中访问它。

有人知道如何解决这个问题吗？有小费吗？提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T12:35:24.703

愚蠢的我-想通了..删除字段被称为“DELETE”。（注意大写字母...）

```
 base_layout = Row(
            Column(
                   Field('name', css_class='input-small'),
                   css_class='span3'
                   ),
            Column(
                   Field('url', css_class='input-xlarge'),
                   Field('DELETE', css_class='input-small'),
                   css_class='span4'
                   ),
            css_class='row relation-row',
    ) 
```

# google-maps - 谷歌地图缩放级别

> ID：12446747
> 
> 赞同：2
> 
> 时间：2012-09-16T12:10:22.807
> 
> 标签：google-maps, google-maps-api-3

有没有办法让谷歌地图根据正在搜索的内容缩放到一定程度？例如，如果我正在搜索街道，那么当我搜索街道时，谷歌地图会放大到街道级别。

当我在搜索一个城市时，谷歌地图会放大到城市级别，等等......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:04:19.233

试试下面的链接，在这里你会有一些不同的地图级别信息。 [https://developers.google.com/maps/documentation/staticmaps/#MapTypes](https://developers.google.com/maps/documentation/staticmaps/#MapTypes)

和

[如何动态设置谷歌地图自定义缩放级别？](https://stackoverflow.com/questions/2424684/how-to-set-google-map-custom-zoom-level-dynamically?rq=1)

[Google Maps v3 - 限制可视区域和缩放级别](https://stackoverflow.com/questions/3818016/google-maps-v3-limit-viewable-area-and-zoom-level)

它可能会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T15:44:57.657

实际上，我使用以下代码行解决了这个问题：

```
map.fitBounds(results[0].geometry.viewport); 
```

从地理编码网络服务获得状态“OK”后，我使用上面的代码行。它工作正常。

# c# - 动态选择数据库

> ID：12446748
> 
> 赞同：1
> 
> 时间：2012-09-16T12:10:24.510
> 
> 标签：c#, mysql, database, database-connection

我遇到了真正的砖墙，试图连接到动态数据库。我不知道如何实现这一点，

这是我的过程，我有一个应用程序，它需要适应工作环境的变化，比如说如果工作场所服务器崩溃并且他们创建了一个新数据库，其名称`db_new`是应用程序将连接到的名称而不是旧数据库名称.

我已经有一个窗口，可以在列表框中显示来自服务器的数据库，用户可以在其中指定要用于应用程序的数据库。但问题是，如何保存选定的数据库名称，以便在选择新数据库后可以运行？..

管理员应该能够在必要时更改应用程序使用的数据库，并且应用程序应该继续使用该选定的数据库，直到管理员将其更改回新数据库。

如果问题有点含糊，请原谅，我只是以最好的方式把它放在一起，对此的任何帮助都会非常棒:)

**编辑：**

而且我不能使用文本文件或 xml 作为应用程序使用的数据库名称，应该以安全的方式存储。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:27:11.557

首先，您可以非常轻松地使用文本或 XML 文件：如果您将信息存储在用户无法下载的文件中（正如我假设的那样），这将尽可能安全：如果有人设法闯入服务器并读取文件，那么**游戏就结束**了。

也就是说，我建议您使用 MySQL 代理或类似机制并将您的 WebApp 指向它 - 然后可以在代理层处理故障转移到另一个数据库或更改底层数据库，而 WebApp 甚至都不知道它：功能需要不是你的应用程序的一部分，在我的书中它不应该。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:15:02.207

您还没有告诉我们您使用的语言。因此，我们无法提供非常好的建议。

我的第一个想法：

如果这是 PHP，你可以让通用应用程序使用类似的东西，

```
$db->execute('sql statement here'); 
```

然后让管理员在需要时更改当前的 $db。这样 $db->e​​xecute() 将始终在“当前”数据库上执行。

编辑：这在 C# 中应该仍然有效。如果您有使用数据库的函数调用一个作为当前数据库连接的变量，那么您应该能够在需要时将数据库连接更改为正确的数据库，而其余部分继续运行，因为它只是同一个变量。

# c# - 在 .NET 中使用重定向的文件路径运行进程

> ID：12446756
> 
> 赞同：1
> 
> 时间：2012-09-16T12:11:21.517
> 
> 标签：c#, .net, vb.net, io

有没有办法在 .NET 中使用重定向文件路径运行进程，类似于 Sandboxie 和 DropboxPortableAHK 所做的？

例如，如果进程想要在 处写入文件`C:\file.txt`，我希望我的应用程序让进程写入`C:\Sandbox\file.txt`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:10:21.097

由于 .NET 迟早会将调用重定向到底层操作系统，因此您确实可以附加一个挂钩并替换类似 CreateFile() 的例程来修改路径。

[Detours Library](http://www.codeproject.com/Articles/30140/API-Hooking-with-MS-Detours)可能是您所需要的。它有一些许可问题，尤其是在 64 位模式下，所以寻找像这样的免费替代品：[DetourXS](http://dreaminpixels.net/detourxs-a-x8664-detours-library/)。

此处给出了挂钩 CreateFile/WriteFile/ReadFile 的确切说明：[CodingTheWheel](http://www.codingthewheel.com/archives/how-i-built-a-working-online-poker-bot-6)。

您只需使用以下过程编写 DLL：

```
// Our custom version of the CreateFile Windows API, having the same parameters,
// return type, and calling convention as the version of CreateFile provided by the OS.
HANDLE WINAPI Mine_CreateFile(LPCWSTR lpFileName,DWORD dwDesiredAccess,
                              DWORD dwShareMode, LPSECURITY_ATTRIBUTES lpSecAttr,
                              DWORD dwCreateDisp, DWORD dwFlagsAttr,HANDLE hTemplate)
{
    // First, call the original CreateFile provided by the operating system.
    HANDLE hFile = Real_CreateFile(lpFileName,dwDesiredAccess,dwShareMode,lpSecAttr,
                                    dwCreateDisp,dwFlagsAttr,hTemplate);

    // Now, do whatever we want with the filename (lpFileName)
    /// e.g., redirect C:\test.txt to C:\MyApp\test.txt

    // Now, do whatever we want with the file handle (hFile)

    // Call the original CreateFile

    // Return the same value returned to us by the original API
    return hFile;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T04:00:53.393

我建议您使用[EasyHook](http://easyhook.codeplex.com)，这是您正在寻找的[示例。](http://easyhook.codeplex.com/SourceControl/changeset/view/68274#612760)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T17:41:35.997

这一点都不简单，但基本上你需要用本机代码（例如 C++）创建一个 DLL。此 DLL 挂钩文件和注册表 IO 并将其重定向到您的沙箱目录。然后，将此 DLL 注入沙盒进程。然后，DLL 将挂钩此进程的活动。

这是基本的想法。

# symfony - Symfony2.1：以 HTML 格式发送的电子邮件似乎被转义了

> ID：12446757
> 
> 赞同：0
> 
> 时间：2012-09-16T12:11:30.593
> 
> 标签：symfony, html-email, symfony-2.1, swiftmailer

在我**的 Symfony2.1**应用程序中，我使用**SwiftMailer**发送电子邮件。由于我处于*开发模式*，因此我不会发送真实的电子邮件。我控制*Profiler*提供的工具栏中的输出。

我发送的电子邮件是 HTML 格式的。因此，为了确保 HTML 输出，我做了以下设置：

```
$message = \Swift_Message::newInstance()
        ->setContentType("text/html")
        ->setSubject('Conferma registrazione nuovo utente')
        ->setFrom('xxx@xxx.com')
        ->setTo($email)
        ->setBody($this->renderView('AcmeMessageBundle:Contact:contact_request_email.html.twig', 'text/html');

$this->get('mailer')->send($message); 
```

我想 HTML 电子邮件的所有设置都可以。尽管如此，我发现发送的电子邮件并未在 Profiler 专用区域中显示为 HTML。特别是，所有的 HTML 标签都被转义了！为什么？我在设置中缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:15:27.967

对于开发人员，建议设置[Gmail](http://symfony.com/doc/current/cookbook/email/gmail.html)之类的东西来处理电子邮件

```
# app/config/config_dev.yml
swiftmailer:
    transport: gmail
    username:  your_gmail_username
    password:  your_gmail_password 
```

至于 HTML 电子邮件，我无法准确判断您的问题是什么，它可能是任何问题。HTML 电子邮件并不容易（这就像为 IE6 开发一样），这就是为什么很多开发人员只是选择发送文本电子邮件的原因。

# java - 如何在另一个变量中创建一个变量？

> ID：12446759
> 
> 赞同：0
> 
> 时间：2012-09-16T12:11:43.413
> 
> 标签：java, string, variables

> **可能重复：**
> [Java 中的动态变量名称：](https://stackoverflow.com/questions/6729605/dynamic-variable-names-in-java)

假设我有一个字符串，如下所示。

```
String s = "Hello"; 
```

现在，我想创建一个字符串，但字符串的变量将被称为“Hello”。为了使字符串的名称为“Hello”，我必须访问字符串`s`以获取名称“Hello”，这样我就可以将它用作变量名。下面是我想看到的。

```
String Hello = "I want to do this, But from Accessing String s So I KNOW that String s = Hello"; 
```

感谢您的努力，请尝试向我解释，因为我是 Java 初学者。:D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T12:20:51.033

您尝试做的是添加一个间接层。您不能在 Java/C/C++/Pascal/等静态语言中动态访问变量

您可以做的是模拟动态语言使用的动态上下文，例如，在这种情况下创建一个 Map 来保存变量名称和值

```
Map<String,String> stringVars = new HashMap<String,String>();

// set a "variable"
stringVars.put("Hello", "value");

// get a "variable"
System.out.println(stringVars.get("Hello")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T12:31:45.860

使用反射（不推荐）：

```
public class MainClass
{
    public String Hello = "I want to do this, But from Accessing String s So I KNOW that String s = Hello";

    public static void main(String[] args) throws Exception
    {
        MainClass m = new MainClass();

        String s = "Hello";
        String result = (String) MainClass.class.getField(s).get(m);
        System.out.println(result);
    }
} 
```

**输出：**

```
I want to do this, But from Accessing String s So I KNOW that String s = Hello 
```

相反，请使用其他说明的地图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T13:42:45.167

您能否使用一个 Map 接受一个字符串（例如“Hello”）并将其映射到另一个字符串（例如“我想这样做，但是通过访问 String s 所以我知道 String s = Hello”）。类似于以下内容：

```
Map<String, String> stringMap = new HashMap<String, String>();
stringMap.put("Hello", "I want to do this, But from Accessing String s So I KNOW that String s = Hello"); 
```

然后你可以通过调用找到地图中的所有键值（例如“Hello”）：

```
Set<String> stringKeys = stringMap.keySet(); 
```

您可以像这样查找属于键“Hello”的长字符串：

```
String longValue = stringMap.get("Hello"); 
```

这就是我如何使用简单的字符串值来查找笨拙的字符串值。请记住，您还可以使用 Map 将 String 值映射到任何其他类型的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T12:20:44.730

这在java中是不可能的。

您唯一能做的就是使用 A`map`接口的实现，例如`HashMap`. 使用一种`put`方法，您可以为给定的“名称”“分配”一个值。该名称将是 a`key`并且在映射中必须是唯一的，就像变量在其范围内具有唯一名称一样。

要检索`value`，调用`get`传递适当`key`（例如 string `'Hello'`）作为参数的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T12:28:56.197

在 Java 中，您无法获得指向对象的变量（引用）名称，因为该对象不知道对它的引用，并且可以有多个变量引用同一对象。

另一方面，您可以这样做；但我不知道有什么帮助：

```
String s = "Hello";
Reference<String> hello = new SoftReference<String>(s);
String myStringAccessedWithHello = hello.get(); 
```

# macos - Mac OS X 10.6.3 的 Xcode？

> ID：12446762
> 
> 赞同：-1
> 
> 时间：2012-09-16T12:12:43.410
> 
> 标签：macos

是否有适用于 mac OS X 10.6.3 的 xcode 版本？我在谷歌上进行了几次搜索，但我找到的唯一版本是 10.6.6 及更高版本。

而 xcode 3.2.5 是针对豹而不是雪豹的。

我想用它来开发 Iphone 和 Ipad。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:20:06.557

您是否在这里查看过：[http](http://connect.apple.com/) ://connect.apple.com/ 您需要使用您的 Apple ID 登录。此外，正如 Analog File 所提到的，该版本可能已被弃用，如果您使用它构建一个应用程序，您将无法将您的应用程序提交到 App Store。

# ruby-on-rails - 什么时候不使用页面缓存？

> ID：12446764
> 
> 赞同：0
> 
> 时间：2012-09-16T12:13:01.500
> 
> 标签：ruby-on-rails, caching, page-caching

摘自[Rails 文档](http://guides.rubyonrails.org/caching_with_rails.html#action-caching)：

> 页面缓存的问题之一是您不能将它用于需要以某种方式限制访问的页面。[...]

“限制访问”到底是什么意思？你能给我一些例子吗？

例如，它指的是 Wiki 和论坛吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T12:37:48.257

每当您拥有像第一个评论者所说的那样的身份验证系统时。

Wiki 可以被缓存。如果论坛相当活跃，则不应缓存它们，因为您希望用户每次访问时都能看到新鲜内容

还要注意闪存消息。例如，一个用户填写了一个表格，当您呈现主页时，您会闪现“Success Thanks for registering”。您不希望该消息在用户下次访问您的页面时出现。

观看 Railscasts 动态页面缓存一集，了解大量重要信息和您可能遇到的潜在问题。[http://railscasts.com/episodes/169-dynamic-page-caching-revised](http://railscasts.com/episodes/169-dynamic-page-caching-revised)

# algorithm - 逆时针排列凹多边形顶点

> ID：12446766
> 
> 赞同：3
> 
> 时间：2012-09-16T12:13:12.313
> 
> 标签：algorithm, graph, geometry, polygon, counterclockwise

我有一组位于凹多边形边界上的点。我想找到一个以这些点为顶点的非交叉多边形。换句话说，我想以 ccw（或 cw）方式排列凹多边形的顶点。

我查看了评估多边形是否以 ccw 或 cw 方式排序的方法（计算和求和叉积）。这不完全是我的问题：我有随机序列的顶点，我想对它们进行排序，以便让它们在多边形的外壳上顺时针或逆时针。

我想取顶点的初始序列，并依次识别交叉点。如果初始点序列是 [x1,y1 ; x2, y2 ; x3, y3 ; ...] 和第 2 和第 3 点交叉，我们继续序列 [x1,y1 ; x2, y3 ; x3, y2 ; ...]

你能想到什么算法？背后的观念是什么？你有一些参考的提示吗？

![阿尔法形状](../Images/0f39c21b50c24f7e00ba678a77963683.png)

注册表

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T13:44:09.777

如果我正确理解了这个问题，您希望对输入点集进行排序，以便它们以某些可能凹多边形的顺时针顺序出现。这可以通过以下方式解决。

![在此处输入图像描述](../Images/952834a4677070fb3f100ca00294b694.png)

设 p1 和 p2 是最左边和最右边的点。找到点的下凸包 S。S 包含 p1、p2 和线 p1p2 下方的所有凸包点。现在按 x 坐标对剩余的点（不在 S 中的点）进行排序。此排序顺序与 S 的顺序（由下凸包算法生成）将为您提供所有顶点的所需顺时针顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T22:22:18.523

在构建多边形时有一些信息必须使用，除非多边形的定义比我认为可能是凹多边形的一组点更好。

例如，如果顶点取自形状或图像，则形状中的填充像素可能会有所帮助。对于一个项目，我需要在 blob 的周长上排序点，所以我得到 blob 的边界像素（可以通过多种方式完成），然后我使用 DFS 样式遍历这些点以将它们按顺序排列。然后我编写了算法来合并边缘并在交叉点做出决策。

# c# - 如何比较 C# 中的多维数组？

> ID：12446770
> 
> 赞同：26
> 
> 时间：2012-09-16T12:13:54.447
> 
> 标签：c#, arrays, compare, multidimensional-array

如何比较多维数组？只是真/假。

```
double[,] data1 = new double[,] { { 1, 2 }, { 3, 4 }, { 5, 6 }, { 7, 8 } };    
double[,] data2 = new double[,] { { 1, 2 }, { 3, 4 }, { 5, 6 }, { 7, 8 } };

//bool compare = data1.SequenceEqual(data2); 
```

有没有办法比较像一维数组这样的二维数组？

```
data1.SequenceEqual(data2); 
```

我必须每秒比较，所以最简单的方法会很棒。非常感谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-16T12:20:44.617

多维数组可以在 linq 中用作一维可枚举。您只需要检查所有尺寸的长度。这个片段应该足够了：

```
var equal =
    data1.Rank == data2.Rank &&
    Enumerable.Range(0,data1.Rank).All(dimension => data1.GetLength(dimension) == data2.GetLength(dimension)) &&
    data1.Cast<double>().SequenceEqual(data2.Cast<double>()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-19T11:01:48.877

您可以使用扁平化多维数组`.Cast<String>`

```
Console.WriteLine("2D Array");
String[,] array2d = new String[,] { { "A1", "B1" }, { "A2", "B2" } };
foreach(var s in array2d.Cast<String>())
    Console.Write(s + ", ");

Console.WriteLine("\r\n3D Array");
String[,] array3d = new String[,] { { "A1", "B1", "C1" }, { "A2", "B2", "C1" } };
foreach (var s in array3d.Cast<String>())
    Console.Write(s + ", "); 
```

# 输出

```
2D Array
A1, B1, A2, B2, 
3D Array
A1, B1, C1, A2, B2, C1, 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-18T18:17:03.637

比较二维数组的通用扩展方法：

```
public static bool SequenceEquals<T>(this T[,] a, T[,] b) => a.Rank == b.Rank
    && Enumerable.Range(0, a.Rank).All(d=> a.GetLength(d) == b.GetLength(d))
    && a.Cast<T>().SequenceEqual(b.Cast<T>()); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2019-11-18T15:34:18.700

您也可以尝试使用 2 个 for 循环来解决它并将它们与计数器进行比较。

也许是这样的？

```
for(int counter1 = 0; counter1 < data1.GetLength(0); counter1++)
{
   for(int counter2 = 0; counter2 < data2.GetLength(1); counter2++)
   {
      if(data1[counter1, counter2] == data2[counter1, counter2])
      {
         bool isEqual = true;
      }    
   }
} 
```

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2012-09-16T18:48:38.047

你可以这样做

```
data1.SequenceEqual(data2); 
```

# php - 同一页面上的多个选择列表 - >错误

> ID：12446771
> 
> 赞同：2
> 
> 时间：2012-09-16T12:13:54.773
> 
> 标签：php, html, joomla

我要疯了，试图解决 PHP 脚本 (Joomla) 中的一个非常奇怪的错误。我有一个页面显示多个选择下拉列表，它们都显示相同的项目列表（所选项目从一个列表更改为另一个，但列出的项目是相同的）。这个列表有大约 35-40 项。这在一定数量的选择之前工作正常，但是当我在同一页面上放置超过 20 或 25 个选择时，它不起作用并且只显示一个白页。没有错误，没有显示文本，php日志中没有错误，什么都没有；只是一个白页。如果使用相同的代码，我会显示 11 个下拉选择列表......它可以工作。

我猜这个问题与内存或类似的东西有关，但我不能确定原因，正如我所说，没有显示错误。有谁知道类似的问题？谁能给我一个关于如何解决这个问题的提示？我不知道该怎么做，我已经尝试了很多东西，但它仍然不起作用。任何帮助将不胜感激和欢迎...

注意：选择列表中填充了来自 DB 表的值，并且每个选择列表具有基于另一个表中的内容的不同选定项。这不是一个非常复杂的代码，正如我所说，当我在同一页面上使用较少的选择列表时它工作正常。问题是当我在同一页面上达到一定数量的选择列表时（我认为它大约有 20 或 25 个输入选择）。我认为数据量不是很夸张，所以我不明白为什么它不起作用¿！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:34:16.373

针对您的问题的快速谷歌搜索结果[如下](http://forum.joomla.org/viewtopic.php?p=2233203&sid=5a6bd4c88aaea8c8d89aeb47ac96117d#p2233203)：

> 对于 jos_session，这是我建议您清空的唯一表，任何登录的用户都将被注销...任何正在进行的工作（论坛帖子/文章将丢失）...
> 
> 我也清空了recaptcha ...
> 
> 请记住始终先备份您的数据库。
> 
> ## 我每周清空这两个以换取更高容量的 joomla 1.5 系统...我们还将会话生命周期（无活动）设置为 60-90 分钟...6-7k 天容量站点...这也有助于我们的 akeeba 恢复向上，因为如果没有适当的维护，上述两个表可能会变得非常大。
> 
> 只是一些一般的杂谈...
> 
> 您还应该通过 phymyadmin“显示 MySQL 运行时信息”查看您的 mysql 站点报告。寻找“红色”的东西。
> 
> 至于你关于性能的整体问题。请记住，有很多方法可以提高网站性能。这是站点管理员需要的另一项工作，至少是一个有趣的过程。
> 
> joomla 性能论坛是审查您的网站并获得调整网站的好地方，包括您需要的最低基本服务器（共享/vps/专用）。
> 
> 恕我直言...第一个目标是通过启用标准服务器模块（如 mod_deflate 和 mod_expires （mod_expires 是回访者的最佳修复之一）来关闭 joomla 缓存和 joomla gzip）。确保您的 mysql 配置启用 query_cache 已设置或可以设置。您至少需要一个 vps。还有更多！...jajajaja
> 
> 关于运行共享服务器的一点说明，并且没有某些可用的服务器模块，请查看：[http](http://www.webogroup.com/) ://www.webogroup.com/这真的是一款非常棒的产品。我已经在上述网站上使用了它，直到我可以在服务器上实施更改。当我实现每个新的服务器模块时，我关闭了网络……网站现在很快就无聊了
> 
> 玩得开心

# c++ - C++：为什么要编译代码

> ID：12446772
> 
> 赞同：0
> 
> 时间：2012-09-16T12:14:06.880
> 
> 标签：c++, compilation

我不明白这段代码是如何编译的。有人可以解释那里发生了什么。

```
#include <iostream>

using namespace std;

class B
{
public:    
    B(const char* str = "\0") //default constructor
    {
        cout << "Constructor called" << endl;
    }    

    B(const B &b)  //copy constructor
    {
        cout << "Copy constructor called" << endl;
    } 
};

int main()
{ 
    B ob = "copy me";    //why no compilation error.
    return 0;
} 
```

optput 是：构造函数调用

PS：我想不出比这更贴切的标题了，谁能想到更好的标题，请修改。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T12:18:23.593

的类型`"copy me"`为`char const[8]`，衰减为`char const *`。由于默认构造函数不是`explicit`，`"copy me"`因此可以隐式转换为`B`，因此`ob`可以从该隐式转换的临时对象复制构造`B`。

如果声明了默认构造函数`explicit`，您将不得不编写以下内容之一：

```
B ob1 = B("copy me");
B ob2("copy me"); 
```

*如果还*声明了复制构造函数`explicit`，您将不得不说其中之一：

```
B ob3(B("copy me"));
B ob4("copy me"); 
```

在实践中，所有的副本都将被任何半体面的编译器忽略，并且您总是以一个默认的构造函数调用结束。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-16T12:18:42.823

因为这

```
B ob = "copy me"; 
```

调用*复制构造函数*，它接受参数`const B &b` **并且**你的类`B`有一个构造函数

```
B(const char* str = "\0") 
```

*未定义*为`explicit`。_

允许编译器进行一次隐式转换。

* * *

那么，这里会发生什么：

```
B ob = "copy me"; 
```

是：

1.  `B`使用提供的创建一个临时的、未命名的对象`const char* str`- 这是允许的，因为`class B`有构造函数，它接受一个参数并且未定义为`explicit`. 换句话说，所有具有类型的对象`B`都可以从一个`const char*`
2.  使用在 中创建`ob`的临时对象创建对象`1.`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-16T12:19:22.627

如果将关键字**显式**添加到默认构造函数以防止隐式转换。然后它不会编译。你的答案是隐式转换。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-16T12:19:13.353

这是因为赋值语句隐式转换为

```
B ob("copy me"); 
```

试试这个使编译失败（查看[`explicit`](http://www.stroustrup.com/glossary.html#Gexplicit)关键字）：

```
#include <iostream>

using namespace std;

class B
{
public:    
    explicit B(const char* str = "\0") //default constructor
    {
        cout << "Constructor called" << endl;
    }    

    B(const B &b)  //copy constructor
    {
        cout << "Copy constructor called" << endl;
    } 
};

int main()
{ 
    B ob = "copy me";    //why no compilation error.
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-16T12:18:38.020

> [它不应该编译，因为] 指定的行在数据类型中不匹配

没有编译错误，因为存在一个将其作为参数的构造`B`函数`const char*`，允许在 和 之间进行`const char*`转换`B`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-16T12:32:24.970

这是因为隐式转换。将一个 Explicit 添加到您的 Default 构造函数并尝试。它将无法编译。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-16T12:40:18.083

编辑：在与 Kerrek SB 讨论后，我得到了 C++11 标准的副本。我错了，有暂时的。我正在编辑此回复以反映我新获得的理解。

15 年前，我非常了解 C++（大约在第一个标准发布的时候）。自 1998 年底以来我就没有使用过它，所以我忘记了很多东西，而且我对最近的标准几乎一无所知。

代码是正确的。

```
 B ob = "copy me";    //why no compilation error. 
```

没有错误。这被解析为初始化变量的声明。`B`是类型，`ob`变量名，`"copy me"`初始化器。

初始化器是类型`const char*`的，在 B 类中有一个构造函数，它接受一个`const char*`类型化的单个参数。该构造函数未声明为受限制`explicit`，因此可以在此上下文中使用。

要么创建一个临时对象，然后复制（您会看到打印出的两行），要么省略副本，并且仅调用转换构造函数以直接在目标处构造（您只会看到打印的一行）。即使复制构造函数有副作用，该标准也明确允许这样做。

程序执行将打印*构造函数调用*到标准输出。它可能会也可能不会打印*Copy constructor called* . 没有错误。

# javascript - 如何在不输入递归的情况下请求 twitter api

> ID：12446776
> 
> 赞同：1
> 
> 时间：2012-09-16T12:15:04.050
> 
> 标签：javascript, jquery, arrays, twitter

任何人都知道我如何在不使用递归的情况下根据文本查询向 twitter api 发出请求。

这是我的代码

```
 function news_tweets(query, user_id, count) {
            news_array = [];
            user_tweets = [];
            full_array = [];
            $.getJSON("https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=false&user_id=" + user_id +
             "&count=" + count + "&callback=?",

            function (data) {
                $.each(data, function (i, item) {
                    var user = item.user.name;
                    var date = item.created_at;
                    var profile_img = item.user.profile_image_url;
                    var text = item.text;
                    var url = (item.entities.urls.length > 0 ? item.entities.urls[0].url : '');
                    news_array.push({
                        news_user: user,
                        news_date: date,
                        news_profile_img: profile_img,
                        news_text: text,
                        news_url: url
                    });
                });
                find_tweets(news_array);

            });
        }

        function find_tweets(news_array) {
            for (var i in news_array) {
                var news_text = news_array[i].news_text;
                $.getJSON("http://search.twitter.com/search.json?q=" + news_text + 
                "&rpp=10&include_entities=true&result_type=mixed&callback=?",

                function (data) {
                    $.each(data.results, function (i, item) {
                        var user = item.from_user;
                        var user_id = item.from_user_id;
                        var date = item.created_at;
                        var user_profile_img = item.profile_image_url;
                        var text = item.text;
                        var url = (item.entities.urls.length > 0 ? item.entities.urls[0].url : '');
                        user_tweets.push({
                            user: user,
                            user_id: user_id,
                            date: date,
                            user_profile_img: user_profile_img,
                            text: text
                        });
                    });
                    combine_arrays(news_array, user_tweets);
                });
            }

            function combine_arrays(news_array, user_tweets) {
                full_array = news_array.concat(user_tweets); console.log(full_array);
                }

             } 
```

当我使用 console.log("hello") 或尝试连接两个数组时，一切都会执行三遍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:17:02.683

您似乎只有一个`news_array`and`user_tweets`数组的实例。在这些上，您推送您的 api 查询的所有结果。然而，你`combine_arrays`从一个循环中调用整个数组的函数（每次搜索后都会给你一组新的结果）——在某些项目上运行多次。

我想重新初始化

```
var user_tweets = []; 
```

在`find_tweets`函数内部会有所帮助。

* * *

您无法在回调之外访问 ajax 数据。相反，您需要等到所有异步请求都得到解决。我建议使用[jQuery 的 Deferred 对象](http://api.jquery.com/category/deferred-object/)，这使得处理这些事情变得更加容易：

```
function news_tweets(query, user_id, count) {
    var news_array = [],
        user_tweets = [];
    return $.getJSON("https://api.twitter.com/1/statuses/user_timeline.json", {
        include_entities: "true",
        include_rts: "false",
        user_i: user_id,
        count: count
    }).then(function (data) {
        return $.when.apply(null, $.map(data, function (item) {
            news_array.push({
                news_user: item.user.name,
                news_date: item.created_at,
                news_profile_img: item.user.profile_image_url,
                news_text: item.text,
                news_url: item.entities.urls.length ? item.entities.urls[0].url : ''
            });
            return $.getJSON("http://search.twitter.com/search.json", {
                q: item.text,
                rpp: 10,
                include_entities: "true",
                result_type: "mixed"
            }).done(function (data) {
                $.each(data.results, function (i, item) {
                    user_tweets.push({
                        user: item.from_user,
                        user_id: item.from_user_id,
                        date: item.created_at,
                        user_profile_img: item.entities.urls.length ? item.entities.urls[0].url : '',
                        text: item.text
                    });
                });
            });
        }));
    }).then(function() {
        // this callback is executed [once] when all requests are done
        // and the user_tweets array is filled
        // arguments is an array of all search request results
        var full_array = news_array.concat(user_tweets);
        console.log(full_array);
        return full_array;
    })
} 
```

用法：

```
news_tweets(…).done(function callback(full_array) {
    // do something with all the objects
}); 
```

# jquery - HTML5 localStorage 作为更改 CSS 的条件工具

> ID：12446784
> 
> 赞同：1
> 
> 时间：2012-09-16T12:16:15.523
> 
> 标签：jquery, css, html, local-storage

**你好**

我已经尝试解决这个问题一段时间了，我认为我做的一切都是正确的，但无法让它发挥作用。欢迎任何和所有建议或想法。

我试图将外部css样式表上的显示属性从：none更改为：block，这取决于使用jQuery的localstorage键的值是否等于null。

CSS

```
 #cart-totals div.greysp1{
 display:none; 
 border-bottom: 1px solid #ccc;
 padding: 3px 0;margin: 0 0 0 20px;
 overflow: hidden;
 text-align:left;
 line-height:18px;
 color:#888;} 
```

Javascript/jQuery

```
if(localStorage.getItem('userScribble')==null){  

       $("#cart-totals div.greysp1").css("display","block");

       console.log("null");

    }else{
      console.log("Not null")

     } 
```

html

```
 <div id="cart-totals" >
             <div class="cart-totals-content">
                          <div class="greysp1">
                            <div class="fL">Merchandise Subtotal:</div>
                            <div class="fR" id="MerchSubTotal"></div>
                          </div>

            </div>
    </div> 
```

有任何想法吗？

我还没有找到任何其他的例子。如果你知道任何让我知道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:52:36.243

如果代码在您的测试中似乎不起作用，那么可能的原因是您在不支持`localStorage`本地文档的浏览器（例如 IE 9）上本地测试它。（听起来很矛盾，但这种行为是可以理解的，因为`localStorage`它是按域名定义的，而对于本地文档，没有域。）

因此，例如在 Chrome（或最新版本的 Firefox）上对其进行测试，或者将文件上传到 Web 服务器并从那里进行测试。

# r - 在 R 中计算数据集的多重方差

> ID：12446789
> 
> 赞同：2
> 
> 时间：2012-09-16T12:18:04.340
> 
> 标签：r, plyr

[我的问题与这个](https://stackoverflow.com/questions/7184065/r-calculate-variance-for-datav1-for-each-different-value-in-datav2)问题有些相关。

我有如下数据

```
V1   V2
..   1
..   2
..   1
..   3 
```

我需要累计计算`V1`每个值的数据方差`V2`（这意味着对于一个特定的值，`V2`比如说`n`，所有`V1`对应`V2`小于的行都`n`需要包括在内。

`ddply`在这种情况下会有所帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T13:24:09.200

我认为`ddply`不会有帮助，因为它是建立在采用数据框的*非重叠子集的概念之上的。*

```
d <- data.frame(V1=runif(1000),V2=sample(1:10,size=1000,replace=TRUE))
u <- sort(unique(d$V2))
ans <- sapply(u,function(x) {
    with(d,var(V1[V2<=x]))
})
names(ans) <- u 
```

我不知道是否有更有效的方法来做到这一点......

# javascript - 在 HTML 画布上使用奇偶填充

> ID：12446790
> 
> 赞同：7
> 
> 时间：2012-09-16T12:18:11.247
> 
> 标签：javascript, html, canvas

是否有任何开源库（JaveScript）在画布上实现奇偶填充规则。如果我尝试自己实现它，那么它会有多复杂（考虑也有复杂曲线的一般情况）并且它会影响性能（由于在 JaveScript 中为每个像素执行此操作的开销）。

将奇偶填充转换为非零绕组的方法是什么（考虑适用于每种情况的通用解决方案）。我发现的一种方法是将形状划分为所有不相交的多边形并分别填充它们。

一种选择是使用 SVG 并在画布上绘制 SVG，但我还发现原生 SVG 渲染在 iPad 上有点慢，但即使我在 HTML 画布上（在 iPad 上）绘制 SVG 也很慢？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T13:54:18.330

我前段时间在寻找同样的问题时遇到了这个问题。也就是说，在 HTML 画布中使用“偶数”填充规则。

经过一些研究，并浏览了邮件列表和补丁，我注意到，事实证明，Firefox 和 Chrome 的最新版本都支持这一点，但每个版本都以不同的、特定于浏览器的方式。

在 Firefox 中，这是使用[mozFillRule 属性](https://developer.mozilla.org/en-US/docs/DOM/CanvasRenderingContext2D#Gecko-specific_attributes)的问题。例子：

```
//
// Firefox Example
//
// canv has the HTML canvas element
var ctx = canv.getContext("2d");
ctx.fillStyle = "#ff0000";
ctx.mozFillRule = 'evenodd';
ctx.beginPath();
ctx.moveTo(100, 10);
ctx.lineTo(40, 180);
ctx.lineTo(190, 60);
ctx.lineTo(10,60);
ctx.lineTo(160,180);
ctx.closePath();
ctx.fill(); 
```

在 Chrome 中，您可以通过将字符串*evenodd*作为参数传递给`fill`方法来实现。例子：

```
//
// Chrome Example
//
// canv has the HTML canvas element
var ctx = canv.getContext("2d");
ctx.fillStyle = "#ff0000";
ctx.beginPath();
ctx.moveTo(100, 10);
ctx.lineTo(40, 180);
ctx.lineTo(190, 60);
ctx.lineTo(10,60);
ctx.lineTo(160,180);
ctx.closePath();
ctx.fill('evenodd'); 
```

这是我研究的两个浏览器，所以我不知道其他浏览器的状态。希望在不远的将来，我们将能够通过`fillRule`现在是[HTML 标准](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#current-fill-rule)一部分的属性来使用此功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-29T21:08:38.833

请参阅[fill() 方法 API](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fill)：

```
 void ctx.fill();
   void ctx.fill(fillRule);
   void ctx.fill(path, fillRule); 
```

fillRule 可以是 "nonzero" 或 "evenodd"
--- **"nonzero"**：非零缠绕规则，这是默认规则。
--- **"evenodd"** : 奇偶缠绕规则。

浏览器兼容性：
--- IE 11+、Firefox 31+、Chrome 都可以。
--- 我没有在 IE 9/10 上测试。
---`ctx.mozFillRule = 'evenodd';`与旧版 Firefox 30/30- 一起使用。

[![画布填充规则偶数非零](../Images/297d9c97d46b26166d8dd90b070c3707.png)](https://i.stack.imgur.com/OtUUl.png)

# asp.net - 带有“友好网址”的 asp.net SiteMapPath 不显示

> ID：12446793
> 
> 赞同：0
> 
> 时间：2012-09-16T12:18:37.613
> 
> 标签：asp.net, webforms, sitemap

我继承了一个带有 SiteMapPath 控件的项目，该控件从 web.sitemap 填充

给定 url /Admin/ControlPanel/Sku/Edit/1234 面包屑消失，因为 .sitemap 中没有该 url 的特定条目。这是一个问题，因为用户无法轻松返回到管理、控制面板或 Sku 页面。

它似乎不喜欢通配符，例如：`<siteMapNode url="/Admin/ControlPanel/Sku/Edit/*"`

我怎样才能让站点地图仍然显示面包屑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:06:50.237

我不认为它可以做到。最后，当我不得不继续前进时，我使用了一种务实的解决方法。

给定一个不匹配的 url：

```
If SiteMap.CurrentNode Is Nothing Then
  '- write out a home baked breadcrumb by parsing the url
  '- eg: Admin > ControlPanel > Sku
  '- which at least allowed a used in /Admin/ControlPanel.Sku/Edit/1234 to get back to the previous pages.
End If 
```

# java - 在我的应用程序中使用相机。

> ID：12446796
> 
> 赞同：1
> 
> 时间：2012-09-16T12:18:54.523
> 
> 标签：java, android, camera

我试图启动相机并将其用于我的应用程序 - 结果不令人满意。我遵循了 android SDK（预览类）中提供的示例代码，但结果很糟糕 - 相机正在旋转，当我尝试添加按钮时，它从未出现过。

我检查了其他应用程序，看起来 Skype 应用程序使用与手机内置的相机应用程序相同的相机应用程序。我想知道如何在我自己的应用程序中实现这一点。有什么解决办法吗？

# javascript - 如何使用javascript自动计算金额

> ID：12446797
> 
> 赞同：0
> 
> 时间：2012-09-16T12:19:01.873
> 
> 标签：javascript

这是我的功能

```
function  doMath() { 
   var counter; var nvalue; var amount;
   var price=100;
   nValue = document.getElementById("message").value;
   amount=(nvalue*price);
   document.getElementById("total").value=amount ;
} 
```

我的html

```
<input type="" name="message" id="message" onkeyup="doMath()"maxlength="60">message
<input type="text" name="total" id="total" maxlength="60"> amount 
```

当用户在消息字段中输入值时，它应该自动计算金额并将其显示在金额字段中。

但是当我输入值时它显示 NAN

它没有计算任何人都可以帮助我如何解决这个.im new to javascript

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T12:39:45.073

您将变量声明为**nvalue**但使用**nValue**代替。

```
 function  doMath() { 
       var nValue; var amount;
       var price=100;
       nValue = document.getElementById("message").value;
       amount=(nValue*price);
       document.getElementById("total").value=amount ;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T12:35:07.900

你的错误在这里：

```
 amount = (nvalue * price); 
```

它应该是：

```
 amount = (nValue * price); 
```

# linux - 构建 Boot to Gecko 时出错

> ID：12446801
> 
> 赞同：0
> 
> 时间：2012-09-16T12:19:44.477
> 
> 标签：linux, gcc, build, firefox-os

我试图为模拟器构建 B2G，但出现错误。

环境：

*   Ubuntu 12.04.1 x64

*   海合会 4.6.3

> 安装：out/host/linux-x86/bin/traceview host SharedLib:libGLES_CM_translator (out/host/linux-x86/obj/lib/libGLES_CM_translator.so) /usr/bin/ld:找不到-lGL collect2:ld返回1退出状态 make: *** [out/host/linux-x86/obj/lib/libGLES_CM_translator.so] 错误 1
> 
> 真实 1m33.903s 用户 0m46.539s 系统 0m6.088s
> 
> > 构建失败！<

我如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:33:50.007

[Firefox OS 构建先决条件](https://developer.mozilla.org/en-US/docs/Mozilla/Firefox_OS/Firefox_OS_build_prerequisites)

> 在 64 位 Ubuntu 上构建时，您可能会发现需要为 32 位 > 版本的 libX11.so 和 libGL.so 添加符号链接：
> 
> > $ sudo ln -s /usr/lib/i386-linux-gnu/libX11.so.6 /usr/lib/i386-linux-gnu/libX11.so
> > 
> > $ sudo ln -s /usr/lib/i386-linux-gnu/mesa/libGL.so.1 /usr/lib/i386-linux-gnu/libGL.so

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:50:41.483

来自[Firefox OS wiki（Firefox OS build 先决条件）](https://developer.mozilla.org/en-US/docs/Mozilla/Boot_to_Gecko/Firefox_OS_build_prerequisites?redirectlocale=en-US&redirectslug=Mozilla/Boot_to_Gecko/B2G_build_prerequisites)，关于在 Ubuntu 12.04 x64 上构建：

```
$ sudo apt-get install autoconf2.13 bison bzip2 ccache curl flex gawk gcc g++ g++-multilib git ia32-libs lib32ncurses5-dev lib32z1-dev libgl1-mesa-dev libx11-dev make 
```

接着，

```
$ sudo ln -s /usr/lib/i386-linux-gnu/libX11.so.6 /usr/lib/i386-linux-gnu/libX11.so
$ sudo ln -s /usr/lib/i386-linux-gnu/mesa/libGL.so /usr/lib/i386-linux-gnu/libGL.so 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T04:53:28.550

我在编译 Android 时遇到了完全相同的错误。以下修复了它：

```
sudo apt-get install libgl1-mesa-dev:i386 
```

我不必创建任何符号链接或任何东西，只需这个简单的安装

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T20:11:42.807

[在这里](https://groups.google.com/d/msg/android-building/3Io1A2ds0DQ/YDqt8na6XDIJ)，您应该找到解决问题的方法。

```
#> sudo apt-get install git-core gnupg flex bison gperf build-essential zip curl libc6-dev libncurses5-dev:i386 x11proto-core-dev libx11-dev:i386 libreadline6-dev:i386 libgl1-mesa-glx:i386 libgl1-mesa-dev g++-multilib mingw32 openjdk-6-jdk tofrodos python-markdown libxml2-utils xsltproc zlib1g-dev:i386 
```

接着：

```
#> sudo ln -s /usr/lib/i386-linux-gnu/mesa/libGL.so.1 /usr/lib/i386-linux-gnu/libGL.so 
```

# java - JDO(DataNucleus) 集合成员不被删除

> ID：12446802
> 
> 赞同：2
> 
> 时间：2012-09-16T12:19:59.063
> 
> 标签：java, google-app-engine, jdo, datanucleus

我正在使用带有 JDO（DataNucleus）的 GAE 1.7.0。当我持久化具有集合属性的类时，已移除的集合成员不会从数据存储中移除。我从分离的副本中删除集合成员。新成员被正确添加，现有成员没有被删除，导致我的收藏只会增长。

```
@PersistenceCapable(identityType = IdentityType.APPLICATION, detachable="true")
public class Parent{
    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Long id;

    @Persistent(defaultFetchGroup="true", dependentElement="true")
    private List<Child> children = new ArrayList<Child>(0);

}

@PersistenceCapable(identityType = IdentityType.APPLICATION, detachable="true")
public class Child implements Serializable {

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    @Extension(vendorName="datanucleus", key="gae.encoded-pk", value="true")
    private String id;

    @Persistent
    @Extension(vendorName="datanucleus", key="gae.parent-pk", value="true")
    private String parentId;
    ....
}

...
parent = pm.detachCopy(resultFromQuery);
// parent looks correct in dubugger: all children are fetched (and detached)
....
parent.getChildren().clear();
parent.getChildren().addAll(newChildren);
for (Child child: parent.getChildren())
    child.setParentId(KeyFactory.createKeyString("Parent", parent.getId()));
// parent looks good in the debugger: old children were removed and new ones added
...
PersistenceManager pm = PMF.get().getPersistenceManager();
try {
    pm.currentTransaction().begin();
    pm.makePersistent(parent);
    pm.currentTransaction().commit();
} catch (Exception e) {
} finally {
    if (pm.currentTransaction().isActive())
        pm.currentTransaction().rollback();
    if (!pm.isClosed())
        pm.close();
}
// problem in datastore: new children were created, old ones not removed 
```

我注意到，如果我在事务中执行 query-remove-persist（不分离对象），那么问题就解决了。这是一个不错的临时解决方法，但我仍然想对分离的对象进行更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:08:03.310

我不是 JDO 方面的专家，但这里......

每个实体`Parent`及其相关`Child`实体都在同一个实体组中。因此，您需要在事务中进行数据存储更新，因为给定实体组的更新频率可能不会超过每秒一次。此外，在事务中，增强魔法将起作用：隐藏、添加的 Java 字节码，它将处理诸如添加和删除子项以及设置字段值之类的事情。

如果您不想这样做，那么一种方法是不在 ; 中存储`Child`实体列表`Parent`。而是存储`Child`ID 和/或主键列表。这将导致每个`Child`人都在自己的实体组中。但即便如此，您也`Parent`只能每秒更新一次（列表）。

# php - 警告：socket_connect() [function.socket-connect]：无法连接 [110]：连接超时

> ID：12446805
> 
> 赞同：3
> 
> 时间：2012-09-16T12:20:20.827
> 
> 标签：php, sockets

我有一个使用套接字的 php 脚本，当我在 localhost (XAMPP) 上测试它时，我的代码运行良好。但是在我将相同的代码上传到我的虚拟主机后，它无法正常工作。详细地说，它加载了几分钟，最后给出了这些错误消息。

```
Warning: socket_connect() [function.socket-connect]: unable to connect [110]: Connection timed out in /home/....

Warning: socket_send() [function.socket-send]: unable to write to socket [32]: Broken pipe in /home/....

Warning: socket_read() [function.socket-read]: unable to read from socket [107]: Transport endpoint is not connected in /home/.... 
```

我认为这可能是因为服务器阻止了套接字连接。我的问题是：

1.  我可以执行一些代码来检查服务器是否阻止它吗？（例如 phpinfo() ）
2.  我应该关注哪些服务器配置才能尝试使其连接？（我可以访问 .htaccess 文件但不能访问 php.ini）
3.  套接字连接是否需要 SSL？
4.  如果我最终因为服务器设置无法解决这个问题，我需要另一个虚拟主机。我应该注意“计划列表”上的哪些功能/关键字？

我知道有很多问题，但我希望有人可以帮助我。如果有人能给我一些建议，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:39:25.303

这很奇怪……据我所知，实际上没有特定的 INI 指令来启用/禁用套接字连接。有一个设置超时的指令（default_socket_timeout），但我怀疑它可以改变任何东西。

SSL 与套接字无关。除非您使用可能依赖 SSL 的协议（例如 HTTP）。

服务器 TCP 配置更有可能阻止访问远程主机上的某些 TCP 端口。在安全性和资源使用更严格的共享托管计划中，通常会出现这种情况。

如果您可能找到连接到标准端口（例如 80）的方法，您会发现是否必须与您的托管服务提供商打交道或去其他地方:)

尝试在您的主机上执行以下代码。查找此问题是否与网络配置有关可能会有所帮助

```
//just in case
if (!extension_loaded('sockets')) {
    die('The sockets extension is not loaded.');
}

echo '<p><strong>Establishing connection...</strong></p>';
$socket = socket_create(AF_INET,SOCK_STREAM,0);
if (!socket_connect($socket, "stackoverflow.com", 80))
{
    die('Socket error : '.socket_strerror(socket_last_error()));
}

echo '<p><strong>Connection successful!</strong></p>';

$request = join("\n",array(
    "GET / HTTP/1.1",
    "Connection: close",
    "Host: stackoverflow.com",
    "User-Agent: Mozilla/5.0 (Windows NT 6.1)",
    "Accept: text/html,*/*;q=0.8",
    ""));
socket_write($socket,$request,strlen($request));

$response = socket_read($socket,2048);

echo "<p><strong>This is the received data : </strong></p>";
echo '<pre>'.htmlentities($response).'</pre>';

socket_close($socket); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T03:39:43.100

```
$options = array( 'http' => array(

    'user_agent'    => 'toixen',        // who am i
    'max_redirects' => 10,              // stop after 10 redirects
    'timeout'       => 2,               // timeout on response
    ) );

$context = stream_context_create( $options );

$url = "http://toixen_1:123@btcguild.com:8332";  
$dh = fopen( "$url",'r',false,$context);

fwrite($dh, "post");

$result = fread($dh,8192);                                                                                                                             
echo $result 
```

# algorithm - 大 O 复杂度 O(n log n) vs O(n log m)

> ID：12446813
> 
> 赞同：0
> 
> 时间：2012-09-16T12:21:26.970
> 
> 标签：algorithm, complexity-theory

我有一个算法，它采用一个有`n`节点的 DAG 图，对于每个节点，它在其邻接节点上进行二进制搜索。据我所知，这将是一种`O(n log n)`算法，但是由于`n`日志内部仅对应于节点的邻接关系，因此我想知道这是否会变得相当`O(n log m)`。`m`我的意思是`m`与每个节点相邻的节点（直观且通常远小于`n`）。

为什么不`O(n log m)`呢？我会说`O(n log m)`没有意义，因为`m`在技术上不是输入的大小，`n`是。此外，最坏的情况`m`可能是`n`因为一个节点可以很容易地连接到所有其他节点。正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T12:30:27.833

这里有两种情况：

1.  `m`，相邻节点的数量由一个常数限制`C`，并且
2.  `m`, 相邻节点的数量仅受`n`, 节点数量的限制

在第一种情况下，复杂度是`O(n)`，因为`Log(C)`是一个常数。在第二种情况下，这是`O(n*log(n))`因为您在问题中解释的原因（即“`m`可以是” `n`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:29:50.400

大 O 表示法提供了算法复杂度的上限，因此由于 m 在最坏的情况下等于 n（准确地说是 n - 1），因此正确的复杂度将是**O(n log n)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T12:31:08.683

肯定有一个节点连接到每个其他节点的 DAG。另一个示例是节点编号为 0,1,2...n 的 DAG，其中每个节点都有一条通往所有更高编号节点的边。

给出取决于多个参数的复杂性估计是有先例的 - [http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)引用了 O(|E| + |V| log(|V|) 的成本. 在某些情况下，这可能是有用的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T12:43:15.373

正确的是，在图的最坏情况下，每个节点都有 n-1 个邻居，这意味着它连接到其他所有人，但如果每个节点都是这样，那么它就不是无环图。因此每个节点的平均邻居小于n。

**DAG 中的最大边数为：(n-1)n/2**

如果我们查看每个节点，它将具有 (n-1)/2 个邻居的平均值。因此，在最坏的情况下，您的复杂性仍将保持**O(n log n) 。**

# php - 数字根本不加 1

> ID：12446816
> 
> 赞同：0
> 
> 时间：2012-09-16T12:22:11.983
> 
> 标签：php

运行提交代码后，它应该执行以下代码：

```
session_start();

if(isset($_POST['sessionNum'])) {
            //Declare my counter for the first time

            $_SESSION['initial_count'] = $_POST['sessionNum'];
            $_SESSION['sessionNum'] = intval($_POST['sessionNum']);
            $_SESSION['sessionCount'] = 1;
 }
 else if (isset($_POST['submitDetails']) && 
       $_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
    $_SESSION['sessionCount']++;
 }

$sessionMinus =  $_SESSION['sessionCount']; 
```

当我回显下面的代码时：

```
<?php echo $sessionMinus ?> OF <?php echo $_SESSION['initial_count'] ?> 
```

每次点击提交按钮时，如果 for 的数量`$sessionMinus`小于 number `$_SESSION['initial_count']`，则`$sessionMinus`每次页面提交时它的数量应该加 1。

但它根本没有将数字加 1。`$sessionMinus`每次提交页面时都会一直输出“1”。我需要在我的代码中更改什么？

我执行了一个`var_dump($_SESSION);`，这就是它输出的内容：

```
array(3) { 
   ["sessionCount"]=> int(1) 
   ["initial_count"]=> string(1) "5" 
   ["sessionNum"]=> int(5) 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:55:40.703

阅读您的评论后，我认为这就是您所追求的：

```
if(!isset($_SESSION['sessionCount']) || !$_SESSION['sessionCount'] ) {
    //Declare my counter for the first time

    $_SESSION['initial_count'] = $_POST['sessionNum'];
    $_SESSION['sessionNum'] = intval($_POST['sessionNum']);
    $_SESSION['sessionCount'] = 1;
 }
 else if (isset($_POST['submitDetails']) && 
       $_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
    $_SESSION['sessionCount']++;
 }

$sessionMinus =  $_SESSION['sessionCount']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:25:44.743

调试它如下：

```
session_start();

var_dump( $_POST, $_SESSION ); //See that the post and session parameters you think should be there, really are there.
if(isset($_POST['sessionNum'])) {
            //Declare my counter for the first time

            $_SESSION['initial_count'] = $_POST['sessionNum'];
            $_SESSION['sessionNum'] = intval($_POST['sessionNum']);
            $_SESSION['sessionCount'] = 1;
 }
 else if (isset($_POST['submitDetails']) && 
       $_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
    var_dump( $_SESSION['sessionCount'] ); //check the current count (and that you really are here.
    $_SESSION['sessionCount']++;
    var_dump( $_SESSION['sessionCount'] ); // Check that the count is updated correctly.
 }

$sessionMinus =  $_SESSION['sessionCount']; 
```

# php - 让阿贾克斯保持活力

> ID：12446818
> 
> 赞同：3
> 
> 时间：2012-09-16T12:22:20.090
> 
> 标签：php, jquery, ajax

我正在尝试让我的 ajax 从服务器请求信息，并使其保持活动状态至少 1 分钟，然后休息并重新启动，并获取并传递一个新的 streamitem_id，如果它们是自上次调用以来插入的。

目前它运行得如此之快，只有一次，我不明白为什么。

AJAX

```
<script type="text/javascript" charset="utf-8">

function wait() {
    var streamitem_id =<? echo $streamitem_catch['streamitem_id']; ?>;
    $.ajax({
        type: "POST",
        url: "testingajaxfeed.php?streamitem_id=" + streamitem_id,
        async: true,
        cache: false,, 
        dataType: "json",
        data: {streamitem_id: streamitem_id}, 
        success: function (response) {
        setTimeout("wait()",1000);
            $("#homestatusid").prepend("MY INSERTED RESPONSE");
        },
    });
}
$(document).ready(function(){
wait();
}); 
</script> 
```

PHP

```
if (isset($_POST['streamitem_id'])) {
$lastID = (int)$_POST['streamitem_id'];

if(empty($lastID)) {
 die('timeout');
}
else {
$following_string = $_SESSION['id'];
$result="SELECT d.*, c.*, u.*
  FROM streamdata          AS d
  JOIN streamdata_comments AS c ON d.streamitem_id = c.comment_streamitem
  JOIN users               AS u ON u.id = c.comment_poster
 WHERE d.streamitem_id > '$lastID'
   AND c.comment_poster = '$following_string'
   AND (d.streamitem_creator  = '$following_string')
   OR d.streamitem_creator IN $friendlist
   AND d.streamitem_type_id NOT IN ('3')
   ORDER BY '$lastID' DESC LIMIT 1";
$result = mysqli_query($mysqli, $result) or die(mysqli_error($mysqli));

while ($resultArr = mysqli_fetch_array($result)) {
$json = array();
    $json['streamitem_id'] = $resultArr['streamitem_id'];
    $json['streamitem_content'] = $resultArr['streamitem_content'];
    $json['streamitem_timestamp'] = Agotime($resultArr['streamitem_timestamp']);
    $json['comment_id'] = $resultArr['comment_id'];
    $json['comment_content'] = $resultArr['comment_content'];
    $json['comment_poster'] = $resultArr['comment_poster'];
    $json['comment_datetime'] = Agotime($resultArr['comment_datetime']);
    $json['comment_streamitem'] = $resultArr['comment_streamitem'];
    $json['username'] = $resultArr['username'];
    $json['id'] = $resultArr['id'];
    $json['first'] = $resultArr['first'];
    $json['middle'] = $resultArr['middle'];
    $json['last'] = $resultArr['last'];
echo json_encode($json);
}}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:29:14.573

setTimeout 不像你期望的那样工作。ajax 请求不能像你想要的那样“保持活力”。发送请求，PHP 脚本返回内容，ajax 脚本获取结果。所有这一切都发生在约 1-2 秒内。

如果这用于某种类型的流（看起来像），您将不得不让函数在很小的间隔内一次又一次地重复。

我已经像这样更改了您的代码：

```
<script type="text/javascript" charset="utf-8">

function wait() {
    var streamitem_id =<? echo $streamitem_catch['streamitem_id']; ?>;
    $.ajax({
        type: "POST",
        url: "testingajaxfeed.php?streamitem_id=" + streamitem_id,
        async: true,
        cache: false,
        dataType: "json",
        data: {streamitem_id: streamitem_id}, 
        success: function (response) {
            $("#homestatusid").prepend("MY INSERTED RESPONSE");
        },
    });
}
$(document).ready(function(){
setInterval(wait,10000);
}); 
</script> 
```

ajax 脚本将每 10 秒触发一次。您可以自己编辑速度，但请记住，短时间内过多的请求会使您的服务器崩溃/变慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:30:03.943

在您的 PHP 脚本中，您需要使用该`sleep`函数以保持连接有效。

就像是：

```
function callScript(callback) {
    $.post('myscript.php',{data:data},function(data) {
        if (data == -1) {
            return callScript(callback);
        }
        return callback(data);
    }
} 
```

**我的脚本.php**

```
$interval = 50;
$iters = floor(1000 / $interval);
while($conditional === false) {
    if (--$iters < 1) { die(-1); } 
    sleep($interval);
}
echo $json; 
```

虽然这不是您所需要的，但它可以很容易地适应您的需要。我已经用其他东西完成了这项工作，虽然成本很高，但您可以使用 sql 语句等待添加条目等。

# math - 平方根内分数的极限是多少

> ID：12446824
> 
> 赞同：-3
> 
> 时间：2012-09-16T12:22:59.347
> 
> 标签：math, limits, fractions, sqrt

当 x->infinity 时，我需要找到极限 sqrt((3x-1)/(x+2))

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T12:31:21.367

答案是`sqrt(3)`：

随着 x 变得非常非常大，度数 0 项 (`-1x^0`和`2x^0`) 变得微不足道，因此留下：

```
sqrt(3x/x) 
```

如您所见，这减少为：

```
sqrt(3) 
```

这不再受答案的影响，`x`并且是答案。

**笔记**

数学问题最适合[Stack Exchange 的数学页面](https://math.stackexchange.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T12:36:40.757

mjgpy3 的正确和优雅的解释值得称赞。

但我会为您提供 Wolfram Alpha 作为您自己回答这些问题的一种方式，而无需在这里询问：

[http://www.wolframalpha.com/input/?i=limit%20%20sqrt((3x-1)%2F(x%2B2))%20%20as%20x-%3Einfinity](http://www.wolframalpha.com/input/?i=limit%20%20sqrt((3x-1)%2F(x%2B2))%20%20as%20x-%3Einfinity)

# asp.net - 当我们单击按钮时，如何在 ASP.NET 4.0 中的 Gridview 上显示数据？

> ID：12446827
> 
> 赞同：1
> 
> 时间：2012-09-16T12:23:12.617
> 
> 标签：asp.net, .net, vb.net

```
Imports System.Data.Odbc
Imports System.Data
Partial Class VIEW_SALARY_DETAILS
     Inherits System.Web.UI.Page

   Protected Sub Button2_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button2.Click
    Dim cons, query As String
    Dim con As OdbcConnection
    Dim adpt As OdbcDataAdapter
    cons = "dsn=Courier; UID=Courier; PWD=123;"
    con = New OdbcConnection(cons)
    con.Open()
    query = "select * from EMPLOYEE"
    Dim ds As DataSet
    adpt = New OdbcDataAdapter(query, con)
    ds = New DataSet
    adpt.Fill(ds, "Courier")
    GridView1.DataSource = ds.Tables()
    con.Close()
   End Sub
End Class 
```

我写了上面的代码，但它不显示数据。同样的事情在 VB.NET 应用程序中也是可能的。我们如何为 ASP.net 4.0 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:35:07.893

之后你错过了一条线

```
GridView1.DataSource = ds.Tables[0]   //do some correction here..

GridView1.DataBind();        // add this line 
```

您需要将 GridView 与数据源绑定..

您的代码将是

```
Imports System.Data.Odbc
Imports System.Data
Partial Class VIEW_SALARY_DETAILS
     Inherits System.Web.UI.Page

   Protected Sub Button2_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button2.Click
    Dim cons, query As String
    Dim con As OdbcConnection
    Dim adpt As OdbcDataAdapter
    cons = "dsn=Courier; UID=Courier; PWD=123;"
    con = New OdbcConnection(cons)
    con.Open()
    query = "select * from EMPLOYEE"
    Dim ds As DataSet
    adpt = New OdbcDataAdapter(query, con)
    ds = New DataSet
    adpt.Fill(ds, "Courier")
    GridView1.DataSource = ds.Tables[0]
    GridView1.DataBind()
    con.Close()
   End Sub
End Class 
```

确保您使用的连接或 sql 字符串应该是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:30:46.700

您需要调用该`DataBind()`方法。尝试这个

```
DataSet ds= new DataSet();    
GridView1.DataSource = ds.Tables();
GridView1.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-18T21:35:58.513

我建议这样做：

假设这个标记：

[![在此处输入图像描述](../Images/b61800861df06da9198e099f75336c02.png)](https://i.stack.imgur.com/xnS0z.png)

所以我们拖入了一个按钮和一个gridview。

现在，双击按钮，我们得到/拥有这个代码存根：

```
Imports System.Data.SqlClient

Public Class HotelGrid
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

End Sub

Sub LoadGrid()

    Using cmdSQL As New SqlCommand("SELECT ID, FirstName, LastName, HotelName, City from tblHotels",
                    New SqlConnection(My.Settings.TEST3))

        cmdSQL.Connection.Open()
        GridView1.DataSource = cmdSQL.ExecuteReader
        GridView1.DataBind()

    End Using

End Sub

Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

    LoadGrid()

End Sub

End Class 
```

请注意这里的一些重要事项。

首先，我非常推荐一般的 sql 数据拉取，使用 sql 命令对象。

为什么？

好吧，命令对象有：

```
A place to hold/have/set the sql (sql command text)
A connection object - no need to create a separate one
A data reader - no need to create a separate one 
```

换句话说，sql 命令对象具有所有三个基本位和部分来提取数据。

我们经常想说某种记录集（数据表），所以我们可以这样做：

```
 dim MyTable as new DataTable
    Using cmdSQL As New SqlCommand("SELECT ID, FirstName, LastName, HotelName, City from tblHotels",
                    New SqlConnection(My.Settings.TEST3))

        cmdSQL.Connection.Open()
        MyTable.load(cmdSQL.ExecuteReader)

        GridView1.DataSource = MyTable
        GridView1.DataBind()

    End Using 
```

所以请注意在上面我们是如何创建一个数据表对象的。然后可以将该数据表与 for/each 进行交互。您甚至可以编辑该表中的数据，或者如上所示，用数据加载数据表 - 然后将其分配给网格视图。

因此，结果输出是这样的：

[![在此处输入图像描述](../Images/f5b4ff666aa8adc351bb318cbbfb809a.png)](https://i.stack.imgur.com/mgW95.png)

仅供参考：在我的示例中，我使用了 sqlclient 提供程序。在您的情况下，您使用的是 ODBC 提供程序。所以上面的代码是完全相同的，但是现在使用 ODBC，我们得到这个：

因此，您使用 ODBC 代替 ado.net（sql 客户端）。所以你有一个

```
Imports System.Data.Odbc 
```

因此我们的负载网格代码可能/将是这样的：

```
Sub LoadGrid2()

    Using cmdSQL As New OdbcCommand("SELECT ID, FirstName, LastName, HotelName, City from tblHotels",
                    New OdbcConnection(My.Settings.TEST3ODBC))

        cmdSQL.Connection.Open()
        GridView1.DataSource = cmdSQL.ExecuteReader
        GridView1.DataBind()

    End Using

End Sub 
```

因此，请注意代码实际上是如何“相同”的，但只是使用不同的提供程序（在您的情况下为 ODBC）。

您仍然可以声明并使用“数据表”来保存查询结果。

# php - CakePHP ACL 和身份验证不起作用

> ID：12446829
> 
> 赞同：5
> 
> 时间：2012-09-16T12:23:27.593
> 
> 标签：php, cakephp, authentication, acl

我有几个关于 CakePHPs ACL 和 Auth 系统的问题。

1.  acos 表中别名的命名约定是什么？它是“控制器/帖子/添加”还是只是“添加”与“帖子”中的父 ID？
2.  我的登录不起作用。当我尝试登录时，我没有收到任何错误消息，但 Auth.User 和 Auth->user('id') 都是空的。可能是什么问题呢？我所做的一切都与 CakePHP 的 ACL 示例中的一样。

谢谢你。

**更新：** 我的登录现在有效（服务器上的时间设置有问题），我的 acos 表看起来正确，但我无法采取任何行动。我允许 aros_acos 表中的操作。如果我使用 '$this->Acl->check()' 检查权限，如果我给出动作的单一名称而不是完整路径（'controllers/Posts/add' 不起作用），它只会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:32:50.083

我通过以下方式解决了这些问题：

1.  确保服务器上的时间正确。否则会话将无法工作。
2.  更正acos表中的表数据。尤其要确保 'lft' 和 'rght' 值是正确的。此页面可能会有所帮助：[http ://www.sitepoint.com/hierarchical-data-database-2/](http://www.sitepoint.com/hierarchical-data-database-2/)
3.  您需要将要使用的每个操作添加到 acos 表中。如果您不这样做，则不允许您执行此操作。即使您允许孔控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:49:13.563

要轻松填写 ACO 数据表，您还可以使用我的插件：[http ://www.alaxos.net/blaxos/pages/view/plugin_acl_2.0](http://www.alaxos.net/blaxos/pages/view/plugin_acl_2.0)

然后无需费心如何创建记录，它会为您完成 ;-)

# multidimensional-array - Xtext 类型系统多维数组支持

> ID：12446831
> 
> 赞同：1
> 
> 时间：2012-09-16T12:23:56.210
> 
> 标签：multidimensional-array, xtext

我目前正在使用[Xtext](http://www.eclipse.org/Xtext/)为域特定语言编写解析器。为了检查表达式中数据类型使用的有效性，我还使用了[Xtext 类型系统框架](http://code.google.com/a/eclipselabs.org/p/xtext-typesystem/)。

我想在我的语法中包含多维数组，并且就 Xtext 而言我已经做到了，但是我在类型系统方面遇到了问题。

我在 Xtext 中关于数组的语法如下：

```
ArrayType:
{ArrayType}(basetype=BaseType  (dim+=Dimensions)+)
;

BaseType:
PrimaryType | StructuredType
;

Dimensions:
{Dimensions}'['size=Expr ']'
; 
```

上述语法的一个例子是 int[5] name; （井名实际上不包含在这部分语法中）。

现在，让我们看看我在类型系统中所做的事情，以便根据[本教程](http://www.infoq.com/articles/xtext_ts)（类型递归特性部分）声明 ArrayTypes。

```
public EObject type(ArrayType a_t, TypeCalculationTrace trace)
{
    ArrayType arraytype= (ArrayType) Utils.create(lang.getArrayType());
    EObject basetype = typeof(a_t.getBasetype(),trace);
    arraytype.setBasetype((BaseType) basetype);
    return arraytype;
}
declareTypeRecursionFeature(lang.getArrayType(), lang.getArrayType_Basetype()); 
```

所以如果我声明一个变量 int[5] k; 返回的类型是 ArrayType(int)。

我想做但不能做的是在类型中包含数组维度的数量。例如，

```
int[3][2] k; //this should be of type ArrayType(int)[][]
int[5] g;    //this should be of type ArrayType(int)[]
k[3][1]=3;    //must be right
k[3]=g;      //must be right
k=g;       //must be wrong 
```

对于这么长的信息，我真的很抱歉，但我不知道我还能如何更好地向你解释。我会感激任何想法！

先感谢您！
凯特

# apache-zookeeper - 带有 Zookeeper 的 MongoDB 数据库

> ID：12446833
> 
> 赞同：3
> 
> 时间：2012-09-16T12:24:11.260
> 
> 标签：apache-zookeeper

我是 Zookeeper 的新手，我仍然不确定 Zookeeper 如何使用数据库。在其文档中，它说“读取请求由每个服务器数据库的本地副本提供服务”。那么这是否意味着 Zookeeper 系统中的每台服务器也是一个数据库？或者有一个单独的数据库，zookeeper 中的每个服务器都复制数据库中的所有数据并存储在自己的数据库中（如果这是真的疯了？）？还是zookeeper服务器中的数据库是由每次客户端请求拥有的数据建立起来的？
非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:15:46.340

Zookeeper 集群中的每台服务器都保留了整个数据库的副本。随着写入的执行，它们被发送到集群中的每台服务器，并且写入的副本存储在每台服务器上。

Zookeeper 存储的数据集的大小不应该很大，因为 Zookeeper 将整个数据集存储在 jvm 堆上的内存中。Zookeeper 更多的是作为存储配置信息的地方，以及用于协调各个节点之间的地方，而不是存储大量信息。

# codeigniter - 在 CodeIgniter 中设置 cookie 不起作用

> ID：12446834
> 
> 赞同：7
> 
> 时间：2012-09-16T12:24:27.833
> 
> 标签：codeigniter

我想用这个函数**$this->security->get_csrf_hash();的值设置名称为****csrf_cookie_name的 cookie；**但是，它不起作用。

 **我的控制器中有这个：

```
 $csrf_cookie_value = $this->security->get_csrf_hash();
   $this->input->set_cookie('csrf_cookie_name', $csrf_cookie_value);
   echo $this->input->cookie('csrf_cookie_name'); 
   die(); 
```

但它不起作用，没有任何回应。

如果我只尝试这个：

```
 $csrf_cookie_value =  $this->security->get_csrf_hash();
 echo $csrf_cookie_value; 
```

我工作，并回显了一个生成的字符串。

因此，我假设接下来的两行中的某些内容是错误的：

```
$this->input->set_cookie('csrf_cookie_name', $csrf_cookie_value);
echo $this->input->cookie('csrf_cookie_name'); 
```

谢谢你的建议。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-21T09:26:59.993

您需要指定 cookie 的生命周期。`0`将是一个会话 cookie，其他任何内容都将添加到`time()`.

如果您没有指定生命周期，CI 将解释您要**删除**cookie。这正是它的作用:)

```
$this->input->set_cookie('name', 'value', 0);    //expires when the browser window closes
$this->input->set_cookie('name', 'value', 3600); //expires in one hour
$this->input->set_cookie('name', 'value');       //will delete the cookie (if the cookie does not exist, you will not notice anything happening) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-16T18:10:26.537

您没有得到 cookie 回显的原因是该`$this->input->cookie()`函数直接从全局`$_COOKIE`数组中读取，并且`$this->input->set_cookie()`不会`$_COOKIE`立即在服务器上填充该数组。相反，`$this->input->set_cookie()`将 cookie 排队以发送回并存储在浏览器中。只有在用户的下一个 HTTP 请求时，您才能重新观察此 cookie。

其次，也许更重要的是，我认为您不正确地使用了 csrf cookie。为了防止跨站点请求伪造，只需要您启用它并将其属性设置为`config/config.php`. 这就对了。根本不需要在控制器中读写它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-22T12:16:36.507

cookie 已经在那里了。您可以通过 Javascript 进行咨询：

```
$.cookie("<?php echo $this->config->item("csrf_cookie_name"); ?>"); 
```

我希望有用。**

# java - 使用 OpenGL (JOGL) 的良好 3D 爆炸和粒子效果？

> ID：12446835
> 
> 赞同：10
> 
> 时间：2012-09-16T12:24:43.163
> 
> 标签：java, opengl, 3d, alpha-transparency, particles

我一直想写它有一段时间了……作为大学的一个项目，我（和朋友）写了一个需要良好爆炸和粒子效果的游戏。我们遇到了一些问题，我们非常优雅地解决了（我认为），我想分享知识。

好的，所以我们找到了这个教程：[Make a Particle Explosion Effect](http://www.gamedev.net/page/resources/_/creative/visual-arts/make-a-particle-explosion-effect-r2701 "制作粒子爆炸效果")，它看起来很容易使用 Java 和 JOGL 来实现。在我回答我们如何实现本教程之前，我将解释渲染是如何完成的：

**Camera**：只是一个标准[正交基](http://en.wikipedia.org/wiki/Orthonormal_basis "标准正交基")，这基本上意味着它包含 3 个归一化正交向量和一个表示相机位置的第 4 个向量。渲染是使用`gluLookAt`：

```
glu.gluLookAt(cam.getPosition().getX(), cam.getPosition().getY(), cam.getPosition().getZ(), 
              cam.getZ_Vector().getX(), cam.getZ_Vector().getY(), cam.getZ_Vector().getZ(), 
              cam.getY_Vector().getX(), cam.getY_Vector().getY(), cam.getY_Vector().getZ()); 
```

这样相机的`z`向量实际上是目标，`y`向量是“向上”向量，而位置是，嗯……位置。

那么（如果用问题风格来表示），如何实现一个好的粒子效果呢？

PS：所有代码示例和游戏截图（包括答案​​和问题）均取自游戏，托管在此处：[Astroid Shooter](https://github.com/hochgi/astroid-shooter-3D "天体射手")

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-16T12:24:43.163

好吧，让我们看看我们如何首先处理粒子的实现：我们有一个`Sprite`代表单个粒子的抽象类：

```
protected void draw(GLAutoDrawable gLDrawable) {
    // each sprite has a different blending function.
    changeBlendingFunc(gLDrawable);

    // getting the quad as an array of length 4, containing vectors
    Vector[] bb = getQuadBillboard();
    GL gl = gLDrawable.getGL();

    // getting the texture
    getTexture().bind();

    // getting the colors
    float[] rgba = getRGBA();
    gl.glColor4f(rgba[0],rgba[1],rgba[2],rgba[3]);

    //draw the sprite on the computed quad
    gl.glBegin(GL.GL_QUADS);
    gl.glTexCoord2f(0.0f, 0.0f); gl.glVertex3d(bb[0].x, bb[0].y, bb[0].z);
    gl.glTexCoord2f(1.0f, 0.0f); gl.glVertex3d(bb[1].x, bb[1].y, bb[1].z);
    gl.glTexCoord2f(1.0f, 1.0f); gl.glVertex3d(bb[2].x, bb[2].y, bb[2].z);
    gl.glTexCoord2f(0.0f, 1.0f); gl.glVertex3d(bb[3].x, bb[3].y, bb[3].z);
    gl.glEnd();
} 
```

我们这里的大多数方法调用都很容易理解，这并不奇怪。渲染非常简单。在该`display`方法上，我们首先绘制所有不透明的对象，然后，我们将所有的`Sprite`s 并排序（*与相机的平方距离*），然后绘制粒子，以便首先绘制离相机较远的粒子。但我们必须在这里更深入地研究的是方法`getQuadBillboard`。我们可以理解，每个粒子都必须“坐在”一个垂直于相机位置的平面上，就像这里： ![垂直于相机精灵](../Images/49cc596de3631d2ebf7c481e1a086cbf.png) 计算这样一个垂直平面的方法并不难：

1.  substruct 粒子位置从相机位置得到一个垂直于平面的向量，并对其进行归一化，因此可以将其用作平面的法线。现在一个平面由我们现在拥有的法线和位置紧密定义（粒子位置是平面经过的点）

2.  `Y`通过标准化相机矢量在平面上的投影来计算四边形的“高度” 。您可以通过计算得到投影向量：`H = cam.Y - normal * (cam.Y dot normal)`

3.  通过计算创建四边形的“宽度”`W = H cross normal`

4.  返回 4 个点/向量：`{position+H+W,position+H-W,position-H-W,position-H+W}`

但并非所有精灵都这样，有些不是垂直的。例如，冲击波环精灵，或飞行的火花/烟雾轨迹： ![在此处输入图像描述](../Images/4c2ec705fb0386b9d39a958911669233.png) 所以每个精灵都必须给它自己独特的“广告牌”。顺便说一句，烟雾轨迹和飞行精灵火花的计算也是一个挑战。我们创建了另一个抽象类，我们称之为：`LineSprite`. 我将跳过这里的解释，您可以在这里查看代码：[`LineSprite`](https://github.com/hochgi/astroid-shooter-3D/blob/master/src/com/biu/cg/objects3d/particles/sprites/LineSprite.java "线精灵").

嗯，第一次尝试很好，但是出现了一个意想不到的问题。这是一个说明问题的屏幕截图： ![在此处输入图像描述](../Images/e3e861fdc97689fb1964f24c720cd141.png) 如您所见，精灵彼此相交，所以如果我们查看相交的 2 个精灵，第一个精灵的一部分在第二个精灵的后面，而另一部分在前面第二个精灵，这导致了一些奇怪的渲染，交叉点的线是可见的。请注意，即使我们禁用`glDepthMask`了 ，在渲染粒子时，结果仍然会显示相交线，因为每个精灵中发生了不同的混合。所以我们必须以某种方式使精灵不相交。我们的想法真的很酷。

你知道所有这些非常酷的[3D 街头艺术](https://www.google.co.il/search?hl=en&sugexp=les;&tok=0SqJ5QRufMvtoKKn3UB4og&cp=5&gs_id=k&xhr=t&q=3d%20street%20art&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&biw=1334&bih=643&um=1&ie=UTF-8&tbm=isch&source=og&sa=N&tab=wi&ei=Jb1VUKTmEtGO4gTMkIDQCQ "3D街头艺术")吗？这是一张强调这个想法的图片：

![在此处输入图像描述](../Images/c472456492b9585c7927c5c503e6eb08.png)

我们认为这个想法可以在我们的游戏中实现，所以精灵不会相互交叉。这是一张图片来说明这个想法：

![在此处输入图像描述](../Images/b178328769536490cb4b59e067f86b8f.png)

基本上，我们让所有的精灵都在平行平面上，所以不会发生交叉。并且它没有影响可见数据，因为它保持不变。从其他角度看，它会显得有些拉长，但从相机的角度来看，它仍然看起来很棒。所以对于实施：

当得到代表一个四边形广告牌的4个向量，以及粒子的位置时，我们需要输出一组新的4个向量，代表原始的四边形广告牌。如何做到这一点的想法在这里得到了很好的解释：[Intersection of a plane and a line](http://local.wasp.uwa.edu.au/~pbourke/geometry/planeline/ "平面与直线的交点")。我们有由相机位置和 4 个向量中的每一个定义的“线”。我们有平面，因为我们可以使用我们的相机`Z`矢量作为法线，以及粒子的位置。此外，用于对精灵进行排序的比较函数会有一个小的变化。它现在应该使用由我们的相机正交基定义的齐次矩阵，实际上，计算就像计算一样简单：`cam.getZ_Vector().getX()*pos.getX() + cam.getZ_Vector().getY()*pos.getY() + cam.getZ_Vector().getZ()*pos.getZ();`. 我们应该注意的另一件事是，如果一个粒子超出了相机的视角，即在相机后面，我们不想看到它，尤其是，我们不想计算它的投影（可以导致一些非常奇怪和迷幻的效果......）。剩下的就是展示最后一[`Sprite`堂课](https://github.com/hochgi/astroid-shooter-3D/blob/master/src/com/biu/cg/objects3d/particles/sprites/Sprite.java)

结果非常好：

![在此处输入图像描述](../Images/6b5c6d88d2d7666725bcde1eed28157c.png)

希望对您有所帮助，希望得到您对这篇“文章”（或游戏:} 的评论，您可以随意探索、分叉和使用...）

# ios - 将数据写入 .plist

> ID：12446842
> 
> 赞同：2
> 
> 时间：2012-09-16T12:25:32.410
> 
> 标签：ios, xcode, nsdictionary, plist, property-list

我知道这个问题可能看起来与许多以前提出的问题相似，但是在阅读了所有这些问题和答案后，我无法理解该怎么做。

我想写一些有`wordNames`and`wordDefinitions`和 some`ID`和 a的单词`date ID`。我有以下代码，但我有两个关于使用具有不同数据类型的数组的字典以及为字典定义键的方式的问题。

如果我制作的整个 .plist 文件有误，请纠正我。

提前致谢。

```
- (IBAction)addWord:(id)sender
{
NSString *destinationPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
destinationPath = [destinationPath stringByAppendingPathComponent:@"Box.plist"];

NSFileManager *fileManager = [NSFileManager defaultManager];

if (![fileManager fileExistsAtPath:destinationPath]) 
{
    NSString *sourcePath = [[NSBundle mainBundle] pathForResource:@"Box" ofType:@"plist"];
    [fileManager copyItemAtPath:sourcePath toPath:destinationPath error:nil];
}

// Load the Property List.  
NSMutableArray* wordsInTheBox = [[NSMutableArray alloc] initWithContentsOfFile:destinationPath];

NSString *wordName = word.name;
NSString *wordDefinition = word.definition;
NSInteger deckID;
NSDate addedDate;

//is this correct to have an array of different types?
NSArray *values = [[NSArray alloc] initWithObjects:wordName, wordDefinition, deckID, addedDate, nil]; 
//How and where am I supposed to define these keys?
NSArray *keys = [[NSArray alloc] initWithObjects: NAME_KEY, DEFINITION_KEY, DECK_ID_KEY, DATE_KEY, nil]; 
NSDictionary *dict = [[NSDictionary alloc] initWithObjects:values forKeys:keys];
[wordsInTheBox addObject:dict];
[wordsInTheBox writeToFile:destinationPath atomically:YES];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T13:46:03.977

[`initWithContentsOfFile:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/initWithContentsOfFile%3a)总是返回一个**不可变数组**。你应该这样做：

```
NSMutableArray *wordsInTheBox = [[NSMutableArray alloc] initWithArray:[NSArray arrayWithContentsOfFile:destinationPath]]; 
```

我不完全理解的是`word`变量的定义位置。是ivar吗？

如果您使用的是最新版本的 Xcode（4.4 或 4.5），我建议使用更简单的文字来创建字典。

```
NSDictionary *dict = @{NAME_KEY       : wordName, 
                       DEFINITION_KEY : wordDefinition, 
                       DECK_ID_KEY    : deckID, 
                       DATE_KEY       : addedDate}; 
```

但我也没有看到你的字典定义有问题。它应该工作。

您必须确保在某处定义了 NAME_KEY、DEFINITION_KEY 等。所有大写字母通常仅用于预处理器宏，因此您可以执行以下操作：

```
#define NAME_KEY @"Name"
#define DEFINITION_KEY @"Definition" 
```

您也可以直接在字典中使用字符串：

```
NSDictionary *dict = @{@"Name"       : wordName, 
                       @"Definition" : wordDefinition, 
                       @"DeckID"     : deckID, 
                       @"Date"       : addedDate}; 
```

但是使用宏也不是一个坏主意。

# java - 为什么 AsyncTask 在追加新数据后不自动更新 GraphView？

> ID：12446846
> 
> 赞同：3
> 
> 时间：2012-09-16T12:26:19.783
> 
> 标签：java, android, android-asynctask, android-graphview

我的 main`Thread`扩展自`Activity`，它启动了两个从不同 UDP 源收集数据的异步任务。其中一项任务应将数据附加[到此](http://www.android-graphview.org/)图形库。我正在从以下`onPostExecute`部分对UI 进行更新`AsynTask`：

```
@Override
protected void onPostExecute(Integer result) {
    super.onPostExecute(result);
    edt2.setText(Integer.toString(result));
    // Graph Update
    if (graphActive) {
        exampleSeries1.appendData(ATList.get(ATList.size()-1), true);
    } else {
        //do nothing
    }
} 
```

数据被传递到图表，如果我用手指在显示屏上单击它会正确显示，但我希望软件自动更新图表。`edt2`文本字段会自动更新。

我尝试了以下方法：

```
layout.postInvalidate(); //and invalidate 
```

我不知道如何让 Android 更新 GraphView。

这是 XML 的相应部分：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/graph1"
    android:layout_width="match_parent"
    android:layout_height="305dp" >

</LinearLayout> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T05:15:03.230

@Rishabh 的答案不正确。两者`onPostExecture`都`onProgressUpdate`在 UI 线程上调用。接受的解决方案比您所在的原始轨道更笨拙，即在`onPostExecute`. 在那里这样做绝对是一种优雅的方式。你不想在`runOnUiThread`这里打电话。

正如@weakwire 所说：*使图表无效是正确的方法，而不是使布局无效*。无论如何，接受的答案不是在后台执行任务然后用结果更新 UI 的 Android 方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:33:16.507

AsyncTask 不是 Ui 线程，使用 runOnUiThread(..) 代替 Asynctask。

1 rl-：父视图。2 myView -: 子视图

//使用这个方法 //

```
 runOnUiThread(new Runnable() {

        //@Override
        public void run() {
            // TODO Auto-generated method stub
            rl.addView(new myView(getApplicationContext()));
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-10T07:59:32.980

要使更改生效，您需要调用：

```
graphView.onDataChanged(false, false); 
```

正如@weakwire 和@vkinra 所建议的那样，这将使 和 无效`GraphView`，`GridLabelRenderer`但这是推荐的方法，正如您在`GridLabelRenderer#invalidate(boolean, boolean)`的javadoc 中看到的那样：

```
/**
 * Clears the internal cache and forces to redraw the grid and labels.
 *
 * Normally you should always call {@link GraphView#onDataChanged(boolean, boolean)}
 * which will call this method.
 *
 * @param keepLabelsSize true if you don't want to recalculate the size of the labels. 
 *                       It is recommended to use "true" because this will improve 
 *                       performance and prevent a flickering.
 * @param keepViewport true if you don't want that the viewport will be recalculated.
 *                     It is recommended to use "true" for performance.
 */
public void invalidate(boolean keepLabelsSize, boolean keepViewport) { /*...*/ } 
```

并且这些是相同的参数`GraphView#onDataChanged(boolean, boolean)`，因此您应该使用它们以确保最佳性能。此外，您可以查看此[答案](https://stackoverflow.com/a/53197770/4071001)以查看`GraphView#onDataChanged(boolean, boolean)`'s javadoc。

# java - Java 序列化、Kryo 和对象图

> ID：12446847
> 
> 赞同：6
> 
> 时间：2012-09-16T12:26:27.453
> 
> 标签：java, serialization, kryo

假设我在内存中有一个`arr`类型的对象数组`A`，每个对象都有一个指向同一个对象的引用字段`B`。

插图：

```
A_1  A_2  A_3 ... A_N
 |    |    |       |
 |    |    V       |
 \--->\--> B <-----/ 
```

请注意，每个 type 对象中的引用字段都`A`指向**同一个**type 对象`B`。

`arr`现在，我将包含类型对象`A`的数组序列化为`ObjectOutputStream`. 然后我反序列化以这种方式获得的字节。

我得到一个新数组`arr1`。

1）数组是否`arr1`有类型的对象，`A`使得它们都指向**同一个**类型的对象`B`？（我不是指序列化之前的同一个对象，而是新创建的唯一类型的对象`B`）

2) 换句话说，在 Java 中调用 serialize/deserialize 是否保留与序列化之前相同的对象图？（即新反序列化的对象图与旧对象图同构）

3）这在哪里记录？（即请提供引用）

4) 相同的问题 1-3，但适用于 Java 的[Kryo](http://code.google.com/p/kryo/)序列化框架。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T12:35:48.557

[http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)

> 对象的默认序列化机制写入对象的类、类签名以及所有非瞬态和非静态字段的值。对其他对象的引用（瞬态或静态字段除外）也会导致这些对象被写入。 **对单个对象的多个引用使用引用共享机制进行编码，以便对象的图形可以恢复到与原始对象相同的形状。**

至于我对规范的理解，如果要共享的对象实例通过相同的 ObjectOutputStream，您将获得共享对象引用。

因此，当您序列化包含该`arr`数组的类时，写入的每个对象都会获得一个 ID，并且对于通过流的每个引用，只写入该 ID。在这种情况下，反序列化的图与原始图保持同质。

很抱歉，我对 krio 库自己的序列化机制无能为力，我很乐意向同样使用它的人学习。

关于 kryo 的编辑：

我发现的一些文档：

*   默认情况下，图形中对象在第一次出现之后的每次出现都存储为整数序数。这允许对同一对象和循环图的多个引用进行序列化。这有少量开销，如果不需要，可以禁用以节省空间：`kryo.setReferences(false);`

*   [这个](https://github.com/svn2github/kryo/blob/master/src/com/esotericsoftware/kryo/ReferenceResolver.java)（github）是引用解析器的合约；给出了两种实现：基于 ArrayList 的小对象图，基于 Map 的大对象

*   [这](https://github.com/svn2github/kryo/blob/master/src/com/esotericsoftware/kryo/serializers/DefaultArraySerializers.java#L293)是默认对象数组（反）序列化器的实现

*   类需要注册（反）序列化；每个注册的类都可以加上一个序列化器（其中Java默认的序列化[机制](https://github.com/svn2github/kryo/blob/master/src/com/esotericsoftware/kryo/serializers/JavaSerializer.java)）

# android - 触发android电池充电广播事件

> ID：12446849
> 
> 赞同：2
> 
> 时间：2012-09-16T12:26:39.893
> 
> 标签：android, broadcast, battery

我的手机有一个奇怪的问题：从充电器上拔下后触摸屏不工作。我想尝试通过发送一个广播（或其他什么）来欺骗 Android，这将使系统认为它正在充电，以便我的触摸屏开始工作。

`ACTION_POWER_CONNECTED`我应该通过代码发送广播事件吗？或者是其他东西？

我有 root，所以我不介意涉及`su`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:40:56.543

你好像有硬件问题。虽然您不能从自己的进程发送系统广播，即使可以，我怀疑它会修复您的触摸屏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:56:39.623

正如 323go 所建议的，您可能遇到了硬件问题。因此，广播意图可能无济于事。无论如何，如果您有根电话，请在 adb shell 上给出以下命令

```
 am broadcast -a android.intent.action.YOURINTENT 
```

# android - 使用 Notification.Builder 更新通知上下文文本

> ID：12446852
> 
> 赞同：2
> 
> 时间：2012-09-16T12:28:10.870
> 
> 标签：android

我正在使用“setLatestEventInfo”来更新我的通知上下文文本。但是现在，这种方法已被弃用，文档说我应该使用 Notification.Builder 来执行此操作。我不知道如何使用它来更新我的通知上下文文本或进度。你能帮我吗？

我使用 Notification.Builder 创建了通知，但我不知道创建后如何更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T13:17:02.440

没有答案...所以我自己回答：我可以使用与创建原始通知相同的 Notification.Builder 对象来更新原始通知。似乎工作正常。

# javascript - Jquery 效果 .queue()

> ID：12446853
> 
> 赞同：0
> 
> 时间：2012-09-16T12:28:13.553
> 
> 标签：javascript, jquery, html, animation, effect

这是我正在处理的网站：[http ://www.sircat.net/joomla/sircat/mies/calendari.html](http://www.sircat.net/joomla/sircat/mies/calendari.html)

当我单击任何年份列（2012、2011、2010 等）时，它会显示每年的内容并隐藏其他年份。

问题是当我点击（例如 2011 年专栏）时，动画会同时完成所有效果，让用户感到困惑，我想我必须用动画步骤来做，但我一直没能找到jQuery 解决方案。

这是我的代码：

```
/* Scroll Function */
function scrollto(position){
    $('html, body').stop().animate({
        scrollLeft: position
    }, 1000);
}

/* Calendar Scroll */
$(".sub_section_title").click( function(e) {
    e.preventDefault();
    $(".contenido_calendario").hide();
    $(this).next(".contenido_calendario").toggle('slow');
    scrollto($(this).offset().left - 352)
}); 
```

我曾尝试通过使用 .queue() 来修复效果，但它不起作用，我不知道它的代码是否也写得很好：

```
$(".sub_section_title").click( function(e) {
    e.preventDefault();
    $(".contenido_calendario").hide();
    $(".contenido_calendario").queue(function() {
        scrollto($(this).offset().left - 352);
        $(this).dequeue();
    });
    $(".contenido_calendario").queue(function() {
        $(this).next(".contenido_calendario").toggle('slow')
    $(this).dequeue();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:14:00.480

只需使用回调函数：

```
/* Scroll Function */
function scrollto(position){
    $('html, body').stop().animate({
        scrollLeft: position
    }, 1000);
}

/* Calendar Scroll */
$(".sub_section_title").click( function(e) {
    e.preventDefault();
    var $this = $(this)
    $(".contenido_calendario").hide(function(){
      $this.next(".contenido_calendario").toggle('slow',function(){
        scrollto($(this).offset().left - 352)
      });
    }); 
}); 
```

# c# - 通过数组“旅行”

> ID：12446857
> 
> 赞同：0
> 
> 时间：2012-09-16T12:28:33.490
> 
> 标签：c#, arrays, foreach, enumeration

这就是我的数组的外观：

```
key : value

name : victor
age : 16
country : romania
city : bucharest
language : romania 
```

我怎样才能通过它的所有元素来获得类似的东西：

```
Console.WriteLine("{0} = {1}", /*keyName*/, /*keyValue*/); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T12:30:19.510

那不是一个数组。那是字典。

要对其进行迭代，请使用 for 循环或 foreach 循环。

例子：

```
 var dictValues = new Dictionary<string, string>();
        // fill dictValues
        foreach(var items in dictValues)
            Console.WriteLine("{0} = {1}", items.Key, items.Value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T12:42:40.877

它应该是

```
Dictionary<string, object> dics = new Dictionary<string, object>();

dics.Add("name","victor");
dics.Add("age",16);
dics.Add("country","romania");

foreach(var key in dics.Keys)
{
   Console.WriteLine("{0} = {1}", key, dics[key]);
} 
```

# netbeans - 如何在 netbeans 中添加 javadocs

> ID：12446860
> 
> 赞同：4
> 
> 时间：2012-09-16T12:28:52.197
> 
> 标签：netbeans, javadoc

我正在尝试将 Javadocs 添加到 Netbeans 7.2。但我不能，因为它`No documentation found`在 Javadoc intex 搜索选项卡上出错；单击`shift`+ `F1`。

我尝试了以下建议：

```
tools > java flatforms > javadoc(tab) > add ZIP/folder 
```

最后单击关闭 Java 平面管理器。我的文档名称是“jdk-7u6-apidocs.zip”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T12:32:40.753

转到`Tools --> Java Platforms`
此处，您可以看到添加的 Java 平台。选择一个并在右侧转到`Javadoc`选项卡并选择您的`zip file`

# android - 在Android中的活动之间切换时的背景音乐播放器

> ID：12446867
> 
> 赞同：1
> 
> 时间：2012-09-16T12:29:45.167
> 
> 标签：android, android-intent, android-mediaplayer

我正在制作一个带有音乐播放器的音乐流媒体应用程序。现在我希望用户应该能够在播放器中听音乐的同时在活动之间切换。我还想控制和显示有关在一项活动中播放的曲目的信息。

我已经尝试实现 MediaPlayer，但是当我导航到另一个活动时停止播放。欢迎任何代码示例或伪代码。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T12:43:55.197

最好的选择是**服务**..，请参阅本[教程](http://marakana.com/forums/android/examples/60.html)。您可以[在此处](http://developer.android.com/reference/android/app/Service.html)了解有关服务的更多信息

# c++ - boost:asio 从客户端接收数据

> ID：12446871
> 
> 赞同：0
> 
> 时间：2012-09-16T12:30:03.993
> 
> 标签：c++, tcp, boost-asio

这是我的问题：客户端通过 tcp-socket 连接到服务器，服务器接受此连接，然后客户端在随机时间段内向服务器发送一些数据，服务器应该如何知道何时从客户端读取数据。换句话说，是否有某种数据接收监听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:02:54.920

通常，服务器应始终等待每个连接上的数据——即，当处理来自客户端的请求时，服务器应立即在该连接上启动另一个 async_read 请求以等待下一个请求（并且一旦服务器收到完整的请求，该请求得到处理等等）。

# php - PHP：是否可以正确 SUBSTR 一个 UTF-8 字符串？

> ID：12446877
> 
> 赞同：21
> 
> 时间：2012-09-16T12:30:53.050
> 
> 标签：php, encoding, utf-8, substring

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-16T12:52:09.407

See below URL:

**Extracting a substring from a UTF-8 string in PHP**

[http://osc.co.cr/extracting-a-substring-from-a-utf-8-string-in-php/](http://osc.co.cr/extracting-a-substring-from-a-utf-8-string-in-php/)

**PHP substring with UTF-8**

[http://greekgeekz.blogspot.in/2010/11/php-substring-with-utf-8.html](http://greekgeekz.blogspot.in/2010/11/php-substring-with-utf-8.html)

**Or try it:**

**Example #1**

```
$str1 = utf8_encode("Feliz día");

$str2 = substr($str1, 0, 9);

echo utf8_decode($str2); 

// will output Feliz d� 
```

**Example #2**

```
$str3 = mb_substr($str1, 0, 9, 'UTF-8');

echo utf8_decode($str3); 

// will output Feliz dí 
```

As of PHP >= 5.3 you can also declare the encoding directive and use the substr function

**Example #3**

```
declare(encoding='UTF-8');

$str4 = "Feliz día";

$str5 = substr($str4, 0, 9);echo $str5;

// will output Feliz dí 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-16T12:48:06.147

As usual, the answer appears to have been here. (Honestly, I have searched for about an hour)

An answer at [(鉑) string functions and UTF8 in php](https://stackoverflow.com/questions/5760507/string-functions-and-utf8-in-php) reads:

> Make sure you set the proper internal encoding: mb_internal_encoding('utf-8');

With this **mb_internal_encoding('utf-8');** everything works fine. Sorry to bother you guys, thanks for help.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-06-09T14:02:40.413

Try [`mb_strcut()`](http://php.net/manual/en/function.mb-strcut.php).
Its behavior is same to `substr()`, except it doesn't leave the last character to be broken.
If at the position you are trying to cut out, have a multibyte character with 2 or more bytes, `mb_strcut()` will not cut the character into pieces, but will ignore this character.

For instance, if your are trying to cut out 50 bytes out of the string `Лампа в вытяжке на кухне меняется, начиная с вытаскивания белого штырька справа.`, `mb_strcut()` will not cut the character `н` in half, but will eliminate it from the result.

```
$str = "Лампа в вытяжке на кухне меняется, начиная с вытаскивания белого штырька справа.";

echo mb_strcut($str, 0, 50);
// Prints: Лампа в вытяжке на кухне ме

echo substr($str, 0, 50);
// Prints: Лампа в вытяжке на кухне ме�

echo mb_substr($str, 0, 50);
// Prints: Лампа в вытяжке на кухне меняется, начиная с вытас 
```

Hope it helps.

# ios - 获取后 NSManagedObjects 的动态属性为空

> ID：12446879
> 
> 赞同：0
> 
> 时间：2012-09-16T12:31:12.480
> 
> 标签：ios, core-data, null, nsmanagedobject, nsfetchrequest

我的 iOS 应用程序中的 Core Data 有问题。

**首先，我的 ManagedObject 的代码：**

```
@interface MyBook : NSManagedObject
  @property (retain, nonatomic) NSString *book_name;
@end

@implementation MyBook    
  @synthesize book_name;
@end 
```

**和代码示例：**

```
NSFetchRequest *fr = [NSFetchRequest fetchRequestWithEntityName:@"MyBook"];
fr.predicate = [NSPredicate predicateWithFormat:@"book_name == %@", @"Something"];

NSArray *result = [s.managedObjectContext executeFetchRequest:fr error:&error];

MyBook *book = nil;
if (result.count) {
    book = [result objectAtIndex:0];
    NSLog(@"Updating old book: %@", book);
} else {
    book = [NSEntityDescription insertNewObjectForEntityForName:@"Book"
               inManagedObjectContext:s.managedObjectContext];
    NSLog(@"Creating new book");
    shelf.book_name = // some unique book name is set here
}

NSLog(@"result: %@", book.book_name); 
```

代码基本上...

*   尝试按名称查找一本书并抓住它。
*   如果该书尚不存在，请创建一个并设置书名。
    *   否则，抓住现有的书。

我遇到的奇怪事情是，当这本书已经存在时，该属性`book_name`为空。如果创建了对象，`book_name`将具有我之前设置的字符串。

我猜对属性的访问不会导致获取的书籍实例出现故障。这可能是`[book valueForKey:@"book_name"]`有效的原因，之后该属性也已被填充。

What am I missing here? I'm expecting Core Data to notice that I'm accessing the property and internally grabbing the data for me transparently.

Thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T12:32:44.693

**Big WHOOPS!**

Just after posting this original question, I realized that I was using `@synthesize` instead of `@dynamic`.

However, I'll leave this question here, if anyone else experiences such an effect in the future. :)

# c++ - 从解扰符号中提取类

> ID：12446880
> 
> 赞同：-3
> 
> 时间：2012-09-16T12:31:18.333
> 
> 标签：正则表达式, c++, regex, boost

我正在尝试使用`boost::regex`. 这个示例程序

```
#include <vector>

namespace Ns1
{
namespace Ns2
{
    template<typename T, class Cont>
    class A
    {
    public:
        A() {}
        ~A() {}
        void foo(const Cont& c) {}
        void bar(const A<T,Cont>& x) {}

    private:
        Cont cont;
    };
}
}

int main()
{
    Ns1::Ns2::A<int,std::vector<int> > a;
    Ns1::Ns2::A<int,std::vector<int> > b;
    std::vector<int> v;

    a.foo(v);
    a.bar(b);
} 
```

将为 A 类生成以下符号

```
Ns1::Ns2::A<int, std::vector<int, std::allocator<int> > >::A()
Ns1::Ns2::A<int, std::vector<int, std::allocator<int> > >::bar(Ns1::Ns2::A<int, std::vector<int, std::allocator<int> > > const&)
Ns1::Ns2::A<int, std::vector<int, std::allocator<int> > >::foo(std::vector<int, std::allocator<int> > const&)
Ns1::Ns2::A<int, std::vector<int, std::allocator<int> > >::~A() 
```

我想`Ns1::Ns2::A<int, std::vector<int, std::allocator<int> > >`最好使用单个正则表达式模式提取类（实例）名称，但是在解析对中递归出现的类说明符时遇到问题`<>`。

有谁知道如何使用正则表达式模式（由 支持`boost::regex`）来做到这一点？

**我的解决方案**（基于[David Hammen](https://stackoverflow.com/users/774499/david-hammen)的回答，因此接受）：

我不使用（单个）正则表达式来提取类和命名空间符号。我创建了一个简单的函数，从符号字符串的尾部去除括号字符对（例如`<>`或）：`()`

```
std::string stripBracketPair(char openingBracket,char closingBracket,const std::string& symbol, std::string& strippedPart)
{
    std::string result = symbol;

    if(!result.empty() &&
       result[result.length() -1] == closingBracket)
    {
        size_t openPos = result.find_first_of(openingBracket);
        if(openPos != std::string::npos)
        {
            strippedPart = result.substr(openPos);
            result = result.substr(0,openPos);
        }
    }
    return result;
} 
```

这用于从符号中提取名称空间/类的另外两种方法中：

```
std::string extractNamespace(const std::string& symbol)
{
    std::string ns;
    std::string strippedPart;
    std::string cls = extractClass(symbol);
    if(!cls.empty())
    {
        cls = stripBracketPair('<','>',cls,strippedPart);
        std::vector<std::string> classPathParts;

        boost::split(classPathParts,cls,boost::is_any_of("::"),boost::token_compress_on);
        ns = buildNamespaceFromSymbolPath(classPathParts);
    }
    else
    {
        // Assume this symbol is a namespace global function/variable
        std::string globalSymbolName = stripBracketPair('(',')',symbol,strippedPart);
        globalSymbolName = stripBracketPair('<','>',globalSymbolName,strippedPart);
        std::vector<std::string> symbolPathParts;

        boost::split(symbolPathParts,globalSymbolName,boost::is_any_of("::"),boost::token_compress_on);
        ns = buildNamespaceFromSymbolPath(symbolPathParts);
        std::vector<std::string> wsSplitted;
        boost::split(wsSplitted,ns,boost::is_any_of(" \t"),boost::token_compress_on);
        if(wsSplitted.size() > 1)
        {
            ns = wsSplitted[wsSplitted.size() - 1];
        }
    }

    if(isClass(ns))
    {
        ns = "";
    }
    return ns;
} 
```

* * *

```
std::string extractClass(const std::string& symbol)
{
    std::string cls;
    std::string strippedPart;
    std::string fullSymbol = symbol;
    boost::trim(fullSymbol);
    fullSymbol = stripBracketPair('(',')',symbol,strippedPart);
    fullSymbol = stripBracketPair('<','>',fullSymbol,strippedPart);

    size_t pos = fullSymbol.find_last_of(':');
    if(pos != std::string::npos)
    {
        --pos;
        cls = fullSymbol.substr(0,pos);
        std::string untemplatedClassName = stripBracketPair('<','>',cls,strippedPart);
        if(untemplatedClassName.find('<') == std::string::npos &&
        untemplatedClassName.find(' ') != std::string::npos)
        {
            cls = "";
        }
    }

    if(!cls.empty() && !isClass(cls))
    {
        cls = "";
    }
    return cls;
} 
```

该`buildNamespaceFromSymbolPath()`方法只是连接有效的命名空间部分：

```
std::string buildNamespaceFromSymbolPath(const std::vector<std::string>& symbolPathParts)
{
    if(symbolPathParts.size() >= 2)
    {
        std::ostringstream oss;
        bool firstItem = true;
        for(unsigned int i = 0;i < symbolPathParts.size() - 1;++i)
        {
            if((symbolPathParts[i].find('<') != std::string::npos) ||
               (symbolPathParts[i].find('(') != std::string::npos))
            {
                break;
            }
            if(!firstItem)
            {
                oss << "::";
            }
            else
            {
                firstItem = false;
            }
            oss << symbolPathParts[i];
        }
        return oss.str();
    }
    return "";
} 
```

至少该`isClass()`方法使用正则表达式来扫描构造方法的所有符号（不幸的是，这似乎不适用于仅包含成员函数的类）：

```
std::set<std::string> allClasses;

bool isClass(const std::string& classSymbol)
{
    std::set<std::string>::iterator foundClass = allClasses.find(classSymbol);
    if(foundClass != allClasses.end())
    {
        return true;
    }

std::string strippedPart;
    std::string constructorName = stripBracketPair('<','>',classSymbol,strippedPart);
    std::vector<std::string> constructorPathParts;

    boost::split(constructorPathParts,constructorName,boost::is_any_of("::"),boost::token_compress_on);
    if(constructorPathParts.size() > 1)
    {
        constructorName = constructorPathParts.back();
    }
    boost::replace_all(constructorName,"(","[\\(]");
    boost::replace_all(constructorName,")","[\\)]");
    boost::replace_all(constructorName,"*","[\\*]");

    std::ostringstream constructorPattern;
    std::string symbolPattern = classSymbol;
    boost::replace_all(symbolPattern,"(","[\\(]");
    boost::replace_all(symbolPattern,")","[\\)]");
    boost::replace_all(symbolPattern,"*","[\\*]");
    constructorPattern << "^" << symbolPattern << "::" << constructorName << "[\\(].+$";
    boost::regex reConstructor(constructorPattern.str());

    for(std::vector<NmRecord>::iterator it = allRecords.begin();
        it != allRecords.end();
        ++it)
    {
        if(boost::regex_match(it->symbolName,reConstructor))
        {
            allClasses.insert(classSymbol);
            return true;
        }
    }
    return false;
} 
```

如前所述，如果类不提供任何构造函数，则最后一种方法无法安全地找到类名，并且在大符号表上非常慢。但至少这似乎涵盖了你可以从 nm 的符号信息中得到什么。

我为这个问题留下了[正则表达式](/questions/tagged/regex "显示标记为“正则表达式”的问题")标签，其他用户可能会发现正则表达式不是正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T13:17:18.910

perl 的扩展正则表达式很难做到这一点，它比 C++ 中的任何东西都强大得多。我建议采用不同的策略：

首先去掉数据等看起来不像函数的东西（寻找 D 指示符）。`virtual thunk to this`,`virtual table for that`等内容也会妨碍您；在进行主要解析之前摆脱它们。这种过滤是正则表达式可以提供帮助的地方。你应该留下的是函数。对于每个功能，

*   在最后的右括号之后摆脱这些东西。例如，`Foo::Bar(int,double) const`变成`Foo::Bar(int,double)`。

*   剥离函数参数。这里的问题是括号内可以有括号，例如，将函数指针作为参数的函数，而这些函数又可能将函数指针作为参数。不要使用正则表达式。使用括号匹配的事实。经过这一步，`Foo::Bar(int,double)`变成`Foo::Bar`while`a::b::Baz<lots<of<template>, stuff>>::Baz(int, void (*)(int, void (*)(int)))`变成`a::b::Baz<lots<of<template>, stuff>>::Baz`。

*   现在在前端工作。使用类似的方案来解析该模板内容。这样一来，那乱七八糟的`a::b::Baz<lots<of<template>, stuff>>::Baz`就变成了`a::b::Baz::Baz`。

*   在此阶段，您的函数将如下所示`a::b:: ... ::ClassName::function_name`。一些命名空间中的自由函数在这里有一个小问题。析构函数是一个类的死赠品；如果函数名以波浪号开头，那么毫无疑问你有一个类名。构造函数几乎是您手头有一个类的赠品——只要您没有`Foo`在其中定义函数的名称空间`Foo`。

*   最后，您可能想要重新插入您剪切的模板内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:52:26.817

我使用简单的 C++[函数](http://ideone.com/WlqSw)进行了提取。

完整代码见链接，背后的想法是：

1.  有由 . 分隔的基本级别标记`::`。
2.  如果有N个基础级token，首先`N-1`描述className，最后是function
3.  `(`我们通过或提升级别（+1）`<`
4.  关闭`)`或`>`我们下降一级（-1）
5.  基础级别当然意味着 -`level == 0`

我有强烈的感觉，这不能通过正则表达式来完成，因为我们有无限级别的括号。我的函数中有 255 个 - 可以切换到`std::stack<char>`无限级别。

功能：

```
std::vector<std::string> parseCppName(std::string line)
{
   std::vector<std::string> retVal;
   int level = 0;
   char closeChars[256];

   size_t startPart = 0;
   for (size_t i = 0; i < line.length(); ++i)
   {
      if (line[i] == ':' && level == 0)
      {
          if (i + 1 >= line.length() || line[i + 1] != ':')
             throw std::runtime_error("missing :");
          retVal.push_back(line.substr(startPart, i - startPart));
          startPart = ++i + 1;
      }
      else if (line[i] == '(') {
         closeChars[level++] = ')';
      } 
      else if (line[i] == '<') {
         closeChars[level++] = '>';
      } 
      else if (level > 0 && line[i] == closeChars[level - 1]) {
         --level;
      }
      else if (line[i] == '>' || line[i] == ')') {
         throw std::runtime_error("Extra )>");
      }
   }
   if (level > 0)
       throw std::runtime_error("Missing )>");
   retVal.push_back(line.substr(startPart));
   return retVal;
} 
```

# ruby-on-rails - Rails uglifier 是否应该对函数名进行 uglify (mangle) 处理？

> ID：12446887
> 
> 赞同：4
> 
> 时间：2012-09-16T12:32:33.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, asset-pipeline, uglifyjs

我的 .js 文件被压缩并且变量被修改，但函数名称在 Heroku 上没有被修改（运行最新的 Rails 3.2.8 和最新的 uglify 1.3.0 gem）。

根据[https://github.com/lautis/uglifier#usage，“mangle](https://github.com/lautis/uglifier#usage) ”选项默认为 true。下面是我的配置。

来自生产.rb：

```
config.assets.compress = true
config.assets.js_compressor  = :uglifier 
```

我也试过

```
config.assets.compress = true
config.assets.js_compressor  = Uglifier.new(:mangle => true, :toplevel => true, :copyright => true) 
```

但没有明显区别。

正如一位评论者所建议的那样，我确实尝试更改我的一个 .js 文件的内容，但没有产生任何影响。

Heroku 上压缩的预编译 .js 文件的输出示例：

```
show_slideout_notification=function(){jQuery(".slideout_notification").slideDown();var e=$(".slideout_notification .countdown 
```

似乎变量名被破坏了，但函数名没有。

任何想法为什么函数名称没有被破坏？或者这是不想要的行为，因为这样就很难从我的 Rails/js 代码中调用函数（即 javascript onclick 事件）。或者，如果函数名称被损坏，那些 onclick 调用也会被重命名为损坏的名称？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:28:57.883

您是否尝试过修改文件？据此，资产[文件](https://stackoverflow.com/questions/7371432/uglifier-not-working-in-rails)的生成是基于文件修改时间的。也许您的设置甚至没有被使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T03:19:15.237

不应该是这样吗？

```
config.assets.js_compressor = Uglifier.new(:mangle => { :toplevel => true }, :output => { :comments => :copyright }) 
```

# python - 从两个列表中删除最少的项目以使列表相同

> ID：12446889
> 
> 赞同：3
> 
> 时间：2012-09-16T12:32:37.723
> 
> 标签：python, algorithm

我有两个包含相同项目和不同订单的列表。例如：

```
a = [4, 2, 3, 1]
b = [2, 3, 1, 4] 
```

我应该删除哪些项目以使列表相同？这里：`[4]`是一个答案，所以：

```
a = [2, 3, 1]
b = [2, 3, 1] 
```

但是`[2, 4]`or`[2, 3, 1]`也是答案，如果我删除`[2, 3, 1]`：

```
a = [4]
b = [4] 
```

我需要删除最少数量的元素，这`[4]`是最佳解决方案。

另一个例子：

```
a = [1, 2, 3, 4]
b = [2, 1, 4, 3] 
```

可能的答案：

```
[1, 3]
[1, 4]
[2, 3]
[2, 4] 
```

算法的顺序并不重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T12:46:33.293

我当然会首先搜索最长的公共子序列（google LCS，许多算法可用，例如在[algorithmist](http://www.algorithmist.com/index.php/Longest_Common_Subsequence)上），然后如果您从原始列表之一中删除 LCS 元素，您将获得最短的元素列表来删除。在伪代码中：

```
lcs = LCS(a,b)
res = copy(a)
foreach element e in lcs
  remove(res,e)
return res 
```

# asp.net - 如何对缓存层进行单元测试

> ID：12446895
> 
> 赞同：4
> 
> 时间：2012-09-16T12:33:42.413
> 
> 标签：asp.net, unit-testing, caching

我在我的项目中添加了一个**缓存层**。现在我想知道我是否可以对操纵缓存的方法进行**单元测试？**还是有更好的方法来测试图层的逻辑？

我只想检查过程，例如：

1-当项目不在缓存中时，方法应该命中数据库

2-下次方法应该使用缓存

3-当对数据库进行更改时，应清除缓存

4-如果从数据库中检索的数据为 null ，则不应将其添加到缓存中

我想确保我放入方法中的逻辑按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T12:37:36.060

我假设缓存是第三方缓存？如果是这样，我**不会**测试它。否则，您正在测试其他人的代码。

如果此缓存非常重要，您需要对其进行测试，我会进行[集成](http://en.wikipedia.org/wiki/Integration_testing)或[验收](http://en.wikipedia.org/wiki/Acceptance_testing)测试。换句话说，点击有问题的页面/服务并以这种方式检查内容。根据您希望测试的定义，这不是**单元**[测试](http://en.wikipedia.org/wiki/Unit_testing)。

另一方面，如果缓存是您自己滚动的缓存，您将能够轻松地对功能进行单元测试。您可能想要检查基于验证的测试以测试缓存的行为，就像实际检查从缓存中添加/删除的内容一样。查看[mocking](http://en.wikipedia.org/wiki/Mock_object)以了解实现此目的的方法。

要通过 Mock 对象（或类似的东西）测试行为，我会执行以下操作 - 尽管您的代码会有所不同。

```
class Cacher
{
    public void Add(Thing thing) 
    {
         // Complex logic here...
    }

    public Thing Get(int id) 
    { 
        // More complex logic here...
    } 
}

void DoStuff() 
{
   var cacher = new Cacher();
   var thing = cacher.Get(50);
   thing.Blah();
} 
```

为了测试上述方法，我将进行一个使用 mock 的测试`Cacher`。您需要在运行时将其传递给方法或将依赖项注入构造函数。从这里开始，测试将简单地检查是否`cache.Get(50)`被调用。并不是说该项目实际上是从缓存中检索到的。这是测试应该如何使用缓存器的行为，而不是它实际上正在缓存/检索任何东西。

然后，您可以单独退回到基于状态的缓存器测试。例如，您添加/删除项目。

就像我之前说的那样，这可能有点矫枉过正，这取决于你想做什么。但是，您似乎非常有信心缓存足够重要以保证进行此类测试。在我的代码中，我尝试尽可能地限制模拟对象，尽管这听起来像是一个有效的用例。

# javascript - Oo 任何 IDE 中的 javascript 代码完成

> ID：12446896
> 
> 赞同：5
> 
> 时间：2012-09-16T12:33:46.573
> 
> 标签：javascript, oop, ide, code-completion

你知道任何可以自动完成这种代码的IDE吗？

我在这里有一个 javascript 类生成器：

```
(function() {
    var core = {
        bind : function(method, scope) {
            if (!( method instanceof Function))
                throw new TypeError("Function needed as method.");
            if ( typeof (scope) != "object")
                throw new TypeError("Object needed as scope.");
            return function() {
                return method.apply(scope, arguments);
            };
        },
        require : function(source) {
            if ( typeof (source) != "object" || !source)
                throw new TypeError("Object needed as source.");
            for (var property in source)
                if (source.hasOwnProperty(property) && !this.prototype.hasOwnProperty(property))
                    this.prototype[property] = source[property];
        },
        override : function(source) {
            if ( typeof (source) != "object" || !source)
                throw new TypeError("Object needed as source.");
            for (var property in source)
                if (source.hasOwnProperty(property))
                    this.prototype[property] = source[property];
        },
        extend : function(source) {
            var superClass = this;
            var newClass = source.hasOwnProperty("constructor") ? source.constructor : function() {
                superClass.apply(this, arguments);
            };
            newClass.superClass = superClass;

            var superClone = function() {
            };
            superClone.prototype = superClass.prototype;
            newClass.prototype = new superClone();
            newClass.prototype.constructor = newClass;

            if (source)
                newClass.override(source);
            return newClass;
        }
    };

    core.require.call(Function, core);

    Function.create = function (source){
        var newClass = source.hasOwnProperty("constructor") ? source.constructor : function() {};
        newClass.override(source);
        return newClass;
    };
})(); 
```

我需要这些示例类的代码完成（写在评论中）：

```
//Function.prototype: bind, require, override, extend
//Function.create

var A = Function.create({ //offer Function.[create]
    test: function (){
        console.log("a");
    }
});

//A is a Function instance
//A.prototype: test

var B = A.extend({ //offer A.[extend]
    test: function (){
        console.log("b");
    },
    test2: function (){
        console.log("b2");
    }
});

//B is a Function instance
//B.prototype inherits from A.prototype
//B.prototype.test overrides A.prototype.test

var F = Function.create({ //offer Function.[create]
    getA: function (){
        return new A();
    },
    getB: function (){
        return new B();
    }
});
//F is a Function instance
//F.prototype getA, getB returns A and B instances

var f = new F(); //offer [F]
//f inherits from F.prototype
var a = f.getA(); //offer f.[getA]
//a inherits from A.prototype
var b = f.getB(); //offer f.[getB]
//b inhertis from B.prototype

a.test(); //offer a.[test]
b.test(); //offer b.[test]
b.test2(); //offer b.[test2] 
```

所以我必须让 IDE 以某种方式知道，这些函数存在于 Function.prototype 中，并且这些函数正在创建 Function 实例，并且它们正在写入这些实例的原型。这只能通过手动索引我的代码（如 jsdoc）来实现，但这不足以描述例如继承。所以我需要一个至少可以处理 js 继承的 IDE，并且我可以为此编写一个插件来自动创建这个索引。（也许插件也可以处理继承，我不知道索引是如何工作的……）

哪个 IDE 有能力（以及如何）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T02:01:53.333

**solution 1:**

I found that in Eclipse the javascript indexer is a part of Web Tools Platform / Javascript Development Tools. [The source code is here.](http://www.eclipse.org/projects/project.php?id=webtools.jsdt) The developers wrote that the InferEngine is easy extendable, so you can write an eclipse plugin. In that case [this blog](http://kellicker.wordpress.com/) is really-really-really useful. It has great articles how to extend JSDT, and the JSDT developers can help too. Unfortunately I don't have much time to create such a thing if there is another solution.

**solution 2:**

Was looking around and found that the real problem is, that JSDOC 3 is not supported completely neither in Netbeans, nor in Eclipse JSDT and Aptana. The only IDE I found with JSDOC 3 support is Jetbrains WebStorm, so I'll use that. (Did not test the Resharper for Visual Studio, but it's JetBrains product either, so it possibly works too.)

The original example with jsdoc 3 in webstorm:

```
/** @class*/
var A = Function.create(//offer Function.[create] -> OK!
/** @lends A.prototype*/
{ 
    test: function (){
        console.log("a");
    },
    testA: function (){
        console.log("a2");
    }
});

/** @class*/
/** @extends A*/
var B = A.extend(//offer A.[extend] -> OK!
/** @lends B.prototype*/
{ 
    test: function (){
        console.log("b");
    },
    testB: function (){
        console.log("b2");
    }
});

/** @class*/
var F = Function.create(//offer Function.[create]  -> OK!
/** @lends F.prototype*/
{ 
    /** @returns A*/
    getA: function (){
        return new A();
    },
    /** @returns B*/
    getB: function (){
        return new B();
    }
});

var f = new F();
f.getA().test(); //offer f.[getA], offer f.getA().[test] -> OK
f.getA().testA(); //offer f.[getA], offer f.getA().[testA] -> OK
f.getB().test(); //offer f.[getB], offer f.getB().[test] -> OK
f.getB().testA(); //offer f.[getB], offer f.getB().[testA] -> OK
f.getB().testB(); //offer f.[getB], offer f.getB().[testB] -> OK 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T15:31:47.820

您可以使用安装了 Resharper 6 的 WebStorm 或 VisualStudio 之类的东西，它会构建所有对象的所有原型的列表，您可以使用它。它不是特别有用，我也不推荐它。但总比没有好。

# python - 更多 Pyglet - 抑制鼠标运动事件？

> ID：12446897
> 
> 赞同：1
> 
> 时间：2012-09-16T12:34:07.120
> 
> 标签：python, events, pyglet

在与上次相同的游戏中，我遇到了一个新问题。当我移动鼠标时，FPS 从 60 左右增加到 500 以上。我知道你在想什么；这不是因为`on_draw()`每个事件都被解雇（我认为），因为我已经覆盖了`pyglet.app.EventLoop.idle`：

```
class EventLoop:
    def idle(self):
        pyglet.clock.tick(poll=True)
        return pyglet.clock.get_sleep_time(sleep_idle=True)

pyglet.app.EventLoop = EventLoop() 
```

我也在我的绘图功能中调用`flip()`窗口。所有无用的鼠标运动事件都占用了大量的 CPU，这很烦人。我能做些什么呢？

**编辑**

我添加`window.invalid = False`到我的绘图功能和`window.invalid = True`我的更新功能，这似乎减少了其他鼠标操作的 CPU 使用率。

**编辑 2**

绘图功能是一个典型的`on_draw()`功能。

**编辑 3**

经过更多调查，似乎所有这些事件都没有像我想象的那样占用那么多 CPU。仍然很高兴知道这是否是 Pyglet 应该采取的行动方式，或者是否应该避免这种方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:29:06.357

你应该对鼠标事件做的就是更新你的应用程序的输入控制状态模型，并在下一次定期更新和重新显示世界模型时使用它（这对于物理和渲染等东西可能要复杂得多）。

即仅仅因为鼠标事件以~300fps 的速度进入并不意味着你实际上必须以300fps 的速度完成所有你想做的事情。

自从我做任何 Pyglet 以来已经有一段时间了，但我似乎使用的模式是将 Pyglet 的子类`window.Window`化为`MyGameWindow`，然后注册事件处理程序，如

```
 @self.event
    def on_mouse_motion(x,y,dx,dy):
        self.mouse_position=(x,y)
        self.mouse_buttons=0
        self.invalid = False 
```

（还有`on_mouse_drag`, `on_mouse_press`, `on_mouse_release`）。嗯...实际上，我认为分配到`self.invalid`可能对于覆盖 Pyglet 的默认行为并将任何进一步的更新/绘图推迟到下一个“时钟滴答”时至关重要。

# c# - 防御性数据库编程——我应该使用单例模式吗

> ID：12446904
> 
> 赞同：0
> 
> 时间：2012-09-16T12:34:43.097
> 
> 标签：c#

以下是防御性编程吗？

我的意思是，如果它失去了连接，或者在运行时发生了一些问题，然后用户再次运行它，.NET 框架是否会清理它第一次运行时创建的任何打开的连接和对象？

我听说过“单例模式”——这是我应该在静态方法 CreateConnection 中使用的东西吗？

```
class Program {
  static void Main(string[] args) {
     DataTable CasTable = fillSampleDataTable("SELECT top 100 * FROM x");
     //do other stuff
  }

  static SqlConnection CreateConnection() {
     SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["XXX"].ConnectionString);
     return conn;
  }
  static SqlDataAdapter CreateAdapter(string myCommand) {
    SqlDataAdapter myAdapt = new SqlDataAdapter(myCommand, CreateConnection());
    return myAdapt;
  }
  static DataTable fillSampleDataTable(string myCommand) {
      using (var adapt = CreateAdapter(myCommand)) {                   
            DataSet mySet = new DataSet();
            adapt.Fill(mySet, "SampleData");
            return mySet.Tables["SampleData"];
    }
  }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T12:44:47.463

我建议您使用 ADO.NET 连接池，也就是在您使用完连接后立即处理连接 => 将所有 IDisposable 资源包装在`using`语句中：

```
class Program 
{
    static void Main(string[] args) 
    {
        DataTable CasTable = fillSampleDataTable("SELECT top 100 * FROM x");
        //do other stuff
    }

    static DataTable fillSampleDataTable(string myCommand) 
    {
        var connectionString = ConfigurationManager.ConnectionStrings["XXX"].ConnectionString;
        using (var conn = new SqlConnection(connectionString))
        using (var cmd = conn.CreateCommand())
        using (var adapt = new SqlDataAdapter(cmd, conn)) 
        {
            conn.Open();
            cmd.CommandText = myCommand;
            DataSet mySet = new DataSet();
            adapt.Fill(mySet, "SampleData");
            return mySet.Tables["SampleData"];
        }
    }
} 
```

但通常 DataSets 和 DataTables 是过去的产物。今天你最好使用强类型模型。

所以定义一个模型：

```
public class MyModel
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

然后编写一个返回这些模型列表的方法：

```
class Program 
{
    static void Main(string[] args) 
    {
        var models = SelectTop100Models("SELECT top 100 * FROM x");
        //do other stuff
    }

    static IEnumerable<MyModel> SelectTop100Models() 
    {
        var connectionString = ConfigurationManager.ConnectionStrings["XXX"].ConnectionString;
        using (var conn = new SqlConnection(connectionString))
        using (var cmd = conn.CreateCommand())
        {
            conn.Open();
            cmd.CommandText = "SELECT top 100 * FROM x";
            using (var reader = cmd.ExecuteReader())
            {
                while (reader.Read())
                {
                    yield return new MyModel
                    {
                        Id = reader.GetInt32(reader.GetOrdinal("ID")),
                        Name = reader.GetString(reader.GetOrdinal("Name")),
                    };
                }
            }
        }
    }
} 
```

或者，您可以考虑使用 ORM 框架，例如[ADO.NET 实体框架](http://msdn.microsoft.com/en-us/library/bb399572.aspx)，因为它可以简化您查询关系数据库并使用 LINQ 查询直接处理强类型模型。

# php - SWIG 致命错误：无法重新声明类

> ID：12446905
> 
> 赞同：3
> 
> 时间：2012-09-16T12:34:48.487
> 
> 标签：php, class, swig, declaration

我在使用 swig 在 PHP 中包装我的 c++ 类时遇到问题：我的类在头文件中声明如下：

```
#include <string.h>
using namespace std;
class Ccrypto
{
  int retVal;
public:
  int verify(string data, string pemSign, string pemCert);
  long checkCert(string inCert, string issuerCert, string inCRL);
  int verifyChain(string inCert, string inChainPath);
  int getCN(string inCert, string &outCN);
}; 
```

这些方法中的每一个都包含几个函数。
我的接口文件如下：

```
%module Ccrypto
%include <std_string.i>
%include "Ccrypto.h"
%include "PKI_APICommon.h"
%include "PKI_Certificate.h"
%include "PKI_Convert.h"
%include "PKI_CRL.h"
%include "PKI_TrustChain.h"

%{
#include "Ccrypto.h"

#include "PKI_APICommon.h"
#include "PKI_Certificate.h"
#include "PKI_Convert.h" 
#include "PKI_CRL.h"
#include "PKI_TrustChain.h"
%} 
```

我生成 Ccrypto.so 文件没有任何错误。但是当我在我的代码中使用这个类时，我遇到了这个错误：

```
Fatal error: Cannot redeclare class Ccrypto in /path/to/my/.php file 
```

当我检查 Ccrypto.php 文件时，我发现它`class Ccrypto`已经被声明了两次。我的意思是我有：

```
Abstract class Ccrypto {
....
} 
```

和

```
class Ccrypto {
...
} 
```

为什么 SWIG 会为我的班级生成两个声明？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T14:56:24.973

问题是您有一个与模块同名的类（`%module`或命令行上的 -module）。SWIG 将 C++ 中的自由函数公开为具有模块名称的抽象类的静态成员函数。这是为了模仿我认为的命名空间。因此生成的 PHP 将包含两个类，一个抽象类，如果你有一个与模块同名的类并且有任何非成员函数。

您可以使用以下方法进行测试：

```
%module test

%inline %{
class test {
};

void some_function() {
}
%} 
```

这会产生您报告的错误。

在看到 PHP 运行时错误之前，SWIG 没有对此发出警告，这让我有点惊讶。在生成 Java 时，它会为同一接口提供以下错误：

> 类名不能等于模块类名：test

有几种可能的方法可以解决这个问题：

1.  重命名模块
2.  重命名代码库中的类。
3.  重命名类（使用`%rename`）：

    ```
    %module test

    %rename (test_renamed) test;

    %inline %{
    class test {
    };

    void some_function() {
    }
    %} 
    ```

4.  隐藏免费功能：

    ```
    %ignore some_function; 
    ```

# java - 如何为 java.lang.Class 有意义地定义 hashCode 和 equals ?

> ID：12446907
> 
> 赞同：8
> 
> 时间：2012-09-16T12:34:57.453
> 
> 标签：java, hash, hashmap, equals, hashcode

如果需要使用 a`Class<T>`作为 a 键的一部分，`Map`那么定义`hashCode`and的正确方法是什么`equals`？
A`Class<T>`继承了`Object`检查引用相等性并将内存地址作为哈希码返回的那些，但在我看来，不清楚 a 的有意义的定义`equals`和`hashCode`定义是什么`Class<T>`。
我应该使用`theClass.getClass().hashCode();`例如（我们有`Class<T> theClass;`）来使用实际实例的方法吗？
但这似乎不是正确的做法。
例如在[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html)中`Class<T>`：

> 每个数组也属于一个类，该类被反映为一个由具有相同元素类型和维数的所有数组共享的 Class 对象

因此，在某些情况下`Class<T>`，对象之间似乎共享相同的内容？那么遵循的方法是什么？也许使用`theClass.hashCode()`和`theClass.equals()`使用引用相等？这里完全不确定。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T13:15:28.160

`hashCode`和`equals` `java.lang.Class`继承自的实现`java.lang.Object`是有意义的并且通常是适当的，因为一个类的所有实例都保证从 中返回*相同* `Class`的对象`getClass()`，即

```
new Integer(2).getClass() == new Integer(3).getClass(); 
```

这有点隐藏在文档中；[getClass()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#getClass%28%29)的javadoc写道：

> 回报：
> 
> 表示此对象的运行时类的 Class 对象。
> 
> 也可以看看：
> 
> 文字，Java™ 语言规范的第 15.8.2 节。

[该部分](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.2)写道：

> 类文字评估为由当前实例的类的定义类加载器（第 12.2 节）定义的命名类型（或 void）的 Class 对象。

第[12.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.2)写道：

> 行为良好的类加载器维护以下属性：
> 
> *   给定相同的名称，一个好的类加载器应该总是返回相同的类对象。
> *   ...
> 
> 恶意类加载器可能会违反这些属性。但是，它不会破坏类型系统的安全性，因为 Java 虚拟机对此进行了防范。

是的，如果相同的类定义被不同的类加载器加载，类对象将不相等。由于运行时将它们视为独立的类（它们恰好共享相同的名称，但不需要相似，更不用说二进制兼容了），这通常是需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:59:54.507

该方法`String getName()`返回类的**唯一**字符串表示。如果您的程序不使用多个类加载器，则可以将此字符串用于 equals/hashCode 作为普通字符串。

# iphone - 验证我的应用程序我收到消息“没有可用于签名的身份”

> ID：12446908
> 
> 赞同：3
> 
> 时间：2012-09-16T12:35:02.487
> 
> 标签：iphone, xcode, xcode4.3, validating

我存档了我的应用程序，然后通过验证。出现一个标题为“选择应用程序记录和要签名的身份”的窗口，然后显示一个黄色三角形和消息“没有可用于签名的身份”以及下载身份和导入开发人员配置文件的选项。我选择了下载身份并在登录到我的 IOS 开发中心帐户后收到消息“管理员必须在下载身份之前请求身份”。 [codesigning error warnig http://imageshack.us/a/img824/4080/validate2.gif](http://imageshack.us/a/img824/4080/validate2.gif) 然后我选择了“导入开发人员配置文件”，它也没有成功。

我检查了代码签名并注意到错误警告当前没有配置文件匹配，并且应用程序标识符 com.jarrahbridges...... 配置文件与应用程序标识符 com.jarrahBridges 不匹配......

在组织者中，我的配置文件声明它们是有效配置文件，我的钥匙链（编号 6）中的所有证书都是有效的。

对此的任何方向将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T17:14:25.103

我遇到了同样的问题，问题是我的分发证书是在另一台 Mac 上创建的。以下是更多详细信息：

[http://spacetech.dk/ios-development-error-no-identities-are-available-for-signing.html](http://spacetech.dk/ios-development-error-no-identities-are-available-for-signing.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-22T11:41:42.650

1.  在 Developer Portal 上创建 AppStore 配置文件，然后更新 xCode 配置文件（xCode -> Preferences... -> Accounts）。
2.  创建一个成就并按“验证”
3.  您现在可以通过分发证书和 AppStore 配置文件再次验证存档

不过，不知道这是错误还是功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T15:59:42.357

尝试按照这些说明进行操作。基本上有多个地方你必须告诉 Xcode 你的包标识符是什么以及配置文件是什么。我不敢相信这些东西在 Apple 的 iOS 开发者分发指南中被完全忽略了。

[http://anthonytietjen.blogspot.com/2012/08/overcoming-trouble-validating-your.html](http://anthonytietjen.blogspot.com/2012/08/overcoming-trouble-validating-your.html)

此外，进入项目的构建设置并进入代码签名。确保 Code Signing Identities 都设置为您在 iTunes Connect 中创建的 iDevice Distribution App ID，以及 Provisioning Profile 设置为您在 iOS Development Center 中精心创建的 Provisioning Profile（即您创建的 Ad Hoc 配置文件并下载到 Xcode。）Apple 非常擅长引导您创建分发证书和 Ad Hoc Provisioning Profile，但是当涉及到将东西捆绑到 Xcode 中时，他们遗漏了很多东西。

[https://developer.apple.com/library/IOs/documentation/IDEs/Conceptual/AppDistributionGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40012582-CH1-SW1](https://developer.apple.com/library/IOs/documentation/IDEs/Conceptual/AppDistributionGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40012582-CH1-SW1)

我想说，如果您仍然无法使用 Ad Hoc 配置文件，请尝试在开发中心的“证书、标识符和配置文件”部分生成 App Store 分发配置文件，将其导入 Xcode（通过刷新 Xcode->preferences->accounts->details->refresh 按钮下的配置文件列表）并再次完成存档的验证过程。我不确定是不是因为 Xcode 无法使用 Ad Hoc 配置文件验证存档或什么，但它似乎可以很好地选择分发配置文件并允许您进行验证。不用担心，即使您没有使用 Ad Hoc 配置文件验证存档，您仍然可以通过点击 Organizer-> 中的分发按钮为您的存档创建 .ipa

# sql - SQL Service Broker：从分布式源收集数据。

> ID：12446912
> 
> 赞同：2
> 
> 时间：2012-09-16T12:35:44.233
> 
> 标签：sql, sql-server, service-broker

**摘要：** 我需要使用 SQL Server 服务代理从卫星 SQL 服务器可靠地收集数据。我需要设计允许一种插件顺利插入另一个卫星 SQL 服务器的协议。（我将根据您的建议完善问题——包括图片。但我需要以某种方式开始。）

**背景：** 我确实有一台中央 SQL 服务器（Microsoft，SQL 2008 R2 Standard ed.）和几台靠近生产机器的小型服务器（相同版本，Express 版）。小型服务器将传感器的温度收集到这样定义的表中：

```
CREATE TABLE dbo.line_sensor_values (
    UTC DATETIME NOT NULL,
    line_no TINYINT NOT NULL,   -- line number: 1, 2, 3, etc.
    sensor_no TINYINT NOT NULL, -- sensor number: 1, 2, 3, etc.
    sensor_value float NULL,    -- the measured value

  PRIMARY KEY CLUSTERED (
    UTC ASC,
    line_no ASC,
    sensor_no ASC
  )
) 
```

生产线上的`line_no`小 SQL 是常数。同一个表在中央 SQL 服务器上创建，可以暂时从小型服务器物理断开连接。（你知道，真实的物理环境。）

目标是将所有收集的数据从小型 SQL 服务器传输到中央服务器。所有服务器都创建了表；但是，他们对通信另一端的数据一无所知。这样，必须设计一些协议来使数据收集工作。必须设计一种 hanshake，以知道在重新连接后或传感器数据收集失败后继续数据传输的位置。

中央服务器使用收集到的传感器数据来处理某些任务。比如说，必须处理来自某条线（任务已知）的某个传感器的数据点以形成图表。该任务知道要收集传感器值的时间间隔。但是，任务数据库环境不会通过事件与数据收集同步。这样，UTC时间间隔是确定传感器数据是否属于任务的唯一方法。

同样，数据传感器采样间隔与任务无关，SQL 服务器可能会暂时断开连接。有时，传感器可能损坏，或者可能有其他原因导致传感器丢失物理数据。但是，如果有带有UTC时间的传感器数据，则表示所有以前的值或存在于表中或从未存在过。因此，知道任务数据是否完整的方法等于知道传感器有更新的数据（在任务的 UTC 范围间隔之后产生）。

目标是不丢失收集到的传感器值。理想的目标是不需要任何其他特殊的功能调用（即通过任何类型的调度程序）。

**已经做了什么：**

*   基本上，传感器将数据插入到专用表中（除了`dbo.line_sensor_values`上面提到的）。触发器获取数据并转换它们，然后将它们插入到`dbo.line_sensor_values`. 换句话说，卫星机上的桌子已经在收集数据。它已经起作用了。此触发器或其他方法可用于通过 Service Broker 发送传感器值。

*   执行任务的存储过程检查中央 SQL 服务器上的表中的传感器数据，并在数据存在时制作图表，并且已经设计好并且可以正常工作。但是，它仅*手动*用作概念的证明。

*   Service Broker 设置之前[已经建议过](https://stackoverflow.com/a/11704632/1346705)。但是，用于此目的的 Service Broker 通信尚未设计或部分测试。

我知道这是一个广泛的问题。这样，我将把它分成单独的问题......

**要解决的单独问题：**

1.  [SQL Service Broker：收集数据——插件场景分析](https://stackoverflow.com/q/12547810/1346705)

感谢您的时间和经验，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:10:19.340

听起来像是您不需要 Service Broker 的东西。`IsReplicated bit not null default(0)`您可以向从属机器添加一个新列。然后您需要定期将所有数据复制`where IsReplicated = 0`到中央服务器并将数据标记为`IsReplicated = 1`从站。

这是一个非常简单的同步方案。这对你有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:30:28.910

此评论的唯一目的是结束应该被视为讨论相关细节的问题的摘要的问题。我不认为现有答案真正回答了这个问题（没有冒犯）。

# iphone - iOS - 方向改变时改变视图

> ID：12446923
> 
> 赞同：1
> 
> 时间：2012-09-16T12:38:10.910
> 
> 标签：iphone, ios, uiinterfaceorientation, uistoryboardsegue

我将 iOS5 与故事板一起使用，我创建了两个 ViewController，一个用于纵向，一个用于横向。我用两个“模态 segue”连接了两个视图，这是我使用的代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;
if (UIDeviceOrientationIsLandscape(deviceOrientation))
{
    [self performSegueWithIdentifier: @"aaaa" sender: self];
}
else if (deviceOrientation == UIDeviceOrientationPortrait)
{
    [self performSegueWithIdentifier: @"ddd" sender: self];
}    

return true;

} 
```

如果我从纵向更改为横向，它可以工作，但是当我返回纵向视图时，它会因“没有标识符‘ddd’的segue”而崩溃，但它存在。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-24T17:22:53.057

我已经解决了在视图之间设置模式segue，然后使用以下代码进入实现文件：

```
- (void)willAnimateRotationToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration
{
   if(self.interfaceOrientation == UIDeviceOrientationPortrait || self.interfaceOrientation == UIDeviceOrientationPortraitUpsideDown){

       [self performSegueWithIdentifier: @"aaaa" sender: self];

   } else  if(self.interfaceOrientation == UIDeviceOrientationLandscapeLeft || self.interfaceOrientation == UIDeviceOrientationLandscapeRight)
   {

       [self performSegueWithIdentifier: @"ddd" sender: self];
   }
} 
```

ViewController（纵向和横向）的课程。

# javascript - 通过 Google 地球插件显示 Dojo 对话框

> ID：12446926
> 
> 赞同：0
> 
> 时间：2012-09-16T12:39:04.400
> 
> 标签：javascript, dojo, z-index, google-earth-plugin

常见问题：我正在使用 Dojo 编写一个 Web 应用程序，该应用程序具有 Google 地球的前端和中心（通过插件），并且我想在 Google 地球显示器上显示 Dojo 对话框（例如确认和表单）。`dijit.Dialog`即使对话框具有非常大的 z-index 并且 Earth 容器（和内部元素）具有负 z-indexes，该小部件也不可避免地呈现在 Earth 显示下方。

[这个问题](https://stackoverflow.com/questions/506984/how-can-i-place-a-html-div-over-the-google-earth-plugin-involves-wmode-i-imagi)是相关的 - 似乎由于插件的 IFramey 特性需要 shim - 但我想知道 Dojo 是否有更具体的内容？这是[ExtJS 似乎已经解决](https://groups.google.com/forum/?fromgroups=#!topic/google-earth-browser-plugin/rEvLqZ1PgYk)的一个常见问题，我原以为 Dojo 也会有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:09:44.953

毕竟[那个链接是相关的。](https://stackoverflow.com/questions/506984/how-can-i-place-a-html-div-over-the-google-earth-plugin-involves-wmode-i-imagi)我玩了一段时间的 JavaScript，最终深入研究了扩展 dijit.Dialog 小部件。只需添加一个`_shim`属性并偶尔更新它就足以让一切无缝运行！根据我在 Adob​​e Flex 上尝试类似事情的经验，这就像梦想成真。

您可以查看我[在 Bitbucket 上的 Shimmy Dialog](https://bitbucket.org/piemaster/shimmy/overview)的来源。

[![颤抖的对话在行动！](../Images/254acf5b970dc64a48d3379e12a3113a.png)](https://bitbucket.org/piemaster/shimmy/overview)

# css - 嵌套样式在少，样式父和子

> ID：12446929
> 
> 赞同：2
> 
> 时间：2012-09-16T12:39:48.537
> 
> 标签：css, less

如何为元素和他的一些后代设置样式？例如：

```
.datepick-month-header, .datepick-month-header select, .datepick-month-header input {
background-color: black;
color: #fff;
font-weight: bold; 
```

}

在较少的文档中，我发现嵌套样式效果很好，但我想同时选择 $this 和后代。

```
.datepick-month-header {

     select, input { // this selects "select" and "input", 

} 
```

}

如何在一个声明中设置所有三个元素（父、子）？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T12:55:34.630

使用 & 来引用父上下文，例如。

```
.a {
  &, & .b .{
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:57:16.273

我知道我可以做到这一点，但在输出 css 中获得冗余代码：

```
.datepick-month-style {

background-color: @datepickMonthHeaderBackgroundColor;
color: @datepickMonthHeaderColor;
font-weight: bold;

}

.datepick-month-header {

.datepick-month-style;

select, input {

    .datepick-month-style;

}

} 
```

# delphi - 如何实现 FireMonkey TStringGrid 排序功能：TFMXObjectSortCompare？

> ID：12446933
> 
> 赞同：1
> 
> 时间：2012-09-16T12:40:36.123
> 
> 标签：delphi, sorting, delphi-xe2, implementation, firemonkey

```
type
  TMyForm= class(TForm)
    sg       : TStringGrid;
    imgSortIt: TImage;
    ...
    procedure imgSortItClick(Sender: TObject);
  private
    { Private declarations }
//    sortIt: TFMXObjectSortCompare;
    function sortIt(item1, item2: TFmxObject): Integer;
  public
    { Public declarations }
  end;

var
  frm: TMyForm;

implementation

{$R *.fmx}

procedure TMyForm.imgSortItClick(Sender: TObject);
begin
  sg.Sort(???);
... 
```

你好，

我知道如何切换行以手动对网格进行排序...

但是作为一个`TSTringGrid`有一个程序`Sort`，我尝试将它与我自己的比较函数与[这个程序](http://docwiki.embarcadero.com/Libraries/fr/FMX.Types.TFmxObject.Sort)一起使用......

我应该如何构造类型/功能以使其工作？实际上，我得到：

*   `E2009 Incompatible types: 'regular procedure and method pointer'`
*   **或者**它使用这样声明的函数进行编译：`sortIt: TFMXObjectSortCompare;`但是如何实现代码以按照我的意愿进行排序？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:11:23.750

您正在查看[XE3 文档](http://docwiki.embarcadero.com/Libraries/en/FMX.Types.TFmxObjectSortCompare)，根据该文档`TFmxObjectSortCompare`声明为：

```
reference to function(Right, Left: TFmxObject): Integer; 
```

不幸的是，在[XE2](http://docwiki.embarcadero.com/Libraries/XE2/en/FMX.Types.TFmxObjectSortCompare)`TFmxObjectSortCompare`中，声明如下：

```
function(item1, item2: TFmxObject): Integer; 
```

因此，您需要提供常规程序。也就是说，`sortIt`不允许作为类的方法，而必须只是一个普通的旧函数：

```
function sortIt(item1, item2: TFmxObject): Integer;
begin
  Result := ...
end; 
```

我怀疑这是 XE2 FMX 代码中的设计错误。排序比较功能要灵活得多`reference to`，这大概就是它被更改的原因。

# php - 将 Ajax 请求传递给受保护文件夹内的文件？

> ID：12446934
> 
> 赞同：1
> 
> 时间：2012-09-16T12:40:50.190
> 
> 标签：php, jquery, ajax, directory, password-protection

我有一个我正在编写的 jQuery 控制台，出于安全原因，我想记录人们在什么时间用他们的 IP 地址输入的内容。我不想公开日志，但控制台本身应该是一种有趣的东西，并且不在受保护的文件夹中。

我想将日志放入受保护的管理文件夹，但我可以将 Ajax 数据发送到受保护文件夹内的 PHP 文件，否则它仍会提示输入用户名/密码？

我已经尝试过从外部 PHP 文件直接将日志本身放入文件夹中，但它不起作用，因此我想知道如果 PHP 文件位于受保护的文件夹中，它是否会起作用。

类似地，我什至需要费心保留日志吗？就像我说的，这是出于安全目的，但我不知道是否有必要。据我所知，按照我编写控制台的方式，它不接受我编写的命令之外的任何输入。我仍然担心SQL注入之类的事情。

很抱歉这个冗长的问题，并提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:58:21.920

**为什么不创建一个数据库来存储这种数据呢？**这样，用户就无法访问数据，并且还可以很好地存储您想要对其进行的任何操作。使用这种方法，您也可以将 PHP 页面放在可公开访问的位置。

如果您选择采用这种方法，我会建议使用 PHP 数据对象以确保安全。

# android - 安卓应用。使用 Mysql 数据库

> ID：12446936
> 
> 赞同：0
> 
> 时间：2012-09-16T12:41:31.127
> 
> 标签：android

我是安卓新手。请给我在android中连接mysql数据库的步骤。我试过很多例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:09:53.010

试试这个：[http ://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

# sqlite - 预加载由 UIManagedDocument 创建的 sqlite 数据库，在 iphone 模拟器中运行 Ok，拒绝在 iphone 设备中工作

> ID：12446937
> 
> 赞同：0
> 
> 时间：2012-09-16T12:41:40.733
> 
> 标签：sqlite, ios5, core-data, ios-simulator, uimanageddocument

我已经解决这个问题一周了，我用谷歌搜索了堆栈溢出，阅读了大约 40 篇文章，仍然无法解决我的问题。这是我所做的： 1.我编写了一个测试应用程序来创建 sqlite 数据库，并用数据预加载它。2.我创建了myApp，并将预加载的数据库复制到资源文件夹。3.我写了以下代码来获取数据库：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if (!self.myDataBase) {
        NSURL *url = [self localDocumentsDirectoryURL];
        url = [url URLByAppendingPathComponent:@"myDB/"];
        self.myDataBase = [[UIManagedDocument alloc] initWithFileURL:url];
    }

    return YES;
}

-(NSURL*)localDocumentsDirectoryURL {
    static NSURL *localDocumentsDirectoryURL = nil;
    if (localDocumentsDirectoryURL == nil) {
        NSString *documentsDirectoryPath = [NSSearchPathForDirectoriesInDomains( NSDocumentDirectory,NSUserDomainMask, YES ) objectAtIndex:0];
        localDocumentsDirectoryURL = [NSURL fileURLWithPath:documentsDirectoryPath];
    }
    return localDocumentsDirectoryURL;
}

- (void)useDocument
{
    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.ICCarDataBase.fileURL path]]) 
    {
        [self.ICCarDataBase saveToURL:self.ICCarDataBase.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {}];
    } 
    else
    {

        [self.ICCarDataBase openWithCompletionHandler:^(BOOL success) {}];
    }
}

- (void) setICCarDataBase:(UIManagedDocument *)carDataBase
{
    if (_ICCarDataBase != carDataBase) {
        _ICCarDataBase = carDataBase;
        [self useDocument];
    }
} 
```

然后当我在模拟器中运行 myApp 时，myApp 成功获取了数据库数据，而当我在我的 iPhone 中运行它时，myApp 无法获取数据库数据。我不知道SDK版本是否重要，因为模拟器是iphone 5.1，而我的iPhone是5.0（越狱）。而且我没有在我的应用程序中使用任何 5.1 特定功能。

有人说您应该先将数据库复制到文档目录才能使其正常工作，我已经尝试了该解决方案，在模拟器中仍然可以正常工作，但在 iPhone 中没有数据。另外，我使用 iTool 查看了 iphone 文件夹，myDB 文件夹已经在文档目录中。帖子建议解决方案在这里：[Pre-load core data database in iOS 5 with UIManagedDocument](https://stackoverflow.com/a/11713120/1421549)

其他人说我应该直接使用persistentStoreCoordinator。但我认为 UIManagedDocument 可以在我的情况下工作，因为它本身创建了一个隐式的 persistentStoreCoordinator。

关于 myApp 有什么问题的任何建议？

任何人都可以告诉我为什么 ios 用两层文件夹包装 sqlite DB，并命名实际的 sqlite db persisentStore？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T02:49:11.523

我已经解决了这个问题，感谢这篇文章[iPhone: Can access files in documents directory in Simulator, but not device](https://stackoverflow.com/a/2539547/1421549)

在这篇文章中，他引用了这个博客：[Xcode resource groups and folder references when building for iPhone](http://majicjungle.com/blog/123/)

解决我的问题后，我开始意识到预加载 sqlite 数据库在设备中不起作用的原因是：当 Xcode 将数据库从捆绑包复制到设备时，包装persistentStore 的文件夹层（myDB/StoreContent/persistentStore）是删除。因此，在 myApp.app 包中只有一个 persistentStore 文件与设备中的所有其他文件混合在一起。而当你使用 UIManagedDocument 访问 sqlite 数据库时，它只能在这样的目录结构中使用 sqlite：myDB/StoreContent/persistentStore。因此，只有一个裸的 persistentStore 文件，UIManagedDocument 将为您创建一个全新的目录结构，其中包含一个空的 persistentStore。

如果有人可以建议 UIManagedDocument 在没有文件夹层的情况下使用persistentStore 文件的方法，我会很感兴趣。

在我成功复制设备包中的目录结构后，我使用此代码访问数据库：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if (!self.myDataBase) {
        NSURL *url = [[NSBundle mainBundle] resourceURL];
        url = [url URLByAppendingPathComponent:@"myDB/"];
        self.myDataBase = [[UIManagedDocument alloc] initWithFileURL:url];
    }

    return YES;
} 
```

# java - java中的约束满足

> ID：12446953
> 
> 赞同：1
> 
> 时间：2012-09-16T12:44:03.720
> 
> 标签：java, constraint-programming

我在java中编程以下问题时遇到问题，这是一个约束满足问题：

如果我有这样的限制：

1.  x1 + x2 > x3
2.  x2 - x4 = 2
3.  x1 + x4 < x5

每个`x1`to`x5`都在域中`{0,1,2}`

我如何对不同的组合进行编程，以便我将一组元组作为：`{(0,0,0), (0,0,1), (0,1,0),(0,1,1),(1,0,0), ......}`对于每个约束

这是即时的约束 1 具有元组域，例如`{(0,0,0), (0,0,1), (0,1,0),(0,1,1),(1,0,0),(0,1,2),(2,0,1) ......}`

我需要任何语言的回复，但最好是java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:35:35.317

您也许可以通过使用 google commons collect 库中的一些辅助方法来做到这一点。它看起来像这样：

我假设元组（0,0,0）等是约束输入的元组，（x0，x1，x2）用于约束1，（x2，x4）用于约束2等。

因此，对于约束 1，首先我们用所有可能的组合填充一个列表：

```
 final List<int[]> allCombos = new ArrayList<int[]>();
    for (int i = 0; i < 3; i++) {
        for (int j = 0; j < 3; j++) {
            for (int k = 0; k < 3; k++) {
                allCombos.add(new int[] {i, j, k});
            }
        }
    }
    for (final int[] i : allCombos) {
        System.out.println(i[0] + ", " + i[1] + ", " + i[2]);
    } 
```

接下来，我们要过滤，所以我们将得到约束 1 允许的元组：

```
 final List<int[]> constraint1 = ImmutableList.copyOf(Iterables.filter(allCombos, new Predicate<int[]>() {
        @Override
        public boolean apply(@Nullable final int[] input) {
            return input[0] + input[1] > input[2];
        }
    }));

    for (final int[] i : constraint1) {
        System.out.println(i[0] + ", " + i[1] + ", " + i[2]);
    } 
```

这可能需要一点解释。

ImmutableList.copyOf 是一种创建给定列表副本的方法。对于这个方法，我们传递 Iterables.filter() 的结果，它接受一个列表（要过滤的输入）和一个 Predicate，它有一个重写的方法 apply()，您可以在其中决定输入列表的哪个元素应该是结果列表的一部分。在这里，我们基本上只是对约束本身进行编码，apply 方法返回 true 的情况将成为过滤列表的一部分。（我选择将元组表示为一个数组，您可以将过滤策略与任何元组表示一起使用..）

最后打印输出的结果（过滤列表）将是：

```
0, 1, 0
0, 2, 0
0, 2, 1
1, 0, 0
1, 1, 0
1, 1, 1
1, 2, 0
1, 2, 1
1, 2, 2
2, 0, 0
2, 0, 1
2, 1, 0
2, 1, 1
2, 1, 2
2, 2, 0
2, 2, 1
2, 2, 2 
```

我会让你为其他约束做同样的事情..

# android - 如何在android中从命令行运行ffmpeg

> ID：12446955
> 
> 赞同：10
> 
> 时间：2012-09-16T12:44:20.690
> 
> 标签：android, command-line, ffmpeg

我想使用命令行使用ffmpeg。我已经将ffmpeg.so保存在项目的文件目录中。但是这样做时我遇到了异常。这是代码：

```
public class MainActivity extends Activity {

    Process p;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Process p = Runtime.getRuntime().exec("/data/data/com.example.ffmpegnew/files/ffmpeg",null, new File("/data/data/com.example.ffmpegnew/files"));

        }
        catch(Exception e)
        {
            System.out.println("exception"+e);
        }

    }

} 
```

这是一个例外：

```
09-16 16:21:24.992: I/System.out(2103): exceptionjava.io.IOException: Error running exec(). Commands: [/data/data/com.example.ffmpegnew/files/ffmpeg] Working Directory: /data/data/com.example.ffmpegnew/files Environment: null 
```

请告诉我我在做什么类型的错误。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T09:23:27.887

因此，首先，您不能直接执行`shared object`文件。您需要构建一个可以使用运行的 ffmpeg 可执行文件`/system/bin`

请将此作为[Android 上的 FFmpeg参考](https://stackoverflow.com/questions/4725773/ffmpeg-on-android)

在您能够编译它之后，您可以将可执行文件放在 APK 的资产文件夹中并将其解压缩到`/data/data/<your package>/`（确保 chmod 755 也！）

完成后，您可以使用构建命令行字符串并将其传递给`ProcessBuilder`而不是使用 Runtime.exec()来运行可执行文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T18:39:01.137

异常提到“环境”为空...

也许代替'exec'，尝试使用processbuilder，如下面的运行ffmpeg的服务器端代码示例中包装在shellscript（pars_submit）中......注意builder.environment

```
 public String getFfmpeg(@QueryParam("infil1") String infil1, 
                @QueryParam("infil2") String infil2, @QueryParam("otfil") String otfil,
                @QueryParam("t") String time) {         
        String outfil = "dummy.mp4";

          List<String> command = new ArrayList<String>();
            command.add("vendor/bin/pars_submit");

            command.add(infil1);     

            command.add(infil2);
            command.add(otfil);
            command.add(time);

System.out.println("Starting process " +command.toString());
            ProcessBuilder builder = new ProcessBuilder(command);
            Map<String, String> environ = builder.environment();
//          for(Entry<String, String> entry : environ.entrySet()){
    //          System.out.println("ENV " +entry.getKey() + " " +entry.getValue());
      //      }
//          builder.redirectErrorStream(true);
            Process process = null;
            try {
                process = builder.start();

            InputStream is = process.getInputStream();

            InputStreamReader isr = new InputStreamReader(is);
            BufferedReader br = new BufferedReader(isr);
            String line;
            while ((line = br.readLine()) != null) {  
              //System.out.println(line);
                outfil=line;
            }

//          int exitVal = process.waitFor();
 //           System.out.println("Process exitValue: " + exitVal);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }  
            finally {
                  if (process != null) {
                    process.destroy();
                    process = null;
                  }

                }           

            return outfil;

                } 
```

IMO - 使用完整的 JNI 接口和包装器来调用 ffmpeg.main()，android-ffmpeg 将更加可靠。查看所有 git 项目...搜索“android-ffmpeg”并查看它们如何调用 ffmpeg。不使用 CLI。

pars_submit

```
#!/bin/bash
shopt -s globstar
uri=$1
filnam="${uri##*/}"
uri2=$2
filnam2="${uri2##*/}"
otfil=$3
time=$4
curl -#LO  $uri
curl -#LO  $uri2
ffmpeg -y -loop 1 -i "$filnam" -i "$filnam2" -t "$time" -r 1/2 -pass 1 -vcodec libx264 -b:v 200k -bt 50k  -an -f mp4 -strict -2 -passlogfile mydummy /dev/null
# echo "ffmpegP1 Exit status" $?
ffmpeg -y -loop 1 -i "$filnam" -i "$filnam2" -t "$time" -r 1/2 -pass 2 -vcodec libx264 -b:v 200k -bt 50k  -f mp4 -strict -2 -passlogfile mydummy -ar 44100 "$otfil" 
# echo "ffmpegp2 Exit status" $?
# last test
json=$(curl  -X POST  -H "X-Parse-Application-Id: 3KxPB" -H "X-Parse-REST-API-Key: kVl5Z0CX"  -H "Content-Type: video/mp4"  --data-binary @"$otfil" https://api.parse.com/1/files/"$otfil")
# echo "parse POST Exit status" $?
echo $json 
```

# html - Twitter Bootstrap 中的 CSS 按钮问题

> ID：12446956
> 
> 赞同：-1
> 
> 时间：2012-09-16T12:44:22.130
> 
> 标签：html, css, button, twitter-bootstrap

这里原始来源（有问题）

[http://goo.gl/UjcoC](http://goo.gl/UjcoC)

![在此处输入图像描述](../Images/5a603feb9124cf44c2f0b03c8b908aaa.png)

但是当我尝试在 jsfiddle 中重新生成问题时得到正确的结果

[http://goo.gl/uhGP0](http://goo.gl/uhGP0)

![在此处输入图像描述](../Images/8e2df3e1f3f029acdeff18a246cf5d12.png)

我错过了什么？如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:51:22.650

```
display: inline-block; 
```

在插入符号类上阻止您的跨度拉伸按钮。使固定：

```
.btn .caret {
    display: inline;
    top: 10px;
    margin-left: 0;
    position: relative;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T20:22:33.633

> ## 需要 HTML5 文档类型
> 
> Bootstrap 使用需要使用 HTML5 文档类型的某些 HTML 元素和 CSS 属性。将它包含在所有项目的开头。

```
<!DOCTYPE html>
<html lang="en">
  ...
</html> 
```

取自（一开始）[文档](http://twitter.github.com/bootstrap/scaffolding.html#global)。

# c - 对函数进行字节编码时出现分段错误？

> ID：12446965
> 
> 赞同：2
> 
> 时间：2012-09-16T12:45:19.003
> 
> 标签：c, security, runtime-error

运行以下 C 程序（在 Ubuntu 中使用 gcc 编译）时出现分段错误。

```
#include <stdio.h>

char f[] = "\x55\x48\x89\xe5\x48\x89\x7d\xf8\x48\x89\x75\xf0\x48\x8b\x45\xf8\x8b\x10\x48\x8b\x45\xf0\x8b\x00\x89\xd1\x29\xc1\x89\xc8\xc9\xc3";

int main()
{
    int (*func)();
    func = (int (*)()) f;

    int x=3,y=5;
    printf("%d\n",(int)(*func)(&x,&y));
    return 0;
} 
```

该字符串`f`包含以下函数的机器代码。

```
int f(int*a, int*b)
{
    return *a-*b;
} 
```

参看：

```
f.o:     file format elf64-x86-64

Disassembly of section .text:

0000000000000000 <f>:
   0:   55                      push   %rbp
   1:   48 89 e5                mov    %rsp,%rbp
   4:   48 89 7d f8             mov    %rdi,-0x8(%rbp)
   8:   48 89 75 f0             mov    %rsi,-0x10(%rbp)
   c:   48 8b 45 f8             mov    -0x8(%rbp),%rax
  10:   8b 10                   mov    (%rax),%edx
  12:   48 8b 45 f0             mov    -0x10(%rbp),%rax
  16:   8b 00                   mov    (%rax),%eax
  18:   89 d1                   mov    %edx,%ecx
  1a:   29 c1                   sub    %eax,%ecx
  1c:   89 c8                   mov    %ecx,%eax
  1e:   c9                      leaveq 
  1f:   c3                      retq 
```

这是使用编译的：

```
gcc test.c -Wall -Werror
./a.out
Segmentation fault 
```

预期的输出是`-2`- 我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T13:20:35.150

显然，下面的建议不再适用于 gcc，因为现在的数组数据位于一个单独的不可执行的只读 ELF 段中。

由于历史原因，我将把它留在这里。

* * *

有趣的是，链接器并没有抱怨您试图将 a`char f[] = "...";`作为函数链接`f()`到您的应用程序。你试图调用一个函数`f()`。有一个符号`f`链接到可执行文件，但令人惊讶的是它根本不是函数，而是一些变量。因此它无法执行它。这可能是由于堆栈执行保护机制造成的。

为了避免这种情况，显然，您只需要将字符串获取到进程内存的*文本段*。如果您将字符串声明为`const char f[]`.

来自[Aleph One 的 Smashing The Stack For Fun and Profit](http://insecure.org/stf/smashstack.html)：

> 文本区域由程序固定，包括代码（指令）和只读数据。该区域对应于可执行文件的文本部分。

由于`const char[]` *是*只读的，编译器将其与代码一起放入文本区域。从而绕过执行阻止机制，机器能够执行其中的机器代码。

* * *

例子：

```
/* test.c */
#include <stdio.h>

const char f[] = "\x55\x48\x89\xe5\x48\x89\x7d\xf8\x48\x89\x75\xf0\x48\x8b\x45\xf8\x8b\x10\x48\x8b\x45\xf0\x8b\x00\x89\xd1\x29\xc1\x89\xc8\xc9\xc3";

int main()
{
    int (*func)();
    func = (int (*)()) f;

    int x=3,y=5;
    printf("%d\n",(int)(*func)(&x,&y));
    return 0;
} 
```

产量：

```
$ gcc test.c -Wall && ./a.out
-2 
```

（Fedora 16，gcc 4.6.3）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:56:28.830

如果我对您的理解正确，您正在尝试运行不在文本空间中而是在您的初始化静态存储中的简单代码？如果这失败了，那么只有三个原因：您的代码初始化不正确（在这种简单的情况下不太可能），您的数据空间已被踩到（在这种简单的情况下看起来不像），或者您的系统是防止它作为一种安全措施（很可能是因为您尝试做的事情相当不典型，主要用于缓冲区溢出利用）。

# java - Hibernate 是否允许加载/保存链接的实体？

> ID：12446968
> 
> 赞同：1
> 
> 时间：2012-09-16T12:45:53.953
> 
> 标签：java, hibernate, one-to-many

假设我有`Category`如下定义的自链接实体：

```
public class Category {

@Id
@Access(AccessType.FIELD)
public String Url;

@ManyToOne(optional=true)
@Access(AccessType.FIELD)
public Category Parent;

@OneToMany
private Set<Category> subs;
public void addSub(Category sub) {
    subs.add(sub);
}
public void removeSub(Category sub) {
    subs.remove(sub);
}

@Access(AccessType.FIELD)
public String Title;

@Access(AccessType.FIELD)
public boolean Done; 
```

我想知道，如果我创建新的并用我的方法`Category`添加它，它会正常工作吗？`addSub`会`Category`正确坚持吗？子类别会以正确的顺序自动保留吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:09:26.530

在您的代码的当前状态下 - 不。要使其按您的意愿工作，您需要执行以下操作：

1.  `mappedBy`用on连接双向关系的两边`@OneToMany`，否则 Hibernate 会认为你有两种不同的关系：

    ```
    @OneToMany(mappedBy = "Parent") 
    ```

2.  你有责任让你的关系双方保持一致：

    ```
    public void addSub(Category sub) {
        sub.setParent(this);
        subs.add(sub);  
    } 
    ```

    `@ManyToOne`Hibernate 在存储外键时会查看侧边。

3.  如果您希望持久的子类别`Category`自动持久化，则需要配置级联：

    ```
    @OneToMany(..., cascade = CascadeType.ALL) 
    ```

# c++ - 为类方法创建模板

> ID：12446970
> 
> 赞同：0
> 
> 时间：2012-09-16T12:45:55.203
> 
> 标签：c++, class, templates, methods

> **可能重复：**
> [为什么在使用模板时会出现“未解析的外部符号”错误？](https://stackoverflow.com/questions/456713/why-do-i-get-unresolved-external-symbol-errors-when-using-templates)
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

也许我太愚蠢了，但这对我不起作用：

**Foo.h**

```
#ifndef FOO_H
#define FOO_H

class Foo {
public:
    template<typename T>
    void foo(T const &);
};

#endif // FOO_H 
```

**Foo.cpp**

```
#include "Foo.h"

template<typename T>
void Foo::foo(T const &var) {
    // do something useless
} 
```

**主文件**

```
#include "Foo.h"

int main() {
    int i;
    Foo bar;
    bar.foo(i);
} 
```

我只是用 Xcode 4.4.1 编译，但它返回了以下链接错误：

```
Undefined symbols for architecture x86_64:
  "void Foo::foo<int>(int const&)", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

感谢您的回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T12:48:46.187

模板方法定义必须在实例化时可用。尝试将方法的定义放在头文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:56:05.147

如果您不想打扰显式实例化，则必须提供内联定义。另一种解决方案是在 .cpp 文件中提供显式实例化。

有关详细信息，请参阅[http://www.parashift.com/c++-faq-lite/separate-template-fn-defn-from-decl.html](http://www.parashift.com/c++-faq-lite/separate-template-fn-defn-from-decl.html)。

# php - Codeigniter：加入 3 个表并在视图中显示数据

> ID：12446972
> 
> 赞同：5
> 
> 时间：2012-09-16T12:46:55.283
> 
> 标签：php, codeigniter

所以我有 3 张桌子我想加入。

我正在构建一个我 Codeigniter 的应用程序，我有 3 个表

**客户端：**
-id
-phone_number
-hospital_id
-smc_status
-testing_center_id

**医院**
-id
-name

 **测试中心**-id**
-name**

 **在模型中，我有这个：

```
public function get_clients()
    {
        if($slug === FALSE)
        {
            $this->db->select('clients.*');
            $this->db->from('clients');
            $this->db->join('hospital', 'clients.id = hospital.id');
            $this->db->join('testing_center', 'clients.id = testing_center.id');
            $query = $this->db->get();

            return $query->result_array();
        }

        $query = $this->db->get_where('clients');
        return $query->row_array();
    } 
```

在我看来：

```
<tbody>
    <?php foreach ($clients as $client_item): ?>
    <tr>
        <td><?php echo $client_item['phone_number'] ?></td>
        <td><?php echo $client_item['smc_status'] ?></td>
        <td><?php echo $client_item['hospital_id'] ?></td> //i wish to have the hospital name here
        <td><?php echo $client_item['testing_center_id'] ?></td> //i wish to have the testing center name here
        <td><?php echo $client_item['language'] ?></td>
        <td><a href="#">View</a></td>
    </tr>
    <?php endforeach ?>
</tbody> 
```

但那是因为我没有在第三和第四个td上显示医院名称和检测中心名称。我该怎么办？我尝试了一些由于某种原因似乎不起作用的技术。请指教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T12:55:33.493

您只是从`clients`表中选择值。您还需要从其他表中选择列

```
$this->db->select('clients.id, 
    clients.phone_number,
    clients.smc_status,
    clients.language,
    hospital.name AS hospital_name, 
    testing_center.name AS testing_center_name'); 
```

然后你可以通过

```
<?php echo $client_item['hospital_name'] ?>
<?php echo $client_item['testing_center_name'] ?> 
```

编辑：你[也不应该使用 SELECT *](https://stackoverflow.com/questions/321299/what-is-the-reason-not-to-use-select)，这`clients.*`是在做的。更新了我的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:32:20.207

应该是这样的

```
 $this->db->join('hospital', 'clients.hospital_id = hospital.id');
 $this->db->join('testing_center', 'clients.testing_center_id  = testing_center.id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T12:53:50.977

如果你尝试这个会发生什么：

```
 $this->db->join('hospital', 'hospital.id = clients.id');
 $this->db->join('testing_center', 'testing_center.id = clients.id'); 
```

而不是这个：

```
 $this->db->join('hospital', 'clients.id = hospital.id');
 $this->db->join('testing_center', 'clients.id = testing_center.id'); 
```

还要检查

client* *s* * 和 client，如果它们在任何地方都相同

并按照 Nerd 的建议进行更改： $this->db->select('clients.*'); 至：

```
$this->db->select('*'); 
```**

# iphone - 如何制定应用程序的 itms-apps 链接，预提交？

> ID：12446973
> 
> 赞同：2
> 
> 时间：2012-09-16T12:47:06.520
> 
> 标签：iphone, ios, app-store

在提交我正在开发的应用程序之前，我希望应用程序在 App Store 中包含指向该应用程序的链接（它将在一封电子邮件中，由应用程序生成）。

我已经阅读了很多帖子，包括这篇文章： [如何链接到应用商店中的应用](https://stackoverflow.com/questions/433907/how-to-link-to-apps-on-the-app-store)

所以我知道我要使用的链接的格式。这将是：

itms-apps://itunes.com/apps/appname

我要仔细检查的是应用程序名本身。具体来说，包名称和包显示名称之间的区别。

例如，如果我将包显示名称设置为： **awesome'a​​pp**

但是捆绑包名称很简单： **awesomeapp**

在 Xcode 中，Targets -> Build Settings -> Packaging, Product Name = awesomeapp 这是用于 Bundle 名称的内容，因为它设置为：${PRODUCT_NAME}

我假设最好不要在产品名称中使用撇号，所以我手动将 Bundle 显示名称设置为：awesome'a​​pp

问题 1：正如我现在所拥有的，itms-apps 链接中的“appname”会是“awesomeapp”吗？

问题2：如果在整个Xcode项目中使用awesome'a​​pp实际上就可以了（因此不必手动设置Bundle显示名称），那么itms-apps链接会是什么？还会不会：

itms-apps://itunes.com/apps/awesomeapp

谢谢，加文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:00:08.003

在 iTunes Connect 中创建应用程序后，您将获得一个链接，该链接将指向您的应用程序，一旦它在 AppStore 上发布。使用该链接。

![iTunes Connect 应用程序详细信息](../Images/9bbda56b1ba294f3d7ad56623820c24a.png)

# rabbitmq - 芹菜队列挂

> ID：12446975
> 
> 赞同：1
> 
> 时间：2012-09-16T12:47:24.753
> 
> 标签：rabbitmq, celery

我有一项特定的工作，似乎时常让我的芹菜工人绞死。我正在使用rabbitmq 作为经纪人。我尝试了几件事来解决这个问题，但无济于事：

*   自动缩放工作人员以让挂起的工作人员有足够的时间完成执行
*   设置全局超时

因此，我对导致此问题的原因以及如何解决此问题提出了一些建议。任何人都可以给我任何指示吗？有问题的任务只是将一条记录插入数据库（在本例中为 MongoDB。）

更新：我添加了[CELERYD_FORCE_EXECV](http://celery.readthedocs.org/en/latest/configuration.html#std%3asetting-CELERYD_FORCE_EXECV)。我们会看看这是否能解决它。更新 2：不！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:59:03.650

使子进程挂起的特定作业通常是 IO 永远不会完成的症状，例如 Web 请求或没有超时的套接字读取。

大多数库支持设置超时，但如果不是，您可以随时使用`socket.setdefaulttimeout`：

```
import socket

@task
def http_get(url, timeout=1.0, retry_after=3.0, max_retries=None):
    prev_timeout = socket.getdefaulttimeout()
    socket.setdefaulttimeout(timeout)
    try:
        return requests.get(url)
    except socket.timeout:
        raise http_get.retry(exc=exc, countdown=retry_after, max_retries=max_retries)
    finally:
        socket.setdefaulttimeout(prev_timeout) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-17T07:55:12.857

您很可能在 Celery / Kombu 中遇到了一个无限循环错误（请参阅[https://github.com/celery/celery/issues/3712](https://github.com/celery/celery/issues/3712)），该错误最近才得到修复。它还没有发布。有关详细信息，请参阅提交[https://github.com/celery/kombu/pull/760](https://github.com/celery/kombu/pull/760)。如果您不能为您的安装使用 repo 构建，则解决方法是切换到 Redis 或 set `CELERY_WORKER_PREFETCH_MULTIPLIER=0`and `-P solo`for now。

# ios - iOS - 在 UIWebView 中查看特定 PDF 时出现“收到内存警告”

> ID：12446976
> 
> 赞同：1
> 
> 时间：2012-09-16T12:47:26.407
> 
> 标签：ios, ipad, pdf, memory, uiwebview

我有一个 iPad 应用程序，它有一个 UIViewController，其中包含一个用于查看文档的 UIWebView。我已经愉快地使用了一段时间，没有任何问题。但是，我遇到了一个 13 页的 PDF 文档，UIWebView 加载正常，但是当您滚动页面时，它会导致应用程序崩溃，除非当时加载的其他应用程序很少。在调试模式下运行应用程序时，我在调试窗口中收到消息“收到内存警告”。当应用程序崩溃时，我经常（但不总是）得到一个 EXC_BAD_ACCESS。我过去成功地查看过比这个大得多的 PDF，但这个确实有更多的图形。我有一个使用相同 UIViewController 的 iPhone 应用程序，它可以正常加载和查看 PDF，没有错误。任何想法如何处理这个？

# javascript - 访问局部变量不会提高性能

> ID：12446978
> 
> 赞同：11
> 
> 时间：2012-09-16T12:47:36.147
> 
> 标签：javascript, optimization

****澄清**：我不是在寻找最快的代码或优化。我想了解为什么一些似乎没有优化或优化的代码实际上通常运行得更快。

# 短版

为什么是这个代码：

```
var index = (Math.floor(y / scale) * img.width + Math.floor(x / scale)) * 4; 
```

比这个性能更好？

```
var index = Math.floor(ref_index) * 4; 
```

# 长版

本周，Impact js 的作者发表了一篇关于一些渲染问题的文章：

[http://www.phoboslab.org/log/2012/09/drawing-pixels-is-hard](http://www.phoboslab.org/log/2012/09/drawing-pixels-is-hard)

在文章中，有一个函数的来源，通过访问画布中的像素来缩放图像。我想建议一些传统的方法来优化这种代码，以便在加载时缩放会更短。但是在测试之后，我的结果大部分时间都比原始功能最差。

猜测这是 JavaScript 引擎正在做一些智能优化，我试图更多地了解发生了什么，所以我做了一堆测试。但是我的结果很混乱，我需要一些帮助来了解发生了什么。

我在这里有一个测试页面：

[http://www.mx981.com/stuff/resize_bench/test.html](http://www.mx981.com/stuff/resize_bench/test.html)

**jsPerf：http: [//jsperf.com/local-variable-due-to-the-scope-lookup](http://jsperf.com/local-variable-due-to-the-scope-lookup)**

要开始测试，请单击图片，结果将出现在控制台中。

共有三个不同的版本：

## 原代码：

```
for( var y = 0; y < heightScaled; y++ ) {
    for( var x = 0; x < widthScaled; x++ ) {
        var index = (Math.floor(y / scale) * img.width + Math.floor(x / scale)) * 4;
        var indexScaled = (y * widthScaled + x) * 4;
        scaledPixels.data[ indexScaled ] = origPixels.data[ index ];
        scaledPixels.data[ indexScaled+1 ] = origPixels.data[ index+1 ];
        scaledPixels.data[ indexScaled+2 ] = origPixels.data[ index+2 ];
        scaledPixels.data[ indexScaled+3 ] = origPixels.data[ index+3 ];
    }
} 
```

**jsPerf：http: [//jsperf.com/so-accessing-local-variable-doesn-t-improve-performance](http://jsperf.com/so-accessing-local-variable-doesn-t-improve-performance)**

## 我优化它的尝试之一：

```
var ref_index = 0;
var ref_indexScaled = 0
var ref_step = 1 / scale;
for( var y = 0; y < heightScaled; y++ ) {
    for( var x = 0; x < widthScaled; x++ ) {
        var index = Math.floor(ref_index) * 4;
        scaledPixels.data[ ref_indexScaled++ ] = origPixels.data[ index ];
        scaledPixels.data[ ref_indexScaled++ ] = origPixels.data[ index+1 ];
        scaledPixels.data[ ref_indexScaled++ ] = origPixels.data[ index+2 ];
        scaledPixels.data[ ref_indexScaled++ ] = origPixels.data[ index+3 ];

        ref_index+= ref_step;
    }
} 
```

**jsPerf：http: [//jsperf.com/so-accessing-local-variable-doesn-t-improve-performance](http://jsperf.com/so-accessing-local-variable-doesn-t-improve-performance)**

## 相同的优化代码，但每次都重新计算索引变量（混合）

```
var ref_index = 0;
var ref_indexScaled = 0
var ref_step = 1 / scale;
for( var y = 0; y < heightScaled; y++ ) {
    for( var x = 0; x < widthScaled; x++ ) {
        var index = (Math.floor(y / scale) * img.width + Math.floor(x / scale)) * 4;
        scaledPixels.data[ ref_indexScaled++ ] = origPixels.data[ index ];
        scaledPixels.data[ ref_indexScaled++ ] = origPixels.data[ index+1 ];
        scaledPixels.data[ ref_indexScaled++ ] = origPixels.data[ index+2 ];
        scaledPixels.data[ ref_indexScaled++ ] = origPixels.data[ index+3 ];

        ref_index+= ref_step;
    }
} 
```

**jsPerf：http: [//jsperf.com/so-accessing-local-variable-doesn-t-improve-performance](http://jsperf.com/so-accessing-local-variable-doesn-t-improve-performance)**

最后两个的唯一区别是'index'变量的计算。令我惊讶的是，优化版本在大多数浏览器（除了歌剧）中都比较慢。

## *个人测试结果*（不是 jsPerf 测试）：

*   **歌剧**

    ```
    Original:  8668ms
    Optimized:  932ms
    Hybrid:    8696ms 
    ```

*   **铬合金**

    ```
    Original:  139ms
    Optimized: 145ms
    Hybrid:    136ms 
    ```

*   **苹果浏览器**

    ```
    Original:  433ms
    Optimized: 853ms
    Hybrid:    451ms 
    ```

*   **火狐**

    ```
    Original:  343ms
    Optimized: 422ms
    Hybrid:    350ms 
    ```

在挖掘之后，由于范围查找，似乎一个通常的好习惯是主要访问局部变量。因为优化后的版本只调用一个局部变量，所以除了涉及的各种操作之外，调用多个变量和对象的混合代码应该更快。

那么为什么“优化”版本更慢呢？

我认为这可能是因为某些 JavaScript 引擎没有优化优化版，因为它不够热，但是`--trace-opt`在 chrome 中使用后，似乎所有版本都被 V8 正确编译。

在这一点上，我有点无能为力，想知道是否有人会知道发生了什么？

我还在这个页面中做了一些更多的测试用例：

[http://www.mx981.com/stuff/resize_bench/index.html](http://www.mx981.com/stuff/resize_bench/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:07:18.533

听起来很傻，这些`Math.whatever()`调用对于 JS 引擎的优化和内联可能很棘手。只要有可能，最好使用算术运算（而不是函数调用）来获得相同的结果。

将以下第四个测试添加到[http://www.mx981.com/stuff/resize_bench/test.html](http://www.mx981.com/stuff/resize_bench/test.html)

```
// Test 4
console.log('- p01 -');
start = new Date().getTime();
for (i=0; i<nbloop; i++) {
  var index = 0;
  var ref_indexScaled = 0
  var ref_step=1/scale;

  for( var y = 0; y < heightScaled; y++ ) {
    for( var x = 0; x < widthScaled; x++ ) {
      var z= index<<2;
      scaledPixels.data[ ref_indexScaled++ ] = origPixels.data[ z++ ];
      scaledPixels.data[ ref_indexScaled++ ] = origPixels.data[ z++ ];
      scaledPixels.data[ ref_indexScaled++ ] = origPixels.data[ z++ ];
      scaledPixels.data[ ref_indexScaled++ ] = origPixels.data[ z++ ];

      index+= ref_step;
    }
  }
}
end = new Date().getTime();
console.log((end-start)+'ms'); 
```

在 Opera Next 中产生以下数字：

*   原始 - 2311 毫秒
*   重构 - 112ms
*   混合 - 2371ms
*   p01 - 112 毫秒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:35:38.937

使用一些基本技术可以高度优化性能：

1.  在循环中运行多个循环时，请使用：

    while (i--) { /* 这里有一些代码 */ }

... 其中 i 是一个大于 0 的值。

1.  适当地缓存变量/本地化变量以最小化计算。对于较大的计算，这意味着将部分计算放在正确的抽象层。

2.  重用变量（重新初始化开销可能成为大量数据处理的问题）。注意：这是一个糟糕的编程设计原则，但却是一个很好的性能原则！

3.  减少属性深度。与仅包含“object_propertyvalue”的变量相比，使用 object.property 会降低性能。

使用这些原则，您可以获得更好的性能。现在从高层次来看，查看您从中派生此功能的文章，它在几个方面存在缺陷。因此，要真正优化全部功能，而不仅仅是您所说的那一行：

```
function resize_Test5( img, scale ) {
    // Takes an image and a scaling factor and returns the scaled image

    // The original image is drawn into an offscreen canvas of the same size
    // and copied, pixel by pixel into another offscreen canvas with the 
    // new size.

    var widthScaled = img.width * scale;
    var heightScaled = img.height * scale;

    var orig = document.createElement('canvas');
    orig.width = img.width;
    orig.height = img.height;
    var origCtx = orig.getContext('2d');
    origCtx.drawImage(img, 0, 0);
    var origPixels = origCtx.getImageData(0, 0, img.width, img.height);

    var scaled = document.createElement('canvas');
    scaled.width = widthScaled;
    scaled.height = heightScaled;
    var scaledCtx = scaled.getContext('2d');
    var scaledPixels = scaledCtx.getImageData( 0, 0, widthScaled, heightScaled );

    // optimization start
    var old_list = origPixels.data;
    var image_width = img.width;
    var h = heightScaled;
    var w = widthScaled;
    var index_old;
    var index_new;
    var h_scale;
    var new_list = [];
    var pre_index_new;

    while(h--){
        h_scale = Math.floor(h / scale) * image_width;
        pre_index_new = h * widthScaled;
        while(w--){
            index_old = (h_scale + Math.floor(w / scale)) * 4;
            index_new = (pre_index_new + w) * 4;
            new_list[ index_new ]     = old_list[ index_old ];
            new_list[ index_new + 1 ] = old_list[ index_old + 1 ];
            new_list[ index_new + 2 ] = old_list[ index_old + 2 ];
            new_list[ index_new + 3 ] = old_list[ index_old + 3 ];
        }
    }
    scaledPixels.data = new_list;
    // optimization stop

    scaledCtx.putImageData( scaledPixels, 0, 0 );
    return scaled;
} 
```

# android - 如何访问另一个应用程序的特定页面

> ID：12446979
> 
> 赞同：1
> 
> 时间：2012-09-16T12:47:48.870
> 
> 标签：android, android-intent

我有一个小部件应用程序，我可以点击它来访问另一个应用程序。但是，我被困在如何到达`fragment`我的应用程序中的特定位置。我的代码让我打开应用程序，但我想打开一个特定的页面。为此，我尝试将我想要显示的类的包`null pointer exception`放在类别启动器行上。可能吗？到目前为止，这是我的代码。TIA

```
 Intent in = new Intent(Intent.ACTION_MAIN);
                  PackageManager manager = context.getPackageManager();
                  in = manager.getLaunchIntentForPackage("com.playup.android");
                  in.addCategory(Intent.CATEGORY_LAUNCHER);
                  PendingIntent pendingIntent = PendingIntent.getActivity(context,0 /* no requestCode */, in, 0 /* no flags */); 
```

# c - 当每个文档可以采用两种类型之一时，如何生成文档集的所有可能排名？

> ID：12446982
> 
> 赞同：1
> 
> 时间：2012-09-16T12:47:53.933
> 
> 标签：c, algorithm, permutation

`n`我需要为所有可能的文档排名生成可能的排名。我知道数组的排列`{1, 2,..., n}`会给我所有可能的排名。我的问题有点复杂，因为每个文档都可能采用两种可能类型中的一种。因此，总共有 n!*2 ^(n 个)可能的排名。

例如，假设我有 3 个文档 a、b 和 c。那么可能的排名如下：

```
a1 b1 c1
a1 b1 c2
a1 b2 c1
a1 b2 c2
a2 b1 c1
a2 b1 c2
a2 b2 c1
a2 b2 c2
a1 c1 b1
a1 c1 b2
a1 c2 b1
a1 c2 b2
a2 c1 b1
a2 c1 b2
a2 c2 b1
a2 c2 b2
b1 a1 c1
b1 a1 c2
b1 a2 c1
b1 a2 c2
b2 a1 c1
b2 a1 c2
... 
```

生成此类排名的优雅方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T13:11:24.143

它是 B={a,b, ...} 的排列和 T{1,2} 的 k 组合之间的一种叉积，其中 k 是 B 中元素的数量。假设我们从 Perm 中取 ap (B)，例如 p=(b,c,a) 和来自 3-Comb(T) 的 ac，例如 c=(2,1,1) 然后我们将 p 和 c 合并到 (b2,c1,a1)。
我真的不知道它是否优雅，但我会选择一种算法来顺序生成 B 的排列（参见[TAOCP 第 4 卷 2b](http://www-cs-faculty.stanford.edu/~uno/taocp.html)），并且对于每个排列应用上述“产品”以及顺序生成的所有 k 组合（或如果 k 很小，则存储在一个数组中）（[参见 TAOCP 第 4 卷分册 3a](http://www-cs-faculty.stanford.edu/~uno/taocp.html)）。

```
B={a,b,c, ... }
T={1,2}
k=length(B)

reset_perm(B)
do
  p = next_perm(B)
  reset_comb(T,k)
  do
    c = next_kcomb(T,k)
    output product(p,c)
  while not last_kcomb(T,k)
while not last_perm(B) 
```

# mysql - 如果我尝试在 phpmyadmin 中上传音频文件，它会显示 #2006 错误，应该提到什么数据类型

> ID：12446989
> 
> 赞同：0
> 
> 时间：2012-09-16T12:50:36.637
> 
> 标签：mysql, database, audio, phpmyadmin, xampp

如果我尝试在 phpmyadmin 中上传音频文件，它会显示 #2006 错误，并且数据类型应该提到 SQL 查询：编辑

```
INSERT INTO `b7_11386777_test`.`wish` (`pinNo`, `audio`) VALUES 
('1', SOUNDEX(0x52494646b89d430057415645666d74201000000001000100401f0000803e00000200100064617461949d43000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000[...] 
```

MySQL 说：

> 2006 - MySQL 服务器已经消失

我将在 mysql 数据库中插入一个音频文件。进入它需要哪些参数，以及用于将音频文件插入 mysql 数据库的数据类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:53:36.900

[`SOUNDEX()`](http://dev.mysql.com/doc/en/string-functions.html#function_soundex)用于匹配具有相似语音的字符串（文本）。如果`audio`是 type [`BLOB`](http://dev.mysql.com/doc/en/blob.html)，您只需`SOUNDEX()`要从值周围删除：

```
INSERT INTO b7_11386777_test.wish (pinNo, audio) VALUES ('1', 0x52494646b8...); 
```

但是，您确实*应该*将文件存储在文件系统中并在数据库中记录文件的路径。

# iphone - 如何检测 iPhone 5（宽屏设备）？

> ID：12446990
> 
> 赞同：302
> 
> 时间：2012-09-16T12:50:37.957
> 
> 标签：iphone, ios, objective-c, screen, device

我刚刚升级到 Xcode 4.5 GM，发现您现在可以将 '4" Retina' 尺寸应用到情节提要中的视图控制器。

现在，如果我想创建一个在 iPhone 4 和 5 上运行的应用程序，当然我必须构建每个窗口两次，但我还必须检测用户是否拥有 3.5" 或 4" 屏幕的 iPhone，然后应用看法。

我该怎么做？

* * *

## 回答 #1

> 赞同：468
> 
> 时间：2012-09-16T13:08:38.907

首先，您不应该重建所有视图以适应新屏幕，也不应该为不同的屏幕尺寸使用不同的视图。

使用 iOS 的**自动调整大小**功能，您的视图可以调整和适应任何屏幕尺寸。

这不是很难，请阅读[一些](https://developer.apple.com/library/archive/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingViews/CreatingViews.html)有关此的文档。它将为您节省大量时间。

iOS 6 还为此提供了新功能。
请务必阅读Apple Developer 网站上的[iOS 6 API 更改日志。](https://developer.apple.com/library/archive/releasenotes/General/iOS60APIDiffs/)
并检查新的 iOS 6 [**AutoLayout**](https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/AutolayoutPG/)功能。

也就是说，如果你真的需要检测 iPhone 5，你可以简单地依靠[屏幕大小](https://developer.apple.com/documentation/uikit/uiscreen)。

```
[ [ UIScreen mainScreen ] bounds ].size.height 
```

iPhone 5 的屏幕高度为 568。
你可以想象一个宏来简化这一切：

```
#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON ) 
```

`fabs`正如 H2CO3 在评论中指出的那样，在比较浮点时，使用epsilon 是为了防止精度错误。

因此，从现在开始，您可以在标准 if/else 语句中使用它：

```
if( IS_IPHONE_5 )
{}
else
{} 
```

**编辑 - 更好的检测**

正如某些人所说，这仅**检测到宽屏**，而不是实际的 iPhone 5。

下一个版本的 iPod touch 可能也会有这样的屏幕，所以我们可能会使用另一组宏。

让我们重命名原始宏`IS_WIDESCREEN`：

```
#define IS_WIDESCREEN ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON ) 
```

让我们添加模型检测宏：

```
#define IS_IPHONE ( [ [ [ UIDevice currentDevice ] model ] isEqualToString: @"iPhone" ] )
#define IS_IPOD   ( [ [ [ UIDevice currentDevice ] model ] isEqualToString: @"iPod touch" ] ) 
```

这样，我们可以确保我们有一个 iPhone 型号**和**一个宽屏，我们可以重新定义`IS_IPHONE_5`宏：

```
#define IS_IPHONE_5 ( IS_IPHONE && IS_WIDESCREEN ) 
```

另请注意，正如@LearnCocos2D 所述，如果应用程序未针对 iPhone 5 屏幕进行优化（缺少 Default-568h@2x.png 图像），则此宏将不起作用，因为在这种情况下屏幕尺寸仍为 320x480一个案例。

我不认为这可能是一个问题，因为我不明白我们为什么要在未优化的应用程序中检测 iPhone 5。

**重要 - iOS 8 支持**

在 iOS 8 上，该类的`bounds`属性`UIScreen`现在反映了**设备方向**。
很明显，前面的代码不能开箱即用。

为了解决这个问题，您可以简单地使用新`nativeBounds`属性，而不是`bounds`，因为它不会随着方向而改变，并且它基于纵向模式。
请注意，尺寸`nativeBounds`以像素为单位，因此对于 iPhone 5，高度将是**1136**而不是 568。

如果您还针对 iOS 7 或更低版本，请务必使用功能检测，因为`nativeBounds`在 iOS 8 之前调用会导致您的应用崩溃：

```
if( [ [ UIScreen mainScreen ] respondsToSelector: @selector( nativeBounds ) ] )
{
    /* Detect using nativeBounds - iOS 8 and greater */
}
else
{
    /* Detect using bounds - iOS 7 and lower */
} 
```

您可以通过以下方式调整以前的宏：

```
#define IS_WIDESCREEN_IOS7 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON )
#define IS_WIDESCREEN_IOS8 ( fabs( ( double )[ [ UIScreen mainScreen ] nativeBounds ].size.height - ( double )1136 ) < DBL_EPSILON )
#define IS_WIDESCREEN      ( ( [ [ UIScreen mainScreen ] respondsToSelector: @selector( nativeBounds ) ] ) ? IS_WIDESCREEN_IOS8 : IS_WIDESCREEN_IOS7 ) 
```

显然，如果您需要检测 iPhone 6 或 6 Plus，请使用相应的屏幕尺寸。

* * *

## 回答 #2

> 赞同：232
> 
> 时间：2012-10-31T11:01:17.983

针对 SDK 和操作系统的任意组合进行测试和设计：

## 迅速

**添加了 iPad 类型。iPad 2 和 iPad mini 是非视网膜 iPad。而 iPad Mini 2 及更高版本、iPad 3、4、iPad Air、Air 2、Air 3 和 iPad Pro 9.7 的逻辑分辨率相同，均为 1024。iPad Pro 的 maxLength 为 1366。** [参考](http://iosres.com/)

```
import UIKit

public enum DisplayType {
    case unknown
    case iphone4
    case iphone5
    case iphone6
    case iphone6plus
    case iPadNonRetina
    case iPad
    case iPadProBig
    static let iphone7 = iphone6
    static let iphone7plus = iphone6plus
}

public final class Display {
    class var width:CGFloat { return UIScreen.main.bounds.size.width }
    class var height:CGFloat { return UIScreen.main.bounds.size.height }
    class var maxLength:CGFloat { return max(width, height) }
    class var minLength:CGFloat { return min(width, height) }
    class var zoomed:Bool { return UIScreen.main.nativeScale >= UIScreen.main.scale }
    class var retina:Bool { return UIScreen.main.scale >= 2.0 }
    class var phone:Bool { return UIDevice.current.userInterfaceIdiom == .phone }
    class var pad:Bool { return UIDevice.current.userInterfaceIdiom == .pad }
    class var carplay:Bool { return UIDevice.current.userInterfaceIdiom == .carPlay }
    class var tv:Bool { return UIDevice.current.userInterfaceIdiom == .tv }
    class var typeIsLike:DisplayType {
        if phone && maxLength < 568 {
            return .iphone4
        }
        else if phone && maxLength == 568 {
                return .iphone5
        }
        else if phone && maxLength == 667 {
            return .iphone6
        }
        else if phone && maxLength == 736 {
            return .iphone6plus
        }
        else if pad && !retina {
            return .iPadNonRetina
        }
        else if pad && retina && maxLength == 1024 {
            return .iPad
        }
        else if pad && maxLength == 1366 {
            return .iPadProBig
        }
        return .unknown
    }
} 
```

在行动中查看它 [https://gist.github.com/hfossli/bc93d924649de881ee2882457f14e346](https://gist.github.com/hfossli/bc93d924649de881ee2882457f14e346)

注意：如果 iPhone 6 处于缩放模式，则 UI 是 iPhone 5 的放大版本。这些功能不是确定设备类型，而是显示模式，因此 iPhone 5 是本示例中所需的结果。

## Objective-C

```
#define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
#define IS_IPHONE (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
#define IS_RETINA ([[UIScreen mainScreen] scale] >= 2.0)

#define SCREEN_WIDTH ([[UIScreen mainScreen] bounds].size.width)
#define SCREEN_HEIGHT ([[UIScreen mainScreen] bounds].size.height)
#define SCREEN_MAX_LENGTH (MAX(SCREEN_WIDTH, SCREEN_HEIGHT))
#define SCREEN_MIN_LENGTH (MIN(SCREEN_WIDTH, SCREEN_HEIGHT))
#define IS_ZOOMED (IS_IPHONE && SCREEN_MAX_LENGTH == 736.0)

#define IS_IPHONE_4_OR_LESS (IS_IPHONE && SCREEN_MAX_LENGTH < 568.0)
#define IS_IPHONE_5 (IS_IPHONE && SCREEN_MAX_LENGTH == 568.0)
#define IS_IPHONE_6 (IS_IPHONE && SCREEN_MAX_LENGTH == 667.0)
#define IS_IPHONE_6P (IS_IPHONE && SCREEN_MAX_LENGTH == 736.0) 
```

用法： http: [//pastie.org/9687735](http://pastie.org/9687735)

注意：如果 iPhone 6 处于缩放模式，则 UI 是 iPhone 5 的放大版本。这些功能不是确定设备类型，而是显示模式，因此 iPhone 5 是本示例中所需的结果。

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2012-09-25T17:20:28.550

非常简单的解决方案

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 480)
    {
        // iPhone Classic
    }
    if(result.height == 568)
    {
        // iPhone 5
    }
} 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2014-09-24T13:07:12.643

我们现在需要考虑 iPhone 6 和 6Plus 的屏幕尺寸。这是一个更新的答案

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    //its iPhone. Find out which one?

    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 480)
    {
        // iPhone Classic
    }
    else if(result.height == 568)
    {
        // iPhone 5
    }
    else if(result.height == 667)
    {
        // iPhone 6
    }
   else if(result.height == 736)
    {
        // iPhone 6 Plus
    }
}
else
{
     //its iPad
} 
```

一些有用的信息

```
iPhone 6 Plus   736x414 points  2208x1242 pixels    3x scale    1920x1080 physical pixels   401 physical ppi    5.5"
iPhone 6        667x375 points  1334x750 pixels     2x scale    1334x750 physical pixels    326 physical ppi    4.7"
iPhone 5        568x320 points  1136x640 pixels     2x scale    1136x640 physical pixels    326 physical ppi    4.0"
iPhone 4        480x320 points  960x640 pixels      2x scale    960x640 physical pixels     326 physical ppi    3.5"
iPhone 3GS      480x320 points  480x320 pixels      1x scale    480x320 physical pixels     163 physical ppi    3.5" 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-09-21T14:00:29.060

我冒昧地将 Macmade 的宏放入 C 函数中，并正确命名它，因为它检测**宽屏可用性**，*不一定*是 iPhone 5。

如果项目不包含**Default-568h@2x.png** ，宏也不会检测到在 iPhone 5 上运行。如果没有新的默认图像，iPhone 5 将报告常规的 480x320 屏幕尺寸（以磅为单位）。因此，检查不仅针对宽屏可用性，还针对**启用的宽屏模式**。

```
BOOL isWidescreenEnabled()
{
    return (BOOL)(fabs((double)[UIScreen mainScreen].bounds.size.height - 
                                               (double)568) < DBL_EPSILON);
} 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-10-07T07:18:21.900

这是我们的代码，**在 ios7/ios8 上通过了 iphone4、iphone5、ipad、iphone6、iphone6p 的测试，无论是在设备还是模拟器上：**

```
#define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
#define IS_IPHONE (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) // iPhone and       iPod touch style UI

#define IS_IPHONE_5_IOS7 (IS_IPHONE && [[UIScreen mainScreen] bounds].size.height == 568.0f)
#define IS_IPHONE_6_IOS7 (IS_IPHONE && [[UIScreen mainScreen] bounds].size.height == 667.0f)
#define IS_IPHONE_6P_IOS7 (IS_IPHONE && [[UIScreen mainScreen] bounds].size.height == 736.0f)
#define IS_IPHONE_4_AND_OLDER_IOS7 (IS_IPHONE && [[UIScreen mainScreen] bounds].size.height < 568.0f)

#define IS_IPHONE_5_IOS8 (IS_IPHONE && ([[UIScreen mainScreen] nativeBounds].size.height/[[UIScreen mainScreen] nativeScale]) == 568.0f)
#define IS_IPHONE_6_IOS8 (IS_IPHONE && ([[UIScreen mainScreen] nativeBounds].size.height/[[UIScreen mainScreen] nativeScale]) == 667.0f)
#define IS_IPHONE_6P_IOS8 (IS_IPHONE && ([[UIScreen mainScreen] nativeBounds].size.height/[[UIScreen mainScreen] nativeScale]) == 736.0f)
#define IS_IPHONE_4_AND_OLDER_IOS8 (IS_IPHONE && ([[UIScreen mainScreen] nativeBounds].size.height/[[UIScreen mainScreen] nativeScale]) < 568.0f)

#define IS_IPHONE_5 ( ( [ [ UIScreen mainScreen ] respondsToSelector: @selector( nativeBounds ) ] ) ? IS_IPHONE_5_IOS8 : IS_IPHONE_5_IOS7 )
#define IS_IPHONE_6 ( ( [ [ UIScreen mainScreen ] respondsToSelector: @selector( nativeBounds ) ] ) ? IS_IPHONE_6_IOS8 : IS_IPHONE_6_IOS7 )
#define IS_IPHONE_6P ( ( [ [ UIScreen mainScreen ] respondsToSelector: @selector( nativeBounds ) ] ) ? IS_IPHONE_6P_IOS8 : IS_IPHONE_6P_IOS7 )
#define IS_IPHONE_4_AND_OLDER ( ( [ [ UIScreen mainScreen ] respondsToSelector: @selector( nativeBounds ) ] ) ? IS_IPHONE_4_AND_OLDER_IOS8 : IS_IPHONE_4_AND_OLDER_IOS7 ) 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-01-05T21:20:14.840

我使用了 hfossli 的答案并将其翻译成 Swift

```
let IS_IPAD = UIDevice.currentDevice().userInterfaceIdiom == .Pad
let IS_IPHONE = UIDevice.currentDevice().userInterfaceIdiom == .Phone
let IS_RETINA = UIScreen.mainScreen().scale >= 2.0

let SCREEN_WIDTH = UIScreen.mainScreen().bounds.size.width
let SCREEN_HEIGHT = UIScreen.mainScreen().bounds.size.height
let SCREEN_MAX_LENGTH = max(SCREEN_WIDTH, SCREEN_HEIGHT)
let SCREEN_MIN_LENGTH = min(SCREEN_WIDTH, SCREEN_HEIGHT)

let IS_IPHONE_4_OR_LESS = (IS_IPHONE && SCREEN_MAX_LENGTH < 568.0)
let IS_IPHONE_5 = (IS_IPHONE && SCREEN_MAX_LENGTH == 568.0)
let IS_IPHONE_6 = (IS_IPHONE && SCREEN_MAX_LENGTH == 667.0)
let IS_IPHONE_6P = (IS_IPHONE && SCREEN_MAX_LENGTH == 736.0) 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-09-29T04:32:27.830

这是我的 cocos2d 项目的宏。其他应用程序应该是一样的。

```
#define WIDTH_IPAD 1024
#define WIDTH_IPHONE_5 568
#define WIDTH_IPHONE_4 480
#define HEIGHT_IPAD 768
#define HEIGHT_IPHONE 320

#define IS_IPHONE (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
#define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)

//width is height!
#define IS_IPHONE_5 ( [ [ UIScreen mainScreen ] bounds ].size.height == WIDTH_IPHONE_5 )
#define IS_IPHONE_4 ( [ [ UIScreen mainScreen ] bounds ].size.height == WIDTH_IPHONE_4 )

#define cp_ph4(__X__, __Y__) ccp(cx_ph4(__X__), cy_ph4(__Y__))
#define cx_ph4(__X__) (IS_IPAD ? (__X__ * WIDTH_IPAD / WIDTH_IPHONE_4) : (IS_IPHONE_5 ? (__X__ * WIDTH_IPHONE_5 / WIDTH_IPHONE_4) : (__X__)))
#define cy_ph4(__Y__) (IS_IPAD ? (__Y__ * HEIGHT_IPAD / HEIGHT_IPHONE) : (__Y__))

#define cp_pad(__X__, __Y__) ccp(cx_pad(__X__), cy_pad(__Y__))
#define cx_pad(__X__) (IS_IPAD ? (__X__) : (IS_IPHONE_5 ? (__X__ * WIDTH_IPHONE_5 / WIDTH_IPAD) : (__X__ * WIDTH_IPHONE_4 / WIDTH_IPAD)))
#define cy_pad(__Y__) (IS_IPAD ? (__Y__) : (__Y__ * HEIGHT_IPHONE / HEIGHT_IPAD)) 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-09-12T12:03:22.493

```
if ((int)[[UIScreen mainScreen] bounds].size.height == 568)
{
    // This is iPhone 5 screen
} else {
    // This is iPhone 4 screen
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-05-22T15:37:56.067

在 Swift，iOS 8+ 项目中，我喜欢在 上进行扩展`UIScreen`，例如：

```
extension UIScreen {

    var isPhone4: Bool {
        return self.nativeBounds.size.height == 960;
    }

    var isPhone5: Bool {
        return self.nativeBounds.size.height == 1136;
    }

    var isPhone6: Bool {
        return self.nativeBounds.size.height == 1334;
    }

    var isPhone6Plus: Bool {
        return self.nativeBounds.size.height == 2208;
    }

} 
```

（注意：`nativeBounds`以像素为单位）。

然后代码将如下所示：

```
if UIScreen.mainScreen().isPhone4 {
    // do smth on the smallest screen
} 
```

所以代码清楚地表明这是对主屏幕的检查，而不是对设备型号的检查。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-10-10T23:25:50.010

借用 Samrat Mazumdar 的回答，这是一种估算设备屏幕尺寸的简短方法。它适用于最新的设备，但可能会在未来的设备上失败（就像所有猜测方法一样）。如果设备被镜像也会混淆（返回设备的屏幕大小，而不是镜像的屏幕大小）

```
#define SCREEN_SIZE_IPHONE_CLASSIC 3.5
#define SCREEN_SIZE_IPHONE_TALL 4.0
#define SCREEN_SIZE_IPAD_CLASSIC 9.7

+ (CGFloat)screenPhysicalSize
{
    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        CGSize result = [[UIScreen mainScreen] bounds].size;
        if (result.height < 500)
            return SCREEN_SIZE_IPHONE_CLASSIC;  // iPhone 4S / 4th Gen iPod Touch or earlier
        else
            return SCREEN_SIZE_IPHONE_TALL;  // iPhone 5
    }
    else
    {
        return SCREEN_SIZE_IPAD_CLASSIC; // iPad
    }
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-02-08T10:38:10.130

我认为如果这个宏可以在设备和模拟器中工作应该很好，下面是解决方案。

```
#define IS_WIDESCREEN (fabs((double)[[UIScreen mainScreen]bounds].size.height - (double)568) < DBL_EPSILON)
#define IS_IPHONE (([[[UIDevice currentDevice] model] isEqualToString:@"iPhone"]) || ([[[UIDevice currentDevice] model] isEqualToString: @"iPhone Simulator"]))
#define IS_IPOD   ([[[UIDevice currentDevice]model] isEqualToString:@"iPod touch"])
#define IS_IPHONE_5 ((IS_IPHONE || IS_IPOD) && IS_WIDESCREEN) 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-11-07T21:39:48.950

我发现答案不包括模拟器的特殊情况。

```
#define IS_WIDESCREEN ( [ [ UIScreen mainScreen ] bounds ].size.height == 568  )
#define IS_IPHONE ([[ [ UIDevice currentDevice ] model ] rangeOfString:@"iPhone"].location != NSNotFound)
#define IS_IPAD ([[ [ UIDevice currentDevice ] model ] rangeOfString:@"iPad"].location != NSNotFound)
#define IS_IPHONE_5 ( IS_IPHONE && IS_WIDESCREEN ) 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2014-05-19T14:41:52.237

```
+(BOOL)isDeviceiPhone5
{
    BOOL iPhone5 = FALSE;

    CGRect screenBounds = [[UIScreen mainScreen] bounds];
    if (screenBounds.size.height == 568)
    {
        // code for 4-inch screen
        iPhone5 = TRUE;
    }
    else
    {
        iPhone5 = FALSE;
        // code for 3.5-inch screen
    }
    return iPhone5;

} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2016-11-03T03:06:39.333

这个问题已经回答了一百次，但是这个解决方案对我来说效果最好，并且在引入新设备并且我没有定义尺寸时帮助解决了这个问题。

斯威夫特 5 助手：

```
extension UIScreen {
    func phoneSizeInInches() -> CGFloat {
        switch (self.nativeBounds.size.height) {
        case 960, 480:
            return 3.5  //iPhone 4
        case 1136:
            return 4    //iPhone 5
        case 1334:
            return 4.7  //iPhone 6
        case 2208:
            return 5.5  //iPhone 6 Plus
        case 2436:
            return 5.8  //iPhone X
        case 1792:
            return 6.1  //iPhone XR
        case 2688:
            return 6.5  //iPhone XS Max
        default:
            let scale = self.scale
            let ppi = scale * 163
            let width = self.bounds.size.width * scale
            let height = self.bounds.size.height * scale
            let horizontal = width / ppi, vertical = height / ppi
            let diagonal = sqrt(pow(horizontal, 2) + pow(vertical, 2))
            return diagonal
        }
    }
} 
```

这是因为记住手机的英寸尺寸很容易，例如“5.5 英寸”或“4.7 英寸”设备，但很难记住确切的像素尺寸。

```
if UIScreen.main.phoneSizeInInches() == 4 {
  //do something with only 4 inch iPhones
} 
```

这也让你有机会做这样的事情：

```
if UIScreen.main.phoneSizeInInches() < 5.5 {
  //do something on all iPhones smaller than the plus
} 
```

**默认值：**尝试使用屏幕尺寸和比例来尝试计算对角线英寸。这是为了万一出现一些新的设备尺寸，它会尽力确定和代码，如最后一个例子，应该仍然有效。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2012-12-11T05:39:06.253

```
CGFloat height = [UIScreen mainScreen].bounds.size.height;

NSLog(@"screen soze is %f",height);

  if (height>550) {

          // 4" screen-do some thing
     }

  else if (height<500) {

        // 3.5 " screen- do some thing

     } 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2013-02-28T23:03:46.500

依赖大小在很多层面都是错误的。我们问系统怎么样？

```
- (NSString *) getDeviceModel
{
    struct utsname systemInfo;
    uname(&systemInfo);
    return [NSString stringWithCString:systemInfo.machine encoding:NSUTF8StringEncoding];
} 
```

取自[检测硬件类型的最佳方法，iPhone4 还是 iPhone5？](https://stackoverflow.com/questions/13046338/best-way-to-detect-hardware-type-iphone4-or-iphone5), edzio27 回答。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-04-10T07:17:54.827

这样您就可以检测设备系列。

```
 #import <sys/utsname.h>
    NSString* deviceName()
    {
        struct utsname systemInformation;
        uname(&systemInformation);
        NSString *result = [NSString stringWithCString:systemInformation.machine
                                              encoding:NSUTF8StringEncoding];
        return result;
    }

    #define isIPhone5  [deviceName() rangeOfString:@"iPhone5,"].location != NSNotFound
    #define isIPhone5S [deviceName() rangeOfString:@"iPhone6,"].location != NSNotFound 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2014-09-28T17:24:27.613

**如果项目是使用 Xcode 6 创建的，则使用下面提到的代码来检测设备。**

```
printf("\nDetected Resolution : %d x %d\n\n",(int)[[UIScreen mainScreen] nativeBounds].size.width,(int)[[UIScreen mainScreen] nativeBounds].size.height);

if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
    if ([[UIScreen mainScreen] respondsToSelector: @selector(scale)])
    {
        if([[UIScreen mainScreen] nativeBounds].size.height == 960 || [[UIScreen mainScreen] nativeBounds].size.height == 480){
            printf("Device Type : iPhone 4,4s ");

        }else if([[UIScreen mainScreen] nativeBounds].size.height == 1136){
            printf("Device Type : iPhone 5,5S/iPod 5 ");

        }else if([[UIScreen mainScreen] nativeBounds].size.height == 1334){
            printf("Device Type : iPhone 6 ");

        }else if([[UIScreen mainScreen] nativeBounds].size.height == 2208){
            printf("Device Type : iPhone 6+ ");

        }
    }
}else{
    printf("Device Type : iPad");
} 
```

**如果项目是在 Xcode 5 中创建并在 Xcode 6 中打开的，则使用下面提到的代码来检测设备。（如果没有分配 iPhone 6,6+ 的启动图像，则此代码有效）**

```
printf("\nDetected Resolution : %d x %d\n\n",(int)[[UIScreen mainScreen] nativeBounds].size.width,(int)[[UIScreen mainScreen] nativeBounds].size.height);
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
    if ([[UIScreen mainScreen] respondsToSelector: @selector(scale)])
    {
       if([[UIScreen mainScreen] nativeBounds].size.height == 960 || [[UIScreen mainScreen] nativeBounds].size.height == 480){
            printf("Device Type : iPhone 4,4s");
            appType=1;
        }else if([[UIScreen mainScreen] nativeBounds].size.height == 1136 || [[UIScreen mainScreen] nativeBounds].size.height == 1704){
            printf("Device Type : iPhone 5,5S,6,6S/iPod 5 ");
            appType=3;
        }
    }
}else{
    printf("Device Type : iPad");
    appType=2;
} 
```

**如果您仍然一起使用 Xcode 5，请使用以下代码检测设备（不会检测到 iPhone 6 和 6+）**

```
printf("\nDetected Resolution : %d x %d\n\n",(int)[[UIScreen mainScreen] bounds].size.width,(int)[[UIScreen mainScreen] bounds].size.height);
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
    if ([[UIScreen mainScreen] respondsToSelector: @selector(scale)])
    {
        CGSize result = [[UIScreen mainScreen] bounds].size;
        CGFloat scale = [UIScreen mainScreen].scale;
        result = CGSizeMake(result.width * scale, result.height * scale);
        if(result.height == 960 || result.height == 480){
            printf("Device Type : iPhone 4,4S ");

        }else if(result.height == 1136){
            printf("Device Type : iPhone 5s/iPod 5");

        }
    }
}else{
    printf("Device Type : iPad");

} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2015-10-27T02:13:47.257

1.  添加一个“新的 Swift 文件”->`AppDelegateEx.swift`

2.  添加扩展名`AppDelegate`

    ```
    import UIKit
    extension AppDelegate {
         class func isIPhone5 () -> Bool{
             return max(UIScreen.mainScreen().bounds.width, UIScreen.mainScreen().bounds.height) == 568.0
        }
        class func isIPhone6 () -> Bool {
            return max(UIScreen.mainScreen().bounds.width, UIScreen.mainScreen().bounds.height) == 667.0
        }
        class func isIPhone6Plus () -> Bool {
            return max(UIScreen.mainScreen().bounds.width, UIScreen.mainScreen().bounds.height) == 736.0
        }  
    } 
    ```

3.  用法：

    ```
     if AppDelegate.isIPhone5() {
            collectionViewTopConstraint.constant = 2
        }else if AppDelegate.isIPhone6() {
            collectionViewTopConstraint.constant = 20
        } 
    ```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2017-04-09T09:48:21.703

在 Swift 3 中，您可以使用我的简单类 KRDeviceType。

[https://github.com/ulian-onua/KRDeviceType](https://github.com/ulian-onua/KRDeviceType)

它有据可查并支持运算符 ==、>=、<=。

例如，要检测设备是否有 iPhone 6/6s/7 的边界，您可以使用下一个比较：

```
if KRDeviceType() == .iPhone6 {
// Perform appropiate operations
} 
```

要检测设备是否具有 iPhone 5/5S/SE 或更早版本 (iPhone 4s) 的边界，您可以使用下一个比较：

```
if KRDeviceType() <= .iPhone5 {   //iPhone 5/5s/SE of iPhone 4s
// Perform appropiate operations (for example, set up constraints for those old devices)
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2012-10-10T07:18:50.153

使用以下代码：

```
CGFloat screenScale = [[UIScreen mainScreen] scale];

CGRect screenBounds = [[UIScreen mainScreen] bounds]; 

CGSize screenSize = CGSizeMake(screenBounds.size.width * screenScale, screenBounds.size.height * screenScale); 

if (screenSize.height==1136.000000)
{ 
    // Here iPhone 5 View

    // Eg: Nextview~iPhone5.Xib
} else {
   // Previous Phones 

   // Eg : Nextview.xib
} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-04-13T12:58:25.920

这是设备的正确测试，不依赖于方向

```
- (BOOL)isIPhone5
{
    CGSize size = [[UIScreen mainScreen] bounds].size;
    if (MIN(size.width,size.height) == 320 && MAX(size.width,size.height == 568)) {
        return YES;
    }
    return NO;
} 
```

* * *

## 回答 #24

> 赞同：-2
> 
> 时间：2014-09-24T14:58:18.033

用于检测所有版本的 iPhone 和 iPad 设备。

```
#define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
#define IS_IPHONE (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
#define IS_IPHONE_5 (IS_IPHONE && [[UIScreen mainScreen] bounds].size.height == 568.0)
#define IS_IPHONE_6 (IS_IPHONE && [[UIScreen mainScreen] bounds].size.height == 667.0)
#define IS_IPHONE_6_PLUS (IS_IPHONE && [[UIScreen mainScreen] bounds].size.height == 736.0)
#define IS_RETINA ([[UIScreen mainScreen] scale] == 2.0) 
```

# mysql - SQL 查询 MATCH 不适用于选定的列

> ID：12446996
> 
> 赞同：-1
> 
> 时间：2012-09-16T12:51:44.120
> 
> 标签：mysql, sql, codeigniter, match

我有这个查询：

```
SELECT (
  *)
   ,
  MATCH(table1.tags,table1.title,table1.description) AGAINST ('".$keywords."' IN BOOLEAN MODE) AS ideas_score 
  FROM table1  JOIN table2 ON table1.id_user = table2.id  HAVING ideas_score > 0 
  ORDER BY ideas_score DESC; 
```

为什么如果我这样做它不起作用？

```
SELECT (
   table1.description,
 table1.title,
   table1.id,
   table1.id_user,
   table1.tags,
   table1.insert_datetime,
   table2.fb_id,
   table2.fb_aliasname,
   table2.firstname,
   table2.lastname)
   ,
  MATCH(table1.tags,table1.title,table1.description) AGAINST ('".$keywords."' IN BOOLEAN MODE) AS ideas_score 
  FROM table1  JOIN table2 ON table1.id_user = table2.id  HAVING ideas_score > 0 
  ORDER BY ideas_score DESC; 
```

我总是收到这个错误：

```
Error Number: 1241

Operand should contain 1 column(s) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-16T13:00:55.530

天哪，对不起，我刚刚注意到 SELECT 不需要`()`

# base-conversion - 小数位数组的基本转换

> ID：12446998
> 
> 赞同：0
> 
> 时间：2012-09-16T12:51:46.397
> 
> 标签：base-conversion

我正在尝试实现一种算法来将表示数字小数部分的数字的整数数组从一个基数转换为另一个基数。换句话说：

```
int[] input = {0, 0, 1, 0, 1}; // 0.00101 in base 2
int[] output = convertBase(input, 2, 10, 5); // convertBase(input, fromBase, toBase, precision)
output == {1, 5, 6, 2, 5}; // .15625 in base 10 
```

有一个建议的算法，其措辞如下：

> 对于（i < 精度 B）：
> 
> > 1.  保持进位，初始化为0。
> > 2.  从右到左
> >     
> >     > 一种。x = 将第 i 位乘以 baseB 并加上进位
> >     > b。新的第 i 个数字是 x % baseA
> >     > c。进位 = x / baseA
> >     
> >     
> > 3.  输出[i] = 进位

但是当我实现这个时，对于长于 3 位的数组，第二位总是偏离一点。对于上面的示例，它将返回`{1, 3, 6, 2, 5}`. 以 2为底的输入`{0, 1}`将以`{2, 5}`10 为底正确返回。

我认为我没有正确理解 2b。似乎您已经完成了输入数组中的第 i 个数字，替换它应该没关系？

这是我的代码：

```
public static int[] convertBase(int[] digits, int baseA,
                                int baseB, int precisionB) {
    if (baseA < 2 | baseB < 2 | precisionB < 1) {
        return null;
    }
    int[] input = digits.clone();
    int[] output = new int[precisionB];
    int carry = 0;
    int j;
    int x;

    for (int i = 1; i <= precisionB; i++) {
        j = precisionB - i;
        if (input[j] >= baseA | input[j] < 0) {
            return null;
        }
        x = (input[j] * baseB) + carry;
        input[j] = x % baseA;
        carry = x / baseA;
        output[j] = carry;
    }

    return output;
} 
```

这是来自[麻省理工学院的 6.005](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-005-elements-of-software-construction-fall-2011/)课程，问题集 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T13:34:34.720

我最终想通了。解决方案是您必须为输出的每个数字循环输入数组的所有数字。这是Java中的代码：

```
public static int[] convertBase(int[] digits, int baseA,
                                int baseB, int precisionB) {
    if (baseA < 2 | baseB < 2 | precisionB < 1) {
        return null;
    }
    int[] input = digits.clone();
    int[] output = new int[precisionB];
    int carry;
    int j;
    int x;

    for (int i = 1; i <= precisionB; i++) {
        carry = 0;
        for (int k = 0; k < input.length; k++) {
            j = input.length - 1 - k;
            if (input[j] >= baseA | input[j] < 0) {
                return null;
            }
            x = (input[j] * baseB) + carry;
            input[j] = x % baseA;
            carry = x / baseA;
        }
        output[i-1] = carry;
    }
    return output;
} 
```