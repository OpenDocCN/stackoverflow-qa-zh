# StackOverflow 问答 10055000-10055999

# mysql - 按两列分组

> ID：10055004
> 
> 赞同：2
> 
> 时间：2012-04-07T13:45:58.793
> 
> 标签：mysql, sql, group-by

数据库表包含目标动作。

```
 type      goal      assist
 goal      Johnny    James
 goal      Johnny    James
 goal      James     Bob 
```

使用*GROUP BY 目标时，辅助*它显示

```
 player    goals     assists
 Johnny    2         0
 Johnny    0         0
 James     1         0
 James     0         2
 Bob       0         0
 Bob       0         1 
```

但我需要它在一条线上显示球员的进球和助攻。干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:52:34.170

您可以这样做（尽管这可能不是最快的查询，具体取决于数据库和索引的大小！）：

```
SELECT players.player,
      -- Use correlated subselects to count goals / assists
      (SELECT COUNT(*) FROM actions WHERE goal = players.player) goals
      (SELECT COUNT(*) FROM actions WHERE assist = players.player) assists

-- Get all distinct players (UNION = DISTINCT, here). Of course, if you
-- have an actual players table, use that one instead!
FROM (
  SELECT goal player FROM actions UNION
  SELECT assist      FROM actions
) players 
```

根据您的问题，我不确定是否`type = goal`与您的查询相关...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:57:35.203

一种可能的解决方案是先取消旋转玩家姓名，然后使用旋转进行分组：

```
SELECT
  Player,
  COUNT(NULLIF(ScoreType, 'assist')) AS goals,
  COUNT(NULLIF(ScoreType, 'goal')) AS assists
FROM (
  SELECT
    CASE s.ScoreType WHEN 'goal' THEN goal ELSE assist END AS Player,
    s.ScoreType
  FROM GoalActions
  CROSS JOIN (
    SELECT 'goal' AS ScoreType
    UNION ALL SELECT 'assist'
  ) st
) s
GROUP BY
  Player 
```

反透视是通过对虚拟表的交叉连接来完成的，分组/透视是通过与 CASE 聚合的形式实现的。

# java - 如何在另一个图像上绘制图像？

> ID：10055005
> 
> 赞同：6
> 
> 时间：2012-04-07T13:46:07.137
> 
> 标签：java, swing, bufferedimage, paintcomponent, drawimage

我有一个关于随机城市交通网络模拟的 Java 项目，我设法找到了实现这个项目的方法，所以我将每个交叉路口分成一个基本上是扩展 JPanel 类（名为 Carrefour）的部分。 .一切都很好，直到我陷入如何绘制车辆并让它们通过道路为止。

所以我的问题是如何在另一个图像（道路）上绘制图像（车辆图像）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-07T14:31:07.987

另一种不需要扩展组件的方法。

![在此处输入图像描述](../Images/176b6688e02581cb647c578fc11f9f64.png)

```
import javax.swing.*;
import java.awt.*;
import java.awt.image.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

import java.util.Random;
import java.net.URL;
import javax.imageio.ImageIO;

public class ImageOnImage {

    ImageOnImage(final BufferedImage bg, BufferedImage fg) {
        final BufferedImage scaled = new BufferedImage(
            fg.getWidth()/2,fg.getHeight()/2,BufferedImage.TYPE_INT_RGB);
        Graphics g = scaled.getGraphics();
        g.drawImage(fg,0,0,scaled.getWidth(),scaled.getHeight(),null);
        g.dispose();

        final int xMax = bg.getWidth()-scaled.getWidth();
        final int yMax = bg.getHeight()-scaled.getHeight();

        final JLabel label = new JLabel(new ImageIcon(bg));

        ActionListener listener = new ActionListener() {

            Random random = new Random();

            public void actionPerformed(ActionEvent ae) {
                Graphics g = bg.getGraphics();
                int x = random.nextInt(xMax);
                int y = random.nextInt(yMax);

                g.drawImage( scaled, x, y, null );
                g.dispose();

                label.repaint();
            }
        };

        Timer timer = new Timer(1200, listener);
        timer.start();

        JOptionPane.showMessageDialog(null, label);
    }

    public static void main(String[] args) throws Exception {
        URL url1 = new URL("http://i.stack.imgur.com/lxthA.jpg");
        final BufferedImage image1 = ImageIO.read(url1);

        URL url2 = new URL("http://i.stack.imgur.com/OVOg3.jpg");
        final BufferedImage image2 = ImageIO.read(url2);

        //Create the frame on the event dispatching thread
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                new ImageOnImage(image2, image1);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-07T13:48:05.550

如果这是 Swing，则在 BufferedImage 中绘制背景图像。使用Graphic 的方法在JComponent（如JPanel）的paintComponent 方法中显示这个BufferedImage `drawImage(...)`，然后在同一个paintComponent 方法中在其上绘制变化的图像。不过不要忘记先调用该`super.paintComponent(...)`方法。

请注意，这个问题在这里和其他地方已经被问了很多次，正如您所期望的那样，您可以在这里通过一些搜索找到很多此类事情的示例。

**编辑**
你问：

> 谢谢，这就是我绘制第一个图像（道路）的方式

同样，您将为此创建一个 BufferedImage，可能使用`ImageIO.read(...)`. 然后，您将在 JPanel 的`paintComponent(Graphics g)`方法覆盖中使用`g.drawImage(...)`.

例如...

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.image.*;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.*;

@SuppressWarnings("serial")
public class IntersectionImagePanel extends JPanel {
   private static final String INTERSECTION_LINK = "http://www.weinerlawoffice.com/" +
        "accident-diagram.jpg";
   private BufferedImage intersectionImage;

   public IntersectionImagePanel() {
      URL imageUrl;
      try {
         imageUrl = new URL(INTERSECTION_LINK);
         intersectionImage = ImageIO.read(imageUrl );
      } catch (MalformedURLException e) {
         e.printStackTrace();
         System.exit(-1);
      } catch (IOException e) {
         e.printStackTrace();
         System.exit(-1);
      }
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      if (intersectionImage != null) {
         g.drawImage(intersectionImage, 0, 0, this);
      }
   }

   @Override
   public Dimension getPreferredSize() {
      if (intersectionImage != null) {
         int width = intersectionImage.getWidth();
         int height = intersectionImage.getHeight();
         return new Dimension(width , height );
      }
      return super.getPreferredSize();
   }

   private static void createAndShowGui() {
      IntersectionImagePanel mainPanel = new IntersectionImagePanel();

      JFrame frame = new JFrame("IntersectionImage");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# php - 如何从 rss 获取具有自定义名称的元素？

> ID：10055007
> 
> 赞同：1
> 
> 时间：2012-04-07T13:46:13.850
> 
> 标签：php, xml, rss

我有以下 rss 格式，我无法弹出“内容：编码”值。

```
<item>
    <title>some title</title>
    <link>some link</link>
    <pubDate>Sat, 07 Apr 2012 5:07:00 -0700</pubDate>
    <content:encoded><![CDATA[this value]]></content:encoded>
</item> 
```

我写了这个函数，除了'content：encoded'字段给我这个错误之外，一切都很好：'注意：试图获取非对象的属性'

```
function rssReader($url) {
  $doc = new DOMDocument();
  $doc->load($url);
  $fields = array('title', 'description', 'link', 'pubDate', 'content:encoded');
  $nodes = array();

  foreach ($doc->getElementsByTagName('item') as $node) {
    $item = array();
    var_export($node, true);
    foreach ($fields as $field)
      $item[$field] = $node->getElementsByTagName($field)->item(0)->nodeValue;
    $nodes[] = $item;
  }

  return $nodes;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:12:57.617

您需要使用[getElementsByTagNameNS](http://www.php.net/manual/en/domelement.getelementsbytagnamens.php)而不是`getElementsByTagName`for`'content:encoded'`标签：

```
foreach ($fields as $field){
  if( $field == 'content:encoded' ){
      $item[$field] = $node->getElementsByTagNameNS('contentNamespaceURI','encoded')->item(0)->nodeValue;
  }else{
      $item[$field] = $node->getElementsByTagName($field)->item(0)->nodeValue;
  }
} 
```

你可以`'contentNamespaceURI'`在`rss`. 必须有类似的东西：

```
 xmlns:content="contentNamespaceURI" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T05:25:58.020

**这里的标签名称是“编码的”。**

只需使用

```
$content => $node->getElementsByTagName('encoded')->item(0)->nodeValue 
```

# java - 如何将某个 S3 文件标记为公开

> ID：10055016
> 
> 赞同：10
> 
> 时间：2012-04-07T13:47:36.560
> 
> 标签：java, amazon-s3, amazon-web-services

如何通过 webservices API 将某个 S3 文件标记为 Make Public。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-09T15:53:30.003

使用方法`setCannedAcl(CannedAccessControlList.PublicRead)`更改访问控制权限。[在此处](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/PutObjectRequest.html#setCannedAcl%28com.amazonaws.services.s3.model.CannedAccessControlList%29)阅读 java 文档以获取详细信息

**示例代码：**

```
BasicAWSCredentials basicAWSCredentials = new BasicAWSCredentials(ACCESS_KEY,SECRET_KEY);   
AmazonS3 s3 = new AmazonS3Client(basicAWSCredentials);

PutObjectRequest putObj = new PutObjectRequest(bucketName, objectKey, fileToUpload);

// making the object Public
putObj.setCannedAcl(CannedAccessControlList.PublicRead);

s3.putObject(putObj); 
```

# python - Django forms.FileField 验证

> ID：10055029
> 
> 赞同：4
> 
> 时间：2012-04-07T13:49:10.163
> 
> 标签：python, django, forms, validation

我在表单中使用文件字段和文本字段

```
class SolutionForm(forms.Form):
    text = forms.CharField(widget=forms.Textarea, required=False)
    file  = forms.FileField(required=False) 
```

我还定义了一个干净的方法：

```
def clean(self,*args, **kwargs):
    if (not self.data['file'] or self.data['text']):
         raise forms.ValidationError('Please enter your code in text box or upload an arrpopriate file.')
return self.data['text'] 
```

但是在提交表单时出现以下错误：

```
"Key 'file' not found in <QueryDict: {u'text': [u''], u'csrfmiddlewaretoken': [u'c52ea10c16620d3ebf0a20f015a3711d'], u'version': [u'C 1.1.1']}>" 
```

如何引用文件字段？

任何帮助，将不胜感激。

谢谢，

潘卡伊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:09:23.293

```
# inside SolutionForm class
def clean(self):
    if not (self.cleaned_data['file'] or self.cleaned_data['text']):
        raise forms.ValidationError('Please enter your code in text box or upload an appropriate file.')
    return self.cleaned_data 
```

# java - java比较两个Pattern对象

> ID：10055034
> 
> 赞同：10
> 
> 时间：2012-04-07T13:49:36.223
> 
> 标签：java, regex

有没有一种简单的方法来比较两个`Pattern`对象？

我有一个`Pattern`使用正则表达式编译`"//"`的代码来检查代码中的注释。

由于有几个正则表达式来描述评论，我想找到一种方法来区分它们。

如何做呢？该类`Pattern`不实现该`equals`方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T15:25:47.963

您可以`Pattern`通过比较调用的结果来比较对象，`pattern()`但这`toString`并不能满足您的要求（如果我正确理解您的问题）。具体来说，这会比较传递给`Pattern.compile(...)`工厂方法的字符串。但是，这没有考虑单独传递给模式字符串的标志。

没有简单的方法来测试两个不同的正则表达式是否等价。例如`".+"`和`"..*"`表示等效的正则表达式，但没有直接的方法可以使用`Pattern`API 来确定这一点。

* * *

我不知道这个问题在*理论上*是否可以解决......在一般情况下。 [@Akim](https://stackoverflow.com/users/1353549/akim)评论：

> 正则表达式等价没有有限的公理化，所以简短的回答是“这不是通过正则表达式本身的树转换来实现的”。但是，可以比较两个自动机的语言（测试它们的相等性），因此可以计算两个正则表达式是否等价。请注意，我指的是“真正的”正则表达式，没有诸如对捕获组的反向引用之类的扩展，它们逃脱了理性语言的领域，即自动机的领域。

* * *

我还想评论接受的答案。作者提供了一些他声称的代码*表明*Pattern 的`equals`方法是从`Object`. 事实上，他看到的输出与那个是*一致*的……但它并没有*显示*出来。

知道是否是这种情况的正确方法是查看 javadoc ...该`equals`方法在继承方法列表中列出。那是确定的。

那么为什么这个例子没有显示作者所说的内容呢？

1.  两种方法的行为方式可能相同，但实现方式不同。如果我们把这个`Pattern`类当作一个黑盒子，那么我们就不能证明这没有发生。（或者至少......不是不使用反射。）

2.  作者只在一个平台上运行过这个。其他平台的行为可能会有所不同。

`Pattern`关于第二点，我记得在（Java 1.4 中）的早期实现中，这些`Pattern.compile(...)`方法保留了最近编译的模式对象¹的缓存。如果你编译了两次特定的模式字符串，第二次你可能会得到与第一次返回的*对象相同的对象。*这将导致测试代码输出：

```
 true
  true
  true
  true 
```

但这说明了什么？它是否显示`Pattern`覆盖`Object.equals`？不！

*这里的教训是，您应该主要*通过查看 javadocs来了解 Java 库方法的行为方式：

*   如果您编写“黑匣子”测试，您可能会得出错误的结论……或者至少，得出的结论可能并非适用于所有平台。

*   如果您将结论建立在“阅读代码”的基础上，那么您就有可能得出对其他平台无效的结论。

* * *

^(1 - 即使我的记忆不正确，这样的实现也会与`Pattern.compile(...)`方法的 javadocs 一致。他们没有说每次`compile`调用都会返回一个新`Pattern`对象。)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T14:00:26.283

也许我对这个问题并不完全理解。但正如您在以下示例中所见，`java.lang.Object.equals(Object)`每个 Java 对象都有一个默认方法。此方法比较对对象的引用，即使用`==`运算符。

```
 package test;

import java.util.regex.Pattern;

public class Main {

  private static final Pattern P1 = Pattern.compile("//.*");
  private static final Pattern P2 = Pattern.compile("//.*");

  public static void main(String[] args) {
    System.out.println(P1.equals(P1));
    System.out.println(P1.equals(P2));
    System.out.println(P1.pattern().equals(P1.pattern()));
    System.out.println(P1.pattern().equals(P2.pattern()));
  }
} 

```

输出：

```
 true
false
true
true 

```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-17T17:42:38.443

由于神秘的原因，Pattern 对象没有实现 equals()。例如，这个简单的单元测试将失败：

```
 @Test
    public void testPatternEquals() {
        Pattern p1 = Pattern.compile("test");
        Pattern p2 = Pattern.compile("test");
        assertEquals(p1, p2); // fails!
    } 
```

最常见的解决方法似乎是比较 Pattern 对象的字符串表示形式（返回用于创建 Pattern 的字符串）：

```
 @Test
    public void testPatternEquals() {
        Pattern p1 = Pattern.compile("test");
        Pattern p2 = Pattern.compile("test");
        assertEquals(p1.toString(), p2.toString()); // succeeds!
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-07T13:55:18.743

`Pattern`不会，但`String`会。为什么不只比较`Pattern`编译 s 的正则表达式呢？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-07T03:11:18.527

我知道自动机可以解决你的问题。但这可能很复杂。粗略地说，您应该至少进行比较`pattern.pattern()`，`pattern.flags()`尽管仅仅决定两个正则表达式是否等效是不够的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-07T14:03:59.553

您可以比较已生成模式的字符串表示形式：

```
Pattern p1 = getPattern1();
Pattern p2 = getPattern2();
if (p1.pattern().equals(p2.pattern())){
    // your code here
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-12T17:01:44.800

我想我明白了这个问题，因为我搜索了比较`Pattern`s 的方法，所以我最终来到了这里（可能为时已晚两年，好吧，对不起......）。

我正在编写测试，我需要知道我的方法是否返回预期的模式。虽然通过`toString()`or的文本`pattern()`可能相同，但标志可能不同，并且使用该模式时的结果将是意想不到的。

不久前，我编写了自己的通用实现`toString()`。它收集包括这些字段在内的所有字段`private`，并构造一个可用于记录和显然用于测试的字符串。它显示了在编译两个相等的模式时字段`root`和`matchRoot`是不同的。假设这两个与平等无关，并且由于有一个 field `flag`，我的解决方案即使不完美也是相当不错的。

```
/**
 * Don't call this method from a <code>toString()</code> method with
 * <code>useExistingToString</code> set to <code>true</code>!!!
 */
public static String toString(Object object, boolean useExistingToString, String... ignoreFieldNames) {
  if (object == null) {
    return null;
  }

  Class<? extends Object> clazz = object.getClass();
  if (useExistingToString) {
    try {
      // avoid the default implementation Object.toString()
      Method methodToString = clazz.getMethod("toString");
      if (!methodToString.getDeclaringClass().isAssignableFrom(Object.class)) {
        return object.toString();
      }
    } catch (Exception e) {
    }
  }

  List<String> ignoreFieldNameList = Arrays.asList(ignoreFieldNames);
  Map<String, Object> fields = new HashMap<String, Object>();
  while (clazz != null) {
    for (Field field : clazz.getDeclaredFields()) {
      String fieldName = field.getName();
      if (ignoreFieldNameList.contains(fieldName) || fields.containsKey(fieldName)) {
        continue;
      }

      boolean accessible = field.isAccessible();
      if (!accessible) {
        field.setAccessible(true);
      }
      try {
        Object fieldValue = field.get(object);
        if (fieldValue instanceof String) {
          fieldValue = stringifyValue(fieldValue);
        }
        fields.put(fieldName, fieldValue);
      } catch (Exception e) {
        fields.put(fieldName, "-inaccessible- " + e.getMessage());
      }
      if (!accessible) {
        field.setAccessible(false);
      }
    }
    // travel upwards in the class hierarchy
    clazz = clazz.getSuperclass();
  }

  return object.getClass().getName() + ": " + fields;
}

public static String stringifyValue(Object value) {
  if (value == null) {
    return "null";
  }
  return "'" + value.toString() + "'";
} 
```

测试是绿色的：

```
String toString1 = Utility.toString(Pattern.compile("test", Pattern.CASE_INSENSITIVE), false, "root", "matchRoot");
String toString2 = Utility.toString(Pattern.compile("test", Pattern.CASE_INSENSITIVE), false, "root", "matchRoot");
assertEquals(toString1, toString2); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-09T22:27:23.857

要确定两个`Pattern`对象是否等价，最简单的做法是比较实际的字符串模式*和*用于创建该模式的标志：

```
boolean isPatternEqualToPattern(final Pattern p1, final Pattern p2) {
    return p1.flags() == p2.flags() &&
        p1.pattern().equals(p2.pattern());
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-06-07T09:12:02.750

尽管其他答案可能会解决问题，但我认为它们不是问题的真正答案。

如果你真的想比较两种模式，你基本上想**比较两种常规语言**。

为此，cs stackexchange 已经发布了解决方案： [https ://cs.stackexchange.com/questions/12876/equivalence-of-regular-expressions](https://cs.stackexchange.com/questions/12876/equivalence-of-regular-expressions)

一种快速检查正则语言等价性的方法是 Hopcroft 和 Karp 算法 (HK)。

这是该算法的java实现：http: [//algs4.cs.princeton.edu/65reductions/HopcroftKarp.java.html](http://algs4.cs.princeton.edu/65reductions/HopcroftKarp.java.html)

# c++ - 查找给定字符串中的所有重复子字符串

> ID：10055035
> 
> 赞同：14
> 
> 时间：2012-04-07T13:49:59.887
> 
> 标签：c++, string, algorithm

我最近遇到一个面试问题：要找到给定字符串中最小大小为 2 的所有重复子字符串。该算法应该是有效的。

下面给出了上述问题的代码，但它不是有效的。

```
#include <iostream>
#include <algorithm>
#include <iterator>
#include <set>
#include <string>

using namespace std;

int main()
{
    typedef string::const_iterator iterator;
    string s("ABCFABHYIFAB");
    set<string> found;

    if (2 < s.size())
        for (iterator i = s.begin() + 1, j = s.end(); i != j; ++i)
            for (iterator x = s.begin(); x != i; ++x)
            {
                iterator tmp = mismatch(i, j, x).second;;
                if (tmp - x > 1)
                    found.insert(string(x, tmp));
            }

            copy(found.begin(), found.end(),ostream_iterator<string>(cout, "\n"));
} 
```

我的问题是，是否有任何数据结构可以以 O(N) 的时间复杂度实现上述问题？

如果您的答案是后缀树或散列，请详细说明。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T14:36:53.953

如果您分析 string 的输出`"AAAAAAAAAAAAAA"`，则其中有 O(n²) 个字符，因此该算法至少为 O(n²)。

要实现 O(n²)，只需为 s 的每个后缀构建[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)（索引 [1..n]、[2..n]、[3..n]、...、[n..n] ）。如果其中一个字符串没有自己的结束节点并不重要，只需计算每个节点的使用频率即可。

最后，遍历 count>1 的每个节点并打印其路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T14:33:48.877

这只是一个疯狂的想法，但值得一试（但是，它消耗 O(N) 内存，其中 N 是主字符串的长度）。该算法不是 O(N)，但也许可以优化。

这个想法是，您不想经常进行字符串比较。您可以收集读取数据的哈希值（例如读取字符的 ASCII 码总和）并比较哈希值。如果哈希值相等，则字符串*可能*相等（必须稍后检查）。例如：

```
ABCAB

A -> (65)
B -> (131, 66)
C -> (198, 133, 67)
A -> (263, 198, 132, 65)
B -> (329, 264, 198, 131, 66) 
```

因为您只对 2+ 长度值感兴趣，所以您必须省略最后一个值（因为它始终对应于单个字符）。

我们看到两个相等的值：131 和 198。131 代表 AB 并显示货币对，但是 198 代表 ABC 和 BCA，必须通过手动检查来拒绝。

这只是想法，而不是解决方案本身。散列函数可以扩展为考虑字符在子串（或序列结构）中的位置。可以更改哈希值的存储方法以提高性能（但是以增加内存使用为代价）。

希望我能帮上一点忙：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T10:16:23.150

我不知道后缀树如何获取所有重复的子字符串，字符串“mississippi”构建后缀树如下：

对不起，我明白了。“最后，遍历 count>1 的每个节点并打印其路径。” “count”是这个子节点的数量

```
tree-->|---mississippi               m..mississippi
       |
       |---i-->|---ssi-->|---ssippi   i .. ississippi
       |       |         |
       |       |         |---ppi      issip,issipp,issippi
       |       |
       |       |---ppi                ip, ipp, ippi
       |
       |---s-->|---si-->|---ssippi    s .. ssissippi
       |       |        |
       |       |        |---ppi       ssip, ssipp, ssippi
       |       |
       |       |---i-->|---ssippi     si .. sissippi
       |               |
       |               |---ppi        sip, sipp, sippi
       |
       |---p-->|---pi                 p, pp, ppi
               |
               |---i                  p, pi

--- Suffix Tree for "mississippi" --- 
```

# java - 为 java 类提供用户输入

> ID：10055037
> 
> 赞同：0
> 
> 时间：2012-04-07T13:50:28.040
> 
> 标签：java

我有以下课程：

```
class Area
{
    //Get User Input for classes
    int length;
    int width;

    public Area(int x,int y)
    {
        length = x;
        width = y;
    }

    public int getArea() {
        return width * length;
    }

    public static void main(String[] args) 
    {
        Area folk = new Area(4,5);
        System.out.println("Area of 4 * 5 is: " + folk.getArea());
    }
} 
```

我有另一个类用于获取用户输入：

```
import java.util.Scanner;

class Incoming
{
    public static void main(String[] args) 
    {
        Scanner reader = new Scanner(System.in);
        System.out.println("Enter the first number");
        //get user input for a
        int a = reader.nextInt();
        System.out.println("Input Value Is: " + a);
    }
} 
```

在第一堂课中，我希望用户提供输入而不是预定义的值（即`Area folk = new Area(4,5)`）

怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:55:03.113

看起来您正在寻找一种方法来使用`Incoming`程序中其他地方提供的输入。

为此，请移动代码以从`main`方法中获取输入。声明一个`Incoming`返回 an的新方法并将其`int`放在那里。

然后，在 的`main`方法中`Area`，创建 的实例`Incoming`并调用新的方法来获取`int`. 这样做两次，然后将结果值传递给`Area`构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T14:02:23.780

我不知道你为什么在你的两个课程中都有一个主要的。也许我误解了一些东西，但这会以你想要的方式解决它（我认为）。

```
class Area
{
    //Get User Input for classes
    int length;
    int width;

    public Area(int x,int y)
    {
        length = x;
        width = y;
    }

    public int getArea() {
        return width * length;
    }

    public static void main(String[] args) 
    {
        int x, y;
        Incoming inc = new Incoming();
        x = inc.getInt();
        y = inc.getInt();
        Area folk = new Area(x,y);
        System.out.println("Area of " + x + " * " + y + " is: "
                           + folk.getArea());
    }
} 
```

而另一类：

```
import java.util.Scanner;
class Incoming
{
    public static int getInt(String[] args) 
    {
        Scanner reader = new Scanner(System.in);
        System.out.println("Enter the first number");
        //get user input for a
        int a = reader.nextInt();
        return a;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T14:04:22.227

怎么样：

扫描仪阅读器 = 新扫描仪（System.in）；

区域民俗=新区域（reader.nextInt（），reader.nextInt（））；

system.out.println(folk.getArea());

# java - 需要有关 Android 动画的帮助

> ID：10055038
> 
> 赞同：0
> 
> 时间：2012-04-07T13:50:40.793
> 
> 标签：java, android, android-layout

我已经使用 AnimationDrawable 显示了六个图像。它被成功地动画化了。

但它只为同一个地方设置动画。

但是当下一帧显示时我需要继续前进。我该如何展示它。

我的代码是.,

```
<?xml version="1.0" encoding="utf-8"?><animation-list xmlns:android="http://schemas.android.com/apk/res/android"   android:oneshot="false">
<item android:drawable="@drawable/frog" android:duration="50" />
<item android:drawable="@drawable/frog1" android:duration="50" />
<item android:drawable="@drawable/frog2" android:duration="50" />
<item android:drawable="@drawable/frog3" android:duration="50" />
<item android:drawable="@drawable/frog4" android:duration="50" />
<item android:drawable="@drawable/frog5" android:duration="50" /> </animation-list> 

private void animate() {
        ImageView imgView = (ImageView) findViewById(R.id.animationImage);
        // imgView.setVisibility(ImageView.VISIBLE);
        imgView.setBackgroundResource(R.drawable.ani);

        AnimationDrawable frameAnimation = (AnimationDrawable) imgView
                    .getBackground();

        if (frameAnimation.isRunning()) {
              frameAnimation.stop();
              b.setText("Start");

        } else {
              frameAnimation.start();
              b.setText("Stop");
        }
  } 
```

当显示下一帧时，它向前移动位置。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:44:54.020

我认为您应该 [http://obviam.net/index.php/sprite-animation-with-android/](http://obviam.net/index.php/sprite-animation-with-android/) 您可以修改代码并移动位置，以便图片在不同的地方

如果你运行源代码，你会看到最后一张图片是你需要的。通过图片是相同的，但它运行一个绿色蒙版是移动。绿色效果是你的需要

# scala - 直接在大型列表上运行 `...par.map(` 是个好主意吗？

> ID：10055041
> 
> 赞同：12
> 
> 时间：2012-04-07T13:51:05.660
> 
> 标签：scala, parallel-collections

假设我有一个有点大（大约几百万个项目）的字符串列表。运行这样的东西是个好主意：

```
val updatedList = myList.par.map(someAction).toList 
```

或者在运行之前对列表进行分组是一个更好的主意`...par.map(`，如下所示：

```
val numberOfCores = Runtime.getRuntime.availableProcessors
val updatedList = 
  myList.grouped(numberOfCores).toList.par.map(_.map(someAction)).toList.flatten 
```

更新：鉴于这`someAction`非常昂贵（与`grouped`,`toList`等相比）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-07T14:05:51.777

直接运行`par.map`，因为它已经考虑了核心数量。但是，不要保留`List`，因为这需要完整的副本才能生成并行集合。相反，使用`Vector`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-07T18:13:10.503

如建议的那样，避免使用列表和`par`，因为这需要将列表复制到可以轻松并行遍历的集合中。有关说明，请参阅[并行集合概述](http://docs.scala-lang.org/overviews/parallel-collections/conversions.html)。

如[具体并行集合类部分](http://docs.scala-lang.org/overviews/parallel-collections/concrete-parallel-collections.html)所述， a`ParVector`的操作效率可能`map`低于 a `ParArray`，因此如果您真的关心性能，使用并行数组可能是有意义的。

但是，如果`someAction`足够昂贵，那么它的计算成本将隐藏 和 中的顺序`toList`瓶颈`par`。

# python - Python 枚举列表的良好编程实践

> ID：10055045
> 
> 赞同：17
> 
> 时间：2012-04-07T13:51:56.623
> 
> 标签：python, list

我对 Python 和一般编程很陌生，我想知道用许多逻辑运算符编写长语句是否是一种好的编程习惯 - 例如，在 for 循环中。

例如，这是我创建的一个函数，它从一个单词中获取所有元音并返回一个包含这些元音的列表。

```
def getVowels(word):
    vowel_list = []
    index = 0
    for i in word:
        if i == "a" or i == "e" or i == "i" or i == "o" or i == "u" or i == "A" or i == "E" or i == "I" or i == "O" or i == "U":
            vowel_list.append(word[index])
        index += 1
    return vowel_list 
```

如您所见，if 语句变得很长。它被认为是好的编程吗？如果不是，有没有更好的方法来编写这个函数？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-07T13:54:53.503

不，这不是好的做法，总有更好的方法：D

```
if i.upper() in "AEIOU" 
```

这是使用列表推导的函数的更短版本：

```
def get_vowels(word):
    vowels = "AEIOU"
    return [c for c in word if c.upper() in vowels] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T15:05:10.263

使用集合可能会更好：

```
VOWELS = set('aeiouAUIOU')

def get_vowels(word):
    return [c for c in word if c in VOWELS] 
```

或者，更令人讨厌：

```
def get_vowels(word):
    return filter(VOWELS.__contains__, word) 
```

（但第一种方法可读性最强，因此更符合 Python 风格。另外，第二个函数将返回生成器，而不是 Python 3 中的列表。）

**编辑**`c in list`vs的性能比较`c in set`：

```
import timeit

VOWELS = 'aeiouAEIOU'
VOWSET = set(VOWELS)
SAMPLE = 'asflasrjoperugASDFAROUAoarfpeoriugargagadropgue'

def get_vowels(word, vowels):
    return [c for c in word if c in vowels]

print timeit.timeit('get_vowels(SAMPLE, VOWELS)', 
                    'from __main__ import VOWELS, SAMPLE, get_vowels') 
# ^ prints 10.0739870071
print timeit.timeit('get_vowels(SAMPLE, VOWSET)', 
                    'from __main__ import VOWSET, SAMPLE, get_vowels') 
# ^ prints 9.43965697289 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T16:20:57.717

喜欢：

```
set('aeiouAUIOU') & set(word) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T13:55:02.387

与以下`if`内容相同：

```
if i in "aeiouAEIOU" 
```

基本上，您正在检查集合中的成员。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-07T13:56:59.210

我认为长语句比短语句更难理解。几乎总有一种方法可以用较短的语句来做同样的事情。在您的情况下，您可以像这样简化 if：

```
def getVowels(word):
    vowel_list = []
    for i in word:
        if i in "aeiouAEIOU":
            vowel_list.append(i)
    return vowel_list 
```

因为 Python 允许您使用“in”运算符在另一个字符串中搜索一个字符串。

但是 Python 也允许列表推导，这简化了循环：

```
def getVowels(word):
    return [i for i in word if i in "aeiouAEIOU"] 
```

# c++ - 在 netbeans IDE、测试和调试测试中的 c++ 项目中构建 /clean 和构建之间的区别

> ID：10055046
> 
> 赞同：4
> 
> 时间：2012-04-07T13:51:57.370
> 
> 标签：c++, build, xdebug

我想知道 netbeans ide 中 c++ 项目中的 build/clean&build 之间的区别有时代码在其他地方运行完美，它会产生一些错误，任何人都可以提出更好的方法来了解使用 build/clean 和 build。

另外，如果你能告诉我什么是测试和调试测试会有所帮助......

当我只是测试我的代码时，它没有提供所需的功能，而当我进行调试测试时，我在某种程度上获得了功能

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T13:55:30.743

构建仅编译需要编译的源文件并将它们链接在一起以形成新的二进制文件。

干净的构建会删除所有二进制文件并从头开始重新编译所有源文件并将它们进一步链接在一起以形成一个新的二进制文件。

通常，为了节省重新编译的时间，使用名为**[Makefiles](http://www.cs.duke.edu/~ola/courses/programming/Makefiles/Makefiles.html)**的实用程序，在 Makefiles 中，您可以指定源文件的依赖关系，这些依赖关系制定编译规则，以防某些源文件被修改。第一种情况只编译链接需要按照Makefile中的规则编译的源文件。

# scheme - 函数中的参数数量

> ID：10055047
> 
> 赞同：1
> 
> 时间：2012-04-07T13:52:05.087
> 
> 标签：scheme, gambit

假设我有一个结构“电话号码”。

```
(define-structure phonenumber country area prefix line) 
```

这会给我一个功能（make-phonenumber）。我想获得 make-phonenumber 需要的参数数量。答案是4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:57:49.520

看看你的 Scheme 实现是否提供了这个`procedure-arity`功能。

# html - 作为后端开发人员，您如何处理 HTML Mockups？

> ID：10055050
> 
> 赞同：0
> 
> 时间：2012-04-07T13:52:32.203
> 
> 标签：html, tdd, mockups

我在网站内搜索过，但找不到我的答案..

我想从头开始一个项目，我的客户给了我一个产品的 HTML 模型，并要求我以 TDD 方法来做。

通常，我负责设计和开发前端和后端部分，这是我第一次给我做模型。这不是我最喜欢的咨询工作软件开发风格（我通常从模型层开始，然后是视图，然后是控制器来集成它们。）

所以我的问题是：

1-基本上，我应该如何解决这个问题？我知道拥有视图层会更好，但我想将视图调整为我最喜欢的模板语言选择。

2-我必须采用 TDD 方法。例如，我猜想拥有 MockUp 是使用 Selenuim 测试工具进行“功能测试”的完美场景。我对吗 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:22:27.880

简短的回应是：

1.  尽可能正式地写下你的问题的定义
2.  选择一个或多个测试框架并编写您的测试；简化：
    1.  后端单元测试
    2.  前端功能测试
3.  开始循环：设计、代码、测试
4.  定期与提交者审查

你可以使用你想实现你的模拟的每一种视图技术。它是 HTML...

HTML Mockups 更加冗长，非常适合帮助您定义[用例](http://en.wikipedia.org/wiki/Use_Case)(UC) 和[业务需求](http://en.wikipedia.org/wiki/Business_requirements)(BR)。从 UC 和 BR，您将能够从开发人员（您的）角度定义[完整需求规范](http://en.wikipedia.org/wiki/Software_requirements_specification)的初稿以及[系统和架构设计。](http://en.wikipedia.org/wiki/Software_Design_Description)

BR 中的每个功能需求都应该有一个功能测试，可以使用您提到的 Selenium 运行，并且应该分解为几个细粒度的需求，您可以为每个需求定义一个单元测试。遵循 TDD 方法，您可以构建您的后端，尝试通过每个单元测试，并汇总每个功能测试。

当您完成单个 BR 的后端时，您可以在您的首选视图技术中具体化相应的 html 模拟，并在您的技术环境中运行功能测试，然后在集成环境中运行。

这些测试可以使用[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)自动完成。

当 UC 的每个 BR 都通过了功能测试和单元测试后，您可以将用例提交给您的 committer 以供用户接受并获得反馈。

每个步骤都应考虑到设计阶段的回送。如果您跟踪 UC、BR 和单元测试之间的每个依赖关系（例如使用电子表格中的可追溯性矩阵），您应该能够识别和限制环回影响，并对有限代码库的代码更改采取行动。

# c# - 通过 MonoTouch 绑定公开 Obj-C const NSString

> ID：10055053
> 
> 赞同：1
> 
> 时间：2012-04-07T13:52:52.720
> 
> 标签：c#, objective-c, xamarin.ios

我已经为[ZBar](http://zbar.sourceforge.net/iphone/ "ZBar")启动并运行了一个有效的 MonoTouch 绑定，但是在公开 Obj-C 库定义的用作 NSDictionary 中的键的常量 NSString 时遇到了麻烦：

在 ZBarReaderController.h 中：

```
extern NSString* const ZBarReaderControllerResults; 
```

我首先尝试通过[此处](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types#Binding_Fields "MonoTouch Obj-C 绑定文档")记录的实际 MonoTouch 绑定：

```
[Static]
interface ZBarSDK
{
    [Field ("ZBarReaderControllerResults")]
    NSString BarcodeResultsKey { get; }
} 
```

尝试构建包含此内容的项目会导致 btouch 出现以下错误：

> 未处理的异常：System.ArgumentOutOfRangeException：参数超出范围。
> 参数名称： startIndex
> at System.String.Substring (Int32 startIndex) [0x00000] in :0
> at Generator.Generate (System.Type type) [0x00000] in :0
> at Generator.Go () [0x00000] in :0
> at BindingTouch .Main (System.String[] args) [0x00000] in :0
> [ERROR] FATAL UNHANDLED EXCEPTION: System.ArgumentOutOfRangeException: 参数超出范围。
> 参数名称：startIndex
> at System.String.Substring (Int32 startIndex) [0x00000] in :0
> at Generator.Generate (System.Type type) [0x00000] in :0
> at Generator.Go () [0x00000] in :0
> 在 BindingTouch.Main (System.String[] args) [0x00000] in :0

接下来，我尝试按照其他[SO 答案](https://stackoverflow.com/questions/8795747/monotouch-access-to-obj-c-constants "MonoTouch 访问 Obj-C 常量")中的建议手动调用代码。

```
public static NSString BarcodeResultsKey
{
    get
    {
        var libHandle = Dlfcn.dlopen("libzbar.a",0);
        // I also tried this with "__Internal", rather than "libzbar.a"
        return Dlfcn.GetStringConstant(libHandle, "ZBarReaderControllerResults");
    }
} 
```

它可以正常构建和执行，但只返回一个空字符串（如[Dlfcn.GetStringConstant](http://docs.go-mono.com/index.aspx?link=M:MonoTouch.ObjCRuntime.Dlfcn.GetStringConstant%28System.IntPtr,System.String%29)文档，如果链接失败，它将执行此操作）。

那么，还有其他人从第 3 方 Obj-C 库中访问 c​​onst 字符串吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:16:23.133

生成器 ,对要求命名空间以 . 开头`btouch`的绑定有限制（在 5.2.11 之前）。`[Field]``MonoTouch.`

此[问题](https://bugzilla.xamarin.com/show_bug.cgi?id=4333)的快速解决方法是将命名空间从`ZBar`to重命名`MonoTouch.ZBar`，绑定定义将正确构建。

由于 iOS 应用程序必须与应用程序中包含的库的静态库 (.a) 链接，因此还需要`"__Internal"`在绑定中提供库名称，如[文档](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types#Binding_Fields)中所述。

```
[Static]
interface ZBarSDK {
    [Field ("ZBarReaderControllerResults", "__Internal")]
    NSString BarcodeResultsKey { get; }
} 
```

还有一个编译问题（在生成的代码上），需要对库进行一些手动调整（即，您可以使用`null`库名称而不是库名称，因为它已链接到主应用程序内）。这也在 MonoTouch 5.2.11 版本中得到修复。

使用变通方法（或 MonoTouch 5.2.11）和`__Internal`您应该能够`[Field]`在绑定中使用的更改。

# css - 单个背景图像的良好最小尺寸

> ID：10055056
> 
> 赞同：1
> 
> 时间：2012-04-07T13:53:17.113
> 
> 标签：css, image, background

我有一个覆盖整个背景的图像。这样做的网站通常会通过 JavaScript 选择图像大小吗？如果我不想使用 JavaScript，那么覆盖绝大多数屏幕的最小尺寸是多少？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T14:24:53.217

没有办法说，适合 10 英寸上网本的图像在 24 英寸显示器上看起来会不一样，所以最好的办法是使用 jQuery 插件，例如[Backstretch](http://srobbin.com/jquery-plugins/backstretch/)或[Vegas](http://vegas.jaysalvat.com/)插件或 CSS3 的`background-size:cover`属性像这样：

```
html {
    background: url(images/bg.jpg) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

当然，这只适用于现代浏览器。[这里](http://vegas.jaysalvat.com/)还有一些技术可以实现这一目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T14:17:32.557

最常用的屏幕分辨率是 1024x768 imo。另外，如果我应该为网站使用一种背景，应该使底部淡出，或者一种颜色，或者渐变。

# jquery - 取消绑定验证表单时无法分离 onsubmit 事件

> ID：10055066
> 
> 赞同：2
> 
> 时间：2012-04-07T13:55:04.577
> 
> 标签：jquery, internet-explorer, validation

我目前正在使用 jquery validate 1.8.1，我的目标浏览器是 IE7。我在主页上有一个表单，表单元素是通过 AJAX 动态注入的。有一个下拉框管理表单中的元素，表单将根据使用此下拉框选择的内容提交不同的内容。

```
$('some_pane').load('/remote_location.html', ...); 
```

因此，我需要动态实例化 jquery validate：

```
var myValidator;
myValidator = $('#myForm').validate();

myValidator.settings.submitHandler = myFormSubmitHandler;
$('#input1inMyForm').rules('add', .....) 
```

当它在页面加载时第一次动态加载时一切都很好，并且当表单提交时，myFormSubmitHandler 被调用一次。

但是，当用户在下拉框中选择另一个值时会出现问题，这会动态地将另一组元素注入到表单中，从而实例化一个新的验证器。

在实例化一个新的验证器之前，我已经完成了适当的清理工作，它可以在 Firefox 和 Chrome 中使用

```
$('#myForm').data('validator', null);
$('#myForm').unbind('submit'); 
```

我在 StackOverflow 上进行了广泛的搜索，虽然我想不出一个可行的解决方案，但我可以总结一些关于 IE 和 jQuery 的关键点

1.  您只能取消绑定与 jQuery.bind 绑定的事件
2.  IE 中的事件存储在 events 属性中，我可以看到我无法删除以前的 onsubmit 事件。每次我实例化一个新的验证器时，都会在表单上附加一个额外的 onsubmit 事件。

这些是我尝试过的清理方法，但不适用于我的 IE7

```
$('#myForm').removeAttr('onsubmit');
if( document.detachEvent ) {
    document.getElementById('myForm').detachEvent('onsubmit', myFormSubmitHandler);
} 
```

非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:46:54.853

我通过更改提交按钮解决了这个问题

```
<input type="submit" .... > 
```

改为只是一个普通按钮

```
<input type="button" .... > 
```

并且在 IE6 中，当我重新启动新的验证器时，它不会添加额外的提交处理程序。

# git - Gitolite 分叉回购

> ID：10055068
> 
> 赞同：2
> 
> 时间：2012-04-07T13:55:24.947
> 
> 标签：git, gitolite

我正在跟上 Git 和 Gitolite 的步伐。我有一个由 gitolite 管理的远程仓库服务器。我有一个与之交互的 git 客户端。到目前为止一切都很好。

我想了解处理以下情况的正确方法......

有一个仓库（egon github）我想克隆到我的服务器上，这样我就可以将它从我的服务器克隆到我将分支并进行更改的客户端。然后我想将这些更改推送到我的服务器上。我还希望能够从上游 repo 获取到我的服务器。如果我以后希望将我的更改发送到上游，我将从我的服务器通过电子邮件发送一个 git request-pull。

我无法弄清楚在图片中使用 gitolite 的最佳方法是什么。我认为这样的 repo 的 gitolite 配置中需要语法，但我找不到任何示例。

我在搜索中发现了对[Admin-Defined-Commands 的](http://sitaramc.github.com/gitolite/ADCs.html)引用，这可能是执行此操作的方法，但对于 gitolite 相对较新的人来说，实现它似乎确实需要做很多工作。也许这是唯一正确的方法，我会去做。只是询问是否有更好/更简单的方法......

任何指导表示赞赏，谷歌今天不是我的朋友......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:17:21.897

ADC 用于您想要在 Gitolite 服务器上执行的 ssh 命令，而无需向任何人提供完整的交互式 ssh 会话。
Gitolite 是关于管理存储在服务器上的给定存储库的协作[授权](http://sitaramc.github.com/gitolite/auth.html)。

但是对于GitHub 上的*公共仓库呢？*
你根本不需要 Gitolite，可以直接在 GitHub 上 fork，然后在本地克隆那个 repo。

如果您绝对需要在您的 Gitolite 服务器上获取该 repo 的 Gitolite 管理实例，那么我建议：

*   初始化本地机器上的所有内容（GitHub repo 的 git clone）
*   `gitolite.conf`在您的仓库中声明一个新`gitolite-admin`仓库（并将其推送回 Gitolite 服务器，这将触发新仓库的创建）
*   `git push`将 GitHub 存储库本地克隆到 Gitolite 服务器。

来自上游的任何更新最好直接从本地克隆管理，方法[是添加一个 ' `upstream`' repo](https://stackoverflow.com/a/9257901/6309)（如果你愿意，可以推回你的 Gitolite 服务器）

# java - 如何在 Java 中创建基于模板的文件？

> ID：10055073
> 
> 赞同：3
> 
> 时间：2012-04-07T13:55:41.313
> 
> 标签：java, eclipse, templates

我想在 java 中创建一个模板文件，我使用 Eclipse IDE。我想创建一个模板文件，这样一个从用户那里获取参数的程序应该能够将这些参数粘贴到模板文件中，然后将其保存为单独的文件。我怎样才能做到这一点 ？

请指导我。

谢谢 注意

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T17:10:32.260

这是在我的开源模板引擎[Chunk](http://www.x5software.com/chunk/)中执行此操作的方法。

```
 import com.x5.template.Theme;
 import com.x5.template.Chunk;
 import java.io.File;
 import java.io.FileWriter;
 import java.io.IOException;

 ...

 public void writeTemplatedFile() throws IOException
 {
     Theme theme = new Theme();
     Chunk chunk = theme.makeChunk("my_template", "txt");

     // replace static values below with user input
     chunk.set("name", "Lancelot");         
     chunk.set("favorite_color", "blue");

     String outfilePath = getFilePath();
     File file = new File(outfilePath);
     FileWriter out = new FileWriter(file);

     chunk.render(out);

     out.flush();
     out.close();
 } 
```

my_template.txt（只需放置在主题/my_template.txt 中的类路径中）

```
My name is {$name}.

My favorite color is {$favorite_color}. 
```

输出：

```
My name is Lancelot.

My favorite color is blue. 
```

通过添加 |filters 和 :defaults 到您的标签，您的模板可以变得更智能。

my_template.txt - 示例 2

```
My name is {$name|defang:[not provided]}.

My favorite color is {$favorite_color|defang|lc:[not provided]}. 
```

在此示例中，`defang`过滤器会删除任何可能有助于形成 XSS 攻击的字符。过滤器将`lc`文本更改为小写。如果值为空，则将输出冒号之后的任何内容。

有一个[Eclipse 插件](http://www.x5software.com/chunk/wiki/index.php/Eclipse_Template_Editor_plugin)可用于直接在 Eclipse IDE 中编辑块模板。该插件为模板文档提供语法高亮和大纲视图。

Chunk 可以做的更多，请查看[文档](http://www.x5software.com/chunk/)以进行快速浏览。完全披露：我喜欢 Chunk 的部分原因是我创造了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T14:03:55.853

有大量的 Java 模板解决方案。

*   [速度](http://velocity.apache.org/)
*   [自由标记](http://freemarker.sourceforge.net/)
*   [胡子](https://github.com/spullara/mustache.java)
*   等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T13:59:58.013

查看[http://velocity.apache.org/engine/devel/](http://velocity.apache.org/engine/devel/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-01T08:55:19.430

让我们把它分成几个步骤：

1.  从用户那里获取输入参数：

    > 然而，如果您这样做（向 servlet 发送请求、使用 CLI 或将参数传递给 main 方法），您将需要在某种对象或数据结构中捕获输入。为此，我将创建一个简单的 pojo 类，如下所示：

```
public class UserInput
{

  protected String firstName;

  protected String lastName;

    public String getFirstName()
    {
        return firstName;
    }

    public void setFirstName(String firstName)
    {
        this.firstName = firstName;
    }

    public String getLastName()
    {
        return lastName;
    }

    public void setLastName(String lastName)
    {
        this.lastName = lastName;
    }

} 
```

2.  创建一个 TemplateEngine 接口：

    > 这很方便，因此您可以尝试多个模板库。使用界面也是最佳实践，这样您就可以轻松改变主意并切换到不同的库。我最喜欢的库是[freemarker](http://freemarker.org/)和[mustache](https://mustache.github.io/)。这是一个演示其常见流程的界面示例。

```
public interface ITemplateEngine
{
    /**
     * creates the template engines instance and sets the root path to the templates in the resources folder
     * @param templatesResouceFolder 
     */
    public void init(String templatesResouceFolder);

    /**
     * sets the current template to use in the process method
     * @param template 
     */
    public void setTemplate(String template);

    /**
     * compiles and writes the template output to a writer
     * @param writer
     * @param data 
     */
    public void process(Writer writer, Object data);

    /**
     * returns the template file extension
     * @return 
     */
    public String getTemplateExtension();

    /**
     * finishes the write process and closes the write buffer
     */
    public void flush();

} 
```

3.  实现接口

> 第一个是**freemarker**模板的例子......

```
/**
 * This class is a freemarker implementation of ITemplateEngine
 * Use ${obj.prop} in your template to replace a certain the token
 * Use ${obj.prop!} to replace with empty string if obj.prop is null or undefined
 * 
 * 
 */
public class FreemarkerTemplateEngine implements ITemplateEngine
{

    protected Configuration instance = null;

    protected String templatesFolder = "templates";

    protected Template templateCompiler = null;

    protected Writer writer = null;

    @Override
    public void init(String templatesResouceFolder)
    {

        if(instance == null){
            instance = new Configuration();
            instance.setClassForTemplateLoading(this.getClass(), "/");
            this.templatesFolder = templatesResouceFolder;
        }
    }

    @Override
    public void setTemplate(String template)
    {
        try
        {
            templateCompiler = instance.getTemplate(templatesFolder + File.separatorChar + template + getTemplateExtension());
        } catch (IOException ex)
        {
            Logger.getLogger(FreemarkerTemplateEngine.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    @Override
    public void process(Writer writer, Object data)
    {
        try
        {
            templateCompiler.process(data, writer);
            this.writer = writer;
        } catch (TemplateException | IOException ex)
        {
            Logger.getLogger(FreemarkerTemplateEngine.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    @Override
    public String getTemplateExtension()
    {
        return ".ftl";
    }

    @Override
    public void flush()
    {
        try
        {
            this.writer.flush();
        } catch (IOException ex)
        {
            Logger.getLogger(FreemarkerTemplateEngine.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

} 
```

> 这是一个**小胡子**模板引擎的例子......

```
/**
 * 
 * Use {{obj.prop}} in your template to replace a certain the token
 * If obj.prop is null or undefined, it will automatically replace it with an empty string
 * If you want to exclude an entire section based on if a value is null, undefined, or false you can do this:
 *     {{#obj.prop}}
 *     Never shown
 *     {{/obj.prop}}  
 */
public class MustacheTemplateEngine implements ITemplateEngine
{

    protected MustacheFactory factory = null;

    protected Mustache instance = null;

    protected Writer writer = null;

    protected String templatesFolder = "templates";

    @Override
    public void init(String templatesResouceFolder)
    {
        if(factory == null){
            factory = new DefaultMustacheFactory();
            this.templatesFolder = templatesResouceFolder;
        }
    }

    @Override
    public void setTemplate(String template)
    {
        instance = factory.compile(templatesFolder + File.separatorChar + template + getTemplateExtension());
    }

    @Override
    public void process(Writer writer, Object data)
    {
        this.writer = instance.execute(writer, data);
    }

    @Override
    public String getTemplateExtension()
    {
        return ".mustache";
    }

    @Override
    public void flush()
    {
        try
        {
            this.writer.flush();
        } catch (IOException ex)
        {
            Logger.getLogger(MustacheTemplateEngine.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

} 
```

4.  创建模板

> Freemarker 模板具有“.ftl”扩展名，而 mustache 模板具有“.mustache”扩展名。让我们创建一个名为“test.mustache”的小胡子模板，并将其放在“资源/模板”文件夹中。

```
Hello {{firstName}} {{lastName}}! 
```

5.  现在，让我们使用我们的模板引擎。

> 创建 JUnit 测试总是一个好主意

```
public class JavaTemplateTest
{

    ITemplateEngine templateEngine = new MustacheTemplateEngine();

    public File outputFolder = new File(System.getProperty("user.home") + "/JavaTemplateTest");

    @Before
    public void setUp()
    {
        outputFolder.mkdirs();
    }

    @After
    public void tearDown()
    {
        for (File file : outputFolder.listFiles())
        {
            file.delete();
        }
        outputFolder.delete();
    }

    public JavaTemplateTest()
    {
    }

    @Test
    public void testTemplateEngine() throws Exception
    {

        //mock the user input
        UserInput userInput = new UserInput();
        userInput.setFirstName("Chris");
        userInput.setLastName("Osborn");

        //create the out put file
        File file = new File(outputFolder.getCanonicalPath() + File.separatorChar + "test.txt");

        //create a FileWriter 
        try (Writer fileWriter = new FileWriter(file.getPath()))
        {

            //put the templateEngine to work
            templateEngine.init("templates");
            templateEngine.setTemplate("test"); //resources/templates/test.mustache
            templateEngine.process(fileWriter, userInput); //compile template
            templateEngine.flush(); //write to file
        }

        //Read from the file and assert
        BufferedReader buffer = new BufferedReader(new FileReader(file));
        Assert.assertEquals("Hello Chris Osborn!", buffer.readLine());

    }

} 
```

基本上就是这样。`mvn install`如果您使用 maven 进行设置，则测试应该在运行目标时运行并通过。

这是我为此示例创建的项目代码：[https ://github.com/cosbor11/java-template-example](https://github.com/cosbor11/java-template-example)

希望能帮助到你！

# java - 从 GXT 网格拖放到桌面

> ID：10055074
> 
> 赞同：0
> 
> 时间：2012-04-07T13:55:54.567
> 
> 标签：java, html, gwt, gxt, drag-and-drop

我正在使用 GXT 进行 UI 开发。我使用 HTML5 将文件从桌面拖动到我的应用程序并上传。但现在我有相反的要求。我想将文件从浏览器拖到桌面，这会将文件下载到桌面。

我知道这仅在 Chrome 中是可能的。并检查了以下演示： [http ://www.thecssninja.com/javascript/gmail-dragout](http://www.thecssninja.com/javascript/gmail-dragout)

我曾尝试在我的 GXT 应用程序中实现上述代码，但问题是我正在使用支持 DnD 到 TreePanel 的可编辑网格。现在，当我从网格拖动到桌面时，我认为它没有捕获浏览器事件（可能我在这里错了）。

有什么想法，应该怎么做？

谢谢。

下面是我在将数据插入网格后调用的一小段代码。所有记录的 CSS 类名称都为**".icon"**。问题是当我开始拖动时，没有调用**“dragstart” 。**有什么建议吗？

注意：此代码在我创建按钮、标签等并使用其他必需参数使它们可拖动 = true 时起作用。

```
 public static native void test(String id)/*-{
var files = $doc.querySelectorAll('.icon');
for (var i = 0, file; file = files[i]; ++i) {
    file.addEventListener("dragstart",function(evt){
        $wnd.alert("Drag Event started.. ");
        evt.dataTransfer.setData("DownloadURL",this.dataset.downloadurl);
    },false);
} 
```

}-*/;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T23:28:11.467

我使用了它，它成功执行，不，你应该检查代码中的其他地方。

# php - PHP foreach 循环做某事一次而不是多次

> ID：10055078
> 
> 赞同：1
> 
> 时间：2012-04-07T13:56:39.960
> 
> 标签：php, curl

我正在为检查 9 件事的整个脚本运行一个 foreach 循环。

假设其中五个具有值“a”，其中四个具有值“b”。

如何编写只返回“a”和“b”一次的 IF 条件（或其他东西）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T14:00:32.643

## 简单方法（检查最后一个值）

使用存储先前内容的变量，并将其与当前迭代进行比较（仅在相似项是连续的情况下才有效）

```
$last_thing = NULL;
foreach ($things as $thing) {
  // Only do it if the current thing is not the same as the last thing...
  if ($thing != $last_thing) {
    // do the thing
  }
  // Store the current thing for the next loop
  $last_thing = $thing;
} 
```

## 更健壮的方法（将使用的值存储在数组中）

或者，如果您有复杂的对象，您需要检查内部属性并且类似的事情不是连续的，请将使用的对象存储到数组中：

```
$used = array();
foreach ($things as $thing) {
  // Check if it has already been used (exists in the $used array)
  if (!in_array($thing, $used)) {
    // do the thing
    // and add it to the $used array
    $used[] = $thing;
  }
} 
```

### 例如（1）：

```
// Like objects are non-sequential
$things = array('a','a','a','b','b');

$last_thing = NULL;
foreach ($things as $thing) {
  if ($thing != $last_thing) {
    echo $thing . "\n";
  }
  $last_thing = $thing;
}

// Outputs
a
b 
```

### 例如（2）

```
$things = array('a','b','b','b','a');
$used = array();
foreach ($things as $thing) {
  if (!in_array($thing, $used)) {
    echo $thing . "\n";
    $used[] = $thing;
  }
}

// Outputs
a
b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T14:02:14.630

您能否更具体一些（插入带有“内容”对象的代码片段可能会有所帮助）。

听起来，您正在尝试获取数组的唯一值：

```
$values = array(1,2,2,2,2,4,6,8);
print_r(array_unique($values));
>> array(1,2,4,6,8) 
```

# php - php strtotime 下个月的第一天什么都不返回

> ID：10055081
> 
> 赞同：1
> 
> 时间：2012-04-07T13:57:29.037
> 
> 标签：php, strtotime, next

我一直在阅读有关 strtotime 和“下个月”问题的 php 问题。我想做的是两个日期之间的月份计数器。例如，如果我有开始日期 01.02.2012 和停止日期 07.04.2012 我想获得返回值 - 3 个月。如果开始日期是 28.02.2012 和 07.04.2012，结果也是 3 个月。我没有计算确切的天数/月数，只是两个日期之间的几个月。使用一些奇怪的日期、mktime 和 strtotime 用法并没有什么大不了的，但不幸的是，开始和停止日期可能在两个不同的年份，所以

```
mktime(0,0,0,date('m')+1,1,date('Y'); 
```

不会工作（我现在不知道这一年，如果它在开始日期和停止日期之间发生变化。我可以计算出来，但这不是一个好的解决方案）。完美的解决方案是使用：

```
$stat = Array('02.01.2012', '07.04.2012')
$cursor = strtotime($stat[0]);
$stop = strtotime($stat[1]);
$counter = 0;
    while ( $cursor < $stop ) {
   $cursor = strtotime("first day of next month", $cursor);
   echo $cursor . '<br>';
   $counter++;
   if ( $counter > 100) { break; } // safety break;
    }
    echo $counter . '<br>'; 
```

不幸的是 strtotime 没有返回正确的值。如果我使用它返回空字符串。任何想法如何获得下个月第一天的时间戳？

**解决方案**

```
$stat = Array('02.01.2012', '01.04.2012');
$start = new DateTime( $stat[0] );
$stop = new DateTime( $stat[1] );
while ( $start->format( 'U') <= $stop->format( 'U' ) ) {
    $counter ++;
    echo $start->format('d:m:Y') . '<br>';
    $start->modify( 'first day of next month' );
}
echo '::' . $counter . '..<br>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:44:02.520

```
<?php
$stat = Array('02.01.2012', '07.04.2012');
$stop = strtotime($stat[1]);
list($d, $m, $y) = explode('.', $stat[0]);
$count = 0;
while (true) {
    $m++;
    $cursor = mktime(0, 0, 0, $m, $d, $y);
    if ($cursor < $stop) $count ++; else exit;
}
echo $count;
?> 
```

简单的方法：D

# python - 学习 python 遇到错误练习 14

> ID：10055085
> 
> 赞同：2
> 
> 时间：2012-04-07T13:57:45.743
> 
> 标签：python

我正在关注 zed shaw 的 learn python hard way 并且正在关注练习 14。这是我正在谈论的程序：

```
from sys import argv

script, user_name = argv
prompt = '> '

print "Hi %s, I'm the %s script." % (user_name, script)
print "I'd like to ask you a few questions."
print "Do you like me %s?" % user_name
likes = raw_input(prompt)

print "Where do you live %s?" % user_name
lives = raw_input(prompt)

print "What kind of computer do you have?"
computer = raw_input(prompt)

print """
Alright, so you said %r about liking me.
You live in %r.  Not sure where that is.
And you have a %r computer.  Nice.
""" % (likes, lives, computer) 
```

现在，我使用命令在 powershell 终端中运行这个程序

```
python e:\python\ex14.py 
```

我收到以下错误消息：

```
Traceback (most recent call last):
File "e:\python\ex14.py", line 3, in (module)
script, user_name=argv
ValueError: need more than 1 value to unpack. 
```

现在，我不确定问题出在哪里。唯一的原因可能是我正在输入文件路径而不是仅输入文件名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T14:00:44.547

该脚本期望在命令行中接受一个参数。你不提供一个。

在终端中，键入`python e:\python\ex14.py YourNameHere`。

# phpflickr - phpflickr：photos_search 在上传后找不到照片

> ID：10055086
> 
> 赞同：0
> 
> 时间：2012-04-07T13:57:48.113
> 
> 标签：phpflickr

我将 phpflickr api 用于一个项目，但我遇到了一个奇怪的问题：当我上传照片（使用 sync_upload），并且我在上传后使用 photo_search 时，该函数找不到照片。II 在上传后 5 到 10 秒使用 photo_search，它可以正常工作，就像 flickr 中有索引时间一样。

我使用 machine_tags 查找照片，我不知道它是否可能是问题的根源。

有人有解决问题的想法吗？

非常感谢 ！

桑德里诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:47:49.507

经过搜索和测试，我认为我使用 photo_search 的方法不正确。

我的目的是仅检索我的照片，使用带有照片 id 参数的函数 photos_getInfo 似乎更相关。

photo_search 功能延迟问题的原始问题尚未解决，因此我将把这个问题留几天，以防有人会提供有关此问题的信息。

谢谢你。

# wcf - WCF 保存 EF 4.1 项目引发异常项目无法添加到固定大小的类型数组

> ID：10055094
> 
> 赞同：3
> 
> 时间：2012-04-07T13:58:22.807
> 
> 标签：wcf, entity-framework-4, dbcontext, savechanges

我已经搜索了谷歌并用尽了相当多的时间试图弄清楚我的 WCF 和客户端 Windows 窗体应用程序发生了什么。

我不断收到以下错误

```
"Unable to set field/property Ingredients on entity type Datalayer.UnitOfMeasure. See InnerException for details."
...
inner exception is 
"An item cannot be added to a fixed size Array of type 'Datalayer.Ingredient[]'."

Stack Trace - 
    at System.Data.Objects.Internal.PocoPropertyAccessorStrategy.<AddToCollection>b__0[T](Object collectionArg, Object item)
       at System.Data.Objects.Internal.PocoPropertyAccessorStrategy.CollectionAdd(RelatedEnd relatedEnd, Object value) 
```

我配置我的解决方案的方式我有一个引用我的 DataLayer 类库的 WCF Web 服务，我有一个引用 WCF 服务以及 DataLayer 项目的 Windows 应用程序（测试应用程序）。

如果我没有在我的测试应用程序中引用 DataLayer，则不会发生此问题，但是我会丢失`ICollection<Ingredient>`简单`Ingredient[]`数组。现在你可以看到，每次初始化数组都变成了编码的痛苦。

有人知道吗？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T08:39:54.210

我遇到了这个确切的错误，但接受的答案并不是我需要的解决方案。事实证明，客户端正在`List<Order>`向我的 WCF 服务发送一个 up ，但由于该`Customer.Orders`属性被定义为`ICollection<Order>`，WCF 反序列化器反序列化器只是以最简单的形式反序列化它，这是一个 Order 类型的数组，即`Order[]`.

我能想出的唯一解决方案是将我的 POCO 对象上的相关属性从 an`ICollection<Order>`更改为 a `HashSet<Order>`。有关更多详细信息，请参阅[停止 WCF 将空 ICollection 反序列化为零容量数组](https://stackoverflow.com/questions/10244910/stop-wcf-deserializing-empty-icollection-into-zero-capacity-array/10846943)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T15:47:36.463

当您使用“添加服务引用”在测试中添加对 WCF 服务的引用时，可以选择为客户端上的生成代理配置默认集合类型。我认为默认是数组，您可以将其更改为通用列表。

如果您使用的是 svcutil，那也允许同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T02:35:00.027

奇怪的。我遇到了同样的错误，并且正在做正确的事情，调用“ToArray()”。将其更改为“ToList()”并开始正常工作。

# java - 我在使用 Regex 模式时遇到问题

> ID：10055095
> 
> 赞同：0
> 
> 时间：2012-04-07T13:58:27.743
> 
> 标签：java

我需要关于我正在制作的代理刮刀的帮助。我的应用程序似乎无缘无故地抛出异常。

我的代码

```
package com.ElwynDev.PastBinBot;

import java.io.IOException;
import java.util.HashSet;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class ProxyScraper {

    public static void ScrapProxy(int Pages) {

        final int[] searchIds = new int[] { 225957, 278235, 240804, 258000, 227364, 244555, 438084, 438085, 438086, 438087, 438088};
        final String searchUrl = "http://www.proxyfire.net/forum/showthread.php?t=56861?";
        final String proxyExtractingRegex = "[1-9]{2,3}.[1-9]{2,3}.[1-9]{2,3}.[1-9]{2,3}";

        Pattern r = Pattern.compile(proxyExtractingRegex);

        HashSet<String> proxyHashSet = new HashSet<String>();
        for(int searchId : searchIds) {
            Matcher m = null;

            try {
                m = r.matcher(ProxyHandle.get(searchUrl + searchId, null, Pages));
                while(true) {
                    if(m.find()){
                        proxyHashSet.add(m.group());
                    }
                    else
                        break;
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        for(String proxy : proxyHashSet) {
            FileWrighter.logTo("proxy.txt", proxy + "\n");
        }
    }
}; 
```

```
Exception in thread "main" java.lang.NullPointerException
at java.util.regex.Matcher.getTextLength(Unknown Source)
at java.util.regex.Matcher.reset(Unknown Source)
at java.util.regex.Matcher.<init>(Unknown Source)
at java.util.regex.Pattern.matcher(Unknown Source)
at com.ElwynDev.PastBinBot.ProxyScraper.ScrapProxy(ProxyScraper.java:24)
at com.ElwynDev.PastBinBot.Main.main(Main.java:17) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:09:18.260

它看起来像这样：

```
ProxyHandle.get(searchUrl + searchId, null, Pages) 
```

正在回归`null`。我不能告诉你为什么。我建议使用调试器来解决这个问题。

# ssis - ssis 数据流缓冲区

> ID：10055100
> 
> 赞同：0
> 
> 时间：2012-04-07T13:59:02.747
> 
> 标签：ssis

我知道 SQL 服务器通过在我们选择或更新等时将数据从硬盘加载到 RAM 来为所有操作使用内存缓存。此外，我读过 SSIS 也使用一些缓冲区来执行数据流任务。所以，我的问题是..

1）这些缓冲区和缓存是否相同？

2）如果是的话，我们过去在数据流任务（eg:OLEDB Data Source task）里面写了sql语句，所以SSIS必须创建一些缓冲区来加载数据。OLEDB Source任务里面执行的sql语句是否不会创建任何缓存?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T20:51:35.763

不，它们不一样。

SQL Server 数据库引擎有自己的缓存，并且正在运行的包中的每个 SSIS 数据流任务也有自己的缓存。

因此，当您在 OLEDB 数据源任务中、数据流任务中、正在运行的 SSIS 包中进行 SQL Server 查询时，SQL Server 必须将所有数据带到数据库引擎缓存中，然后将数据读入数据流任务的缓冲区（然后可以通过数据流管道中的各种缓冲区）。

SQL Server 数据库引擎和 SSIS 包的内存使用本身就是一个巨大的话题，但我希望这能回答你的问题。

# performance - Adobe Air - 大型静态数据的数据库与 XML

> ID：10055102
> 
> 赞同：1
> 
> 时间：2012-04-07T13:59:21.157
> 
> 标签：performance, apache-flex, air, flash-builder

我正在使用 Flas Builder / Flex for Adob​​e Air 开发应用程序。此应用程序将使用一组可变的处理指令来处理大量静态文本 (100 - 200 MB)。目标平台将是 iOS、Android 和桌面。

数据集可以是一个大的 XML 文件，也可以是一组大约 3MB 的 XML 文件。这将在设计时决定。

根据您的经验，最好将文本存储在 Adode Air 数据库或一组 XML 文件中以获得最佳性能（包括速度和电池寿命）？

我还应该考虑哪些其他因素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:50:36.633

我引用我最喜欢的书签之一：

*在 AIR 应用程序中保存数据有几种不同的方法：*

*   *平面文件*
*   *本地共享对象*
*   *加密本地存储*
*   *对象序列化*
*   *SQL 数据库*

*这些方法中的每一种都有自己的优点和缺点（对此的解释超出了本文的范围）。使用 SQL 数据库的优点之一是它有助于减少应用程序的内存占用，而不是将大量数据从平面文件加载到内存中。例如，如果您将应用程序的数据存储在数据库中，您可以在需要时只选择您需要的数据，然后在完成后轻松地从内存中删除数据。*

资料来源： http: [//www.adobe.com/devnet/air/articles/10_tips_building_on_air.html](http://www.adobe.com/devnet/air/articles/10_tips_building_on_air.html)

我不明白一件事：每个文件的大小都是 100-200 Mb 吗？或者这是您所有文件的总大小？

# php - 无法插入表PHP MySQL

> ID：10055106
> 
> 赞同：0
> 
> 时间：2012-04-07T13:59:38.770
> 
> 标签：php, mysql

我有以下 php 查询...

```
INSERT INTO `demographic2` (id, name, first_name, last_name, link, username, birthday, gender, relationship_status, email, timezone, locale, verified, updated_time) VALUES (845450180, Liam Gallagher, Liam, Gallagher, http://www.facebook.com/lia.co.uk, lia.co.uk, 11/25/1989, male, Single, gal@hotmail.com, 1, en_US, 1, 2012-03-30T21:54:17+0000) 
```

我看不到任何错误，但由于某种原因，上面不会将数据插入我的表中，架构看起来像这样......

![在此处输入图像描述](../Images/8f4654e433b0d46ddd048b5d1df092a8.png)

关于字符串文字，我将其作为插入查询，如何添加引号？

```
$columns = implode(", ",array_keys($userInfo));
            $escaped_values = array_map('mysql_real_escape_string', array_values($userInfo));
            $values  = implode(", ", $escaped_values);
            $sql = "INSERT INTO `demographic2` ($columns) VALUES ($values)"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T14:02:31.410

阅读MySQL 中的[字符串文字](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)。您必须在引号中写入字符串，例如：`"my text"`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T14:05:49.010

您应该用`""`or包装您的字符串值`''`，例如`"value"`or `'value'`。

[您还可以在http://www.unixwiz.net/techtips/sql-injection.html](http://www.unixwiz.net/techtips/sql-injection.html)阅读更多关于反 SQL 注入技术以更好地创建 SQL 查询字符串的信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T14:03:48.763

我认为您需要添加`'SomevarcharOrDatetime'`

```
INSERT INTO `demographic2` 
(
  id, name, 
  first_name, 
  last_name, 
  link, 
  username, 
  birthday, 
  gender, 
  relationship_status, 
  email, 
  timezone, 
  locale, 
  verified, 
  updated_time
) 
VALUES 
(
  845450180, 
  'Liam Gallagher', 
  'Liam', 
  'Gallagher', 
  'http://www.facebook.com/lia.co.uk', 
  'lia.co.uk', 
  '11/25/1989', 
  'male', 
  'Single', 
  'gal@hotmail.com', 
  1, 
  'en_US', 
  1, 
  '2012-03-30T21:54:17+0000'
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T14:06:23.410

没有引用任何内容。

```
INSERT INTO `demographic2` (id, name, first_name, last_name, link, username, birthday, gender, relationship_status, email, timezone, locale, verified, updated_time)
VALUES (845450180, "Liam Gallagher", "Liam", "Gallagher", "http://www.facebook.com/lia.co.uk", "lia.co.uk", "11/25/1989", "male", "Single", "gal@hotmail.com", "1", "en_US", "1", "2012-03-30T21:54:17+0000") 
```

另外，您为什么不使用 DATE 列作为日期（生日）？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-07T14:07:48.033

您可以尝试在第二次使用中将其作为胶水封闭`', '`到 implode() 中，因此它变为：

```
$columns = implode(", ",array_keys($userInfo));
            $escaped_values = array_map('mysql_real_escape_string', array_values($userInfo));
            $values  = implode("', '", $escaped_values);
            $sql = "INSERT INTO `demographic2` ({$columns}) VALUES ('{$values}')"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-07T14:18:03.677

使用自定义函数映射每个值并将单引号应用于转义字符串。

```
$columns = implode(", ",array_keys($userInfo));
$escaped_values = array_map('escape_inpt_string', array_values($userInfo));
$values  = implode(", ", $escaped_values);
$sql = "INSERT INTO `demographic2` ($columns) VALUES ($values)";

function escape_inpt_string($val) {
  return "'".mysql_real_escape_string($val)."'";
} 
```

干杯！！

# iphone - 发送 qLaunchSuccess 数据包失败

> ID：10055109
> 
> 赞同：10
> 
> 时间：2012-04-07T14:00:00.973
> 
> 标签：iphone, objective-c, ios, xcode

我正在使用 XCode 4.3.2 并尝试打开一个基于 XCODE 的 Facebook SDK 示例项目的现有项目，并在具有 IOS 4.2 的目标 iPhone 上运行它。虽然它在模拟器上运行，但它在 IPhone 上崩溃，在控制台上打印此错误：

```
failed to send the qLaunchSuccess packet 
```

我真的不知道可能是什么问题

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-15T11:52:46.920

当我不小心尝试使用分发配置文件进行设备调试时，这发生在我身上。一旦我注意到并将其切换到开发配置文件，问题就消失了。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-07T14:35:09.607

您可能有一些损坏的权限或挂起的调试器进程（一个退出速度不够快）。重启Xcode或者重启你的手机，不管怎样，都没有更烦的表弟那么糟糕，`Processes That Can't Be Registered To The BootStrap Server`

如果一切都失败了，请从备份中恢复它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-25T20:38:28.327

在 Xcode 4.3.3 中，这是由于在断点处暂停时重新运行应用程序 (command+R) 或停止应用程序 (command+.) 引起的。一旦你得到它，要修复错误，它通常可以停止应用程序，（命令+。），拔下设备，重新插入，然后再次运行应用程序。

为避免将来出现此问题，请记住在停止之前继续（command+control+y 或点击调试器输出附近的播放按钮）。如果您有许多断点或处于循环中，则可以通过转到该行并按 command + \ 来停用一个断点，或者您可以通过按 command + y 来停用所有断点。

如果您最终收到以“这通常意味着此进程的另一个实例已在运行或挂在调试器中”结尾的错误，则需要重新启动设备。

我向 Apple 提交了错误报告。我建议你们都这样做，以便得到应有的关注。

编辑：“qLaunchSuccess 数据包”错误在 Xcode 4.4 或 4.5 中不会像在 4.3 中那样发生。但是，4.4 和 4.5 会遇到“等待应用程序启动超时”——可能与新消息相同的问题。有关一些可能的解决方案，请参阅[此](https://stackoverflow.com/questions/11683308/xcode-4-4-error-timed-out-waiting-for-app-to-launch)问题。还没有什么适合遇见的。该行为似乎与 4.3.3 不同，因为每次我在断点处停止时都不会出现错误。我将进行试验，看看我的 4.3 解决方法是否也解决了 4.4/4.5 问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-03T09:45:11.100

每次我的应用程序崩溃时我都会得到这个，然后我通过运行重新启动它。如果我在跑步之前按下停止按钮，那么我不会得到这个。

一段时间后，如果我先点击运行而不是停止，iPhone 将只显示上述错误消息，唯一的解决方案是重新启动 iPhone。退出并重新启动 Xcode 没有帮助。

这可能是一个 Xcode 错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T15:29:32.613

在不重新启动设备的情况下解决此问题的稍微快一点的方法是更改​​语言。

设置 -> 常规 -> 国际（倒数第四个）-> 语言（顶部）

或者，如果您有一个错误的新闻站应用程序（在文件夹中），只需点击它即可重新启动跳板。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T20:51:04.080

I had this error when I was trying to install over a bad version of the app that had been crashing on launch. Restarting Xcode and the device did not make the error go away, but deleting the app fixed the problem.

# c++ - 扩展 C++ 类/结构的数据成员的更好方法

> ID：10055116
> 
> 赞同：2
> 
> 时间：2012-04-07T14:01:00.060
> 
> 标签：c++, oop, class, containers

我一次又一次地遇到这个问题......仍然没有一个令人满意的答案......

特别是当我将类放入容器时，稍后我需要在特定处理期间记录容器中每个元素的更多信息，但处理后我不再需要额外的信息......

我经常发现一些库试图通过在其数据结构中定义一个 void* 来提供用户定义的数据结构扩展来解决上述情况。与本[问答](https://stackoverflow.com/questions/2749974/whats-void-userdata-exactly)中的描述相同。但它会产生内存/资源处理问题......以及我觉得这种方法容易出错的其他问题。

在面向对象编程的现代，我正在考虑使用继承和多态。在容器中使用基类的指针，但是我必须将派生类的访问器添加到基类中。这有点奇怪...

在 C++ 中保持容器可比性的同时，还有其他更好的方法来扩展类的属性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T14:10:48.947

在不损害对象本身完整性的情况下存储有关对象的额外数据的最佳方法是在容器中存储一对数据。

```
struct User { ... };
struct ExtraData { ... };
typedef std::pair<User, ExtraData> UserAndExtraData; 
```

现在我可以在 C++ 中创建一个容器类型，它将两种信息存储在一起，而不会影响任何一种类型的独立性。

```
std::vector<UserAndExtraData> vector; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T14:10:05.860

我会研究[Decorator Pattern](http://www.oodesign.com/decorator-pattern.html)。您可以在处理对象时装饰它们，然后将装饰的对象扔掉。如果有很多共享数据，您还可以查看[FlyWeight 模式](http://www.oodesign.com/flyweight-pattern.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-07T21:02:46.107

“用户”可以通过模板参数进行扩展。例如，

```
template <typename... Extra>
struct User : Extra...
{
    ...
};

struct ExtraData {...};
struct ExtraExtraData {...};

using ExtraUser = User<ExtraData>;
using MoreExtraUser = User<ExtraData, ExtraExtraData>; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T14:23:44.533

如果您的对象在一个向量中，那么一个简单的方法是创建一个并行向量：

```
void doSomething(const vector<MyObject>& my_objects)
{
  vector<ExtraData> extra_data;
  int n_objects = extra_data.size();
  extra_data.reserve(n_objects);
  for (int i=0; i!=n_objects; ++i) {
    extra_data.push_back(calcExtraData(my_objects[i]));
  }
  // now use my_objects[i] and extra_data[i] together.
  // extra data goes away when the function returns.
} 
```

您不必修改原始对象，而且非常高效。

如果您有其他容器类型，则可以使用地图：

```
void doSomething(const set<MyObject>& my_objects)
{
  map<MyObject*,ExtraData> extra_data;
  set<MyObject>::const_iterator i=my_objects.begin(), end=my_objects.end();
  for (;i!=end;++i) {
    extra_data[&*i] = calcExtraData(*i);
  }
  // now use extra_data[&obj] to access the extra data for obj.
  // extra data goes away when the function returns.
} 
```

这不像向量那样有效，但您仍然不必修改原始类。

但是，如果底层容器在处理过程中可能发生变化，则维护并行结构变得更加困难。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T14:33:57.643

> 在面向对象编程的现代，我正在考虑使用继承和多态。在容器中使用基类的指针，但是我必须将派生类的访问器添加到基类中。这有点臭...

使用继承时，您不需要在基类中放置指向派生类的指针。您只需要强制转换为派生类。问题是当数据存储在基对象中时将数据放入派生对象中 - 如果它们被创建为派生类型，您只能强制转换它们，即使您的集合将它们保存为基类型。（如果它们被创建为派生类型，那么只需转换！）

因此，如果您有 BaseC 的集合，则可以创建一个新类 DerivedC，该类具有一个接受 BaseC 的复制构造函数。您可以将 BaseC 对象复制到其中，对 DerivedC 对象执行处理，然后将它们复制回 BaseC 对象进行存储。这使用享元模式。请注意，如果您有 BaseC 对象的集合，则不能假装它们是 DerivedC 类，因为它们没有存储所有数据成员的存储空间，您需要创建新的 DerivedC 对象。

或者，创建一个仅用于处理的新类，其中包含对基类对象的（智能指针）引用，复制引用，执行处理，完成后删除处理对象。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-07T14:21:11.697

一个简单的选择是添加一个表示“额外数据”的类型参数......

```
template<class ExtraDataType>
struct MyExtensibleContainer
{
    ...
    ExtraDataType extra;
}; 
```

也许如果您指出为什么这个解决方案还不够，那么真正的需求就会出现。

int 和 void* 的示例：

```
struct IntOrVoid
{
};

struct IntOrVoid1 : IntOrVoid
{
    int x;
};

struct IntOrVoid2 : IntOrVoid
{
    void* x;
};

typedef shared_ptr<IntOrVoid> PIntOrVoid;

then use MyExtensibleContainer<PIntOrVoid> 
```

或者：

```
union IntOrVoid
{
    int x_int;
    void* x_voidp;
};

then use MyExtensibleContainer<IntOrVoid> 
```

您描述的问题与添加“额外”数据类型无关。您描述的问题与持有可以具有许多异质类型之一的变体类型有关。有很多方法可以做到这一点，这是一个更普遍的问题。

# iphone - 不触发 self.viewcontroller.webview.delegate = self+PhoneGap+secondtime

> ID：10055119
> 
> 赞同：0
> 
> 时间：2012-04-07T14:01:56.720
> 
> 标签：iphone

我必须第二次重新加载 mainviewcontroller webview 并重新加载 webview。

应用程序：

```
- (void) webViewDidFinishLoad:(UIWebView*) theWebView 
{

    // only valid if FooBar.plist specifies a protocol to handle
    if (self.invokeString)
    {
        // this is passed before the deviceready event is fired, so you can access it in js when you receive deviceready
        NSString* jsString = [NSString stringWithFormat:@"var invokeString = \"%@\";", self.invokeString];
        [theWebView stringByEvaluatingJavaScriptFromString:jsString];

    }else {

         if([loginComplete isEqualToString:@"1"] ){

            NSString *page = @"intro.html";
            NSString* jsString = [NSString stringWithFormat:@"loadParams('%@','%@','%@');", at,userfbid,page];
            [theWebView stringByEvaluatingJavaScriptFromString:jsString];

        }

        else {
            NSString *page = @"friends.html";
            NSString* jsString = [NSString stringWithFormat:@"loadParams('%@','%@','%@');", at,userfbid,page];
            [theWebView stringByEvaluatingJavaScriptFromString:jsString];
        }

        // Black base color for background matches the native apps
        theWebView.backgroundColor = [UIColor grayColor];

        return [self.viewController webViewDidFinishLoad:theWebView];
    }

 -(void)insert{

        self.viewcontroller.webview.delegate=self;

        } 
```

Webdelegate 未在插入中触发。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:48:42.713

尝试这个：

```
return [self webViewDidFinishLoad:theWebView]; 
```

代替：

```
return [self.viewController webViewDidFinishLoad:theWebView]; 
```

因为您的 AppDelegate 是 webView 的 webViewDidFinishLoaded 的委托，而不是 webView 本身。

# css - 将CSS中的嵌入字体提取到TTF文件？

> ID：10055121
> 
> 赞同：3
> 
> 时间：2012-04-07T14:02:07.233
> 
> 标签：css, fonts, truetype

我从 CSS 文件中看到了这些数据

src: url(data:font/truetype;....这里的数据...);

我可以提取这些数据并将其转换为 ttf 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:16:46.077

[http://www.motobit.com/util/base64-decoder-encoder.asp](http://www.motobit.com/util/base64-decoder-encoder.asp)

使用此在线工具将 base64 字符串解码为二进制文件：D

# java - Json Gson 绑定不起作用（异常对象/字符串）

> ID：10055127
> 
> 赞同：0
> 
> 时间：2012-04-07T14:02:41.700
> 
> 标签：java, android, json, gson

我在解析从我的数据库获得的 JSON 到我的 Java (Android) 应用程序时遇到了一些问题。我希望你能帮助我：

这是我拥有的Json：

```
<br>
[{<br>
  "ID" : "1",<br>
  "name" : "Test name",<br>
  "type" : "1",<br>
  "Desc" : "blablabla",<br>
  "minNum" : "0",<br>
  "maxNum" : "12",<br>
  "Num" : "8",<br>
  "bool1" : "0",<br>
  "bool2" : "1",<br>
  "bool3" : "1",<br>
  "date" : "2012-04-01 23:00:00",<br>
  "double1" : "39.47208",<br>
  "doubl2" : "-0.3556063",<br>
  "someText" : "ajayeah",<br>
  "number" : "15",<br>
  "anotherNumber" : "1234"<br>
}, {"ID" : "2",<br>
  "name" : "Test name",<br>
  "type" : "1",<br>
  "Desc" : "blablabla",<br>
  "minNum" : "0",<br>
  "maxNum" : "12",<br>
  "Num" : "8",<br>
  "bool1" : "0",<br>
  "bool2" : "1",<br>
  "bool3" : "1",<br>
  "date" : "2012-04-01 23:00:00",<br>
  "double1" : "39.47208",<br>
  "doubl2" : "-0.3556063",<br>
  "someText" : "ajayeah",<br>
  "number" : "15",<br>
  "anotherNumber" : "1234"<br>
}]<br> 
```

（这些名字显然不是我在这里写的：P）

我将所有这些作为字符串（选中，OK），例如在一个名为 responseString 的变量中；

然后我尝试了所有可能的方法来进行转换，但总是失败。我试图将它作为一个对象删除'['']'，作为一个数组（我实现的东西，但是这条线失败了）：

```
MyClassList MyClas = new Gson().fromJson(responseString, MyClassList.class); 
```

错误是：

```
com.google.gson.JsonSyntaxException: 
java.lang.IllegalStateException: Expected BEGIN_OBJECT but was BEGIN_ARRAY 
```

（其他测试首先将其转换为对象或数组，错误在于 BEGIN_STRING）

可能是因为我使用的是布尔值和日历类型（在日期中）并且 Gson 库不支持它吗？

好吧，我希望你能让我离开这里，因为我要疯了。

谢谢 ：）

* * *

不要使用日历，那是我的问题。相反，您可以使用 Date 并且它可以工作。另外，我不知道为什么，像 "0"|"1" 这样的布尔值不起作用。像“真”|“假”是的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T13:05:56.557

最后，我知道这是我的第三个答案，但是正如您所见，由于日历存在多个答案，因此问题非常复杂。

使用 GSON 不会开箱即用。出于前面所述的原因，我强烈建议放弃日历并转向 JODA。

您正在处理的问题是日期的序列化问题。幸运的是，GSON 允许您为此目的注册自定义序列化程序（不使用您自己的解析器的另一个原因）。您可以为日历编写一个或查找已经编写的一个。

值得庆幸的是，这已经为 JODA DateTimes 完成了，并为那些想要自己编写的人提供了蓝图。

见这里：[https ://sites.google.com/site/gson/gson-type-adapters-for-common-classes](https://sites.google.com/site/gson/gson-type-adapters-for-common-classes)

我是这样实现的：

```
package com.techtrip.test;

import java.lang.reflect.Type;

import org.joda.time.DateTime;

import com.google.gson.JsonDeserializationContext;
import com.google.gson.JsonDeserializer;
import com.google.gson.JsonElement;
import com.google.gson.JsonParseException;
import com.google.gson.JsonPrimitive;
import com.google.gson.JsonSerializationContext;
import com.google.gson.JsonSerializer;

public class DateTimeTypeConverter  implements JsonSerializer<DateTime>, JsonDeserializer<DateTime>  {
      // No need for an InstanceCreator since DateTime provides a no-args constructor
      @Override
      public JsonElement serialize(DateTime src, Type srcType, JsonSerializationContext context) {
        return new JsonPrimitive(src.toString());
      }
      @Override
      public DateTime deserialize(JsonElement json, Type type, JsonDeserializationContext context)
          throws JsonParseException {
        return new DateTime(json.getAsString());
      }
} 
```

完美，所以现在您所要做的就是向 GSON 构建器注册它并将其作为目标类的替代品（在本例中为 DateTime.class）。因此，这将使用此类序列化每个 DateTime。真的很精彩。

以下是如何使用它：

```
public static void main(String[] args) {
    // TODO Auto-generated method stub

    GsonBuilder gsonBuilder = new GsonBuilder();
    gsonBuilder.registerTypeAdapter(DateTime.class, new DateTimeTypeConverter());

    Gson gson = gsonBuilder.create();
    String jsonStr = gson.toJson(target);

    logger.info(String.format("Target As String\n: %s", jsonStr));

    // This will work as well --> ToSerialize test[] =
    // gson.fromJson(jsonStr, target.getClass());
    ToSerialize test[] = gson.fromJson(jsonStr, ToSerialize[].class);

    for (ToSerialize deserialized : test) {
        logger.info(String.format("From JSON\n: %s",
                deserialized.toString()));
    }

    String testString = "[{\"ID\" : \"1\",\"name\" : \"Test name\",\"type\" : \"1\",\"Desc\" : \"blablabla\",\"minNum\" : \"0\",\"maxNum\" : \"12\",\"Num\" : \"8\",\"bool1\" : \"0\",\"bool2\" : \"1\",\"bool3\" : \"1\",\"date\" : \"2012-04-08T07:50:01.600-05:00\",\"double1\" : \"39.47208\",\"doubl2\" : \"-0.3556063\",\"someText\" : \"ajayeah\",\"number\" : \"15\",\"anotherNumber\" : \"1234\"}, {\"ID\" : \"2\",\"name\" : \"Test name\",\"type\" : \"1\",\"Desc\" : \"blablabla\",\"minNum\" : \"0\",\"maxNum\" : \"12\",\"Num\" : \"8\",\"bool1\" : \"0\",\"bool2\" : \"1\",\"bool3\" : \"1\",\"date\" : \"2012-04-08T07:50:01.600-05:00\",\"double1\" : \"39.47208\",\"doubl2\" : \"-0.3556063\",\"someText\" : \"ajayeah\",\"number\" : \"15\",\"anotherNumber\" : \"1234\"}]";

    ToSerialize test2[] = gson.fromJson(testString, ToSerialize[].class);

    for (ToSerialize deserialized : test2) {
        logger.info(String.format("From JSON\n: %s",
                deserialized.toString()));
    }
} 
```

有一些警告，你必须弄清楚这一点。首先，您必须包含完全限定的日期时间格式，例如`2012-04-08T07:50:01.600-05:00`.

其次，您将需要`DateTimeFormatter`诸如 JODA 提供的许多文件来打印这些文件。如果您愿意，您也可以从 JODA 获得日历。

我确信通过一些工作，Java 的日历也可以做到这一点。可能有人已经解决了它。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T15:04:52.967

问题是您试图将一个数组反序列化为一个不是数组的类，并且由于明显的原因这不起作用。由于您知道数组类型，因此只需使用 MyClass[] 的任何实例来获取类。您可以随时创建一个。交替传入`MyClass[].class`（即`MyClass.class`不一样`MyClass[].class`）

如果您创建 log4j.properties 文件（或将记录器转换为系统输出），下面是一个开箱即用的示例：

```
package com.techtrip.test;

import java.io.Serializable;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.google.gson.Gson;

public class GsonTest {

    private static Logger logger = LoggerFactory.getLogger(GsonTest.class);

    static ToSerialize t1 = new ToSerialize("1", "Test 1");
    static ToSerialize t2 = new ToSerialize("2", "Test 2");

    static ToSerialize target[] = {t1,t2} ;

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        Gson gson = new Gson(); 

        String jsonStr = gson.toJson(target);

        logger.info(String.format("Target As String\n: %s", jsonStr));

        // This will work as well --> ToSerialize test[] = gson.fromJson(jsonStr, target.getClass());
        ToSerialize test[] = gson.fromJson(jsonStr, ToSerialize[].class);

        for (ToSerialize deserialized: test){
            logger.info(String.format("From JSON\n: %s", deserialized.toString()));
        }
    }

}

class ToSerialize implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    private String iD;
    private String name;

    public ToSerialize() {
        // TODO Auto-generated constructor stub
    }

    public ToSerialize(String iD, String name) {
        super();
        this.iD = iD;
        this.name = name;
    }

    public String getiD() {
        return iD;
    }
    public void setiD(String iD) {
        this.iD = iD;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((iD == null) ? 0 : iD.hashCode());
        result = prime * result + ((name == null) ? 0 : name.hashCode());
        return result;
    }
    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        ToSerialize other = (ToSerialize) obj;
        if (iD == null) {
            if (other.iD != null)
                return false;
        } else if (!iD.equals(other.iD))
            return false;
        if (name == null) {
            if (other.name != null)
                return false;
        } else if (!name.equals(other.name))
            return false;
        return true;
    }

    @Override
    public String toString() {
        return "ToSerialize [iD=" + iD + ", name=" + name + "]";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T20:18:13.517

更新：我想添加以下内容作为评论，但它太长了。好的，我想我知道是什么原因造成的。看看例外`"Expected BEGIN_OBJECT but was BEGIN_ARRAY"`情况，这会以两种方式之一发生，因为 Gson 试图获得下一个值。BEGIN_OBJECT 由 表示`{`，BEGIN_ARRAY 为`[`。

由于某种原因，解析器将您的 JSON 字符串视为开始如下：`"[[{\"ID\"`

当通过 javascript 或真正添加额外括号以尝试将其转义为 JSON 时，当它已经是 JSON 格式时，可能会发生这种情况。

果然，当我以这种方式更改我的字符串时，我得到：

`Exception in thread "main" com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was BEGIN_ARRAY at line 1 column 3`

您没有发布整个异常，但我已经看到发生了这样的转换。我担心当解析器不是问题时，您会编写自己的 JSON 解析器。

================ 下面的原始答案====================

我修改了上面的原始类以镜像您的 JSON 字符串，它工作得很好。我不在 Android 上，也许你正在捕捉一些特别是在那个环境中导致你的问题的东西。如果日期是一个问题，您将获得无法解析的日期作为 JSON 异常，这就是我的设置`"2012-04-01 23:00:00"`失败但`Apr 7, 2012 3:07:40 PM`没有失败的情况。

这是它的外观：

```
 String testString = "[{\"ID\" : \"1\",\"name\" : \"Test name\",\"type\" : \"1\",\"Desc\" : \"blablabla\",\"minNum\" : \"0\",\"maxNum\" : \"12\",\"Num\" : \"8\",\"bool1\" : \"0\",\"bool2\" : \"1\",\"bool3\" : \"1\",\"date\" : \"Apr 7, 2012 3:07:40 PM\",\"double1\" : \"39.47208\",\"doubl2\" : \"-0.3556063\",\"someText\" : \"ajayeah\",\"number\" : \"15\",\"anotherNumber\" : \"1234\"}, {\"ID\" : \"2\",\"name\" : \"Test name\",\"type\" : \"1\",\"Desc\" : \"blablabla\",\"minNum\" : \"0\",\"maxNum\" : \"12\",\"Num\" : \"8\",\"bool1\" : \"0\",\"bool2\" : \"1\",\"bool3\" : \"1\",\"date\" : \"Apr 7, 2012 3:07:40 PM\",\"double1\" : \"39.47208\",\"doubl2\" : \"-0.3556063\",\"someText\" : \"ajayeah\",\"number\" : \"15\",\"anotherNumber\" : \"1234\"}]";

    ToSerialize test2[] = gson.fromJson(testString, ToSerialize[].class);

    for (ToSerialize deserialized : test2) {
        logger.info(String.format("From JSON\n: %s",
                deserialized.toString()));
    } 
```

这是输出：

```
ToSerialize [ID=2, name=Test name, Desc=blablabla, minNum=0, maxNum=12, Num=8, bool1=false, bool2=false, bool3=false, date=Sat Apr 07 15:07:40 CDT 2012, double1=39.47208, doubl2=-0.3556063, someText=ajayeah, number=15, anotherNumber=1234] 
```

这是类定义（删节），我什至扔了一个布尔值来笑）

```
class ToSerialize {
    int ID;
    String name;
    String Desc;
    int minNum;
    int maxNum;
    int Num;
    Boolean bool1;
    boolean bool2;
    boolean bool3;
    Date date;
    double double1;
    double doubl2;
    String someText;
    int number;
    int anotherNumber;
    ...... 
```

无论如何，这应该有效。

我正在使用最新的 2.1 版本的 GSON。这可能是某个地方的错误，因为它应该对您有用。

# ruby-on-rails - 嵌套关联rails方式

> ID：10055133
> 
> 赞同：0
> 
> 时间：2012-04-07T14:03:08.770
> 
> 标签：ruby-on-rails, activerecord, associations

我对 Rails 还很陌生，我正在尝试更好地了解如何利用 Rails 框架进行关联。

虽然它不是特定于我的应用程序，但结构是相似的——在我的示例中，我将使用标准的 blog associates。

示例模型：

```
class Author < ActiveRecord::Base
    has_many :posts, :through => :posts
end

class Post < ActiveRecord::Base
    belongs_to :author
    has_many :comments
end

class Comment < ActiveRecord::Base
    belongs_to :post
end 
```

我的挑战是我想选择属于特定作者的所有评论。我了解如何引用与特定帖子相关联的帖子和作者元素：

```
comment_author = Comment.first
puts comment_author.post.author.name 
```

但正如我所说，我正在尝试选择属于特定作者的所有评论。我可以通过执行 find_by_sql 来完成此操作，但我想确保数据库独立性并且我想以“Rails 方式”来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:04:58.740

您可以使用`has_many :through`关联：

```
class Author < ActiveRecord::Base
    has_many :posts
    has_many :comments, :through => :posts
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:07:33.770

* * *

@Femaref 为您的问题提供了确切答案，您应该接受它。我的只是一个补充。

* * *

如果作者可以对帖子发表评论，您可能需要执行以下操作：

```
class Author
  has_many :posts
  has_many :comments
  has_many :responses, through: :posts, source: :comments                           
end

class Post
  belongs_to :author
  has_many :comments
end

class Comment
  belongs_to :author
  belongs_to :post
end 
```

要获得所有留下的评论`sophia`：`sophia.comments`

`sophia`要获得所有帖子留下的评论：`sophia.responses`

请参阅（尤其是和）的[选项`has_many`](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many-label-Options)`through``source`

# windows - 在 windows vista for apache7.0.25 中找不到 htdoc 文件夹

> ID：10055144
> 
> 赞同：0
> 
> 时间：2012-04-07T14:04:25.463
> 
> 标签：windows, apache, tomcat

我尝试在 C:\Program Files\Apache Software Foundation\ 目录中查找 htdoc 文件夹。检查了每个子文件夹，但无法找到它请帮助。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:00:49.323

htdocs 文件夹是 Apache HTTP 服务器存储其文档的特殊文件夹。

Apache Tomcat（一个 servlet 引擎）没有这样的东西。

看起来你的问题有些不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T14:08:12.493

查看您的 apache 配置并搜索 DirectoryRoot。它应该在那里配置。

您也可以从[http://www.apachefriends.org/](http://www.apachefriends.org/)下载 XAMPP 。它非常适合在 Windows 上进行 Web 开发，并且拥有您需要的一切。

# c# - 如何本地化 AppBar 按钮

> ID：10055145
> 
> 赞同：25
> 
> 时间：2012-04-07T14:04:39.320
> 
> 标签：c#, xaml, windows-8, localization

我有一个从 Grid Application 模板创建的 Windows 8 Metro 应用程序。我需要本地化 AppBar 中的按钮。Normaly 我使用 x:Uid 和 .resw 进行本地化，但这不适用于 AppBar 中的导航按钮。

例如，对于主页按钮，我需要本地化“主页”文本。“Home”文本在 StandardStyles.xaml 中定义如下：

```
<Setter Property="AutomationProperties.Name" Value="Home"/> 
```

我尝试在 resw 中定义 HomeButton.AutomationProperties.Name 但我得到了

> 处理 Uid 的属性时无法解析属性“AutomationProperties.Name”

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-09T18:00:14.557

看看[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965329.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965329.aspx)，它展示了如何对这样的附加属性使用正确的 RESW 语法。因此，如果您使用的是按钮样式，则可以执行以下操作：

```
<Button Style="{StaticResource HomeAppBarButtonStyle}" x:Uid="HomeButton" /> 
```

然后在您的 RESW 中，您将拥有：

```
HomeButton.[using:Windows.UI.Xaml.Automation]AutomationProperties.Name 
```

作为您的关键值。

希望这可以帮助！

# c - sscanf 和换行符

> ID：10055150
> 
> 赞同：10
> 
> 时间：2012-04-07T14:05:00.787
> 
> 标签：c, newline, eof, scanf

我需要像这样解析来自服务器的响应：

意大利饭：

```
200\n
Len 1040\n
Expire 30\n
\n
1111111111111111111111111\n
1111111111111111111111111\n
1111111111111111111111111\n 
```

我正在尝试使用 sscanf：

```
sscanf(risposta, "%d\nLen %d\nExpire %d\n\n%s[^\0]", &risp->type, &risp->len, &risp->expire, risp->risorsa); 
```

但它只将 1111111111111111111111111 放在 risp->risorsa 中。如何解决？

ps 结构 risp：

```
typedef struct Server_risp {
   int type;
   int expire;
   int len;
   int sup;
   int inf;
   char risorsa[5000];
 }Server_risp; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T14:19:41.353

扫描集规范不是`%s[whatever]`，它只是`%[whatever]`，所以你的格式字符串应该更像：`"%d\nLen %d\nExpire %d\n\n%[^\0]"`。

作为旁注，`scanf`朋友认为格式字符串中的任何空格都等效于任何其他空格——格式中的任何空格都匹配输入中的任意空格字符序列（并且换行符被认为是空格）。您当前的格式字符串很好地记录了您期望的格式，但从它真正匹配的角度来看，您可以将其更改为：`"%d Len %d Expire %d %[^\0]"`而不影响它将做什么。特别是，您连续的两条换行符并没有真正取得太大成就。

编辑：考虑一下，`[\0]`原因只是有点问题：“\ 0”终止了字符串，因此您最终得到了无效的扫描集规范。由于您只希望输入的其余部分进入`risorsa`，因此使用它可能是最简单的`%c`: `"%d Len %d Expire %d %4999c"`。

是的，这次我实际测试了它：

```
#include <stdio.h>

char *riposta = "200\n"
    "Len 1040\nExpire 30\n"
    "\n1111111111111111111111111\n"
    "1111111111111111111111111\n"
    "1111111111111111111111111\n";

typedef struct Server_risp {
    int type;
    int expire;
    int len;
    int sup;
    int inf;
    char risorsa[5000];
}Server_risp;

int main() {
    Server_risp risp;
   sscanf(riposta, "%d Len %d Expire %d %4999c", &risp.type, &risp.len, &risp.expire, risp.risorsa);

   printf("%s\n", risp.risorsa);
} 
```

结果：

```
1111111111111111111111111
1111111111111111111111111
1111111111111111111111111 
```

编辑2：我不确定您在这里遇到了什么问题。我对其进行了一些修改以显示读取前导和嵌入的空白：

```
#include <stdio.h>

char *riposta = "200\n"
"Len 1040\nExpire 30\n"
"|        |"
"\n1111111111111111111111111\n"
"1111111111111111111111111\n"
"1111111111111111111111111\n";

typedef struct Server_risp {
    int type;
    int expire;
    int len;
    int sup;
    int inf;
    char risorsa[5000];
}Server_risp;

int main() {
    Server_risp risp;
    sscanf(riposta, "%d Len %d Expire %d%4999c", &risp.type, &risp.len, &risp.expire, risp.risorsa);

    printf("%s\n", risp.risorsa);
} 
```

...并得到了几乎预期的结果：

```
|        |
1111111111111111111111111
1111111111111111111111111
1111111111111111111111111 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T00:57:45.333

我想指出解决问题的方法：

```
sscanf(risposta, "%d\nLen %d\nExpire %d\n\n%s[^\0]", &risp->type, &risp->len, &risp->expire, risp->risorsa); 
```

代码中的问题是 '\0' 在右括号 ']' 之前终止字符串。你可以使用'\1'。然后，字符串不会被提前终止，sscanf 将继续扫描，直到用完字符串。

更正后的代码是：

```
sscanf(risposta, "%d\nLen %d\nExpire %d\n\n%s[^\1]", &risp->type, &risp->len, &risp->expire, risp->risorsa); 
```

也许这就是你一开始想做的事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-07T14:12:08.150

以下代码存在一些问题：

```
sscanf(risposta, "%d\nLen %d\nExpire %d\n\n%s[^\0]", &risp->type, &risp->len, &risp->expire, risp->risorsa); 
```

它应该是：

```
char tmp_str[100]; 

sscanf(risposta, "%d %s %d %s %d %s[^\0]", &risp->type, tmp_str, &risp->len, tmp_str, &risp->expire, risp->risorsa); 
```

您应该处理字符串“Len”和“Expire”，而 sscanf 无法处理。

# php - php preg_match 字符

> ID：10055151
> 
> 赞同：0
> 
> 时间：2012-04-07T14:05:22.793
> 
> 标签：php, preg-match, character, special-characters

我需要 php 中 preg_match 函数的帮助。我已经阅读了很多关于 SO 的答案，但我无法获得任何需要的信息。

所以，我希望 preg_match 检查字符`a-z, A-Z, 0-9,`特殊字符`č, š, ž, đ, ć, Č, Š, Ž, Đ, Ć`和`! " # $ % & / ( ) = ? * ° ' + - * . , - _ ; :`

对于第一部分`(a-z, A-Z, 0-9)`，我看到了它是如何完成的，但对于下一部分，我不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T14:24:36.850

只需列出[字符类](http://www.php.net/manual/en/regexp.reference.character-classes.php)中的所有字符：

```
[a-zA-Z0-9čšžđćČŠŽĐĆ!"#$%&/()=?*°'+*.,_;:-] 
```

由于减号具有特殊的语义，我将它移到了它[没有特殊语义](https://twitter.com/#!/RegexTip/status/187555606658433024)的末尾。确保您的编辑器编码与输入编码匹配（即到处使用 UTF-8）。

顺便说一句，这个清单实在是太过分了。您可能只想简单地使用`\w`，[它代表任意单词字符](http://www.php.net/manual/en/regexp.reference.escape.php)，或`\S`（除空格之外的任何内容）。

# c# - C# 中是否有任何 JSON Web 令牌 (JWT) 示例？

> ID：10055158
> 
> 赞同：114
> 
> 时间：2012-04-07T14:07:03.520
> 
> 标签：c#, oauth, oauth-2.0, jwt

我觉得我在这里服用疯狂的药丸。通常，对于任何给定的任务，网络上总是有一百万个库和样本。[我正在尝试使用此处](https://developers.google.com/accounts/docs/OAuth2ServiceAccount#libraries)描述的 JSON Web Tokens (JWT) 使用 Google“服务帐户”实现身份验证。

然而，只有 PHP、Python 和 Java 中的客户端库。即使在 Google 的身份验证之外搜索 JWT 示例，关于 JWT 的概念也只有蟋蟀和草稿。这真的很新，而且可能是谷歌专有系统吗？

我能解释的最接近的 java 示例看起来非常密集且令人生畏。C# 中必须有一些我至少可以开始的东西。对此的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-04-11T13:23:21.640

谢谢大家。我找到了一个 Json Web Token 的基本实现，并用 Google 风格对其进行了扩展。我还没有完全解决它，但它已经完成了 97%。这个项目失去了动力，所以希望这将帮助其他人获得良好的开端：

注意：我对基本实现所做的更改（不记得我在哪里找到的）是：

> 1.  更改 HS256 -> RS256
> 2.  交换了标头中的 JWT 和 alg 顺序。不确定是谁弄错了，谷歌还是规范，但谷歌按照他们的文档采用了如下方式。

```
public enum JwtHashAlgorithm
{
    RS256,
    HS384,
    HS512
}

public class JsonWebToken
{
    private static Dictionary<JwtHashAlgorithm, Func<byte[], byte[], byte[]>> HashAlgorithms;

    static JsonWebToken()
    {
        HashAlgorithms = new Dictionary<JwtHashAlgorithm, Func<byte[], byte[], byte[]>>
            {
                { JwtHashAlgorithm.RS256, (key, value) => { using (var sha = new HMACSHA256(key)) { return sha.ComputeHash(value); } } },
                { JwtHashAlgorithm.HS384, (key, value) => { using (var sha = new HMACSHA384(key)) { return sha.ComputeHash(value); } } },
                { JwtHashAlgorithm.HS512, (key, value) => { using (var sha = new HMACSHA512(key)) { return sha.ComputeHash(value); } } }
            };
    }

    public static string Encode(object payload, string key, JwtHashAlgorithm algorithm)
    {
        return Encode(payload, Encoding.UTF8.GetBytes(key), algorithm);
    }

    public static string Encode(object payload, byte[] keyBytes, JwtHashAlgorithm algorithm)
    {
        var segments = new List<string>();
        var header = new { alg = algorithm.ToString(), typ = "JWT" };

        byte[] headerBytes = Encoding.UTF8.GetBytes(JsonConvert.SerializeObject(header, Formatting.None));
        byte[] payloadBytes = Encoding.UTF8.GetBytes(JsonConvert.SerializeObject(payload, Formatting.None));
        //byte[] payloadBytes = Encoding.UTF8.GetBytes(@"{"iss":"761326798069-r5mljlln1rd4lrbhg75efgigp36m78j5@developer.gserviceaccount.com","scope":"https://www.googleapis.com/auth/prediction","aud":"https://accounts.google.com/o/oauth2/token","exp":1328554385,"iat":1328550785}");

        segments.Add(Base64UrlEncode(headerBytes));
        segments.Add(Base64UrlEncode(payloadBytes));

        var stringToSign = string.Join(".", segments.ToArray());

        var bytesToSign = Encoding.UTF8.GetBytes(stringToSign);

        byte[] signature = HashAlgorithms[algorithm](keyBytes, bytesToSign);
        segments.Add(Base64UrlEncode(signature));

        return string.Join(".", segments.ToArray());
    }

    public static string Decode(string token, string key)
    {
        return Decode(token, key, true);
    }

    public static string Decode(string token, string key, bool verify)
    {
        var parts = token.Split('.');
        var header = parts[0];
        var payload = parts[1];
        byte[] crypto = Base64UrlDecode(parts[2]);

        var headerJson = Encoding.UTF8.GetString(Base64UrlDecode(header));
        var headerData = JObject.Parse(headerJson);
        var payloadJson = Encoding.UTF8.GetString(Base64UrlDecode(payload));
        var payloadData = JObject.Parse(payloadJson);

        if (verify)
        {
            var bytesToSign = Encoding.UTF8.GetBytes(string.Concat(header, ".", payload));
            var keyBytes = Encoding.UTF8.GetBytes(key);
            var algorithm = (string)headerData["alg"];

            var signature = HashAlgorithms[GetHashAlgorithm(algorithm)](keyBytes, bytesToSign);
            var decodedCrypto = Convert.ToBase64String(crypto);
            var decodedSignature = Convert.ToBase64String(signature);

            if (decodedCrypto != decodedSignature)
            {
                throw new ApplicationException(string.Format("Invalid signature. Expected {0} got {1}", decodedCrypto, decodedSignature));
            }
        }

        return payloadData.ToString();
    }

    private static JwtHashAlgorithm GetHashAlgorithm(string algorithm)
    {
        switch (algorithm)
        {
            case "RS256": return JwtHashAlgorithm.RS256;
            case "HS384": return JwtHashAlgorithm.HS384;
            case "HS512": return JwtHashAlgorithm.HS512;
            default: throw new InvalidOperationException("Algorithm not supported.");
        }
    }

    // from JWT spec
    private static string Base64UrlEncode(byte[] input)
    {
        var output = Convert.ToBase64String(input);
        output = output.Split('=')[0]; // Remove any trailing '='s
        output = output.Replace('+', '-'); // 62nd char of encoding
        output = output.Replace('/', '_'); // 63rd char of encoding
        return output;
    }

    // from JWT spec
    private static byte[] Base64UrlDecode(string input)
    {
        var output = input;
        output = output.Replace('-', '+'); // 62nd char of encoding
        output = output.Replace('_', '/'); // 63rd char of encoding
        switch (output.Length % 4) // Pad with trailing '='s
        {
            case 0: break; // No pad chars in this case
            case 2: output += "=="; break; // Two pad chars
            case 3: output += "="; break; // One pad char
            default: throw new System.Exception("Illegal base64url string!");
        }
        var converted = Convert.FromBase64String(output); // Standard base64 decoder
        return converted;
    }
} 
```

然后是我的谷歌特定 JWT 类：

```
public class GoogleJsonWebToken
{
    public static string Encode(string email, string certificateFilePath)
    {
        var utc0 = new DateTime(1970,1,1,0,0,0,0, DateTimeKind.Utc);
        var issueTime = DateTime.Now;

        var iat = (int)issueTime.Subtract(utc0).TotalSeconds;
        var exp = (int)issueTime.AddMinutes(55).Subtract(utc0).TotalSeconds; // Expiration time is up to 1 hour, but lets play on safe side

        var payload = new
        {
            iss = email,
            scope = "https://www.googleapis.com/auth/gan.readonly",
            aud = "https://accounts.google.com/o/oauth2/token",
            exp = exp,
            iat = iat
        };

        var certificate = new X509Certificate2(certificateFilePath, "notasecret");

        var privateKey = certificate.Export(X509ContentType.Cert);

        return JsonWebToken.Encode(payload, privateKey, JwtHashAlgorithm.RS256);
    }
} 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-11-29T06:19:14.533

在最初的问题之后几个月过去了，现在值得指出的是，微软已经设计了自己的解决方案。请参阅[http://blogs.msdn.com/b/vbertocci/archive/2012/11/20/introducing-the-developer-preview-of-the-json-web-token-handler-for-the-microsoft-net -framework-4-5.aspx](http://blogs.msdn.com/b/vbertocci/archive/2012/11/20/introducing-the-developer-preview-of-the-json-web-token-handler-for-the-microsoft-net-framework-4-5.aspx)了解详细信息。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-05-10T14:02:39.920

我从未使用过它，但 NuGet 上有一个 JWT 实现。

包：[https ://nuget.org/packages/JWT](https://nuget.org/packages/JWT)

来源：[https ://github.com/johnsheehan/jwt](https://github.com/johnsheehan/jwt)

.NET 4.0 兼容：[https ://www.nuget.org/packages/jose-jwt/](https://www.nuget.org/packages/jose-jwt/)

你也可以去这里：[https](https://jwt.io/) ://jwt.io/并点击“libraries”。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-12-17T13:54:28.787

这是一个工作示例：

[http://zavitax.wordpress.com/2012/12/17/logging-in-with-google-service-account-in-c-jwt/](http://zavitax.wordpress.com/2012/12/17/logging-in-with-google-service-account-in-c-jwt/)

收集散落在网络上的碎片花了相当长的时间，文档相当不完整......

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-05-10T15:06:26.057

这是我在 .NET 中实现 (Google) JWT 验证。它基于 Stack Overflow 和 GitHub gists 上的其他实现。

```
using Microsoft.IdentityModel.Tokens;
using System;
using System.Collections.Generic;
using System.IdentityModel.Tokens.Jwt;
using System.Linq;
using System.Net.Http;
using System.Security.Claims;
using System.Security.Cryptography.X509Certificates;
using System.Text;
using System.Threading.Tasks;

namespace QuapiNet.Service
{
    public class JwtTokenValidation
    {
        public async Task<Dictionary<string, X509Certificate2>> FetchGoogleCertificates()
        {
            using (var http = new HttpClient())
            {
                var response = await http.GetAsync("https://www.googleapis.com/oauth2/v1/certs");

                var dictionary = await response.Content.ReadAsAsync<Dictionary<string, string>>();
                return dictionary.ToDictionary(x => x.Key, x => new X509Certificate2(Encoding.UTF8.GetBytes(x.Value)));
            }
        }

        private string CLIENT_ID = "xxx.apps.googleusercontent.com";

        public async Task<ClaimsPrincipal> ValidateToken(string idToken)
        {
            var certificates = await this.FetchGoogleCertificates();

            TokenValidationParameters tvp = new TokenValidationParameters()
            {
                ValidateActor = false, // check the profile ID

                ValidateAudience = true, // check the client ID
                ValidAudience = CLIENT_ID,

                ValidateIssuer = true, // check token came from Google
                ValidIssuers = new List<string> { "accounts.google.com", "https://accounts.google.com" },

                ValidateIssuerSigningKey = true,
                RequireSignedTokens = true,
                IssuerSigningKeys = certificates.Values.Select(x => new X509SecurityKey(x)),
                IssuerSigningKeyResolver = (token, securityToken, kid, validationParameters) =>
                {
                    return certificates
                    .Where(x => x.Key.ToUpper() == kid.ToUpper())
                    .Select(x => new X509SecurityKey(x.Value));
                },
                ValidateLifetime = true,
                RequireExpirationTime = true,
                ClockSkew = TimeSpan.FromHours(13)
            };

            JwtSecurityTokenHandler jsth = new JwtSecurityTokenHandler();
            SecurityToken validatedToken;
            ClaimsPrincipal cp = jsth.ValidateToken(idToken, tvp, out validatedToken);

            return cp;
        }
    }
} 
```

请注意，为了使用它，您需要添加对 NuGet 包的引用`System.Net.Http.Formatting.Extension`。没有这个，编译器将无法识别该`ReadAsAsync<>`方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-07T16:51:23.900

查看[适用于 .NET 的 Google 客户端库](http://code.google.com/p/google-api-dotnet-client/)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-05-22T03:43:09.483

最好使用标准和著名的库，而不是从头开始编写代码。

1.  用于编码和解码 JWT 令牌的[JWT](https://github.com/jwt-dotnet/jwt)
2.  [Bouncy Castle](http://www.bouncycastle.org/csharp/)支持加解密，特别是 RS256[在这里搞定](https://www.nuget.org/packages/BouncyCastle/)

使用这些库，您可以生成 JWT 令牌并使用 RS256 对其进行签名，如下所示。

```
public string GenerateJWTToken(string rsaPrivateKey)
{
    var rsaParams = GetRsaParameters(rsaPrivateKey);
    var encoder = GetRS256JWTEncoder(rsaParams);

    // create the payload according to the Google's doc
    var payload = new Dictionary<string, object>
    {
        { "iss", ""},
        { "sub", "" },
        // and other key-values according to the doc
    };

    // add headers. 'alg' and 'typ' key-values are added automatically.
    var header = new Dictionary<string, object>
    {
        { "kid", "{your_private_key_id}" },
    };

    var token = encoder.Encode(header,payload, new byte[0]);

    return token;
}

private static IJwtEncoder GetRS256JWTEncoder(RSAParameters rsaParams)
{
    var csp = new RSACryptoServiceProvider();
    csp.ImportParameters(rsaParams);

    var algorithm = new RS256Algorithm(csp, csp);
    var serializer = new JsonNetSerializer();
    var urlEncoder = new JwtBase64UrlEncoder();
    var encoder = new JwtEncoder(algorithm, serializer, urlEncoder);

    return encoder;
}

private static RSAParameters GetRsaParameters(string rsaPrivateKey)
{
    var byteArray = Encoding.ASCII.GetBytes(rsaPrivateKey);
    using (var ms = new MemoryStream(byteArray))
    {
        using (var sr = new StreamReader(ms))
        {
            // use Bouncy Castle to convert the private key to RSA parameters
            var pemReader = new PemReader(sr);
            var keyPair = pemReader.ReadObject() as AsymmetricCipherKeyPair;
            return DotNetUtilities.ToRSAParameters(keyPair.Private as RsaPrivateCrtKeyParameters);
        }
    }
} 
```

ps：RSA 私钥的格式如下：

```
-----BEGIN RSA PRIVATE KEY-----
 {base64 formatted value}
-----END RSA PRIVATE KEY----- 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-12T17:20:17.460

这是另一个**仅 REST 的**工作示例，用于访问**G Suite**用户和组的 Google 服务帐户，通过**JWT**进行身份验证。这只能通过 Google 库的反射来实现，因为这些 API 的 Google 文档非常**糟糕**。任何使用 MS 技术编码的人都很难弄清楚 Google 服务中的所有内容是如何组合在一起的。

```
$iss = "<name>@<serviceaccount>.iam.gserviceaccount.com"; # The email address of the service account.
$sub = "impersonate.user@mydomain.com"; # The user to impersonate (required).
$scope = "https://www.googleapis.com/auth/admin.directory.user.readonly https://www.googleapis.com/auth/admin.directory.group.readonly";
$certPath = "D:\temp\mycertificate.p12";
$grantType = "urn:ietf:params:oauth:grant-type:jwt-bearer";

# Auxiliary functions
function UrlSafeEncode([String] $Data) {
    return $Data.Replace("=", [String]::Empty).Replace("+", "-").Replace("/", "_");
}

function UrlSafeBase64Encode ([String] $Data) {
    return (UrlSafeEncode -Data ([Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes($Data))));
}

function KeyFromCertificate([System.Security.Cryptography.X509Certificates.X509Certificate2] $Certificate) {
    $privateKeyBlob = $Certificate.PrivateKey.ExportCspBlob($true);
    $key = New-Object System.Security.Cryptography.RSACryptoServiceProvider;
    $key.ImportCspBlob($privateKeyBlob);
    return $key;
}

function CreateSignature ([Byte[]] $Data, [System.Security.Cryptography.X509Certificates.X509Certificate2] $Certificate) {
    $sha256 = [System.Security.Cryptography.SHA256]::Create();
    $key = (KeyFromCertificate $Certificate);
    $assertionHash = $sha256.ComputeHash($Data);
    $sig = [Convert]::ToBase64String($key.SignHash($assertionHash, "2.16.840.1.101.3.4.2.1"));
    $sha256.Dispose();
    return $sig;
}

function CreateAssertionFromPayload ([String] $Payload, [System.Security.Cryptography.X509Certificates.X509Certificate2] $Certificate) {
    $header = @"
{"alg":"RS256","typ":"JWT"}
"@;
    $assertion = New-Object System.Text.StringBuilder;

    $assertion.Append((UrlSafeBase64Encode $header)).Append(".").Append((UrlSafeBase64Encode $Payload)) | Out-Null;
    $signature = (CreateSignature -Data ([System.Text.Encoding]::ASCII.GetBytes($assertion.ToString())) -Certificate $Certificate);
    $assertion.Append(".").Append((UrlSafeEncode $signature)) | Out-Null;
    return $assertion.ToString();
}

$baseDateTime = New-Object DateTime(1970, 1, 1, 0, 0, 0, [DateTimeKind]::Utc);
$timeInSeconds = [Math]::Truncate([DateTime]::UtcNow.Subtract($baseDateTime).TotalSeconds);

$jwtClaimSet = @"
{"scope":"$scope","email_verified":false,"iss":"$iss","sub":"$sub","aud":"https://oauth2.googleapis.com/token","exp":$($timeInSeconds + 3600),"iat":$timeInSeconds}
"@;

$cert = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2($certPath, "notasecret", [System.Security.Cryptography.X509Certificates.X509KeyStorageFlags]::Exportable);
$jwt = CreateAssertionFromPayload -Payload $jwtClaimSet -Certificate $cert;

# Retrieve the authorization token.
$authRes = Invoke-WebRequest -Uri "https://oauth2.googleapis.com/token" -Method Post -ContentType "application/x-www-form-urlencoded" -UseBasicParsing -Body @"
assertion=$jwt&grant_type=$([Uri]::EscapeDataString($grantType))
"@;
$authInfo = ConvertFrom-Json -InputObject $authRes.Content;

$resUsers = Invoke-WebRequest -Uri "https://www.googleapis.com/admin/directory/v1/users?domain=<required_domain_name_dont_trust_google_documentation_on_this>" -Method Get -Headers @{
    "Authorization" = "$($authInfo.token_type) $($authInfo.access_token)"
}

$users = ConvertFrom-Json -InputObject $resUsers.Content;

$users.users | ft primaryEmail, isAdmin, suspended; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-11T17:02:02.947

以下是类和函数的列表：

```
open System
open System.Collections.Generic
open System.Linq
open System.Threading.Tasks
open Microsoft.AspNetCore.Mvc
open Microsoft.Extensions.Logging
open Microsoft.AspNetCore.Authorization
open Microsoft.AspNetCore.Authentication
open Microsoft.AspNetCore.Authentication.JwtBearer
open Microsoft.IdentityModel.Tokens
open System.IdentityModel.Tokens
open System.IdentityModel.Tokens.Jwt
open Microsoft.IdentityModel.JsonWebTokens
open System.Text
open Newtonsoft.Json
open System.Security.Claims
    let theKey = "VerySecretKeyVerySecretKeyVerySecretKey"
    let securityKey = SymmetricSecurityKey(Encoding.UTF8.GetBytes(theKey))
    let credentials = SigningCredentials(securityKey, SecurityAlgorithms.RsaSsaPssSha256)
    let expires = DateTime.UtcNow.AddMinutes(123.0) |> Nullable
    let token = JwtSecurityToken(
                    "lahoda-pro-issuer", 
                    "lahoda-pro-audience",
                    claims = null,
                    expires =  expires,
                    signingCredentials = credentials
        )

    let tokenString = JwtSecurityTokenHandler().WriteToken(token) 
```

# php - 通过 POST 变量设置 cURL 地址

> ID：10055159
> 
> 赞同：0
> 
> 时间：2012-04-07T14:07:18.213
> 
> 标签：php, ajax, curl

我一直在尝试在 PHP 中使用带有动态地址的 cURL（即通过 POST 变量设置），但它不起作用！

```
<?php
$address = $_POST['address'];

//echo $address;
//$address = "http://twitter.com";

$curl_handle=curl_init();
curl_setopt($curl_handle,CURLOPT_URL, $address);
curl_setopt($curl_handle,CURLOPT_CONNECTTIMEOUT,2);
curl_setopt($curl_handle,CURLOPT_RETURNTRANSFER,1);
$buffer = curl_exec($curl_handle);
curl_close($curl_handle);

if (empty($buffer)) {
    echo "Sorry, ".$address." are a bunch of poopy-heads.<p>";
}
else {
    echo $buffer;
}
?> 
```

我知道 POST 正在工作，因为我可以回显 $address 变量并查看我发送的 $address 的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:10:54.653

好的，既然你知道`$_POST`它正在工作，那么让我们看看你的 cURL。

这是我通常使用的功能。也许你可以试一试？

**代码 ：**

```
function getCurl(
                $url,
                $returntransfer=1, $httpproxytunnel=1, $referer=null,
                $useragent=null, $header=null, $httpheader=null,
                $proxy=null, $port=null
                )
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, $returntransfer);
    curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, $httpproxytunnel);

    if ($referer!=null)
        curl_setopt($ch, CURLOPT_REFERER, $referer);
    if ($useragent!=null)
        curl_setopt($ch, CURLOPT_USERAGENT, $useragent);
    if ($header!=null)
        curl_setopt($ch, CURLOPT_HEADER, $header);
    if ($httpheader!=null)
        curl_setopt($ch, CURLOPT_HTTPHEADER, $httpheader);
    if ($proxy!=null)
        curl_setopt($ch, CURLOPT_PROXY, $proxy);
    if ($port!=null)
        curl_setopt($ch, CURLOPT_PORT, $port);

    curl_setopt($ch, CURLOPT_TIMEOUT, 40);

    $result['DATA'] = curl_exec($ch);
    $result['INFO'] = curl_getinfo($ch);
    $result['ERROR'] = curl_error($ch); 

    return $result;
}

function getFile($url)
{
    $data = getCurl($url);

    return $data['DATA'];
} 
```

**并像这样使用它：**

```
<?php
     $fileContents = getFile("http://www.somedomain.com/a-path-to-your-file.html");
     echo $fileContents;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T22:39:48.697

存在输入卫生问题，其中 $address 变量的值中有一个空格。

# javascript - onmouseover javascript

> ID：10055160
> 
> 赞同：0
> 
> 时间：2012-04-07T14:07:19.307
> 
> 标签：javascript, html, onmouseover

看看这个脚本：

```
<html>
<head>
<style>
#g{
display:none;
}
</style>
<a href=# onMOUSEOVER="document.getElementById('g').style.display='block'">
12</a><div id=g>hello world</div></html> 
```

这是有效的，但

```
<div id=g> 
```

总是在有人悬停链接时显示。如何阻止它，如果链接悬停，我们只能看到 div id 'g' 中的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T14:09:04.313

`onmouseout`像这样在 div 标签上添加一个：

```
onmouseout="document.getElementById('g').style.display='none'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T14:10:07.647

```
<a href="#" onmouseover="document.getElementById('g').style.display='block'"
onmouseout="document.getElementById('g').style.display='none'"> 
```

此外，将 id 用引号括起来：

```
<div id='g'> 
```

# asp.net - 从包含字符或字符串的表中检索记录

> ID：10055161
> 
> 赞同：0
> 
> 时间：2012-04-07T14:07:37.160
> 
> 标签：asp.net, sql, sql-server

在我的表中，一些记录已经存储在两列中`First_Name`，并且`Last_Name`.

```
Ravi Kant | Sharma

Raj  | Kumar

Ravi | Anupam

Abhinav | Kumar

Ashish | Kumar

Avinash | a

Ravi | Anand 
```

我的搜索文本框名称是`txtName`，我在其中输入了`ravi`。现在，我正在使用查询

```
SELECT * FROM USER_INFO 
WHERE FIRST_NAME LIKE '%"& txtName.Text &"%' 
OR LAST_NAME LIKE '%"& txtName.Text &"%' 
```

所以，它应该检索所有 cantains 的记录`ravi`。

但是，它只返回 First Name 为 的表中的两行`Ravi`。但是，我希望它应该返回包含该字符的所有记录，这意味着它必须返回 3 行。

需要帮忙 ！！

**已编辑**

```
"SELECT * FROM JOBS WHERE (JOB_DESCRIPTION LIKE '%" & keyword.Trim() & "%' OR JOB_SKILL LIKE '%" & keyword.Trim() & "%' OR JOB_QUALIFICATION LIKE '%" & keyword.Trim() & "%') AND JOB_ROLE='" & profile & "'" 
```

这是我的查询，我想在其中使用上述概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:11:46.553

（虽然您的解决方案有 SQL 注入 - 就像我的朋友在这里所说的...... [使用参数]）

```
var myQuery=@"SELECT * FROM USER_INFO 
    WHERE FIRST_NAME LIKE '%"+txtName.Text.Trim() +@"%' 
    OR LAST_NAME LIKE '%"+txtName.Text.Trim() +"%'"; 
```

无 SQlInjection ver : (SQL SERVER SIDE)

```
SELECT * FROM USER_INFO 
WHERE FIRST_NAME LIKE '%'+@txtName +'%' 
OR LAST_NAME LIKE '%'+@txtName +'%' 
```

@`txtName`是`nvarchar(100)`// 或者别的什么...

# mysql - 在 SYN_SENT 中连接到 mysql 服务器

> ID：10055164
> 
> 赞同：0
> 
> 时间：2012-04-07T14:08:02.540
> 
> 标签：mysql, tcp, rhel, rhel5

最近几天，我们的应用程序服务器和数据库服务器（Mysql）之间遇到了一个奇怪的问题：从应用程序服务器到数据库服务器的连接在 SYN_SENT 状态下挂起，之后我们无法在 mysql 端口上与数据库服务器建立任何连接（ 3306）。当我们检查数据库服务器上的 netstat 输出时，它处于 SYN_RECV 状态。

我能弄清楚的是 mysql 服务器正在接收 SYN 请求并做出响应，但它没有到达客户端，因此服务器端的 SYN_RECV 和客户端的 SYN_SENT 。我认为 SYN_SENT 状态应该在一段时间后消失，并且由于这个其他数据库连接尝试到同一服务器不应该挂起。

有谁知道我们如何解决这个问题？

输出设置详细信息：应用程序服务器：RHEL 5.4，内核版本 = 2.6.18-164.el5，x86_64 数据库服务器：Mysql 版本：5.1.49 RHEL 5.4，内核版本 = 2.6.18-164.el5，x86_64

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-21T01:40:44.613

Fix for server with only localhost access: set 127.0.0.1 in the bind address in my.cnf

Fix for connection to remote ip's (REMOTE_IP replace with remote ip)

```
iptables -A INPUT -p tcp -d 127.0.0.1 --dport 3306 -s REMOTE_IP -j ACCEPT
iptables -A INPUT -p udp -d 127.0.0.1 --dport 3306 -s REMOTE_IP -j ACCEPT
iptables -A INPUT -p tcp --dport 3306 -j DROP
iptables -A INPUT -p udp --dport 3306 -j DROP 
```

Also you need to set bind ip in my.cnf to 0.0.0.0\. Second rule you don't need, I just made it to be sure ;) (udp part)

Proof of concept: first allow the connection from remoteip to the destination (-d 127.0.0.1 = localhost) -p tcp / udp = protocoll tcp or udp

after this rules you need to make a rule to drop all requests to tcp / udp connections to port 3306.

**Why is this working:** Because iptables is going is "numeric". Always 1 rule after another.

you can see your rules with the command:

```
iptables -L INPUT -n --line-numbers 
```

the first rule which is displayed is the first rule so if you say accept all connections and afterward drop from ip x.x.x.x all connections then it doesn't work. you need to pick as first rule to drop all connections from this ip and afterwards allow all connections. (it's a bad example..)

if you failed an entry you can display your rules and take the number in front of the rule and drop the rule with the command:

```
iptables -D INPUT <<number here>> 
```

# jquery - jQuery 选择器与局部变量的性能

> ID：10055165
> 
> 赞同：20
> 
> 时间：2012-04-07T14:08:10.477
> 
> 标签：jquery, performance, caching, jquery-selectors

当我需要在函数范围内多次访问 jQuery 选择器的结果时，是否建议我运行一次选择器并将其分配给局部变量？

请原谅我在这里的陈词滥调，但我认为它说明了这个问题。那么，这段代码会执行得更快吗：

```
var execute = function(){
    var element = $('.myElement');
    element.css('color','green');
    element.attr('title','My Element');
    element.click(function(){
        console.log('clicked');
    });
} 
```

比这段代码：

```
var execute = function(){
    $('.myElement').css('color','green');
    $('.myElement').attr('title','My Element');
    $('.myElement').click(function(){
        console.log('clicked');
    });
} 
```

如果没有区别，谁能解释为什么？jQuery 是否在选择元素后缓存元素，以便后续选择器不必再次搜索 dom？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-07T14:15:57.157

重用选择器引用，你的第一种情况，肯定更快。这是我做的一个测试作为证明：

[http://jsperf.com/caching-jquery-selectors](http://jsperf.com/caching-jquery-selectors)

后一种情况，重新定义您的选择器，报告为慢约 35%。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-07T14:19:51.830

不要忘记这一点：

```
var execute = function(){ 
    $('.myElement')
        .css('color','green')
        .attr('title','My Element')
        .click(function(){ 
            console.log('clicked'); 
        });
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-07T14:10:38.837

将引用存储在局部变量中将比每次运行选择代码更快。当您将其存储在变量中时，只需执行任何代码即可找到适当的元素。我的经验法则是将 jQuery 查找的结果存储在一个变量中，如果我要多次使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T14:13:02.440

这里的另一个选择是使用 an`each`而不是重复选择器，它是相关的工作，一次又一次

```
var execute = function(){
    $('.myElement').each(function() {
      var elem = $(this);
      elem.css('color','green');
      elem.attr('title','My Element');
      elem.click(function(){
        console.log('clicked');
      });
    });
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-07T13:10:11.240

您实际上忘记了真正缓存的方法。

jQuery 的问题是初始查找：`$('.selector')`很昂贵。但是在那之后，将您的操作链接到它上，或者将其分配给一个变量并在该变量上执行您的操作就没有那么重要了。您可以获得的主要性能提升是进一步缓存元素，而不是在函数调用的每次迭代中分配 jQuery 选择器。

```
var element = $('.myElement');
var execute = function(){
    element.css('color','green');
    element.attr('title','My Element');
    element.click(function(){
        console.log('clicked');
    });
} 
```

这种方法几乎是建议的其他方法中最快版本的两倍。

请参阅[http://jsperf.com/caching-jquery-selectors/17](http://jsperf.com/caching-jquery-selectors/17)

注意：如果您的 DOM 在其生命周期内发生更改，您可以`element`使用新选择的元素更新变量。

# java - 找不到方法 getComponent()

> ID：10055167
> 
> 赞同：0
> 
> 时间：2012-04-07T14:08:43.307
> 
> 标签：java, jsf, jsf-2

我想用分页和排序来实现[这个JSF 页面。](http://balusc.blogspot.com/2008/10/effective-datatable-paging-and-sorting.html)不幸的是，Netbeans 在`getComponent()`使用时显示错误：

```
cannot find symbol
  symbol:   method getComponent()
  location: variable event of type java.awt.event.ActionEvent 
```

我尝试导入依赖项 java.awt.event.ActionEvent 但没有任何变化。这是`getComponent()`使用的代码。

```
public void page(ActionEvent event) {
        page(((Integer) ((UICommand) event.getComponent()).getValue() - 1) * rowsPerPage);
    } 
```

需要哪些依赖才能使用`getComponent()`？我可以用类似的方法替换这个 Java 方法吗？

最良好的祝愿

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T14:15:06.200

你导入错了`ActionEvent`，需要导入

```
javax.faces.event.ActionEvent 
```

看[这里](http://myfaces.apache.org/core11/myfaces-api/apidocs/javax/faces/event/ActionEvent.html)

# c# - C# 报告锚到底部

> ID：10055173
> 
> 赞同：3
> 
> 时间：2012-04-07T14:10:03.037
> 
> 标签：c#, reporting, anchor, rdlc

这是我无法解决的问题。我们已经从 FONET 转移到 Reporting 以提供体面的 PDF 导出和打印。如果不使用过时版本的 Adob​​e Reader，我们无法找到（免费）打印生成的 PDF 的方法，而且我们无法在任何地方安装第三方程序。

我们以这种方式制作发票，发票行数可变（高度也可变）和可选备注。这在子报告中。在最后一页的底部，我们需要不含增值税的总额、增值税总额和含增值税的总额。当此发票中没有增值税时，这些行是隐藏的。

但是，我们无法找到将这些总数锚定到最后一页底部的方法。我们已经在使用页脚在每一页上显示一些内容，并滥用页眉来显示发票行的列标题，因为行标题在下一页上不会重复。

我们尝试了什么： - 我们尝试在发票行子报表中添加页脚以显示此内容，但这不能包含 Tablix 并且不显示。- 在发票行和总计之间添加空格仅适用于少数发票行。当大于 4 时，它将总数放在下一页的开头。删除空格会将总计放在发票行之后，而我们希望它位于最后一页的底部。- 我们可以通过使用绝对表在 FONET 中解决这个问题，但我们在报告中没有看到这种可能性。- 如果根本不可能，我们会使用另一个系统。我们需要支持设计、可以使用 DataSet 或 IEnumerables 填充的表格、锚定、嵌入图像、直接打印和导出为 PDF 的东西。

提前致谢，

缺口

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-28T19:12:59.880

我的回答晚了一年，但也许这会对某人有所帮助

在打印底部带有标题的信封封面时遇到了类似的问题。我找到了像你这样的问题，但没有答案。在敲了我的头几个小时后，我明白了。

将具有可变高度的控件保持在矩形中，并使矩形尽可能长，并将其他控件（您希望在可变间隙后打印）保持在矩形下方 - 检查下图

![在此处输入图像描述](../Images/35c22922ccdfe09ab2ab546fcad86c80.png)

现在，如果矩形内的“CanGrow”控件增长，它不会将控件推到矩形外。但要注意，如果控件的大小超过了矩形的大小，那么矩形会变大并将其余部分向下推。

就是这样。可是等等！！！我将此报告从 VS 2008 移至 ReportBuilder 2 (& 3)，但这不起作用。再拉我的头发 2 小时后 - 这就是问题所在

选择报告（不是正文）并将“ConsumeContainerWhitespace”属性设置为 True 以使其正常工作。空格在容器内的右侧和底部都被消耗 - 我想这是 VS 2008 和 VS 2005 的报告运行时的默认和唯一行为。

- 在过去的 6 年里，我一直在 .Net 平台上进行开发，几乎对所有东西都感到满意，但是这个该死的精细报告组件永远不会让我烦恼！

# c# - 创建线程时如何修复 CurrentUICulture

> ID：10055176
> 
> 赞同：2
> 
> 时间：2012-04-07T14:10:15.780
> 
> 标签：c#, wpf, localization, currentuiculture

我正在使用`CurrentUICulture`本地化。这工作得很好，直到在不同的线程中查询 UI 文化。所以我的问题是如何修复`CurrentUICulture`它，以便在我创建新线程时也能修复它。

目前我`Thread.CurrentThread.CurrentUICulture`在应用程序启动的第一行设置。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T14:29:08.133

`CurrentUICulture`仅与加载资源相关，因此通常只与 GUI 线程有关。

当您在另一个线程上需要它（我假设加载 StringTable 资源）时，这可能表明您的主要架构有问题。它通常不应该发生。

但是如果你真的需要它，应该可以用一些静态变量来保存你的 CultureInfo 和/或资源块。

# ajax - iPhone webapp 无法解析 JSON

> ID：10055179
> 
> 赞同：1
> 
> 时间：2012-04-07T14:10:52.103
> 
> 标签：ajax, json, jquery-mobile

我正在使用 jQuery Mobile 制作一个小的 webapp。

搜索时，我发送一个带有结果的 JSON，一切都运行良好：Firefox、Chrome 甚至 Safari 都运行良好；除了 iPhone，它提供了`syntaxerror: unable to parse JSON string`.

当然，我已经在 J​​SONlit 中验证了结果，一切正常。

您可以在这里查看所有内容：

http:dartsnroses.com/putio/search.html

# php - 在正则表达式中搜索两次动态术语

> ID：10055186
> 
> 赞同：1
> 
> 时间：2012-04-07T14:12:14.377
> 
> 标签：php, regex, preg-replace, preg-match

我知道我可以在 PHP 的正则表达式中替换术语的动态部分：

```
preg_replace('/(test1)(test2)(test3)/',"$3$2$1",$string); 
```

（不知何故，我不知道这是否正确，但这不是我要找的）

我希望在正则表达式中使用它，例如：

```
preg_match_all("~<(.*)>.*</$1>~",$string,$matches); 
```

“<”和“>”之间的第一部分是动态的（因此可以找到 html 中存在的每个标签，甚至可以找到自己的 xml 标签），我想在同一个正则表达式中再次引用它。

但这对我不起作用。这甚至可能吗？我有一台 PHP 5.3 的服务器

/编辑：

我的最终目标是：

如果有一个带有例如以下源代码的 html 页面：HTML

```
<html>
  <head>
    <title>Titel</title>
  </head>
  <body>
    <div>
      <p>
        p-test<br />
        br-test
      </p>
      <div>
        <p>
          div-p-test
        </p>
      </div>
    </div>
  </body>
</html> 
```

处理后它应该看起来像

```
$htmlArr = array(
    'html' => array(
            'head' => array('title' => 'Titel'),
            'body' => array(
                'div0' => array(
                    'p0' => 'p-test<br />br-test',
                    'div1' => array(
                        'p1' => 'div-p-test'
                    )
                )
            )
    )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:18:50.993

替换字符串中的占位符使用`$1`语法。在正则表达式本身中，它们被称为反向引用并遵循语法`\1`反斜杠和数字。
[http://www.regular-expressions.info/brackets.html](http://www.regular-expressions.info/brackets.html)

所以在你的情况下：

```
preg_match_all("~<(.*?)>.*?</\\1>~",$string,$matches); 
```

反斜杠在这里加倍，因为在 PHP 字符串中，反斜杠会自行转义。（特别是对于双引号字符串，否则它将成为 ASCII 符号。）

# iphone - 从其他常量构建常量变量列表

> ID：10055187
> 
> 赞同：5
> 
> 时间：2012-04-07T14:12:26.323
> 
> 标签：iphone, objective-c, ios, global-variables, constants

我刚刚阅读了所有**objective-c 全局常量变量**问答，但我发现它们不适合我的问题。

我需要一个这样的变量列表：

```
NSString *baseURL = @"http://example.org";
NSString *mediaURL = @"http://example.org/media/";
NSString *loginURL = @"http://example.org/login/";
NSString *postURL = @"http://example.org/post/";
etc. 
```

当然我不能使用这个代码，因为它是一个非常糟糕的方法，如果我需要更改基本 url，我必须更改所有变量。由于我需要从应用程序的每个类中访问这些变量，因此我使用这种方法将它们声明为全局变量：

```
// Constants.h
extern NSString *const baseURL;
extern NSString *const mediaURL;
extern NSString *const loginURL;
extern NSString *const postURL; 
```

```
// Constants.m
NSString *const baseURL = @"http://example.org";
NSString *const mediaURL = [NSString stringWithFormat:"%@%@", baseURL, @"/media/"];
NSString *const loginURL = [NSString stringWithFormat:"%@%@", baseURL, @"/login/"];
NSString *const postURL = [NSString stringWithFormat:"%@%@", baseURL, @"/post/"]; 
```

**但**我不能这样做，因为我收到了这个错误：

```
Initializer element is not a compile-time constant 
```

这是因为对象在运行时工作。

现在我的问题是，我希望一劳永逸地，在网络应用程序中处理这种非常常见的场景的好方法是什么？

我认为使用类（或单例类）来处理常量变量有点矫枉过正，而且`[MyClass globalVar]`每次我需要它时使用类似的东西也太冗长了。

关于它的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T14:23:45.967

我知道它是老式的，但我只是使用预处理器宏并让常量字符串连接处理它。

```
#define baseURL @"http://example.org"
#define mediaURL baseURL@"/media/" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-18T14:12:44.787

```
#define API_ROOT_URL @"https://www.example.org/api"
NSString *const OAuthUrl = API_ROOT_URL @"/oauthToken"; 
```

[也可以看看。](https://stackoverflow.com/questions/510269/how-do-i-concatenate-strings)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T14:50:06.337

我现在无法访问 MAC……你能试试这个吗……

在.h

```
NSString *baseURLString;
extern NSString *const baseURL; 
```

米

```
baseURLString= @"http://example.org";
NSString *const baseURL= [NSString stringWithFormat:"%@", baseURL]; 
```

我不确定这会奏效..

而且您是否在 SO 看到过这个答案...它具有我所知道的所有方法... [Objective-C 中的常量](https://stackoverflow.com/questions/538996/constants-in-objective-c)

# php - 下拉预定义默认值

> ID：10055189
> 
> 赞同：1
> 
> 时间：2012-04-07T14:12:53.097
> 
> 标签：php, mysql, html

我在联系表格中使用下拉菜单，

```
option 1 : Worldwide Cover
option 2 : European Cover 
```

但是该表格被插入到数据库中，然后由 ?id 读取，

有没有办法为每个下拉菜单设置一个值，例如，如果他们选择“选项一”，它将把全球范围内的条款输入到数据库中，

如果他们选择选项 2，它会将欧洲的术语输入数据库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T14:17:09.583

像这样：

```
<option value="your_value">Some label</option>
<option value="another_value" selected>Another label</option> 
```

该`selected`属性是使其默认选中（当表单首次显示给用户时），这似乎是您在问题标题中询问的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:48:26.580

```
 <?php
             $option_value=$_POST['select_value'];
            echo  $option_value;
          ?>
  DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org  /TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
   <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
     <title>Entry_form</title>

     </head>
      <body>
       <form action="" method="post" >
       <select name="select_value">

        <option value="Worldwide Cover">option1</option>
        <option value="European Cover">option2</option>
        </select>
         <input type="submit" value="submit" />
          </form>
         </body>
       </html> 
```

# sql-server - 需要一种使用数据透视的 sql 查询解决方案

> ID：10055196
> 
> 赞同：5
> 
> 时间：2012-04-07T14:13:44.100
> 
> 标签：sql-server, pivot

```
select PurchaseOrderID
     , [244,231] as FirstEmp
     , [266,274] as secondEmp
     , [231,241] as ThirdEmp 
  from ( select PurchaseOrderID, EmployeeID, TaxAmt
           from Purchasing.PurchaseOrderHeader 
          Where EmployeeID IN (244, 231, 266, 274, 241)
                ) SourceTable
 PIVOT (
   SUM(TaxAmt)
   FOR EmployeeID IN([244,231],[266,274],[231,241])
   ) AS PVT 
```

从上面的查询中，我必须使用 pivot 检索特定 GLcode 组的数据。

我需要一个类似下面的结果，这意味着`SUM(TaxAmt)`一个组`GLCode IN (244,231)`和另一个第二个 For`GLCode IN (266,274)`和第三个 is `GLCode IN (231,241)`。

```
---------------------------------------------------------
PurchaseOrderID     [244,231]    [266,274]    [231,241]
---------------------------------------------------------
1                    5678          10456        45643
2                    3456          5643          564
3                    34567         5678          4243
4                    5897          65645         7567
--------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T15:28:56.157

```
select PurchaseOrderID,
       sum(case when EmployeeID in (244, 231) then TaxAmt end) as "244,231",
       sum(case when EmployeeID in (266, 274) then TaxAmt end) as "266,274",
       sum(case when EmployeeID in (231, 241) then TaxAmt end) as "231,241"
from PurchaseOrderHeader
where EmployeeID in(244, 231, 266, 274, 241) 
group by PurchaseOrderID 
```

枢轴版本：

```
select PurchaseOrderID,
       [244]+[231] as "244,231",
       [266]+[274] as "266,274",
       [231]+[241] as "231,241"
from
  (
    select EmployeeID, TaxAmt, PurchaseOrderID
    from PurchaseOrderHeader
    where EmployeeID in(244, 231, 266, 274, 241) 
  ) as P1
pivot
  (
    sum(TaxAmt) for EmployeeID in ([244],[231],[266],[274],[241])
  ) as P2 
```

# android - 如何实时更改TextView的内容

> ID：10055201
> 
> 赞同：0
> 
> 时间：2012-04-07T14:14:52.540
> 
> 标签：android, textview, real-time

UI非常简单，只有一个按钮`login`和一个可滚动的TextView，当我按下按钮时`login`，100行消息将添加到TextView，但它们是同时添加的，因为我需要处理这些消息这将添加到 TextView，这将花费一些时间，有时应用程序看起来没有响应。我希望消息可以逐行添加到 TextView 中。IOW 我希望 TextView 在每个循环中显示添加的消息行。我怎么能意识到这一点？这是已简化的主要代码：

```
login.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        for(int i = 0; i < 100; i++) {
            mTextView.append("test\n");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:33:44.387

任何改变 UI 元素的东西都必须在 UI 线程上运行。由于您正在运行长时间运行的循环，因此您的应用程序会冻结。您应该更改设计并避免在循环中更新 UI，或者您可以使用运行 a`background thread`并将文本附加到`StringBuilder`循环结束时，将 StringBuilder 文本附加到 mtextView。

同样，如果您的 StringBuilder 包含非常大的文本，将其更新到 UI 可能会再次冻结它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T14:37:33.607

```
login.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
           i=0; 
           Thread thread=new Thread(new SleepThread());
           thread.start();
    }
}

private class SleepThread implements Runnable
{
         public void run()
         {
              sleep(10);
              handler.sendEmptyMessage();
         }
}

Handler handler=new Handler()
{
     public void handleMessage(Message msg)
     {
         mTextView.append("test\n");
         i++;
         if(i<100)
         {
              Thread thread=new Thread(new SleepThread());
              thread.start();
         }
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T14:19:36.820

```
login.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
       mTextView.setText(""); 
       for(int i = 0; i < 100; i++) {
            mTextView.setText(mTextView.getText()+"test\n");
        }
    }
} 
```

试试这个代码它应该可以工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T14:21:50.420

用这个：

```
 login.setOnClickListener(new OnClickListener() {
       public void onClick(View v) {

       mTextView.setText(""); 
if (!isStopped) { 

       Acitivut.this.runOnUiThread(new Runnable() {  
        @Override  
        public void run() {   
        for(int i = 0; i < 100; i++) {
          mTextView.append("test\n");
         }
isStopped=true; 
        }  
        });  
}
      }
    } 
```

# android - Android：处理相同dpi级别但不同的屏幕

> ID：10055204
> 
> 赞同：0
> 
> 时间：2012-04-07T14:15:12.663
> 
> 标签：android, image, resolution, dpi, hdpi

我已经阅读了所有关于处理多种屏幕尺寸的 Android 文档，但我仍然无法找到这个问题的答案或如何处理这个问题。

如果有两部手机具有相同的 dpi 级别（例如都是 hdpi），我可以为它们提供一个资源并设置布局参数，如下所示：

```
<ImageView
android:id="@+id/icon"
android:layout_width="94dp"
android:layout_height="94dp"
> 
```

此实例中的“图标”足够大，因此它会按比例缩小以适应所有情况下的布局。在理想情况下，我会假设图标在所有 hdpi 设备上的显示尺寸完全相同，但是当我在 LG G2x 和 HTC Sensation 上进行测试时，Sensation 上的图像会更小。那么在计算 hdpi 图像的大小时，Android 是否总是只使用 1.5 倍的系数？我可以做些什么来保证所有 hdpi 设备上的大小完全相同？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:48:14.827

您可以使用它来帮助您完成项目

[http://developer.android.com/training/multiscreen/screensizes.html](http://developer.android.com/training/multiscreen/screensizes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T02:25:42.037

答案是系统确实为每个 dpi 级别使用了标准乘数（例如 hdpi 为 1.5x）。为了解决这个问题，我只使用了 DisplayMetrics 的 .xdpi 和 .ydpi 值，并根据这些实际值进行计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T14:26:36.757

通常，当我们想要这样做时，我们通常会使用 wrap_content。所以一旦尝试 layout_width = "wrap_content",layout_height = "wrap_content"。这样 AAndroid SDK 会看起来。

# function - 编码生成函数

> ID：10055205
> 
> 赞同：-3
> 
> 时间：2012-04-07T14:15:26.797
> 
> 标签：function, implementation

我只是在浏览所有用于编程的数学知识。在那里我看到了很多在数学上似乎很好的生成函数。但是它们是如何以编码的形式实现的呢？我的意思是如何将这些数学函数转换（或被认为是）代码形式。例如，此链接显示了一些生成函数，但我不知道如何以编码的形式使用/实现这些函数。任何引人注目的想法都值得赞赏。谢谢。 [http://en.wikipedia.org/wiki/Partition_%28number_theory%29](http://en.wikipedia.org/wiki/Partition_%28number_theory%29)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:42:51.413

“作为一个例子，这个链接显示了一些生成函数，但我不知道如何以编码的形式使用/实现这些函数”在 python 中它们可能看起来像这样： [示例](http://homepages.ed.ac.uk/jkellehe/partitions.php)

# xml - 在 ext.data.store 中设置内容类型响应

> ID：10055209
> 
> 赞同：0
> 
> 时间：2012-04-07T14:16:05.847
> 
> 标签：xml, extjs, content-type

我正在使用 ext.data.store 在 extjs 4.0 中实现自动完成组合框

```
var RecordDef = Ext.data.Record.create([
    {name: 'description', mapping: 'description'},    
    {name: 'lat'},
    {name: 'lng'}           
]);

var ds = new Ext.data.Store({
    proxy: new Ext.data.HttpProxy({url:'geo-multi.xml'}),
    headers: {
        'Content-Type': 'application/xml'
    },
    reader: new Ext.data.XmlReader({
        totalRecords: 'count',
        record: 'result'
    }, RecordDef)
}); 
```

问题是在检查 firebug 后接收 text/html 作为响应类型标头：

```
Connection  Keep-Alive
Content-Length  409
Content-Type    text/html;charset=UTF-8
Date    Sat, 07 Apr 2012 13:59:33 GMT
Last-Modified   Sun, 08 Jan 2012 08:11:37 GMT
Server  Winstone Servlet Engine v0.9.10 
```

谁能帮我将正确的内容类型标题设置为 text/xml ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:35:52.187

不确定您在服务器端使用哪种语言，但您应该确保在服务器响应中设置了正确的内容类型

如果您使用的是 PHP，那么您可以使用此方法设置内容类型

```
// We'll be outputting XML
header('Content-type: application/xml'); 
```

**在这里检查：**

[在 php 中更改输出的 mime 类型](https://stackoverflow.com/questions/152006/change-mime-type-of-output-in-php)

# c# - 如何阻止双击 Windows 窗体中覆盖的 WndProc 函数？

> ID：10055214
> 
> 赞同：4
> 
> 时间：2012-04-07T14:17:11.977
> 
> 标签：c#, winforms, winapi

我在 Windows Forms 中创建了一个表单，无论我点击哪里都可以拖动它。我通过重写 WndProc 函数来实现它，该函数反过来修改每次点击，因为它是标题栏点击：

```
 //found at: http://stackoverflow.com/questions/3995009/how-to-make-a-window-draggablec-winforms
    private const int WM_NCHITTEST = 0x84;
    private const int HTCLIENT = 0x1;
    private const int HTCAPTION = 0x2;

    ///
    /// Handling the window messages 
    ///
    protected override void WndProc(ref Message message)
    {
        base.WndProc(ref message);

        if (message.Msg == WM_NCHITTEST && (int)message.Result == HTCLIENT)
            message.Result = (IntPtr)HTCAPTION;
    } 
```

问题是现在当我双击时，窗口变成全屏，这是不需要的。我怎样才能阻止这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T14:24:16.560

除了 JaredPar，我建议不要以*这种*方式创建可拖动的表单，而是分 3 步处理它

*   在表单上识别鼠标
*   捕获鼠标
*   识别鼠标向上事件

处理起来并不复杂，更好的是，imo，然后禁用双击表单。

有关如何执行此操作的完整示例，请查看

[创建可拖动的无边框表单](http://www.blackwasp.co.uk/DraggableBorderless.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T20:39:42.777

我今天在 C++ 中遇到了同样的问题。我使用了 JaredPar 的解决方案，但使用 WM_NCLBUTTONDBLCLK (0x00A3) 而不是 WM_LBUTTONDBLCLK，这对我有用！它之所以有效，是因为双击消息是从非客户端 (NC) 区域发送的，在这种情况下，它是“虚拟”标题栏 (HTCAPTION)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-07T14:11:33.567

我和 Jex 做了同样的事情，效果很好。

```
private const int WM_NCHITTEST = 0x84;
private const int HTCLIENT = 0x1;
private const int HTCAPTION = 0x2;
private const int WM_LBUTTONDBLCLK = 0x00A3;

protected override void WndProc(ref Message m)
    {
        if (m.Msg == WM_LBUTTONDBLCLK)
        {
            return;
        }
        switch (m.Msg)
        {

            case WM_NCHITTEST:      
                base.WndProc(ref m);
                if ((int)m.Result == HTCLIENT)
                    m.Result = (IntPtr)HTCAPTION;
                return;
        }
        base.WndProc(ref m);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T14:23:31.780

似乎您找到了解决问题的方法，导致您尝试解决的另一个问题。如果我可以提出一些简单的建议，那就是使窗口可拖动的更好解决方案：

**将 InteropServices 添加到 using 声明中：**

```
using System.Runtime.InteropServices; 
```

**对于代码：**

```
 public const int WM_NCLBUTTONDOWN = 0xA1;
    public const int HT_CAPTION = 0x2;

    [DllImportAttribute("user32.dll")]
    public static extern int SendMessage(IntPtr hWnd,
                     int Msg, int wParam, int lParam);
    [DllImportAttribute("user32.dll")]
    public static extern bool ReleaseCapture(); 
```

**然后转到表单的 MouseDown 事件并粘贴：**

```
 if (e.Button == MouseButtons.Left)
        {
            ReleaseCapture();
            SendMessage(Handle, WM_NCLBUTTONDOWN, HT_CAPTION, 0);
        } 
```

完毕。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-07T14:20:54.497

如果您只想阻止双击在您覆盖的窗口中具有默认行为，`WndProc`则拦截该`WM_LBUTTONDBLCLK`消息

```
private const int WM_LBUTTONDBLCLK = 0x0203;

...

protected override void WndProc(ref Message message) {
  if (message.Msg == WM_LBUTTONDBLCLK) {
    return;
  }

  base.WndProc(ref message);

  if (message.Msg == WM_NCHITTEST && (int)message.Result == HTCLIENT)
    message.Result = (IntPtr)HTCAPTION;
} 
```

# php - PHP：数据库缓存（使用 sqlite 内存）

> ID：10055216
> 
> 赞同：1
> 
> 时间：2012-04-07T14:17:27.810
> 
> 标签：php, sql, database, sqlite, caching

我正在研究基于 pdo 的数据库类，使用的数据库是 mysql 数据库，但我想缓存数据库以获得更高的性能。将数据库缓存在 SQlite 内存数据库中并对此执行 SELECT （并在 INSERT、UPDATE、...上更新数据库）数据库是否是个好主意？但是，当我写“cache = new PDO('sqlite:memory');”时，它是创建一个新的还是使用现有的数据库？另外，如果一台服务器托管多个网站，如何使用不同的内存数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T23:41:54.307

每个 SQLite 内存数据库都是特定于连接的。即使您打开两个到*:memory:*的连接，在同一个进程中也会创建两个单独的内存数据库。所以答案是总是创建一个新的数据库，它从不使用现有的数据库。

请谨慎使用正确的名称来创建内存数据库。*:memory:*以外的任何其他名称（例如*:memorry:*或*memory*或*/:memory:*）实际上都不会创建内存数据库，而是基于常规文件的数据库。这无声无息地发生。

使用建议的缓存获得的性能提升可能很小。如果您在 MySQL 上进行选择并且计算机有足够的内存，则由于 OS 磁盘缓冲，数据可能已经在 RAM 中。因此，以 SQLite 内存数据库的形式添加另一层 RAM 并没有多大帮助。

如果系统不是只读的，建议的缓存很容易导致复杂或不正确的缓存逻辑。如果某个进程进行数据更新，它必须更新其缓存，更新 MySQL 数据库，并且您还必须创建一些机制来告诉其他进程它们的缓存不再有效，它们必须从 MySQL 读取数据。否则你的数据很快就会变得一团糟。想想当两个进程决定同时更新相同的数据但更新为不同的值时会发生什么？你有冲突。

为了获得更高的性能，我首先会调整服务器和 MySQL。如果这还不够，我会添加一个像 Memcached 这样的缓存，它不是特定于应用程序进程的，而是一个单独的进程。即使这样，您也必须小心地以数据在更新时保持一致的方式构建应用程序逻辑。如果你只使用 MySQL 并使用 InnoDB 进行正确的事务，那么 MySQL 会为你做这件事。

# ruby-on-rails - 输出有关将要运行的测试的更多信息是否正确？

> ID：10055219
> 
> 赞同：2
> 
> 时间：2012-04-07T14:17:34.283
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, testing, rspec

我正在使用 Ruby on Rails 3.2.2 和 rspec-rails-2.8.1。我想输出有关将要运行的测试的更多信息，例如，这样：

```
# file_name.html.erb
...

# General idea
expected_value = ...

it "... #{expected_value}" do
  ...
end

# Usage that I am trying to implement
expected_page_title =
  I18n.translate(
    'page_title_html'
    :user => @user.firstname
  )

it "displays the #{expected_page_title} page title" do
  view.content_for(:page_title).should have_content(expected_page_title)
end 
```

*注意*：“输出”是指`rspec . --format documentation`在终端窗口中运行命令行时的输出。

**这是正确的测试方法吗？**

* * *

相关问题：

*   [如何在整个示例组中使用实例变量，即使它在示例之外？](https://stackoverflow.com/questions/10048711/how-to-use-an-instance-variable-throughout-an-example-group-even-if-it-is-outsi)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:12:47.687

你的问题会征求一些意见，但我会尝试用一些例子来证明我的观点。

**简短回答**：不，这不是您应该编写 RSpec（或任何测试）描述的方式。这是非常规的，不会为额外的代码增加太多价值。

**长答案**：RSpec 是一个 BDD（行为驱动开发）工具，旨在帮助描述代码的行为和意图，同时编写自动化测试。当您考虑代码的行为时，将预期结果添加到测试描述中真的会增加很多价值吗？如果是这样，也许您应该重新考虑您正在测试的内容。

例如，假设您有一个 User 类，并且您想测试一个连接用户名字和姓氏的方法：

```
describe User do
  expected_full_name = 'Software Guy'

  subject { User.new(first: 'Software', last: 'Guy') }

  it 'should have the full name #{expected_full_name}' do
    subject.full_name.should == 'Software Guy'
  end
end 
```

VS

```
describe User do
  subject { User.new(first: 'Software', last: 'Guy') }

  it 'should have a full name based on the first and last names' do
    subject.full_name.should == 'Software Guy'
  end
end 
```

在第一个测试中，描述中的预期结果真正给你带来了什么？它是否告诉您有关用户预期*行为*的任何信息？并不真地。

Take your example. If I was coming along to your project and saw a test description like that, I would be confused because it doesn't really tell me what is being tested. I would still need to look at the code to understand what is going on. Compare these two examples:

```
it "displays the #{expected_page_title} page title" do
  view.content_for(:page_title).should have_content(expected_page_title)
end 
```

Which would give you something in the console like:

"displays the My Awesome Title page title"

Compare that to:

```
it "should translate the page title" do
  view.content_for(:page_title).should have_content(expected_page_title)
end 
```

Which would be exactly the same in the console as it is in the test:

"should translate the page title"

Your obviously free to choose whichever one you want, but I am speaking from a few years of testing experience and highly recommend you don't do this.

# algorithm - 用于在图中查找 Min Cuts 的随机收缩算法

> ID：10055220
> 
> 赞同：4
> 
> 时间：2012-04-07T14:17:38.527
> 
> 标签：algorithm, random, graph

好的，这是我在图中找到切点的算法（我不是在这里谈论最小切点）

假设我们得到了一个无向图的邻接表。

1.  选择图形上的任何顶点（用枢轴表示）
2.  选择图形上的任何其他顶点（随机）。（用 x 表示）
3.  如果两个顶点之间有一条边，则从图中删除该边。并将 x 连接到的所有顶点转储到枢轴上。（如果没有，则返回第 2 步。
4.  如果任何其他顶点连接到 x，则更改邻接列表，以便现在 x 被枢轴替换。即他们连接到Pivot。
5.  如果顶点数大于 2（返回步骤 2）
6.  如果等于 2。只需计算 2 个点中的任何一个的邻接列表中存在的顶点数。这将给削减

我的问题是，这个算法正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-28T01:02:57.073

我只会改变你的随机化。

选择第一个顶点后，从他的邻接列表中选择另一个。现在您确定两个顶点之间有边。下一步是从邻接列表中找到顶点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:03:02.030

这是对 Krager 的无向图最小割算法的一个很好的解释。

我想你可能错过了一个细节。或者我只是误读了你的描述。

**您想删除所有自循环。**

例如，在您删除一个顶点并运行您的算法后，顶点 A 现在可能有一条从顶点 A 到顶点 A 的边。这称为自循环。它们在收缩两个顶点的过程中经常产生。作为第一步，您可以简单地检查整个图的自循环，尽管有一些更复杂的方法。

那有意义吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-07T17:15:10.527

同意您绝对应该删除自循环。还有一点我想补充的是，在你随机选择第一个顶点之后，你不必随机选择另一个节点，直到你有一个连接到第一个节点的节点，你可以简单地从连接到的节点中选择第一个顶点，因为您知道第一个选择的节点连接到多少个节点。所以在较小的范围内进行第二次随机选择。这只是有效地随机选择一条边（由两个节点/顶点确定）。我有一些实现 krager 算法的 c# 代码，你可以玩转。它不是最有效的代码（尤其是可以使用更高效的数据结构），因为我在 200 个节点图上对其进行了测试，对于 10000 次迭代，它需要大约 30 秒才能运行。

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace MinCut
{
    internal struct Graph
    {
        public int N { get; private set; }
        public readonly List<int> Connections;
        public Graph(int n) : this()
        {
            N = n;
            Connections = new List<int>();
        }

    public override bool Equals(object obj)
    {
        return Equals((Graph)obj);
    }

    public override int GetHashCode()
    {
        return base.GetHashCode();
    }

    private bool Equals(Graph g)
    {
        return N == g.N;
    }
}

internal sealed class GraphContraction
{
    public static void Run(IList<Graph> graphs, int i)
    {
        var liveGraphs = graphs.Count;
        if (i >= liveGraphs)
        {
            throw new Exception("Wrong random index generation; index cannot be larger than the number of nodes");
        }
        var leftV = graphs[i];

        var r = new Random();
        var index = r.Next(0, leftV.Connections.Count);
        var rightV = graphs.Where(x=>x.N == leftV.Connections[index]).Single();

        foreach (var v in graphs.Where(x => !x.Equals(leftV) && x.Connections.Contains(leftV.N))) 
        {
            v.Connections.RemoveAll(x => x == leftV.N);
        }
        foreach (var c in leftV.Connections)
        {
            if (c != rightV.N)
            {
                rightV.Connections.Add(c);
                int c1 = c;
                graphs.Where(x=> x.N == c1).First().Connections.Add(rightV.N);
            }
        }
        graphs.Remove(leftV);
    }
} 
```

}

# regex - 递归命名捕获：解析 RESTful URI

> ID：10055227
> 
> 赞同：0
> 
> 时间：2012-04-07T14:18:56.407
> 
> 标签：regex, url, rest, uri

我正在尝试使用 Ruby 中的正则表达式来分解标准的 RESTful URI。

假设我们正在开发一个音乐唱片 Web 应用程序。我们有很多艺术家，有很多专辑，有很多歌曲。

使用此设置，以下 RESTful URI 应该都可以作为 GET 请求使用：

```
/artists
/artists/1
/artists/1/albums
/artists/1/albums/1
/artists/1/albums/1/songs
/artists/1/albums/1/songs/1
/artists/1/albums/1/songs/1/artists
/artists/1/albums/1/songs/1/artists/1 
```

为了尝试使用 Regexp 捕获这些 URI，我制作了以下内容（[现场示例](http://rubular.com/r/Aw8SNxzLOp)）：

```
^\/(?<resource>(?:artists|albums|songs))(?:\/(?<id>\d+))?\/?$ 
```

当给定如下的根级资源时，正则表达式按预期工作：

```
/artists
/songs/1 
```

第一个结果匹配数据的资源为`artists`，id 为`nil`，第二个匹配数据的资源为`songs`，id 为`1`。

但是，当给定一个请求资源关联的 URI 时，例如`/albums/1/songs/1`，此正则表达式将失败，因为 if 不考虑递归。所以，我把整个东西放在一个非捕获组中，`+`上面有一个“一个或多个”( ) 限定符：

```
^(?:\/(?<resource>artists|albums|songs)(?:\/(?<identifier>\d+))?)+\/?$ 
```

此正则表达式现在适用于 URI，`/albums/1/songs/2`但生成的 matchdata 仅包含最后一个资源 ( `songs`) 和 id ( `2`)。
我期待一个包含两个对象的数组，一个资源为`albums`，一个资源为`songs`.

有没有办法在使用“一个或多个”限定符的捕获组中正确使用命名捕获？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:19:50.603

大多数正则表达式风格都不是这样工作的。每个捕获组将只包含它匹配的最后一个子字符串。除非您使用 .NET 正则表达式库，它会记住捕获组的每个匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:15:58.437

“递归”并不是您遇到的问题的正确词。您正在尝试在您的正则表达式中迭代多个`/resource/id`对，然后检索各个捕获。我建议你改用这个正则表达式：

```
\/(?<resource>artists|albums|songs)(?:\/(?<identifier>\d+))? 
```

...并遍历`/resource/id`代码中的对（例如，使用`scan`方法）。

# php - 每个帐户在 VPS 中的不同 php 版本。如何？

> ID：10055234
> 
> 赞同：0
> 
> 时间：2012-04-07T14:20:07.467
> 
> 标签：php, cpanel, whm

我有一个虚拟专用服务器：PHP 版本 5.3.1 PHP 处理程序：suphp

我需要的是在我的一些帐户中有不同的 php 版本（5.2.17）。这有可能做到吗？我该怎么做？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T14:47:18.227

您可以在 apache 上安装许多 php 版本

[http://blog.servergrove.com/2011/08/22/how-to-setup-multiple-php-versions-on-apache/](http://blog.servergrove.com/2011/08/22/how-to-setup-multiple-php-versions-on-apache/)

祝你好运！

# php - .htaccess 用于重写个人系统

> ID：10055235
> 
> 赞同：0
> 
> 时间：2012-04-07T14:20:14.043
> 
> 标签：php, .htaccess, mod-rewrite

我无法完全理解我想要使用 mod_rewrite 做什么。

我希望能够输入一个网址，例如：

`http://site.com/project/project-title/people/alex-coady`

或者

`http://site.com/project/project-title/tasks/task-list-title`

然后将`handle.php`使用可用的变量进行处理，以便：

`$_GET['project'] would equal 'project-title'`

`$_GET['people'] would equal 'alex-coady'`（第一个例子）

`$_GET['tasks'] would equal 'task-list-title'`（第二个例子）

重申一下：所有请求都将由 管理`handle.php`，但如果在 URL 上附加了任何其他变量，首先将检查关键字`people`, （以及我手动添加的任何其他变量） `tasks`，`projects`并以建议的形式添加紧随其后的值多于。

IE。`http://site.com/handle.php?project=project-title&people=alex-coady&tasks=`（第一个例子）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:30:36.277

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^project/([^/]+)/([^/]+)/([^/]+)$ handle.php?project=$1&people=$2&tasks=$3 [L] 
```

或者

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^project/(.*) handle.php?data=$1 [L] 
```

而在`handle.php`

```
 list($project, $task, $people, $foo, $bar) = explode('/', $_GET['data]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T14:42:13.283

我将如何处理这个问题是忘记项目、人员、任务并将所有内容传递给 handle.php，然后在那里处理它，否则您最终可能会为将来添加的每个请求设置一个重写规则。

所以你的 mod_rewrite 看起来像：

```
RewriteEngine On
Options -Indexes

RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ handle.php?route=$1 [L,QSA] 
```

你的句柄/路由器看起来像这样（示例）

```
<?php 
//Get Route from request
$route = (!isset($_GET['route']))?'':$_GET['route'];

/*Split the parts of the route*/
$parts = explode('/', $route,4);

//http://site.com/project/project-title/people/alex-coady
//http://site.com/project/project-title/tasks/task-list-title

$project    = (isset($parts[0]))?$parts[0]:null; //project/
$p_title    = (isset($parts[1]))?$parts[1]:null; //project-title/
$action     = (isset($parts[2]))?$parts[2]:null; //people or tasks
$sub_action = (isset($parts[3]))?$parts[3]:null; //alex-coady or task-list-title

//Then work with the above variables
?> 
```

# android - Android 扩展文件是否需要下载器库？

> ID：10055242
> 
> 赞同：0
> 
> 时间：2012-04-07T14:21:15.947
> 
> 标签：android, expansion-files

我的应用需要大量的图片资源，所以我不得不将它们打包成一个扩展文件。当我手动将扩展文件复制到模拟器的共享存储时，我的工作正常。我不清楚的是整个下载过程。

在谷歌的（通常令人沮丧的）文档中，它说：

> 在大多数设备上，Google Play 会在下载 APK 的同时下载扩展文件，因此当用户第一次打开应用程序时，您的应用程序就会拥有所需的一切。但是，在某些情况下，您的应用程序必须在您的应用程序启动时从 Google Play 下载文件。

我的应用程序将免费提供一个扩展文件。我真的可以依赖应用程序下载的扩展文件吗？或者我必须实现下载器服务以确保在应用程序启动时下载扩展文件？

什么情况下不会用apk下载扩展文件？我想用户可能会擦除或删除最初复制扩展文件的共享存储卷，所以这可能是我不得不担心的情况。

告诉我我可以偷懒！来吧！然后有人在一篇博文中链接到这个问题，感叹应用程序开发人员的懒惰。好吧，好吧，我不会全力以赴。我只是想了解这里的机制，是的，我宁愿避免实现下载器服务的额外麻烦。我不是全职的 Android 开发人员，我还有其他事情要做！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:32:09.113

Play 商店将尝试下载扩展文件，但网络连接失败或超时等

您应该在应用程序启动时检查文件是否可用，如果不可用，请手动下载它们。

如果您不允许这种可能性，那么一些用户将无法使用您的应用程序，除非它在没有扩展包的情况下也能正常工作。

# ios - 图像没有进入 UIImageView

> ID：10055243
> 
> 赞同：0
> 
> 时间：2012-04-07T14:21:42.253
> 
> 标签：ios, cocoa, uiimageview

我使用 将 a 添加`UIImageView`到我的应用程序中`IBOutlet`，然后以编程方式分配了图像，但图像未显示。我的代码如下所示：

```
NSString *string = @"Some text";
UIGraphicsBeginImageContext(CGSizeMake(180, 50));
[string drawAtPoint:CGPointMake(10, 20)
           withFont:[UIFont systemFontOfSize:12]];
UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

//[imageview setImage:result];
//[imageview
sample.image =result; 
```

# mysql - mysql查询，嵌套where子句

> ID：10055244
> 
> 赞同：0
> 
> 时间：2012-04-07T14:21:43.753
> 
> 标签：mysql, arrays, join, left-join, where-clause

我有一个工作查询，它​​计算表 LDS 中的所有不同值，其中 STATUS = 'OK' AND DATE >= '2012' 并且如果有多个相同的 ID，那么如果该 ID 的状态为“ok”，则计算具有最新日期的 ID “：

```
计数（不同的 lds1.ID）
从
    LDS lds1
    左连接 LDS lds2
        ON lds1.ID = lds2.ID
        AND lds1.Date < lds2.Date
        和 lds1.Status = 'ok'
在哪里
    lds1.Date >= '2012'
    和 lds1.Status = 'ok'
    并且 lds2.ID 为 NUL

```

我现在需要在运行上述查询之前添加另一个条件为 TRUE：“仅考虑 STATUS=NULL AND DATE>= 2011 的 ID”。STATUS = NULL 的初始 ID 实例不计入结果；它只是确定是否应该考虑 ID。

```
表 LDS：

身份证 | 状态 | 日期
1 | 空 | 2011
1 | 好的 | 2012
2 | 坏| 2012
1 | 坏| 2013
3 | 空 | 1999
3 | 好的 | 2012
4 | 好的 | 2012
5 | 空 | 2011
5 | 好的 | 2012
6 | 空 | 2012

```

完整查询的预期结果是 ID“5”。

更新：
也许这可以用数组来解决？
1\. 从表 LDS 中取出 STATUS=NULL AND DATE>=2011 的所有 ID 并放入数组（结果：ID1、ID5、ID6）
2\. 对于数组中的每个 ID，检查表中的所有实例并选择具有最大日期和状态不为空（结果：ID1，ID5）
3\. 计算其中有多少状态=OK（结果：ID5）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:27:12.067

```
COUNT(DISTINCT lds1.ID)
FROM 
    LDS lds1
    LEFT JOIN LDS lds2
        ON (lds1.ID = lds2.ID)
    WHERE
        lds1.Date = '2012-01-01'
    AND lds1.Status = 'ok'
    AND lds2.ID IS NOT NULL 
```

尝试对条件使用 where 子句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T02:24:31.327

我相信我已经找到了答案。也许有人可以验证这一点。

```
计数不同的 ID
来自 lds
    身份在哪里
(
计数（不同的 lds1.ID）
从
    LDS lds1
    左连接 LDS lds2
        ON lds1.ID = lds2.ID
        AND lds1.Date<lds2.Date
        和 lds1.Status = 'ok'
    在哪里
        lds1.Date>='2012'
        和 lds1.Status = 'ok'
        并且 lds2.ID 为 NUL
)
AND 日期>='2011' AND 状态=NUL
```

# python - 无法添加边，IGraph 中的顶点 ID 无效

> ID：10055246
> 
> 赞同：2
> 
> 时间：2012-04-07T14:21:54.727
> 
> 标签：python, igraph

我试图使用 igraph 在 python 中编写代码，当我尝试使用 while 循环添加边时出现此错误

```
while(i<k)
  g.add_vertices(theInts[i])
  i=i+1
  g.add_edges([(theInts[i-1],theInts[i])]) 
```

我认为索引可能是一个问题，所以我还包括了一个 if 语句，但这似乎不是问题。

请帮忙！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T18:14:10.203

我认为这一切都取决于`g`顶点有什么。如果你从一个 empty 开始`g`，你只有 vertex `0`，所以如果你试图`add_edges`用两个不同的顶点调用，它就是行不通的。您必须添加更多顶点。当然，这一切都取决于您的图表在循环之前的样子，以及是什么`i`。

您可以使用 显示有关图表的一些简要信息`print`。例如，

```
>>> import igraph
>>> graph = igraph.Graph()
>>> print graph
Undirected graph (|V| = 1, |E| = 0) 
```

如果`i`从 0 开始，那么您第一次不会在循环中添加任何顶点。因此，当您尝试添加边时，您正在尝试添加到不存在的顶点。

```
>>> graph.add_vertices(0)
<igraph.Graph object at 0xcea850>
>>> print graph
Undirected graph (|V| = 1, |E| = 0)
>>> graph.add_edges([(0, 1)])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
igraph.core.InternalError: Error at type_indexededgelist.c:245: cannot add edges, Invalid vertex id 
```

如果这不是问题，请尝试打印边缘并查看它们是否与您想要的匹配。

```
>>> graph.add_vertices(5)
<igraph.Graph object at 0xcea850>
>>> print graph
Undirected graph (|V| = 6, |E| = 3)
>>> graph.add_edges([(1, 1), (2, 3), (3, 5)])
<igraph.Graph object at 0xcea850>
>>> graph.get_edgelist()
[(1, 1), (2, 3), (3, 5)] 
```

此外，拥有完整的 TraceBack 可能会更有帮助。

编辑：根据您的评论

所以你说你有这样的结构：

```
>>> graph = igraph.Graph()
>>> print graph
Undirected graph (|V| = 1, |E| = 0) 
```

你想只添加顶点 2？我不确定你可以用 igraph 做到这一点。它似乎必须按顺序排列每个顶点。您可以检查是否有顶点，然后在必要时添加它们，记住这些图是从 0 开始的。像这样的东西。

```
>>> vertices = 1, 2, 13, 4, 21, 5
>>> map_graph = igraph.Graph()
>>> print map_graph
Undirected graph (|V| = 1, |E| = 0)
>>> map_graph.add_vertices(max(vertices))
<igraph.Graph object at 0xceaa50>
>>> print map_graph
Undirected graph (|V| = 22, |E| = 0)
>>> map(map_graph.add_edges, zip(vertices, vertices[1:]))
[<igraph.Graph object at 0xceaa50>, <igraph.Graph object at 0xceaa50>, <igraph.Graph object at 0xceaa50>, <igraph.Graph object at 0xceaa50>, <igraph.Graph object at 0xceaa50>]
>>> print map_graph
Undirected graph (|V| = 22, |E| = 5)
>>> map_graph.get_edgelist()
[(1, 2), (2, 13), (4, 13), (4, 21), (5, 21)] 
```

或者，如果您不喜欢地图，可以将其循环播放。

```
>>> vertices = 1, 2, 13, 4, 21, 5
>>> loop_graph = igraph.Graph()
>>> print loop_graph
Undirected graph (|V| = 1, |E| = 0)
>>> loop_graph.add_vertices(max(vertices))
<igraph.Graph object at 0xcea950>
>>> print loop_graph
Undirected graph (|V| = 22, |E| = 0)
>>> for pair in zip(vertices, vertices[1:]):
...     loop_graph.add_edges(pair)
... 
<igraph.Graph object at 0xcea950>
<igraph.Graph object at 0xcea950>
<igraph.Graph object at 0xcea950>
<igraph.Graph object at 0xcea950>
<igraph.Graph object at 0xcea950>
>>> print loop_graph
Undirected graph (|V| = 22, |E| = 5)
>>> loop_graph.get_edgelist()
[(1, 2), (2, 13), (4, 13), (4, 21), (5, 21)] 
```

不过，可能有更好的方法来做到这一点。如果这不是您要查找的内容，请使用更多详细信息和一些实际代码编辑您的原始问题。

# c# - C# .net Combobox 绑定到数据集时显示值成员而不是显示成员

> ID：10055248
> 
> 赞同：0
> 
> 时间：2012-04-07T14:22:02.163
> 
> 标签：c#, .net, data-binding, combobox, valuemember

我正在尝试从数据集中填充组合框，然后将其绑定到不同的数据行。数据行包含单个客户记录。数据集包含 1 个带有 title_id（一个 int）和 title（文本描述）的表。

我设置了值和显示成员，以及组合框的数据源：

```
cbxTitle.ValueMember = "title_id";
cbxTitle.DisplayMember = "title";
cbxTitle.DataSource = dsTitles.Tables[0]; 
```

接下来，我将数据绑定设置为包含客户详细信息的数据行：

```
cbxTitle.DataBindings.Add("Text", drCustomer.Table, "title_id"); 
```

当我运行它时，组合框显示数字 2（数据行中 title_id 的值）。

如果我点击它，它会像我期望的那样包含 Mr、Mrs、Miss 等（Mr = 2）

我想不通的是如何让它显示“先生”而不是 2？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T14:27:54.730

怎么样：

```
cbxTitle.DataBindings.Add("SelectedValue", drCustomer.Table, "title_id"); 
```

请也参考这些链接：

[带有外键的 WinForms 组合框上的实体框架 4 数据绑定](https://stackoverflow.com/questions/5025880/entity-framework-4-databinding-on-winforms-comboboxes-with-foreign-keys)

[为什么 BindingList 更改时 ComboBox.SelectedValue DataBinding 上下文会被清除？](https://stackoverflow.com/questions/8973682/why-does-the-combobox-selectedvalue-databinding-context-gets-cleared-when-bindin)

# java - Java中的随机数真的不可预测吗？

> ID：10055249
> 
> 赞同：2
> 
> 时间：2012-04-07T14:22:02.607
> 
> 标签：java, random, generator

有一些方法可以在java中生成随机数

其中之一是：

```
Random rand=new Random();
int randomInteger=rand.nextInt(); 
```

现在我的问题是：我们可以预测下一个随机数吗？

* * *

在4个答案后编辑：

我真正的问题是：

我正在开发一个蛇游戏（Linux 中的 nibbles），我正在对蛇进行编程以使其移动，现在我想知道是否有可能预测苹果将出现的下一个位置。

可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T14:25:53.463

您不仅可以预测它，而且绝对知道它，~~如果您确切知道`System.currentTimeMillis`调用`new Random()`. 这是因为`new Random()`是 的快捷方式`new Random(System.currentTimeMillis())`，它设置了伪随机生成器的种子。（嗯，这就是我上次查看源代码时所做的；文档[实际上并没有说它](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)必须使用它。）~~ **如果**您知道使用的种子`new Random()`。伪随机生成器是确定性的，如果你知道种子，你就知道序列。*更新：查看 Java 6 源代码 [我手边没有 Java 7 源代码]，默认种子是使用时递增的种子编号的组合，加上`System.nanoTime`. 所以你需要知道这两个。提高标准。*

如果您*不*知道使用的种子~~`System.currentTimeMillis()`何时`new Random()`发生~~的确切值`new Random()`，那么*确实很难*预测下一个值将是什么。这就是伪随机生成器的意义所在。我不会说这是不可能的。真的，真的很难有任何程度的信心。

* * *

**问题编辑后更新**：这是*可能的*，但非常非常困难，而且就这样做的方式而言，可以让玩家提高他们在游戏中的得分，我想说你可以忽略它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T14:28:35.290

Random 类生成的“随机”数是通过算法生成的，因此是真正的伪随机数。所以是的，理论上，你可以预测下一个数字。但是，知道 Random 产生的一个数字，甚至是一系列数字，并不足以预测下一个数字。您还需要知道 Random 对象正在使用的种子，并且您需要遵循其伪随机数生成算法。

如果您想要一组可重复的“随机”数字，您可以在创建 Random 实例时指定自己的种子，例如

```
Random rand = new Random(1234); // Replace 1234 with any value you'd like 
```

每次使用相同的种子实例化 Random 时，都会得到相同的数字序列。因此，例如，您可以编写一个小型命令行程序，用一些种子实例化 Random 并打印它返回的数字列表，然后在代码中用相同的种子实例化 Random。然后你会知道你的代码将收到哪些号码以及按什么顺序。这对于调试非常方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T14:30:17.353

在计算机等确定性设备上可能没有真正的随机数。但。

如果您想要一个加密安全的随机数，请使用 SecureRandom：[http ://docs.oracle.com/javase/6/docs/api/java/security/SecureRandom.html](http://docs.oracle.com/javase/6/docs/api/java/security/SecureRandom.html)

Random 使用确定性算法：

> 如果使用相同的种子创建 Random 的两个实例，并且为每个实例进行相同的方法调用序列，它们将生成并返回相同的数字序列。

[http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#Random](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#Random)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T14:31:32.820

本质上，如果您知道随机数生成器的种子，您就可以确定地预测整个序列。如果不这样做，无论生成多少数字，都无法准确预测下一个数字。

请注意，如果您依赖不可预测的数字来保证安全，您应该使用[`java.secure.SecureRandom`](http://docs.oracle.com/javase/6/docs/api/java/security/SecureRandom.html)而不是`java.util.Random`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T17:42:14.710

当其他人回答这个问题时，`java.util.Random`如果您知道起始种子，则可以预测随机性。

如果您正在使用类似 linux 的系统，请查看这些特殊文件`/dev/random`和`dev/urandom`. 据说从这些文件中读取会返回“更好”的随机数，随机性取决于键盘活动、鼠标移动和其他一些奇异因素。

有关详细信息，请参阅此[Wikipedia](http://en.wikipedia.org/wiki/Entropy_%28computing%29#Entropy_in_the_Linux_kernel)页面。此页面还说 Windows 中存在等效的 API。

# vb.net - 什么是交互类？

> ID：10055250
> 
> 赞同：1
> 
> 时间：2012-04-07T14:22:16.460
> 
> 标签：vb.net

我有以下两行代码：

```
Microsoft.VisualBasic.Interaction.Beep()
or
Microsoft.VisualBasic.Beep() 
```

这两行的结果是一样的。

什么是交互类？我什么时候使用它？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:28:36.893

这两行导致生成完全相同的代码。你选择哪一个是风格问题。就我个人而言，我会选择`Beep()`在没有命名空间限定符的情况下简单地使用该命令

```
Sub Main()
  Beep()
End Sub 
```

在您提出的两个选择之间，尽管我会`Microsoft.VisualBasic.Interaction.Beep()`选择`Microsoft.VisualBasic.Beep()`。前者是方法的完全限定名称，它对读者来说是完全明确的。后者虽然使用了 VB.Net 名称解析的技巧，甚至可能会欺骗有经验的 VB.Net 用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T14:38:01.040

我喜欢 Visual Basic 的最大优点之一是它使代码更简单，并且通常包含常用函数的快捷方式，例如`MsgBox`、`Stop`和`Beep`. 这就是为什么两条线会产生相同的结果，因为它们实际上是相同的。

此外，正如@JaredPar 所提到的，最好使用完全限定名称`Microsoft.VisualBasic.Interaction.Beep()`，或者`Beep()`这将使代码更具可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T16:12:22.417

这是一个有点古怪的名字，除了立即窗口中可用的方法之外，没有很好的猜测。关键是类是用`<StandardModule>`属性修饰的。这是对编译器将类的成员移动到全局名称空间的提示。所以你可以简单地编写 MsgBox() 而不用担心类名。

就像你在 VB6 中一样。

# python - 尝试配置 Django 时出现 Sqlite3 操作错误

> ID：10055251
> 
> 赞同：0
> 
> 时间：2012-04-07T14:22:27.780
> 
> 标签：python, django, sqlite

我正在尝试在我的 Mac 上配置 Django。

执行“python manage.py syncdb”时出现以下错误（摘录）：

```
self.connection = Database.connect(**kwargs)
sqlite3.OperationalError: unable to open database file 
```

我已经通过并检查过的可能原因：

*   设置数据库部分指向特定文件：

    ```
    DATABASES = {

    'default': {

    'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
    'NAME': '%s/db/tumblog.sql' % PROJECT_ROOT, # Or path to database file if using sqlite3.
    }
    } 
    ```

*   我在 virtualenv 上运行，所以这不是权限问题（我认为）。

*   在运行 syncdb 命令之前，我关闭了 settings.py 的编辑器。

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:02:26.277

Sqlite3 会`*.db`自动创建文件，但不会创建`db`您期望文件所在的目录`db/*.db`。

该目录是否`PROJECT_ROOT + '/db`存在并且对您是否可写？

当然，添加一行

```
print '%s/db/tumblog.sql' % PROJECT_ROOT 
```

到 settings.py 并运行，看看路径是否符合您的预期。

# parameters - swfmill 在带参数的库中导入 swf

> ID：10055253
> 
> 赞同：0
> 
> 时间：2012-04-07T14:23:07.387
> 
> 标签：parameters, global, flashvars, swfmill

我有这段 XML 用于通过 swfmill 创建一个新的 swf 文件：

```
<?xml version="1.0" encoding="iso-8859-1" ?>

<movie width="300" height="250" framerate="24">
  <background color="#ffffff"/>
  <frame>
    <library>
      <clip id="test_swf" import="test.swf"/>
    </library>
    <place id="test_swf"/>
  </frame>
</movie> 
```

我想向这个 swf 传递一些变量，比如文本和图像，以便在舞台上加载，就像使用 FlashVars 可以做的那样：`<param name=FlashVars value="oneText=Hello%20World&oneImage=image.jpg" />`

谢谢！

**小更新：**

我试图将参数作为 GET 变量提供，如下所示

```
<clip id="test_swf" import="test.swf?theValue=Hello%20World"/> 
```

但它不起作用，并且在编译时出现此错误：

```
WARNING: Cannot import test.swf?oneValue=Hello%20World (unknown extension), skipping. 
```

**第二次更新**

经过一番搜索，我找到了一种方法来建立将变量传递给 swfmill 输出 swf 中的嵌入式 SWF 的正确方法。当然，使用@little update 的方法是非常错误的。

现在 xml 代码如下所示：

```
<?xml version="1.0" encoding="iso-8859-1" ?>
<movie version="8" width="600" height="400" framerate="24">
  <background color="#000000"/>
  <frame>
    <library>
      <clip id="main" import="test.swf"/>
    </library>
    <DoAction>
      <actions>
        <Dictionary>
          <strings>
            <String value="_global"/>
            <String value="aa"/>
            <String value="Hello world"/>
            <String value="bb"/>
            <String value="image.jpg"/>
          </strings>
        </Dictionary>
        <PushData>
          <items>
            <StackDictionaryLookup index="0"/>
          </items>
        </PushData>
        <GetVariable/>
        <PushData>
          <items>
            <StackDictionaryLookup index="1"/>
            <StackDictionaryLookup index="2"/>
          </items>
        </PushData>
        <SetMember/>
        <PushData>
          <items>
            <StackDictionaryLookup index="0"/>
          </items>
        </PushData>
        <GetVariable/>
        <PushData>
          <items>
            <StackDictionaryLookup index="3"/>
            <StackDictionaryLookup index="4"/>
          </items>
        </PushData>
        <SetMember/>
        <EndAction/>
      </actions>
    </DoAction>
    <place id="main" />
  </frame>
</movie> 
```

我的动作脚本（AS 2.0）如下所示：

```
_root.text_input.text = _global.aa;
loadMovie( _global.bb ,dropzone,'GET');
trace (_global.aa+' '+_global.bb); 
```

我通过使用`swfmill swf2xml test2.swf`where test2.swf 获得了您在 xml 中看到的数据结构，其中包含第一帧上的休闲声明：

```
_global.aa = 'Hello world';
_global.bb = 'someimage.jpg'; 
```

不知何故，即使这看起来不错，变量似乎也不能用作全局变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:15:21.797

Haxe 和 SWFMill 的组合完成了这项工作。

# html - 所有浏览器中的边缘空间，HTML？

> ID：10055254
> 
> 赞同：2
> 
> 时间：2012-04-07T14:23:16.303
> 
> 标签：html, css, internet-explorer, firefox, google-chrome

这让我烦恼了一段时间，但解决方案必须非常简单。如果我创建一个基本页面并添加`<p>test</p>`，它不会停留在页面的确切顶部或左侧。相反，它似乎被填充了大约 10 像素。我已经在 div 中尝试过，`margin: 0px; padding: 0px;`但是没有用。

帮助被appriciated！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T14:26:14.950

默认情况下，html 页面有 10 像素的边距。试试这个：

```
html, body {
    margin: 0;
    padding: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T14:25:42.910

您还需要给**“<body>** ”零边距和填充

```
<body style="margin: 0; padding: 0;">
...
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T14:26:08.410

将这些设置添加到页面正文：

```
body
{
    padding: 0px;
    margin: 0px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T14:34:33.630

他们说的。此外，还有一个默认值`line-height`，通常是字体大小的 120%。因此，对于 20 像素的字体大小，即使所有`padding`s 都为零，您仍然有 4 个像素的“填充”来处理（上方 2 个像素，下方 2 个像素）。要纠正，设置`line-height`为`1`。

# python - 系统、PIP 和 Virtualenv 上的 Python 2.7 仍在使用 2.6 - 如何将它们切换为使用 2.7

> ID：10055260
> 
> 赞同：7
> 
> 时间：2012-04-07T14:24:06.217
> 
> 标签：python, macos, virtualenv, pip

我在 MacOSx 10.6.8 上并且安装了 python 2.7

python -v 产生：

```
Python 2.7.2 (v2.7.2:8527427914a2, Jun 11 2011, 15:22:34) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
dlopen("/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/readline.so", 2);
import readline # dynamically loaded from /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/readline.so 
```

我他们跑：

```
$ virtualenv venv 
```

进而

```
$ . venv/bin/activate 
```

并做一个 python -v

我得到：

```
Python 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) 
[GCC 4.2.1 (Apple Inc. build 5646)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
dlopen("/Users/nkhdev/venv/lib/python2.6/lib-dynload/readline.so", 2);
import readline # dynamically loaded from /Users/nkhdev/venv/lib/python2.6/lib-dynload/readline.so 
```

有人可以告诉我使用 virtualenv 从我的系统创建和使用 python 2.7 的步骤吗？或者有virtualenv，使用python 2.7期间。我不在乎版本是否是我的系统版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T15:13:07.563

您可能使用了 Apple 提供的现有版本`easy_install`来安装`pip`等。默认情况下，`easy_install`它与特定的 Python 实例相关联，在本例中为 Apple 提供的系统 Python 2.6。通常，当您安装新版本的 Python 时，您还需要为其安装新版本`easy_install`。按照[此处](http://pypi.python.org/pypi/distribute)提供的分发包的说明进行操作`easy_install`，然后使用它来安装`pip`并使用它`pip`来安装`virtualenv`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:14:48.027

我的*猜测*是 pip 和 virtualenv 都来自 2.6 发行版。您可以检查哪个系统用户使用`which pip`. 如果您确实安装了其他 pip/virtualenv（用于`which -a pip`查找所有这些），则可能是您需要调整`PATH`环境变量。

需要注意的另一件事是安装的 Python 脚本通常具有 Python 可执行文件的完整路径。您可以通过运行查看正在使用哪个 python pip`head $(which pip)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-18T17:58:05.123

我有一个类似的问题，virtualenv python 是从 2.7.6 系统 python`/usr/bin/python`而不是 2.7.9 版本`/usr/local/bin/python`

我必须做：

```
sudo pip uninstall virtualenv 
```

然后我像这样安装了setuptools：

```
curl https://bootstrap.pypa.io/ez_setup.py -o - | python 
```

然后我使用新版本的 setuptools 安装 pip，如下所示：

```
easy_install pip 
```

然后我安装了virtualenv

```
pip install --upgrade virtualenv 
```

# android - ActionbarSherlock - 横向标签无响应

> ID：10055264
> 
> 赞同：5
> 
> 时间：2012-04-07T14:24:56.573
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock

我目前正在使用 actionbarsherlock 向后移植我的应用程序以使其在 3.0 之前的设备上运行。

如果用户以纵向模式启动应用程序，然后旋转屏幕并尝试选择选项卡，则在用户执行另一个操作之前不会发生任何事情。可以在此处下载执行此操作的当前版本 (sherlock-alpha1) [http://tinyurl.com/cz95nup](http://tinyurl.com/cz95nup)。

标签的添加方式如下

```
 bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        bar.addTab(bar.newTab().setText("tab1").setTabListener(this),false);
        bar.addTab(bar.newTab().setText("tab2").setTabListener(this),false);
        bar.addTab(bar.newTab().setText("tab3").setTabListener(this),false); 
```

如果您以横向启动应用程序然后以纵向模式使用它，也会发生这种情况（纵向选项卡将不起作用）。

它在运行本机操作栏的设备上运行良好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T15:27:20.027

您是否正在处理清单中的配置更改？

```
android:configChanges="orientation" 
```

如果是这样，这不允许 ActionBarSherlock 安装的虚假装饰视图在旋转时重新初始化，这将导致许多问题。

应尽可能谨慎地使用处理配置更改。文档指出，[它应该作为最后的手段使用](http://developer.android.com/guide/topics/manifest/activity-element.html#config)。

希望图书馆的未来版本能够考虑到选择这样做的人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-15T00:52:19.567

对我来说，它在方向更改后没有响应，而不是在横向模式下。经过大量试验和错误后，我找到了以下解决此错误的方法：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    super.onConfigurationChanged(newConfig);
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
} 
```

诀窍是将导航模式更改为列表，然后更改回选项卡。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:08:44.013

我找到了解决方法。可能不是一个正确的实现，因为它重新创建了选项卡布局，但它可以工作:)

[https://github.com/JakeWharton/ActionBarSherlock/pull/549](https://github.com/JakeWharton/ActionBarSherlock/pull/549)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T02:30:36.560

我有同样的问题。我必须添加这些行，在 AVD 上没问题，不知道它是否在真实设备上工作。

```
<supports-screens android:largeScreens="true" android:normalScreens="true" android:smallScreens="true" android:anyDensity="true" /> 
```

# javascript - 如何选择前第三个 DOM 元素的子元素？

> ID：10055266
> 
> 赞同：3
> 
> 时间：2012-04-07T14:25:01.827
> 
> 标签：javascript, jquery, html

我有这个：

```
<div ><a href='#' id='my_target'>Link</a></div>
<div></div>
<div><div></div></div>
<div><div id='my_div'></div></div> 
```

`#my_target`当事件触发时，我该如何选择`my_div`？

我尝试了诸如 之类的东西`prev().prev().prev().children()`，但我无法让它工作，我想要更高效的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T14:32:58.570

或者，您也可以只使用相对路径： HTML：

```
<div><a href='#' id='my_target'>Link</a></div>
<div></div>
<div><div></div></div>
<div><div id='my_div'></div></div> 
```

JS：

```
$(document).ready(function() {
    console.log($("#my_div").parent().parent().children(':first'));
}); 
```

JSFiddle：http: [//jsfiddle.net/5Bf6g/](http://jsfiddle.net/5Bf6g/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T14:37:11.893

我是这样做的：

```
​var md = $("#my_div");​​​​​​​​​
var anchor = $(md.parent().prevAll().last().find("a"));
console.log(anchor); 
```

JSFiddle：http: [//jsfiddle.net/t9HZz/](http://jsfiddle.net/t9HZz/)

[`prevAll()`](http://api.jquery.com/prevAll/)抓取所有父母的兄弟姐妹，然后我们抓取最后一个 with`last()`因为它以相反的顺序添加兄弟姐妹，然后我们可以从那里找到链接。

尽管在您的示例中，该链接确实有一个 id，因此您可以`$("#my_target")`在此特定示例中执行此操作。

# xpath - 找到指定节点后查找兄弟节点

> ID：10055269
> 
> 赞同：35
> 
> 时间：2012-04-07T14:25:14.570
> 
> 标签：xpath

考虑以下非常简化的示例。

```
<n></n>
<k></k>
<m></m>
<k></k> 
```

如何在节点`k`之后搜索第一个兄弟？`m`基本上，找到某个节点，然后从该节点继续搜索。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-04-07T17:59:34.543

> 如何在节点`k`之后搜索第一个兄弟？`m`基本上，找到某个节点，然后从该节点继续搜索。

假设我们有以下格式良好的 XML 文档：

```
<t>
    <n></n>
    <k></k>
    <m></m>
    <k></k>
</t> 
```

**然后是以下 XPath 表达式**：

```
/*/m[1]/following-sibling::k[1] 
```

选择XML 文档顶部元素的`k`第一个子元素的第一个后续兄弟。`m`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T14:32:44.013

好问题：试试看........

```
<a>
<n></n>
<k></k>
<m></m>
<k></k> <====
<k></k>
<m></m>
<k></k>
</a>

   /a/k[. = preceding::m][1] 
```

# python - 创建对象的副本，而不是在新的多处理进程中重新初始化

> ID：10055276
> 
> 赞同：2
> 
> 时间：2012-04-07T14:26:26.590
> 
> 标签：python, copy, multiprocessing, deep-copy

这段代码显示了我正在尝试做的事情的结构。

```
import multiprocessing
from foo import really_expensive_to_compute_object

## Create a really complicated object that is *hard* to initialise.
T = really_expensive_to_compute_object(10) 

def f(x):
  return T.cheap_calculation(x)

P = multiprocessing.Pool(processes=64)
results = P.map(f, range(1000000))

print results 
```

问题在于，每个进程都从花费大量时间重新计算 T 而不是使用计算一次的原始 T 开始。有没有办法防止这种情况？T 有一个快速（深度）复制方法，所以我可以让 Python 使用它而不是重新计算吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T14:40:51.760

[`multiprocessing`](http://docs.python.org/library/multiprocessing.html)文件[建议](http://docs.python.org/library/multiprocessing.html#all-platforms)

> 将资源显式传递给子进程

所以你的代码可以重写为这样的：

```
import multiprocessing
import time
import functools

class really_expensive_to_compute_object(object):
    def __init__(self, arg):
        print 'expensive creation'
        time.sleep(3)

    def cheap_calculation(self, x):
        return x * 2

def f(T, x):
    return T.cheap_calculation(x)

if __name__ == '__main__':
    ## Create a really complicated object that is *hard* to initialise.
    T = really_expensive_to_compute_object(10)
    ## helper, to pass expensive object to function
    f_helper = functools.partial(f, T)
    # i've reduced count for tests 
    P = multiprocessing.Pool(processes=4)
    results = P.map(f_helper, range(100))

    print results 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T14:39:56.130

为什么不`f`采用`T`参数而不是引用全局，并自己做副本？

```
import multiprocessing, copy
from foo import really_expensive_to_compute_object

## Create a really complicated object that is *hard* to initialise.
T = really_expensive_to_compute_object(10) 

def f(t, x):
  return t.cheap_calculation(x)

P = multiprocessing.Pool(processes=64)
results = P.map(f, (copy.deepcopy(T) for _ in range(1000000)), range(1000000))

print results 
```

# html - 出现文字的css3图片动画

> ID：10055277
> 
> 赞同：1
> 
> 时间：2012-04-07T14:26:26.647
> 
> 标签：html, animation, css, hover

我正在尝试使图片在图片上褪色，并且纯粹使用 CSS3 出现在它们上面的一些文本。我从这里进行了基本的淡入淡出：http: [//css3.bradshawenterprises.com/cfimg1/](http://css3.bradshawenterprises.com/cfimg1/) 现在我要做的是，当我将图片悬停时，不仅另一张图片淡入，还有一些文字包含可点击链接的内容（例如下载链接）。第一个问题是文本出现在 div 之外，我可以通过添加以下内容来解决：

```
.crossfade h1 {
position: absolute;
} 
```

我使用 h1，因为段落根本不出现。所以在此之后，我得到了正确的淡入淡出，甚至文本都在它的位置，但它不可选择且不可点击，它看起来像是图像的一部分。

到目前为止，这是我的代码（html和css部分也是）：

```
<div class="crossfade">
    <img class="bottom" src="pics\hover.jpg" />
    <h1>Title</h1>
    <img class="top" src="pics\23.jpg" />
</div>

.crossfade {
    position:relative;
    height:200px;
    width:200px;
    margin:0 auto;  
}
.crossfade img {
    position:absolute;
    left: 0;
    -webkit-transition: opacity 0.2s ease-in-out;
    -moz-transition: opacity 0.2s ease-in-out;
    -o-transition: opacity 0.2s ease-in-out;
    -ms-transition: opacity 0.2s ease-in-out;   
    transition: opacity 0.2s ease-in-out;
}

.crossfade img.top:hover {
    opacity: 0;
}

.crossfade h1 {
    position: absolute;
} 
```

任何有关它的帮助或想法将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:11:34.177

[http://jsfiddle.net/3tkWj/5/](http://jsfiddle.net/3tkWj/5/)

我刚刚添加了另一个 :hover 和 z-index。

```
.crossfade img.top:hover, .crossfade p:hover+img {
    opacity: 0;
} 
```

编辑：这是您想要的工作示例（请参阅评论）

[http://jsfiddle.net/3tkWj/12/](http://jsfiddle.net/3tkWj/12/)

当心，我修剪了 CSS。

# clojure - clojure 中的 # 和 % 的名称是什么？

> ID：10055278
> 
> 赞同：2
> 
> 时间：2012-04-07T14:26:36.760
> 
> 标签：clojure

clojure 中在表达式开头使用 # 的构造的名称是什么，中间是 %？例如

```
#(fn [a b] (% b a)) 
```

我已经尝试搜索它的文档，但由于定义它的两个字符都不是字母数字，所以我的搜索并不太成功。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T14:30:55.613

它是匿名函数声明的读取器宏。有关阅读器宏的完整列表，请参见[http://clojure.org/reader](http://clojure.org/reader)。

例如，`#(* 5 %)`转换为`(fn [x] (* 5 x))`.

您的示例在阅读阶段转换为`(fn [op] (fn [a b] (op a b)))`(`op`是我在那里选择的占位符。)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-07T14:32:28.813

它出现在（至少）两个地方：

1.  在[其他有用的函数和宏](http://clojure.org/other_functions)下（但没有提到 %1 %2 等）。

2.  在[阅读器](http://clojure.org/reader)（解析程序）中 - # 导致通过表查找发送到阅读器宏（您必须仔细查看，但这确实描述了 %1 等）

在这两种情况下，它都没有有用的名称（实际上，“Dispatch”可能是隐含的名称 - 请参阅第二个链接）。更一般地，“#”被称为[octothorp](https://en.wikipedia.org/wiki/Number_sign)，除其他外（在智利，“gato”（猫）出于某种未知原因）。

（是的， %1 %2 是第一个和第二个参数，等等，而 %& 是“rest” - 你可以只使用 % 作为第一个 - 请参阅第二个链接）。

PS 正如其他人所说，它是函数的简写。所以`(fn [a b] (+ a b))`相当于`#(+ %1 %2)`：

```
Clojure> (#(println % % %2) 1 2)
1 1 2
nil
Clojure> (#(apply println %&) 1 2 3)
1 2 3
nil 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T14:57:34.257

#() 构造是匿名函数定义的简写。% 符号用作其参数的简写。

第一个参数的 %。%integer 表示多个参数（即 %1 %2）。%& 用于包装在序列中的其余（未使用的）参数。

```
=> (#(println % %2 %3 %&) 1 2 3 4 5)
1 2 3 (4 5) 
```

您可以通过对其进行宏扩展来查看它创建的功能

```
#((\ %1 %2) * %2))
=> (macroexpand-1 '#((\ %1 %2) * %2))
(fn* [p1__744# p2__745#] ((\space p1__744# p2__745#) * p2__745#)) 
```

用正常的话来说，以下是相同的：

```
 #((\ %1 %2) * %2))
  (fn [p1 p2] ((\ p1 p2) * p2)) 
```

请注意，您的示例创建了一个匿名函数，其中包含一个新的匿名函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T14:33:58.983

"#" 应该是 lambda 字符，% 表示预期的第一个参数

# entity-framework - SQL FileStream + Entity Framework 存储大文件

> ID：10055280
> 
> 赞同：9
> 
> 时间：2012-04-07T14:26:41.467
> 
> 标签：entity-framework, filestream

当我想将文件存储在文件流列中时，我总是需要将整个二进制文件读入内存：

```
using (MemoryStream memoryStream = new MemoryStream())
{
   sourceStream.CopyTo(memoryStream);
   binaryStore.Content = memoryStream.ToArray(); //Content = filestream column
} 
```

实体框架有没有办法直接放流？因为，如果我想上传一个大文件，我会得到 OutOfMemoryException。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T16:31:50.710

EF 不支持`FIlESTREAM`. 它处理与`FILESTREAM`普通`VARBINARY(MAX)`列的所有交互，因此如果要使用流式传输，则必须直接使用 ADO.NET。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T16:34:48.300

未在 EF 中看到有关 FILESTREAM 支持的任何更新。（*之前提到过* [这里](http://blogs.msdn.com/b/adonet/archive/2008/05/12/what-s-new-in-the-sp1-beta.aspx)对 .net 3.5 sp1 版本的部分支持）。我想实体框架正在通过 TSQL 访问 FILESTREAM，显然您将无法获得 FILESTREAM 的流式传输性能优势。（*需要将所有文件内容读入内存*）

因此，推荐的方法是使用`SqlFileStream`.Net API。

[http://lennilobel.wordpress.com/2011/08/22/using-sqlfilestream-in-c-to-access-sql-server-filestream-data/](http://lennilobel.wordpress.com/2011/08/22/using-sqlfilestream-in-c-to-access-sql-server-filestream-data/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-14T09:27:32.207

你可以做到，但它需要一些手动工作。需要`FILESTREAM`启用。

[https://docs.microsoft.com/en-us/sql/relational-databases/blob/enable-and-configure-filestream](https://docs.microsoft.com/en-us/sql/relational-databases/blob/enable-and-configure-filestream)

表，请注意`unique rowguidcol not null`所需的 IdFile 列。

```
CREATE TABLE [dbo].[Files](
    [id] [int] IDENTITY(1,1) NOT NULL,
    [IdFile] [uniqueidentifier] unique ROWGUIDCOL  NOT NULL,
    [Title] [nvarchar](max) NULL,
    [File] [varbinary](max) FILESTREAM  NULL,
 CONSTRAINT [PK_Table_1] PRIMARY KEY CLUSTERED 
(
    [id] ASC
))

GO

ALTER TABLE [dbo].[Files] ADD  CONSTRAINT [DF_Files_IdFile]  DEFAULT (newid()) FOR [IdFile]
GO 
```

EF 模型，IdFile 列不存在，它只包含默认值，对我们没有用处。它仅由 SQL Server 使用：

```
[Table("Files")]
public class FileModel
{
    public int Id { get; set; }
    public string Title { get; set; }
    public byte[] File { get; set; }
} 
```

虚拟机：

```
public class FileViewModel
{
    public string Title { get; set; }
    public HttpPostedFileBase File { get; set; }
} 
```

资源：

[http://www.floatincode.net/post/sql-file-stream-in-asp.net-mvc-with-entity-framework](http://www.floatincode.net/post/sql-file-stream-in-asp.net-mvc-with-entity-framework)

# spring - 如何测试在 Tomcat 中配置的数据源连接

> ID：10055282
> 
> 赞同：2
> 
> 时间：2012-04-07T14:27:03.813
> 
> 标签：spring, tomcat, jdbc

我正在从 Websphere 服务器迁移到 Tomcat，并寻找任何可能有助于我的应用程序可管理性的开源工具。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:17:08.853

在应用程序级别，在 dbcp 配置中，您可以指定像 validationQuery 和 testOnBorrow 这样的指令，它们执行与 WebSphere 相同的功能。您可以搜索“tomcat dbcp”以获取有关各种选项的更多详细信息。

# c++ - 为什么必须用 std::string::operator+() 显式调用 Myclass::operator string()？

> ID：10055286
> 
> 赞同：5
> 
> 时间：2012-04-07T14:28:10.147
> 
> 标签：c++

考虑下面的代码。我不明白为什么我的 GCC 编译器不尝试隐式使用 Myclass::operator string()，尽管 Myclass::operator string() 已定义：

```
#include <string>

using namespace std;

struct T {
};

T operator+(const T& a, const T&b) { }

struct Myclass {
    operator string() const { }
    operator T() const { }
};

int main() {
    T a;
    string b;
    Myclass c;
    c + a;  // OK
    c.operator  string() + b; // OK
    c + b; // Not OK
    /* The above line does not compile, although in <string> I see:
    basic_string<_CharT, _Traits, _Alloc>
    operator+(const basic_string<_CharT, _Traits, _Alloc>& __lhs,
          const basic_string<_CharT, _Traits, _Alloc>& __rhs)
     */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T14:30:29.410

因为字符串运算符是一个模板，所以它不能被拾取，而另一个运算符可以。

# java - 中间件和 SOA 示例

> ID：10055290
> 
> 赞同：33
> 
> 时间：2012-04-07T14:28:55.817
> 
> 标签：java, jms, ejb-3.0, soa, message-queue

我是一个没有经验的 Java 开发人员，我试图围绕一些基本的中间件/SOA 概念和技术，特别是：

*   面向服务的架构 (SOA)
*   面向消息的中间件 (MOM)
*   消息队列
*   阿帕奇骆驼
*   骡子
*   EJB
*   端点和路由
*   服务总线/ESB
*   管理系统

在在线/在维基百科上查看每一个之后，我能够（在大多数情况下）为每一个得到体面的*定义。*我不明白的是**所有这些技术/概念如何**在后端协同工作以提供第二层/业务层解决方案。

有人可以举一个使用所有这些技术/概念的架构示例，并解释它们在整体解决方案中的**作用吗？**一旦我看到一个工作示例，我相信它会帮助我连接大部分点。

**编辑**：自从我添加了赏金，我有几个建议阅读书籍的答案。尽管我很欣赏这里的所有反馈，但我根本无法放弃 300 声望点来回答本质上归结为“RTM”的答案（尤其是当我破产且*买不起*手册时！）重申，赏金和明确的答案将交给一个可以在一个有意义的、实际的例子中击中所有这些子弹的人。**这不一定是中间件纲要！！！**只需一两段就可以说明如何将所有这些协调使用以生成 Java 业务层解决方案。再次感谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-09T20:33:00.140

SOA 主要原则：将系统构建为一组服务，其中每个服务

*   粗粒度
*   可互操作
*   松耦合

一家公司提供了许多经过多年开发并以某种形式向用户（人类或其他系统）公开的业务服务（粗粒度）。设计和开发这些功能中的每一个的可能性更大，而不是牢记上述三个原则。此外，这些功能中的每一个都可能在不同的异构平台上运行，使用不同的技术等。

如果您想整合这些不同的功能从而创建新的解决方案怎么办（例如，亚马逊店面是一项由他们的目录服务、购物车服务等组成的新服务）？

你有两个选择：

1.  牢记 3 条原则，从头开始构建新功能。但这是一项非常昂贵的努力，而且几乎永远不会成功。
2.  一种有效且风险较小的替代方案是从现有的、经过验证的（经过良好测试的）服务组装/组合它。

选项 2 是**ESB**可以帮助支持路由、转换、监控等的地方**[。Apache Camel](http://camel.apache.org/)、[Mule](http://www.mulesoft.org/)**是开源 ESB。端点和路由是这些 ESB 实现的 EIP（[企业集成模式](http://www.enterpriseintegrationpatterns.com/toc.html)）中使用的术语。当 ESB 想要路由/集成在异构平台上运行的服务时， ESB 可以借助**MOM**（[面向消息的中间件](https://docs.oracle.com/cd/E19316-01/820-6424/aeraq/index.html)）（例如，目录服务可能在大型机系统上运行，但购物车是使用运行的**有状态 EJB**实现的在 Java 应用程序服务器中）。**消息队列**是 MOM 中的一个概念，它充当发送方和接收方之间消息的临时存储。这种临时存储提供了很多好处，如异步交付、保证交付等。有几个不同的 MOM 供应商，如 IBM (WebSphere MQ)、开源 ActiveMQ 等。我们可以使用**[JMS](https://en.wikipedia.org/wiki/Java_Message_Service)**使您的代码独立于供应商。

我试图将所有概念与一个例子联系起来。我也试图保持简短。请提出后续问题以获得更多理解。

MOM 不是实现 SOA 的必要条件。例如，如果您的所有服务都通过 HTTP 通过 SOAP 公开，那么在这种情况下您不需要 MOM。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-13T04:35:27.653

每种技术的 Java 类/示例。在单个帖子中可能无法实现，因为您所问的是进化行业在过去十年中经历了并且仍在不断发展。因此，过去十年发生的事情不能在一篇文章中涵盖。但是，很高兴了解它是如何经历这个阶段的，为什么需要新技术堆栈以及它解决了什么样的问题。

*   EJB 企业 Java Beans 服务器端组件架构。它可以实现快速和简化的开发

    1）分布式（多个应用程序服务器相互通信，服务器组件（例如服务调用托管在不同服务器上的其他服务）。

    2）事务性-持久性bean（DB TXN），任何简单/网络/分布式应用程序的最重要部分。易于开发，例如配置库。编写处理事务的 XML，例如何时提交、何时回滚（发生异常）等。JPA Java Persistance API 提供对象关系映射。比如你的表格行通过xml配置映射到你的java对象。

    3）安全 - 身份验证（uid/pwd）和授权（基于角色 - 谁是登录用户以及他可以做什么所有任务？）。

这在开发任何企业应用程序时看起来不错，但是它有一些缺点，例如它非常重（其中包含所有 jars。）。用作 bean 的类应符合 EJB 标准（类应为 EJB 引擎实现某些接口以了解它是哪种类型的 bean）。

为了克服这种情况，业界有许多可供 EJB 使用的替代方案，例如 Hibrnate 执行相同的操作，例如 OR 映射，TXN 处理与 EJB 中的持久 bean 提供的相同。Spring，轻量级框架并简化业务逻辑（您可以使用您已经构建的类，无需实现任何接口、检查异常或扩展一些强制性抽象类）。

现在，大多数公司都在使用轻量级框架，例如 Spring、Hibernate、IBatis、Axis-2。

*   面向服务的架构 (SOA) 面向服务的架构是对企业级平台独立性的回应。或者为了更快地集成您的应用程序，在不同的应用程序服务器之间进行通信。

    试想一下，您想实施解决方案，为世界各地的酒店预订提供选项。您的要求是检查这些酒店的客房供应情况。现在，这意味着您需要一次与多个酒店应用程序进行交互。不必每家酒店都使用相同的标准，或者它们的应用程序（服务器、编程语言）可以部署在不同的应用程序服务器上。同时，编写可以与所有不同类型的应用程序服务器通信的不同应用程序是不切实际的。我们需要一些基于标准的解决方案来解决这个问题。这可以通过 Web 服务实现。

这是可能的，因为 Web 服务在基于 XML 的 SOAP（简单对象访问协议）中发送消息。XML 用于跨任何语言、平台或网络协议交换数据。

Web 服务可以分为基于 SOAP 和 REST。基于 SOAP 的服务 JAX-RPC 和 JAX-WS ( [http://www.ibm.com/developerworks/webservices/library/ws-tip-jaxwsrpc/index.html](http://www.ibm.com/developerworks/webservices/library/ws-tip-jaxwsrpc/index.html) )

Web服务可以先契约开发——先写WSDL。code first - 先写代码。

现在，让我们谈谈如何实际开始使用 Web 服务。

最简单的 Web 服务或 hello world(JAXWS) 可以写成如下：- [http://svn.apache.org/viewvc/cxf/trunk/distribution/src/main/release/samples/java_first_jaxws/](http://svn.apache.org/viewvc/cxf/trunk/distribution/src/main/release/samples/java_first_jaxws/)

*   面向消息的中间件 (MOM)
*   管理系统
*   消息队列（点对点）

    MOM 需要克服请求-响应式通信的缺点。当客户端发送响应时，服务器需要处于活动状态。客户端等待响应，直到服务器执行并响应。

    请求响应 - 如果服务器或客户端关闭，应用程序将失败。MOM - 任何一个端点都不需要按时发送请求消息以进行处理。

    MOM 是概念，JMS 是这个概念的规范。许多供应商已经实现了这个规范，例如 IBM 有 MQ、OpenJMS 开源实现、Tibco 的 EMS 等。

JMS 规范主要有两种模式。发布/订阅和 ponin 到点。

**Pub/sub**是主题，您的应用程序希望向所有相关方发布某些信息。例如仪表板。（股票应用程序希望向所有注册的侦听器通知某些消息）。

**点对点**通信是通过消息队列完成的。

业务用例 - 认为您有应用程序，例如客户对客户服务的请求。另一方，您有多个客户服务代表，而其他客户有时多于客户服务代表，一次只有一个代表会收到要处理的请求，他/她在完成任务之前不会收到下一个请求。（同一个队列多个窗口，哪个窗口空闲将处理请求）。您可以在其中考虑其他复杂性，例如，如果其中一个节点发生故障、请求未处理以及特定类型的请求需要由特定节点处理怎么办。等等

生成代码：- [http://docs.oracle.com/javaee/1.4/tutorial/examples/jms/simple/src/SimpleProducer.java](http://docs.oracle.com/javaee/1.4/tutorial/examples/jms/simple/src/SimpleProducer.java)

消费者同步代码：-（POJO 类） [http://docs.oracle.com/javaee/1.4/tutorial/examples/jms/simple/src/SimpleSynchConsumer.java](http://docs.oracle.com/javaee/1.4/tutorial/examples/jms/simple/src/SimpleSynchConsumer.java)

[http://www.java2s.com/Code/Java/J2EE/ThisexampleisasimpleJMSclientapplication.htm](http://www.java2s.com/Code/Java/J2EE/ThisexampleisasimpleJMSclientapplication.htm)

使用异步代码：-（Spring by example - 从目的地读取消息直到程序不会停止。） [http://www.springbyexample.org/examples/simple-spring-jms-listener-config.html](http://www.springbyexample.org/examples/simple-spring-jms-listener-config.html)

虽然，它只是基本的，但此 MOM 中需要涵盖许多方面，例如什么是故障转移机制、什么是选择器、持久消息、消息确认模式等......

*   服务总线/ESB
*   端点和路由
*   阿帕奇骆驼
*   骡子

现在，假设您很久以前就采用了 SOA 和 MOM，并且您有一堆服务可以相互通信以完成企业范围的任务。想象一下，管理诸如应该从哪里重定向的多个目的地之类的逻辑将非常麻烦。有人称此应用程序逻辑。服务总线将用于减少应用程序逻辑并更多地关注业务逻辑（应用程序提供的功能）。

简单来说，将**端点**视为暴露在服务器上的 URL。您将使用此 url/端点来调用您的服务。

例如 [http://localhost:8888/Context/MyService?wsdl](http://localhost:8888/Context/MyService?wsdl)

在代码中： -

```
 String endpointAddress = "http://localhost:8080/jaxws/services/hello_world?wsdl";

    // Add a port to the Service
    service.addPort(PORT_NAME, SOAPBinding.SOAP11HTTP_BINDING, endpointAddress);

    HelloWorld hw = service.getPort(HelloWorld.class);
    System.out.println(hw.sayHi("World")); 
```

**路由** 当服务总线接收到特定消息时，它将通过任何服务/代理目的地（例如队列/主题）来路由它。这条路径称为路由。

例如，您的股票申请得到分析师的一些输入，它将通过应用程序/Web 组件进行处理，然后将结果发布给所有感兴趣/注册的成员以进行特定的股票更新。

**Apache Camel and Muel** [http://camel.apache.org/how-does-camel-compare-to-mule.html](http://camel.apache.org/how-does-camel-compare-to-mule.html) 为企业集成提供了解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-09T16:08:07.517

[企业集成模式](http://www.enterpriseintegrationpatterns.com/)可以帮助您了解一切如何组合在一起。

[更新：]您对另一个答案的后续问题使我意识到您对特定产品感到困惑。这部分是因为实践中的软件倾向于映射到多个概念，部分是因为不同的公司争辩说他们提供“一切”，而实际上他们并没有。

ESB 是工具包/库，可让您将所有内容连接在一起。它们既不是服务本身，也不是消息传递实现，而是填补中间奇怪的小空白的粘性物质。如果您从头开始编写所有内容，您甚至可能不需要，因为他们最擅长的是修复一大堆不同技术之间的不匹配，如果您从头开始，您可以避免这种混乱。

服务就是服务。在实现一个 EJB 时，您可能会使用一些 EJB（我只提到这一点是因为出于某种原因您将它们包含在您的问题中）。

消息中间件是从 A 到 B 获取消息的软件。它非常有用，但也很复杂，每个人和他们的兄弟都发明了自己的。所以你需要一些抽象来避免锁定。那可以是 ESB，或者，如果您是全 Java，那么它可以是 JMS。但是，即使您完全是使用 JMS 的 Java，您可能仍然希望使用 ESB，因为它们是您仍然需要编写的所有 Java 代码位的库（路由逻辑的随机位、消息重新格式化等）。

希望有帮助。我最初的答案更多是关于您使用这些工具构建的抽象模式 - 当您将事物连接在一起时，同样的问题会一次又一次地出现。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-17T09:31:06.393

Endpoints & Routes：信息的来源和目的地。消息队列是一种端点。另一种类型是消息主题。

端点是“事物的逻辑名称”，例如 PRICE.MSFT，发布者或消费者应用程序使用它来获取或发送到事物。主题将信息传递给每个订阅的人（一对一或一对多），队列将消息传递给第一个获得它的人（通常是一对一）。忘记队列，一切都可以用主题来完成，主题有几个优点。

面向消息的中间件 (MOM)：在主题或队列之间传递信息的软件基础设施。它是“面向消息”而不是像 TCP 那样“面向数据包”。因此，每个信息块都以一个（希望是自描述的）消息的形式传递。然后，您的 MOM 的实现为您提供了一个 API，您可以在其中执行 msg.get("bid") 之类的操作

JMS 和 AMQP 是 MOM 规范的示例。MOM 实现是实现这些规范的真正产品：TIBCO EMS、Websphere MQ、MSMQ、Solace 等等

Apache Camel - 关于如何在这个 MOM 世界中配置工作流的非常有趣的方法。而是一个更高级的概念。

面向服务的体系结构 (SOA)、服务总线/ESB 只是过去称为 EAI（企业应用程序集成）的新流行语。它们是关于如何使用“妈妈”的建议以及支付高价顾问的一种方式。“ESB”添加到 MOM 的想法是将您的发布者视为提供服务的“服务”。换句话说：不要过多考虑消费者现在想要什么。未来可能有 5 个消费者，发布者应该提供服务，而不是“创建消费者 A 想要的信息”。（一旦您的架构发展到 5 个以上的应用程序，它就会变得更加清晰）。此外，您应该有一些通用的对象模型，也许在 XML 中以使应用程序之间的事情变得简单。

Mule - ESB 的一种形式，但它并不完全是主流。在 5 年内，大多数中间件操作可能已经完全转移到 AMQP 或其他东西上。

EJB：Sun 关于在容器中运行的复杂 Java 类的想法。旨在使应用程序开发更容易。但在许多情况下，它使事情变得更加复杂。更好的选择是“Spring”——但 EJB 是关于其他东西的（不仅仅是 MOM）。它更多地是关于如何开发更大的应用程序（参见 IoC 模式）。

如果您正在寻找从哪里开始：我建议您学习 JMS（所有其他 MOM 都类似，JMS 是 EJB/Mule 的基础，...），除非您有超高性能要求，否则将消息视为包含 XML 的 TextMessage。大多数工具都在该区域可用。或者更简单但不太复杂的 MapMessage 键/值对。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T14:10:23.840

您将许多不同的概念和技术与不同的抽象级别混合在一起。但是您的所有概念都与（企业）应用程序集成有关。我将尝试评论您的定义：

*   面向服务的体系结构 (SOA)
    SOA 提供了一组原则和方法来将现有应用程序集成为松散耦合的单元。来自企业集成模式（见下文）：“ *SOA 模糊了集成和分布式应用程序之间的界限*”。
*   服务总线/ESB
    ESB 是 SOA 的一个主要概念，用于减少 SOA 中应用程序之间的依赖关系。每个应用程序都连接到 ESB，而不是应用程序之间的大量依赖关系。
*   面向消息的中间件 (MOM)
    MOM 是用于在分布式系统之间发送和接收消息的基础设施。这用于集成应用程序。在 SOA 炒作出现之前，MOM 是一把金锤。由于两者都很有用，大型集成套件同时提供 ESB 和 MOM（或在其 ESB 中使用 MOM）。
*   消息队列
    消息队列只是 MOM 体系结构中的一个技术细节方面。当消息发送/接收解耦时，消息被存储在队列中，直到接收者准备好。
*   Apache Camel
    当《[企业集成模式：设计、构建和部署消息解决方案](https://rads.stackoverflow.com/amzn/click/com/0321200683)》一书投放市场时，已经创建了一些软件解决方案，为本书中的模式提供了实现。阿帕奇骆驼就是其中之一。Camel 也是 Apache ServiceMix 的一部分，它也是一个开源 ESB。FuseSource 和 Talend 正在将 Apache ServiceMix、Apache Camel 和 Apache Active MQ (MOM) 打包成具有商业支持的捆绑包。
*   Mule
    Mule 也是一个开源 ESB 和集成平台。
*   来自 Wikipedia的EJB ： *Enterprise JavaBeans (EJB) 是一种托管的服务器端组件架构，用于模块化构建企业应用程序。*这意味着 EJB 是应用程序中的一个组件，主要与集成应用程序无关。
*   端点和路由
    当您使用 Apache Camel 时，您正在设计端点之间的路由，请参阅[教程](http://camel.apache.org/getting-started.html)。简而言之，消息通过端点进入/离开您的系统，并在路由定义的流程中进行处理。
*   JMS
    JMS 或 Java 消息服务是具有标准化 Java API 的面向消息的中间件 (MOM)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-09T19:00:15.920

考虑到您的所有要求并将它们打包到查询中，我遇到了一个*很好*的案例研究，应该可以满足您的需求：

*   [面向服务的架构：集成蓝图](https://rads.stackoverflow.com/amzn/click/com/184968104X)

我继续使用亚马逊的“在这本书中搜索”功能对这本书进行全文搜索。它涵盖了您讨论过的所有集成案例，看起来很全面，并引导您完成整个设计和实现过程。

我很尴尬地说我自己还没有通读过这篇文章*，*但我强烈建议在投资副本之前使用与我相同的工具来查看它是否符合您的需求。它似乎比简单地将大量不完整的文档强加给您或将内容汇总到此处的答案中更彻底、更完整和更有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-05T06:32:13.340

**企业应用程序集成 (EAI)**是将业务应用程序与异构系统连接起来的关键。多年来，集成解决方案的架构师以各种方式发明了他们自己的模式混合。但是这些架构中的大多数都有相似之处，在架构集成模式中启动了一套被广泛接受的标准。这些标准中的大多数都在企业集成模式目录中进行了描述，该目录位于：[http](http://www.eaipatterns.com/toc.html) ://www.eaipatterns.com/toc.html 。

WSO2 [ESB](http://wso2.com/products/enterprise-service-bus/)

WSO2 企业服务总线 (ESB) 4.7.0 文档！WSO2 ESB 是一个快速、轻量级、100% 开源且用户友好的 ESB，在 Apache 软件许可证 v2.0 下分发。WSO2 ESB 允许系统管理员和开发人员方便地配置消息路由、中介、转换、日志记录、任务调度、故障转移、负载平衡等。它支持最常用的企业集成模式 (EIP)，并支持传输交换、事件、基于规则的中介和基于优先级的中介，以满足高级集成需求。ESB 运行时设计为基于 Apache Synapse 中介引擎的完全异步、非阻塞和流式传输。

# mysql - WHERE 子句中的一些错误

> ID：10055295
> 
> 赞同：1
> 
> 时间：2012-04-07T14:29:47.510
> 
> 标签：mysql, sql, wordpress, phpmyadmin, mysql-error-1054

现在我在 PhpMyAdmin 中尝试这个查询来更新 wp_postmeta 的值形式 wp_posts：

```
UPDATE wp_postmeta
SET meta_value = (SELECT DISTINCT id FROM wp_posts) 
WHERE EXISTS (select 1 
              from wp_posts 
              join articles on wp_posts.post_name=articles.image)
    AND (wp_posts.post_type='attachment') 
    AND (wp_postmeta.meta_key='_thumbnail_id' ) 
```

但给了我这个错误：#1054 - 'where 子句'中的未知列'wp_posts.post_type'！

我试图改变它而没有任何好处，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:38:11.113

```
AND (wp_posts.post_type='attachment') 
```

我认为这里真正的问题是，您引用 wp_posts 的唯一位置是在您的 EXISTS 和 SET 子查询中。WHERE 子句的那部分（上面引用）超出了您的子查询的范围，并且不知道它。

除非您打算让您的 EXISTS 子查询看起来像这样：

```
(select 1 
 from wp_posts 
 join articles on wp_posts.post_name=articles.image
 WHERE wp_posts.post_type='attachment') 
```

在这种情况下， wp_posts 在同一组括号中引用并且在语法上是正确的。因为这可能不会给你你所追求的，试试这个：

```
UPDATE wp_postmeta
INNER JOIN wp_posts ON wp_posts.id = wp_postmeta.post_id
SET meta_value = (SELECT DISTINCT id FROM wp_posts WHERE [some condition]) 
WHERE EXISTS (select 1 
          from wp_posts 
          join articles on wp_posts.post_name=articles.image)
    AND (wp_posts.post_type='attachment') 
    AND (wp_postmeta.meta_key='_thumbnail_id' ) 
```

注意#1：我假设您的 wp_postmeta 表具有对应于 wp_posts 上的 id 的 post_id 字段。

注意#2：正如 OMG Ponies 所说...

```
SET meta_value = (SELECT DISTINCT id FROM wp_posts) 
```

此行很可能会在返回多个值时抛出错误，而这些值只需要 1。请注意，我在上面添加了“WHERE [某些条件]”。您需要在此处添加自己的 WHERE 子句。它应该是将子查询结果限制为只有一个结果的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T14:33:30.433

您应该将右括号移入：

```
(SELECT DISTINCT id FROM wp_posts) 
```

到声明的结尾。

# bash - 如何从单个控制台在 20 多个站点上运行测试？

> ID：10055296
> 
> 赞同：2
> 
> 时间：2012-04-07T14:30:12.447
> 
> 标签：bash, expect

我想在几十个嵌入式 Linux 单元上运行一个测试脚本；在制造过程中，认证凭证都是一样的。

测试大约需要一个小时，但我希望每个单元连续循环（例如在周末）并报告测试的当前迭代（基于每个单元）。

我在想 expect 可能是要走的路（它肯定会有助于 ssh 登录），但是在线文档......呃......对于似乎是一个简单的练习来说有点过于分散了。

我一直在尝试确定如何`spawn`并行进行嵌入式测试。在 BASH 中，我会使用`&`运算符将​​进程置于后台，但随后输入身份验证是一个挑战。

我应该使用期望还是坚持使用 BASH 脚本？

* * *

我做了什么：

我使用`expect`脚本在 DUT 上放置了一个 SSH 身份验证文件。被测设备只有一个 RAM 文件系统可以使用，所以在运行其余 bash 脚本之前。然后，一个简单的 BASH for 循环在 for 循环中发出一个 ssh 命令来运行测试并将会话置于后台线程上。常见问题：

```
for i in <IP devices to test> ;
    do
        ssh user@$i "echo - \"IP Address: $i :\" ; test-script" &
    done 
```

瞧！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:36:24.123

设置 ssh 公钥认证（例如：[http](http://www.petefreitag.com/item/532.cfm) ://www.petefreitag.com/item/532.cfm ），公钥密码为空bash 脚本在没有用户干预的情况下执行它们

# css - CSS中是否可以使用替代嵌套样式？

> ID：10055299
> 
> 赞同：12
> 
> 时间：2012-04-07T14:30:29.157
> 
> 标签：css

我正在做一个小实验，尝试为嵌套的 div 替换背景颜色。

这就是我打算实现的（没有内联样式）：

```
<div style="background: #fff;">
    <div style="background: #000;">
        <div style="background: #fff;">
            <div style="background: #000;">
                and so on...
            </div>
        </div>
    </div>
</div> 
```

我觉得我一定错过了一些明显的东西！我试过`div:nth-of-type(2n)`了，但这似乎只适用于一个级别。

这是针对生成 div 的实验，因此解决方案需要是无止境的（不是像 div div div div = white 那样的东西）。我知道使用 JavaScript 很容易，只需**寻找一个纯 CSS 解决方案**。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T15:10:41.497

正如 Lister 先生所指出的，nth-of-type 在一个级别（所选 div 的父级）上工作。

据我所知，在查看了[W3C CSS3 选择器](http://www.w3.org/TR/css3-selectors/#selectors)之后，似乎没有任何用于遍历嵌套的 css 选择器（> 选择器除外，它只查看父级的直接子级）。

我希望你被证明是错误的，因为这可能非常有用。

所以唯一的（css）解决方案就是你已经说过的那个：`div > div > div {background: white; }` 你不能在生成div的同时生成这个吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T15:30:14.140

正如其他人所说，这在纯 CSS 中是不可能的。但是使用 js 是很有可能的，也相当容易。

为方便起见，我在 jQuery 中实现了这一点，但您可以使用纯 JS 来实现。

[http://jsfiddle.net/sg3s/Suf3p/](http://jsfiddle.net/sg3s/Suf3p/)

我基本上制作了一个小型 jQuery 插件，它使用主颜色为您应用它的选择器着色，并使用子选择让匹配的子选择用次要颜色着色，依此类推，直到没有匹配子选择的子选择留下。

```
jQuery(function($) {
    $.fn.alternateNestedBgColor = function(subselect, colors) {
        // While not a great optimization, length of the colors array always stays the same
        var l = colors.length;

        // Itterate over all element in possible array
        // jQuery best practice to handle initializing multiple elements at once
        return this.each(function() {
            var $sub = $(this), i = 0; 

            // Executes code, at least once
            do {

                // Set bg color for current $sub element
                $sub.css('backgroundColor', colors[i++ % l]);
                // Set $sub to direct children matching given selector
                $sub = $sub.children(subselect);

            // Will repeat the do section if the condition returns true
            } while ($sub.length > 0);
        });
    };

    // target first div in the body
    // first argument = child selector
    // second argument = array list of colors
    $('body>div').alternateNestedBgColor('div', ['red', 'green', 'blue', 'purple', 'grey']);
}); 
```

**更新**根据要求，更新详细说明如何使用`apply`和`modulo`使用。

自从我最近发布此消息以来，已经快 2 年了。在工作时，我当时提出的解决方案有点冗长和混乱，例如，我从来不需要`apply`. 我对范围更熟悉了，所以我修改了这个函数，让它变得更简单。

唯一`apply`有用的情况是当您需要将值传递给`this`函数范围内的变量时。除非使用类，否则在很多情况下您都不需要`apply`or `call`。如果您想阅读它，我想向您推荐[这个答案，它在 classes 的上下文中解释它](https://stackoverflow.com/questions/8659390/context-to-use-call-and-apply-in-javascript)。[MDN 链接](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply)也是一个很好的资源（对于这个和其他 javascript 结构/概念）。

至于`modulo`，这是基本的数学，[这个问题很好地解释了操作](https://stackoverflow.com/questions/2664301/how-does-modulus-divison-work)。简而言之，它会在将一个数字除以另一个数字后为您提供完整的整数余数。所以`33 % 8 = 1`你可以像`33-parseInt(33/8)*8`在 js 中那样写，虽然那会非常低效。运算的结果将始终为 0（当数字完全相除时）到第二个参数减去 1（在我的示例中为 7）。

```
0 % 3 = 0 // technically doesn't exist (as you can't divide 0 with anything) but 0 for practicality in all programming languages afaik(?)
1 % 3 = 1
2 % 3 = 2
3 % 3 = 0
4 % 3 = 1
5 % 3 = 2
6 % 3 = 0 etc... 
```

这是对您的 CPU 而言本质上很简单的操作之一，事实上，如果没有它能够做到这一点，我们就没有计算机。

在 javascript 修订版中，我将给定数组中的颜色选择编写为`colors[i++ % l]`.

在写作中，这将给我剩余的`i / l`整数并使用该整数作为数组的索引，该`colors`数组返回一种颜色以供使用。

仅在返回用于模数的值后才会加 1，如果我写了，这种行为将被逆转，`++`但这对我们的目的不起作用。`i``++i`

供参考[的是 MDN 关于 do...while 的文章](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/do...while)。

我希望能澄清一些事情！:)

# javascript - Chrome 吃掉的用户脚本元数据

> ID：10055305
> 
> 赞同：0
> 
> 时间：2012-04-07T14:30:59.067
> 
> 标签：javascript, userscripts

Chrome 似乎正在吃掉我的用户脚本元数据：

```
 // ==用户脚本==
 // @name 标记离题按钮
 // @版本 1.0
 // @description 投票到离题按钮
 // @author Manish Goregaokar (http://stackapps.com/users/10098/manishearth)
 // @license GNU GPL v3 (http://gnu.org/copyleft/gpl.html)
 // @include http://meta.stackexchange.com/questions/*
 // ==/用户脚本==

函数 with_jquery(f) {
     var script = document.createElement("script");
     script.type = "文本/javascript";
     script.textContent = "(" + f.toString() + ")(jQuery)";
     document.body.appendChild(脚本);
};

//（脚本的其余部分可根据要求提供）

```

该脚本有效，但元数据无效（它尝试在每个站点上运行，显示文件名而不是“标记 Offtopic 按钮”等）

我是用户脚本的新手，所以我不知道我做错了什么。毫无疑问，有些愚蠢。

附加信息：最初，脚本有一个不兼容的字符集（不知道为什么）。我使用 Dreamweaver 的 Modify>Page properties 将其更改为 UTF-8，并且脚本正常工作（使用元数据）。后来它破坏了（不记得何时）元数据，但我认为这是一些错误的空间。现在我找不到问题所在。上述代码本身（当复制粘贴到记事本、另存为`abc.user.js`并拖放到 Chrome 时）会丢失其元数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:50:14.927

毫无疑问，文件前面隐藏着一个 UTF-8 BOM。前几天那个问题困扰着我。

（为什么 UTF-8 BOM 甚至存在当然是一个很好的问题，但为什么编辑器甚至使用它们确实令人困惑。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:02:18.950

将编码设置为“Unicode (UTF-8)”的脚本保存（至少在使用 BBEdit 的 Mac 上）会触发 OP 的问题。

将脚本另存为“Western (ISO Latin 1)”可以修复它。

（为了完整起见：Google Chrome 19.0.1084.56，尽管我认为这无关紧要。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T15:15:14.177

修复。可能是编码变化的产物——一些隐藏的字符。

我只将代码复制到一个新文件中（以前我一直在复制整个 shebang），从工作脚本中复制标题，并修改它们。有用。

更新：经过一番调查，编码更改设法混淆了第一个字符。它没有被 JS 解析，所以脚本仍然有效，但 Chrome/GM 不喜欢它。

FWIW：

```
// ==用户脚本==
 // @name 标记离题按钮
 // @版本 1.0
 // @author Manish Goregaokar (http://stackapps.com/users/10098/manishearth)
 // @description 向 MSO 添加一个自导航“标记离题”按钮
 // @license GNU GPL v3 (http://www.gnu.org/copyleft/gpl.html)
 // @include http://meta.stackexchange.com/questions/*

 // ==/用户脚本==

```

# android - 如何获取光标中的所有值

> ID：10055307
> 
> 赞同：0
> 
> 时间：2012-04-07T14:31:09.707
> 
> 标签：android, cursor

我在扩展 BaseAdapter 的类中使用了 Cursor，

```
class NewDefinedAdapter extends BaseAdapter {

    private Cursor cursorTitle;
    private TextView title;
    private LayoutInflater mInflater;
    private LinearLayout layout;

    public NewDefinedAdapter(Context text, Cursor cursor) {
        cursorTitle = cursor;
        mInflater = LayoutInflater.from(text);
    }

    public int getCount() {
        return cursorTitle.getCount();
    }

    public Object getItem(int arg0) {
        return arg0;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        layout = (LinearLayout) mInflater.inflate(R.layout.title_list, null);
        title = (TextView) layout.findViewById(R.id.title);
        title.setText(cursorTitle.getString(0));
        return layout;
    }
} 
```

我这样称呼这个类：

```
cursor.moveToFirst();
view.setAdapter(new NewDefinedAdapter(this, cursor)); 
```

cursor.getCount() = 10，但最终，我得到了 10 个相同的结果。添加 cursor.MoveToNext() 后，程序运行异常：

```
layout = (LinearLayout) mInflater.inflate(R.layout.title_list, null);
title = (TextView) layout.findViewById(R.id.title);
title.setText(cursorTitle.getString(0));
cursorTitle.moveToNext();
return layout; 
```

异常信息：

```
04-07 14:27:28.565: D/AndroidRuntime(26155): Shutting down VM
04-07 14:27:28.565: W/dalvikvm(26155): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-07 14:27:28.575: E/AndroidRuntime(26155): FATAL EXCEPTION: main
04-07 14:27:28.575: E/AndroidRuntime(26155): android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 10
04-07 14:27:28.575: E/AndroidRuntime(26155):    at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580) 
```

那么，我应该在光标中获取所有值，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:36:58.143

使用`moveToPosition()`：

```
//...
layout = (LinearLayout) mInflater.inflate(R.layout.title_list, null);
title = (TextView) layout.findViewById(R.id.title);
cursorTitle.moveToPosition(position);
title.setText(cursorTitle.getString(0));
//... 
```

# ios - 如何从 locationManager 获取 viewDidLoad 的坐标？

> ID：10055313
> 
> 赞同：0
> 
> 时间：2012-04-07T14:32:42.280
> 
> 标签：ios, iphone, cllocationmanager

我的问题是：如何获取 locationManager 坐标到我的 viewDidLoad 方法，以使用我之前检查的位置加载我的地​​图视图？？？

我的 locationManager 看起来像这样（UIlabel 的字符串）：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation { 
    if (wasFound) return;
    wasFound = YES;

CLLocationCoordinate2D loc = [newLocation coordinate];

latitude.text = [NSString stringWithFormat: @"%f", loc.latitude];
longitude.text  = [NSString stringWithFormat: @"%f", loc.longitude]; 
```

}

我的 viewDidLoad 是这样的：

```
 CLLocationCoordinate2D theCoordinate1;
theCoordinate1.latitude = 37.786996;
theCoordinate1.longitude = -122.419281; 
```

所以我想将我的真实坐标插入经纬度的地方！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:38:14.457

为您的方法所在`CLLocationCoordinate2D loc`的任何对象创建一个属性。如果它与代码相同，则直接使用它。如果它在其他类中，请在视图控制器中引用该类并以这种方式获取属性。`didUpdateToLocation:``viewDidLoad`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:07:29.200

创建一个`CLLocationCoordinate2D`属性并为其赋值。

# c++ - Exception Handling - throwing an exception without any handlers

> ID：10055317
> 
> 赞同：0
> 
> 时间：2012-04-07T14:33:01.233
> 
> 标签：c++

```
void myterminate () 
{
   cout << "terminate handler called";
}

int main (void) 
{
   set_terminate (myterminate);

   throw;  // throwing an exception. So, terminate handler should be invoked 
           // as no one is handling this exception.    
   getch();
   return 0;
} 
```

> But After executing this code, the output is:
> 
> > terminate handler called + "Debug Error!" dialog box appears.
> 
> I am not sure why it is coming like this !!!! Please help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T14:43:41.520

Based on the MSDN documentation for [set_terminate](http://msdn.microsoft.com/en-us/library/aa272914%28v=vs.60%29.aspx) the new handler function must call `exit()` or `abort()` will be called:

> The set_terminate function installs term_func as the function called by terminate. set_terminate is used with C++ exception handling and may be called at any point in your program before the exception is thrown. terminate calls abort by default. You can change this default by writing your own termination function and calling set_terminate with the name of your function as its argument. terminate calls the last function given as an argument to set_terminate. After performing any desired cleanup tasks, term_func should exit the program. If it does not exit (if it returns to its caller), abort is called.

For example:

```
void myterminate () 
{
   cout << "terminate handler called";
   exit(1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T14:52:58.253

According to the requirments of the standard, a function used as a `terminate_handler` must meet the following requirement (ISO/IEC 14882:2011 18.8.3.1):

> *Required behavior*: A `terminate_handler` shall terminate execution of the program without returning to the caller.

As your function doesn't meet this requirement you program has *undefined behaviour*. In order to see your custom diagnostic you should output a newline to `std::cout` (as this can be required on many platforms) and then terminate the program in some way, such as calling `std::abort`.

`std::abort` is used to signal an abnormal termination of the program so you can expect extra diagnostics to be reported to the user such as via the dialog box that you are seeing.

Note that using `std::exit` from a terminate handler is potentially dangerous as `std::terminate` might be called in response to an exceptional condition occurring in a function registered with `std::atexit` or `std:: at_quick_exit`. This would lead to a second attempt to call `std::exit`.

In summary, if you don't want an "abnormal" termination, you almost always need to catch exceptions that you throw.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T14:43:56.810

You have to exit program in your terminate handler. Add the following line to the handler and it will work:

```
exit(-1); 
```

# c# - 使用 ASP.NET 通过 SSH 自动化 Unix 服务器

> ID：10055319
> 
> 赞同：2
> 
> 时间：2012-04-07T14:33:24.913
> 
> 标签：c#, asp.net, automation

我通过 ssh 访问我的 Unix 服务器，并且总是执行相同的命令。这是命令列表（首先我登录到服务器）：

1.  `cd /etc/openvpn`
2.  `vi log.log`
3.  `/huaze`（我正在使用vi的搜索功能）
4.  如果我找到了字符串/单词，我会继续执行第 5 步直到结束，（如果我没有找到字符串，我就退出）
5.  `:q`（退出 vi）
6.  `service openvpn stop`
7.  `service openvpn start`
8.  注销

如您所见，我想利用自动化的力量，只需单击一下按钮即可完成；不幸的是，这是具有挑战性的，因为它是 ASP.NET，而 C# 将访问 Unix ssh 协议。那么，我怎样才能以最直接的方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:48:28.657

我自己没有尝试过，但似乎[SSH .NET](http://sshnet.codeplex.com)库应该为您提供 SSH 到任何主机、执行命令和读取结果所需的工具。主机是否是 Linux 无关紧要。

# php - 从 PHP 站点上的 mySQL 查询更新数据库中的值的问题

> ID：10055321
> 
> 赞同：-1
> 
> 时间：2012-04-07T14:33:29.950
> 
> 标签：php, mysql, web, phpmyadmin

一直在修改我的网站，它是一个座位预订网站。由于明显的原因，仍然处于 alpha 测试中，所以还没有向公众展示。

但是，我在更新数据库中的值时遇到了一些问题。

我将发布代码然后解释问题..

```
 else {

   $seatID = $_POST['form_submitted'];

$query1 = "SELECT seatTaken FROM SEATS WHERE seatNo = '$seatID'";
            $result = mysql_query($query1);  
            while($row = mysql_fetch_array($result))
            {
               $taken = $row['seatTaken'];  
            }

$query2 = "SELECT passNo FROM PASSENGER WHERE username = '$loggedinuser'";
            $result = mysql_query($query2);  
            while($row = mysql_fetch_array($result))
            {
               $passno = $row['passNo'];  
            }

$query3 = "SELECT groupID FROM PASSENGER WHERE username = '$loggedinuser'";
            $result = mysql_query($query3);  
            while($row = mysql_fetch_array($result))
            {
               $groupno = $row['groupID'];  
            }

$query4 = "SELECT flightNo FROM PASSENGER WHERE username = '$loggedinuser'";
            $result = mysql_query($query3);  
            while($row = mysql_fetch_array($result))
            {
               $flightno = $row['flightNo'];  
            }

  // if ($taken = 0) {

 $update = mysql_query("UPDATE PASSENGER SET seatNo = $seatID WHERE username = '$loggedinuser'");
 $update2 = mysql_query("UPDATE SEATS SET seatTaken = 1, passNo = '$passNo', groupID = '$groupid' WHERE seatNo = '$seatID'");
 // AND flightNo = '$flightno'"
   echo '<meta http-equiv="refresh" content="5;url=http://www.mywebsite.com/">';
       echo mysql_error();

  //}

 }

 ?> 
```

现在用户将在以前的表单中选择他们的座位，因此：

```
 $seatID = $_POST['form_submitted']; 
```

但是，在我的查询的底部，运行此 PHP 代码时数据库中实际更改的唯一值是“seatTaken”的布尔值，因为它确实从 0（未占用）更改为 1（已占用）。

我的数据库中的字段 passNo 和 groupID 不更新这些查询中引用的此处：-

```
 $update = mysql_query("UPDATE PASSENGER SET seatNo = $seatID WHERE username =     '$loggedinuser'");
 $update2 = mysql_query("UPDATE SEATS SET seatTaken = 1, passNo = '$passNo', groupID = '$groupid' WHERE seatNo = '$seatID'"); 
```

有人能帮忙吗？非常感谢！

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:45:31.950

注意你的变量命名和字符串引用

当您在 mysql 中查找值时，它们通常需要是字符串文字（添加引号）。你的另一个问题是你的变量名：

```
$update = mysql_query("UPDATE PASSENGER SET seatNo = '$seatID' WHERE username = '$loggedinuser'");
$update2 = mysql_query("UPDATE SEATS SET seatTaken = 1, passNo = '$passno', groupID = '$groupno' WHERE seatNo = '$seatID'"); 
```

*   $passno 与 $passNo
*   $groupid 与 $groupno

您还应该确保正确转义来自用户[http://php.net/manual/en/function.mysql-real-escape-string.php的任何输入](http://php.net/manual/en/function.mysql-real-escape-string.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T14:41:32.943

在您的代码中看不到如何生成 $groupid、$passNo、$seatID 的值。更新时是否设置了这些变量？（只需回显 SQL 代码即可查看正在向您的数据库发送什么查询）

如果 groupid 是表单中字段的名称，也许您应该尝试从您的发布请求中获取变量，例如 $_POST['groupid']。

# e-commerce - 压力测试我们商店的结帐流程

> ID：10055329
> 
> 赞同：0
> 
> 时间：2012-04-07T14:34:24.810
> 
> 标签：e-commerce, stress-testing

我想在负载下模拟我们的整个结帐过程。这实质上涉及按顺序运行多个 POST，其中客户端为每个允许保留会话的序列存储一个唯一的 cookie。谁能推荐满足这些条件的软件或服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:58:49.247

[使用Apache JMeter](http://jmeter.apache.org/)可以非常轻松、有效和自由地完成这类事情。您可以使用 JMeter 的代理记录旅程，也可以手动添加请求。

要模拟 Cookie，请将[Cookie 管理器](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Cookie_Manager)添加到测试计划中。对于需要关联的任何其他令牌或会话 ID，您可以使用[正则表达式提取器](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:58:10.283

这种测试有很多选择。免费/开源工具将需要您做更多的工作，但在其他方面是免费的。像我们这样的工具 ( [Load Tester 5](http://www.webperformance.com/) ) 可以更快地完成工作，但软件是有成本的。如果您的组织在负载测试方面没有太多经验并且时间紧迫，您可能希望引入外部帮助来帮助您按时完成任务并了解流程（我们也提供服务！）。

# java - JTabbedPane：在选项卡中显示任务进度

> ID：10055336
> 
> 赞同：4
> 
> 时间：2012-04-07T14:35:24.730
> 
> 标签：java, swing, jtabbedpane, jprogressbar

我有一个执行搜索的简单 Swing Java 应用程序，结果显示在新选项卡中。在搜索运行时，我想在选项卡标题中显示进度图标或动画。我尝试添加一个 gif 图标，但它没有动画。这不起作用有什么原因吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-07T14:42:45.903

[Swing 关于进度条（并显示一般进度）的教程](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)是一个很好的起点。它向您展示了如何通过使用 a 对工作线程执行持久操作`SwingWorker`，并以一定的时间间隔更新您的 UI 以向用户显示持久操作的进度。还有另一个教程可用于获取有关[`SwingWorker`Swing 和并发的更多信息](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)

和往常一样，这个网站充满了例子。例如[，我以前的答案](https://stackoverflow.com/questions/8916721/java-swing-update-label/8917565#8917565)使用`SwingWorker`该类向用户显示进度

*编辑*

因为我错过了您问题的标签部分的*标题。*您可以创建一个“进度图标”并将其设置在选项卡上。然后`SwingWorker`可用于更新图标。

此类图标的一个示例是![示例进度图标](../Images/714896c428b7dde39e6d07991f20f428.png)，它基本上是您每次取得一些进展时旋转的图像。[选项卡式窗格教程](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)向您展示如何将图标添加到选项卡（甚至使用自定义组件）

*编辑2*

看起来我的 Mac 与 JDK1.7 结合使用比在其他系统上更容易显示动画 gif，我也创建了一个小型 SSCCE，与 Andrew 的非常相似，但带有一个看起来不像的旋转图标是由“痴呆的黑猩猩”创建的，我引用它。旋转图标代码来自[这个站点](http://tips4java.wordpress.com/2009/04/06/rotated-icon/)（我使用了精简版并添加了计时器）。唯一让我不太高兴的是我需要将选项卡式窗格传递给旋转图标才能触发。可能的解决方案是将计时器拉到`RotatingIcon`课堂外，但是嘿，它只是一个 SSCCE 。图片不包括在内，但通过 Google 找到。

```
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTabbedPane;
import javax.swing.Timer;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.geom.AffineTransform;

public class ProgressTabbedPane {

  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JFrame frame = new JFrame( "RotatingIcon" );
        JTabbedPane tabbedPane = new JTabbedPane(  );
        tabbedPane.addTab( "Searching", new RotatingIcon( new ImageIcon( "resources/images/progress-indeterminate.png" ), tabbedPane ),
                           new JLabel( new ImageIcon( "resources/images/rotatingIcon.gif" ) ) );
        frame.getContentPane().add( tabbedPane );
        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        frame.pack();
        frame.setVisible( true );
      }
    } );
  }

  private static class RotatingIcon implements Icon{
    private final Icon delegateIcon;
    private double angleInDegrees = 90;
    private final Timer rotatingTimer;
    private RotatingIcon( Icon icon, final JComponent component ) {
      delegateIcon = icon;
      rotatingTimer = new Timer( 100, new ActionListener() {
        @Override
        public void actionPerformed( ActionEvent e ) {
          angleInDegrees = angleInDegrees + 10;
          if ( angleInDegrees == 360 ){
            angleInDegrees = 0;
          }
          component.repaint();
        }
      } );
      rotatingTimer.setRepeats( false );
      rotatingTimer.start();
    }

    @Override
    public void paintIcon( Component c, Graphics g, int x, int y ) {
      rotatingTimer.stop();
      Graphics2D g2 = (Graphics2D )g.create();
      int cWidth = delegateIcon.getIconWidth() / 2;
      int cHeight = delegateIcon.getIconHeight() / 2;
      Rectangle r = new Rectangle(x, y, delegateIcon.getIconWidth(), delegateIcon.getIconHeight());
      g2.setClip(r);
      AffineTransform original = g2.getTransform();
      AffineTransform at = new AffineTransform();
      at.concatenate(original);
      at.rotate(Math.toRadians( angleInDegrees ), x + cWidth, y + cHeight);
      g2.setTransform(at);
      delegateIcon.paintIcon(c, g2, x, y);
      g2.setTransform(original);
      rotatingTimer.start();
    }

    @Override
    public int getIconWidth() {
      return delegateIcon.getIconWidth();
    }

    @Override
    public int getIconHeight() {
      return delegateIcon.getIconHeight();
    }
  } 
} 
```

截图供参考。遗憾的是，屏幕截图中的图标没有旋转。 ![SSCCE 截图](../Images/24014ef3057c687471b4fa56c8618fd0.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-07T15:20:57.383

![动画图像作为选项卡图标](../Images/477a8f765f3e378fa8fb176c9b325850.png)

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;

public class ImageOnTab {

    ImageOnTab() {

        final BufferedImage image = new BufferedImage(
            32,32,BufferedImage.TYPE_INT_RGB);
        final JTabbedPane pane = new JTabbedPane();
        ImageIcon icon = new ImageIcon(image);
        pane.addTab( "Progress", icon, new JTree() );

        ActionListener listener = new ActionListener() {

            int x = 0;
            int step = 1;

            public void actionPerformed(ActionEvent ae) {
                Graphics g = image.createGraphics();
                x+=step;
                if (step>0) {
                    if (x>32) {
                        step=-step;
                    }
                } else if (x<0) {
                    step=-step;
                }

                g.setColor(Color.ORANGE);
                g.fillRect(0,0,32,32);

                g.setColor(Color.RED);
                g.fillRect(0,0,x,32);

                g.dispose();

                pane.repaint();
            }
        };

        Timer timer = new Timer(100,listener);
        timer.start();

        JOptionPane.showMessageDialog(null, pane);
    }

    public static void main(String[] args) throws Exception {
        //Create the GUI on the event dispatching thread
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                new ImageOnTab();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-07T23:47:15.133

@安德鲁汤普森

```
It would be great if the J2SE supported animated GIFs 'out of the box' 
in more situations. I tried that animated GIF (nice image, BTW) as a 
tab icon, and no, it remains static. 
```

我不想阅读整个......，而是将你的代码和@trashgod's majesty 放在一起

1）使用`Htlm`（我不擅长纯HTML）

2)`GlassPane`使用`JLabel#(setOpaque(true))`

3）使用`JLayer`（`JXLayer`更好，因为Sn'Oracle删除重要方法==我的观点）

4）你必须[通过@aterai强制......为Swing JComponents](https://stackoverflow.com/a/9557695/714968)

5) [Rob 的动画图标](http://tips4java.wordpress.com/2009/06/21/animated-icon/)几次提到 Rob 支持`JTabbedPane`

代码

```
import java.awt.*;
import java.awt.event.*;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Random;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;
//https://stackoverflow.com/questions/3483485/java-jprogressbar-or-equivalent-in-a-jtabbedpane-tab-title/3484251#3484251
public class JTabbedTest {

    private JFrame f = new JFrame();
    private JTabbedPane jtp = new JTabbedPane();
    private URL url = null;

    public JTabbedTest() {
        try {
            url = new URL("http://pscode.org/media/starzoom-thumb.gif");
        } catch (MalformedURLException ex) {
            Logger.getLogger(JTabbedTest.class.getName()).log(Level.SEVERE, null, ex);
        }
        ImageIcon ii = new ImageIcon(url);

        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jtp.setPreferredSize(new Dimension(400, 200));
        createTab("Reds", Color.RED);
        createTab("Greens", Color.GREEN);
        createTab("Blues", Color.BLUE);
        f.add(jtp, BorderLayout.CENTER);

        jtp.setTitleAt(2, "<html><img src=" + ii + " width=20 height=20></img></html>");

        // change foreground Color for disabled tab        
        /*jtp.setTitleAt(2, "<html><font color=" + (jtp.isEnabledAt(2) ? "black" : "red") + ">"
                + jtp.getTitleAt(2) + "</font></html>");*/

        Rectangle tabBounds = jtp.getBoundsAt(0);
        Container glassPane = (Container) f.getRootPane().getGlassPane();
        glassPane.setVisible(true);
        glassPane.setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.weightx = 1.0;
        gbc.weighty = 1.0;
        gbc.fill = GridBagConstraints.NONE;
        gbc.insets = new Insets(tabBounds.y + 23, 0, 0, 5);
        gbc.anchor = GridBagConstraints.NORTHEAST;
        JButton button = new JButton("My Button Position", ii);
        button.setPreferredSize(new Dimension(button.getPreferredSize().width, (int) tabBounds.getHeight() - 2));
        glassPane.add(button, gbc);
        f.pack();
        f.setVisible(true);
    }

    private void createTab(String name, Color color) {
        ProgressIcon icon = new ProgressIcon(color);
        jtp.addTab(name, icon, new ColorPanel(jtp, icon));
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JTabbedTest jTabbedTest = new JTabbedTest();
            }
        });
    }

    private static class ColorPanel extends JPanel implements ActionListener {

        private static final Random rnd = new Random();
        private static final long serialVersionUID = 1L;
        private final Timer timer = new Timer(1000, this);
        private final JLabel label = new JLabel("Stackoverflow!");
        private final JTabbedPane parent;
        private final ProgressIcon icon;
        private final int mask;
        private int count;

        public ColorPanel(JTabbedPane parent, ProgressIcon icon) {
            super(true);
            this.parent = parent;
            this.icon = icon;
            this.mask = icon.color.getRGB();
            this.setBackground(icon.color);
            label.setForeground(icon.color);
            this.add(label);
            timer.start();
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            this.setBackground(new Color(rnd.nextInt() & mask));
            this.icon.update(count += rnd.nextInt(8));
            this.parent.repaint();
        }
    }

    private static class ProgressIcon implements Icon {

        private static final int H = 16;
        private static final int W = 3 * H;
        private Color color;
        private int w;

        public ProgressIcon(Color color) {
            this.color = color;
        }

        public void update(int i) {
            w = i % W;
        }

        @Override
        public void paintIcon(Component c, Graphics g, int x, int y) {
            g.setColor(color);
            g.fillRect(x, y, w, H);
        }

        @Override
        public int getIconWidth() {
            return W;
        }

        @Override
        public int getIconHeight() {
            return H;
        }
    }
} 
```

# bash - emacs shell 模式下的命令历史

> ID：10055338
> 
> 赞同：15
> 
> 时间：2012-04-07T14:36:02.133
> 
> 标签：bash, emacs

在 bash shell 中，我可以使用向上箭头键导航到先前输入的命令。但这在 emacs shell 模式下不起作用。有什么办法可以启用它吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-07T15:09:47.253

`M-p`（和`M-n`另一个方向）会成功的。

这是有关该主题[的 Emacs 手册的链接](http://www.gnu.org/software/emacs/manual/html_node/emacs/Shell-Ring.html#Shell-Ring)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-26T00:29:58.867

将此添加到您的`~/.emacs`：

```
(define-key comint-mode-map (kbd "<up>") 'comint-previous-input)
(define-key comint-mode-map (kbd "<down>") 'comint-next-input) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T20:35:22.267

`C-p`并在（香草）bash 中工作，以及其他一些 emacs 键`C-n`。`C-r`非常便利。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T21:50:27.517

在 Gnu Emacs 中，Shell 模式的菜单称为“In/Out”。（我认为它还涵盖了更通用的模式，称为“comint”。）

# java - 如何删除存储在 Java FileOutputStream 上的单个对象

> ID：10055339
> 
> 赞同：1
> 
> 时间：2012-04-07T14:36:03.903
> 
> 标签：java, java-io

我已经使用此代码将 Object 存储到文件中：

```
try{  
      FileOutputStream saveFile=new FileOutputStream("SaveObj.sav");

      ObjectOutputStream save = new ObjectOutputStream(saveFile);

      save.writeObject(x);

      save.close();
    }
    catch(Exception exc){
      exc.printStackTrace();
    }
  }
} 
```

如何删除单个对象？怎么清除文件？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:04:47.157

Ernest 是对的，因为从对象流中删除特定对象稍微复杂一些。他也是对的，当你想清空一个文件时，你可以简单地打开它进行写入并关闭它。但是，如果您想从文件系统中删除它，可以使用`File`对象来完成（不要忘记处理异常并正确返回值）。以下示例可能并不完美，但它应该为您提供有关如何使用纯 Java 实现目标的提示。希望这可以帮助...

```
 package test;

import java.io.EOFException;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.util.ArrayList;
import java.util.List;

public class Main {

  public static void main(String[] args) throws Exception {
    String filename = "object.serialized";
    {
      List objects = new ArrayList();
      objects.add("String1");
      objects.add("String2");
      objects.add("String3");
      writeObjectsToFile(filename, objects);
    }

    {
      List objects = readObjectsFromFile(filename);
      objects.remove(1);
      writeObjectsToFile(filename, objects);
    }

    {
      List objects = readObjectsFromFile(filename);
      for (Object object : objects) {
        System.out.println(object);
      }
    }

    emptyFile(filename);
    deleteFile(filename);
  }

  private static void emptyFile(String filename) throws IOException {
    OutputStream os = null;
    try {
      os = new FileOutputStream(filename);
    } finally {
      if (os != null) {
        os.close();
      }
    }
  }

  private static void deleteFile(String filename) {
    File f = new File(filename);
    if (f.delete()) {
      System.out.println(filename + " deleted sucessfully...");
    } else {
      System.out.println(filename + " deletion failed!");
    }
  }

  private static void writeObjectsToFile(String filename, List objects) throws IOException {
    OutputStream os = null;
    try {
      os = new FileOutputStream(filename);
      ObjectOutputStream oos = new ObjectOutputStream(os);
      for (Object object : objects) {
        oos.writeObject(object);
      }
      oos.flush();
    } finally {
      if (os != null) {
        os.close();
      }
    }
  }

  private static List readObjectsFromFile(String filename) throws IOException, ClassNotFoundException {
    List objects = new ArrayList();
    InputStream is = null;
    try {
      is = new FileInputStream(filename);
      ObjectInputStream ois = new ObjectInputStream(is);
      while (true) {
        try {
          Object object = ois.readObject();
          objects.add(object);
        } catch (EOFException ex) {
          break;
        }
      }
    } finally {
      if (is != null) {
        is.close();
      }
    }
    return objects;
  }

} 

```

输出：

```
 String1
String3
object.serialized deleted sucessfully... 

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T14:39:41.337

好吧，清空一个文件很容易——只需打开它进行写入，然后再次关闭它：

```
new FileOutputStream("SaveObj.sav").close(); 
```

那会清空它。但是，如果您试图从许多对象中删除一个对象，那就要复杂得多。您要么必须读入所有对象并只写出要保留的对象，要么必须保留每个对象开始的文件偏移量的索引（可能在单独的文件中）。点您要考虑改用对象数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-19T15:59:52.500

我知道这个主题已经很久了，但为了帮助未来的人，对我有用的是再次将对象写为空值：

```
public static void writeIncidentsObjectsInCache(Object object) throws IOException {
    writeObject(INCIDENTS_CACHE, object); }

public static Object readIncidentsObjectFromCache() throws IOException,
        ClassNotFoundException {
    return readObject(INCIDENTS_CACHE); }

public static void clearIncidents() throws IOException, ClassNotFoundException {
    writeIncidentsObjectsInCache(null); }

public static void writeObject(String key, Object object) throws IOException {
    FileOutputStream fos = TheAAApp.getApp().openFileOutput(key, Context.MODE_PRIVATE);
    ObjectOutputStream oos = new ObjectOutputStream(fos);
    oos.writeObject(object);
    oos.close();
    fos.close();
}

public static Object readObject(String key) throws IOException,
        ClassNotFoundException {
    FileInputStream fis = TheAAApp.getApp().openFileInput(key);
    ObjectInputStream ois = new ObjectInputStream(fis);
    Object object = ois.readObject();
    return object;
} 
```

# python - 在 sqlite3 引用（外键）中，通过连接其他两个表中的两列来获取表的列

> ID：10055342
> 
> 赞同：2
> 
> 时间：2012-04-07T14:36:28.653
> 
> 标签：python, sql, join, sqlite, foreign-keys

我在 python 中使用 sqlite3。我有两个表，每个表都有 id 列。表中的这些 id 列可以具有不同的值。我想通过组合前两个表的 id 列中的值来创建一个带有列 id 的新表，该表只能包含值。我能够使用任何一个表成功创建外键（链接），但不能同时使用两者。我还尝试从两个表创建连接视图，并尝试将第三个表与连接链接，但没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:43:33.940

您可以使用触发器在来自两个不同表的列的联合上创建等效的外键。您需要为受约束表上的插入和更新以及引用表上的更新和删除创建触发器。如果我没有遗漏任何东西，您总共需要六个触发器。

请参阅此链接，其中作者几乎告诉您如何做到这一点，因为它是在 sqlite 开始强制执行外键之前编写的：

[http://www.sqlite.org/cvstrac/wiki?p=ForeignKeyTriggers](http://www.sqlite.org/cvstrac/wiki?p=ForeignKeyTriggers)

例如，这将是受约束表的 INSERT 触发器，其中受约束表是`foo`，引用表是`bar1`和 bar2`：

```
pragma foreign_keys=on;

create table bar1 (id integer primary key);
create table bar2 (id integer primary key);

insert into bar1 values (1);
insert into bar1 values (2);
insert into bar2 values (2);
insert into bar2 values (3);

create table foo (id integer);

CREATE TRIGGER fk_insert_foo
BEFORE INSERT ON foo
    FOR EACH ROW 
    BEGIN
      SELECT RAISE(ROLLBACK, 'insert on table foo violates foo.id '
                             + 'constraint on union of bar1.id and bar2.id')
      WHERE NOT (EXISTS (SELECT * FROM bar1 WHERE bar1.id=NEW.id)
                 OR 
                 EXISTS (SELECT * FROM bar2 WHERE bar2.id=NEW.id));
    END;

insert into foo values (1);
insert into foo values (2);
insert into foo values (3);
select * from foo;
insert into foo values (4); # <<<<<< this fails 
```

# perl - 将 `use` 更改为 `require` 后，如何处理导入？

> ID：10055349
> 
> 赞同：2
> 
> 时间：2012-04-07T14:37:27.027
> 
> 标签：perl

基于[Test for exist of perl mod inside script](https://stackoverflow.com/questions/10015931/test-for-existence-of-perl-mod-inside-script)中提供的解决方案，我提出了以下测试：

```
my @mods = (qw(Cwd DBI Date::Calc Term::ReadLine File::Copy Digest::Perl::MD5
               LWP::Simple Switch POSIX Text::LevenshteinXS File::Spec
               File::Basename String::CRC32 MIME::Lite IO::Socket::INET));

foreach my $mod (@mods) {
    ( my $fn = "$mod.pm" ) =~ s|::|/|g;    # Foo::Bar::Baz => Foo/Bar/Baz.pm
    if ( eval { require $fn; 1; } ) {
        print "Module $mod loaded ok\n";
    } else {
        print "Could not load $mod. Error Message: $@\n";
    }
} 
```

当我最初有 时`use something`，有时我也有进口，我现在发现它不适用于`require`，即：

```
use Digest::Perl::MD5 'md5_hex'; 
```

测试后`@mods`，我想加载它们，所以：

```
require Cwd;
require DBI;
require Date::Calc;
require Term::ReadLine;
require File::Copy;
require Digest::Perl::MD5 'md5_hex';
require LWP::Simple;
require Switch;
require POSIX;
require Text::LevenshteinXS qw(distance);
require File::Spec;
require File::Basename;
require String::CRC32;
require MIME::Lite;
require IO::Socket::INET; 
```

但这会在运行时引发错误：

```
syntax error at ./mod.pl line 78, near "require Digest::Perl::MD5 'md5_hex'"
syntax error at ./mod.pl line 82, near "require Text::LevenshteinXS qw(distance)" 
```

我怎样才能做到这一点？

编辑：对于以后偶然发现此线程的其他人，这是工作代码：

```
use strict;

$| = 1;

################################################
# Help user if Perl mods are missing
################################################
my @mods = (qw(DBI Date::Calc Term::ReadLine File::Copy Digest::MD5 LWP::Simple Text::LevenshteinXS File::Spec String::CRC32 MIME::Lite IO::Socket::INET Getopt::Long));

foreach my $mod (@mods) {
    ( my $fn = "$mod.pm" ) =~ s|::|/|g;    # Foo::Bar::Baz => Foo/Bar/Baz.pm
    if ( eval { require $fn; 1; } ) {
        ##print "Module $mod loaded ok\n";
    } else {
        print "You are missing a required Perl Module: $mod\n";
        my $ok = &getYN( "Shall I attempt to install it for you?", "y" );
        if ( $ok =~ /[Yy]/ ) {
            require CPAN;
            CPAN::install($mod);
        } else {
            print "LogZilla requires $mod\n";
            exit;
        }
    }
}

use feature "switch";
use Cwd;
use File::Basename;
use POSIX;
require DBI;
require Date::Calc;
require Term::ReadLine;
require File::Copy;
require Digest::MD5->import("md5_hex");
require LWP::Simple;
require Text::LevenshteinXS->import("distance");
require File::Spec;
require String::CRC32;
require MIME::Lite;
require IO::Socket::INET;
require Getopt::Long;

my ($autoyes);

sub getYN {
    unless ( $autoyes =~ /[Yy]/ ) {
        my ( $prompt, $default ) = @_;
        my $defaultValue = $default ? "[$default]" : "";
        print "$prompt $defaultValue: ";
        chomp( my $input = <STDIN> );
        return $input ? $input : $default;
    } else {
        return "Y";
    }
}

sub prompt {
    my ( $prompt, $default ) = @_;
    my $defaultValue = $default ? "[$default]" : "";
    print "$prompt $defaultValue: ";
    chomp( my $input = <STDIN> );
    return $input ? $input : $default;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T14:59:23.957

您需要调用模块的导入方法，例如

```
Digest::Perl::MD5->import("md5_hex");
Text::LevenshteinXS->import("distance"); 
```

`use Module`完全等同于

```
 BEGIN { require Module; Module::->import( LIST ); } 
```

*   [要求](http://perldoc.perl.org/functions/require.html)
*   [采用](http://perldoc.perl.org/functions/use.html)

# php - 无法使用php插入动态cron

> ID：10055350
> 
> 赞同：0
> 
> 时间：2012-04-07T14:37:29.360
> 
> 标签：php, cron

我的 res_time.php 文件有一行

```
$r = $shell_exec("/var/www/html/new12345/cront1.sh $n"); 
```

`cront1.sh`在哪里

```
!/bin/bash
echo " 00 $1 * * * /var/www/html/new12345/shell_call.php >> /var/www/html/w.txt" | crontab - 
```

当我手动输入时，`./cront1.sh 3`我可以在 crontab 中看到一个条目

然而，在 php 中使用 bash 会产生一些问题..该行本身没有被调用..帮助！

引用的每个文件的权限已满

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:55:48.887

这不是真正正确的处理方式。通常，您希望尽可能少地涉及操作系统级别的 cron。大多数框架的处理方式是有一个单独的 cron 脚本，每隔几分钟左右调用一次，然后决定其他任务需要做什么，并执行它们。

因此，您将在 Crontab 中设置一个条目，例如：

```
*/3 * * * * /var/www/html/my_site/cron.php 
```

在基本层面上，您可以通过在当前时间戳上运行模运算来确定在 cron.php 中要做什么，例如

```
if (time() % (60*60)) {
    // runs every hour, on the hour
}

if (time() % ((60*60)/2)) {
    // runs at xx:00 and xx:30
}

if (time() % (60*5)) {
    // runs every five minutes
    // although it'll actually only run every 15 mins, because cron.php is called every 3 mins!
} 
```

# javascript - jQuery.BlackAndWhite.js 在移动设备上不稳定？

> ID：10055353
> 
> 赞同：1
> 
> 时间：2012-04-07T14:37:45.410
> 
> 标签：javascript, jquery, jquery-plugins

我最近一直在重新设计我的 WP 作品集网站，并且一直在玩一个简洁的小美学 jQuery 插件[BlackAndWhite](http://www.gianlucaguarini.com/canvas-experiments/jQuery.BlackAndWhite/demo.html)，它将我画廊视图中的所有图像变成黑白，并使用 HTML5 画布使它们在悬停时重新着色。

我注意到该插件的一个错误是，如果它在图像完成加载之前运行，它有时只会灰度图像的一半。因此，我一直在使用另一个小插件来仅在确定图像已完成加载后才运行脚本。见[waitforimages.js](https://github.com/alexanderdickson/waitForImages)

初始化脚本如下：

```
jQuery(document).ready(function(){
    jQuery('.bwWrapper').waitForImages(function(){  
        jQuery(this).BlackAndWhite({
            hoverEffect : true // default true
        });
    });
}); 
```

其中 bwWrapper 是每个 img 的包装器。

现在，这在我迄今为止测试过的大多数计算机和浏览器上都非常有效。一切都按应有的方式工作。然而，当我在我的 android 上打开该网站时，我注意到只有 50% 的图像重新着色。当我刷新页面时，再次只有 50% 是黑白的，尽管每次都是不同的。让网站完全响应移动设备仍然在我的待办事项清单上，但我注意到这个相当明显但难以解释的错误。

知道可能是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:23:36.410

您不需要预加载图像，因为插件已经完成了。尝试在 github [https://github.com/GianlucaGuarini/jQuery.BlackAndWhite](https://github.com/GianlucaGuarini/jQuery.BlackAndWhite)上下载脚本的最新版本，如果您仍然有问题，请给我发一封带有链接的私人邮件，以便我检查可能是什么问题。

# sql-server - STConvexHull() 来自多边形组的多边形

> ID：10055354
> 
> 赞同：0
> 
> 时间：2012-04-07T14:37:56.800
> 
> 标签：sql-server, tsql

是否可以从一组多边形创建一个 STConvexHull() 多边形。如何？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:05:06.047

在 SQL 2012 中，该`STConvexHull()`方法从任何几何集合创建多边形（共线点或共线线除外，它们返回一条线。）

如果您使用的是 .net 语言，您也可以通过编程语言执行此操作，并且它将允许使用该方法输出到支持几何的 SQL Server 的先前版本，因为它输出几何，但您不能使用直接在 SQL Server 2008 或 2008r2 中运行。

请参阅[http://msdn.microsoft.com/en-us/library/bb933878](http://msdn.microsoft.com/en-us/library/bb933878)。

# android - 如何在日期类型的android中保存sqlite中的记录？

> ID：10055362
> 
> 赞同：1
> 
> 时间：2012-04-07T14:39:28.610
> 
> 标签：android, sqlite

我是android开发的新手。我正在制作一个简单的费用管理程序，其中有 2 个按钮；一个保存收款人、日期和金额记录以及查看这些记录的其他按钮。这是我编写的主要代码的一部分：

```
public class database {
public static final String DBNAME = "dbexpense";
SQLiteDatabase db;
DBHandler handler;

public database(Context ctx) {
    handler = new DBHandler(ctx);
}

class DBHandler extends SQLiteOpenHelper {
    public DBHandler(Context ctx) {
        super(ctx, DBNAME, null, 1);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("Create table expenses(id integer primary key autoincrement,from text,dated date, amount number );");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("drop table if exists expenses");
        onCreate(db);
    }
}

public void open() {
    db = handler.getWritableDatabase();
}

public void close() {
    db.close();
}
public boolean saveRecord(String from, Date dated, Number amount)
{
    ContentValues cv=new ContentValues();
    cv.put("From", from);
    cv.put("Dated", dated);
    cv.put("Amount", amount);

    return db.insert("expenses", "", cv)>0;
    }

<EditText 
android:layout_width="match_parent" 
android:layout_height="wrap_content" 
android:id="@+id/editText2" 
android:inputType="date">
</EditText>
<EditText 
android:layout_width="match_parent" 
android:layout_height="wrap_content" 
android:id="@+id/editText3" 
android:inputType="number"></EditText> 
```

我的 xml 文件具有日期和数字的编辑文本字段。这显示了一个错误：ContentValues 类型中的 put(String, String) 方法不适用于参数 (String, Date) 并且 ContentValues 类型中的 put(String, String) 方法不适用于参数 (String,数字）。有没有其他的保存方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:44:53.720

在您尝试存储它们之前，将您的值转换为预期的格式。

例如 String.ValueOf(number) 将数字转换为字符串。

# c# - 缓存从 WebService MVC 返回的数据

> ID：10055363
> 
> 赞同：1
> 
> 时间：2012-04-07T14:39:30.313
> 
> 标签：c#, web-services, model-view-controller, caching

我正在从 Web 服务中提取数据，并且通常在我将其拉入之后，一旦数据不会改变。该数据将在不同的模型对象中引用。我想知道在 MVC 中缓存它的最佳方法是什么。我正在考虑模型类中的一个静态字典，它将使用这些数据，但多个线程可能正在读取和写入它。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T02:03:09.287

我认为你的想法非常好（这就是我迄今为止一直在做的事情）。
唯一的问题是您需要避免对字典的并发访问，因此只需将其设为私有并让访问器方法对读取和写入都使用锁（将 K 和 V 替换为您自己的类型）：

```
public class CacheClass {
    private static object DictLock = new Object();
    private static Dictionary<K, V> CachedData;

    public static V ReadDictionary(K key) {
         V temp;
         lock (DictLock) {
              temp = CachedData[key];
         }

         return temp;
    }
    public static void SetDictionaryValue(K key, V value) {
         lock (DictLock) {
             CachedData.Add(key, value);
         }
    }
} 
```

其他替代方法涉及使用[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)（.NET 4 或更高版本）。
这显然不涉及缓存老化。但在我看来，你似乎是在自己控制它。

# vb.net - Tab-Movable Tabcontrol - 获取选定选项卡的项目宽度

> ID：10055365
> 
> 赞同：0
> 
> 时间：2012-04-07T14:39:43.947
> 
> 标签：vb.net, vb.net-2010

我最近尝试制作一个能够将选项卡向左或向右移动的自定义选项卡控件......

但是有一个问题，我不知道如何获取选项卡的项目宽度......我得到什么 TabControl1 .SelectedTab.Bounds.Width 是标签页的宽度，而不是标签项的宽度...

我需要获取标签项的宽度才能知道当鼠标移动和保持...

例如，如果光标按住Tabpage1，并且它移动到Tabpage2，那么Tabpage1应该向右移动...

如果我可以得到标签项的宽度，那么我可以知道光标在哪个数学制表符...或者如果可以，我想直接获取光标上的制表符...

也许我的问题很奇怪，我的代码想法很愚蠢，愚蠢甚至疯狂，直到你无法理解这个问题......如果你有更好的代码想法，或者回答这个问题，那么请回复......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:02:33.920

使用[TabControl.GetTabRect()](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.gettabrect.aspx)获取选项卡矩形。传递您感兴趣的选项卡的索引。

# android - 禁用对话框和主要活动之间的淡入淡出

> ID：10055366
> 
> 赞同：3
> 
> 时间：2012-04-07T14:39:46.927
> 
> 标签：android, dialog

我创建了一个小应用程序，在它的清单中使用 'android:theme="@android:style/Theme.Dialog"'。这样，它将像对话框一样显示，因此背景将是半透明的并变暗。在活动的生命周期中，将显示另一个对话框。然而，在对话框被关闭后，背景会淡入一小段时间，然后再次淡出以匹配应用程序的主题。

我可以通过使用禁用此行为

```
getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND); 
```

但是使用它会导致对话框不会使活动变暗。

有没有办法实现所需的行为？

```
-Activity's background should be translucent and dimmed
-Dialog should dimm the activity's layout
-No fading when dialog is dismissed 
```

完整代码：

```
public class DialogDimActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void onClick(View v) {
        Dialog d = new AlertDialog.Builder(this)
        .setNegativeButton("Close", null)
        .create();
    //  d.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
        d.show();
    }
} 
```

# javascript - 如何使用 VB.NET 保护自定义 Web 服务？

> ID：10055371
> 
> 赞同：0
> 
> 时间：2012-04-07T14:40:36.713
> 
> 标签：javascript, asp.net, web-services, security, ws-security

我使用 Visual Studio 2010 在 VB 中构建了一个简单的 Web 服务。现在我想通过用户名和密码来保护这个 Web 服务。如果用户名和密码匹配，用户可以使用/查看内容。我的网络服务如下；

```
Imports System.Web
Imports System.Web.Services
Imports System.Web.Services.Protocols
Imports System.Web.Script.Services

' To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line.
<System.Web.Script.Services.ScriptService()> _
<WebService(Namespace:="http://tempuri.org/")> _
<WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Public Class Convert
    Inherits System.Web.Services.WebService

    <WebMethod()> _
    Public Function HelloWorld() As String
        Return "Hello World"
    End Function

    <System.Web.Services.WebMethod()> _
    <ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
    Public Function FahrenheitToCelsius(ByVal Fahrenheit As Double) _
           As Double
        Return ((Fahrenheit - 32) * 5) / 9
    End Function

    <System.Web.Services.WebMethod()> _
    <ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
    Public Function CelsiusToFahrenheit(ByVal Celsius As Double) _
            As Double
        Return ((Celsius * 9) / 5) + 32
    End Function
End Class 
```

我正在使用使用 Dojo 的 JavaScript 来调用它。有人可以指导我如何保护它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:01:40.050

这展示了一种合理的发声方法： [http ://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)

简而言之，您发送用户名、散列密码、客户端时间戳和函数参数，以及所有这些的散列以及请求 URL 和私钥。服务器重新创建哈希以验证没有任何更改，检查时间戳是否在可接受的范围内，然后执行该函数。

# c++ - boost `less_than` 的两种版本的实现

> ID：10055374
> 
> 赞同：1
> 
> 时间：2012-04-07T14:41:00.087
> 
> 标签：c++, boost

基于[pp130](https://rads.stackoverflow.com/amzn/click/com/0321133544)

> 但是，如果有一个版本支持 T 和兼容类型之间的比较，那就太好了，这只是添加更多重载的一种情况。**为了对称，您需要允许任一类型位于操作的左侧**。（手动添加运算符时很容易忘记这一点；人们往往只看清楚右侧必须接受另一种类型的事实。当然，您的 less_than 的两种类型版本不会犯这种愚蠢的错误，对吧？）

```
template <class T,class U>
class less_than2
{
public:
  friend bool operator<=(const T& lhs,const U& rhs) { 
    return !(lhs>rhs); 
  }

  friend bool operator>=(const T& lhs,const U& rhs) { 
    return !(lhs<rhs); 
  }

  friend bool operator>(const U& lhs,const T& rhs) {
    return rhs<lhs; 
  }

  friend bool operator<(const U& lhs,const T& rhs)  { 
    return rhs>lhs; 
  }

  friend bool operator<=(const U& lhs,const T& rhs) { 
    return !(rhs<lhs); 
  }

  friend bool operator>=(const U& lhs,const T& rhs) { 
    return !(rhs>lhs); 
  }
}; 
```

**问题**> 为什么我们不必提供以下两个功能？

```
 friend bool operator>(const T& lhs,const U& rhs) {
    return rhs<lhs; 
  }

  friend bool operator<(const T& lhs,const U& rhs)  { 
    return rhs>lhs; 
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:55:59.807

该运算符：

```
friend bool operator>=(const T& lhs,const U& rhs) { 
  return !(lhs<rhs); 
} 
```

取决于函数调用的有效性`lhr<rhs`。您第二次提供其签名`operator<(const T&, const U&)`没有意义（甚至是错误的）。

同样适用于第二次过载。

# zend-framework - 在 Zend 框架中使用前端控制器注册控制器插件

> ID：10055377
> 
> 赞同：0
> 
> 时间：2012-04-07T14:41:28.737
> 
> 标签：zend-framework

我想将变量发送到 zend 框架中的布局，我尝试为其创建一个控制器插件并将其放置在

```
application
    /plugins 
```

并将文件命名为`layout.php`，这是来自的代码`layout.php`

```
class Plugin_Layout extends Zend_Controller_Plugin_Abstract
{
   public function preDispatch(Zend_Controller_Request_Abstract $request)
   {
      $layout = Zend_Layout::getMvcInstance();
      $view = $layout->getView();
      $view->foo = 'bar';
   }
} 
```

现在我想用`application.ini`我尝试添加的frontController注册插件

```
includePaths.plugin = APPLICATION_PATH "/plugins"
autoloaderNamespaces[] = "Plugin_"
resources.frontController.plugins[] = "Plugin_Layout" 
```

它向我显示以下错误。

```
Warning: include_once(Plugin/Layout.php) [function.include-once]: failed to open stream: No such file or directory in /Users/azhararmar/htdocs/joofris/library/Zend/Loader.php on line 146 
```

我是zend框架的新手。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:36:56.567

添加你的*application.ini*：

```
pluginPaths.Plugins = APPLICATION_PATH "/Plugins" 
```

重命名`resources.frontController.plugins[] = "Plugin_Layout"`为，`resources.frontController.plugins.Layout = "Plugin_Layout"`但`frontController.plugins[]`无论如何都应该工作。

并将您的**插件**文件夹重命名为**Plugins**并将您的**layout.php**文件重命名为**Layout.php**，这应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T14:47:47.970

你的路径应该是

```
includePaths.plugin = APPLICATION_PATH "/Plugins" 
```

注意大写P。

# c# - Playfair 密码随机密钥 (C#)

> ID：10055379
> 
> 赞同：0
> 
> 时间：2012-04-07T14:41:32.193
> 
> 标签：c#, random, cryptography

需要用shotgnhillclimbing方法解决playfair代码，想简单地先生成随机密钥，然后通过英文字母对频率计算分数。

但我不知道如何产生不重复的随机密钥，它是 25！可能性。所以如果我永远使用while，我找到正确密钥的可能性非常小。

我怎样才能生成一个密钥，然后要求编译器不要再次使用它？我使用列表：添加还是删除？或者还有别的吗？或者可能是一个字符串[25！]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:31:25.603

通常的方法是从一个随机密钥开始，然后在每一步修改它。您可以执行的修改包括：交换两个关键字母、交换两个整行、交换两个整列、围绕中间列反射、围绕中间行反射或围绕两个主要对角线之一反射。在每个步骤中，您都会随机选择一种修改类型和修改位置。

您的随机选择可能对密钥矩阵没有影响。例如，如果您选择交换两行，并为交换的两个操作数选择相同的两行，则键矩阵将保持不变。没关系。两个连续的操作也可能会相互反转，从而将键矩阵返回到其先前状态。那也很好。因为每个决定都是随机做出的，一些改进了关键矩阵，一些使情况变得更糟，你的爬山算法会很好地工作（尽管它可能比必要的多一些步骤）。

关键是重复随机密钥的概率相当低，如果它确实发生并不重要。

# visual-c++ - MFC 控制嵌套对话框中的编辑框获取断言错误

> ID：10055384
> 
> 赞同：0
> 
> 时间：2012-04-07T14:42:27.170
> 
> 标签：visual-c++, mfc, dialog, controls, nested

我试图在嵌套对话框中设置一个编辑框，但程序在运行时崩溃。我进行了以下更改以与第二个对话框建立联系：

1）在第二类类型的第一个对话框中创建成员变量（派生自CDialog）

2) 在 1s 类的 OnInitDialog() 中，我有：

```
CRect rcDlg;
m_dDlgData.Create(CDialogData::IDD, this); // Create the second dialog
GetWindowRect(rcDlg);
m_dDlgData.SetWindowPos(NULL, 0, 0, rcDlg.Width(), rcDlg.Height(), SWP_NOZORDER); 
```

3) 在第二类中创建了一个 CEdit 变量，该变量是公共的，以便从第一类访问它。4）在按钮的事件处理程序中（在第一个对话框中），我想将给定的编辑框（在第二个对话框中）设为只读，并在另一个事件处理程序中禁用只读属性。这是发生错误的代码：

```
 void CZad1SemovDlg::OnBedit() 
  {
    m_dDlgData.EGNReadOnly(true);//no problems here

    ///some code///

    if(m_dDlgData.DoModal() == IDOK)// <-- the error happens here
    {
    //more code
    }
  }

  bool CDialogData::EGNReadOnly(bool check)
  {
    m_cEGN.SetReadOnly(check);//here nothing strange happens, the variable is
                              //initialised
    return true;
  } 
```

奇怪的是，控件和对话框变量已初始化，但是当我运行 DoModal() 方法时，程序崩溃了。错误是：调试断言失败！第 492 行的 dlgcore.cpp 请帮助，我正在为此苦苦挣扎一段时间，在网上搜索，但找不到原因。我没有包含整个代码，因为我认为它会太多，但是如果您希望我添加您认为我错过的功能，请告诉我，我会将其添加到线程中。我正在使用 MSVC2008

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:49:40.807

当您调用 .DoModal() 时，它会尝试再次创建您已通过调用 m_dDlgData.Create() 创建的对话框。断言告诉您对话框已经创建。不要调用 DoModal()，而是调用 m_dDlgData.ShowWindow(SW_SHOW)，它应该可以工作。但是， ShowWindow() 将无模式显示对话框，但它应该给你你想要的。

编辑：为了实现您的目标，在 DlgData 类中添加一个 var 来指示编辑模式。在构造函数中，传递一个初始化器：

```
class CDlgData
{
  CDlgData( BOOL bEditMode );
  private BOOL m_bEditMode;
}

CDlgData::CDlgData(BOOL bEditMode)
{
  m_bEditMode = bEditMode;
}

CDlgData::OnInitDialog(...)
{
  ...
  if( m_bEditMode )
  {
    // Set the controls to whatever
    m_cEGN.SetReadOnly(TRUE);
  }
} 
```

当您需要显示它时，只需调用它：

```
CDataDlg dlg(TRUE); // for editing or FALSE for add
dlg.DoModal(); 
```

这使您不会过多地了解对话框如何实现“只读”。

希望这对您有所帮助。

# string - 从 HTML 表中提取文本

> ID：10055385
> 
> 赞同：0
> 
> 时间：2012-04-07T14:42:36.620
> 
> 标签：string, tags, sed, web-scraping, extract

[我想从 Mac OS X 命令行中将http://www.amiriconstruction.co.uk/goodwoodgolf/scoretable.htm](http://www.amiriconstruction.co.uk/goodwoodgolf/scoretable.htm)中的文本提取到没有 html 标签的纯文本纺织品中。

我尝试了很多 sed 命令，但 sed 只会再次打印整个文件。我究竟做错了什么？

我试过的例子

`sed -n '/<tr>/,/<\/tr>/p' scoretable.htm`（只会打印带有 html 标签的表格内容：（）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:46:38.557

一个小小的 TXR 网页抓取，在`wget`抓取页面的帮助下：

```
@(deffilter nobr ("<br />" ""))
@(deffilter brsp ("<br />" " "))
@(deffilter nosp (" " ""))
@(next "!wget 2>/dev/null -O - http://www.amiriconstruction.co.uk/goodwoodgolf/scoretable.htm")
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
@(skip)
<div class="scoreTableArea">
@(collect)
<h2 class="unify">@year - @event</h2>
@  (filter brsp event)
@  (collect)
<tr>
<td class="center">@pos</td>
<td>@player</td>
<td>@company</td>
<td>@date</td>
<td class="center">@points</td>
</tr>
@  (filter nobr player company date points)
@  (filter nosp pos points)
@  (until)
</tbody>
@  (end)
@(end)
@(output :filter :from_html)
@  (repeat)

Event: @event
Year: @year

DATE       POS  PT  PLAYER           COMPANY
@    (repeat)
@{date -10}  @{pos -2}  @{points 2}  @{player 16} @company
@    (end)
@  (end)

@(end) 
```

样品运行：

```
$ txr  scoretable.txr

Event: Teeing off to Clobber Ken
Year: 2011

DATE       POS  PT  PLAYER           COMPANY
 Sept 2011   1  40  John Durrant     King Sumners Partnership
 Sept 2011   2  34  Grahame Pettit   Amiri Construction
  Oct 2011   3  31  Tony Deacon      Gleeds
  Oct 2011   4  29  Tony Boyle       Lacey Hickey Caley 
  Oct 2011   5  29  Richard Hemming  Scott White and Hookins
 Sept 2011   6  29  Ian McCoy        Selway Joyce
 June 2011   7  27  Julian Larkin    C&G Properties
 Sept 2011   8  25  Roque Menezes    Capita Symonds
 June 2011   9  22  Shawn Lambert    PWP Architects
 Sept 2011  10  22  Kevin Lendon     Amiri Construction

Event: Ken Watson (HNW Architects) Undisputed Amiri Golf Demon of the Downs
Year: 2010

DATE       POS  PT  PLAYER           COMPANY
      2010   1  40  Ken Watson       HNW Architects
      2010   2  37  David Heda       London Clancy
      2010   3  34  Gordon Brown     Currie & Brown
      2010   4  32  Alistair Taylor  Wildbrook Properties
             5  30  Andy Goodridge   City Estates
             6  25  Russ Pitman      Henderson Green
             7  24  Phil Piper       Piper Whitlock 
             8  23  Kevin Miller     Urban Pulse Architects
             9  19  Simon Asquith    Godsall Arnold Partnership
            10  19  Shawn Lambert    PWP Architects
            11  18  Martin Judd      Davis Langdon 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T17:00:02.720

```
sed -n 's;</\?td>;;gp' scoretable.html | \
sed -e 's;<td class="center">;;' \
    -e 's;<.*>;;' 
```

请注意，我使用`;`而不是`/`作为分隔符 - 我发现它更容易阅读。Sed 将使用您放在后面`'s`的任何字符作为分隔符。

好，现在解释。第一行：

`-n`将抑制输出，但`p`命令末尾的 sed 告诉 sed 专门打印与模式匹配的所有行。这只会让我们得到包裹在`<td>`标签中的行。与此同时，我正在寻找任何匹配的东西`</\?td>`并用任何东西代替它。`/\?`意味着`/`不能出现或只出现一次，所以这将匹配开始和结束标签。最后`g`，或全局，意味着它在一行中第一次成功后不会停止尝试匹配模式。没有`g`它只会替换开始标签。

此输出在第二行再次通过管道传输到 sed：

`-e`只是指定有一个编辑命令要运行。如果您只运行一个命令，这是隐含的，但在这里我运行两个（下一个在第三行）。

这将删除`<td class="center">`，并且下一行将删除任何其他标签（在本例中为`<br>`tags.

仅当您确定一行上最多只有一个标签时，才能运行最后一个命令。否则`.*`会贪心和匹配太多，所以在：

```
<td class="center">24 </ br> 
```

它将匹配整行，并删除所有内容。

# c++ - 如何避免 C++ 派生类中基类成员的重复副本

> ID：10055391
> 
> 赞同：1
> 
> 时间：2012-04-07T14:43:24.843
> 
> 标签：c++, inheritance, static, macros, constants

在我的项目中，有一个基类和三个不同的派生类。我在基类中有一些宏变量写为 const int 。所有派生成员都将访问这些成员并且将看到相同的值。因为它是一个常量，并且不会改变，所以保持 3 个不同的值会浪费空间。因此，我想要一种方法来只维护基类 const 成员的一个副本，以便所有派生类都使用相同的。

例子

```
 //Base.hpp
 Class Base {

       const int ZER0;
       const int ONE;
 };

 //Derived1.hpp
 class Derived1:public Base {
      int some_method1(); 
 };

  //Derived1.cpp

  int Derived1::some_method1() {

    int value = ZERO;
  }

 //Derived2.hpp

 class Derived2:public Base {
    int some_method2();
 };

//Derived2.cpp

int Derived2::some_method2() {
   int value = ONE;
}

//main.cpp

Derived1 d1;
d1->some_method1();

Derived d2;
d2->some_method2(); 
```

//在这两种方法中，值都是恒定的，但零和一仍然会有不同的空间。有没有办法，我只维护一个副本？我可以想到静态变量。在类中使用静态是否可以，我在哪里初始化静态变量。请指教。

PS：这个问题可能是重复的，但是我找不到类似的东西，如果你觉得是这样，请随时重定向到相应的文章/问题；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:42:58.987

如果我对您的理解正确，**枚举**会满足您的需求吗？

```
class Base
{
    enum 
    {
        ZERO,
        ONE
    };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T17:15:11.837

我认为您可以使用虚拟基础继承来维护一份 base ..

```
//Base.hpp
class Base {
public:
    Base() {}
    virtual ~Base() {}
protected:
    static const int ZER0;
    static const int ONE;
};

//Base.cpp
const int Base::ZER0 = 0;
const int Base::ONE = 1;

//Derived1.hpp
class Derived1 : public virtual Base {  //using virtual keyword here maintains one copy of base class, thus one copy of ONE and ZERO for all objects since they are static members of Base. You must read about diamond problem of virtual inheritence to understand this properly.

public:
    Derived1() :Base() {}
    int method1();
};

//Derived1.cpp

int Derived1::method1() {
    int value = ZER0;
    return value;
}

//Derived2.hpp

class Derived2 : public virtual Base {
public:
    Derived2() :Base() {}
    int method2();
};

//Derived2.cpp

int Derived2::method2() {
    int value = ONE;
    return value;
}

//main.cpp

int main() {
    Derived1 d1;
    d1.method1();  // . instead of -> , -> is used for member access through pointers

    Derived2 d2;
    d2.method2();

    return 0;
} 
```

# django - 使用 django grappelli 仪表板和 dotcloud

> ID：10055392
> 
> 赞同：0
> 
> 时间：2012-04-07T14:43:25.797
> 
> 标签：django, django-grappelli, dotcloud

我正在尝试在 dotcloud 服务上使用 grappelli 设置管理员。我已经全部启动并运行良好，但是当我尝试将自定义仪表板添加到等式时，我收到错误说明：

```
ImportError at /admin/
No module named dashboard 
```

但是，我已根据需要安装了 django-grappelli，并且它在没有仪表板的情况下工作。仪表板的所有必需品都应该在那里。

```
INSTALLED_APPS = (
    'grappelli.dashboard',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'grappelli',
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)

GRAPPELLI_INDEX_DASHBOARD = 'www.dashboard.CustomIndexDashboard' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:21:36.583

我们可能需要更多的上下文。但我会首先在您的 Django 设置中查看以下内容：

1.  检查`INSTALLED_APPS`并确保您指定`grappelli.dashboard`而不仅仅是`dashboard`.

2.  检查`GRAPPELLI_INDEX_DASHBOARD`并确保您指定了自定义仪表板模块的完整路径；例如，如果类在您目录`MyDashboard`中的文件中，它应该是.`dashboard.py``myapp``myapp.dashboard.MyDashboard`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T21:30:38.613

解决起来比我最初想象的要容易一些。

我基本上只是将 grappelli 的文件添加到项目中，而不是依赖 dotcloud 来安装依赖项。

现在它工作正常。

# matlab - 缩放 LIBSVM 的测试数据：MATLAB 实现

> ID：10055396
> 
> 赞同：10
> 
> 时间：2012-04-07T14:44:01.770
> 
> 标签：matlab, testing, input, scaling, libsvm

我目前使用 MATLAB 版本的 LIBSVM 支持向量机来分类我的数据。LIBSVM 文档提到在应用 SVM 之前进行缩放非常重要，我们必须使用相同的方法来缩放训练和测试数据。

“相同的缩放方法”解释为：例如，假设我们将训练数据的第一个属性从 缩放`[-10, +10]`到`[-1, +1]`。如果测试数据的第一个属性在范围内`[-11, +8]`，我们必须将测试数据缩放到`[-1.1, +0.8]`

`[0,1]`可以使用以下 MATLAB 代码在 范围内缩放训练数据：

```
(data - repmat(min(data,[],1),size(data,1),1))*spdiags(1./(max(data,[],1)-min(data,[],1))',0,size(data,2),size(data,2)) 
```

但我不知道如何正确缩放测试数据。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-07T14:50:07.117

您给出的代码本质上是减去最小值，然后除以范围。您需要存储训练数据特征的最小值和范围。

```
minimums = min(data, [], 1);
ranges = max(data, [], 1) - minimums;

data = (data - repmat(minimums, size(data, 1), 1)) ./ repmat(ranges, size(data, 1), 1);

test_data = (test_data - repmat(minimums, size(test_data, 1), 1)) ./ repmat(ranges, size(test_data, 1), 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-27T10:48:34.173

不幸的是，如果存在所有观察值都具有相同值的列（如果数据稀疏，则可能会发生这种情况），Richante 的代码是不正确的。一个例子：

```
>> data = [1 2 3; 5 2 8; 7 2 100]

data =

     1     2     3
     5     2     8
     7     2   100

>> test_data = [1 2 3; 4 5 6; 7 8 9];
>> minimums = min(data,[],1);
>> ranges = max(data, [], 1) - minimums;
>> data = (data - repmat(minimums, size(data, 1), 1)) ./ repmat(ranges, size(data, 1), 1);
>> data

data =

         0       NaN         0
    0.6667       NaN    0.0515
    1.0000       NaN    1.0000 
```

所以你必须检查是否有只有一个值的列。但是如果整个训练集中只有一个值，而测试集中有多个值呢？而我们在Leave-one-out场景下怎么办，测试集中只有一个观察值，那么如果训练集中某一列的所有值都是0，而测试集中对应的值是100 ? 这些确实是退化的情况，但它可能会发生。但是，当我检查 Libsvm 库中的文件 svm_scale.c 时，我注意到了这部分：

```
 void output(int index, double value)
{
    /* skip single-valued attribute */
    if(feature_max[index] == feature_min[index])
        return;

    if(value == feature_min[index])
        value = lower;
    else if(value == feature_max[index])
        value = upper;
    else
        value = lower + (upper-lower) * 
            (value-feature_min[index])/
            (feature_max[index]-feature_min[index]);

    if(value != 0)
    {
        printf("%d:%g ",index, value);
        new_num_nonzeros++;
    }
} 
```

那么我们应该忽略这些情况吗？我真的不知道。正如我所说，我不是这个问题的权威，所以我将等待另一个答案，最好是来自 Libsvm 的作者自己，以澄清事情......

# c++ - Visual Studio 2010 找不到 iostream

> ID：10055399
> 
> 赞同：8
> 
> 时间：2012-04-07T14:44:26.497
> 
> 标签：c++, visual-studio

我刚刚安装了 Visual Studio 2010，并想通过编写一个 hello world 应用程序来测试它。

```
#include <iostream>

using namespace std;

int main()
{
    cout << "Hello World!" << endl;

    return 0;
} 
```

尝试编译后，我收到此错误

> 错误 C1083：无法打开包含文件：'iostream'：没有这样的文件或目录

这是我的视觉工作室包含目录

> $(VCInstallDir) 包括；$(VCInstallDir)atlmfc\include; $(WindowsSdkDir)包括；$(FrameworkSDKDir)\包括；

还有我的图书馆目录

> $(VCInstallDir)lib;$(VCInstallDir)atlmfc\lib;$(WindowsSdkDir)lib;$(FrameworkSDKDir)\lib

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-02T09:50:56.797

如果您无法构建简单的 hello world 应用程序，则表明 Visual Studio 或 Windows SDK 安装不正确。您是否下载并安装了[Windows SDK](http://msdn.microsoft.com/en-US/windows/desktop/bg162891)？（注意：如果您需要为 XP 构建，您可能需要使用 Win7 SDK 代替）

我似乎记得在安装 Windows SDK 后，您可能需要“集成”它以与 VS2010 一起使用。每个版本的 Visual Studio 都可以有一个不同的默认 SDK 来构建它。您*可能*需要运行[SDK 配置工具](http://blogs.msdn.com/b/windowssdk/archive/2008/03/01/integrating-windows-sdk-and-vs-with-new-sdk-configuration-tool.aspx)来注册它以与 VS2010 一起使用。或者，您可能需要检查项目中的“ ”设置，如此[处](http://geekswithblogs.net/rob/archive/2010/09/17/integrate-the-windows-sdk-v7.1-with-vs2010.aspx)`Platform Toolset`所述

最终，一旦正确设置，您应该能够构建简单的 C++ 应用程序，而无需任何进一步的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:06:23.880

下面给出的页面可能会对您有所帮助：

1.) [http://msdn.microsoft.com/en-us/library/8z9z0bx6.aspx](http://msdn.microsoft.com/en-us/library/8z9z0bx6.aspx)

2.) [http://msdn.microsoft.com/en-US/library/hdkef6tk.aspx](http://msdn.microsoft.com/en-US/library/hdkef6tk.aspx)

`<iostream>`通常存储在 C:\Program Files\Microsoft Visual Studio 10\VC\include 文件夹中。首先检查它是否仍然存在。

/P 编译器选项用于预处理`helloWorld.cpp`（例如），这将生成 helloWorld.i，然后您检查以查看`iostream`包含在哪里。并且构建的日志应该很有帮助，并且使用 /showincludes 选项来显示包含文件的路径。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-07T16:15:32.117

完成创建新项目的正常简单过程 --> 模板：Visual C++ --> Win32 控制台应用程序。如果没有，请在您的 HDD 中搜索 iostream 并手动设置包含路径。

# javascript - 如何在jqgrid中删除后将焦点设置为网格

> ID：10055401
> 
> 赞同：0
> 
> 时间：2012-04-07T14:44:28.673
> 
> 标签：javascript, jqgrid

jqGrid 工具栏和内联删除按钮用于删除行。

在删除命令删除对话框出现。确认或取消删除后，网格将不会获得焦点。需要在网格中单击鼠标才能使键盘导航在网格中工作。

删除后如何将焦点设置为网格，或者如果删除被取消，则不需要额外的鼠标单击？

工具栏中的删除按钮：

```
 $.extend($.jgrid.del, {
            top: window.innerHeight/2-100,  
            left: window.innerWidth/2-120,
            closeOnEscape: true,
            errorTextFormat: function (response) { 
              clearModeless();
              return decodeErrorMessage(response.responseText, '', '');
              },
            reloadAfterSubmit: false,
            afterShowForm: function($form) {
                var form = $form.parent()[0];

                $("#dData",form).attr("tabindex","1000");
                $("#eData",form).attr("tabindex","1001");
                setTimeout(function() {
                    $("#dData",form).focus(); 
                },50);
            }
           });

           $grid.jqGrid("navGrid", "#grid_toppager", { 

            search:  true,
            del: true,
            add: true,
            view: true,
            edit: true
          }, 

          {       url: '/erp/Grid/Edit?_entity=Klient'},

       {        url: '/erp/Grid/Add?_entity=Klient' },

        { url: '/erp/Grid/Delete?_entity=Klient',

          beforeShowForm: function(form) {
            var selected = $grid.jqGrid('getGridParam','selarrrow');
            $("td.delmsg",form).html( 'Rows '+selected.length +'<br/>' +
                 'Delete?' );
            }
        }
); 
```

列中的删除按钮：'

```
 colModel: [{"name":"_actions","formatter":"actions","viewable":false,"formatoptions":{"editbutton":true,"keys":true,"onSuccess":function (jqXHR) { jqXHRFromOnSuccess=jqXHR;return true;}
,"afterSave":function (rowId) {
  var data = $.parseJSON(jqXHRFromOnSuccess.responseText);
$grid.jqGrid('setRowData', rowId, { Kood: data.PrimaryKeyValues[0] }); 
cancelEditing($grid);afterGridSaveFunc(rowId,jqXHRFromOnSuccess);jqXHRFromOnSuccess=null; 
updateButtonState($grid);
}
,"restoreAfterError":false,"onError":errorfunc
,"extraparam":{"_dokdata":FormData
},"afterRestore":function () {
          updateButtonState($grid);
        }
,"onEdit":onInlineEdit
,"delbutton":true,"delOptions":{"url":"Delete","afterComplete":function (response, postdata, formid) { summarefresh($grid); }
}}}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T21:10:27.997

在我看来，您应该将焦点设置为网格或`afterComplete`. 你使用`reloadAfterSubmit: false`所以我认为在这里设置焦点没有问题。目前您调用`summarefresh`函数。调用后可以直接设置焦点`summarefresh`。

# objective-c - 替代结构中的 Objective-C 对象 (ARC)

> ID：10055404
> 
> 赞同：3
> 
> 时间：2012-04-07T14:44:53.963
> 
> 标签：objective-c, struct, automatic-ref-counting

我这里有以下代码，它不会在 ARC 上运行，因为它在结构中结合了 Objective-C 对象：

```
struct SingleToManyRelation {
    id singleObject;
    NSSet* manyObjects;
} 
```

我知道这让人想起 Core Data，但这不是重点；）我只是在寻找一种解决方案来实现类似的东西，而不必创建一个“容器”类。

提前感谢您的建议，克里斯蒂安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T14:50:03.597

为您的对象提供`__unsafe_unretained`属性，ARC 将停止抱怨（但请记住，它们不会被保留！因此，如果您不想丢失它们，则必须以某种方式存储与它们的牢固关系）

# java - 在java中绘制高维数据

> ID：10055405
> 
> 赞同：5
> 
> 时间：2012-04-07T14:44:56.637
> 
> 标签：java, plot

我有数千个数据点，每个数据点有 50 个维度。我想看看使用 java 的数据的稀疏性。是否有任何 java 包/方法来绘制如此高维数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:53:44.677

您需要寻找的是[多维缩放](http://en.wikipedia.org/wiki/Multidimensional_scaling)。它基本上降低了数据空间的维度，试图保持距离。

因此，您使用 MDS 包，将数据缩减为 2D（或 3D）并使用 2D/3d 图形库（swing、jogl）绘制它们。

它可能有效或无效，具体取决于数据点的数量和它们所在的空间。对于 50 个维度，您可能不走运，但这真的取决于。

一个快速谷歌的java实现让我明白了[这个](http://www.inf.uni-konstanz.de/algo/software/mdsj/)

R中也有一个包，所以你可以使用它。

# dojo - dojo 的简单商店连接列表

> ID：10055406
> 
> 赞同：2
> 
> 时间：2012-04-07T14:44:58.527
> 
> 标签：dojo

有没有比 DataGrid 更简单的列表类型可以连接到 Dojo 的商店？

我想要商店的数据抽象，但我不需要标题和单元格结构。我想在数据线的表示上更加灵活，也许每条线都调用一个函数来布局......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:44:22.520

你问了一个非常好的问题。实际上，我有一篇博客文章仍处于草稿形式，名为“DataGrid 不应该是您的第一选择”。

我使用商店做了几件事，以重复的形式显示商店中的数据。

我已经使用 dom-construct 和每个手动构建了一个 html 表。

```
var table = dojo.create('table', {}, parentNode);
var tbody = dojo.create('tbody', {}, table); // a version of IE needs this or it won't render the table

store.fetch({  // this is a dojo.data.ItemFileReadStore, but you cana dapt to the dojo.Store API
    query: {},
    onComplete: function(itms) {
        dojo.forEach(itms, function(itm, idx) {
            var tr = dojo.create('tr', {}, tbody);
            // use idx to set odd/even css class
            // create tds and the data that goes in them
        });
    }
}); 
```

我还创建了一个转发器，其中我有一个字符串形式的 html 模板，并使用它来为每一行实例化 html。

```
var htmlTemplate = '<div>${name}</div>'; // assumes name is in the data item
store.fetch({  // this is a dojo.data.ItemFileReadStore, but you cana dapt to the dojo.Store API
    query: {},
    onComplete: function(itms) {
        dojo.forEach(itms, function(itm, idx) {
            var expandedHtml = dojo.replace(htmlTemplate, itm);
            // use dojo.place to put the html where you want it
        });
    }
}); 
```

您还可以有一个为每个项目实例化的小部件。

# java - 当我运行 .jar 时，Swing 不会重新绘制，但在命令提示符下除外

> ID：10055411
> 
> 赞同：2
> 
> 时间：2012-04-07T14:45:36.090
> 
> 标签：java, swing, jar, cardlayout

我有一个包含很多面板的项目。我有一种方法可以在卡片布局面板中切换卡片（jpanel）（见下文）。当我从我的 IDE (Netbeans) 运行它以及从命令提示符 ( `java -jar MyStuff.jar`) 运行 jar 时，这一切都很好。但是当我双击 Jar 时，卡片会发生变化，但不会`repaint`产生不希望的结果（当我将鼠标悬停在组件上时）。如果我通过再次单击按钮再次调用该方法，它将适用。我需要立即帮助:) 谢谢！

```
/**
* Shows a panel by the given panel name (in the cardPanel)
*
* @param panelName
*/
private void showPanel(String panelName) {
  if (panelName.equals("revenueSources")) {
    backButtonIcon.setVisible(false);
  } else {
    backButtonIcon.setVisible(true);
  }
  currentPanelName = panelName;
  ((CardLayout) cardPanel.getLayout()).show(cardPanel, panelName);
  repaint();
  revalidate();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T14:51:18.153

`(when I mouse over the components appear)`此代码仅从

```
repaint();
revalidate(); 
```

至

```
revalidate();
repaint(); 
```

# perl - 重命名命令中的下划线（Perl 和 Unix shell）

> ID：10055412
> 
> 赞同：2
> 
> 时间：2012-04-07T14:45:48.000
> 
> 标签：perl, shell, expression, rename

我正在尝试用连字符替换一个文件夹内所有文件名中的所有`_`下划线字符。我输入不同的版本失败：`-``.mat`

```
rename -f 'w/_/-' *.mat 
```

有人可以向我解释什么是错的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T14:53:54.970

如果您使用[的是基于 Perl 的`rename`](http://socialtext.net/perl5/prename)（正如您的标签所建议的那样），则`w`不是 Perl 正则表达式操作。

```
rename -f 's/_/-/g' *_*.mat 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T16:06:58.063

我无法理解您是使用 shell 重命名还是 Perl 重命名：在这两种情况下我都无法理解您的命令。

用于重命名当前目录中所有文件的 Perl 命令行脚本`*.mat`如下所示

```
perl -e 'do { (my $f = $_) =~ tr/_/-/; rename $_, $f } for glob "@ARGV"' *.mat 
```

# python - 在 mac osx 10.7.3 上安装 virtualenvwrapper

> ID：10055413
> 
> 赞同：3
> 
> 时间：2012-04-07T14:45:49.897
> 
> 标签：python, macos, osx-lion, virtualenv, virtualenvwrapper

首先让我说我是编程、mac osx 和 bash 的新手。

我很难在我的 Mac osx 10.7.3 上设置 virtualenvwrapper。它最肯定是一个路径设置问题，但我只是无法让它工作。

在 .bashrc 中设置 virtualenvwrapper

```
export WORKON_HOME=$HOME/.Apps
source /usr/local/bin/virtualenvwrapper.sh 
```

一些终端输出：

```
which easy_install
/usr/bin/easy_install

python -V
Python 2.7.1 
```

当我在终端中运行“source .bashrc”时，我没有得到任何输出。

当我在终端中运行 mkvirtualenv 时，我得到：

```
Error [Errno 2] No such file or directory while executing command install_name_tool -change /System/Library/Fram.../Versions/2.7/Python @executable_path/../.Python 1/bin/python
Could not call install_name_tool -- you must have Apple's development tools installed
Traceback (most recent call last):
  File "/usr/local/bin/virtualenv", line 9, in <module>
    load_entry_point('virtualenv==1.7.1.2', 'console_scripts', 'virtualenv')()
  File "/Library/Python/2.7/site-packages/virtualenv-1.7.1.2-py2.7.egg/virtualenv.py", line 928, in main
    never_download=options.never_download)
  File "/Library/Python/2.7/site-packages/virtualenv-1.7.1.2-py2.7.egg/virtualenv.py", line 1029, in create_environment
    site_packages=site_packages, clear=clear))
  File "/Library/Python/2.7/site-packages/virtualenv-1.7.1.2-py2.7.egg/virtualenv.py", line 1347, in install_python
    py_executable])
  File "/Library/Python/2.7/site-packages/virtualenv-1.7.1.2-py2.7.egg/virtualenv.py", line 966, in call_subprocess
    cwd=cwd, env=env)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 672, in __init__
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 1202, in _execute_child
OSError: [Errno 2] No such file or directory 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T14:49:21.197

您可能只需要安装[XCode](https://developer.apple.com/xcode/)。它应该是从 App Store 免费下载/安装的（如果很大的话）。

为了将来参考，我强烈建议在 OS X 上使用包管理器和 pip（而不是 easy_install）进行 python 开发。我首选的包管理器是[Homebrew](https://brew.sh/)，但[MacPorts](https://www.macports.org/)和[Fink](https://www.finkproject.org/)也不错。除其他外，pip 允许您卸载东西，而 easy_install 不能简单地做到这一点。

# c++ - C++ 和柯里化

> ID：10055416
> 
> 赞同：1
> 
> 时间：2012-04-07T14:46:16.503
> 
> 标签：c++, design-patterns, c++11, currying

我有代码：

```
#include <iostream>

using namespace std;

auto fn = ([](int x){
       return [x](int y) {
          return x * y;
       };
});

int main() {

    int i = fn(2)(4); // 8

    cout << i << endl;

    return 0;
} 
```

这段代码工作正常。但是，我想稍后调用第二个函数，例如：

```
auto i = fn(2);

i(4); //error: 'i' cannot be used as a function 
```

有没有办法稍后调用最后一个函数，然后与第一个调用绑定？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T14:52:28.607

以下按预期工作

```
#include <iostream>

using namespace std;

auto fn = [](int x){
       return [x](int y) {
          return x * y;
       };
  };

int main() {

    auto i = fn(2)(4); // 8
    cout << i << endl;
    auto j = fn(2);
    cout << j(4) << endl;

    return 0;
} 
```

**添加**

顺便说一句，如果您使用 int 而不是 auto，带有 -std=c++0x 的 gcc 4.5 会出现以下错误：

```
currying.cpp:17:17: error: cannot convert ‘&lt;lambda(int)>::<lambda(int)>’ to ‘int’ in initialization
currying.cpp:19:16: error: ‘j’ cannot be used as a function 
```

这是了解问题所在的“明显”且有用的信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T14:51:35.390

的结果`fn`不是整数，因此您不能分配`fn(2)`给整数（甚至不知道为什么会编译）。

你应该能够做到`auto i = fn(2);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T14:51:31.900

这对我有用：

```
int main() {
    auto i = fn(2);
    cout << i(4) << endl;  // prints 8
    return 0;
} 
```

# iphone - 如何创建与 iOS 版 Facebook 应用程序相同的登录名和密码字段

> ID：10055417
> 
> 赞同：2
> 
> 时间：2012-04-07T14:46:17.110
> 
> 标签：iphone, objective-c, ios

我想创建与 iOS 的 facebook 应用程序相同的登录名和密码字段。这是屏幕截图： ![在此处输入图像描述](../Images/fe6fdc886987e5b537d5cec31c687949.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T15:04:34.257

我认为您需要创建一个自定义 TableView 单元格并在其下添加一个 textField 的最佳方式，其中 textField 边框样式为`UITextBorderStyleNone`。您也可以在各自的文本字段中将占位符字符串作为“电子邮件”和“密码”。

**编辑：**

您可以在 tableView 中有两个部分。`Section 0`将包含 textFields`Section 1`并将具有登录按钮。

对于 Login 按钮，您只需为[单元格的 contentView 赋予背景颜色，](https://stackoverflow.com/questions/281515/how-to-customize-the-background-color-of-a-uitableviewcell)使其作为按钮工作。`didSelectRowAtIndexPath:`对于第 1 行和第 0 行（即登录按钮），将像按钮的 TouchUp Inside 事件一样工作。

**编辑-1：**

感谢@MichaelFrederick 的建议，我得到了一个更好的解决方案，我们可以在其中创建一个带有登录按钮的视图，并从下面的方法返回视图：

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
    return yourLoginButtonView;
} 
```

如果您需要更多帮助，请告诉我。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T14:52:03.847

这看起来像一个自定义的`UITableView`用作子视图。但是有很多方法可以解决这个问题，从使用普通的旧自定义`UIView`s 到将形状作为背景，文本输入覆盖在顶部。

# android - 适用于 Android 的 GridView？

> ID：10055420
> 
> 赞同：0
> 
> 时间：2012-04-07T14:46:33.970
> 
> 标签：android

我在我的 Android 应用程序中使用 GridView。![这就是它在eclipse中的样子](../Images/b11a1e85072de3c16fb4ece67b33a36e.png)

如您所见，我将它用于“迷你”日历。

这是我“更新日历”并将信息放入网格的代码。

```
items.add(name + "\n" + time + "\n" + amount);  
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, items);
gridview.setAdapter(adapter); 
```

但是，有没有一种方法可以指定要放置此项目的 GridView ？有没有办法做到这一点？例如，如果突出显示的选项卡是星期日并且添加了一种新药物，我希望它总是在星期日之下。

截至目前，它向右移动（所以，当我继续添加药物时，它首先在星期天，然后是星期一，然后是星期二，等等）

感谢您所有的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:28:42.177

到目前为止，您似乎已经走了很长一段路`GridView`，但我想我应该指出还有其他选择。

1.  对于 >= API 11+，请查看[`CalenderView`](http://developer.android.com/reference/android/widget/CalendarView.html)（来自 Android 公共 SDK）。

2.  对于 < API 11，您可以使用一些开源库。我听说过[`Android-Calender-View`](http://code.google.com/p/android-calendar-view/)和[`CalenderView`](http://caughtinthemobileweb.wordpress.com/2011/06/20/how-to-implement-calendarview-in-android/)（第三方库）的好消息。

# python - 使用 QClipboard，如何复制富文本并将其降级为文本编辑器的纯文本？

> ID：10055421
> 
> 赞同：1
> 
> 时间：2012-04-07T14:46:40.590
> 
> 标签：python, qt, copy-paste, pyside

我有一个预先存在的函数，可以生成富文本/html 报告。我的应用程序在工具提示中显示此报告。我添加了使用以下代码将此报告复制到剪贴板的功能：

```
 reportRichText = generateReport()
    clipboard = QApplication.clipboard()
    reportRichTextMime = QMimeData()
    reportRichTextMime.setHtml(reportRichText )
    clipboard.setMimeData(reportRichTextMime) 
```

这使我可以复制报告并将其粘贴到任何接受富文本的内容中。例如，我可以将报告很好地粘贴到 MS Word 中。但是，问题是我无法粘贴到纯文本编辑器中。我只是有一个灰色的“粘贴”选项，就好像没有什么要粘贴一样。另一个有趣的花絮，如果我用 MS Word 进行“选择性粘贴”，我只能选择粘贴为“HTML 格式”，没有列出纯文本选项。

当然，如果我只是简单地使用 QClipboard 复制为纯文本，我可以复制粘贴到任何我想要的地方。但是我正在复制/粘贴所有标记。这显然是我不想要的。我要么想要富文本，要么想要未标记的纯文本。

我期望的行为是您从网络浏览器复制/粘贴文本时得到的行为。对于接受富文本的应用程序，将粘贴富文本（此外，MS Word 将允许您粘贴为纯文本或富文本）。对于纯文本编辑器，未渲染的纯文本被粘贴到纯文本编辑器中。

如何使用 QClipboard 获取也可以粘贴为纯文本的富文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:46:47.707

好吧，我很确定正确的方法是在QMimeData 上**同时**调用setText 和 setHtml。来自[QMimeData 的 QT 文档](http://doc.qt.nokia.com/4.7-snapshot/qmimedata.html#setText)：

> 单个 QMimeData 对象可以同时使用几种不同的格式存储相同的数据

IE 如果你这样做：

```
reportRichText = generateReport()
clipboard = QApplication.clipboard()
reportRichTextMime = QMimeData()
reportRichTextMime.setHtml(reportRichText)
reportRichTextMime.setText("hello!")
clipboard.setMimeData(reportRichTextMime) 
```

然后你得到：

```
你好！

```

粘贴到接受纯文本的编辑器中，而我在接受 rtf 文本的编辑器中的漂亮报告。这是因为“你好！” 是数据的纯文本表示，而我的报告是 HTML 表示。

对于我的报告，我只是决定返回并找出一种以 HTML 和纯文本格式生成报告的方法，这并不像我想象的那样烦人或困难。所以实际上我现在拥有的是：

```
reportRichText = generateReport(rtf=True)
reportPlainText = generateReport(rtf=False)
clipboard = QApplication.clipboard()
reportRichTextMime = QMimeData()
reportRichTextMime.setHtml(reportRichText)
reportRichTextMime.setText(reportPlainText)
clipboard.setMimeData(reportRichTextMime) 
```

这似乎可以解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T15:07:40.010

我对 Qt 还不是很熟悉，但是从一些谷歌搜索来看，您似乎需要子类化`QMimeData`并编写自己的`html()`方法`text()`来返回 HTML 和文本版本的数据，以及返回的`formats()`方法`text/html`和`text/plain`支持的类型目的。然后把它放在剪贴板上。

# php - PHP 正则表达式 preg_grep

> ID：10055424
> 
> 赞同：0
> 
> 时间：2012-04-07T14:47:21.987
> 
> 标签：php, regex

我有一个看起来像这样的数组：

```
$array[] = 'MT0001ENG Apricot, dried';
$array[] = 'MT0001SYS Prunus armeniaca L.';
$array[] = 'MT0001YLD 0';
$array[] = 'MT0001MGR 06';
$array[] = 'MT0001SGR 20';
$array[] = 'MT0001NCF 6.25';
$array[] = 'MT0001FCF 0.800';
$array[] = 'MT0001000 1159                          00050';
$array[] = 'MT0001001 2.9         2.6   3.5   4     05165';
$array[] = 'MT0001002 0.1         0.1   0.1   4     00050';
$array[] = 'MT0003ENG Pineapple, raw';
$array[] = 'MT0003SYS Ananas comosus (L.) Merr.';
$array[] = 'MT0003YLD 47';
$array[] = 'MT0003MGR 06';
$array[] = 'MT0003SGR 40';
$array[] = 'MT0003NCF 6.25';
$array[] = 'MT0003FCF 0.800';
$array[] = 'MT0003000 232                           00050';
$array[] = 'MT0003001 0.5         0.5   0.6   4     05165';
$array[] = 'MT0003002 0.1         0.1   0.1   4     00050'; 
```

我将包含名称的所有行放入一个名为 $names 的数组中，如下所示：

```
$names = preg_grep("/ENG/", $array); 
```

但现在我想将所有包含蛋白质信息的行放入一个名为 $protein 的数组中。蛋白质系的例子是：

```
$array[] = 'MT0001001 2.9         2.6   3.5   4     05165';
$array[] = 'MT0003001 0.5         0.5   0.6   4     05165'; 
```

如您所见，有一个模式。所有的行都以 MT 开头。后跟一个 4 位数的产品编号。后跟 3 个字符，对于蛋白质，那些是 001 :)

我尝试了以下方法，但没有运气！

```
$proteins = preg_grep("/MT{4}[0-9]001/", $array); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:55:37.200

```
$names = preg_grep("/MT\d{4}001.*/", $array); 
```

匹配 'MT' 后跟 4 位数字后跟 '001' 后跟零个或多个任意字符

您可以使用 RegExr 之类的工具更轻松地进行此操作，这是您示例的链接：[http ://regexr.com?30irf](http://regexr.com?30irf)

# java - 总重量。创建原始（不可引用）整数变量

> ID：10055428
> 
> 赞同：1
> 
> 时间：2012-04-07T14:48:22.057
> 
> 标签：java

在我的课堂上，我有 field `int count`。我想根据变量的值创建一个新变量`count`，如下所示：`int a = new Integer(count)`. 但是当我更新 count variable:`count++`时，变量`a`也会更新。那么如何创建非引用 int 变量呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:12:52.827

你不能用 Java 做到这一点。您最接近的选择是创建一个带有单个 int 的封闭类，并改为引用它：

```
class MutableInteger {
    public int value;
} 
```

然后，稍后：

```
MutableInteger a = new MutableInteger();
a.value = 5;

MutableInteger b = a;
b.value++;

a.value++;

//since a.value is the same primitive as b.value, they are both 7 
```

但是：这打破了 Java 中一系列普遍接受的最佳实践。您可能会寻找另一种方法来解决您真正的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T15:22:48.257

你描述的情况不可能真的发生。

试试这个代码：

```
int count = 15;
int a = new Integer(count);
count++;
Window.alert("a is "+ a + " and count is " + count); 
```

`count`已更新，`a`但没有。所以这意味着你在其他地方有错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T15:25:13.817

尝试以下操作：

```
int a = count + 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T23:24:37.567

你的问题有点误导。原因如下：

在 Java 中，原始值在复制时不会复制它们的引用。查看您的代码并寻找您正在执行附加步骤的位置。

的构造函数`Integer`使用这个：

```
this.integer = integer; 
```

# java - Java RMI - NetBeans 上的 jar

> ID：10055429
> 
> 赞同：0
> 
> 时间：2012-04-07T14:48:25.750
> 
> 标签：java, netbeans, jar, rmi

我有一个使用来自另一个项目的类的 RMI 服务器。我已经将另一个项目的 jar 作为库导入到 RMI 上，它在 netbeans 上运行良好。虽然当我从 netbeans 生成的 .jar 运行 RMI 服务器时，我得到`classnotfoundexception`了导入的类。

```
Any suggestions why it would be running inside netbeans, but the jar isn't working? 
```

我也不确定这是否是正确的选择，但在 RMI 上我检查了“使用的专用库文件夹”，因为其他项目非常小。

另请注意，我也在另一个项目上导入服务器，以便它可以使用远程接口。（虽然我猜这与问题无关）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:23:31.827

如果您使用标准 netbeans 项目（而不是 maven 项目）构建项目，您将在构建最终 jar 的 dist 目录下看到一个 lib 目录。Netbeans 将在主 jar 文件中构建清单，以便在该 lib 目录中查找依赖 jar，该目录与构建的 jar 的位置相关。因此，如果您将构建的 jar 放在一个目录中，请将 lib 文件夹复制到该目录，然后像这样启动它：

```
java -jar my.jar 
```

例如

```
+ folder
|   my.jar
+-+ lib
  | other.jar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:11:14.520

当你启动你的 rmi 服务器时，你把其他类的 jar 也放进了类路径？

尝试从命令提示符启动 jar：

```
java -jar -classpath rmiserver.jar:lib/other.jar rmiserver.jar 
```

# java - 连接mysql的问题

> ID：10055431
> 
> 赞同：-1
> 
> 时间：2012-04-07T14:48:39.257
> 
> 标签：java, android, mysql

您好正在尝试从 json 中的 php 脚本获取数据。我得到一些错误：首先是变量没有解决。如果我尝试像下面这样添加新变量，那么在运行应用程序后我会收到错误消息，显示转换错误。它主要是一个教程代码，但正如我之前所说，IS 变量存在问题。你能帮助我吗？

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
  nameValuePairs.add(new BasicNameValuePair("year","1980"));
  InputSteam is = null;

  //http post
  try{
          HttpClient httpclient = new DefaultHttpClient();
          HttpPost httppost = new HttpPost("http://ik.su.lt/~jbarzelis/bandymas/getAllPeopleBornAfter.php");
          httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
          HttpResponse response = httpclient.execute(httppost);
          HttpEntity entity = response.getEntity();
          InputStream is = entity.getContent();
  }catch(Exception e){
          Log.e("log_tag", "Error in http connection "+e.toString());
  }
  //convert response to string
  try{
          BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
          StringBuilder sb = new StringBuilder();
          String line = null;
          while ((line = reader.readLine()) != null) {
                  sb.append(line + "\n");
          }
          is.close();

          result=sb.toString();
  }catch(Exception e){
          Log.e("log_tag", "Error converting result "+e.toString());
  }

  //parse json data
  try{
          JSONArray jArray = new JSONArray(result);
          for(int i=0;i<jArray.length();i++){
                  JSONObject json_data = jArray.getJSONObject(i);
                  Log.i("log_tag","id: "+json_data.getInt("id")+
                          ", name: "+json_data.getString("name")+
                          ", sex: "+json_data.getInt("sex")+
                          ", birthyear: "+json_data.getInt("birthyear")
                  );
          }
  }
  catch(JSONException e){
          Log.e("log_tag", "Error parsing data "+e.toString());
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:00:40.993

我怀疑声明中的简单错字`InputStream`可能是一个开始的地方。

# javascript - 每次点击在文本之间切换

> ID：10055434
> 
> 赞同：0
> 
> 时间：2012-04-07T14:48:54.670
> 
> 标签：javascript, jquery

```
$("#mute").click(function(){
        $("#audioplayer")[0].muted = $("#audioplayer")[0].muted; 
        $("#message").text("Volume muted");
    }) 
```

我需要实现的是，当用户再次单击“静音”按钮时，他们将收到另一条带有“音量未静音”的消息，而不是静音，如果他再次单击它，则切换回静音，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:50:56.430

尝试以下

```
(function() {
  var muted = false;
  $("#mute").click(function(){
    muted = !muted;
    $("#audioplayer")[0].muted = muted;

    var msg = muted ? "Volume muted" : "Volume unmuted";
    $("#message").text(msg);
  });
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T14:54:26.313

我会这样尝试：

```
var playerIsMuted = false;

$("#mute").click(function(){
   if (playerIsMuted){
       $("#audioplayer")[0].muted = false;
       $("#message").text("Volume unmuted");
   }else{
       $("#audioplayer")[0].muted = true;
       $("#message").text("Volume muted");
  }
  playerIsMuted = !playerIsMuted;
}) 
```

而不是全局变量，附加到播放器对象的属性可以更好。

希望这可以帮助！

# java - 如何使 JFrame 真正全屏？

> ID：10055436
> 
> 赞同：21
> 
> 时间：2012-04-07T14:49:11.570
> 
> 标签：java, swing, jframe, fullscreen

在我的 Java 应用程序中，我尝试使用以下代码使 JFrame 真正全屏显示：

```
public class MainFrame extends JFrame {

    private static final long serialVersionUID = 1L;

    public MainFrame() {
        super();
        this.setTitle();
        this.setUndecorated(true);

        this.setExtendedState(JFrame.MAXIMIZED_BOTH);

        this.setVisible(true);
        //this.pack();
    }
} 
```

但在我的 Mac 上，我仍然可以看到 Dock 和 OSX 的顶部工具栏。那么如何创建一个真正占用整个屏幕的 JFrame？

**编辑** 我必须补充一点，我想从 Eclipse 插件中调用该 JFrame。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-07T14:53:16.977

我还没有尝试过，但是 Java 有全屏 API，应该可以满足您的需求：

[http://docs.oracle.com/javase/tutorial/extra/fullscreen/index.html](http://docs.oracle.com/javase/tutorial/extra/fullscreen/index.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T22:55:29.927

我知道答案。首先，我必须承认，如果您正在制作视频或电影播放器​​或动画播放器，以下技巧将不起作用。好的，这是我经过多次尝试后发现的：

假设您想在按下按钮（称为 fullscreenButton）时使 JFrame（称为框架）全屏。然后执行以下操作：

```
import java.awt.*; 
import javax.swing.*;   

public class FullscreenJFrame extends JFrame{

    private JPanel contentPane = new JPanel();
    private JButton fullscreenButton = new JButton("Fullscreen Mode");
    private boolean Am_I_In_FullScreen = false;
    private int PrevX,PrevY,PrevWidth,PrevHeight;

    public static void main(String[] args) {
         FullscreenJFrame frame = new FullscreenJFrame();
         frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
         frame.setSize(600,500);
         frame.setVisible(true);
    }

    public FullscreenJFrame(){
        super("My FullscreenJFrame");

        setContentPane(contentPane);
        //From Here starts the trick

        FullScreenEffect effect = new FullScreenEffect();

        fullscreenButton.addActionListener(effect);

        contentPane.add(fullscreenButton);
        fullscreenButton.setVisible(true);

    }

    private class FullScreenEffect implements ActionListener{
        @Override
    public void actionPerformed(ActionEvent arg0) {
         // TODO Auto-generated method stub

             if(Am_I_In_FullScreen == false){

                      PrevX = getX();
          PrevY = getY();
          PrevWidth = getWidth();
          PrevHeight = getHeight();

          dispose(); //Destroys the whole JFrame but keeps organized every Component                               
                      //Needed if you want to use Undecorated JFrame
                      //dispose() is the reason that this trick doesn't work with videos
                      setUndecorated(true);

              setBounds(0,0,getToolkit().getScreenSize().width,getToolkit().getScreenSize().height);
            setVisible(true);
                            Am_I_In_FullScreen = true;
              }
               else{
                    setVisible(true);

                    setBounds(PrevX, PrevY, PrevWidth, PrevHeight);
                    dispose();
        setUndecorated(false);
        setVisible(true);
                    Am_I_In_FullScreen = false;
               }
    }
    }
} 
```

我希望你喜欢它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T14:06:13.577

一个例子：

```
import java.awt.FlowLayout;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;

public class FullScreenJFrame extends JFrame{

    private GraphicsDevice vc;

    public FullScreenJFrame(){
     super();

     GraphicsEnvironment e = GraphicsEnvironment.getLocalGraphicsEnvironment();
     vc= e.getDefaultScreenDevice();

     JButton b = new JButton("exit");
     b.addActionListener(
             new ActionListener(){
                 public void actionPerformed(ActionEvent arg0) { 
                     dispose();
                     System.exit(0);

                 }
             }
             );
     this.setLayout(new FlowLayout());
     this.add(b);
     setFullScreen(this);
 }

 public void setFullScreen(JFrame f){

     f.setUndecorated(true);
     f.setResizable(false);
     vc.setFullScreenWindow(f);

 }

 public static void main(String[] args){
     new FullScreenJFrame();
 }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-15T18:04:58.543

```
private Dimension screenSize; /* class level vars */
private swidth , sheight;

/*In GUI creating method:put this code: */
screenSize = Toolkit.getDefaultToolkit().getScreenSize();
sheight = screenSize.height;
swidth = screenSize.width;
setBounds(0, 0, swidth, sheight-40); 
```

注意：使用 swidth、sheight 变量可以让您自由进一步调整。
最好的方法是使用`int`vars 代替`- 40`eg`sheight/swidth - margin`等。
这里的边距应该来自参数表。全面掌控局面。
也可以直接使用：`setBounds(0,0,screenSize.width, screenSize.height);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-13T07:07:00.963

使用 com.apple.eawt.FullScreenUtilities。并确保测试系统正在运行 Mac OS。

```
public void enableFullscreen(Window window, boolean bool) {
    if (System.getProperty("os.name").startsWith("Mac OS")) {
        com.apple.eawt.FullScreenUtilities.setWindowCanFullScreen(window, bool);

    }

} 
```

# php - 使用 jQuery .load 将变量传递给 PHP

> ID：10055437
> 
> 赞同：0
> 
> 时间：2012-04-07T14:49:18.850
> 
> 标签：php, jquery, variables, load

我有一个页面（“main.php”），它从外部 PHP 文件（“rpc.php”）加载内容。在 main.php 上使用以下语法成功地从 rpc.php 中提取内容：

```
$("#portfolioContent").load("rpc.php?o="+day+""); 
```

在 rpc.php 我有一个 if 语句（长开关函数的一部分），如下所示：

```
if ( $pagename == "home" ) {
break;
} 
```

由于尚未设置变量，因此未发生此中断。rpc.php 被各种父页面使用，因此需要在这些页面上设置变量。在父页面上，我尝试使用以下代码尝试设置变量并将其传递给 rpc.php 但无济于事：

```
$("#portfolioContent").load("rpc.php?o="+day+"$pagename="home""); 
```

谁能指出我正确的方向？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T14:51:33.223

应该是这样的

```
$("#portfolioContent").load("rpc.php?o="+day+"&pagename=home"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T14:53:46.980

更改此行

```
$("#portfolioContent").load("rpc.php?o="+day+"$pagename="home""); 
```

对此

```
$("#portfolioContent").load("rpc.php?o="+day+"pagename="home"); 
```

然后访问变量`$_GET['pagename']`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T14:54:46.563

你的语法是错误的。试试这个：

```
$("#portfolioContent").load("rpc.php?o="+day+"&pagename=home"); 
```

注意我用 a 替换`$`了`&`

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T14:53:30.647

要从 PHP 中的 URL 访问变量，只需执行以下操作： `$_GET['variablename']`

例如，使用 URL [http://www.example.com?hello=hellWorld](http://www.example.com?hello=hellWorld)

```
echo $_GET['hello']; 
```

会打印`helloWorld`

此外，您用于`&`分隔变量，而不是`$`

# mysql - web2py 无法连接到 mysql

> ID：10055441
> 
> 赞同：1
> 
> 时间：2012-04-07T14:49:48.017
> 
> 标签：mysql, web2py

我将 web2py 安装为源代码，并希望在没有其余框架的情况下使用 DAL。

但是DAL没有连接到mysql：

```
>>> DAL('mysql://user1:user1@localhost/test_rma')
...
RuntimeError: Failure to connect, tried 5 times:
'NoneType' object has no attribute 'connect' 
```

而 MySQLdb 可以使用相同的凭据连接到数据库：

```
>>> import MySQLdb
>>> db = MySQLdb.connect(host='localhost', user='user1', passwd='user1', db='test_rma') 
```

通过显式设置驱动程序对象解决了与 MsSQL[类似的问题。](https://stackoverflow.com/questions/7891376/web2py-wont-connect-to-mssql)我尝试了相同的解决方案：

```
>>> from gluon.dal import MySQLAdapter
>>> print MySQLAdapter.driver
None
>>> driver = globals().get('MySQLdb',None)
>>> print MySQLAdapter.driver
None 
```

但驱动程序仍然是无。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:49:03.853

好的，我找到了问题的解决方案。我不得不写：

```
MySQLAdapter.driver = globals().get('MySQLdb',None) 
```

代替

```
driver = globals().get('MySQLdb',None) 
```

我误读了原始问题中的那一行。

# javascript - 检测响应式网站图标的网站图标尺寸

> ID：10055447
> 
> 赞同：3
> 
> 时间：2012-04-07T14:50:08.497
> 
> 标签：javascript, favicon, responsive-design

网站图标可以呈现为 16x16、32x32、48x48、64x64 中的任何[一个](http://en.wikipedia.org/wiki/Favicon)。

出于[动态 favicons](http://softwareas.com/dynamic-favicons)的目的，我想知道是否有一种方法可以检测 favicon 尺寸，或者至少是显示哪些浏览器正在使用哪些尺寸的参考。谷歌对此一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T22:07:19.623

你的意思是得到图像的尺寸？尝试这样的事情

```
var el = document.querySelector('link[rel="shortcut icon"],link[rel="icon"]');
var url = el.href || "/favicon.ico"
var image = new Image();
image.src = url;
image.onload = function(){
    alert(image.width + " , " + image.height);
}; 
```

# jquery - Ajax beforeSend 在 Rails 上只工作一次

> ID：10055450
> 
> 赞同：4
> 
> 时间：2012-04-07T14:50:55.027
> 
> 标签：jquery, ruby-on-rails, ajax

我有 3 个文件：

index.html.erb 是我的主页

在索引中，我渲染了一个部分 _relationship.html.erb，并且有一个带有以下行的表单：

```
<%= form_tag('/relationships/update/', :remote => true, :id => "relationships_form_#{@count}") do %> 
```

我也有 index.js.erb（relationship.html 在 index.html.erb 中）

```
jQuery("#relationships_form_1").bind("ajax:success", function() {
  $("#box_relationships").hide().html("<%=escape_javascript(render('relationships/relationships'))%>").fadeIn(2000, 'swing');
  }) 
```

每次发送表单，并更改值。

我想使用 beforeSend 选项显示加载 gif。

我试过（在 index.html.erb 上。如果我把它放在 _relationships 部分，它根本不起作用）：

```
jQuery("#relationships_form_1").bing("ajax:beforeSend", function() {
$("#relationship_save").show();
}); 
```

但它只工作一次。

然后，我添加了 before rails 选项

```
:before => '$("#relationship_save").show();' 
```

它再次起作用，只有一次。

我什至在 jquery 上尝试了 .on

```
 jQuery("#relationships_form_1").on("ajax:beforeSend", function() {
$("#relationship_save").show();
}); 
```

它仍然只工作一次。

每次发送表单，每次存储值，之前发送只工作一次

有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-07T15:00:03.273

```
jQuery(document).on("ajax:beforeSend", "#relationships_form_1", function() {
  $("#relationship_save").show();
}); 
```

因为您的 ajax 加载表单与初始表单不同。

# java - Android AlarmManager - 从另一个活动中取消

> ID：10055462
> 
> 赞同：0
> 
> 时间：2012-04-07T14:52:51.330
> 
> 标签：java, android, android-activity, alarmmanager

我有一个 Homework Planner 应用程序，我想创建一个警报，以提醒用户前一天晚上/某个时间的作业。我有一个名为 AddNewHomework 的活动，用户在其中创建一个新的家庭作业项目并将其添加到数据库中。然后调用此代码。

```
Intent i = new Intent(this, AlarmNotificationReceiver.class);
i.putExtra("title", title);
PendingIntent pi = PendingIntent.getBroadcast(this.getApplicationContext(), (int) id, i, 0);
AlarmManager mAlarm = (AlarmManager) getApplicationContext().getSystemService(Context.ALARM_SERVICE);
mAlarm.set(AlarmManager.RTC_WAKEUP,
System.currentTimeMillis() + 10 * 1000, pi); 
```

这会创建一个新警报，该警报会在 10 秒内触发并创建一个通知。

我的问题是我有另一个名为 HomeworkList 的活动，其中包含一个 ListView 并显示存储在数据库中的所有作业。如果用户长按一个，他们可以选择删除它，但是从数据库中删除它不会删除警报。

我已经寻找可以用来删除警报的代码，但是我没有找到任何可以让我了解如何从这个不同的活动中取消警报的东西。我知道我需要使 PendingIntent 相同，但是我该怎么做，因为我无法从其他类访问上下文。（我不认为）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:01:26.953

如果有帮助，您可以通过为当前上下文创建一个静态 getter 从另一个活动访问您的上下文。在您上面的课程中，只需创建一个私有字段：

```
private static Context context;

public static Context getAppContext(){
    return MyActivity.context;
} 
```

然后，只需在 onCreate 方法中添加一个：

```
MyActivity.context = getApplicationContext(); 
```

从另一个活动访问上下文现在非常容易。您可以使用从“MyActivity”中检索到的上下文来取消警报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-19T17:03:09.863

根据这个[Android：上下文是否影响filterEquals（），用于取消警报？](https://stackoverflow.com/questions/13787006/android-does-context-affect-filterequals-used-to-cancel-alarm)使用不同的上下文无关紧要，这不会影响将 PendingIntent 识别为匹配。我已经在我自己的应用程序中确认了这一点，我使用该活动作为上下文从一个活动中设置了一个警报，并使用该活动的上下文从另一个活动中取消了它，并且它被成功取消（未触发该操作）。

# database - Grails - 无法将内置数据库设置为“更新”

> ID：10055464
> 
> 赞同：1
> 
> 时间：2012-04-07T14:53:03.060
> 
> 标签：database, grails, database-connection, datasource, h2

我无法将我的内置数据库设置为“ `update`”。当我离开应用程序时它总是被清除，好像还在' `create-drop`'上。

知道我使用的是 MySQL 数据库可能很有用，并恢复为内置数据库以便能够与一些不知道如何设置 SQL 数据库或 Tomcat 服务器的朋友分享项目。

这是我的`DataSource.groovy`文件：

```
dataSource {
    pooled = true
    driverClassName = "org.h2.Driver"
    username = "sa"
    password = ""
}
hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = true
    cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}
// environment specific settings
environments {
    development {
        dataSource {
            dbCreate = "update" // one of 'create', 'create-drop', 'update', 'validate', ''
            url = "jdbc:h2:mem:myAppDevDb;MVCC=TRUE"
        }
    }
    test {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:mem:myAppTestDb;MVCC=TRUE"
        }
    }
    production {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:myAppProdDb;MVCC=TRUE"
            pooled = true
            properties {
                maxActive = -1
                minEvictableIdleTimeMillis=1800000
                timeBetweenEvictionRunsMillis=1800000
                numTestsPerEvictionRun=3
                testOnBorrow=true
                testWhileIdle=true
                testOnReturn=true
                validationQuery="SELECT 1"
            }
        }
    }
} 
```

非常感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T15:24:55.687

问题是您的数据源被配置为内存数据源，因此当 jvm 退出时它被丢弃。如果您将 H2 URL 配置为使用文件，则应该能够保存数据库。

```
development {
    dataSource {
        dbCreate = "update"
        url = "jdbc:h2:somefile:myAppDevDb;MVCC=TRUE"
    }
} 
```

# php - PHP脚本非常慢

> ID：10055469
> 
> 赞同：0
> 
> 时间：2012-04-07T14:53:49.853
> 
> 标签：php, performance

一切正常，唯一的问题是加载速度很慢。加载包含 265 张图片的页面需要 7 秒。这些图像不在远程服务器上，它们是缩略图。它们也以真实的高度/宽度显示，因此服务器不必调整它们的大小。

它不应该是 getimagesize()，因为在页面的先前迭代中，每个图像也有一个 getimagesize() 函数，并且加载时没有问题。

我能找到的唯一可能是数据库的问题。这是设置：

表专辑：

| 编号 | 纳姆 | 网址 | 活动 |

* * *

表格照片：

| 编号 | 网址 | 分机 | 描述 | 白蛋白|

因此，来自 fotos 的专辑 ID 与来自相册的 id 相关联。这是代码：

```
$album = mysql_real_escape_string($_GET['fx2']);
mysql_select_db('user_fotos');
$i = 0;
$sql = mysql_query("SELECT a.naam, b.url, b.ext, b.description, b.id FROM albums AS a LEFT JOIN fotos AS b ON a.id = b.albumid WHERE a.urlnaam = '$album'");
while($row = mysql_fetch_assoc($sql)){
    if($i == 0){
        echo "Album: {$row['naam']}<br />";
        echo "<table><tr>";
    }
    if($i % 4 == 0){echo "</tr><tr>";}
    echo "<td align='center'>";
    $photourl = "http://www.mysite.com/fotos/$album/thumbs/" . $row['url'] . $row['ext'];
    $dimensions = getimagesize($photourl);
    $breedte = $dimensions[0];
    $lengte = $dimensions[1];
    if($breedte == '120'){$aspect="width='120px' height='{$lengte}px'";}else{$aspect="height='120px' width='{$breedte}px'";}
        echo "<div class='imageHolder' style='width:{$breedte}px; height:{$lengte}px;' onClick=\"parent.location='$album/{$row['id']}'\" /><img $aspect src='http://www.mysite.com/fotos/$album/thumbs/" . $row['url'] . $row['ext'] . "' alt='{$row['description']}' /></div>";
        echo "</td>";
        $i++;
}
echo "</tr></table>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:06:39.530

正如其他人和我自己提到的那样，从远程 url 获取 imagesize() 将涉及获取图像会减慢脚本的速度：正如我所见，您使用的是实际尺寸，因此无需实际获取尺寸，您也可能有一些专辑变量的 XSS 问题：试试这个，你会得到相同的结果，但要快得多：

```
 <?php 
    $album = mysql_real_escape_string($_GET['fx2']);
    mysql_select_db('user_fotos');

    $sql = mysql_query("
    SELECT a.naam, b.url, b.ext, b.description, b.id 
    FROM albums AS a 
    LEFT JOIN fotos AS b ON a.id = b.albumid 
    WHERE a.urlnaam = '$album'");

    $i = 0;
    while($row = mysql_fetch_assoc($sql)){
        if($i == 0){
            echo "<p>Album: {$row['naam']}</p>";
            echo "<table><tr>";
        }
        if($i % 4 == 0){echo "</tr><tr>";}
        echo "<td align='center'>";
        echo "<div class='imageHolder' onClick=\"parent.location='".htmlentities($album)."/{$row['id']}'\" /><img src='./fotos/".htmlentities($album)."/thumbs/" . $row['url'] . $row['ext'] . "' alt='{$row['description']}' /></div>";
        echo "</td>";
        $i++;
    }
    echo "</tr></table>";
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T14:59:59.980

我认为图像本身也不是动态生成的吗？我建议您`getimagesize()`在将图像加载到数据库时执行此操作，然后创建宽度/高度列以节省昂贵的文件操作。另外，做一些html缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T15:05:56.800

可能是 getimagesize($photourl) 使脚本变慢

你的查询很正常

您可以轻松检查脚本：

在 php 代码中使宽度和高度为 const 并再次运行脚本，这样您就可以知道是哪一行使脚本运行缓慢

# android - Android ListView 用 CheckBox 可以区分点击

> ID：10055470
> 
> 赞同：0
> 
> 时间：2012-04-07T14:53:50.153
> 
> 标签：android, android-listview

我正在尝试使用 CheckBox 创建一个 ListView ...Th ListView 应该允许用户选择一个项目或打开该项目以选择其中的其他选项。换句话说，ListView 应该能够区分单击复选框和单击项目本身。

我尝试使用 android.R.layout.simple_list_item_multiple_choice 来实现它，但这一个允许我只检查复选框，即使我在复选框之外（在项目上）单击也是如此。

有人可以帮忙吗？
这是我的代码，

```
import java.util.ArrayList;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class ListViewActivity extends Activity implements OnItemClickListener {  

ListView directoryList;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final ArrayList<String> contacts = new ArrayList<String>();
    contacts.add("zaid");
    contacts.add("hazem");
    contacts.add("Oubai");

    directoryList= (ListView) findViewById(R.id.directoryList);

    final ArrayAdapter<String> arrayAdapter;
    arrayAdapter = new ArrayAdapter<String>(this,
                                  android.R.layout.simple_list_item_multiple_choice,
                                  contacts);

    directoryList.setAdapter(arrayAdapter);
    directoryList.setOnItemClickListener(this);
    directoryList.setClickable(true);

}

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:17:20.473

您需要一个定制的阵列适配器。在您的 getView() 中，握住您的复选框并设置 OnCheckedChangeListener()

这是有关如何制作自己的自定义适配器的教程。该示例有一个可点击的文本框，但您可以将其更改为适用于复选框。

[http://www.shubhayu.com/android/listview-with-arrayadapter-and-customized-items](http://www.shubhayu.com/android/listview-with-arrayadapter-and-customized-items)

# jquery - 链接 jQuery 选择器是否有任何负面影响？

> ID：10055472
> 
> 赞同：4
> 
> 时间：2012-04-07T14:53:54.440
> 
> 标签：jquery, performance, jquery-selectors, chaining

在选择器上链接 jQuery API 调用是否有任何负面影响？处理性能、设计、内存泄漏敏感性的负面影响是我特别感兴趣的。

因此，将链接这样的语句：

```
$('.myElement').css('color','green')
               .attr('title','My Element')
               .click(function(){ console.log('clicked') }); 
```

让应用程序对上述任何负面影响保持开放？

我个人对链接 jQuery 表达式完全没有任何问题，但是我看到很多人 bash 链接，我想知道避免它是否有任何具体的好处，或者它是否只是可读性和个人风格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T15:01:29.327

链接实际上比这样做更好：

```
$('.myElement').css('color','green')
$('.myElement').attr('title','My Element')
$('.myElement').click(function(){ console.log('clicked') }); 
```

因为这样做会使 jquery '跳转到池中'寻找我的元素 3 次，而如果你链接你的订单它只会在池中查找一次（注意池是 DOM :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T15:52:48.140

链接只是在返回的对象上调用方法。本质上没有什么好或坏的。有些人喜欢，有些人不喜欢。

* * *

关于内存泄漏，当您完成 DOM 遍历时，jQuery 确实保留了一组缓存的 jQuery 对象。这与链接并没有太大关系，因为引用的 jQuery 对象会做同样的事情，但我想如果你保持对该对象的永久引用，它可能会导致泄漏。

* * *

例如，如果您这样做...

```
var jq_obj = $('.my_class').parents('.another_class'); 
```

... jQuery 对象现在具有对具有该类的`".my_class"`元素的祖先的引用。`".another_class"`

问题是你可以这样做......

```
jq_obj.end(); 
```

...您现在可以参考`".my_class"`所选的原始元素。这意味着保留了原始参考。

* * *

因此，如果在调用 之后`.parents()`，如果您停在那里*（没有调用`.end()`）*，并且如果您保留对该`jq_obj`对象的全局引用，那么您现在将隐式引用`".my_class"`除元素之外的所有`".another_class"`元素。

因此，如果`".my_class"`从 DOM 中删除任何原始元素，则由于该引用，它们不能被 GC'd。

* * *

这是一个例子......

[http://jsfiddle.net/aUEFc/](http://jsfiddle.net/aUEFc/)

```
 // select "my_class" then traverse to a parent
var jq_obj = $('.my_class').parents('.another_class');

   // remove "my_class" elements from the DOM
$('.my_class').remove();

   // see if we still have a reference to "my_class" elements
var len = jq_obj.prevObject.filter('.my_class').length; 
```

即使删除了元素，该`len`变量也将是选择的元素的原始数量。`".my_class"``".my_class"`

即使我们的`jq_obj`对象正在引用`".another_class"`元素，情况也是如此。原因是该`.prevObject`属性引用了进行原始 DOM 选择的 jQuery 对象，因此只要节点存在，就永远不会释放节点`jq_obj`。

# css - 我的外部 .css 链接在 aptana 中失败，但在实时 Web 服务器上工作；我怎样才能解决这个问题？

> ID：10055477
> 
> 赞同：0
> 
> 时间：2012-04-07T14:54:27.623
> 
> 标签：css, path, hyperlink, external

我认为我的问题只是与我的 .css 路径有关。

例如我的文件结构是这样的：

（根文件夹）mysite：

```
-index.htm

-styles.css 
```

* * *

在我的 index.htm 代码中，我使用以下代码链接到我的样式表：

**/styles.css**

现在，更改路径不是解决方案，我需要将其与**“/”**保持一致，以首先将其指向根。由于网站以这种方式完美地在线工作。

无论如何我可以让网站在本地显示我的样式，某种设置？我已经搞砸了几个小时阅读这里的论坛，并玩弄设置根目录。

我只是不明白为什么一旦我设置了正确的根，它就会弄乱样式表的路径。我开始认为在 Aptana 中用“/”链接 .css 文件是不可能的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:11:35.253

如果您从“/styles.css”中删除 /，则 index.html 将在本地和您的网站上正确加载它。

您可能还想查看 html 基本标记： [http ://www.w3schools.com/tags/tag_base.asp](http://www.w3schools.com/tags/tag_base.asp)

这将允许您的页面始终指向网站上的 css 文件。

你说“改变路径不是解决办法”，请解释一下？一个活生生的例子也很好。

# php - 无限循环中的 wp_query

> ID：10055478
> 
> 赞同：1
> 
> 时间：2012-04-07T14:54:28.047
> 
> 标签：php, wordpress

我正在尝试执行此循环，但它会无限循环

我只需要在`<li>`标签上显示一些结果。我正在编辑`loop.php`以执行此操作，并且该函数`if(function_exists('wp_custom_fields_search')) wp_custom_fields_search();`仅返回我创建的一个插件的形式。

你能帮我吗？

```
<?php
        $queryA = new WP_Query($args1);
        $queryB = new WP_Query($args2);

        $args1 = array (
        'orderby' => 'title', 
        'order' => 'ASC', 
        'category_name' => 'lojas',
        'posts_per_page' => '-1',
        );

        $args2 = array (
        'orderby' => 'title', 
        'order' => 'ASC', 
        'category_name' => 'gastronomia',
        'posts_per_page' => '-1',
        );  

        if ($queryA->have_posts()) {
            if(function_exists('wp_custom_fields_search')) wp_custom_fields_search();
            while($queryA->have_posts()) : $queryA->the_post();
                echo '<li>';
                echo '<span class="nome">';
                the_title();
                echo '</span>';
                echo '<span class="end">';
                echo get('endereco');
                echo '</span>';
                echo '<span class="tel">';
                echo get('telefone');
                echo '</span>';
                echo '</li>';
            endwhile;
        } 

        if ($queryB->have_posts()) {
            if(function_exists('wp_custom_fields_search')) wp_custom_fields_search('preset-1');
            while($queryB->have_posts()) : $queryB->the_post();
                echo '<li>';
                echo '<span class="nome">';
                the_title();
                echo '</span>';
                echo '<span class="end">';
                echo get('endereco');
                echo '</span>';
                echo '<span class="tel">';
                echo get('telefone');
                echo '</span>';
                echo '</li>';
            endwhile;
        }       

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:50:39.610

我必须从您的代码中承认，我没有亲眼看到可能导致无限循环的原因，但是您可以大幅减少代码，这可能会帮助您找到错误：

```
$defaultArgs = array (
    'orderby' => 'title', 
    'order' => 'ASC', 
    'posts_per_page' => '-1',
);
$queries = array(
    array(array('category_name' => 'lojas'), NULL),
    array(array('category_name' => 'gastronomia'), 'preset-1'),
);    
$customFiledsSearch = function_exists('wp_custom_fields_search');
foreach ($queries as $query)
{
    list($args, $param) = $query;
    $wpQuery = new WP_Query($args + $defaultArgs);
    if ($wpQuery->have_posts()) 
    {
        if ($customFiledsSearch)
        {
            wp_custom_fields_search($param);
        }
        while ($wpQuery->have_posts()) : $wpQuery->the_post())
        {
            echo '<li>', 
                   '<span class="nome">',
                     the_title();
                   '</span>',
                   '<span class="end">', 
                     get('endereco'), 
                   '</span>', 
                   '<span class="tel">', 
                     get('telefone'), 
                   '</span>', 
                 '</li>';

        }
    }
} 
```

也许这可以帮助您找到错误。

# c++ - 从 C++ 使用 netlink 的最佳方法是什么？

> ID：10055483
> 
> 赞同：2
> 
> 时间：2012-04-07T14:55:18.930
> 
> 标签：c++, linux, netlink

在 C++ 中从用户空间发送和接收 netlink 消息的最佳方式是什么？我不想使用 C。我想连接 inet_diag 模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T22:53:32.703

“没有最好的，你挑最适合手头任务的。” 可能的方式：

*   NL消息的DIY构建
*   使用 libmnl 辅助构建
*   libnl3，但 API 似乎比需要的更复杂

# html - 为 BODY 设置最小宽度和高度

> ID：10055485
> 
> 赞同：1
> 
> 时间：2012-04-07T14:55:29.143
> 
> 标签：html, css

我创建了一个页面，其中一个静态图像位于浏览器的全高度（上面有一个渐变）和左侧的文本块。我希望图像随浏览器窗口调整大小，但我不希望图像位于文本后面或小于文本。当我在主体上设置最小宽度和最小高度时，例如 1024x768，这并不能解决问题。难道我做错了什么？我该怎么做呢？

提前致谢！

这是我的代码：

```
<style type="text/css">
html, body {
    height: 100%;
    width: 100%;
    padding: 0;
    margin: 0;
    min-width: 1024px;
    min-height: 768px;
}
#background-image {
    position: absolute;
    right: 0;
    top: 0; 
    height: 100%;
    background-image: url('image.jpg');
    z-index: -1;
}
#background-gradient {
    position: absolute;
    right: 0;
    top: 0; 
    z-index: 0;
    height: 100%;
}
#content {
    position: absolute;
    left: 15%;
    top: 15%;
    width: 500px;
    font-family: Georgia;
    font-size: 16px;
}
p.dropcap:first-letter {
    float: left;
    font-size: 50px;
    line-height: 30px;
    padding-top: 2px;
    padding-right: 4px;
    font-family: Georgia;
}
h1 {
    font-size: 55px;    
}
</style>
</head>

<body>
<img id="background-image" src="image.jpg" />
<img id="background-gradient" src="gradient.png" />
<div id="content">
<h1>[TITLE]</h1>
<p class="dropcap">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent nibh lectus, vehicula quis elementum nec, pellentesque vitae est. In in libero pulvinar felis ultrices varius vel at augue. Suspendisse sollicitudin risus eu mauris ultrices nec auctor neque facilisis. Pellentesque commodo tellus quam. Praesent dictum sodales nisi, id tempor neque hendrerit id. Ut non mi a ante pulvinar tempor. Morbi scelerisque metus eu sem iaculis hendrerit. Integer pulvinar ipsum quis ante tincidunt gravida.</p>
<p>Nullam vel tellus sed mauris sagittis egestas at sed lacus. Pellentesque sit amet justo felis. Donec sit amet est in urna consectetur convallis vitae id justo. Sed adipiscing accumsan augue, at cursus lorem bibendum nec. Etiam diam odio, sagittis ut tempor fermentum, elementum eu erat. Vivamus pharetra, nibh vel elementum pulvinar, risus leo ornare felis, eget tincidunt velit odio non turpis. Proin semper metus eget nisi varius varius elementum nisl eleifend. Nulla facilisi. Suspendisse urna sapien, pulvinar non porttitor pellentesque, laoreet id leo. Praesent sed tortor quis tellus eleifend ultricies et eu eros. Sed massa eros, hendrerit eu facilisis sed, fermentum sit amet purus. Nulla aliquam eleifend ante, tincidunt pulvinar dolor elementum eu. Proin quis justo in arcu sollicitudin faucibus ac tincidunt ligula.</p>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:01:01.497

将所有 HTML 代码放在`container`div 中，该 div 直接位于`body`. 然后，您可以将 CSS 代码从 body 移动到`#container`，如下所示：

```
#container {
    height: 100%;
    width: 100%;
    padding: 0;
    margin: 0;
    min-width: 1024px;
    min-height: 768px;
} 
```

IIRC 你不能设置`min-width`在身体上。不过你要小心，因为早期版本的 IE 不支持`min-width`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:08:54.143

只需 float:right 和 float:left 并添加一个边距即可让它看起来像以前的
[Demo](http://jsfiddle.net/dszh7/)

# c# - 了解 transactionscope 超时

> ID：10055491
> 
> 赞同：4
> 
> 时间：2012-04-07T14:56:03.580
> 
> 标签：c#, asp.net, sql-server-2008, transactionscope

我目前对 transactionscope 超时的理解。

如果事务运行时间超过设置的超时时间，则在调用 transaction.complete() 时会引发异常。因此，如果事务中的处理已经进行了 X 分钟，我们仍然需要等待 X 分钟，之后才会调用 transaction.complete。

在我们的例子中，我们在 web 服务中使用 transactionscope - web 请求的最终用户必须等待 X 分钟才能中止事务并且异常冒泡回来。

但是，HttpWebRequest 的默认超时为 100 秒（根据 msdn）。由于客户端在 100 秒内超时，因此我们在事务范围内的超时时间为一分钟。这确保了数据库的一致性。

我对超时的理解是否正确？

问题：我们希望最大限度地缩短最终用户了解交易结果的时间。为了最大限度地减少延迟，我们决定使用嵌套的事务范围分割代码——每个事务范围的超时时间为 15 秒。如果子事务花费的时间超过 15 秒，我们将中止整个事务。

这里似乎忽略了子事务的超时。仅在调用父事务的超时后才出现异常。在下面的代码中 ChildTransaction() 总是返回 true。最小化延迟的推荐方法是什么？**代码显示默认超时时间为 1 分钟，这样代码更清晰**

```
 internal bool RootTransaction()
    {           
        using (TransactionScope transaction = new TransactionScope())
        {
            try
            {
                bool result = ChildTransaction();

                //The result is always true. 
                if (!result)
                    return result;                                     

                for (int counter = 0;counter <= 10;counter++)
                {                       
                    //Either sleep OR do some processing 
                    System.Threading.Thread.Sleep(5000);
                    //
                    //Dosomeprocess()
                }                    
                transaction.Complete();                    
                return true;
            }
            catch (Exception e)
            {                    
                return false;
            }
        }                           
    }

    internal bool ChildTransaction()
    {            
        using (TransactionScope transaction = new TransactionScope())
        {
            try
            {
    //Sleep for 70 seconds
                System.Threading.Thread.Sleep(70000);
                transaction.Complete();                    
            }                
            catch (Exception e)
            {
                return false;
            }                
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T03:53:53.823

试着这样看：

事务的长度仅在您调用 trans.Complete() 或退出事务范围时确定。采取以下代码：

```
using (var trans= new TransactionScope())
{
Threading.Sleep(99999);
trans.Complete()
} 
```

在 sleep 例程中没有办法抛出超时异常，如果这样做是没有意义的。所以使用事务超时（至少这样）只能保证如果事务花费的时间比你的超时时间长，它就不会被提交。

如果您只是执行一个查询（我不知道您将事务用于什么目的），那么您可以设置查询/命令超时（或任何您称之为的）。IIRC，您的查询将在超时到期后立即返回。

另一种方法是设置您的 Web 服务请求超时，并假设 Web 服务响应时间过长，因为您的事务中有任何内容。

编辑：您可以尝试：

*   在另一个线程上生成您的事务，然后在您的主线程（由 web 服务调用使用的线程）上等待它完成（使用 Thread.Join(timeout)）。因此，如果它在您指定的超时之前没有终止，那么您可以停止等待并返回超时错误（不要忘记向其他线程发出信号以中止事务）。
*   假设您只在这些事务中执行 SQL 查询，您可以使用“BEGIN TRANSACTION”关键字在 sql 脚本中指定事务（确实很hacky）。然后你可以只指定命令超时并在一行代码中执行所有这些。但是，这需要您将您在事务中所做的所有事情都移动到一个 sql 脚本中，这对您来说可能是也可能是不可能的......而且它并不干净。

# android - 在 Android 2.2 中支持轮播视图

> ID：10055493
> 
> 赞同：1
> 
> 时间：2012-04-07T14:56:39.160
> 
> 标签：android, carousel

Android 2.2 是否支持轮播视图？因为我遇到的大多数示例都是针对 Android 3.0 的。

注意：我的互联网存在一些问题，这就是我无法安装 Android 2.2 并对其进行测试的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:51:05.237

不，CarouselView 需要 RenderScript，而 RenderScript 仅是 3.0+。请参阅其中一位 Android 开发人员的[答案](https://stackoverflow.com/questions/8564517/renderscript-usage)。

# android - Android 为 OverlayItem 创建子类

> ID：10055495
> 
> 赞同：0
> 
> 时间：2012-04-07T14:57:22.647
> 
> 标签：android, android-intent, subclass, overlayitem

我想将标题和片段值以外的值传递给 OverlayItem，我通过一些搜索发现为 OverlayItem 创建子类可能是解决方案。但我不知道怎么写。

VenueMapActivity.class

```
 public void drawVenue(){
        ........
        Drawable marker = getResources().getDrawable(R.drawable.mall2);
        VenueMapOverlay venuePos = new VenueMapOverlay(marker,mapView);
        String getAdd;

        StringBuilder strReturnedAddress = new StringBuilder("Address: ");
        try {
            // Getting Array data from php

            venues = json.getJSONArray(TAG_VENUE);
            GeoPoint[] mallCoords = new GeoPoint[venues.length()];
            // looping through All data
            for(int i = 0; i < venues.length(); i++){
                ....
                mallCoords[i] = new GeoPoint((int)(lat * 1E6),(int)(lng *1E6));
                List<Overlay> overlays = mapView.getOverlays();
                    // The custom of overlayItem
                OverlayItem overlayItem = new CustomItem(mallCoords[i], name, strReturnedAddress.toString(), vid);
                venuePos.addOverlay(overlayItem);
                venuePos.setCurrentLocation(currentLocation);
                overlays.add(venuePos);      
            }

        }
        catch(JSONException e){
            e.printStackTrace();
        }
}
//To allow intent when balloon is clicked
public void startCustomActivity(Context context, String tmp){
        Intent Details = new Intent(context, InfoActivity.class);
        Details.putExtra("Id", tmp);
        context.startActivity(Details);
    }
class CustomItem extends OverlayItem {

        String venueid =null;
        CustomItem(GeoPoint pt, String name, String snippet,
                   String venueid) {
          super(pt, name, snippet);
          this.venueid = venueid ;

        } 
```

VenueMapOverlay.class

```
public class VenueMapOverlay extends BalloonItemizedOverlay<OverlayItem> {

private Context mContext;
private ArrayList<OverlayItem> venues = new ArrayList<OverlayItem>();
private Location currentLocation;

public VenueMapOverlay(Drawable defaultMarker, MapView mapView) {
    super(boundCenter(defaultMarker), mapView);

    mContext = mapView.getContext();
}

@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
    return venues.get(i);
}

@Override
public int size() {
    // TODO Auto-generated method stub
    return venues.size();
}

public void addOverlay(OverlayItem overlay) {
    venues.add(overlay);
    populate();
}

public void setCurrentLocation(Location loc){
    this.currentLocation = loc;
}

public Location convertGpToLoc(GeoPoint gp){
    Location convertedLocation = new Location("");

    convertedLocation.setLatitude(gp.getLatitudeE6() / 1e6);
    convertedLocation.setLongitude(gp.getLongitudeE6() / 1e6);

    return convertedLocation;
}

@Override
protected boolean onBalloonTap(int index, OverlayItem item) {
    String tmp = venues.get(index).getTitle();      
    VenueMapActivity sub = new VenueMapActivity();
    sub.startCustomActivity(mContext, tmp);
    return true;
}
} 
```

在 OnBalloonTap 方法中，我如何获得场地 ID 的价值？
请帮帮我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:56:59.717

试试这个：

```
OverlayItem item = venues.get(index);
if(item instanceof CustomItem) {
  CustomItem cstItem = (CustomItem) item;
  String myId = cstItem.getVenueId();
} 
```

您可以编写 CustomItem 方法，例如*getVenueId()*：

```
class CustomItem extends OverlayItem {

    String venueid = null;
    CustomItem(GeoPoint pt, String name, String snippet,
               String venueid) {

      super(pt, name, snippet);
      this.venueid = venueid ;
    }

    String getVenueId()
    {
        return venueid;
    }
} 
```

# android - 安卓数据库

> ID：10055496
> 
> 赞同：0
> 
> 时间：2012-04-07T14:57:26.840
> 
> 标签：android

我正在设计一个在线考试的应用程序。我使用 SQLite 浏览器创建了一个数据库并将其拉到 Eclipse 中。在模拟器中它的工作正常；它能够检索和存储数据。但是当我将 .apk 文件放在手机上时，问题就来了。在移动设备上，它无法检索现有数据库。我无法将数据库文件与 .apk 文件一起绑定，即使将其放在 assets 文件夹中也是如此。

任何人都可以帮忙吗？

**细节：**

1.  注册模块
2.  用户测试模块（显示数据库中的问题）
3.  成绩提交模块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:14:47.987

你是如何查询数据库的？

正确的方法不是在代码中放置一个单独的数据库，而是动态创建一个。例如以下代码：

```
private static class DatabaseHelper extends SQLiteOpenHelper {
    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DB_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSql("/*Put Create Table sqls here*/");
        //onCreate will be called only once( when db doesn't exists for application, it creates here with the code)
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }
} 
```

在您的代码中使用这样的数据库助手类。

现在，每当您想查询您的数据库时，您都可以这样做：

```
 dbHelper = new DatabaseHelper(ctx);
    db = dbHelper.getWritableDatabase();
    //Start querying on db.(if it is not created oncreate() of dbhelper will create it for you. 
```

因此，只需将您的初始 db create/insert 语句放在 dbhelper 的 oncreate() 中

# ruby-on-rails - 你如何在heroku中运行“Rails Runner”？

> ID：10055499
> 
> 赞同：3
> 
> 时间：2012-04-07T14:57:36.593
> 
> 标签：ruby-on-rails, ruby, heroku

这就是我想做的事情：查找是否有人在推特上发布了有关所提供的特定课程的信息。如果有人确实发布了关于它的推文，我想将该推文保存到我的推文模型中，然后在相应的课程页面中显示该推文。

脚本通过运行在本地工作，`rails runner get_tweets.rb`但在 Heroku 上似乎脚本被执行但不写入数据库。在 heroku 我正在运行`heroku run rails runner get_tweets.rb`（使用 Cedar 堆栈）。

```
def get_course_tweets
  @courses = Course.all
  @courses.each do |course|
    url = course.url
    tweets = Twitter.search(url, {:rpp => 100, :recent => true, :show_user => true})
    tweets.each do |tweet_info|
      unless Tweet.find_by_tweet_id(tweet_info.id).present?
        tweet = Tweet.new
        tweet.course_id = course.id
        tweet.tweet_id = tweet_info.id
        tweet.tweet_text = tweet_info.text
        tweet.from_user = tweet_info.from_user
        begin
          tweet.save!
        rescue => error
          puts error
        end
      end
    end
  end
end 
```

编辑：

我从救援中得到的当前错误如下：

```
PG::Error: ERROR:  value "186306985577299969" is out of range for type integer : INSERT INTO "tweets" ("book_id", "course_id", "created_at", "from_user", "tutorial_id",     "tweet_already_exists", "tweet_id", "tweet_posted_to_reviews", "tweet_text", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T18:17:36.753

从您的错误中可以看出

> 值“186306985577299969”超出整数类型的范围

您需要使用不同的数据类型（对于`tweet_id`，我相信），大概是 a [`BIGINT`](http://www.postgresql.org/docs/9.1/static/datatype-numeric.html#DATATYPE-INT)，其范围从 -9223372036854775808 到 9223372036854775807。

要在 Rails 中执行此操作，您可以传入`:limit => 8`迁移`up`：

```
change_column :tweets, :tweet_id, :integer, :limit => 8 
```

请注意，您应该*始终*进行某种记录或报告`rescue`，否则像这样的错误会变得非常难以追踪，因为它们会悄悄地被绕过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T18:36:21.393

Twitter API 实际上为推文和用户等发送回两种类型的 ID，一种是数字，另一种是数字的字符串表示形式。这是因为他们很有可能拥有如此多的推文和用户，以至于 ID 可能在不同的实现中溢出。如果您在插入时使用 String 作为您的值，则不应再发生。

该字段称为 id_str

# android - 在 AsyncTask 之后无法提醒工作

> ID：10055500
> 
> 赞同：0
> 
> 时间：2012-04-07T14:57:39.917
> 
> 标签：android, facebook, android-asynctask

我正在使用 facebook runner 来应用一些 facebook api 测试。我想检查我是否有一个带有数据或错误消息的 JSON 对象，所以我正在检查“消息”字段以检查它是否为空。如果它不为空并且我有按摩，我想显示消息并退出应用程序。

这是我活动中的代码：

```
public class Loader extends Activity implements FacebookConnectionListener, ServerDataListener {
    private TextView loaderStatus;
    private Facebook facebook;
    private AsyncFacebookRunner facebookRunner;
    private FacebookConnection facebookConnection;   

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.loader);
        facebook = new Facebook(facebookAppId);
        facebookRunner = new AsyncFacebookRunner(facebook);
        facebookConnection = new FacebookConnection(this, 1);
        facebookRunner.request("me",facebookConnection);
    }

    @Override
    public void onFacebookResponse(final String response , int step) {
        final JSONObject facebookResults = convertToJSON(response);
        final Context thisContext = (Context) getBaseContext();
        String id = "", name = "", gender = "", homeTown = "";
        Drawable profilePicture = null;

        if (step == 1) {
            if (facebookResults.isNull("message")) {
                try {
                    id = facebookResults.getString("id");
                    name = facebookResults.getString("name");
                    gender = facebookResults.getString("gender");
                    JSONObject homeTownObject = (JSONObject) facebookResults.get("hometown");
                    homeTown = homeTownObject.getString("name");
                    profilePicture = getProfilePicture(id);

                } catch (JSONException e) { 
                    alert("Facebook", e.toString(), "Ok", thisContext);
                }
                facebookCurrentUser = new FacebookCurrentUser(id, name, gender);
                facebookCurrentUser.setHomeTown(homeTown);
                facebookCurrentUser.setProfilePicture(profilePicture);
                app.setFacebookCurrentUser(facebookCurrentUser);
                facebookConnection = new FacebookConnection(this, 2);   
                this.runOnUiThread(new Runnable() {
                public void run() {
                        loaderStatus.setText("Getting friends details");
                    }
                });
            }
            else {
                this.runOnUiThread(new Runnable() {
                    public void run() {
                        alert("Facebook", "Can't get user details! Please try again", "Ok", thisContext);
                    }
                }); 
            }           
        }

public void alert (String title, String message, String ok, Context listener)
{
    AlertDialog.Builder alert = new AlertDialog.Builder(listener);
    alert.setMessage(message);
    alert.setTitle(title);
    alert.setPositiveButton(ok, new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            finish();   
        }
    });
    alert.show();
} 
```

这是 FacebookConnection 类：

```
public class FacebookConnection implements RequestListener {
    private FacebookConnectionListener listener;
    private int step;

    public FacebookConnection (FacebookConnectionListener listener, int step) {
        this.listener = listener;
        this.step = step;
    }

    public void updateFacebookListener(String response) {
        listener.onFacebookResponse(response, step);
    }

    @Override
    public void onComplete(String response, Object state) {
        updateFacebookListener(response);           
    }

    @Override
    public void onIOException(IOException e, Object state) { }

    @Override
    public void onFileNotFoundException(FileNotFoundException e, Object state) { }

    @Override
    public void onMalformedURLException(MalformedURLException e, Object state) { }

    @Override
    public void onFacebookError(FacebookError e, Object state) { }
 } 
```

FacebookConnectionListener 接口：

```
public interface FacebookConnectionListener {
    public void onFacebookResponse(String response, int step);
} 
```

我的警报不断给我：

```
java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare() 
```

我不明白为什么..帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:32:15.623

它出现的原因是因为您试图从不同的线程更新 Ui。由于这是部分代码，我建议您将代码更改为

```
MyActivity.this.runOnUiThread(new Runnable() {
            public void run() {
                    loaderStatus.setText("Getting friends details");
                }
            }); 
```

其中 MyActivity 是您的活动名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:39:32.273

简单的方法：

你可以发布进度（东西）

并处理发布，以显示您的警报：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T18:13:42.703

好吧，试试这个：

```
public void alert (String title, String message, String ok) {
    this.runOnUiThread(new Runnable() {
        public void run() {
            AlertDialog alert = new AlertDialog.Builder(Loader.this).create();
            alert.setMessage(message);
            alert.setTitle(title);
            alert.setPositiveButton(ok, new OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    finish();
                }
            });
            alert.show();
        }
    });
} 
```

而不是你现在拥有的，当你调用它时，只需像任何其他方法一样调用它：

```
this.alert("Facebook", "Can't get user details! Please try again", "Ok") 
```

我不确定哪里出了问题，甚至可能与您在构建对话框时忘记了*create()部分有关。*

希望这会为你整理东西。

# php - PHP while循环出错了

> ID：10055501
> 
> 赞同：1
> 
> 时间：2012-04-07T14:58:17.247
> 
> 标签：php, mysql, sql

好的，所以我正在尝试制作一个简单的交易脚本，几周来我一直试图找到问题，现在我决定寻求帮助。我从数据库中选择了一些怪物以及交易信息，例如交易来自谁以及交易对象。该脚本虽然可以并说它已完成，但没有进行 2 次更新。从数据库中获取怪物然后更新那里的所有者。我有会话开始，页面顶部的 db connect 任何人都说这是问题

```
} else if ( $_POST['Submit'] == 'Complete' ) {

  //// This is the bit which does the update and does not work

  $TradeID = $_POST['id'];
  $sql12 = mysql_query( "SELECT * FROM Trades WHERE ID='$TradeID'" );
  $row12 = mysql_fetch_array( $sql12 ) or die( mysql_error() );

  $unserialize11 = unserialize( $row12['MyPokemon'] );

  foreach ( $unserialize11 as $poke222 ) {
    $sql2 = mysql_query( "SELECT * FROM user_pokemon WHERE id='$poke222'" );
    while ( $row2 = mysql_fetch_array( $sql2 ) ) {
      $Update1 = mysql_query( "UPDATE user_pokemon SET  belongsto='".$row12['Me']."' WHERE id='".$row2['ID']."'" );
    }
  }
  $unserialize12 = unserialize( $row12['OtherPokemon'] );
  foreach ( $unserialize12 as $poke122 ) {
    $sql3 = mysql_query( "SELECT * FROM user_pokemon WHERE id='$poke122'" );
    while ( $row3 = mysql_fetch_array( $sql3 ) ) {
      $Update1 = mysql_query("UPDATE user_pokemon SET   belongsto='".$row12['OtherPerson']."' WHERE id='".$row3['ID']."'" );
    }
  }

  echo "You have successfully completed trade #".$TradeID."!";
}
} else if ($_GET['action'] == 'delete'){ 
```

我刚刚剪掉了一些不起作用的代码，它很好地抓住了怪物，但只是没有进行更新，我想也许我把 }} 放在了错误的地方，或者可能有很多？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:32:34.903

清理格式后，您确实似乎有一个额外的分号，位于`if`此处显示的语句的末尾。在您的`if`陈述中，您有 5 个实例`{`和 6 个`}`. 删除最后一个`}`可能会解决您的问题。

保持代码格式良好将减少将来的故障排除问题。我已经删除了这个代码块的大部分主体以揭示问题支撑：

```
if ( $_POST['Submit'] == 'Complete' ) {
  /* Removed variable assignments */
  /* Removed foreach & while */
  /* Removed variable assignment */
  /* Removed foreach & while */
  /* Removed output */
}
} /* This brace shouldn't be here */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:53:19.273

你怎么知道你的脚本顺利通过？你没有在任何地方检查成功。按下提交按钮时，您的成功消息**总是会回显。**也许您应该通过检查受影响的行来检查是否成功。 [http://php.net/manual/en/function.mysql-affected-rows.php](http://php.net/manual/en/function.mysql-affected-rows.php)

也许您的数据库结构也需要改进。`While`在同一笔交易中两次内线`foreach`不是很有效。根据您的描述，我将使用下表：

*   `user`: 这是理所当然的...
*   `pokemon_gen`：关于不同型号的一般信息。
*   `pokemon_unique`：每个项目都应该有一个唯一的 ID。此表包含对所有者（用户）和口袋妖怪模型的 FK。最后交易日期、口袋妖怪的状况（如果这是一个买卖数据库）等信息也可以在这里（或另一个更详细的表格）。
*   `trade`**：有关单笔**交易的数据和信息。哪个口袋妖怪从谁交易给谁，什么时候交易。`pokemon_unique`为此需要FK to 。

您应该只需要数组来识别独特的口袋妖怪及其当前和未来的所有者。（不是一笔交易只需要两个所有者：当前所有者和新所有者吗？）。您只需更新表中的所有者并为（每个口袋妖怪一行）`pokemon_unique`创建一行。`trade`

也许我错过了什么。希望不会。

# jquery - 当上方图像 div 上的图像悬停时，如何更改下方标题 div 上的背景图像？

> ID：10055504
> 
> 赞同：1
> 
> 时间：2012-04-07T14:58:26.947
> 
> 标签：jquery, css, html, rollover

我有这些名为“列”的 div 块，其中每个列 div 包含单独的两个 div（顶部和底部）-一个 div 用于“图像占位符”，另一个 div 用于“标题”。现在，当我将鼠标悬停在占位符 div 上的图像上时，我希望触发操作应用于图像，然后它也会更改标题 div 上的背景图像。标题 div 在 CSS 中应用了背景图像精灵，其中“活动”状态位于 0,0 位置，“悬停状态”位于底部位置。

问题是我编写和试验的 Jquery 代码不起作用：

```
$('.products2 .thumbnail .holder .image a').bind('mouseover', function(){ $('.products2 .thumbnail .holder .caption').css("background-position", "0 -91px");}); 
```

这是 HTML 标记：

```
<div class="products2">
      <div class="thumbnail" >
           <div class="holder">
              <div class="image"><a href="?page_id=185"><img src="<?php echo get_bloginfo('template_directory'); ?>/images/embellishments-image.jpg" alt="Embellishments" width="253" height="318"/></a></div>
              <div class="caption"><a href="?page_id=185">Embellishments</a></div>
          </div>
      </div>
 </div> 
```

这是CSS：

```
.page-wrapper .products2 .thumbnail .caption{
    width:253px; height:86px; background: url(images/thumb-caption-sprite.jpg) no-repeat;
    color: #426e94; text-align: center;font-size:25px; text-decoration: none; font: 22px 'LiberationSerifRegular', Arial, sans-serif; padding-top:5px; outline: none; position: relative;z-index:2;position: absolute;display: table;

}

.page-wrapper .products2 .thumbnail .caption .hover{
    background: url(images/thumb-caption-sprite.jpg) no-repeat;
    background-position: 0 -91px;
    display:block;
    opacity: 0; z-index: -1;
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    cursor: pointer;color: #FFFFFF;text-shadow: none;
}

.page-wrapper .products2 .thumbnail .caption:hover{
    width:253px; height:86px; background: url(images/thumb-caption-sprite.jpg) no-repeat; color: #FFFFFF;
    background-position: 0 -91px;text-shadow: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:34:53.697

请注意，我完全理解你想要什么，但如果我没记错的话：

```
.image:hover + .caption
{
    background-position: 0 -91px;
} 
```

如果我错了，请提供一个小提琴。

# mysql - 现代 ER-Digram 生成器与传统图表需求

> ID：10055505
> 
> 赞同：0
> 
> 时间：2012-04-07T14:58:37.793
> 
> 标签：mysql, sql, er-diagrams

我可以对可以对`MySQL`数据库或`.sql`文件进行逆向工程的 ER 图生成器提出一些建议吗？

我知道其中很少有人，例如 MS Visio、MySQL Workbench 等，但它们以*表格*形式生成图表，而我想要具有传统*矩形*、*椭圆形*和*菱形*形状的逆向工程图。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:49:39.317

来自 MySQL 网站：[http ://www.mysql.com/downloads/workbench/](http://www.mysql.com/downloads/workbench/)

# c# - 在没有管理员权限的情况下使用“schtasks”调度任务 C#

> ID：10055516
> 
> 赞同：2
> 
> 时间：2012-04-07T15:00:20.407
> 
> 标签：c#, process, scheduled-tasks, command-line-arguments

我正在尝试使用`schtasks`而不是使用 Windows 任务计划程序 COM/托管 API 来安排我的应用程序中的任务。
通过在命令行上使用它更容易在此处创建任务，`schtasks /Create /tn "MyApp" /tr c:\myapp.exe /sc onlogon`但我以管理员身份打开命令行以创建任务（否则我会被拒绝访问）

从我的应用程序，创建我使用的任务

```
string args = @"/Create /tn MyApp /tr c:\myapp.exe /sc onlogon";
Process.Start("schtasks", args); 
```

但是，只有当我以管理员身份运行我的应用程序时，才会创建任务。我需要避免这种情况，以便任何用户都可以创建任务，而无需以管理员身份运行应用程序。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:21:38.747

您可以尝试使用一种允许以指定用户运行进程的 RunAs：

```
 ProcessStartInfo psi = new ProcessStartInfo("schtasks");
    psi.UseShellExecute = false;
    psi.UserName = "Username";
    psi.Password = "password";

    Process.Start(psi); 
```

Process 类通过 ProcessStartInfo 提供了一种机制，允许您指定新进程应在其下运行的用户上下文，因此即使启动程序的用户不同，您也可以指定要在其中运行命令的用户。在您的情况下，您可以为 ProcessStartInfo 指定管理员凭据，而无需使用管理员用户运行程序...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:15:09.453

> 为什么每次都需要用户在仅为展览目的安装的展台 PC 中中断？

如果您想要一个在 PC 启动时将在其上运行的隐藏程序，并且您的任务无害，您可以将其添加到以下注册表项：

> HKCU\Software\Windows\CurrentVersion\Run

以编程方式。如果需要，我可以提供代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T22:15:57.463

文本框的内容：“SCHTASKS.exe /Create /ST 06:30 /SC DAILY /TN report /TR notepad.exe”

我能够使用 Process.Start(ProcessStartInfo);

```
ProcessStartInfo psinfo = new ProcessStartInfo();

psinfo.Filename = "powershell.exe";
psinfo.Args = textbox1.text;

Process.Start(psinfo); 
```

**当然，这仅适用于安装了powershell的机器，使用cmd.exe无法创建计划任务...

# php - 如何使用字段 API 设置字段值？

> ID：10055518
> 
> 赞同：5
> 
> 时间：2012-04-07T15:00:34.467
> 
> 标签：php, drupal, drupal-7, drupal-field-api

我正在使用 Drupal 7 字段 API，这看起来很棒：我可以为“用户”实体类型添加自定义字段，并在 GUI 中进行编辑。

我`field_get_items($entity_type, $entity, $field)`用来获取自定义字段值。

我现在需要以编程方式设置自定义字段的值。

我怎么做？`field_set_items()`我在 Drupal API 文档的任何地方都找不到函数调用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T17:00:58.767

没有设置字段值的功能。您通常可以使用以下代码设置字段的值。

```
$entity->$fieldname[$language][$delta] = $value; 
```

每个字段的变化是您传入的数组`$value`。例如，节点的 body 字段使用以下结构。

```
array(
  'value' => 'Empty text. Revision 3.',
  'summary' => '',
  'format' => 'full_html',
  'safe_value' => '<p>Empty text. Revision 3.</p>',
  'safe_summary' => '',
); 
```

用于分类术语的结构如下。

```
array(
  'tid' => 4,
); 
```

`$delta`是一个通常为 0 的值，但对于具有多个值的字段，它可以有任何值，只要它不高于它可以获得的最大值数（可以在用户界面中为特定字段设置） .
`$language`是语言ID，也可以设置为`LANGUAGE_NONE`。

# javascript - 防止没有href的链接点击

> ID：10055519
> 
> 赞同：0
> 
> 时间：2012-04-07T15:00:34.927
> 
> 标签：javascript, jquery

> **可能重复：** [如何使用 jQuery 启用或禁用锚点？](https://stackoverflow.com/questions/1164635/how-to-enable-or-disable-an-anchor-using-jquery)

我有这个：

```
<a onclick="javascript:btnSave_onclick();" class="button">Save</a> 
```

基本上，链接就像一个按钮。

但是，在某些情况下我需要禁用它。这个怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-07T15:04:59.530

你有什么理由不只是使用按钮吗？在这种情况下，您可以使用

```
document.getElementById('button').disabled = true; 
```

您还必须为按钮设置一个 id

# javascript - 窗口的封闭属性？

> ID：10055527
> 
> 赞同：1
> 
> 时间：2012-04-07T15:01:40.113
> 
> 标签：javascript, dom

窗口的关闭属性有什么用？

默认关闭是假的。

```
window.closed
false 
```

我观察到closed可以设置为true，但是closed=true有什么意义呢？

```
window.closed = true
true 
```

在此窗口保持打开后。与 chrome 和 firefox 的行为相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T15:04:24.130

[`window.closed`](https://developer.mozilla.org/en/DOM/window.closed)指的是一个窗口的实例。它是一个只读属性，用于确定打开的弹出/选项卡/窗口是否仍然存在。

```
var w = window.open();
console.log(w.closed);  // false
w.closed = true;
console.log(w.closed);  // false
w.close();
console.log(w.closed);  // true 
```

它是真正的只读：

```
'use strict';
window.closed = false; // TypeError: setting a property that has only a getter 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T15:05:04.573

如果您有弹出窗口并希望在修改它们的属性之前检查它们的存在，这将很有用。MDN 有几个很好的例子 [https://developer.mozilla.org/en/DOM/window.closed?action=edit](https://developer.mozilla.org/en/DOM/window.closed?action=edit)

# python - python RegOpenKeyEx() HKEY_LOCAL_MACHINE 未定义错误

> ID：10055529
> 
> 赞同：0
> 
> 时间：2012-04-07T15:02:19.077
> 
> 标签：python, python-2.7, pywin32

我一直在尝试使用 win32api 模块从 python 操作注册表项，但是当我运行这三行代码时

```
import win32api
import win32con

reghandle = win32api.RegOpenKeyEx(HKEY_LOCAL_MACHINE,"SOFTWARE\\Google\\",0,       win32con.KEY_READ) 
```

它给了我以下错误

回溯（最近一次调用最后）：文件“C:\EclipseWorkspaces\csse120\MMS-auto\key.py”，第 4 行，在 reghandle = win32api.RegOpenKeyEx(HKEY_LOCAL_MACHINE,"SOFTWARE\Google\",0, win32con.KEY_READ ) NameError: 名称 'HKEY_LOCAL_MACHINE' 未定义

我查看了win32api文档，我认为我给了函数正确的论点......有人可以帮忙或给我任何提示吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:06:32.700

`HKEY_LOCAL_MACHINE`是`win32con`模块中定义的常量。您需要使用完全限定名称。试试这个：

```
reghandle = win32api.RegOpenKeyEx(win32con.HKEY_LOCAL_MACHINE,"SOFTWARE\\Google\\",0,win32con.KEY_READ) 
```

# django - “选择字段作为 x ...”与 Django ORM

> ID：10055532
> 
> 赞同：7
> 
> 时间：2012-04-07T15:02:27.937
> 
> 标签：django, orm

是否可以将 AS sql 语句与 Django ORM 一起使用：

`SELECT my_field AS something_shiny WHERE my_condition = 1`

如果有可能那怎么办？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-07-08T10:38:36.400

到目前为止，Django 文档说应该[使用 extra 作为最后的手段](http://django.readthedocs.io/en/1.9.x/ref/models/querysets.html#django.db.models.query.QuerySet.extra)。

因此，这是执行此查询的更好方法：

```
from django.db.models import F
Foo.objects.filter(cond=1).annotate(sth_shiny=F('my_field')) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T15:07:38.167

使用[额外的（）](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#django.db.models.query.QuerySet.extra)

```
Foo.objects.filter(cond=1).extra(select={'sth_shiny':'my_field'}) 
```

然后您可以访问`sth_shiny`结果 Foo 实例的 attr

# vba - SQLBulkCopy.WriteToServer DataTable 将部分数据写入表的方式？

> ID：10055533
> 
> 赞同：2
> 
> 时间：2012-04-07T15:02:45.197
> 
> 标签：vba, datatable

我在 DataTable 中有 12,000 行，它在尝试 WriteToServer 时超时。有没有一种方法可以一次将 DataTable 的一部分写入数据库，而不是一次全部写入？目前，我的数据库的 Internet 连接不佳。如果我一次只能写 500 行，我可以避免超时。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:09:08.840

你应该看看`SqlBulkCopy.BatchSize`

> 当 BatchSize 行已处理或没有更多行要发送到目标数据源时，批处理完成。
> 
> 零（默认值）表示每个 WriteToServer 操作都是一个批处理。
> 
> 如果已声明 SqlBulkCopy 实例而没有有效的 UseInternalTransaction 选项，则一次将行发送到服务器 BatchSize 行，但不执行与事务相关的操作。如果 UseInternalTransaction 有效，则每批行都作为单独的事务插入。
> 
> BatchSize 属性可以随时设置。如果批量复制已在进行中，则当前批次的大小将根据之前的批次大小进行调整。后续批次使用新大小。如果 BatchSize 最初为零并在 WriteToServer 操作已在进行时发生更改，则该操作将数据作为单个批次加载。同一 SqlBulkCopy 实例上的任何后续 WriteToServer 操作都使用新的 BatchSize。

参考[这里](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.batchsize.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-23T20:02:53.060

我有同样的问题，我只是这样解决它：

```
Dim strConnection as string="myconnectionstring"
Dim sqlBulk As New SqlBulkCopy(strConnection)
sqlBulk.BulkCopyTimeout = 0 
```

# python - IplImage 内的 IplImage

> ID：10055535
> 
> 赞同：0
> 
> 时间：2012-04-07T15:03:20.903
> 
> 标签：python, c, opencv, javacv

是否可以使用 OpenCv (JavaCv) 将图像放置在图像中。例如，我有一个 1000x1000 的图像和一个 100x100 的图像。在 600x600 位置，我想将较小的图像放在较大的图像中。

假设蓝色框是 1000x1000 IplImage，红色框是 100x100 IplImage。能不能把红盒子放在蓝盒子里。最好是计算效率很高，因为它必须实时工作。

![在此处输入图像描述](../Images/cc2090fda527d5b0a50ad57187d5bc13.png)

提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T15:45:19.247

这是在 Python 中，但转换为 Java 将非常容易。使用`GetSubRect()`和`Copy()`。`GetSubRect()`返回一个感兴趣的矩形子数组（指定左上角的兴趣点，以及宽度和高度）。然后只需使用 . 复制图像即可`Copy()`。

```
import cv
blue = cv.LoadImage("blue.jpg")
red = cv.LoadImage("red.jpg")

sub = cv.GetSubRect(blue, (100, 100, 50, 50))
cv.Copy(red,sub)

cv.ShowImage('blue_red', blue)
cv.WaitKey(0) 
```

或者，正如 karlphillip 建议的那样，您可以使用 指定“感兴趣的区域” `SetImageROI()`，并做同样的事情：

```
cv.SetImageROI(blue,(100,100,50,50))
cv.Copy(red, blue)
cv.ResetImageROI(blue) 
```

重置 ROI 非常重要`ResetImageROI`，否则您将只显示/保存 ROI，而不是整个图像。

演示输出：

蓝色：![在此处输入图像描述](../Images/320cb8c5457f86b0d984ac45fbc5759b.png)红色：![在此处输入图像描述](../Images/d9de6f8ffc00abc1f5fafbab5502b8fd.png)组合：![在此处输入图像描述](../Images/1af98b00aeb18503638bf6493bfd96c8.png)

# c# - 从其他实例化类访问和修改的公共静态变量，无需使用 getter 或 setter

> ID：10055536
> 
> 赞同：2
> 
> 时间：2012-04-07T15:03:28.737
> 
> 标签：c#, xna

我一直在关注如何在 C# + XNA 中编写基本的平铺地图编辑器的教程，并且我对所使用的编码实践有疑问。主 Game 类包含许多公共静态变量，然后可以从其他实例化类访问和修改这些变量，而无需使用 getter 或 setter。这是不好的编码习惯吗？教程链接：[http ://www.youtube.com/watch?v=Tbs5EA-9Zfg](http://www.youtube.com/watch?v=Tbs5EA-9Zfg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T15:08:28.937

我不会为了查看有问题的代码而观看一堆视频，但如果这些是可变类型，那么我肯定会说这是一般编码中的不良做法。静态变量最终使单元测试变得更加困难，并且由于所有全局状态，您的代码更难以推理。根据我的经验， UI 代码*经常*违反最佳原则——我确信它不必这样做*，*而 MVVM 在这方面为 WPF/Silverlight 提供了帮助。我会尝试使用您在其他环境中习惯的最佳实践来编写代码，但请记住可能与某些 XNA 应用程序相关的任何性能影响。

如果公共静态变量是有效的*常量*（不可变类型的只读变量），那么我对它没有太大问题 - 尽管如果类型初始化程序最终变得复杂，您可以获得类型初始化程序循环，这可能是一场*噩梦*调试。我*刚刚*写完[一篇关于那个主题的博](http://msmvps.com/blogs/jon_skeet/archive/2012/04/07/type-initializer-circular-dependencies.aspx)文。即使变量是私有的并通过属性访问，您也可能会遇到同样的问题，尽管在这种情况下您可以更轻松地更改时间。

# python - Django 更改默认对象管理器

> ID：10055537
> 
> 赞同：2
> 
> 时间：2012-04-07T15:03:37.620
> 
> 标签：python, django

有没有办法更改所有模型的默认对象管理器？（这将包括第三方应用程序上的对象管理器）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:24:55.540

默认管理器附加在函数`ensure_default_manager`中`django.db.models.manager`。默认情况下，它附加一个类管理器`Manager`。您可以对该函数进行monkeypatch 以附加不同的（子类）`Manager`。

但是您必须考虑这是否是您要解决的问题的最理想解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T20:00:53.470

如果您真的需要这样做，请修改 django 代码本身。猴子修补也是一种选择，有很多技术可以解决这个问题。

# ios - NSDate 和 SQLite3

> ID：10055540
> 
> 赞同：2
> 
> 时间：2012-04-07T15:04:25.300
> 
> 标签：ios, sqlite, nsdate

我的应用程序遇到了一个非常烦人的问题。让我们在名为“daily”的表中有一个 sqlite3 数据库和一个 datetime 列。

```
- (BOOL)eatQuantity:(NSNumber *)quantity date:(NSDate *)date
{
    User *usr = [User loadCurrentUser];

    BOOL ret;
    sqlite3 *db;

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSString *strDate = [dateFormatter stringFromDate:date];
    [dateFormatter release];

    NSString *query = [NSString stringWithFormat:@"INSERT INTO daily (id_user, id_food, quantity, date) VALUES (%d, %d, %f, '%@')", usr.idPk.intValue, self.idPk.intValue, quantity.floatValue, strDate];
    NSLog(@"Query: %@", query); 
```

当我调用此方法从 UIDatePicker 传递 NSDate 对象时，一些用户正面临 NSDate 的奇怪行为，他们将其记录在控制台上：

查询：INSERT INTO daily (id_user, id_food, quantity, date) VALUES (1, 1010, 130.000000, '2011-12-21 01:20:09 m.')

但是 sqlite3 无法存储日期是一种类似以“m”结尾的格式。细绳。由于 WHERE 子句中的日期为空，用户无法查看任何记录。

所以那个“m”在哪里。来自？这是什么意思？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:11:31.960

不要使用 NSDateFormatter 它会大大降低你的应用程序的速度。

您应该使用 unix 时间戳 (1970)。像这样`sqlite3_bind_double(statement, index, [dateObject timeIntervalSince1970]);`

检索：

```
[NSDate dateWithTimeIntervalSince1970:doubleValueFromDatabase]; 
```

# ruby-on-rails - Rails 301 重定向

> ID：10055545
> 
> 赞同：23
> 
> 时间：2012-04-07T15:04:38.127
> 
> 标签：ruby-on-rails, redirect, seo, http-status-code-301

我想将多个条目重定向到我的登录页面到一个 URL。

以下 url`http://mysite.com`和`http://www.mysite.com`将重定向到`http://www.mysite.com/`使用 301 重定向。如何/应该在 Rails 中做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-12-21T20:36:15.173

在 Rails 中使用 301 重定向

```
class RedirectController < ApplicationController
  def index
    redirect_to :root, :status => :moved_permanently
  end
end 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-07T16:14:13.030

我没有尝试过，但是这样的东西应该可以工作：

```
class ApplicationController < ActionController::Base
  before_filter :correct_domain!

  private
  def correct_domain!
    unless request.host == 'www.mysite.com'
      redirect_to root_url, :status => 301  # or explicitly 'http://www.mysite.com/'
    end
  end
end 
```

但我不确定主机属性中是否存在斜杠...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T22:02:45.223

我使用了这篇[文章](http://bluediapente.com/posts/2012/02/10/how-to-do-www-to-non-www-301-redirect-on-your-heroku-rails-app)并决定使用非 www url 进行重定向。

# php - 使用 php 将信息添加到数据库

> ID：10055546
> 
> 赞同：0
> 
> 时间：2012-04-07T15:04:41.047
> 
> 标签：php, sql, database

嗨，那里有一个使用数据库的小项目（对它们没有太多经验）。我正在使用 mySQL 和 php，在使用 php 并将信息从 HTML 表单发布到数据库时遇到了一些问题。

这是代码：

```
<?php
$host=""; // Host name 
$username=""; // Mysql username 
$password=""; // Mysql password 
$db_name=""; // Database name 
$tbl_name="tags"; // Table name

// Connect to server and select database.  
mysql_connect("$host", "$username", "$password")or die("cannot connect");   
mysql_select_db("$db_name")or die("cannot select DB");

// get data that sent from form 
$s_name=$_GET['name'];
$s_system=$_GET['system'];
$s_cate=$_GET['cate'];

$sql="INSERT INTO $tbl_name(name,system,cate)VALUES('$s_name', '$s_system', '$s_cate')";
$result=mysql_query($sql);

if($result){
echo "Successful<BR>";
echo "<a href=mainforum.php>View your topic</a>";
}
else {
echo "ERROR";
}
mysql_close();
?> 
```

如果有人可以帮助向我解释我做错了什么，将不胜感激。

谢谢

这是我正在尝试做的事情的链接：

[http://socialsoftware.purchase.edu/roger-p.king/database2/enter_gamertag.html](http://socialsoftware.purchase.edu/roger-p.king/database2/enter_gamertag.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:11:33.053

你应该使用 $_POST['variable']，而不是 $_GET

因为 $_GET 是链接上的变量数组

如“http://example.com/?var=123”，$_GET['var'] 的值为 123

表单中的变量可以通过 $_POST['var'] 或 $_REQUEST['var']

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:45:43.737

`$query = mysql_query("INSERT INTO '$tbl_name'(name,system,cate)VALUES('$s_name', '$s_system', '$s_cate')";`

应该这样做，或者如果您按照自己的方式分两行，

`$sql="INSERT INTO '$tbl_name'(name,system,cate)VALUES('$s_name', '$s_system', '$s_cate')";`

`$result=mysql_query($sql);`

# ruby - 如何访问此变量？

> ID：10055552
> 
> 赞同：0
> 
> 时间：2012-04-07T15:05:18.830
> 
> 标签：ruby, scope

```
class Player
  def getsaves
    print "Saves: "
    saves = gets
  end
  def initialize(saves, era, holds, strikeouts, whip)
  end
end 
```

我有上面的代码......可以说我然后写。

```
j = Player.new(30, 30, 30, 30, 30) 
```

当我在类范围之外时，我想访问 saves 变量，`getsaves` 我该怎么做？：

```
puts saves variable that is inside getsaves 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:09:41.467

正如您所写的那样，不仅无法从类范围之外访问变量，而且在*方法**结束时*`saves`它超出了范围。*`getsaves`*

你应该这样做：

```
class Player
  def getsaves
    print "Saves: "
    @saves = gets # use an instance variable to store the value
  end
  attr_reader :saves # allow external access to the @saves variable
  def initialize(saves, era, holds, strikeouts, whip)
  end
end 
```

现在您可以简单地使用`j.saves`来访问`@saves`变量。

# php - 为什么这个正则表达式捕获会产生 2 个匹配项？

> ID：10055553
> 
> 赞同：3
> 
> 时间：2012-04-07T15:05:43.593
> 
> 标签：php, regex, preg-match, php-5.3

我不知道为什么除了使用此正则表达式的输入之外还有 2 个匹配项，而我预计只有 1 个匹配项。

```
preg_match(/_(\d(-\d){0,3})\./,$str,$matches); 
```

关于这个文件的字符串格式`name_A-B-C-D.ext`。

我希望得到这样的单场比赛：

```
Example A
[0] => name_A-B-C-D.ext  
[1] => A-B-C-D

Example B
[0] => name_A-B-C.ext  
[1] => A-B-C 
```

但这是我得到的结果：

```
Example A
[0] => name_A-B-C-D.ext  
[1] => A-B-C-D
[2] => -D

Example B
[0] => name_A-B-C.ext  
[1] => A-B-C
[2] => -C 
```

我只希望捕获`A`它`D`是否以连字符开头。这段代码是可用的，我可以简单地忽略第二场比赛，但我想知道它为什么在那里。我只能假设它与我的两个捕获组有关。我的错误在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T15:08:38.673

是的，您得到两个捕获，因为您的正则表达式中有两个捕获组。

为避免不必要的捕获，您可以使用非捕获组`(?:...)`：

```
/_(\d(?:-\d){0,3})\./ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T15:09:52.693

> 我只能假设它与我的两个捕获组有关。

你的假设是正确的

> 我的错误在哪里？

没有错误，一切都按预期运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T15:08:19.090

你必须在你的 RE 中分组，所以你得到 2 场比赛。有什么令人惊讶的？每对括号是一个组。

# ruby-on-rails - Ruby on Rails，将图像从一个对象传递到另一个对象或从 NEW 传递到 CREATE

> ID：10055555
> 
> 赞同：1
> 
> 时间：2012-04-07T15:05:55.663
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, carrierwave

我对 Ruby on Rails 很陌生。

我改变了这个线程，因为我意识到我在错误的一端寻找我的问题的解决方案。

这是我的问题：

我得到了一个 Class **ProfileProposal**，我用（使用 CarrierWave）上传了一个图像。现在我想将**ProfileProposal**转换为另一个名为**Profile**的类。所以我将所有信息传递给**Profile**的 NEW-Form 。

适用于字符串，但不适用于图像。

**我已经尝试过/做过的事情：**

将图像作为 GET 参数传递给 Create 方法：

```
<%= form_for @profile, :url => { :action => "create", :controller => "profiles", :image => @profile_proposal.image } do |f| %>

# 
```

现在可以使用，所以我确实有图像网址。

什么不工作是以下：

```
@profile = Profile.new(params[:profile], :image => new_image_url)
# OR
@profile.image = new_image_url 
```

@profile.image 仍然具有 Carrierwave 给出的默认值。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:33:32.230

我来自使用回形针，而不是载波，所以我会尽量保持这个高水平。但我有一个想法给你。也许您可以在新附件存在之前设置它的文件名，然后将图像移动到该路径。使用回形针，效果如下：

```
@profile.image_file_name = "profile.jpg"
# creates the directory of the new path.  There's probably a better way to do this:
FileUtils.mkdir_p @profile.image_file_path.gsub(/[^\/]*$/,'')
FileUtils.mv @profile_proposal.image_path @profile.image_path 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:23:55.817

`Profile`您应该在该表单中嵌入一个隐藏字段，`ProfileProposal`通过某个 ID 引用。然后在处理表单服务器端时，在所有内容都经过验证并准备好保存后，您应该使用一些读/写方法从`ProfileProposal`一个实例复制到`Profile`另一个实例。我不确定 CarrierWave 希望您如何做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:39:10.753

我终于解决了这个问题，通过使用回形针并通过创建一个新实例

```
Profile.create(:name => @profile_proposal.name, :image => @profile_proposal.image) 
```

# c++ - Visual C++ 2010 释放数组指针很慢

> ID：10055557
> 
> 赞同：0
> 
> 时间：2012-04-07T15:05:59.143
> 
> 标签：c++, memory-management, heap-memory

在我的应用程序结束时，我只需调用以下命令进行清理。

```
delete [] array1;
delete [] array2;
delete [] array3;
delete [] array4;
delete [] array5;
delete [] array6;
delete [] array7;
delete [] array8;
delete [] array9;
delete [] array10;
delete [] array11;
delete [] array12;
delete [] array13; 
```

13 个指向堆上数组的指针。在调试模式下它需要一个绝对的**时间**......比如 3-5 分钟，它实际上应该是瞬时的。是什么赋予了？

更新：我假设我正在删除一个 C 风格的结构数组（即只有基元和指针的结构），但是其中两个数组中有 hash_maps，这需要花费大量时间来清理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:20:17.353

如果数组包含带有析构函数的对象，则 delete[] 调用每个析构函数。

如果数组很大，则可能必须先从虚拟内存中换入对象，然后才能调用它们的析构函数。

根据您的配置，delete[] 可能会检查数组的边界区域，以查看您是否进行了任何越界写入。

一般来说，您应该完全忽略调试模式下的执行时间，但我理解为什么您会想知道它需要 3-5 分钟才能释放您的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:14:42.277

有几件事可能会发生。尝试在程序运行缓慢的情况下暂停程序几次，然后查看调试器中堆栈上的内容。

回想一下，无论元素类型是数组的析构函数，都会为每个元素调用一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T17:50:32.070

如果您担心性能，请在分析器中运行您的代码。不谈论分析器就不能谈论性能**。**

# php - 将两个mysql查询连接在一起

> ID：10055559
> 
> 赞同：0
> 
> 时间：2012-04-07T15:06:30.857
> 
> 标签：php, mysql

我有以下两个查询，我想在一个查询中得到。我尝试了但无法实现，请您帮帮我好吗？

提前致谢 ：）

查询：1

```
" SELECT * FROM vouchers 
LEFT JOIN details on vouchers.voucher_no = details.voucher_no 
LEFT JOIN   accounts on accounts.code = details.t_code 
     WHERE (voucher_type='1' AND account_code='1001')
        OR (voucher_type='0' AND t_code='1001')
        OR (voucher_type='0' AND account_code='1001')" 
```

查询：2

```
"SELECT * FROM details 
LEFT JOIN vouchers on details.voucher_no = vouchers.voucher_no 
LEFT JOIN accounts on accounts.code = vouchers.account_code 
    WHERE (voucher_type='1' AND account_code='1001') 
       OR (voucher_type='0' AND t_code='1001') 
       OR (voucher_type='0' AND account_code='1001')" 
```

我尝试了以下内容，但收到一条错误消息，提示我在 SQL 语法中有错误。

```
 $getData = $this->db->query("SELECT * FROM vouchers 
 LEFT JOIN details on vouchers.voucher_no = details.voucher_no 
 LEFT JOIN   accounts on accounts.code = details.t_code 
     WHERE (voucher_type='1' AND account_code='1001')
        OR (voucher_type='0' AND t_code='1001')
        OR (voucher_type='0' AND account_code='1001'), <<I just separated with a comma

SELECT * FROM details 
LEFT JOIN vouchers on details.voucher_no = vouchers.voucher_no 
LEFT JOIN accounts on accounts.code = vouchers.account_code 
    WHERE (voucher_type='1' AND account_code='1001') 
       OR (voucher_type='0' AND t_code='1001') 
       OR (voucher_type='0' AND account_code='1001')");

if($getData->num_rows() > 0)
return $getData->result_array();
else
return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:09:11.057

用 UNION ALL 连接它们

```
 $getData = $this->db->query("SELECT * FROM vouchers 
 LEFT JOIN details on vouchers.voucher_no = details.voucher_no 
 LEFT JOIN   accounts on accounts.code = details.t_code 
     WHERE (voucher_type='1' AND account_code='1001')
        OR (voucher_type='0' AND t_code='1001')
        OR (voucher_type='0' AND account_code='1001')

UNION ALL

SELECT * FROM details 
LEFT JOIN vouchers on details.voucher_no = vouchers.voucher_no 
LEFT JOIN accounts on accounts.code = vouchers.account_code 
    WHERE (voucher_type='1' AND account_code='1001') 
       OR (voucher_type='0' AND t_code='1001') 
       OR (voucher_type='0' AND account_code='1001')"); 
```

# html - Rails 3 和 rspec - 从选择列表中选择

> ID：10055561
> 
> 赞同：6
> 
> 时间：2012-04-07T15:06:37.087
> 
> 标签：html, ruby-on-rails-3, rspec, ruby-on-rails-3.2, selectlist

我想从**RSpec**的选择列表中选择值。例如我有这样的数据：

```
<div class="control-group">
 <label class="control-label" for="user_teacher_leader_attributes_teacher_id">Teacher names</label>
  <div class="controls">
   <select id="user_teacher_leader_attributes_teacher_id" name="user[teacher_leader_attributes][teacher_id]">
    <option value="1" selected="selected">Math teacher</option>
    <option value="2">Physics teacher</option>       
  </div>
</div> 
```

我想`Physics teacher`通过**RSpec**选择选项。我怎样才能做到这一点？另外，我可以按值从列表中选择一些东西（例如，`Physics teacher`按它具有的值“2”选择）吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-07T16:46:35.323

我找到了解决方案。您应该使用**select**方法：

```
select "Physics teacher", :from => "teacher_leader[teacher_id]" 
```

# atl - 如何使用 ATL 从 CSpDynamicString 转换为 `char *`？

> ID：10055563
> 
> 赞同：1
> 
> 时间：2012-04-07T15:06:45.963
> 
> 标签：atl, text-to-speech, sapi

我正在编写一个使用 SAPI 5 的自定义文本转语音程序，我面临的一个问题是枚举声音`SpEnumTokens`并对其进行迭代会产生`CSpDynamicString`对象。

我的问题是，我如何转换`CSpDynamicString`成`char *`这样我可以`printf`他们？

看起来我必须使用 ATL 中的某种文本转换宏。我找到了一个这样做的例子（给定`dstrDesc`的是`CSpDynamicString`）：

```
CSpDynamicString dstrDesc;
SpGetDescription(voiceToken, &dstrDesc);

USES_CONVERSION;

printf("%s\n", W2T(dstrDesc)); 
```

然而，这只会打印语音名称的第一个字符！

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T04:54:53.730

`CSpDynamicString`实现一个操作符来转换`WCHAR*`并在`LPWSTR`内部管理指针。所以，`W2T`让你`LPTSTR`指针作为`printf`参数。如果你有一个 Unicode 版本，这仍然是一个`WCHAR*`指针和`printf("%s"...`期望`CHAR*`参数的结果 - 这是你可能遇到你所描述的问题的地方。

试试这种方式：

```
CSpDynamicString dstrDesc;
SpGetDescription(voiceToken, &dstrDesc);
printf("%ls\n", (WCHAR*) dstrDesc); 
```

# asp.net-mvc - ASP.NET MVC 3 - 检测多个页面上的多个复选框是否脏

> ID：10055566
> 
> 赞同：1
> 
> 时间：2012-04-07T15:07:12.853
> 
> 标签：asp.net-mvc

我正在使用 ASP.NET MVC 3。

我有一长串项目，我想将它们显示给用户，每个项目旁边都有一个复选框，表示该项目是打开还是关闭。因为项目很多，所以项目使用分页显示。

加载页面时，如果该项目处于打开状态，则会选中一个复选框。用户可以翻阅项目，选中/取消选中复选框。

我只想在项目状态发生变化时启用提交按钮。当用户翻阅列表并进行更改时，检测项目列表是否处于脏状态的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:18:49.410

根据您是为滚动还是 ajax 进行页面刷新，您将如何做到这一点会有所不同。

如果您只是使用新页面信息重新加载页面，那么您将需要某种状态来跟踪先前选择的项目。这可以在 Session 或临时表中完成。临时表可以在会话重置后继续存在，并且可以在服务器场方案中工作。

无论如何，您的页面在复选框单击时回发，或者您在下一页上发布（在任何一种情况下，您都想做一个[post-redirect-get 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)）。当页面刷新时，您需要返回集合是否脏的指示，并启用提交按钮。

请注意，用户可能会在选择过程中走开，半小时后回来。如果他们的登录仍然有效，并且您使用 session，则 session 可能已被回收。

如果您正在使用 Ajax，那么您需要保留一个正在运行的更改列表，以便如果用户稍后取消选择它们，您可以再次禁用提交按钮。您可以将此列表保存在隐藏字段中，然后将每个复选框发布到临时表中，或者您可以将运行总计保持在隐藏状态并在调用提交时应用更改。您的隐藏字段可能包含您已更改的 id 列表（选中或未选中）。当该字段为空时，禁用该按钮，如果不是，则启用它。

# performance - Ember 0.9.6 性能更新 - 重要吗？

> ID：10055579
> 
> 赞同：3
> 
> 时间：2012-04-07T15:08:30.560
> 
> 标签：performance, binding, ember.js

与竞争对手相比，我很自然地被 Ember 出色的 API/设计/语法所吸引，但看到性能明显更差感到非常难过。（例如，参见现在众所周知的[http://jsfiddle.net/samdelagarza/ntMdB/167/](http://jsfiddle.net/samdelagarza/ntMdB/167/)。）我的眼睛告诉我至少比 Chrome 中的 Backbone 慢 4 倍。

EmberJS 0.9.6 版显然有许多性能修复，特别是在绑定和渲染方面。然而，在使用此版本的 Ember 时，上述基准测试仍然表现不佳。

我认为上述基准证明了一个框架的绑定成本。我来自 Flex，绑定执行得足够好，您不必不断地考虑您想要使用的每个渲染器的这 5 个绑定（乘以可能 20 个渲染器）是否不会造成太大的开销。易用性很好，但前提是保持足够好的性能。（更是如此，因为 HTML5 也经常针对移动设备）。

就目前而言，我倾向于认为 Ember 的美与它的一些竞争对手相比不值得性能损失，因为我们在这里谈论的是具有许多绑定的大型应用程序，否则你一开始就不需要这样的框架. 我可以忍受 Ember 的表现稍差一些。毕竟它带来了更多的东西。

所以我的问题相当笼统和开放：

*   基准测试的 Ember 部分是否写得足够好，以显示真正的问题？
*   0.9.6 的性能更新可能非常低调吗？
*   主要贡献者是否确定了表现不佳的领域？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T21:46:01.193

这实际上并不是绑定变慢的问题，而是进行了不必要的 DOM 更新。我们一直在对这个特定问题进行一些调查，并且我们对如何将这些多个操作合并为一个有一些想法，所以我确实希望这在未来会有所改善。

也就是说，我看不出这是一个现实的基准。我永远不会推荐在 Ember 中（或使用 Backbone，就此而言）制作重动画。在标准应用程序开发中，您永远不必以该频率同时更新那么多不同的视图。

如果您能指出普通应用程序中的慢速区域，我们将非常乐意进行调查。性能是我们非常关心的问题，如果在正常运行期间事情真的很慢，我们会认为这是一个错误。但是，就像我说的那样，高性能绑定驱动的动画不是我们的目标之一，我也不知道它是为谁服务的。Ember 通常与其他库配合得很好，因此应该可以插入动画库以在 Ember 之外执行动画。

# objective-c - 将 Sonar 与 Objective-C 语言定义一起使用

> ID：10055582
> 
> 赞同：3
> 
> 时间：2012-04-07T15:08:48.210
> 
> 标签：objective-c, sonarqube

我发现一篇[博客文章](http://deadmeta4.com/2011/05/17/objective-c-copy-paste-detection-using-jenkins/)描述了如何在 Objective-C 项目中使用 CPD。作者还[为 ObjectiveC 提供了一个 CPD 语言库](https://github.com/jkennedy1980/Objective-C-CPD-Language/)。不幸的是，Jenkins 中的 Violations 插件提供的 GUI 相当丑陋。Sonar 使用的可视化在分析代码时更有帮助。

以下命令用于生成相应的 CPD 输出：

```
java
-Xmx512m
-classpath pmd-4.2.5.jar:ObjCLanguage-0.0.6-SNAPSHOT.jar
net.sourceforge.pmd.cpd.CPD
--minimum-tokens 100
--files [Path to XCode project classes]
--language ObjectiveC
--encoding UTF-8
--format net.sourceforge.pmd.cpd.XMLRenderer > cpd-output.xml 
```

据我所知，项目语言可以在 Jenkins 的 Sonar 插件配置中进行配置。但是我怎样才能告诉 Sonar 使用这个`ObjCLanguage`库呢？我只需要它来检测 Sonar 的代码重复和可视化（因为它更漂亮）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T15:15:22.837

如果您想在 Sonar 中获得分析结果，您需要安装一个支持该语言的 Sonar 插件。然而，目前还没有针对 Objective-C 的插件，所以你将无法获得你想要实现的目标……除非你开发了这个插件！;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T12:02:00.217

声纳的 Objective-C 插件似乎正在进行中。您可以在[https://github.com/fhelg/sonar-objective-c找到它](https://github.com/fhelg/sonar-objective-c)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-17T17:19:21.160

我还看到了另一个用于声纳的 Objective-C 插件： [https ://github.com/octo-technology/sonar-objective-c](https://github.com/octo-technology/sonar-objective-c)

# google-search - 通过图像文件搜索谷歌图像（不是 URL，来自 Endcorded 代码）

> ID：10055588
> 
> 赞同：0
> 
> 时间：2012-04-07T15:09:27.500
> 
> 标签：google-search, google-image-search

也许，您知道通过本地图像文件搜索 google 图像 ..

但是，Google 不支持仅关于文件搜索的 API。

只支持 URL 或文本搜索 API。

所以我尝试使用这样的 URL：( Text = stackoverflow )

[https://www.google.co.kr/search?tbm=isch&hl=ko&source=hp&biw=1680&bih=922&q=image&gbv=2&oq=image&aq=f&aqi=g10&aql=&gs_l=img.3..0l10.2610l4751l0l4994l6l6l0l0l.0l0l143lr30l0l0l143lr5gl HL = KO＆newwindow = 1＆GBV = 2＆TBM = isch＆SA = 1＆q =](https://www.google.co.kr/search?tbm=isch&hl=ko&source=hp&biw=1680&bih=922&q=image&gbv=2&oq=image&aq=f&aqi=g10&aql=&gs_l=img.3..0l10.2610l4751l0l4994l6l6l0l0l0l0l143l530l0j4l4l0.frgbld.#hl=ko&newwindow=1&gbv=2&tbm=isch&sa=1&q=)计算器和OQ =计算器＆水溶液= F＆AQI = G1G-S9＆AQL =＆ **gs_l** = img.3..0j0i24l9.36861l38876l0l39043l13l13l0l4l4l0l355l1319l0j6j0j1l7l0.frgbld。＆PBX = 1＆BAV = on.2，**or.r_gc.r_pw** .r_cp.r_qf.,cf.osb&fp=f4b31218673e39ba&biw=1680&bih=922

 **（文件=我的本地png文件）

[https://www.google.co.kr/search?tbs=sbi](https://www.google.co.kr/search?tbs=sbi) :*** AMhZZitnwqdkiC9p9kdEnreZjjbuLJxaCUJ5qd2LHbZcoEo9XHF3GcX2IF_1-Wm_1fMhrkNavPdYSu_1N9DMbghr_1sO2eGfZfmDEZCkV7F0hKlqIMpoZ_1aU2Oz9467IRztBhZyb6nvD2tJdDrLcKK7Nn2lLl9J8XAUY9KFDjQOToAfyZJ4V-aUQAsN-qRdf_1q_1G37i9RiOHVeFOpXz1SXrLFun-6q1IQanS_1l10TL0zND4DKoceZecU1RldThCndiQYKiV1pqZGug_16wqLpw3ZO8o10J14O4Cu7nqGpKHhr3FLk_1NfIfvIzBHzumDe6R5HboVMSihJ1oHRd4FGXh4bzRK5ety36LE_1s7AM7mtds2XdsKrC5KChP8xoAj4WU2TQV9-lMuDvJUyrGlpXOO01_1BazylbqQNhi2qzekzPScqzna3DeXgQ_145869rIg_1YLw1TrbUCHSyrxTH0oPg5Rpeep2owGeenNJ-a_1c-h3THCiU5_1o_1RcnETkJTaC-tJdjU7bycjxxoQc6Jf4Mxcn8L4z8CUyQW1f5Kx0ke7FG5OVAVagojJc5H0Jf0oPlp99ytCFFNUaSI9P0T-XDOfH64j9dW06Pct4Kn4-tqbfdGbpLiWGgD6q2G3orala5iElQDxW54zHcboaMJfc3lJehmn8PyrKas_1HqzyyPq0qndpn2T9yWH7dFo1b0NWnRBYeMwcVnnIw7WlTvYPcdBAr0rzgzBqJsTZnTRH9KJWRRp0uSeYbRbEvxhWXlr5-S76Okde_1hGc5E30KlKG3du_1_1xIlb5LkYykfRNuaFUestUHA3vMmb3Ge0sROFluDAwlD_1znsDSaPVIn0XESh***&num=10&hl=ko&newwindow=1&bih=922&biw=1680

AMhZZ .... 这是从图像文件中编码的代码

但我无法从图像文件中制作此代码。

这不仅仅是字符的二进制代码。

此 png 文件字节长度为 187099

但是 Endcoded 代码长度不一样。

我怎样才能从图像中制作该代码...... ?????????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:52:24.637

> 但是，Google 不支持仅关于文件搜索的 API。

您已经自己回答了这个问题……尽管我想将“支持”更改为“允许”。**

# jquery - 简单的 Jquery 可拖动对我不起作用？

> ID：10055598
> 
> 赞同：1
> 
> 时间：2012-04-07T15:11:11.930
> 
> 标签：jquery, draggable

有人可以帮我吗？这可能是我忽略的一些简单的事情：

```
<script src="http://jqueryui.com/ui/jquery.ui.core.js"></script>
<script src="http://jqueryui.com/ui/jquery.ui.widget.js"></script>
<script src="http://jqueryui.com/ui/jquery.ui.mouse.js"></script>
<script src="http://jqueryui.com/ui/jquery.ui.draggable.js"></script>

<script>
$(function() {
    $( "#draggable" ).draggable();
});
</script>

<div id="draggable" class="ui-widget-content"
style="position:absolute;width:150px;height:210px;left:2%;top:40%;background-color:#eeeeee;border-radius:12px;border:solid 1px black;font-size:17px;text-align:center">
</div> 
```

* * *

[http://jqueryui.com/demos/draggable/#default](http://jqueryui.com/demos/draggable/#default)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:16:14.047

您的网址已损坏；如果我加载整个 jQuery UI 库，你的代码[在这里工作。](http://jsfiddle.net/XxaET/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T15:21:22.060

我认为你没有添加到你的页面**jquery.js**

在其他脚本标签的顶部添加这一行，

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script> 
```

它适用于[jsfiddle 示例](http://jsfiddle.net/CdaYm/)（外部 jquery）

# objective-c - 使用 UIImagePickerController 访问相册时应用崩溃

> ID：10055599
> 
> 赞同：0
> 
> 时间：2012-04-07T15:11:12.823
> 
> 标签：objective-c, ios, cocoa-touch, uiimagepickercontroller

iTunes Connect 有我的应用程序的崩溃报告。它说当我使用`UIImagePickerController`访问专辑时应用程序会崩溃，但我无法在模拟器或真机上重现该问题。以下是崩溃报告的内容。请帮我查明问题。

```
Hardware Model:      iPhone4,1
Process:         eyerecolor [5011]
Path:            /var/mobile/Applications/B9D7CEA3-DB1D-4CE3-B605-90EC066B7C92/eyerecolor.app/eyerecolor
Identifier:      eyerecolor
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-04-06 18:51:37.692 -0500
OS Version:      iPhone OS 5.0 (9A334)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                 0x371198bf __exceptionPreprocess + 163

1   libobjc.A.dylib                0x324891e5 objc_exception_throw + 33

2   CoreData                       0x3728c64b -[NSPersistentStoreCoordinator setMetadata:forPersistentStore:] + 411

3   PhotoLibraryServices           0x31585ffd +[PLManagedObjectContext(Private) recordVersion:forStore:] + 393

4   PhotoLibraryServices           0x31586385 +[PLManagedObjectContext(Private) configurePersistentStoreCoordinator:] + 897

5   PhotoLibraryServices           0x3158691f __69+[PLManagedObjectContext(Protected) sharedPersistentStoreCoordinator]_block_invoke_0323 + 179

6   libdispatch.dylib              0x32a908cf _dispatch_barrier_sync_f_invoke + 27

7   libdispatch.dylib              0x32a9072f dispatch_barrier_sync_f$VARIANT$mp + 63

8   libdispatch.dylib              0x32a9034f dispatch_sync_f$VARIANT$mp + 19

9   libdispatch.dylib              0x32a909f9 dispatch_sync$VARIANT$mp + 33

10  PhotoLibraryServices           0x3158681f +[PLManagedObjectContext(Protected) sharedPersistentStoreCoordinator] + 155

11  PhotoLibraryServices           0x315853c9 -[PLManagedObjectContext initWithConcurrencyType:useSharedPersistentStoreCoordinator:] + 121

12  PhotoLibraryServices           0x315852a7 +[PLManagedObjectContext contextForPhotoLibrary:] + 115

13  PhotoLibraryServices           0x31584ec9 -[PLPhotoLibrary(Protected) loadDatabase] + 237

14  PhotoLibraryServices           0x3154d87d -[PLPhotoLibrary initWithPath:canTriggerDatabaseUpdate:] + 305

15  PhotoLibraryServices           0x315942a1 __42+[PLSharedPhotoLibrary sharedPhotoLibrary]_block_invoke_0 + 61

16  libdispatch.dylib              0x32a92683 dispatch_once_f$VARIANT$mp + 47

17  PhotoLibraryServices           0x3159425f +[PLSharedPhotoLibrary sharedPhotoLibrary] + 83

18  PhotoLibrary                   0x32c69bc9 -[PLUILibraryViewController _updateFilteredAlbumListWithFilter:] + 157

19  PhotoLibrary                   0x32c6961b -[PLUILibraryViewController init] + 67

20  UIKit                          0x31f58cc5 -[UIImagePickerController _createInitialController] + 317

21  UIKit                          0x31f58d05 -[UIImagePickerController _setupControllersForCurrentSourceType] + 25

22  UIKit                          0x31f58711 -[UIImagePickerController viewWillAppear:] + 69

23  UIKit                          0x31d336b5 -[UIViewController _setViewAppearState:isAnimating:] + 145

24  UIKit                          0x31d8e61b -[UIViewController beginAppearanceTransition:animated:] + 191

25  UIKit                          0x31dd4691 -[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:] + 4077

26  UIKit                          0x31dd314f -[UIViewController presentViewController:withTransition:completion:] + 3123

27  UIKit                          0x044f2e93 -[UIViewControllerAccessibility(SafeCategory) presentViewController:animated:completion:] + 51

28  UIKit                          0x31e2dd97 -[UIViewController presentModalViewController:animated:] + 31

29  eyerecolor                     0x00009c39 -[eyerecolorViewController showImagePicker:] (eyerecolorViewController.m:1855) 
```

* * *

```
- (void)showImagePicker:(UIImagePickerControllerSourceType)sourceType
{
    if ([UIImagePickerController isSourceTypeAvailable:sourceType]) {
        self.m_pickerView.sourceType = sourceType;
        self.m_pickerView.allowsEditing = NO;
        [self presentModalViewController:self.m_pickerView animated:YES];
    }
}

- (void)viewDidLoad
{
    if (self.m_pickerView == nil) {
        self.m_pickerView = [[[UIImagePickerController alloc] init] autorelease];
        self.m_pickerView.delegate = self;
        self.m_pickerView.allowsImageEditing = NO;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:28:07.873

我不确定这是否能解决您的问题，但希望它会有所帮助...

您是否在 iOS 5 上尝试过您的代码？你的设备呢？

查看崩溃报告，您的问题似乎与 iPhone 4S 上的 iOS 5 有关：

```
Hardware Model: iPhone4,1
...
OS Version: iPhone OS 5.0 (9A334) 
```

尽量不要自动释放你的`UIImagePickerController`. 有时自动释放的对象会产生问题，而不是平滑内存管理。

编辑：还有一件事......这是Apple建议实现UIImagePickerController的方式：

1.  验证设备是否能够从所需的来源中挑选内容。执行此操作调用 isSourceTypeAvailable: 类方法，提供来自“UIImagePickerControllerSourceType”枚举的常量。
2.  通过调用 availableMediaTypesForSourceType: 类方法，检查哪些媒体类型对于您正在使用的源类型可用。这使您可以区分可用于视频录制的相机和仅可用于静止图像的相机。
3.  通过设置 mediaTypes 属性，告诉图像选择器控制器根据您想要提供的媒体类型（静止图像、电影或两者兼有）调整 UI。
4.  **通过调用当前活动视图控制器的presentViewController:animated:completion:**方法呈现用户界面 ，将您配置的图像选择器控制器作为新的视图控制器传递。在 iPad 上，使用弹出框呈现用户界面。仅当图像选择器控制器的 sourceType 属性设置为 UIImagePickerControllerSourceTypeCamera 时，这样做才有效。要使用 popover 控制器，请使用 UIPopoverController 类参考中“Presenting and Dismissing the Popover”中描述的方法。
5.  当用户点击按钮选择新捕获或保存的图像或电影，或取消操作时，使用您的委托对象关闭图像选择器。对于新捕获的媒体，您的代理可以将其保存到设备上的相机胶卷中。对于以前保存的媒体，您的代理可以根据您的应用程序的目的使用图像数据。

来自[UIImagePickerController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)

编辑（再次）：好吧，如果您的设备没有任何问题，那就太奇怪了，但我再次尝试建议一种改变实际情况的方法。

在 showImagePicker:(UIImagePickerControllerSourceType)sourceType 中实现你的 UIImagePicker 控制器，而不是 viewDidLoad。

使用allowEditing 而不是allowImageEditing（在iOS 3.1 中已弃用）并且不要自动释放您的对象...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:05:06.967

好吧，我想到了几件事。我希望它会工作....

首先检查你是否在你的控制器的 .h 文件中包含 UIImagePickerDelegate 。其次，有像 didFinshPickingImage 这样的委托方法尝试在 Beppe 给你的类参考中搜索。

如果这些东西不起作用，请告诉我您的应用程序是否提供了 Sigbrt 或 Bad Excess ...根据我的经验，我相信这将是一个 sigbrt。如果我没有错，你的应用程序会将你带到 main.m 文件。当然，您将无法分辨出哪里出了问题，因此请在您的应用程序中添加一个例外断点。这将为您提供您的应用程序崩溃的确切时间。

搜索那个点。我真正关心的是你的委托方法不起作用。

如果这是最坏的情况，你仍然找不到解决方案，最后的手段就是[这个](http://cocoacontrols.com/platforms/ios/controls/photo-picker)

让我知道它是否有效:) 干杯

# r - 包装底座 R 重塑易于使用

> ID：10055602
> 
> 赞同：15
> 
> 时间：2012-04-07T15:11:19.543
> 
> 标签：r, reshape

众所周知，R 的 base reshape 命令快速而强大，但语法很糟糕，这是公认的事实。因此，我围绕它编写了一个快速包装器，我将把它放入`taRifx`包的下一个版本中。然而，在我这样做之前，我想征求改进意见。

这是我的版本，来自@RichieCotton 的更新：

```
# reshapeasy: Version of reshape with way, way better syntax
 # Written with the help of the StackOverflow R community
 # x is a data.frame to be reshaped
 # direction is "wide" or "long"
 # vars are the names of the (stubs of) the variables to be reshaped (if omitted, defaults to everything not in id or vary)
 # id are the names of the variables that identify unique observations
 # vary is the variable that varies.  Going to wide this variable will cease to exist.  Going to long it will be created.
 # omit is a vector of characters which are to be omitted if found at the end of variable names (e.g. price_1 becomes price in long)
 # ... are options to be passed to stats::reshape
reshapeasy <- function( data, direction, id=(sapply(data,is.factor) | sapply(data,is.character)), vary=sapply(data,is.numeric), omit=c("_","."), vars=NULL, ... ) {
  if(direction=="wide") data <- stats::reshape( data=data, direction=direction, idvar=id, timevar=vary, ... )
  if(direction=="long") {
    varying <- which(!(colnames(data) %in% id))
    data <- stats::reshape( data=data, direction=direction, idvar=id, varying=varying, timevar=vary, ... )
  }
  colnames(data) <- gsub( paste("[",paste(omit,collapse="",sep=""),"]$",sep=""), "", colnames(data) )
  return(data)
} 
```

请注意，您可以在不更改方向以外的选项的情况下从宽移动到长。对我来说，这是可用性的关键。

如果您聊天或通过电子邮件将您的信息发送给我，我很高兴在功能帮助文件中确认任何实质性改进。

改进可能在以下几个方面：

*   命名函数及其参数
*   使其更通用（目前它处理一个相当具体的案例，我认为这是迄今为止最常见的，但它还没有耗尽 stats::reshape 的功能）
*   代码改进

**例子**

*样本数据*

```
x.wide <- structure(list(surveyNum = 1:6, pio_1 = structure(c(2L, 2L, 1L, 
2L, 1L, 1L), .Names = c("1", "2", "3", "4", "5", "6"), .Label = c("1", 
"2"), class = "factor"), pio_2 = structure(c(2L, 1L, 2L, 1L, 
2L, 2L), .Names = c("1", "2", "3", "4", "5", "6"), .Label = c("1", 
"2"), class = "factor"), pio_3 = structure(c(2L, 2L, 1L, 1L, 
2L, 1L), .Names = c("1", "2", "3", "4", "5", "6"), .Label = c("1", 
"2"), class = "factor"), caremgmt_1 = structure(c(2L, 1L, 1L, 
2L, 1L, 2L), .Names = c("1", "2", "3", "4", "5", "6"), .Label = c("1", 
"2"), class = "factor"), caremgmt_2 = structure(c(1L, 2L, 2L, 
2L, 2L, 1L), .Names = c("1", "2", "3", "4", "5", "6"), .Label = c("1", 
"2"), class = "factor"), caremgmt_3 = structure(c(1L, 2L, 1L, 
2L, 1L, 1L), .Names = c("1", "2", "3", "4", "5", "6"), .Label = c("1", 
"2"), class = "factor"), prev_1 = structure(c(1L, 2L, 2L, 1L, 
1L, 2L), .Names = c("1", "2", "3", "4", "5", "6"), .Label = c("1", 
"2"), class = "factor"), prev_2 = structure(c(2L, 2L, 1L, 2L, 
1L, 1L), .Names = c("1", "2", "3", "4", "5", "6"), .Label = c("1", 
"2"), class = "factor"), prev_3 = structure(c(2L, 1L, 2L, 2L, 
1L, 1L), .Names = c("1", "2", "3", "4", "5", "6"), .Label = c("1", 
"2"), class = "factor"), price_1 = structure(c(2L, 1L, 2L, 5L, 
3L, 4L), .Names = c("1", "2", "3", "4", "5", "6"), .Label = c("1", 
"2", "3", "4", "5", "6"), class = "factor"), price_2 = structure(c(6L, 
5L, 5L, 4L, 4L, 2L), .Names = c("1", "2", "3", "4", "5", "6"), .Label = c("1", 
"2", "3", "4", "5", "6"), class = "factor"), price_3 = structure(c(3L, 
5L, 2L, 5L, 4L, 5L), .Names = c("1", "2", "3", "4", "5", "6"), .Label = c("1", 
"2", "3", "4", "5", "6"), class = "factor")), .Names = c("surveyNum", 
"pio_1", "pio_2", "pio_3", "caremgmt_1", "caremgmt_2", "caremgmt_3", 
"prev_1", "prev_2", "prev_3", "price_1", "price_2", "price_3"
), idvars = "surveyNum", rdimnames = list(structure(list(surveyNum = 1:24), .Names = "surveyNum", row.names = c("1", 
"2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", 
"14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24"
), class = "data.frame"), structure(list(variable = structure(c(1L, 
1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L, 4L, 4L, 4L), .Label = c("pio", 
"caremgmt", "prev", "price"), class = "factor"), .id = c(1L, 
2L, 3L, 1L, 2L, 3L, 1L, 2L, 3L, 1L, 2L, 3L)), .Names = c("variable", 
".id"), row.names = c("pio_1", "pio_2", "pio_3", "caremgmt_1", 
"caremgmt_2", "caremgmt_3", "prev_1", "prev_2", "prev_3", "price_1", 
"price_2", "price_3"), class = "data.frame")), row.names = c(NA, 
6L), class = c("cast_df", "data.frame"))

x.long <- structure(list(.id = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), pio = structure(c(2L, 
2L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 2L, 1L, 1L, 2L, 1L, 2L, 1L, 
2L, 1L, 2L, 2L, 1L, 2L, 2L, 2L, 2L, 1L, 1L, 2L, 1L, 2L, 1L, 2L, 
1L, 1L, 2L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 2L, 2L, 
1L, 2L, 1L, 2L, 2L, 1L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 2L, 1L, 2L, 
1L, 2L, 2L, 1L, 2L, 1L, 1L), .Label = c("1", "2"), class = "factor"), 
    caremgmt = structure(c(2L, 1L, 1L, 2L, 1L, 2L, 2L, 1L, 1L, 
    2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 2L, 
    1L, 2L, 1L, 2L, 1L, 1L, 2L, 2L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 
    1L, 2L, 1L, 2L, 1L, 1L, 2L, 1L, 2L, 1L, 2L, 2L, 2L, 2L, 1L, 
    1L, 2L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 1L, 2L, 2L, 2L, 1L, 1L, 
    1L, 2L, 2L), .Label = c("1", "2"), class = "factor"), prev = structure(c(1L, 
    2L, 2L, 1L, 1L, 2L, 1L, 2L, 2L, 1L, 2L, 2L, 2L, 2L, 1L, 1L, 
    1L, 2L, 2L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 2L, 2L, 1L, 1L, 1L, 
    2L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 
    2L, 2L, 2L, 2L, 1L, 2L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 2L, 
    1L, 2L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 2L, 2L), .Label = c("1", 
    "2"), class = "factor"), price = structure(c(2L, 1L, 2L, 
    5L, 3L, 4L, 1L, 5L, 4L, 3L, 1L, 2L, 6L, 6L, 5L, 4L, 6L, 3L, 
    5L, 6L, 3L, 1L, 2L, 4L, 3L, 5L, 2L, 5L, 4L, 5L, 6L, 6L, 4L, 
    6L, 4L, 1L, 2L, 3L, 1L, 2L, 2L, 5L, 1L, 6L, 1L, 3L, 4L, 3L, 
    6L, 5L, 5L, 4L, 4L, 2L, 2L, 2L, 6L, 3L, 1L, 4L, 4L, 5L, 1L, 
    3L, 6L, 1L, 3L, 5L, 1L, 3L, 6L, 2L), .Label = c("1", "2", 
    "3", "4", "5", "6"), class = "factor"), surveyNum = c(1L, 
    2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 
    15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 1L, 2L, 
    3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 
    16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 1L, 2L, 3L, 
    4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 
    17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L)), .Names = c(".id", 
"pio", "caremgmt", "prev", "price", "surveyNum"), row.names = c(NA, 
-72L), class = "data.frame") 
```

*例子*

```
> x.wide
  surveyNum pio_1 pio_2 pio_3 caremgmt_1 caremgmt_2 caremgmt_3 prev_1 prev_2 prev_3 price_1 price_2 price_3
1         1     2     2     2          2          1          1      1      2      2       2       6       3
2         2     2     1     2          1          2          2      2      2      1       1       5       5
3         3     1     2     1          1          2          1      2      1      2       2       5       2
4         4     2     1     1          2          2          2      1      2      2       5       4       5
5         5     1     2     2          1          2          1      1      1      1       3       4       4
6         6     1     2     1          2          1          1      2      1      1       4       2       5
> reshapeasy( x.wide, "long", NULL, id="surveyNum", vary="id", sep="_" )
    surveyNum id pio caremgmt prev price
1.1         1  1   2        2    1     2
2.1         2  1   2        1    2     1
3.1         3  1   1        1    2     2
4.1         4  1   2        2    1     5
5.1         5  1   1        1    1     3
6.1         6  1   1        2    2     4
1.2         1  2   2        1    2     6
2.2         2  2   1        2    2     5
3.2         3  2   2        2    1     5
4.2         4  2   1        2    2     4
5.2         5  2   2        2    1     4
6.2         6  2   2        1    1     2
1.3         1  3   2        1    2     3
2.3         2  3   2        2    1     5
3.3         3  3   1        1    2     2
4.3         4  3   1        2    2     5
5.3         5  3   2        1    1     4
6.3         6  3   1        1    1     5

> head(x.long)
  .id pio caremgmt prev price surveyNum
1   1   2        2    1     2         1
2   1   2        1    2     1         2
3   1   1        1    2     2         3
4   1   2        2    1     5         4
5   1   1        1    1     3         5
6   1   1        2    2     4         6

> head(reshapeasy( x.long, direction="wide", id="surveyNum", vary=".id" ))
  surveyNum pio.1 caremgmt.1 prev.1 price.1 pio.3 caremgmt.3 prev.3 price.3 pio.2 caremgmt.2 prev.2 price.2
1         1     2          2      1       2     2          1      2       3     2          1      2       6
2         2     2          1      2       1     2          2      1       5     1          2      2       5
3         3     1          1      2       2     1          1      2       2     2          2      1       5
4         4     2          2      1       5     1          2      2       5     1          2      2       4
5         5     1          1      1       3     2          1      1       4     2          2      1       4
6         6     1          2      2       4     1          1      1       5     2          1      1       2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:38:49.993

我还希望看到对输出进行排序的选项，因为这是我不喜欢在 base R 中进行 reshape 的事情之一。举个例子，让我们使用[Stata Learning Module: Reshaping data wide to long](http://www.ats.ucla.edu/stat/stata/modules/reshapel.htm)，你就是已经熟悉了。我正在查看的示例是“1 岁和 2 岁儿童的身高和体重”示例。

这是我通常做的事情`reshape()`：

```
# library(foreign)
kidshtwt = read.dta("http://www.ats.ucla.edu/stat/stata/modules/kidshtwt.dta")
kidshtwt.l = reshape(kidshtwt, direction="long", idvar=1:2, 
                     varying=3:6, sep="", timevar="age")
# The reshaped data is correct, just not in the order I want it
# so I always have to do another step like this
kidshtwt.l = kidshtwt.l[order(kidshtwt.l$famid, kidshtwt.l$birth),] 
```

由于这是我在重塑数据时总是必须经历的一个烦人的步骤，因此我认为将其添加到您的函数中会很有用。

我还建议至少可以选择使用最终列顺序执行相同的操作，以从`long`to重塑`wide`。

## 列排序的示例函数

我不确定将其集成到您的函数中的最佳方法，但我将它们放在一起以根据变量名称的基本模式对数据框进行排序。

```
col.name.sort = function(data, patterns) {
  a = names(data)
  b = length(patterns)

  subs = vector("list", b)

  for (i in 1:b) {
    subs[[i]] = sort(grep(patterns[i], a, value=T))
    }
  x = unlist(subs)
  data[ , x ]
} 
```

它可以按以下方式使用。假设我们已将您`reshapeasy` `long`的`wide`示例的输出保存为名为 的数据框`a`，我们希望它按“surveyNum”、“caremgmt”（1-3）、“prev”（1-3）、“pio”（1- 3）和“价格”（1-3），我们可以使用：

```
col.name.sort(a, c("sur", "car", "pre", "pio", "pri")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T23:11:56.000

一些初步的想法：

我一直认为方向命令“宽”和“长”有点模糊。他们的意思是您要将数据转换为该格式，还是数据已经采用该格式？这是您需要学习或查找的东西。您可以通过将函数`reshapeToWide`和`reshapeToLong`. 作为奖励，每个函数的签名都少了一个参数。

* * *

我不认为你打算包括这条线

```
varying <- which(!(colnames(x.wide) %in% "surveyNum")) 
```

因为它指的是特定的数据集。

* * *

我更喜欢`data`第`x`一个参数，因为它清楚地表明输入应该是一个数据框。

* * *

首先有没有默认值的参数通常是更好的形式。所以`vars`应该在`id`and之后`vary`。

* * *

你可以为`id`和选择默认值`vary`吗？ `reshape::melt`默认为 id 的因子和字符列，var 的数字列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T08:08:05.920

我认为您的示例中可能存在错误。从宽到长，我收到以下错误：

```
> reshapeasy( x.wide, "long", NULL, id="surveyNum", vary="id", sep="_" )
Error in gsub(paste("[", paste(omit, collapse = "", sep = ""), "]$", sep = ""),  : 
  invalid regular expression '[]$', reason 'Missing ']'' 
```

删除`NULL`可以纠正问题。这让我问，这样做的预期目的是`NULL`什么？

我还认为，如果该函数`time`默认生成一个变量，如果用户没有明确指定（如 中所做的那样`reshape()`），该函数将会得到改进。

例如，请参见 base 中的以下内容`reshpae()`：

```
> head(reshape(x.wide, direction="long", idvar=1, varying=2:13, sep="_"))
    surveyNum time pio caremgmt prev price
1.1         1    1   2        2    1     2
2.1         2    1   2        1    2     1
3.1         3    1   1        1    2     2
4.1         4    1   2        2    1     5
5.1         5    1   1        1    1     3
6.1         6    1   1        2    2     4 
```

如果我对此很熟悉，并且我看到您的函数为我负责“变化”，我可能会想尝试：

```
> head(reshapeasy( x.wide, "long", id="surveyNum", sep="_" ))
Error in `row.names<-.data.frame`(`*tmp*`, value = paste(d[, idvar], times[1L],  : 
  duplicate 'row.names' are not allowed
In addition: Warning message:
non-unique value when setting 'row.names': ‘1.1’ 
```

但这不是一个非常有用的错误。也许包含自定义错误消息可能对您的最终功能有用。

像您在当前版本的功能中所做的那样，允许用户将变量设置为`NULL`，对我来说似乎也不明智。这会产生如下输出：

```
> head(reshapeasy( x.wide, "long", id="surveyNum", NULL, sep="_" ))
    surveyNum pio caremgmt prev price
1.1         1   2        2    1     2
2.1         2   2        1    2     1
3.1         3   1        1    2     2
4.1         4   2        2    1     5
5.1         5   1        1    1     3
6.1         6   1        2    2     4 
```

这个输出的问题是，如果我需要重新整形回宽，我不能轻易做到。因此，我认为保留 reshape 生成`time`变量的默认选项，但让用户覆盖这可能是一个有用的功能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-21T09:52:12.223

也许对于那些懒惰且不喜欢输入变量名的人，您可以将以下内容添加到函数的头部：

```
 if (is.numeric(id) == 1) {
    id = colnames(data)[id]
  } else if (is.numeric(id) == 0) {
    id = id
  }

  if (is.numeric(vary) == 1) {
    vary = colnames(data)[vary]
  } else if (is.numeric(vary) == 0) {
    vary = vary
  } 
```

然后，按照您的示例，您可以使用以下速记：

```
reshapeasy(x.wide, direction="long", id=1, sep="_", vary="id")
reshapeasy(x.long, direction="wide", id=6, vary=1) 
```

（我知道，这可能不是一个好习惯，因为代码可能不太容易被以后的人理解或难以理解，但它确实经常发生。）

# opengl - ubuntu 上的 ARToolKit

> ID：10055603
> 
> 赞同：0
> 
> 时间：2012-04-07T15:11:29.550
> 
> 标签：opengl, ubuntu, glut, augmented-reality, artoolkit

我一直在尝试在我的 UBUNTU 11.10 pc 上设置 ARToolkit。我面临的问题是它需要 GLUT/OpenGL lib 和 SDK，我无法弄清楚如何做到这一点。

如何在 Ubuntu 上设置 ARToolKit？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:19:21.817

`sudo apt-get install freeglut3-dev`

# memory-management - 使用 CoTaskMemAlloc 时，我应该始终调用 CoTaskMemFree 吗？

> ID：10055607
> 
> 赞同：3
> 
> 时间：2012-04-07T15:11:34.417
> 
> 标签：memory-management, com, atl

我正在编写一些 COM 和 ATL 代码，出于某种原因，所有代码都用于`CoTaskMemAlloc`分配内存而不是`new`or `malloc`。所以我遵循了这种编码风格，我也使用`CoTaskMemAlloc`.

我的老师教我总是`delete`或`free`在分配内存时。但是我不确定如果`CoTaskMemFree`我使用，我是否应该总是打电话`CoTaskMemAlloc`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-07T15:56:30.697

使用 CRT 提供的 new/malloc 和 delete/free 是 COM 互操作中的一个问题。为了使它们工作，CRT 的同一个副本同时分配和释放内存是*非常重要的。*这在 COM 互操作场景中是不可能实现的，您的 COM 服务器和客户端实际上可以保证使用不同版本的 CRT。每个都使用自己的堆进行分配。这会在 Windows XP 上导致无法诊断的内存泄漏，在 Vista 及更高版本上是一个硬异常。

这就是 COM 堆存在的原因，它是服务器和客户端都使用的进程中的单个预定义堆。IMalloc 是访问共享堆的通用接口，CoTaskMemAlloc() 和 CoTaskMemFree() 是系统提供的帮助函数来使用该接口。

也就是说，这仅在服务器分配内存并且客户端必须释放它的情况下*才有*必要。或者反过来。在互操作场景中这应该总是很少见的，发生事故的可能性太大了。在 COM 自动化中只有两种这样的情况，一个 BSTR 和一个 SAFEARRAY，这两种类型已经被包装了。在其他情况下，您可以通过让方法调用者提供内存并让被调用者填充它来避免它。这也允许强大的优化，内存可以来自调用者的堆栈。

查看代码并检查谁分配了内存以及谁需要释放它。如果两者都存在于同一个模块中，那么使用 new/malloc 就可以了，因为现在硬保证同一个 CRT 实例会处理它。如果不是这种情况，请考虑修复它，以便调用者提供内存并释放它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T15:22:35.230

内存的分配和释放必须始终来自同一个源。如果你使用`CoTaskMemAlloc`那么你必须使用`CoTaskMemFree`来释放内存。

请注意，在 C++ 中，管理内存和对象构造/销毁 ( `new / delete`) 的行为是独立的行为。可以自定义特定对象以使用不同的内存分配器，并且仍然允许`new / delete`首选的标准语法。例如

```
class MyClass { 
public:
  void* operator new(size_t size) {
    return ::CoTaskMemAlloc(size);
  }
  void* operator new[](size_t size) {
    return ::CoTaskMemAlloc(size);
  } 
  void operator delete(void* pMemory) {
    ::CoTaskMemFree(pMemory);
  }
  void operator delete[](void* pMemory) {
    ::CoTaskMemFree(pMemory);
  }   
}; 
```

现在我可以像使用任何其他 C++ 类型一样使用此类型，但内存将来自 COM 堆

```
// Normal object construction but memory comes from CoTaskMemAlloc
MyClass *pClass = new MyClass();
...  
// Normal object destruction and memory freed from CoTaskMemFree
delete pClass; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T17:24:21.420

问题的答案是：是的，您应该使用 CoTaskMemFree 来释放使用 CoTaskMemAlloc 分配的内存。

其他答案很好地解释了为什么 CoTaskMemAlloc 和 CoTaskMemFree 对于 COM 服务器和 COM 客户端之间传递的内存是必需的，但它们没有直接回答您的问题。

您的老师是对的：您应该始终对任何资源使用相应的发布功能。如果您使用新的，请使用删除。如果您使用 malloc，请免费使用。如果您使用 CreateFile，请使用 CloseHandle。等等。

更好的是，在 C++ 中，使用 RAII 对象在构造函数中分配资源并在析构函数中释放资源，然后使用这些 RAII 包装器而不是裸函数。这使得编写不会泄漏的代码变得更容易和更清晰，即使你得到了类似异常的东西。

标准模板库提供了实现 RAII 的容器，这就是为什么您应该学习使用 std::vector 或 std::string 而不是分配裸内存并尝试自己管理的原因。还有像 std::shared_ptr 和 std::unique_ptr 这样的智能指针，可用于确保始终在正确的时间进行正确的发布调用。

ATL 提供了一些类，例如 ATL::CComPtr，它们是为您处理 COM 对象的引用计数的包装对象。正确使用它们并不是万无一失的，事实上，它们比大多数现代 STL 类有更多的陷阱，因此请仔细阅读文档。如果使用得当，确保 AddRef 和 Release 调用都匹配相对容易。

# xml - 元素的类型与属性不同？

> ID：10055609
> 
> 赞同：0
> 
> 时间：2012-04-07T15:11:46.597
> 
> 标签：xml, xsd

我正在编写一个简单的游戏并编写 *.xsd 文件。

我的问题是元素的内容应该有一个介于 1 和 6 之间的数字，而属性应该有一个介于 1 和 4 之间的数字。

这是我的代码，但它不起作用类型的原因：

```
 <xsd:element name="roll" type="numb_1_and_6">
            <xsd:complexType>
                <xsd:attribute name="player" use="required">
                    <xsd:simpleType>
                        <xsd:restriction base="xsd:integer">
                            <xsd:minInclusive value="1" />
                            <xsd:maxInclusive value="4" />
                        </xsd:restriction>
                    </xsd:simpleType>
                </xsd:attribute>
            </xsd:complexType>
        </xsd:element>

<xsd:simpleType name="numb_1_and_6">
    <xsd:restriction base="xsd:integer">
        <xsd:minInclusive value="1" />
        <xsd:maxInclusive value="6" />
    </xsd:restriction>
</xsd:simpleType> 
```

问题是 numb_1_and_6-Type 和 complex Type... 那么如何解决呢？

提前问候和谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:36:08.223

您缺少内容的定义，在您的情况下很简单，因为它扩展了一个简单的类型：

```
<xsd:element name="roll"> 
    <xsd:complexType>
        <xsd:simpleContent>
            <xsd:extension base="numb_1_and_6">
                <xsd:attribute name="player" use="required"> 
                    <xsd:simpleType> 
                        <xsd:restriction base="xsd:integer"> 
                            <xsd:minInclusive value="1"/> 
                            <xsd:maxInclusive value="4"/> 
                        </xsd:restriction> 
                    </xsd:simpleType> 
                </xsd:attribute>                    
            </xsd:extension>
        </xsd:simpleContent>
    </xsd:complexType> 
</xsd:element> 
```

# gwt - 企业应用框架

> ID：10055610
> 
> 赞同：2
> 
> 时间：2012-04-07T15:11:52.640
> 
> 标签：gwt, web-frameworks

我一直在开发一个简单的 JSP/Servlet Web 应用程序，它主要专注于通过 JSP 收集大量数据，处理它们，最后将它们提交到 MySQL 数据库。想象一下像为相当多的人申报资产之类的事情。

虽然它现在工作得很好，但代码真的很混乱，因为我现在有时间，我正在考虑以一种更复杂和可重用的方式完全重新设计整个应用程序。`name[counter]`我的主要问题是表单主要是通过 jQuery 构建的（我的 form_build.js 和 form_validate.js 文件目前每个文件都超过 600 行），并且由于大量使用输入字段 ，后端 java 代码很混乱。

即用户可以在表单中添加 5 个资产，他必须在每个资产上提交 30 个信息字段。表单以 的形式发送它们`attribute[asset_counter]`。

如果我设法让自己清楚，我一直在研究谷歌网络工具包 - 我以前不知道 - 从我收集到的掌握它需要一些时间。值得麻烦，还是针对完全不同的东西？是否有可以有效处理我需要的框架或技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:35:02.743

GWT 是一个非常强大的工具包，据我了解，它可以帮助您更好地组织客户端代码。但是您还必须考虑一些高级 JS 框架，例如[骨干](http://documentcloud.github.com/backbone/).js + [require.js](http://requirejs.org/)或[Google Closure](https://developers.google.com/closure/)。学习这个框架所花费的时间与 GWT 基本相同，选择基本上取决于您的团队喜欢什么，JS 或 Java。在大多数情况下，当客户端的逻辑变得非常复杂时，我会选择 GWT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T23:15:17.167

坦白说，我是一名资深的java开发者，用过很多jsp/jsf的web应用，伴随着EJB，webservice，简单的spring web应用，最近想用GWT。
这是一个非常好的平台，它具有以下优点：

1.  所有代码都编译为 html/JS，这在速度和浏览器理解敏捷性方面更好
2.  它使用内置的 JSON xml 转换器（不错的方法）
3.  它使用内置的 AJAX（不错的方法）
4.  它使用自己的客户端服务器平台（无需为每个库使用其他库）
5.  它将适用于任何浏览器（强大的竞争者）

缺点：

1.  有时在浏览器中加载需要一些时间（特别是在使用 FlexTables 时）

我建议你使用它！

# java - 是否可以从外部闪存驱动器运行 java (jdk-windows) 、 Eclipse (indigo) 和 Android-sdk FOR android 应用程序开发

> ID：10055614
> 
> 赞同：1
> 
> 时间：2012-04-07T15:12:57.160
> 
> 标签：java, android, eclipse

我想知道我们是否可以通过将要求软件保存在外部闪存驱动器上来在我们使用的任何计算机上开发我们的 android 应用程序，我的意思是在闪存驱动器上安装 java、eclipse 和 android sdk，所以最后我们可以将闪存带到任何计算机上。计算机并在任何计算机上开发 android 应用程序，即使计算机没有安装所需的软件，真的我在互联网上搜索了很多并尝试了很多建议之一：

我从（portableapps.com）下载了便携式java，从（sourceforge.net）下载了便携式eclipse，但它不起作用。

任何建议的想法将不胜感激，

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:34:21.030

是的，这是可能的，但`eclipse.ini`您必须指定要使用的 JVM，并选择闪存驱动器上的 JVM。

看看这个[页面](http://wiki.eclipse.org/Eclipse.ini)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T11:37:46.053

最后我得到了对我来说很好的解决方案，如下所示：

1-下载Java软件，然后将其安装在我的PC上，并带有闪存驱动程序的安装路径。

2-下载android SDK，然后将其安装在PC上，并带有闪存驱动程序的安装路径。

3-下载Eclipse将其解压缩到闪存驱动器上的预定文件夹中，然后在Eclipse文件夹中创建文件夹并调用它（jre），然后转到PC上的程序文件并复制java文件夹，然后将其粘贴到Eclipse文件夹中的JRE文件夹中。

4-最后运行 Eclipse ，它会很好地工作。

# sql-server - 在 sql server 2008 中选择最多 10 个值

> ID：10055618
> 
> 赞同：0
> 
> 时间：2012-04-07T15:13:34.180
> 
> 标签：sql-server, sql-server-2008

我有一个在线销售应用程序的应用程序网站。在主页上我想根据下载次数显示前 10 个产品。我试图从 sql server 数据库 2008 中获取产品 ID。但是当我去时查询大小会增加从高下载计数值到较低值。因为我在一次查询中获取一个产品 ID。所以前 10 名应用程序总共有 10 次查询。

所以我想知道是否有任何方法可以轻松获取前 10 名应用程序。

我有一个名为 product 的表。它有两个字段 product_id，purchase_count。我想获得 10 个具有最高 download_count 值的产品 id。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:16:15.643

```
select top 10 * from your_table order by douwnload_count DESC; 
```

编辑：因为你只需要 product_id 使用：

```
select top 10 product_id from your_table order by download_count DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:24:01.553

您将“download_count”列存储在哪里？在另一张桌子上？

在这种情况下，您必须对该表进行内部连接，并按 download_count 列排序。如果它在同一张表中，您可以执行以下操作：

```
select top 10 product_id,purchase_count from product.It order by purchase_count DESC; 
```

如果在另一个表中，它将是：

```
select top 10 product_id,sum(download_count) as downloads 
from product.It as p
      inner join download.it as d on d.product_id= p.product_id
group by product_id
order by d.download_count DESC; 
```

# r - R - summary.princomp 的限制输出

> ID：10055619
> 
> 赞同：3
> 
> 时间：2012-04-07T15:13:37.497
> 
> 标签：r, princomp

我正在对包含 1000 多个变量的数据集进行主成分分析。我正在使用 R Studio，当我运行摘要以查看组件的累积方差时，我只能看到最后几百个组件。如何将摘要限制为仅显示前 100 个组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:04:02.010

我试过这个，它似乎正在工作： l = loadings(prin) l[,1:100]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:28:34.780

很容易修改`print.summary.princomp`（你可以通过输入来查看原始代码`stats:::print.summary.princomp`）来做到这一点：

```
pcaPrint <- function (x, digits = 3, loadings = x$print.loadings, cutoff = x$cutoff,n, ...) 
{
    #Check for sensible value of n; default to full output
    if (missing(n) || n > length(x$sdev) || n < 1){n <- length(x$sdev)}
    vars <- x$sdev^2
    vars <- vars/sum(vars)
    cat("Importance of components:\n")
    print(rbind(`Standard deviation` = x$sdev[1:n], `Proportion of Variance` = vars[1:n], 
        `Cumulative Proportion` = cumsum(vars)[1:n]))
    if (loadings) {
        cat("\nLoadings:\n")
        cx <- format(round(x$loadings, digits = digits))
        cx[abs(x$loadings) < cutoff] <- paste(rep(" ", nchar(cx[1, 
            1], type = "w")), collapse = "")
        print(cx[,1:n], quote = FALSE, ...)
    }
    invisible(x)
}

pcaPrint(summary(princomp(USArrests, cor=TRUE),
              loadings = TRUE, cutoff = 0.2), digits = 2,n = 2) 
```

**已编辑**以包括对`n`. 既然我已经这样做了，我想知道是否不值得建议将 R Core 作为永久添加；看起来很简单，而且可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T16:23:40.537

您可以将负载以矩阵形式放置，您可以将矩阵保存到一个变量中，然后将其子集（a la `matrix[,1:100]`）以查看第一个/中间/最后一个 n。在这个例子中，我使用了 head()。每列都是一个主成分。

```
head(
  matrix(
    prin$loadings, 
      ncol=length(dimnames(prin$loadings)[[2]]),
      nrow=length(dimnames(prin$loadings)[[1]])
  ),
100) 
```

# javascript-events - Onclick 函数与双击一起使用？

> ID：10055626
> 
> 赞同：0
> 
> 时间：2012-04-07T15:14:49.587
> 
> 标签：javascript-events

我在javascript中编写了一个提供onclick事件的代码..但是不是单击执行，而是需要双击来执行它

```
<­a href="javascript:void(0)" onclick="chatWith("arun")>Arun<­/a>

function chatWith(chatuser) {
createChatBox(chatuser);
$("#chatbox_"+chatuser+" .chatboxtextarea").focus();
}

function createChatBox(chatboxtitle,minimizeChatBox) {
if ($("#chatbox_"+chatboxtitle).length > 0) {
    if ($("#chatbox_"+chatboxtitle).css('display') == 'none') {
        $("#chatbox_"+chatboxtitle).css('display','block');
        restructureChatBoxes();
    }
    $("#chatbox_"+chatboxtitle+" .chatboxtextarea").focus();
    return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:37:59.010

您的链接声明中有错字：

`<­a href="javascript:void(0)" onclick="chatWith("arun")>Arun<­/a>`

应该：

`<a href="javascript:void(0)" onclick="chatWith('arun')">Arun</a>`

您不能在另一个**""中使用****""**对。您需要使用'""'或"''"。我很惊讶你的链接完全有效。[在此处](http://jsfiddle.net/EQBQp/4/)查看有关 onclick 事件的简单提示。

# python - 如何使用 range 函数在字符串中插入空格？

> ID：10055631
> 
> 赞同：8
> 
> 时间：2012-04-07T15:15:16.450
> 
> 标签：python

如果我有一个字符串，例如，上面写着：'Hello how are you today Joe' 我如何能够定期在其中插入空格？因此，例如，我想在这些步骤中使用范围函数将空格插入其中：范围（0,27,2）。所以它看起来像这样：

```
"He ll o  ho w  ar e  yo u  to da y  Jo e" 
```

它现在在每个第二个索引处都有一个空格，直到它结束。我该怎么做有人知道吗？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-07T15:18:30.223

对于这种特殊情况，最直接的方法是

```
s = 'Hello how are you today Joe'
s = " ".join(s[i:i+2] for i in range(0, len(s), 2)) 
```

这首先将字符串分成两个字符的块，然后用空格连接这些块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:16:17.807

只是另一种方法

```
>>> ''.join(e if (i+1)%2 else e+" " for (i,e) in enumerate(list(s)))
'He ll o  ho w  ar e  yo u  to da y  Jo e' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T16:10:28.647

这无所不能！

```
>>> def insert_spaces(text, s_range):
        return ' '.join(text[start:end] for start, end in 
                        zip([0] + s_range, s_range + [len(text)])).strip() 
```

问题示例：

```
>>> insert_spaces('Hello how are you today Joe', range(0, 27, 2))
'He ll o  ho w  ar e  yo u  to da y  Jo e' 
```

其他具有不同`starts`,`steps`和的示例`stops`：

```
>>> insert_spaces('Hello how are you today Joe', range(5, 20, 4))
'Hello  how  are  you  today Joe'
>>> insert_spaces('Hello how are you today Joe', range(0, 27))
'H e l l o   h o w   a r e   y o u   t o d a y   J o e'
>>> insert_spaces('abcdefghijklmnopqrstuvwxyz', range(0, 16, 5))
'abcde fghij klmno pqrstuvwxyz' 
```

# database - AIR 的数据库加密对于这个用例来说是否足够安全？

> ID：10055632
> 
> 赞同：0
> 
> 时间：2012-04-07T15:15:24.143
> 
> 标签：database, apache-flex, encryption, air

我们正在计划一个带有 Adob​​e AIR 的桌面客户端应用程序。客户端应用程序将通过数据库交付给我们的客户，其中包含我们公司提供的每月更新的营销数据。由于不同的客户会从我们这里购买不同的数据集，例如，一个客户只对特定产品类别的营销数据感兴趣，而另一个客户需要某个区域的所有数据。客户安装此客户端应用程序后，每月都会通过电子邮件将新数据发送给客户。

因此，要求是保持数据只能由购买它的客户访问。在阅读了 AIR 的安全本地存储和数据库加密功能后，我想到了以下设计：每个客户都有自己的密钥（存储在 AIR 的安全本地存储中），该密钥用于加密客户拥有的数据购买。当然，我们发送给客户的每月数据将使用相同的密钥进行加密。

所以我的问题是：对于这个用例来说，AIR 的数据库加密和安全的本地存储是否足够安全？如果有人得到加密的数据库文件，他可以解密数据库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T12:13:32.870

我认为 AIR 中的加密存储与操作系统本身一样安全。我会更担心设计的其他部分。例如，您如何在每个客户端上安装密钥？

现在的趋势是构建一个瘦客户端并通过互联网访问所有内容。特定于客户端的数据将在身份验证后由您的服务器提供。这种方法可能被证明更容易部署。

总的来说，我认为你的方法听起来很可靠。

# android - 我有一些非常庞大的字符串数据要随我的 android 应用程序一起提供？

> ID：10055633
> 
> 赞同：0
> 
> 时间：2012-04-07T15:15:32.597
> 
> 标签：android, sqlite

我的 android 应用程序需要一些非常庞大的数据。我现在已经把它放到了一个 sqlite 数据库中。大约是 39k 行和 5 列。我希望这些数据可用于我的应用程序。

我对如何使用它发布我的应用程序感到有点困惑。我可以像在[这个线程](https://stackoverflow.com/questions/513084/how-to-ship-an-android-application-with-a-database)中讨论的那样发送 db 文件。或者我可以以某种方式从该数据中创建 XML 并将其发送出去。但是 XML 会非常庞大​​。那么正确的做法是什么？

我不想在用户安装应用程序后下载它。如果没有更好的清洁方法，那将是我的最后选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:10:47.023

Check the [example here](https://stackoverflow.com/a/9109728/265167) to achieve this functionality.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:27:46.903

这应该可以帮助你。

[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

基本上只需将数据库与您的 apk 文件一起发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T15:48:29.863

我认为运送您的数据库可能会导致兼容性问题。

也许使用捆绑到您的 .APK 的 GZIP 的 SQL 代码会更好？[或者，您可以使用google protobuf](http://code.google.com/p/protobuf/)代替 XML 进行中间表示，这是最有效的数据表示格式（此外，如果您有很多字符串，可以将其与 GZIP 结合使用）。

# extjs - 如何更改浏览器中视口的百分比？

> ID：10055640
> 
> 赞同：1
> 
> 时间：2012-04-07T15:16:16.067
> 
> 标签：extjs

我的视口适合所有浏览器，但我希望它只适合浏览器宽度的 80%。我该怎么做？这是我下面的代码，也许你想看看。

这是我的视口代码： var view = new Ext.Viewport({ layout: 'border', autoScroll: true, border: true, items:[header,menuBar ,{ region: 'south', collapsible: false, padding: ' 25 25 25 25' , html:'

**2012 年圣吉斯队**

'，边框：真，高度：100}，内容]}）；

```
Ext.onReady(function(){
//var topHTML = '<img style="margin-left: 5px" src="Google_maps_logo.png" alt="logo" height="60" width="380">';
//Ext.BLANK_IMAGE_URL = 'extjs/resources/images/default/s.gif';

            Ext.QuickTips.init();

            var item1 = new Ext.Panel({
                title: 'Kan Bağışı',
                collapsible :   true,
                collapsed: true,
                padding: '5 5 5 5' ,
                html: '<a href="#">Nerede Kan verebilirim?</a><br/>' +
                      '<a href="#">Kan Bağışlama Süreci</a>'
            });

            var item2 = new Ext.Panel({
                title: 'Kan Hakkında',
                collapsed: true,
                padding: '5 5 5 5' ,
                collapsible :   true,
                html: '<a href="#">Kanın Yapısı ve Görevleri Nelerdir?</a><br/>' +
                      '<a href="#">Kan Bağışlarım Nerede kullanılıyor</a><br/>'+
                      '<a href="#">Kan Grupları Hakkında Bilgiler</a><br/>'+
                      '<a href="#">Kana Yapılan Testler</a><br/>'+
                      '<a href="#">Dünya ve Türkiyede Kan Bağışı</a>'
            });

            var item3 = new Ext.Panel({
                title: '<a style="color: #FFFFFF;" href="#">Sıkça Sorulan Sorular</a>',
                collapsible :false,
                titleCollapse: false

            });

            var item4 = new Ext.Panel({
                title: 'Site Kullanımı',
                collapsed: true,
                padding: '5 5 5 5' ,
                collapsible :   true,
                html: '<a href="#">Site Nasıl Çalışmaktadır</a><br/>' +
                      '<a href="#">Kan İsteğinde Nasıl Bulunabilirim?</a><br/>'
            });

            var item5 = new Ext.Panel({
                padding: '5 5 5 5' ,
                title: 'Kullanıcı Girişi',
                bodyStyle   :   'padding : 10px',
                layout      :   'form',

                items:  [
                {
                    xtype:  'field',
                    fieldLabel: 'E-posta',
                    width:  100
                },{
                    xtype:  'field',
                    fieldLabel: 'Şifre',
                    inputType:'password',
                    width:  100
                },
                {
                    xtype:  'button',
                    text:   'Giriş',
                    style: {
                    marginLeft: '170px'
                    },
                    align:  'right',
                    handler     :   function(btn){
                    Ext.MessageBox.alert('','kontrol yapılacak!!');
                    }
                },
                {
                    border  : false,
                    html:'<a href="#">Şifremi Unuttum</a>'
                }
                ]
            });

            var item6 =new Ext.Panel({
                border: false,
                html: '<a href="kayit.html"><img src="../images/kaydol.jpg" /></a>'
            });

        var menuBar = new Ext.Panel({
            //layout: 'accordion',
            autoScroll: true,
            defaults: {autoScroll: true},
            region: 'west',
            width: 310,
            defaults: {
                hideCollapseTool : false,
                //border: true
            },
            layoutConfig: {
//              titleCollapse: false,
                animate: true,
//              activeOnTop: true,
                autoScroll: true

            },

            margins:'5 0 5 5',
            split:false,
            items: [item1, item2, item4, item3, item5,item6]
        });

        var content = new Ext.Panel({
            region: 'center',
            autoScroll: true,
            margins:'5 5 5 0',
            layoutConfig : {
                align : 'stretch'
            },
            html:'Ajax content will come here'
        });

        var header=new Ext.Panel({
            renderTo: document.body,
            layout: 'fit',
            region: 'north',
            html: '<p align="center"><img src="../images/banner.jpg" align="middle"/></p>',
            height:150,
            tbar: [
            {
                text: '<b>Ana Sayfa</b>',
                iconCls: 'bmenu',  
                handler: function(){ alert('blah'); }
            },
            {
                text: '<b>Hakkımızda</b>',
                iconCls: 'bmenu', 
                handler: function(){ alert('blah'); }
            },
            {
                text: '<b>Duyurular</b>',
                iconCls: 'bmenu', 
                handler: function(){ 
            }
            },
            {
                text: '<b>İletişim</b>',
                iconCls: 'bmenu',  // <-- icon
                handler: function(){ alert('blah'); }
            }]
        });

        var view = new Ext.Viewport({
            layout: 'border',
            autoScroll: true,
            border: true,
            items:[header,menuBar
            ,{
                region: 'south',
                collapsible: false,
                padding: '25 25 25 25' ,
                html:'<br/><br/><p align="center"><b>Sanguis Team 2012</b></p>',
                border: true,
                height: 100
            },content
            ]
        });

        /*var templates = new Ext.Window({
            width:900,
            height:700,
            id:'Templates',
            resizable:false,
            //layout:'border',
            //border:true,
            closable:false,
            title:'Plantillas',
            items:view
        });

        templates.show();*/

//      view.render('anasayfa');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T16:48:16.623

视口上没有 maxwidth 属性，因为视口始终是窗口的大小。

这有效：

1.  使用视口，将其布局设置为锚点
2.  将容器添加到视口
3.  将其锚属性设置为 '80% 100%'
4.  把你想要的东西放在容器里。如果需要，您可以提供容器边框布局

# video - 确定视频文件的位深度

> ID：10055641
> 
> 赞同：3
> 
> 时间：2012-04-07T15:16:25.833
> 
> 标签：video, bit, depth

我试图找到特定视频文件的位深度。有谁知道我可以用来找到这个的任何工具吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T23:08:08.243

[Mediainfo](http://mediainfo.sourceforge.net)将显示这一点。

有一个可用的 GUI，或者如果您只想要一个命令来仅提取您可以使用的位深度：

```
mediainfo --Output='Video;%BitDepth%' myvideo.mp4 
```

# javascript - 检查用户访问了哪个链接？

> ID：10055642
> 
> 赞同：1
> 
> 时间：2012-04-07T15:16:36.693
> 
> 标签：javascript, jquery, asp.net-mvc

大家都知道MVC中的母版页是这样的：

```
<nav>
     <ul id="menu">
         <li id="id1"><%: Html.ActionLink(...)%></li>
         <li id="id2"><%: Html.ActionLink(...)%></li>
         <li id="id3"><%: Html.ActionLink(...)%></li>
     </ul>
</nav> 
```

如何检查用户点击了哪个标签？通过检查网址或其他方式？所有这些链接都指向不同控制器中的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:35:34.843

该方法（操作）将（通常）返回一个视图，您将在浏览器中看到该视图作为输出（除非您在操作方法中指定其他内容）。

ASP.NET MVC 中没有与页面请求/链接直接相关的页面。我认为您应该了解 MVC 工作原理的一些基本概念。

当我们请求页面时，请求由控制器中的操作方法处理。然后 action 方法将返回输出并显示在浏览器中。action 方法可以简单地返回一个“Hello World”字符串或一个具有一些复杂 HTML 标记的 View。返回视图意味着返回视图文件夹中可用的文件的内容。

记住 ASP.NET MVC 在某些约定上工作。因此，例如，如果我们有一个名为“User”的控制器和一个像这样的操作方法 Show

```
public class UserController
{
 public ActionResult Show()
 {
   return "Hello World";
 }

} 
```

当用户浏览器时`yourdomainname/User/Show`，会执行 UserController 的 Show Action 方法并返回字符串“Hello World”。所以我们会在浏览器中看到“Hello World”。

如果我们想返回一个 View 怎么办？我们像这样替换 Show 方法

```
 public ActionResult Show()
 {
   return View();
 } 
```

正如我之前告诉你的，我们现在需要遵守约定。这意味着，我们必须在`Views->User->Folder`名为 Show.cshtml 的视图中创建一个文件。如果此文件存在，MVC 将返回该文件，否则它将在您的视图文件夹中查找一些共享文件夹。

要添加视图，您可以右键单击您的操作方法，然后从上下文菜单中选择“添加视图”

![在此处输入图像描述](../Images/87cb62096c2d958fb45e1d04684e08ae.png)

一件好事是我们可以覆盖约定，这意味着，如果您想返回不同的视图，您可以在调用 View 方法时指定路径。

现在回到你的问题 Html.ActionLink 是一个 HTML 辅助方法，它将输出一个锚标记，

前任 ：`Html.ActionLink("Show User Info","Show","User")`

这将输出一个链接，其中包含文本显示用户信息，并将指向控制器中的`Show`操作方法`User`。所以调用上述方法的输出 HTML 标记将是

```
<a href="User/Show">Show User Info</a> 
```

此方法有不同的重载。

**编辑：用于突出显示被点击的链接**

如果您想通过着色来了解单击了哪个链接，请使用部分视图来显示您的菜单。当你得到一个动作调用方法时，在你的 Viewmodel 中设置一个 Property 值，它指示点击了哪个链接，在你的 View 中，使用该视图模型来调用局部视图。

[http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:40:03.473

document.location.href 就是我所需要的。

# android - 将安卓短信备份到gmail？

> ID：10055649
> 
> 赞同：0
> 
> 时间：2012-04-07T15:17:35.593
> 
> 标签：android, email, gmail-imap

我正在尝试从谷歌代码中学习，但遇到了一些问题。

1.  什么是 imapstore.jar？**如何得到它？**
2.  所有“import com.android.email.mail.*”都无法解决，**如何解决？**

我已经搜索过了，但仍然找不到答案，我希望我能在这里得到一些帮助。有人能帮我吗？请

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:49:39.060

imapstore.jar 是我认为您想要使用的外部库。当您将该库添加到构建路径时，导入语句应该自行解决。[您可以从http://android-sms.googlecode.com/svn/trunk/android-client/external/imapstore.jar](http://android-sms.googlecode.com/svn/trunk/android-client/external/imapstore.jar)获取该库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T17:26:48.667

这个包是在“imap.protocol”包上实现的，它实现了协议级命令。

连接的 IMAPStore 维护一个 IMAP 协议对象池，用于与 IMAP 服务器通信。IMAPStore 将创建初始 AUTHENTICATED 连接并使用此连接为池播种。当打开文件夹并且需要新的 IMAP 协议对象时，IMAPStore 将从连接池中提供它们，或者如果没有可用的，则创建它们。关闭文件夹时，如果池未超出容量，则将其 IMAP 协议对象返回到连接池。可以通过设置 mail.imap.connectionpoolsize 属性来配置池大小。

欲了解更多信息，请访问此链接：

[http://www.jarvana.com/jarvana/view/javax/mail/mail/1.4/mail-1.4-sources.jar!/com/sun/mail/imap/IMAPStore.java?format=ok](http://www.jarvana.com/jarvana/view/javax/mail/mail/1.4/mail-1.4-sources.jar!/com/sun/mail/imap/IMAPStore.java?format=ok)

# javascript - jQuery多个滑块互连

> ID：10055650
> 
> 赞同：1
> 
> 时间：2012-04-07T15:18:05.540
> 
> 标签：javascript, jquery, slider

我尝试设置 3 个 jquery ui 滑块互连，3 个滑块的总和必须始终保持在 100，因此当我更改一个滑块的值时，其他滑块必须更新。

例如，如果一个滑块的值为 40，而我将此值提高到 50，则其他两个滑块必须减少 5。

任何人都可以帮助我吗？谢谢'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:15:26.983

在任何情况下，高值的概率都是 50...所以将所有三个滑块设置为 0 到 50...并且它们的类为 class="selector inactive"

```
$(".selector").slide(function(event, ui){

    $(event.srcElement).removeClass('inactive');

    var valuechange = 0;

    $('.inactive').each(function(value, item){
       // get sum of other two sliders
       valuechange += $(item).slider( "option", "value");
    });

    // subtract sum(othertwo) + this value with 100 to get current changed value
    valuechange = (valuechange + (ui.values[0])) - 100;

    $('.inactive').each(function(value, item){
          // add other sliders values to changedvalue / 2
          $(item).slider( "option", "value", $(item).slider( "option", "value") + (( valuechange / 2) * -1));
    });

    $(event.srcElement).toggleClass('inactive');
}); 
```

希望这解决了你的问题

# xml - 语义网的 XML 和 RDF

> ID：10055651
> 
> 赞同：0
> 
> 时间：2012-04-07T15:18:11.400
> 
> 标签：xml, rdf

我很困惑为什么 RDF 比 XML 更适合语义网。例如，在 RDF 中，我有以下主语、谓语、宾语三元组

```
<rdf:Description rdf:about=“#York”&gt;
    <tel>6086592</tel>
</rdf:Description> 
```

我可以用 XML 写类似的东西

```
<person name="#York">
     <tel>6086592</tel>
</person> 
```

那么使用 RDF 有什么意义呢。需要澄清一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:21:44.267

RDF 的重点是 RDF 三元组的集合（在谓词的某些本体的上下文中解释）是知识的*系统化*表示。

相比之下，虽然 XML 也可以解释为知识，但没有框架可以将一组 XML 文档和模式与另一组相关联。

另一个区别是RDF 是一个“开放的”信息模型……从某种意义上说，您可以随意添加新的知识形式（例如新的谓词URL）。相比之下，XML 受显式模式的约束，如果没有，则受工具处理特定 XML 结构的能力的限制。这些往往会使基于 XML 的信息模型“封闭”。

您可以简单地将任何 RDF 三元组集合表示为 XML。（您的示例确实做到了这一点！）RDF (+ OWL) 与普通 XML 的不同之处在于它更丰富、更灵活的信息/知识建模方式。

（这有点像比较汇编语言和 Java。它们在计算上是等价的，但 Java 更具表现力，因此更易于使用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T00:17:31.880

XML 只是数据的一种语法，RDF 试图提供一个描述数据的框架。使用 XML，它是一种方便的、机器可读的格式，您可以验证 (DTD)、转换 (XSLT) 或查询 (XPath) 的格式。但它试图为数据提供任何形式的含义，这取决于读取它的任何内容，并且它可能因应用程序而异。

使用 RDF 的好处之一是您可以使用标准 RDF[模型理论](http://www.w3.org/TR/rdf-mt/)、[RDFS](http://www.w3.org/TR/rdf-schema/)之类的东西或使用任何[OWL2](http://www.w3.org/TR/owl-primer/)配置文件的非常富有表现力的语义来为数据附加形式含义。

RDF 可以表示为 XML，但不要纠结于此。RDF 有很多语法，其中大多数比 RDF/XML 更人性化，例如 Turtle。随心所欲地表示数据，含义保持不变。

您可能会发现[RDF 入门](http://www.w3.org/TR/rdf-primer/)是一个有用的地方，可以开始更多地了解 RDF 以及它的用途。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-08T07:53:30.983

XML 数据模型是一棵树。RDF 数据模型是一个图。

树是一个无向图，其中任何两个顶点都通过一个简单的路径连接。您可以使用 XML 表示图形，但不像使用 RDF 那样简单自然。

# android - Android：导航单选按钮

> ID：10055655
> 
> 赞同：0
> 
> 时间：2012-04-07T15:18:29.420
> 
> 标签：android, navigation, radio-button

我正在编写一个应用程序，我想在其中限制一个用户组对菜单部分的访问。该用户组没有精细的运动技能，因此我决定使用滑块或其他需要精确手部动作的方法来访问菜单。

我一直在尝试使用单选按钮来做到这一点；我有 3 个单选按钮，我想拥有它，这样当它们都被选中时，它们（单选按钮）变得不可见，并且允许用户导航到下一个菜单屏幕的按钮变得可见。

我一直在阅读，但不确定如何做到这一点。任何将我指向正确方向的代码或提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T14:28:48.030

使用以下方法对其进行排序：

在 XML 中：

```
 <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:onClick="onCheckboxClicked"
        android:text="" />

    <CheckBox
        android:id="@+id/checkBox2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:onClick="onSecondCheckboxClicked"
        android:visibility="gone"        
        android:text="" /> 
```

在 Java 中：

```
public void onCheckboxClicked(View v) {
    CheckBox cb2 = (CheckBox) findViewById(R.id.checkBox2);
    // Perform action on clicks, depending on whether it's now checked
    if (((CheckBox) v).isChecked()) {
        // Toast.makeText(MainPage.this, "Selected",
        // Toast.LENGTH_SHORT).show();
        cb2.setVisibility(View.VISIBLE);
    }
}

public void onSecondCheckboxClicked(View v2) {
    Button button = (Button) findViewById(R.id.access_adult_controls);
    if (((CheckBox) v2).isChecked()) {
        button.setVisibility(View.VISIBLE);
    }
} 
```

# asp.net - 如何使用 C# 在 ASP.NET 应用程序的文件夹中查找文件？

> ID：10055659
> 
> 赞同：0
> 
> 时间：2012-04-07T15:19:16.123
> 
> 标签：asp.net, c#-4.0

我创建了一个 Asp.net 应用程序。

它包含一个名为 PDF 的文件夹和一个位于其下方的名为 Requirement 的文件夹。

我在另一个页面中有一个名为 Requirement 的链接。

如果我单击该链接，我需要在 PDF/Requirement 文件夹中找到所有文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:38:19.710

```
var getFileName = Directory.GetFiles(Server.MapPath("~/PDF/Requirement"));  // Collection Of file name with extention.

var getFileNameExcludeSomeExtension1 = from f in Directory.GetFiles(Server.MapPath("~/PDF/Requirement"))
                                       where Path.GetExtension(f) != ".scc" && Path.GetExtension(f) != ".db"
                                       select Path.GetFileNameWithoutExtension(f);   // Collection Of file name with extention and filtering.

var getFileNameExcludeSomeExtension2 = from f in Directory.GetFiles(Server.MapPath("~/PDF/Requirement"))
                                       where Path.GetExtension(f) != ".scc" && Path.GetExtension(f) != ".db"
                                       select Path.GetFileName(f);   // Collection Of file name with out extention and filtering. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T16:30:38.277

我建议使用 EnumerateFiles 作为这个 正则[表达式来查找文件夹中的文件](https://stackoverflow.com/questions/3554559/regex-to-find-a-file-in-folder)，如果您尝试 GetFiles 不是因为性能，您可能会看到[这方面的差异 Directory.EnumerateFiles 与 Directory.GetFiles 有什么区别？](https://stackoverflow.com/questions/5669617/what-is-the-difference-between-directory-enumeratefiles-vs-directory-getfiles)

# java - 有什么办法可以继续被意外杀死的Nutch Crawl任务吗？

> ID：10055662
> 
> 赞同：0
> 
> 时间：2012-04-07T15:19:39.207
> 
> 标签：java, lucene, web-crawler, nutch

我有一个 Nutch 爬行任务，它已经运行了一整天，直到我错误地终止了该过程。

我不想重新爬取种子（花费很多时间），所以我想知道那里是否有一种方法或一些 Nutch Crawler 参数可以使爬虫忽略那些已经爬过的网址。

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T03:24:43.513

开始爬网后，可能会在输出目录中创建一些段。使用[bin/nutch](http://wiki.apache.org/nutch/bin/nutch_crawl)命令和指向`-dir`上一次运行的输出目录的选项。对于`urlDir`参数，创建一个具有单个 url 的虚拟对象（如果 urldir 中没有任何 url，则只是为了避免错误。）

# java - 安卓导弹精灵

> ID：10055667
> 
> 赞同：-1
> 
> 时间：2012-04-07T15:20:12.813
> 
> 标签：java, android, android-canvas, sprite

我正在尝试制作一个 onTouchEvent 来创建一个从我的角色精灵发射并向前发射的导弹。我有这个工作使用

```
 if (missdraw = true){
            canvas.drawBitmap(missile,missilex,missileY,null);
            missilex = missilex + 14;
            missdraw = false;
        } 
```

在我的 onDraw 方法中，但问题是它一次只会创建一个。我试图创建一个类来处理这个问题，但这只会在我尝试触发时导致错误和崩溃。这是我在课堂上使用的：（这是在我的游戏视图中的 ondraw 中）

```
 for (Batcher missile : missiles ){
            missile.onDraw(canvas);
        } 
```

这是在课堂上

```
public Batcher(List<Batcher> temps, ScreenActivity newView, float x,
        float y, Bitmap missile){

    this.x = 1;
    this.y = 2;
    this.missile = missile;

}

public void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    canvas.drawBitmap(missile, x,y, null);

} 
```

我会很感激任何帮助，但如果你能解释它是如何工作的，而不仅仅是代码，因为我对编程很陌生，并且真的需要了解我在做什么以及我为什么这样做，而不是仅仅复制人们的代码，因为有用。

干杯菲尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:11:35.067

实际上，您的概念非常好。关于您发布的代码示例，有几件事我不太了解，我会尝试翻译成我会做的事情，如果我做错了，您可以告诉我:)

在你的游戏类中，你需要（看起来你有）一个导弹列表：

```
LinkedList<Batcher> missiles; 
```

然而，在你`onTouch()`的身上制造了一枚导弹——

```
missiles.add(new Batcher(missilex, missiley, missile)); 
```

你现在有一个导弹集合。请注意，我没有在批处理器的构造函数中包含列表，因为对象永远不需要知道它是集合的一部分。它只需要知道如何绘制自己以及在哪里绘制。因为我假设你所有的导弹都会频繁地添加到屏幕上或从屏幕上移除，而一次只有几个在屏幕上，所以我使用了 LinkedList，它的添加和移除速度很快，但访问速度很慢特定导弹。如果您需要访问集合中的特定项目并且集合没有太大变化，则可以使用 ArrayList 代替。继续 onDraw - 当你拥有它时，导弹会自行绘制，这很好，但我更喜欢让 View 进行绘图，导弹告诉它应该在哪里绘制 -

```
for (Batcher missile : missiles ){
  missile.setX(missile.getX() + 14); // to make it move
  if (missile.getX() > canvas.gedWidth()) { //check if it's left the screen
    missiles.remove(missile); // Remove it
  }
  else { //perform drawing
    canvas.drawBitmap(missile.getBitmap(), missile.getX(), missile.getY(), null);
  }
} 
```

希望这对你有用，但如果你有什么想让我解释的，请随时告诉我！

# concatenation - 如果一个正则语言只包含 Kleene 星，那么它有可能来自两个非常规语言的串联吗？

> ID：10055669
> 
> 赞同：1
> 
> 时间：2012-04-07T15:20:25.603
> 
> 标签：concatenation, theory, regular-language, kleene-star

我想知道，给定一个只包含 Kleene 星号运算符（例如（ab）*）的常规语言 L，是否可以通过连接两种非常规语言来生成 L？我试图证明 L 只能由两种常规语言的连接生成。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-26T21:32:28.903

这种说法是错误的。在 Σ = {a} 上考虑这两种语言：

> L [1] = { 一个^n | n 是 2 的幂 } ∪ { ε }
> 
> L [2] = { 一个^n | n*不是*2 的幂 } ∪ { ε }

这两种语言都不是正则的（第一种可以通过 Myhill-Nerode 定理证明是非常规的，而第二种与 L [1]的补码密切相关，也可以证明是非常规的。

但是，我要声明 L [1] L [2] = a*。首先，请注意串联 L [1] L [2]中的任何字符串都具有 a ^n的形式，因此是 a* 的元素。接下来，取 a* 中的任意字符串；让它成为一个^n。如果 n 是 2 的幂，则它可以由 L [1中的]^(n和 L) [2]中的ε的串联形成。否则，n 不是 2 的幂，它可以由来自 L [1]的 ε和来自 L [2的]^n的串联形成。因此，L [1] L [2] = a*，所以你要证明的定理是错误的。

希望这可以帮助！

# c# - 引用不在根位置的第 3 方程序集

> ID：10055670
> 
> 赞同：1
> 
> 时间：2012-04-07T15:20:52.430
> 
> 标签：c#, .net, visual-studio-2010, .net-assembly

我有一个创建 .exe 的 Visual Studio 2010 C# 项目，该项目正在使用一些第 3 方类库。我的项目位于：/MyFramWork/tests/test1 3rd 方库位于：/MyFrameWork/bin/utils/

我正在使用 References->Add Reference->Browse 添加对库的引用。我可以在项目文件中看到一切都很好： ....\bin\utils\log4net.dll False

我想在不使用“复制本地”选项的情况下引用第 3 方库。但是，如果我不使用该选项，则找不到该库，并且会出现异常。

我的问题是：有没有办法指定应该在 ....\bin\utils 找到第 3 方库。似乎当 .exe 构建时，来自 .csproj 的信息会丢失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:50:15.793

默认情况下，.NET 应用程序仅在两个位置查找它们的依赖项：EXE 目录和 GAC（全局程序集缓存）。

你有三个选择：

*   您可以确保将依赖项复制到与您的 EXE 相同的目录中（这就是 Copy Local 所做的）。大多数情况下，这是最佳选择，这就是为什么当您引用尚未在 GAC 中的程序集时，它是默认选择。
*   您可以使用[`gacutil`](http://msdn.microsoft.com/en-us/library/ex0ss12c.aspx). 如果您的依赖项不会改变，这可能是一个不错的选择，它将位于每台开发机器上的不同位置（即，如果相对路径无法正常工作），并且如果您想从许多不同的地方使用它项目。但是，如果依赖项仍在积极开发中并经常更改，那将是一个很大的痛苦。您还需要确保将 DLL 放入您部署应用程序的每台计算机上的 GAC。
*   正如 Hans 在他的评论中指出的那样，您可以自定义依赖项加载行为，使其在其他地方看起来。这是一个高级选项，并带来了一系列全新的问题。

通常，您只需使用 Copy Local；这是一个非常明智的默认设置。你应该需要一个相当有说服力的理由来做任何不同的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:42:22.367

使用该[`<probing>`](http://msdn.microsoft.com/en-us/library/823z9h8w.aspx)元素指定 CLR 应在何处搜索您的程序集。唯一的限制是程序集必须位于应用程序基目录的子目录中。

例如，如果您的应用程序基目录是`C:\MyFramework`，那么您可以将程序集放在`C:\MyFramework\bin`.

查看[本文](http://msdn.microsoft.com/en-us/library/yx7xezcf.aspx)以了解 CLR 如何搜索程序集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T18:00:19.663

如果您需要从自定义位置加载程序集，您可以尝试使用*Assembly.LoadFile*方法。

以下链接可能有用：

[C# - 加载程序集、查找类和调用 Run() 方法的正确方法](https://stackoverflow.com/questions/1137781/c-sharp-correct-way-to-load-assembly-find-class-and-call-run-method)

[http://www.csharp-examples.net/reflection-examples/](http://www.csharp-examples.net/reflection-examples/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T08:58:27.840

是我波宗。我仍在调查这个非常愚蠢的问题。

我一直希望有一些优雅的解决方案。我将要构建相当大的框架，其中包含许多将放置在 /Framework/bin/ 中的程序集。但是我想在目录中有一些目录结构，例如 /bin/utils、/bin/test、/bin/devices/ 等等。

我发现的一种可能的解决方案是定义环境变量 DEVPATH（请参阅此处[http://msdn.microsoft.com/en-us/library/cskzh7h6.aspx](http://msdn.microsoft.com/en-us/library/cskzh7h6.aspx)），但事实证明 .net4 在程序集是独立运行的（在视觉工作室之外），或者至少对我来说是这样 - 我无法让它工作。

似乎将所有程序集放在 /bin 目录中而不使用子目录的解决方案是最好的。我想我会放弃，就这样去做。

# iphone - UITableVIew reloadSections:withAnimation:withoutHassle

> ID：10055671
> 
> 赞同：1
> 
> 时间：2012-04-07T15:20:57.370
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个有几个section的UITableView，section的数量是动态的，也就是可以随时增加。在表视图上重新加载带有动画的部分，其中部分的数量不是什么大问题。我只是这样称呼：

```
[notesTableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

但是，当部分数量发生变化时，让这个工作变得非常痛苦。我总是得到那个典型的断言错误`"The number of sections in your tableview before the reload must be the same as after the reload..etc"`。我知道我应该用`[tableView insertSections...]`它来摆脱这个，但在我的情况下这样做可能很困难。

我的部分数量取决于数组的大小。无论如何都可以自动重新加载带有动画的部分，就像调用一样简单`[tableView reloadData]`，而不必担心手动插入行和部分？

（我知道一个廉价的解决方法是使用 UIView 动画或 CAAnimation，但这与 reloadSections withAnimation 方法的效果并不完全相同。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:00:15.563

这是您在玩弄`FetchedViewControllers`. 您收到该错误的原因是因为您正在删除 中的对象`dataSource`，并且 tableView 尝试加载 tableView，并查看 delegateMethods - 它表明您的部分少于指定的部分。

你有两个选择：

1.  实现`FetchedResultsController`委托方法并实现`objectWillChange`（或）`objectDidChange`方法，在里面说类似

    ```
    [[self tableView] reloadData]; 

    // or

    [[self tableView] endUpdates]; 
    ```

    那应该可以解决问题。

2.  实现通知（当您删除不同 managedObjectContexts 下的数据时），并在`NSManagedObjectContextDidSave`(or)时发布通知`NSManagedObjectContextDidChange`。然后你必须添加一个观察者来合并通知的变化。但我怀疑你的问题是否严重。我想说选项（1）应该足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-08T09:04:42.563

//创建NSMutableSet `[self.tableView beginUpdates]; if (isAdd) { [self.tableView insertSections:insertIndexSet withRowAnimation:UITableViewRowAnimationBottom]; } else{ [self.tableView deleteSections:insertIndexSet withRowAnimation:UITableViewRowAnimationTop]; } [self.tableView endUpdates];`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-07T15:35:51.000

我不知道这是否适用于动画，但它应该......

在您的 UItableView 实现中，将您的`numberOfSections`方法更改为如下所示：

```
- (NSInteger)numberOfSections
{
    return numberOfSections;
} 
```

*numberOfSections*是一个 NSInteger，它会在需要时更改。

更改此号码后尝试拨打：

```
[tableView reloadData]; 
```

你的 UITableView 应该相应地改变。

编辑：我将它与动画一起使用，但我再次不确定它是否适用于您的情况。它适用于我的编辑风格、插入和删除行以及对我的内容进行一般更新。

当您需要更改 UITableView 内容时，请输入以下内容：

```
[tableView beginUpdates];
// Here change your contents
[tableView endUpdates]; 
```

# matlab - 从对象数组中获取最小属性值

> ID：10055673
> 
> 赞同：3
> 
> 时间：2012-04-07T15:21:00.477
> 
> 标签：matlab

抱歉，如果这是一个愚蠢的问题，我对 Matlab 比较陌生。

我有一个 Rectangle 类的矩形数组，`minx, miny, maxx, maxy`其属性代表角坐标。

我正在尝试获取数组中左上角矩形的索引。

我可以遍历对象以获取对应于最小 x 和 y 坐标的对象，但这似乎不是一个非常 matlabic（matlabian？听起来不如 pythonic 好）的方法。

```
minx = -1
miny = -1
tl_rect_id = 0

for id = 1:num_objects
    if ((rectangles(id).minx < minx || minx == -1) && (rectangles(id).miny < miny || miny == -1)) 
        tl_rect_id = id
        minx = rectangles(id).minx
        miny = rectangles(id).miny

    end

    % plot coordinates of top left corners
    plot(rectangles(id).minx,rectangles(id).miny,'+r')
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T16:16:43.793

您不需要使用 arrayfun 对 matlab 中的对象数组进行操作。从对象数组中获取属性数组有一个非常有用的简写：

```
[rectangles.minx] 
```

这会产生`minx`数组中的所有矩形。

所以要知道哪个点最接近原点，我会计算到原点的良好欧几里得距离。有了手头的向量，这**真的**很简单。

欧式距离定义如下：

```
d(a,b) = sqrt( (a.x - b.x)^2 + (a.y - b.y)^2); 
```

用你的向量计算它：

```
distances = sqrt([rectangles.minx].^2 + [rectangles.miny].^2) 
```

这将产生一个包含所有点距离的向量。找到最小值很简单：

[~, idx] = min(距离);

min 函数返回一个 1x2 数组，第一个位置是最小值，第二个是索引。我使用 matlab 表示法表示`[~, idx]`我对第一个返回值不感兴趣，第二个应该存储在变量`idx`中。

我编写了一个示例，其中我创建了我的矩形类只是为了测试它，但它也适用于您的类。下面是我定义的类的代码和计算最接近 (0,0) 的点的代码。

运行它来发挥这个想法并使其适应您的需求:)

测试类定义（将其保存在名为 Rectangle.m 的文件中）：

```
classdef Rectangle
    properties
        minx;
        miny;
    end
    methods
        function obj = Rectangle(v1,v2)
         if nargin > 1
            obj.minx = v1;
            obj.miny = v2;
         end
      end
    end
end 
```

代码

```
clear all;
numRect = 100;
rect_array = Rectangle(numRect);

% initialize rectangles
for n=1:numRect
    r = Rectangle;
    r.minx = 100*rand(1,1);
    r.miny = 100*rand(1,1);
    rect_array(n) = r;
end

% find point closest to the origin

[~, idx] = min(sqrt([rect_array.minx].^2 + [rect_array.miny].^2));

close all;
figure;
% plot the points in blue
plot([rect_array.minx],[rect_array.miny],'b.');
hold on;
% mark a red cross on the point closest to the origin
plot(rect_array(idx).minx, rect_array(idx).miny, 'rx'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T15:34:10.107

您的代码正在查找更靠左的矩形或最靠上的矩形。如果您不担心 minx 具有相同值的多个 retangles，您可以这样做

```
[v i] = min(arrayfun(@(i)rectangles(i).minx, 1:num_objects))
fprintf('Furthest left rectangle is %g\n', i); 
```

或者，您可以这样做：

```
[v i] = sortrows(cell2mat(arrayfun(@(i)[rectangles(i).minx; rectangles(i).miny], 1:num_objects, 'uniformoutput', 0))');
fprintf('Furthest left rectangle is %g\n', i(1)); 
```

它将按 X 然后 Y 排序，然后按此顺序取第一个。这比较慢，因为它会进行排序。要获得上述算法的确切行为，您可能应该坚持使用 for 循环，我认为简洁地这样做会很麻烦。

# objective-c - ObjC 是“运行时语言”吗？

> ID：10055675
> 
> 赞同：-2
> 
> 时间：2012-04-07T15:21:04.133
> 
> 标签：objective-c, terminology

谁能告诉我为什么 Objective-C 被称为“运行时语言”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T15:23:48.490

从技术上讲，它不是一种运行时语言——然而，它是一种*面向*运行时的语言。

> Objective-C 是一种面向运行时的语言，这意味着在可能的情况下，它会将关于实际执行什么的决定从编译和链接时间推迟到它在运行时实际执行的时间。

从[这里](http://cocoasamurai.blogspot.com/2010/01/understanding-objective-c-runtime.html)。

# xcode - CoreData '名称必须以小写字母开头' - 我可以解决这个问题吗？

> ID：10055679
> 
> 赞同：1
> 
> 时间：2012-04-07T15:21:36.460
> 
> 标签：xcode, core-data, naming-conventions

当我第一次开始我的 iOS 项目时，我可以在核心数据中使用大写字母来开始我的属性名称（名字、姓氏等...）。这对我非常有利，因为我使用 Web 服务和 plist 将数据输入 CoreData，并且如果所有属性名称完全匹配，插入到本地 CoraData DB 中的对象的创建将大大简化并且超级快速。到目前为止，这还不是问题。目前在 xCode 4.3.1 中，我无法绕过命名约定限制，这让我非常头疼，因为我的远程数据库使用大写字母作为列名，而这又与我的本地 CoreData 属性不匹配。

无论如何在xCode中解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T17:28:33.933

将第一个字符转换为小写的函数：

```
-(NSString *)refactorAttributeName:(NSString*)name {
   NSString *first = [[name substringToIndex:1] lowercaseString];
   return [name stringByReplacingCharactersInRange:NSMakeRange(0, 1) 
                                        withString:first];            
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T15:26:28.583

简单的答案是否定的。如果您可以控制数据从远程数据库传出的方式，您可以执行以下操作：

```
Select FirstName as firstName, LastName as lastName ... 
```

如果这太麻烦了，那么您要么需要将这些映射到您的项目中，要么不使用 Xcode 4.3 及更高版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T20:58:24.327

您可以随时进入模型包并手动编辑内容文件。并不意味着这个新标准以后不会咬你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T10:53:34.497

我想你可以尝试在 4.2 中使用 big letter 打开同一个项目，然后在 4.3 中重新打开，这将遵守旧约定

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T19:17:22.277

我有类似的问题 - 我想使用以小写字母开头的实体名称，而 xcode 要求使用以大写字母开头的名称。我通过以下方式解决了这个问题：

1.  为实体创建 NSManagedObject 子类 - 编辑器菜单中可用的选项
2.  使用 xcode 重构来更改创建的子类的名称

重构也改变了数据模型中实体的名称。我相信可以使用相同的方法来更改属性的名称。我使用了 xcode 4.6.1。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-07T10:13:20.673

在将我的 Web 服务 JSON 响应映射到我的核心数据模型时，我遇到了同样的问题。我没有更改核心数据模型，而是通过将映射代码更改为以下内容来解决它：

```
for (NSString *key in json) {
     NSString *keyWithFirstCharLowered = [key stringByReplacingCharactersInRange:NSMakeRange(0, 1) withString:[[key substringToIndex:1] lowercaseString]];

    if ([modelClass respondsToSelector:NSSelectorFromString(keyWithFirstCharLowered)]) {
        [modelClass setValue:[json valueForKey:key] forKey:keyWithFirstCharLowered];
    }
 } 
```

# ruby - 逗号分隔的字符串到符号

> ID：10055681
> 
> 赞同：0
> 
> 时间：2012-04-07T15:22:13.187
> 
> 标签：ruby

您知道在 ruby​​ plz 中实现这一目标的任何优雅方法吗？

```
 string = 'title,url'
 #expected final variable => :title,:url or 'title','url' 
```

我查看了 API 文档（ruby 和 rails）并没有找到任何简单的方法，在编写任何循环之前，我想确保我没有遗漏任何东西。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:24:17.960

尝试这个：

```
string.split(",").map &:to_sym # => [:title, :url] 
```

# java - 如何确定与道路相连的城市的 A* 搜索算法中的 H 成本

> ID：10055685
> 
> 赞同：2
> 
> 时间：2012-04-07T15:23:05.097
> 
> 标签：java, algorithm, a-star

如何决定`heuristic cost`问题`cities connected with roads`。该图具有非负加权单向边，并且没有边将任何顶点连接到自身。在这个图中，任意两个顶点之间只有一条边。`single source`我的目标是获得和之间的最短距离`single destination`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T20:22:28.687

如果您的边位于欧几里得平面上，您的顶点对应于道路，并且顶点成本是道路的长度，那么[欧几里得距离](http://en.wikipedia.org/wiki/Euclidean_distance)或 L2 范数对于启发式成本是一个不错的选择。

* * *

这就是为什么。但首先，一些快速的术语：

设`f(x)`为**路径成本**，即计算出的从起始节点到节点的最短距离`x`。

让`h(x)`是**启发式成本**，从节点到目标的距离的估计`x`。

因为[A*](http://en.wikipedia.org/wiki/A%2a_search_algorithm)是一个有**向的最佳优先**搜索算法。在每一步，它都会移动到最小化的节点 `h(x) + f(x)`（计算`h(x)`需要我们记住一个目标节点）。

* * *

为了**保证**这种方法在开始和结束节点之间找到正确的最短补丁距离，`h(x)`必须是一个[可接受的启发式](http://en.wikipedia.org/wiki/Admissible_heuristic)。这实质上意味着**它不能高估到目标节点的距离**。

因此，如果您的节点是在欧几里得平面上组织的，并且您的成本对应于节点之间的 L2 范数距离，那么当前节点和目标节点之间的[欧几里德距离](http://en.wikipedia.org/wiki/Euclidean_distance)`x`或 L2 范数保证是一个[可接受的启发式](http://en.wikipedia.org/wiki/Admissible_heuristic)（它是两个节点之间可能的最短路径，因此沿着图中一系列顶点的任何实际路径必须更长）。

* * *

作为奖励，请注意[Dijkstra 算法只是](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)[A*](http://en.wikipedia.org/wiki/A%2a_search_algorithm)的一个特例，具有`h(x) = 0`. 对于任何节点，我们假设到达目标的路径是`0`，这意味着我们只是采取最小的可能步骤。这当然是一种[可接受的启发式方法](http://en.wikipedia.org/wiki/Admissible_heuristic)，因为任何两个节点之间的距离不能小于`0`（如果我们假设非负边成本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:28:19.553

如果您尝试优化行驶距离，欧几里得距离是一个很好的基线启发式方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T15:42:33.210

如果给定一个加权图，请使用边权重，就好像它是线段的长度一样。加权图中的最短路径是组合边权重最低的路径。

# smtp - Gmail 从我的虚拟机退回我的邮件

> ID：10055689
> 
> 赞同：-1
> 
> 时间：2012-04-07T15:23:31.400
> 
> 标签：smtp, gmail, postfix-mta

我必须承认我是一个邮件服务器菜鸟。然而，今天当我尝试使用 Postfix 从我的虚拟机（出于开发原因）向 gmail 地址发送邮件时，我得到了：

```
Apr  7 15:44:17 ubuntu postfix/smtp[1792]: 3061D40A0C: to=<xxx@googlemail.com>, relay=gmail-smtp-in.l.google.com[173.194.66.26]:25, delay=0.95, delays=0.02/0/0.38/0.54, dsn=5.7.1, status=bounced (host gmail-smtp-in.l.google.com[173.194.66.26] said: 550-5.7.1 [xx.xxx.xxx.xxx] The IP you're using to send mail is not authorized to 550-5.7.1 send email directly to our servers. Please use the SMTP relay at your 550-5.7.1 service provider instead. Learn more at 550 5.7.1 http://support.google.com/mail/bin/answer.py?answer=10336 bl2si5263213wib.27 (in reply to end of DATA command)) 
```

我已经删除了电子邮件地址和我的 IP，所以我没有显示潜在的敏感信息，但除此之外，我一直在阅读我需要添加某个 IP 或 SMTP 服务器，但我似乎无法得到明确的答案从四处寻找。

所以我想知道如何让 Gmail 允许我的 VMed 个人服务器（坐在我的电脑上）向我的 Gmail 帐户发送邮件？

是否有说明如何在 Postfix 中正确设置发件人的文档？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T20:29:11.343

我记得前一段时间尝试做同样的事情，因为我想要 Nagios xi 电子邮件通知。该错误中的 URL 很清楚：如果您在电子邮件“发件人”字段中设置的域与您的 VM 邮件服务器 IP 解析到的域名不匹配，那么 google 将不会接受该邮件。您需要做的是找出您的 ISP 的 smtp 服务器并将其设置为邮件中继。

您可能还会发现某些 ISP 会在出站方向阻止默认 smtp 端口（通常是端口 25）（因此您可以接收邮件但不能发送）。看起来它一般不会在您的连接上被阻止，但它可能会被 ISP 邮件服务器阻止，因此您需要确保允许此类流量。

或者，我发现 hotmail 运行良好，无需跳槽。

# linux - bash_profile 无法正常工作

> ID：10055692
> 
> 赞同：2
> 
> 时间：2012-04-07T15:23:53.793
> 
> 标签：linux, path, environment-variables

嗨，我在远程设备上运行 linux angstrom 发行版，我将 .bash_profile 和 .bashrc 添加到 /home/root 因为它们不存在，我在其中写了这个

```
PATH=/opt/qt-arm/lib:$PATH 
export PATH 
```

但是现在当我登录到这个设备并输入 $PATH 我没有看到新添加的路径...有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:29:18.913

> 我将 .bash_profile 和 .bashrc 添加到 /home/root ，因为...

查看`/etc/passwd`是否`/home/root`实际上是 root 的主目录。`/root`在大多数 linux 发行版上，它只是`/home/root`.

更新以回应评论：

`.bash_profile`并且`.bashrc`仅在用户的 shell 为`bash`. 你可以看到 root 的 shell 在`/etc/passwd`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T15:28:46.467

通常root账户的主目录是`/root`（不在`/home/root/`）。

# java - Java中布局中的元素都在同一个位置

> ID：10055693
> 
> 赞同：1
> 
> 时间：2012-04-07T15:23:53.967
> 
> 标签：java, swing, layout, grid-layout

我在 Java Swing 中编码，出于某种原因，当我将两个元素添加到网格布局时，它们都假定相同的位置。我曾尝试将其简化为不会失败的东西，然后从那里开始构建，但是唉，它仍然无法正常工作。

程序中的行为不端代码是：

```
 bodyPanelMain.setLayout(new GridLayout(4, 1, 10, 10));
        JTextArea one = new JTextArea("Hi");
        one.setLineWrap(true);
        one.setSize(100, 100);
        JTextArea two = new JTextArea("Goodbye");
        two.setLineWrap(true);
        two.setSize(100, 100);
        bodyPanelMain.add(one);
        bodyPanelMain.add(two);
        bodyPanelMain.repaint(); 
```

如果我将 JTextArea 的宽度设置为 200 并将背景设置为不同的颜色，很明显它在它后面是可见的，所以它肯定是添加了所有正确的元素，它们的位置是错误的。

编辑：这是我正在尝试做的一个非常非常简短的版本。

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class minimessageboard extends Applet implements ActionListener {

JPanel mainPanel;
JPanel buttonPanel;
JButton announcements, websites;
JPanel bodyPanel, bodyPanelMain;

public minimessageboard() {
    this.setSize(600, 400);

    mainPanel = new JPanel(new BorderLayout());
    mainPanel.setPreferredSize(new Dimension(this.getWidth(), this.getHeight()));
    this.add(mainPanel);

    buttonPanel = new JPanel(new GridLayout(6, 1, 10, 10));
    mainPanel.add(buttonPanel, BorderLayout.WEST);

    announcements = new JButton("Announcements");
    this.formatButton(announcements);
    announcements.setActionCommand("announcements");
    buttonPanel.add(announcements);

    websites = new JButton("Websites");
    this.formatButton(websites);
    websites.setActionCommand("websites");
    buttonPanel.add(websites);

    bodyPanel = new JPanel(new BorderLayout());
    bodyPanel.setSize(200, 500);
    bodyPanel.setPreferredSize(new Dimension(200, 500));
    mainPanel.add(bodyPanel, BorderLayout.CENTER);

    bodyPanelMain = new JPanel(new BorderLayout());
    bodyPanel.add(bodyPanelMain, BorderLayout.CENTER);
    bodyPanelMain.setLayout(new GridLayout(4, 1, 10, 10));
    JButton one = new JButton("Roar");
    bodyPanelMain.add(one);
    bodyPanelMain.revalidate();
    bodyPanelMain.repaint();
}

public static void main(String args[]) {
    JFrame overall = new JFrame(); 
    overall.pack();
    overall.setVisible(true);
    overall.add(new minimessageboard());
}

public void formatButton(JButton b){
    b.setPreferredSize(new Dimension(150, 33));
    b.addActionListener(this);
}

public void actionPerformed(ActionEvent arg0) {
    String action = arg0.getActionCommand();
    bodyPanelMain.removeAll();
    if (action.equals("websites")){
        System.out.println("Fires!");
        bodyPanelMain.setLayout(new GridLayout(4, 1, 10, 10));
        JButton one = new JButton("Hi");
        JButton two = new JButton("Goodbye");
        bodyPanelMain.add(one);
        bodyPanelMain.add(two);
        bodyPanelMain.revalidate();
    }
    bodyPanelMain.repaint();
}
} 
```

基本上，当您点击网站时，应该会出现“Hi”和“Bye”。如果我将网站 if 语句 (if (action.equals("websites")) 中的代码块内的代码移动到原始构造函数，它看起来非常好。代码输出“Fires！”，所以我 100% 确定它到达那部分。注意，我将它从 JTextArea 更改为 JButton，因为我将使用 JButtons，而不是 JTextArea。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:38:23.470

不要设置 JTextArea 的大小，因为当您的文本超出文本区域大小并且您发现它不会滚动时，它将无法正常工作。而是设置首选行和列值，然后让 JTextArea 自行调整大小。关于您的问题：您是否在 GUI 呈现自身后添加这些组件？如果是这样，您是否在 bodyPanelMain 收到 JTextAreas 后调用 revalidate()？如果这没有帮助，请考虑创建并发布 sscce。

例如，这对我来说很好：

```
import java.awt.GridLayout;
import javax.swing.*;

public class SwingFoo {
   private static final int ROWS = 10;
   private static final int COLS = 16;

   private static void createAndShowGui() {
      JPanel bodyPanelMain = new JPanel();
      bodyPanelMain.setLayout(new GridLayout(4, 1, 10, 10));
      JTextArea one = new JTextArea("Hi", ROWS, COLS);
      one.setLineWrap(true);
      // one.setSize(100, 100);
      JTextArea two = new JTextArea("Goodbye", ROWS, COLS);
      two.setLineWrap(true);
      // two.setSize(100, 100);
      bodyPanelMain.add(new JScrollPane(one));
      bodyPanelMain.add(new JScrollPane(two));
      // bodyPanelMain.repaint();

      JFrame frame = new JFrame("SwingFoo");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(bodyPanelMain);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# spring - 错误原因：org.hibernate.HibernateException：无法实例化连接提供程序 [org.connection.C3P0ConnectionProvider]

> ID：10055695
> 
> 赞同：3
> 
> 时间：2012-04-07T15:24:02.733
> 
> 标签：spring, hibernate, jboss, c3p0

我在 Hibernate 4.1.2.FINAL、JBoss 7.1.1 和 Spring 3.1.0.RELEASE 中有一个错误，如下所示：

```
12:10:50,853 ERROR [org.springframework.web.context.ContextLoader] (MSC service thread 1-2) 
Context initialization failed: org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'departamentoDao' defined in URL [vfs:/opt/jboss-as-7.1.1.Final/standalone/deployments/projvehimerc.war/WEB-INF/classes/META-INF/spring/spring-hibernate.xml]:Cannot resolve reference to bean 'hibernateTemplate' while setting bean property 'hibernateTemplate'; nested exception is org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'hibernateTemplate' defined in URL [vfs:/opt/jboss-as-7.1.1.Final/standalone/deployments/projvehimerc.war/WEB-INF/classes/META-INF/spring/spring-hibernate.xml]: 
Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'sessionFactory' defined in URL [vfs:/opt/jboss-as-7.1.1.Final/standalone/deployments/projvehimerc.war/WEB-INF/classes/META-INF/spring/spring-hibernate.xml]: 
Invocation of init method failed; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.service.jdbc.connections.spi.ConnectionProvider]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE] 
```

造成的：

```
Caused by: org.springframework.beans.factory.BeanCreationException: 
    Error creating bean with name 'hibernateTemplate' defined in URL 
    [vfs:/opt/jboss-as-7.1.1.Final/standalone/deployments/projvehimerc.war/WEB-INF/classes/META-INF/spring/spring-hibernate.xml]: 
    Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: 
    Error creating bean with name 'sessionFactory' defined in URL 
    [vfs:/opt/jboss-as-7.1.1.Final/standalone/deployments/projvehimerc.war/WEB-INF/classes/META-INF/spring/spring-hibernate.xml]: 
    Invocation of init method failed; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.service.jdbc.connections.spi.ConnectionProvider]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE] 
```

和 ：

```
Caused by: org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'sessionFactory' defined in URL [vfs:/opt/jboss-as-7.1.1.Final/standalone/deployments/projvehimerc.war/WEB-INF/classes/META-INF/spring/spring-hibernate.xml]: Invocation of init method failed; nestwared exception is org.hibernate.service.spi.ServiceException: 
Unable to create requested service [org.hibernate.service.jdbc.connections.spi.ConnectionProvider]
>>Caused by: org.hibernate.service.spi.ServiceException: Unable to create requested service
>>Caused by: org.hibernate.HibernateException: Could not instantiate connection provider [org.connection.C3P0ConnectionProvider] 
```

和我的spring-hibernate配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
                       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                       http://www.springframework.org/schema/context
                       http://www.springframework.org/schema/context/spring-context-3.1.xsd
                       http://www.springframework.org/schema/tx
                       http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

 <!-- Hibernate SessionFactory -->
 <bean class="org.springframework.orm.hibernate4.HibernateExceptionTranslator"/>
   <bean id="sessionFactory"   class="org.springframework.orm.hibernate4.LocalSessionFactoryBean"
p:dataSource-ref="vehicDataSource">
<!-- p:lobHandler-ref="defaultLobHandler"-->
<property name="annotatedClasses">
    <list>
    <!-- Procedimientos -->
        <value>com.reglamb.projvehimerc.domain.HabilitacionVehicular_Inscripcion</value>
    <!-- Main Properties -->
    <value>com.reglamb.projvehimerc.domain.Transportista</value>
    <value>com.reglamb.projvehimerc.domain.Ubigeo</value>
    <value>com.reglamb.projvehimerc.domain.TransportistaNatural</value>
    <value>com.reglamb.projvehimerc.domain.TransportistaJuridico</value>
    <value>com.reglamb.projvehimerc.domain.Conductor</value>
    <!-- Transportista's Ubigeo -->
    <value>com.reglamb.projvehimerc.domain.ubigeo.Departamento</value>
    <value>com.reglamb.projvehimerc.domain.ubigeo.Distrito</value>
    </list>
  </property>
<property name="hibernateProperties">
        <value>
            hibernate.dialect=${hibernate.dialect}
            hibernate.default_schema=${hibernate.default_schema}
            hibernate.jdbc.batch_size=${hibernate.jdbc.batch_size}
            hibernate.c3p0.max_size=${hibernate.c3p0.max_size}
            hibernate.c3p0.min_size=${hibernate.c3p0.min_size}
            hibernate.c3p0.timeout=${hibernate.c3p0.timeout}
            hibernate.c3p0.max_statements=${hibernate.c3p0.max_statements}
            hibernate.c3p0.idle_test_period=${hibernate.c3p0.idle_test_period}
            hibernate.c3p0.acquire_increment=${hibernate.c3p0.acquire_increment}
            <!--hibernate.c3p0.validate=${hibernate.c3p0.validate}-->
            <!--hibernate.cache.provider_class=${hibernate.cache.provider_class}-->
            hibernate.connection.provider_class=${hibernate.connection.provider_class}
            hibernate.show_sql=${hibernate.show_sql}
            hibernate.hbm2ddl.auto=${hibernate.hbm2ddl.auto}
            hibernate.id.new_generator_mappings=${hibernate.id.new_generator_mappings}
            <!-- Auto Generated Schemas and tables not good for production
            hibernate.hbm2ddl.auto=update-->
            <!--hibernate.cache.use_second_level_cache=true-->
            <!--hibernate.cache.use_query_cache=true-->
         </value>
    </property>
  </bean>
 <!-- Transaction Config -->
 <bean id="transactionManager"
      class="org.springframework.orm.hibernate4.HibernateTransactionManager"
      p:sessionFactory-ref="sessionFactory"/>   
 <!-- Hibernate Template -->
 <bean id="hibernateTemplate" 
class="org.springframework.orm.hibernate3.HibernateTemplate" 
p:sessionFactory-ref ="sessionFactory"/>

 <!-- Injectores Procedimiento -->
 <bean id="inscriptransportistaDao" 
class="com.reglamb.projvehimerc.dao.hibernate.HabilitacionVehicular_InscripcionDaoHibernate" > 
<property name="hibernateTemplate" ref ="hibernateTemplate" />
 </bean>

 <!-- Injectores Ubigeo -->
 <bean id="ubigeoDao" 
class="com.reglamb.projvehimerc.dao.hibernate.UbigeoDaoHibernate" > 
<property name="hibernateTemplate" ref ="hibernateTemplate" />
 </bean>
  <bean id="departamentoDao" 
class="com.reglamb.projvehimerc.dao.hibernate.ubigeo.DepartamentoDaoHibernate" > 
<property name="hibernateTemplate" ref ="hibernateTemplate" />
 </bean>
 <bean id="distritoDao" 
class="com.reglamb.projvehimerc.dao.hibernate.ubigeo.DistritoDaoHibernate" > 
<property name="hibernateTemplate" ref ="hibernateTemplate" />
 </bean><
 <bean name="inscripcionHabilitacionVehicFacade" class="com.reglamb.projvehimerc.service.HabilitacionVehicular_InscripcionFacadeImpl" />
 <tx:annotation-driven transaction-manager="transactionManager"/> 
 </beans> 
```

有什么错误？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T15:53:23.860

看起来你设置`hibernate.connection.provider_class`为`org.connection.C3P0ConnectionProvider`.

应该是`org.hibernate.connection.C3P0ConnectionProvider`。

# python - 如何使用 python 或 Shell 代码退出 Qapplication (PyQt)

> ID：10055697
> 
> 赞同：2
> 
> 时间：2012-04-07T15:24:32.087
> 
> 标签：python, pyqt

大家好，我是我将在下面讨论的几乎所有技术的新手，我正在启动一个`QApplication`with `sys.exit(qapp.exec_())`（必需，因为我`QWebView`在我的 python 类中使用了一个），除了应用程序之外，一切都很好执行后不会自行退出，当我通过 REST Django Web 服务调用此 Qapplication 时，这会导致问题（服务器不会退出加载），所以我想知道是否有任何解决方案，谢谢，我在想在启动应用程序后使用 python 执行 SIGTSTP (ctrl + z) ，这是一个实用的解决方案吗？

这是代码的一部分

```
def main():
    import sys
    qApp = QtGui.QApplication(sys.argv)

    myappWebView = myappWebView()
    myappWebView.load('http://website.com')
    myappWebView.show()
    sys.exit(qApp.exec_())

if __name__ == "__main__":
    main() 
```

每当我执行此操作时都会启动一个窗口，并且 linux 控制台不会提示我输入新命令并且会一直卡住，直到我手动关闭窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:37:33.320

不看代码很难回答，但我认为你可以[`QCoreApplication.exit()`](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#exit)在工作完成后打电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T03:12:10.503

页面加载完成后，您可以退出应用程序：

```
myappWebView.loadFinished.connect(qApp.quit) 
```

或者如果页面有一些需要时间执行的 javascript，您可以使用计时器来延迟应用程序关闭：

```
timer = QTimer()
timer.setInterval(2000) # 2 seconds
myappWebView.loadFinished.connect(timer.start)
timer.timeout.connect(qApp.quit) 
```

（或者你可以选择一个更复杂也可能更准确的方法：[How to know when a web page was loaded when using QtWebKit?](https://stackoverflow.com/questions/1302874/how-to-know-when-a-web-page-is-loaded-when-using-qtwebkit)）。

# css - 链接标签上的 CSS 样式

> ID：10055698
> 
> 赞同：2
> 
> 时间：2012-04-07T15:24:53.857
> 
> 标签：css

嗨，我想让我的`<a>`标签对父 li 的完整高度和宽度做出反应。

我怎样才能做到这一点？显示块不起作用。出于某种原因，将它放在 li 周围而不是内部会删除最后一个 li。

根据要求，这里是相关代码。

```
nav li{height:70px;float:left;margin:0px;padding:25px 20px;display:block;}
nav li:hover{background:#00A2E5;}
nav a, nav a:visited{font:bold 20px Arial;color:#515151;text-decoration:none;display:block;}
nav a:hover, nav a:visited:hover{font:;color:#FFFFFF;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:27:10.407

```
li a {
    width:100%;
    height:100%;
    display:block;
} 
```

# java - 你如何备份一个安卓应用程序？

> ID：10055702
> 
> 赞同：2
> 
> 时间：2012-04-07T15:25:24.183
> 
> 标签：java, android, backup, reinstall

我刚刚让我的应用程序崩溃了，现在经过大量的工作它又回到了它，我想知道我将如何备份应用程序以便如果再次发生这种情况我可以重新安装？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:30:35.757

你应该使用版本控制系统，例如：git version control

[http://git-scm.com/](http://git-scm.com/)

快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T15:33:40.067

使用版本控制系统.. 像 svn 或 git ...在任何情况下，即使您不使用它，您也应该定期备份您的代码...这些版本控制系统可以轻松地为您管理...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T16:46:53.240

这个问题并不特定于 Java 或 Android，而是如何正确“备份”代码。正如其他人已经提到的，您应该使用源代码控制系统，例如[Git](http://git-scm.com)或[Subversion](http://subversion.apache.org)。这不仅可以“备份”您的代码，还可以让您跟踪对代码所做的更改以及维护代码的多个版本。

# java - 通过服务器自动化 Web 浏览器

> ID：10055710
> 
> 赞同：1
> 
> 时间：2012-04-07T15:26:41.010
> 
> 标签：java, web-services, sockets, ubuntu, automation

我需要在以下情况下自动化 Web 浏览器：

我有一台服务器和许多客户端。现在，每当服务器向客户端发送命令时，客户端计算机应该打开 Web 浏览器，浏览服务器提供的特定站点，并且在加载该站点后，它应该向服务器发送加载该网站所需的准确时间。任何工具或语言都可以。我的客户端电脑运行 Ubuntu 作为操作系统。

另外，对于服务器和客户端之间的通信，我正在考虑使用 Java 套接字。只是想要一个关于它的安慰。我在正确的轨道上吗？

基本上，我需要一个自动化测试系统，在该系统中，所有客户端只需通过一个命令从服务器打开他们的 Web 浏览器并浏览要测试的特定网站。安全威胁并不重要（截至目前），因为我拥有对这些测试机器的管理访问权限。

任何想法/建议都是最受欢迎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:55:59.197

这个程序有两个部分，第一部分是与一些客户端软件连接服务器以启动该过程，第二部分是编写一个将自动化 Web 浏览器的客户端。

即使你问了关于 java 的问题，我也会给出一个 c++ 解决方案（任何解决方案都比在一个多月没有解决方案后没有答案好）

客户端：编写一个 Qt 应用程序，该应用程序使用[`QWebView`](http://qt-project.org/doc/qt-4.8/qwebview.html)该类来实质上控制 c++ 应用程序中的浏览器。这非常简单，Qt 文档在这方面有很大帮助。

让这个应用程序连接到一个 Tcp 服务器应用程序（可以用 c++、java 甚至 python 的任何语言编写）。客户端和此服务器之间的此 tcp 连接将仅用于“通知”客户端开始加载特定页面。这可能是监视一个文本配置文件，该文件说明哪些客户端将加载哪个 URL（等等......）。该服务器还应该有某种方式可以“发出信号”以开始向客户端发送它们各自的启动信号（我个人会通过标准输入来执行此操作）。

Web 内容服务器：就我个人而言，这部分我会使用 django 服务器。这将允许您使用 python 向其他 Tcp 服务器发出信号以启动（我有一个 `view`在浏览器中启动时会发送“启动信号”的信号）。使用这种方法的好处是您可以拥有另一个视图，该视图接受来自每个客户端的 POST。每个 POST 都可能有哪个客户端发送它，加载了什么 url 以及花费了多长时间。

每个客户端都能够跟踪页面加载所花费的时间。这可以通过[`loadStarted()`](http://qt-project.org/doc/qt-4.8/qwebview.html#loadStarted)在执行该[`load(QUrl)`](http://qt-project.org/doc/qt-4.8/qwebview.html#load)方法后发出信号时启动计时器并[`loadFinished(bool)`](http://qt-project.org/doc/qt-4.8/qwebview.html#loadFinished)在`QWebView`. 然后可以将此信息 POST 回 django 服务器（其`model`定义可以很容易地将信息保存到数据库）。

# css - 防止在 JQuery Mobile 中的文本字段之前和之后换行

> ID：10055712
> 
> 赞同：0
> 
> 时间：2012-04-07T15:26:58.990
> 
> 标签：css, jquery-mobile

我正在尝试创建三个水平布局的控件。为了实现这一目标，我目前正在尝试以下方法：

```
<div data-role="controlgroup" data-type="horizontal">
  <input id="button1" type="button" value="<" />
  <span><input id="tally1" type="text" /></span>
  <input id="button2" type="button" value=">" />
</div> 
```

此文本输入字段似乎在其自身前后插入了一个换行符。如果我删除文本字段，一切都会按预期进行。如何摆脱换行符？如果不能，如何在水平堆栈中布局这三个字段？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:49:56.673

To prevent a line break after text, the field FOLLOWING the text has to have "display:inline !important;".

Also, for some reason which may be corrected after the (current to this post) jquery mobile v1.20, the heights of select and text-inputs are not quite right and need a cryptic mix of padding and margins resetting to work.

The "!important" specs were required in the following fiddle. Here is a list with 2 lines - one aligned to normal buttons and one to the mini buttons. Good Luck!

See [http://jsfiddle.net/RM5eq/](http://jsfiddle.net/RM5eq/)

```
 <style>
.floatleft {
float:left;
 }
.floatright {
float:right;
 }
.forceinline{  /* Prevent fieldcontain from doing a BLOCK thing */
display:inline !important;
}
.textwidth {  /* limit width of input fields */
width:80px;
}
.closespacing { /* controls spacing between elements */
margin:0px 5px 0px 0px;
 }
.bigselect {   /* centers select with big buttons */
padding: 0px;
margin:2px 5px 0px 0px;
 }
.biginputheight {   /* matches text input height to big buttons */
padding-top:10px !important;
padding-bottom:12px !important;
}
.miniinputheight { /* matches text input height to minibuttons */
padding-top:5px !important;
padding-bottom:5px !important;
}
</style>
<div data-role="page" class="type-home"> 
```

```
<ul data-role="listview">
  <li  data-role="fieldcontain">first LI line</li>
  <li  data-role="fieldcontain">

    <div class='floatleft closespacing'>
        Big Buttons<br>More Text
    </div>
    <div data-role="fieldcontain" class= 'forceinline'>
      <div class='floatleft closespacing'>    
        <fieldset data-role="controlgroup" data-type="horizontal">
          <input type="radio" name="radio-view" id="radio-view-a" value="aa"  />
          <label for="radio-view-a">A1</label>
          <input type="radio" name="radio-view" id="radio-view-b" value="bb"  />
          <label for="radio-view-b">B1</label>
        </fieldset>
      </div>
    </div>

    <div  class='floatleft bigselect'>    
      <select name="select-choice-0" id="select-choice-1" data-inline="true" class=' '>
        <option >SM1</option>
        <option value="standard">Standard: 7 day</option>
      </select>
    </div>

    <div  class='floatleft textwidth'>
      <input type="text" placeholder="left" class='biginputheight'></input>
    </div>  

    <div  class='floatright textwidth'>
      <input type="text" placeholder="right" class='biginputheight'></input>
    </div>  

  </li>
  <li  data-role="fieldcontain">

    <div class='floatleft closespacing'>    
        Small Buttons
    </div>

    <div data-role="fieldcontain" class= 'forceinline'>
      <div class='floatleft closespacing'>    
        <fieldset data-role="controlgroup" data-type="horizontal" data-mini='true'>
          <input type="radio" name="radio-view" id="radio-view-a" value="aa"  />
          <label for="radio-view-a">AA</label>
          <input type="radio" name="radio-view" id="radio-view-b" value="bb"  />
          <label for="radio-view-b">BB</label>
        </fieldset>
      </div>
    </div>

    <div  class='floatleft textwidth'>
      <input type="text" placeholder="e2" class='miniinputheight'></input>
    </div>  

    <div  class='floatleft closespacing'>
      <select name="select-choice-2" id="select-choice-2" data-inline="true" data-mini='true'>
        <option >SM2</option>
        <option value="standard">Standard: 7 day</option>
      </select>
    </div>       

    <div class='floatright closespacing'>
      <div  class='floatright closespacing'>    
        e3 Text<br>on right
      </div>
      <div  class='floatright textwidth'>
        <input type="text" placeholder="e3" class='miniinputheight'></input>
      </div>  
    </div>
  </li>
  <li  data-role="fieldcontain">last LI line</li>

</ul><!-- /listview --> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T15:30:00.640

这应该有效：

```
#tally1 {
    display:inline;
} 
```

尝试更改`display:inline;`为`display:inline !important;`它可能是文本字段继承了 JQuery Mobile 的显示样式，您可以使用`!important`它来覆盖它，但仅作为最后的手段。

# facebook - 如何知道我的 Facebook 应用程序的“待处理请求”

> ID：10055718
> 
> 赞同：3
> 
> 时间：2012-04-07T15:28:03.480
> 
> 标签：facebook, fbml, fbconnect

我已经制作了一个 Facebook 应用程序。我已经向很多 facebook 用户发送了该 facebook 应用程序的请求，我怎么知道有多少用户没有接受我的 facebook 应用程序请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:57:09.317

“我怎么知道有多少用户没有接受我的 Facebook 应用请求。”

1) 在发出请求 (http://developers.facebook.com/docs/requests/) 后，您的应用会被告知请求发送到了多少个 ID（以及哪些 ID）。因此，将 id 列表存储在数据存储中的某个位置，当然要删除重复的 id。

```
{
  request: 'REQUEST_OBJECT_ID'
  to:[array of USER_IDs]
} 
```

2）当有人通过请求访问您的应用程序时，您会获得他们的 ID。您正在根据文档删除请求，对吗？

> 当用户通过单击接受请求被定向到您的应用程序时，您必须在接受请求后将其删除。请求一旦被点击就不会被自动删除，因此开发者有责任在它们被接受后清除它们。

3）因此，当您从列表中删除接受的 id 时，您仍然有一个完整的未接受您的应用程序的 id 列表。

快乐编码！

# ios - iOS - 为什么需要初始化和其他初始化问题

> ID：10055719
> 
> 赞同：1
> 
> 时间：2012-04-07T15:28:07.663
> 
> 标签：ios

Objective C 规范（来自 Apple）第 49 页指出， **每个声明实例变量的类都必须提供一个 init 方法来初始化它们**

我的问题 - 为什么这是必要的？NSObject 不会为实例初始化 iVar 吗？

是否应该将 init 视为构造函数。

init一定要叫init吗？我可以做 id anObject = [[SomeClass alloc] **foo** ];

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:32:28.503

init 方法类似于构造函数，但不会自动调用。你必须自己调用它。

将其称为“init”是一种常见的约定，但不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:33:37.243

的默认值`init`不会`NSObject`触及您的**实例变量**。规范中的声明意味着，如果您使用类似`NSString *str`或`NSDate *d`对象作为类的实例变量，则您有责任对其进行初始化。这通常发生在 中`init`，尽管您可以在其他方法中初始化它们。

是的，您可以`[[SomeClass alloc] foo]`返回一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T15:36:13.183

类通常不知道其子类的内部结构，而 NSObject 在这方面也没有什么不同。

`alloc`+`init`非常像构造函数，只是链接不是自动的。

它不必被称为`init`，但以它开头`init`几乎是普遍的。例如：

```
- (id)initWithString:(NSString *)string {
    self = [super init];
    if (self) {
        self.myString = string;
    }
    return self;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-31T09:59:38.927

首先没有必要。`init`用于初始化实例变量的属性。当你使用自己的类时，你不会唤起 init。在我看来，`alloc`等于`constructor`。通过一个非常简单的例子我告诉了原因。当我们想使用单例模式时，很容易补充java或者其他编程语言用`constructor`.Object C或者IOS也很简单，虽然没有明确的构造函数。在Apple的官方例子中，你会发现他们只是重写了`allocWithZone`NSObject中的，alloc最终会调用它。所以我认为`alloc`是Object C中的构造函数。但是我认为你最好使用init。它是约定或标准。所以本书使用这个词`must`.不管什么编程语言初始化都必须做。只是苹果明确强调

# asp.net - 关于在 asp.net 中调用 javascript 函数

> ID：10055727
> 
> 赞同：0
> 
> 时间：2012-04-07T15:30:05.917
> 
> 标签：asp.net

在这个“onclick”工作但它没有调用javascript函数。请帮助如何同时执行onclick和onclientclick。

```
<asp:Button ID="btnFare"  OnClientClick="return initialize();"  runat="server"  Text="Calculate Fare" onclick="btnFare_Click"/> 
```

请提出解决此问题的方法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:13:15.830

在您发布更多代码之前，很难说出了什么问题。当我遇到这个问题时，我检查了几件事：

1）我正在调用的javascript实际上是在页面中吗？（这对于初学者来说可能会有问题，因为有几种方法可以在他们的页面中包含 javascript，有时他们*认为*他们的 javascript 在页面中，而实际上并非如此。）

2) 当我调用 javascript 时，[控制台](https://developers.google.com/chrome-developer-tools/docs/console)中出现什么错误？当我将 console.log('some text') 包含在我的函数中时，我可以看到它的输出吗？

3) 我的 javascript 是否真的触发了，但我错过了它，因为我有一个服务器端事件在它之后触发？

4) onClientClick 函数是否返回布尔值？在这种情况下，这很重要，因为如果它返回 true，服务器端的 onClick 事件将触发。如果它返回 false，服务器端事件将不会触发。

这些只是需要检查的几件事。你可能想检查一下[Firebug——](http://getfirebug.com/)它在调试这样的事情时非常棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:34:26.303

如果你想`btnFare_Click`被解雇，那么`initialize();`必须`return true`。

我建议你添加`initialize()`这样的`page_Load`：

```
btnFare.Attributes.Add("onclick","return initialize();"); 
```

而不是这样：

```
OnClientClick="return initialize();" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T15:35:19.083

确保`initialize();`返回`true`. 事件处理程序可以返回一个布尔值（`true`或`false`），`false`意思是：“不采取默认操作”。

如果您有任何 js 错误，请检查 javascript 控制台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T05:28:22.060

问题肯定出在您的 initialize() 函数中。我认为这是错误的。

如果您没有问题，请让我们查看源代码。

或者你可以把`alert(yourreturnvariable);`

作为函数的最后一行，检查它是否真的返回 true。

# model - Spine.js 模型：只有第一个 .save() 应该创建新资源，以下所有内容都应该更新

> ID：10055728
> 
> 赞同：0
> 
> 时间：2012-04-07T15:30:11.207
> 
> 标签：model, save, spine.js

当我创建并 .save() 一个新记录时，我的 Spine.js 模型向服务器发送一个 POST 请求以将其添加到数据库中。没什么大不了的......但是当我向同一个模型实例发出另一个 .save() 时，我希望 Spine.js 发送一个 PUT 请求只是更新它的数据。

我怎样才能做到这一点？

这就是我的模型的样子：

```
class App.MeetingMinutes extends Spine.Model
  @configure 'MeetingMinutes', 'subject', 'some', 'more', 'attributes'
  @belongsTo 'archive', 'Archive'
  @extend Spine.Model.Ajax

  @url: '#' # only dynamically scoped from Entries controller

  @setArchive: ( _id ) ->
    @url = '/archives/' + _id + '/meeting_minutes' 
```

（将 id 列添加到 @configure 也不起作用）

在我的 Rails 控制器（创建操作）中，我将整个对象作为 JSON 返回

```
format.json { render :json => @meeting_minutes, :status => :created } 
```

这就是我正在使用的：

```
mm = new App.MeetingMinutes({subject: 'subject'})
mm.save() // POST
mm.subject = 'changed subject!'
mm.save() // another POST

mm.isNew() // true (obviously :/) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:58:14.913

不确定你是否得到了这个排序，但这听起来像是我不久前遇到的一个问题。我认为您需要将保存分配给变量，因此：

```
mm = new App.MeetingMinutes({subject: 'subject'})
mm = mm.save()
mm.subject = 'changed subject!'
mm = mm.save() 
```

第二次保存应该是 PUT 而不是 POST。现在我不清楚这是预期的用途还是只是一种解决方法，但它似乎有效。希望能帮助到你。

# jquery - 从带有对象 ID 的 JQuery 侧边栏创建内联表单集

> ID：10055730
> 
> 赞同：0
> 
> 时间：2012-04-07T15:30:19.303
> 
> 标签：jquery, django, django-forms

我的应用程序中有一个内联表单集，用于添加和删除广告系列，但有一个“显示”字段，如果有 100 个已注册的显示，则很难注册 20 个内联。因此，我使用 jquery 创建了一个侧边栏，在其中选择扇区并显示下面的显示。这个想法是单击“添加”按钮（Adicionar）并创建一个内联显示，其中填充了“显示”字段。如何创建一个内联表单集，其中“显示”字段填充侧栏中的选定显示？

图片如何： http: [//postimage.org/image/3qp6bq5f9/](http://postimage.org/image/3qp6bq5f9/)

在侧边栏中我有：

```
list.append('<ul><li><input class="list-display" type="hidden" value="'+d.pk+'">     '+d.fields['nome']+' | Janelas: '+d.fields['janelas']+'\
                <a class="btn btn-mini" onclick="addInlineFormset('+d.pk+');"     value="Adicionar"><i class="icon-plus-sign"></i> Adicionar</a></li></ul>'); 
```

“d.pk”是所选显示器的 id。

我仍在尝试创建此内联。我在 form.html 中添加了一个包含：

```
<div id="janela">
{% include "project/campanha/display_inline.html" %}    
</div> 
```

这是阿贾克斯：

```
function addJanela(id) {
var object_id = id;
var url = '/project/campanha/get_formInline/'+object_id+'/';
$.ajax({
    type: 'get',
    url: url, 
    success: function(formset){
        var janela = $('#janela');          
            janela.append(formset);
            return false;
   },
}); 
} 
```

我的意见.py：

```
def get_formInline(request, object_id):
display = Display.objects.get(pk=object_id)
status = Status.objects.filter(nome__exact='Vendido')
initial=[{'postais' : 45, 'status': status,'display': display,}]
JanelaFormSet = inlineformset_factory(Campanha, Janela, extra=1)
formset = JanelaFormSet(initial=initial)    
return render_to_response('project/campanha/display_inline.html', {'formset': formset,}, context_instance=RequestContext(request)) 
```

但在提交时只保存最后一个内联。form.html的源代码：

```
<input type="hidden" name="janela_set-TOTAL_FORMS" value="1" id="id_janela_set-TOTAL_FORMS" /><input type="hidden" name="janela_set-INITIAL_FORMS" value="0" id="id_janela_set-INITIAL_FORMS" /><input type="hidden" name="janela_set-MAX_NUM_FORMS" id="id_janela_set-MAX_NUM_FORMS" />
<table border="0" cellpadding="0" cellspacing="0">
<tbody>

<input type="hidden" name="janela_set-0-id" id="id_janela_set-0-id" />
 <tr>
    <td>Postais: <input type="text" name="janela_set-0-postais" value="45" id="id_janela_set-0-postais" /></td>
    <td>Status: <select name="janela_set-0-status" id="id_janela_set-0-status">
<option value="" selected="selected">---------</option>
<option value="2">Girando</option>
<option value="1">Vendido</option>
</select></td>
    <td>Display: <select name="janela_set-0-display" id="id_janela_set-0-display">
<option value="" selected="selected">---------</option>
<option value="1">Shopping Point</option>
<option value="2">Restaurante</option>
<option value="3">Centro de Artes</option>
</select></td>
<td><input type="checkbox" name="janela_set-0-DELETE" id="id_janela_set-0-DELETE" /></td> 
```

在图像打印中显示 3 个内联，但在源中仅显示 1 个内联。=/

有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:57:43.027

使用此代码解决：

```
// Ajax function

 $("#add").live("click", function() {
var add = 'add';
var total_forms = $('#id_janela_set-TOTAL_FORMS').val();
var initial_forms = $('#id_janela_set-INITIAL_FORMS').val();
var max_forms = $('#id_janela_set-MAX_NUM_FORMS').val();
var display_id = $(this).val();
var url = '{% url "add_campanha" %}';   
$.ajax({
    type: 'post',
    url: url, 
    data: {
        'janela_set-TOTAL_FORMS': total_forms,
        'janela_set-INITIAL_FORMS': initial_forms,
        'janela_set-MAX_NUM_FORMS': max_forms,
        'add': add,
        'display_id': display_id,
        'csrfmiddlewaretoken':'{{ csrf_token }}',
    },
    success: function(data){
        //alert(data);
        var janela = $('#janela');  
        janela.html(data);
        //cloneMore('#form-campanha tbody tr', 'janela_set');
        console.log('Success!');
   },
}); 
```

});

意见：

```
if 'add' in request.POST:           
        cp = request.POST.copy()
        cp['janela_set-TOTAL_FORMS'] = int(cp['janela_set-TOTAL_FORMS'])+ 1
        formset = PrimaryFunctionFormSet(cp, prefix='janela_set')                
        return render_to_response('project/campanha/display_inline.html', {'formset':formset}, context_instance=RequestContext(request)) 
```

使用包含 html 来呈现内联的模板：

```
<div id="janela">
{% include "project/campanha/display_inline.html" %}        
</div> 
```

包括 display.html 模板：

```
{{ formset.management_form }}
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
{% for form in formset %}
{{ form.id }}
<tr>
   <td>Postais: {{ form.postais }}</td>
   <td>Status: {{ form.status }}</td>
   <td>Display: {{ form.display }}</td>
   {% if formset.can_delete %}
   <td>{{ form.DELETE }}</td>
   {% endif %}
</tr>
{% endfor %}
</tbody>
</table> 
```

append() 这篇文章中的表单集的另一个问题： [https ://stackoverflow.com/questions/10131257/django-and-append-jquery-with-inline-formset-problems](https://stackoverflow.com/questions/10131257/django-and-append-jquery-with-inline-formset-problems)

# php - 更新 php my sql 中的记录

> ID：10055733
> 
> 赞同：1
> 
> 时间：2012-04-07T15:30:36.740
> 
> 标签：php

我正在研究 php，我在更新数据库中的记录时遇到了麻烦，这是我的代码。每次我输入 ?id=14 或任何与数据库中的记录相对应的数字时，它都不会在文本框中显示任何记录。我没有错误，但问题是它没有显示记录

```
<HTML>
<?php
$submit = isset($_POST['submit']);
$update = isset($_POST['update']);
$id = isset($_GET['id']);

if($submit)
{
    $first = $_POST['first'];
    $last = $_POST['last'];
    $nickname = $_POST['nickname'];
    $email = $_POST['email'];
    $salary = $_POST['salary'];

$db = mysql_connect("localhost", "root","");
mysql_select_db("dbtry",$db);
$sql = "INSERT INTO personnel (firstname, lastname, nick, email, salary) VALUES ('$first','$last','$nickname','$email','$salary')";
$result = mysql_query($sql);
echo "Thank you! Information entered.\n";
}
else if($update)
{
    $first = $_GET['first'];
    $last = $_GET['last'];
    $nickname = $_GET['nickname'];
    $email = $_GET['email'];
    $salary = $_GET['salary'];
$db = mysql_connect("localhost", "root","");
mysql_select_db("dbtry",$db);
$sql = "UPDATE personnel SET firstname='$first',lastname='$last',nick='$nickname',email='$email',salary='$salary' WHERE id=$id";
$result = mysql_query($sql);
echo "Thank you! Information updated.\n";
}
else if($id)
{
$db = mysql_connect("localhost", "root", "");
mysql_select_db("dbtry",$db);
$result = mysql_query("SELECT * FROM personnel WHERE id=$id",$db);
$myrow = mysql_fetch_array($result);
?>
<form method="get" action="<?php echo $_SERVER['PHP_SELF'];?>">
<input type="hidden" name="id" value="<?php echo $myrow["id"]?>">
First name:<input type="Text" name="first" value="<?php echo $myrow['firstname'];?>"><br>
Last name:<input type="Text" name="last" value="<?php echo $myrow['lastname'];?>"><br>
Nick Name:<input type="Text" name="nickname" value="<?php echo $myrow['nick'];?>"><br>
E-mail:<input type="Text" name="email" value="<?php echo $myrow['email'];?>"><br>
Salary:<input type="Text" name="salary" value="<?php echo $myrow['salary'];?>"><br>
<input type="Submit" name="update" value="Update information"></form>
<?php
}
else
{
?>
<form method="post" action="<?php echo $_SERVER['PHP_SELF'];?>">
First name:<input type="Text" name="first"><br>
Last name:<input type="Text" name="last"><br>
Nick Name:<input type="Text" name="nickname"><br>
E-mail:<input type="Text" name="email"><br>
Salary:<input type="Text" name="salary"><br>

<input type="Submit" name="submit" value="Enter information"></form>
<input type="Submit" name="update" value="Update information">
<?
}
?>
</HTML> 
```

-- :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:39:16.433

你`$id`只包含是否`$_GET['id']`设置的事实，而不是它的实际值。用这个替换它：

```
$id = isset($_GET['id']) ? $_GET['id'] : null; 
```

此外，确保在输出之前（使用）和将其放入数据库查询文本（使用或者甚至更好的 PDO）之前转义**所有用户输入。**`htmlspecialchars``mysql_real_escape_string`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T15:42:30.540

尝试测试：

```
$result = mysql_query("SELECT * FROM personnel WHERE id=$id",$db) OR DIE (MYSQL_ERROR()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T15:48:59.913

您`$id`的设置为`true`或`false`in line `5`。代替：

```
$result = mysql_query("SELECT * FROM personnel WHERE id=$id",$db); 
```

与`else if($id)`：

```
$result = mysql_query("SELECT * FROM `personnel` WHERE `id` = " . mysql_real_escape_strig($_GET['id']), $db); 
```

# security - 您如何解码开始...保险库“代码”或破解？

> ID：10055735
> 
> 赞同：1
> 
> 时间：2012-04-07T15:30:50.470
> 
> 标签：security

因此，正在进行复活节彩蛋“黑客”狩猎。

我已经解码了 5 个中的 4 个，除了第 3 个，其中包含以下文本：

```
begin 644 vault
+=&AE<F]O=&-O;@H`
`
end 
```

我什至从哪里开始呢？这是什么语言？

对不起，我不是黑客。但我发现这些挑战相当有趣，因为它涉及 html、盲文、cookie 和图像解密。这是最后一个，我想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:35:38.400

只有一个提示：UUDecode/UUEncode。

# javascript - 在 knockout.js 中创建 has_one 类型关系

> ID：10055736
> 
> 赞同：0
> 
> 时间：2012-04-07T15:30:57.633
> 
> 标签：javascript, knockout.js

所以我从服务器接收 JSON，看起来像：

```
{
  data: [
    {
      foo: "hello",
      bar_id: "92934848202"
    },
    {
      foo: "hello again",
      bar_id: "39393020201"
    },
  ]
} 
```

我正在使用映射插件将其读入名为 self.data 的 observableArray 中，例如：

```
self.data(ko.mapping.fromJS(json).data()); 
```

我有另一个名为 bar 的模块，它从服务器读取所有 bar 及其 ID。我在 bar 中有一个方法，它能够使用一个名为 find 的方法返回一个对象。所以

```
bar.find("39393020201") // returns object 
```

但我真正想做的是让 self.data observableArray 能够直接访问 bar，方法是：

```
self.data()[0].bar // ideally returns object? 
```

到目前为止，我能得到的最接近的是添加这样的自定义函数：

```
ko.observable.fn.bar = function() {
  return bar.find(this());
}; 
```

但这要求我打电话

```
self.data()[0].bar_id.bar 
```

这不是很漂亮。但是我添加到 observableArray 的任何函数都对整个数组而不是该数组中的特定对象进行操作。还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:18:34.050

您将需要分解映射过程并手动添加一个可观察的“bar” - 映射插件允许将 bar_id（或任何其他）可观察对象替换为计算的可观察对象，该可观察对象可以执行您想要的任何操作，但您不能创建数据对象中不存在的属性（例如“bar”）。

```
var tmp = [];

for (var i = 0; i < json.data.length; i++) {
    // Map only one object in the json.data array
    var o = ko.mapping.fromJS(json.data[i]);

    // Add a computed observable that turns bar_id into bar
    o.bar = ko.computed(function() {
        return self.bar.find( o.bar_id() );
    });

    tmp.push(o);
}

self.data(tmp); 
```

[http://jsfiddle.net/hTYy3/2/](http://jsfiddle.net/hTYy3/2/)

# iphone - iOS：比较两张图片

> ID：10055739
> 
> 赞同：0
> 
> 时间：2012-04-07T15:31:46.417
> 
> 标签：iphone, ios, ios4

首先简要描述一下我所拥有的

1.  我的 iOS 应用程序中正在生成相同大小和格式的图像。
2.  每次生成图像时，都应将其上传到某个 Web 服务中。

我想做的基本上是尽可能少地使用互联网流量。所以基本上我想知道你对如何做到这一点的建议？

我选择将第一个图像发送到服务器，然后将第二个图像与第一个图像的差异。所以基本上我可以用这种方法保留一些流量。所以也想知道是否有人做过这种东西，你是如何实现的？即什么第三方库等。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-16T09:14:47.690

为什么不简单地在 UIImage 类（iOS8+）中使用 'hash' 方法？

```
@implementation UIImage (HashComparision)

- (BOOL) isEqualThanImage:(UIImage*)image
{
    return [self hash] == [image hash];
}
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T15:35:15.130

我认为您可以使用[OpenCV](http://opencv.willowgarage.com/wiki/)来比较图像等等。

您也可以参考 StackOverflow 上与您的问题类似的非常好的链接：

[比较两个 UIImage](https://stackoverflow.com/questions/9312121/compare-two-uiimages)

[比较 UIImage](https://stackoverflow.com/questions/3400707/cocoa-touch-comparing-images)

如果您需要更多帮助，请告诉我。

希望这可以帮助。

# html - Chrome 中的 SELECT 边框呈现 3D

> ID：10055745
> 
> 赞同：5
> 
> 时间：2012-04-07T15:32:47.690
> 
> 标签：html, css, google-chrome, border

这看起来很简单，但我无法解决。

我有一个像这样的简单下拉菜单...

```
<select>
    <option value="1">Option 1</option>
</select> 
```

...我想应用一个平面边框（没有 3D 效果），所以我使用：

```
select {
    border:1px solid #CCC;                
} 
```

在此处查看实时示例：http: [//jsfiddle.net/GqGr3/](http://jsfiddle.net/GqGr3/)

它在 Firefox 和 IE 中运行良好：

[![火狐](../Images/f48698aced09064fe228addf7f4a7cb4.png)](https://i.stack.imgur.com/oHqpH.png)
[（来源：[re-moto.com](http://www.re-moto.com/usuario/select-1.png)）]

但它在 Chrome 中呈现 3D：

[![铬合金](../Images/94b28a93d166ba692486fe4b750da18c.png)](https://i.stack.imgur.com/95Btv.png)
[（来源：[re-moto.com](http://www.re-moto.com/usuario/select-2.png)）]

这就是它在我的计算机中的工作方式。我在第二台电脑上测试了它，它呈现正常。如果这发生在我身上，我也会发生在其他用户身上。

我没有在 Chrome 中安装任何扩展程序，并且浏览器在 Windows 7 上是最新的 (18.0.1025.151 m)。

这些是样本的计算样式（包括继承的），我没有看到任何奇怪的地方：

```
-webkit-animation-delay: 0s;
-webkit-animation-direction: normal;
-webkit-animation-duration: 0s;
-webkit-animation-fill-mode: none;
-webkit-animation-iteration-count: 1;
-webkit-animation-name: none;
-webkit-animation-play-state: running;
-webkit-animation-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);
-webkit-appearance: menulist-button;
-webkit-backface-visibility: visible;
-webkit-background-clip: border-box;
-webkit-background-composite: source-over;
-webkit-background-origin: padding-box;
-webkit-background-size: auto;
-webkit-border-fit: border;
-webkit-border-horizontal-spacing: 0px;
-webkit-border-image: none;
-webkit-border-vertical-spacing: 0px;
-webkit-box-align: center;
-webkit-box-direction: normal;
-webkit-box-flex: 0;
-webkit-box-flex-group: 1;
-webkit-box-lines: single;
-webkit-box-ordinal-group: 1;
-webkit-box-orient: horizontal;
-webkit-box-pack: start;
-webkit-box-reflect: none;
-webkit-box-shadow: none;
-webkit-color-correction: default;
-webkit-column-axis: auto;
-webkit-column-break-after: auto;
-webkit-column-break-before: auto;
-webkit-column-break-inside: auto;
-webkit-column-count: auto;
-webkit-column-gap: normal;
-webkit-column-rule-color: rgb(0, 0, 0);
-webkit-column-rule-style: none;
-webkit-column-rule-width: 0px;
-webkit-column-span: 1;
-webkit-column-width: auto;
-webkit-flex-align: stretch;
-webkit-flex-direction: row;
-webkit-flex-flow: row nowrap;
-webkit-flex-item-align: auto;
-webkit-flex-order: 0;
-webkit-flex-pack: start;
-webkit-flex-wrap: nowrap;
-webkit-flow-from: none;
-webkit-flow-into: auto;
-webkit-font-kerning: auto;
-webkit-font-smoothing: auto;
-webkit-font-variant-ligatures: normal;
-webkit-highlight: none;
-webkit-hyphenate-character: auto;
-webkit-hyphenate-limit-after: auto;
-webkit-hyphenate-limit-before: auto;
-webkit-hyphenate-limit-lines: no-limit;
-webkit-hyphens: manual;
-webkit-line-box-contain: block inline replaced;
-webkit-line-break: normal;
-webkit-line-clamp: none;
-webkit-line-grid: none;
-webkit-line-grid-snap: none;
-webkit-locale: auto;
-webkit-margin-after-collapse: collapse;
-webkit-margin-before-collapse: collapse;
-webkit-marquee-direction: auto;
-webkit-marquee-increment: 6px;
-webkit-marquee-repetition: infinite;
-webkit-marquee-style: scroll;
-webkit-mask-attachment: scroll;
-webkit-mask-box-image: none;
-webkit-mask-box-image-outset: 0px;
-webkit-mask-box-image-repeat: stretch;
-webkit-mask-box-image-slice: 0 fill;
-webkit-mask-box-image-source: none;
-webkit-mask-box-image-width: auto;
-webkit-mask-clip: border-box;
-webkit-mask-composite: source-over;
-webkit-mask-image: none;
-webkit-mask-origin: border-box;
-webkit-mask-position: 0% 0%;
-webkit-mask-repeat: repeat;
-webkit-mask-size: auto;
-webkit-nbsp-mode: normal;
-webkit-perspective: none;
-webkit-perspective-origin: 37px 10px;
-webkit-print-color-adjust: economy;
-webkit-region-break-after: auto;
-webkit-region-break-before: auto;
-webkit-region-break-inside: auto;
-webkit-region-overflow: auto;
-webkit-rtl-ordering: logical;
-webkit-svg-shadow: none;
-webkit-tap-highlight-color: rgba(0, 0, 0, 0.199219);
-webkit-text-combine: none;
-webkit-text-decorations-in-effect: none;
-webkit-text-emphasis-color: black;
-webkit-text-emphasis-position: over;
-webkit-text-emphasis-style: none;
-webkit-text-fill-color: rgb(0, 0, 0);
-webkit-text-orientation: vertical-right;
-webkit-text-security: none;
-webkit-text-stroke-color: rgb(0, 0, 0);
-webkit-text-stroke-width: 0px;
-webkit-transform: none;
-webkit-transform-origin: 37px 10px;
-webkit-transform-style: flat;
-webkit-transition-delay: 0s;
-webkit-transition-duration: 0s;
-webkit-transition-property: all;
-webkit-transition-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);
-webkit-user-drag: auto;
-webkit-user-modify: read-only;
-webkit-user-select: text;
-webkit-wrap-flow: auto;
-webkit-wrap-margin: 0px;
-webkit-wrap-padding: 0px;
-webkit-wrap-through: wrap;
-webkit-writing-mode: horizontal-tb;
alignment-baseline: auto;
background-attachment: scroll;
background-clip: border-box;
background-color: white;
background-image: none;
background-origin: padding-box;
background-position: 0% 0%;
background-repeat: repeat;
background-size: auto;
baseline-shift: baseline;
border-bottom-color: #CCC;
border-bottom-left-radius: 0px;
border-bottom-right-radius: 0px;
border-bottom-style: solid;
border-bottom-width: 1px;
border-collapse: separate;
border-image-outset: 0px;
border-image-repeat: stretch;
border-image-slice: 100%;
border-image-source: none;
border-image-width: 1;
border-left-color: #CCC;
border-left-style: solid;
border-left-width: 1px;
border-right-color: #CCC;
border-right-style: solid;
border-right-width: 1px;
border-top-color: #CCC;
border-top-left-radius: 0px;
border-top-right-radius: 0px;
border-top-style: solid;
border-top-width: 1px;
bottom: auto;
box-shadow: none;
box-sizing: border-box;
caption-side: top;
clear: none;
clip: auto;
clip-path: none;
clip-rule: nonzero;
color: black;
color-interpolation: srgb;
color-interpolation-filters: linearrgb;
color-rendering: auto;
cursor: default;
direction: ltr;
display: inline-block;
dominant-baseline: auto;
empty-cells: show;
fill: #000000;
fill-opacity: 1;
fill-rule: nonzero;
filter: none;
float: none;
flood-color: rgb(0, 0, 0);
flood-opacity: 1;
font-family: Arial;
font-size: 13px;
font-style: normal;
font-variant: normal;
font-weight: normal;
glyph-orientation-horizontal: 0deg;
glyph-orientation-vertical: auto;
height: 20px;
image-rendering: auto;
kerning: 0;
left: auto;
letter-spacing: normal;
lighting-color: rgb(255, 255, 255);
line-height: normal;
list-style-image: none;
list-style-position: outside;
list-style-type: disc;
margin-bottom: 2px;
margin-left: 2px;
margin-right: 2px;
margin-top: 2px;
marker-end: none;
marker-mid: none;
marker-start: none;
mask: none;
max-height: none;
max-width: none;
min-height: 0px;
min-width: 0px;
opacity: 1;
orphans: 2;
outline-color: black;
outline-style: none;
outline-width: 0px;
overflow-x: visible;
overflow-y: visible;
padding-bottom: 0px;
padding-left: 0px;
padding-right: 0px;
padding-top: 0px;
page-break-after: auto;
page-break-before: auto;
page-break-inside: auto;
pointer-events: auto;
position: static;
resize: none;
right: auto;
shape-rendering: auto;
speak: normal;
stop-color: rgb(0, 0, 0);
stop-opacity: 1;
stroke: none;
stroke-dasharray: none;
stroke-dashoffset: 0;
stroke-linecap: butt;
stroke-linejoin: miter;
stroke-miterlimit: 4;
stroke-opacity: 1;
stroke-width: 1;
table-layout: auto;
text-align: -webkit-auto;
text-anchor: start;
text-decoration: none;
text-indent: 0px;
text-overflow: clip;
text-rendering: auto;
text-shadow: none;
text-transform: none;
top: auto;
unicode-bidi: normal;
vector-effect: none;
vertical-align: baseline;
visibility: visible;
white-space: pre;
widows: 2;
width: 75px;
word-break: normal;
word-spacing: 0px;
word-wrap: normal;
writing-mode: lr-tb;
z-index: auto;
zoom: 1; 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T14:43:46.277

有趣...我也在 Windows 7/Chrome 18 上，边框的 CSS 样式按预期工作，**直到我从 Aero 切换到“Windows Classic”主题，**此时您描述的行为发生了。上面已经说明这是一个 Windows 操作系统问题，但我只是认为这可能会提供一些额外的清晰度。

更新：使用`-webkit-appearance: none;`CSS 规则，似乎`select`可以避免元素的默认操作系统样式。但是，它需要一些额外的 CSS 来维护元素的主要 UI 功能（即右侧的箭头按钮）。此处提供了一个工作示例：http: [//jsfiddle.net/qZF4B/](http://jsfiddle.net/qZF4B/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:16:42.690

有一个简单的技巧。**使用“大纲”**。

前任）`{ border:0; outline:1px solid #CCC; }`

我搜索这个的原因是我在 Windows 7 Classic 主题上遇到了同样的问题。许多人建议使用“ `-webkit-appearance:none;`”选项，但此选项也删除了箭头按钮。然后我想起了“大纲”。看起来像我预期的那样工作，代码也很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:30:44.397

购买前有人问过这个问题，我找不到原始问题。

这本质上是 chrome 的一个限制。显然，至少在 Windows 中，它不会尝试通过 CSS 完全控制每个输入元素类型的呈现。

如果您想完全控制控件的外观，请编写 javascript 代码来复制它们的功能，或者使用现有的 UI 工具包，例如[JQuery easyui](http://www.jeasyui.com/demo/index.php)或[dojo](http://dojotoolkit.org/)。

# android - 关闭时不支持自动旋转屏幕

> ID：10055747
> 
> 赞同：0
> 
> 时间：2012-04-07T15:33:12.970
> 
> 标签：android

我有一个相当奇怪的情况，首先，我从来没有为我的任何活动的 screenOrientation 值指定任何东西。

但是，当我在运行 Android 4.0.4 的 Xoom 的全局设置中关闭“自动旋转屏幕”时，我的应用程序，并且只有我的应用程序，会继续自动旋转。

我究竟做错了什么？为什么我的应用程序继续自动旋转？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:06:48.250

终于找到是什么原因造成的了。我有

```
android:screenOrientation="sensor" 
```

在我的清单中。将其取出允许它尊重用户的设置。似乎在一项活动上声明会影响从违规活动启动的任何和所有活动。

# php - 教义 - 计算来自不同表的记录

> ID：10055750
> 
> 赞同：3
> 
> 时间：2012-04-07T15:33:29.523
> 
> 标签：php, orm, doctrine

我想从三个不相关的不同表中获取计数。我正在使用这个 SQL 查询。

```
SELECT 
    (SELECT COUNT(DISTINCT id) FROM user) AS userCount, 
    (SELECT COUNT(DISTINCT id) FROM item) AS itemCount, 
    (SELECT COUNT(DISTINCT id) FROM sub_category) as categoryCount; 
```

是否可以将 DQL 用于上述查询？还是我必须使用 rawSQL 查询？

我正在使用学说 1.2.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T04:15:26.943

在四处挖掘后，我自己找到了解决方案。即直接使用pdo 连接实例。

```
$q = Doctrine_Manager::getInstance()->getCurrentConnection();
$result = $q->execute(' SELECT 
    (SELECT COUNT(DISTINCT id) FROM user) AS userCount, 
    (SELECT COUNT(DISTINCT id) FROM item) AS itemCount, 
    (SELECT COUNT(DISTINCT id) FROM sub_category) as categoryCount;'
);
$result->fetchAll(PDO::FETCH_ASSOC); 
```

虽然这对我现在有效。我仍然想知道是否可以将其转换为 DQL。我尝试了不同的语法和方法，例如 Doctrine 的 RAW SQL，但无法使其正常工作。

# android - 跨应用程序没有窗口动画 - android

> ID：10055754
> 
> 赞同：0
> 
> 时间：2012-04-07T15:33:37.853
> 
> 标签：android, android-intent, android-manifest, android-windowmanager

我正在创建一个我不想使用窗口动画的应用程序。我尝试过使用

```
intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION); 
```

在调用新意图的方法中..

我也试过把它放在我的清单的意图过滤器中，如下所示：

```
 <data android:name="android.content.Intent.FLAG_ACTIVITY_NO_ANIMATION" /> 
```

无论哪种方式似乎只处理窗口动画的一侧，这意味着它似乎仍然在动画中，意图，只是没有出来..

必须有一种简单的方法来禁用应用程序中的所有窗口动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:15:34.310

`FLAG_ACTIVITY_NO_ANIMATION`取消下一个活动开始动画，但不取消当前活动结束动画：试试这个：

```
startActivity(...); // with your intent containing the flag
finish(); // not sure if this is necessary
overridePendingTransition(0, 0); // this cancels the ending animation 
```

# parallel-processing - CPU 与 GPU 上的 MPI-2

> ID：10055757
> 
> 赞同：0
> 
> 时间：2012-04-07T15:33:43.843
> 
> 标签：parallel-processing, gpu, openmpi

我正在使用 MPI-2 并行化代码。当我使用 8 个核心处理器时，它成功地加速了。

我只是想知道如果我将 GPU 用于相同目的而不是 CPU 会有什么影响？根据我目前的研究，OpenMPI 与 GPU 兼容，只有在处理器间通信比 CPU 多的情况下，速度才会更好。有没有人尝试过，或者对此有什么看法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:12:04.333

GPU 并行化是与 MPI 并行化完全不同的方向，因为 GPU 线程不能像 MPI 等级那样运行并进行 MPI 调用——它们甚至不是真正需要的线程。不过，您可以通过在 MPI 程序的每个等级中调用 GPU 代码来组合它们。

# list - Haskell：为什么这会导致空列表异常？

> ID：10055758
> 
> 赞同：1
> 
> 时间：2012-04-07T15:33:44.313
> 
> 标签：list, exception, haskell, side-effects

我目前从事 Project Euler 的工作是为了好玩，并使用 Haskell 进行练习。但是，我遇到了一个问题，我似乎无法生成一个更小的示例，所以这里是代码（对于项目 euler 232）：

```
buildNum (x, y) = multNum x y 1 []
  where multNum num mul exp s = if (num > 10 ^ 100) then s else multNum nNum mul nexp ns
          where next = (num * mul) `div` exp
                ns = num:s
                top = next `mod` 10
                nexp = exp * 10
                nNum = num + nexp * top

sumBuild (x, y) = (head (buildNum (x, y))) * length (buildNum (x, y)) 
```

请忽略这里的不良风格:)

如果我在这里加载并运行 sumBuild(7, 5) ，我会得到一个异常：

```
*** Exception: Prelude.head: empty list 
```

但是，如果我将 sumBuild 更改为：

```
sumBuild (x, y) = head (buildNum (x, y)) 
```

或者

```
sumBuild (x, y) = length (buildNum (x, y)) 
```

然后它运行良好。

这对我来说真的很困惑，因为没有副作用，而且两次运行会产生不同的结果（至少看起来是这样）。这里有什么问题？

如果有人可以将此程序编辑为最小的工作示例，那么我真的很感激！

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T16:02:00.030

这是提示：

```
> :t sumBuild
sumBuild :: (Int, Int) -> Int
> let a = 7 :: Int
> a > 10^100
True 
```

作为建议，请尝试始终明确声明顶级声明的类型。这有助于避免此类错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-07T16:04:04.593

问题是，通过与 的结果相乘`length`，`Int`您会强制使用机器大小的`Int`类型进行所有计算，从而导致溢出。当您删除它时，将使用默认的任意大小的`Integer`类型。

如果您添加类型签名和 a`fromIntegral`以强制使用 完成计算`Integer`，则一切都按预期工作。

```
buildNum :: (Integer, Integer) -> [Integer]
buildNum (x, y) = -- same as before

sumBuild :: (Integer, Integer) -> Integer
sumBuild (x, y) = (head (buildNum (x, y))) * fromIntegral (length (buildNum (x, y))) 
```

# android - Android 意图创建

> ID：10055759
> 
> 赞同：1
> 
> 时间：2012-04-07T15:33:49.367
> 
> 标签：android, object, android-context

为什么我们要在创建 Intent 对象时在构造函数中包含上下文对象引用？

例子：

```
Intent i = new Intent(context object,Target.class); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:39:04.627

需要确定应用程序包。在内部`Intent`创建[`android.content.ComponentName`](http://developer.android.com/reference/android/content/ComponentName.html). 虽然这可以通过使用 a 指定包来实现`String`，但只指定上下文更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T15:41:58.827

它用于[初始化](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/content/Intent.java#Intent.%3Cinit%3E%28android.content.Context,java.lang.Class%29)类型字段[`ComponentName`](http://developer.android.com/reference/android/content/ComponentName.html)，该字段又用于[在整个 API](http://grepcode.com/search/usages?id=repository.grepcode.com%24java%24ext@com.google.android%24android@4.0.3_r1@android%24content@ComponentName&type=type&k=u)中进行路由。的使用`ComponentName`似乎与Android 平台的[最深（本机）部分有关](http://developer.android.com/reference/android/os/IBinder.html)

# c++ - 如何从数据库（postgre）中获取最后一个值并在 Qt 中显示它

> ID：10055765
> 
> 赞同：1
> 
> 时间：2012-04-07T15:34:45.763
> 
> 标签：c++, qt

你能告诉我如何从数据库中获取 Qt 列的最后一个值吗？

我知道我可以使用 while 循环获得最后一个值，但这对程序来说工作量太大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:21:41.880

您可以在插入查询之后尝试[`QSqlQuery::lastInsertId`](http://qt-project.org/doc/qt-4.8/qsqlquery.html#lastInsertId)（对于 Postgresql，查询必须仍然处于活动状态并且表必须包含 OID）。

如果它不起作用并且返回`QVariant`无效，您可以尝试其他 Postgresql 方法：
[postgreSQL function for last inserted ID](https://stackoverflow.com/questions/2944297/postgresql-function-for-last-inserted-id)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-08T10:05:12.333

就我而言，我在谷歌和这里找到的东西都不起作用。最后我找到了解决方案。也许它没有优化和漂亮但工作正常

```
int SomeClass::get_last_id(QString sequence){
  QSqlQuery query(QString("select currval('%1')").arg(sequence), this->dbh);
  query.next();
  return query.value(0).toInt();
} 
```

与 QSqlTableModel 一起使用：

```
model->setTable(TABLE_NAME);
model->insertRows(0, 1);
model->setData(model->index(0, parent_domain), _domain);
model->setData(model->index(0, parent_token), _token.mid(0,19).toUpper());
model->setData(model->index(0, parent_name), _name);
model->submitAll();
int id = get_last_id(TABLE_SEQUENCE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T07:45:02.953

```
QSqlQuery sqlQuery;
sqlQuery.prepare("SELECT \"Ime\", \"Prezime\", \"ID\" FROM tabela;");
sqlQuery.exec();
if (sqlQuery.isActive()){
    if (sqlQuery.isSelect()){
        if (sqlQuery.last()){
            QString string=sqlQuery.value(2).toString();
        }
    }
} 
```

解决方案

# php - CakePHP 和链接器表

> ID：10055770
> 
> 赞同：0
> 
> 时间：2012-04-07T15:35:04.413
> 
> 标签：php, cakephp

我的 CakePHP 应用程序中有以下 3 个表：

```
**posts**
id
title
content

**tags**
id
title

**posts_tags**
id
post_id
tag_id 
```

如您所见，我有可以附加标签的帖子，这些帖子存储在名为 posts_tags 的链接器表中。问题是我对如何在 CakePHP 中进行设置感到困惑？

因为我有一个用于帖子和标签以及模型的控制器。尽管在使用帖子创建标签时，逻辑是在帖子控制器中完成的。但是如何正确保存到链接器表以及标签和帖子表？有没有一种简单的方法来处理这种场景中的关联？

我已经很好地设置了帖子和作者的关联（未显示用户表），因为它只是一个简单的一对多关系，但是这个呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T00:31:46.287

实现这一点的最简单方法是使用 Cake 的“hasMany through (The Join Model)”

请参阅 Cakebook 的部分：http: [//book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through-the-join-model](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through-the-join-model)

然后在您的控制器中，使用 ->saveAll() 保存数据： [http ://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-数组选项数组](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array)

# javascript - JavaScript 字符串中的双引号

> ID：10055773
> 
> 赞同：33
> 
> 时间：2012-04-07T15:35:22.650
> 
> 标签：javascript, html

如何在浏览器中显示的 JavaScript 字符串中包含双引号？

我正在做我的 JavaScript 作业，我必须在列表中间包含双引号，如下所示：

```
if (i == 0) {

   error +=  "<li> this is not the name "....." </li>\n"
} 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-04-07T15:36:35.477

使用单引号。

```
error += '<li> this is not the name "....." </li>\n'; 
```

或者转义双引号。

```
error += "<li> this is not the name \".....\" </li>\n"; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-07T15:36:49.560

使用单引号作为字符串分隔符：

```
if (i == 0) {
   error += '<li> this is not the name "....." </li>\n'
} 
```

如果字符串中有单引号，请用双引号将其分隔。

如果字符串中有双引号，请用单引号分隔。

如果您需要在字符串中同时使用这两种类型，请在您选择的任何分隔符前加上`\`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-07T15:41:04.310

考虑使用默认实体

```
 &quot; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T19:05:15.560

```
error +=  "<li> this is not the name “.....” </li>\n" 
```

或者，如果您使用单引号作为标准的英语变体，就像英式英语一样，

```
error +=  "<li> this is not the name ‘.....’ </li>\n" 
```

使用正确的标点符号，您不会遇到 JavaScript 引用约定的问题。计算机语言使用[ASCII](http://en.wikipedia.org/wiki/ASCII)引号，而人类语言则不使用。

只需确保您的文档已正确编码（[Windows-1252](https://en.wikipedia.org/wiki/Windows-1252)和[UTF-8](http://en.wikipedia.org/wiki/UTF-8)都可以在这里执行）并且正确声明了编码。

# iphone - 如何解决xib文件的合并冲突？

> ID：10055783
> 
> 赞同：6
> 
> 时间：2012-04-07T15:36:22.610
> 
> 标签：iphone, ios, svn, xib, merge-conflict-resolution

我们的项目用于`svn`管理源代码版本。我们有一个问题，当一个xib被2人修改时，合并后几乎会发生冲突。我用vim打开了confilct文件，信息不可读，不知道如何解决合并冲突。

有没有人遇到过这个问题？如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:45:40.890

我会首先检查是否可以手动合并它。xib 是 xml 文件。你可以用 TextEdit.app 打开它并搜索“<<<”你会看到两个块，我的和来自 svn 的修订。

如果不可能，您将恢复您的代码，更新并重做工作。还有其他一些方法可以解决它。[如何在 Xcode 中使用 svn 合并冲突（文件 project.pbxproj）？](https://stackoverflow.com/questions/2004135/how-to-merge-conflicts-file-project-pbxproj-in-xcode-use-svn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T20:37:19.267

我确认只需使用文本编辑器编辑文件...

# php - 从基类中创建子类的新实例

> ID：10055787
> 
> 赞同：0
> 
> 时间：2012-04-07T15:36:30.793
> 
> 标签：php

我希望能够首先创建一个基类的新实例，然后从该基类中创建一个子类的新实例。我还希望能够从子类中调用基类方法。我用下面的代码尝试了它，它按我想要的方式工作，但这是一种不好的做法，它的内存效率高吗？还有其他意见吗？

```
<?php
class BaseClass {
    private $subclass = NULL;
   function __construct() {
       print "In BaseClass constructor<br>";
       $this->subclass = new SubClass();
   }
   function sayhello() {
    print 'hello from base class';
   }
}

class SubClass extends BaseClass {
   function __construct() {
       print "In SubClass constructor<br>";
       $this->sayhello();
   }

   function saygoodbye($num) {
    print 'goodbye from base class';
   }
}

$SUB = new SubClass();
?> 
```

我这样做的目的是能够通过 using 访问所有内容`$this->`，例如 CodeIgniter 的工作方式。这就是我的私有 API 的 index.php 文件中的内容。我希望能够在调用 call_user_func_array() 之前对 API 请求进行身份验证。我还需要连接数据库进行身份验证，但我也希望能够从子类访问数据库。本质上，代码确定调用了哪个 API 方法，然后创建子类的实例并最终调用该方法。

```
$get_contents = $_GET;

$resource_name = $get_contents['_resource'];
unset($_GET['_resource']);

$resource_method = $get_contents['_resource_method'];
unset($_GET['_resource_method']);

//Load the resource class
include 'core/resources/' . $resource_name . '.php';

//If set to true, each method will require an API key to be used
$auth_required = array();
$auth_required['collections']['addcollection'] = TRUE;

if(isset($auth_required[$resource_name][$resource_method]) && $auth_required[$resource_name][$resource_method] == TRUE) {
    print 'requires auth';
}

//Create a new instance of the resource
$API = new $resource_name();

$method_params = $_GET;

call_user_func_array(array(&$API, $resource_method), $method_params); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:32:38.770

我没有看到任何效率问题给您当前的代码。这取决于实际情况。如果您问它是否允许，那也是设计问题。手段取决于问题域。因此，您应该熟悉[设计模式](http://en.wikipedia.org/wiki/Software_design_pattern)，而不是问这样的问题。

了解设计模式将使您深入了解如何以标准方式解决设计和架构问题，以及特定的编程语言如何解决这些问题。

# string - 将字典转换为字符串

> ID：10055792
> 
> 赞同：0
> 
> 时间：2012-04-07T15:36:53.517
> 
> 标签：string, dictionary, python-2.7

一直在寻找如何将字典转换为字符串。但找到的结果不是我要找的。我目前找到的结果基本上是将整个字典变成了一个字符串，但我真的不想在我的字符串中出现 {}、 和 :。所以我得到了一本我想再次加入的排序 URLvars 字典。

```
vars = {"id":"2", "test":"3"} 
```

所以我想要一种方法将这本字典转换为：

```
vars = "id=2&test=3" 
```

**更新：** 感谢您的帮助。这也是我为我正在做的更大的脚本制作的 POC！可能是写这个的更好的方法;P

```
from urlparse import urlparse
import urllib

def main(url, var, params):
    urllenght = len(url)
    urlfind = url.find("?")
    lenght = urlfind - urllenght

    params = '&'.join(["%s=%s" % (k, v) for k, v in params.iteritems()])
    url = url[:lenght]

    print params
    print url
    print url+"?"+params

if __name__ == '__main__':
    url="http://test.com/index.php?id=2&test=2"
    url2 = urlparse(url)
    params = dict([part.split('=') for part in url2[4].split('&')])
    print "Avaible URL params"
    for k,v in params.items():
        print "Params: %s" % k

    while True:
        var = raw_input("Select param: ")
        if var in params:
            main(url, var, params)
            break
        else:
            pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:43:22.990

你需要的是[`urllib.urlencode`](http://docs.python.org/library/urllib.html#urllib.urlencode)：

```
>>> import urllib
>>> vars = {"id":"2", "test":"3"}
>>> urllib.urlencode(vars)
test=3&id=2 
```

但请记住，它还会将特殊的 URL 符号转换为它们的 % 形式。所以，如果你不想这样，简单地尝试：

```
'&'.join([`%s=%s` % (k, v) for k, v in vars.iteritems()]) 
```

# actionscript-3 - Flash CS5 字体是 SWF 的最大部分

> ID：10055796
> 
> 赞同：0
> 
> 时间：2012-04-07T15:37:42.690
> 
> 标签：actionscript-3, flash, flash-cs5, tlf

我正在将一个项目从 CS4 转移到 CS5，并且（没有任何更改）我的 SWF 文件变大了 10 倍。原来是 7kb，现在是 77kb。我生成了一个大小报告，看起来字体占用了大部分空间。我没有更改设置。我不确定为什么字体占用这么多空间。有没有解决的办法？这是我的尺码报告：

```
Font Name            Bytes         Characters
-----------------    ----------    ----------
_sans                        12    
MilkyWell                   317    .blsu
Calibri-Bold Bold         75960    %.0123456789 
```

如您所见，Calibri-Bold 占用了 75kb，而我只有 12 个字符。

**更新：**我从我的项目中删除了 Calibri 字体。它将它从 77kb 降低到 3kb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:24:20.697

calibri 粗体字体约为 900k，所以大小对我来说似乎是合理的。

我在 CS5 上测试了它并得到了

```
Font Name            Bytes         Characters
-----------------    ----------    ----------
Calibri-Bold Bold         74514    %.0123456789 
```

您的 CS4 项目是否有可能使用设备字体？

Calibri 是一种 MS 字体，自 Vista 以来所有 Windows 机器上都是默认字体，不确定 osX。如果您安装任何 ms 办公套件或手动安装，我认为您已经安装了它们。

# c# - C# 简单游戏架构

> ID：10055797
> 
> 赞同：2
> 
> 时间：2012-04-07T15:38:06.317
> 
> 标签：c#, forms, window

我打算用休闲架构制作简单的游戏：

```
Initialization
OpenWindowAndGraphics
while(game_not_end) {
    ReadEvents
    UpdateData
    RePaint
}
CloseWindow 
```

我在 Windows 窗体中制作这个。首先，我坚持我将制作我自己的小组。在构造函数中，我将初始化所有内容，但现在我不确定应该在哪里制作游戏循环。游戏会很简单，但我会尽快扩展它。主类如下所示：

```
 Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1(sessid,serwer)); 
```

在 Form1 中只有 SpecialPanel 具有重写 Constructor 和 OnPain 方法（用于初始化和绘制所有内容）。所以我需要控制面板何时重绘并制作游戏循环。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T15:50:21.287

Windows 窗体使用 GDI+ 进行呈现。我不认为 Windows 窗体是开发游戏的好选择，除非它只是一个兴趣问题。否则，XNA Game SDK 让您可以非常轻松地使用 C# 开发游戏，它提供了开发优秀游戏所需的一切。您尝试定义的游戏程序的生命周期已经存在于 XNA SDK 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T15:44:34.610

看看[这里](http://www.dreamincode.net/forums/topic/99860-creating-games-in-c%23-part-i/)的指南。它会让你开始并回答你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T16:02:10.260

我会使用 XNA 来开发游戏。[Riemers 的 XNA 教程](http://www.riemers.net/eng/Tutorials/xnacsharp.php)中的教程对我创建游戏有很大帮助。

# c - OpenCL 给出了与串行执行不同的值

> ID：10055798
> 
> 赞同：0
> 
> 时间：2012-04-07T15:38:12.253
> 
> 标签：c, opencl

我有一个让我对 OpenCL 发疯的问题。我已将问题缩小到给出问题的特定代码段，并在下面引用它。问题是，当我使用 OpenCL 串行执行此代码并比较结果时，它们并不相同。这里唯一作为内核参数的是单元格变量。

在测试期间，我尝试使用之前计算的特定值（例如 local_density）来设置最后一个循环中的值。然后我得到的结果是正确的。据我了解，问题在于 u 和 d_equ 数组在循环中用于计算时。我不得不提一下，这些数组是双精度类型的，我已经添加了所需的编译指示来启用双精度。

在此代码中是否需要同步或类似的东西，因为它适用于 OpenCL？

```
 local_density = 0.0;
    for(kk = 0; kk < 9; kk++)
    {
      local_density += tmp_cells[pos].speeds[kk];
    }

    u_x = (tmp_cells[pos].speeds[1] + tmp_cells[pos].speeds[5] +
           tmp_cells[pos].speeds[8] - ( tmp_cells[pos].speeds[3] +
            tmp_cells[pos].speeds[6] + tmp_cells[pos].speeds[7]))
          / local_density;
    u_y = (tmp_cells[pos].speeds[2] + tmp_cells[pos].speeds[5] +
           tmp_cells[pos].speeds[6] - ( tmp_cells[pos].speeds[4] +
            tmp_cells[pos].speeds[7] + tmp_cells[pos].speeds[8]))
          / local_density;
    u_sq = u_x * u_x + u_y * u_y;
    u[1] =   u_x      ;
    u[2] =         u_y;
    u[3] = - u_x      ;
    u[4] =       - u_y;
    u[5] =   u_x + u_y;
    u[6] = - u_x + u_y;
    u[7] = - u_x - u_y;
    u[8] =   u_x - u_y;
    t1 = 2.0 * c_sq;
    d_equ[0] = w0 * local_density * (1.0 - u_sq / t1);
    t3 = w1 * local_density;
    t2 = t1 * c_sq;
    t1 = u_sq / t1;
    d_equ[1] = t3 * (1.0 + u[1] / c_sq + (u[1] * u[1]) / t2 - t1);
    d_equ[2] = t3 * (1.0 + u[2] / c_sq + (u[2] * u[2]) / t2 - t1);
    d_equ[3] = t3 * (1.0 + u[3] / c_sq + (u[3] * u[3]) / t2 - t1);
    d_equ[4] = t3 * (1.0 + u[4] / c_sq + (u[4] * u[4]) / t2 - t1);
    t3 = w2 * local_density;
    d_equ[5] = t3 * (1.0 + u[5] / c_sq + (u[5] * u[5]) / t2 - t1);
    d_equ[6] = t3 * (1.0 + u[6] / c_sq + (u[6] * u[6]) / t2 - t1);
    d_equ[7] = t3 * (1.0 + u[7] / c_sq + (u[7] * u[7]) / t2 - t1);
    d_equ[8] = t3 * (1.0 + u[8] / c_sq + (u[8] * u[8]) / t2 - t1);

    for(kk = 0; kk < 9; kk++)
    {
      cells[pos].speeds[kk] = (tmp_cells[pos].speeds[kk] + params->omega *
           (d_equ[kk] - tmp_cells[pos].speeds[kk]));
    } 
```

如果有人想知道它是类型的细胞类型

```
typedef struct {
  double speeds[NSPEEDS];
} t_speed; 
```

* * *

## 编辑

经过几次测试后，问题是当我尝试为每个单元格[pos].speeds[kk] 设置值时。如果我只改变其中一种速度的值，那么我得到的结果会更好（更正确的值）。如果我尝试更改多个，那么结果非常糟糕。

所以问题是，为什么我不能在结构中更改多个值而不会出现问题？

* * *

## 编辑

在尝试在几个循环中执行整个代码后，经过一定数量的步骤后，上述代码会导致分段错误。导致问题的原因当然是更新。

```
for(kk = 0; kk < 9; kk++)
{
  cells[pos].speeds[kk] = (tmp_cells[pos].speeds[kk] + params->omega *
       (d_equ[kk] - tmp_cells[pos].speeds[kk]));
} 
```

如果我将此注释掉，则不会出现分段错误。

* * *

## 编辑

当我将 cpu 定位为 OpenCL 的执行设备时，代码可以正常执行而没有问题。为什么会这样？

# jquery - jQuery：获取 div 中选定文本的 html 源

> ID：10055806
> 
> 赞同：2
> 
> 时间：2012-04-07T15:39:16.410
> 
> 标签：jquery

我想在 div 中获取选择文本的 HTML 源并发出警告。

这是我的代码：

```
if (!window.x) {
    x = {};
}
x.Selector = {};
x.Selector.getSelected = function() {
    var t = '';
    if (window.getSelection) {
        t = window.getSelection();
    } else if (document.getSelection) {
        t = document.getSelection();
    } else if (document.selection) {
        t = document.selection.createRange().text;
    }
    return t;
}

$(function() {

    $(document).bind("mouseup", function() {
        var mytext = x.Selector.getSelected();
        alert(mytext);
    }); 
```

[资源](https://stackoverflow.com/questions/5669448/get-selected-texts-html-in-div)

但是那返回纯文本。

有什么办法吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T16:24:44.430

[http://www.codingforums.com/showthread.php?t=154848#post762994](http://www.codingforums.com/showthread.php?t=154848#post762994)建议如下：

```
function selHTML() {

    if (window.ActiveXObject) {
        var c = document.selection.createRange();
        return c.htmlText;
    }

    var nNd = document.createElement("p");
    var w = getSelection().getRangeAt(0);
    w.surroundContents(nNd);
    return nNd.innerHTML;
} 
```

谷歌很好（通常无论如何）:-)

演示： http: [//jsfiddle.net/rR8Sh/1/](http://jsfiddle.net/rR8Sh/1/) 我添加了纯文本选择，以防标签未完全选择并使用 span 而不是`p`避免添加换行符。它仍然会添加空的`<span>`；我想不出办法来避免这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T15:43:42.647

如果我理解正确，您想获取所选节点的 HTML 吗？尝试这个：

```
function getSelectedNode() {
    if (document.selection) {
        return document.selection.createRange().parentElement();
    } else {
        var selection = window.getSelection();
        if (selection.rangeCount > 0)
                return selection.getRangeAt(0).startContainer.parentNode;
    }
} 
```

*借用[这个答案](https://stackoverflow.com/a/1335347/339852)。*

# internet-explorer-8 - IE8 中 PNG 24 的纯色背景

> ID：10055808
> 
> 赞同：1
> 
> 时间：2012-04-07T15:39:25.550
> 
> 标签：internet-explorer-8, png, alpha-transparency, png-24

我进行了搜索，虽然有很多类似的问题，但也有很多不同的解决方案，而且我无法确定哪一个是针对我的问题的，因为它与其他的不太一样。

该网站是[http://www.thewildflowergroup.com/](http://www.thewildflowergroup.com/)

我在 IE8 中也遇到了 PNG alpha 透明度问题，但我没有在边缘看到黑色斑点或伪影。顶部 PNG 的背景只是纯白色。我正在使用[http://code.google.com/p/ie7-js/](http://code.google.com/p/ie7-js/)此处找到的 IE9.js 版本来处理透明胶片，它似乎正在其他页面上工作。但是对于那个顶部，我也在使用 Jquery Cycle。

我已经将图像包装在 div 中，希望通过淡化 div，图像会恢复透明，但没有爱。有什么建议吗？

# arrays - 找到两个元素，所以总和等于给定值

> ID：10055809
> 
> 赞同：1
> 
> 时间：2012-04-07T15:39:32.150
> 
> 标签：arrays, algorithm, time-complexity

给定两组“n”数 A 和 B。从 A 中选择一个元素，从 B 中选择一个元素，使得总和等于给定值“val”。

我的解决方案如下：

> 我们可以对集合 A 和集合 B 的元素进行散列，并检查集合 A 中的每个元素是否 val-arr[i] 存在于集合 B 的散列中。这将花费 O(n) 时间和 O(n) 空间 有没有更好的解决方案，空间为 O(1)，时间为 O(n)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:04:20.970

由于您的两个数组都未排序，因此您别无选择，只能逐个查看每个元素。因此，您不能低于`O(n)`运行时间。我认为您使用的方法还可以。

阅读这些相关帖子：

[给定两个数组 a 和 b。找到所有元素对 (a1,b1)，使得 a1 属于数组 A，b1 属于数组 B，其和 a1+b1 = k](https://stackoverflow.com/questions/3815116/given-two-arrays-a-and-b-find-all-pairs-of-elements-a1-b1-such-that-a1-belong)

[在数组中找到两个总和为 k 的元素](https://stackoverflow.com/questions/5630363/find-two-elements-in-an-array-that-sum-to-k)

# xml - 关于 RDF 中的主谓宾三元组

> ID：10055818
> 
> 赞同：2
> 
> 时间：2012-04-07T15:41:07.223
> 
> 标签：xml, rdf, n-triples

我有一个关于在 RDF 中编写三元组的问题。根据描述[http://www.w3.org/TR/rdf-concepts/#section-triples](http://www.w3.org/TR/rdf-concepts/#section-triples)，据说谓词应该是URI。

但是让我们说如果我想写类似的东西 `<http://mydomain.com/#me>site-owner "http://mydomain.com"`，我应该如何为网站所有者写一个 URI。我有点困惑。正如本教程中给出的

[http://videolectures.net/training06_sure_stsw/](http://videolectures.net/training06_sure_stsw/)。他在xml中写了rdf为

```
<rdf:Description rdf:about=“#York”&gt;
    <tel>6086592</tel>
</rdf:Description> 
```

但是，这里实际的谓词 tel 不是 URI 格式。我有点困惑。即使一个使用 XML 而另一个使用 NTriples，我认为它应该是相同的，不是吗。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T00:24:54.847

您的示例中的 tel 将扩展为类似[http://example.org/tel](http://example.org/tel)的内容，它使用 RDF/XML 中 RDF 元素中定义的文档的默认命名空间，因此它仍然是一个 URI。

只需为站点所有者创建一个 URI 并使用它来定义该三元组。更好的是，尝试使用标准词汇表，例如[FOAF](http://www.foaf-project.org/)或[Dublin Core](http://dublincore.org/)。

如果您还没有，您可能想查看[RDF 入门。](http://www.w3.org/TR/rdf-primer/)事实上，w3c 上的大部分资源都非常好，你应该从这些开始。

# c++ - 并发 C++11 - 可以使用哪些工具链？

> ID：10055820
> 
> 赞同：8
> 
> 时间：2012-04-07T15:41:26.013
> 
> 标签：c++, multithreading, synchronization, c++11, lock-free

我在代码中大量使用`<thread> <atomic> <mutex>`etc，其中包括几种无锁算法。我的目标是（最终）一个 linux 环境。我一直在使用 Visual Studio 2011 Beta 进行开发，虽然它在其他 C++11 功能中非常缺乏，但似乎是唯一实现并发功能的工具链。

在此处查看 c++ 11 支持：

*   [叮当 3+](http://clang.llvm.org/cxx_status.html)
*   [海合会 4.7](http://gcc.gnu.org/projects/cxx0x.html)
*   [MSVC 11](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)

现在，如果其他人只是缺少包含 c++ 11 并发功能的库，我可以轻松使用[just::thread](http://www.stdthread.co.uk/)，但是 clang 和 gcc 都对 c++11 内存模型回答“否”，至少 Visual c++ 似乎支持. 我不确定这会产生什么效果——可能优化掉明显无副作用的代码，以及其他错误的东西。

如果现在我完全避免优化构建并且只编译没有启用优化的调试构建 - 使用 Clang 或 GCC 工具链是否合理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T09:05:07.880

> [GCC 4.7 status](http://gcc.gnu.org/wiki/Atomic/GCCMM)
> 
> C++ memory model work is ongoing and scheduled for completion in the next GCC release. GCC 4.7 has now been released, so this is what you can expect from it.
> 
> *   Full atomic implementation for supported lock free instructions. All the atomic operations have been implemented with the new __atomic builtins, and most targets reflect the memory model parameter in the code which is generated. Optimizations will not move shared memory operations past atomic operations, so the various happens relationships are honoured.
> *   When lock free instructions are not available (either through hardware or OS support) atomic operations are left as function calls to be resolved by a library. Due to time constraints and an API which is not finalized, there is no libatomic supplied with GCC 4.7\. This is easily determined by encountering unsatisfied external symbols beginning with _*atomic**.
> *   Should a program require library assistance, a single C file sample implementation is available to be compiled and linked in with the client program to resolve these external function calls using a locked implementation. Download sample libatomic
> *   C++ templates fully support arbitrary sized objects, althought the previously mentioned libatomic.c file may be required to satisfy some user defined classes. If a class maps to the same size as a supported lock-free integral type, then lock-free routines will be used as well.
> *   Bitfields are not compliant with the memory model. That is to say that they may introduce load or store data races due to whole word accesses when reading or writing.
> *   Optimizations have not been fully audited for compliance, although some work has been done. Some optimizations may introduce new data races which were not present before. The number of known cases are small, and testing for compliance is not trivial. If anyone encounters a case where an optimization introduces a new data race, please open a bugzilla case for it so it can be addressed.

* * *

Support in LLVM seems to be further along: [http://llvm.org/releases/3.0/docs/Atomics.html](http://llvm.org/releases/3.0/docs/Atomics.html)

It's hard to tell to what degree this is actually used in clang though. It seems like `<atomic>` basically works for some types. I'm getting compiler assertions for other types saying that the atomic type was unexpected, which gives a bit of confidence for the types it does work with.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:36:37.100

我在 64 位 linux 和 windows 上成功使用了 gcc-4.7。`std::thread`等即使使用 gcc-4.6 在 linux 上也能完美运行。
在 Windows 上 gcc-4.7 (mingw64) 有一些小问题，内存泄漏与`std::condition_variable`AFAIR 的析构函数。

# php - PHP 使用 cURL ping Minecraft 服务器

> ID：10055839
> 
> 赞同：4
> 
> 时间：2012-04-07T15:44:15.967
> 
> 标签：php, curl, minecraft

大家好，我有一个为使用 fsockopen ping Minecraft 服务器而创建的脚本。我想知道是否有办法将其转换为使用 cURL？

这是功能：

```
function pingserver($host, $port=25565, $timeout=30) {
//Set up our socket
$fp = fsockopen($host, $port, $errno, $errstr, $timeout);
if (!$fp) return false;

//Send 0xFE: Server list ping
fwrite($fp, "\xFE");

//Read as much data as we can (max packet size: 241 bytes)
$d = fread($fp, 256);

//Check we've got a 0xFF Disconnect
if ($d[0] != "\xFF") return false;

//Remove the packet ident (0xFF) and the short containing the length of the string
$d = substr($d, 3);

//Decode UCS-2 string
$d = mb_convert_encoding($d, 'auto', 'UCS-2');

//Split into array
$d = explode("\xA7", $d);

//Return an associative array of values
return array(
    'motd'        =>        $d[0],
    'players'     => intval($d[1]),
    'max_players' => intval($d[2]));
} 
```

这个函数似乎只在本地服务器上运行时才有效，这就是为什么我想将它转换为 cURL 以便我可以在远程服务器上运行它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T06:13:58.153

我意识到你已经解决了你的问题，但我还需要一个命令行 Minecraft 'ping'，所以我将你的 PHP 代码移植到一个独立的 Perl 脚本中，并认为我会在这里分享它，以防其他人需要类似的东西。该脚本仅使用核心模块，因此它应该可以在您安装了 Perl 的任何地方工作。

```
#!/usr/bin/perl
##############################################################################
#
# Script:   mcping
#
# Author:   Grant McLean <grant@mclean.net.nz>
#
# Description:
#
# 'ping' a minecraft server to check it's alive
#

use strict;
use warnings;

use IO::Socket;
use Pod::Usage;
use Getopt::Long  qw(GetOptions);
use Encode        qw(decode);
use Time::HiRes   qw(gettimeofday tv_interval);

my(%opt);

if(!GetOptions(\%opt, 'help|?')) {
    pod2usage(-exitval => 1,  -verbose => 0);
}

pod2usage(-exitstatus => 0, -verbose => 2) if $opt{help};

my $target = shift or pod2usage(
    -exitval => 1,  -verbose => 0, -message => 'No host specified'
);

my $port = 25565;
if($target =~ /(.*?):(\d+)$/) {
    $target = $1;
    $port   = $2;
}

ping_server($target, $port);

exit 0;

sub ping_server {
    my($host, $port) = @_;

    my $t0 = [gettimeofday];
    my $s = IO::Socket->new(
        Domain   => AF_INET,
        PeerAddr => $host,
        PeerPort => $port,
        Proto    => 'tcp',
    ) || die "$!\n";

    $s->autoflush(1);
    print $s "\xFE";

    sysread($s, my $resp, 256);
    my $elapsed = tv_interval($t0);

    die "Malformed response after connect\n" unless $resp =~ /^\xFF/;

    substr($resp, 0, 3, '');

    $resp = decode('UCS-2', $resp);

    my($motd, $players, $max_players) = split /\x{A7}/, $resp;

    print "Msg of the Day:  $motd\n"
        . "Players Online:  $players\n"
        . "Max Players:     $max_players\n";
    printf "Ping Time:       %5.3fs\n", $elapsed;
}

__END__

=head1 NAME

mcping - 'ping' a minecraft server

=head1 SYNOPSIS

  mcping [options] host-or-ip:port

  Options:

   -?     more detailed help message

=head1 DESCRIPTION

Attempts to connect to a minecraft server on the specified host:port.  On
success, a brief report like this will be printed:

  Msg of the Day:  A Minecraft Server
  Players Online:  2
  Max Players:     10
  Ping Time:       0.175s

If the :port is not specified, the default port number of 25565 will be used.

=head1 OPTIONS

=over 4

=item B<-?>

Display this documentation.

=back

=head1 AUTHOR & COPYRIGHT

This script was written by Grant McLean ( grant@mclean.net.nz ) as a Perl port
of a similar PHP script here: http://stackoverflow.com/questions/10055839/

This script may be freely used, copied and distributed under the same terms as
Perl itself.

=cut 
```

# tsql - 如何从多边形表创建多面体

> ID：10055846
> 
> 赞同：1
> 
> 时间：2012-04-07T15:45:43.813
> 
> 标签：tsql, sql-server-2008-r2

我有几何列“GEOMETRY”的多边形表“PARCELA”。如何从这些多边形创建多面体？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:35:24.913

不确定这是否是您正在寻找的但是：如果您有多边形 A 和多边形 B，并且您想将它们组合为一个多边形，这就是我使用的。我需要的是把北欧国家聚集在一起，这样我就可以将它们作为一个整体打印在地图上。

我有表格国家，几何列“geom”和国家代码所在的列“ISO3”。所以我使用 ISO3 列作为我的主键。

```
DECLARE @gtbl TABLE(g geometry, id INT)
INSERT INTO @gtbl 
SELECT null,1

DECLARE @t TABLE(PK INT Identity(1,1), ISO3 VARCHAR(3))

INSERT INTO @t
Select ISO3 From countries WHERE ISO3 in ('FIN','SWE','NOR','DNK')

Declare @maxPK int; Select @maxPK = MAX(PK) From @t
Declare @pk int; Set @pk = 1

While @pk <= @maxPK

Begin

    IF ((SELECT g FROM @gtbl) IS NULL)
        BEGIN
            UPDATE gtbl SET g = c.Geom.MakeValid()
            FROM @gtbl gtbl, countries c WHERE  c.ISO3 in (Select ISO3 From @T Where PK = @pk)
        END
    ELSE
        BEGIN
            UPDATE gtbl SET g = g.STUnion(c.Geom.MakeValid())
            FROM @gtbl gtbl, countries c
            WHERE  c.ISO3 in (Select ISO3 From @T Where PK = @pk)
        END

    Select @pk = @pk + 1
End

SELECT * FROM @gtbl 
```

# c# - 输入字符串的格式不正确

> ID：10055847
> 
> 赞同：0
> 
> 时间：2012-04-07T15:45:49.993
> 
> 标签：c#, string.format

下面的代码会产生一个错误，指出我的输入字符串格式不正确。为什么？

```
private void button7_Click(object sender, EventArgs e)
{
    string uriAddTagtoGroup = 
      string.Format("http://localhost:8000/Service/AddTagtoGroup/{group}/{tag}",
                    textBox6.Text, textBox7.Text);
    //line above says input string was not in the correct format?
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T15:48:15.943

```
 string.Format("http://localhost:8000/Service/AddTagtoGroup/{0}/{1}", 
                textBox6.Text, textBox7.Text); 
```

使用序数

# java - Java Access Enum 的具体方法？

> ID：10055848
> 
> 赞同：2
> 
> 时间：2012-04-07T15:46:23.457
> 
> 标签：java, string, enums, return, getter

我这样创建了一个枚举：

```
enum Types { hi, hello, bye } 
```

我在每个单独的枚举中添加了一个吸气剂，如下所示：

```
enum Types {
    hi {
        String test = "From hi";
        public String getString() {
        return test;
    },
    etc.
} 
```

除了我不能调用“Types.hi.getString()”。有没有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T15:48:17.060

在您的枚举类中，将您要访问的方法定义为`public abstract`.

像这样：

```
 enum Types {
      hi {
        public String getString() {
          return "From hi";
        }
      };

      public abstract String getString();
  } 
```

作为替代方案，让您的枚举类实现一个接口：

```
public interface StringProvider {
     String getString();
}

public enum Types implements StringProvider {
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:51:21.137

方法和字段声明应该放在枚举中（即类型）。hi、bye 和 hello 是 Types 的实例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-07T15:51:12.487

你做的并不完全正确。
Sun 有一个关于如何在枚举中包含方法和字段的文档。[在](http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html)这里。

# php - PHP mail() 函数进入垃圾邮件@ Outlook

> ID：10055849
> 
> 赞同：1
> 
> 时间：2012-04-07T15:46:25.273
> 
> 标签：php, email, header

使用 PHP mail() 函数时，当我在消息中的某处使用“utvecklat”一词时，电子邮件会进入垃圾文件夹。（在哪里都无所谓）

但是，当我从 Outlook 向另一个 Outlook 帐户（在同一邮件服务器中）发送电子邮件时，它会进入收件箱。

因此，我认为问题与邮件标题有关。

**我正在使用这个 PHP 代码：**

```
$subject='=?UTF-8?B?'.base64_encode($subject).'?=';
$emailTo="{$toEmail}";

$boundary = md5(date('U'));

$headers = "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: multipart/alternative;boundary={$boundary}\r\n";
$headers .= "From: \"{$fromName}\" <{$fromEmail}>\r\n";

$message = "This is a MIME encoded message."; 

$message .= "\r\n\r\n--" . $boundary . "\r\n";
$message .= "Content-type: text/html;charset=utf-8\r\n\r\n";
$message .= $message_tmp;

$message .= "\r\n\r\n--" . $boundary . "--";

mail($emailTo, $subject, $message, $headers, "-f {$fromEmail}"); 
```

电子邮件应为 HTML 格式。不管我是否使用“utv **ecklat** ”，电子邮件都会进入垃圾文件夹。

那么，我应该怎么做才能避免 Outlook 中的垃圾邮件过滤器呢？（必须与我的电子邮件标题有关，因为同一邮件服务器中从 Outlook 到 Outlook 的邮件会进入收件箱。）

谢谢！

**更新！**

在这里，您有一封从 Outlook 帐户发送到另一个帐户的电子邮件。有人可以将所有这些标头“转换”为正确的 PHP mail() 代码吗？谢谢！

```
Return-Path: <example@domain.com>
Delivered-To: robin@example.com
Received: from localhost (localhost [127.0.0.1])
    by example.example.com (Postfix) with ESMTP id 9C67EC21B12
    for <robin@example.com>; Sat,  7 Apr 2012 17:58:14 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at example.example.com
X-Spam-Flag: NO
X-Spam-Score: -2.47
X-Spam-Level: 
X-Spam-Status: No, score=-2.47 required=6.31 tests=[ALL_TRUSTED=-1,
    BAYES_00=-1.9, HTML_MESSAGE=0.001, MIME_HTML_MOSTLY=0.428,
    TVD_SPACE_RATIO=0.001] autolearn=ham
Received: from example.example.com ([000.000.000.00])
    by localhost (example.example.com [127.0.0.1]) (amavisd-new, port 10024)
    with ESMTP id HIlqLaU+2IIL for <robin@example.com>;
    Sat,  7 Apr 2012 17:58:11 +0200 (CEST)
Received: from Ciccidator (00-000-00-000-no56.tbcn.telia.com [00.00.00.000])
    by example.example.com (Postfix) with ESMTPA id 866F2C2059C
    for <robin@example.com>; Sat,  7 Apr 2012 17:58:11 +0200 (CEST)
From: "Example Sender" <example@domain.com>
To: <robin@example.com>
Subject: utvecklat
Date: Sat, 7 Apr 2012 17:58:01 +0200
Message-ID: <000001cd14d7$35d38070$a17a8150$@example.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
    boundary="----=_NextPart_000_0001_01CD14E7.F95C9E90"
X-Mailer: Microsoft Outlook 14.0
Thread-Index: Ac0U1zWPte9QsazETMuTKG6LDnf1fg==
Content-Language: sv 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:54:00.520

忽略垃圾邮件涉及很多方面，并且永远不可能是 100% 的解决方案。因为电子邮件过滤可能因一个跨度引擎而异。

*   确认您始终收到邮件的最佳方法之一是将发件人的电子邮件地址添加到收件人的通讯簿中。

*   另外，您应该确认发件人的电子邮件是否未在互联网上列入黑名单。

*   始终确认您已发送带有正确标题的电子邮件。

*   使用电子邮件库，如[PHP Mailer](http://phpmailer.worxware.com/)

更进一步：查看[这个](https://stackoverflow.com/a/2032448/295264)关于 MX 条目的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:58:17.783

也许使用[PHPMailer](http://phpmailer.worxware.com/)可以解决您的问题。测试一下...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T15:53:22.347

如果您的“发件人：”标头包含的域与发送邮件的服务器的域不匹配，Outlook 可能会出错。

Outlook 是否接受来自脚本但不包含该词的电子邮件？

您可以从 gmail 帐户或其他“真实”电子邮件客户端将这个词发送到您的 Outlook 收件箱吗？

如果这两个问题的答案都是“是”，那么我建议查看已接受电子邮件中的标题并*准确复制它们*

此外， \r 不仅需要 \n iirc

祝你好运，

# iphone - 打开 IOS 设置首选项

> ID：10055853
> 
> 赞同：0
> 
> 时间：2012-04-07T15:47:04.963
> 
> 标签：iphone, ios, xcode, settings, preferences

我在我的 IOS iphone 应用程序中打开设置首选项时遇到问题。目前我只是使用一个简单的按钮进行测试，它似乎无法正常工作。

基本上，当我单击按钮时，我希望打开一个特定的设置首选项页面。这是我目前在我的按钮 IBACTION 中使用的内容：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=General"]]; 
```

希望大家能帮我解决这个问题，先谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T15:49:05.160

试试这个：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]]; 
```

应该在 iOS 5 中工作

... 更新：

```
opening with the prefs url was disabled in iOS 5.1 
```

塞巴斯蒂安

# antlr - ANTLR 报告错误，我认为它应该能够通过回溯解决输入

> ID：10055856
> 
> 赞同：0
> 
> 时间：2012-04-07T15:47:39.477
> 
> 标签：antlr, grammar, backtracking

我有一个在大多数情况下都有效的简单语法，但在一个地方它会报告错误，我认为它不应该，因为它可以使用回溯来解决。

这是有问题的部分。

```
command: object message_chain;
object: ID;
message_chain: unary_message_chain keyword_message?
             | binary_message_chain keyword_message?
             | keyword_message;
unary_message_chain: unary_message+;
binary_message_chain: binary_message+;
unary_message: ID;
binary_message: BINARY_OPERATOR object;
keyword_message: (ID ':' object)+; 
```

这是简化版本，对象更复杂（它可以是其他命令、原始值等的结果，但那部分工作正常）。问题在于`message_chain`，在第一个替代方案中。对于像这样的输入，`obj unary1 unary2`它工作正常，但对于像这样的输入，它`obj unary1 unary2 keyword1:obj2`会尝试匹配`keyword1`为一元消息并在到达时失败`:`。我认为这种情况解析器会回溯并确定存在`:`并识别出这是关键字消息。

如果我将关键字消息设为非可选，它可以正常工作，但我需要关键字消息是可选的。

如果关键字消息在第二个备选方案（binary_message）和第三个备选方案（只是关键字消息）中，解析器会找到它。所以这样的事情会产生很好的结果：`1 + 2 + 3 Keyword1:Value`

我错过了什么？回溯在选项中设置为 true，并且在相同语法的其他情况下可以正常工作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:09:25.997

对于 PEG 式回溯，这并不是真正的情况，因为一旦失败，它只会在未完成的推导中返回决策点。对于 input `obj unary1 unary2 keyword1:obj2`，具有单个标记前瞻，`keyword1`可以由`unary_message_chain`. 失败之前可能不会发生`keyword_message`，接下来要尝试的是 message_chain 的第二种选择，即`binary_message_chain`，因此缺少正确的解析。

但是，由于该语法是 LL(2)，因此应该可以扩展前瞻以避免`keyword1`从内部消耗`unary_message_chain`. 您是否尝试过明确设置`k=2`而不回溯？

# authentication - 验证用户用于网站登录的私钥

> ID：10055858
> 
> 赞同：14
> 
> 时间：2012-04-07T15:47:48.190
> 
> 标签：authentication, web, public-key-encryption, public-key

我正在尝试实现登录系统以使用公钥身份验证登录网站。我不确定这是否可行。

这就是我打算做的：-

1.  注册时，用户的公钥保存在网站中。
2.  当用户稍后尝试登录时，网站会要求用户提供相应的私钥。
3.  如果私钥与用户在注册时提供的公钥匹配，则对用户进行身份验证。

我见过像startssl.com这样的网站要求用户提供私钥来验证他们的身份（见附件截图）。那么实施这样的系统需要什么？

![请求私钥的网站截图](../Images/42032318b1193272b8f6397f9d611dd6.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T16:27:53.453

只是为了澄清流程

1.  用户使用普通的旧用户名和密码对进行注册。他还被要求输入至少一个公钥（其他公钥可以稍后从配置文件管理面板添加）
2.  服务器存储用户的公钥并将其与证书中的用户相关联
3.  下次客户端提出出示证书的请求时（这应该由浏览器处理，因此对用户透明地发生），服务器端的 SSL 引擎会检查它是否*知道*客户端，如果知道，请求会被处理，并且*应用程序*代码将对用户进行身份验证和授权，因为它知道公钥和用户之间的链接。如果客户端**未被**识别，服务器应重定向到某个页面以允许注册或手动登录（可能添加新的公钥）

# spring-mvc - 是什么导致此 Spring MVC 应用程序中的映射失败？

> ID：10055861
> 
> 赞同：2
> 
> 时间：2012-04-07T15:48:25.023
> 
> 标签：spring-mvc

我正在尝试让一个非常简单的 Spring @mvc 应用程序工作，但我遇到了似乎是映射错误的问题。

来自 web.xml：

```
<servlet>
    <servlet-name>works</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>works</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

控制器：

```
@Controller
@RequestMapping("/test")
public class TESTController  {
    private static Logger appLogger = Logger.getLogger("AppLogFile");

    public String serviceRequest(   Model model)
    {
        appLogger.info("======================= TESTController GET ===============================");
        model.addAttribute("returnString","TESTController handled the request") ;
        return "SingleStringView"; 
    } 
```

作品-servlet.xml：

```
<context:component-scan base-package="com.ami.dbconnect.controller" />

    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>
    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/>

    <bean id="TESTController" class="com.ami.dbconnect.controller.TESTController"></bean>

    <!-- view resolver not shown --> 
```

该应用程序部署到 /webapps/works 的 Tomcat 7。Tomcat文件结构为：

```
webapps
    /works
        /WEB-INF
            /classes
            /lib 
```

我正在尝试使用 url 调用控制器：localhost:8080/works/test

在 tomcat7-stdout 我看到：

1106 [pool-2-thread-1] 调试 org.springframework.web.servlet.DispatcherServlet - 已发布 servlet 'works' 的 WebApplicationContext 作为名称为 [org.springframework.web.servlet.FrameworkServlet.CONTEXT.works] 的 ServletContext 属性

1106 [pool-2-thread-1] INFO org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'works'：初始化在 728 毫秒内完成

1106 [pool-2-thread-1] 调试 org.springframework.web.servlet.DispatcherServlet - Servlet 'works' 配置成功

14068 [http-apr-8080-exec-2] 调试 org.springframework.web.servlet.DispatcherServlet - 名称为“works”的 DispatcherServlet 处理 [/works/test] 的 GET 请求

14071 [http-apr-8080-exec-2] 警告 org.springframework.web.servlet.PageNotFound - 在 DispatcherServlet 中找不到带有 URI [/works/test] 的 HTTP 请求的映射，名称为“works”

所以我的问题（终于！）：Spring 没有识别控制器中的注释吗？如果不是，那么这个简单的设置可能有什么问题？

感谢您的任何帮助或建议，beeky

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:01:22.297

您需要将`@RequestMapping`注释移动到您的`serviceRequest`方法中。

`@RequestMapping`在类级别可用于为`@RequestMapping`该类的所有 -annotated 指定公共路径前缀，但如果没有方法级别的注释，它不会产生任何影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T20:14:26.240

也许问题出在 servlet 映射部分？尝试改变：

```
<servlet-mapping>
    <servlet-name>works</servlet-name>
    <url-pattern>/works/*</url-pattern>
</servlet-mapping> 
```

然后再试一次。

# servlets - 将图像从 servlet 检索到 Midlet(J2ME)

> ID：10055864
> 
> 赞同：1
> 
> 时间：2012-04-07T15:48:52.043
> 
> 标签：servlets, netbeans, java-me, midlet

这是我目前的 Midlet

```
 if (display.getCurrent() == mainform) {

            selectedparam = activity.getString(activity.getSelectedIndex());

            url = "http://localhost:8080/TOMCATServer/RetrieveServlet?";
            parameter = "activity=" + selectedparam;

            System.out.println(url + parameter);

            try {
                hc = (HttpConnection) Connector.open(url + parameter);
                hc.setRequestMethod(HttpConnection.POST);
                hc.setRequestProperty("CONTENT_TYPE", "application/x-www-from-urlencoded");
                hc.setRequestProperty("User-Agent", "Profile/MIDP-2.0 Configuration/CLDC-1.0");

                out = hc.openOutputStream();
                byte[] postmsg = parameter.getBytes();
                for (int i = 0; i < postmsg.length; i++) {
                    out.write(postmsg[i]);
                }
                out.flush();
                in = hc.openInputStream();

                int ch;
                while ((ch = in.read()) != -1) {
                    b.append((char) ch);
                }

                String result = b.toString().trim();

                System.out.println(result);
                activitiesform.deleteAll();
                activitiesform.append(result);
                display.setCurrent(activitiesform);

            } catch (Exception c) {
                Alert alert = new Alert("Error", "The connection has failed. Please try again.", null, AlertType.ERROR);
                display.setCurrent(alert);
            } 
```

这是我当前的 Servlet

```
public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        PrintWriter out = response.getWriter();
        String activityparam = request.getParameter("activity");
        String[] sports = new String[5];
        sports[0] = ("Football competition");

        if (activityparam.equals("Sports")) {
            out.println("These are the list of sporting activities \n");
            for (int i = 0; i < 5; i++) {

                out.println(sports[i]);
                //Wanted to output the images of different sports here
   } 
```

我想要实现的是，在发送查询请求后，Servlet 可以将图像连同 sports[i] 字符串一起显示回 Midlet。现在，它只使用 PrintWriter 处理字符串文本。图像文件存储在本地，因此绝对路径应该没问题。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T20:19:46.720

I think you should go with two Servlets: one for Strings and another for images (one at a time).

MIDlet could retrieve an image with:

```
    Image img = Image.createImage(in);

```

If you need to cache image data, you can use:

```
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    byte buff[] = new byte[1024];
    int len = in.read(buff);

    while (len > 0) {
        baos.write(buff, 0, len);
        len = in.read(buff);
    }
    baos.close();
    buff = baos.toByteArray();
    // write to RecordStore
    Image img = Image.createImage(new ByteArrayInputStream(buff));

```

# javascript - 分配给数组的内存

> ID：10055873
> 
> 赞同：1
> 
> 时间：2012-04-07T15:50:13.477
> 
> 标签：javascript

我想知道如果您有一个以高值开头的数组，是否有人知道如何使用 JS 数组处理内存。

例如，如果您有：

```
array[5000] = 1; 
```

作为数组中的第一个值，5000 之前的所有内容根本不存在，分配给数组的内存量是否会满足它之前未分配的 4999 个位置......或者它是否只会将内存分配给数组中的值[5000] ?

我试图减少我的脚本使用的内存量，所以这让我想知道这个问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:51:39.637

将值分配给`5000`th 键时，不会填充整个数组：

```
var array = [];     // Create array
array[5000] = 1;
'1' in array;       // false: The key does not exists
Object.keys(array); // 5000 (it's the only key) 
```

如果你想用数组来破坏你的新浏览器，请填充一个类型化数组：

```
var array = new ArrayBuffer(6e9); // 6 Gigs 
```

两者都可以在 Chrome 中轻松验证：打开控制台和内存控制台 (Shift+Esc)，然后粘贴代码。`window.a=new Array(6e9);`或者`window.a=[];window[6e9]=1;`不会导致显着的内存增加，
同时`window.a=new ArrayBuffer(6e9);`使页面崩溃。

PS。`6e9 === 6000000000`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:12:47.447

JS 数组实际上不是您从其他编程语言（如 C、C++ 等）中了解的数组。它们是具有类似数组访问方式的对象。这意味着，当您定义时，`array[5000] = 1;`您实际上定义了数组对象的 5000 属性。

如果您使用字符串作为数组键，您也可以将索引作为属性访问以演示此行为，但由于变量名称不能以数字开头，`array.5000`因此将是无效的。

```
array['key'] = 1;
alert( array.key ); // Gives you 1 
```

这意味着数组可能会像对象一样实现，尽管每个实现都可以自由优化，从而为您提供除了您可​​以定义的对象`object.a`和`object.z`不定义整个字母表的行为之外的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T15:54:33.243

Javascript实际上是由浏览器解释和运行的，所以它取决于浏览器如何实现这种行为。理论上，一旦你执行了array[5000]，你就有了一个包含 5001 个元素的数组，除了第 5001 个元素是未定义的。

虽然如果我是实现运行此类脚本的逻辑的`undefined`人，如果没有分配给其他任何东西，这将是默认值，这意味着我可能可以定义一个带有 1 个条目的映射，将键 5000 分配给值 1。任何访问任何数组中的其他值将自动返回未定义，而无需做不必要的工作。

这是一个测试[here](http://jsfiddle.net/rvDCn/)。如您所见，警报会立即显示。

# android - 如何缩小 Drawable 以匹配 TextView 的宽度？

> ID：10055883
> 
> 赞同：2
> 
> 时间：2012-04-07T15:51:25.720
> 
> 标签：android, html, image, layout, textview

我正在渲染一些带有图像标签的 HTML `TextView`。我尝试在`getDrawable()`代码中缩放图像，但没有成功。代码看起来像这样。

```
myTextView.setText(Html.fromHtml(htmlSource, this, this));
@Override public Drawable getDrawable(String url) {
  Drawable.createFromStream((InputStream) new URL(url).getContent(), null);
} 
```

大图像不会按比例缩小以适应屏幕宽度。相反，我只看到图像的最左边部分，而图像的其余部分被裁剪掉了。如何缩小图像以适应屏幕？

我的布局如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myId"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:fillViewport="true" >

        <TextView
            android:id="@+id/myTextView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center"
            android:textSize="22dp" />
    </ScrollView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T19:12:14.560

我是这样做的：

```
@Override public Drawable getDrawable(String url) {
  Drawable drawable = 
     Drawable.createFromStream((InputStream) new URL(url).getContent(), null);
  final float scalingFactor = 
     (float)textView.getMeasuredWidth() / d.getIntrinsicWidth();
  d.setBounds(0, 0, textView.getMeasuredWidth(), 
     (int) (d.getIntrinsicHeight()*scalingFactor));
} 
```

但是，我发现有时这种技术会失败，因为 TextView 尚未渲染并且 getIntrinsicWidth 返回 0。我还没有解决方案，但如果您使用此代码，您应该通过一些日志记录自己检查一下. 有时您应该会看到除以零异常...

# java - 这个正则表达式行超出了我的理解 "(?=(?:\d{3})++(?!\d))"

> ID：10055885
> 
> 赞同：2
> 
> 时间：2012-04-07T15:51:35.690
> 
> 标签：java, regex

我对基本的 reg-ex 很满意。但是这行代码用于大量进行千次分离超出了我的知识范围，并且在谷歌上搜索了很多也没有满足我的好奇心。你们中的一个可以花点时间向我解释一下下面的代码行吗？

```
someString.replaceAll("(\\G-?\\d{1,3})(?=(?:\\d{3})++(?!\\d))", "$1,"); 
```

我特别不了解正则表达式结构`"(?=(?:\d{3})++(?!\d))"`。

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T16:08:47.773

`"(?=(?:\d{3})++(?!\d))"`是一个[前瞻断言](http://www.regular-expressions.info/lookaround.html)。

它的意思是*“只有在后面跟着（（我们不需要捕获的三个数字）重复一次或多次（并再次重复一次或多次）（不跟一个数字））时才匹配”*。请参阅有关符号的[说明。](http://www.regular-expressions.info/brackets.html)`(?:...)`这称为非捕获组，意味着您无需在比赛结束后引用该组。

`"(\\G-?\\d{1,3})"`是实际应该匹配的部分（但前提是满足上述条件）。

编辑：我认为`+`必须是一个特殊字符，否则它只是一个加号。如果它是一个特殊字符（快速搜索表明[它也在 Java 中](http://java.sun.com/developer/technicalArticles/releases/1.4regex/)），那么第二个字符是多余的。

编辑 2：感谢[Alan Moore](https://stackoverflow.com/questions/10055885/this-regex-line-exceeds-my-understanding-d3-d/10056023#comment12868478_10056023)，现在很清楚了。第二个`+`意思是所有格匹配，所以意思是如果在检查尽可能多的3位组之后，如果没有发现它们后面没有一个非数字，引擎会立即放弃而不是步进一个3-数字组回来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T16:21:36.337

这个表达式有一些高级的东西。首先，最简单的：`\d{3}`正好是三位数。这些是你的成千上万。

then: the`++`是 + 的变体（表示一个或多个），但具有所有格，这意味着它将吃掉所有的数千个。我不完全确定为什么这是必要的。

`?:`意味着它是一个非捕获组 - 我认为这只是出于性能原因，可以省略。

`?=`是一个积极的前瞻 - 我认为这意味着它只检查该组是否存在但不会计入匹配的字符串 - 这意味着它不会被替换。

`?!`是一个否定的前瞻 - 我不太明白，但我认为这意味着它**不能**匹配，这反过来意味着在匹配序列的末尾不能有另一个数字。这可以确保第一组得到正确的数字。例如，如果你明白我的意思，10000 只能匹配为 10(000) 而不是 1(000)0。

通过前瞻，如果我理解正确（我没有测试过），实际上只有第一组会被替换，因为它是匹配的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T19:46:14.007

对我来说，该正则表达式中最有趣的部分是`\G`. 我花了一段时间才记住它的用途：防止在分数部分添加逗号（如果有的话）。如果正则表达式很简单：

```
(-?\d{1,3})(?=(?:\d{3})++(?!\d)) 
```

...这个号码：

```
12345.67890 
```

...最终会是：

```
12,345.67,890 
```

但是添加`\G`到开头意味着匹配只能从字符串的开头或上一个匹配结束的位置开始。所以它不匹配`345`是因为`.`它跟随它，它不匹配`67`是因为它必须跳过一些字符串才能这样做。所以它正确返回：

```
12,345.67890 
```

我知道这不是问题的答案，但我认为值得一提。

# asynchronous - 异步 CTP：我做错了，GUI 被阻止

> ID：10055886
> 
> 赞同：0
> 
> 时间：2012-04-07T15:51:39.170
> 
> 标签：asynchronous, ctp

我正在使用异步 CTP 进行一些探测，但我没有得到好的结果，因为 GUI 被阻止了。

我有一个带有按钮和用于日志的文本框的 WPF 应用程序。然后我有这个代码：

```
private async void btnAsync01_Click(object sender, RoutedEventArgs e)
        {
            UpdateTxtLog("Enter in Button Async01: " + System.DateTime.Now);
            await metodo01Async();
            UpdateTxtLog("Exit button Async01: " + System.DateTime.Now);
        }

private async Task slowMethodAsync()
        {
            UpdateTxtLog("Enter in slowMethod: " + System.DateTime.Now);
            Thread.Sleep(5000);
            UpdateTxtLog("Exit slowMethod: " + System.DateTime.Now);
        } 
```

如果没有错，设置一个带有“sync”的方法（这里是click事件），它让方法使用await，将执行点返回给调用实际方法的方法，然后执行返回GUI .

所以在GUI中，我点击按钮，然后在click事件中等待slowMethod，我如何将await与slowMethod一起使用，控件应该返回给GUI，然后GUI不应该被阻塞。但是，GUI 被阻止并且 txtLog 直到 slowMethod 完成才显示任何信息。

这是因为 slowMethod 是在与 GUI 相同的线程中执行的吗？如果我错了，异步通常使用与调用 await 方法的方法相同的线程，但我认为异步的原因避免了这种情况。

如何在没有 thread.Sleep 的情况下模拟 slowMethod？也许这就是问题所在，因为在 slowMethod 中我休眠了线程，而 slowMethod 的线程与 GUI 相同。

这让我觉得总是建议在其他线程中执行异步方法的代码？如果这是正确的，如果我还需要使用任务来不阻塞主线程，那么使用异步是什么意思？

何时使用异步以及何时使用任务？

对于此探测，我正在关注此 Web 中的示例：http: [//www.codeproject.com/Articles/127291/C-5-0-vNext-New-Asynchronous-Pattern](http://www.codeproject.com/Articles/127291/C-5-0-vNext-New-Asynchronous-Pattern)

在这个例子中，它使用了 client.DownloadStringTaskAsync 作为 slowMethod，但在我的例子中，我没有使用 WebClient，而是使用了一个虚拟方法，通过睡眠来模拟一个 slowMethod。我认为这是独特的区别。

谢谢。戴姆洛克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:59:38.500

使用 模拟等待`await TaskEx.Delay(5000)`，它执行*异步*睡眠/延迟。

您可能还想在`async`/上阅读更多内容`await`。有几个不错的 Channel9 视频；Stephen Toub、Eric Lippert 和许多其他 Microsoft 博主都有出色的概述。Jon Skeet 的“eduasync”博客系列也非常适合*深入*研究。我已经[在我自己的博客上写了一个异步介绍](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)，其他许多人也是如此。

简而言之，这是如何`async`以及`await`真正起作用的：

*   `async`关键字仅启用`await`关键字。就这些。它*不在*后台线程上运行该方法。
*   `await`仅当其“等待者”未完成时才异步执行。

所以在你的情况下，`btnAsync01_Click`两者`slowMethodAsync`都在 UI 线程上运行。`slowMethodAsync`将同步运行（正在执行`Thread.Sleep`），然后返回`btnAsync01_Click`，等待已经完成的任务。由于任务已经完成，`btnAsync01_Click`继续执行而不屈服于 UI 消息循环。

如果替换`Thread.Sleep`为`await TaskEx.Delay`，`btnAsync01_Click`则将开始在 UI 线程上运行，并将调用`slowMethodAsync`（也在 UI 线程上运行）。当`slowMethodAsync` `await`s 延迟（即未完成）时，它会返回一个未完成的任务给`btnAsync01_Click`。`btnAsync01_Click`将`await`执行该任务（未完成），并将返回到 UI 循环。

当延迟到期时，它将完成，`slowMethodAsync`并将恢复（在 UI 线程上）。完成`slowMethodAsync`后，其返回的任务将完成，`btnAsync01_Click`并将恢复（在 UI 线程上）。

# executable - 如何在 Cocoa/Xcode/OBJ-C 中使用 NSWorkspace launchapplication 测试有效的应用程序

> ID：10055891
> 
> 赞同：0
> 
> 时间：2012-04-07T15:52:34.167
> 
> 标签：executable, launching-application, nsworkspace, executable-path

我有一个外部编辑器设置，最终用户可以更改设置。由于我想让我的软件变得智能，我想将启动此外部软件的按钮设置为禁用状态，如果软件无效（可能 TextEdit 已移至 Utilities 或其他地方或其他地方出错，任何事情都可能发生，对?)..

```
// Default setting: /Applications/TextEdit.app

[[NSWorkspace sharedWorkspace] launchApplication: [[NSUserDefaults standardUserDefaults] stringForKey: @"externalapp"]]; 
```

我可以做一个简单的测试，证明位置是有效的并且存在，但出于某种原因，我决定走花哨的方式，并开始认为应该有一个测试来测试这个位置是否正确 - 它不需要测试它适用于 TextEdit.app - 因为整个想法是您可以使用几乎任何您想要的编辑器 - 这就是为什么它首先是可定制的 - 但我只想简单检查一下我们不会遇到可能遇到的问题被这个测试避免了。

是的，我知道我应该使用 TextEdit.app 打开一个文件，但我还没有进入那个阶段，所以还没有任何东西可以打开，我稍后会这样做——在这个阶段这就足够了看看这个想法是否有效，我可以做一些测试。但如果有人想分享我可能还没有想到的好想法，我正在倾听。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:31:48.387

这就是我要求的测试方法..

```
NSString *fileType = [sharedWorkspace typeOfFile: [[NSUserDefaults standardUserDefaults] stringForKey: @"externalapp"] error:nil];

if (( UTTypeEqual((CFStringRef)fileType, kUTTypeApplication) ) || ( UTTypeEqual((CFStringRef)fileType, kUTTypeApplicationBundle) ) || ( UTTypeEqual((CFStringRef)fileType, kUTTypeApplicationFile) ))
    NSLog(@"Yes - File type is equal to Application"); 
```

这是一个正确的变压器实现：

```
@implementation icalValidTransformer

+ (Class)transformedValueClass { return [NSNumber class]; }
+ (BOOL)allowsReverseTransformation { return NO; }

- (id)transformedValue:(id)value {  
    if (( value == nil ) || ( [[NSApp delegate]sharedWorkspace] == nil ))
        return [NSNumber numberWithBool: NO];

    NSError *fileError = nil;
    NSString *fileType = [[[NSApp delegate] sharedWorkspace] typeOfFile:value error: &fileError];

    if ( fileError != nil )
        return [NSNumber numberWithBool: NO];

    if (( UTTypeEqual((CFStringRef)fileType, kUTTypeApplication) ) || ( UTTypeEqual((CFStringRef)fileType, kUTTypeApplicationBundle) ) || ( UTTypeEqual((CFStringRef)fileType, kUTTypeApplicationFile) ))
        return [NSNumber numberWithBool: YES];

    return [NSNumber numberWithBool: NO];
}

@end 
```

这也是一个非常好的示例，说明如何将 fileError 与 -typeOfFile 一起使用 - 如果出现错误（例如，文件不存在），此禁用的按钮/菜单/您正在使用的任何控件..

# android - 在不使用位图的情况下防止在 LayeredList 中缩放形状

> ID：10055892
> 
> 赞同：10
> 
> 时间：2012-04-07T15:52:43.800
> 
> 标签：android, layout, drawable

尝试使用 LayerDrawable（在 XML 中定义为图层列表）将多个形状可绘制对象分层；用作布局的背景。

Android 指南（[用于 LayerList](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)）说：

> 默认情况下，所有可绘制项都会缩放以适应包含视图的大小。因此，将图像放在图层列表中的不同位置可能会增加视图的大小，并且某些图像会适当缩放。为避免缩放列表中的项目，请使用`<bitmap>` 元素内的`<item>`元素来指定可绘制对象并将重力定义为不缩放的对象，例如“中心”。

我不希望我的形状按比例缩放，但我不确定如何`bitmap`正确地将它们包装在标签中：如果我按如下方式执行它会产生错误：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <bitmap
            android:src="@drawable/layer_one"
            android:gravity="center" />
    </item>
    <item>
        <bitmap
            android:src="@drawable/layer_two"
            android:gravity="center" />
    </item>
    <item>
        <bitmap
            android:src="@drawable/layer_three"
            android:gravity="center" />
    </item>
    <item>
        <bitmap
            android:src="@drawable/layer_four"
            android:gravity="center" />
    </item>
</layer-list> 
```

投诉：

> 二进制 XML 文件第 25 行：`<bitmap>`需要有效的 src 属性

其中一个可绘制对象的示例，例如 res/drawable/layer_one.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<!--  res/drawable/layer_one.xml -->
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid android:color="#FFFFFF"/>
    <corners
        android:bottomRightRadius="15dp"
        android:bottomLeftRadius="15dp"
        android:topLeftRadius="15dp"
        android:topRightRadius="15dp" />
</shape> 
```

Android 站点上使用的示例使用图像作为可绘制对象，而不是 XML 定义的形状（并不是说我的错误是针对这些的，而且我没有在某处犯过愚蠢的错误）。任何线索表示赞赏，谢谢。

* * *

[使用可绘制资源](https://stackoverflow.com/questions/9788726/using-drawable-resources)
这个问题的答案表明您不能将 XML 可绘制对象用作位图的 src。我已经修改了问题的标题，现在询问如何在不使用的情况下防止形状缩放（从而调整容器视图的大小）`bitmap`，或者我是否被迫使用实际的图像资源？

* * *

添加了所需结果的图像 - 能够拥有具有规则矩形填充形状或其他形状的背景，然后在此之上分层，更多形状可绘制对象（这里有 3 个椭圆）。左侧是理想的，允许顶部和左侧偏移，右侧很好，所有形状都转到默认位置：

![在此处输入图像描述](../Images/69058e56784b035bb33f9d674f6c5cc6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:22:23.877

是的，*（根据我之前的[回答](https://stackoverflow.com/questions/9788726/using-drawable-resources)）*您不能将 xml drawable 用于位图。构建很好，但是当您运行应用程序时，它会崩溃。

关于声明`use a <bitmap> element inside the <item> element`意味着您可以在图层列表中定义更多形状，这就是它的用途。虽然您也可以定义位图，但您的位图应该有一个**src**值，指的是实体图像（而不是 xml）。

您可以做的是将 layer_one、layer_two 和其他层的 xml 插入到您的 layer_list xml 中。例如：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item>
        <shape
            android:shape="rectangle" >
            <solid android:color="#FFFFFF" />

            <corners
                android:bottomLeftRadius="15dp"
                android:bottomRightRadius="15dp"
                android:topLeftRadius="15dp"
                android:topRightRadius="15dp" />
        </shape>
    </item>

    <!-- and so on with your other shapes -->

</layer-list> 
```

希望它应该工作:)

# debugging - 如何在 Xcode 中从 TableViewCell 中调试 segue？

> ID：10055894
> 
> 赞同：1
> 
> 时间：2012-04-07T15:52:48.570
> 
> 标签：debugging, uitableview, ios5, storyboard, segue

我正在尝试使用情节提要实现从一个表视图控制器到另一个的segue。

我在情节提要中创建了一个从源 tableview 单元到我的目标 table view 控制器的 push segue，并给了它一个标识符。

当我触摸源表视图中的单元格时，会调用 prepareForSegue，但从未发生 segue。但是，如果我将其更改为模态转场，它就可以工作。

有什么想法可以调试它以找出它失败的原因吗？调试日志中没有任何内容...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T12:43:15.327

这就解释了。“推送”特定于导航控制器。以下内容来自 iOS 文档的 Glossary 部分：

" **push segue** 一种转换效果将新视图控制器推送到导航控制器的导航堆栈上的 segue。"

# git - 处理 git blame 的全部内容

> ID：10055895
> 
> 赞同：5
> 
> 时间：2012-04-07T15:52:54.733
> 
> 标签：git

我想处理`git blame`特定文件的完整输出。某些文件太长而无法在屏幕上显示，因此用户需要通过按键逐行向下滚动`Enter`。是否有我缺少的命令行选项可以打印出完整的输出？或者，我可以使用该`-L`选项来定义线的起点和终点。但是，这需要我弄清楚文件有多少行并多次运行我想避免的命令。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-07T16:10:01.097

使用`--no-pager`参数：

```
git --no-pager blame file.name 
```

此外，将输出重定向到文件将达到相同的效果：

```
git blame file.name > output.txt 
```

您还可以通过各种方式临时或永久禁用 git 的`core.pager`配置和各种环境变量的分页。

请参阅[如何防止 git diff 使用寻呼机？](https://stackoverflow.com/questions/2183900/how-do-i-prevent-git-diff-from-using-a-pager)了解更多信息。

# android - 在 Android 上扩展抽象类时出现 InstantiationException

> ID：10055900
> 
> 赞同：0
> 
> 时间：2012-04-07T15:53:30.677
> 
> 标签：android, exception

我有一个名为 Screen 的抽象类以这种方式实现....

```
public abstract class Screen {
    protected final Game game;

    public Screen(Game game) {
    this.game = game;
    }

    public abstract void update(float deltaTime);
    public abstract void present(float deltaTime);
    public abstract void pause();
    public abstract void resume();
    public abstract void dispose();
} 
```

和一个扩展 Screen 类的类

```
public class LoadingScreen extends Screen {

    public LoadingScreen(Game game) {
        super(game);
    }

    @Override
    public void update(float deltaTime) {

    }

    @Override
    public void present(float deltaTime) {
        // TODO Auto-generated method stub

    }

    @Override
    public void pause() {
        // TODO Auto-generated method stub

    }

    @Override
    public void resume() {
        // TODO Auto-generated method stub

    }

    @Override
    public void dispose() {
        // TODO Auto-generated method stub

    }

} 
```

但是当我尝试执行该项目时，我得到了以下日志：

```
04-07 03:01:09.603: E/AndroidRuntime(1107): FATAL EXCEPTION: main
04-07 03:01:09.603: E/AndroidRuntime(1107): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.mobi.classic.snake/com.mobi.classic.snake.LoadingScreen}: java.lang.InstantiationException: com.mobi.classic.snake.LoadingScreen
04-07 03:01:09.603: E/AndroidRuntime(1107):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
04-07 03:01:09.603: E/AndroidRuntime(1107):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-07 03:01:09.603: E/AndroidRuntime(1107):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-07 03:01:09.603: E/AndroidRuntime(1107):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-07 03:01:09.603: E/AndroidRuntime(1107):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-07 03:01:09.603: E/AndroidRuntime(1107):     at android.os.Looper.loop(Looper.java:123)
04-07 03:01:09.603: E/AndroidRuntime(1107):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-07 03:01:09.603: E/AndroidRuntime(1107):     at java.lang.reflect.Method.invokeNative(Native Method)
04-07 03:01:09.603: E/AndroidRuntime(1107):     at java.lang.reflect.Method.invoke(Method.java:521)
04-07 03:01:09.603: E/AndroidRuntime(1107):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-07 03:01:09.603: E/AndroidRuntime(1107):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-07 03:01:09.603: E/AndroidRuntime(1107):     at dalvik.system.NativeStart.main(Native Method)
04-07 03:01:09.603: E/AndroidRuntime(1107): Caused by: java.lang.InstantiationException: com.mobi.classic.snake.LoadingScreen
04-07 03:01:09.603: E/AndroidRuntime(1107):     at java.lang.Class.newInstanceImpl(Native Method)
04-07 03:01:09.603: E/AndroidRuntime(1107):     at java.lang.Class.newInstance(Class.java:1429)
04-07 03:01:09.603: E/AndroidRuntime(1107):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-07 03:01:09.603: E/AndroidRuntime(1107):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
04-07 03:01:09.603: E/AndroidRuntime(1107):     ... 11 more 
```

我是 Android 游戏编程的新手，我不知道问题是什么，我已经用谷歌搜索了这个问题并在这里查看了一些类似的问题，但我没有得到答案。请帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:01:14.867

似乎您正在尝试将该`LoadingScreen`类用作 Activity，但事实并非如此。您只能使用活动（或从*扩展*`Activity`的类）。查看[hello world 示例](http://developer.android.com/resources/tutorials/hello-world.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T21:23:08.207

你有 LoginScreen 作为主类，所以你必须需要

扩展一些 Activity 类。

```
class LoginScreen extends Activity
{
   onCreate(....)
   {
    new ABC();
   super(..);
   }

    class ABC extends Screen
    {
     // your code goes here...
    }
} 
```

# php - 在哪里放置代码以触发标记通知，如所见

> ID：10055901
> 
> 赞同：0
> 
> 时间：2012-04-07T15:53:33.960
> 
> 标签：php, database, design-patterns, notifications

我有一个简单的 MySQL 表，用于在具有用 PHP 编写的社交网络功能的 Web 中存储通知。

```
+----------------------+
| Notifications        |
+----------------------+
| (PK) notification_id |
| user_id              |
| uri                  |
| message              |
| seen                 |
| created_at           |
+----------------------+ 
```

*   **notification_id**是 PK （不言自明）
*   **user_id**是收到通知的用户 ID
*   **uri**是用户单击通知时浏览器将转到的内部 URI，主要链接到单个发生的事件页面（例如，当通知是关于有人评论时链接到用户的照片永久链接）
*   **message**是通知消息
*   **seen**存储为布尔值，它表示通知是否已被读取*（这是这个问题中最重要的部分）*
*   **created_at**只是一个时间戳

我已经完成了大部分通知机制，但剩下的就是可见/不可见的部分。

我只想在顶部导航栏的下拉菜单中显示看不见的通知（就像 Facebook 一样），用户可以单击指向显示所有通知的页面的链接。

放置代码以触发将其标记为已见的最佳位置在哪里？当指定用户已阅读通知内容并进入单个事件页面（即通过单击它）时，应将其标记为“已看到”

我已经想到了一些方法，欢迎使用其他替代方法。

*   使用 javascript 拦截用户对通知的点击，并在继续通知的 URI 之前发出 ajax 请求以“标记为已见”
*   在目标 URL 中制作 PHP 脚本以更新数据库中**看到**的记录。这种方法的问题是单个帖子与通知记录之间 没有*关系。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:19:32.660

如果我处于类似情况（并且我没有实现事件系统），我会让通知链接指向传递脚本。在该脚本中，只需将通知标记为已查看并将用户重定向。由于您的通知和对象不相关，您可以使用 GET 请求参数 (?type=photo&id=1¬ification=1) 来确定哪个对象等。

我不建议使用 Javascript 来执行此操作……在我看来，这太不可靠了。你永远不知道用户是否真的在他们的浏览器上启用了 Javascript 等等。

# mysql - 尝试在 ruby 中创建前十名列表

> ID：10055902
> 
> 赞同：0
> 
> 时间：2012-04-07T15:53:34.460
> 
> 标签：mysql, ruby-on-rails-3

我正在尝试根据索引页面上的 MySQL 数据库生成前十名位置列表，但没有任何运气可言。我知道我需要以某种方式使用 .find，但我不确定如何调用索引页面中的位置表来执行此操作。当我尝试调用 Locations.find 我得到

未初始化的常量 ActionView::CompiledTemplates::Locations

这里有人知道我应该如何前进吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:58:24.863

首先，如果你还没有拿到这本书，我会推荐[这本书。](http://pragprog.com/book/rails4/agile-web-development-with-rails)

第二：如果您以应有的方式生成模型，则应将其称为`Location`not `LocationS`。所以你应该尝试使用`Location.find`，或者，如果你只想要所有记录，你可以这样做`Location.all`

# javascript - $.cookie('name') 不是函数吗？

> ID：10055905
> 
> 赞同：0
> 
> 时间：2012-04-07T15:53:52.723
> 
> 标签：javascript, jquery, cookies

我正在尝试保存和使用 cookie 来了解用户想要什么样的 viewStyle。这个饼干有一个开关。

这就是我想要更新 cookie 的方式

```
 $('body').on('click','.viewBy li a',function(){
                    if($('.titular').length > 0){
                         $.cookie('viewBy','titular',{expires:30});
                    }else{
                         $.cookie('viewBy','',{expires:30});
                    }
                }); 
```

这就是我检查的方式

```
 if($.cookie('viewBy')){
                        $('.viewBy li').toggleClass('active');
                        $('.recetaTitular').addClass('titular');
                } 
```

但我得到这个萤火虫错误：

```
$.cookie is not a function
[Parar en este error] 
```

我试过了

```
 if(typeof $.cookie('viewBy') != 'undefined' &&($.cookie('viewBy'))){
                        $('.viewBy li').toggleClass('active');
                        $('.recetaTitular').addClass('titular');
                } 
```

但得到同样的错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T16:05:35.443

`$.cookie`不是 jQuery 函数。您需要包含一个插件，也许是这个：

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

**加载 jQuery 插件**后。****

# assembly - 组装和寄存器

> ID：10055907
> 
> 赞同：2
> 
> 时间：2012-04-07T15:53:58.090
> 
> 标签：assembly, x86

我在业余时间学习汇编语言以成为更好的开发人员。我从亚马逊买了一本书，它很快就会发货，我正在尝试在深入研究之前熟悉基本概念。

我对应该将哪些通用寄存器用于通用任务感到困惑。我知道 C 编程语言，并且阅读过关于汇编和 Windows API 的调用约定。

但是，如果您有一个非常简单的任务，例如将两个数字相加而没有对 C 等的引用，那么您会使用哪些寄存器？

我意识到这是一个基本问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T16:03:02.357

无论你想要什么，真的。

在第一代 8086 处理器中，一些通用寄存器（AX、BX、CX、DX）也有半特殊用途。例如，LOOP 操作码假定您的循环计数器在 CX 中；DIV 操作码将结果存储在 AX 和 DX 中。有些寻址方式可以使用BX或SI或DI作为偏移量，但不能使用其他通用寄存器作为偏移量。

在随后的处理器世代中，其中一些特殊用途已经逐渐消失——例如，我认为大多数操作码现在允许您使用任何寄存器作为偏移量，而不仅仅是 BX。所以在大多数情况下，通用寄存器是可以互换的。

如果您想遵循历史先例，则 (E)AX 是“累加器”，因此它将是存储例如运行总计的传统位置，因为您正在对一系列数字求和。因此，如果您正在做加法，并且您不确定将结果放入哪个寄存器，则 (E)AX 将是一个不错的默认选择。

# java - 如何使用布尔搜索语法进行 Java 字符串匹配？

> ID：10055909
> 
> 赞同：14
> 
> 时间：2012-04-07T15:54:11.213
> 
> 标签：java, scala, textmatching, booleanquery

我正在寻找一个 Java/Scala 库，它可以接受用户查询和文本并返回是否匹配。

我正在处理信息流，即：Twitter Stream，并且无法使用批处理过程，我需要实时评估每条推文，而不是通过 Lucene RAMDisk 对其进行索引并稍后查询。

[可以使用ANTLR](http://www.antlr.org/)创建解析器/词法分析器，但这是一种常见的用法，我不敢相信以前没有人创建过库。

[TextQuery Ruby 库](https://github.com/igrigorik/textquery)中的一些示例完全符合我的需要：

```
 TextQuery.new("'to be' OR NOT 'to_be'").match?("to be")   # => true

    TextQuery.new("-test").match?("some string of text")      # => true
    TextQuery.new("NOT test").match?("some string of text")   # => true

    TextQuery.new("a AND b").match?("b a")                    # => true
    TextQuery.new("a AND b").match?("a c")                    # => false

    q = TextQuery.new("a AND (b AND NOT (c OR d))")
    q.match?("d a b")                                         # => false
    q.match?("b")                                             # => false
    q.match?("a b cdefg")                                     # => true

    TextQuery.new("a~").match?("adf")                         # => true
    TextQuery.new("~a").match?("dfa")                         # => true
    TextQuery.new("~a~").match?("daf")                        # => true
    TextQuery.new("2~a~1").match?("edaf")                     # => true
    TextQuery.new("2~a~2").match?("edaf")                     # => false

    TextQuery.new("a", :ignorecase => true).match?("A b cD")  # => true 
```

一旦它在 Ruby 中实现，它就不适用于我的平台，我也不能仅在我们的解决方案中使用 JRuby：

我发现了一个类似的问题，但无法从中得到答案： [Boolean Query / Expression to a Concrete syntax tree](https://stackoverflow.com/questions/3556776/boolean-query-expression-to-a-concrete-syntax-tree)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T16:22:06.520

Spring 表达式语言[(SpEL)](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/expressions.html)支持基于正则表达式`matches`返回 s 的运算符。`boolean`有关用法，请参阅文档的[此](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/expressions.html#d0e12732)部分。

这也将允许您使用逻辑运算符，例如`and`,`or`和`not`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T01:04:36.533

鉴于您正在进行文本搜索，我会尝试利用 Lucene 提供的一些基础设施。可能您可以创建一个[`QueryParser`](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/queryParser/QueryParser.html)并调用`parse`以取回一个`Query`. Query 的可实例化子类是：

```
TermQuery
MultiTermQuery
BooleanQuery
WildcardQuery
PhraseQuery
PrefixQuery
MultiPhraseQuery
FuzzyQuery
TermRangeQuery
NumericRangeQuery
SpanQuery 
```

然后您可以使用模式匹配来实现匹配对您的应用程序的意义：

```
def match_?(tweet: String, query: Query): Boolean = query match {
  case q: TermQuery => tweet.contains(q.getTerm.text)
  case q: BooleanQuery => 
    // return true if all must clauses are satisfied
    // call match_? recursively
  // you need to cover all subclasses above
  case _ => false
}

val q = queryParser.parse(userQuery)
val res = match_?(tweet, q) 
```

这是[一个实现](https://gist.github.com/2335411)。它肯定有错误，但你会明白的，它显示了概念的工作证明。它重用了默认 Lucene QueryParser 的语法、文档和语法。

# java - 带有过滤器的 Java JFileChooser 据说只显示目录无法只显示目录

> ID：10055910
> 
> 赞同：7
> 
> 时间：2012-04-07T15:54:17.183
> 
> 标签：java, swing, jfilechooser, filefilter

（提前谢谢！如果您需要更多信息，请告诉我。底部的示例代码。）

**我试图解决的问题：**

我试图让这个 JFileChooser 对象只显示目录（而不是文件），通过使用 javax.swing.filechooser.FileFilter 对象，该对象在 accept(File file) 覆盖方法中有这个：`return file.isDirectory();`。但是，至少在我的 Mac 上，它似乎并没有阻止文件与目录一起显示（它确实阻止了在不使用 setFileSelectionMode() 方法的情况下选择文件）。

**问题**

我错过了什么吗？如果没有，有没有人遇到过这种情况？

**我的理解/假设：**

1.  当您将 javax.swing.filechooser.FileFilter 对象传递给 JFileChooser 的`setFileFilter()`方法时，就会发生奇迹。
2.  似乎我的带有 setFileFilter() 的 JFileChooser 的行为就像它使用`setSelectionMode( JFileChooser.DIRECTORIES_ONLY );`

**代码**

```
import java.io.File;
import javax.swing.filechooser.FileFilter;

// inside a method that's adding this to a JPanel

_fileChooser = new JFileChooser( "." );
_fileChooser.setControlButtonsAreShown( false );
_fileChooser.setFileFilter( new FolderFilter() );
// _fileChooser.setFileSelectionMode( JFileChooser.DIRECTORIES_ONLY );
_panelMidLeft.add( _fileChooser );

// an inner class, defined somewhere else in the class

private class FolderFilter extends javax.swing.filechooser.FileFilter {
  @Override
  public boolean accept( File file ) {
    return file.isDirectory();
  }

  @Override
  public String getDescription() {
    return "We only take directories";
  }
} 
```

谢谢！

亚历克斯

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-07T16:01:24.583

你的代码对我有用。我的[SSCCE](http://sscce.org)：

```
import java.io.File;
import javax.swing.JFileChooser;

public class ShowDirectoriesOnly {
   public static void main(String[] args) {
      JFileChooser fileChooser = new JFileChooser( "." );
      fileChooser.setControlButtonsAreShown( false );
      fileChooser.setFileFilter( new FolderFilter() );
      fileChooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
      fileChooser.showOpenDialog(null);
   }

   private static class FolderFilter extends javax.swing.filechooser.FileFilter {
      @Override
      public boolean accept( File file ) {
        return file.isDirectory();
      }

      @Override
      public String getDescription() {
        return "We only take directories";
      }
    }
} 
```

如果您仍然遇到问题，最好创建自己的[SSCCE](http://sscce.org)来展示您的问题。

*编辑*

使用 JDK1.7 在 OS X 下的屏幕截图

![OS X 屏幕截图](../Images/f232275abf8d7efd6356853b41f001a3.png)

# java - 设置套接字接收超时

> ID：10055913
> 
> 赞同：12
> 
> 时间：2012-04-07T15:54:54.730
> 
> 标签：java, sockets, timeout, udp

我想向服务器发送数据，然后等待一分钟的答案，然后关闭套接字。

怎么做？

```
 DatagramPacket sendpack = new ......;
 socket.send(pack);
 DatagramPacket recievepack = new .....;
 //wait 1 minute{
 socket.recieve(buf);
 //wait 1 minute}
 socket.close(); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-07T17:53:17.633

你可以试试这个。根据您的场景需要更改套接字的超时时间！此代码将发送一条消息，然后等待接收消息，直到达到超时！

```
DatagramSocket s;

    try {
        s = new DatagramSocket();
        byte[] buf = new byte[1000];
        DatagramPacket dp = new DatagramPacket(buf, buf.length);
        InetAddress hostAddress = InetAddress.getByName("localhost");

        String outString = "Say hi";        // message to send
        buf = outString.getBytes();

        DatagramPacket out = new DatagramPacket(buf, buf.length, hostAddress, 9999);
        s.send(out);        // send to the server

        s.setSoTimeout(1000);   // set the timeout in millisecounds.

        while(true){        // recieve data until timeout
            try {
                s.receive(dp);
                String rcvd = "rcvd from " + dp.getAddress() + ", " + dp.getPort() + ": "+ new String(dp.getData(), 0, dp.getLength());
                System.out.println(rcvd);
            }
            catch (SocketTimeoutException e) {
                // timeout exception.
                System.out.println("Timeout reached!!! " + e);
                s.close();
            }
        }

    } catch (SocketException e1) {
        // TODO Auto-generated catch block
        //e1.printStackTrace();
        System.out.println("Socket closed " + e1);

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-07T17:55:31.800

如果您使用的是[DatagramSocket](http://docs.oracle.com/javase/8/docs/api/java/net/DatagramSocket.html)，或者您可以使用[Socket ，](http://docs.oracle.com/javase/8/docs/api/java/net/Socket.html)

```
socket.setSoTimeout(1000); 
//the value is in milliseconds 
```

对于任何细节，您应该查看[DatagramSocket javadoc](http://docs.oracle.com/javase/8/docs/api/java/net/DatagramSocket.html#setSoTimeout-int-)或[Socket javadoc](http://docs.oracle.com/javase/8/docs/api/java/net/Socket.html#setSoTimeout-int-)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-28T18:34:37.860

为了澄清 EJP 的评论，这就是他所说的“丢失`break`”导致 SocketException 的意思。

```
String group = "224.0.0.0";
int port = 5000;

MulticastSocket recvSock = new MulticastSocket(port);
recvSock.joinGroup(InetAddress.getByName(group));
recvSock.setSoTimeout(1000);

while(true) {
    try {
        recvSock.receive(in);               
    } catch (SocketTimeoutException e) {
        break;  // Closing here would cause a SocketException
    }
}

// Move the close() outside the try catch bloock
recvSock.leaveGroup(InetAddress.getByName(group));
recvSock.close(); 
```

# django - 为什么 Aptana 3 (OS X) 在导入的项目中找不到 django 设置模块？

> ID：10055916
> 
> 赞同：4
> 
> 时间：2012-04-07T15:56:11.263
> 
> 标签：django, macos, aptana

我刚开始在家中从事基于 aptana 的 django 项目。该项目在我工作中的基于 Windows 的机器上运行良好，部分在我家里的 Mac 上运行。

当我跑

> python manage.py 运行服务器

从命令行，我的 django 项目工作正常。但是，当我尝试通过 aptana 调试/运行界面运行它时（设置方式与我在工作中设置配置的方式相同），我收到以下消息：

> pydev 调试器：启动 Traceback（最近一次调用最后一次）：文件“/Applications/Aptana Studio 3/plugins/org.python.pydev.debug_2.4.0.2012020116/pysrc/pydevd.py”，第 1307 行，在 debugger.run（ setup['file'], None, None) 运行 pydev_imports.execfile( file, globals, locals) #执行脚本文件“/Users/michael/Documents/Aptana Studio 3 Workspace/video-encoder-interface/src/VideoEncoderInterface/manage.py”，第14行，在execute_manager(settings)文件“/**库**/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/init**.py”，第 459 行，在 execute_manager utility.execute() 文件中“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/init **.py** ”，第 382 行，在执行 self.fetch_command(subcommand).run_from_argv(self.argv) 文件“ **/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/init** .py”，第 261 行，在 fetch_command klass = load_command_class(app_name, subcommand) 文件“ **/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/init**.py”，第 69 行，在 load_command_class 模块 = import_module('%s.management.commands.%s' % (app_name, name)) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2\. 7/site-packages/django/utils/importlib.py”，第 35 行，在 import_module **导入中**（名称）文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/commands/runserver.py”，第 8 行，来自 django.core。 servers.basehttp 导入 AdminMediaHandler，运行，WSGIServerException，get_internal_wsgi_application 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/servers/basehttp.py”，第 26 行，从 django.views 导入静态文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/views/static.py”，第 95 行，在 template_translatable = ugettext_noop(u “%（目录）s的索引”）文件“ **/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/utils/translation/init**.py”，第 75 行，在 gettext_noop 返回 _trans.gettext_noop(message) 文件“ **/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/utils/translation/init** .py "，第 48 行，**getattr** if settings.USE_I18N: File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/utils/functional.py"，第 184 行，在内部 self._setup() 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/conf/init **.py** ”，第 42 行，在 _setup self._wrapped = Settings (settings_module) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/conf/init .py”，第 95 行，**在****init** **raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e)) ImportError: Could not import settings 'video-encoder-interface.settings' (它在 sys.path 上吗？）：没有名为 video-encoder-interface.settings 的模块****

 ****我注意到的一件事可能是错误的（我也不知道如何修复它），最后一行是指 video-encoder-interface.settings，我认为它应该在其中寻找 VideoEncoderInterface，因为这就是名称包的（video-encoder-interface只是aptana项目目录的目录名）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T16:09:38.247

可能您的 PYTHONPATH 没有在 Eclipse/PyDev 中正确设置...或者设置模块不正确（右键单击项目 > 属性 > pydev - django：django 设置模块应该在那里正确设置）。

如果您仍然无法找到它，请将 pydev 包资源管理器的屏幕截图与您的项目配置一起发布，并发布您的 manage.py 文件的内容。****

# ruby-on-rails - 如何在 Rails 中使用 Acts_As_Taggable_On 创建“删除标签”链接？

> ID：10055918
> 
> 赞同：0
> 
> 时间：2012-04-07T15:56:24.877
> 
> 标签：ruby-on-rails, ruby, associations, tagging, acts-as-taggable-on

我正在使用 Act_As_Taggable_On gem 创建一个简单的项目标记应用程序。

添加项目并为每个项目添加标签（在我的情况下为“类型”/“类型列表”）效果很好。我被困的地方是如何使用 Act_As_Taggable_On 删除单个标签。我想要的是能够单击每个标签旁边的“x”文本链接（请参阅链接）以从该项目 type_list 中删除标签。

我搜索了文档并找到了一种方法：

```
project.type_list.remove("your tag") 
```

但我需要帮助的是如何在特定标签上调用 remove 方法，特别是因为整个事情都是用 .each do 迭代的

我的控制器和模型代码非常简单和标准 - 基于 Act_As_Taggable_On 文档。这是我用于生成上述布局的视图代码：

```
<h1><%= @title %></h1>
<div class="column-left">
  <% @projects.each do |project| %>
    <div class="p_wrapper">

      <table>
        <tr>
          <td><div class="project p_name"><%= project.name %></div></td>
          <td><div class="p_link"><%= link_to 'Edit', edit_project_path(project) %></div></td>
          <td><div class="p_link"><%= link_to 'Nuke', project, :confirm => 'Are you sure?', :method => :delete %></div></td>
        </tr>
      </table>

      <table>
        <tr>
          <td>
              <% project.type_list.each do |tag|%>
                <div class="p_tag">
                <%= tag %> 
                <%= link_to "x", # %> <!-- THIS IS THE PART I'M STUCK ON -->
              </div> 
              <% end %>
            </td>
        </tr>
      </table>

      <table>
        <tr>
            <td>
              <%= form_for(project) do |f| %>
              <%= f.text_field :inject_tags %>  
              <%= f.submit "Add Tag" %>
              <% end %>
            </td>
        </tr>
      </table>

    </div>

  <% end %>

  <br />

  <%= link_to 'Add new project', new_project_path %>
</div> 
```

谁能指出我正确的方向？我是否正确地实现了这一点，以便能够真正删除所描述的标签？

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:06:53.017

我只需向您的项目控制器添加一个新方法，如下所示：

```
def remove_tag
  Project.find(params[:id]).type_list.remove(params[:tag])
end 
```

在您的路线文件中

```
resources :projects do
  member do
    put 'remove_tag', :as => :remove_tag
  end
end 
```

在你看来

```
<%= link_to 'x', remove_tag_project_path(project), :tag => tag, :method => :put %> 
```

当然你应该添加一些卫生，但它应该这样工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T05:17:16.077

基于@Vapire 的建议代码 - 终于找到了一个可行的解决方案。只是对视图、路由和控制器进行了一些小的编辑。如果您在这里看到任何不可靠的东西，请告诉我 - 仍在尝试很好地掌握 Ruby/Rails，因此欢迎所有建议/重构想法。

更新后的测试站点位于 project-list.heroku.com。

更新了**项目控制器**以查找当前项目，删除通过路由从索引视图传递的 :tag：

```
def remove_tag
  @project = Project.find(params[:id])
  @project.type_list.remove(params[:tag])
  @project.save
  redirect_to projects_path, :flash => { :success => "Updated - tag nuked."}
end 
```

更新路线：

```
resources :projects
match 'projects/:id/remove_tag/:tag' => 'projects#remove_tag' 
```

更新了 link_to 'x' 代码以通过上面更新的路由传递 :tag 参数：

```
<% project.type_list.each do |tag|%>
  <div class="p_tag">
    <%= tag %> 
    <%= link_to 'x', {:action => "remove_tag", :id => project.id, :tag => tag, 
    :controller => "projects"} %>
  </div> 
<% end %> 
```

这对我来说显然是新的领域，所以如果您有不同/更好的方法来处理这个问题，请告诉我！另外，感谢您的帮助@Vapire！

# jquery - jQuery + JSON 如何从变量中定义键

> ID：10055919
> 
> 赞同：16
> 
> 时间：2012-04-07T15:56:29.547
> 
> 标签：jquery, string, json, variables

我有以下代码

```
$.post(
    "/factory/set",{
         key : value
    },
    function(response) {

        });
    }, "json"
); 
```

在哪里

```
key = "foo"
value = "bar" 
```

但是服务器总是得到“key”和“bar”，有没有办法将key设置为变量，而不是字符串？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-07T16:04:53.340

创建一个对象：

```
var data = {}; 
```

然后设置属性：

```
data[key] = value; 
```

然后在您的调用中使用该对象`$.post()`：

```
$.post(
    "/factory/set",data,
    function(response) {

    }, "json"
); 
```

# css - 为什么我不能覆盖现有的伪元素？

> ID：10055921
> 
> 赞同：9
> 
> 时间：2012-04-07T15:56:34.987
> 
> 标签：css, pseudo-element, css-specificity

我有两个相互遵循的 CSS 规则：

```
.some td:first-child:before {
    content:url('path/to/image.png')" " ;
}
.some .other:before {
    content:url('path/to/image2.png')" " ;
} 
```

这是 HTML 片段：

```
<table class="some">
<tr>
    <td class="other">Text goes here</td>
    <td>Some more text.</td>
</tr>
</table> 
```

它们都应该应用于同一个表格单元格。没有类的那个是一个后备。但出于某种原因，它总是选择第一条规则而不是第二条规则。我知道第二个有效，因为如果我在 Firebug 中禁用第一个，它将使用它。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-07T16:44:00.857

好的，直截了当地说，经过[一番](http://www.w3.org/TR/CSS2/cascade.html#specificity) [阅读](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)，这就是特异性：

*   编号：**100**
*   班级：**10**
*   伪*类*：**10**
*   伪*元素*：**1**
*   元素：**1**

所以这使得第一个选择器的特异性为 22，而第二个只有 21。显然`first-child`似乎是一个伪类而不是伪元素。

最后，添加一个`td`before`.other`可以解决问题，因为那时文档顺序优先。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T16:11:46.737

第一个规则比第二个规则更具体，所以在两个选择器都有效的情况下，更具体的一个会覆盖另一个。

阅读[这篇](http://www.htmldog.com/guides/cssadvanced/specificity/)文章，了解我们如何克服风格冲突的复杂性。简要介绍一下，这是计算特异性的方法。

> ```
> +--------------------+--------------------+-----------------------------------+
> |    Type            |   Specific Value   |  Example                          |
> +--------------------+--------------------+-----------------------------------+
> |  Inline Style      |   1000             | style="color: #f00;"              |
> +--------------------+--------------------+-----------------------------------+
> |  Id                |   100              | #text { color: #f00; }            |
> +--------------------+--------------------+-----------------------------------+
> |  Classes           |   10               | .text { color: #f00; }            |
> +--------------------+--------------------+-----------------------------------+
> |  Pseudo Classes    |   10               | a:hover { color: #f00; }          |
> +--------------------+--------------------+-----------------------------------+
> |  Pseudo Elements   |   10               | a:first-child { color: #f00; }    |
> +--------------------+--------------------+-----------------------------------+
> |  Elements (tag)    |   1                | a { color: #f00; }                |
> +--------------------+--------------------+-----------------------------------+ 
> ```

基本上，类选择器比标签选择器更具体。让我们计算您的特异性

*   第一条规则：31
*   第二条规则：30

所以第一条规则获胜。

您可以增加第二条规则的特异性，例如

```
.some tr td.other:before {
    content:url('path/to/image2.png') ;
} 
```

其计算为 33，以覆盖样式优先规则。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T16:05:56.407

我很确定这与特异性有关。尝试添加`!important`到第二条规则，看看是否有效。

# function - C中函数指针使用错误

> ID：10055922
> 
> 赞同：0
> 
> 时间：2012-04-07T15:56:44.787
> 
> 标签：function, pointers

```
#include <stdio.h>
#include <string.h>

void func1 (void) { printf( "1\n" ); }
void func0 (void) { printf( "0\n" ); }

typedef struct {
  void (*func0)(void);
  void (*func1)(void);
}mainJT;

static const mainJT coreJT = {
  core_func0,
  core_func1
};

mainJT currJT;

int main()
{
    currJT=coreJT;
    coreJT.core_func0();
    getchar();
    return 0;
} 
```

请帮我修复错误，我确信我犯了一些明显的错误。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:42:26.213

我看到很多错误：例如：初始化结构的正确方法是：/* 将类型点定义为具有整数成员 x、y 的结构 */

```
typedef struct {
   int    x;
   int    y;
} point;

/* Define a variable p of type point, and initialize all its members inline! */
point p = {1,2}; 
```

所以你的代码部分是：

```
mainJT coreJT = {
  core_func0;
  core_func1;
}; 
```

完全错误。

函数 core_func1 core_func0 在哪里声明和定义。我看不到它们。

我想你首先需要通过[c 中的结构](http://en.wikipedia.org/wiki/Struct_%28C_programming_language%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:44:07.640

你的问题不是很清楚，但我知道我能找到什么。

```
typedef struct {
  void (*func0)(void);
  void (*func1)(void);
} mainJT; 
```

在这里，您要声明一个带有函数指针成员`func0`和`func1`. 然后你试图`coreJT`通过初始化列表定义一个变量：

```
static const mainJT coreJT = {
  core_func0,
  core_func1
}; 
```

但这不起作用，因为没有调用函数`core_func0`or `core_func1`！你也试着打电话

> coreJT.core_func0();

这也是不正确的，因为您的结构没有 name 的成员`core_func0`。

* * *

对于可能的解决方案，请尝试重命名您的函数，如下所示：

```
void core_func1 (void) { printf( "1\n" ); }
void core_func0 (void) { printf( "0\n" ); } 
```

并通过调用你的函数指针

> coreJT.func0();

# javascript - “返回错误；” 对于表单提交不起作用

> ID：10055923
> 
> 赞同：0
> 
> 时间：2012-04-07T15:56:52.400
> 
> 标签：javascript, jquery

“返回错误；” 因为表单提交适用于我的其余代码，而不是本节。任何想法为什么？

```
function checkForm() {
    $("select[name*=lic_company]").each(function() {
        if($(this).val() != '') {
            var i1 = $(this).parent("td").next("td").children("select");
            var i2 = i1.parent("td").next("td").children("input");
            var i3 = i2.parent("td").next("td").children("input");
            if(i1.val() == '') {
                i1.parent("td").addClass("formErrorTD");
                i1.addClass("formError");
                alert("You must enter a state for this license");
                return false;
            }
            if(i2.val() == '') {
                i2.parent("td").addClass("formErrorTD");
                i2.addClass("formError");
                alert("You must enter an expiration date for this license");
                return false;
            }
            if(i3.val() == '') {
                i3.parent("td").addClass("formErrorTD");
                i3.addClass("formError");
                alert("You must enter a license number for this license");
                return false;
            }
        }
    });
} 
```

它被调用

```
$("#addAgentForm").submit(checkForm); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T16:00:08.657

您正在`return false;`一个闭包内调用，该闭包是传递给`.each`. 因此，`.each`正在捕获`return false;`. 为了解决这个问题，您需要一个布尔标志来保存表单的状态：

```
function checkForm() {
    var okay = true;

    $("select[name*=lic_company]").each(function() {
    ...
        return okay = false;
    ...
    });

    return okay;
} 
```

一切都会正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:00:07.820

您的`return false`语句在传递给 的匿名函数内`.each()`，因此仅返回该函数的值，而不是对 的整个调用`checkForm()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T16:01:04.673

如果我不得不猜测，那是因为您正在从传递给每次调用的函数中返回，这意味着您真正要做的就是退出每个函数，而您的主要验证函数顺利完成。

# php - 这些步骤足以保护网站吗？

> ID：10055924
> 
> 赞同：0
> 
> 时间：2012-04-07T15:56:53.583
> 
> 标签：php, security

我即将推出我的网站，安全性很重要，所以我想概述一下我为保护网站所做的工作。如果我错了，如果我需要别的东西，请纠正我：

*   为了连接到我们的服务器，我通过 VPN 启用了双因素身份验证。
*   该网站使用 SSL
*   数据是静态加密的。
*   我有一个日志监控工具
*   当用户将数据输入数据库时​​，我使用 mysql_real_escape_string(); 当我显示用户数据时，我使用 htmlspecialchars();
*   密码使用 md5 加密存储。

    ```
     Sample insert query: 

         // I use these on every page
         $username = removeBadChars($_SESSION["username"]);
         $password = removeBadChars($_SESSION["password"]);

         //Sanitized data
         $_SESSION["username"] = $username;
         $_SESSION["password"] = $password;

         //Query to display 
         $sql = "select `User_name`, `User_id`, `User_kind` from `clientele` 
         where `username` =   '$username' AND `password`='$password'";
         $query = mysql_query($sql) or die ("Error: ".mysql_error());

          while ($row = mysql_fetch_array($query)){

      $name = htmlspecialchars($row['User_name']);
      $uid = htmlspecialchars($row['User_id']);
      $uis = htmlspecialchars($row['User_kind']);

          }
          mysql_free_result($query);

          //Insert Query

          $title = mysql_real_escape_string($_POST['title']);
          $comment = mysql_real_escape_string($_POST['comment']);

          $insert = "INSERT INTO table (Title, Comment)
          VALUES ('".$title."', '".$comment."')";

           $query = mysql_query($insert) or die ("Error: ".mysql_error()); 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:12:41.530

1.  使用更强的哈希函数（例如`sha256`）
2.  在对密码进行散列之前将盐（每个用户的随机值）附加到密码
3.  请改用[准备好的语句](http://php.net/manual/en/mysqli.prepare.php)( `MySQLi`)，以避免在将数据输入数据库之前忘记转义数据的可能性
4.  ~~不要**将**用户信息存储在 $_SESSION 中。相反，存储一个对外界毫无意义的会话变量，每次有人登录时都会更改，并链接到用户帐户。~~- 这仅适用于 cookie。*喝一些咖啡因*
5.  小心将来自用户的数据放入属性值（例如`<span title="FULLNAME">`）中，因为需要额外的转义（引号、空格，如果不使用引号等）

***注意：**此列表并不详尽。它只列出了我注意到您提供的简短片段有问题的事情。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-07T16:17:47.703

为了安全起见，您可能应该使用[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)或[`mysqli_`函数](http://www.php.net/manual/en/book.mysqli.php)并跳过那个老式的`mysql_`垃圾，它不再被开发。以下是如何使用 PDO：

```
$pdo = new PDO('mysql:host=localhost;dbname=whatever', $username, $password);
$statement = $pdo->prepare('select `User_name`, `User_id`, `User_kind` from `users` 
 where `username` = :user AND `password`= AES_ENCRYPT(:pass,:user)');
$statement->bindParam(':user', $_GET['user']);
$statement->bindParam(':pass', $_GET['pass']);
$results = $statement->execute();
var_dump($results->fetchAll()); 
```

参数更安全，因为当您[`bindParam`](http://www.php.net/manual/en/pdostatement.bindparam.php)自动验证时。其他人提到使用`md5`散列，但是有很多[数据库可以“解码”](http://md5.noisette.ch/)它们以及彩虹表攻击，所以它们不是很安全。在这里，我使用 mysql`AES_ENCRYPT`作为密码，并使用用户名作为密钥用于演示目的，您可能希望生成自己的密钥并将其存储在某个地方，因为您可以`AES_DECRYPT`使用它......有一些库可以更好地加密您应该检查一下，例如[scrypt](http://www.tarsnap.com/scrypt.html)。

无论你做什么，不要使用[`addslashes()`它是不安全的](http://shiflett.org/blog/2006/jan/addslashes-versus-mysql-real-escape-string)

最重要的是，您应该考虑以其他方式保护服务器的操作系统和 Apache，例如不宣传版本号和以自己的用户身份运行 apache 等。查看[Open Web Security Project 网站](https://www.owasp.org)以获取大量安全信息。

# android - 无法在应用程序中使用 png 资源覆盖库的 xml 资源？

> ID：10055926
> 
> 赞同：20
> 
> 时间：2012-04-07T15:57:03.910
> 
> 标签：android, resources, library-project

我有一个 Android 库`MyLib`，其中包含我的应用程序所需的一切（针对 Android 2.2）。这个库有一个 XML 资源：

```
drawable/main_background.xml 
```

在我的应用程序`MyApp`项目中，我引用了`MyLib`. 在这里，我想覆盖特定资源（即品牌）。所以我添加了一个背景图片`MyApp`：

```
drawable/main_background.png 
```

Eclipse 不断给我这个错误：

```
[com.mycom.mylib.myapp] res\drawable\main_background.xml:0: error: Resource entry main_background is already defined.
[com.mycom.mylib.myapp] res\drawable\main_background.png:0: Originally defined here. 
```

**如何覆盖库项目中的资源？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T07:52:39.693

您不能简单地使用 Android SDK 中具有不同扩展名的文件覆盖资源 ID（它是您要覆盖的资源 ID，而不是实际文件）。但是，您可以通过放入具有相同名称 ( `main_background.xml`) 的项目 xml 文件并以正确的方式填充它以显示您`main_background.png`需要提前重命名的新文件 ( ) 来实现这一点。您需要的所有语法都在这里描述：

[http://developer.android.com/guide/topics/resources/drawable-resource.html](http://developer.android.com/guide/topics/resources/drawable-resource.html)

，在你的情况下，它可能很简单（假设你把它放在你的非图书馆项目中`main_background.xml`，并且你有你的新 png 作为`main_background_new.png`）：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/main_background_new" /> 
```

使用上述解决方案，您可以`@drawable/main_background`从您的项目中引用，它应该使用该项目中包含的文件，而不是库文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T20:58:42.643

```
[com.mycom.mylib.myapp] res\drawable\main_background.xml:0: error: Resource entry main_background is already defined.
[com.mycom.mylib.myapp] res\drawable\main_background.png:0: Originally defined here. 
```

我不相信即使扩展名不同，您也不能拥有相同的文件名。尝试将 png 命名为其他名称。

现在，我没有使用过覆盖，所以这看起来很奇怪，因为您希望这就是您覆盖资产的方式。但是我认为您的库中的两个资产名称相同。而且在您的项目中，拥有同名的资产可能是可以的。但是，我会检查是否可以拥有不同的类型。XML 与 png 不同，如果您从代码访问资产，您可能会遇到类型错误。

让我澄清一下上述观点。我了解库项目可以具有与您的应用程序中的项目具有相同资源 ID 的项目。

然而，上面的错误表明 main_background.png 和 main_background.xml 都在同一个项目（[com.mycom.mylib.myapp]）中，我认为这是不正确的。

**进一步阅读**

此页面描述了各种类型的项目，包括库项目[http://developer.android.com/tools/projects/index.html](http://developer.android.com/tools/projects/index.html)

现在我不知道我从哪里得到印象，但再次查看它根本没有说明您可以通过使用相同的资源名称覆盖资源的任何地方。天知道为什么我认为这是一个功能。

所以不，据我所知，同样的规则适用，即使跨图书馆项目，资源也必须唯一命名，否则生成的资源 ID 将发生冲突。（你得到的错误）

解释的是如何管理资源冲突。

> 资源冲突 由于工具将库项目的资源与依赖应用程序项目的资源合并，因此可能在两个项目中都定义了给定的资源 ID。在这种情况下，工具从应用程序或具有最高优先级的库中选择资源，并丢弃其他资源。在开发应用程序时，请注意公共资源 ID 可能会在多个项目中定义并且将被合并，应用程序或最高优先级库中的资源优先。

系统将使用优先级最高的资源，丢弃其他所有资源。奇怪的是，您会认为不会发生编译错误，因为编译器应该丢弃资源。这让我相信原始海报在**同一个**项目中具有类似命名的资产，而不是跨 lib 和项目。

我还没有在任何地方读到这实际上是一个预期的功能。有任何链接说别的吗？（评论他们）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T20:46:47.863

所以这个问题的一个“解决方案”，我不认为这是一个答案：

在相关库中定义一个 XML 文档（我们将其称为 bunny.xml），并让它引用另一个具有相似名称的 xml (bunny_drawn.xml) 并显示实际内容。

然后，在目标项目中，用另一个覆盖 bunny.xml 并使用它来引用具有不同名称的图像 - bunny_image.png

然而，这并不能解决问题，首先因为我们在技术上并没有用 xml 覆盖 png（尽管效果有点接近）。其次，因为覆盖资源的关键特性之一是它们被覆盖，即它们没有被编译到 APK 中：

> 这些工具确保应用程序中声明的资源获得优先权，并且库项目中的资源不会编译到应用程序 .apk 中

但是 bunny_drawn.xml 仍然会被编译进去！我们可以克服第二点，不仅要在目标 APP 中定义要替换的图像，还要用空白 xml 替换旧的目标 bunny_drawn.xml。（或者，正如 Fenix 指出的那样，在第一种情况下，您可以在 bunny.xml 中包含 bunny_drawn.xml 的内容 - 事实仍然是资源 ID 无法替换......）

所以我的最终结论是，这需要作为开发者工具中的一个错误提交。

# mediawiki - MediaWiki - 表格未显示

> ID：10055927
> 
> 赞同：2
> 
> 时间：2012-04-07T15:57:04.147
> 
> 标签：mediawiki

使用 MediaWiki 1.18、phpMyAdmin 2.10.1、mysql 5.0.67、语义 MediaWiki 1.7.1。

我正在尝试在我的 mediawiki 中创建表格，但它们只是显示为文本。我认为这是基本代码的一部分，但也许我必须安装一个插件？我试过了：

```
{| class="prettytable"
|-
|
fdasfda

|
afda

|-
|
fdafda

|
fdafdsa

|} 
```

这只是显示为 {| class="prettytable"|-|fdasfda|afda|-|fdafda|fdafdsa|}

知道如何解决这个问题吗？

更新：我刚刚启用了两个 beta 选项：

启用增强的编辑工具栏 启用用于插入链接、表格等的对话框

之后，我可以使用工具栏创建一个表格，该表格在编辑后可见，但尝试复制/粘贴表格的代码仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:08:49.353

我只是用`class="wikitable"`了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:08:49.687

您的换行可能是您的问题。我过去有过这样的问题。尝试..

```
{| class="prettytable"
|-
| fdasfda
| afda
|-
| fdafda
| fdafdsa
|} 
```

此外，您的`class="prettytable"`css 可能会损坏.. 尝试没有它的表。

# caching - OCaml中多参数函数的弱记忆结果

> ID：10055930
> 
> 赞同：7
> 
> 时间：2012-04-07T15:57:25.237
> 
> 标签：caching, ocaml, weak-references, memoization

我正在寻找一种方法来记忆 OCaml 函数的结果，该函数`f`需要两个参数（通常是更多参数）。此外（这是困难的部分），如果两个参数的任何一个值被垃圾收集，我希望这个过程的映射完全忘记结果。

对于只接受一个参数的函数，这可以通过`Weak`模块及其`Make`函子以一种直接的方式完成。为了将其推广到可以记忆更高数量的函数的东西，一个天真的解决方案是创建一个从值元组到结果值的弱映射。但这对于垃圾回收将无法正常工作，因为值的元组仅存在于 memoization 函数的范围内，而不存在于调用`f`. 事实上，弱引用将指向元组，它将在记忆化后立即被垃圾收集（在最坏的情况下）。

有没有办法在不重新实现的情况下做到这一点`Weak.Make`？

Hash-consing 与我的要求是正交的，事实上，对于我的价值观来说并不是很理想。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T17:00:00.600

一种想法是执行您自己的垃圾收集。

为简单起见，我们假设所有参数都具有相同的类型`k`。

除了包含以 by 为键的记忆结果的主弱表之外`k * k`，创建一个包含单个参数类型的辅助弱表`k`。这个想法是偶尔扫描主表并删除不再需要的绑定。这是通过查找辅助表中的参数来完成的；然后，如果其中任何一个消失了，您就从主表中删除绑定。

（免责声明：我没有对此进行测试；它可能不起作用或可能有更好的解决方案）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T22:19:59.483

您可以使用树结构来代替元组索引。您将有一个由第一个函数参数索引的弱表，其条目是辅助弱表。辅助表将由第二个函数参数索引并包含记忆结果。一旦任何一个函数参数被 GCed，这个结构就会忘记记忆的函数结果。但是，只要第一个函数参数有效，辅助表本身就会保留。根据您的函数结果的大小和不同的第一个参数的分布，这可能是一个合理的权衡。

我也没有测试过这个。这似乎也很明显。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-16T00:42:48.487

我知道这是一个老问题，但我的同事最近开发了一个增量计算库，称为 Adapton，它可以处理此功能。[你可以在这里](https://bitbucket.org/khooyp/adapton.ocaml)找到代码。您可能想要使用 LazySABidi 函子（其他函子用于基准测试）。您可以在 Applications 文件夹中查看如何使用该库的示例。如果您还有其他问题，请告诉我。

# rdf - RDF 是否缺乏精确描述的含义？

> ID：10055931
> 
> 赞同：1
> 
> 时间：2012-04-07T15:57:26.157
> 
> 标签：rdf

我有一个关于 RDF 中代表语义网的问题的问题。[教程http://videolectures.net/training06_sure_stsw/](http://videolectures.net/training06_sure_stsw/)的演讲者说 RDF 将缺乏精确描述的含义。

我不明白。有人提到 RDF 描述数据就像让我们说，我有一个三元组

```
<http://www.mydomain.com#me> <http://dublincore.com/#title> "Myname" 
```

在这里，我可以取消引用 URI 并从 Dublin Core 获取更多关于我和 title 属性的信息。所以我们已经描述了，不是吗？任何见解都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T00:26:57.823

说它缺乏精确描述的含义是一种误导。就其本身而言，它并没有赋予标准 RDF 模型理论所规定的很多意义。但它非常适合与 RDF 模式 (RDFS) 或 OWL2 一起使用，这两种模式都允许您为您在 RDF 中表示的数据赋予不同级别的含义。

# qt - 在 QGraphicsPixmapItem 的 mousePressEvent() 切换鼠标按钮

> ID：10055933
> 
> 赞同：1
> 
> 时间：2012-04-07T15:57:45.387
> 
> 标签：qt, button, mouseevent, qgraphicsitem

在QGraphicsPixmapItem的mousePressEvent()中切换鼠标左右键有什么简单/优雅的方法吗？我有自己的从 QGraphicsPixmapItem 派生的类，因此我可以实现自己的虚函数版本。但我想不出任何简单的方法来做到这一点。

困难的方法是：

1.  创建我自己的从 QGraphicsSceneMouseEvent 派生的类，该类可以切换按钮并在 mousePressEvent 处使用，它将替换默认接收到的事件。
2.  复制并粘贴原始 mousePressEvent() 中的大部分代码以通过按钮进行更改。

但是这些“解决方案”并没有对我“说话”，而且看起来并不优雅。也许其中之一是优雅的，但我没有足够的 XP 来查看它。有经验的人可以给我一些提示吗？

# ruby-on-rails - Rails 3 缓存 - 可能根据特定模型更改使页面/操作缓存过期？

> ID：10055942
> 
> 赞同：2
> 
> 时间：2012-04-07T15:58:37.763
> 
> 标签：ruby-on-rails, performance, caching

早上好，

一些背景知识可能会有所帮助。我正在创建一个非常简单的应用程序，用作考勤跟踪解决方案——它将坐在健身房的一台正在运行的计算机上，人们可以输入他们的姓名并根据他们所做的锻炼类型单击按钮。

运行该应用程序的人并不过分技术性很强 - 但我想给他们一种方法来更改主页以及“帮助”页面上的基本文本。我创建了一个 Meta 模型，其中包含“帮助文本”“主页文本”等列，它们可以通过 ActiveAdmin 界面进行更新。

我想在主页和帮助页面上进行页面缓存（更重要的是为我自己更复杂的项目学习 Rails 缓存）并且只想在 Meta ->“help_text”属性发生变化时使“帮助”页面过期，但如果任何其他 Meta -> 属性已更改，则使主页过期。

这可能吗？

在这一点上，我的缓存代码非常基本：

```
class MetaSweeper < ActionController::Caching::Sweeper
  observe Meta

  def after_create(meta)
    expire_cache_for(meta)
    puts "[CACHE] Expiring cached pages"
  end

  def after_update(meta)
    expire_cache_for(meta)
    puts "[CACHE] Expiring cached pages"
  end

  def after_destroy(meta)
    expire_cache_for(meta)
    puts "[CACHE] Expiring cached pages"
  end

  private
  def expire_cache_for(meta)
    expire_page(:controller => 'static_pages', :action => 'home')
    expire_page(:controller => 'static_pages', :action => 'help')

    # Expire a fragment
    #expire_fragment('all_available_products')
  end
end 
```

在 application_controller 中：

```
cache_sweeper :meta_sweeper 
```

谢谢！

**编辑 1**

从第一个答案开始，我尝试在“Meta”模型上设置一个虚拟属性，以尝试捕获 help_content 属性是否已更改，以便确定是否应该使 /help 页面过期。

元.rb

```
attr_accessor :help_changed
before_update :set_cache_expiry_checker

private

  def set_cache_expiry_checker
    help_changed = "you bet its changed!"
  end 
```

meta_sweeper.rb

```
def after_update(meta)
  puts "should be doing something here about expiring...."      

  if meta.help_changed
    puts "should expire help page" 
  else
    puts "should NOT expire help page"  
  end 
```

当我运行我的应用程序时，我看到了第一个 puts 的输出，但没有看到第二个。meta.help_changed 似乎为零....即使我在模型上有虚拟属性。如果我在 after_update 的顶部执行“放置 meta.inspect”，我会看到除虚拟属性之外的所有元属性。清扫器中是否发生了仅提取数据库内容的事情？

扫地机内部是否还有其他地方可以设置变量来执行此操作？我试过做一个：

```
expire_help_cache = meta.help_changed 
```

在 meta_sweeper.rb 的最顶部，但是当您不在 after_update 方法之外时，这会引发错误，因为没有“元”变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:14:40.310

Rails provides you with a`foo_changed?` method that tells you if the `foo` attribute has changed and a `changes` method that lists all the changes. By the time your sweeper is called I suspect these will have already been reset.

You could however add a `before_update` callback that would check whether the columns you are interested in are dirty. Set an instance variable based on that and then check the value of the instance variable in your sweeper.

# android - 姜饼没有加载清单文件

> ID：10055944
> 
> 赞同：2
> 
> 时间：2012-04-07T15:58:52.867
> 
> 标签：android, eclipse, android-2.3-gingerbread

我正在从现有源（Gingerbread 下载软键盘）创建一个应用程序，当它加载到 Eclipse 时它只加载空文件夹，除了 gen java 文件之外甚至没有 Java 文件。

它说清单丢失了，但是当我查看 eclipse 之外的 Gingerbread 文件夹时，清单文件以及 eclipse 未加载的大量其他文件都在那里。可能是什么问题？

此外，当我尝试导入时（我已尝试通过 root 和存档），它会给出未找到项目的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T02:24:01.483

您需要做的是进入您从中导入项目的文件夹。从中复制文件，包括 Android Manifest 文件。然后进入在您的工作区中创建的文件夹 eclipse 并将内容粘贴到其中。这将覆盖 eclipse 创建的默认文件夹。回到 eclipse 和 f5 ，你应该看到你的文件是如何了。

# c - C 程序：新手对使用字符串数组的困惑

> ID：10055946
> 
> 赞同：0
> 
> 时间：2012-04-07T15:59:05.143
> 
> 标签：c

我对使用字符串数组感到困惑。我正在尝试在 for 循环中填充 2 个数组。在每个数组中，所有元素都是相同的。

为了节省内存，`array_person_name`我尝试简单地将指针复制到由`person_name`. 因为`array_param`，它存储指针的字符串总是 2 个字符长（例如“bt”）加上空终止字符，在这里我还尝试通过将指向“bt”的指针存储在 中来节省内存`array_param`。

由于数组元素的数量`arraysize`, 是在程序运行时从数据库中下载的，因此我使用 malloc 来分配内存。由于我的操作系统是 64 位（Linux x86-64），我为每个`arraysize`指针分配 8 个字节。虽然没有显示，但我在程序结束时释放了这两个数组。

```
int kk, arraysize;
char person_name[101] = ""; 
char * array_person_name;
char * array_param; 
...
strncpy(person_name, "John Smith", 100);
arraysize = <this value is downloaded from database>;
...
array_person_name = malloc( 8 * arraysize ); /* 8 is for 64b OS */
array_param = malloc( 8 * arraysize ); 
for (kk = 0; kk < arraysize; kk++) {
    array_person_name[kk] = &person_name;
    array_param[kk] = &"bt";
}

/* test results by printing to screen */
printf("Here is array_person_name[0]: %s\n", array_person_name[0]);
printf("here is array_param[0]: %s\n", array_param[0]); 
```

编译器返回警告：`warning: assignment makes integer from pointer without a cast`在 for 循环内的两行。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T16:04:31.427

由于您希望每个项目都`array_person_name`成为`array_param`指向`person_name`/"bt" 的指针，因此您需要`char **`：

```
char **array_person_name;

array_person_name = malloc(arraysize * sizeof(*array_person_name));

for (int i=0; i<arraysize; i++)
    array_person_name[i] = person_name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:04:23.270

您正在将指向数组 person_name 的指针分配给由 array_person_name[kk] 定义的字符。您可能打算将 array_person_name 定义为 char** 类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T16:07:35.263

你不应该假设 8 个字节，因为它是 64 位的。您应该将该部分留给 C 并使用`sizeof()`运算符。

# haskell - 使用 sort Haskell 对对列表进行排序

> ID：10055947
> 
> 赞同：2
> 
> 时间：2012-04-07T15:59:08.363
> 
> 标签：haskell

我有一个函数（频率），它计算列表中每个不同值在该列表中出现的次数。例如，

```
frequency "ababca" 
```

应该返回：

```
[(3, 'a'), (2, 'b'), (1, 'c')]. 
```

这工作正常，但现在我需要使用此函数使用列表列表中的第一个元素对列表进行排序。

```
results   :: [Party ] -> [(Int, Party)]
results  xs = ??? frequency (sort xs) ??? 
```

所需输出的示例：

```
[(1, "Green"), (2, "Red"), (3, "Blue")] 
```

以上不起作用，我不知道我能做什么。

使用常规的“排序”

先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T16:07:03.173

```
import Data.Function (on)
import Data.List (sortBy)

results xs = sortBy (compare `on` fst) (frequency xs)

-- or, if you prefer
results xs = sort (frequency xs) 
```

[`on`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Function.html#v%3aon), [`sortBy`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html#v%3asortBy), [`compare`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v%3acompare),的文档链接[`fst`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v%3afst)。

不同之处在于，它`sort`按每对的第一个元素的升序排序，用对的第二个元素打破平局，而`sortBy (compare `on` fst)`明确地只查看每对的第一个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T16:52:57.797

如果您只能使用`sort`而不能`sortBy`（出于某种原因！），那么您需要确保这些项目的类型是`Ord`. 碰巧的是，所有元组（最大为 15）都有`Ord`实例，前提是元组中的*所有*位置也都有`Ord`实例。

您给出的示例`(1, "Green"), (2, "Red"), (3, "Blue")]`应该可以很好地排序（尽管相反），因为两者`Int` 都有`String`实例`Ord`。

但是，在代码片段中，您还提到了一种`Party`类型，但实际上并未说明它是什么。如果它不仅仅是 String 之类的别名，您可能必须为其定义一个`Ord`实例，以满足元组的内置 Ord 实例。

您可以让 Haskell 为您创建实例，`deriving`在您声明类型时使用

```
 data Party = P1 | P2 | P3 | P4 -- e.g.
     deriving (Eq,Ord) 
```

或自己声明：

```
 instance Ord Party where
     -- you don't care about the ordering of the party values
     compare a b = EQ 
```

但是，正如 dave4420 所说，最好只使用`sortBy`，所以我会这样做，除非你有特定的理由不这样做（即这是一个有限制的课堂作业）。

# jquery - 占位符插件应该可以在 IE8 中使用

> ID：10055954
> 
> 赞同：2
> 
> 时间：2012-04-07T16:00:43.243
> 
> 标签：jquery, input, internet-explorer-8, placeholder

我正在寻找一个很好的占位符插件，它可以在 IE8 中使用并输入密码。我找到了一些，但没有一个能满足我的要求。此外，我需要的占位符文本应该是暗的和斜体的。

任何信息都会对我很有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:59:53.487

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            if ($.browser.msie) {         //this is for only ie condition ( microsoft internet explore )
                $('input[type="text"][placeholder], textarea[placeholder]').each(function () {
                    var obj = $(this);

                    if (obj.attr('placeholder') != '') {
                        obj.addClass('IePlaceHolder');

                        if ($.trim(obj.val()) == '' && obj.attr('type') != 'password') {
                            obj.val(obj.attr('placeholder'));
                        }
                    }
                });

                $('.IePlaceHolder').focus(function () {
                    var obj = $(this);
                    if (obj.val() == obj.attr('placeholder')) {
                        obj.val('');
                    }
                });

                $('.IePlaceHolder').blur(function () {
                    var obj = $(this);
                    if ($.trim(obj.val()) == '') {
                        obj.val(obj.attr('placeholder'));
                    }
                });
            }
        });
    </script>
</head>
<body>
<textarea placeholder="Detail-1" rows="3" cols="3" value=""></textarea><br />
<input type="text" placeholder="UserName" /><br />
<input type="password" placeholder="Password" /><br />
<textarea placeholder="Details-2" rows="3" cols="3"></textarea>​
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:41:37.240

试试这个。

脚本：

```
$(document).ready(function () {
        if ($.browser.msie) {         //this is for only ie condition ( microsoft internet explore )
            $('input[type="text"][placeholder], textarea[placeholder]').each(function () {
                var obj = $(this);

                if (obj.attr('placeholder') != '') {
                    obj.addClass('IePlaceHolder');

                    if ($.trim(obj.val()) == '' && obj.attr('type') != 'password') {
                        obj.val(obj.attr('placeholder'));
                    }
                }
            });

            $('.IePlaceHolder').focus(function () {
                var obj = $(this);
                if (obj.val() == obj.attr('placeholder')) {
                    obj.val('');
                }
            });

            $('.IePlaceHolder').blur(function () {
                var obj = $(this);
                if ($.trim(obj.val()) == '') {
                    obj.val(obj.attr('placeholder'));
                                    }
            });
        }
        // On DOM ready, hide the real password
        $('.real').hide();

        // Show the fake pass (because JS is enabled)
        $('.fake').show();

        // On focus of the fake password field
        $('.fake').focus(function(){
        $(this).hide(); // hide the fake password input text
        $('.real').show().focus(); // and show the real password input password
        });

        // On blur of the real pass
        $('.real').blur(function(){
        if($(this).val() == ""){ // if the value is empty, 
        $(this).hide(); // hide the real password field
        $('.fake').show(); // show the fake password
        }
        // otherwise, a password has been entered,
        // so do nothing (leave the real password showing)
        });

    }); 
```

也把他的形式：

```
<input type="password" name="password" class="field real" id="password"  />
<input type="text" class="field fake" tabindex="1" value="" placeholder="Password" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T13:23:15.647

在你的代码周围挣扎之后，我最终得到了这个：

```
$('input[type="text"][placeholder], textarea[placeholder]').each(function(){
        var o=$(this);
        if(o.attr('placeholder') != '') {
        o.addClass('IePlaceHolder');
           if($.trim(o.val())=='') {
              o.val(o.attr('placeholder')).css('color','#888888');
              o.addClass('IeIsEmpty');
              o.removeClass('focusedon');
           }
        }
    });

    $('.IePlaceHolder').focus(function(){
        var o = $(this);
        if(o.val() == o.attr('placeholder')) {
            o.css('color', '#666666');
            o.addClass('focusedon');
        } /* endIF */
    });

    $('.IePlaceHolder').blur(function (){
        var o = $(this);
        if($.trim(o.val())=='' || $.trim(o.val())==o.attr('placeholder')) {
            o.val(o.attr('placeholder'));
            o.css('color', '#888888');
            if(!o.hasClass('IeIsEmpty')) o.addClass('IeIsEmpty');
            o.removeClass('focusedon');
        }
    });

    $('.IePlaceHolder').on("keyup change paste", function(){
        var o=$(this);
        if($.trim(o.val())!='' && $.trim(o.val())!=o.attr('placeholder')) {
            o.css('color', '#111111');
            o.removeClass('IeIsEmpty');
        }
    })
    .on('keydown', function(){
        var o=$(this);
        if($.trim(o.val())!='' && $.trim(o.val())==o.attr('placeholder')) {
            o.val('');
        }
    })
    .on("click", function(){
        var o=$(this);
        if(o.val() != o.attr('placeholder')) return;
        if(this.setSelectionRange)
            {
                this.focus();
                this.setSelectionRange(0,0);
            }
            else if(this.createTextRange) {
            var r = this.createTextRange();
                r.collapse(true);
                r.moveEnd('character', 0);
                r.moveStart('character', 0);
                r.select();
            }
    }); 
```

# testing - 将“故事”翻译成 MSpec 规范

> ID：10055956
> 
> 赞同：0
> 
> 时间：2012-04-07T16:01:00.133
> 
> 标签：testing, bdd, mspec

我一直在学习 BDD，在尝试了一些框架之后，我决定在我的最新项目中使用 MSpec。

在查看了一些示例后，我不确定如何识别场景和上下文。

以下面的故事为例（取自[Rob Connery 的 Kona 示例](http://wekeroad.com/2009/05/14/kona-3/)）：

```
Removing a shopping cart item
    * All items of same SKU are removed. TotalItems decremented by Quantity
    * When quantity is 0 nothing happens
    * When quantity is negative, items are removed, TotalItems stays at 0 (never negative) 
```

这是相关的规范：

```
[Subject("Cart with items in it")]
public class when_removing_item : with_cart_with_1_item_of_sku1 {
    It should_remove_all_items_with_same_sku;
    It should_not_remove_anything_when_sku_not_in_cart;
    It should_not_remove_more_items_than_are_in_cart_resulting_in_negative_totalitems;
} 
```

现在，如果我的理解是正确的：

*   场景 => 里面有物品的购物车
*   上下文 => 带有 1 件 sku1 的购物车
*   规范 => 删除一个项目
*   断言 => 应该删除所有具有相同 sku 的项目

但是，查看其他示例似乎应该这样声明：

*   场景 => 将商品移至购物车
*   上下文 => 当购物车中有 1 件商品时
*   规范 => 删除一个项目
*   断言 => 应该删除所有具有相同 sku 的项目

测试应该是：

```
[Subject("Removing an item from cart")]
public class when_removing_an_item_from_cart_with_items : with_cart_with_1_item_of_sku1 {
    It should_remove_all_items_with_same_sku;
    // etc.
} 
```

我的理解是正确的，还是没有正确和错误的方法？我的假设是，主题/场景与我们正在测试的整体行为（即从购物车中移除商品）相关，并且每个规范类都在不同的上下文中测试该行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:22:04.447

本，我认为你给出的第二个例子更“正确”。当您考虑上下文（`when`类）时，请确保它包含与场景关联的所有内容。大多数情况下，只有一个“操作”（在您的示例中，删除一个项目），其规范表示在特定上下文中发生该操作后系统应处于的状态。当然可以有不同的先决条件（购物车是空的，购物车有一件物品等），这些形成不同的上下文。

只是为了澄清，删除一个项目不是观察，而是行动。

因此，我认为您可以为概述的功能编写以下规范：

```
[Subject("Removing item from shopping cart")]
public class when_removing_item_from_empty_cart {
  It should_be_empty;
}

[Subject("Removing item from shopping cart")]
public class when_removing_item_from_cart_with_one_item_of_another_SKU {
  It should_still_contain_the_item;
}

[Subject("Removing item from shopping cart")]
public class when_removing_item_from_cart_with_two_items {
  It should_be_empty;
}

// probably more ;-) 
```

使用`SubjectAttribute`来表示功能/场景。您还可以使用`TagsAttribute`添加更多元数据（并可能过滤测试运行）。

我会故意选择不使用基类。根据我的经验，甚至有更好的方法来进行复杂的设置（Fluent API、Machine.Fakes 行为配置）。DRY 在这里并不真正适用：当规范失败时，您希望将属于规范的所有内容都放在您面前，而不是导航类层次结构以寻找`Establish`可能在其他地方徘徊的 s。

此外，您可能会发现[这个示例应用程序](https://github.com/agross/duplicatefinder)很有趣，使用 MSpec 开发和测试。

# apache - 将 httpd.conf 从版本 2.2 升级到 2.4

> ID：10055961
> 
> 赞同：2
> 
> 时间：2012-04-07T16:01:23.207
> 
> 标签：apache, configuration

我有一个问题，我不小心从 Apache 2.2 升级到 2.4，现在需要更改我的 httpd.conf 文件以使用新的 Require 指令，而不是使用旧的 Order 和 Allow 指令。我想我已经做了所有我需要的改变，但是有一个部分我不确定我应该用什么来替换它。这是部分：

```
<FilesMatch "^\.ht">
    Order allow,deny
    Deny from all
    Satisfy All
</FilesMatch> 
```

Order、Deny 和 Satisfy 的组合让我感到困惑，因为我是这方面的新手。完成同样事情的正确 2.4 配置是什么。我试过用谷歌搜索答案并搜索了这个网站，但没有找到任何东西（可能使用了错误的术语——我不知道）。如果那里的一些大师可以提供一些帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T17:42:16.643

这些习惯用法在 Apache 2.4 中发生了变化。[阅读http://httpd.apache.org/docs/trunk/upgrading.html](http://httpd.apache.org/docs/trunk/upgrading.html)
上的“从 2.2 升级到 2.4”

查找这些条目：

```
2.2 configuration:   
Order deny,allow   
Deny from all

2.4 configuration:   
Require all denied 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-03T16:58:09.203

在您的情况下`Satisfy All`不再需要：

**v2.2**

```
# The following lines prevent .htaccess and .htpasswd files from being 
# viewed by Web clients. 
<FilesMatch "^\.ht">
    Order allow,deny
    Deny from all
    Satisfy All
</FilesMatch> 
```

**v2.4：**

```
# The following lines prevent .htaccess and .htpasswd files from being 
# viewed by Web clients. 
<FilesMatch "^\.ht">
    Require all denied
</FilesMatch> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-03T07:55:07.050

我知道这个问题是在 2014 年提出的，但是这个解决方案太好了，不能在这里发布......

在旧的 2.2 Apache 上，我准备迁移：

```
<Location />
  <IfVersion >= 2.4>
    Require all granted
  </IfVersion>
  <IfVersion < 2.4>
    order allow,deny
    allow from all
  </IfVersion>
</Location> 
```

根据 Apache 版本，将使用正确的配置语法。如果您运行 2.2 或 2.4 也没关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-14T18:07:01.087

以下是我在升级后让 Apache 恢复并运行的操作：

1.  使用“etc/apache2”目录中新安装的 apache2.conf 文件。这将清除相当多的错误。新文件内置了新的“Require”语法。

    *   在 apache2.conf 文件中，“默认”目录路径是“var/www”。我的不一样，所以我把头发拉出来，直到我注意到它。
2.  更改“站点可用”目录中的所有 VH 文件，例如 xyzsite.com。**conf**（将“.conf”添加到文件中。与默认文件相同。正如 Henk 指出的那样，您必须更改此文件中的“Require”语法。

httpd.conf 根本没有使用，所以如果你有一个，你最好删除它以避免将来混淆。

希望这可以帮助。

# java - 为什么我不能在clojure中绑定defrecord？

> ID：10055965
> 
> 赞同：3
> 
> 时间：2012-04-07T16:01:53.150
> 
> 标签：java, clojure, interop

我有这样的事情：

```
user> (defrecord vertex [id val]) => user.vertex
user> (def v vertex)              => #'user/v
user> (= v vertex)                => true
user> (type v)                    => java.lang.Class
user> (type vertex)               => java.lang.Class
user> (vertex. 1 2)               => #user.vertex{:id 1, :val 2}
user> (v. 1 2)                    => "Unable to resolve classname v"
user> (new v 1 2)                 => "Unable to resolve classname v" 
```

所以基本上我不能将顶点绑定到另一个名字。尝试将 defrecord 类型传递给函数、let 或其他任何东西也是如此。为什么会这样，我可以做些什么来临时重命名 defrecord？

我猜这是与Java互操作有关的一些技巧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T19:18:50.580

`defrecord`生成一个 Java 类，我认为它实际上被视为 Clojure 中的一种特殊情况，特别是在互操作方面（尽管我并不肯定）。

如果您的目标是能够轻松地传递可以创建顶点的函数，那么解决方案是使用调用构造函数的本地函数，而不是自己进行互操作。

在 Clojure 1.3 中，deftype 和 defrecord 自动生成两个额外的方法：

*   `->{type}`相当于构造函数
*   `map->{type}`将参数映射作为参数

对于上述，`(->vertex 1 2)`工作`(map->vertex {:id 1 :val 2})`，并让你做你所追求的建设。

如果您在传递它时确实需要可用的类，那么您可能可以使用宏来做一些事情，尽管我不确定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T17:13:52.813

据我所知，这是不可能的。

如果您考虑 defrecord 的工作原理；它实际上是字节码生成一个（java）类。当您在一个命名空间中执行 defrecord 并希望在另一个命名空间中使用它时，您可以看到这一点...

```
(ns my-first-namespace)
(defrecord Foo [x y])

(ns my-second-namespace
   (:use my-first-namespace)
   (:import my_first_namespace Foo)) ; still have to import the java class 
                                     ; underlying the defrecord even tho 
                                     ; the defining namespace is use'd (note 
                                     ; hyphen / underscore changes). 
```

不幸的是，在 java 中（实际上在 JVM 中）没有办法将一个类名别名为另一个类名。您可以得到的最接近的方法是将子类化为一个新名称，但这很糟糕。

# php - PHP Yii 关系：电影、电影院和放映时间

> ID：10055974
> 
> 赞同：0
> 
> 时间：2012-04-07T16:02:51.233
> 
> 标签：php, mysql, yii

我正在制作电影和电影院放映时间指南。

我有演出时间表（照片#1），我有时间表（照片#2）

我需要在这样的电影页面中显示带有放映时间的电影院列表

影院名称：Time1 - time2 - time3

大电影院：** 00:18 - 00:20 - 00:22 .... 等

**我的代码不起作用..我可以写什么来在视图文件中显示它**

> 错误：未正确指定活动记录类“电影”中的关系“电影院”：在数据库中找不到外键中给出的连接表“{{showtime}}”。

**电影模型有关系：**

```
'cinemas' => array(self::MANY_MANY, 'Cinema', '{{showtime}}(movie_id, cinema_id)') 
```

**电影模型有关系：**

```
'times' => array(self::MANY_MANY, 'Time', '{{showtime}}(cinema_id, time_id)') 
```

**电影模型应该有命名范围：**

```
public function times_by_movie($movie_id) {
    return $this->with(
        array(
            'times'=>array(
                'condition'=>'`movie_id` = :movie_id',
                'params' => array(':movie_id'=>$movie_id),
                'joinType' => 'INNER JOIN'
            )
        )
    );
} 
```

**电影控制器 > 动作视图**

```
public function actionView($id) {
    $movie = Movie::model()->with(
        array(
            'cinemas'=>array(
                'scopes'=>array(
                    'times_by_movie'=>$id
                )
            )
        )
    )->findByPk($id);
    if (!$movie)
      throw new CHttpException(404, 'Movie not found.');

} 
```

![在此处输入图像描述](../Images/452f9bc9eff8c0b82bc9e7ce4afc6c0a.png) ![在此处输入图像描述](../Images/8b7070b84fd1e9a78184d67ba6a70075.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:12:10.393

你必须为 MANY_MANY 关系制作一个关联表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:21:37.250

所以你有模型`Movie`, `Showtime`, `Time`. 你的`Movie`模型有关系：

```
'cinemas' => array(self::MANY_MANY, 'Cinema', '{{showtime}}(movie_id, cinema_id)') 
```

你的`Cinema`模型有关系：

```
'times' => array(self::MANY_MANY, 'Time', '{{showtime}}(cinema_id, time_id)') 
```

此外，您的`Cinema`模型应该具有命名范围：

```
public function times_by_movie($movie_id) {
    return $this->with(
        array(
            'times'=>array(
                'condition'=>'`movie_id` = :movie_id',
                'params' => array(':movie_id'=>$movie_id),
                'joinType' => 'INNER JOIN'
            )
        )
    );
} 
```

在`MoviesController`->`actionView`你应该有：

```
public function actionView($id) {
    $movie = Movie::model()->with(
        array(
            'cinemas'=>array(
                'scopes'=>array(
                    'times_by_movie'=>$id
                )
            )
        )
    )->findByPk($id);
    if (!$movie)
      throw new CHttpException(404, 'Movie not found.');

} 
```

像这样的东西。不过应该测试一下。

# iphone - 异步 NSURLConnection 性能问题

> ID：10055978
> 
> 赞同：4
> 
> 时间：2012-04-07T16:03:41.567
> 
> 标签：iphone, performance, asynchronous, nsurlconnection

两周来一直在努力解决这个问题。任何帮助将不胜感激。

问题：

我正在使用 NSURLConnection 从 RESTfull Web 服务获取 JSON 数据，要求是我不能延迟加载数据。这是每次登录用户打开应用程序时需要在应用程序的第一个屏幕上处理的一大块数据。我知道这不是一件聪明的事，但我无能为力。缓存正在本地 Sqlite DB 中完成。我们正在使用 Async NSURLConnection，它给我们带来了持续 3-4 秒的性能打击。

我们尝试了 Sync NSURLConnection 并发现 Async NSURLConnection 需要大约 3-4 秒的额外时间来处理相同的请求。但是 Sync NSURLConnection 根本不可靠，超过一半的时间它无法获取完整的 JSON。将 Sync NSURLConnection 与 NSOperation 结合起来也无济于事。

我们尝试在单独的应用程序中进行调用，只是为了观察该特定请求的性能，但仍然得到相同的结果。

因此，目前我们得到的完整请求的平均执行时间约为 6-8 秒。对于您的应用程序的第一个屏幕，我们觉得我非常满意。（如果它不多，请告诉我，这对我来说感觉像是糟糕的用户体验）。

问题：

NSURLConnection 不是执行此类请求的标准方式吗？

除了 NSURLConnection 之外，还有更好更快（可靠）的方法吗？

我可以优化 NSURLConnection 的性能吗？如果是，请指出我正确的方向。

有人试过 CFHTTPStream 吗？如果是，那么它在性能方面是否比 NSURLConenction 更好？

谢谢

* * *

@GoZoner 非常感谢您的回复。我们通过以下三种方式进行了测试

1.  由于它是应用程序的第一个屏幕，因此没有应用程序执行其他任何操作的真实案例，但结果仍然不同，并且 Async 持续丢失 3-4 秒。

2.  我们在一个单独的测试应用程序中进行了原始调用，该应用程序只执行了一个 Web 服务调用，但结果仍然相同。

3.  我们在设备和模拟器上进行了测试。在设备上，正如预期的那样，结果更糟，在 Async NSURLConnection 调用中持续延迟大约 4 秒。

我们也对可靠性问题感到惊讶，因为 Sync NSURLConnection 不可靠几乎没有意义。但是在运行了无数次测试之后，我们意识到它实际上是不可靠的，不是因为 NSURLConnection 库中的某些东西，而是因为 3G 或 Wi-fi 连接不可靠，所以呼叫使用中断主要是由于连接（我的假设）。Async NSURLConnection 可以很好地处理这个特殊问题，因为它会一直调用和附加数据，直到接收到的数据完成为止。（有时可能需要 10-12 次尝试附加数据才能完成 JSON）。由于 Sync NSURLConenction 在获取数据方面只进行了一次尝试，因此它在不可靠的移动网络连接中惨遭失败。

@Andrea 感谢您的回复:) 肯定会给 YAJL 一个旋转。但我认为问题更多在于连接而不是解析JSON，我可能错了。YAJL 有可靠的连接处理机制吗？

期待更多的回复，您的建议和意见其实很有价值：）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:31:01.053

尝试使用 ASIHttpRequest 的响应时间可能比 NSURLConnection 快。

# c++ - 使用 boost::proto 构建 s 表达式

> ID：10055979
> 
> 赞同：2
> 
> 时间：2012-04-07T16:03:42.107
> 
> 标签：c++, c++11, s-expression, boost-proto

我正在尝试使用`boost::proto`以下终端构建 s-expression 对象：

```
 typedef proto::terminal< const char* >::type string_term_t;
        typedef proto::terminal< uint32_t >::type uint32_term_t;
        typedef proto::terminal< float >::type float_term_t; 
```

并像这样使用它：

```
void testInit()
{
    auto v = string_term_t("foo") , string_term_t("bla") , (float_term_t(5.6), string_term_t("some"));
    proto::display_expr(v);
} 
```

但是，这对我来说并不编译；

```
Test.cpp:18:33: error: no matching function for call to ‘boost::proto::exprns_::expr<boost::proto::tag::terminal, boost::proto::argsns_::term<const char*>, 0l>::expr(const char [4])’
boost_1_46_0/boost/proto/proto_fwd.hpp:300:16: note: candidates are: boost::proto::exprns_::expr<boost::proto::tag::terminal, boost::proto::argsns_::term<const char*>, 0l>::expr()
boost_1_46_0/boost/proto/proto_fwd.hpp:300:16: note:                 boost::proto::exprns_::expr<boost::proto::tag::terminal, boost::proto::argsns_::term<const char*>, 0l>::expr(const boost::proto::exprns_::expr<boost::proto::tag::terminal, boost::proto::argsns_::term<const char*>, 0l>&)
Test.cpp:18:33: error: unable to deduce ‘auto’ from ‘&lt;expression error>’
Test.cpp:18:73: error: expected ‘)’ before ‘(’ token 
```

我做错了什么？任何建议如何使用 s 表达式获得类似或等效的东西`boost::proto`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T20:51:29.410

该`proto::expr<>`类型没有定义构造函数；因此，你的问题。尝试像这样定义您的类型：

```
typedef proto::literal< const char* > string_term_t;
typedef proto::literal< uint32_t > uint32_term_t;
typedef proto::literal< float > float_term_t; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:30:38.587

我怀疑你使用它的方式有一些错误。我刚刚开始阅读[这篇](http://www.boost.org/doc/libs/1_49_0/doc/html/proto/users_guide.html)文章，所以我完全是新手；但是，以下编译并执行某些操作

```
#include <boost/proto/proto.hpp>

using namespace boost;

typedef proto::terminal< const char* >::type string_term_t;

void testInit()
{
  auto v = string_term_t ({"foo"});
  proto::display_expr(v);
}

int main()
{
  testInit();
  return 0;
} 
```

特别是，我怀疑在 v 的定义中使用“裸”逗号；我不知道它是否有望成为 C++11 的新功能或增强魔法，但我不希望它至少能按原样工作。

**添加**

玩了一会儿，我们最后发现逗号运算符是一个包含在里面的运算符，`( )`而它不是“裸”的。以下工作

```
typedef proto::terminal< const char* >::type string_term_t;
typedef proto::terminal< uint32_t >::type uint32_term_t;
typedef proto::terminal< float >::type float_term_t;

void testInit()
{
  auto v = (string_term_t({"foo"}) , string_term_t({"bla"}) , (float_term_t({5.6}), string_term_t({"some"})));
  proto::display_expr(v);
} 
```

（写给未来的读者；`()`封闭`{ "foo" }`或任何可以删除的东西）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-04T22:21:12.673

结果我在不依赖 boost 的情况下做了一个编译时的 S 表达式。唯一的问题是依赖于 c++11

* * *

## 性别公关

```
#ifndef S_EXPRESSION_H
#define S_EXPRESSION_H

#include <algorithm>

template< typename... Subexprs > class SExpr;

template< typename SExprType, unsigned int Idx > class SExprGetter;

template< typename SExprType >
class SExprGetter< SExprType, 0 >
{
    SExprType* tree;
public:
    typedef typename SExprType::Expr_0_type return_type;

    SExprGetter(SExprType& _v) : tree(& _v) {}
    SExprGetter(SExprGetter&& _o) : tree(_o.tree) {}

    return_type& getValue() { return tree->get_storage(); }

    template< unsigned int Idx>
    SExprGetter< return_type , Idx > getChild()
    {
        return getValue().template getChild<Idx>();
    }

    static constexpr unsigned int childs()
    {
         return return_type::childs();
    }
};

template< typename SExprType >
class SExprGetter< SExprType, 1 >
{
    SExprType* tree;
    typedef typename SExprType::Remainder_type remainder_type_1;
public:
    typedef typename remainder_type_1::Expr_0_type return_type;

    SExprGetter(SExprType& _v) : tree(& _v) {}
    SExprGetter(SExprGetter&& _o) : tree(_o.tree) {}

    return_type& getValue() { return tree->get_remainder_storage().get_storage(); }

    template< unsigned int Idx>
    SExprGetter< return_type , Idx > getChild()
    {
        return getValue().template getChild<Idx>();
    }

    static constexpr unsigned int childs()
    {
         return return_type::childs();
    }
};

template< typename SExprType >
class SExprGetter< SExprType, 2 >
{
    SExprType* tree;
    typedef typename SExprType::Remainder_type remainder_type_1;
    typedef typename remainder_type_1::Remainder_type remainder_type_2;
public:
    typedef typename remainder_type_2::Expr_0_type return_type;

    SExprGetter(SExprType& _v) : tree(& _v) {}
    SExprGetter(SExprGetter&& _o) : tree(_o.tree) {}

    return_type& getValue() { return tree->get_remainder_storage().get_remainder_storage().get_storage(); }

    template< unsigned int Idx>
    SExprGetter< return_type , Idx > getChild()
    {
        return getValue().template getChild<Idx>();
    }

    static constexpr unsigned int childs()
    {
         return return_type::childs();
    }
};

template< typename SExprType >
class SExprGetter< SExprType, 3 >
{
    SExprType* tree;
    typedef typename SExprType::Remainder_type remainder_type_1;
    typedef typename remainder_type_1::Remainder_type remainder_type_2;
    typedef typename remainder_type_2::Remainder_type remainder_type_3;
public:
    typedef typename remainder_type_3::Expr_0_type return_type;

    SExprGetter(SExprType& _v) : tree(& _v) {}
    SExprGetter(SExprGetter&& _o) : tree(_o.tree) {}

    return_type& getValue() { return tree->get_remainder_storage().get_remainder_storage().get_remainder_storage().get_storage(); }

    template< unsigned int Idx>
    SExprGetter< return_type , Idx > getChild()
    {
        return getValue().template getChild<Idx>();
    }

    static constexpr unsigned int childs()
    {
         return return_type::childs();
    }
};

template< typename T0, typename... Subexprs >
class SExpr< T0, Subexprs... >
{
    T0 _t0_storage;
    SExpr< Subexprs... > _remainder_storage;

public:

    typedef T0 Expr_0_type;
    typedef SExpr< Subexprs... > Remainder_type;

    SExpr(T0 _t, Subexprs... sexprs) : _t0_storage(_t), _remainder_storage(sexprs...) {}
    SExpr(T0&& _t, Subexprs && ... sexprs) : _t0_storage(_t), _remainder_storage(sexprs...) {}

    T0& get_storage() { return _t0_storage; }
    Remainder_type& get_remainder_storage() { return _remainder_storage; }

    template< unsigned int Idx>
    SExprGetter< SExpr , Idx > getChild()
    {
        SExprGetter< SExpr, Idx > getter(*this);
        return getter;
    }

    static constexpr unsigned int childs()
    {
         return sizeof...(Subexprs) + 1;
    }
};

template< typename T0>
class SExpr< T0 >
{
    T0 _t0_storage;

    public:

    typedef T0 Expr_0_type;
    typedef void Remainder_type;

    SExpr(T0 _t) : _t0_storage(_t) {}
    SExpr(T0&& _t) : _t0_storage(_t) {}

    T0& get_storage() { return _t0_storage; }

    static constexpr unsigned int childs()
    {
         return 1;
    }

    template< unsigned int Idx>
    SExprGetter< SExpr , Idx > getChild()
    {
        SExprGetter< SExpr, Idx > getter(*this);
        return getter;
    }
};

template <typename... Exprs>
SExpr<Exprs...> _S_expr(Exprs... exprs) {
    return
    {
        exprs...
    };
};

#endif  /* S_EXPRESSION_H */ 
```

* * *

## 测试.cpp

```
#include <iostream>
#include "sexpr.h"
#include <string>

using namespace std;

int main()
{
    auto s_expr_1 = _S_expr(3);
    auto s_expr_2 = _S_expr(3, std::string("foo"));
    auto s_expr_3 = _S_expr(3, _S_expr(3, "bar"), std::string("foo"));

    auto ff_1 = s_expr_1.getChild<0>().getValue();
    cout << " ff_1: " << ff_1 << endl;

    auto ff_2 = s_expr_2.getChild<1>().getValue();
    cout << " ff_2: " << ff_2 << endl;

    auto ff_3 = s_expr_3.getChild<1>().getChild<1>().getValue();
    cout << " ff_3: " << ff_3 << endl;

    cout << " s expr 3 has " << s_expr_3.childs() << " and the first leaf has " << s_expr_3.getChild< s_expr_3.childs() - 2 >().childs() << endl;
}; 
```

# haskell - 更新基地有多安全？

> ID：10055986
> 
> 赞同：12
> 
> 时间：2012-04-07T16:04:05.337
> 
> 标签：haskell, cabal

在 ubuntu 上，我目前安装了 haskell-platform 2011.2.0.1.2，并且我目前正在编写一些代码，如果有 `Control.Concurrent.Chan`一个`Eq`. 不幸的是， `base-4.3.1.0`我安装的 in 不是，而是 in `base-4.4.0.0` `Chan`的一个实例`Eq`。

是否可以通过使用沙盒`cabal-dev`或任何其他方法来更新基础，以不会破坏太多软件包的方式？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-07T16:08:11.427

不，你永远不应该升级`base`。它是[引导包](http://hackage.haskell.org/trac/ghc/wiki/Commentary/Libraries)之一——GHC 本身需要构建和附带的包——升级它们将导致非常糟糕的事情™。（这里是[引导包的完整列表](http://hackage.haskell.org/trac/ghc/browser/packages)；列中带有 a`-`的所有内容`tag`都是一个。不要升级这些！）

事实上，cabal-install 的`cabal upgrade`功能被删除正是因为它有升级引导包的讨厌趋势。

它不仅是一个引导包，而且作为核心功能，它本质上与特定的 GHC 版本相关联。您最好的选择是在本地目录中安装相应的较新版本的 GHC。

# java - 使用边界框进行慢速碰撞检测

> ID：10055987
> 
> 赞同：0
> 
> 时间：2012-04-07T16:04:17.567
> 
> 标签：java, android

我有一个小图书馆，我想用它来创建游戏。首先，我尝试实现像素完美碰撞检测，但并不顺利，所以我决定使用简单的边界框碰撞检测。它工作正常，但在对象数量超过 20 个左右后，它开始变慢。这是我的代码：（循环运行，每秒 25 次）

```
for (int i=0;i<sc.collGr.size();i++){
    CollisionGroup gr=sc.collGr.get(i);
    Collidable[] cc=gr.getCollidables();
    for (int l=0;l<cc.length;l++){
        for (int w=l+1;w<cc.length;w++){
            if (BorderBox.areColliding(cc[l].getBorderBox(), cc[w].getBorderBox()){
                addEventToHandler(sc.collGr.get(i),cc[l],cc[w]);
            }
        }
   }
} 
```

BorderBox 类的一部分：

```
public class BorderBox {
int top;
int down;
int left;
int right;

/**
 * Creates new BorderBox object
 * Arguments: (top, down, left, right);
 * */
public BorderBox(int topy,int downy, int leftx,int rightx){
    top=topy;
    down=downy;
    left=leftx;
    right=rightx;
}

/**
 * Checks if two provided BorderBoxes are colliding.
 * */
public static boolean areColliding(BorderBox a,BorderBox b){
    if (b.left<=a.right && b.right>=a.left && b.down>=a.top && b.top<=a.down){
        return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:02:28.363

以这种方式检查是一项`O(n^2)`操作。也就是说，当您添加一个新对象时，您所做的工作量会呈二次方增长。

我之前缓解这种情况的方法以及其他建议是在两个不同的数组中拥有两种类型的可碰撞对象。一个阵列有少量对象，主要是角色，另一个阵列有敌人。这个想法是你不关心敌人相互碰撞。因此，您只需检查较小数组中的元素是否与较大数组中的元素发生冲突，就可以大大减少您必须做的工作量。

这当然是特定于游戏的，如果一切都必须与其他一切发生冲突，则无法正常工作。虽然，我发现简单的游戏通常并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:31:20.770

划分空间以避免检查相距较远的物体的碰撞。根据你的游戏，一个简单的网格可以做，使用像 kd-Trees 这样更高级的东西。我曾经做过一个有实际房间的游戏，我只是检查了同一个房间中的物体之间的碰撞（假设房间比物体少，或者更新哪个物体在哪个房间很容易）。

# android - Android将图像传递给包含ImageView的ListView

> ID：10055994
> 
> 赞同：0
> 
> 时间：2012-04-07T16:04:56.480
> 
> 标签：android, android-listview, android-imageview

我正在创建一个包含两个 TextView 和一个 ImageView 的 ListView。

我使用 Hashmap 将数据传递给 SimpleAdapter，因此我将图像的 id 转换为字符串，然后在 SimpleAdapter 中将它们转换回整数以设置图像资源。

但是，这似乎不起作用。

相关代码为：

我的活动的创建

```
clubImages = new Integer[] {
    R.drawable.pic1, R.drawable.pic2,
    R.drawable.pic3, R.drawable.pic4,
    R.drawable.pic5                
};

ListView lv = (ListView)findViewById(android.R.id.list);

// create the grid item mapping
String[] from = new String[] {"image"};
int[] to = new int[] {R.id.club_image};

// prepare the list of all records
List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();
for(int i = 0; i < eventTitles.length; i++){
    HashMap<String, String> map = new HashMap<String, String>();

    map.put("image", getString(clubImages[i]));
    fillMaps.add(map);
}

// fill in the grid_item layout
SimpleAdapter adapter = new MySimpleAdapter(this, fillMaps, R.layout.eventview_row, from, to);
lv.setAdapter(adapter); 
```

简单适配器类

```
public class MySimpleAdapter extends SimpleAdapter {

    private List<HashMap<String, String>> results;

    public MySimpleAdapter(Context context, List<HashMap<String, String>> data, int resource, String[] from, int[] to) {
        super(context, data, resource, from, to);
        this.results = data;
    }

    public View getView(int position, View view, ViewGroup parent){

        Typeface type = Typeface.createFromAsset(getAssets(), "fonts/aircruiser.ttf");
        View v = view;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.eventview_row, null);
        }

        mClubImageImageView = (ImageView) v.findViewById(R.id.club_image);        

        int ClubImageHelper = Integer.parseInt(results.get(position).get("image").toString());
        mClubImageImageView.setImageResource(ClubImageHelper);

        return v;
    }
} 
```

我的 logcat 中的错误

```
E/AndroidRuntime(19406): java.lang.NumberFormatException: unable to parse 'res/drawable-hdpi/pic1.png' as integer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:10:31.990

您不能`R.drawable.pic1`作为 a传递`String`，然后将其解析为`Integer`. 这将不起作用，而是`Integer`直接在以下内容中传递初始可绘制 id `HashMap`：

```
List<HashMap<String, Integer>> fillMaps = new ArrayList<HashMap<String, Integer>>();
    for(int i = 0; i < eventTitles.length; i++){
        HashMap<String, Integer> map = new HashMap<String, Integer>();

        map.put("image", clubImages[i]);
        fillMaps.add(map);
    } 
```

我希望我明白你想要什么。您可以创建一个类来保存要传递给适配器的数据，例如：

```
class DataObject {
   int imageId;
   String firstString;
   String secondString; // add here any string that you want to put in your list

   public DataObject(String firstString, String secondString, int imageId) {
       this.imageId = imageId;
       this.firstString = firstString;
       this.secondString = secondString;
   }
} 
```

Then construct the list for the adapter:

```
List<HashMap<String, DataObject>> fillMaps = new ArrayList<HashMap<String, DataObject>>();
    for(int i = 0; i < eventTitles.length; i++){
        HashMap<String, DataObject> map = new HashMap<String, DataObject>();

        map.put("image", new DataObject("First String", "second String", clubImages[i]));
        fillMaps.add(map);
    } 
```

In the `getView()` method retrieve the `DataObject` and use its content data as you please.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T21:14:36.663

[here](http://android-example-code.blogspot.in/p/dynamic-custoized-list-view-in-android.html) is an good example that may help you

![enter image description here](../Images/20c006927f20c04183de954dde52b399.png)

# http - 从 mp3/ogg 中删除确切的时间范围

> ID：10055996
> 
> 赞同：3
> 
> 时间：2012-04-07T16:05:19.570
> 
> 标签：http, audio, mp3, oggvorbis

我在 CDN 上有一堆音频文件。这些是并行的 mp3 和 ogg vorbises。这些文件每个都值得播放大约一小时。我需要从这些文件中提取任意部分：给我一个文件名（我可以选择是使用 mp3 还是 ogg 版本）和两个时间戳，并且我需要恰好在给定时间位置之间的音频。我不想下载整个文件，所以我想到了使用 Range http 标头。

我完全控制了音频文件，所以我以固定比特率对它们进行编码，以便能够估计我应该达到哪些字节。然而，这两种格式都使用帧（或 vorbis 的情况下的页面），必须以原子方式解码。

我编写的程序是用 Perl 编写的。我尝试下载我认为包含给定窗口的文件的一部分，然后使用 Audio::Mad 和 Ogg::Vorbis::Decoder 来解析音频文件片段。但是，两者似乎都无法处理片段，只有在我提供完整文件时才会成功。

所以我的问题是：如何在不下载整个文件的情况下获得音频文件的准确跨度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:08:48.157

回答“从 mp3/ogg 截取确切时间范围” - 您可以查看以下内容是否符合您的需求：

```
ffmpeg -i InFile  -vn -acodec copy -ss 00:00:00 -t 00:01:32 -threads 0 OutFile 
```

其中 ss - 开始时间，t - 持续时间。它确实削减了 - 没有重新压缩。