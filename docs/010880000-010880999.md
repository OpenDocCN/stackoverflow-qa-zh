# StackOverflow 问答 10880000-10880999

# windows-phone-7 - WP7 SQL Server CE 查询优化

> ID：10880002
> 
> 赞同：0
> 
> 时间：2012-06-04T10:44:33.907
> 
> 标签：windows-phone-7, linq-to-sql, sql-server-ce

编辑：我已经阅读了有关该主题的更多内容，并意识到，[与建议的相反](http://vantsuyoshi.wordpress.com/2012/01/04/how-to-prepopulate-wp7-local-database/ "与建议相反")，我只是将我为桌面应用程序生成的相同 .sdf 文件包含在移动应用程序中。[由于桌面/移动设备之间的索引格式似乎不同（我已经阅读了有关第一个数据库连接的警告，因为如果在此处](http://blogs.msdn.com/b/sqlservercompact/archive/2009/04/01/after-moving-the-database-from-one-platform-to-other-the-first-sqlceconnection-open-takes-more-time.aspx "这里")完成索引会重建索引，则需要更长的时间）并且我从安装文件夹中以只读方式打开数据库，可以是引擎完全忽略了我的索引，因为它无法转换它们吗？

我有一个带有单个表的 SQL Server CE 3.5 数据库`Entities`，有大约 146,000 行和这些列： ，以及 和 上的`Id (int, primary key), Gloss (nvarchar(4000)), GlossLen (int), Meaning (nvarchar(4000)`索引。这由我正在为 Windows (WPF) 和 WP7.5 开发的跨平台应用程序使用。`Gloss``Glosslen`

然后我使用 LINQ to SQL 对数据库运行以下查询：

```
(from d in Entities 
 where d.Gloss.StartsWith("searchstring") 
 orderby d.GlossLen ascending 
 select new 
        { Id = d.Id, WrittenForms = d.Gloss, MeaningsString = d.Meaning, 
          MatchString = d.Gloss, MatchStringLen = d.GlossLen }).Take(200) 
```

我面临的问题是，虽然查询在 Windows 中以合理的速度（2 秒或更短）执行，但在实际的 WP7 设备上它变得非常慢（6 秒以上）（模拟器几乎与 WPF 一样快）。

据我所知，生成的 SQL 似乎是合理的：下面是 LINQPad 返回的内容。

```
SELECT TOP (200) 
    [t0].[Id], [t0].[Gloss] AS [WrittenForms], [t0].[Meaning] AS [MeaningsString], 
    [t0].[GlossLen] AS [MatchStringLen]
FROM [Entities] AS [t0]
WHERE [t0].[Gloss] LIKE @p0
ORDER BY [t0].[GlossLen] 
```

Visual Studio 报告的查询执行计划是：Index Seek->Filter->Sort->Select，所以我没有进行表扫描。

我也已经尝试`CompiledQuery.Compile`在 LINQ 查询上使用，存储生成的 Func 以供重复使用，但没有看到任何改进。

我究竟做错了什么？WP7 和 WPF 代码路径之间的唯一区别是 WP7 数据库是以只读方式从安装文件夹打开的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:23:07.583

您没有做错任何事情，但是 WP7 != Windows。我有类似的问题，由于索引太宽，我创建了一个只有前 12 个字符的列，并对其进行了索引和搜索。

# amazon-ec2 - 连接到 EC2 时连接超时

> ID：10880005
> 
> 赞同：1
> 
> 时间：2012-06-04T10:44:41.800
> 
> 标签：amazon-ec2, timeout, amazon-web-services, connection

我是亚马逊网络服务的新用户，正在尝试学习使用这些服务。

我使用入门 EC2 指南创建并连接到 EC2 实例（尝试在免费使用层内）。

我能够为 Linux 和 Windows 创建 EC2 实例，但我无法连接到正在运行的实例。我按照入门指南中的说明进行操作，但仍然没有得到任何积极的结果。我使用 MindTree 工具以及 putty 连接到正在运行的 Linux 实例。对于窗口服务器，我尝试了与正在运行的实例的 RDP 连接。

我在窗口实例上的 MindTree、putty 和窗口 RDP 中遇到连接超时错误。我检查了实例的安全设置，并为 Linux 实例启用了端口 22 (ssh)，并为窗口实例启用了端口 3389 (RDP)。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:27:57.800

您的本地防火墙是否阻止了您到这些端口的流量？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T09:24:43.657

问题在于阻止 SSH 和 RDP 流量的公司 LAN。我在我的家庭网络中尝试过它，它就像一个魅力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-07T06:09:14.233

登录到 Amazon aws -> 单击实例 -> 在实例下单击描述选项卡 -> 检查安全组 -> 查看规则。

-> 查看规则必须是这样的

```
Ports   Protocol    Source     default
All      All        sg-yourid   ✔
22       tcp        0.0.0.0/0   ✔ 
```

-> 如果您的查看规则没有 22 端口，则单击安全组 -> 编辑 -> 添加类型 = SSH，源 = 全部。

# excel - Excel 2010 中的错误，Range 类的 PasteSpecial 方法在宏中失败

> ID：10880007
> 
> 赞同：3
> 
> 时间：2012-06-04T10:44:53.477
> 
> 标签：excel, excel-2010, vba

以下是我抛出此错误的代码：

> Range 类的 PasteSpecial 方法失败

仅当我尝试调试时才抛出错误。

```
Range(Cells(7, 1), Cells((Rowrange + 7), 2)).Select
Selection.PasteSpecial Paste:=xlValues

  ' my complete code

strSheetName = "sheet1"
Sheets(strSheetName).Select
B6 = Range("B6").Value
B7 = Range("B7").Value
Range(Cells(11, 1), Cells((Rowrange + 11), 2)).Select
Selection.Copy

strSheetName = "sheet2"
Sheets(strSheetName).Select
' Range(Cells(7, 1), Cells((Rowrange + 7), 2)).Select
'.Range(Cells(7,1), .Cells(RowRange + 7, 2). PasteSpecial Paste := xlValues
'Selection.PasteSpecial Paste:=xlValues
With ActiveSheet
.Range(.Cells(7, 1), .Cells(Rowrange + 7, 2)).PasteSpecial Paste:=xlValues
End With 
```

有没有办法避免这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:22:07.977

我相信（如果上面实际上是您的完整代码）您没有复制数据并直接尝试进行粘贴，因此您会收到该错误:)

这是你正在尝试的吗？

```
strSheetName = "Estimated vs Actual Costs"
With Sheets(strSheetName)
    .Range(.Cells(7, 1), .Cells(RowRange + 7, 2)).Copy
    .Range(.Cells(7, 1), .Cells(RowRange + 7, 2)).PasteSpecial Paste:=xlValues
End With 
```

**跟进**

尝试这个

```
strSheetName = "sheet1"
With Sheets(strSheetName)
    B6 = .Range("B6").Value
    B7 = .Range("B7").Value
    .Range(.Cells(11, 1), .Cells((RowRange + 11), 2)).Copy
End With

strSheetName = "sheet2"
With Sheets(strSheetName)
    .Range(.Cells(7, 1), .Cells(RowRange + 7, 2)).PasteSpecial Paste:=xlValues
End With 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:37:22.710

避免这种错误的最好方法是只使用完全限定的范围：

```
With Sheets("The name of the sheet")
    .Range(.Cells(7, 1), .Cells(RowRange + 7, 2)).PasteSpecial Paste:=xlValues
End With 
```

或者：`With ActiveSheet`如果您知道工作表已被选中。

另请注意，选择不是必需的。

# c# - 在 C# 中使用 Json 数据绑定 Gridview

> ID：10880010
> 
> 赞同：1
> 
> 时间：2012-06-04T10:45:09.180
> 
> 标签：c#, json

我正在使用 Json 绑定 Gridview。我在我的页面中添加了一个文本框、搜索按钮和一个 gridview。当页面加载时，所有数据都将绑定到 Gridview 中。在文本框中输入文本并单击搜索按钮然后搜索结果将显示，但它只是将搜索结果数据附加到所有数据中。我只想绑定搜索结果数据。

我的代码是

.aspx 页面

```
 <table>
        <tr>
            <td>
                <asp:TextBox ID="txtSearch" runat="server"></asp:TextBox>
            </td>
            <td>
                <asp:Button ID="btnSearch" runat="server" Text="Search" />
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <asp:GridView ID="gvDetails" runat="server">
                    <HeaderStyle BackColor="#DC5807" Font-Bold="true" ForeColor="White" />
                </asp:GridView>
            </td>
        </tr>
    </table> 
```

现在脚本是这样的

```
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {

        //    function () {
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "Gridview.aspx/BindDatatable",
            async: true,
            cache: false,
            data: "{}",
            dataType: "json",
            success: function (data) {
                for (var i = 0; i < data.d.length; i++) {
                    $("#gvDetails").append("<tr><td>" + data.d[i].OfficeName + "</td><td>" + data.d[i].City + "</td><td>" + data.d[i].Country + "</td></tr>");

                }
            },
            error: function (result) {
                alert("Error");
            }
        });

        $('#btnSearch').click
                            (
                                function () {

                                    var searchtext = $("#txtSearch").val();

                                    alert(searchtext);
                                    $.ajax(
                                                {
                                                    type: "POST",
                                                    url: "Gridview.aspx/BindSearchDatatable",
                                                    //data: "{officename : '"+searchtext+"'}",
                                                    data: JSON.stringify({ officename: searchtext }),
                                                    contentType: "application/json; charset=utf-8",
                                                    dataType: "json",
                                                    async: true,
                                                    cache: false,
                                                    success: function (data) {

                                                        for (var i = 0; i < data.d.length; i++) {

                                                            $("#gvDetails").append("<tr><td>" + data.d[i].OfficeName + "</td><td>" + data.d[i].City + "</td><td>" + data.d[i].Country + "</td></tr>");
                                                        }
                                                    },
                                                    error: function (x, e) {
                                                        alert("The call to the server side failed. " + x.responseText);
                                                    }
                                                }
                                            );
                                    return false;
                                }
                            );

        // }
    });

</script> 
```

现在 .aspx.cs 页面代码

```
public partial class Gridview : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            BindColumnToGridview();
        }
    }

    private void BindColumnToGridview()
    {
        DataTable dt = new DataTable();
        dt.Columns.Add("OfficeName");
        dt.Columns.Add("City");
        dt.Columns.Add("Country");
        dt.Rows.Add();
        gvDetails.DataSource = dt;
        gvDetails.DataBind();
        gvDetails.Rows[0].Visible = false;
    }

    [WebMethod]
    public  static OfficeDetails[] BindDatatable()
    {
        DataTable dt = new DataTable();
        List<OfficeDetails> details = new List<OfficeDetails>();

        using (SqlConnection con = new SqlConnection(@"Data Source=kartikpatel\SQLEXPRESS;Initial Catalog=master;Integrated Security=True"))
        {
            using (SqlCommand cmd = new SqlCommand("select  OfficeName,City,Country from Office", con))
            {
                con.Open();
                SqlDataAdapter da = new SqlDataAdapter(cmd);
                da.Fill(dt);
                foreach (DataRow dtrow in dt.Rows)
                {
                    OfficeDetails Office = new OfficeDetails();
                    Office.OfficeName = dtrow["OfficeName"].ToString();
                    Office.City = dtrow["City"].ToString();
                    Office.Country = dtrow["Country"].ToString();
                    details.Add(Office);
                }
            }
        }
        return details.ToArray();

    }
    [WebMethod]
    public static OfficeDetails[] BindSearchDatatable(string officename)
    {

        DataTable dt = new DataTable();
        List<OfficeDetails> details = new List<OfficeDetails>();

        using (SqlConnection con = new SqlConnection(@"Data Source=kartikpatel\SQLEXPRESS;Initial Catalog=master;Integrated Security=True"))
        {
            using (SqlCommand cmd = new SqlCommand("select  OfficeName,City,Country from Office where OfficeName like '%" + officename + "%'", con))
            {
                con.Open();
                SqlDataAdapter da = new SqlDataAdapter(cmd);
                da.Fill(dt);
                foreach (DataRow dtrow in dt.Rows)
                {
                    OfficeDetails Office = new OfficeDetails();
                    Office.OfficeName = dtrow["OfficeName"].ToString();
                    Office.City = dtrow["City"].ToString();
                    Office.Country = dtrow["Country"].ToString();
                    details.Add(Office);
                }
            }
        }
        return details.ToArray();
    }
    public class OfficeDetails
    {
        public string OfficeName { get; set; }
        public string City { get; set; }
        public string Country { get; set; }
    }

} 
```

如果您看到我使用了附加，这就是为什么搜索结果会附加所有数据的原因。但是当我单击搜索按钮时，我只想要搜索结果数据。我在谷歌上搜索但我没有得到任何东西..请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:47:06.567

正如我从您的代码中看到的那样，您将 GridView 用作占位符。我建议执行以下操作

```
<table>
    <tr>
        <td>
            <asp:TextBox ID="txtSearch" runat="server"></asp:TextBox>
        </td>
        <td>
            <asp:Button ID="btnSearch" runat="server" Text="Search" />
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <table>
              <thead>
                  <tr>
                    <td>OfficeName</td>
                  <tr>
                  <tr>
                    <td>City</td>
                  <tr>
                  <tr>
                    <td>Country</td>
                  <tr>
              </thead>
              <tbody>
                  <div id="gvDetails"></div>
              </tbody>
            </table>
        </td>
    </tr>
</table>

<script>
$('#btnSearch').click
                        (
                            function () {

                                var searchtext = $("#txtSearch").val();

                                alert(searchtext);
                                $.ajax(
                                            {
                                                type: "POST",
                                                url: "Gridview.aspx/BindSearchDatatable",
                                                //data: "{officename : '"+searchtext+"'}",
                                                data: JSON.stringify({ officename: searchtext }),
                                                contentType: "application/json; charset=utf-8",
                                                dataType: "json",
                                                async: true,
                                                cache: false,
                                                success: function (data) {

                                                    $("#gvDetails").empty();
                                                    for (var i = 0; i < data.d.length; i++) {

                                                        $("#gvDetails").append("<tr><td>" + data.d[i].OfficeName + "</td><td>" + data.d[i].City + "</td><td>" + data.d[i].Country + "</td></tr>");
                                                    }
                                                },
                                                error: function (x, e) {
                                                    alert("The call to the server side failed. " + x.responseText);
                                                }
                                            }
                                        );
                                return false;
                            }
                        );
</script 
```

通过这种方式，标题将始终可见

# java - 为什么我的 Wrapped int 不保留此方法所做的更改？

> ID：10880015
> 
> 赞同：0
> 
> 时间：2012-06-04T10:45:41.733
> 
> 标签：java, pass-by-reference

```
private static String getArgValue(String[] argsString, int[] jIndex, String classTag) {

    String thisToken;

    for( ; jIndex[0]<argsString.length ; jIndex[0]++) {
        System.out.println("jIndex[0]: " + jIndex[0]);

        if (condition) {
            // yadda yadda yadda
            jIndex[0]++;
            System.out.println("jIndex[0]: " + jIndex[0]);
            return retString;
        }
    }

    return retString;
} 
```

我试过用数组和数组包装它，但都没有对原始变量`Integer`进行更改。`i`它是如何被调用的：

```
int[] j = new int[1];

for(int i=2; i< argsString.length; i++) {
    // yadda yadda yadda
    System.out.println("opening i: " + i);
    j[0] = i;

    thisArgValueString = getArgValue(argsString, j, thisArgClassString);
    System.out.println("closing i: " + i);
} 
```

示例输出：

```
opening i: 2
jIndex[0]: 2
jIndex[0]: 3
jIndex[0]: 5
closing i: 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:51:22.687

尝试打印您的 int holder 而不是 i 本身：

```
System.out.println("closing i: " + j[0]); 
```

或者您可以简单地重新分配 i：

```
i = j[0];
System.out.println("closing i: " + i); 
```

您的原始变量`i`不会自行更改，因为它是原始类型。整数也没有用，因为它是不可变的。所以你提供的代码本质上是正确的方法。您只需要了解，`j[0] = i`仅分配`i`to的值，`j[0]`而不链接`j[0]`to的内容`i`。因此，您可以从那时开始使用`j[0]`（如本文中的第一个代码）或重新分配`i`（`j[0]`如本文中的第二个代码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:49:25.603

An`Integer`是不可变的，但您显然试图将它当作可变的一样使用。那是行不通的。

另一方面， an`int[1]`可以用作可变 int 持有者......

...并且它在您的示例中*似乎*不起作用的原因是在最后一个打印语句中您正在打印`i`而不是您在通话`j`中更新的持有人。`getArgValue`将最后一条语句更改为：

```
 System.out.println("closing i: " + j[0]); 
```

请记住，这是*模拟*的引用调用，而不是真正的引用调用。您必须以正确的顺序跳过箍，才能使模拟工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T10:51:59.440

Java 是按值传递的，您所期望的行为，即 i 的内容被更改，与对象一致，您传递的值是对象引用。但是，对于 chars、ints 和 doubles 等原语，您传递的是实际数据本身。您放入 j[0] 的不是变量 i，而是 i 的内容。因此，现在有两个内存位置具有相同的内容——j[0] 和 i。但是，当您更改 j[0] 时，i 不受影响，因为它完全不相关——您只需将 j[0] 的内容复制到 i 中。当您将一个对象传递给一个方法时，您实际上是在传递对象引用，因此您指的是同一个对象。通过将 i 转换为 Integer，您正在自动装箱，也就是说，您正在制作 i 的副本，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T10:57:20.147

您的代码片段表明您对数组可变性和通过引用传递的方式存在误解。

让我给你一个更简化的例子，它消除了围绕问题核心的所有非必要的废话。

```
public static void main(String[] args) {
   int numberToModify = 42;
   int [] arr = new int[1];
   arr = numberToModify;
   System.println("numberToModify="+numberToModify );
   System.println("arr[0]="+arr[0]);
   doStuff(arr);
   System.println("numberToModify="+numberToModify );
   System.println("arr[0]"+arr[0]);
}

private static void doStuff(int[] array){
   array[0] = 100;  
} 
```

你应该看到打印出来的是

```
numberToModify=42
arr[0]=42
numberToModify=42
arr[0]=100 
```

在您的代码示例中，您似乎期望在方法内部修改数组时变量`i`（这里是）也应该发生变化。`numberToModify`它没有，因为数组包含一个实际的值类型（因为`int`s 是原始的，而原始是按值传递的）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T10:53:15.330

所以你希望变量 i 保留对它所做的所有更改？您是否尝试将其声明为 Integer 对象？int 是一个原始类型，所以你不能通过引用传递它，将它包装在任何东西中只会分配它的值。尝试做这样的事情：

```
for(Integer i=2; i< argsString.length; i++) {
// yadda yadda yadda
System.out.println("opening i: " + i);
j[0] = i;

thisArgValueString = getArgValue(argsString, j, thisArgClassString);
System.out.println("closing i: " + i); 
```

}

看看是否能解决你的问题。

希望有帮助。

# google-plus - 使用 Google+ API 在 Google+ 流上发帖

> ID：10880021
> 
> 赞同：5
> 
> 时间：2012-06-04T10:46:22.510
> 
> 标签：google-plus

有人知道如何使用 Google+ API 在我们的 Google+ Stream 上发帖吗？我需要在流上发帖。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T11:17:29.543

仍然没有“公开的”官方支持的使用 API 在 Google+ 流上发帖的方式。（您可以使用 +1 或分享按钮发布，有些人使用非官方 API 或利用 SMS 发布方法，但这不是您要寻找的。）

有关您当前可以使用有限 API 做什么的详细信息，您可以查看[https://developers.google.com/+/api/](https://developers.google.com/+/api/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:31:44.243

这是一个用 js 编写的非官方 Google+ API。[https://github.com/mohamedmansour/google-plus-extension-jsapi](https://github.com/mohamedmansour/google-plus-extension-jsapi)

# java - 我可以使用馅饼中的文本来提取一些值吗

> ID：10880022
> 
> 赞同：0
> 
> 时间：2012-06-04T10:46:25.827
> 
> 标签：java, flash-builder

我是 Flash Builder 的新手！我正在尝试在我的学校项目中为 IOS 创建一个应用程序。我面临的问题是：我可以从文本输入字段中选择一些项目值并在我使用一些公式的新视图中实现它们！文本输入将如下例所示：
aaa 23
bbb 45
ccc 56
我需要我想在我的公式中使用的 aaa 和 ccc！
关于我的第一个问题！在我的主视图上，我有 2 个按钮：1-手动 2-自动。在手动视图中，我有字段 aka：
aaa =
ccc= ... 等等。在自动模式下，我正在考虑这样的自动输入法：从用户将粘贴文本的文本输入区域中为公式选择所需的值，以避免在每个字段上手动输入。
PS：有人可以告诉我如何在 Flash Builder 中正确实现数学简单公式，这里我的意思是语法。像 textinput1+textinput2/textinput3！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:58:23.930

据我了解，你有两个问题...

首先，这对我来说不太有意义，但我想你是在问你是否可以在字母上做数学？？？不，但也许我只是不理解这个问题。

其次，您想知道如何在 ActionScript 中进行数学运算。它相当简单。基本数学函数就像任何其他语言一样。获取字符串，将其转换为数字，然后进行基本数学运算：

```
Number(textInput1) + Number(textInput2) = result; 
```

使用 Number() 会将您的字符串转换为数字，以便您执行数学运算。然后，要显示它，只需将结果转换回字符串：

```
textResultField.text = result.toString(); 
```

或者您可以花哨（又名：以后更难修改）并在一行中完成所有操作：

```
textResultField.text = (Number(textInput1) + Number(textInput2)).toString(); 
```

同样，这适用于所有 BASIC 数学函数（+、-、*、/）。真的取决于你想要做什么。

# android - Android ListView 与 Spinner 并获得它的价值

> ID：10880024
> 
> 赞同：1
> 
> 时间：2012-06-04T10:46:37.947
> 
> 标签：android, listview, textview, spinner

我正在尝试创建`List`具有 a`TextView`和 a 的 a `Spinner`。`TextView`和的数据`Spinner`来自数组或 JSON。我有以下文件：

主要活动：

```
public class ListViewTestActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        String coba="tes";
        ListView listView = (ListView) findViewById(R.id.listView1);

        DataHolder data = new DataHolder(this);
        DataHolder data1 = new DataHolder(this);
        DataHolder data2 = new DataHolder(this);
        DataHolder data3 = new DataHolder(this);
        DataHolder data4 = new DataHolder(this);
        DataHolder data5 = new DataHolder(this);

        DataAdapter d = new DataAdapter(this, R.layout.rowview, new DataHolder[] { data, data1, data2, data3, data4, data5 });

        listView.setAdapter(d);
    }
} 
```

数据持有者类：

```
public class DataHolder {

    private int selected;
    private String name;
    private ArrayAdapter<CharSequence> adapter;
    String[] count={"0","1","2","3","4","5","6","7","8","9","10"};

    public DataHolder(Context parent) {
        //adapter = ArrayAdapter.createFromResource(parent, R.array.choices , android.R.layout.simple_spinner_item);
        //adapter= new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,count);
        //this.name="tes";
        adapter = new ArrayAdapter<CharSequence>(parent, android.R.layout.simple_spinner_item, count);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public ArrayAdapter<CharSequence> getAdapter() {
        return adapter;
    }

    public String getText() {
        return (String) adapter.getItem(selected);
    }

    public int getSelected() {
        return selected;
    }

    public void setSelected(int selected) {
        this.selected = selected;
    }
} 
```

数据适配器类：

```
public class DataAdapter extends ArrayAdapter<DataHolder> {

    private Activity myContext;
    String tes="makanan";

    public DataAdapter(Activity context, int textViewResourceId, DataHolder[] objects) {
        super(context, textViewResourceId, objects);
        myContext = context;
    }

    // We keep this ViewHolder object to save time. It's quicker than findViewById() when repainting.
    static class ViewHolder {
        protected DataHolder data;
        protected TextView text;
        protected Spinner spin;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;

        // Check to see if this row has already been painted once.
        if (convertView == null) {

            // If it hasn't, set up everything:
            LayoutInflater inflator = myContext.getLayoutInflater();
            view = inflator.inflate(R.layout.rowview, null);

            // Make a new ViewHolder for this row, and modify its data and spinner:
            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.text = (TextView) view.findViewById(R.id.text);
            viewHolder.data = new DataHolder(myContext);
            viewHolder.spin = (Spinner) view.findViewById(R.id.spin);
            viewHolder.spin.setAdapter(viewHolder.data.getAdapter());

            // Used to handle events when the user changes the Spinner selection:
            viewHolder.spin.setOnItemSelectedListener(new OnItemSelectedListener() {

                @Override
                public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                    viewHolder.data.setSelected(arg2);
                    viewHolder.text.setText(viewHolder.data.getText());
                }

                @Override
                public void onNothingSelected(AdapterView<?> arg0) {

                }
            });

            // Update the TextView to reflect what's in the Spinner
            viewHolder.text.setText(tes);

            view.setTag(viewHolder);

            Log.d("DBGINF", viewHolder.text.getText() + "");
        } else {
            view = convertView;
        }

        // This is what gets called every time the ListView refreshes
        ViewHolder holder = (ViewHolder) view.getTag();
        holder.text.setText(getItem(position).getText());
        holder.spin.setSelection(getItem(position).getSelected());

        return view;
    }
} 
```

主要.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:orientation="vertical" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">
    <ListView android:id="@+id/listView1" 
        android:layout_height="match_parent" 
        android:layout_width="match_parent" />
</LinearLayout> 
```

行视图.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" android:layout_width="match_parent"
    android:layout_height="wrap_content" android:weightSum="1">
    <TextView android:layout_width="wrap_content"
        android:layout_height="match_parent" android:id="@+id/text"
        android:layout_weight="0.5" android:textSize="25sp" />
    <Spinner android:layout_width="0dp" android:layout_height="wrap_content"
        android:id="@+id/spin" 
        android:prompt="@string/choice_prompt"
        android:layout_weight="0.5" />
</LinearLayout> 
```

我的问题是我无法更改`TextView`数组的 with 数据，并获取该`Spinner`and的值`TextView`。我该怎么做呢？

# delphi - 用于 IS 单位和转换的 Delphi 框架

> ID：10880025
> 
> 赞同：1
> 
> 时间：2012-06-04T10:46:43.203
> 
> 标签：delphi

[我们需要一个通用框架，允许我们的应用程序在国际单位制的基本单位](http://en.wikipedia.org/wiki/International_System_of_Units)和派生单位之间进行各种转换。即应该可以将单位为“米”的值与单位“公里”的值相加，并且应该能够确定表达式的单位是什么。

因此，如果我们计算速度 (m/s) 和时间 (h:mm:ss) 的乘积，那么它应该能够确定结果单位是距离 (m)。

有谁知道这样的库是否在某个地方可用，商业或开源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:11:49.423

没有办法直接做到这一点，我已经看到了。

您必须将一种类型转换为另一种类型（或两者都转换为通用类型），执行您的操作，然后将结果转换回来。

Delphi（至少从 2007 年开始）附带具有`ConvUnit`可以执行此类操作的类的单元，并且有一个示例应用程序演示了名为`ConvertIt`. 你可以做你自己的自定义转换类型，这使得它非常灵活。

[Delphi 文档 wiki](http://docwiki.embarcadero.com/CodeSamples/en/ConvertIt_Sample)中有更多信息。

![ConvertIt 示例屏幕图像](../Images/6dc665d443030f36b09b9021a5068d7f.png)

# android - 如何解决“No Activity found to handle Intent”错误

> ID：10880026
> 
> 赞同：4
> 
> 时间：2012-06-04T10:46:51.840
> 
> 标签：android, eclipse

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.android.suven.Create_memo } 
```

我只想从一项活动转到另一项活动，但它给了我这个错误。

我的主要活动代码如下

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    btn1 = (Button)findViewById(R.id.button1);
    btn1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) 
        {
            try
            {
                Intent i=new Intent("com.android.suven.Create_memo");
            startActivity(i);
            }
            catch ( ActivityNotFoundException e) {
                e.printStackTrace();
            }

        }

    });  
    btn2 = (Button)findViewById(R.id.button2);
    btn2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) 
        {
            try
            {
                Intent i=new Intent("com.android.suven.Create_memo");
            startActivity(i);
            }
            catch ( ActivityNotFoundException e) {
                e.printStackTrace();
            }

    });          
  }
} 
```

我的logcat是这样的：

```
06-05 13:43:35.959: E/AndroidRuntime(275): FATAL EXCEPTION: main
06-05 13:43:35.959: E/AndroidRuntime(275): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.suven/com.android.suven.Create_memo}: java.lang.NullPointerException
06-05 13:43:35.959: E/AndroidRuntime(275):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
06-05 13:43:35.959: E/AndroidRuntime(275):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-05 13:43:35.959: E/AndroidRuntime(275):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-05 13:43:35.959: E/AndroidRuntime(275):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-05 13:43:35.959: E/AndroidRuntime(275):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-05 13:43:35.959: E/AndroidRuntime(275):  at android.os.Looper.loop(Looper.java:123)
06-05 13:43:35.959: E/AndroidRuntime(275):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-05 13:43:35.959: E/AndroidRuntime(275):  at java.lang.reflect.Method.invokeNative(Native Method)
06-05 13:43:35.959: E/AndroidRuntime(275):  at java.lang.reflect.Method.invoke(Method.java:521)
06-05 13:43:35.959: E/AndroidRuntime(275):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-05 13:43:35.959: E/AndroidRuntime(275):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-05 13:43:35.959: E/AndroidRuntime(275):  at dalvik.system.NativeStart.main(Native Method)
06-05 13:43:35.959: E/AndroidRuntime(275): Caused by: java.lang.NullPointerException
06-05 13:43:35.959: E/AndroidRuntime(275):  at com.android.suven.Create_memo.onCreate(Create_memo.java:56)
06-05 13:43:35.959: E/AndroidRuntime(275):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-05 13:43:35.959: E/AndroidRuntime(275):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
06-05 13:43:35.959: E/AndroidRuntime(275):  ... 11 more
06-05 13:43:39.199: I/Process(275): Sending signal. PID: 275 SIG: 9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:04:42.180

在您的代码行中

```
Intent i=new Intent("com.android.suven.Create_memo"); 
```

**“com.android.suven.Create_memo”** 被视为行动。

相反，你必须把

```
Intent i=new Intent(YourCurrentAivityName.this, Create_memo.class); 
```

还放

```
<activity
            android:name=".Create_memo" >
        </activity> 
```

在您的 AndroidManifest.xml 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:06:58.137

这是 NextActivity.java

```
public class NextActivity extends Activity {

//Your member variable declaration here

// Called when the activity is first created.
@Override
public void onCreate(Bundle savedInstanceState) {
//Your code here
}
} 
```

创建新的 Activity 后，我们必须在文件“AndroidManifest.xml”中注册它。为了注册，我们必须在“AndroidManifest.xml”中创建一个条目作为

```
**<activity android:name=".NextActivity" android:label="@string/app_name"/>** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T10:48:38.217

您是否在清单文件中声明了 Create_memo 活动？喜欢：

```
<activity
            android:name="com.android.suven.Create_memo" /> 
```

# drupal-6 - 有机组，灯箱中的 og 详细信息块链接

> ID：10880028
> 
> 赞同：0
> 
> 时间：2012-06-04T10:47:12.820
> 
> 标签：drupal-6, popup, overlay, lightbox2, organic-groups

我在我的网站中使用了有机组（og），并且我有一个组详细信息块，其中组内容创建链接出现。现在我想在灯箱中打开这些链接。或在弹出窗口中我们如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:40:29.987

您可以使用弹出 API - [http://drupal.org/project/popups](http://drupal.org/project/popups) 或Thickbox - [http://drupal.org/project/thickbox](http://drupal.org/project/thickbox)

# ios - 像在 UIPageViewController 中一样通过平移手势进行部分页面卷曲

> ID：10880031
> 
> 赞同：4
> 
> 时间：2012-06-04T10:47:37.387
> 
> 标签：ios, ios5, presentmodalviewcontroller, uipageviewcontroller

我想**部分**显示一个视图控制器，就像

> UIModalTransitionStylePartialCurl

，但不是卷曲动画，我想通过平移手势卷曲视图

我的目标是获得与使用 UIPageViewController 通过根据用户触摸（不是滑动手势）拖动\卷曲页面在 ViewController 之间切换时相同的效果。

任何帮助将不胜感激。

# java - java图像读取库

> ID：10880032
> 
> 赞同：0
> 
> 时间：2012-06-04T10:47:39.693
> 
> 标签：java, image

我正在寻找 java 库

*   能够加载/读取许多图像格式
*   不想安装
*   独立于平台
*   并且不是其中之一（ImageIO、JAI、Sanselan）

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:37:13.553

也许使用[ImageJ](http://rsbweb.nih.gov/ij/features.html)？在大学里，我们已经为它编写了插件（几年前），但我认为你也可以将它用作库。

# php - 找出运行当前脚本的 PHP 解释器的绝对路径

> ID：10880042
> 
> 赞同：4
> 
> 时间：2012-06-04T10:48:51.143
> 
> 标签：php, path, command-line-interface, environment

在 CLI 模式下，依赖于`getenv('_')`找出哪个 php 解释器可执行文件正在运行当前 php 脚本是否安全且可移植？[我在php.net](http://php.net)上的任何地方都没有看到它的记录

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:08:16.937

常数`PHP_BINDIR`应该更可靠
（我可能错了）

我`getenv("_");`在 fastcgi 中展示的一个快速测试是`httpd`（在 CLI 上没问题）

如果你有 PHP 5.4，那么

```
PHP_BINARY 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T11:15:55.270

[PHP_BINDIR](http://php.net/manual/en/reserved.constants.php) (string) - 指定二进制文件的安装位置。

此外，getenv('_') 在我的窗口上返回 false

# android - GridView 行高

> ID：10880044
> 
> 赞同：10
> 
> 时间：2012-06-04T10:49:05.387
> 
> 标签：android, gridview

如何使行高适合 GridView 中最高的项目？因为默认情况下它是失败的。 ![在此处输入图像描述](../Images/8ca579262516ca2e3c62a3964098d000.png)

更新：这是带有网格的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <GridView
        android:id="@+id/gird"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:fadeScrollbars="false"
        android:horizontalSpacing="5dip"
        android:numColumns="3"
        android:verticalSpacing="5dip" />

</LinearLayout> 
```

这是网格项目的布局

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:background="@drawable/grid_item_background"
    android:textColor="#000000" /> 
```

这是网格项目的背景可绘制对象

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <gradient
        android:angle="270"
        android:endColor="#F2DBA7"
        android:startColor="#F2DBA7" />

    <corners android:radius="7dip" />

    <stroke android:width="3dip" android:color="#C90E0E"/>

    <padding
        android:bottom="5dip"
        android:left="5dip"
        android:right="5dip"
        android:top="5dip" />

</shape> 
```

这是活动的源代码

```
 import android.app.Activity;
    import android.os.Bundle;
    import android.widget.ArrayAdapter;
    import android.widget.GridView;

    public class GridActivity extends Activity {
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            GridView grid = (GridView) findViewById(R.id.gird);

            ArrayAdapter<String> answeredWords = new ArrayAdapter<String>(this,
                    R.layout.grid_item);
            grid.setAdapter(answeredWords);
            answeredWords.add("123456789101234567891012345678910");
            answeredWords.add("12345678910");
            answeredWords.add("12345678910123456789101234567891012345678910");
            answeredWords.add("12345678910");
            answeredWords.add("12345678910123456789101234567891012345678910");
            answeredWords.add("1234567891012345678910");
            answeredWords.add("1234567891012345678910");
            answeredWords.add("1234567891012345678910");
            answeredWords.add("1234567891012345678910");
            answeredWords.add("1234567891012345678910");
            answeredWords.add("123456789101234567891012345678910");
            answeredWords.add("123456789101234567891012345678910");
        }
} 
```

更新：我重写了 GridView，他找到了元素行的最大高度，并将该行的所有元素设置为相同的高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:00:14.267

如果您使用 imageview 作为 gridview 的单元格，则动态设置 col 高度尝试设置 iamgeview 比例类型

# jquery - webForms 中的 fancybox2 不会触发按钮单击

> ID：10880055
> 
> 赞同：2
> 
> 时间：2012-06-04T10:50:10.980
> 
> 标签：jquery, asp.net, fancybox-2

我有一个自定义控件，它已在隐藏 div 的主页中注册。在页面加载时，我显示了一个模式窗口（fancybox 2），其中包含隐藏 div 的内容。

我的问题是这个控件有一个按钮，它不会从花式框中触发。

我试过这个[Fancybox - ASP.NET 按钮不起作用，](https://stackoverflow.com/questions/2686362/fancybox-asp-net-button-not-working#10753866)但没有任何改变。

有谁知道如何解决这一问题？最好是在不修改fancybox.js 的情况下进行修复。

**控件所在的代码**

```
<a href="#inline" style="display: none" id="trigerButton"></a>
<div id="inline" style="display: none; width: 500px;">
    <asp:PlaceHolder runat="server" ID="PhCtrl"></asp:PlaceHolder>
</div> 
```

**来自codeBehind**

```
var ctrlName = LoadControl("~/Path/control.ascx");
ctrlName.ID="ctrlID";
PhCtrl.Controls.Add(ctrlName);
var sb = new StringBuilder();
sb.Append("$(document).ready(function() {");
sb.Append("$('#trigerButton').fancybox({modal:true}).trigger('click');");
sb.Append("$('#clickNo').click(function(){$.fancybox.close(true)});");
sb.Append("});");
ClientScript.RegisterStartupScript(typeof(T), "_script", sb.ToString(), true); 
```

**自定义控件**

它有一个按钮，这个按钮不会触发

```
<asp:Button runat="server" ID="Button1" Text="Upgrade" OnClick="Button1_click" />
  protected void Button1_click(object s,EventArgs e)
    {
        //Do something 
    } 
```

我会很感激任何建议

谢谢

**解决方案**

我没有编辑fancybox.js就找不到解决方案，尽管我替换了每个

```
appendTo('body') 
```

和

```
appendTo('form:first') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:21:17.557

这个问题的主要原因是 funcybox 正在对 DOM 结构进行修改，以便制作对话框并将其放置在页面中的某个位置。

在您的情况下，问题可能是最终呈现的控件将最终输入按钮放置在 asp.net 表单之外，这就是为什么甚至没有被触发。

## 更新

我在类似的盒子上发现了一个类似的问题。该解决方案也可以在这里工作

它使用在表单内添加对话框创建

```
jQuery('#dialogof').appendTo('form'); 
```

[ASP.NET 表单字段未从颜色框中发布](https://stackoverflow.com/questions/6424638/asp-net-form-fields-not-posting-from-colorbox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-31T08:16:46.813

```
//Try This
$('.fancybox').fancybox({
     parent: "form:first", // jQuery selector
}); 
```

# android - 使用 ACTION_VIEW android 后返回相同的活动

> ID：10880057
> 
> 赞同：2
> 
> 时间：2012-06-04T10:50:13.310
> 
> 标签：android, webview

我使用以下代码在 Twitter 上发布了一条推文。

```
 String tweetUrl = "https://twitter.com/intent/tweet?text="+"Text to be posted".replace(" ", "%20")
                            + " https://www.someurl.com";
                    Uri uri = Uri.parse(tweetUrl);

                startActivity(new Intent(Intent.ACTION_VIEW, uri)); 
```

它工作正常。但问题是它在推文发布后仍停留在同一页面上。发送推文后如何重定向回相同的活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:23:47.117

启动模式应该可以帮助您。所以，试着阅读[`this`](http://intridea.com/blog/2011/6/16/android-understanding-activity-launchmode)博客以获得更好的想法。

# spring - 如何解决转换问题 java.lang.ClassCastException: $Proxy cannot be cast to NotEmpty which is annotation

> ID：10880061
> 
> 赞同：8
> 
> 时间：2012-06-04T10:50:25.813
> 
> 标签：spring, bean-validation

我有一个与 spring 集成的 REST 服务项目。我正在尝试集成 bean 验证。我做了一个自定义注释：

```
 /**
  * Denotes a field as being no empty.
  *
  * @author pguzun
  */
 @Target({METHOD, FIELD, ANNOTATION_TYPE})
 @Retention(RUNTIME)
 @Constraint(validatedBy = {INotEmptyValidator.class})
 public @interface NotEmpty {

    Error error() default Error.ServerError;

    String message() default "{error.notEmpty}";

    Class<?>[] groups() default {};

    Class<? extends Payload>[] payload() default {};
} 
```

和

```
@Constraint(validatedBy = {INotEmptyValidator.class}) 
```

我指定了验证器接口。

这是验证器的实现。

```
 /**
  * Checks that a String is not empty.
  *
  * @see StringUtils#isEmpty(java.lang.CharSequence)
  * @author pguzun
  */
@Component
public class NotEmptyValidatorImpl implements INotEmptyValidator {

 @Override
 public void initialize(NotEmpty notEmpty) {
     // NOTHING TO DO
 }

 @Override
 public boolean isValid(String value, ConstraintValidatorContext context) {
     return !StringUtils.isEmpty(value);
 }
} 
```

我确实做了一个自定义验证器约束工厂

```
 /**
    * Is custom an {@link ConstraintValidatorFactory }. Engine for defining factory
    * methods for {@link ConstraintValidator}'s.
    *
    * @author pguzun
    */
    public class NeoSpringConstraintValidatorFactory implements ConstraintValidatorFactory, ApplicationContextAware {

        private ApplicationContext applicationContext;

        public NeoSpringConstraintValidatorFactory() {
        }

        @Override
        public <T extends ConstraintValidator<?, ?>> T getInstance(Class<T> key) {
            Map<String, T> beansByNames = applicationContext.getBeansOfType(key);
            if (beansByNames.isEmpty()) {
                try {
                    return key.newInstance();
                } catch (InstantiationException e) {
                    throw new RuntimeException("Could not instantiate constraint validator class '" + key.getName() + "'", e);
                } catch (IllegalAccessException e) {
                    throw new RuntimeException("Could not instantiate constraint validator class '" + key.getName() + "'", e);
                }
            }
            if (beansByNames.size() > 1) {
                throw new RuntimeException("Only one bean of type '" + key.getName() + "' is allowed in the application context");
            }
            return (T) beansByNames.values().iterator().next();
        }

        @Override
        public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
            Assert.notNull(applicationContext, "applicationContext can not be null");
            this.applicationContext = applicationContext;
        }
    } 
```

并像这样配置它

```
<bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean" >
    <property name="constraintValidatorFactory" ref="constraintValidatorFactory"/> 
</bean>
<bean id="constraintValidatorFactory" class="com...NeoSpringConstraintValidatorFactory" >
</bean> 
```

当我在具有这样注释的字段的 bean 上调用服务中的验证时

```
/**
* The User's value object definition
*
* @author pguzun
*/
@XmlRootElement()
@XmlAccessorType(XmlAccessType.FIELD)
public class UserVO {

    @XmlElement
    private long id;
    @NotEmpty(error = Error.EmailVoid)
    private String email; 
```

我明白了

```
 SEVERE: Servlet.service() for servlet jersey-serlvet threw exception
    javax.validation.ValidationException: HV000032: Unable to initialize com.backend.rest.validation.validator.NotEmptyValidatorImpl.
        at org.hibernate.validator.internal.engine.ConstraintTree.initializeConstraint(ConstraintTree.java:450)
        at org.hibernate.validator.internal.engine.ConstraintTree.createAndInitializeValidator(ConstraintTree.java:352)
        at org.hibernate.validator.internal.engine.ConstraintTree.getInitializedValidator(ConstraintTree.java:334)
        at org.hibernate.validator.internal.engine.ConstraintTree.validateConstraints(ConstraintTree.java:155)
        at org.hibernate.validator.internal.engine.ConstraintTree.validateConstraints(ConstraintTree.java:125)
        at org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:86)
        at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraint(ValidatorImpl.java:442)
        at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:387)
        at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:351)
        at org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:303)
        at org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:133)
        at org.springframework.validation.beanvalidation.SpringValidatorAdapter.validate(SpringValidatorAdapter.java:194)
        at com.backend.rest.UserResourceImpl.validateGuest(UserResourceImpl.java:100)
        at com.backend.rest.UserResourceImpl.register(UserResourceImpl.java:77)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
        at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
        at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
        at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
        at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
        at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1483)
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1414)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
        at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414)
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:662)
    Caused by: java.lang.ClassCastException: $Proxy84 cannot be cast to com.backend.rest.validation.validator.NotEmpty
        at com.backend.rest.validation.validator.NotEmptyValidatorImpl.initialize(NotEmptyValidatorImpl.java:18)
        at org.hibernate.validator.internal.engine.ConstraintTree.initializeConstraint(ConstraintTree.java:447)
        ... 49 more
    Jun 4, 2012 1:36:57 PM org.apache.catalina.core.StandardWrapperValve invoke
    SEVERE: Servlet.service() for servlet jersey-serlvet threw exception
    javax.validation.ValidationException: HV000032: Unable to initialize com.backend.rest.validation.validator.NotEmptyValidatorImpl.
        at org.hibernate.validator.internal.engine.ConstraintTree.initializeConstraint(ConstraintTree.java:450)
        at org.hibernate.validator.internal.engine.ConstraintTree.createAndInitializeValidator(ConstraintTree.java:352)
        at org.hibernate.validator.internal.engine.ConstraintTree.getInitializedValidator(ConstraintTree.java:334)
        at org.hibernate.validator.internal.engine.ConstraintTree.validateConstraints(ConstraintTree.java:155)
        at org.hibernate.validator.internal.engine.ConstraintTree.validateConstraints(ConstraintTree.java:125)
        at org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:86)
        at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraint(ValidatorImpl.java:442)
        at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:387)
        at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:351)
        at org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:303)
        at org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:133)
        at org.springframework.validation.beanvalidation.SpringValidatorAdapter.validate(SpringValidatorAdapter.java:194)
        at com.backend.rest.UserResourceImpl.validateGuest(UserResourceImpl.java:100)
        at com.backend.rest.UserResourceImpl.register(UserResourceImpl.java:77)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
        at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
        at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
        at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
        at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
        at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1483)
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1414)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
        at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414)
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:662)
    Caused by: java.lang.ClassCastException: $Proxy84 cannot be cast to com.backend.rest.validation.validator.NotEmpty
        at com.backend.rest.validation.validator.NotEmptyValidatorImpl.initialize(NotEmptyValidatorImpl.java:18)
        at org.hibernate.validator.internal.engine.ConstraintTree.initializeConstraint(ConstraintTree.java:447)
        ... 49 more 
```

我知道 java.lang.ClassCastException: $Proxy84 cannot be cast to Clazz is a clasic spring exception when you don't use interfaces but here I do use and NotEmpty si an annotation

请告诉我做错了什么？

附言。我使用这个版本的框架

```
 <properties>
    <spring.version>3.1.1.RELEASE</spring.version>
    <hibernate.version>4.1.3.Final</hibernate.version>
    <jersey.version>1.12</jersey.version>
    <validation.api.version>1.0.0.GA</validation.api.version>
    <hibernate.validator.version>4.3.0.Final</hibernate.validator.version> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T11:17:33.477

我要感谢大家花时间在这个问题上。
该错误来自具有此约束验证器的其他已实现注释。 `@Constraint(validatedBy = {INotEmptyValidator.class})`. 这肯定是错误地完成的。

最后，这是进行 bean 验证的一个很好的例子，将 constratint 验证器指定 `@Constraint(validatedBy = {INotEmptyValidator.class})`为接口。实现`NotEmptyValidatorImpl`是一个spring bean。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:12:02.637

检查你的进口。我认为您错误地在某个地方导入了这个： `org.hibernate.validator.constraints.NotEmpty` 而不是： `com.backend.rest.validation.validator.NotEmpty`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-28T15:23:39.070

顺便说一句，如果您的正则表达式有语法错误，也会发生同样的异常。我来到这里之前发现语法错误是我的问题。

对你没有帮助，但我希望能拯救一个未来可怜的灵魂一些额外的搜索。

# java - 获取 BufferedImage 的 RGB

> ID：10880083
> 
> 赞同：19
> 
> 时间：2012-06-04T10:52:10.150
> 
> 标签：java, bufferedimage

谁能解释如何从 BufferedImage 中获取 rgb 值数组？

我在 BufferedImage 中有一个灰度图像，需要提取一个包含 0 到 255 个值的数组来描述图像。
我知道 BufferedImage 是正确的，因为我可以将它保存为 PNG。但是，如果我使用`int[] dataBuffInt = ((DataBufferInt) heightMap.getDataBuffer()).getData();`我会得到一堆巨大的负数。

我已经搜索了一段时间，看到了一些关于改变一些值（[post](https://stackoverflow.com/questions/8954723/how-to-get-rgb-pixel-value-from-r-g-b-value-in-java-for-a-bufferedimage)）的参考，但并不真正理解他们在说什么。

基本上我想从 BufferedImage 到 0 到 255 个 RBG 值的数组。
我不确定我是否正确解释了自己，请询问更多详细信息。

编辑：
@Garbage 感谢您的提示。我试过 int[] dataBuffInt = heightMap.getRGB(0, 0, heightMap.getWidth(), heightMap.getHeight(), null, 0, heightMap.getWidth()); 但得到相同的结果。
@Greg Kopff 结果是 2，它被设置为 TYPE_INT_ARGB

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-04T14:24:41.080

您得到负数，因为您从其中一个像素获得的 int 值由红色、绿色、蓝色和 alpha 组成。您需要拆分颜色以获取每个颜色分量的值。

最简单的方法是创建一个[`Color`](http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html)对象并使用[`getRed`](http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html#getRed%28%29),[`getGreen`](http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html#getGreen%28%29)和[`getBlue`](http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html#getBlue%28%29)(以及[`getAlpha`](http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html#getAlpha%28%29)) 方法来获取组件：

```
public static void main(String... args) throws Exception {

    BufferedImage image = ImageIO.read(
         new URL("http://upload.wikimedia.org/wikipedia/en/2/24/Lenna.png"));

    int w = image.getWidth();
    int h = image.getHeight();

    int[] dataBuffInt = image.getRGB(0, 0, w, h, null, 0, w); 

    Color c = new Color(dataBuffInt[100]);

    System.out.println(c.getRed());   // = (dataBuffInt[100] >> 16) & 0xFF
    System.out.println(c.getGreen()); // = (dataBuffInt[100] >> 8)  & 0xFF
    System.out.println(c.getBlue());  // = (dataBuffInt[100] >> 0)  & 0xFF
    System.out.println(c.getAlpha()); // = (dataBuffInt[100] >> 24) & 0xFF
} 
```

输出：

```
173
73
82
255 
```

# android - Android 动画背景图片

> ID：10880086
> 
> 赞同：0
> 
> 时间：2012-06-04T10:52:18.427
> 
> 标签：android

我有一个相对布局，我将它的背景设置为可绘制，这是一个选择器。

此相对布局共有两个背景，一个处于选中状态，一个处于非选中模式，两种状态都在可绘制选择器 xml 文件中处理。

我想要实现的是选择器切换背景图像，从选定到未选择或反之亦然我想要显示淡入/缩小动画。

我发现我需要`android:exitFadeDuration="@android:integer/config_mediumAnimTime`用于在 xml 文件中实现它，但我使用的是 Android API 级别 8，它没有这个属性。

那么我需要在java代码中实现这个，我应该如何在java中实现这个？
有没有其他选项可以在 xml 中实现它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:35:47.377

请使用以下行，它将解决您的问题。

```
checkBox1.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

               @Override
               public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {

                    imageView1.setBackgroundResource(R.drawable.checkbox_normal);
                    Animation hyperspaceJump = AnimationUtils.loadAnimation(Test1Activity.this, R.anim.animation_big_to_small_rotate); 
                    imageView1.startAnimation(hyperspaceJump); 
                    imageView1.setVisibility(View.VISIBLE);

               }
            }); 
```

而不是**animation_big_to_small_rotate** 使用您为动画所拥有的 xml 文件。您可以根据需要更改图像。

# jquery - jQuery函数没有获取参数

> ID：10880089
> 
> 赞同：0
> 
> 时间：2012-06-04T10:53:14.883
> 
> 标签：jquery, function

我正在使用这个功能：

```
 $(function echo_content(name, content) {
        var random1 = Math.ceil(Math.random()*500);
        var random2 = Math.ceil(Math.random()*1000);
        alert(content);
        $('#TheDiv').show("slow");
}); 
```

我在我的网页上调用这个函数，如下所示：

```
 <td>Content <script>echo_content("MyName", "The Content"); </script></td> 
```

问题是，该功能警报`undefined`而不是`The Content`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T10:54:24.040

这不是 JQuery DOM 就绪处理程序。只需像这样定义您的功能：

```
function echo_content(name, content) {
    var random1 = Math.ceil(Math.random() * 500);
    var random2 = Math.ceil(Math.random() * 1000);
    alert(content);
    $("#TheDiv").show("slow");
} 
```

顺便说一句，`#TheDiv`应该在调用函数之前加载块。

# jquery - 提示框不弹出

> ID：10880093
> 
> 赞同：0
> 
> 时间：2012-06-04T10:53:38.660
> 
> 标签：jquery

我是 jQuery 新手，目前正在阅读 jquery for dummy，并试图执行本书的第一个示例：

```
<!DOCTYPE html PUBLIC “-//W3C//DTD XHTML 1.0 Strict//EN”  
“http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd”&gt;  
<html>  
<head>  
<title>My Test Page</title>  
<script type="text/javascript" src="js/jquery-1.7.2.js">  
$(document).ready(function(){  
alert(jQuery(‘img’).attr(‘alt’));  
});  
</script>  
</head>  
<body>  
<p>This is my test page.</p>  
 <img src= "images/home.gif" height="28" width="28" alt="This is a test  
image.">  
</body>  
</html> 
```

但是执行这个例子后，警告框并没有弹出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:55:33.893

```
<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    alert($('img').attr('alt'));
  });
</script> 
```

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:58:36.753

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T10:56:23.337

尝试改变

```
<script type="text/javascript" src="js/jquery-1.7.2.js">
$(document).ready(function(){
alert(jQuery(‘img’).attr(‘alt’));
});
</script> 
```

到

```
<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    alert(jQuery(‘img’).attr(‘alt’));
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T10:58:02.543

您有多个问题正在发生。

首先，您的示例显示“智能引号”（“/”）。这些不是计算世界中任何事物所理解的真实报价。

其次，您试图错误地使用脚本标签。

您需要将它们分成多个标签，一个用于嵌入，一个用于内联：

```
<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    alert(jQuery('img').attr('alt'));
});
</script> 
```

# asp.net-mvc-3 - 实体框架部署的站点 sql 触发问题

> ID：10880098
> 
> 赞同：0
> 
> 时间：2012-06-04T10:54:13.730
> 
> 标签：asp.net-mvc-3, entity-framework, triggers

我有一个在 Active Directory 环境中内部使用的站点。我们有 2 个数据库 _live 和 _audit

当用户通过其中一个视图输入数据时，当前记录被克隆以通过触发器进行审核（带有标记的操作，更新/删除和日期时间戳），并且实时数据库中的记录将更新为新的数据。嗯，这就是计划。

当我从本地开发解决方案运行此方案并将其指向实时数据库时，它可以 100% 工作，但在指向实时数据库的实时站点上，在 Web 服务器上，我不断收到以下错误。

```
An error occurred while updating the entries. See the inner exception for details.
 at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter) 
 at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options) 
 at Portal.Repositories.Product_Master_GroupingRepository.Save() in D:\.....:line 125
 at Portal.Controllers.Factory.Products.Prod_Info.PLUController.Edit(Int32 id, VM_Product_Master_Grouping viewModel) in D:\.....:line 200 
 at lambda_method(Closure , ControllerBase , Object[] ) 
 at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) 
 at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) 
 at System.Web.Mvc.Async.AsyncControllerActionInvoker.\u003c\u003ec__DisplayClass37.\u003c\u003ec__DisplayClass39.\u003cBeginInvokeActionMethodWithFilters\u003eb__33() 
 at System.Web.Mvc.Async.AsyncControllerActionInvoker.\u003c\u003ec__DisplayClass4f.\u003cInvokeActionMethodFilterAsynchronously\u003eb__49() 
```

其他一些观察

1.  来自实时站点的数据库交互通过我们创建的别名发生。
2.  如果我们禁用触发器，实时站点可以很好地保存，但不会发生日志记录。
3.  当触发器处于活动状态时，即使插入/更新“失败”，也会生成 SQL 语句。（但是当我从 SQL 探查器复制语句并在 SQL 中手动运行它时，记录会被更新和记录（通过触发器））
4.  我在别名没有的网络上获得了管理员权限（认为它可能与问题有关......但不确定）

如果有帮助的话，我可以提供一些代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:55:37.240

正如帕维尔建议的那样。阅读给出的例外。如果它显示“有关详细信息，请参阅内部异常”。去检查内部异常......它会帮助。（事实证明，我的异常记录器只记录了主要异常消息和堆栈跟踪，但是一旦我将内部异常添加到实时站点，我可以清楚地看到触发器失败，这证实了我对问题与安全相关的怀疑）

# asp.net-mvc-3 - MVC3，具有多种配置的 Unity 框架

> ID：10880102
> 
> 赞同：0
> 
> 时间：2012-06-04T10:54:26.897
> 
> 标签：asp.net-mvc-3, unity-container

我们有一个支持多公司的网站，需要为每家公司提供独特的业务逻辑。我们在控制器中使用构造函数依赖注入，但需要根据用户的公司交换正在使用的统一容器。我在想您可以在为当前 HttpContext 设置容器之前检查用户的 cookie。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:29:04.330

这是非常可行的。我要做的是设置一个“主”容器，然后为每个公司设置一个子容器。这样您就可以在一个地方拥有默认配置，然后您可以轻松地为每个公司提供客户，而无需每次都重新配置。以某种易于索引的方式保存子容器（可能是公司字典 -> 容器）。

然后，编写一个在管道早期运行的 HttpModule 实现，以确定请求是针对哪个公司的。使用它来确定要使用的适当容器。从那里你几乎已经准备好了。

作为您系统的客户，我会担心您没有充分隔离我的数据；不想在客户之间泄露信息并被起诉。

# project-management - Jira：跟踪在不同版本的组件中完成的功能的工作

> ID：10880104
> 
> 赞同：0
> 
> 时间：2012-06-04T10:54:36.350
> 
> 标签：project-management, jira

我们构建了一个由少量组件组成的产品。当我们计划发布具有一些新功能的项目的新版本时，我们将工作分解为相关组件中的子任务并计划组件的版本。但是，一些子任务（例如集成测试）仍保留在产品版本中。

由于 Jira 似乎缺乏跟踪此类项目的方法，因此跟踪该功能的进展有些困难。我为每个组件创建了产品版本列表和版本列表。

我希望我已经在多个 Jira 版本中完成了冲刺/发布范围的剩余工作的烧毁图表。或其他一些工具来可视化产品范围内的功能开发进度。

我一直在寻找某种方法来导出工作日志以在 Excel 中构建图表，但到目前为止还没有运气。我可以使用一些关于将 Jira 用于此类项目的建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-27T10:32:58.950

这是一个 jira 工具，可以可视化您想要的任何功能集合：forecast.geertjan.it/ 它允许您监控每个 sprint/周的功能进度。该列表基于您自己的过滤器。

# haskell - 使用 Yesod 高效上传大文件

> ID：10880105
> 
> 赞同：12
> 
> 时间：2012-06-04T10:54:40.250
> 
> 标签：haskell, yesod

我想用我的 Yesod 应用程序实现大文件上传。现在我有：

```
module Handler.File where

import Import

import System.Random
import System.FilePath
import Control.Monad
import qualified Data.ByteString.Lazy as LBS
import qualified Data.Text.Encoding

-- upload

uploadDirectory :: FilePath -- FIXME: make this configurable
uploadDirectory = "incoming"

randomFileName :: IO FilePath
randomFileName = do
  fname'base <- replicateM 20 (randomRIO ('a','z'))
  let fname = uploadDirectory </> fname'base <.> "bin"
  return fname

fileUploadForm :: Form (FileInfo, Textarea)
fileUploadForm = renderDivs $ (,)
    <$> fileAFormReq "Choose a file"
    <*> areq textareaField "What's on the file?" Nothing

getFileNewR :: Handler RepHtml
getFileNewR = do
  (formWidget, formEnctype) <- generateFormPost fileUploadForm
  defaultLayout $ do
       setTitle "Upload new file."
       $(widgetFile "file-new")

postFileNewR :: Handler RepHtml
postFileNewR = do
  user <- requireAuth
  ((result, formWidget), formEnctype) <- runFormPost fileUploadForm
  case result of
    FormSuccess (fi,info) -> do
                 fn <- liftIO randomFileName
                 liftIO (LBS.writeFile fn (fileContent fi))
                 let newFile = File (entityKey user) fn info (fileName fi) (fileContentType fi)
                 fid <- runDB $ insert newFile
                 redirect (FileViewR fid)
    _ -> return ()

  defaultLayout $ do
       setTitle "Upload new file."
       $(widgetFile "file-new") 
```

大部分都很好，除了几个问题：

1.  文件的最大大小约为 2 兆字节。我有一个修复，但这是正确的方法吗？我的修复是在我的应用程序的 Yesod 实例中覆盖 maximumContentLength 方法的默认实现，如下所示：

    maximumContentLength _ (Just (FileNewR _)) = 2 * 1024 * 1024 * 1024 -- 2 GB maximumContentLength _ _ = 2 * 1024 * 1024 -- 2 MB

2.  使用的内存量等于文件的大小。这确实是次优的。我想使用[http://hackage.haskell.org/packages/archive/wai-extra/1.2.0.4/doc/html/Network-Wai-Parse.html](http://hackage.haskell.org/packages/archive/wai-extra/1.2.0.4/doc/html/Network-Wai-Parse.html)中的 tempFileBackEnd但我不知道如何实际连接它进入我的请求并使其与表单逻辑（隐藏的 _token 字段等）一起使用。

3.  上传是“单次拍摄”：如何使其与基于 Flash/Html5 的上传器一起向用户显示进度的任何示例？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T02:58:05.890

1.  你的解决方案是正确的。maximumContentLength 设置的目的是允许您为需要更大上传的特定路由覆盖此值。

2.  这是 yesod-core 中当前文件处理设置的一个缺点。它目前被硬编码为使用内存文件上传。我们过去在邮件列表中讨论过这是次优的。我刚刚为此创建了一个[Github 问题](https://github.com/yesodweb/yesod/issues/358)，该修复将包含在 Yesod 1.1 中（虽然没有发布时间表）。

3.  我没有这方面的例子，对不起。

# android - 同一类中的 Android ExpandableListActivity 和 TabActivity

> ID：10880108
> 
> 赞同：0
> 
> 时间：2012-06-04T10:54:53.677
> 
> 标签：android, expandablelistview, expandablelistadapter

我正在尝试在我的程序中使用 ExpandableListActivity，但我已经在我的类中继承了 TabActivity。我不能进行多重继承，我需要在我的程序中同时使用 ExpandableListView 和 Tabs。我在这里检查了 Google 的 ExpandableListView 代码[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ExpandableList1.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ExpandableList1.html)。

但是在这里他们继承了我不能做的 ExpandableListActivity，因为我已经在我的班级中继承了 TabActivity。

我知道我可以使用 ListView 而无需在我的类中继承 ListActivity。我也可以对 ExpandableListView 类做同样的事情吗？如果是这样，那么任何人都可以向我提供任何示例代码来使用 ExtendableListView 而不继承活动吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:36:36.877

您可以拥有一个扩展 ExpandableListView 的自定义视图并在 TabActivity 中使用它。

可扩展的列表视图

```
 public class CustomExpListView extends ExpandableListView{
          /** Your code **/
     } 
```

托管选项卡的主要活动

```
public class MyTabActivity extends TabActivity{
    private TabHost tabhost;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          tabHost = getTabHost();
          tabHost.addTab(tabHost
                .newTabSpec("Tab 1")
                .setIndicator("Tab 1",
                        this.getResources().getDrawable(
                                R.drawable.tab_icon))
                .setContent(new Intent(this, Tab1.class)));

      /** Further code**/
    }
  } 
```

带有 exp 列表的选项卡的 XML 布局文件（选项卡 1）

```
/**Other layout stuff goes here**/
<com.jmango.nexus.view.ProductListView
        android:layout_width="fill_parent"
                    android:layout_height="wrap_content" 
                    android:groupIndicator="@drawable/group_indicator"
        android:childIndicator="@drawable/child_indicator"
        android:cacheColorHint="#00000000" 
                    android:divider="#00BBFF"
                    android:childDivider="@android:drawable/divider_horizontal_dark"
        android:smoothScrollbar="true"
        android:id="@+id/exp_list_view"/> 
```

在带有 exp 列表的选项卡的类中

```
CustomExpListView custExpListView = (CustomExpListView) this
            .findViewById(R.id.exp_list_view); 
```

您还可以扩展侦听器并对其进行自定义。

希望能帮助到你！

# jquery-ui - 设置 JQuery UI 对话框的相对位置

> ID：10880110
> 
> 赞同：1
> 
> 时间：2012-06-04T10:54:59.947
> 
> 标签：jquery-ui

以下是我的 JS：

```
ShowHoverServerImageModalWindow: function () {
    $("#divSettings").dialog({
        width: 200,
        height: 200,
        modal: false,
        title: "Server Image",
        autoOpen: false,
        closeOnEscape: true,
        draggable: false,
        resizeable: false,
        /*position: "my position!!", */
        buttons: [
                    {
                        text: "Close",
                        click: function () { $(this).dialog("close"); }
                    },
                  ]

    });

    //Show the dialog
    $("#divSettings").dialog('open');
}, 
```

我希望在我的光标所在的位置打开模态我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:03:58.713

来源： http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/) 和[http://docs.jquery.com/Tutorials:Mouse_Position](http://docs.jquery.com/Tutorials:Mouse_Position)

```
$("#divSettings").dialog({
  ...  //your previous code
  position: [e.pageX, e.pageY]
}); 
```

在谷歌上很容易找到。

或者就在您触发弹出窗口之前：

**编辑：**现在包括触发器。

```
$(document).click(function (e) {
  $("#divSettings").dialog('option', 'position', [e.pageX, e.pageY]);
  $("#divSettings").dialog('open');
}); 
```

# python - Python - 如果给定字典，则按值的顺序创建一个键列表

> ID：10880112
> 
> 赞同：2
> 
> 时间：2012-06-04T10:55:13.403
> 
> 标签：python

我有一本如下所示的字典。

```
ex1_pattern = {'ex':0,'country':1,'dow':2,'hod':3,'adx':4,'vid1':5} 
```

我想创建一个键列表，例如

```
ex1_pattern.keys() 
```

但是..我希望列表按排名顺序排列。例如：

```
[ex,country,dow,hod,adx,vid1] 
```

什么是最省时的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T10:56:12.470

```
sorted(ex1_pattern, key=ex1_pattern.get) 
```

# iphone - 来自选项卡按钮的 UIAlertView - 没有 Internet 连接

> ID：10880114
> 
> 赞同：1
> 
> 时间：2012-06-04T10:55:22.313
> 
> 标签：iphone, objective-c, xcode, cocoa, xcode4.3

再次寻求帮助...

我的应用程序目前有 2 个部分需要互联网连接，1 个是通过 Flickr 的照片库，另一个是 Twitter Feed，我想知道这是否是 UIAlertView 的正确代码......我可以让它工作一个按钮，仅此而已！

```
{
-(void)didTap_roundedRectButton1:(id)sender forEvent:(UIEvent *)event {
UIAlertView *alertView = [[UIAlertView alloc] init];
alertView.title = @"You are not connected to the Internet!";
alertView.message = @"Please check your connection and try again...";
[alertView addButtonWithTitle:@"Ok"];
[alertView show];
[alertView release];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:25:42.553

我认为您需要使用此示例，因为我已经使用它来检查是否有可用的网络以及设备是否连接到任何一个网络它在苹果的开发人员示例站点示例链接上[可用](https://github.com/AalokParikh/Reachability)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:41:20.650

你应该试试这个：

```
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"You are not connected to the Internet!" 
                                                  message:@"Please check your connection and try again..."
                                                 delegate:nil 
                                        cancelButtonTitle:@"OK" 
                                        otherButtonTitles: nil];

  [alertView show];
  [alertView release]; 
```

你能发布代码吗？如何创建 UIButton？

# sql-server - 确保 SProc 不会返回太多数据

> ID：10880116
> 
> 赞同：3
> 
> 时间：2012-06-04T10:55:31.520
> 
> 标签：sql-server, c#-4.0, datatable

我想知道如何确保从 SProc 返回并存储在数据表中的结果不会太大而无法在内存中处理。

我已经进行了挖掘，并[在 c# 中找到了以下 Find size of object instance in bytes，](https://stackoverflow.com/questions/1128315/find-size-of-object-instance-in-bytes-in-c-sharp)但所选答案建议不要这样做。

我假设这是一个之前已经解决的问题，所以我很感激任何指针。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:07:14.777

您可能想要实现分页。

为此，将参数添加到您的`@pageNum`并更改查询：`@pageSize``SP`

```
SELECT  *
FROM    (
        SELECT  *, ROW_NUMBER() OVER (ORDER BY whatever_field) rn
        FROM    (
--              here goes the old query
                ) q
        WHERE   rn BETWEEN @pageSize * @pageNum + 1 AND @pageSize * (@pageNum + 1)
        ) q
ORDER BY
        wnatever_field 
```

# c++ - C++ 函数依赖图

> ID：10880119
> 
> 赞同：4
> 
> 时间：2012-06-04T10:55:43.737
> 
> 标签：c++, graph

> **可能重复：**
> [C++ 代码依赖/调用图“查看器”？](https://stackoverflow.com/questions/9632347/c-code-dependency-call-graph-viewer)

我正在开发一个庞大的 C++ 代码库，目前我遇到了模块化代码的问题。我必须将我的代码分成单独的独立模块。

我能想到的一种方法是生成依赖图，然后进行更高级别的分类。另一种方法是从入口点（某个函数`abc()`）开始并生成一个函数调用树，其每个节点都将包含该函数所在文件的名称。此后，我可以使用一些脚本将这些功能提取到单独的模块中。

我的问题是，有什么工具可以帮助我完成这项任务吗？以前有没有人遇到过这样的问题。或者你能建议任何方法来实现同样的目标吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T11:19:24.490

模块化的第一级——我希望你已经做到了——是在*类*中构造你的代码。如果你的代码只是函数的集合——例如，C 加上一些语法糖——那么是时候*重写*你的代码了，因为再多的依赖图构建也无法将你从维护地狱中解救出来。

如果你*有*类，模块化应该是找到紧密合作的类（如`Customer`，`Order`和`Invoice`），并将它们与仅与它们松散耦合的类（如`Employer`或`Facility`）分开。然后从那里拿走。

模块化代码首先需要*思考*。没有自动程序可以替代它。实际上，从您所写的内容来看，我担心任何自动化过程都会使事情*变得更糟*，因为显然在这个项目上投入的思想太少了。即，您编写了 100 万行代码而没有考虑模块化，现在您希望模块化发生，但实际上*仍然*没有考虑它。你正走向史诗般的失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T13:12:19.420

要获得一些概述， [doxygen](http://www.doxygen.nl)可能会有所帮助。但是您必须使用 doxyfile 设置来生成依赖关系图，如果您的代码库很大，您应该从生成的方法中禁用动态内容。[Doxygen 可以使用graphviz](http://www.graphviz.org/)创建包含、继承、调用和调用者图。

这是简单的[例子](http://www.doxygen.nl/manual/examples/diagrams/html/class_e.html)，但它也适用于更大的例子。但是 doxygen 只会给你一个概述，没有重构能力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T12:26:43.240

听起来您正在寻找重构工具。试着看看这个问题的答案：[有一个有效的 C++ 重构工具吗？](https://stackoverflow.com/questions/1388469/is-there-a-working-c-refactoring-tool)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T11:25:26.233

我经常使用“了解 C/C++”来调查这些依赖关系。

如果代码库非常庞大并且您从头开始模块化，您可能需要查看其他一些工具，例如：

*   Cytoscape（可以获取“了解 C/C++”的输出以可视化依赖关系
*   莱蒂克斯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T14:02:00.057

一种方法会有点长，但您可以做的是删除一个方法并编译以查找依赖关系，然后将颓废组合到一个组件中。虽然这不能完全解决您的问题，但它是一种开始的方法。

# ios - 手绘应用程序中的撤消和重做功能

> ID：10880121
> 
> 赞同：2
> 
> 时间：2012-06-04T10:55:52.277
> 
> 标签：ios, uikit, core-graphics

我正在开发一个绘图应用程序，我可以用手指触摸绘图，现在我正在尝试实现、清除、撤消和重做功能，在我的视图控制器中，我有两个 IBAction 方法用于“clearAll”和“Undo”，我创建了一个名为 drawing.h 和 .m 的自定义类，我在其中编写了用于处理触摸事件的函数，以下是我的函数..

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
 {
    UITouch *touch = [touches anyObject]; 

     tempArray = [[NSMutableArray alloc]init];

    if ([touch tapCount] == 2) 
    {
        self.image = nil;
    }
     return;
} 

 currentlocation.location = [touch locationInView:self];
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    PointLocation *currentLocation1 = [[PointLocation alloc] init];
    currentLocation1.Location = [touch locationInView:self]; 

    UIGraphicsBeginImageContext(self.frame.size); 
    CGContextRef ctx = UIGraphicsGetCurrentContext();   
    [self.image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
    CGContextSetLineCap(ctx, kCGLineCapRound);
    CGContextSetLineWidth(ctx, 2.0);
    CGContextSetRGBStrokeColor(ctx, 1.0, 0.0, 0.0, 1.0);
    CGContextBeginPath(ctx);

    CGContextMoveToPoint(ctx, currentlocation.Location.x, currentlocation.Location.y);
    CGContextAddLineToPoint(ctx, currentLocation1.Location.x, currentLocation1.Location.y);
    CGContextStrokePath(ctx);

    CGContextSetFlatness(ctx, 0.1);

    CGContextSetAllowsAntialiasing(ctx, true);
    self.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();  

    currentlocation = currentLocation1;   

    **[tempArray addObject:[NSArray arrayWithObjects:currentlocation,currentLocation1, nil]];  

    NSLog(@"%i",[tempArray count]);**      
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {   

    UITouch *touch = [touches anyObject]; 

    PointLocation *currentLocation1 = [[PointLocation alloc] init];
    currentLocation1.Location = [touch locationInView:self];

    UIGraphicsBeginImageContext(self.frame.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();   
    [self.image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
    CGContextSetLineCap(ctx, kCGLineCapRound);
    CGContextSetLineWidth(ctx, 2.0);
    CGContextSetRGBStrokeColor(ctx, 1.0, 0.0, 0.0, 1.0);
    CGContextBeginPath(ctx);
    CGContextMoveToPoint(ctx, currentlocation.Location.x, currentlocation.Location.y);
    CGContextAddLineToPoint(ctx, currentLocation1.Location.x, currentLocation1.Location.y);
    CGContextStrokePath(ctx);
    self.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    currentlocation = currentLocation1;    

    **[tempArray addObject:[NSArray arrayWithObjects:currentlocation,currentLocation1, nil]];    
    NSLog(@"%i",[tempArray count]);**  

} 
```

在上面的代码中，我将所有 CGPoints 添加到一个数组中，数组中填充了点，现在我应该如何执行撤消功能？

所以请朋友们帮帮我..

问候兰吉特

# linux - Glance 索引错误 Openstack

> ID：10880126
> 
> 赞同：0
> 
> 时间：2012-06-04T10:56:25.063
> 
> 标签：linux, openstack

当我使用 Souce Code 配置 Openstack 时，有一个关于“Glance Index”的问题，得到错误为 Blow

```
 Failed to show index. Got error:
    Response from Keystone does not contain a Glance endpoint. 
```

但是当执行 keystone endpoint-list 有结果时，

有没有同样的问题？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:35:19.653

在 OpenStack 开发邮件列表存档中有几个关于此的主题：

1.  [Glance 无法找到响应 keystone 的端点](http://openstack.markmail.org/thread/nhlnxjj7zmsumgms)
2.  [带有远程浏览端点的 Essex keystone](http://openstack.markmail.org/thread/duunpxq235xgfaoz)

从第一个线程开始，您是否尝试过仔细检查 Glance 端点是否注册在 Keystone 的“图像”服务下？

您可能必须进入数据库来确认这一点。您可能必须使用“keystone endpoint-create”在其中放置一个有效的端点。

# concrete5 - Concrete5 - 为一个区域强制使用某种块类型

> ID：10880131
> 
> 赞同：3
> 
> 时间：2012-06-04T10:56:56.637
> 
> 标签：concrete5

反正有没有强制某个区域使用某种块类型？例如：

```
$a = new Area();
$a->setAllowedBlocks(array('autoNave','content')); 
$a->display($c) 
```

有没有类似的东西：`setAllowedBlocks`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:50:52.693

不幸的是，没有办法按照您的要求执行此操作。可以通过打开高级权限来设置允许的块类型：http: [//www.concrete5.org/documentation/general-topics/simple-permissions#advanced](http://www.concrete5.org/documentation/general-topics/simple-permissions#advanced)

但请注意，对于这样一个简单的要求，这可能是多余的（取决于您希望限制您所在区域的允许块类型的严重程度）。

# sql - 服务器状态代码：302 找到测试值：1 EXEC XP_

> ID：10880135
> 
> 赞同：0
> 
> 时间：2012-06-04T10:57:00.933
> 
> 标签：sql, sql-server, code-injection

我阅读了很多关于 SQL 注入的帖子。

我理解 302 代码并不一定意味着注入成功。

我改变了我`header(loc ... )`的`header('HTTP/1.1 404 Not Found');`，它确实告诉我攻击失败了。但我仍然得到一条可疑的 302 代码：

> 服务器状态代码：302 找到测试值：

我无法不知道`1 EXEC XP_`是怎么回事

有人可以帮助我理解这一点吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:30:07.387

我正在使用 SQL 注入我进行类似的大量测试。我正在运行一个 ubuntu 机器，它仍然告诉我 1 EXEC XP_ 工作但我没有使用 MSSQL。我试图弄清楚为什么它会给我 302 错误。我尝试手动执行注射，但页面似乎输出正常。

根据我对 302 错误的理解，它似乎与页面重定向有关，例如，如果您的 php 在用户输入值并发送表单后有重定向。我认为将重定向误认为是 302 错误。或类似的规定。

抱歉，我知道这不是很清楚，但它是我能够从我的结果中收集到的。

如果有人能确切地弄清楚发生了什么，将不胜感激。

# ant - gradle - 多模块项目 - ant 错误的执行目录

> ID：10880136
> 
> 赞同：0
> 
> 时间：2012-06-04T10:57:01.007
> 
> 标签：ant, gradle, antbuilder

我有一个由 gradle 管理的多模块项目。目录结构如下：

*   监控
    *   客户
    *   服务器

当我在监控级别调用“gradle war”时，我得到以下异常：

“监控/js 不存在。”

来自客户的 build.gradle：

```
task copyJs << {

     'mkdir src/main/webapp/js'.execute()

     def ant = new groovy.util.AntBuilder()
     ant.copy(todir: 'src/main/webapp/js') {
          fileset(dir: 'js') {
               include(name: '**/*.js')
          }
     }
} 
```

发生异常是因为提到的任务是在项目的根级别上执行的。如何将其更改为在适当的（客户端）级别上执行？如何更改使用的 ant 任务的 basedir？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:13:31.027

另一种选择是使用复制任务：

```
task copyJs(type:Copy){
    into('src/main/webapp/js')
    from('js') {
        include '**/*.js'
    }
} 
```

这样做的好处是，如果输出目录尚不存在，则会自动创建它。使用复制任务而不是上述答案中的复制操作的另一个好处是，复制任务支持增量构建执行（最新检查）。

问候，勒内

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:40:58.560

应该按照[此处的说明进行](http://forums.gradle.org/gradle/topics/change_gradle_working_directory_in_a_standard_operating_system_way_where_gradle_is_launched_and_not_where_the_build_gradle)

```
task copyJs << {

    file('src/main/webapp/js').mkdir()

    copy {
        into 'src/main/webapp/js'
        from('js') {
            include '**/*.js'
        }
    }
} 
```

# java - Java 枚举与迭代器

> ID：10880137
> 
> 赞同：12
> 
> 时间：2012-06-04T10:57:16.233
> 
> 标签：java

`Enumeration`不扔`ConcurrentModificationException`，为什么？

请参见下面的代码。

```
public static void main(String[] args) {

    Vector<String> v=new Vector<String>();
    v.add("Amit");
    v.add("Raj");
    v.add("Pathak");
    v.add("Sumit");
    v.add("Aron");
    v.add("Trek");

    Enumeration<String> en=v.elements();

    while(en.hasMoreElements())
    {
        String value=(String) en.nextElement();
        System.out.println(value);
        v.remove(value);

    }

} 
```

它只打印：

```
阿米特
帕塔克
阿隆

```

为什么会是这样的行为。我们可以说这`Enumerator`是线程安全的。

**编辑：**使用 Iterator 时，它会抛出`ConcurrentModificationException`单线程应用程序。

```
public static void main(String[] args) {

    Vector<String> v=new Vector<String>();
    v.add("Amit");
    v.add("Raj");
    v.add("Pathak");
    v.add("Sumit");
    v.add("Aron");
    v.add("Trek");

    Iterator<String> it=v.iterator();
    while(it.hasNext())
    {
        String value=(String) it.next();
        System.out.println(value);
        v.remove(value);
    }
} 
```

请检查。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T11:28:56.093

请注意，ConcurrentModificationException 与多线程或线程安全意义上的并发无关。有些集合允许并发修改，有些则不允许。通常你可以在文档中找到答案。但是并发并不意味着由不同的线程并发。这意味着您可以在迭代时修改集合。

ConcurrentHashMap 是一种特殊情况，因为它被明确定义为线程安全且在迭代时可编辑（我认为所有线程安全集合都是如此）。

无论如何，只要您使用单个线程来迭代和修改集合，ConcurrentHashMap 就是您的问题的错误解决方案。您错误地使用了 API。您应该使用[Iterator.remove()](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html#remove%28%29)删除项目。或者，您可以在迭代和修改原始集合之前制作集合的副本。

编辑：

我不知道任何引发 ConcurrentModificationException 的枚举。但是，并发修改的行为可能不是您所期望的。正如您在示例中看到的，枚举跳过列表中的每个第二个元素。这是因为无论删除如何，它的内部索引都会增加。所以这就是发生的事情：

*   en.nextElement() - 从 Vector 返回第一个元素，将 index 增加到 1
*   v.remove(value) - 从 Vector 中删除第一个元素，将所有元素左移
*   en.nextElement() - 从 Vector 返回第二个元素，现在是“Pathak”

Iterator 的快速失败行为可以保护您免受此类事情的影响，这就是为什么它通常比 Enumberation 更可取。相反，您应该执行以下操作：

```
Iterator<String> it=v.iterator();
while(it.hasNext())
{
    String value=(String) it.next();
    System.out.println(value);
    it.remove(); // not v.remove(value); !!
} 
```

或者：

```
for(String value : new Vector<String>(v)) // make a copy
{
    String value=(String) it.next();
    System.out.println(value);
    v.remove(value);
} 
```

第一个当然更可取，因为只要您按预期使用 API，您就不需要副本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T11:16:50.677

> 枚举不会抛出 ConcurrentModificationException ，为什么？

因为被调用的代码中没有引发此异常的路径。*编辑：*我指的是 Vector 类提供的实现，而不是一般的 Enumeration 接口。

> 为什么会是这样的行为。我们可以说 Enumerator 是线程安全的吗？

*从某种意义上说，执行的代码是正确同步*的，它是线程安全的。但是，我不认为你的循环产生的结果是你想要的。

您输出的原因是 Enumeration 对象维护一个计数器，该计数器在每次调用`nextElement()`. 此计数器不知道您调用`remove()`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T11:11:31.273

[正如您在http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html)中阅读的那样，仅针对迭代器实现了引发 ConcurrentModificationException 的快速失败行为

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-04T11:30:49.923

这里的并发修改与线程无关。

这里的并发仅仅意味着您在迭代集合*时正在修改集合。*（在您的示例中，这发生在同一个线程中。）

在这种情况下，集合的迭代器和枚举可以抛出`ConcurrentModificationException`，但不是必须的。那些确实表现出*快速失败的*行为。显然，枚举`Vector`并不是快速失败的。

*线程安全*显然以某种方式涉及多个线程。`Vector`仅在其操作（如添加、获取等）是同步的意义上是线程安全的。这是为了避免当一个线程正在添加一个元素而同时另一个线程试图删除一个元素时的不确定行为。

现在，当一个线程在结构上修改您的集合而另一个线程正在对其进行迭代时，您必须同时处理线程安全和并发修改问题。在这种情况下，可能在一般情况下，最安全的是不要依赖`ConcurrentModificationException`被抛出。最好选择适当的集合实现（例如线程安全的实现）并避免/禁止自己进行并发修改。

一些迭代器允许通过迭代器本身添加/设置/删除元素。如果您确实需要并发修改，这可能是一个不错的选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T11:40:29.477

简短的回答：它`bonus feature`是在枚举已经存在之后发明的，所以枚举器不抛出它的事实并不表明有什么特别的。

长答案：
来自维基百科：

> JDK 1.2 之前的集合实现 [...] 不包含集合框架。对 Java 对象进行分组的标准方法是通过数组、Vector 和 Hashtable 类，遗憾的是它们不容易扩展，并且没有实现标准的成员接口。为了满足对可重用集合数据结构的需求 [...] 集合框架主要由 Joshua Bloch 设计和开发，并在 JDK 1.2 中引入。

`ConcurrentModificationException`当 Bloch 团队这样做时，他们认为引入一种新机制是一个好主意，当他们的集合在多线程程序中没有正确同步时会发出警报 ( )。关于这个机制有两点需要注意：1) 不能保证捕获并发错误——只有在幸运的情况下才会抛出异常。2）如果您使用单个线程（如您的示例）滥用集合，也会引发异常。

因此，一个集合 `ConcurrentModificationException`在被多个线程访问时不抛出一个也不意味着它是线程安全的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-04T14:53:33.060

这取决于您如何获得枚举。请参阅以下示例，它确实抛出`ConcurrentModificationException`：

```
import java.util.*;

public class ConcurrencyTest {  
    public static void main(String[] args) {  

        Vector<String> v=new Vector<String>();
        v.add("Amit");
        v.add("Raj");
        v.add("Pathak");
        v.add("Sumit");
        v.add("Aron");
        v.add("Trek");

        Enumeration<String> en=Collections.enumeration(v);//v.elements(); 

        while(en.hasMoreElements())
        {
            String value=(String) en.nextElement();
            System.out.println(value);
            v.remove(value);
        }              

        System.out.println("************************************");

        Iterator<String> iter = v.iterator();  
           while(iter.hasNext()){  
              System.out.println(iter.next());  
              iter.remove();  
              System.out.println(v.size());  
        }  
    }  
} 
```

枚举只是一个接口，它的实际行为是依赖于实现的。Collections.enumeration() 调用中的 Enumeration 以某种方式包装了迭代器，因此它确实是快速失败的，但通过调用 Vector.elements() 获得的 Enumeration 不是。

not-fail-fast Enumeration 可能会**在未来的不确定时间引入任意的、非确定性的行为**。例如：如果你把main方法写成这样，它会在第一次迭代后抛出java.util.NoSuchElementException。

```
public static void main(String[] args) {  

        Vector<String> v=new Vector<String>();
        v.add("Amit");
        v.add("Raj");
        v.add("Pathak");

        Enumeration<String> en = v.elements(); //Collections.enumeration(v);

        while(en.hasMoreElements())
        {   
            v.remove(0);
            String value=(String) en.nextElement();
            System.out.println(value);
        }       
    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-04T11:00:43.000

删除`v.remove(value)`，一切都会按预期工作

**编辑：**对不起，误读了那里的问题

不过，这与线程安全无关。你甚至不是多线程，所以 Java 没有理由为此抛出异常。

如果您在更改矢量时需要例外，请使其不可修改

# c# - 如何在 c# 中的 RichTextBox 中的特定位置设置文本

> ID：10880138
> 
> 赞同：1
> 
> 时间：2012-06-04T10:57:18.243
> 
> 标签：c#, wpf, richtextbox

我只想`text in particular place in RichtextBox`在 wpf 中设置我的：

```
richTextBox1.SelectionLength = text_length; 
```

不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:42:40.523

请试试这个。我希望它会帮助你。

```
RichTextBox richtexbox=(RichTextBox)(FindResource("richbox1"));      
richtexbox.Padding = new Thickness(15, 10, 12, 15); 
```

# objective-c - unsigned char alloc 和免费问题

> ID：10880142
> 
> 赞同：2
> 
> 时间：2012-06-04T10:57:26.933
> 
> 标签：objective-c, free, alloc, unsigned-char

我对一件奇怪的事情感到困惑......我有一个 unsigned char 数组......我使用 calloc 分配它并在其中记录一些字节数据......但是当我释放这个 unsigned char 并再次分配它时，我看到它在内存中保留了上次分配的相同地址。我明白为什么....但是我不明白为什么我第二次尝试在那里写入的数据没有被写入......第一次写入的数据被写入......有人可以解释一下吗？ ？？？

`unsigned char *rawData = (unsigned char*) calloc(height * width * 4, sizeof(unsigned char));`

这就是我分配它的方式....实际上我的问题是由于这种分配，每2秒发生一次我有内存泄漏...但是当我尝试释放分配的内存扇区时，会发生上述情况... .:(

请如果有人可以帮助我......我会很高兴......这是代码......

```
- (unsigned char*) createBitmapContext:(UIImage*)anImage{

CGImageRef imageRef = [anImage CGImage];
NSUInteger width = CGImageGetWidth(imageRef);
NSUInteger height = CGImageGetHeight(imageRef);
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

unsigned char *rawData = (unsigned char*) calloc(height * width * 4, sizeof(unsigned char));
bytesPerPixel = 4;
bytesPerRow = bytesPerPixel * width;

NSUInteger bitsPerComponent = 8;
CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                             bitsPerComponent, bytesPerRow, colorSpace,
                                             kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

CGColorSpaceRelease(colorSpace);
CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);

CGContextRelease(context);

imageRef=nil;
return rawData; } 
```

在这段代码中没有我释放（rawData）的部分，因为我无法在这个方法中释放它，所以我尝试全局定义 rawData 并在调用这个方法后释放它......但没有什么有趣的......

请如果有人可以帮助我......我会很高兴......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:38:53.750

好的，所以这个方法将 a 渲染`UIImage`到一个新分配的字节缓冲区并将缓冲区返回给调用者。由于您使用 分配它`calloc`，它将被初始化为 0，然后被图像内容覆盖。

> 当我释放这个 unsigned char 并再次分配它时，我看到它在内存中保留了上次分配的相同地址

是的，不能保证缓冲区在内存中的位置。假设您调用`free()`返回的内存，请求完全相同的大小很可能会返回相同的缓冲区。但是 - 你如何验证内容不是第二次写入？缓冲区中有*什么*？

> 我的问题是，由于这种分配，每 2 秒发生一次，我有内存泄漏......但是当我尝试释放分配的内存扇区时，会发生上述情况......:(

如果有泄漏，很可能是在调用该方法的代码中，因为这里没有明显的泄漏。语义显然是调用者负责释放缓冲区。那么这是怎么做到的呢？

另外，您是否正在验证`CGBitmapContext`是否正确创建了？某些创建标志或参数可能会导致错误。所以添加一个有效的检查`context`（至少不是零）。这可以解释为什么内容没有被覆盖。

确保您的内存得到最新更新的一种简单方法是将您自己的数据写入其中。您可以用计数器填充缓冲区，并在方法之外验证这一点。例如，就在您返回之前`rawData`：

```
static unsigned updateCounter = 0;
memset(rawData, updateCounter & 0xff, width*height*4); 
```

这将循环将 0-255 写入缓冲区，您可以轻松验证。

另一件事 - 你想用这段代码实现什么？可能有一种更简单的方法可以实现您想要实现的目标。返回没有元数据的裸缓冲区不一定是管理图像的最佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:48:20.127

所以伙计们，我解决了这个问题......第一件事我已经将 createBitmapContext 方法更改为此

```
- (void) createBitmapContext:(UIImage*)anImage andRawData:(unsigned char *)theRawData{

CGImageRef imageRef = [anImage CGImage];
NSUInteger width = CGImageGetWidth(imageRef);
NSUInteger height = CGImageGetHeight(imageRef);
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
//    unsigned char *rawData = (unsigned char*) calloc(height * width * 4, sizeof(unsigned char));
bytesPerPixel = 4;
bytesPerRow = bytesPerPixel * width;

NSUInteger bitsPerComponent = 8;
CGContextRef context = CGBitmapContextCreate(theRawData, width, height,
                                             bitsPerComponent, bytesPerRow, colorSpace,
                                             kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

CGColorSpaceRelease(colorSpace);
CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);

CGContextRelease(context);
imageRef=nil;
//    return theRawData;} 
```

然后...除此之外，我错过了将 newRawData 分配给 oldRawData 的部分，因此我有两个指向同一内存地址的指针...所以问题就从这里来了...我将此分配部分更改为此 memcpy( rawDataForOldImage, rawDataForNewImage,newCapturedImage.size.width*newCapturedImage.size.height*4); 到这里问题就解决了......谢谢大家

# asp.net-mvc-3 - 使用客户端库时服务堆栈中的序列化错误

> ID：10880147
> 
> 赞同：1
> 
> 时间：2012-06-04T10:57:42.307
> 
> 标签：asp.net-mvc-3, servicestack

我有一个 ServiceStack REST 服务（PUT 和 POST），我用 fiddler 测试过，如果没有出现错误，我会返回

```
new HttpResult(HttpStatusCode.OK); 
```

现在我正在使用服务堆栈客户端测试相同的 REST 服务，我有：

```
var client = new XmlServiceClient("url"));
client.Post<ChangeServerLicenseDto>("", new ChangeServerLicenseDto()
         {ServerName = model.ServerName}); 
```

当我这样做时，我得到了 REST 服务的异常

```
 return new HttpResult(HttpStatusCode.OK) 
```

并且引发的错误是：

```
 500 (Error in line 1 position 76\. Expecting element 'ChangeServerLicense'
      from namespace ''.. Encountered 'Element'  with name 'HttpStatusCode',
      namespace 'http://schemas.datacontract.org/2004/07/System.Net'.) 
```

我的客户端代码在 MVC 操作方法 (POST) 中。

我的 RestService 数据合同是：

```
[DataContract(Name = "ChangeServerLicense", Namespace = "")]
[RestService("url", "POST", "application/xml")]
public class ChangeServerLicenseDto
{
    [DataMember(Name = "ServerName", Order = 1)]
    public string ServerName { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:29:03.380

发出成功响应信号的约定是返回一个空的 Response DTO（默认情况下返回 200 OK）。也`Send<TResponse>(...)`做一个 POST 所以如果你不想在请求中包含 url，使用`Send`它将**POST**请求到[自动预定义的路由](http://www.servicestack.net/ServiceStack.Hello/#predefinedroutes)：

```
var client = new XmlServiceClient("url"));
client.Send<ChangeServerLicenseDtoResponse>(
    new ChangeServerLicenseDto {ServerName = model.ServerName}); 
```

否则，如果您仍想使用`.Post<T>(...)`包含挂载您的服务的自定义路由的 URL。

注意：我通常不喜欢`Dto`在 DTO 上使用后缀，这是您的服务中最重要的 API - 我在[这里更详细地解释了原因](https://groups.google.com/d/msg/servicestack/OsBi5wyg5-A/4VHllY9jK_MJ)。

# python - 如何在 Python 中评估数组的某个部分？

> ID：10880154
> 
> 赞同：2
> 
> 时间：2012-06-04T10:58:31.207
> 
> 标签：python, arrays

```
turns = [4, 6, 2, 8, 1, 9, 5, 5, 3, 7, 6, 8, 2, 4]
turns.append([1, 1, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4])
turns.append([4, 6, 2, 8, 1, 9, 6, 5, 3, 7, 6, 8, 2, 4]) 
turns.append([0, 0, 26, 24, 3, 7, 5, 4, 25, 25, 21, 21, 21, 21])
turns.append([0, 0, 0, 0, 7, 3, 8, 2, 0, 0, 29, 29, 29, 29])
turns.append([0, 0, 0, 0, 26, 24, 0, 0, 0, 0, 0, 0, 0, 0])

arrayValue = turns[j][i]
    if arrayValue == turnCurrently: 
```

```
Error Message:
Traceback (most recent call last):
  File "D:/a45d32f947055690c690d94f88/TicTacToe", line 183, in <module>
    arrayValue = turns[j][i]
TypeError: 'int' object is not subscriptable 
```

我的问题本质上是，我想测试是否`turns[j][i]`等于`turnCurrently`但我一直遇到这个可下标的问题，我无法在任何我认为这是一个非常重要的问题的地方找到答案。在此先感谢，理查德

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T11:00:18.027

试试这个来构建一个二维数组（一个“矩阵”）：

```
turns = [[4, 6, 2, 8, 1, 9, 5, 5, 3, 7, 6, 8, 2, 4]]
turns.append([1, 1, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4])
turns.append([4, 6, 2, 8, 1, 9, 6, 5, 3, 7, 6, 8, 2, 4]) 
turns.append([0, 0, 26, 24, 3, 7, 5, 4, 25, 25, 21, 21, 21, 21])
turns.append([0, 0, 0, 0, 7, 3, 8, 2, 0, 0, 29, 29, 29, 29])
turns.append([0, 0, 0, 0, 26, 24, 0, 0, 0, 0, 0, 0, 0, 0]) 
```

或者简单地说：

```
turns = [[4, 6, 2, 8, 1, 9, 5, 5, 3, 7, 6, 8, 2, 4],
         [1, 1, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4],
         [4, 6, 2, 8, 1, 9, 6, 5, 3, 7, 6, 8, 2, 4],
         [0, 0, 26, 24, 3, 7, 5, 4, 25, 25, 21, 21, 21, 21],
         [0, 0, 0, 0, 7, 3, 8, 2, 0, 0, 29, 29, 29, 29],
         [0, 0, 0, 0, 26, 24, 0, 0, 0, 0, 0, 0, 0, 0]] 
```

如您所见，矩阵只不过是列表的列表。你一开始并没有建立一个矩阵——第一行*也*必须是一个列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T11:03:07.610

你的阵列有一个奇怪的布局。前 14 个元素是整数，然后是其他几个数组。

所以你基本上拥有的是：

```
[4, 6, 2, ..., 2, 4, [1, 1, 2, ...], [4, 6, ...], ...] 
```

您可以通过将第一个分配更改为：

```
turns = [[4, 6, 2, 8, 1, 9, 5, 5, 3, 7, 6, 8, 2, 4]] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T11:04:05.893

打印出变量的内容以查看发生了什么通常会很有帮助：

```
>>> turns
[4, 6, 2, 8, 1, 9, 5, 5, 3, 7, 6, 8, 2, 4, [1, 1, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4], [0, 0, 26, 24, 3, 7, 5, 4, 25, 25, 21, 21, 21, 21], [0, 0, 0, 0, 7, 3, 8, 2, 0, 0, 29, 29, 29, 29], [0, 0, 0, 0, 26, 24, 0, 0, 0, 0, 0, 0, 0, 0]] 
```

如您所见，该列表的前几个元素是简单整数，而不是整数列表。所以当`j`它很小时，它会选择一个`int`并尝试应用`[i]`它——但失败了。

这种情况下的解决方案是将第一个元素放入一个额外的列表中：

```
turns = [[4, 6, 2, 8, 1, 9, 5, 5, 3, 7, 6, 8, 2, 4]]
turns.append( … ) 
```

另一种方法是将您的列表初始化为一个空列表，并附加第一个子列表：

```
turns = []
turns.append([4, 6, 2, 8, 1, 9, 5, 5, 3, 7, 6, 8, 2, 4])
turns.append( … ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T11:01:49.013

更改`turns = [4, 6, 2, 8, 1, 9, 5, 5, 3, 7, 6, 8, 2, 4]`为

```
turns = [[4, 6, 2, 8, 1, 9, 5, 5, 3, 7, 6, 8, 2, 4]] 
```

# sql - 来自 SQL Server 的范围行

> ID：10880158
> 
> 赞同：0
> 
> 时间：2012-06-04T10:58:41.903
> 
> 标签：sql, sql-server-2008-r2

我想使用 T-SQL 创建分页。如何从第 11 行到第 20 行选择 10 行？

我知道我可以用 C# 等来做到这一点。但我的问题是关于 SQL Server。

这是表格：

```
CREATE TABLE EarlyAccess(
    [EarlyAccessUserId] [int] IDENTITY(1,1) NOT NULL,
    [FirstName] [nvarchar](50) NOT NULL,
    [Lastname] [nvarchar](50) NOT NULL
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T11:00:36.527

```
SELECT  *
FROM    (
        SELECT  *, ROW_NUMBER() OVER (ORDER BY earlyAccessUserId) rn
        FROM    earlyAccess
        ) q
WHERE   rn BETWEEN 11 AND 20
ORDER BY
        earlyAccessUserId 
```

`SQL`除非您明确指定排序，否则不存在第 n 条记录。

# python - 如何测试对象是否是正则表达式模式？

> ID：10880159
> 
> 赞同：1
> 
> 时间：2012-06-04T10:58:42.510
> 
> 标签：python, regex, types

> **可能重复：**
> [python中编译的正则表达式对象的类型](https://stackoverflow.com/questions/6102019/type-of-compiled-regex-object-in-python)

通常我会这样做`isinstance(obj, ThePatternType)`，但我看不到如何获得`ThePatternType`.

当我创建一个已编译的正则表达式模式的实例时，该类型给出：

```
type(pattern)
<type '_sre.SRE_Pattern'> 
```

但由于某种原因我不能做`from _sre import SRE_Pattern`

我意识到我可以做到，`ThePatternType = type(re.compile(r'.'))`但这似乎是错误的！

# iphone - 如何禁用可可点击时的控件和暂停行为？

> ID：10880160
> 
> 赞同：1
> 
> 时间：2012-06-04T10:58:47.080
> 
> 标签：iphone, ios, cocoa, video

在 m 项目中，我有一个窗口，中间有一个 QuickTime 电影视图对象。我已将电影视图配置为不显示任何控件（播放、暂停、停止等）。我可以通过代码很好地加载和播放电影。当用户点击正在播放的动作时，电影会暂停。

有没有办法禁用这种暂停行为？

# php - magento 刷新缓存存储删除什么会影响产品对象

> ID：10880161
> 
> 赞同：0
> 
> 时间：2012-06-04T10:59:02.270
> 
> 标签：php, magento

通过刷新缓存存储删除缓存时遇到错误。当我将产品添加到购物车时的问题会导致调用非对象上的成员函数。我检查了产品对象数据，似乎缺少方法。

产品类型是捆绑包，我使用自定义代码添加到购物车。缺少的方法来自捆绑产品，而不是主要产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:05:46.357

我不认为删除缓存会有这样的副作用，我建议你禁用缓存并调试它。

# c# - C#，为什么 virtual、abstract 和 override 关键字对静态函数无效？

> ID：10880167
> 
> 赞同：1
> 
> 时间：2012-06-04T10:59:38.703
> 
> 标签：c#, static

为什么 virtual、abstract 和 override 关键字对静态函数无效？其背后的逻辑是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:03:09.437

通过虚拟分派的多态性是通过使用目标实例的实际运行时类型来完成的，即实际`obj`在`obj.Bar(...args...)`. 现在：如果你没有实例，讨论多态`obj.`是没有*意义的。*

静态方法是用静态调用调用的，而不是虚拟调用；关于调用什么方法的决定*完全是*在编译时做出的。没有任何决定要做。它归结为`SomeType`in `SomeType.SomeMethod(...args...)`。当然，您仍然可以在虚拟方法中的方法之间调用 - 您仍然可以访问`SomeBaseType.SomeOtherStaticMethod(...)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:53:17.590

事实上，存在将多态性概念扩展到静态方法的语言。不过，C# 不是其中一种语言。你不能通过某种类引用调用静态函数，所以你实际上没有机会在那里做任何“多态”的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:59:15.343

关键字`virtual`,`abstract`和`override`与继承的方法一起使用。静态方法不会被继承。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T11:02:46.950

静态方法实际上只是特定类的一部分，作为方法的占位符。静态函数不与声明它们的类共享生命周期或范围，它们实际上并不是对象模型的一部分。

这些关键字（抽象、虚拟、覆盖）与继承模型相关，在静态上下文中没有意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T11:09:57.647

您不应该通过实例访问静态方法。 ~~当你这样做时，C# 并不关心变量中的对象类型。它取决于变量的类型。也就是说，`MyType obj = null; obj.StaticMethod();`有效，因为*从不咨询该对象*。~~从头开始；在我的 Visual Studio 版本中，使用默认设置，您甚至*不允许*通过实例使用静态方法。无论哪种方式，这意味着`virtual static`不会做任何有价值的事情；`virtual`并`override`通过咨询对象来决定使用什么方法，并且使用`static`，您只有类型（实际上是硬编码的，因此对多态性毫无用处）。 `abstract`基本上是“`override`在你的课堂上需要一个”，它'

我想 C# 的人让你假装静态的东西可以被覆盖并不难……但它不能。为了调用它，您必须指定类型（明确地喜欢`MyType.StaticMethod()`~~，或隐含地如上所述~~）。他们选择明确表示你不能拥有虚拟静态方法并让它像你期望的那样工作，让你根本无法做到这一点。

# css - 填充 IE、FF、Chrome 的问题

> ID：10880168
> 
> 赞同：0
> 
> 时间：2012-06-04T10:59:42.160
> 
> 标签：css

大家好，我在使用我的联系页面的输入框填充时遇到问题

我正在使用表格，我似乎无法为我的输入框获得正确的填充或边距

这是网站：217.120.183.184/cdweb/Contact/

请看一下我可以尝试解决的问题

问候，

达伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:25:27.467

我会从头开始，你有嵌套的表格和各种各样的东西，这（技术上）是不好的做法，我会考虑使用 DIV 和 CSS 来绝对对齐你的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:32:19.623

纯粹使用表格和内联样式（你有宽度和高度等）是一种非常过时的做法，调试这种遗留设计并不是给你一些规则的情况，而更像是说'你需要多学一点”。

桌子有它们的位置——如果没有它们，仍有许多技巧几乎是不可能的——但你真的需要掌握一些更好的技巧。

一个好的方法可能是花钱请人用干净的 css 和 html 为您设置页面，然后看看他们是如何做到的。有成千上万的服务会为你做这件事，而且你的设计并不复杂，所以应该很便宜。

问题是 - 这似乎是一个销售设计服务的网站。如果你在设计这样一个简单的设计时遇到了很多麻烦，那么在未来的某个时候，你会遇到很多困难，除非你咬紧牙关，开始学习适当的、现代的技术。

它比看起来简单得多 - 让事情变得超级简单，**并且不要忘记使用一个好的 CSS reset**。重置将删除作为浏览器用户代理样式一部分的所有表格边距和填充，并让您准确定义它的外观。

[Eric Meyer 的 CSS 重置](http://meyerweb.com/eric/tools/css/reset/)- 没有命名空间，通常跨项目重置。

[YUI3 重置](http://yuilibrary.com/yui/docs/cssreset/)- 命名空间，因此您可以根据需要选择性地将重置应用于页面块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:29:32.027

更正您的表格布局，您不能在其上添加尽可能多的 td 和 colspan 。

# r - 在R中的循环中使用联合函数

> ID：10880171
> 
> 赞同：1
> 
> 时间：2012-06-04T11:00:06.667
> 
> 标签：r, loops, union

B和C。

```
A <- 1:5
B <- 3:7
C <- 6:10 
```

现在我想合并这三个向量。我正在这样做：

```
uni <- union (A,union(B,C)) 
```

但是如果有三个以上的向量我需要合并 ??

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T11:05:09.897

将它们组合成 a`list`然后使用`Reduce`：

```
Reduce(union, list(A, B, C))
 [1]  1  2  3  4  5  6  7  8  9 10 
```

# jquery - android浏览器移动网页模态窗口

> ID：10880173
> 
> 赞同：0
> 
> 时间：2012-06-04T11:00:14.490
> 
> 标签：jquery, android, html, css

我制作了一个网页，特别是一个可以在安卓设备上查看的表单。我还制作了一个自定义日期选择器，当点击相应的文本框时，它会在弹出窗口中打开。但在浏览器中它工作正常。但是在android中，当我单击文本框时，弹出窗口会出现，但是当我在弹出窗口内单击时，底层文本框和其他表单控件会获得焦点并越过弹出窗口并且焦点会丢失，它会从弹出窗口中消失。为此，我找到了一个解决方案，即在弹出窗口出现时禁用所有表单，并在关闭时启用控件。是他们的任何解决方案。以下是我的代码。

```
<html>
<head>
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1; minimum-scale=1; user-scalable=no;"/>         

<link type="text/css" rel="stylesheet" href="../resources/js/calendar/CalendarWidget.css" />
<link rel="stylesheet" type="text/css" href="../resources/css/FlightBookingSearch.css"/>

<!-- Loading jquery and jquery ui from google api library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>QRMobile</title>
</head>
<body bgcolor="#D1D1D1">
    <form action="calendarRecommendations" id="flightBookForm" name="flightBookForm" method="POST">
        <table width="100%" cellspacing="0" cellpadding="0" border="0" >
            <tbody valign="top">
                <tr>
                    <td align="center">
                        <input type="text" size="10" id="departDate" name="departDate" value="" class="searchTextBox" readonly="readonly" style="cursor: pointer; width:90%; height:25px; margin:auto;"/>
                    </td>
                </tr>
                <tr>
                    <td align="center">
                        <input type="text" size="10" id="tempDate" name="tempDate" style="cursor: pointer; height:25px; width:90%; margin:auto;" class="searchTextBox"  readonly="readonly" />
                    </td>
                </tr>
            </tbody>
        </table>
    </form>

    <div id="modal-window-wrapper">
        <div id="modal-window-back">
            <div id="modal-window-container">
                <div id="modal-close">
                    <img src="../resources/js/calendar/close.gif" id="close-modal-calendar-widget" alt="close"/>
                    <p>Close</p>
                </div>
                <div id="modal-window">
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="../resources/js/calendar/CalendarWidget.js"></script>
    <script type="text/javascript" src="../resources/js/FlightBookingSearchEvt.js"></script>
    <script type="text/javascript">
        $(document).ready(function()    {
            var viewEventModule;

            viewEventModule = new FlightBookingSearchEvt();
            viewEventModule.load();
        });
    </script>
</body>
</html> 
```

**弹出CSS**

```
#modal-window-wrapper   {
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    display:none;
}

#modal-window-back  {
    width:100%;
    height:100%;
    position:absolute;
    top:0;
    left:0;
    z-index:9997;
}

#modal-window-container {
    width:95%;
    height:auto;
    margin: 10px auto;
    background-color:white;
    padding:3px 9px 3px 3px;

    border-radius: 5px;
    -moz-border-radius:5px;
    -webkit-border-radius:5px;

    /*border-radius: 10px;*/
    -moz-box-shadow: 0 0 5px 5px #A1A1A1;
    -webkit-box-shadow: 0 0 5px 5px #A1A1A1;
    z-index:9998;
}

#modal-window   {
    width:100%;
    height:auto;
    background-color:white;
    z-index:9999;
}

#modal-close    {
    width:99.3%;
    height:auto;
    overflow:hidden;
    padding:5px 5px 5px 5px;
    margin-bottom:10px;
    border-bottom:1px solid #E6E6E6;
}

#modal-close img    {
    float:right;
}

#modal-close p  {
    float: right;
    font:13px Arial;
    color: #171817;
    margin:0;
    margin:3px 5px 0px 0px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:52:28.453

我认为您应该仅将 z-index 添加到 modal-window-wrapper ，因为其他所有 div 都在该 div 内，因此无需将它们设为绝对值。

我不确定，但这可能会对您有所帮助。

# jquery - Scriptaculous Effect.SwitchOff -- 什么是 jQuery 等价物？

> ID：10880176
> 
> 赞同：2
> 
> 时间：2012-06-04T11:00:23.063
> 
> 标签：jquery, scriptaculous

我正在将我的 Web 应用程序的前端从 Prototype/Scriptaculous 迁移到 jQuery。我在 jQuery UI 中搜索了 Scriptaculous[`SwitchOff`](http://madrobby.github.com/scriptaculous/effect-switchoff/)效果的等效项，但没有任何结果。

您可以在这里看到 Scriptaculous 效果：http: [//jsfiddle.net/p46DA/](http://jsfiddle.net/p46DA/)

我的客户喜欢这种效果，因为它模仿了他的老电视，而且它是用于删除文件等的非常直观的 UX。

由于 jQuery 没有内置的关闭效果，我认为您可以通过自定义缓动曲线的淡入淡出来实现它？？？有没有人有这方面的经验？

谢谢你，社区！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:48:09.327

没有等价物。“SwitchOff”是效果的组合：闪烁、不透明度和比例。你需要自己写。这是 Scriptaculous 函数：

```
Effect.SwitchOff = function(element) {
  element = $(element);
  var oldOpacity = element.getInlineOpacity();
  return new Effect.Appear(element, Object.extend({
    duration: 0.4,
    from: 0,
    transition: Effect.Transitions.flicker,
    afterFinishInternal: function(effect) {
      new Effect.Scale(effect.element, 1, { 
        duration: 0.3, scaleFromCenter: true,
        scaleX: false, scaleContent: false, restoreAfterFinish: true,
        beforeSetup: function(effect) { 
          effect.element.makePositioned().makeClipping();
        },
        afterFinishInternal: function(effect) {
          effect.element.hide().undoClipping().undoPositioned().setStyle({opacity: oldOpacity});
        }
      })
    }
  }, arguments[1] || { }));
}; 
```

取自[源文件`effects.js`](https://github.com/madrobby/scriptaculous/blob/master/src/effects.js)。

# javascript - 不安全 JavaScript 尝试的解决方案？

> ID：10880177
> 
> 赞同：-1
> 
> 时间：2012-06-04T11:00:23.080
> 
> 标签：javascript

不安全的 JavaScript 尝试从 URL http://spgame.galaxy-games.com/star_galaxy/File/Game_Main.php 的框架访问具有 URL [http://starproject.galaxy-games.com/content/play-star-project](http://spgame.galaxy-games.com/star_galaxy/File/Game_Main.php)[的](http://starproject.galaxy-games.com/content/play-star-project)框架. 域、协议和端口必须匹配。

因此，当我尝试访问此站点时，我得到了其中两个，并且 event.layerX 和 event.layerY 在 WebKit 中已损坏并已弃用。它们将在不久的将来从引擎中移除。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:05:07.417

该网站的所有者（大概是galaxy-games.com）需要更正他们的Javascript。作为最终用户，您无能为力。

* * *

具体来说，Javascript 不允许 starproject.x.com 上的框架访问 spgame.x.com 上的框架中的变量和其他对象，因为它认为它们是不同的站点。这可以防止跨站点脚本或“XSS”攻击。它是通过在 Javascript 中包含匹配`window.domain`语句来修复的。

WebKit 的`event`对象也反对它被要求做的事情，代码需要重写，所以它不使用`layerX`and `layerY`。

这些都不在最终用户的控制范围内。

# java - Java中的后向循环更快吗？

> ID：10880178
> 
> 赞同：3
> 
> 时间：2012-06-04T11:00:33.297
> 
> 标签：java, for-loop

> **可能的重复：**
> [Java API 中的循环计数器 在 Java 中](https://stackoverflow.com/questions/4181941/loop-counter-in-java-api)
> [，哪些代码更快？](https://stackoverflow.com/questions/1656506/which-of-these-pieces-of-code-is-faster-in-java)

```
for(int i = 100000; i > 0; i--) {}
for(int i = 1; i < 100001; i++) {} 
```

哪个更快？我读到第一个 for 循环更快。这是真的吗？那么它如何变得比其他更快？请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:10:22.473

无法判断两者中哪一个更快。

如果您提供的只是一段 Java 代码，那么我们所要做的就是 Java 语言规范。由于 Java 语言规范从未提及任何时间方面，因此无法回答这个问题。

这类似于问你的数学老师，*“17+17 还是 17*17 哪个计算速度更快？”* 你的数学老师只会盯着你看，充其量只是回答，*“你用的是纸笔还是袖珍计算器？”*

# mysql - 如何从mysql表中为足球结果即时设置游戏限制？

> ID：10880183
> 
> 赞同：0
> 
> 时间：2012-06-04T11:00:51.613
> 
> 标签：mysql

如何限制每个俱乐部的比赛场次，我希望每个俱乐部只有十场比赛。这是我在这里找到的所有游戏的代码[如何从 mysql 足球 [足球] 结果表中即时输出排名表？](https://stackoverflow.com/questions/8009379/how-to-output-a-standings-table-on-the-fly-from-a-mysql-table-of-football-socce)

```
select 
team, 
count(*) played, 
count(case when goalsfor > goalsagainst then 1 end) wins, 
count(case when goalsagainst> goalsfor then 1 end) lost, 
count(case when goalsfor = goalsagainst then 1 end) draws, 
sum(goalsfor) goalsfor, 
sum(goalsagainst) goalsagainst, 
sum(goalsfor) - sum(goalsagainst) goal_diff,
sum(
      case when goalsfor > goalsagainst then 3 else 0 end 
    + case when goalsfor = goalsagainst then 1 else 0 end
) score 
from (
select hometeam team, goalsfor, goalsagainst from scores 
union all
select awayteam, goalsagainst, goalsfor from scores
) a 
group by team
order by score desc, goal_diff desc; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:35:34.720

在 SELECT 中使用 LIMIT 子句返回有限数量的行。
文档：[http ://dev.mysql.com/doc/refman/5.5/en/select.html](http://dev.mysql.com/doc/refman/5.5/en/select.html)

# eclipse - eclipse（保存工作台状态）

> ID：10880184
> 
> 赞同：24
> 
> 时间：2012-06-04T11:00:52.853
> 
> 标签：eclipse, process

我有 Eclipse 的问题。
有时当我尝试关闭**'Eclipse'**时，进度条会停止并且不会移动。正在
**保存工作台状态。**

结束进程的唯一方法就是杀死它。
附上打印屏幕。 ![在此处输入图像描述](../Images/09258b2d3c30ac71e919fedcf5310208.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-30T03:18:06.667

我遇到了同样的问题，我不得不杀死 eclipse 的进程并重新启动它，它又可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-03T07:42:43.820

有同样的问题并解决如下（在Linux上）：

1.  杀死并重新启动 Eclipse
2.  通过右键单击每个打开的项目并选择“关闭项目”来确定哪个项目导致此问题（未关闭的项目导致此行为）
3.  右键单击项目并选择“删除”（确保 **不要**选中删除文件的选项！）
4.  关闭（并在需要时终止）Eclipse
5.  打开您确定的项目所在的文件夹并删除（隐藏）文件夹“.settings”以及文件“.buildpath”和“.project”
6.  启动 Eclipse 并添加项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-27T20:52:00.623

我也遇到了这个问题。我去关闭了我工作区中的几个项目，现在它很快退出了。

# android - java.lang.OutOfMemoryError 使用 KSOAP2 发送字节数组

> ID：10880187
> 
> 赞同：0
> 
> 时间：2012-06-04T11:01:06.783
> 
> 标签：android, web-services, ksoap2

我正在使用 ksoap2 与 .net 网络服务进行通信。但是，当我从图像提交字节数组时，我会收到 OutOfMemoryError。

我正在使用以下代码：

```
 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            new MarshalBase64().register(envelope); // serialization
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);
            HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS);
            httpTransport.call(ADD_CLIENT_SOAP_ACTION, envelope);               
            Object response = null;
            response = envelope.getResponse(); 
```

堆栈跟踪：

```
06-04 12:46:41.605: E/AndroidRuntime(9661): FATAL EXCEPTION: IntentService[SyncService]
06-04 12:46:41.605: E/AndroidRuntime(9661): java.lang.OutOfMemoryError
06-04 12:46:41.605: E/AndroidRuntime(9661):     at java.io.ByteArrayOutputStream.expand(ByteArrayOutputStream.java:91)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:216)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:164)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at java.io.OutputStreamWriter.convert(OutputStreamWriter.java:236)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at java.io.OutputStreamWriter.write(OutputStreamWriter.java:225)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at java.io.BufferedWriter.write(BufferedWriter.java:249)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at org.kxml2.io.KXmlSerializer.writeEscaped(KXmlSerializer.java:137)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at org.kxml2.io.KXmlSerializer.text(KXmlSerializer.java:544)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at org.ksoap2.serialization.MarshalBase64.writeInstance(MarshalBase64.java:40)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:656)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at org.ksoap2.serialization.SoapSerializationEnvelope.writeProperty(SoapSerializationEnvelope.java:649)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:604)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:582)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:658)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at org.ksoap2.serialization.SoapSerializationEnvelope.writeBody(SoapSerializationEnvelope.java:564)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at org.ksoap2.SoapEnvelope.write(SoapEnvelope.java:205)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at org.ksoap2.transport.Transport.createRequestData(Transport.java:111)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:120)
06-04 12:46:41.605: E/AndroidRuntime(9661):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:51:32.153

“大”图像和 kSOAP2 中没有优化的组合对于智能手机的有限内存来说可能太多了。

我估计 kSOAP2 临时使用的内存至少是您要发送的字节数组大小的 5 倍。这是对字节数组本身的补充，也是您可能保留的图像的其他副本的补充。

因此，要使其正常工作，您要么需要在应用程序中找到可以减少内存消耗的其他区域。或者您需要找到一个不同的 SOAP 库，它不会将完整的 XML 消息以及字节数组的 Base 64 编码字符串保存在内存中，而是使用流式处理方法来编码数组的小块并将它们直接发送到网络连接。

# vb.net - 检测到 PInvokeStackImbalance - Visual Basic 2010

> ID：10880198
> 
> 赞同：1
> 
> 时间：2012-06-04T11:01:53.660
> 
> 标签：vb.net, visual-studio-2010

我想做一个互联网检查器，但我不知道这个 PinvokeStackImbalance 有什么问题。实际上，代码是为 Visual Basic 2008 编写的，但我使用的是 Visual Basic 2010。

WebTest = CBool​​(InternetGetConnectedState(dwflags, 0&))

问题出在哪里？顺便说一句，这是一个模块。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T12:43:17.990

当您对函数使用错误的声明时，您将收到 MDA 警告。这在 VB.NET 中很常见，互联网上有很多旧的 VB6 声明在 VB.NET 中不起作用。一个明显的问题迹象是这个特殊的函数，它需要两个 DWORD 类型的参数，如果你在声明中看到**Long**，那么你有一个糟糕的 VB6 参数。

从 Pinvoke Interop Assistant 工具或 pinvoke.net 网站获取相当可靠的声明：

```
Private Declare Function InternetGetConnectedState Lib "wininet.dll" _
                     (ByRef lpdwFlags As Int32, ByVal dwReserved As Int32) As Boolean

Private Enum ConnectionStates
    Modem = &H1
    LAN = &H2
    Proxy = &H4
    RasInstalled = &H10
    Offline = &H20
    Configured = &H40
End Enum 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T17:09:20.723

去：

1.  调试 - 异常 - 托管调试助手

然后取消选中以下选项：

1.  上下文切换死锁
2.  PInvokeStackImbalance

之后就没有消息了。

# sql-server - Sql Server - 使用排序规则

> ID：10880200
> 
> 赞同：3
> 
> 时间：2012-06-04T11:02:10.677
> 
> 标签：sql-server, collation

我正在使用以下查询，我需要在其中指定排序规则提示以避免跨数据库的排序规则问题，因为此查询使用来自 2 个数据库的表。

> 消息 468，级别 16，状态 9，第 12 行无法解决等于操作中“Latin1_General_CS_AI”和“Latin1_General_CS_AS”之间的排序规则冲突。

目前，当我运行一些使用具有不同排序规则的不同数据库的查询时，我遇到了排序规则冲突的错误：

```
Delete from table1 where oldcolumn in
(
select newcolumn from Database2.dbo.table2
where invoiceid = @invno
and complete = 0
) 
```

我将查询更改为包含排序规则提示，如下所示：

```
Delete from table1 where oldcolumn COLLATE SQL_Latin1_General_CP1_CS_AS in
(
select newcolumn from Database2.dbo.table2
where invoiceid = @invno
and complete = 0
) 
```

1.  上面的查询会解决排序问题吗？
2.  在运算符（例如“=”运算符）的左侧或右侧指定整理提示是否相同？
3.  可以像以往一样查询`invoiceid = @invno`生成运行时排序规则冲突错误吗？

**注意：**我问这个问题是因为我无权访问上述 2 个数据库中的任何一个，并且脚本将在实际数据库上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:00:20.310

使用下面的查询：

```
DELETE FROM Table1
WHERE Table1.ID IN (
                SELECT Table1.ID
                FROM Table1
                INNER JOIN Database2.dbo.Table2 Table2 ON Table2.NewColumn = Table1.OldColumn COLLATE SQL_Latin1_General_CP1_CS_AS
                WHERE   Table2.invoiceid = @invno
                    AND Table2.complete = 0
                ) 
```

# asp.net-mvc-3 - Jquery 对话框和 Ajax 发布错误（？）导致 ASP.NET MVC3（剃刀）

> ID：10880206
> 
> 赞同：0
> 
> 时间：2012-06-04T11:02:53.827
> 
> 标签：asp.net-mvc-3, jquery-ui, jquery

我想做的事：

在页面加载时自动弹出一个 jquery 对话框，填写一些数据，将其发布到一个操作并关闭对话框（无论操作是否成功）。

在应该出现弹出窗口的视图中，我有以下内容：

```
<script type="text/javascript">
    $(function () {
        $('#PopUpDialog').dialog(
            {
                modal: true,
                open: function ()
                {
                    $(this).load('@Url.Action("Subscription", "PopUp")');
                },  
                closeOnEscape: false
            }
        );

        $('.ui-dialog-titlebar').hide();
        $('#closeId').live('click',function () {
                $('#PopUpDialog').dialog('close');               
                return false;
            }
        );

            $('#SubscriptionForm').submit(function () {
                $("#PopUpDialog").dialog("close");             
                $.ajax({
                    url: encodeURI('@Url.Action("Subscription", "PopUp")' ),
                    type: this.method,
                    data: $(this).serialize()
                })
                return fase;
            }
            );
    });
</script> 
```

订阅视图具有以下内容：

```
@using (Html.BeginForm( new { id = "SubscriptionForm" }))
{

    @Html.ActionLink(Deals.Views.PopUp.SubscriptionResources.AlreadySubscribed, "", null, new { id = "closeId" })
    <br />
    <br />
    @Deals.Views.PopUp.SubscriptionResources.FillEmail 
    @Html.TextBoxFor(m => Model.Email)    
    <input type="submit" id="subscribeId" value="@Deals.Views.PopUp.SubscriptionResources.IWantToSubscribe"  />
    <br />    
} 
```

效果很好。

POST 动作定义如下：

```
[AcceptVerbs(HttpVerbs.Post)]
        public JsonResult Subscription(FormCollection formValues)
        //public void Subscription(FormCollection formValues)
        {
            Deals.ViewModels.PopUpSubscriptionVM VM = new ViewModels.PopUpSubscriptionVM();
            TryUpdateModel(VM);
            if (!String.IsNullOrEmpty(VM.Email))
            {
                //do the update to the dbms
            }
            return Json(new { success = true });
        } 
```

问题是，在发回后，我得到一个显示成功消息的空白屏幕，这是我不想要的！我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:25:48.143

您可以处理成功和错误回调：

```
 $('#SubscriptionForm').submit(function () {
                $("#PopUpDialog").dialog("close");             
                $.ajax({
                    url: encodeURI('@Url.Action("Subscription", "PopUp")' ),
                    type: this.method,
                    data: $(this).serialize(),
                   success: function (result) {
                   //Do Whatever you want to do here 
                  },
                   error: function (x, e) {
                  //Do Whatever you want to do here
                 }
                })
                return fase;
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:52:31.027

要查看我做错了什么，我使用以下成分设置了一个小项目（ASP.NET MVC 3）：

```
<script type="text/javascript">

    $(function () {
        // Does not cache the ajax requests to the controller e.g. IE7/9 is doing that...
        $.ajaxSetup({ cache: false });

        var $loading = $('<img src="@Url.Content("~/images/ajax-Loader.gif")"  alt="loading" class="ui-loading-icon">');
        var $url = '@Url.Action("Subscription", "PopUp")';
        var $title = 'Some title';
        var $dialog = $('<div></div>');
        $dialog.empty();        
        $dialog
            .append($loading)            
            .load($url)
            .dialog({
                autoOpen: false
                , closeOnEscape: false
                , title: $title
                , width: 500
                , modal: true
                , minHeight: 200
                , show: 'fade'
                , hide: 'fade'
            });

        $dialog.dialog("option", "buttons", {
            "Cancel": function () {
                $(this).dialog("close");
                $(this).empty();
            },
            "Submit": function () {
                var dlg = $(this);
                $.ajax({
                    url: $url,
                    type: 'POST',
                    data: $("#SubscriptionForm").serialize(),
                    success: function (response) {
                        //$(target).html(response);
                        dlg.dialog('close');
                        dlg.empty();

                });
            }
        });

        $dialog.dialog('open');
    })
</script> 
```

管制员的行动：

```
public ActionResult Subscription()
        {

            Thread.Sleep(2000); //just for testing
            TestModalAjax.ViewModels.PopUpVM VM = new ViewModels.PopUpVM();
            return View(VM);
        }

        //POST
        [AcceptVerbs(HttpVerbs.Post)]
        //[OutputCache(CacheProfile = "ZeroCacheProfile")]
        public ActionResult Subscription(FormCollection formValues)
        {
            TestModalAjax.ViewModels.PopUpVM VM = new ViewModels.PopUpVM();
            TryUpdateModel(VM);
            return Json(new { success = true });

        } 
```

...以及相应的视图：

```
@model TestModalAjax.ViewModels.PopUpVM
@{
    Layout = null;
    ViewBag.Title = "Subscription";
}

<h2>Subscription</h2>
@* -----   NOTICE THE FOLLOWING!!! WITHOUT THIS DATA GETS NOT POSTED BACK!!!! ----  *@
@using (Html.BeginForm("Subscription","PopUp",FormMethod.Post, new { id="SubscriptionForm"})) 
{
    <h1> Give me your name</h1>
    @Html.TextBoxFor(M => Model.Name)
} 
```

...所以看起来一切都按预期工作！

# c++ - 通过调色板信息裁剪 8 位位图

> ID：10880207
> 
> 赞同：0
> 
> 时间：2012-06-04T11:02:56.580
> 
> 标签：c++, image, colors, color-palette

我目前正在使用 C++ 读取我的 8 位位图并保存其像素数据和颜色表。我目前将我的颜色表存储在一个数组中：

```
RGBQUAD* colours; 
```

我想知道如何在各个方向上找到最近的唯一像素颜色并将位图裁剪到该像素。我正在使用没有任何外部库的 C++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:13:28.543

我建议*使用*现成的库，例如[ImageMagick](http://www.imagemagick.org)，而不是尝试重新实现*那个*特定的轮子。

您要实现在其他地方已经实现得很好的东西只有两个原因：1）家庭作业，或 2）您认为您实际上可以比现有代码做得更好。

不能是 1）因为没有“作业”标签，也不能是 2）因为你不必问，那么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:36:44.090

“最近的唯一像素颜色”是指颜色空间中最近的？是绝对意义上的（R/G/B）还是人类意义上的？那么，鉴于您`#0002FE`可能会`#0000FF`在您的颜色表中找到？

“标准”的简单 C++ 方法是`std::min_element()`，它接受一个范围和一个谓词。在您的情况下，该范围是您的颜色表，谓词是您想要的颜色的接近度。例如`[targetColor](RGBQUAD tableEntry) { return abs(RGBdiff(tableEntry, targetColor)); }`

# c# - 从其他线程获取列表框项：跨线程操作无效

> ID：10880212
> 
> 赞同：2
> 
> 时间：2012-06-04T11:03:08.973
> 
> 标签：c#

到目前为止，我已经看到了 1000 个示例，如何使用 Invoke 方法从不同的线程设置列表框对象中的项目。

但是，我找不到任何关于如何从后台工作人员胎面简单地从列表框中读取项目的解决方案。例如，在阅读 SelectedItems 之前如何调用它...

```
foreach (var item in CheckedListBox1.SelectedItems)
{
 //Do something
} 
```

上面在后台工作人员中运行的代码产生了以下错误：

跨线程操作无效：控件“CheckedListBox1”从创建它的线程以外的线程访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:06:46.010

您可以类似地使用`Invoke`从后台线程*读取UI 元素：*

```
var selectedItems = (IList)this.Invoke(new Func<IList>(() =>
    CheckedListBox1.SelectedItems.Cast<object>().ToList()));

foreach (var item in selectedItems)
{
    //Do something
} 
```

如果您知道您的项目的类型，您可以在`Cast`调用中指定类型，并返回一个`IList<YourType>`而不是非泛型`IList`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:10:34.307

您需要对 UI 对象的引用。然后，当您没有引用时，您可以使用此代码（.NET 4.0）在主线程上调用东西，因为您可以使用主线程上的 Application.Current 指针：

```
Application.Current.Dispatcher.BeginInvoke((ThreadStart)delegate
{
    // TODO: Implement task to do on main thread
    foreach (var item in CheckedListBox1.SelectedItems)
    {
         //Do something
    }
}); 
```

# php - 如果提供的变量多于所需变量，则清理具有多个变量的 URL 会失败

> ID：10880218
> 
> 赞同：0
> 
> 时间：2012-06-04T11:03:23.127
> 
> 标签：php, mod-rewrite

我已经开始深入研究用户页面的干净 URL，我的大部分灵感来自 Stack Overflow 的做法。用户可以只输入他们希望查看的用户的用户 ID，然后将他们重定向到正确的 URL，包括显示名称。例如，如果我有 id 为 1 的帐户，则访问`users/1`将重定向到`users/1/JosephDuffy`，假设我的显示名称是`JospehDuffy`。从这里，可以执行额外的操作，例如编辑自己，`users/1/JosephDuffy/edit`编辑用户 1.`users/1/username/edit`也会重定向到`users/1/JosephDuffy/edit`. 上述所有示例都可以在完美的世界中运行，但很容易被破坏。
用户可以对其他人执行操作，例如`users/2/Player2/befriend`. 显然，你不想和自己交朋友，所以`users/1/JospehDuffy/befriend`什么也不做。但是，输入一个 URL，例如`users/1/1/1/1/JosephDuffy/befriend`似乎触发了动作 as `befriend`，显示名称 as`JosephDuffy`和用户 id as `1/1/1/1`。我猜这就是 mod_rewrite 的工作原理，但它似乎给我扔了一些曲线球。
现在，我`intval()`在用户 ID 上使用，这似乎有效但不太理想；我仍然有多个提供相同信息的 URL，虽然我找不到任何其他“漏洞”，但可能仍然存在一些。我不确定问题出在哪里，所以我将发布我的 .htaccess 和 PHP 脚本。
.htaccess

```
RewriteEngine On

# Rewrite /users to provide the script with the GET variables it requires to function properly, whilst having clean URLs
# 3 variables were provided
RewriteRule ^users/([^.]+)/([^.]+)/([^.]+)/$ users.php?userid=$1&displayname=$2&action=$3
RewriteRule ^users/([^.]+)/([^.]+)/([^.]+)$ users.php?userid=$1&displayname=$2&action=$3

# 2 variables were provided
RewriteRule ^users/([^.]+)/([^.]+)/$ users.php?userid=$1&displayname=$2
RewriteRule ^users/([^.]+)/([^.]+)$ users.php?userid=$1&displayname=$2

#1 variable was provided
RewriteRule ^users/([^.]+)/$ users.php?userid=$1
RewriteRule ^users/([^.]+)$ users.php?userid=$1 
```

我认为如果我在这个阶段的某个阶段使用或类似的东西也会更好`[R=301,L]`，但我不确定在哪里，或者为什么真的。
users.php（有些部分被简化了，几乎是伪代码，以便于理解）

```
if (isset($_GET['userid'])) {
    $profileUserid = intval($_GET['userid']);
} else {
    $profileUserid = 0;
}
if (isset($_GET['displayname'])){
    $profileDisplayName = $_GET['displayname'];
} else {
    $profileDisplayName = '';
}
if (isset($_GET['action'])) {
    $action = $_GET['action'];
} else {
    $action = false;
}
$actualDisplayName = GetDisplayNameFromDBWhereid($profileUserid);
if ($actualDisplayName != $profileDisplayName) {
        header('Location: /users/' . $profileUserid . '/' . $actualDisplayName . '/' . $action);
        exit;
    } else if (substr($_SERVER['REQUEST_URI'], -1) != '/') {
        // There is no trailing slash, so add it
        header('Location: ' . $_SERVER['REQUEST_URI'] . '/');
        exit;
    }
    if ($currentUsersid == $profileUserid) {
        // Player is viewing themselves
        if ($action == 'edit') {
            echo 'Editing your profile';
        } else {
            // User viewing self, but not editing
            echo '<a href="edit">Edit your profile</a><br>';
        }
    } else {
        if ($action) {
            // Interact with the user whos profile is being viewed
        } else {
        }
    } 
```

如果不使用`intval($_GET['userid'])`，当我输入 时`users/1/1/1/1/JosephDuffy/action`，它会`action`像我在其他用户的位置一样执行，同时`1/JosephDuffy/action`显示“编辑您的个人资料”链接，忽略该操作，因为它不等于“编辑”。
希望这是一件愚蠢的事情（我猜这是我写得不好的 RewriteRules 的错），但绝不是这样，谢谢你的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:53:33.607

**为什么它会这样工作？**

正则表达式是贪婪的，它们试图尽可能地适合您的正则表达式，因此您`users/1/1/1/1/JosephDuffy/befriend`非常适合 pattern `users/([^.]+)/([^.]+)/([^.]+)`。TBH 我不知道为什么`[^.]+`似乎与`.+`符号相同，这让我最想知道，但是......

* * *

**怎么修**

如果你想解决这个问题，使它只适合`users/1/JosephDuffy/befriend`你需要把正则表达式模式作为

```
^users/([^/]+)/([^/]+)/([^/]+)$ users.php?userid=$1&displayname=$2&action=$3 
```

并分别更改所有其余的重写。注意`([^/]+)`那里的符号，这意味着我们找到之前的所有字符`/`。

* * *

**我会做什么**

如上所述，我仍然会考虑接受“任何类型的 URL”，然后在 PHP 端进行解析（使用`preg_split`）。所以 URL 重写将非常简单：

```
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^(.*)$ users.php?url=$1 [QSA,L] 
```

然后在代码中我会

```
$paramsAndValues = preg_split('#/#',$_GET['url']); 
```

这是最简单的，但当然你要检查是否`$_GET['url']`存在等等。

# android - 在“多层”布局中替代 AbsoluteLayout

> ID：10880219
> 
> 赞同：1
> 
> 时间：2012-06-04T11:03:34.530
> 
> 标签：android, layout, positioning, android-relativelayout, absolutelayout

我正在开发一个 android 应用程序，其布局包括围绕圆形元素排列的按钮。由于所述元素的角会与其他按钮重叠，因此推荐的布局类型（LinearLayout 等）不是一个可行的选择。

但是，我想正确地做到这一点，而不是使用已弃用的 AbsoluteLayout。不过，到目前为止，我看不到其他选择。在那儿？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:20:43.570

相对布局可能会根据您想要放置按钮的方式起作用。它允许您将按钮放置在彼此的左/右或上方/下方，因此应该可以将它们放置在圆形元素周围。

[这是相对布局](http://developer.android.com/reference/android/widget/RelativeLayout.html)的 android 文档的链接。

# xml - 如何在 StreamingMarkupBuilder 中递归地添加一个孩子

> ID：10880220
> 
> 赞同：3
> 
> 时间：2012-06-04T11:03:41.040
> 
> 标签：xml, recursion, groovy

我需要在 xml 中构建一个树结构，其中子元素可以在其中包含另一个子元素。未指定嵌套节点的数量。所以我正在使用 StreamingMarkupBuilder ：

```
def rootNode = ....

def xml = builder.bind { 

  "root"(type:"tree", version:"1.0") {
       type(rootNode.type)
       label(rootNode.label)

   "child-components" {
      rootUse.components.each { comp ->
                             addChildComponent(comp,xml)
            }
           }

  } 
```

但是我在创建正确的 addChildComponent 方法时遇到问题。有任何想法吗 ？

编辑：好的，我做到了：

```
def addChildComponent {comp,xml -> 
xml.zzz(){
    "lala"()
    }
} 
```

但是现在我得到了命名空间的问题：

```
<child-components>
<xml:zzz>
  <lala/>
</xml:zzz>
<xml:zzz>
  <lala/>
</xml:zzz>
<xml:zzz>
  <lala/>
</xml:zzz>
</child-components> 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T16:13:08.443

在这种情况下，您的 Closure`addChildComponent`仍然是错误的。除了将“xml”（第二个）参数传递给闭包之外，您应该将委托设置为“父”闭包。

例子：

```
def components = ['component1', 'component2', 'component3', 'componentN']
def xmlBuilder = new StreamingMarkupBuilder();

//this is "outside" closure
def addComponent = { idx, text ->
    //this call is delegated to whatever we set: addComponent.delegate = xxxxxx
    component(order:idx, text)
}

def xmlString = xmlBuilder.bind{
    "root"(type:'tree', version:'1.0'){
        type('type')
        label('label')
        "child-components"{
            components.eachWithIndex{ obj, idx->
                //and delegate is set here
                addComponent.delegate = delegate
                addComponent(idx, obj)
            }
        }
    }
}.toString()

println XmlUtil.serialize(xmlString) 
```

输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<root type="tree" version="1.0">
  <type>type</type>
  <label>label</label>
  <child-components>
    <component order="0">component1</component>
    <component order="1">component2</component>
    <component order="2">component3</component>
    <component order="3">componentN</component>
  </child-components>
</root> 
```

希望你会发现这很有帮助。

# android - ActionBarSherlock - 我可以将 ActionBarSherlock 库 probject 放在我的应用程序库目录中并将该库项目附加到我的应用程序吗？

> ID：10880226
> 
> 赞同：1
> 
> 时间：2012-06-04T11:04:12.227
> 
> 标签：android, actionbarsherlock

我通过创建两个不同的项目、库项目和我自己的 android 项目来实现 ActionBarSherlock。现在我正在考虑将库项目放在我的应用程序库目录中，并将该项目附加到我的应用程序中。这在逻辑上可能吗？如果是，请指导我如何做到这一点，这是将库项目放在 libs 文件夹中的好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:10:10.510

> 现在我正在考虑将库项目放在我的应用程序库目录中，并将该项目附加到我的应用程序中。这在逻辑上可能吗？

不是这个时候。您的库项目将[作为库项目添加](http://developer.android.com/guide/developing/projects/projects-eclipse.html#ReferencingLibraryProject)到您的主应用程序项目中。

# c# - 动态创建组合框的问题

> ID：10880229
> 
> 赞同：0
> 
> 时间：2012-06-04T11:04:42.540
> 
> 标签：c#, wpf

我试图动态创建一个 ComboBox，但无法创建它。这是我写的代码。

```
 ComboBox com_dynamic = new ComboBox();            
        com_dynamic.Height = 50;
        com_dynamic.Width = 100;           
        LayoutRoot.Children.Add(com_dynamic);           
        tb.Margin = new Thickness(0, 145, 87, 0);
        tb.VerticalAlignment = VerticalAlignment.Top;
        tb.HorizontalAlignment = HorizontalAlignment.Right;

        ComboBoxItem com_dynamic_item = new ComboBoxItem();
        com_dynamic.AddChild(com_dynamic_item);
        com_dynamic_item.Content = "item1"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:10:22.647

您还应该将组合框添加到容器控件。如果您想将它添加到 中`LayoutRoot`，那么这就是您缺少的行。

```
LayoutRoot.Children.Add(com_dynamic); 
```

您可以使用其在容器中的边距重新定位组合框。

# objective-c - 应用程序中的 pdf 覆盖触摸

> ID：10880230
> 
> 赞同：1
> 
> 时间：2012-06-04T11:04:53.833
> 
> 标签：objective-c, pdf, overlay

我正在寻找要在 iOS 应用程序中实现的 pdf 覆盖功能，是否可以使用免费的 libs 或什至付费在应用程序内的 PDF 页面上进行触摸覆盖？

我想要做的是我有一张地图，它是火车地图，我希望将地图作为 pdf 格式，并且对车站的任何触摸都会显示每个车站的信息。

这是可能的还是其他方式可以接受所有意见！

我看到了其他一些问题，但没有一个是这样的，即

[嵌入 pdf 上方的叠加图像](https://stackoverflow.com/questions/6028327/overlay-image-above-embedded-pdf)

谁能告诉我它是否真的可能在客观的 C 代码中？

需要作为离线应用程序工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:15:58.140

您可以使用 Google Maps Static API (https://developers.google.com/maps/documentation/staticmaps/) 返回地图上的图像，然后将其转换为 pdf。

# c# - 如何获取用户输入的文本区域内容

> ID：10880232
> 
> 赞同：1
> 
> 时间：2012-06-04T11:05:10.413
> 
> 标签：c#, asp.net

在我的网页中，我使用 textarea 从用户那里获取详细信息并将其存储在数据库中。

**1.这是用户输入的方式**

![在此处输入图像描述](../Images/1e3c3b35d8a6c3f99879fea1ac0c6418.png)

**2.这是它在数据库中的存储方式**

**我们的需求：1.WireSet 2.Amps 3.Lights**

现在我正在检索其他页面中的详细信息如何显示结果，如图所示（1）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:10:26.960

试试这个

```
var text = "Our Needs: 1.WireSet 2.Amps 3.Lights";
string[] items = text.Split(':')[1]
                     .Split('.')
                     .Where((s,i) => i % 2 != 0)
                     .Select(s => s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:12:53.667

如果您在 html 中显示它，请使用以下命令：

```
text.Replace(Environment.NewLine, "<br />"); 
```

# android - 如何调整图像视图？

> ID：10880233
> 
> 赞同：0
> 
> 时间：2012-06-04T11:05:14.127
> 
> 标签：android, android-layout

我已经从模拟器的 sdcard 中检索图像并添加到我的网格视图中。但它们没有以正确的方式显示。！[在此处输入图像描述][1]

你能帮我吗..我还发布了我的 ImageAdapter.java 请提出任何更改..谢谢

```
public class ImageAdapter extends BaseAdapter 
{
    ArrayList<Images> array=new ArrayList<Images>();

    Context mContext; 
    private LayoutInflater mInflater; 

    public ImageAdapter(Context c,ArrayList<Images> arr) 
    {
        mContext = c;  
        array=arr;
        mInflater = LayoutInflater.from(mContext);
        Log.e("","adapter con");
    }

    public int getCount()
    {
            Log.e("Count",""+array.size());
        return array.size();
    }

    public Object getItem(int index)
    {
         //return 0;
        return array.get(index);
    }

    public long getItemId(int index) 
    {

        return index;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        //    RelativeLayout.LayoutParams layoutParams =new //RelativeLayout.LayoutParams(30, 30);

        ImageView imageView = new ImageView(mContext);

        Images i=array.get(position);
        imageView.setImageBitmap(i.getBitmap());

        imageView.setScaleType(ImageView.ScaleType.FIT_XY);
        imageView.animate();
       //       imageView.setLayoutParams(layoutParams);

        return imageView;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:19:47.060

你已经定义了布局参数 LayoutParam layoutparam = new LayoutParams(LayoutParams.FILL_Parent,LayoutParams.FILL_Parent); imageView.setLayoutParams(layoutParams);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T07:56:34.403

试试这个。这应该工作，

```
 imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP); 
```

# java - 确定应用程序是否连接到服务器

> ID：10880234
> 
> 赞同：0
> 
> 时间：2012-06-04T11:05:14.567
> 
> 标签：java, android, api

我正在开发一个连接到服务器以获取一些数据的应用程序。
在这我想首先检查应用程序是否连接到服务器。然后，如果服务器打开或关闭？
根据结果​​，我想做进一步的操作。

那么如何获取服务器状态的结果呢？

这是我正在使用的代码：

**代码：**

```
try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(
                        "http://192.168.1.23/sip_chat_api/getcountry.php");

                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

            } catch (Exception e) {
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:10:49.503

在这里维护会话 cookie 是最好的选择，请参阅如何使用会话 cookie：[如何在 Android 上使用 cookie 发出 http 请求？](https://stackoverflow.com/questions/678630/how-do-i-make-an-http-request-using-cookies-on-android)

在这里，在向服务器发送请求之前，检查会话 cookie。如果存在，则继续进行通信。 **更新：** Java 等价物——我相信它适用于 Android——应该是：

InetAddress.getByName(host).isReachable(timeOut)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T12:40:21.923

检查 HttpResponse 的 getStatusLine() 方法

200以外的任何状态码都表示有问题，每个状态码都指向不同的问题发生。

[http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/HttpResponse.html?is-external=true](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/HttpResponse.html?is-external=true)

[http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/StatusLine.html#getStatusCode](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/StatusLine.html#getStatusCode) ()

# c# - 在 Visual Studio 中构建项目的控制台命令

> ID：10880239
> 
> 赞同：0
> 
> 时间：2012-06-04T11:05:47.217
> 
> 标签：c#, command-line

我正在开发 Visual Studio 2008 版。我需要通过“控制台”命令构建“类库”dll。一个简单的命令是：

```
"csc /target:library /out:File.DLL File.cs" 
```

成功创建 File.dll。

但是应该怎么做才能包含一个 dll 文件作为输入呢？例如：`Final.dll`需要一个名为`Final.cs`and的 C# 文件`File.dll`？我尝试了以下命令但不成功

```
"csc /target:library /out:Final.DLL File.dll File.cs" 
```

这样做的确切方法是什么？

以同样的方式，我尝试在命令中添加项目引用：

```
csc /target:library /out:Final.DLL /r:First.dll /r:../Func\Func.csproj Final.cs 
```

但它告诉 Func.csproj 无法打开并且已损坏。可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:07:28.927

```
csc /target:library /out:Final.DLL /r:File.dll File.cs 
```

**您使用/r**添加引用

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T11:07:41.583

如果要添加引用（很可能），可以使用此选项添加程序集引用：

```
/reference:File.dll   (or /r:File.dll) 
```

您可以像使用其他选项一样使用它：

`csc /target:library /r:File.dll /out:Final.dll File.cs`

请记住，您还需要将该 Dll 与您的库一起分发。

注意：键入`csc /?`以获取所有标志的完整列表和有关它们的帮助。这是许多控制台应用程序（如 Windows 上的 csc）的常用命令。**

# xslt - “即时”修改门户栏内容标签的类

> ID：10880241
> 
> 赞同：1
> 
> 时间：2012-06-04T11:06:20.790
> 
> 标签：xslt, plone, diazo

我需要在 portal-column-content 标记中“即时”修改一个类名，这是呈现的 html 代码：

```
<div id="portal-column-content" class="cell width-9 position-1:4"> 
```

我只想用“width-12”替换“width-9”。
有什么建议吗？ 谢谢维托
_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:20:24.737

既然你征求意见，这里有一些：

1.  **不要使用 css 类来表示任何具体的东西，让它表示意图。** 意图的具体实现来自 css。例如，不要创建一个名为的类`width-9`，而是创建一个名为的类`portal-column-content`。然后你可以做`portal-column-content`be `width:9px`，`width:12em`或者其他什么。

2.  **用 xslt 做这样的字符串替换并不是真正的事情。** 即使你可以。根据您的设置，还有其他更好的方法。

3.  **如果您不能/不会遵循上述任何建议，请尝试**

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">

        <xsl:template match="@*|node()">
            <xsl:copy>
                <xsl:apply-templates select="@*|node()"/>
            </xsl:copy>
        </xsl:template>

        <xsl:template match="@class">
            <xsl:attribute name="class">
            <xsl:value-of select="substring-before(.,'width-9')"/>width-12<xsl:value-of select="substring-after(.,'width-9')"/>
            </xsl:attribute>
        </xsl:template>
    </xsl:stylesheet> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T12:22:23.220

**这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="div[@id='portal-column-content']/@class">
  <xsl:attribute name="class">
   <xsl:value-of select=
    "substring-before(concat(.,'width-9'), 'width-9')"/>
   <xsl:value-of select="'width-12'"/>
   <xsl:value-of select="substring-after(., 'width-9')"/>
  </xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下示例 XML 文档时：**

```
<html>
    <div id="a" class="a"/>
    <div id="b" class="b"/>
    <div id="c" class="cell width-9 position-1:4"/>
    <div id="portal-column-content" class="cell width-9 position-1:4"/>
    <div id="d" class="d"/>
    <div id="e" class="cell width-9 position-1:4"/>
</html> 
```

**产生想要的、正确的结果**（*仅*替换的是具有字符串值属性的任何 div`'width-9'`的属性的子字符串：`class``id``'portal-column-content'`

```
<html>
   <div id="a" class="a"></div>
   <div id="b" class="b"></div>
   <div id="c" class="cell width-9 position-1:4"></div>
   <div id="portal-column-content" class="cell width-12 position-1:4"></div>
   <div id="d" class="d"></div>
   <div id="e" class="cell width-9 position-1:4"></div>
</html> 
```

**请注意**：

1.  *唯一*被替换的是任何具有字符串 value属性的 div`'width-9'`的属性的子字符串。具有不同属性的其他元素不受影响。`class``id``'portal-column-content'``div``id`

2.  转换正确地适用于`class`属性，其字符串值不包含`'width-9'`-- 与另一个答案进行比较，在这种情况下，其 XSLT 解决方案将`class`属性的字符串值完全替换为`'width-12'`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T15:14:47.910

由于您已将其标记为“重氮”，因此最简单的解决方案可能是使用重氮规则。只需在规则之前或之后使用替换将#portal-column-content 的内容子项复制到正确分类的#portal-column-content 的主题子项。

如果要选择性地完成，请使用“if”表达式。

# c# - 在其他线程中显示窗口模式到窗口

> ID：10880242
> 
> 赞同：0
> 
> 时间：2012-06-04T11:06:28.363
> 
> 标签：c#, .net, wpf, .net-4.0

我在我的应用程序中有标准的 UI 线程和额外的第二个 UI 线程。现在，我在第二个 UI 线程中创建并显示一个窗口。在此之后，我应该在标准 UI 线程中创建并显示一个对话框，但它应该是窗口的模式，它是在第二个 UI 线程中创建和显示的。原因是，我必须在标准 UI 线程中创建这个对话框，这个对话框使用一个不是 ThreadSafe 的控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:09:23.270

您应该能够设置`Owner`窗口的属性：

```
newWindow.Owner = parentWindowFromOtherThread; 
```

# c# - facebook cookie 是否持久？

> ID：10880243
> 
> 赞同：-1
> 
> 时间：2012-06-04T11:06:34.387
> 
> 标签：c#, facebook, cookies

我的问题是如何确定一个 facebook 用户是否持续登录（在登录前点击让我保持登录按钮）。我想这会反映在 facebook cookie 中。这意味着这将在客户端计算机上创建一个具有到期日期的持久 cookie。

如果我说的是真的，我如何检查 cookie 在 C# 语言中是否持久（是否具有过期日期），如果不是，我如何确定用户是否持久登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:27:54.937

> 我如何检查 cookie 是否持久（是否有过期日期）

Cookie 存储时间的信息会传输到浏览器，但您无法通过 JavaScript 等客户端技术访问该信息。您必须编写插件或其他东西才能访问此类信息。

> 如果不是，我如何确定用户是否持续登录？

一点也不，我猜。

# javascript - Google Chrome，JQuery - 显示不适用于自动对焦

> ID：10880244
> 
> 赞同：0
> 
> 时间：2012-06-04T11:06:37.280
> 
> 标签：javascript, jquery, google-chrome

我有自动对焦的输入元素：

```
<input type="text" name="name" id="name" value="<?php if(isset($name)) {echo $name;} ?>" autofocus="autofocus"/> 
```

和 JS 在输入成为焦点时显示 div 元素：

```
var forma = $('form#mali_oglas input'),
    pomoc = $('div[role=pomoc]');    
    forma.on('focus', function(){
    pomoc.show();
 }); 
```

这在 FireFox 中有效，但在 Chrome 中无效（当另一个输入字段成为焦点时，显示**pomoc**）。似乎有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:26:04.923

您正在将焦点函数绑定到ID**为 mali_oglas**的表单中**输入**类型的每个元素。如果您只想捕获上面的输入，您应该使用：

 **```
var forma = $('#name'),
    pomoc = $('div[role=pomoc]');    
    forma.on('focus', function(){
    pomoc.show();
 }); 
```

PS：将元素集中在加载上也是一个好主意（因为不支持跨浏览器的自动对焦）：

```
$(document).ready(function(){
    $('#name').focus();
}); 
```**

# codeigniter - 如何解决“未定义的变量：id”

> ID：10880247
> 
> 赞同：0
> 
> 时间：2012-06-04T11:06:46.947
> 
> 标签：codeigniter

```
function empAll()
{     
  $this->db->where('id',$id);
  $q = $this->db->get('employee');        
  if($q->num_rows()>0)
   {    
     foreach($q->result() as $rows)
      {      
        $data[]=$rows;
      }
  return $data;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:21:16.633

一般我们在 Url 中传递 id：

Base_url()/index.php/empAll/25。现在 codeigniter 在方法中自动传递 $id = 25 。如果没有收到 id，它会将 id 分配为 0，然后您将不会收到此错误。

```
function empAll()
        {     
          $q = $this->db->where('id',$this->input->post('id'))    
                        ->get('employee');        
          if($q->num_rows()>0)
           {    
             foreach($q->result() as $rows)
              {      
                $data[]=$rows;
              }
            }
          return $data;
         } 
```

# objective-c - UIViewController 中的重载数据

> ID：10880248
> 
> 赞同：0
> 
> 时间：2012-06-04T11:06:50.283
> 
> 标签：objective-c, ios5, uiviewcontroller, resize, reloaddata

`UIViewController`调整大小后如何刷新视图？我需要一种类似于`reloadData`in的方法`UITableViewController`。

是否有其他可能性来调整视图的大小`UIViewController`而不重新加载？

我的代码是：

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    orientation = toInterfaceOrientation;
    if(orientation==3 || orientation==4)
    {
        heightBoxDimension1 = [GlobalData sharedGlobalData].heightLandscape;
        widthBoxDimension1 = [GlobalData sharedGlobalData].widthLandscapeBig;
        widthBoxDimension2 = [GlobalData sharedGlobalData].widthLandscapeSmall;
    }
    else 
    {
        heightBoxDimension1 = [GlobalData sharedGlobalData].heightPortrait;
        widthBoxDimension1 = [GlobalData sharedGlobalData].widthPortraitBig;
        widthBoxDimension2 = [GlobalData sharedGlobalData].widthPortraitSmall;
    }
    for(UIView* view in self.view.subviews)
    {
        NSLog(@"%.0f %.0f %.0f %.0f ", view.frame.origin.x, view.frame.origin.y, view.frame.size.width, view.frame.size.height);
        if(view.frame.size.width >400)
        {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, widthBoxDimension1, heightBoxDimension1)];
            NSLog(@"%.0f %.0f %.0f %.0f ", view.frame.origin.x, view.frame.origin.y, view.frame.size.width, view.frame.size.height);
        }
        else
        {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, widthBoxDimension2, heightBoxDimension1)]; 
            NSLog(@"%.0f %.0f %.0f %.0f ", view.frame.origin.x, view.frame.origin.y, view.frame.size.width, view.frame.size.height);
        }
    }
    [self.view setNeedsDisplay];

} 
```

我有一类全局变量，在其中放置视图的静态尺寸，我有两种视图，高度相同但宽度不同。当打开模拟器进入此方法但更改视图框架后，不要重新加载这些视图...

控制台的输出是：

```
2012-06-05 10:53:09.309 TemplateiPad2[12561:207] 8 8 752 318 
2012-06-05 10:53:09.309 TemplateiPad2[12561:207] 8 8 752 446 
2012-06-05 10:53:09.309 TemplateiPad2[12561:207] 8 334 372 318 
2012-06-05 10:53:09.309 TemplateiPad2[12561:207] 8 334 372 446 
```

做好重新框架，但不要重新加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:09:54.073

尝试

```
[self.view setNeedsDisplay]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:19:23.513

这将为您解决问题！

```
[self.view setNeedsDisplay]; 
```

# c++ - 观察成员变量值的变化

> ID：10880253
> 
> 赞同：2
> 
> 时间：2012-06-04T11:07:24.777
> 
> 标签：c++

我想收到有关修改某些类成员变量（可能是原始的或用户定义的）的通知。

谁能让我知道如何实现这一目标。

谢谢

对我的问题再澄清一点：

我有类似的场景

我有现有的菜单和菜单项。现在我将所有这些菜单项放在工具栏上。因为当这些菜单项在菜单项中时，我得到事件 ON_UPDATE_COMMAND_UI ，我在其中调用一个函数并更新菜单项状态。

但是现在对于工具栏，我必须每次都设置检查状态的功能，变量（数量很多，并且在很多状态下也会被修改，我无法控制）。

任何人都可以在不更改现有代码的情况下建议我一些好的替代方案，因为它非常脆弱。

我们有什么方法可以从语言/编译器获得一些变量更改通知，例如 Watch 变量在 Visual Studio 调试器中的工作方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T11:11:19.173

由于您提到***通知***（*表示异步接收*通知），您需要的是：
[**观察者设计模式**](http://en.wikipedia.org/wiki/Observer_pattern)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T11:09:49.540

您可以创建变量`private`并通过`getter/setter`公开可用的方法访问它。将打印或您的自定义断言放在这些 getter/setter 中。
例如：

```
class A {
private:
  int x;
public:
  int getx () const { /* your code */ ; return x; }
  void setx (const int i) { /* your code */; x = i; }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T11:11:30.657

我建议你实现[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern#C.2B.2B)。

# javascript - Jstree：隐藏节点保持可见

> ID：10880257
> 
> 赞同：0
> 
> 时间：2012-06-04T11:07:46.297
> 
> 标签：javascript, jquery-plugins, jstree

我从 jstree 插件开始，但我遇到了问题。

我不知道为什么，但节点总是显示，即使我折叠它们。

加载树时，节点关闭，树如下所示：

![在此处输入图像描述](../Images/3a6ca546e1fbc8987539c74ade1aefae.png)

我打开第一个节点，树看起来像这样：

![在此处输入图像描述](../Images/d34ebbf3661a621c244fe09e221a5fb2.png)

而且，当我关闭（折叠）前一个打开的节点时，它看起来像这个（父节点似乎关闭，但其子节点可见）：

![在此处输入图像描述](../Images/4a6bf825a2c54df7357257506d571a0c.png)

jsTree 版本 pre1.0 稳定（从[这里](http://jstree.googlecode.com/files/jstree_pre1.0_stable.zip)下载）

我使用我的应用程序生成的 JSON 数据是：

```
[
{   "data" : "Parent ...",
    "state" : "closed",
    "attr" : {
        "id": "parentID", 
        "rel": "line", 
        "class": "jstree-unchecked"
    },
    "children": [
                {   "data" : "proposal1 . . .",
                    "state" : "closed",
                    "attr" : { 
                            "id": "prop1", 
                            "rel": "proposal", 
                            "class": "jstree-checked jstree-leaf" 
                            }
                },
                {   "data" : "proposal2 . . .",
                    "state" : "closed",
                    "attr" : { 
                            "id": "prop2", 
                            "rel": "proposal", 
                            "class": "jstree-unchecked jstree-leaf" 
                    }
                }
                ]
}] 
```

最后，创建树的 jsTree 脚本部分是：

```
$("#propuestas").jstree({
                "json_data" : {
                    "data" :vewJson,
                    "progressive_render" : true
                }
                ,
                "ui" : {
                        "select_limit" : -1,
                        "real_checkboxes" : true
                        },

                "plugins" : [ "themes", "json_data","checkbox", "ui"]

            }); 
```

*为什么要打开*父节点？为什么子/叶节点可见？

非常感谢任何帮助。我很坚持这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:04:52.273

这里有一个类似的帖子/修复：[IE8/9 的显示缺陷](https://stackoverflow.com/questions/10091914/jstree-display-flaw-in-ie8)。看起来这是一个文档类型问题。

# android - android eclipse中的多页面切换

> ID：10880259
> 
> 赞同：1
> 
> 时间：2012-06-04T11:07:54.667
> 
> 标签：android, eclipse, switching

考虑我正在为项目“A”使用五个屏幕页面。每个页面依次在其他页面之间切换，当我从第五页单击“退出”按钮时，我需要关闭所有页面最后一个。

我在下面的代码中使用了这个，但问题是只有最后一页越来越接近其他页面没有。

在下面找到我的代码

```
Button extbtn = (Button)findViewById(R.id.but_Exit);
extbtn.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) {
Intent intent = new Intent();
    setResult(RESULT_OK, intent);
    finish();
}   }); 
```

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:18:02.813

使所有五个活动都扩展一个 BaseActivity，该 BaseActivity`BroadcastReceiver`在 onCreate 注册（并在 onDestroy 取消注册）。单击时`extbtn`，向所有这些 BaseActivity 发送广播以关闭它们自己

例如，在您的 BaseActivity 添加：

```
public static final String ACTION_KILL_COMMAND = "ACTION_KILL_COMMAND";
public static final String ACTION_KILL_DATATYPE = "content://ACTION_KILL_DATATYPE";

private KillReceiver mKillReceiver;

@Override
protected void onCreate(Bundle savedInstanceState)  {
    ...
    ...
    mKillReceiver = new KillReceiver();
    registerReceiver(mKillReceiver, IntentFilter.create(ACTION_KILL_COMMAND, ACTION_KILL_DATATYPE));        
}

@Override
protected void onDestroy() {
    super.onDestroy();
    unregisterReceiver(mKillReceiver);
}

private final class KillReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        finish();
    }
} 
```

在 extbtn 的 onClick 调用中：

```
extbtn.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        // send a broadcast that will finish activities at the bottom of the stack
        Intent killIntent = new Intent(BaseActivity.ACTION_KILL_COMMAND);
        killIntent.setType(BaseActivity.ACTION_KILL_DATATYPE);
        sendBroadcast(killIntent);

        Intent intent = new Intent();
        setResult(RESULT_OK, intent);
        finish();
    }
}); 
```

# sql-server - 在 TSQL 中查询多个表，其中表名来自另一个表

> ID：10880263
> 
> 赞同：2
> 
> 时间：2012-06-04T11:08:04.067
> 
> 标签：sql-server, tsql, dynamic-sql

我需要从表名后缀来自另一个表的表中进行选择，如下所示：

```
declare @value  nvarchar(3),
@table nvarchar(1000),
@SQLST NVARCHAR(255);

set  @value = N'select column1 from tableX';

EXEC @value

set @table ='partoftableY'

Set @SQLST ='select * from' +@tabel + @value -- here I create the table name 
```

但是 TableX (0-999) 中有多个值，因此这不起作用。我需要一个 For Each 类型的构造吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:40:41.587

这里是我用两个表（partoftableY1 & partoftableY2）创建的一个例子，每个表都有不同的数据

```
/*

create table tableX (column1 int);

insert into tablex 
          select 1
union all select 2;

create table partoftableY1 (data nvarchar(50));
create table partoftableY2 (data nvarchar(50));

insert into partoftableY1 select 'hey 1 here';
insert into partoftableY2 select 'hey 2 here';

*/

declare @sql nvarchar(max)

-- use the ability of SQL to build up string of all the sql you need to run

set @sql = 'select data from (select '''' as data'

select @sql = COALESCE(@sql + ' union all ', '') 
               + 'select data from partoftableY' 
               + cast(column1 as nvarchar(4)) from tableX
select @sql = @sql + ') X where data <>'''''

-- DEBUG for seeing what SQL you created
print @sql

-- Now execute the SQL
exec sp_executesql @sql= @sql 
```

这给了我结果

```
hey 1 here
hey 2 here 
```

**您将需要根据数据类型对其进行调整，但这应该会给您主要的想法**

这里的参考是创建和执行的 sql：

```
select data 
from  (
                select '' as data 
      union all select data from partoftableY1 
      union all select data from partoftableY2
     ) X 
where data <>'' 
```

*注意*

*   我将其格式化以便于阅读，因为它实际上是作为一长行创建的
*   我使用了选择数据而不是选择 *，因为联合中每个选择的列数需要相同。您将需要选择所需的列，然后进行更改以确保联合中选择的所有列都相同。
*   联合顶部有一个虚拟选择，使联合代码更容易 - 不需要条件作为联合是否都需要呈现
*   我在整个联合上使用了 out 选择，使您能够获得虚拟选择的 sid

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:43:46.420

你可以试试这个

```
DECLARE @SQLST NVARCHAR(max)='';

DECLARE @select nvarchar(max)=N'select * from partoftableY'

DECLARE @union nvarchar(max)=N'
UNION ALL
'
SELECT @SQLST=@select+column1+@union
FROM tablex

SELECT @SQLST=substring(@SQLST,1,LEN(@SQLST)-11)

EXEC sp_executesql @SQLST 
```

# python - 用于检测峰宽的稳健算法

> ID：10880266
> 
> 赞同：16
> 
> 时间：2012-06-04T11:08:31.477
> 
> 标签：python, scipy

![在此处输入图像描述](../Images/cf1fa245a2317378b6aa99799ba751ab.png)

我询问[了如何以编程方式判断谱带](https://stackoverflow.com/questions/10764569/these-spectrum-bands-used-to-be-judged-by-eye-how-to-do-it-programmatically)，[@detly](https://stackoverflow.com/users/188535/detly)建议使用 FWHM（半峰全宽）来确定峰的宽度。我四处搜索，发现 FWHM 可用于拟合模型（我对此几乎是门外汉！），尤其是高斯模型。具体来说，`2.354 * sigma`是高斯模型[的宽度](http://en.wikipedia.org/wiki/Full_width_at_half_maximum)。

**由于**存在不良峰，我正在寻找高斯拟合。这张图片中有 4 个形状良好的峰。然后是“双”峰（虽然两者都可能很重要）和两个展开的峰。他们将证明对天真的 FWHM 来说是不可能的挑战。

考虑到它的x 坐标的**大致位置**，您能否帮助生成 Scip/Numpy 中峰值的高斯拟合（用于 FWHM 计算） ？如果高斯是一个糟糕的选择，那么其他一些方案。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-04T16:09:36.127

拟合高斯是一个好方法。如果您对初始参数值有正确的猜测，您可以尝试一次全部猜测。一个大问题是噪声，实际上您可能希望单独拟合每个峰（即一次只考虑给定峰所在的范围），或者在数据中获取基线噪声曲线并将其减去。

这是一些尝试拟合多个高斯的代码。我为我认为是 8 个最突出的峰输入了一些非常宽松的参数，加上一个额外的非常宽的 Guassian 来尝试捕捉背景噪声。在处理之前，我稍微清理了您发布的图像，以帮助从中获取数据（删除鼠标光标和轴边缘，并反转图像）。

![在此处输入图像描述](../Images/ca4c352bc58c86cea82a2f8fa5521936.png)

代码：

```
import Image
from scipy import *
from scipy.optimize import leastsq
import numpy as np

im = Image.open("proc.png")
im = im.convert('L')
h, w = im.size
#Extract data from the processed image:
im = np.asarray(im)
y_vals, junk  = np.mgrid[w:0:-1, h:0:-1]
y_vals[im < 255] = 0
y_vals = np.amax(y_vals,axis=0)

def gaussian(x, A, x0, sig):
    return A*exp(-(x-x0)**2/(2.0*sig**2))

def fit(p,x):
    return np.sum([gaussian(x, p[i*3],p[i*3+1],p[i*3+2]) 
                   for i in xrange(len(p)/3)],axis=0)

err = lambda p, x, y: fit(p,x)-y

#params are our intitial guesses for fitting gaussians, 
#(Amplitude, x value, sigma):
params = [[50,40,5],[50,110,5],[100,160,5],[100,220,5],
          [50,250,5],[100,260,5],[100,320,5], [100,400,5],   
          [30,300,150]]  # this last one is our noise estimate
params = np.asarray(params).flatten()

x  = xrange(len(y_vals))
results, value = leastsq(err, params, args=(x, y_vals))

for res in results.reshape(-1,3):
    print "amplitude, position, sigma", res

import pylab
pylab.subplot(211, title='original data')
pylab.plot(y_vals)
pylab.subplot(212, title='guassians fit')
y = fit(results, x)
pylab.plot(x, y)
pylab.savefig('fig2.png')
pylab.show() 
```

这些是拟合的输出高斯参数：

```
#Output:
amplitude, position, sigma [ 23.47418352  41.27086097   5.91012897]
amplitude, position, sigma [  16.26370263  106.39664543    3.67827824]
amplitude, position, sigma [  59.74500239  163.11210316    2.89866545]
amplitude, position, sigma [  57.91752456  220.24444939    2.91145375]
amplitude, position, sigma [  39.78579841  251.25955921    2.74646334]
amplitude, position, sigma [  86.50061756  260.62004831    3.08367483]
amplitude, position, sigma [  79.26849867  319.64343319    3.57224402]
amplitude, position, sigma [ 127.97009966  399.27833126    3.14331212]
amplitude, position, sigma [  20.21224956  379.41066063  195.47122312] 
```

# iphone - xcode：每天更新图标徽章

> ID：10880272
> 
> 赞同：2
> 
> 时间：2012-06-04T11:09:12.903
> 
> 标签：iphone, xcode, calendar, uilocalnotification

我看了很多代码，但还没有得到解决方案，

我只需要每天用一些日历（不是公历）数字更新我的应用程序图标徽章。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:17:19.947

您显然不能使用重复的本地通知，因为您想指定应用程序徽章编号。因此，您必须为安排在午夜的每一天使用一个本地通知，并带有适当的徽章编号。

因为您最多只能安排 64 个本地通知，所以您必须在每次应用程序启动时将通知排队。

此代码未经测试，可能存在夏令时等问题。（适用于 iOS 4.2 或更高版本，使用 ARC）

```
- (void) applicationDidBecomeActive:(UIApplication *)application {
    NSUInteger startingDayAfterToday = [application.scheduledLocalNotifications count];
    NSArray *localNotifications = [self localNotificationsStartingOnDayAfterToday:startingDayAfterToday];
    NSArray *newScheduledNotifications = [application.scheduledLocalNotifications arrayByAddingObjectsFromArray:localNotifications];
    [application setScheduledLocalNotifications:newScheduledNotifications];
}

- (NSArray *) localNotificationsStartingOnDayAfterToday:(NSUInteger)startingDayAfterToday {
    NSMutableArray *localNotifications = [[NSMutableArray alloc] initWithCapacity:64 - startingDayAfterToday];
    for (NSUInteger i = startingDayAfterToday; i < 64; i++) {
        // Create a new local notification
        UILocalNotification *notification = [[UILocalNotification alloc] init];
        notification.hasAction = NO;

        // Create today's midnight date
        NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar]; // Could be other calendar, too
        NSDateComponents *todayDateComponents = [calendar components:(NSEraCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:[NSDate date]];
        NSDate *todayMidnight = [calendar dateFromComponents:todayDateComponents];

        // Create the fire date
        NSDateComponents *addedDaysComponents = [[NSDateComponents alloc] init];
        addedDaysComponents.day = i;
        NSDate *fireDate = [calendar dateByAddingComponents:addedDaysComponents toDate:todayMidnight options:0];

        // Set the fire date and time zone
        notification.fireDate = fireDate;
        notification.timeZone = [NSTimeZone systemTimeZone];

        // Set the badge number
        NSDateComponents *fireDateComponents = [calendar components:NSDayCalendarUnit fromDate:fireDate];
        notification.applicationIconBadgeNumber = fireDateComponents.day;

        // We're done, add the notification to the array
        [localNotifications addObject:notification];
    }

    return [localNotifications copy];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:47:19.320

我不知道你会如何编码，但如果你要向应用商店提交这样的应用程序，苹果不会批准它。Apple 严格的审查指南可能会令人沮丧，就像在这种情况下，它们会限制您的应用程序的功能。对不起 ：（

# file - 文件系统过滤器 MiniDriver

> ID：10880274
> 
> 赞同：0
> 
> 时间：2012-06-04T11:09:14.643
> 
> 标签：file, driver, wdk, interception, minifilter

我有一个需要拦截的 Program.exe。该特定程序使用 CreateFile 和 ReadFile，但是我需要拦截 ReadFile 函数。

我想过编写自己的文件系统过滤器 MiniDriver。我通过谷歌搜索找到了这个链接：http: [//msdn.microsoft.com/en-us/library/ff551862](http://msdn.microsoft.com/en-us/library/ff551862(v=vs.85) (v=vs.85 ) 这似乎是正确的方法。但是上次我做任何驱动程序开发时，我记得 >= VISTA 不允许轻松安装驱动程序。您需要从 Microsoft 获得“签名”特权（您必须付费）。

我的问题是，我可以为我的 U 盘创建简单文件系统过滤器驱动程序并拦截来自 ReadFile() 的任何读数吗？我要做的就是通过特定进程允许 ReadFile 。

1）我合法地需要这个 2）我需要避免未签名的司机，所以司机会一直工作。

从 XP 开始，一个微过滤器驱动程序是否适用于每个操作系统？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:00:03.593

禁止加载未签名的驱动程序仅存在于 x64 版本的 windows >= vista 在 x64 版本上，您可以 1）切换到测试模式以关闭此限制 2）将测试证书作为根添加到证书存储

但是如果你想分发这个驱动程序，你必须提供海湾证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:28:17.423

是的，微过滤器是首选方法。您可以拦截系统调用/IRP，并根据您的标准允许-拒绝其中任何一个。此外，相同的驱动程序代码可用于多个操作系统，但是您需要为特定的操作系统构建。WDK 7 可用于构建从 XP 到 Windows 7 的驱动程序。

此外，正如 izlesa 所建议的，您需要为高于 vista 的 x64 窗口签名。

# java - Struts.config 消息资源 java

> ID：10880275
> 
> 赞同：0
> 
> 时间：2012-06-04T11:09:16.250
> 
> 标签：java, struts

我对 java 比较陌生，谷歌通常可以帮助我克服困难，但我在这方面遇到了很大的麻烦。我在 struts config xml 文件中有 2 个属性文件

```
< message-resources parameter="resources.ApplicationResources"/>
< message-resources parameter="resources.DatabaseProps" key="db"/ > 
```

我知道如果有多个您需要一把钥匙？所以，在我的`DatabaseProps.properties`文件中，我有这个：

```
database=adatabase
table=atable 
```

我需要它以便我可以在我的 java 文件中获取这两个属性，因为这两个属性需要是可变的，所以我可以使用不同的数据库和表。

我无法将字符串数据库和表放入我的 java 代码中。你能帮我吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:34:31.610

MessagesResources 可通过使用[getResources()](http://struts.apache.org/1.3.10/apidocs/org/apache/struts/action/Action.html#getResources%28javax.servlet.http.HttpServletRequest,%20java.lang.String%29)方法的 Action 子类获得。

但正如[MessageResources 的 javadoc](http://struts.apache.org/1.3.10/apidocs/org/apache/struts/util/MessageResources.html)所说：

> 通用抽象类，描述用于从未指定设计的底层资源位置检索区域设置敏感消息的 API，并可选择使用 MessageFormat 类生成具有参数替换的国际化消息。

MessageResources 旨在存储区域设置敏感消息，而不是与国际化无关的通用配置属性。BTW，Struts是一个表现框架，访问数据库不是表现层​​的业务，而是持久层的业务。

`java.util.Properties.load()`您不应该将数据库配置选项存储到 Struts 消息资源中，而应存储在属性文件中，由持久层的某个类加载该方法。

# php - 通过子项键转换数组的优雅方式

> ID：10880279
> 
> 赞同：0
> 
> 时间：2012-06-04T11:09:36.540
> 
> 标签：php, arrays

我有这个数组：

```
array (size=3)
  0 => 
    array (size=2)
      'name' => string 'XML' (length=3)
      'processer' => string 'XMLp' (length=12)
  1 => 
    array (size=2)
      'name' => string 'XML2' (length=3)
      'processer' => string 'XML2pr' (length=12)
  2 => 
    array (size=2)
      'name' => string 'CSV' (length=3)
      'processer' => string 'CSVp' (length=12) 
```

因为我不需要所有这些，所以我没有转换这个数组：

```
$a = array ('XML', 'XML2', 'CSV'); 
```

所以得到'名字'。如何在 php 中优雅地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T11:16:23.423

```
$source = array( 
    0 => array ( 
        'name' =>'A',
        'processer' => 'XMLf'),
    1 => array (
            'name' =>'B',
            'processer' => 'XMLp'),
    2 => array (
            'name' =>'C',
            'processer' => 'XMLp')
);

$output = array_map(function ($value) {
    return $value['name'];
}, $source);

print_r($output); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T11:11:34.370

你可以遍历它，我认为没有更优雅的方式：

```
$a = array();
foreach ($array as $value) {
    $a[] = $value ['name'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T11:12:08.997

```
foreach($array as $a) $new[] = $a['name']; 
```

# asp.net-web-api - 返回一个对象和控制状态码

> ID：10880282
> 
> 赞同：3
> 
> 时间：2012-06-04T11:09:55.797
> 
> 标签：asp.net-web-api

我从 nuget.org 上的 ASP.NET Web API 版本（周五 RC 之前的版本）升级到 myget.org 上的每晚版本。正如预期的那样，有许多重大更改，其中一个我似乎无法解决：我们有一个场景，我们希望我们的操作返回一个对象并将状态代码设置为 201 Created。这在以前很容易完成（可能无法编译——我脑海中的概念代码）：

```
Session session = GetSessionInfo(requestMessage);
var response = new HttpResonseMessage(HttpStatusCode.Created);
response.Content = response.CreateContent(session);
return response; 
```

CreateContent 实际上是位于 System.Net.Http.HttpResponseMessageExtensions 中的扩展方法，它调用 ObjectContent 中的内部构造函数。随着新版本的发布，HttpResponseMessageExtensions 似乎在新版本中消失了，ObjectContent 的内部构造函数也消失了。现在看来我必须调用一个 ObjectContent 构造函数，以下似乎最适合我们的需要：

```
public class ObjectContent<T> : ObjectContent
{
    public ObjectContent(T value, MediaTypeFormatter formatter)
    {
    }
} 
```

但是，似乎我必须将 MediaTypeFormatter 传递给它，将内容协商混合到操作的逻辑中。在我们的设置中，内容协商是通用的，并且与控制器完全分离。

有没有人建议解决场景以返回对象、设置响应状态代码，但不必处理 MediaTypeFormatter、媒体类型或任何其他与内容协商相关的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T01:35:48.413

我们重新设计了`ObjectContent<T>`创作的运作方式。从 RC 开始，您应该调用一`CreateResponse()`组扩展方法（它们是 off `HttpRequestMessage`）。这实际上会产生一个`HttpResponseMessage`带有内容协商实例的实例`ObjectContent<T>`。所以，像：

```
Session session = GetSessionInfo(requestMessage);
var response = Request.CreateResponse(HttpStatusCode.Created, session);
return response; 
```

# asp.net - 事后才在 ASP.NET Web App 中实现安全性

> ID：10880286
> 
> 赞同：2
> 
> 时间：2012-06-04T11:10:09.697
> 
> 标签：asp.net, sql-server-2008, security, sql-server-ce

与许多现实世界的应用程序一样，安全性（登录名/密码）只是为了授予/拒绝对整个应用程序的访问权限。现在客户端要求细粒度的安全性，例如某些网页应该只能查看，一些用户可以删除其他不能等。基本上客户端要求以下内容。

**有效权限：：用户--> 网页--> 访问类型**（查看、创建/编辑、删除）

申请详情

*   ASP.NET/C#
*   用于 Biz 数据的 MSSQL Server 2008
*   用于用户/密码/配置文件/日志的 SQLCE
*   用于主 UI 的 Ext.NET

我们讨论过最好增强**security.sdf**文件并有一个屏幕（网页）表和一个用户+屏幕+一个表示访问类型的数字的连接表，即

*   1：阅读
*   2：写
*   4：删除

这些可以使用按位运算符进行检查。应用程序使用 ASP.NET 模拟来访问 MSSQL2008

问题是如何在 Web 应用程序中实现它？

如果有人有更好的想法，请分享！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:31:36.543

您可以使用该`IsInRole`功能并将用户分类为角色。每个角色都可以有一些只能执行的操作。因此，通过询问女巫角色是用户，您可以让他做或不思考。

```
HttpContext.Current.User.IsInRole("Role") 
```

或者你可以反过来做，询问这个角色是否可以使用这个动作，这里是一个简单的对象，有权限和检查。

```
public enum csPermissions
{
    pActionDelete = 1,   
    pActionEdit = 2 , 
    // more names...
}

private int[] AdminPermission = { 
    (int)csPermissions.pActionEdit, 
    (int)csPermissions.pActionDelete, 
    // more permissions...
};

private int[] BackOfficePermission = { 
    (int)csPermissions.pActionEdit, 
    // more permissions...
}; 

public static bool IsThisAllowed(csPermissions AskPermitForThisAction)
{
    // questions here for all users roles...
    // here is only an example 
    if (HttpContext.Current.User.IsInRole("Administator")))
    {
        for (int i = 0; i < AdminPermission.Length; i++)
            if (AdminPermission[i] == (int)AskPermitForThisAction)
                return true;
    } 

    // no permission found  
    return false;
 } 
```

# c# - 在 asp:repeater 中查找控件按钮单击事件

> ID：10880297
> 
> 赞同：11
> 
> 时间：2012-06-04T11:10:49.820
> 
> 标签：c#, asp.net

我在 asp:repeater 项目模板中有一个下拉列表。如何在按钮单击事件中获取其值。

```
<asp:Repeater runat="server" ID="WorkflowListAfter" onitemcreated="WorkflowListAfterItemCreated">
    <ItemTemplate>
         <asp:DropDownList ID="ddlWorkflowMembers" runat="server" DataTextField="MemberName" DataValueField="MemberID">
    </ItemTemplate>
</asp:Repeater>

protected DropDownList ddlWorkflowMembers = new DropDownList();
protected void WorkflowListAfterItemCreated(object sender, RepeaterItemEventArgs e)
{
    ddlWorkflowMembers = (DropDownList) e.Item.FindControl("ddlWorkflowMembers");
}
protected void BtnSaveClick(object sender, EventArgs e) {
    if (ddlWorkflowMembers.SelectedItem == null) return;
} 
```

上面的代码第一次工作，但回发后 ddlWorkflowMembers 总是空 expersion。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-04T11:18:24.723

假设它`BtnSave`也在中继器内部。

您可以`RepeaterItem`通过投射按钮的[`NamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.namingcontainer.aspx). 然后您可以使用`FindControl`来获取对您的引用`DropDownList`：

```
protected void BtnSaveClick(object sender, EventArgs e) {
    var btn =  (Button)sender;
    var item = (RepeaterItem)btn.NamingContainer;
    var ddl =  (DropDownList) item.FindControl("ddlWorkflowMembers");
    // ...
} 
```

如果按钮在中继器之外，并且您想保存所有项目，则需要遍历所有：

```
protected void BtnSaveClick(object sender, EventArgs e) {
    foreach(RepeaterItem item in WorkflowListAfter.Items)
    {
        var ddl =  (DropDownList) item.FindControl("ddlWorkflowMembers");
        // ...
    }       
} 
```

# sql-server - OLAP 数据库支持 HIJRI 日期？

> ID：10880300
> 
> 赞同：0
> 
> 时间：2012-06-04T11:11:22.253
> 
> 标签：sql-server, ssas, olap

我想知道OLAP数据库是否支持HiJRI日期，我的数据源是oracle数据库。如果不支持，是否有任何解决方法？

提前致谢

# android - SSL pinning 的 Sporadicall 错误

> ID：10880303
> 
> 赞同：2
> 
> 时间：2012-06-04T11:11:31.617
> 
> 标签：android, ssl, openssl, httpclient, bouncycastle

我正在尝试按照这种方法实现 SSL 固定：

[http://blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html](http://blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html)

该策略是将受信任的证书放在[BKS](http://www.bouncycastle.org/)密钥库中，并扩展[HTTPClient](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)使用的[SSLSocketFactory](http://developer.android.com/reference/org/apache/http/conn/ssl/SSLSocketFactory.html) ，以便只接受密钥库中包含的证书。

它在多个测试设备（Nexus、Samsung S1、Wildfire 等）上都可以正常工作，除了三星 Galaxy S2（带有 2.3.6 的欧洲版本）。偶尔（可能 3-4 次尝试）我收到以下错误消息之一：

*   错误：0407006A：rsa 例程：RSA_padding_check_PKCS1_type_1：块类型不是 01 (SHA-1)
*   错误：04067084：rsa 例程：RSA_EAY_PUBLIC_DECRYPT：数据对于模数太大（SHA-1）

只有当我在 BKS 中有多个具有相同 CNAME 条目的密钥时，才会出现此问题。当我在密钥库中只放一个密钥时，它每次都可以正常工作。但是，如果我想更改我的后端证书，以便有一个平稳的过渡期，我需要该应用程序能够接受同一主机的两个密钥。

任何想法可能是错误消息的原因以及如何规避它，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-02T06:37:46.993

> 该策略是将受信任的证书放在 BKS 密钥库中，并扩展 HTTPClient 使用的 SSLSocketFactory，以便只接受密钥库中包含的证书。

对于固定，您只需要扩展`X509TrustManager`和覆盖`checkServerTrusted`.

OWASP 的[证书和公钥固定](https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning)中提供了一个示例（请参阅 Android 示例）。[所有示例都从random.org](http://www.random.org/)获取随机字节并固定站点的证书以确保没有 PKI 有趣的业务：

```
public final class PubKeyManager implements X509TrustManager
{
  private static String PUB_KEY = "30820122300d06092a864886f70d0101" +
    "0105000382010f003082010a0282010100b35ea8adaf4cb6db86068a836f3c85" +
    "5a545b1f0cc8afb19e38213bac4d55c3f2f19df6dee82ead67f70a990131b6bc" +
    "ac1a9116acc883862f00593199df19ce027c8eaaae8e3121f7f329219464e657" +
    "2cbf66e8e229eac2992dd795c4f23df0fe72b6ceef457eba0b9029619e0395b8" +
    "609851849dd6214589a2ceba4f7a7dcceb7ab2a6b60c27c69317bd7ab2135f50" +
    "c6317e5dbfb9d1e55936e4109b7b911450c746fe0d5d07165b6b23ada7700b00" +
    "33238c858ad179a82459c4718019c111b4ef7be53e5972e06ca68a112406da38" +
    "cf60d2f4fda4d1cd52f1da9fd6104d91a34455cd7b328b02525320a35253147b" +
    "e0b7a5bc860966dc84f10d723ce7eed5430203010001";

  public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException
  {
    if (chain == null) {
      throw new IllegalArgumentException("checkServerTrusted: X509Certificate array is null");
    }

    if (!(chain.length > 0)) {
      throw new IllegalArgumentException("checkServerTrusted: X509Certificate is empty");
    }

    if (!(null != authType && authType.equalsIgnoreCase("RSA"))) {
      throw new CertificateException("checkServerTrusted: AuthType is not RSA");
    }

    // Perform customary SSL/TLS checks
    try {
      TrustManagerFactory tmf = TrustManagerFactory.getInstance("X509");
      tmf.init((KeyStore) null);

      for (TrustManager trustManager : tmf.getTrustManagers()) {
        ((X509TrustManager) trustManager).checkServerTrusted(chain, authType);
      }
    } catch (Exception e) {
      throw new CertificateException(e);
    }

    // Hack ahead: BigInteger and toString(). We know a DER encoded Public Key begins
    // with 0x30 (ASN.1 SEQUENCE and CONSTRUCTED), so there is no leading 0x00 to drop.
    RSAPublicKey pubkey = (RSAPublicKey) chain[0].getPublicKey();
    String encoded = new BigInteger(1 /* positive */, pubkey.getEncoded()).toString(16);

    // Pin it!
    final boolean expected = PUB_KEY.equalsIgnoreCase(encoded);
    if (!expected) {
      throw new CertificateException("checkServerTrusted: Expected public key: "
                + PUB_KEY + ", got public key:" + encoded);
      }
    }
  }
} 
```

# android - ORMLite where clausule in String Array

> ID：10880307
> 
> 赞同：2
> 
> 时间：2012-06-04T11:12:07.027
> 
> 标签：android, arrays, where-clause, ormlite

我使用 ormlite，我有一个带有字段的数据库：

```
public static final String NAME = "name"; 
@DatabaseField (canBeNull = false, dataType = DataType.SERIALIZABLE, columnName = NAME)
private String[] name = new String[2]; 
```

我想获取所有 name[0] 和 name[1] 是“汽车”的元素。我尝试添加一个 where 子句，例如：

```
NAMEDB nameDB = null;
Dao<NAMEDB, Integer> daoName = this.getHelper().getDao(NAMEDB.class);
QueryBuilder<NAMEDB, Integer> queryName = daoName.queryBuilder();
Where<NAMEDB, Integer> where = queryName.where();
where.in(nameDb.NAME, "car"); 
```

但它不起作用，因为它是一个数组字符串。

我还有其他领域：

```
public static final String MARK = "mark";

@DatabaseField (canBeNull = false, foreign = true, index = true, columnName = MARK)
private String mark = null; 
```

我可以这样做：

```
whereArticulo.in(nameDB.MARK, "aaa"); 
```

我该如何解决我的问题？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:06:58.503

在我看来，`String[] someStringArray[]`在数据库中`Ormlite`存储字符串数组（将其从数据库中取出。

例如，持久化类将转换`["John Doe", "Joe Smith"]`为`"John Doe | Joe Smith"`用于数据库存储（使用对您的数据有意义的任何分隔符），并在将数据从数据库中取出时转换回另一种方式。

关于这种方法与使用 Serializable 或外国集合的任何想法？有人试过这个吗？

我刚刚写了我的第一个持久化类，这很容易。我无法通过网络搜索或 StackOverflow 搜索确定是否有人尝试过此操作。

谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-07T18:17:03.337

正如 ronbo4610 建议的那样，在这种情况下使用自定义数据持久化器是一个好主意，将数组作为字符串存储在数据库中，由某种分隔符分隔。然后，您可以像搜索任何其他字符串一样在 WHERE 子句中搜索该字符串。（例如，使用 LIKE 运算符）

我已经实现了这样一个数据持久化器。为了使用它，您必须在持久类中的 String[] 对象上方添加以下注释：

```
@DatabaseField(persisterClass = ArrayPersister.class) 
```

此外，您必须使用以下代码创建一个名为“ArrayPersister”的新类：

```
import com.j256.ormlite.field.FieldType;
import com.j256.ormlite.field.SqlType;
import com.j256.ormlite.field.types.StringType;
import org.apache.commons.lang3.StringUtils;

public class ArrayPersister extends StringType {
    private static final String delimiter = ",";
    private static final ArrayPersister singleTon = new ArrayPersister();

    private ArrayPersister() {
        super(SqlType.STRING, new Class<?>[]{ String[].class });
    }

    public static ArrayPersister getSingleton() {
        return singleTon;
    }

    @Override
    public Object javaToSqlArg(FieldType fieldType, Object javaObject) {
        String[] array = (String[]) javaObject;

        if (array == null) {
            return null;
        }
        else {
            return StringUtils.join(array, delimiter);
        }
    }

    @Override
    public Object sqlArgToJava(FieldType fieldType, Object sqlArg, int columnPos) {
        String string = (String)sqlArg;

        if (string == null) {
            return null;
        }
        else {
            return string.split(delimiter);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T14:08:41.623

不幸的是*，*[ORMLite](http://ormlite.com/)不支持查询类型为 的字段。它将数组存储为序列化，因此您无法使用以下查询查询值：*`SERIALIZABLE``byte[]``IN`*

 *```
where.in(nameDb.NAME, "car"); 
```

ORMLite 确实支持外部集合，但您必须使用另一个保存名称的类自己设置它。请参阅带有示例代码的文档：

> [http://ormlite.com/docs/foreign-collection](http://ormlite.com/docs/foreign-collection)*

# sqlite - 使用流利的 NHibernate 和 Sqlite 工作 c# solution .net 4

> ID：10880308
> 
> 赞同：1
> 
> 时间：2012-06-04T11:12:08.567
> 
> 标签：sqlite, .net-4.0, fluent-nhibernate

我知道这里已经发布了类似的问题并且已经回答了，但是这些解决方案对我没有用。我想创建一个项目，它将使用 sqlite 数据库，流利的 nhibernate（全部在 .Net 4 中）。问题是我找不到可以作为参考的工作示例。我所有的努力都以 Exception(Could not create the driver from NHibernate.Driver.SQLite20Driver, NHibernate, Version=3.1.0.4000, Culture=neutral, PublicKeyToken=aa95f207798dfdb4.) 结束：

new SchemaExport(configuration).Create(true, true);

我在其他解决方案中提到的 app.config 中添加了这些行。

所以总结一下：任何人都可以发布一个确切的方法来创建一个带有一些示例代码的解决方案（最好是来自 fluent nhibernate 入门指南的教程），这将在 .net 4 中工作？

如果可以，请发布文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:38:02.317

我认为您的问题可以通过[这个答案](https://stackoverflow.com/a/2627209/102554)来解决，为方便起见，在下面引用。我看到您已经更改了应用程序配置，但**请注意有关获取 .NET 4 兼容版本的 SQLite 的帖子的链接。**

**引用：**

您需要使用 [与 .NET 4.0 兼容的 SQLite 版本](http://geeklyeverafter.blogspot.com/2010/03/sqlite-available-for-net-40.html)。你也可以尝试把它放在你的 app.config 中：

```
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0"/>
  </startup>
</configuration> 
```

**/引用**

一旦您的示例工作，请将其加载到 FNH GitHub。

# r - 计算主成分分析的特征向量和特征值

> ID：10880310
> 
> 赞同：0
> 
> 时间：2012-06-04T11:12:26.460
> 
> 标签：r, pca, eigenvector, eigenvalue

我正在尝试对一些 3D 扫描执行主成分分析，但是在计算和使用特征值和特征向量时我被卡住了。

扫描采用 .obj 文件格式。

```
 x          y         z
v 0.001888 -0.058120 -0.069146
v 0.007348 -0.066757 -0.062134
...                        ...
f 6436 6439 6445
f 6446 6445 6430 
```

有 6449 个向量、12894 个面和 115 次扫描。我的理解是，由于数据是 3D 的，我无法使用内置`princomp`功能，而且由于数据量大，我可能会在笔记本电脑上遇到一些内存问题，最后我想学习手动进行 PCA。

我相信执行此操作有 5 个阶段

1.  计算平均 3D 扫描。酒吧X
2.  从每个扫描中减去平均值。Xa - BarX = 酒吧 Xa
3.  创建一个 Bar Xa * Bar Xa = Ma 的矩阵
4.  计算 Ma 的特征值和特征向量。帕
5.  将平均形状 BarX 添加到 Pa 以根据特征值和特征向量查看形状变形

我希望我没有过度简化这一点，但由于我不是数学家/统计学家，这是我目前的理解。

第 1 阶段和第 2 阶段我已经完成了，因为它们很简单，但我对以下阶段感到困惑。

由于我担心遇到内存问题，我将分别为 x、y 和 z 创建一个矩阵。所以我正在创建一个 6449x6449 的对角矩阵，其中 x * x。这是我用来为第一次扫描的 x 创建矩阵的代码。

```
text <- readLines("R/location/scan1.obj", encoding="UTF-8")

xmat <- matrix(1:6449, ncol=1)
mat <- diag(6449)

for(i in 1:6449){
    xyzLine <- sub("v ", "", text[i])
    xyzList <- unlist(strsplit(xyzLine, " "))
    xmat[i, 1] = as.numeric(xyzList[1])
}

for(i in 1:6449){
    for(j in 1:6449){
        mat[i, j] <- xmat[i, 1] * xmat[j, 1]
    }
} 
```

我对 x、y 和 z 执行此操作。然后使用计算特征值和特征向量

```
eigenx <- eigen(x)
eigeny <- eigen(y)
eigenz <- eigen(z) 
```

在这个阶段我不确定我所做的是否正确？但是从这里开始，我不知道如何将特征向量和特征值组合成一种格式，我可以将它们添加到 BarX 上以查看形状变形？

如果有人有建议或指导，将不胜感激。

提前致谢。

# c# - 使用 C# 解析具有相同标签名称的 JSON

> ID：10880313
> 
> 赞同：0
> 
> 时间：2012-06-04T11:12:41.420
> 
> 标签：c#, json

我正在使用 C# 编写代码，它将解析 JSON 代码并将其创建为对象。

我有这个 JSON 示例

```
{
     "firstName": "John",
     "lastName" : "Smith",
     "age"      : 25,
     "address"  :
     {
         "streetAddress": "21 2nd Street",
         "city"         : "New York",
         "state"        : "NY",
         "postalCode"   : "10021"
     },
     "phoneNumber":
     [
         {
           "type"  : "home",
           "number": "212 555-1234"
         },
         {
           "type"  : "fax",
           "number": "646 555-4567"
         }
     ]
 } 
```

如您所见，有多个号码，有些人有 1 个电话号码，有些人有 4 个或 5 个。

我知道我应该做一个 While 循环，但我可以得到电话号码中有多少电话，以使用它一个计数器将这些电话添加到我创建的 PhoneNumber 对象中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:54:35.280

使用 NEWTONSOFT.JSON，您可以通过此代码获取 PhoneNumber 数组

```
JArray sa = (JArray)o["person"]["phoneNumbers"]["phoneNumber"]; 
```

这将获取可用的电话号码数量

```
sa.Count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:01:36.640

如果您使用 Json.Net 来解析 json，那么首先您应该创建以下创建并将 json 反序列化为以下联系人对象，在反序列化为联系人对象之后，一切都会很简单。

```
public class Contact
{
  public string firstName { get; set; }
  public string lastName { get; set; }
  public int age { get; set; }
  public address address { get; set; };
  public List<phoneNumber> phoneNumber { get; set; }
}

public class address
{
     public string streetAddress { get; set; }
     public string city { get; set; }
     public string state { get; set; }
     public string postalCode { get; set; }
}

public class phoneNumber
{
     public string type { get; set; }  
     public string number { get; set; }
}

var contact = Newtonsoft.Json.JsonConvert.DeserializeObject<Contact>(data);
var count = contact.phonenumber.Count; 
```

# asp.net-mvc-3 - 单击提交按钮后如何设置复选框选中的项目

> ID：10880315
> 
> 赞同：0
> 
> 时间：2012-06-04T11:12:48.067
> 
> 标签：asp.net-mvc-3

我的视图代码是：

```
@using(Html.BeginForm("submit","Security",FormMethod.Post)) 
{ 

@foreach (var item in Model.app_function) 

{ 

 <input type="checkbox" name="Functioncheck" value="@item.app_function_id"/> 
                    @Html.Encode(item.app_function_name)

}

    <input type="submit" value="submit" /> 
} 
```

单击提交按钮后，选中的值将保存到数据库中，但未选中选中的值。

我的控制器代码是：

```
[AcceptVerbs(HttpVerbs.Post)]
    public ViewResult submit(FormCollection fm)
    {

                string Roleecheck = Request.Form["Functioncheck"].ToString();
                string[] x = Roleecheck.Split(',');
                int a = Convert.ToInt32(x.Length);
                for (int i = 0; i < x.Length; i++)
                {
                    int userid = Convert.ToInt32(x[i]);
                    var myEntity = new user_role { role_id = id, user_id = userid, created_date = DateTime.Now, created_by = 1 };
                    UpdateModel(myEntity);
                    am.Add(myEntity);
                }
                am.Save();

return view();

        } 
```

点击提交后，给我一些关于如何设置复选框选中项目的想法。

谢谢。

# python - 遍历文件夹中的文件并在列中添加值？

> ID：10880317
> 
> 赞同：3
> 
> 时间：2012-06-04T11:12:55.047
> 
> 标签：python

我有多个文件，数据写入两列，如下所示：

```
asp 1.88
gln 3.10
arg 0.99
his 1.11 
```

和

```
asp 0.99
gln 1.11
arg 0.08
his 0.01 
```

等等。

我想要做的是将它们添加并写入这样的新文件：

```
asp 2.87
gln 4.21
arg 1.07
his 1.12 
```

我正在尝试通过导入`Counter`，但效果不佳。我也试过这样：

```
inp = ('c"/users/ansm/desktop/xx.txt','r').read().strip().split('\n')
inp2 = ('c"/users/ansm/desktop/xyz.txt','r').read().strip().split('\n')
c = Counter(inp)
d = Counter(inp2)
print c+d 
```

但此代码不会将值相加。

有没有其他方法可以在不使用的情况下做到这一点`Counter`？我曾经`glob.iglob`在整个文件夹中迭代具有`.txt`格式的文件，然后想要处理它们以获得上述结果。使用`Counter`是最有效的方法还是其他更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:20:11.837

使用此构造创建计数器：

```
c = Counter(dict((x.split()[0], float(x.split()[1])) for x in inp))
d = Counter(dict((x.split()[0], float(x.split()[1])) for x in inp2)) 
```

结果`c+d`将是：

```
Counter({'gln': 4.21, 'asp': 2.87, 'his': 1.12, 'arg': 1.07}) 
```

**编辑**许多文件：

```
s = Counter()
for filename in glob.iglob('*.txt'):
    with open(filename, 'r') as f:
        for line in f:
            k, v = line.split()
            s[k] += float(v)
print s
with open('sum.txt', 'w') as f:
    for k, v in sorted(s.iteritems()):
        f.write('{0} {1}\n'.format(k, v)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T12:01:35.813

如何使用 defaultdict：

```
from collections import defaultdict
import glob

d = defaultdict(float)

for filename in glob.iglob('*.txt'):
    with open(filename, "r") as f:
        for line in f:
            k,v = f.split(" ")
            d[k] += float(v)

with open("output.txt", "w") as out:
    for k, v in d.iteritems:
        out.write("%s %f\n" % (k,v)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:18:52.993

这种方法怎么样（`Counter`不按要求使用）：

```
with open('xx.txt') as f1, open('xyz.txt') as f2, open('result.txt', 'w') as outf:
    for line1 in f1:
        for line2 in f2:
            count = float(line1.split()[-1]) + float(line2.split()[-1])
            outf.write('{:s} {:.2f}\n'.format(line2.split()[0], count)) 
```

并`result.txt`包含：

```
asp 2.87
gln 2.99
arg 1.96
his 1.89 
```

这假设数据包含相同的键并且它们的顺序相同。

`with`当您完成或发生异常时，使用该构造将自动为您关闭 3 个文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T11:22:20.060

您必须按如下方式在两个计数器中添加每个元素，因为原始计数器存储的是字符串而不是其值的数字（注意`float()`转换）：

```
r = Counter(c)
for k, v in d.items():
    r[k] += float(v) 
```

现在添加的值在`r`. `c`一种更简单的方法是在创建and时直接执行转换`d`：

```
c = Counter((p[0], float(p[1])) for p in map(lambda s: s.split(), inp))
d = Counter((p[0], float(p[1])) for p in map(lambda s: s.split(), inp2)) 
```

现在这将按预期工作：

```
c + d
> Counter({'gln': 4.21, 'asp': 2.87, 'his': 1.12, 'arg': 1.07}) 
```

另请注意，您读取文件的方式并不是最安全的：您打开但从不关闭它们，更好的方法是使用`with open`，如下所示：

```
inp = []
with open('c:/users/ansm/desktop/xx.txt', 'r') as input:
    for line in input:
        inp.append(line.strip()) 
```

# java - java中的正则表达式

> ID：10880319
> 
> 赞同：0
> 
> 时间：2012-06-04T11:13:37.393
> 
> 标签：java, regex

我有以下代码对字符串执行一些正则表达式

```
public class RegexForPresto {

public static void main(String[] args) {

    Pattern p = Pattern.compile("^M^M rawtostampedMsg^L 48^UT ");

    String candidateString = "^M^M rawtostampedMsg^L 48^UT 1338802566.906^EOH^name;

    Matcher matcher = p.matcher(candidateString);
    String tmp = matcher.replaceAll("");

    System.out.println(tmp);
    }

    } 
```

而不是仅仅得到

```
^EOH^name 
```

执行时得到以下输出

```
^M^M rawtostampedMsg^L 48^UT 1338802566.906^EOH^name 
```

也可以从字符串中删除“^EOH^”，以便仅获得“名称”作为输出。我不知道如何删除特殊字符（“^”）。任何帮助表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:18:03.100

你可以使用这个模式

```
.*EOH.(.*) 
```

然后从第一个捕获组中获取结果，如下所示：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import org.junit.Test;

import junit.framework.Assert;

public class PatternTest {
    @Test public void testPatter() {
        Pattern p = Pattern.compile(".*EOH.(.*)");
        String candidateString = "^M^M rawtostampedMsg^L 48^UT 1338802566.906^EOH^name";
        Matcher matcher = p.matcher(candidateString);
        if(matcher.matches()){
            String tmp = matcher.group(1);
            Assert.assertEquals("name", tmp);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:18:31.120

目前尚不清楚您要做什么。似乎您想将`ˆ`视为普通字符。在这种情况下，您必须在正则表达式中使用`\\ˆ`.

是`^`一个特殊字符。

您可能还想尝试在线测试仪，例如[这个](http://www.regexplanet.com/advanced/java/index.html)。测试速度会更快，并且会更清楚地解释匹配的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T11:19:41.680

虽然我没有测试过代码，但我认为这应该对你有用：

```
public class RegexForPresto {

 public static void main(String[] args) {

    Pattern p = Pattern.compile(Pattern.quote("^M^M rawtostampedMsg^L 48^UT ")); // <-- This line is changed

    String candidateString = "^M^M rawtostampedMsg^L 48^UT 1338802566.906^EOH^name;

    Matcher matcher = p.matcher(candidateString);
    String tmp = matcher.replaceAll("");

    System.out.println(tmp);
}
} 
```

# javascript - 通过“文档外”标签的javascript获取标签内容

> ID：10880320
> 
> 赞同：3
> 
> 时间：2012-06-04T11:13:41.297
> 
> 标签：javascript, objective-c

我有这个 HTML 源代码：

```
<div id='fbResponse' style='display:none'>{"key1":"value1","key2":"value2"}</div>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
    <script type="text/javascript">
     ....
    </script>
</head>
<body onload="initFB()" style="text-align: center">
    ....
</body>
</html> 
```

如何获取 id 为“fbResponse”的 div 标签的内容文本，我已经尝试过该功能

```
document.getElementById('tag id'), 
```

它不起作用，我认为这是因为标签：

```
<div id='fbResponse' style='display:none'>{"key1":"value1","key2":"value2"}</div> 
```

不在“文档”中。

**编辑：** 我需要它工作的浏览器是移动 Safari (iOS)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:38:47.773

```
<div id='fbResponse' style='display:none'>{"key1":"value1","key2":"value2"}</div>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
</head>
<body>

<script type="text/javascript">
    console.log(document.getElementById('fbResponse'));
</script>
</body>
</html> 
```

即使在 IE 中也有一个日志......我认为你做错了什么

# r - 如何连接到 R 语言的 Unix 域（AF_UNIX）套接字？

> ID：10880323
> 
> 赞同：4
> 
> 时间：2012-06-04T11:14:07.907
> 
> 标签：r, sockets

我有一个要求，我需要从 R 连接到基于本地文件的 unix 域[套接字](http://en.wikipedia.org/wiki/Unix_domain_socket) 。R 默认具有 make,read.socket(),socketConnection() 函数，它们将 host:port 作为参数但不作为 files 。有没有我可以通过它连接到基于文件的 unix 本地套接字并从中读/写的包？

谢谢 sanre6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:39:33.437

我认为您可能会将 C 语言的套接字接口与 R 表示混淆。

`.C()`如果您需要连接到 C 级套接字，请编写 C 代码并通过and（最好）`.Call()`接口将其绑定到 R。有关 R 的 C 级接口，请参阅“编写 R 扩展”手册，还可能参阅[Rcpp](http://dirk.eddelbuettel.com/code/rcpp.html)文档，了解在这些之上的更高级别的 C++ 接口。

# java - 更改了其中一个侦听器适合可见性的 JPanel

> ID：10880326
> 
> 赞同：23
> 
> 时间：2012-06-04T11:14:15.897
> 
> 标签：java, swing, listener, jpanel, jcomponent

是否有一些规则，或者好的/坏的经验`AncestorListener`，`ComponentListener`或者用和`HierarchyListener`监听变化的可见性？`JPanel``JComponents`

其中一个比其他的更好或更安全吗？我特别想知道`JPanel`/何时以及如何`JComponent`隐藏。

请注意以下代码包含不正确的 Swing 规则，例如`Thread.sleep(int)`在这种情况下使用 ，以允许我`Listeners`在 Swing GUI中打印出正确的顺序

```
import java.awt.BorderLayout;
import java.awt.CardLayout;
import java.awt.event.ComponentEvent;
import java.awt.event.ComponentListener;
import java.awt.event.HierarchyEvent;
import java.awt.event.HierarchyListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.event.AncestorEvent;
import javax.swing.event.AncestorListener;

public class CardlayoutTest extends JFrame {

    private static final long serialVersionUID = 1L;
    public CardLayout card = new CardLayout();

    public CardlayoutTest() {
        JPanel pnlA = new JPanel(new BorderLayout());
        pnlA.add(new JButton("A"), BorderLayout.CENTER);
        JPanel pnlB = new JPanel(new BorderLayout());
        pnlB.add(new JButton("B"), BorderLayout.CENTER);
        JPanel pnlC = new JPanel(new BorderLayout());
        pnlC.add(new JButton("C"), BorderLayout.CENTER);

        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLayout(card);
        add(pnlA, "A");
        add(pnlB, "B");
        add(pnlC, "C");

        pnlA.addAncestorListener(new EventHandler());
        pnlB.addAncestorListener(new EventHandler());
        pnlC.addAncestorListener(new EventHandler());

        pnlA.addHierarchyListener(new EventHandler());
        pnlB.addHierarchyListener(new EventHandler());
        pnlB.addHierarchyListener(new EventHandler());

        pnlA.addComponentListener(new EventHandler());
        pnlB.addComponentListener(new EventHandler());
        pnlB.addComponentListener(new EventHandler());
    }

    class EventHandler implements AncestorListener, ComponentListener, HierarchyListener {

        @Override
        public void ancestorAdded(AncestorEvent event) {
            System.out.println("CardlayoutTest.EventHandler.ancestorAdded()");
        }

        @Override
        public void ancestorMoved(AncestorEvent event) {
            System.out.println("CardlayoutTest.EventHandler.ancestorMoved()");
        }

        @Override
        public void ancestorRemoved(AncestorEvent event) {
            System.out.println("CardlayoutTest.EventHandler.ancestorRemoved()");
        }

        @Override
        public void hierarchyChanged(HierarchyEvent e) {
            System.out.println("Components Change: " + e.getChanged());
            if ((e.getChangeFlags() & HierarchyEvent.DISPLAYABILITY_CHANGED) != 0) {
                if (e.getComponent().isDisplayable()) {
                    System.out.println("Components DISPLAYABILITY_CHANGED : " + e.getChanged());
                } else {
                    System.out.println("Components DISPLAYABILITY_CHANGED : " + e.getChanged());
                }
            }
            if ((e.getChangeFlags() & HierarchyEvent.SHOWING_CHANGED) != 0) {
                if (e.getComponent().isDisplayable()) {
                    System.out.println("Components SHOWING_CHANGED : " + e.getChanged());
                } else {
                    System.out.println("Components SHOWING_CHANGED : " + e.getChanged());
                }
            }
        }

        public void componentHidden(ComponentEvent e) {
            System.out.println(e.getComponent().getClass().getName() + " --- Hidden");
        }

        public void componentMoved(ComponentEvent e) {
            System.out.println(e.getComponent().getClass().getName() + " --- Moved");
        }

        public void componentResized(ComponentEvent e) {
            System.out.println(e.getComponent().getClass().getName() + " --- Resized ");
        }

        public void componentShown(ComponentEvent e) {
            System.out.println(e.getComponent().getClass().getName() + " --- Shown");
        }
    }

    public static void main(String[] args) {
        CardlayoutTest t = new CardlayoutTest();
        t.setSize(500, 500);
        System.out.println("CardlayoutTest.main()------------------------ FIRST");
        t.card.show(t.getContentPane(), "A");
        t.setVisible(true);
        System.out.print("\n");
        try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
        }
        System.out.println("CardlayoutTest.main()------------------------ SECOND");
        t.card.show(t.getContentPane(), "B");
        System.out.print("\n");
        try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
        }
        System.out.println("CardlayoutTest.main()------------------------ THIRD");
        t.card.show(t.getContentPane(), "C");
        System.out.print("\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-04T12:54:17.730

如果你想听听可见性的变化 - 使用`ComponentListener`or `ComponentAdapter`：

```
 JPanel panel = new JPanel ();
    panel.addComponentListener ( new ComponentAdapter ()
    {
        public void componentShown ( ComponentEvent e )
        {
            System.out.println ( "Component shown" );
        }

        public void componentHidden ( ComponentEvent e )
        {
            System.out.println ( "Component hidden" );
        }
    } ); 
```

但这种可见性可能不是你所想的。即使没有添加到任何`isVisible()`标志，也不会显示标志！`true``Component``Container`

这种可见性 a 的目的略有不同。您可以使用它手动隐藏`Component`已添加并显示在应用程序某处的内容。在这种情况下，（如果您使用`setVisible(false)`）它将被隐藏，并且每个`ComponentListener`人`Component`都会被告知该更改。

因此，谈论实际可见性...

这是您应该用来收听**实际**组件出现/消失的内容：

```
 JPanel panel = new JPanel ();
    panel.addAncestorListener ( new AncestorListener ()
    {
        public void ancestorAdded ( AncestorEvent event )
        {
            // Component added somewhere
        }

        public void ancestorRemoved ( AncestorEvent event )
        {
            // Component removed from container
        }

        public void ancestorMoved ( AncestorEvent event )
        {
            // Component container moved
        }
    } ); 
```

我总是使用该侦听器来确定何时将`Component`其添加到某处，并在移动/移除它时进行侦听。

此外，您始终可以通过调用方法检查`Component`应用程序用户是否实际可见：`isShowing()`

```
boolean userCanSeeThePanel = panel.isShowing(); 
```

This will return `true` ONLY if that panel is added to VISIBLE to user frame and `isVisible()` flag is also true (it is usually `true`, unless you set it to `false`).

I guess that's all I can tell you about visibility. I might have misunderstood your question. Correct me if I am wrong in that case.

# ruby-on-rails - 正确的全文索引 Rails/PostgreSQL/pg_search

> ID：10880327
> 
> 赞同：10
> 
> 时间：2012-06-04T11:14:28.360
> 
> 标签：ruby-on-rails, postgresql, pg-search

我正在测试 PostgreSQL 全文搜索（使用 pg_search gem）和 solr（sunspot_solr gem）的性能。

对于 400 万条记录，**Tsearch 为 13456**毫秒，**SOLR 为 800 毫秒**（即 SOLR 查询 + DB 检索）。很明显，我需要索引，但我不确定如何为全文搜索创建索引。我调查并发现对于全文搜索我应该使用 GIN 索引。

```
execute "CREATE INDEX products_gin_title ON products USING GIN(to_tsvector('english', title))" 
```

但是我正在通过另外两列进行搜索，并且我需要多值索引，但我不确定如何实现它？我对数据库部分不是很熟悉。我的搜索代码如下所示：

```
@results = Product.search_title(params[:search_term]).where("platform_id=? AND product_type=?", params[:platform_id], params[:type_id]).limit(10).all 
```

*如何为这种情况创建正确的查询？*

这是 rails 搜索词**car**的 SQL 输出。

```
Product Load (12494.0ms)
SELECT 
    "products".*, 
    ( ts_rank((to_tsvector('simple', coalesce("products"."title"::text, ''))), (to_ tsquery('simple', ''' ' || 'car' || ' ''')), 2) ) AS pg_search_rank 
FROM "products" 
WHERE (((to_tsvector('simple', coalesce("products"."tit le"::text, ''))) @@ (to_tsquery('simple', ''' ' || 'car' || ' ''')))) 
    AND (platform_id='26' AND product_type='2') 
ORDER BY pg_search_rank DESC, "products"."id" ASC 
LIMIT 10 
```

编辑：

我正在使用 PostgreSQL 8.4.11，`EXPLAIN ANALYZE`输出如下。

```
Limit  (cost=108126.34..108126.36 rows=10 width=3824) (actual time=12228.736..12228.738 rows=10 loops=1)   
->  Sort (cost=108126.34..108163.84 rows=14999 width=3824) (actual time=12228.733..12228.734 rows=10 loops=1)
    Sort Key: (ts_rank(to_tsvector('simple'::regconfig, COALESCE((title)::text, ''::text)), '''car'''::tsquery, 2)), id
    Sort Method:  top-N heapsort  Memory: 18kB
    ->  Seq Scan on products  (cost=0.00..107802.22 rows=14999 width=3824) (actual time=7.532..12224.585 rows=977 loops=1)
        Filter: ((platform_id = 26) AND (product_type = 2) AND (to_tsvector('simple'::regconfig, COALESCE((title)::text, ''::text)) @@ '''car'''::tsquery)) 

Total runtime: 12228.813 ms 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T11:55:38.733

这个表达式：

```
to_tsvector('simple', (COALESCE(title::TEXT), '')) 
```

对您的索引不适用。

您应该在查询中使用的那个表达式上声明索引：

```
CREATE INDEX products_gin_title
ON products
USING GIN(to_tsvector('simple', COALESCE(title::TEXT,''))) 
```

（或使 ruby​​ 生成索引中使用的表达式）。

如果要索引多个列，只需将它们连接起来：

```
CREATE INDEX products_gin_title
ON products
USING GIN(to_tsvector('simple', title || ' ' || product_type || ' ' || platform_id)) 
```

但同样，Ruby 应该过滤完全相同的表达式以使用索引。

# maps - 谷歌地图实用程序库 v3 - 信息框阵列？

> ID：10880328
> 
> 赞同：1
> 
> 时间：2012-06-04T11:14:35.030
> 
> 标签：maps, utility

我真的被困在这里了。如果有人可以提供帮助，将不胜感激。

我的所有代码都基于以下内容： [google maps api infobox plugin and multiple markers](https://stackoverflow.com/questions/7308875/google-maps-api-infobox-plugin-and-multiple-markers) 此代码允许您拥有多个标记，但它不会将信息框放入数组中以便稍后关闭。这就是我遇到麻烦的地方。

本质上，我只需要拥有多个标记和多个信息框，并且能够在数组中跟踪它们，这样我就可以从地图中删除它们，然后重新开始使用新的标记和信息框。该站点是一个航班跟踪器，因此标记和信息框会不断变化。我似乎无法跟踪所有信息框以进行大规模删除。我所做的一切似乎都不起作用，因为每次我进行更改都会破坏我现有的网站代码。

这是我所有受影响的代码。您会从所有注释掉的代码中看到我一直在尝试各种事情。

任何帮助表示赞赏。

```
newMarkers = [],
        marker;
ibArray = [];

function initialize() {
chatswood = new google.maps.LatLng(-33.945759, 151.180358);
myMapOptions = {
zoom: 9
,center: chatswood
,mapTypeId: google.maps.MapTypeId.TERRAIN
};
map = new google.maps.Map(document.getElementById("map_canvas"), myMapOptions);
}

function initMarkers(map, markerData) {
    for(var i=0; i<markerData.length; i++) {
    var iconimage = "markers/" + trackall + ".png";
    marker = new google.maps.Marker({
            map: map,
            draggable: false,
            position: markerData[i].latLng,
            visible: true,
            icon: iconimage
        });
        boxText = document.createElement("div");
        boxText.style.cssText = "border: 1px solid black; margin-top: 5px;   background:  #E0E7EF; padding: 5px;";
        boxText.innerHTML = markerData[i].address + "<br>" + markerData[i].state;
        //these are the options for all infoboxes
        infoboxOptions = {

         content: boxText
        ,disableAutoPan: true
        ,maxWidth: 0
        ,pixelOffset: new google.maps.Size(20, -75)
        ,zIndex: null
        ,boxStyle: {
          background: "url('') no-repeat"
          ,opacity: 0.75
          ,width: "140px"
         }
        ,closeBoxMargin: "10px 2px 2px 2px"
        ,closeBoxURL: ""
        ,infoBoxClearance: new google.maps.Size(1, 1)
        ,isHidden: false
        ,pane: "floatPane"
        ,enableEventPropagation: false
    };

        newMarkers.push(marker); //Adding the marker to the newMarkers Array
        newMarkers[i].infobox = new InfoBox(infoboxOptions); //Create new Infobox
        newMarkers[i].infobox.open(map, marker); //Open Infobox

        // ibArray.push({myId:ModeS,box: ib});
        //ibArray.push(marker);
        //ib[i] = new InfoBox(infoboxOptions);
        //ibArray.push({myId: ModeS,box: ib});
        //ib.open(map, marker);
        // ibArray.push({myId:ModeS,box: ib});
        //Open box when page is loaded
        //ibArray.push({myId:"ModeS",box: newMarkers});

// Add event listen, so infobox for marker is opened when user clicks
// on it.  Notice the return inside the anonymous function - this creates
// a closure, thereby saving the state of the loop variable i for the new
// marker.  If we did not return the value from the inner function,
// the variable i in the anonymous function would always refer to the last
// i used, i.e., the last infobox. This pattern (or something that
// serves the same purpose) is often needed when setting function callbacks
// inside a for-loop.

//-------------------------------------------------------------------------
// google.maps.event.addListener(marker, 'click', (function(marker, i) {
// return function() {
// newMarkers[i].infobox.open(map, this);
// map.panTo(markerData[i].latLng);
// }
// })(marker, i));
//-------------------------------------------------------------------------

}
    return newMarkers;
}

// Note: I commented out the listener event because the Infoboxes are to appear
// automatically and there won't be any user interaction on the individual
// markers. Going by the comments above though I believe I need to return
// the function but I'm not sure how if I'm not using the listener event.

// Here the call to initMarkers() is made with the necessary data for each marker.
// All markers are then returned as an array into the markers variable

markers = initMarkers(map, [
    { latLng: pointall} 

]);

boxText.innerHTML = aircrafttooltip; 

//Function to close the Infoboxes
function closeBox(id){

   for (i=0;i<ibArray.length;i++) {
     if (ibArray[i].myId==id){
         myBox = ibArray[i].box;
         myBox.close();
     }
   }
}

// Function to remove markers
function clearOverlays() {
  if (newMarkers) {
    for (var i = 0; i < newMarkers.length; i++ ) {
      newMarkers[i].setMap(null);
    }
      newMarkers.length = 0;
  }
} 
```

# jquery - 将 Aptana 插件与 jquery 的 eclipse 集成

> ID：10880329
> 
> 赞同：1
> 
> 时间：2012-06-04T11:14:38.033
> 
> 标签：jquery, eclipse, aptana

我在 linux 64 位机器上使用“用于 javascript Web 开发人员的 Eclipse IDE”Indigo。我从 Help > Install New Software 安装了 aptana 插件。但是 jquery 自动完成功能不起作用。

我读了这篇[文章](https://stackoverflow.com/questions/1351847/aptana-plugin-for-eclipse-and-jquery-code-assist)，但 indigo 中不存在这样的路径（首选项 > Aptana > 编辑器 > JavaScript > 代码辅助 > 检查 jQuery）和（窗口 > 打开透视图 > 其他... > Aptana）

我也在这个[页面](https://aptanastudio.tenderapp.com/discussions/problems/356-jquery-code-assist-no-utility-function-support)上检查了它，但是选择 *.js 并没有显示任何“Aptana JS 编辑器”

它出什么问题了 ？我应该怎么办？提前致谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T16:46:47.397

对于 Eclipse Juno 4.2 和 Aptana Studio 3 和 JQuery (jquery-1.7.2.js)

SO 和其他地方有几十个过时的帖子，它们引用了已弃用的 Aptana 对话框，并提供了与当前 Eclipse 版本无关的信息。我所知道的是，对于 Eclipse Juno 4.2、Aptana 3 和 JQuery 1.7.2，这是有效的（至少对我而言）：

确保安装了 Aptana 插件并且您处于 Web 透视图中。这就是 Aptana Studio 透视图的名称……如果他们将其命名为包含“Aptana”一词的东西，那么它就不会那么混乱了。

确保您的默认编辑器是“JavaScript 源代码编辑器”。在 Window -> Preferences -> General -> Editors -> File Associations 中进行设置，然后在列表中选择 .js 扩展名。下面的列表框中有多个选项。使用任何其他编辑器甚至都没有给我代码着色……这是我唯一可以使用代码辅助的编辑器。

我这样做了，但我不知道这是否真的有必要。但我安装了 JQuery 卢布如下： [http ://wiki.appcelerator.org/display/tis/JavaScript+Library+Support#JavaScriptLibrarySupport-jQuery%28](http://wiki.appcelerator.org/display/tis/JavaScript+Library+Support#JavaScriptLibrarySupport-jQuery%28)

然后，在Eclipse JavaScript Editor的底部阐述majgis提供的答案[：js文件的内容辅助，自动完成](https://stackoverflow.com/questions/1006934/eclipse-javascript-editor-content-assist-for-js-files/11818150#11818150) ：创建一个新项目并通过将jquery-1.7.2.js拖放到项目中的项目中来添加未压缩的JQuery库Project Explorer 并在出现的对话框中选择 Link To File 选项。我链接到项目根目录的 /js 文件夹中的 jquery-1.7.2.js ，无论如何，这是库通常所在的位置。将 jquery1.4.2.sdocml 拖放到项目中，然后选择复制或链接到该文件。我将文件复制到项目的根目录中。

按照上面的 SO 链接了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:40:28.847

VanAlbert 几乎是正确的，尽管您不需要完成他所写的所有内容。配置 Eclipse 4.2 Aptana 插件 3.2.2

> 第 1 步
> Commands->Bundle Development->Install Bundle->JQuery(最后一个) 提示：如果您想在多个项目中使用此 bundle，请将文件夹复制到 C:\Users\USERNAME\Aptana Rubble
> 第 2 步
> 右键单击 project- >Properties->Project Build Path->Select The JQuery Version
> Step 3
> Goto Window -> Preferences -> General -> Editors -> File Associations 并在列表中选择 .js 扩展名 选择“JavaScript Source Editor”作为默认编辑器

# wpf - 媒体元素倒带

> ID：10880331
> 
> 赞同：1
> 
> 时间：2012-06-04T11:14:52.570
> 
> 标签：wpf, reverse, playback, mediaelement

在我的应用程序中，我使用控件播放视频文件`MediaElement`，我需要有快进和快退选项。对于快进，我增加了`SpeedRatio`，但是如何实现快退？我想反向播放视频（以适当的速度比）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T12:05:22.287

您可以将该`MediaElement.ScrubbingEnabled`属性设置为 true，然后暂停 MediaElement，然后定期`MediaElement.Position`向后更改其属性以模仿倒带行为。

# php - 使用包含 FNC3 功能字符的 Zend 条码组件创建 Code 128 条码

> ID：10880333
> 
> 赞同：1
> 
> 时间：2012-06-04T11:15:14.193
> 
> 标签：php, zend-framework, zend-framework2, barcode, code128

我正在尝试找出如何在我的 Zend 条形码中包含 FNC3 控制字符。

例如，此条码包含 FNC3 字符，然后是 0B

![条码](../Images/1eb8f87b5e7c41e46d161ae74b3562c0.png)

将其与不包含此字符的条形码进行比较。

![在此处输入图像描述](../Images/65cde5c0164a972c469581720540df9a.png)

我无法弄清楚如何 (1) 更改 128 型条形码的字符集。(2) 在 type128 条码中包含一个控制字符 (FNC1-4)。

我尝试将如下各种组合传递到选项数组的“文本”参数中。 [http://framework.zend.com/manual/en/zend.barcode.objects.html](http://framework.zend.com/manual/en/zend.barcode.objects.html)

这可能吗？如何通过 FNC3 字符。这是文字字符串'FNC3'还是我遗漏了什么。

编辑：

我曾尝试在我的文本字符串中使用 ü / Ç 字符，但 PHP 每次都会出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:33:55.503

似乎没有办法在当前版本的 \Zend\Barcode\Object\Code128 中包含 FNC3 字符。我会复制 Code128.php，将“FNC3”替换为字符码大于 128 的字符，例如`chr(228)`（根据[http://www.barcoderesource.com/code128_barcode_map.html](http://www.barcoderesource.com/code128_barcode_map.html) ，它是条形码字体中字符的 ASCII 码） ：

```
protected $charSets = array(
    'A' => array(
    /*...*/
        chr(228), 'FNC2', 'SHIFT', 'Code C', 'Code B', 'FNC4', 'FNC1',
    /*...*/
    'B' => array(
    /*...*/
        chr(228), 'FNC2', 'SHIFT', 'Code C', 'FNC4', 'Code A', 'FNC1', 
```

然后在你的字符串中使用 chr(228) （例如`chr(228).'0B'`）。最后，您可以使用 composer 的加载器或创建一个模块以标准方式覆盖原始类。

# ruby-on-rails - rails devise sign_in 不适用于重定向

> ID：10880336
> 
> 赞同：1
> 
> 时间：2012-06-04T11:15:29.343
> 
> 标签：ruby-on-rails, devise, signing

我有这个方法：

```
 def update
    @user = User.find(params[:id])
    respond_to do |format|
      if @user.update_attributes(params[:user])
        if params[:mypmnode]
          session[:return_to] = projects_pmnode_path(params[:mypmnode])
          sign_in(@user)
        end
        format.html { redirect_to(session[:return_to], :notice => 'User was successfully updated.') }
        format.xml  { head :ok }
      else
        @create_company = true if params[:user][:company_id].blank? and  params[:user][:company_attributes].length > 0
        @create_department = true if params[:user][:department_id].blank? and  params[:user][:department_attributes].length > 0
        format.html { render :action => "edit" }
        format.xml  { render :xml => @user.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

这个想法是，如果用户更新，他会自动登录并重定向到需要身份验证的页面。

在此页面中，我有： before_filter :authenticate_user！

这不适用于重定向。

如果我然后使用此 sign_in 功能转到另一个页面，则用户正确登录。

知道为什么重定向不起作用吗？谢谢！

更新：

为了更清楚，我插入第二页代码（控制器）：

```
class PmnodesController < Projects::BaseController

  before_filter authenticate_user!

  def index
    @pmnodes = Pmnode.all
    respond_to do |format|
      format.html 
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T00:44:28.890

如果在@user 上更新密码，设计将使会话无效。在 update_attributes 之后，您可以尝试`sign_out`先调用。

```
sign_out(@user)
sign_in(@user) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:29:37.467

你确定你的节目在这个博客里吗

```
if params[:mypmnode]
      session[:return_to] = projects_pmnode_path(params[:mypmnode])
      sign_in(@user)
end 
```

如果不是，这应该会自动登录您的使用。

```
def update
    @user = User.find(params[:id])
    respond_to do |format|
  if @user.update_attributes(params[:user])
    if params[:mypmnode]
      session[:return_to] = projects_pmnode_path(params[:mypmnode])

    end
    sign_in(@user)

    format.html { redirect_to(session[:return_to], :notice => 'User was successfully updated.') }
    format.xml  { head :ok }
  else
    @create_company = true if params[:user][:company_id].blank? and  params[:user][:company_attributes].length > 0
    @create_department = true if params[:user][:department_id].blank? and  params[:user][:department_attributes].length > 0
    format.html { render :action => "edit" }
    format.xml  { render :xml => @user.errors, :status => :unprocessable_entity }
  end
end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-28T17:36:43.680

我有一个类似的问题：

我有一个创建并登录用户的控制器方法

```
def new
  @user = User.create!
  sign_in @user
  redirect_to some_nondefault_path
end 
```

其中 some_nondefault_path 需要身份验证。该`new`操作不需要身份验证。用户被创建并登录，但用户会话没有持续，用户得到 401-unauthorized 并被重定向到登录页面而不是 some_nondefault_path。

我最终通过添加解决了它

```
skip_before_filter :verify_authenticity_token, :only => :new 
```

到第一个控制器。它似乎试图在创建用户会话之前验证 CSRF 令牌，该会话失败并阻止了正常用户会话的创建（即使它没有尝试`authenticate_user!`）。

希望这可以帮助！

# java - RequestFilter 和 SessionBean 进行授权

> ID：10880337
> 
> 赞同：0
> 
> 时间：2012-06-04T11:15:31.333
> 
> 标签：java, session, jsf-2, servlet-filters

我在 websphere 应用程序服务器 8 上使用 jsf 2.0。

我有一个授权用户的请求过滤器。用户针对 WebSEAL 认证自己。用户角色保存在 MySQL 数据库中。我的 Requestfilter 从每个请求的 httpServletRequest 获取用户主体。然后我查看用户拥有的角色（在数据库中）。

这很糟糕，因为我对每个请求都有一个数据库查询。

为了改进这一点，我想实现一个包含用户名和角色的 SessionBean。我的问题是，我无法从我的 requestfilter 中获取 sessionbean。我尝试将 sessionbean 用作过滤器类中的 managesproperty。

但是我总是得到一个 Nullpointerexception，因为之前从未调用过 sessionbean。

那么我该怎么做呢？这是错误的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:08:37.440

JSF 将`@SessionScoped @ManagedBean`s 存储为`HttpSession`. 因此，在`Filter`它们内部可用如下：

```
HttpSession session = ((HttpServletRequest) request).getSession();
SessionBean sessionBean = (SessionBean) session.getAttribute("sessionBean"); 
```

但是，您需要考虑到，当 bean 尚不存在于范围内时，此方法不会自动创建 bean。在新的 HTTP 会话上首次调用过滤器时会出现这种情况。`Filtler`即在*之前*`FacesServlet`调用。然后您需要自己创建会话*bean*。

```
HttpSession session = ((HttpServletRequest) request).getSession();
SessionBean sessionBean = (SessionBean) session.getAttribute("sessionBean");

if (sessionBean == null) {
    sessionBean = new SessionBean();
    session.setAttribute("sessionBean", sessionBean);
}

// ...

sessionBean.setRole(role);

// ... 
```

*只要它已经*存在于会话范围内， JSF 就不会用新实例覆盖它，而只是重用在`Filter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:26:10.907

看我类似的[答案](https://stackoverflow.com/questions/10596265/insert-a-bean-into-a-converter/10596588#10596588)，你应该可以通过这种方式获得你的 SessionBean

**编辑**

或者你可以试试这个方法

```
 HttpSession session = (req (HttpServletRequest)).getSession();
 MyManagedBean myManagedBean = session.getAttribute("myManagedBean");` 
```

或者您可以使用 PhaseListener 代替您的过滤器。请参阅这篇关于使用 PhaseListener 保护您的应用程序的好[文章。](http://devgrok.blogspot.cz/2009/07/access-control-using-phaselistener.html)

# java - 将 Map 转换为二维数组

> ID：10880338
> 
> 赞同：0
> 
> 时间：2012-06-04T11:15:41.183
> 
> 标签：java, data-structures

我有一张地图并试图将其转换为二维数组。为此，我将 Map 的值转换为列表，然后尝试转换为二维数组。

我的代码是

```
try {
List list = new ArrayList(layoutMap.values());
int listSize = list.size();
ArrayList[][] layoutList = new ArrayList[listSize][];
for(int i = 0; i < listSize; i++){
    List sublist = (ArrayList) list.get(i);
    int subListSize = sublist.size();
    layoutList[i] = new ArrayList[subListSize];
    for (int j = 0; j < subListSize; j++) {
    layoutList[i][j] =  (ArrayList) sublist.get(j);
    }
} 
} catch (Exception e) {
log.error("@layoutMapDetails () :", e);
} 
```

当我这样做时，我得到类转换异常`com.pojo.layout.LayoutDetails cannot be cast to java.util.ArrayList`有没有办法解决这个问题。List 到二维数组的转换是否正确..？这里的layoutMap是`Map<Integer, List>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:16:45.390

```
final Object[][] result = new Object[map.size()][2];

final Iterator<?> iter = map.entrySet().iterator();

int ii = 0;
while(iter.hasNext()){
    final Map.Entry<?, ?> mapping = (Map.Entry<?, ?>) iter.next();

    result[ii][0] = mapping.getKey();
    result[ii][1] = mapping.getValue();

    ii++;
} 
```

# iphone - Hoq 在 SQLite 查询中使用 LIKE

> ID：10880344
> 
> 赞同：0
> 
> 时间：2012-06-04T11:16:07.463
> 
> 标签：iphone, ios, sqlite

我正在尝试通过以下方式在我的代码中使用 LIKE：

```
-(void)getMatchedContacts{
if(sqlite3_open([[self GetDBPath] UTF8String], &database)== SQLITE_OK) {
    NSMutableArray *arrFBContacts = [self getFBContacts];
    if([arrFBContacts count]>0){
        sqlite3_stmt *stmt;
        for (MContact *mc in arrFBContacts){
            const char *sql = "select count(*) from contacts where fname LIKE '?' and lname LIKE '?'";
            if (sqlite3_prepare_v2(database, sql, -1, &stmt, NULL) != SQLITE_OK) {
                NSAssert1(0, @"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));
            }
            else{
                NSLog(@"%@",[NSString stringWithFormat:@"%@",mc.firstname]);
                NSLog(@"%@",[NSString stringWithFormat:@"%@",mc.lastname]);
                sqlite3_bind_text(stmt, 1, [[NSString stringWithFormat:@"%@",mc.firstname]  UTF8String], -1, SQLITE_TRANSIENT);
                sqlite3_bind_text(stmt, 2, [[NSString stringWithFormat:@"%@",mc.lastname]  UTF8String], -1, SQLITE_TRANSIENT);

                int count =0;
                if(sqlite3_step(stmt) == SQLITE_ROW) {
                    count = sqlite3_column_int(stmt, 0);
                }
                sqlite3_reset(stmt);
                if(count>0){
                    const char *sql1 = "update fbContacts set matched = 1 where id = ?";
                    if (sqlite3_prepare_v2(database, sql1, -1, &stmt, NULL) != SQLITE_OK) {
                        NSAssert1(0, @"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));
                    }
                    else {
                        sqlite3_bind_int(stmt, 1, mc.fblocalcontactid);
                        sqlite3_step(stmt);
                    }
                    sqlite3_reset(stmt);
                }
            }
        }
    }
}
} 
```

但我无法从第一个 SQL 中获取 count 变量的任何值。y 程序有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:45:03.730

您可以按如下方式检查我的功能：其中，like 查询工作正常。

```
-(NSMutableArray *)getCategorySearchNoDueDate:(int)catId:(NSString *)searchWord{
searchWord = [@"%" stringByAppendingFormat:@"%@%%",searchWord];

NSMutableArray *tempArray = [[NSMutableArray alloc] init];

oClsDBFunction = [[clsDBFunction alloc] init];

appDelegate = (WFAppDelegate *)[[UIApplication sharedApplication] delegate];
if (appDelegate.result == SQLITE_OK) {
    const char *sql;

    NSString *sqlString = @"SELECT \"Project\" as objectType, \"0\" as tID, projectId as pID, \"0\" as refTID, referenceId as refPID, "
    "title as pTitle, \"\" as tTitle, description as Desc, "
    "startDate as StartDate, startTime as StartTime, "
    "dueDate as DueDate, dueTime as DueTime, compDate as CompDate, compTime as CompTime, "
    "priorityId as PriorityId, categoryId as CategoryId, "
    "isCompleted as IsCompleted, status as Status, isDeleted as IsDeleted, "
    "remark as Remark, repeatId as RepeatId, alertCount as AlertCount, \"0\" as TaskType, "
    "(select count(*) from tblTask, tblReference "
    "where tblTask.referenceId=tblReference.referenceId and tblReference.projectId = tblProject.projectId) as TotalTask, "
    "(select count(*) from tblTask, tblReference "
    "where tblTask.referenceId=tblReference.referenceId and tblReference.projectId = tblProject.projectId and tblTask.isCompleted=1) "
    "as CompletedTask "
    "FROM tblProject "
    "WHERE dueDate='' and "
    "IsCompleted=0 and CategoryId=? and (tblProject.title like ? or tblProject.description like ?) "
    "UNION "

    "SELECT \"Task\" as objectType, tblTask.taskId as tID, \"0\" as pID,  tblTask.referenceId as refTID, \"0\" as refPID, "
    "\"\" as pTitle, title as tTitle, description as Desc, "
    "\"\" as StartDate, \"\" as StartTime, "
    "dueDate as DueDate, dueTime as DueTime, compDate as CompDate, compTime as CompTime, "
    "priorityId as PriorityId, categoryId as CategoryId, "
    "isCompleted as IsCompleted, status as Status, isDeleted as IsDeleted, "
    "remark as Remark, repeatId as RepeatId, alertCount as AlertCount, taskTypeId as TaskType, "
    "\"0\" as TotalTask, "
    "\"0\" as CompletedTask "
    "FROM tblTask, tblReference  "
    "WHERE IsCompleted=0 and "
    "dueDate='' and "
    "CategoryId=? and "
    "tblTask.referenceId = tblReference.referenceId and tblReference.projectId=0 and (tblTask.title like ? or tblTask.description like ?) "
    "UNION "
    "SELECT \"Task\" as objectType, tblTask.taskId as tID, tblProject.projectId as pID,  tblTask.referenceId as refTID, \"0\" as refPID, "
    "tblProject.title as pTitle, tblTask.title as tTitle, tblTask.description as Desc, "
    "\"\" as StartDate, \"\" as StartTime, "
    "tblTask.dueDate as DueDate, tblTask.dueTime as DueTime, tblTask.compDate as CompDate, tblTask.compTime as CompTime, "
    "tblTask.priorityId as PriorityId, tblTask.categoryId as CategoryId, "
    "tblTask.isCompleted as IsCompleted, tblTask.status as Status, tblTask.isDeleted as IsDeleted, "
    "tblTask.remark as Remark, tblTask.repeatId as RepeatId, tblTask.alertCount as AlertCount, taskTypeId as TaskType, "
    "\"0\" as TotalTask, "
    "\"0\" as CompletedTask "
    "FROM tblTask, tblReference, tblProject "
    "WHERE tblTask.IsCompleted=0 and "
    "tblTask.dueDate='' and  "
    "tblTask.CategoryId=? and "
    "tblTask.referenceId = tblReference.referenceId and tblReference.projectId!=0 and "
    "tblProject.projectId = tblReference.projectId and (tblTask.title like ? or tblTask.description like ?) "
    "order by  PriorityId DESC, IsCompleted";

    sql = [sqlString UTF8String];

    sqlite3_stmt *statement;

    if (sqlite3_prepare_v2(appDelegate.database, sql, -1, &statement, NULL) == SQLITE_OK) {

        NSString *strCatId = [NSString stringWithFormat:@"%d", catId];
        sqlite3_bind_text(statement, 1, [strCatId UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(statement, 2, [searchWord UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(statement, 3, [searchWord UTF8String], -1, SQLITE_TRANSIENT);

        sqlite3_bind_text(statement, 4, [strCatId UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(statement, 5, [searchWord UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(statement, 6, [searchWord UTF8String], -1, SQLITE_TRANSIENT);

        sqlite3_bind_text(statement, 7, [strCatId UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(statement, 8, [searchWord UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(statement, 9, [searchWord UTF8String], -1, SQLITE_TRANSIENT);

        while (sqlite3_step(statement) == SQLITE_ROW) {

            NSString *strObjectType = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 0)];

            NSString *strTaskId = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 1)];
            NSString *strProjectId = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 2)];
            NSString *strRefTaskId = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 3)];             
            NSString *strRefProjectId = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 4)];              
            NSString *strProjectTitle = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 5)];              
            NSString *strTaskTitle = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 6)];             
            NSString *strDescription = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 7)];

            NSString *strStartDate = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 8)];
            NSString *strStartTime = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 9)];
            NSString *strDueDate = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 10)];
            NSString *strDueTime = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 11)];              
            NSString *strCompDate = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 12)];
            NSString *strCompTime = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 13)];

            NSString *strPriorityId = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 14)];
            NSString *strCategoryId = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 15)];
            NSString *strIsCompleted = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 16)];
            NSString *strStatus = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 17)];
            NSString *strIsDeleted = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 18)];

            NSString *strRemark = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 19)];               
            NSString *strRepeatId = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 20)];
            NSString *strAlertCount = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 21)];               
            NSString *strTaskType = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 22)];

            NSString *strTotalTask = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 23)];
            NSString *strCompletedTask = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 24)];

            oMainPage = [[MainPage alloc] init];
            oMainPage.objectType = strObjectType;

            oMainPage.tId = strTaskId;
            oMainPage.pId = strProjectId;
            oMainPage.refTId = strRefTaskId;                
            oMainPage.refPId = strRefProjectId;
            oMainPage.pTitle = strProjectTitle;
            oMainPage.tTitle = strTaskTitle;
            oMainPage.strDesc = strDescription;

            oMainPage.strStartDate = strStartDate;
            oMainPage.strStartTime = strStartTime;
            oMainPage.strDueDate = strDueDate;
            oMainPage.strDueTime = strDueTime;
            oMainPage.strCompDate = strCompDate;
            oMainPage.strCompTime = strCompTime;

            oMainPage.strPriority = strPriorityId;
            oMainPage.strCategory = strCategoryId;              
            oMainPage.strIsCompleted = strIsCompleted;
            oMainPage.strStatus = strStatus;
            oMainPage.strIsDeleted = strIsDeleted;

            oMainPage.strRemark = strRemark;                
            oMainPage.strRepeatId = strRepeatId;
            oMainPage.strAlertCount = strAlertCount;                
            oMainPage.taskType = strTaskType;

            oMainPage.totalTask = strTotalTask;
            oMainPage.completedTask = strCompletedTask;

            [tempArray addObject:oMainPage];
            [oMainPage release];
        }
    }
    sqlite3_finalize(statement);
} else {
    NSAssert1(0, @"Failed to open database with message '%s'.", sqlite3_errmsg(appDelegate.database));
}

[oClsDBFunction release];
return tempArray;
} 
```

干杯。

# android - 在android中显示来自服务器的图像

> ID：10880346
> 
> 赞同：0
> 
> 时间：2012-06-04T11:16:16.887
> 
> 标签：android

我想显示来自服务器的图像。实际上，我需要显示一个段落以及一个图像。我为此选择了一个列表视图。目前我正在显示该段落，但是当我尝试显示图像时它不起作用。帮我解决这个...

我的代码：

```
private class ListAdapter extends ArrayAdapter<UserBO> { 
--
--
--
--  public View getView(int position, View convertView, ViewGroup parent) {
    View view = convertView;
            try {
                if (view == null) {
                    LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    view = vi.inflate(R.layout.list_item, null);
                    // --CloneChangeRequired(list_item)
                }
                final UserBO listItem = mList.get(position); // --CloneChangeRequired
                if (listItem != null) {
--
--
--
--
imageUrl = "http://server.com//folder/"+ array.get(0);
((TextView) view.findViewById(R.id.description))
                            .setText(listItem.getdesc()));

downloadFile(imageUrl);
----
--
}
}
}
}

    void downloadFile(String fileUrl) {
        URL myFileUrl = null;
        try {
            myFileUrl = new URL(fileUrl);
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            HttpURLConnection conn = (HttpURLConnection) myFileUrl
                    .openConnection();
            conn.setDoInput(true);
            conn.connect();
            int length = conn.getContentLength();
            InputStream is = conn.getInputStream();

            bmImg = BitmapFactory.decodeStream(is);
            imView.setImageBitmap(bmImg);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:24:45.973

给出了什么错误？提供堆栈跟踪。您也可以使用延迟加载[http://ballardhack.wordpress.com/2010/04/05/loading-remote-images-in-a-listview-on-android/](http://ballardhack.wordpress.com/2010/04/05/loading-remote-images-in-a-listview-on-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:29:32.137

使用以下链接的代码下载图像并显示到列表视图中。

[延迟加载列表视图](https://github.com/thest1/LazyList)

# objective-c - XCODE 将方法作为参数传递

> ID：10880349
> 
> 赞同：4
> 
> 时间：2012-06-04T11:16:45.293
> 
> 标签：objective-c, xcode, methods, parameters

我不想将一个方法作为参数传递给另一个方法，所以它知道结束运行时要调用的方法。是否可以？

```
[self bringJSON:(NSString *)_passedValua:(NSObject *)anotherMethod]; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-04T11:23:53.210

正如@Daniel 在评论中提到的，您可以为此使用[选择器](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocSelectors.html)。基本方案如下：

```
// Method declaration - method accept selector as parameter
- (void) bringJSON:(NSString *)_passedValua toMethod:(SEL)anotherMethod];

// Method call - create selector from method name (mind the colon in selector - it is required if your method takes 1 parameter) 
[self bringJSON:jsonString toMethod:@selector(methodName:)];

// Implementation
- (void) bringJSON:(NSString *)_passedValua toMethod:(SEL)anotherMethod]{
   ...
   if ([target respondsToSelector:anotherMethod])
      [target performSelector:anotherMethod withObject:_passedValua];
} 
```

# html - css - 无法让下拉导航显示其下方的内容

> ID：10880353
> 
> 赞同：2
> 
> 时间：2012-06-04T11:17:05.990
> 
> 标签：html, css

我正在制作 CSS 下拉导航，但无法让下拉菜单显示在导航 div 下方 div 的内容上方。我该如何做到这一点，而不绝对定位两个 div 并指定 z-index？你可以在这里看到我的例子：

[http://stage.fourwallsla.com/in-the-neighborhood](http://stage.fourwallsla.com/in-the-neighborhood)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:20:18.180

我看到你已经使用了绝对定位，但无论如何为什么不添加 z-index 呢？

```
#container #top_nav .subnav {
    position: absolute;
    top: 37px;
    width: 100%;
    z-index: 1000;
} 
```

这解决了它，你现在只需要为它工作一个更好的背景颜色！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:20:56.110

如果没有 z-index 指定或交换标记中的块，您将无法做到这一点

添加到您的 CSS

```
#container #nav_container {
    z-index: 2;
}
#container #nav_container li a {
    background-color: #fff;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:20:47.657

给“功能” div 一个负的 z-index 也可以（在 Chrome Firebug 中测试）

```
z-index:-1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T11:24:11.070

```
#container #top_nav .subnav{
  z-index: 2;
}

#container #top_nav .subnav li > a{
  background: #fff;
} 
```

# java - 按钮单击时有状态会话 Bean 更新（？）

> ID：10880356
> 
> 赞同：1
> 
> 时间：2012-06-04T11:17:23.063
> 
> 标签：java, ejb, javabeans, facelets, enterprise

我对 Java EE 还很陌生，我正在使用 maven web application 构建一个简单的网上商店。我的有状态会话 Bean 有问题。我一直在网上搜索并尝试了不同的解决方案（其中大多数用于使用 servlet），但它似乎不起作用。

无论如何，我的问题是我正在尝试使用我的会话 bean 来跟踪购物车中的内容。我正在使用 arrayList 来存储项目。但是，当我添加一个新项目时，它只是替换旧项目而不是将其添加到列表中。我猜会话 bean 会以某种方式更新或创建它的新实例，但我似乎找不到任何解决方案或有关此的信息。

**有状态会话 bean**

```
@Stateful
@LocalBean
public class CartSessionBean{    
    private List contents;

    public CartSessionBean(){        
        contents= new ArrayList();     
    }

    public List getContents() {
        return contents; 
    }

    public void addProduct(String title) {
        contents.add(title);   
    }
 } 
```

**托管 Bean**

```
@ManagedBean 
@RequestScoped
public class ProductController {

    private List cartList = new ArrayList();    
    private int nrOfCartItems=0;
    @EJB private CartSessionBean cart;  

    public String doAddCart(String title)
    {
        cart.addProduct(title);          
        setCartList(cart.getContents());         
        setNrOfCartItems(cart.getContents().size());  
        return "products.xhtml";
    }
 } 
```

**小面**

```
<h:form>                        
<p>                            
    your cart contains <h:outputLabel class="" value="#{productController.nrOfCartItems}" /> items.                           
    <ui:repeat value="#{productController.cartList}" var="cart">                                        
        <h:outputLabel value="#{cart}" />                              
    </ui:repeat>                            
    <h:commandButton value="go to checkout"/>                   
</p>                            
</h:form>

<h:form>                    
<h:dataTable value="#{productController.productList}" var="pr" border="0">                        
    <h:column>                            
        <h:graphicImage value="images/#{pr.picture}" />                        
    </h:column>                        
    <h:column>                            
        <h2><h:outputText value="#{pr.product_name}"/></h2>                             
        <p> in stock: <h:outputText value="#{pr.stock}"/><br/>                            
        price: <h:outputText value="#{pr.price}"/> SEK<br/><br/>                            
        <h:outputText value="#{pr.description}"/><br/></p>                            
        <h:commandButton value="add to cart" action="#{productController.doAddCart(pr.product_name)}"/>                          
    </h:column>                    
</h:dataTable>                
</h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:20:58.567

您的托管 bean 应该是 SessionScope 在会话期间存在。

在您的情况下，您总是为每个请求创建新的 ProductController bean，因此您总是注入不同的 CartSessionBean（容器不可能知道它应该将相同的 SessionBean 注入到您的 RequestScope Managed Bean 中）。

# regex - 要求 RegEx 引擎失败

> ID：10880363
> 
> 赞同：0
> 
> 时间：2012-06-04T11:17:56.860
> 
> 标签：regex

我需要一个符合以下格式的正则表达式。

```
hhhh:mm or hhhhmm 
```

hhhh 是小时（第一个数字应该匹配 1-9 后跟数字，不超过 4 位数字）

mm 是分钟（第一个数字应该匹配 0-5，后跟一个数字，不超过 2 个数字）

以下格式也应该是可能的 - mm 或 m

到目前为止我有

```
^([1-9]\d{0,3}:?)?([0-5]\d{0,2})?\d 
```

这符合我想要的但如果我输入例如 4444444 不会失败。

事实上，如果我的数字少于 3 位，他们应该在 0..59 范围内处理一分钟。

任何帮助表示赞赏。我根本不是正则表达式大师。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:25:29.207

你可能想要这样的东西：

```
^(?:([1-9]\d{0,3}):?)?([0-5]?\d)$ 
```

即使存在小时部分，这也将允许一位数的分钟。如果您不希望它可以通过一些不同的方式解决，例如：

```
^(?:([1-9]\d{0,3}):?)?([0-5]\d)$|^(\d)$ 
```

# android - 如何像在视频播放器中一样隐藏状态栏并在触摸时显示？

> ID：10880364
> 
> 赞同：4
> 
> 时间：2012-06-04T11:17:58.500
> 
> 标签：android, statusbar

如何在 Android 4.0.3 的视频播放器中隐藏状态栏并在触摸时显示？我试过用

`setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION)`,`setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE)`和`setSystemUiVisibility(View.STATUS_BAR_VISIBLE)`

在平板电脑上，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:21:36.410

尝试使用此标志：public static final int SYSTEM_UI_FLAG_FULLSCREEN 自：API 级别 16

虽然 api 级别 16 它适用于我的 4.0.4 平板电脑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:02:58.670

您无法在 Android 平板电脑上隐藏系统栏，抱歉。您可以使系统栏变暗，但不能完全删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T13:09:14.820

正如@CommonsWare 所说，这在平板电脑上是不可能的。利用

```
view.setSystemUiVisibility(View.STATUS_BAR_HIDDEN);
view.setSystemUiVisibility(View.STATUS_BAR_VISIBLE); 
```

使全屏模式的系统栏变暗。我正在使用此代码，并且运行良好。几乎整个屏幕都是黑暗的，只有小灰点出现在系统按钮（返回、主页……）所在的位置。

# c# - Windows 服务的日志文件路径

> ID：10880367
> 
> 赞同：0
> 
> 时间：2012-06-04T11:18:07.603
> 
> 标签：c#, windows-services

我有一个 Windows 服务，它做了一些工作，并且我也在尝试将日志写入文件。在我的内部`app.Config`，我有一个部分来定义日志文件的来源：

在 中`Serivce1.cs`，我将记录器定义为：

```
 public partial class Service1 : ServiceBase
    {
        private static TraceSource ServiceLogger = new TraceSource("ServiceTrace"); 
```

在其他方法中，我通过以下代码写入日志文件，

```
ServiceLogger.TraceEvent(TraceEventType.Information, 1, "{0} : Running", DateTime.Now); 
```

Windows 事件查看器中没有异常，并且该服务正在使用本地系统（广泛的特权）运行，但在安装此服务后我无法找到日志。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:27:32.357

这是一个示例演示。

[http://msdn.microsoft.com/en-us/library/ms751526.aspx](http://msdn.microsoft.com/en-us/library/ms751526.aspx)

配置

[http://msdn.microsoft.com/en-us/library/ms733025.aspx](http://msdn.microsoft.com/en-us/library/ms733025.aspx)

# asp.net-mvc-4 - Visual Studio 2010 无法访问 webapi 项目

> ID：10880369
> 
> 赞同：2
> 
> 时间：2012-06-04T11:18:21.517
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我用以下项目创建了一个解决方案

FrontEnd 是一个 mvc4 web 应用程序，而 MyWebAPI 是一个 mvc4 webAPI

![在此处输入图像描述](../Images/802f2232c011b711cfcc4fe7115254e7.png)

我希望能够从我的 FrontEnd 项目中访问 MyWebAPI 控制方法。但它不起作用，因为它只抱怨当我运行 webAPI url 时找不到数据。

我是否需要做更多的事情才能让我的前端可以与 MyWebAPI 对话？

例如，我只是尝试运行这个预先生成的 webAPI 控制方法

```
public string Get(int id)
{
    return "value";
} 
```

找不到。但是，如果我将启动项目更改为 MyWebAPI 则它可以工作。所以我的问题是如何做到这一点，以便我可以从我的 FrontEnd 项目访问 MyWebAPI？

这个问题实际上与这个问题相同，[但](https://stackoverflow.com/questions/9605723/mvc-4-web-api-application-in-1-solution)它没有解释当它们在同一个解决方案中时我如何从前端访问 webAPI

**编辑**

```
$(document).ready(function() {
            $("#clickMe").click(function() {
                var id = $("#dataBox").val();
                $.ajax({
                    url: "http://localhost:11982/api/Movie/GetMovie",
                    data: { id: id },
                    type: "get",
                    contentType: "application/json;charset=utf-8",
                    success: function(data) {
                        alert(data);
                    },
                    error: function(jqXHR, status, errorThrown) {
//                      alert("Error " + status + "\nError Thrown" + errorThrown + "\n" + jqXHR )

                    }
                })
            })
        }) 
```

**2012 年 8 月 30 日更新**

我在我的解决方案中更新了不同的包，其中包括 WebAPI beta 到 WebAPI rc 版本。现在由于某种原因，当我向任何 WebAPI 控制器发送表单请求或 ajax 请求时，它会对表单请求响应说没有找到这样的控制器，而对于 ajax 请求，它将永远加载而不返回响应.

以前遇到过类似问题的人吗？

以前的解决方案是在本地 IIS 服务器上运行我的 FrontEnd 和 MyWebAPI。但是，由于我更新了所有软件包，它现在停止工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:12:22.500

似乎您的问题是您需要从 Visual Studio 同时运行 FrontEnd 和 MyWebAPI 项目。实际上，通过解决方案的一个有点模糊的启动选项来配置 Visual Studio 来执行此操作很容易。

右键单击解决方案资源管理器窗格中的**解决方案节点**（不是同名的项目节点）。从上下文菜单项中，选择“设置启动项目”。在对话框中，单击“Multiple Startup Project”选项并选择 FrontEnd 和 MyWebAPI 项目。单击确定以保存选项。当您运行调试器时，这两个项目现在都应该启动，并且 MyWebAPI 调用将响应前端。只要确保两个项目都在不同的端口上运行。

**更新：**

Web API RTM 发生了重大变化。其中一项更改是用于提取`ApiController`动作参数的约定。看看[这个 SO 问题和答案](https://stackoverflow.com/questions/12072277/webapi-rc-reading-fromuri-and-frombody-at-the-same-time)中如何使用新属性`FromUri`和`FromBody`

# php - Yii 可排序属性

> ID：10880372
> 
> 赞同：0
> 
> 时间：2012-06-04T11:18:25.020
> 
> 标签：php, yii

我有以下表格，但是当我将名字定义为可排序时，它不起作用（没有将名字显示为可以单击并对列表视图进行排序的链接）。尽管如此，如果我的用户名工作正常。

```
| User
| - userid
| - username

| Profile
| - userid
| - firstname
| - lastname 
```

我在控制器中有：

```
 $criteria->with=array(
        'profile',
    );
    $criteria->addCondition('status = 1 or status = 2 or status = 3');

    if($search) 
        $criteria->addCondition("firstname = '{$search}'");

    $dataProvider=new CActiveDataProvider('YumUser', array(
                'criteria' => $criteria, 
                'pagination'=>array(
                    'pageSize'=>50,
                    ))); 
```

鉴于：

```
$this->widget('zii.widgets.CListView', array(
    'dataProvider'=>$dataProvider,
    'itemView'=>'_view', 
        'template' => '{summary} {sorter} {items} <div style="clear:both;"></div> {pager}',
    'sortableAttributes'=>array(
        'firstname',
    ),
)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T11:57:10.773

这仅在明确设置 dataProvider 的[sort](http://www.yiiframework.com/doc/api/1.1/IDataProvider#sort)属性时才有效（在这些情况下，您按另一个模型中的属性进行排序）

试试这个

```
 $dataProvider =  new CActiveDataProvider('YumUser', array(
                'criteria' => $criteria, 
                'sort'=>array(
                    'attributes'=>array(
                         'firstname'=>array(
                              'asc'=>'firstname',
                              'desc'=>'firstname DESC',
                          ),
                     ),
                 ),
                'pagination'=>array(
                    'pageSize'=>50,
                    ))); 
```

# google-maps - 查询 Google Fusion 简单查询

> ID：10880375
> 
> 赞同：0
> 
> 时间：2012-06-04T11:18:48.303
> 
> 标签：google-maps, google-fusion-tables

我想查询我的谷歌融合以显示范围内的某些数据，这些数据将从范围滑块提供。我做了所有需要代码的事情，但我是查询新手，我不知道正确的格式。基本上它应该是这样的：

```
 "select geo(kml code column) from <tableid> where Population(my column) from <range1 to     range2> " 
```

range1 和 range2 应由滑块值提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:50:25.430

```
"select geo(kml code column) from <tableid> where Population <= range2 and Population >= range1 " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:23:53.257

[参考](https://developers.google.com/fusiontables/docs/developers_reference)

**选择**

```
To query for data, use the following syntax in an HTTP GET request:

SELECT  <column_spec> {, <column_spec>}* FROM <table_id>

{ WHERE <filter_condition> | <spatial_condition> { AND <filter_condition> }* }

{ GROUP BY <column_name> {, <column_name>}* }

{ ORDER BY <column_spec> { ASC | DESC } | <spatial_relationship> }

{ OFFSET <number> }

{ LIMIT <number> }

Note: Fusion Tables returns data in UTF-8 format. 
```

# windows-phone-7 - WP7 ContentPresenter 将 DataContext 传递给 DataTemplate

> ID：10880381
> 
> 赞同：1
> 
> 时间：2012-06-04T11:19:16.370
> 
> 标签：windows-phone-7, xaml, data-binding

我有一个数据项：

```
<SampleData:Item Title="Evening News" Channel="ABC" x:Key="sampleData0" /> 
```

在我的 xaml 页面中，我有一个显示此项目的 ContentPresenter。

```
<ContentPresenter ContentTemplate="{StaticResource dt1}" /> 
```

这是数据模板**dt1**：

```
 <DataTemplate x:Key="t2">
        <Grid Background="#FF5599DD" DataContext="{StaticResource sampleData0}"  >
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition/>
            </Grid.RowDefinitions>              
            <TextBlock Text="{Binding Title}" />
            <TextBlock Text="{Binding Channel}" Grid.Row="1" />             
        </Grid>         
    </DataTemplate> 
```

这一切都很好。但我想将数据模板放入我的 dictionary.xaml 文件中，因此我必须将数据上下文从 DataTemplate 移动到 ContentPresenter。

现在我的 ContentPresenter 看起来像这样：

```
<ContentPresenter ContentTemplate="{StaticResource dt1}" DataContext="{StaticResource sampleData0}" /> 
```

数据模板如下所示：

```
 <DataTemplate x:Key="t2">
        <Grid Background="#FF5599DD">
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition/>
            </Grid.RowDefinitions>              
            <TextBlock Text="{Binding Title}" />
            <TextBlock Text="{Binding Channel}" Grid.Row="1" />             
        </Grid>         
    </DataTemplate> 
```

但这不起作用！

我已经尝试过 RelativeSource 但没有运气。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:32:29.913

而不是在设置属性`DataContext`上`ContentPresenter`设置。`Content`像这样：

```
<ContentPresenter Content="{StaticResource sampleData0}"
                  ContentTemplate="{StaticResource dt1}"/> 
```

# c# - 类似 SQL 的语句

> ID：10880385
> 
> 赞同：-1
> 
> 时间：2012-06-04T11:19:28.023
> 
> 标签：c#, sql

在这里，我尝试使用 like 语句从 db 中选择一个数据，但它使用我的数据的第一个数字进行搜索。但我需要编写代码，比如搜索而不是我数据的前 3 位。谁能帮我。

```
public void CC()
        {
            CCddl.Items.Clear();
            ListItem l = new ListItem();
            l.Text = "-Select-";
            CCddl.Items.Add(l);
            CCddl.SelectedIndex = 0;
            con.Open();
            SqlCommand cmd = new SqlCommand("select Componetcode from dbo.tbl_component where Sitecode like '%" + TextBox1.Text + "%'", con);
            SqlDataReader dr1;
            dr1 = cmd.ExecuteReader();
            while (dr1.Read())
            {
                ListItem n = new ListItem();
                n.Text = dr1["Componetcode"].ToString().Trim();
                CCddl.Items.Add(n);
            }
            dr1.Close();
            con.Close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:22:54.007

**您不能对需要使用 cast 或 convert 将数字转换为搅拌的数字进行类似操作...**

**编辑**

您还可以使用子字符串函数跳过前三个字符或列中的数据

```
 select * from (
    select column1,cast(column2 as varchar(30)) as column2  from tablename 
  ) d  where 
    substring(column2,4, LEN(column2) - 3 )  like '%textosearch%' 
```

* * *

你需要写下

```
select * from tablename where column like '___textosearch%' 
```

所以你的代码将是

```
 SqlCommand cmd = new SqlCommand("select Componetcode from dbo.tbl_component
         where Sitecode like '___" + TextBox1.Text + "%'", con); 
```

_ 允许您匹配 sql 中的单个字符，因此您需要像我在代码中所做的那样写三个“_”

**还使用 sql 参数修改您的代码，以避免 SQL 注入攻击**

# java - Java 中 Jazzy 图书馆的 Aspel 词典

> ID：10880391
> 
> 赞同：2
> 
> 时间：2012-06-04T11:19:48.407
> 
> 标签：java, swing, spell-checking, jtextarea, aspell

我想在 J2SE 桌面应用程序中实现拼写检查。为此，我使用 Jazzy (http://jazzy.sourceforge.net/)。如何导入和使用 aspel 的词典（来自 Aspel 词典[ftp://ftp.gnu.org/gnu/aspell/dict/0index.html](ftp://ftp.gnu.org/gnu/aspell/dict/0index.html)），因为我只有一本词典 - 英语，但我想要更多：法语和波兰语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:38:39.480

Jazzy 使用一个简单的文本文件，每行一个单词，中间有一个空行 - 例如

> 阿拉斯加州
> 
> 阿拉斯加的
> 
> 阿尔巴尼亚
> 
> 阿尔巴尼亚的

您必须：

*   将 aspel 字典转换为该格式（请参阅[此答案](https://superuser.com/questions/137957/how-to-convert-aspell-dictionary-to-simple-list-of-words)）；

*   实现/查找`java.io.Reader`从 aspel 格式读取并在每次调用时返回一个单词的 a `readLine()`，因此您可以使用`new SpellDictionaryHashMap(Reader yourAspelReader);`

# .htaccess - 防止从实际 url 访问文件并使用 rewrite .htaccess

> ID：10880392
> 
> 赞同：1
> 
> 时间：2012-06-04T11:19:53.157
> 
> 标签：.htaccess, codeigniter, mod-rewrite, redirect, http-redirect

我在这里遇到了htaccess的情况。我对 htaccess 还很陌生。所以，我正在使用codeigniter。现在我想做一个重定向。

codeigniter 的原始网址是：

```
www.mysite.com/index.php/admin/getz 
```

现在，我想让用户输入 www.mysite.com/agetz 来访问上面的 url。到目前为止还不错。它通过以下方式实现：

```
RewriteRule ^agetz$ /index.php/admin/getz [L] 
```

现在，我想做的是，当人们输入真实的 url 即 www.mysite.com/index.php/admin/getz 时，我想将它们重定向到 404 页面（出于某些安全原因，从其他人那里保护 url），并且当他们键入 www.mysite.com/agetz 时，我想允许他们访问 getz 控制器。

问题是，目前如果我采取任何技巧来踢任何将 url www.mysite.com/index.php/admin/agetz 输入到 404 的人，它也会踢 mysite.com/getz。必须使用 .htaccess 来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:15:15.150

用这个替换你现有的代码：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+index\.php/admin/getz/?[\s\?] [NC]
RewriteRule ^ - [R=404,L]

RewriteRule ^agetz/?$ /index.php/admin/getz [L,NC] 
```

# java - Maven 进程类，只处理编译器改变的那些：编译

> ID：10880393
> 
> 赞同：3
> 
> 时间：2012-06-04T11:20:00.643
> 
> 标签：java, maven, maven-plugin

我编写了一个 maven mojo，它对文件集指定的一组 java 类进行就地 JavaFlow 检测。也就是说，srcfile = destfile。

该插件在流程类阶段触发。

如果我做一个 mvn clean install 这工作得很好。但是，如果我在 mvn clean install 之后执行 mvn install 它会再次运行处理，即使所有类文件都没有更改。就我而言，这非常非常糟糕...... :(

由于我进行了适当的检测，因此我也不能真正使用文件时间戳。

我需要一些方法来告诉我的 mojo 只在由编译器重新编译的文件上运行：编译......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:18:48.960

我尝试使用 StaleSourceScanner，但它没有按我的意愿工作。

所以我最终在检测后对文件进行校验和，并在下一个构建步骤中检查它们。

作为一项附加的安全措施，我修改了 JavaFlow 源代码，以便如果一个类被检测两次，则会引发异常。

编辑：实际上，现在我使用 ASM 来检查该类是否已被检测...如果有，请不要检测它。没有校验和了。

# android - Android中的单选按钮控件

> ID：10880394
> 
> 赞同：0
> 
> 时间：2012-06-04T11:20:01.200
> 
> 标签：android

我是安卓新手。我需要使用自定义图像实现单选按钮功能。是否有任何内置的单选按钮控件或任何简单的方法来实现此功能？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T06:27:42.517

制作可绘制文件夹并创建 button_radio.xml 文件：

**res/drawable/button_radio.xml**

**button_radio.xml**：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_checked="true" android:state_pressed="false"
      android:drawable="@drawable/radio_on"/>
  <item android:state_checked="false" android:state_pressed="false"
      android:drawable="@drawable/radio_off"/>
  <item android:state_checked="true" android:state_pressed="true"
      android:drawable="@drawable/radio_on_pressed"/>
  <item android:state_checked="false" android:state_pressed="true"
      android:drawable="@drawable/radio_off_pressed"/>
</selector> 
```

**在您的布局设置单选按钮中：**

**主.xml**：

```
<RadioGroup android:layout_width="fill_parent"
   android:layout_height="50dp"
   android:orientation="horizontal"
   android:checkedButton="@+id/first">
   <RadioButton android:id="@+id/first"
      android:width="50dp"
      android:height="50dp"
      android:button="@drawable/button_radio"/>
   <RadioButton android:id="@+id/second"
      android:width="50dp"
      android:height="50dp"
      android:button="@drawable/button_radio"/>
   <RadioButton android:id="@+id/third"
      android:width="50dp"
      android:height="50dp"
      android:button="@drawable/button_radio"/>
   <RadioButton android:id="@+id/fourth"
      android:width="50dp"
      android:height="50dp"
      android:button="@drawable/button_radio"/>
</RadioGroup> 
```

**注意***radio_on 和 radio_off 将是您的自定义图像*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:26:27.353

你的单选按钮应该有这个代码来正确设置背景

```
<RadioButton
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:button="@android:color/transparent"
            android:background="@drawable/radiobutton_selector" /> 
```

这是你的选择器

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/radio_button" android:state_checked="false"/>
    <item android:drawable="@drawable/radio_button_h" android:state_checked="true"/>
    <item android:drawable="@drawable/radio_button"/> <!-- default -->

</selector> 
```

radio_button_h 和 radio_button 是可绘制的图像。这个对我有用

# sencha-touch-2 - Sencha 触摸选择字段列表滚动问题

> ID：10880395
> 
> 赞同：0
> 
> 时间：2012-06-04T11:20:05.497
> 
> 标签：sencha-touch-2

我创建了包含 1 个选择字段的工具栏。选择字段中的项目更多，无法知道列表中有更多项目。我怎么解决这个问题。请帮我。这是代码

```
 items: [
        {
           xtype : 'toolbar',
            docked: 'top',
            id: 'toptool',
            flex: 1,
            items: [
                {
                    xtype: 'selectfield',
                    name: 'test',

                    options: [
                        {
                            text: 'cat 1',
                            value: '1',
                        },
                        {
                            text: 'cat 2',
                            value: '2',
                        },
                        {
                            text: 'cat 3',
                            value: '3',
                        },
                        {
                            text: 'cat 1',
                            value: '1',
                        },
                        {
                            text: 'cat 2',
                            value: '2',
                        },
                        {
                            text: 'cat 3',
                            value: '3',
                        },
                        {
                            text: 'cat 1',
                            value: '1',
                        },
                        {
                            text: 'cat 2',
                            value: '2',
                        },
                        {
                            text: 'cat 3',
                            value: '3',
                        },
                        {
                            text: 'cat 1',
                            value: '1',
                        },
                        {
                            text: 'cat 2',
                            value: '2',
                        },
                        {
                            text: 'cat 3',
                            value: '3',
                        },
                        {
                            text: 'cat 1',
                            value: '1',
                        },
                        {
                            text: 'cat 2',
                            value: '2',
                        },
                        {
                            text: 'cat 3',
                            value: '3',
                        }
                    ]
                }
            ]
                    }
       ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:36:59.950

首先删除“value”参数后的逗号（，）。现在使用 css 类或内联样式来固定选择字段的高度。

```
xtype: 'selectfield',
name: 'test',
style: 'height:100px', 
```

# ios - 如何根据 iPhone(iOS) 中的 RGB 值获取十六进制代码

> ID：10880396
> 
> 赞同：2
> 
> 时间：2012-06-04T11:20:05.863
> 
> 标签：ios, cocoa-touch, uicolor

我有 RGBA（红、绿、蓝、阿尔法）的值。我知道我们可以通过使用这些东西来获取 UIColor 值

`UIColor *currentColor = [UIColor colorWithRed: 1 green:1 blue:0 alpha:1];`

但是有没有一种方法可以让我使用 iOS 中的 RGBA 值直接获取颜色的十六进制代码字符串。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T11:38:26.243

我认为您不能直接从 UIColor 对象中获取十六进制字符串。您需要从 UIColor 对象中获取 Red、Green 和 Blue 组件并将它们转换为十六进制并附加。

你总是可以创造这样的东西

```
-(NSString *) UIColorToHexString:(UIColor *)uiColor{
    CGColorRef color = [uiColor CGColor];

    int numComponents = CGColorGetNumberOfComponents(color);
    int red,green,blue, alpha;
    const CGFloat *components = CGColorGetComponents(color);
    if (numComponents == 4){
        red =  (int)(components[0] * 255.0) ;
        green = (int)(components[1] * 255.0);
        blue = (int)(components[2] * 255.0);
        alpha = (int)(components[3] * 255.0);
    }else{
        red  =  (int)(components[0] * 255.0) ;
        green  =  (int)(components[0] * 255.0) ;
        blue  =  (int)(components[0] * 255.0) ;
        alpha = (int)(components[1] * 255.0);
    }

    NSString *hexString  = [NSString stringWithFormat:@"#%02x%02x%02x%02x",
                            alpha,red,green,blue];
    return hexString;
} 
```

**编辑：**在 iOS 5.0 中，您可以很容易地获得红色、绿色、蓝色组件

```
CGFloat red,green,blue,alpha;
[uicolor getRed:&red green:&green blue:&blue alpha:&alpha] 
```

所以上面的函数可以改成

```
-(NSString *) UIColorToHexString:(UIColor *)uiColor{
    CGFloat red,green,blue,alpha;
    [uiColor getRed:&red green:&green blue:&blue alpha:&alpha]

    NSString *hexString  = [NSString stringWithFormat:@"#%02x%02x%02x%02x",
                            ((int)alpha),((int)red),((int)green),((int)blue)];
    return hexString;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:37:02.850

您可以`NSString`使用以下代码将浮点值转换为 a：

```
float r = 0.5, g = 1.0, b = 1.0, a = 1.0;
NSString *s = [[NSString alloc] initWithFormat: @"%02x%02x%02x%02x", 
    (int) (r * 255), (int) (g * 255), (int) (b * 255), (int) (a * 255)];
NSLog(@"%@", s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:38:35.153

您可以手动将颜色值转换为十六进制。这很容易。如果你有颜色值说

```
float redValue = 0.5; 
```

您可以按如下方式计算相应的十六进制值。

```
redValue*=255;
    NSString *hex = [NSString stringWithFormat:@"%02x",(int)redValue]; 
```

# android - 适用于 Android 的 Java 通用补间引擎或 ObjectAnimator

> ID：10880404
> 
> 赞同：1
> 
> 时间：2012-06-04T11:20:37.197
> 
> 标签：android, animation

看到[应用程序](https://play.google.com/store/apps/details?id=aurelienribon.tweenengine.demo&hl=en)后，我开始了解 Java Universal Tween [Engine](http://code.google.com/p/java-universal-tween-engine/)。演示应用程序产生了一些“哇”的动画，看起来也很有希望。但我还没有看到它的文档。我读到了 ObjectAnimator，它很容易用于常见的动画，如 Alpha、Linear、Angular。

请帮助我在“objectAnimator”或 Java Universal Tween Engine 之间进行选择以进行 Android 应用程序开发，因为我必须做一些性能更好的复杂动画。请分享您在使用 Java Universal tween Engine 时遇到的任何已知问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:34:20.067

好吧，自从我做了 Tween Engine 之后，我将无法客观地回答，但我可能会提供一些提示让您选择。

实际上，如果您想直接从简单的动画开始，ObjectAnimator 可能更容易使用。它具有不错的性能，并且可以开箱即用。

Tween 引擎支持强大的功能，例如多个动画序列、动画的速度控制、重复、悠悠球播放、回调等等。但是，它是通用的事实要求您告诉它如何访问对象的属性（它们的位置、不透明度、旋转等）。好消息是您可以为每个可能的对象的每个可能的属性设置动画，而不仅仅是 Views 和 Drawables。由于 Tween 引擎是“通用的”，只要它们是用 Java 编写的（它们不必与 android 相关），就可以重复使用它来为您的其他项目（游戏、UI 等）制作动画。因此，引擎是“一次学习，随处重用”。事实上，该引擎正在被移植到 C# 和 C++，因此您可以真正在任何地方重用它:)

# firefox - 填充问题需要修复

> ID：10880406
> 
> 赞同：0
> 
> 时间：2012-06-04T11:20:45.503
> 
> 标签：firefox, google-chrome, padding, margin

大家好，这是我以前的帖子，我真的需要解决这个问题，所以我要在这里发布：

[填充 IE、FF、Chrome 的问题](https://stackoverflow.com/questions/10880168/trouble-with-padding-ie-ff-chrome)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:41:33.830

我不知道这里的确切问题，但我猜它是按钮。尝试放置位置：相对；左：-10px；在您的 img 标签中作为样式。

编辑：或者可能更多像素。适合你的喜好。

# java - 无法使用 java 在 mysql 中保存波斯字符（utf-8）

> ID：10880410
> 
> 赞同：1
> 
> 时间：2012-06-04T11:21:01.647
> 
> 标签：java, mysql, database, unicode, utf-8

[我从谷歌http://translate.google.com/translate_a/t?client=t&hl=en&sl=auto&tl=fa&multires=1&prev=btn&ssel=0&tsel=3&uptl=fa&alttl=en&sc=1&text=hello](http://translate.google.com/translate_a/t?client=t&hl=en&sl=auto&tl=fa&multires=1&prev=btn&ssel=0&tsel=3&uptl=fa&alttl=en&sc=1&text=hello)获得以下链接，其中包含一些波斯语字母，所以我想用以下代码将它保存到 mysql 数据库中：

```
 pageurl = new URL("http://translate.google.com/translate_a/t?client=t&hl=en&sl=auto&tl=fa&multires=1&prev=btn&ssel=0&tsel=3&uptl=fa&alttl=en&sc=1&text=of");
t = pageurl.openConnection();
t.setRequestProperty("User-Agent", "Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.4; en-US; rv:1.9.2.2) Gecko/20100316 Firefox/3.6.2");

in = new BufferedReader(new InputStreamReader(t.getInputStream()));
preparedStatement2 = con.prepareStatement("update `en_db` set `meaning` = ? where `id` = ?");
preparedStatement2.setString(1, in.readLine());
preparedStatement2.setInt(2, id);
preparedStatement2.executeUpdate();
in.close();
```

但它会在数据库中保存一些错误的东西，比如

```
通过","per","of","with"]]]]],"en",,[["??",[5],0,0,1000,0,1,0]], [["of",4,,,""],["of",5,[["??",1000,0,0],["?? ??",0,0,0],["??????? ??",0,0,0],["?? ??",0,0,0]],[[0,2]],"of"]],,,,6]
```

如果我打印`System.out.println`它会显示

```
[[["از","of","",""]],[["介词",["از","از لحاظ","از طرف","در باره","در جهت", "ز","از مبدا","از منشا","در سوی","بوسیله"],[["از",["of","from","in","by"]],[ "از لحاظ",["of"]],["از طرف",["代表","of","for"]],["در باره",["about","on", "关于","of","toward","in re"]],["در جهت",["of","with"]],["ز",["of"]],[" از مبدا",["of"]],["از منشا",["of"]],["در سوی",["of"]],["بوسیله",["by","通过","per","of","with"]]]]],"en",,[["از",[5],0,0,1000,0,1,0]],[ ["of",4,,,""],["of",5,[["از",1000,0,0],["ای از",0,0,0],["استفاده از ",0,0,0],["را از",0,0,0]],[[0,2]],"of"]],,,,16]

```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:34:08.297

所有其他答案，并且：您的数据库连接 URL 应该类似于：

```
jdbc:mysql://localhost/mydatabase?useUnicode=true&characterEncoding=UTF-8 
```

这可确保驱动程序也以 UTF-8 进行通信。

***重要的***

```
in = new BufferedReader(new InputStreamReader(t.getInputStream(), "UTF-8")); 
```

我在 Stack Overflow 对 google Translate 的回答中看到，标头提供了一种语言来接收正确的编码，但一切都已经好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:24:36.377

您的表字段是使用不支持波斯字符的字符集定义的（很可能是`Latin1`）

您需要将它们转换为支持它们的字符集：

```
ALTER TABLE en_db MODIFY meaning VARCHAR(100) CHARACTER SET UTF8; 
```

（分别针对每个字段），或

```
ALTER TABLE en_db CONVERT TO CHARACTER SET UTF8; 
```

（适用于所有领域）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:27:03.520

检查您的 MySql DB 是如何配置的。

看看下面的文章：[http ://dev.mysql.com/doc/refman/5.0/en/charset-unicode.html](http://dev.mysql.com/doc/refman/5.0/en/charset-unicode.html)

编码可以全局配置（每个 DB）或每个表：

```
CREATE TABLE `mytable` (
.................
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

# c# - 用于 IIS 7.0 托管的 WCF 服务配置文件

> ID：10880411
> 
> 赞同：0
> 
> 时间：2012-06-04T11:21:05.333
> 
> 标签：c#, wcf

> **可能重复：**
> [带有 svcutil.exe 的 IIS 7.0 中的 WCF 服务主机](https://stackoverflow.com/questions/10877228/wcf-service-host-in-iis-7-0-with-svcutil-exe)

我是 WCF 服务的新手？我制作了一个在本地主机中成功运行的 WCF 服务。但是由于配置问题，我无法托管它 IIS 服务器，任何人都可以通过提供 WCF 服务主机的配置文件的完整示例来帮助我。

注意：我的服务名称是“EvalService” 我的网站名称是“EvalServiceSite” 我想用我现有的网站托管我的服务 即：“www.esimsol.com” 使用[http://www.esimsol.com/evalservicesite/eval。服务端](http://www.esimsol.com/evalservicesite/eval.svc)

感谢您的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:31:26.410

这是一个示例： [http ://blah.winsmarts.com/2008-4-Host_a_WCF_Service_in_IIS_7_-and-amp;_Windows_2008_-_The_right_way.aspx](http://blah.winsmarts.com/2008-4-Host_a_WCF_Service_in_IIS_7_-and-amp;_Windows_2008_-_The_right_way.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:31:56.833

确保您使用 svcutil 生成适当的配置文件。

您必须将获得的 app.config 文件重命名为“web.config”才能将其添加到 IIS。

有一个很好的介绍你想在这里做什么。

[http://msdn.microsoft.com/en-us/library/ms733766.aspx](http://msdn.microsoft.com/en-us/library/ms733766.aspx)

希望能帮助到你...

# ember.js - Ember.js 带参数的路由

> ID：10880414
> 
> 赞同：2
> 
> 时间：2012-06-04T11:21:26.643
> 
> 标签：ember.js, ember-old-router

我刚刚玩了[ember 路由示例](http://ghempton.github.com/ember-layout-example)。它看起来很有趣。特别是如果您要在 Ember 框架上构建所有应用程序。

但是 url 中的参数在`'#'`. 这意味着如果客户端必须使用回发登录（如果只是设置带有登录参数的 cookie），则您无法复制和发送链接给某人。有没有更好的选择 - 也许使用`'?'`而不是`'#'`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T13:54:52.153

你也可以看看 Ember.Router。有两个很好的起点@ [https://gist.github.com/2679013](https://gist.github.com/2679013)和[https://gist.github.com/2728699](https://gist.github.com/2728699)

最近几天进行了很多修复。

**编辑**

现在可以使用全新的指南 @ [https://emberjs-staging-new.herokuapp.com/guides/outlets#toc_the-router](https://emberjs-staging-new.herokuapp.com/guides/outlets#toc_the-router)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T03:52:29.770

这是由[https://github.com/jbrown提供的完整示例](https://github.com/jbrown)

[http://jsfiddle.net/justinbrown/C7LrM/10/](http://jsfiddle.net/justinbrown/C7LrM/10/)

# javascript - clearInterval() 使用 setInterval() 后出现未定义错误

> ID：10880415
> 
> 赞同：4
> 
> 时间：2012-06-04T11:21:38.850
> 
> 标签：javascript, jquery

我知道这不应该是内联的，但是 YUI 库的对话框迫使我这样做。我的问题是，每当我将鼠标悬停在这个 div 上时，左边距滚动就会激活，但是当我将鼠标移出 div 时它不会停止。JS 控制台报告：

> 未捕获的 ReferenceError：未定义 timerID

这是代码：

```
<div class="span1" onmouseover="
            var timerID;
             $(document).ready(function(){              
                    timerID = setInterval(scrollLeft, 10);

                    function scrollLeft(){
                        $('.inner_wrapper').animate({
                            marginLeft: '-=30px'
                        });
                    }
             });
             " onmouseout="clearInterval(timerID)">
        </div> 
```

编辑：问题是我不能在对话框中运行 SCRIPT 标记（它们已经通过脚本创建，除了像 onmouseover 和 onmouseout 这样的内联脚本之外，它们会过滤任何 javascript）。因此，在这种情况下，您将 onmouseover 和 onmouseout 句柄封装在单个函数中的建议将不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T11:24:39.223

这是一个范围问题。您的变量`timerID`在 onmouseout 中不可见。

通常，将内容放入函数中而不是将其全部放入属性中是一个好主意。这避免了所有这些范围问题。使用处理程序而不是-attributes 是一个更好的主意`on-...`。

在属性之外定义您的函数`onmouseover`并在其中调用另一个函数`mouseout`来清除它。

像这样的东西（以避免讨厌的全局变量）

```
var handler = (function(){
    var timerID;
    function scrollLeft(){
       $('.inner_wrapper').animate({
           marginLeft: '-=30px'
       });
    }
    return{
      mouseover:function(){              
            timerID = setInterval(scrollLeft, 10);
         },
      mouseout:function(){
            clearInterval(timerID);
      }
    }
})(); 
```

进而

```
<div class="span1" onmouseover="handler.mouseover()" onmouseout="handler.mouseout()"> 
```

甚至更好的是，直接通过以下方式绑定处理程序：

```
$('.span1').hover(function() {
    timerID  = setInterval(scrollLeft, 10); //mouseover
}, function() {
    clearInterval(timerID); //mouseout
}); 
```

从新的 jQuery 1.7 开始，`.on()`应该是首选。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T11:24:46.847

```
$(document).ready(function() {
    var timerID = null;

    function scrollleft() {
        $('.inner_wrapper').animate({
            marginLeft: '-=30px'
        });
    }
    $('div.span1').hover(function() {
        timerID  = setInterval(scrollLeft, 10);
    }, function() {
        clearInterval(timerID);
    });
});​ 
```

让你喜欢 html

```
<div class="span1"></div> 
```

如果你使用`.on('hover')`那么

```
$(document).ready(function() {
    var timerID = null;

    function scrollleft() {
        $('.inner_wrapper').animate({
            marginLeft: '-=30px'
        });
    }

    $('div.span1').on('hover', function(e) {
        if(e.type == 'mouseenter') {
           timerID  = setInterval(scrollLeft, 10);
        } else {
            clearInterval(timerID);
         }
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T11:25:25.040

混淆你的标记和 JavaScript 是不好的。拆分它们并按如下方式单独工作。

*HTML：*

```
<div class="span1"></div> 
```

*JavaScript：*

```
var timerID = null;

function scrollLeft() {
    $('.inner_wrapper').animate({
        marginLeft: '-=30px'
    });
}

$(document).ready(function() {
    $(".span1").hover(function() {
        timerID = setInterval(scrollLeft, 10);
    }, function() {
        clearInterval(timerID);
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T11:27:13.473

timerID 在 onmouseover 中定义，但在 onmouseout 中没有定义。

所以你可以做的是：

```
<script type="text/javascript">

   var scrollLeft = function(){
        $('.inner_wrapper').animate({
            marginLeft: '-=30px'
        });
   }; 

   var timerID;
   $(document).ready(function(){ 

       $("#timer").mouseover(function() {

            timerID = setInterval(scrollLeft, 10);

       }).mouseout(function() {
            clearInterval(timerID)
       }); 

   }); 

</script>

<div class="span1" id="timer"> </div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T11:24:05.127

您的

```
var timerID; 
```

变量被定义为处理程序内部的局部变量`onmouseover`，因此`onmouseout`处理程序不知道它。

将其声明为全局变量，或者更好地 - 将其封装到一个对象中，该对象将包含`timerID`作为字段`mouseover`和`mouseout`处理程序作为方法。

# performance - 比较 Lua 和 Mono

> ID：10880418
> 
> 赞同：1
> 
> 时间：2012-06-04T11:21:57.487
> 
> 标签：performance, mono, lua, language-comparisons

我想做一些研究，但找不到有关此主题的任何信息。

我发现的唯一信息-> [http://benchmarksgame.alioth.debian.org/u32/compare.php?lang=csharp&lang2=lua](http://benchmarksgame.alioth.debian.org/u32/compare.php?lang=csharp&lang2=lua)

而且我不确定如何解释这张图表。如果我是对的，它基本上说 Lua 比 Mono 快 10 倍。但是 Mono 的内存使用率是 Lua 的 8 倍左右。

这对性能有什么影响？

比较**Lua**和**Mono** ->*优点/缺点*

**编辑：** [游戏开发] Cryengine 3 使用 c++/lua atm。但是有些人为这个引擎发布了一个单声道端口。我对单声道非常熟悉。但现在我想对 Lua 做一些研究，看看是否值得学习这种语言，或者我是否应该坚持使用 Mono

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T11:36:45.417

您正在将[苹果与橙子](http://benchmarksgame.alioth.debian.org/dont-jump-to-conclusions.html#apples-and-oranges)进行比较。C# 是一种静态类型语言，编译成[CIL](http://en.wikipedia.org/wiki/Common_Intermediate_Language)是一种字节码语言，由虚拟机运行（或通常是[JITted](http://en.wikipedia.org/wiki/Just-in-time_compilation)），用于 Web 和独立应用程序开发。Lua 是一种动态类型的脚本语言，通常由解释器运行，通常作为可扩展的脚本语言嵌入到更大的应用程序中。

此外，您对基准的解释是错误的。条形图显示，与等效的 Lua 程序相比，Mono 程序的运行时间约为 1/10。

也就是说，这种微基准在很大程度上是无用的。不要相信我的话；阅读[枪战本身对它](http://benchmarksgame.alioth.debian.org/dont-jump-to-conclusions.html#not-prophesy)的评价。您应该阅读整篇文章，但我会引用一些有趣的引文：

> “基准测试的性能，即使它来自真实程序，也可能无助于预测具有不同热点的类似程序的性能。”
> 
> “在高吞吐量环境中使用解释型语言似乎有些自相矛盾，但我们发现 CPU 时间很少是限制因素；语言的可表达性意味着大多数程序都很小，大部分时间都花在 I /O 和本机运行时代码。”
> 
> “将编程语言相互比较，就好像它们的设计者打算将它们用于完全相同的目的——事实并非如此。”

长话短说：根据它是否能很好地完成你想做的事情来选择你的语言，它是否能让你清楚地表达你的意图，它是否能让你编写干净、可维护的代码；不是基于一些基本上毫无意义的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:36:37.510

这说：苹果比香蕉更绿。

你不能只说“Lua 消耗的内存比 C# 少，但 CPU 周期多 50%”。您必须根据您的上下文比较它们，例如您想要构建的内容。

当你想计算 5*5 时，好吧，Lua 可能更快（在实现方面）。但是如果你想构建一个有很多客户端的 ERP 应用程序，我不会推荐 Lua。

所以我们不能给你一个明确的优缺点清单，因为这在很大程度上取决于你想做什么。

# html - 窄 WebView 中的视口宽度自适应

> ID：10880419
> 
> 赞同：1
> 
> 时间：2012-06-04T11:22:14.523
> 
> 标签：html, uiwebview, webview, viewport

目前我有一个视口宽度设置为设备宽度的 HTML 文档。我的问题是使视口宽度适应比整个设备宽度窄的 WebView。在这种情况下使用设备宽度将使文档比 WebView 更宽，这是我试图避免的。

该文档将在 Android 和 iOS 应用程序中显示，并且仅使用所有元素的文档相对大小来构建。因此，它取决于正确适应视图宽度的文档宽度。

如何使视口宽度适合 WebView 的实际宽度而不是设备宽度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:37:36.437

我正在处理Android中类似的东西。以便您了解我的情况：我的测试设备宽度实际分辨率为 540，设计的固定宽度为 640。我的目标是将 cordova 中使用的 webview 设置为缩小以显示完整的设计宽度。

此代码是否可以帮助您解决 Android 上的问题？

```
public class MainActivity extends DroidGap {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");

    super.appView.getSettings().setSupportZoom(true);
    //super.appView.getSettings().setBuiltInZoomControls(true);

    super.appView.getSettings().setLoadWithOverviewMode(true);
    super.appView.getSettings().setUseWideViewPort(true);
    }
} 
```

# hadoop - 为什么我需要节俭来建造水槽？

> ID：10880422
> 
> 赞同：0
> 
> 时间：2012-06-04T11:22:25.487
> 
> 标签：hadoop, flume

我已经从“ [https://github.com/apache/flume/downloads](https://github.com/apache/flume/downloads) ”下载了flume ..但是我无法构建它..我需要先安装thrift才能构建flume吗？如果是这样，什么是共振..当我运行 mvn compile 时出现以下错误 -

```
mohammad@ubuntu:~/apache-flume-b01a760$ mvn compile
[INFO] Scanning for projects...
[INFO] Reactor build order: 
[INFO]   Flume
[INFO]   Flume Core
[INFO]   Flume Master Config Web Application
[INFO]   Flume Node Web
[INFO]   Flume Distribution Project
[INFO]   A log4j appender for Flume
[INFO]   Flume Hello World Plugin
[INFO]   Flume HBase Plugin
[INFO] ------------------------------------------------------------------------
[INFO] Building Flume
[INFO]    task-segment: [compile]
[INFO] ------------------------------------------------------------------------
[INFO] No goals needed for project - skipping
[INFO] ------------------------------------------------------------------------
[INFO] Building Flume Core
[INFO]    task-segment: [compile]
[INFO] ------------------------------------------------------------------------
[INFO] [antlr3:antlr {execution: default}]
[INFO] ANTLR: Processing source directory /home/mohammad/apache-flume-b01a760/flume-core/src/main/antlr3
ANTLR Parser Generator  Version 3.2 Sep 23, 2009 14:05:07
com/cloudera/flume/conf/FlumeDeploy.g
com/cloudera/flume/shell/antlr/FlumeShell.g
[INFO] [antrun:run {execution: generate-version-file}]
[INFO] Executing tasks

main:
[copy] Copying 1 file to /home/mohammad/apache-flume-b01a760/flume-core/target/generated-sources/version/com/cloudera/flume
[INFO] Executed tasks
[INFO] [avro:idl-protocol {execution: default}]
[INFO] [thrift:compile {execution: default}]
[ERROR] thrift failed output: 
[ERROR] thrift failed error: /bin/sh: null/bin/thrift: not found

[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] thrift did not exit cleanly. Review output for more information.
[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 7 seconds
[INFO] Finished at: Mon Jun 04 16:10:47 IST 2012
[INFO] Final Memory: 28M/243M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:36:08.057

Flume 有一些代码生成，它利用 thrift 作为传输通信序列化机制。

在 flume-core/pom.xml 中，你可以看到：

```
<plugin>
    <groupId>org.apache.thrift.tools</groupId>
    <artifactId>maven-thrift-plugin</artifactId>
    <version>0.1.10</version>
    <configuration>
      <thriftExecutable>${thrift.executable}</thriftExecutable>
    </configuration>
    <executions>
      <execution>
        <goals>
          <goal>compile</goal>
          <goal>testCompile</goal>
        </goals>
      </execution>
    </executions>
</plugin> 
```

需要安装thrift，然后在父pom.xml中配置位置：

```
<properties>
  <!-- NB: The version of the thrift compiler must match that of the dependency 
  on the jar file below. -->
  <thrift.executable>${env.THRIFT_HOME}/bin/thrift</thrift.executable>

  <!-- Set default encoding to UTF-8 to remove maven complaints -->
  <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>

  <!-- defaults for flaky test and focused test exclusions -->
  <test.exclude.pattern>$</test.exclude.pattern> <!-- junk pattern -->
  <test.include.pattern>**/Test*.java</test.include.pattern>
</properties> 
```

# r - 函数内的消息（用于状态）未立即显示在控制台中

> ID：10880423
> 
> 赞同：3
> 
> 时间：2012-06-04T11:22:27.483
> 
> 标签：r, message

我写了一个函数，它需要一些时间来运行（由于一个巨大的数据集上的 1000+ 循环与预测模型测试相结合）。

为了对状态有任何了解，在调用函数时，我在`message`函数的 for 循环内使用命令。问题是函数完成后所有消息都显示在控制台中，而不是立即显示。所以它对我没有帮助:)

我试图在 Stackoverflow 上找到解决方案，但没有找到。例如，我查看了“[在 R 中显示状态消息](https://stackoverflow.com/q/4754996/1281181)”这个问题。在处理函数后，该主题中的所有答案和示例代码仍然只给我控制台中的文本，而不是立即给我。

如何解决这个问题？R 中是否存在阻止`message`在控制台中立即打印文本的设置？

注意：我在下面尝试的示例，其结果与我的函数相同；处理函数后显示文本。

*示例 1（约书亚·乌尔里希）：*

```
for(i in 1:10) {
  Sys.sleep(0.2)
  # Dirk says using cat() like this is naughty ;-)
  #cat(i,"\r")
  # So you can use message() like this, thanks to Sharpie's
  # comment to use appendLF=FALSE.
  message(i,"\r",appendLF=FALSE)
  flush.console()
} 
```

*示例 2（泰勒）：*

```
test.message <- function() {
  for (i in 1:9){
    cat(i)
    Sys.sleep(1)
    cat("\b")
  }
} 
```

编辑：第一个示例确实有效（“刷新控制台”是问题）......但是当我测试它时，我出于某种原因注释掉了刷新控制台：S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:57:05.290

```
test.message <- function() {
     for (i in 1:9){
       cat(paste(as.character(i),'\n'))
       flush.console()
       Sys.sleep(1)
     }
   } 
```

这类似于 fotNelton 的推荐。

编辑： ttmaccer 很可能是正确的。我刚刚在 Ubuntu 服务器上进行了测试，代码可以在不刷新控制台的情况下运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:05:53.453

我似乎认为这可能是一个特定于 Windows 的问题。在 linux 上或在 cygwin shell 中运行 R 可能不需要 flush.console()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T15:52:44.250

您可能有兴趣使用进度条功能之一（`winProgressBar`、`tkProgressBar`或`txtProgressBar`）。win 版本仅适用于 windows，但 win 和 tk 版本的优点是它们不会使您的输出混乱，而是打开另一个小窗口并在那里显示进度。

循环的进度可以用进度条显示，但其他详细信息可以用`label`参数更新和显示。

# javascript - 声明全局变量

> ID：10880424
> 
> 赞同：0
> 
> 时间：2012-06-04T11:22:31.837
> 
> 标签：javascript, jquery, ajax

我知道这个问题已经被问过百万次了，所以我很抱歉。

我查看了所有其他示例，但我不明白为什么以下代码现在不起作用。

当我将它放在 CheckinMap 函数之外时，我得到未定义的警报框。

为什么？

```
$(document).ready(function() { 
    var MapData;
        $(function CheckinMap() {
                $.ajax({
                    type: "GET",
                    url: "content/home/index.cs.asp?Process=ViewCheckinMap",
                    success: function (data) {
                        MapData = data;
                    },
                    error: function (data) {
                        $("#checkinmap").append(data);
                    }
                });
            });
    alert(MapData);
    }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T11:24:08.123

`MapData`未定义，因为在`alert`ajax 调用仍在运行时执行（ajax 是异步的）并且响应尚不可用。所以以这种方式更改您的代码

```
 success: function (data) {
         MapData = data;
         alert(MapData);
 }, 
```

或继续代码执行调用另一个函数

```
 success: function (data) {
         continueExecution(data)
 },
 ...

 function continueExecution(data) {
     alert(data)
 } 
```

或使用延迟对象（在 jQuery 1.5+ 上）

```
$.ajax({
   type: "GET",
   url: "content/home/index.cs.asp?Process=ViewCheckinMap"
})
.done(function(data) { alert(data) }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:37:58.140

执行顺序是异步的。目前执行以下步骤：

1.  阿贾克斯调用
2.  警报（地图数据）；// 未知
3.  设置 MapData 的成功函数（或甚至不设置 MapData 的错误函数）

您可以在成功函数中发出警报（如建议的那样），但是您不知道该变量是该函数的本地变量还是实际上是全局变量。要测试 MapData 是否实际上是全局的，您可以使用 setTimeout 来提醒变量返回。

查看此修改后的示例代码：

```
// Global variable
var MapData;

// Global function
function test() {
  alert(MapData);   
}

$(document).ready(function() {
    $.ajax({
        type: "GET",
        url: "http://www.google.nl",
        success: function (data) {
            MapData = data;

            // Call global function with timeout
            setTimeout(test, 10);
        },
        error: function (data) {
            $("#checkinmap").append(data);

            // Set error message instead of data (for testing)            
            MapData = 'error';

            // Call global function with timeout
            setTimeout(test, 10);
        }
    });
}); 
```

或者你可以在这里测试一下：http: [//jsfiddle.net/x9rXU/](http://jsfiddle.net/x9rXU/)

# linq - wp7中如何将数据绑定到列表框

> ID：10880429
> 
> 赞同：0
> 
> 时间：2012-06-04T11:22:52.073
> 
> 标签：linq, windows-phone-7, linq-to-objects

我正在将数据绑定到 wp7 中的列表框

这是代码

```
 <ListBox x:Name="list_budget" Width="440">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Name="txtname" Text="{Binding category}"></TextBlock>

                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

//类函数

```
 public string[] jinal;

    public void  budgetcategorywise()
    {

        var q = from shoppingItem p in db.Item1
                group p by new { p.category_name } into g
                select new { category = g.Key, total = g.Sum(p => p.total_amt) `enter code here`}.ToString();

      jinal = q.toarray();
} 
```

//编码

```
 list_budget.ItemsSource = App.Viewmod.jinal; 
```

现在，错误是查询正常结果是完美的，但我无法将数据绑定到列表框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:42:27.473

查看您的代码示例：

1.  请确保`budgetcategorywise()`在进行绑定之前调用
2.  请将您的绑定更改为：

    ```
     <TextBlock Name="txtname" Text="{Binding}"></TextBlock> 
    ```

第二个更改的原因是您的代码`ToString()`在 Linq 列表生成中使用了 a - 这意味着带有其`category`字段的类在字符串表示中被展平。

* * *

如果您希望将类别字段保留在绑定中，请为您的列表项使用一个类，例如：

```
 public class MyListItem
   {
       public string category { get;set; }
       public double total { get;set; }
   }

   public List<MyListItem> jinal;

   public void  budgetcategorywise()
   {

        var q = from shoppingItem p in db.Item1
                group p by new { p.category_name } into g
                select new MyListItem() { category = g.Key, total = g.Sum(p => p.total_amt) };

      jinal = q.ToList();
   } 
```

# ios - scrollViewWillEndDragging:withVelocity:targetContentOffset: 不在 UISCrollView 的边缘工作

> ID：10880434
> 
> 赞同：29
> 
> 时间：2012-06-04T11:23:35.067
> 
> 标签：ios, uiscrollview, ios5, uiscrollviewdelegate

我正在尝试实现一个可滚动的自定义标签栏，并且在每个标签栏项目上都有分页。为此，我正在使用委托 scrollViewWillEndDragging:withVelocity:targetContentOffset: 它完美地解决了一个问题。

我的分页工作方式是，如果 contentOffset 靠近正确的项目，则 targetContentOffset 会更改为该项目的偏移量。左侧也一样。

问题是，每当我在第一个项目的左半部分和最后一个项目的右侧（滚动视图水平工作）它应该转到 ContentOffset 0 和最右边项目的内容偏移量（减去那些屏幕），但事实并非如此。

我检查了调试器，targetContentOffset->x 确实为 0（在第一种情况下 - 最左侧项目的左侧）。所以问题是 UIScrollView 没有在那里滚动。我迷路了。

这是我实现的委托：

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView
                 withVelocity:(CGPoint)velocity
          targetContentOffset:(inout CGPoint *)targetContentOffset{
     NSInteger index = lrintf(targetContentOffset->x/self.tabWidth);
     targetContentOffset->x = index * self.tabWidth;
} 
```

这是解释我想要做什么的图表。

```
|-------|-------|-------|-------|-------|-------|-------|
|       |       |       |       |       |       |       |
|       |       |       |       |       |       |       |
|_______|_______|_______|_______|_______|_______|_______|

        |_______________________________________|
         where it is and i scroll it to the left

   <----|

   |_______________________________________|
              where it would stop

|_______________________________________|
        where i want it to stop 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-27T11:21:55.673

这似乎是一个已知问题。经过一番调查并与其他人交谈后，有人建议这可能是一个错误，结果证明是正确的。我向 Apple 报告了它，它是否被标记为重复但仍处于打开状态。只为遇到同样问题的人解答。我像 Big Papoo 建议的那样解决它，通过使用接近我想要的偏移量（0.1 似乎可以做到）。右端也是如此。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-10T13:08:19.980

在 iOS 6.0 上已修复的问题。

现在它可以正常工作了。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-18T11:13:12.360

我尝试将最终偏移设置为稍微偏离零或 Big Papoo 建议的内容大小，但注意到这消除了过度滚动反弹。我对此的解决方案是检查原始 targetContentOffset 以查看它是否等于零或 contentSize，如果是则将其保留：

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset {

    float expectedOffset = targetContentOffset->x;
    if (expectedOffset == 0 || expectedOffset == scrollView.contentSize.width) return; // Scroll view will bounce so leave the targetContentOffset.

    float targetOffset = [self roundedOffset:expectedOffset]; // Round your offset.

    // Adjust the offset to make sure it works.
    if (targetOffset == 0) targetOffset = 1;
    else if (targetOffset == SCROLLVIEW_WIDTH) targetOffset = SCROLLVIEW_WIDTH - 1;

    targetContentOffset->x = targetOffset;
} 
```

您当然可以使用`scrollViewDidEndDecelerating:`to 将滚动视图移动 1 点。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-26T23:37:20.713

我发现您可能会调查 2 个未记录的行为： - 将零设置为最终偏移量不起作用，我建议将 1 或任何大于零的值（0.5 可能有效，未经测试） - 您最好检查速度符号并计算您最终的偏移量将位于用户删除的当前点的左侧或右侧是手指。不要试图让滚动在另一侧向后退。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T00:36:47.660

如果您使用的是水平表格视图，那么在您的 scrollViewWillEndDragging:withVelocity:targetContentOffset: 函数中，您可以调用：

```
[self.tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:<index> inSection:<section>] atScrollPosition:UITableViewScrollPositionTop animated:YES]; 
```

我发现这比尝试在水平表视图中操作 targetContentOffset->y 要好得多。

# php - 需要删除数组中的空值

> ID：10880443
> 
> 赞同：0
> 
> 时间：2012-06-04T11:24:12.827
> 
> 标签：php, arrays

嗨，我需要帮助创建数组

我已经设置了数组中的记录，因为我必须用“ ”替换空数组；

如果所有数组值都为空，则需要从该数组中删除行如果行中有一个或两个值是空的，则需要用“ ”替换；

我试过删除空值，但是在插入记录时它会抛出错误，因为所有列都不匹配插入条件

i，e 下面我已将示例数组值放置在 i 中以删除第一行，因为所有值都是空的，并且在 2 行中，我已将空值替换为“ ”；

```
Array
(
[0] => 
[1] => 
[2] => 
[3] => 
[4] => 
[5] => 
)
Array
(
[0] => abcd@abcd.com
[1] => abcd@abcd.com
[2] => 
[3] => abcd@abcd.com
[4] => abcd@abcd.com
[5] => abcd@abcd.com
)
foreach ($rows as $r) {
$SweepedArray = array_values(array_filter($r));
if (!empty($SweepedArray) && $SweepedArray != "") {
$value[] = implode(',', $r);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:10:58.713

像这样：

```
foreach ($rows as &$r) {
    if (empty($r)) {
        $r = "";
    }
} 
```

# mysql - 条件 MySQL 查询 - 结果的隐私

> ID：10880454
> 
> 赞同：1
> 
> 时间：2012-06-04T11:25:18.567
> 
> 标签：mysql, conditional

我正在尝试从数据库表中获取视频。条件：仅当用户的隐私设置不限制观看时，才应包含视频。

视频表： ![视频表](../Images/40fcf9505518bcaf13d5a3e0966fb3e5.png)

隐私可以是 0、1、2 或 3。

关系表： ![关系](../Images/140bc40ee10f98065749f0b00101cb6e.png)

假设我想获取所有视频的页面，但不应该包含那些我不是朋友的人的视频。（稍后，我将不得不扩展此查询以包括“联系人”）。

这意味着应查询具有此隐私设置的所有视频：

隐私 = 0

隐私！= 1（个人资料视频被隐藏）

隐私 = 3**我**在这个成员的朋友列表中

我的用户 ID 是 1。

我尝试了这个查询，但它没有给我想要的结果：

```
SELECT videos.*,
FROM `video_table` AS `videos`
WHERE 
(
    videos.privacy != 1
    OR (
        videos.privacy = 3
        AND '1' IN (
            SELECT friendslist.relationid
            FROM friendslist
            WHERE friendslist.userid = videos.userid
            AND friendslist.friend = 'yes'
        )
    )
)
LIMIT 20 
```

我想IF语句只能用在查询的选择部分？

伪代码查询： SELECT all videos WHERE privacy != 1 AND IF (privacy = 3) { myuserid must be on users_friendslist} ）

如何显示所有视频，但排除我不是朋友的人的视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:59:59.033

```
SELECT *
FROM video_table AS v
WHERE privacy = 0
    OR (privacy = 3
        AND @myId IN (
            SELECT f.relationid
            FROM friendslist AS f
            WHERE f.userid = v.userid
            AND f.friend = 'yes'
        )
    )
LIMIT 20 
```

# objective-c - 多次点击uitableviewcell

> ID：10880459
> 
> 赞同：0
> 
> 时间：2012-06-04T11:25:27.740
> 
> 标签：objective-c, ios, uitableview

有没有办法根据点击单元格来改变 uitableview 单元格的大小？例如：宽度为 100.0f 的单元格，第一次单击单元格将宽度更改为 150.0f，第二次单击单元格将宽度更改回 100.0f。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:31:16.380

您需要维护一个布尔值，在每次后续单击时更改此布尔值。

现在基于这个 bool 定义你的`cellForRowAtIndexPathmethod`和 on`didSelectRowAtIndexPath`方法，只需更新 bool 并重新加载`table`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:39:39.447

您应该能够使用 NSIndexPath 对象索引 NSMutableDictionary。这将允许您为单击的 TVCell 缓存所需的大小。然后在运行时将它们拉出来：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
   NSNumber *newHeight;
   NSNumber *height = [[self heightCache] objectForKey:indexPath];

   if (height == nil) newHeight = [NSNumber numberWithFloat:100.0];
   else newHeight = [NSNumber numberWithFloat:[height doubleValue] + 50];
   [[self heightCache] setObject:newHeight forKey:indexPath];
   [tableView reloadData]; // also consider reloadRowsAtIndexPaths:
} 
```

同时在您的代表中：

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
   NSNumber height = [heightCache objectForKey:indexPath];
   return height == nil ? defaultHeight : [height floatValue];
} 
```

**更新：**哦，哎呀，我以为你的意思是 TVCells 变得越来越大。是的，只需将我示例中的浮点数更改为布尔值，然后在行的高度中返回基于布尔值的高度。

# jquery - 使用克隆的 jQuery 对象将数字添加到 id 属性的增量值

> ID：10880460
> 
> 赞同：0
> 
> 时间：2012-06-04T11:25:28.163
> 
> 标签：jquery, clone

我正在使用 jQuery 1.7.2 克隆一组表单输入元素。每个输入元素都有一个 id 属性。我希望克隆的元素使用与源元素相同的 id 属性，但附加一个数字以使其唯一。

我的代码是这样的：

```
 // Add additional author fields
    jQuery('#addanotherauthor a').click(function () {
        // Clone 'other author' group of fields
        var markUpToClone = jQuery('.other-authors').clone();
        // Set all input values of cloned mark-up to empty, remove 'disabled' attribute
        markUpToClone.find('input').val('').removeAttr('disabled');
        // Ensure cloned inputs have unique id attributes
        var numberOfAdditionalAuthors = $('.other-authors').length.toString();
        markUpToClone.find('input').attr('id', $(this).attr('id') + numberOfAdditionalAuthors);
        // Append emptied clone
        jQuery('#otherauthorscontainer').append(markUpToClone);
        return false;
    }); 
```

当我运行它时，克隆元素的 id 属性变为“undefined1”、“undefined2”等。有趣的是，如果我这样做：

```
markUpToClone.find('input').attr('id', numberOfAdditionalAuthors); 
```

它返回正确递增数字的 id。如果我这样做：

```
markUpToClone.find('input').attr('id', $(this).attr('id')); 
```

它返回一个与源值相同的 id。但是当我尝试将两者放在一起时：

```
markUpToClone.find('input').attr('id', $(this).attr('id') + numberOfAdditionalAuthors); 
```

我得到了'undefined1'问题。

任何人都可以看到这是失败的地方并建议修复吗？

谢谢各位！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:39:06.830

您的使用`this`脱离了上下文。用于`attr(function(index, attr){})`管理 ID

```
// Add additional author fields
    jQuery('#addanotherauthor a').click(function () {
        // Clone 'other author' group of fields
        var markUpToClone = jQuery('.other-authors').clone();
        // Set all input values of cloned mark-up to empty, remove 'disabled' attribute
        var numberOfAdditionalAuthors = $('.other-authors').length/*.toString()*/;// toString() not needed
        markUpToClone.find('input').val('').removeAttr('disabled')
        // Ensure cloned inputs have unique id attributes
                .attr('id', function(i, id){
                        return id + numberOfAdditionalAuthors;
                });

        // Append emptied clone
        jQuery('#otherauthorscontainer').append(markUpToClone);
        return false;
    }); 
```

# php - 网站的搜索结果过滤器

> ID：10880461
> 
> 赞同：0
> 
> 时间：2012-06-04T11:25:28.590
> 
> 标签：php, html, search, filter

我正在开发一个网络应用程序，其中有几个结果，

我需要制作一个搜索框，以便当我开始在搜索文本字段中输入内容时，结果会根据文本框的内容开始过滤...

**“设想”**

*   我在页面上获取注册用户列表
*   该列表的格式和表格很好
*   列表顶部有一个文本框
*   当我在其中输入内容时，列表会重新填充匹配结果，就像“Windows 开始菜单搜索和文件”一样

我不能使用网格视图，因为我不是在 ASP 中开发，而且我不会使用网格视图，因为我需要能够尽可能多地自定义结果的格式等...

我不能再具体...请任何建议，在哪里寻找，或寻找什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:00:46.100

试试这个 jQuery 插件：[http ://datatables.net/](http://datatables.net/)

您选择的任何解决方案都必须在整个表上进行操作（无分页），或者使用 Ajax。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:03:07.080

似乎 javascript（或您最喜欢的框架）非常适合您的需求。您的 JS 代码应该只过滤匹配的行，并且由于您的表是 html，因此其行格式取决于您。

# java - 如何在 JSP 页面中编写 javascript 倒数计时器，以便重新加载不会重新启动计时器？

> ID：10880465
> 
> 赞同：-3
> 
> 时间：2012-06-04T11:25:39.517
> 
> 标签：java, javascript, jsp, timer

> **可能重复：**
> [如何在页面加载，页面重新加载时调用一次javascript函数，不要再次调用它](https://stackoverflow.com/questions/3455532/how-to-call-a-javascript-function-once-on-page-load-page-reloads-dont-call-it)

我想在jsp页面中调用一个javascript，它会触发一个倒数计时器。但是，如果用户刷新页面，我不希望重置计时器 - 它应该从剩余时间继续。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:12:18.650

在您的评论中，您说您想要一个不会在每次加载页面时都重新启动的计时器。这就是我会做的...

假设您的页面被调用`timer.jsp`，并且在那里您有一个开始倒计时的脚本。因此，我将执行以下操作...

1.  当您`timer.jsp`第一次生成页面时，创建一个`session`名为的参数`TimerFinish`，其中包含计时器应该*完成*的日期时间。例如，如果日期时间是`01/01/2012 10:00`并且您的计时器是`25`分钟，您将存储该值`01/01/2012 10:25`。
2.  每当用户显示页面时（包括第一个页面加载和每次页面刷新），这个`TimerFinish`值都已经存在。您可以使用它来计算计时器完成之前的时间。将此值计算为`TimerFinish - currentDateTime`
3.  在您的 javascript 中设置计时器以从您在步骤 2 中计算的值开始倒计时。

因此，无论用户做什么（刷新页面等），计时器将始终从剩余时间开始，而不是简单地再次重置为 25 分钟。当`timer.jsp`用户重新加载时，您只需从对象中读取现有`TimerFinish`值`session`并使用它来设置剩余时间的正确值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:33:31.737

JSP 只是一种创建 HTML 的动态方式。所以，您的问题是“如何在页面加载时调用 javascript？”

答案是。

当浏览器解析页面时，每个脚本都会被执行。尝试这个：

```
<html>
  <head>
    <script>alert("from head");<script>
  </head>

  <body>
    <script>alert("from body");<script>
  </body>
</html> 
```

您还可以在页面加载完成时运行脚本。很多元素都有`onload`事件。例如`body`元素。所以，你可以说：

`<body onload="alert('body is loaded')">`

因此，当身体加载完成时将显示警报。

# python - 进行“objects.get()”查询时获取“未定义全局名称错误”

> ID：10880467
> 
> 赞同：-1
> 
> 时间：2012-06-04T11:25:50.873
> 
> 标签：python, database, django

我收到的错误是

> 未定义全局名称“名称”...

为`subjects = Course...`线。我想查询主题名称，以便可以在主题模板中使用它们

楷模

```
from django.db import models
from django.contrib.auth.models import User

class Course(models.Model):

name      = models.CharField(max_length = 100)
 stype      = models.CharField(max_length = 100)
 subject   = models.CharField(max_length = 100)
 location  = models.CharField(max_length = 100) 

class Teacher(models.Model):
 username      = models.ForeignKey(User,unique = True)
 address   = models.CharField(max_length = 200)
 city      = models.CharField(max_length = 50)   
 email_address = models.EmailField(max_length=75, unique = True)

class Student(models.Model):
 username      = models.ForeignKey(User,unique = True)
 address       = models.CharField(max_length = 200)
 city          = models.CharField(max_length = 50)   
 email_address = models.EmailField(max_length=75, unique = True)

class Attendance(models.Model):

 course    = models.ForeignKey(Course,unique = True)
 student   = models.ForeignKey(Student,unique = True)
 teacher   = models.ForeignKey(Teacher,unique = True)
 date      = models.DateField(unique = True)
 status    = models.BooleanField(unique = True)
 created_at= models.DateTimeField(auto_now_add = True)
 updated_at= models.DateTimeField(auto_now = True)

 def subjects(request,username):
    user      = User.objects.get(username=username)
    subjects  = Course.objects.get(name = name)
    variables = RequestContext(request,{
        'username': username,
        'subject' : subject
  })   
    return render_to_response('subjects.html', variables) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:38:37.537

`subjects = Course.objects.get(name = name)` 没有`name`定义。

您可以通过函数参数传递`name`类似的东西：`username`

`def subjects(request,username, name):`

或者代替`name`其他字符串，例如：

`subjects = Course.objects.get(name ="course_name")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:31:58.663

你进来`username`了，`def subjects(request,username):`但是..

```
subjects  = Course.objects.get(name = name)   ### name is not defined here...you have to get it from parameter just like username. 
```

# php - 是否可以编写输出 JSON 的 SQL 函数？

> ID：10880468
> 
> 赞同：6
> 
> 时间：2012-06-04T11:26:01.607
> 
> 标签：php, mysql, sql

我刚刚想到在 MySQL 中编写一个函数，我可以将子查询传递给它以输出该子查询的 JSON 表示。

我有很多我经常从 MySQL 获取的数据，然后将其转换为 JSON 以用于 API 输出。在只返回 JSON 的 SQL 服务器上编写一个 MySQL 函数来执行此操作可能会提高速度吗？

我的想象：

```
query('SELECT * FROM people');

// Output:
// +----+--------+-----+
// | id | name   | Age |
// +----+--------+-----+
// |  1 | Molly  | 24  |
// |  2 | Edward | 28  |
// +----+--------+-----+

query('JSON(SELECT * FROM people)');

// Output:
// [{"id":1,"name":"Molly","Age":24},{"id":2,"name":"Edward","Age":28}] 
```

可能的？如果是的话，我可以如何开始的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:32:23.587

首先，查看 StackOverflow 上的[这个线程](https://stackoverflow.com/questions/6818441/sql-server-select-to-json-function)（SQL Server）。

您还可以[在此处](http://embosa.wordpress.com/2010/02/26/oracle-and-json-using-pljson/)查看 PL/JSON 和[sql2json](http://www.bin-co.com/php/scripts/sql2json/) (PHP)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T11:37:50.340

考虑一个包含用户名和电子邮件的表，您可以在 MySQl 用户定义函数中以下列方式构造 JSON。

```
SELECT 
     CONCAT("[",
          GROUP_CONCAT(
               CONCAT("{username:'",username,"'"),
               CONCAT(",email:'",email),"'}")
          )
     ,"]") 
AS json FROM users; 
```

返回 JSON 的 MySQL 查询。

```
[
     {username:'mike',email:'mike@mikesplace.com'},
     {username:'jane',email:'jane@bigcompany.com'},
     {username:'stan',email:'stan@stanford.com'}
] 
```

没有将结果转换为 JSON 格式的内置方法，因此您必须自己在 UDF 中进行操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-14T14:58:21.120

从 MySQL 5.7 开始，您可以使用`JSON_ARRAY`和`JSON_MERGE`其他功能输出 JSON。

它是这样工作的：

```
RETURN JSON_ARRAY('id':1,'name':'Molly','Age':24); 
```

您还可以拥有多个文档：

```
RETURN JSON_MERGE('{"id":1,"name":"Molly","Age":24}', '{"id":2,"name":"Edward","Age":28}'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T13:46:10.957

我没有看到编写 SQL 来生成 JSON 的意义，它只是凌乱而丑陋，并且很难概括为一个通用函数，而且它并不是 SQL 的真正设计目的；SQL 旨在管理、存储和检索您需要的记录，并对结果集执行计算——非常快速和即时——仅此而已。如果您需要 JSON，则无论如何都必须将行吐出到服务器端脚本，因此您不妨使用脚本语言来创建 JSON——这就是脚本语言的*用途。*

# inheritance - 如何使用继承对 RESTful API 建模？

> ID：10880472
> 
> 赞同：100
> 
> 时间：2012-06-04T11:26:16.083
> 
> 标签：inheritance, polymorphism, rest

我有一个需要通过 RESTful API 公开的对象层次结构，但我不确定我的 URL 应该如何构建以及它们应该返回什么。我找不到任何最佳做法。

假设我有继承自 Animals 的 Dogs 和 Cats。我需要对狗和猫进行 CRUD 操作；我也希望能够对一般动物进行手术。

我的第一个想法是做这样的事情：

```
GET /animals        # get all animals
POST /animals       # create a dog or cat
GET /animals/123    # get animal 123 
```

问题是 /animals 集合现在“不一致”，因为它可以返回和获取不具有完全相同结构的对象（狗和猫）。拥有一个返回具有不同属性的对象的集合是否被认为是“RESTful”？

另一种解决方案是为每个具体类型创建一个 URL，如下所示：

```
GET /dogs       # get all dogs
POST /dogs      # create a dog
GET /dogs/123   # get dog 123

GET /cats       # get all cats
POST /cats      # create a cat
GET /cats/123   # get cat 123 
```

但是现在狗和猫之间的关系已经失去了。如果要检索所有动物，则必须同时查询狗和猫资源。URL 的数量也会随着每个新的动物子类型而增加。

另一个建议是通过添加以下内容来增强第二个解决方案：

```
GET /animals    # get common attributes of all animals 
```

在这种情况下，返回的动物将仅包含所有动物共有的属性，删除特定于狗和特定于猫的属性。这允许检索所有动物，尽管细节较少。每个返回的对象都可以包含指向详细的具体版本的链接。

有什么意见或建议吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-04T15:13:40.877

我会建议：

*   每个资源只使用一个 URI
*   仅在属性级别区分动物

为同一个资源设置多个 URI 绝不是一个好主意，因为它可能会导致混乱和意外的副作用。鉴于此，您的单个 URI 应该基于通用方案，例如`/animals`.

在“基础”级别处理整个狗和猫集合的下一个挑战已经通过`/animals`URI 方法解决了。

使用媒体类型中的查询参数和标识属性的组合可以轻松解决处理像狗和猫这样的特殊类型的最后一个挑战。例如：

`GET /animals`( `Accept : application/vnd.vet-services.animals+json`)

```
{
   "animals":[
      {
         "link":"/animals/3424",
         "type":"dog",
         "name":"Rex"
      },
      {
         "link":"/animals/7829",
         "type":"cat",
         "name":"Mittens"
      }
   ]
} 
```

*   `GET /animals`- 得到所有的狗和猫，将返回雷克斯和手套
*   `GET /animals?type=dog`- 得到所有的狗，只会返回雷克斯
*   `GET /animals?type=cat`- 得到所有的猫，只有手套

然后在创建或修改动物时，调用者有责任指定所涉及的动物类型：

媒体类型：`application/vnd.vet-services.animal+json`

```
{
   "type":"dog",
   "name":"Fido"
} 
```

上述有效负载可以通过`POST`or`PUT`请求发送。

上述方案为您提供了与通过 REST 的 OO 继承类似的基本特征，并且能够添加进一步的专业化（即更多动物类型），而无需进行大手术或对您的 URI 方案进行任何更改。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-01-07T00:15:00.493

借助最新版本的 OpenAPI 中引入的最新增强功能，可以更好地回答这个问题。

从 JSON 模式 v1.0 开始，可以使用 oneOf、allOf、anyOf 等关键字组合模式并获得经过验证的消息有效负载。

[https://spacetelescope.github.io/understanding-json-schema/reference/combining.html](https://spacetelescope.github.io/understanding-json-schema/reference/combining.html)

但是，在 OpenAPI（以前的 Swagger）中，模式组合已通过关键字**鉴别**器(v2.0+) 和**oneOf** (v3.0+) 增强，以真正支持多态性。

[https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md#schemaComposition](https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md#schemaComposition)

您的继承可以使用 oneOf（用于选择子类型之一）和 allOf（用于组合类型及其子类型之一）的组合来建模。下面是 POST 方法的示例定义。

```
paths:
  /animals:
    post:
      requestBody:
      content:
        application/json:
          schema:
            oneOf:
              - $ref: '#/components/schemas/Dog'
              - $ref: '#/components/schemas/Cat'
              - $ref: '#/components/schemas/Fish'
            discriminator:
              propertyName: animal_type
     responses:
       '201':
         description: Created

components:
  schemas:
    Animal:
      type: object
      required:
        - animal_type
        - name
      properties:
        animal_type:
          type: string
        name:
          type: string
      discriminator:
        property_name: animal_type
    Dog:
      allOf:
        - $ref: "#/components/schemas/Animal"
        - type: object
          properties:
            playsFetch:
              type: string
    Cat:
      allOf:
        - $ref: "#/components/schemas/Animal"
        - type: object
          properties:
            likesToPurr:
              type: string
    Fish:
      allOf:
        - $ref: "#/components/schemas/Animal"
        - type: object
          properties:
            water-type:
              type: string 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-04T15:16:13.770

我会去 /animals 返回狗和鱼的列表以及其他内容：

```
<animals>
  <animal type="dog">
    <name>Fido</name>
    <fur-color>White</fur-color>
  </animal>
  <animal type="fish">
    <name>Wanda</name>
    <water-type>Salt</water-type>
  </animal>
</animals> 
```

实现类似的 JSON 示例应该很容易。

客户总是可以依赖那里的“名称”元素（一个通用属性）。但是根据“类型”属性，将有其他元素作为动物表示的一部分。

返回这样的列表并没有任何内在的 RESTful 或非 RESTful - REST 没有规定任何特定的格式来表示数据。它只是说数据必须具有*某种*表示形式，并且该表示形式的格式由媒体类型标识（在 HTTP 中是 Content-Type 标头）。

想想你的用例——你需要展示混合动物的列表吗？那么，然后返回一个混合动物数据的列表。你只需要一份狗的名单吗？好吧，列一个这样的清单。

您是否执行 /animals?type=dog 或 /dogs 与未规定任何 URL 格式的 REST 无关——这将作为 REST 范围之外的实现细节保留。REST 只声明资源应该有标识符——不管是什么格式。

您应该添加一些超媒体链接以更接近 RESTful API。例如，通过添加对动物详细信息的引用：

```
<animals>
  <animal type="dog" href="/animals/123">
    <name>Fido</name>
    <fur-color>White</fur-color>
  </animal>
  <animal type="fish" href="/animals/321">
    <name>Wanda</name>
    <water-type>Salt</water-type>
  </animal>
</animals> 
```

通过添加超媒体链接，您可以减少客户端/服务器耦合 - 在上述情况下，您可以将 URL 构建的负担从客户端转移，并让服务器决定如何构建 URL（根据定义，它是唯一的权限）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T15:42:16.493

> 但是现在狗和猫之间的关系已经失去了。

确实，但请记住，URI 根本不会反映对象之间的关系。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-13T11:32:55.680

我知道这是一个老问题，但我有兴趣研究更多关于 RESTful 继承建模的问题

我总是可以说狗是动物，母鸡也是，但是母鸡产蛋而狗是哺乳动物，所以它不能。类似的 API

获取动物/:animalID/eggs

不一致，因为表明动物的所有亚型都可以有鸡蛋（作为 Liskov 替换的结果）。如果所有哺乳动物都以“0”响应此请求，将会有一个后备，但如果我也启用 POST 方法怎么办？我应该害怕明天我的薄饼里会有狗蛋吗？

处理这些场景的唯一方法是提供一个“超级资源”，它聚合所有可能的“派生资源”之间共享的所有子资源，然后对每个需要它的派生资源进行专门化，就像我们向下转换一个对象时一样进入 oop

获取 /animals/:animalID/sons 获取 /hens/:animalID/eggs 发布 /hens/:animalID/eggs

这里的缺点是，有人可以传递狗 ID 来引用母鸡集合的实例，但狗不是母鸡，因此如果响应是 404 或 400 并带有原因消息，则不会不正确

我错了吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-22T10:29:48.497

是的，你错了。也可以按照 OpenAPI 规范对关系进行建模，例如以这种多态方式。

```
Chicken:
  type: object
  discriminator:
    propertyName: typeInformation
  allOf:
    - $ref:'#components/schemas/Chicken'
    - type: object
      properties:
        eggs:
          type: array
          items:
            $ref:'#/components/schemas/Egg'
          name:
            type: string 
```

**...**

# testing - 如何使用线程对共享点站点执行压力测试

> ID：10880473
> 
> 赞同：1
> 
> 时间：2012-06-04T11:26:38.487
> 
> 标签：testing, sharepoint-2010, stress-testing, performance-testing, sharepointfoundation2010

我想分析进行压力测试活动的共享点站点的性能（因此它的弱点）。需要做的是调用一些通过 Web 服务公开的方法，这些方法在共享点站点内执行以下操作：

```
-create a new group 
-add a content to the group 
-add an attachment to the content 
-delete the content 
-delete the previously created group 
```

所需要的是模拟有 4500 个用户尝试同时执行这些操作的情况（同时或更实际地在较短的时间跨度内，例如在 5 秒内）。

我们也想注册每个操作的执行时间（网络方法，例如“创建新组”）。我想我可以通过使用线程和秒表的控制台应用程序来模拟这些操作。有没有人遇到过类似的问题并且可以给我任何现有的解决方案或提示以“正确的方式”做到这一点？例如，我怎样才能获得所有线程在同一时刻开始？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:39:35.573

并不是说 Visual Studio 负载测试不是一个好工具。有一些工具，如 Tsung、Eventlet（和许多其他工具）可以支持超过数千个并发用户。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:14:05.157

我是 Visual Studio 负载测试 2 年的用户，我发现它非常强大且易于使用。您可以运行集成测试、在网站中导航、模拟数据库负载……事实上，应有尽有。因为它是一个 MS 应用程序，它也完全兼容所有 MS 产品，如 Sharepoint：从单元测试调用 WCF 服务比其他技术更容易（如何测试 nettcpbinding？）。您还可以使用 Visual Studio Profiler 来检测您的代码（并查看哪一行代码是昂贵的或事件 ADO.net 交互）。您还可以通过许多扩展点轻松扩展负载测试。

一件重要的事情是 VS laod 测试是“侵入性的”。它会记录只收集响应时间、请求长度……而且所有性能计数器、数据库查询……所有这些指标都保存在 SQLExpress 等专用数据库中用于报告。Excel 有一个插件。

**只需一个重要说明（适用于所有负载测试解决方案！）**：

您可以从开发人员机器甚至单个专用机器上运行负载测试，但通常无法生成足够的流量来真正查看应用程序的响应方式（由于 CPU/内存/网络有限，您的机器无法模拟 500 个并发用户） . 为了模拟大量用户，您将设置所谓的负载测试装置。 ![试验台](../Images/752a8aba9fc28a9bd340d834bfec6de3.png)

测试台由测试控制器机器和一台或多台测试代理机器组成，如图 1 所示。控制器管理和协调代理机器，并且代理针对应用程序生成负载。测试控制器还负责从被测服务器和可选的测试台机器收集性能监控数据。

以下是一些链接：

*   [MSDN](http://msdn.microsoft.com/en-us/library/dd293540.aspx)
*   [戴夫的介绍](http://davefancher.com/2010/10/01/web-performance-load-testing-in-visual-studio-2010/)

# cassandra - 如何使用 PHPCassa 以相反的顺序获取列

> ID：10880475
> 
> 赞同：2
> 
> 时间：2012-06-04T11:26:42.610
> 
> 标签：cassandra, phpcassa

如何使用 PHPCassa 以相反的顺序获取单行中的列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:33:00.047

来自 phpcassa 文档

```
 public function get($key,
                     $columns=null,
                     $column_start="",
                     $column_finish="",
                     $column_reversed=False,
                     $column_count=self::DEFAULT_COLUMN_COUNT,
                     $super_column=null,
                     $read_consistency_level=null) 
```

请参阅**“@param`bool $column_reversed`以相反的顺序获取列”**

将此参数设置为“true”将以相反的顺序获取列。

您甚至可以为**multiget、get_range 和 get_indexed_slices**查询设置此参数。

有关更多详细信息，请参阅：[phpcassa columnfamily 文档](http://api.efine.cz/phpcassa/class-ColumnFamily.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T11:39:13.317

技巧是使用空列切片对象完成的。

```
...

$cf = new ColumnFamily($pool, 'mycolumnfamily');

// normal order
$rows = $cf->get('mykey'); 

print_r($rows);

// reverse order, 5 is column count, true is reverse order
$rows = $cf->get('mykey', new ColumnSlice(null, null, 5, true) );

print_r($rows); 
```

# python - 将python中的字符串日期转换为python中的日月年

> ID：10880482
> 
> 赞同：2
> 
> 时间：2012-06-04T11:27:24.143
> 
> 标签：python, date

我是 python 新手。我有一个格式为 2012 年 1 月 11 日的日期，我需要将其转换为 2012 年 1 月 11 日。我需要使用给定字典的过程：月份 = {1：一月，2：二月，...等}。如果我打印（月份，日期字符串），那么我应该得到它。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T11:53:06.683

不要重新发明轮子。你不需要字典。

```
>>> import datetime
>>> datetime.datetime.strptime('1/11/2012', '%m/%d/%Y').strftime('%d %B %Y')
'11 January 2012' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T11:43:32.787

```
datestring = '1/11/2012'
months = {'1':January, ...}
month, day, year = datestring.split('/')
print '{} {} {}'.format(day, months[month], year) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T11:53:21.583

```
>>> from datetime import datetime
>>> import calendar
>>> mydate = datetime.strptime('1/11/2012','%m/%d/%Y')
>>> calendar.month_name[mydate.month]
'January'
>>> mydate.year
2012 
```

# mysql - 关系数据库中不同对象的图（实现类似的接口）

> ID：10880486
> 
> 赞同：0
> 
> 时间：2012-06-04T11:27:46.170
> 
> 标签：mysql, database, postgresql, relational-database

所以我在思考涉及将对象序列化为关系数据库的某些问题。

假设你有 N 个不同的对象，它们都实现了某个接口（一个有向图接口。它们提供诸如 getIncomingNodes() 、 getOutgoingNodes() 之类的方法）。

如果每个这样的对象在关系数据库中都有一个对应的表，那么将这种有向图序列化到关系数据库的最佳实践是什么？

假设 N 很小，（在我的例子中，N=3）我将所有可能的链接分解为一个单独的表。例如，从对象 x 指向 y 的链接表将类似于：

```
tbl_links_X_Y {
int X_id
int Y_id
} 
```

问题是，你得到 N^2 个这样的表 - 效率不是很高，并且将来可能难以扩展到 N+1 个对象。

有什么模式可以解决这个问题吗？（即使它不涉及关系数据库，我也很乐意听到......）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:42:04.323

您也可以轻松地将对象的类（表名）存储在连接表中。

```
tbl_links_X_Y {
int X_id
int Y_id
enum {user, customer, product} X_type
enum {user, customer, product} Y_type
} 
```

他们只需将其包含在 where 或 join 子句中。

我想这不是一个严格的关系数据库，因为你不能（？）使用/强制外键约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:23:07.673

您还可以“强制”您的图表遵循关系模型：即

表图{整数顶点，varchar边缘列表}

edgelist 可以是一个基于分隔符的字符串：例如 {2,10},{3,12},{4,13} 等，其中条目是 {incident vertex,weight}
这样，表中的行数将是O(n) 而不是 O(n^2)

然后，当您的应用程序读取图形并执行某些操作时，您必须在内存中构建图形并执行相同操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:22:05.507

所以最近我遇到了一个调用[OrientDB](http://orientdb.org/)
的 NoSQL 框架，该数据库引擎正好处理了这个问题。它是一个[图形数据库](http://en.wikipedia.org/wiki/Graph_database)，能够执行 SQL 查询和延迟加载另一个对象指向的对象（例如相邻顶点）。

剩下的一件事是将这个框架的性能与传统 SQL 数据库的性能进行比较。（当然，我必须考虑在传统 SQL 数据库中从原始响应构造对象到查询所需的时间。）

一旦我得到这个比较的结果，我会把它们贴在这里。

# odata - webmatrix可以使用剃刀查询像stackoverflow这样的外部odata web服务吗

> ID：10880489
> 
> 赞同：0
> 
> 时间：2012-06-04T11:28:10.243
> 
> 标签：odata, webmatrix

我希望我可以像我与数据库交互的方式一样捕获外部 Web 服务，例如

```
var data_websevice = Database.Open("http://www.stackoverflow.com/atom/tags"); 
```

这是可能的吗？

我实际上需要将 json 数据返回到我的客户端页面。使用自动完成 jquery UI。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:58:34.457

您不能为此使用数据库助手。它仅适用于数据库。

[您可以通过 Uri 使用WebClient 类](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)从外部资源获取数据来请求它，就像在任何其他 ASP.NET 应用程序中一样。

# android - 如何禁用 Android SSO für Facebook App Center？

> ID：10880497
> 
> 赞同：2
> 
> 时间：2012-06-04T11:29:10.920
> 
> 标签：android, facebook, single-sign-on, center

我为 Facebook 应用中心提交了一个 Android 和 iOS 应用程序。
禁用 iOS SSO 没有问题，但禁用 Android SSO 是不可能的。这就是我启用它的原因，尽管我没有在我的应用程序中使用 Facebook SSO。这是我提交应用程序的唯一方式。
Facebook 就我的提交给了我以下反馈：

> “您的 Android 应用似乎没有使用单点登录 (SSO)。请实施 SSO 或将此集成作为开发者应用中列出的平台删除。”

我尝试按照建议删除集成，它给了我以下错误消息：

> 您已指定要启动的 Android 程序包，但尚未启用已配置 Android SSO。只能启动支持 Android SSO 的应用程序。

其他人有这个问题吗？你能做什么？

# php - JSON 返回空数据

> ID：10880498
> 
> 赞同：0
> 
> 时间：2012-06-04T11:29:11.287
> 
> 标签：php, json

我的 php 版本是 5.2.17，当我`json_decode($_GET['getItem'])`返回 null 结果时！！

```
function getItem(id){
$.getJSON(
    "items.php", 
    { getItem: '{"item": "' + id + '"}'},   
    function(json) {
        $("#"+json.itemName).html(json.itemData);
        }
); 
```

项目.php

```
header('Content-Type: application/json');
$jItemArray = json_decode($_GET['getItem']);
var_dump($jItemArray);
die; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:35:54.973

我认为参数将得到 URI 编码。我会输出的值，`$_GET['getItem']`看看它是什么。我猜你只需`urldecode`要先运行它，然后再运行`json_decode`它。

话虽如此......你有理由**发送**json而不是标准参数编码吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:56:45.550

是的，问题出在`$_GET['getItem']`我发现它的数据不正确，
`array(1) { ["getItem"]=> string(18) "{\"item\": \"35\"}" }`
并且通过打开它可以完美地 `magic quotes`工作`php.ini`

`magic_quotes_gpc = Off`
谢谢大家指点我

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-04T11:33:15.130

你的 php 应该是：

```
header('Content-Type: application/json');
echo json_encode($_GET['getItem']); 
```

# c++ - 可以强类型化基于字符串的用户定义文字吗？

> ID：10880507
> 
> 赞同：10
> 
> 时间：2012-06-04T11:29:56.100
> 
> 标签：c++, c++11, variadic-templates, user-defined-literals

C++ 中新的用户定义文字概念暗示了字符串文字的一些非常有趣的用途，例如：

```
"Goodbye %s world"_fmt("cruel");
"Goodbye %s world"_fmt(123); // Error: arg 1 must be convertible to const char*

R"(point = \((\d+), (\d+)\))"_re; // Builds DFA at compile-time.

typedef table<
    column<"CustId"_name   , std::string>,
    column<"FirstName"_name, std::string>,
    column<"LastName"_name , std::string>,
    column<"DOB"_name      , date       >
> Customer; 
```

但是，当我在 gcc 中构建这些类型的结构时，例如：

```
template <char... Chars> Name<Chars...> operator "" _name() {
    return Name<Chars...>();
}

auto a = 123_name;    // OK
auto b = "abc"_name;  // Error 
```

我收到以下错误：

```
…unable to find string literal operator ‘operator"" _name’ with ‘const char [4]’, ‘long unsigned int’ arguments 
```

通过阅读，我猜测从字符串文字派生的 UDL 无法使用可变参数模板形式。

1.  实际上是不是使用可变参数模板形式无法解析字符串文字？
2.  如果是这样，有没有人知道为什么这种有用的 UDL 形式被排除在标准之外？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T11:36:43.907

你说的对。字符串文字不能与可变参数模板形式（§2.14.8/5）一起使用：

> 如果`L`是*user-defined-string-literal*，令*str*为不带*ud 后缀*的文字，令*len为**str*中的代码单元数 （即，其长度不包括终止空字符）。文字`L`被视为形式的调用
> 
> ```
> operator "" X (str, len) 
> ```

我翻阅了提案文件（我能找到的最新文件是[N2750](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2750.pdf)），找不到不允许使用可变参数模板表格的解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-19T13:36:26.067

允许这样做的 N3599 已在 gcc 和 clang 中实现。

```
template<class CharT, CharT... chars>
int operator ""_suffix(){
    return 42;
} 
```

# ios - 'if not' 的 Objective-C 预处理器指令

> ID：10880510
> 
> 赞同：41
> 
> 时间：2012-06-04T11:30:13.970
> 
> 标签：ios, objective-c, iphone, c-preprocessor, preprocessor-directive

我了解如何使用这样的预处理器指令：

```
#if SOME_VARIABLE
    // Do something
#else
    // Do something else
#endif 
```

但是，如果我只想做一些 IF NOT SOME_VARIABLE 的事情怎么办。

显然我仍然可以这样做：

```
#if SOME_VARIABLE

#else
    // Do something else
#endif 
```

. . . 将 if 留空，但是有没有办法：

```
#if not SOME_VARIABLE
   // Do something
#endif 
```

[这里](https://developer.apple.com/library/mac/#documentation/DeveloperTools/gcc-4.2.1/cpp/Conditional-Syntax.html#Conditional-Syntax)的Apple 文档不建议这样做，但这似乎是一个非常基本的需求。

基本上我想做的预处理器相当于：

```
if(!SOME_VARIABLE)(
{
   // Do Something
} 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-06-04T11:32:00.443

你可以试试：

```
#if !(SOME_VARIABLE)
   // Do something
#endif 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-04T11:47:20.320

您是否要检查是否已定义某些内容？如果是，您可以尝试：

`#ifndef SOME_VARIABLE`

或者

`#if !defined(SOME_VARIABLE)`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-04T11:47:30.330

Apple 文档（[If - The C Preprocessor](https://developer.apple.com/library/mac/#documentation/DeveloperTools/gcc-4.2.1/cpp/If.html#If)）是正确的，这就是 C 预处理器语句从一开始就采用的方式。根据相同的文档，您所能做的就是制作一个计算结果为零或非零值的表达式并使用它。

Meccan 的答案是正确的，如`TARGET_IPHONE_SIMULATOR`定义为`TRUE`或`FALSE`取决于平台，因此表达式将计算为零或非零量。

通常，这些宏（`#if`等）用于根据是否定义符号来包含或排除事物。对于该用例，预处理器具有`#ifdef`并且`#ifndef`涵盖了历史上被认为是最重要的情况。

此外，鉴于这些语句的主题只能是其他预处理器定义的符号（通过`#define`），那么这种限制是合理的。

# notepad++ - 如何同时编辑一个单词的所有突出显示实例？

> ID：10880511
> 
> 赞同：37
> 
> 时间：2012-06-04T11:30:26.700
> 
> 标签：notepad++, keyboard-shortcuts

在 Notepad++ 中，每当您选择 HTML 文档（或 CSS）中的任何单词时，相似的单词都会自动突出显示。

是否有一个快捷方式可以一次编辑所有这些突出显示的片段？

![Notepad++ 中突出显示的所有“单元”实例](../Images/df4d60234044c6b87a9f98ad339be71d.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-08-06T20:14:27.137

目前，Notepad++ 6.9.2 版没有内置选择所有相似文本和编辑的功能（如 @George 提到的 Sublime 中的 Ctrl+D 功能）。[当 Notepad++更新它使用的 Scintilla 版本](https://notepad-plus-plus.org/community/topic/11360/multi-selection-and-multi-edit/2)时，它听起来确实会起作用，因为该功能内置于[该](http://www.scintilla.org/ScintillaDoc.html#MultipleSelectionAndVirtualSpace).

完成类似于您所说的多行编辑的唯一方法是使用替换功能或 Notepad++ 的多行编辑版本。

# 查找/替换

1.  突出显示您要替换的单词。
2.  键入`Ctrl`+`H`以调出替换对话框。
3.  修改“替换为”文本。
4.  选择“替换”或“全部替换”

# 多重编辑

您首先需要[在 Notepad++ 中启用此功能](https://notepad-plus-plus.org/features/multi-editing.html)。为此，请转到`Settings`→<kbd>Preferences→<kbd>Editing，然后启用多行编辑。现在，当您按住 Ctrl 并在文本周围单击时，每次单击的位置都会留下一个光标。找到所有要编辑的地点后，您就可以开始输入了。您输入的任何内容现在都将出现在您将光标留在的每个位置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-20T13:37:32.790

Ctrl + F，输入单词，输入替换。“点击全部替换”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-13T10:06:22.360

曾经有一种方法可以突出显示并做一些事情来编辑所有突出显示的部分。我知道您可以单击，但是以前有一种方法您不需要对所有内容都执行此操作（并且与查找/替换命令无关！）

我应该补充一点，Ctrl+Click 选项不一定要匹配单词，因此它与突出显示相似单词并没有真正的关系

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-18T12:47:28.227

在此处查看答案[https://superuser.com/questions/621986/editing-all-instances-of-a-string-in-notepad](https://superuser.com/questions/621986/editing-all-instances-of-a-string-in-notepad)

这是：

> CTRL+H 进入替换对话框（或通过菜单搜索 ==> 替换）。
> 
> 输入要查找的字符串并输入要替换的字符串，然后点击右侧的“全部替换”按钮。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-20T20:48:06.817

不过这可能有点晚了……

1.  将光标移动到 ul 块之一中单词“unit”的开头。就在 " 字符旁边。确保这是第一项或最后一项。
2.  按关键字上的“Alt”键。
3.  向上（如果您选择了最后一行）或向下（如果您选择了第一行）光标在其位置内垂直移动（将仅显示一条微小的垂直突出显示线）。
4.  类型：cool-您将看到“cool-unit”

如果要覆盖单词“unit”，则：在第一步选择整个单词 unit，然后执行下一步。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-07-29T08:15:16.703

有一种方法，但我使用了不同的编辑器。Sublime 允许您通过突出显示一个区域并按 CTRL+D 来选择多个区域，然后您会获得许多光标，并且您可以并行编辑它们。

# android - 与 Android 中的 setId() 方法混淆

> ID：10880512
> 
> 赞同：0
> 
> 时间：2012-06-04T11:30:27.363
> 
> 标签：android, view

这是对该`setId()`方法的描述。

> ```
> void  android.view.View.setId(int id) 
> ```
> 
> 公共无效 setId (int id)
> 
> 自：API 级别 1
> 
> 设置此视图的标识符。标识符在此视图的层次结构中不必是唯一的。标识符应该是一个正数。

我的问题是，尽管我们在 XML 文件中分配了唯一的 id，为什么标识符在这个视图的层次结构中不必是唯一的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T11:48:15.480

> 我的问题是，尽管我们在 xml 文件中分配了唯一的 id，但为什么标识符在此视图的层次结构中不必是唯一的..？

`android:id`也不必在 XML 文件中是唯一的，尽管这通常是您编写它的方式。

要了解为什么小部件 ID 不需要唯一，请考虑`ListView`. 假设我们有`ListView`8 行。这些行中的每一行都是通过扩展布局 XML 资源（例如，`android.R.layout.simple_list_item_1`）来创建的。这些膨胀的行中的每一行都是`ListView`. 然而，由于这些行中的每一行都是从相同的布局资源中扩展而来的，因此每一行的小部件都具有与所有其他行相同的 ID。

这通常不是问题。它确实导致了 Android 开发的一个基本规则：**总是调用`findViewById()`一些可以为你寻找的小部件提供独特结果的东西**。在这种情况下，我不想调用或来`findViewById()`在其中一行中查找小部件，因为将有 8 个小部件都具有相同的 ID，而且我不知道我会取回哪一行的小部件。相反，我需要调用*row* ，以从该特定行获取特定小部件。`ListView``Activity``findViewById()`

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T12:01:13.400

ID 不必是唯一的，您可以使用任何您喜欢的正整数，但在这种情况下，可以有一些具有等效 ID 的视图。

也像 Romain Guy 在[这篇](https://groups.google.com/group/android-developers/browse_thread/thread/91efb49a87a9a4bd#)文章中所说：

`findViewById()`是**深度优先**搜索算法；它将返回它可以找到的指定 id 的第一个视图。*

# delphi - Delphi：如何禁用 TWebBrowser 安全证书警报？

> ID：10880513
> 
> 赞同：2
> 
> 时间：2012-06-04T11:30:28.277
> 
> 标签：delphi, twebbrowser

我正在编写一个 Delphi 应用程序，它使用 TWebBrowser 在表单上显示 Google 地图。但是当它开始导航到 HTML 文件时，会多次显示警报（大约 10 次）：“ `revocation information for the security certificate for this site is not available ...`”

如何防止 TWebBrowser 这样做？我的意思是禁用安全警告？我必须为 Google 和我的文件添加例外吗？如果是，如何？一些代码会对我有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-15T12:03:38.207

原来 TWebBrowser 组件有一个名为“Silent”的属性，当设置为“true”时，会阻止此类对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T01:27:23.077

这是一个快速的片段来帮助。将 Silent 设置为 true，这将阻止浏览器窗口显示任何对话框。这会做你想做的，但如果有任何问题，它们将不会显示，因为任何窗口显示被禁用。

```
procedure TForm1.FormShow(Sender: TObject);
var
  WebAddress : string;
begin
  WebAddress := 'https://www.google.com/maps/place/Orlando,+FL/@28.4810971,-81.5088354';
  WebBrowser1.Silent := true;
  WebBrowser1.navigate(webaddress);
end; 
```

如果您不介意要访问的地址，请查看安全警告？

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-04T12:35:05.093

在控制面板 --> Internet 设置 --> 高级选项卡中取消选中“检查服务器证书吊销”和“检查发布者证书吊销”设置

# matrix - 当给定行和列的总和时确定矩阵的元素

> ID：10880514
> 
> 赞同：4
> 
> 时间：2012-06-04T11:30:33.107
> 
> 标签：matrix, sum, computation

有一个 4x4 矩阵，所有 4 个对角线元素都为零。所有其他元素都是非负整数。所有 4 行和 4 列的总和是单独已知的。是否可以确定矩阵的剩余 12 个元素？例如

```
0      1     1     0   sum=2
2      0     0     1   sum=3
4      1     0     0   sum=5
0      1     6     0   sum=7
sum=6 sum=3 sum=7 sum=1 
```

任何指导都会非常有帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:41:54.980

矩阵是

0 一[12]一[13]一[14]

一个[21] 0 一个[23]一个[24]

一[31]一[32] 0 一[34]

一个[41]一个[42]一个[43] 0

问题是求解一组线性方程：

[12] + [13] + [14] [=] c 1

a [21] + a [23] + a [24] = c [2]

等等。我们有 12 个变量和 8 个方程（行 4 个，列 4 个）。要求解一个有 12 个变量的线性方程组，我们通常需要 12 个方程。由于方程的数量较少，系统不会有唯一解。它可能有无限多的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T06:22:46.967

矩阵是

0 一[12]一[13]一[14]

一个[21] 0 一个[23]一个[24]

一[31]一[32] 0 一[34]

一个[41]一个[42]一个[43] 0

问题是求解一组线性方程：

[12] + [13] + [14] [=] r 1

一个[21] + 一个[23] + 一个[24] = r [2]

一个[31] + 一个[32] + 一个[34] = r [3]

41 + [43] + [44] [=] r [4]

a [21] + a [31] + a [41] = c [1]

[12] + [32] + [42] = c [2]

[13] + [23] + [43] = c [3]

[14] + [34] + [44] = c [4]

因此，您需要求解形式为 Ax = b 的方程，其中 A 仅包含 0 和 1 个系数。使用高斯消元法和欧几里得算法找到**整数**矩阵 S、D、T，使得 D 为对角线形式且 SDT = A。如果您不知道如何执行此操作，请在网上搜索[Smith 范式算法。](http://en.wikipedia.org/wiki/Smith_normal_form)

然后

SDTx = Ax = b

因此

DTx = S ^(-1) Ax = S ^(-1) b

由于 D 是对角线形式，您可以检查是否可以解决

Dy = S ^(-1) b

对于 y。您还可以找到（同质）解空间的基础。这反过来又可以用来降低寻找原始方程正解的复杂性。

# eclipse - Eclipse Rhostudio 不显示错误消息

> ID：10880516
> 
> 赞同：0
> 
> 时间：2012-06-04T11:30:43.447
> 
> 标签：eclipse, syntax-error, rhomobile, error-logging

我刚刚开始在 Windows 上使用 Eclipse 3.7.2 的 rhostudio 插件。

我有错误的代码，但控制台似乎从未输出错误消息。

当我启动模拟器时，我确实得到了一些日志，但是一旦它遇到错误的代码行，它就会停止记录并且模拟器窗口变为空白。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T03:23:17.840

您可以通过更改日志级别来增加日志输出量：

```
rhoconfig.txt 
```

在您的项目根文件夹中并设置 MinSeverity 如下：

```
# Rhodes log properties
# log level
# 0-trace, 1-info(app level), 3-warnings, 4-errors
# for production set to 3
MinSeverity  = 0

# enable copy log messages to standard output, useful for debugging
LogToOutput = 1 
```

# clojure - 间接递归 - clojure

> ID：10880517
> 
> 赞同：2
> 
> 时间：2012-06-04T11:30:44.297
> 
> 标签：clojure, functional-programming

以下代码有什么问题： func 表达式获取包含可以包含表达式的术语的表达式...

```
(defn term[]
    (def mytmp (zip/xml-zip {:tag :term}))
    (cond 
      (= (first(:content(first vecTok))) "(")
        (do
          (def mytmp (popVecTo mytmp))
          (def mytmp (zip/append-child mytmp (expression)))
          (def mytmp (popVecTo mytmp)))
      :else 
          (def mytmp (popVecTo mytmp)))
    (zip/node mytmp))
(defn expression[]
    (def mytmp (zip/xml-zip {:tag :expression}))
    (def mytmp (zip/append-child mytmp (term)))
    (while (contains? #{"+", "-", "*","/", "&", "|", "<", ">", "="} (first(:content(first vecTok))) )
      (do
        (def mytmp (popVecTo mytmp))
        (def mytmp (zip/append-child mytmp (term)))))
    (zip/node mytmp))
(def vecTok (vec (:content(first(xml-seq (parse  "C:/Users/User/Desktop/forHekronot/BallT.xml")))))) 
```

在文件中：

```
<a><symbol>(</symbol><identifier>dy</identifier><symbol>-</symbol><identifier>dx</identifier><symbol>)</symbol></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:00:29.847

尽管@jszakmeister 对如何更好地解决问题发表了评论，但让我尝试给出并回答这个问题：

你可以先`(def expression)`然后再`(defn term [] ...)`最后`(defn expression [] ...)`。

间接递归的经典例子当然是穷人对正数的奇/偶函数：

```
clojurec.core=> (def even)
#'clojurec.core/even
clojurec.core=> (defn odd [x]  (and (not (= x 0)) (even (dec x))))
#'clojurec.core/odd
clojurec.core=> (defn even [x] (or (= x 0) (odd (dec x))))
#'clojurec.core/even
clojurec.core=> (even 10)
true 
clojurec.core=> (odd 10)
false
clojurec.core=> (odd 10000)
StackOverflowError   clojure.lang.Numbers.equal (Numbers.java:214) 
```

糟糕，根据文件的大小（或更确切地说是深度），这可能是个问题。但并非全部丢失，我们甚至可以重新定义以在`trampoline`内部使用：

```
(defn even [n] 
  (letfn [(evenrec [x] (or (= x 0) #(oddrec (dec x)))) 
          (oddrec  [x] (and (not (= x 0)) #(evenrec (dec x))))]
    (trampoline evenrec n))) 
```

# objective-c - 视频上传在 iOS 4 中有效，但在 ios 5 中无效

> ID：10880518
> 
> 赞同：0
> 
> 时间：2012-06-04T11:30:47.533
> 
> 标签：objective-c, ios5

我有一个应用程序，我想用它从照片库中选择照片或视频并将它们上传到服务器。这适用于 ios 4。代码如下：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{

image_selected = FALSE;
video_selected = FALSE;  
imagePicker.mediaTypes = [NSArray arrayWithObjects:(NSString *)kUTTypeImage,(NSString *)kUTTypeMovie, nil];

NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
    image_selected = TRUE;
    imageFrame = [info objectForKey:UIImagePickerControllerOriginalImage];
    NSLog(@"image1 has %@", imageFrame);
    [image setImage:imageFrame];
}else if ([mediaType isEqualToString:(NSString *)kUTTypeMovie]) {
    video_selected = TRUE;
    videoURL = [info objectForKey:UIImagePickerControllerMediaURL];
    NSLog(@"video has %@", videoURL);
    MPMoviePlayerController *mp = [[MPMoviePlayerController alloc]initWithContentURL:videoURL];
    videoFrame = [[mp thumbnailImageAtTime:0.0 timeOption:MPMovieTimeOptionNearestKeyFrame]retain];
    [image setImage:videoFrame];
    [mp release];
}
  [[picker parentViewController] dismissModalViewControllerAnimated:YES];
} 
```

但是，这在 ios 5（模拟器或设备）中不起作用。The application freezes as and when the choose button in photo library is selected.

非常需要这方面的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:03:22.567

```
[picker dismissModalViewControllerAnimated:YES]; 
```

# c# - 根据变量选择字符串的一部分

> ID：10880522
> 
> 赞同：0
> 
> 时间：2012-06-04T11:31:16.973
> 
> 标签：c#, asp.net, string

首先我很抱歉标题，我不知道如何制定我想要做的事情。

这是我要分析的字符串的一部分：

```
Microsoft Application Error Reporting<br><br />Microsoft Application Error Reporting<br><br />Microsoft Office Professional Plus 2010<br><br />Microsoft Office OneNote MUI (English) 2010<br><br /> 
```

这是我显示字符串的网站： [网站](http://www.noelshack.com/2012-23-1338808905-SiteWebV3.png)

现在我想做的是：当我单击一个复选框时，我想将与复选框行关联的字符串的一部分放入另一个字符串中。例如，如果我选择第 9 个复选框，我想`Microsoft Office Excel MUI (English) 2007`输入一个新字符串。

我已经做了一段代码到指定的行，但我现在不知道如何使用它......

```
int i=0; 
        do
        {
            int j = 0;
            while ((j = (InstalledSoftwares.Text).IndexOf("<br><br />", j)) != -1)
            {
                j += "<br><br />".Length;
                i++;
            }
        } while (i <= Convert.ToInt16(TextBoxTest.Text)); 
```

`InstalledSoftwares.Text`是我要分析的字符串。
`TextBoxTest`包含复选框的编号。

我搜索了很多以找到问题的答案，但没有找到任何东西。非常感谢您的帮助，对我的英语感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:55:00.020

您应该使用拆分选项来拆分文本，然后从数组中选择与选中的复选框相关的相关文本

```
InstalledSoftwares.Text.Split(new []{"<br>< br/>"}, 
                              StringSplitOptions.RemoveEmptyEntries); 
```

现在您可以使用索引`8`来获取复选框 9 的相关文本（因为数组索引为零）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T12:00:26.513

使用[正则表达式](http://msdn.microsoft.com/en-us/library/ms972966.aspx)

```
Split Pattern = @"\s*<br>\s*<br\s*/>\s*" 
```

产品名称 = 复选框索引 - 1

* * *

```
String[] Products = Regex.Split(XML, Pattern);
String Product = Products[ CheckBoxIndex - 1 ]; 
```

# c# - 如何将方法参数指定为 UserControl 和 Interface

> ID：10880523
> 
> 赞同：0
> 
> 时间：2012-06-04T11:31:18.473
> 
> 标签：c#, wpf, inheritance, interface, user-controls

我有一个带有参数 p1 的构造函数，它具有以下规范：

*   p1 必须继承自 UserControl
*   p1 必须实现接口 MyInterface

例子：

```
public class ClassA: UserControl, MyInterface
{ ... } 
```

任何人都知道我如何定义该方法。

构造函数如下所示：

```
public MyClass(UserControl uc) : base(uc)
{ 
   // access to MyInterface-Methods
} 
```

基类（来自第三方 dll）需要一个 UserControl，我需要访问 MyInterface 方法。

提前致谢， rhe1980

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:35:20.980

发表评论后，我想到的只是一个

```
public void MyMethod<T>(T param) where T : UserControl, MyInterface
{
     // do something here
} 
```

[编辑] 好的，在此期间没有人对它进行攻击，所以我会尝试跟进。似乎您有一个从某种基类派生的类，采用`UserControl`. 以下是您可以尝试的方法：

```
public interface ITest
{
    void AwesomeInterface();
}

//As far as I could tell, this class is in some 3rd party DLL
public class TheBaseClass
{
    protected TheBaseClass(UserControl uc)
    {

    }
}

//Now this should work just fine
public class ClassB<T> : TheBaseClass where T : UserControl, ITest
{
    public ClassB(T param) : base(param)
    {
        param.AwesomeInterface();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:35:46.683

你可以通过声明一个抽象基类来做到这一点：

```
public abstract class BaseControl : UserControl, IMyInterface {} 
```

并声明该类型的构造函数参数。客户端代码现在*必须*从 BaseControl 派生并实现接口。

不太确定这在 WPF 设计器中是否能正常工作，我知道它在 Winforms 设计器中不起作用，它需要能够构造基类的实例。出于同样的原因，通用的工作也没有。在这种情况下，您必须求助于运行时检查：

```
public MyClass(UserControl uc) : base(uc)
{ 
    if (uc as IMyInterface == null) {
        throw new ArgumentException("You must implement IMyInterface", "uc");
    }
    // etc..
} 
```

# java - 此代码是否会用新文件替换现有的数据库文件？

> ID：10880524
> 
> 赞同：1
> 
> 时间：2012-06-04T11:31:18.633
> 
> 标签：java, android

我正在使用这种方法将我的 db 文件复制到 sd car 请告诉我 sdcard 上的文件是否已经存在，那么它将替换还是不会复制？

```
public boolean copyDbToSDCard() {
        boolean success = false;
        String SDCardPath = Environment.getExternalStorageDirectory()
                .getAbsolutePath();
        final String DBPATH = SDCardPath + "/BD/";
        final String DBNAME = "Mydb3.db";
        this.getReadableDatabase();
        File directory = new File(DBPATH);
        if (!directory.exists())
            directory.mkdir();
        close();

        try {
            InputStream mInput = new FileInputStream(DB_PATH + DB_NAME);
            OutputStream mOutput = new FileOutputStream(DBPATH + DBNAME);
            byte[] buffer = new byte[1024];
            int length;
            while ((length = mInput.read(buffer)) > 0) {
                mOutput.write(buffer, 0, length);
            }
            mOutput.flush();
            mOutput.close();
            mInput.close();
            success = true;
        } catch (Exception e) {
            Toast.makeText(myContext,
                    "copyDbToSDCard Error : " + e.getMessage(),
                    Toast.LENGTH_SHORT).show();
            e.fillInStackTrace();
        }
        return success;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:40:06.627

您可以检查数据库是否可用？

像这样

```
checkDB()
{
try{
      SQLiteDatabase   dbe = SQLiteDatabase.openDatabase("selectedFilePath", null,0);
        Log.d("opendb","EXIST");
        dbe.close();
         // DB exits then delete
        File file = new File(selectedFilePath);
        boolean deleted = file.delete(); <--- this will help you to delete DB

    }
    catch(Exception e)
    {
         // DB not exits code to copy database
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:43:51.693

编码：

```
OutputStream mOutput = new FileOutputStream(DBPATH + DBNAME); 
```

和

```
mOutput.write(buffer, 0, length); 
```

使得如果文件存在，它将用新数据替换文件的内容

# ios - 部分透明的 UIImageView 不起作用

> ID：10880525
> 
> 赞同：0
> 
> 时间：2012-06-04T11:31:19.873
> 
> 标签：ios, background, uiimageview, png, transparent

我有一个部分透明的 png 文件，我想将它设置为我的 UIImageView 的背景。我实际上有这个代码：

```
 generalFond = [[UIImageViewTouchable alloc] initWithFrame:ScrollViewGeneral.frame];
        [generalFond.layer setOpaque:YES];
        generalFond.backgroundColor = [UIColor colorWithPatternImage:[imageCacheManager getUIImage:carte.carte_template.fondUrl]];
        [generalFond.layer setOpaque:NO];
        generalFond.opaque = NO;
        generalFond.delegate = self;
        [ScrollViewGeneral addSubview:generalFond]; 
```

我不明白有什么问题...我的 UiImageView 有一个白色背景，其中 png 文件是透明的

谢谢

罗宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:42:38.393

您将执行以下操作

```
 generalFond = [[UIImageViewTouchable alloc] initWithFrame:ScrollViewGeneral.frame];
   [generalFond.layer setOpaque:YES];
   generalFond.image = [imageCacheManager getUIImage:carte.carte_template.fondUrl];
   generalFond.backGroundColor = [UIColor clearColor];
   [generalFond.layer setOpaque:NO];
   generalFond.opaque = NO;
   generalFond.delegate = self;
   [ScrollViewGeneral addSubview:generalFond]; 
```

# celery - 芹菜在 dotcloud 部署上失败并出现 IO 错误

> ID：10880527
> 
> 赞同：1
> 
> 时间：2012-06-04T11:31:35.303
> 
> 标签：celery, django-celery, dotcloud

Celery 在我的一个 dotcloud 部署中失败了，我不知道如何修复。该部署几乎与现有的 dotcloud 部署（通过执行文件差异验证）相同，似乎工作正常。

我在 djcelery 日志中得到的错误：

```
dotcloud@hack-default-www-0:/var/log/supervisor$ 更多 djcelery_error.log
/home/dotcloud/env/lib/python2.6/site-packages/django/conf/__init__.py:75：Depre
阳离子警告：已删除 ADMIN_MEDIA_PREFIX 设置；使用 STATIC_URL 我
相反。
  “改用 STATIC_URL。”，弃用警告）
/home/dotcloud/env/lib/python2.6/site-packages/djcelery/loaders.py:108：用户警告
ing：使用 settings.DEBUG 会导致内存泄漏，切勿在 prod 中使用此设置
拍卖环境！
  warnings.warn("使用 settings.DEBUG 会导致内存泄漏，永远不要"
[2012-06-04 03:27:32,139: 警告/MainProcess] -------------- celery@hack-defaul
t-www-0 v2.5.3
---- **** -----
- - * *** *  -  [配置]
-- * - **** --- . 经纪人：amqp://root@hack-OQVADQ2K.dotcloud.com:29210//
- ** ---------- 。加载器：djcelery.loaders.DjangoLoader
- ** ---------- 。日志文件：[stderr]@INFO
- ** ---------- 。并发：2
- ** ---------- 。事件：开
- *** --- * --- 。节拍：关
-- ******* ----
--- ***** ----- [队列]
 -------------- 。芹菜：交换：芹菜（直接）绑定：芹菜

[任务]
  . Experiments.tasks.pushMessageToIphone
  . 实验.tasks.sendTestMessage
[2012-06-04 03:27:32,172：INFO/PoolWorker-1] 子进程调用 self.run()
[2012-06-04 03:27:32,185: INFO/PoolWorker-2] 子进程调用 self.run()
[2012-06-04 03:27:32,188: 警告/MainProcess] celery@hack-default-www-0 有 sta
rt。
[2012-06-04 03:27:35,315：错误/MainProcess] 消费者：连接错误：套接字
关闭。2 秒后重试...
[2012-06-04 03:27:40,374：错误/MainProcess] 消费者：连接错误：套接字
关闭。4 秒后重试...
[2012-06-04 03:27:47,479：错误/MainProcess] 消费者：连接错误：套接字
关闭。请在 6 秒后重试...
[2012-06-04 03:27:56,509：错误/MainProcess] 消费者：连接错误：套接字

```

有趣的是，celery cam 的错误日志显示了一些不同的东西。我不确定这是否是一个红鲱鱼..

```
/home/dotcloud/env/lib/python2.6/site-packages/django/conf/__init__.py:75：Depre
阳离子警告：已删除 ADMIN_MEDIA_PREFIX 设置；使用 STATIC_URL 我
相反。
  “改用 STATIC_URL。”，弃用警告）
[2012-06-04 03:27:31,373: INFO/MainProcess] -> evcam: 使用 djce 拍摄快照
lery.snapshot.Camera（每 1.0 秒）

回溯（最近一次通话最后）：
  文件“hack/manage.py”，第 14 行，在
    执行管理器（设置）
  文件“/home/dotcloud/env/lib/python2.6/site-packages/django/core/management/__
init__.py”，第 459 行，在 execute_manager 中
    实用程序.execute()
  文件“/home/dotcloud/env/lib/python2.6/site-packages/django/core/management/__
init__.py”，第 382 行，在执行中
    self.fetch_command(子命令).run_from_argv(self.argv)
  文件“/home/dotcloud/env/lib/python2.6/site-packages/djcelery/management/base.
py"，第 74 行，在 run_from_argv
    return super(CeleryCommand, self).run_from_argv(argv)
  文件“/home/dotcloud/env/lib/python2.6/site-packages/django/core/management/ba
se.py”，第 196 行，在 run_from_argv
    self.execute(*args, **options.__dict__)
  文件“/home/dotcloud/env/lib/python2.6/site-packages/djcelery/management/base.
py"，第 67 行，在执行中
    super(CeleryCommand, self).execute(*args, **options)
  文件“/home/dotcloud/env/lib/python2.6/site-packages/django/core/management/ba
se.py"，第 232 行，在执行中
    输出 = self.handle(*args, **options)
  文件“/home/dotcloud/env/lib/python2.6/site-packages/djcelery/management/comma
nds/celerycam.py”，第 26 行，在句柄中
    ev.run(*args, **options)
  文件“/home/dotcloud/env/lib/python2.6/site-packages/celery/bin/celeryev.py”，
第 38 行，运行中
    分离=分离）
  文件“/home/dotcloud/env/lib/python2.6/site-packages/celery/bin/celeryev.py”，
第 70 行，在 run_evcam 中
    返回凸轮（）
  文件“/home/dotcloud/env/lib/python2.6/site-packages/celery/events/snapshot.py
"，第 116 行，在 evcam 中
    recv.capture（限制=无）
  文件“/home/dotcloud/env/lib/python2.6/site-packages/celery/events/__init__.py
"，第 204 行，在捕获中
    列表（self.itercapture（限制=限制，超时=超时，唤醒=唤醒））
  文件“/home/dotcloud/env/lib/python2.6/site-packages/celery/events/__init__.py
"，第 193 行，在迭代捕获中
    以 self.consumer(wakeup=wakeup) 作为消费者：
  文件“/usr/lib/python2.6/contextlib.py”，第 16 行，在 __enter__
    返回 self.gen.next()
  文件“/home/dotcloud/env/lib/python2.6/site-packages/celery/events/__init__.py
"，第 185 行，在消费者中
    queues=[self.queue], no_ack=True)
  文件“/home/dotcloud/env/lib/python2.6/site-packages/kombu/messaging.py”，行
 279，在__init__
    self.revive(self.channel)
  文件“/home/dotcloud/env/lib/python2.6/site-packages/kombu/messaging.py”，行
 286，复活
    频道 = 频道.default_channel
  文件“/home/dotcloud/env/lib/python2.6/site-packages/kombu/connection.py”，林
e 581，在 default_channel 中
    自连接
  文件“/home/dotcloud/env/lib/python2.6/site-packages/kombu/connection.py”，林
e 574，在连接
    self._connection = self._建立连接（）
  文件“/home/dotcloud/env/lib/python2.6/site-packages/kombu/connection.py”，林
e 533，在_建立连接
    conn = self.transport.建立连接（）
  文件“/home/dotcloud/env/lib/python2.6/site-packages/kombu/transport/amqplib.p
y"，第 279 行，在建立连接中
    connect_timeout=conninfo.connect_timeout)
  文件“/home/dotcloud/env/lib/python2.6/site-packages/kombu/transport/amqplib.p
y"，第 89 行，在 __init__ 中
    super(Connection, self).__init__(*args, **kwargs)
  文件“/home/dotcloud/env/lib/python2.6/site-packages/amqplib/client_0_8/connec
tion.py”，第 144 行，在 __init__ 中
    (10, 30), # 调
  文件“/home/dotcloud/env/lib/python2.6/site-packages/amqplib/client_0_8/abstra
ct_channel.py”，第 95 行，等待中
    self.channel_id, allowed_methods)
  文件“/home/dotcloud/env/lib/python2.6/site-packages/amqplib/client_0_8/connec
tion.py”，第 202 行，在 _wait_method 中
    self.method_reader.read_method()
  文件“/home/dotcloud/env/lib/python2.6/site-packages/amqplib/client_0_8/method
_framing.py”，第 221 行，在 read_method 中
    提高米
IOError：套接字已关闭

```

我的主管文件：

```
[程序：djcelery]
目录 = /home/dotcloud/current/
命令 = /home/dotcloud/env/bin/python hack/manage.py celeryd -E -l info -c 2
stderr_logfile = /var/log/supervisor/%(program_name)s_error.log
stdout_logfile = /var/log/supervisor/%(program_name)s.log

[程序：celerycam]
目录 = /home/dotcloud/current/
命令 = /home/dotcloud/env/bin/python hack/manage.py celerycam
stderr_logfile = /var/log/supervisor/%(program_name)s_error.log
stdout_logfile = /var/log/supervisor/%(program_name)s.log

```

如前所述，我在另一个运行良好的 dotcloud 帐户下部署了几乎相同的代码。

rabbitmq 代理的状态：

```

$ ./dotcloud info hack.broker
别名：
- hackxxxx.dotcloud.com
配置：
    密码：xxx
    rabbitmq_management：真
    用户：根
created_at: 1338702527.075196
数据中心：Amazon-us-east-1c
image_version：924a079b622a（最新）
内存：49M/512M (9%)
端口：
- 名称：ssh
    网址：ssh://dotcloud@hackxxx.dotcloud.com:29209
- 名称：amqp
    网址：amqp://root:xxxx@hackxxxx.dotcloud.com:29210
- 名称：http
    网址：http://root:xxx@hack1-xxxx.dotcloud.com/
状态：运行
类型：rabbitmq

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:02:19.403

看起来它与您的经纪人有问题。您是否确认可以连接到您的代理，并且它已启动并运行？

你用什么做经纪人？

# actionscript-3 - 获取向量的最有效方法。 从 SQLite 到 AS3

> ID：10880529
> 
> 赞同：2
> 
> 时间：2012-06-04T11:31:39.827
> 
> 标签：actionscript-3, optimization, vector

我有很多顶点坐标存储在 SQLite 数据库中。

我正在使用 Away3D 4，所以我可以通过将这些坐标作为 Vector 传递来直接将它们设置到模型几何中。<int>

现在，我需要进行严重优化，因为它非常耗时 atm。我将整数作为 JSON 存储在 SQLite 中，并在运行时将它们转换为 Vector.<int>。

有更快的方法吗？我可以将 Vector.<int> 存储为 byteArray 吗？还是作为 AS3 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:08:07.357

如果你这样做是在服务器而不是客户端上处理，它会加快速度。使用[AMF](http://en.wikipedia.org/wiki/Action_Message_Format)而不是 JSON 将允许您通过网络发送二进制数据（序列化的 AS3 对象）。有最流行的服务器端语言的 AMF 实现；Java、.NET、PHP、Ruby 和 Python（甚至是 Erlang）。

AMF 反序列化内置于 Flash 播放器中，因此它的运行速度比解析 JSON 字符串快几个数量级。

# openerp - OpenERP 总是显示继承视图而不是原始视图

> ID：10880535
> 
> 赞同：7
> 
> 时间：2012-06-04T11:32:06.533
> 
> 标签：openerp

原观点：

```
<record id='view_1' model='ir.ui.view'>
    <field name="name">view.name</field>
    <field name="model">my.object</field>
    <field name="priority" eval="17"/>
    <field name="type">form</field>
    <field name="arch" type="xml">
        ...
    </field>
</record> 
```

从原始继承的观点：

```
<record id='view_2' model='ir.ui.view'>
    <field name="name">view.name</field>
    <field name="model">my.object</field>
    <field name="priority" eval="10"/>
    <field name="inherit_id" ref="view_1"/>
    <field name="type">form</field>
    <field name="arch" type="xml">
        ...
    </field>
</record> 
```

所以发生的事情是 OpenERP 总是显示继承的视图而忽略了优先级值。这是预期的行为，还是我还缺少其他东西？

如果这是预期的行为，请进一步阅读:-)

我有`my.second.object`字段`many2one`to `my.object`，当我想`my.object`从这个字段创建时，我想打开一个有点不同的表单视图`my.object`。我正试图为此目的创建一个不同的视图，但正如您所见，它并不那么容易工作（或者是这样吗？）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-04T12:31:58.997

是的，这是预期的行为。视图的优先级仅用于在没有请求特定视图时选择要使用的主视图。继承的视图是“补丁视图”，其行为类似于它们所继承的视图的子视图，并且可能永远不会被选为“主视图”。当显示该视图时，它们始终应用在其父视图之上。

如果您想要某个模型的替代视图，您应该定义一个不从任何其他模型继承的新独立视图。如果该视图仅用于 的视图的上下文中`my.second.object`，则有两个常见的技巧可以让 OpenERP 使用它：

*   在 的表单视图中将其内联定义`my.second.object`为元素的子`<field>`元素。这可能不适用于所有 OpenERP 客户端，具体取决于版本，并且`o2m`通常最适合为行声明内联表单视图。
*   将其声明为具有低优先级（例如 32）的独立视图，并将魔术上下文键放在应该使用它`many2one`的视图字段中。`my.second.object`魔术键的形式为`<view_type>_view_ref`，其值必须是所需视图的 XML ID。这应该在任何地方都有效。

```
<!-- Example 1: inline form view -->
<form string="My second object">
   <field name="my_object_id">
       <form string="My object inline view">
           <field name="name"/>
       </form>
   </field>
 </form>

<!-- Example 2: explicitly ask for special view using magic key -->
<form string="My second object">
   <field name="my_object_id" context="{'form_view_ref': 'module.my_object_form2'}"/>
</form> 
```

作为参考，请查看 OpenERP 文档的[这一页](http://doc.openerp.com/v6.0/developer/2_6_views_events/views/specify_view_to_use.html)，其中解释了制作和使用特定于上下文的视图的大多数选项。

> **注意：**如果您使用了 form_view_ref 并且从表单视图中使用了任何按钮，它正在打开其他模型的另一个表单视图，那么它将给您错误。它将尝试打开您在 form_view_ref 中为另一个模型传递的相同表单视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:57:52.193

你定义的“位置”是`<field name="field_from_original_view">`什么？

```
<record id='view_2' model='ir.ui.view'>
    <field name="name">view.name</field>
    <field name="model">my.object</field>
    <field name="priority" eval="10"/>
    <field name="inherit_id" ref="view_1"/>
    <field name="type">form</field>
    <field name="arch" type="xml">
        <field name="field_from_original_view" position="after" (or before)>
            <field name="inherit1" />
            <field name="inherit2" />
            <field name="inherit3" />
        </field>
    </field>
</record> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-18T14:50:22.833

可能无法将继承形式作为模型的标准形式，以便自动呈现。

但是，如果您查看特定任务-> 打开 one2many 字段的继承表单视图，例如；有。将上下文变量“form_view_ref”设置为“MODULE.VIEW_ID”。

```
<field name="myOne2ManyField" context="{'form_view_ref': 'myModule.myInheritedView'}/> 
```

仍然适用于 Odoo 9.0。

# c++ - 向量内存管理

> ID：10880544
> 
> 赞同：3
> 
> 时间：2012-06-04T11:33:06.973
> 
> 标签：c++, vector

从内存管理站点看，对函数中使用的所有临时向量使用一个向量类成员有什么区别：

```
class A
{
   private:
   vector<Type> m_vector;
}

void fnc()
{
   m_vector.clear();
   m_vector.push_back();
   //further operations on vector
} 
```

并在函数内部创建临时向量：

```
void fnc()
{
    vector<Type> vector;
    //further operations on vector
} 
```

我想第一个选项会导致更少的内存碎片，因为我们正在做一个分配并使用这个区域，而在第二种情况下，我们正在为不同函数中的向量分配内存，这会导致内存碎片。

这种向量用法的优缺点是什么？当我的类在其函数中需要许多向量时，我应该使用哪一个？从内存管理网站看哪一个更好看？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T11:40:11.913

由于碎片和更少的分配/释放，从内存管理的角度来看，您的解决方案可能会更好，但是：

*   在多线程环境中，您的线程安全性会降低——您可能需要在每个方法中围绕向量的使用实现一些同步
*   您需要记住在每个方法中清除向量的内容

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T11:34:41.143

简单的规则：
***如果你希望向量存在到你的类对象的生命周期中，让它成为一个类成员，否则不要。***

简而言之，如果它的生命周期与对象的生命周期相关，您应该将其用作成员。
如果没有，您所需要的只是局部向量。
第一种或第二种方法是否更适合您的使用是微优化避免它们，除非您的使用量预计会足够大以至于担心避免使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T11:37:03.787

不要仅仅为了重用而制作成员向量。某个东西是否是成员应该基于类的逻辑。

# neo4j - 如何在 Neo4j Cypher 中提供多个查询？

> ID：10880546
> 
> 赞同：3
> 
> 时间：2012-06-04T11:33:23.953
> 
> 标签：neo4j, cypher

我想在第二个查询中使用第一个查询的结果。我不确定如何在 Cypher 中执行此操作？

当前代码，

```
START user1=node:USER_INDEX(USER_INDEX = "userA") 
MATCH user1-[r1:ACCESSED]->docid1<-[r2:ACCESSED]-user2, user2-[r3:ACCESSED]->docid2 
WHERE r2.Topic=r3.Topic 
RETURN distinct docid2.Label; 
```

我想在 WHERE 子句中为同一组 docid2 节点检查不同的条件，并根据日期字段累积结果并执行 order by。我无法在同一个交易中提供多个匹配和返回。那是当我试图拥有两个不同的密码脚本并将它们组合到第三个查询中时。这在密码中可能吗？或者是否有任何选项可以编写自定义函数并调用它们？我们是否存储了像 Stored Gremlin 脚本这样的 Cypher 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T14:11:48.853

正如迈克尔在评论中提到的，您可以使用“with”语句将结果流式传输到进一步的语句中。不幸的是，您不能在“where”子句之后开始另一个语句。多个返回语句有点不合逻辑，但您可以在单个查询中执行多项操作，例如：

```
START x=node:node_auto_index(key="x")
with count(x) as exists
start y=node:node_auto_index(key="y")
where exists = 0
create (n {key:"y"})<-[:rel]-y
return n, y 
```

这将检查“x”节点是否存在，如果不存在，则继续创建它并添加几个参数。

如果您希望在结果集上做更复杂的事情，您最好的选择是批处理请求或 Java API...

# java - 如何在 Eclipse RCP 中将非插件项目与插件项目一起使用？

> ID：10880552
> 
> 赞同：1
> 
> 时间：2012-06-04T11:34:13.127
> 
> 标签：java, logging, eclipse-plugin, eclipse-rcp

我已经有一个用于自定义日志记录功能的 Java 项目（非插件），该项目在内部使用 log4j。我想将此自定义记录器与 Eclipse 插件项目一起使用，因此我在插件项目的构建路径中指定了记录器项目。当我尝试运行它提供的插件应用程序时，它不会产生任何编译问题`ClassNotFoundException`。

谁能告诉我在插件项目中使用非插件项目的正确方法？任何建议将不胜感激。

感谢和问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T12:24:48.457

Eclipse 是基于 OSGi 的，所有插件都是 OSGi 包。诀窍是，捆绑包通常只能看到其他捆绑包。你有几个选择：

1.  把你的另一个罐子变成一个包。您只需向其中添加一个 OSGi MANIFEST.MF。这是推荐的方式，因为那个 jar 知道它应该做什么和不应该做什么
2.  将该 jar 包含在您的包中，并将其添加到您的 Bundle-ClassPath。您必须注意导出的包和版本级别，因为您不想与另一个包发生冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T12:32:50.697

您可以按照 Paul Webster 的建议将您的 jar 转换为 OSGi 包。你可以看看我对这个问题的回答[How to convert jar to OSGi bundle](https://stackoverflow.com/a/9821072/948268)，有些人觉得这很有用。

# lua - Corona 中的高功率屏幕模式

> ID：10880553
> 
> 赞同：0
> 
> 时间：2012-06-04T11:34:14.060
> 
> 标签：lua, coronasdk

我使用 Corona SDK 在 Lua 中编写了一个游戏。玩了几分钟游戏后，屏幕进入低功耗模式（亮度较低）。如何使屏幕保持在高功率模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:09:22.613

放

```
system.setIdleTimer( false ) 
```

请参阅此处了解更多信息。 [http://developer.anscamobile.com/reference/index/systemsetidletimer](http://developer.anscamobile.com/reference/index/systemsetidletimer)

# arrays - 在matlab中使用wavread的问题

> ID：10880554
> 
> 赞同：1
> 
> 时间：2012-06-04T11:34:14.647
> 
> 标签：arrays, matlab

我有这个：

```
name = ['Anca', 'Bogdan', 'Francois', 'Jerome', 'Simina'];

for i=1:size(name,1)
temp = name(i,:);
tempwav = wavread(temp);
end 
```

我得到这个错误：

```
Error in Load_data (line 7)
tempwav = wavread(temp); 
```

意思是这一行：`tempwav = wavread(temp);`

.wav 文件在那里我只是不知道是什么问题。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:54:25.417

您创建变量的方式`name`将产生 value `AncaBogdanFrancoisJeromeSimina`。相反，您应该使用单元格数组（注意大括号）

```
name = {'Anca', 'Bogdan', 'Francois', 'Jerome', 'Simina'};

for i=1:length(name)
    temp = name{i};
    tempwav = wavread(temp);
end 
```

# process - 系统如何选择正确的页表？

> ID：10880555
> 
> 赞同：8
> 
> 时间：2012-06-04T11:34:18.563
> 
> 标签：process, x86, computer-science, processor, computer-architecture

让我们关注单处理器计算机系统。据我所知，当创建一个进程时，会设置页表，它将虚拟地址映射到物理内存地址空间。每个进程都有自己的页表，存储在内核地址空间中。但是 MMU 如何为进程选择正确的页表，因为不仅有一个进程在运行，而且还会发生许多上下文切换？

任何帮助表示赞赏！

最好的，西蒙

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-05T00:05:27.403

处理器有一个特权寄存器，称为页表基址寄存器 (PTBR)，在 x86 上它是[CR3](http://en.wikipedia.org/wiki/Control_register#CR3 "CR3")。在上下文切换时，操作系统会更改 PTBR 的值，以便处理器现在知道要使用哪个页表。除了 PTBR，许多现代处理器还有地址空间编号 (ASN) 的概念。进程被赋予一个地址空间号（来自一个有限的池），并且这个 ASN 也被设置在上下文切换的寄存器中。此 ASN 用作 TLB 匹配的一部分，并允许来自多个地址空间的 TLB 条目共存。只有当一个 ASN 被重用时，才需要刷新 TLB，然后只对匹配该 ASN 的条目进行刷新。大多数 x86 实现比这更粗粒度，并且有一个全局页面的概念（用于共享库和共享数据）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T11:54:35.917

在这种情况下，MMU 完全不知道进程是什么。跟踪进程的操作系统会为每个进程生成一个页表，正如您所说，当它们被创建时。上下文切换的过程如下：

1.  操作系统告诉 MMU 使用位于物理地址 0xFOO 的页表

2.  操作系统对可编程中断计时器 (PIT) 进行编程，以在 BAR 毫秒后引起硬件中断。

3.  操作系统恢复进程状态（CPU 寄存器、程序计数器等）并跳转到正确的地址。

4.  该过程一直运行，直到 PIT 触发中断。

5.  用于处理 PIT 中断的操作系统例程然后保存程序状态（寄存器等），使用调度算法来确定下一个要运行的进程（在简单的情况下，循环链表），然后从步骤 1 重新开始。

我希望这可以消除您可能存在的任何疑问。简短的回答：MMU 与进程无关，不知道进程是什么。

# c# - 如何从我没有写入的流中获取字节

> ID：10880557
> 
> 赞同：1
> 
> 时间：2012-06-04T11:34:36.503
> 
> 标签：c#, .net, vb.net, stream

我正在编写一个使用 3rd 方 .NET 库的 VB.net 应用程序（但如果你愿意，你可以用 C# 回答，没问题）。特别是，该库中的一种方法将 IO.Stream 作为输入（除其他外）并将其处理结果写入所述流。我的问题是该方法在写入流后关闭流，所以我无法读回它写入的数据！

更具体地说：如果流是 FIeStream ，它当然可以工作，因为它将数据写入磁盘，但是如果我想将数据直接读取到内存怎么办？我尝试使用 MemoryStream，但正如我所说，当方法返回时，流已经关闭，我无法从中读取任何内容:(

编辑：通过执行类似于“usr”建议的操作来解决。这是代码，如果有人需要它：

```
 Imports System.IO

Public Class CloseHijackedMemoryStream
    Inherits MemoryStream

    Public Overrides Sub Close()
        'We don't do anything, so the stream is still open
    End Sub

    Public Sub RealClose()
        MyBase.Close()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:41:16.693

您可以围绕将所有调用转发到底层（包装）流但不转发 Close 和 Dispose 调用的流编写包装类。这将阻止图书馆关闭它。

从 Stream 派生，将“内部流”作为 ctor arg 并通过委托给内部流来实现所有方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:44:02.343

MemoryStream 有一个返回其全部内容的 ToArray() 方法。我刚刚做了一个快速测试，似乎关闭后仍然有效（即使在处理后）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T11:57:44.563

在这种情况下，您可以从 MemoryStream 创建自定义类型“MyMemoryStream”并覆盖 Dispose 和 close 方法。

```
public class MyMemoryStream : MemoryStream
{
    protected override void Dispose(bool disposing)
    {
    }
} 
```

希望能帮助到你。

# php - 在 php 中重构事务处理代码

> ID：10880567
> 
> 赞同：0
> 
> 时间：2012-06-04T11:35:46.067
> 
> 标签：php, codeigniter

我正在使用 php 5.3.3 并使用 codeigniter 开发 MVC webapp。我试图重构的代码基本上是一堆：

```
$this->db->trans_start();
    // do some db updates
    $this->db->update(...);
    $this->db->update(...);
$this->db->trans_complete();

if ( $this->db->trans_status() == FALSE ) {
    $this->handle_db_error();
} 
```

所以我在我的模型类中散布了一些上述代码。我想从模型中重构事务处理部分并保持干燥。

我想我可以像下面这样使用闭包：

```
// in parent CI_Model class 
class MY_Model extends CI_Model {
  public function txn_wrap($closure) {
    $this->db->trans_start();
    $closure();
    $this->db->trans_complete();
    if ( $this->db->trans_status() == FALSE ) {
        $this->handle_db_error();
    }
  }

// in child model class

 class Blog_model extends MY_Model {
   protected $_table = 'app_blog';

   public function get($id) {
     $instance = $this;
     $closure = function() use($instance, $id) { 
        // do some db updates
        $instance->db->update($instance->_table, array('title' => 'bla'), array('id' => $id));
     };
     $this->txn_wrap($closure);
   } 
```

那行不通，给了我`"PHP Fatal error: Using $this when not in object context"`。所以我猜想在 5.3 中不支持使用 $this 用法。

现在无法使用闭包，我还能做什么？

**更新：** 现在我`Undefined property: App_Blog::$_table`知道 App_About 是在 Blog_model 中调用 get() 函数的控制器。我已经尝试过`function() use($instance, , $instance->_table, $id)`，但是 php 抱怨语法..现在这个关闭的东西似乎没有给我带来我想象的那么多好处..

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:47:12.347

闭包不是您的子模型类的方法，因此您无法访问该实例。您需要将其提供给关闭：

```
$instance = $this;
$table = $this->_table;
$update_db_closure = function() use ($instance, $table) {
    // do some db updates
    $instance->db->update($table, ...);
    $instance->db->update($table, ...);
}; 
```

该`$this->_table`属性是`protected`，因此您将无法在闭包内访问它，因此您需要传递它的副本。

# iphone - 在 iOS 中，当视图动画在动画中启动时会发生什么？

> ID：10880569
> 
> 赞同：4
> 
> 时间：2012-06-04T11:35:52.540
> 
> 标签：iphone, ios, uiview, uikit

当一个视图由点击主视图的手势识别器动画时：

```
-(void) doAnimate {
    [UIView animateWithDuration:3 

                     animations:^{
                         self.circleView.center = CGPointMake(100, 300);
                     }

                     completion:^(BOOL finished) {
                         NSLog(@"finished is %i", finished);
                         [UIView animateWithDuration:1 animations:^{
                             self.circleView.center = CGPointMake(250, 300);
                         }];
                     }
     ]; 
} 
```

（有链式动画）。如果它是动画并且再次点击主视图，我实际上看到完成处理程序被调用了两次，第一次是 TRUE，第二次是 FALSE。我以为它只会被调用一次，FALSE？[我在Apple 的文档](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/AnimatingViews/AnimatingViews.html#//apple_ref/doc/uid/TP40009503-CH6-SW1)中找不到它。如果动画在已经动画化时开始，是否有关于它如何工作的规则？（我认为它适用于相同的视图再次被动画化，并且如果 view2 被动画化而 view1 被动画化则不适用？）

* * *

**更新：**以下代码可以显示更多洞察力：

```
-(void) dropAnimate:(UIGestureRecognizer *) g {

    int n = arc4random() % 10000;
    int y = 501 + arc4random() % 200;
    NSLog(@"y is %i", y);
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(100, y, 10, 10)];
    label.text = @"x";
    [self.view addSubview:label];

    [UIView animateWithDuration:3 

                     animations:^{
                         NSLog(@"n is %i", n);
                         self.circleView.center = CGPointMake(100, y);
                     }
                     completion:^(BOOL finished) {
                         NSLog(@"n is %i", n);
                         NSLog(@"finished is %i   y is %i", finished, y);
                         [UIView animateWithDuration:3 animations:^{
                             self.circleView.center = CGPointMake(250, y);
                         }
                          ];

                     }

     ];
    NSLog(@"finished the method call");

} 
```

除了下面@Kai的回答之外，当已经有动画在进行时，似乎对于同一个UIView对象的新动画有一个规则：旧动画将立即完成其效果，并运行新动画，但随后接下来用`completion`调用旧动画`NO`，现在开始第 3 个动画，这导致动画 2 完成效果，但接下来`completion`用 a 调用它的块`NO`，它使动画 3 立即生效......我们看到动画 4 运行 3 秒。

上面的示例代码可以试一试...为了简化它，只需删除`completion`块，然后尝试，它证实了规则说：如果我们在同一个对象上开始一个新动画，旧动画生效立即，并运行新的动画......

并且对于该`completion`块，如果该`completion`块开始另一个动画，它会变得非常复杂......

所以我认为最后的事情是：是否有任何文档或规范指定这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:08:21.290

我认为会发生以下情况：

Your first trigger sets the `center` to `(100,300)` and than animates the view (note that the `center property` changes before you actually see it!). Your second trigger returns immediately (calls `completion` with `YES`), because there is nothing to animate (the property's already been set to the very same value before) and resets the `center` and by that forces the first animation (still running) to stop with NO, because the `circleview` is teared out from it's disired animation by getting a new `center` (note that the 2nd trigger does not disturb the 1st animation before calling `completion`, because the `circleview`'s `center property` is not changed).

# ios - iOS：如何在到达商店附近时通知用户

> ID：10880573
> 
> 赞同：3
> 
> 时间：2012-06-04T11:36:09.147
> 
> 标签：ios, geolocation, core-location

我正在编写一个应用程序，它应该提醒用户到达指定零售店附近（300 米内）。

我正在使用 API

`[locationManager startMonitoringForRegion:grRegion desiredAccuracy:acc];`

但无法获取进入和退出区域的事件。

我的问题是

1.  这个 API 有多准确。如果我们指定 300 米范围，我会准确触发事件吗？还是仅当用户从一个蜂窝塔更改为另一个时才会触发此事件？
2.  如果它无法在 300 米内获得事件，我该如何实现我的要求。

PS：- 我不想使用 API `[locationManager startUpdatingLocation];`，因为它会很快耗尽电池。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T16:20:49.440

您将需要实施`CLLocationManagerDelegate`以拦截 和 的位置`-didEnterRegion`回调`-didExitRegion`。

我已经在我的应用程序中使用这个精确的 API 将近一年了，我发现它非常准确，而且电池消耗最少。我会说这应该是你最好的途径，不会考虑使用`-startUpdatingLocation`，因为它需要更多的代码来实现你需要的东西，更不用说电池了。

实现委托和方法，你应该很高兴。您也可以使用模拟器中的位置更改对其进行测试。在实际使用中测试它们之前，让它们运行良好。

# php - imagecreatefrompng 不工作

> ID：10880576
> 
> 赞同：-2
> 
> 时间：2012-06-04T11:36:21.923
> 
> 标签：php, gd

我正在尝试创建图像的缩略图，但我发现使用下面的代码只能将 JPG 图像转换为缩略图；它不适用于 PNG 和 GIF。我究竟做错了什么？

```
function createThumbs( $pathToImages,$pathToThumbs,$thumbWidth,$fname)
    {
      // open the directory
     // $dir = opendir( $pathToImages );

        // parse path for the extension
        $info = pathinfo($pathToImages);

        // continue only if this is a JPEG image
        //if ( strtolower($info['extension']) == 'jpg' )
        //{
          //echo "Creating thumbnail for {$fname} <br />";

            echo strtolower($info['extension']);
            switch(strtolower($info['extension'])){
                case 'jpg':
                        $img = imagecreatefromjpeg("{$pathToImages}" );
                    break;
                case 'gif':
                        $img = imagecreatefromgif("{$pathToImages}" );
                    break;
                case 'png':
                        $img = imagecreatefrompng("{$pathToImages}" );
                    break;
                default:
                        die("ERROR: FILE TYPE DOES NOT SUPPORT");
                    break;
            }
          // load image and get image size

          $width = imagesx( $img );
          $height = imagesy( $img );

          // calculate thumbnail size
          $new_width = $thumbWidth;
          $new_height = floor( $height * ( $thumbWidth / $width ) );

          // create a new temporary image
          $tmp_img = imagecreatetruecolor( $new_width, $new_height );

          // copy and resize old image into new image
          imagecopyresized( $tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height );

          // save thumbnail into a file
          imagejpeg( $tmp_img, "{$pathToThumbs}{$fname}" );
          chmod("{$pathToThumbs}{$fname}",777);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:17:31.553

您面临的问题是由于这一行：

```
// save thumbnail into a file
imagejpeg( $tmp_img, "{$pathToThumbs}{$fname}" ); 
```

PHP imagejpeg 将图像保存为 Jpeg。

您需要的是利用适当的功能来保存每种文件类型。另外您需要控制输出文件类型扩展名，如果不是*联合图像专家组*文件，`.jpeg`将不会被占用。

## 处理文件扩展名

[PHP image_type_to_extension](http://www.php.net/manual/en/function.image-type-to-extension.php)的注释中有一些很好的例子！

## 处理保存过程

**图像wbmp**

```
// Save the image as a WBMP
imagewbmp( $tmp_img, "{$pathToThumbs}{$fname}" . '.wbmp' ); 
```

[imagewbmp()](http://www.php.net/manual/en/function.imagewbmp.php)输出或保存给定图像的 WBMP 版本。

**图像gif**

```
// Save the image as a GIF
imagegif( $tmp_img, "{$pathToThumbs}{$fname}" . '.gif' ); 
```

[imagegif()](http://www.php.net/manual/en/function.imagegif.php)从图像图像中创建文件名中的 GIF 文件。

**图像png**

```
// Save the image as a PNG
imagepng( $tmp_img, "{$pathToThumbs}{$fname}" . '.png' ); 
```

[imagepng](http://www.php.net/manual/en/function.imagepng.php) — 将 PNG 图像输出到浏览器或文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T10:20:40.717

```
 $new_images = $_FILES["profilepic"]["name"];

        $width = 400; //*** Fix Width & Heigh (Autu caculate) ***//
        $size = GetimageSize($images);
        $height = round($width * $size[1] / $size[0]);

        list($origwidth, $origheight, $origtype, $origattr) = getimagesize($images);
        $origfiletype = image_type_to_extension($origtype, true);
        // $filetype includes the dot.            
        $supported = array('.jpeg', '.png', '.gif');
        //check file type
        if (in_array($origfiletype, $supported)) {
            if ('.jpeg' == $origfiletype) {
                $images_orig = ImageCreateFromJPEG($images);
            } else if ('.png' == $origfiletype) {
                try {
                    $images_orig = ImagecreateFromPNG($images);
                } catch (Exception $e) {
                    echo $e->getMessage();
                    exit;
                }
            } else if ('.gif' == $origfiletype) {
                try {
                    $images_orig = ImagecreateFromGIF($images);
                } catch (Exception $e) {
                    echo $e->getMessage();
                    exit;
                }
            }

            $photoX = ImagesX($images_orig);
            $photoY = ImagesY($images_orig);
            $images_fin = ImageCreateTrueColor($width, $height);
            ImageCopyResampled($images_fin, $images_orig, 0, 0, 0, 0, $width + 1, $height + 1, $photoX, $photoY);
            ImageJPEG($images_fin, dirname(__FILE__) . "/gallery/" . $new_images, $jpeg_quality);
            ImageDestroy($images_orig);
            ImageDestroy($images_fin); 
```

# javascript - Javascript 函数

> ID：10880579
> 
> 赞同：1
> 
> 时间：2012-06-04T11:36:32.813
> 
> 标签：javascript, function, this

我对 Javascript 很陌生，在某处我找到了这段代码

```
 var myObject = {
            value: 0,
            increment: function (inc) {
                this.value += typeof inc === 'number' ? inc : 1;
            }
   }; 
```

在上面的对象中，**增量**函数使用**this访问****value**变量。但是在像java这样的语言中，公共方法也可以在没有这个的情况下访问私有成员..为什么在这里不可能？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:40:19.473

因为**value**试图在全局范围内获取一个名为**value**的变量，而这里你在一个对象中，这是该对象的一个​​属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:39:49.387

因为这是 Javascript，而不是 Java。这两种语言之间没有任何关系或相似之处，尽管 Javascript 的名称中有“Java”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:40:06.607

这是因为你的范围......你可以这样尝试：

```
var myObject = (function(){
    var value = 0,
        increment = function (inc) {
            value += typeof inc === 'number' ? inc : 1;
            return value;
        };
    return {increment:increment}
})();
console.log(myObject.increment());
console.log(myObject.increment());
console.log(myObject.increment()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T11:42:03.403

每个 JS 函数都有一个对范围链的引用，它试图在其中查找变量。这个链条如下：

*   当前函数的局部变量
*   调用它的函数的局部变量
*   (...)
*   全局变量

当前对象（及其字段）不在链中，因此您必须使用`this`.**

# c - 如何使用句柄检索流程描述和公司名称？

> ID：10880587
> 
> 赞同：1
> 
> 时间：2012-06-04T11:36:49.090
> 
> 标签：c, windows, winapi, visual-c++

如何使用句柄检索流程描述和公司名称。我正在使用 Windows API 函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T12:05:44.630

版本（和版权）信息存储在文件版本信息中。您可以使用该[`GetFileVersionInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647003%28v=vs.85%29.aspx)功能获取它们。

*可以通过简单*的调用来检索版本`GetFileVersionInfo`以填充[`VS_FIXEDFILEINFO`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646997%28v=vs.85%29.aspx)结构，但版权信息（在您的情况下为*ProductName*和*CompanyName*）存储在本地化/可本地化的文本字段中。例如看[`VerQueryValue`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647464%28v=vs.85%29.aspx)函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-04T11:41:34.283

根据您需要的信息类型和数量以及您的句柄从哪里获取，可以从[PROCESSENTRY32开始](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684834%28v=vs.85%29.aspx)

# php - proc_open() 的多输入

> ID：10880589
> 
> 赞同：2
> 
> 时间：2012-06-04T11:37:02.197
> 
> 标签：php, stdin, proc-open

我目前正在开发一个在线程序。我正在编写一个 php 脚本，它使用 proc_open()（在 Linux Ubuntu 下）在命令行中执行命令。到目前为止，这是我的代码：

```
<?php
$cmd = "./power";

$descriptorspec = array(
   0 => array("pipe", "r"),
   1 => array("pipe", "w"),
   2 => array("pipe", "w"),
);

$process = proc_open($cmd, $descriptorspec, $pipes);

if (is_resource($process)) {

    fwrite($pipes[0], "4");
    fwrite($pipes[0], "5");
    fclose($pipes[0]);

    while($pdf_content = fgets($pipes[1]))
    {
        echo $pdf_content . "<br>";
    }
    fclose($pipes[1]);

    $return_value = proc_close($process);
}
?> 
```

power 是一个要求输入 2 次的程序（它需要一个底数和一个指数并计算底数 ^ 指数）。它是用汇编写的。但是当我运行这个脚本时，我得到了错误的输出。我的输出是“1”，但我希望输出 4^5。

当我运行一个接受一个输入的程序时，它可以工作（我测试了一个简单的程序，它将输入的值加一）。

我想我错过了关于 fwrite 命令的一些东西。有人可以帮我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:50:31.300

你忘了给管道写一个换行符，所以你的程序会认为它只是`45`作为输入。试试这个：

```
fwrite($pipes[0], "4");
fwrite($pipes[0], "\n");
fwrite($pipes[0], "5");
fclose($pipes[0]); 
```

或更短：

```
fwrite($pipes[0], "4\n5");
fclose($pipes[0]); 
```

# android - webview中的textEmailAddress

> ID：10880597
> 
> 赞同：0
> 
> 时间：2012-06-04T11:37:28.887
> 
> 标签：android, android-webview

我不知道我想要的是否可能。

我有一个带有表单的 webview，这个表单只有一个输入类型 text，这是一封电子邮件，我可以使用 textEmailAddress 属性吗？

```
<form name ="respuesta">    
    <input type="text" name="email" value = ""> 
    <br>
    <input type=submit value="Siguiente" onClick = "compruebaEmail(document.respuesta.email.value)">

</form> 
```

我想将此属性添加到“电子邮件”字段。

先感谢您。

# java - deployjava.getJREs 不适用于 Windows 7 64 位 jre

> ID：10880603
> 
> 赞同：1
> 
> 时间：2012-06-04T11:38:06.720
> 
> 标签：java, javascript, windows-7, internet-explorer-9, deployjava

我正在尝试在 windows7 中获取 jre 版本，我已经安装了 64 位 jre，但是当我使用 deployjava.js getJres 方法时，它给了我安装的 jre 的空白列表，它对我来说适用于 32 位 windows。

请帮帮我。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:25:03.903

我想我遇到了同样的问题并发现：

JRE 64 位不适用于 IE 32 位。反之亦然：JRE 32 位不适用于 IE 64 位。

如果要在 32 位模式下使用 IE（这是默认设置），请安装 JRE 32 位。

# mysql - 具有嵌套查询、分组依据和计数的 SQL 查询

> ID：10880604
> 
> 赞同：0
> 
> 时间：2012-06-04T11:38:12.227
> 
> 标签：mysql, sql

> 表：日期、用户、订单类型。

order_type 是 4 个值的枚举：音乐、书籍、电影、艺术。

我需要一个查询来返回按用户分组的每个订单类型的总订单数和计数：

```
user, total, music, movies, books, art
--------------------------------------
Adam, 10, 5, 2, 3, 0
Smith, 33, 10, 3, 15,2
mary, 12,6,1,3,2
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T11:54:35.400

```
SELECT   user,
         COUNT(*)                 AS total,
         SUM(order_type='music')  AS music,
         SUM(order_type='movies') AS movies,
         SUM(order_type='books')  AS books,
         SUM(order_type='art')    AS art
FROM     my_table
GROUP BY user 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:56:50.837

```
select user, count(*) as total, 
    sum(case when order_type = 'music' then 1 else 0) end as music,
    sum(case when order_type = 'movies' then 1 else 0) end as movies,
    sum(case when order_type = 'books' then 1 else 0) end as books,
    sum(case when order_type = 'art' then 1 else 0) end as art
from t
group by user 
```

# java - Java 两个列表使用迭代器从一个中删除元素？

> ID：10880606
> 
> 赞同：1
> 
> 时间：2012-06-04T11:38:20.190
> 
> 标签：java

我有两个列表`,List<String> and List<Item>.`

```
public class Item {
    private String name;
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
} 
```

**我的代码::**

```
public class Twolist {

    List<Item> list1 = new ArrayList<>();
    List<String> list2 = new ArrayList<>();

    public Twolist() {

        Item item = new Item();
        item.setName("itemname1");
        list1.add(item);

        item = new Item();
        item.setName("itemname2");
        list1.add(item);

        item = new Item();
        item.setName("itemname3");
        list1.add(item);

        item = new Item();
        item.setName("itemname4");
        list1.add(item);

        item = new Item();
        item.setName("itemname5");
        list1.add(item);

        item = new Item();
        item.setName("itemname6");
        list1.add(item);

        item = new Item();
        item.setName("itemname7");
        list1.add(item);

        item = new Item();
        item.setName("itemname8");
        list1.add(item);

        // list 2 start here

        list2.add("itemname2");
        list2.add("itemname4");
        list2.add("itemname6");
        list2.add("itemname8");

        Iterator<Item> it1 = list1.iterator();

        while (it1.hasNext()) {
            Item item2 = (Item) it1.next();
            System.out.println(item2.getName());

            for (int i = 0; i < list2.size(); i++) {
                String str = list2.get(i);

                if (item2.equals(str)) {

                } else {
                    it1.remove();
                }
            }

        }

        System.out.println(list1.size());
    }

    public static void main(String[] args) {

        new Twolist();
    } 
```

**错误：：**

```
itemname1
Exception in thread "main" java.lang.IllegalStateException
    at java.util.ArrayList$Itr.remove(ArrayList.java:804)
    at com.samir.CollectionP.Twolist.<init>(Twolist.java:67)
    at com.samir.CollectionP.Twolist.main(Twolist.java:78) 
```

如果 name in `List<Item>`is equals`List<String>`相同，则从 中删除元素`List<Item>`。我怎样才能从中删除元素`List<Item>`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T12:10:19.700

好吧，你有多个问题，所以这里有一个可能的解决方案（如果你想从 list1 中删除 list2 的元素）：

```
for (int i = 0; i < list1.size(); i++) {
  String s1 = list1.get(i).getName();
  System.out.println(s1);
  for (int j = 0; j < list2.size(); j++) {
    String s2 = list2.get(j);
    if(s1.equals(s2)){
      list1.remove(i);
      i--;
      break;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T12:39:10.950

如果您需要删除 2 个列表中不常见的数据，请尝试：

```
for (int i = 0; i < list1.size(); i++) {
  String s1 = list1.get(i).getName();
  System.out.println(s1);
  boolean found = false;
  for (int j = 0; j < list2.size(); j++) {
    String s2 = list2.get(j);
    if(s1.equals(s2)){
      found = true;
      break;
    }
  }
  if(!found){
    list1.remove(i);
    i--;
  }
} 
```

您需要使用`boolean found`以不删除所有元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T11:47:36.980

在您的内部`for`循环中，您`it1.remove();`（最终）多次调用，以便`it1.next()`在`while`循环开始时进行一次调用。

您不能`it1.remove();`多次调用单个`it1.next()`

[用于解释详细信息](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#remove%28%29)的[javadocs`Iterator.remove()`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#remove%28%29)

```
class Item { String name; }

class SOF {

    static List<Item> list1 = new ArrayList();
    static List<String> list2 = new ArrayList();

    static {
        Iterator<Item> i = list1.iterator();
        while (i.hasNext()) {
            if (!exists(i.next().name)) {
                i.remove();
            }
        }
    }

    static boolean exists(String s) {
        for (String s2: list2) {
            if (s2.equals(s2))
                return true;
        }
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T13:50:29.507

提供的解决方案将起作用，但是：

我认为 a`HashMap<String, Item> list1`将是一个更好的数据类型。它比`List`.

# java - 增量/流式 XSLT 转换？

> ID：10880608
> 
> 赞同：3
> 
> 时间：2012-06-04T11:38:23.543
> 
> 标签：java, xml, xslt, xalan

我通常使用 JDK (JDK 7) 中的 XSLT 支持来进行 XSLT 转换。最近我遇到了一个相当大的 XML 文档，并且对它应用 XSLT 转换（即使是非常基本的转换）会导致使用大量内存。

我一直小心翼翼地进行所有处理流式处理，但似乎 JDK 中的 XSLT 引擎（似乎是经过修改的 Xalan）总是首先在内存中构建 DOM。显然这不是我想要的。

现在我发现单独提供的 Xalan（2007 年的 2.7.1！）确实有一个用于进行增量转换的 API。因此，虽然这似乎确实有效，但我实际上希望我的代码在股票 JDK 上运行，而不告诉用户摆弄任何认可的文件夹。

在 Java 中进行增量 XSLT 转换以使我的代码与未修改/库存 JDK 安装兼容的最佳方法是什么？

更新：这个最近更新的问题密切相关：[什么是最高效的基于 Java 的流式 XSLT 处理器？](https://stackoverflow.com/questions/460895/what-is-the-most-efficient-java-based-streaming-xslt-processor)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:07:17.073

**你试过[`saxon:stream()`](http://www.saxonica.com/documentation/#!functions/saxon/stream)撒克逊的扩展**吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T17:14:22.300

首先，我强烈建议使用 Xalan 和 Xerces 的 Apache 版本，而不是捆绑在 JDK 中的版本，因为它们有很多错误。对于 Xerces 来说尤其如此。

其次，如果您使用的是 Java，那么您真的应该转向 XSLT 2.0，它可以极大地提高开发效率。在实践中，这意味着撒克逊（撒克逊家庭版是免费的）。

Xalan 中的增量转换实际上并没有阻止它将整个源文档构建为内存中的树。它所做的只是允许树与转换过程并行构建。如果您想要进行流式转换，Saxon-EE 是您唯一实用的选择。（请注意，saxon:stream() 扩展只是 Saxon 提供的流媒体功能的一小部分）。

# scala - Scala 动态存储库

> ID：10880611
> 
> 赞同：1
> 
> 时间：2012-06-04T11:38:28.630
> 
> 标签：scala

我对斯卡拉很陌生。我试图创建一种动态存储库。如何读取简单案例类的属性？

```
trait Repository[T <:MetaEntity] {

    persist(entity:T) : Boolean {
        // TO BE IMPLEMENTED

        // Pseudo code:
        for (attribute <- getAttributes()) {
           // Flatten properies to one string...
           // Primitives can be converted with attribute.value.toString ?
           // Type: attribute.type ?
           // Object references should be coverted to object.id.toString ?
        } 
    }   

}

abstarct class MetaEntity {}

case class SimpleEntity(id: Int, name: String, version: Int) extends MetaEntity {
}

case class ComplexEntity(id: Int, name: String, simpleChild: SimpleEntity) extends MetaEntity{}

object ComplexEntityRepository extends Repository[ComplexEntity] {}
object SimpleEntityRepository extends Repository[SimpleEntity] {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:10:47.313

scala 中的案例类扩展了 Product（请参见[此处](http://dcsobral.blogspot.de/2009/06/case-classes-and-product.html)）。也许以下代码会对您有所帮助（REPL 会话）：

```
scala> trait MetaEntity extends Product
defined trait MetaEntity

scala> case class Test(i: Int, j: Int) extends MetaEntity
defined class Test

scala> def test[T <: MetaEntity](t: T) = {
     |   for (elem <- t.productIterator)
     |     println(elem.getClass.getName + " " + elem)
     | }
test: [T <: MetaEntity](t: T)Unit

scala> test(Test(1,2))

java.lang.Integer 1
java.lang.Integer 2 
```

要读取“内部”产品的属性，您可以进行类型检查（例如 iter.next.isInstanceOf[Product]）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T12:39:53.377

为什么不将实体表示为地图？然后，您可以轻松地将键作为属性进行迭代，并做 Scala 映射可以做的所有其他花哨的事情。

如果你想隐藏表示，那么你应该使用组合，即将地图存储为私有字段。

这样的事情可以让你开始：

```
class Entity {
  private[this] val map = collection.mutable.Map[String, Any]()
  def name = map("name").asInstanceOf[String]
  def attributes = map.keys
  ...
} 
```

# jquery - 添加新动态内容后将 jscrollpane 拖动器移动到新位置

> ID：10880617
> 
> 赞同：1
> 
> 时间：2012-06-04T11:38:42.250
> 
> 标签：jquery, jscrollpane

我在我的项目中使用 jscrollPane，当我通过 ajax 添加动态内容时，滚动工作正常但拖动器没有移动到新位置，我希望拖动器移动到新添加的内容。我有新添加内容的 id。我尝试过使用维护位置和stickToBottom，但它不起作用。我保留了 autoReinitialise 并使用了 scroll_to。请问有人有解决办法吗？

# java - 需要关于是否保留此代码的建议

> ID：10880619
> 
> 赞同：2
> 
> 时间：2012-06-04T11:38:44.637
> 
> 标签：java, jsp, jakarta-ee, pagination, jstl

我继承了一个代码库，该代码库主要包含 JSP 脚本，这些脚本很快变得难以阅读，例如，这是执行分页链接的片段：

```
Visa:
<a class="link" href="javascript:doSubmit('MenyNavigation', 'REW_<%= thisPage %>')" > 
   <%
     if(headPointer - nrOfHitsOnPage > 0){
         out.print(" << ");
         if(tailPointer - nrOfHitsOnPage <= 0 ){
             out.print(1);
         } else {
             out.print(tailPointer - nrOfHitsOnPage);
         }
         out.print("-");
         out.print(tailPointer);
      } %>
</a>
&nbsp;
<% if(resultListSize > 0 ) { %>
   <%=(tailPointer + 1)%> - <%= headPointer %>
<%}%>
&nbsp;
<a class="link" href="javascript:doSubmit('MenyNavigation', 'FWD_<%= thisPage %>')" > 
   <%   
     if(headPointer < resultListSize){
         out.print(1 + headPointer);
         out.print("-");                 
         if(headPointer + nrOfHitsOnPage > resultListSize){
             out.print(resultListSize);
         } else {
             out.print(nrOfHitsOnPage + headPointer);
         }
         out.print(" >> ");
      } %>
</a> 
```

显然，当每页有 10 个元素且总共有 20 个元素时，此代码显示文本“Display 1-10 of 20”，对于其他设置也是如此，但我认为此解决方案不是很可重用。代码已经在我们项目的一个地方使用过，我们决定如果我们有一个问题的解决方案，如果它们出现在不同的地方，我们将对相同的问题使用相同的解决方案，现在我必须为 > 5 个弹出窗口进行分页（！）具有搜索功能，我想知道是否使用此代码来制作模拟解决方案或从头开始构建。

控制器 Java 类也没有那么高的内聚性：

```
public class MenyNavigationActionHandler extends PandoraActionHandler {

    private ArendeProcessSessionData sessionData;
    private final static Logger logger = Logger
            .getLogger(MenyNavigationActionHandler.class);

    protected IFormData getFormData() {
        return null;
    }

    protected IFormPattern getPattern() {
        return EmptyFormPattern.getInstance();

    }

    protected void performAction(ISessionHandler sessionHandler, Action action) {

        String returnPage = null;       

        try {

            sessionData = (ArendeProcessSessionData) sessionHandler.getSessionData();

            if(sessionData.returnToUnsavedData(sessionHandler, action)){
                return;
            }

            if (sessionData.getMenuManager() == null) {

                MenuManager menuManager = new MenuManager();
                sessionData.setMenuManager(menuManager);
            }

            // Om man bläddar i träfflista på formell kontrollista
            if (action.getActionCommand().endsWith(ArendeProcessLocator.getFormellKontrollLista())) {

                FormellKontrollInfo fInfo = sessionData.getFormellKontrollInfo();
                FormellKontrollSearchAdmin fSearch = fInfo.getFormellKontrollSearchAdmin();

                if(fInfo != null) {

                    if (action.getActionCommand().startsWith("FWD")) {

                        fSearch.setDirection(PandoraConstants.FWD_DIRECTION);

                    } else if (action.getActionCommand().startsWith("REW")) {
                        fSearch.setDirection(PandoraConstants.REW_DIRECTION);

                    } else {
                        fSearch.setDirection(PandoraConstants.NO_DIRECTION);
                    }
                }

                returnPage = ArendeProcessLocator.getFormellKontrollLista();
                action.setReturnPage(returnPage);

            } else if (action.getActionCommand().equalsIgnoreCase(
                    ArendeProcessLabelConstants.SUB_MENU_VISA_REGISTRERADE)) {

                sessionData.setNyinkomnaLista(null);

                MenuManager menuManager = sessionData.getMenuManager();
                returnPage = menuManager.getLatestDestination(action.getActionTarget());

                if (returnPage == null) {

                    returnPage = action.getCurrPage();
                }

                action.setReturnPage(returnPage);

            } else {
                // Standard hantering av menyval. Target från Navigation-objekt hämtas från action.getActionModifier
                MenuManager menuManager = sessionData.getMenuManager();
                if(action.getActionTarget() != null && !action.getActionTarget().trim().equals("")){
                    returnPage = menuManager.getLatestDestination(action.getActionTarget());
                }else{
                    returnPage = menuManager.getLatestDestination(sessionData.getLatestActionTarget());
                }
                if (returnPage == null) {
                    returnPage = action.getCurrPage();
                }
                action.setReturnPage(returnPage);
            }

            if(action.getCurrPage().endsWith(ArendeProcessLocator.getNyregistrering())){
                   // Nytt önskemål, Kom ihåg innehållet på registrera sidan när vi går till listan  2010-12-02
                   sessionData.getNyregistrering().setKundReferens(sessionHandler.getRequestParameter(PandoraFieldConstants.FIELD_KUNDREFERENS));
                   sessionData.getNyregistrering().setSokEfternamn(sessionHandler.getRequestParameter(PandoraFieldConstants.FIELD_SOKEFTERNAMN));
                   sessionData.getNyregistrering().setSokFornamn(sessionHandler.getRequestParameter(PandoraFieldConstants.FIELD_SOKFORNAMN));
                   sessionData.getNyregistrering().setForetag(sessionHandler.getRequestParameter(PandoraFieldConstants.FIELD_FORETAG));
                   sessionData.getNyregistrering().setSokandeLandKod(sessionHandler.getRequestParameter(PandoraFieldConstants.FIELD_SELECT_SOKANDELAND));
                   sessionData.getNyregistrering().setAnkomstDatum(sessionHandler.getRequestParameter(PandoraFieldConstants.FIELD_ANKOMSTDAG));
                   sessionData.getNyregistrering().setOriginal("original".equals(sessionHandler.getRequestParameter(PandoraFieldConstants.FIELD_HANDLINGSFORM))? true : false);
                   sessionData.getNyregistrering().setArendeNummer(sessionHandler.getRequestParameter(PandoraFieldConstants.FIELD_ARENDENUMMER));
                             //printer ??
             }

            if(!action.getCurrPage().endsWith(ArendeProcessLocator.getNyinkomnaLista2()) && action.getReturnPage().endsWith((ArendeProcessLocator.getNyregistrering()))){
                   // Rensa minnet av registrera sidan om det inte är listan med registrerade man kommer ifrån
                   sessionData.getNyregistrering().setKundReferens("");
                   sessionData.getNyregistrering().setSokEfternamn("");
                   sessionData.getNyregistrering().setSokFornamn("");
                   sessionData.getNyregistrering().setForetag("");
                   sessionData.getNyregistrering().setSokandeLandKod("");
                   sessionData.getNyregistrering().setAnkomstDatum("");
                   sessionData.getNyregistrering().setOriginal(true);
                   sessionData.getNyregistrering().setArendeNummer("");
             }

             if(action.getActionCommand().equals(ArendeProcessLocator.getNyinkomnaLista())){
                   sessionData.setNyinkomnaLista(null);
              }

        } catch (Exception e) {

            logger.error("MenyNavigationActionHandler: performAction() ", e);
        }

    }

} 
```

我可以与编写代码的同事联系，并可以请他指导我应该拥有哪些文件，以便分页可以正常工作，但我想要一个干净且精简的解决方案，没有文字，从头开始需要做很多工作而不是使用脚本。

你觉得我应该怎么做？只需使用上面的脚本，使它们适用于我的用例，然后尽可能重构为 JSTL 标记和 EL？任何其他评论如何重用 Java / JSP 代码进行分页？我们的框架是相当特殊和定制的，我们没有使用 struts 或 spring 或 jsf，而是我们自己的框架，因为它非常依赖会话数据，所以有点复杂。

任何答案或评论表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:04:45.990

我认为这取决于这段代码有多少，以及你是否有时间花在使它更易于维护上。我认为除了你（和你的老板）之外没有人能回答这个问题。

关于如何实现这种东西的问题，你可以选择标准的 JSTL 标签库或者自己实现，或者组合。如果将 taglibs 与 EL 结合使用，您可以做得更多。会话属性不应该是一个特别的问题。

不过有一点建议。JSTL 和 JSP EL 的表现力越来越强，因此升级到实现最新版 Servlet 规范的 servlet 容器可能是值得的。

# jquery - 无法使用 JQuery 中的 Parent 方法正确定位父 Id

> ID：10880632
> 
> 赞同：0
> 
> 时间：2012-06-04T11:39:28.497
> 
> 标签：jquery

我在 div 中嵌入了一个 GridView 控件，如下所示

```
<div id="parentDiv">
        Hello how r u
        <p>
            <asp:GridView ID="grdView" runat="server">
            </asp:GridView>
        </p>
    </div> 
```

我想要实现的是，找到网格的父元素（即“parentDiv”）并将背景颜色设置为绿色。我的代码（不起作用）

```
$(document).ready(function() {
    var parentElement = $('#grdView').parent("div");
    parentElement.css("background-color", "#ffaaaa");
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:41:40.900

相对于GridView，你最好使用[`closest()`](http://api.jquery.com/closest/)方法：

```
var parentElement = $("#grdView").closest("#parentDiv");  // or $("#parentDiv") 
```

由于 GridView 的父节点是元素，它将得到相应的`div`优于。`parent()``p`

* * *

**更新。**为了只为文本设置背景，您必须将其放在个人`span`或`div`标签中：

```
<div id="parentDiv">
    <span>Hello how r u</span>
    <p>
        <asp:GridView ID="grdView" runat="server">
        </asp:GridView>
    </p>
</div> 
```

然后使用以下 JavaScript 代码：

```
var parentElement = $("#grdView").closest("#parentDiv").children("span");
         // or just $("#parentDiv").children("span"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:40:42.000

因为`grdView`' 的父母是一个`p`元素，也许你应该改变

```
 var parentElement = $('#grdView').closest("div"); 
```

进一步参考：[http ://api.jquery.com/closest/](http://api.jquery.com/closest/)

在这里也使用驼峰命名法：

```
 .css("backgroundColor", "#ffaaaa"); 
```

如果您只需要为直接的文本节点提供绿色背景，只需覆盖`p`元素上的背景颜色

```
$('#parentDiv > p').css("backgroundColor", "<other color here>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:55:58.443

**我的代码（不起作用） -**因为 id 不是 gridview 如果你`runat="server"`在源代码中看到 id，我认为它将是 ContentPlaceHolder1_grdView 或类似的东西

```
$(document).ready(function () {           

            var parentElement = $('#grdView').parent("div");
            parentElement.css("background-color", "#ffaaaa");

        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T12:00:54.160

为了在不影响网格的情况下赋予包含元素着色的错觉，您需要将网格着色为与背景相同的颜色。

```
$("#grdView").css("backgroundColor",$("body").css("backgroundColor"));
$("#grdView").closest("div").css("backgroundColor","#ffaaaa"); 
```

# architecture - socket.io 广播功能 & Redis pub/sub 架构

> ID：10880636
> 
> 赞同：8
> 
> 时间：2012-06-04T11:39:34.987
> 
> 标签：architecture, redis, socket.io

如果有人能帮助我解决一个小问题，我将不胜感激。

使用 socket.io 广播功能和在 Redis 上使用 pub/sub 设计架构有什么区别？

例如，在另一个示例中，node.js 服务器正在侦听（socket.io）CRUD 请求（创建）“键”（模型“todo”）和值“数据”。接收到它的那一刻，它再次向同一个用户发射，并向在同一个“频道”上收听的所有用户广播。

```
socket.on('todo:create', function (data, callback) {
    var id = guid.gen()
      , todo = db.set('/todo/' + id, data)
      , json = todo._attributes;

    socket.emit('todos:create', json);
    socket.broadcast.emit('todos:create', json);
    callback(null, json);
}); 
```

但是还有另一种使用socket.io“广播”某些东西的方法，并且使用带有Redis的发布/订阅平台来实现键：值功能。例如，在进一步的情况下，我们正在侦听基于“键”（模型）、函数（创建）和值（数据）的 CRUD 请求。但在这种情况下，一旦收到，就不会通过“socket.broadcast.emit()”发送，而是在 Redis 上发布：

```
socket.on(key + ':create', function (data, callback) {
  var t = new ModelClass(data)
    , name = '/' + key + ':create';
  t.save(function (err) {
    pub.publish(key, JSON.stringify({key: name, data: t}));
  });
}); 
```

因此，在服务器端，对模型所做的每个更改（并发布到 Redis）都将被赶上（处理程序），并发送到用户客户端（在我的情况下，backbone.js），它将根据到键：收到的值：

```
sio.on('connection', function (socket) {

   sub.on('message', function (channel, message) {
      var msg = JSON.parse(message);
      if (msg && msg.key) {
          socket.emit(msg.key, msg.data);
      }
}); 
```

所以我的问题很简单:-)：两种架构有什么区别？哪一个更具可扩展性？更好的设计？模式推进？

**在我看来，pub/sub 架构适用于自然不支持“实时”的平台，例如 Ruby，与原生支持它的 Node.js 不同。**. 我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:35:54.693

Socket.io 的广播方法将广播到所有连接到当前 Node.js 服务器的套接字，但是如果您的应用程序变得流行并且您需要多个服务器来托管所有 socket.io 连接怎么办？使用 Redis 的 Pub/Sub，您的消息可以一次分发到多个服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:21:36.387

你可能想看看 Socket.io 中的 RedisStore。您可以将 socket.io 设置为使用 RedisStore，而不是使用 MemoryStore。这样您就可以扩展您的应用程序。

[http://www.ranu.com.ar/2011/11/redisstore-and-rooms-with-socketio.html](http://www.ranu.com.ar/2011/11/redisstore-and-rooms-with-socketio.html)

正如这里（[https://stackoverflow.com/a/9275798/327004](https://stackoverflow.com/a/9275798/327004)）所提到的，将 Socket.io 与 RedisStore 一起使用可能会导致会话出现一些问题，因为会话不会在工作人员之间共享。

# javascript - 使用 javascript 在浏览器中解析 grep 的结果

> ID：10880640
> 
> 赞同：1
> 
> 时间：2012-06-04T11:39:51.563
> 
> 标签：javascript, linux, browser, grep

我想在浏览器中解析 grep 命令的结果。类似`grep -nriI "hello" myFolder` 结果是一个多行字符串：

```
/home/user/folder/file1:1:你好世界
/home/user/folder/file2:1:world 你好
/home/user/folder/folder/file3:1:bonjour=hello

```

首先，我将行拆分为一个数组。并用这个正则表达式解析它：`/^(.*?)\:(\d*)\:(.*?)$/`

我有一些问题。

1.  Parse 不适用于带有双点 (:) 等有趣字符的结果
2.  当我 grep 文件时，我没有得到`pah:line number:content`，但`line number:content`它使正则表达式更加复杂（javascript 正则表达式中没有命名组）。

有人已经是一个很好的解析器或解析它的项目。它必须在浏览器中工作......

我会做一个jsfiddle。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:50:52.330

我的 grep（在 Ubuntu Linux 上）有一些可以提供帮助的选项，尽管它们都不是 POSIX 标准。

对于模棱两可的输出：

```
 -Z, --null
          Output  a  zero  byte  (the ASCII NUL character) instead of the character
          that normally follows a file name.  For example, grep -lZ outputs a  zero
          byte  after  each  file  name  instead of the usual newline.  This option
          makes the  output  unambiguous,  even  in  the  presence  of  file  names
          containing  unusual  characters  like  newlines.  This option can be used
          with commands like find -print0, perl  -0,  sort  -z,  and  xargs  -0  to
          process arbitrary file names, even those that contain newline characters. 
```

对于丢失的文件名：

```
 -H, --with-filename
          Print the file name for each match.  This is the default  when  there  is
          more than one file to search. 
```

因此，使用`grep -nriIHZ`并将您的正则表达式更新为这样的内容（未经测试）：

```
/^(.*)\0(\d+):(.*)$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:50:52.003

代码：

```
var regex = /^([^:]*):([^:]*):([^:]*)$/;
var lines = [
    '/home/user/folder/file1:1:hello world',
    '/home/user/folder/file2:1:world hello',
    '/home/user/folder/folder/file3:1:bonjour=hello'
];
var output = $('#output');

for(var i in lines)
{
    var result = lines[i].match(regex).slice(1);

    output.append(result.join(' - ') + "\n");
} 
```

结果：

```
/home/user/folder/file1 - 1 - 你好世界
/home/user/folder/file2 - 1 - 世界你好
/home/user/folder/folder/file3 - 1 - bonjour=hello

```

对我来说效果很好，这可能意味着我不明白你的问题。希望这无论如何都会有所帮助。JSFiddle：http: [//jsfiddle.net/CVLk8/](http://jsfiddle.net/CVLk8/)

上面的`slice(1)`正则匹配之后就是去掉数组中的第一个结果，也就是全匹配。

# c# - C#中按顺序执行线程

> ID：10880650
> 
> 赞同：0
> 
> 时间：2012-06-04T11:40:35.077
> 
> 标签：c#

我有一个用于 winform 应用程序的 C# 程序。它旨在作为一种记忆游戏。首先，我必须显示一个包含多个值的矩阵。说 3 或 4。我必须暂停矩阵一段时间，以便用户将其保存在他的记忆中。为此，我使用 thread1。然后我需要清空矩阵并在表格的右侧面板上显示一些选项。它是使用 Thread2 完成的。现在的问题实际上是先执行thread2。谁能帮帮我。我是 C# 新手...

```
Thread Thread1 = new Thread(new ParameterizedThreadStart(invokedisplaymatrix));
Thread1.IsBackground = true;
Thread1.Start(MatrixInfoValues);

            Thread Thread2 = new Thread(new ThreadStart(invokedisplayblankmatrix));
            Thread2.IsBackground = true;
            Thread2.Start();
}

 private void invokedisplaymatrix(object indx)
            {
    Invoke(new displaymatrixdelegate(displaymatrix),new object[] {indx});

Thread.sleep(5000);
              }

private void invokedisplayblankmatrix()
        {
Invoke(new displayblankmatrixdelegate(displayblankmatrix));
         }...

.. public delegate void displaymatrixdelegate(int[] ind1);
    public delegate void displayblankmatrixdelegate();
}//end of main form 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T11:43:39.600

创建 Thread2 并在 invokedisplaymatrix 结束时启动它。

但是，如果不存在任何并发性，我不确定您为什么要使用线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T11:43:18.760

您可能想看看[TPL](http://www.google.bg/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CF8QFjAA&url=http://msdn.microsoft.com/en-us/library/dd460717.aspx&ei=_Z7MT9aVA8TYsga7p_jOBg&usg=AFQjCNGjTfP3C9wE1gKSbCEzZlCOZrAYkA)。任务开箱即用地支持您的方案（通过[ContinueWith](http://www.google.bg/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CFAQFjAA&url=http://msdn.microsoft.com/en-us/library/dd270696.aspx&ei=K5_MT7juMY_MswaRoezxBg&usg=AFQjCNEHjfMATuQYkoaiiJHKefY6ARkO6w)方法）。

我不确定为什么在这里需要 2 个线程 - 线程在进行并行工作时很适合使用，这看起来不像这里的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T12:27:59.783

您应该使用 AutoResetEvent 来实现它。

所以...

```
var sync = new AutoResetEvent();

var thread1 = new Thread(new ParameterizedThreadStart(invokedisplaymatrix));
thread1.IsBackground = true;
thread1.Start(MatrixInfoValues);

thread Thread2 = new Thread(new ThreadStart(invokedisplayblankmatrix));
thread2.IsBackground = true;
thread2.Start();

private void invokedisplaymatrix(object indx)
{
  Invoke(new displaymatrixdelegate(displaymatrix),new object[] {indx});
  Thread.sleep(5000);
  sync.Set();
}

private void invokedisplayblankmatrix()
{
  sync.Wait();
  Invoke(new displayblankmatrixdelegate(displayblankmatrix));
} 
```

但是您不需要单独的线程来实现这种情况，这是简单的单线程任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-19T09:40:50.000

看看 System.Threading.Semaphore：

在此示例中，我们需要先运行“work2”委托：

```
static void Main(string[] args)
{
   var sem = new Semaphore(0, 1);

    Action<object> work1 = o =>
    {
        sem.WaitOne();
        Console.WriteLine("enter " + o);
        Thread.Sleep(2000);
        Console.WriteLine("exit " + o);
    };

    Action<object> work2 = o =>
    {
        Console.WriteLine("enter " + o);
        Thread.Sleep(2000);
        Console.WriteLine("exit " + o);
        sem.Release();
    };

    work1.BeginInvoke("first", ar => { }, null);
    work2.BeginInvoke("second", ar => { }, null);       

    Console.ReadKey();
} 
```

# database - 是否推荐在 servlet 的 init() 和 destroy() 中使用 get/close DB 连接？

> ID：10880657
> 
> 赞同：0
> 
> 时间：2012-06-04T11:41:22.143
> 
> 标签：database, performance, tomcat, servlets

在阅读了一些 servlet 架构、tomcat 机制和数据库池之后，我想知道我是否真的应该在我的 servlet 的 init 中打开一个连接（并在销毁时关闭）？我的目标是实现高性能，所以我想我应该使用连接池。一开始我使用tomcat的内置数据库池机制。

上下文.xml

```
<Context>
    <Resource name="jdbc/mytest" auth="Container" type="javax.sql.DataSource"
    maxActive="100" maxIdle="30" maxWait="10000"
    username="userxy" password="xy" driverClassName="com.mysql.jdbc.Driver"
    url="jdbc:mysql://localhost:3306/mytest"/>
</Context> 
```

网页xml：

```
<resource-ref>
    <description>MyTest</description>
    <res-ref-name>jdbc/mytest</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

我很确定我可以用 s.th 轻松替换它。如有必要。所以我的问题是：我是否应该使用名为 doGet() 的每个请求而不是 serlet 的 init()/destroy() 并信任池机制？什么，如果我两个都用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:28:06.133

如果你在 Init 中打开一个连接并在 Destroy 中关闭它，你几乎肯定会遇到问题。

Servlet 是多线程的。您只有一个处理多个线程的 servlet 实例。

例如，假设您插入一条记录，然后检索 last_insert_id()。如果您只运行一个线程，它将正常工作。如果您有两个或更多线程正在运行，那么您的一些线程将获得错误的引用。

到目前为止，最好的方法是根据请求从池中获取连接，并在完成后在 finally 块中释放它。

# php - Moodle将数据从ASSOC ARRAY而不是数据对象保存到数据库

> ID：10880662
> 
> 赞同：0
> 
> 时间：2012-06-04T11:41:52.367
> 
> 标签：php, database, crud, moodle

所以，我有这个关联数组，键是数据列，值是数据本身，其他框架（如 kohana）使用 ORM 自动创建私有 $data = aray() 并将其传递给数据库......所以如果

```
$class->data = "value";
$class->save() // $class->update() 
```

这很容易，在带有 ORM 的框架中，但是 moodle 怎么样？我尝试使用 $DB->insert_record() 但 stdClass 很难创建。我如何将数组传递给moodle中的数据库？请我需要帮助...这是我的课

```
<?php

/**
 * Course completion Extention- student self marked - plugin
 *
 * @package   completion
 * @copyright 2012 Ekomerce Ltd
 * @author    Gavin Sanden <gavin@ekomerce.co.uk>
 */

completion_ext::$DB = $DB;

class completion_ext{
    private $data = array();
    public static $DB;

 /**
 * DB Table
 * @var string $table
 */
public $table = 'completion_ext';

/**
 * Array of required table fields, must start with 'id'.
 * @var array $required_fields
 */

 public static function fetch_all($params) {}
function __construct($data = null){
    if($data != null && is_array($data)){
        $this->data = $data;
    }
}
public static function get_from_user($user_id){
    $variables =  self::$DB->get_records('completion_ext',array(
        'user_id'=>$user_id
    ));
    $completion_array  = array();
    foreach($variables as $variable){
        $com = new completion_ext($variable);
        $completion_array[] = $com;
    }
    return $completion_array;

}

public static function exists($user, $course){
    return self::$DB->record_exists('completion_ext', array(
        'user_id'=>$user,
        'course'=>$course

    ));
}
public static function id_exists($id){
        return self::$DB->record_exists('completion_ext', array(
        'id'=>$id
    ));
}
public static function get_from_course($course, $user_id){
    $variables = self::$DB->get_record('completion_ext',array(
        'user_id'=>$user_id,
        'course'=>$course
    ));
    return new completion_ext($variables);
}
public function __set($dt, $vl){
    $this->data[$dt] = $vl;
}
public static function get_by_id($id){
    $variables = self::$DB->get_record('completion_ext',array(
        'id'=>$id
    ));
    return new completion_ext($variables);
}
public static function check_completion_from_user($user_id){
    self::$DB->record_exists($table, array(
        'user_id'=>$user_id
    ));
}
public function __get($dt){
    return $this->data[$dt];
}
public function save(){
    echo print_r($this->data);
}
public function update(){
    self::$DB->update_record("completion_ext", $this);
} 
```

} ?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:05:25.680

如果您只需要一个 stdClass 对象，那很简单：

```
$myObject = (object) array('propertyName' => 'value'); 
```

转换运算符`(object)`创建一个 stdClass 实例，其中所有数组索引作为属性。

# android - 使用 tcp 套接字连接 2 个 android 模拟器作为服务器和客户端

> ID：10880667
> 
> 赞同：1
> 
> 时间：2012-06-04T11:42:23.527
> 
> 标签：android, sockets

我想连接 2 个模拟器实例，以便能够在它们之间发送简单的聊天消息。为此，我在一个模拟器上设置了一个服务器，并让另一个模拟器成为客户端。所以我在模拟器 5554 上运行服务器，在 5556 上运行客户端。

侦听端口 6000 的服务器端代码：

```
public class NewServerActivity extends Activity{
//private TextView tv; 
private Thread fst;
private ServerSocket ss;
public static final int SERVERPORT = 6000; 
String mClientMsg = "";
protected static final int MSG_ID = 0x1337;

@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TextView tv= (TextView) findViewById(R.id.TextView01);
    tv.setText("Nothing from client yet");
    this.fst= new Thread(new RunThread()); 
    this.fst.start();
}

protected void onStop() {
      super.onStop();
      try {
         // make sure you close the socket upon exiting
         ss.close();
      } catch (IOException e) {
         e.printStackTrace();
      }
   }

Handler myUpdateHandler = new Handler() {
      public void handleMessage(Message msg) {
         switch (msg.what) {
         case MSG_ID:
            TextView tv = (TextView) findViewById(R.id.TextView01);
            tv.setText(mClientMsg);
            break;
         default:
            break;
         }
         super.handleMessage(msg);
      }
   };

class RunThread implements Runnable{
    public void run(){
        try{
            ss= new ServerSocket(); 
            Socket s= ss.accept();
            BufferedReader input = new BufferedReader(new InputStreamReader(s.getInputStream()));

            Message m = new Message();
            m.what = MSG_ID;
            String st = null;
            st = input.readLine();
            mClientMsg = st;
            myUpdateHandler.sendMessage(m);

        }catch(IOException ep){
            ep.printStackTrace();
        }       

    }       
} 
```

}

在端口 5000 上建立连接的客户端代码：

```
 public class NewClientActivity extends Activity {
private Button bt;
private TextView tv;
private Socket socket;
private Thread scd;
private String serverIpAddress = "10.0.2.2";
private static final int REDIRECTED_SERVERPORT = 5000;

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);      
     bt = (Button) findViewById(R.id.myButton);
     tv = (TextView) findViewById(R.id.myTextView);
     this.scd= new Thread(new RunThread1()); 
     this.scd.start();
}

class RunThread1 implements Runnable{
    public void run() {
        try {
             //InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
             socket = new Socket(serverIpAddress, REDIRECTED_SERVERPORT);
          } catch (UnknownHostException e1) {
             e1.printStackTrace();
          } catch (IOException e1) {
             e1.printStackTrace();
          }

        bt.setOnClickListener(new OnClickListener() {

             public void onClick(View v) {
                try {
                   EditText et = (EditText) findViewById(R.id.EditText01);
                   String str = et.getText().toString();
                   PrintWriter out = new PrintWriter(new BufferedWriter(
                         new OutputStreamWriter(socket.getOutputStream())),
                         true);
                   out.println(str);
                   Log.d("Client", "Client sent message");                     

                } catch (UnknownHostException e) {
                   tv.setText("Error1");
                   e.printStackTrace();
                } catch (IOException e) {
                   tv.setText("Error2");
                   e.printStackTrace();
                } catch (Exception e) {
                   tv.setText("Error3");
                   e.printStackTrace();
                }
             }
          });
        }       
} 
```

}

我将端口重定向为：

```
 telnet localhost 5554
     redir add tcp:5000:6000 
```

一切正常，两个应用程序都启动了，但是当我单击发送按钮时，服务器端没有响应。我错过了什么吗？

# java - for循环寻找素数

> ID：10880669
> 
> 赞同：2
> 
> 时间：2012-06-04T11:42:33.917
> 
> 标签：java

我正在尝试运行此代码来打印小于 200 万的所有质数的总和。这个循环永无止境。谁能告诉我代码有什么问题？不过，它似乎适用于较小的数字。

```
public static void main(String[] args) {

        long result = 1;

        for(int i=0; i<2000000; i++) {
            if(isPrime(i)) {
                result+= i;
            }
        }
        System.out.println(result);

    }
private static boolean isPrime(long n) {
    boolean result = false;

    for(long i=2; i<(long)Math.sqrt(n); i++) {
        if(n%i == 0) {
            result = false;
            break;
        }
        else result = true;
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T11:48:33.203

在`isPrime`你只测试除以 2：

```
private static boolean isPrime(long n) {
    boolean result = false;

    for(long i=1; i<n/2; i++) {
        if(n%2 == 0) {
            result = false;
            break;
        }
        else result = true;
    }
    return result;

} 
```

它应该除以每个`i`并从 2 开始：

```
for(long i=2; i<n/2; i++) {
    if(n%i == 0) {
      ... 
```

实际上，在您当前的版本中，奇数`n`将继续除以 2，`n/2`而不是更快地停止。考虑 n = 21。您从 1 到 10 除以 2，而不是在第 3 步除以 3 并退出。

它不仅给出了错误的结果，而且需要比需要更长的时间才能得出一个`return`声明。

**编辑**：为了获得更快的结果，请查看 Erathostenes 方法的筛子：

```
public static long sumOfPrimes(int n) {

    long sum = 0;

    boolean[] sieve = new boolean[n];
    for(int i = 2; i < Math.sqrt(n); i++) {
        if(!sieve[i]) {
            for(int j = i * i; j < n; j += i) {
                sieve[j] = true;
            }
        }
    }

    for(int i = 2; i < n; i++) {
        if(!sieve[i]) {             
            sum += i;
        }
    }

    return sum;
} 
```

**编辑#2**：发现新版本的一些错误。这是更正后的：

```
private static boolean isPrime(long n) {
    boolean result = false;

    if(n == 2 || n == 3) return true;

    for (long i = 2; i <= (long) Math.sqrt(n); i++) {
        if (n % i == 0) {
            result = false;
            break;
        } else
            result = true;
    }

    System.out.println(n + " " + result);
    return result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T11:48:36.660

你有一个错误`isPrime()`

测试应该是：

```
if(n%i == 0) { ... 
```

并且您需要从 开始计数`2`，而不是`1`，因为每个数字除以 时都有余数为零`1`！

此外，无需过去`Math.sqrt(n)`。

你应该把它改成这样：

```
private static boolean isPrime(long n) {
    long max = (long)Math.sqrt(n);
    for (long i = 2; i < max; i++) {
        if (n % i == 0) {
            return false;
        }
    }
    return true;
} 
```

仅供参考，通过此更改，我在 PC 上测试了该程序，并在 1 秒内完成，结果为`143064094810`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:46:54.547

一个简单的函数必须在每次运行时计算直到（或至少到）`isPrime`的所有素数。确保你的 isPrime 函数缓存了它的结果！`i``sqrt(i)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T06:59:52.120

## 经过测试且无错误的 Prime 检查功能

```
static boolean isPrime(int n) {
    if (n == 1) return false;

    for(int i = 2; i <= n/2; i++)
        if(n % i == 0)
            return false;

    return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-19T13:17:14.747

**这是一个使用JOptionPane的Prime的完整程序，即Java GUI**

```
import javax.swing.*;

public class ChkPrime {
    public static void main(String[] args) throws NumberFormatException {
        String str = JOptionPane.showInputDialog(null, "Enter any number: ","Input...", 3);

        try {
            int num = Integer.parseInt(str);

            if (num == 1)
                JOptionPane.showMessageDialog(null, "Your inputed no. " + num + " is not prime.","Error!", 0);

            for(int i = 2; i <= Math.sqrt(num); i++) {
                if(num % i == 0) {
                    JOptionPane.showMessageDialog(null, "Your inputed no. " + num + " is not prime.","Error!", 0);
                    System.exit(0);
                }
            }

            JOptionPane.showMessageDialog(null, "Your inputed no. " + num + " is prime.","Yeh! Got it!", 1);
        }

        catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(null, "Please input numbers...","Error!", 0);
            main(null);
        }
    }
} 
```

# algorithm - 我们如何在链接列表中找到循环的起始节点？

> ID：10880672
> 
> 赞同：8
> 
> 时间：2012-06-04T11:42:40.227
> 
> 标签：algorithm, floyd-cycle-finding

根据弗洛伊德的循环查找算法，龟兔赛跑的点解释了链表中的循环性质。

为了找到循环中的起始节点，我们将 tortoise 指针初始化为链表的头部，并开始将 hare 和 tortoise 指针递增一个单位。它们相遇的点表示循环的起始节点。

请告诉我它在给定情况下是如何工作的。

链接列表如下：

```
1->2->3->4->5->6->7->8->3 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-04T14:06:10.630

让我们来看看。

你把兔子和乌龟放在 1 处，让它们跑，兔子的速度是乌龟的两倍。

在第 0 步，两者都为 1。在第一步，乌龟移动到 2，兔子移动到 3，依此类推。

```
1 1
2 3
3 5
4 7
5 3
6 5
7 7 
```

所以兔子和乌龟在 7 点相遇。

现在把乌龟放在开始处，让它们再次跑，现在以同样的速度跑。

```
1 7
2 8
3 3 
```

所以他们确实在周期的第一个元素相遇。

这就是它*在给定情况下*的工作方式。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-04T18:31:14.560

好的，让我们保持简单。

假设您有两个跑步者 A 和 B。A 每一步向前移动 1 个节点，B 向前移动 2 个节点。

如果是循环列表，他们最终会相遇。

那时候

假设 A 到目前为止移动的距离是`m`，所以对于 B 来说`2m`

另请注意

```
 m = a + b
2m = a + b + k * lengthOfLoop 
```

因为对于 B，它已经移动了 A 移动的任何距离，加上`k`（我们不关心的一些数字）循环。`a`是循环点之前的距离，`b`是循环点之后移动的距离 A。

然后我们有（经过一些数学运算）

```
a = k * lengthOfLoop - b 
```

现在我们将 B 放回列表的首位，并将他的速度降低到 1。

对于 B，它是`a`远离循环点的节点。对于A，他已经通过了循环点`b`，根据上面的等式，他也是`a`远离循环点的节点。

因此，经过`a`更多步骤，A 和 B 将在循环点再次相遇。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-04T14:04:24.637

好的，直接回答：您给出的 [编辑：链表，不是序列] 不包含循环。这就是将会发生的事情。在算法的第一部分，乌龟和头发将分别从 x1=2 和 x2=3 开始。然后他们将前进到 x2=3 和 x4=5。然后到 x3=4 和 x6=7。然后到 x4=5 和 x8=3。然后野兔将停止前进，因为除了 x8 之外没有任何东西，并且算法将得出没有找到循环。

下面我编译了一个小 GIF，显示了 Floyd 的循环发现应用于不同的序列，它确实包含循环。

![弗洛伊德算法在行动。](../Images/02c19ed199cba2deac116f4db840ea6c.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-05T19:39:29.097

考虑两个指针：（`fast pointer`一次移动两个节点）和`slow pointer`（一次移动一个节点）。两者都从链表的头部开始移动。

一段时间后，进入从头开始移动**k**个节点`slow pointer`的循环，那时将遍历列表头的**2k**个节点。因此，这意味着指向 的第**k**个节点。**`fast pointer`**`fast pointer`**`slow pointer`******

 ******![示例：（图 1）](../Images/b805b4a976e9618443a204b38aaff759.png)

现在他们继续前进，直到他们在循环中的某个地方相遇。当它们相遇时，它们将远离循环的开始，与循环开始时的节点数完全相同（即循环的起始节点到节点的距离`fast pointer`和 相遇是**k**个元素（或节点）。而**k**也是循环起始节点到链表头的距离。`slow pointer``fast pointer``slow pointer`

 ****![（图2）](../Images/d4d91e27f3168ef9e18fd16ec4d582b6.png)

所以，我们开始从 和 的交点移动一个指针和一个`fast pointer`指针`slow pointer`。由于循环起始节点距这两个点的距离为**k**，因此它们将在第**k**步处在循环的起始节点处相遇

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-20T21:06:55.287

*   假设你有一个长度为 9 的链表，将乌龟放在索引 0，兔子放在索引 1。
*   兔子应该以 x2 的速度移动，乌龟以 x1 的速度移动，这样下次它们移动时，兔子会在索引 3，乌龟会在索引 2
*   他们继续这样移动，直到兔子的价值等于乌龟的价值。
*   此时，将野兔移回链表的头部（这样野兔现在在链表的头部，乌龟在它遇到野兔的索引/位置），这一次它应该只移动x1，和乌龟一样的速度。
*   再次开始移动兔子和乌龟，如前所述，兔子和乌龟应该以 x1 的速度移动，这样如果兔子和乌龟相遇的位置在索引 6 处，那么下一步应该会导致兔子在索引 1 处，乌龟在索引 7 处。
*   兔子和乌龟再次相遇的下一个点是这个链表上循环的开始。**********

# html - html中property属性的含义

> ID：10880674
> 
> 赞同：7
> 
> 时间：2012-06-04T11:42:49.987
> 
> 标签：html

我刚刚在其中一个站点上看到了用一些标签定义的属性属性。例如：-

```
<span property="amount">100</span> 
```

我在网上搜索，但至少在 w3schools 上没有这样的属性。有人可以告诉我它的作用是什么。

我正在尝试运行一个简单的 html 代码，但我不明白它的重要性。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T12:08:53.417

`property`是一个 RDFa 属性。您所看到的可能与此有关。

请参阅[http://www.w3.org/2010/02/rdfa/sources/rdfa-lite/](http://www.w3.org/2010/02/rdfa/sources/rdfa-lite/) 第 2.1 节 vocab、typeof 和 property

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:44:41.967

它是非标准的、无效的代码。

如果它有角色，它将特定于它出现的站点（可能是为了该站点的 JavaScript）。

如果它是 HTML5，那么它将是[`data-property`](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)而不是`property`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:44:56.867

这不是标准属性。
该站点中的自定义代码可能正在使用它。

`data-*`对这些事情使用属性会更正确。

# windows-installer - 适用于 Windows Server 2008 R2 的 Windows 安装程序

> ID：10880675
> 
> 赞同：0
> 
> 时间：2012-06-04T11:43:01.093
> 
> 标签：windows-installer, windows-server-2008-r2

我想为 Windows Server 2008 R2 X64 安装 Windows Installer。但是当我安装 Windows Installer 4.5 时会显示以下警告：

该更新不适用于您的计算机

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:28:29.213

Server 2008 和 Win7 默认使用 Windows Installer 5.0。出现您收到的错误消息是因为您尝试安装的 MSI 软件包已损坏，即下载不完整、防病毒软件阻止执行等...第一步是检查其属性、文件大小、哈希...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:43:46.697

这是因为 Windows Server 2008 R2 包含 Windows Installer 4.5。

# java - 带有特殊字符的 Java HTTP/XML 请求

> ID：10880676
> 
> 赞同：0
> 
> 时间：2012-06-04T11:43:11.673
> 
> 标签：java, xml, http

我正在通过 Java servlet 设置对 Google 地理编码 API 的 HTTP 请求。不幸的是，每次这个请求包含一个特殊字符（例如'ß'），请求都会返回一个“Bad request / 400”异常。由于这项服务即将在这些奇怪角色相当流行和必要的国家 - 欧洲 - 我在这里遇到了一些麻烦。将请求中的特殊字符替换为十六进制转义字符串（'ß' 为 0xDF/%DF）会导致来自 Google 的“INVALID_REQUEST”响应。

这就是我获得 XML 响应的方式：

```
stringToReverse = URLEncoder.encode(url, "UTF-8");
URL urlR = new URL(url);
                URLConnection connection = urlR.openConnection();

                connection.setDoOutput(true);

                OutputStreamWriter out = new OutputStreamWriter(connection.getOutputStream());
                out.write("string=" + stringToReverse);
                out.close();

                BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()));
                String decodedString;
                String resultString = "";
                while ((decodedString = in.readLine()) != null) {
                    System.out.println(decodedString);
                    resultString += decodedString;
                }               
                in.close(); 
```

希望有人可以在这里帮助我。我想 URLConnection 或其中一个流需要设置为 UTF-8，考虑到 Google 的响应也是用 UTF-8 编码的？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:55:28.247

使用此[构造函数](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html#InputStreamReader%28java.io.InputStream,%20java.lang.String%29)代替`InputStreamReader`：

```
BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream(), "UTF-8")); 
```

并将此[构造函数](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/OutputStreamWriter.html#OutputStreamWriter%28java.io.OutputStream,%20java.lang.String%29)用于`OutputStreamWriter`：

```
OutputStreamWriter out = new OutputStreamWriter(connection.getOutputStream(), "UTF-8")); 
```

希望这能解决您的问题！

# java - 春季安全拦截网址对我不起作用

> ID：10880679
> 
> 赞同：1
> 
> 时间：2012-06-04T11:43:24.730
> 
> 标签：java, hibernate, spring-security

在我的情况下，我希望只有具有 ROLE_ADMIN 的用户才能访问特定的 URL，但这不起作用，因为即使用户没有 ROLE 作为 ROLE_ADMIN，用户也能够查看管理员特定页面。这是spring-security .xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:sec="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/security 
        http://www.springframework.org/schema/security/spring-security-3.1.xsd
        ">

    <sec:global-method-security pre-post-annotations="enabled" />

    <sec:http pattern="/css/**" security="none"/>
    <sec:http pattern="/images/**" security="none"/>
    <sec:http pattern="/js/**" security="none"/>
    <sec:http pattern="/index.jsp" security="none"/>
    <!-- <sec:http pattern="/app/addNewUser.json" security="none"/> -->
    <sec:http pattern="/login.jsp" security="none"/>
    <sec:http use-expressions="true">
        <!--
             Allow all other requests. In a real application you should
             adopt a whitelisting approach where access is not allowed by default
          -->
        <sec:intercept-url pattern="/**" access="isAuthenticated()" />
        <sec:form-login login-page='/login.jsp'
          authentication-failure-url="/login.jsp?login_error=1"
          default-target-url="/index.jsp" />
        <sec:logout logout-success-url="/login.jsp" delete-cookies="JSESSIONID"/>
        <sec:remember-me />
 <sec:intercept-url pattern="/**/referencemetadatahome*" access="hasRole('ROLE_ADMIN')" />
    </sec:http>

    <bean id="myUserService" class="com.aa.ceg.proj.mars.serviceimpl.UserServiceImpl" />
    <sec:authentication-manager>
    <sec:authentication-provider user-service-ref="myUserService" />
    </sec:authentication-manager>
<bean id="loggerListener" class="org.springframework.security.authentication.event.LoggerListener"/>
</beans> 
```

这是web.xml；

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>Spring3MVC</display-name>
  <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring-rootcontext.xml
            /WEB-INF/spring-security.xml
        </param-value>
    </context-param>
       <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
      <filter-name>springSecurityFilterChain</filter-name>
      <url-pattern>/*</url-pattern>
    </filter-mapping> 

    <!--
      - Loads the root application context of this web app at startup.
    -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

  <servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/app/*</url-pattern>
  </servlet-mapping>
 <filter>
       <filter-name>CAS Single Sign Out Filter</filter-name>
       <filter-class>org.jasig.cas.client.session.SingleSignOutFilter</filter-class>
    </filter>
 <filter-mapping>
       <filter-name>CAS Single Sign Out Filter</filter-name>
       <url-pattern>/*</url-pattern>
    </filter-mapping>
    <listener>
        <listener-class>org.jasig.cas.client.session.SingleSignOutHttpSessionListener</listener-class>
    </listener>

</web-app> 
```

`/app/referencemetadatahome.html`即使用户没有 ROLE_ADMIN 角色，我也可以访问。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T12:14:41.220

好的..只需重新排序 spring 安全拦截器 -url 以使工作正常

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:sec="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/security 
        http://www.springframework.org/schema/security/spring-security-3.1.xsd
        ">

    <sec:global-method-security pre-post-annotations="enabled" />

    <sec:http pattern="/css/**" security="none"/>
    <sec:http pattern="/images/**" security="none"/>
    <sec:http pattern="/js/**" security="none"/>
    <sec:http pattern="/index.jsp" security="none"/>
    <!-- <sec:http pattern="/app/addNewUser.json" security="none"/> -->
    <sec:http pattern="/login.jsp" security="none"/>
    <sec:http use-expressions="true">
 <sec:intercept-url pattern="/**/referencemetadatahome*" access="hasRole('ROLE_ADMIN')" />
        <!--
             Allow all other requests. In a real application you should
             adopt a whitelisting approach where access is not allowed by default
          -->
        <sec:intercept-url pattern="/**" access="isAuthenticated()" />
        <sec:form-login login-page='/login.jsp'
          authentication-failure-url="/login.jsp?login_error=1"
          default-target-url="/index.jsp" />
        <sec:logout logout-success-url="/login.jsp" delete-cookies="JSESSIONID"/>
        <sec:remember-me />

    </sec:http>

    <bean id="myUserService" class="com.aa.ceg.proj.mars.serviceimpl.UserServiceImpl" />
    <sec:authentication-manager>
    <sec:authentication-provider user-service-ref="myUserService" />
    </sec:authentication-manager>
<bean id="loggerListener" class="org.springframework.security.authentication.event.LoggerListener"/>
</beans> 
```

# c# - Mono for Android 预处理器宏不起作用

> ID：10880680
> 
> 赞同：0
> 
> 时间：2012-06-04T11:43:27.350
> 
> 标签：c#, android, mono, xamarin.android, c-preprocessor

关于这个问题：[Mono for Android preprocessor macros](https://stackoverflow.com/questions/7917859/mono-for-android-preprocessor-macros)

我正在尝试做一些跨平台的工作，需要让`__ANDROID__`宏工作。然而，在视觉工作室它没有拿起它。难道我做错了什么？该项目是一个 Mono for Android 项目，我刚刚更新到最新版本。

示例代码（它继续进入#else）：

```
#if WINDOWS_PHONE
                if (IsolatedStorageSettings.ApplicationSettings.Contains(CellNumberKey))
                {
                    IsolatedStorageSettings.ApplicationSettings[CellNumberKey] = value;
                }
                else
                {
                    IsolatedStorageSettings.ApplicationSettings.Add(CellNumberKey, value);
                }

                IsolatedStorageSettings.ApplicationSettings.Save();
#elif __ANDROID__

#else
                NSUserDefaults.StandardUserDefaults.SetString (value, CellNumberKey);
                NSUserDefaults.StandardUserDefaults.Synchronize ();
#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:57:15.830

刚刚经过测试，它在库和可执行项目中的 VS2010 中对我有用 - 在 Mono for Android 4.2.2 中工作

然而，语法突出显示“有点古怪”——特别是它只是`__ANDROID__`在我对受影响的项目进行构建后才发现代码是活动的。

# jmeter - Jmeter不记录java /*.do网站

> ID：10880685
> 
> 赞同：0
> 
> 时间：2012-06-04T11:43:38.137
> 
> 标签：jmeter

我需要来自 的记录请求`http://localhost:8080/home.do`，但 jmeter 没有记录任何内容。当我浏览 google.com 等互联网时，jmeter 正在正确记录。我尝试将“要包含的 URL 模式”设置为所有但没有运气。我什至尝试将其留空，但我的测试页面仍然没有记录。这些网站是由java制作的，我只测试它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:14:07.513

我认为您需要检查浏览器中的代理设置，因为它可能设置为绕过本地主机地址的代理。您应该从该设置中删除检查，所有请求都将通过您的 jMeter 代理服务器。

# javascript - 在 tabindex 更改时调用 javascript 函数

> ID：10880687
> 
> 赞同：0
> 
> 时间：2012-06-04T11:43:39.630
> 
> 标签：javascript, asp.net

我希望在单击该链接时获得链接，调用一个 javascript 函数。现在我想使用 Tab 键调用该函数。所以当焦点转到使用 tab 键的链接时，应该调用 javascript 函数。

如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:47:18.693

尝试在您的链接上使用事件 OnFocus。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:47:27.520

对给定链接的焦点和模糊事件使用事件处理程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:52:32.843

您可以处理链接的 onfocus 事件。像这样的东西：

```
<a href="javascript:foo();" onfocus="foo();" > 
```

带有小演示的[jsfiddle 。](http://jsfiddle.net/Cw8Kd/)

# javascript - Raphael：向每个路径添加文本

> ID：10880691
> 
> 赞同：3
> 
> 时间：2012-06-04T11:43:57.013
> 
> 标签：javascript, raphael

我正在使用 Raphael 来处理 SVG。而且，我想在每个路径中添加文本。我怎样才能做到这一点？这是我在[jsfiddle](http://jsfiddle.net/BhyR9/1/)上的代码。
谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T17:24:51.703

当您说在每个路径中添加文本时，您的意思是像这样简单地将标签放置在该特定路径的中心，就像这样吗？

[http://jsfiddle.net/kevindivdbyzero/NFAAL/2/](http://jsfiddle.net/kevindivdbyzero/NFAAL/2/)

如果是这样，将标签作为数据绑定到每个路径元素，在创建它们后遍历纸上的所有路径，并以编程方式在单个批次中生成标签应该真的很容易。甚至可以通过一些工作来构建标签生成以避免冲突。

如果这不是您的想法，您可能需要在您的问题中添加更多细节。

# cakephp - 在 cakephp 2.0.2 中使用 shell 类的插件组件

> ID：10880694
> 
> 赞同：2
> 
> 时间：2012-06-04T11:44:13.717
> 
> 标签：cakephp, cakephp-2.0

我想使用我的 shell 类中的插件组件。我正在尝试使用：

```
App::import('Component', 'Myplugin.Mycomponent');
$this->Mycomponent =& new MycomponentComponent(); 
```

不幸的是，上述方法似乎失败了。

我收到一条错误消息，指出找不到 Component 类。

有什么建议我应该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T11:58:24.127

你应该总是先看看测试用例！这样你会发现它们是通过这种方式手动包含的：

```
App::uses('ComponentCollection', 'Controller');
App::uses('AppleComponent', 'Myplugin.Controller/Component'); 
```

和

```
$Collection = new ComponentCollection();
$Apple = new AppleComponent($Collection); 
```

旁注：如果您需要在控制器以外的其他地方使用组件，那么您做错了！您应该将功能提取到模型或库中，并从组件和外壳中调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-15T19:32:56.217

我知道这已经很老了，但我只是在处理遗留的 CakePHP 2 应用程序时遇到了这个问题。

在您的控制器中：

```
public $components = array(
    'Myplugin.Mycomponent',
); 
```

然后，您可以通过以下方式访问该组件：

```
$this->Mycomponent->mymethod(); 
```

[资源](https://book.cakephp.org/2/en/plugins/how-to-create-plugins.html#components-helpers-and-behaviors)

# python - 连接到您的外部 IP 以模拟互联网

> ID：10880696
> 
> 赞同：1
> 
> 时间：2012-06-04T11:44:21.903
> 
> 标签：python, sockets, proxy, ip, external

所以我正在编写这个程序，它使用 python 和套接字在互联网上交谈，但这不是问题。

问题是我希望测试该程序如何在现实的互联网环境中工作。

即：我的客户端连接到海上某处的代理，然后数据返回到我的路由器到我的另一台计算机。

所以我希望我的数据去海外，然后回来。

无论如何，这可以做到吗？或者这是不可能的？我试过使用代理服务器，但我一辈子都无法让它们工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T12:08:12.267

您应该使用[wanem](http://wanem.sourceforge.net/)或[`tc`](https://stackoverflow.com/a/615757/667301)在 linux 中

不要为此目的在 ssh 中隧道传输您的流量。 [TCP 中的隧道 TCP](http://sites.inka.de/bigred/devel/tcp-tcp.html)引入了延迟之外的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:56:33.387

您可以在远程机器上设置一个简单的 SSH 隧道：

```
ssh -N your-oversea-server.com -L 1234:your-other-computer.com:1234 
```

然后，您的客户端可以连接到`your-oversea-server.com:1234`并且流量将被重定向到`your-other-computer.com:1234`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T12:13:45.097

在您的服务器上使用[无 IP](http://www.no-ip.com/)客户端（假设`myserver.no-ip.com`）将您的服务器绑定到您的家庭路由器，`0.0.0.0 port 80`并在您的家庭路由器上将您的服务器 lan ip 定义为 dmz。在另一台电脑上（可能位于另一个房间，在同一个局域网上）连接到`myserver.no-ip.com`. 如果它在国外旅行，您可以使用 trace route: `tracert myserver.no-ip.com`. 如果这无济于事，请在客户端计算机上使用代理。（大多数免费代理只允许端口 80 流量）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T12:21:09.453

这取决于您正在编写的程序的类型，如果您只是希望您的程序连接到某个目标 ip 上同一程序的另一个实例。或者您正在编写服务器应用程序？如果是这样，什么客户端连接到该服务器？我不确定你是否需要使用代理，TCP 流量只会通过它需要到达它需要去的地方的路由器/交换机。

如果您可以详细说明您的问题，并指定您是否编写具有差异化客户端的服务器，或者只是一个既是客户端/服务器的桌面应用程序，那将很有帮助。

# android - 如何在 android 的 sqlite db 中存储 xml 的路径并通过显示该 xml 来检索它？

> ID：10880704
> 
> 赞同：0
> 
> 时间：2012-06-04T11:44:51.523
> 
> 标签：android, sqlite

我一直在研究 SQLite 数据库，我需要将 XML 布局的路径存储在 SQLite 数据库中。我需要在 Android 应用程序中访问它。谁能给我一个例子？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:46:57.543

你只需要存储一个路径？像一个字符串？阅读有关 SharedPreferences 的信息。我不知道是否是好的做法。

# c# - Java 从无效的 HTML 创建 PDF 或图像

> ID：10880707
> 
> 赞同：4
> 
> 时间：2012-06-04T11:45:08.320
> 
> 标签：c#, java, html, validation, pdf

我想使用**Java**从“无效” **HTML**文件创建**PDF**（或任何图像格式 [ **png、jpg、bmp** ..]） 。我搜索了它并找到了一个工具：[iText](http://sourceforge.net/projects/itext/)，以及一些使用 iText 从 HTML 和 Java 创建 PDF 的教程。

 ****在本教程[(X)HTML to PDF with Java](http://goo.gl/kykU3)中，它适用于有效的 HTML，我有一个这样的 PDF[文件](http://goo.gl/rHl8H)。但是，如果我尝试从我的 HTML 创建 PDF，我会遇到一些错误。

首先，我的 HTML 格式不正确，很遗憾无法更改。我把它上传到[这里](http://goo.gl/hXJKW)，W3C 的验证器发现了[28 个错误](http://goo.gl/PQc79)。

我的选择是：

*   首先清理并验证我的 HTML 并尽快创建 PDF。
*   找到另一个工具（适用于我的问题）。
*   您的建议（使用 Java）。
*   最后一个选项；使用另一个平台（**.net、Php、Python**等）并使用我的应用程序中的 Web 服务。

请帮我解决这个问题。先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T11:58:19.103

您可以使用[http://jtidy.sourceforge.net/](http://jtidy.sourceforge.net/)之类的工具为您修复 HTML 并针对 jTidy 的输出运行 iText...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T14:24:03.323

试试`wkhtmltopdf`。这使用无头浏览器（webkit）首先呈现 html，然后生成 PDF。我在我的一个 java 项目中使用它并且运行良好。

它提供了一些灵活的命令行选项，[这里](http://madalgo.au.dk/~jakobt/wkhtmltoxdoc/wkhtmltopdf-0.9.9-doc.html)是选项列表及其用法的链接。它也适用于格式不正确的 html。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T13:41:39.040

您可以使用支持损坏 HTML 的 HTML 解析器，例如[jsoup](http://jsoup.org/)。

与 jtidy 一样，它可以自动创建有效的 HTML，但它也允许您操作 HTML DOM，因此您可以尝试按照自己想要的方式明确地解决最大的问题。****

# ios - AIR FullScreen 未在 iOS 上应用

> ID：10880709
> 
> 赞同：0
> 
> 时间：2012-06-04T11:45:14.633
> 
> 标签：ios, flash, ipad, air, adobe

我们目前正在尝试将我们的 Flash/AIR 应用程序带到 iPad 上进行测试。基本上，它可以工作，但应用程序显示在一个非常小的窗口中。

原始 swf 设置为 2048x1536（这应该是正确的 iPad 分辨率）。然而，iPad 似乎试图将 2048x1536 调整到显示屏中心的那个小窗口中。

如果我按下“2x”以使应用程序变大，它会放大所有内容，从而使所有内容都非常像素化。看起来真的很尴尬。

当然，在桌面和 Android 上，一切正常。

这是应用程序.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<application xmlns="http://ns.adobe.com/air/application/3.2">
<id>com.xxx.xxx</id>
<versionNumber>1.0</versionNumber>
<filename>xxx</filename>
<name>xxx</name>

<initialWindow>
  <title>xxx</title>
  <content>xxx.swf</content>
  <systemChrome>standard</systemChrome>
  <transparent>false</transparent>
  <visible>true</visible>
  <minimizable>true</minimizable>
  <maximizable>true</maximizable>
  <resizable>true</resizable>
  <aspectRatio>landscape</aspectRatio>
  <renderMode>auto</renderMode>
  <autoOrients>true</autoOrients>
  <fullScreen>true</fullScreen>
  <width>2048</width>
  <height>1536</height>
</initialWindow>

<supportedProfiles>desktop mobileDevice</supportedProfiles>
<android>
<manifestAdditions><![CDATA[<manifest>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
</manifest>]]></manifestAdditions>
</android>

<iPhone>
  <InfoAdditions><![CDATA[<key>CFBundleDevelopmentRegion</key>
  <string>en</string>
  <key>UIStatusBarStyle</key>
  <string>UIStatusBarStyleDefault</string>
  <key>UIRequiredDeviceCapabilities</key>
    <array>
  <string>wifi</string>
  <string>microphone</string>
    </array>
  <key>UIRequiresPersistentWiFi</key>
  <string>YES</string>]]></InfoAdditions>
</iPhone>
</application> 
```

以下是我打包 *.ipa 文件的方法：

```
adt -package  -target ipa-test   -provisioning-profile  bat\certificates\xxx.mobileprovision  -storetype pkcs12 -keystore "bat\certificates\xxx.p12" -storepass xxx air\xxx.ipa application.xml -C output . 
```

我正在使用[FlashDevelop](http://www.flashdevelop.org/)从 Windows 7 进行开发。我还尝试了不同的渲染模式、全屏、宽度/高度组合，但没有任何帮助。该应用程序在 iPad 上实在是太小了，而且绝对**不是**全屏的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:30:56.687

如果 iPad 上有一个 2X 按钮，那么您运行的是 iPhone 应用程序，而不是“真正的”iPad 应用程序。问题出在 XML 中。您需要指定 UIDeviceFamily 才能将其编译为 iPad 应用程序：leebrimelow.com/?p=2764

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T08:49:35.917

看到这个线程。 [http://www.flashdevelop.org/community/viewtopic.php?p=43643](http://www.flashdevelop.org/community/viewtopic.php?p=43643) application.xml

```
<key>UIDeviceFamily</key>
<array>
<!-- iPhone support -->
<!--<string>1</string> -->
<!-- iPad support -->
<string>2</string>  <==== for iPad
</array> 
```

我成功完成了。

# haskell - Haskell IO Monad 和内存使用

> ID：10880713
> 
> 赞同：7
> 
> 时间：2012-06-04T11:45:38.977
> 
> 标签：haskell, io, monads

我可能不太了解 IO 单子。

如果我编写了一个预计将运行数月的应用程序，同时记录其进度，IO monad 是否会将所有日志信息保存在 RAM 中直到最后？

在[IO Inside](http://www.haskell.org/haskellwiki/IO_inside)上的博客中，Haskell 将世界建模为

```
main :: RealWorld -> ((), RealWorld) 
```

这样 IO 不会在代码的 Haskell 部分执行期间发生，而只会在应用程序从`main`.

我可能完全误解了这一点。有人可以解释Haskell 什么**时候真正做 IO 吗？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T12:01:43.917

> IO monad 会将所有日志信息保存在 RAM 中直到最后吗？

不，您不应该将“IO monad”视为执行操作的东西。这只是表示命令式程序的一种数学方式。原始的命令式程序是这样的`getChar`；`>>=`用于将两个程序粘合到一个更大的命令式程序中。IO monad 是所有命令式程序的集合。

考虑一个程序，例如

```
main = putStr "Hello, " >> putStrLn "world!" 
```

这意味着：`main`是执行程序的程序`putStr "Hello, "`，完成后，执行程序`putStrLn "world!"`。Haskell 解释器或编译程序不需要在内存中保留任何状态，除了指令指针，即“我们在哪里，接下来我们要执行什么”。

这个`RealWorld -> ((), RealWorld)`比喻可能让你感到困惑，因为它似乎暗示了将外部世界的状态转换为必须完整计算的新状态，之后可以更新世界以反映计算的状态。这根本不是发生的事情。Haskell wiki 对此提出警告：

> 以下关于 IO 的故事是不正确的，因为它实际上无法解释 IO 的一些重要方面（包括交互和并发）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T11:55:39.663

> IO monad 会将所有日志信息保存在 RAM 中直到最后吗？

不。假设您使用的是合理的日志记录策略。

Haskell 在程序需要结果时执行 IO；对于大多数动作来说，这是立即的。（例外是惰性文件输入库，在程序使用数据之前不一定要读取文件）。

# applescript - 将 tell application 语句与其他应用程序名称一起使用

> ID：10880715
> 
> 赞同：0
> 
> 时间：2012-06-04T11:45:52.980
> 
> 标签：applescript, filemaker

我对 file maker pro 有一个特殊的问题。在 mac 上同时安装了 FMP11 和 FMP12。我有一个脚本可以让 FMP 打开一个文档并进行一些处理。该脚本到目前为止工作正常，但新的是我混合了 FMP11 和 FMP12 文档。所以我必须打开适当的 FMP 来完成这项工作。问题是它们都在 AppleScript 应用程序列表中以相同的名称注册，所以如果我“告诉应用程序 File Maker Pro Advanced”，它并没有严格定义我要告诉哪个应用程序。我试图通过退出所有 FMP 来解决这个问题，然后通过 Finder 打开一个 FMP11 或 FM12 虚拟文档，这将启动适当的 FMP 版本，但是当我想用激活切换到它时，或者我使用第一个告诉在那之后的时间，如果打开的是 FMP11 一切正常，如果 FMP12 是打开的，tell 语句将打开 FMP11。最奇怪的是，在脚本的另一个简化版本中，它运行良好。

所以我的问题是：有没有其他方法可以使用tell应用程序，然后使用应用程序的注册名称？

我试图获取 FMP11 和 FMP12 的属性，结果如下：

* **FMP11**

获取应用程序进程“FileMaker Pro”的属性 --> {enabled:missing value, unix id:63125, file:alias "MACHD:Applications:FileMaker Pro 11 Advanced:FileMaker Pro Advanced.app:", creator type:"FMP7" , subrole:missing value, full contents:{}, selected:missing value, application file:alias "MACHD:Applications:FileMaker Pro 11 Advanced:FileMaker Pro Advanced.app:",orientation:missing value, role:"AXApplication",接受高级事件：true，文件类型：“APPL”，值：缺失值，位置：缺失值，id：25741451，**显示名称：“FileMaker Pro Advanced”**，名称：“FileMaker Pro”，类：应用程序进程，背景only:false, frontmost:false, size:missing value, visible:true, Classic:false, 角色描述：”应用程序”，最大值：缺失值，架构：“i386”，使用的分区空间：0，**短名称：“FileMaker Pro Advanced”**，重点：缺失值，最小值：缺失值，帮助：缺失值，**标题：“FileMaker Pro Advanced”**，接受远程事件：false，描述：“应用程序”，总分区大小：0 ，可访问性描述：缺失值，具有脚本术语：true，捆绑标识符：“com.filemaker.client.advanced”}

**FMP12**

获取应用程序进程“FileMaker Pro”的属性 --> {enabled:missing value, unix id:63199, file:alias "MACHD:Applications:FileMaker Pro 12 Advanced:FileMaker Pro Advanced.app:", creator type:"FM12" , subrole:missing value, full contents:{}, selected:missing value, application file:alias "MACHD:Applications:FileMaker Pro 12 Advanced:FileMaker Pro Advanced.app:",orientation:missing value, role:"AXApplication",接受高级事件：true，文件类型：“APPL”，值：缺失值，位置：缺失值，id：25753742，显示名称：“FileMaker Pro Advanced”，名称：“FileMaker Pro”，类：应用程序进程，背景only：false，frontmost：false，size：缺失值，visible：true，Classic：false，角色描述：“应用”，最大值：缺失值，架构：“i386”，使用的分区空间：0，简称：“FileMaker Pro Advanced”，重点：缺失值，最小值：缺失值，帮助：缺失值，标题：“FileMaker Pro Advanced”，接受远程事件：假，描述：“应用程序”，总分区大小：0，可访问性描述：缺失值，有脚本术语：真，捆绑标识符：“com.filemaker.client.advanced12”}*包标识符：“com.filemaker.client.advanced12”}*包标识符：“com.filemaker.client.advanced12”}*

因此，Apple Script Editor 的字典中出现的字符串似乎是显示的名称、短名称或标题属性，但它们对于两个应用程序都是相同的。

那么我怎样才能打开并告诉适当的 FMP 版本，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T03:40:50.053

使用`tell application id`带有创建者代码或捆绑 ID 的表单。

例如，试试这个：

```
tell application id "FMP7"
    activate
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:29:42.457

将 appName 设置为当前应用程序的 id 作为字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T12:05:47.300

尝试：

```
do shell script "open -b 'com.filemaker.client.advanced12'"
tell application (path to frontmost application as text)
    properties
end tell 
```

# reflection - 从表中查找所有显示方法

> ID：10880717
> 
> 赞同：1
> 
> 时间：2012-06-04T11:46:05.090
> 
> 标签：reflection, axapta, dynamics-ax-2009, x++

我需要将表中的所有显示方法放入缓存中，因此我没有手动输入（有很多显示方法），而是尝试动态执行，即浏览表的每个方法，然后检查它是否是显示方法来获取`tablemethodstr()`并使用表单数据源将其放入缓存中`cacheAddMethod()`。

但是我找不到使用它们的属性过滤方法的方法，所以我想知道是否可以在 AX 2009 中使用纯 X++ 这样做？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:21:48.477

我刚刚写了一份工作，可以帮助你得到你需要的东西。我不完全确定这个问题，但你应该能够运行这个：

```
static void Job46(Args _args)
{
    DictTable       dictTable;
    int             i;
    MethodInfo      methodInfo;
    SysDictTable    dt = new sysDictTable(tableNum(Address));
    ;

    dictTable = new dictTable(TableNum(Address));

    for (i=1; i<dt.objectMethodCnt(); i++)
    {
        methodInfo = dt.objectMethodObject(i);

        if (methodInfo.displayType() == DisplayFunctionType::Get)
            info(strfmt("Found Display: %1 - %2 - %3", methodInfo.displayType(), enum2str(methodInfo.returnType()), methodInfo.name()));
        else
            info(strfmt("Not Display: %1 - %2 - %3", methodInfo.displayType(), enum2str(methodInfo.returnType()), methodInfo.name()));
    }
} 
```

需要注意的是“methodInfo.displayType() == DisplayFunctionType::Get”

编辑：可能需要“<=”而不是“<”...没有测试。你会想办法的。

# image - IIS 仅通过 HTTPS 提供一些图像

> ID：10880720
> 
> 赞同：0
> 
> 时间：2012-06-04T11:46:35.777
> 
> 标签：image, iis, iis-7

我们的网站使用 Microsoft IIS7。通过 HTTP 为站点提供服务时一切正常，但是，当切换到 HTTPS 时，一些（看似随机的）图像已停止显示在站点上。站点的其余部分、所有其他图像和站点的脚本/样式表加载正常。

然而，看起来图像实际上是从服务器发送到浏览器的，因为 Google Chrome 的 Web Inspector 和 Firebug 都将它们的 HTTP 状态报告为 OK。

有没有人遇到过类似的问题？我可以更改服务器管理器中的任何设置来解决此问题吗？

# google-bigquery - bigquery bq load-无法确定描述的表

> ID：10880725
> 
> 赞同：4
> 
> 时间：2012-06-04T11:46:59.577
> 
> 标签：google-bigquery

我正在尝试加载一个非常基本的表：cookie:string,campaign_id:integer,point_type:integer。

这是我正在使用的文件：http: [//pastie.org/private/xswuhkotlfxmykozrzws5a](http://pastie.org/private/xswuhkotlfxmykozrzws5a)

但是，当我运行时： `bq load -F '^' myset.my_test myfile_15.txt cookie:string,campaign_id:integer,point_type:integer`它报告“加载操作中的 BigQuery 错误：无法确定 myset.my_test 描述的表”。

但是，我可以通过网络浏览器工具上传相同的文件和架构，并且加载正常。关于我可能做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:55:27.413

相同的命令对我有用。错误在于解析表名，在它向 bigquery 服务发送任何命令之前。你能验证你的命令中没有杂散的 unicode 字符吗？

有几件事可以尝试：

1.  您的 ~/.bigqueryrc 文件中是否设置了默认项目？如果没有，您可能需要将项目 id 添加到表名 ie `bq load -F '^' projectid:myset.my_test ...`中。如果您不知道要使用哪个项目 id，您可以运行`bq ls -p`以获取您有权访问的项目列表。

2.  表解析代码在命令之间共享，因此您可以尝试更简单的命令：`bq show myset.my_test`. 这应该给出错误“未找到”（因为您尚未创建表）。如果这也不起作用，请尝试仅`bq show myset`查找数据集。

3.  如果 bq show 有效，您可以尝试更简单的加载命令行——例如`bq load myset.my_test myfile_15.txt foo:string`. 这可能会失败，因为架构不匹配，但如果您可以超越解析阶段，则表明某些东西正在运行。

# java - 删除Java项目中不必要的依赖项

> ID：10880726
> 
> 赞同：1
> 
> 时间：2012-06-04T11:46:59.843
> 
> 标签：java, eclipse-plugin, dependencies, dependency-management

这个问题是Java依赖不是静态的，而是动态的。我读了这个[stackoverflow 链接](https://stackoverflow.com/questions/707194/tool-to-remove-unnecessary-dependencies-in-a-java-project)，但这是关于静态依赖的，谷歌搜索得到了类似的结果。

**所以这是我的问题：**

这是一个非常大的项目（20K+ Java 文件），运行了 10 年，现在有 50 多名开发人员。在这里，重新架构一直在发生，所以你有一个新的堆栈和一个旧的层堆栈。大多数情况下，风险缓解意味着您不能立即摆脱一个类，而是 calle 方法保持对新旧类的调用。对开发人员的标准指令是：在生产环境中执行应用程序期间不应调用旧类。

**当前解决方法：**

他们所做的是在旧班级上保留一个“假标志”并祈祷它不会被调用。如果确实如此（因为开发人员可能会错过指向新类的操作）并且在生产中出现问题，那么将针对旧类的标志设置为 true 并且世界上一切都很好。（这样他们只需更改具有标志的属性文件而不必重新编译）在产品中进行了一年左右的此类测试后，他们放弃了旧的类文件。现在这在技术上可能不是最好的方法，但在实践中，对于任务关键型应用程序，您不会冒险，没有人能够记住/知道这些 20K 类在 Java 中甚至在功能上做了什么。

**我在找什么：**

找出未使用的类的工具或方法。

1.  现在这在某些方面是一个鸡蛋，因为在您执行某个罕见的场景之前，您不会发现在运行时调用了哪个旧类以及现有的解决方案。

2.  如果您使用 PMD 等静态代码分析工具，它们不会告诉您未使用的工具，因为它们实际上至少在代码级别被某些或其他类调用。

3.  也许，它只是疯狂的想法，一些从顶层动作层开始遍历所有依赖链/树并得到结果的工具

当然，被动的方式是构建一个完全自动化的回归测试套件并运行所有可能的场景，不幸的是，由于预算、人力限制等原因，这在此处是不可能的。

我需要的是一种积极主动的方式来优化我的代码。也许这是一厢情愿的想法，这甚至是可能的，但我有一种唠叨的感觉，这个问题不是随机的，也不是结构化的，所以在某个地方可能会有解决方案。

任何想法表示赞赏。！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:35:36.357

由于动态类加载和反射，可能无法为此找到正确的解决方案。你可以从 JBoss Tattletale 开始。它可能也可以作为声纳插件使用。它可以向您显示未使用的 jar，但它只分析静态代码，因此您会得到一些错误的错误。但是当你浏览列表时，你可以忽略诸如 spring-security 之类的东西但是当你找到你自己的 jar 时，你很可能会知道该模块中是否没有动态类加载或反射

# java - net.sf.cglib.proxy.MethodInterceptor maven依赖

> ID：10880737
> 
> 赞同：1
> 
> 时间：2012-06-04T11:47:39.647
> 
> 标签：java, spring, maven, spring-aop

我正在开发一个使用带有 httpinvoker 的 spring 远程处理的项目。使用 aop 配置后`<aop:scoped-proxy />`，我收到以下错误。

我在 mvnrepository.com 上进行了搜索，并尝试使用以下依赖项，但它们都不起作用。您能否建议它的正确依赖项。我在下面发布了堆栈跟踪。

```
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib-nodep</artifactId>
    <version>2.2.2</version>
</dependency>

<dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2</version>
</dependency>

<dependency>
    <groupId>net.sf.ehcache</groupId>
    <artifactId>ehcache-core</artifactId>
    <version>2.5.2</version>
</dependency>

<dependency>
    <groupId>net.sf.ehcache</groupId>
    <artifactId>ehcache</artifactId>
    <version>2.4.6</version>
</dependency> 
```

堆栈跟踪 ：

```
Exception in thread "main" java.lang.NoClassDefFoundError: net/sf/cglib/proxy/MethodInterceptor
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:795)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:144)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:327)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at java.io.ObjectInputStream.resolveClass(ObjectInputStream.java:622)
    at org.springframework.core.ConfigurableObjectInputStream.resolveClass(ConfigurableObjectInputStream.java:79)
    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1593)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1514)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1750)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
    at org.springframework.remoting.httpinvoker.AbstractHttpInvokerRequestExecutor.doReadRemoteInvocationResult(AbstractHttpInvokerRequestExecutor.java:225)
    at org.springframework.remoting.httpinvoker.AbstractHttpInvokerRequestExecutor.readRemoteInvocationResult(AbstractHttpInvokerRequestExecutor.java:174)
    at org.springframework.remoting.httpinvoker.CommonsHttpInvokerRequestExecutor.doExecuteRequest(CommonsHttpInvokerRequestExecutor.java:103)
    at org.springframework.remoting.httpinvoker.AbstractHttpInvokerRequestExecutor.executeRequest(AbstractHttpInvokerRequestExecutor.java:69)
    at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.executeRequest(HttpInvokerClientInterceptor.java:146)
    at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.invoke(HttpInvokerClientInterceptor.java:120)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy0.getHello(Unknown Source)
    at com.gm.HelloClient.main(HelloClient.java:18)
Caused by: java.lang.ClassNotFoundException: net.sf.cglib.proxy.MethodInterceptor
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:327)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
    ... 39 more 
```

**更新： pom.xml 文件**

服务器端 pom ：

```
<?xml version="1.0"?>
<project
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
    xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <artifactId>cbpr</artifactId>
        <groupId>com.gm</groupId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <groupId>com.gm</groupId>
    <artifactId>cbpr-server</artifactId>
    <packaging>war</packaging>
    <name>cbpr-server Maven Webapp</name>
    <url>http://maven.apache.org</url>

    <dependencies>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib-nodep</artifactId>
            <version>2.2</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.gm</groupId>
            <artifactId>cbpr-common</artifactId>
            <version>1.0-SNAPSHOT</version>
        </dependency>
        <!-- MySQL database driver -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.9</version>
        </dependency>

        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>3.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-remoting</artifactId>
            <version>2.0.8</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.2</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

    </dependencies>
</project> 
```

客户端 pom ：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <artifactId>cbpr</artifactId>
        <groupId>com.gm</groupId>
        <version>1.0-SNAPSHOT</version>
    </parent>
    <groupId>com.gm</groupId>
    <artifactId>cbpr-client</artifactId>

    <dependencies>
        <dependency>
            <groupId>com.gm</groupId>
            <artifactId>cbpr-common</artifactId>
            <version>1.0-SNAPSHOT</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
        <!-- MySQL database driver -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.9</version>
        </dependency>

        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>3.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-remoting</artifactId>
            <version>1.2.6</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>3.1.0.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.1.0.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.1.0.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>

        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi</artifactId>
            <version>3.2-FINAL</version>
        </dependency>
        <dependency>
            <groupId>com.jgoodies</groupId>
            <artifactId>looks</artifactId>
            <version>2.2.0</version>
        </dependency>

        <dependency>
            <groupId>com.toedter</groupId>
            <artifactId>jcalendar</artifactId>
            <version>1.3.2</version>
        </dependency>
        <dependency>
            <groupId>com.jgoodies</groupId>
            <artifactId>forms</artifactId>
            <version>1.3.0</version>
        </dependency>
        <dependency>
            <groupId>net.sf.jasperreports</groupId>
            <artifactId>jasperreports</artifactId>
            <version>3.7.2</version>
        </dependency>
        <dependency>
            <groupId>net.sourceforge.jexcelapi</groupId>
            <artifactId>jxl</artifactId>
            <version>2.6</version>
        </dependency>
        <dependency>
            <groupId>org.swinglabs</groupId>
            <artifactId>swingx</artifactId>
            <version>1.6.1</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.5.6</version>
        </dependency>
        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi</artifactId>
            <version>3.8</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.0.1.Final</version>
        </dependency>

        <dependency>
            <groupId>commons-httpclient</groupId>
            <artifactId>commons-httpclient</artifactId>
            <version>3.1</version>
        </dependency>

        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib-nodep</artifactId>
            <version>2.2</version>
        </dependency>

    </dependencies>

    <repositories>

        <repository>
            <id>java.net</id>
            <url>http://download.java.net/maven/2/</url>
        </repository>
        <repository>
            <id>jboss</id>
            <url>http://repository.jboss.com/</url>
        </repository>
    </repositories>
</project> 
```

**更新：当我在 Eclipse 中执行 Ctrl+Shift+T 时，我可以看到 MethodInterceptor 类：**但仍然不知道为什么我会收到错误消息。 ![在此处输入图像描述](../Images/a5337d3df55aba98924eb867832e22a8.png)

# csv - 在 hadoop 应用程序中读取和写入 CSV 文件

> ID：10880738
> 
> 赞同：3
> 
> 时间：2012-06-04T11:47:44.500
> 
> 标签：csv, hadoop, file-io, mapreduce

我需要处理自定义 csv 文件作为输入并将 csv 文件写回 HDFS。我可以直接在真正发生的地图减少类中执行此操作吗？

为了处理我的 csv 文件，我使用的是 opencsv 库。我看过一些教程，他们使用 inputformat 和 outputformat 标志来指定处理用户定义格式的 java 类。有人可以就如何使用 csv 文件提供建议吗？

我想坚持使用 hadoop 提供的功能，否则我自己实现的输入和输出格式可能会使我的处理速度变慢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T12:06:07.770

问题是您是否需要多行 csv。
如果您不需要它 - 您可以使用 vanilla TextInputFormat 和 TextOutputFormat 并在映射器中使用 opencsv 来解析行。对于输出 TextOutputFormat 也很好
如果您需要多行 - 您必须做一些技巧来组装逻辑记录。您可以为它创建自己的输入格式，或者在映射器中进行。

# asp.net - ASP.NET 如何决定何时从缓存中删除项目？

> ID：10880739
> 
> 赞同：1
> 
> 时间：2012-06-04T11:47:49.303
> 
> 标签：asp.net, caching

编辑：这不是关于如何以编程方式设置到期的问题。我完全精通绝对、滑动和依赖过期。

当一个项目存储在 ASP.NET 缓存中时，ASP.NET 是否使用某种已知算法来确定何时删除该项目？

我的意思不是它是否已失效（例如通过使用 SqlCacheDependency 通知），而是某些元素被加载和缓存，然后在数小时或数天内没有被触摸/读取......甚至几分钟但在服务器上高速缓存的需求不断增加...是否有一些关于 IIS 或 ASP.NET 如何决定何时清除空闲数据的已发布信息？

我问是因为我的老板认为也许我们可以超越 IIS，并强制每晚将数据预加载到我们*认为*可能需要的缓存中。我认为这是徒劳的努力，可能会使我们与应用程序的真正需求竞争——所以我正在寻找一些可以验证或反驳我的想法的硬材料。

蒂亚克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:57:41.563

必须不时清理缓存，以确保有地方存储新项目。当项目的有效时间到期或依赖关系发生变化时，也可以从缓存中删除数据。依赖关系可以是例如数据库 - 然后当数据库中有一些更改时，依赖于该数据库的项目将从缓存中删除。

有两种机制可以清除缓存中存储的数据：

清理 - 当缓存中没有足够的可用空间时，ASP.NET 会查找最近未使用的项目和优先级较低的项目。然后它删除选定的项目并将新项目存储在缓存中。

过期 - 有效时间已过的数据也将被删除。过期时间可以是绝对的 - 当数据在特定时间段内有效时，当时间总是从最后一次使用开始计算时，它们也可以称为“滑动”

# haskell - Haskell 的计算机视觉库

> ID：10880740
> 
> 赞同：7
> 
> 时间：2012-06-04T11:47:51.920
> 
> 标签：haskell, computer-vision

我正在为 Haskell 寻找计算机视觉库（或只是库的包装器）。

我尝试过[CV](http://hackage.haskell.org/package/CV)，但由于未定义对 `cvExtractMSER' 的引用而无法编译（OpenCV 版本是 2.4.0，并且在此版本中[删除](http://upstream-tracker.org/compat_reports/opencv/2.3.1_to_2.4.0/abi_compat_report.html)了 cvExtractMSER ）。

那么还有其他选择吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T11:53:52.473

*   [HOpenCV](http://hackage.haskell.org/package/HOpenCV)或[CV](http://hackage.haskell.org/package/CV)是您最好的选择；也许您可以修补库以支持 OpenCV 2.4？
*   其他与 OpenCV 的绑定：例如[easyVision](https://github.com/albertoruiz/easyVision)

# optimization - GLSL 编译器优化跨函数的冗余分配

> ID：10880742
> 
> 赞同：2
> 
> 时间：2012-06-04T11:48:05.520
> 
> 标签：optimization, compiler-construction, glsl, webgl

我读过 GLSL（特别是 v1.0.17：我的应用程序在 WebGL 下运行）编译器将优化掉冗余分配，例如：

```
gl_FragCoord = ProjectionMatrix * ModelViewMatrix * VertexPosition;
. . .
gl_FragCoord = ProjectionMatrix * ModelViewMatrix * VertexPosition; 
```

编译器是否也足够聪明，可以跨函数调用执行相同的优化？例如：

```
void doSomething1(void) {
  . . .
  gl_FragCoord = ProjectionMatrix * ModelViewMatrix * VertexPosition;
}

void doSomething2(void) {
  . . .
  gl_FragCoord = ProjectionMatrix * ModelViewMatrix * VertexPosition;
}

void main(void) {
  doSomething1();
  doSomething2();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T21:17:48.527

我从 AMD 下载了[GPU ShaderAnalyzer](https://gpuopen.com/archive/gpu-shaderanalyzer/)并将以下 GLSL 程序输入其中：

```
uniform mat4 ModelViewMatrix;
attribute vec4 VertexPosition;

void doSomething1(void) {
  gl_Position = ModelViewMatrix * VertexPosition;
}

void doSomething2(void) {
  gl_Position = ModelViewMatrix * VertexPosition;
}

void main(void) {
  doSomething1();
  doSomething2();
} 
```

这在从 Radeon HD 2400 到 Radeon HD 6970 的每张卡上产生了以下反汇编（或等效）：

```
; --------  Disassembly --------------------
00 CALL_FS NO_BARRIER 
01 ALU: ADDR(32) CNT(16) KCACHE0(CB0:0-15) 
      0  x: MUL         ____,  R1.w,  KC0[3].w      
         y: MUL         ____,  R1.w,  KC0[3].z      
         z: MUL         ____,  R1.w,  KC0[3].y      
         w: MUL         ____,  R1.w,  KC0[3].x      
      1  x: MULADD      R127.x,  R1.z,  KC0[2].w,  PV0.x      
         y: MULADD      R127.y,  R1.z,  KC0[2].z,  PV0.y      
         z: MULADD      R127.z,  R1.z,  KC0[2].y,  PV0.z      
         w: MULADD      R127.w,  R1.z,  KC0[2].x,  PV0.w      
      2  x: MULADD      R127.x,  R1.y,  KC0[1].w,  PV1.x      
         y: MULADD      R127.y,  R1.y,  KC0[1].z,  PV1.y      
         z: MULADD      R127.z,  R1.y,  KC0[1].y,  PV1.z      
         w: MULADD      R127.w,  R1.y,  KC0[1].x,  PV1.w      
      3  x: MULADD      R1.x,  R1.x,  KC0[0].x,  PV2.w      
         y: MULADD      R1.y,  R1.x,  KC0[0].y,  PV2.z      
         z: MULADD      R1.z,  R1.x,  KC0[0].z,  PV2.y      
         w: MULADD      R1.w,  R1.x,  KC0[0].w,  PV2.x      
02 EXP_DONE: POS0, R1
03 EXP_DONE: PARAM0, R0.____
04 ALU: ADDR(48) CNT(1) 
      4  x: NOP         ____      
05 NOP NO_BARRIER 
END_OF_PROGRAM 
```

然后我在方法中注释掉了`doSomething2()`函数及其调用`main`。结果完全相同：AMD 工具中的每个着色器都优化了冗余数学。所以这个问题的答案是**肯定的：在一般情况下，GLSL 编译器将足够聪明地执行这种优化**，@nicol-bolas 在他的评论中指出的警告：编译器优化特定于每个编译器，并且有没有 100% 保证这对所有编译器都是正确的。当然，最安全的选择是尽可能自己执行此类优化——但很高兴知道，无论出于何种原因，您都无法做到这一点。

更新：我在 Cg（NVIDIA 的编译器之一）下编译了相同的程序，有和没有注释掉第二个函数调用，在这两种情况下它都产生了以下结果：

```
mul r0, v0.y, c1
mad r0, v0.x, c0, r0
mad r0, v0.z, c2, r0
mad oPos, v0.w, c3, r0 
```

所以是的，NVIDIA 也对其进行了优化——或者至少，Cg 编译器做了。我[发现](http://lwjgl.org/forum/index.php?PHPSESSID=e7ru3n60ofs44pkdvgk8922fn5&topic=2967.msg16482#msg16482)Cg 编译的代码可以在 Intel GPU 上运行的说法，但这超出了我的专业范围，所以就这样吧。

如果有人想为此添加测试用例，请随意，但在这一点上，我觉得这个问题已经得到了适当的回答。

# iphone - 在选择特定单元格时从一个表格视图导航到另一个表格视图

> ID：10880750
> 
> 赞同：1
> 
> 时间：2012-06-04T11:49:00.530
> 
> 标签：iphone, uitableview

我有一个基于视图的应用程序，它包含以下文件

1.  有一个按钮的主视图控制器

2.  显示视图控制器，它将以表格的形式显示一组国家

3.  状态视图控制器将再次以表格的形式显示在第二步中选择的国家的一组状态

它是*按钮 --> countries(tableview)*并在选择一个单元格后*--> states(tableview)*。

好吧，一切正常，除了当我单击特定国家/地区时无法导航到这些国家/地区的州。例如。如果我选择 AUS，那么我不会得到 AUS 的状态。

代码如下。

### 有一个按钮的主视图控制器：

.h 文件

```
 { 
     IBOutlet UIButton *btn;
    }
    -(IBAction)click; 
```

.m 文件

```
 -(IBAction)click
        {

            display *dis=[[display alloc]initWithNibName:@"display"bundle:nil];
            [self presentModalViewController:dis animated:YES];

        } 
```

### 显示视图控制器

.h 文件

```
 @interface display : UITableViewController
        {
            NSArray *countries;
        }
        @property(nonatomic,retain)NSArray *countries;

        @end 
```

display.m 文件

```
 - (void)viewDidLoad {
                   NSArray *count=[[NSArray alloc] initWithObjects:@"India",@"USA",@"UK",@"AUS",@"SA",@"PAK",@"BANGLADESH",nil];
                    self.countries=count;
                [count release];
                self.countries=count;
                    self.title=@"Select a Country";
                    [super viewDidLoad];

                }

                - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
                    // Return the number of sections.
                    return 1;
                }

                - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
                    // Return the number of rows in the section.
                    return [countries count];
                }

                // Customize the appearance of table view cells.
                - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

                    static NSString *CellIdentifier = @"Cell";

                    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
                    if (cell == nil) {
                        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
                    }

                    // Configure the cell...
                    //countries=
                    cell.textLabel.text=[countries objectAtIndex:indexPath.row];
                    return cell;
                }

                - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
                    // Navigation logic may go here. Create and push another view controller.
                    //UITableViewCell *thiscell=[tableView cellForRowAtIndexPath:indexPath];
                    if(indexPath.row==0)
                    {   
                     states *detailViewController = [[states alloc] initWithNibName:@"states" bundle:nil];
                     // ...
                     // Pass the selected object to the new view controller.
                        //detailViewController.indexPath=self.indexPath;
                        //self.dis.indexValue=indexPath;
                     [self.navigationController pushViewController:detailViewController  animated:YES];
                        //detailViewController.indexPath=self.indexPath;
                        [self presentModalViewController:detailViewController animated:YES];

                     [detailViewController release];
                    }
                    if(indexPath.row==1)
                    {
                        states *detailViewController = [[states alloc] initWithNibName:@"states" bundle:nil];
                        // ...
                        // Pass the selected object to the new view controller.
                        [self.navigationController pushViewController:detailViewController animated:YES];
                        [self presentModalViewController:detailViewController animated:YES];

                        UITableViewCell *cell=[self.tableView cellForRowAtIndexPath:indexPath];
                        [detailViewController release]; 

                    }

                    [tableView deselectRowAtIndexPath:indexPath animated:NO];
                } 
```

### 这里的statesenter代码控制器

states.h 文件

```
 @interface states : UITableViewController {
                NSArray *state;
                NSArray *state1;
                NSArray *state2;
                //NSIndexPath *indexPath;
            }
            @property(nonatomic,retain) NSArray *state;
            @property(nonatomic,retain) NSArray *state1;
            @property(nonatomic,retain) NSArray *state2;
            //@property(nonatomic,retain)display *dis;
            //@property(nonatomic,retain)NSIndexPath *indexPath;
            @end 
```

states.m 文件

```
 - (void)viewDidLoad {

                        NSArray *sta=[[NSArray alloc]initWithObjects:@"goa",@"ap",@"karnataka",nil];
                        self.state=sta;
                        [sta release];
                        self.state=sta;
                        [super viewDidLoad];

                            NSArray *sta1=[[NSArray alloc]initWithObjects:@"Los Angeles",@"California",@"Las Vegas",nil];
                            self.state1=sta1;
                            [sta release];
                            self.state1=sta1;
                            [super viewDidLoad];

                            NSArray *sta2=[[NSArray alloc]initWithObjects:@"Southhampton",@"Nottingham",@"London",nil];
                            self.state2=sta2;
                            [sta release];
                            self.state2=sta2;
                            [super viewDidLoad];

                        // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
                        // self.navigationItem.rightBarButtonItem = self.editButtonItem;
                    }

                    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
                        // Return the number of rows in the section.
                        return [self.state count];
                    }

                    // Customize the appearance of table view cells.
                    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

                        static NSString *CellIdentifier = @"Cell";

                        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
                        if (cell == nil) {
                            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
                        }

                        // Configure the cell...
                        if(indexPath.row==0)
                        {
                        cell.textLabel.text=[state objectAtIndex:indexPath.row];
                        }
                        else if(indexPath.row==1)
                        {
                            cell.textLabel.text=[state1 objectAtIndex:indexPath.row];

                        }
                        return cell;
                    } 
```

因此，当我运行此代码时，它运行良好，但每当我选择任何国家时，我都会得到南安普顿和加利福尼亚。

我不想为所有状态创建多个视图控制器，这样做是愚蠢的。所以我创建了一个数组并使用 states 视图控制器来显示所选国家/地区的不同 states 数组。

我应该如何将`indexpath`国家的值传递给状态视图控制器，以便我可以访问各个国家的所有相应状态？（注意：我还没有为状态创建所有数组，只是创建了两个来检查。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:27:53.277

首先为什么要在显示视图控制器的 didSelectRowAtIndexPath 中比较 indexPath？你也可以这样写代码。如果您只想传递 indexPath：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    //UITableViewCell *thiscell=[tableView cellForRowAtIndexPath:indexPath];
    states *detailViewController = [[states alloc] initWithNibName:@"states" bundle:nil];
    //Pass the selected object to the new view controller.
    detailViewController.m_SelectedIndexPath=indexPath;
    [self.navigationController pushViewController:detailViewController  animated:YES];        [self presentModalViewController:detailViewController animated:YES];
    [detailViewController release];

[tableView deselectRowAtIndexPath:indexPath animated:NO];
 } 
```

在 states.m, cellForRowAtIndexPath 中，您可以像这样检查 m_SelectedIndexPath：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
     if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];}

 // Configure the cell...
 if(m_SelectedIndexPath == 0)
 {
     cell.textLabel.text=[state objectAtIndex:indexPath.row];
 }
  else if(m_SelectedIndexPath==1)
 {
     cell.textLabel.text=[state1 objectAtIndex:indexPath.row];
 }
  return cell;
 } 
```

您正在推动的第二件事以及呈现 tableview.You 应该推动或呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:24:18.243

嘿，只需在国家视图的 didSelectRowAtIndexPath 委托方法中使用 stateView 的 setTableArray ...

setTableArray 方法如下：

```
-(void)setTableArray:(NSMutableArray *)arr
{
    arrData = arr;
    [arrData retain];
    //[tblView reloadData];
} 
```

这里 arrData 是 MutableArray ....

当您当时从didSelectRowAtIndexPath 推送 stateView 时，只需像下面这样设置 aaray ...

```
[detailViewController setTableArray:yourArray]; 
```

在这里，您只需获取具有选定国家/地区索引的数据并传递该数组 insted yourArray ...希望，这对您有帮助... :)

# export-to-excel - 将超过 100000 行导出到 Excel - Infragistics Excel 导出器

> ID：10880753
> 
> 赞同：2
> 
> 时间：2012-06-04T11:49:06.573
> 
> 标签：export-to-excel, infragistics, ultrawebgrid

我正在使用`ultrawebgrid v11.1`xml`LoadOnDemand`并启用分页以加载超过 100,000 条记录。

我在事件中编写`BindGrid()`了功能。`InitializeDataSource`

在每个回发（保存、ExcelExport、Load..）和/或部分回发（页面导航、排序、过滤..）中，我从数据库中获取超过 100,000 条记录并设置网格的数据源。

**问题一：**

每次从数据库中查询大量数据都需要更多时间。有没有办法只查询一次`on load`数据，然后在修改网格中的数据时查询数据。

**问题 2：**

我正在使用`UltrawebgridExcelExporter v11.1`. 单击导出按钮后，Grid 的数据源在内部初始化`InitializeDataSource`，从数据库中获取超过 100,000 条记录。

我必须知道，当`LoadOnDemand`设置xml时，每次我导出到excel时，我都应该设置

```
AllowPaging = False  

and

LoadOndemand = LoadOnDemand.NotSet 
```

然后绑定网格并导出。

从数据库中获取大量数据需要很长时间，而绑定则需要更长的时间。绑定后，导出到excel时抛出`'System Out of Memory'`异常。

**问题 3：**

即使解决了上述问题，我也不确定是否能够在 Excel 97-2003 中导出超过 65535 行？

如何使用 xml 优化网格的所有操作的性能`LoadOnDemand`。

代码：

```
Protected Sub UWGrid_InitializeDataSource(ByVal sender As Object, ByVal e As Infragistics.WebUI.UltraWebGrid.UltraGridEventArgs) Handles UWGrid.InitializeDataSource

UWGrid.DataSource = dsData 'record set with 100000 rows.

End Sub

Protected Sub btnExportToExcel_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnExportToExcel.Click

UWGrid.DisplayLayout.Pager.AllowPaging = False

UWGrid.DisplayLayout.LoadOnDemand = LoadOnDemand.NotSet

UWGrid.DataBind()

'Dim wBook As New Excel.Workbook(Excel.WorkbookFormat.Excel2007)

UltraWebGridExcelExporter1.DownloadName = "ExportFile.xls"

UltraWebGridExcelExporter1.Export(UWGrid)

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T15:42:25.940

要回答您的问题 3 - 65535 行不是 Infragistics 限制，它是 Excel 97/2003 格式的限制。解决它的唯一方法是以 Excel 2007+ 格式 (XLSX) 导出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:49:23.603

Infragistics 的答复是将记录拆分到多个工作簿中。因为存在不允许超过 65535 行的限制。

虽然他们的新 WebGrids 解决了这个限制，但我通过导出到 CSV 文件解决了我的问题。

所以这个问题没有明确的答案，只能解决:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-20T18:05:07.133

```
private void Form1_Shown(object sender, EventArgs e)
    {
        DataTable dt = new DataTable();
        dt.Columns.Add("Serial number");
        dt.Columns.Add("Name");
        dt.Columns.Add("Values");
        for (int i = 0; i < 500; i++)
        {
            dt.Columns.Add("Column" + i.ToString());
        }
        for (int i = 0; i < 100000; i++)
        {
            dt.Rows.Add(i.ToString(), "Jipson PJ", (i + 100).ToString());
        }

        ultraGrid1.DataSource = dt;
    }

    private void button1_Click(object sender, EventArgs e)
    {

        Workbook w = new Infragistics.Excel.Workbook();

        //w.CurrentFormat = WorkbookFormat.Excel2007;
        w.Worksheets.Add(this.Text);
        this.ultraGridExcelExporter1.FileLimitBehaviour = Infragistics.Win.UltraWinGrid.ExcelExport.FileLimitBehaviour.TruncateData;

        this.ultraGridExcelExporter1.Export(this.ultraGrid1, w.Worksheets[this.Text]);

        w.Save("C://Users//jipso//Documents//excel//1.xls"); // Save as .xlsx file name.
    } 
```

# matlab - 如何从matlab中的.txt文件中读取结构

> ID：10880754
> 
> 赞同：2
> 
> 时间：2012-06-04T11:49:12.830
> 
> 标签：matlab, file-io, struct

我想在以下方面向您寻求帮助：我有几个结构保存在 .txt 文件中，我想在 matlab 中读取它们并保存为方便的类型，以便稍后将它们加载到 .mat 文件中。我一直在互联网上搜索以找到解决方案，但我得到的是关于阅读列、特定字符串的信息......但我无法将它结合起来得到我想要的答案。任何帮助表示赞赏！非常感谢！

这是我正在尝试处理的代码：

```
struct
studentname: joe
notes:
n1 = 1.3
n2 = 2.0
average =1.7
endstruct

struct
studentname : marc
notes:
n1 = 2.3 %commentary, to be ommitted while reading from the file
n2 = 3.0
average = 2.7
endstruct 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:46:24.240

这是一个完整的解决方案（类似于[@Marc](https://stackoverflow.com/a/10881725/97160)描述的）：

```
%# read lines
fid = fopen('file.txt','rt');
C = textscan(fid, '%s', 'Delimiter',''); C = C{1};
fclose(fid);

%# start/end of each structure
startIdx = find(ismember(C, 'struct'));
endIdx = find(ismember(C, 'endstruct'));

%# array of strucutres
N = numel(startIdx);
arr = struct('studentname','', 'notes','', 'n1',0, 'n2',0, 'average',0);
arr = repmat(arr,[N 1]);

%# parse and store each structure in the array
for i=1:numel(startIdx)
    %# parse key/value of struct
    s = C(startIdx(i)+1:endIdx(i)-1);
    s = regexp(s, '(\w+)\s*[:=]\s*([^%$]*)(?:%[^$]*)?', 'tokens', 'once');
    s = vertcat(s{:});

    %# try to parse as numbers
    v = str2double(s(:,2));
    s(~isnan(v),2) = num2cell(v(~isnan(v)));

    %# store: struct.key = value
    for j=1:size(s,1)
        arr(i).(s{j,1}) = s{j,2};
    end
end 
```

结果：

```
>> arr(1)
ans = 
    studentname: 'joe'
          notes: ''
             n1: 1.3
             n2: 2
        average: 1.7
>> arr(2)
ans = 
    studentname: 'marc'
          notes: ''
             n1: 2.3
             n2: 3
        average: 2.7 
```

当然这是假设文件格式正确（struct/endstruct 块，所有结构都包含相同的字段，并且字段类型是一致的）

* * *

### 解释：

代码首先将文件行读入一个元胞数组。然后我们寻找 struct/endstruct 结构的开始/结束位置。我们用一些默认值初始化一个空的结构数组，并遍历文件解析每个块，并将该信息存储在一个结构中。

接下来我们使用[正则](http://www.mathworks.com/help/techdoc/matlab_prog/f0-42649.html) [表达式](http://en.wikipedia.org/wiki/Regular_expression)来检测以下模式：

```
some_key_name = some value  % optional comment here 
```

我们允许空间中的一些变化，并且也接受两者之间的任何一个`=`或`:`作为字符。我们在正则表达式中使用捕获标记来恢复上述每个组件，并将它们存储在一个临时元胞数组中。此时，所有内容都存储为字符串。

现在实际值可以是数字或字符串。我们最初尝试使用 STR2DOUBLE 将它们解析为数字。`NaN`如果失败，此函数将返回，我们使用它仅更改成功转换的部分。

最后有了上面的结果，我们使用动态的字段名将每个值存储在结构体数组中对应的键中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T12:57:54.553

不幸的是，您基本上将不得不自己动手。您可以从 开始[`fileread()`](http://www.mathworks.com/help/techdoc/ref/fileread.html)，它将整个文件读入一个字符串，然后逐行读取，可能使用[`regexp()`](http://www.mathworks.com/help/techdoc/ref/regexp.html)or[`strfind()`](http://www.mathworks.com/help/techdoc/ref/strfind.html)解析每一行，最后使用[`struct()`](http://www.mathworks.com/help/techdoc/ref/struct.html)or[`dynamic field access`](http://www.mathworks.com/help/techdoc/matlab_prog/br1v5cc-1.html)来构造您的结构。

未经测试，不完整，但粗略的想法（假设文件格式正确 - 您需要添加检查）：

```
%read file
wholeFile = fileread(myfilename);

%find starts & ends:
starts = strfind(wholeFile, 'struct');
ends = strfind(wholeFile, 'endstruct');

For i = 1:numel(starts);
    rawStruct = wholeFile(starts(i)+7, ends(i)-2);
    %parse line by line getting field names using the string "rawStruct"
    out(i).(fieldname) = content;
end 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-04T12:28:53.880

您可以尝试使用 Matlab 文件交换中的[XML_io_tools](http://www.mathworks.com/matlabcentral/fileexchange/12907-xmliotools)。它可以将 XML 文件解析为 matlab 结构，反之亦然。

# android - 为什么我的外部数据库在 Android 4 中无法访问？

> ID：10880755
> 
> 赞同：1
> 
> 时间：2012-06-04T11:49:16.253
> 
> 标签：android

```
 @Override
    public SQLiteDatabase openOrCreateDatabase(String name, int mode, CursorFactory factory){
         File externalFilesDir = Environment.getExternalStorageDirectory();
         if(externalFilesDir == null) 
                return null;
         File dbFile = new File(externalFilesDir, SQLiteHelper.DATABASE_NAME);
         return SQLiteDatabase.openDatabase(dbFile.getAbsolutePath(), null, SQLiteDatabase.CREATE_IF_NECESSARY);
    } 
```

我使用上面的代码将我的 db 文件写入外部存储。所以它保存在`/mnt/sdcard/`. 当我在 Android 2.3.5 中尝试它时，它可以工作。但是对于 Android 4，它不起作用。但它仍然没有给我任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:00:04.287

这是寻找相同事物的其他人的答案。

```
 // ======= This will allow to create the DB in /mnt/sdcard/
    // External folder DB access for Android 4+
       @Override
       public SQLiteDatabase openOrCreateDatabase(String name, int mode,CursorFactory factory, DatabaseErrorHandler errorHandler) {
             File externalFilesDir = Environment.getExternalStorageDirectory();
             if(externalFilesDir == null) 
                    return null;
             File dbFile = new File(externalFilesDir, SQLiteHelper.DATABASE_NAME);
             return super.openOrCreateDatabase(dbFile.getAbsolutePath(), Context.MODE_WORLD_WRITEABLE, null, errorHandler);
       }

       // External folder DB access for Android 2.3
    @Override
    public SQLiteDatabase openOrCreateDatabase(String name, int mode, CursorFactory factory){
         File externalFilesDir = Environment.getExternalStorageDirectory();
         if(externalFilesDir == null) 
                return null;
         File dbFile = new File(externalFilesDir, SQLiteHelper.DATABASE_NAME);
         return SQLiteDatabase.openDatabase(dbFile.getAbsolutePath(), null, SQLiteDatabase.CREATE_IF_NECESSARY);
    } 
```

# android - 如何在 android 中配置 java.util.logging.logger 以使用放置在 sdcard 上的日志记录属性文件？

> ID：10880756
> 
> 赞同：5
> 
> 时间：2012-06-04T11:49:16.940
> 
> 标签：android, logging, properties, preferences

我一直在尝试使用 java.util.logging.logger 将内容记录到 sdcard 上的文件中。现在，我希望记录器使用我将在 sdcard 上提供的记录配置/属性文件。

我一直在尝试的一种方法是：-

我一直在尝试使用 logmanager 和 java.util.prefs.preferences，但我得到了**BackingStoreException-->AccessPermission Exception**错误消息，即**str/prefs.xml**表示的 .java/.userprefs/path未找到.

```
private void setLoggingProperties(File logProperties) throws Exception {
    try {
    if(logProperties!=null && logProperties.isFile() && logProperties.exists()) {
        String str = logProperties.getAbsolutePath();
        MyLogger.v(TAG,"Log Properties file path: " + str);
        if(str!=null && str.length()>=0) {
            Preferences logPropPref = Preferences.userNodeForPackage(SSCService.class);

            if(logPropPref!=null) {
                String path = logPropPref.get(LOG_CONFIG_FILE_KEY,"");
                if(path.equals(str)) {
                    SirfLogger.v(TAG,"No need to set config for log");
                    return;
                }
                MyLogger.v(TAG,"Setting log properties: " + str);
                logPropPref.put(LOG_CONFIG_FILE_KEY, str);
                logPropPref.flush();
            }
            LogManager lManager = LogManager.getLogManager();
            if(lManager!=null) {
                lManager.readConfiguration();
            }

        }   

    } 
    } catch(Exception ex) {
        MyLogger.v(TAG, "Exception setting log properties: " + ex.toString() + " , ignoring" );
    }

} 
```

有人可以提供一些见解吗？

-罗宾

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T05:55:29.373

在浏览了可用的文档并进行了一些尝试和试验之后。这是它的工作原理：-

```
 static final String LOGGER_NAME = "com.robin.mylogger"
        LogManager lManager = LogManager.getLogManager();
        FileInputStream is = new FileInputStream(logProperties);
        if(lManager!=null) {
            lManager.readConfiguration(is);

        }
        mLoggerInstance = Logger.getLogger(LOGGER_NAME);
         if(mLoggerInstance!=null)
             LogManager.getLogManager().addLogger(mLoggerInstance); 
```

日志记录属性

```
 ############################################################
               #    Default Logging Configuration File
#
# You can use a different file by specifying a filename
# with the java.util.logging.config.file system property.  
# For example java -Djava.util.logging.config.file=myfile
############################################################

############################################################
#   Global properties
############################################################

# "handlers" specifies a comma separated list of log Handler 
# classes.  These handlers will be installed during VM startup.
# Note that these classes must be on the system classpath.
# By default we only configure a ConsoleHandler, which will only
# show messages at the INFO and above levels.
#handlers= java.util.logging.ConsoleHandler

# To also add the FileHandler, use the following line instead.
handlers= java.util.logging.FileHandler, com.android.internal.logging.AndroidHandler

# Default global logging level.
# This specifies which kinds of events are logged across
# all loggers.  For any given facility this global level
# can be overriden by a facility specific level
# Note that the ConsoleHandler also has a separate level
# setting to limit messages printed to the console.
.level= FINEST

############################################################
# Handler specific properties.
# Describes specific configuration info for Handlers.
############################################################

# default file output is in user's home directory.
java.util.logging.FileHandler.pattern = /mnt/sdcard/csr/logs/test.log
java.util.logging.FileHandler.limit = 5000000
java.util.logging.FileHandler.count = 1
java.util.logging.FileHandler.level = FINEST
java.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter

# Limit the message that are printed on the console to INFO and above.
#java.util.logging.ConsoleHandler.level = FINEST
#java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

com.android.internal.logging.AndroidHandler.level = FINEST
com.android.internal.logging.AndroidHandler.formatter = java.util.logging.SimpleFormatter

############################################################
# Facility specific properties.
# Provides extra control for each logger.
############################################################

# For example, set the com.xyz.foo logger to only log SEVERE
# messages:
#com.robin.mylogger.level = FINEST 
```

请注意，这里的 logging.properties 中使用了两个处理程序。一个是filehandler，对文件进行登录，另一个是com.android.internal.logging.AndroidHandler（负责在logcat中正确显示日志）。如果您还想查看 logcat 中的日志，则需要添加 com.android.internal.logging.AndroidHandler。如果您不在日志记录属性中添加此处理程序，则所有日志都将作为 sys.err（警告级别）在 logcat 上抛出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:53:07.530

你可以看看@ [android-logging-log4j](http://code.google.com/p/android-logging-log4j/)

# php - 如何获取动态扩展的页面的html内容

> ID：10880759
> 
> 赞同：0
> 
> 时间：2012-06-04T11:49:28.180
> 
> 标签：php

我能够使用 php 获取普通页面的 html 内容。但我打算在您向下滚动时获取动态增长的页面内容（如在 facebook 中）。我应该如何获得这样一个页面的内容？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:55:58.640

我假设 Facebook 等使用一种惰性获取形式，这意味着它们只批量获取 X 数量的帖子。如果内容未打印到该页面，您将无法抓取该网页。获得该内容的唯一方法是与数据库通信、使用可用的 API 或使用与语言相关的函数，例如：`http://url/page.ext?data=X&user=Y`或最后使用 javascript 事件。

# sencha-touch - 如何使用 sencha touch2 在单个标签中显示四个标签内容

> ID：10880760
> 
> 赞同：0
> 
> 时间：2012-06-04T11:49:31.113
> 
> 标签：sencha-touch, sencha-touch-2

我正在使用煎茶 touch2。我想在一个标签中显示四个标签内容，如下代码所示。根据要求，我只有一个标签，为此标签我需要添加四个标签内容。所以在这个内容中我使用标签来分割每个标签。生成apk/ipa文件后。在 ipad 中它会很好，它会根据我们的要求一个接一个地显示标签。但在 android 手机中，它不会拆分内容，文本是连续的，不会断线。有人可以告诉我如何解决这个问题。谢谢

```
Ext.define("MyPath", {
    extend: 'Ext.Panel',
    xtype: 'SpecificationView',
    requires: ['Ext.Label'],
    config: {

        title: 'Specification',
        iconCls: 'star',
        scrollable: true,
        xtype: 'dataview',
        layout: {
            align: 'center',
            pack: 'center'
        },
        items: [                         
            {
                margin: '10',
                xtype: 'label',
                html: '<label><b>Flooring</b></label></br><label>Combination of Granite/Vitrified tiles in common areas. Vitrified tiles in foyer, living, dining and kitchen. Ceramic tiles in bedroom, balcony and utility.</label></br></br><label ><b>Doors & Windows</b></label></br><label>Apartment main door in teakwood frame with polished designer shutters. with mosquito mesh and safety grill</label>'
            }
            ]
    } 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:05:55.197

嘿@user1177921 请试试这个，

```
html: '<label><b>Flooring</b></label><br />' + 
      '<label>Combination of Granite/Vitrified tiles in common areas. Vitrified tiles in foyer, living, dining and kitchen. Ceramic tiles in bedroom, balcony and utility.</label><br />' + 
      '<label ><b>Doors & Windows</b></label><br />' + 
      '<label>Apartment main door in teakwood frame with polished designer shutters. with mosquito mesh and safety grill</label>' 
```

我希望能帮助你。

# java - 我如何在 JAVA 中实现 http 连接池

> ID：10880763
> 
> 赞同：0
> 
> 时间：2012-06-04T11:49:42.830
> 
> 标签：java, httpconnection

我需要使用多线程环境来实现 HTTP 连接池。我正在使用下面提到的代码。提到的 serviceURL 大约需要 1-3 秒才能响应，但是我每秒从客户端获得大约 30-50 次点击。我需要点击具有不同属性的单个 URL。所以我不清楚，我应该怎么做才能响应所有点击（30-40 点击/秒）。如果 HttpURLConnection 已经进行了连接池，那么多线程就是它的解决方案。

我尝试使用 HTTPClient 转换此程序，但不幸的是它无法正常工作。那么你能告诉我如何使用多线程环境将此代码转换为 HTTPClient。

```
package airtel.product.action;
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.security.KeyManagementException;
import java.security.KeyStore;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.UnrecoverableKeyException;
import java.security.cert.CertificateException;

import javax.net.ssl.HostnameVerifier;
import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.KeyManagerFactory;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSession;
import javax.net.ssl.SSLSocketFactory;
import javax.net.ssl.TrustManager;
import javax.net.ssl.TrustManagerFactory;

import org.apache.commons.codec.binary.Base64;

import java.util.logging.FileHandler;
import java.util.logging.Level;
import java.util.logging.LogManager;
import java.util.logging.Logger;
import java.util.logging.XMLFormatter;
import java.util.Properties;
import java.io.FileInputStream;
import java.io.IOException;

public class HTTPSClient {
    public static void main(String[] args) {
        try {
            doHttpsPost("9711296535", "0.5", "0.5");
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
    private static HttpsURLConnection getHTTPSConnection(String url) throws Exception{
        URL chargingUrl;

        HostnameVerifier hv = new HostnameVerifier(){
        public boolean verify(String urlHostName, SSLSession session) {
        System.out.println("Warning: URL Host: "+urlHostName+" vs. "+session.getPeerHost());
        return true;
        }
        };
        HttpsURLConnection.setDefaultHostnameVerifier(hv); 
        KeyStore ks;
        HttpsURLConnection urlc=null;
        //try {
            chargingUrl = new URL(url);
            ks = KeyStore.getInstance("JKS");
            ks.load(new FileInputStream("/vishnu/twss/keystore/KEYSTORE.jks"), "12345678".toCharArray());//Location of keystore c:\\SDPKeystore.dat,12345678
            KeyManagerFactory kmf = KeyManagerFactory.getInstance("SunX509");
            kmf.init(ks, "airtel@123".toCharArray()); //password is airtel@123
            TrustManager[] tm;
            TrustManagerFactory tmf = TrustManagerFactory.getInstance("SunX509");
            tmf.init(ks);
            tm = tmf.getTrustManagers();
            SSLContext sslContext = SSLContext.getInstance("SSL");
            sslContext.init(kmf.getKeyManagers(), tm, null);
            SSLSocketFactory sslSocketFactory =sslContext.getSocketFactory();
            urlc = (HttpsURLConnection) chargingUrl.openConnection();
            urlc.setSSLSocketFactory(sslSocketFactory); 
            //System.out.println("DoHttpPost(): Connection received");
            //System.out.println("DoHttpPost(): Setting UserName and Password");                        
            String usernamePassword = "vishnu" + ":" + "air@123";
            String encoding = null;

            byte[] encoded = Base64.encodeBase64(usernamePassword.getBytes());
            encoding = new String(encoded);

            urlc.setRequestProperty( "Authorization", "Basic " + encoding );
            urlc.setRequestMethod("POST");
            urlc.setUseCaches(false);
        return urlc;
    }

    public static HttpsURLConnection doHttpsPost(String msisdn, String actualPrice, String basePrice) throws MalformedURLException, Exception {

    System.out.println("dHTTPPost(): Start");
    String chargingServiceURL="https://10.5.45.111:6443/sdpchargingservice/http/charge";
    String strResponse = "";
    HttpsURLConnection urlc=getHTTPSConnection(chargingServiceURL);
    try{
        //get data from config file
        Properties prop = new Properties();
        prop.load(new FileInputStream("/vishnu/twss/config.properties"));

        System.out.println("HttpService :charge():Going to hit Charging Service..");
        Long currentMilis = System.currentTimeMillis();

        urlc.setRequestProperty("Keep-Alive", "300"); 
        urlc.setRequestProperty("Connection", "keep-alive"); 

        //set the keep aive in the system properties
        System.setProperty("http.keepAlive", "true");
        System.setProperty("http.maxConnections", "2000");

        urlc.setRequestMethod("POST");
        urlc.setRequestProperty("SOAPAction","");
        urlc.setRequestProperty("Content-Type","text/xml; charset=utf-8");
        urlc.setDoOutput(true);
        urlc.addRequestProperty("operation","debit");
        urlc.addRequestProperty("userId",msisdn); //CP to use his own msisdn
        urlc.addRequestProperty("contentId","Exam Results");
        urlc.addRequestProperty("itemName","Exam Results");
        urlc.addRequestProperty("contentDescription", "Exam Results"+currentMilis);
        urlc.addRequestProperty("contentMediaType","Exam Results");
        urlc.addRequestProperty("actualPrice",actualPrice);
        urlc.addRequestProperty("basePrice",basePrice);
        urlc.addRequestProperty("discountApplied","0");
        urlc.addRequestProperty("cpId","voicetap");
        urlc.addRequestProperty("eventType","Content Purchase");
        urlc.addRequestProperty("deliveryChannel","SMS");
        urlc.addRequestProperty("currency","INR");
        urlc.addRequestProperty("copyrightId","null");
        urlc.addRequestProperty("sMSkeyword","SMS");
        urlc.addRequestProperty("srcCode","606770");
        urlc.addRequestProperty("contentUrl","www.voicetap.com");
        urlc.addRequestProperty("copyrightDescription","Test Desc");
        System.out.println("going to hit service......");

       System.out.println(" urlc response  "+urlc.getResponseMessage());

       try{     
            System.out.println(urlc.getHeaderField("status"));
            String loggermsg = "MSISDN: "+prop.getProperty("userId") +
                    " Actualprice: "+prop.getProperty("actualPrice") +
                    " transactionId: "+urlc.getHeaderField("transactionId") +
                    " status: "+urlc.getHeaderField("status")+
                    " errorCode: "+urlc.getHeaderField("errorCode")+
                    " date: "+new java.util.Date();
          InputStreamReader isr = new InputStreamReader(urlc.getInputStream());
          BufferedReader in = new BufferedReader(isr);
          String inputLine;
          while ((inputLine = in.readLine()) != null){
            System.out.println(inputLine);
          } 
          in.close();
        }
        catch(Exception e){
            e.printStackTrace();
            System.out.println("Execption raised during parsing SOAP-response :::" + e.getMessage());
        }
    }
    catch (Exception ex) {
        ex.printStackTrace();
        System.out.println("Error "+ex);
    }
    return urlc;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:20:40.920

HttpURLConnection 已经做了连接池。除了避免调用 dispose() 之外，您无需对此做任何事情。

# html - 如何在表单中提供切换按钮？

> ID：10880768
> 
> 赞同：1
> 
> 时间：2012-06-04T11:50:42.220
> 
> 标签：html, css, forms

实际上，当我创建一个项目时，我可以通过单选按钮选择将它分配给一个工作组。我将能够为此选项提供[类似的切换按钮。](http://java.sun.com/products/jlf/ed2/book/HIG.Controls2.html)

Symfony2 中是否有选项或小部件可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-19T11:16:00.970

我认为您不需要 Symphony 特定的解决方案，因为这只能通过 CSS 完成。我写了一篇关于如何仅使用 CSS 自定义复选框和单选以及创建开/关切换开​​关的教程。也许这有帮助:) 在这里阅读：http: [//blog.felixhagspiel.de/index.php/posts/custom-inputs](http://blog.felixhagspiel.de/index.php/posts/custom-inputs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:37:16.673

I think you could stick with checkboxes to do something like this:

[Checkbox switches using jQuery](http://devgrow.com/iphone-style-switches/)

The iphone style is quite nice as well:

[iPhone style checkboxes](http://awardwinningfjords.com/2009/06/16/iphone-style-checkboxes.html)

# android - 广播接收器的 api 是什么

> ID：10880773
> 
> 赞同：0
> 
> 时间：2012-06-04T11:51:10.710
> 
> 标签：android

嗨，我是 Java 和 Android 的新手。过去几天我在 android 上进行开发。我经常听到的一些术语是 API。请有人解释一下 API 的含义。我在阅读一些网站时理解的是它是类和接口的集合。如果这是真的，那么当我们说广播接收器或活动的 API 是什么意思。

我的第二个问题是Android使用一些库来解析JSON。这个包是org.json。框架是什么？

希望有人能在这方面指导我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:08:09.890

应用程序编程接口 (API) 是由库和/或操作系统服务提供的一组例程、数据结构、对象类和/或协议，以支持应用程序的构建。

一个好的 API 可以通过提供所有的构建块来更容易地开发程序。然后，程序员将这些块放在一起。

要在我们的应用程序中获取[BrodcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)和[Activity](http://developer.android.com/reference/android/app/Activity.html)，我们需要扩展基类并实现所需的方法。

*   什么是[JSON 框架](http://www.mobileapplicationservices.com/json-framework.html)？
*   差异黑白[框架和库](https://stackoverflow.com/questions/148747/what-is-the-difference-between-a-framework-and-a-library)

# php - 继承和 PHP - 调用父母后的“this”是什么？

> ID：10880779
> 
> 赞同：0
> 
> 时间：2012-06-04T11:51:46.387
> 
> 标签：php, inheritance

我有这种情况：

```
class A extends B {
   public function test() {
       parent::test();
   }
}

class B extends someCompletelyOtherClass {
   public function test() {
       //what is the type of $this here?
   } 
} 
```

功能测试中 B 类中的 $this 是什么类型？甲还是乙？我试过它的A，我在想它的B？为什么是A？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:04:47.030

我不是 PHP 专家，但我认为这是有道理的。$this 应该指向 A 类型的实例化对象，即使该方法是在 B 类中定义的。

如果您创建 B 类的实例并直接调用它的测试方法，则 $this 应该指向 B 类型的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:57:38.940

问题是您正在`test()`静态调用，即在类上下文中。静态调用非静态函数是错误的（不幸的是，PHP 不强制执行此操作）。

你应该使用`$this->test()`，而不是`parent::test()`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-04T11:57:58.440

在 PHP 中，关键字“$this”用作类的自引用，您可以使用它来调用和使用类函数和变量。这是一个例子：

```
class ClassOne
{
    // this is a property of this class
    public $propertyOne;

    // When the ClassOne is instantiated, the first method called is
    // its constructor, which also is a method of the class
    public function __construct($argumentOne)
    {
        // this key word used here to assign
        // the argument to the class
        $this->propertyOne = $argumentOne;
    }

    // this is a method of the class
    function methodOne()
    {
        //this keyword also used here to use  the value of variable $var1
        return 'Method one print value for its '
             . ' property $propertyOne: ' . $this->propertyOne;
    }
} 
```

当您调用 parent::test() 时，您实际上调用了与 CLASS B 关联的测试函数，因为您是静态调用它。尝试调用它 $this->test() 你应该得到 A 而不是 B。

# c# - 对 xml 数据类型进行全文搜索

> ID：10880788
> 
> 赞同：0
> 
> 时间：2012-06-04T11:52:22.580
> 
> 标签：c#, asp.net, sql-server, xml, sql-server-2008

我正在开发一个应用程序，其中我正在使用第三方解析简历。该第三方以 xml 的形式向我返回响应。我将整个 xml 存储在单列中。每次节点数量都会不同，具体取决于提供的简历。

现在我的要求是对此 xml 数据类型列执行全文或普通搜索。我还需要获取候选人的名字、姓氏、电子邮件和其他一些重要信息。我的问题是如何在我不知道节点名称的这些列上执行搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:48:06.143

*xml 数据类型列仅存储 XML 文档和片段，并且只有 XML 过滤器用于文档。因此，类型列是不必要的。在 xml 列上，全文索引索引 XML 元素的内容，但忽略 XML 标记。属性值是全文索引的，除非它们是数值。元素标签用作标记边界。支持格式良好的 XML 或 HTML 文档和包含多种语言的片段。有关查询 xml 列的详细信息，请参阅 XML 列上的全文索引。 [http://msdn.microsoft.com/en-us/library/bb522491.aspx](http://msdn.microsoft.com/en-us/library/bb522491.aspx)*

此外，您可以使用此 SQL (UDF) 函数来获取 xml 节点名称

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE FUNCTION [dbo].[XMLTable](@x XML)  
RETURNS TABLE 
AS RETURN 
WITH cte AS (  
SELECT 
        1 AS lvl,  
        x.value('local-name(.)','NVARCHAR(MAX)') AS Name,  
        CAST(NULL AS NVARCHAR(MAX)) AS ParentName, 
        CAST(1 AS INT) AS ParentPosition, 
        CAST(N'Element' AS NVARCHAR(20)) AS NodeType,  
        x.value('local-name(.)','NVARCHAR(MAX)') AS FullPath,  
        x.value('local-name(.)','NVARCHAR(MAX)')  
        + N'[' 
        + CAST(ROW_NUMBER() OVER(ORDER BY (SELECT 1)) AS NVARCHAR)  
        + N']' AS XPath,  
        ROW_NUMBER() OVER(ORDER BY (SELECT 1)) AS Position, 
        x.value('local-name(.)','NVARCHAR(MAX)') AS Tree,  
        x.value('text()[1]','NVARCHAR(MAX)') AS Value,  
        x.query('.') AS this,         
        x.query('*') AS t,  
        CAST(CAST(1 AS VARBINARY(4)) AS VARBINARY(MAX)) AS Sort,  
        CAST(1 AS INT) AS ID  
FROM @x.nodes('/*') a(x)  
UNION ALL 
SELECT 
        p.lvl + 1 AS lvl,  
        c.value('local-name(.)','NVARCHAR(MAX)') AS Name,  
        CAST(p.Name AS NVARCHAR(MAX)) AS ParentName, 
            CAST(p.Position AS INT) AS ParentPosition, 
        CAST(N'Element' AS NVARCHAR(20)) AS NodeType,  
        CAST(p.FullPath + N'/' + c.value('local-name(.)','NVARCHAR(MAX)') AS NVARCHAR(MAX)) AS FullPath,  
        CAST(p.XPath + N'/'+ c.value('local-name(.)','NVARCHAR(MAX)')+ N'['+ CAST(ROW_NUMBER() OVER(PARTITION BY c.value('local-name(.)','NVARCHAR(MAX)') 
        ORDER BY (SELECT 1)) AS NVARCHAR)+ N']' AS NVARCHAR(MAX)) AS XPath,  
        ROW_NUMBER() OVER(PARTITION BY c.value('local-name(.)','NVARCHAR(MAX)')
        ORDER BY (SELECT 1)) AS Position, 
        CAST( SPACE(2 * p.lvl - 1) + N'|' + REPLICATE(N'-', 1) + c.value('local-name(.)','NVARCHAR(MAX)') AS NVARCHAR(MAX)) AS Tree,  
        CAST( c.value('text()[1]','NVARCHAR(MAX)') AS NVARCHAR(MAX) ) AS Value, c.query('.') AS this,  
        c.query('*') AS t,  
        CAST(p.Sort + CAST( (lvl + 1) * 1024 + (ROW_NUMBER() OVER(ORDER BY (SELECT 1)) * 2) AS VARBINARY(4)) AS VARBINARY(MAX) ) AS Sort,  
        CAST((lvl + 1) * 1024 + (ROW_NUMBER() OVER(ORDER BY (SELECT 1)) * 2) AS INT)  
FROM cte p  
CROSS APPLY p.t.nodes('*') b(c)), cte2 AS (  
                                            SELECT 
                                            lvl AS Depth,  
                                            Name AS NodeName,  
                                            ParentName, 
                                            ParentPosition, 
                                            NodeType,  
                                            FullPath,  
                                            XPath,  
                                            Position, 
                                            Tree AS TreeView,  
                                            Value,  
                                            this AS XMLData,  
                                            Sort, ID  
                                            FROM cte  
UNION ALL 
SELECT 
        p.lvl,  
        x.value('local-name(.)','NVARCHAR(MAX)'),  
        p.Name, 
        p.Position, 
        CAST(N'Attribute' AS NVARCHAR(20)),  
        p.FullPath + N'/@' + x.value('local-name(.)','NVARCHAR(MAX)'),  
        p.XPath + N'/@' + x.value('local-name(.)','NVARCHAR(MAX)'),  
        1, 
        SPACE(2 * p.lvl - 1) + N'|' + REPLICATE('-', 1)  
        + N'@' + x.value('local-name(.)','NVARCHAR(MAX)'),  
        x.value('.','NVARCHAR(MAX)'),  
        NULL,  
        p.Sort,  
        p.ID + 1  
FROM cte p  
CROSS APPLY this.nodes('/*/@*') a(x)  
)  
SELECT 
        ROW_NUMBER() OVER(ORDER BY Sort, ID) AS ID,  
        ParentName, ParentPosition,Depth, NodeName, Position,   
        NodeType, FullPath, XPath, TreeView, Value, XMLData 
FROM cte2 
```

# iphone - 如何在 Objective-C 中以编程方式发送带有 Some Body 文本的 SMS

> ID：10880790
> 
> 赞同：1
> 
> 时间：2012-06-04T11:52:25.887
> 
> 标签：iphone, objective-c, sms, send

> **可能重复：**
> [如何在 iPhone 上以编程方式发送短信？](https://stackoverflow.com/questions/10848/how-to-programmatically-send-sms-on-the-iphone)

如何使用 Objective-C 从 iPhone 以编程方式发送带有正文文本的 SMS。试图做类似的事情：

```
NSString *path = [NSString stringWithFormat:@"sms:?&body:%@", aSMSBodyText];
NSURL *url = [NSURL URLWithString:[path stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
[[UIApplication sharedApplication] canOpenURL:url]; 
```

但不工作，我不想使用 MFMessageComposeViewController，因为我的应用程序从 3.0 开始支持 & MFMessageComposeViewController 从 4.0 开始适用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:14:57.393

不使用 MFMessageComposeViewController 就无法发送 SMS。如果要发送 SMS，则必须使用 MFMessageComposeViewController。否则，您可以使用服务器来使用短信。首先，您需要向服务器发送消息，然后服务器将向任意号码发送消息。您也可以使用短信网关发送短信。

# asp.net-mvc-3 - ASP.NET MVC3，Spring.Net MVC 和其他 MVC 框架之间的冲突？

> ID：10880791
> 
> 赞同：0
> 
> 时间：2012-06-04T11:52:28.030
> 
> 标签：asp.net-mvc-3, spring-mvc, spring.net, telerik-mvc

我无法弄清楚 ASP.NET MVC 和 Spring.Net MVC 之间的区别是什么。我了解 ASP.NET MVC 和 Spring.Net 如何分别工作，但我无法完全弄清楚“Spring.Net MVC”的“MVC”部分带来、覆盖或改变 ASP.NET MVC 框架的工作方式/是什么用过的 ; 例如，我应该使用“Spring.Net”还是“Spring.Net MVC”？

简而言之，这背后的问题是我想使用 ASP.NET MVC、Spring.Net 和 Telerik 的 MVC 控件，并希望确保使用 Spring.Net MVC 不会阻止使用 Telerik 的控件。有没有人有这方面的经验？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:49:01.537

他们不冲突。Spring.net MVC 为 asp.net MVC 增加了依赖注入能力；[在此处查看详细信息](http://www.springframework.net/doc-latest/reference/html/web-mvc3.html#web-mvc3-introduction)，包括特定的网络范围。许多其他 DI 容器提供以这种方式扩展 asp.net mvc 的模块。

通常，这允许您使用 Spring.net DI 容器连接控制器，如[mvc 3 快速入门](https://github.com/SpringSource/spring-net/blob/master/examples/Spring/Spring.Mvc3QuickStart/src/Spring.Mvc3QuickStart/Config/controllers.xml)（随示例一起提供）中所示。或者，更准确地说，Spring.net 提供了自己的实现[`IDependencyResolver`](http://msdn.microsoft.com/en-us/library/system.web.mvc.idependencyresolver%28v=vs.98%29.aspx)来返回`Controller`s、`ActionFilter`s 和其他服务的 asp.net mvc 运行时请求。

使用 Spring.NET MVC 并不会阻止您使用 Telerik 控件。

# iphone - 枚举列表的所有排列

> ID：10880794
> 
> 赞同：0
> 
> 时间：2012-06-04T11:52:30.770
> 
> 标签：iphone, objective-c, math, permutation, combinations

> **可能重复：**
> [如何在 Python 中生成列表的所有排列](https://stackoverflow.com/questions/104420/how-to-generate-all-permutations-of-a-list-in-python)

我想获得所有可能的组合，其值范围为 0-7。

例如

```
arr[0]= 0,1,2,3,4,5,6,7
arr[1]=1,2,3,4,5,6,7,0
arr[2]=2,3,4,5,6,7,1,0

arr[3]= 0,1,2,3,4,5,6,7
arr[4]=1,2,3,4,5,6,7,0
arr[5]=2,3,4,5,6,7,1,0

arr[6]= 0,1,2,3,4,5,6,7
arr[7]=1,2,3,4,5,6,7,0
arr[8]=2,3,4,5,6,7,1,0

arr[9]= 0,1,2,3,4,5,6,7..... 
```

等等。

我想从给定的一组值（即0-7）中获得所有可能的组合，而没有重复的数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:36:26.333

确实这完全取决于语言......这是python中的一个简短尝试：

```
>>> from itertools import permutations
>>> l = [0,1,2,3,4,5,6,7]
>>> for p in permutations(l):
    print p

(0, 1, 2, 3, 4, 5, 6, 7)
(0, 1, 2, 3, 4, 5, 7, 6)
(0, 1, 2, 3, 4, 6, 5, 7)
(0, 1, 2, 3, 4, 6, 7, 5)
(0, 1, 2, 3, 4, 7, 5, 6)
(0, 1, 2, 3, 4, 7, 6, 5)
... 
```

# cloud-foundry - 使用 will_paginate gem 时无法部署到微型 cloudfoundry 实例

> ID：10880799
> 
> 赞同：0
> 
> 时间：2012-06-04T11:52:43.187
> 
> 标签：cloud-foundry

我正在尝试遵循此处的指南：http: [//docs.cloudfoundry.com/frameworks/ruby/rails-3-1.html](http://docs.cloudfoundry.com/frameworks/ruby/rails-3-1.html)

而且我已经解决了许多问题，例如 jquery gem，但是我找不到可以解决 will_paginate gem 的文档。任何人都知道为什么 cloudfoundry 讨厌 will_paginate？

来自 cloud_controller.stderr.log

```
ERROR:  While executing gem ... (ArgumentError)
invalid byte sequence in US-ASCII
/var/vcap/packages/cloud_controller/cloud_controller/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.37/lib/vcap/staging/plugin/gemfile_task.rb:90:in `block in install_gems': Failed installing will_paginate-3.0.3.gem (RuntimeError)
from /var/vcap/packages/cloud_controller/cloud_controller/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.37/lib/vcap/staging/plugin/gemfile_task.rb:78:in `each'
from /var/vcap/packages/cloud_controller/cloud_controller/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.37/lib/vcap/staging/plugin/gemfile_task.rb:78:in `install_gems'
from /var/vcap/packages/cloud_controller/cloud_controller/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.37/lib/vcap/staging/plugin/gemfile_task.rb:47:in `install'
from /var/vcap/packages/cloud_controller/cloud_controller/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.37/lib/vcap/staging/plugin/gemfile_support.rb:34:in `compile_gems'
from /var/vcap/packages/cloud_controller/cloud_controller/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.37/lib/vcap/staging/plugin/rails3/plugin.rb:49:in `block in stage_application'
from /var/vcap/packages/cloud_controller/cloud_controller/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.37/lib/vcap/staging/plugin/rails3/plugin.rb:45:in `chdir'
from /var/vcap/packages/cloud_controller/cloud_controller/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.37/lib/vcap/staging/plugin/rails3/plugin.rb:45:in `stage_application'
from /var/vcap/data/packages/cloud_controller/32/cloud_controller/script/run_plugin.rb:30:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:33:39.857

首先让我说我将以下内容推送到 cloudfoundry.com 作为初始测试。仍在 MCF 上工作，当我确认时会发送更新。

我创建了一个非常简单的 postapp，并使用了以下 [simple] Gemfile：

```
source 'https://rubygems.org'
gem 'rails', '3.1.1'
gem 'sqlite3'
gem 'mysql2'
gem 'json'
gem 'thin'
gem 'will_paginate', '~> 3.0'
# Gems used only for assets and not required
# in production environments by default.
group :assets do
  #gem 'sass-rails',   '~> 3.2.3'
  #gem 'coffee-rails', '~> 3.2.1'
  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby
  gem 'uglifier', '>= 1.0.3'
end

gem 'cloudfoundry-jquery-rails' 
```

然后做了：

```
bundle package

vmc push postappg --runtime=ruby19 
```

....它奏效了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T07:36:10.777

我还可以确认将 Rails 应用程序部署到 cloudfoundry.com，并将 will_paginate 捆绑在作品中。

如果您可以发布您的 Gemfile 的内容，那将有很大帮助，稍微阅读一下这个问题后，我认为 will_paginate 的错误可能是一个红鲱鱼。

还值得注意的是，您实际上不必使用 Rails 3.1，最新版本 3.2.5 也可以正常工作。

**==== 更新 ====**

好的，我用 micro CloudFoundry 和一个测试应用程序复制了这个问题，该应用程序使用了八十辛烷在他的回答中使用的相同 Gemfile。

问题实际上不是 will_paginate 本身的问题，而是 gem 本身中文件的编码问题。will_paginate 是由 Mislav Marohnić 创作的，我实际上只是从 github 上的 gemspec 中复制了他的名字，注意他名字中的双字符！和我一起在这个...

Cloudfoundry.com 和 Micro Cloudfoundry 安装 gem 的方式存在细微差别，它们都使用“env”工具来设置运行“gem install”的环境，但是，Micro Cloudfoundry 运行的是稍旧版本的 vcap -staging gem，它不包含将语言设置为 UTF8 的 env 选项，默认情况下 env 似乎使用 US-ASCII。

因此，要解决这个小问题，您只需 ssh 进入您的 Micro Cloudfoundry 实例，并以 root 身份进行编辑；

/var/vcap/packages/cloud_controller/cloud_controller/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.37/lib/vcap/staging/plugin/gemfile_support.rb

并更改以下块；

```
safe_env << " PATH='%s'" % [ path.uniq.join(":") ]

base_dir = StagingPlugin.platform_config["cache"] 
```

看起来像;

```
safe_env << " PATH='%s'" % [ path.uniq.join(":") ]
safe_env << " LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8"

base_dir = StagingPlugin.platform_config["cache"] 
```

您根本不需要重新启动任何东西，只需再次推送应用程序，一切都会正常工作。

# git - 有谁知道 Windows 的 git bash 程序用于它的外壳吗？

> ID：10880801
> 
> 赞同：8
> 
> 时间：2012-06-04T05:55:49.243
> 
> 标签：git, github, terminal, cmd

抱歉，如果这是错误的发布位置，但我正在使用从 github 下载的 Windows 的 git bash 程序。

它的功能几乎与 linux / mac 终端相同，我想知道是否有任何软件可以做同样的事情？

问题是我只能打开一个 git bash 窗口，如果有办法打开多个 git bash 实例，那也太好了！

非常感谢，

马丁

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T14:52:13.927

[Github for Windows](http://windows.github.com/)使用[GNU bash](http://www.gnu.org/s/bash/)的 Windows 端口，该端口由 MSYS 项目提供，而 MSYS 项目又是[MinGW 项目](http://www.mingw.org/)的一部分。正如 Andrew 所指出的，这个软件实际上是[Git for Windows](http://msysgit.github.com)的一部分，Github for Windows 包含并在内部使用。

因此，您可以`bash`通过安装 MSYS 在 Github for Windows 之外获取 Windows。

请注意，尽管适用于 Windows 的 Git 基于已收到大量未包含在上游的更改的修改*。* `msys.dll`我不确定这是否构成用户可注意到的更改，但“库存”`bash`因此可能与您在 Github for Windows 中使用的行为不同。

另请注意，`bash`尚未教过此端口以正确处理非 ASCII 字符。因此，即使 Git for Windows 自 1.7.10 以来是完整的 Unicode，`bash`也不知道这一点，我不确定它是否会。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-04T06:11:24.703

它使用[Git for Windows](http://msysgit.github.com/)，一个包含 MSys/MinGW 和 git 的包装。您可以使用[控制台](http://sourceforge.net/projects/console/)之类的包装器获取多个选项卡。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-29T07:51:23.450

在 Windows 7 和 8 上，您都可以在启动栏或神奇的搜索框中 shift+左键单击 Git 图标，以打开另一个实例。

或者，您可以直接双击 Git/bin/ 中的快捷方式或 sh.exe。

**注意：**包括来自 Fergie 和 botimer 的改进。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T10:45:27.253

这是一篇关于[“用 Console2 替换默认的 git bash 控制台”](http://buildstarted.com/2012/05/11/replacing-default-git-bash-console-with-console2/)的文章，它会对您有所帮助。

# java - 使用java将大尺寸（> 1GB）文件上传到服务器

> ID：10880809
> 
> 赞同：6
> 
> 时间：2012-06-04T11:53:26.470
> 
> 标签：java, file-upload

我想上传超过 1GB 的大文件（任何格式）。我将使用 FTP 或 HTTP 什么技术。我想在我上传的文件中添加停止和恢复功能。我怎样才能做到这一点？任何示例或 API 或库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:56:11.250

Apache commons net 有一个 FTP 客户端。以及其他一些协议实现。 [http://commons.apache.org/net/](http://commons.apache.org/net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:59:36.210

试试这个库，它包含所有你想要的功能：

[http://www.sauronsoftware.it/projects/ftp4j/](http://www.sauronsoftware.it/projects/ftp4j/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-08T19:40:22.823

参考[这里](https://stackoverflow.com/questions/6074516/how-could-i-upload-a-large-file-in-chunks-using-java?s=2%7C1.7848)

我已经使用plupload完成了。希望它可以帮助你。可以使用它上传任意数量的任意大小的文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T11:54:57.563

您可以尝试使用默认的 HttpUrlConnection 或 Apache HttpClient。

# python - 类型错误：序列项 0：预期字符串，找到 int

> ID：10880813
> 
> 赞同：253
> 
> 时间：2012-06-04T11:53:35.347
> 
> 标签：python

我正在尝试将字典中的数据插入数据库。我想根据数据类型迭代这些值并相应地格式化它们。这是我正在使用的代码片段：

```
def _db_inserts(dbinfo):
    try:
        rows = dbinfo['datarows']

        for row in rows:
            field_names = ",".join(["'{0}'".format(x) for x in row.keys()])
            value_list = row.values()

            for pos, value in enumerate(value_list):
                if isinstance(value, str):
                    value_list[pos] = "'{0}'".format(value)
                elif isinstance(value, datetime):
                    value_list[pos] = "'{0}'".format(value.strftime('%Y-%m-%d'))

            values = ",".join(value_list)

            sql = "INSERT INTO table_foobar ({0}) VALUES ({1})".format(field_names, values)

    except Exception as e:
        print 'BARFED with msg:',e 
```

当我使用一些示例数据（见下文）运行算法时，出现错误：

> 类型错误：序列项 0：预期字符串，找到 int

给出上述错误的 value_list 数据的示例是：

```
value_list = [377, -99999, -99999, 'f', -99999, -99999, -99999, 1108.0999999999999, 0, 'f', -99999, 0, 'f', -99999, 'f', -99999, 1108.0999999999999, -99999, 'f', -99999, 'f', -99999, 'f', 'f', 0, 1108.0999999999999, -99999, -99999, 'f', 'f', 'f', -99999, 'f', '1984-04-02', -99999, 'f', -99999, 'f', 1108.0999999999999] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：505
> 
> 时间：2012-06-04T11:54:32.117

`string.join`连接字符串列表中的元素，而不是整数。

改用这个生成器表达式：

```
values = ','.join(str(v) for v in value_list) 
```

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2015-12-27T02:36:44.710

尽管给定的列表理解/生成器表达式答案是可以的，但我发现这更容易阅读和理解：

```
values = ','.join(map(str, value_list)) 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-06-04T11:59:25.720

代替

```
values = ",".join(value_list) 
```

和

```
values = ','.join([str(i) for i in value_list]) 
```

或者

```
values = ','.join(str(value_list)[1:-1]) 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-12-09T21:35:18.257

[cval](https://stackoverflow.com/users/923813/cval)和Priyank [Patel](https://stackoverflow.com/users/887668/priyank-patel)的回答效果很好。但是，请注意，某些值可能是 unicode 字符串，因此可能会导致`str`抛出`UnicodeEncodeError`错误。在这种情况下，用函数替换`str`函数`unicode`。

例如，假设字符串 Libië（利比亚的荷兰语），在 Python 中表示为 unicode 字符串`u'Libi\xeb'`：

```
print str(u'Libi\xeb') 
```

引发以下错误：

```
Traceback (most recent call last):
  File "/Users/tomasz/Python/MA-CIW-Scriptie/RecreateTweets.py", line 21, in <module>
    print str(u'Libi\xeb')
UnicodeEncodeError: 'ascii' codec can't encode character u'\xeb' in position 4: ordinal not in range(128) 
```

但是，以下行不会引发错误：

```
print unicode(u'Libi\xeb') # prints Libië 
```

所以，替换：

```
values = ','.join([str(i) for i in value_list]) 
```

经过

```
values = ','.join([unicode(i) for i in value_list]) 
```

为了安全。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-24T23:09:02.167

字符串插值是传递格式化字符串的好方法。

`values = ', '.join('$%s' % v for v in value_list)`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-05-12T09:26:29.603

您可以先将整数数据帧转换为字符串，然后执行操作，例如

```
df3['nID']=df3['nID'].astype(str)
grp = df3.groupby('userID')['nID'].aggregate(lambda x: '->'.join(tuple(x))) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-10T09:04:56.430

解决方案：

```
 email = ''.join([str(nip), settings.ORGANISATION_EMAIL_SUFFIX]) 
```

# activemq - ActiveMQ NMS：当代理关闭时，connection.start() 与故障转移协议一起挂起

> ID：10880814
> 
> 赞同：3
> 
> 时间：2012-06-04T11:53:35.253
> 
> 标签：activemq, nms, apache-nms

我有使用 nms.activemq 1.5.0 的 C# 应用程序。

当我的应用程序启动时，它会尝试使用故障转移协议连接到代理（我在主从配置中有两个代理）。
如果两个代理都关闭，我的应用程序由于`connection.start()`.
我尝试了我在网上找到的所有信息——我尝试了故障转移协议的每个属性，还尝试了设置连接超时，尝试了`transport.requesttimeout`。

我还尝试了更新版本的 nms.activemq，但似乎没有解决问题。

关于什么可能导致此问题或任何解决方法的任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-05T08:06:22.930

在挖掘谷歌结果后我发现[了这个线程](http://activemq.2283324.n4.nabble.com/failover-startupMaxReconnectAttempts-doesn-t-do-anything-td3735372.html)

Tim Bish 在那里回答开发人员说，在 NMS 中有一个前缀**transport.***需要添加到所有传输属性中。

我原来的uri是：

```
failover://(tcp://A,tcp://B)?randomize=true&startupMaxReconnectAttempts=1&timeout=2000 
```

现在我的 URI 是（注意**传输。***前缀）：

```
failover://(tcp://A,tcp://B)?transport.randomize=true&transport.startupMaxReconnectAttempts=1&transport.timeout=2000 
```

这是有效的，我处理抛出的异常并继续我的应用程序。

享受

# asp.net - 如何清除 Asp.Net 按钮上所有文本框的值单击

> ID：10880819
> 
> 赞同：4
> 
> 时间：2012-06-04T11:54:30.090
> 
> 标签：asp.net, textbox

我有一个按钮来显示有关客户的记录或信息，我刚刚注意到的问题是，当我选择一个提供了所有必要信息的客户时，该特定客户的信息会正确显示，现在当我尝试显示另一个客户时有一些缺失字段的信息，那个时候这个特定客户的缺失字段被以前的客户信息替换，这意味着我需要在显示客户信息之前清除文本框。这是我必须显示的方法信息。

```
public void ShowCustomerInformationCat1()
{
    if (customer.cCustomerType != null)
    {
        ModifyCustomerByCategoryddlCustomerType.SelectedIndex = ModifyCustomerByCategoryddlCustomerType.Items.IndexOf(ModifyCustomerByCategoryddlCustomerType.Items.FindByText(customer.cCustomerType.Trim()));
        ModifyCustomerByCategoryddlNewCustomerType.SelectedIndex = ModifyCustomerByCategoryddlNewCustomerType.Items.IndexOf(ModifyCustomerByCategoryddlNewCustomerType.Items.FindByText(customer.cCustomerType.Trim()));
    }
    if (customer.cInitial != null)
    {
        ModifyCustomerByCategoryddlInitial.SelectedIndex = ModifyCustomerByCategoryddlInitial.Items.IndexOf(ModifyCustomerByCategoryddlInitial.Items.FindByText(customer.cInitial.Trim()));
        ModifyCustomerByCategoryddlNewInitial.SelectedIndex = ModifyCustomerByCategoryddlNewInitial.Items.IndexOf(ModifyCustomerByCategoryddlNewInitial.Items.FindByText(customer.cInitial.Trim()));
    }
    if (customer.cGender != null)
    {
        ModifyCustomerByCategoryddlGender.SelectedIndex = ModifyCustomerByCategoryddlGender.Items.IndexOf(ModifyCustomerByCategoryddlGender.Items.FindByText(customer.cGender.Trim()));
        ModifyCustomerByCategoryddlNewGender.SelectedIndex = ModifyCustomerByCategoryddlNewGender.Items.IndexOf(ModifyCustomerByCategoryddlNewGender.Items.FindByText(customer.cGender.Trim()));
    }
    if (customer.cCountry != null)
    {
        ModifyCustomerByCategoryddlCountry.SelectedIndex = ModifyCustomerByCategoryddlCountry.Items.IndexOf(ModifyCustomerByCategoryddlCountry.Items.FindByText(customer.cCountry.Trim()));
        ModifyCustomerByCategoryddlNewCountry.SelectedIndex = ModifyCustomerByCategoryddlNewCountry.Items.IndexOf(ModifyCustomerByCategoryddlNewCountry.Items.FindByText(customer.cCountry.Trim()));
    }
} 
```

任何人都可以建议我如何清除文本框，我不想单独清除它们。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T11:59:39.517

```
foreach (var item in Page.Controls)
{
    if (item is TextBox)
    {
        ((TextBox)item).Text = "";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T12:03:22.650

试试这样。

```
foreach (var obj in Page.Controls.OfType<TextBox>())
{
   obj.Text="";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T12:03:23.190

试试这个：

```
Control myForm = Page.FindControl("Form1.aspx"); 
foreach (Control ctl in myForm.Controls) 
if (ctl.GetType().ToString().Equals("System.Web.UI.WebControls.TextBox")) 
((TextBox)ctl).Text = ""; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-05T22:54:53.697

```
private void SetTxtChildren(Control ParentControl,string NewValue = "", Boolean Enable = true)
{
    foreach (Control c in ParentControl.Controls)
    {
        if (c is TextBox)
        {
            ((TextBox)c).Enabled = Enable;
            ((TextBox)c).Text = NewValue;
        }
        else if (c.Controls.Count > 0)
        {
            ClearTxtChildren(c, Enable);
        }
    }
} 
```

其他答案确实是正确的，但是此代码还将设置作为孩子的孩子的文本框。基本递归将在任何具有自己的子控件的子控件上运行相同的循环。这样，您可以在特定控件及其子控件（如手风琴或内容块）中设置所有文本框。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-12T15:10:23.287

Levi 的解决方案几乎没有更新，在我的场景中，我只想清除名为 grdDetails 的网格控件中的特定 texbox。将 fw 4.0 与 wpf 一起使用

```
foreach (var item in grdDetails.Children)
{
    if (item is TextBox)
    {
        ((TextBox)item).Text = "";
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-04T12:04:03.757

```
protected void Button1_Click(object sender, EventArgs e)
{
    ClearSection();
    //Rest of your code
}

private void  function ClearSection()
{
    foreach (Control cntrl in Page.Controls)
    {
        if (cntrl is TextBox)
        {
            ((TextBox)cntrl).Text = "";
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-02T08:38:33.600

```
private void  function ClearSection()
{
    foreach (Control cntrl in Page.Controls)
    {
        if (cntrl is TextBox)
        {
            ((TextBox)cntrl).Text = "";
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-28T11:35:32.140

而不是使用这么多行代码。您可以通过将文本框值设置为 null 属性来解决它。

看这里

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    DataTable dt;
    USignUp USignUp = new USignUp();
    DateTime DOB;

    try
    {
        if (chkAccept.Checked == true)
        {
            DOB = Convert.ToDateTime(txtDOB.Text);
            int UserTypeId = 1;
            USignUp.SignUp_Insert(txtEmail.Text, txtPwd.Text, txtUFName.Text, txtULName.Text, txtCInfo.Text,
            DOB, UserTypeId);
            txtEmail.Text = "";
            txtPwd.Text = "";

            txtUFName.Text = "";
            txtULName.Text = "";
            txtCInfo.Text = "";
            txtCnfrEmail.Text = "";
            txtDOB.Text = "";
            txtCnfrmPwd.Text = "";
        }
        else
        {
            lblMessage.Visible = true;
            lblMessage.Text = "Please accept the terms and conditions";
            //Response.Write("<script LANGUAGE='JavaScript' >alert('Please select Checkbox');document.location='" + ResolveClientUrl("~/SignUp.aspx") + "';</script>");
        }
    }
    catch
    {
    }
}//It works.You can Know more on this by clicking to http://transinntech.com/ 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-21T07:49:30.540

```
protected void Button1_Click(object sender, EventArgs e)
{
    refresh(this);
}

public void refresh(Control cont)
{
    foreach (Control x in cont.Controls)
    {
        if ((x.GetType() == typeof(TextBox)))
        {
            ((TextBox)(x)).Text = "";
        }

        if (x.HasControls())
        {
            CleartextBoxes(x);
        }
    }
} 
```

# sed - cygwin问题中的sed

> ID：10880827
> 
> 赞同：0
> 
> 时间：2012-06-04T11:54:57.850
> 
> 标签：sed, cygwin

我正在编写一个 sed 脚本，它选择包含 [20

我正在使用的命令如下：

```
sed -n "/\[20/p" "C:\test_scripts\new1.txt" 
```

这与 mks 工具包中的 sed 一起使用。但是，当我尝试在 Cygwin 中将其与 sed 一起使用时，出现以下错误：

`sed: -e expression #1, char 6: unterminated address regex`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:12:18.673

### 诊断

猜测一下，Cygwin shell 正在删除`sed`脚本中的反斜杠，因此该`sed`命令正在查看`/[20/p`应该生成您所看到的错误消息的内容。您可以使用以下任一方法来确认这一点：

```
set -x
sed -n "/\[20/p" ...
set +x 
```

或者：

```
echo sed -n "/\[20/p" ... 
```

这些应该向您展示`sed`程序看到的内容（`set -x`符号可能会将整个参数包含在单引号中）。

### 怎么修？

几种可能性，其中大多数应该有效：

*   `sed -n '/\[20/p' ...`
*   `sed -n "/\\[20/p' ...`
*   编辑一个文件 ( `sed.script`) 以包含`/\[20/p`（一行），然后运行：`sed -n -f sed.script ...`

外壳不应与单引号内的材料混淆。将反斜杠加倍是处理反斜杠丢失问题的传统方法。如果其他任何一个都有效，则在上下文中使用 sed 脚本文件是多余的，但也可以防止 shell 弄乱 sed 脚本中的内容。

# css - 将图像附加到 mvc3 中的输入类型浏览按钮

> ID：10880829
> 
> 赞同：0
> 
> 时间：2012-06-04T11:55:05.843
> 
> 标签：css, asp.net-mvc-3, c#-4.0

我想将浏览按钮的图像附加到我的输入类型 =“文件”

```
<input type="file" name="browse1" value="browse1"> 
```

该图像位于我的项目文件夹之一中

如何附上它请帮忙

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:59:21.903

```
input[type=file]::before{
content: url(imagepath);
} 
```

这将获取类型属性中带有“文件”的所有输入元素。before 表示要在元素之前附加以下内容。内容附加图像。

# android - Android 向后兼容技术

> ID：10880830
> 
> 赞同：3
> 
> 时间：2012-06-04T11:55:10.847
> 
> 标签：android, android-4.0-ice-cream-sandwich, backwards-compatibility

我现在在开发基于最新 API (15 ICS) 的 15 活动 android 应用程序方面取得了进展。现在我发现该应用程序的主要功能主义者即使支持 android v4 也不向后兼容，例如：

1-fragmentTransaction 动画 2-将StringSet 放入 sharedPref 3-使用片段的 mapActivity

我考虑为每个存在不兼容问题（大约 10 个）的旧操作系统类制作第二个版本，所以如果我检测到运行应用程序的设备是旧的，我会使用它们。但是，我确信这是一种愚蠢的方式，并且有更好的方式来做到这一点。

什么是使您的代码与 API 7 及更高版本兼容而不离开提供更高 API 的功能的最佳方法（至少用于较新的设备）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:16:37.607

您可以在运行时检查 android 中的 API 级别，并根据 API 级别启用所需的功能。

像下面的东西。

```
int currentapiVersion = android.os.Build.VERSION.SDK_INT;
if (currentapiVersion >= android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH){
// Do something for ICS and above versions
} else{
// do something for phones running an SDK before ICS
} 
```

此外，您可以将版本限定符添加到资源文件夹，例如 drawable-v15（如果设备 API 级别为 15，将拾取可绘制对象）

检查此[链接](http://developer.android.com/guide/topics/resources/providing-resources.html)以获取有关如何为资源指定所需限定符的更多信息

这样，在最新固件设备上启动时将启用最新的可用功能，否则将启用向后兼容性。

# linux - Pentaho + MongoDB 输入步骤错误：com.mongodb.MongoException$CursorNotFound

> ID：10880835
> 
> 赞同：-1
> 
> 时间：2012-06-04T11:55:28.873
> 
> 标签：linux, mongodb, cursor, pentaho

我有一个具有转换的提取：从 mongoDB 获取数据，正确格式化并写入 mysql 数据库。

我尝试了表输出和 mysql 批量加载步骤来输出数据。

请看下面的问题..

```
"ERROR [org.pentaho.di] MongoDB Input - com.mongodb.MongoException$CursorNotFound: cursor not found on server
at com.mongodb.DBApiLayer$Result.init(DBApiLayer.java:371)
at com.mongodb.DBApiLayer$Result._advance(DBApiLayer.java:418)
at com.mongodb.DBApiLayer$Result.hasNext(DBApiLayer.java:400)
at com.mongodb.DBCursor._hasNext(DBCursor.java:489)
at com.mongodb.DBCursor.hasNext(DBCursor.java:509)
at org.pentaho.di.trans.steps.mongodbinput.MongoDbInput.processRow(MongoDbInput.java:61)
at org.pentaho.di.trans.step.RunThread.run(RunThread.java:40)
at java.lang.Thread.run(Thread.java:636)" 
```

每当我尝试通过从提取运行转换来从 mongoDB 获取数据时，都会出现此错误。请提出可能出了什么问题。它适用于多达 12000 到 14000 条记录，然后突然完成（带有成功消息）

我需要从 MongoDB 中获取数据并将其放入 mysql 数据库中。

我们的 mongo 数据库总共有 2000000 条记录，它几乎无法处理 1% 的记录。

任何帮助将不胜感激。

谢谢 Priyabrata patnaik

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:03:34.030

“突然完成（带有成功消息）”是什么意思。您能否更详细地描述您在做什么。

我的猜测是转换时间太长，同时光标超时。如果您能更清楚地描述问题，我将能够为您提供更多帮助。

# wpf - 如何使所有单元格在 DataGrid 中进入编辑模式？

> ID：10880842
> 
> 赞同：3
> 
> 时间：2012-06-04T11:55:46.117
> 
> 标签：wpf, datagrid

当用户编辑单元格时，如何使行中的所有单元格进入编辑模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T07:15:22.817

您可以处理该`DataGrid.BeginningEdit`事件并遍历每一行/单元格并将该`IsEditing`属性设置为 true。

# php - 使用 IMAP 在 PHP 中显示 HTML 电子邮件

> ID：10880847
> 
> 赞同：0
> 
> 时间：2012-06-04T11:56:13.800
> 
> 标签：php, html, imap

我根据消息类型使用 imap PHP 函数“fetchstructure”或“imap_body”从 POP3 帐户获取消息正文。我首先将电子邮件存储在我的数据库中（包括 HTML），然后我的 PHP 显示电子邮件及其内容。

我的问题如下：一旦我有了电子邮件的 HTML 内容，是否有任何好的做法或显示 HTML 电子邮件的常用方法/功能而不会弄乱我的 HTML 页面的其余部分？

我应该以纯文本格式显示电子邮件吗？以及其他网络邮件客户端如何显示 HTML 内容......他们解析它吗？

PS：我宁愿不使用 iframe ..

谢谢你的时间，罗曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:26:32.200

我不确定我是否在这里回答我自己的问题，但其他客户是否使用 HTML 净化器？我找到了这个，它有帮助，但这并没有给我一个关于其他客户如何做的答案。

[http://htmlpurifier.org/](http://htmlpurifier.org/)

无论如何，这似乎是一门很棒的课，所以我希望它有所帮助。

# javascript - Obout 网格 OnClientCallbackError 未显示警报消息

> ID：10880849
> 
> 赞同：1
> 
> 时间：2012-06-04T11:56:24.613
> 
> 标签：javascript, c#-4.0

我在我的应用程序中使用了 Obout 网格。我已经在其上设置了客户端事件，并且所有其他客户端事件都可以正常工作，除了：OnClientCallbackError。我在服务器端有一个方法可以在执行删除之前验证数据库端的删除。这是它的代码：

```
protected void DeleteRecord(object sender, GridRecordEventArgs e)
        {
            //check if the record is not used in any other relationship
            var id = Convert.ToInt32(e.Record["ID"].ToString());
            var result =_areaRepository.RelationshipCheck("env_Area", id);
            var desc = e.Record["Description"].ToString();
        string message;
            if(result <= 0)
            {
                //show error message
                _areaRepository.UpdateArea(id, desc, true);
               }
            else
            {
                message = "Record cannot be  deleted";
               throw new Exception(message);
            }
        } 
```

这是查找表上的删除，上面的代码所做的是检查被删除的记录是否没有在任何其他关系中使用。如果它未被使用，那么我们有一个名为 DLTD 的字段，我们将其更新为 true 以确保用户再也不会看到此记录。这部分有效。

如果记录已在关系中使用，则会引发异常消息。现在基于 Obout 网站上的示例：

如果您有如下所示的功能：

```
function onCallbackError(errorMessage, commandType, recordIndex, data) {
        alert(errorMessage);
        callbackErrorWasRaised = true;
    } 
```

在您的网格客户端事件中，您拥有：

```
<ClientSideEvents ExposeSender="True" OnClientAdd="OnAdd" OnClientEdit="OnEdit" OnClientCallbackError="onCallbackError" /> 
```

警报消息必须显示没有问题，但我的不工作。我已经从我的代码中删除了更新面板。我的母版页上有一个脚本管理器，如下所示：

```
<asp:ScriptManager ID="ScriptManager1" runat="server" ScriptMode="Release" EnablePageMethods="True" EnablePartialRendering="True">
  </asp:ScriptManager> 
```

我们买了 Obout 套房。我向 Obout 支持人员提出了同样的问题，但他们在整整一周后都没有回复我。当我运行应用程序时，我看到错误被抛出并且我的应用程序崩溃了。网格的代码是：

```
 <cc1:Grid ID="grid1" runat="server" CallbackMode="true" Serialize="true" AutoGenerateColumns="false"
    OnRebind="RebindGrid" OnInsertCommand="InsertRecord" OnDeleteCommand="DeleteRecord"
    OnUpdateCommand="UpdateRecord" EnableTypeValidation="False">
    <ClientSideEvents ExposeSender="True" OnClientAdd="OnAdd" OnClientEdit="OnEdit" OnClientCallbackError="onCallbackError" />

<TemplateSettings RowEditTemplateId="tplRowEdit" />
    <Columns>
        <cc1:Column DataField="ID" Visible="false" Width="150" ReadOnly="true" HeaderText="ID">
        </cc1:Column>
        <cc1:Column DataField="Code" AllowGroupBy="true" Wrap="false" ShowFilterCriterias="true"
            ParseHTML="false" Align="left" HeaderAlign="left" Width="200" HeaderText="Code">
            <TemplateSettings RowEditTemplateControlId="txtCode" RowEditTemplateControlPropertyName="value" />
        </cc1:Column>
        <cc1:Column DataField="Description" Visible="True" AllowGroupBy="true" Wrap="false"
            ShowFilterCriterias="true" ParseHTML="false" Align="left" HeaderAlign="left"
            Width="250" HeaderText="Description">
            <TemplateSettings RowEditTemplateControlId="txtDescription" RowEditTemplateControlPropertyName="value" />
        </cc1:Column>
        <cc1:Column DataField="UnitMeasureID" Visible="true" ShowFilterCriterias="true" HeaderAlign="left"
            ParseHTML="false" Align="left" Width="190" HeaderText="UnitMeasureID">
            <TemplateSettings RowEditTemplateControlId="txtUnitMeasureID" RowEditTemplateControlPropertyName="value" />
        </cc1:Column>
        <cc1:Column DataField="DLTD" Visible="false" ShowFilterCriterias="true" HeaderAlign="left"
            ParseHTML="false" Align="left" Width="110" HeaderText="DLTD">
        </cc1:Column>
        <cc1:Column HeaderText="EDIT" Width="150" AllowEdit="true" AllowDelete="true" />
    </Columns>
 <Templates>
        <cc1:GridTemplate runat="server" ID="tplRowEdit">
            <Template>
                <table class="rowEditTable">
                    <tr>
                        <td valign="top">
                            <fieldset style="width: 275px; height: 175px;">
                                <legend>New Mining Area Information</legend>
                                <table>
                                    <tr>
                                        <td>
                                            Code:
                                        </td>
                                        <td>
                                            <input type="text" id="txtCode" style="width: 150px;" class="ob_gEC" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Description:
                                        </td>
                                        <td>
                                            <input type="text" id="txtDescription" style="width: 150px;" class="ob_gEC" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Unit Measure:
                                        </td>
                                        <td>
                                            <cc3:OboutDropDownList ID="txtUnitMeasureID" runat="server" Height="150" Width="100%"
                                                DataSourceID="unitMeasureODS" DataTextField="Description" DataValueField="ID">
                                            </cc3:OboutDropDownList>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2">
                                            <br />
                                        </td>
                                    </tr>
                                </table>
                            </fieldset>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" align="center">
                            <input type="button" value="Save" onclick="grid1.save()" class="tdText" />
                            <input type="button" value="Cancel" onclick="grid1.cancel()" class="tdText" />
                        </td>
                    </tr>
                </table>
            </Template>
        </cc1:GridTemplate>
    </Templates>
</cc1:Grid> 
```

# php - 为什么不能分配 Pagingnation 类的变量？

> ID：10880850
> 
> 赞同：0
> 
> 时间：2012-06-04T11:56:26.803
> 
> 标签：php, codeigniter, pagination

我想在我的网页中使用分页，因为我使用了以下代码

```
$config['base_url'] = base_url().'index.php/admin/pages/';
        $config['total_rows'] = 5;//$this->pages_model->count_pages();
        $config['uri_segment'] = 3;
        $config['per_page'] = '2'; 
```

但问题是数组变量 $total_page 和 $per_page 没有赋值，因此无法显示分页链接。我的意思是在 create_links() 中我无法获得上面分配的新值。有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:02:00.640

加载分页库

```
$this->load->library('pagination'); 
```

初始化分页。

```
$this->pagination->initialize($config); 
```

# linq - 如何将数据转换为可观察的集合

> ID：10880856
> 
> 赞同：0
> 
> 时间：2012-06-04T11:57:02.817
> 
> 标签：linq, windows-phone-7

我正在使用这样的数据库结构：

```
item_id     int
list_name   string
category_name   string
item_name   string
qty     int
price       double
total_amt   double 
```

我正在尝试根据类别获取项目列表..（按&总和分组）

```
private ObservableCollection<shoppingitem> _purchased;
public ObservableCollection<shoppingitem> Purchased
{
    get
    {
        return _purchased;
    }
    set
    {
        _purchased = value;
        notifypropertychanged("Purchased");
    }
}

public void  budgetcategorywise()
{
     var q = from shoppingItem p in db.Item1
               group p by p.category_name into g
               select new { category = g.Key, total = g.Sum(p => p.total_amt) };

     Purchased=new ObservableCollection<shoppingitem>(q);
} 
```

它给出了类型转换的错误。现在的问题是我应该如何将此结果绑定到列表框。它需要转换..？

我需要将 ObservableCollection 中的结果转换为与列表框绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:02:31.020

您应该返回 的集合`shoppingitem`，而不是匿名类型！

只需将其替换为`select new`，`select new shoppingitem`它应该可以正常工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:25:21.523

您对`shoppingItem`s 进行分组，并尝试将*聚合*结果作为`shoppingItem`s 列表返回。您应该在集合中返回一个命名类型是正确的，但我认为它不应该是`shoppingItem`. 只需使用一个简单的类来传输结果。喜欢

```
class ShoppingItemSumDto
{
    public string Name { get; set; }
    public int Sum { get; set; }
} 
```

# ruby-on-rails - 为什么 bundler 无法访问 http://rubygems.org？

> ID：10880857
> 
> 赞同：29
> 
> 时间：2012-06-04T11:57:05.230
> 
> 标签：ruby-on-rails, ruby, gem, bundler

Bundle install 昨天运行良好，但现在它在 CL 中返回此输出：

```
 ~/dev/rails/sample_app$ bundle install
   Fetching gem metadata from https://rubygems.org/.
   Error Bundler::HTTPError during request to dependency API
   Fetching full source index from https://rubygems.org/
   Could not reach https://rubygems.org/ 
```

我对 gem 文件所做的唯一更改是在测试组中添加了工厂女孩 (1.4.0) 的 gem。

我没有在任何代理后面工作，而且我也完全连接到互联网。在谷歌上似乎也找不到类似的东西。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T12:06:12.167

删除新行时它是否有效？

也许，您应该切换 Gemfile 以使用`http`而不是`https`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-04T12:16:24.303

这不是 gem 或 ruby​​ 问题，这是一个解析器问题，正如您从您的`uknown host rubygems.org`回复中可以看出的那样。

如果您的浏览器正在解析，请尝试以下网站：

*   [http://isitup.org/rubygems.org](http://isitup.org/rubygems.org)
*   [http://www.downforeveryoneorjustme.com/rubygems.org](http://www.downforeveryoneorjustme.com/rubygems.org)

验证您的问题是否已本地化。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-04T12:25:44.013

听起来您可能在代理服务器后面。

试试（unix/os x）

```
$ export http_proxy=http://username:password@your-proxy-site.com:[your_proxy_port] 
```

如果您自己不知道这些值，您可能能够从 Web 浏览器中获取信息。

在 Windows 上，您可以通过转到环境变量并使用上述值添加一个名为 http_proxy 的新变量来执行此操作。

# asp.net-mvc - 当只有 1 条记录时定义没有主键的实体

> ID：10880860
> 
> 赞同：1
> 
> 时间：2012-06-04T11:57:15.047
> 
> 标签：asp.net-mvc, entity-framework

我有一个实体框架代码优先 MVC3 解决方案，其中我有一个名为**Settings**的实体，其中只有 1 条记录。此实体用于存储解决方案的常规设置。

```
public class Settings
{
    public bool   CommunicationActivated { get; set; }
    public string CommunicationMessage { get; set; }
    ...
} 
```

当我运行解决方案时，出现错误：*System.Data.Edm.EdmEntityType: : EntityType 'Settings' has no key defined。定义此 EntityType 的键。*

**我的问题**：是否可以有一个没有定义键的实体？对于只有一条记录的实体来说是个好主意吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:10:52.623

我建议您只添加一个新列：

```
ID INT NOT NULL IDENTITY PRIMARY KEY 
```

这没有害处，并且允许您使用这些工具，而不是反对它们。

您甚至可以确保该表只有一条记录：`ID`手动设置该字段`1`并为`(ID = 1)`.

# tortoisesvn - 按原样从乌龟 svn 复制项目

> ID：10880862
> 
> 赞同：0
> 
> 时间：2012-06-04T11:57:20.947
> 
> 标签：tortoisesvn, copy-paste

有什么方法可以从 SVN 复制我的整个项目并将其粘贴到我的本地硬盘上。我不想合并我的副本和工作副本，我只想按原样获取工作副本？你怎么做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:04:47.207

1.  右键单击所需位置，然后单击“SVN结帐”
2.  粘贴网址位置。
3.  设置结帐目录休息保持默认。
4.  单击确定。

# java - Servlet 中的安全 doGet 参数

> ID：10880865
> 
> 赞同：0
> 
> 时间：2012-06-04T11:57:39.347
> 
> 标签：java, php, jakarta-ee, servlets

我正在做一个简单的注册表单，我需要在 url 中传递一些参数，但是我担心 java 中的安全性。在我以前使用的 PHP 中

```
mysql_escape_string 
```

确保没有特殊字符传递给变量。但是我不确定Java中是否需要。

问题是：直接使用**request.getAttribute(arg0)**是否安全，还是我需要使用一些特殊方法来保护它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:04:09.913

Java-escape string中提供了该问题的答案，[以防止 SQL 注入](https://stackoverflow.com/questions/1812891/java-escape-string-to-prevent-sql-injection)。

我相信最好的办法不是将您的命令编码为字符串，而是使用 PreparedSatements 并使用其方法设置参数，如 SetInteger、SetBoolean 等。

# iphone - 在 iOS 上，如果 superview 的 userInteractionEnabled 为 NO，那么所有子视图也会被禁用吗？

> ID：10880868
> 
> 赞同：32
> 
> 时间：2012-06-04T11:57:44.980
> 
> 标签：iphone, ios, uiview, uikit, uiresponder

我认为当一个视图被触摸或点击时，它的处理程序首先被调用，然后它的超级视图的处理程序被调用（向上传播）。

但是，如果超级视图`userInteractionEnabled`设置为 NO，那么所有子视图和后代也被禁用以进行用户交互，这是真的吗？如果我们只想禁用主视图但不想禁用子视图怎么办？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2016-06-29T01:56:13.500

您可以覆盖`hitTest(_:withEvent:)`以忽略视图本身，但仍对其子视图进行触摸。

```
class ContainerStackView : UIStackView {
    override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView? {
        let result = super.hitTest(point, with: event)
        if result == self { return nil }
        return result
    }
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-06-05T06:19:28.730

如果这可能有帮助，我在 Matt Neuburg 的 Programming iOS 5 中发现了这一点，p。467：

> `userInteractionEnabled`
> 
> 如果设置为 NO，则此视图（及其子视图）将被排除在接收触摸之外。触及此视图或其子视图之一“落入”其后面的视图。

此外，Apple 的 iOS 事件处理指南说：

> 窗口对象使用命中测试和响应者链来找到接收触摸事件的视图。在命中测试中，窗口在视图层次结构的最顶层视图上调用 hitTest:withEvent:；此方法通过在视图层次结构中返回 YES 的每个视图上递归调用 pointInside:withEvent: 来继续，沿着层次结构向下进行，直到找到在其范围内发生触摸的子视图。该视图成为命中测试视图。

和 Programming iOS 5 by Matt Neuburg, p.485 提到如果一个视图被标记`userInteractionEnabled`为`NO`, 或`hidden`,`YES`或不透明度接近 0, 那么视图和它的子视图将不会被遍历`HitTest`(因此不考虑任何触摸) .

更新：如果我们考虑其他场景中的亲子情况，我想它也可以这样工作。例如，在 HTML 中，如果有 a`div`并且 this 下都有孩子`div`，现在 this`div`设置为`display: none`，那么所有孩子都不显示是有道理的。因此，如果将父级设置为不与用户交互，那么子级也不与用户交互也是有意义的。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-06-04T12:07:35.370

你不能那样做，

相反，您将更改视图的排列，如下所示：

```
Main View -> subViews 
```

到

```
Container View -> Main View that you want to set as inactive
               -> other views that you want to still be active 
```

所以你当前的主视图和你当前的子视图将成为兄弟，新容器视图的子视图

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-24T07:28:12.177

**第一种方法**

```
- (BOOL) gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
  if ([touch.view.superview isKindOfClass:[SuperViewParent class]]) return FALSE;
  return TRUE;
} 
```

**第二种方法**

```
UITapGestureRecognizer *r = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(agentPickerTapped:)];
    r.cancelsTouchesInView = NO;
    [agentPicker addGestureRecognizer:r]; 
```

# iphone - 如何将 NSArray 存储到 plist 或数据库中？

> ID：10880870
> 
> 赞同：4
> 
> 时间：2012-06-04T11:57:58.550
> 
> 标签：iphone, ios, xcode

我有这个应用程序，当我点击某个按钮时，它必须存储信息。事实是，当我点击这个按钮时，我需要在本地存储这些数据，这样我就可以在其他视图中使用它，它将在显示时加载它数据。

我正在考虑一些 plis 或数据库。问题是我无法得到一个想法或好的东西。

1.  我用对象传递数组。
2.  我有按钮。

将整个数组存储在手机中的最佳方法是哪种，所以我可以像存储它一样读取它？

如果不清楚，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T12:01:25.280

简单的方法是将其保存到 plist

像这样：

```
//create array
NSMutableArray *arr = [[NSMutableArray alloc] init];

//Add data
[arr addObject:@"some object"];

//String Path of file
NSString *path = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];

//Save
[arr writeToFile:path atomically:YES]; 
```

稍后像这样加载它：

```
//Load it
NSMutableArray *arr = [[NSMutableArray alloc] initWithContentsOfFile:path]; 
```

# java - 如何在日志文件中获取旧的日志详细信息？

> ID：10880873
> 
> 赞同：0
> 
> 时间：2012-06-04T11:58:12.053
> 
> 标签：java, eclipse, logging, log4j, struts

我只得到一个日志文件。过去的日志被删除。我想要过去的日志文件作为备份。它不应该替换旧内容，而是将旧内容保存在单独的文件中。以下是我的 log4j.properties 文件

```
# Log4j configuration file.
 log4j.rootCategory=DEBUG, A1
 # Available levels are DEBUG, INFO, WARN, ERROR, FATAL

 #
 # A1 is a ConsoleAppender 
 #

log4j.appender.A1 = org.apache.log4j.RollingFileAppender
log4j.appender.A1.File = C:/LogInfo/logfile.log
log4j.appender.A1.MaxFileSize = 100MB
log4j.appender.A1.MaxBackupIndex=10
log4j.appender.A1.layout = org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern = [%d] %C %M %L - %m%n
log4j.appender.A1.Threshold = DEBUG

 #
 # A2 is a DailyRollingFileAppender
 #
 log4j.appender.A2=org.apache.log4j.DailyRollingFileAppender
 log4j.appender.A2.file=C:/LogInfo/logfile.log
 log4j.appender.A2.datePattern='.'yyyy-MM-dd
 log4j.appender.A2.append=true
 log4j.appender.A2.layout=org.apache.log4j.PatternLayout
 log4j.appender.A2.layout.ConversionPattern=[%d] %C %M %L - %m%n

 # 
 #
 # A3 is a RollingFileAppender - Should be used in production only
 #   
 log4j.appender.A3=org.apache.log4j.RollingFileAppender
 log4j.appender.A3.file=C:/LogInfo/logfile.log
 log4j.appender.A3.append=true
 log4j.appender.A3.MaxBackupIndex=5
 log4j.appender.A3.MaxFileSize=10MB
 log4j.appender.A3.layout=org.apache.log4j.PatternLayout
 log4j.appender.A3.layout.ConversionPattern=[%d] %C %M %L - %m%n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:32:05.273

取决于您使用的附加程序 - 看起来可能像 A2 或 A3。在这种情况下，您需要增加 MaxBackupIndex 的值 - 对于 A3，它设置为 5，这意味着最多将保留 5 个备份文件。对于 A2，此属性未定义，因此它将使用默认值 1，最多保留 1 个备份文件。

您应该将这些设置为更高的值 - 比如说 1000，这将保留多达 1000 个备份文件，每个最大大小为 10MB（为 A3 定义）。

```
log4j.appender.A2.MaxBackupIndex=1000
log4j.appender.A3.MaxBackupIndex=1000 
```

编辑：对不起，请阅读第一行。看起来您正在使用 A1 appender，它将最多保留 10 个文件，每个文件 100MB。您可以增加这些值以保留更多旧日志。

# objective-c - 多少内存泄漏（以字节为单位）可能是致命的

> ID：10880879
> 
> 赞同：0
> 
> 时间：2012-06-04T11:58:40.047
> 
> 标签：objective-c, ios, xcode, memory-management, memory-leaks

我刚刚使用 Instruments 记录了我的内存泄漏，我的应用程序泄漏了大约 2-2.5 mb 的内存。我已经开始修复它，但您认为这是大量内存泄漏吗？我个人在使用 Instruments 和测量内存泄漏等领域的经验很少。如果没有，下一次，这将是一个致命的数量。另外，Instruments 会记录每一次内存泄漏吗？如果是这样，那么如果您的泄漏 = 0，那么您的应用程序在技术上是否完美（在内存管理方面）。编辑：在仪器中我使用内存泄漏记录并测试了我的应用程序的每个部分，这就是我记录总数的方式2-2.5 mb 的数量。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T12:13:32.920

基本上你会想要摆脱你“拥有”的任何内存，即已经分配了你自己。如果你使用 alloc/copy/new 那么就是这种情况，你应该释放资源。

例如：

```
 NSString *doIOwnThisIWonder = [NSString stringWithFormat:@"%@",@"Nope"];
   NSImage *iOwnThisImage = [[NSImage alloc] initWithContentsOfFile:@"/tmp/youownthis.jpg"];
   NSData *perhapsThisData=[iOwnThisImage TIFFRepresentation]; 
```

'请解除图像 mkay :)

我很懒所以这里有一个链接[http://interfacelab.com/objective-c-memory-management-for-lazy-people/](http://interfacelab.com/objective-c-memory-management-for-lazy-people/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T12:01:10.467

内存泄漏会随着时间的推移而增加，因此每个字节都可能是致命的。唯一的“非致命”泄漏是在过程生命周期中仅发生一次的泄漏。

# java - Spring - 停止bean初始化

> ID：10880880
> 
> 赞同：2
> 
> 时间：2012-06-04T11:58:55.483
> 
> 标签：java, spring, javabeans, postconstruct

我的 bean 实现 InitializingBean 并在 afterPropertiesSet 方法中我想执行验证。

问题是我的验证使用了其他一些尚未完全加载的 bean，比如 JPA bean 之类的 bean。

我还使用`@PostConstruct`了注释——这更糟糕，因为这个方法在方法之前调用`afterPropertiesSet`。有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:42:20.113

我通过实现 PostInit 注释来解决我的问题

注释确保使用此注释的方法仅在所有 bean 之后才被调用

在应用程序内已部署。

很好的参考： [http ://reteptools.kenai.com/api/retepMicroKernel/snapshot/uk/org/retep/kernel/annotations/PostInit.html](http://reteptools.kenai.com/api/retepMicroKernel/snapshot/uk/org/retep/kernel/annotations/PostInit.html)

# linux - 如何开发 Gnome 工具栏图形小部件？

> ID：10880890
> 
> 赞同：0
> 
> 时间：2012-06-04T11:59:48.720
> 
> 标签：linux, graphics, svg, widget, gnome

我想为 Gnome 创建一个小工具栏图形小部件。你能为我指出正确的方向吗 ？我的猜测是，这在 Java 中不容易做到，所以我正在寻找下一个我可以学习的最好的语言。具体来说：

*   你认为哪种语言对这类事情有最好的 Gnome 绑定？
*   我应该查看哪个图形库？
*   我可以在 SVG 中实现图形吗？
*   我可以使用可以轻松跨多个 Linux 桌面运行的框架吗？（即不仅仅是侏儒）

感谢您的任何指点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:57:56.043

如果您想为 Gnome 3 编写一些东西，那么最好的方法是使用 St 图形工具包（“St”=“Shell 工具包”）在 JavaScript 中编写 Gnome Shell 扩展。以下是资源链接：

*   [http://blog.fpmurphy.com/2011/04/gnome-3-shell-extensions.html](http://blog.fpmurphy.com/2011/04/gnome-3-shell-extensions.html)
*   [http://blogs.openshine.com/cgtapia/2011/05/16/writing-extensions-to-the-new-gnome-shell/](http://blogs.openshine.com/cgtapia/2011/05/16/writing-extensions-to-the-new-gnome-shell/)
*   [http://www.slideshare.net/yurenju/step-by-step-to-write-a-gnomeshell-extension](http://www.slideshare.net/yurenju/step-by-step-to-write-a-gnomeshell-extension)

对于 LXDE，[这里](http://wiki.lxde.org/en/How_to_write_plugins_for_LXPanel)是为 LXPanel 编写插件的指南。看起来唯一可用的方法是使用 C 语言中的 GTK 图形工具包。请注意，这不使用 Gnome 库——据我所知，LXDE 库是 C 语言的，并且没有与其他语言的绑定。

没有跨桌面编写菜单栏小部件的标准。这是因为不同的桌面环境都有自己的库和 API。所以，能不能用 SVG 就看你用的是哪一种了。RSVG 库为 GTK 添加了 SVG 功能，但即使没有它，您也可以使用静态 SVG 图标。

# ios - 如何跟踪我的应用在 iphone 日历中添加的事件

> ID：10880895
> 
> 赞同：3
> 
> 时间：2012-06-04T12:00:04.423
> 
> 标签：ios, nscalendar, ekevent, ekeventkit

我从应用程序中的 Web 服务获取事件，每个事件都有一个唯一标识符。

如果用户想将该事件推送到本机日历，我将在本机中保存该事件，但我怎么知道该事件是否已经存在于本机日历中，因为我无法设置 EKEvent 对象的 eventIdentifier 属性

我尝试继承 EKEvent 并添加我自己的标识符

```
eventStore = [[EKEventStore alloc] init];
MyEvent *event = [MyEvent eventWithEventStore:eventStore];
event.myEventIdentifier = @"MyEventIdentifier";
[event setCalendar:[eventStore defaultCalendarForNewEvents]];
event.startDate = [NSDate date];
event.endDate = [NSDate dateWithTimeIntervalSinceNow:10000];
event.title = @"MyEventTitle";
[eventStore saveEvent:event span:EKSpanThisEvent error:nil]; 
```

但是当我检索事件对象时，我没有得到我的子类对象，当我调用它时它抛出了一个**异常**

```
[event valueForKey:@"MyEventIdentifier"]; 
```

现在如您所见，我无法在 EKEvent 类中设置 eventIdentifier 属性，子类化 EKEvent 也不起作用。

我怎样才能实现所需的功能，有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T14:34:29.063

我正在研究 EKEvent 是否有类似的东西，但 EKEvent 确实有一个您可以访问的标识符。

保存事件后，您可以访问其标识符，

```
NSString *eventID = [NSString stringWithFormat:@"%@", event.eventIdentifier]; 
```

保存这个字符串并用它来删除事件，但注意 event.eventIdentifier 是只读的，

# android - 使用 LocalBroadcastManager 进行“粘性”广播

> ID：10880896
> 
> 赞同：11
> 
> 时间：2012-06-04T12:00:07.480
> 
> 标签：android, android-intent, broadcast

我认为我不能使用[LocalBroadcastManager](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)发送“粘性”广播是否正确？如果是这样，这似乎是非常短视的，特别是如果应用程序使用可以在应用程序生命周期内换入和换出并依赖广播数据的片段。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T13:00:33.613

> 我认为我不能使用 LocalBroadcastManager 发送“粘性”广播是否正确？

是的，你是对的。

> 如果是这样，这似乎是非常短视的，特别是如果应用程序使用可以在应用程序生命周期内换入和换出并依赖广播数据的片段。

如果您愿意，欢迎您使用源代码`LocalBroadcastManager`并创建您自己的粘性扩展。就个人而言，我会使用其他方式来存储此类数据（模型片段、单例或持久数据存储，具体取决于场景）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-19T07:41:29.020

正如@CommonsWare 所说，我尝试使用 LocalBroadcastManager 源代码实现粘性。检查这个： [https ://gist.github.com/lidemin/5cd4080ebbc74154a0e7](https://gist.github.com/lidemin/5cd4080ebbc74154a0e7)

不确定这是否是最好的方法。直到现在它运作良好。我个人更喜欢使用 Otto。

```
public class StickyLocalBroadcastManager {

private static class ReceiverRecord {
    final IntentFilter filter;
    final BroadcastReceiver receiver;
    boolean broadcasting;

    ReceiverRecord(IntentFilter _filter, BroadcastReceiver _receiver) {
        filter = _filter;
        receiver = _receiver;
    }

    @Override
    public String toString() {
        StringBuilder builder = new StringBuilder(128);
        builder.append("Receiver{");
        builder.append(receiver);
        builder.append(" filter=");
        builder.append(filter);
        builder.append("}");
        return builder.toString();
    }
}

private static class BroadcastRecord {
    final Intent intent;
    final ArrayList<ReceiverRecord> receivers;

    BroadcastRecord(Intent _intent, ArrayList<ReceiverRecord> _receivers) {
        intent = _intent;
        receivers = _receivers;
    }
}

private static final String TAG = "LocalBroadcastManager";
private static final boolean DEBUG = false;

private final Context mAppContext;

private final HashMap<BroadcastReceiver, ArrayList<IntentFilter>> mReceivers
        = new HashMap<BroadcastReceiver, ArrayList<IntentFilter>>();
private final HashMap<String, ArrayList<ReceiverRecord>> mActions
        = new HashMap<String, ArrayList<ReceiverRecord>>();

private final ArrayList<BroadcastRecord> mPendingBroadcasts
        = new ArrayList<BroadcastRecord>();

private final ArrayList<Intent> mStickyBroadcasts
        = new ArrayList<Intent>();

static final int MSG_EXEC_PENDING_BROADCASTS = 1;

private final Handler mHandler;

private static final Object mLock = new Object();
private static StickyLocalBroadcastManager mInstance;

public static StickyLocalBroadcastManager getInstance(Context context) {
    synchronized (mLock) {
        if (mInstance == null) {
            mInstance = new StickyLocalBroadcastManager(context.getApplicationContext());
        }
        return mInstance;
    }
}

private StickyLocalBroadcastManager(Context context) {
    mAppContext = context;
    mHandler = new Handler(context.getMainLooper()) {

        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
                case MSG_EXEC_PENDING_BROADCASTS:
                    executePendingBroadcasts();
                    break;
                default:
                    super.handleMessage(msg);
            }
        }
    };
}

/**
 * Register a receive for any local broadcasts that match the given IntentFilter.
 *
 * @param receiver The BroadcastReceiver to handle the broadcast.
 * @param filter   Selects the Intent broadcasts to be received.
 * @see #unregisterReceiver
 */
public void registerReceiver(BroadcastReceiver receiver, IntentFilter filter) {
    synchronized (mReceivers) {
        ReceiverRecord entry = new ReceiverRecord(filter, receiver);
        ArrayList<IntentFilter> filters = mReceivers.get(receiver);
        if (filters == null) {
            filters = new ArrayList<IntentFilter>(1);
            mReceivers.put(receiver, filters);
        }
        filters.add(filter);
        for (int i = 0; i < filter.countActions(); i++) {
            String action = filter.getAction(i);
            ArrayList<ReceiverRecord> entries = mActions.get(action);
            if (entries == null) {
                entries = new ArrayList<ReceiverRecord>(1);
                mActions.put(action, entries);
            }
            entries.add(entry);
        }
        //check sticky broadcasts
        for (Intent intent : mStickyBroadcasts) {
            if (mActions.containsKey(intent.getAction())) {
                sendBroadcast(intent, false);
            }
        }
    }
}

/**
 * Unregister a previously registered BroadcastReceiver.  <em>All</em>
 * filters that have been registered for this BroadcastReceiver will be
 * removed.
 *
 * @param receiver The BroadcastReceiver to unregister.
 * @see #registerReceiver
 */
public void unregisterReceiver(BroadcastReceiver receiver) {
    synchronized (mReceivers) {
        ArrayList<IntentFilter> filters = mReceivers.remove(receiver);
        if (filters == null) {
            return;
        }
        for (int i = 0; i < filters.size(); i++) {
            IntentFilter filter = filters.get(i);
            for (int j = 0; j < filter.countActions(); j++) {
                String action = filter.getAction(j);
                ArrayList<ReceiverRecord> receivers = mActions.get(action);
                if (receivers != null) {
                    for (int k = 0; k < receivers.size(); k++) {
                        if (receivers.get(k).receiver == receiver) {
                            receivers.remove(k);
                            k--;
                        }
                    }
                    if (receivers.size() <= 0) {
                        mActions.remove(action);
                    }
                }
            }
        }
    }
}

/**
 * remove the sticky broadcasts .
 * @param action is the action need to be removed.
 */
public void removeStickyBroadcast(String action) {
    if (action == null || action.length() <= 0) {
        return;
    }
    synchronized (mStickyBroadcasts) {
        Iterator<Intent> intentIterator = mStickyBroadcasts.iterator();
        while (intentIterator.hasNext()) {
            Intent intent = intentIterator.next();
            if (action.equalsIgnoreCase(intent.getAction())) {
                intentIterator.remove();
            }
        }
    }
}

/**
 * remove all the sticky broadcasts.
 */
public void removeAllStickyBroadcasts(){
    synchronized (mStickyBroadcasts){
        mStickyBroadcasts.clear();
    }
}

/**
 * send broadcast with specified action.
 * @param action is the action .
 * @return
 */
public boolean sendBroadcast(String action){
    Intent intent = new Intent(action);
    return sendBroadcast(intent);
}

/**
 * send broadcast with specified action.
 * @param action is the action .
 * @return
 */
public boolean sendBroadcast(String action, boolean isSticky){
    Intent intent = new Intent(action);
    return sendBroadcast(intent, isSticky);
}

/**
 * Broadcast the given intent to all interested BroadcastReceivers.  This
 * call is asynchronous; it returns immediately, and you will continue
 * executing while the receivers are run.
 *
 * @param intent The Intent to broadcast; all receivers matching this
 *               Intent will receive the broadcast.
 * @see #registerReceiver
 */
public boolean sendBroadcast(Intent intent) {
    return sendBroadcast(intent, false);
}

/**
 * Broadcast the given intent to all interested BroadcastReceivers.  This
 * call is asynchronous; it returns immediately, and you will continue
 * executing while the receivers are run.
 *
 * @param intent   The Intent to broadcast; all receivers matching this
 *                 Intent will receive the broadcast.
 * @param isSticky The flag of this intent is need to be sticky or not.
 * @see #registerReceiver
 */
public boolean sendBroadcast(Intent intent, boolean isSticky) {
    if (isSticky) {
        mStickyBroadcasts.add(intent);
    }
    synchronized (mReceivers) {
        final String action = intent.getAction();
        final String type = intent.resolveTypeIfNeeded(
                mAppContext.getContentResolver());
        final Uri data = intent.getData();
        final String scheme = intent.getScheme();
        final Set<String> categories = intent.getCategories();

        final boolean debug = DEBUG ||
                ((intent.getFlags() & Intent.FLAG_DEBUG_LOG_RESOLUTION) != 0);
        if (debug) Log.v(
                TAG, "Resolving type " + type + " scheme " + scheme
                        + " of intent " + intent);

        ArrayList<ReceiverRecord> entries = mActions.get(intent.getAction());
        if (entries != null) {
            if (debug) Log.v(TAG, "Action list: " + entries);

            ArrayList<ReceiverRecord> receivers = null;
            for (int i = 0; i < entries.size(); i++) {
                ReceiverRecord receiver = entries.get(i);
                if (debug) Log.v(TAG, "Matching against filter " + receiver.filter);

                if (receiver.broadcasting) {
                    if (debug) {
                        Log.v(TAG, "  Filter's target already added");
                    }
                    continue;
                }

                int match = receiver.filter.match(action, type, scheme, data,
                        categories, "LocalBroadcastManager");
                if (match >= 0) {
                    if (debug) Log.v(TAG, "  Filter matched!  match=0x" +
                            Integer.toHexString(match));
                    if (receivers == null) {
                        receivers = new ArrayList<ReceiverRecord>();
                    }
                    receivers.add(receiver);
                    receiver.broadcasting = true;
                } else {
                    if (debug) {
                        String reason;
                        switch (match) {
                            case IntentFilter.NO_MATCH_ACTION:
                                reason = "action";
                                break;
                            case IntentFilter.NO_MATCH_CATEGORY:
                                reason = "category";
                                break;
                            case IntentFilter.NO_MATCH_DATA:
                                reason = "data";
                                break;
                            case IntentFilter.NO_MATCH_TYPE:
                                reason = "type";
                                break;
                            default:
                                reason = "unknown reason";
                                break;
                        }
                        Log.v(TAG, "  Filter did not match: " + reason);
                    }
                }
            }

            if (receivers != null) {
                for (int i = 0; i < receivers.size(); i++) {
                    receivers.get(i).broadcasting = false;
                }
                mPendingBroadcasts.add(new BroadcastRecord(intent, receivers));
                if (!mHandler.hasMessages(MSG_EXEC_PENDING_BROADCASTS)) {
                    mHandler.sendEmptyMessage(MSG_EXEC_PENDING_BROADCASTS);
                }
                return true;
            }
        }
    }
    return false;
}

/**
 * Like {@link #sendBroadcast(Intent, boolean)}, but if there are any receivers for
 * the Intent this function will block and immediately dispatch them before
 * returning.
 */
public void sendBroadcastSync(Intent intent) {
    if (sendBroadcast(intent, false)) {
        executePendingBroadcasts();
    }
}

private void executePendingBroadcasts() {
    while (true) {
        BroadcastRecord[] brs = null;
        synchronized (mReceivers) {
            final int N = mPendingBroadcasts.size();
            if (N <= 0) {
                return;
            }
            brs = new BroadcastRecord[N];
            mPendingBroadcasts.toArray(brs);
            mPendingBroadcasts.clear();
        }
        for (int i = 0; i < brs.length; i++) {
            BroadcastRecord br = brs[i];
            for (int j = 0; j < br.receivers.size(); j++) {
                br.receivers.get(j).receiver.onReceive(mAppContext, br.intent);
            }
        }
    }
}
} 
```

# c# - 如何动态地将对象中的字段映射到另一个对象？

> ID：10880899
> 
> 赞同：4
> 
> 时间：2012-06-04T12:00:34.190
> 
> 标签：c#, c#-4.0

我有 2 个具有以下属性的对象：

对象 1：

人

*   姓名
*   地点
*   年龄
*   地址

对象 2：

个人规则

*   人名
*   人物位置
*   人士

PersonRule 由 UI 驱动，该 UI 设置人员规则（也可以设置多个），用户说出规则中应包含的姓名、位置、年龄。如果该人具有相同的属性值，则应将此规则与该人匹配。

我可以做一个简单的相等性检查，但是将来也有可能将一个新属性添加到人员规则中，例如人员地址。然后我需要通过考虑人员地址来检查规则是否与人员匹配。

有没有一种方法可以构建类似于将 personrule 的所有属性与 person 属性匹配的东西，这样当新属性添加到规则中时我不需要进行更改？当然这是假设相应的属性在 person 对象中可用。

谢谢，-迈克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T12:09:44.170

您可以使用可用的对象到对象映射器库之一，例如[AutoMapper](http://automapper.org/)或[EmitMapper](http://emitmapper.codeplex.com/)。他们将负责将数据从 Person 实例复制到 PersonRule 实例，以便与另一个 PersonRule 实例进行比较。例如，使用 EmitMapper，您的代码可能如下所示：

```
var config = new DefaultMapConfig().MatchMembers((m1, m2) => "Person" + m1 == m2);
ObjectMapperManager.DefaultInstance
                   .GetMapper<Person, PersonRule>(config)
                   .Map(person, personRule); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:04:56.637

看来您正在寻找[反射](http://msdn.microsoft.com/en-us/library/f7ykdhsy.aspx)，请参阅此示例问题：

[如何获取类的属性列表？](https://stackoverflow.com/questions/737151/how-to-get-the-list-of-properties-of-class)

# c - 使用c程序将xml文件转换为wbxml

> ID：10880900
> 
> 赞同：0
> 
> 时间：2012-06-04T12:00:37.927
> 
> 标签：c, xml, xml-parsing, wbxml

我必须编写一个 C 程序来将 XML 文件转换为 WBXML 格式，而不使用外部转换库。可能吗？

我已经用 C 创建了 XML 文件，现在想将其转换为 WBXML 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:19:28.010

你想知道这是否可能？- 是的。

你想知道怎么做吗？[- 检查外部库](https://libwbxml.opensync.org/browser)之一的实现。如果您浏览源代码，我相信您会有所了解。

# java - 在 JSP 中遍历 struts2 列表

> ID：10880901
> 
> 赞同：0
> 
> 时间：2012-06-04T12:00:40.943
> 
> 标签：java, javascript, jsp, struts2

我有一个列表，当我加载 JSP 页面时，我通过 java 方法填充该列表。Struts2 允许我以时尚的方式使用该列表。该列表包含诸如-

```
#<String Name,String Group> 
```

现在，可以有一个名称具有许多组的实例。该列表可以像 -

```
<Josh,A>
<Josh,B>
<Raj,A>
<Raj,B>
<Raj,C> 
```

我正在使用一种表单，其中 select 标签用于首先选择名称，然后选择名称的组。

我需要唯一地提供列表（即，下拉选择器应该只有一个名称实例），然后一旦我选择了一个名称，我应该能够为该名称选择相关组。所以说如果我选择“Josh”，那么下一个下拉菜单应该填充“A，B” - “Josh”属于组。

我一直在考虑实现这一点的方式是-从服务器获取此列表到客户端（Struts2），使用javascript处理此列表-获取另一个唯一的名称列表，然后在选择名称时处理该列表（已获取）具有该名称（'for' 遍历列表，并找到组）。

这可能吗？我可以使用什么方式在客户端处理列表变量（使用 javascript 函数）？

谢谢。

# matlab - matlab在GUI中显示avi

> ID：10880903
> 
> 赞同：0
> 
> 时间：2012-06-04T12:00:56.483
> 
> 标签：matlab, user-interface, avi

如何在我的 gui 中显示 avi 文件 (myVideo.avi)？

**如果有帮助，我的 avi 视频有 11 张图像由它们组成，我需要在无限循环中显示这 11 张图像（直到该图关闭）。**

这是我尝试过的：

```
function [] = GUI_400()
   hFig = figure;
   hAxes = axes('Parent',hFig,'Units','pixels','Position',[362 242 424 359]);
   movie('myVideo.avi','Parent',hAxes);  
   set(hAxes,'Visible','on');                             

end 
```

这就是我得到的：

![在此处输入图像描述](../Images/50a3278a7c8ca6c98e62ee6f5816ea9e.png)

谢谢你！

@Amro，我试过了，我得到了错误：

```
Undefined function or method 'VideoReader' for input arguments of type 'char'. 
```

所以我尝试了：

```
obj=mmreader('loading.avi');
a=read(obj);
frames=get(obj,'numberOfFrames');
for k = 1 : frames-1
    I(k).cdata = a(:,:,:,k);
    I(k).colormap = [];
end

vid = avireader(I);
sz = [vid.Height vid.Width];
mov = read(vid, [1 vid.NumberOfFrames]);

%# prepare GUI
p = get(0,'DefaultFigurePosition');
hFig = figure('Menubar','none', 'Resize','off', ...
'Position',[p(1:2) sz(2) sz(1)]);

 %# play movie
 movv = struct('cdata',squeeze(num2cell(mov,[1 2 3])), 'colormap',[]);
 movie(hFig, movv, 999, vid.FrameRate); 
```

但现在我得到了：

```
??? Initialization failed. (No combination of intermediate filters could be found to make the connection.)

Error in ==> mmreader.mmreader>mmreader.init at 423
        obj.MMReaderImpl = audiovideo.mmreader(fullName);

Error in ==> mmreader.mmreader>mmreader.mmreader at 133
        obj.init(fileName);

Error in ==> GUI_400 at 14
obj=mmreader('loading.avi'); 
```

[我知道此链接](http://www.mathworks.com/support/solutions/en/data/1-62LFUH/index.html?product=ML&solution=1-62LFUH)中有解决方案

但你能知道一个简单的解决方案吗？谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:27:00.070

考虑以下示例：

```
%# read video frames
vid = VideoReader('xylophone.mpg');
sz = [vid.Height vid.Width];
mov = read(vid, [1 vid.NumberOfFrames]);

%# prepare GUI
p = get(0,'DefaultFigurePosition');
hFig = figure('Menubar','none', 'Resize','off', ...
    'Position',[p(1:2) sz(2) sz(1)]);

%# play movie
movv = struct('cdata',squeeze(num2cell(mov,[1 2 3])), 'colormap',[]);
movie(hFig, movv, 999, vid.FrameRate); 
```

![截屏](../Images/d2a569d6909e2548cfe3cacea087e690.png)

# c#-4.0 - Windows Azure 模拟器“对内存位置的访问无效。”

> ID：10880909
> 
> 赞同：6
> 
> 时间：2012-06-04T12:01:18.953
> 
> 标签：c#-4.0, azure, visual-studio-debugging

我在一个使用 Windows Azure 的项目中工作，当我想调试解决方案时，Azure 模拟器会抛出一个错误（***但这并不总是！***）：

德语错误：

“**用于 Microsoft Visual Studio 的 Windows Azure 工具 Unzulässiger Zugriff auf einen Speicherbereich** ”

英文错误：

“**用于 Microsoft Visual Studio 的 Windows Azure 工具对内存位置的无效访问**”

如果有任何修复此错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-28T19:23:58.770

在 Windows 8.1中[已修复](http://blogs.msdn.com/b/cie/archive/2013/10/31/compute-emulator-invalid-access-to-memory-location.aspx)，但是对于旧版本的 Windows，有一个[KB 2588507 修补程序可用](http://support.microsoft.com/kb/2588507)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T13:13:47.343

查看解决方法：[MsConnect](https://connect.microsoft.com/VisualStudio/feedback/details/736847/windows-azure-devfabric-invalid-access-to-memory-location)

> 关闭计算和存储模拟器并重新启动 Visual Studio。（是的，这很烦人，但它又工作了 6-9 次）

它对我有用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T09:53:09.690

如果重新安装 Windows Azure SDK，它可以正常工作吗？

# c# - 添加组合框项目中的异常

> ID：10880917
> 
> 赞同：0
> 
> 时间：2012-06-04T12:01:45.180
> 
> 标签：c#, wpf

我试图将项目动态添加到 ComboBox。

但它会抛出异常“在使用 ItemsSource 时操作无效。改为使用 ItemsControl.ItemsSource 访问和修改元素”。

![在此处输入图像描述](../Images/f5ad1926e03ae89d4e6d088dc784666a.png)

```
namespace Trainning 
```

{

```
public partial class ComboBox : Window
{
    int intex_count;

    public ComboBox()
    {
        this.InitializeComponent();         

        add_items();

    }

    public List<object> add_items()
    {
        List<object> items = new List<object>();

        items.Add("chandru");
        items.Add(83);

        com_add_remove.ItemsSource = items;
        com_add_remove.SelectedIndex = 0;

        return items;
    }
 private void btn_add_Click(object sender, RoutedEventArgs e)
    {

        com_add_remove.Items.Add(txt_item.Text);
         intex_count = com_add_remove.Items.Count;
        com_add_remove.SelectedIndex = intex_count - 1;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:07:01.283

您的问题是，当您使用 时`ItemsSource`，您也不能手动将项目添加到同一组件中。因此，您必须手动使用`ItemsSouce` ***或***添加和删除项目。

我会选择`ItemsSource`, 并进行以下更改：

代替：

```
com_add_remove.Items.Add(txt_item.Text); 
```

和：

```
items.Add(txt_item.Text); 
```

这意味着您必须将项目添加为类变量，而不仅仅是 add_items 方法中的局部变量，以便您也可以从中引用它`btn_add_Click`。

您的另一个选择是更改 add_items 方法，以便添加项目而不是使用`ItemsSource`：

代替：

```
com_add_remove.ItemsSource = items; 
```

和：

```
items.ForEach( i => com_add_remove.Items.Add(i)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T12:05:13.017

将组合框绑定到某种数据源之后，您应该只更改数据源。

您需要`List<object> items = new List<object>();`在您的类中声明，然后从列表中添加和删除项目。您的组合框将自动更新。

```
public partial class ComboBox : Window
{
  int intex_count;
  List<object> items;
  public ComboBox()
  {
    this.InitializeComponent();         

    //key_value();

    TextBox tb = new TextBox();
    tb.Height = 50;
    tb.Width = 100;
    tb.TextAlignment = TextAlignment.Center;
    LayoutRoot.Children.Add(tb);
    tb.Text = "Dynamic TextBox";
    tb.Margin = new Thickness(0, 145, 87, 0);
    tb.VerticalAlignment = VerticalAlignment.Top;
    tb.HorizontalAlignment = HorizontalAlignment.Right;
    tb.Padding = new Thickness(15, 15, 15, 15); //to center the textbox's text  

    items = new List<object>();
    add_items();
    com_add_remove.ItemsSource = items;
    com_add_remove.SelectedIndex = 0;
}

public List<object> add_items()
{
    //List<object> items = new List<object>();

    items.Add("chandru");
    items.Add(83);        

    return items;
}

private void btn_add_Click(object sender, RoutedEventArgs e)
{

     items.Remove(txt_item.Text);
     intex_count = items.Count;

} 
```

# iphone - 在 iPhone 中实现 iToast

> ID：10880918
> 
> 赞同：0
> 
> 时间：2012-06-04T12:01:46.593
> 
> 标签：iphone, ios

我已经看到了这个链接，并且我知道了 iToast 的用法[，我看到了关于 iToast 的链接](http://code.google.com/p/toast-notifications-ios/)。但我没有任何地方如何将它集成到 iPhone 应用程序中。请告诉我如何处理它。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:03:10.873

你看过[文档吗](http://code.google.com/p/toast-notifications-ios/wiki/HowToUse)

# c++ - https，通过 C++ 和 OpenSSL 发布和获取

> ID：10880924
> 
> 赞同：4
> 
> 时间：2012-06-04T12:02:10.317
> 
> 标签：c++, post, https, get

我是 http/https 的新手。之前，我们的应用程序通过 USB 和串行 COM 端口进行通信，现在我们需要添加对 https 的支持。不要问我为什么，这是一个要求，我们的应用程序必须是一个汇集设备的服务器，这将是客户端。我已经设置了一个应用程序来使用 OpenSSL 库，但后来我了解到它没有创建 POST 和 GET 消息的功能。我是新手，所以我不确定我的术语是否正确。

我们的时间很短，所以有没有可以处理 https POST 和 GET 方法的 C++ 库？我知道 libcurl 可以处理客户端连接以及我在这里看到的其他库，例如 Poco。

有没有办法做到这一点而不必实现格式化 POST 和 GET 消息的功能？如果没有办法，我最终还是不得不这样做，这将引导我进一步研究，但正如所说，这不是想法：我们需要一个快速的解决方案，因为这不是工作的范围。但是如果需要更深入地挖掘http协议，我将不得不这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:56:12.260

我用[`Wt`](http://www.webtoolkit.eu/wt)的不多，但这就是我在提到使用 C++ 的 Web 开发时想到的！也许这是一种可能？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:56:55.287

我建议你要么使用

*   [PoCo 网络库](http://pocoproject.org/slides/200-Network.pdf)（使用 NetSSL 库的 HTTPServer HTTPClientSession 和 HTTPS）
*   使用 SSL 提升 Asio

    *   [http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/example/ssl/client.cpp](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/example/ssl/client.cpp)

# java - 在 Quartz 的 JobDataMap 中传递 BlockingQueue

> ID：10880926
> 
> 赞同：1
> 
> 时间：2012-06-04T12:02:21.227
> 
> 标签：java, quartz-scheduler, blockingqueue

有没有办法将 BlockingQueue 传递给 Quartz 框架中的作业？我尝试使用 JobDataMap 来传递 BlockingQueue 但这似乎不起作用。这里是相关的代码片段：

```
JobDetail job = newJob(Jobby.class)
  .withIdentity("myJob", "group1")
  .usingJobData("buffer", queue)
  .build(); 
```

也许有人对如何实现这一目标有想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:02:33.710

看起来您正在尝试实现生产者/消费者设计模式，其中生产者将工作放入队列中，而消费者使用 Quartz 定期检查该队列。这种设计还*不错*，但是您的实现将无法正常工作。通过将该队列传递给作业数据，Quartz 将对其进行序列化，并在作业触发时将其反序列化。队列不会通过引用传递，而是通过值（副本）传递。如果您意识到 Quartz 应该在分布式环境中工作，这是可以理解的，其中作业被调度并持久化到一个节点上的数据库中，并在另一个节点上反序列化和执行。

话虽如此，您需要重新评估您的实施。如果您不关心集群和分布，请让您的队列以某种方式在全球范围内可用。您的选择是：

*   全球[单身人士](/questions/tagged/singleton "显示标记为“单身人士”的问题")- 请，不
*   可通过[jndi获得的资源](/questions/tagged/jndi "显示标记为“jndi”的问题")
*   [spring](/questions/tagged/spring "显示标记为“春天”的问题") bean 注入生产者和作业类（Spring 很好地支持 Quartz）
*   ...

我特别推荐使用[spring](/questions/tagged/spring "显示标记为“春天”的问题")，[jndi](/questions/tagged/jndi "显示标记为“jndi”的问题")也是一个不错的选择。但是如果我们在谈论[jndi](/questions/tagged/jndi "显示标记为“jndi”的问题") - 为什么不考虑使用一些轻量级的[jms](/questions/tagged/jms "显示标记为“jms”的问题")实现而不是 Quartz？您将避免延迟。

# python - 如何使用 python 或 c 访问我的网络摄像头

> ID：10880928
> 
> 赞同：1
> 
> 时间：2012-06-04T12:02:27.663
> 
> 标签：python, c

我想创建一个 GUI 应用程序，它将访问本地网络摄像头并提供从流中获取快照的功能。我想使用 C/python 开发这个应用程序。谁能告诉我如何访问我的本地网络摄像头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:04:46.647

您可以使用具有 Python 绑定的[OpenCV](http://code.google.com/p/ctypes-opencv/)来捕获网络摄像头流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:37:22.147

在 Linux 中，您可以使用[v4l2](http://v4l2spec.bytesex.org/spec/)来完全控制您的网络摄像头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T12:07:30.957

您可以尝试[VideoCapture](http://videocapture.sourceforge.net/)，它是“用于访问视频设备的 Win32 Python 扩展”。

# javascript - 在提交之前验证表单上的许多输入字段

> ID：10880931
> 
> 赞同：0
> 
> 时间：2012-06-04T12:02:48.557
> 
> 标签：javascript, validation, dom-events

我有一个表格，其中包含许多输入框，这些输入框将填充来自数据库的数据，用户将对其进行编辑。

保存后，我希望验证所有输入框以检查用户是否输入了有效数据，例如“仅限数值”或该框不为空？

提交前是否有任何简单/优化的方法来检查所有框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:10:14.007

这是[来自 javascript-coder.com 的简单 javascript 验证器](http://www.javascript-coder.com/html-form/javascript-form-validation.phtml)，可让您设置规则。

它有一个关于如何设置的教程。

并且[10 Useful jQuery Form Validation Techniques and Tutorials](http://speckyboy.com/2009/12/17/10-useful-jquery-form-validation-techniques-and-tutorials-2/) 提供了如何在 jquery 中执行此操作的示例。

# ssas - SSAS 是定期快照的正确选择

> ID：10880938
> 
> 赞同：1
> 
> 时间：2012-06-04T12:03:16.093
> 
> 标签：ssas, snapshot, fact

我是 SSAS 的新手。我有一个数据库，其中有一个协议表，其中协议的状态随时间而变化。这存储在协议日志中。状态可以是很长一段时间内的任意组合。我需要回答的一组问题是有多少协议处于给定状态，以及随着时间的推移显示状态的趋势。我正在阅读 Kimball，定期快照似乎是最合适的，但我不知道如何设计事实表。我是否将数据预聚合为按状态细分的时段？然后我如何在 SSAS 中操作它以及聚合如何工作，因为它更像是银行余额。我有点了解一些概念，但我仍然很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:48:19.383

同意，这是定期快照的一个很好的例子。

在这种情况下，您需要一个状态维度和一个带有期间指示器的事实。您的报告还需要按时间段进行过滤。

ETL有点复杂，因为在当前期间，您清除并重新加载当前期间数据。以前的时期到当前时期是固定的。显然，您无法了解在一段时间内多次更改的状态，因此应根据数据变化的速度以及报告的频率来选择时间段。这也是为什么定期快照经常与事务事实表结合使用的原因

# visual-studio - MsBuild：向文件添加文本或自定义信息

> ID：10880947
> 
> 赞同：0
> 
> 时间：2012-06-04T12:03:48.987
> 
> 标签：visual-studio, msbuild, msbuild-task, msbuild-4.0

下面的代码可以很好地将文件`Source`从`Destination folder`. 我想按顺序制作复制的文件，例如`1.zip.exe 2.NetFx.exe`等等……或`I.zip.exe II.NetFx.exe`等等……

基本上我想告诉用户按顺序安装工具。我怎样才能做到这一点？？？请给我一些想法...！

```
 <PropertyGroup Condition="'$(OutDir)'==''">
          <OutDir>..\..\..\OutputSetup\</OutDir>
    </PropertyGroup>

    <ItemGroup>
        <SourceFiles Include="..\tools\zip\**\*.*"/>
        <SourceFiles Include="..\tools\NetFx\**\*.*"/>
    </ItemGroup>

    <Target Name="CopyTools">

            <Copy SourceFiles="@(SourceFiles)" DestinationFiles="@($(OutDir)\%(RecursiveDir)%(Filename)%(Extension)" />
    </Target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:46:50.257

我希望您可以按照以下代码解决此问题：

```
<PropertyGroup Condition="'$(OutDir)'==''">
  <OutDir>..\..\..\OutputSetup\</OutDir>
</PropertyGroup>

<ItemGroup>
    <SourceFiles Include="..\tools\zip\**\*.*">
       <Number>1</Number>
    </SourceFiles>
    <SourceFiles Include="..\tools\NetFx\**\*.*">
       <Number>2</Number>
    </SourceFiles>
</ItemGroup>

<Target Name="CopyTools">

    <Copy SourceFiles="@(SourceFiles)" DestinationFiles="@($(OutDir)\%(SourceFiles.Number)%(RecursiveDir)%(Filename)%(Extension)" />
</Target> 
```

# symfony1 - phpDocumentor 2 安装程序无法使用 composer 安装 symfony/Console

> ID：10880950
> 
> 赞同：0
> 
> 时间：2012-06-04T12:04:02.770
> 
> 标签：symfony1, phpdoc, phar

我已经下载（克隆）了 phpdocumentor 2 的 github 版本，并按照[phpdoc 网站上的安装说明进行操作](http://phpdoc.org/docs/latest/for-users/installation.html#manual-installation)

在作曲家安装步骤 3 ( `php composer.phar install`) 我收到以下错误消息

```
[RuntimeException]                                                                              
  Failed to clone http://github.com/symfony/Console via git, https and http protocols, aborting.  

- git://github.com/symfony/Console                                                              
  fatal: reference is not a tree: 1edd7b739561e87bde81ff1c2ce08bd89e92277e                      

- https://github.com/symfony/Console                                                            
  fatal: reference is not a tree: 1edd7b739561e87bde81ff1c2ce08bd89e92277e                      

- http://github.com/symfony/Console                                                             
  fatal: reference is not a tree: 1edd7b739561e87bde81ff1c2ce08bd89e92277e 
```

看来symfony git树变了，还是..？你知道如何解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:40:24.933

这可能是更新控制台子树拆分的错误。请使用`php composer.phar update`而不是安装。这应该可以解决这种情况。

# windows-phone-7 - WP7：NotifyPropertyChanged 的 奇怪行为

> ID：10880953
> 
> 赞同：0
> 
> 时间：2012-06-04T12:04:08.763
> 
> 标签：windows-phone-7, xaml

我有一个绑定到可观察产品集合的列表框。每个产品都有一个 IsFavorite bool 属性，使用转换器绑定到 Image。

我填写了 observable 集合，所有产品都有 IsFavorite=false。然后我从独立存储加载收藏夹，并在 foreach 中为绑定到列表框的可观察集合中的每个产品更新 IsFavorite 属性（调用 NotifyPropertyChanged）。图像不会因视图中的产品而改变。如果我滑开然后返回到更改的项目，则图标会更改。

问题是什么？如何在 scolling 之后强制绑定立即刷新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:51:58.973

我知道你说你正在引发 PropertyChanged 事件，但我担心你的类“产品”没有实现 INotifiedPropertyChanged 并且在布尔 IsFavorite 更改时碰巧没有引发 propertyChanged 事件。

尝试在您的产品类中实现 INotifiedPropertyChanged。（以及在 Product.IsFavorite 属性上）

# apache-flex - 如何在 flex 4.6 mobile 中消除组件之间的间隙

> ID：10880956
> 
> 赞同：2
> 
> 时间：2012-06-04T12:04:11.067
> 
> 标签：apache-flex, mobile, flex4.5

我尝试在 flex 4.6 mobile 中使用两个 rect 组件。两者都被放置在一个 vgroup 中。但我可以看到两个矩形组件之间的差距。是否可以自定义此间隙。我不认为 vgroup 具有垂直间隙属性。我想让差距为0。

谢谢，苏克什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:06:50.733

vgroups 和 hgroups 有一个 Gap 属性

```
<s:vgroup gap="0"/> 
```

如果您不指定，我认为默认值为 8。

# windows-8 - 在 BackgroundTaskBuilder.Register 中访问被拒绝

> ID：10880957
> 
> 赞同：0
> 
> 时间：2012-06-04T12:04:13.847
> 
> 标签：windows-8, windows-runtime, microsoft-metro

```
var builder=new BackgroundTaskBuilder();

builder.Name=name;
builder.TaskEntryPoint=taskEntryPoint;
builder.SetTrigger(trigger);

if(condition!=null)
  builder.AddCondition(condition);

builder.Register(); // in this step I get exception System.UnauthorizedAccessException. Additional information: Access is denied. 
```

此异常在 Windows 8 发布预览中引发。在消费者预览版中，我没有收到此异常。

我使用 SystemTrigger (SystemtriggerType.UserPresent) 和 SystemCondition(SystemConditionType.InternetAvailable)

在 Package.appxmanifest 文件中，我将系统事件复选框设置为 true 并输入入口点值。同样在 Package.appxmanifest 代码中，我删除了“可执行”属性。

也许有人知道我该如何解决？

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T07:52:52.027

一些 SystemTriggers，但确实需要应用程序在锁定屏幕上：SessionConnected、UserPresent、UserAway 和 ControlChannelReset 如果您使用这些触发器而不在锁定屏幕上启动，BackgroundTaskBuilder.Register() 调用将失败并显示“访问被拒绝”

# android - Android GridView中拖拽图片的问题

> ID：10880959
> 
> 赞同：1
> 
> 时间：2012-06-04T12:04:19.723
> 
> 标签：android, gridview, draggable

我必须将图像加载到 gridview 中，并且我应该能够将这些图像拖放到 gridview 中。我使用了以下两个类。 [https://github.com/thquinn/DraggableGridView/tree/master/src/com/animoto/android/views](https://github.com/thquinn/DraggableGridView/tree/master/src/com/animoto/android/views)。我已经在我的活动文件中添加了这个

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    dgv = (DraggableGridView)findViewById(R.id.dgv);

    loadImages();

}   

private void loadImages() {

    int images[] = {R.drawable.p_1, R.drawable.p_2, R.drawable.p_3, R.drawable.p_4, R.drawable.p_5, R.drawable.p_6};

    for (int i = 0; i < images.length; i++)
    {
        ImageView iv = new ImageView(getApplicationContext());
        iv.setBackgroundDrawable(getResources().getDrawable(images[i]));
        dgv.addView(iv);
    }

} 
```

现在我能够在 gridview 中拖放图像。这是我的问题
1\. 我如何只修复一行中的 3 个图像。
2\. 我怎么知道我的图片在点击按钮时的位置。拖放后，如何获取每个图像的位置？（即我想知道每个图像的位置/cell_number）
3\. 我怎样才能有不同的图像背景视图。当用户拿起它进行拖动时，我只需要在背景中显示每个图像位置的数量。当他拿起要拖动的图像时，背景视图（代表图像的位置）不应移动。
谁能帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T18:54:31.587

1.  可能在这里有点晚了，但是您必须对网格视图进行一些更改才能获得每列更多/更少的图像。将项目作为库项目导入并进行所需的任何更改。

2.  听起来您会想要使用 DGV 的 setOnItemClickListener 和 setOnRearrangeListener。查看示例项目以获取示例。

3.  同样，请参阅示例项目以了解如何做到这一点的一种方法。

# android - 单参考动态按钮创建

> ID：10880960
> 
> 赞同：0
> 
> 时间：2012-06-04T12:04:25.187
> 
> 标签：android

在这里，我正在使用 for 循环动态创建 20 个按钮

例子

```
for(int i =1 ;i <= 20 ;i++){
Button b = new Button(this);
b.setText(String.valueOf(i));
b.setId(String.valueOf(i));
b.setBackgroudColor(Color.Red);

b.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            b.setBackgroundColor(Color.GREEN);

        }
);

} 
```

如果我选择第一个按钮颜色将变为绿色，其余全部为红色。同样，如果我选择第 2 个按钮，第 1 个和第 2 个按钮颜色将为绿色，其余均为红色。这是它工作正常的方式。但我的要求是，如果我第二次选择任何按钮，所有按钮和我按下的上一个按钮颜色应该是红色。要做到这一点，我没有得到以前的按钮 ID。可以解决这个问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:11:15.440

保持先前按下按钮的引用：

```
final Button prevButton;
for(int i =1 ;i <= 20 ;i++){
    Button b = new Button(this);    
    b.setText(String.valueOf(i));
    b.setId(String.valueOf(i));
    b.setBackgroudColor(Color.Red);

    b.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                if(prevButton != null)
                    prevButton.setBackgroundColor(Color.RED);
                b.setBackgroundColor(Color.GREEN);
                prevButton = (Button)v;
            }
    );
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-04T12:15:20.937

您确定使用 20 Buttons 是一个不错的选择吗？你可以使用 GridView 吗？您也可以更改背景颜色：forums.pragprog.com/forums/152/topics/10301

# css - CSS display:none 和 :hover 可见性

> ID：10880962
> 
> 赞同：1
> 
> 时间：2012-06-04T12:04:39.720
> 
> 标签：css, hover

当另一个图像悬停时，我试图显示一个图像。在 Safari 上一切正常，但在 Chrome 和 Firefox 上，效果有效并且可以看到图像*占位符，但它们无法加载图像。*我在其他地方搜索并找到了与可见性有关的主题：隐藏等，但没有一个涉及跨浏览器的问题。

这是HTML：

```
 <div class="profile-picture-wrap">
<a class="propic">
<img src="../images/propicsmall.jpg" width="142" height="194">
<span><img src="../images/profilepic.jpg" width="290" height="186" /></span></a>
</div> 
```

这是CSS：

```
 .propic span{
position:absolute;
padding: 5px;
top: 10px;
left: 10px;
display: none;
color: black;
text-decoration: none;
     }

    .profile-picture-wrap:hover .propic span{
display: block;
position:absolute;
top: -3px;
right: 900px;
left:  640px;

     } 
```

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:27:04.443

我尝试了您的示例代码……经过一次小的编辑，它似乎在 Chrome 中运行良好。

我不得不将您的路径从 ../images/image.jpg 更改为 images/image.jpg

您是否使用过 Chrome 中的开发者工具来查看资源（图像）是否正确加载？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:20:40.597

我将 z-index 添加到 .propic span css 并在悬停后更改 span 的左右两侧以在 jsfiddle 窗口中正确查看。

在这里检查：http: [//jsfiddle.net/UH54X/1/](http://jsfiddle.net/UH54X/1/)

我不确定它会帮助你。我想你只想要这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-15T01:57:38.937

原来图像是已重命名为 .jpg 的 .tiff 文件。Chrome 和 Firefox 似乎不喜欢这样，并且拒绝将它们识别为可检索文件。

# asp.net - Web 场方案中的依赖方 (IsSessionMode = true)

> ID：10880968
> 
> 赞同：0
> 
> 时间：2012-06-04T12:04:49.703
> 
> 标签：asp.net, wif, geneva-framework

首先，我必须设置**IsSessionMode = true**以减小 cookie 大小

我需要平衡 2 个 RP 实例我在 2 台具有 RP 实例的不同机器上执行了以下步骤：

1) 订阅**ServiceConfigurationCreated 事件**

```
private void WSFederationAuthenticationModule_ServiceConfigurationCreated(object sender, ServiceConfigurationCreatedEventArgs e)
    {
        X509Certificate2 certificate = CertificateUtil.GetCertificate(StoreName.My, StoreLocation.LocalMachine, ConfigHelper.FrontendCertificate);

        var sessionTransforms = new List<CookieTransform>(new CookieTransform[] 
        { 
            new DeflateCookieTransform(), 
            new RsaEncryptionCookieTransform(certificate),
            new RsaSignatureCookieTransform(certificate)
        });

        SessionSecurityTokenHandler sessionHandler = new SessionSecurityTokenHandler(sessionTransforms.AsReadOnly());
        e.ServiceConfiguration.SecurityTokenHandlers.AddOrReplace(sessionHandler);
    } 
```

2) 带走会话到**asp.net 状态服务**

**问题：**

当我尝试登录 STS 时，我得到从 RP 到 STS 的无限重定向

我不明白为什么。令牌存储在 session(IsSessionMode = true) 中。会话由 asp.net 状态服务在 2 个不同的主机之间共享。

问题是什么？我错过了什么？

我想我不明白一些重要的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:25:42.287

My best guess is WIF is simply failing to establish a session at the RP side, and the user is landing on an unauthorized page (a custom error page maybe?), which prompts WIF to redirect back to the STS for authentication, and now you're looping.

Some experiments you might try:

1.  Turn off IsSessionMode = false, and see if the problem still occurs. If it doesn't then you know WIF is choking on session creation, and you can check to make sure your RP is successfully contacting the ASP.NET state service for example.

2.  Install Fiddler (http://fiddler2.com/fiddler2/) which is an invaluable tool for debugging such infinite redirects. Collect some traces, see what's going on. You might also consider posting your RP web.config.

# solr - Solr/Lucene 模糊搜索太慢

> ID：10880976
> 
> 赞同：1
> 
> 时间：2012-06-04T12:05:17.217
> 
> 标签：solr, full-text-search, search-engine, lucene

我正在尝试使用 Solr 服务器实现位置（城市、地区、国家、对象）模糊搜索。目前，我的索引包含大约 0.8-1.0 M 项。使用模糊搜索（~0.7）效果非常好，但对我来说太慢了（经常是 0.2-0.6 秒）。使用的分词器是`<tokenizer class="solr.StandardTokenizerFactory"/>`. 作为替代方案，我尝试过`<tokenizer class="solr.WhitespaceTokenizerFactory"/>`- 它在性能方面很棒（大约快 100 倍），但它不提供模糊搜索:(

你知道我可以使用什么不同的方法吗？如果可能的话，我想以更快的方式使用模糊搜索功能。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T22:45:28.043

您的问题与您使用的分析仪无关。当您搜索 Califrna~0.7 时，Lucene 会遍历索引中的所有术语并计算“Califrna”与所有术语之间的（Levenshtein）编辑距离。这是一个非常昂贵的操作。

Lucene 4.0 版将解决此问题。不幸的是，Solr 附带的 Lucene 版本正在使用旧的蛮力方法。

https://issues.apache.org/jira/browse/LUCENE-2089

http://java.dzone.com/news/lucenes-fuzzyquery-100-times

如果对你来说没问题，我建议从trunk 下载 Solr/Lucene 并测试新的模糊查询是如何工作的。

[http://wiki.apache.org/solr/NightlyBuilds](http://wiki.apache.org/solr/NightlyBuilds)

尽管主干很稳定，但不建议用于生产用途。我可以建议你两种类似的方法：

1 - 拼写检查器

[http://wiki.apache.org/solr/SpellCheckComponent](http://wiki.apache.org/solr/SpellCheckComponent)

http://www.lucidimagination.com/blog/2010/08/31/getting-started-spell-checking-with-apache-lucene-and-solr/

SpellChecker 使用 n-gram 构建其小型索引，以便执行快速查找。它也使用 Levenshtein 距离，但不是迭代所有术语，而是仅计算相关术语的距离。

您需要先对“Californa”执行拼写检查，它会建议您使用“Californa”。然后，您可以在主索引的查询中使用“California”，而无需进行模糊查询。

2- 自动建议

http://wiki.apache.org/solr/Suggester

您可以使用建议器组件提供正确的拼写作为用户类型查询。这会快很多。它支持 JaspellLookup 类的模糊搜索。JaspellLookup 需要更新以启用模糊搜索。Wiki 并没有说太多关于需要更新的内容。如果 usePrefix 设置为 false，我猜它应该执行模糊查找。

# java - Android 2.3.3，使标签列表可滚动？

> ID：10880978
> 
> 赞同：1
> 
> 时间：2012-06-04T12:05:25.070
> 
> 标签：java, android, android-layout, tabs

我以这个简单的布局为例：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <HorizontalScrollView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:fillViewport="true"
            android:scrollbars="none" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_gravity="center" />
        </HorizontalScrollView>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >
        </FrameLayout>
    </LinearLayout>

</TabHost> 
```

在代码中添加 8 个选项卡后，我可以看到它们被挤在一起。如何向选项卡添加可滚动功能？（只是标签，而不是内容）

我手机上的一个应用程序具有此功能，并且无需任何滚动条即可完成。基本上，要移动我只需按下并按住，然后将选项卡向左拖动以显示更多选项卡。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:16:08.597

你试过这个吗？

```
<HorizontalScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </TabHost>

</HorizontalScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:25:03.790

请为您的 TabWidget 试试这个：

```
 <HorizontalScrollView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:fillViewport="true"
    android:scrollbars="none"
    android:layout_alignParentBottom="true">
    <TabWidget
      android:id="@android:id/tabs"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:layout_gravity="center"/>
  </HorizontalScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:49:25.133

您可以尝试设置每个选项卡的最小宽度，如下所示：

```
 for (int i = 0; i < tabHost.getTabWidget().getChildCount(); i++) {
        tabHost.getTabWidget().getChildAt(i).setMinimumWidth(200);
    } 
```

# perl - 如何从 Perl 中的 2 个文件之一中删除公共行？

> ID：10880980
> 
> 赞同：2
> 
> 时间：2012-06-04T12:05:34.470
> 
> 标签：perl

我有 2 个文件，一个小一个，一个大一个。小文件是大文件的子集。

例如：

小文件：

```
solar:1000
alexey:2000 
```

大文件：

```
andrey:1001
solar:1000
alexander:1003
alexey:2000 
```

我想从 Big.txt 中删除 Small.txt 中也存在的所有行。换句话说，我想删除大文件中小文件共有的行。

因此，我编写了一个 Perl 脚本，如下所示：

```
#! /usr/bin/perl

use strict;
use warnings;

my ($small, $big, $output) = @ARGV;

open(BIG, "<$big") || die("Couldn't read from the file: $big\n");
my @contents = <BIG>;
close (BIG);

open(SMALL, "<$small") || die ("Couldn't read from the file: $small\n");

while(<SMALL>)
{
    chomp $_;
    @contents = grep !/^\Q$_/, @contents;
}

close(SMALL);

open(OUTPUT, ">>$output") || die ("Couldn't open the file: $output\n");

print OUTPUT @contents;
close(OUTPUT); 
```

但是，此 Perl 脚本不会删除 Big.txt 中 Small.txt 共有的行

在这个脚本中，我首先打开大文件流并将整个内容复制到数组@contents 中。然后，我遍历小文件中的每个条目并检查它是否存在于大文件中。我从大文件中过滤该行并将其保存回数组中。

**我不确定为什么这个脚本不起作用？谢谢**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T12:23:47.237

您的脚本不起作用，因为[grep](http://perldoc.perl.org/functions/grep.html)使用`$_`并接管（持续时间`grep`）循环中的旧值`$_`（例如，`$_`您在正则表达式中使用的变量不是用于在`while`块中存储循环值的变量 - 它们是名称相同，但范围不同）。

改用命名变量（通常，永远不要`$_`用于任何超过 1 行的代码，正是为了避免这种类型的错误）：

```
while (my $line=<SMALL>) {
    chomp $line;
    @contents = grep !/^\Q$line/, @contents;
} 
```

但是，正如 Oleg 指出的，更有效的解决方案是将小文件的行读入哈希，然后处理大文件 ONCE，检查哈希内容（我也对样式进行了一些改进-以后随时学习和使用，使用词法文件句柄变量、3-arg 形式的打开和 IO 错误打印（通过`$!`）：

```
#! /usr/bin/perl

use strict;
use warnings;

my ($small, $big, $output) = @ARGV;

use File::Slurp;
my @small = read_file($small);
my %small = map { ($_ => 1) } @small;

open(my $big, "<", $big) or die "Can not read $big: Error: $!\n";
open(my $output, ">", $output) or die "Can not write to $output: Error: $!\n";

while(my $line=<$big>) {
    chomp $line;
    next if $small{$line}; # Skip common
    print $output "$line\n";
}

close($big);
close($output); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T12:11:50.120

它不起作用有几个原因。首先，行中`@content`的行仍然有它们的换行符。其次，当你`grep`, `$_`in`!/^\Q$_/`不是设置为小文件的最后一行，而是设置为`@contents`数组的每个元素时，有效地使它：对于列表中的每个元素，返回除此元素之外的所有内容，最后留下空列表。

这并不是真正的好方法——你正在读取大文件，然后尝试重新处理它几次。首先，读取一个小文件并将每一行放入哈希中。然后在循环中读取大文件`while(<>)`，这样您就不会完全浪费内存。在每一行上，检查是否键入[`exists`](http://p3rl.org/exists)先前填充的哈希，如果是 - 进行[`next`](http://p3rl.org/next)迭代，否则打印该行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T19:10:12.737

这是您的问题的一个小而有效的解决方案：

```
#!/usr/bin/perl

use strict;
use warnings;

my ($small, $big, $output) = @ARGV;

my %diffx;

open my $bfh, "<", $big or die "Couldn't read from the file $big: $!\n";
# load big file's contents
my @big = <$bfh>;
chomp @big;
# build a lookup table, a structured table for big file
@diffx{@big} = ();
close $bfh or die "$!\n";

open my $sfh, "<", $small or die "Couldn't read from the file $small: $!\n";
my @small = <$sfh>;
chomp @small;
# delete the elements that exist in small file from the lookup table
delete @diffx{@small};
close $sfh;

# print join "\n", keys %diffx;

open my $ofh, ">", $output or die "Couldn't open the file $output for writing: $!\n";
# what is left is unique lines from big file
print $ofh join "\n", keys %diffx;  
close $ofh;

__END__ 
```

PS 我从[Perl Cookbook, 2nd Edition](https://rads.stackoverflow.com/amzn/click/com/0596003137)中学到了这个技巧和许多其他技巧。谢谢

# java - 如何在所有窗口的顶部显示 JOptionPane

> ID：10880981
> 
> 赞同：18
> 
> 时间：2012-06-04T12:05:34.937
> 
> 标签：java, windows, swing, joptionpane

我创建了一个 DialogUtil，它显示了不同情况下 JOptionPan 的数量。有时在我的动作类中使用如下的空参数调用此方法。

```
DialogUtil.showNotExist(null,xml.getName().concat(" is null or")); 
```

在这种情况下，JOptionPane 不会出现在窗口顶部。

**如何向 JOptionPane 添加一些内容以始终显示在顶部？**

```
public static void showNotExist(JPanel panel, String action) {
    JOptionPane.showMessageDialog(panel, new JLabel(action.concat(" doesn't exist."), 2));
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2017-11-23T07:23:49.590

您可以使用以下代码将 JOptionPane 始终设置在最前面：-

```
JFrame jf=new JFrame();
jf.setAlwaysOnTop(true);
int response = JOptionPane.showConfirmDialog(jf,"Message", "Title", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-08T23:10:40.923

你有没有尝试过这样的事情？

```
JOptionPane optionPane = new JOptionPane();
JDialog dialog = optionPane.createDialog("Title");
dialog.setAlwaysOnTop(alwaysOnTop);
dialog.setVisible(true); 
```

无法保证操作系统会允许您的对话框始终位于顶部，但它通常会起作用。

如果您有一个现有的窗口或对话框，并且希望将其置于顶部，但又不想永久设置 alwaysOnTop，则应该在保留 alwaysOnTop 的旧值的情况下这样做：

```
boolean supported = window.isAlwaysOnTopSupported();
boolean old_alwaysOnTop = window.isAlwaysOnTop();
if (supported) {
  window.setAlwaysOnTop(true);
}
window.toFront();
window.requestFocus();
if (supported) {
  window.setAlwaysOnTop(old_alwaysOnTop);
} 
```

仅在 SwingThread 上运行该代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-04T12:22:24.677

有两个可能的问题

*   JOptionPane 从 EDT 中调用，然后只有工具栏（来自 Native OS 的标题在屏幕上可见，RootPane 不可见）在屏幕上可见

*   在那里你可以测试 JOptionPanes 功能，其中 JOptionPane.showInternalMessageDialog() 在所有情况下都会造成麻烦，即有另一个带有 setModal(true) 的 JDialog，我不知道的真正原因，同样应该是 ModalityTypes

*   无法同时在屏幕上显示两个 JOptionPanes

代码

```
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JButton;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Toolkit;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.MouseAdapter;
import javax.swing.JDialog;
import javax.swing.JOptionPane;
import javax.swing.JRootPane;
import javax.swing.Timer;
//http://stackoverflow.com/questions/8670297/make-java-swing-modal-dialog-behave-like-mac-osx-dialogs
public class ModalDialogDemoFrame extends JFrame {

    private static final long serialVersionUID = 1L;
    private ModalDialogDemoFrame modalDialogDemo;

    public ModalDialogDemoFrame() {
        modalDialogDemo = this;
        setBounds(100, 100, 400, 400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JButton buttonDialog = new JButton("Open Dialog");
        buttonDialog.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent arg0) {
                // Create a Modal Dialog with this Frame as Parent.
                ModalDialog modalDialog = new ModalDialog(modalDialogDemo, true);
                modalDialog.setVisible(true);
            }
        });
        getContentPane().add(buttonDialog, BorderLayout.CENTER);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            public void run() {
                try {
                    ModalDialogDemoFrame window = new ModalDialogDemoFrame();
                    window.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }
}
//http://stackoverflow.com/questions/4577424/distinguish-between-a-single-click-and-a-double-click-in-java/4577475#4577475
class ClickListener extends MouseAdapter implements ActionListener {

    private final static int clickInterval = (Integer) Toolkit.getDefaultToolkit().getDesktopProperty("awt.multiClickInterval");
    private MouseEvent lastEvent;
    private Timer timer;

    public ClickListener() {
        this(clickInterval);
    }

    public ClickListener(int delay) {
        timer = new Timer(delay, this);
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        if (e.getClickCount() > 2) {
            return;
        }
        lastEvent = e;
        if (timer.isRunning()) {
            timer.stop();
            doubleClick(lastEvent);
        } else {
            timer.restart();
        }
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        timer.stop();
        singleClick(lastEvent);
    }

    public void singleClick(MouseEvent e) {
    }

    public void doubleClick(MouseEvent e) {
    }
}

class ModalDialog extends JDialog {

    private static final long serialVersionUID = 1L;

    public ModalDialog(JFrame parent, boolean modal) {
        Dimension dimensionParentFrame = parent.getSize();
        setSize(new Dimension((parent == null) ? 300 : dimensionParentFrame.width / 2, 75));
        Dimension dimensionDialog = getSize();
        int x = parent.getX() + ((dimensionParentFrame.width - dimensionDialog.width) / 2);
        setLocation(x, parent.getY() + parent.getInsets().top);
        //setUndecorated(true);
        setModal(modal);
        //setUndecorated(true);
        //getRootPane().setWindowDecorationStyle(JRootPane.ERROR_DIALOG);
        setModalityType(ModalityType.APPLICATION_MODAL);
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        final JButton buttonClose = new JButton("Close");
        buttonClose.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
//ok
                /*JOptionPane.showMessageDialog(buttonClose,
                "Eggs are not supposed to be green.",
                "Inane warning",
                JOptionPane.WARNING_MESSAGE);*/
//uncomment for un_handled GUI, JOptionPane is behing JFrame I think....
                /*JOptionPane.showInternalMessageDialog(buttonClose,
                "Eggs are not supposed to be green.",
                "Inane warning",
                JOptionPane.WARNING_MESSAGE);*/
//ok
                /*JOptionPane.showConfirmDialog(buttonClose,
                "Eggs are not supposed to be green.",
                "Inane warning",
                JOptionPane.WARNING_MESSAGE);*/
//ok                
                /*JOptionPane.showMessageDialog(null,
                "Eggs are not supposed to be green.",
                "Inane warning",
                JOptionPane.WARNING_MESSAGE);*/
//uncomment for un_handled GUI
//Exception occurred during event dispatching:
//java.lang.RuntimeException: JOptionPane: parentComponent does not have a valid parent                
                /*JOptionPane.showInternalMessageDialog(null,
                "Eggs are not supposed to be green.",
                "Inane warning",
                JOptionPane.WARNING_MESSAGE);*/
//ok                
                JOptionPane.showConfirmDialog(null,
                        "Eggs are not supposed to be green.",
                        "Inane warning",
                        JOptionPane.WARNING_MESSAGE);
                dispose();
            }
        });
        add(buttonClose, BorderLayout.CENTER); // comment for listening
        addMouseListener(new ClickListener() {

            @Override
            public void singleClick(MouseEvent e) {
                System.out.println("single");
            }

            @Override
            public void doubleClick(MouseEvent e) {
                System.out.println("double");
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-04T12:11:39.753

我不知道是什么`WebOptionPane`，`WebPanel`但如果它们基于`JOptionPane`，那么问题是您将`null`第一个参数传递给该`showXXX()`方法。如果你希望它`JOptionPane`是模态的——这迫使它位于指定窗口的前面——那么你需要为第一个参数指定一个窗口（即，`JFrame`a——。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-13T17:35:25.463

```
public static void showNotExist(JPanel panel, String action) {
    JOptionPane.showMessageDialog(rootPane, new JLabel(action.concat(" doesn't exist."), 2));
} 
```

尝试将根窗格作为 showMessageDialog 部分中的第一个值

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-08T00:20:47.283

如果您的类扩展了 JFrame，那么只需设置类属性 setAlwaysOnTop(true); 在 JOptionPane.showMessageDialog(null,"OKay"); 之前的构造函数中的任何位置；

我用它来复制文件并检查，甚至不需要 JFrame 而需要 JOptionPane。

PS 如果您不希望主 JFrame 始终显示在顶部，则需要创建虚拟 JFrame 或重置属性 setAlwaysOnTop(false); 在 JOptionPane 之后。

# scala - Scala，Currying 多参数组方法？

> ID：10880982
> 
> 赞同：2
> 
> 时间：2012-06-04T12:05:42.793
> 
> 标签：scala, currying

我想知道是否可以在多参数组函数上使用柯里化：

```
scala> def sum(a: Int)(b: Int): Int = { a+b }
sum: (a: Int)(b: Int)Int

scala> sum(3)(4)
res2: Int = 7

scala> val partFunc = sum(3) _
partFunc: Int => Int = <function1>

scala> partFunc(4)
res3: Int = 7

scala> val partFunc2 = sum _ _
<console>:1: error: ';' expected but '_' found.
       val partFunc2 = sum _ _
                             ^

scala> val partFunc2 = (sum _) _
<console>:8: error: _ must follow method; cannot follow Int => (Int => Int)
       val partFunc2 = (sum _) _ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:19:11.240

写作`sum _`与 的参数没有任何关系`sum`，只是将*函数对象* `sum`与函数的*应用*区分开来。

因此，您可以编写：

```
scala> val partFunc2 = sum _
partFunc2: Int => (Int => Int) = <function1> 
```

从类型信息可以看出，这已经是`sum`带两个`Int`参数的柯里化版本了。

当然，您可以像以前一样继续使用`partFunc2(4)`类型`Int => Int`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T12:13:49.983

你可以这样做：

```
val partFunc2 = sum _ 
```

或像这样：

```
val partFunc2 = sum(3) _ 
```

# sqlite - sqlalchemy 没有加载 sqlite 数据库

> ID：10880987
> 
> 赞同：1
> 
> 时间：2012-06-04T12:05:47.300
> 
> 标签：sqlite, sqlalchemy, openshift

我的应用程序在 openshift 上运行，我无法加载数据库。这些是我的代码：

```
from sqlalchemy import Column, Integer, String,create_engine,ForeignKey,Time
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker
from classes import Team,Match,Channel,Country,Mapping
import json

app = Flask(__name__)

engine = create_engine('sqlite:///../data/euro2012tvguide.sqlite')
Session = sessionmaker(bind=engine)
session = Session() 
```

在文件数据中，我有文件 euro2012tvguide.sqlite 这是 sqlite db

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:39:21.477

其实问题是路径有问题，应该是这样的

```
engine = create_engine('sqlite://' + os.path.join(os.environ["OPENSHIFT_DATA_DIR"], 'euro2012tvguide.sqlite')) 
```

我从 openshift 论坛获得了很多帮助，这里是链接，[https: //openshift.redhat.com/community/forums/openshift/sqlalchemy-not-loading-sqlite-db](https://openshift.redhat.com/community/forums/openshift/sqlalchemy-not-loading-sqlite-db)

# android - Android sdk解析未知JSON数组键名和数量

> ID：10880988
> 
> 赞同：0
> 
> 时间：2012-06-04T12:05:48.427
> 
> 标签：android, json

```
{
   "transport" : {
   "public" : [
     {
    "transport_id" : "2",
    "transport_name" : "Ferry"
 },
 {
    "transport_id" : "3",
    "transport_name" : "Bus"
 },
 {
    "transport_id" : "4",
    "transport_name" : "Taxi"
 },
 {
    "transport_id" : "5",
    "transport_name" : "Tram"
 }
],
   "Private" : [
 {
    "transport_id" : "11",
    "transport_name" : "Bicycle"
 },
 {
    "transport_id" : "12",
    "transport_name" : "Private Car"
 }
],
  "Misc" : [
 {
    "transport_id" : "6",
    "transport_name" : "By Foot"
 },
 {
    "transport_id" : "7",
    "transport_name" : "Helicopter"
 },
 {
    "transport_id" : "8",
    "transport_name" : "Yatch"
 }
 ]
  }
} 
```

我最初是在开发将上述 JSON 提取到“ListView”的 iOS 应用程序，但现在我正在尝试在 android 中执行此操作，我想知道如何将上述 JSON 转换为分段列表视图。

考虑到数组“KEY”（即上面示例的“public”、“private”...等）将是未知的并动态生成，数组数量也是如此。

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:23:45.367

您可以使用内置的[org.Json](http://developer.android.com/reference/org/json/package-summary.html)包，如下所示：

```
String jsonString = "{
                    'transport' : {
                       'public' : [ ..."
JSONObject jsonO = new JSONObject(jsonString);
for (String key: jsonO.keys()){
    Object o = jsonO.get(key)
    if (o instanceof JSONArray){
        JSONArray jsonA = (JSONArray)o;
        int muberOfItems = jsonA.length();
        for(int i = 0; i<numberOfItems; i++){
            JSONObject jsonO2 = jsonA.optJSONObject(i)
            if (jsonO2 == null) // continue ? 
            //this object should contain your transportId and transportName
            String transportId = jsonO2.getString(0);
            String transportName = jsonO2.getString(1);
            //parse your Data, you have anything you need (private public etc == key)
            //whichValue = i
        }
    } else { //must be some other value }

} 
```

[JsonObjects](http://developer.android.com/reference/org/json/JSONObject.html)包含其他有用的方法，并且可以被视为类似于 Object 的 HashMap。

# yui - 如何使用 yui 实现自动完成

> ID：10880991
> 
> 赞同：1
> 
> 时间：2012-06-04T12:05:56.460
> 
> 标签：yui, yui3, yui2, yui-autocomplete

由于我对 YUI 完全陌生，我对此一无所知。我刚刚通过此链接使用 YUI [http://developer.yahoo.com/yui/autocomplete/](http://developer.yahoo.com/yui/autocomplete/)实现自动完成。

根据我的要求，我需要为数据源对象动态分配一个字符串数组，而不是 var dsLocalArray = new YAHOO.util.LocalDataSource(["apples", "broccoli", "cherries"]); 就像是

var dsLocalArray=new YAHOO.util.LocalDataSource(documentList[]);

我的文档列表在哪里是字符串数组。我该怎么做？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T08:02:28.320

我建议您使用 YUI3 而不是 YUI2，您所展示的示例使用的是 YUI2 的 YAHOO 命名空间。

YUI3 更简单更好，您可以在此处获取文档：http: [//yuilibrary.com/yui/docs/autocomplete/](http://yuilibrary.com/yui/docs/autocomplete/)

使用 YUI3 实现的示例，包括突出显示功能：

```
YUI().use('autocomplete', 'autocomplete-filters', 'autocomplete-highlighters', function (Y) {
  Y.one('#ac-input').plug(Y.Plugin.AutoComplete, {
    resultFilters    : 'phraseMatch',
    resultHighlighter: 'phraseMatch',
    source           : ['Alabama','Alaska','Arizona','Arkansas','California']
  });
}); 
```

尝试查看上述文档链接中右下侧面板中的示例。

# jquery - 在 jquery 的表中搜索和删除第一个 div

> ID：10880992
> 
> 赞同：0
> 
> 时间：2012-06-04T12:06:01.653
> 
> 标签：jquery, html

我想在`delete`表内的课后搜索第一个 div。如果存在而不是删除那个 div。我在 jsfiddle 中有我正在尝试的示例。建议一个正确的方法来做到这一点。谢谢

[我的样品](http://jsfiddle.net/shree/6YpBd/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:11:05.120

对于所有 jquery 版本..

```
$('.delete').delegate('',"click", function() {
    $(this).siblings('div').remove();
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:21:28.273

试试这个演示 [http://jsfiddle.net/6YpBd/4/](http://jsfiddle.net/6YpBd/4/)

它只是删除 .delete 类的直接 div

如果我们使用siblings() 方法，它会删除 .delete 类之前和之后的所有 div 元素

```
$('.delete').on("click", function() {
    $(this).next('div').remove();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T12:07:55.940

如果要删除兄弟`div`元素，可以使用`siblings`方法：

```
$(".delete").live("click", function() {
    $(this).siblings('div').remove();
});​ 
```

**演示：http:** [//jsfiddle.net/6YpBd/2/](http://jsfiddle.net/6YpBd/2/)

考虑使用`on`方法而不是`live`不推荐使用的方法：

```
$("table").on("click", ".delete", function() { ... }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T14:04:16.440

```
$('table tr td').live("click", function() {
$('table tr td > div').remove();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T12:12:07.553

演示- [http://jsfiddle.net/XtN87/](http://jsfiddle.net/XtN87/)

```
$('.delete').live("click", function() {
    $(this).siblings('div').remove();
}); 
```

# ms-access - 设置第一个过滤器后，访问过滤器不会显示可供选择的值列表

> ID：10880994
> 
> 赞同：0
> 
> 时间：2012-06-04T12:06:03.873
> 
> 标签：ms-access, ms-access-2007

我在使用 Access 2007 中的表单过滤器时遇到了一点问题。我在一些表单中使用列表视图，用户需要能够在那里过滤。

出于测试目的，我做了一个查询，它只基于一个表。如果我想设置第一个过滤器，它看起来像这样：

![普通过滤器](../Images/c0b280b2ed892b9fc749dab39f56b704.png)

我选择一个值，如果我想设置另一个过滤器（显然在不同的字段上），没有可供选择的值。

![第二个过滤器](../Images/d9e2558f05c5a0ceef0dfa131a778814.png)

这似乎只有在我使用查询时才会发生（如果我使用每个字段或仅使用几个字段，基于一个表或多个链接表并不重要）。我当然可以使用数字过滤器并手动输入一个值。

我有另一个数据库，我可以随时随地使用过滤器，无论它是查询还是表 - 我有一个列表，其中包含每次都可以选择的值。这意味着我在某个地方搞砸了，但我完全不知道在哪里。

我正在使用 Access 2007 (FE/BE)，如果您需要更多详细信息，请询问。任何从哪里开始寻找的建议都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:31:34.397

嗯，玩了半天，终于知道问题出在哪里了。

表单记录源需要是一个查询 - 没有 sql 代码，没有“select * from query”，只是一个查询的名称。其他任何事情都会导致您在使用过滤器方面受到限制。我不确定这是否是一个错误，或者这背后是否有原因，但这就是它在 access 2007 中的工作方式——至少对我来说是这样。

在我动态地向我的查询添加条件之前，这会导致像“select * from qDeliveries where location = 1”这样的记录源。为了做到这一点，我现在只创建一个临时查询，它是表单记录源，而不是仅仅使用 sql 代码。

希望这可以帮助任何人...... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-07T00:17:08.330

而不是使用查询，试试这个：

1.  **文件**>>**选项**
2.  **当前数据库**
3.  向下滚动到**过滤器查找选项**
4.  检查**ODBC 字段**

关闭并重新打开文件。那应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-12T09:03:26.830

创建一个单独的查询并分配给该表单。而不是在表单中创建查询。您的问题可能会得到解决。我做了同样的方法，它对我来说很好。

# javascript - “javascript:;” 用于 HTML 锚标记中的 href 属性

> ID：10880996
> 
> 赞同：7
> 
> 时间：2012-06-04T12:06:05.410
> 
> 标签：javascript, html

**更新**

下面的代码是什么意思和做什么？它需要 JavaScript 才能工作吗？

```
<a href="javascript:;">Do Somthing</a> 
```

**更新**

等于以下？：

```
<a href="">Do Somthing</a> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-04T12:16:25.753

使用“javascript:”作为链接的 href 属性的开头告诉 javascript 引擎使用要解释为 javascript 的字符串的其余部分。在这种情况下，严格解释会导致语法错误，因为这实际上是一个带有结束分号的空 javascript 行。像这样：

```
; 
```

然而，大多数浏览器不会抛出错误，因为链接上的 javascript 是旧语法，应尽可能避免使用。您可以安全地将其用作不执行任何操作的链接，但我不推荐它。

如果你想让一个链接什么都不做，你可以改用这个：

```
<a href="#">Link</a>
<a href="javascript:void(0);">Link</a>
<a href="javascript:return false;">Link</a> 
```

使用空的 href 字符串会使浏览器将其解释为相对链接。不以协议或标识符（如高级域或 IP 地址）开头的 URL 将被视为相对链接。例如，`"index.htm"`域上`"google.com"`的链接将创建链接`"google.com/index.htm"`。同样，href 字符串`""`将创建链接`"google.com/"`，因此空的 href 字符串将导致浏览器导航到新页面。

通常，如果您不指定 href 属性，链接将不会显示指针光标或将元素格式化为链接，这样您就可以将其用作“锚”元素，您可以使用 URL 中的哈希字符链接到该元素. 比如`"http://google.com/#an_anchor"`会带你到一个类似这样的anchor：`<a id="an_anchor">This is an anchor</a>`

但是，您可以使用 CSS 强制对链接进行格式化，如下所示：

CSS：

```
a {
    color: #00c;
    text-decoration: underline;
    cursor: pointer;
} 
```

HTML：

```
<a>This is a link.</a> 
```

示例：http: [//jsfiddle.net/J3RfH/](http://jsfiddle.net/J3RfH/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T12:08:09.693

这是一个无操作。

另一种常见的方法是`href="#"`，但这需要您`return false`在 onclick 事件中避免跳转到页面顶部并`#`在地址栏中获取 a。

请注意，使用和不使用 JavaScript 的链接通常是一个好主意，例如，做类似`<a href="/whatever" onclick="dowhatever(); return false;">`这样的事情，没有 JavaScript 的人会简单地以经典方式打开页面，而使用 JavaScript 的人会得到你用 JS 做的任何好东西。

如果某些东西根本不应该在没有 JavaScript 的情况下工作，即没有有用`href`的价值，请考虑根本不使用`a`标记，而是使用`span`具有适当样式的 a（`cursor:pointer`可能带有下划线）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T12:07:23.270

它什么都不做，旨在替换`a`标签的默认行为以无操作进入某个地方，从而使链接基本上不可点击。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T12:09:20.993

如果您在之后指定某个函数，`:`那么它将使用`<a>`标签调用。但是这里您没有指定任何函数，所以什么都不会发生

# sql - 如何执行此操作？

> ID：10880998
> 
> 赞同：0
> 
> 时间：2012-06-04T12:06:09.830
> 
> 标签：sql, database

我有 4 个表如下，;

```
tbl_UserInfo        DUMMY VALUES        DATATYPE    
UserID                 1                Integer (PRIMARY KEY)   
UserName               A                Text        
FacebookID          10021556            Text        
EmailID             ABC@gmail.com       Text        
Facebook_EmailID    asdf@asfd.com       Text        
Password            welcome123          Text        
Chips                   100             Integer     
DeviceType             iphone           Text    

 tbl_Game           DUMMY VALUES        DATA TYPE   
 GameID                 1               Integer     
 Type                 H or M            Text        
 Complete               No              Text    

tbl_GamePlayer      DUMMY VALUES        DATA TYPE
ID                      1           Integer (PRIMARY KEY)
GameID                  1           Integer (FOREIGN KEY FOR GameID in tbl_Game)
userid                  1           Integer (FOREIGN KEY FOR UserID in tbl_UserInfo)    

tbl_Streaks          DUMMY VALUES       DATA TYPE
ID                     1            Integer
GameID                 1            Integer (FOREIGN KEY FOR GameID in tbl_Game)
Player1                1            Integer (FOREIGN KEY FOR UserID in tbl_UserInfo)
Player2                2            Integer (FOREIGN KEY FOR UserID in tbl_UserInfo)
Streaks                2            Integer 
```

我想要reslut作为

```
{
Player1 = "A"
Player2 = 'B"
Streaks = 10 (between Player1  and Player2)
Chips = 100 (for player1)
Chips = 200 (for player2)
Fbid= 124578 (for player1)
Fbid = 784512 (for player2)
}

{
Player1 = "A"
Player3 = 'C"
Streaks = 15 (between Player1  and Player3)
Chips = 100 (for player1)
Chips = 450 (for player3)
Fbid= 5654578 (for player1)
Fbid = 7845512 (for player3)
}

{
Player1 = "A"
Player4 = 'D"
Streaks = 5(between Player1  and Player4)
Chips = 100 (for player1)
Chips = 208 (for player4)
Fbid= 12898978 (for player1)
Fbid = 78488512 (for player4)
} 
```

我想显示已登录用户的所有现有游戏（以及他其他玩家的 fbid、用户名、筹码、条纹），完整 = '否'

注意 -`userid`作为参数传递，所有玩家都通过他们的用户 ID 连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:11:45.707

```
SELECT Player1.UserName    AS Player1_UserName,
       Player2.UserName    AS Player2_UserName,
       tbl_Streaks.Streaks AS Streaks,
       Player1.Chips       AS Player1_Chips,
       Player2.Chips       AS Player2_Chips,
       Player1.FacebookID  AS Player1_FacebookID,
       Player2.FacebookID  AS Player2_FacebookID
FROM   tbl_Game
  JOIN tbl_GamePlayer AS gPlayer1 ON gPlayer1.GameID  = tbl_Game.GameID
  JOIN tbl_GamePlayer AS gPlayer2 ON gPlayer2.GameID  = tbl_Game.GameID
                                 AND gPlayer1.UserID != gPlayer2.UserID
  JOIN tbl_UserInfo   AS  Player1 ON gPlayer1.UserID  =  Player1.UserID
  JOIN tbl_UserInfo   AS  Player2 ON gPlayer2.UserID  =  Player2.UserID
  LEFT JOIN tbl_Streaks ON tbl_Streaks.GameID = tbl_Game.GameID
                       AND (tbl_Streaks.Player1, tbl_Streaks.Player2) IN (
                             (Player1.UserID, Player2.UserID),
                             (Player2.UserID, Player1.UserID)
                           )
WHERE  Player1.UserID = 1 AND tbl_Game.Complete = 'No' 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/7148c/1)上查看。

# iphone - 如何在我自己的应用程序中追踪另一部 iPhone？我需要使用 icloud 或 gps 吗？

> ID：10880999
> 
> 赞同：0
> 
> 时间：2012-06-04T12:06:11.620
> 
> 标签：iphone, ios4, gps, xcode4.2, icloud

我正在启动一个应用程序，在该应用程序中我正在跟踪安装此应用程序的另一个用户的 iphone。如何在我自己的应用程序中追踪另一部 iPhone？我需要使用 icloud 或 gps 吗？有这方面的教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:15:42.047

这取决于您希望如何跟踪您的用户群。您想按位置跟踪它们还是想通过唯一 ID 来识别它们？

您可以通过使用`CoreLocation`框架知道位置：

> 核心位置框架允许您确定与设备关联的当前位置或航向。该框架使用可用的硬件来确定用户的位置和航向。您使用此框架中的类和协议来配置和安排位置和航向事件的传递。您还可以使用它来定义地理区域并监控用户何时跨越这些区域的边界。

您可以在此处找到更多信息： [Apple，（2011），位置感知编程指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW10)