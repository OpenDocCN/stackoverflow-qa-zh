# StackOverflow 问答 12313000-12313999

# objective-c - ios round number to int or .5

> ID：12313006
> 
> 赞同：8
> 
> 时间：2012-09-07T06:40:10.147
> 
> 标签：objective-c, ios

i have a list of numbers in a big long list imported from a CSV,

I need to consult the list after the user enters a number in a textfield, so after the uses enters the number I need to take the number to the nearest integer or to x.5

for example

```
1;
1.5;
2; 
```

and so on

so if the user enters 1.2, it will go to 1, and if user enters 1.45 goes to 1.5

so that is the general rule, but for a long set of numbers,

so how can i accomplish this?

thanks a lot!

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-07T06:41:14.557

Just do this:

```
x = round(x * 2.0) / 2.0; 
```

This rounds `x` to the nearest multiple of 0.5.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-15T09:49:54.550

it'd look like something below in `Swift`

```
var valueToBechanged  = 3.45
// Casting the valueToBechanged to Double because it can be Float, Int etc
var roundedRating : Double = round(Double(valueToBechanged) * 2) / 2.0 
```

# java - 如何在 android 小部件中设置泰米尔语文本？

> ID：12313011
> 
> 赞同：2
> 
> 时间：2012-09-07T06:40:41.017
> 
> 标签：java, android, android-widget

我已将泰米尔语字体带入列表视图。我有泰米尔语字体的 unicode，我将其设置为 textview 的字体。所以字体可以很好地显示。现在的问题是我需要一个小部件来动态显示相同的内容。由于小部件 dnt 具有支持字体的字体，因此不会显示，而是显示 unicode。任何人都可以找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:57:55.610

创建一个样式并将其应用于您要使用的小部件。看这里：

[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

# asp.net - OAuth2Client 获取额外的 Facebook 数据

> ID：12313015
> 
> 赞同：0
> 
> 时间：2012-09-07T06:40:49.597
> 
> 标签：asp.net, asp.net-mvc, dotnetopenauth

我正在尝试弄清楚如何使用自定义 OAuth2Client 请求 Facebook 用户的电子邮件地址，但是我在 Google 上可以找到的文档严重缺乏执行此操作的文档。我已经在 facebook 应用程序上设置了权限，但我读到 Microsoft 的默认 Facebook 客户端不请求电子邮件，唯一的方法是滚动你自己的。

有谁知道任何好的资源或代码可以展示如何通过编写自定义 OAuth2Client 从 Facebook 请求额外数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:48:29.697

在重定向到 FB 之前，您需要指定如下参数

```
var parameters = new Dictionary<string, object>();
        parameters["state"] = returnUrl;
        parameters["scope"] = "email"; 
```

这就是您获取信息的方式，因为在许多情况下，用户对其电子邮件地址具有隐私权，因此在这种情况下您将不会收到电子邮件

```
FacebookClient fbClient = new FacebookClient(accessToken);
                    dynamic me = fbClient.Get("/me");

 FBModel f = new FBModel();//Making Model class object to pass values to it                  
                    f.Name = me.name;
                    f.FirstName = me.first_name;
                    f.LastName = me.last_name;
                    f.Gender = me.gender;            
                    if (me.email != null)
                    {
                        f.Username = me.email;
                        f.isEmail = true;

                    } 
```

# javascript - 使用 JavaScript 访问文件夹中所有文件的名称

> ID：12313016
> 
> 赞同：0
> 
> 时间：2012-09-07T06:40:59.890
> 
> 标签：javascript

你能告诉我是否有办法获取当前文件夹中的文件列表。当前文件夹是执行我的 .html 文件的文件夹。如有必要，这可能会在服务器端运行。

我用谷歌搜索了所有内容，并知道有一些方法可以使用 FileSystemObject 来实现，但我不是它的忠实粉丝。如果需要，我可以提供凭据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-31T06:32:10.550

您需要为此使用服务器端语言，例如 php、asp.net 或 jsp。JavaScript 无法访问它在客户端工作的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:41:08.853

抱歉，仅使用 Javascript 无法做到这一点。Javascript 在客户端上运行，该客户端无法访问您的网络服务器上的文件结构。

您必须运行某种服务器端代码才能将文件列表传递给您的脚本。有无数种可能的技术可以解决这个问题。PHP、JSP、ASP...无论您已经拥有什么或您喜欢的任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:18:08.670

您将需要一种服务器端语言，如 Asp/.net 或 PHP。

在 C# (ASP.Net) 中，您可以使用[此处](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)找到的示例以递归方式获取文件。只需更改`Console.WriteLine` 为`Response.Write`（不是那么简单但很接近）。

在 PHP 中你可以按照[这个例子](http://www.brightcherry.co.uk/scribbles/php-list-all-files-in-a-directory/)

如果您使用服务器端语言，如果您只想显示文件，则可能不需要使用 javascript/ajax。如果您使用我提到的两种语言，则支持在渲染时写入文档。或者您可以将 ajax 调用指向这些页面之一，但输出必须是 JSON。

除非您有**服务器端**脚本，否则您将无法获得所需的信息。**客户端脚本**不知道**服务器端的**任何东西（包括文件结构）

# android - 将数据上传到服务器并在 Android 通知栏中显示进度

> ID：12313019
> 
> 赞同：0
> 
> 时间：2012-09-07T06:41:03.173
> 
> 标签：android

我已经尝试了很多，但在上传通知中显示进度都没有成功。我可以使用异步任务将数据上传到服务器，但现在我需要将数据上传到服务器并显示在通知栏中，就像我们在 Facebook 中上传图像或视频时一样。

我无法做到这一点。我通过异步上传数据的代码如下。

我在 doInBackGround() 方法中编写了以下代码：

```
 HttpClient httpClient = new DefaultHttpClient();
            HttpPost postRequest = new HttpPost(
                    "http://********.php?f=setAvatar");
            ByteArrayBody bab = new ByteArrayBody(data, "receipt.jpg");
            // File file= new File("/mnt/sdcard/forest.png");
            // FileBody bin = new FileBody(file);
            File file = new File(ProfileEdit.selectedImagePath);
            MultipartEntity reqEntity = new MultipartEntity(
                    HttpMultipartMode.BROWSER_COMPATIBLE);
            ContentBody cbFile = new FileBody(file, "image/jpeg");
            reqEntity.addPart("im", cbFile);
            reqEntity.addPart("u", new StringBody(USERID));
            reqEntity.addPart("k", new StringBody(KEY));
            reqEntity.addPart("p", new StringBody(pannelId));

            //reqEntity.addPart("id", new StringBody(password));
            //reqEntity.addPart("addExpenseResult", new StringBody(expenceresult));
            postRequest.setEntity(reqEntity);
            HttpResponse response = httpClient.execute(postRequest);
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    response.getEntity().getContent(), "UTF-8"));
            String sResponse;
            StringBuilder s = new StringBuilder(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:51:15.350

您可以使用`RemoteView`and`PendingIntent`来显示在通知栏上，请参考：http: [//developer.android.com/guide/topics/ui/notifiers/notifications.html#CustomExpandedView](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#CustomExpandedView)

有关详细进度，[我需要知道为更新进度条 android 上传了多少字节](https://stackoverflow.com/questions/6851024/i-need-know-how-much-bytes-has-been-uploaded-for-update-a-progress-bar-android/12313686#12313686)

# javascript - 使用 getElementsByName 将 TextBox 替换为 CHECKBOX

> ID：12313022
> 
> 赞同：1
> 
> 时间：2012-09-07T06:41:16.350
> 
> 标签：javascript, html

我有一个名字很长的文本框。我试图在页面加载时用复选框动态替换它。下面是代码。我尝试只使用这条线

```
document.getElementsByName("!SRC!SKU!U_PLANNEDACTIVITY!E!amrit_test_search!U!2")[0].style.display="none" 
```

在我的 javascript 中，但即使这样也不起作用。所以我想有什么问题

```
document.getElementsByName()

        <html>
    <head>
    <script type="text/javascript">
    $(document).ready(function()
    {
    //var a="!SRC!SKU!U_PLANNEDACTIVITY!E!amrit_test_search!U!2";
     var myElement = document.createElement('<input type="checkbox" name="vehicle" value="Bike" id="checkPub"/>');
     document.getElementsByName("!SRC!SKU!U_PLANNEDACTIVITY!E!amrit_test_search!U!2")[0].insertAdjacentElement('afterEnd', myElement); 
    document.getElementsByName("!SRC!SKU!U_PLANNEDACTIVITY!E!amrit_test_search!U!2")[0].style.display="none";

    });
    </script>
    </head>
    <body>
    <input type="text" name="!SRC!SKU!U_PLANNEDACTIVITY!E!amrit_test_search!U!2" value="1"  />
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:05:53.383

你不能那样使用 document.createElement ！

检查：[https ://developer.mozilla.org/en-US/docs/DOM/document.createElement](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)

所以你需要这样的东西：

```
var myElement = document.createElement('input');
myElement.type = "checkbox";
myElement.name = "vehicle";
myElement.value = "Bike";
myElement.id = "checkPub"; 
```

同样，只查找一次元素并将字符串存储在变量中也没有什么坏处：

```
var a="!SRC!SKU!U_PLANNEDACTIVITY!E!amrit_test_search!U!2";
var origelem = document.getElementsByName(a)[0];
origelem.insertAdjacentElement('afterEnd', myElement);
origelem.style.display="none"; 
```

您似乎也在使用 jQuery（从 判断`$(document).ready(...`）。如果您不使用 jQuery，请尝试以下操作：

```
<html>
    <head>
        <script type="text/javascript">
        function onLoad() {
            var a="!SRC!SKU!U_PLANNEDACTIVITY!E!amrit_test_search!U!2";
            var myElement = document.createElement('input');
            myElement.type = "checkbox";
            myElement.name = "vehicle";
            myElement.value = "Bike";
            myElement.id = "checkPub";
            var origelem = document.getElementsByName(a)[0];
            origelem.insertAdjacentElement('afterEnd', myElement);
            origelem.style.display="none";
        }
        </script>
    </head>
    <body onload="onLoad()">
        <input type="text" name="!SRC!SKU!U_PLANNEDACTIVITY!E!amrit_test_search!U!2" value="1"  />
    </body>
</html> 
```

希望这对你有用。

还要学习DEBUG。使用 firebug 或类似的 chrome 开发者工具。有一个控制台告诉您错误。

编辑： insertAdjacentElement 仅适用于 IE 和 chrome。一个简单的

```
origelem.parentNode.appendChild(myElement); 
```

是一个很好的替代品。

# jquery - jquery自动填充选择框和表格

> ID：12313023
> 
> 赞同：0
> 
> 时间：2012-09-07T06:41:17.757
> 
> 标签：jquery

```
 function createDynamicTable(tbody, rows, cols) {
    if (tbody == null || tbody.length < 1) return;
    for (var r = 1; r <= rows; r++) {
        var trow = $("<tr>");
        for (var c = 1; c <= cols; c++) {
            var input = $("<input />");
            $("<td>")
                    .addClass("tableCell")
                    .append(input)
                    .data("col", c)
                    .appendTo(trow);
        }
        trow.appendTo(tbody);
    }
} 
```

`on change`每当我更改选项并生成表格时，都会在选择标记的事件上调用此脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:56:47.937

我不确定我是否正确理解您的问题，但我肯定会尝试移动

```
var trow
var input 
```

在 for 循环之外，如果它不能解决任何其他问题，它将使函数更有效。我也怀疑是因为范围问题：

```
trow.appendTo 
```

尝试追加时不会定义 trow 变量

**编辑：**我用这个工作做了一个[工作的jsBin](http://jsbin.com/ecodic/7/edit)。我不明白确切的问题或问题是什么：

**另一个编辑**：如果问题是（我认为）关于绑定以选择框更改，我已经相应地更改了[JsBin](http://jsbin.com/ecodic/7/edit)。

# command-line - 如何在不看到 emulator.exe 窗口的情况下启动 Android 虚拟设备

> ID：12313025
> 
> 赞同：6
> 
> 时间：2012-09-07T06:41:20.617
> 
> 标签：command-line, android-emulator

我想创建一个快捷方式来启动具有特定参数的特定 AVD。如果我使用 emulator.exe 创建批处理文件，`start emulator.exe -avd myavd`命令窗口会在设备启动后显示并保留。关闭 emulator.exe 窗口将关闭设备。

如何启动设备而不像 AVD Manager 或 Eclipse 那样看到此窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-15T09:15:25.887

创建此 java 替换您想要的 avd 的详细信息：

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
public class AVDs
{       
    public static void main(String[] args) throws IOException
    {
        List<String> avdCmd = new ArrayList<String>(args.length + 1);
        avdCmd.add("C:\\Users\\Steve\\AppData\\Local\\Android\\sdk\\tools\\emulator.exe");
        for (String cmdarg: args)
        {
            avdCmd.add(cmdarg);
        }
        ProcessBuilder launch = new ProcessBuilder();
        launch.inheritIO().command(avdCmd).start();
    }
} 
```

然后将其用作您的快捷方式：

```
"C:\Program Files\Java\jre1.8.0_40\bin\javaw.exe" -cp "S:\ADT workspace\AVDs\bin" AVDs -timezone Europe/London -avd Lollipop -scale 0.5 
```

替换您的类路径，或在不需要时将其删除。确保使用 javaw 的路径，不要只使用 java。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-26T12:43:02.113

我找到了一个简单的解决方法，使用 [SilentCMD](https://github.com/stbrenner/SilentCMD)

创建批处理文件，在我的情况下，我的 AVD 称为“PIXEL_MARSHMALLOW_6”，所以我的批处理称为**emulator_marshmallow.cmd**：

```
REM emulator_marshmallow.cmd    
emulator @PIXEL_MARSHMALLOW_6 
```

跑

```
c:\>SilentCMD emulator_marshmallow.cmd 
```

这将运行模拟器并且隐藏 cmd.exe 窗口。顺便说一句，我在这里找到了许多其他实用程序，例如 SilentCMD：[https ://www.raymond.cc/blog/hidden-start-runs-batch-files-silently-without-flickering-console/](https://www.raymond.cc/blog/hidden-start-runs-batch-files-silently-without-flickering-console/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T13:02:02.350

据我所知，你不能。即使您从 Windows 运行对话框运行 emulator -avd Nexus_One ，也会打开类似窗口的命令行。我也看不到任何隐藏此选项的选项，例如静默模式（运行 emulator -help 显示可用选项）。Eclipse 有自己的内置命令行，因此您看不到另一个窗口。

# php - input type='file' 使用 method='post' 传输值

> ID：12313026
> 
> 赞同：-1
> 
> 时间：2012-09-07T06:41:24.410
> 
> 标签：php

```
<form name='mainform' method='post' action='do.php?ppc/workload' >
<?php
print "<input type='hidden' name='ppc_m_id' value='$id'>";
print "<table class='clean_form'>";
print "<tr><td colspan='2'><b>Attachment</b><input type='file' name='file' value=''></td></tr>";
print "<tr><td>Remarks</td><td><textarea name='sm_ppc_remarks' style='height:90;width:280'></textarea></td></tr>";
print "</table>";
?>
<input type="submit" value="submit">
</form>
</body> 
```

## 做.php

```
class PPC extends CONTROLLER{
    function workload(){
    global $db, $auth;

        $sql['ppc_m_id'] = $_POST['ppc_m_id'];  
        $sql['ppc_remarks_sales'] = $_POST['sm_ppc_remarks'];
        $sql['ppc_sales_attachment'] = fs_upload($_FILES['file']); 

    $insert = insertformat($sql);
    $query = $db->query("insert into ppc set $insert");

    if($query)
    $db->query("update sales set sm_ppc_remarks='{$sql['ppc_remarks_sales']}', sm_sales_attachment='{$sql['ppc_dpdate']}' where sm_id='{$sql['ppc_m_id']}' limit 1");

    if($query){
    message_set('Workload has been recorded');
    goback();
    }
    }
    } 
```

当我填写备注文本区域时，它保存在我的数据库中，但就保存附件（输入类型='文件'）而言，它不保存..我不知道知道什么或缺少什么..谢谢非常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:45:30.280

`<form>`在标签中添加“enctype”

```
<form name='mainform' method='post' action='do.php?ppc/workload' enctype="multipart/form-data"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T06:45:27.973

缺少“enctype”

`<form name='mainform' method='post' action='do.php?ppc/workload' enctype="multipart/form-data">`

# jquery - jquery输入表单验证

> ID：12313027
> 
> 赞同：1
> 
> 时间：2012-09-07T06:41:29.353
> 
> 标签：jquery, validation, input

让我们假设我有一个`<table>`（不是`<form>`！）有 2 个输入字段。

```
 <table>
       <tr>
           <td><input type="text" name="aadress" /></td>
       </tr>
       <tr>
           <td><input type="text" name="telefon" /></td>
       </tr>
   <table> 
```

是否可以使用 验证整个表`jquery .validate()`？还是我把它与`input`字段一起使用？要点是我**没有提交按钮**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:25:44.267

如果您不想使用按钮来验证您的字段，您可以使用 JQs *".keyup(handler(eventObject))"*事件函数。您可以使用以下代码来验证您的字段。

```
$('.myTable').keyup(function(e){
    if (e.target.name == 'address' && e.target.value.length > 5) {
        console.log(e.target.value);
        $(e.target).css({ 'border-color': '#25E01B', 'border-style':'solid' });
        //do more stuff
    }
    if (e.target.name == 'telefon' && e.target.value.length > 5) {
    console.log(e.target.value);
        $(e.target).css({ 'border-color': '#25E01B', 'border-style': 'solid' });
        //do more stuff
    }
}); 
```

为了

```
<table class="mytable">
       <tr>
           <td><input type="text" name="address" /></td>
       </tr>
       <tr>
           <td><input type="text" name="telefon" /></td>
       </tr>
<table> 
```

# asp.net-mvc - 如何在 MVC 中从包含所有自定义验证以及验证错误的文件中进行自定义验证

> ID：12313028
> 
> 赞同：0
> 
> 时间：2012-09-07T06:41:29.647
> 
> 标签：asp.net-mvc, validation, asp.net-mvc-4

我是 MVC 4 的新手。在我的项目中，我有一个要求，即拥有一个包含各种验证错误编号及其相应验证错误消息的特殊文件。然后我希望在模型中定义这些错误，然后再定义此类验证错误，我希望我的视图从该文件中获取相应的错误消息并将其显示在验证摘要中。

找到了一种通过使用`[Remote]`属性来实现功能的方法。我就是这样做的。

模型 CUSTS.cs

```
namespace MvcTest.Models
{
    public partial class CUSTS
    {
        public Nullable<double> Field1 { get; set; }
        [Remote("ValidateAmount", "Validation", AdditionalFields = "Field1, Field2")]
        [Display(Name = "BALANCE AMT")]
        public Nullable<double> Field2 { get; set; }
    }
} 
```

控制器 ValidationController.cs

```
namespace MvcTest.Controllers
{
    public class ValidationController : Controller
    {
        Entities1 db = new Entities1();
        public static NameValueCollection messagesCol;
        public String errorField;
        public String errorMessage;

        public JsonResult ValidateAmount(CUSTS custs)
        {
            CUSTS cus = new CUSTS();

            if (custs.Field2< custs.Field1)
            {
                loadMessages();

                String[] errMsg = new String[1];
                errMsg = messagesCol.GetValues("OES0373");
                string st=errMsg[0] + ". \r\n The Balance amount is:" + custs.XWIDV0 + " & the Credit Limit is:" + custs.XWGIVA;
                return Json(st,JsonRequestBehavior.AllowGet);
                //return new ActionResult(errMsg[0] + ". \r\n The Balance amount is:" + custs.XWIDV0 + " & the Credit Limit is:" + custs.XWGIVA);
            }
            return Json(true, JsonRequestBehavior.AllowGet);
            //return ActionResult.Success;
        }

        public static void loadMessages()
        {
            StreamReader sr = new StreamReader(System.Web.HttpContext.Current.Server.MapPath("~\\Models\\messages_en.properties"));
            String fileContents = sr.ReadToEnd();

            String[] sepr = new string[] { "\r\n" };
            String[] lines = fileContents.Split(sepr, StringSplitOptions.RemoveEmptyEntries);

            messagesCol = new NameValueCollection();
            int numMessages = lines.Length;

            foreach (string line in lines)
            {
                int indx = line.IndexOf('=');

                if (indx != -1)
                {
                    messagesCol.Add(line.Substring(0, indx), line.Substring(indx + 1));
                }
            }

            sr.Close();
        }
    }
} 
```

现在我想问两件事

1.  这种实现所需功能的方式是否正确。还有什么可以做的。
2.  我刚刚诊断出的另一个问题是视图中表单中的 post 方法正在执行，而不管验证是否有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:49:44.657

以下是我的做法：

1) 在 DataAnnotationsModelValidatorProvider 的自定义实现中覆盖 GetValidators() 。在这里，您可以阅读您的文件并决定将哪些验证器附加到正在查看的属性。

2）编写您自己的 ValidationAttributes 并覆盖 IsValid() 方法以实现您想要的自定义规则。您还可以覆盖 FormatErrorMessage 以任何您想要的方式格式化错误消息。您甚至可以通过在您的 ValidationAttributes 中实现 IClientValidatable 将这些传播到客户端。

3) 在 Global.asax 的 Application_Start() 中注册提供程序

```
ModelValidatorProviders.Providers.Add(new VProvider()); 
```

DataAnnotationsModelValidatorProvider 的自定义实现可以是这样的：

```
protected override IEnumerable<ModelValidator> GetValidators(ModelMetadata metadata, ControllerContext context, IEnumerable<Attribute> attributes)
{
     IEnumerable<ModelValidator> toRet = new Collection<ModelValidator>();
     string prop = metadata.PropertyName;
     //get the custom rules you want applied from database or file or any other storage 
     AddImplicitRequiredAttributeForValueTypes = false; //to remove implicit required from value types if you want to
     //Determine what attributes you want to apply to this property
     attributes = new List<Attribute>() { new MyCustomAttribute() };
     //Ask the base class to construct the list of validators to return to the caller
     return = base.GetValidators(metadata, context, attributes);
} 
```

自定义属性看起来像：

```
public class MyCustomAttribute:ValidationAttribute, IClientValidatable
{
    public override bool IsValid(object value)
    {
        //perform whatever tests you want here and return true/false
    }
    public override string FormatErrorMessage(string name)
    {
        //do some formatting
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var r = new ModelClientValidationRule
                    {
                       ErrorMessage = "Some error message",
                       ValidationType = "customType",
                    };
        r.ValidationParameters.Add(paramName,paramValue);

        yield return r;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T06:53:04.953

听上去像是需要使用带有错误消息的资源文件，然后使用内置的属性参数进行本地化，例如：

```
[Required(ErrorMessageResourceType=typeof(MyResourcesNameSpace.ResourcesFile),    
     ErrorMessageResourceName="FirstNameRequiredKey")] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T04:41:28.993

找到了一种通过使用 [Remote] 属性来实现该功能的方法。我就是这样做的。

模型 CUSTS.cs

```
namespace MvcTest.Models 
```

{

```
public partial class CUSTS
{

    public Nullable<double> Field1{ get; set; }
    [Remote("ValidateAmount", "Validation", AdditionalFields = "Field1, Field2")]
    [Display(Name = "BALANCE AMT")]
    public Nullable<double> Field2{ get; set; }
} 
```

}

控制器 ValidationController.cs

```
namespace MvcTest.Controllers 
```

{ 公共类 ValidationController : 控制器 { Entities1 db = new Entities1(); 公共静态 NameValueCollection 消息Col；公共字符串错误字段；公共字符串错误消息；

```
 public JsonResult ValidateAmount(CUSTS custs)
    {
        CUSTS cus = new CUSTS();

        if (custs.Field2< custs.Field1)
        {
            loadMessages();

            String[] errMsg = new String[1];
            errMsg = messagesCol.GetValues("OES0373");
            string st=errMsg[0] + ". \r\n The Balance amount is:" + custs.XWIDV0 + " & the Credit Limit is:" + custs.XWGIVA;
            return Json(st,JsonRequestBehavior.AllowGet);
            //return new ActionResult(errMsg[0] + ". \r\n The Balance amount is:" + custs.XWIDV0 + " & the Credit Limit is:" + custs.XWGIVA);
        }
        return Json(true, JsonRequestBehavior.AllowGet);
        //return ActionResult.Success;
    }

    public static void loadMessages()
    {
        StreamReader sr =
            new StreamReader(System.Web.HttpContext.Current.Server.MapPath("~\\Models\\messages_en.properties"));
        String fileContents = sr.ReadToEnd();

        String[] sepr = new string[] { "\r\n" };
        String[] lines =
            fileContents.Split(sepr, StringSplitOptions.RemoveEmptyEntries);

        messagesCol = new NameValueCollection();
        int numMessages = lines.Length;

        foreach (string line in lines)
        {
            int indx = line.IndexOf('=');

            if (indx != -1)
            {
                messagesCol.Add(line.Substring(0, indx), line.Substring(indx + 1));
            }
        }

        sr.Close();
    }
} 
```

}

现在我想问两件事 1.这种实现所需功能的方式是否正确。还有什么可以做的。2.我刚刚诊断的另一个问题是视图中表单中的post方法正在执行，而不管验证是否有效。

# javascript - 正则表达式检查字符串的第一个字符是否为“+”，其余为数字

> ID：12313029
> 
> 赞同：1
> 
> 时间：2012-09-07T06:41:30.280
> 
> 标签：javascript, regex

我需要一个正则表达式来检查字符串的第一个字符是否是“+”，其余的是数字。例如：+919447733140

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T06:42:37.280

这会做你想做的`/^\+\d+$/`

你可以像这样使用它：

```
function isPlusNum(num) {
    return /^\+\d+$/.test(num);
}
console.log(isPlusNum('+5555'); //returns true;
console.log(isPlusNum('-5555'); //returns false; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T06:42:54.507

这是一个涵盖它的正则表达式：

```
/^\+\d+$/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T06:46:40.453

正如其他人所说，一个普通的正则表达式就是`/^\+\d+$/`这样做的。

但是，在你继续之前，我觉得有必要先讲道。

> 这是用于验证手机号码（连同国家代码，例如：+919447733140）

除非您明确告诉他们他们的电话号码只能使用这种格式，否则您可能会遇到验证问题。不仅如此，还有更大、更好的正则表达式用于匹配更多种类的电话号码（带有分机、标点符号、国际变体等）。即便如此，许多人仍然认为收集电话号码的最佳方式是根本不暗示任何正则表达式限制——让他们给你他们想要给你的东西。这是你的选择！`//end rant. :)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T06:58:36.327

所以，`/^\+\d+$/`你有你的表达，但正如克里斯蒂安所说：人们确实倾向于用空格、破折号甚至点和逗号来输入数字。此外，像 00919447733140 这样的输入也是有效的。开头的双0等于`+`符号。

如果我是你，我会转向以下方面：

```
pn = '00919-4477 33140';
pn.replace(/[^+0-9]/g,'').match(/^(0{2}|\+)\d+$/)[0];//<--00919447733140 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T07:05:28.290

您可以使用此正则表达式来帮助您验证印度手机号码

```
(\+91|0091)?[7-9][0-9]{9} 
```

# jquery - 检查在 jQuery 中自动填充的文本区域的长度

> ID：12313031
> 
> 赞同：2
> 
> 时间：2012-09-07T06:41:50.740
> 
> 标签：jquery, textarea

我有一个 MultiDatesPicker 控件，用户可以在其中选择一些日期。一个 textarea 对象自动填充日期，而用户选择其中的一些。一切正常。我现在喜欢做的是，检查该 textarea 的长度，因此当长度 > 60 时将其宽度更改为 200px，而当 <=60 时宽度将为 90。我做了以下操作：

```
 <script type="text/javascript">
    $(document).ready(function () {
        $.datepicker.setDefaults($.datepicker.regional['el']);
        $('#cPublDates').multiDatesPicker({
            altField: '#tbPublishDates'
        });
        $(function () {
            $('#tbPublishDates').change(function () {
                alert('changed');
                if ($(this).val().length > 60) {
                    $(this).width(200);
                } else {
                    $(this).width(90);
                }
            });
        });
    });
</script> 
```

并且对象是

```
 <div class="pulicationBox">
        <span id="cPublDates"></span>
        <asp:TextBox ID="tbPublishDates" runat="server" ClientIDMode="Static"  TextMode="MultiLine" Rows="5" Width="90px" />
    </div> 
```

但没有工作，因为没有触发 change() 事件。#tbPublishDates 是文本区域的 id。由于我是 jQuery 的新手，因此欢迎任何想法或代码更正。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T06:43:17.783

试试，现在动态绑定到文本框...

还要确保您已包含 jQuery 库版本 1.7 或更高版本

```
<script type="text/javascript">
$(document).ready(function () {
    $.datepicker.setDefaults($.datepicker.regional['el']);
    $('#cPublDates').multiDatesPicker({
        altField: '#tbPublishDates'
    });

        $('#tbPublishDates').on('change', function () {
            alert('changed');
            if ($(this).val().length > 60) {
                $(this).width(200);
            } else {
                $(this).width(90);
            }
        });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:38:41.527

可能您的问题是因为它是向文本区域添加值的多日选择器，因此 jquery change() 不会触发。我建议您使用 multidatepicker 事件 onSelect() 来检查文本区域的长度。

```
<script type="text/javascript">
$(document).ready(function () {
$.datepicker.setDefaults($.datepicker.regional['el']);
$('#cPublDates').multiDatesPicker({
    altField: '#tbPublishDates',
    onSelect: function(){
        alert('changed');
        if ($('#tbPublishDates').val().length > 60) {
            $('#tbPublishDates').width(200);
        } else {
            $('#tbPublishDates').width(90);
        }

   }
}); 
```

});

请参阅[http://multidatespickr.sourceforge.net/](http://multidatespickr.sourceforge.net/)文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T06:47:16.063

试试这个：

```
$('#tbPublishDates').change(function () {
        alert('changed');
        if ($(this).val().length > 60) {
            $(this).css('width','200');
        } else {
             $(this).css('width','90');
        }
    }); 
```

# facebook - 从 iOS 应用程序在我的墙上发布一个字符串？

> ID：12313036
> 
> 赞同：1
> 
> 时间：2012-09-07T06:42:22.143
> 
> 标签：facebook, ios5, xcode4.2

我是 Facebook 开发的新手。有人可以指导我如何通过 iOS 应用在墙上发帖吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:44:51.153

您可以通过在您的应用程序中集成 Facebook SDK 来做到这一点。

从这里开始：
[https ://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)

这是一个具体的例子：http:
[//developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/](http://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)

# ember.js - ember-data 中的可变数组和不可变数组有什么区别？

> ID：12313041
> 
> 赞同：1
> 
> 时间：2012-09-07T06:42:48.480
> 
> 标签：ember.js, ember-data

我在处理与不可变数组相关的余烬数据时遇到了问题，例如“未捕获的错误：服务器查询的结果是不可变的。”这就是我尝试`removeObjects()`在过滤列表上应用方法时得到的大批。

所以，我想知道区别以及如果可能的话如何将它们转换为另一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:25:43.363

不可变数组只是意味着它不能直接更改（与可以更改的可变数组相反）。

根据 Ember Data 文档，删除记录应该是这样的：

> 要删除记录，请调用其 deleteRecord() 方法：
> 
> ```
> var person = App.store.find(App.Person, 1); 
> person.deleteRecord(); 
> ```
> 
> 在调用 store 的 commit() 方法之前，不会在持久层中删除记录。但是，删除的记录将立即从其 ModelArray 和关联中删除。

来源：[https ://github.com/emberjs/data#deleting-records](https://github.com/emberjs/data#deleting-records)

如果这没有帮助，你能写一个jsfiddle吗？

# java - java - 如何在Java客户端机器上获取当前登录用户的用户名？

> ID：12313051
> 
> 赞同：-2
> 
> 时间：2012-09-07T06:43:26.147
> 
> 标签：java, jakarta-ee

当用户（客户端）尝试通过键入 URL 进入应用程序时，我需要让该机器的窗口登录用户名。

我已经尝试过，`System.getProperty("user.name")`但是当我从其他机器（客户端）访问应用程序时，这仍然显示服务器上登录用户的用户名。我希望每次都根据客户端计算机用户名进行更改。

而且我也尝试过一些 JavaScript 代码，它只适用于 IE，但我们使用的是 Firefox。

请建议使用各种浏览器的可能方法。

**申请详情：**

**查看：** Struts
**应用框架：** Spring 3.1.1
**应用服务器：** jboss-6.1.0.Final
**服务器操作系统：** CentOS 5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:28:52.257

如果这是用于 Intranet 应用程序，您可以查看使用 NTLM（旧）或 Kerberos（新）身份验证（也称为集成 Windows 身份验证）。

如果您使用 Spring 安全性，请查看 kerberos 扩展，[http://blog.springsource.org/2009/09/28/spring-security-kerberos/](http://blog.springsource.org/2009/09/28/spring-security-kerberos/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T06:47:09.727

出于安全目的，在浏览器中运行的应用程序可以访问的数据量是有限的。据我所知，唯一允许访问客户端相关数据的是[Signed Applet](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/signed.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T06:47:09.713

通过java，您将无法访问它，因为它驻留在服务器中。你将不得不使用javascript来完成它......

这可能会帮助你..

[使用 JavaScript 获取 Windows 用户名？](https://stackoverflow.com/questions/2968690/get-windows-username-with-javascript)

# ruby-on-rails - 需要干掉我的耙子任务

> ID：12313053
> 
> 赞同：0
> 
> 时间：2012-09-07T06:43:35.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

基本上我正在运行一个 rake 任务来更新我的 rails 3 应用程序中的“notes”字段。目前我的任务设置如下：

```
desc "Update notes"
  task :get_notes => :environment do
      Product.find(:all, :conditions => ["categories like ?", "%" + '123456' + "%"]).each do |product|
      old_note = product.notes
      notes = old_note + ", <new note>"
      product.update_attribute(:notes, notes)
    end 
```

问题是我有大约 250 个独特的类别要更新 250 个独特的笔记，所以我基本上只是在我的任务中复制了 250 多次。我怎样才能更有效地做到这一点？（这只是一次性的事情，但我想知道如何更好地解决诸如此类的未来问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:26:21.447

拿这个：[如何将命令行参数传递给 rake 任务](https://stackoverflow.com/questions/825748/how-do-i-pass-command-line-arguments-to-a-rake-task)

```
task :get_notes, [:category] => :environment do |t, args|
  Product.find(:all, :conditions => ["categories like ?", "%#{args[:category]}%"]).each do |product|
  old_note = product.notes
  notes = old_note + ", <new note>"
  product.update_attribute(:notes, notes)
end 
```

运行为：`rake get_notes[123456]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:04:03.380

我最终只是创建了一个函数：

```
 def add_note(category, note)
    Product.find(:all, :conditions => ["categories like ?", "%" + category + "%"]).each do |product|
    old_note = product.notes
    if old_note != nil
    notes = old_note + note
  else notes = note
  end
    product.update_attribute(:notes, notes)
  end
end 
```

并使用每个唯一变量调用函数：

```
desc "Update note"
  task :get_notes => :environment do
    add_note('7818797', "<note>")
end
end 
```

# java - Hibernate中get方法的监听器

> ID：12313055
> 
> 赞同：2
> 
> 时间：2012-09-07T06:43:44.413
> 
> 标签：java, hibernate, orm, listener, elasticsearch

我致力于将我的 orm 与弹性搜索集成。每次调用我的创建、更新、删除方法时，我都会在弹性搜索中执行相同的操作来更新我的索引。我正在通过 Hibernate 监听器 PostInsert、PostDelete、PostUpdate 执行此操作。现在我想知道的是，当我首先调用我的 orm 的 get 或 find 方法时，我在弹性搜索中搜索数据，如果在弹性搜索中找不到数据，我必须从我的数据库中获取它。为了实现这一点，我需要一些预听者。是否有任何类型的侦听器可以执行此操作，或者是否有任何其他替代方法可以执行此操作。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-27T14:37:28.640

我们正在 Hibernate 团队中实现 Hibernate ORM 和 Elasticsearch 之间的完全集成。

查看 Hibernate Search 及其全新的 Elasticsearch 集成：

*   [http://hibernate.org/search/](http://hibernate.org/search/)
*   [http://in.relation.to/2016/05/24/ElasticsearchintegrationReachesBeta1/](http://in.relation.to/2016/05/24/ElasticsearchintegrationReachesBeta1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:02:42.990

我认为您可以使用[Hibernate 事件系统](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/events.html#objectstate-events)，并实现预加载或加载后触发器。在您的实现中，您可以访问通过事件对象加载的实体。

问题是这些触发器直接附加到会话，我认为没有办法将它们的范围限制为某些实体或查询，所以在你的类中，你将“看到”所有加载的实体，你必须选择哪些实体需要重载搜索方法。

这是一个可以帮助你的[例子。](http://dunithd.wordpress.com/2009/10/27/create-database-triggers-like-features-using-hibernate-events/)

祝你好运！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:32:22.350

只需简单地为您的 get/find 方法做一些中间层 - 包装器，您首先检查结果是否可通过弹性搜索获得。

# c++ - 在 C/C++ 中是否有任何用于 html 验证的库？

> ID：12313059
> 
> 赞同：3
> 
> 时间：2012-09-07T06:43:58.300
> 
> 标签：c++, html, c, html-parsing

我正在编写一个接受 HTML 页面的代码，对其进行一些修改，然后将其显示在网络上。

我的要求是在处理它之前验证这个 HTML 代码。

我应该怎么办 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T06:51:09.217

我不知道用于验证的库，但我知道 W3C 验证器有一个 API (http://validator.w3.org/docs/api.html)，所以如果您处于在线环境中，您可以交谈通过 SOAP 访问它。

或者，由于它是开源的，您可以安装自己的副本并使用它。

HTML 验证非常复杂，所以我怀疑这里有很多选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T06:50:47.357

你可以试试 WDG HTML Validator。有关源代码的网页位于：[http ://htmlhelp.com/tools/validator/source.html.en](http://htmlhelp.com/tools/validator/source.html.en)

# android - 在 ListView 项目的 onClick 上查看大图

> ID：12313061
> 
> 赞同：0
> 
> 时间：2012-09-07T06:44:12.973
> 
> 标签：android, image

我有一个`ListView`在其中列出的*壁纸。*我想打开大图`onClick`并将`List item`其设置为*墙纸*。怎么做？这是我的代码：

**abc.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/logo"
        android:layout_width="50px"
        android:layout_height="50px"
        android:layout_marginLeft="5px"
        android:layout_marginRight="20px"
        android:layout_marginTop="5px"
        android:src="@drawable/aa" >
    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="22px" >
    </TextView>

</LinearLayout> 
```

**abc1.java**

```
package com.example.wallpaper;
import com.mkyong.android.adaptor.MobileArrayAdapter;
import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ListView;
import android.widget.Toast;
import android.view.View;

public class abc1 extends ListActivity {

    static final String[] WALLPAPER_IMG = 
               new String[] { "Wallpaper1", "Wallpaper2", "Wallpaper3", "Wallpaper4","Wallpaper5","Wallpaper6","Wallpaper7","Wallpaper8"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setListAdapter(new MobileArrayAdapter(this, WALLPAPER_IMG));

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
            //get selected items
            String selectedValue = (String) getListAdapter().getItem(position);
            Toast.makeText(this, selectedValue, Toast.LENGTH_SHORT).show();

    }

} 
```

**MobileArrayAdapter.java**

```
package com.mkyong.android.adaptor;

import com.example.wallpaper.R;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class MobileArrayAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final String[] values;

    public MobileArrayAdapter(Context context, String[] values) {
        super(context, R.layout.abc, values);
        this.context = context;
        this.values = values;
    }
    int onscreen;
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.abc, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.label);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
        textView.setText(values[position]);

        // Change icon based on name
        String s = values[position];

        System.out.println(s);

        if (s.equals("Wallpaper1")) {
            imageView.setImageResource(R.drawable.a);
            onscreen = R.drawable.a;
        } else if (s.equals("Wallpaper2")) {
            imageView.setImageResource(R.drawable.b);
            onscreen = R.drawable.b;
        } else if (s.equals("Wallpaper3")) {
            imageView.setImageResource(R.drawable.c);
            onscreen = R.drawable.c;
        } else if (s.equals("Wallpaper4")) {
            imageView.setImageResource(R.drawable.d);
            onscreen = R.drawable.d;
        }else if (s.equals("Wallpaper5")) {
            imageView.setImageResource(R.drawable.e);
            onscreen = R.drawable.e;
        }else if (s.equals("Wallpaper6")) {
            imageView.setImageResource(R.drawable.f);
            onscreen = R.drawable.f;
        }else if (s.equals("Wallpaper7")) {
            imageView.setImageResource(R.drawable.g);
            onscreen = R.drawable.g;
        }else{

            imageView.setImageResource(R.drawable.h);
            onscreen = R.drawable.h;
        }

        return rowView;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:06:34.307

你可以通过几种方式来解决这个问题。

1）使用android原生图库打开图像并通过那里可用的隐式功能将图像设置为壁纸（通过选择菜单并将其设置为壁纸）。为此，您必须发送[此处](https://stackoverflow.com/a/6772455/328947)描述的意图。

2）另一种方法是创建自己的imageView来显示图像，然后将图像设置为壁纸。[您可以按照此处](https://stackoverflow.com/a/1964207/328947)所述设置壁纸。

# python - 检查字符串列表中的字符是否是另一个字符串列表中字符的子集

> ID：12313062
> 
> 赞同：3
> 
> 时间：2012-09-07T06:44:14.070
> 
> 标签：python, python-2.7

给定以下列表：

```
list1 = ["Box", "Stall"]
list2 = ["Ball", "Sox"] 
```

如何检查构成“Ball”和“Sox”的所有字符（“BallSox”）是否包含在“BoxStall”（构成“Box”和“Stall”的字符）中？他们是。它必须区分大小写。

我尝试`list()`在 if 语句中使用该命令，检查“B​​ox”的所有字符是否都在 内 `list2`，但似乎它必须更复杂一些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:27:55.453

我不认为有一个内置函数可以处理这个问题。你能做的是

```
# put all characters of first list into a dictionary 
# object.  This is easier to use for looking up characters
# later
list_chars = {}
for string in list1:
    for char in string:
        list_chars[char] = True

# run through second list, for each character
# in the other list, check if it exists in
# the dictionary of characters from the first 
# list.  If it does not, then set missing_character to True.
missing_character = False
for string in list2:
    for char in string:
        if not list_chars.get(char,False):
            # means that the first list does
            # not contain the character char
            missing_character = True

# print whether one list was actually missing a character.
if missing_character:
   print('Missing some character!')
else
   print('Contained all characters!') 
```

如果上述某些部分没有意义，请随时提出后续问题。此外，如果您使用上面的 break 语句，您可以使上面的代码更快一点。（如果您已经知道列表缺少一个字符，请尽早退出 for 循环。）我将把它留给您推理并确定您是否感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:19:33.160

检查一组元素是否包含另一组元素的自然方法是使用内置的`set`.

*   首先，构建包含在项目中的所有字母的集合`list1`

    ```
    target = set()
    for item in list1:
        target |= set(item) 
    ```

    请注意，我们正在使用`|=`操作员更改我们的集合。我们还可以将集合的构造放在一行中：

    ```
    import operator
    target = reduce(operator.or_, (set(i) for i in list1) 
    ```

*   现在，我们必须迭代`list2`并检查每个项目的字母是否包含在集合中：

    ```
    for item in list2:
        if target.issuperset(item):
            print "item {0} passed the test".format(item)
        else:
            print "item {0} failed the test".format(item) 
    ```

    您可以构造与此测试对应的布尔值列表：

    ```
    valid = [target.superset(i) for i in list2] 
    ```

    并检查是否所有元素都通过了测试`all(valid)`，或者是否至少有一个通过了测试`any(valid)`……你明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:33:34.517

这样做怎么样：

1.  获取所有唯一字符的列表`list2`，我们称之为`charlist`
2.  遍历`list1`，如果 in 中的任何字符`list2`不在 in 中`charlist`，则将它们分开。

第 1 部分：

```
>>> charset = set(''.join(i for i in list2))
>>> charset
set(['a', 'B', 'l', 'o', 'S', 'x']) 
```

A[`set`](http://docs.python.org/library/stdtypes.html#set)是一种不允许重复的特殊类型；每个项目都必须是唯一的。

对于第 2 部分：

```
>>> characters_missing = [x for x in ''.join(list1) if x not in charlist]
>>> len(characters_missing)
0 
```

使用[列表](http://carlgroner.me/Python/2011/11/09/An-Introduction-to-List-Comprehensions-in-Python.html)推导然后计算结果的长度，我们可以找出有多少个字母 from`charlist`不在 from 的单词中`list1`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T07:37:48.880

我认为内置`join`函数可以允许有一个有效的解决方案：

```
>>> list1 = ["Box", "Stall"]
>>> list2 = ["Ball", "Sox"]
>>> def chars_subset(l1, l2):
    s1 = "".join(l1)
    s2 = "".join(l2)
    return not bool([c for c in s2 if c not in s1])

>>> chars_subset(list1, list2)
True
>>> list2 = ["Ball", "Soy"]
>>> chars_subset(list1, list2)
False 
```

# php - 单击添加以在 php 中插入另一个输入字段

> ID：12313066
> 
> 赞同：2
> 
> 时间：2012-09-07T06:44:44.657
> 
> 标签：php, jquery, html

如果有人单击我的代码中看到的添加位置，我需要添加另一个类型为 select 的输入字段

```
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <p><strong> location</strong></p></br />
<select name="location">
    <option value="location1">location1</option>
    <option value="location2">location2</option>
    <option value="location3">location3</option>
    <option value="location4">location4</option>
</select>
<a href="#" id="#newField">Add location</a>
<hr/>
</form> 
```

我在表单标签中有更多选择，但这是我遇到问题的地方。我只需要添加字段而不刷新此人添加的任何数据。感谢您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T06:55:24.330

您可以使用`clone`：

```
$('#newField').click(function(){
    $('select[name=location]:first').clone().insertAfter('select:last')
}) 
```

[小提琴](http://jsfiddle.net/ZYwzH/)

请注意，您不应`#`在 id 属性中使用。

```
<a href="#" id="#newField">Add location</a>
         //-----^ 
```

# html - 关闭浏览器后保存 HTML5 SessionStorage

> ID：12313068
> 
> 赞同：2
> 
> 时间：2012-09-07T06:44:45.977
> 
> 标签：html, session, session-storage

关闭浏览器后如何保存 HTML5 会话存储？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:18:10.293

正如@Romin 所发布的，`sessionStorage`仅在选项卡打开之前是持久的。[参考这个](http://code.google.com/p/sessionstorage/)

你应该看看浏览器`localStorage`。使用类似[放大](http://amplifyjs.com/)的东西将极大地帮助您编写跨浏览器应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:22:13.647

从您的问题中不清楚您是否看过`localStorage`？如果是，您应该使用它，因为 API 类似于`sessionStorage`并且您的数据会在浏览器重新启动时保持不变，但当然仅限于特定的域命名空间。

`sessionStorage`关闭浏览器后可以找回。实际上，`sessionStorage`它仅对特定窗口或选项卡是唯一的，因此它不仅与关闭浏览器有关，还与具有两个不同的`sessionStorage`属性有关。

# mysql - 将维基百科转储导入 SQL 库

> ID：12313071
> 
> 赞同：3
> 
> 时间：2012-09-07T06:44:54.657
> 
> 标签：mysql, import, dump, wikipedia

我的 MySQL 有问题。我想在我的 MediaWiki（本地服务器“Denwer”）中导入维基百科的转储。

1.  首先，我使用**MWdumper.jar**将 XML 转储转换为 SQL 文件。（为了测试，我使用了小尺寸（~92 MB）的simplewiki-dump）

2.  然后将 sql-file 导入到我的 sql-base：我来自命令行，使用**mysql.exe**输入命令：

    ```
    mysql.exe --user=root --password=
    use wikidb
    source  X:[path to dump.sql]\dump.sql 
    ```

3.  长进程正常运行（消息：Query OK）。但在某些时候，我收到一条错误消息：

    > ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 ' ' 附近使用的正确语法 The\'\'\'1947тАУ48 NHL season\'\'\' is the 31st [[Season (sport):season]] of在第 1 行。

4.  出错后，进程停止，部分文章被导入，但不是全部。

请帮助我：为什么会发生错误？如何修复或绕过错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-01T16:55:48.110

> *Den*已经在评论中说：使用来自 Wikimedia Meta-Wiki的**[Perl 脚本！](https://meta.wikimedia.org/wiki/Data_dumps/mwimport)**

### 代码

Perl 脚本的代码：

```
#!/usr/bin/perl -w
=head1 NAME

mwimport -- quick and dirty mediawiki importer

=head1 SYNOPSIS

cat pages.xml | mwimport [-s N|--skip=N]

=cut

use strict;
use Getopt::Long;
use Pod::Usage;

my ($cnt_page, $cnt_rev, %namespace, $ns_pattern);
my $committed = 0;
my $skip = 0;

## set this to 1 to match "mwdumper --format=sql:1.5" as close as possible
sub Compat() { 0 }

# 512kB is what mwdumper uses, but 4MB gives much better performance here
my $Buffer_Size = Compat ? 512*1024 : 4*1024*1024;

sub textify($)
{
  my $l;
  for ($_[0]) {
    if (defined $_) {
      s/&quot;/"/ig;
      s/&lt;/</ig;
      s/&gt;/>/ig;
      /&(?!amp;)(.*?;)/ and die "textify: does not know &$1";
      s/&amp;/&/ig;
      $l = length $_;
      s/\\/\\\\/g;
      s/\n/\\n/g;
      s/'/\\'/ig;
      Compat and s/"/\\"/ig;
      $_ = "'$_'";
    } else {
      $l = 0;
      $_ = "''";
    }
  }
  return $l;
}

sub getline()
{
  $_ = <>;
  defined $_ or die "eof at line $.\n";
}

sub ignore_elt($)
{
  m|^\s*<$_[0]>.*?</$_[0]>\n$| or die "expected $_[0] element in line $.\n";
  getline;
}

sub simple_elt($$)
{
  if (m|^\s*<$_[0]\s*/>\n$|) {
    $_[1]{$_[0]} = '';
  } elsif (m|^\s*<$_[0]>(.*?)</$_[0]>\n$|) {
    $_[1]{$_[0]} = $1;
  } else {
    die "expected $_[0] element in line $.\n";
  }
  getline;
}

sub simple_opt_elt($$)
{
  if (m|^\s*<$_[0]\s*/>\n$|) {
    $_[1]{$_[0]} = '';
  } elsif (m|^\s*<$_[0]>(.*?)</$_[0]>\n$|) {
    $_[1]{$_[0]} = $1;
  } else {
    return;
  }
  getline;
}

sub redirect_elt($)
{
  if (m|^\s*<redirect\s*title="([^"]*)"\s*/>\n$|) { # " -- GeSHI syntax highlighting breaks on this line
    $_[0]{redirect} = $1;
  } else {
    simple_opt_elt redirect => $_[0];
    return;
  }
  getline;
}

sub opening_tag($)
{
  m|^\s*<$_[0]>\n$| or die "expected $_[0] element in line $.\n";
  getline;
}

sub closing_tag($)
{
  m|^\s*</$_[0]>\n$| or die "$_[0]: expected closing tag in line $.\n";
  getline;
}

sub si_nss_namespace()
{
  m|^\s*<namespace key="(-?\d+)"[^/]*?/>()\n|
    or m|^\s*<namespace key="(-?\d+)"[^>]*?>(.*?)</namespace>\n|
    or die "expected namespace element in line $.\n";
  $namespace{$2} = $1;
  getline;
}

sub si_namespaces()
{
  opening_tag("namespaces");
  eval {
    while (1) {
      si_nss_namespace;
    }
  };
  # note: $@ is always defined
  $@ =~ /^expected namespace element / or die "namespaces: $@";
  $ns_pattern = '^('.join('|',map { quotemeta } keys %namespace).'):';
  closing_tag("namespaces");
}

sub siteinfo()
{
  opening_tag("siteinfo");
  eval {
    my %site;
    simple_elt sitename => \%site;
    simple_elt dbname => \%site;
    simple_elt base => \%site;
    simple_elt generator => \%site;
    $site{generator} =~ /^MediaWiki 1.20wmf1$/
      or warn("siteinfo: untested generator '$site{generator}',",
          " expect trouble ahead\n");
    simple_elt case => \%site;
    si_namespaces;
    print "-- MediaWiki XML dump converted to SQL by mwimport
BEGIN;

-- Site: $site{sitename}
-- DBName: $site{dbname}
-- URL: $site{base}
-- Generator: $site{generator}
-- Case: $site{case}
--
-- Namespaces:
",map { "-- $namespace{$_}: $_\n" }
  sort { $namespace{$a} <=> $namespace{$b} } keys %namespace;
  };
  $@ and die "siteinfo: $@";
  closing_tag("siteinfo");
}

sub pg_rv_contributor($)
{
  if (m|^\s*<contributor deleted="deleted"\s*/>\s*\n|) {
    getline;
  } else {
    opening_tag "contributor";
    my %c;
    eval {
      simple_elt username => \%c;
      simple_elt id => \%c;
      $_[0]{contrib_user} = $c{username};
      $_[0]{contrib_id}   = $c{id};
    };
    if ($@) {
      $@ =~ /^expected username element / or die "contributor: $@";
      eval {
        simple_elt ip => \%c;
        $_[0]{contrib_user} = $c{ip};
      };
      $@ and die "contributor: $@";
    }
    closing_tag "contributor";
  }
}

sub pg_rv_comment($)
{
  if (m|^\s*<comment\s*/>\s*\n|) {
    getline;
  } elsif (m|^\s*<comment deleted="deleted"\s*/>\s*\n|) {
    getline;
  } elsif (s|^\s*<comment>([^<]*)||g) {
    while (1) {
      $_[0]{comment} .= $1;
      last if $_;
      getline;
      s|^([^<]*)||;
    }
    closing_tag "comment";
  } else {
    return;
  }
}

sub pg_rv_text($)
{
  if (m|^\s*<text xml:space="preserve"\s*/>\s*\n|) {
    $_[0]{text} = '';
    getline;
  } elsif (m|^\s*<text deleted="deleted"\s*/>\s*\n|) {
    $_[0]{text} = '';
    getline;
  } elsif (s|^\s*<text xml:space="preserve">([^<]*)||g) {
    while (1) {
      $_[0]{text} .= $1;
      last if $_;
      getline;
      s|^([^<]*)||;
    }
    closing_tag "text";
  } else {
    die "expected text element in line $.\n";
  }
}

my $start = time;

sub stats()
{
  my $s = time - $start;
  $s ||= 1;
  printf STDERR "%9d pages (%7.3f/s), %9d revisions (%7.3f/s) in %d seconds\n",
    $cnt_page, $cnt_page/$s, $cnt_rev, $cnt_rev/$s, $s;
}

### flush_rev($text, $rev, $page)
sub flush_rev($$$)
{
  $_[0] or return;
  for my $i (0,1,2) {
    $_[$i] =~ s/,\n?$//;
  }
  print "INSERT INTO text(old_id,old_text,old_flags) VALUES $_[0];\n";
  $_[2] and print "INSERT INTO page(page_id,page_namespace,page_title,page_restrictions,page_counter,page_is_redirect,page_is_new,page_random,page_touched,page_latest,page_len) VALUES $_[2];\n";
  print "INSERT INTO revision(rev_id,rev_page,rev_text_id,rev_comment,rev_user,rev_user_text,rev_timestamp,rev_minor_edit,rev_deleted,rev_len,rev_parent_id) VALUES $_[1];\n";
  for my $i (0,1,2) {
    $_[$i] = '';
  }
}

### flush($text, $rev, $page)
sub flush($$$)
{
  flush_rev $_[0], $_[1], $_[2];
  print "COMMIT;\n";
  $committed = $cnt_page;
}

### pg_revision(\%page, $skip, $text, $rev, $page)
sub pg_revision($$$$$)
{
  my $rev = {};
  opening_tag "revision";
  eval {
    my %revision;
    simple_elt id => $rev;
    simple_opt_elt parentid => $rev;
    simple_elt timestamp => $rev;
    pg_rv_contributor $rev;
    simple_opt_elt minor => $rev;
    pg_rv_comment $rev;
    simple_opt_elt model => $rev;
    simple_opt_elt format => $rev;
    pg_rv_text $rev;
    simple_opt_elt sha1 => $rev;
  };
  $@ and die "revision: $@";
  closing_tag "revision";
  $_[1] and return;
  $$rev{id} =~ /^\d+$/ or return
    warn("page '$_[0]{title}': ignoring bogus revision id '$$rev{id}'\n");
  $_[0]{latest_len} = textify $$rev{text};
  for my $f (qw(comment contrib_user)) {
    textify $$rev{$f};
  }
  $$rev{timestamp} =~
    s/^(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)Z$/'$1$2$3$4$5$6'/
      or return warn("page '$_[0]{title}' rev $$rev{id}: ",
             "bogus timestamp '$$rev{timestamp}'\n");
  $_[2] .= "($$rev{id},$$rev{text},'utf-8'),\n";
  $$rev{minor} = defined $$rev{minor} ? 1 : 0;
  $_[3] .= "($$rev{id},$_[0]{id},$$rev{id},$$rev{comment},"
    .($$rev{contrib_id}||0)
    .",$$rev{contrib_user},$$rev{timestamp},$$rev{minor},0,$_[0]{latest_len},$_[0]{latest}),\n";
  $_[0]{latest} = $$rev{id};
  $_[0]{latest_start} = substr $$rev{text}, 0, 60;
  if (length $_[2] > $Buffer_Size) {
    flush_rev $_[2], $_[3], $_[4];
    $_[0]{do_commit} = 1;
  }
  ++$cnt_rev % 1000 == 0 and stats;
}

### page($text, $rev, $page)
sub page($$$)
{
  opening_tag "page";
  my %page;
  ++$cnt_page;
  eval {
    simple_elt title => \%page;
    simple_opt_elt ns => \%page;
    simple_elt id => \%page;
    redirect_elt \%page;
    simple_opt_elt restrictions => \%page;
    $page{latest} = 0;
    while (1) {
      pg_revision \%page, $skip, $_[0], $_[1], $_[2];
    }
  };
  # note: $@ is always defined
  $@ =~ /^expected revision element / or die "page: $@";
  closing_tag "page";
  if ($skip) {
    --$skip;
  } else {
    $page{title} or return;
    $page{id} =~ /^\d+$/
      or warn("page '$page{title}': bogus id '$page{id}'\n");
    my $ns;
    if ($page{title} =~ s/$ns_pattern//o) {
      $ns = $namespace{$1};
    } else {
      $ns = 0;
    }
    for my $f (qw(title restrictions)) {
      textify $page{$f};
    }
    if (Compat) {
      $page{redirect} = $page{latest_start} =~ /^'#(?:REDIRECT|redirect) / ?
    1 : 0;
    } else {
      $page{redirect} = $page{latest_start} =~ /^'#REDIRECT /i ? 1 : 0;
    }
    $page{title} =~ y/ /_/;
    if (Compat) {
      $_[2] .= "($page{id},$ns,$page{title},$page{restrictions},0,"
    ."$page{redirect},0,RAND(),"
      ."DATE_ADD('1970-01-01', INTERVAL UNIX_TIMESTAMP() SECOND)+0,"
        ."$page{latest},$page{latest_len}),\n";
    } else {
      $_[2] .= "($page{id},$ns,$page{title},$page{restrictions},0,"
    ."$page{redirect},0,RAND(),NOW()+0,$page{latest},$page{latest_len}),\n";
    }
    if ($page{do_commit}) {
      flush $_[0], $_[1], $_[2];
      print "BEGIN;\n";
    }
  }
}

sub terminate
{
  die "terminated by SIG$_[0]\n";
}

my $SchemaVer = '0.10';
my $SchemaLoc = "http://www.mediawiki.org/xml/export-$SchemaVer/";
my $Schema    = "http://www.mediawiki.org/xml/export-$SchemaVer.xsd";

my $help;
GetOptions("skip=i"     => \$skip,
       "help"       => \$help) or pod2usage(2);
$help and pod2usage(1);

getline;
m|^<mediawiki \Qxmlns="$SchemaLoc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="$SchemaLoc $Schema" version="$SchemaVer"\E xml:lang="..">$|
  or die "unknown schema or invalid first line\n";
getline;
$SIG{TERM} = $SIG{INT} = \&terminate;
siteinfo;
my ($text, $rev, $page) = ('', '', '');
eval {
  while (1) {
    page $text, $rev, $page;
  }
};
$@ =~ /^expected page element / or die "$@ (committed $committed pages)\n";
flush $text, $rev, $page;
stats;
m|</mediawiki>| or die "mediawiki: expected closing tag in line $.\n";

=head1 COPYRIGHT

Copyright 2007 by Robert Bihlmeyer

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

You may also redistribute and/or modify this software under the terms
of the GNU Free Documentation License without invariant sections, and
without front-cover or back-cover texts.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details. 
```

### 示例用法

**`mwimport.pl`**并使用以下示例命令在命令提示符下运行脚本：

```
bzcat enwiki-20120104-pages-articles.xml.bz2 | perl mwimport.pl | gzip -c > /media/wikipedia/enwiki.sql.gz 
```

# html - 合并多个表单数据

> ID：12313072
> 
> 赞同：0
> 
> 时间：2012-09-07T06:45:00.227
> 
> 标签：html, forms

我正在用 django 创建一个信用卡支付页面。用户可以选择填写信用卡信息或使用之前输入的卡。然而，用户必须选择一个位置。

有没有办法创建表单，所以我不必有 2 个单独的位置“选择”按钮？

HTML：

```
 <h1>Charge $10 with Stripe</h1>
    <!-- to display errors returned by createToken -->
    <span class="payment-errors"></span>
    <form action="" method="POST" id="payment-form">
        {% csrf_token %}

        {% if not user.is_authenticated %}

        <div class="form-row">
            <label>Full Name</label>
            <input type="text" size="30" autocomplete="off" name="fullname" />
        </div>
        <div class="form-row">
            <label>Email</label>
            <input type="text" size="30" autocomplete="off" name="email" />
        </div>
        <div class="form-row">
            <label>Phone</label>
            <input type="text" size="11" autocomplete="off" name="phone" />
        </div>

        {% endif %}
        <label>Location</label>
        <select name="location">
        <option value="muir">Muir</option>
        <option value="erc">ERC</option>
        <option value="marshall">Marshall</option>
        <option value="warren">Warren</option>
        <option value="revelle">Revelle</option>
        <option value="sixth">Sixth</option>

        </select>

        <div class="form-row">
            <label>Card Number</label>
            <input type="text" size="20" autocomplete="off" class="card-number" />
        </div>
        <div class="form-row">
            <label>CVC</label>
            <input type="text" size="4" autocomplete="off" class="card-cvc" />
        </div>
        <div class="form-row">
            <label>Expiration (MM/YYYY)</label>
            <input type="text" size="2" class="card-expiry-month"/>
            <span> / </span>
            <input type="text" size="4" class="card-expiry-year"/>
        </div>
        {% if user.is_authenticated %}
        <input type="checkbox" name="save_card_info" value="yes"/> Save this card </br>
        {% endif %}
        <button type="submit" class="submit-button">Submit Payment</button>
    </form>

    {% if user.is_authenticated and user.get_profile.stripe_customer_id %}
    </br>
    OR:
    </br>
    </br>
    Use card ending with: 4343
    <form action="" method="POST">
        {% csrf_token %}

        <label>Location</label>
        <select name="location">
        <option value="muir">Muir</option>
        <option value="erc">ERC</option>
        <option value="marshall">Marshall</option>
        <option value="warren">Warren</option>
        <option value="revelle">Revelle</option>
        <option value="sixth">Sixth</option>
        </select>
        </br>
        <input type="hidden" name="action=" value="pay_saved_card"/>
        <button type="submit">Submit Payment</button>

    </form>
    {% endif %}
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:48:58.907

您可以在相应表单的提交事件处理程序中通过 JavaScript（使用 jQuery 时可能很容易）检索选定的位置。

# php - 充值PHP，获取customerID

> ID：12313074
> 
> 赞同：0
> 
> 时间：2012-09-07T06:45:03.393
> 
> 标签：php, chargify

对于那些熟悉使用 Chargify 和 PHP 的人，我正在尝试执行应该是一个简单的请求。我正在使用 Chargify API 创建一个新用户。我的这部分代码正在运行。请求正在发送，Chargify 正在记录新客户。我想做的是获取刚刚创建的客户的 ID。这就是我正在使用的，它正在抛出错误。

**代码**

```
// Create a ChargifyProduct object in test mode.
        $customer->email = $_POST['email'];
        $customer->first_name = $_POST['first_name'];
        $customer->last_name = $_POST['last_name'];
        $new_customer = $customer->create();
        //Grab customer ID
        $customer_x = $new_customer->getByID(); 
```

**错误**

```
Fatal error: Uncaught exception 'ChargifyConnectionException' with message 'An error occurred while connecting to Chargify: Couldn't resolve host '.chargify.com' (6)' in /home/assets/lib/ChargifyConnector.php:99 Stack trace: #0 /home/\assets/lib/ChargifyConnector.php(146): ChargifyConnector->sendRequest('/customers.xml', 'XML', 'POST', '<?xml version="...') #1 /home/assets/lib/ChargifyConnector.php(157): ChargifyConnector->requestCreateCustomer('<?xml version="...') #2 /home/assets/lib/ChargifyCustomer.php(43): ChargifyConnector->createCustomer(Object(ChargifyCustomer)) #3 /home/andfun4/photoappoint.com/register/index.php(20): ChargifyCustomer->create() #4 {main} thrown in /home/assets/lib/ChargifyConnector.php on line 99 
```

对此的任何见解将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T06:56:26.307

显示的错误不是来自显示的代码！

查看这些行的代码，它们导致错误：

```
$new_customer = $customer->create();
//Grab customer ID
$customer_x = $new_customer->getByID(); 
```

当我阅读它时，在这些行中，建立了与数据库的连接，并且第一个参数（主机名）无法解析，因为它不存在。

# mysql - 什么是在带有分隔符的 MySQL 字段上使用比较运算符的简洁快速的方法？

> ID：12313075
> 
> 赞同：0
> 
> 时间：2012-09-07T06:45:04.227
> 
> 标签：mysql, sql, operator-keyword, delimiter

例如，一个字段由两个数据组成，基本级别和作业级别，并用分隔符分隔。

> 字段名称：'baselvl:joblvl'
> 示例数据：'70:30' => 该条目表示基本级别为 70，工作级别为 30

我正在尝试在 PHP 网站中包含搜索以获取满足某些条件的数据。例如，抓取基础级别为 70 或更高的数据。或者，例如，大于 50 的基本级别和小于或等于 30 的工作级别。

**更新：** 我忘了提到他们设计了这个字段，因此 joblvl 部分是可选的。

> 示例数据：'70' => 该条目表示基本级别为 70，工作级别为 0

是的，我同意，设计不是那么好——但我无法改变它。我必须了解它是如何工作的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:09:58.197

试试这个：

我认为您正在使用**mysql**。使用以下查询拆分列..

```
set @field='70:30';
select substr(@field,1,LOCATE(':',@field)-1) as baselvl,
substr(@field,LOCATE(':',@field)+1,length(@field)-LOCATE(':',@field)) as oblvl 
```

**请注意，最好的方法是将两个值存储在单独的列中，否则您将来会遇到很多这样的问题**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T06:58:08.090

```
Declare @temp varchar(30)='70:40'
Declare @temp1 varchar(30)='70:10'

if (
convert(int,substring(@temp, 0,charindex(':',@temp)))>=convert(int,substring(@temp,
0,charindex(':',@temp1)))
and 
convert(int,substring(@temp,
charindex(':',@temp)+1,len(@temp)))>=convert(int,substring(@temp1,
charindex(':',@temp)+1,len(@temp1))))
  print 'yes' 
```

# ruby - 如何在红宝石中找到睡眠线程的时间？

> ID：12313077
> 
> 赞同：0
> 
> 时间：2012-09-07T06:45:17.220
> 
> 标签：ruby, multithreading

我正在研究内部具有恒定循环的线程。我想检查线程睡眠的时间。

如何找到线程的休眠时间？

这是代码

```
 t = Thread.new{
     loop do
        puts "thread "
        threads=Thread.list
        threads.each_with_index do |th,index|              
            th.status == "run"  ? th.priority = 2 :  th.priority = 0
            if th.status == "false" || th.status == "sleep" 
               th.kill 
            end
            print "thread #{th} : State=> #{th.status} : priority=> #{th.priority} :index=> #{index}  \n "              
        end
     end
  } 
```

我想知道休眠线程的时间，以便我可以杀死正确的线程。因为线程的生命应该在某个阶段被杀死

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:23:49.127

您可以设置线程级别变量以在创建给定线程时获取信息：

```
t = Thread.new{}
t[:created_at] = Time.now 
```

如果您想知道线程休眠了多长时间，您需要在每次线程进入休眠状态时设置该值，并在它唤醒时将其重置。所以你的支票看起来像

```
 th.kill if Time.now - th[:created_at] > MAX_THREAD_LIFETIME 
```

# javascript - HTML下载电影下载链接

> ID：12313082
> 
> 赞同：2
> 
> 时间：2012-09-07T06:45:31.263
> 
> 标签：javascript, html, download, move

我希望用户能够点击触发 .mov 文件下载的按钮。链接到文件本身只会导致电影在新页面中播放。

我试过这个：

```
<a onclick="document.execCommand('SaveAs',true,'assets/files/mymovie.mov');" href="javascript:void(0);"> 
```

但这似乎不起作用。

谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T06:48:24.507

您可以尝试 html5 下载属性。

```
<a href='assets/files/mymovie.mov' download> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T06:49:50.933

除了穆萨的回答：

尝试设置`Content-Disposition`标题。您需要在服务器配置中进行设置，或者让服务器上的可执行脚本执行此操作（例如 php）：

```
Content-Disposition: attachment; filename="mymovie.mov" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T06:52:18.997

如果您偶然使用服务器端页面来提供内容，那么您可以轻松设置该页面的标题`Content-Disposition: attachment`和/或`Content-Type:binary`使其开始下载。

否则，您可以在`<a>`标签中使用下载属性，该属性仅适用于某些浏览器。

最后，如果你真的很英勇，你可以在你的网络服务器中修改你的 mime-types 设置配置文件，在那里你可以设置内容配置。

# php - 使用 tmhOAuth 时 Twitter api 返回状态 400

> ID：12313083
> 
> 赞同：0
> 
> 时间：2012-09-07T06:45:34.843
> 
> 标签：php, twitter

我有以下代码：

```
error_reporting(E_ALL);

 ini_set("display_errors", 1);

$db = mysqli_connect("db.mysql","user","pwd","db");

$consumersecret = "Cy4qwsC1fdvP62x------BiEQMLwbDUUA";
$consumerkey = "0XCjdxL------lJc---UtA";

$accesstoken = "154823199------QO4L8xfMgpsGHLb-----xTOuUf4WMwY";
$accesssecret = "mOwRu6b34--------------ZRktk3pg";

require_once('tmhOAuth.php');
    $connection = new tmhOAuth(array(
       'consumer_key' => $consumersecret,
        'consumer_secret' => $consumerkey,
        'user_token' => $accesstoken,
        'user_secret' => $accesssecret,
      )); 

  $code=$connection->request('GET', $connection->url('1/statuses/user_timeline'),

                array('include_entities' => 'true', 

                        'include_rts' => 'true',

                        'screen_name'=>'mdibbets',

                        'count'=>'2'),true);

        if ($code == 200) {

            $responseData = json_decode($connection->response['response'],true);

            var_dump($connection->response['response']);

            }

        var_dump($connection->response); 
```

我得到的回应如下：

```
array(4) {
  ["headers"]=>
  array(12) {
    ["x_ratelimit_limit"]=>
    string(3) "150"
    ["x_ratelimit_remaining"]=>
    string(1) "0"
    ["x_ratelimit_reset"]=>
    string(10) "1347001832"
    ["x_ratelimit_class"]=>
    string(3) "api"
    ["content_type"]=>
    string(30) "application/json;charset=utf-8"
    ["set_cookie"]=>
    string(99) "guest_id="v1:134699975230464174"; Expires=Sun, 7-Sep-2014 06:35:52 GMT; Path=/; Domain=.twitter.com"
    ["status"]=>
    string(15) "400 Bad Request"
    ["x_transaction"]=>
    string(16) "ba0517c8728574ad"
    ["x_frame_options"]=>
    string(10) "SAMEORIGIN"
    ["date"]=>
    string(29) "Fri, 07 Sep 2012 06:35:52 GMT"
    ["content_length"]=>
    string(3) "200"
    ["server"]=>
    string(3) "tfe"
  }
  ["code"]=>
  int(400)
  ["response"]=>
  string(200) "{"request":"\/1\/statuses\/user_timeline.json?count=2&include_entities=true&include_rts=true&screen_name=mdibbets","error":"Rate limit exceeded. Clients may not make more than 150 requests per hour."}"
  ["info"]=>
  array(23) {
    ["url"]=>
    string(121) "https://api.twitter.com/1/statuses/user_timeline.json?count=2&include_entities=true&include_rts=true&screen_name=mdibbets"
    ["content_type"]=>
    string(30) "application/json;charset=utf-8"
    ["http_code"]=>
    int(400)
    ["header_size"]=>
    int(450)
    ["request_size"]=>
    int(529)
    ["filetime"]=>
    int(-1)
    ["ssl_verify_result"]=>
    int(0)
    ["redirect_count"]=>
    int(0)
    ["total_time"]=>
    float(0.743177)
    ["namelookup_time"]=>
    float(3.7E-5)
    ["connect_time"]=>
    float(0.184139)
    ["pretransfer_time"]=>
    float(0.555495)
    ["size_upload"]=>
    float(0)
    ["size_download"]=>
    float(200)
    ["speed_download"]=>
    float(269)
    ["speed_upload"]=>
    float(0)
    ["download_content_length"]=>
    float(200)
    ["upload_content_length"]=>
    float(0)
    ["starttransfer_time"]=>
    float(0.743047)
    ["redirect_time"]=>
    float(0)
    ["certinfo"]=>
    array(0) {
    }
    ["redirect_url"]=>
    string(0) ""
    ["request_header"]=>
    string(529) "GET /1/statuses/user_timeline.json?count=2&include_entities=true&include_rts=true&screen_name=mdibbets HTTP/1.1
User-Agent: themattharris' HTTP Client
Host: api.twitter.com
Accept: */*
Authorization: OAuth oauth_consumer_key="Cy4qwsC1fdvP6--------EQMLwbDUUA", oauth_nonce="0a119b791------604faaf23", oauth_signature="OsHfGZ------wmMApoxNdddD4%3D", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1346999751", oauth_token="154823-------gpsGHLb1DMUnxxTOuUf4WMwY", oauth_version="1.0"

"
  }
} 
```

是否有一些技巧可以让我没有使用的 Oauth 工作？不知何故，tmoauth 的所有文档都会导致 404，但强烈建议这样做。

有人可以给我一个指示如何正确使用 tmoauth 吗？文档，示例代码，什么？

我正在使用共享虚拟服务器主机，因此 twitter 显然可以识别来自我的托管公司其他客户的 IP。

如果有人知道没有 tmoauth 的有据可查的方法，纯原生 php 我全都听，但它确实需要良好的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:32:43.920

*   tmhOauth 在示例中有它的文档。示例非常简单明了，有助于理解代码。您可以在此处找到示例：
    [https ://github.com/themattharris/tmhOAuth-examples](https://github.com/themattharris/tmhOAuth-examples)

*   您也可以获取自己的应用程序的访问令牌并使用自己的令牌。检查这个：[https ://dev.twitter.com/discussions/631](https://dev.twitter.com/discussions/631)

*   关于您的代码，您收到 400 错误，它与 404 不同。您提出了错误的请求。从标题中我可以看到您消耗了您的速率限制。您应该等到下一次重置时间。这是纪元 1347001832 = 2012 年 9 月 7 日星期五 07:10:32 GMT

作为旁注，您可以使用上周发布的 Twitter API 1.1。这给出了更多的速率限制。

# ruby-on-rails - 如何启动 Rails 服务器，等待它启动并关闭它

> ID：12313093
> 
> 赞同：2
> 
> 时间：2012-09-07T06:46:26.480
> 
> 标签：ruby-on-rails, continuous-integration, rake

我正在尝试在 CI 服务器中运行一些 Javascript 测试。问题是这个测试只有在 Rails 服务器正在运行时才能运行。所以我需要：

*   启动 Rails 服务器
*   等它起来
*   运行我的 JS 跑步者
*   关闭服务器

关于如何做到这一点的任何想法？

谢谢

# c# - Jquery DatePicker 日期格式更改

> ID：12313094
> 
> 赞同：1
> 
> 时间：2012-09-07T06:46:26.893
> 
> 标签：c#, jquery, date-format

我正在使用 J 查询在 C# 中工作。在我的工作中，我正在使用 datepicker，因为我有疑问，

我的问题是，我从文本框中的 datepicker den 绑定得到日期，我需要在获取文本框日期后

格式必须更改，任何人都可以提供解决方案，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:00:29.997

您可以使用`dateFormat`

像这样

```
$('#ControlId').datepicker({ dateFormat: 'mm/dd/yy' });

OR 

$('#ControlId').datepicker({ dateFormat: 'dd/mm/yy' }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T06:51:11.193

jQuery 提供了许多日期选择器。但我会使用内置的 jQuery [UI](http://jqueryui.com/demos/datepicker/)：

然后你可以像这样设置日期格式：

```
$.datepicker.formatDate( format, date, settings ) 
```

或使用不同的方法（其中很多）根据您的需要对其进行自定义

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T06:57:26.100

使用：
1）从`datepicker`你选择值后改变格式。

```
 getDate() // Returns date
    getMonth() // Returns the month
    getFullYear() // Returns the year
    var d ="Your Date From date picker";
    var curr_date = d.getDate();
    var curr_month = d.getMonth();
    var curr_year = d.getFullYear();
    var desirersult = (curr_date + "-" + curr_month + "-" + curr_year); //how you want to display. 
```

2）在选择`datepicker`您设置格式之前：

```
$('#datepicker ').datetimepicker({
    dateFormat: 'dd-mm-yy',
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T06:58:02.647

您可以设置执行 jQuery 的日期

```
$(document).ready(function () {
    $(".DatepickerInput").datepicker({ dateFormat: 'dd/mm/yy' });
}); 
```

或者，当您将日期添加到文本框时，请执行以下操作：

```
TextBox1.Text = Convert.ToDateTime(TextBox1.Text).ToString("d"); 
```

使用[C# 中的日期格式](http://www.mikesdotnetting.com/Article/23/Date-Formatting-in-CSharp)来适当地格式化您的日期。

# css - 使用 css 网格围绕网格的边框

> ID：12313096
> 
> 赞同：0
> 
> 时间：2012-09-07T06:46:41.260
> 
> 标签：css, frameworks, grid

使用 twitter-bootstrap 等网格系统将边框和填充应用于包含站点的 div 到站点的最佳方法是什么？

例如，使用引导程序 - 网格取决于嵌套容器和行内。对第一个容器应用边框和填充会改变数学和包含的 div 垂直堆叠 - 网格中断。

将第一个容器放在单独的 wrap div 中并将边框和填充应用于 wrap div 也不起作用 - 包含的 div 脱离容器。

所以标记的一个例子是：

```
<div class=' main'>
    <div class='container'>
      <div class='row'>
        <div class='span12'>              
            <h1>Demo</h1>    
            <div class='row'>
              <section class='span8'>
                blah blah
              </section>
              <aside class='row'>
                links n stuff
              </aside>    
             </div>
         </div>
      </div>
</div> 
```

我想在主包装器上应用 20 像素的填充、1 像素的边框。Bootstrap 以 px 为单位计算跨度的宽度 - 所以它们正在爆发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:45:08.697

所以我们不想要 px 宽度，我们想要 % 宽度。其他框架使用 %'s。哦。自举流体使用 %'s

```
<div class=' main'>
<div class='container-fluid'>
  <div class='row-fluid'>
    <div class='span12'>              
        <h1>Demo</h1>    
        <div class='row-fluid'>
          <section class='span8'>
            blah blah
          </section>
          <aside class='span3'>
            links n stuff
          </aside>    
         </div>
     </div>
  </div>
</div> 
```

然后使用媒体查询计算出容器的宽度

```
.main{
  width:1210px;
  margin:20px auto;

  border-radius:3px;
  border:1px solid #eee;
  box-shadow: 2px 2px 8px rgba(6,6,6,0.5);
}

@media (max-width: 1210px) { 
 .main{
    width:80%;
  }
 } 
```

那是引导网格周围的一个盒子。耶。

# unix - “对于每个文件”-在 awk 脚本中循环

> ID：12313097
> 
> 赞同：2
> 
> 时间：2012-09-07T06:46:41.693
> 
> 标签：unix, for-loop, foreach, awk

我现在编写了一个 AWK 函数，它应该如下所示：

```
 function inser_styles(path_to_files, output_file) {
    for each input_file in path_to_files {
      print "" > output_file;
      while ( getline < input_file ) {
        print "   " $0 > output_file;
      }
    }
    print "" > output_file;
  } 
```

它应该从某个`path_to_files`目录读取文件并将每个目录的所有内容`input_file`放入 some`output_file`中，用空行分隔。

`for each input_file in path_to_files {...}`- 循环看起来如何？awk 是否支持这种 for 循环，或者我应该使用 extern execute of 读取文件名数组`ls`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:06:06.690

您可以使用该`find`实用程序来获取文件名。请注意，如果文件名包含换行符，这将无法正常工作。指定您想与 一起使用的任何其他选项`find`。

```
function insert_styles(path_to_files, output_file) {
    cmd = "find " path_to_files " -maxdepth 1 -type f"
    while (cmd | getline input_file > 0) {
        print "" > output_file;
        while ( getline < input_file ) {
            print "   " $0 > output_file;
        }
        close(input_file)
    }
    close(cmd)
    print "" > output_file;
} 
```

# mysql - mysql #1312 - PROCEDURE 无法返回结果集

> ID：12313100
> 
> 赞同：1
> 
> 时间：2012-09-07T06:46:57.043
> 
> 标签：mysql, stored-procedures

> **可能重复：**
> [在另一个存储过程中使用mysql存储过程的结果集](https://stackoverflow.com/questions/2466713/use-result-set-of-mysql-stored-procedure-in-another-stored-procedure)

在phpMyadmin中执行Mysql存储过程出错

我的存储过程

```
DROP PROCEDURE `SP_GetNews`//
CREATE DEFINER=`user`@`%` PROCEDURE `SP_GetNews`()
BEGIN

(Select * from tbl_news where Nw_Dontshowstatus = 0) order by Nw_UploadedTime desc;

END 
```

调用 SP 时

```
CALL SP_GetNews; 
```

将给出错误：

> mysql #1312 - PROCEDURE 无法返回给定上下文中的结果集

有什么解决办法吗？

# javascript - Multidatepicker：禁用列表中的日期

> ID：12313101
> 
> 赞同：2
> 
> 时间：2012-09-07T06:47:04.707
> 
> 标签：javascript, jquery, model-view-controller

我想使用以下方法，但使用列表而不是几个日期。

```
addDisabledDates: [today.setDate(1), today.setDate(3)] 
```

这是我的日历的代码：

> $("#ExceptionDates").multiDatesPicker({
> 
> ```
>  defaultDate: "+1w",
>     firstDay: 1,
>     dateFormat: "dd.mm.yy",
>     numberOfMonths: 1,
>     **addDisabledDates: ['06/19/2012','06/20/2012'],** (NOT working)
>     onSelect: function ()
>     {
>         var dates = $("#ExceptionDates").multiDatesPicker('getDates');
>         var html = '';
>         $.each(dates, function (i, val)
>         {
>             html += '<input type="text" name="Dates" value="' + val + '">';
>         });
> 
>         $("#SelectedDates").html(html);
>     }
> }); 
> ```

这是获取日期的方法：

```
var getSelectedExceptionDates = function(callback)
{
    $.ajax({
        type: "POST",
        url: "/Route/GetSelectedExceptionDates/",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (response)
        {
            callback(response);
        },
        error: function (err)
        {
            console.log(err);
        }
    });

};

var callback = function (dates)
{
    $.each(dates, function (i, date)
    {
        var splitDate = date.split('.');

    var day = splitDate[0];
    var month = splitDate[1];
    var year = splitDate[2];

    console.log(splitDate);
    console.log(new Date(year, (parseInt(month)-1).toString(), day));
});

};

getSelectedExceptionDates(callback); 
```

这就是我现在通过检查网站得到的结果：

["12", "11", "2009"] General.js:101 Thu Nov 12 2009 00:00:00 GMT+0100（西欧标准时间）

有两种不同的类型导致即时记录两个 atm。

有什么想法可以将我的日期列表插入到 addDisabledDates 方法中吗？

**编辑：我让它工作了！**

```
var callback = function (dates)
    {
        var date_ary = new Array();
        $.each(dates, function (i, date)
        {
            var splitDate = date.split('.');

            var day = splitDate[0];
            var month = splitDate[1];
            var year = splitDate[2];
            date_ary.push(new Date(month + "/" + day + "/" + year));
        });

        console.log(date_ary);

        $("#ExceptionDates").multiDatesPicker({
            minDate: 0,
            defaultDate: "+1w",
            firstDay: 1,
            dateFormat: "dd.mm.yy",
            addDisabledDates: date_ary,
            numberOfMonths: 1,
            onSelect: function ()
            {
                var dates = $("#ExceptionDates").multiDatesPicker('getDates');
                var html = '';
                $.each(dates, function (i, val)
                {
                    html += '<input type="text" name="Dates" value="' + val + '">';
                });

                $("#SelectedDates").html(html);
            }
        });
    };
    getSelectedExceptionDates(callback);

var getSelectedExceptionDates = function (callback)
{
    $.ajax({
        type: "POST",
        url: "/Route/GetSelectedExceptionDates/",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (response)
        {
            callback(response);
        },
        error: function (err)
        {
            console.log(err);
        }
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:08:16.297

```
$("#ExceptionDates").multiDatesPicker({

defaultDate: "+1w",
firstDay: 1,
dateFormat: "dd.mm.yy",
numberOfMonths: 1,
addDisabledDates: getSelectedExceptionDates(callback),
onSelect: function ()
  {
    var dates = $("#ExceptionDates").multiDatesPicker('getDates');
    var html = '';
    $.each(dates, function (i, val)
    {
        html += '<input type="text" name="Dates" value="' + val + '">';
    });

    $("#SelectedDates").html(html);
  }
 });

var getSelectedExceptionDates = function(callback)
{
    $.ajax({
        type: "POST",
        url: "/Route/GetSelectedExceptionDates/",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (response)
        {
            return callback(response);
        },
        error: function (err)
        {
            console.log(err);
        }
    });

};
var callback = function (dates)
{
    var date_ary = new Array();
    $.each(dates, function (i, date)
    {
        var splitDate = date.split('.');

        var day = splitDate[0];
        var month = splitDate[1];
        var year = splitDate[2];
        date_ary.push(month + "/" + day + "/" + year );

    });
    return date_ary;
};

getSelectedExceptionDates(callback); 
```

# php - Php foreach-为什么它在迭代时不覆盖数组值？

> ID：12313107
> 
> 赞同：12
> 
> 时间：2012-09-07T06:47:27.017
> 
> 标签：php, foreach

我对 php foreach 迭代有疑问。

请看我下面的代码。

**代码 ：**

```
 $arr=array(1,2,3);

    echo '$arr value : '. $arr;

    echo '<br>';

    foreach($arr as $arr){
        echo $arr.'<br>';
    }
    echo '$arr value : '. $arr; 
```

**输出 ：**

```
$arr value : Array
1
2
3
$arr value : 3 
```

在迭代数组时，我使用相同的数组名称来赋值键`foreach($arr as $arr)`，但它工作正常。它是如何工作的？

为什么它在迭代时不覆盖数组值？

我想知道 foreach 迭代是如何工作的。

请帮我！

**提前感谢洛根**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T06:50:29.930

> 为什么它在迭代时不覆盖数组值？

[foreach](http://php.net/foreach)将在原始数组的副本上工作，因此您在 foreach 循环中更改的内容不会更改您正在循环的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T07:30:01.767

PHP 使用带有[引用计数](http://www.php.net/manual/en/features.gc.refcounting-basics.php)`copy on write`的or`lazy copy`机制进行内存处理。

在foreach迭代的第一阶段，`$arr`是“软拷贝”（没有实际拷贝，只是增加了`refcount`of的`zval`）`$array`。结帐[`variable container`和`label`](http://php.net/manual/en/internals2.variables.intro.php)PHP 变量。

在我们的案例中，

*   它首先保持对实际`$arr`变量的引用，然后从引用点获取数组的第一个值。
*   供以后使用，第一个数组元素分配给第二个`$arr`foreach($arr as **$arr** )
*   在下一次迭代中，从先前保存的参考点获取第二个数组值，并将该值分配给相同的值`$arr`并继续。
*   由于`$arr`在循环内更改了值，因此您无法使用`$arr`变量在循环外打印该数组。

希望你能明白...

如需深入研究，请[查看 http://www.php.net/manual/en/internals2.opcodes.fe-fetch.php](http://www.php.net/manual/en/internals2.opcodes.fe-fetch.php)和[http://www.php.net/manual/en/internals2.opcodes.fe -reset.php](http://www.php.net/manual/en/internals2.opcodes.fe-reset.php)

有趣的是，你也可以玩这个......

`current()`在 foreach 循环中将始终返回相同的元素！！！

**代码**

```
$source = array(10, 20, 30);
foreach ($source as $value) {
    echo 'Value is ', $value, ', and current() is ', current($source), '<br>';
} 
```

**输出**

```
Value is 10, and current() is 20
Value is 20, and current() is 20
Value is 30, and current() is 20 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T07:53:29.857

```
foreach ($arr as $arr) {
    // code
} 
```

这可能会让您感到困惑，因为您对其工作原理的心理模型是：

1.  PHP 取出当前元素`$arr`并推进数组指针
2.  它将值分配给`$arr`
3.  它执行`// code`
4.  它从第一步开始重复

它实际上做了什么（或者至少是它的近似简化）：

1.  PHP 开始`foreach`操作，取与关联的数组值`$arr`
2.  它把这个数组放在内部的某个地方，比方说`var iterator`
3.  它从当前元素中获取`var iterator`并推进迭代器
4.  它分配它`$arr`在脚本中的值
5.  它执行`// code`
6.  它从第 3 步开始重复

换句话说，它不会从`$arr`每次迭代中获取下一个值，它只使用一次来获取初始迭代器。它迭代的实际内容存储在内部，不再与之关联`$arr`。这意味着`$arr`在您的脚本中可免费用于其他目的，PHP 很乐意在每次迭代中重用它。循环完成后，最后一个元素保留在`$arr`.

如果您知道匿名函数，也许这可以更好地说明为什么它会以这种方式工作：

```
foreach($arr, function ($arr) {
    // code
}); 
```

这样一个`foreach`函数的实现可以很简单：

```
function foreach(array $array, callable $code) {
    while (list(, $value) = each($array))  {
        $code($value);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T06:51:08.873

$arr 和 $arr 在您的代码中是相同的。源数组和引用变量具有相同的名称。因此 foreach 保留最后收到的值，它不会放弃变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T07:00:21.290

`foreach`使用原始数组的副本，因此您可以考虑代码

```
foreach($arr as $arr){
    echo $arr.'<br>';
} 
```

就像下面这样：

```
for ($i = 0, $arr_tmp = $arr, $len = count($arr_tmp); $i < $len; $i++) {
  $arr = $arr_tmp[$i];
  echo $arr.'<br>';
} 
```

这解释了为什么最后`$arr`是`3`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T07:50:49.143

当您获取记录时，您正在编写数组，您要求代码从 $arr 获取记录并将其放入名为 $arr 的数组中，因此您在 $arr = {1 之前使用单个参数覆盖了整个数组,2,3}; 在这一行和第一次迭代 foreach ($arr as $arr) 之后，现在 $arr 等于 3 数组的最后一个元素，我希望你能理解这个问题

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-07T06:52:59.493

嗯，经过一番调查，我想出了这段代码：

```
<?php
$arr=array(1,2,3);

echo '$arr value : '. $arr;

echo '<br>';

foreach($arr as $arr){
    echo $arr.'<br>';
}

foreach($arr as $key) {
    echo $key.'<br>';
}
echo '$arr value : '. $arr; 
```

有这个输出：

```
$arr value : Array
1
2
3
PHP Warning:  Invalid argument supplied for foreach() in ...file... 
```

我对此的阅读是，第二个`$arr`在循环内隐藏第一个`foreach`，但是一旦它退出`foreach`循环，它就会在内部取消设置符号 ( `$arr`)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-09-07T06:49:35.453

[`foreach`](http://php.net/manual/en/control-structures.foreach.php)首先在迭代其元素之前评估左侧。因此，对名称 $arr 的重新分配不会修改 $arr。

此外，循环变量*泄漏*到外部上下文中，如[记录](http://php.net/manual/en/control-structures.foreach.php)：

> `$value`即使在 foreach 循环之后，对 a 和最后一个数组元素的引用仍然存在。建议通过 unset() 将其销毁。

当然，为了避免混淆，你应该简单地为循环变量使用一个不同的名称，而不是你正在循环的数组：

```
$arr=array(1,2,3);
foreach($arr as $a) { // Note the "as $a", not "as $arr"
    echo $a.'<br>';
}
echo '$arr value : '. $arr; 
```

# linux - ./script.sh 和 bash script.sh 有什么区别

> ID：12313112
> 
> 赞同：2
> 
> 时间：2012-09-07T06:47:50.147
> 
> 标签：linux, bash

在linux系统上，这两种不同的方式踢script.sh有什么区别吗？

它们完全一样吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T06:52:01.783

./script.sh 期望此文件位于当前目录中，已设置执行位，并且文件的第一行是解释器开始的路径（Shebang 行）

bash script.sh 意味着您调用 bash 并将要执行（解释）的文件内容作为 bash 命令传递。这样你的文件就不需要是可执行的并且有一个 shebang 行。

如果满足 ./script.sh 的条件，则两次调用都会导致相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T06:52:39.913

为了使第一种形式工作，文件必须设置可执行位，其次它需要有一个[shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)，它指定将使用哪个解释器。

所以是的，两种形式都是相同的（当涉及到将被解释的内容时）。

有关历史课，请参阅[此](http://www.in-ulm.de/~mascheck/various/shebang/)

可以在[此处找到 linux-kernel 中 she-bang 解析的当前实现](http://git.kernel.org/?p=linux/kernel/git/stable/linux-stable.git;a=blob;f=fs/binfmt_script.c;h=d3b8c1f6315554df64d3491b52d83d2a73f4a359;hb=28a33cbc24e4256c143dce96c7d93bf423229f92)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T06:55:02.630

我不认为这完全一样。

据我了解，您只需`./script.sh`在*当前*shell 上执行一个脚本。它不必是您正在运行的 bash (Bourne Again SHell)，它可以是您系统上安装的任何 shell。

如果使用 执行脚本`bash script.sh`，则告诉系统您希望使用 bash shell 显式执行脚本。

您可以通过调用以下命令查看哪些 shell 可用于您的系统：

```
$ cat /etc/shells 
# /etc/shells: valid login shells
/bin/sh
/bin/dash
/bin/bash
/bin/rbash 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T10:43:17.467

script.sh 可以称为 script.anything，如欺负中的 knittl 帖子上指出的那样，脚本由

```
#!/whatever/it/is 
```

运行 bash ./script.something 意味着您告诉它使用 bash 执行脚本，这可能会返回错误而不是运行也欺负忘记

```
#!/usr/bin/perl 
```

所以你可以有一个名为 script.sh 的 perl 脚本

```
 cat perl.sh 
#!/usr/bin/perl

print "Hello World\n";
:~/Documents$ ./perl.sh 
Hello World

~/Documents$ bash ./perl.sh 
Warning: unknown mime-type for "Hello World\n" -- using "application/octet-stream"
Error: no such file "Hello World\n" 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-07T06:52:41.380

不一定相同。

如果您运行 script.sh linux 将搜索 $PATH 环境变量中设置的目录。

使用 ./script.sh，linux 将运行位于调用时您所在目录的脚本。

# mysql - InnoDb Mysql 表的行大小限制

> ID：12313119
> 
> 赞同：0
> 
> 时间：2012-09-07T06:48:25.117
> 
> 标签：mysql, innodb

我对 Mysql 数据库有奇怪的问题。我正在使用 MySql InnoDb 存储引擎，并且我知道行大小的问题： [https ://dev.mysql.com/doc/refman/5.1/en/innodb-restrictions.html](https://dev.mysql.com/doc/refman/5.1/en/innodb-restrictions.html)

这是我的表的创建查询：

```
CREATE TABLE IF NOT EXISTS `account` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `description` text COLLATE utf8_unicode_ci,
  `testtextarea0` text COLLATE utf8_unicode_ci,
  `testtextarea1` text COLLATE utf8_unicode_ci,
  `testtextarea2` text COLLATE utf8_unicode_ci,
  `testtextarea3` text COLLATE utf8_unicode_ci,
  `testtextarea4` text COLLATE utf8_unicode_ci,
  `testtextarea5` text COLLATE utf8_unicode_ci,
  `testtextarea6` text COLLATE utf8_unicode_ci,
  `testtextarea7` text COLLATE utf8_unicode_ci,
  `testtextarea8` text COLLATE utf8_unicode_ci,
  `testtextarea9` text COLLATE utf8_unicode_ci,
  `testtextarea10` text COLLATE utf8_unicode_ci,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

我在每个文本字段中插入 1024 个字符的文本，这工作正常，直到“testtextarea9”或“testtextarea10”字段。所以，我只能在一行中插入超过 10000 个字符，所以你能帮我理解问题以及如何解决它。

根据 MySql 规范 text 和 blob 字段不应计入此限制，或者我可能误解了什么？

这是我从 Mysql 得到的错误：“1030 - Got error 139 from storage engine”。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:21:21.220

似乎有一部分文本存储在一行中，并且达到了行限制大小。

看看这个页面 - [Bug #25945](http://bugs.mysql.com/bug.php?id=25945)。

作为一种解决方法 - 尝试将这些数据拆分到一些表中。

# c# - 无法连接到远程服务器，但在 fiddler 运行 Metro 应用程序时可以工作

> ID：12313122
> 
> 赞同：4
> 
> 时间：2012-09-07T06:48:29.933
> 
> 标签：c#, .net, microsoft-metro, fiddler, .net-4.5

我有一个奇怪的问题，我试图从网络计算机中检索 XML 字符串，当我在自己的网络之外时它可以工作，但是当我在同一个网络上时，我会遇到异常，例如：

```
+       $exception  {"Unable to connect to the remote server"}  System.Exception {System.Net.WebException}

An attempt was made to access a socket in a way forbidden by its access permissions 192.168.2.214:8080 
```

我正在使用的代码是：

```
Uri URL = new Uri(SabURL + QueueStatusURL + API);
            string myURL = URL.AbsolutePath;

            var xmlResults = XDocument.Load(URL.OriginalString.ToString()); 
```

奇怪的是，当我运行 Fiddler4 时它工作得很好，Fiddler 做了什么让它开始工作？这是某种代理问题吗？如果是，我将如何处理？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T08:01:18.480

尝试添加专用网络的功能，它对我有用

![在此处输入图像描述](../Images/67b0385a83c4c8452bf1235d0c714386.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T20:41:39.633

这是 IE 中的行为问题。如果请求没有解决，它将不会显示响应并且不会导航到页面。另一方面，Chrome 并不关心请求是否无法解析，但仍会显示 URL 并显示服务器未找到或类似的消息。

fiddler 所做的是在打开时充当代理。因此，当您运行提琴手时，它会尝试解析请求，然后将 html 页面传递给 IE，即使出现错误也是如此。所以 IE 总是在 fiddler 运行时显示一些东西，因为 IE 不会尝试自己处理请求。

不幸的是，没有已知的方法可以改变这种行为。

# c# - 在 C# 中从任务管理器检测结束进程

> ID：12313126
> 
> 赞同：7
> 
> 时间：2012-09-07T06:49:05.313
> 
> 标签：c#, exit, taskmanager

我有一个 C# 应用程序，并想监视它的当前状态，即它是运行还是关闭。到目前为止，如果应用程序在运行时错误或任何其他应用程序退出代码中退出，我能够跟踪状态。

但是当它被任务管理器强制关闭时，我无法记录应用程序状态。

有没有办法监控 End Process 事件？还是我必须设计一个单独的服务来监视我的应用程序（我发现这会浪费资源）？

简史：该应用程序是 WCF 订阅者应用程序，旨在作为后台进程运行并从服务器接收数据。我不想使用 Windows 服务，因为我正在设计一个允许客户端向服务器发送请求以获取特定数据的 GUI。

此应用程序链接到另一个应用程序，该应用程序跟踪订阅者，订阅者是在线还是离线。

因此正在寻找一种方法来跟踪突然的应用程序关闭并相应地通知用户。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T06:55:29.697

我确定我以前在 SO 上看到过这样的问题，所以这可能是重复的，但我找不到它，所以......

这是一个简短的总结：

*   如果您在“进程”选项卡中选择一个进程并单击“结束进程”，则该进程正在被杀死`TerminateProcess()`- 您甚至无法从您的进程中拦截它，更不用说阻止它了。

*   如果您从“应用程序”标签中选择“应用程序”并单击“结束任务”，会发生什么取决于应用程序的类型：

    *   控制台应用程序正在发送`CTRL_CLOSE_EVENT`事件。
    *   Windows/GUI 应用程序正在发送`WM_CLOSE`消息。

    您可以同时响应（或处理日志记录等）。

**更新**：再次喜欢[源](http://blogs.msdn.com/b/oldnewthing/archive/2004/07/22/191123.aspx)。

**更新 2**：找到一个/副本并投票结束。我暂时把这个答案留在这里。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-07T06:58:15.203

Process.WaitForExit() 和 Process.Exited 事件。看到[这里](http://msdn.microsoft.com/en-us/library/ty0d8k56%28v=vs.100%29)了解更多信息

# php - mySQL 查询不适用于 PHP，但适用于 PHPMyAdmin

> ID：12313142
> 
> 赞同：1
> 
> 时间：2012-09-07T06:50:05.220
> 
> 标签：php, mysql, phpmyadmin

当我从 PHP MyAdmin 运行 SQL 查询时，它会正确插入该行；当我从 PHP 运行它时，它没有。

我将为您提供每个文本；它们是相同的，但考虑到我可能遗漏了一些东西，我不想假设没有区别；

在 PHP 中：

```
$orderSend = "SET @typeSQL := (SELECT `typeID` FROM `ArbuckleType` WHERE `typeName` = 'A la Carte');

        SET @groupSQL:= (SELECT `groupID` FROM `ArbuckleGroup` WHERE (`groupName` = 'Nigiri' AND `typeID` = @typeSQL));

        SET @itemSQL:=(SELECT `itemID` FROM `ArbuckleItem` WHERE (`itemName` = 'Salmon' AND `groupID` = @groupSQL));

        INSERT INTO `ArbuckleOrderDetails` VALUES('', '$orderID', @typeSQL,@groupSQL, @itemSQL, '$quantity', '$spicy')";
mysql_query($orderSend); 
```

现在在 PHP MyAdmin 中：

```
SET @type := (SELECT `typeID` FROM `ArbuckleType` WHERE `typeName` = 'A la Carte');# MySQL returned an empty result set (i.e. zero rows).  

        SET @group:= (SELECT `groupID` FROM `ArbuckleGroup` WHERE (`groupName` = 'Nigiri' AND `typeID` = @type));# MySQL returned an empty result set (i.e. zero rows).

        SET @item:=(SELECT `itemID` FROM `ArbuckleItem` WHERE (`itemName` = 'Salmon' AND `groupID` = @group));# MySQL returned an empty result set (i.e. zero rows).

INSERT INTO `ArbuckleOrderDetails` VALUES('', '$orderID', @type,@group, @item, '$quantity', '$spicy') 
```

注意：我在没有 SET 调用（设置变量的 3 行）的情况下运行了 PHP 查询并且它有效；但我无法弄清楚这些行中哪里有错误的语法。还运行了 mysql_error 并指出存在语法错误 - 然后要求我查看手册。非常有帮助，mysql。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T06:52:32.207

mysql_query() 不能一次执行多个查询。

两种解决方案：

1.  使用多个 mysql_query 行
2.  将 mysqli 与[multi_query()一起使用](http://php.net/manual/en/mysqli.multi-query.php)

您的代码，重写为多个 mysql_query 行：

```
mysql_query("SET @typeSQL := (SELECT `typeID` FROM `ArbuckleType` WHERE `typeName` = 'A la Carte')");
mysql_query("SET @groupSQL:= (SELECT `groupID` FROM `ArbuckleGroup` WHERE (`groupName` = 'Nigiri' AND `typeID` = @typeSQL))");
mysql_query("SET @itemSQL:=(SELECT `itemID` FROM `ArbuckleItem` WHERE (`itemName` = 'Salmon' AND `groupID` = @groupSQL))");
mysql_query("INSERT INTO `ArbuckleOrderDetails` VALUES('', '$orderID', @typeSQL,@groupSQL, @itemSQL, '$quantity', '$spicy')"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T06:55:05.893

您有以下选择：

1.  使用多个查询来检索值并进行最终查询。
2.  使用 mysqli_query
3.  创建一个存储过程并调用它。（推荐，那么你不必担心转义字符）

# javascript - History.js 在 Mac 的 Firefox 13+ 和 Opera 12+ 中不起作用。虽然适用于 Chrome 21+

> ID：12313152
> 
> 赞同：1
> 
> 时间：2012-09-07T06:50:45.890
> 
> 标签：javascript, jquery, html, history.js

一直在试图找出问题所在。我所做的实现非常接近 Github Wiki 页面[https://github.com/browserstate/history.js/wiki中的示例](https://github.com/browserstate/history.js/wiki)

下面的代码示例。任何帮助表示赞赏。干杯!

```
$(document).ready(function() {
    var History = window.History;

    $.expr[':'].internal = function(obj, index, meta, stack){
        var rootUrl = History.getRootUrl()
        var
            $this = $(obj),
            url = $this.attr('href')||'',
            isInternalLink;
        isInternalLink = url.substring(0,rootUrl.length) === rootUrl || url.indexOf(':') === -1;

        return isInternalLink;
    };

    URB = {
        bootstrap: function() {
            URB.cleanUpDomForInit();
            URB.ajaxifyLinks('body');
            URB.ajaxifySelectBox('body');

            $(window).bind('statechange', function() {
                var State = History.getState();
                var html = '<div class="twelve columns">'+State.data.content+'</div>';
                URB.updateBelly(html);
            });

            // Initialize Model
            URB.loadExternalJS(base_url + 'javascripts/URB/URB.Model.js');

            var checkModel = setInterval(function() {
                if(typeof URB.Model != 'undefined') {
                    URB.Model.proxy('api/article', null, null, function(data) {
                        console.log(data);
                    });
                    clearInterval(checkModel);
                }
            }, 100);
        },

        belly:
            $("#belly"),

        isMobile:
            window.matchMedia('only screen and (max-width: 767px)').matches ? true : false,
        isTablet:
            window.matchMedia('only screen and (min-width: 768px) and (max-width: 1024px)').matches ? true : false,
        isDesktop:
            window.matchMedia('only screen and (min-width: 1025px)').matches ? true : false,

        loadExternalJS: function(url) {
            $.ajax({
                type: "GET",
                url: url,
                dataType: "script"
            });
        },

        updateBelly: function(html) {
            URB.belly.html(html);
        },

        ajaxifyLinks: function(elm) {
            var $this = $(elm);
            $this.find('a:internal:not(.no-ajaxy)').click(function(e) {
                if(e.which == 2 || event.metaKey)
                    return true;

                var
                    $this = $(this),
                    url = $this.attr('href'),
                    title = $this.attr('title') || null;

                var stateData = {
                    content: title
                };
                History.pushState(stateData, title, url);

                var html = '<div class="twelve columns">'+stateData.content+'</div>';
                URB.updateBelly(html);

                e.preventDefault();
                return false;
            });
        },

        ajaxifySelectBox: function(elm) {
            var $this = $(elm);
            $this.find('select.ajaxify').change(function(e) {
                var
                    $this = $(this),
                    url = $this.val(),
                    title = $this.children("option:selected").text();

                if($this.children("option:selected").attr('data-open-new-window') == 1) {
                    console.log("Open in new window: " + url);
                }
                else {
                    var stateData = {
                        content: title
                    };
                    History.pushState(stateData, title, url);
                    console.log(title);

                    var html = '<div class="twelve columns">'+stateData.content+'</div>';
                    URB.updateBelly(html);
                }

                e.preventDefault();
                return false;
            });
        },

        cleanUpDomForInit: function() {
            if(URB.isMobile) {
                URB._cleanDom(functionRegistrations.mobile, '.show-for-medium, .show-for-large, .show-for-large-up, .show-for-medium-down, .show-for-xlarge');
            }

            if(URB.isTablet) {
                URB._cleanDom(functionRegistrations.tablet, '.show-for-large, .show-for-large-up, .show-for-xlarge, .show-for-small');
            }

            if(URB.isDesktop) {
                URB._cleanDom(functionRegistrations.desktop, '.show-for-small');
            }
        },

        _cleanDom: function(elms, css) {
            $(css).each(function(index, elm) {
                $(elm).remove();
            });
            for(i in elms) {
                elms[i]();
            }
        }
    };

    URB.bootstrap();
}); 
```

# c# - 从字典到列表

> ID：12313154
> 
> 赞同：-17
> 
> 时间：2012-09-07T06:50:52.333
> 
> 标签：c#, dictionary

这是一本字典：

```
Dictionary<string, List<string>> Dic = new Dictionary<string, List<string>>(); 
```

我想做以下事情：当我单击一个按钮时，第一个字典 (Dic) 键及其值被复制到一个列表 ( `List<string>`) 中。再次单击，同样的事情发生了，但这次是下一个字典键和值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:22:09.410

看起来您想`List<string>`根据字典 List 值中的所有字符串元素创建一个新元素。您可以使用`SelectMany`以下代码将其展平并获取列表：

```
Dictionary<string, List<string>> Dic = new Dictionary<string, List<string>>();
Dic.Add("1", new List<string>{"ABC","DEF","GHI"});
Dic.Add("2", new List<string>{"JKL","MNO","PQR"});
Dic.Add("3", new List<string>{"STU","VWX","YZ"});

List<string> strList = Dic.SelectMany(r => r.Value).ToList(); 
```

Where`strList`将在单个列表中包含字典中的所有字符串项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T06:53:54.593

为什么不使用`ToList`方法？

```
Dictionary<string, int> dictionary = new Dictionary<string, int>();
dictionary["cat"] = 1;
dictionary["dog"] = 4;
dictionary["mouse"] = 2;
dictionary["rabbit"] = -1;

// Call ToList.
List<KeyValuePair<string, int>> list = dictionary.ToList();

// Loop over list.
foreach (KeyValuePair<string, int> pair in list)
{
    Console.WriteLine(pair.Key);
    Console.WriteLine("   {0}", pair.Value);
} 
```

# validation - 验证特定操作映射的方法

> ID：12313156
> 
> 赞同：1
> 
> 时间：2012-09-07T06:51:02.240
> 
> 标签：validation, struts2

我的 struts 2 xml 文件中有 2 个动作映射，它们映射到相同动作类的 2 个方法，如下所示

```
<action name="action1" class="com.web.action.MyAction method="myMethod1">
            <result>success1.jsp</result>
</action>
<action name="action2" class="com.web.action.MyAction method="myMethod2">
            <result>success2.jsp</result>
</action> 
```

我还覆盖了 ActionSupport 类的 validate() 方法。现在我希望这个验证方法应该只对action1执行，而不是对action2执行。有没有办法这样做？我知道我可以将这两种方法放在单独的动作类中，这将起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:40:28.873

“验证”拦截器使用与“准备”拦截器相同的前缀方法实用程序。

“验证”拦截器将调用特定方法的验证方法；对于您的具体示例：

```
public void validateMyMethod1() { ... }
public void validateMyMethod2() { ... } 
```

请参阅[“验证”拦截器文档](http://struts.apache.org/2.x/docs/validation-interceptor.html)，但要获得更好/更多详细信息，请参阅[“准备”拦截器文档](http://struts.apache.org/2.x/docs/prepare-interceptor.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:07:40.633

到目前为止，这不可能直接告诉我们应该在哪个动作调用时调用 validate 方法，几乎​​没有可能的解决方案

1.  按照您的建议将它们移动到单独的类中。
2.  切换到编程验证方法，例如创建一个相同的方法`myCustomvalidation`，您可以从内部方法调用该`myMethod1`方法。

# eclipse - 在 Mac OS X 中安装 Subversion JavaHL 库

> ID：12313164
> 
> 赞同：13
> 
> 时间：2012-09-07T06:51:44.843
> 
> 标签：eclipse, svn, subclipse, javahl

我使用 Eclipse Marketplace 在 Eclipse 中安装了 Subclipse。我不断收到带有消息的弹出窗口

```
Failed to load JavaHL Library.
These are the errors that were encountered:
no libsvnjavahl-1 in java.library.path
no svnjavahl-1 in java.library.path
no svnjavahl in java.library.path
java.library.path = .:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java 
```

这是建议访问的链接。 [http://subclipse.tigris.org/wiki/JavaHL](http://subclipse.tigris.org/wiki/JavaHL)

在 Mac OS XI 下找到 OpenCollabNet 的链接，但我在该链接上找不到二进制文件，如果有人能帮我找到二进制文件的链接，我将不胜感激。还有一种方法可以通过 macports 安装 Subversion JavaHL 库，如果是的话，这样做的命令是什么。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-07T07:49:57.460

你也可以通过“Window -> Preferences -> Team -> SVN -> SVN interface”切换到纯Java实现，并选择带有“SVNKit”的条目。这样您就可以消除对本机代码的任何依赖并摆脱这些错误。[Eclipse 首选项](https://i.stack.imgur.com/PqMBZ.png)

如果您缺少 SVNKit 选项，请验证您是否安装了来自 CollabNet 的插件“SVNKit Client Adapter”！![安装 SVNKit 适配器](../Images/3486c7df9577639e9108d6d7f599816a.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-07T13:34:04.317

使用 SVNKit 是一个有效的选择，但我仍然更喜欢 JavaHL。提供由 CollabNet 托管的 OSX 二进制文件的志愿者停止制作它们，因此他们没有可用的 Subversion 1.7 版本，只有 1.6。

我更新了 Subclipse JavaHL wiki 页面。该页面指导人们使用 MacPorts 或 HomeBrew。这些是获得 JavaHL 的最佳选择。我使用 MacPorts。

[http://subclipse.tigris.org/wiki/JavaHL](http://subclipse.tigris.org/wiki/JavaHL)

# java - jad 并不总是适用于课程？

> ID：12313167
> 
> 赞同：4
> 
> 时间：2012-09-07T06:51:54.110
> 
> 标签：java, eclipse, plugins, decompiling, decompiler

我已经设置`Jad`了日食。我能够反编译 java 源代码，所以我假设配置设置正确。

问题是我包含的一些 jar 似乎没有被反编译。即，当我按下从我的一个罐子中引入的类名时，我看不到源代码，但类文件编辑器抱怨“找不到源”。

为什么会发生这种情况？
如果我能够查看java源代码，那是否意味着反编译器已经正确设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:10:38.893

请参阅 Celeritas 指向的 Wikipedia 页面：“*最新版本的 JAD 表示它仅支持 Java 类文件版本 45.3、46.0 和 47.0，而不支持 Java 5 生成的版本。* ”我们可以假设您正在尝试打开现代类文件。 ..

您可能想要安装[JD | 取而代之的是 Java 反编译器](http://java.decompiler.free.fr/)。它有自己的 Eclipse 插件（我使用它），但似乎 JadEclipse 也支持它。JD 最多支持 Java 7 字节码格式。

[编辑] 目前 JD-Eclipse 存在托管问题，该插件被主机标记为病毒...

你可以安装它的旧方式，即。通过下载 zip 文件 (jdeclipse_update_site.zip) 并将**features**和**plugins**文件夹放到 Eclipse 安装文件夹中...不要忘记将**Class File Editor**（JD 编辑器的名称）设置为***.class**和***class在首选项>常规>编辑器>文件关联中没有源**并将其设置为默认值。

# nhibernate - 如何通过过滤器对不同级别的孩子进行有效查询？

> ID：12313172
> 
> 赞同：1
> 
> 时间：2012-09-07T06:52:09.180
> 
> 标签：nhibernate

我有 3 个具有一对多关系的类

```
A has many B has many C 
```

我想加载我的所有数据，其中两个条件之一为真：

```
B.someField is in a list of strings

C.someOtherField is in that same list of strings 
```

有时B会匹配，有时C会匹配。我需要加载所有比赛，并为完整级别加载它们。

换句话说，如果 B.someField 匹配，我想加载那个 B、它的父 A 和所有子 C。

同样，如果 C.someOtherField 匹配，我想加载其父 B 和 B 的父 A。

有没有一种有效的方法来进行这个查询？你会如何在 nHibernate 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:17:48.683

当使用 NHibernate 查询多个子集合时，我倾向于使用 LINQ 查询语法而不是 lambda，因为它不仅更容易编写，而且代码看起来更简洁。

举个例子，它应该为你指明正确的方向：

```
var listOfString = new List<string>() { "String1", "String2" };

var customers =
(
    from a in session.Query<A>()
    from b in a.B
    from c in b.C
    where a.Status == "Active"
            && listOfStrings.Contains( b.SomeField )
            && listOfStrings.Contains( c.someOtherField )
    select a )
    .ToList(); 
```

通过使用 LINQ 查询语法，我们可以轻松添加多个 FROM 来访问子集合。然后，只需应用您的 WHERE 条件即可。对于您的特定情况，您只需使用 LINQ 的 Contains() 方法，该方法等同于 SQL 的 IN 运算符。

听起来您也想将所有子集合加载到内存中，因此请务必使用 NHibernate 的 .Fetch() 方法急切地加载该数据，如下所示：

```
var customers =
(
    from a in session.Query<A>()
    from b in a.B
    from c in b.C
    where a.Status == "Active"
            && listOfStrings.Contains( b.SomeField )
            && listOfStrings.Contains( c.someOtherField )
    select a )
    .Fetch( x => x.B )
    .ThenFetchMany( x => x.First().C )
    .ToList(); 
```

仅供参考，在上面的 .ThenFetchMany() 方法中使用 .First() 是我从 NHibernate 的 Jira 问题跟踪器网站上学到的一个技巧：[https ://nhibernate.jira.com/browse/NH-2972?focusedCommentId=22150&page=com .atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-22150](https://nhibernate.jira.com/browse/NH-2972?focusedCommentId=22150&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-22150)

# google-app-engine - GAE 上的 EHCache CacheManager 初始化错误

> ID：12313173
> 
> 赞同：0
> 
> 时间：2012-09-07T06:52:09.620
> 
> 标签：google-app-engine, ehcache

我在 Google App Engine v1.7.0 中以编程方式使用 EHCache 2.6.0（没有 ehcache.xml）。

当我使用以下方法实例化 CacheManager 时：

```
CacheManager cacheManager = CacheManager.create(); 
```

我收到错误：

```
Caused by: java.lang.RuntimeException: java.security.AccessControlException: access denied (java.lang.RuntimePermission accessDeclaredMembers)
    at java.util.concurrent.atomic.AtomicReferenceFieldUpdater$AtomicReferenceFieldUpdaterImpl.<init>(AtomicReferenceFieldUpdater.java:217)
    at java.util.concurrent.atomic.AtomicRefe...(length 9029) 
```

我试过了：

```
CacheManager cacheManager = new CacheManager(); 
```

并关闭监控：

```
Configuration configuration = new Configuration();
configuration.setMonitoring(Configuration.Monitoring.OFF.name());
configuration.setUpdateCheck(false);
CacheManager cacheManager = new CacheManager(configuration); 
```

对于他们两个我都收到以下错误：

```
Caused by: java.lang.NoClassDefFoundError: Could not initialize class net.sf.ehcache.util.lang.VicariousThreadLocal
    at net.sf.ehcache.TransactionController.<init>(TransactionController.java:43)
    at net.sf.ehcache.CacheManager.doInit(CacheManager.java:433)
    at net.sf.ehcache.CacheManager.init(CacheManager.java:374) 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:32:47.967

在我看来，Ehcache v2.6 与当前的 AppEngine 不兼容。我必须切换到以前版本的 ehcache 才能运行它。经过长时间的尝试和错误，2.4.7 版本似乎很稳定。“显然” ehcache 提供的配置不起作用。这是我必须配置它的方法：

```
<?xml version="1.0" encoding="UTF-8"?>
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="ehcache.xsd" >
    <cacheManagerEventListenerFactory class="" properties=""/>
    <defaultCache
       maxElementsInMemory="10000"
       eternal="false"
       overflowToDisk="false"
       timeToIdleSeconds="120"
       timeToLiveSeconds="120"
       memoryStoreEvictionPolicy="LRU">
    </defaultCache>
<!--Example sample cache-->
    <cache name="sid"
      maxElementsInMemory="100"
      eternal="false"
      timeToIdleSeconds="300"
      timeToLiveSeconds="300"
      memoryStoreEvictionPolicy="LFU"
       />
</ehcache> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:14:58.490

AppEngine 是一个分布式系统，请求由多个前端实例自动处理。在这样的设置中，您不能在前端实例上使用缓存实现 (EHCache)，因为您将运行多个 EHCache 实例，并且写入一个 EHCache 不会反映在其他 EHCache 上。

相反，您应该使用 AppEngine 自己的[memcache 服务](https://developers.google.com/appengine/docs/java/memcache/overview)。

# apache - apache mod_rewrite 不存在的文件到某事

> ID：12313175
> 
> 赞同：0
> 
> 时间：2012-09-07T06:52:14.483
> 
> 标签：apache, mod-rewrite

我有这样的规则：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^/show_video.php?id=[a-zA-Z0-9_-]+/(.*)$ /video/$1 [R]
</IfModule> 
```

我想重定向：[http](http://www.domain.com/show_video.php?id=8) ://www.domain.com/show_video.php?id=8 到 [http://www.domain.com/video/8/](http://www.domain.com/video/8/)

服务器上不存在 show_video.php。

我怎么做？我的规则不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:23:05.190

您需要检查`QUERY_STRING`重写条件，这是一个可能可行的示例：

```
RewriteCond %{QUERY_STRING} ^id=([0-9]*)$
RewriteRule ^show_video\.php$ /video/%1? [R=302,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:17:24.697

`RewriteCond`您需要使用 a和`%{QUERY_STRING}`变量来匹配查询字符串，然后使用`%1`来反向引用匹配：

```
RewriteCond %{QUERY_STRING} ^id=([a-zA-Z0-9_-]+)$
RewriteRule ^/?show_video.php$ /video/%1/? [R,L] 
```

# javascript - 路由器事件回调中未定义 Backbone.History.fragment

> ID：12313179
> 
> 赞同：4
> 
> 时间：2012-09-07T06:52:21.120
> 
> 标签：javascript, backbone.js

我有代码试图跟踪 Backbone js 应用程序中的当前片段。

```
$(function(){
    Backbone.history.start({pushState: true});
    console.log("fragment " + Backbone.history.fragment);
    // Beef is a global that holds my router (created elsewhere)
    Beef.router.bind("all", function(route) {
        console.log("fragment from event handler " + Backbone.history.fragment);
    });
}); 
```

此代码按预期打印“片段 xxx”，但当我在应用程序中导航时始终打印“未定义事件处理程序的片段”。

如果我首先将 Backbone.History 复制到本地 var，它会起作用：

```
$(function(){
    Backbone.history.start({pushState: true});    
    console.log("fragment " + Backbone.history.fragment);    
    var hist = Backbone.history;    
    Beef.router.bind("all", function(route) {
        console.log("fragment from event handler " + hist.fragment);
    });
}); 
```

有人可以解释这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:10:15.850

这可能是一个javascript变量捕获问题吗？例如，做一些类似帮助的事情：

```
$(function(){
    Backbone.history.start({pushState: true});    
    console.log("fragment " + Backbone.history.fragment);    

    (function(hist) {  
        Beef.router.bind("all", function(route) {
            console.log("fragment from event handler " + hist.fragment);
        });
    })(Backbone.history);
}); 
```

其他一些 javascript 变量捕获[答案](https://stackoverflow.com/questions/1676362/javascript-variable-binding-and-loop)显示了其他方法来做到这一点。

# c# - Gridview超链接点击事件刷新ajax更新面板

> ID：12313187
> 
> 赞同：0
> 
> 时间：2012-09-07T06:53:14.583
> 
> 标签：c#, asp.net, ajax, visual-studio-2010, updatepanel

当我单击 Gridview1 中的 ID 时，我该怎么做？我需要什么代码？

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    DataKeyNames="id" DataSourceID="SqlDataSource1" CellPadding="4" 
    ForeColor="#333333" GridLines="None" 
    onselectedindexchanged="GridView1_SelectedIndexChanged" Width="232px">
    <AlternatingRowStyle BackColor="White" />
    <Columns>
        <asp:CommandField ShowSelectButton="True" />
        <asp:BoundField DataField="name" HeaderText="name" SortExpression="name" />

        <asp:HyperLinkField 
  DataTextField="id" 
  DataTextFormatString=" {0}" 
  DataNavigateUrlFields="id" HeaderText="id"
  DataNavigateUrlFormatString="WebForm1.aspx?ID={0}"   />
    </Columns> 
```

这是更新面板的代码，当我单击 GridView1 中的 ID 时，使用 Gridview2 刷新更新面板：

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<br />
<asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" runat="server">

    <ContentTemplate>
        <asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" 
            DataSourceID="SqlDataSource2">
            <Columns>
                <asp:BoundField DataField="id_proba" HeaderText="id_proba" 
                    SortExpression="id_proba" />
                <asp:BoundField DataField="name" HeaderText="name" SortExpression="name" />
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
            ConnectionString="<%$ ConnectionStrings:ProbaConnectionString %>" 

        </asp:SqlDataSource>
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T23:37:52.270

您需要在 Page_Load() 中手动将 HyperLink 添加为每次回发的回发触发器。也许这会解决问题..

# c# - 查找后面有空格的字符串的最后一个字符

> ID：12313189
> 
> 赞同：0
> 
> 时间：2012-09-07T06:53:23.440
> 
> 标签：c#, regex, string

这听起来可能很愚蠢，但是如果字符串看起来像这样`"string with white-space after last character "`，我怎么能找到字符串中的最后一个字符索引，如果它是一致的并且只有 1 没问题，但有时它可能是 2 或 3 个空格

**编辑：** 我无法将当前字符串修剪为新字符串，因为最后一个字符的索引不正确。我想保持字符串原样

这就是我得到的原因和结果

```
string description = "Lorem Ipsum is simply dummy text of the printing and typesetting indu. Lorem Ipsum has ben indusry s tandard dummy text ever since the 1500s.";
description = Regex.Replace(description, @"(?></?\w+)(?>(?:[^>'""]+|'[^']*'|""[^""]*"")*)>", String.Empty);
if (description.Count() > 101)
{
    description = description.Substring(0, 101);
    if (description.GetLast() != " ")
    {                    
        description = description.Substring(0, description.LastIndexOf(" ", 101)) + "...";
    }
    else
    {
        //here is should find the last character no mather how many whitespaces
        description = description.Substring(0, description.Length - 1) + "...";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:08:25.577

为了完整起见，这里是一个使用正则表达式的解决方案（我并不是说它比其他提议的解决方案更好）：

```
var text = "string with whitespace after last character  ";
var regex = new Regex(@"\s*$");
var match = regex.Match(text);
var lastIndex = match.Index - 1; 
```

请注意，如果字符串为空，则为`lastIndex`-1，您需要在代码中进行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:02:28.560

这里的所有答案都是**修剪**字符串，因此创建一个带有**移位**索引的新字符串，因此最终结果将是*原始*字符串中的**错误**索引。

 *相反，会做的只是

```
"string with whitespace after last character ".ToCharArray().
          Select((x,i)=> new {x,i}).Where(ch=>ch.x != ' ').Last(); 
```

返回：

```
x :    'r'
index: 42 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T07:14:59.907

试试这个：

```
 string s = "string with whitespace after last character    ";
        int index = s.Length - s
            .ToCharArray()
            .Reverse()
            .TakeWhile(c => c == ' ')
            .Count(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T06:55:45.550

如果字符串在第一个字符之前没有任何空格，`yourString.Trim().Length -1`则应完成此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T06:55:52.610

使用 trim 函数并获取该字符串的最后一个索引..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T06:57:28.877

为什么不修剪你的字符串

```
string abc = "string with whitespace after last character ";
abc = abc.trim(); 
```

希望能帮助到你

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-07T06:59:12.170

也许这个？

```
String s = "string with whitespace after last character  ";
int lastCharIndex = s.Length - (s.TrimEnd().Length); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-07T07:07:25.297

只是这个。不需要 Linq 或 Regex。但是`TrimEnd()`，不是`Trim()`，而且您无需考虑字符串开头是否有空格。

```
string s = "string with whitespace after last character  ";
int lastCharIndex = s.TrimEnd().Length - 1; 
```

如果 OP 真的想为此使用正则表达式，那么这是我的即兴创作：

```
 string text = "string with whitespace after last character  ";
        Match m = Regex.Match(text, @"^(.*)(\w{1})\s*$");
        if (m.Success)
        {
            int index = m.Groups[1].Length;
            Console.WriteLine(text[index]);
            Console.WriteLine(index);
        }

        Console.ReadLine(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-15T08:41:40.330

用于`Array.FindLastIndex`搜索不等于空格的最后一个字符：

`Array.FindLastIndex(str.ToCharArray(), ch => !Char.IsWhiteSpace(ch))`

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-09-07T06:56:03.560

假设末尾的其他[空白字符](http://en.wikipedia.org/wiki/Whitespace_character)（例如制表符或换行符）也被忽略并不重要，只需使用修剪：

```
String s = "string with whitespace after last character  ";
int lastChar = s.TrimEnd().Length-1; 
```

请注意，原始字符串`s`保持不变（请参阅[TrimEnd() 文档](http://msdn.microsoft.com/en-us/library/t97s7bs3.aspx)）。*

# c# - 在 DataTable C# 中插入超链接

> ID：12313192
> 
> 赞同：0
> 
> 时间：2012-09-07T06:53:37.603
> 
> 标签：c#, excel, datatable

我想在将数据表导出到excel中添加超链接

但是excel不能显示超链接属性，只能显示字符串。

dataTable 输入字段是否有任何限制？

下面是我格式化数据表的代码

```
 int dt_current_row = 0;
        string[] Days = testDays.ToArray();

        for (int i = 0; i < tableOriginal.Rows.Count; i++)
        {
            string wo_number = handle(tableOriginal.Rows[i]["WO_NUMBER"].ToString());
            string date = handle(tableOriginal.Rows[i]["CREATE_DATE"].ToString());

            if (i == 0)
            {

                // Insert New
                DataRow dr = dt.NewRow();
                dt.Rows.Add(dr);
                dr["WO_NUMBER"] = wo_number;

                for (int x = 1; x < dt.Columns.Count; x++)
                {
                    int z = Convert.ToInt32(Math.Floor(0.5 * (x - 1)));
                    //search Date
                    if (tableOriginal.Rows[i]["CREATE_DATE"].ToString() == Days[z])
                    {
                        //if equal , insert num and ID 
                        object xx = tableOriginal.Rows[i]["NUM"];
                        int num = Convert.ToInt32(xx);
                        dr["PHOTO_" + z.ToString()] = num;

                        object yy = tableOriginal.Rows[i]["PHOTO_ID"];
                        string photo = Convert.ToString(yy);
                        dr["ID_" + z.ToString()] = HttpContext.Current.Server.HtmlEncode(httpLink + photo);

                        break;
                    }
                }
            } 
```

....以及将 DataTable 中的单元格导出到 excel Document xls 中的单元格的部分我试图设置公式，但它不起作用

```
foreach (DataRow r in result.Rows)
    {
        currentCol = 1;
        foreach (DataColumn c in result.Columns)
        {
            string temp = c.ColumnName.ToString().Substring(0,2);
            if (temp.Equals("ID")) 
            {
                httpLinkForPhoto = r[currentCol - 1].ToString();
                if (!httpLinkForPhoto.Equals(null))
                {
                    string formula = "=HYPERLINK(" + httpLinkForPhoto + "," + httpLinkForPhoto + ")";
                    excelDoc2.SetFormula(1, 1, currentRow, currentCol, currentRow, currentCol, formula);
                }
            }
            else
            { 
                excelDoc2.setCell(1, 1, currentRow, currentCol, r[currentCol - 1].ToString()); 
            }            
            currentCol++;
        }
        currentRow++;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:17:07.707

Excel中有一个功能。语法是

```
=HYPERLINK(url;friendlyname) 
```

只要确保你的单元格中的文本看起来像这样，url 和friendlyname 当然是占位符，你应该用它们替换你的 URL 和要显示的文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T07:21:23.943

一个**.net DataTable**可能只包含**.net Types**。所以不可能在数据表中添加*“超链接”*。但当然**，您可以将超链接添加到 excel Cell**。有关向 Excel 添加超链接的详细信息，请参阅[**此问题**](https://stackoverflow.com/questions/1333772/adding-hyperlinks-in-excel2007-in-c-sharp-within-excel-it-self)或[**MSDN**](http://msdn.microsoft.com/de-de/library/microsoft.office.interop.excel.hyperlinks.add.aspx)。根据您的代码，这可能看起来像

```
// common syntax to  add a Hyperlink to Excel
object Add(
[In] object Anchor, 
[In] string Address, 
[In, Optional] object SubAddress, 
[In, Optional] object ScreenTip, 
[In, Optional] object TextToDisplay
);

// your code
for (int rowIndex=0; rowIndex<result.Rows.Count; rowIndex++)
{
    for (int columnIndex=0; columnIndex<result.Columns.Count; columnIndex++)
    {
        string yourValue = result.Rows[rowIndex].Item[columnIndex].ToString();
        if (columnIndex!=YOUR_HYPERLINK_COLUMN_INDEX)
            excelDoc2.setCell(1, 1, rowIndex, columnIndex, yourValue);      
        else
        {
             Excel.Range range = (Range) YOUR_SHEET.Cells[rowIndex, columnIndex];

             CURRENT_WORKSHEET.Hyperlinks.Add(
                           range, 
                           yourValue, 
                           Type.Missing,"YOUR_SCREEN_TIP",
                           "YOUR_TEXT_TO_DISPLAY");
        } 
    }
} 
```

# iphone - 按钮内的组合框和文本字段？

> ID：12313195
> 
> 赞同：-1
> 
> 时间：2012-09-07T06:54:01.003
> 
> 标签：iphone, ios

我需要在“位置”按钮内添加一个***UITextField***和一个***ComboBox 。***当用户点击“位置”按钮时，***UITextField***和***ComboBox***应该出现在屏幕上，当用户点击“位置”按钮之外时，***UITextField***和***ComboBox***应该被隐藏。

我怎样才能做到这一点？任何教程或源代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:10:50.237

你的目标是 iPad 吗？如果是这样，请尝试使用 UIPopverController。这是关于它的Apple文档：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html)

你的目标是 iPhone 吗？如果是这样，您可能会考虑创建第二个视图控制器来保存所需的控件，然后在第一个视图控制器上调用**presentModalViewController**，如下所示：

```
[self presentModalViewController:secondViewController animated:YES] 
```

您还需要某种“完成”按钮，并且应该使用委托来回调第一个视图控制器。

如果您不熟悉委托，请参阅本教程（还提供了以模态方式呈现视图控制器的示例）：

[http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development](http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development)

（顺便说一句，请注意 iOS 并没有真正的“组合框”选项。但是，还有诸如 UISegmentedControl 或 UIPickerView 之类的替代方案。）

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:17:58.190

1.在xib中创建一个自定义样式的UIButton。添加UITextFiled和选择器视图，它们具有iOS中组合框的默认功能。或者你可以让你自定义组合框。默认情况下都隐藏

2.关于按钮的点击事件。

```
- (IBAction)buttonAction:(id)sender 
{
   textfield.hidden=NO;
   picker.hidden=NO;
   //do other logic whatever you want here.

} 
```

关闭选择器和文本字段：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
       textfield.hidden=NO;
       picker.hidden=NO;
} 
```

# wcf - 如何保护 WCF Web 服务？

> ID：12313198
> 
> 赞同：0
> 
> 时间：2012-09-07T06:54:19.083
> 
> 标签：wcf, security

我有一个有方法的服务：

用户配置文件 GetUserProfile(int userId);

在这里，拥有个人资料的用户可以在客户端上获取其个人资料。但这里的问题是任何连接到 Web 服务并插入任何用户 ID 的用户都会获取该特定用户的个人资料。我该如何防止这种情况？

我正在使用 Facebook 身份验证（如果这有助于您回答这个问题）

请帮忙。

谢谢你 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:31:44.940

使用会话并将 userId 添加到会话变量中。GetUserProfile() 然后应该返回存储在当前会话中的用户 ID 的配置文件。

# c# - 如何评估我的应用程序设计？

> ID：12313199
> 
> 赞同：1
> 
> 时间：2012-09-07T06:54:27.607
> 
> 标签：c#, architecture, xml-rpc

我被赋予了系统架构和设计的艰巨任务。我很喜欢编程，而不是设计。所以，我决定在这里寻求一些关于如何/从哪里开始我的任务的建议。我试图在下图中提出所有正确的问题（我认为）：

![点击上面的链接查看大图](../Images/19ae5c2de2fcb660a4cd3b7ac205576d.png)

[实际图像。](https://i.stack.imgur.com/lW1Aq.png)

所以，我可以回答其中一个问题：“为什么选择 XML-RPC？” 因为，它是健壮的、设计良好的、行业标准的通信方式（我在 IEEE 论文中读到过）。

请回答图片中的任何问题。

PS我同意，要求轻松解决所有这些问题（图像中的最后一个问题）非常懒惰。但这不是一个人应该做的吗？不能解决曾经解决过的任何事情？

编辑：该应用程序必须基本上为远程用户提供一种与机器交互的方式。一种说法是，应用程序应该为机器交互 api 提供网络功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:59:03.073

感谢您的澄清。

我认为您需要对服务器（机器计算机）和客户端之间的通信方式进行更多研究。一种选择可能是使用 MSMQ（消息队列）的双向通信。微软在这里有一个关于它的页面[http://msdn.microsoft.com/en-us/library/ms752264.aspx](http://msdn.microsoft.com/en-us/library/ms752264.aspx)

这是我认为它可能工作的方式。每个部分都是您解决方案中的一个单独项目。

**机器计算机（服务器）项目（exe，控制台应用程序？）**

*   包含一个 ServiceHost 以接受来自客户端计算机的 API 调用。
*   当新的客户端计算机连接时，添加到要更新的客户端列表。
*   当客户端断开连接时，从列表中删除客户端以进行更新（或在发送更新通信之前检查客户端是否已启动）。
*   接受 API 调用，对所有客户端计算机进行回调以提供进程状态，并在“机器”上运行请求。
*   当“机器”完成时，调用客户端计算机以提供完整状态。

**客户端计算机（客户端）项目（exe、GUI 应用程序）**

*   包含一个接受来自服务器的状态更新的 ServiceHost。
*   开始时，向服务器发送一个通知（API）新客户端在线。
*   退出时，向服务器发送通知（API）客户端将离线。
*   提供一个显示状态和任何其他可用读数或信息的窗口，这些信息将从服务器提供。
*   提供选项以允许用户向服务器（API）发送命令，该服务器将在机器上运行

**承包工程**

*   包含将从客户端和服务器来回传递的所有类对象。
*   客户端和服务器项目都引用了这个项目。两者都需要能够使用这些类来发送或接收通信。

# bash - 通过 CURL 在 imgur 上上传图像时出错

> ID：12313200
> 
> 赞同：1
> 
> 时间：2012-09-07T06:54:31.033
> 
> 标签：bash, curl, imgur

我正在尝试通过 CURL 访问他们的 API 在 imgur 上上传图像。我试过：

```
curl -d "image=reddit.png" -d "key=myapikey" http://api.imgur.com/2/upload.json 
```

它引发了一个著名的错误：

```
{"error":{"message":"Image format not supported, or image is corrupt.","request":"\/\/2\/upload.json","method":"post","format":"json","parameters":"image = reddit.png, key = myapikey"}} 
```

我在编写一个简单的 bash 脚本时也面临同样的问题

```
#!/bin/bash 

API_KEY="myapikey"                                                                                                                                            
file="$1"                                                                                                                                      

output=$(curl -d "image=$file" -d "key=$API_KEY" http://api.imgur.com/2/upload.json)                                                           

echo $output 
```

输出的错误信息与上面相同。我尝试了`jpg/png`两种格式都引发了相同的错误。

所以，知道我在这里做错了什么。

PS：我的图像没有损坏，我正在从包含图像的同一目录执行脚本/命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:00:26.630

试试这个：

```
$ curl -d "image=@reddit.png" ... 
```

有关详细信息，请参阅[curl 的联机帮助页](http://curl.haxx.se/docs/manpage.html)并阅读该`-d --data`选项的说明。

**编辑：**

要对图像进行编码，请使用[`base64`实用程序](http://linux.die.net/man/1/base64)：

```
$ base64 reddit.png > reddit.base64.png 
```

# visual-studio-2012 - Visual Studio 2012 UI：快速查找消失了？

> ID：12313201
> 
> 赞同：10
> 
> 时间：2012-09-07T06:54:36.157
> 
> 标签：visual-studio-2012

在 Visual Studio 2012RC 中，我试图恢复**QuickFind**，直到我不幸决定使用*Find in Files*功能时，它一直在正常工作。

现在按 CTRL+F 或 CTR+shift+F 将在这两种情况下调出*查找和替换 [在文件中查找，在文件中替换]*窗口。我临时设法添加了“切换到快速查找”工具栏图标，该图标曾经有效。但现在即使这样也行不通。

我试图删除“*在文件中查找”和“快速查找**”*的键盘快捷键，并将其重新分配给“快速查找”，但它没有帮助。

如果我使用 QuickLaunch 也一样：无论我选择*QuickFind*还是*Find In Files*，我总是会得到*Find In Files*。

除了重新安装整个应用程序之外还有什么想法吗？

**编辑**

这似乎只发生在特定文件上。如果我在编辑器中调出不同的文件， Ctrl+F 将调出**QuickFind**。看起来它正在某个地方存储搜索方法，并且覆盖了 QuickFind。很混乱。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T08:01:09.473

明白是什么问题了。当文档窗口处于拆分模式时，Ctrl+F 不会调出快速查找。

一定是VS2012的bug。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T13:38:41.917

似乎某些文件类型不支持快速查找功能（这可能是一个错误）。我发现 *.SQL 文件类型不允许快速查找，而 *.cs 工作得很好。作为测试：

1.  我在我的解决方案中创建了一个 TextFile1.TXT 文件，它可以快速查找。
2.  我将文件重命名为 TextFile1.SQL 并且没有出现快速查找。您将获得完整的查找对话框

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:01:52.573

有一个错误，微软不会修复:(

[https://connect.microsoft.com/VisualStudio/feedback/details/769189/ctrl-f-opens-find-in-files-rather-than-find](https://connect.microsoft.com/VisualStudio/feedback/details/769189/ctrl-f-opens-find-in-files-rather-than-find)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T07:27:41.143

一种解决方案是重新创建文件 - 只需在同一位置创建一个新文件，复制和粘贴影响、保存和处置原始文件的文件内容就可以了。在新文件中，快速查找和在文件中查找都将正常工作。

不确定这是否是 Visual Studio 2012 的错误，在此处发布回复，以免其他人浪费所有时间。

# android - 来自源代码的android linux内核版本

> ID：12313204
> 
> 赞同：0
> 
> 时间：2012-09-07T06:55:04.193
> 
> 标签：android, linux-kernel, version

我想从源代码中知道 android 内核版本。我查看了[如何确定 Android 源代码的版本？](https://stackoverflow.com/questions/8673456/how-to-determine-version-of-android-source-code)

但这给了我 3 个字段，例如`3.0.31`. 我想知道更深入的版本-比如说，`3.0.31 –g77a6dce`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T06:30:38.937

是的 3.0.31 表示正确的 linux 版本。不确定“–g77a6dce”是干什么用的。也许是您从中提取的分支名称。就 Android 内核而言，ICS 官方版本使用 3.0.1 内核，而最新的 jellybean 使用 3.1.10 内核。有关内核版本控制的更多信息[http://en.wikipedia.org/wiki/Linux_kernel#Version_numbering](http://en.wikipedia.org/wiki/Linux_kernel#Version_numbering)

# google-drive-api - 在 Javascript 客户端中处理 401 的最佳实践是什么

> ID：12313216
> 
> 赞同：1
> 
> 时间：2012-09-07T06:55:59.970
> 
> 标签：google-drive-api

目前我的逻辑是：-

1.  创建一个 gapi.client.HttpRequest 对象 myRequestObject=gapi.client.request(args)
2.  使用 myRequestObject.execute(myCallback) 执行该请求
3.  如果我捕捉到 401，我会刷新访问令牌。我通过调用我自己的服务器 servlet 来做到这一点，因为我不喜欢我的 JS 客户端持有刷新令牌的想法。
4.  所以在这个阶段，我的 JS 客户端有一个新的有效 access_token，但 myRequestObject 仍然持有陈旧的 access_token。

_ 我不想一直冒泡到我的业务逻辑并创建一个新的 HttRequest 对象。反而

我只想用新的令牌重新提交同一个对象。

我发现我可以直接用

> myRequestObject.b.headers['Authorization']='承载'+newAccessToken;

但是有没有更官方的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:01:32.720

查看 Drive SDK 文档中更新的 OAuth 2.0 页面，了解完整流程的 JavaScript 实现：[https ://developers.google.com/drive/credentials](https://developers.google.com/drive/credentials)

请记住，JavaScript 客户端库使用仅提供访问令牌的 OAuth 2.0 客户端流程，因此您不必担心客户端持有刷新令牌。

# objective-c - 以编程方式关闭 Google AdMob 广告 (iOS)

> ID：12313219
> 
> 赞同：2
> 
> 时间：2012-09-07T06:56:24.573
> 
> 标签：objective-c, ios, admob, ads

我正在使用适用于 iOS 的 Google AdMob：

[谷歌广告](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals)

我想知道我是否能够以编程方式关闭这些广告，以便它们停止显示。阅读 SDK 后，我看不到任何地方可以打开或关闭广告。

**编辑：**

这是我加载 Google AdMob 代码的方式：

**主视图控制器.m**

```
- (void) viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    // Create a view of the standard size at the bottom of the screen.
    // Available AdSize constants are explained in GADAdSize.h.
    bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner];
    // Must be a better way to position at bottom of page
    [bannerView_ setCenter:CGPointMake(kGADAdSizeBanner.size.width/2, 455)];
    // Specify the ad's "unit identifier." This is your AdMob Publisher ID.
    bannerView_.adUnitID = MY_BANNER_UNIT_ID;
    // Let the runtime know which UIViewController to restore after taking
    // the user wherever the ad goes and add it to the view hierarchy.
    bannerView_.rootViewController = self;
    [self.view addSubview:bannerView_];

    // Initiate a generic request to load it with an ad.
    GADRequest *request = [GADRequest request];
    // remove this line when you are ready to deploy for real
    request.testing = YES;
    [bannerView_ loadRequest:request];
} 
```

我想在类实现中禁用超级视图：

这是迄今为止我尝试循环遍历`MainViewController`子视图的代码。

一旦我找到了正确的子视图`GADBannerView`，我希望能够将其删除。

**其他类.m**

```
- (void)disableAds
{
    // Turn the ads off.
    UIViewController *mainView = [[UIViewController alloc] initWithNibName:@"MainViewController" bundle:[NSBundle mainBundle]];
    for (UIView *subview in [mainView.view subviews]) {
        NSLog(@"View(s): %@", subview);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T12:15:23.270

因为类实现实际上是一个插件，所以我能够使用以下代码：

```
for (UIView *subview in [self.viewController.view subviews]) {
    if([subview isKindOfClass:[GADBannerView class]]) {
        [subview removeFromSuperview];
    }
} 
```

根据 Phonegap 文档，每个插件都有一个`self.viewController`属性。所以这只是一个循环并仅从超级视图中删除的问题`GADBannerView`。

当然，我必须先`#import "GADBannerView.h"`在插件类实现中，这样它才能知道`GADBannerView`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T06:58:26.890

没有任何 admob 经验我会说只是禁用 BannerView 和任何控制器

喜欢`bannerView = nil`或`[bannerView release]`

也`[bannerView removeFromSuperview]`或`bannerView.hidden = YES`

* * *

从您自己的答案和添加的代码中，您需要做的就是

```
 -(void)disableAds
{
    // Turn the ads off.
    [bannerView_ removeFromSuperview];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-30T08:47:12.217

试试这个：`bannerView.rootViewController = nil;`

# c++ - 遍历向量时使用什么索引

> ID：12313226
> 
> 赞同：1
> 
> 时间：2012-09-07T06:57:22.507
> 
> 标签：c++, oop, memory-management, vector, indexing

好的，我想一劳永逸地清除一些东西。如果我有一个法线向量，例如：

```
std::vector<Object*> coll; 
```

我想了解它的元素，我知道三种方法：

**1.**使用`int`索引，如：`for(int i = 0; i < coll.size(); ++i)`

**2.**使用`type_t`索引，同1.：`for(size_t i = 0; i < coll.size(); ++i)`

并通过以下方式访问 1 和 2 中的元素：`coll[i]`

或者

**3.**使用`const_iterator`，如：

```
std::vector<Object*>::const_iterator i;
for(i = coll.begin(); i != coll.end(); ++i)
       // stuff 
```

并使用 . 访问元素`*it`。

我注意到（并且听说）第三种方式是最防失败的方式，但是在解除分配向量时非常不愉快，因为当我使用 时`const_iterator`，如果我执行类似的操作`delete (*it)`，甚至`coll.erase(it)`在解除分配之前，我的迭代器失去它的价值，然后我不能继续`for`循环。

这样做的建议/好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T07:02:01.193

您的前两种方法都不完全正确。正确的索引类型是

```
std::vector<Object*>::size_type 
```

这就是[size()](http://en.cppreference.com/w/cpp/container/vector/size)返回的内容，也是[operator[]](http://en.cppreference.com/w/cpp/container/vector/operator_at)的内容。

使用迭代器的方法是惯用的方法。你写了

> 当我使用 const_iterator 时，如果我在释放之前执行 delete (*it) 甚至 coll.erase(it) 之类的操作，我的迭代器就会失去它的值，然后我就无法继续执行 for 循环

这是不正确的。在类似的东西

```
// ..
std::vector<int *>::const_iterator it, end = v.end();
for ( it = v.begin(); it != end; ++it ) {
    delete *it;
} 
```

您不会使迭代器无效`it`。您只需调用`delete`迭代器指向的内容。因此，您可以在`delete`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:02:25.473

`#3`一种更通用，它使您的代码更灵活。
如果在某个时间点您需要将标准库容器从`std::vector`其他容器更改为其他容器`#3`，那么其他容器将按原样工作。（*注意使用`!=`代替`<`or`>`*）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T07:08:05.997

size_t 通常是用于索引数组的正确类型，因为它基本上被定义为足够大以容纳对象的最大大小的类型。它实际上被定义为内存范围的大小，但也是保存数组索引的最佳类型，这样您就知道它会足够大。

在 64 位系统上，您可能能够拥有填充数百 GB 内存的数组，但 int 最多只能容纳 20 亿左右的数字，而 size_t 应该是索引系统可以处理的任何数组的合适类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T07:10:22.607

你写了：

> ...甚至 coll.erase(it) 在解除分配之前，我的迭代器失去了它的价值，然后我不能继续 for 循环......

`vector::erase`返回指向集合中下一个有效元素的迭代器。因此你可以写：

```
std::vector<Object*>::const_iterator i;
for(i = coll.begin(); i != coll.end(); )
{
  i = coll.erase(i);
} 
```

请注意，在这种情况下您不得增加`i`( `i++`)。

# java - 如何在java中动态禁用复选框

> ID：12313230
> 
> 赞同：0
> 
> 时间：2012-09-07T06:57:35.780
> 
> 标签：java, html

我正在使用 java 动态构建 html 表，并且我想根据某些条件自动检查复选框，但无论是哪种情况，复选框都会被选中，

下面是我使用的代码：

```
 if(isactive.equalsIgnoreCase("Y")){
                         checked="checked";
                     }
                     else{
                         checked="false";
                     } 
```

和复选框代码：

```
htmlTable.append("<td align=\"left\" ><input type=\"checkbox\" name=\"headername_"+loopvariable+"\" id=\"headername_"+loopvariable+"\" value="+id+" checked="+checked+">"+columnname.toUpperCase()+"<br></td>");

if the value is not `Y` than uncheck the checkbox is my requirement but it is not working. 
```

请告知如何去做。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:04:04.460

`checked`无论您将其设置为什么，设置该属性都会产生一个选中的复选框。

您需要在变量中包含整个属性：

```
if(isactive.equalsIgnoreCase("Y")){
    checked = "checked=\"checked\"";
} else {
    checked = "";
} 
```

并相应地更新您的字符串连接：

```
"... value="+id+" " + checked + ">" 
```

# javascript - Uncaught SyntaxError: Unexpected token ILLEGAL

> ID：12313231
> 
> 赞同：-1
> 
> 时间：2012-09-07T06:57:41.360
> 
> 标签：javascript

从 html 调用下面的函数

```
displaySSHCmdResultDiv('12:21:08 up 4 days, 1:37, 3 users, load average: 0.44, 0.46, 0.44') 
```

在 chrome 中向我抛出错误“Uncaught SyntaxError: Unexpected token ILLEGAL”。任何人都可以帮助我确定问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:32:54.920

根据您的代码功能参数为 6，并用逗号分隔，因此您对每个 srting 都有完整的单人床

```
displaySSHCmdResultDiv('12:21:08 up 4 days','1:37',' 3 users', 'load average: 0.44', '0.46', '0.44'); 
```

# php - 将 PHP 变量传递给 SQL 查询

> ID：12313233
> 
> 赞同：0
> 
> 时间：2012-09-07T06:57:47.607
> 
> 标签：php, mysql, sql

```
 $user = mysql_real_escape_string($_POST["userlogin"]);

    mysql_connect("uritomyhost","myusername","password"); 
    mysql_select_db('mydatabase');
    mysql_query('UPDATE table SET field = field + ($userlogin)'); 
```

这是从发布请求中获取用户登录然后将其插入我的 SQL 查询的正确方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T07:13:03.507

停止使用过时的函数，改用 PDO。

```
$stmt = PDO::prepare('UPDATE table SET field = field + :field');
$stmt->execute(array('field' => $_POST["userlogin"])); 
```

阅读[有关 PDO 的一些信息](http://www.php.net/manual/en/book.pdo.php)。简而言之：它为您转义了您的数据，跨数据库非常一致，而且通常更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T06:59:13.050

mysql连接后使用`mysql_real_escape_string()`和使用双引号

```
mysql_query("UPDATE table SET field = field + ({$userlogin})"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:03:14.303

您应该在连接到数据库后使用 mysql_real_scape_string() ...
所以将您的代码更改为：

```
mysql_connect("uritomyhost","myusername","password"); 
mysql_select_db('mydatabase');
$userlogin = mysql_real_escape_string($_POST["userlogin"]);
mysql_query("UPDATE table SET field = '$userlogin'"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T07:03:26.293

像这样试试。

```
$user = mysql_real_escape_string($_POST["userlogin"]);

mysql_connect("uritomyhost","myusername","password"); 
mysql_select_db('mydatabase');
mysql_query("UPDATE table SET field = value where user='$user'"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T07:03:46.357

用于`mysqli_query`您的查询（注意**i**）并使用准备好的语句。使用准备好的语句比使用直接查询和在查询字符串中包含变量更安全。此外，mysql 将很快被弃用。例子 ：

```
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");
/* check connection */
if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
exit();
}
$city = "Amersfoort";
/* create a prepared statement */
if ($stmt = $mysqli->prepare("SELECT District FROM City WHERE Name=?")) {

/* bind parameters for markers */
$stmt->bind_param("s", $city);

/* execute query */
$stmt->execute();

/* bind result variables */
$stmt->bind_result($district);

/* fetch value */
$stmt->fetch();

printf("%s is in district %s\n", $city, $district);

/* close statement */
$stmt->close();
}
/* close connection */
$mysqli->close();
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T07:04:22.893

尝试这个

```
mysql_query("UPDATE table SET field = field + ('$user')"); 
```

然而，

您可能正在更新表中的所有字段，因为您的`UPDATE`子句中没有 where

不应该是

```
mysql_query("UPDATE table SET field = field WHERE user= '$user'"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-07T07:04:33.470

我想你想`INSERT`而不是使用`Update`. 为什么`field = field + ($userlogin)`？这将连接这些值。还有一件事请使用**[PDO](http://php.net/manual/en/book.pdo.php)**或**[MYSQLI](http://php.net/manual/en/book.mysqli.php)**

使用 PDO 扩展的示例：

```
<?php

    $stmt = $dbh->prepare("INSERT INTO tanlename (field) VALUES (?)");
    $stmt->bindParam(1, $user);
    $stmt->execute();

?> 
```

# c# - 如何创建具有应用程序任务栏按钮等功能的 notifyIcon？

> ID：12313235
> 
> 赞同：-1
> 
> 时间：2012-09-07T06:57:55.867
> 
> 标签：c#, winforms, taskbar

我想要一个带有任务栏按钮等点击功能的 Windows 窗体应用程序的 notifyIcon：

*   当表单位于其他应用程序之上时；激活后，单击 notifyIcon 必须最小化应用程序的窗口。
*   当表格在其他申请中时；停用但未最小化，单击 notifyIcon 必须激活应用程序的窗口。
*   当应用程序最小化时，单击 notifyIcon 必须最大化应用程序的窗口。

我已经尝试过表单的 Deactivate 事件和 notifyIcon 的 Click 事件，但似乎在 C# 中，表单的 Deactivate 事件是在 notifyIcon 的 Click 事件之前编译的。

[在这里](https://stackoverflow.com/questions/3834257/how-to-detect-if-application-is-activated-by-clicking-in-the-taskbar)，我找到了一种通过单击任务栏来检测应用程序是否已激活的方法，但我找不到相同的停用方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T13:25:41.953

尝试这个..

```
private void notifyIcon1_MouseDoubleClick(object sender, MouseEventArgs e)
    {
        if (this.WindowState == FormWindowState.Minimized) 
        { 
            this.Show(); 
            this.WindowState = FormWindowState.Normal; 
        }
        else 
        {
            this.WindowState = FormWindowState.Minimized; 
            this.Hide(); 
        }
        this.Activate();
    } 
```

这是一个 notifyIcon DoubleClick 事件。

# ios - ios上的Facebook SDK登录

> ID：12313240
> 
> 赞同：-4
> 
> 时间：2012-09-07T06:58:09.860
> 
> 标签：ios, facebook-ios-sdk

我无法在我的 iOS 应用程序中使用 facebook 登录。我已经彻底研究了 Facebook api，并遵循了 developer.facebook.com 网站上 facebook api 给出的所有说明。我能够进行身份验证，但它没有登录到我的应用程序。它说Safari无法打开页面，因为地址无效。我是iOS新手，请帮助我。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:24:48.690

您似乎跳过了向应用程序添加自定义 url 方案的教程部分。否则，一旦用户通过身份验证，Safari 就无法将用户送回您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:01:58.463

查看 Ray Wenderlich 的教程：

**如何使用 iPhone 应用在 Facebook 上发帖**

[http://www.raywenderlich.com/77/how-to-post-on-facebook-with-your-iphone-app](http://www.raywenderlich.com/77/how-to-post-on-facebook-with-your-iphone-app)

# gzip - 利用多核进行 tar+gzip/bzip 压缩/解压缩

> ID：12313242
> 
> 赞同：271
> 
> 时间：2012-09-07T06:58:20.807
> 
> 标签：gzip, tar, bzip2, bzip

我通常使用`tar zcvf`压缩和解压缩`tar zxvf`（由于习惯使用gzip）。

我最近得到了一个带有超线程的四核 CPU，所以我有 8 个逻辑核心，我注意到许多核心在压缩/解压缩期间没有使用。

有什么办法可以利用未使用的内核使其更快？

* * *

## 回答 #1

> 赞同：394
> 
> 时间：2013-06-14T14:34:27.723

您还可以使用 tar 标志“--use-compress-program=”来告诉 tar 使用什么压缩程序。

例如使用：

```
tar -c --use-compress-program=pigz -f tar.file dir_to_zip 
```

* * *

## 回答 #2

> 赞同：387
> 
> 时间：2012-09-07T14:48:01.827

您可以使用[pigz](http://zlib.net/pigz/)代替 gzip，后者在多个内核上执行 gzip 压缩。您可以通过 pigz 管道而不是使用 -z 选项：

```
tar cf - paths-to-archive | pigz > archive.tar.gz 
```

默认情况下，pigz 使用可用内核的数量，如果无法查询，则使用 8 个。您可以使用 -pn 来要求更多，例如 -p 32。 pigz 具有与 gzip 相同的选项，因此您可以使用 -9 来请求更好的压缩。例如

```
tar cf - paths-to-archive | pigz -9 -p 32 > archive.tar.gz 
```

* * *

## 回答 #3

> 赞同：138
> 
> 时间：2014-12-18T07:31:10.160

## 常用方法

有`tar`程序选项：

```
-I, --use-compress-program PROG
      filter through PROG (must accept -d) 
```

您可以使用归档器或压缩器实用程序的多线程版本。

最流行的多线程归档器是[pigz](http://www.zlib.net/pigz/)（而不是 gzip）和[pbzip2](http://compression.ca/pbzip2/)（而不是 bzip2）。例如：

```
$ tar -I pbzip2 -cf OUTPUT_FILE.tar.bz2 paths_to_archive
$ tar --use-compress-program=pigz -cf OUTPUT_FILE.tar.gz paths_to_archive 
```

归档器必须接受 -d。如果您的替换实用程序没有此参数和/或您需要指定其他参数，则使用管道（必要时添加参数）：

```
$ tar cf - paths_to_archive | pbzip2 > OUTPUT_FILE.tar.gz
$ tar cf - paths_to_archive | pigz > OUTPUT_FILE.tar.gz 
```

单线程和多线程的输入输出兼容。您可以使用多线程版本进行压缩，也可以使用单线程版本进行解压缩，反之亦然。

### p7zip

对于用于压缩的 p7zip，您需要一个小的 shell 脚本，如下所示：

```
#!/bin/sh
case $1 in
  -d) 7za -txz -si -so e;;
   *) 7za -txz -si -so a .;;
esac 2>/dev/null 
```

将其保存为 7zhelper.sh。这里是使用示例：

```
$ tar -I 7zhelper.sh -cf OUTPUT_FILE.tar.7z paths_to_archive
$ tar -I 7zhelper.sh -xf OUTPUT_FILE.tar.7z 
```

### xz

关于多线程 XZ 支持。如果您正在运行 XZ Utils 5.2.0 或更高版本，您可以通过设置`-T`或通过环境变量 XZ_DEFAULTS（例如）设置`--threads`适当的值来利用多个内核进行压缩。`XZ_DEFAULTS="-T 0"`

这是 5.1.0alpha 版本的 man 片段：

> 多线程压缩和解压还没有实现，所以这个选项暂时没有效果。

但是，这不适用于解压缩尚未启用线程压缩的文件。来自 5.2.2 版的 man：

> 线程解压还没有实现。它仅适用于包含多个块且在块头中具有大小信息的文件。在多线程模式下压缩的所有文件都满足此条件，但在单线程模式下压缩的文件即使使用 --block-size=size 也不满足。

## 用替换重新编译

如果您从源代码构建 tar，那么您可以使用参数重新编译

```
--with-gzip=pigz
--with-bzip2=lbzip2
--with-lzip=plzip 
```

使用这些选项重新编译 tar 后，您可以检查 tar 帮助的输出：

```
$ tar --help | grep "lbzip2\|plzip\|pigz"
  -j, --bzip2                filter the archive through lbzip2
      --lzip                 filter the archive through plzip
  -z, --gzip, --gunzip, --ungzip   filter the archive through pigz 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-09-01T15:02:27.647

您可以使用`-I`tar`--use-compress-program`开关的快捷方式，并`pbzip2`在多核上调用 bzip2 压缩：

```
tar -I pbzip2 -cf OUTPUT_FILE.tar.bz2 DIRECTORY_TO_COMPRESS/ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-23T16:28:35.490

如果您想在文件名和压缩选项方面拥有更大的灵活性，您可以使用：

```
find /my/path/ -type f -name "*.sql" -o -name "*.log" -exec \
tar -P --transform='s@/my/path/@@g' -cf - {} + | \
pigz -9 -p 4 > myarchive.tar.gz 
```

### 第1步：`find`

`find /my/path/ -type f -name "*.sql" -o -name "*.log" -exec`

此命令将查找您要归档的文件，在本例中`/my/path/*.sql`为`/my/path/*.log`. 根据需要添加`-o -name "pattern"`任意数量。

`-exec`将使用以下结果执行下一个命令`find`：`tar`

### 第2步：`tar`

`tar -P --transform='s@/my/path/@@g' -cf - {} +`

`--transform`是一个简单的字符串替换参数。它将从存档中删除文件的路径，以便在解压缩时将 tarball 的根目录变为当前目录。请注意，您不能使用`-C`选项来更改目录，因为您将失去以下好处`find`：目录的所有文件都将被包含在内。

`-P`告诉`tar`使用绝对路径，因此它不会触发警告“从成员名称中删除前导 `/'”。`--transform`无论如何都要删除前导“/” 。

`-cf -`告诉`tar`使用我们稍后指定的 tarball 名称

`{} +`使用之前`find`找到的每个文件

### 第 3 步：`pigz`

`pigz -9 -p 4`

使用尽可能多的参数。在这种情况下`-9`是压缩级别，`-p 4`是专用于压缩的核心数。如果你在负载很重的网络服务器上运行它，你可能不想使用所有可用的内核。

### 第 4 步：存档名称

`> myarchive.tar.gz`

最后。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-06T04:09:30.113

您可能要考虑的一个相对较新的（解）压缩工具是[zstandard](https://github.com/facebook/zstd)。它在利用备用内核方面做得非常出色，并且在压缩比与（去）压缩时间方面做了一些很好的权衡。它还可以根据您的压缩比需求进行高度调整。

# java - JSF 1.1：有条件地隐藏原始 HTML 和标签

> ID：12313245
> 
> 赞同：1
> 
> 时间：2012-09-07T06:58:34.127
> 
> 标签：java, jsf, jakarta-ee

我正在尝试更改 JSF 1.1 页面以有条件地隐藏页面的某些部分。该页面是使用混合的原始 HTML 和标签构建的。具体来说，我有以下内容：

```
<table>
  <tr>
    <td>Foo</td>
    <td><h:inputText ... /></td>
  </tr>
  <tr>
    <td>Bar</td>
    <td><h:inputText ... /></td>
  </tr>
  <!-- more stuff, including <h:dataTable>
</table> 
```

我想将其包装在有条件地隐藏整个表格的标签中，但我似乎无法弄清楚。这是我尝试过的：

*   将标记包裹在`<h:panelGroup rendered="...">`. 虽然这个正确显示/隐藏了标记，但所有原始 HTML 都从生成的 HTML 中剥离。
*   将标记包裹在`<f:verbatim>`. 这不起作用，因为逐字标记在 JSF 1.1 中没有渲染属性
*   将整个东西包裹在一个`<h:panelGroup rendered="..."><f:verbatim>`组合中。这与第一次尝试的效果相同。
*   我也尝试过`<f:view>`，`<f:subview>`但无济于事。

我知道可以在 JSF 页面中包含 JSTL 标记并使用`<c:if>`，但我想避免这种情况。有任何想法吗？

注意：我意识到（至少在某些人看来）混合 HTML 和 JSF 被认为是不好的做法，但是这个页面是由其他人创建的，我只需要修改它（它的页面有点大，上面的 HTML 只是一个它的小片段）..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:33:06.417

要么替换`<table>`为`<h:panelGrid>`.

```
<h:panelGrid columns="2">
  <h:outputText value="Foo" />
  <h:inputText ... />

  <h:outputText value="Bar" />
  <h:inputText ... />

  <!-- more stuff, including <h:dataTable>
</h:panelGrid> 
```

或者使用 CSS display:none/block:

```
<table style="display: ${some condition ? 'none' : 'block'};"> 
```

或者只是升级到 JSF 1.2。从技术上讲，JSF 1.1 Web 应用程序可以轻松升级到 JSF 1.2，而无需更改任何代码。只需更新 JAR 并更改`faces-config.xml`根声明以将 JSF 1.1 DTD 替换为 JSF 1.2 XSD。JSF 1.2 附带了一个改进的视图处理程序，它消除了`<f:verbatim>`噩梦（即不再需要它）。它还附带了许多错误修复和性能增强，您会非常感谢。

* * *

**Unrelated** to the concrete problem, as to your statement that mixing HTML and JSF is a bad practice, this isn't necessarily true. At least not since JSF 1.2 anymore. On JSF 1.0/1.1 you'd need to use `<f:verbatim>` which is in turn indeed a pain to develop/maintain. This caused the wrong myth that mixing JSF/HTML is "bad". See also [What are the main disadvantages of Java Server Faces 2.0?](https://stackoverflow.com/questions/3623911/what-are-the-main-disadvantages-of-java-server-faces-2-0) for a bit of history on that.

# android - 从 android 设备在 facebook 墙上上传视频？

> ID：12313249
> 
> 赞同：-1
> 
> 时间：2012-09-07T06:58:51.677
> 
> 标签：android, facebook, facebook-graph-api

我正在尝试将视频从我的厨房上传到 Facebook 墙上这是我的代码

```
 byte[] data = null;
    String dataPath = "/mnt/sdcard/DCIM/Camera/video-2012-09-03-13-34-19.mp4";
    Bundle param;
   //video extension
    data Name = ".mp4"
    facebook = new Facebook(FB_APP_ID);
    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
    InputStream is = null;
    try {
        is = new FileInputStream(dataPath);
        data = readBytes(is);
        param = new Bundle();
        param.putString("message", "hello guys");
        param.putString("filename", data Name);
        param.putByteArray("video", data);
        mAsyncRunner.request("me/videos", param, "POST", new fbRequestListener(), null);
    }
    catch (FileNotFoundException e) {
       e.printStackTrace();
    }
    catch (IOException e) {
       e.printStackTrace();
    } 
```

.....................

```
public byte[] readBytes(InputStream inputStream) throws IOException {
    // This dynamically extends to take the bytes you read.
    ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();

    // This is storage overwritten on each iteration with bytes.
    int bufferSize = 1024;
    byte[] buffer = new byte[bufferSize];

    // We need to know how may bytes were read to write them to the byteBuffer.
    int len = 0;
    while ((len = inputStream.read(buffer)) != -1) {
        byteBuffer.write(buffer, 0, len);
    }

    // And then we can return your byte array.
    return byteBuffer.toByteArray();
} 
```

首先我在日志猫中收到这样的警告

```
W/Bundle  (  774): Attempt to cast generated internal exception:
W/Bundle  (  774): java.lang.ClassCastException: java.lang.String
W/Bundle  (  774):  at android.os.Bundle.getByteArray(Bundle.java:1305)
W/Bundle  (  774):  at com.facebook.android.Util.openUrl(Util.java:172)
W/Bundle  (  774):  at com.facebook.android.Facebook.request(Facebook.java:751)
W/Bundle  (  774):  at com.facebook.android.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:253)
W/Bundle  (  774): Key format expected byte[] but value was a java.lang.String.  The default value <null> was returned.
W/Bundle  (  774): Attempt to cast generated internal exception:
W/Bundle  (  774): java.lang.ClassCastException: java.lang.String
W/Bundle  (  774):  at android.os.Bundle.getByteArray(Bundle.java:1305)
W/Bundle  (  774):  at com.facebook.android.Util.openUrl(Util.java:172)
W/Bundle  (  774):  at com.facebook.android.Facebook.request(Facebook.java:751) 
```

我在 Google 中搜索，有人建议 Facebook API 中存在错误，因为他们建议我修改 Util.java 中的一些行

```
for (String key : parameters.keySet()) {
            if (parameters.get(key) instanceof byte[]) {

                continue;
            }

            sb.append("Content-Disposition: form-data; name=\"" + key
                    + "\"\r\n\r\n" + parameters.getString(key));
            sb.append("\r\n" + "--" + boundary + "\r\n");
        }

        return sb.toString();
    } 
```

和

```
for (String key : params.keySet()) {
                if (params.get(key) instanceof byte[]) {
                    dataparams.putByteArray(key, params.getByteArray(key));
                }
            } 
```

现在我没有收到任何警告任何错误，但我的视频没有上传请帮助我，我在这里感到震惊。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:24:04.120

几天前，我使用了这个[stackoverflow 帖子来让视频上传正常工作。](https://stackoverflow.com/a/6924732/931354)我将重新开始并完全按照该答案中的说明使其正常工作。我知道它有效，因为它就在今天对我有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-15T10:40:00.373

Try this, it works for me.

```
File file=new File("your video file name");
        try {
            Request request = Request.newUploadVideoRequest(session, file, new Request.Callback() {

                @Override
                public void onCompleted(Response response) {
                    // TODO Auto-generated method stub

                    if(response.getError()==null)
                    {
                        Log.e("response",response.toString());
                        Toast.makeText(MainActivity.this, "Video Shared Successfully", Toast.LENGTH_SHORT).show();
                    }
                    else
                    {
                        Log.e("error",response.getError().getErrorMessage());
                        Toast.makeText(MainActivity.this, response.getError().getErrorMessage(), Toast.LENGTH_SHORT).show();
                    }
                }
            });

            request.executeAsync();
        } catch (Exception e) {
            e.printStackTrace();

        } 
```

# android - 如何在android中自定义ProgressDialog？

> ID：12313250
> 
> 赞同：0
> 
> 时间：2012-09-07T06:58:51.843
> 
> 标签：android, android-widget

我需要自定义 ProgressDialog，需要更改消息颜色、动画图像和对话框背景颜色。任何人都可以帮我解决这个问题。我是安卓新手。

如何更改 ProgressDialog 中显示的动画图像，我需要在哪里进行更改？我看到 ProgressDialog 类中没有这样的 API。

感谢和问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T07:15:56.137

这是自定义对话框示例：[http](http://www.mkyong.com/android/android-custom-dialog-example/) ://www.mkyong.com/android/android-custom-dialog-example/ 。这是您可以添加到自定义对话框的进度条示例：http: [//mfarhan133.wordpress.com/2010/10/13/progress-bar-tutorial-for-android/](http://mfarhan133.wordpress.com/2010/10/13/progress-bar-tutorial-for-android/)

# unit-testing - CMake如何使用单元测试安装测试文件

> ID：12313258
> 
> 赞同：13
> 
> 时间：2012-09-07T06:59:19.807
> 
> 标签：unit-testing, cmake

我正在使用 CMake 构建我的系统和单元测试。

我也在做一个外源构建。

我发现使用 ADD_TEST() 命令，您不需要安装测试可执行文件（它只会在您运行 make install 时运行，这很棒）。

但是，我的单元测试依赖于一些输入文件，这些文件需要复制到构建可执行文件的位置。

据我所知，我不能使用 INSTALL() 将文件复制到那里，因为我没有指定在*那里*- 这取决于调用 build 命令的位置。

有什么方法可以告诉 CMake 将我的测试文件复制到它构建可执行文件的相同位置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T17:30:39.577

您可以将**configure_file**与参数**COPYONLY 一起**使用。并执行复制到您的构建目录： ${CMAKE_CURRENT_BINARY_DIR}

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-01-12T16:12:35.990

这个问题很老了，但在我看来，有一个比复制你需要的文件更好的解决方案`${CMAKE_CURRENT_BINARY_DIR})`。该`add_test`命令有一个`WORKING_DIRECTORY`选项，允许选择运行测试的目录。所以我建议以下解决方案：

```
add_executable(testA testA.cpp)
add_test(NAME ThisIsTestA COMMAND testA WORKING_DIRECTORY ${DIRECTORY_WITH_TEST_DATA}) 
```

这样可以避免不必要地复制您的输入文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-07T12:22:35.007

当然，您可以通过以下方式在配置步骤中执行此操作：

```
execute_process(COMMAND ${CMAKE_COMMAND} -E copy_if_different ${fileFrom} ${fileTo}) 
```

如果您的输入文件依赖于构建生成的某些内容，您可以为其创建一个目标并将其添加到`all`目标中：

```
add_custom_target(copy_my_files ALL
    COMMAND ${CMAKE_COMMAND} -E copy_if_different ${fileFrom} ${fileTo}
    DEPENDS ${fileFrom}
) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T05:09:24.737

这可能不是最好的解决方案，但目前我正在这样做：

```
file(COPY my_directory DESTINATION ${CMAKE_CURRENT_BINARY_DIR}) 
```

这似乎在起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-27T14:50:16.680

要在构建时复制整个目录（并且仅在构建成功时），您可以在添加目标后执行此操作（例如，单元测试可执行文件）：

```
add_custom_command(TARGET ${PROJECT_NAME} POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_directory
    ${CMAKE_CURRENT_SOURCE_DIR}/testDataDir $<TARGET_FILE_DIR:${PROJECT_NAME}>/testDataDir) 
```

# jquery - 如何在基于 div 的表中隐藏列

> ID：12313259
> 
> 赞同：2
> 
> 时间：2012-09-07T06:59:20.650
> 
> 标签：jquery, css, html

我使用 JQuery。我需要隐藏表格列（基于 div）。在以下示例中，我需要在单击复选框时隐藏/显示文本框。隐藏文本框后，第 2 段将移至上方。同样，我不需要更改客户姓名和地址的位置。

HTML代码是

```
<input type="checkbox" id="chk" />Check it, if customer has no company.
<span>Paragraph 1st Lorem Ipsum  Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum </span>
        <div class="divTable">
             <div class="headRow">
                <div class="divCell" align="center">Company Name</div>
                <div  class="divCell">Customer Name</div>
                <div  class="divCell">Customer Address</div>
             </div>
            <div class="divRow">
                <div class="divCell" align="center"><input type="text" /></div>
                <div class="divCell" align="center">Customer Name</div>
                <div class="divCell" align="center">Customer Address</div>
            </div>
            <div class="divRow">
                <div class="divCell" align="center"><input type="text" /></div>
           </div>
            <div class="divRow">
                <div class="divCell" align="center"><input type="text" /></div>
           </div>
      </div>
<p>Paragraph 2nd Lorem Ipsum  Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum </P> 
```

CSS是，

```
.divTable
{
    display:  table;
    width:auto;
    background-color:#eee;
    border:1px solid  #666666;
    border-spacing:5px;
}

.divRow
{
   display:table-row;
   width:auto;

}

.divCell
{
    float:left;
    display:table-column;
    width:200px;
    background-color:#ccc;

} 
```

如何隐藏表格列（基于 div）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:05:31.410

这可以工作：

```
$("input[type=checkbox]").on("change", function(){
    $("input[type=text]").toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:14:14.843

你想要这个[**演示中的东西**](http://jsfiddle.net/yUEFd/)

```
$("input[type=checkbox]").on("change", function(){
    $(".divTable").toggle();
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:07:13.133

尝试

`$('input[type=text]').css('visibility','hidden');`

而不是像这样隐藏它们

```
$('#chk')​​​​.click(function(){
    if($('input[type=text]').css('visibility')=='hidden')
    {
       $('input[type=text]').css('visibility','');
    }
    else
    {
        $('input[type=text]').css('visibility','hidden')
    }
});​ 
```

[现场演示](http://jsfiddle.net/h4SQC/)

# jquery - 如何使用 XML & Jquery 创建动态菜单

> ID：12313261
> 
> 赞同：2
> 
> 时间：2012-09-07T06:59:28.860
> 
> 标签：jquery, xml

我有一个如下所示的 xml![在此处输入图像描述](../Images/a0058a4fbaaccd664103dedf19d09502.png)

以上是我的 xml 文件的示例。现在我的要求是读取 xml 文件并使用 jquery 构建一个菜单。

有人可以帮帮我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:01:59.260

你可以试试这个

**XML**

```
<?xml version="1.0" encoding="utf-8" ?>
    <MenuRoot>
        <Menu id="home" text="Home" url="home.aspx"></Menu>
        <Menu id="projects" text="Projects" url="projects.aspx">
            <SubMenu id="sub1" text="Sub One" url="subone.aspx"></SubMenu>
            <SubMenu id="sub2" text="Sub Two" url="subtwo.aspx"></SubMenu>
        </Menu>
    </MenuRoot> 
```

**HTML**

```
<div id="menu_wrapper"></div> 
```

**JS**

```
$(document).ready(function(){
        $.ajax({
            type: "GET",
            url: "jquery_xml.xml",
            dataType: "xml",
            success: function(xml){
                var ul_main=$("<ul />");
                $(xml).find("Menu").each(function(){
                    if($(this).children().length)
                    {
                        var ulSub=$("<ul />");
                        $(this).children().each(function(){
                            ulSub.append("<li id="+$(this).attr("id")+"><a href="+$(this).attr("url")+">"+$(this).attr("text")+"</a></li>");
                        });
                        var li=$("<li id="+$(this).attr("id")+"><a href="+$(this).attr("url")+">"+$(this).attr("text")+"</a></li>");
                        ul_main.append(li.append(ulSub))
                    }
                    else ul_main.append("<li id="+$(this).attr("id")+"><a href="+$(this).attr("url")+">"+$(this).attr("text")+"</a></li>");
                });
                $("#menu_wrapper").append(ul_main);
            }
        });
}); 
```

**输出**

![在此处输入图像描述](../Images/2f6279b6978d245123cb6a1c2453245c.png)

您只需要使用`css`.

# java - 我怎样才能从不同的班级到达进度条？

> ID：12313262
> 
> 赞同：1
> 
> 时间：2012-09-07T06:59:31.163
> 
> 标签：java, netbeans

我在 a.java 类中有一个进度条（形式）。我需要从 b.java 类到达它。我的进度条名称是 jprog。（我把它放在调色板的表格中）我怎样才能公开我的进度条？我在属性页找不到。我在头等舱的进度条。但我想改变它在二等舱的价值。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:02:13.897

您可以添加将更新进度条的类方法。然后您不必直接触摸进度条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:09:13.673

考虑将 a 添加`PropertyChangeListener`到您的第一堂课并`SwingWorker`在您的第二堂课中使用。SwingWorker 有一个名为的方法[`setProgress()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#setProgress%28int%29)，您可以调用该方法来设置进度条的值。然后，您可以在第一堂课中覆盖该`propertyChange()`方法并执行以下操作：

```
public void propertyChange(PropertyChangeEvent evt) {
    if ("progress" == evt.getPropertyName()) {
      int progress = (Integer) evt.getNewValue();
      progressBar.setValue(progress);
    }
} 
```

使用几个类*ClassA*和*ClassB*的示例如下：

```
public ClassA extends JForm implements PropertyChangeListener{
    private JProgressBar progressBar;

    public ClassA(){
        /**
        * Your setup for the form
        */
    }

     /**
     * Invoked when task's progress property changes.
     */
    public void propertyChange(PropertyChangeEvent evt) {
        if ("progress" == evt.getPropertyName()) {
            int progress = (Integer) evt.getNewValue();
            progressBar.setValue(progress);
        }
    }

    public void someMethod(){
        ClassB classB = new ClassB();
        classB.addPropertyChangeListener(this);
        classB.execute();
    }
}

class ClassB extends SwingWorker<Void, Void> {
        /*
         * Main task. Executed in background thread.
         */
        @Override
        public Void doInBackground() {
            Random random = new Random();
            int progress = 0;
            //Initialize progress property.
            setProgress(0);
            //Sleep for at least one second to simulate "startup".
            try {
                Thread.sleep(1000 + random.nextInt(2000));
            } catch (InterruptedException ignore) {}
            while (progress < 100) {
                //Sleep for up to one second.
                try {
                    Thread.sleep(random.nextInt(1000));
                } catch (InterruptedException ignore) {}
                //Make random progress.
                progress += random.nextInt(10);
                setProgress(Math.min(progress, 100));
            }
            return null;
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-08T13:33:51.017

如果您想通过按下 ClassA 上的按钮来更新进度条，我仍然建议 Sujay 的解决方案，但是您需要使用 Runnable 上下文调用您的方法。避免在 Event Dispatching Thread 的上下文中执行可能会阻止更新 progressBar 的操作很重要

```
public void someMethod(){
    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {

            // Some stuff
            classB.addPropertyChangeListener(this);
            classB.execute();

        }
    });

} 
```

# java - JSF2 无法将值传递给新的弹出窗口

> ID：12313263
> 
> 赞同：0
> 
> 时间：2012-09-07T06:59:36.893
> 
> 标签：java, jsf

我遇到了一些代码问题。现在我尝试修改/删除个人信息，但是我输入了一个无效值尝试修改/删除，它仍然弹出一个新窗口。我不知道如何修改这些代码，因为我输入了一个无效值，它不会弹出一个窗口。我还有其他问题。当我输入一个有效值时，该值不能传递给弹出窗口，就像我输入一个名字去抓取id值，该值不能传递给弹出窗口，我怎么能喜欢它。谢谢大家！

HTML

```
<h:panelGrid columns="3" cellspacing="20">
     <h:outputLabel for="name" value="Modify Name"/> <p:inputText value="#{modify.enName}"/>
     <h:commandButton value="Modify System"  style="height:35px" onclick="window.open('#{modify.domodify()}','modify',
                                                      'width=500,height=400,status=yes,resizable=yes,scrollbars=yes') ; return false;"/>
</h:panelGrid> 
```

Java 代码

```
 public String domodify() {
    try {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("com.mycompany_SuneCoolingSystem_war_1.0-SNAPSHOTPU");
        EmployeeJpaController jpaController = new EmployeeJpaController(null, emf);
        EntityManager e = jpaController.getEntityManager();
        Query q = e.createNamedQuery("Employee.findByEnName");
        q.setParameter("enName", getEnName());
        System.out.println(getEnName());
        List resultList = q.getResultList();
        Employee result = (Employee) resultList.get(0);

        id = result.getId();
        name = result.getName();
        idNumber = result.getIdNumber();
        constellation = result.getConstellation();
        email = result.getEmail();
        enName = result.getEnName();

        rego="CRUD/Modify.xhtml";
    } catch (Exception ex) {
        FacesContext context = FacesContext.getCurrentInstance();
        context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_WARN, "No Man", ""));
        rego = "index.xhtml";
    }
    return rego;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:24:31.150

```
onclick="window.open('#{modify.domodify()}','modify', 'width=500,height=400,status=yes,resizable=yes,scrollbars=yes') 
```

此代码表示*单击时，打开一个新窗口并执行操作以检查返回的 URL。*在执行任何逻辑之前打开窗口。

您应该对 modify with `f:ajax`（或您的组件库等效项，如果需要）`onevent`执行 ajax 调用，并在 ajax 调用成功结束并返回预期值时使用来启动正确的 javascript。

请参阅[JSF 2：如何在同一输入中显示不同的 ajax 状态？](https://stackoverflow.com/questions/7043840/jsf-2-how-show-different-ajax-status-in-same-input)看一个处理的例子`onevent`。

# android - 将音频从 android 应用程序流式传输并播放到任何可用的扬声器，如 A2DP、汽车扬声器等

> ID：12313264
> 
> 赞同：13
> 
> 时间：2012-09-07T06:59:43.847
> 
> 标签：android, audio-streaming, docking, bluetooth-sco

从我的 android 应用程序中，我想将音频流式传输到任何可用的扬声器，如`A2DP`扬声器、`docking`扬声器或`car`扬声器。

为此，我想使用蓝牙连接并通过蓝牙连接流式传输......

我看到了以下链接

[在android上如何从a2dp重新路由音频](https://stackoverflow.com/questions/4580411/on-android-how-to-reroute-audio-from-a2dp)

[setBluetoothA2dpOn（布尔值）](http://developer.android.com/reference/android/media/AudioManager.html#setBluetoothA2dpOn%28boolean%29)

[Android 2.3：如何从 SCO 切换到 A2DP 以获得功能强大的蓝牙扬声器？](https://stackoverflow.com/questions/10920643/android-2-3-how-do-i-switch-from-sco-to-a2dp-for-a-capable-bluetooth-speaker)

但是我到处都发现了相同的..即

```
public void setBluetoothA2dpOn (boolean on)

This method is deprecated.
Do not use. 
```

请指导我如何做到这一点..或者建议是否可以使用其他方式完成..任何帮助/建议表示赞赏。

**编辑**：

清单中的许可：

```
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" /> 
```

代码 ：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    layout = (RelativeLayout) findViewById(R.id.layout);
    text = (TextView) findViewById(R.id.editText1);
    scoSwitch = (ToggleButton) findViewById(R.id.switch1);
    try {
        mp1 = MediaPlayer.create(this, R.raw.jc_cm);
        mp2 = MediaPlayer.create(this, R.raw.rp);
        amanager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
        //amanager.setBluetoothA2dpOn(true);
                } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public void onSCOswitch(View view){
    if (scoSwitch.isChecked()){
        amanager.setBluetoothScoOn(true);
        amanager.startBluetoothSco();
        Log.d("Bluetooth", "SCO on");
        amanager.setMode(AudioManager.MODE_IN_COMMUNICATION);
    }
    else{
        amanager.stopBluetoothSco();
        amanager.setBluetoothScoOn(false);
        amanager.setBluetoothA2dpOn(true);
        Log.d("Bluetooth", "SCO off");
        amanager.setMode(AudioManager.MODE_NORMAL);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T12:58:36.520

我推荐你这个链接请试试这个

> [Android：通过 Sco 蓝牙耳机播放声音](https://stackoverflow.com/questions/7212783/android-playing-sound-over-sco-bluetooth-headset)
> 
> [TTS 输出总是去 A2DP](https://stackoverflow.com/questions/6963461/tts-output-always-going-to-a2dp)

我觉得这个链接可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T07:29:17.113

这是服务中蓝牙 A2DP 的实现。您可以参考此代码并构建自己的代码。

[A2DP蓝牙服务](http://www.devdaily.com/java/jwarehouse/android/core/java/android/server/BluetoothA2dpService.java.shtml)

# android - 带有 startActivityForResult 的 android launchMode singleTask

> ID：12313270
> 
> 赞同：2
> 
> 时间：2012-09-07T06:59:58.563
> 
> 标签：android, android-activity

我们需要强制用户在他/她第一次启动应用程序时设置密码。所以我们有我们的主要活动，使用`launchMode=singleTask`它开始密码设置活动`startActivityForResult`。

如果他/她从密码设置页面点击返回，我们还希望用户回到他们的家，因此我们将完成主要活动的代码放入其中，`onActivityResult`如果它收到`RESULT_CANCELLED`. 但是，如果用户点击主页并重新进入我们的应用程序，我们希望再次显示密码设置页面。但在这种情况下，它将被销毁（因为主要活动`launchMode`是`singleTask`）并返回`RESULT_CANCELLED`到我们的主要活动导致它完成。

所以问题出在主要活动上，我们无法区分点击返回和点击主页然后重新进入应用程序。

无论如何，在保持`launchMode`as的同时满足这个要求`singleTask`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T01:24:11.957

我最近有一个非常相似的问题。

我的建议是，当您获得`RESULT_CANCELLED`.

相反，请执行以下操作：

```
protected void onActivityResult(int requestCode, int resultCode, Intent intent) {   

    if (resultCode == Activity.RESULT_CANCELED) {

        if (/*TEST IF A USER IS SIGNED IN*/) {

            //IF SIGNED IN PROCEED TO MAIN ACTIVITY
        }
    // OTHERWISE FORCE THEM TO SIGNIN/REGISTER/WHATEVER AGAIN 
    // WITH ANOTHER CALL TO startActivityForResult
    ... 
```

这是解决您问题的一种信封方法，但这种模式对我有用。

对我来说，我的身份验证/注册都是在`Abstarct Class`扩展的`Activity`. 然后我的每一项活动都扩展了这个类。我将 Auth/Reg 方法调用放在`onResume()`this`Abstarct Class`中。

当`startActivityForResult`在方法中启动a`onResume()`并且失败时，我不`finish()`进行活动，而只是让应用程序继续并让类处理要呈现的 Reg/Auth 表单。它将通过检查各种标志来确定它要执行的操作来执行此操作。

这种方法的额外好处是，每一个`Activity`可能扩展这个抽象类的东西都会在每次使用它时获得安全检查的额外好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:08:03.580

**onBackPressed()**用于回击

> 当活动检测到用户按下返回键时调用。默认实现只是完成当前活动，但您可以覆盖它来做任何您想做的事情。

[http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29](http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29)

&& **onPause()**用于主屏幕

（虽然它也可能是由于其他事情，比如你的下一个活动或切换到另一个应用程序） [http://developer.android.com/reference/android/app/Activity.html#onPause%28%29](http://developer.android.com/reference/android/app/Activity.html#onPause%28%29)

**更新 ：**

为什么不使用 Sharedpreferences 并检查应用程序是否首次运行并设置密码/休息字段，而不是使用您现在使用的方法。

# azure - Azure 上的 FQDN 在哪里？

> ID：12313271
> 
> 赞同：1
> 
> 时间：2012-09-07T07:00:11.650
> 
> 标签：azure, azure-sql-database

我正在尝试将我的 SQL Server 2008 数据库迁移到 Azure，但我找不到从 SQL Server Management Studio 连接的 FQDN。我已经找了两天了，一无所获。在 Web 界面 (https://manage.windowsazure.com/)、google 和所有其他地方。每个人都只是假设读者知道 FQDN 在哪里。

我试过`servername.database.windows.net`了，来自 Azure Web 界面的“管理 URL”链接都失败了。数据库防火墙已设置为允许我当前的 IP 地址。我在哪里可以获得连接到 sql 数据库的 FQDN？

我需要这个，因为我正在使用 ASP.Net MVC3 进行数据库优先开发，而不是代码优先。如果也有关于部署它的教程会很有帮助（因为我只找到了代码优先开发的教程）。

之前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:34:02.850

如上所示，您确实拥有正确的 SQL 数据库 FQDN 名称，并且您的连接问题与 FQDN 名称无关，因此您需要先解决连接问题。

以下文章提供了解决问题的广泛步骤：

[http://social.technet.microsoft.com/wiki/contents/articles/1719.windows-azure-sql-database-connectivity-troubleshooting-guide.aspx](http://social.technet.microsoft.com/wiki/contents/articles/1719.windows-azure-sql-database-connectivity-troubleshooting-guide.aspx)

# joomla - 错误：调用成员函数 getKeyName() - Joomla 2.5 的组件

> ID：12313272
> 
> 赞同：3
> 
> 时间：2012-09-07T07:00:15.233
> 
> 标签：joomla, joomla2.5

我的组件出现致命错误。假设组件名称是 com_shirts，这是我的代码，我的代码在 administrator/component/com_shirts/controllers/code.php

```
<?php
defined('_JEXEC') or die;

jimport('joomla.application.component.controllerform');

class ShirtsControllerCode extends JControllerForm{
   protected $view_list = 'codes';
} 
```

我在管理员/组件/com_shirts/controllers/codes.php 中的代码

```
<?php
defined('_JEXEC') or die;

jimport('joomla.application.component.controlleradmin');

class ShirtsControllerCodes extends JControllerAdmin{
   protected $text_prefix = 'COM_SHIRTS';

   function getModel($name='Code', $prefix='ShirtsModel', $config=array('ignore_request'=>TRUE)){
      $model = parent::getModel($name, $prefix, $config);

      return $model;
   }
} 
```

我在管理员/组件/com_shirts/models/code.php 中的代码

```
<?php
defined('_JEXEC') or die;

jimport('joomla.application.component.modeladmin');

class ShirtsModelCode extends JModelAdmin{

   function getTable($type='Code', $prefix='ShirtsTable', $config=array()){
      return JTable::getInstance($type, $prefix, $config);
   }

   function getForm($data=array(), $loadData=TRUE){
      $form = $this->loadForm();

      return $form;
   }
} 
```

我在管理员/组件/com_shirts/models/codes.php 中的代码

```
<?php
defined('_JEXEC') or die;

jimport('joomla.application.component.modellist');

class ShirtsModelCodes extends JModelList{

   function getItems(){
      $items = parent::getItems();

      foreach($items as &$item){
         $item->url = 'index.php?option=com_shirts&amp;task=code.edit&amp;code_id='.$item->code_id;
         $item->event_description = substr($item->code_desc, 0);
      }

      return $items;
   }

   function getListQuery(){
      $query = parent::getListQuery();

      $query->select('*');
      $query->from('#__shirts_codes');

      return $query;
   }
} 
```

我在管理员/组件/com_shirts/tables/code.php 中的代码

```
<?php
defined('_JEXEC') or die;

class ShirtsTableCode extends JTable{

   public function __construct(&$dbo){
      parent::__construct('#__shirts_codes', 'code_id', $dbo);
   }
} 
```

我在管理员/组件/com_shirts/views/codes/view.html.php 中的代码

```
<?php
defined('_JEXEC') or die;

jimport('joomla.application.component.view');

class ShirtsViewCodes extends JView{
   protected $codes;

   function display($tmpl=NULL){

      $this->codes = $this->get('Items');

      $this->toolbar();

      parent::display($tmpl);
   }

   function toolbar(){
      JToolBarHelper::title(JText::_('HEADER'));

      JToolBarHelper::addNew('code.add');
      JToolBarHelper::editList('code.edit');

      JToolBarHelper::divider();

      JToolBarHelper::publishList('codes.publish');
      JToolBarHelper::unpublishList('codes.unpublish');

      JToolBarHelper::divider();

      JToolBarHelper::archiveList('codes.archive');
      JToolBarHelper::trash('codes.trash');

      JToolBarHelper::divider();

   }
} 
```

我在管理员/组件/com_shirts/views/codes/tmpl/default.php 中的代码

```
<?php defined('_JEXEC') or die; ?>

<form action="index.php?option=com_shirts&amp;view=codes" method="post" name="adminForm" id="adminForm">

   <table class="adminlist">
      <thead>
         <tr>
            <th style="width: 1%">
               <input type="checkbox" name="checkall-toggle" value="" onclick="checkAll(this)" />
            </th>
         </tr>
      </thead>
      <tbody>
         <?php foreach($this->codes as $i=>$code):
            $url = 'index.php?option=com_shirts&amp;view=code&amp;task=code.edit&amp;event_id='.$code->code_id;
         ?>
         <tr class="row<?php echo $i%2; ?>">
            <td class="center">
               <?php echo JHtml::_('grid.id', $i, $code->code_id); ?>
            </td>

            <td class="center">
               <a href="<?php echo $code->url; ?>">
                  <?php echo $this->escape($code->code); ?>
               </a>
            </td>

            <td>
               <a href="<?php echo $code->url; ?>">
                  <?php echo $this->escape($code->code_desc); ?>
               </a>
            </td>
         </tr>
         <?php endforeach; ?>
      </tbody>
   </table>

   <input type="hidden" name="task" value="" />
   <input type="hidden" name="boxchecked" value="0" />
   <?php echo JHtml::_('form.token'); ?>
</form> 
```

我在管理员/组件/com_shirts/views/code/tmpl/edit.php 中的代码

```
<?php defined('_JEXEC') or die; ?>
<form
   method="post"
   name="adminForm"
   class="form-validate"
   action="index.php?option=com_shirts&amp;code_id=<?php echo $this->code->code_id; ?>"
>

   <div class="width-50 fltlft">
      <fieldset class="adminform">
         <ul class="adminformlist">
            <?php foreach($this->form->getFieldset('required') as $field): ?>
               <li>
                  <?php echo $field->label; ?>
                  <?php echo $field->input; ?>
               </li>
            <?php endforeach; ?>
      </fieldset>
   </div>

   <div class="width-40 fltrt">
      <fieldset class="adminform">
         <ul class="adminformlist">
            <?php foreach($this->form->getFieldset('optional') as $field): ?>
               <li>
                  <?php echo $field->label; ?>
                  <?php echo $field->input; ?>
               </li>
            <?php endforeach; ?>
         </ul>
      </fieldset>
   </div>
   <input type="hidden" name="task" value="" />
   <?php echo JHtml::_('form.token'); ?>
</form> 
```

我在管理员/组件/com_shirts/views/code/view.html.php 中的代码

```
<?php
defined('_JEXEC') or die;

jimport('joomla.application.component.view');

class ShirtsViewCode extends JView{
   protected $code;
   protected $form;

   function display($tmpl=NULL){

      $this->event = $this->get('Item');
      $this->form = $this->get('Form');

      $this->toolbar();

      parent::display($tmpl);
   }

   function toolbar(){
      if($this->code->code_id){
         JToolBarHelper::title(JText::_('COM_SHIRTS_EDIT'));
      }else{
         JToolBarHelper::title(JText::_('COM_SHIRTS_ADD'));
      }

      JToolBarHelper::apply('code.apply', 'JTOOLBAR_APPLY');
      JToolBarHelper::save('code.save', 'JTOOLBAR_SAVE');
      JToolBarHelper::save2new('code.save', 'JTOOLBAR_SAVE_AND_NEW');

      JToolBarHelper::divider();

      JToolBarHelper::cancel('code.cancel');
   }
} 
```

当我进入组件视图时，出现此错误

```
"PHP Fatal error: Call to a member function getKeyName() on a non-object in /var/www/joomla/libraries/joomla/application/component/controllerform.php on line 393" 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:23:44.087

好的，那是我的错，我在 manifest.xml 中有错误，现在一切都很好

在清单中没有线

```
<folder>tables</folder> 
```

# jakarta-ee - 将 MDB 执行推迟到特定的日期/时间

> ID：12313275
> 
> 赞同：1
> 
> 时间：2012-09-07T07:00:21.420
> 
> 标签：jakarta-ee, ejb, jms, deferred-execution

我有一个在 WebLogic 10.3.5 上运行的 Java EE 5 MDB 驱动的 JMS 系统，用于通过电子邮件/IM/SMS 发送通知。我需要指定一个发布公告的日期/时间窗口。

据我所知，没有选项可以在某个日期/时间传递/执行 JMS 消息。

我的公告列表在一个 DB 表中，所以目前我有一个 EJB 3.0 Timer Bean，它每 2 分钟轮询一次表，并将消息发送到 JMS 队列以获取该窗口中的新公告。

它可以工作，但我不喜欢 DB 表轮询是系统中的一个关键点，它不会像 JMS 部分那样根据需求进行扩展。我对表的状态列进行了分区，但即使这样，在两个日期执行 BETWEEN 也不会随着数据的增长而很好地扩展。

人们能否提出一个可扩展的解决方案，让我放弃表轮询，只在创建公告时创建 JMS 消息，将它们的执行推迟到指定的日期/时间？至关重要的是，延迟执行应该是持久的，在服务器重新启动后仍然存在，并在服务器重新启动时自动继续“等待”执行。

# c++ - 删除后哪些指针悬空？

> ID：12313279
> 
> 赞同：0
> 
> 时间：2012-09-07T07:01:10.993
> 
> 标签：c++, pointers, memory-management

如果您执行以下操作：

```
ClassType *foo = new ClassType();
ClassType *moo = foo;
delete foo; 
```

然后继续前进，是否还有悬空指针？我认为不，因为您只声明了一个“新”，然后将其删除，但我想确定...

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T07:11:30.443

您创建了一个对象并将其删除。您的两个指针仍指向该对象先前占用的内存地址，但该对象已被删除，通常这是悬空指针的公认定义 - 指向不再包含活动对象的某些内存。

没有内存泄漏，*除非*您尝试通过任一指针访问现在已删除的对象，否则您的程序不会导致问题。

使用 std::shared_ptr 或 std::unique_ptr 之类的东西可以帮助您以更安全的方式管理内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T08:20:58.517

在 C++ 中，`delete`运算符调用给定参数的析构函数，并将分配的内存`new`返回给堆。时期。它什么也不做，这意味着您的指针指向堆上的某个位置，只是指向刚刚被取消分配的内存位置。所以那些指针变量仍然包含它之前指向的地址。这称为“悬空指针”。现在，如果您将 -`moo`和分配`foo`给`NULL`after `delete`，您将能够轻松识别您的指针是否指向有效位置或 NULL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T07:03:51.493

如果你的意思是悬空指针，是的，指针`moo`和`foo`现在无效，因为它指向已经被删除的东西。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-07T07:11:16.223

*foo*和*moo*指向同一个动态对象，使用以下命令创建：

```
ClassType *foo = new ClassType(); 
```

因此，如果您*删除*foo ， *moo*也会被“删除”，或者它变成一个空指针。

# android - 为什么我在 SAX 解析时收到 IOException

> ID：12313280
> 
> 赞同：0
> 
> 时间：2012-09-07T07:01:11.400
> 
> 标签：android

在检索值时，我无法检索值。为什么我在下面给出的代码中得到 IOexcetion？处理程序有问题，但我无法弄清楚。

```
public SitesList opCodeRequest(String code)
    {
        SitesList objsitelist =null;
        try {
            HttpClient client = new DefaultHttpClient();
            HttpGet method= new HttpGet();
            method.setURI(new URI(AppConstatnt.OPCODE_URL+code));

            HttpResponse response=client.execute(method);           
            HttpEntity entity=response.getEntity();         
            InputStream stream=entity.getContent();

            Log.e("b4 execute in login","aditya");

            SAXParserFactory spf = SAXParserFactory.newInstance(); 
            SAXParser sp = spf.newSAXParser(); 
            XMLReader xr = sp.getXMLReader(); 
            OPCodeHandler myopcodeHandler = new OPCodeHandler();
            xr.setContentHandler(myopcodeHandler); 

            xr.parse(new InputSource(stream)); 
            objsitelist = myopcodeHandler.getSiteList();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (URISyntaxException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();//error
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        }
        return objsitelist;

    } 
```

处理程序

```
public class OPCodeHandler extends DefaultHandler {

    boolean currentElement = false;
    String currentValue = "";
    SitesList siteobject;

    public SitesList getSiteList() {
        return siteobject;
    }

    public void setSiteList(SitesList objsite) {
        siteobject = objsite;
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        currentElement = true;
        currentValue = "";
        if (localName.equalsIgnoreCase("opcode")) {
            siteobject = new SitesList();
        }
    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {

        if (currentElement) {
            currentValue = new String(ch, start, length);
            currentElement = false;
        }
    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        currentElement = false;
        if (localName.equalsIgnoreCase("tsip")) {
            siteobject.setTsip(currentValue);
        }
        if (localName.equalsIgnoreCase("ssip")) {
            siteobject.setSsip(currentValue);
        }
        if (localName.equalsIgnoreCase("brand")) {
            siteobject.setBrand(currentValue);
        }
        if (localName.equalsIgnoreCase("balance")) {
            siteobject.setBalance(currentValue);
        }
        if (localName.equalsIgnoreCase("rates")) {
            siteobject.setRates(currentValue);
        }

        if (localName.equalsIgnoreCase("domain")) {
            siteobject.setDomain(currentValue);
        }
        if (localName.equalsIgnoreCase("operator")) {
            siteobject.setOperator(currentValue);
        }
        if (localName.equalsIgnoreCase("active")) {
            siteobject.setActive(currentValue);
        }
        if (localName.equalsIgnoreCase("opcode")) {
            setSiteList(siteobject);
        }

    }

} 
```

我正在检索值的活动。

```
@Override
        protected void onPostExecute(SitesList result) 
        {
            if(this.objprogress.isShowing())
            {
                this.objprogress.dismiss();
            }

            tsip = result.getTsip();
            ssip = result.getSsip();
            brand = result.getBrand(); 
            balance = result.getBalance();
            rates = result.getRates();
            domain = result.getDomain();
            operator = result.getOperator();
            active = result.getActive();
        } 
```

日志猫：

```
FATAL EXCEPTION: main
java.lang.NullPointerException
at com.sample.test.SampleAppActivity$Communicator.onPostExecute(SampleAppActivity.java:161)
at com.sample.test.SampleAppActivity$Communicator.onPostExecute(SampleAppActivity.java:1)

at android.os.AsyncTask.finish(AsyncTask.java:417)
at android.os.AsyncTask.access$300(AsyncTask.java:127)
at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)

at android.os.Handler.dispatchMessage(Handler.java:99)

at android.os.Looper.loop(Looper.java:130)

at android.app.ActivityThread.main(ActivityThread.java:3687)

at java.lang.reflect.Method.invokeNative(Native Method)

at java.lang.reflect.Method.invoke(Method.java:507)

at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)

at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)

at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:11:19.367

你得到一个空指针异常。这意味着一个变量或某些东西在它不应该是空的地方。我认为首先，您应该尝试正确初始化所有变量。

例如：

```
SitesList objsitelist =null; 
```

应该像这样初始化：

```
SitesList objsitelist =new SitesList(); 
```

如果您已完成此操作，请回复，但仍然无法正常工作。

# android - Android：如何知道数据库表是否已经存在？

> ID：12313284
> 
> 赞同：0
> 
> 时间：2012-09-07T07:01:27.543
> 
> 标签：android, database, sqlite

我正在使用 SQLite 数据库来存储一些字符串。当我第一次启动应用程序时，我正在使用此代码添加这些字符串。

```
DatabaseHandler db = new DatabaseHandler(this);
db.addProducts(//lot of strings appended to make a single String);
db.close(); 
```

数据库处理程序是：

```
public class DatabaseHandler extends SQLiteOpenHelper {

    private static final int DATABASE_VERSION = 1;
    public static final String DATABASE_NAME = "my_db";
    private static final String TABLE_NAME = "products";
    private static final String KEY_NAME = "pname";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        String CREATE_PRODUCTS_TABLE = "CREATE TABLE " + TABLE_NAME + "("
                + KEY_NAME + " TEXT" + ")";
        db.execSQL(CREATE_PRODUCTS_TABLE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);
    }

    public void addProducts(String product_name) {

        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(KEY_NAME, product_name); // Product Name
        db.insert(TABLE_NAME, null, values);
        db.close();
    }

    public String getProducts() {

        SQLiteDatabase db = this.getReadableDatabase();
        String selectQuery = "SELECT  * FROM " + TABLE_NAME;
        Cursor cursor = db.rawQuery(selectQuery, null);
        String s = "default";
        if (cursor.moveToFirst()) {
            int n = cursor.getCount();
            s = cursor.getString(0);
        }
        cursor.close();
        return s;
    }
} 
```

问题是如果我不检查表是否`products`存在，我会在`db.addProducts("");`每次启动应用程序时调用。并且游标计数每次都会增加`1`，最终会说`need to extend db`类似的话。我如何检查表是否已经存在？

我只能找到这个`How to check if database exists`：：

```
public static boolean checkDataBase(String DB_FULL_PATH) {
    SQLiteDatabase checkDB = null;
    try {
        checkDB = SQLiteDatabase.openDatabase(DB_FULL_PATH, null,
                SQLiteDatabase.OPEN_READONLY);
        checkDB.close();
    } catch (SQLiteException e) {
        // database doesn't exist yet.
    }
    return checkDB != null ? true : false;
} 
```

在这里，我被困住了。如何获取数据库的路径？

此外，如果我检查表是否存在而不是数据库，这将很有用。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:05:09.883

在原始查询中使用它，`CREATE TABLE IF NOT EXISTS "+TABLENAME+";`这不会每次都创建一个表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:17:24.837

您的数据库中只有一个表，首先检查您的数据库是否已创建

```
 private boolean checkDataBase() {
       // TODO Auto-generated method stub
          File dbFile = new File(DB_PATH + DB_NAME);
          return dbFile.exists();
   } 
```

分析数据库使用 SQlite Database Brouser

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:28:48.820

在我看来，一个更优雅的解决方案是拥有类似共享参考的东西。我想你想这样做，这样你就可以通过“用户第一次启动应用程序了吗？”的方式来检查一些东西。

你可以这样做：

```
public void firstRunPreferences(){
            Context mContext = this.getApplicationContext();
            mPrefs = mContext.getSharedPreferences("myAppPrefs", 0);
        }

public void setRunned(){
        SharedPreferences.Editor editor = mPrefs.edit();
        editor.putBoolean("firstRun", false);
        editor.commit();
    }

    public boolean getFirstRun(){
        return mPrefs.getBoolean("firstRun", true);
    } 
```

第一种方法为您获取应用程序的 sharedPreferences 实例，而第二种方法操作并添加一个布尔值。

您可以在任何时候调用该方法（例如，当您第一次实例化 DB Helper 类时，将 setRunned 替换为 dbCreated）。

祝你编码好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T07:32:39.817

我认为这对 PATH-Question 会有所帮助。在教程中找到：[http](http://www.vogella.com/articles/AndroidSQLite/article.html#sqliteoverview) ://www.vogella.com/articles/AndroidSQLite/article.html#sqliteoverview “访问 SQLite 数据库涉及访问文件系统。这可能很慢。因此建议异步执行数据库操作，例如在 AsyncTask 类中。

如果您的应用程序创建一个数据库，该数据库默认保存在目录 DATA/data/APP_NAME/databases/FILENAME 中。

上述目录的各个部分是根据以下规则构建的。DATA 是 Environment.getDataDirectory() 方法返回的路径。APP_NAME 是您的应用程序名称。FILENAME 是您在应用程序代码中为数据库指定的名称。"

因此，对于一个 db，文件系统中存在一个文件。那就是/data/data/package.name/databases。package.name 是应用程序的包名。databases 是您的数据库的名称。

# android - 适用于 Android 或 iOS 的人脸识别工具

> ID：12313285
> 
> 赞同：0
> 
> 时间：2012-09-07T07:01:30.717
> 
> 标签：android, ios, face-recognition

我正在尝试开发一种通过面部签到的移动工具。此应用程序用于员工地点和时间登录。该应用程序将简单地拍照或扫描人脸，在数据库中查找匹配项，然后登录该员工，然后另一名员工将简单地向相机展示他的脸以登录他/她的班次。

我正在寻找可用的面部识别产品、合适的库或任何其他建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:04:09.430

Lambda Labs Face API 是您所需要的

[http://api.lambdal.com/?ref=homepage](http://api.lambdal.com/?ref=homepage)

虽然它仍处于测试阶段。每月前 4000 次检测和 1000 次识别是免费的 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:07:00.550

在 Android 上，您可以使用操作系统中已有的[FaceDetector 类。](http://developer.android.com/reference/android/media/FaceDetector.html)[你可以在这里](http://www.developer.com/ws/android/programming/face-detection-with-android-apis.html)找到一个例子。

# sql-server - SQL-Server 用 NULL 值替换空单元格

> ID：12313286
> 
> 赞同：3
> 
> 时间：2012-09-07T07:01:31.277
> 
> 标签：sql-server, excel, ssis, null

我正在使用 SSIS 将 excel 数据移动到临时 sql 服务器表并从那里移动到目标表。所以我的临时表只包含 varchar 列 - 我的目标表需要某些列的货币值。在我的临时表中，原始的 excel 列有一个公式，但在某些行上留下了一个**空单元格**，该单元格由临时表和一个空单元格表示。但是，当我将其中一列转换为货币时，这些原本空白的单元格在目标列中变为**0,00 。**

当然这不是我想要的，那么我怎样才能在其中获得**NULL**值呢？请记住，想要的 0,00 可能会出现在这些列之一中。

我想我需要编辑我的临时表以将空单元格变为 NULL。我可以从 SSIS 包中执行此操作，还是可以使用表的设置？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T07:11:05.760

对于现有数据，您可以编写一个简单的脚本，将数据更新为空的 NULL。

```
UPDATE YourTable SET Column = NULL WHERE Column = '' 
```

对于插入，如果为空，您可以使用[NULLIF](http://msdn.microsoft.com/en-us/library/ms177562.aspx)函数插入空值

```
INSERT INTO YourTable (yourColumn)
SELECT NULLIF(sourceColum, '') FROM SourceTable 
```

编辑：对于多列更新，您需要结合两种解决方案并编写如下内容：

```
UPDATE YourTable SET 
Column1 = NULLIF(Column1, '')
, Column2 = NULLIF(Column2, '') 
WHERE Column1 = '' OR Column2 = '' 
```

ETC

这将更新所有

# xslt-1.0 - xslt结果树改变元素位置

> ID：12313287
> 
> 赞同：1
> 
> 时间：2012-09-07T07:01:38.640
> 
> 标签：xslt-1.0, xslt-grouping

是否可以移动 XSLT 处理器生成的结果。例如，在下面的情况下，我希望 Benefit type="Main" 及其子元素在 Benefit type="Rider" 之前显示两个单独的模板适用于 Rider 和 Main，因此我认为 xsl:sort 不能应用，因为它排序在单个集合中。

```
<Policy>
            <Benefit type="Rider">
                <ProductAbbreviatedName>BBB</ProductAbbreviatedName>
                <ProductCode>U30</ProductCode>
                <ProductName>BBB</ProductName>
            </Benefit>
            <Benefit type="Main">
                <ProductAbbreviatedName>AAA</ProductAbbreviatedName>
                <ProductCode>231Y</ProductCode>
                <ProductName>AAAA</ProductName>
            </Benefit>

</Policy> 
```

请就一些想法提出建议以执行所需的输出。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:49:09.100

**只需在您的代码中使用**：

```
<xsl:apply-templates select="Benefit[@type='Main']"/>
<xsl:apply-templates select="Benefit[@type='Rider']"/> 
```

# ruby-on-rails - 更改模型的输入名称

> ID：12313291
> 
> 赞同：7
> 
> 时间：2012-09-07T07:01:46.403
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, simple-form, activemodel

使用`ActiveAttr`：

```
class Filter
  include ActiveAttr::Model
  attribute term
  # Overriding to_key, to_param, model_name, param_key etc doesn't help :(
end

class SpecialFilter < Filter
end 
```

如何覆盖 ActiveModel**为所有子类生成（相同的）预定义输入名称**？

```
= form_for SpecialFilter.new, url: 'xx' do |f|
  = f.text_field :term 
```

所以`<input name='special_filter[term]' />`我需要得到`<input name='filter[term]' />`

**注意：**场景要复杂得多（使用 simple_form 和 radios/checkboxes/dropdowns 等），所以请不要建议更改类的名称或类似的解决方法。我确实需要表单构建器使用**一致的名称。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T07:22:22.650

尝试这个 ：

```
= form_for SpecialFilter.new, as: 'filter', url: 'xx' do |f|
  = f.text_field :term 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-08T12:34:40.193

正如 Divya Bhargov 回答的那样，如果您查看源代码，您会发现内部调用堆栈应该如下所示。

```
 # actionpack/lib/action_view/helpers/form_helper.rb
 ActiveModel::Naming.param_key(SpecialFilter.new)

 # activemodel/lib/active_model/naming.rb 
 SpecialFilter.model_name 
```

所以，如果你真的想在你的模型级别做，你需要覆盖`model_name`你的类。

```
class SpecialFilter < Filter
  def self.model_name
    ActiveModel::Name.new(self, nil, "Filter")
  end
end 
```

此 ActiveModel::Name 初始化程序的参数是`klass, namespace = nil, name = nil`.

但`model_name`也用于其他地方，例如 error_messages_for，因此请谨慎使用。

# c++ - 为什么这个使用统一初始化的代码片段使用 g++4.6 而不是 g++4.7 编译？

> ID：12313292
> 
> 赞同：48
> 
> 时间：2012-09-07T07:01:52.307
> 
> 标签：c++, gcc, c++11, g++, uniform-initialization

请注意，*derived*使用 C++11 统一初始化语法来调用基类构造函数。

```
class base
{
    protected:
        base()
        {}
};

class derived : public base
{
    public:
        derived()
            : base{} // <-- Note the c++11 curly brace syntax
                     // using uniform initialization. Change the
                     // braces to () and it works.
        {}
};

int main()
{
    derived d1;

    return 0;
} 
```

g++4.6 编译这个，但是 g++4.7 没有：

```
$ g++-4.7 -std=c++11 -Wall -Wextra -pedantic curly.cpp -o curly
curly.cpp: In constructor ‘derived::derived()’:
curly.cpp:4:13: error: ‘base::base()’ is protected
curly.cpp:19:24: error: within this context 
```

这是怎么回事？

更新 1：它也可以在没有警告的情况下使用 clang++-3.1进行编译
更新 2：[看起来肯定是一个编译器错误。](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=54325)它显然已在 GCC 4.7.3 中修复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T22:52:10.573

GCC/libstdc++ 贡献者 Paolo Carlini[确认这是一个错误/回归](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=54325#c2)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T16:47:52.003

我找到了这个：

“草案说，初始化引用的初始化列表不是通过直接绑定来完成的，而是首先从初始化列表中的元素构造一个临时对象，然后将目标引用绑定到该临时对象”

因此，base{} 创建的临时对象是通过受保护的构造函数完成的，这可能会令人窒息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T17:18:33.100

这可能是因为在版本 4.7 C11 中添加了显式覆盖控制。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-18T16:46:45.210

用 icpc 编译它（英特尔编译器测试版本 11.1 -> 12.1）给出：

```
-bash-3.2$ icpc -std=c++0x test.c 
test.c(15): error: expected a declaration
          {}
          ^

test.c(12): error: expected a "("
              : base{} // <-- Note the c++11 curly brace syntax
                    ^

compilation aborted for test.c (code 2) 
```

编辑：但话又说回来，c++11 还没有在 icpc 中完全实现 [http://software.intel.com/en-us/articles/c0x-features-supported-by-intel-c-compiler/](http://software.intel.com/en-us/articles/c0x-features-supported-by-intel-c-compiler/)

与 g++ [http://gcc.gnu.org/gcc-4.7/cxx0x_status.html相同](http://gcc.gnu.org/gcc-4.7/cxx0x_status.html)

这清楚地表明它仍然是实验性的，所以很可能是一个错误。

# c# - 从 datagridview 内的组合框中选择一个项目

> ID：12313299
> 
> 赞同：0
> 
> 时间：2012-09-07T07:02:21.303
> 
> 标签：c#, winforms

我有一个`DataGridView`和两`ComboBox`列里面。在从第一个 ComboBox 控件中选择值时，我应该在第二个 ComboBox 中绑定数据。但是当我从第二个 ComboBox 中选择一个项目时，相同的事件会被多次触发。

我使用以下代码：

```
void Grid_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
    var cell = e.Control as ComboBox;
    if (cell != null)
    {
        cell.SelectedIndexChanged -= doWork;
        cell.SelectedIndexChanged += doWork;
    }
}

public void doWork(object sender, EventArgs e)
{
    string str="";
    var tb = datagrdADDTEMP.EditingControl as ComboBox;
    if (tb.SelectedValue != null)
    {
        str = tb.SelectedValue.ToString();
    }
} 
```

# java - 基本辅助数组和链表

> ID：12313303
> 
> 赞同：3
> 
> 时间：2012-09-07T07:02:26.843
> 
> 标签：java, arrays, linked-list, int

我对java相当陌生，所以想知道我是否可以获得一些基本的帮助。

我有一门课叫做时间表

```
public class Timetable
{   private String Month;
    private String Day;
    private int[] times;

public Timetable(String month, String Day, int[] times) 
    {
        this.month = month;
        this.day = day;
        //initalize various times.. 
```

此类与添加月、日和时间的时间表的另一个类（LinkedList）相关。像这样..

```
Add(new Timetable("May","Monday", **???**)); 
```

现在我需要添加数组中的时间并且变化，例如 {1,2,3,4} 或 {2,4,9} 并且只有 int[4] 索引。

关于我如何初始化时间并将 int[] 时间传递给创建时间表的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:04:32.567

除了其他答案之外，您还可以将构造函数签名调整为

```
public Timetable(String month, String Day, int... times) { /*...*/ } 
```

您的 Timetable 类中的用法将保持不变（`int...`参数映射到 s 数组`int`），但优点是调用将被简化为

```
LinkedList<Timetable> link = new LinkedList<Timetable>();

link.add(new Timetable("May", "Monday", 1, 2, 3, 4)); // array creation is now optional
link.add(new Timetable("May", "Monday", new int[]{1, 2, 3, 4})); // works as well
link.add(new Timetable("June", "Sunday", 5, 6, 7)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:06:18.573

您将在调用 Add 方法之前初始化数组：

```
int[] times = {1, 2, 3, 4};
Add(new Timetable("May", "Monday", times)); 
```

或者：

```
int[] times = {5, 6, 7};
Add(new Timetable("May", "Monday", times)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:15:10.453

您也可以像这样添加时间：

```
LinkedList<Timetable> link = new LinkedList<Timetable>();

link.add(new Timetable("May", "Monday", new int[]{1, 2, 3, 4}));
link.add(new Timetable("June", "Sunday", new int[]{5, 6, 7})); 
```

# eclipse - 如何导航到 Eclipse 中的最后一个光标位置？

> ID：12313308
> 
> 赞同：74
> 
> 时间：2012-09-07T07:02:50.040
> 
> 标签：eclipse, keyboard-shortcuts

最近，我从[Visual Studio](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio)切换到[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)。现在我错过了导航到 Eclipse 中最后一个光标位置的快捷方式。在 Visual Studio 中，同样可以借助`Ctrl`+`-`快捷方式来完成。

如何在 Eclipse 中执行此操作？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-09-07T08:27:16.387

去`Preferences / General / Keys`。您将能够查看或编辑以下绑定：

*   `Backward History`：默认是`Alt``←</kbd>`
*   `Forward History`：默认是`Alt``→</kbd>`

您也可以在工具栏中使用这些快捷方式（并查看键绑定）：

![在此处输入图像描述](../Images/06cbe9d1e12b9420c35bd5b066b2ccca.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-07T07:27:56.793

有`Alt``left arrow`和`Alt``right arrow`导航到上一个/下一个光标位置，并`Ctrl``Q`转到最后编辑的位置。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-02-03T15:29:56.733

我正在添加一个答案，因为我还不允许发表评论。尽管dystroy 的答案包含有关有用快捷方式的信息，但我对此并不满意，因为提到的Alt+left 快捷方式并不总是导航到最后一个光标位置（例如，在同一个文件中）。我不确定它在 Visual Studio 中是如何工作的，但在 IntelliJ 中，一个类似的快捷方式总是将光标移动到最后一个光标位置，即使在同一个文件中也是如此。我想在 Eclipse 中也有这样的功能。例如：我使用键盘的向下箭头键将光标依次移动到第 10、20、30 行。现在我在第 30 行，当我按 Alt+left 时，我希望光标转到第 20 行。按 Alt 后+left 再次我希望光标转到第 10 行。

在 Eclipse 中，当光标在文件 A 中并且我打开文件 B 并将光标在文件 B 中向下移动几行时，Alt+left 会将光标移动到文件 A，而不是将其移动到之前的光标位置文件 B。

我为这个问题创建了一个单独的问题： [如果它在同一个文件中并且没有被编辑，如何导航到 Eclipse 中的最后一个光标位置？](https://stackoverflow.com/questions/21483329/how-to-navigate-to-the-last-cursor-position-in-eclipse-if-it-is-in-the-same-file)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-03-02T22:39:30.773

在 Mac (OSX) 中，命令是 ⌘[ 和 ⌘]。它们是编码时非常方便的导航命令。

# javascript - 检查运动 jpeg 流

> ID：12313309
> 
> 赞同：3
> 
> 时间：2012-09-07T07:02:52.057
> 
> 标签：javascript, jquery, mjpeg

有什么方法可以检查[Motion JPEG](http://en.wikipedia.org/wiki/Motion_JPEG)流是否使用 JavaScript 或 jQuery 打开/工作/发送图像？

# jquery - 如何以编程方式重置表单？

> ID：12313312
> 
> 赞同：7
> 
> 时间：2012-09-07T07:02:59.400
> 
> 标签：jquery, html

我想在 JQuery 点击事件函数中重置表单。怎么做 ？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T07:04:09.717

最简单的：`$("form-selector-here")[0].reset()`但也可以看看：[Resetting a multi-stage form with jQuery](https://stackoverflow.com/questions/680241/resetting-a-multi-stage-form-with-jquery/680252)

请注意，jQuery 根本不是必需的，因为它可以`$(selector)[0]`获取原始 DOM 元素。你也可以说`document.getElementById("myFormId").reset()`。

```
​$("#btn1").click(function(){
    $("#form1")[0].reset();

    // OR
    document.getElementById("form1").reset();
});​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:04:58.310

这应该有效：

```
$("#formid")[0].reset(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T07:08:46.920

试试这个

```
$('#FormID').each (function(){
this.reset();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T07:09:48.277

你可以这样做：

```
$(function(){
    $('#resetForm').click(function(){
        $('form input[type=text]').val('');});
}); 
```

[jsfiddle](http://jsfiddle.net/ntcg3/25/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T08:55:08.230

在表格末尾添加：

```
<div style="display='none';" ><input type="reset" id="rst_form"></div> 
```

试试这个：

```
$('#rst_form').click() 
```

# java - 使用 Java 导出 MySQL 不起作用

> ID：12313315
> 
> 赞同：0
> 
> 时间：2012-09-07T07:03:14.860
> 
> 标签：java, mysql, export

这是我为导出数据库创建的代码。问题是，文件没有导出，代码没有显示错误信息。

```
public boolean exportDatabase(String fromServer,
                              String FileName,
                              String FilePath,
                              int ExportOpions) {
  try {     
    String dbName ="NMSAzzist";
    String dbUser = "root";
    String dbPass ="root";  
    String dumbPath = "C:\\Program Files\\MySQL\\MySQL Server 5.1\\bin\\";
    String executeCmd = dumbPath+"mysqldump -u "+dbUser+ "-p"+dbPass+" "+dbName+ "-r "+FilePath+ "";
    Process runtimeProcess = Runtime.getRuntime().exec(executeCmd);
    int processComplete = runtimeProcess.waitFor();
    if (processComplete == 1) { // if values equal 1 process failed
      JOptionPane.showMessageDialog(null, "Backup Failed");//display message
    } else if (processComplete == 0) {
      JOptionPane.showMessageDialog(null, "\n Backup created Successfully..");
      // display message
    }
    return true;
  } catch (final Exception ex) {
    NmsLogger.writeErrorLog("Database Connection Failed ", ex.toString());
    NmsLogger.writeDebugLog(ex);
    return false;
  } 
```

如何将数据库导出到`FilePath`名称中变量中指定的路径`FileName`？我该如何解决这个问题？

顺便说一句，我可以使用以下内容导入相同的内容吗？

```
String[] executeCmd = new String[]{"mysql", databaseName, "-u" + userName, "-p" + password, "-e"  + FileName }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:09:30.850

你没有忘记文件名吗？

```
String executeCmd =dumbPath+"mysqldump -u "+dbUser+ "-p"+dbPass+" "+dbName+ "-r "+FilePath+"\\"+Filename""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:17:36.117

使其为：

```
// you did not give file name.
String executeCmd = "cmd " + dumbPath+"mysqldump -u "+dbUser+ "-p"+dbPass+" "+dbName+ "-r "+FilePath+ "\\" + filename;

// I tried running I am getting error code 13. 
```

我认为你应该做：

```
if(processComplete != 0) {
   //error with error code
} else {
   //success
} 
```

代替

```
if (processComplete == 1) {// if values equal 1 process failed
      System.out.println("Backup failed");
}

else if (processComplete == 0) {
      System.out.println("Backup Success");
} 
```

因为返回的错误代码可能不是 0 和 1。

建议：使用[Apache Commons exec API](http://commons.apache.org/exec/)，这个比`Runtime.exec`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T07:49:43.570

您首先尝试您的 executeCmd 可以在 db 中成功运行。在您的 executeCmd 中是语法错误。您的代码在执行命令中留下文件名

```
String executeCmd = "/" + dumbPath + "mysqldump -u " + dbUser
                    + " -p" + dbPass + " " + dbName + " -r " + FilePath + "\\"
                    + FileName; 
```

[检查手册](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

这对我有用。

```
public class exportDataBase {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        exportDatabase("", "Sma_test.sql", "C:", 0);

    }

    public static boolean exportDatabase(String fromServer, String FileName,
            String FilePath, int ExportOpions) {
        try {

            String dbName = "dmsdev";
            String dbUser = "root";
            String dbPass = "root";

            String dumbPath = "C:\\Program Files\\MySQL\\MySQL Server 5.1\\bin\\";

            String executeCmd = "/" + dumbPath + "mysqldump -u " + dbUser
                    + " -p" + dbPass + " " + dbName + " -r " + FilePath + "\\"
                    + FileName;

            System.out.println(executeCmd);
            Process runtimeProcess = Runtime.getRuntime().exec(executeCmd);
            int processComplete = runtimeProcess.waitFor();

            System.out.println("processComplete: " + processComplete);

            if (processComplete == 1) {// if values equal 1 process failed
                System.out.println("Backup failed");
            }

            else if (processComplete == 0) {
                System.out.println("Backup Success");

            }
            return true;
        } catch (final Exception ex) {
            System.out.println("Connection failed");
            return false;
        }
    }

} 
```

# elasticsearch - 如何使用 mpdreamz Nest 进行构面搜索

> ID：12313319
> 
> 赞同：0
> 
> 时间：2012-09-07T07:03:41.103
> 
> 标签：elasticsearch

有人知道如何用 Nest 进行分面搜索吗？我的索引是[https://gist.github.com/3606852](https://gist.github.com/3606852) 想在“NumberEvent”中搜索一些关键字，如果关键字存在则显示结果。请帮帮我！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:02:35.957

`MyPoco`这是使用类存在并映射到您的弹性搜索文档的假设。如果不是，您可以使用`dynamic`，但您必须将基于 lambda 的字段选择器与字符串交换。

```
var result = client.Search<MyPoco>(s=>s
    .From(0)
    .Size(10)
    .Filter(ff=>ff.
        .Term(f=>f.Categories.Types.Events.First().NumberEvent.event, "keyword")
    )
    .FacetTerm(q=>q.OnField(f=>f.Categories.Types.Facets.First().Person.First().entity))
); 
```

`result.Documents`现在保存您的文件

`result.Facet<TermFacet>(f => f.Categories.Types.Facets.First().Person.First().entity);`现在拥有你的面

尽管从某种意义上说，您的文档似乎有点奇怪，但它已经包含带有计数的 Facets。

# c# - DLL项目应该是哪种类型的跨平台使用

> ID：12313320
> 
> 赞同：0
> 
> 时间：2012-09-07T07:03:41.957
> 
> 标签：c#, c++, ios, ipad, dll

我们有一个适用于 C# .NET 和 Apple iPad 的应用程序。此应用程序将执行类似的功能。为此，我们有一个协议层，我们正在考虑将其保留为通用代码。为此，我们正在考虑为协议模块创建一个 C++ dll，以便它可以在 C# 和 iPad 上使用。对于创建 C++ dll，我有一个基本问题：

在创建 dll 项目时，我们应该选择哪个选项？我们可以为 MFC、Win32、ATL 等创建一个 dll。什么是满足我要求的最佳选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:45:24.867

I recommend looking at [Mono](http://www.mono-project.com/Main_Page) for building C# apps on both Windows and iOS.

If you want to target the iPad, you need to build for iOS, not Mac OS.

You cannot build dynamic link libraries for iOS, only static libraries. Note, there are equivalents to DLLs on iOS, but only Apple can build them (or you can build them yourself if your iPad is jailbroken, but this will disqualify your app from the AppStore).

iOS is not related to Windows in any way, so Win32 libraries will not run on iOS. Your generic 'protocol module' (if you mean low-level code that can interface to other devices over TCP/IP or similar) will need to have significant differences depending on which platform it is running upon.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:19:49.843

你不应该使用 MFC，因为这些是iOS 上不可用的[Microsoft 基础类。](http://en.wikipedia.org/wiki/Microsoft_Foundation_Class_Library)Win32 可能是您最好的猜测 - 但如果您想在非 Windows 环境中使用 DLL，请确保不要包含任何非标准的 Windows 头文件。

我建议在这两种环境中经常编译您的文件。如果您需要高级功能，您可能还想看看像[boost这样的多平台库。](http://www.boost.org/)

# javafx - javafx 2.1 中的 FXLocal.getContext() 等价物是什么？

> ID：12313321
> 
> 赞同：1
> 
> 时间：2012-09-07T07:03:45.393
> 
> 标签：javafx, javafx-2

javafx 2.1 中的等效方法是什么？这有什么用？请简要说明。javafx 1.3的代码在这里..

```
 def context = FXLocal.getContext(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:10:37.833

它获取用于查询虚拟机的类和对象元数据的上下文。它既可以与 Java 反射类类似地使用，也可以用作调试器可以集成以调试程序的低级 API。

在类似的 Java 中，您最常做的事情是执行反射，您可以阅读[本教程](http://docs.oracle.com/javase/tutorial/reflect/index.html)。

有关不太常见且技术上硬核调试器界面的信息，您可以[google com.sun.jdi.VirtualMachine](http://www.google.com/search?q=com.sun.jdi.VirtualMachine)。

# java - 从数据库中获取值并在 Spinner 中设置

> ID：12313329
> 
> 赞同：0
> 
> 时间：2012-09-07T07:04:09.447
> 
> 标签：java, android, mysql, android-spinner

我开发了一个微调器，它可以更新数据库中的值。

最初我将值设置为`Q`. 当我将值从更改为时`Q`，`C`它会在数据库中更新，并且更改会反映在 Spinner 中。

当我返回并返回同一页面时，`Q`将显示旧值。我该如何解决这个问题？

**代码**（也在[paste.org](http://pastie.org/4677894)上）

```
package com.androidlogin.ws;

import java.util.ArrayList;
import java.util.List;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.widget.TextView;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.Spinner;

public class InsertionExample extends Activity {
    private final String NAMESPACE = "http://xcart.com";
    private final String URL = "http://192.168.1.168:8089/XcartLogin/services/update?wsdl";
    private final String SOAP_ACTION = "http://xcart.com/insertData";
    private final String METHOD_NAME = "insertData";
    Button btninsert;
    String selectedItem;

    static final String KEY_NAME = "orderid";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.change_status);
      /*  Intent in = getIntent();

        // Get XML values from previous intent
        String orderid = in.getStringExtra(KEY_NAME);

        // Displaying all values on the screen
        TextView lblName = (TextView) findViewById(R.id.textView1);

        lblName.setText(orderid); */

        Spinner spinner = (Spinner) findViewById(R.id.spinner1);
        btninsert = (Button)findViewById(R.id.btn_insert1);
        btninsert.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                 Intent in = getIntent();
                 String orderid = in.getStringExtra(KEY_NAME);

                SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
                PropertyInfo unameProp =new PropertyInfo();
                unameProp.setName("Status");//Define the variable name in the web service method
                unameProp.setValue(selectedItem);//Define value for fname variable
                unameProp.setType(String.class);//Define the type of the variable

                request.addProperty(unameProp);
                PropertyInfo idProp =new PropertyInfo();
                idProp.setName("Orderid");//Define the variable name in the web service method
                idProp.setValue(orderid);//Define value for fname variable
                idProp.setType(String.class);//Define the type of the variable
                request.addProperty(idProp);

                  SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                  envelope.setOutputSoapObject(request);
                  HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                  try{
                   androidHttpTransport.call(SOAP_ACTION, envelope);
                      SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

                     TextView result = (TextView) findViewById(R.id.textView2);
                      result.setText(response.toString());
                 }
               catch(Exception e){

               }
                  }
        });

        //attach the listener to the spinner
        spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());
        //Dynamically generate a spinner data 
        createSpinnerDropDown();

    }

    //Add animals into spinner dynamically
    private void createSpinnerDropDown() {

        //get reference to the spinner from the XML layout
        Spinner spinner = (Spinner) findViewById(R.id.spinner1);

        //Array list of animals to display in the spinner
        List<String> list = new ArrayList<String>();

        list.add("Q");
        list.add("P");
        list.add("F");
        list.add("I");
        list.add("C");

        //create an ArrayAdaptar from the String Array
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, list);
        //set the view for the Drop down list
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        //set the ArrayAdapter to the spinner
        spinner.setAdapter(adapter);
        adapter.notifyDataSetChanged();
        //attach the listener to the spinner
        spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

    }

    public class MyOnItemSelectedListener implements OnItemSelectedListener {

        public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

             selectedItem = parent.getItemAtPosition(pos).toString();

           }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }

        }

        public void onNothingSelected(AdapterView<?> parent) {
            // Do nothing.
        }
    } 
```

# ios - 使用 presentModalViewController 但使用 modeUIViewAnimationTransitionCurlUp

> ID：12313330
> 
> 赞同：2
> 
> 时间：2012-09-07T07:04:12.367
> 
> 标签：ios, viewcontroller

我怎么可能更改呈现模式视图控制器的过渡。呈现过渡是否有可能使用默认的 UIModalTransitionStyle....

```
UIModalTransitionStyleCoverVertical = 0,
UIModalTransitionStyleFlipHorizontal,
UIModalTransitionStyleCrossDissolve,
UIModalTransitionStylePartialCurl, 
```

但解除过渡使用 UIViewAnimationTransitionCurlUp 过渡。重要的是我不想使用 UIModalTransitionStylePartialCurl 它应该是 CurlUp 之一。

可悲的是，以下代码不起作用：

```
[UIView transitionFromView:self.view toView:self.parentViewController.parentViewController.parentViewController.view duration:1.0 options:UIViewAnimationTransitionCurlUp completion:^(BOOL finished) {....}]; 
```

也许它与视图控制器以模态模式显示有关。

如果有人可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:01:49.350

感觉很笨拙，但是您可以通过动画添加目标视图控制器视图的过渡来做到这一点，但完成后，您立即再次将其删除，然后通过正确过渡到它`presentViewController`（这次没有动画，因为视觉效果已经呈现）。

我在子类自定义中执行此操作`UIStoryboardSegue`（您没有说 NIB 或故事板，但概念是相同的）：

```
- (void)perform
{
    UIViewController *src = self.sourceViewController;
    UIViewController *dst = self.destinationViewController;

    [UIView transitionWithView:src.navigationController.view
                      duration:0.75
                       options:UIViewAnimationOptionTransitionCurlUp | UIViewAnimationOptionCurveEaseInOut
                    animations:^{
                        [src.navigationController.view addSubview:dst.view];
                    }
                    completion:^(BOOL finished){
                        [dst.view removeFromSuperview];
                        [src presentViewController:dst animated:NO completion:nil];
                    }];
} 
```

显然，如果您的源视图控制器没有导航控制器，您可以将那些“ `src.navigationController.view`”替换为“ `src.view`”。但希望这能给你这个想法。

并且，期待逻辑后续问题，在关闭视图控制器时，我有一个按钮连接到`IBAction`：

```
- (IBAction)doneButton:(id)sender 
{
    [UIView transitionWithView:self.view.superview
                      duration:0.75
                       options:UIViewAnimationOptionTransitionCurlDown
                    animations:^{
                        [self dismissViewControllerAnimated:NO completion:nil];
                    }
                    completion:nil];
} 
```

# javafx-2 - 拆分窗格的可折叠分隔线

> ID：12313336
> 
> 赞同：2
> 
> 时间：2012-09-07T07:04:37.017
> 
> 标签：javafx-2

在 JavaFX 2.2 中，我想使用一个拆分窗格（或更好：任何具有两个分隔线的组件），其中分隔线可以再次折叠/展开。是否有任何组件已经为我做了这件事（我只是不明白）还是我必须自己实现这个？你会推荐在这里使用 Swing 吗？

提前致谢 ：）

编辑：也许为了更好地想象我的问题，以下信息是必要的：我想垂直分割我的内容。

```
content | content | content 
```

（其中“|”是分隔符）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:26:34.297

JavaFX 有一个[SplitPane](http://docs.oracle.com/javafx/2/api/javafx/scene/control/SplitPane.html)可以做到这一点。

该窗格不包括用于折叠和展开分隔线的按钮。您需要自己编写这样的按钮，或者用户可以手动拖动窗格分隔线。

另请参阅：[我们能否在 Javafx SplitPane 上添加 OneTouchExpansable 按钮，如 swing JSplitPane](https://stackoverflow.com/questions/10558063/can-we-add-onetouchexpansable-button-on-javafx-splitpane-like-swing-jsplitpane)

我不建议为此使用 Swing，除非您有其他重要原因使用 Swing。

# c# - 有没有办法将 Settings.StyleCop 中的设置同步到 ReSharper？

> ID：12313337
> 
> 赞同：6
> 
> 时间：2012-09-07T07:04:37.637
> 
> 标签：c#, visual-studio-2010, visual-studio, resharper, stylecop

我的问题很简单：有没有办法将您在 Settings.StyleCop 文件中所做的更改同步到 ReSharper 设置中？

就像现在一样，我必须首先在 Settings.StyleCop 中进行更改（以便 StyleCop 可以使用我想要的规则验证我的代码），然后我必须在 ReSharper 中进行相同的更改以在代码中获得语法突出显示和警告，就像我一样类型。

我发现[了这个问题](https://stackoverflow.com/questions/1041373/get-resharper-to-consume-stylecop-configuration)，但它似乎不再适用。ReSharper 不读取 StyleCop.Settings。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:17:01.613

使用 R# 的 StyleCop (4.7.44.0) 插件：

在 R# 选项、工具、StyleCop 部分下：

![在此处输入图像描述](../Images/93753f354d5e4bcaa52cbb71056719fe.png)

# javascript - 绑定函数时在IE7中未实现Javascript错误

> ID：12313338
> 
> 赞同：5
> 
> 时间：2012-09-07T07:04:38.437
> 
> 标签：javascript, jquery, internet-explorer-7

我收到 javascript 错误

```
SCRIPT16385: Not implemented 
```

当我运行以下代码时..

```
 $j('img[id="edit_destination"]').bind('click',function(){
           document.getElementById("edit_destination").onclick = editPRINum(this);

}); 
```

editPRINum 是同一个 javascript 中的一个函数。我用谷歌搜索了这个问题，看起来我必须声明它以防它是一个变量。但是我正在使用它来绑定一个函数。我应该做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T07:08:07.040

我认为你应该试试这个

```
$j('img#edit_destination').bind('click',editPRINum); 
```

在您的回调函数 (editPRINum) 中，`this`将引用该`img`元素。

PS：$j 是什么？jQuery的快捷方式？

# magento - 如何在magento中获取类别的子类别

> ID：12313341
> 
> 赞同：1
> 
> 时间：2012-09-07T07:04:49.227
> 
> 标签：magento

如果有许多嵌套的子类别，如何在 magento 中获取某个类别的所有子类别？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T07:43:57.120

```
$subcats = Mage::getModel('catalog/category')->getCategories($your_category_id);
foreach ($subcats as $sub) {
    echo $sub->getName();
} 
```

# azure-web-roles - 为什么在 Azure 网站上出现除以零异常？

> ID：12313344
> 
> 赞同：1
> 
> 时间：2012-09-07T07:05:09.667
> 
> 标签：azure-web-roles, epplus, azure-web-app-service

我已经让 EPPlus（Office Open XML）在 Azure Web 角色上工作了一段时间，但我最近一直在尝试使用 Azure 网站，但我遇到了一个非常奇怪的错误；

```
[DivideByZeroException: Attempted to divide by zero.]
   System.Decimal.FCallDivide(Decimal& d1, Decimal& d2) +0
   OfficeOpenXml.Drawing.ExcelDrawing.SetPixelWidth(Int32 pixels, Single dpi) +465
   Compliance.Net.CommonCode.PivotGenerator.GeneratePivotTable(ExcelWorksheet dataWorksheet, ExcelWorksheet pivotWorksheet, Int32 endRow) 
```

我在 Azure Web Role 上运行的相同数据和代码上得到了这个。

*编辑：* 违规行如下所示：

```
 var chart = pivotWorksheet.Drawings.AddChart("PivotChart", eChartType.ColumnClustered, pivotTable);
 chart.SetPosition(endRow + 2, 20, 1, 10);
 chart.SetSize(600, 400); 
```

请注意，我已确保“endRow”> 1。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:17:17.047

我自己也遇到了同样的问题，我已经提取了 EPPlus 源并进行了一些调查。

问题出在 ExcelWorkbook.cs 第 283 行，它调用

System.Windows.Forms.TextRenderer.MeasureText（字符串，字体）.Width

这似乎在 Azure 网站中返回零。

我刚刚添加了一行

if (_standardFontWidth == 0) _standardFontWidth = 7;

（7 是我在本地获得的值，因此它将作为我的默认值 - 您的里程可能会有所不同）意味着我最终得到

```
 public decimal MaxFontWidth 
    {
        get
        {
            if (_standardFontWidth == decimal.MinValue)
            {
                var font = Styles.Fonts[0];
                System.Drawing.Font f = new System.Drawing.Font(font.Name, font.Size);
                _standardFontWidth=(decimal)(System.Windows.Forms.TextRenderer.MeasureText("00", f).Width - System.Windows.Forms.TextRenderer.MeasureText("0", f).Width);
            }
            if (_standardFontWidth == 0) _standardFontWidth = 7;
            return _standardFontWidth;
        }
    } 
```

当然，这意味着从源代码构建 EPPlus，你可能对 7 有不同的值，但它对我来说是一个有用的解决方法！

# paypal - Prestashop 上的 PaypalAPI 错误

> ID：12313347
> 
> 赞同：2
> 
> 时间：2012-09-07T07:05:19.443
> 
> 标签：paypal, prestashop

我正在沙盒模式下在 Prestashop 1.2.x 上测试我的 PayPalAPI 模块。

但我有这个错误：

> ```
> PayPal response:
> TIMESTAMP -> 2012-02-20T18:38:37Z
> L_ERRORCODE0 -> 10002
> L_SHORTMESSAGE0 -> Security error
> L_LONGMESSAGE0 -> Security header is not valid
> L_SEVERITYCODE0 -> Error
> PayPal ha devuelto un error 
> ```

我在网站上读到解决方案是设置离线沙盒模式，如果我这样做可以正常工作到 PayPal 网站上的第一步付款......

但是我该怎么做才能测试 Paypal 付款？？...谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T02:12:01.423

我知道可能会迟到（您的消息是 3 个月大的^^），但无论如何我都会回答。

这个问题只有三种可能：

*   您启用了沙盒模式（似乎并非如此）

*   您在生产模式下使用沙盒凭据

*   您错误地复制/粘贴了您的凭据（添加空格，缺少一个字符，...）

我在这个问题上帮助了很多人，它**总是**这三种情况之一:)

法比安

# asp.net-mvc-3 - 如何在 mvc3 中保持比例显示图像？

> ID：12313348
> 
> 赞同：0
> 
> 时间：2012-09-07T07:05:20.177
> 
> 标签：asp.net-mvc-3, image, image-resizing

在 mvc3 产品中有更多图像，并且有标准的盒子大小，所有图像都在视图中。用户输入不同尺寸的图像：200x800、2200x500 ..等。但我必须在 150x120 尺寸的标准框中显示所有图像。大多数图像在**150x120**大小的框中水平或垂直拉伸，看起来很糟糕。

```
<img src="@Url.Content( Path.Combine( "~/Uploads/Products/", @item.Date.Value.ToShortDateString(), @item.ImagePath1 ) )" width="150" height="120" alt="" /> 
```

我怎样才能让所有图像变小，但**要保持比例**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T07:19:51.077

保持比例的一种方法是在 css 中设置宽度值，但随后图像的宽度和高度是未知的，具体取决于起始图像。这将是修复拉伸图像的最简单方法。但是你不会知道上面提到的高度。

而且你必须加载大图像（大传输大小），所以这可能不是一个合适的解决方案。

剃刀密码

```
<img src="@Url.Content( Path.Combine( "~/Uploads/Products/", item.Date.Value.ToShortDateString(), @item.ImagePath1 ) )" alt="" /> 
```

CSS代码

```
.parentDiv img{
    width: 150px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:13:52.057

你问得好。然而，做到这一点的一种方法是要求用户使用 javascript 以一定比例上传。

例如，您的输入控件应该像

```
<input id="ImageFile" name="ImageFile" type="file" onchange="check_filesize(this.value,'upload');" /> 
```

在javascript中，您可以检查文件大小等。

另一个是使用[ImageResizeClass](http://nolovelust.com/post/C-Net-Image-Resizer-Helper-Class.aspx)并且在您的上传控件中，您可以调整文件大小以匹配您期望的大小以显示在 div 中。

因此，您的上传控制器将类似于以下内容...

```
public ActionResult Upload(Image image, HttpPostedFileBase ImageFile)
    {

ResizeImageHelper resizeImageHelper = new ResizeImageHelper();
                                resizeImageHelper.ResizeImage(path + ImageFile.FileName, path + ImageFile.FileName, 640, 480, false);
                                resizeImageHelper.ResizeImage(path + ImageFile.FileName, path + "thumb" + ImageFile.FileName, 74, 74, false);

                                image.imageLocation = ImageFile.FileName;
                                image.imageThumb = "thumb" + ImageFile.FileName;

                                imageRepository.Add(image);
                                imageRepository.Save();

} 
```

这样您就可以确保完美地显示图像。

希望你能理解，这会有所帮助。

# php - mysql_query() 期望参数 2 是与远程 mysql DB 相关的资源错误

> ID：12313353
> 
> 赞同：0
> 
> 时间：2012-09-07T07:05:30.850
> 
> 标签：php

我的 PHP 代码在连接远程 windows 系统 mysql 数据库并返回输出时效果很好。但是，当我使用它连接远程linux系统的mysql数据库时，我得到了以下错误：

> “mysql_query() 期望参数 2 是资源，布尔值在第 88 行的 C:\wamp\www\mysqldb.php 中给出”
> 
> 第 88 行具有以下内容“$this->resultQur = mysql_query($query, $this->connID);”

帮我解决这个问题。

是的。在这种情况下，资源为空。但同样适用于 windows mysql 连接。我只在linux中得到了错误。需要对linux环境做任何改变吗？

在放置“打印mysql_error（）；”时 我收到以下错误

“连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T07:06:46.013

您提供的资源来自 mysql_connect 并且没有成功！

*   将错误报告放在
*   在脚本中构建一些基本的错误处理
*   不要使用`mysql_*`但`mysqli_*`甚至更好`PDO with parameter binding`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:07:33.487

查询后从[mysql_error()](http://lv.php.net/mysql_error)输出返回的字符串。这样，您将看到实际错误。

```
$this->resultQur = mysql_query($query, $this->connID);
print mysql_error(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:12:29.037

mysql_connect 在成功时返回资源，但在错误时返回布尔值“false”。

您的连接尝试可能失败，因此 mysql_query 不会成功。

尝试以下类似的操作，看看究竟是什么导致了错误。

`mysql_connect(..) or die(mysql_error());`

此外，似乎“旧” mysql-library get 在 PHP 中已被弃用，建议切换到更现代的版本，例如[mysqli](http://ch.php.net/mysqli)或[PDO](http://ch.php.net/PDO)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T07:40:55.503

1\. 首先把 ini_set('display_errors',1);error_reporting(E_ALL|E_STRICT); 在页面开头的代码中

2\. 在查询周围放置 Try catch 并打印异常消息

try { `enter code here` }catch (Exception $e) { echo 'Caught exception: ', $e->getMessage(), "\n"; }

3\. 使用 PDO 然后使用 mysql 对象进行查询，这是一种现代且更好的方法 在查询周围使用 try catch 并尝试

# emacs - Emacs 和和弦翻译

> ID：12313357
> 
> 赞同：1
> 
> 时间：2012-09-07T07:05:55.783
> 
> 标签：emacs, key-bindings, slime

我在使用 emacs 时遇到了一些问题，尤其是在使用 SLIME 时。它不是读取 slime-eval-defun 命令（绑定到 CMx），而是读取 CMSx ...与缩进函数 CXq 相同的问题，我必须添加一个转变才能使其工作。

在查看键绑定时，我得到了这个

```
C-M-x (translated from C-M-S-x) runs the command slime-eval-defun,
which is an interactive Lisp function in `slime.el'. 
```

所以它选择了 CMSx 并假设我想要 CMx，这是真的，但我不明白为什么它一开始就没有选择 CMx！

我在 Arch 上作为来宾操作系统运行 emacs，主机操作系统是 OS X。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:46:17.753

所以我发现激活剪贴板操作的 KDE 默认快捷方式是 CMx。我删除了它，SLIME 快捷方式现在可以使用。

# database - 事务日志数据大小

> ID：12313361
> 
> 赞同：2
> 
> 时间：2012-09-07T07:06:24.560
> 
> 标签：database, tridion, tridion-2011, tridion2009

由于*由*. _ *_* _ *避免*这种情况的推荐设置是什么？`SDL`

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T07:29:37.040

正如以下链接中所建议的那样，为防止您的日志数据库增长超出其容量，您必须参考数据库供应商的文档以了解如何安排定期清理此数据库。

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_6EF48C80AD0B45FDB607C73EB639603A](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_6EF48C80AD0B45FDB607C73EB639603A)

注意 - 需要登录才能访问它。*

# java - 泛型和未经检查的错误

> ID：12313364
> 
> 赞同：0
> 
> 时间：2012-09-07T07:06:36.933
> 
> 标签：java, generics

我有一个像这样的课程：

```
 class BSTNode<K extends Comparable, V> {
    K key;
    BSTNode(K key, V value) { ... }
  } 
```

然后我正在使用

```
node.key.compareTo(root.key) >= 0 
```

在哪里`node`和`root`在哪里`BSTNode`。在该行中，我收到了一个未经检查的错误。为什么？

```
warning: [unchecked] unchecked call to compareTo(T) as a member of the raw type Comparable
      } else if (node.key.compareTo(root.key) >= 0) { // new node >= root
                                   ^
  where T is a type-variable:
    T extends Object declared in interface Comparable
1 warning 
```

据我了解，如 中所定义`BSTNode`，`K`应该扩展/实现`Comparable`. 所以`node.key.compareTo(root.key)`应该没问题吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T07:11:27.510

`Comparable`也是泛型的。尝试以下操作：

```
class BSTNode<K extends Comparable<? super K>, V> { ... } 
```

此外，请确保在声明中使用正确的类型：

```
// will cause the warning
BSTNode root = new BSTNode<Integer, Integer>(1, 1);
// will NOT cause the warning
BSTNode<Integer, Integer> root = new BSTNode<Integer, Integer>(1, 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T07:13:54.750

该类应实现 Comparable 的通用版本。在你的情况下`Comparable<K>`：

```
class BSTNode<K extends Comparable<K>, V> {
   K key;
   BSTNode(K key, V value) {}
} 
```

# c# - Asp.Net MVC：以当前语言显示本地化？

> ID：12313367
> 
> 赞同：0
> 
> 时间：2012-09-07T07:06:54.113
> 
> 标签：c#, asp.net, .net, asp.net-mvc, localization

我有一个网站，我需要根据两个字符的语言名称显示当前文化中的一些语言名称。

例如，当文化为法语时，我需要显示：

*   fr -> 法语
*   zh -> 英语
*   de -> 阿勒曼

在德国（de）文化中

*   fr -> 法语
*   zh -> 英语
*   de -> 阿勒曼

...

currentThread 文化已经是正确的（意味着我处于“FR”本地化）。

问题是，如果我在法国文化中并且我这样做：

```
System.Globalization.CultureInfo.GetCultureInfo("de") 
```

我收到这个对象：

```
Calendar: {System.Globalization.GregorianCalendar}
CompareInfo: {CompareInfo - de}
CultureTypes: NeutralCultures | InstalledWin32Cultures | FrameworkCultures
DateTimeFormat: {System.Globalization.DateTimeFormatInfo}
DisplayName: "German"
EnglishName: "German"
IetfLanguageTag: "de"
IsNeutralCulture: true
IsReadOnly: true
KeyboardLayoutId: 7
LCID: 7
Name: "de"
NativeName: "Deutsch"
NumberFormat: {System.Globalization.NumberFormatInfo}
OptionalCalendars: {System.Globalization.Calendar[1]}
Parent: {}
TextInfo: {TextInfo - de}
ThreeLetterISOLanguageName: "deu"
ThreeLetterWindowsLanguageName: "DEU"
TwoLetterISOLanguageName: "de"
UseUserOverride: false 
```

我希望显示名称在当前语言环境中（所以“Allemand”）。

我确定这是可能的，我是否缺少语言包？在哪个级别？视窗？ASP？MVC？或者我应该使用不同的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:28:05.957

.NET Framework 不提供您所要求的内容（即任意语言中的文化名称）。属性`EnglishName`和`NativeName`是不言自明的。至于`DisplayName`，这将为您提供系统语言中的文化名称（因此，如果您使用法语运行 .NET Framework，您将获得“Allemand”——如果您使用英语运行它，您'会得到“德语”）。

为了澄清最后一点，.NET Framework 本身已本地化为多种语言，您可以通过下载语言包（例如[http://www.microsoft.com/en-us ）获得 .NET Framework 的本地化版本/download/details.aspx?id=3324](http://www.microsoft.com/en-us/download/details.aspx?id=3324)用于 .NET 4.0）。如果你这样做，那么你`DisplayName`得到的将取决于你系统的语言环境以及是否安装了相应语言的语言包。无论如何，我不相信您可以依靠它来解决您的场景，因为您无法动态切换系统区域设置。

**更新：**我忘了提及解决方案，以防它不明显：您可以将语言列表与所有其他用户界面字符串一起添加到可本地化的资源中，即包括字符串“法语”、“英语”和“德语”，例如您的法语翻译将本地化为“Français”、“Anglais”、“Allemand”。

# android - 编译多个文件时缺少 nativeInit

> ID：12313376
> 
> 赞同：0
> 
> 时间：2012-09-07T07:07:36.713
> 
> 标签：android, android-ndk

安卓.mk：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

LOCAL_MODULE    := pacman
LOCAL_SRC_FILES := main.cpp \
        Pacman.cpp
LOCAL_CFLAGS := -DANDROID_NDK \
                -DDISABLE_IMPORTGL
LOCAL_LDLIBS := -lGLESv1_CM -ldl -llog

include $(BUILD_SHARED_LIBRARY) 
```

在 main.cpp 中：

```
void Java_com_wiagames_pacman_PacmanRenderer_nativeInit(JNIEnv* env) {
...
} 
```

包是 com.wigames.pacman；包含 nativeInit 方法的 Java 类是 com.wigames.pacman 包中的 PacmanRenderer。在我添加 pacman.cpp 之前它工作正常，但在添加它之后我有：

```
E/AndroidRuntime( 2238): FATAL EXCEPTION: GLThread 1104
E/AndroidRuntime( 2238): java.lang.UnsatisfiedLinkError: Native method not found: com.wiagames.pacman.PacmanRenderer.nativeInit:()V
E/AndroidRuntime( 2238):    at com.wiagames.pacman.PacmanRenderer.nativeInit(Native Method)
E/AndroidRuntime( 2238):    at com.wiagames.pacman.PacmanRenderer.onSurfaceCreated(MainActivity.java:120)
E/AndroidRuntime( 2238):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1494)
E/AndroidRuntime( 2238):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240)
W/ActivityManager(  306):   Force finishing activity com.wiagames.pacman/.MainActivity 
```

main.c： http: [//pastebin.com/GPexqwcv](http://pastebin.com/GPexqwcv)

MainActivity.java：http://pastebin.com/yWfWpyNb [_](http://pastebin.com/yWfWpyNb)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:33:12.587

要获得正确的链接，您可以尝试像这样声明 JNI 方法：

```
extern "C"                                                                                                              
JNIEXPORT void JNICALL Java_com_wiagames_pacman_PacmanRenderer_nativeInit(JNIEnv* env, jobject thiz)
{
    ...
} 
```

（有没有可能您在介绍`Pacman.cpp`项目时也从 C 更改为 C++？这可以解释为什么它停止工作。）

# javascript - 需要javascript函数允许逗号和空格

> ID：12313379
> 
> 赞同：1
> 
> 时间：2012-09-07T07:07:41.940
> 
> 标签：javascript, asp.net, validation

我使用以下函数对**keydown 事件**进行整数验证。现在我需要在此允许**逗号和空格键**。如何做到这一点？

```
function intValidate(event) {
    if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 ||(event.keyCode == 65 && event.ctrlKey === true) ||(event.keyCode >= 35 && event.keyCode <= 39))
        {
            return;
        }
    else 
    {
        if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )&&event.keyCode < 188)
        {
            event.preventDefault(); 
        }   
    }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T07:10:31.270

分别检查密钥代码 188 和 32。虽然 188 是“逗号”，但您可能还需要检查 110 -“小数点”，以查找小键盘上的字符（当然取决于键盘布局）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:12:10.473

为您需要在 If 语句中允许的新字符添加键码。tr 这个[键码列表](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:18:40.130

你可以调用这个函数：

```
var isValid = function(key) {

    var allowedCharacters = ['0','1','2','3','4','5','6','7','8','9',' ', ',']
    if (allowedCharacters.contains(key)) return true;
    return false;

}; 
```

这是一个小提琴：http: [//jsfiddle.net/Js9wQ/](http://jsfiddle.net/Js9wQ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T07:13:50.970

`32`将用于太空。

`188`将用于逗号（，）。

所以在你的`if`条件下添加它：

```
event.keyCode == 32 || event.keyCode == 188 
```

查看完整列表：[KeyCode List](http://www.webonweboff.com/tips/js/event_key_codes.aspx)

# c# - 如何使用 htmlagilitypack 获取 2 个周围 html 元素之间的 html？

> ID：12313380
> 
> 赞同：4
> 
> 时间：2012-09-07T07:08:00.790
> 
> 标签：c#, asp.net, html-agility-pack

我需要使用带有 C# 的 htmlagilitypack 检索包含在其他 2 个 html 元素中的 html 元素。

例如，我有以下内容：

```
<div id="div1" style="style definition here">
  <strong>
    <font face="Verdana" size="2">Your search request retrieved 0 matches.</font>
  </strong>
  <font face="Verdana" size="2">Some more text here.</font>
  <br><br>
  <!--more html here-->
</div> 
```

我想返回之间的一切

```
<div id="div1"> 
```

和第一个

```
<br> 
```

不返回其中任何一个元素。

我无法理解此所需的语法，所以如果有人可以向我解释在忽略结束标签的情况下获取存在于其他两个已知开始标签之间的 html 的最佳方法，我将不胜感激。

我还应该提到，我需要首先在完整网页的周围 html 中找到 id 为 div1 的 div。

我不需要实际节点与来自*特定* `HtmlDocument`节点的节点具有引用相等性，它们只需要在内容方面相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:39:52.203

`HtmlNode`返回实例时，对同一节点的多次调用将产生相同的引用。您可以利用它来发挥自己的优势（尽管它是一个实现细节，所以要小心）。

基本上，你会得到所有的后代元素，直到有问题的节点。您选择要开始的节点：

```
HtmlNode divNode = doc.DocumentNode.SelectSingleNode("div[@id='div1']"); 
```

你想上去的节点：

```
// Note that in this case, working off the first node is not necessary, just
// convenient for this example.
HtmlNode brNode = divNode.SelectSingleNode("br"); 
```

然后使用[类](http://msdn.microsoft.com/en-us/library/bb345746)上的[`TakeWhile`扩展方法](http://msdn.microsoft.com/en-us/library/bb534804.aspx)来获取所有元素，直到第二个元素，如下所示：[`Enumerable`](http://msdn.microsoft.com/en-us/library/bb345746)

```
// The nodes.
IEnumerable<HtmlNode> nodes = divNode.Descendants().
    TakeWhile(n => n != brNode).
    Where(n => n.NodeType == HtmlNodeType.Element); 
```

`TakeWhile`方法 ( ) 中的`n => n != brNode`比较依赖于参考比较（即实现细节部分）。

最后一个过滤器是只为您提供元素节点，因为这是您通常通过调用`SelectSingleNode`;得到的。如果要处理其他节点类型，可以省略。

像这样循环通过这些节点：

```
foreach (HtmlNode node in nodes)
{
    // Print.
    Console.WriteLine("Node: {0}", node.Name);
} 
```

产生：

```
Node: strong
Node: font
Node: font 
```

# linux - 如何通过终端查看硬盘上未分配的可用空间

> ID：12313384
> 
> 赞同：62
> 
> 时间：2012-09-07T07:08:07.347
> 
> 标签：linux, terminal, fedora, hard-drive

我想通过终端查看硬盘上未分配的可用空间。我绞尽脑汁在互联网上寻找可能的解决方案，但都是徒劳的。

我使用了各种命令，如`df`, `du`, `fdisk`,`parted`等。它告诉我已安装和卸载的磁盘，但我留下的未分配空间呢？

当然，我可以使用 Fedora 提供的“磁盘工具”应用程序查看它，但由于我喜欢在终端中查看，所以我想在其中查看。

谁能帮我解决一下？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-01-09T06:01:33.933

使用 GNU[`parted`](http://www.gnu.org/software/parted/)和`print free`命令：

```
root@sandbox:~# parted
GNU Parted 2.3
Using /dev/sda
Welcome to GNU Parted! Type 'help' to view a list of commands.
(parted) print free
Model: VMware Virtual disk (scsi)
Disk /dev/sda: 64.4GB
Sector size (logical/physical): 512B/512B
Partition Table: msdos

Number  Start   End     Size    Type      File system  Flags
        32.3kB  1049kB  1016kB            Free Space
 1      1049kB  256MB   255MB   primary   ext2         boot
        256MB   257MB   1048kB            Free Space
 2      257MB   64.4GB  64.2GB  extended
 5      257MB   64.4GB  64.2GB  logical                lvm
        64.4GB  64.4GB  1049kB            Free Space 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-07-25T12:13:45.300

在 TB 中查看：

`# parted /dev/sda unit TB print free | grep 'Free Space' | tail -n1 | awk '{print $3}'`

在 GB 中查看：

`# parted /dev/sda unit GB print free | grep 'Free Space' | tail -n1 | awk '{print $3}'`

以 MB 为单位查看：

`# parted /dev/sda unit MB print free | grep 'Free Space' | tail -n1 | awk '{print $3}'`

以字节为单位查看：

`# parted /dev/sda unit B print free | grep 'Free Space' | tail -n1 | awk '{print $3}'`

以百分比查看：

`# parted /dev/sda unit '%' print free | grep 'Free Space' | tail -n1 | awk '{print $3}'`

在部门中查看：

`# parted /dev/sda unit s print free | grep 'Free Space' | tail -n1 | awk '{print $3}'`

更改`/dev/sda`为您尝试查找有关信息的任何设备。如果您在任何计算中使用结果，请确保修剪尾随字符。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-15T16:27:56.877

除了有关如何查找*未分区*空间的所有答案之外，您还可能有分配给 LVM 卷但实际上并未使用的空间。您可以使用 列出物理卷，`pvdisplay`并查看每个物理卷与哪些卷组相关联。如果物理卷不与*任何*卷组关联，则重新分配或销毁是安全的。假设它*与*一个卷组相关联，下一步是用来`vgdisplay`显示你的那些。除此之外，这将显示您是否有任何空闲的“物理范围”——您可以分配给*逻辑卷*的存储块。您可以通过以下方式以简洁的形式获得此信息`vgs`：

```
$ sudo vgs
  VG     #PV #LV #SN Attr   VSize   VFree
  fedora   1   3   0 wz--n- 237.46g    0 
```

...在这里你可以看到我没有免费的东西。如果我这样做了，最后一个数字将大于零。

这很重要，因为可用空间对 、 等是不*可见*`du`的，并且如果您正在使用或其他分区工具`df`，也会显示为已分配的分区。`fdisk`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-13T16:23:44.283

这是一个老问题，但我也想给出我的答案。

由于我们谈论的是可用空间，所以我们应该谈论扇区，因为没有进行扇区的分区或调整大小。

对于我们人类来说，这没有多大意义。为了获得人类可读的信息，我们必须将此数字转换为字节。所以，我们有一个已经分区的磁盘，我们想知道我们可以使用多少空间。我个人不喜欢这个`parted`解决方案，因为我对命令的大脑记忆已经被占用了。还有`cfdisk`，它为您提供自由空间。但我认为 fdisk 是最快的解决方案：它简单明了，无需安装：执行`fdisk /dev/sdx`然后进入`v`交互式 shell。它将为您提供仍然免费的扇区数量。

```
2004-54-0 [17:03:33][root@minimac:~]$> fdisk /dev/sda
Welcome to fdisk (util-linux 2.23.2).
..
Command (m for help): v
Remaining 1713 unallocated 512-byte sectors 
```

我们仍然有 1713 个扇区，每个扇区 512 字节。所以，因为你喜欢终端（在 2012 年，谁知道呢？）我们喜欢`echo $(((1713*512)/1024))k`，这是 1713 个扇区乘以 512 个字节（除以 1024 得到 KB），得到 856k.. 甚至没有 900 KB.. 我需要另一个磁盘..

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-03-08T23:50:53.957

我在 fedora 26 和 LVM 分区上遇到了同样的问题，好像我在安装过程中忘记检查了一些东西，所以，我的 15G 根目录已经增加到我需要的 227G。

我在这里发布了我遵循的步骤：

[resize2fs：尝试打开时超级块中的魔术数字错误](https://stackoverflow.com/questions/26305376/resize2fs-bad-magic-number-in-super-block-while-trying-to-open/49184281#49184281)

```
0) #df -h

Filesystem               Size  Used Avail Use% Mounted on
devtmpfs                 1.9G     0  1.9G   0% /dev
tmpfs                    1.9G     0  1.9G   0% /dev/shm
tmpfs                    1.9G  824K  1.9G   1% /run
tmpfs                    1.9G     0  1.9G   0% /sys/fs/cgroup
/dev/mapper/fedora-root   15G  2.1G   13G  14% /
tmpfs                    1.9G     0  1.9G   0% /tmp
/dev/md126p1             976M  119M  790M  14% /boot
tmpfs                    388M     0  388M   0% /run/user/0

1) # vgs

  VG     #PV #LV #SN Attr   VSize   VFree   
  fedora   1   2   0 wz--n- 231.88g 212.96g

2) # vgdisplay

  --- Volume group ---
  VG Name               fedora
  System ID
  Format                lvm2
  Metadata Areas        1
  Metadata Sequence No  3
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                2
  Open LV               2
  Max PV                0
  Cur PV                1
  Act PV                1
  VG Size               231.88 GiB
  PE Size               4.00 MiB
  Total PE              59361
  Alloc PE / Size       4844 / 18.92 GiB
  Free  PE / Size       54517 / 212.96 GiB
  VG UUID               9htamV-DveQ-Jiht-Yfth-OZp7-XUDC-tWh5Lv

3) # lvextend -l +100%FREE /dev/mapper/fedora-root

  Size of logical volume fedora/root changed from 15.00 GiB (3840 extents) to 227.96 GiB (58357 extents).
  Logical volume fedora/root successfully resized.

4) #lvdisplay

5) #fd -h

6) # xfs_growfs /dev/mapper/fedora-root

meta-data=/dev/mapper/fedora-root isize=512    agcount=4, agsize=983040 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=1 spinodes=0 rmapbt=0
         =                       reflink=0
data     =                       bsize=4096   blocks=3932160, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
log      =internal               bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
data blocks changed from 3932160 to 59757568

7) #df -h

Filesystem               Size  Used Avail Use% Mounted on
devtmpfs                 1.9G     0  1.9G   0% /dev
tmpfs                    1.9G     0  1.9G   0% /dev/shm
tmpfs                    1.9G  828K  1.9G   1% /run
tmpfs                    1.9G     0  1.9G   0% /sys/fs/cgroup
/dev/mapper/fedora-root  228G  2.3G  226G   2% /
tmpfs                    1.9G     0  1.9G   0% /tmp
/dev/md126p1             976M  119M  790M  14% /boot
tmpfs                    388M     0  388M   0% /run/user/0 
```

此致，

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-11-07T20:11:17.263

在单个命令中显示未分配的可用空间的最简单方法：

```
$ sudo sfdisk --list-free /dev/sdX 
```

`--quiet`（如果您不需要有关扇区大小等的额外信息，请添加该选项。）

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-03-18T09:46:19.943

以图形方式使用磁盘实用程序时，它会显示所有文件系统使用的磁盘空间，并使用终端中的命令，例如`df -H`. 换句话说，它使用 1000 的幂，而不是 1024。（注意：`-h`和之间有区别`-H`。）

同时使用命令行查找硬盘中未分配的空间 `# fdisk /dev/sda`将显示总空间和总柱面值。

现在检查最后一个气缸值并将其从总气缸值中减去。因此，最终值 * 1000 为您提供未分配的磁盘空间。

注意：柱面值显示`df -H`为 1000 的幂，或者也可能使用`df -h`1024 的幂显示。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-03-09T07:36:46.283

只需遵循以下。

*   找出开发类型，是否是 /dev/sda /dev/hda /dev/vda 等。

*   查找 vi /etc/fstab 并找出已安装的分区和 UUID 等

*   比如说，你的硬盘被标记为 /dev/sda 并且你知道 df -hT 下 /dev/sda 的数量

那么你需要找出剩余的 /dev/sda* 权利。

所以，

fdisk -l /dev/sda* 将给出所有 /dev/sda* 并且您会发现例如 /dev/sda4 或 /dev/sda5

然后找出已挂载分区的 UUID，那些未列在 /etc/fstab 中的是您可以格式化和挂载的分区。

跟着这个。一个有智慧的世界就足够了。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-09T21:06:09.257

答案的简单解决方案：

```
parted /dev/sda 
```

显示单元帮助。然后将其切换到您想要的单位。

要显示设备上的可用空间，请使用：

```
print free 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-07T09:08:18.360

如果您需要查看具有可用空间的分区和/或文件管理器，那么您需要提到的实用程序。你只需要使用选项。

例如：`df -h`将以“人类可读”的形式打印这些信息。如果您只需要有关可用空间的信息，您可以使用：`df -h | awk '{print $1" "$4}'`.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-07T21:52:44.760

您可能希望使用该`fdisk -l /dev/sda`命令查看`sda`磁盘的分区。“可用空间”应该是一些未使用的分区（或缺少）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-12-26T04:04:14.190

文件系统大小可以与分区大小不同。要修复你需要这样做

> df -h

看看分区的名称是什么说 /dev/sda3

> resize2fs /dev/sda3

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2017-07-20T10:46:19.983

当您通过 fdisk 将磁盘切割成分区时，您可能要小心，以免留下可用空间的间隙。所以命令会自动对齐分区，你会得到部分之间的一些间隙。网上有很多文章为什么需要这样做。原因是它提供了错误更少的解决方案。那是很多年前的事了。现在我不知道如果你没有任何间隙地做所有事情，是否会发生错误。但首先。如果您不允许对齐，您可以这样做，您下一部分的开始 = 结束前一个 +1。但第一部分总是从 2048 扇区开始。所以调用专家部分，您可以将其设置为 0。但如果您打算从该磁盘启动，强烈建议您这样做。如果仅用于数据，您将获得 1 Mb 的额外磁盘空间。这是一个 MBR 空间。如果您打算在此磁盘上安装操作系统，则不要使用 GPT 分区类型。还有它' s 更适合并非所有操作系统都看到磁盘的 GPT 部分。但有些人看到了他们。如果你不确定它使用 msdos。格式化块大小为 4096 字节（逻辑），物理块大小为 512 字节。我不这样做，但你也可以设置块大小=512。对此进行了很多讨论。这会导致磁盘错误。但是您也会提供一些可用的磁盘空间，尤其是当您有许多小文件时。您的磁盘将更紧凑地填充。如果你给已经分区的磁盘填充了数据并且可能已经安装了操作系统，你可能想要这样做，这是非常有问题的。但对于 Linux 来说是可能的。对于 Windows 不...您也必须保存备份和 mbr，写入每个部分的 UUID，然后使用 fdisk 和 format 为每个部分设置正确的 UUID 和 LABEL，使用 dd 命令恢复 mbr，如果您不这样做'

# hex - 如何将十六进制注入到 isoc99_scanf 的程序集调用中

> ID：12313385
> 
> 赞同：0
> 
> 时间：2012-09-07T07:08:09.740
> 
> 标签：hex, overflow, buffer, inject

我正在研究一个crackme，我发现缓冲区溢出，但是当我输入\xNN 时，其中N 是0 和F 之间的任何值，\ 和x 被解释为它们自己的值。我也试过\xNN。

该程序是一个 Linux 可执行文件，所以我在回溯上运行它。该程序处理输入，而不是命令行调用的一部分。我查看了ida中的程序，输入是由__isoc99_scanf完成的。

我可以输入 Unicode，但 04 有问题，所以我需要弄清楚如何使用十六进制。

如果有人有除十六进制以外的建议，那也很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T22:50:02.803

你是什​​么意思“不是命令行调用的一部分”？如果它在控制台上，您可以使用

`perl -e 'print "\xNN" | program`.

甚至

`perl -e 'print "\n\whatever\xNN"' | program`.

模拟加法输入。标准输出的输出直接进入程序的标准输入，就像您在输入聊天对象一样。如果它是一个图形应用程序，您总是可以直接修补字节（虽然说起来容易做起来难，[这里是如何在 gdb 上做到这一点](http://my.opera.com/taviso/blog/show.dml/248232)）。

# objective-c - iPad 应用程序 - CALayer 使其在旋转时非常滞后

> ID：12313387
> 
> 赞同：1
> 
> 时间：2012-09-07T07:08:15.873
> 
> 标签：objective-c, ios, ipad, core-animation, calayer

我目前正在开发一个通用应用程序，在我的一个视图控制器中，我有以下 xib：

```
View
 -ImageView
 -TableView
 -ImageView
 -View (called tblviewContainer in the following snippet of code) 
```

在我的 viewdidload 方法中，我制作了一个图层，我将把它放在我的视图（tblviewcontainer）上，以便屏幕的顶部和底部是渐变的。

```
[tblViewContainer addSubview:self.tableView];
[tblViewContainer sendSubviewToBack:self.tableView];

if (!maskLayer)
{
    maskLayer = [CAGradientLayer layer];

    UIColor* outerColorSetup = [UIColor colorWithWhite:1.0 alpha:0.0];
    UIColor* innerColorSetup = [UIColor colorWithWhite:1.0 alpha:1.0];

    CGColorRef outerColor = outerColorSetup.CGColor;
    CGColorRef innerColor = innerColorSetup.CGColor;

    maskLayer.colors = [NSArray arrayWithObjects:
                         (__bridge id )outerColor,
                         (__bridge id)innerColor,
                         (__bridge id)innerColor, 
                         (__bridge id)outerColor, nil];

    maskLayer.locations = [NSArray arrayWithObjects:
                           [NSNumber numberWithFloat:0.01],
                           [NSNumber numberWithFloat:0.04],
                           [NSNumber numberWithFloat:0.8],
                           [NSNumber numberWithFloat:1.0], nil];

    maskLayer.bounds = CGRectMake(0, 0,
                                  self.tableView.frame.size.width,
                                  self.tableView.frame.size.height);

    maskLayer.anchorPoint = CGPointZero;

    tblViewContainer.layer.mask = maskLayer;

} 
```

在我的应用程序中可以旋转，当我在图层上这样做时，旋转时非常缓慢/滞后（仅在 ipad 3 上！）。

当我旋转时，我执行以下操作：（从纵向->横向）

```
-(void)willRotateToInterfaceOrientation: (UIInterfaceOrientation)orientation duration:(NSTimeInterval)duration
{
    if (orientation == UIInterfaceOrientationPortrait || orientation == UIInterfaceOrientationPortraitUpsideDown)
    {

    }
    else if(orientation == UIInterfaceOrientationLandscapeLeft || orientation == UIInterfaceOrientationLandscapeRight)
    {
        _landscape = [[ipad_VideoListViewController_Landscape alloc] initWithNibName:@"ipad_VideoListViewController_Landscape" bundle:nil];
        _landscape.scroolViewContentOffset = scroolViewContentOffset;
         [self.view.layer setRasterizationScale:[UIScreen mainScreen].scale];
          self.view.layer.shouldRasterize = YES;

        NSMutableArray *viewCons = [[[self navigationController]viewControllers] mutableCopy];
        [viewCons removeLastObject];
        [viewCons addObject:_landscape];
        [[self navigationController]setViewControllers:viewCons animated:NO];
    }
} 
```

最糟糕的是它在 ipad 2 上完美运行，图层处于活动状态，但 ipad 3 似乎无法处理它。甚至似乎我在 ipad 2 上对动画所做的事情（有效），无法在 ipad 3 上处理。例如，我制作了自己的 tableview 标题单元格/tableview 单元格，如果我在 ipad 3 上使用它们，它们也会滞后。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:16:36.313

我添加了一些透明图像，并且运行流畅。

不过，如果有人知道为什么这不起作用，我想知道。

必须找到这个解决方案，因为我有一个截止日期:)。

感谢迈克尔的评论！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:51:51.973

尝试在您的 willRotateToInterfaceOrientation 中进行[光栅化：](http://developer.apple.com/library/ios/DOCUMENTATION/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/shouldRasterize)

```
self.view.layer.shouldRasterize = YES; 
```

然后在您的 didRotateToInterfaceOrientation 中：

```
self.view.layer.shouldRasterize = NO; 
```

此外，请确保您的图层尽可能不透明。

# xslt - XSLT 1.0：使用 EXSLT 根据子字符串获取元素名称

> ID：12313393
> 
> 赞同：0
> 
> 时间：2012-09-07T07:08:48.520
> 
> 标签：xslt, exslt

我有以下 XML，我只想获取以“MBH”开头的元素名称：

```
<?xml version="1.0" encoding="UTF-8"?>
<GenericRecs>
<GenericRecord>
    <record>
        <MBH1/>
    </record>
    <record>
        <BAL1/>
    </record>
    <record>
        <MBH2/>
    </record>
    <record>
        <BAL2/>
    </record>
    <record>
        <PAY2/>
    </record>
    <record>
        <MBH3/>
    </record>
    <record>
        <BAL3/>
    </record>
    <record>
        <PAY3/>
    </record>
</GenericRecord>
</GenericRecs> 
```

我有以下 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ext="http://exslt.org/common"
version="1.0">

<xsl:variable name="x" select="ext:node-set(substring(local-name(//record/child::*),1,3)='MBH')"/>

<xsl:variable name="mbh">
    <xsl:for-each select="$x">
            <item>
                <xsl:copy>
                    <xsl:value-of select="local-name(.)"/>
                </xsl:copy> 
            </item>
    </xsl:for-each>
</xsl:variable>

<xsl:template match="/">
    <xsl:apply-templates select="$mbh"/>
</xsl:template>
</xsl:stylesheet> 
```

但我得到的只是一个错误“描述：无法将#RTREEFRAG 转换为 NodeList！” 我正在使用 EXSLT，但我不明白为什么会出现该错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:12:27.713

> 我有以下 XML，我只想获取以“MBH”开头的元素名称：

有什么问题

```
<xsl:apply-templates select="//record/*[starts-with(name(), 'MBH')]" /> 
```

?

几点注意事项：

*   尽可能使用`name()`而不是`local-name()`尽可能使用。您的输入中没有名称空间，因此无论如何它们之间没有区别。
*   `child::`轴是默认值。`child::*`相当于`*`。
*   如果您可以对此做任何事情，请更改输入。通过不是很聪明，除非`<xyz1>`实际上完全不同（而不仅仅是*“第三**”*）。 在那种情况下将是明智的。如果它们完全不同，则它们不应具有相似的名称。`<xyz3>``<xyz3>``<xyz1>`*`<xyz>`*
    `<xyz num="1">`

# aviarc - Aviarc Debug command not working?

> ID：12313404
> 
> 赞同：2
> 
> 时间：2012-09-07T07:09:35.280
> 
> 标签：aviarc

I've been trying to send some strings out to a file somewhere to help with testing, by doing something like:

```
<debug text="This is a test"/> 
```

But I can't find where it outputs to. I've been looking in the aviarc-server.[date].log file, not sure where else it would go.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T21:36:22.660

The command outputs at INFO level - what is your log level set to? You can change the log level setting in the Admin application under Server Configuration. It is set to WARN by default. You can also use the Realtime Log feature from the Admin app to see *tail* the log within the browser.

# c++ - C++11 中的垃圾回收

> ID：12313405
> 
> 赞同：26
> 
> 时间：2012-09-07T07:09:42.013
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11, garbage-collection

我一直在研究和使用 C++11 的不同功能，特别是在 Visual Studio 2010 中。

提到的一件事是[最小的垃圾收集](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2670.htm)：

根据这篇[博](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)文，VC10 支持此功能。

> 我的测试表明，在丢失的对象上没有调用析构函数，因此我不确定它们的内存位置是否已被释放或是否泄漏。

我无意以任何方式依赖它，但找不到关于其行为的直接、明确的答案。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-07T08:02:18.547

最小 GC 支持 (n2670) 仅表示[`std::declare_reachable`](http://msdn.microsoft.com/en-us/library/ee410598.aspx)包含类似函数，并定义“安全派生指针”的含义，因此使某些操作（如 XOR-ing 指针值）成为未定义行为，GC 无需担心关于它。另请参阅[Bjarne Stroustrup 关于 GC ABI 的 C++11 FAQ](http://www.stroustrup.com/C++11FAQ.html#gc-abi)和[n2585：对垃圾收集和基于可达性的泄漏检测的最小支持](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2585.pdf)。

该提案允许在 C++11 的框架内实现 GC。但提案本身并不意味着实现需要支持 GC。一些库，例如 libc++ 只是将库函数实现为无操作。

我很确定，此时，您的案例中的内存刚刚泄漏。但请注意，在 GC 发生时，确实不需要运行析构函数。假设“§3.8 对象生命周期”也提供给 GC-ed 指针，我们有（§3.8/4）：

> ...对于具有非平凡析构函数的类类型的对象，**程序不需要在对象占用的存储被重用或释放之前显式调用析构函数**；但是，如果没有显式调用析构函数，或者如果没有使用删除表达式 (5.3.5) 来释放存储，则不应隐式调用析构函数以及依赖于析构函数产生的副作用的任何程序具有未定义的行为。

所以也有可能在没有调用析构函数的情况下内存已经被释放。事实上，早期的 GC 提案，例如[n2310：Transparent Programmer-Directed Garbage Collection for C++](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2310.pdf)明确指出（n2310 §7）

> 当一个对象被垃圾回收器回收时，它的析构函数不会被调用（当然，显式删除总是调用析构函数）。

# z3 - 理解逻辑上下文

> ID：12313408
> 
> 赞同：1
> 
> 时间：2012-09-07T07:09:51.853
> 
> 标签：z3

当我在检查后显示我的逻辑上下文时，除其他外，我得到：

```
inconsistent():1
m_asserted_formulas.inconsistent():1
#1 := true
#2 := false
... (follows around 40 of theses assertions)
#144 := (not #143)
asserted formulas:
#23 #125 .... #2 
```

我了解在断言公式列表中存在一些不一致之处。我看到的第一个是断言 2：

```
#2 := false 
```

我是对的，还是“错误”是一个真实的断言？

提前致谢，

AG。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:07:54.413

是的，`false`在您的上下文中被断言为真实。请注意，上下文被标记为不一致：`inconsistent():1`。这里的`1`意思`true`和 C 中的一样。请注意，逻辑上下文的这种低级表示只能用于调试目的。它并不是真正用于“外部”消费。最后，`false`可能没有被用户明确断言，而是由用户执行的断言暗示。

# ruby - 将结果传递给 redis 中的另一个命令

> ID：12313412
> 
> 赞同：6
> 
> 时间：2012-09-07T07:10:10.247
> 
> 标签：ruby, redis, command-line-interface, read-eval-print-loop

有没有办法将一个函数的返回值传递给 Redis 中的另一个函数？当然，如果您使用的是语言包装器（如 Ruby），这很容易——但是从 CLI 中呢？

例如像这样的东西，bash 风格

```
redis 127.0.0.1:6379> keys student* | mget 
```

或类似的东西

```
redis 127.0.0.1:6379> mget(keys student*) 
```

`keys student*`将返回一个键列表，但我不知道如何获取这些键的所有值。

想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T08:04:20.290

在 CLI 中，您只需让 shell 完成它的工作。

```
./redis-cli --raw keys 'student:*' | awk '{printf "get %s\n", $1}' | ./redis-cli --raw 
```

请注意，由于其线性复杂性，您不应该在应用程序中使用 keys 命令。

# django - Django项目中每个应用程序的不同错误处理程序

> ID：12313420
> 
> 赞同：1
> 
> 时间：2012-09-07T07:10:50.347
> 
> 标签：django, error-handling

我正在开发一个包含多个应用程序的 Django 1.3 项目。项目结构有点像这样：

```
- MyProject
  - manage.py
  - MyProject
    - settings.py
    - url.py
    - wsgi.py
  - core
    - models.py
  - web
    - urls.py
    - views.py
  - api
    - urls.py
    - views.py 
```

我现在想为应用程序定义不同的 handler404 和 handler500 `api`，因为它应该在`web`返回 HTML 时返回 JSON 并且可以使用默认处理程序。

有没有办法覆盖此设置，使其仅对一个应用程序有效？我真的很想避免仅仅因为这个而运行多个服务器实例。

谢谢西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:18:10.733

Django`httphandler404`对于一个站点来说是全局的。在您的情况下，您将必须编写一个包装器视图，该视图取决于 url（或 中的某些其他属性`request`）为应用程序返回 JSON，为`api`应用程序返回 HTML `web`。您还可以在其中定义单独的错误处理视图，`api`并`web`可以从包装器视图中调用它们。

参考：[自定义错误视图](https://docs.djangoproject.com/en/dev/topics/http/views/#the-404-page-not-found-view)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:17:22.660

您可以定义全局 404 和 500 处理程序，它们根据请求内容类型、接受编码和/或路径分派到特定的错误处理程序。这些特定的处理函数当然可以存在于您的应用程序模块中。

# php - “！==”和“==！”之间的区别

> ID：12313423
> 
> 赞同：163
> 
> 时间：2012-09-07T07:11:02.743
> 
> 标签：php, comparison, operators, comparison-operators

昨天我在修改别人编写的 PHP 代码时偶然发现了这个问题。我很困惑，一个简单的比较 ( `if ($var ==! " ")`) 没有按预期工作。经过一些测试后，我意识到编写该代码的人`==!`不是`!==`用作比较运算符。我从未见过`==!`任何语言，所以我想知道这段代码到底是如何工作的，并做了一些测试：

```
<?php
echo "int\n";
echo "1 !== 0: "; var_dump(1 !== 0);
echo "1 !== 1: "; var_dump(1 !== 1);
echo "1 ==! 0: "; var_dump(1 ==! 0);
echo "1 ==! 1: "; var_dump(1 ==! 1);
echo "bool\n";
echo "true !== false: "; var_dump(true !== false);
echo "true !== true: "; var_dump(true !== true);
echo "true ==! false: "; var_dump(true ==! false);
echo "true ==! true: "; var_dump(true ==! true);
echo "string\n";
echo '"a" !== " ": '; var_dump("a" !== " ");
echo '"a" !== "a": '; var_dump("a" !== "a");
echo '"a" ==! " ": '; var_dump("a" ==! " ");
echo '"a" ==! "a": '; var_dump("a" ==! "a");
?> 
```

这会产生以下输出：

```
int
1 !== 0: bool(true)
1 !== 1: bool(false)
1 ==! 0: bool(true)
1 ==! 1: bool(false)
bool
true !== false: bool(true)
true !== true: bool(false)
true ==! false: bool(true)
true ==! true: bool(false)
string
"a" !== " ": bool(true)
"a" !== "a": bool(false)
"a" ==! " ": bool(false)
"a" ==! "a": bool(false) 
```

该运算符似乎适用于布尔变量和整数变量，但不适用于字符串。`==!`我在 PHP 文档或任何搜索引擎上都找不到任何相关内容（尝试过 Google、Bing、DuckDuckGo，但我怀疑他们试图解释它而不是搜索文字字符串）。有没有人以前见过这个并且可以阐明这种行为？

* * *

## 回答 #1

> 赞同：244
> 
> 时间：2012-09-07T07:13:25.433

不同的是没有运算符`==!`。

这个表达式：

```
$a ==! $b 
```

基本上和这个一样：

```
$a == (!$b) 
```

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2012-09-07T07:19:31.557

# `==!`PHP中没有运算符

它只是`==`和的组合`!`。只有在场的相关算子是`==`。所以这个组合`==!`可以正常工作`==`，检查`Equality`，相信我，

```
$variable_a ==! $variable_b 
```

莫过于

```
$variable_a == (!$variable_b) 
```

因此;

```
"a" ==! " ": bool(false)
"a" ==! "a": bool(false) //is same as "a" == (!"a") 
```

和

```
true ==! false: bool(true)
true ==! true: bool(false) 
```

组合多个运算符字符可能无法始终作为运算符工作。例如，如果我们采用`=`and `!`，它只有在`!=`or的模式下才能作为运算符工作`!==`。这些字符可以有多种组合，例如 `!====`，`!==!`等等。等等。运算符组合应该是**唯一的格式**、**唯一的顺序**、**唯一的组合**（所有字符不会与所有其他字符组合），并且绝对**不能在它们之间有任何空格**。

检查下面的运营商列表；

![在此处输入图像描述](../Images/fb2038f9d52ac2e7e19cc1ad4cd274be.png)

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2012-09-07T07:12:58.020

`==!`不是运算符，而是两个：

`==`和`!`

`!`优先级高于`==`

所以 ：

`"a" !== " ": bool(true)`--> true 因为“a”真的不等于“”

`"a" ==! " ": bool(false)`--> false 因为 "a" 不等于 !" "

可以写成 == 和 ! 之间有空格。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2012-09-07T07:17:39.487

`==!`不存在这样的。这是一个有点神秘的符号`== !`

由于空格在这些操作中并不重要，因此您可以轻松编写`a --> b`，其计算结果为`a-- > b`，但看起来很奇怪。

所以，至于问题：`"a" ==! " "`将被解析为`"a" == !" "`. 字符串的否定被[强制转换](http://php.net/manual/de/language.types.boolean.php)覆盖，这意味着任何字符串，但在强制转换时`"0"`，是。`" "``true`

因此，表达式`"a" == !" "`将被转移：

1.  `"a" == !" "`
2.  `"a" == !false`
3.  `"a" == true`

并且，与`string "a"`不同`bool true`，这会将整个表达式计算为`false`。

那么，这个故事的寓意是什么？不要让自己被丢失或错误放置的空间所迷惑！:)

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2012-09-07T07:13:11.010

## ==！不是操作员

`==!`根本不是 php 比较运算符 - 它与`== !`（注意空格）相同

IE

```
if ("a" !== " ") {
    // evaluates to true - "a" and " " are not equal
}

if ("a" == !" ") {
    // unreachable
} else {
    // evaluates to false - "a" is not equal to true (!" " evaluates to true)
} 
```

# c# - php会话变量不保存

> ID：12313429
> 
> 赞同：1
> 
> 时间：2012-09-07T07:11:28.070
> 
> 标签：c#, php, facebook, session

我对 php 很陌生，正在尝试将数据从 c# 发送到 php 脚本，然后再发布到 facebook。

问题是，收到数据后，我无法将其存储在会话数组中。

这是我所拥有的：

```
session_start();

if($_POST['Facebook'])
{
    echo 'DataReceived';
    $HighScore = $_POST['Facebook'];
    $_SESSION[1] = $HighScore;
}

$_SESSION['foo'] = 'bar'; 
```

再往下，在检查用户是否未登录 facebook 后，我有：

```
$login_url = $facebook->getLoginUrl($params = array('scope' => "publish_stream",));
echo $login_url; 
```

然后我在 c# 中使用这个 url 打开用户的浏览器，他们可以通过我的 facebook 应用程序登录到 facebook。

现在，据我所知，这`$login_url`将允许用户登录 facebook 然后返回到这个 php 页面，这是我丢失从 c# 发送的数据的地方。

此外，在使用`var_dump($_SESSION)`检查那里的内容并包含`$_SESSION['foo']`一些 facebook 会话变量之后，但不是最高分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:22:46.080

你确定你正在获取`$_POST['Facebook']`Facebook 参数，`$_POST`因为我在代码中没有发现问题。

# ruby - 红宝石中的过滤器

> ID：12313432
> 
> 赞同：-1
> 
> 时间：2012-09-07T07:11:35.577
> 
> 标签：ruby

你如何用红宝石制作过滤器？我知道该函数已经存在于 rails 中，但我们如何在 ruby​​ 程序中对其进行编码？这是程序：

```
module Filter
  def before_filter *args   
  end
  def after_filter *args  
  end 
end  

class Ingredient  
  def one
    puts "in one"
  end

  def two
    puts "in two"
  end

  def three
    puts "in three"
  end

  def four
    puts "in four"
  end

  extend Filter

  before_filter :one, :two 
  after_filter :four
end

dish1 = Ingredient.new 
dish1.three 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:42:10.493

Rails 可以避免这种情况，因为它们控制方法的调用方式。但是在这里，您是直接从外部呼叫三个。

为了适应您提出的限制，任何这样做的代码都将是完全怪诞的。另外，后过滤器有什么作用？它确定返回值吗？

我已经实现了与此类似的东西，虽然界面略有不同，可以节省一些怪诞，但仍然很糟糕。[https://gist.github.com/3450271](https://gist.github.com/3450271)

此外，还有一个明显的问题是为什么你需要这样的东西。

# database - 从数据库中检索 jasig cas 服务器的属性

> ID：12313433
> 
> 赞同：2
> 
> 时间：2012-09-07T07:11:35.993
> 
> 标签：database, attributes, cas, saml, jasig

我在从 java cas (JA-SIG) 检索属性时遇到问题。它总是返回 null。

下面是我的代码。我猜`attributeRepository`是从未调用过bean，因为我将表名更改为错误的，并且它运行了，但它没有给出SQL Exception的运行时错误。

这是我的 deployerConfigContext.xml 文件（仅相关部分）

```
<bean id="authenticationManager" class="org.jasig.cas.authentication.AuthenticationManagerImpl">        
    <property name="credentialsToPrincipalResolvers">
        <list>              
            <bean class="org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver">
                <property name="attributeRepository">
                    <ref bean="attributeRepository"/>
                </property>
            </bean>  
        </list>
    </property>
</bean>

 <bean id="attributeRepository" class="org.jasig.services.persondir.support.jdbc.SingleRowJdbcPersonAttributeDao">
      <constructor-arg index="0" ref="dataSource"/>
      <constructor-arg index="1" value="SELECT id,is_admin,screen_name FROM user WHERE {0}"/>
      <property name="queryAttributeMapping">
         <map>
            <entry key="login" value="eroshan@rcapl.com" />
         </map>
      </property>
      <property name="resultAttributeMapping">
         <map>
            <entry key="id" value="150" />
            <entry key="is_admin" value="0" />
            <entry key="screen_name" value="xxxx.." />
         </map>
       </property>                            
 </bean> 
```

下面是我检索属性的客户端代码。`org.jasig.cas.client.authentication.Saml11AuthenticationFilter`用于获取数据。

```
<h1>CAS Attribute Test</h1>
    <p>User Id: <%= request.getRemoteUser() %></p>
<%
    if (request.getUserPrincipal() != null) {
      AttributePrincipal principal = (AttributePrincipal) request.getUserPrincipal();

      Map attributes = principal.getAttributes();
      out.println("attribute :"+attributes.size());
      if (attributes != null) {
        Iterator attributeNames = attributes.keySet().iterator();

        out.println("Received attributes: <b>" + (attributeNames.hasNext() ? "YES!" : "No") + "</b>");
        out.println("<hr><table border='3pt' width='100%'>");
        out.println("<th colspan='2'>Attributes</th>");
        out.println("<tr><td><b>Key</b></td><td><b>Value</b></td></tr>");

        for (; attributeNames.hasNext();) {
          out.println("<tr><td>");
          String attributeName = (String) attributeNames.next();
          out.println(attributeName);
          out.println("</td><td>");
          Object attributeValue = attributes.get(attributeName);
          out.println(attributeValue);
          out.println("</td></tr>");
        }
        out.println("</table>");
      } else {
        out.println("<pre>The attribute map is empty. Review your CAS filter configurations.</pre>");
      }
    } else {
        out.println("<pre>The user principal is empty from the request object. Review the wrapper filter configuration.</pre>");
    }
%> 
```

当我打印属性大小时，它显示为 0。我的代码有什么问题？我在整理这个问题时遇到了很大的麻烦。有很多资源可用于从 Ldap 获取属性，但我需要从我的数据库中获取属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:12:22.723

您的配置看起来不错，但是您需要为您的 CAS 服务定义要返回的属性，而我在提取的配置中看不到这部分：这是在 serviceRegistryDao bean 中为 RegisteredServiceImpl bean 完成的，属性“allowedAttributes”。

一个例子 ：

```
<bean id="serviceRegistryDao" class="org.jasig.cas.services.InMemoryServiceRegistryDaoImpl">
 <property name="registeredServices">
   <list>
     <bean class="org.jasig.cas.services.RegisteredServiceImpl">
       <property name="id" value="0" />
       <property name="name" value="HTTP" />
       <property name="description" value="Only Allows HTTP Urls" />
       <property name="serviceId" value="http://**" />
       <property name="evaluationOrder" value="10000001" />
       <property name="allowedAttributes">
        <list>
          <value>name</value>
          <value>first_name</value>
          <value>middle_name</value>`
... 
```

# ios - UINavigationController 堆栈UITabBarControllers 堆栈其他UINavigationControllers？

> ID：12313439
> 
> 赞同：0
> 
> 时间：2012-09-07T07:12:08.897
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, uinavigationbar, uitabbar

我读到在 iOS 应用程序中拥有这样的结构是很糟糕的。但是如果一个应用程序有很多`UINavigationController`s 和`UITabBarController`s 怎么办。但是一`UINavigationBar`和一`UITabBar`总是只显示？其他`UINavigationBar`s 和`UITabBar`s 被隐藏。

**已编辑**

例如，在基于导航的应用程序中，我称此代码为：

```
- (IBAction)openTabsController:(id)sender {        

    tabOneController *tabOneViewContr = [[[tabOneController alloc] initWithNibName:@"tabOneController" bundle:nil] autorelease];
    UINavigationController *tabOneNavContr = [[UINavigationController alloc] initWithRootViewController:tabOneViewContr];

    tabTwoController *tabTwoViewContr = [[[tabTwoController alloc] initWithNibName:@"tabTwoController" bundle:nil] autorelease];
    UINavigationController *tabTwoNavContr = [[UINavigationController alloc] initWithRootViewController:tabTwoViewContr];

    UITabBarController *tabContr = [[[UITabBarController alloc] init] autorelease];
    tabContr.viewControllers = [NSArray arrayWithObjects:tabOneNavContr,tabTwoNavContr, nil];
    sel.navigationController.navigationBar.hidden = YES;
    [self.navigationController pushViewController:tabContr animated:YES];
} 
```

调用此方法后，我有两个`UINavigationController`s 和一个`UITabBarController`。同时我在屏幕上有一个`UINavigationBar`和一个。`UITabBar`

**已编辑**

近似方案。

![在此处输入图像描述](../Images/9f1e5f386f7bb85465e5074d6140771f.png)

从一开始，我们就有一个 UINavigationController 允许在视图（圆圈）之间导航。然后在按下 UITabBar 后出现并允许在视图之间切换。一个带有两个小矩形的矩形是一个带有 2 个 UITabBarItem 的 UITabBar 的视图。当我们按下任何 UITabBarItem 时，会出现另一个 UIView。在这个 UIView 中，我们可以按下某个按钮，该按钮使用另一个 UITabBar 调用另一个视图。当前的 UITabBar 如果没有被另一个 UITabBar 隐藏，则在推送后可见。现在更清楚了吗？上面的代码几乎可以完美运行（除了一些动画，不包括 Apple 的限制）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:35:51.347

加戈，

我不确定我是否理解您的问题，但苹果文档很清楚。如果你使用`- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated`它说`viewController`：

> **不能是选项卡栏控制器的实例，**并且它不能已经在导航堆栈上。

既然你这样做了

```
[self.navigationController pushViewController:tabContr animated:YES]; 
```

您正在导航堆栈中推送一个标签栏控制器实例。

如果您添加您将实现的结构，也许我可以帮助您找到另一个解决方案。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:50:11.710

一个应用程序在任何时候都应该只有一个工作的 tabBarController。

tabBarController 也应该是根视图控制器。总是。（如果在 tabBarController 之前需要登录视图或类似视图，则删除登录视图，创建 tabBarController，然后将其设为根）。

这是 Apple 工程师亲自向我提出的 Apple 建议。

请记住，应用程序应该是快速且易于使用/导航的小型应用程序。如果您觉得需要多个 tabBarController，那么从 UI/可用性的角度来看，您的应用程序设计可能是非常错误的。

# c# - 如何在 Windows 窗体中设置滚动条

> ID：12313442
> 
> 赞同：4
> 
> 时间：2012-09-07T07:12:16.630
> 
> 标签：c#, .net

我在 .net 中有一个 winform，我放置了太多控件并设置了表单的高度和宽度。但是当我编译表单并减小表单的大小时，我的控件不可见。当我增加表单的大小时，控件在它们自己的位置可见。

当我减小表单大小时，我希望滚动条出现，而当我们增加表单大小时滚动条消失。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T07:15:20.630

您需要将 Panel 控件用作子控件的容器并将“AutoScroll”属性设置为 true。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T07:14:36.080

设置`true`为`AutoScroll`Form 的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T13:17:08.163

在您的表单加载事件中编写此代码，您将获得滚动条，就像我在表单加载事件中编写它一样。

```
private void Form1_Load(object sender, EventArgs e)
{    
    Panel my_panel = new Panel();
    VScrollBar vScroller = new VScrollBar();
    vScroller.Dock = DockStyle.Right;
    vScroller.Width = 30;
    vScroller.Height = 200;
    vScroller.Name = "VScrollBar1";
    my_panel.Controls.Add(vScroller);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T07:33:03.640

您可以使用 Panel、TabControl 或 SplitContainer 控件作为容器，并将所有控件放入其中。将 Panel 控件的 AutoScroll 属性设置为 true 以获取窗体上的滚动条。将 Panel 控件停靠到 Fill 以便它出现在整个表单上。

谢谢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-27T07:21:48.113

在面板中添加对窗体的所有控件，在窗体的 Load 事件中编写以下代码并将窗体的自动滚动属性设置为 true。

```
private void Form1_Load(object sender, EventArgs e)
{
    Panel my_panel = new Panel();
    VScrollBar vScroller = new VScrollBar();
    vScroller.Dock = DockStyle.Right;
    vScroller.Width = 30;
    vScroller.Height = 200;
    vScroller.Name = "VScrollBar1";
    my_panel.Controls.Add(vScroller);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-10T05:56:52.670

必须记住的一件事是，

> 将表单的 AutoScroll 属性设置为 true。

运行时，当窗体具有控件直到高度结束时，如果窗体末尾不包含任何控件并且其上只有空间，则此 AutoScroll 属性不起作用。

# wcf - 在 Silverlight 中使用 WCF Web 服务

> ID：12313443
> 
> 赞同：1
> 
> 时间：2012-09-07T07:12:20.207
> 
> 标签：wcf, silverlight

我无法从 WCF Web 服务中检索结果。结果总是`null`。

这是我的 Silverlight 客户端代码：

```
TTServiceClient client1 = new TTServiceClient();
            client1.GetUserNameCompleted += new EventHandler<GetUserNameCompletedEventArgs>(client1_GetUserNameCompleted);
            client1.GetUserNameAsync();

void client1_GetUserNameCompleted(object sender, GetUserNameCompletedEventArgs e)
        {
            txtUserName.Text = e.Result;
        } 
```

我的 Web 服务实现如下所示：

```
public string GetUserName()
{ 
    return System.Web.HttpContext.Current.User.Identity.Name.ToString(); 
} 
```

但我能够在 wcf 服务中得到结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:17:10.453

无论请求是否成功，Silverlight Web 服务都不会引发任何异常。但是，在您的回调中，您应该始终检查错误`eventargs e.Errors`，在您的情况下，例如：

```
void client1_GetUserNameCompleted(object sender, GetUserNameCompletedEventArgs e)
{
   if(e.Error != null)
   {
       throw new Exception("Web service error: " + e.Error.Message);
   }
   else
   {
       txtUserName.Text = e.Result;
   }
} 
```

据说`e.Error`会告诉你更多关于这个问题的信息。

# php - 用php更新csv中的一列记录

> ID：12313444
> 
> 赞同：0
> 
> 时间：2012-09-07T07:12:22.530
> 
> 标签：php

我的 csv 文件中有两列，例如：

```
 image    gallery

    /1.jpg   /a.jpg;/b.jpg
   .....      ..... 
```

现在我想将图库内容更新为 `/1.jpg;/a.jpg;/b.jpg`. 即添加图片栏的内容和 `;`图库内容。

以下是我的代码。当我运行它时。它无法更新 csv.i 的内容。我被卡住了。

```
$dir   = getcwd();
$files = scandir($dir);
foreach ($files as $file) {
$parts = pathinfo($file);
if ($parts['extension']!="csv") {
    continue;
}
if (($handle = fopen($file, "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 4096, ",")) !== FALSE) {
        $data[1]=$data[0].";".$data[1];
        fputcsv($file, $data);
    }
    fclose($handle);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:21:53.007

以写入或附加模式打开文件并 `fputcsv`期望第一个参数是资源，并且您给出了导致问题的文件路径更改它 `fputcsv($handle, $data);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:56:15.160

请先检查文件权限，然后您必须将句柄更改为读写，并检查数据[1]是否具有值。因为在您的代码中，数据 [0] 只会将行作为字符串获取，该字符串用“;”分隔 所以你必须爆炸它，然后进行操作。

# android - 在android中自定义安装屏幕？

> ID：12313458
> 
> 赞同：0
> 
> 时间：2012-09-07T07:13:40.503
> 
> 标签：android, android-layout, installation

我正在开发应用程序，其中父应用程序下载子应用程序 apk 文件并安装它。但根据要求，我需要将安装屏幕自定义为新屏幕。我认为在 Android 中一切皆有可能..可能也是这样。尝试过或知道他可以做到这一点的人请帮助我？我不知道从哪里开始？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:05:29.310

使用 AsyncTask 从您的 url 下载，这是一个甚至有进度条的示例：[使用 Android 下载文件，并在 ProgressDialog 中显示进度](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)

在下载时，用户界面可以做任何你想做的事情。

下载完成后，将调用 AsyncTask 的 onPostExecute() 方法 - 然后从那里执行下一步。

# google-app-engine - Google Web Toolkit 抛出 java.security.AccessControlException

> ID：12313463
> 
> 赞同：0
> 
> 时间：2012-09-07T07:13:58.217
> 
> 标签：google-app-engine, gwt, accesscontrolexception

我正在尝试从我的 gwt 项目中的服务器端代码中读取 sqlite db。它抛出 AccessControlException。我在网上看了很多，所有解决方案似乎都在禁用 Google App Engine，但是当我这样做时，我无法运行我的项目。我是 GWT 的新手，我不知道 Google App Engine 关闭时它在哪里运行。我可能会寻找这两种解决方案：Google App Engine 设置为能够读取任何文件的任何设置，或我运行我的应用程序的其他引擎。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:24:26.443

问题是 Google App Engine (GAE) 不支持 sqlite（我假设您正在使用 JDBC 阅读它）。

如果您打算创建一个不会在 GAE 上部署的 GWT 项目，您应该从一开始就创建一个禁用此功能的项目，因为之后它就像您现在所经历的那样是一场噩梦。

如果您打算在 GAE 中部署，则必须使用 google 的持久性机制 (JDO) 来存储您的数据。SqlLite 不在此列。

# python - 如何在 SQLAlchemy 中存储和搜索列表？

> ID：12313464
> 
> 赞同：4
> 
> 时间：2012-09-07T07:14:02.420
> 
> 标签：python, sqlalchemy, pyramid

我需要编写两个这样的类：

```
class Item(Base, DBBase):
    __tablename__ = 'items'

    id = Column(Integer, primary_key = True)
    name = Column(String)
    description = Column(String)
    price = Column(Float, default = 0)
    on_sell = Column(Boolean, default = False)

    img = Column(String)

    attributes = relationship('ItemAttribute')

    def __init__(self, name, description):
        self.name = name
        self.description = description

class ItemAttribute(Base, DBBase):
    __tablename__ = 'itemattributes'

    id = Column(Integer, primary_key = True)
    name = Column(String, nullable = False)
    value = Column(String, nullable = False)

    item_id = Column(Integer, ForeignKey('items.id'))
    item = relationship('Item')

    def __init__(self, name, value):
        self.name = name
        self.value = value 
```

一个项目可以拥有多个属性，我需要： 1\. 在类 Item 上插入一些方法，以便轻松地为其执行 CURD（插入、删除、更新和查询）属性。我需要搜索一个项目的属性并返回它的相应值。2.具有按属性搜索物品的能力。例如，某些项目具有 'Feature' = 'True' 的属性。我需要获取所有具有此属性的项目。

感谢帮助。:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:53:09.783

如果将 backref 添加到 ItemAttribute 关系中：

```
item_id = Column(Integer, ForeignKey('items.id', onupdate='CASCADE', ondelete='CASCADE'))
item = relationship(Items, backref='attributes') 
```

这将创建包含 ItemAttribute 的 Item.attributes[] 数组。如果您使用 mysql，还可以添加 onupdate 和 ondelete。

然后当你查询时，你可以这样做：

```
rs = mySession.query(Items)
firstItem = rs.first()
for attribute in firstItem.attributes:
   print attribute 
```

查询时，您可以通过加入 backref 进行过滤：

```
rs = mySession.query(Items).join(Items.attributes).filter(ItemAttribute.name=='somethingSpecial') 
```

此外，如果它是一对一的关系（但在这种情况下不是），您可以通过指定 uselist=False 来跳过该列表：

```
item = relationship(ITEM, backref='attribute', uselist=False) 
```

# http - 从本地机器访问在 android 模拟器中运行的 Web 服务器

> ID：12313468
> 
> 赞同：2
> 
> 时间：2012-09-07T07:14:41.930
> 
> 标签：http, android-emulator, webserver, request

我正在尝试从我的机​​器访问在 android 模拟器上运行的 Web 服务器。我知道反过来，即如何从 android 模拟器（使用 10.0.2.2）访问在本地机器上运行的服务器。我已经搜索了很多关于这些东西的信息，但无法获得任何相关信息。

当服务器启动并在模拟器中运行时，我可以使用 10.0.2.15:portNumber 访问它。我可以对模拟器进行远程登录，但我想知道这会有什么帮助。关于如何连接到模拟器内运行的 Web 服务器的任何建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T06:48:06.023

```
adb forward tcp:[pcPort] tcp:[androidPort] 
```

# c# - 有没有办法使用 iTextSharp 创建可编辑的 PDF 文件？

> ID：12313472
> 
> 赞同：0
> 
> 时间：2012-09-07T07:14:54.293
> 
> 标签：c#, .net-4.0, pdf-generation, itextsharp

我们使用 iTextSharp 使用 C# 创建 PDF 文件。但是当我使用一些 PDF 编辑器对创建的 PDF 文件进行编辑时，我无法完美地进行编辑。因为一些编辑过的文本重叠，一些没有显示或隐藏。所以，我想选择一些其他的方法来使用 iTextSharp 创建可编辑的 PDF 文件。

`editable PDF files`在使用 iTextSharp 构建 PDF 文件时，是否需要添加任何参数（使 PDF 文档可编辑）以便创建？

请指导我摆脱这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:04:21.783

目前尚不清楚您在寻找什么。

PDF 不是用于编辑文本的格式。请阅读`Chapter 6`“iText in Action”的介绍。[http://www.manning.com/lowagie2/samplechapter6.pdf](http://www.manning.com/lowagie2/samplechapter6.pdf)。

但是，有一种方法可以创建交互式 PDF。

浏览`section 6.3.5`并了解一种类型的交互式表单：基于 AcroForm 技术的表单。在`section 6.3.5`中，这样的表单是使用 OpenOffice 创建的。

在`chapter 8`中，您将学习如何使用 iText 创建 AcroForm 表单。当然：在这种形式中，所有坐标都是固定的。定义了一个矩形，不适合该矩形的内容可以按比例缩小（如果字体 = 0）或剪裁。我想这就是你所描述的，但你不是很清楚。

另一种形式是基于`XML Forms Architecture`. 在这种情况下，PDF 用作 XML 的容器。您可以使用`Adobe LiveCycle Designer`. 我不知道任何可以在自动化过程中创建此类表单的“库”。iTextSharp 可以以这种形式注入 XML 来填充它们；我们还有一个名为`XFA Worker`可以展平 XFA 表单的闭源产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:56:45.650

首先你的问题不是很清楚。其次，我假设您正在尝试仅从 C# 代码创建 PDF。

一种视觉改进的方法是使用`Open Office`创建`PDF template`. 然后，在使用模板后，您在模板中创建的可编辑字段中编写。这里有一些代码可以帮助您完成：

```
public class DocumentDownload : PdfTemplateHandler 
{

    protected override string TemplatePath
    {
        get { return "~/App_Data/PdfTemplates/MyDocument_2011_v1.pdf"; }
    }

    protected override void LoadDataInternal()
    {

        documentType = Request["docType"] != null ? Request["docType"].ToString() : "";

        if (uid.Length < 1)
        {
            Response.Write("Invalid request!");
            Response.End();
        }
        // load data

        DownloadFileName = string.Format("MyDocument_{0}_{1}.pdf", 1234, DateTime.Now.ToBinary());
    }

    protected override void SetFieldsInternal(iTextSharp.text.pdf.AcroFields acroFields)
    {

        //iTextSharp.text.pdf.BaseFont unicode = iTextSharp.text.pdf.BaseFont.createFont(unicodeFontPath, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);            
        //var unicodeFont = iTextSharp.text.pdf.BaseFont.CreateFont(iTextSharp.text.FontFactory.TIMES_ROMAN, iTextSharp.text.pdf.BaseFont.IDENTITY_H, iTextSharp.text.pdf.BaseFont.EMBEDDED);
        acroFields.SetField("txtrNumber", Number.ToString());

        acroFields.SetField("cbTaxi", "Yes");

    }
}

public abstract class PdfTemplateHandler : IHttpHandler
{
    public virtual bool DownloadAsAttachment
    {
        get
        {
            return true;
        }
    }

    protected virtual TimeSpan PdfTemplateCacheDuration
    {
        get
        {
            return TimeSpan.FromMinutes(30);
        }
    }

    protected virtual string PdfTemplateCacheKey
    {
        get
        {
            return string.Format("__PDF_Template[{0}]", TemplatePath);
        }
    }

    protected string DownloadFileName { get; set; }

    protected HttpContext Context { get; private set; }

    protected HttpResponse Response { get; private set; }

    protected HttpRequest Request { get; private set; }

    #region IHttpHandler Members

    public bool IsReusable
    {
        get { return false; }
    }

    public void ProcessRequest(HttpContext context)
    {

        Context = context;
        Response = context.Response;
        Request = context.Request;

        try
        {
            LoadDataInternal();
        }
        catch (ThreadAbortException)
        {
            // no-op
        }
        catch (Exception ex)
        {
            //Logger.LogError(ex);
            Response.Write("Error!");
            Response.End();
        }

        Response.BufferOutput = true;
        Response.ClearHeaders();
        Response.ContentType = "application/pdf";

        if (DownloadAsAttachment)
        {
            Response.AddHeader("Content-Disposition", "attachment; filename=" +
                (string.IsNullOrEmpty(DownloadFileName) ? context.Session.SessionID + ".pdf" : DownloadFileName));
        }

        PdfStamper pst = null;
        try
        {
            PdfReader reader = new PdfReader(GetTemplateBytes());
            pst = new PdfStamper(reader, Response.OutputStream);
            var acroFields = pst.AcroFields;

            pst.FormFlattening = true;
            pst.FreeTextFlattening = true;
            pst.SetFullCompression();

            SetFieldsInternal(acroFields);
            pst.Close();
        }
        finally
        {
            if (pst != null)
                pst.Close();
        }
    }

    #endregion

    #region Abstract Members for overriding and providing functionality

    protected abstract string TemplatePath { get; }

    protected abstract void LoadDataInternal();

    protected abstract void SetFieldsInternal(AcroFields acroFields);

    #endregion

    protected virtual byte[] GetTemplateBytes()
    {
        var data = Context.Cache[PdfTemplateCacheKey] as byte[];
        if (data == null)
        {
            data = File.ReadAllBytes(Context.Server.MapPath(TemplatePath));
            Context.Cache.Insert(PdfTemplateCacheKey, data,
                null, DateTime.Now.Add(PdfTemplateCacheDuration), Cache.NoSlidingExpiration);
        }
        return data;
    }

    protected static string unicode_iso8859(string src)
    {
        Encoding iso = Encoding.GetEncoding("iso8859-2");
        Encoding unicode = Encoding.UTF8;
        byte[] unicodeBytes = unicode.GetBytes(src);
        return iso.GetString(unicodeBytes);
    }
    protected static string RemoveDiacritics(string stIn)
    {
        string stFormD = stIn.Normalize(NormalizationForm.FormD);
        StringBuilder sb = new StringBuilder();

        for (int ich = 0; ich < stFormD.Length; ich++)
        {
            UnicodeCategory uc = CharUnicodeInfo.GetUnicodeCategory(stFormD[ich]);
            if (uc != UnicodeCategory.NonSpacingMark)
            {
                sb.Append(stFormD[ich]);
            }
        }

        return (sb.ToString().Normalize(NormalizationForm.FormC));
    }

} 
```

PDF 模板是**可缓存**的。调试时请记住这一点。

# android - 在android中动态绘制圆形，椭圆形，ractangles等形状

> ID：12313473
> 
> 赞同：2
> 
> 时间：2012-09-07T07:14:55.093
> 
> 标签：android

我是android的新手。我想在 android 中动态绘制不同的形状，如圆形、矩形、椭圆形等，就像其他 pdf 阅读器如 repligo 等一样。请建议我...

# android - 在android中自定义ActionBar

> ID：12313477
> 
> 赞同：0
> 
> 时间：2012-09-07T07:15:17.053
> 
> 标签：android, xml, android-actionbar

我需要在我的应用程序左侧的操作栏中显示返回按钮

这是我使用的代码

```
 <?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/back"
        android:icon="@drawable/back1"
        android:showAsAction="always|withText"/>

</menu> 
```

但是使用此选项菜单，我在 LHS 上获得应用程序名称和应用程序图标，在 RHS 上获得后退按钮我想从我的活动中删除应用程序图标并在操作栏中仅显示后退按钮

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:24:22.200

考虑使用

```
ActionBar ab = getActionBar();
ab.setDisplayHomeAsUpEnabled(true); 
```

或者你可以在标题的地方膨胀你自己的布局

```
Button yourView = findViewById(R.id.yourButton);
ab.setCustomView(yourView)); 
```

# c# - 如何替换 XML 中的标签

> ID：12313478
> 
> 赞同：1
> 
> 时间：2012-09-07T07:15:17.537
> 
> 标签：c#, html, xml, tags

我有一个 xml 标签，如：

`<p xmlns="http://www.w3.org/1999/xhtml">Text1<span title="instruction=componentpresentation,componentId=1234,componentTemplateId=1111">CPText2CP</span></p>`

如果我必须`<span title="instruction=componentpresentation,componentId=1234,componentTemplateId=1111">CPText2CP</span>` 用

`<componentpresentation componentID="1234" templateID="1111" dcpID="dcp1111_1234" dcplocation="/wip/data/pub60/dcp/txt/dcp1111_1234.txt">Text2</componentpresentation>`

是否有任何可能的方式来实现这一点，请提出建议/更改。

**编辑**

从上面的标签中，我可以将完整`<span></span>`标签作为一个字符串，标签之间有文本。任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:43:39.320

你可以这样做：

```
 string input = @"
            <p xmlns=""http://www.w3.org/1999/xhtml"">
                Text1
                <span title=""instruction=componentpresentation,componentId=1234,componentTemplateId=1111"">
                    CPText2CP
                </span>
            </p>";

        XDocument doc = XDocument.Parse(input);
        XNamespace ns = doc.Root.Name.Namespace;

        // I don't know what filtering criteria you want to use to 
        // identify the element that you wish to replace,
        // I just searched by "componentId=1234" inside title attribute
        XElement elToReplace = doc
            .Root
            .Descendants()
            .FirstOrDefault(el => 
                el.Name == ns + "span" 
                && el.Attribute("title").Value.Contains("componentId=1234"));

        XElement newEl = new XElement(ns + "componentpresentation");

        newEl.SetAttributeValue("componentID", "1234");
        newEl.SetAttributeValue("templateID", "1111");
        newEl.SetAttributeValue("dcpID", "dcp1111_1234");
        newEl.SetAttributeValue("dcplocation", 
            "/wip/data/pub60/dcp/txt/dcp1111_1234.txt");

        elToReplace.ReplaceWith(newEl); 
```

您的需求可能会有所不同，但要走的路是创建`XDocument`或`XElement`搜索它以查找需要替换的元素，然后用于`ReplaceWith`替换它们。请注意，您必须考虑命名空间，否则将无法检索元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:21:52.477

是的。

请执行下列操作：

1.  [读取文件](http://support.microsoft.com/kb/307548)（作为 XML 或[纯文本](http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx)）
2.  搜索[标签](http://www.daniweb.com/software-development/csharp/threads/195928/how-do-i-read-specific-tag-in-xml-using-c)/[序列或其子字符串](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)
3.  [将序列替换为新序列](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)

# c# - 如何从 Windows 向 Epson 点阵打印机发送控制代码

> ID：12313481
> 
> 赞同：1
> 
> 时间：2012-09-07T07:15:27.553
> 
> 标签：c#, escaping, sequence, epson

我想向 EPSON 打印机发送一些控制代码。我尝试了很多方法，从命令提示符发送原始文本文件，在 c# 上制作打印程序，创建通用/纯文本打印机，但没有任何效果。当我发送代码时，打印机什么也不做，打印机正在使用 ESC/P2 控制集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:25:55.440

在这里你可以得到爱普生打印机代码

[http://www.lprng.com/DISTRIB/RESOURCES/PPD/epson.htm](http://www.lprng.com/DISTRIB/RESOURCES/PPD/epson.htm)

在发送要打印的文本时，您需要在打印文本中附加这些字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T09:12:16.250

如果附加 ESC 字符也会打印在页面上。如何不在页面上打印命令。

维维克

# c# - 将套接字绑定到接口而不是 IP

> ID：12313484
> 
> 赞同：0
> 
> 时间：2012-09-07T07:15:44.057
> 
> 标签：c#, sockets

我正在编写一个数据包嗅探器，我正在使用 Socket.BeginReceive 接收发送到本地机器的数据包。使用 Socket.Bind，我可以连接到基于 IPEindPoint IpAdress 的 NIC 接口。但是在某些情况下，没有为 NIC 配置 IP 地址（NIC 使用本机驱动程序发送 IP TCP/UDP 数据包）。

如何将 Socket.Bind 连接到没有 IP 地址的 NIC？

# iscroll4 - iScroll - 属性未定义错误

> ID：12313485
> 
> 赞同：0
> 
> 时间：2012-09-07T07:15:48.817
> 
> 标签：iscroll4

我正在尝试在一页上添加 2 个 iScroll 实例，但我认为这不是原因：

```
function loaded() {

    $('.iScrolls').each(function(){
        var $this = $(this);
        var $id = $this.attr('id');
        if( $id ) {
            $scrollers[$id] = new iScroll( $id, {
                snap: true,
                momentum: false,
                hScrollbar: false,
                onScrollEnd: function () {
                    $('#indicator > li.active').removeAttr('class');
                    $('#indicator > li:nth-child(' + ( this.currPageX + 1) + ')').removeAttr('class').addClass('active');
                }                              
            });
            $('.prev', $this).click(function(){
                $scrollers[$id].scrollToPage('prev', 0);
                return false;            
            });
            $('.next', $this).click(function(){
                $scrollers[$id].scrollToPage('next', 0);
                return false;                
            });
        }
    });
}

document.addEventListener('DOMContentLoaded', loaded, false); 
```

当触发“scrollToPage”时，出现错误：

`Uncaught TypeError: Cannot read property 'length' of undefined`

`iScroll.scrollTo iScroll.js:984`

`iScroll._end iScroll.js:614`

`iScroll.handleEvent`

我的问题是以前有没有人遇到过这种情况并知道是什么原因造成的？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:04:56.357

试图在一个隐藏的容器中初始化……那是不行……干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-23T08:45:29.113

.iScrolls 是您的 div 类名称。你能在那个div上创建一个id吗？

例子：

```
<div class="iScrolls" id="iScrolls">
    <div id="main">
        <div id="thelist">
                // Body part
        </div>
     </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-09T07:21:47.303

刚碰到这个。最终成为一个愚蠢的错误，因为我传递了 jQuery 样式“#wrapperID”，而不仅仅是元素 id“wrapperID”

希望对某人有所帮助。

# desire2learn - 如何在 Desire2Learn 的 Valence API 中为用户获取当前课程？当课程数以千计时，我们可以做些什么来获取？

> ID：12313486
> 
> 赞同：1
> 
> 时间：2012-09-07T07:15:51.140
> 
> 标签：desire2learn

我们需要找到`startDate`小于今天日期且`endDate`大于今天日期的用户的所有课程。我们正在使用 API

```
/d2l/api/lp/{ver}/enrollments/myenrollments/?orgUnitTypeId=3 
```

在一个特殊情况下，我有超过 18000 门课程针对一位用户。服务无法一次性返回 18000 条记录，我一次只能获取 100 条记录，所以我需要使用书签字段以 100 条记录为一组获取数据。Bookmark 是我们获取的最后 100 条记录的 courseId，用于获取下一组 100 条记录。

```
/d2l/api/lp/{ver}/enrollments/myenrollments/?orgUnitTypeId=3&bookmark=12528 
```

我需要重复循环 180 次，结果是`"Request time out" error`. 我需要根据`startDate`and过滤记录`endDate`，没有提到可以根据`startDate`or对数据进行排序的排序标准`endDate`。谁能帮我找出对这些数据进行排序的方法，或者告诉任何其他可以进行此类排序的 API？

注：18000条记录全部有属性`"IsActive":true`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:55:56.733

您可以尝试通过组织单位列表获取用户，而不是按用户获取组织单位列表。您可以尝试使用`/d2l/api/lp/{ver}/orgstructure/{orgUnitId}/descendants/?ouTypeId={courseOfferingType}`来检索来自用户注册的最高共同祖先的课程提供 ID 的整个列表。然后，您可以循环`/d2l/api/lp/{ver}/courses/{orgUnitId}`以获取每个组织单位的课程提供信息，以根据日期预先过滤并删除您不关心的所有课程提供。然后，对于剩下的那些，您可以检查用户在每一个中的注册情况，以确定用户与您的较小集合中的哪一个匹配。

这肯定会导致对服务的调用*更多*，而不是更少，所以我可以看到它只有两个优点：

*   您*应该*能够立即获得所需的全部起始课程集，而不是在页面中重新获得（尽管将来此调用完全有可能变成寻呼调用，并且“获取所有组织单位一次”目前已弃用的性质）。

*   如果您需要为多个用户执行整个用例，您可以*一次*获取组织结构数据，将其缓存，然后仅对数据子集上的用户进行查询。

同时，我认为请求增强注册调用以提供更好的过滤（活动/非活动、开始日期、结束日期等）是完全合理的：我怀疑这样的请求可能比一个请求让客户端控制分页（即每个页面框架中的响应数）。

# java - 在android中读取XML响应

> ID：12313488
> 
> 赞同：1
> 
> 时间：2012-09-07T07:16:00.460
> 
> 标签：java, android, xml, http, get

我正在尝试从以下 url [http://sagt.vizushop.com/DefaultSimple.aspx?command=default读取 XML 响应](http://sagt.vizushop.com/DefaultSimple.aspx?command=default)

我在我的 android 项目中使用以下代码来获取第一项，然后是它的第二个节点的值。

```
String uri="http://sagt.vizushop.com/DefaultSimple.aspx?command=default";
String [] data=new String [9];
try{
    URL url = new URL(uri);
    HttpURLConnection con = (HttpURLConnection) url.openConnection();
    con.setRequestMethod("GET");
    con.setDoOutput(true);

    con.connect();
    data = new String[9];
    if (con.getResponseCode() == HttpURLConnection.HTTP_OK) {                        
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(con.getInputStream());
        NodeList itemnodes=doc.getElementsByTagName("item");
        Node firstitemnode=itemnodes.item(0);
        NodeList childnodesoffirstitemnode=firstitemnode.getChildNodes();
        Node firstnodeOffirstitem=childnodesoffirstitemnode.item(1);
        String contenturl=firstnodeOffirstitem.getNodeValue().toString();
        data[0] = contenturl;
    } 
```

但它给出了 java.lang.NullPointerException。

请帮忙

预先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:29:53.173

请使用以下代码使用 Dom Parser 进行 XML 解析。

```
public class XMLParsingDOMExample extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /** Create a new layout to display the view */
        LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(1);

        /** Create a new textview array to display the results */
        TextView id[];
        TextView imageurl[];

        try {

            URL url = new URL("http://sagt.vizushop.com/DefaultSimple.aspx?command=default");
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(new InputSource(url.openStream()));
            doc.getDocumentElement().normalize();

            NodeList nodeList = doc.getElementsByTagName("item");

            /** Assign textview array lenght by arraylist size */
            id = new TextView[nodeList.getLength()];
            imageurl = new TextView[nodeList.getLength()];

            for (int i = 0; i < nodeList.getLength(); i++) {

                Node node = nodeList.item(i);

                id[i] = new TextView(this);
                imageurl[i] = new TextView(this);

                Element fstElmnt = (Element) node;
                NodeList idList = fstElmnt.getElementsByTagName("item_id");
                Element idElement = (Element) idList.item(0);
                idList = idElement.getChildNodes();
                id[i].setText("id is = " + ((Node) idList.item(0)).getNodeValue());

                NodeList imageurlList = fstElmnt.getElementsByTagName("item_image");
                Element imageurlElement = (Element) imageurlList.item(0);
                imageurlList = imageurlElement.getChildNodes();
                imageurl[i].setText("imageurl is = " + ((Node) imageurlList.item(0)).getNodeValue());

                layout.addView(id[i]);
                layout.addView(imageurl[i]);
            }
        } catch (Exception e) {
            System.out.println("XML Pasing Excpetion = " + e);
        }

        /** Set the layout view to display */
        setContentView(layout); 
    }
} 
```

有关更多信息，请参见下面的链接。

[Dom 解析示例](http://www.androidpeople.com/android-xml-parsing-tutorial-%E2%80%93-using-domparser)

# iphone - 如何在单击按钮时立即打开视图控制器

> ID：12313489
> 
> 赞同：0
> 
> 时间：2012-09-07T07:16:04.773
> 
> 标签：iphone

我正在为 iPhone 开发一个电子商务应用程序，当用户单击即将到来的视图的按钮时，我需要立即打开一个视图，数据从服务器加载大图像，以加载我正在使用后台线程的图像。

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T07:31:48.070

很简单，以下是如何`UIViewController`从`IBAction`.

```
- (IBAction)goToNextView:(id)sender
    {
     //if you are using xibs use this line
        UIViewController *controller = [[UIViewController alloc] initWithNibName:@"myXib" bundle:[NSBundle mainBundle]];
    //if you are using storyboards use this line
        UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"myViewControllersID"];

    //to present the controller modally use this
        [self presentViewController:controller animated:NO completion:nil];
    //or if you are pushing to this controller using a navigation controller use this
        [self.navigationController pushViewController:controller animated:NO];
    } 
```

一定要传递动画`NO`，以便立即显示视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:20:17.400

您可以为此使用模态视图控制器

```
- (IBAction)showController:(id)sender {
    SampleViewController *sampleView = [[SampleViewController alloc] init];
    [self presentModalViewController:sampleView animated:YES];
} 
```

这是教程[http://timneill.net/2010/09/modal-view-controller-example-part-1/](http://timneill.net/2010/09/modal-view-controller-example-part-1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:22:51.183

您需要制作一个按钮，然后添加其操作，例如

```
-(IBAction)ButtonAction:(id)sender{

CalController *calculateView=[[CalController alloc] initWithNibName:@"CalController" bundle:nil];
[self.navigationController presentModalViewController:calculateView animated:NO]; 
```

}

# c++ - G++ 显示关于未定义命名空间的错误

> ID：12313490
> 
> 赞同：3
> 
> 时间：2012-09-07T07:16:10.280
> 
> 标签：c++, gcc, header, include, compiler-errors

我有 3 个文件要用 G++ 编译，主文件是这样的：

```
//main.cpp

#include "test.hpp"

int main(int argc,char** args) {
  //
} 
```

第二个文件是头文件：

```
//test.hpp

namespace shared {
  class test {

    //constructor 
    test();
  };
} 
```

最后一个文件是 test.hpp 的代码文件

```
//test.cpp

shared::test::test() {
  //
} 
```

我以这种方式使用 G++ 进行编译：

```
g++ -c main.cpp test.cpp 
```

但是，G++ 抱怨文件“test.cpp”中未定义的标识符“shared”。在命令行中，我已经传入了包含头文件的文件“main.cpp”。如何解决这个问题？我只想让所有的 '#include' 都在 main.cpp 中，而不是其他地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T07:23:45.013

`#include "test.hpp"`在开头添加`test.cpp`。

编译器不关心命令行中文件的顺序。它只影响链接器。另请注意，编译多文件项目的常用方法是将它们中的每一个编译为不同的子对象，如下所示：

```
g++ main.cpp -o main.o
g++ test.cpp -o test.o
ld main.o test.o -o program[.exe] 
```

这允许您只重新编译真正改变的文件。如果你想了一会儿，你会发现一个`.cpp`文件可以包含许多头，没有问题；但是，当您的标头开始包含许多标头时，编译时间将会增加。前向声明可以帮助解决这些问题，但是对于您的简单示例，简单的解决方案将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:24:15.260

你必须`#include "test.hpp"`在你的`test.cpp`文件中说。命名空间声明必须是已知的。

# c++ - 拷贝构造函数理解

> ID：12313492
> 
> 赞同：1
> 
> 时间：2012-09-07T07:16:20.897
> 
> 标签：c++, copy-constructor

我正在通过[这个](http://www.tutorialspoint.com/cplusplus/cpp_copy_constructor.htm)再次研究复制构造函数。

**代码：**

```
#include <iostream>

using namespace std;

class Line
{
   public:
      int getLength( void );
      Line( int len );             // simple constructor
      Line( const Line &obj);  // copy constructor
      ~Line();                     // destructor

   private:
      int *ptr;
};

// Member functions definitions including constructor
Line::Line(int len)
{
    cout << "Normal constructor allocating ptr" << endl;
    // allocate memory for the pointer;
    ptr = new int;
    *ptr = len;
}

Line::Line(const Line &obj)
{
    cout << "Copy constructor allocating ptr." << endl;
    ptr = new int;
   *ptr = *obj.ptr; // copy the value
}

Line::~Line(void)
{
    cout << "Freeing memory!" << endl;
    delete ptr;
}
int Line::getLength( void )
{
    return *ptr;
}

void display(Line obj)
{
   cout << "Length of line : " << obj.getLength() <<endl;
}

// Main function for the program
int main( )
{
   Line line(10);

   display(line);

   return 0;
} 
```

**输出：**

```
Normal constructor allocating ptr
Copy constructor allocating ptr.
Length of line : 10
Freeing memory!
Freeing memory! 
```

我想知道为什么它在`Line line(10)`. 我认为它应该只调用普通的构造函数。我没有在这里克隆任何对象。请有人向我解释一下。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T07:18:53.283

调用复制构造函数是因为函数参数是按值传递的。这里

```
void display(Line obj) 
```

该函数被定义为`Line`按值获取参数。这会导致生成参数的副本。如果您通过引用传递，则不会调用复制构造函数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T07:19:00.403

> **我想知道为什么它在`Line line(10)`.**

不，不是的。
它只是为以 a作为参数的`Line`类构造函数调用构造函数。`int`

* * *

```
void display(Line obj) 
```

***按值***传递`Line`对象，因此调用复制构造函数来创建传递给函数的副本。

 *在 C++ 中，函数参数默认按值传递。这些对象的副本是通过调用该类的复制构造函数来创建的。*

# python - 如何有条件地过滤 python 列表中的第一项？

> ID：12313495
> 
> 赞同：1
> 
> 时间：2012-09-07T07:16:44.940
> 
> 标签：python, list

我有以下功能：

```
def filterArgs( args ):
    filterflag = len(args)>=1 and args[0] == "-i"
    if flag:
        args = " ".join(args[1:]).strip()
    else:
        args = " ".join(args).strip() 
```

在我的代码中，我这样称呼它：

```
filterArgs( [ 106645929 ] )       #example 1
filterArgs( [ "-i", 106645929 ] ) #example 2 
```

有没有办法在 C 中使用条件运算符之类的东西并忽略 func `filterArgs`？

```
args = filterflag ? args[1:] : args 
```

我的目标是少写几行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T07:19:14.820

在 python 中，C`cond ? iftrue : iffalse`转换为`iftrue if cond else iffalse`

因此，`args = args[1:] if filterflag else args`

# xamarin.ios - 安装以前版本的 MonoTouch

> ID：12313497
> 
> 赞同：2
> 
> 时间：2012-09-07T07:16:52.043
> 
> 标签：xamarin.ios, installation

哟，

我已经安装了 MonoTouch 5.4 的全新（更新）版本。在我的代码中，事情不再编译，调用ctors AVPLayerItem、AVAssetReader 和 AVAssetWritter ......我不想在接下来的几天里改变。所以我的问题是：如何重新安装 MonoTouch 5.3.6？

干杯，帕特里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T07:28:43.887

支持 (support@xamarin.com) 应该能够为您提供下载以前的 beta 版本的链接。

如果您想要一个稳定版本（例如 MonoTouch 5.2.13），您可以从您的[Xamarin Store](https://store.xamarin.com/account/Products)帐户自行下载。

# vba - VBA 中的重构 - 将部分代码移动到函数中不起作用

> ID：12313499
> 
> 赞同：1
> 
> 时间：2012-09-07T07:16:59.703
> 
> 标签：vba, excel, refactoring

我对 VBA Excel 相当陌生。我试图通过将代码块插入函数然后调用函数而不是块来重构一些 VBA 宏。这段代码在宏中被多次复制粘贴（仅更改一个常量）。但是，旧解决方案有效，而具有功能的新解决方案则无效。它甚至不会抛出错误消息，它只会冻结整个 Excel 应用程序。你碰巧知道我可能做错了什么吗？

编辑：宏从 SAP 调用，如果它有任何区别。

**老的：**

```
Dim tbl As Object
If ThisWorkbook.Container.LinkServer.Items("ITEMS").Table Is Nothing Then
  Exit Sub
Else
  Set tbl = ThisWorkbook.Container.LinkServer.Items("ITEMS").Table
  maxNumRow = ThisWorkbook.Container.LinkServer.Items("ITEMS").Table.rowCount
  '... (do stuff) 
```

**新的：**

```
Dim tbl As Object
If LinkServer_Table("ITEMS", tbl, maxNumRow) = True Then
  '... (do stuff)

...
Function LinkServer_Table( _
  ByVal name As String, _
  ByRef tbl As Object, _
  Optional ByRef rowCount As Long)

  If ThisWorkbook.Container.LinkServer.Items(name).Table Is Nothing Then
    LinkServer_Table = False
  Else
    Set tbl = ThisWorkbook.Container.LinkServer.Items(name).Table
    rowCount = ThisWorkbook.Container.LinkServer.Items(name).Table.rowCount
    LinkServer_Table = True
  End If
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:35:39.057

在*Treb*指出“名称”参数存在问题后，我专注于它，经过一些试验错误后，我得到了下面的工作版本。我仍然不太明白发生了什么，但它正在工作。

```
Function LinkServer_Table( _
  ByVal name As String, _
  ByRef tbl As Object, _
  Optional ByRef maxRows As Long)

    If ThisWorkbook.Container.LinkServer.Items(CVar(name)).Table Is Nothing Then
        LinkServer_Table = False
    Else
        Set tbl = ThisWorkbook.Container.LinkServer.Items(CVar(name)).Table
        maxRows = ThisWorkbook.Container.LinkServer.Items(CVar(name)).Table.RowCount
        LinkServer_Table = True
    End If
End Function 
```

但是，我也高度重视*Jean-François Corbett*的意见，并尝试以更简洁的方式重构代码。最后我意识到代码可以直接在原地重写成非常短且可读的块：

```
Dim tbl As Object        
Set tbl = ThisWorkbook.Container.LinkServer.Items("ITEMS").Table
If Not tbl Is Nothing Then
  maxNumRow = tbl.RowCount
  '...(do stuff) 
```

谢谢你们两位的意见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:20:24.647

您需要定义函数的返回类型：

```
Function LinkServer_Table( _
  ByVal name As String, _
  ByRef tbl As Object, _
  Optional ByRef rowCount As Long) As Boolean 
```

# jsf - jsf primefaces '更新中心面板'

> ID：12313501
> 
> 赞同：0
> 
> 时间：2012-09-07T07:17:04.903
> 
> 标签：jsf, primefaces

我正在使用带有primefaces的jsf。根据用户在侧面板菜单中的选择，我成功地单独更新了中心面板。但是没有一个功能起作用。

换句话说：

我有一个包含应该出现在所有页面中的所有菜单的 xhtml。我正在更新中心面板。但是无法识别在中心面板中更新的页面的相应托管 bean。

有什么建议么？

更新：代码

```
public void show(){ 
  String node=selectedNode.toString(); 
  List<Pages> pagesList=loginsessinbean.findPageByTitle(node);
  linkValue = pagesList.get(0).getPagePath();    
  System.out.println("Selection=="+linkValue); displayModule();
}
public String displayModule() {
  String url="localhost:8080/MPCS-war/faces"+linkValue;
  System.out.println("URL ---"+url);
  return url;
} 
```

# sql - 在两个 sql 服务器之间运行同步命令

> ID：12313507
> 
> 赞同：0
> 
> 时间：2012-09-07T07:17:26.723
> 
> 标签：sql, sql-server, sql-server-2008

我正在从我的应用程序在 server1 上运行一个存储过程。存储过程做了很多事情，并用过程的结果填充 server2 上的表。

我正在使用链接服务器来完成此操作。

当存储过程完成运行时，应用程序继续并尝试对存储过程的结果进行一些操作。

我的问题是存储过程的结果还没有完全插入到表中，所以对表的操作失败了。

所以我的问题是。是否可以确保链接服务器上的插入是同步完成的？我希望在链接服务器上的表实际完成之前不返回存储过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:28:49.417

您可以使用第一个过程的输出参数。在第二台服务器上创建表时，输出参数值将返回到您的应用程序并指示操作已准备好。

如果事情很困难，那么您可以尝试为您的存储过程设置不同的隔离级别：

[http://msdn.microsoft.com/en-us/library/ms173763.aspx](http://msdn.microsoft.com/en-us/library/ms173763.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:06:45.543

我找到了这种奇怪行为的原因。在调试期间添加的存储过程中有一行代码在同一个表中的数据写入链接服务器之前对临时 mem 表进行了选择。

当 select 语句运行时，控制权被交还给我的应用程序，同时存储过程继续运行。我猜存储过程从一开始就是同步运行的。

# vb.net - 使用 dataset.tables.select 方法对数据集对象进行排序

> ID：12313508
> 
> 赞同：0
> 
> 时间：2012-09-07T07:17:29.190
> 
> 标签：vb.net, datatable, dataset

请帮助我处理这段代码...我有一个包含这些字段的表（cCLID，cCLID，nLID）nLID 是一个数字，但是当我对其进行排序时，结果显示这个序列（1,10,2,3， 4,5...）但我想这样排序（1,2,3,4,5...10）

```
sDataSet.Tables(tmp(0).Name).Select("cCLID='" & _cCLID.Text_Value & "'", "Convert(Numberic(18,0),nLID) ASC") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:34:28.213

使用类似 Sort_NLID 的临时字段并将其填写在 SQL 中，如：

```
CASE WHEN ISNUMERIC(NLID) = 1 THEN CAST(NLID AS INTEGER) ELSE -1 END AS Sort_NLID 
```

然后排序

```
sDataSet.Tables(tmp(0).Name).Select("cCLID='" & _cCLID.Text_Value & "'", "Sort_NLID, nLID") 
```

# ios - 在IOS中使用addsubview合并两个viewcontroller的代码

> ID：12313513
> 
> 赞同：-2
> 
> 时间：2012-09-07T07:17:48.283
> 
> 标签：ios, webview, tableview, addsubview

我想将我的代码分成 3 个文件，然后通过 addsubview 将它们分解。例如。我有一个masterview，masterreview 包含一个currentView。CurrentView 包含 1 个 webview 和 1 个 tableview。现在，我已经在一个文件中编写了所有代码，它就像一个魅力。但我想让它抽象和松耦合。所以我需要一个单独的文件前。webviewController 来实现它的委托和与之相关的函数和 tableviewController 来实现它的委托和与之相关的函数。并通过 addsubview、alloc init 在 masterview 文件中添加两者。

我按照自己的方式做了，虽然我能够在 CurrentView 上添加子视图，但问题是我的委托功能无法正常工作。另外，我对 tableviewController 应该继承 UIViewController 或 UIView 或 UITableView 感到困惑。

如果任何人都可以指导或发送一些与之相关的链接，那就太好了，任何例子......？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:50:21.467

实际上，如果代表没有保留在某处，您应该让应用程序崩溃。

如果您确实将对象与视图控制器链接为它在 Interface Builder 中的委托，则视图控制器将在其出口后被销毁，因此您不在乎。如果您为委托创建单独的类，则应该关心它的生命周期，标准类不保留其委托，因此您必须将其保留在保留委托对象的同一级别。就像您正在创建一个`UITableView`子视图并且您有`MyTVDelegate`类一样，您应该创建委托实例，将其分配给`tableView.delegate`并保留为 viewController var，以便 viewController 在需要时释放子视图及其委托。

对于第二个问题，如您在头文件中看到的那样`UITableviewController`继承（command+click on ），并继承. 每个视图控制器都应该有根视图，我相信它是根视图。`UIViewController``UITableviewController``UITableView``UIView``UIView``UITableviewController``UITableView`

# joomla - 如何在 joomla 2.5 中调用工具提示？

> ID：12313514
> 
> 赞同：1
> 
> 时间：2012-09-07T07:17:49.540
> 
> 标签：joomla, joomla2.5

在 default.php

```
JHTML::_('behavior.tooltip');
<a href="#">
<?php echo JHTML::tooltip('test test test', 'title', '', 'title');?></a> 
```

但它不能显示工具提示？如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T08:31:49.843

文本的工具提示是这样完成的：

```
JHtml::_('behavior.tooltip');
echo JHtml::tooltip('Tooltip Text', 'Tooltip Title', '', 'Text to be hovered over'); 
```

和图像的工具提示，可以像这样完成：

```
JHtml::_('behavior.tooltip');
JHtml::tooltip('Tooltip Text', 'Tooltip title', 'tooltip.png', '', '', false); 
```

欲了解更多信息，请阅读[Joomla Docs on Tooltips](http://docs.joomla.org/How_to_add_tooltips_to_your_Joomla!_website)：

# php - 在脸书上发帖解锁

> ID：12313518
> 
> 赞同：0
> 
> 时间：2012-09-07T07:18:03.977
> 
> 标签：php, facebook

我为用户提供了一些特殊功能，它们向他们的 Facebook 发送关于我的服务的帖子，那里有很多脚本可以检测到“喜欢”，然后我们可以为用户解锁一些功能（喜欢解锁），但我希望用户发布帖子然后解锁该功能，而不仅仅是喜欢。

使用我的 FB like 按钮，在喜欢它之后，它会自动打开一个小窗口，以便他们可以发布一些东西，我如何检测 POSTS 而不仅仅是 Like？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:04:33.783

> 但我希望用户发布帖子然后解锁该功能

这将违反[Facebook 平台政策](http://developers.facebook.com/policy/)：

> 四。应用程序集成点，
> 
> 1.) 您不得激励用户使用（或在使用 Facebook 社交渠道后屏蔽内容），或暗示激励与使用我们的渠道直接相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T21:37:03.143

```
<?php
session_start(); //start PHP session
session_regenerate_id(true); //Generated new session id
?>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test Project</title>
<script type="text/javascript" src="js/jquery.js"></script>
</head>

<body>
<div id="tweet_content" class="locked_ct"><h5>Tweet to Unlock this Content</h5>
<a href="https://twitter.com/share" class="twitter-share-button" data-via="saaraan">Tweet</a>
</div>

<script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script>
<script type="text/javascript">
//All event bindings must be wrapped within callback function
twttr.ready(function (twttr) {

    //######## trigger when the user publishes his tweet
    twttr.events.bind('tweet', function(event) {

        /*
        To make locked items little more private, let's send our base64 encoded session key
        which will work as key in send_resources.php to acquire locked items.
        */
        var data = {unlock_key : '<?php echo base64_encode(session_id());?>'};
        //Load data from the server using a HTTP POST request.
        $.post("send_resources.php", data, function(data)
        {
            //Append unlocked content into div element
            $('#tweet_content').html(data);

        }).error(function(xhr, ajaxOptions, thrownError) {
            //Output any errors from server.
            alert( thrownError);
        });
    });

});

</script>

</body>
</html>

<?php
session_start(); // session start

//retrive base64 encoded post variable and compare it with session id.
if (isset($_POST["unlock_key"]) && base64_decode($_POST["unlock_key"])===session_id())
{
    //user unlocked item by tweeting.
    echo "Congratulations! You just unlocked this text by Tweeting!";

}else{
    //Output HTTP errors
    header('HTTP/1.1 500 Oops! something went wrong...');
    exit();
}
?> 
```

那是推特的，但它可能可以适应脸书。

# c# - 在 c# windows 应用程序中将大型数据表数据导出到 .csv 文件

> ID：12313519
> 
> 赞同：6
> 
> 时间：2012-09-07T07:18:03.533
> 
> 标签：c#, mysql, winforms

我需要将大`DataTable`(> 50 lacs( 5M ) DataRows ) 导出到`.csv`文件

我正在使用下面的代码，但它需要很长时间。

```
public void CreateCSVFile(DataTable dtDataTablesList, string strFilePath)
{
    // Create the CSV file to which grid data will be exported.
    StreamWriter sw = new StreamWriter(strFilePath, false);
    //First we will write the headers.
    int iColCount = dtDataTablesList.Columns.Count;
    for (int i = 0; i < iColCount; i++)
    {
        sw.Write(dtDataTablesList.Columns[i]);
        if (i < iColCount - 1)
        {
            sw.Write("", "");
        }
    }
    sw.Write(sw.NewLine);

    // Now write all the rows.
    foreach (DataRow dr in dtDataTablesList.Rows)
    {
        for (int i = 0; i < iColCount; i++)
        {
            if (!Convert.IsDBNull(dr[i]))
            {
                sw.Write(dr[i].ToString());
            }
            if (i < iColCount - 1)
            {
                sw.Write("", "");
            }
        }
        sw.Write(sw.NewLine);
    }
    sw.Close();
} 
```

请让我知道任何其他快速完成的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T07:45:09.867

`StreamWriter.Write(..)`您可以考虑**使用 StringBuilder**而不是一直调用。将所有字符串附加到 Builder 并且*只在磁盘上写入一次*！

```
string filePath = @"e:\temp\test.csv";
string delimiter = ",";

#region init DataTable
DataTable dt = new DataTable();
dt.Columns.Add(new DataColumn("a", typeof(string)));
dt.Columns.Add(new DataColumn("b", typeof(string)));
dt.Columns.Add(new DataColumn("c", typeof(string)));
dt.Columns.Add(new DataColumn("d", typeof(string)));
dt.Columns.Add(new DataColumn("e", typeof(string)));
dt.Columns.Add(new DataColumn("f", typeof(string)));
dt.Columns.Add(new DataColumn("g", typeof(string)));
dt.Columns.Add(new DataColumn("h", typeof(string)));
dt.Columns.Add(new DataColumn("i", typeof(string)));
dt.Columns.Add(new DataColumn("j", typeof(string)));
dt.Columns.Add(new DataColumn("k", typeof(string)));
dt.Columns.Add(new DataColumn("l", typeof(string)));
dt.Columns.Add(new DataColumn("m", typeof(string)));
dt.Columns.Add(new DataColumn("n", typeof(string)));
dt.Columns.Add(new DataColumn("o", typeof(string)));
dt.Columns.Add(new DataColumn("p", typeof(string)));

for (int i = 0; i < 100000; i++)
{
    DataRow dr = dt.NewRow();
    for (int j = 0; j < dt.Columns.Count; j++)
    {
        dr[j] = "test" + i + " " + j;
    }
    dt.Rows.Add(dr);
}
#endregion

Stopwatch sw = new Stopwatch();
sw.Start();
StringBuilder sb = new StringBuilder();
foreach (DataRow dr in dt.Rows)
{
    sb.AppendLine(string.Join(delimiter, dr.ItemArray));
}
File.WriteAllText(filePath, sb.ToString());
sw.Stop();
Console.WriteLine(sw.ElapsedMilliseconds);
Console.ReadLine(); 
```

**编辑**

100000 行花了我 271 毫秒并创建了一个大约 18 MB 的文件

正如@aiodintsov 指出的那样，如果有**几 MB**的数据**，使用 StringBuilder 可能/将会出现问题。**所以我根据他的评论创建了一个例子。对我来说工作得很好。在 2685 毫秒内导出了**1 000 000 行**。

 ****```
Stopwatch sw = new Stopwatch();
sw.Start();
using (StreamWriter swr = 
         new StreamWriter(File.Open(filePath, FileMode.CreateNew), Encoding.Default, 1000000))
         // change buffer size and Encoding to your needs
{
    foreach (DataRow dr in dt.Rows)
    {
        swr.WriteLine(string.Join(delimiter, dr.ItemArray));
    }
}
sw.Stop();
Console.WriteLine(sw.ElapsedMilliseconds); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T08:35:52.637

我已经稍微修改了您的代码以使用`StringBuilder`作为缓冲区。这需要更多的 RAM，但应该更有效。使用初始容量和 MaxCapacity 来避免`OutOfmemoryExceptions`并获得最大效率：

```
public void CreateFastCSVFile(DataTable table, string strFilePath)
{
    const int capacity = 5000000;
    const int maxCapacity = 20000000;

    //First we will write the headers.
    StringBuilder csvBuilder = new StringBuilder(capacity);
    csvBuilder.AppendLine(string.Join(",", table.Columns.Cast<DataColumn>().Select(c => c.ColumnName)));

    // Create the CSV file and write all from StringBuilder
    using (var sw = new StreamWriter(strFilePath, false))
    {
        foreach (DataRow dr in table.Rows)
        {
            if (csvBuilder.Capacity >= maxCapacity)
            {
                sw.Write(csvBuilder.ToString());
                csvBuilder = new StringBuilder(capacity);
            }
            csvBuilder.Append(String.Join(",", dr.ItemArray));
        }
        sw.Write(csvBuilder.ToString());
    }
} 
```

这是使用样本数据（10000000/100 lac DataRows）进行的简单测量。

样本数据：

```
var TblData = new DataTable();
TblData.Columns.Add("FeeID", typeof(int));
TblData.Columns.Add("Amount", typeof(int));
TblData.Columns.Add("FeeItem", typeof(string));
TblData.Columns.Add("Type", typeof(char));
for (int i = 0; i < 1000000; i++)
{
    TblData.Rows.Add(9, 8500, "Admission Free", 'T');
    TblData.Rows.Add(9, 950, "Annual Fee", 'T');
    TblData.Rows.Add(9, 150, "Application Free", 'T');
    TblData.Rows.Add(9, 850, "Boy's Uniform", DBNull.Value);
    TblData.Rows.Add(9, 50, DBNull.Value, 'R');
    TblData.Rows.Add(10, 7500, "Admission Free", 'T');
    TblData.Rows.Add(11, 900, "Annual Fee", 'T');
    TblData.Rows.Add(11, 150, "Application Free", 'T');
    TblData.Rows.Add(11, 850, DBNull.Value, 'T');
    TblData.Rows.Add(11, 50, "Computer Free", 'R');
}
int rowCount = TblData.Rows.Count; // 10000000 
```

测量（小于 30 秒。对于 207 MB 文件似乎没问题）：

```
var watch = new System.Diagnostics.Stopwatch();
watch.Start();
CreateFastCSVFile(TblData, @"C:\Temp\TestCSV.csv");
watch.Stop();
Console.Write("Elapsed: {0}", watch.Elapsed); // 00:00:26 for 207 MB CSV-file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T07:27:52.880

考虑将 OleDbConnection 与连接字符串一起使用，例如

> "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=c:\txtFilesFolder;Extended Properties="text;HDR=Yes;FMT=Delimited";

[更多示例连接字符串](http://www.connectionstrings.com/textfile)

CSV 文件和分隔符有一些规则，您应该格外小心处理引号、制表符、逗号、换行符等字符。有关此类规则的更多详细信息，请参阅[RFC4180](https://www.rfc-editor.org/rfc/rfc4180)。

UPD：尝试增加文件流缓冲区：

```
using(var stream = new FileStream(path,FileMode.Create,FileAccess.Write,FileShare.None,4*1024*1024))
{
  // your code referencing stream in StreamWriter()
} 
```

您还可以在 StreamWriter 构造函数中指定更大的缓冲区大小。没有什么可以做的来提高性能 - StreamWriter 已经足够快了，标准类型的 ToString() 非常好。我怀疑你在那里输出用户类型，但如果你这样做，请验证他们的 ToString() 方法是否足够有效。其他一切都超出了您的控制范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T09:39:40.137

这是我对此的最终解决方案。

使用此代码，我们可以在 2 分钟内将 500 万条记录导出到 csv 文件。而不是这里的数据表，我使用了数据阅读器。

```
private void button1_Click(object sender, EventArgs e)
    {

        Stopwatch swra = new Stopwatch();
        swra.Start();
        string NewconnectionString = "myCoonectionString";
        StreamWriter CsvfileWriter = new StreamWriter(@"D:\testfile.csv");
        string sqlselectQuery = "select * from Mytable";
        SqlCommand sqlcmd = new SqlCommand();

        SqlConnection spContentConn = new SqlConnection(NewconnectionString);
        sqlcmd.Connection = spContentConn;
        sqlcmd.CommandTimeout = 0;
        sqlcmd.CommandType = CommandType.Text;
        sqlcmd.CommandText = sqlselectQuery;
        spContentConn.Open();
        using (spContentConn)
        {
            using (SqlDataReader sdr = sqlcmd.ExecuteReader())
            using (CsvfileWriter)
            {
                //For getting the Table Headers
                DataTable Tablecolumns = new DataTable();

                for (int i = 0; i < sdr.FieldCount; i++)
                {
                    Tablecolumns.Columns.Add(sdr.GetName(i));
                }
                CsvfileWriter.WriteLine(string.Join(",", Tablecolumns.Columns.Cast<datacolumn>().Select(csvfile => csvfile.ColumnName)));
                //For table headers

                while (sdr.Read())
                //based on your columns
                    YourWriter.WriteLine(sdr[0].ToString() + "," + sdr[1].ToString() + "," + sdr[2].ToString() + "," + sdr[3].ToString() + "," + sdr[4].ToString() + "," + sdr[5].ToString() + "," + sdr[6].ToString() + "," + sdr[7].ToString() + "," + sdr[8].ToString() + "," + sdr[9].ToString() + "," + sdr[10].ToString() + "," + sdr[11].ToString() + ",");

            }
        }
       swra.Stop();
Console.WriteLine(swra.ElapsedMilliseconds);
} 
```

谢谢大家。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T07:41:34.080

一种可能的加速方法是使用 StringBuilder 并将 1K 记录数据附加到 StringBuilder 中，然后将其写入 sw.Write();

所以你的逻辑应该是先在 SB 中写入 1000 条记录，然后在 SW.Write 中。

这肯定会提高性能。

如果你用 10K 增加 1000 条记录并测试性能会好得多。

希望这可以帮助。****

# git - 进行本地更改后在远程 Git 上替换先前提交的作者和提交者的特殊情况

> ID：12313523
> 
> 赞同：1
> 
> 时间：2012-09-07T07:18:27.807
> 
> 标签：git

亲爱的有帮助的 stackoverflow 成员，

我一直在阅读一段时间以寻找这个问题的答案，但无法找到任何具体的内容，所以我想我会要求一些输入。

这是场景：

我一直在为另一个为第三方做网页设计的承包商做分包工作。在他给我这份工作之后，为了让事情分开（这样他可以仔细检查我的工作），他创建了将原始 git 克隆到私人服务器上的远程 git。然后，（显然）我将这个 git 克隆到我的本地计算机上。

我用自己的名字做了几次（~5）次提交，并将它们推送到私有服务器的远程 git。接下来，意识到所有提交都应该以他自己的名义，承包商运行某种程序或命令来更改我所做的所有提交，而不是将他自己的名字显示为作者/提交者，然后将这些提交推送到原始远程第三方 git。[作为旁注，我不完全确定他跑了什么，但我假设它是一些脚本版本的破历史过滤器分支命令在此处的多个线程中讨论{最好[的一个：更改作者和提交者Git 中多个提交的名称和电子邮件](https://stackoverflow.com/questions/750172/how-do-i-change-the-author-of-a-commit-in-git)}（其版本也在 git 帮助页面上）。]

此时，承包商通知我他已经这样做了，并告诉我不要提交或推送到我们私人服务器的远程 git，直到我将本地 git 中的设置更改为他的 user.name 和 user.email。不幸的是，当我被告知时，我已经在本地存储库上完成了大量工作。

所以这是我的问题：从我读过的所有内容来看，我认为继续我的工作的唯一方法是删除我的本地存储库并重新克隆现在在我们的私人服务器上的版本（以避免与之前的提交 SHA -1 秒）。换句话说，目前，我认为我无论如何都不会提交然后将我的更改推送/合并到私有服务器的远程 git 的版本上，因为它已经改变了。

所以，如果我删除我的本地 git，我会丢失大量工作，但是我可以与私有服务器上的“新”版本“重新同步”......但是，这显然是不可接受的，因为我当然不感觉就像再做 20 个小时的工作只是为了回到我原来的位置。有没有办法拉下新版本但仍保留我的更改？

注意：除了更改作者/提交者外，他没有对任何文件进行任何更改。另请注意：我所做的所有即将丢失的工作尚未提交到我的本地 git。

有任何想法吗？...我真的可以使用帮助。

非常感谢，最好的问候，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:55:23.010

只需用于`git pull --rebase`在服务器修改历史的顶部*重播本地更改。*

# php - Paypal IPN - 它是如何工作的？

> ID：12313524
> 
> 赞同：1
> 
> 时间：2012-09-07T07:18:34.413
> 
> 标签：php, html, paypal, payment

我需要简要说明 Paypal IPN 的工作原理。没有任何细节只是基本的东西。

我应该如何设置我的 HTML 变量以及如何获取数据以验证来自 Paypal 的付款？这就是我需要知道的全部，我无法在某个地方找到关于这个的快速解释。

如果可能的话，也给我看一些代码行，肯定会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T07:22:19.330

**[IPN](https://developer.paypal.com/docs/classic/products/instant-payment-notification/)**是一种消息服务， **[PayPal](https://www.paypal.com/)**使用它来发送有关特定事件的通知，例如：

*   即时付款，包括快速结帐、直接信用卡付款和授权（已授权但尚未收取的交易付款）
*   eCheck 付款和相关状态，例如待处理、已完成或被拒绝，以及由于其他原因而待处理的付款，例如正在审查潜在欺诈的付款
*   定期付款和订阅操作
*   与交易相关的拒付、争议、撤销和退款

在许多情况下，触发 IPN 事件的操作是您网站上的用户操作。但是，其他操作可能会触发 IPN。例如，您网站的后台流程可能会调用 PayPal API 来退还付款，或者客户可能会通知 PayPal 有争议的费用。

您使用侦听器（有时称为处理程序）接收和处理 IPN 消息。此侦听器基本上是您在服务器上创建的网页或 Web 应用程序，它始终处于活动状态，并且具有允许它接受和验证从 PayPal 发送的 IPN 消息的代码，然后根据来自的信息在您的服务器上调用后端服务IPN 消息。Web 应用程序等待 IPN 并（通常）将它们传递给适当响应的管理进程。PayPal 提供了示例代码，可以对其进行修改以实现一个侦听器，该侦听器处理从 PayPal 消息发送的 IPN。有关详细信息，请参阅实现[**IPN 侦听器**](https://developer.paypal.com/docs/classic/ipn/integration-guide/IPNImplementation/)。

有关详细信息和帮助，请访问：**[PayPal 即时付款通知指南](https://developer.paypal.com/docs/classic/ipn/integration-guide/IPNIntro/)**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T07:23:10.637

## 代码

我已经多次使用与此等效的 c#（并且 PHP 版本看起来非常相似）。

[https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)

```
<?php
  //reading raw POST data from input stream. reading pot data from $_POST may cause serialization issues since POST data may contain arrays
  $raw_post_data = file_get_contents('php://input');
  $raw_post_array = explode('&', $raw_post_data);
  $myPost = array();
  foreach ($raw_post_array as $keyval)
  {
      $keyval = explode ('=', $keyval);
      if (count($keyval) == 2)
         $myPost[$keyval[0]] = urldecode($keyval[1]);
  }
  // read the post from PayPal system and add 'cmd'
  $req = 'cmd=_notify-validate';
  if(function_exists('get_magic_quotes_gpc'))
  {
       $get_magic_quotes_exits = true;
  } 
  foreach ($myPost as $key => $value)
  {        
       if($get_magic_quotes_exits == true && get_magic_quotes_gpc() == 1)
       { 
            $value = urlencode(stripslashes($value)); 
       }
       else
       {
            $value = urlencode($value);
       }
       $req .= "&$key=$value";
  }

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://www.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Host: www.paypal.com'));
// In wamp like environment where the root authority certificate doesn't comes in the bundle, you need
// to download 'cacert.pem' from "http://curl.haxx.se/docs/caextract.html" and set the directory path 
// of the certificate as shown below.
// curl_setopt($ch, CURLOPT_CAINFO, dirname(__FILE__) . '/cacert.pem');
$res = curl_exec($ch);
curl_close($ch);

// assign posted variables to local variables
$item_name = $_POST['item_name'];
$item_number = $_POST['item_number'];
$payment_status = $_POST['payment_status'];
$payment_amount = $_POST['mc_gross'];
$payment_currency = $_POST['mc_currency'];
$txn_id = $_POST['txn_id'];
$receiver_email = $_POST['receiver_email'];
$payer_email = $_POST['payer_email'];

if (strcmp ($res, "VERIFIED") == 0) {
    // check the payment_status is Completed
    // check that txn_id has not been previously processed
    // check that receiver_email is your Primary PayPal email
    // check that payment_amount/payment_currency are correct
    // process payment
}
else if (strcmp ($res, "INVALID") == 0) {
    // log for manual investigation
}
?> 
```

## 概述

基本上，贝宝会与您联系，您会做出回应；这允许您验证是 PayPal 调用了您的 IPN 处理程序，而不是恶意方。在该验证步骤之后，您可以继续处理结果。我相信您知道，IPN 调用是在付款发生后进行的（也可以为付款生命周期中的其他事件进行配置）。您可以使用 IPN 更新系统状态（例如解锁购买的产品）。

## 其他的东西

*   我用于 PayPal 的最后一个开发 URL 是[https://www.sandbox.paypal.com/cgi-bin/webscr](https://www.sandbox.paypal.com/cgi-bin/webscr)（可能仍然有效）
*   IPN 页面/处理程序需要公开供 PayPal 调用。
*   您需要在 PayPal 开发人员 UI 中配置 IPN 通知（主要包括向他们提供您的 IPN 页面的 URL）
*   您可以使用 PayPal 将发送回 IPN 处理程序的原始交易向 PayPal 发送自定义信息。我相信它是在一个名为“自定义”的字段中传递的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T09:16:23.920

[我发现这个 PHP 类](http://github.com/Quixotix/PHP-PayPal-IPN)非常有用（并且易于使用）：

# java - 为什么在普林斯顿的这个加权快速联合实施中使用“while”

> ID：12313532
> 
> 赞同：1
> 
> 时间：2012-09-07T07:19:01.207
> 
> 标签：java, algorithm

作为我“回归基础”之旅的一部分，我正在研究这种方法，我要么遗漏了一些非常明显的东西，要么`while`这里不需要操作员：

```
// Return component identifier for component containing p
public int find(int p) {
    while (p != id[p])
        p = id[p];
    return p;
} 
```

完整的来源在[这里](http://algs4.cs.princeton.edu/15uf/WeightedQuickUnionUF.java.html)。

看起来它可以像这样简单（而且整个函数相当没有意义）：

```
public int find(int p) {
    return id[p];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T07:27:44.863

实际上不是。

它将从一个指针到另一个指针遍历数组，直到指针等于元素 id。

例子：

```
id = [ 2 0 3 3 ] 
```

然后，`find(1)`会做类似的事情：

```
id[1] = 0 != 1
id[0] = 2 != 0
id[2] = 3 != 2
id[3] = 3 == 3 => return 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T07:23:58.207

给定`// id[i] = parent of i`，这个循环找到最顶层的祖先，它被认为是组件标识符。否则，plain`id[p]`是 的父级`p`，并且您的陈述仅在`p`作为所述最顶层的祖先时才是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:26:24.440

私人 int[] 标识；// id[i] = i 的父级

那是描述的顶部，所以 id[p] 与 while 循环不同

# asp.net - AlternateTemplate 不适用于 Listview

> ID：12313533
> 
> 赞同：0
> 
> 时间：2012-09-07T07:19:14.337
> 
> 标签：asp.net, listview, asp.net-3.5

我根据需要修改了 Listview，但现在无法正常工作，也就是说，它以不同的颜色显示行但重复相同的数据。然后是下一个数据，再次重复并继续......在这里我列出了我的代码。

例如，

```
1
1（重复，不同颜色行）
2
2（重复，不同颜色行）
3
3（重复，不同颜色行）
.
.
.
.

```

```
 <asp:ListView ID="ListView1" runat="server" DataSourceID="SqlDataSource1" DataKeyNames="uniqueno">
    <ItemTemplate>
        <tr style="background-color:#DCDCDC;color: #000000;" runat="server">

            <td>
                <asp:Label ID="policeNumLabel" runat="server" Text='<%# Eval("policeNum") %>' />
            </td>
            <td>
                <asp:Label ID="DFirstNameLabel" runat="server" Text='<%# String.Format("{0} {1} {2}", Eval("DFirstName"),Eval("DMidName"),Eval("DSurName")) %>' />
            </td>

            <td>
                <asp:Label ID="DLicenceNoLabel" runat="server" 
                    Text='<%# Eval("DLicenceNo") %>' />
            </td>

            <td>
                <asp:Label ID="ManufacturerLabel" runat="server" 
                    Text='<%# Eval("Manufacturer") %>' />
            </td>
            <td>
                <asp:Label ID="SerialNumLabel" runat="server" Text='<%# Eval("SerialNum") %>' />
            </td>
            <td>
                <asp:Label ID="ModelLabel" runat="server" Text='<%# Eval("Model") %>' />
            </td>
            <td>
                <asp:Label ID="CalibreLabel" runat="server" Text='<%# Eval("Calibre") %>' />
            </td>

            <td>
                <asp:Label ID="TypeLabel" runat="server" Text='<%# Eval("Type") %>' />
            </td>
            <td>
                <asp:Label ID="ActionLabel" runat="server" Text='<%# Eval("Action") %>' />
            </td>
            <td>
                <asp:Label ID="BarrelLengthLabel" runat="server" 
                    Text='<%# Eval("BarrelLength") %>' />
            </td>

            <td>
                <asp:Label ID="ReasonLabel" runat="server" Text='<%# Eval("Reason") %>' />
            </td>
            <td>
                <asp:Label ID="OtherLabel" runat="server" Text='<%# Eval("Other") %>' />
            </td>
            <td>
                <asp:Label ID="TransferPendingLabel" runat="server" Text='<%# Eval("TransferPending") %>' />
            </td>

            <td>
               <asp:Label ID="OFirstNameLabel" runat="server" 
                    Text='<%# String.Format("{0} {1} {2}", Eval("OFirstName"),Eval("OmidName"),Eval("OSurName")) %>' />
            </td>
            <td>
                <asp:Label ID="O_LicenceNoLabel" runat="server" 
                    Text='<%# Eval("O_LicenceNo") %>' />
            </td> 
            <td>
                <asp:Label ID="DateAcqLabel" runat="server" Text='<%# Eval("DateAcq") %>' />
            </td>

            <td>
                <asp:Label ID="Dis_FirstnameLabel" runat="server" 
                    Text='<%# String.Format("{0} {1} {2}",Eval("Dis_Firstname"),Eval("Dis_Midname"),Eval("Dis_Surname")) %>' />
            </td>
            <td>
                <asp:Label ID="Dis_LicenceNoLabel" runat="server" 
                    Text='<%# Eval("Dis_LicenceNo") %>' />
            </td> 
            <td>
                <asp:Label ID="Dis_DisposaldateLabe" runat="server" 
                    Text='<%# Eval("Dis_Disposaldate") %>' />
            </td>
            <td>
                <asp:Label ID="Dis_CommentLabel" runat="server" 
                    Text='<%# Eval("Dis_Comment") %>' />
            </td>

            <td>
                <asp:Label ID="PermittoAcqNoLabel" runat="server" Text='<%# Eval("PermittoAcqNo") %>' />
            </td>
        </tr>

    </ItemTemplate>

   <AlternatingItemTemplate>
   <tr id="Tr1" style="background-color:#DCDCDC;color: #000000;" runat="server">

            <td>
                <asp:Label ID="policeNumLabel" runat="server" Text='<%# Eval("policeNum") %>' />
            </td>
            <td>
                <asp:Label ID="DFirstNameLabel" runat="server" Text='<%# String.Format("{0} {1} {2}", Eval("DFirstName"),Eval("DMidName"),Eval("DSurName")) %>' />
            </td>

            <td>
                <asp:Label ID="DLicenceNoLabel" runat="server" 
                    Text='<%# Eval("DLicenceNo") %>' />
            </td>

            <td>
                <asp:Label ID="ManufacturerLabel" runat="server" 
                    Text='<%# Eval("Manufacturer") %>' />
            </td>
            <td>
                <asp:Label ID="SerialNumLabel" runat="server" Text='<%# Eval("SerialNum") %>' />
            </td>
            <td>
                <asp:Label ID="ModelLabel" runat="server" Text='<%# Eval("Model") %>' />
            </td>
            <td>
                <asp:Label ID="CalibreLabel" runat="server" Text='<%# Eval("Calibre") %>' />
            </td>

            <td>
                <asp:Label ID="TypeLabel" runat="server" Text='<%# Eval("Type") %>' />
            </td>
            <td>
                <asp:Label ID="ActionLabel" runat="server" Text='<%# Eval("Action") %>' />
            </td>
            <td>
                <asp:Label ID="BarrelLengthLabel" runat="server" 
                    Text='<%# Eval("BarrelLength") %>' />
            </td>

            <td>
                <asp:Label ID="ReasonLabel" runat="server" Text='<%# Eval("Reason") %>' />
            </td>
            <td>
                <asp:Label ID="OtherLabel" runat="server" Text='<%# Eval("Other") %>' />
            </td>
            <td>
                <asp:Label ID="TransferPendingLabel" runat="server" Text='<%# Eval("TransferPending") %>' />
            </td>

            <td>
               <asp:Label ID="OFirstNameLabel" runat="server" 
                    Text='<%# String.Format("{0} {1} {2}", Eval("OFirstName"),Eval("OmidName"),Eval("OSurName")) %>' />
            </td>
            <td>
                <asp:Label ID="O_LicenceNoLabel" runat="server" 
                    Text='<%# Eval("O_LicenceNo") %>' />
            </td> 
            <td>
                <asp:Label ID="DateAcqLabel" runat="server" Text='<%# Eval("DateAcq") %>' />
            </td>

            <td>
                <asp:Label ID="Dis_FirstnameLabel" runat="server" 
                    Text='<%# String.Format("{0} {1} {2}",Eval("Dis_Firstname"),Eval("Dis_Midname"),Eval("Dis_Surname")) %>' />
            </td>
            <td>
                <asp:Label ID="Dis_LicenceNoLabel" runat="server" 
                    Text='<%# Eval("Dis_LicenceNo") %>' />
            </td> 
            <td>
                <asp:Label ID="Dis_DisposaldateLabe" runat="server" 
                    Text='<%# Eval("Dis_Disposaldate") %>' />
            </td>
            <td>
                <asp:Label ID="Dis_CommentLabel" runat="server" 
                    Text='<%# Eval("Dis_Comment") %>' />
            </td>

            <td>
                <asp:Label ID="PermittoAcqNoLabel" runat="server" Text='<%# Eval("PermittoAcqNo") %>' />
            </td>
        </tr>
   </AlternatingItemTemplate>
    <EmptyDataTemplate>
        <table runat="server" 
            style="background-color: #FFFFFF;border-collapse: collapse;border-color: #999999;border-style:none;border-width:1px;">
            <tr>
                <td>
                    No data found</td>
            </tr>
        </table>
    </EmptyDataTemplate>

    <LayoutTemplate>
        <table runat="server">
            <tr runat="server">
                <td runat="server">
                    <table ID="itemPlaceholderContainer" runat="server" border="1" 
                        style="background-color: #FFFFFF;border-collapse: collapse;border-color: #999999;border-style:none;border-width:1px;font-family: Verdana, Arial, Helvetica, sans-serif;">
                        <tr runat="server" >
                            <th colspan="3" runat="server">Dealer Info </th>
                            <th colspan="7" runat="server">Firearm Details </th>
                            <th colspan="3" runat="server">Reason </th>
                            <th colspan="3" runat="server">Acquisition Details </th>
                            <th colspan="5" runat="server">Disposal Details </th>
                        </tr>
                        <tr runat="server" style="background-color:#DCDCDC;color: #000000;">
                            <th runat="server">Number</th>
                            <th runat="server">Name</th>
                            <th runat="server">Licence #</th>

                            <th runat="server">Manufacturer</th>
                            <th runat="server">Serial #</th>
                            <th runat="server">Model</th>
                            <th runat="server">Calibre</th>
                            <th runat="server">Type</th>
                            <th runat="server">Action</th>
                            <th runat="server">Barrel Length</th>

                            <th runat="server">Reason</th>
                            <th runat="server">Other</th>
                            <th runat="server">Transfer Pending</th>

                            <th runat="server">Name</th>
                            <th runat="server">Licence #</th>
                            <th runat="server">Date of Acquired</th>

                            <th runat="server">Name</th>
                            <th runat="server">Licence #</th>
                            <th runat="server">Date of Disposal</th>
                            <th runat="server">Comment</th>
                            <th runat="server">Permit to Acquire No</th>

                        </tr>
                        <tr ID="itemPlaceholder" runat="server">
                        </tr>
                    </table>
                </td>
            </tr>
            <tr runat="server">
                <td runat="server" 
                    style="text-align: center;background-color: #CCCCCC;font-family: Verdana, Arial, Helvetica, sans-serif;color: #000000;">
                    <asp:DataPager ID="DataPager1" runat="server">
                        <Fields>
                            <asp:NextPreviousPagerField ButtonType="Button" ShowFirstPageButton="True" 
                                ShowLastPageButton="True" />
                        </Fields>
                    </asp:DataPager>
                </td>
            </tr>
        </table>
    </LayoutTemplate>

    <SelectedItemTemplate>
        <tr style="background-color:#008A8C;font-weight: bold;color: #FFFFFF;">
            <td>
                <asp:Label ID="policeNumLabel" runat="server" Text='<%# Eval("policeNum") %>' />
            </td>
            <td>
                <asp:Label ID="DFirstNameLabel" runat="server" 
                    Text='<%# Eval("DFirstName") %>' />
            </td>
            <td>
                <asp:Label ID="DMidNameLabel" runat="server" Text='<%# Eval("DMidName") %>' />
            </td>
            <td>
                <asp:Label ID="DSurNameLabel" runat="server" Text='<%# Eval("DSurName") %>' />
            </td>
            <td>
                <asp:Label ID="DLicenceNoLabel" runat="server" 
                    Text='<%# Eval("DLicenceNo") %>' />
            </td>
            <td>
                <asp:Label ID="Dis_DisposaldateLabel" runat="server" 
                    Text='<%# Eval("Dis_Disposaldate") %>' />
            </td>
            <td>
                <asp:Label ID="SerialNumLabel" runat="server" Text='<%# Eval("SerialNum") %>' />
            </td>
            <td>
                <asp:Label ID="CalibreLabel" runat="server" Text='<%# Eval("Calibre") %>' />
            </td>
            <td>
                <asp:Label ID="BarrelLengthLabel" runat="server" 
                    Text='<%# Eval("BarrelLength") %>' />
            </td>
            <td>
                <asp:Label ID="ManufacturerLabel" runat="server" 
                    Text='<%# Eval("Manufacturer") %>' />
            </td>
            <td>
                <asp:Label ID="OtherLabel" runat="server" Text='<%# Eval("Other") %>' />
            </td>
            <td>
                <asp:Label ID="ModelLabel" runat="server" Text='<%# Eval("Model") %>' />
            </td>
            <td>
                <asp:Label ID="TypeLabel" runat="server" Text='<%# Eval("Type") %>' />
            </td>
            <td>
                <asp:Label ID="ActionLabel" runat="server" Text='<%# Eval("Action") %>' />
            </td>
            <td>
                <asp:Label ID="TransferPendingLabel" runat="server" 
                    Text='<%# Eval("TransferPending") %>' />
            </td>
            <td>
                <asp:Label ID="DateAcqLabel" runat="server" Text='<%# Eval("DateAcq") %>' />
            </td>
            <td>
                <asp:Label ID="OFirstNameLabel" runat="server" 
                    Text='<%# Eval("OFirstName") %>' />
            </td>
            <td>
                <asp:Label ID="OmidNameLabel" runat="server" Text='<%# Eval("OmidName") %>' />
            </td>
            <td>
                <asp:Label ID="OSurNameLabel" runat="server" Text='<%# Eval("OSurName") %>' />
            </td>
            <td>
                <asp:Label ID="O_LicenceNoLabel" runat="server" 
                    Text='<%# Eval("O_LicenceNo") %>' />
            </td>
            <td>
                <asp:Label ID="DNoLabel" runat="server" Text='<%# Eval("DNo") %>' />
            </td>
            <td>
                <asp:Label ID="StreetLabel" runat="server" Text='<%# Eval("Street") %>' />
            </td>
            <td>
                <asp:Label ID="column1Label" runat="server" Text='<%# Eval("column1") %>' />
            </td>
            <td>
                <asp:Label ID="StateLabel" runat="server" Text='<%# Eval("State") %>' />
            </td>
            <td>
                <asp:Label ID="PostCodeLabel" runat="server" Text='<%# Eval("PostCode") %>' />
            </td>
            <td>
                <asp:Label ID="PermittoAcqNoLabel" runat="server" 
                    Text='<%# Eval("PermittoAcqNo") %>' />
            </td>
            <td>
                <asp:Label ID="Dis_FirstnameLabel" runat="server" 
                    Text='<%# Eval("Dis_Firstname") %>' />
            </td>
            <td>
                <asp:Label ID="Dis_MidnameLabel" runat="server" 
                    Text='<%# Eval("Dis_Midname") %>' />
            </td>
            <td>
                <asp:Label ID="Dis_SurnameLabel" runat="server" 
                    Text='<%# Eval("Dis_Surname") %>' />
            </td>
            <td>
                <asp:Label ID="Dis_LicenceNoLabel" runat="server" 
                    Text='<%# Eval("Dis_LicenceNo") %>' />
            </td>
            <td>
                <asp:Label ID="Dis_DnoLabel" runat="server" Text='<%# Eval("Dis_Dno") %>' />
            </td>
            <td>
                <asp:Label ID="Dis_StreetLabel" runat="server" 
                    Text='<%# Eval("Dis_Street") %>' />
            </td>
            <td>
                <asp:Label ID="column2Label" runat="server" Text='<%# Eval("column2") %>' />
            </td>
            <td>
                <asp:Label ID="Dis_stateLabel" runat="server" Text='<%# Eval("Dis_state") %>' />
            </td>
            <td>
                <asp:Label ID="Dis_postcodeLabel" runat="server" 
                    Text='<%# Eval("Dis_postcode") %>' />
            </td>
            <td>
                <asp:Label ID="Dis_CommentLabel" runat="server" 
                    Text='<%# Eval("Dis_Comment") %>' />
            </td>
            <td>
                <asp:Label ID="ReasonLabel" runat="server" Text='<%# Eval("Reason") %>' />
            </td>
        </tr>
    </SelectedItemTemplate>
</asp:ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:09:08.400

代码没有问题......经过大量实验后，我意识到我的数据库有问题，这就是发生的事情，存在重复的内容已被删除，现在列表视图工作正常。

# c# - 如何在正则表达式中设置限制？

> ID：12313535
> 
> 赞同：0
> 
> 时间：2012-09-07T07:19:20.767
> 
> 标签：c#, asp.net, regex

我有一个正则表达式，我希望能够接受最小长度为 11 个字符的字符，而不是目前的 16 个字符。

```
^[A-Za-z]{6}[0-9LMNPQRSTUV]{2}[A-Za-z]{1}[0-9LMNPQRSTUV]{2}[A-Za-z]{1}[0-9LMNPQRSTUV]{3}[A-Za-z]{1}$ 
```

有人可以建议更改吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:22:16.793

每个`{6}`都给你你期望的字符数，这里是 6 表示你的第一个表达式。

如果您想要一定数量的字符，请执行以下操作：`{1,6}`它会在您的正则表达式的开头接受 1 到 6 个字符。

这将在您的正则表达式中为您提供 11 到 16 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:07:12.590

`{n}`- 前面的符号（模板）预计恰好出现 n 次

`{min,max}` - 前面的符号（模板）预计会出现最小的最小时间，但不超过最大时间希望这对你有帮助）

# iphone - 在 UIImagePickerController 中隐藏记录按钮

> ID：12313538
> 
> 赞同：0
> 
> 时间：2012-09-07T07:19:34.463
> 
> 标签：iphone, ios, cocoa-touch, camera, uiimagepickercontroller

我有一个关于 UIImagePickerController 的问题。我可以使用 UIImagePickerController 作为预览吗？如果我这样做，我必须隐藏记录按钮，有什么办法吗？或除 UIImagePickerController 之外的任何其他显示预览的方法。

感谢您的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T07:26:33.340

您可以使用以下方法隐藏 a 的控件`UIImagePickerController`：

```
[myImagePickerController setShowsCameraControls:NO]; 
```

**编辑：**查看此代码，它隐藏了图像选择器内的所有控件，允许您创建和添加自己的自定义控件。不幸的是，您不能有选择地隐藏选择器中的控件，因此这是替代方法。

```
- (void)showCamera
{
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {

        myImagePicker = [[UIImagePickerController alloc] init];

        [myImagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
        [myImagePicker setDelegate:self];
        [myImagePicker setShowsCameraControls:NO];
        UIView *overlayView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
        UIButton *switchCameraButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [switchCameraButton setFrame:CGRectMake(10, 430, 72, 40)];
        [switchCameraButton addTarget:self action:@selector(changeCamera:) forControlEvents:UIControlEventTouchUpInside];
        [overlayView addSubview:switchCameraButton];
        [myImagePicker setCameraOverlayView:overlayView];
        [self presentViewController:myImagePicker animated:YES completion:nil];

    }
}
- (IBAction)changeCamera:(id)sender
{
    if (myImagePicker.cameraDevice == UIImagePickerControllerCameraDeviceFront) {
        [myImagePicker setCameraDevice:UIImagePickerControllerCameraDeviceRear];
    }else{
        [myImagePicker setCameraDevice:UIImagePickerControllerCameraDeviceFront];
    }
} 
```

# nhibernate - session.Linq 在哪里？

> ID：12313544
> 
> 赞同：1
> 
> 时间：2012-09-07T07:20:10.513
> 
> 标签：nhibernate

我看到很多这样使用 Linq to NH 的例子：

```
ISession session = getSession();
    var query = from conference in session.Linq<Conference>() 
```

但在我的代码中，ISession 上没有 .Linq。

以下Using还不够吗？

```
using NHibernate.Linq; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T07:34:03.107

您正在导入正确的命名空间，但在`ISession`接口上使用了错误的方法。而不是`ISession.Linq<T>()`，使用`ISession.Query<T>()`.

```
ISession session = getSession();
var query = from conference in session.Query<Conference>() 
```

`ISession.Linq<T>()`是[Linq 2 NHibernate](http://ayende.com/blog/4083/nhibernate-linq-1-0-released)的一部分，这是一个单独的项目，有点临时解决方案。它基于 Criteria API。它现在已经过时了。

新的 NHibernate Linq 提供程序现在是主要 NHibernate 程序集的一部分（从 NH 3.0 开始）。它基于 HQL，并具有更多功能。

# clojure - 为什么 ring 在此响应中给我错误？

> ID：12313549
> 
> 赞同：1
> 
> 时间：2012-09-07T07:20:41.630
> 
> 标签：clojure, ring

下面是我的应用程序 -

```
(ns mfaiz.routes
  (:use [net.cgrand.moustache :only [app]]
        [net.cgrand.enlive-html :only [deftemplate content]]
        [ring.util.response :only [response]]))

(deftemplate reg "mfaiz/templates/reg.html" [])

(def my-app (app
             ["hi"] "Hello World!"
             ["reg"] (-> ((-> "reg" symbol resolve)) response constantly) 
             [&] "Nothing was found")) 
```

我在这条路线上遇到错误 -

```
["reg"] (-> ((-> "reg" symbol resolve)) response constantly) 
```

如果我直接评估上述路线，它可以正常工作并返回 html 文件 -

```
((-> "reg" symbol resolve)) 
```

如果我也将路由更改为直接调用模板函数，那么它也可以工作 -

```
["reg"] (-> (reg) response constantly) 
```

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:13:15.017

问题似乎是当它在环下运行时，“reg”没有得到解决，因为它不是完全合格的。这取决于环服务器在哪个命名空间中启动。因此，使用完全限定名称将起作用：

`(-> "mfaiz.routes/reg" symbol resolve)`

请检查`resolve` [文档](http://clojuredocs.org/clojure_core/clojure.core/resolve)。它试图解析当前命名空间中的符号，即`*ns*`

# android - Android，当我们有多个表时如何管理打开/关闭数据库连接？

> ID：12313554
> 
> 赞同：0
> 
> 时间：2012-09-07T07:20:51.640
> 
> 标签：android, database, sqlite

我正在寻找处理数据库连接的最佳方法。我根据以下方法设计了我的应用程序并且工作正常。但是，有时应用程序会崩溃，尤其是在旧型号设备上。请看我下面的方法。

我有一个`DatabaseHelper`类，所有表都将在这里创建。这个类是这样的：

```
public class DatabaseHelper extends SQLiteOpenHelper {
public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);

        Log.i(TAG, "Object created.");
    }

@Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(CRT_TBL_1);
        db.execSQL(CRT_TBL_2);
        db.execSQL(CRT_TBL_3);
        db.execSQL(CRT_TBL_4);
        db.execSQL(CRT_TBL_5);
        db.execSQL(CRT_TBL_6);
        db.execSQL(CRT_TBL_7);
        db.execSQL(CRT_TBL_8);
    }

@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(DatabaseHelper.class.getName(), "Upgrading database from version " + oldVersion + " to " + newVersion + ", which will destroy all old data.");

        onCreate(db);
    }
} 
```

如您所见，我有 8 个表格，为 8 个不同的活动提供数据。一个活动的处理程序类的实现类似于以下代码。

```
public class DatabaseHandler_1 {

    private final String TAG = "DatabaseHandler_1 ";

    private DatabaseHelper dbHelper;
    private SQLiteDatabase database;

    public DatabaseHandler_1 (Context context) {
        dbHelper = new DatabaseHelper(context);

        Log.i(TAG, "Object created.");
    }

    public void open() throws SQLException {
        database = dbHelper.getWritableDatabase();
    }

    public void close() {
        dbHelper.close();
    }

// ... Other methods insert, update, query, ...
} 
```

最后，根据所需的信息，其中一个或一些将用于每个活动。

```
public class Activity_1 {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i(TAG, "Try to create activity...");

        // Creating Database/Table
        dbHandler_1 = new DatabaseHandler_1 (this);
        dbHandler_1 .open();
        dbHandler_2 = new DatabaseHandler_2 (this);
        dbHandler_2 .open();
        dbHandler_3 = new DatabaseHandler_3 (this);
        dbHandler_3 .open();
    }

     @Override
     protected void onDestroy() {
        super.onDestroy();

        // Closing database
        dbRecipesHandler.close();
        dbFavoritsHandler.close();
        dbShoppingHandler.close();
     }

        // Other methods for displaying data...
} 
```

当崩溃发生时，logcat 显示连接已关闭，而我的应用程序尝试在数据库中查询。我认为场景是这样的：用户打开第一个活动，然后他进入第二个活动，然后他进入第三个活动。现在，如果用户单击后退按钮，第三个活动将被关闭，并且此活动的 onDestroy() 方法将关闭数据库连接。因为，第二个活动仍在内存中，活动假设连接仍然打开，当它想查询数据库时，会发生崩溃。

Logcat 显示如下消息：数据库连接已关闭。你想查询...

一种解决方案不是让 Android 操作系统处理数据库连接，而是手动打开连接并使用它手动关闭它。第二种解决方案是在 Handler 类中手动打开和关闭每个方法的连接。

你有什么建议？你有什么经验吗？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:52:08.487

最后我解决了这个问题。我想我应该在活动中打开一次数据库。我尝试在每个活动的 onResume() 方法中再次打开数据库，并在每个活动的 onPause() 中关闭它，而不是在 onDestroy() 方法中关闭。

至此问题解决。希望不要再看到了。如果我再次面对它，那么将更新/删除答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:37:02.830

一般来说，我建议您考虑使用[Content Providers](http://developer.android.com/guide/topics/providers/content-providers.html)包装您的数据，然后在您的活动中使用 [Loaders](http://developer.android.com/guide/components/loaders.html)将数据与 UI 混合。看起来工作量很大，但在内容提供者的众多好处中，您不必在活动中管理数据库连接或游标。（注意，您的 DatabaseHelper 类将保持不变）

在我制作的不同应用程序中以您的方式以及与内容提供者一起完成数据之后，我想说内容提供者几乎总是要走的路。根据我的经验，它总是最终变得更加可维护和可扩展，而且您会获得很多内置的功能，而这些功能自己构建起来非常昂贵。

也就是说，如果您真的更喜欢当前使用的更直接的方法，我至少*不会*将您的连接的打开和关闭与活动的生命周期联系起来。仅在您实际需要数据时打开这些连接，获取该数据，然后立即关闭任何游标以及连接本身。

# java - 语法错误，在 java 中插入“EnumBody”和“enum Identifier”

> ID：12313555
> 
> 赞同：0
> 
> 时间：2012-09-07T07:21:08.797
> 
> 标签：java, enums, syntax-error, tostring

如果有人可以提供帮助，我无法弄清楚我的代码有什么问题，为什么它告诉我这个？它在 toString 方法中给了我一个错误......为什么它让我插入枚举主体和标识符？谢谢你

```
 import java.lang.String;

  public class Circle extends Shape {
  private double radius;

  public Circle( double theRadius ){
    super();
    if ( theRadius <= 0.0 )
        setRadius( Shape.DEFAULT_SIZE );
    else
        setRadius( theRadius );
}

public double getSurfaceArea(){

    return this.radius * this.radius * Math.PI;
}

public double getPeremeter(){
    ;
    return 2 * this.radius + Math.PI;
}

public double getRadius(){
    return this.radius;

}

public void setRadius( double theRadius ) {
    if( theRadius <= 0 )
        return;
    this.radius = theRadius;
}

@Override
public double getPerimeter() {
    // TODO Auto-generated method stub
    return 0;

     public String toString() {
         return "Circle Surface Area "+getSurfaceArea()+", Circle Peremeter "       +getPerimeter();
     }
}

@Override
public double getSizeAmount() {
    // TODO Auto-generated method stub
    return 0;
}
   } 
```

主班

```
import javax.swing.JOptionPane;
 import java.text.DecimalFormat; 

 public class ShapeApp {

public static <RectangularPrism> void main(String[] args) {

    int x = 0;
    Triangle triangleObjects[] = new Triangle[ 3 ];

    triangleObjects[ 0 ] = new Rectangle("3.5","4.6");
    triangleObjects[ 1 ] = new Rectangle("3","2");

    triangleObjects[ 2 ] = new Circle(0);

    System.out.println( "List of all Shapes:\n" );
    do{
    try{
        for( Triangle currentTriangle : triangleObjects ) {
        String msg = currentTriangle.getSurfaceArea() +","+ currentTriangle.getPerimeter();
        JOptionPane.showMessageDialog(null, "Message", msg, JOptionPane.INFORMATION_MESSAGE);
        x=2;
    }

    }catch(Exception e) {

    }

}while(x==1);

    }

} 
```

错误

```
 Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
Syntax error on token "String", @ expected
Syntax error, insert "enum Identifier" to complete EnumHeaderName
Syntax error, insert "EnumBody" to complete BlockStatement

at Circle.getPerimeter(Circle.java:44)
at ShapeApp.main(ShapeApp.java:80) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:24:01.000

看你的`getPerimeter`方法：

```
@Override
public double getPerimeter() {
    // TODO Auto-generated method stub
    return 0;

     public String toString() {
         return "Circle Surface Area "+getSurfaceArea()+", Circle Peremeter "
              +getPerimeter();
     }
} 
```

您正在尝试在方法中`toString`声明*该*方法`getPerimeter`。

代码的缩进应该给你一个提示——这就是为什么适当地缩进代码很重要的原因之一。你应该有：

```
@Override
public double getPerimeter() {
    // TODO Auto-generated method stub
    return 0;
}    

@Override
public String toString() {
    return "Circle Surface Area " + getSurfaceArea() + ", Circle Perimeter "       
        + getPerimeter();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:24:49.170

```
@Override
public double getPerimeter() {
    // TODO Auto-generated method stub
    return 0;

     public String toString() {
         return "Circle Surface Area "+getSurfaceArea()+", Circle Peremeter "       +getPerimeter();
     }
} 
```

应该分成两部分：

```
@Override
public double getPerimeter() {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public String toString() {
             return "Circle Surface Area "+getSurfaceArea()+", Circle Peremeter "       +getPerimeter();
         } 
```

# php - 将索引数组转换为关联数组

> ID：12313558
> 
> 赞同：0
> 
> 时间：2012-09-07T07:21:36.620
> 
> 标签：php

> **可能重复：**
> [PHP 中从两个并行索引数组创建关联数组最直接的方法是什么？](https://stackoverflow.com/questions/3000330/whats-the-most-straightforward-way-in-php-to-create-an-associative-array-from-t)

如何转换索引数组，如：

```
$a = array("foo", "bar", "hallo", "world"); 
```

到具有索引值的关联数组，例如：

```
$a = array(
    "a1" => "foo",
    "b5" => "bar",
    "f7" => "hallo",
    "n4" => "world"
); 
```

也许是一些 PHP 核心功能？

或具有相同的变体`keys`：

```
$a = array(
    "key" => "foo",
    "key" => "bar",
    "key" => "hallo",
    "key" => "world"
); 
```

**UPD**

我希望有一个类似的函数`array_merge()`，但接受键数组和值数组来创建结果数组。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-07T07:23:51.220

```
$keys = array('a1', 'b5', 'f7', 'n4');
$a = array_combine($keys, $a); 
```

数组索引必须是唯一的，因此不可能使用相同的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:28:57.243

如果密钥是随机的，那么我们可以这样做：

```
$a = array("foo", "bar", "hallo", "world");

$chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
$size = strlen( $chars );   
$num="0123456789";

$a_s=array();

foreach($a as $art)
{
    $rand= $chars[ rand( 0, $size - 1 ) ].$num[ rand( 0, 9 ) ];

    $a_s[$rand]=$art;
}

$a=$a_s;
print_r($a); 
```

# java - 使用 Java 的 DESFire 身份验证

> ID：12313559
> 
> 赞同：1
> 
> 时间：2012-09-07T07:21:44.740
> 
> 标签：java, jce, mifare

尝试使用 Java/Android 验证 DESFire EV1 卡，并希望确认正确使用 JCE 类以在**CBC 发送模式下**实现 DES 解密操作。

对于此操作，以下 JCE 的使用是否正确？

```
DESKeySpec desKeySpec = new DESKeySpec(masterKeyBytes);  
SecretKeyFactory desKeyFact = SecretKeyFactory.getInstance("DES");
SecretKey s = desKeyFact.generateSecret(desKeySpec);
dfCardCipher = Cipher.getInstance("DES/CBC/NoPadding");
dfCardCipher.init(Cipher.DECRYPT_MODE, s, new IvParameterSpec(ivBytes));

byte[] decipheredCodeRandomB = dfCardCipher.doFinal(encipheredCodeRandomB); 
```

# c# - 如何为 .Net 应用程序创建自定义安装过程？

> ID：12313562
> 
> 赞同：3
> 
> 时间：2012-09-07T07:21:58.733
> 
> 标签：c#, winforms, installation, setup-project

我最近使用 C# 创建了一个 Windows 应用程序项目。我已经完成了所有的编码。现在我必须部署项目。因此，我使用 Visual Studio 的菜单中的 SETUP PROJECT 创建了项目的设置。它工作正常，我没有任何问题。但是我在部署项目后得到的典型设置是 MSi，它看起来非常简单。

但我需要知道的是，有没有办法创建自定义设置？我的意思是我想在安装程序中为我的项目添加徽标。并且在安装过程中某些事情，向导应该询问用户名和密码以及其他类似的事情。例如：如果您要安装 Visual Studio 之类的软件或其他软件，安装向导非常吸引人，而且外观和感觉都很好。同样，我想为我的项目进行设置。

我不确定如何实现这一目标。

我尝试使用 Visual Studio 项目的安装程序类，但我不确定它是否对我来说是正确的选择，所以我只是想在这里问它而不是浪费时间？

我认为可能很少有第三方工具可以实现这一目标。我尝试了 InnoSetup 5.2，但我必须手动编写类似于 pascal 的程序。

我还听说过名为 InstallShield 的工具，但它的成本很高，我正在寻找免费的替代品。

是否有任何第三方工具或软件可用于创建 Visual Studio 项目的 SETUP。？或者有什么方法可以让我获得我的自定义设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T07:35:01.470

您可以使用*Microsoft 安装项目*或*WIX*（轻松与 Visual Studio 集成）。两者都是免费的。

*   您可以[通过添加自定义操作在安装项目中完成几乎所有的自定义操作](http://www.codeproject.com/Articles/335516/Custom-Action-in-Visual-Studio-setup-projects)。

*   *WIX* (window installer xml) 是更好的选择。您可以从 wix 进行完全自定义，但需要一些时间才能理解，因为它完全基于 XML。Microsoft Office 2007 及更高版本的设置基于 wix。

*wix*和*Setup 项目*之间的区别在于，您对 wix 中 setup 的 GUI 比 setup 项目有更多的控制权，并且 wix 允许比 setup 项目更多的自定义。看看[这个关于 wix 的分步教程](http://wix.tramontana.co.hu/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T07:35:21.060

如果您使用 Visual Studio MSI

*   关于添加 Icon 的第一个问题（基于`SplashBitmap`），请参阅[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/af81s8zd%28v=vs.80%29)。

*   有关身份验证输入的第二个问题，请参阅[此其他 MSDN 页面](http://msdn.microsoft.com/en-us/library/e04k6f53%28v=vs.80%29.aspx)。

您可以特别使用 Action 个性化，您可以按照以下步骤操作：

1.  在解决方案资源管理器中选择安装程序项目自定义操作。在视图菜单上，指向编辑器，然后选择自定义操作。出现自定义动作编辑器。

2.  在自定义操作编辑器中，选择安装节点。在操作菜单上，选择添加自定义操作。

3.  在对话框中，选择项目中的一项，双击应用程序文件夹。

4.  从 OpenWeb（活动）中选择主要输出。

5.  单击确定关闭对话框。

6.  在“属性”窗口中，选择 InstallerClass 属性并将其值设置为 false。

7.  在“构建”菜单中，选择“构建自定义操作安装程序”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T07:36:05.687

在此处浏览主题[部署任务和演练](http://msdn.microsoft.com/en-us/library/206sadcd%28v=vs.100%29)- 设置项目非常灵活，尤其是自定义操作。您绝对可以设置自己的图像并调整 UI。

# java - 与我的本地服务器相比，远程服务器花费了太多时间来获得相同的响应

> ID：12313563
> 
> 赞同：-6
> 
> 时间：2012-09-07T07:22:03.443
> 
> 标签：java, protocols, network-protocols

我创建了一个 Web 应用程序。现在我正在测试性能。远程服务器需要更多时间来响应。

**例子**

当我向本地服务器发送请求时，它会在 0.454 秒内响应。但是当我向远程服务器发送请求时，需要 22.930 秒才能响应。

这很难找出原因……

非常感谢，

-Ganesh-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:32:52.520

这很可能是由于网络交互（假设这是唯一的区别）

远程服务器可能有 25 - 250 毫秒的延迟，如果您需要传递多个请求来执行操作，它可以很快加起来长达几分钟。延迟为 0.2 毫秒的网络上相同数量的请求可能不会显示问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:32:14.143

也许它可以帮助您首先检查 tcp/ip 网络，看看网络是否是瓶颈。

*   尝试使用 ping 或使用 tracert 命令（ windows ）更好。使用 tracert，您可以看到每个 hup 以及数据包往返所需的时间。这是查看延迟的好方法。
*   也许远程服务器很慢或有限制。
*   在另一台服务器上尝试您的代码，只是为了以更少的努力区分它与服务器本身无关。

如果这没有帮助。那么可能有必要进入java代码。

# android - Android - Spinner 对话框在打开后立即关闭

> ID：12313567
> 
> 赞同：2
> 
> 时间：2012-09-07T07:22:16.740
> 
> 标签：android, android-layout, spinner

我在我的 Android 应用程序中使用 Spinner。当我单击以更改所选项目时，应用程序会打开相应的微调器对话框，但它会立即关闭，无需任何用户交互。

有什么想法可能是什么原因？我可以复制微调器的代码，但我认为没有什么特别之处。

我在 logcat 中收到以下警告。

> 09-07 11:22:49.457：D/InputManagerService(120)：窗口已经聚焦，忽略焦点增益：com.android.internal.view.IInputMethodClient$Stub$Proxy@4059ced0

这是xml布局文件中的代码。正如我所说，没有什么特别的

```
<Spinner
                android:id="@+id/weightMeasure"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
            android:entries="@array/weight_measures" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:18:07.510

我知道你不久前发布了这个，但我遇到了同样的问题。希望有人会找到这个，它会有所帮助。如果您覆盖 onWindowFocusChanged 方法并在那里设置内容视图，那么当您打开微调器时，焦点将更改为该微调器，因此 onWindowFocusChanged 方法运行，如果您在此处设置内容视图，微调器将立即关闭。

希望对某人有所帮助。

# websphere - 在 Websphere 中配置无状态 EJB 池大小

> ID：12313571
> 
> 赞同：1
> 
> 时间：2012-09-07T07:22:34.177
> 
> 标签：websphere, websphere-7, websphere-6.1

我正在寻找一种**在 Websphere 中配置 SLSB 池大小的**方法。是否可以从管理控制台配置它？
查看 IBM 红皮书，它提到了如何配置远程 EJB 客户端使用的 ORB 池。我的请求是通过 servlet 从同一个 JVM 到达的，
谢谢 Max

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T07:13:09.420

有一个名为的系统属性`com.ibm.websphere.ejbcontainer.poolSize`可用于调整 bean 池大小。

# magento - 客户将产品添加到购物车时如何从客户那里获取产品相关信息？

> ID：12313574
> 
> 赞同：0
> 
> 时间：2012-09-07T07:22:48.507
> 
> 标签：magento

我想将表格附加到产品上，当客户想要将该产品添加到购物车时，他应该填写此表格 1 中的信息。

并且该信息必须附有购买的详细信息。

**例如**

当客户希望购买产品时，我想从客户那里获得尺码信息（如长度、脖子、腰围、袖子、胸部等）。然后此信息必须与购买的详细信息一起发送（或可能在电子邮件等中）

如何接近这个解决方案。

**现在我正在使用自定义选项。但这不是一个好的解决方案，因为我相信必须有比这更好的方法**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:13:25.280

添加自定义表单模块，magento connect 中有免费的表单扩展。

然后将表单添加到 view.phtml 中，添加脚本以仅在提交表单后启用“添加购物车”按钮。

这是您预期的流程吗？

# apache-flex - 在库中编译时出现 AdvancedDataGrid 运行时错误

> ID：12313581
> 
> 赞同：0
> 
> 时间：2012-09-07T07:23:24.740
> 
> 标签：apache-flex

我正在尝试将使用 AdvancedDataGrid 构建的控件从 SWF 模块移动到 SWC 模块。

但是，这给了我一个运行时错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at mx.controls::AdvancedDataGridBaseEx/getLockedContent()[E:\dev\4.5.1\frameworks\projects\advancedgrids\src\mx\controls\AdvancedDataGridBaseEx.as:4430] 
```

我正在使用 Flex 4.5 SDK。

我的模块在编译期间没有显示任何警告。

查看第 4430 行的框架代码，我们看到：

```
 private function getLockedContent():Sprite
        {
            var locked:Sprite = Sprite(listContent.getChildByName("lockedContent"));
            if (!locked)
            { 
```

所以我猜测来自父类的 listContent 尚未正确初始化。

```
/**
 *  An internal display object that parents all of the item renderers,
 *  selection and highlighting indicators and other supporting graphics.
 *  This is roughly equivalent to the <code>contentPane</code> in the 
 *  Container class, and is used for managing scrolling.
 *  
 *  @langversion 3.0
 *  @playerversion Flash 9
 *  @playerversion AIR 1.1
 *  @productversion Flex 3
 */
protected var listContent:AdvancedListBaseContentHolder; 
```

有谁知道造成这种情况的原因以及如何解决？

# objective-c - 在 Objective C 中使用安全的 https 网络服务

> ID：12313582
> 
> 赞同：2
> 
> 时间：2012-09-07T07:23:30.253
> 
> 标签：objective-c, web-services, cocoa, cookies, cookiecontainer

我必须在 Objective C 中编辑代码，以使用登录名、密码和 cookie 容器调用安全的 https 网络服务。

代码实际上：

```
NSString *plistInfosServeurPath = [[NSBundle mainBundle] pathForResource:@"InfosServeur" ofType:@"plist"];
NSDictionary *infosServeurDictionary = [NSDictionary dictionaryWithContentsOfFile:plistInfosServeurPath];
NSString *urlServeur = [infosServeurDictionary objectForKey:@"serveur_url"];

/* ADDED BY ME */
/* ------- */   
NSURLCredential *newcredential = [NSURLCredential credentialWithUser:@"plop" password:@"Plop" persistence:NSURLCredentialPersistenceNone];

NSURLProtectionSpace *space = [[NSURLProtectionSpace alloc] initWithHost:@"https://plop.com"
                                                                    port:443
                                                                protocol:@"https"
                                                                   realm:nil
                                                    authenticationMethod:NSURLAuthenticationMethodHTTPBasic];

[[NSURLCredentialStorage sharedCredentialStorage] setCredential:newcredential
                                             forProtectionSpace:space];

/* ------- */

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[[NSURL alloc] initWithString:[NSString stringWithFormat:@"%@/plop.svc/plop/%@", urlServeur, _gare.code]]];
[request setHTTPMethod:@"GET"];

[NSURLConnection sendAsynchronousRequest:request 
                                   queue:[NSOperationQueue mainQueue] 
                       completionHandler:^(NSURLResponse *response, NSData *result, NSError *error){
                           if (result) 
                           {

                               NSArray *trains = [[CJSONDeserializer deserializer] deserializeAsArray:result error:&error];

                               }
                           if (erro) {
                               NSLog(@"connexion NOK");
                               NSLog(@"ERROR : %@", error);
                           }
                       }
 ]; 
```

该代码适用于 http 中的 web 服务，但现在使用 https，我尝试添加凭据，但没有成功，并且找不到如何添加 cookie 容器。

# javascript - 在 javascript 中获取给定 lat long 的当前日期和时间

> ID：12313588
> 
> 赞同：3
> 
> 时间：2012-09-07T07:23:51.473
> 
> 标签：javascript

我使用 javascript 开发了一个优惠券应用程序，对此我很陌生。我需要在 javascript 中获取给定 lat 和 long 位置的当前日期和时间。有谁知道，请给我建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:26:51.120

也许，确定时区（请参阅[从纬度经度查找时区](https://stackoverflow.com/questions/41504/timezone-lookup-from-latitude-longitude)）并转换当前的 UTC 时间？

# android - 如何读取 NFC 标签？

> ID：12313596
> 
> 赞同：1
> 
> 时间：2012-09-07T07:24:17.857
> 
> 标签：android, nfc

嗨，我正在尝试从 NFC 标签读取。但我遇到了一个例外。

我已经把这个条件来检测标签了？

```
if(NfcAdapter.ACTION_TAG_DISCOVERED != null) 
```

这个条件是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-17T15:48:31.333

首先，您必须初始化 NFC 适配器并在 onCreate 回调中定义 Pending Intent：

```
NfcAdapter mAdapter;
PendingIntent mPendingIntent;
mAdapter = NfcAdapter.getDefaultAdapter(this);

if (mAdapter == null) {
    //nfc not support your device.
    return;
}
mPendingIntent = PendingIntent.getActivity(this, 0, new Intent(this,
    getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0); 
```

在 onResume() 回调中启用 Foreground Dispatch 以检测 NFC 意图。

```
mAdapter.enableForegroundDispatch(this, mPendingIntent, null, null); 
```

在 onPause() 回调中，您必须禁用前台调度：

```
if (mAdapter != null) {
    mAdapter.disableForegroundDispatch(this);
} 
```

在 onNewIntent() 回调方法中，您将获得新的 Nfc Intent。得到 Intent 后，你必须解析意图来检测卡片：

```
@Override
protected void onNewIntent(Intent intent) {
    getTagInfo(intent)
}

private void getTagInfo(Intent intent) {
    Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);

    String[] techList = tag.getTechList();
    for (int i = 0; i<techList.length; i++) {
        if (techList[i].equals(MifareClassic.class.getName())) {

            MifareClassic mifareClassicTag = MifareClassic.get(tag);
            switch (mifareClassicTag.getType()) {
                case MifareClassic.TYPE_CLASSIC:
                    //Type Clssic
                    break;
                case MifareClassic.TYPE_PLUS:
                    //Type Plus
                    break;
                case MifareClassic.TYPE_PRO:
                    //Type Pro
                    break;
            }
        } else if (techList[i].equals(MifareUltralight.class.getName())) {
            //For Mifare Ultralight
            MifareUltralight mifareUlTag = MifareUltralight.get(tag);
            switch (mifareUlTag.getType()) {
                case MifareUltralight.TYPE_ULTRALIGHT:
                    break;
                case MifareUltralight.TYPE_ULTRALIGHT_C:

                    break;
            }
        } else if (techList[i].equals(IsoDep.class.getName())) {
            // info[1] = "IsoDep";
            IsoDep isoDepTag = IsoDep.get(tag);

        } else if (techList[i].equals(Ndef.class.getName())) {
            Ndef.get(tag);

        } else if (techList[i].equals(NdefFormatable.class.getName())) {

            NdefFormatable ndefFormatableTag = NdefFormatable.get(tag);

        }
    }
} 
```

完整的完整代码在[这里](https://github.com/mesuk/NFC-UTILS)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T07:30:38.630

要回答您有关代码的问题-

这将永远是真的 -`NfcAdapter.ACTION_TAG_DISCOVERED`是一个常数值 - 你需要使用：

```
getIntent().getAction().equals(NfcAdapter.ACTION_TAG_DISCOVERED) 
```

比较它。

但是，这可能与您的例外无关 -

1.  你在你的android清单中包含了NFC权限吗？
2.  你确定你的手机支持NFC吗，目前只有两三个支持。
3.  我们需要您的日志中的堆栈跟踪来了解导致异常的原因

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T22:54:39.577

这种说法永远是正确的。

我创建了一个[项目](http://code.google.com/p/ndef-tools-for-android/)，其中包含一个样板项目，以便走上正轨。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-24T13:51:49.443

试试下面的工作代码。

```
 /**
 * this method is used for read nfc data from tag.
 *
 * @param ndef Ndef
 */
private void readFromNFC(Ndef ndef) {

    try {
        ndef.connect();
        NdefMessage ndefMessage = ndef.getNdefMessage();

        NdefRecord[] e = ndefMessage.getRecords();

        for (NdefRecord s : e) {
            String message = new String(s.getPayload());
            if (!message.equals("")) {
                CustomLog.info(TAG, "readFromNFC: " + message);
                mTvMessage.setText(message);
            } else {
                mTvMessage.setText("Tag is empty!");
            }
        }
        ndef.close();
    } catch (IOException | FormatException e) {
        e.printStackTrace();
    }
} 
```

# url - Umbraco 外部 URL 重定向

> ID：12313601
> 
> 赞同：0
> 
> 时间：2012-09-07T07:24:28.063
> 
> 标签：url, xslt, external, umbraco

我在我的 Doctype 中添加了一个文本字符串属性“externalURL”。我想在文本字符串中输入外部 URL，并在导航中单击该链接时将该链接重定向到外部 URL。

但是以下方法不起作用：

```
<a>
         <xsl:attribute name="href">
           <xsl:choose>
             <xsl:when test="string(externalUrl) != ''">
               <xsl:value-of select="externalUrl" />
             </xsl:when>
             <xsl:otherwise>
               <xsl:value-of select="umbraco.library:NiceUrl(@id)" />
             </xsl:otherwise>
           </xsl:choose>
         </xsl:attribute>
         <xsl:if test="descendant-or-self::*[@id = $currentPage/@id]">
           <xsl:attribute name="class">current</xsl:attribute>
         </xsl:if>
         <xsl:value-of select="@nodeName" />
       </a> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T01:43:01.550

一个简单的区分大小写的问题。我需要将“externalUrl”更改为“externalURL”以匹配我的属性类型。有时这是最明显的事情。

# c# - c# xls和xlsx文件导入

> ID：12313608
> 
> 赞同：2
> 
> 时间：2012-09-07T07:24:55.160
> 
> 标签：c#, excel, xls, xlsx

我想在 c# 中加载 xls 和 xlsx 文件。对于我正在使用的 xls：Provider=Microsoft.Jet.OLEDB.4.0;Data Source=;Extended Properties=\"Excel 8.0;HDR=YES\ 对于 xlsx：Provider=Microsoft.Ace.OLEDB.12.0;Data Source=; Extended Properties=\"Excel 12.0;HDR=YES\ 一旦项目平台目标是 Any Cpu，我可以毫无问题地上传 xlsx 文件，但是当我上传 xls 文件时出现以下错误：“'Microsoft.Jet.OLEDB.4.0'提供程序未在本地计算机上注册。”

如果我将平台目标更改为 x86，则 xls 文件上传没有问题，但这次 xlsx 文件出现此错误：“'Microsoft.Ace.OLEDB.12.0' 提供程序未在本地计算机上注册。”

我怎样才能上传但文件格式没有错误？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T07:26:45.377

对于这两种类型的文件，您都应该使用 ACE.OleDB。

# vba - 如何正确执行 Excel VBA 宏？

> ID：12313609
> 
> 赞同：0
> 
> 时间：2012-09-07T07:25:02.967
> 
> 标签：vba, excel, ms-word

我和我的同事创建了一个用户表单，其中包含一套用于在 Excel 和 Word 中执行任务的工具

我非常熟悉从模块生成应用程序对象并关闭它们而不影响其他任何东西 - 或其他正在运行的 Excel 副本。

但是，用户表单必须从某个位置开始 - 这会使 Excel 工作表在后台打开。

我已经尝试过`Application.Visible = False`，但这会隐藏所有打开的工作簿 - 如果您打开了其他工作表，那会很烦人

我正在考虑一个包装表，它创建一个 Excel 并运行宏（在它自己的 Excel 实例中生成宏） - 这可行，但是如果我关闭我的父母，我留下了包装表和可能的孤儿 excel 应用程序。

有没有比这更好的方法来执行宏而不影响 MS Office 上的其他用户体验？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T07:26:56.953

是的，您可以创建 Excel 加载项。只需将包含您的代码的工作簿另存为 Excel 加载项（在“另存为”对话框中选择适当的文件格式），然后在“选项”中配置 Excel 以在启动时加载加载项。除了它提供的功能之外，您不会看到任何加载项。

# android - 重新安装时需要清除共享偏好

> ID：12313610
> 
> 赞同：-1
> 
> 时间：2012-09-07T07:25:24.693
> 
> 标签：android

我的应用程序从登录开始。在登录时，我正在启动一项服务，并以 Home 的身份重定向到另一项活动。在此期间，我使用 SharedPreferences 直接启动 Home 活动，而不是再次启动 Login 活动。但是当我重新安装 APK 服务时会停止。所以我正在考虑在重新安装时清除 SharedPreferences，以便应用程序启动到登录活动而不是主页。这样用户再次登录到应用程序并重新启动服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:29:20.740

重新安装时不会删除共享首选项和 sqlite db。要删除它们，请转到 **`Settings-->Appications-->Manage Applications-->Click on you application-->Click on "Clear Data"`**模拟器。这将清除存储的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:30:36.447

当您安装应用程序时，会`ACTION_PACKAGE_ADDED`发送广播，但是已安装的应用程序不会接收到它。

当您卸载应用程序时，它甚至不会被调用。

总结 - 从您自己的应用程序中捕获这些事件是不可能的。

# sql - 比较临时表和主表以查找匹配项

> ID：12313611
> 
> 赞同：0
> 
> 时间：2012-09-07T07:25:31.220
> 
> 标签：sql, sql-server-2008

我有两个表@mtss 表：

```
@mtss
( [MM],[YYYY],[month_Start],[month_Finish],[ProjectID],[ProjectedBillable],[ProjectedPayable],[ActualBilled],[ActualPaid],[Total_To_Bill],[Total_To_Pay])

tbl_Snapshot ([MM],[YYYY],[month_Start],[month_Finish],[ProjectID],[ProjectedBillable],[ProjectedPayable],[ActualBilled],[ActualPaid],[Total_To_Bill],[Total_To_Pay]
) 
```

我需要比较两个表并找到匹配项

如果 tbl_snapshot [MM] 和 [ProjectId] 匹配，则删除 tbl_snapshot 中的记录并从 @mtts 插入记录。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:36:33.790

由于您使用的是 2008 年，因此您可以使用[`MERGE`](http://technet.microsoft.com/en-us/library/bb510625%28v=sql.100%29.aspx)它作为单个逻辑操作执行：

```
;merge into tbl_Snapshot s
using @mtss m on s.MM = m.MM and s.ProjectId = m.ProjectId
when matched then update
set
    YYYY = m.YYYY,
    month_Start = m.month_Start
    /* Other columns as well, not going to type them all out */
; 
```

这也很容易扩展到您可能必须处理的其他情况，如果数据仅存在于一个表中而不存在于另一个表中，则使用附加匹配子句。

* * *

当然，进一步考虑，在这种情况下，简单的`UPDATE`也可以。A`DELETE`后跟 an `INSERT`（其中删除和插入的行通过键相关）相当于 an `UPDATE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:32:12.397

像这样的东西：

```
DELETE tbl_snapshot 
FROM tbl_snapshot ss
INNER JOIN @mtss m ON m.MM = ss.MM AND m.ProjectId = ss.ProjectId 
```

（我直接将代码写到这个编辑器，所以它可能有错误，但它应该让你知道如何继续）

# ruby-on-rails-3 - rake assets:precompile undefined method `[]' for nil:NilClass

> ID：12313612
> 
> 赞同：19
> 
> 时间：2012-09-07T07:25:37.737
> 
> 标签：ruby-on-rails-3, rake, asset-pipeline

我正在尝试启动并运行一个新的生产服务器，它是如此接近。当我执行

```
RAILS_ENV=production rake assets:precompile 
```

返回此错误

```
undefined method `[]' for nil:NilClass 
```

当我使用 --trace 运行它时，它会重新调整

```
$RAILS_ENV=production rake assets:precompile --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
rake aborted!
undefined method `[]' for nil:NilClass
  (in /home/deploy/pm/app/assets/stylesheets/jquery-ui-1.8.16.custom.css.scss)

Tasks: TOP => assets:precompile
(See full trace by running task with --trace) 
```

我感谢任何人可以提供的任何帮助、想法等。

这是 Gemfile 和捆绑列表

```
source 'http://rubygems.org'

gem 'cancan'
gem 'client_side_validations'
gem 'devise', '~> 1.5.3'
gem 'execjs'
gem 'haml'
gem 'httparty'
gem 'jquery-rails'
gem 'mysql2'
gem 'paperclip', "~> 2.4"
gem 'rails', '3.1.0'
gem 'rails3-jquery-autocomplete'
gem 'rake', '0.9.2'
gem 'remotipart', "~> 1.0"
gem 'simple_datatables'
gem 'therubyracer'
gem 'validates_timeliness', '~> 3.0.2'
gem 'will_paginate', '~> 3.0'

gem 'geocoder', '~> 1.1.2'

#temp for pm.onlinetherapy.com
gem 'faker'

group :test do
    gem 'capybara'
    gem 'cucumber-rails', :require => false
    gem 'database_cleaner'
    gem 'factory_girl_rails'
    gem 'faker'
    gem 'guard-rspec'
    gem 'selenium-webdriver', '2.7.0'
    gem 'webrat'
end
group :development, :test do
    gem 'faker'
    gem 'haml-rails'
    gem 'hpricot'
    gem 'rspec-rails'
    gem 'ruby_parser'
    gem 'web-app-theme', '~> 0.8.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
    gem 'sprockets'
    gem 'sass', '3.1.20'
    gem 'sass-rails', '3.1.4' # downgraded to 3.1.4 to avoid a stack overflow error in rake assets:precompile
    gem 'coffee-rails', "~> 3.1.0"
    gem 'uglifier'
end

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# bundle install has a problem installing linecache19, a dependency of ruby-debug19
# try 'sudo gem install linecache19' to fix the problem, and then do bundle install again 
gem 'ruby-debug19', :require => 'ruby-debug' 
```

和`bundle list`给

```
Gems included by the bundle:
  * actionmailer (3.1.0)
  * actionpack (3.1.0)
  * activemodel (3.1.0)
  * activerecord (3.1.0)
  * activeresource (3.1.0)
  * activesupport (3.1.0)
  * archive-tar-minitar (0.5.2)
  * arel (2.2.3)
  * bcrypt-ruby (3.0.1)
  * builder (3.0.2)
  * bundler (1.2.0)
  * cancan (1.6.8)
  * capybara (1.1.2)
  * childprocess (0.3.5)
  * client_side_validations (3.1.4)
  * cocaine (0.3.0)
  * coffee-rails (3.1.1)
  * coffee-script (2.2.0)
  * coffee-script-source (1.3.3)
  * columnize (0.3.6)
  * cucumber (1.2.1)
  * cucumber-rails (1.3.0)
  * database_cleaner (0.8.0)
  * devise (1.5.3)
  * diff-lcs (1.1.3)
  * erubis (2.7.0)
  * execjs (1.4.0)
  * factory_girl (4.0.0)
  * factory_girl_rails (4.0.0)
  * faker (1.0.1)
  * ffi (1.1.5)
  * geocoder (1.1.3)
  * gherkin (2.11.2)
  * guard (1.3.2)
  * guard-rspec (1.2.1)
  * haml (3.1.7)
  * haml-rails (0.3.4)
  * hike (1.2.1)
  * hpricot (0.8.6)
  * httparty (0.8.3)
  * i18n (0.6.1)
  * jquery-rails (2.1.2)
  * json (1.7.5)
  * json_pure (1.7.5)
  * jsonify (0.3.1)
  * jsonify-rails (0.3.2)
  * libv8 (3.3.10.4)
  * linecache19 (0.5.12)
  * listen (0.5.0)
  * mail (2.3.3)
  * meta_search (1.1.3)
  * mime-types (1.19)
  * multi_json (1.3.6)
  * multi_xml (0.5.1)
  * mysql2 (0.3.11)
  * nokogiri (1.5.5)
  * orm_adapter (0.0.7)
  * paperclip (2.7.0)
  * polyamorous (0.5.0)
  * polyglot (0.3.3)
  * rack (1.3.6)
  * rack-cache (1.0.3)
  * rack-mount (0.8.3)
  * rack-ssl (1.3.2)
  * rack-test (0.6.1)
  * rails (3.1.0)
  * rails3-jquery-autocomplete (1.0.9)
  * railties (3.1.0)
  * rake (0.9.2)
  * rdoc (3.12)
  * remotipart (1.0.2)
  * rspec (2.11.0)
  * rspec-core (2.11.1)
  * rspec-expectations (2.11.3)
  * rspec-mocks (2.11.2)
  * rspec-rails (2.11.0)
  * ruby-debug-base19 (0.11.25)
  * ruby-debug19 (0.11.6)
  * ruby_core_source (0.1.5)
  * ruby_parser (2.3.1)
  * rubyzip (0.9.9)
  * sass (3.1.20)
  * sass-rails (3.1.4)
  * selenium-webdriver (2.7.0)
  * sexp_processor (3.2.0)
  * simple_datatables (0.2.1)
  * sprockets (2.0.4)
  * therubyracer (0.10.2)
  * thor (0.14.6)
  * tilt (1.3.3)
  * timeliness (0.3.6)
  * treetop (1.4.10)
  * tzinfo (0.3.33)
  * uglifier (1.3.0)
  * validates_timeliness (3.0.14)
  * warden (1.2.1)
  * web-app-theme (0.8.0)
  * webrat (0.7.3)
  * will_paginate (3.0.3)
  * xpath (0.1.4) 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-01T21:28:15.787

在我的情况下，我在`apps/assets/stylesheet/fonts.css` 此文件中创建了一个文件后出现了错误，该文件调用了`font-url()`like：

```
@font-face {
  font-family: 'museo-slab';
  src: font-url('museo_slab_500-webfont.eot');
  src: font-url('museo_slab_500-webfont.eot?#iefix') format('embedded-opentype'), 
  font-url('museo_slab_500-webfont.ttf') format('truetype');
  font-weight: bold;
  font-style: normal;
} 
```

当我将此文件重命名为`font.scss`错误时`undefined method '[]' for nil:NilClass`消失了

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-12-17T05:08:02.007

我和 Cristiam 有类似的问题。我正在使用 Rails 4.0，我`image-url()`在一个`.css`文件中调用了。

```
#pullrefresh .icon.loading {
  background: image-url('spinner.png') no-repeat;
  width: 19px;
  height: 19px;
  background-size: 100%;
  bottom: 0;

  animation: rotate 1s linear infinite;
  -o-animation: rotate 1s linear infinite;
  -ms-animation: rotate 1s linear infinite;
  -moz-animation: rotate 1s linear infinite;
  -webkit-animation: rotate 1s linear infinite;
} 
```

我只需要将文件重命名为`<filename>.scss`，它对我来说也很好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-03-01T11:12:19.827

我使用 Rails 4.2.8，我用这种方式解决了这个问题：

在所有带有密钥的项目中查找：asset-url。

如果有任何文件 css 有这个，请将其更改为 scss。

提交 -> 部署。它工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-08T22:39:30.330

我认为一旦我升级到 Rails 3.2.16，这可能已经坏了。我只需要更新 sass-rails gem 来解决这个问题。

```
bundle update sass-rails 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-14T11:52:31.400

我遇到了同样的问题，我通过以下方式解决了这个问题：

*   重命名`.css`包含 SCSS 变量或模式的文件，`@`例如。`@font-face`至`.scss`
*   删除`.css.map`文件（如果有的话）
*   删除生成的文件`.css.map`

希望这将有助于节省您调试与样式表相关的资产预编译问题的宝贵时间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-22T23:44:41.687

我意识到这是一个旧线程，但它是我的搜索查询的最高结果。

在 Rails ~6.0 上，使用加密的秘密（凭据），部署到 Heroku，但这适用于您没有`master.key`签入文件的任何地方（应该无处不在！）

就我而言，我决定使用环境变量来提供`master.key`，而忘记设置变量`RAILS_MASTER_KEY`。

# javascript - 如何在javascript中深度复制字符串？

> ID：12313619
> 
> 赞同：0
> 
> 时间：2012-09-07T07:25:55.697
> 
> 标签：javascript, string, deep-copy

我是 JavaScript 新手，有一个基本问题。我在服务器生成的页面上有 2 个文本字段，我想将字段 1 的文本值复制到字段 2，然后将字段 1 的值设置为空字符串。问题是由于 JavaScript 正在执行浅拷贝，因此字段 2 的值也设置为空字符串。

这是代码：

```
var eleTxtInit = document.getElementById("InputText0");
if (eleTxtInit == null) {
            eleTxtInit = document.getElementsByName("InputText0");
}

var eleTxtControl = document.getElementById("InputText1");
if (eleTxtControl == null) {
            eleTxtControl = document.getElementsByName("InputText1");
}

eleTxtControl.value = eleTxtInit.value;
eleTxtInit.value = ""; 
```

上面代码的结果是`InputText1`value 也变成`""`了 :( ..

这里有什么解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:31:20.990

我认为你的问题是： `eleTxtControl = document.getElementsByName("InputText1");`。`getElementsByName`返回一个[Nodelist](https://developer.mozilla.org/en-US/docs/DOM/NodeList)，所以你应该使用

```
eleTxtInit = document.getElementsByName("InputText0")[0];
//and ofcourse
eleTxtControl = document.getElementsByName("InputText1")[0]; 
```

见[jsfiddle](http://jsfiddle.net/KooiInc/djH5t/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:30:55.140

```
eleTxtInit = document.getElementsByName("InputText0"); 
```

触发将导致后续代码失败，因为[document.getElementsByName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)返回的是`HTMLCollection`，而不是`Element`。同上`eleTxtControl`。

# ruby-on-rails - ActiveRecord::Extensions::SqliteRegexp:Class 的未定义方法 class_inheritable_accessor

> ID：12313621
> 
> 赞同：1
> 
> 时间：2012-09-07T07:26:00.040
> 
> 标签：ruby-on-rails, ruby, regex, activerecord

我最近安装了“ *ar-extension* ”gem。安装后，当我运行*rails c*或*rails s*时，我收到以下错误：

```
/usr/local/rvm/gems/ruby-1.9.2-p320/gems/ar-extensions-0.9.2/lib/ar-extensions/extensions.rb:427:in `<class:SqliteRegexp>': undefined method `class_inheritable_accessor' for ActiveRecord::Extensions::SqliteRegexp:Class (NoMethodError)
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/ar-extensions-0.9.2/lib/ar-extensions/extensions.rb:426:in `<module:Extensions>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/ar-extensions-0.9.2/lib/ar-extensions/extensions.rb:112:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `block in require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/ar-extensions-0.9.2/init.rb:10:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `block in require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/ar-extensions-0.9.2/lib/ar-extensions.rb:5:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:68:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:66:in `each'
    from /usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:66:in `block in require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in `each'
    from /usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler.rb:119:in `require'
    from /home/infibeam/Aptana_studio_3/workspace/DigitalAssetManagement/config/application.rb:7:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.6/lib/rails/commands.rb:53:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.6/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.6/lib/rails/commands.rb:50:in `tap'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.6/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我已经用谷歌搜索了错误，但徒劳无功..请帮助我知道到底出了什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T08:02:29.063

您尝试使用的 gem 与 rails 3.2 不兼容。`class_inheritable_accessor`已被弃用，取而代之的是`class_attribute`.

你可以寻找这个 gem 的 rails 3.2 fork，做你自己的移植，或者寻找替代品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:02:27.423

实际上 ar-extensions 不适用于 rails3 for rails 3 我们有[主动导入](https://github.com/zdennis/activerecord-import)作为替代方案，它工作得非常好..;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T08:47:58.653

请为 rails 3 使用 activerecord-import gem

[https://github.com/zdennis/activerecord-import/wiki](https://github.com/zdennis/activerecord-import/wiki)

```
书籍= []
10 次做 |i|
  书“书#{i}”）
结尾
Book.import 书籍

```

# javascript - 如何在dojo中加载不是模块的JS文件？

> ID：12313624
> 
> 赞同：5
> 
> 时间：2012-09-07T07:26:10.917
> 
> 标签：javascript, dojo, loading, sinon

我首先要说我是一个 javascript 和 dojo 菜鸟。但是，我一直在使用 DOH 框架为我的 js 代码编写一些单元测试。我注意到的一件事是该框架似乎没有办法模拟 XHR 请求。所以我决定用 sinon 来嘲讽。

这是我的问题，我无法将 sinon 代码成功加载到我的 dojo 模块中。这是我尝试过的：

```
define(["doh/runner", "tests/sinon-1.4.2"], function(doh, sinnon) {
   ...
}); 
```

我将测试包映射到正确的目录，并且可以从那里加载其他文件。那么我该如何加载sinon呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-07T13:16:59.777

[通过通用脚本注入](http://livedocs.dojotoolkit.org/loader/amd#generic-script-injection)加载它：

```
require([
    "doh/runner",
    "http://sinonjs.org/releases/sinon-1.4.2.js"
], function(
    doh
) {

    console.log(doh);
    console.log(sinon);

}); 
```

​ jsFiddle 的一个工作示例：http: [//jsfiddle.net/phusick/6tHtj/](http://jsfiddle.net/phusick/6tHtj/)

# php - 使用 mpdf 创建 pdf 时出错

> ID：12313626
> 
> 赞同：0
> 
> 时间：2012-09-07T07:26:18.717
> 
> 标签：php, pdf-generation, mpdf

[如果有人对mpdf](http://www.mpdf1.com/mpdf/index.php)图像错误有任何想法，请在此处分享。

mPDF 错误：`***IMAGE Error (https://chart.googleapis.com/chart?cht=bvg&chs=500x350&chds=0,3500&chxt=x,y,y&chxr=1,0,3500,500&chxl=1:|0|500|1,000|1,500|2,000|2,500|3,000|3,500|0:|Budget%20with%20no%20conversions|Budget%20with%20conversions|2:|Cost%20()&chxp=2,50&chco=FFC100&chg=0,14.285714285714,1,3,0,0&chm=N*sf0*,000000,0,,12,0,be:0:5&chbh=a&chd=t:1055.1,3439.69): Could not find image file***`

我已经在我的系统中使用 => sudo apt-get install php5-curl 和 sudo service apache2 restart

# c# - 通过 showModalDialog() 打开外部链接

> ID：12313629
> 
> 赞同：0
> 
> 时间：2012-09-07T07:26:31.567
> 
> 标签：c#, javascript, asp.net, .net

有没有办法通过showModalDialog函数打开外部链接我的意思是说我想通过showModalDialog（）在打开的弹出窗口中打开“www.google.com”。

请回复。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:21:40.560

您可以使用前面文章中描述的 showModalDialog 函数打开外部链接，请记住，如果您的外部链接是跨域 showModalDialog 不会返回任何结果值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:33:35.043

是的你可以

示例：[JsFiddle](http://jsfiddle.net/U8Lqp/2/)

```
<script language="javascript">
   window.showModalDialog("http://stackoverflow.com/users/1310467/hatsoft");​
</script> 
```

# ruby-on-rails-3 - Ruby on Rails 3 - 检索到的数据始终为零

> ID：12313631
> 
> 赞同：0
> 
> 时间：2012-09-07T07:26:32.737
> 
> 标签：ruby-on-rails-3, search, activerecord

我找不到以下代码的有效解决方案：

```
 def search_last_rate
    self.rate  = Rate.find(:first, :select => "rateconverted", :conditions => ["dominant_id = ? and converted_id = ?", self.currency_bought_iso, self.currency_sold_iso], :order => 'ratedate, dateloaded, timeloaded DESC')
  end 
```

当我在控制台中执行此操作时，我会检索适当的值：

```
`=> #<Rate rateconverted: 0.8131>` 
```

所有列都在 MYSQL2 中定义为 an`decimal`但是当我在模型和新的 html 页面中使用它时，它总是保存 value `0.0`。

请指教 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:29:53.063

1.  确保 self.rate 不是整数
2.  尝试

    self.rate = Rate.find(:first, :select => "rateconverted", :conditions => ["dominant_id = ? and convert_id = ?", self.currency_bought_iso, self.currency_sold_iso], :order => 'ratedate, dateloaded, timeloaded DESC').to_f

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:49:54.013

mysql中的十进制和整数是不同的。如果您希望数据为数字，则在迁移中使用“整数”，否则使用“浮点”。在 MySQL 中结帐 [Decimal VS Int？](https://stackoverflow.com/questions/2682115/decimal-vs-int-in-mysql)

# javascript - jQuery .hover() 未在鼠标悬停时完成

> ID：12313639
> 
> 赞同：1
> 
> 时间：2012-09-07T07:27:17.087
> 
> 标签：javascript, jquery, html

我有一个 jQuery 列表设置为在事件`<p class="results">`中显示隐藏：`<div>``.hover()`

```
<p class="results">item1</p>
<p class="results">item2</p>
<p class="results">item3</p>
...
<div id="hidden">My popup here</div>
...
<script>
$(".results").hover(function() {
     $('#hidden').html(function() {
          [...put html here...]
     }).fadeIn(200);
}, function() {
     $("#hidden").hide();
})
</script> 
```

问题是（我假设）因为如果用户快速从一个项目悬停在另一个项目然后完全离开，我有 200 毫秒的淡入`<p>`，第二个隐藏的`<div>`功能不会触发。我很确定我需要在其中的`.stop()`某个地方添加一些带有该方法的代码，但不确定如何实现它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:28:33.763

你几乎拥有它：

```
<p class="results">item1</p>
<p class="results">item2</p>
<p class="results">item3</p>
...
<div id="hidden">My popup here</div>
...
$(".results").hover(function() {
     $('#hidden').html(function() {
          [...put html here...]
     }).fadeIn(200);
}, function() {
     $("#hidden").stop().hide(); // <- important bit here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:30:42.500

尝试：

```
<script>
$(".results").hover(function() {
    $('#hidden').stop().html(function() {
         [...put html here...]
    }).fadeIn(200);
}, function() {
    $("#hidden").stop().hide();
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:36:50.850

那么mouseenter，mouseleave呢？

[http://jsfiddle.net/Yxv25/](http://jsfiddle.net/Yxv25/)

```
$(".results").on('mouseenter',function() {
 $('#hidden').fadeIn(200);
}).on('mouseout', function() {
 $("#hidden").hide();
})​ 
```

**编辑：**

或者设置一个定时器，[http://jsfiddle.net/Yxv25/1/](http://jsfiddle.net/Yxv25/1/)

我不太确定你需要哪一个。

# c++ - 如何将命令行参数传递给正在运行的进程？

> ID：12313640
> 
> 赞同：2
> 
> 时间：2012-09-07T07:27:22.613
> 
> 标签：c++, c, linux, shell, unix

在 Linux 平台中，如果我在控制台中编写，`ps -p "pid" -o command`我会在运行程序时得到与终端中传递的所有参数的完整行。控制台中的输出如下：`COMMAND gedit /home/sasha/Work/unloker/main.cpp (Ubuntu)`. 现在我正在编写程序，其主要目的是获得完整的输入命令行过程。我的 C++ 代码是：

```
snprintf(path_cmdline, sizeof(path_cmdline), "/proc/%d/cmdline", pid);
fd_cmdline = open(path_cmdline, O_RDONLY);
if (fd_cmdline < 0) {
} else {
  char process_name[PATH_MAX];
  if (read(fd_cmdline, process_name, PATH_MAX) < 0) {
  } else {
     pid_info pid_t;
     pid_t.pid=pid;
     strcpy(pid_t.command_line,process_name);
     strcpy(pid_t.process_name,basename(process_name));
     std::cout << pid_t << std::endl;
  }
} 
```

和我的程序的输出是这样的：`10753 gedit gedit`，但是我怎样才能得到完整的命令行，就像输出的一样`ps -p "pid" -o command`？

`/proc/%d/`正在运行的程序的完整命令行在哪里？在 Solaris 系统中，我知道存在执行`pargs`我想要的命令，现在我可以在哪里找到该命令的来源？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T07:44:30.753

/proc/pid/cmdline 中的参数是字符串列表，以 0 字节分隔。因此，将其视为以第一个 0 字节结尾的 C 字符串只会为您提供进程名称。将所有 0 字节替换为由空格返回的大小`read`，然后重试。

这是证据：

```
$ hexdump -bc < /proc/32096/cmdline
0000000 142 141 163 150 000 055 162 143 146 151 154 145 000 056 142 141
0000000   b   a   s   h  \0   -   r   c   f   i   l   e  \0   .   b   a
0000010 163 150 162 143 000
0000010   s   h   r   c  \0
0000015 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:37:30.240

在 linux 中，正在运行的进程信息存储在 /proc/ 文件夹中 -
准确地说是 /proc/{PROCESS_ID}/cmdline - 例如这里是 chrome-

```
 $cat /proc/3193/cmdline 
 /opt/google/chrome/chrome --type=renderer --lang=en-US --force-fieldtrials=ConnCountImpact/conn_count_6/ConnnectBackupJobs/ConnectBackupJobsEnabled/DnsImpact/default_enabled_prefetch/GlobalSdch/global_enable_sdch/IdleSktToImpact/idle_timeout_10/OmniboxDisallowInlineHQP/Standard/OmniboxSearchSuggest/6/Prerender/ContentPrefetchPrerender1/ProxyConnectionImpact/proxy_connections_32/SBInterstitial/V2/SpdyImpact/spdy3/UMA-Dynamic-Binary-Uniformity-Trial/default/UMA-Uniformity-Trial-1-Percent/group_31/UMA-Uniformity-Trial-10-Percent/group_05/UMA-Uniformity-Trial-20-Percent/default/UMA-Uniformity-Trial-5-Percent/group_13/UMA-Uniformity-Trial-50-Percent/group_01/WarmSocketImpact/warmest_socket/ --enable-crash-reporter=81A0480CAE65B69A53CE6E791EAA05A5,Ubuntu 10.10 --disable-client-side-phishing-detection --renderer-print-preview --disable-accelerated-2d-canvas --channel=2980.13.513987986 
```

# wcf - 实现相同服务契约的多个类

> ID：12313641
> 
> 赞同：2
> 
> 时间：2012-09-07T07:27:33.990
> 
> 标签：wcf

我创建了一个 WCF 服务，其中我有一个服务合同和多个服务类实现相同的合同。您能否告诉我在 app.config 中编辑什么以及如何在控制台应用程序中托管此服务。我有一份服务合同，我在 wcf 的三个 *.cs 文件中实施了这份合同。

谢谢。

这是我写的 App.config

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="ProductService.Service1">
        <host>
          <baseAddresses>
            <add baseAddress = "http://localhost:8732/Design_Time_Addresses/ProductService/Service1/" />
          </baseAddresses>
        </host>
        <!-- Service Endpoints -->
        <!-- Unless fully qualified, address is relative to base address supplied above -->
        <endpoint address ="" binding="wsHttpBinding" contract="ProductService.IService1">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <!-- Metadata Endpoints -->
        <!-- The Metadata Exchange endpoint is used by the service to describe itself to clients. --> 
        <!-- This endpoint does not use a secure binding and should be secured or removed before deployment -->
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
        <service name="ProductService.RegistrationService">
            <host>
                <baseAddresses>
                    <add baseAddress="http://localhost:7777/Design_Time_Addresses/ProductService/RegistrationService/"/>
                </baseAddresses>
            </host>
            <endpoint address="" binding="wsHttpBinding" contract="ProductService.IService1">
                <identity>
                    <dns value ="localhost"/>
                </identity>
            </endpoint>
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
        </service>
        <service name="ProductService.ProductService">
            <host>
                <baseAddresses>
                    <add baseAddress="http://localhost:8888/Design_Time_Addresses/ProductService/ProductService/"/>
                </baseAddresses>
            </host>
            <endpoint address="" binding="wsHttpBinding" contract="ProductService.IService1">
                <identity>
                    <dns value ="localhost"/>
                </identity>
            </endpoint>
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
        </service>
        <service name="ProductService.CatogeryService">
            <host>
                <baseAddresses>
                    <add baseAddress="http://localhost:8080/Design_Time_Addresses/ProductService/CatogeryService/"/>
                </baseAddresses>
            </host>
            <endpoint address="" binding="wsHttpBinding" contract="ProductService.IService1">
                <identity>
                    <dns value ="localhost"/>
                </identity>
            </endpoint>
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
        </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:43:59.890

我想你已经在服务合同上定义了几个服务操作？你试图做的事情是不可能的，也不是可取的。

因为一个逻辑服务只与一个服务合同相关联，所以您不能为同一个合同添加多个服务。

您*可以*为每个服务合同添加多个服务端点，但不能基于每个操作。您可能希望通过两种或多种不同的传输方式（例如 HTTP 和 HTTPS）提供服务。

您可以使用单个服务的所有操作（您定义了 4 个服务，所以只需摆脱最后三个），但我认为这不是您想要做的。

要在单独的服务端点上托管每个服务操作，您需要将服务合同分解为多个合同。

这是更可取的，因为它减少了端点之间的耦合，并且更容易理解正在发生的事情。

# c++ - C++ 类静态成员

> ID：12313646
> 
> 赞同：-1
> 
> 时间：2012-09-07T07:27:43.460
> 
> 标签：c++, static, static-members, unresolved-external

所以我的头文件带有静态成员：

```
#ifndef PROFILE_MANAGER_H
#define PROFILE_MANAGER_H

#include <map>
#include <vector>

using namespace std;
using std::vector;

namespace Engine
{
    class ProfileManager
    {
    private:
        static map<const char*, vector<float>> profiles;
        static map<const char*, vector<float>>::iterator it;
        static pair<map<const char*, vector<float>>::iterator, bool> ret;
    };
}

#endif 
```

在我的 cpp 文件中，我有以下定义：

```
#include "ProfileManager.h"

namespace Engine
{
    map<const char*, vector<float>> ProfileManager::profiles;
    map<const char*, vector<float>>::iterator ProfileManager::it;
    pair<map<const char*, vector<float>>::iterator, bool> ProfileManager::ret;
} 
```

链接器总是抱怨静态成员是未解析的外部（LNK2001），即使我已经在 cpp 文件中定义了它们。关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:47:35.323

此类错误通常发生在链接器未获得作为 cpp 编译结果的 obj 文件时。

在输出目录中查找 ProfileManager.obj。如果它不存在，则有问题。可能 cpp 文件没有按照 Luchian Grigore 的建议进行编译。也有可能链接器没有在参数中给出 obj 文件。如果您使用的是 Visual Studio，请检查 cpp 文件是否是项目的一部分。在其他环境中，请参阅调用链接器的命令。

如果您使用 Visual Studio，您可以打开项目属性 -> 链接器 -> 命令行并在附加选项中添加 /VERBOSE。然后打开输出窗口并重新编译项目。（谢谢你，克雷格的评论）。

还有一种可能发生的情况。您将头文件包含在另一个项目中，并且您尝试在不引用 ProfileManager.cpp 所在的项目的情况下进行构建。

# css - IE7 不理解浮动宽度？

> ID：12313652
> 
> 赞同：0
> 
> 时间：2012-09-07T07:27:57.027
> 
> 标签：css, css-float

不知道怎么解释，在IE7中，当Right的DIV向右浮动并取消设置它的宽度时，浮动的左子DIV将变得与它的父DIV一样宽。

[http://jsfiddle.net/dyvar/1/](http://jsfiddle.net/dyvar/1/)

即 7 ![在此处输入图像描述](../Images/a7ddf917f3f9d2471f2ffb13b6b033b0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:34:47.960

请试试这个 [http://jsfiddle.net/dyvar/2/](http://jsfiddle.net/dyvar/2/)

```
<div class="right fr">
        <div class="fl">D1</div>
        <div class="fl">D2</div>
    </div> 
```

我已经更新了你的 html

以前的 html

```
<div class="right fr">
            <div class="fl">D1</div>
            <div class="fr">D2</div>
        </div> 
```

# android - 安卓模拟器无法启动

> ID：12313657
> 
> 赞同：0
> 
> 时间：2012-09-07T07:28:09.083
> 
> 标签：android, android-emulator

dalvik 调试监视器日志：

```
09-07 06:44:20.587: E/Zygote(33): setreuid() failed. errno: 17
09-07 06:44:22.177: E/BatteryService(75): usbOnlinePath not found
09-07 06:44:22.177: E/BatteryService(75): batteryVoltagePath not found
09-07 06:44:22.177: E/BatteryService(75): batteryTemperaturePath not found
09-07 06:44:22.207: E/SurfaceFlinger(75): Couldn't open /sys/power/wait_for_fb_sleep or /sys/power/wait_for_fb_wake
09-07 06:44:26.847: E/AlarmManagerService(75): unable to query boot class: Invalid argument
09-07 06:44:27.077: E/IPCThreadState(75): IPCThread::waitForResponse checking error 3 : -1
09-07 06:44:27.077: E/JavaBinder(75): BpBinder::transact() returns exception, err is -1
09-07 06:44:27.097: E/System(75): Failure starting core service
09-07 06:44:27.097: E/System(75): java.lang.SecurityException
09-07 06:44:27.097: E/System(75):   at android.os.BinderProxy.transact(Native Method)
09-07 06:44:27.097: E/System(75):   at android.os.ServiceManagerProxy.addService(SourceFile:177)
09-07 06:44:27.097: E/System(75):   at android.os.ServiceManager.addService(SourceFile:103)
09-07 06:44:27.097: E/System(75):   at com.android.server.ServerThread.run(SystemServer.java:285)
09-07 06:44:27.127: E/EventHub(75): could not get driver version for /dev/input/mouse0, Not a typewriter
09-07 06:44:27.127: E/EventHub(75): could not get driver version for /dev/input/mice, Not a typewriter
09-07 06:44:27.797: E/Pv_omxcore(34): RvRegister A return 0
09-07 06:44:27.797: E/Pv_omxcore(34): after RvRegister A return 0
09-07 06:44:27.857: E/(34): Cannot load library: load_library[1135]: Library 'libasfextractor.so' not found
09-07 06:44:27.966: E/OMXCodec(34): OpenCore USES_YUSU_SW=TRUE
09-07 06:44:28.057: E/(34): Cannot load library: load_library[1135]: Library 'libasfextractor.so' not found
09-07 06:44:28.117: E/IBE(75): ------------------loadIbeConfig---0--------
09-07 06:44:28.137: E/NetConnector(75): ---CheckImConnectedThread---2012-09-07   06:44:28
09-07 06:44:28.137: E/OMXCodec(34): OpenCore USES_YUSU_SW=TRUE
09-07 06:44:28.227: E/(34): Cannot load library: load_library[1135]: Library 'libasfextractor.so' not found
09-07 06:44:28.287: E/OMXCodec(34): OpenCore USES_YUSU_SW=TRUE
09-07 06:44:28.307: E/APPCLICK(75): -----AppClickStatistics
09-07 06:44:28.517: E/(34): Cannot load library: load_library[1135]: Library 'libasfextractor.so' not found
09-07 06:44:28.637: E/OMXCodec(34): OpenCore USES_YUSU_SW=TRUE
09-07 06:44:28.737: E/LockPatternKeyguardView(75):  createMotoneLockScreen failed!
09-07 06:44:28.877: E/(34): Cannot load library: load_library[1135]: Library 'libasfextractor.so' not found
09-07 06:44:28.966: E/ThrottleService(75): Could not open GPS configuration file /etc/gps.conf
09-07 06:44:28.987: E/OMXCodec(34): OpenCore USES_YUSU_SW=TRUE
09-07 06:44:29.087: E/ZygoteProcess(75): readInt++
09-07 06:44:29.087: E/SystemServer(75): dm binder is null!
09-07 06:44:29.127: E/Zygote(33): writeInt++143
09-07 06:44:29.177: E/ZygoteProcess(75): readInt--: 143
09-07 06:44:29.177: E/Zygote(33): writeInt--143
09-07 06:44:30.537: E/LockPatternKeyguardView(75):  createMotoneLockScreen failed!
09-07 06:44:32.127: E/IPCThreadState(75): IPCThread::waitForResponse checking error 3 : -1
09-07 06:44:38.767: E/DMOpFile(143): Error Parsing DMOperator file: 1 defined, 2 parsed!
09-07 06:44:39.228: E/DMOpFile(143): Error Parsing DMOperator file: 1 defined, 2 parsed!
09-07 06:44:39.926: E/ZygoteProcess(75): readInt++
09-07 06:44:40.107: E/Zygote(33): writeInt++185
09-07 06:44:40.107: E/ZygoteProcess(75): readInt--: 185
09-07 06:44:40.177: E/Zygote(33): writeInt--185
09-07 06:44:42.337: E/DefaultPhoneNotifier(143): apnType is null
09-07 06:44:42.347: E/DefaultPhoneNotifier(143): convertDataState(sender.getDataConnectionState(apnType) is 0
09-07 06:44:42.347: E/DefaultPhoneNotifier(143): sender.isDataConnectivityPossible(apnType) is false
09-07 06:44:42.357: E/DefaultPhoneNotifier(143): reason is gprsDetached
09-07 06:44:42.357: E/DefaultPhoneNotifier(143): sender.getActiveApn() is null
09-07 06:44:42.357: E/DefaultPhoneNotifier(143): sender.getActiveApnTypes() is null
09-07 06:44:42.367: E/DefaultPhoneNotifier(143): sender.getInterfaceName(apnType) is null
09-07 06:44:42.367: E/DefaultPhoneNotifier(143): ((telephony!=null) ? telephony.getNetworkType() : TelephonyManager.NETWORK_TYPE_UNKNOWN) is 0
09-07 06:44:44.627: E/DefaultPhoneNotifier(143): apnType is null
09-07 06:44:44.627: E/DefaultPhoneNotifier(143): convertDataState(sender.getDataConnectionState(apnType) is 0
09-07 06:44:44.637: E/DefaultPhoneNotifier(143): sender.isDataConnectivityPossible(apnType) is false
09-07 06:44:44.637: E/DefaultPhoneNotifier(143): reason is gprsDetached
09-07 06:44:44.637: E/DefaultPhoneNotifier(143): sender.getActiveApn() is null
09-07 06:44:44.667: E/DefaultPhoneNotifier(143): sender.getActiveApnTypes() is null
09-07 06:44:44.677: E/DefaultPhoneNotifier(143): sender.getInterfaceName(apnType) is null
09-07 06:44:44.677: E/DefaultPhoneNotifier(143): ((telephony!=null) ? telephony.getNetworkType() : TelephonyManager.NETWORK_TYPE_UNKNOWN) is 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:51:41.263

您重新启动 IDE 和 pc，然后重试。

# asp.net - 使用jquery在手风琴中提交表单后如何保持在同一个选项卡上

> ID：12313661
> 
> 赞同：0
> 
> 时间：2012-09-07T07:28:32.397
> 
> 标签：asp.net, redirect, jquery-ui-accordion

我只想在提交表单后留在同一个选项卡中。

这是脚本：

```
$("#accordion").accordion({ header: "h3", navigation: true }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:36:35.077

> 我已经用这个更正了

```
<asp:HiddenField ID="hidAccordionIndex" runat="server" Value="0" /> 
```

将其放入您的编码中并按如下方式更改脚本

```
$("#accordion").accordion({
header: "h3",
autoHeight: false,
event: "mousedown",
active: activeIndex,
ui: "Admin.aspx",
change: function (event, ui) {
var index = $(this).accordion("option", "active");
$('#<% =hidAccordionIndex.ClientID %>').val(index);
}
}); 
```

# sqlite - SQLite：连字符被替换为 –

> ID：12313664
> 
> 赞同：0
> 
> 时间：2012-09-07T07:28:43.733
> 
> 标签：sqlite

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:06:53.303

This is external to sqlite. Some text editors/applications will replace hyphens, quotes, etc for whatever reason. Wordpress is terribly annoying about this.

# visual-studio-2010 - 构建解决方案后输出窗口VS2010不会显示任何消息

> ID：12313670
> 
> 赞同：2
> 
> 时间：2012-09-07T07:29:14.560
> 
> 标签：visual-studio-2010, build-process

我正在使用 Visual Studio 2010 Ultimate 并且在构建解决方案后突然输出窗口不会显示任何消息。例如：

> 1>----- 构建开始：项目：libdnet-stripped，配置：发布 Win32 ------
> 
> 2>------构建开始：项目：tran_cli，配置：发布Win32 ------
> 
> ========== 构建：0 成功，2 失败，4 最新，0 跳过 ==========

并且错误列表为空。我该如何解决？

# c# - 将 IList 转换为 SomeType[]

> ID：12313672
> 
> 赞同：4
> 
> 时间：2012-09-07T07:29:18.960
> 
> 标签：c#, arrays, generics, runtime

我有一个列表类型的集合，我想将其转换为 SomeType[]。SomeType 在运行前是未知的。

这必须通过以下程序的签名来完成。

```
private object ConvertListToArray(IList  collection)
{
       // This does not work since SomeType is not known before runtime.
       var convertedList = collection.Cast<SomeType>().ToArray();
        return convertedList;
} 
```

请注意，collection 是 IList，但已知具体类型是

```
 List<SomeType> 
```

返回集合必须是 SomeType[] 类型的对象。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:32:45.900

您可以通过以下实现来做到这一点：

```
class Program
{
    static void Main(string[] args)
    {
        // same type
        var myCollection = new List<string> {"Hello", "World"};
        var array = (string[])myCollection.ConvertToArray();
        Console.WriteLine(array[0]);

        // new type
        var intList = new List<int> {1, 2, 3};
        var stringArray = (string[])intList.ConvertToArray(typeof(string));
        Console.WriteLine(stringArray[0]);

        // mixed types
        var ouch = new List<object> {1, "Mamma", 3.0};
        var result= (string[])ouch.ConvertToArray(typeof(string));
        Console.WriteLine(result[0]);

    }
} 
```

实施：

```
public static class ListExtensions
{
    public static object ConvertToArray(this IList collection)
    {
        // guess type
        Type type;
        if (collection.GetType().IsGenericType && collection.GetType().GetGenericArguments().Length == 0)
            type = collection.GetType().GetGenericArguments()[0];
        else if (collection.Count > 0)
            type = collection[0].GetType();
        else
            throw new NotSupportedException("Failed to identify collection type for: " + collection.GetType());

        var array = (object[])Array.CreateInstance(type, collection.Count);
        for (int i = 0; i < array.Length; ++i)
            array[i] = collection[i];
        return array;
    }

    public static object ConvertToArray(this IList collection, Type arrayType)
    {
        var array = (object[])Array.CreateInstance(arrayType, collection.Count);
        for (int i = 0; i < array.Length; ++i)
        {
            var obj = collection[i];

            // if it's not castable, try to convert it
            if (!arrayType.IsInstanceOfType(obj))
                obj = Convert.ChangeType(obj, arrayType);

            array[i] = obj;
        }

        return array;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:47:51.203

```
public static class ListExtensions
{
    public static T[] ConvertToArray<T>(IList list)
    {
        return list.Cast<T>().ToArray();
    }

    public static object[] ConvertToArrayRuntime(IList list, Type elementType)
    {
        var convertMethod = typeof(ListExtensions).GetMethod("ConvertToArray", BindingFlags.Static | BindingFlags.Public, null, new [] { typeof(IList)}, null);
        var genericMethod = convertMethod.MakeGenericMethod(elementType);
        return (object[])genericMethod.Invoke(null, new object[] {list});
    }

}
[TestFixture]
public class ExtensionTest
{
    [Test]
    public void TestThing()
    {
        IList list = new List<string>();
        list.Add("hello");
        list.Add("world");

        var myArray = ListExtensions.ConvertToArrayRuntime(list, typeof (string));
        Assert.IsTrue(myArray is string[]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:43:21.180

你可以试试：

```
 private T[] ConvertListToArray<T>(IList collection)
   {
   // This does not work since SomeType is not known before runtime.
            var convertedList = collection.Cast<T>().ToArray();
            return convertedList;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-28T15:42:40.567

我发布这个是因为其他答案似乎有点冗长。我很确定这可以满足 OP 的要求。它对我有用。

```
public static Array ConvertToArray(ICollection collection, Type type)
{ 
    var array = Array.CreateInstance(type, collection.Count);

    collection.CopyTo(array, 0);

    return array;
} 
```

# css - 放大 缩小 CSS 中的问题

> ID：12313679
> 
> 赞同：0
> 
> 时间：2012-09-07T07:30:01.860
> 
> 标签：css, html

嗨，我在这里粘贴我的页面代码，因为我有一张背景图片。在那我需要放按钮。当我做放大和缩小按钮从位置移动。

```
<html>
<head>
    <style type="text/css">
        body
        {   
            background:SteelBlue url('BG_BLUE_NEW.jpg') no-repeat center center;
        }
        .login
        {
            margin-top:300px;
            height:300px
        }
    </style>
</head>
<body>
    <div class="container">
    <div class="login">
        <form style="padding-left:370px;margin-bottom:0px;">
            <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
            <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
            <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
            <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
            <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
        </form>
    </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:33:12.097

看看这个：

```
<html>
<head>
    <style type="text/css">
        body
        {   
            background:SteelBlue url('BG_BLUE_NEW.jpg') no-repeat center center;
        }
        .login
        {
            width:100px; /*<- important edit*/
            margin: 0 auto; /*<- important edit*/
            margin-top:300px;
            height:300px
        }
    </style>
</head>
<body>
    <div class="container">
    <div class="login">
        <form style="margin-bottom:0px;"><!-- removed padding -->
            <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
            <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
            <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
            <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
            <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
        </form>
    </div>
    </div>
</body>
</html> 
```

这里发生了什么：

我在 div 上设置了一个指定的 (100px)`.login`来保存也具有 100px 宽度的输入。

然后我应用`margin:0 auto`了以下内容：将上下边距设置为0，将左右边距设置为“自动”（增长到填充）

之后我删除了`<form>`元素上的 padding-left

[你可以在这里](http://jsfiddle.net/RN5EV/)看到它的作用

# iphone - 如何（使用 Storyboard）在 iPhone 中创建 JSON 解析器？

> ID：12313682
> 
> 赞同：-1
> 
> 时间：2012-09-07T07:30:09.693
> 
> 标签：iphone, json, storyboard, rfc

目前我在 iPhone 应用程序中工作，使用 Storyboard 创建 JSONParser，在应用程序中导入 JSON 库，然后我在 ViewController.h 文件中添加了#import JSON/JSON.h，但错误出现在“找不到文件”中，并且由于我使用的是 RFC，因此发布 JSON 框架类错误，那么如何解决这些问题？

在此处发现 JSON Framework 类内部错误

![JSON 框架类错误](../Images/328319ab3f8b630ef916d73787345f1f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:35:10.817

您的项目使用 ARC，但 JSON 库没有。您需要为库文件禁用 ARC。要了解如何操作，请参阅以下问题： [如何为项目中的单个文件禁用 ARC？](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)，或者这个：[ios5 ARC 什么是从 ARC 中排除文件的编译器标志？](https://stackoverflow.com/questions/8040629/ios5-arc-what-is-the-compiler-flag-to-exclude-a-file-from-arc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:37:20.223

您得到的错误是 ARC 问题。您的项目启用了 ARC，但 JSON 框架未使用 ARC。

您可以在整个项目中禁用 ARC，或将其用于单个文件。[看](https://stackoverflow.com/questions/9629820/use-automatic-referencing-count-in-specific-classes-in-ios/9629853#9629853)

# c# - WPF 应用程序与 Microsoft Project Server 2010 通信

> ID：12313684
> 
> 赞同：0
> 
> 时间：2012-09-07T07:30:20.893
> 
> 标签：c#, wpf, project-server

我们未来的工作要求之一是能够从我们的 WPF 应用程序读取和写入 Microsoft Project Server 2010。我们知道 Microsoft Project Server 2010 构建在 Sharepoint 之上（来自[http://msdn.microsoft。 com/en-us/library/office/ms504195%28v=office.15%29](http://msdn.microsoft.com/en-us/library/office/ms504195%28v=office.15%29)）所以我们知道您可以使用 Sharepoint 编程来做到这一点（如果我错了，请纠正我）。

基于在 StackOverFlow 和在线搜索中，我们无法找到有关如何使用我们的 WPF 应用程序与 Project Server 进行通信的任何资源。WPF 应用程序和 Project Server 真的是这种情况吗？或者我们可能会遗漏一些东西。我们最近使用我们的 WPF 应用程序实现了 Exchange Server 通信，我们认为在 Project Server 2010 方面会出现类似情况。

（更多信息：我们正在使用 TFS 进行团队协作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:53:55.173

正确：Project Server 建立在 Sharepoint 之上

部分错误：可以使用 SharePoint API 调用访问与 Project Server 相关的数据（某些配置信息除外）。

Project Server 使用其自己的 API，称为 PSI：Project Server 接口，（[链接](http://msdn.microsoft.com/en-us/library/office/ms512767.aspx)）。

API 包括 Web 服务（WCF 或 ASP.NET），用于访问与项目计划、资源等相关的不同数据。一些信息可以通过不同的服务访问，但案例中的字段集可能不同：字段 A + 字段 B可以通过 Web 服务 A 访问，但只有 Field B 可以通过 Web 服务 B 访问

PSI 根据 Project Server 上的安全设置工作，并且为 API 的每个功能定义了所需的权限。

我说可以使用 SharePoint API 访问 Project Server 数据是部分错误的。部分原因是您可以将项目与 SharePoint 列表同步，在这种情况下，可以使用 SharePoint API 访问 SharePoint 列表。

# web-services - 如何在 Asp.net 的网格视图中填充 XML 节点值？

> ID：12313685
> 
> 赞同：0
> 
> 时间：2012-09-07T07:30:26.433
> 
> 标签：web-services, rest, amazon-web-services

我正在使用第三方网络服务。我得到了 XML 格式的响应。现在，我必须在网格视图中显示 XML 节点值。到目前为止我尝试了以下代码。

```
 using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
    {
        // Get the response stream
        StreamReader reader = new StreamReader(response.GetResponseStream());
        //Label2.Text = reader.ReadToEnd();

        XmlDocument xml = new XmlDocument();
        xml.Load(reader);

        XmlNamespaceManager ns = new XmlNamespaceManager(xml.NameTable);
        ns.AddNamespace("ms", "http://webservices.amazon.com/AWSECommerceService/2005-10-05");

        XmlNode image = xml.SelectSingleNode("//ms:URL", ns);
        XmlNode FormattedPrice = xml.SelectSingleNode("//ms:FormattedPrice", ns); 
```

现在，我想在网格视图中显示 XMLnode 值的值。如果您需要更多信息，请通知我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:57:42.167

解决方案：

而不是在 xmldocument 中获取 HttpResponse。我使用了 XNamespace 和 XDocument。

```
XNamespace ns = "http://webservices.amazon.com/AWSECommerceService/2005-10-05";    // Linq
XDocument xd = XDocument.Load(response.GetResponseStream()); 
```

然后使用 Linq 读取所有 Vlaues。例子：

```
var Image = xd.Descendants(ns + "Items").Elements(ns + "Item").Select(img => img.Elements(ns + "MediumImage").Select(img1 => (string)img1.Element(ns + "URL")).FirstOrDefault() ?? "Null").ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:32:29.863

您可以为此使用 XMLDataSource：

[http://www.codeproject.com/Articles/10898/Introduction-to-XMLDataSource-control-in-ASP-NET-2](http://www.codeproject.com/Articles/10898/Introduction-to-XMLDataSource-control-in-ASP-NET-2)

此致。

# sql - 在 SQL Server 2005 中使用转换函数更新表错误

> ID：12313687
> 
> 赞同：1
> 
> 时间：2012-09-07T07:30:33.577
> 
> 标签：sql, sql-server-2005

我有一个有两列的表，它们都是日期时间值 例如，A 列的值为 '07/09/2012 14:13:34' 现在，我想通过语句将 A 列更新为 yyyymmdd

```
 Update Change_Date
    SET A = CONVERT(VARCHAR(8),A,112) 
```

它在我的表 Change_Date 中显示成功消息但没有效果（没有更新到 20120907 的值）。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:35:28.427

日期时间字段保存日期时间。您如何*看待*日期时间是您用于检查数据的工具的结果，无论是 Management Studio，还是您自己的从数据库打印某些内容的软件。

我强烈建议将其保留为日期时间字段。这将允许您执行与日期相关的操作，例如减法和比较。如果您想更改用户查看日期的方式，请在表示层格式化您的日期。

您发布的代码中发生的事情是您将值设置为`A`与它已经相同的日期。您通过另一种格式的字符串设置该值这一事实没有关系，SQL Server 将始终必须将您的字符串输入解析为它可以理解的日期。这就是您没有收到错误消息的原因。该操作正在运行，只是它没有改变任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:33:03.500

这是因为列的数据类型是`DATE`or`DATETIME`并且它具有特定的格式。如果要使用特定格式更新列，请创建另一列并设置其 datatype `VARCHAR`。我相信`112`是`yyyymmdd`格式。

我强烈建议您保持原样。数据库是数据的存储，不用于查看目的。`DATETIME`如果您的数据类型是或，则很容易执行日期任务`DATE`。例如，如果您想检索具有特定格式的日期，那就是您转换日期的时间。

希望这是有道理的。

![在此处输入图像描述](../Images/432cb6557f33b89ebf8ac095c1483f7d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:36:17.103

您可以选择指定格式的日期列，也可以创建一个选择 yyyymmdd 格式的列值的视图：

```
SELECT CONVERT(VARCHAR(8), A, 112) FROM Change_Date 
```

# javascript - 在 HTML 标签/jQuery 中保存信息

> ID：12313693
> 
> 赞同：0
> 
> 时间：2012-09-07T07:30:53.813
> 
> 标签：javascript, jquery, html

我希望将容器的状态保存在它们的任何标签中，以便与 jQuery 一起使用。问题是如果我使用 data-xy 和 data() 或 attr()，JS 会说未定义。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:57:27.483

有很多次了。数据属性总是小写。

说：

```
<div id="hello" data-testHello="HelloThere">Test</div> 
```

数据仍将通过以下方式访问：

```
$('#hello').data("testhello"); rather than "testHello". 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:54:28.287

创建一个对象，其属性为 div 或元素的 id 和值。

```
<div id="foo"><span>this is a test</span></div> 
```

用于设置状态

```
var stateStore = {};
stateStore["foo"] = "dirty"; 
```

访问状态

```
$("div").each(function(){
 MakeAnythingWithIt(this);
})

function MakeAnythingWithIt(theElement)
{
 var elementState = stateSore[$(theElement).attr("id")];
} 
```

另一种方法是在输入 type="hidden" 中附加状态信息

# c# - 自跟踪实体 SaveChanges() 在多对多关系中添加实体时出现异常

> ID：12313697
> 
> 赞同：2
> 
> 时间：2012-09-07T07:31:01.847
> 
> 标签：c#, wcf, entity-framework, entity-framework-4, self-tracking-entities

我有 2 个实体对象“人员”和“研讨会”。关系 - 多对多。一个项目包括 - EF4.0/STE、WCF 和 WinForms。

当我尝试将人员添加到研讨会时

```
 public void AddPersonsToSeminar(Seminar seminar, List<Person> persons)
        {
            using (T3EntitiesConn context = new T3EntitiesConn())
            {
                if (seminar != null)
                {
                    context.Seminar.Attach(seminar);

                    foreach (Person person in persons)
                    {
                        if (!seminar.Person.Any(p => p.ID == person.ID))
                        {
                            seminar.Person.Add(person);
                            context.Seminar.ApplyChanges(seminar);
                        }
                    }
                    context.SaveChanges(); 
```

我有例外 -

```
The property 'ID' is part of the object's key and cannot be changed. Changes to key properties can only be made when the object is not being tracked or is in the Added state. 
```

请解释如何解决它谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T13:06:48.130

可能是您的研讨会和人员来自不同的对象上下文并且您正在创建新上下文的问题。您正确地将研讨会附加到该上下文中，但是您正在将人员从旧上下文添加到新创建的上下文中？

# c++ - 使用自动生成的 C 代码对大型 C++ dll 的性能损失

> ID：12313698
> 
> 赞同：4
> 
> 时间：2012-09-07T07:31:04.403
> 
> 标签：c++, c, performance, dll

我正在开发一款需要调用一系列优化求解器的软件。每个求解器都是一段自动生成的 C 代码，包含数千行代码。我使用了 200 个这样的求解器，仅在要解决的优化问题的大小上有所不同。

总而言之，这些自动生成的求解器产生大约 180MB 的 C 代码，我`extern "C"{ /*200 solvers' headers*/ }`在 Visual Studio 2008 中使用语法将其编译为 C++。编译所有这些非常慢（使用“最大速度 /O2”优化标志，大约需要 8 小时）。出于这个原因，我认为将求解器编译成单个 DLL 是一个好主意，然后我可以从一个单独的软件中调用它（这将有一个合理的编译时间，并允许我抽象出所有这些 extern “ C”的东西来自更高级别的代码）。编译后的 DLL 大约为 37MB。

问题是当使用 DLL 执行这些求解器之一时，执行需要大约 30 毫秒。如果我只将单个求解器编译成一个 DLL，并从同一个程序中调用它，则执行速度大约快 100 倍（<1ms）。为什么是这样？我可以绕过它吗？

DLL 如下所示。每个求解器使用相同的结构（即它们具有相同的成员变量），但它们具有不同的名称，因此都是类型转换。

```
extern "C"{
#include "../Generated/include/optim_001.h"
#include "../Generated/include/optim_002.h"
/*etc.*/
#include "../Generated/include/optim_200.h"
}

namespace InterceptionTrajectorySolver
{

__declspec(dllexport) InterceptionTrajectoryExitFlag SolveIntercept(unsigned numSteps, InputParams params, double* optimSoln, OutputInfo* infoOut)
{
  int exitFlag;

  switch(numSteps)
  {
  case   1:
    exitFlag = optim_001_solve((optim_001_params*) &params, (optim_001_output*) optimSoln, (optim_001_info*) &infoOut);
    break;
  case   2:
    exitFlag = optim_002_solve((optim_002_params*) &params, (optim_002_output*) optimSoln, (optim_002_info*) &infoOut);
    break;
  /*
    ...
    etc.
    ...
  */
  case   200:
    exitFlag = optim_200_solve((optim_200_params*) &params, (optim_200_output*) optimSoln, (optim_200_info*) &infoOut);
    break;
  }

  return exitFlag;
};

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T20:09:20.773

我不知道您的代码是否已内联到示例中的每个案例部分。如果您的函数是内联函数，并且您将它们全部放在一个函数中，那么它会慢得多，因为代码是在虚拟内存中布局的，在执行代码时这将需要 CPU 大量跳转。如果不是全部内联，那么这些建议可能会有所帮助。

您的解决方案可能会改进...

A）1）将项目分成200个单独的dll。然后使用 .bat 文件或类似文件进行构建。2）在每个dll中创建名为“MyEntryPoint”的导出功能，然后根据需要使用动态链接加载库。这将相当于一个繁忙的音乐程序，加载了许多小的 dll 插件。使用 GetProcAddress 获取指向 EntryPoint 的函数指针。

或者...

B) 将每个解决方案构建为单独的 .lib 文件。然后，这将根据解决方案非常快速地编译，然后您可以将它们全部链接在一起。构建一个指向所有函数的函数指针数组，然后通过查找来调用它。

结果 = SolveInterceptWhichStep;

将所有库组合成一个大库不应花费八小时。如果需要那么长时间，那么你做的事情非常错误。

和...

尝试将代码放入不同的实际 .cpp 文件中。如果它们都在不同的单元中，也许那个特定的编译器会做得更好……然后，一旦每个单元被编译，如果你不改变任何东西，它就会保持编译状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:17:27.583

确保测量和平均多次调用优化器的时间，因为在第一次调用之前设置可能会有很大的开销。

然后还要检查 200 分支条件语句（您的开关）对您的性能有何影响！尝试消除该开关以进行测试，在测试项目中仅调用一个求解器，但在 DLL 中链接所有求解器。您仍然看到性能缓慢吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T11:59:31.623

我假设您生成代码的原因是为了更好的运行时性能，以及更好的正确性。我做同样的事情。

我建议您尝试[*这种技术*](https://stackoverflow.com/a/378024/23771)来找出运行时性能问题是什么。

如果您看到 100:1 的性能差异，这意味着每次您中断它并查看程序的状态时，您将有 99% 的机会看到问题所在。

就构建时间而言，确保将其模块化是有意义的。这些都不会对运行时间产生太大影响，除非这意味着您正在执行疯狂的 I/O。

# ios - 如果 number 是 int，ios 会去掉小数位

> ID：12313701
> 
> 赞同：0
> 
> 时间：2012-09-07T07:31:28.040
> 
> 标签：ios, rounding, decimal-point

我有一个应用程序可以导入一长串 csv 数据。

我需要处理获取的数字，但为了做到这一点，我需要去掉整数数字的小数位，并保留 x.5 为十进制的未更改数字

例如

```
1.0 make it 1
1.50 make it 1.5 
```

实现这一目标的最佳方法是什么？

多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:58:20.527

一个简单的 NSNumberFormatter 应该可以为您实现：

```
float someFloat = 1.5;
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setAllowsFloats:YES];
[formatter setMaximumFractionDigits:1];
NSString *string = [formatter stringFromNumber:[NSNumber numberWithFloat:someFloat]]; 
```

当然，这假设您只有十分之一的小数要保留，例如，如果您使用“1.52”，这将返回“1.5”，但根据您上一篇关于将数字舍入为“.5”的帖子判断，这不应该成为问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T08:13:17.947

您可以使用`modf`来检查小数部分是否等于零。

```
-(BOOL)isWholeNumber:(double)number
{
    double integral;
    double fractional = modf(number, &integral);

    return fractional == 0.00 ? YES : NO;
} 
```

也适用于一些边界情况。

```
float a = 15.001;
float b = 16.0;
float c = -17.999999;

NSLog(@"a %@", [self isWholeNumber:a] ? @"YES" : @"NO");
NSLog(@"b %@", [self isWholeNumber:b] ? @"YES" : @"NO");
NSLog(@"c %@", [self isWholeNumber:c] ? @"YES" : @"NO"); 
```

输出

```
a NO
b YES
c NO 
```

如果数字非常接近整数，则其他解决方案不起作用。我不确定你是否有这个要求。

之后，您可以使用`NSNumberFormatter`, 一个表示整数，一个表示分数，随意显示它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T08:00:48.403

这段代码实现了你想要的

```
float value1 = 1.0f;
float value2 = 1.5f;
NSString* formattedValue1 = (int)value1 == (float)value1 ? [NSString stringWithFormat:@"%d", (int)value1] : [NSString stringWithFormat:@"%1.1f", value1];
NSString* formattedValue2 = (int)value2 == (float)value2 ? [NSString stringWithFormat:@"%d", (int)value2] : [NSString stringWithFormat:@"%1.1f", value2]; 
```

这种事情可以在一个类别中完成，那么怎么样

```
// untested
@imterface NSString (myFormats)
+(NSString)formattedFloatForValue:(float)floatValue;
@end

@implementation NSString (myFormats)
+(NSString)formattedFloatForValue:(float)floatValue
{
    return (int)floatValue == (float)floatValue ? [NSString stringWithFormat:@"%d", (int)floatValue] : [NSString stringWithFormat:@"%1.1f", floatValue];
}
@end

// usage
NSLog(@"%@", [NSString formattedFloatForValue:1.0f]);
NSLog(@"%@", [NSString formattedFloatForValue:1.5f]); 
```

# .net - 如何部署在没有 exe 源代码的情况下运行现有 exe 的 Windows 窗体应用程序

> ID：12313706
> 
> 赞同：0
> 
> 时间：2012-09-07T07:32:02.657
> 
> 标签：.net, winforms, visual-studio-2010

我有一个运行现有 exe 的 Windows 窗体应用程序，我没有其他 exe 的源代码。

如何使用 Click Once 部署部署此应用程序。

除了单击一次部署之外，还有其他替代方法或其他部署技术吗？

谢谢提前请尽快回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:58:25.350

我会将该 exe 作为嵌入式资源添加到我的 .NET 程序集中，并在第一次运行时将其提取到硬盘上。看看这篇[文章](http://www.codeproject.com/Articles/9159/Working-with-Embedded-Data)

# google-app-engine - 在 servlet 上显示分隔文本时出现无法识别的字符

> ID：12313709
> 
> 赞同：0
> 
> 时间：2012-09-07T07:32:14.590
> 
> 标签：google-app-engine, servlets, csv

我正在开发一个接受 zipfile 并将解压缩并显示 csv 文件内容的 servlet。

到目前为止，我能够显示一些记录。但是，如下图所示，其中一条记录显示“问号”/无法识别的字符。

我检查了 csv 文件，它非常好。我还尝试删除文本并键入其他文本，但仍然不成功。

问题图片：

[https://dl.dropbox.com/u/11910420/Screen%20Shot%202012-09-07%20at%203.18.46%20PM.png](https://dl.dropbox.com/u/11910420/Screen%20Shot%202012-09-07%20at%203.18.46%20PM.png)

公共类 AdminBootStrap 扩展 HttpServlet {

```
public void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {
    resp.setContentType("text/plain");

    PrintWriter out = resp.getWriter();

    try {
        ServletFileUpload upload = new ServletFileUpload();

        FileItemIterator iterator = upload.getItemIterator(req);

        while (iterator.hasNext()) {
            FileItemStream item = iterator.next();
            InputStream in = item.openStream();

            if (item.isFormField()) {
                out.println("Got a form field: "
                        + item.getFieldName());
            } else {
                out.println("Got an uploaded file: "
                        + item.getFieldName() + ", name = "
                        + item.getName());

                ZipInputStream zis = new ZipInputStream(
                        new BufferedInputStream(in));

                ZipEntry entry;

                // Read each entry from the ZipInputStream until no
                // more entry found indicated by a null return value
                // of the getNextEntry() method.
                //

                byte[] buf = new byte[5000];
                int len;
                String s = null;

                while ((entry = zis.getNextEntry()) != null) {

                    out.println("Unzipping: " + entry.getName());

                    if (entry.getName().equalsIgnoreCase("booking.csv")) {

                        while ((len = zis.read(buf)) > 0) {
                            s = new String(buf);

                            String[] arrStr = s.split("\\n");
                            for (String a : arrStr) {

                                out.println(a);

                            }// end for

                        }

                    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:06:27.793

罪魁祸首是`s = new String(buf)`因为它通过默认编码将一串字节解码为一串字符。不幸的是，GAE 上的默认编码是`US-ASCII`.

您应该对 CSV 进行编码。例如`UTF-8`使用：

```
s = new String(buf, "UTF-8"); 
```

# android - android中的标签栏

> ID：12313723
> 
> 赞同：0
> 
> 时间：2012-09-07T07:33:17.583
> 
> 标签：android, tabwidget

我是android开发的新手。Android XML 布局将 TAB 作为 UI 组件。当 TabActivity 类和 ActivityGroup 类都被弃用时，如何使用该选项卡并将选项卡与不同的视图相关联？是否可以将 XML 文件的相同 UI 选项卡组件与 ActionBar 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:57:30.720

鉴于 TabActivity 和 ActivityGroup 已被弃用，您唯一的选择是使用片段作为选项卡的内容。

下载 4.0 API 示例并查看 FragmentTabs 活动。

# iphone - DDXML 解析器中的内存泄漏

> ID：12313724
> 
> 赞同：0
> 
> 时间：2012-09-07T07:33:23.190
> 
> 标签：iphone, objective-c, ios, xml-parsing, nsautoreleasepool

我从 Internet 加载数据，并在另一个线程中使用 DDXML 解析器对其进行解析。这是代码（回调connectionDidFinishLoading：正在后台线程中，我在后台线程中安排了URLConnection）：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"connection did finish load");
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    DDXMLDocument *xdoc = [[DDXMLDocument alloc] initWithData: receivedXmlData options:0 error: NULL];
    NSLog(@"document retainCount1 = %d", [xdoc retainCount]);
    NSArray *nodes = [xdoc selectNodes: @"./items/item"];
    NSLog(@"document retainCount2 = %d", [xdoc retainCount]);
    for (DDXMLElement *tabXmlItem in nodes)
    {
        // here is the parsing
    }
    NSLog(@"document retainCount3 = %d", [xdoc retainCount]);
    [xdoc release];
    [receivedXmlData setLength:0];
    [pool drain];
    [pool release];
} 
```

我在内存分配器中看到：DDXMLDocuments、DDXMLNodes、DDXMLElements 在解析结束后仍然存在。因此，内存中有大量的 CFString 和 CFData。为什么这些对象没有被清除？也许，我错误地使用了自动释放池或 DDXML 解析器感到惊讶？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:28:24.080

`retainCount`没用。不要叫它。 [http://whentouseretaincount.com/](http://whentouseretaincount.com/)

无需两者`drain`兼而有之`release`；只是`drain`它。

更好的是，`@autoreleasepool {...}`在池的范围内使用。

由于您使用的是分配工具，因此请打开“跟踪引用计数”。然后，您可以查看保留/释放对象的历史记录，看看它们为什么仍然存在。

# iphone - 如何为 iphone 应用程序创建 IPA 文件？

> ID：12313726
> 
> 赞同：-1
> 
> 时间：2012-09-07T07:33:25.183
> 
> 标签：iphone

我创建了一个 iphone 应用程序。一切在模拟器中运行良好。我想在设备中测试它。创建配置文件或证书，只需要创建 IPA 文件。请逐步告诉我如何做到这一点，如果有人知道的话。我正在搜索谷歌，但没有找到令人满意的结果。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:46:06.857

从 Xcode 获取 .ipa 文件非常简单：

1.  在 Project and Targets -> Build Settings -> Code Signing -> Code Signing Identity 中选择正确的配置文件
2.  在 Targets 中，通过 Targets -> Info -> Bundle Identifier 更改 Bundle Identifier
3.  清理你的项目
4.  按产品归档您的项目 -> 归档
5.  管理器会自动打开一个单独的窗口，在那里您可以看到您的项目，其中包含存档日期/时间和项目名称
6.  单击管理器窗口中的共享按钮
7.  它会要求您选择正确的 Provisioning Profile 正确执行此操作
8.  它会询问您要存储的位置，选择桌面或其他任何地方
9.  在您选择的位置，项目 .ipa 文件将被存储

请执行上述步骤。我希望你有一些想法。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:38:35.037

[这](https://daw.apple.com/cgi-bin/WebObjects/DSAuthWeb.woa/wa/login?appIdKey=d4f7d769c2abecc664d0dadfed6a67f943442b5e9c87524d4587a95773750cea&path=//ios/manage/distribution/index.action)可能会帮助您逐步完成制作 ipa 的过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:47:52.567

创建 IPA 的方式与创建 .xcarchive 相同：产品 -> 存档。存档操作完成后，转到管理器，选择您的存档，选择共享，然后在“选择共享的内容和选项：”窗格中将内容设置为“iOS App Store Package (.ipa)，将身份设置为 iPhone 分发（其中应与项目的临时/应用商店配置文件相匹配）。

“iOS App Store Package (.ipa)”选项可能被禁用。当您的构建生成多个目标时会发生这种情况：例如，一个应用程序和一个库。所有这些最终都在构建产品文件夹中，Xcode 对如何将它们打包到一个 .ipa 文件中感到很困惑，所以它只是禁用了该选项。

解决此问题的方法如下：检查每个目标的构建设置，应用程序目标除外，并将 Skip Install 标志设置为 YES。然后再次执行 Product -> Archive tango 并转到 Organizer 以选择您的新存档。现在，当单击“共享”按钮时，应该启用 .ipa 选项。

我希望这有帮助。

# mysql - SQL 查询的结果是否取决于数据库的大小？

> ID：12313732
> 
> 赞同：7
> 
> 时间：2012-09-07T07:33:45.183
> 
> 标签：mysql, sql, sql-server, oracle, postgresql

我的应用程序在 Hibernate 中使用 JPA，我看到 hibernate 在我的日志文件中生成了一些有趣的 SQL 查询，其中包含很多连接。该应用程序现在没有很多用户，我担心当数据库规模增长时，hibernate 生成的一些查询会导致问题。

我已经通过 EXPLAIN 命令运行了一些由 hibernate 生成的 sql 查询，以查看生成的查询计划。

1.  EXPLAIN 的输出是否取决于数据库的大小？当我的数据库变大时，查询计划器会为相同的 SQL 查询生成不同的计划吗？

2.  在开发/部署周期的哪个阶段，我应该查看 hibernate 生成的 sql 查询的 SQL 查询计划？什么时候是使用 EXPLAIN 的合适时机。

3.  当数据库如此之小以至于无论看起来多么复杂的每个查询都在 0.5 秒内运行时，explain 的输出如何用于确定查询是否会成为问题？

我使用 Postgres 9.1 作为我的应用程序的数据库，但我对上述问题的一般答案很感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T08:37:57.860

实际上，@ams 你的评论是对的——用少量数据解释通常是没有意义的。

如果一个表只有 10 行，那么它很可能都在一页中，并且读取一行的成本（大致）与读取所有 10 行的成本相同。首先访问索引然后获取页面将比仅读取大量更昂贵并忽略你不想要的。PostgreSQL 的规划器已经为索引读取、表读取、磁盘访问与缓存访问、排序等[配置了成本](http://www.postgresql.org/docs/current/static/runtime-config-query.html#RUNTIME-CONFIG-QUERY-CONSTANTS)。它根据表的（近似）大小和其中[的值分布](http://www.postgresql.org/docs/current/static/planner-stats-details.html)来调整这些成本。它不做的（截至待定的 9.2 版本）是考虑跨列或跨表相关性。它也不提供手动提示，让您覆盖计划者的选择（与 MS-SQL 或 Oracle 不同）。

每个 RDBMS 的规划器都有不同的优势和劣势，但我认为可以公平地说 MySQL 是最弱的（尤其是在旧版本中）。

所以 - 如果您想知道您的系统在 100 个并发用户和数十亿行的情况下将如何执行，您将需要生成测试数据并加载其中相当大的一部分。更糟糕的是，您还希望拥有大致相同的值分布。如果大多数客户有大约 10 张发票，但少数有 1000 张发票，那么这就是您的测试数据需要反映的内容。如果您需要跨多个 RDBMS 保持性能，请在所有 RDBMS 上重复测试。

当然，这与系统的整体性能是分开的，这取决于服务器的大小和功能与其所需的负载。一个系统可以应对负载的稳定增长，然后突然你会看到性能迅速下降，因为超过了缓存大小等等。

高温高压

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T09:28:17.720

> 1 EXPLAIN 的输出是否取决于数据库的大小？当我的数据库变大时，查询计划器会为相同的 SQL 查询生成不同的计划吗？

这完全取决于您的数据和有关数据的统计信息。当有人忘记分析或关闭 auto_vacuum（包括分析）时，由于缺乏统计信息，会出现许多性能问题。

> 2 在开发/部署周期的哪个阶段，我应该查看由休眠生成的 sql 查询的 SQL 查询计划？什么时候是使用 EXPLAIN 的合适时机。

Hibernate 有向数据库发送大量查询的习惯，即使对于简单的连接也是如此。打开你的查询日志，并留意那个。稍后，您可以对日志中的所有查询运行自动解释。

> 3 当数据库如此之小以至于无论看起来多么复杂的每个查询都在 0.5 秒内运行时，如何使用 explain 的输出来确定查询是否会成为问题？

不，因为这完全取决于数据。当 95% 的用户是男性时，搜索男性时不会使用性别索引。当你在寻找一个女人时，这个索引是有意义的并且会被使用。对性别 = 女性的记录的功能索引甚至更好：索引永远不会从索引中受益的东西是没有用的，并且索引会小得多。

您可以做的唯一一件事是预测索引的使用情况，使用`set enable_seqscan = off;`它进行测试将表明可以使用某些索引，但仅此而已。

# import - WCF：带有导入问题的 SvcUtil.exe

> ID：12313735
> 
> 赞同：3
> 
> 时间：2012-09-07T07:34:07.743
> 
> 标签：import, xsd, wsdl, svcutil.exe

我们项目中的要求之一如下：

我们仅从客户端 WSDL 和 XSD 文件中获取。我们的任务是根据这些 WSDL 和 XSD 文件生成 SOAP 消息并提取 SOAP 主体。

我们应该采取的第一步是从给定的 WSDL 和 XSD 文件生成客户端代理文件。主 WSDL 文件有多个导入，导入的 XSD 文件也有一些导入。我尝试使用 SvcUtil.exe 实用程序来完成客户端代理文件的生成，但出现了错误。

我以这种方式运行 SvcUtil.exe：

E:\Projekti\WCF\XSD>svcutil /noconfig rosrazna.ru.xsd.SmevUnifoService.wsdl roskazna.ru.xsd.ResponseTemplate.xsd roskazna.ru.xsd.PGU_ImportRequest.xsd roskazna.ru.xsd.PGU_DataRequest.xsd roskazna。 ru.xsd.PGU_ChargesResponse.xsd roskazna.ru.xsd.ExportPaymentsResponse.xsd roskazna.ru.xsd.ExportIncomesResponse.xsd roskazna.ru.xsd.ExportQuittanceResponse.xsd roskazna.ru.xsd.Ticket.xsd

但是，出现了这个错误：

Microsoft (R) 服务模型元数据工具 [Microsoft (R) Windows (R) Communication Foundation，版本 3.0.4506.2152] 版权所有 (c) Microsoft Corporation。版权所有。

正在生成文件... 警告：未生成任何代码。如果您尝试生成客户端，这可能是因为元数据文档不包含任何有效的合同或服务，或者因为发现所有合同/服务都存在于 /reference 程序集中。验证您是否将所有元数据文档传递给该工具。

警告：如果您想从模式生成数据协定，请确保使用 /dataContractOnly 选项。

我不得不提一下，我没有在 SvcUtil.exe 命令的主 WSDL 文件中导入 XSD 文件的导入。我不知道如何放置它们。

那么，如何解决这个问题呢？

先感谢您。

戈兰

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T19:25:50.963

@Goran，将所有引用的 xsd 文件复制到与 wsdl 相同的位置。然后，在命令提示符下使用 svcutil 时，列出所有的 xsd，或者放一个 *.xsd，如下所示：

```
E:\Projekti\WCF\XSD>svcutil /noconfig goransWsdl.wsdl *.xsd 
```

PS：你似乎已经提到了所有的xsds。

# .net - IIS 可以通过标头值拒绝请求而不是等待整个请求上传吗？

> ID：12313736
> 
> 赞同：2
> 
> 时间：2012-09-07T07:34:07.633
> 
> 标签：.net, iis, http-headers, ashx, http-request

虽然我们可以理解我们可以使用 MaxRequestLength 和 MaxAllowedContentLength（[此处](https://stackoverflow.com/questions/6327452/which-gets-priority-maxrequestlength-or-maxallowedcontentlength)）在两个不同级别上为基本相同的事情配置 IIS，但很明显 IIS 在它决定之前实际上接受（等待它被下载）整个请求（可能是数百 MB）它必须被拒绝或过滤掉。

可以说，可以咨询标头以了解请求大小，或者标头是否不准确（长度设置为小于实际请求大小的值） - 一旦超过限制就退出。

如果重要的话 - 我正在研究一个 HttpHandler。

是否可以将 IIS 配置为像这样运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:32:42.290

您要做的是基于标头内容的请求过滤。

一个**HttpHandler**离 HTTP 栈太远了，不能做这样的事情。在这一步，我确定请求已被下载和映射。

它可以处理**HttpModule** (Init) 和[**HttpApplication**](http://msdn.microsoft.com/fr-fr/library/system.web.httpapplication.aspx)事件，但在 ASP.NET 应用程序中，请求当然也会在处理之前完全下载。

在 IIS 7 和集成模式下，[可以在 IIS 管道中声明 ASP.NET 模块](http://msdn.microsoft.com/en-us/library/bb757040.aspx)。

这是进行请求过滤的好方法。无论如何，我很确定 IIS 在将请求映射到任何模块/处理程序之前已经下载了它。

您可以使用[**Request Filtering**](http://www.iis.net/configreference/system.webserver/security/requestfiltering)在请求处理管道中执行此操作。IIS 7.5 带来了[**Scan headers Fitlering Rules**](http://www.iis.net/configreference/system.webserver/security/requestfiltering/filteringrules/filteringrule/scanheaders)。

我不能肯定你的请求不会被下载，但我认为你不能早点下载。

[IIS架构简介](http://www.iis.net/learn/get-started/introduction-to-iis/introduction-to-iis-architecture#Hypertext)

[IIS 7.0 的 ASP.NET 应用程序生命周期概述](http://msdn.microsoft.com/en-us/library/bb470252.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:49:42.593

好吧，至少我试过了。看来这是 IIS 设计无法做到的事情之一。

# java - 如何设置使用类的优先级

> ID：12313738
> 
> 赞同：2
> 
> 时间：2012-09-07T07:34:16.100
> 
> 标签：java, spring

我正在创建网络服务。我有应用层和网络层。这两个层都使用 jaxb 从 xsd 生成对象工厂。生成类在包中：my.package.v1

现在我有另一个项目依赖于这些项目。在上下文中，我指定了对象工厂：

```
<bean id="objectFactory" class="my.package.v1.ObjectFactory" /> 
```

当我编译和部署应用程序时，一切正常。但是有两个对象工厂，他只能使用其中一个。哪个应用程序使用以及我如何更改它并使用另一个应用程序？

更新：

是否有选项如何在 spring 上下文中设置使用哪个类？当我有两个 ObjectFactory 时，我想更改它以设置正确的类

```
<bean id="objectFactory" class="my.package.v1.ObjectFactory" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:39:20.783

实际使用 my.package.v1.ObjectFactory 的两种实现中的哪一种取决于 ClassLoader。

有关 ClassLoaders 如何解决此类问题的信息，请参阅[此](https://stackoverflow.com/questions/6105124/java-classpath-classloading-multiple-versions-of-the-same-jar-project)问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:46:44.307

可能会有冲突的结果，并且取决于上下文类加载器。我建议将它们放在单独的包中以避免命名空间冲突

# mysql - 仅当两个相关表中都存在时才在具有多对多关系的中间表上选择计数（*）

> ID：12313739
> 
> 赞同：1
> 
> 时间：2012-09-07T07:34:19.843
> 
> 标签：mysql, sql, select, many-to-many

我有 3 个表`users`：`courses`和`courseusers`。Courseusers 是连接 courses.idCourse 和 users.idUser 的中间表。但是，中间表没有外键约束 and `ON DELETE CASCADE`or `ON UPDATE CASCADE`。

```
Users:
idUser|name

Courses:
idCourse|name

Courseusers:
id|idUser|idCourse 
```

我的问题是，我如何获得订阅最多的前 3 门课程（ 中的大多数条目），同时忽略和表`courseuser`中手动删除的用户（它们仍将作为条目存在）。`users``courses``courseuser`

我现在拥有的：

```
SELECT c.idCourse, c.name, count(*) as count 
FROM courseusers as cu 
     JOIN course as c 
         ON cu.idCourse=c.idCourse 
     JOIN users as usr 
         ON (usr.idUser=u.idUser) 
GROUP BY u.idCourse
ORDER BY count DESC 
LIMIT 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T08:28:20.303

尝试使用以下查询

```
SELECT c.idCourse, c.name, count(*) as count  
FROM courseusers as cu  
   LEFT JOIN course as c  
       ON cu.idCourse=c.idCourse  
   LEFT JOIN users as usr  
       ON (usr.idUser=u.idUser)  
GROUP BY u.idCourse 
ORDER BY count DESC  
LIMIT 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T07:37:21.427

[http://sqlfiddle.com/#!2/0567a/1](http://sqlfiddle.com/#!2/0567a/1)

```
SELECT
  c.name,
  COUNT(1) AS total
FROM Courceusers cu
JOIN Cources c USING(idCource)
JOIN Users u USING(idUser)
GROUP BY 1
ORDER BY 2 DESC
LIMIT 3; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T08:25:23.123

```
select 
    CourseUsers.idCourse, 
    Courses.name, 
    COUNT(distinct CourseUsers.idUser) as Subscribers
from CourseUsers
    inner join Courses on CourseUsers.idCourse = Courses.idCourse
    inner join Users on CourseUsers.idUser = Users.idUser
group by CourseUsers.idCourse, Courses.name
order by Subscribers desc
limit 3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T07:42:19.570

基于`Users`不在中间表上的表连接所有表

```
SELECT  a.idUser, a.Name, COUNT(c.idCourse) totalCount
FROM    Users a
            INNER JOIN  CourseUsers b
                ON a.idUser = b.idUser
            INNER JOIN Courses c
                ON b.idCourse = c.idCourse
GROUP BY a.idUser, a.Name
ORDER BY totalCount DESC
LIMIT 3 
```

# xml - RSS Ajax jquery 和 IE 9 问题

> ID：12313740
> 
> 赞同：1
> 
> 时间：2012-09-07T07:34:24.937
> 
> 标签：xml, jquery, rss, internet-explorer-9

有谁知道为什么这段代码在除了 IE9 之外都可以正常工作？

```
function showReel(rssLink){
clearGrid();
$(this).load(rssLink, function(event){
    var xml = event,
        objsArray = [],
        xmlDoc = $.parseXML( xml ),
        $reelxml = $( xmlDoc ),
        $items = $reelxml.find( "item" );

    $items.each(function(){
        var itemObj = {};
        var eachItem = $(this);

        itemObj.company = eachItem.find( "title" ).text();
        itemObj.movLink = eachItem.find( "link" ).text();
        itemObj.thumb = eachItem.find( 'media\\:thumbnail:eq(1), thumbnail:eq(1)' ).attr('url');

        var credits = eachItem.find( 'media\\:credit, credit' );
        credits.each(function(){
            if($(this).attr('role') == "title") itemObj.tit = $(this).text();
            if($(this).attr('role') == "director") itemObj.director = $(this).text();
            if($(this).attr('role') == "editor") itemObj.editor = $(this).text();
        });

        objsArray.push(itemObj);

        var movStuff = $('<div class="picButt"><span class="pic"><img src="'+itemObj.thumb+'"></span></div>');
        movStuff.click(function(event) {
            $('#qt').empty();
            $('#qt').css('display', 'block');
            $('#qt').append('<iframe src="'+itemObj.movLink+'"></iframe>')
            logit("clicked "+itemObj.movLink)
        });
        movStuff.data(objsArray)
        $('#grid').append(movStuff);
    });
}); 
```

}

在本地我收到错误

> 'XML5632: 只允许一个根元素。'

在现场它根本不会播放，我得到了错误

> 'SCRIPT438: 对象不支持此属性或方法

jquery.min.js，第 2 行字符 21784'

使用未缩小的 jQuery 它在第 1725 行字符 5 上出错，它指的是这个 if 语句

```
if ( !id ) {
        // Only DOM nodes need a new unique ID for each element since their data
        // ends up in the global cache
        if ( isNode ) {
            elem[ internalKey ] = id = ++jQuery.uuid;
        } else {
            id = internalKey;
        }
    } 
```

特别是这一行：

> elem[ internalKey ] = id = ++jQuery.uuid;

任何帮助或指针将不胜感激。

# performance - 如何在 MongoDB 中关闭（临时）索引

> ID：12313742
> 
> 赞同：5
> 
> 时间：2012-09-07T07:34:29.783
> 
> 标签：performance, mongodb, indexing

是否可以暂停 MongoDB 中的索引维护以提高插入速度并在之后打开（或重建）索引？根据文档，在 ensureIndex() 之后，该索引在所有后续插入和更新期间都得到维护。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T07:38:14.490

索引与插入/更新同步更新。所以没有办法“暂停”这个。如果您预期大批量插入，您可以删除索引，执行插入，然后重建索引。当然，这有一些含义：

1.  在插入数据时，您的查询将遭受缺少索引的困扰。
2.  就烧毁的 CPU 和无效的缓存而言，索引重建可能过于昂贵（如果您有大量数据）

# exception - 无法在控制台或 Web API 项目中加载 dll

> ID：12313746
> 
> 赞同：0
> 
> 时间：2012-09-07T07:34:36.150
> 
> 标签：exception, dll, load

我遇到了一个相当奇怪的问题。

我正在尝试与 Wacom 签名板交互，并希望为该板的 API 构建一个 Web 服务包装器，以便我可以在网站上捕获签名。

签名板需要两个 dll 才能工作：STUTablet.dll 和 STUTabletCore.dll。

我有一个引用 STUTablet.dll 的类库。这两个 dll 文件都在类库的 bin 目录中。

如果我从 Windows 窗体应用程序引用我的类库，我可以调用调用 STUTablet.dll 的方法。但是，如果我从控制台应用程序或 MVC 应用程序引用我的类库，则会引发异常。

异常如下： Unable to load DLL 'STUTabletCore.dll': 找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）。

我尝试将默认 Windows 窗体应用程序具有的相同引用添加到我的控制台应用程序，但无济于事。

有人知道为什么 STUTablet.dll 无法加载 STUTabletCore.dll 吗？必须有某种我没有满足的依赖。

谢谢，

弗朗西斯 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T00:29:25.313

我遇到了类似的问题，但最终得到了 Wacom UK 支持团队的帮助，并设法让一个基于 Web 的应用程序仅使用 ActiveX 在 IE 上工作。

试试 [http://gsdt.wacom.eu/download/Signature-SDK.xml](http://gsdt.wacom.eu/download/Signature-SDK.xml)

选择 32 位或 64 位 Signature SDK 安装程序，大量 SDK 示例

# wpf - 有没有机会将矩形组合成一个矩形？

> ID：12313748
> 
> 赞同：1
> 
> 时间：2012-09-07T07:34:44.500
> 
> 标签：wpf, rectangles

我有一些高度相同的矩形。但我用不同的颜色填充它们。我可以将它们组合起来作为我得到的结果`Rectangle`吗？我可以做到，`RectangleGeometry`但我需要`Rectangle`输入

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:36:13.617

你想如何组合颜色？

您是否只想指定 2 个重叠但使用具有一定透明度的不同颜色的矩形区域，以便颜色混合在一起？

或者您是否希望 Rectangle 细分并在不同区域使用不同的颜色？

是否有理由需要将其保留为矩形？

这是一种将其保留为矩形但指定您的 2 种颜色以组合/混合作为填充的方法：

![在此处输入图像描述](../Images/8e9d807a087100e20b06ecd7a66b19bf.png)

```
<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <Grid>  
  <Rectangle Width="100" Height="100">
  <Rectangle.Fill>
  <DrawingBrush Viewport="0,0,1,1" TileMode="Tile">
      <DrawingBrush.Drawing>
          <DrawingGroup>
              <GeometryDrawing>
                  <GeometryDrawing.Geometry>
                      <RectangleGeometry Rect="0,0,1,1" />
                  </GeometryDrawing.Geometry>
                  <GeometryDrawing.Brush>
                      <SolidColorBrush Color="Red" Opacity="1"/>
                  </GeometryDrawing.Brush>
              </GeometryDrawing>
              <GeometryDrawing>
                  <GeometryDrawing.Geometry>
                      <RectangleGeometry Rect="0,0,1,1" />
                  </GeometryDrawing.Geometry>
                  <GeometryDrawing.Brush>
                      <SolidColorBrush Color="White" Opacity=".5"/>
                  </GeometryDrawing.Brush>
              </GeometryDrawing>
          </DrawingGroup>
      </DrawingBrush.Drawing>
  </DrawingBrush>
  </Rectangle.Fill>
  </Rectangle>
  </Grid>
</Page> 
```

或者这个用于细分矩形：

![在此处输入图像描述](../Images/1e909fb7cda94688bc3befc09a3bc3c9.png)

```
<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <Grid>  
  <Rectangle Width="100" Height="100">
  <Rectangle.Fill>
  <DrawingBrush Viewport="0,0,1,1" TileMode="None">
      <DrawingBrush.Drawing>
          <DrawingGroup>
              <GeometryDrawing>
                  <GeometryDrawing.Geometry>
                      <RectangleGeometry Rect="0,0,1,1" />
                  </GeometryDrawing.Geometry>
                  <GeometryDrawing.Brush>
                      <SolidColorBrush Color="Yellow"/>
                  </GeometryDrawing.Brush>
              </GeometryDrawing>
              <GeometryDrawing>
                  <GeometryDrawing.Geometry>
                      <RectangleGeometry Rect="0,0,0.5,0.5" />
                  </GeometryDrawing.Geometry>
                  <GeometryDrawing.Brush>
                      <SolidColorBrush Color="Red"/>
                  </GeometryDrawing.Brush>
              </GeometryDrawing>
              <GeometryDrawing>
                  <GeometryDrawing.Geometry>
                      <RectangleGeometry Rect="0.5,0.5,0.5,0.5" />
                  </GeometryDrawing.Geometry>
                  <GeometryDrawing.Brush>
                      <SolidColorBrush Color="Green"/>
                  </GeometryDrawing.Brush>
              </GeometryDrawing>
              <GeometryDrawing>
                  <GeometryDrawing.Geometry>
                      <RectangleGeometry Rect="0.25,0.25,0.25,0.25" />
                  </GeometryDrawing.Geometry>
                  <GeometryDrawing.Brush>
                      <SolidColorBrush Color="Blue"/>
                  </GeometryDrawing.Brush>
              </GeometryDrawing>
          </DrawingGroup>
      </DrawingBrush.Drawing>
  </DrawingBrush>
  </Rectangle.Fill>
  </Rectangle>
  </Grid>
</Page> 
```

（如果您打算在多个地方使用 DrawingBrush 描述的画笔，请将其移动到资源中......和/或为矩形创建新样式）。

矩形是密封的，所以它可以被覆盖，它不是一个控件，所以你不能改变一个模板。

您可能需要考虑制作自己的“形状”，以便更好地封装“您的”矩形的增强行为。

这是一个让您入门的示例。

*   [http://www.codeproject.com/Articles/21449/WPF-PartiallyRoundedRectangle-Choose-Which-Corners](http://www.codeproject.com/Articles/21449/WPF-PartiallyRoundedRectangle-Choose-Which-Corners)

# android - 将项目从 android 2.3 导入到 2.2 时出错？

> ID：12313750
> 
> 赞同：1
> 
> 时间：2012-09-07T07:34:55.977
> 
> 标签：android

我有一个用 android 2.3 编写的 android 项目，但是当我在 android 2.2 中导入时，我收到一个错误。有人可能告诉我，如何克服这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T07:37:00.273

转到项目属性然后选择Android并选择2.2。可以解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:43:12.930

不同的 API 版本在其库中有所更改，因此为 2.2 创建的内容可以与较新的 API 版本兼容，但在 2.3 中制作的内容可能无法向后兼容以前的版本。因此，如果您想将代码移植到以前的 API 版本，您可能需要检查哪些代码需要修改。

# c - 在这种情况下如何分配内存？

> ID：12313754
> 
> 赞同：2
> 
> 时间：2012-09-07T07:35:18.783
> 
> 标签：c, malloc, realloc

我在 main 中有指针，但我不知道它的大小。一个函数将此指针返回给 main。在函数内部，我可以计算指针的大小，因此需要在其中存储值并将它们返回给 main。在这种情况下如何修改/分配内存。

```
int main()
{
    int *row_value, *col_value;
    col_row_value(row_value,col_value);
    ...
    return(0);
}

void col_row_value(row_value,col_value)
{
    // how to allocate/modify memory for row_value and col_value and store data
    // for example would like to allocate memory here
    int i;
    for(i=0;i<10;i++) {
        row_value[i]=i;
        col_value[i]=i;
    }
} 
```

我试过这样的东西，它不起作用

```
int main()
{
    int *row_value, *col_value;
    row_value=NULL;
    col_value=NULL;
    col_row_value(&row_value,&col_value);
    ...
    return(0);
}

void col_row_value(int **row_value,int **col_value)
{
    // how to allocate/modify memory for row_value and col_value and store data
    // for example would like to allocate memory here
    int i;
    *row_value=(int*)realloc(*row_value,10*sizeof(int));
    *col_value=(int*)realloc(*col_value,10*sizeof(int));
    for(i=0;i<10;i++) {
        row_value[i]=i;
        col_value[i]=i;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:36:41.723

第二个版本基本上是正确的。

你需要说：

```
realloc(*row_value, 10 * sizeof(int));
//     ^^^ 
```

当心明星！

如果有帮助，请将您的函数参数重命名为：

```
col_row_value(int ** ptr_to_row_ptr, int ** ptr_to_col_ptr); 
```

这样，你就不会那么迷惑自己了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:36:53.307

这个：

```
*row_value=(int*)realloc(row_value*,10*sizeof(int)); 
```

应该：

```
*row_value = realloc(*row_value,10*sizeof(int));
                 /** ^ **/ 
```

请注意演员表是不必要的。将结果分配`realloc()`给临时指针，以防重新分配失败，这意味着原始内存将无法访问。

```
int* tmp = realloc(*row_value, 10 * sizeof(*tmp));
if (tmp)
{
    *row_value = tmp;
} 
```

请注意，循环不会为or`for`中的第一个元素赋值：`row_value``col_value`

```
for(i=1;i<10;i++) 
```

因为它从 index 开始，`1`并且其中的分配`for`应该是：

```
(*row_value)[i] = i;
(*col_value)[i] = i; 
```

# javascript - 当滚动条距离窗口底部 200px 时加载 AJAX 页面，窗口大小可能会有所不同

> ID：12313757
> 
> 赞同：1
> 
> 时间：2012-09-07T07:35:29.600
> 
> 标签：javascript, ajax, jquery-ui, jquery

到目前为止，我已经尝试过这种情况。

```
'if ($(window).scrollTop() == $(document).height() - $(window).height())' 
```

所以任何人都可以帮助我得到解决方案.???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:40:18.430

```
$(window).on('scroll', function() {
    if (($(this).scrollTop() + $(this).height()) - $(document).outerHeight(true) > (-200)) {...}
}); 
```

[**小提琴**](http://jsfiddle.net/USfP6/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:40:19.287

尝试这个：

```
$(function () {
    $(window).on('scroll', function () {
        if ($(window).scrollTop() + $(window).height() >= $(document).height() - 200) {
            //initate ajax here
        }
    });
}); 
```

# java - 为什么用某些编译器编译的程序可以反编译而其他的（实际上）不能？

> ID：12313758
> 
> 赞同：4
> 
> 时间：2012-09-07T07:35:29.850
> 
> 标签：java, c++, c, bytecode, decompiling

我曾经认为Java可以被反编译，因为它编译成字节码而不是目标码。这是错误的，因为隐含的假设字节码比目标码“更易读”。为什么用 Java 编写的程序可以如此容易地被反编译，甚至具有相同的标识符（变量名）？听说C/C++只能反汇编成汇编，不能反编译成源代码，为什么呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T07:37:45.030

Java 编译器保留了大部分原始信息，并且在生成字节码时很少进行优化。编译器的任务是验证代码以便动态优化。注意：Excelisor 编译为本机代码，想象一下很难反编译（至少他们的营销人员说的是 ;）

C/C++尽可能的编译优化，丢弃了很多原有的信息。（调试信息除外）这使得解开合理的 C 或 C++ 变得更加困难。

注意：这些是这些语言常用的编译器的功能。不是语言本身的特征。

就语言的差异而言，你只能说Java与C++相比功能相对较差。更少的功能使得更少的编译模式难以理解和逆向工程。

# ruby-on-rails - rails 命名空间未初始化常量

> ID：12313766
> 
> 赞同：8
> 
> 时间：2012-09-07T07:36:02.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在我的应用程序中制作管理面板，我为管理员制作了脚手架用户控制器（用户模型已经存在），如下所示：

```
rails g scaffold_controller Admin::User username:string password_digest:string role:string 
```

并在路线中

```
namespace :admin do
resources :users
resources :dashboard
end 
```

和 controllers/admin/users_controllers.erb 看起来像

```
class Admin::UsersController < ApplicationController
  # GET /admin/users
  # GET /admin/users.json
  def index
    @admin_users = Admin::User.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @admin_users }
    end
  end 
```

因此，当我转到 url /admin/users 时，出现以下错误：

```
NameError in Admin::UsersController#index

uninitialized constant Admin::User 
```

我该如何解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T07:43:44.080

如果您预先存在的`User`模型没有命名空间，请尝试替换

```
@admin_users = Admin::User.all 
```

和

```
@admin_users = ::User.all 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T07:55:49.920

我认为生成器没有创建目录模型/管理员，所以你应该调用 User.all 而不是 Admin::User.all。

检查 user.rb 是否在模型或模型/管理员中...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-29T13:41:10.847

在我的特殊情况下，我正确命名了文件和类，但包含的**文件夹**命名**不正确**。

我有：

```
/models/maps/type.rb 
```

我不得不将其更改为：

```
/models/map/type.rb 
```

Notice the singular folder name. Changing it to singular allowed Rails to automatically load the right class and no longer have this error at runtime.

# android - Android 应用程序堆栈未清除

> ID：12313769
> 
> 赞同：0
> 
> 时间：2012-09-07T07:36:07.743
> 
> 标签：android, android-intent

在我的 android 应用程序中，我编写了以下代码来清除活动堆栈，但此代码不起作用，因此我请求您提供有关此的工作片段。

```
Intent intent = new Intent(UserProfile.this, Login.class)
        .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
finish();
startActivity(intent); 
```

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:44:58.957

您可以使用 ActivityName.this.finish()。

```
 Intent intent = new Intent(UserProfile.this, Login.class)
        .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent);
  YourActivityName.this.finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:46:49.417

如果当前 Activity 是 A 并且你想启动 B Activity，并且 C 和 D 在后台暂停，FLAG_ACTIVITY_CLEAR_TOP 将完成 C 和 D 而不是 A。

有一个变通方法可以让你完成一个活动。创建一个“静态”处理程序，它可以在 A 活动中接收消息时执行完成（），然后在 B 活动开始时使用来自 A 的静态处理程序发送消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:42:33.250

在 API 级别 11 中添加了一个新的意图标志：`Intent.FLAG_ACTIVITY_CLEAR_TASK`试试这个标志。例子 ：

```
Intent intent = new Intent(UserProfile.this, Login.class)
        .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);
finish();
startActivity(intent); 
```

# ember.js - EmberJS 多个状态管理器/路由器

> ID：12313770
> 
> 赞同：2
> 
> 时间：2012-09-07T07:36:11.840
> 
> 标签：ember.js

为了拆分需要维护单独功能的多个出口而拥有多个状态管理器是一种好习惯吗？

例子：

*   iPad 风格的弹出窗口 (http://metalabdesign.com/images/screenshots/flow-inside.png) - 这是一个单独的控制器，然后查看当前状态。拥有一个“popover statemanager”对我来说很有意义 - 这样当打开 popover 时路由器仍然保持当前状态 - 页面上的所有其他按钮和操作仍然有效......
*   模态窗口、动态侧边栏等...

我的想法是让路由器控制主要交互，它只是向状态管理器发出命令，将当前“屏幕”的某些“部分”分解为孤立的部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:14:52.737

你应该只有一个路由器。然后将您的整个应用程序构建为一系列通过路由器相互交互的状态。这样，您的整个应用程序就更易于管理和测试。

您可能希望查看[此演示文稿](https://speakerdeck.com/trek/applications-a-series-of-states)以进一步了解该主题。

# c# - Monorail RC 2.1 路由认为丢失的静态文件（如 .jpg）是控制器/动作

> ID：12313773
> 
> 赞同：0
> 
> 时间：2012-09-07T07:36:39.680
> 
> 标签：c#, .net, routing, castle-monorail

不久前我开始学习（和使用）Monorail，最近，我涉足了路由。不幸的是，它周围的文档有点稀少，但我设法从各种博客文章中获取了一些信息，其中大多数是 2 岁以上。我设法很快设置了路由，但我意识到 Monorail 的路由引擎将 .jpeg 文件混淆为控制器/操作请求，当它们找不到时。

webconfig 文件非常标准：

```
 <monorail useWindsorIntegration="false" defaultUrlExtension=".rails">
    <url useExtensions="true"/>
    <controllers>
      <assembly>NetTwitter.Web</assembly>
    </controllers>
    <viewcomponents>
      <assembly>NetTwitter.Web</assembly>
    </viewcomponents>
    <viewEngine viewPathRoot="Views" customEngine="Castle.MonoRail.Framework.Views.NVelocity.NVelocityViewEngine, Castle.MonoRail.Framework.Views.NVelocity"/>
  </monorail>
 <system.web>
    <httpHandlers>
     <!-- block direct user access to template files -->
      <add verb="*" path="*.vm" type="System.Web.HttpForbiddenHandler"/>
      <add verb="*" path="*.boo" type="System.Web.HttpForbiddenHandler"/>
      <add verb="*" path="*.st" type="System.Web.HttpForbiddenHandler"/>
      <add verb="GET" path="*.css" type="System.Web.StaticFileHandler" />
      <add verb="GET" path="*.js" type="System.Web.StaticFileHandler" />
      <add verb="GET" path="*.jpg" type="System.Web.StaticFileHandler" />
      <add verb="GET" path="*.gif" type="System.Web.StaticFileHandler" />
      <add verb="GET" path="*.png" type="System.Web.StaticFileHandler" />
      <add verb="GET" path="*.jpeg" type="System.Web.StaticFileHandler" />
      <add verb="*" path="*.rails" type="Castle.MonoRail.Framework.MonoRailHttpHandlerFactory, Castle.MonoRail.Framework"/>
    </httpHandlers>
    <httpModules>
      <add name="routing" type="Castle.MonoRail.Framework.Routing.RoutingModuleEx, Castle.MonoRail.Framework" />
    </httpModules> 
```

就像 Global.asax 中路由引擎的初始化一样：

```
 public void Application_OnStart()
        {
            log4net.Config.XmlConfigurator.Configure();
            RoutingModuleEx.Engine.Add(
                new PatternRoute("<controller>/[action]"));
        } 
```

错误本身很清楚地说明了这一点：

> {“找不到控制器。区域：''控制器名称：'内容'”}

那么，我能做些什么呢？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:29:05.000

这是因为您正在使用 RoutingModuleEx。这将在实际的 httpHandlers 匹配之前重写 URL。

你的路线可能是一般的。

我们通过拥有一个拥有自己的 web.config 的 /static/ 文件夹来解决它，因此会覆盖原始的 web.config。

这仅包含：

```
<system.webServer>
    <handlers>
        <clear/>
        <add name="StaticFile" path="*" verb="*" modules="StaticFileModule" resourceType="Either" requireAccess="Read" />
    </handlers>
</system.webServer> 
```

您可能还想从此处删除 rounting 模块，因为它可能是继承的。然而，我们没有注意到它有任何问题，但也没有真正投入其中。可能是我们在下一层时不匹配任何路由，或者子文件夹没有继承 httpModules。

# iis - 多个 URL 重写规则发生冲突

> ID：12313774
> 
> 赞同：0
> 
> 时间：2012-09-07T07:36:40.460
> 
> 标签：iis, iis-7, url-rewriting, url-redirection

我遇到以下情况，其中 url 重写规则相互冲突：

1.  规则 1：我需要将我的域重定向到 https
2.  规则 2：我需要重定向 www.mydomain.com --> [https://mydomain.com](https://mydomain.com)
3.  规则 3：我需要 www.mydomain.com 和 mydomain.com 都重定向到 [https://mydomain.com/myfolder](https://mydomain.com/myfolder)，但如果我有 mydomain.com/mysecondfolder 应该只重定向到[https://mydomain.com/mysecondfolder](https://mydomain.com/mysecondfolder)

我能够实现的只是将 www.mydomain.com 重定向到[https://mydomain.com](https://mydomain.com)（只是因为它与另一个规则冲突，如果它单独工作的话）。

我的规则是：

```
<rule name="HTTP to HTTPS redirect" stopProcessing="true">
              <match url="(.*)" />
                <conditions>
                    <add input="{HTTPS}" pattern="off" />
                </conditions>
              <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" redirectType="Permanent" />
            </rule> 

            <rule name="redirect to myfolder" enabled="true">
                <match url="^$" />
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                </conditions>
                <action type="Rewrite" url="/myfolder" />
            </rule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:52:23.353

我能够使用以下规则解决此问题：

```
<rewrite>
            <rules>
            <rule name="Canonical Host Name" enabled="true" stopProcessing="true">
              <match url="(.*)" />
              <conditions>
                <add input="{HTTP_HOST}" negate="true" pattern="^myapp\.com$" />
              </conditions>
              <action type="Redirect" url="http://myapp.com/{R:1}" redirectType="Permanent" />
            </rule>
                <rule name="HTTP to HTTPS redirect" enabled="true" stopProcessing="true">
                  <match url="(.*)" />
                    <conditions>
                        <add input="{HTTPS}" pattern="off" />
                    </conditions>
                  <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" redirectType="Permanent" />
                </rule> 
                <rule name="redirect to items" enabled="false">
                    <match url="^$" />
                    <conditions>
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="/items" />
                </rule>

            </rules>
        </rewrite> 
```

# linq - 在 Linq 中打印月份名称

> ID：12313778
> 
> 赞同：-4
> 
> 时间：2012-09-07T07:36:50.280
> 
> 标签：linq, linq-to-sql

Linq 中是否有任何内置函数可以在使用 LINQPAD 时打印月份名称？

我想在以下场景中打印月份名称

```
var query = from e in Employees
           let month=e.BirthDate.GetValueOrDefault()
           let birthmonth=month.ToString("MMMM")
           select birthmonth;
           query.Dump(); 
```

当我运行它时，它会抛出 NotSupportedException。如何在 Linq to Sql 中打印月份名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:26:20.003

分两步进行，一个是从数据库中获取月份，另一个是使用 Linq-To-Objects 执行格式化。

```
var birthDates = Employees.Select(e => e.BirthDate).ToList();
var query = birthDates.Select(d => d != null ? d.ToString("MMMM") : "Null");
query.Dump(); 
```

无论您使用什么 ORM，都无法将查询的字符串格式化部分转换为适用于您的数据库的 SQL。因此，分两步进行并`ToList`在中间进行评估可以解决该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:21:54.897

与其使用，不如`ToString`尝试`string.Format`。就像是：

```
var query = (from e in Employees
           let month = e.BirthDate.GetValueOrDefault()
           let birthmonth = string.Format("{0:MMMM}", month)
           select birthmonth);
query.Dump(); 
```

这似乎在我的本地测试中有效，尽管它不包含在 SQL 查询中。

# git - 意外从 Git 存储库中删除

> ID：12313780
> 
> 赞同：3
> 
> 时间：2012-09-07T07:36:59.313
> 
> 标签：git

从 Git 存储库中删除文件时，我不小心也删除了一个未提交更改的文件。

恢复删除会导致文件返回而没有未提交的更改。有没有办法恢复文件的未提交状态？

从 jmort253 那里得到建议是步骤......

1.  对文件进行了更改（之前已提交并推送，因此它在 git 中）

2.  使用 SourceTree，意外删除了一些文件，包括前面提到的文件。

3.  推到原点

4.  意识到错误扭转了提交（使用SourceTree）。

5.  文件现在回来了，但它缺少在步骤 1 中所做的更改。

    希望有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:46:55.730

简而言之：没有。未提交的文件（几乎按照定义）是版本控制系统不知道的文件，因此版本控制系统将不再能够帮助您，就好像您删除了磁盘上的随机文件（例如，从未在您的存储库的文件层次结构中）。

也就是说，除非您在存储库的先前状态中有一个[存储](http://git-scm.com/book/en/Git-Tools-Stashing)，其中包括未提交的更改？（`git stash list`应该给你一个想法）

如果你不这样做，你应该转向适合你的操作系统和文件系统的文件恢复方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:01:08.830

您应该尝试以下查看 reflog：

```
git rev-list --all --oneline mylostfile.txt 
```

替换`mylostfile.txt`为您的实际文件路径。

如果文件存在于 git 上，无论是在分支指向的提交中还是丢失的提交中，它都会显示出来。

这将显示存在对该文件的更改的所有提交哈希，因此您可能需要单独查看它们以查看其中一个是否具有您想要的文件。

如果它没有出现，那么 git 可能不知道该文件。

# wordpress - 管理页面和帖子布局混乱

> ID：12313787
> 
> 赞同：0
> 
> 时间：2012-09-07T07:37:36.713
> 
> 标签：wordpress, layout, admin

我的 WordPress 安装出现错误。错误是 wp 管理页面和帖子中的列被弄乱了。

在此处查看图片：

[![截屏](../Images/1cab1dd8574792df11f167a4248515d6.png)](https://i.stack.imgur.com/6Utlr.png)

我已经更新到最新版本的 wordpress，尝试禁用所有插件并尝试更改列号。没有什么能解决它。

有没有人看到同样的问题和/或知道解决它的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:51:33.707

您是否尝试过切换主题？奇怪的问题..
您还尝试下载 wordpress 并用`wp-admin/css`新下载的替换所有 css 文件。
如果这不起作用，请更换`wp-admin/js`.

如果这不起作用，请更换整个`wp-admin`文件夹。

最后，您可以尝试从仪表板 -> 更新屏幕“重新安装 WordPress”。

确保您使用相同版本的 WP。
并且一如既往地在开始之前进行备份。

# javascript - 如何删除会话 cookie

> ID：12313790
> 
> 赞同：4
> 
> 时间：2012-09-07T07:37:42.267
> 
> 标签：javascript, cookies, session-cookies

我们正在尝试使用以下代码在按下“注销”按钮时清除浏览器中的 cookie 详细信息，但该脚本不会从浏览器中删除会话 cookie。但是通过使用开发者工具（工具 > 开发者工具 > 缓存 > 清除会话 Cookies）清除 IE8 浏览器中的会话 cookie，cookie 会被清除。

```
<html:link page="/home.do" onclick="logout();">
    <html:img  page="/images/logout.jpg"/>
</html:link>

function logout(){
var cookies = document.cookie.split(";");     
for (var i = 0; i < cookies.length; i++)     {   
  var cookiename =  cookies[i].split("=");       
  var d = new Date();         
  d.setDate(d.getDate() - 4);   
  var expires = ";expires="+d;       
  var value="";       
  document.cookie = cookiename + "=" + value + expires + ";";     
  }
} 
```

如何使用脚本从浏览器中清除会话 cookie？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-25T23:06:25.253

如果是httpOnly，那么你不能删除它，尝试从服务器端修改它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-18T01:01:06.580

来自javascript：不指定过期字段，也将值设置为null，如果它也是hostonly，则不指定域

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-28T20:44:53.050

如果它是您要清除的“会话”变量...

```
unset( $_SESSION['YOUR_SESSION_VARIABLE_NAME'] ); 
```

这将完全删除此会话变量。标题具有误导性。他显示的代码不是“会话”cookie，它们是常规的“cookie”。

# c# - Silverlight 5 中的异步/等待性能

> ID：12313793
> 
> 赞同：0
> 
> 时间：2012-09-07T07:37:52.987
> 
> 标签：c#, performance, silverlight-5.0, async-await

我最近对 ​​Silverlight 5 中的 async/await(asyncctp) 功能进行了一些测试。

两个测试都使用了以下硬件：

*   英特尔 snb 2.3g
*   8g DDR
*   视窗 7 - 64 位
*   银光 5
*   SQL Server 2008 - R2

测试逻辑如下：

1.  **没有异步/等待：**

    ```
    public void LoadMasterItem(string strUNIT_ID)
    {
        **DateTime dt = DateTime.Now;**
        ctx.OBS_UNITs.Clear();
        this.IsMasterItemBusy = true;
        ctx.Load(ctx.GetOBS_UNITQuery().Where(p => p.UNIT_ID == strUNIT_ID)).Completed += (sender, e) =>
        {
            this.MasterItem = ctx.OBS_UNITs.FirstOrDefault();
            this.IsMasterItemBusy = false;
             LoadDataArgs args = ExceptionManager.CheckDataContextResult(sender, args);
             **var ts = DateTime.Now.Subtract(dt).Ticks;**
            **string str = ts.ToString();**
        };
    } 
    ```

2.  **使用异步/等待：**

    ```
    public **async** Task<LoadDataArgs> LoadMasterItem(string UNIT_ID)
    {
        **DateTime dt = DateTime.Now;**
        ctx.OBS_UNITs.Clear();
        var oper = await ctx.Load(ctx.GetOBS_UNITQuery().Where(p => p.UNIT_ID == UNIT_ID)).AsTask();
        LoadDataArgs args = ExceptionManager.CheckDataContextResult(oper);
        if (args.LoadState)
        {
            this.MasterItem = oper.Entities.FirstOrDefault();
        }

        **var ts = DateTime.Now.Subtract(dt).Ticks;**
        **string str = ts.ToString();**
        return args;
    } 
    ```

实验 1 的刻度：5304010
实验 2 的刻度：30001

我很好奇为什么以及如何使用 async/await 将我的 Silverlight 应用程序改进到如此显着的程度。如果我的测试“不公平”，请也给我一些关于如何改进它们的评论。

* * *

我已将“str”值绑定到不使用调试模式的 UI。这些托管在 IIS 中并在 IE9 中执行。

结果如下：

1的刻度
：5504010 2 的刻度：5680325

感谢您的回复，看来我对实际性能有误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:18:32.333

当您检查第二个样本中的时间时，我认为加载操作实际上并未完成。该方法返回了异步执行的任务，并不一定意味着在您从异步方法返回时已经执行了加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-06T20:37:29.057

await 运算符只是为了在处理链接调用时帮助您的代码更具可读性和更简单。

# c# - API/WMI 查询系统上安装的修补程序和更新的完整列表？

> ID：12313795
> 
> 赞同：4
> 
> 时间：2012-09-07T07:38:01.393
> 
> 标签：c#, windows, wmi, windows-update, hotfix

之前已经[讨论过](https://stackoverflow.com/questions/3627551/wmi-query-for-list-of-hotfixes-installed-in-a-system)如何查询安装在Windows系统上的修复程序列表，建议使用WMI和类`Win32_QuickFixEngineering`来提供信息。但是[MSDN](http://msdn.microsoft.com/en-us/library/aa394391%28v=vs.85%29.aspx)指出，从 Vista 开始，这个特定的类只返回修补程序，而不是通过其他方式安装的更新。

[一个较早的问题](https://stackoverflow.com/questions/815340/how-do-i-get-a-list-of-installed-updates-and-hotfixes)讨论了使用此类来获取已安装的更新，表明由于我上面描述的限制，作者也不满意使用它。不幸的是，正如对已接受答案的评论所指出的那样，使用 Windows 更新代理 API 的替代解决方案仍会指示已安装修补程序，即使它随后被删除（它正在查询安装历史记录，而不是当前安装的更新） .

有谁知道如何在 C#（通过 WMI 或其他 API）中获取系统上安装的更新和修补程序的完整列表，这不排除可能安装更新的某些方式，并且不会返回已安装的更新随后被删除？本质上，我在“查看已安装的更新”窗格下的“程序和功能”中使用相同的数据集。

抱歉，如果本应就之前查看此问题的任何一个相关问题进行讨论，但以我目前的声誉，我可以为这两个问题做出贡献的唯一方法是提交一个新的答案，这绝对不是正确的方法再问一个诸如此类的问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T19:16:07.500

据我所知，任何已安装和能够卸载的东西都必须在注册表中注册，`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall` 似乎子项名称 KB999999 是为系统更新（修补程序或服务包）保留的。更新的内容将在名为 ParentKeyName 的子项中具有 REG_SZ 值，该值链接到它更新的注册表项。

例如，我有 SQL Server 2008 的 Service Pack 1，所以我`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\KB968369`在注册表中有一个子项。它有一个名为`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\KB968369\ParentKeyName`“Microsoft SQL Server 10 Release”的 REG_SZ 值。因为我安装了 SQL Server 2008（因为 KB968369 是它的 SP），所以我还有一个`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\Microsoft SQL Server 10 Release`ParentKeyName 链接。

您可以从 ReleaseType REG_SZ 值判断更新的类型。例如，KB968369 安装的`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\KB968369\ReleaseType`值为“ServicePack”

我假设只有可以卸载的更新在`Uninstall`密钥下注册。还有似乎详细说明各种系统更新的`HKEY_LOCAL_MACHINE\Software\Classes\Installer\Patches`注册表项（在各个地方引用，例如这里：http: [//support.microsoft.com/kb/971187 ）。](http://support.microsoft.com/kb/971187)

显然还有一个您可以实例化和查询的 Microsoft Update 对象。此处详细介绍了一个示例：http: [//msmvps.com/blogs/athif/archive/2005/11/20/76035.aspx](http://msmvps.com/blogs/athif/archive/2005/11/20/76035.aspx)

我不确定这是否完全满足您的需求；但这是我多年来学到的一些不同的东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:26:33.133

在没有可靠且完整的编程方式来实现这一点的情况下，我最终使用了该`wmic qfe`命令。

# c# - c#在当前cmd中显示消息

> ID：12313807
> 
> 赞同：1
> 
> 时间：2012-09-07T07:38:56.673
> 
> 标签：c#, console, cmd

我已经编写了在控制台和用户界面中工作的应用程序。现在从控制台执行应用程序时，我想在当前打开的控制台中显示消息。

```
static class Program
    {
        [DllImport("kernel32.dll",
            EntryPoint = "GetStdHandle",
            SetLastError = true,
            CharSet = CharSet.Auto,
            CallingConvention = CallingConvention.StdCall)]
        private static extern IntPtr GetStdHandle(int nStdHandle);
        [DllImport("kernel32.dll",
            EntryPoint = "AllocConsole",
            SetLastError = true,
            CharSet = CharSet.Auto,
            CallingConvention = CallingConvention.StdCall)]
        private static extern int AllocConsole();
        private const int STD_OUTPUT_HANDLE = -11;
        private const int MY_CODE_PAGE = 437; 

        [STAThread]
        static void Main(string[] Args)
        {
                if (Args[0] != "")
                {
                    //AllocConsole();
                    commandlineTool(Args[0]);
                }
                else
                {

                    Application.EnableVisualStyles();
                    Application.SetCompatibleTextRenderingDefault(false);
                    Application.Run(new Form2());
                }
static void commandlineTool(string filename)
{
    //all coding here
    AllocConsole();

    IntPtr stdHandle = GetStdHandle(STD_OUTPUT_HANDLE);
    SafeFileHandle safeFileHandle = new SafeFileHandle(stdHandle, true);
    FileStream fileStream = new FileStream(safeFileHandle, FileAccess.Write);
    System.Text.Encoding encoding = System.Text.Encoding.GetEncoding(MY_CODE_PAGE);
    StreamWriter standardOutput = new StreamWriter(fileStream, encoding);
    standardOutput.AutoFlush = true;
    Console.SetOut(standardOutput);

    Console.WriteLine("File has been generated.");
    Console.ReadLine();
} 
```

实际上 **AllocConsole()**为进程分配新的控制台。

但是从此一个新的控制台打开并显示消息，但我想在同一个控制台中显示消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T21:20:47.677

**方法 A（首选，简单）：** 您可以使应用程序成为控制台应用程序，如果在 GUI 模式下使用[`FreeConsole`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683150%28v=vs.85%29.aspx). 这个 IMO 是最好的解决方案。*唯一*的缺点是在启动应用程序时控制台窗口会非常短暂地显示。

**方法 B（必要时使用）：** 您可以尝试使用[`AttachConsole(ATTACH_PARENT_PROCESS)`](http://msdn.microsoft.com/en-us/library/ms681952%28v=VS.85%29.aspx). 如果父进程没有控制台，这将失败，在这种情况下，您必须重新使用 AllocConsole。

此外，如果[`System.Console`](http://msdn.microsoft.com/en-us/library/43zwz7ys.aspx)在您尝试附加/分配控制台时该类已经被初始化，您将不得不重新连接输入/输出/错误流，如下所示：

```
 StreamWriter stdOut = new StreamWriter(Console.OpenStandardOutput());
    stdOut.AutoFlush = true;
    Console.SetOut(stdOut);

    StreamWriter stdErr = new StreamWriter(Console.OpenStandardError());
    stdErr.AutoFlush = true;
    Console.SetError(stdErr);

    StreamReader stdIn = new StreamReader(Console.OpenStandardInput());
    Console.SetIn(stdIn); 
```

否则你将没有输出。

# semantic-web - 在 Freebase 中查询包含多个单词的实体

> ID：12313810
> 
> 赞同：0
> 
> 时间：2012-09-07T07:39:13.447
> 
> 标签：semantic-web, freebase

我正在修补 Freebase 搜索 api。我正在搜索实体并对 Freebase 返回的分数感兴趣。根据[http://wiki.freebase.com/wiki/Search_Service](http://wiki.freebase.com/wiki/Search_Service)，分数定义为

**score：**这个结果的分数 - 分数是 100 分

如果我的查询只包含一个单词，例如 nirvana，则返回的分数低于 100，但如果我查询诸如“自由女神像”之类的内容，则分数高达 1100。示例查询链接：

[https://www.googleapis.com/freebase/v1/search?query=statue%20of%20liberty&indent=true](https://www.googleapis.com/freebase/v1/search?query=statue%20of%20liberty&indent=true)

谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:44:09.010

文档是错误的，分数可能高于 100，并且仅在与相同结果/响应中的其他分数比较时才相关。

# date - 进度 8，CURRENT_DATE 选择

> ID：12313813
> 
> 赞同：-1
> 
> 时间：2012-09-07T07:39:38.280
> 
> 标签：date, progress-db

我想在我的 Progress DB（主要版本 8）上执行一个语句，它在 SQL Server 中看起来像这样：

选择 GETDATE()

或者

从 DUAL 中选择 Current_Date

与口腔

对于 Progress8，注册日期为 CURRENT_DATE。我现在的问题是：对于 Progress8 是否存在类似 dual 的表？还是这个语句，它只返回一个 Date 是不可能的？（我可以创建一个像双表一样的表，但我没有权限）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:33:37.787

进度不是 SQL。Progress 版本 8 也很古老、过时且不受支持。它是在 90 年代发布的。当前的 Progress 版本是 OpenEdge 11（“OpenEdge”品牌是在版本 9 中引入的）。

FWIW Progress 8 确实有一些非常有限的 SQL-89 功能，但使用它们通常被认为是疯狂的。出于营销目的，它们在黑暗时代被添加到语言中。使用 4GL 编写查询会更加成功。

如果您实际上是在 4GL 中尝试执行此操作，那么您正在寻找 TODAY 关键字。

Progress 的现代版本确实支持通过 ODBC 或 JDBC 访问 SQL-92。但是您需要升级才能获得它。

# ios - 在 Flash Builder 4.6 中打包 iOS 移动应用程序的无尽过程

> ID：12313814
> 
> 赞同：2
> 
> 时间：2012-09-07T07:39:39.903
> 
> 标签：ios, mobile, air, flash-builder

我用 Flash Builder 构建了几十次 iOS 应用程序，总是很长时间（5-10 分钟），但总是成功。在新项目不停止包装的过程 30-45 分钟，然后我不能等待更多。包装半小时后，沙漏还在走，包装为0%。如果我为 Android 打包这个应用程序一切都很好。

从评论来看，这是一个普遍的问题。

没有错误或警告。我检查了一个新的空项目中的证书和规定，它的工作正常。

如何跟踪或查看打包进度日志以及在哪里查找错误？

# ios - 单击按钮时更改选定的 TabBar 索引

> ID：12313820
> 
> 赞同：-1
> 
> 时间：2012-09-07T07:40:04.967
> 
> 标签：ios, objective-c, iphone, uitabbarcontroller

在我的应用程序中，我有 4 个选项卡，在第一个选项卡上：我有 4 个视图。在第二个视图中，有一个按钮可以打开第三个选项卡视图。但我选择的标签索引是一个。我怎样才能把它改成第三。

我的标签栏代码在 APPDelegate 中，如下所示：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { 
     UINavigationController *nav1 = [[UINavigationController alloc] init];
         UIViewController *viewController1 = [[[CarAccidentAppViewController alloc]
     initWithNibName:@"CarAccidentAppViewController_iPhone" bundle:nil]
     autorelease];
        nav1.viewControllers = [NSArray arrayWithObjects:viewController1, nil];

         //for steps tab...

         UINavigationController *nav2 = [[UINavigationController alloc] init];
         UIViewController *viewController2 = [[[FirstSteps alloc] initWithNibName:@"FirstSteps" bundle:nil] autorelease];
         nav2.viewControllers = [NSArray arrayWithObjects:viewController2, nil];

         //for profiles tab...

        UINavigationController *nav3 = [[UINavigationController alloc] init];
         UIViewController *viewController3 = [[[Profiles alloc] initWithNibName:@"Profiles" bundle:nil] autorelease];
         nav3.viewControllers = [NSArray arrayWithObjects:viewController3, nil];

         //for contact us tab...

        UINavigationController *nav4 = [[UINavigationController alloc] init];
        UIViewController *viewController4 = [[[ContactUs alloc] initWithNibName:@"ContactUs" bundle:nil] autorelease];
         nav4.viewControllers = [NSArray arrayWithObjects:viewController4, nil]; self.tabBarController = [[[UITabBarController alloc] init]
     autorelease];
         self.tabBarController.viewControllers = [NSArray arrayWithObjects:nav1,nav2,nav3,nav4 ,nil];

         self.window.rootViewController=self.tabBarController;
        [self.window makeKeyAndVisible];
         return YES; 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-22T17:21:21.807

在**Swift** 2 中，你可以调用：

```
 self.tabBarController?.selectedIndex = 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T11:06:14.090

在应用程序中以编程方式切换选项卡的最简单方法是执行此操作..

```
[self.tabBarController setSelectedIndex:3]; 
```

我在我的一个应用程序中使用它，它运行得非常好。

等离子体

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T09:01:02.873

```
 self.tabBarController.selectedViewController=[self.tabBarController.viewControllers objectAtIndex:3]; 
```

尝试这个。这将对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T07:42:52.927

点击按钮

```
[self.navigationController pushViewController:YourView animated:YES];
[self.tabBarController setSelectedIndex:index]; 
```

# php - 获取包含内部节点的文本内容

> ID：12313823
> 
> 赞同：1
> 
> 时间：2012-09-07T07:40:28.920
> 
> 标签：php, xml, xml-parsing, simplexml

我想打印出来`"depth 17 - 1 enclosed by 20m contour "`

下面是从 xml 文件版本 1.0 加载的 xml 字符串`$xml = simplexml_load_file("test.xml");`

```
<object>
  depth 
 <emphasis>
  17 
   <subscript>1</subscript> 
 </emphasis>
  enclosed by 20m contour 
</object>

print_r($Vals->object);
//prints "depth enclosed by 20m contour "

$Vals->object->emphasis.' - '.$Vals->object->emphasis->subscript
//prints "17 - 1" 
```

`"depth"`我可以通过用替换值来打印字符串`depth $Vals->object->emphasis.' - '.$Vals->object->emphasis->subscript`。这不是一件好事，因为字符串中可能也有一个“深度”，并且宽度也可能在深度的位置。

直到现在我正在尝试使用下面的代码，在[Go to Question看到](https://stackoverflow.com/questions/5132231/getting-the-text-portion-of-a-node-using-php-simple-xml)

```
echo dom_import_simplexml($Vals->object)->textContent; 
```

这段代码无法完成这项工作，也使系统变得如此缓慢。不会产生错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:00:48.863

您正在寻找[strval](http://php.net/manual/en/function.strval.php)。

鉴于此代码：

```
$xml = simplexml_load_file("test.xml"); 
```

你可以做：

```
print strval($xml->emphasis->subscript); // prints '1'
print strval($xml); //prints 'depth enclosed by 20m contour'
... 
```

依此类推，您可以自己将它们组合成您想要的字符串。

# java - 我应该为 Hibernate 中的关系创建一个类吗

> ID：12313825
> 
> 赞同：0
> 
> 时间：2012-09-07T07:40:48.213
> 
> 标签：java, spring, hibernate, orm

在数据库中，我有一个`customer`实体和一个`event`实体。它们之间存在一种多对多的关系，称为`reserve`。

`reserve`有三列`CUSTOMER_ID`，`EVENT_ID`和`SEAT`。

前两列是每个实体的主键。第三个是专门为关系设置的关系属性，所以它只在关系表中。

我正在努力的是我应该为这个创建一个单独的类，`reserve`还是应该在两个现有的两个类中做一些技巧来使第三个类存在？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:44:45.703

多对多关系表必须只有两个属性：应该链接的表的两个主键。在您的情况下，由于您在该关系表中存储了另一个属性，因此它不是*纯*关系表，**您必须为其创建一个额外的 POJO**。据我所知。

# nsmanagedobject - managedobject.managedobjectcontext 与 appdelegate 中共享的不同

> ID：12313831
> 
> 赞同：1
> 
> 时间：2012-09-07T07:41:08.100
> 
> 标签：nsmanagedobject, nsmanagedobjectcontext, appdelegate

我很困惑。有时我在 managedObject.m 中使用 self.managedObjectContext 就好了，但是，现在我遇到了奇怪的错误，例如 cocoa error 1550 或不同的上下文。

# android - 如何克服数据库未打开异常？

> ID：12313838
> 
> 赞同：0
> 
> 时间：2012-09-07T07:41:38.390
> 
> 标签：android, sqlite

我正在实现一个与数据库相关的应用程序。

很多次我都在调用打开和关闭数据库连接来插入、更新和删除。

它工作正常。

但有时我会在不同的情况下得到一个数据库未打开的异常。

如何解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:39:51.670

好吧，除非您进行适当的异常处理，否则您永远不会知道是什么原因造成的。

然而，一个好主意是为 Android 的 SQL Light 采用良好的 ORM 映射器，这将改善您的数据库交互和异常处理以及有效地打开和关闭它。

如果您愿意，您可以选择[SUGAR](http://onsoftwareandstuff.com/2011/08/14/sugar-android-database-made-easy/)或[ORMLight](http://ormlite.com/sqlite_java_android_orm.shtml)；在我看来，这应该可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:12:09.223

根据您提供的信息，我可以假设问题出在您的业务逻辑中，没有人，但您应该能够告诉您根本原因。如果没有您的代码，我们将无法为您指明确切的位置。可能的原因之一可能是您的业务逻辑试图在关闭的数据库上执行一些操作（插入、更新任何内容）。

您可以采取一些解决方法来尝试确保您的数据库在需要时始终处于打开状态。如果您使用所谓的惰性初始化方法实现数据库 getter 方法，它至少会保证当您需要访问数据库时数据库是打开的。

这就是我所说的：1.创建一个应该返回数据库对象的公共方法：

```
public SQLiteDatabase getDB() {
    if ((mDataBase == null) || (!mDataBase.isOpen())) {
        // create or open your database using an OpenHelper
        mDataBase = SQLiteOpenHelper.getWritableDatabase();
    }
    return mDataBase;
} 
```

现在，代码中的任何地方都使用此方法来访问数据库，而不是直接访问变量 mDataBase。

请注意，代码只是为了给您一个想法，而不是实际可编译的。尽管如此，我还是建议您修复您的业务逻辑，而不是使用此解决方法。

# spring - 在带有 Hibernate 项目的 Spring MVC 中配置 web.xml。DispatcherServlet 和 ContextLoaderListener 各有一个 sessionFactory

> ID：12313840
> 
> 赞同：1
> 
> 时间：2012-09-07T07:41:49.543
> 
> 标签：spring, hibernate, jakarta-ee, spring-mvc, web.xml

就像标题说的那样，我即将使用 Hibernate/JPA 配置一个 Spring MVC 项目以实现持久性。

我记得我对两者都使用了相同的上下文`DispatcherServlet`，`ContextLoaderListener`直到最近我才被建议将它们分开。但是在`SessionFactory`分离. `OpenSessionInViewFilter``DispatcherServlet`

除了在需要时加载集合的机制之外，在调用此父对象时，还有哪些其他技巧可以避免臭名昭著的`LazyInitializationException`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:17:01.547

如果您的“[工作单元](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/transactions.html#transactions-basics-uow)”不能根据请求自动生成，我认为您可以使用事务在服务层中手动创建它。像这样的东西：

```
public Object serviceMethod(params) {
   TransactionTemplate transactionTemplate; 
   transactionTemplate.execute(new TransactionCallbackWithoutResult() {
         public void doInTransactionWithoutResult(TransactionStatus status) {
         try {
        // call your DAO's to update/delete/... and set values to service
         } catch (DAOException e) {
        LOGGER.error(e);
        throw new ServiceException(e);
         }
    }
});
} 
```

# django - Django 模板系统 - 从模板中获取字段

> ID：12313841
> 
> 赞同：0
> 
> 时间：2012-09-07T07:41:49.607
> 
> 标签：django, templates, field

是否有一个函数可以返回模板中预期的字段列表？例如，我有以下模板：

```
hello i am {{ name }}. {% for i in docs %} i have doc {{ i }} 
```

写在档案里。我想得到一个包含：

```
{'name': 'str', 'docs': 'list'} 
```

有类似的东西还是我必须自己写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:06:16.887

据我所知，没有......

您的模板包含一些 html 和一些**占位符**（可能是其他内容）。所做的是`render_to_template`，它获取一个上下文字典，其中包含一些键和一些附加到该键的数据和一个模板。然后它根据它们的键名将值放置到这些占位符中，执行一些循环或条件检查，如果您的模板包含控制流，例如`{% if...%}`或`{%for....%}`

如果`TEMPLATE_DEBUG`在您的设置中关闭，并且如果在您的上下文字典中有一个没有匹配键的占位符，那么它将跳过它而不会引发任何错误。

此外，如果您将表单对象传递给您的模板并将您的对象直接放置到模板中（而不单独调用每个字段）[例如：`{{form}}`或者`{{form.as_p}}`然后 django 将检查表单上的字段并按[此处显示](https://docs.djangoproject.com/en/1.4/ref/forms/api/#as-p)的方式放置它们。在这种情况下，您只会知道使用了表单。您必须检查`Form`定义中使用了哪些字段。

如果您查看该过程，您**必须**知道放置上下文字典所需的内容。您可能会编写一个解析器来解析您的模板，但我想这比仅仅检查模板并找到丢失的数据要困难得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T14:33:50.757

内置的 {% debug %} 标签可能对您有所帮助，但我不知道我是否完全理解您的要求。基本上，如果您将调试标签放在模板中，它将打印很多有用的东西，包括模板中可用的所有变量。

也许您可以查看[调试标签](https://github.com/django/django/blob/master/django/template/defaulttags.py#L79)的源代码（因为他们可以访问那里的所有变量），并基于此构建[自定义标签](https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/)标签。看一眼源代码，这似乎真的很简单。

# linq - 可以在这里组合 linq 谓词吗？

> ID：12313844
> 
> 赞同：0
> 
> 时间：2012-09-07T07:42:00.633
> 
> 标签：linq, entity-framework

我正在使用具有工作单元 + 存储库模式的 EF4.3。

我有一个方法可以作为其他一些方法的基础，下面是代码的外观。

这是我的“基本”方法：

```
 public static IQueryable<Deal> FindActive()
    {
        var r = new ReadRepo<Deal>(Local.Items.Uow.Context);

        return r.Find(d =>
            d.ActiveFrom <= DateTime.Now &&
            (d.ActiveUntilComputed == null || d.ActiveUntilComputed > DateTime.Now) &&
            d.Published);
    } 
```

这是调用基本方法的方法之一：

```
 public static IQueryable<Deal> FindActiveByStore(int storeId)
    {
        Guard.Default(storeId, "storeId");
        return FindActive().Where(d => d.StoreId == storeId);
    } 
```

正如您在 中看到的`FindActiveByStore`，我首先调用`FindActive`，然后是链式调用`Find()`。FindActive 后跟 a`Where()`添加辅助谓词（请原谅术语）。

我想知道是否可以将谓词传递给`FindActive`而不是使用 a `Where()`，事实上它是否会在性能方面有所不同。

像这样：

```
FindActive(d => d.StoreId == storeId) 
```

FindActive 已经将谓词传递给，`Find()`因此它需要将两者结合起来。

我猜我得到的答案在努力或性能方面将是“不值得”的，但我想我还是会问专家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:48:54.187

您可以使用此代码（减少代码行数）

```
public IQueryable<Deal> FindActiveByStore(Expression<Func<Deal,bool>> predicate)
{
  var r = new ReadRepo<Deal>(Local.Items.Uow.Context);

  return r.Find(d => d.ActiveFrom <= DateTime.Now 
             && (d.ActiveUntilComputed == null || d.ActiveUntilComputed > DateTime.Now) 
             && d.Published)

             .Where(predicate);   
} 
```

# svn - Subversion 的用法与源代码不同

> ID：12313853
> 
> 赞同：0
> 
> 时间：2012-09-07T07:42:28.537
> 
> 标签：svn, version-control, versioning

我曾在大学项目和实际工作中与 SVN 合作过。主要用途是保留项目中源代码文件的版本：在主干上进行更改，创建分支以播放或使用源代码文件进行任何类型的工作，并使用标签文件夹定义最终版本；这是一个很好的软件工具，我工作中的人（包括我自己）都非常喜欢它。但最近，我在工作场所看到处理文档（word、excel、一些 power point 和其他资产）存在类似的问题。

我知道这可能是一个愚蠢的问题，但是使用 SVN 来处理这些文件的版本会很好吗？也许（或者也许不是）SVN 处理这类文件的行为与处理源代码文件的行为相同，但我只是有这个疑问。我以前在大学项目中用它来保存文档，但没有出现问题，但是在互联网上进行了一些研究之后，我没有发现任何帖子说您可以将 SVN 用于与保留版本不同的目的源代码。这个问题只是为了确保我不是一个疯狂的人或独自参与这种十字军东征。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:05:07.133

SVN 不关心文件的内容是什么；我的存储库只包含 MS Office 文档和 PDF。您不能对二进制文件执行合并或差异化，但 SVN 会很高兴地对它们进行版本控制而不会遇到麻烦。

只需确保您设置`svn:needs-lock`了二进制文件以帮助避免冲突 - 您无法像使用纯文本那样轻松解决冲突。

适当地设置您的 MIME 类型 ( `svn:mime-type`) 也很有帮助。

# web-applications - 谷歌 Youtube API

> ID：12313856
> 
> 赞同：0
> 
> 时间：2012-09-07T07:42:46.703
> 
> 标签：web-applications, youtube-api

任何网络应用程序可以使用 youtube api 发送给谷歌的请求数量是否有任何限制???我的意思是说任何网络应用程序每天都可以使用谷歌 youtube api 向谷歌服务器发送 10000 个请求而无需身份验证. 但是，如果任何 Web 应用程序使用身份验证方法（auth 2.0），则对请求的数量没有限制。您可以使用身份验证发送任意数量的请求。您能解决我的困惑吗？这对我来说很重要，也很紧急。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:56:18.287

常见问题解答提到 API 限制：[https ://developers.google.com/youtube/faq#limits](https://developers.google.com/youtube/faq#limits)

基本上，限制不是固定的（也不是公开的），但是您的任何 API 请求都可能返回`too_many_recent_calls`，在这种情况下，您必须等待几分钟才能重试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-01-18T14:38:47.423

我认为 youtube 每天的 cota 限制为 1000000 个单位，每个操作（简单搜索、上传视频、观看视频......）都有单位数量

# android - 如何知道发送短信时的 SIM 卡或手机号码？

> ID：12313860
> 
> 赞同：1
> 
> 时间：2012-09-07T07:43:29.007
> 
> 标签：android, sms, android-contentprovider

我正在构建一个需要报告有关传出 SMS 消息的一些信息的应用程序。据我了解，单个 Android 设备可以随时容纳不同的 SIM 卡，有没有办法查看发送特定 SMS 消息的 SIM 卡的手机号码？

我目前查看已发送短信的方法是通过`ContentObserver`to `content://sms`，虽然我可以检索发送日期、目标号码和消息正文等信息，但我无法从 中找到`Cursor`包含设备手机号码的列发送该消息的时间。我也不介意采取不同的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:12:17.100

由于电话号码并非物理存储在所有 SIM 卡上，或从网络广播到电话，因此无法保证解决此问题。在一些需要物理地址验证的国家尤其如此，之后才进行号码分配。电话号码分配发生在网络上 - 并且可以在不更改 SIM 卡或设备的情况下进行更改（例如，这是支持移植的方式）。我知道这很痛苦，但很可能最好的解决方案就是要求用户输入他/她的电话号码一次并存储它。

# asp.net - “Internet Explorer无法显示该网页”

> ID：12313862
> 
> 赞同：-2
> 
> 时间：2012-09-07T07:43:40.850
> 
> 标签：asp.net

我有一个应用程序通过 Crystal Reports 在新窗口中向用户显示 PDF 文件。这在我的开发机器上完美运行，并且在生产服务器上直接访问站点时（远程桌面运行浏览器安装在服务器上）但是当我通过互联网从外部访问站点时出现错误。其他报告显示正常，并且该报告过去一直有效，直到我最近进行了一些更改并重新安装了该站点。所有代码都在`try ... catch`但没有信息被写入我的错误文件。无法弄清楚为什么它会在服务器上本地工作，但不能通过互联网工作，只有这一份报告。

已经尝试过`System.Web`属性`maxRequestLength`和`executionTimeout`.

服务器是： **Windows Web Server 2008 IIS 7 Framework 4**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-06T09:09:42.707

这原来是水晶报告文件的一个问题，我从来没有找到确切的原因，但我将其缩小到导致问题的字段之一，删除该字段并没有问题。我认为它可能已链接到基于报告 xml 的数据源，但无法证明这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:47:54.000

可能是防火墙设置。请确保您的防火墙明确允许传入连接到 TCP 端口 80（或 443 用于 https，或者如果您通过其他端口访问该站点，则为其他任何端口），然后重试。

# html - 在jsp中使用xslt

> ID：12313864
> 
> 赞同：1
> 
> 时间：2012-09-07T07:43:48.683
> 
> 标签：html, xml, jsp, xslt, jena

我想将 xslt 应用于我的 xml 查询结果，但我不断收到错误。我正在研究 Tomcat，我的 java 代码包括：

```
String ret="";
String xsltstylesheet = "https://dl.dropbox.com/x/xsltstylesheet.xsl";            
QueryExecution qExec = QueryExecutionFactory.create(query, model) ;
ret += ResultSetFormatter.asXMLString(qExec.execSelect(), xsltstylesheet);   
qExec.close() ;    
return ret; 
```

因此，将我的结果格式化为*XMLString后，我一直在尝试通过在我的 jsp 中使用***1-transform**和**2-jstl**从中生成 html，但两种情况都不起作用：

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<?xml-stylesheet type="text/xsl" href="https://dl.dropbox.com/x/xsltstylesheet.xsl"?>
<%
   String search=request.getParameter("user");
   if(search==null) search="logic";
   String result=search;  
   try{
      ProjectMain pm=new ProjectMain();
      result=pm.different(search);
   }

//-case 1
   Source source = new StreamSource(${result}); // ?syntax error, misplaced constructor
   Source xsl = "https://dl.dropbox.com/u/84745393/xsltstylesheet.xsl";
   Result table = new StreamResult(System.out);  
   StreamSource xsltSource = new StreamSource(new StringReader(xsl)); 
   Transformer t = TransformerFactory.newInstance().newTransformer(xsl);  
   t.transform(xsl, table);    

//-Or case 2
   < c:import url="${result}" var="xmldocument"/>//Multiple annotations found at this line, Syntax error, insert";" /on token">"/ on token "import"...
   < c:import url="https://dl.dropbox.com/x/xsltstylesheet.xsl" var="xslt"/> 
   < x:transform xml="${xmldocument}" xslt="${xslt}"/>    

   out.println(result);
%> 
```

我想我的问题是*转换*需要它作为 StreamSource 的输入，但我的不是。而且我认为我不应该将查询结果的每个实例都写入文件以便以后将其转换为 html。

人们通常会做什么？我不知道如何解决它。

# google-app-engine - 使用 Google App Engine 和 Jinja2 的相对 URL

> ID：12313866
> 
> 赞同：5
> 
> 时间：2012-09-07T07:43:57.793
> 
> 标签：google-app-engine, jinja2

我将 Jinja2 与 Google App Engine 一起使用。在我尝试使用相对路径来加载 base.html 与我的 edit.html 模板。

我的主题目录结构如下所示...

*   应用程序根
    *   主题
        *   默认
            *   行政
                *   编辑.html
            *   base.html

我已经在模板中尝试过这个......

```
{% extends "../base.html" %} 
```

它返回这个......

```
TemplateNotFound: ../base.html 
```

当我这样做...

```
{% extends "base.html" %} 
```

我的 edit.html 模板加载，但没有 base.html。

如何访问 base.html，它是 edit.html 的一个目录？

现在的代码...

**应用程序.yaml**

```
application: myblog
version: 1
runtime: python27
api_version: 1
threadsafe: no

handlers:

- url: /admin/.*
  script: admin.app
  login: admin

- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: static.app

builtins:
- remote_api: on

libraries:
- name: webapp2
  version: "2.5.1"

- name: jinja2
  version: latest 
```

**配置文件**

```
blog_name = 'My Blog'
theme = 'default'
post_path_format = '/%(year)d/%(month)02d/%(slug)s' 
```

**管理员.py**

```
def render_template(template_name, template_vals=None, theme=None):
    template_path = os.path.join(os.path.dirname(__file__),
        'themes', theme or config.theme)
    env = jinja2.Environment(loader=jinja2.FileSystemLoader(template_path))
    template = env.get_template(template_name)
    return template.render(**(template_vals or {}))

class BlogPost(db.Model):
    #The URL path to the blog post. Posts have a path if they are published.
    path = db.StringProperty()
    title = db.StringProperty(required=True, indexed=False)
    body = db.TextProperty(required=True)
    published = db.DateTimeProperty(auto_now_add=True)
    updated = db.DateTimeProperty(auto_now=True)

    def render(self):
        template_vals = {
            'config': config,
            'post': self,
        }
        return render_template("post.html", template_vals)

form = model_form(BlogPost, Form)

class PostForm(form):
    pass

class PostHandler(webapp2.RequestHandler):

    @webapp2.cached_property
    def jinja2(self):
        return jinja2.get_jinja2(app=self.app)

    def render_to_response(
            self, template_name, template_vals=None, theme=None):
        template_name = os.path.join("admin", template_name)
        self.response.out.write(render_template(
            template_name, template_vals, theme))

    def render_form(self, form):
        self.render_to_response("edit.html", {'form': form})

    def get(self):
        self.render_form(PostForm())

app = webapp2.WSGIApplication([('/admin/newpost', PostHandler)],
                              debug=True) 
```

**编辑.html**

```
{% extends "../base.html" %}
{% block title %}Testing New Post Template{% endblock %}
{% block body %}
  <form method="post" action="">
    <table>

<div>{{ form.title.label }}: {{ form.title(class="css_class") }}</div>
{% if form.title.errors %}
        <ul class="errors">{% for error in form.name.errors %}<li>{{ error }}</li>{% endfor %}</ul>
    {% endif %}

<div>{{ form.body.label }}: {{ form.body() }}</div>
{% if form.body.errors %}
        <ul class="errors">{% for error in form.body.errors %}<li>{{ error }}</li>{% endfor %}</ul>
    {% endif %}

    </table>
    <input type="submit" />
  </form>
{% endblock %} 
```

**全栈跟踪**

```
ERROR    2012-09-07 07:45:42,964 webapp2.py:1553] ../base.html
Traceback (most recent call last):
  File "/home/john/google_projects/google_appengine/lib/webapp2/webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "/home/john/google_projects/google_appengine/lib/webapp2/webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "/home/john/google_projects/google_appengine/lib/webapp2/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/home/john/google_projects/google_appengine/lib/webapp2/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/home/john/google_projects/google_appengine/lib/webapp2/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/home/john/google_projects/google_appengine/lib/webapp2/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "/home/john/google_projects/sprucepress/admin.py", line 86, in get
    self.render_form(PostForm())
  File "/home/john/google_projects/sprucepress/admin.py", line 83, in render_form
    self.render_to_response("edit.html", {'form': form})
  File "/home/john/google_projects/sprucepress/admin.py", line 80, in render_to_response
    template_name, template_vals, theme))
  File "/home/john/google_projects/sprucepress/admin.py", line 34, in render_template
    return template.render(**(template_vals or {}))
  File "/home/john/google_projects/google_appengine/lib/jinja2/jinja2/environment.py", line 894, in render
    return self.environment.handle_exception(exc_info, True)
  File "/home/john/google_projects/sprucepress/themes/default/admin/edit.html", line 1, in top-level template code
    {% extends "../base.html" %}
TemplateNotFound: ../base.html 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-09T13:24:38.070

嗯，我想通了......

这是我学到的...

*   不要让您的主题文件夹成为静态文件夹。这是一个很大的[禁忌，因为在 GAE 上，应用程序无法使用静态文件](https://developers.google.com/appengine/docs/python/config/appconfig#Static_File_Handlers)。如果 Google App Engine 告诉您该文件不可访问，这可能是原因！

*   在 Jinja2 中，所有文件都与您分配给 jinja2 环境的文件夹相关……而不是模板文件！所以，就我而言……“默认”主题文件夹是我的 jinja 环境的根文件夹。而不是`../base.html`我这样做`base.html`，因为 base.html 位于我告诉 jinja2 用于加载模板的默认文件夹中。

*   最后，如果您希望 jinja2 在多个文件夹中查找文件，您[可以](https://stackoverflow.com/questions/2180247/does-the-jinja2-templating-language-have-the-concept-of-here-current-director).

# java - java web应用程序中的RuntimeException处理

> ID：12313867
> 
> 赞同：1
> 
> 时间：2012-09-07T07:44:08.600
> 
> 标签：java, hibernate, tomcat, web-applications, wicket

我遇到了一个有趣的目标，这个目标针对使用 wicket 和 hibernate 框架编写的现有 Web 应用程序中的异常处理，假设我们有部署在服务器中的 Web 应用程序，有时它会产生运行时异常，问题是如何获取和保存他们的堆栈跟踪到 db 而不修改所有类（大约 80 个模型和 150 个视图）。

希望我把一切都说清楚了。
提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T08:34:33.603

您可以使用 an`IRequestCycleListener`来记录/处理您的异常：

```
public class MyExceptionReporter extends AbstractRequestCycleListener {

    @Override
    public IRequestHandler onException(RequestCycle cycle, Exception ex) {
        // log exception here
        return null;
        // if you want to also show an error page:
        // return new RenderPageRequestHandler(new PageProvider(new ExceptionPage(ex)));
    }
} 
```

然后注册它`WebApplication#init`：

```
getRequestCycleListeners().add(new MyExceptionReporter()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T08:00:39.267

## Wicket 1.4 及更早版本

覆盖[`Application.newRequestCycle()`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/Application.html#newRequestCycle%28org.apache.wicket.Request,%20org.apache.wicket.Response%29)并返回`WebRequestCycle`该覆盖的自定义子类，以便为应用程序中[`RequestCycle.logRuntimeException()`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/RequestCycle.html#logRuntimeException(java.lang.RuntimeException))的所有 s 提供额外的日志记录行为。`RuntimeException`请注意，任何未捕获`Exception`的都将被 Wicket 包装在 a 中`WicketRuntimeException`（如[请求周期和请求周期处理器的](https://cwiki.apache.org/WICKET/request-cycle-and-request-cycle-processor.html)*异常处理*部分所述）：

在那里，使用服务/DAO 组件将异常消息与堆栈跟踪一起插入数据库。请记住，根据 dbms，您可能希望使用 CLOB 而不是 varchar 类型（例如，在 Oracle 中，varchar 列不能容纳超过 4000 个字节）。

这是一个（*未经测试*的）示例：

```
public class myApplication extends WebApplication { 
    ...
    @Override
    public RequestCycle newRequestCycle(Request request, Response response) {
        return new myRequestCycle(this, (WebRequest) request, (WebResponse) response);
    }
} 

public class myRequestCycle extends WebRequestCycle { 
    ...
    @Override
    protected void logRuntimeException(RuntimeException rex) {
        super.logRuntimeException(rex);
        Writer w = new StringWriter();
        t.printStackTrace(new PrintWriter(w));
        String stackTrace = w.toString();
        someService.logExceptionToDB(rex.getMessage(),stackTrace);
    } 
} 
```

## Wicket 1.5 及更高版本

请参阅[@Cristoph 的回答](https://stackoverflow.com/a/12314525/851811)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:50:13.213

编写一个使用 StackTraceElement[] 的实用程序来为您提供完整的堆栈跟踪。使用 OutputStream 的实现将其推送到 CLOB 对象。（我认为不需要 BLOB）

# java - 如何使用 java6 代码计算文件的硬链接、所有者和组？

> ID：12313868
> 
> 赞同：0
> 
> 时间：2012-09-07T07:44:26.623
> 
> 标签：java, groovy

这是[这个问题](https://stackoverflow.com/questions/12214359/how-to-collect-directory-listing-along-with-each-file-crc-checksum)的延续。有没有办法`hardlink, owner & group`使用java6进行计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:40:55.687

在 Java 6 中，您所能做的就是调用`Runtime.exec("ls -li "+filename)`并解析它的输出。

Java 7 对文件权限和链接的支持更多，但我没有使用过这些 API。

# sql - 在一次更新查询中更新 10 万条记录

> ID：12313874
> 
> 赞同：3
> 
> 时间：2012-09-07T07:44:37.200
> 
> 标签：sql, sql-server, stored-procedures, sql-update

是否有可能或完全推荐运行一个更新查询，一次更新近 10 万条记录？

如果是这样，我该怎么做？我正在尝试将一个数组传递给我的存储过程，但它似乎不起作用，这是我的 SP：

```
CREATE PROCEDURE [dbo].[UpdateAllClients]
    @ClientIDs varchar(max)
AS
BEGIN
    DECLARE @vSQL varchar(max)
    SET @vSQL = 'UPDATE Clients SET LastUpdate=GETDATE() WHERE ID IN (' + @ClientIDs + ')';
    EXEC(@vSQL);
END 
```

我不知道什么不起作用，但它只是没有更新相关查询。

任何人？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T07:50:11.700

`UPDATE`正在阅读您的（`@ClientIDs`作为*逗号分隔值*）作为一个整体。为了进一步说明，您正在这样做。

假设`@ClientIDs = 1,2,3,4,5`

你的`UPDATE`命令是这样解释的

```
UPDATE Clients SET LastUpdate=GETDATE() WHERE ID IN ('1,2,3,4,5')'; 
```

并不是

```
UPDATE Clients SET LastUpdate=GETDATE() WHERE ID IN (1,2,3,4,5)'; 
```

对您的问题的一个建议是在您的`UPDATE`示例上使用子查询

```
UPDATE Clients 
   SET LastUpdate = GETDATE() 
WHERE ID IN
    (
       SELECT ID
       FROM tableName
       -- where condtion
    ) 
```

希望这是有道理的。

![希望这可以帮助](../Images/1ae73dea6def26e3b035fe93a2b4b71c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T07:59:18.373

需要注意的一些注意事项。

像这样的大更新会锁定目标表。如果操作影响 > 5000 行，则单个行锁将提升为表锁，这将阻塞其他进程。如果这可能会导致您的场景出现问题，请记住这一点。请参阅：[锁升级](http://msdn.microsoft.com/en-us/library/ms184286%28v=sql.105%29.aspx)

像这样更新大量行，我考虑的一种方法是（基本）：

1.  将 100K Id 批量插入临时表（例如，来自 .NET，使用 SqlBulkCopy）
2.  更新目标表，使用连接到上面的临时表
3.  删除临时表

这为控制过程提供了更多空间，但将工作负载分成块并一次执行 x 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:57:56.997

你用的是什么版本的sql server？如果是 2005+，我建议使用 TVP（表值参数 - [http://msdn.microsoft.com/en-us/library/bb510489.aspx](http://msdn.microsoft.com/en-us/library/bb510489.aspx)）。数据传输会更快（而不是构建一个巨大的字符串），并且您的查询看起来会更好：

```
update c
set lastupdate=getdate()
from clients c
join @mytvp t on c.Id = t.Id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T09:24:47.207

每个 SQL 语句本身就是一个`transaction`语句。这意味着 sql server 将为所有这些数百万行获取锁。它确实会降低表的性能。所以你真的不倾向于更新一个有数百万行的表，这会损害性能。所以解决方法是在 DML 操作之前设置行[数](http://msdn.microsoft.com/en-us/library/ms188774.aspx)

```
set rowcount=100
UPDATE Clients SET LastUpdate=GETDATE()
WHERE ID IN ('1,2,3,4,5')';
set rowcount=0 
```

或者从 SQL server 2008 你可以参数化 Top 关键字

```
Declare @value int
set @value=100000 
again:
UPDATE top (@value) Clients SET LastUpdate=GETDATE()
WHERE ID IN ('1,2,3,4,5')';
if @@rowcount!=0  goto again 
```

查看上述查询的速度，然后调整和更改变量的值。您需要按照上述答案中的建议为较小的单位中断任务

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T07:53:21.547

如果您提供数组，则传递给“IN”的项目数量是有限制的。

因此，如果您只想更新整个表，请跳过 IN 条件。

如果没有在 IN 中指定 SQL。那应该做的工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T07:53:58.387

数据库很可能会拒绝该 SQL 语句，因为它太长了。

当您需要一次更新这么多记录时，您的数据库架构可能不合适。也许 LastUpdate 数据不应该为每个客户端单独存储，而是全局只存储一次，或者对于一组恒定的客户端只存储一次？

但是，如果不了解全局，就很难推荐一个好的行动方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-30T11:10:51.803

方法一：

1.  使用分隔符 ',' 拆分 @clientids
2.  放入数组并遍历该数组
3.  更新每个 id 的客户端表。

或者

方法二：

不要将@clientids 作为varchar2，而是按照以下步骤操作

1.  为 ids 创建对象类型表并使用连接。
2.  为了加快处理速度，您还可以在 clientid 上创建索引。

# html - IE8 堆叠和挤压整个站点

> ID：12313875
> 
> 赞同：2
> 
> 时间：2012-09-07T07:44:38.490
> 
> 标签：html, css, internet-explorer-8

为当地的小联盟棒球队设计和开发的快速网站。

不需要 IE7 支持。网站在当前浏览器中完美运行。

IE8 恰好在一个非常奇怪的庄园中完全破坏了每个包含的元素，这导致整个网站堆叠在自身之上。

有什么直接的想法或建议吗？

[http://agawamgatorsbaseball.com/dev/](http://agawamgatorsbaseball.com/dev/)

PS 下次我将使用[http://lint.brihten.com/html/](http://lint.brihten.com/html/)在跳到板之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:32:37.580

首先，您的标题中有一个打开的“div”：

```
<header>
    <h1>AGAWAM GATORS BASEBALL</h1>
    <div class="contact_us">
        <p>Team Manager</p>
        <h2>Steve Moccio<br />
        moccio6@comcast.net</h2>
    </header> 
```

尝试检查任何其他未关闭的标签。

# playback - 为什么我们需要设计一个状态机来实现一个播放应用程序？

> ID：12313882
> 
> 赞同：1
> 
> 时间：2012-09-07T07:45:13.763
> 
> 标签：playback, state-machine

我们不能只写一些 play() stop() pause() 函数吗？
使用状态机执行此操作有什么好处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:10:42.237

您的情况的主要优点是每个状态都确定哪些操作是有效的以及状态机如何对它们做出反应。

在一个非常简单的模型中，您的状态机将具有状态

*   播放
*   暂停
*   不玩

这些状态中的每一个都定义了哪些操作是有效的。允许在**Playing**状态下调用 Play() 是没有意义的。允许 Stop() 处于**Not Playing**状态也是没有意义的。状态机可帮助您确定哪些操作在哪个状态下有效。

顺便说一句：每个程序都是一种状态机，但并非每个程序都以状态机为模型。通过创建模型，您的代码会自动变得更有条理并提高可读性。

# javascript - 使用 jQuery 获取元素的精确精确宽度

> ID：12313883
> 
> 赞同：1
> 
> 时间：2012-09-07T07:45:16.873
> 
> 标签：javascript, jquery, css, html-table

我有两个表格行（不在同一个表格中），我一直在尝试设置 row1 中每个表格单元格（td）的宽度 = row2 中每个表格单元格的宽度，但结果每次 row1 都短一点比row2，当我使用alert检查所有表格单元格的各自值时，我得到了一个好的结果，然后我使用firebug检查了这两个元素，结果证明，例如，将表格单元格值设置为53px，计算值为 53.2167px，而 row1 中其他相应表格单元格的计算宽度仅为 53px ，我想这就是所有不同之处。有什么方法可以使用 jQuery 获得准确的值（53.2167px）？

![截屏：](../Images/8b68a547728c56f801451791486084ef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:45:55.503

在您的环境中执行此操作应该可以为标题表格单元格与内容设置正确的宽度。

# 例子

## HTML

```
<table id="theHeader">
    <thead>
        <tr>
            <th>Test</th>
            <th>Test</th>
            <th>Test</th>
            <th>Test</th>
        </tr>
    </thead>
</table>

<table id="theContent">
    <tbody>
        <tr>
            <td>Testing</td>
            <td>Testing</td>
            <td>Testing</td>
            <td>Testing</td>
        </tr>
    </tbody>
</table> 
```

## jQuery

```
var headerColumns = $('#theHeader thead tr:first-child th');
var contentColumns = $('#theContent tbody tr:first-child td');

for(i=0; i<contentColumns.length; i++){
    $(headerColumns[i]).css('width',$(contentColumns[i]).width()+'px');
}​ 
```

## jsFiddle

[http://jsfiddle.net/xWbhM/](http://jsfiddle.net/xWbhM/)

# r - testthat 包的 R 代码覆盖率

> ID：12313886
> 
> 赞同：13
> 
> 时间：2012-09-07T07:46:03.657
> 
> 标签：r, testing, code-coverage

是否有任何工具可以使用该`testthat`包评估 R 脚本的代码覆盖率？[除了在RJournal 文章的“](http://journal.r-project.org/archive/2011-1/RJournal_2011-1_Wickham.pdf)*未来工作*”部分中提到该主题外，我在 Google上一无所获。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-03-31T02:05:02.223

新到货的[`covr`包裹](https://github.com/jimhester/covr)似乎可以满足您的一切需求，还有更多！它提供与各种 CI 服务的集成和闪亮。它适用于任何类型的测试基础设施（testthat、RUnit 等），也适用于已编译的代码。

* * *

以下只是一个非常简单的演示案例，我快速编译以帮助您入门。

```
install.packages("covr") 
```

添加一个`testcovr/R/doublefun.r`包含

```
doublefun <- function(x, superfluous_option) {
    if (superfluous_option) {
        2*x
    } else {
        3*x
    }
} 
```

和一个`testcovr/tests/testthat/test.doublefun.r`包含

```
context("doublefun")

test_that("doublefun doubles correctly", {

    expect_equal(doublefun(1, TRUE), 2)
}) 
```

然后运行例如

```
test("testcovr")
## Testing testcovr
## doublefun : .

library(covr)
package_coverage("testcovr")
## doublefun : .
##
## Package Coverage: 66.67%
## R/doublefun.r: 66.67%
zero_coverage(package_coverage("testcovr"))
## doublefun : .
##
##        filename first_line last_line first_column last_column value
## 3 R/doublefun.r          5         5            9          11     0 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-11T08:59:20.817

我会回答我自己的问题:-)

我在项目现场问了同样的问题。**目前似乎没有对*testthat*库**的支持，但最近通过使用 R 的开发版本并利用分析器的一些新功能打开了这种可能性。不幸的是，这似乎是一项艰巨的工作，但希望有人能带头。

[在这张票中](https://github.com/hadley/test_that/issues/45#issuecomment-8438700)找到详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-02T16:24:18.833

这是在函数级别计算一组 R 文件的测试覆盖率的尝试：

[https://gist.github.com/cannin/819e73426b4ebd5752d5](https://gist.github.com/cannin/819e73426b4ebd5752d5)

它依赖于使用正则表达式来查找函数的创建位置和调用时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-11T22:45:07.863

您可以使用以下解决方案来评估使用该`testthat`包的 R 脚本的代码覆盖率：

```
library(covr)
coverage_to_list() 
```

# c# - XML 通过 HTTP 发送带有脚本的页面

> ID：12313887
> 
> 赞同：0
> 
> 时间：2012-09-07T07:46:06.060
> 
> 标签：c#, xml, asp-classic, exception-handling, httpwebrequest

我正在尝试将 XML 文档发送到页面 .asp，并得到答案，但出现以下错误：

> System.UriFormatException：无效的 URI：URI 方案无效。在 System.Uri.CreateThis(String uri, Boolean dontEscape, UriKind uriKind) 在 System.Net.WebRequest.Create(String requestUriString) 在 GNS_ZalkarBank.GNSTaskServiceZalkarBank.CreateRequest(String requestData, String address) 在 GNS_ZalkarBank.GNSTaskServiceZalkarBank.SendRequest(String requestString) , String address) at GNS_ZalkarBank.GNSTaskServiceZalkarBank.processData(TaskInfo& taskInfo, Object& data) at Task.RegistryTemplate.RegistryTaskTemplate.execute(DataSet& dataSet)`

我用asp服务器脚本实现了一种向页面发送数据的方法：

```
private string SendRequest(String requestString, String address)
{
    address = "https://myadress/osmp_gni_xml.asp";
    HttpWebRequest httpRequest = this.CreateRequest(requestString, address);
    string response = GetResponse(httpRequest);
    return response;
}

private HttpWebRequest CreateRequest(string requestData, string address)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(address);
    request.Method = "POST";
    //request.UserAgent = "Test";

    byte[] data = Encoding.UTF8.GetBytes(requestData);
    request.ContentType = "text/xml; encoding='utf-8'";
    request.ContentLength = data.Length;
    using (Stream dataStream = request.GetRequestStream())
    {
        dataStream.Write(data, 0, data.Length);
        dataStream.Close();
    }
    return request;
}

private string GetResponse(HttpWebRequest httpWebRequest)
{
    string responseString;
    HttpWebResponse response = (HttpWebResponse)httpWebRequest.GetResponse();
    using (Stream dataStream = response.GetResponseStream())
    {
        using (StreamReader reader = new StreamReader(dataStream))
        {
            responseString = reader.ReadToEnd();
        }
    }
    return responseString;
} 
```

服务器端（脚本页面：osmp_gni_xml.asp）：

```
<%@ Language=VBScript CODEPAGE="65001"%>
<%    
    Sub AddSubNode(Parent, Name, Value)  
        Set subNode = XMLDoc.createElement(Name)  
        Parent.appendChild(subNode)  
        subNode.appendChild(XMLDoc.createTextNode(Value))  
    End Sub  

    Function Stream_BinaryToString(Binary, CharSet)
        Const adTypeText = 2
        Const adTypeBinary = 1

        'Create Stream object

        Dim BinaryStream 'As New Stream
        Set BinaryStream = CreateObject("ADODB.Stream")

        'Specify stream type - we want To save text/string data.

        BinaryStream.Type = adTypeBinary

       'Open the stream And write text/string data To the object

        BinaryStream.Open
        BinaryStream.Write Binary

        'Change stream type To binary

        BinaryStream.Position = 0
        BinaryStream.Type = adTypeText

        'Specify charset For the source text (unicode) data.

        If Len(CharSet) > 0 Then
            BinaryStream.CharSet = CharSet
        Else
            BinaryStream.CharSet = "us-ascii"
        End If

        'Open the stream And get binary data from the object

        Stream_BinaryToString = BinaryStream.ReadText
    End Function

    result=300
    OK="incomplete request"
    Dim PostData
    Dim biData

    PostData = ""
    If Request.TotalBytes>0 Then
        biData = Request.BinaryRead(Request.TotalBytes)

        PostData=Stream_BinaryToString(biData, "utf-8")

        ProvStr =  "Provider=sqloledb;Data Source=TEST;Initial Catalog=TESTOsmp;User Id=tests_osmp;Password=tests;"

        Set Conn = Server.CreateObject("ADODB.Connection")  
        Conn.Open ProvStr  
        Set cmdUA = Server.CreateObject("ADODB.Command")
        cmdUA.ActiveConnection = Conn
        cmdUA.CommandText = "GNI_Import"
        cmdUA.CommandType = 4 
        cmdUA.Parameters.Append cmdUA.CreateParameter("Reestr", 202, 1, 2000, PostData)

        Set RS = cmdUA.Execute
        result = RS("result") 

        RS.Close  
        Conn.Close 
        Set Conn = Nothing  
        Set RS = Nothing 
    End If

    'Create XML  

    Set XMLDoc = Server.CreateObject("Microsoft.XMLDOM")  

    Set pi = XMLDoc.createProcessingInstruction("xml"," version=""1.0"" encoding=""utf-8""")  
    XMLDoc.appendChild(pi)  

   'Main  

    Set mainNode = XMLDoc.createElement("response")  
    XMLDoc.appendChild(mainNode)  

    If result=0 Then
        OK="Ok"
    Else
        result=300
        OK="incomplete request"
    End If

    AddSubNode mainNode, "result",  result 
    AddSubNode mainNode, "comment", OK
    Response.ContentType = "text/xml"  
    Response.Write XMLDoc.XML  

    Set mainNode = Nothing 
    Set XMLDoc = Nothing   
%> 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:22:17.977

我怀疑您提供的代码不是有问题的代码，请参见：

```
private string SendRequest(String requestString, --> String address <--)
{
    --> address = "https://myadress/osmp_gni_xml.asp"; <--
    HttpWebRequest httpRequest = this.CreateRequest(requestString, address);
    string response = GetResponse(httpRequest);
    return response;
} 
```

您将地址传递给该方法，然后在第一行对其进行硬接线。问题出在地址的格式上，但这段代码可能不存在。

可能发生的情况是，您正在从文件或数据库中读取地址，而作为人类，您会看到“https://myadress/osmp_gni_xml.asp”，因为您使用的是有缺陷的转义机制，但代码是什么看到是这样的：

```
https/:////myaddress//osmp_gni_xml.asp 
```

这给出了同样的错误。

在您的实际代码中，您在 SendRequest 中覆盖它的地方的地址的确切值是多少

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:21:39.490

提供的错误文本来自这里：

```
private HttpWebRequest CreateRequest(string requestData, string address)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(address); // <- THIS LINE
    ...
} 
```

错误描述抱怨地址`https://myadress/osmp_gni_xml.asp`无效，`https`最可能的原因是连接问题。

尝试通过连接`https`但首先没有设置`https`服务器端是很常见的：验证地址是否可达，安全设置是否正确，以及排序。F12 开发者控制台（IE9 的一部分）、FireBug（Firefox 扩展）或 Fiddler（桌面应用程序）等控制台工具是找出外部连接发生情况的最佳工具。

# jquery - 日期选择器适用于错误的字段

> ID：12313889
> 
> 赞同：10
> 
> 时间：2012-09-07T07:46:15.837
> 
> 标签：jquery, jquery-ui

我的 jQuery UI datepicker 遇到了一个小问题。问题是，我有我的页面和一些这样的输入：

```
blabla | blabla | .date-picker | blabla
blabla2 | blabla2 | .date-picker | blabla2
blabla3 | blabla3 | .date-picker | blabla3 
```

所以'blabla'只是一些文本，'.date-picker'是一个输入，带有'date-picker'类。

在我的 JavaScript 代码中，我只有以下内容：

```
$(function() {
    $('.date-picker').datepicker();
}); 
```

但是例如，如果我单击“blabla3”行的输入，而不是更新正确的输入，它总是更新第一个...

我的输入具有所有相同的 id（我无法更改它），但我正在为我的选择器使用输入的类，所以它应该可以工作但不能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-05-03T05:40:30.753

您好旧帖子，但它适用于那些仍然面临这个问题的人......

只需删除`id`新输入的 id，datepicker 总是会生成一个新的 id，即如果输入没有。如果它有一个，日期选择器会保留它，这意味着这里第一个输入被克隆，最后一个也将被更新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T08:31:12.917

您应该更改输入的 id，否则它将不起作用，因为当您选择任何日期时，它会使用 `DP_jQuery_1347006322116.datepicker._selectDay('#same',8,2012, this);return false;`此函数来选择日期，并且它会将 id 用于输入。

因此，如果您有多个 id，它将选择第一个输入并在那里设置日期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T02:06:34.627

我有一个类似的问题，我将使用 javascript 动态添加包含具有相同 ID 标签的日期字段的新 DIV 容器。在我的情况下解决的唯一方法是动态重写所有 ID，然后销毁/创建 datepicker 功能：

```
var n=0;    
$("[id*='blabla']").each(function(){
    n++;
    tempField = this.id.split("-");
    this.id = tempField[0]+"-"+n;
    });

// first remove datepicker functionality since renaming of id above then            
// add datepicker to any field with "datepicker" as class   

    $("input.datepicker").datepicker("destroy").datepicker(); 
```

我修改了上面的内容以适合您的用例（我认为）。希望这可以帮助。

顺便说一句：我用连字符（“-”）分割的原因是因为我可以在每次使用 datepicker 字段动态创建另一个 DIV 容器时调用这个函数。它将按顺序系统地重命名所有 ID，以供以后的表单处理。

# javascript - 如何创建一个包含许多数组和数据的 json 对象？

> ID：12313890
> 
> 赞同：0
> 
> 时间：2012-09-07T07:46:15.483
> 
> 标签：javascript, json

我正在研究呈现为 json 数组的网络图代码。我需要更改代码以提供从另一个文件接收的数组数据。我拥有的代码：

```
var json = [
{
    "adjacencies": 
    [
        {
            "nodeTo": "A",
            "nodeFrom": "B",
             "data": 
             {
                 "$color": "#557EAA"
             }
        }
    ],

    "data": 
    {
        "$color": "#909291",
        "$type": "circle",
        "$dim": 20
    },

    "id": "B",
    "name": "B"

},
{
    "adjacencies": 
    [
        {
          "nodeTo": "C",
          "nodeFrom": "D",
          "data": 
          {
             "$color": "#416D9C"
          }
        }
    ],
    "data": 
    {
       "$color": "#83548B",
       "$type": "circle",
       "$dim": 20
    },
    "id": "D",
    "name": "D"
 },
]; 
```

我需要创建一个从 1 到 x 的 for 循环，并且在每次迭代中，我在 json 数组中添加一个值。（一个值由“adjacencies”、“data”、“id”、“name”组成）

请注意，nodeTo、nodeFrom、id 和 name 值存储在另一个数组中，因此在循环中我可以设置它们的值。

提前致谢：）

我已经尝试了 .push 如下： var json = []; var 邻接 = [];

```
for (i = 0; i < count; i++) {
    var adjacencies = [];
    var source = impactsString[i].Source;
    var target = impactsString[i].Target;
    var number = impactsString[i].NumberOfImpacts;
    adjacencies.push({ nodeTo: target, nodeFrom: source });
    json.push({ adjacencies: adjacencies, id: source, name: source });
} 
```

但仍然无法正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:48:36.120

使用[`Array.push()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)如下：

```
var json = [
{
    "adjacencies": 
    [
        {
            "nodeTo": "A",
            "nodeFrom": "B",
             "data": 
             {
                 "$color": "#557EAA"
             }
        }
    ],

    "data": 
    {
        "$color": "#909291",
        "$type": "circle",
        "$dim": 20
    },

    "id": "B",
    "name": "B"

},
{
    "adjacencies": 
    [
        {
          "nodeTo": "C",
          "nodeFrom": "D",
          "data": 
          {
             "$color": "#416D9C"
          }
        }
    ],
    "data": 
    {
       "$color": "#83548B",
       "$type": "circle",
       "$dim": 20
    },
    "id": "D",
    "name": "D"
 },
];

var i;
for (i = 0; i < 500; i += 1) {
    json.push({
         "adjacencies": 
         [
              {
                    "nodeTo": "A",
                    "nodeFrom": "B",
                     "data": 
                     {
                          "$color": "#557EAA"
                     }
              }
         ],

         "data": 
         {
              "$color": "#909291",
              "$type": "circle",
              "$dim": 20
         },

         "id": "B",
         "name": "B"

    });
} 
```

# bash - awk 在脚本中更改工作目录

> ID：12313895
> 
> 赞同：3
> 
> 时间：2012-09-07T07:46:25.090
> 
> 标签：bash, unix, awk, system, pwd

我想在 awk 脚本中更改工作目录：

```
 ...
  path="./some/path"
  system("pwd") ; \
  current_dir=system("pwd") ; \
  pushd_cmd="pushd " path ; \    # a "cd" doesn't work too
  print pushd_cmd ; \
  system(pushd_cmd) ; \
  system("pwd"); \               # the same directory as before
  type="xml"
  ls_cmd = "ls *." type;         # so I can't find the files. Specifying with "./some/path/*.xml" doesn't work too (without trying to change the working directory)
  ... 
```

有人知道为什么系统对我没有影响吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T10:20:53.537

`system`将启动子进程，子进程不能更改其父进程的工作目录。

快速的 Google 搜索显示 GNU AWK 文档的以下部分：[http ://www.gnu.org/software/gawk/manual/html_node/Internal-File-Description.html#Internal-File-Description](http://www.gnu.org/software/gawk/manual/html_node/Internal-File-Description.html#Internal-File-Description)

这似乎暗示标准 AWK 没有更改工作目录的方法。（在 GNU AWK 中，您可以`chdir`按照您所见的那样进行操作。）

# php - Codeigniter 上传库中的文件名错误

> ID：12313902
> 
> 赞同：0
> 
> 时间：2012-09-07T07:46:55.637
> 
> 标签：php, file, codeigniter, pyrocms, image-upload

我有多个文件上传字段。在开始时，当用户单击添加按钮时没有字段，它会显示文件上传字段

在视图中

```
PHP    
<?php echo $i = 0;?>

Javascript
var i = '<?php echo $i?>';  

<input type="file" name="product_image_' + i +'"/> 
```

当我提交表单时显示此输出

```
Array
(
    [product_image_1_] => Array
        (
            [name] => 25412_D80_backsanspic.png
            [type] => image/png
            [tmp_name] => C:\xampp\tmp\php68.tmp
            [error] => 0
            [size] => 355623
        )

    [product_image_2_] => Array
        (
            [name] => 25420_D40_right.png
            [type] => image/png
            [tmp_name] => C:\xampp\tmp\php69.tmp
            [error] => 0
            [size] => 347694
        )

    [product_image_3_] => Array
        (
            [name] => 26135_P6000_34r.png
            [type] => image/png
            [tmp_name] => C:\xampp\tmp\php6A.tmp
            [error] => 0
            [size] => 420441
        )

    [product_image_4_] => Array
        (
            [name] => 
            [type] => 
            [tmp_name] => 
            [error] => 4
            [size] => 0
        )

) 
```

您可以看到每个文件上传字段中都有下划线。我不明白这怎么可能。另外，如果我这样做

```
echo $_FILES['product_image_4_']['error']; 
```

它显示输出，但这不

```
echo $_FILES['product_image_4']['error']; 
```

相反，它会产生错误 undefined index product_image_4 任何建议。我正在使用基于 codeigniter 的 pyrocms。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:59:02.437

您的 Javascript 代码添加了额外的下划线，您需要检查一下。添加更多字段并查看页面源。如果名称中已经包含 (_)。您可能会在您的 java 脚本代码中添加额外的下划线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:11:07.977

我找到了解决这个问题的替代解决方案，我正在用 php 删除 _ 暂时不是一个完美的解决方案，但它可以让我继续我的工作。

# iphone - iphone初学者的入门套件？

> ID：12313905
> 
> 赞同：0
> 
> 时间：2012-09-07T07:47:20.313
> 
> 标签：iphone

我想开始为 iPhone 开发。我没有麦克。在阅读了这个[关于](https://stackoverflow.com/questions/3792306/which-eclipse-version-should-i-use-for-android-app)android 的问题后，我想知道：

是否有任何网站提供：

*   *您*需要下载的内容（适用于 PC 用户）

*   *如何*配置它

*   初学者的示例代码

有很多信息，但我没有为初学者找到任何集中的地方。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:58:31.650

对于 iPhone，如果你正在考虑做**Native Apps ，你****总是需要一台 Mac**。（Apple 在所有 Keynotes 中都明确表示：Apple Software + Apple Hardware）

 ***这里的每个 Android 开发人员都知道在所有 Android 设备上测试他们的应用程序很痛苦，因为没有人拥有相同的操作系统，他们总是为每家移动公司提供更改版本，Apple 明确表示您需要使用他们的，并且只有他们的设备*

即使您正在开发一个**HTML 应用程序并使用诸如**[**PhoneGap**](http://phonegap.com/)之类的包装器框架将其包装起来，您也需要一台 Mac 来编译代码并为您提供要上传到 AppStore 的包。

还有其他框架，例如[**Titanium**](http://www.appcelerator.com/)，它们将支持 Windows 机器，但我不记得它们是如何将代码编译到 AppStore 的，可能与 PhoneGap 的方式相同，为此你需要一个 mac。

PhoneGap 和 Titanium 以及**[Sencha Touch](http://www.sencha.com/products/touch)**是您可以使用您最了解的语言（HTML 和 Javascript）的框架 - 只有 Titanium 和 Sencha 中的 Javascript，并以非常类似于 Native App 的方式输出代码，并且可以轻松移植到任何其他操作系统，如 Android、Windows Phone 7、Meebo 等。只需阅读一下每个操作系统。

**Sencha 和 Titanium 是付费框架**，而**PhoneGap 是免费的**。

**如果在这方面采用 Native 的最佳方法**是从 eBay 或类似网站购买二手 MacMini，或者甚至在 VM 中运行 Hackintosh（适用于 Windows 机器的 OSX）......端到端，你总是需要一台 Mac。

* * *

还有[**MonoTouch**](http://xamarin.com/monotouch)，现在来自 Xamarin 和[Miguel de Icaza](http://tirania.org/blog/)的了不起的团队。

尽管如此，您确实需要 Mac 将 .NET 代码转换为“Objective-C”（对于知道编译过程的人来说，它是机器代码，但对于 OP，假设这一点更简单）。

您可以在 Windows 机器上使用 Visual Studio 进行编程，但您永远不会编译甚至运行或调试......您将始终需要[MonoDevelop](http://monodevelop.com/)（Mono 的 Visual Studio）和免费的 MonoTouch 许可证才能在 Mac iPhone 中运行和调试模拟器，但您需要付费许可证才能访问 AppStore。

只是为了澄清，您可以使用[Mono for Android](http://xamarin.com/monoforandroid)为 Android 开发一切，因为运行 Android 的框架适用于两种操作系统 (Java)，为此，您将能够使用 Visual Studio 进行编码、编译和运行安卓模拟器。

正如一开始所说的......你最好使用二手Mac :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:07:55.623

您确实可以在 PC 上为非 AppStore（越狱）目的进行 iOS 开发 - 您需要 Linux 或 Windows+MinGW 和开源工具链 - 我在[http://github.com/H2CO3/上编写了一些构建说明ios工具链](http://github.com/H2CO3/ios-toolchain)

另外，如果您从未做过任何 C 编程，我建议您获取一份 K&R C 的副本，并且在掌握 C 之后才开始使用 Objective-C，否则您会对基础知识感到困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:11:11.390

初学者的集中信息，您可以在那里获得：斯坦福大学的[“CS 193P iPhone 应用程序开发”](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/)。这是视频讲座和家庭作业的好地方。

你应该有mac（或hackintosh）。

编辑：课程也可在“iTunes U”中找到

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-07T07:53:07.143

正确的起点是 [https://developer.apple.com/](https://developer.apple.com/)

你真的需要一台 Mac 来为 Mac 开发。您可以使用 Hackintosh 进行 Mac 开发，但这样做可能是非法的。

要开发 iOS 和 Mac 应用程序，您将需要可以从 Mac App Store 下载的 Xcode IDE。

开发中心拥有您需要的所有文档。

iOS 开发中心：
[https ://developer.apple.com/devcenter/ios/index.action](https://developer.apple.com/devcenter/ios/index.action)

Mac 开发中心：
[https ://developer.apple.com/devcenter/mac/index.action](https://developer.apple.com/devcenter/mac/index.action)

如果您喜欢通过示例学习，一个好地方是
[http://appsamuck.com/](http://appsamuck.com/)

您还可以为 iPhone 构建 HTML 5 应用程序。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-07T07:57:28.670

我也是一个初学者。我一年前就开始了，并且为您提供了很好的信息，从哪里开始。

1.  Windows 上的 xCode：算了吧！您必须使用 Mac。
2.  我不明白你在这一点下需要知道什么..

* *3.* *有很多免费的好东西，如果你知道在哪里： 一个好的网站是[Ray Wenderlich](http://www.raywenderlich.com) 另一个选择是来自斯坦福大学的 iTunes U 上的 Potcasts。

遵循这一点一段时间，您将准备好制作您的一个项目！如果您需要帮助，这个网站就是一座金矿 :-)**

# javascript - 访问css3动画的关键帧

> ID：12313909
> 
> 赞同：2
> 
> 时间：2012-09-07T07:47:27.757
> 
> 标签：javascript, html, css

我发现`WebKitCSSKeyframesRule`window对象中有一个函数被调用，但是执行这个函数似乎会导致错误。有谁知道这个功能是如何工作的？有没有修改css3动画关键帧的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:18:14.550

`WebKitCSSKeyframesRule`不是函数：它是在解析样式表时在内部使用的*构造函数。*

要修改`@keyframes`规则，您必须先找到它：

```
var styleSheet = document.styleShees[0], keyframesRule;

for (var i = 0; i < styleSheet.cssRules.length; i++) {
    if (styleSheet.cssRules[i].type === CSSRule.WEBKIT_KEYFRAMES_RULE) {
        keyframesRule = styleSheet.cssRules[i];
        break;
    }
}
alert(keyframesRule instanceof WebKitCSSKeyframesRule); // alerts "true" 
```

有了规则后，您可以使用规则的`cssRules`属性和`addRule`,`deleteRule`方法修改、添加、删除框架规则，就像您通常使用常见样式表所做的那样：

```
for (var i = 0; i < keyframesRule.cssRules.length; i++)
    alert(keyframesRule.cssRules[i].keyText + " { "
            + keyframesRule.cssRules[i].style.cssText + " }"); 
```

这与 alerting 相同`keyframesRule.cssRules[i].cssText`。

显然，这都是*vendor prefixed*，所以对于 Firefox，你必须使用它`MozCSSKeyframesRule`，等等。

# node.js - [Node.js]loop通过native driver向mongodb插入1000000个文档，为什么node占用大量内存？

> ID：12313915
> 
> 赞同：3
> 
> 时间：2012-09-07T07:48:02.140
> 
> 标签：node.js, node-mongodb-native

我使用以下代码循环插入1000000个文档到mongodb，但我发现节点进程占用了大量内存，我的客户端已经死了。

```
db.collection("batch_insert", function (err, collection) {
    if (!err) {
        var count = 0;
        for (var i = 0; i < 1000000; i++) {
            collection.insert({hello:'world', ok:'OKOKOK'}, {safe:true, serializeFunctions:false}, function (err, result) {
                count++;
                if (1000000 == count) {
                    db.close();
                }
            });
        }
    } else {
        console.log(err);
    }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T08:11:39.330

你的`for`循环阻塞事件循环。`nextTick`直到所有查询都发送到`mongodb`. 您需要使用异步方式批量插入数据。像这样的东西：

```
var mongo = require('mongodb');

var Inserter = function (collection) {
    this.collection = collection;
    this.data = [];
    this.maxThreads = 6;
    this.currentThreads = 0;
    this.batchSize = 5000;
    this.queue = 0;
    this.inserted = 0;
    this.startTime = Date.now();
};

Inserter.prototype.add = function(data) {
    this.data.push(data);
};

// Use force=true for last insert
Inserter.prototype.insert = function(force) {
    var that = this;
    if (this.data.length >= this.batchSize || force) {
        if (this.currentThreads >= this.maxThreads) {
            this.queue++;
            return;
        }
        this.currentThreads++;
        console.log('Threads: ' + this.currentThreads);
        this.collection.insert(this.data.splice(0, this.batchSize), {safe:true}, function() {
            that.inserted += that.batchSize;
            var currentTime = Date.now();
            var workTime = Math.round((currentTime - that.startTime) / 1000)
            console.log('Speed: ' + that.inserted / workTime + ' per sec');
            that.currentThreads--;
            if (that.queue > 0) {
                that.queue--;
                that.insert();
            }
        });
    }
};

var db = new mongo.Db('test', new mongo.Server('localhost', 27017, {}), {native_parser:false});
db.open(function(err, db) {
    db.collection('test', function(err, collection) {
        var inserter = new Inserter(collection);
        setInterval(function() {
            for (var i = 0; i < 5000; i++) {
                inserter.add({test:'test'});
            }
            inserter.insert();
        }, 0);
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T08:03:12.140

mongodb 就像任何其他数据库一样，需要一些时间来处理请求。您正在向它抛出一百万个请求，并且由于您的代码块中没有任何内容，这意味着在任何时候它们中的一大堆都会在某个地方排队（很可能在多个地方，其中一些在驱动程序中）代码，其他在节点的事件循环中）。这需要更多的内存。

如果没有发生排队，您将阻止或丢弃一些请求。没有免费的午餐。

# java - java - 如何使用Java3D API在java中绘制简单的3D点（x，y，z）？

> ID：12313917
> 
> 赞同：6
> 
> 时间：2012-09-07T07:48:12.203
> 
> 标签：java, java-3d

我正在使用 Java 技术在 netbeans 平台上制作桌面应用程序。我做了一些图像处理、数据库功能、图像捕获过程；但现在我想在 3D 视图中绘制图像。
所以，我认为首先我必须制作我的 .tiff 16 位灰度图像的点数组，然后使用这个点数组。我尝试了一些东西，我的代码在下面，但它不起作用。
那么我应该如何使用这个点数组在 3D 视图中绘制我的图像呢？

```
import java.awt.BorderLayout;
import com.sun.j3d.utils.universe.*;
import java.awt.image.BufferedImage;
import javax.media.j3d.*;
import javax.media.jai.JAI;
import javax.media.jai.PlanarImage;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.vecmath.Color3f;
import javax.vecmath.Point3f;

public final class HelloJava3Da extends JPanel {

    PlanarImage plImg3 = JAI.create("fileload", "C:\\Users\\Desktop\\myImage.tiff");
    BufferedImage histImage = plImg3.getAsBufferedImage();
    int s = 0, count = 0;

    public HelloJava3Da() {
        setLayout(new BorderLayout());
        Canvas3D canvas3D = new Canvas3D(null);
        add("Center", canvas3D);

        BranchGroup scene = createSceneGraph();
        scene.compile();

        // SimpleUniverse is a Convenience Utility class
        SimpleUniverse simpleU = new SimpleUniverse(canvas3D);

        // This moves the ViewPlatform back a bit so the
        // objects in the scene can be viewed.
        simpleU.getViewingPlatform().setNominalViewingTransform();

        simpleU.addBranchGraph(scene);
    }
    public BranchGroup createSceneGraph() {
        BranchGroup lineGroup = new BranchGroup();
        Appearance app = new Appearance();
        ColoringAttributes ca = new ColoringAttributes(new Color3f(204.0f, 204.0f,          204.0f), ColoringAttributes.SHADE_FLAT);
        app.setColoringAttributes(ca);

        Point3f[] plaPts = new Point3f[histImage.getWidth()*histImage.getHeight()];

        for (int i = 0; i < histImage.getWidth(); i++) {
            for (int j = 0; j < histImage.getHeight(); j++) {
                s=histImage.getRaster().getSample(i, j, 0);
                plaPts[count] = new Point3f(i,j,s);
                count++;
            }
        }
        PointArray pla = new PointArray(histImage.getWidth()*histImage.getHeight(), GeometryArray.COORDINATES);
        pla.setCoordinates(0, plaPts);
        Shape3D plShape = new Shape3D(pla, app);
        TransformGroup objRotate = new TransformGroup();
        objRotate.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRotate.addChild(plShape);
        lineGroup.addChild(objRotate);
        return lineGroup;
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.add(new JScrollPane(new HelloJava3Da()));
        frame.setSize(300, 300);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-07T08:39:46.467

创建一个`SimpleUniverse`并`Canvas3D`使用`SimpleUniverse.getPreferredConfiguration()`GraphicsConfiguration 类。然后创建一个 BranchGraph。添加一个 TransformGraph 作为 BranchGraph 的子级。然后将您的 Shape3D 添加为 TransformGraph 的子项。Shape3D 必须有两件事：几何（你的点数组）和外观。从外观上，您制作了许多规格的材料和照明。

如果你只使用点数组，你只会看到点。如果你想填充多边形，应该使用 TriangleStripArray 或类似的东西，如果你想要线条，应该使用 LineStripArray。

使用 TransformGroup 进行旋转和平移。别忘了加光。

TransformGroup 需要一个 Transform3D 类作为参数来旋转和平移或缩放。

如果你的 Shape3D 是一个表面，你可以给它自定义颜色或使用材料并在它附近放一盏灯，否则你看不到它。不要忘记设置光源范围，以便光线到达对象。

*   PointArray--->云状形状
*   LineArray--->对于虚线
*   LineStripArray-->用于线条
*   TriangleArray--->离婚三角形（用于表面）
*   TriangleStripArray--->相邻三角形（用于表面）
*   TriangleFanArray---->就像围绕一个点构建三角形（对于一个表面）
*   QuadArray---->需要六个四边形有一个立方体
*   QuadStripArray--->可以构造一个坐标数组更小的立方体

另一个重要的事情：

```
simpleU.getViewingPlatform().getViewPlatform().setActivationRadius(300);
    SimpleU.getViewer().getView().setBackClipDistance ( 300.0 ); 
```

使您的观看范围更远，因此当您移动时物体不会消失。

将鼠标交互附加到您的变换组

```
 MouseRotate m1=new MouseRotate();
    MouseZoom m2=new MouseZoom();
    MouseTranslate m3=new MouseTranslate(); 
```

如果要将 1580 x 1050 图像映射到默认的 3D 视图范围，则应将点坐标除以 1000。（或在变换组中缩小到 1000）

寻找教程：

[http://www.java3d.org/](http://www.java3d.org/)

[http://www.java3d.org/tutorial.html](http://www.java3d.org/tutorial.html)

在这里，我将您的教程调整为 energon.class

```
//skipped imports(char limit in this post)
public final class energon extends JPanel {

    int s = 0, count = 0;

    public energon() {
        setLayout(new BorderLayout());
        GraphicsConfiguration gc=SimpleUniverse.getPreferredConfiguration();
        Canvas3D canvas3D = new Canvas3D(gc);//See the added gc? this is a preferred config
        add("Center", canvas3D);

        BranchGroup scene = createSceneGraph();
        scene.compile();

        // SimpleUniverse is a Convenience Utility class
        SimpleUniverse simpleU = new SimpleUniverse(canvas3D);

        // This moves the ViewPlatform back a bit so the
        // objects in the scene can be viewed.
        simpleU.getViewingPlatform().setNominalViewingTransform();

        simpleU.addBranchGraph(scene);
    }
    public BranchGroup createSceneGraph() {
        BranchGroup lineGroup = new BranchGroup();
        Appearance app = new Appearance();
        ColoringAttributes ca = new ColoringAttributes(new Color3f(204.0f, 204.0f,          204.0f), ColoringAttributes.SHADE_FLAT);
        app.setColoringAttributes(ca);

        Point3f[] plaPts = new Point3f[4];

        for (int i = 0; i < 2; i++) {
            for (int j = 0; j <2; j++) {
                plaPts[count] = new Point3f(i/10.0f,j/10.0f,0);
                //Look up line, i and j are divided by 10.0f to be able to
                //see the points inside the view screen
                count++;
            }
        }
        PointArray pla = new PointArray(4, GeometryArray.COORDINATES);
        pla.setCoordinates(0, plaPts);
        Shape3D plShape = new Shape3D(pla, app);
        TransformGroup objRotate = new TransformGroup();
        objRotate.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRotate.addChild(plShape);
        lineGroup.addChild(objRotate);
        return lineGroup;
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.add(new JScrollPane(new energon()));
        frame.setSize(300, 300);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

输出：

![在此处输入图像描述](../Images/e92767bc588f1eca96705831bea60a22.png)

好的，让我们添加一个磅值，以便我们可以清楚地看到它们（稍后会添加）

新代码（只添加了 2-3 行）

```
import java.awt.BorderLayout;
import java.awt.GraphicsConfiguration;

import com.sun.j3d.utils.universe.*;

import java.awt.image.BufferedImage;
import javax.media.j3d.*;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.vecmath.Color3f;
import javax.vecmath.Point3f;

public final class energon extends JPanel {

    int s = 0, count = 0;

    public energon() {
        setLayout(new BorderLayout());
        GraphicsConfiguration gc=SimpleUniverse.getPreferredConfiguration();
        Canvas3D canvas3D = new Canvas3D(gc);
        add("Center", canvas3D);

        BranchGroup scene = createSceneGraph();
        scene.compile();

        // SimpleUniverse is a Convenience Utility class
        SimpleUniverse simpleU = new SimpleUniverse(canvas3D);

        // This moves the ViewPlatform back a bit so the
        // objects in the scene can be viewed.
        simpleU.getViewingPlatform().setNominalViewingTransform();

        simpleU.addBranchGraph(scene);
    }
    public BranchGroup createSceneGraph() {
        BranchGroup lineGroup = new BranchGroup();
        Appearance app = new Appearance();
        ColoringAttributes ca = new ColoringAttributes(new Color3f(204.0f, 204.0f,          204.0f), ColoringAttributes.SHADE_FLAT);
        app.setColoringAttributes(ca);

        Point3f[] plaPts = new Point3f[4];

        for (int i = 0; i < 2; i++) {
            for (int j = 0; j <2; j++) {
                plaPts[count] = new Point3f(i/10.0f,j/10.0f,0);
                count++;
            }
        }
        PointArray pla = new PointArray(4, GeometryArray.COORDINATES);

        pla.setCoordinates(0, plaPts);
        //between here!
        PointAttributes a_point_just_bigger=new PointAttributes();
        a_point_just_bigger.setPointSize(10.0f);//10 pixel-wide point
        a_point_just_bigger.setPointAntialiasingEnable(true);//now points are sphere-like(not a cube)
        app.setPointAttributes(a_point_just_bigger);
        //and here! sets the point-attributes so it is easily seen.
        Shape3D plShape = new Shape3D(pla, app);
        TransformGroup objRotate = new TransformGroup();
        objRotate.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRotate.addChild(plShape);
        lineGroup.addChild(objRotate);
        return lineGroup;
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.add(new JScrollPane(new energon()));
        frame.setSize(300, 300);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

输出：

![在此处输入图像描述](../Images/5363b85d6bfcfc53d302fa435f26748d.png)

这是另一个使用 trianglestriparray 绘制一种箭头形状，同时您可以使用鼠标按钮（其中 3 个）进行放大、旋转和平移。

```
//skipped imports beause of char limit in this post
public final class energon extends JPanel {

    int s = 0, count = 0;

    public energon() {
        setLayout(new BorderLayout());
        GraphicsConfiguration gc=SimpleUniverse.getPreferredConfiguration();
        Canvas3D canvas3D = new Canvas3D(gc);
        add("Center", canvas3D);

        BranchGroup scene = createSceneGraph();
        scene.compile();

        // SimpleUniverse is a Convenience Utility class
        SimpleUniverse simpleU = new SimpleUniverse(canvas3D);

        // This moves the ViewPlatform back a bit so the
        // objects in the scene can be viewed.
        simpleU.getViewingPlatform().setNominalViewingTransform();

        simpleU.addBranchGraph(scene);
    }
    public BranchGroup createSceneGraph() {
        BranchGroup lineGroup = new BranchGroup();
        Appearance app = new Appearance();
        ColoringAttributes ca = new ColoringAttributes(new Color3f(204.0f, 204.0f,204.0f), ColoringAttributes.SHADE_FLAT);
        app.setColoringAttributes(ca);
        Point3f[] plaPts = new Point3f[5];
        for (int i = 0; i < 2; i++) {
            for (int j = 0; j <2; j++) {
                plaPts[count] = new Point3f(i/10.0f,j/10.0f,0);
                count++;
            }
        }
        plaPts[count] = new Point3f(3.0f/10.0f,2.0f/10.0f,0);
        int[]intArr=new int[5];
        intArr[0]=3;intArr[1]=4;intArr[2]=4;intArr[3]=3;intArr[4]=3;

        TriangleStripArray pla =new TriangleStripArray(20, GeometryArray.COLOR_3|GeometryArray.NORMALS|GeometryArray.COORDINATES,intArr);
        pla.setCoordinates(0, plaPts);
        PointAttributes a_point_just_bigger=new PointAttributes();
        a_point_just_bigger.setPointSize(10.0f);//10 pixel-wide point
        a_point_just_bigger.setPointAntialiasingEnable(true);//now points are sphere-like(not a cube)
        app.setPointAttributes(a_point_just_bigger);
        PolygonAttributes la=new PolygonAttributes();
        la.setPolygonMode(PolygonAttributes.POLYGON_FILL);
        la.setCullFace(PolygonAttributes.CULL_NONE);
        app.setPolygonAttributes(la);
        Material matt=new Material();
        matt.setAmbientColor(new Color3f(1,1,1));
        matt.setDiffuseColor(new Color3f(0.5f,0.5f,0.7f));
        matt.setEmissiveColor(new Color3f(0.2f,0.2f,0.3f));
        matt.setShininess(0.5f);
        matt.setSpecularColor(new Color3f(0.4f,0.6f,0.9f));
        matt.setLightingEnable(true);

        app.setMaterial(matt);
        RenderingAttributes ra=new RenderingAttributes();
        ra.setIgnoreVertexColors(true);
        app.setRenderingAttributes(ra);
        Shape3D plShape = new Shape3D(pla, app);

        TransformGroup objRotate = new TransformGroup();

        MouseRotate mr=new MouseRotate();
        mr.setTransformGroup(objRotate);
        mr.setSchedulingBounds(new BoundingSphere());
        lineGroup.addChild(mr);
        MouseZoom mz=new MouseZoom();
        mz.setTransformGroup(objRotate);
        mz.setSchedulingBounds(new BoundingSphere());
        lineGroup.addChild(mz);
        MouseTranslate msl=new MouseTranslate();
        msl.setTransformGroup(objRotate);
        msl.setSchedulingBounds(new BoundingSphere());
        lineGroup.addChild(msl);

        objRotate.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRotate.addChild(plShape);
        AmbientLight al=new AmbientLight();
      //  al.addScope(objRotate);
        al.setBounds(new BoundingSphere());
        al.setEnable(true);
        al.setColor(new Color3f(1,1,1));

        lineGroup.addChild(objRotate);
        lineGroup.addChild(al);
        return lineGroup;
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.add(new JScrollPane(new energon()));
        frame.setSize(300, 300);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

输出：

![在此处输入图像描述](../Images/90a12a1ee2d5e2c9d7909c12b91ea51d.png)

你想改变点的颜色吗？这是新版本：

```
//skipping imports..
public final class energon extends JPanel {

    int s = 0, count = 0;

    public energon() {
        setLayout(new BorderLayout());
        GraphicsConfiguration gc=SimpleUniverse.getPreferredConfiguration();
        Canvas3D canvas3D = new Canvas3D(gc);
        add("Center", canvas3D);

        BranchGroup scene = createSceneGraph();
        scene.compile();
        // SimpleUniverse is a Convenience Utility class
        SimpleUniverse simpleU = new SimpleUniverse(canvas3D);
        // This moves the ViewPlatform back a bit so the
        // objects in the scene can be viewed.
        simpleU.getViewingPlatform().setNominalViewingTransform();
        simpleU.addBranchGraph(scene);
    }
    public BranchGroup createSceneGraph() {
        BranchGroup lineGroup = new BranchGroup();
        Appearance app = new Appearance();
        ColoringAttributes ca = new ColoringAttributes(new Color3f(204.0f, 204.0f,          204.0f), ColoringAttributes.SHADE_FLAT);
        app.setColoringAttributes(ca);

        Point3f[] plaPts = new Point3f[4];
        Color3f[] colPts=new Color3f[4]; //parallel to coordinates, colors.
        for (int i = 0; i < 2; i++) {
            for (int j = 0; j <2; j++) {
                plaPts[count] = new Point3f(i/10.0f,j/10.0f,0);
                colPts[count]=new Color3f(i/3.0f,j/3.0f,(float) ((i+j)/3.0));//my arbitrary color set :)
                count++;
            }
        }
        PointArray pla = new PointArray(4, GeometryArray.COORDINATES|GeometryArray.COLOR_3);
        pla.setColors(0,colPts); //this is the color-array setting
        pla.setCoordinates(0, plaPts); 
        //between here!
        PointAttributes a_point_just_bigger=new PointAttributes();
        a_point_just_bigger.setPointSize(10.0f);//10 pixel-wide point

        a_point_just_bigger.setPointAntialiasingEnable(true);//now points are sphere-like(not a cube)
        app.setPointAttributes(a_point_just_bigger);
        //and here! sets the point-attributes so it is easily seen.
        Shape3D plShape = new Shape3D(pla, app);
        TransformGroup objRotate = new TransformGroup();
        objRotate.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRotate.addChild(plShape);
        lineGroup.addChild(objRotate);
        return lineGroup;
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.add(new JScrollPane(new energon()));
        frame.setSize(300, 300);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

输出：

![在此处输入图像描述](../Images/ee9c8d56bc3eb162b630c8199a60a725.png)

具有自定义立方体形状和两个具有 lft 鼠标按钮交互的定向灯的新示例：

```
//skipped imports relating with char limit in this post
public final class energon extends JPanel {
    int s = 0, count = 0;

    public energon() {

        setLayout(new BorderLayout());
        GraphicsConfiguration gc=SimpleUniverse.getPreferredConfiguration();
        Canvas3D canvas3D = new Canvas3D(gc);
        add("Center", canvas3D);

        BranchGroup scene = createSceneGraph();
        scene.compile();

        // SimpleUniverse is a Convenience Utility class
        SimpleUniverse simpleU = new SimpleUniverse(canvas3D);

        // This moves the ViewPlatform back a bit so the
        // objects in the scene can be viewed.
        simpleU.getViewingPlatform().setNominalViewingTransform();

        simpleU.addBranchGraph(scene);
    }
    public BranchGroup createSceneGraph() {
        BranchGroup lineGroup = new BranchGroup();
        Appearance app = new Appearance();

        QuadArray lsa = new QuadArray(48,QuadArray.COORDINATES|QuadArray.NORMALS);
        Vector3f [] normals=new Vector3f[24];
        for(int i=0;i<24;i++)normals[i]=new Vector3f();
        Point3f [] pts=new Point3f[24];
        for(int i=0;i<24;i++)pts[i]=new Point3f();
        Color3f [] clrs=new Color3f[24];
        for(int i=0;i<24;i++)clrs[i]=new Color3f(0.5f,0.5f,0.5f);
        //cube=6 quads 
        //first quad
        pts[0].x=-0.5f;pts[0].y=-0.5f;pts[0].z=-0.5f;
        pts[1].x=-0.5f;pts[1].y=-0.5f;pts[1].z=0.5f;
        pts[2].x=-0.5f;pts[2].y=0.5f;pts[2].z=0.5f;
        pts[3].x=-0.5f;pts[3].y=0.5f;pts[3].z=-0.5f;
        normals[0].x=-1;normals[1].x=-1;normals[2].x=-1;normals[3].x=-1;
        //second quad
        pts[4].x=0.5f;pts[4].y=-0.5f;pts[4].z=-0.5f;
        pts[5].x=0.5f;pts[5].y=-0.5f;pts[5].z=0.5f;
        pts[6].x=0.5f;pts[6].y=0.5f;pts[6].z=0.5f;
        pts[7].x=0.5f;pts[7].y=0.5f;pts[7].z=-0.5f;
        normals[4].x=1;normals[5].x=1;normals[6].x=1;normals[7].x=1;

        //third quad
        pts[8].x=-0.5f;pts[8].y=-0.5f;pts[8].z=-0.5f;
        pts[9].x=0.5f;pts[9].y=-0.5f;pts[9].z=-0.5f;
        pts[10].x=0.5f;pts[10].y=0.5f;pts[10].z=-0.5f;
        pts[11].x=-0.5f;pts[11].y=0.5f;pts[11].z=-0.5f;
        normals[8].z=-1;normals[9].z=-1;normals[10].z=-1;normals[11].z=-1;
        //fourth quad
        pts[12].x=-0.5f;pts[12].y=-0.5f;pts[12].z=0.5f;
        pts[13].x=0.5f;pts[13].y=-0.5f;pts[13].z=0.5f;
        pts[14].x=0.5f;pts[14].y=0.5f;pts[14].z=0.5f;
        pts[15].x=-0.5f;pts[15].y=0.5f;pts[15].z=0.5f;
        normals[12].z=1;normals[13].z=1;normals[14].z=1;normals[15].z=1;
        //fifth quad
        pts[16].x=-0.5f;pts[16].y=-0.5f;pts[16].z=-0.5f;
        pts[17].x=-0.5f;pts[17].y=-0.5f;pts[17].z=0.5f;
        pts[18].x=0.5f;pts[18].y=-0.5f;pts[18].z=0.5f;
        pts[19].x=0.5f;pts[19].y=-0.5f;pts[19].z=-0.5f;
        normals[16].y=-1;normals[17].y=-1;normals[18].y=-1;normals[19].y=-1;
        //sixth quad
        pts[20].x=-0.5f;pts[20].y=0.5f;pts[20].z=-0.5f;
        pts[21].x=-0.5f;pts[21].y=0.5f;pts[21].z=0.5f;
        pts[22].x=0.5f;pts[22].y=0.5f;pts[22].z=0.5f;
        pts[23].x=0.5f;pts[23].y=0.5f;pts[23].z=-0.5f;
        normals[20].y=1;normals[21].y=1;normals[22].y=1;normals[23].y=1;
        lsa.setNormals(0, normals);
        lsa.setCoordinates(0, pts);
        Shape3D sh=new Shape3D();
        PolygonAttributes pa=new PolygonAttributes();
        pa.setPolygonMode(PolygonAttributes.POLYGON_FILL);
        pa.setCullFace(PolygonAttributes.CULL_NONE);
        Material mat=new Material();
        mat.setEmissiveColor(new Color3f(0.5f,0.5f,0.5f));
        mat.setAmbientColor(new Color3f(0.1f,0.1f,0.1f));
        mat.setDiffuseColor(new Color3f(0.2f,0.3f,0.4f));
        mat.setSpecularColor(new Color3f(0.6f,0.3f,0.2f));
        mat.setLightingEnable(true);
        RenderingAttributes ra=new RenderingAttributes();
        ra.setIgnoreVertexColors(true);
        ColoringAttributes ca=new ColoringAttributes();
        ca.setShadeModel(ColoringAttributes.SHADE_GOURAUD);
        ca.setColor(new Color3f(0.2f,0.5f,0.9f));
        app.setColoringAttributes(ca);
        app.setRenderingAttributes(ra);   
        app.setMaterial(mat);
        app.setPolygonAttributes(pa);
        sh.setGeometry(lsa);
        sh.setAppearance(app);
        sh.setPickable(true); 
        TransformGroup objRotate = new TransformGroup();
        objRotate.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRotate.addChild(sh);

        DirectionalLight light1=new DirectionalLight();
        light1.setInfluencingBounds(new BoundingSphere(new Point3d(-5.0,0,0),10.0));
        light1.setColor(new Color3f(1f,1f,1f));
        light1.setDirection(new Vector3f(0,1,0));
        objRotate.addChild(light1);
        DirectionalLight light2=new DirectionalLight();
        light2.setInfluencingBounds(new BoundingSphere(new Point3d(5.0,0,0),10.0));
        light2.setColor(new Color3f(0.5f,1f,0.5f));
        light2.setDirection(new Vector3f(0,-1,0));
        objRotate.addChild(light2);
        MouseRotate f1=new MouseRotate();
        f1.setSchedulingBounds(new BoundingSphere());
        f1.setTransformGroup(objRotate);
        lineGroup.addChild(f1);
        objRotate.addChild(new Sphere(0.60f,1,128));
        lineGroup.addChild(objRotate);
        return lineGroup;
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.add(new JScrollPane(new energon()));
        frame.setSize(300, 300);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

输出：

![在此处输入图像描述](../Images/fff0d990fe4d552113c22cad6c973e4f.png)

**最重要的部分是，您可以使用 triangulator 仅使用点坐标获得真正的 3D 形状**

```
 GeometryInfo ginfo=new GeometryInfo(GeometryInfo.POLYGON_ARRAY);
        Triangulator tr = new Triangulator();
        NormalGenerator normalGenerator = new NormalGenerator();
        Stripifier st = new Stripifier();  
        int [] iint=new int[]{4,4,4,4,4,4};-->each face of cube has 4 points
        ginfo.setStripCounts(iint);
        ginfo.setCoordinates(pts); 
        tr.triangulate(ginfo); // ginfo contains the geometry     
        normalGenerator.generateNormals( ginfo );
        st.stripify(ginfo);
        sh.setGeometry(ginfo.getGeometryArray()); // shape is a Shape3D.
        //now you can use Shape3D-type sh as a 3D-surface-containing shape 
```

在最后一个示例中，您必须使用四元组，但现在，您可以仅使用点和三角测量器来执行相同操作：

```
//skipping imports since char limit is reached in this answer
public final class energon extends JPanel {
    int s = 0, count = 0;
    public energon() {
        setLayout(new BorderLayout());
        GraphicsConfiguration gc=SimpleUniverse.getPreferredConfiguration();
        Canvas3D canvas3D = new Canvas3D(gc);
        add("Center", canvas3D);
        BranchGroup scene = createSceneGraph();
        scene.compile();
        // SimpleUniverse is a Convenience Utility class
        SimpleUniverse simpleU = new SimpleUniverse(canvas3D);
        // This moves the ViewPlatform back a bit so the
        // objects in the scene can be viewed.
        simpleU.getViewingPlatform().setNominalViewingTransform();
        simpleU.addBranchGraph(scene);
    }
    public BranchGroup createSceneGraph() {
        BranchGroup lineGroup = new BranchGroup();
        Appearance app = new Appearance();
        Vector3f [] normals=new Vector3f[24];
        for(int i=0;i<24;i++)normals[i]=new Vector3f();
        Point3f [] pts=new Point3f[24];
        for(int i=0;i<24;i++)pts[i]=new Point3f();
        Color3f [] clrs=new Color3f[24];
        for(int i=0;i<24;i++)clrs[i]=new Color3f(0.5f,0.5f,0.5f);
        //cube=6 quads 
        //first quad
        pts[0].x=-0.5f;pts[0].y=-0.5f;pts[0].z=-0.5f;
        pts[1].x=-0.5f;pts[1].y=-0.5f;pts[1].z=0.5f;
        pts[2].x=-0.5f;pts[2].y=0.5f;pts[2].z=0.5f;
        pts[3].x=-0.5f;pts[3].y=0.5f;pts[3].z=-0.5f;
        normals[0].x=-1;normals[1].x=-1;normals[2].x=-1;normals[3].x=-1;
        //second quad
        pts[4].x=0.5f;pts[4].y=-0.5f;pts[4].z=-0.5f;
        pts[5].x=0.5f;pts[5].y=-0.5f;pts[5].z=0.5f;
        pts[6].x=0.5f;pts[6].y=0.5f;pts[6].z=0.5f;
        pts[7].x=0.5f;pts[7].y=0.5f;pts[7].z=-0.5f;
        normals[4].x=1;normals[5].x=1;normals[6].x=1;normals[7].x=1;
        //third quad
        pts[8].x=-0.5f;pts[8].y=-0.5f;pts[8].z=-0.5f;
        pts[9].x=0.5f;pts[9].y=-0.5f;pts[9].z=-0.5f;
        pts[10].x=0.5f;pts[10].y=0.5f;pts[10].z=-0.5f;
        pts[11].x=-0.5f;pts[11].y=0.5f;pts[11].z=-0.5f;
        normals[8].z=-1;normals[9].z=-1;normals[10].z=-1;normals[11].z=-1;
        //fourth quad
        pts[12].x=-0.5f;pts[12].y=-0.5f;pts[12].z=0.5f;
        pts[13].x=0.5f;pts[13].y=-0.5f;pts[13].z=0.5f;
        pts[14].x=0.5f;pts[14].y=0.5f;pts[14].z=0.5f;
        pts[15].x=-0.5f;pts[15].y=0.5f;pts[15].z=0.5f;
        normals[12].z=1;normals[13].z=1;normals[14].z=1;normals[15].z=1;
        //fifth quad
        pts[16].x=-0.5f;pts[16].y=-0.5f;pts[16].z=-0.5f;
        pts[17].x=-0.5f;pts[17].y=-0.5f;pts[17].z=0.5f;
        pts[18].x=0.5f;pts[18].y=-0.5f;pts[18].z=0.5f;
        pts[19].x=0.5f;pts[19].y=-0.5f;pts[19].z=-0.5f;
        normals[16].y=-1;normals[17].y=-1;normals[18].y=-1;normals[19].y=-1;
        //sixth quad
        pts[20].x=-0.5f;pts[20].y=0.5f;pts[20].z=-0.5f;
        pts[21].x=-0.5f;pts[21].y=0.5f;pts[21].z=0.5f;
        pts[22].x=0.5f;pts[22].y=0.5f;pts[22].z=0.5f;
        pts[23].x=0.5f;pts[23].y=0.5f;pts[23].z=-0.5f;
        normals[20].y=1;normals[21].y=1;normals[22].y=1;normals[23].y=1;
        Shape3D sh=new Shape3D();
        PolygonAttributes pa=new PolygonAttributes();
        pa.setPolygonMode(PolygonAttributes.POLYGON_FILL);
        pa.setCullFace(PolygonAttributes.CULL_NONE);
        Material mat=new Material();
        mat.setEmissiveColor(new Color3f(0.5f,0.5f,0.5f));
        mat.setAmbientColor(new Color3f(0.1f,0.1f,0.1f));
        mat.setDiffuseColor(new Color3f(0.2f,0.3f,0.4f));
        mat.setSpecularColor(new Color3f(0.6f,0.3f,0.2f));
        mat.setLightingEnable(true);
        RenderingAttributes ra=new RenderingAttributes();
        ra.setIgnoreVertexColors(true);
        ColoringAttributes ca=new ColoringAttributes();
        ca.setShadeModel(ColoringAttributes.SHADE_GOURAUD);
        ca.setColor(new Color3f(0.2f,0.5f,0.9f));
        app.setColoringAttributes(ca);
        app.setRenderingAttributes(ra);
        app.setMaterial(mat);
        app.setPolygonAttributes(pa);
        sh.setAppearance(app);
        sh.setPickable(true);
        GeometryArray ga=null;
        GeometryInfo ginfo=new GeometryInfo(GeometryInfo.POLYGON_ARRAY);
        Triangulator tr = new Triangulator();
        NormalGenerator normalGenerator = new NormalGenerator();
        Stripifier st = new Stripifier();  
        int [] iint=new int[]{4,4,4,4,4,4};
        ginfo.setStripCounts(iint);
        ginfo.setCoordinates(pts); 
        tr.triangulate(ginfo); // ginfo contains the geometry     
        normalGenerator.generateNormals( ginfo );
        st.stripify(ginfo);
        sh.setGeometry(ginfo.getGeometryArray()); // shape is a Shape3D.
        TransformGroup objRotate = new TransformGroup();
        objRotate.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRotate.addChild(sh);   
        DirectionalLight light1=new DirectionalLight();
        light1.setInfluencingBounds(new BoundingSphere(new Point3d(-5.0,0,0),10.0));
        light1.setColor(new Color3f(1f,1f,1f));
        light1.setDirection(new Vector3f(0,1,0));
        objRotate.addChild(light1);
        DirectionalLight light2=new DirectionalLight();
        light2.setInfluencingBounds(new BoundingSphere(new Point3d(5.0,0,0),10.0));
        light2.setColor(new Color3f(0.5f,1f,0.5f));
        light2.setDirection(new Vector3f(0,-1,0));
        objRotate.addChild(light2);
        MouseRotate f1=new MouseRotate();
        f1.setSchedulingBounds(new BoundingSphere());
        f1.setTransformGroup(objRotate);
        lineGroup.addChild(f1);
        objRotate.addChild(new Sphere(0.60f,1,128));
        lineGroup.addChild(objRotate);
        return lineGroup;
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.add(new JScrollPane(new energon()));
        frame.setSize(300, 300);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

输出：一样！你只需给出点的坐标和面顶点数

![在此处输入图像描述](../Images/9493fe3d76be3e61ac7c998f9bed924b.png)![在此处输入图像描述](../Images/2aed2220eebecca6f8d9ad66dac4d9c6.png)

*   设置条数
*   设置坐标（来自你的 tiff）
*   三角测量
*   生成法线
*   剥离
*   .getGeometry(完成)

# mysql - 如果列值不在一组不同列的值中，则 SQL 选择行

> ID：12313918
> 
> 赞同：3
> 
> 时间：2012-09-07T07:48:24.383
> 
> 标签：mysql, sql, join, group-by, hive

对于每个**标识符**，当 **收到**的国家不等于任何一个**交付**的国家时，我该如何退回**数量**？由于我的表很大，因此我需要对以下步骤进行有效查询。

 ****这些是我认为可以做到这一点的步骤，当然你不需要遵循它们:)

1.  为每个标识符创建一组“已交付”国家/地区。
2.  查看每个标识符的“已收到”是否是这些国家中的任何一个。如果没有匹配，则返回此结果。

起始表：

```
identifier         delivered            received        quantity
-------------      ------------         -----------     ------------
1                  USA                  France          432
1                  France               USA             450
1                  Ireland              Russia          100
2                  Germany              Germany         1,034
3                  USA                  France          50
3                  USA                  USA             120 
```

结果：

```
identifier         delivered            received        quantity
-------------      ------------         -----------     ------------
1                  Ireland              Russia          100 
```

起始表大约有 30,000,000 行，因此不幸的是，自联接是不可能的。我正在使用类似于 MySQL 的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T07:55:28.890

我认为`LEFT JOIN`查询应该适合你：

```
SELECT a.*
FROM starting a
     LEFT JOIN starting b
        ON a.id = b.id
           AND a.delivered = b.received
WHERE b.received IS NULL; 
```

# 示例：[SQLFiddle](http://sqlfiddle.com/#!2/66195/1)

为了优化上述查询，添加以下复合索引应该会给你更好的性能：

```
ALTER TABLE starting  ADD KEY ix1(id, delivered, received); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:11:12.543

您可以使用`not exists`子查询：

```
SELECT  a.*
FROM    starting a
WHERE   NOT EXISTS
        (
        SELECT  *
        FROM    starting b
        WHERE   a.id = b.id
                AND a.delivered = b.received
        ) 
```

这不是自联接，但查询优化器可以自由地执行它（通常会这样做。）****

# debugging - 如何正确地 mod_rewrite

> ID：12313921
> 
> 赞同：1
> 
> 时间：2012-09-07T07:48:54.450
> 
> 标签：debugging, mod-rewrite, mod-proxy

我在 ubuntu 10.4 上使用 apache2 + tomcat。我在 Tomcat 服务器上运行，该服务器的 webapps 在 8080 上侦听

“http://internal:8080/dir/name-privatewebapp/”
“http://internal:8080/dir/name-publicwebapp/”

面向外部的 Apache 服务器正在代理域的请求。

我想将 "subdomain" 重新映射到 "domain.com/subdomain" ，因此任何其他请求都将被代理到适当的路径 / webapp

```
web.john-doe.domain.com  --->  www.domain.com/web/john-doe 

http://www.john-doe.com  --->   www.domain.com/web/john-doe
http://www.foo-bar.com  --->  www.domain.com/web/foo-bar 
```

我无法单独使用 mod_rewrite 。我一直在研究 mod_proxy、mod_proxy_ajp 和 mod_rewrite

我希望服务器

1.  从域中获取子域
2.  确保子域不是 www、w 或 ww
3.  在重写之前检查目录是否真的存在于“www.domain.com”上
4.  如果目录不存在，它将保持为野域
5.  最后，如果目录存在实际重写

我检查了几个链接并研究了[http://www.askapache.com/htaccess/crazy-advanced-mod_rewrite-tutorial.html上的教程](http://www.askapache.com/htaccess/crazy-advanced-mod_rewrite-tutorial.html)

这是没有成功的。

我遵循了这个 illumin-it.servehttp.com/wordpress/2012/01/redirecting-to-as-using-apache/ 并取得了一些成功。

但是，我希望服务器通过重写和代理即时执行此操作，而无需编辑每个子域的虚拟主机。

这是我更新的虚拟主机文件

```
<VirtualHost *:80>
ServerAdmin webmaster@localhost
ServerName www.domain.com
ServerAlias www.domain.com domain.com *.domain.com
RedirectPermanent / http://www.domain.com
DocumentRoot /var/www
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory /var/www/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
<IfModule mod_rewrite.c>    
    Options +FollowSymLinks
    Options +Indexes

    RewriteEngine On
    RewriteBase /

    # Prevent looping this rule
#       RewriteCond %{ENV:REDIRECT_STATUS} !200
#       RewriteCond %{HTTP_HOST} !www.domain.com$ [NC]
#       RewriteCond %{HTTP_HOST} ^(www\.)?([a-z0-9.-]+).domain.com$ [NC]
#       RewriteRule (.*) /%2/$1 [L]

    # change the "." in the path to "/"
#       RewriteRule ^(.*)\.(.*)/(.*)$ /$1/$2/$3 [L]

    #redirect domain.com to www.domain.com
    RewriteCond %{HTTP_HOST} !^domain\.com$ [NC]
    RewriteRule ^ http://www.domain.com%{REQUEST_URI} [R=301,NC]
</IfModule> 
</Directory>

ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
<Directory "/usr/lib/cgi-bin">
    AllowOverride None
    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
    Order allow,deny
    Allow from all
</Directory>

ErrorLog /var/log/apache2/error.log

# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
LogLevel warn

CustomLog /var/log/apache2/access.log combined

Alias /doc/ "/usr/share/doc/"
<Directory "/usr/share/doc/">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
    Allow from 127.0.0.0/255.0.0.0 ::1/128
</Directory>
<Proxy *>
Order deny,allow
Allow from all
</Proxy>

#   ErrorLog /var/log/apache2/webapp_error.log
#   LogLevel warn
#   CustomLog /var/log/apache2/webapp_access.log combined

ProxyPass / ajp://localhost:8009/
ProxyPassReverse / ajp://localhost:8009/

#   ProxyPass        /user/ http://localhost:8080/user/privatewebapp/
#   ProxyPassReverse /user/ http://localhost:8080/user/privatewebapp/
#
#   ProxyPass        /publicweb/ http://localhost:8080/dir/publicwebapp/
#   ProxyPassReverse /publicweb/ http://localhost:8080/dir/publicwebapp/
#
#   ProxyPass        / http://localhost:8080/dir/publicwebapp/
#   ProxyPassReverse / http://localhost:8080/dir/publicwebapp/

ServerName www.domain2.com
ProxyRequests Off
ProxyPreserveHost On

RewriteEngine On
RewriteCond %{HTTP_HOST} ^dir/publicwebapp$ [NC]
RewriteRule ^(.*)$ http://www.domain2.com/$1 [R=301,L]
<Location / >
Order deny,allow
Allow from all
RedirectMatch ^/$ /dir/publicwebapp/
ProxyPass ajp://localhost:8009/
ProxyPassReverse ajp://localhost:8009/
</Location>
</VirtualHost> 
```

我也试过... [http://httpd.apache.org/docs/2.0/rewrite/rewrite_guide.html](http://httpd.apache.org/docs/2.0/rewrite/rewrite_guide.html)

假设 www.username.host.com/anypath 内部映射到 www.host.com/home/username/anypath

作为使用 Java 服务器创建的站点应用程序，我认为仅使用 mod_rewrite 是行不通的。

虚拟用户主机

```
RewriteCond   %{HTTP_HOST}                 ^www\.[^.]+\.host\.com$
RewriteRule   ^(.+)                        %{HTTP_HOST}$1          [C]
RewriteRule   ^www\.([^.]+)\.host\.com(.*) /home/$1$2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:06:49.317

在类似的情况下，我通常会在 webroot (/var/www/.htaccess) 中的 .htaccess 中添加这样的内容：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{HTTP_HOST} subdomain1.domain.com
RewriteCond %{REQUEST_URI} !^/subdomain1
RewriteRule ^(.*)$ one/$1 [L]

RewriteCond %{HTTP_HOST} subdomain2.domain.com
RewriteCond %{REQUEST_URI} !^/subdomain2
RewriteRule ^(.*)$ two/$1 [L]

RewriteRule    ^$ /    [L]
RewriteRule    (.*) /$1 [L]
</IfModule> 
```

所以我有

```
subdomain1.servername.com -> /var/www/subdomain1
subdomain2.servername.com -> /var/www/subdomain2 
servername.com -> /var/www 
```

也许这会对你有所帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:24:03.730

您的第一组规则：

```
#redirect domain.com to www.domain.com
RewriteCond %{HTTP_HOST} !^www\.domain\.com$ [NC]
RewriteRule .+ http://www.domain.com%{REQUEST_URI} [R=301,NC] 
```

如果您没有空请求，则会取代您拥有的任何子域。第二组规则接近你想要的。但是它们会循环，并且不会将多个子域条目转换为目录路径，因此请尝试**首先**放置这组规则：

```
# Prevent looping this rule
RewriteCond %{ENV:REDIRECT_STATUS} !200
RewriteCond %{HTTP_HOST} !www.domain.com$ [NC]
RewriteCond %{HTTP_HOST} ^(www\.)?([a-z0-9.-]+).domain.com$ [NC]
RewriteRule (.*) /%2/$1 [L]

# change the "." in the path to "/"
RewriteRule ^(.*)\.(.*)/(.*)$ /$1/$2/$3 [L] 
```

然后将您的“非 www 到 www”规则更改为此（并放在上述规则之后）：

```
#redirect domain.com to www.domain.com
RewriteCond %{HTTP_HOST} !^domain\.com$ [NC]
RewriteRule ^ http://www.domain.com%{REQUEST_URI} [R=301,NC] 
```

# active-directory - 用于 Microsoft AD 的 LDAP 嵌套组过滤器

> ID：12313922
> 
> 赞同：2
> 
> 时间：2012-09-07T07:49:04.277
> 
> 标签：active-directory

我想编写一个搜索过滤器，它可以帮助我检索用户所属的所有组。

例如：假设我正在检索用户 A（属于 A 组）的条目。A组可能是B组的一部分，而D组又可能是E组的一部分。

现在，我的搜索过滤器应该将 MemberOf 属性作为用户 A 所属的所有可能组返回给我（在这种特定情况下，它是组 A、B、D、E）。

关于搜索过滤器的外观的任何指示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:27:48.353

这应该可以满足您的要求。它将返回用户所属的每个组的 FDN，但是，这会查询组，而不是用户。

例如，要查找 "CN=John Smith,DC=MyDomain,DC=NET" 所属的所有组，请将 base 设置为组容器 DN；例如 (OU=groupsOU,DC=MyDomain,DC=NET) 和子树的范围，并使用以下过滤器。

(成员:1.2.840.113556.1.4.1941:=(CN=John Smith,DC=MyDomain,DC=NET))

-吉姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:12:26.450

用户对象中有一个名为[tokenGroups的属性。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680275%28v=vs.85%29.aspx)它是由 Active Directory 在运行时计算的构造属性。它包括用户对象所属的所有组。

确保您的域有一个全局目录，并确保您使用的帐户是 Pre-Windows 2000 Compatible Access 组。然后，确保`tokenGroups`被指定为返回的属性之一。对用户对象进行基本范围搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-13T14:24:41.967

您可以使用 adfind.exe (joeware) 来解决此问题并使用此处描述的标准 ldap 过滤器。例如：

[http://social.technet.microsoft.com/wiki/contents/articles/5392.active-directory-ldap-syntax-filters.aspx](http://social.technet.microsoft.com/wiki/contents/articles/5392.active-directory-ldap-syntax-filters.aspx)

组嵌套指定如下：

```
(member:1.2.840.113556.1.4.1941:=cn=Jim Smith,ou=West,dc=Domain,dc=com) 
```

如果你使用 adfind，那么它看起来像这样：

```
adfind -f "(member:1.2.840.113556.1.4.1941:=cn=Jim Smith,ou=West,dc=Domain,dc=com)" samaccountname -list 
```

如果您想要输出 samaccountname 以外的输出，例如显示名称或邮件属性，只需添加到列表中即可。此外，如果您想搜索多个用户，那么您可能需要包含所有用户的输入文件和一些脚本来提取每一行以进行查找。

# jquery - 将var更改为级联动画jQuery

> ID：12313925
> 
> 赞同：1
> 
> 时间：2012-09-07T07:49:28.783
> 
> 标签：jquery

我在 jQuery 中有一个级联动画。问题是：进入 div 我有两个不同的元素，两个不同的类：linguetta_small，linguetta。如果要 aniamte 的元素具有类“linguetta”，则边距必须为 5px，如果类为 linguetta_small，则剩余边距必须为 40px。我怎样才能做到这一点？这是我的html

```
<div id="linguetta_next">
    <div class="linguetta" id="linguetta_next1 moved" style="margin-left:100%;">
        <p class="tit_linguetta">azienda</p>
    </div>
    <div class="linguetta_small" id="linguetta_next2 moved" style="margin-left:100%; margin-top:10px; background:#b0f271;">
        <p class="tit_linguetta_small">staff</p>
    </div>
    <div class="linguetta_small" id="linguetta_next3 moved" style="margin-left:100%; margin-top:10px; background:#0a5a0a;">
        <p class="tit_linguetta_small" style="color:#fff;">risorse umane</p>
     </div>
 </div> 
```

这是我的 jQuery 代码：

```
function movePageCenter(id, old_id) {
    var margin = "1%";
    $("#linguetta_next div").each(function(i) {
        var el = $(this);
        setTimeout(function() {
            el.animate({
                marginLeft: margin
            }, 400, function() {
                if (el.next(".linguetta_small").hasClass('linguetta_small')) {
                    margin = "40px";
                }
                else {
                    if (el.next(".linguetta").hasClass('linguetta')) {
                        margin = "5px";
                    }
                }
            });
        }, i * 200);
    });

});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:59:51.663

使用 each() 我们遍历每个适合我们选择的元素。您不必考虑下一个要动画的元素，您可以单独处理每个元素。

因此，对于每个元素，我们都会检查它具有哪个类并相应地设置边距。

jQuery 还有一个非常好的函数，叫做延迟，它比 setTimeout 函数更容易使用。

```
$("#linguetta_next div").each(function(i) {

       var $el = $(this);
       var margin;   

       if ($el.hasClass('linguetta_small')) {
           margin = 40;
        } else {
           margin = 5;
       }

        $el.delay( i * 200).animate({ 'margin-left': margin }, 400);
}); 
```

# android - android - “您的设备与此版本不兼容”

> ID：12313927
> 
> 赞同：5
> 
> 时间：2012-09-07T07:49:40.003
> 
> 标签：android

我在 Play 商店中放置了一个应用程序，而我的朋友正在运行 4.1（Nexus 7），在尝试安装我的应用程序时收到以下消息：“您的设备与此版本不兼容”。这是怎么来的？请任何人帮助我。

```
Manifeast file

< ?xml version="1.0" encoding="utf-8"?>

< manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.ibkr.pcg"
      android:versionCode="3"
      android:versionName="1.1">

< uses-sdk android:minSdkVersion="7"  
      android:targetSdkVersion="8"/>
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
<uses-permission android:name="android.permission.CAMERA" />        
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" ></uses-permission>  

<!-- C2DM Permissions Start -->
 <!-- Only this application can receive the messages and registration result --> 
<permission android:name="com.ibkr.pcg.permission.C2D_MESSAGE" android:protectionLevel="signature" />
<uses-permission android:name="com.ibkr.pcg.permission.C2D_MESSAGE" /> 

 <!-- This app has permission to register and receive message -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<!-- End of the C2DM Permissions -->

<application android:icon="@drawable/pcgicon" 
    android:label="@string/app_name" 
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
    android:name="MyApplication"
    android:debuggable="true">
    <activity android:name=".PriceCheckGuruSplash"
              android:label="@string/app_name">      
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />    
        </intent-filter>  
    </activity>

     <!-- Only C2DM servers can send messages for the app. If permission is not set - any other app can generate it --> 
    <receiver
     android:name=".C2DMMessageReciever" android:permission="com.google.android.c2dm.permission.SEND" >
      <!-- Receive the actual message -->
     <intent-filter >
            <action android:name="com.google.android.c2dm.intent.RECEIVE" >  
            </action>
            <category android:name="com.ibkr.pcg" /> 
        </intent-filter>
    </receiver>

   <receiver
        android:name=".C2DMRegistrationReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter >
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" >
            </action>
            <category android:name="com.ibkr.pcg" />
        </intent-filter>
    </receiver>

    <activity android:name="MessageReceivedActivty" android:screenOrientation="portrait"/>
    <activity android:name="LoginScreen" android:screenOrientation="portrait"> </activity>
    <activity android:name="RegistrationScreen" android:screenOrientation="portrait"> </activity>
    <activity android:name="ForgotPasswordScreen" android:screenOrientation="portrait"> </activity>
    <activity android:name="UserPreferences" android:screenOrientation="portrait"> </activity>
    <activity android:name="TrackedItems" android:screenOrientation="portrait"> </activity> 
    <activity android:name="WebPage" android:screenOrientation="portrait"> </activity>
    <activity android:name="CustomTabActivity" android:screenOrientation="portrait"> </activity>
    <activity android:name="TabGroup1Activity" android:screenOrientation="portrait"> </activity>
    <activity android:name="TabGroup2Activity" android:screenOrientation="portrait"> </activity>
    <activity android:name="TabGroup3Activity" android:screenOrientation="portrait"> </activity>
    <activity android:name="TabGroup4Activity" android:screenOrientation="portrait"> </activity>
    <activity android:name="SearchScreen" android:screenOrientation="portrait"> </activity>
    <activity android:name="SearchResultsScreen" android:screenOrientation="portrait"></activity>
    <activity android:name="ProductDisplay" android:screenOrientation="portrait"></activity>
    <activity android:name="VendorsDisplay" android:screenOrientation="portrait"></activity>
    <activity android:name="Filter" android:screenOrientation="portrait"></activity>
    <activity android:name="barcodeScanner" android:screenOrientation="portrait"></activity>
    <activity android:name="ScannerPage" android:screenOrientation="portrait"></activity> 
    <activity android:name="Linegraphpage" android:screenOrientation="landscape"></activity>        
    <activity android:name="org.achartengine.GraphicalActivity" android:screenOrientation="landscape"/> 
    <activity android:name="org.acra.CrashReportDialog"
    android:theme="@android:style/Theme.Dialog"
    android:launchMode="singleInstance"
    android:excludeFromRecents="true"
    android:finishOnTaskLaunch="true" />
</application> 
```

< /清单>

![在此处输入图像描述](../Images/dd40c2201cf5bfc4c01627f8109df768.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T07:59:03.990

//删除这个 android:targetSdkVersion="8"

并且 Nexus 7 没有后置摄像头功能。

```
<uses-permission android:name="android.permission.CAMERA" /> 
```

**注意：**如果您通过意图使用相机，您的应用程序不需要请求此权限。相机功能 - 您的应用程序还必须声明使用相机功能，例如：

```
 <uses-feature android:name="android.hardware.camera" /> 
```

有关相机功能的列表，请参阅清单功能参考。将相机功能添加到您的清单会导致 Google Play 阻止您的应用程序安装到不包含相机或不支持您指定的相机功能的设备上。[了解更多信息](http://developer.android.com/guide/topics/media/camera.html#manifest)

如果您的应用程序可以使用相机或相机功能进行正确操作，但不需要它，您应该在清单中通过包含 android:required 属性来指定它，并将其设置为 false：

**注意：**您需要提及[supports-screens](https://stackoverflow.com/a/8428247/1012284)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T08:00:36.270

这是因为您的 ' **android.permission.ACCESS_NETWORK_STATE** ' 权限 - 设备没有手机调制解调器，您需要将 android:required="false" 放入权限以允许将其安装在没有手机调制解调器的设备上支持它

> 要控制过滤，请始终在元素中明确声明硬件功能，而不是依靠 Google Play 来“发现”元素中的需求。然后，如果要禁用对特定功能的过滤，可以在声明中添加 android:required="false" 属性。

[http://developer.android.com/guide/topics/manifest/uses-permission-element.html](http://developer.android.com/guide/topics/manifest/uses-permission-element.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T08:01:09.043

就像其他人已经建议的那样 - 相机在这里可能是一个问题。android开发者博客上有一篇关于nexus 7的好帖子。基本上它只有一个前置摄像头，所以你的应用程序要求默认摄像头要求将失败......

基本上你需要扩展请求说它不是关键的，然后在你的应用程序中处理细节......

```
<uses-feature android:name="android.hardware.camera" 
              android:required="false"/> 
```

有关更多信息，请点击链接 [http://android-developers.blogspot.com.au/2012/07/getting-your-app-ready-for-jelly-bean.html](http://android-developers.blogspot.com.au/2012/07/getting-your-app-ready-for-jelly-bean.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T08:12:30.500

`android:targetSdkVersion`应该是您构建应用程序时可用的最高 SDK，除非您有非常具体的理由不这样做。也许您想保证不会调用较新的方法和 API，因为您必须在特定设备上正常工作，即使这意味着牺牲较新设备的行为。

大多数时候，下载最新的 SDK 并设置`android:targetSdkVersion`为最新版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T07:59:06.830

使用以下内容：

```
<supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true" />

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="16" /> //or just remove the targetSdkVersion, altough it is not recommended 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T07:56:26.003

就用这个

```
<uses-sdk android:minSdkVersion="7" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-05T06:33:46.137

始终在某些设备上`Manifest`过滤掉您的应用程序中定义的属性。`Playstore`例如：

1.  声明了特定的 Target Sdk `Version`。
2.  定义的相机`permission`（将过滤没有相机的设备）
3.  使用功能相机。
4.  启用 SIM 卡的设备。
5.  带 Wifi 的设备。

因此，在发布您的应用程序之前，您必须记住，您必须达到目标的最大设备数量，而不是在大多数情况下选择退出某些功能和权限`Sdk version target`。

希望这能让您对发布 App 有所了解。

# jquery - Jquery在多列中随机/随机播放内容？

> ID：12313928
> 
> 赞同：2
> 
> 时间：2012-09-07T07:49:42.620
> 
> 标签：jquery, shuffle, multiple-columns

我有一个三列布局，每一列都有多个包含相似内容块的 div：

```
<section class="info-blocks-container clearfix">
<div id="col1">
    <div class="info-block">...</div>
    <div class="info-block">...</div>
    <div class="info-block">...</div>
</div>
<div id="col2">
    <div class="info-block">...</div>
    <div class="info-block">...</div>
</div>
<div id="col3">
    <div class="info-block">...</div>
    <div class="info-block">...</div>
    <div class="info-block">...</div>
</div>
</section> 
```

我想随机打乱`div#col1`, `div#col2`, 和`div#col3`列中`#col1`的子 div ，所以一些子 div 最终出现在`#col2`and/or`#col3`中，反之亦然。我正在使用[这里](https://stackoverflow.com/questions/11296247/how-to-sort-a-random-div-order-in-jquery)`function reorder()`找到的c​​odeparadox （我删除了“撤消”功能）并且改组正在工作，但是 1.我有3个单独的重复函数的方式非常脏， 2.它只是对每一列中的div进行排序（它是不在三列之间共享子 div）：

```
<script type="text/javascript">
$(function(){
    reorder();
    reorder2();
    reorder3();

    function reorder() {
        var grp = $(".info-blocks-container > div:nth-child(1)").children();
        var cnt = grp.length;

        var temp, x;
        for (var i = 0; i < cnt; i++) {
            temp = grp[i];
            x = Math.floor(Math.random() * cnt);
            grp[i] = grp[x];
            grp[x] = temp;
        }
        $(grp).remove();
        $(".info-blocks-container > div:nth-child(1)").append($(grp));
    }
    function reorder2() {
        var grp = $(".info-blocks-container > div:nth-child(2)").children();
        var cnt = grp.length;

        var temp, x;
        for (var i = 0; i < cnt; i++) {
            temp = grp[i];
            x = Math.floor(Math.random() * cnt);
            grp[i] = grp[x];
            grp[x] = temp;
        }
        $(grp).remove();
        $(".info-blocks-container > div:nth-child(2)").append($(grp));
    }
    function reorder3() {
        var grp = $(".info-blocks-container > div:nth-child(3)").children();
        var cnt = grp.length;

        var temp, x;
        for (var i = 0; i < cnt; i++) {
            temp = grp[i];
            x = Math.floor(Math.random() * cnt);
            grp[i] = grp[x];
            grp[x] = temp;
        }
        $(grp).remove();
        $(".info-blocks-container > div:nth-child(3)").append($(grp));
    }
});
</script> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:12:07.297

其次，你的问题对我来说确实是一个挑战。但我想我找到**了**解决方案：

```
var columnsCollection = new Array();
var columnsObjectsNumber = new Array();

reorder();
function reorder() {
    $(".info-blocks-container").find("DIV[id^='col']").each(function()
    {           
        var tmp = $(this).children();
        //Store the numbers of contained children
        columnsObjectsNumber.push($(tmp).size());
        $(tmp).each(function()
        {
            //transfers current child object to our global store place
            columnsCollection.push($(this));
            //and removed it
            $(this).remove();
        });
    });

    var restartIndex = 0;
    $(".info-blocks-container").find("DIV[id^='col']").each(function()
    {
        //Contains the random generated number
        var x;
        //Contains the current object with Id 'col..'
        var temp = $(this);
        for (var i = 0; i < columnsObjectsNumber[restartIndex]; i++)
        {
            /*
              Generates a random number.
             The maximum limit is the current length from our global store place
            */
            x = Math.floor(Math.random() * columnsCollection.length);
            //Appends the object to the current object with Id 'col..'
            $(temp).append(columnsCollection[x]);
            //Removes the appended element from global store place
            columnsCollection.splice(x,1);
         }
        restartIndex++;
    });   
} 
```

它看起来并不专业，但它确实有效。希望这是您要求的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:58:02.240

起初，您不需要看起来相似的三个功能。您可以只用一种方法进行转换：

```
reorder();
function reorder(columnObject) {
    $(".info-blocks-container").find("DIV[id^='col']").each(function()
    {
        var grp = $(this).children();
        var cnt = grp.length;
        var temp, x;
        for (var i = 0; i < cnt; i++)
        {
            temp = grp[i];
            x = Math.floor(Math.random() * cnt);
            grp[i] = grp[x];
            grp[x] = temp;
         }
         $(grp).remove();
         $(this).append($(grp));  
    });
} 
```

# php - 从作曲家创建 Symfony2 项目时出错

> ID：12313931
> 
> 赞同：7
> 
> 时间：2012-09-07T07:49:48.933
> 
> 标签：php, symfony, symfony-2.1, composer-php

我尝试使用以下命令在 Ubuntu 上使用 composer 创建一个 Symfony2 项目：

```
php composer.phar create-project symfony/framework-standard-edition projectpath 
```

我得到这个错误

```
Installing symfony/framework-standard-edition (dev-master 506ffaab8d8474db2512fca879ca4b9877616a1e)
  - Installing symfony/framework-standard-edition (dev-master master)
    Cloning master

Created project in projectpath/
Loading composer repositories with package information
Installing dependencies from lock file
Your lock file is out of sync with your composer.json, run "composer.phar update" to update dependencies
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - Installation request for symfony/symfony == 2.1.9999999.9999999-dev -> satisfiable by symfony/symfony 2.1.x-dev.
    - Can only install one of: symfony/symfony dev-master, symfony/symfony 2.1.x-dev.
    - Installation request for symfony/symfony == 9999999-dev -> satisfiable by symfony/symfony dev-master. 
```

composer.phar 更新也返回错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T08:56:47.767

尝试指定您想要的确切版本，它现在已在 symfony-standard 存储库中修复，这应该可以工作：

```
 php composer.phar create-project symfony/framework-standard-edition projectpath 2.1.x-dev 
```

# asp.net - 永远不想在 highcharts 上隐藏工具提示

> ID：12313935
> 
> 赞同：4
> 
> 时间：2012-09-07T07:50:09.230
> 
> 标签：asp.net, highcharts

我在使用 JQuery 的 ASP.Net MVC 应用程序中使用 HighCharts。

我设法在鼠标移动时显示带有十字准线垂直条的工具提示。但是，即使用户将鼠标移出图表，我也不想隐藏此 toolop + bar。Highcharts 中是否有任何选项可以实现这一目标？

我搜索了论坛，但找不到任何工作示例。其中一种解决方案与单击事件上的克隆工具提示有关。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-07T13:31:22.443

您可以按如下方式用空（无操作）函数[包装](http://www.highcharts.com/docs/extending-highcharts/extending-highcharts)`Highcharts.Tooltip.prototype.hide`

```
(function (H) {
    H.wrap(H.Tooltip.prototype, 'hide', function (defaultCallback) {
        /*
            ░░░░░▄▄▄▄▀▀▀▀▀▀▀▀▄▄▄▄▄▄░░░░░░░
            ░░░░░█░░░░▒▒▒▒▒▒▒▒▒▒▒▒░░▀▀▄░░░░
            ░░░░█░░░▒▒▒▒▒▒░░░░░░░░▒▒▒░░█░░░
            ░░░█░░░░░░▄██▀▄▄░░░░░▄▄▄░░░░█░░
            ░▄▀▒▄▄▄▒░█▀▀▀▀▄▄█░░░██▄▄█░░░░█░
            █░▒█▒▄░▀▄▄▄▀░░░░░░░░█░░░▒▒▒▒▒░█
            █░▒█░█▀▄▄░░░░░█▀░░░░▀▄░░▄▀▀▀▄▒█
            ░█░▀▄░█▄░█▀▄▄░▀░▀▀░▄▄▀░░░░█░░█░
            ░░█░░░▀▄▀█▄▄░█▀▀▀▄▄▄▄▀▀█▀██░█░░
            ░░░█░░░░██░░▀█▄▄▄█▄▄█▄████░█░░░
            ░░░░█░░░░▀▀▄░█░░░█░█▀██████░█░░
            ░░░░░▀▄░░░░░▀▀▄▄▄█▄█▄█▄█▄▀░░█░░
            ░░░░░░░▀▄▄░▒▒▒▒░░░░░░░░░░▒░░░█░
            ░░░░░░░░░░▀▀▄▄░▒▒▒▒▒▒▒▒▒▒░░░░█░
            ░░░░░░░░░░░░░░▀▄▄▄▄▄░░░░░░░░█░░
            */
    });
}(Highcharts)); 
```

[Highcharts/Highstock 工具提示始终可见@JsFiddle](http://jsfiddle.net/jugal/3dEJc/)

对于极简主义者来说，

```
(function (H) {
    H.wrap(H.Tooltip.prototype, 'hide', function () {});
}(Highcharts)); 
```

也做这项工作;）

阅读更多 @[自定义 Highcharts - 工具提示可见性](http://ahumbleopinion.com/customizing-highcharts-tooltip-visibility/)

# c# - 带有 MVVM 数据绑定的会话/事务管理 NHibernate

> ID：12313939
> 
> 赞同：2
> 
> 时间：2012-09-07T07:50:36.633
> 
> 标签：c#, wpf, nhibernate, data-binding, mvvm

也许我已经以“理想”的方式做到了这一点，但不知何故，这对我来说感觉不对。

我有一个搜索表单，在找到结果后会立即通过不同的控件显示信息（其中三个是相互绑定的数据网格）。

目前，我已将我的 UoW 管理设置如下：

*   当用户开始搜索时，检查我们是否有旧的 UoW 并处理它（它是会话）
*   创建一个新的 UoW
*   开始交易
*   执行搜索
*   提交事务

代码示例：

```
if(_unitOfWork != null)
{
    _unitOfWork.Dispose();
}

_unitOfWork = new UnitOfWork();

_unitOfWork.Begin();
ICollection<Case> cases = casesQuery.ToList();
_unitOfWork.Commit(); 
```

iDeally 我现在希望所有对象都被数据绑定，并且在数据绑定完成后我想处置 UoW。

可悲的是，我不能这样做，因为延迟加载beeing 对三个数据网格中的两个进行数据绑定。在这些实体中显式加载集合和对象图并不是一个真正的选择，因为其中一些实体是具有不同属性和引用的子类。显式加载这些似乎需要做很多工作。

我想知道的是是否有办法让它变得更好，我考虑了以下几点：

*   使用转换器获取数据绑定的值，找出它是否是代理，如果是则加载此代理。这意味着我必须为每个数据绑定属性设置一个转换器，这又看起来效率低下
*   显式加载，不这样做的原因上面提到了
*   我目前的解决方案是让 UoW 跨越“搜索”，最大的问题是我无法在延迟加载东西时保持交易打开。（我可以，但这似乎是一件非常糟糕的事情，因为用户可以无限期地保持交易开放）

有没有人有更好的方法来处理这种情况，或者我目前正在做的最好的事情是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:43:31.693

在 MVVM 应用程序中，最常见的模式是每个 VM 都有一个会话。这无需太多额外的工作就可以实现延迟加载和富客户端更改跟踪。

目前的做法没有任何问题。不能在事务中进行延迟加载并不是什么大不了的事。

现在，如果您可以创建基于反射的解决方案，显式加载看起来并不像“太多工作”。但是您仍然需要知道要加载什么。无论如何，这比转换器的想法要少得多。

# c++ - 如何将 QScrollBar 放置在 QScrollArea 的内容上？

> ID：12313943
> 
> 赞同：0
> 
> 时间：2012-09-07T07:51:00.407
> 
> 标签：c++, qt, qscrollarea

我想制作一个根据使用情况淡入淡出的滚动条。我继承了 QScrollBar 并得到了我想要的外观。问题是滚动条放置在内容旁边。我该如何让它在内容之上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:50:22.150

我创建了一个新的 QScrollbar，我通过信号连接到原始的，然后使用它`widget->setParent`，然后`widget->setGeometry()`将它绘制在顶部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-16T05:53:23.083

我更快的解决方案是重新`QScrollBars`创建`QScrollArea`创建的对象并将其添加到新对象`QLayout`中以按您想要的方式定位它。

```
QScrollArea *scrollArea = new QScrollArea();

QScrollBar *scrollBar = scrollArea->horizontalScrollBar();
scrollBar->setParent(scrollArea);
scrollBar->setFixedHeight(20);//required for later

QVBoxLayout *scrollAreaLayout = new QVBoxLayout(scrollArea);
scrollAreaLayout->setContentsMargins(0, 0, 0, 10);//use whatever margins you want
scrollAreaLayout->addStretch(1);
scrollAreaLayout->addWidget(scrollBar); 
```

这使基本功能正常工作，但`QScrollArea`仍然增加了滚动条所在的空间。要删除它，子类`QProxyStyle`和覆盖`pixelMetric()`。

```
#include <QProxyStyle>

class StyleFixes : public QProxyStyle
{
public:
    int pixelMetric(PixelMetric metric, const QStyleOption *option = Q_NULLPTR, const QWidget *widget = Q_NULLPTR) const override
    {
        if(metric == PM_ScrollBarExtent)
        {
            return 0;
        }

        return QProxyStyle::pixelMetric(metric, option, widget);
    }
}; 
```

然后在 main.cpp 中应用它

`QApplication::setStyle(new StyleFixes);`

但是，这将删除滚动条上的箭头，因此您需要自己设置样式。

# c++ - SSL_accept 需要 200 毫秒 (c / openssl)

> ID：12313947
> 
> 赞同：1
> 
> 时间：2012-09-07T07:51:26.727
> 
> 标签：c++, ssl, openssl

SSL_accept(ssl) 需要 200 毫秒是否正常？

作为 Windows 服务运行，使用 C++ 编写，使用 MFC 和 Boost。在英特尔至强 e5620 2.4G、4GB 内存和 Win 7 Pro 上运行。

以下是我的代码。同时我怀疑 SSL_accept 之前的其他方法（SSL_CTX_* RAND_* 等）可能会消耗很长时间，但我记录了一切，发现 SSL_accept 一直在吃东西。

```
int verify_callback(int preverify_ok, X509_STORE_CTX *ctx)
{
    return preverify_ok;
}    
void somemethod() {    
    SSL *ssl  = 0;
    SSL_CTX *tlsctx = 0;
    int ret_conn = -1;
    tlsctx = SSL_CTX_new( SSLv23_method());

    SSL_CTX_use_certificate_file(tlsctx, sCert , SSL_FILETYPE_PEM);

    SSL_CTX_use_PrivateKey_file(tlsctx, sKey , SSL_FILETYPE_PEM);

        RAND_write_file(sRandomPem);
        int _rand_loaded = RAND_load_file(sRandomPem, -1 );   

        if(! SSL_CTX_load_verify_locations(tlsctx, sCACert, NULL))
        {
            // TODO //  /* Handle error here */     
        }
        SSL_CTX_set_verify( tlsctx, SSL_VERIFY_PEER, verify_callback );

        ssl = SSL_new(tlsctx);

        int _error = SSL_ERROR_WANT_READ;

        int loopCount  = 0;

        // START MEASURING TIME FROM HERE
        SSL_set_fd(ssl, _sck);
        while(ret_conn != 1 ) 
        {
            loopCount++;

            ret_conn = SSL_accept(ssl);

            _error = SSL_get_error(ssl, ret_conn);
            switch (_error) 
            { 
            case SSL_ERROR_NONE: 
                    break; 
            case SSL_ERROR_WANT_WRITE: 
                    break; 
            case SSL_ERROR_WANT_READ: 
                    break; 
            case SSL_ERROR_WANT_X509_LOOKUP: 
                    break; 
            case SSL_ERROR_SYSCALL: 
                    break; 
            case SSL_ERROR_SSL: 
                    break; 
            case SSL_ERROR_ZERO_RETURN: 
                    break; 
            } 

            if( _error == SSL_ERROR_WANT_READ || _error == SSL_ERROR_WANT_WRITE)
            { 
                Sleep(1);
            } else
            {
                break;
            }
        }

        if( ret_conn < 1)
        {
            Log("SSL_accept -1 ", ERR_error_string(_error, NULL));
            return;
        }
        // MEASURING END HERE, takes ~200ms (on successfully accepting connection)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:56:46.820

据我所知，`SSL_accept`这是一个阻塞功能，它等待您的客户端连接。如果您的客户端比`SSL_accept`呼叫开始晚 200 毫秒连接，那么您将测量该等待时间。

# java - TestUI.java 使用未经检查或不安全的操作。注意：使用 -Xlint 重新编译：详细信息未选中

> ID：12313948
> 
> 赞同：0
> 
> 时间：2012-09-07T07:51:29.473
> 
> 标签：java, swing, jlist, java-7, defaultlistmodel

```
 try{
        String[] mobileSuit;
        File packageFile = openDialogFile("Select", "Choose folder that contain overall mobile suit folder", JFileChooser.DIRECTORIES_ONLY);
        mobileSuit = packageFile.list();
        DefaultListModel<String> listModel = new DefaultListModel<>();
        for(String el : mobileSuit){
            listModel.addElement(el);
        }
        this.packagePath = packageFile.getPath();
        JList_mobileSuit.setModel(listModel);
        JList_mobileSuit.setSelectedIndex(0);
    }catch(java.lang.NullPointerException e){

    } 
```

当我取消注释“JList mobileSuit.setModel(listModel)”行时，netbeans 的输出报告“TestUI.java 使用未经检查或不安全的操作。注意：重新编译 -Xlint:unchecked 以获取详细信息。”。我仍然对我的内容感到困惑我做错了。请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:58:50.450

应该是

```
DefaultListModel<String> listModel = new DefaultListModel<String>(); 
```

并且 JList 也可以使用 String

```
JList<String> JList_mobileSuit = new JList<>(listModel);//JList<String>(listModel); 
```

# infopath2010 - 如何为 InfoPath 2010 中的重复部分自动编号

> ID：12313952
> 
> 赞同：4
> 
> 时间：2012-09-07T07:51:50.143
> 
> 标签：infopath2010, autonumber

我的 InfoPath 表单中有几行最初排列在一个表中。之后，我有一个由单行组成的重复部分，供用户以重复的方式逐行输入数据。每一行都需要索引，索引从上表最后一行的索引开始。

InfoPath 2010 中没有可用于自动递增的“表达式框”控件，如 Web 上的多个其他来源所述。

我不需要在提交后对表格进行编号。当用户在浏览器中填写表单时在重复部分下输入值时，我希望 ROWS 自动编号。

有没有办法解决这个问题？或者，有什么公式可以用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T02:12:22.090

I can be done using the count function, example:

```
count(../preceding-sibling::*) + 1 
```

You will need to have a field in your repeating group for the ID, then go to that field's properties and set it's default value to that function using the formula button. You'll then have to edit xpath values to set the value to that function call.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:21:54.033

*注意：我使用的是 InfoPath 2007，所以我不能 100% 确定这适用于 InfoPath 2010*

我一直在寻找类似的东西，除了我只是想让我的重复部分显示一个数字。

@firestream 的答案几乎对我有用，但由于某种原因，第一部分没有设置。它们被编号为“*空白*，2,3,4，...”此外，我不需要数字在数据源中持久存在，也不想要额外的字段。

我只是创建了一个表达式框控件，并将 XPath 设置为`count(preceding-sibling::*)+1`

# ruby - 使用 Ruby 解析 iTunes Store 提要

> ID：12313953
> 
> 赞同：0
> 
> 时间：2012-09-07T07:51:56.337
> 
> 标签：ruby, xml

是否有任何 Ruby 代码可以帮助解析 iTunes Store 提要？

似乎有一些 PHP 代码： [Parse iTunes RSS Atom feed with PHP?](https://stackoverflow.com/questions/9965370/parse-itunes-rss-atom-feed-with-php)

但不是红宝石。我一直在谷歌搜索和搜索，但到目前为止还没有发现任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:02:37.717

我相信这会对你有所帮助。[http://nokogiri.org/](http://nokogiri.org/)

# c# - 重新绑定时组合框项目消失

> ID：12313954
> 
> 赞同：0
> 
> 时间：2012-09-07T07:51:58.497
> 
> 标签：c#, .net, visual-studio-2010, combobox

在我的应用程序中，我有一个组合框，其中包含来自 DB 的一些数据列表。组合框数据源设置为绑定源。绑定源有一个作为数据源的数据集和一个作为数据成员的数据表。我在添加或编辑或删除条目后更新此组合框。通过再次调用绑定代码来完成更新。现在组合框中的所有项目都消失了。我不知道它是怎么发生的。

示例作品位于链接[http://www.filedropper.com/students_1](http://www.filedropper.com/students_1)中。数据库包含在其中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:42:21.793

在“void GetData()”中的代码中编写代码 bs = new BindingSource(new System.ComponentModel.Container()); 每次要加载新数据源时都必须执行此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:14:03.480

我没有您的代码，所以我无法给出确切的解决方案，但您可以尝试以下提示：如果您在 if(!Page.IsPostback) 块内调用绑定代码，则从那里删除并调用页面加载.

# php - PHP 和 imap_search - 如何解析结果？

> ID：12313957
> 
> 赞同：1
> 
> 时间：2012-09-07T07:52:21.653
> 
> 标签：php, imap

我正在使用 imap_search 查找具有特定主题的邮件，如下所示：

```
$connection = imap_open(MAILHOST, MAILUSER, MAILPASSWORD);
$results = imap_search($connection, 'SUBJECT "My subject"'); 
```

现在我正在遍历结果，如下所示：

```
foreach ($results as $result) {
    $header = imap_fetchheader($connection, $result);
    print_r($header);
} 
```

$header var 是一个字符串，有没有一种很好的方法可以从该字符串中提取例如 Delivered-To 部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:14:41.633

这个问题太老了，但对于未来的谷歌人来说：试试这个：

```
$header = imap_headerinfo($connection, $result); 
```

[`imap_headerinfo()`](http://www.php.net/manual/en/function.imap-headerinfo.php)返回标题值的数组。见 php.net

# netbeans-7 - 使用 netbeans 7.2 连接到 phpcloud

> ID：12313958
> 
> 赞同：1
> 
> 时间：2012-09-07T07:52:45.137
> 
> 标签：netbeans-7

我正在尝试使用 netbeans连接到[phpclould 。](http://www.phpcloud.com/)我正在按照[eschrade博客上的说明进行操作](http://www.eschrade.com/page/connecting-to-the-zend-developer-cloud-using-netbeans-for-php/)

在接下来的步骤中，我提供了所有必要的信息和私钥 ![在此处输入图像描述](../Images/fde58830afeeade3ca4e8b37ab6d17c2.png)

但是当我按下测试连接按钮时出现以下错误

```
Cannot connect to server XXX.my.phpcloud.com
(Cause: invalid privatekey: key.ppk) 
```

[我知道密钥是正确的，因为我在winScp](http://www.phpcloud.com/help/sftp-help)中使用了相同的密钥，并且效果很好。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:59:12.003

事实证明，私钥必须是 OpenSSH 格式。使用 Puttygen 加载您的 .ppk 文件，然后将其导出为 openssh 密钥 (.priv)。然后在 Netbeans 对话框中指定 .priv 文件。

请参阅[此链接](http://forums.netbeans.org/ptopic18251.html)。

# .net - .Net exe build in VS 2010 不能在没有 VS 的机器上运行

> ID：12313959
> 
> 赞同：0
> 
> 时间：2012-09-07T07:52:54.837
> 
> 标签：.net, winforms

我在 VS 2010 的 .netfx 4 中构建了一个应用程序，但是在未安装 VS 2010 的机器上运行时它在启动时崩溃。我创建了一个发布版本，并将所有引用复制到发布文件夹，但它不起作用。

```
Problem signature:
Problem Event Name: CLR20r3
Problem Signature 01: dlogger.exe
Problem Signature 02: 1.0.0.0
Problem Signature 03: 502e11fa
Problem Signature 04: DLogger
Problem Signature 05: 1.0.0.0
Problem Signature 06: 502e11fa
Problem Signature 07: 3
Problem Signature 08: f
Problem Signature 09: System.IO.FileNotFoundException
OS Version: 6.1.7600.2.0.0.256.48
Locale ID: 1033
Additional Information 1: 0a9e
Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
Additional Information 3: 0a9e
Additional Information 4: 0a9e372d3b4ad19135b953a78882e789 
```

# html - 隐藏文本区域

> ID：12313961
> 
> 赞同：32
> 
> 时间：2012-09-07T07:53:02.777
> 
> 标签：html, css

在文本框的 html 中，`<input type="hidden" name="hide"/>`如果我想隐藏我应该如何使用，可以使用 TextArea 来隐藏它？

请任何人帮助我，

谢谢，

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-09-07T07:53:59.603

将 CSS`display`设置`none`为 textarea

```
<textarea name="hide" style="display:none;"></textarea> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-07T08:01:52.270

`<input type=hidden>`元素不是隐藏的输入框。它只是一个通过标记或脚本设置值的表单字段，而不是通过用户输入。您也可以将它用于多行数据，例如

```
<input type=hidden name=stuff value=
"Hello
world, how
are you?"> 
```

如果值包含 Ascii 引号 (")，那么对于任何 HTML 属性，您需要使用 Ascii 撇号 (') 作为属性值分隔符*或*将引号转义为`&quot;`，例如

```
<input type=hidden name=stuff value="A &quot;funny&quot; example"> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-04T08:05:11.937

但是 css 样式标签是获得跨浏览器兼容性的正确方法吗？

```
 <textarea style="display:none;" ></textarea> 
```

或者我很久以前学到的......

```
 <textarea hidden ></textarea> 
```

或
全局隐藏元素方法：

```
 <textarea hidden="hidden" ></textarea> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-07T07:53:49.080

`<textarea name="hide" style="display:none;"></textarea>`

这会将 css`display`属性设置为`none`，从而阻止浏览器呈现 textarea。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-06T16:08:04.480

利用

```
textarea{
  visibility:hidden;
} 
```

# jquery - JQuery JQPrint css

> ID：12313966
> 
> 赞同：1
> 
> 时间：2012-09-07T07:53:14.773
> 
> 标签：jquery, jqprint

如何在 jqprint 中包含外部 css 文件？我的代码可能有什么问题，为什么我不能使用内联样式表隐藏一个简单的按钮，其媒体等于打印？这是我的示例代码。

```
<style type="text/css" media="print">

#hide
{
    display:none;
}

</style>

<script type="text/javascript" src="js/jquery.jqprint-0.3.js"></script>

<script type="text/javascript">
    $(function() {
        $( "#printMe" ).click(function() {
            $('#print').jqprint();

        });
    });
</script>

<div id="header">
    <h1>This is the Header</h1>
</div>

<div id="print"><br />
    <input type="button" id="hide" value="hidden"/>
    <input type="button" id="printMe" value="Print Me"/>
</div> 
```

当我只使用 javascript 的 window.print 时，它会隐藏 ID 为 hide 的按钮。可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:02:31.213

> 这是[**工作演示**](http://jsfiddle.net/v6K58/238/)

看到这个[http://jsfiddle.net/v6K58/](http://jsfiddle.net/v6K58/)

```
 $(function() {
        $( "#printMe" ).click(function() {
            $('#header').jqprint();

        });
    });​ 
```

粗体[文字打印](http://jsfiddle.net/v6K58/1/)

# javascript - javascript背景图像位置循环

> ID：12313969
> 
> 赞同：0
> 
> 时间：2012-09-07T07:53:22.077
> 
> 标签：javascript, html, function, events, settimeout

这是我的代码：

```
function time(){
     function image1(){
           document.getElementById("letOrSellBannerHousePrice").style.backgroundPosition = "-754px 0px";
     }
     function time1(){
        setTimeout("image1()", 5000);
     }
     function image2(){
        document.getElementById("letOrSellBannerHousePrice").style.backgroundPosition = "-1508px 0px";
     }
     function time2(){
        setTimeout("image2()", 11000);
     }

     function backToOriginal(){
         document.getElementById("letOrSellBannerHousePrice").style.backgroundPosition = "0px 0px";
     }
     function time3(){
        setTimeout("backToOriginal()", 17000);
     }
     function init(){
        time1();
        time2();
        time3();
     }
    }
    function runThis(){
        time();
    }
    window.onload = runThis; 
```

我希望背景图像滚动，但是当我运行程序时脚本不运行。我找不到我的错误。

这就是我放在我的css代码上的`background:url("image source");`

这可以做到吗？请帮助我是新来的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:01:55.180

在`time`函数中只有函数的定义，但没有调用。尝试添加

```
init(); 
```

在`time`函数的底部。

也换

```
setTimeout("image1()", 5000); 
```

经过

```
setTimeout(image1, 5000); 
```

等等。

# c# - 通过比较部分目录路径来匹配子目录

> ID：12313971
> 
> 赞同：2
> 
> 时间：2012-09-07T07:53:28.500
> 
> 标签：c#, .net, regex, string

我可能没有把标题用得太好，但希望我的解释能说明问题。

基本上，当给定另一个要比较的路径时，我必须找出不包括文件名的子目录的名称。例如，

```
Given: "C:\Windows\System32\catroot\sys.dll"

Compare: "C:\Windows"

Matched String: "\System32\catroot" 
```

这是另一个例子：

```
Given: "C:\Windows\System32\WindowsPowerShell\v1.0\Examples\profile.ps1"

Compare: "C:\Windows\System32"

Matched String: "\WindowsPowerShell\v1.0\Examples" 
```

执行此匹配的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T08:33:52.603

您可能还需要考虑特殊情况，例如：

*   相对路径

*   具有短名称的路径，例如`C:\PROGRA~1`for`C:\Program Files`

*   非规范路径 ( `C:\Windows\System32\..\..\file.dat`)

*   使用备用分隔符的路径（`/`而不是`\`）

`Path.GetFullPath`一种方法是在比较之前使用转换为规范的完整路径

例如

```
string toMatch = @"C:\PROGRA~1/";
string path1 = @"C:/Program Files\Common Files\..\file.dat";
string path2 = @"C:\Program Files\Common Files\..\..\file.dat";

string toMatchFullPath = Path.GetFullPath(toMatch);
string fullPath1 = Path.GetFullPath(path1);
string fullPath2 = Path.GetFullPath(path2);

// fullPath1 = C:\Program Files\file.dat
// toMatchFullPath = C:\Program Files\
if (fullPath1.StartsWith(toMatchFullPath, StringComparison.OrdinalIgnoreCase))
{
    // path1 matches after conversion to full path
}

// fullPath2 = C:\file.dat
// toMatchFullPath = C:\Program Files\
if (fullPath2.StartsWith(toMatchFullPath, StringComparison.OrdinalIgnoreCase))
{
    // path2 does not match after conversion to full path
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:57:36.363

无需使用正则表达式。
这可以很容易地使用[string.StartsWith](http://msdn.microsoft.com/en-us/library/ms131452.aspx)、[string.Substring](http://msdn.microsoft.com/en-us/library/hxthx5h6)和[Path.GetDirectoryName](http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx)来删除文件名。

```
string fullPath = @"C:\Windows\System32\WindowsPowerShell\v1.0\Examples\profile.ps1"; 
string toMatch = @"C:\Windows\System32";
string result = string.Empty;
if(fullPath.StartsWith(toMatch, StringComparison.CurrentCultureIgnoreCase) == true)
{
    result = Path.GetDirectoryName(fullPath.Substring(toMatch.Length));
} 
Console.WriteLine(result); 
```

编辑：此更改负责 aiodintsov 的观察，并包括@Joe 关于非规范或部分路径名的想法

```
string fullPath = @"C:\Windows\System32\WindowsPowerShell\v1.0\Examples\profile.ps1"; 
string toMatch = @"C:\Win";

string result = string.Empty;
string temp = Path.GetDirectoryName(Path.GetFullPath(fullPath));
string[] p1 = temp.Split('\\');
string[] p2 = Path.GetFullPath(toMatch).Split('\\');
for(int x = 0; x < p1.Length; x++)
{
   if(x >= p2.Length || p1[x] != p2[x]) 
             result = string.Concat(result, "\\", p1[x]);
} 
```

在这种情况下，我假设部分匹配应被视为不匹配。还请查看@Joe 对部分或非规范路径问题的回答

# php - jquery中的html元素每个返回值

> ID：12313972
> 
> 赞同：1
> 
> 时间：2012-09-07T07:53:32.340
> 
> 标签：php, jquery, json

我在遍历数组时尝试显示 html 元素（例如 img、ul 等）时遇到问题。

```
$.each(data[0], function(i, dataa) {
    if(i == 'images') {
        $.each(data[0].images, function(x, datab) {
            $('.g').append('<tr><td>'+datab.imgid+'</td></tr>');
        });
    } else if(i == 'desc') {
        $('.g').append('<tr><td><label>' + i + ' : </label></td>' + '<td>' + dataa + '</td></tr>');
    } else {
        $('.g').append('<tr><td><label>' + i + ' : </label></td>' + '<td><input type="text" name="' + i + '" id="' + i + '" value="' + dataa + '" ></td></tr>');
    }
}); 
```

以下是将图像添加到数组中：

```
foreach($_FILES['uploadsell1'][tmp_name] as $key => $value) {
    if($_FILES['uploadsell1'][tmp_name][$key] != null) {
        $filename = $_FILES['uploadsell1'][name][$key];
        $tempname = $_FILES['uploadsell1'][tmp_name][$key];
        copy($tempname, 'images/ads/tempads/'.$filename);

        $df[]["imgid"] = "<img src='/images/ads/tempads/".$filename."' height='80' width='100' />";
    }
}

$row['images'] = $df;                       
echo '['.json_encode($row).']'; 
```

在字段中发布的数据工作正常。它只是在包含 html 元素时才搞砸。有没有其他办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:01:05.157

我想你正在寻找的是[`attr()`](http://api.jquery.com/attr/)

尝试修改您的代码

`$('.g').append('<tr><td>'+datab.imgid+'</td></tr>');`

至

`$('.g').append( $('<tr/>').append($('<td/>').append($("<img/>").attr("src", datab.imgid).attr("width",datab.width).attr("height",datab.height))));`

在客户端。在服务器端，您需要执行类似的操作

`$df = array ( array("src" => 'images.jpg', 'height' => '80', 'width' => '100') );`

这意味着分解标签并详细说明您要在 HTML 中赋予标签的所有属性。请注意，如果您执行类似的操作，您可以轻松获得更通用的方式

`$df = array ( array("src" => 'images.jpg', "attrs" => array('height' => '80', 'width' => '100')) );`

然后在javascript中循环通过“attrs”。

您可能需要考虑类似声明 CSS 而不是标签属性的内容。然后 JavaScript 应该调用[`css(key,value)`](http://api.jquery.com/css/)而不是`attr(key,value)`因为 CSS 更强大。

但想法是，如果您想构建以下 HTML

`<img src="my_src.jpg" height="100" width="80"/>`

那么你的 JavaScript 应该是这样的

`$("<img/>").attr("src","my_src.jpg").attr("height","100").attr("width","80")`

[您可以在我的网站](http://www.mograbi.info/stackoverflow/question_12313972/main.php)上查看我的运行示例。

如果我误解了您的问题，或者您发现我的回答有任何问题，请告诉我，以便我进行编辑。

# android - android，自定义ItemizedOverlay

> ID：12313973
> 
> 赞同：0
> 
> 时间：2012-09-07T07:53:36.960
> 
> 标签：android, google-maps, itemizedoverlay, overlayitem

已经有一个覆盖，在地图视图上绘制了一些东西。我想在地图视图中添加另一个叠加层和自定义项目。什么都没有显示。我的代码有什么问题？多谢了。

我的 ItemizedOverlay 子类

```
public class PinItemizedOverlay extends ItemizedOverlay {
private static int MAX_PIN = 3;
private OverlayItem overlays[] = new OverlayItem[MAX_PIN];

private int index = 0;
private boolean full = false;
private Context context;

public PinItemizedOverlay(Context context, Drawable defaultMarker) {
    //super(boundCenterBottom(defaultMarker));
    super(boundCenterBottom(defaultMarker));
    this.context = context;
}

@Override
public OverlayItem createItem(int index) {
    return overlays[index];
}

public int size(){
    if (full) {
        return overlays.length;
    } else {
        return index;
    }
}

public void addOverlay(OverlayItem overlay) {
    if (index <     MAX_PIN) {
        overlays[index] = overlay;
    } else {
        return;
    }
    index++;
    populate();
}
} 
```

我的自定义叠加项目

```
 public class LocationPinItem extends OverlayItem{

    public LocationEntity location;

    public LocationPinItem(GeoPoint point, int iconRes, LocationEntity location){
        //super(point,null,null);
        super(point, null, null);
        Drawable marker = getApplicationContext().getResources().getDrawable(iconRes);
        super.setMarker(marker );
        this.location = location;

    }

} 
```

以及我添加自定义项目的功能（它是一个放置图钉）：

```
private void createMarkerAt(LocationEntity location, String extra, int iconRes, boolean clear, boolean animate) {
    if(location == null) {
        return;
    }
    GeoPoint point = new GeoPoint((int) (location.latitude * 1E6), (int) (location.longitude * 1E6));

    LocationPinItem pinItem = new LocationPinItem(point,R.drawable.ic_swap,location);
    PinItemizedOverlay pinOverlay = new PinItemizedOverlay(getApplicationContext(),mMapDrawable) ;
    pinOverlay.addOverlay(pinItem);

mMapView.removeAllViews();
mMapView.postInvalidate();

    mMapView.getOverlays().add(pinOverlay);

    if(animate) {
        mMapView.getController().animateTo(location.toGeoPoint());
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T02:17:32.190

没关系，我想通了：新添加的叠加层遮挡了之前的叠加层

# asp.net-mvc - 将数据传递给查看并返回给控制器

> ID：12313974
> 
> 赞同：0
> 
> 时间：2012-09-07T07:53:38.253
> 
> 标签：asp.net-mvc

我有一个项目列表，我想用 2 个按钮来移动它们，下一个和上一个。

这是我的模型：

```
 public class Pedido 
{ 
    public int Pos { get; set; } 
    .................. 
} 
```

控制器：

```
public ActionResult Index() 
    { 
        Pedido ped = new Pedido(); 
        ped.Pos = 2; 
        return View(ped); 
    } 

    [HttpPost] 
    public ActionResult Index(Pedido p) 
    { 
        p.Pos++; 
        return View(p); 
    } 
```

和观点：

```
<form method="post"> 
@Html.Hidden("Pos", Model.Pos) 
@Model.Pos     
<input type="submit" value="Sig" />
</form> 
```

当我运行应用程序时，视图显示“2”（@Html.Pos=2）和隐藏字段值 =2（确定）。我按下按钮信号。@Html.Pos=3 和隐藏值 =2 为什么？下次我在 httlpost 操作 p.Pos=2 中单击按钮参数“p”

怎么解决呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:00:50.900

我解决它： ModelState.Remove("Pos")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:03:14.440

您正在回发两个单独的字段，请尝试以下操作：

```
@Html.HiddenFor(m => m.Pos)
@Model.Pos 
```

将您的隐藏输入正确绑定到您的`Pos`属性。

# c# - DELETE 方法 .NET WebAPI 不起作用

> ID：12313978
> 
> 赞同：2
> 
> 时间：2012-09-07T07:53:49.563
> 
> 标签：c#, .net, asp.net-web-api, wcf-web-api

我已经看过很多关于这个的帖子，但是我的新 WebAPI 的 DELETE 方法根本不起作用并返回 404，使用 Windows 7 32 位，IIS 7.5。

我试过了

*   卸载 WebDAV
*   将 PUT、DELETE、OPTIONS 添加到 ExtensionlessUrlHandler-Integrated-4.0 处理程序（和 32 位/64 位处理程序）。
*   允许所有模块运行。

一切都无济于事，全部返回 404。如果我将 DELETE 类型更改为 GET，那么服务运行 GET 命令非常好。

有人对此有任何其他想法吗？这让我疯狂。

编辑：

我正在调用这样的 DELETE 方法（中介是 jQuery 调用的包装器）：

```
mediator.publish("AjaxCall", {
                url: "/api/files/" + $(a.currentTarget).data("fileid"),
                type: "DELETE",
                }
            }); 
```

和 WebAPI：

```
// DELETE api/<controller>/5
// [HttpDelete] - Tried this too
public void Delete(int fileId)
{
     Files.DeleteFile(fileId);
} 
```

和相关的web.config：

```
<handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="WebDAVModule" />
    </modules> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-12T07:17:46.707

解决方案是在正确的 applicationHost.config 文件中添加 PUT & DELETE 动词。

对于 IIS：

转到 lcation: C:\Windows\System32\inetsrv\config 并将 applicationHost.config 文件编辑为：

```
 <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

对于 IIS EXPRESS GO TO : %userprofile%\documents\iisexpress\config\ 并在 applicationHost.config 文件中执行相同操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:07:39.467

您是否在“默认网站”下托管？如果是，请尝试将其单独托管在不同的端口上。

我对 PUT 和 DELETE 有同样的问题，解决方法是成功的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-14T05:35:44.373

如果您正在使用属性路由，请使用 DELETE 和 PUT 方法更新*AcceptVerbs ，如下所示：*

```
[Route("{fileId:int}")]
[AcceptVerbs("DELETE")]
public void Delete(int fileId)
{
   Files.DeleteFile(fileId);
} 
```

此外，如果您将 fileId 写入*参数*名称，则不要忘记将 webAPI 路由配置更新为*api/files/{fileId}*

并且还对 GET 和 PUT 使用*AcceptVerbs*属性，因为这三个具有相同的 URL 结构来调用它们的方法。还使用 RoutePrefix 更新控制器，如下所示：

```
[RoutePrefix("api/files")]
public class FileController : ApiController
{
} 
```

# java - Java -server 标志和编译

> ID：12313979
> 
> 赞同：4
> 
> 时间：2012-09-07T07:53:51.057
> 
> 标签：java, compilation

在[这篇文章](http://www.oracle.com/technetwork/java/whitepaper-135217.html#overview)中指出：

> JDK 包括两种类型的 VM——客户端产品和针对服务器应用程序调整的 VM。这两个解决方案共享 Java HotSpot 运行时环境代码库，但使用适合客户端和服务器明显独特的性能特征的不同编译器。这些差异包括编译内联策略和堆默认值。
> 
> JDK 在发行版中包含这两个系统，因此开发人员可以通过指定 -client 或 -server 来选择他们想要的系统。
> 
> 尽管服务器虚拟机和客户端虚拟机相似，但服务器虚拟机已经过专门调整，以最大限度地提高峰值运行速度。它旨在执行长时间运行的服务器应用程序，这些应用程序需要尽可能快的运行速度，而不是快速启动时间或更小的运行时内存占用。
> 
> 客户端 VM 编译器用作经典 VM 和早期版本 JDK 使用的即时 (JIT) 编译器的升级。客户端 VM 为应用程序和小程序提供了改进的运行时性能。Java HotSpot 客户端 VM 经过专门调整，可减少应用程序启动时间和内存占用，使其特别适合客户端环境。一般来说，客户端系统更适合 GUI。

这是否意味着如果要运行带有`-server`标志的应用程序，必须以某种模式编译才能使其正常工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T07:55:09.950

不，这是运行时设置。您的应用程序的字节码是相同的。启动 JVM 时使用此标志。

混淆可能来自“编译”也发生在运行时这一事实，因为 JVM 将 Java 字节码 JIT（即时）编译为本机机器代码（以及如何完成受此标志的影响） .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T07:56:39.200

需要注意的是，Java 是“一次编译，到处运行”

这意味着您无需担心

*   它将在客户端还是服务器上运行
*   无论是 32 位还是 64 位
*   使用 32 位还是 64 位引用。
*   使用什么 CPU
*   使用什么操作系统
*   使用什么属性，即没有宏。
*   调试日志是否打开。
*   使用了多少内存。
*   使用什么代码检测。
*   您正在运行哪个版本的 java（如果它是更高版本）

这些都是在运行时确定的，而不是编译时。

# c++ - 奇怪的！linux & windows vsprintf 浮点数到文件

> ID：12313982
> 
> 赞同：3
> 
> 时间：2012-09-07T07:54:01.900
> 
> 标签：c++, windows, linux, floating-point, printf

使用 vsprintf 将内容写入文件。

输出格式为：

```
"tt2:%f, tt2:%x", tt2, *((int *)&tt2) 
```

linux：</p>

```
gcc 4.4.5: -O2 -ffloat-store 
```

在 linux.in 文件中是这样的：

> tt2:30759。**257812** , tt2:46f04e84

窗户：</p>

```
vs2005 sp1: /O2 Precise (/fp:precise) 
```

在窗户里。文件中是这样的：

> tt2:30759。**257813** , tt2:46f04e84

为什么不一样？

====================================

我找到了我的案子的原因。

在 Windows 中，我使用 ofstream 输出到文件。它是 c++ 库。

在 linux 中，我只是使用 write 来输出到文件。这是c库。

当我在linux中使用ofstream时，输出是一样的。

毕竟谢谢大家~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:00:45.117

浮点数以二进制形式存储在计算机中。将它们打印成十进制浮点数时，它们有多种正确的表示形式。在您的情况下，它们都是正确的，因为它们都转换回原始二进制浮点值。查看我使用 GCC 编译的这个文件的输出：

```
#include <stdint.h>
#include <stdio.h>

int main()
{
    float a = 30759.257812f;
    float b = 30759.257813f;

    printf("%x\n%x\n", *(uint32_t *)&a, *(uint32_t *)&b);
} 
```

输出：

```
46f04e84
46f04e84 
```

因此，一个实现`printf`和朋友可以选择显示任何两个十进制浮点数。

# json - 来自 SignalR 的 Wijmo LineChart Live feed，来自 JSON URL 的初始数据点

> ID：12313983
> 
> 赞同：1
> 
> 时间：2012-09-07T07:54:02.293
> 
> 标签：json, signalr, wijmo

我已经为此苦苦挣扎了一段时间。太长。希望很快有人可以帮助我编写允许我执行以下操作的代码：

1.  在用户会话的过程中，我们正在创建动态 LineCharts，因为不同的操作发生然后到期。

2.  这些图表应该以大约 1000 个初始数据点数打开。我们的计划是从 JSON 查询中提取这些主要是静态数据（过去几分钟的股票价格）。

3.  在初始加载之后，当我们收到图表资产的定价数据时，我们正在使用 SignalR 将这些非周期性（IOW，持续轮询无用）价格变化传输到我们的图表。

所有数据库触发器和 SignalR 连接都已就位。我们没有得到的是如何进行初始加载，然后将数据源更改为 SignalR 提要。

更复杂的是，每个动态图表都有不同的初始负载，因此使用共享数据源也是一个问题。

任何帮助将不胜感激。乔伊

# c# - C# Generic Constraint - 如何引用当前类类型？

> ID：12313985
> 
> 赞同：11
> 
> 时间：2012-09-07T07:54:05.063
> 
> 标签：c#, generics

我有以下类/接口：

```
public abstract class AbstractBasePresenter<T> : IPresenter<T> 
    where T : class, IView
{
}

public interface IPresenter<T>
{
}

public interface IView<TV, TE, TP> : IView
    where TV : IViewModel
    where TE : IEditModel
    //where TP : AbstractBasePresenter<???>
{
}

public interface IView {} 
```

有什么方法可以将 IView<> 上的 TP 限制为从 AbstractBasePresenter 继承的类？

还是我唯一的选择是创建一个非通用 IPresenter 接口，然后更新 IPresenter 以实现它，然后使用检查“TP：IPresenter”？

谢谢

更新：

以下建议的答案不起作用：

```
public interface IView<TV, TE, TP> : IView
where TV : IViewModel
where TE : IEditModel
where TP : AbstractBasePresenter<IView<TV,TE,TP>>
{
} 
```

我将接口声明为：

```
public interface IInsuredDetailsView : IView<InsuredDetailsViewModel, InsuredDetailsEditModel, IInsuredDetailsPresenter>
{ }

public interface IInsuredDetailsPresenter : IPresenter<IInsuredDetailsView>
{ } 
```

编译器抱怨 IInsuredDetailsPresenter 不能分配给 AbstractBasePresenter>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T08:00:01.937

没问题，不需要另一个泛型参数：

```
public interface IView<TV, TE, TP> : IView
    where TV : IViewModel
    where TE : IEditModel
    where TP : AbstractBasePresenter<IView<TV,TE,TP>>
{
} 
```

编辑：更新的问题：

如果不需要 Presenter 从 AbstractBasePresenter 继承，请将代码更改为：

```
public interface IView<TV, TE, TP> : IView
    where TV : IViewModel
    where TE : IEditModel
    where TP : IPresenter<IView<TV,TE,TP>>
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T07:58:57.110

你可以这样做，但你需要为`IView<>`接口提供一个额外的类型参数：

```
public interface IView<TV, TE, TP, T> : IView
    where TV : IViewModel
    where TE : IEditModel
    where TP : AbstractBasePresenter<T>
    where T : class, IView
{
} 
```

**编辑：**

根据您问题中的版本：`IInsuredDetailsPresenter`绝对不能分配给`AbstractBasePresenter`. 由于您在原始问题中要求的约束，编译器正在抱怨。更具体地说，由于这部分

```
where TP : AbstractBasePresenter<T> 
```

看来您也想限制`TP`为接口。您可以尝试以下代码：

```
public interface IView<TV, TE, TP, T> : IView
    where TV : IViewModel
    where TE : IEditModel
    where TP : IPresenter<T>
{
} 
```

`T`不再需要约束，因为`IPresenter<T>`没有。当然，您可以以类似的方式调整 armen.shimoon 的答案。关键是用约束代替`AbstractBasePresenter<T>`约束`IPresenter<T>`。

# css - 使 div 宽度适合内容而不适合父级

> ID：12313989
> 
> 赞同：5
> 
> 时间：2012-09-07T07:54:37.950
> 
> 标签：css, inheritance, nowrap

我想为我拥有的按钮制作一个标签。我的问题是标签比按钮宽。我目前已经这样做了（简单示例）：

```
<div class="parent_container_the_icon">
    <div class="label">
        This is the label text
    </div>
<div> 
```

CSS：

```
.parent_container_the_icon {
    height: 50px;
    width: 50px;
    float: left;
}

.label {
    display: block;
    position: absolute;
    white-space: nowrap;
} 
```

我想要的是标签采用标签文本本身的宽度而不包裹文本。目前它不换行文本，但标签框中的文本溢出，因为该框只占用容器的最大宽度。

如何强制标签`div`适合文本的大小而不继承父级的宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:59:32.157

HTML：

```
 <div class="parent_container_the_icon">
      <div class="label">
           This it the label text
      </div>
 <div>​ 
```

CSS：

```
.parent_container_the_icon {
    height: 50px;
    min-width: 50px; /*<== changed width to min-width*/
    float: left;
}

.label {
    /*removed position:absolute*/
    display: block;
    white-space:nowrap;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T08:10:57.087

我想你得到了你想要的。也许检查另一个浏览器？
这是你的代码：[jsfiddle](http://jsfiddle.net/QkZa4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T10:49:09.517

您可以`white-space: nowrap;`在父类和`width: 100%;`子类中使用属​​性。

希望这个对你有帮助。