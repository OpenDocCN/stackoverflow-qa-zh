# StackOverflow 问答 11990000-11990999

# scala - 将 MongoDB 文档映射到具有类型但没有嵌入文档的案例类

> ID：11990003
> 
> 赞同：4
> 
> 时间：2012-08-16T14:57:07.163
> 
> 标签：scala, mongodb, subset, salat

[Subset](https://github.com/osinka/subset)看起来像一个有趣的、精简的 MongoDB 包装器。

在给出的示例之一中，有推文和用户。但是，`User`是 的子*文档*。`Tweet`在经典 SQL 中，这将被规范化为两个单独的表，其外键从 Tweet 到 User。在 MongoDB 中，这不需要 a `DBRef`，存储用户的`ObjectId`就足够了。

在 Subset 和 Salat 中，这将导致这些案例类：

```
case class Tweet(_id: ObjectId, content: String, userId: ObjectId)
case class User(_id: ObjectId, name: String) 
```

因此，不能保证 Tweet 中的 ObjectId 实际上解析为 User（使其类型安全性降低）。我还必须为每个引用 User 的类编写相同的查询（或将其移动到某些特征）。

所以我想要实现的是`case class Tweet(_id: ObjectId, content: String, userId: User)`在代码中和`ObjectId`数据库中拥有 , 。这可能吗？如果可以，怎么做？什么是好的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:18:27.513

是的，这是可能的。实际上，它甚至比在“推文”中拥有“用户”子文档还要简单。当 "user" 是一个引用时，它只是一个标量值，MongoDB 和 "Subset" 没有查询子文档字段的机制。

我为您准备了一个简单的 REPLable 代码片段（假设您有两个集合——“tweets”和“users”）。

准备...

```
import org.bson.types.ObjectId
import com.mongodb._
import com.osinka.subset._
import Document.DocumentId

val db = new Mongo("localhost") getDB "test"
val tweets = db getCollection "tweets"
val users = db getCollection "users" 
```

我们的`User`案例课

```
case class User(_id: ObjectId, name: String) 
```

推文和用户的许多字段

```
val content = "content".fieldOf[String]
val user = "user".fieldOf[User]
val name = "name".fieldOf[String] 
```

* * *

这里开始发生更复杂的事情。我们需要的是一个`ValueReader`能够`ObjectId`基于字段名称获取的，然后转到另一个集合并从那里读取一个对象。

这可以写成一段代码，一次完成所有事情（您可能会在答案历史记录中看到这样的变体），但将其表达为读者的组合会更惯用。假设我们有一个`ValueReader[User]`从 读取的`DBObject`：

```
val userFromDBObject = ValueReader({
  case DocumentId(id) ~ name(name) => User(id, name)
}) 
```

剩下的是一个泛型，它使用提供的底层读取器从特定集合`ValueReader[T]`中期望并检索对象：`ObjectId`

```
class RefReader[T](val collection: DBCollection, val underlying: ValueReader[T]) extends ValueReader[T] {
  override def unpack(o: Any):Option[T] =
    o match {
      case id: ObjectId =>
        Option(collection findOne id) flatMap {underlying.unpack _}
      case _ =>
        None
    }
} 
```

那么，我们可以说我们从引用中读取 s 的类型类`User`仅仅是

```
implicit val userReader = new RefReader[User](users, userFromDBObject) 
```

> （我很感谢你提出这个问题，因为这个用例非常罕见，我没有真正的动机来开发一个通用的解决方案。我想我最终需要将这种帮助程序包含到“子集”中。我会很感激你的对此方法的反馈）

* * *

这就是你将如何使用它：

```
import collection.JavaConverters._

tweets.find.iterator.asScala foreach { 
  case Document.DocumentId(id) ~ content(content) ~ user(u) =>
    println("%s - %s by %s".format(id, content, u))
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:43:04.970

Alexander Azarov 的回答可能很好，但我个人不会这样做。

您所拥有的是一条只有 ObjectId 对用户的引用的推文。并且您希望在推文加载期间加载用户，因为对于您的域而言，它可能更容易操作。在任何情况下，除非您使用子文档（并不总是一个好的选择），否则您必须再次查询数据库以检索用户数据，这就是 Alexander Azarov 所做的。

您宁愿做一个转换函数，将 Tweet 转换为 TweetWithUser 或类似的东西。

```
 def transform(tweet: Tweet) = TweetWithUser( tweet.id, tweet.content, findUserWithId(tweet.userId) ) 
```

**我真的不明白为什么您会期望一个框架来解决您本可以在一行代码中轻松完成的事情。**

请记住，在您的应用程序中，在某些情况下您甚至不需要整个 User 对象，因此查询两次数据库的成本很高，而并非总是需要。当你真的需要用户数据时，你应该只使用包含完整用户数据的案例类，而不是总是加载完整的用户数据，因为它看起来更方便。

或者，如果您想操作 User 对象，您将拥有一个 User 代理，您可以在其上直接访问 id 属性，并且在任何其他访问时，都会完成 db 查询。在 Java/SQL 中，Hibernate 正在处理关系的延迟加载，但我不确定将它与 MongoDB 一起使用是否是一个好主意，它会破坏不变性

# objective-c - 每次运行应用程序时 CFUUID 都会生成新的 UUID

> ID：11990005
> 
> 赞同：0
> 
> 时间：2012-08-16T14:57:14.817
> 
> 标签：objective-c, keychain

我正在尝试使用不推荐使用 UUID 方法的替代方法将我的唯一密钥存储在钥匙串中，以便我可以使用它来访问我的在线数据库。

我正在这样做：

```
 CFUUIDRef uuid = CFUUIDCreate(NULL);
            CFStringRef generatedUUIDString = CFUUIDCreateString(NULL, uuid);
            CFRelease(uuid);
            NSString* hashKey = [(NSString*)generatedUUIDString autorelease];

            KeychainItemWrapper *keychainItem = [[KeychainItemWrapper alloc] initWithIdentifier:@"MyGAME" accessGroup:nil];
            [keychainItem setObject:hashKey forKey:(id)kSecValueData];

            NSLog(@"%@", [keychainItem objectForKey:(id)kSecValueData]);

            [keychainItem release]; 
```

但是当我从钥匙串中检索我的钥匙时，它每次都会返回我新的值。我正在使用 KeychainItemWrapper。每次我调用下面的方法时，hashkey 不应该相同吗？我在这里做错了什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:04:26.673

你必须把它保存到你的`NSUserDefaults`

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setValue:UUID forKey:@"UUID"]; 
```

并在您的应用程序每次启动时检查它是否已经存在。

```
if([defaults objectForKey:@"UUID"]){...} 
```

# java - jgroup 是否使用校验和在 UDP 上变得可靠？

> ID：11990008
> 
> 赞同：0
> 
> 时间：2012-08-16T14:57:27.557
> 
> 标签：java, messaging, checksum, multicast, jgroups

我试图了解 jgroup 如何实现可靠的多播。我已阅读手册并了解到他们使用的是否定确认。但是当集群成员收到损坏的消息时会发生什么？我在官方手册中找不到任何相关内容。（[http://www.jgroups.org/manual/html_single/index.html#d0e5392](http://www.jgroups.org/manual/html_single/index.html#d0e5392)）

有人知道他们是否对 UDP-Header 和数据使用校验和吗？在这种情况下，接收方会要求重传吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:04:55.650

[UDP](http://en.wikipedia.org/wiki/User_Datagram_Protocol)已经进行了标头和数据校验和，因此内核网络堆栈将丢弃错误的数据报，并且不会传递给用户级应用程序。

# javascript - 使用 jquery 在选择框中设置特定选项

> ID：11990011
> 
> 赞同：1
> 
> 时间：2012-08-16T14:57:35.430
> 
> 标签：javascript, jquery

我无法执行所需的事件。

```
 <?php
    include_once 'includes/db.php';
        $result = mysql_query('SELECT country,code FROM countries') or die(mysql_error());

        echo '<select id="CountryCode">';
        echo '<option value="Select">Select</option>';
        while ($row = mysql_fetch_array($result))
        {
           echo '<option value=$row["country"]>'.$row['country'].'</option>';
        }
        echo '<option value="Other">Other</option>';
        echo '</select>';
    ?>
<input id="country" type="hidden" value="IN"/>
<script>
$(function() 
{
$('#CountryCode').val($('#country').val());
});
</script> 
```

一切正常。但是选择框中没有选择想要的项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:16:51.270

您需要将选项的属性“selected”设置为“selected”。试试这个（未经测试）：

```
$("#CountryCode").val($('#country').val()).attr('selected','selected'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:11:11.083

`echo`您的循环中的in`while()`应如下所示：

```
echo '<option value="'.$row["country"].'">'.$row['country'].'</option>'; 
```

您上面的字符串打印的是文字`$row["country"]`而不是它包含的值。

# mysql - 索引失败。回滚所有更改。(Solr 数据导入)

> ID：11990015
> 
> 赞同：2
> 
> 时间：2012-08-16T14:57:42.253
> 
> 标签：mysql, linux, solr, lucene, dataimporthandler

当我尝试运行`domain.com:8080/solr/dataimport?command=full-import`时，出现错误`Indexing failed. Rolled back all changes.`

没有额外的错误消息告诉我什么时候出错了？有什么建议么？

**数据配置.xml**

```
 <dataConfig>

    <dataSource 
        name="mysql"
        driver="com.mysql.jdbc.Driver" 
        url="jdbc:mysql://localhost/databasename" 
        user="myusername" 
        password="mypassword" />

    <document>

        <entity 
            name="posts" 
            datasource="mysql"
            query="select id, title, description from posts"
            deltaQuery="select id, title, description from posts where updated_at > '${dataimporter.last_index_time}'">\
        </entity>
        <field column="id" name="id" indexed="true" stored="true" />
        <field column="title" name="title" indexed="true" stored="true" />
        <field column="description" name="description" indexed="true" stored="true" />

    </document>

</dataConfig> 
```

**输出**

```
<response>
  <lst name="responseHeader">
    <int name="status">0</int>
    <int name="QTime">0</int>
  </lst>
    <lst name="initArgs">
    <lst name="defaults">
    <str name="config">/usr/local/solr/conf/data-config.xml</str>
  </lst>
</lst>
<str name="command">full-import</str>
<str name="status">idle</str>
<str name="importResponse"/>
<lst name="statusMessages">
  <str name="Time Elapsed">0:0:12.227</str>
  <str name="Total Requests made to DataSource">0</str>
  <str name="Total Rows Fetched">0</str>
  <str name="Total Documents Processed">0</str>
  <str name="Total Documents Skipped">0</str>
  <str name="Full Dump Started">2012-08-16 14:50:07</str>
  <str name="">Indexing failed. Rolled back all changes.</str>
  <str name="Rolledback">2012-08-16 14:50:08</str>
</lst>
<str name="WARNING">
  This response format is experimental. It is likely to change in the future.
</str>
</response> 
```

**日志**

```
Aug 16, 2012 3:15:28 PM org.apache.solr.common.SolrException log
  SEVERE: Full Import failed:java.lang.RuntimeException: java.lang.RuntimeException: org.apache.solr.handler.dataimport.DataImportHandlerException: Could not load driver: com.mysql.jdbc.Driver Processing Document # 1
    at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:264)
    at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:375)
    at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:445)
    at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:426)
  Caused by: java.lang.RuntimeException: org.apache.solr.handler.dataimport.DataImportHandlerException: Could not load driver: com.mysql.jdbc.Driver Processing Document # 1
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:621)
    at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:327)
    at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:225)
    ... 3 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:08:56.163

有关问题的所有信息都在日志​​文件中（通常：catalina.out）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T14:41:25.403

在我看来，您缺少 solr mysql 驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-11T22:19:38.760

或者如果你有 solr mysql 连接器，它就找不到它。确保它位于正确的 lib 目录（`solr/yourdb/lib`和/或`example/lib`）中，或将其放在可访问的地方并添加：

```
{lib dir="path/to/lib/dir/containing/mysql-connecter/" regex="mysql-connector-java-\d.*\.jar" } 
```

到您的 solrconfig.xml 文件。

我把它放在上层的 solr-4.X/dist/ 文件夹中，然后放

```
{lib dir="../../../../dist/" regex="mysql-connector-java-\d.*\.jar"} 
```

在 solr config.xml 中

# php - 通过php访问linux服务器上的文件

> ID：11990016
> 
> 赞同：0
> 
> 时间：2012-08-16T14:57:46.537
> 
> 标签：php, linux

我的 php 安装在本地主机上。我正在尝试通过 PHP 访问 linux 服务器上的文件。现在我使用 Putty 来访问这个文件。我正在使用主机名 10.8.0.7 登录，我正在使用`more /dba/.passwords_admin`命令访问此文件。它适用于 Putty。但是，我很困惑如何从 PHP 访问这个文件。我试过 fopen，file_get_contents; 但它不工作。有关如何访问此文件的任何建议？？？

谢谢你

# validation - 通过理解线程化`Try`s

> ID：11990017
> 
> 赞同：4
> 
> 时间：2012-08-16T14:57:47.967
> 
> 标签：validation, scala, pattern-matching, scala-2.10, for-comprehension

[由另一个问题](https://stackoverflow.com/revisions/5cbd16fb-14e0-4870-aae7-b140601b1e3e/view-source)触发（尽管随后已被编辑掉），我想尝试使用 for-comprehensions将调用链接到 Scala 2.10 的`Try`构造（参见[此演示文稿）是多么容易。](https://speakerdeck.com/u/heathermiller/p/futures-and-promises-in-scala-2-dot-10)

这个想法是有一个标记列表并将它们与一系列模式匹配，然后返回第一个错误或成功匹配的模式。我得到了以下非常尴尬的版本，我想知道这是否可以变得更简单更好：

```
import util.Try

trait Token
case class Ident  (s: String) extends Token
case class Keyword(s: String) extends Token
case class Punct  (s: String) extends Token
case object NoToken extends Token
case class FunctionDef(id: Ident)

case class Expect[A](expectation: String)(pattern: PartialFunction[Token, A]) {
  def unapply(tup: (Try[_], Token)) = Some(tup._1.map { _ => 
     pattern.lift(tup._2).getOrElse(throw new Exception(expectation))
  })
} 
```

现在构建期望`Keyword("void") :: Ident(id) :: Punct("(") :: Punct(")") :: tail`

```
val hasVoid   = Expect("function def starts with void") { case Keyword("void") => }
val hasIdent  = Expect("expected name of the function") { case id: Ident       => id }
val hasOpen   = Expect("expected opening parenthesis" ) { case Punct("(")      => }
val hasClosed = Expect("expected closing parenthesis" ) { case Punct(")")      => } 
```

构建一个完整的测试用例：

```
def test(tokens: List[Token]) = {
  val iter = tokens.iterator
  def next(p: Try[_]) = Some(p -> (if (iter.hasNext) iter.next else NoToken))
  def first() = next(Try())

  val sq = for {
    hasVoid  (vd) <- first()
    hasIdent (id) <- next(vd)
    hasOpen  (op) <- next(id)
    hasClosed(cl) <- next(op)
  } yield cl.flatMap(_ => id).map(FunctionDef(_))

  sq.head
} 
```

下面验证测试方法：

```
// the following fail with successive errors
test(Nil)
test(Keyword("hallo") :: Nil)
test(Keyword("void" ) :: Nil)
test(Keyword("void" ) :: Ident("name") :: Nil)
test(Keyword("void" ) :: Ident("name") :: Punct("(") :: Nil)
// this completes
test(Keyword("void" ) :: Ident("name") :: Punct("(") :: Punct(")") :: Nil) 
```

现在特别是附加`flatMap`和`map`输入`yield`似乎很可怕，以及需要调用`head`for 理解的结果。

有任何想法吗？`Try`非常不适合理解吗？不应该`Either`或`Try`“固定”以允许这种类型的线程（例如，允许`Try`作为直接结果类型`unapply`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T15:15:35.937

诀窍似乎是*不在**内部*结构中创建`Try`实例，而是让它抛出异常并构造一个*外部*结构。 **`Try`**

 **首先，让我们摆脱`Try[Unit]`'s：

```
case class Expect(expectation: String)(pattern: PartialFunction[Token, Unit]) {
  def unapply(token: Token) = 
    pattern.isDefinedAt(token) || (throw new Exception(expectation))
}

case class Extract[A](expectation: String)(pattern: PartialFunction[Token, A]) {
  def unapply(token: Token) = Some(
    pattern.lift(token).getOrElse(throw new Exception(expectation))
  )
} 
```

然后检查变为：

```
val hasVoid   = Expect ("function def starts with void") { case Keyword("void") => }
val getIdent  = Extract("expected name of the function") { case id: Ident       => id }
val hasOpen   = Expect ("expected opening parenthesis" ) { case Punct("(")      => }
val hasClosed = Expect ("expected closing parenthesis" ) { case Punct(")")      => } 
```

以及测试方法：

```
def test(tokens: List[Token]) = Try {
  val iter = tokens.iterator
  def next() = Some(if (iter.hasNext) iter.next else NoToken)

  (for {
    hasVoid()    <- next()
    getIdent(id) <- next()
    hasOpen()    <- next()
    hasClosed()  <- next()
  } yield FunctionDef(id)).head  // can we get rid of the `head`?
} 
```**

# c++ - 为什么执行顺序在“为什么不专门化功能模板”中很重要

> ID：11990019
> 
> 赞同：2
> 
> 时间：2012-08-16T14:57:48.873
> 
> 标签：c++

我已经通过 VS2010 运行了以下代码。

```
#include <iostream>

template<class T> // (a) a base template 
void f( T )
{    std::cout << "(a)" << std::endll;}

template<class T> // (b) a second base template, overloads (a) 
void f( T* )     //     (function templates can't be partially 
{    std::cout << "(b)" << std::endll;}

template<>        // (c) explicit specialization of (b) 
void f<>(int*)
{    std::cout << "(c)" << std::endll;}

int main(int argc, char* argv[])
{
    int *p = new int(10); 
    f( p ); // '(c)'

    return 0;
} 
```

////////////////

```
#include <iostream>

template<class T> // (a) same old base template as before 
void f( T )
{    std::cout << "(a)" << std::endll;}

template<>        // (c) explicit specialization, this time of (a)
void f<>(int*)
{    std::cout << "(c)" << std::endll;}

template<class T> // (b) a second base template, overloads (a) 
void f( T* )
{    std::cout << "(b)" << std::endll;}

int main(int argc, char* argv[])
{
    int *p = new int(10); 
    f( p ); // '(b)'

    return 0;
} 
```

输出结果为`(c)`。但是，如果我将 (c) 代码块移动到 (b) 前面，则输出结果为`(b)`. 我在这里阅读了相关文章[http://www.gotw.ca/publications/mill17.htm](http://www.gotw.ca/publications/mill17.htm)。还是会糊涂。

为什么代码的顺序在案例中很重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:07:51.243

我认为您已经掌握了问题中的大部分信息。问题是有两个基本模板是重载的并且是不相关的。

如果仅在声明它们中的第一个时执行特化，则编译器将认为这是第一个模板的特化`T == int*`。现在，在声明了两个模板之后，当您执行调用时，编译器将只查看基本模板，并确定第二个模板更适合表达式。第二个模板没有特化，因此使用基本模板定义。

让我强调一下：模板专业化只有在选择了它们的基本模板后才会发挥作用。它们不会影响编译器将选择的基本模板。

如果将特化移动到声明第二个模板*之后*`T == int`，编译器会将该特化与带有. 在这种情况下，当编译器选择第二个模板作为`main`专业化调用的最佳匹配时，您将获得专业化行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:09:22.177

正如文章中所解释的，当您移动专业化时，它会更改正在专业化的功能。当您将专业化放在 (b) 之前时，它会专门化 (a)。

```
template<>        // (c) explicit specialization of (a) <-- here
void f<>(int*)
{    cout << "(c)" << endl;} 
```

在这两种情况下，当您调用 时`f(p)`，编译器首先会查看 (a) 和 (b)，并确定哪个重载更合适。正如您列出的文章所解释的那样，专业化不参与重载解决，因此在这两个示例中，它都选择了 (b)。此时，它会寻找 (b) 的任何特化。

在第一种情况下，因为你用 (c) 专门化了 (b)，所以它执行 (c)。在第二种情况下，由于您没有专门化 (b)，它执行 (b)。

编辑：防止订单重要的最简单方法是在提供专业化之前先声明（a）和（b）。在这种情况下，编译器能够推断出您的意图。见[http://ideone.com/qj2JC](http://ideone.com/qj2JC)

# ajax - Rails Ajax Div消失

> ID：11990020
> 
> 赞同：0
> 
> 时间：2012-08-16T14:57:51.670
> 
> 标签：ajax, ruby-on-rails-3, jquery, link-to

我有一个应用程序，我正在尝试使用 :remote 执行 Ajax link_to 以刷新一些 div。当我单击“途中”按钮时，它会更新状态 div，但会使时间 div 消失。这是我的代码：

```
index.html.erb
<h1>MDT Interface</h1>

<div class="row">
<div class="span9">
<div id="unitdisplay">  
<%= render 'unitdisplay'%>
</div>
<div id="calldisplay">
<%= render 'calldisplay'%>
</div>
</div>
<div id="status" class="span3">
<%= render 'status' %>
<div id="times">
<%= render 'times' %>
</div>
</div>
</div>

index.js.erb
$("#unitdisplay").html("<%= escape_javascript render("unitdisplay") %>");
$("#calldisplay").html("<%= escape_javascript render("calldisplay") %>");
$("#status").html("<%= escape_javascript render("status") %>");
$("#times").html("<%= escape_javascript render("times") %>");

_display.html.erb
<%= link_to 'En Route', en_route_mdt_index_path(:call_id => call.id), :class => 'btn btn-warning', :method => :put, :remote => true %>

mdt_controller.rb
def en_route
     @unit = current_user.unit
     @unit.status = Status.find_by_unit_status("En Route")
     @unit.save

     if params.has_key? :call_id
       @call = current_user.calls.find(params[:call_id])
       @call.en_route_time = Time.zone.now
       @call.save
     end

     @call = Call.open_calls
     @open = current_user.calls.open_calls
      respond_to do |format|
         format.html { redirect_to mdt_path }
       end
   end 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:04:01.277

我的 index.html.erb 将状态 div 包裹在时间 div 周围。所以 div 没有被 js/html 调用读取。分离 div 并开始工作。

# java - 基于 USB 的 Eclipse 项目

> ID：11990022
> 
> 赞同：0
> 
> 时间：2012-08-16T14:58:08.580
> 
> 标签：java, eclipse

我有两台电脑，想通过保存和打开我的 U 盘中的项目来在 eclipse 中共享一个 java 项目。

但我似乎不能让它很容易地工作。

我需要采取哪些步骤才能正确设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:18:40.067

应该劝阻这些事情。我的建议是使用像[Git](http://git-scm.com/)这样的 SCM（源代码控制管理）并在外部驱动器上保留一个存储库（如果使用 Git，则在 USB 记忆棒上的裸存储库和每台机器上的本地存储库）。一开始你会花相当长的时间来适应，但很快就会得到回报（你将拥有描述性的变更日志和灾难恢复设施）

[Eclipse 通过Egit](http://www.eclipse.org/egit/download/)和 SVN 内置支持 Git 。

当您像这样共享一个项目时，您可能会遇到与外部 JAR 的类路径引用相关的问题，这可以通过以下方式解决

1.  使用`lib/`文件夹（从而将 JAR 置于版本控制之下）
2.  使用环境变量，如`$JAVA_LIB`
3.  使用 Maven 或 Ivy 之类的依赖管理器（同样，有很多东西，但即使在短期内也会支付）

对于您不想置于版本控制之下的现有项目，您可以简单地（同样，可能缺少库错误）使用菜单`File > Import > General > Existing projects into workspace`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:46:44.100

为此，我强烈建议使用 cvs、svn 或其他版本控制存储库。试图手动管理它最终会咬你。

但是，如果您坚持，我所知道的最好的方法是在 Eclipse 中通过取消选择**New Java Project**向导中的*Use Default Location*选项来创建项目。这允许您为项目内容指定一个外部位置，在您的情况下是 USB 驱动器。您必须确保以下几点：

 ***   Eclipse 运行时始终插入 USB 驱动器。
*   每次将 USB 驱动器从一台计算机移动到另一台计算机时，请刷新整个项目。
*   对 JAR 的任何引用要么在项目内部（例如，在`/lib`项目内的文件夹中），要么使用[Classpath Variables](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/preferences/java/buildpath/ref-preferences-classpath-variables.htm)。

这将非常乏味，这就是为什么总是建议不要尝试这个并使用版本控制存储库来代替。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-16T15:27:53.433

我这样做。对于我在 SVN 或 GIT 中的一些项目。对我来说，只有一个 Eclipse 和一个工作区更重要。不幸的是，这仅限于 Windows（或一个操作系统）。诀窍是确保它始终具有相同的驱动器号。我首先尝试使用 subst，但我经常忘记。但是使用 Windows 的驱动器管理器一切正常。**

# c++ - C++ 符号函数 - 来自 MatLab？

> ID：11990030
> 
> 赞同：2
> 
> 时间：2012-08-16T14:58:29.733
> 
> 标签：c++, matlab, sign

我正在尝试用 C++ 重写一些 MatLab 代码，但我遇到了这个问题：

```
currentsign = sign(vector(i)); 
```

我在网上找到了这个链接： http: [//www.mathworks.co.uk/help/techdoc/ref/sign.html](http://www.mathworks.co.uk/help/techdoc/ref/sign.html)

我只是想知道 C++ 中是否有符号函数？如果没有，任何人都可以建议任何有关创建它的教程。

谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T15:06:08.317

```
template <typename T>
int sign (const T &val) { return (val > 0) - (val < 0); } 
```

[归功于 Ambroz Bizjak](https://stackoverflow.com/a/10997428/315052)。

```
template <typename T>
std::vector<int> sign (const std::vector<T> &v) {
    std::vector<int> r(v.size());
    std::transform(v.begin(), v.end(), r.begin(), (int(*)(const T&))sign);
    return r;
} 
```

[ideone 上的完整示例](http://ideone.com/75nkr)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T15:06:12.367

我会建议

首先，编写一个函子函数，它接受单个元素并返回`1`，`-1`或者`0`取决于元素的值

其次，将[std::transform](http://en.cppreference.com/w/cpp/algorithm/transform)与此函数/函子一起使用以获取输入容器并用所需值填充第二个容器

```
template <typename T>
int signum(const T& val) {
  // implement signum logic
}

#include <vector>
#include <algorithm>

int main() {

  std::vector<int> data = ....;
  std::vector<int> signs(data.size());
  std::transform(data.begin(), data.end(), signs.begin(), signum<int>);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T15:11:45.017

```
#include <algorithm>
#include <iostream>
#include <iomanip>
#include <vector>

inline int get_signum(int val) {
    return val < 0 ? -1
        : val == 0 ? 0
        : 1;
}

int main() {
    std::vector<int> values;
    for (int i = -5; i < 6; ++i)
        values.push_back(i);
    std::vector<int> signum(values.size());
    std::transform(values.begin(), values.end(), signum.begin(), get_signum);
    for (int i = 0; i < values.size(); ++i) {
        std::cout << std::setw(2) << values[i] << ' ' << signum[i] << std::endl;
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T15:13:27.743

好吧，您可以在编译时使用模板专业化来做到这一点。
您可以使用`sign<n>::Positive`，`sign<n>::Negetive`也`sign<n>::Zero`可以使用与 Matlab相同的 which `sign<n>::Sign`。`1|0|-1`[`sign`](http://www.mathworks.in/help/techdoc/ref/sign.html)

```
#include <iostream>

template<int n>
struct sign{
    enum{
      Positive = (n > 0),
      Negetive = (n < 0),
      Zero     = 0,
      Sign     = ((n > 0) ? 1 : -1)
    };
};

template<>
struct sign<0>{
    enum{
      Positive = 0,
      Negetive = 0,
      Zero     = 1,
      Sign     = 0
    };
};

int main(){
    std::cout << sign<0>::Positive  << sign<0>::Negetive  << sign<0>::Zero  << sign<0>::Sign  << std::endl;
    std::cout << sign<1>::Positive  << sign<1>::Negetive  << sign<1>::Zero  << sign<1>::Sign  << std::endl;
    std::cout << sign<-1>::Positive << sign<-1>::Negetive << sign<-1>::Zero << sign<-1>::Sign << std::endl;

    return 0;
} 
```

你曾经在`sign(n)`那里做，在这里你会做`sign<n>::Sign`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T15:11:20.273

C99 有`signbit()`and `copysign()`，这似乎是`glibc`在 Linux 上实现的。您没有指定您使用的平台，所以我不确定这是否有帮助......

# html - 在 HTML5 中使 div 填充表格单元格

> ID：11990032
> 
> 赞同：0
> 
> 时间：2012-08-16T14:58:34.837
> 
> 标签：html, html-table

我在 HTML 表格单元格中有一个 div，但我无法让它填满整个单元格。

```
<body style="background-color: ButtonFace;">
        <form id="form1" runat="server">
            <table border="1" style="border-collapse:collapse; border-color:Red;">
                <tr>
                    <td>
                        <div style="border:solid 1px green;background-color: Yellow;">
                            test
                        </div>
                    </td>
                </tr>
            </table>
        </form>
    </body> 
```

它有一个间隙，（灰色）背景显示出来。

![在此处输入图像描述](../Images/84590a7204a02cef311c42a2072a71c3.png)

我敢肯定它一定很容易删除，但我就是不知道怎么删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:02:39.313

请申请

```
padding:0; 
```

到`td`

或者您可以尝试使用

```
border-spacing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:07:52.880

你必须为 TD 设置 padding 0

```
 <body style="background-color: ButtonFace;">
            <form id="form1" runat="server">
                <table border="1" style="border-collapse:collapse; border-color:Red;">
                    <tr>
                        <td style="padding:0px"> <-- Change
                            <div style="border:solid 1px green;background-color: Yellow;">
                                test
                            </div>
                        </td>
                    </tr>
                </table>
            </form>
        </body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T15:08:38.910

您需要为表格添加“cellpadding”并将其设置为“0”

```
<body style="background-color: ButtonFace;">
    <form id="form1" runat="server">
        <table cellpadding="0" border="1" style="border-collapse:collapse; border-color:Red;">
            <tr>
                <td >
                    <div style="border:solid 1px green;background-color: Yellow;">
                        test
                    </div>
                </td>
            </tr>
        </table>
    </form>
</body> 
```

-缺口

# html - 当我从 localhost 上的 apache 访问页面时，页面在浏览器中显示良好

> ID：11990034
> 
> 赞同：0
> 
> 时间：2012-08-16T14:58:36.370
> 
> 标签：html, apache, browser

我有一个网页，当我使用 Web 浏览器在本地访问它时，它显示得很好，只是打开 index.html，但是当我将它复制到 apache 中的 htdocs 中并访问它时显示得不好。

我在 errors.log 中有以下错误：

```
[Thu Aug 16 16:18:49 2012] [error] [client 127.0.0.1] File does not exist: C:/Program  Files/Apache2.2/htdocs/chorus-theme/images/chorus/tab-round-left3.gif, referer: http://localhost:8080/TCS/group/guest/default.htm
[Thu Aug 16 16:18:49 2012] [error] [client 127.0.0.1] File does not exist: C:/Program Files/Apache2.2/htdocs/chorus-theme/images/chorus/tab-round-right3.gif, referer: http://localhost:8080/TCS/group/guest/default.htm
[Thu Aug 16 16:18:49 2012] [error] [client 127.0.0.1] File does not exist: C:/Program Files/Apache2.2/htdocs/language, referer: http://localhost:8080/TCS/group/guest/default.htm
[Thu Aug 16 16:18:49 2012] [error] [client 127.0.0.1] File does not exist: C:/Program Files/Apache2.2/htdocs/language, referer: http://localhost:8080/TCS/group/guest/default.htm
[Thu Aug 16 16:18:49 2012] [error] [client 127.0.0.1] File does not exist: C:/Program Files/Apache2.2/htdocs/language, referer: http://localhost:8080/TCS/group/guest/default.htm
[Thu Aug 16 16:18:49 2012] [error] [client 127.0.0.1] File does not exist: C:/Program Files/Apache2.2/htdocs/language, referer: http://localhost:8080/TCS/group/guest/default.htm
[Thu Aug 16 16:18:49 2012] [error] [client 127.0.0.1] File does not exist: C:/Program Files/Apache2.2/htdocs/language, referer: http://localhost:8080/TCS/group/guest/default.htm 
```

谁能帮忙，

谢谢，

尼古拉斯·莫让

好的，我得到了答案，这里是：

该错误来自Apache无法解释以下链接的事实：

日志中的错误是路径不好：

而不是拥有 /chorus-theme，我应该拥有 ../../chorus-theme

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:06:41.527

在您的 HTML 和 CSS 中，将路径更改为

/合唱主题/图像...

和

/语....

看起来您正在尝试链接到计算机文件系统中的图像和文件，但是

# asp.net-mvc - 如何将 Web API 添加到现有的 ASP.NET MVC 4 Web 应用程序项目？

> ID：11990036
> 
> 赞同：371
> 
> 时间：2012-08-16T14:58:39.297
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, visual-studio-2012

我希望将[ASP.NET Web API](http://www.asp.net/web-api)添加到在 Visual Studio 2012 中开发的 ASP.NET MVC 4 Web 应用程序项目中。我必须执行哪些步骤才能将功能正常的 Web API 添加到项目中？我知道我需要一个从 ApiController 派生的控制器，但这就是我所知道的。

如果我需要提供更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：471
> 
> 时间：2012-08-17T07:33:40.013

The steps I needed to perform were:

1.  Add reference to `System.Web.Http.WebHost`.
2.  Add `App_Start\WebApiConfig.cs` (see code snippet below).
3.  Import namespace `System.Web.Http` in `Global.asax.cs`.
4.  Call `WebApiConfig.Register(GlobalConfiguration.Configuration)` in `MvcApplication.Application_Start()` (in file `Global.asax.cs`), *before* registering the default Web Application route as that would otherwise take precedence.
5.  Add a controller deriving from `System.Web.Http.ApiController`.

I could then learn enough from [the tutorial](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api) (Your First ASP.NET Web API) to define my API controller.

App_Start\WebApiConfig.cs:

```
using System.Web.Http;

class WebApiConfig
{
    public static void Register(HttpConfiguration configuration)
    {
        configuration.Routes.MapHttpRoute("API Default", "api/{controller}/{id}",
            new { id = RouteParameter.Optional });
    }
} 
```

Global.asax.cs:

```
using System.Web.Http;

...

protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    RegisterGlobalFilters(GlobalFilters.Filters);
    WebApiConfig.Register(GlobalConfiguration.Configuration);
    RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
} 
```

**Update 10.16.2015:**

Word has it, the NuGet package Microsoft.AspNet.WebApi must be installed for the above to work.

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2013-02-14T20:23:06.263

更新 11/22/2013 - 这是最新的 WebApi 包：

```
Install-Package Microsoft.AspNet.WebApi 
```

原始答案（这是一个较旧的 WebApi 包）

```
Install-Package AspNetWebApi 
```

更多[细节](http://wildermuth.com/2012/2/22/WebAPI_for_the_MVC_Guy)。

* * *

## 回答 #3

> 赞同：79
> 
> 时间：2015-12-10T06:03:27.260

**在我的 MVC 5 项目中添加 WebAPI。**

1.  打开 NuGet 包管理器控制台并运行

    ```
    PM> Install-Package Microsoft.AspNet.WebApi 
    ```

2.  添加对`System.Web.Routing`,`System.Web.Net`和`System.Net.Http`dll 的引用（如果还没有的话）

3.  右键单击控制器文件夹 > 添加新项目 > Web > 添加 Web API 控制器

4.  Web.config 会被 VS 相应修改

5.  `Application_Start`如果还没有，请添加方法

    ```
    protected void Application_Start()
    {
        //this should be line #1 in this method
        GlobalConfiguration.Configure(WebApiConfig.Register);
    } 
    ```

6.  添加以下类（我在 global.asax.cs 文件中添加）

    ```
    public static class WebApiConfig
    {
         public static void Register(HttpConfiguration config)
         {
             // Web API routes
             config.MapHttpAttributeRoutes();

             config.Routes.MapHttpRoute(
                 name: "DefaultApi",
                 routeTemplate: "api/{controller}/{id}",
                 defaults: new { id = RouteParameter.Optional }
             );
         }
     } 
    ```

7.  相应地修改 web api 方法

    ```
    namespace <Your.NameSpace.Here>
    {
        public class VSController : ApiController
        {
            // GET api/<controller>   : url to use => api/vs
            public string Get()
            {
                return "Hi from web api controller";
            }

            // GET api/<controller>/5   : url to use => api/vs/5
            public string Get(int id)
            {
                return (id + 1).ToString();
            }
        }
    } 
    ```

8.  重建和测试

9.  构建一个简单的html页面

    ```
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title></title>    
        <script src="../<path_to_jquery>/jquery-1.9.1.min.js"></script>
        <script type="text/javascript">
            var uri = '/api/vs';
            $(document).ready(function () {
                $.getJSON(uri)
                .done(function (data) {
                    alert('got: ' + data);
                });

                $.ajax({
                    url: '/api/vs/5',
                    async: true,
                    success: function (data) {
                        alert('seccess1');
                        var res = parseInt(data);
                        alert('got res=' + res);
                    }
                });
            });
        </script>
    </head>
    <body>
    ....
    </body>
    </html> 
    ```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2014-07-22T05:13:11.997

只要在控制器文件夹下添加“WebApi 控制器”，Visual Studio 就会自动处理依赖关系；

> Visual Studio 已将 ASP.NET Web API 2 的全套依赖项添加到项目“MyTestProject”。
> 
> 项目中的 Global.asax.cs 文件可能需要进行其他更改才能启用 ASP.NET Web API。
> 
> 1.  添加以下命名空间引用：
>     
>     
>     
>     使用 System.Web.Http；使用 System.Web.Routing；
>     
>     
> 2.  如果代码尚未定义 Application_Start 方法，请添加以下方法：
>     
>     
>     
>     受保护的无效应用程序启动（）{}
>     
>     
> 3.  将以下行添加到 Application_Start 方法的开头：
>     
>     
>     
>     GlobalConfiguration.Configure(WebApiConfig.Register);

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2012-08-16T15:25:47.083

您可以从 nuget 安装，如下图所示：

![在此处输入图像描述](../Images/2c81e85dbf469802a09a61be67563e38.png)

或者，在包管理器控制台上运行以下命令行：

```
Install-Package Microsoft.AspNet.WebApi 
```

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2014-06-29T20:30:28.983

在开始合并 MVC 和 Web API 项目之前，我建议阅读有关[利弊](https://stackoverflow.com/questions/12905566/web-api-in-mvc-solution-in-separate-project)的信息，以将它们分开为不同的项目。一件非常重要的事情（我自己的）是身份验证系统，这是完全不同的。

如果您需要在 MVC 和 Web API 上使用经过身份验证的请求，您需要记住 Web API 是 RESTful（不需要保持会话、简单的 HTTP 请求等），但 MVC 不是。

要查看实现的差异，只需在 Visual Studio 2013 中从模板创建 2 个不同的项目：一个用于 MVC，一个用于 Web API（不要忘记在创建过程中打开“个人身份验证”）。你会在 AuthencationControllers 中看到很多不同。

所以，请注意。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2019-03-05T11:44:54.243

**注意：这只是上面[这个答案的缩写](https://stackoverflow.com/a/34194801/4390133)**

1.  打开 NuGet 包管理器控制台并运行

    ```
    PM> Install-Package Microsoft.AspNet.WebApi 
    ```

2.  添加对`System.Web.Routing`,`System.Web.Net`和`System.Net.Http`dll 的引用（如果还没有的话）

3.  添加以下类

    ```
    public static class WebApiConfig
    {
         public static void Register(HttpConfiguration config)
         {
             // Web API routes
             config.MapHttpAttributeRoutes();

             config.Routes.MapHttpRoute(
                 name: "DefaultApi",
                 routeTemplate: "api/{controller}/{id}",
                 defaults: new { id = RouteParameter.Optional }
             );
         }
     } 
    ```

4.  `Application_Start`如果还没有添加方法（在 global.asax.cs 文件中）

    ```
    protected void Application_Start()
    {
        //this should be line #1 in this method
        GlobalConfiguration.Configure(WebApiConfig.Register);
    } 
    ```

5.  右键单击控制器文件夹 > 添加新项目 > Web > 添加 Web API 控制器

    ```
    namespace <Your.NameSpace.Here>
    {
        public class VSController : ApiController
        {
            // GET api/<controller>   : url to use => api/vs
            public string Get()
            {
                return "Hi from web api controller";
            }  
        }
    } 
    ```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-04-21T14:29:12.323

上述解决方案完美运行。我更喜欢在选择项目模板时选择 Web API 选项，如下图所示

**注意：**该解决方案适用于 Visual Studio 2013 或更高版本。最初的问题是在 2012 年提出的，现在是 2016 年，因此添加了 Visual Studio 2013 或更高版本的解决方案。

[![显示 Web API 选项的项目模板](../Images/47f90db5e8640f5fd81129a5426de8ac.png)](https://i.stack.imgur.com/3vx1R.gif)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-05-22T06:28:50.103

我有同样的问题，解决方法很简单

右键单击从“管理 Sulotion 的 Nuget 包”中安装 Microsoft.ASP.NET.WebApi 的 solotion

繁荣就是这样；）

# c# - 更新从 pageManager.LoadControl() 中提取的 ContentBlock。站点有限 5

> ID：11990040
> 
> 赞同：3
> 
> 时间：2012-08-16T14:58:46.877
> 
> 标签：c#, .net, sitefinity

在论坛上也问过这个问题，但目前还没有运气。我需要做的是在给定页面上设置每个内容块的 HTML 内容。看来我可以设置 html 值没问题，但保存它并不会更新实际页面。

我想知道是否是因为需要对控件进行某种保存调用。似乎没有任何方法可用于此类操作。

```
foreach (var c in duplicated.Page.Controls)
{
    // go through the properties, se the ID to grab the right text
    foreach (var p in c.Properties)
    {
        if (p.Name == "ID")
        {
            var content = pageContent.Where(content_pair => content_pair.Key == p.Value).SingleOrDefault();
            var control = pageManager.LoadControl(c);
            if (control is ContentBlock)
            {
                var contentBlock = pageManager.LoadControl(c) as ContentBlock;
                contentBlock.Html = content.Value;
            }
        }
    }
}
pageManager.SaveChanges(); */

WorkflowManager.MessageWorkflow(duplicated.Id, typeof(PageNode), null, "Publish", false, bag); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:29:36.187

下面的代码可以帮助你实现你所需要的。
它将首先按标题获取页面（我正在寻找标题为“重复”的页面，因为它是您的代码所暗示的）。
它会生成当前页面的新草稿，然后检查其控件。
然后在 foreach 循环中迭代被检测为内容块的控件。
如 foreach 循环内的注释中所写，您可以通过控件的显式 ID（通过名为“ID”的属性）或相关的共享内容块（通过名为“SharedContentID”的属性）或任何其他条件（或忽略完全是这种情况，这将导致更新页面上的所有控件。
一旦我们手头有了要更新的控件，您就可以根据项目的本地化设置来设置它的新值。
之后，草稿被保存并发布，并且可以选择为其创建一个新版本。

```
PageManager pageManager = PageManager.GetManager();
VersionManager vmanager = VersionManager.GetManager();
PageNode duplicated = pageManager.GetPageNodes().FirstOrDefault(p => p.Title == "duplicate");

if (duplicated != null)
{
    var draft = pageManager.EditPage(duplicated.Page.Id, true);
    string contentBlockTypeName = typeof(ContentBlock).FullName;

    PageDraftControl[] contentBlocks = draft.Controls.Where(contentBlock => contentBlock.ObjectType == contentBlockTypeName).ToArray();
    foreach (PageDraftControl contentBlock in contentBlocks)
    {
        Guid contentBlockId = contentBlock.Id;
        //User "SharedContentID" if you are looking up controls which are linked to a shared content block of a specific ID.
        //If you you are trying to locate a specific control by its own ID, use the explicit "ID" property instead of "SharedCotentID"
        if (contentBlock.Properties.Where(prop => prop.Name == "SharedContentID" && prop.Value.ToString() == contentItemIdstr).FirstOrDefault() != null)
        {
            ControlProperty htmlProperty = contentBlock.Properties.Where(prop => prop.Control.Id == contentBlockId && prop.Name == "Html").FirstOrDefault();
            if (htmlProperty != null)
            {
                if (AppSettings.CurrentSettings.Multilingual)
                {
                    htmlProperty.GetString("MultilingualValue").SetString(CultureInfo.CurrentUICulture, "New Value");
                }
                else
                {
                htmlProperty.Value = "New Value";
                }
            }
        }
    }
    draft = pageManager.SavePageDraft(draft);
    draft.ParentPage.LockedBy = Guid.Empty;
    pageManager.PublishPageDraft(draft);
    pageManager.DeletePageTempDrafts(draft.ParentPage);

    //Use the 2 next lines to create  a new version of your page, if you wish.
    //Otherwise the content will be updated on the current page version.
    vmanager.CreateVersion(draft, draft.ParentPage.Id, true);
    vmanager.SaveChanges();

    pageManager.SaveChanges();
} 
```

我希望这段代码有所帮助。

阿隆。

# css - CSS3 媒体查询问题

> ID：11990041
> 
> 赞同：2
> 
> 时间：2012-08-16T14:58:48.693
> 
> 标签：css, media-queries

`500px`我以为我只为之间的屏幕设置了一条规则，`1024px`甚至在屏幕尺寸超过`1024px`.

这是CSS。该`.red`样式正确应用于小于`480px`. 只是黄色适用于所有屏幕，即使`max-width`是`1024px`.

```
.buy {
    border: 1px solid #ABABAB;
    color: #333333;
    display: block;
    font-family: calibri,helvetica,sans-serif;
    font-size: 12px;
    font-weight: bold;
    height: 25px;
    line-height: 25px;
    margin: auto;
    text-align: center;
    text-decoration: none;
    width: 70px;
}

@media only screen and (max-width: 480px) {
    .buy {
        color: red;
    }
}

@media screen and (max-width: 1024px) and (min-width: 500px) {
    .buy {
        color: yellow;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:02:33.990

你忘了`only`

```
@media only screen and (min-width: 500px) and (max-width: 1024px) {
   .buy {
     color: yellow;
   }
} 
```

# java - 异步任务不是异步的

> ID：11990043
> 
> 赞同：0
> 
> 时间：2012-08-16T14:58:50.110
> 
> 标签：java, android, asynchronous

我正在 Android 中开发一个聊天应用程序并遇到了一个大问题。我需要一个线程在后台持续运行（轮询服务器），并通过句柄将其附加到我的主进程。

主要问题是：只要这个后台线程还在运行，前台就会完全停止！

这是一段不完整的代码（因为完整版更长/更丑）...

```
public class ChatActivity extends Activity {
    ...

    private Thread chatUpdateTask;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_chat);

        ...

        chatUpdateTask = new ChatUpdateTask(handler);
        chatUpdateTask.start();
    }

    public void updateChat(JSONObject json) {
        // ...
        // Updates the chat display
    }

    // Define the Handler that receives messages from the thread and update the progress
    final Handler handler = new Handler() {
        public void handleMessage(Message msg) {
            // Get json from the sent Message and display it
            updateChat(json);
        }
    };

    public class ChatUpdateTask extends Thread {
        Handler mHandler;   // for handling things outside of the thread.

        public ChatUpdateTask(Handler h) {
            mHandler = h;               // When creating, make sure we request one!
        }//myTask

        @Override
        public void start() {
            while(mState==STATE_RUNNING) {

                // ...
                // Send message to handler here

                Thread.sleep(500);  // pause on completion

            }//wend
        }//end start

        /* sets the current state for the thread,
         * used to stop the thread */
        public void setState(int state) {
            mState = state;
        }//end setState

        public JSONObject getChatMessages() {
            // ... call server, return messages (could take up to 50 seconds to execute; 
            // server only returns messages when there are new ones
            return json;
        }
    }//end class myTask

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T15:04:35.943

你压倒一切`start()`。线程以它们的`run()`方法运行。

[http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html)

# mysql - TABLE LOCK 读写别名

> ID：11990044
> 
> 赞同：2
> 
> 时间：2012-08-16T14:58:55.440
> 
> 标签：mysql

我试图让它工作，但得到一个错误`t_write was not locked.`

我正在从最高值更新 col`make`和 col`sn``sn + 1`

```
LOCK TABLES 1_makes AS t_read READ, 1_makes as t_write WRITE;

UPDATE t_write 
SET 
    make = 'Pioneer',
    sn = (SELECT 
            *
        from
            (SELECT 
                MAX(sn)
            FROM
                t_read
            WHERE
                id <> 0) as new_sn) + 1
WHERE
    id = 2;

UNLOCK TABLES; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:07:55.533

这个怎么样：

```
LOCK TABLES 1_makes WRITE, 1_makes AS t_read READ;

UPDATE 1_makes
SET 
    make = 'Pioneer',
    sn = (SELECT 
            *
        from
            (SELECT 
                MAX(sn)
            FROM
                1_makes AS t_read
            WHERE
                id <> 0) as new_sn) + 1
WHERE
    id = 2;

UNLOCK TABLES; 
```

# java - 使用 Swing 组件在 Java Swing 中制作一个简单的 GUI 编辑器

> ID：11990045
> 
> 赞同：6
> 
> 时间：2012-08-16T14:58:55.553
> 
> 标签：java, swing, user-interface, editor, jcomponent

我目前正在做一个项目，我需要一个非常简单的编辑器来处理类似 GUI 的对象。这个编辑器将是一个可以放置众所周知的 GUI 小部件的画布。例如，可以在那里放置一个按钮和一个文本字段，移动它们并调整它们的大小。不需要与小部件本身进行交互。

我一直在尝试通过改编一个非常简单的绘画教程来实现这一点，我认为以这种方式实现它很容易，但是在画布上绘制自定义形状和文本以及拖放这些形状时遇到了许多问题。

我想知道是否可以在 JPanel 上重用真正的 Swing 小部件并让用户放置、移动和调整它们的大小。如果是这样，我应该研究什么？

我知道这似乎信息很少，但老实说，我一直在寻找解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T17:17:49.947

我想我应该记住过去的 Swing 美好时光，并为此写一个概念证明给你一点乐趣。它支持向主面板添加一个按钮，然后移动和一些基本的调整大小。

这只是一个概念证明，但它回答了您已经提出的许多问题。我在那里添加了一些 TODO，例如您将知道下一步该做什么。

享受...

```
import java.awt.BorderLayout;
import java.awt.Cursor;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionAdapter;

import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JToolBar;

public class UIBuilder {
  private static final int NONE = -1;

  private static final int BORDER = 3;

  private JFrame frame = new JFrame("Builder");

  private JToolBar toolbar = new JToolBar();

  private JPanel main = new JPanel();

  private int startX = NONE;

  private int startY = NONE;

  private int prevX = NONE;

  private int prevY = NONE;

  private boolean resize = false;

  public UIBuilder() {
    frame.setBounds(100, 100, 600, 450);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().setLayout(new BorderLayout());
    frame.getContentPane().add(toolbar, BorderLayout.PAGE_START);
    frame.getContentPane().add(main, BorderLayout.CENTER);
    frame.setVisible(true);
    buildToolbox();
    buildMainPanel();
  }

  private void buildToolbox() {
    JButton button = new JButton("Button");
    button.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent e) {
        JButton btn = new JButton("Button");
        addComponent(btn);
      }
    });
    toolbar.add(button);
  }

  private void buildMainPanel() {
    main.setLayout(null);
  }

  private void addComponent(JComponent comp) {
    comp.setBounds(10, 10, 80, 24);

    comp.addMouseListener(new MouseAdapter() {
      public void mouseReleased(MouseEvent e) {
        startX = NONE;
        startY = NONE;
        ((JComponent) e.getSource()).setCursor(Cursor.getDefaultCursor());
      }

      public void mousePressed(MouseEvent e) {
        startX = e.getX();
        startY = e.getY();
      }
    });

    comp.addMouseMotionListener(new MouseMotionAdapter() {
      public void mouseMoved(MouseEvent e) {
        JComponent source = (JComponent) e.getSource();
        int x = e.getX();
        int y = e.getY();
        Rectangle bounds = source.getBounds();
        resize = x < BORDER || y < BORDER || Math.abs(bounds.width - x) < BORDER || Math.abs(bounds.height - y) < BORDER;
        if (resize) {
          // TODO: there are a lot of resize cursors here, this is just of proof of concept
          source.setCursor(Cursor.getPredefinedCursor(Cursor.E_RESIZE_CURSOR));
        } else {
          source.setCursor(Cursor.getPredefinedCursor(Cursor.MOVE_CURSOR));
        }
      }

      public void mouseDragged(MouseEvent e) {
        int x = e.getX();
        int y = e.getY();
        if (startX != NONE && startY != NONE) {
          JComponent source = (JComponent) e.getSource();
          Rectangle bounds = source.getBounds();
          int deltaX = x - startX;
          int deltaY = y - startY;
          if (resize) {
            // TODO: handle all resize cases, left, right,...
            source.setSize(Math.max(10, bounds.width + x - prevX), Math.max(10, bounds.height + y - prevY));
          } else {
            source.setLocation(bounds.x + deltaX, bounds.y + deltaY);
          }
          // TODO: make sure you don't resize it as much as it disappears
          // TODO: make sure you don't move it outside the main panel
        } else {
          startX = x;
          startY = y;
        }
        prevX = x;
        prevY = y;
      }
    });
    main.add(comp);
    main.validate();
    main.repaint();
  }

  public static void main(String[] args) {
    new UIBuilder();
  }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T15:26:45.727

这听起来像是一个有趣的项目。

我肯定会使用 JPanel 作为容器，布局设置为空。为了能够在容器中移动 JButton、JLabel 等组件，您必须在添加的组件上侦听 MouseListener 和 MouseMotionListener 事件并相应地处理它们。每当移动或调整一个组件的大小时，您都必须在容器上调用 validate() 和 repaint()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T15:28:08.447

我会以混合方式实现这一点：创建一个实现鼠标响应（拖动、调整大小）的类。此类负责管理用户交互。

对于组件的实际绘制，使用*真正的*Swing 组件（用户交互类将引用它应该表示的组件并将实际渲染委托给该组件）。

这种方法避免了扩展原始 Swing 组件时出现的大部分复杂性，但您仍然可以重用它们的所有绘制代码​​。

# android - 调用 onSearchRequested() 时如何更改 Android 搜索栏中的徽标

> ID：11990046
> 
> 赞同：0
> 
> 时间：2012-08-16T14:58:59.453
> 
> 标签：android, search, android-actionbar

当我调用 onSearchRequested() 时，屏幕顶部会出现一个搜索栏，左侧是我的应用程序徽标。我想将此图标更改为与搜索上下文有关的另一个图标...这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:09:09.637

根据[SDK](http://developer.android.com/guide/topics/search/search-dialog.html)，没有这样的方法可以做到这一点。显然它拿起了应用程序的标志。

但是，您可以更改描述。

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:label="@string/app_name"
    android:hint="@string/settings_description" 
    android:includeInGlobalSearch="true"
    android:searchSettingsDescription="@string/settings_description"
    android:voiceSearchMode="showVoiceSearchButton|launchRecognizer"
    >
</searchable> 
```

# csv - 正确将 XLSX 转换为 CSV

> ID：11990049
> 
> 赞同：6
> 
> 时间：2012-08-16T14:59:09.530
> 
> 标签：csv, xlsx, file-conversion

[这是一个与此处](https://superuser.com/questions/240858/convert-a-column-into-a-comma-separated-list)描述的问题非常相似的问题。但是我需要横向进行，并且我的问题出现在*date*上。我在 Mac 上。

[这](http://f.cl.ly/items/1P2p3x001t3z1G2y1b2z/Sk%C3%A4rmavbild%202012-08-16%20kl.%2016.45.59.png)是我的 .xlsx 文档的图片。我有很多条目，例如前三行中的条目，我想将它们转换为 CSV 作为最后三行。但我的问题是这样的：

*   2012-08-16（A1 中）变为 41137（A4 中）
*   我从 08:00 到 09:00 的会话时间为 01:00 小时（见 H1 和 I1 和 J1）变得一团糟 – ,0,333333333333333,0,375,
*   我从 09:00 到 10:00 的会话与上述问题相同，只是杂乱的数字不同。

我的最终目标是将我的 .xlsx 时间表导出到[toggl](http://support.toggl.com/customer/portal/articles/556566-csv-import)

PS 可能导致真正问题的小问题：

*   A1 2012-08-16 变为 16-aug-12
*   J1 01:00:00 变为 01:00 以及 08:00:00 变为 08:00 和 09:00 变为 08:00:00 等等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T19:27:44.067

最简单的解决方案是简单地“另存为...”并选择 CSV 作为文件类型。

我猜您正在尝试以某种自动化方式执行此操作。如果以下假设成立：

*   您在 Windows 平台上
*   已安装 Excel

将“XLSX”转换为“CSV”的最简单方法是使用一些 VB 脚本：

```
Set objArgs = WScript.Arguments
InputName = objArgs(0)
OutputName = objArgs(1)
Set objExcel = CreateObject("Excel.application")
objExcel.application.visible=false
objExcel.application.displayalerts=false
set objExcelBook = objExcel.Workbooks.Open(InputName)
objExcelBook.SaveAs OutputName, 23
objExcel.Application.Quit
objExcel.Quit 
```

调用它：

```
wscript script.vbs C:\...\file.xlsx C:\...\file.csv 
```

**更新：** 看看这个使用 Perl 脚本执行转换的[帖子。](https://unix.stackexchange.com/a/23786)

**更新 2** 显然 VBA 代码在路径方​​面很挑剔。不合格的路径相对于您的文档目录进行解析。因此，为了获得可重现的结果，请使用输入和输出文件的完整路径。

# sql - Order by query using specific column or alphabetical. - Coldfuison

> ID：11990051
> 
> 赞同：5
> 
> 时间：2012-08-16T14:59:09.123
> 
> 标签：sql, coldfusion, sql-order-by

we have a coldfusion website that retrieves our categories then displays them alphabetically.

We would like to be able to force an order by manually arranging the categories with a 'sort' column with a number in but if this number is equal to 0 or null use alphabetical order.

so at the moment the query is

```
<cfquery name="qGetThrdCat" datasource="#request.dsn#">
    SELECT *
    FROM tbl_prdtthrdcats, tbl_scnd_thrdcat_rel
    WHERE tbl_scnd_thrdcat_rel.thrdctgry_ID = tbl_prdtthrdcats.thrdctgry_ID
    AND tbl_scnd_thrdcat_rel.scndctgry_ID = #URL.secondary#
    AND thrdctgry_archive = 0
    ORDER BY thrdctgry_Name ASC
</cfquery> 
```

It works if I try

```
ORDER BY thrdctgry_Sort ASC 
```

but I can't for the life of me join them up, mainly down to my lack of programmer skills.

Any advice would be greatly appreciated.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T15:06:19.060

I may be misunderstanding the question, but you should be able to just sort on both columns:

```
ORDER BY thrdctgry_Sort ASC, thrdctgry_Name ASC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T15:10:47.980

Here is your query with join:

```
select *
from tbl_prdtthrdcats p
join tbl_scnd_thrdcat_rel s
    on p.thrdctgry_ID = s.thrdctgry_ID
where
    s.scndctgry_ID = #URL.secondary# 
and thrdctgry_archive = 0 
```

For the sorting, you can use CASE in your ORDER clause.

```
order by
case
    when isnull(thrdctgry_Sort, 0) = 0
    then thrdctgry_Name
    else thrdctgry_Sort
end asc 
```

To be honest, I couldn't understand your sorting order completely, but you can play around with it more.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:26:10.343

```
<cfquery name="qGetThrdCat" datasource="#request.dsn#">
SELECT *
FROM tbl_prdtthrdcats, tbl_scnd_thrdcat_rel
WHERE tbl_scnd_thrdcat_rel.thrdctgry_ID = tbl_prdtthrdcats.thrdctgry_ID
AND tbl_scnd_thrdcat_rel.scndctgry_ID = #URL.secondary#
AND thrdctgry_archive = 0
<cfif isNumeric(thrdctgry_Sort) and thrdctgry_Sort GT 0>
ORDER BY thrdctgry_Sort
<cfelse>
ORDER BY thrdctgry_Name ASC
</cfif> 
```

Using SQL is the best option, but if Muhammad Ghazi's solution doesn't work this should do the trick using your server-side code.

# css - Sencha Touch 可滚动面板背景颜色

> ID：11990063
> 
> 赞同：0
> 
> 时间：2012-08-16T14:59:55.490
> 
> 标签：css, background, extjs, scrollable

我在 Sencha Touch 中有一个面板，定义如下：

```
 var albumContainer = Ext.create('Ext.Panel', {
        id: 'album_container',
        html: '',
        flex: 1,
        scrollable: 'vertical',
        padding: 0,
    }); 
```

一切正常，但是由于添加了可滚动属性，面板有一个白色背景，我试图摆脱它，但是只是设置#album_container 的背景，即使是！important，什么也没做。有什么帮助吗？提前致谢。

最好的问候，达米尔 H。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T23:19:50.623

对我来说，我必须更改项目的背景颜色。

```
items: [{
    style: 'background-color:#F00',
    layout: 'hbox', padding: '5',
    // some other stuff 
```

# java - 当访问其他 servlet 时，如何使 servlet 预先计算值？

> ID：11990064
> 
> 赞同：0
> 
> 时间：2012-08-16T15:00:00.063
> 
> 标签：java, ajax, web-applications, servlets, implementation

我正在使用 java servlet 开发一个 Web 应用程序，这是我的场景：

```
servlet1: Has the application's interface and main logic
servlet2: Suplies values to servlet1 on ajax request from servlet1 
```

servlet1 总共可以请求 250 个值。但是在 servlet2 中计算这些值需要时间（因为它涉及向其他服务器发出 GET 请求以获取值）。因此，根据请求计算这些值会使客户端等待很长时间。

那么有没有办法让 servlet2 在第一次调用 servlet1 时开始预先计算值（这样它就可以根据请求快速发送值）？
关于如何实施的任何帮助？

无法使用 PS 数据库或文件系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:15:13.890

我将尝试对 servlet1 进行过滤，该过滤器启动异步操作以计算您需要的值，然后在 servlet2 的逻辑中检索它们。

所以基本上你拦截了 servlet1 请求（使用过滤器），该请求在第一次调用 servlet1 时触发，并且在过滤器中开始预先计算值，并且它们 servlet2 从 servlet1 检索请求的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:21:36.710

servlet2 是否需要来自 servlet1 的一些值才能开始计算这些值？如果没有，您可以将计算代码移到与两个 servlet 分开的类中。ServletContextListener 可以在 ServletContext 初始化时触发，在任何请求进入之前，这可以开始计算。完成后，它可以将这些结果存储在 ServletContext 中

然后 Servlet2 可以检查这些结果是否已计算（是否在 ServletContext 中？），如果是，则使用它。否则它可以计算单个值。理想情况下，您的单独班级将知道如何计算所有值（用于预计算）或单个值（用于尚未完成完整列表时）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T17:29:26.167

如果`servlet2`需要预计算的数据不依赖于`servlet1`输入，只需要计算一次，要么在 中急切计算，要么在 中[`ServletContextListener.contextInitialized()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html#contextInitialized%28javax.servlet.ServletContextEvent%29)计算[`GenericServlet.init()`](http://docs.oracle.com/javaee/6/api/javax/servlet/GenericServlet.html#init%28%29)。但是，计算需要一些时间，您最好将其移动到某个后台线程以避免应用程序启动时间过长（这些方法会阻止部署，直到它们完成）。

这是一个简单的例子：

```
public class Servlet2 extends HttpServlet {

    private final ExecutorService threadPool = Executors.newSingleThreadExecutor();
    private Future<String> calculationResult;

    @Override
    public void init() throws ServletException {
        calculationResult = threadPool.submit(new PreComputingTask());
    }

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        final String slowResponse = calculationResult.get();
        //...
    }
}

class PreComputingTask implements Callable<String> {

    @Override
    public String call() throws Exception {
        //Call external systems, whatever...
        return "slow response";
    }
} 
```

如您所见，`servlet2`启动时，它在单独的线程中启动预计算任务。然后在`doGet()`你检索结果时，可能正在等待它，如果它还没有完成的话。

如果预计算依赖于输入（例如调用外部系统时需要使用`servlet1`的请求参数），则更具挑战性和趣味性。`servlet1`

我看到至少两个选项：

*   开始`Future`任务`servlet1`并检索未来（希望已经完成）`servlet2`。您需要以某种方式在 servlet 之间传递它，例如将它放在`ServletContext`

*   [从 向jms](/questions/tagged/jms "显示标记为“jms”的问题")队列发送消息`servlet1`。消息侦听器将处理请求，预先计算结果并将结果放入某个临时的、唯一的队列中。`servlet2`然后可以稍后从该队列接收消息（您必须以某种方式就某种命名方案达成一致），或者稍等一下。

# java - Objectify 4 - 字段不持久

> ID：11990069
> 
> 赞同：0
> 
> 时间：2012-08-16T15:00:15.257
> 
> 标签：java, persistence, google-cloud-datastore, field, objectify

使用 Objectify 4，当我保存 MenuItem 对象时，名称和价格字段不会保留。只有 Key、WriteOps 和 ID/Name 保留在调试数据存储区中。

```
@Entity
public class MenuItem extends BaseEntity {
private String name;
private double price;

public MenuItem() {
}

public MenuItem(String name, double price) {
    this.name = name;
    this.price = price;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public double getPrice() {
    return price;
}

public void setPrice(double price) {
    this.price = price;
}
} 
```

BaseEntity 在哪里：

```
public abstract class BaseEntity implements Dto {
private static final long serialVersionUID = 8400346403708831769L;

@Id
protected Long id;

protected BaseEntity() {
}

@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((id == null) ? 0 : id.hashCode());
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj) {
        return true;
    }

    if (obj == null) {
        return false;
    }

    if (getClass() != obj.getClass()) {
        return false;
    }

    BaseEntity other = (BaseEntity) obj;

    if (id == null) {
        if (other.id != null) {
            return false;
        }
    } else if (!id.equals(other.id)) {
        return false;
    }

    return true;
}

public Long getId() {
    return id;
}

public void setId(@Nullable Long id) {
    this.id = id;
}

public boolean isSaved() {
    return (id != null);
}
} 
```

Dto 是：

```
public interface Dto extends Serializable {
} 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:56:03.377

如 Objectify 邮件列表中所述，可能只是您查看的数据存储区缺少此信息。

您能否显示一些测试代码来保存这些数据，然后检索它并打印出结果，而不是使用数据存储查看器？我希望：

```
MenuItem toSave = new MenuItem("test", 6.3);
toSave.setId(1);
ofy().save().entity(toSave).now();
ofy().clear(); //Make sure we're not just looking at the current session.
MenuItem loaded = ofy().load().type(MenuItem.class).id(1).get();
assertEquals(loaded.getName(), "test");
assertEquals(loaded.getPrice(), 6.3); 
```

# visual-c++ - 在哪里可以找到 VisualC++ x64 命令行编译器？

> ID：11990070
> 
> 赞同：0
> 
> 时间：2012-08-16T15:00:18.793
> 
> 标签：visual-c++, compiler-construction, 64-bit, winapi

在哪里可以找到 VisualC++ x64 编译器？它不包含在 SDK 中（甚至不包含 x32 编译器）。如果我错了，请纠正我，但我在我刚刚下载的 SDK 中找不到它。

请注意，我不想使用 VisualC++ IDE（包括我当前使用的 x32 编译器，但不包括 x64 编译器）。

我想知道我是否错过了一些东西，因为[在这里](https://stackoverflow.com/questions/1865069/how-to-compile-a-64-bit-application-using-visual-c-2010-express)，SDK 似乎应该包含 x64 编译器（或至少任何编译器）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:15:57.463

如果您安装了 Visual Studio 2008：C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin\amd64。很可能没有安装 x64 编译器。在 VS-2008 中，这是默认的安装配置。您可以返回安装程序并选择 - 安装“x64 编译器和工具”。如果您使用 Visual-Studio 2008，请参阅： http: [//www.viva64.com/en/k/0006/](http://www.viva64.com/en/k/0006/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:54:14.060

我已经下载了包含 64 位编译器的 Visual C++ 2010 Pro 的免费试用版。试用版仅适用于 IDE，不适用于命令行编译器。工作正常！

# google-bigquery - 有没有办法使用预编译的 sql 完成工作并通过 java api (bigquery) 多次运行

> ID：11990073
> 
> 赞同：1
> 
> 时间：2012-08-16T15:00:30.857
> 
> 标签：google-bigquery

有没有办法使用预编译的 sql 完成工作并通过 java api (bigquery) 多次运行它？

我知道我可以使用作业，但没有办法快速重新运行作业。

正如谷歌所说：

没有单一的调用方法来重新运行作业；如果要重新运行特定作业：

调用jobs.get 来检索资源以重新运行作业，删除id、jobId、status 和statistics 字段。根据需要更改任何其他字段。使用修改后的资源调用 jobs.insert 以启动新作业。

我该如何做到这一点，使用什么功能？：删除 id、jobId、status 和 statistics 字段。根据需要更改任何其他字段。

如果我设法做到这一点，要重置作业配置，它会使用预编译的嵌套 sql 语句吗？我很好奇

提前致谢：

阿提拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:46:32.207

BigQuery 没有预编译 SQL 的概念。一般来说，SQL 语句的分析只占查询时间的很小一部分，所以预编译它不会有太大的好处。

但是，重新运行作业（通过发送相同的作业配置）应该可以工作。

# mysql - 数据库导入后加载 Wordpress 网站缓慢

> ID：11990074
> 
> 赞同：0
> 
> 时间：2012-08-16T15:00:33.087
> 
> 标签：mysql, database, wordpress, phpmyadmin

我最近导入了一个 Wordpress 数据库，经过几个问题后，我设法将其按原样导入。但是，既然导入已经发生，前端似乎存在问题，即网站加载页面的时间异常长。

后端以正常速度加载，我一生都无法弄清楚导致前端加载速度问题的原因。

有问题的网站：http: [//telikin.com.au/](http://telikin.com.au/)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:11:30.330

在我的电脑上花了 375 毫秒。根据 firebug（firefox 插件），它的 wp-ui/css/css.php 插件加载时间过长。此外，如果浏览器没有找到请求的文件，它会继续尝试，这也会降低网站的速度。

# iphone - 如何为警报应用设置 NSTimer？

> ID：11990075
> 
> 赞同：0
> 
> 时间：2012-08-16T15:00:34.987
> 
> 标签：iphone, nstimer, alarm

我是 iPhone 应用程序开发的新手。现在我正在为 iPhone 开发警报应用程序。在这个应用程序中，我从 UIDataPicker 中选择了数据。然后我在警报按钮动作中应用了 NSLocalNotification 触发。这是第一次工作。然后第二次再次单击该按钮，我也再次工作，但时间也相同。这是错误的工作。

在这里我想我需要我们的 NSTimer。我不知道如何使用 NSTimer，而且它正在工作的后台应用程序也如何设置这个计时器。

遵循开发的警报通知代码。

```
 - (void) saveButtonAction:(id)sender {
        [[UIApplication sharedApplication] cancelAllLocalNotifications];
        Class cls = NSClassFromString(@"UILocalNotification");
        if (cls != nil) 
        {
            Resource *resourceLoader = [[Resource alloc] init];

            NSDictionary *prefDic = [resourceLoader getPlistDataAsDictionary:@"preference"];
            NSString *musicName;
            NSDate *selectedDateTime = [[NSDate alloc]init];
            if (prefDic && [prefDic objectForKey:@"alarmtime"]) {
                //firstVal_textField.text = [prefDic objectForKey:@"value1"];
                NSLog(@"saravanan %@",[prefDic objectForKey:@"alarmtime"]);
                selectedDateTime = [prefDic objectForKey:@"alarmtime"];
                NSLog(@"saravanan periyasamy %@", selectedDateTime);

                musicName = [NSString stringWithFormat:@"%@%@",[prefDic                objectForKey:@"alarmmusic"],@".wav" ];

            } 
            UILocalNotification *notif = [[cls alloc] init];
            //notif.fireDate = [datePicker date];
            notif.fireDate = selectedDateTime;
            notif.timeZone = [NSTimeZone defaultTimeZone];

            notif.alertBody = @"Alarm";
            notif.alertAction = @"Show me";
            //notif.repeatInterval = 0;
            //notif.soundName = UILocalNotificationDefaultSoundName;
            notif.soundName = musicName;
            notif.applicationIconBadgeNumber = 1;
            NSDictionary *userDict = [NSDictionary dictionaryWithObject:@"saravanan"
                                                                    forKey:kRemindMeNotificationDataKey];
            notif.userInfo = userDict;
            [[UIApplication sharedApplication] scheduleLocalNotification:notif];
            [notif release];
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:07:24.383

设置按钮被连接起来以在视图控制器中运行一个名为 scheduleNotification 的方法，该方法使用 UILocalNotification 类来安排通知。代码如下所示：

```
 (void )scheduleNotification
  {
 [reminderText resignFirstResponder];
 [[ UIApplication sharedApplication] cancelAllLocalNotifications];
Class cls = NSClassFromString(@ "UILocalNotification" );
  if (cls != nil)
    {
 UILocalNotification *notif = [[cls alloc] init];
    notif.fireDate = [datePicker date];
    notif.timeZone = [ NSTimeZone defaultTimeZone];
    notif.alertBody = @ "Did you forget something?" ;
    notif.alertAction = @ "Show me" ;
    notif.soundName = UILocalNotificationDefaultSoundName ;
       notif.applicationIconBadgeNumber = 1 ;
 NSDictionary *userDict = [       NSDictionary dictionaryWithObject:reminderText.text
          forKey:kRemindMeNotificationDataKey];
    notif.userInfo = userDict;
      [[ UIApplication sharedApplication] scheduleLocalNotification:notif];
    [notif release];
}
} 
```

# python - 突出一堆单词？

> ID：11990076
> 
> 赞同：1
> 
> 时间：2012-08-16T15:00:40.153
> 
> 标签：python, regex, pygments

我试图突出显示一堆单词 - 所以我写了一个 pygments 扩展。基本上它有效，但仍然不令我满意。

这是一个应该可行的简单想法：适当地突出显示单词，以及与这些单词不匹配的所有其他文本 - 在文本中。但这挂断了：

```
from pygments.lexer import RegexLexer
from pygments.token import *

class HotKeyPoetry(RegexLexer):
    name = 'HotKeyPoetry'
    aliases = ['HotKeyPoetry']
    filenames = ['*.hkp']

    tokens = {
        'root': [

            (r'\bAlt\b', Generic.Traceback),
            (r'\bShft\b', Name.Variable),
            (r'\bSpc\b', Operator),
            (r'\bCtrl\b', Keyword.Type),
            (r'\bRet\b', Name.Label),
            (r'\bBkSpc\b', Generic.Inserted),
            (r'\bTab\b', Keyword.Type),
            (r'\bCpsLk\b', String.Char),
            (r'\bNmLk\b', Generic.Output),
            (r'\bScrlLk\b', String.Double),
            (r'\bPgUp\b', Name.Attribute),
            (r'\bPgDwn\b', Name.Builtin),
            (r'\bHome\b', Number.Oct),
            (r'\bEnd\b', Name.Constant),
            (r'\bDel\b', Name.Decorator),
            (r'\bIns\b', Number.Integer.Long),
            (r'\bWin\b', Name.Builtin.Pseudo),
            (r'\bF1?[1-9]\b', Name.Function),

            (r'(?!\b(Alt|Shft|Spc|Ctrl|Ret|BkSpc|Tab|CpsLk|NmLk|ScrlLk|PgUp|PgDwn|Home|End|Del|Ins|Win|F5)\b)', Text),

        ]
    } 
```

也许我应该更好地使用另一个词法分析器来完成这项工作？

# 编辑 1

所以

```
r"(.+?)(?:$|\b(?=(Alt|Shft|Spc|Ctrl|Ret|BkSpc|Tab|CpsLk|NmLk|ScrlLk|PgUp|P‌​gDwn|‌​Home|End|Del|Ins|Win|F[12]?[1-9])\b))" 
```

是我一直在寻找的排除正则表达式。

现在我正在尝试创建`#`一个评论字符——以便它之后的所有内容（在一行内）——都是评论：我试过了：

```
r"(.+?)(?:$|#.*$|\b(?=(Alt|Shft|Spc|Ctrl|Ret|BkSpc|Tab|CpsLk|NmLk|ScrlLk|PgUp|P‌​gDwn|‌​Home|End|Del|Ins|Win|F[12]?[1-9])\b))" 
```

和

```
r"([^#]+?)(?:$|\b(?=(Alt|Shft|Spc|Ctrl|Ret|BkSpc|Tab|CpsLk|NmLk|ScrlLk|PgUp|PgD‌​wn|‌​Home|End|Del|Ins|Win|F[12]?[1-9])\b))" 
```

其次是

```
 (r'#.*$', Comment), 
```

我还尝试添加第二个状态：

```
'comment': [ 
      (r'#.*$', Comment),
], 
```

- 但没有任何效果。

# 编辑 2

完整的工作 pygments 扩展 python 包在[这里](https://github.com/bk322/bk_pygments/tree/master/HotKeyPoetry)。你可以得到和

```
python setup.py build
python setup.py install --user 
```

它在 pygments 中注册它。然后，您可以使用以下方法对其进行测试：

```
pygmentize -f html -O full -o test.html test.hkp 
```

或指定一种语言：

```
pygmentize -f html -O full -l HotKeyPoetry -o test.html test.hkp 
```

这是一个示例`test.hkp`：

```
Ctrl-Alt-{Home/End} ⇒ {beginning/end}-of-visual-line
Ctrl-Alt-{b/↓/↑} ⇒ {set/goto next/goto previous} bookmark # I have it in okular and emacs
Alt-{o/O} ⇒ switch-to-buffer{/-other-window}
Ctrl-{o/O} ⇒ find-file{/-other-window}
Ctrl-x o ⇒ ergo-undo-close-buffer # it uses ergoemacs' recently-closed-buffers
Ctrl-Alt-O ⇒ find-alternate-file 
```

（评论对于热键并没有真正有用——但我需要它们用于[PyMOL](https://github.com/bk322/bk_pygments/tree/master/PyMOL)）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T21:05:28.760

1）您误解了`(?!`工作原理：它与文本不匹配。您的最后一个 RE（在原始代码块中）匹配的*位置*后面没有您列出的任何单词。但它匹配文本的零个字符，所以没有什么可以着色的，你不会继续前进。

你真正的意思是这样的：`\b(?!(?:Alt|Shft|etc)\b)\w+\b`。（匹配s`\w+`之间的任何单词`\b`，但如果第一个`\b`后面跟着任何关键字，则不匹配）

2）关于**匹配注释：**根据 pygments 文档，您的表达式`(r'#.*$', Comment)`应该可以工作。或者，在示例中使用的样式中：

```
(r'#.*\n', Comment), 
```

3）你只需要一个状态，所以将评论规则添加到根状态。当你在不同的地方有不同的语法时，多个状态是适用的，例如，如果你混合了 html 和 PHP，或者如果你想突出显示 python 字符串中的 SQL。

4）您的规则需要匹配输入中的*所有内容*。规则会按顺序尝试，直到一个有效，所以不要尝试编写与关键字不匹配的规则，您可以将此通配符作为**最后一条**规则：

```
(r'(?s).', Text), 
```

它会一次推进一个角色，直到你得到其他规则可以匹配的东西。重复：*删除*与非关键字匹配的长规则，并改用上述规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T21:54:53.337

是的，最终的正则表达式实际上并不匹配任何字符。我试过这段代码：

```
import re

regexes = {
  "text": re.compile(r"(.+?)(?:$|\b(?=(Alt|Shft|Spc|Ctrl|Ret|BkSpc|Tab|CpsLk|NmLk|ScrlLk|PgUp|PgDwn|Home|End|Del|Ins|Win|F1?[1-9])\b))"),
  "kwd": re.compile(r"(Alt|Shft|Spc|Ctrl|Ret|BkSpc|Tab|CpsLk|NmLk|ScrlLk|PgUp|PgDwn|Home|End|Del|Ins|Win|F1?[1-9])\b")
}

def tokenise(state):
  while state["src"]:
    state["tok"] = "text" if state["tok"] == "kwd" else "kwd"
    #print "mode: {0:20} {1!r}".format(state["tok"].capitalize(), state["src"])

    m = regexes[state["tok"]].match(state["src"])
    if m:
      match = m.group(0)
      state["src"] = state["src"][m.end():]
      #print "  TOKEN({0}, {1!r})".format(state["tok"], match)
      yield "TOKEN({0}, {1!r})".format(state["tok"], match)

state = {
  "src": "A thing that, Tab, is AltCps or 'Win'. F8 is good, as is: F13.",
  "tok": "text"
}
print repr(state["src"])
print "\n".join(list(tokenise(state)))
print

state = {
  "src": "Alt thing that, Tab, is AltCps or 'Win'. F8 is good, as is: F13.",
  "tok": "text"
}
print repr(state["src"])
print "\n".join(list(tokenise(state)))
print

state = {
  "src": "Alt thing that, Tab, is AltCps or 'Win'. F8 is good, as is: F11",
  "tok": "text"
}
print repr(state["src"])
print "\n".join(list(tokenise(state)))
print 
```

它适用于我测试的案例，文本正则表达式在您的代码中看起来不错:)

# python - Django视图中的无限循环

> ID：11990081
> 
> 赞同：0
> 
> 时间：2012-08-16T15:00:49.533
> 
> 标签：python, django

我正在为 python 中的 time_slot 编写应用程序

请看这段代码

```
from datetime import datetime ,timedelta
appointments = [(datetime(2012, 5, 22, 10), datetime(2012, 5, 22, 10, 30)),

                    (datetime(2012, 5, 22, 12), datetime(2012, 5, 22, 13)),

                    (datetime(2012, 5, 22, 15, 30), datetime(2012, 5, 22, 17, 10))]

hours = (datetime(2012, 5, 22, 9), datetime(2012, 5, 24, 18))
duration = timedelta(minutes = 120)
def get_slots(hours, appointments,duration):

    slots = sorted([(hours[0], hours[0])] + appointments + [(hours[1], hours[1])])

    for start, end in ((slots[i][1], slots[i+1][0]) for i in range(len(slots)-1)):

        assert start <= end, "Cannot attend all appointments"

        while start + duration <= end:
            dt_obj = start
            date_str = dt_obj.strftime("%Y-%m-%d %H:%M:%S")

            today18 = start.replace(hour=17, minute=59, second=59, microsecond=0)

            if start <  today18:
               print "{:%d:%H:%M} - {:%d:%H:%M}".format(start, start + duration)

               start += duration
            else:
               start += timedelta(hours = 15)
if __name__ == "__main__":
    get_slots(hours, appointments,duration) 
```

当我像 python time_slots.py 一样运行上面的代码时，上面的代码对我来说工作正常

但是当我在 djanog 视图中使用上面的代码时

```
from datetime importdatetime ,timedelta 
    duration = timedelta(minutes = 60)
    appointments = [(datetime(2012, 5, 22, 10), datetime(2012, 5, 22, 10, 30)),

                (datetime(2012, 5, 22, 12), datetime(2012, 5, 22, 13)),

                (datetime(2012, 5, 22, 15, 30), datetime(2012, 5, 22, 17, 10))]

   # hours = (datetime.datetime(2012, 5, 24, 18), datetime.datetime(2012, 5, 22, 9))
    hours = (datetime(2012, 5, 22, 9), datetime(2012, 5, 24, 18))
    slots = sorted([(hours[0], hours[0])] + appointments + [(hours[1], hours[1])])
    for start, end in ((slots[i][1], slots[i+1][0]) for i in range(len(slots)-1)):

        assert start <= end, "Cannot attend all appointments"

        while start + duration <= end:

            today18 = start.replace(hour=17, minute=59, second=59, microsecond=0)

            if start <  today18:

               print "{:%H:%M} - {:%H:%M}".format(start, start + duration)

            else:
               start += timedelta(hours = 15) 
```

当我调用这个视图时，它在控制台中返回一个无限循环

请帮助我在这里做错了什么我想要可用的时间段，因为我正在进入 time_slots.py

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:05:04.900

在 Django 视图中，您忘记在`if start < today18`子句中添加要开始的持续时间。

# postgresql - 我如何知道 postgresql 何时删除表？

> ID：11990085
> 
> 赞同：0
> 
> 时间：2012-08-16T15:01:07.750
> 
> 标签：postgresql

我一直试图在日志中查找表何时被删除，但我找不到它。我想知道 postgresql 在哪里记录这些信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:14:15.127

It depends.

First, *whether* it gets logged is up to you, based on your setting for [log_statement](http://www.postgresql.org/docs/current/interactive/runtime-config-logging.html#GUC-LOG-STATEMENT). If you have chosen to log it, there are numerous other server configuration settings related to where the log entries are written and what information they contain. (You may or may not be including such things as timestamp, user ID, IP address, etc., based on your chosen configuration settings.)

# c# - WCF：如何为类型中的类型构造 DataContract

> ID：11990086
> 
> 赞同：4
> 
> 时间：2012-08-16T15:01:20.027
> 
> 标签：c#, wcf, datacontract

我有一个 wcf 服务，它公开了一个返回复杂类型作为其返回类型的函数。该响应类型又包含我定义的另一个复杂对象。我正在为我的 WCF 创建数据合同，并且想知道应该如何完成。我目前有这个（为了便于阅读，删除了一些属性）：

**功能**

```
///<summary>
/// Interface to describe a cluster query WCF service.
///</summary>
[ServiceContract]
public interface IClusterQueryWcfService
{
    /// <summary>
    /// A method to retrieve the name of the necessary cluster table for a given zoom level, feature type and user type. 
    /// </summary>
    /// <param name="zoom">Integer value representing zoom level</param>
    /// <param name="featureType">The feature type string</param>
    /// <param name="user">User name</param>
    /// <returns>RwolTableType made up of table name and table type.(See documentation)</returns>
    [OperationContract]
    TableTypeResponse GetClusterTableForZoom(int zoom, string featureType, string user); 
```

**响应类型**

```
/// <summary>
/// The data contract for a TableTypeResponse object
/// </summary>
[DataContract]
public class TableTypeResponse
{
    /// <summary>
    /// Property to manipulate the date and time of the method call.
    /// </summary>
    [DataMember]
    public string DateTimeOfCall
    {
        get;
        set;
    }

    /// <summary>
    /// Property to get/set the StandardResponse type object included with a TableTypeResponse instance.
    /// </summary>
    [DataMember]
    public StandardResponseType StandardResponse
    {
        get;
        set;
    }
} 
```

**嵌套类型**

```
/// <summary>
/// Data contract for a StandardResponseType object
/// </summary>
[DataContract]
public class StandardResponseType
{
    /// <summary>
    /// Property to manipulate the date and time of the method call.
    /// </summary>
    [DataMember]
    public string DateTimeOfCall
    {
        get;
        set;
    }

    /// <summary>
    /// Property to allow get and set of a message to provide more information to the user.
    /// </summary>
    [DataMember]
    public string Message
    {
        get;
        set;
    }
} 
```

此代码是否足以确保调用客户端知道初始响应类型中保存的标准响应类型的结构？我的意思是嵌套类型的数据契约实际上会被观察到吗？

我应该补充一点，我对使用数据合同还很陌生，因为我以前知道我有 .net 双方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T15:04:08.690

是的，您可以`DataContracts`由`DataContract`s 组成。WCF 将知道如何正确序列化它们。

# css - 将图像宽度调整为容器大小的 100% - 图像下方的持久空间

> ID：11990087
> 
> 赞同：0
> 
> 时间：2012-08-16T15:01:21.577
> 
> 标签：css

我正在尝试将图像放在容器 DIV 中，否则它太大了，使用

```
max-width: 100% 
```

在 CSS 中调整它的大小。但是，无论我调整什么，底部都有一个小空白。我如何摆脱它，使 DIV 边框和图像完美契合。

[http://jsfiddle.net/AndyMP/SC8v9/](http://jsfiddle.net/AndyMP/SC8v9/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:14:15.793

`display: block;`在您的图像上应用 a 。

[http://jsfiddle.net/SC8v9/25/](http://jsfiddle.net/SC8v9/25/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:04:58.283

也给图`float:left`。

# javascript - 在 JavaScript 或 jQuery 中动态更改 CSS 规则

> ID：11990089
> 
> 赞同：24
> 
> 时间：2012-08-16T15:01:21.840
> 
> 标签：javascript, jquery, css, dynamic, stylesheet

我正在寻找一种方法来更改文档中导入的样式表的 CSS 规则。所以我有一个外部样式表和一些`class`内部`div`属性。我想用 JavaScript 或 jQuery 更改规则之一。

这是一个例子：

```
.red{
    color:red;
} 
```

所以想法是在 JavaScript 中做一些事情，HTML 知道现在`color`是另一种颜色，如下所示：

```
.red{
    color:purple;
} 
```

但是我希望将来通过附加的方式添加的每个元素都有这个规则。因此，如果我`span`在 CSS 类中添加 a `.red`，则文本必须是紫色而不是红色。

我希望我说清楚了。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-16T15:03:42.810

您可以将样式声明注入 DOM。

```
$("head").append('<style>.red { color: purple }</style>'); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-16T15:02:17.297

你 jQuery[`.css()`](http://api.jquery.com/css)方法来做到这一点。

```
$('.red').css('color', 'purple'); 
```

对于多个规则：

```
$('.red').css({
    'color': 'purple',
    'font-size': '20px'
}); 
```

当你以后通过追加的方式向DOM添加动态元素时，只需给这些元素一些`class`或`id`并在追加它们之后编写`CSS`上述规则，它们将应用于所有动态创建的元素。

## **[工作样本](http://jsfiddle.net/KXDJE/3/)**

### 笔记

在我看来，添加动态规则不是一个好的解决方案。而不是你可以加载一些外部`CSS`文件。

但是，如果您需要动态规则添加方法之类的东西，那么：

```
$('head').append(
  $('<style/>', {
    id: 'mystyle',
    html: '.red {color: purple }'
  })
); 
```

并供将来使用：

```
$('#mystyle').append(' .someother { color: green; font-size: 13px } '); 
```

## [工作样本](http://jsfiddle.net/KXDJE/6/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-09-02T07:18:52.370

如果要添加规则，而不是直接编辑每个元素的样式，可以使用[`CSSStyleSheet.insertRule()`](https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleSheet/insertRule). 它有两个参数：作为字符串的规则，以及插入规则的位置。

来自上述链接的示例：

```
// push a new rule onto the top of my stylesheet
myStyle.insertRule("#blanc { color: white }", 0); 
```

在这种情况下，`myStyle`是元素的`.sheet`成员。`style`

据我所知，`style`元素必须先插入到文档中，然后才能抓取它的表单，并且它不能是外部表单。您还可以从中获取一张纸`document.styleSheets`，例如

```
var myStyle = document.styleSheets[1]; // Must not be a linked sheet.
myStyle.insertRule("#blanc { color: white }", 0); 
```

注意：该页面建议通过更改其类来修改元素，而不是修改规则。

# git - 基于 SHA 的 git pull

> ID：11990090
> 
> 赞同：10
> 
> 时间：2012-08-16T15:01:26.360
> 
> 标签：git

我想知道如何从基于 SHA 的回购中提取？

```
git pull origin master 
```

完成后，上面的代码将拉出主人`git add remote`。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-16T20:59:03.717

一个 git pull 为你做了两件事：

1.  从存储库中获取特定分支
2.  将其与您当前的分支合并。

听起来您想要做的是从存储库中获取特定修订并将其与当前分支合并。

最好的方法是使用两个命令：

```
git fetch origin
git merge YOUR_SHA_HERE 
```

如果您想要的只是查看存储库中特定修订版中的内容并将其作为工作树，而不是进行合并，那么您会想要：

```
git fetch origin
git checkout YOUR_SHA_HERE 
```

如果您想要获取特定版本，并将其设置为新的“主”（或另一个分支），那么您需要运行

```
git fetch origin
git reset --hard YOUR_SHA_HERE 
```

所有这些都将从存储库中获取新代码（通过“git fetch origin”），但是有不同的方法可以与/替换您当前的代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T15:10:11.983

我认为没有办法只提取基于 SHA 的分支的一部分。

有什么问题：

```
git pull
git reset --hard <sha> 
```

# tfs - Team Foundation Server 2012 Express 产品密钥

> ID：11990091
> 
> 赞同：1
> 
> 时间：2012-08-16T15:01:26.330
> 
> 标签：tfs

好的，所以我刚刚下载了 TFS 2012 Express，它要求我选择试用版或输入产品密钥。

我一直在寻找如何获得 Express 密钥（就像我必须使用以前的 express 产品一样）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T18:27:51.147

**您可以在MSDN 订阅者下载**上获得密钥。

这里：

![在此处输入图像描述](../Images/cc611ba6f8b38e905baa1614b965905d.png)

# 3d-model - 将 osg 格式转换为 3ds 或 .obj？

> ID：11990094
> 
> 赞同：1
> 
> 时间：2012-08-16T15:01:31.477
> 
> 标签：3d-model

我有一个 osg 和 ive 格式的汽车 3D 模型，是否可以将其转换为 .obj 或 3ds 格式？我使用的工具只能加载 .3ds 和 .obj 格式。该工具是 processing.js。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T16:14:53.457

osg 和 ive 是 OpenSceneGraph 3.0 以下版本的原生 ASCII 和二进制格式（3.0+ 仍然可以读/写 osg 和 ive，但它们正被逐步淘汰，有利于 osgt 和 osgb） - 请参阅[http://www。 openscenegraph.com](http://www.openscenegraph.com)

获取 OpenSceneGraph 二进制文件：http: [//openscenegraph.alphapixel.com/osg/downloads/free-openscenegraph-binary-downloads](http://openscenegraph.alphapixel.com/osg/downloads/free-openscenegraph-binary-downloads)

并使用osgconv转换为obj，例如osgconv MODEL.osg MODEL.obj

# c++ - LNK2022 元数据操作：重复类型中的布局信息不一致

> ID：11990095
> 
> 赞同：16
> 
> 时间：2012-08-16T15:01:35.413
> 
> 标签：c++, windows, linker, c++-cli, clr

我正在使用的项目中遇到新的链接器错误：

```
1>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std.basic_string<char,std::char_traits<char>,std::allocator<char> >): (0x0200004e).
1>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std.basic_string<wchar_t,std::char_traits<wchar_t>,std::allocator<wchar_t> >): (0x02000075).
1>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std._String_iterator<char,std::char_traits<char>,std::allocator<char> >): (0x02000091).
1>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std._String_const_iterator<char,std::char_traits<char>,std::allocator<char> >): (0x02000092).
1>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std._String_val<char,std::allocator<char> >): (0x02000097).
1>MSVCMRTD.lib(locale0_implib.obj) : error LNK2022: metadata operation failed (8013118D) : Inconsistent layout information in duplicated types (std._String_val<wchar_t,std::allocator<wchar_t> >): (0x02000099). 
```

我们在 Windows 7 中使用 Visual Studio 2010。

这个项目用来编译。它是围绕一些非托管代码的 C++/CLI DLL 包装器，因此包括公共语言运行时支持。**改变**的是我们链接到的外部静态库被“更新”了。当我们尝试编译链接到它的项目时，我们现在遇到了这个错误。

微软对此问题的“帮助”是“在目标文件上运行**ildasm –tokens**以查找哪些类型具有 error_message 中列出的令牌，并查找差异”。然后我检查了[这个页面](http://msdn.microsoft.com/en-us/library/f7dy01k1%28v=vs.80%29.aspx)，发现该`/tokens`选项只对 .exe 和 .dll 文件有效……但这是一个链接器错误，所以我的 .dll 文件还没有生成！

我试过运行类似的东西`ildasm -tokens AssemblyInfo.obj`，但唯一发生的事情是一个窗口打开了这个非常有用的错误消息：

![感谢微软](../Images/b467b34f0e572d6e05f2d2f7a40567d0.png)

感谢微软！

我不确定如何继续解决此问题。Release 构建工作正常——只有 Debug 搞砸了。所以在混合的某个地方，我猜`std::string`类型是不同的大小或什么的......

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-16T16:05:44.417

好的，所以我解决了！还有[另一个 SO 问题](https://stackoverflow.com/questions/5573897/lnk2022-and-lnk2034-linker-errors-with-version-10-0-of-the-crt)实际上是一个很大的帮助。它最终链接到[这篇文章](http://blogs.msdn.com/b/vcblog/archive/2007/05/17/diagnosing-hidden-odr-violations-in-visual-c-and-fixing-lnk2022.aspx)，其中有更多关于这个问题的细节。基本上这是在托管和非托管代码中编译标准库字符串的一些问题。解决方案是仅在需要它的文件上启用 CLR。详细地说，这就是我所做的：

1.  删除了`/clr`适用于*整个项目的开关*
2.  `.cpp`选择了实际需要CLR的两个文件，`/clr`在`C/C++ -> General -> Common Language RunTime Support`.
3.  将整个项目`Program Database /Zi`从`Program Database for Edit and Continue /ZI`. 这消除了警告，因为我认为`/clr`支持似乎禁用了增量链接，然后我的本机代码抛出警告，因为它试图使用编辑并继续。
4.  然后我收到了一些`ExtensionAttribute`警告，我通过在我的`/clr`启用文件中添加以下开关来修复这些警告：`/clr:nostdlib /AI"%ProgramFiles%\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0"`
5.  在 Debug 版本中，我不得不禁用`/clr`-enabled 文件上的一堆调试选项。具体来说，在 下，`C/C++ -> Code Generation`我设置`Enable Minimal Rebuild`为`No (/RM-)`和`Basic Runtime Checks`。`Default`这也摆脱了一堆警告。
6.  在 Debug and Release 版本中，设置`Enable C++ Exceptions`为`No`on the `clr`-enabled 文件。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-09T14:53:26.933

好像我的 Visual Studio 处于某种损坏状态。我是唯一一个得到这个错误的人。我没有任何变化。我重新检查了旁边的项目，它是固定的。也许这是我的用户文件的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-30T22:13:06.220

我的解决方法是设置配置属性 -> C/C++ -> 代码生成 -> 结构成员对齐 -> 16 字节 (/Zp16)

# ruby-on-rails-3 - Rails 3 - 命名路由重定向到错误的控制器操作

> ID：11990097
> 
> 赞同：2
> 
> 时间：2012-08-16T15:01:47.507
> 
> 标签：ruby-on-rails-3, routing

我对 Rails 还很陌生，但我之前已经完成了几个项目，包括 Michael Hartl 教程。我正在构建一个简单的应用程序来存储虚拟衣橱。我有 2 个表 - 用户和项目 - 其中一个用户有_许多项目和一个项目属于用户。我在 routes.rb 文件中设置了以下命名路由：

```
match "/wardrobe", to: "items#index" 
```

但是，当我尝试在浏览器中转到 /wardrobe 时，出现以下无路由匹配错误：

```
No route matches {:action=>"show", :controller=>"items"} 
```

当我通过 index 操作命名路由时，我不确定为什么 rails 会尝试通过 show 操作进行路由。这些是我的 ItemsController 中的相关操作：

```
def show
  @item = Item.find(params[:id])
end

def index
  @items = Item.all
end 
```

在创建时调用重定向，如下所示：

```
def create
  @item = Item.new(params[:item])
  if @item.save
    flash[:success] = "Item added"
    redirect_to wardrobe_path                                                                                    
  else
    render 'new'
  end
end 
```

rake routes 提供以下内容：

```
wardrobe        /wardrobe(.:format)       items#index 
```

所以，我知道这条路线存在。谁能解释这里发生了什么？以及我该如何修复它？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:28:09.790

这可能是因为它的 rake 路由被称为`wardrobe_path`而不是`wardrobes_path`（复数） - 当它是单数时，Rails 将默认显示我相信的动作。这可能会造成混乱。

# vbscript - 无法让 WMI 命名空间 RSOP 工作

> ID：11990098
> 
> 赞同：1
> 
> 时间：2012-08-16T15:01:48.733
> 
> 标签：vbscript, wmi

我需要创建一个子例程来检查系统上的某些策略。我目前正在尝试这样做。

strComputerFQDN 是在程序开始时定义的，并且工作正常。

你看有什么不对吗？

这是我的代码：

```
'*************************************************************************
' This Subroutine checks Local Policies
'*************************************************************************
Sub CheckPolicies()
   Dim objGPOSrvc,colItems,objItem
   Set objGPOSrvc = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputerFQDN & "\root\RSOP")
   Set colItems = objGPOSrvc.ExecQuery("SELECT * FROM RSOP_GPO")

   WScript.Echo("Check Policies")
   WScript.Echo("------------------------------------")

   For Each objItem in colItems
      If InStr(UCase(objItem.Name),"WSUS") Then
         If InStr(UCase(objItem.Name),"SERVER") Then
            WScript.Echo("Policy applied: " & objItem.Name)
         Else
            WScript.Echo("Wrong WSUS Policy Applied - Check Computer object location")
         End If
      End If
   Next
   If strWSUSApplied = "FALSE" Then
      WScript.Echo("No WSUS Policy Applied!")
   End If
   WScript.Echo vbCrLf
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:56:29.850

命名空间应该是`root\RSOP\Computer`

```
Set objGPOSrvc = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputerFQDN & "\root\RSOP\Computer") 
```

或者`root\RSOP\User`

```
Set objGPOSrvc = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputerFQDN & "\root\RSOP\User") 
```

最典型的是你会做这样的事情：

```
strComputer = "."
Set objWMIService = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\RSOP\Computer")
Set colItems = objWMIService.ExecQuery("Select * from RSOP_GPO")
For Each objItem in colItems  
    WScript.Echo "Name: " & objItem.Name
    WScript.Echo "GUID Name: " & objItem.GUIDName
    WScript.Echo "ID: " & objItem.ID
    WScript.Echo "Access Denied: " & objItem.AccessDenied
    WScript.Echo "Enabled: " & objItem.Enabled
    WScript.Echo "File System path: " & objItem.FileSystemPath
    WScript.Echo "Filter Allowed: " & objItem.FilterAllowed
    WScript.Echo "Filter ID: " & objItem.FilterId
    WScript.Echo "Version: " & objItem.Version
    WScript.Echo
Next 
```

如果您收到错误 0x80041003，则需要使用管理员凭据运行此脚本。对于 Vista 及更高版本，打开开始菜单并键入`cmd`. 出现“命令提示符”时，右键单击并选择以管理员身份运行。您现在可以从提升的命令提示符启动脚本而不会出错。

# java - 如何访问jar文件中文件夹内的文件？

> ID：11990102
> 
> 赞同：1
> 
> 时间：2012-08-16T15:02:06.770
> 
> 标签：java, jar, directory

我查看了[如何访问 JAR 文件中的资源？](https://stackoverflow.com/questions/2393194/how-to-access-resources-in-jar-file)以及[如何将文本文件从 jar 复制到 jar 之外的文件中？](https://stackoverflow.com/questions/463972/how-do-i-copy-a-text-file-from-a-jar-into-a-file-outside-of-the-jar)和许多其他问题，但实际上无法得到答案。我要做的是将jar中的文件内容复制`res/CDC.txt`到jar中的某个地方。现在，在我的电脑上它可以工作，但是当我在不同的电脑上尝试它时，我得到了`FileNotFoundException`. 所以，我弄清楚了为什么它对我有用。我有一个 CLASSPATH 设置为`.;D:\myname\Java\JavaFiles`我所有的 java 文件位于包中的位置。在“JavaFiles”目录中还有“res/CDC.txt”。因此，当我启动我的应用程序时，它首先检查 myapp.jar 所在的当前目录中的“res/CDC.txt”，然后检查“JavaFiles”并找到它。其他电脑没有。所以，

```
public final class CT
{

//Other fields
private static CT ct;
private NTSystem nts;
private File f1;
private File f6;
private PrintWriter pw1;
private BufferedReader br1;
//Other fields

public static void main(String[] args)
{
    try
    {
        showMessage("Executing program...");
        ct = new CT();
        ct.init();
        ct.create();
        ct.insertData();
        //Other code
        showMessage("Program executed!");
    }
    catch(Exception e)
    {
        showMessage("An exception occured! Program closed.");
        e.printStackTrace();
        System.exit(0);
    }
}

private void init()
    throws IOException
{
    //Other initialization
    nts = new NTSystem();
    f1 = new File("C:\\Users\\" + nts.getName() + "\\blahblah");
    f6 = new File("res\\CDC.txt");
    br1 = new BufferedReader(new FileReader(f6));
    //Other initialization
    showMessage("Initialized");
}

private void create()
    throws IOException
{
    //Makes sure file/dir exists, etc

    pw1 = new PrintWriter(new BufferedWriter(new FileWriter(f1)), true);
    //Other Stuff

    showMessage("Created");
}

private void insertData()
    throws IOException
{
    String line = br1.readLine();
    while(line != null)
    {
        pw1.println(line);
        line = br1.readLine();
    }

    //Other stuff
    showMessage("Data inserted");
}

private static void showMessage(String msg)
{
    System.out.println(msg);
}

} 
```

我改成

```
public final class CT
{

//Other fields
private static CT ct;
private NTSystem nts;
private byte[] buffer;
private File f1;
private URL url1;
private FileOutputStream fos1;
private InputStream is1;
//Other fields

public static void main(String[] args)
{
    try
    {
        showMessage("Executing program...");
        ct = new CT();
        ct.init();
        ct.create();
        ct.insertData();
        //Other code
        showMessage("Program executed!");
    }
    catch(Exception e)
    {
        showMessage("An exception occured! Program closed.");
        e.printStackTrace();
        System.exit(0);
    }
}

private void init()
    throws IOException
{
    //Other initialization
    nts = new NTSystem();
    buffer = new byte[4096];
    f1 = new File("C:\\Users\\" + nts.getName() + "\\blahblah");
    url1 = getClass().getClassLoader.getResource("res\\CDC.txt"); //Also tried url1 = ct.getClass().getClassLoader.getResource("res\\CDC.txt"); or url1 = this.getClass().getClassLoader.getResource("res\\CDC.txt"); or url1 = CT.getClass().getClassLoader.getResource("res\\CDC.txt");
    is1 = url1.openStream();
    //Other initialization
    showMessage("Initialized");
}

private void create()
    throws IOException
{
    //Makes sure file/dir exists, etc

    pw1 = new PrintWriter(new BufferedWriter(new FileWriter(f1)), true);
    //Other Stuff

    showMessage("Created");
}

private void insertData()
    throws IOException
{
    int read = is1.read(buffer);
    while(line != null)
    {
        fos1.write(buffer, 0, read);
        read = is1.read(buffer);
    }

    //Other stuff
    showMessage("Data inserted");
}

private static void showMessage(String msg)
{
    System.out.println(msg);
}

} 
```

而这一次我总是得到`NullPointerException`。那么，如何读取 jar 中的文件夹和文件呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:20:45.797

您将需要使用[getSystemResourceAsStream()](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getSystemResourceAsStream%28java.lang.String%29)从 jar 中的文件中读取内容。

这当然是假设文件实际上位于其他用户计算机的类路径上。

# javascript - Jquery Popup 隐藏在 editlive 编辑器后面

> ID：11990103
> 
> 赞同：0
> 
> 时间：2012-08-16T15:02:08.457
> 
> 标签：javascript, jquery

在我的应用程序中，我使用了 EditLive Editor。当我尝试在 edtor 所在的同一页面上打开一个弹出窗口时，它会隐藏在它后面。谁能帮助我如何通过eitor获得我的jquery对话框。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:05:40.150

尝试为 jQuery 对话框提供更高的 z-index。

代码示例

```
//Initialize a dialog with the zIndex option specified.
$( ".selector" ).dialog({ zIndex: 3999 });
//Get or set the zIndex option, after init.
//getter
var zIndex = $( ".selector" ).dialog( "option", "zIndex" );
//setter
$( ".selector" ).dialog( "option", "zIndex", 3999 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:56:00.973

您正在处理的问题与浏览器和小程序如何共存有关。通常，小程序忽略 z-index 并始终显示在顶部 - 这不是 EditLive 问题，而是一般小程序的问题。

EditLive 具体有一个 API 来解决这个问题，称为 setBackgroundMode

*   EditLive 8：[http ://docs.ephox.com/display/public/EditLive/setBackgroundMode+Method](http://docs.ephox.com/display/public/EditLive/setBackgroundMode+Method)

*   EditLive 6/7：[http ://docs.ephox.com/display/EditLive7/setBackgroundMode+Function](http://docs.ephox.com/display/EditLive7/setBackgroundMode+Function)

请注意，在执行其他操作（例如显示 AJAX 灯箱）之前，您应该等待回调触发

# python - 范围（len（list））还是枚举（list）？

> ID：11990105
> 
> 赞同：37
> 
> 时间：2012-08-16T15:02:12.527
> 
> 标签：python, python-2.7, iteration, list-comprehension

> **可能重复：**
> [仅需要索引：枚举或（x）范围？](https://stackoverflow.com/questions/11901081/only-index-needed-enumerate-or-xrange)

其中哪一个会被认为更好/更清晰/更快/更“Pythonic”？我不关心列表的内容`L`，只关心它有多长。

```
a = [f(n) for n, _ in enumerate(L)] 
```

或者

```
a = [f(n) for n in range(len(L))] 
```

如果它有任何区别，该函数`f`也可以使用`len(list)`。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-16T15:06:11.647

一些快速的计时运行似乎给第二个选项使用`range()`了轻微的优势`enumerate()`：

```
timeit a = [f(n) for n, _ in enumerate(mlist)]
10000 loops, best of 3: 118 us per loop

timeit a = [f(n) for n in range(len(mlist))]
10000 loops, best of 3: 102 us per loop 
```

只是为了好玩`xrange()`（Python v2.7.2）

```
timeit a = [f(n) for n in xrange(len(mlist))]
10000 loops, best of 3: 99 us per loop 
```

我倾向于*首先使用可读代码*，然后使用`xrange()`（即 Pre-Python v 3.x），然后使用`range()`and `enumerate()`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T15:05:29.373

(x)range 解决方案更快，因为它的开销更少，所以我会使用它。

在 Python 2.x 中，使用`xrange`而不是`range`，因为`xrange`使用较少的内存，因为它不会创建临时列表。在 Python 3.x 中，只有`range`，这是内存较少的版本。

因此，在 Python 2.x 中，迭代 a临时`range(n)`使用*O(n)*内存，而迭代 an 临时`xrange(n)`使用*O(1)*内存。两者的运行时间都是*O(n)*。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T15:06:45.227

我会说，由于您没有使用 enumerate 函数中的“_”属性，因此请使用 range，因为这样更具可读性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T15:07:00.820

假设您使用的是 Python 2.x，如果您使用`len()`，则应该使用`xrange()`它，因为它将避免创建范围内的数字列表。

在这种情况下，我会选择，`len()`因为您使用的是索引，而不是列表中的项目。

# extjs - 是否真的所有 ExtJS 组件都没有点击事件

> ID：11990106
> 
> 赞同：1
> 
> 时间：2012-08-16T15:02:15.457
> 
> 标签：extjs, extjs4.1

我正在学习 extjs 4.1，但在大多数组件上都找不到点击事件 - 我是瞎子还是无法对点击按钮以外的其他组件做出反应？

是什么原因？HTML 支持点击所有元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T00:59:00.693

每个组件都可以在元素级别公开点击事件。一些组件像`Ext.button.Button`在组件级别有一个点击事件。

这是在面板上添加点击事件的好方法：

```
 new Ext.panel.Panel({
      listeners: {
          click: this.handlePanelClick,
          element: 'el'
      }
  }); 
```

编辑以回复评论

元素字符串是作为组件属性的任何元素。

```
new Ext.panel.Panel({
listeners: {
    click: function() {
        alert('you clicked the body');
    },
    element: 'body'
} 
```

});

Ext 文档有更详尽的解释[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Observable-method-addListener](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Observable-method-addListener)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T15:38:13.070

您可以通过访问几乎所有可见组件在渲染后包含的[Ext.dom.Element对象来轻松添加任何 DOM 事件。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element)

只需将侦听器添加到`afterrender`将您想要的事件添加到 dom 对象的事件中。

```
Ext.create('Ext.panel.Panel', {
    // other panel configs ...
    listeners: {
       'afterrender': function(panel) {
           panel.el.on('click', function() {
               alert('clicked');
           });
        }
    }
}); 
```

我认为还有一种方法可以对扩展[Ext.util.Observable](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Observable)的类的所有组件（所有可见组件）执行此操作。我以前没有做过，所以你必须玩弄它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T11:24:14.917

使用自引用托管侦听器（最干净的 imo）：

```
Ext.create('Ext.panel.Panel', {
    listeners: {
       'afterrender': function(panel) {
           this.mon(this.getEl(), 'click', this.onClick, this)
        }
    },
    onClick: function() {
        alert("mmm mon mon mon");
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-22T19:32:08.960

如果您只听点击事件，您也可以这样做

```
 xtype: 'container',
    listeners: {
         el: {
             click: function() {
                  alert('I clicked');
              },
              scope: this
             }
     } 
```

如果您需要侦听 Ext.dom.Element 不触发的事件，您需要将其附加到“渲染”侦听器中，就像其他人建议的那样。

# c# - WPF 数据绑定非常慢

> ID：11990108
> 
> 赞同：1
> 
> 时间：2012-08-16T15:02:17.537
> 
> 标签：c#, wpf, xaml, data-binding

前段时间我有一个问题（这不是重复的），你可以在这里看到：[WPF Simple DataMatrix](https://stackoverflow.com/questions/11884373/wpf-simple-datamatrix)。我询问了如何在屏幕上创建 LED 灯矩阵。我习惯了标记答案并创建了矩阵。它显示得非常好，我还在 Ellipse 上应用了命令，这样我就可以编辑矩阵，而且它也可以毫无延迟地工作。

结果这是我的矩阵代码：

```
<ItemsControl x:Class="HTLED.WPF.Controls.LedGrid"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:Data="clr-namespace:HTLED.Data;assembly=HTLED.Data"
         xmlns:Controls="clr-namespace:HTLED.WPF.Controls"
         xmlns:Commands="clr-namespace:HTLED.Client.Commands;assembly=HTLED.Client"
         xmlns:Interactivity="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
         xmlns:ViewModel="clr-namespace:HTLED.Client.ViewModel;assembly=HTLED.Client"
         mc:Ignorable="d"
         d:DataContext="{d:DesignInstance ViewModel:LedContainerViewModel}" Name="ledGridRoot" >
<ItemsControl.Resources>
    <DataTemplate x:Key="ledTemplate" DataType="{x:Type Data:Led}">
        <Ellipse Name="ellipse" Fill="Green" Stretch="Uniform" SnapsToDevicePixels="True">
            <Interactivity:Interaction.Triggers>
                <Interactivity:EventTrigger EventName="PreviewMouseMove">
                    <Commands:CommandTrigger Command="{Binding ElementName=ledGridRoot, Path=DataContext.LedGridViewModel.LedMouseMoveCommand}" PassEventArgsToCommand="True"/>
                </Interactivity:EventTrigger>
                <Interactivity:EventTrigger EventName="PreviewMouseLeftButtonDown">
                    <Commands:CommandTrigger Command="{Binding ElementName=ledGridRoot, Path=DataContext.LedGridViewModel.LedOnCommand}" PassEventArgsToCommand="True"/>
                </Interactivity:EventTrigger>
                <Interactivity:EventTrigger EventName="PreviewMouseRightButtonDown">
                    <Commands:CommandTrigger Command="{Binding ElementName=ledGridRoot, Path=DataContext.LedGridViewModel.LedOffCommand}" PassEventArgsToCommand="True"/>
                </Interactivity:EventTrigger>
            </Interactivity:Interaction.Triggers>
        </Ellipse>
        <DataTemplate.Triggers>
            <DataTrigger Binding="{Binding Path=State}" Value="Off">
                <Setter TargetName="ellipse" Property="Fill" Value="Red"/>
            </DataTrigger>
        </DataTemplate.Triggers>
    </DataTemplate>
</ItemsControl.Resources>
<ItemsControl.ItemTemplate>
    <DataTemplate>
        <ItemsControl ItemsSource="{Binding}" ItemTemplate="{StaticResource ledTemplate}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Controls:StretchStackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </DataTemplate>
</ItemsControl.ItemTemplate>
</ItemsControl> 
```

在后台我有一个名为 LedMatrix 的类。它具有 LED 集合的属性：

```
 ObservableCollection<ObservableCollection<Led>> _leds;
    public ObservableCollection<ObservableCollection<Led>> Leds
    {
        get { return _leds ?? (_leds = CreateMatrix(XSize, YSize)); }
        set { SetProperty(value, ref _leds, () => Leds); }
    } 
```

该矩阵包含在另一个控件中：

```
<Canvas x:Class="HTLED.WPF.Controls.LedContainer"
         ....
         mc:Ignorable="d" 
         d:DataContext="{d:DesignInstance ViewModel:LedContainerViewModel}"
         d:DesignHeight="300" d:DesignWidth="300" Name="layoutRoot" Drawing:DrawingCore.EnableDrawing="True">
<Viewbox Canvas.Top="0" Canvas.Left="0" Width="{Binding ElementName=layoutRoot, Path=ActualWidth}"
         Height="{Binding ElementName=layoutRoot, Path=ActualHeight}">
    <Grid>
        <Controls:LedGrid Width="50000" Height="25000" Margin="500" DataContext="{Binding Path=Main.LedContainerViewModel}" ItemsSource="{Binding Path=LedContentContainer.Content}" />
    </Grid>
</Viewbox> 
```

如您所见，我在容器中设置了 Matrix 的 ItemsSource。Itemssource 是这样的接口：

```
public interface ILedContentContainer
{
    LedMatrix Content { get; set; }
} 
```

还有我之前已经展示过的 LedMatrix (the `ObservableCollection<ObservableCollection<Led>>`)。

**现在非常重要：** 我经常更改 LedMatrix（LedGrid 的 Itemssource - 请参阅 LedGridContainer），因为它是某种动画。问题是这一切都非常非常缓慢。所以我想问你是否知道一些优化？

同样，我必须非常非常快速地更改 LedMatrix。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:17:55.840

如果每次 Led 更改时都应用一个全新`ObservableCollection`的，则必须一次又一次地渲染完整的网格。您应该更改`State`正在更改的 Led 的属性（它们应该触发`PropertyChanged`）。

此外，如果 Led 的数量是恒定的，则根本不需要`ObservableCollection`。您可以使用任何`IEnumerable`.

# javascript - Javascript JSLint：违反 ADsafe

> ID：11990112
> 
> 赞同：0
> 
> 时间：2012-08-16T15:02:32.603
> 
> 标签：javascript, jquery, jslint

我已经克服了 JSLint 的问题，通过使用 [Document was used before it is defined 解决方案]this Stack Overflow question [1](https://stackoverflow.com/questions/10766201/how-to-rectify-document-was-used-before-it-was-defined-using-jslint)建议的全局指令，向我显示“X 在定义之前使用”错误：

```
/*global $, document, window, alert, setTimeout*/ 
```

但是，这现在会产生一个新的警告：`JSLint: ADsafe violation /*global`.

有没有其他人遇到过这个警告？我们怎样才能纠正它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:05:29.167

这只是意味着通过引用全局变量，您违反了 ADsafe 子集规则。如果您不进行此类工作，则只需关闭该选项即可进行检查。（这是“adsafe”选项；只需将其设置为“false”。）

```
/*jslint adsafe: false */ 
```

# localization - 如何在 C# 中本地化部分时间

> ID：11990114
> 
> 赞同：1
> 
> 时间：2012-08-16T15:02:35.693
> 
> 标签：localization

我想在微调器控件旁边添加一个标签以指示单位，例如“小时”或“分钟”，并由应用程序自动将其本地化为西班牙语的“horas”或中文的小时（无需将标签添加到资源文件）。

我应该将标签的 Text 属性设置为什么？

# javascript - 在 QML 中转储或序列化对象

> ID：11990119
> 
> 赞同：2
> 
> 时间：2012-08-16T15:02:59.173
> 
> 标签：javascript, qt, qml

console.log() 不序列化 QML 对象。我想知道如何做到这一点？

# php - 如何使用图形 api 获取用户的 facebook 群组列表

> ID：11990123
> 
> 赞同：3
> 
> 时间：2012-08-16T15:03:09.183
> 
> 标签：php, facebook, facebook-graph-api

有人可以指出我如何使用 facebook graph api 获取特定用户连接到的所有组的列表的正确方向吗？

我有这个：

```
$groups = $facebook->api( '/me/groups', 'GET', array( 'access_token=' => $membertoken ) ); 
```

如果我使用`print_r($groups)`，我可以看到数组正在返回所有组，但是我如何分隔数组以仅将组名和组 ID 列出为单独的字符串，以便我可以在数据库等中使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:48:01.190

尝试这个：

```
print "<h2>Here are the groups you follow:</h2>\n<ul>";
foreach ($groups['data'] as $group) {
    $group_name = $group['name'];
    $group_id = $group['id'];
    printf("<li>%s - ID = %s</li>\n", $group_name, $group_id);
}
print "</ul>"; 
```

# ubuntu - Python LogicError: clGetPlatformIDs failed: platform not found khr

> ID：11990131
> 
> 赞同：6
> 
> 时间：2012-08-16T15:03:35.393
> 
> 标签：ubuntu, pyopencl

在 Ubuntu 中对 Python 程序集进行测试时出现错误：

```
devices = [ d for d in cl.get_platforms()[0].get_devices() if
LogicError: clGetPlatformIDs failed: platform not found khr

File "/home/fateeva/prog/deflectometry/SGMFMeasurement/_PhaseShifts.py", line 30, in <module>
    devices = [ d for d in cl.get_platforms()[0].get_devices() if
LogicError: clGetPlatformIDs failed: platform not found khr 
```

怎么可能修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-10-23T10:32:51.450

似乎您已经安装了 pyopencl，但没有安装任何实际的设备驱动程序。请查阅[https://documen.tician.de/pyopencl/misc.html](https://documen.tician.de/pyopencl/misc.html)上的文档。

以下是对这种行为的描述：

> 请注意，如果没有通过 OpenCL 提供对硬件的访问的 OpenCL 设备驱动程序（所谓的“ICD”，意为“可安装的客户端驱动程序”），PyOpenCL 就没有乐趣（即无法运行代码）。如果您收到类似 pyopencl.cffi_cl.LogicError: clGetPlatformIDs failed: 的错误消息，则表示您没有安装 OpenCL 驱动程序。

基本上，下一个命令应该足以让它在 CPU 上运行：

```
[pip]conda install pocl 
```

要正确安装 AMD 和 Nvidia 设备，请查找供应商提供的 OpenCL 驱动程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T14:59:04.917

这是一个错误。尝试这个：

```
sudo apt-get install nvidia-settings
sudo nvidia-smi 
```

或以 root 身份运行它（不带 sudo）。

之后，您应该能够运行它。

添加

```
nvidia-smi 
```

到 /etc/rc.local （当然是在退出之前），所以你的 GPU 将在每次启动后可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-25T07:43:10.220

这可能是因为 OpenCL 驱动程序没有正确安装。

Intel CPU 需要用于 Intel Core 和 Intel Xeon 处理器（16.1.1 或更高版本）的 OpenCL Runtime。从英特尔网站下载并安装最新的 OpenCL™ Runtime。忽略兼容性警告。

来源：[https ://youtu.be/AieYqNQ6ADM](https://youtu.be/AieYqNQ6ADM)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-10T11:02:30.833

尝试以 root 身份运行您的 python 脚本。如果`cl.get_platforms()`在 root 下没有抛出任何错误，那么您的用户没有足够的权限来执行该操作。为了解决这个问题，安装`nvidia-modprobe`包：

```
sudo apt-get install nvidia-modprobe 
```

[资源](http://blog.linux4us.org/2015/05/30/how-to-solve-pyopencl-clgetplatformids-failed/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-22T07:39:44.333

尝试这个。它应该工作：

```
devices = [ d for d in cl.get_platforms()[0].get_devices(cl.device_type.GPU)] 
```

如果您想列出您平台上的所有兼容设备，只需使用

```
platform = cl.get_platform()
my_devices = platform[0].get_devices(device_type = cl.devices_type.ALL)
print my_devices 
```

要在任何兼容设备上创建上下文，请使用以下命令：

```
context = cl.Context([my_devices[<index>]) 
```

Where 对应于您要为其创建上下文的设备。例如：

```
context = cl.Context([my_devices[0]) 
```

也可以参考我的这篇文章，它会有所帮助。我也有这个问题：

[pyopencl：为特定设备创建上下文](https://stackoverflow.com/questions/12995859/error-pyopencl-creating-context-for-specific-device/13001328#13001328)

# forms - onsubmit() 不调用我的函数，但表单确实被提交

> ID：11990133
> 
> 赞同：0
> 
> 时间：2012-08-16T15:03:41.140
> 
> 标签：forms, onsubmit

我有一个外部 js 文件，其中包含以下功能。它应该被表单 onsubmit 调用，但它似乎没有发生。表单只是未经验证而提交。在某一时刻，这是有效的，但现在不是。我哪里错了？任何帮助表示赞赏。

```
function validateDelete(form)
{
alert("Validation Started!");
var photoName=form.deleteName;
if (photoName === "")
{
    alert("Photo Name Required");
    return false;
}
}

  <script src="galleryScripts/validation.js" type="text/javascript" ></script>
    <form action="galleryScripts/deletePhoto.php?submit=true" name="deleteForm" onsubmit="return validateDelete(this);" id="deleteForm" method="post">
    <label>
    File Name: <input name="deleteName" type="text" id="deleteName">      
    </label> 
    <label>                       
    <input type="submit" name="deleteButton" id="deleteButton" value="Delete" />                 
    </label>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:11:02.707

确保包含您的 js。

例如，在 mozilla 下按 CTRL+U 并单击指向您的 validation.js 文件的链接。

您也可以在标签中粘贴标签，它应该可以工作。

# asp.net - ASP.NET 母版页变量设置/访问

> ID：11990135
> 
> 赞同：0
> 
> 时间：2012-08-16T15:03:43.980
> 
> 标签：asp.net

我有一个母版页和一个子页（使用母版页的页面）。

我有一个从子页面调用的类/函数（像这样）：

```
new MasterPageSiteWide().setGeoAndLanguage(ViewState["_country"].ToString(), _lang); 
```

这会调用该函数（当我单步执行它时会执行这些值）。

在母版页上，我有：

```
public partial class MasterPageSiteWide : System.Web.UI.MasterPage
{
    public string _closeTimeType;
    public string _langForCalendar;

    public void setGeoAndLanguage(string nation, string lang)
    {
        string globalresourcestring = string.Empty;
        _langForCalendar = (String)GetGlobalResourceObject("share", "lblCalendarLang");

        switch (nation.ToUpper())
        {
            case "USA":
                ViewState["geo"] = "USA";
                ViewState["langID"] = 1;
                _closeTimeType = "PTPA";
                break;
            case "CAN":
                if (lang.ToUpper() == "FR")
                {
                    ViewState["geo"] = "CAN";
                    ViewState["langID"] = 2;
                    _closeTimeType = "CANPA";
                }
                else
                {
                    ViewState["geo"] = "CAN";
                    ViewState["langID"] = 1;
                    _closeTimeType = "CANPA";
                }
                break;
            case "MEX":
                ViewState["geo"] = "MEX";
                ViewState["langID"] = 3;
                _closeTimeType = "MEXPA";
                break;
            default:
                ViewState["geo"] = "USA";
                ViewState["langID"] = 1;
                _closeTimeType = "PTPA";
                break;
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {

    }
} 
```

当代码逐步执行时，它会设置变量`_closeTimeType`和`_langForClaendar`（我可以看到值）。

但是当它返回子页面时，这些值是`null`. 我正在像这样访问它们：

```
Master._closeTimeType 
```

`ViewState`变量也是在`null`加载母版页之后。

**注意：** 我在`.aspx`页面上有这一行：

```
<%@ MasterType  virtualPath="~/MasterPageSiteWide.master"%> 
```

为什么变量不保持我设置的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:35:34.747

根据您的示例，我认为您可能无意中实例化了一个*额外*的母版页，而实际上您想要调用*现有*页面实例所基于的母版页上的函数。您可以从子页面尝试类似于以下演员的内容：

```
((MasterPageSiteWide)this).setGeoAndLanguage(ViewState["_country"].ToString(), _lang); 
```

您也可以直接尝试，例如

```
Master.setGeoAndLanguage(ViewState["_country"].ToString(), _lang); 
```

这应该从当前页面实例调用母版页函数，并导致页面按预期运行（保留值）。希望有帮助。

# sorting - ls 无法以所需的方式订购文件

> ID：11990136
> 
> 赞同：1
> 
> 时间：2012-08-16T15:03:50.760
> 
> 标签：sorting, ls

我有一个脚本，它使用 output_#.root 创建文件，其中 # 是一个数字。当我在目录中执行 ls 时，它会选择以一种奇怪的方式对文件进行排序：

```
output_1.root
output_10.root
output_100.root
output_11.root
output_2.root 
```

等等

如何使其按逻辑顺序 1、2、3 等对文件进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:21:21.287

您的文件按字母顺序排序。这是正常的行为。如果你想按数字顺序对它们进行排序，你可以试试这个：

```
ls *.root | sort -k2 -t_ -n 
```

这将使用分隔符拆分您的结果，并根据第二个字段`_`按数字顺序排序。`-n``-k2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:50:44.420

如果您使用 GNU coreutils 中的 ls，您可以使用版本排序开关：

```
ls -v 
```

创建示例文件：

```
touch output_1.root output_10.root output_100.root output_11.root output_2.root 
```

列出它们：

```
ls -1v 
```

输出：

```
output_1.root
output_2.root
output_10.root
output_11.root
output_100.root 
```

# xna - 关于 Silverlight + XNA 的延迟

> ID：11990143
> 
> 赞同：0
> 
> 时间：2012-08-16T15:04:14.753
> 
> 标签：xna

我目前正在使用 Silverlight 和 XNA 为 Window Phone 创建 2D 冒险游戏。当我调试代码时，没有任何错误。运行游戏时，动作不流畅，似乎很慢。是否使用WCF记录用户信息出现卡顿？还是图片太多要渲染？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T01:18:48.173

分析您的游戏性能： http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/hh202934 (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202934(v=vs.92).aspx)

以下是一些提高性能的方法：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/hh855082 (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh855082(v=vs.92).aspx)

# mysql - 字段值前的 mySQL 空格

> ID：11990144
> 
> 赞同：2
> 
> 时间：2012-08-16T15:04:18.140
> 
> 标签：mysql

如果值不为空，我试图在其中输入一个空格，但它似乎只在我运行查询时输出一个数字？

```
CONCAT(address, IF(address2 = '', '', ' ' & address2), ' ', city, ', ', state, ' ', zip) AS theAddress 
```

上面的查询输出是：

```
1234 N. Shore Ave.0 Burbank, CA 41577 
```

输出应如下所示：

```
1234 N. Shore Ave. Apartment 223 Burbank, CA 41577 
```

我会在这里做错什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T15:08:58.903

试试这个：

```
CONCAT(address, IF(address2 = '', '', CONCAT(' ', address2)), ' ', city, ', ', state, ' ', zip) AS theAddress 
```

我认为您的代码正在做的是空间和地址2之间的逻辑与

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T15:08:37.590

我认为应该是另一个`concat`不`&`

```
CONCAT(address, IF(address2 = '', '', CONCAT(' ',  address2)), ' ', city, ', ', state, ' ', zip) AS theAddress
                                         ^ here 
```

`' ' & address2`返回 0 和 1（真或假）

# css - 对齐选项卡折叠与 Twitter Bootsrap

> ID：11990148
> 
> 赞同：0
> 
> 时间：2012-08-16T15:04:28.577
> 
> 标签：css, tabs, twitter-bootstrap

我无法对齐从顶部选项卡折叠的选项卡。

这是我的情况：http: [//jsfiddle.net/PbRck/](http://jsfiddle.net/PbRck/)

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:23:09.670

您必须定义单元格的宽度，就像我为第一个 (http://jsfiddle.net/PbRck/3/) 所做的那样，否则它将由浏览器根据内容进行计算。

# iphone - 将线旋转一个角度

> ID：11990149
> 
> 赞同：1
> 
> 时间：2012-08-16T15:04:33.023
> 
> 标签：iphone, objective-c, math

我在 2 点 A(100, 100) 和 B(100, 200) 之间画了一条线，我想围绕 A 点旋转 x 度。显然，该代码仅适用于 45 度。我试过90度，它看起来很不对劲。我希望有人能够指出什么是错的。

```
float newX = 100.0f;
float newY = 100.0f;
float newX1 = 100.0f;
float newY1 = 200.0f;
float degree = 90.0;
float x, y;
x = newX1;
y = newY1;
x -= newX;
y -= newY;
newX1 = (x * cos(degree)) - (y * sin(degree));
newY1 = (x * sin(degree)) + (y * cos(degree));
newX1 += newX;
newY1 += newY;
CGContextBeginPath(ctx);
CGContextMoveToPoint(ctx, newX, newY);
CGContextAddLineToPoint(ctx, newX1, newY1);
CGContextStrokePath(ctx); 
```

# java - 使用 XMLReader 针对 XSD 验证 XML

> ID：11990150
> 
> 赞同：2
> 
> 时间：2012-08-16T15:04:35.117
> 
> 标签：java, xml, xsd, xml-parsing, xsd-validation

网上有很多关于这个验证过程的手册。尽管如此，我还是找不到我的代码无法正常工作的原因。我在[这里](http://www.java2s.com/Code/Java/XML/ValidatexmlagainstXMLSchema.htm)得到的输入模式和 xml 的值。

```
static String schemaString ="<?xml version=\"1.0\"?>" +
        "<xs:schema xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"" +
        " targetNamespace=\"http://www.java2s.com\"" +
        " xmlns=\"http://www.java2s.com\"" +
        " elementFormDefault=\"qualified\">" +
        "<xs:element name=\"note\">" +
        "<xs:complexType>" +
        "<xs:sequence>" +
        "<xs:element name=\"to\" type=\"xs:string\"/>" +
        "<xs:element name=\"from\" type=\"xs:string\"/>" +
        "<xs:element name=\"heading\" type=\"xs:string\"/>" +
        "<xs:element name=\"body\" type=\"xs:string\"/>" +
        "</xs:sequence>" +
        "</xs:complexType>" +
        "</xs:element>" +
        "</xs:schema>";

static String xmlString = "<?xml version=\"1.0\"?>" +
        "<note>" +
        "<to>rtoName</to>" +
        "<from>FromName</from>" +
        "<heading>Info</heading>" +
        "<body>Message Body</body>" +
        "</note>";

    String xml;
    XMLReader xmlReader = null;
    try {

        SAXSource source = new SAXSource(new InputSource(new StringReader(schemaString)));
        SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
        Schema schema = schemaFactory.newSchema(source);

        SAXParserFactory spf = SAXParserFactory.newInstance();
        spf.setSchema(schema);
        SAXParser saxParser = spf.newSAXParser();
        xmlReader = saxParser.getXMLReader();
    } catch (Exception e) {
        e.printStackTrace();
    } 

    // parsing step after all preconditions succeeded
    try {
          xmlReader.parse(new InputSource(new StringReader(xmlString)));
    } catch (Exception e) {
        e.printStackTrace();   
    } 
```

执行结果是这样的：

```
[Error] :1:28: cvc-elt.1: Cannot find the declaration of element 'note'. 
```

在调试器模式下，一切似乎都很好。架构设置正确等等。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:28:10.087

我猜问题是您的 XML 中未定义的名称空间。

尝试显式设置命名空间（请参阅您`targetNamespace`在 XSD 中的内容：

```
static String xmlString = "<?xml version=\"1.0\"?>" +
    "<note xmlns=\"http://www.java2s.com\">" +
    "<to>rtoName</to>" +
    "<from>FromName</from>" +
    "<heading>Info</heading>" +
    "<body>Message Body</body>" +
    "</note>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T15:52:16.383

您使用 有什么特别的原因`XMLReader`吗？
我只想介绍另一种方式，您可能会发现它很有用：

```
import javax.xml.validation.Schema;
import javax.xml.validation.SchemaFactory;
import javax.xml.validation.Validator;      

// ...

   try {
        // load schema from file
        File schemaFile = new File(schemaLocation);
        // load xml source form string holding the content
        Source xmlFile = new StreamSource(new StringReader(fileContent));

        SchemaFactory schemaFactory = SchemaFactory
            .newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);

        Schema schema = schemaFactory.newSchema(schemaFile);

        Validator validator = schema.newValidator();

        validator.validate(xmlFile);

        System.out.println("XML is valid");

    } catch (Exception e) {

        System.out.println("XML is NOT valid");
        System.out.println("Reason: " + e.getMessage());

    } 
```

# javascript - Javascript通过函数传递title属性

> ID：11990154
> 
> 赞同：0
> 
> 时间：2012-08-16T15:04:42.960
> 
> 标签：javascript

我有一个功能可以获取选择菜单的值，而且效果很好。但我正在尝试为该函数添加另一个值。所以我想我会使用 title 属性作为选项（请参阅下面的代码）。问题是我的 JavaScript 函数中的用户名参数是`undefined`.

有人对我做错了什么有任何想法吗？

**形式**

```
<form action="">
    <select id="acyear" name="acyear" onchange="showyearlogdays(this.value, this.title)">
    <option value="" label="">- Year -</option>
<?php

$is_business_result = mysql_query('SELECT DISTINCT(academic_year)FROM holiday_entitlement_business_manual WHERE employee = \'' . $username . '\''); 

    while($acyear_filter = mysql_fetch_array($is_business_result)) {
    echo '<option value="'.$acyear_filter['academic_year'].'" title="'.$username.'"';

    $datestr = $acyear_filter['academic_year'];
    $currentyear = substr($datestr, 0, 4);

    if(intval(substr($datestr,4,2)) < 8){$ayear = ($currentyear - 1).'/'.$currentyear;}
    else{$ayear = ($currentyear).'/'.($currentyear + 1);}       
        echo '>';

    echo $ayear;

    echo '</option>';
    }

?>    
    </select>
</form> 
```

**Javascript**

```
 function showyearlogdays(str, username)
 {
 if (str=="")
   {
   document.getElementById("txtHint").innerHTML="";
   return;
   } 
 if (window.XMLHttpRequest)
   {// code for IE7+, Firefox, Chrome, Opera, Safari
   xmlhttp=new XMLHttpRequest();
   }
 else
   {// code for IE6, IE5
   xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
 xmlhttp.onreadystatechange=function()
   {
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
     {
     document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
     }
   }
 xmlhttp.open("GET","days_yearlog.php?username="+username+"&q="+str,true);
 xmlhttp.send();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:05:52.760

您需要获取`title`所选选项的属性。您的代码指向标签的`title`属性`select`。进行以下更改：

```
showyearlogdays(this.value, this.options[this.selectedIndex].title) 
```

You should also address the security concern mentioned in the comments. The way your query is setup would make for a really simple SQL Injection attack. If you don't want to rearchitect it the way the commenter suggested, I would at least escape `$username` so that SQL can't be injected.

# ios - 清除 iOS 应用程序上的 NSUrlConnection 缓存？

> ID：11990155
> 
> 赞同：0
> 
> 时间：2012-08-16T15:04:50.713
> 
> 标签：ios, ipad, nsurlconnection

我已经接管了一个已经经历了几次迭代的 iPad 应用程序的开发。该应用程序旨在从我们的网站获取配置设置的特定文件。但是，只有最新版本的应用程序被设计为不缓存此文件，因为旧版本使用 NSUrlConnection。如果应用程序依赖的服务之一发生更改，则旧版本的用户可能会遇到问题，直到他们的缓存超时并获得新的配置文件。

我想知道给旧版本用户的最佳指令是什么（或者至少是“升级”之后的第二好的指令）。有没有办法手动清除 NSUrlConnection 缓存？卸载/重新安装会解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:13:02.670

控制缓存的是 NSURLRequest（或者它的可变兄弟）。

所以看看`NSURLRequest` [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html的参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html)

并选择最合适的`NSURLRequestCachePolicy`

# c# - 内部 .NET Framework 数据提供程序错误 1025

> ID：11990158
> 
> 赞同：57
> 
> 时间：2012-08-16T15:05:00.667
> 
> 标签：c#, .net, entity-framework, entity-framework-4, expression-trees

```
IQueryable<Organization> query = context.Organizations;

Func<Reservation, bool> predicate = r => !r.IsDeleted;

query.Select(o => new { 
    Reservations = o.Reservations.Where(predicate)
}).ToList(); 
```

此查询会引发“内部 .NET Framework 数据提供程序错误 1025”异常，但下面的查询不会。

```
query.Select(o => new { 
    Reservations = o.Reservations.Where( r => !r.IsDeleted)
}).ToList(); 
```

我需要使用第一个，因为我需要检查一些 if 语句来构造正确的谓词。我知道在这种情况下我不能使用 if 语句，这就是我将委托作为参数传递的原因。

我怎样才能使第一个查询工作？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-02-26T17:32:50.933

虽然上述答案是正确的，但请注意，在 select 语句之后尝试使用它时，必须`AsQueryable()`显式调用，否则编译器将假定我们正在尝试使用 IEnumerable 方法，该方法期望 a`Func`而不是`Expression<Func>`。

这可能是原始海报的问题，否则编译器大部分时间都会抱怨它正在寻找`Expression<Func>`而不是`Func`.

演示：以下将失败：

```
MyContext.MySet.Where(m => 
      m.SubCollection.Select(s => s.SubItem).Any(expr))
         .Load() 
```

虽然以下将起作用：

```
MyContext.MySet.Where(m => 
      m.SubCollection.Select(s => s.SubItem).AsQueryable().Any(expr))
         .Load() 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-12-13T14:52:49.663

*创建赏金（老鼠！）后，我找到*了*[这个答案](https://stackoverflow.com/a/3856178/7850)，它解决了我的问题。（我的问题涉及到一个`.Any()`电话，这比这个问题要复杂一些......）*

 *简而言之，这是您的答案：

```
IQueryable<Organization> query = context.Organizations;

Expression<Func<Reservation, bool>> expr = r => !r.IsDeleted;

query.Select(o => new { Reservations = o.Reservations.Where(expr) })
  .ToList(); 
```

阅读引用的答案，了解为什么需要局部变量`expr`，并且不能直接引用另一种返回类型的方法`Expression<Func<Reservation, bool>>`。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-12-13T18:59:26.547

谢谢你ping我。我想我毕竟是在正确的轨道上。

无论如何，重申一下，[LINQ to Entities](http://msdn.microsoft.com/en-us/library/bb386964.aspx)（感谢 Jon Skeet 在我在评论中混淆了自己的思维过程时纠正了我）在[Expression Trees](http://msdn.microsoft.com/en-us/library/bb397951.aspx)上运行；它允许[投影将 lambda 表达式转换为 SQL`QueryProvider`](http://blogs.msdn.com/b/mattwar/archive/2008/11/18/linq-links.aspx)。

常规`Func<>`适用于[LINQ to Objects。](http://msdn.microsoft.com/en-us/library/bb397919.aspx)

因此，在这种情况下，当您使用实体框架时，传递给 EF 的任何谓词`IQueryable`都必须是`Expression<Func<>>`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-03-08T12:48:23.607

我只是在不同的情况下遇到了这个问题。

我有一个充满`Expression`谓词的静态类，然后我可以将其组合或传递给 EF 查询。其中之一是：

```
 public static Expression<Func<ClientEvent, bool>> ClientHasAttendeeStatus(
        IEnumerable<EventEnums.AttendeeStatus> statuses)
    {
        return ce => ce.Event.AttendeeStatuses
            .Where(a => a.ClientId == ce.Client.Id)
            .Select(a => a.Status.Value)
            .Any(statuses.Contains);
    } 
```

由于`Contains`方法组调用，这引发了 1025 错误。实体框架需要一个*Expression*并找到一个*方法组*，这导致了错误。将代码转换为使用 lambda（可以隐式转换为表达式）修复了错误

```
 public static Expression<Func<ClientEvent, bool>> ClientHasAttendeeStatus(
        IEnumerable<EventEnums.AttendeeStatus> statuses)
    {
        return ce => ce.Event.AttendeeStatuses
            .Where(a => a.ClientId == ce.Client.Id)
            .Select(a => a.Status.Value)
            .Any(x => statuses.Contains(x));
    } 
```

* * *

旁白：然后我将表达式简化为`ce => ce.Event.AttendeeStatuses.Any(a => a.ClientId == ce.Client.Id && statuses.Contains(a.Status.Value));`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-21T01:11:25.767

有类似的问题。如下所示的 ViewModel 库：

```
public class TagViewModel
{
    public int Id { get; set; }
    public string Name { get; set; }

    public static Expression<Func<SiteTag, TagViewModel>> Select = t => new TagViewModel
    {
        Id = t.Id,
        Name = t.Name,
    }; 
```

这有效：

```
var tags = await db.Tags.Take(10).Select(TagViewModel.Select)
    .ToArrayAsync(); 
```

但是，这不会编译：

```
var post = await db.Posts.Take(10)
    .Select(p => new {
        Post = p,
        Tags = p.Tags.Select(pt => pt.Tag).Select(TagViewModel.Select)
    })
    .ToArrayAsync(); 
```

因为第二个`.Select`是一团糟——第一个实际上是从一个 ICollection 中调用的，它不是 IQueryable，所以它把第一个 Expression 当作普通的`Func`，而不是`Expression<Func...`. 返回`IEnumerable<...`，如本页所述。所以`.AsQueryable()`救援：

```
var post = await db.Posts.Take(10)
    .Select(p => new {
        Post = p,
        Tags = p.Tags.Select(pt => pt.Tag).AsQueryable()
            .Select(TagViewModel.Select)
    })
    .ToArrayAsync(); 
```

但这会产生一个新的、更奇怪的问题：要么我得到 Internal Framework...Error 1025，要么我得到带有完全加载`.Post`属性的 post 变量，但该`.Tags`属性有一个似乎用于延迟加载的 EF 代理对象。

解决方案是通过结束使用 Anonymous 类来控制标签的返回类型：

```
public class PostViewModel
{
    public Post Post { get; set; }
    public IEnumerable<TagViewModel> Tags { get; set; } 
```

现在选择它，一切正常：

```
var post = await db.Posts.Take(10)
    .Select(p => new PostViewModel {
        Post = p,
        Tags = p.Tags.Select(pt => pt.Tag).AsQueryable()
            .Select(TagViewModel.Select)
    })
    .ToArrayAsync(); 
```*

# android - 安卓通话管理器

> ID：11990163
> 
> 赞同：0
> 
> 时间：2012-08-16T15:05:27.613
> 
> 标签：android

我在谷歌搜索但没有找到答案？我可以从我自己的应用程序中执行电话呼叫吗？想象一下，我们有 EditText 和 Button 的活动。按下按钮后可以拨打 EditText 中输入的号码吗？这是真的吗？以什么方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:08:34.480

使用此代码。

```
Intent callIntent = new Intent(Intent.ACTION_DIAL);

callIntent.setData(Uri.parse("tel:98498489484"));

startActivity(callIntent); 
```

# mysql - 在没有用户输入的情况下显示来自 mysql 的数据——安全问题

> ID：11990164
> 
> 赞同：1
> 
> 时间：2012-08-16T15:05:27.553
> 
> 标签：mysql, security

我正在开发一个基本的 mysql 应用程序，它基本上将从数据库中获取所有数据并显示它，唯一真正的用户交互是能够对它们进行排序。由于没有用户可以输入任何数据的地方，我觉得创建它相对更安全。我担心的主要问题是应用程序何时必须登录服务器。我在服务器上创建了一个单独的用户名，并限制了数据库中的权限，以便特定用户只能“选择”数据。我担心这仍然会暴露服务器的位置。我应该加密这一步吗？考虑到这种情况，我还应该注意其他安全问题吗？

如果您需要更多信息，我很乐意在此处添加。

**更新**

知道它的主要功能是为商业目的对商品进行分类可能很有用。此数据库中的任何信息都不会是私有的。交易将在第三方电子商务网站的帮助下进行。我想使用 php mysqli 访问数据库并将其显示为 html。该站点位于共享的商业服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:09:49.317

您仍然应该使用准备好的查询来进行 SQL 查询，以防系统以后需要支持更多种类的查询（或者如果系统数据库帐户配置错误或类似情况。）。

你的服务器的位置不需要隐藏，只要它受到足够的保护。您不应该依赖攻击者不知道服务器在哪里，因为他们通常可以弄清楚这一点。如果您的应用程序知道服务器的位置，则可以安全地假设攻击者也可以获得它。

而是将您的安全重点放在保护服务器上。最小化服务器上​​的帐户，确保它们具有非默认（和非平凡）密码，确保软件是最新的，等等。

# c# - 概念：支持 Web 的 C# 应用程序

> ID：11990167
> 
> 赞同：2
> 
> 时间：2012-08-16T15:05:30.260
> 
> 标签：c#

我正在为 C# 网站设计理念而苦苦挣扎。

假设我需要一个整天连续递增整数的应用程序（任何连续长时间运行过程的简单表示）。我需要编写一个网站，允许我（和其他用户）登录，查看当前值，最好见证它的更新，可能通过重置它与它进行交互，然后注销，让进程继续运行。

我可以把它写成一个网站，还是我必须写一个网站来提供页面和单独的应用程序来做持续的工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:07:58.357

就我个人而言，我希望“工作”是某种可以与之交互的 Windows 服务（通过数据库状态，或直接通过某种传输机制、WCF、消息队列等）。然后，该网站将与现有服务对话并执行它需要做的事情（获取状态、更新等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:23:28.820

There are a couple of routes you could take. I would separate this into 3 different roles:

*   State Management: This layers simply stores the state of the counter or work. Determine what type of data store will be used (such as SQL Server)
*   Worker: This layer is the 'worker' role, responsible for incrementing the counter or whatever work needs to be done. This could be a Windows Service as others have posted, but I would probably opt for Windows Workflow exposed as a WCF Service. It would be much easier to manage the 'worker' this way and offers a more scalable solution.
*   UI: The next layer would the actual website, such as an ASP.NET MVC application, which could subscribe to the service and make various method calls.

See Workflow Services: [http://msdn.microsoft.com/en-us/library/dd456797](http://msdn.microsoft.com/en-us/library/dd456797)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:17:09.787

将整数存储在符合[ACID](http://en.wikipedia.org/wiki/ACID)的数据库（如 SQL Server）中是否存在问题？然后您可以与您构建的 Web 应用程序进行交互，对吗？似乎是处理像这个整数值这样的共享对象的理想方式。ACID 合规性意味着整数可以很好地在硬件故障中幸存下来，您可以记录有关谁在调整整数的活动等。与使用数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T15:10:05.713

您可以拥有一个网页，因为不需要提供多个页面。该页面可以从内部存储器、数据库或不断更新的 Web 服务中读取计数器值（可能添加一个 AjaxUpdate 面板以显示它正在运行）。然后，您可以编写一个函数，例如`ResetCounter()`连接到数据库/Web 服务并重置计数。

# xml - 有没有办法为元素分隔列表定义 XSD

> ID：11990170
> 
> 赞同：2
> 
> 时间：2012-08-16T15:05:42.577
> 
> 标签：xml, xsd, separator, xmllist

我想为以下 XML 构造定义一个模式：

```
<object>System<S/>Design<S/>Part</object> 
```

元素“对象”应填充内容列表作为枚举值（系统、设计、部分），其中可能包含空格 - 这就是我不能使用空格分隔列表的原因。作为分隔符，我使用元素。

但是所有可以父简单内容的 xsd 元素都不会成为父元素，反之亦然。有没有办法解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:18:36.093

答案是否定的——除非您迁移到 XSD 1.1 并使用断言。

在 XSD 1.0 中，无法限制出现在混合内容元素的文本节点中的文本。这是因为您没有按照设计使用的方式使用 XML（在这种结构上使用 XPath/XSLT 也会遇到问题）。

在 XSD 1.1 中，您可以对“对象”的声明进行断言，例如

test="text() 中的每个 $s 都满足 $s = ('System', 'Design', 'Part')

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T20:43:16.917

解决它的最简单方法是使用稍微不同的 XML 结构，例如：

```
<object>
  <item>System</item>
  <item>Design</item>
  <item>Part</item>
</object> 
```

这允许单个项目值根据需要包含空格，并且可以很容易地使用 XSD 中的枚举列表来约束合法值。它还更直接地展示了数据的结构：您正在使用某物或其他物的列表来描述对象（我之所以这么称呼它`item`是因为我不知道它们实际上是什么——在你的 XML！）。列表中的每一个东西都是你的问题概念模型中的一个不同的对象，如果每个都由一个不同的 XML 对象（这里是一个不同的实例）表示，那么你和你的 XML 工具的生活都会更好元素类型`item`）。

# .htaccess - 从短网址重定向

> ID：11990172
> 
> 赞同：1
> 
> 时间：2012-08-16T15:05:44.300
> 
> 标签：.htaccess, url, redirect

假设 short.com 是短域，long.com 是长域

更新：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^www.long.com
RewriteRule (.*) http://long.com/ [R=301]

RewriteCond %{HTTP_HOST} ^short\.li$ [NC]
RewriteCond %{REQUEST_URI} !^/redirect
RewriteRule ^(.*)$ /redirect?short=$1 [L,R=301]

RewriteCond %{HTTP_HOST} ^(www\.)short\.li$
RewriteRule ^$ http://long.com/ [L,R=301] 
```

两个域都指向该根目录。当我输入 short.li 时，我最终会访问 long.com/?l= 我是怎么搞砸的？^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:12:52.080

在你的 htaccess 文件中试试这个：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www\.)short\.com$
RewriteRule ^$ http://www.long.com/ [L,QSA,R=301] 
```

`RewriteEngine on`如果它已经存在则删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:18:20.723

我想你可能想要这样的东西：

```
RewriteEngine on
RewriteCond {REQUEST_URI} !/
RewriteCond {HTTP_HOST} short.com
RewriteRule ^(.*) http://long.com/redirect.php?short=$1 [L,R=301]

RewriteCond {REQUEST_URI} /
RewriteCond {HTTP_HOST} short.com
RewriteRule ^(.*) http://long.com/ [L,R=301] 
```

不确定最后一个是否需要正则表达式，但是这样的东西应该可以

# javascript - Backbone.js 事件处理程序命名的最佳实践

> ID：11990176
> 
> 赞同：21
> 
> 时间：2012-08-16T15:05:49.230
> 
> 标签：javascript, events, backbone.js, naming-conventions

假设我在视图中有一个函数，当某种状态改变时触发。最好给它起什么名字，为什么？

*   状态变化
*   状态改变
*   onStateChange
*   onStateChanged

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-16T15:13:38.397

我个人更喜欢**`onEventName`**为 DOM 事件处理程序使用保持本机命名约定的名称。

喜欢`myElement.onclick = function() { /* ... */ }`活动`click`。

所以**`myEvent`**我使用的是名为**`onMyEvent`**.

如果我有事件**`stateChange`**，那么我将使用**`onStateChange`**处理程序。

但实际上，这个问题对于每个开发人员团队和团队/公司内部的**代码风格约定更为具体。**

所以这类问题的主要目标是保持所有部分的代码风格相同，以确保可读性。

因此，如果您在一个团队中工作，只需遵守团队的代码编写约定，如果您独自处理现有代码，请尝试保持其代码风格（确定这种风格是否不明显）。

**更新：理解。**

**什么是事件？**粗略地说，它是在程序外部或内部发起的一个动作，换句话说，系统中发生了一些事情，例如一些状态变化（键盘、鼠标、I/O 设备等的状态）并不重要（用户点击在鼠标或某些程序上向系统发送鼠标点击信号）。

假设浏览器窗口已订阅以获取有关某些事件的通知，并且操作系统会尽快将它们发送给它，我们将假设在发生某些事情的同时。因此，如果用户在浏览器窗口处于活动状态并且文档具有焦点时单击鼠标，则浏览器会告诉文档以触发`click`事件。在这里我们的`onclick`处理程序开始它的调用。换句话说，系统告诉我们现在发生了**某种状态的变化**。我们正在处理这个**变化**，而不是在处理一个事实，告诉我们状态已经改变。

**假设我们的处理程序命名为`onClicked`.** 由于处理程序的名称是过去时态，我们可以得到一个合理的问题：“当点击时，它发生在多长时间前？它被点击了多少次？嗯，也许现在处理这个动作（或动作？）已经太晚了。 ……”。所以这个名字告诉我们在过去的某个时间发生了一些事情。

**相比之下，当我们的处理程序命名`onClick`**为时，显然该`click`事件只是触发并触发了一次，并且我们立即收到了通知。我们将处理**点击****事件**——信息告诉我们鼠标的状态现在改变了（**不是**鼠标**点击**，而是点击**事件**）。

因此，过去时的名称更适合我们需要检查某个状态是否已更改的情况。例如，如果变量存储了`state = 1`我们可以调用函数**`isStateChanged();`**，它将`state`变量中的值与当前时刻的实际值进行比较。在这里，过去时是命名的好选择。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T15:08:18.053

`onStateChanged`因为只要某种状态发生变化，这个函数就会触发。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-30T07:46:50.467

我用谷歌搜索了几个名字，并注意到返回的结果数量。您可以了解事件处理程序最常见形式的相对流行程度：

```
stateChanged 168k
stateChange 81k [1] 
handleStateChange 61k
onStateChange 59k 
onStateChanged 12k 
beforeStateChange 2k 
```

[1] 结果显示 stateChange 主要用作事件的名称，而不是处理程序。

使用不同的事件类型对 onStateChange 表单给出了更强烈的建议：

```
change [2]
onChange 2000k
onChanged 85k
handleChange 36k
beforeChange 27k
afterChange 22k

click [2]
onClick 48000k
onClicked 58k
handleClick 50k
beforeClick 8k [3]

onDrag 100k
handleDrag 36k
beforeDrag 32k
afterDrag 4k
onDragged 5k 
```

[2] 与编程无关的结果太多。

[3] 显然，某些 Microsoft API 可以预测用户何时点击。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-16T15:12:59.150

我的赌注是`stateChanged`：

*   `stateChange`看起来像一个订单，看起来它收到了一个带有*新状态*的参数。
*   `onStateChange`并且`onStateChanged`是用于存储处理程序的更多键，而不是处理程序本身的名称。

恕我直言

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T21:12:57.987

我通常选择 2 因素事件名称。随着应用程序的大小增加，您可能拥有多个状态更改的对象，或者可能有一个控制器可以为多个对象广播更改事件，因此希望能够在代码和您的头脑中区分它们：

```
Object1:event
Object2:event 
```

至于哪个事件名称，我认为这取决于个人喜好和一致性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-07T12:19:39.970

我认为应该根据行动发生的实际时刻做出改变。对我来说 onStateChange 意味着它目前正在改变，我可以在改变之前从技术上得到通知。OnStateChanged 表示该操作已经发生，并在结束时通知我。

因此，在 onStateChange 和 onStateChanged 之间存在重要的意图差异。第一个说“为这种变化做好准备”，而第二个说“它已经发生了”。

编辑：我被这个意图冲昏了头脑，并没有意识到命名本身。为什么是 on 前缀？这是为处理程序保留的。处理程序将执行与该事件相关的事情。所以我会选择 stateChange 和 stateChanged。

# ssis - 数据转换任务中的日期转换问题

> ID：11990178
> 
> 赞同：0
> 
> 时间：2012-08-16T15:05:50.247
> 
> 标签：ssis, data-conversion

我的日期格式是这种格式 YYYYMMDD，当我使用数据转换任务进行相同的转换时，我收到以下错误：

```
The data value cannot be converted for reasons other than sign mismatch or Data Overflow. 
```

在我的数据转换中，我选择了 DT_DATE，而在数据库中，列数据类型是日期。

但奇怪的是，当我执行我的包并作为源进行强制转换时，SELECT CAST(myDate AS DATE) 包工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:46:38.450

这是一个常见的问题。如果您使用派生列转换，则需要将其分割成组成部分（年、月、日），然后在转换之前将其重新连接在一起。这对我来说既丑陋又耗时。

相反，假设这来自一个平面文件，只需通过将连接管理器中的类型设置为与您的目标兼容的日期类型，使其成为导入日期。然后在您的平面文件源上，在高级设置下，将该列的 FastParse 设置为 true。请参阅我[在派生列](https://stackoverflow.com/questions/8186291/import-string-date-in-derived-column/8197667#8197667)中导入字符串日期的答案，以了解它的图示演练。还解决了[SSIS 将日期时间列导入 SQL Server 2008的问题](https://stackoverflow.com/questions/11899343/ssis-importing-datetime-column-into-sql-server-2008/11908179#11908179)

# c# - 从 WCF 数据服务打印文件

> ID：11990182
> 
> 赞同：0
> 
> 时间：2012-08-16T15:05:55.220
> 
> 标签：c#, wcf, printing, wcf-data-services, system.printing

我有一个 WCF 服务操作，它以字节流的形式接收图像，并且应该在服务器本地**静默**打印该图像。没有对话框或弹出窗口，当调用该服务时，它应该立即将图像发送到打印机。

我正在尝试使用存储在服务器上的本地图像`PrintDocument.Print()`。

奇怪的是它可以在 Visual Studio 的集成开发服务器上运行，但不能在 IIS 7.5 上运行。我已授予应用程序池管理员权限（我实际上使用的是登录用户的身份，即管理员），但没有运气。

从 Visual Studio 的服务器和 IIS 中，我都可以看到可用的打印机，但是当我从 IIS 调用服务时，什么都没有发生，我的意思是*什么也没有*。没有错误，没有例外，完全没有迹象表明发生了什么。

我试过使用`ProcessStartInfo`with `Verb = "print"`，`Verb = "PrintTo"`但同样的事情发生了。适用于 Visual Studio，但不适用于 IIS。

我也尝试过创建 a`PrintTicket`和 a权限`LocalPrintServer`，`PrintSystemDesiredAccess.AdministratePrinter`但我不知道如何处理它，我不知道如何告诉它打印图像文件。

我知道在任何语言/平台上打印都是一项棘手的任务，但是从 WCF 数据服务打印图像真的**那么**难吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:30:37.400

好的。现在想把我的头撞在墙上。这显然是一个权限问题，因此将打印机的 Owner 设置为**Admin**用户组（它设置为**System**）就可以了。

我现在真的很想念Linux：P

# jquery - ASCX 控件：如何在（主）页面的预定义部分呈现它？

> ID：11990183
> 
> 赞同：0
> 
> 时间：2012-08-16T15:06:04.550
> 
> 标签：jquery, asp.net, postback, ascx, jquery-blockui

我有 ASCX 控件，它基本上只包含一个 DIV，里面有几个 ASP 按钮。我的母版页包含一个 ASP.NET 表单，我想在按下上述按钮之一时进行回发。默认情况下，此 DIV 是不可见的，并且变为可见以用作对话框，由 JQuery 插件 BlockUI 处理。因此，在某些时候用户会看到这个 DIV，我希望在用户单击按钮时进行回发。

我的问题是：ASCX 通过指令附加到 MasterPage：

```
 (file MasterPage begins:)

 <%@ Master Language="C#" Inherits="GIUMasterPage" CodeBehind="MasterPage.master.cs"
AutoEventWireup="True" %>
 <%@ Register Src="uscMsgBox.ascx" TagName="uscMsgBox" TagPrefix="uc2" %>

 (HTML head, body form opening tags are below). 
```

对页面的检查表明，它的 DIV 出现在*表单标记之外的*HTML 代码的末尾。结果，当它可见并且按下按钮时，没有发生回发。我更进一步，将按钮的 onClientClick 属性 javascript 调用附加到 __doPostBack 函数。回发开始发生，但没有调用按钮的处理程序。

我确信如果 ASCX 的 DIV 代码出现在表单 HTML 标记中，回发将正常进行。

所以，我的问题是，如何通过某些指令命令将 ASPX 的 DIV 内容放在 FORM 标记中，而不是放在页面末尾？我可能会更改 MasterPage 和 ASPX 本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:21:26.163

jQuery UI 对话框将自己移动到正文的末尾，在表单之外。诀窍是在打开对话框时将对话框 div 移回窗体中。

![例子](../Images/84158eb2b2cc25240e614a95994c94a0.png)

请参阅[https://stackoverflow.com/a/1140541/26226](https://stackoverflow.com/a/1140541/26226)和[http://blog.roonga.com.au/2009/07/using-jquery-ui-dialog-with-aspnet-and.html](http://blog.roonga.com.au/2009/07/using-jquery-ui-dialog-with-aspnet-and.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:09:16.420

在您希望加载 .ashx 的地方尝试这样的操作：

```
<div>
     <uc2:uscMsgBox ID="yourId" runat="server"></uc2:uscMsgBox>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:15:51.160

这实际上很容易，只需调用将 DIV 移动到另一个位置的 Jquery 方法 appendTo()。[http://api.jquery.com/appendTo/](http://api.jquery.com/appendTo/)

# svn - Subversion项目重组

> ID：11990193
> 
> 赞同：2
> 
> 时间：2012-08-16T15:06:16.863
> 
> 标签：svn, branching-and-merging

*   在我加入之前，SVN 项目存储库已经设置了 4 个顶级`Release`文件夹。

*   我们的目标只是在工作结束时拥有 1 个生产系统。

*   每个`Release`文件夹都有自己的`branches`//文件夹`tags`。`trunk`

这些`Release`文件夹适合开发团队工作，但是对于系统的整体配置，我需要将这些`Release`文件夹合并到一个`Integration`文件夹集中。

我会做以下事情：

从分支`Release 1`到一个新的`Integration`分支文件夹，然后将每个后续`Release`文件夹的内容合并到该文件夹​​中。

您能否推荐一种更好的方法，或者我想到的方法可行并且足够？有什么选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T15:59:58.437

从您的情况来看，以下结构就足够了

*   分支
*   标签
*   树干

**Trunk**将始终包含**即将发布**的生产版本的代码。您的**标签**将包含您发布的应用程序版本的代码。至于**分支**，您可以拥有未来的发布版本，您的开发团队将针对它进行开发。您需要通过定期合并确保您的**分支**与当前版本的**主干同步。**理想情况下，每周或每 2 周进行一次合并。在合并方面，您会遇到冲突/皱纹，这是解决问题的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:21:43.497

根据您提供的描述，这似乎是...

添加一个新的顶级文件夹`Integration`并创建`branches`// `tags`。`trunk`

现在`Release1`是您的初始点，您可以继续合并`Release2`，`Release3`&`Release4`

每个`Integration`测试更改都可以完成`branch`并且`tag`可以被剪切以识别您的生产端系统的状态。

# c# - 如何创建 asp.net 图表的副本？

> ID：11990195
> 
> 赞同：1
> 
> 时间：2012-08-16T15:06:33.513
> 
> 标签：c#, asp.net

我目前正在为一家公司设计一个基于 Web 的 (asp.net/C#) 体积跟踪工具，用于报告和呈现体积数据。用户呈现数据的一种方法是使用使用 asp.net 内置图表的图表工具。用户可以设置许多不同的过滤选项来适当地自定义他的图表，然后将其呈现在同一页面上。关于图表的内容，一切都很好，但是我创建了一些控件，让用户可以生成更高质量的图表图像并在单独的窗口中显示它们。使用 Response.Redirect 的扩展方法，我将用户重定向到一个包含高分辨率版本的图表图像的新窗口，如下所示：

```
private void DownloadImage(int width, int height)
    {
        double scale = width / ViewGraphChart.Width.Value;

        // Resize chart:
        ViewGraphChart.Width = width;
        ViewGraphChart.Height = height;

        // Resize titles:
        foreach (Title t in ViewGraphChart.Titles)
        {
            t.Font = new Font(t.Font.FontFamily, (float)(t.Font.Size * scale), FontStyle.Regular);
        }

        // Resize legends:
        foreach (Legend l in ViewGraphChart.Legends)
        {
            l.Font = new Font(l.Font.FontFamily, (float)(l.Font.Size * scale), FontStyle.Regular);
        }

        UpdateChart();

        // Open image in new window:
        Response.Redirect(ViewGraphChart.CurrentImageLocation, "_blank", "");
    } 
```

到目前为止一切顺利，打开了一个新窗口，用户收到了他的图表图像的高分辨率版本。然而，问题是工具中的图表自然也被修改了，并且显然变得太大而无法正确放入布局中。我试图通过在重定向后立即重置图表属性来解决此问题，但这使得“高清”图表图像在工具内显示为相同的小图表图像。所以，我认为最好的方法是制作图表的副本，修改副本并将其交给用户，而原始图像在工具中保持其小尺寸。考虑到我有大量的数据绑定和其他连接到我的图表的东西，有什么简单的方法可以做到这一点，还是有其他方法可以解决？

我有点着急，所以如果这不太清楚，请告诉我，我会更彻底地解释。

问候， 安特

**编辑：**

Response.Redirect 扩展方法背后的代码。如果我没记错的话，从这一页借来的。

```
 public static void Redirect(this HttpResponse response, string url, string target, string windowFeatures) 
    { 
        if 
            ((String.IsNullOrEmpty(target) || target.Equals("_self", StringComparison.OrdinalIgnoreCase)) 
            && String.IsNullOrEmpty(windowFeatures)) 
        {
            response.Redirect(url); 
        }
        else
        {
            Page page = (Page)HttpContext.Current.Handler;

            url = page.ResolveClientUrl(url); string script;

            if (!String.IsNullOrEmpty(windowFeatures))
            {
                script = @"window.open(""{0}"", ""{1}"", ""{2}"");";
            }
            else
            {
                script = @"window.open(""{0}"", ""{1}"");";
            }

            script = String.Format(script, url, target, windowFeatures);
            ScriptManager.RegisterStartupScript(page, typeof(Page), "Redirect", script, true);
        } 
    } 
```

# c# - 将按钮位置值放在变量中

> ID：11990200
> 
> 赞同：0
> 
> 时间：2012-08-16T15:06:47.897
> 
> 标签：c#, winforms, variables, location

我正在尝试将按钮的位置保存在变量中，但我不知道该怎么做。由于代码显示了按钮的 x 和 y，我还可以分别保存 x 和 y 吗？

```
 Console.WriteLine(button.Location);
<X=100,Y=100> 
```

我希望它将 X 值保存在 var1 中，将 Y 值保存在 var2 中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T15:09:26.970

您可以将其保存为单个`Point`或两个不同的整数：

```
Point location = button.Location;
int xLocation = button.Location.X;
int yLocation = button.Location.Y; 
```

然后，您可以像这样恢复位置：

```
button.Location = location;
button.Location = new Point(xLocation, yLocation); 
```

**注意：** `Point`是一个`struct`（值类型）所以*改变*`location`不会改变。换句话说，这不会有任何影响：*`button.Location`*

 *```
Point location = button.Location;
location.X += 100; 
```

你需要这样做：

```
Point location = button.Location;
location.X += 100;
button.Location = location; 
```

或者

```
button.Location = new Point(button.Location.X + 100, button.Location.Y); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T15:08:34.313

`button.Location.X`会给你X值。`button.Location.Y`会给你 Y 值。

所以，是的，您可以单独保存它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T15:11:14.270

尝试：

```
Point loc = new Point(button.Location.X,button.Location.Y) 
```*

# c# - csv 解析和 SOAP webservice 交互

> ID：11990201
> 
> 赞同：-1
> 
> 时间：2012-08-16T15:06:50.220
> 
> 标签：c#, soap, c#-3.0, soap-client

我现在使用以下代码解析 csv 文件（一次 100-150 行 - 每行大约 8-10 个逗号分隔值）：

```
public void parseFile(string fileName)
{
    TextFieldParser parser = new TextFieldParser(fileName);
    parser.TextFieldType = FieldType.Delimited;
    parser.SetDelimiters(",");
    while (!parser.EndOfData)
    {
        string[] fields = parser.ReadFields();
        foreach (string field in fields)
        {
    // TODO: take all the data and pass to SOAP webservice.
        }
    }//while
    parser.Close();
} 
```

现在的情况是，因为它是一个命令行独立可执行文件，它似乎在我解析每一行（数据）并将其发送到 web 服务时挂起。

完成后请注意，我需要将执行传递回 Main 方法，以便它可以解释通过或失败，因为此 exe 由批处理脚本运行，可以使用的 dot net 版本是 3.5。

Q) 可以解释所有 100 行数据的解决方案已被解析并传递给远程 SOAP Web 服务？Q) 这里有什么库可以帮助等等... Q) SOAP webservice 在 VPN 后面 - 端口 443，使用soapSender 会导致问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:15:36.157

我不知道这是否是您问题的解决方案，但我注意到您正在循环中创建代理实例。我建议您将其移出循环：

```
Service client = new Service();
foreach (string field in fields)
{
    client.Operation(field);
} 
```

我认为没有其他理由期望您的代码挂起。

# iphone - Objective C - iPhone：在比较中使用 nil

> ID：11990204
> 
> 赞同：1
> 
> 时间：2012-08-16T15:07:07.303
> 
> 标签：iphone, objective-c, nimbus

我看到 Nimbus 中的一些代码如下所示：

```
if (nil == someObject) 
```

但我通常输入：

```
if (someObject == nil) 
```

这些说法有什么不同吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T15:08:57.857

不。

（对于 SO 最低帖子规则，额外的废话废话。它们没有用吗？）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T15:10:53.660

它们在功能上相同，只是编码风格问题。

在过去，如果您错过了等号，您的编译器不会警告您。

```
if (someObject = nil) 
```

可能不会做你想做的事。但是如果你反转它们：

```
if (nil = someObject) 
```

然后编译器会抱怨。

这些天它可能没有任何区别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T15:14:24.093

技术上没有。前者，Nimbus，正在使用被称为[“尤达条件”](http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html)的东西。

游戏的名称在这里是万无一失的。看，问题是这样的：

```
if (someObject = nil) // SETS someObject to nil 
```

是完全有效的，只有一个字符`== nil`，而且很容易错过。但是，如果您尝试这样做：

```
if (nil = someObject) 
```

你的编译器会吓坏，防止这个问题。

就个人而言，我*讨厌*尤达条件句，因为我认为它们很难阅读。这确实意味着对我的代码要格外小心，但是，嘿，我更擅长它，对吧？这一切都归结为这里的风格，所以无论什么让你更舒服，去吧。

哦，如果您使用的是 Xcode，这几乎是一个有争议的问题。如果您查看[这个问题](https://stackoverflow.com/questions/5344810/xcode-4-if-self-super-init-issue)，您会看到如果您尝试在`if`没有额外括号的情况下进行分配，Xcode 现在会警告您。那是，

```
if (someObject = nil) // throws a warning, whereas
if ((someObject = nil)) // does not 
```

使这个问题更难错过。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T15:13:41.600

不，但下面的代码更具可读性。

> 左侧：“被审问”的表达方式，其价值更不稳定。
> 
> 右侧：被比较的表达式，其值更恒定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T15:14:47.263

现在唯一的区别是第二种形式更具可读性（或者它可能是主观的，只有我喜欢它）。

# .net - 更新到 VS 2012 和 .Net 4.5 后，类构造函数抛出 VerificationException

> ID：11990208
> 
> 赞同：6
> 
> 时间：2012-08-16T15:07:17.090
> 
> 标签：.net, visual-studio-2012

我有类似的代码

```
using FluentValidation;

public class FreeformValidator : AbstractValidator<Freeform>
{
    public FreeformValidator() // <-- VerificationException on this line
    {
        RuleFor(ff => ff.Text).Must(BeLongEnough).WithMessage("Must be at least {0} characters.", ff => ff.MinLength);
    }
} 
```

由单元测试运行。在针对 .Net 4 的 VS 2010 下，单元测试运行良好。更新到 VS 2012 并以 .Net 4.5 为目标后，单元测试抛出

> 验证异常
> 
> 操作可能会破坏运行时的稳定性。

异常对话框建议

> 确保您的应用程序没有加载类库的两个冲突版本。

*AbstractValidator*来自 FluentValidation。正在测试的项目和单元测试项目都参考 FluentValidation 3.3.1.0。这两个项目现在也以 .Net 4.5 为目标。

这两个项目都以 AnyCPU 为目标。该代码在 Windows 7 64 位上运行。

**更新**

这是单元测试代码

```
[TestMethod]
public void FreeformValidation_MinLength()
{
    Freeform fa = new Freeform();
    fa.Required = true;
    fa.MinLength = 3;
    fa.MaxLength = 10;
    FreeformValidator fv = new FreeformValidator();

    fa.Text = "AB";
    ValidationResult results = fv.Validate(fa);
    Assert.AreEqual(1, results.Errors.Count, "Expected MinLength to fail.");
    Assert.AreEqual("Must be at least 3 characters.", results.Errors[0].ErrorMessage, "Expected MinLength to fail.");
} 
```

**更新 2**

**可能相关**

[安装 VS 2012 后的 System.Security.VerificationException](https://stackoverflow.com/questions/11983192/system-security-verificationexception-after-installation-vs-2012)

*但是，将配置切换到 x86 并重新运行测试会导致相同的 Exception*。

**似乎不适用的类似问题**

[运行带有附加调试器的测试时，如何防止出现 VerificationException？](https://stackoverflow.com/questions/6845439/how-can-i-prevent-a-verificationexception-when-running-a-test-with-attached-debu)

*如果没有调试器，单元测试会以同样的方式失败，并且将 FluentValidator 添加到 IntelliTrace 排除列表没有帮助。*

[操作可能会破坏运行时的稳定性？](https://stackoverflow.com/questions/378895/operation-could-destabilize-the-runtime/2883384#2883384)

*我没有强命名程序集，也没有 AllowPartiallyTrustedCallers 属性。*

**更新 3**

PEVerify 发现测试项目的 DLL 或被测试的 DLL 都没有问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T17:55:00.643

看起来**CLR 团队特别建议了**一个修复程序：

> 修复了 .net 4.5 反射错误 将 CLR 团队建议的修复应用于 AbstractValidator 和 DelegateValidator 类型。

[https://github.com/thecodejunkie/FluentValidation/commit/ddc1d7235b9c122c06fd224e8490b94791a715c0](https://github.com/thecodejunkie/FluentValidation/commit/ddc1d7235b9c122c06fd224e8490b94791a715c0)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T03:06:25.297

我们今天在测试升级到 VS2012 RTM 并使用 FluentValidation 包时遇到了同样的问题。

我们暂时使用的解决方案是将以下内容添加到 FluentValidation src 中的 'src/CommonAssemblyInfo.cs' 中并重建它：

```
[assembly: SecurityRules(SecurityRuleSet.Level1, SkipVerificationInFullTrust = true)] 
```

感谢讨论： http: [//fluentvalidation.codeplex.com/discussions/391890](http://fluentvalidation.codeplex.com/discussions/391890)

# python - numpy 3D meshgrid 仅作为视图

> ID：11990209
> 
> 赞同：1
> 
> 时间：2012-08-16T15:07:20.743
> 
> 标签：python, numpy, scipy, array-broadcasting

我有一个由间距定义的立方网格`xi,yi,zi`：

```
xi,yi,zi = [linspace(ox,ox+s*d,s) for ox,s,d in zip(origin,size,delta)] 
```

我还在`W`该网格上设置了一组标量值。`W.shape() == size`. 我想使用[scipy 的线性插值](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.LinearNDInterpolator.html)，它需要作为输入：

> 类`scipy.interpolate.LinearNDInterpolator(points, values)`：
> 
> 参数 ：
> 
> `points`: ndarray of floats, shape`(npoints, ndims)`数据点坐标。
> 
> `values`：浮点数或复数的ndarray，形状`(npoints, ...)`数据值。

我如何创建一组假的`points`（通过神奇的广播）`xi,yi,zi`？现在我正在创建一个中间数组来馈送到插值函数 - 有没有更好的方法？

**相关问题**：[3D 中的 Numpy meshgrid](https://stackoverflow.com/questions/1827489/numpy-meshgrid-in-3d)。这篇文章中的答案实际上创建了网格 - 我只想将其模拟为另一个函数的输入（首选纯 numpy 解决方案）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:55:24.200

```
>>> xi, yi, zi = [np.arange(3) for i in range(3)]
>>> xx, yy, zz = np.broadcast_arrays(xi,yi[:,np.newaxis],zi[:,np.newaxis,np.newaxis])
>>> xx.shape
(3, 3, 3)
>>> xx.strides
(0, 0, 8) 
```

您可以看到它没有创建新副本，因为前两个维度的步幅为 0。

我也写了一个维度版本：

```
def ndmesh(*args):
   args = map(np.asarray,args)
   return np.broadcast_arrays(*[x[(slice(None),)+(None,)*i] for i, x in enumerate(args)]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T14:48:49.660

`points`您可以按照其他答案中解释的类似方式构造必要的数组：

```
xx, yy, zz = np.broadcast_arrays(xi[:,None,None], yi[None,:,None], zi[None,None,:])
points = (xx.ravel(), yy.ravel(), zz.ravel())
ip = LinearNDInterpolator(points, data.ravel()) 
```

但是，如果您有一个规则网格，那么使用`LinearNDInterpolator`很可能不是最佳选择，因为它是为分散数据插值而设计的。它构建了数据点的 Delaunay 三角剖分，但在这种情况下，原始数据已经具有非常规则的结构，可以更有效地利用。

由于您的网格是矩形的，您可以将插值构建为三个一维插值的张量积。Scipy 没有这个内置的（到目前为止），但它很容易做到，看到这个线程： http: [//mail.scipy.org/pipermail/scipy-user/2012-June/032314.html](http://mail.scipy.org/pipermail/scipy-user/2012-June/032314.html) （使用例如 interp1d 而不是 pchip 来获得一维插值）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:48:54.603

我不相信有任何方法可以将缺少完整副本的东西传递给 LinearNDInterpolator （因为也没有用于三个维度的常规网格的函数）。所以唯一避免创建完整数组的地方是在创建这个点数组的过程中，我不知道你现在是怎么做的，所以在这方面它可能已经很有效了，但我想它可能不值得避免这。

其他然后 np.mgrid+reshape 可能像这样的东西可能是一个选项（对于 n 维也不难写）：

```
# Create broadcastest versions of xi, yi and zi
# np.broadcast_arrays does not allocate the full arrays
xi, yi, zi = np.broadcast_arrays(xi[:,None,None], yi[:,None,None], zi[:,None,None])

# then you could use .flat to fill a point array:
points = np.empty((xi.size, 3), dtype=xi.dtype)
points[:,0] = xi.flat
points[:,1] = yi.flat
points[:,2] = zi.flat 
```

与`.repeat`函数相反，这里创建的临时数组*并不*比原来`xi`的等数组大。

# sql-server - SSIS SQL任务：具有默认值的存储过程输出参数的奇怪值

> ID：11990210
> 
> 赞同：1
> 
> 时间：2012-08-16T15:07:25.187
> 
> 标签：sql-server, stored-procedures, parameters, ssis, default

这是我的 sproc 的简化版本：

```
CREATE PROCEDURE usp_AddSomething
@i_input1 int,
@o_output1 int = 1 OUTPUT,
@o_output2 int = 2 OUTPUT
AS
-- Do stuff 
```

如果我没有为sproc`@o_output1`或`@o_output2`在 sproc 内显式设置值，那么我希望看到默认输出值 1 和 2。当我`EXEC usp_AddSomething ...`从普通 SQL 脚本调用时，它会以这种方式工作。但是，当我在 SSIS SQL 任务中运行相同的语句时，如下所示：

```
EXEC ? = usp_AddSomething
@i_input1 = ?,
@o_output1 = ? OUTPUT,
@o_output2 = ? OUTPUT 
```

我得到看似随机的值（例如 15305391 和 69085360），而不是默认的 1 和 2。

但是，如果值在存储过程中的某处显式设置，如下所示：

```
...
SELECT @o_output1 = 1
SELECT @o_output2 = 2
RETURN 0 
```

然后我在 SSIS 中得到 1 和 2 的期望值。

我的 SSIS 变量是 Int32，SQL 任务上的参数映射使用 LONG，并且序号位置（即 0、1、2）在参数名称下正确设置。

冗余初始化输出参数的值以匹配它们的默认值很容易，但我真的很想知道为什么它不起作用。也许另一个古怪的 SSIS 事情？SQL Server 2005 SP4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:06:51.050

查看正在发生的事情的一个好方法是使用分析器启动跟踪并查看 ssis 发送到数据库引擎的 t-sql。然后尝试从 ssms 执行它，看看是否得到相同的结果。

# java - 使用 BufferedReader 读取 CSV 文件导致读取替代行

> ID：11990211
> 
> 赞同：2
> 
> 时间：2012-08-16T15:07:28.450
> 
> 标签：java, csv

我正在尝试从我的 java 代码中读取一个*csv文件。*使用以下代码：

```
public void readFile() throws IOException {
    BufferedReader br = new BufferedReader(new FileReader(fileName));
    lines = new ArrayList<String>();
    String newLine;
    while ((newLine = br.readLine()) != null) {
        newLine = br.readLine();
        System.out.println(newLine);
        lines.add(newLine);
    }
    br.close();
} 
```

我从上面的代码中得到的输出是该方法读取并返回的每一行 [2nd, 4th, 6th lines] `readLine()`。我不确定为什么存在这种行为。如果我在阅读 csv 文件时遗漏了什么，请纠正我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T15:11:46.810

第一次读取该行而不在`while`循环中对其进行处理，然后您将再次读取它，但这次您正在处理它。`readLine()`方法读取一行并将读取器指针移到文件中的下一行。因此，每次使用此方法时，指针都会递增 1，指向下一行。

这个：

```
 while ((newLine = br.readLine()) != null) {
        newLine = br.readLine();
        System.out.println(newLine);
        lines.add(newLine);
    } 
```

应该改成这样：

```
 while ((newLine = br.readLine()) != null) {
        System.out.println(newLine);
        lines.add(newLine);
    } 
```

因此读取一行并处理它，而不是读取另一行然后处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:10:09.067

您需要删除循环体中的第一行 `newLine = br.readLine();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-03T10:50:09.507

在java 8中，我们可以轻松实现

```
InputStream is = new ByteArrayInputStream(byteArr);
BufferedReader br = new BufferedReader(new InputStreamReader(is));
List<List<String>> dataList = br.lines()
           .map(k -> Arrays.asList(k.split(",")))
           .collect(Collectors.toCollection(LinkedList::new)); 
```

外部列表将具有行，内部列表将具有相应的列值

# postgis - PostGIS 中的时间聚合

> ID：11990212
> 
> 赞同：2
> 
> 时间：2012-08-16T15:07:37.460
> 
> 标签：postgis, spatial, aggregation, temporal

我在 postgresql/postgis 中有一个农场气候数据数据库。它包含有关农场的温度、湿度和……的信息，并且每小时更新一次。我需要对其执行一些（时空）时间聚合。查询就像“对于该国的每一平方公里，计算每月降水量”。我想知道是否有一些函数可以做到这一点，或者我应该为它编写所需的算法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-16T07:00:04.677

您可以生成一个覆盖整个国家的规则网格，例如 1 平方公里。

这样的网格可以使用 QGIS 生成或在 PostgreSQL 中编写函数。将您的网格保存在单独的表格中（每个单元格都是一个多边形），然后您可以按网格单元格和时间加入网格表和数据表组进行聚合

# python - 如何在 django 中生成和存储相关数字

> ID：11990213
> 
> 赞同：0
> 
> 时间：2012-08-16T15:07:39.620
> 
> 标签：python, django, ldap

我正在为 django 使用 ldapdb。添加时，我必须为新条目生成一个 uid 号。为此，我想知道如何在我的数据库（或其他地方）中存储一个相关数字，因为 django 会自动管理我的数据库。因此，我在 300 中有一个相关性，新的 uid 将是 301，我会执行类似 employee.uid = 301 的操作。

```
@login_required
def add(request):
    if request.method == 'POST':
        form = EmployeeForm(request.POST)
        if form.is_valid():
            employee = form.save(commit=False)
            '''for property, value in vars(employee).iteritems():
                print property, ": ", value'''
            employee.dn = ''

            employee.photo = None
            employee.save()
            return HttpResponseRedirect('/employees/')
        else:
            messages.error(request,'Damn!!!')
    else:
        form = EmployeeForm()
    return render(request, 'employees/detail.htm', {'form':form, 'action': 'add'}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:14:56.507

uid 没有序列号随意使用 md5 哈希或其他东西。但是，如果您想获取下一个序列号，只需获取表中的所有对象并将此列表传递给 len 函数，我不知道 django ORM 好，但我认为这是必须喜欢的

```
len(models.employes.all()) + 1 
```

# maven - Dbdeploy maven 插件未找到更改日志表

> ID：11990222
> 
> 赞同：1
> 
> 时间：2012-08-16T15:08:04.270
> 
> 标签：maven, dbdeploy

我正在使用 dbdeploy maven 插件，但是当我运行构建时它会引发错误。错误说：

```
 [ERROR] com.dbdeploy.exceptions.SchemaVersionTrackingException: Could not retrieve change log from database because: user lacks privilege or object not found: CHANGELOG 
```

这是因为 dbdeploy 使用的 CHANGELOG 表尚未创建。我可以看到它是如何使用示例附带的 ant 构建脚本完成的，但我无法弄清楚如何使用 maven 插件完成它（我不想在 maven 下运行 ant 任务，这会失败dbdeploy-maven-plugin 的要点）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:59:38.257

在浏览了 dbdeploy 源和 dbdeploy maven 插件源后，我在任何地方都看不到正在创建更改日志。与代码捆绑在一起的示例不起作用，我的印象是它完成了一半且测试不佳。

我手动创建了更改日志表，之后一切正常，但这是一个糟糕的解决方案。

谢天谢地，虽然对我来说太晚了，但我最终发现了其他有同样问题的人，他们的解决方案就[在这里](http://byteco.de/2010/01/31/maven-dbdeploy-hsqldb-without-ant/)。简而言之，他们通过调用 maven sql 插件来运行创建变更日志的脚本。

这些都没有记录在 dbdeploy 站点中，我可能会考虑替代方案，因为这一切都感觉有点不稳定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:46:36.427

[按照使用 Maven 插件](http://code.google.com/p/dbdeploy/wiki/UsingTheMavenPlugin)页面中的说明运行以下命令...

```
mvn help:describe -Dplugin=com.dbdeploy:maven-dbdeploy-plugin -Ddetail 
```

我们看到以下目标，这有助于生成变更日志

```
dbdeploy:change-script
  Description: Maven goal for creating a new timestamped dbdeploy change
    script.
  Implementation: com.dbdeploy.mojo.CreateChangeScriptMojo
  Language: java

  Available parameters:

    name (Default: new_change_script)
      Expression: ${dbdeploy.script.name}
      Name suffix for the file that will be created (e.g.
      add_email_to_user_table).

    scriptdirectory (Default: ${project.src.directory}/main/sql)
      Expression: ${dbdeploy.scriptdirectory}
      Directory where change scripts reside. 
```

所以我想我们会在其他目标（如`db-scripts`和）之前运行它`update`。

# sql-server - 显示一列的所有行，无论相关表是否没有所有项目

> ID：11990223
> 
> 赞同：1
> 
> 时间：2012-08-16T15:08:06.150
> 
> 标签：sql-server

我有三张桌子

```
dbo.Products (productname, price)
dbo.Stock (productid, storeid, stocklevel)
dbo.Store (storename) 
```

基本上，Stock 表是 Products 和 Stock 之间的关系表。它将显示该特定商店有库存的所有产品。这是我能够做到的，这就是我得到的：

店铺名称：BeachFrontStore

```
Products  StockLevel
Pencil    400 units
Bic Pen   640 units 
```

现在我还想添加当前商店没有库存的产品。这样用户就有了视觉反馈。我需要完成什么：

店铺名称：BeachFrontStore

```
Products  StockLevel
Pencil    400 units
Bic Pen   640 units
Eraser    'no units' 
```

橡皮擦是在 dbo.Stock 中没有关系但在 dbo.Products 中存在的产品。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:17:29.817

您需要`LEFT JOIN`在表上使用 s 来返回带有空值的值：

```
select p.productname, sl.stocklevel, s.storename
from products p
left join stocklevel sl
    on p.ProductID = sl.ProductID
left join store s
    on s.storeid = sl.storeid 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/a696e/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:12:42.173

您基本上需要一个`OUTER JOIN`介于产品和库存之间的产品来获取所有产品——无论它们是否有库存。

就像是：

```
SELECT
     p.ProdudctName,
     ISNULL(s.StockLevel, 'no units')
FROM
   dbo.Products p
LEFT OUTER JOIN
   dbo.Stock s ON p.ProductID = s.ProductID
WHERE
   (s.StoreId = 42 OR s.StoreID IS NULL) 
```

这将为您提供产品及其库存 - 对于给定商店（此处：StoreId = 42） - 无论该产品是否有库存。那些没有库存的产品将返回一个`NULL`，`StockLevel`我用函数捕获`ISNULL`并将其转换`no units`为显示。

# java - 什么时候适合在 Java 中使用“this”

> ID：11990225
> 
> 赞同：12
> 
> 时间：2012-08-16T15:08:11.943
> 
> 标签：java

> **可能重复：**
> [我什么时候应该在课堂上使用“this”？](https://stackoverflow.com/questions/2411270/when-should-i-use-this-in-a-class)

在引用实例的字段时，如何知道是否使用“this”？

例如：

```
return this.name 
```

我被教导了一个有用的案例。即当输入参数与字段名称相同时：

```
public void setName(String name) {
    this.name = name;
} 
```

除此之外，“这个”似乎不需要..还有哪些其他情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T15:13:18.463

当一个类的构造函数太多时，可以使用**this**调用其他构造函数。例子 ：

```
public class TeleScopePattern {

    private final int servingSize;
    private final int servings;
    private final int calories;
    private final int fat;

    public TeleScopePattern(int servingSize, int servings) {
        this(servingSize, servings, 0);

    }

    public TeleScopePattern(int servingSize, int servings, int calories) {
        this(servingSize, servings, calories, 0);

    }

    public TeleScopePattern(int servingSize, int servings, int calories, int fat) {

        this.servingSize = servingSize;
        this.servings = servings;
        this.calories = calories;
        this.fat = fat;

    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T15:17:47.430

您必须在以下几种情况下使用它：

1.  当您具有相同名称的字段和方法参数/局部变量并且您想要读取/写入该字段时

2.  当您想从内部类访问外部类的字段时：

    ```
    class Outer {

        private String foo;

        class Inner {
            public void bar() {
                 System.out.println(Outer.this.foo);
            }
        }
    } 
    ```

3.  当您想从另一个构造函数调用一个构造函数时（但它更像是一个方法调用 -`this(arg1, arg2);`

所有其他用法只是风格问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T15:51:05.497

[Fluent Interface 模式](http://en.wikipedia.org/wiki/Fluent_interface)本质上意味着从`this`“setter”方法返回，允许您“链接”方法调用。

`StringBuilder`是 JDK 中具有流畅界面的一个示例。以下是它的工作原理：

```
int count = 5;
StringBuilder sb = new StringBuilder();
String result = sb.append("The total is ").append(count).append(".").toString(); 
```

上面的最后一行相当于：

```
sb.append("The total is ");
sb.append(count);
sb.append(".");
String result = sb.toString(); 
```

但导致代码更少，并且可以说更具可读性。

各种`append()`方法的实现都返回`this`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T15:16:16.213

除了这种情况（这很常见，我更喜欢以不同的方式命名变量和参数，以便更好地区分它们）以及将其用作构造函数，还有另一种情况。

有时您想将非常实例化的对象传递给方法。在这种情况下，您可以将此用作接收该实例的类的方法的参数。例如，有一个带有辅助类的方法，该类会增加：

```
public class MyClass {

    private Integer value = 0; //Assume this has setters and getters

    public void incrementValue() {
        Incrementer.addOne(this);
    }

} 
```

而 incrementer 类有一个像这样的方法：

```
public static void addOne(MyClass classToIncrement) {
    Integer currentValue = classToIncrement.getValue();
    currentValue++;
    classToIncrement.setValue(currentValue);
} 
```

有关更多信息，请查看[文档](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T15:16:57.337

在大多数情况下，当从类中引用方法或属性时，这是不必要的。然而，它通过明确变量存储在类范围而不是函数范围中来提高可读性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T15:16:15.370

“在实例方法或构造函数中，`this`是对当前对象的引用——正在调用其方法或构造函数的对象。您可以使用 . 从实例方法或构造函数中引用当前对象的任何成员`this`。”

[阅读此处了解更多信息和一些示例。](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-16T15:33:40.890

我不知道是谁这样教你的，但据我所知，**这**是对当前对象的引用。

```
returnType method(dataType val){
dataType myVariable = someOperation(this.val);
return myVariable;
} 
```

[docs.oracle.com](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)详细说明了它。

# design-patterns - 非 OOP 语言的设计模式

> ID：11990226
> 
> 赞同：0
> 
> 时间：2012-08-16T15:08:14.897
> 
> 标签：design-patterns

据我了解，OOP 语言处理抽象、继承和多态。那是对的吗？

我的问题是非 OOP 语言如何利用设计模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:59:02.980

Shawn Mclean 的评论中提到的链接非常好。

设计模式通常是关于 OO 的，但它们并非必须如此。最初的设计模式是物理架构的[模式语言](http://en.wikipedia.org/wiki/Pattern_language)。

看看[函数式编程中的模式](http://patternsinfp.wordpress.com/)或（实时/嵌入式）[http://www.eventhelix.com/realtimemantra/patterns/]，其中 OO 通常不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:12:44.170

在 C 中，函数指针通常用于实现多态性、设计模式命令等。

# python - 更新记忆的全局变量

> ID：11990228
> 
> 赞同：1
> 
> 时间：2012-08-16T15:08:16.547
> 
> 标签：python, fibonacci

```
global res

res = dict()

res[0] = 0

res[1] =1

def fib(n):

    if n in res:
        return res[n]
    else: value = fib(n-1) + fib (n-2) 
    res[n] = value
    print res
    return value

if __name__ == '__main__':

    print fib(10) 
```

在这里，我尝试访问从主提示符声明为全局的 res，但是当我说 print res 时，即使在调用 fib 函数后，它也只显示旧字典而不显示任何更新的值。我在 windows cmd 上运行它，当我说旧字典时，我的意思是 res 以 0 和 1 作为键。

# iphone - Objective-C 中的静态变量和多线程

> ID：11990231
> 
> 赞同：1
> 
> 时间：2012-08-16T15:08:21.430
> 
> 标签：iphone, objective-c, ios, multithreading

我正在`NSNotificationCenter`使用**类**方法编写一个类别：

```
+(void)postNotificationName:(NSString*)name onMainThread:(BOOL)mainThread withObject:(id)object; 
```

我这样做是为了确保我明确发送通知的线程，因为这给我带来了很多隐藏的问题。`[NSNotificationCenter defaultCenter]`因此，为了避免每次通过调用每次发布通知时都进行额外的查找，我认为我必须只创建一个静态变量：

```
static NSNotificationCenter *defaultCenter;
+(void)postNotificationName:(NSString*)name onMainThread:(BOOL)mainThread withObject:(id)object
{
    if(!defaultCenter)
        defaultCenter = [NSNotificationCenter defaultCenter];
    if(mainThread) {
        dispatch_async(dispatch_get_main_queue(), ^{
            [defaultCenter postNotificationName:name object:object];
        });
    } else {
        [defaultCenter postNotificationName:name object:object];
    }
} 
```

我做的安全吗？如果`defaultCenter`最初在后台线程上定义然后在主线程上再次使用怎么办 - 这是自找麻烦吗？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:21:13.607

我建议不要为此创建静态变量，而`defaultCenter`每次都获取它。否则，您将需要创建适当的锁定机制，这可能会重复可能已经实现的任何锁定检查，`defaultCenter`这可能会导致性能/线程安全性变差。如果你还想走这条路，看看[你的 Objective-C 单例是什么样子的问题？](https://stackoverflow.com/questions/145154/what-does-your-objective-c-singleton-look-like)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T23:48:08.663

关于静态，我同意乔的观点。此外，如果您甚至能够测量应用程序中调用 defaultCenter 和使用缓存值之间的差异，我会感到非常惊讶。

它可能已经用 dispatch_once 之类的东西实现了，速度非常快。

此外，我是否可以建议使用已经存在的东西来确保您在正确的线程上接收通知？

How about an existing method,

```
- (id)addObserverForName:(NSString *)name
                  object:(id)obj
                   queue:(NSOperationQueue *)queue
              usingBlock:(void (^)(NSNotification *))block 
```

It has several benefits, first that it is a block-based API, which is wonderful for handling notifications. Your handling code is right where it should be.

Anyway, notice the third parameter. You can give it an operation queue, and the notification will be received on that queue, irregardless of which thread it was sent from.

It is also a cleaner interface, because the receiver is specifying on which queue the notification is handled, decoupling the sender from that responsibility.

# javascript - javascript - 检测打印（不是打印预览）事件

> ID：11990233
> 
> 赞同：1
> 
> 时间：2012-08-16T15:08:33.340
> 
> 标签：javascript, jquery, cross-browser

我有一个自定义打印预览页面，当用户想要打印页面时会显示该页面。在此页面之后，用户被定向到浏览器打印预览页面（您可以在其中选择打印机、打印选项等）。如果用户实际打印页面，那么我想隐藏我的自定义打印预览页面。如果用户取消打印，那么我想保持自定义打印预览页面可见。

**我需要能够确定用户是否打印了页面。**

我读到 IE 有`onbeforeprint`和`onafterprint`方法，但想知道是否有一些东西也适用于其他浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:21:54.487

我认为可以使用 watchMedia API，但我从未尝试过。[在这里](http://tjvantoll.com/2012/06/15/detecting-print-requests-with-javascript/)查看更多信息（他们有一个关于打印的例子），祝你好运！

# javascript - 使用 JavaScript 设置 Bean 属性

> ID：11990241
> 
> 赞同：0
> 
> 时间：2012-08-16T15:08:47.200
> 
> 标签：javascript, ajax, jsf

我是 JSF 编程的新手，我想从 javascript 代码中设置一个 bean 属性。我正在尝试使用 Ajax 请求来做到这一点。我做了一些谷歌研究，但我不确定我应该如何在 ajax 请求中传递参数以及我应该如何将它设置为服务器端的 bean。有人可以给我一个简单的例子来说明应该如何进行吗？

提前致谢。

# .htaccess - htaccess 无法从 url 中删除文件夹

> ID：11990245
> 
> 赞同：1
> 
> 时间：2012-08-16T15:08:57.343
> 
> 标签：.htaccess, url-rewriting

我现在正在处理的这个网站在 www.website.com/2012/ 中运行，**不是我**，但根索引文件有一个框架，它加载 www.website.com/2012/home/index.php ，而其他页面以相同的结构加载 www.website.com/2012/the-company/。

我可以只取 2012 文件夹并将文件放在根文件夹中，对，但由于编码错误，我有点害怕弄乱链接和引用。所以，我正在使用这个 .htaccess 文件来重写 URL，所以它将使用根 URL 运行。但是这个 htaccess 不起作用，它在根目录中，代码是：

```
RewriteEngine On
RewriteRule ^/(.*)$   /2012/$1 
```

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:15:49.643

试试这个：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/2012/
RewriteRule ^(.*)$   /2012/$1 [L,QSA] 
```

# asp.net-mvc-3 - POST Action MVC3 上未填充导航属性

> ID：11990248
> 
> 赞同：0
> 
> 时间：2012-08-16T15:09:01.787
> 
> 标签：asp.net-mvc-3, entity-framework-4

我已经两次遇到这个问题了，我不太明白为什么。我通过发回视图模型在我的数据库中创建葡萄酒。该视图模型的 Wine 属性已正确填充，但是当我将更改保存在数据库中时，导航属性不会填充 - 就像我想的那样。我需要这个，因为我将这个 wine 对象传递给一个方法来将这些导航属性添加到我的搜索索引中。

我试图将数据库重新查询到一个新变量，但这也不起作用。我对此感到非常困惑-所以任何帮助都会很棒。[我遇到了一个非常相似的问题，在这里](https://stackoverflow.com/questions/11801205/mvc-model-on-post-has-no-navigation-properties)没有收到任何答案。[其他人通过在这里](https://stackoverflow.com/questions/11423267/mvc3-why-are-navigation-properties-null-on-postback)重新查询数据库解决了这个问题，但这对我不起作用。该模型在 GET 请求上很好地填充，但不是在帖子上。

控制器：

```
[HttpPost]
//[Authorize(Roles = "admin, producereditor")]
public ActionResult Create(NewWineViewModel nw)
{
    if (ModelState.IsValid)
    {
        nw.Wine.Active = nw.IsRequest ? false : true;
        //keep nullable for requests.
        nw.Wine.ImporterID = nw.Wine.ImporterID == 0 ? null : nw.Wine.ImporterID;
        nw.Wine.VarTypeID = nw.Wine.VarTypeID == 0 ? null : nw.Wine.VarTypeID;
        nw.Wine.OriginID = nw.Wine.OriginID == 0 ? null : nw.Wine.OriginID;
        nw.Wine.AppID = nw.Wine.AppID == 0 ? null : nw.Wine.AppID;
        nw.Wine.VintageID = nw.Wine.VintageID == 0 ? null : nw.Wine.VintageID;

        nw.Wine.CreatedBy = this.User.Identity.Name;
        nw.Wine.CreatedOn = DateTime.Now;
        db.Wines.Add(nw.Wine);

        db.SaveChanges();

        var wineToIndex = db.Wines.Find(nw.Wine.WineID);
       // nw.Wine.QRUrl = WineUtils.MakeQRCode(nw.Wine);
        //db.SaveChanges();

        //Lucene.LuceneSearch.AddUpdateLuceneIndex(db.Wines.Find(nw.Wine.WineID));

        if (nw.IsRequest)
        {
            nw.VOAVIRequest.WineID = nw.Wine.WineID;
            nw.VOAVIRequest.CreatedBy = User.Identity.Name;
            nw.VOAVIRequest.CreatedOn = DateTime.Now;
            db.VOAVIRequests.Add(nw.VOAVIRequest);
            db.SaveChanges();

            return RedirectToAction("Requested");

            //redirect to "Request Submitted" page for new wines
        }

        return RedirectToAction("Details", new { id = nw.Wine.WineID });
    }

    ViewBag.VarTypeID = new SelectList(db.VarTypes, "VarTypeID", "Name").Default("Select a Varietal/Type", nw.Wine.VarTypeID.ToString());
    ViewBag.OriginID = new SelectList(db.Origins, "OriginID", "Name").Default("Select an Origin", nw.Wine.OriginID.ToString());
    ViewBag.AppID = new SelectList(db.Apps, "AppID", "Name").Default("Select an Appellation", nw.Wine.AppID.ToString());
    ViewBag.VintageID = new SelectList(db.Vintages, "VintageID", "Name").Default("Select a Vintage", nw.Wine.VintageID.ToString());
    ViewBag.ImporterID = new SelectList(db.Importers, "ImporterID", "Name").Default("Select an Importer", nw.Wine.ImporterID.ToString());
    if (User.IsInRole("producer"))
    {
        Producer currentProd = db.ProducerUsers.Find(Membership.GetUser().ProviderUserKey).Producer;
        ViewBag.ProducerID = currentProd.ProducerID;
        ViewBag.ProducerName = currentProd.Name;
    }
    else
    {
        ViewBag.ProducerSelect = new SelectList(db.Producers, "ProducerID", "Name", nw.Wine.ProducerID);
    }
    return View(nw);
} 
```

视图模型：

```
public class NewWineViewModel
{

    public Wine Wine { get; set; }
    public VOAVIRequest VOAVIRequest { get; set; }
    public bool IsRequest { get; set; }

    public SelectList VarTypes { get; set; }
    public SelectList Origins { get; set; }
    public SelectList Apps { get; set; }
    public SelectList Vintages { get; set; }
    public SelectList Importers { get; set; }

    public NewWineViewModel()
    {
        this.Wine = new Wine();
    }

} 
```

模型：

```
public class Wine :Updater
{
    public int WineID { get; set; }
    //public int WineTypeID { get; set; }
    [Display(Name = "Varietal/Type")]
    public int? VarTypeID { get; set; }
    [Display(Name = "Origin")]
    public int? OriginID { get; set; }
    [Display(Name = "Appellation")]
    public int? AppID { get; set; }
    [Display(Name = "Vintage")]
    public int? VintageID { get; set; }
    [Display(Name = "Importer")]
    public int? ImporterID { get; set; }
    public int ProducerID { get; set; }
    public string Designate { get; set; }
    [Display(Name = "Drink Window")]
    public string DrinkWindow { get; set; }
    public string Body { get; set; }
    public string SKU { get; set; }
    [Display(Name = "Varietal Makeup")]
    public string VarietalMakeup { get; set; }
    [Display(Name = "Case Production")]
    public string CaseProduction { get; set; }
    [Display(Name = "Alcohol Content")]
    public double? AlcoholContent { get; set; }
    public string Winemaker { get; set; }
    [Display(Name = "Consulting Winemaker")]
    public string ConsultWinemaker { get; set; }
    public bool Sustainable { get; set; }
    public bool Kosher { get; set; }
    public bool Organic { get; set; }
    public bool Biodynamic { get; set; }
    public bool SalmonSafe { get; set; }
    public Boolean Active { get; set; }
    [Display(Name = "ResidualSugar")]
    public double? RS { get; set; }
    public double? pH { get; set; }
    public string QRUrl { get; set; }

    public virtual WineType WineType { get; set; }

    public virtual VarType VarType { get; set; }
    public virtual Origin Origin { get; set; }
    public virtual App App { get; set; }
    public virtual Vintage Vintage { get; set; }
    public virtual Importer Importer { get; set; }
    public virtual Producer Producer { get; set; }

    [JsonIgnore]
    public virtual ICollection<POS> POSs { get; set; }
    [JsonIgnore]
    public virtual ICollection<Review> Reviews { get; set; }
    [JsonIgnore]
    public virtual ICollection<Doc> Docs { get; set; }

    [JsonIgnore]
    public IEnumerable<SelectListItem> BodyList { get; set; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:00:39.233

> 该视图模型的 Wine 属性已正确填充，但是当我将更改保存在数据库中时，导航属性不会填充 - 就像我想的那样。

将更改保存到数据库永远不会从数据库*加载*数据，因此无法填充导航属性。在这种特定情况下，您所期望的是*延迟加载*将在您访问它们时立即传播导航属性（`virtual`在您的模型中）。这实际上是对每个导航属性的单独查询。

现在，问题是延迟加载无法在您的 POST 操作中工作，因为模型绑定器已经实例化了`nw.Wine`实体。但是模型绑定器（它对实体框架一无所知）不会为 Wine 实体创建延迟加载代理对象，而只是使用`new`（或者可能是反射 API 的一些实例化）。延迟加载代理需要延迟加载工作。

如果您要`nw.Wine`手动创建实体，则可以使用...创建延迟加载代理

```
nw.Wine = db.Wines.Create(); 
```

...而不是使用`nw.Wine = new Wine();`. 然后，您的代码将按预期工作，并且在您将实体附加/添加到 EF 上下文后，延迟加载将填充导航属性。

您在评论中提出的解决方案...

```
nw.Wine.Producer = db.Producers.Find(nw.Wine.ProducerID) 
```

...（对于其他导航属性也是如此）在我看来是正确的方法。或者，您可以使用显式加载：

```
db.Entry(nw.Wine).Reference(w => w.Producer).Load(); 
```

但是所有这三种情况 - 延迟加载（如果可以的话），使用`Find`或使用显式加载 - 将执行相同的数据库查询。因此，在性能方面没有区别。

在您的 GET 操作中延迟加载是有效的，因为 - 我猜 - 您正在从数据库中加载 wine 实体......

```
var wine = db.Wines.Find(id); // or maybe `Single` or `First`, etc. 
```

...并从数据库中加载实体会创建一个延迟加载代理。

# c# - 确定文本框何时滚动到末尾

> ID：11990250
> 
> 赞同：1
> 
> 时间：2012-08-16T15:09:06.373
> 
> 标签：c#, vb.net, scroll

在安装过程中，当我进入接受条款的阶段时，我发现“下一步”按钮被禁用，直到我滚动到文本末尾。任何人都可以帮助解决这个问题吗？
我更喜欢 C# 或 VB.NET

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:24:39.923

尝试`vScrollBar`使用`RichTextBox!!`

[这将帮助你（msdn）](http://msdn.microsoft.com/en-us/library/system.windows.forms.scrollbar.scroll%28v=vs.71%29.aspx)

[在这里你有表单堆栈溢出......](https://stackoverflow.com/questions/5246169/checking-if-a-windows-forms-scroll-bar-is-scrolled-all-the-way-down)

# python - 如何使用 Python 为 Mongo 创建一个全球唯一的 GUID/UUID 系统？

> ID：11990254
> 
> 赞同：10
> 
> 时间：2012-08-16T15:09:16.623
> 
> 标签：python, mongodb, guid, uuid, pymongo

在 Mongo 文档中，它声明了以下内容：

> _id 字段可以是任何类型；但是，它必须是唯一的。因此，您可以在 _id 字段中使用 UUID 而不是 BSON ObjectIds（BSON ObjectIds 略小；它们不必是全球唯一的，只对单个数据库集群是唯一的）。使用 UUID 时，您的应用程序必须自己生成 UUID。理想情况下，为了提高效率，UUID 会存储在 [DOCS:BSON] 类型中——但是，如果您知道空间和速度对用例来说不是问题，您也可以将其作为十六进制字符串插入。

既然如此，有人可以指导我如何为我的所有 Mongo 文档创建一个 [DOCS:BSON] 格式的防弹的、全球唯一的 GUID 吗？我想确保我永远不会有重复的 GUID，即使跨集群也是如此。是否有人对 Mongo 和 GUID 的最佳实践有任何经验或想法？使用 Mongos 本机 ID 系统会更容易，但如果需要，在插入和生成新的 ObjectID 之前检查重复项？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T22:03:27.533

如果你想要一个唯一的 id，并且不想使用 ObjectId，你可能想要使用 uuid4：

```
>>> import pymongo
>>> import uuid
>>> c = pymongo.Connection()
>>> uu = uuid.uuid4()
>>> uu
UUID('14a2aad7-fa01-40a4-8a80-04242b946ee4')
>>> c.test.uuidtest.insert({'_id': uu})
UUID('14a2aad7-fa01-40a4-8a80-04242b946ee4')
>>> c.test.uuidtest.find_one()
{u'_id': UUID('14a2aad7-fa01-40a4-8a80-04242b946ee4')} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T15:42:03.853

```
import uuid
uuid.uuid1() 
```

来源：[http ://docs.python.org/library/uuid.html](http://docs.python.org/library/uuid.html)

# javascript - 为什么我在此页面上收到 $NaN？

> ID：11990260
> 
> 赞同：-2
> 
> 时间：2012-08-16T15:09:27.670
> 
> 标签：javascript, jquery, math, numbers, nan

我不断得到 $NaN 而不是数字。（代码从 . 开始`line 155`。）如何获得数字输出而不是`$NaN`. 是否有更好的方法来调试它以确定返回的确切内容？

```
function daysInMonth(y, m) {
  var t = new Date(y, m, 0);
  return t.getDate();
}
function daysLeftInQuater(d) {
  d = d || new Date(); // If no date supplied, use today
  var t = new Date(d); // Don't mess up supplied date if there was one
  var daysLeft = 2 - (t.getMonth() % 3);

  do {
    daysLeft += daysInMonth(t.getFullYear(), t.getMonth() + 1) - t.getDate();
    t.setMonth(t.getMonth() + 1);
    t.setDate(1);
  } while (t.getMonth() % 3)

  return daysLeft;      
}
function getQuarter(d) {
  d = d || new Date();
  var m = Math.floor(d.getMonth()/3) + 2;
  return m > 4? m - 5 : m;
}
function hoa_letsgo(){
var amt_due = $("#user_ad").val();
var qma_val = $("#qma_select").val();
if (qma_val == 1){//Q
var cur_year = $("#year").val(); var cur_day = $("#day").val();
var cur_month = $("#month").val(); var now = new Date(cur_month, cur_day, cur_year);
var days_left = daysLeftInQuater(cur_month);
var ind_amt = amt_due / 4;
var day_amt = amt_due / 360;
var quarter = getQuarter(now);
var am_cred = ind_amt * quarter;
var final_cred = am_cred + (day_amt * days_left);
final_cred = final_cred - amt_due;
final_cred = final_cred.toFixed(2)
$("#credit").html("$" + addCommas(final_cred));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:30:06.403

从文本框中拉出一个值会给你一个字符串。您不能使用字符串执行某些算术函数，因为运算符被重载以执行不同的操作。例如，`+`如果任一操作数是字符串，加法运算符将执行字符串连接。

用or包裹你的所有`.val()`电话，它应该可以解决你的问题。`parseInt(..., 10);``parseFloat(..., 10);`

# jquery - CodeIgniter 中调用成员函数错误

> ID：11990263
> 
> 赞同：2
> 
> 时间：2012-08-16T15:09:29.713
> 
> 标签：jquery, ajax, codeigniter, model, controller

我正在编写一个使用 ajax 删除表中特定记录的代码。但是每次我尝试删除记录时，都会出现以下错误。

> **致命错误：在第118**行的**C:\xampp\htdocs\abcsystem\application\controllers\fuel_types.php**中的非对象上调用成员函数 delete_specific_record()

 **我尝试了互联网上的几乎所有东西作为解决方案，但我仍然无处可去。我将添加相关代码块以供参考。

在 JS 中，

```
//this function will run when fuel delete button is pressed
$("#fueltypes .delete").click(function(event)
{
    //prevent default action being triggered
    event.preventDefault();

    //store relevant data fields to variables
    var base_url    = $("#base_url").val();
    var fuelTypeId  = $(this).siblings("input[type=hidden]").val();

    //create the data streem
    datastreem = ({fuelTypeId:fuelTypeId});

    $.ajax({
        type:'POST',
        url:base_url+"index.php/fuel_types/ajax_delete_fuel_type",
        data:datastreem,
        success:function(response)
        {
            if(response==1)
            {
                alert("Fuel type deleted");
            }
            else
            {
                alert("Fuel type deletion failed");
            }
        }
    })

}); 
```

在控制器（fuel_types.php）中，

```
class Fuel_types extends CI_Controller
{

    //this function will run when admin try to delete a fuel type
    public function ajax_delete_fuel_type()
    {
        //save ajax sent data into variables
        $fuelTypeId = $this->input->post("fuelTypeId");

        //load vehicle model
        $this->load->model("Vehicles_model");

        //create the recordId array
        $recordId = array('fuel_type_id' => $fuelTypeId);

        //call the function to check if record exists
        $results = $this->Vehicles_model->get_specific_record($recordId);

        //if records available 
        if(($results->num_rows)>0)
        {
            echo "0";
        }
        //if no record is available in the vehicle table
        else
        {                
            //load fuel type model
            $this->load->model("Fuel_types_model");

            //create the recordId array
            $recordId = array('fuel_type_id' => $fuelTypeId);

            //call function to delete records in the model
            $delResults = $this->Fuel_types_model->delete_specific_record($recordId);

            //if record deletion is successful
            if($delResults>0)
            {
                echo("1");
            }
            //if it fails
            else
            {
                echo("0");
            }
        }
    }
} 
```

最后是模型（Fuel_types_model.php），

```
class Fuel_types_model extends CI_Model
{
    function __construct()
    {
        parent::__construct();
    }

    //this function will delete record(s) depend on the recordId
    public function delete_specific_record($delRecordId)
    {
        $this->db->where($delRecordId);
        $this->db->delete("fuel_types");

        $delResults = $this->db->affected_rows();

        return $delResults;
    }

} 
```

我真的很困惑，不知道我做错了什么。仅供参考，我在 config/autoload.php 文件中自动加载了数据库。

我只包含了控制器和模型的相关功能。与此控制器和模型相关的其他功能 - 例如数据检索和更新功能工作得很好。唯一的问题是

```
 //call function to delete records in the model
   $delResults = $this->Fuel_types_model->delete_specific_record($recordId); 
```

这条线。

* * *

（编辑）仅供参考，我在下面包含了完整的错误消息

> 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：未定义的属性：Fuel_types::$fuel_types_model
> 
> 文件名：控制器/fuel_types.php
> 
> 行号：118
> 
> **致命错误：在第****118** 行的**C:\xampp\htdocs\abcsystem\application\controllers\fuel_types.php**中的非对象上调用成员函数 delete_specific_record()

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-01T08:14:41.337

更改您的模型函数名称更改 delete_specific_record 以删除或其他一些名称或在控制器中调用，它确实有效，我有同样的问题，但在更改它解决后，不要在函数中使用 delete 关键字并尝试这个函数

```
public function remove($id)
 {

 $this->db->where('id',$id);// passing your column name,value
   $this->db->delete('fuel_types');
    $newdata = array(
      'msg'  => 'Deleted  Successfully');
       $session=$this->session->set_userdata($newdata);
       return true;
 } 
```

试试这个，真的有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:16:46.683

在你的控制器中试试这个：

```
if($results->num_rows() > 0) 
```

代替：

```
if(($results->num_rows)>0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:12:15.817

您的模型中有一个命名的方法`delete_specific_record`，但是您从控制器中调用了同名的方法。您不能在 PHP 中实例化两个具有相同名称的方法。当您更改其中一个名称时会发生什么？****

# networking - MonoTouch：在网络检测期间不出现 LoadingView

> ID：11990264
> 
> 赞同：1
> 
> 时间：2012-08-16T15:09:31.600
> 
> 标签：networking, xamarin.ios, uialertview, uiactivityindicatorview

我正在使用 LoadingView（带有 UIActivityIndi​​catorView 的自定义 UIAlertView）来显示不同的状态。这是加载视图代码：

```
public class LoadingView : UIAlertView
{
    private UIActivityIndicatorView _activityView; 

    public void Show (string title_)
    { 
        Title = title_;

        _activityView = new UIActivityIndicatorView (UIActivityIndicatorViewStyle.WhiteLarge); 
        _activityView.Frame = new System.Drawing.RectangleF (122, 50, 40, 40); 

        AddSubview (_activityView); 

        InvokeOnMainThread (delegate() { 
            _activityView.StartAnimating (); 
        });

        UIApplication.SharedApplication.NetworkActivityIndicatorVisible = true; 

        Show ();
    }

    public void SetTitle (string title_)
    {
        Title = title_;
    }

    public void Hide ()
    { 
        UIApplication.SharedApplication.NetworkActivityIndicatorVisible = false; 
        DismissWithClickedButtonIndex (0, true);
    }
} 
```

我也在使用地理定位。为此，用户需要网络连接、运营商数据或 wifi 网络。因此，我的应用需要验证网络是否可用。

所以，我添加了[Reachability 类](https://github.com/xamarin/monotouch-samples/blob/master/ReachabilitySample/reachability.cs)。我使用 InternetConnectionStatus 方法：

```
public static NetworkStatus InternetConnectionStatus ()
{
    NetworkReachabilityFlags flags;
    bool defaultNetworkAvailable = IsNetworkAvailable (out flags);

    if (defaultNetworkAvailable) {
        if ((flags & NetworkReachabilityFlags.IsDirect) != 0) {
            return NetworkStatus.NotReachable;
        }
    } else if ((flags & NetworkReachabilityFlags.IsWWAN) != 0) {
        return NetworkStatus.ReachableViaCarrierDataNetwork;
    } else if (flags == 0) {
        return NetworkStatus.NotReachable;
    }
    return NetworkStatus.ReachableViaWiFiNetwork;
} 
```

我这样测试它：

```
 partial void BtnLocationClick()
    {
        loading = new LoadingView();
        loading.Show("Looking for network");
        Console.WriteLine("Looking for network");
        if (Reachability.InternetConnectionStatus() != NetworkStatus.NotReachable)
        {
            loading.SetTitle("Network found");
            loading.Hide();
            // code here
        }
        else
        {
            loading.Hide();
            UIAlertView alert = new UIAlertView("Error", 
                                                "No network", 
                                                null, "Retour", null);
            alert.Show();
        }
    } 
```

最后，很快找到了网络（感谢 InternetConnectionStatus 方法中的 Console），但是在网络检测之前声明并应该显示的 LoadingView 被冻结。

当根本没有网络（没有数据也没有wifi）时，它是完美的。它显示正确。但是当我有一些网络时，它会冻结。然后，很长一段时间后，我可以看到“找到网络”并且事情正常进行。

我完全不明白发生了什么。你有什么主意吗 ？

提前感谢您提供的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:41:30.493

您正在做这项工作并阻塞 UI 线程。

假设你这样做了：

```
loading.Show();
Thread.Sleep(1000);
loading.Hide(); 
```

您永远不会看到加载，因为 UI 线程被阻塞并且无法呈现您的加载弹出窗口。

您将不得不使用 .Net 线程类来执行以下操作：

```
loading.Show();
ThreadPool.QueueUserWorkItem(_ =>
{
   //Do your long running operation here

   BeginInvokeOnMainThread(() => loading.Hide());
}); 
```

BeginInvoke 部分*非常*重要。您不能从后台线程与 UI 交互，这会在主线程上调用您的代码。

# java - Java 类是对象吗？

> ID：11990270
> 
> 赞同：11
> 
> 时间：2012-08-16T15:09:50.227
> 
> 标签：java, oop

我之前读过 Java 类是类的实例`Class`。但是现在，我的计算机科学老师说 Java 类不是对象。

哪个是真的？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-16T15:11:49.243

Java 类不是对象。

`Class`但是，每个 Java 类都有一个描述它的类的实例。
这些实例是对象。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T15:15:39.583

Java 类不是对象，它们是一种抽象。

但是，每个 Java 类都有`java.lang.Class`代表它的类的对应实例。那个表示**是**一个对象。但是你不应该把表示误认为是实际的东西。

这种关系有点类似于乐谱和乐谱之间的关系。虽然书面乐谱代表音乐，但它本身并不是音乐。

不过，这种差异在实践中并不重要，只要您知道您可以对`java.lang.Class`对象做什么和不能做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T15:14:09.753

类（您的代码，甚至 .class 文件中的已编译代码）不是对象。在实例化该类之前，您没有对象。

例如，`Java.lang.String`是一个类。`String s = new String("Hello world");`定义一个 String 类型的对象。这可能是你的教授正在做出的区别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-04T18:08:21.830

好吧，如果一个类可以理解方法，并且有自己的属性（使用“静态”），那么为什么不将它们视为对象呢？对象就是这样做的。

但这不是要教给学生的东西，因为它只会使他们感到困惑。我想如果你已经掌握了类和对象的概念，那么你可以把类看作是一种对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T15:10:39.567

每个 Java 类，甚至都`java.lang.Class`源自`java.lang.Object`.

编辑：

措辞有点模棱两可。Java 类的实例绝对是对象。类本身不能真正被视为对象，因为除了类“蓝图”之外，内存中不存在任何东西。

# java - 在 JFrame 中打开 excel 文件时出现异常

> ID：11990272
> 
> 赞同：1
> 
> 时间：2012-08-16T15:10:07.560
> 
> 标签：java, swing, jexcelapi

尝试`MsExcel`在`JFrame`. 例外是这样的：`com.jniwrapper.LibraryNotFoundException`.

这是代码：

```
 public jexcelTest1() throws ExcelException{

        JFrame frame= new JFrame("Test application");
        frame.setDefaultCloseOperation
        (javax.swing.WindowConstants.EXIT_ON_CLOSE);
        Container cp = frame.getContentPane();
        cp.setLayout( new BorderLayout());
        JWorkbook workbook = new JWorkbook();
        cp.add(workbook);
        frame.setBounds(100, 100, 500, 500 );
        frame.setVisible(true);
    } 
```

异常消息是：

> 线程“主”com.jniwrapper.LibraryNotFoundException 中的异常：在 java.library.path 中找不到 JNIWrapper 本机库 (jniwrap.dll)：C:\Program Files\Java\jdk1.7.0_05\bin;C:\Windows\Sun \Java\bin;C:\Windows\system32;C:\Windows;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0 \;C:\Program Files\Broadcom\Broadcom 802.11 Network Adapter\Driver;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\MiKTeX 2.9\miktex\bin\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\; C:\Program Files\Java\jre7\bin;。

我已经添加了以下库：comfyj-2.8.jar、jexcel-1.5.jar、jniwrap-3.8.2.jar、slf4j-api-1.5.8.jar、slf4j-simple-1.5.8.jar、winpack-3.8 .2.jar

请你为我澄清一下。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:04:34.033

您还需要将 DLL（与 TeamDev 的 API 一起提供）添加到系统路径（我认为`system32`），或者更喜欢将 DLL 直接添加到应用程序 Jar 的默认包中

# jquery - 突出显示侧栏中的当前菜单项

> ID：11990275
> 
> 赞同：7
> 
> 时间：2012-08-16T15:10:16.150
> 
> 标签：jquery, django, django-templates, twitter-bootstrap

我将 django 与 Twitter Bootstrap 一起使用。我当前的视图类似于[提供的示例](http://twitter.github.com/bootstrap/examples/fluid.html)之一。看一下这个例子，可以想象用户点击侧边栏中的一个链接来查看不同的视图，每个视图都带有相同的侧边栏。可以想象选择的链接将被突出显示，就像使用代码的示例一样：

```
<li class="active"><a href="/sample/link/here/">Link</a></li> 
```

活动类需要附加到正确的菜单项。我如何将这个“活动”类分配给正确的菜单项？最初，我尝试从我的视图中使用一个变量来用 jquery 分配它：

```
$(document).ready(function() {
    $("#{{ current_view }}_nav").addClass('active');
});

<li id="linkone_nav"><a href="/sample/link/here/">Link</a></li> 
```

不过这似乎很麻烦。它要求我将 id 从视图传递给模板。还有很多 id 需要管理。是否有更好/更首选的方法来分配这个活动课程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T17:31:44.327

我认为您`#`在示例代码中对 href 的使用使问题变得模糊不清。我假设您的真实场景是实际的真实链接，并根据活动 URL 自动突出显示它们。如果这是正确的，那么只需执行以下操作：

```
{% url something as url %}
<li{% if request.path == url %} class="active"{% endif %}><a href="{{ url }}">Link1</a></li> 
```

其中，“something”是 urlpattern 或视图的虚线路径等的名称。显然，这假设您正在反转 URL，因此如果您使用的是静态 URL，则只需对其进行硬编码：

```
<li{% if request.path == "/my/full/url/path/" %} class="active"{% endif %}><a href="/my/full/url/path/">Link1</a></li> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-14T17:07:41.413

如果您已将项目组织成一个`base.html`由其他模板扩展的模板，例如`appname/pagename.html`，您可以使用以模板为中心的方法来突出显示活动的导航元素。

这种方法为您提供了一些解耦优势，我已在此答案的末尾详细说明了这一点。

我发现这种方法对于处理在大部分或所有站点中保持相同的广泛导航项非常有用。对于更详细的导航元素，例如呈现从数据存储中收集的项目的动态列表，它可能不是一个合适的解决方案。

在您的`base.html`模板中，为每个导航元素添加一个块，为这些块提供唯一的名称：

```
<ul class="nav">
  <li class="{% block navbar_class-home %}{% endblock %}">
    <a href="#">Home</a>
  </li>
  <li class="{% block navbar_class-about %}{% endblock %}">
    <a href="#">About</a>
  </li>
  <li class="{% block navbar_class-pricing %}{% endblock %}">
    <a href="#">Pricing</a>
  </li>
</ul> 
```

在您的`appname/pagename.html`模板中，如果您希望其中一个 nav 元素显示为活动状态，请覆盖使用`active`作为内容的相应块。例如，要突出显示“关于”项：

```
{% block navbar_class-about %} active {% endblock %} 
```

当您使用呈现该模板的视图时，它将呈现如下：

```
<ul class="nav">
  <li class="">
    <a href="#">Home</a>
  </li>
  <li class=" active ">
    <a href="#">About</a>
  </li>
  <li class="">
    <a href="#">Pricing</a>
  </li>
</ul> 
```

这提供了不依赖于 JavaScript 的初始呈现。（如果你正在做一个单页应用程序，你可以使用 JavaScript 修改导航栏类。）

对于许多（但不是全部）情况，这可能是与视图逻辑更好的分离表示：

*   您可以修改视图以将站点导航数据附加到模板上下文，但这样做会强烈地将演示文稿与视图层耦合，并使创建可重用应用程序或集成第三方应用程序变得更加困难。

    视图已经在选择一个命名模板，这意味着您已经将一些与导航相关的信息传递给模板层。这可能就是你所需要的。

*   您可以使用模板上下文处理器来获取有关视图的一些信息，但这只是将强耦合移动到系统的另一层，而不是留在模板层中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-24T21:15:17.550

更好的解决方案，更少的代码。与 Bootstrap 配合得很好。只需更改“addClass”查询以选择您的菜单项。

在 Javascript 上，创建此函数：

```
var highlight_menu = function(path) {
    /* Highlight current link */    
    $('.nav li').removeClass('active');
    $('.nav li:has(a[href="' + path + '"])').addClass('active')
}; 
```

在 base.html 上，使用当前路径调用 JS 函数：

```
<script>
    highlight_menu('{{request.path}}');
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T15:58:05.607

FWIW，Twitter Bootstrap 页面本身具有通过使用[Scrollspy 插件](http://twitter.github.com/bootstrap/javascript.html#scrollspy)提供的此功能。

否则，您可以只听菜单中的单击事件。

```
$('.nav').on('click', 'li:has(a[href^="#"])', function (e) {
  $('.nav li').removeClass('active');
  $(this).addClass('active');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T15:52:12.937

为您的菜单制作一个包含片段：

```
<li class="{% if opt=='link1' %} active{% endif %}"><a href="#/?opt=link1">Link1</a></li>
<li class="{% if opt=='link2' %} active{% endif %}"><a href="#/?opt=link2">Link2</a></li>
<li class="{% if opt=='link3' %} active{% endif %}"><a href="#/?opt=link3">Link3</a></li>
... 
```

将其包含在您的基本模板中：

```
{% include "menu.html" with opt=request.GET.opt %} 
```

如您所见，您不需要使用 $( document ).ready(...) 。

不要忘记向您的 TEMPLATE_CONTEXT_PROCESSORS 添加请求：

```
TEMPLATE_CONTEXT_PROCESSORS = (
  # ...
  'django.core.context_processors.request',
  # ...
) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-01T08:42:27.253

为此，我使用了一个 simple_tag。也许有人会发现它有帮助。

创建一个文件 isactive.py 并将其放在应用模板路径级别的 templatetags 目录中。

```
from django import template
from django import urls
register = template.Library()

@register.simple_tag
def isactive(page_name, request_url):
    rev_url = ''
    try:     
        rev_url = urls.reverse(page_name)
    except:
        return ''
    if (rev_url == request_url):
            return 'active'
    return '' 
```

在你的 html 模板中

```
{% load isactive %} 
```

加载静态并在您的菜单中后

```
<a href="{% url 'my_table_list' %}" class="nav-link {% isactive 'my_table_list' request.path %}"> 
```

渲染时 - django 正在执行函数 isactive 其中第一个参数是页面的名称，另一个是路径。在 isactive 函数内部，名称被解析和比较。当它匹配时，将返回活动字符串并将其放置在生成的 html 中。您必须在每个导航链接中都调用该调用。

页面名称取自应用程序 urls.py 中的 urlpatterns

```
urlpatterns = (
    ...
    path("my_table/list/", views.mytableListView.as_view(), name="my_table_list"),
    .... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-20T03:47:26.090

您可以考虑以下方法来解决 Django 中的问题。

它可以在不使用 javascript 的情况下正常工作。只需使用纯 Django，您就应该能够解决大多数需要突出显示菜单选项的情况。

在此示例中，我使用的是 Bootstrap 4，但这并不重要。你可以使用自己的 CSS，你会没事的。这里的想法只是展示使用**request.resolver_match.url_name 作为 url_name**来实现您所需要的。

```
{% with request.resolver_match.url_name as url_name %}
   <ul class="navbar-nav mr-auto">
      <li class="{% if url_name == 'your url' %}nav-item active{% else %}nav-item{% endif %}">
       <a class="nav-link" href="{% url 'your url 1' %}">Menu option 1</a>
      </li>
      <li class="{% if url_name == 'your url' %}nav-item active{% else %}nav-item{% endif %}">
       <a class="nav-link" href="{% url 'your url 2' %}">Menu option 2</a>
      </li>
   </ul>
{% endwith %} 
```

# magento - Magento 不升级

> ID：11990276
> 
> 赞同：1
> 
> 时间：2012-08-16T15:10:27.277
> 
> 标签：magento, upgrade

我对升级 Magento（运行 1.7.0.0）有一些疑问

我已经通过命令行获得了 root 访问权限，但是 upgrade-all 功能很长一段时间都没有执行任何操作。

当前命令已执行，但没有任何反应，知道吗？

```
[root@httpdocs]# ./mage mage-setup
Running initial setup...
Success
Success
Error:
channel-add: Channel 'community' already exist!
[root@httpdocs]# ./mage sync
[root@httpdocs]# ./mage upgrade-all --force 
```

它确实知道有更新：

```
[root@httpdocs]# ./mage list-upgrades
Updates for community:
  Mage_All_Latest: 1.7.0.0 => 1.7.0.2
  Interface_Adminhtml_Default: 1.7.0.0 => 1.7.0.1
  Mage_Downloader: 1.7.0.0 => 1.7.0.1
  Interface_Frontend_Base_Default: 1.7.0.0 => 1.7.0.1
  Magento_Mobile: 1.7.0.0.22.1 => 1.7.0.1.22.1
  Mage_Core_Adminhtml: 1.7.0.0 => 1.7.0.1
  Mage_Core_Modules: 1.7.0.0 => 1.7.0.2
  Lib_Mage: 1.7.0.0 => 1.7.0.1 
```

下面的代码确实做了一些安装，但是不知道为什么没有升级到1.7.0.2：

```
[root@httpdocs]# ./mage install connect20.magentocommerce.com/community Mage_All_Latest --force 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:31:22.733

如果您尚未使用 MagentoConnect 或 PEAR 命令行安装 Magento，则需要输入此命令来初始 PEAR 安装所有 Magento 核心模块：

```
./pear install magento-core/Mage_All_Latest 
```

# ios - 核心数据：子上下文是否曾经为新插入的对象获得永久对象 ID？

> ID：11990279
> 
> 赞同：30
> 
> 时间：2012-08-16T15:10:35.330
> 
> 标签：ios, core-data, concurrency, nested, nsmanagedobjectcontext

我有一个具有两个托管对象上下文设置的应用程序，如下所示：

*   父上下文： NSPrivateQueueConcurrencyType，链接到持久存储。
*   主上下文：NSMainQueueConcurrencyType，父上下文的子级。

将新的托管对象插入主上下文时，我保存主上下文，然后保存父上下文，如下所示：

```
[context performBlockAndWait:^{
    NSError * error = nil;
    if (![context save: &error]) {
        NSLog(@"Core Data save error %@, %@", error, [error userInfo]);
    }
}];

[parentContext performBlock:^{
    NSError *error = nil;
    BOOL result = [parentContext save: &error];
    if ( ! result ) {
        NSLog( @"Core Data save error in parent context %@, %@", error, [error userInfo] );
    }
}]; 
```

我的理解是，首次创建管理对象时，它有一个临时的`objectID`. 然后保存主上下文，该对象及其临时 ID 进入父上下文。然后保存父上下文。保存最后一个上下文`objectID`时，父上下文中的临时变量将转换为永久变量`objectID`。

所以：

*   永久对象 ID 是否会自动传播回主（子）上下文？
*   当我强制使用 获取对象永久 ID `[NSManagedObjectContext obtainPermanentIDsForObjects:error:]`，然后后台应用程序，重新激活它，重新加载，使用主上下文获取对象`objectWithID:`并访问属性时，我得到

    > “CoreData 无法为 ...”完成故障。

这种方法有什么问题？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-16T23:39:37.287

这是一个已知的错误，希望尽快修复，但一般来说，获得一个永久 ID 就足够了，前提是您在将数据保存到第一个孩子之前这样做，并且您只包括插入的对象：

```
[moc obtainPermanentIDsForObjects:moc.insertedObjects.allObjects error:&error] 
```

在某些复杂的情况下，最好在创建实例后立即获取永久 ID，尤其是在您有复杂关系的情况下。

你怎么打电话？什么时候打电话`obtainPermanentIDsForObjects`？

我不遵循有关应用程序崩溃的部分。也许更好的解释会有所帮助。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-08T12:01:16.233

正如上面乔迪所说，当使用子 ManagedObjectContext 在后台线程中创建新的 NSManagedObject 时，您必须在保存之前通过执行以下操作来强制创建永久 ID：

```
NSError *error = nil;

[threadedMOC obtainPermanentIDsForObjects:threadedMOC.insertedObjects.allObjects error:&error];

BOOL success = [threadedMOC save:&error]; 
```

恕我直言，这样做并不是很直观 - 毕竟，您在保存之前要求一个永久 ID！但这似乎是它的工作方式。如果您在保存后要求永久 ID，则该 ID 仍然是临时的。从 Apple Docs 中，您实际上可以使用以下内容来确定对象的 ID 是否是临时的：

```
BOOL isTemporary = [[managedObject objectID] isTemporaryID]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-22T20:47:06.500

Swift 中的 iOS 8.3 解决方案中仍然存在问题：

```
func saveContext(context: NSManagedObjectContext?){
   NSOperationQueue.mainQueue().addOperationWithBlock(){
    if let moc = context {
        var error : NSError? = nil
        if !moc.obtainPermanentIDsForObjects(Array(moc.insertedObjects), error: &error){
            println("\(__FUNCTION__)\n \(error?.localizedDescription)\n \(error?.userInfo)")
        }
        if moc.hasChanges && !moc.save(&error){
            println("\(__FUNCTION__)\n \(error?.localizedDescription)\n \(error?.userInfo)")
        }
    }
 }
}

func saveBackgroundContext(){
    saveContext(self.defaultContext)

    privateContext?.performBlock{
        var error : NSError? = nil
        if let context = self.privateContext {

            if context.hasChanges && !context.save(&error){
                println("\(__FUNCTION__)\n \(error?.localizedDescription)\n \(error?.userInfo)")
            }else {
                println("saved private context to disk")
            }
        }
    }
} 
```

在哪里：

*   defaultContext 有 concurrencyType .MainQueueConcurrencyType
*   privateContext 有 concurrencyType .PrivateQueueConcurrencyType

# service - 如何使用 service.xml 或 Service Builder 设置字符串列的大小？

> ID：11990284
> 
> 赞同：9
> 
> 时间：2012-08-16T15:10:50.133
> 
> 标签：service, size, liferay

史前：更新实体时出现 JDBCExceptionReporter`data exception: string data, right truncation`异常。

我发现这意味着数据对于指定的`varchar`.

在`service.xml`列中指定如下：

```
<column name="message" type="String"/> 
```

我在 Liferay 的源代码中找到了`ServiceBuilder`这个片段：

```
else if (colType.equals("String")) {
    Map<String, String> hints = ModelHintsUtil.getHints(
        _packagePath + ".model." + entity.getName(), colName);

    int maxLength = 75;

    if (hints != null) {
        maxLength = GetterUtil.getInteger(
            hints.get("max-length"), maxLength);
    }

    if (col.isLocalized()) {
        maxLength = 4000;
    }

    if (maxLength < 4000) {
        sb.append("VARCHAR(" + maxLength + ")");
    }
    else if (maxLength == 4000) {
        sb.append("STRING");
    }
    else if (maxLength > 4000) {
        sb.append("TEXT");
    }
} 
```

现在我的问题是，如何`max-length`为我的列定义？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-16T19:08:26.747

您需要修改您`portlet-model-hints.xml`应该在以下位置找到的文件：

```
docroot/WEB-INF/src/META-INF/portlet-model-hints.xml 
```

在这里，您可以定义`hint`值，例如：

```
<hint-collection name="TEXTAREA">
    <hint name="max-length">500</hint>
</hint-collection> 
```

然后在同一个文件中找到要应用它的列`hint`，它应该如下所示：

```
<field name="your_column_name" type="String">
    <hint-collection name="TEXTAREA" />
</field> 
```

或者你也可以直接这样写，如果只有一列具有指定的提示`max-length`：

```
<field name="your_column_name" type="String">
    <hint name="max-length">500</hint>
</field> 
```

然后您需要`build-service`再次运行，并且当您部署您的 portlet 时，您的数据库表应该被更新以反映此更改。

我希望这回答了你的问题！

还有其他`hints`的，可以在这个[wiki](http://www.liferay.com/community/wiki/-/wiki/Main/Customize+DB+Column+Sizes#section-Customize+DB+Column+Sizes-Model+Hint+Values)中找到一个列表，我只是`max-length`在这里展示，因为这听起来像是你需要的。

如果你有一张表，一列，完整的文件将如下所示。你的很可能会更长！

```
<?xml version="1.0"?>
<model-hints>
    <hint-collection name="TEXTAREA">
        <hint name="max-length">500</hint>
    </hint-collection>
    <model name="com.mynamespace.model.MyModelClass">
        <field name="myColumn" type="String">
            <hint-collection name="TEXTAREA" />
        </field>
    </model>
</model-hints> 
```

# wpf - 滚动条和多行未显示在文本框中

> ID：11990286
> 
> 赞同：0
> 
> 时间：2012-08-16T15:10:52.333
> 
> 标签：wpf

这是我写的代码：

```
 <Grid>
                    <Grid.Resources>
                        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
                    </Grid.Resources>
                    <TextBlock Margin="3,0,3,0" VerticalAlignment="Center"
                        Text="Comment here..."                                                
                        FontSize="12"
                        Foreground="Black"
                        Height="35"
                        Visibility="{Binding ElementName=TextBox1, Path=Text.IsEmpty, 
                        Converter={StaticResource BooleanToVisibilityConverter}}"/>
                    <TextBox Margin="0" Background="#AAFFFFFF"
                        VerticalAlignment="Top" Name="FilterTextBox"
                        Text="{Binding Text, UpdateSourceTrigger=PropertyChanged}"
                        MinLines="2" 
                        MaxLines="2"
                        BorderThickness="0"
                        VerticalScrollBarVisibility="Auto"                             
                        MaxLength="{Binding MaxLength}"
                        Height="35">
                    </TextBox>
                </Grid> 
```

如果我在此处输入任何删除注释的字母，这将按需要工作...但问题是我已将文本框设置为 MinLines = 2 并且滚动条可见，但两者都不起作用。我只能在一行中输入文字。谁能告诉我我做错了什么？或者有没有更好的方法在 wpf 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:28:05.857

[TextBox.TextWrapping 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.textwrapping%28v=vs.100%29)是`TextWrapping.NoWrap`默认的。将其设置为`Wrap`or `WrapWithOverflow`，它应该可以工作。

```
<TextBox TextWrapping="Wrap" 
```

# sharepoint - SharePoint 2010 循环向每个库视图添加新视图

> ID：11990288
> 
> 赞同：1
> 
> 时间：2012-08-16T15:11:00.087
> 
> 标签：sharepoint, powershell

该脚本应该循环遍历每个站点上的每个文档库，并将名为“CheckoutUser”的视图域添加到默认视图中。问题是脚本仅将字段添加到每个站点的第一个库，跳过所有其他库并继续到下一个站点。

我需要帮助来解决这个问题，谢谢，安娜

```
$site = Get-SPSite "http://sharepoint"

$site | Get-SPWeb -limit all | ForEach-Object {

    $_.Lists |  where  {$_.BaseType -eq "DocumentLibrary"} | ForEach-Object { 

        $view = $_.DefaultView

        $view.ViewFields.add("CheckoutUser")

        $view.Update()
    }
}

$site.Dispose() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:01:44.413

尝试这个：

```
$site = Get-SPSite "http://sharepoint"
$column = "CheckoutUser"

$site | Get-SPWeb -limit all | ForEach-Object {

    # Get all document libraries
    $lists = $_.Lists | where  {$_.BaseType -eq "DocumentLibrary"}

    # Loop libraries
    for ($i = 0; $i -lt $lists.Count; $i++)
    { 
        try
        {
            # Get current view
            $view = $lists[$i].DefaultView

            if($view) 
            {
                # Delete if already exist
                while($view.ViewFields.ToStringCollection().Contains($column))
                {
                    $view.ViewFields.delete($column)

                    $view.Update()
                }

                # Add column
                if(!$view.ViewFields.ToStringCollection().Contains($column))
                {     
                    $view.ViewFields.add($column)

                    $view.Update()
                }
            }
        }
        catch [Exception]
        {
            write-output ("  Error: " + $_.Exception.ToString())
        }
    }
}

$site.Dispose() 
```

# asp.net - AccordionItem.FindControl() 返回 null

> ID：11990290
> 
> 赞同：0
> 
> 时间：2012-08-16T15:11:04.160
> 
> 标签：asp.net, ajaxcontroltoolkit

好的，通常当我尝试访问 ItemDatabound 上的 ListView 的元素时，就像说 e.Item.FindControl("myControl") 一样简单，但这似乎对我使用 ajaxtoolkit 中的 Accordion 不起作用。

这是标记：

```
 <ajaxToolkit:Accordion runat="server" ID="accOuterAccordion" OnItemDataBound="accOuterAccordion_ItemDataBound">
        <HeaderTemplate>
            <asp:Label runat="server" Text='<%#Eval("Header") %>'/>
        </HeaderTemplate>
        <ContentTemplate>
            <asp:ListView runat="server" ID="lvReviewers" ItemPlaceholderID="phReviewer">
                <LayoutTemplate>
                    <ul>
                        <asp:PlaceHolder runat="server" ID="phReviewer"/>
                    </ul>
                </LayoutTemplate>
                <ItemTemplate>
                    <li>
                        <asp:Label runat="server" ID="lblReviewer" Text='<%#Eval("Assignee.Name") %>'/>
                    </li>
                </ItemTemplate>
            </asp:ListView>
        </ContentTemplate>
    </ajaxToolkit:Accordion> 
```

这是 OnItemDataBound 事件的代码隐藏：

```
 protected void accOuterAccordion_ItemDataBound(object sender, AjaxControlToolkit.AccordionItemEventArgs e)
    {
        var item = e.AccordionItem.DataItem as MocRequest;
        var innerList = e.AccordionItem.FindControl("lvReviewers") as ListView;
        innerList.DataSource = MocApi.GetReviews(item.MocRequestID);
        innerList.DataBind();
    } 
```

当我单步执行代码时，项目正在正确获取加载的项目。但是，innerList 将返回为空。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:37:47.893

检查类的`ItemType`属性`AccordionItemEventArgs`。

```
void Accordion1_ItemDataBound(object sender, AjaxControlToolkit.AccordionItemEventArgs e)
{
    if (e.ItemType == AjaxControlToolkit.AccordionItemType.Content)
    {
        var item = e.AccordionItem.DataItem as MocRequest;
        var innerList = e.AccordionItem.FindControl("lvReviewers") as ListView;
        innerList.DataSource = MocApi.GetReviews(item.MocRequestID);
        innerList.DataBind();
    }
} 
```

# javascript - 在 Node.js 中从 Mongoose 填充对象

> ID：11990291
> 
> 赞同：0
> 
> 时间：2012-08-16T15:11:08.930
> 
> 标签：javascript, oop, node.js, mongoose

如果没有数据库部分，您通常会在 Javascript 中创建一个新对象，如下所示：

```
function object() {
    this.attribOne: 42,
    this.attribTwo: 'fourtytwo',

    [and so on creating more attribs and functions.]
}; 
```

完成此操作后，您可以像这样创建对象的新“实例”

```
var myObject = new object; 
```

而 myObject 将具有正确的属性、功能。

如果我需要使用 Mongoose（异步）从 MongoDB 加载属性值，有没有办法做到这一点？

和这个一样？！

```
function object() {
    /* list of attributes */
    this.attribOne: null,
    this.attribTwo: null,

    function init(){
       // mongoose db call
       // set attributes based on the values from db
    }
}; 
```

我查看了 init 函数，但似乎它们没有做我需要的。（或者我只是没明白）

我认为这很简单，我忽略了显而易见的，所以请指出我正确的方向。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:37:00.097

我不知道 MongoDB，但是您可以通过将从服务器返回的数据库对象传递给构造函数来轻松地做您想做的事情：

您可以像这样传递对象：

```
var myObject = new object(MongoDBObj); 
```

然后在您的目标代码中，您可以执行以下操作：

```
function object(data) {

this.myProp1 = data.Prop1;//from db obj
this.myProp2 = data.Prop2;//from db obj

this.myProp3 = getProp3Calculation(); //from global calculation

[more functions and props for the object]

} 
```

编辑：对于我的第一条评论

你也可以这样做（简单的例子）；

```
function object() {

this.myProp1 = null;
this.myProp2 = null;

this.myProp3 = getProp3Calculation(); //from global calculation

this.init = function([params]){
    var that = this;       

    var data = loadData(params);

    //if asynchronous the following code will go into your loadCompletedHandler
    //but be sure to reference "that" instead of "this" as "this" will have changed
    that.myProp1 = data.Prop1;
    that.myProp2 = data.Prop2;

};

[more functions and props for the object]

} 
```

更新 3 - 显示以下讨论结果：

```
function object() {

this.myProp1 = null;
this.myProp2 = null;

this.myProp3 = getProp3Calculation(); //from global calculation

this.init = function([params], callback){
    var that = this;       

    var model = [Mongoose Schema];
    model.findOne({name: value}, function (error, document) {
        if (!error && document){

            //if asynchronous the following code will go into your loadCompletedHandler
            //but be sure to reference "that" instead of "this" as "this" will have changed
            that.myProp1 = document.Prop1;
            that.myProp2 = document.Prop2;

            callback(document, 'Success');

        }
        else{
            callback(null, 'Error retrieving document from DB');
    }
    });

};

[more functions and props for the object]

} 
```

# qt - 始终可见 qml

> ID：11990294
> 
> 赞同：3
> 
> 时间：2012-08-16T15:11:15.780
> 
> 标签：qt, widget, symbian, visibility, qml

我有 qml 按钮文件，当键盘可见时，我希望在键盘上方可见。

我只想知道我应该如何处理我的 QmlApplicationViewer，以便我的小 qml 块始终在所有其他应用程序之上可见，但您仍然应该可以访问下面的应用程序。

我已经实现了一种在键盘可见时文件变得可见的方法，以后我可以很容易地将它放在键盘上方，但现在我正在努力防止它窃取焦点并关闭键盘，因为键盘的那一刻打开我的按钮出现，键盘关闭。在我关闭我的应用程序的那一刻，按钮消失，键盘在我最初打开它的应用程序中重新打开。我希望这是一个补充键盘功能的后台任务，该按钮将允许语音输入。

**main.qml：**

```
import QtQuick 1.1
import com.nokia.symbian 1.1

Button{
    signal keyActive()

    x: 0
    y: 0
    text: "Voice"
    property bool bob: inputContext.visible
    onBobChanged: console.log("keyboard" + bob), bob ? keyActive() : null
} 
```

**主.cpp：**

```
#include <QtGui/QApplication>
#include "qmlapplicationviewer.h"
#include <QObject>
#include <QGraphicsObject>

Q_DECL_EXPORT int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    QmlApplicationViewer viewer;
    viewer.setMainQmlFile(QLatin1String("qml/topwidget/main.qml"));

    viewer.setWindowFlags(Qt::WindowStaysOnTopHint);
    viewer.setAttribute(Qt::WA_ShowWithoutActivating);
    viewer.move(10, 20);
    viewer.releaseKeyboard();
    viewer.show();

    QObject *rootObject = viewer.rootObject();
    QObject::connect(rootObject, SIGNAL(keyActive()), &viewer, SLOT(raise()));

    return app.exec();
} 
```

PS。我知道键盘何时打开和关闭，我只想知道如何在不自动关闭键盘的情况下显示我的按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T07:40:52.530

您正在操纵`x`，`y`但您想要的是控制重叠，即`z`. `z`所以你可以通过给它一个特殊的值来影响总是最重要的东西。看这里：

[http://qt-project.org/doc/qt-4.8/qml-item.html#z-prop](http://qt-project.org/doc/qt-4.8/qml-item.html#z-prop)

# php - Nginx 和 php 在一个子目录中

> ID：11990295
> 
> 赞同：1
> 
> 时间：2012-08-16T15:11:18.853
> 
> 标签：php, nginx

我有一个纯 HTML 的网站。现在我必须添加一个包含 PHP 文件的子目录（演示）。我在 nginx.conf 文件中设置了两个位置：

```
server {
    listen          80;
    server_name     mydomain.com;

    access_log      /mydomain.com/access.log;

    location / {
        root        /www;
        index       index.html index.htm;
    }

    location /demo {
        root        /www/demo;
        index       /demo/index.php;
    }                                                                                                                                                                                                       

    location ~ /demo/.*\.php$ {
        root        /www/demo;
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_index  index.php;                                                                                                                                                                                                          
        fastcgi_param  SCRIPT_FILENAME  /www/demo$fastcgi_script_name;
        include        fastcgi_params;
    }

    location ~ /\.ht {
        deny         all;
    }
} 
```

现在 mydomain.com 工作得很好，但是当我尝试访问 mydomain.com/demo/ 时，它一直在抱怨

```
No input file specified. 
```

这个脚本有什么问题？我猜某些路径设置不正确，例如 fastcgi_index：应该是 /demo/index.php 吗？我尝试了不同的组合，但没有一个有效。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:14:30.193

您可能`fastcgi_param`应该是`/www$fastcgi_script_name`，因为该变量是完整的 URI 请求。[来源](http://wiki.nginx.org/HttpFastcgiModule#.24fastcgi_script_name)。

# java - Java定义超类的协变返回

> ID：11990297
> 
> 赞同：2
> 
> 时间：2012-08-16T15:11:20.853
> 
> 标签：java, generics, covariance

我有以下抽象类：

```
public abstract class AbstractSharpCollection<T> implements SharpCollection<T> 
```

和一个界面

```
public interface SharpCollection<T> extends Iterable<T>
{
    SharpCollection<T> tail();
} 
```

SharpCollection 中定义了许多其他方法，它们返回另一个 SharpCollection。所有这些方法的逻辑只依赖于迭代器。

我希望能够在 AbstractSharpCollection 上创建一个方法，这样对 tail() 的调用将返回子类的实例，而不是超类。

就像是

```
public <V extends SharpCollection<T>> V tail() { //code logic here } 
```

我知道我可以在扩展 AbstractSharpCollection 的子类上重写返回类型，但是必须重写所有方法只是为了更改返回类型真的很丑陋、麻烦并且容易出错。

有什么办法可以实现我想要的吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:22:15.113

Implementing `tail` would be quite difficult. `null` is the only valid return value.

It appears you need to parameterise the `SharpCollection` so that it "knows" the actual interface type being used:

```
public interface SharpCollection<
    THIS extends SharpCollection<THIS, T>,
    T
> extends Iterable<T> {
    THIS tail();
} 
```

Unfortunately this complicates the client code as well.

# flash - ExternalInterface 对于长字符串真的很慢吗？

> ID：11990299
> 
> 赞同：2
> 
> 时间：2012-08-16T15:11:34.047
> 
> 标签：flash, delphi, actionscript-2, delphi-7, externalinterface

我有一个嵌入在 Delphi shell 中的 Flash10/ActionScript2 应用程序。我需要向 Delphi 发送一个长字符串。直到现在我一直在使用 fscommand，但是 ExternalInterface 是同步的，所以我想在我的应用程序中使用它。

一切都很好，除了一件事：我向 Delphi 发送了一个长字符串——一个由 Flash 格式化的 xml 字符串。这个命令需要很长时间（大约 2 分钟）。

有人知道 ExternalInterface 的限制或在 Delphi 中的使用吗？

谢谢！

# mysql - 从 mySQL 数据库获取“文本”类型的值

> ID：11990308
> 
> 赞同：1
> 
> 时间：2012-08-16T15:11:51.753
> 
> 标签：mysql, php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:26:43.800

该错误非常清楚地解释了问题：**'未定义的索引'文本'**

一开始你写：

```
$method_get_article = "SELECT TEXT FROM ARTICLE WHERE UID = '$user_id' LIMIT 1"; 
```

这意味着您选择名为“TEXT”的列，然后您编写：

```
$text = $article['Text']; 
```

得到名为“文本”的列。

更改它们以使它们相同。

# xtext - Xtext中语法规则和终端之间的Shift-reduce冲突

> ID：11990310
> 
> 赞同：1
> 
> 时间：2012-08-16T15:11:58.493
> 
> 标签：xtext

这是一个示例语法：

> 语法 org.xtext.example.mydsl.MyDsl 和 org.eclipse.xtext.common.Terminals
> 
> 生成 myDsl “http://www.xtext.org/example/mydsl/MyDsl”
> 
> 开始：元素 += 狗；
> 
> 狗：'狗'INT';' ;
> 
> 终端 CAT : ('A'..'Z')('A'..'Z')('A'..'Z')' '('0'..'9')+;

当 Xtext 看到 line:`DOG 1234`时，它无法解析并会给出错误“ *mismatch input DOG 1234... Expecting DOG* ”类似的东西。我认为当Xtext遇到关键字时，它应该比终端具有更高的优先级。但它似乎很困惑。我怎样才能解决这个问题？

注意 DOG 和 CAT 用在不同的地方（即终端 CAT 用于其他规则，但其定义与 DOG 规则冲突）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:07:11.343

如您所见，在这种情况下，错误不是“Expection CAT_RULE ..”。因此，当您将 DOG1234 编写为元素时，Xtext 不会将其解析为 DOG 和 INT ，而是将 'DOG1234' 作为字符串获取，然后查找 DOG 规则，当然 DOG 规则只允许“DOG”关键字。

例如，如果您在 CAT 规则之后将 DOG 定义为另一个终端规则，那么元素 RAT 也与 CAT 规则“冲突”，并使用新行将其 INT 值与关键字分开，您将看到它们都有效。

```
 START: elem += DOG 
    catelem += CAT 
    ratelem += RAT;

    RAT:
        "RAT"INT";"
    ;

terminal CAT : ('A'..'Z')('A'..'Z')('A'..'Z')' '('0'..'9')+;
terminal DOG : "DOG"("0".."9")+";"; 
```

然后使用您的新 DSL 示例：

```
DOG1234;
CSA 1 
RAT
12347
; 
```

# symfony - 在同一个 Symfony2 树枝中编辑具有多个地址的实体

> ID：11990313
> 
> 赞同：0
> 
> 时间：2012-08-16T15:12:00.787
> 
> 标签：symfony, doctrine, entity, twig

我有一个代表机构的实体。因此，该机构有多个地址（地址实体），每个地址都有街道、邮政编码等。

问题是：我有一根树枝，可以显示有关该机构的所有信息，包括该机构所在的地址表。

我想要的只是单击表中的一个地址并弹出一个窗口来编辑地址（然后保存按钮会将地址的 id 传递给控制器​​函数）。

做这个的最好方式是什么？这里的问题是，在有人点击点击之前，我没有地址的 ID。然后我必须用正确的信息填写表格。

这是我所拥有的：

地址表（在树枝中）：

```
<tbody>
    {% for local in locais %}
        <tr class="odd gradeX"> 
            <td>{{ local.name}}</td>
        <td>{{ local.address}}</td>
            <td>{{ local.postalCode}}</td>
            <td><a title="Editar" class="label label-info" 
                         onclick="editLocal('{{ local.name}}',  
                                     '{{ local.address}}',
                                     '{{ local.postalCode }}'
                                     '{{ local.id }}');">
                         <i class="icon-edit icon-white"></i></a></td>
        </tr>
    {% endfor %}
</tbody> 
```

然后我有以下 javascript 函数来填充编辑本地表单：

```
function editLocal(name, address, postalCode, id){

oFormObject = document.forms['editLocal']; 
oFormObject.elements['fccn_corebundle_localtype_id'].value = id;
oFormObject.elements['fccn_corebundle_localtype_name'].value = name;
oFormObject.elements['fccn_corebundle_localtype_address'].value = address;
oFormObject.elements['fccn_corebundle_localtype_postalCode'].value = codigoPostal;

$('#editLocal').modal('show');
}; 
```

这里一切正常！表格会弹出正确的信息！

然后我想要的只是获取 id 并将其与编辑后的信息一起传递给控制器​​，这样我就可以保留现有的本地实体！

我有以下！

```
<form id="editLocal" class="form-horizontal" 
    action= "{{ path('FccnEduroamEntidadeBundle_editLocal', 
                 { 'idLocal': editLocalForm.vars.value.id }) }}" 
    method="post" {{ form_enctype(editLocalForm) }}>

        {{ form_row(editLocalForm.name) }}
        {{ form_row(editLocalForm.address) }}
        {{ form_row(editLocalForm.postalCode) }}
            {{ form_rest(editLocalForm) }}

        <div class="form-actions">
            <button class="btn" type="submit">Guardar</button>
        </div>
</form> 
```

这里的问题是**editLocalForm.vars.value.id**绝对没有返回任何东西！但是当我在 chrome 上检查这个标签时，我有：
`<input type="hidden" id="fccn_corebundle_localtype_id" name="fccn_corebundle_localtype[id]" value="1">`

有一个更好的方法吗？任何帮助将非常感激。

谢谢。

阿方索

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:13:17.777

我不确定我是否正确，但我会说：

为什么要在控制器的路由中使用 id？

您可以通过 POST 获取 id 并将其传递给持久化。
据我了解，id 是通过 javascript 以表单形式设置到输入字段的

```
<input type="hidden" id="fccn_corebundle_localtype_id" name="fccn_corebundle_localtype[id]" value="1"> 
```

所以它应该在您的请求中，而您实际上在路线中不需要它。

# c++ - 正确尝试/捕获无序地图异常

> ID：11990316
> 
> 赞同：1
> 
> 时间：2012-08-16T15:12:21.193
> 
> 标签：c++, exception, boost, try-catch, unordered-map

我有这个：

```
// static enum of supported HttpRequest to match requestToString
static const enum HttpRequest {
    GET, 
    POST,
    PUT,
    DELETE,
    OPTIONS,
    HEAD,
    TRACE
};

// typedef for the HttpRequests Map
typedef boost::unordered_map<enum HttpRequest, const char*> HttpRequests;

// define the HttpRequest Map to get static list of supported requests
static const HttpRequests requestToString = map_list_of
    (GET,    "GET")
    (POST,   "POST")
    (PUT,    "PUT")
    (DELETE, "DELETE")
    (OPTIONS,"OPTIONS")
    (HEAD,   "HEAD")
    (TRACE,  "TRACE"); 
```

现在如果我打电话

```
requestToString.at(GET); 
```

没关系，但是如果我调用一个不存在的键

```
requestToString.at(THIS_IS_NO_KNOWN_KEY); 
```

它给出了一个运行时异常并且整个过程中止..

防止这种情况的最佳方法是什么？是否有编译指示或什么，或者我应该用 try/catch 块或什么来“类 java”围绕它？

好心的亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T15:17:53.783

如果找不到异常，则使用`at`它，如果不希望它终止进程，则在某处处理异常；`find`如果您想在本地处理它，请使用：

```
auto found = requestToString.find(key);
if (found != requestToString.end()) {
    // Found it
    do_something_with(found->second);
} else {
    // Not there
    complain("Key was not found");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:17:57.850

[http://www.boost.org/doc/libs/1_38_0/doc/html/boost/unordered_map.html#id3723710-bb](http://www.boost.org/doc/libs/1_38_0/doc/html/boost/unordered_map.html#id3723710-bb)上的文档说：

`std::out_of_range`抛出：如果不存在此类元素，则为异常类型的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T18:04:07.570

您可以使用它`unordered_map::find`来搜索可能在地图中也可能不在地图中的键。

`find`返回一个迭代器，如果未找到该键，则该迭代器为 == end ()，如果找到该键，则“指向”一个 std::pair。

未编译的代码：

```
unordered_map < int, string > foo;
unordered_map::iterator iter = foo.find ( 3 );
if ( iter == foo.end ())
     ; // the key was not found in the map
else
     ; // iter->second holds the string from the map. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T15:17:04.187

您可以先使用`unordered_map::find`或`unordered_map::count`检查密钥是否存在。

# ruby-on-rails - 在我的黄瓜 env.rb 中包含 Rails 配置

> ID：11990321
> 
> 赞同：1
> 
> 时间：2012-08-16T15:12:42.287
> 
> 标签：ruby-on-rails, configuration, cucumber

我想访问`Rails.config`我的黄瓜`env.rb`文件，因为我的配置指定了一个临时目录，我想在运行测试之前清理它。如何访问`Rails.config`我的`env.rb`文件内部？

# javascript - 如何有效地将稀疏数组重新排序为新的非稀疏数组

> ID：11990323
> 
> 赞同：2
> 
> 时间：2012-08-16T15:12:45.657
> 
> 标签：javascript

【对于问题的复杂性，我提前道歉……但有什么好问题是简单的？】

我为一个大型（22 名成员）制作支持团队管理待命名单。该列表是“全面升级”（列出所有团队成员）并每月生成。由于那些靠近列表顶部的人被称为隔夜问题（并且往往不可用），我们反向利用列表来创建我们的白天分配名册。

## 问题

经过不合理的时间，政治和争论（不要问）创建并同意生成这个名册的相当愚蠢的规则集。要生成每日分配名册：

“在待命名单上向后移动，选择名单上的“偶数”排名，然后按降序排列它们。然后对“赔率”做同样的事情，将它们放在名册上。”

所以，一个简单的例子：

随叫随到：“1-Jack，2-Jim，3-Jane，4-John，5-Jill，6-Joe”名册：“1-Joe，2-John，3-Jim，4-Jill，3-简，1-杰克”

主要的问题是，由于假期、PTO、其他任务等时间，待命列表很稀疏（可能有空位）。所以一个更真实的例子可能是：

待命：“1-Jack，3-Jane，4-John，6-Joe”名册：“1-Joe，2-John，3-Jane，4-Jack

真正的名单是22人。在任何给定的一天，我们平均大约有 17 或 18 个可用。失踪人员不会影响待命 - 你只是继续移动到下一个最高 - 但他们正在让名册规则内的工作变得痛苦。

## 当前（不优雅）的解决方案

目前我有这种工作蛮力风格。我首先创建了一个表示 on-call 的对象数组，其中每个对象都有一个人的姓名和 on-call 等级。（我确实突然想到，我可以通过创建一个仅包含索引代表实际排名的名称的稀疏数组来简化这一点......但我认为它不会改变问题）。

然后我从最后到第一个循环遍历数组两次：首先收集偶数排名（通过获取排名的模数）并将它们推送到新数组中，第二次收集赔率：

```
 // Get the Current Oncall 
           var Oncall = new Array(); 
           for ( var iCnt = 1; iCnt <= 22; iCnt++ ) { 
                   var CurOncall = DataRows[Cnt].getAttribute("ows_OnCall" + iCnt); 
                   if ( CurOncall != null ) { 
                           Oncall[Oncall.length] =  {"Name":CurOncall, "Rank": iCnt}; 
                   }; 
           }; 
                   // Get the Current Roster 
           var Roster = new Array(); 
                   // Add the "evens" 
           for ( var iCnt = Oncall.length - 1; iCnt >= 0; iCnt-- ) { 
                           // Get the Current Incident Rank 
                   if ( Oncall[iCnt].Rank % 2 == 0 ) { 
                           Roster[Roster.length] = Oncall[iCnt].Name; 
                   }; 
           } 
                   // Add the "odds" 
           for ( var iCnt = Oncall.length - 1; iCnt >= 0; iCnt-- ) { 
                           // Get the Current Incident Rank 
                   if ( Oncall[iCnt].Rank % 2 != 0 ) { 
                           Roster[Roster.length] = Oncall[iCnt].Name; 
                   }; 
           } 
```

请注意，这个片段存在于一个更大的循环中（我正在循环一周的数据，这只是一天）。 *DataRows[Cnt]*是从 SharePoint Web 服务中提取的当天信息。

同样，这工作正常，但需要在每天的处理中对相同的数据进行三个循环。

## 当前（损坏的）解决方案

我想要做的是到达我可以使用单个循环从待命生成名册的位置。直接进入，我一直致力于将后两个循环合并为一个。假设生成的 Oncall 数组与上面相同，这是我当前的尝试（有点难看）：

```
 var IncCnt = 1; 
   for ( var Cnt = OnCall.length - 1; Cnt >= 0; Cnt-- ) { 

                   // Get the Current Incident (Roster) Rank 
           if ( OnCall[Cnt].Rank % 2 == 0 ) { 
                   CurIncRank = Math.ceil(IncCnt / 2); 
           } else { 
                   CurIncRank = Math.ceil(IncCnt / 2) + Math.floor(OnCall.length / 2) 
           }; 

           Roster[CurIncRank] = OnCall[Cnt].Name;
                   // Increase the Incident Cnt
           IncCnt = IncCnt + 1; 

   }; 
```

这接近于工作，但往往会重叠（用第一个“奇数”覆盖最后一个“偶数”）或根据稀疏性和元素总数在偶数和赔率之间留下间隙。

## 结论

主要目标是直接在第一个循环中“即时”生成名册，而不是创建一个特定的 on-call 数组然后从中生成它 - 但目前我很乐意让第二个片段正常工作案例。

我也对这可能无法正常工作的可能性持开放态度。也许不优雅的规则集和不优雅的数据的组合只需要蛮力方法。如果是这样的话，我宁愿在放弃之前从比我自己更好的程序员那里听到它。

提前致谢。随时要求任何澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:31:17.220

所以，如果我没看错的话，你有一个“onCall”对象数组，每个对象都包含一个名称和等级，如下所示：

```
var onCall = [
    {
        rank: 1,
        name: 'Jack'
    },
    {
        rank: 3,
        name: 'Jill'
    },
    ...
]; 
```

然后，您要创建一个名册数组，其中包含按降序排列的平均排名的人，然后是按降序排列的奇数排名的人。如果这是正确的，那么下面的代码将产生这样一个数组：

```
for(var i = onCall.length-1; i >= 0; i--) {
    person = onCall[i];
    if(person.rank % 2 === 0) {
        evens.push(person);
    } else {
        odds.push(person);
    }
}
roster = evens.concat(odds); 
```

您反过来遍历数组一次。对于每个人，根据他们的等级将它们附加到“偶数”或“赔率”。最后，您只需将两个数组连接成一个新的“名册”数组。

这是一个演示：

[**--- jsFiddle 演示 ---**](http://jsfiddle.net/jackwanders/jyZ9b/)

很抱歉，这不是用您的特定变量名称编写的，但如果这是您正在寻找的，应该很容易改变它以适应您的环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:26:12.833

这是咖啡脚本中非常相似的答案[（](http://coffeescript.org/)：

```
# List of all employees
employees = [
    { name: "Jack", onCall: false, Rank: 1 }
    { name: "Jim", onCall: true, Rank: 2 }
    { name: "Jane", onCall: false, Rank: 3 }
    { name: "John", onCall: false, Rank: 4 }
    { name: "Jill", onCall: true, Rank: 5 }
    { name: "Joe", onCall: false, Rank: 6 }
]

# Returns an array of eligible Employees in the order which they should be called
generateRoster = (employees) ->
    a = []
    b = []

    employees
        .reverse()
        .filter (employee) ->
            not employee.onCall
        .forEach (employee) ->
            if employee % 2 
                a.push(employee) 
            else 
                b.push(employee)
            return

    a.concat(b)

# Output the roster
console.log generateRoster employees 
```

# eclipse - 如何在 Eclipse Juno 中添加服务器？

> ID：11990324
> 
> 赞同：2
> 
> 时间：2012-08-16T15:12:46.980
> 
> 标签：eclipse, jakarta-ee

我已经安装了 eclipse juno 并尝试添加服务器来做一些 javaEE 练习。我已经安装了 JavaEE jdk。我找不到向其添加服务器的选项。我试图从谷歌寻求帮助，但找不到任何东西。我正在使用 Juno，因为 eclipseEE 对我的电脑来说有点重。如何在 Eclipse Juno 中添加服务器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T15:38:05.080

无论您使用哪个 Eclipse 版本（Juno 是最新的同步版本，基于 Eclipse 平台 4.2），您都需要 Eclipse 的**Eclipse IDE for Java EE Developers包。**其他包不包括 Java EE 工具，例如启动服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:15:10.410

在 Juno 版本中添加服务器与在以前的 eclipse 版本中相同。

只需从显示透视菜单选项启用服务器窗格。

# ios - 根据每个段中的标题更改分段控件的宽度？

> ID：11990330
> 
> 赞同：14
> 
> 时间：2012-08-16T15:13:11.487
> 
> 标签：ios, objective-c, user-interface, width, uisegmentedcontrol

像这样开始，我喜欢：
![截图1.png](../Images/cf1f659b584004d406a6ccb8ef849044.png)

但后来我添加了一个段，这发生了：
![截图2.png](../Images/58b82f63b514a11518205a0644e27a20.png) 宽度是在 IB 中设置的，而不是在代码中。

我所需要的只是一种动态计算宽度的方法。最后，它会做这样的事情：

```
control.width = (labelWidths + marginWidths);
// where marginWidths = (marginWidth * control.numberOfSegments) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-07-17T07:23:25.357

您可以使用该属性`apportionsSegmentWidthsByContent`并将其设置为`YES`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-03-02T14:56:45.580

如下图所示，将 Auto-Size 属性更改为“与内容成比例”。

[![在此处输入图像描述](../Images/ee1bc07ac5ddbe0ff4376035665e105b.png)](https://i.stack.imgur.com/HZnK2.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-16T16:53:26.257

prgrmr 的答案中的方法在[这里](https://stackoverflow.com/a/6712874/536462)可以正常工作，但事实并非如此。

我没有使用自定义 UILabel 子视图添加不必要的开销，而是
修改了上面链接中的示例代码以提出以下建议：

```
- (void)resizeSegmentsToFitTitles:(UISegmentedControl *)control {
    CGFloat textWidth = 0; // total width of all text labels
    CGFloat marginWidth = 0; // total width of all margins
    NSUInteger nSegments = control.subviews.count;
    UIView *aSegment = [control.subviews objectAtIndex:0];
    UIFont *theFont = nil;

    // get font for segment title label
    for (UILabel *label in aSegment.subviews) {
        if ([label isKindOfClass:[UILabel class]]) {
            theFont = label.font;
            break;
        }
    }

    // calculate width of text in each segment
    for (NSUInteger i = 0; i < nSegments; i++) {
        NSString *title = [control titleForSegmentAtIndex:i];
        CGFloat width = [title sizeWithFont:theFont].width;
        CGFloat margin = 15;

        if (width > 200) {
            NSString *ellipsis = @"…";
            CGFloat width2 = [ellipsis sizeWithFont:theFont].width;

            while (width > 200-width2) {
                title = [title substringToIndex:title.length-1];
                width = [title sizeWithFont:theFont].width;
            }

            title = [title stringByAppendingString:ellipsis];
        }

        [control setTitle:title forSegmentAtIndex:i];

        textWidth += width;
        marginWidth += margin;
    }

    // resize segments to accomodate text size, evenly split total margin width
    for (NSUInteger i = 0; i < nSegments; i++) {
        // size for label width plus an equal share of the space
        CGFloat textWidth = [[control titleForSegmentAtIndex:i]
                             sizeWithFont:theFont].width;
        // the control leaves a 1 pixel gap between segments if width
        // is not an integer value; roundf() fixes this
        CGFloat segWidth = roundf(textWidth + (marginWidth / nSegments));
        [control setWidth:segWidth forSegmentAtIndex:i];
    }

    // set control width
    [control setFrame:CGRectMake(0, 0, (textWidth + marginWidth), 30)];
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-06-08T10:35:45.443

第一个选项如下所示：

```
segmentedControl.setWidth(100, forSegmentAt: 0)
segmentedControl.setWidth(50, forSegmentAt: 1) 
```

这为您提供了单独大小的细分，同时坚持您定义的值，这意味着您可以根据需要调整美学。第二个选项如下所示：

```
segmentedControl.apportionsSegmentWidthsByContent = true 
```

这将完全控制权交给了 iOS，这可能是大多数时候做的最好的事情。

适用于 iOS 5.0

[**黑客攻击**](https://www.hackingwithswift.com/example-code/uikit/how-set-different-widths-for-a-uisegmentedcontrols-elements)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-07T08:31:50.783

它将调整分段控件的大小以适应每个分段的文本标签中的文本。

```
 override func viewDidLoad() {
    super.viewDidLoad()

   UILabel.appearance(whenContainedInInstancesOf: [UISegmentedControl.self]).numberOfLines = 0
   } 
```

# c# - 如何合并两个列表？

> ID：11990331
> 
> 赞同：0
> 
> 时间：2012-08-16T15:13:11.937
> 
> 标签：c#, .net

我有以下类的两个列表（ObservableCollections）：

```
public class Data
{
    public string Key { get; set; }
    public string Value { get; set; }
} 
```

一个代表旧对象 ( `listA`)，第二个代表更新对象 ( `listB`)。我想在不破坏任何引用的情况下合并新`listB`数据`listA`。更准确地说，我想做以下事情：

*   从`listA`所有不存在的对象中删除`listB`（对象按`Key`属性进行比较）
*   添加到`listA`所有`listB`不存在的对象`listA`
*   更新两个列表中存在`Value`的所有对象的属性`listA`

你能提出一些有效的方法来做到这一点吗？我的解决方案很大，似乎非常无效。

**更新：** 当前的解决方案是：

```
public void MergeInstanceList(List<Instance> instances)
{
    var dicOld = Instances.ToDictionary(a => a.Ip);
    var dicNew = instances.ToDictionary(a => a.Ip);
    var forUpdate = instances.Intersect(Instances, new Comparer()).ToList();
    Instances.Where(a => !dicNew.Keys.Contains(a.Ip)).ToList().ForEach(a => Instances.Remove(a));
    instances.Where(a => !dicOld.Keys.Contains(a.Ip)).ToList().ForEach(a => Instances.Add(a));
    forUpdate.ForEach(a => dicOld[a.Ip].Name = a.Name);
}
public class Comparer : IEqualityComparer<Instance>
{

    public bool Equals(Instance x, Instance y)
    {
        return x.Ip == y.Ip;
    }

    public int GetHashCode(Instance obj)
    {
        return obj.Ip.GetHashCode();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:28:52.410

```
var listA = ...;
var listB = ...;

var itemsToRemove = new HashSet<Data>(listA.Except(listB));
var itemsToAdd = listB.Except(listA);
var itemsToUpdate = listA.Join(listB, a => listA.Key, b => listB.Key, 
            (a, b) => new
            {
                First = a,
                Second = b
            });

listA.AddRange(itemsToAdd);
listA.RemoveAll(item => itemsToRemove.Contains);
foreach(var pair in itemsToUpdate)
{
  //set properties in First to be that of second
} 
```

正如另一个答案中提到的，您需要创建一个自定义比较器并将其传递给这两个`Except`方法以使它们正常工作，或者您需要覆盖`Equals`and`GetHashCode`方法以基于 just `Key`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:25:15.360

使用以下*EqualityComparer*，

```
public class DataEqualityComparer : IEqualityComparer<Data>
{
    public bool Equals(Data x, Data y)
    {
        return x != null && y != null && x.Key == y.Key;
    }

    public int GetHashCode(Data obj)
    {
        return obj.Key.GetHashCode();
    }
} 
```

您可以找到以下元素：

```
DataEqualityComparer comparer = new DataEqualityComparer();

var InListAButNotInListB = listA.Except(listB, comparer);
var InListBButNotInListA = listB.Except(listA, comparer);

var InListAThatAreAlsoInListB = listA.Intersect(listB, comparer).OrderBy(item => item.Key);
var InListBThatAreAlsoInListA = listB.Intersect(listA, comparer).OrderBy(item => item.Key);

var InBothLists = InListAButNotInListB.Zip(InListBButNotInListA, (fromListA, fromListB) => new { FromListA = fromListA, FromListB = fromListB }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T15:44:16.513

假设 Key 是唯一的，并且禁止替换 listA ObservableCollection 实例......

```
Dictionary<string, Data> aItems = listA.ToDictionary(x => x.Key);
Dictionary<string, Data> bItems = listB.ToDictionary(x => x.Key);

foreach(Data a in aItems.Values)
{
  if (!bItems.ContainsKey(a.Key))
  {
    listA.Remove(a); //O(n)  :(
  }
  else
  {
    a.Value = bItems[a.Key].Value;
  }
}

foreach(Data b in bItems.Values)
{
  if (!aItems.ContainsKey(b.Key)
  {
    listA.Add(b);
  }
} 
```

字典在集合之间进行 O(1) 查找，并提供一个副本以进行枚举（因此我们不会得到“无法修改正在枚举的集合”异常）。只要没有删除任何内容，这应该是 O(n)。如果所有内容都被删除，最坏的情况是 O(n^2)。

如果不需要 listA ObservableCollection 实例来保存答案，最好创建一个 listC 实例并添加应该存在的所有内容（删除太糟糕了）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T15:08:01.933

System.Linq.Enumerable 没有完全外连接方法，但我们可以构建自己的方法。

```
//eager full outer joiner for in-memory collections.
public class FullOuterJoiner<TLeft, TRight, TKey>
{
  public List<TLeft> LeftOnly {get;set;}
  public List<TRight> RightOnly {get;set;}
  public List<Tuple<TLeft, TRight>> Matches {get;set;}

  public FullOuterJoiner(
    IEnumerable<TLeft> leftSource, IEnumerable<TRight> rightSource,
    Func<TLeft, TKey> leftKeySelector, Func<TRight, TKey> rightKeySelector
  )
  {
    LeftOnly = new List<TLeft>();
    RightOnly = new List<TRight>();
    Matches = List<Tuple<TLeft, TRight>>();

    ILookup<TKey, TLeft> leftLookup = leftSource.ToLookup(leftKeySelector);
    ILookup<TKey, TRight> rightLookup = rightSource.ToLookup(rightKeySelector);

    foreach(IGrouping<TKey, TLeft> leftGroup in leftLookup)
    {
      IGrouping<TKey, TRight> rightGroup = rightLookup[leftGroup.Key];
      if (!rightGroup.Any()) //no match, items only in left
      {
        LeftOnly.AddRange(leftGroup);
      }
      else  //matches found, generate tuples
      {
        IEnumerable<Tuple<TLeft, TRight>> matchedTuples =
          from leftItem in leftGroup
          from rightItem in rightGroup
          select Tuple.Create<TLeft, TRight>(leftItem, rightItem);

        Matches.AddRange(matchedTuples);
      }
    }
    foreach(IGrouping<TKey, TRight> rightGroup in rightLookup)
    {
      IGrouping<TKey, TLeft> leftGroup = leftLookup[rightGroup.Key];
      if (!leftGroup.Any()) //no match, items only in right
      {
        RightOnly.AddRange(rightGroup);
      }
    }
  }
} 
```

对于这个问题，可以这样使用：

```
ObservableCollection<Data> listA = GetListA();
ObservableCollection<Data> listB = GetListB();

FullOuterJoiner<Data, Data, string> joiner =
  new FullOuterJoiner(listA, listB, a => a.Key, b => b.Key);

foreach(Data a in joiner.LeftOnly)
{
  listA.Remove(a);  // O(n), sigh
}
foreach(Data b in joiner.RightOnly)
{
  listA.Add(b);
}
foreach(Tuple<Data, Data> tup in joiner.Matched)
{
  tup.Item1.Value = tup.Item2.Value;
} 
```

# php - 当 -11.5 加 11.5 等于 float(2.8421709430404E-14)

> ID：11990335
> 
> 赞同：6
> 
> 时间：2012-08-16T15:13:38.167
> 
> 标签：php

> **可能重复：**
> [PHP 数学精度](https://stackoverflow.com/questions/3726721/php-math-precision)
> [在 PHP 中处理货币值的最佳实践？](https://stackoverflow.com/questions/3819508/best-practice-for-working-with-currency-values-in-php)

我真的希望有人能提供帮助。在这个问题上，我一直在用头撞砖墙。

情况如下：我有一个结帐，计算折扣后的小计为 -11.50 英镑。然后加上 11.50 英镑的运费，恕我直言，应该等于 0 英镑。

然而，当计算运行时，它返回一个浮点数 2.8421709430404E-14

在我的调试工作中，我这样做了：

```
var_dump(
    $build['total'], // float(-11.5)
    $build['delivery'], // float(11.5)
    (($build['total'])+($build['delivery'])) // float(2.8421709430404E-14)
); 
```

但是，当我进行静态计算时：

```
var_dump((-11.5 + 11.5)); // float(0) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T15:22:56.103

2.8421709430404E-14 是 PHP 可以输出的最接近（但不等于）零的数字。它不完全是 0 的原因在于浮点数的定义——它们从来都不是完全精确的。

如果您需要处理还包含分数点的合理信息，我建议您通过乘以分数将其变为整数。

所以 100.54 美元变成了 10054。在完成所有计算之后，您可以再除以分数。

例子：

```
$build['total'] = -11.5;
$build['delivery'] = 11.5;

var_dump(
    $build['total'], // float(-11.5)
    $build['delivery'], // float(11.5)
    (int)($build['total']*1000)+(int)($build['delivery']*1000) // int(0)
    (int)(round($build['total'], 4)*1000)+(int)(round($build['delivery'], 4)*1000) // int(0)
); 
```

# windows-phone-7 - 在 WP7 中读取文件时希腊字符无效

> ID：11990337
> 
> 赞同：0
> 
> 时间：2012-08-16T15:13:40.567
> 
> 标签：windows-phone-7

我在网络服务器上有一个带有希腊文本的 txt 文件，我正在使用 WebClient 下载我的 WP7 应用程序。问题是希腊字符是 ????????? 有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:18:01.660

将编码设置为 UTF-8。

```
WebClient wc = new WebClient ();
wc.Encoding = UTF8Encoding.UTF8; 
```

# javascript - 传单正在脚本标签内加载 html

> ID：11990342
> 
> 赞同：0
> 
> 时间：2012-08-16T15:13:58.040
> 
> 标签：javascript, leaflet

在本地服务器上使用leaflet.js 库时，我发现了这种非常奇怪的情况：

编码：

```
 <!DOCTYPE html>
<html>
    <head>
        <title>map lab</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <link rel="stylesheet" href="leaflet.css" />
        <script src="leaflet.js"></script>
        <style type='text/css'>
            #map { height: 256px; }
        </style>
    </head>
    <body>
        <div id='map'></div>
        <script type='text/javascript'>
            var map = new L.map('map').setView([0.0, 0.0], 14);
            L.tileLayer('http://10.21.142.254/lab/map/{z}/{x}/{y}.png', {
                maxZoom: 18,
                attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>'
            }).addTo(map); 

        </script>
    </body>
</html> 
```

很好，但没有“加载”。在使用 Firebug 检查 FF 时，我发现整个 'html' 都插入到脚本标签内（第 7 行）。即整个htm 和传单代码都在里面，控制台返回（显然）一个语法错误。

从 Github 下载传单并尝试将其放在我的目录结构中的所有类型，但没有结果。

此外，使用以下方法从他们的服务器加载传单库：

```
<script src="http://cdn.leafletjs.com/leaflet-0.4/leaflet.js"></script> 
```

到目前为止效果很好。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:16:23.260

好的。我的错。不知何故，使用绝对路径 URL 而不是相对设置链接解决了这个问题。

代替：

`<link rel="stylesheet" href="leaflet.css" /> <script src="leaflet.js"></script>`

利用：

`<link rel="stylesheet" href="http://www.domain.com/lab/js/leaflet.css" /> <script src="http://www.domain.com/lab/js/leaflet.js"></script>`

谢谢。

# python - 用python捕获系统事件

> ID：11990345
> 
> 赞同：3
> 
> 时间：2012-08-16T15:14:11.303
> 
> 标签：python, networking, systemevent

我的问题是，我想在 python 脚本中捕获系统事件。如果将电缆插入网络设备并且计算机连接到该网络，我想处理此事件，启动一个功能（因为此时默认网关正在更改，我需要识别这一点）。有这样做的模块吗？

我需要类似的东西：

```
if class.network_connect_event():
        do some stuff 
```

此事件处理必须适用于 windows 和 Unix 系统。

谢谢

编辑：

我真正需要的是某种方式来识别 USB 网络设备。在插入时识别它并获取它的 IP 地址对我来说很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:25:12.923

您可能可以通过监听 dbus 事件来做到这一点。

`dbus-monitor`从命令行使用开始试验。当我断开 eth0 时，来自我的笔记本电脑（Ubuntu）的示例：

```
$ dbus-monitor --system
...
... # lots of events scroll by, including the ones below
...
signal sender=:1.6 -> dest=(null destination) serial=1275 path=/org/freedesktop/NetworkManager/Devices/0; interface=org.freedesktop.NetworkManager.Device.Wired; member=PropertiesChanged
   array [
      dict entry(
         string "State"
         variant             uint32 70
      )  
   ]  
signal sender=:1.6 -> dest=(null destination) serial=1289 

path=/org/freedesktop/NetworkManager/ActiveConnection/1; interface=org.freedesktop.NetworkManager.Connection.Active; member=PropertiesChanged
   array [
      dict entry(
         string "Default"
         variant             boolean true
      )
      dict entry(
         string "State"
         variant             uint32 2
      )
   ] 
```

您应该能够使用 Python dbus 绑定来监听这些事件。我不熟悉如何做到这一点的细节，但有[教程](https://www.google.com/search?q=python+dbus+tutorial)。

**编辑：**

试试这个包：[http](http://packages.python.org/python-networkmanager/) ://packages.python.org/python-networkmanager/ （免责声明：我没有尝试过）。

**编辑2：**

我没有注意到您需要 Windows 和 Unix。在 Windows 上，您必须找到另一种方式（因为 dbus 在 Windows 上不使用）。

# c - Sublime text 2 C .so 构建系统

> ID：11990347
> 
> 赞同：0
> 
> 时间：2012-08-16T15:14:18.700
> 
> 标签：c, gcc, sublimetext2, shared-libraries, build-system

我在 opengl 项目中使用 python 并用 C 语言编写我自己的 gl 库。我使用 Sublime Text 2 并且需要构建系统来创建 .so 并按下 crtl-b。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:14:18.700

```
{
    "cmd": ["gcc -Wall -Werror -fPIC -c $file_name -o $file_base_name| gcc -shared -o $file_base_name.so  $file_base_name -lGLEW -lGL -lGLU -lglut"],
    "shell":true, 
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "working_dir" : "$file_path",
    "selector": "source.c"    
} 
```

在您的 .c 文件所在的文件夹中启动构建命令后，将出现两个文件。一个带有您需要的不带扩展名和 .so 文件的目标代码。为了您自己的需要，您可能需要在链接器 shell 命令中更改库。我的意思是 -lGLEW -lGL -lGLU -lglut 你需要的东西。

# python - 在 Cygwin/Python2.7 中安装软件包时出现 pip 错误

> ID：11990350
> 
> 赞同：7
> 
> 时间：2012-08-16T15:14:23.513
> 
> 标签：python, cygwin

[我使用本指南](https://superuser.com/a/443094/372910)在 Cygwin 中安装了 Python2.7.3 ，然后从源代码安装了 pip。

当我尝试使用 pip 时：

```
$ pip install sqlalchemy
Downloading/unpacking sqlalchemy
Downloading SQLAlchemy-0.7.8.tar.gz (2.6Mb): 2.6Mb downloaded
Running setup.py egg_info for package sqlalchemy
  137 [main] python2.7 1060 child_info_fork::abort: address space needed by 'itertools.dll' (0x2C0000) is already occupied
  Error [Errno 11] Resource temporarily unavailable while executing command python setup.py egg_info
Exception:
Traceback (most recent call last):
File "/usr/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/basecommand.py", line 104, in main
  status = self.run(options, args)
File "/usr/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/commands/install.py", line 245, in run
  requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle)
File "/usr/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/req.py", line 1009, in prepare_files
  req_to_install.run_egg_info()
File "/usr/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/req.py", line 225, in run_egg_info
  command_desc='python setup.py egg_info')
File "/usr/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/__init__.py", line 221, in call_subprocess
  cwd=cwd, env=env)
File "/usr/local/lib/python2.7/subprocess.py", line 679, in __init__
  errread, errwrite)
File "/usr/local/lib/python2.7/subprocess.py", line 1143, in _execute_child
  self.pid = os.fork()
OSError: [Errno 11] Resource temporarily unavailable

Storing complete log in /home/joshfriend/.pip/pip.log 
```

发现一个指南指出发生了这种情况，并说运行`rebaseall`应该解决这个问题。我试过了，它没有。我认为这是因为我没有使用 cygwin 安装程序安装 python2.7，因此不受`rebaseall`.

**更新：**

我给了我用来安装 python 的说明的错误链接（对不起）。我回去并修正了我对我所做的事情的解释......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-17T13:13:33.113

您不能只是“运行`rebaseall`”您链接到的站点所暗示的方式。您需要执行以下操作：

1.  退出所有正在运行的 Cygwin 程序。是的，所有这些，甚至是你的 shell，甚至是 MinTTY，甚至是 X11。
2.  开始 > 运行 > `C:\cygwin\bin\ash.exe`> 确定。
3.  `cd /bin`
4.  键入`./rebaseall`并按`Return`。
5.  这可能需要几分钟。去喝杯咖啡。
6.  回来，再试一次。

我不知道如何`apt-cyg`工作，但它似乎使用标准的 Cygwin 存储库。除非您有充分的理由不这样做，否则我会使用标准的 Cygwin`setup.exe`安装程序来满足您的所有安装/升级/任何需要，因为它可以很好地为您完成所有变基。

特别是，如果上述步骤不起作用，我将使用 卸载 Python `apt-cyg`，然后通过使用标准安装程序安装它来重试。如果需要，您可以从[cygwin.com](http://www.cygwin.com/)再次下载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-06T06:54:10.730

尝试从 cygwin 控制台简单地运行 export temp=。它为我解决了这个问题。

# jquery - 铬清单 2

> ID：11990352
> 
> 赞同：0
> 
> 时间：2012-08-16T15:14:25.590
> 
> 标签：jquery, google-chrome-extension

添加“manifest_version”行后：2，不起作用jquery.rss.js，错误：未捕获的RefferenceError：$未定义。

popup.html：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="popup.css" rel="stylesheet" type="text/css" />
    <link href="loader.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="jquery.rss.js"></script>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="popup.js"></script>
</head>

<body>
    <span class="menu">
        <span><img src="images/home.png" id="url_get_home" title="Main"/></span>
        <span><img src="images/update.png" id="url_get_reload" title="Update"/></span>
        <span><img src="images/close.png" id="url_get_close" title="Close"/></span>
    </span>
    <div id="loader">
    <img src="images/plugin.png" />
    <br /><br />
    <script>
      jQuery(function($) {
        $("#rss_feeds").rss("http://feeds.feedburner.com/..../Vzse", {
          limit: 5,
          effect: 'slideFastSynced'
        })
      })
    </script>
    <div id="rss_feeds"></div>
    </div>
</body>
</html> 
```

下面代码的问题，如果你在另一个 *.js 文件中承担它不是一个函数不起作用并且不被调用。

```
<script>
     jQuery(function($) {
            $("#rss_feeds").rss("http://feeds.feedburner.com/..../Vzse", {
              limit: 5,
              effect: 'slideFastSynced'
            })
          })
        </script> 
```

清单.json：

```
{
  "name": "...",
  "version": "1.0",
  "description": "...",
  "manifest_version": 2,
  "background": {
      "scripts": [ "jquery.js", "popup.js", "jquery.rss.js", "jquery-1.6.4.min.js" ]
   },
   "icons": {
      "16": "images/icon16.png",
      "48": "images/icon48.png",
      "128": "images/icon128.png"
   },
  "permissions": [ "tabs", "http://*/*", "https://*/*" ],
  "web_accessible_resources": [ "popup.html" ],
  "update_url": "http://clients2.google.com/service/update2/crx",
  "browser_action": {
    "default_locale": "en",
    "default_title": "...",
    "default_icon": "images/icon.png",
    "default_popup": "popup.html"
  }

} 
```

帮忙解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:13:55.293

您的错误来自于将其包含在清单中：

```
"background": {
    "scripts": [ "jquery.js", "popup.js", "jquery.rss.js", "jquery-1.6.4.min.js" ]
 }, 
```

这是指示 Chrome 创建一个后台页面并按顺序运行列出的脚本。如前所述，它`jquery.rss.js`在运行时`jquery-1.6.4.min.js`发现`$`未定义。

但无论如何，您应该完全删除这些行，因为您不需要背景页面，您正在定义一个弹出窗口。

如评论中所述，您还需要将内联脚本移动到单独的文件中。

# python - 基于大键的字典与具有属性的对象列表的性能

> ID：11990353
> 
> 赞同：2
> 
> 时间：2012-08-16T15:14:27.187
> 
> 标签：python, oop, python-2.7

我正在使用具有几个属性的 Python 对象来组织数据模型，但我想知道这是否比使用基于键的字典效率低。我的模型存储 MP3 标签数据，如下所示：

```
class Mp3Model:
    def __init__(self, path, filename):
        self.path = path
        self.filename = filename
        self.artist = ''
        self.title = ''
        self.album = ''
        self.tracknumber = ''
        self.genre = ''
        self.date = '' 
```

该模型是这样使用的：

```
mp3s = []
for file in files:
    if os.path.splitext(file)[1] == '.mp3':
        # Append a new Mp3Model to the mp3s list for each file found
        mp3s.append(Mp3Model(os.path.join(self.dir, file), file)) 
```

使用基于键的字典，甚至一个简单的列表会提供很多性能增强吗？mps[] 对象列表的长度变化很大，具体取决于在给定目录中找到多少文件，当我扫描包含大量文件的目录时，程序可能会慢到爬行（我还没有实现任何线程） .

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T15:23:33.293

除非您[`__slots__`](http://docs.python.org/reference/datamodel.html#slots)为对象声明，否则对象属性`dict`无论如何都存储在底层中，因此使用 a`dict`会比对象快一点。但是，与您的其他代码相比，差异可以忽略不计。

数据结构的选择应取决于各种其他因素：

*   你需要存储结果吗？
*   您如何访问数据？串行访问还是随机访问？
*   您将在哪些键上搜索数据？
*   如果您打算并行化您的任务，它可以处理并发写入吗？锁定开销是多少？
*   ...

针对您的用例进行优化会带来更高的回报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T15:19:33.903

使用 dict 将比使用类更有效。您避免处理类、属性访问等的所有开销。更不用说，通过键访问字典中的项目是 python 中最有效和优化的代码片段之一。

不过有几点需要注意：

1.  只有通过测试才能确定。
2.  除非您知道有必要，否则不要优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:17:09.037

这只是一个猜测，但我相信瓶颈可能在于从操作系统读取文件，而不是构建列表。

话虽如此，您可以简单地通过创建一个包含所有文件名的列表并将性能与构建一个包含文件名的对象列表进行比较来测试它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T21:23:36.020

在您断定代码的任何特定部分都是慢速部分之前，请先分析程序。这可能是你最里面的循环，但测试这个假设，不要只是跳到它。

对于受 CPU 限制的负载，请尝试 Pypy。

对于 I/O 绑定的负载，请尝试缓存，或以某种方式将大量小文件聚合成较少数量的大文件。与读取一些顺序数据相比，打开往往很慢。

高温高压

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T14:22:17.953

不知道有没有更好的方法。您可以按以下方式执行这些操作；

```
from collections import namedtuple

Mp3Model = namedtuple("Mp3Model", "path filename artist title") 
```

它可以创建简单的**Mp3Model**类。

# algorithm - 广度优先搜索产生的节点数是多少？

> ID：11990358
> 
> 赞同：2
> 
> 时间：2012-08-16T15:14:58.403
> 
> 标签：algorithm, breadth-first-search

没有。根据我的书，由广度优先搜索生成的节点数是： `N(BFS) = b + b^2 + .... + b^d + ( b^(d+1) - b )`其中*b*是分支因子，*d*是最浅节点的深度。但不应该只是`b + b^2 + .... + b^d` 吗？因为那，在我看来是没有的。节点直到目标的深度。那么为什么会有`+ ( b^(d+1) - b )`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T02:18:13.697

根据您使用的算法的变体，通过广度优先搜索生成的节点数量会有所不同。

如果在选择扩展时将目标测试应用于每个节点（从打开列表/队列中弹出），则生成节点的数量将是（在最坏的情况下）：

`1 + b + b^2 + b^3 + ... + b^d + (b^(d+1) - b)`,

其中`d`是解深度，`b`是分支因子（任何节点的最大后继数）。

这是因为在实际选择目标节点进行扩展之前，您必须生成目标节点的兄弟节点的子节点。在最坏的情况下，目标节点将是打开列表中最后一个被选择进行扩展的节点。

但是，这个通用的图搜索算法有一个细微的调整，那就是目标测试是在生成每个节点时应用到每个节点，而不是在选择它进行扩展时。

因此，假设解决方案再次位于 depth `d`。同样，在最坏的情况下，它是在该级别生成的最后一个节点。那么生成的节点总数为：

`1 + b + b^2 + b^3 + ... + b^d`.

所以第一种情况下的空间复杂度是： `O(b^(d+1))`，而第二种情况下： `O(b^d)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:08:01.950

我认为您所指的情况是在生成节点时评估测试条件；然后 BFS 以最小深度扩展“目标”下方的所有节点，目标节点本身的子节点除外。如果目标位于 depth `d`，最坏的情况是最后一片叶子没有展开（因为它是目标）：

```
1 + b + b^2 + ... + b*(b^d - 1) = 1 + b + b^2 + ... + b^(d+1) - b = (b^(d+2) - 1) / (b - 1) 
```

# c# - 从母版页后面的代码访问变量

> ID：11990362
> 
> 赞同：-2
> 
> 时间：2012-08-16T15:15:15.247
> 
> 标签：c#, asp.net, variables, master-pages, public

**请看下面的图片**

![在此处输入图像描述](../Images/20efa06ab51375aeb18f254d01e58d78.png)

如您所见，我有一个母版页`Design.master`和它背后的代码，称为`Design.master.cs`.

我只是想让我的页面重定向到`dashboard.aspx`用户未登录时，但无论我尝试什么，我都无法做到。

我希望能够访问在`redirect`后面的代码中设置的公共变量的值，并从`Design.master`代码中访问它。

这样我就可以检查变量并将`Response.redirect()`代码放在`Design.master`页面中。

除非您知道如何让重定向从`Design.master.cs`代码中工作？

请帮助:(这让我发疯了！

**更新的图像**

![阿达斯](../Images/477cde67b460b009e1118ec0c645de0a.png)

`Design.master`代码：

```
<%@ Master Language="C#" CodeBehind="~/Design.master.cs" AutoEventWireup="true" %>

<%

        Response.Redirect("default.aspx", true);

%>

<!DOCTYPE html>

<html>

<head>
    <title>Portal</title>
    <link rel="stylesheet" href="styles.css" type="text/css" />

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script src="portal_script.js" type="text/javascript"></script>
</head>
<body>

<div id="main_wrapper">

        <div id="header_top_wrapper">
            <div id="header_top">
                <img src="images/design/logo_small.png" id="logo_top" />

                <a href="basket.aspx">
                    <div id="basket_top_link">
                        <div>Order Basket</div>
                    </div>
                </a>
            </div>
        </div>
        <div id="header_breadcrumb_wrapper">
            <div id="header_breadcrumb"></div>
        </div>

        <div id="content_wrapper">
            <div id="content">

                <div id="side_menu">

                    <div id="customer_info">

                        <asp:ContentPlaceHolder id="CustomerInfo" runat="server">

                        </asp:ContentPlaceHolder>

                    </div>

                    <a href="dashboard.aspx"><div class="side_menu_item">
                        <div class="item_title">View Orders</div>
                        <div class="item_description">View your outstanding orders</div>
                    </div></a>

                    <a href="search.aspx"><div class="side_menu_item">
                        <div class="item_title">Product Search</div>
                        <div class="item_description">Search products and view stock levels</div>
                    </div></a>

                    <a href="search.aspx"><div class="side_menu_item">
                        <div class="item_title">Outstanding Complaints</div>
                        <div class="item_description">View status of complaints</div>
                    </div></a>

                </div>

                <div id="content_left">

                    <asp:ContentPlaceHolder id="Content" runat="server">

                    </asp:ContentPlaceHolder>

                </div>

            </div>
        </div>

        <div id="footer_wrapper">

            <div id="footer"><p></p></div>

        </div>

</div>

</body>
</html> 
```

Design.master.cs 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Design : System.Web.UI.MasterPage
{

    public bool redirect = false;

    protected override void OnInit(EventArgs e)
    {

        // Get the users session
        SessionManager session = new SessionManager(HttpContext.Current);

        // I've tried it here, and it won't redirect
        // Response.Redirect("default.aspx");

        redirect = true;

    }

    protected void Page_Load(object sender, EventArgs e)
    {
        // I've tried it here, and it won't redirect
        // Response.Redirect("default.aspx");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:17:03.423

只需在您的`Page_Load`方法中执行以下操作`Design.master.cs`：

```
protected void Page_Load(object sender, EventArgs e){
   if (result){
      Response.Redirect("....");
   }
} 
```

这比标记文件中的代码中断要简洁得多，而且这种技术只会在将来咬你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:31:23.633

`AutoEventWireUp`默认设置为 false。查看您的声明，这就是为什么母版页方法没有连接的原因。将声明更改为

`<%@ Master Language="C#" AutoEventWireup="true"`

然后你可以添加类似的东西

```
protected override void OnInit(EventArgs e)
        {
            if(!loggedIn)
                 Response.Redirect("login.aspx", false);
          //...
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:34:19.057

对于您的实际代码使用：

```
Response.Redirect("Page.aspx",True); 
```

在重定向中使用 true 通常会修复那些原本不起作用的晦涩时间。

# iphone - 从Core Data获取大数据后for循环的风险

> ID：11990364
> 
> 赞同：0
> 
> 时间：2012-08-16T15:15:26.573
> 
> 标签：iphone, ios, core-data

我在我的一个应用程序中广泛使用 Core Data。通常，对于 UITableView，我使用的是 NSFetchedResultsController。但是在一个特定的视图控制器中，我需要显示一些数据的总和——这需要我首先获取数据，然后进行一个 for 循环来分析数据并进行计算。

但是，我认为，如果我获取大量数据（比如说，10.000 个对象，每个对象都包含一个 NSString 和一个浮点数），并进行 for 循环，它可能会导致我的应用程序崩溃。这是一个严重的风险吗？如果是这样，我该如何解决？（我想创建一个 NSAutoReleasePool，在计算后添加和释放每个对象，但我使用的是 ARC，所以我认为我不能）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T23:33:49.330

在这样的循环中使用自动释放池......

```
@autoreleasepool {
    // Insert code in here
} 
```

此外，您应该确保`retainsRegisteredObjects`在您的托管对象上下文中为“否”。另外，如果你真的开始使用太多，你可以手动控制你的故障，通过释放它们`refreshObject:mergeChanges:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:25:30.293

我认为你应该对你提出的循环没问题。

`batchSize`您可以通过设置fetch 请求来指示 Core Data 始终只获取谨慎数量的数据。然后，Core Data 会进行增量获取并为您处理内存管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T23:45:38.863

您无需从核心数据实体中获取所有属性来执行您尝试归档的复杂计算。只需在您的 NSFetchRequest 上使用 setPropertiesToFetch: ，这将允许您仅获取您需要的属性。此外，为您的 fetch 请求使用 setBatchSize 来告诉核心数据对您的对象进行故障处理以保持低占用空间。

# jquery - jQuery模糊和点击事件加倍

> ID：11990366
> 
> 赞同：0
> 
> 时间：2012-08-16T15:15:31.020
> 
> 标签：jquery

我的代码：http: [//jsfiddle.net/hayleyeaston/nkfms/4/](http://jsfiddle.net/hayleyeaston/nkfms/4/)

我正在整理一个邮政编码查找，用户输入一个邮政编码，然后单击一个按钮来触发一个邮政编码搜索。我有一个点击事件处理程序，但我还想在输入字段上添加一个模糊处理，以防用户可能输入他们的邮政编码但实际上没有点击“查找”。这是为了确保在用户尝试提交整个表单之前进行邮政编码搜索。

我的问题是当用户输入邮政编码并单击“查找”按钮时，我会同时运行模糊和单击事件。我在控制台日志中看到两次“搜索邮政编码”。如何解决此问题，以便仅在用户未单击“查找”按钮时才会出现模糊。

我的代码在上面的 JSFiddle 链接中。请任何人都可以帮忙，在过去的几天里，它一直让我发疯。如果发生邮政编码搜索，我想到检查表单提交，但理想情况下，如果可能的话，我想解决模糊/点击问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:17:43.623

删除`click()`事件 - 你不需要它。

我的小提琴：http: [//jsfiddle.net/Grimdotdotdot/UKGYN/](http://jsfiddle.net/Grimdotdotdot/UKGYN/)

# jquery - jQuery 中滑出的元素在 IE 8 中被弄乱了

> ID：11990371
> 
> 赞同：1
> 
> 时间：2012-08-16T15:15:48.290
> 
> 标签：jquery, css, slidetoggle

我创建了一个常见问题解答部分，它在 Chrome 和 Firefox 中很好，但在 IE 8 中，当向上滑动时，元素似乎失去了它们的底边距。

我准备了一个小提琴，但它似乎有一个不同的问题，甚至在 Chrome 中看起来很乱，显示了多个底部边框。

我希望看看有没有人知道为什么会这样？

小提琴：http: [//jsfiddle.net/4vYLb/](http://jsfiddle.net/4vYLb/)

**HTML**

```
<div id="faq-q-a">

    <div class="question-wrapper">
        <h3>This is the first question?</h3>
        <div class="answer">
           <p>Morbi et arcu eget dolor tempor volutpat. Mauris a leo dolor, vitae cursus diam. Morbi faucibus convallis rutrum. </p>
        </div>
    </div>

    <div class="question-wrapper">
        <h3>This is the second question?</h3>
        <div class="answer">
            <p>Morbi et arcu eget dolor tempor volutpat. Mauris a leo dolor, vitae cursus diam. Morbi faucibus convallis rutrum. </p>
        </div>
    </div>

    <div class="question-wrapper">
        <h3>This is the third question</h3>
        <div class="answer">
            <p>Morbi et arcu eget dolor tempor volutpat. Mauris a leo dolor, vitae cursus diam. Morbi faucibus convallis rutrum. </p>
        </div>
   </div>    

</div>​ 
```

**jQuery**

```
$('#faq-q-a h3').each(function() {
    var h3 = $(this);
    answer = h3.next('.answer').hide().css('height','auto').slideUp();

    h3.click(function() {
        h3.parent('.question-wrapper').toggleClass('active');

        if (h3.parent('.question-wrapper').is('.active')) {
            h3.next('.answer').slideDown('slow');
        }
        else {
            h3.next('.answer').slideUp('slow');
        }
    });
}); 
```

**CSS**

```
#faq-q-a {
    position: relative;
    margin: 10px 0 10px 10px;
    padding: 0 0 0 22px;
}

.question-wrapper {
    background-color: #e5e5e5;
    border: 1px solid #cccccc;
    margin-bottom: 20px;
    padding: 5px 0 5px 25px;
    width: 420px;
    background: #e5e5e5;
}  

.question-wrapper.active {
    background-color: #ffffff;
    background: #ffffff;
}

#faq-q-a h3 {
    cursor: pointer;
    color: #408261;
    font-weight: bold;
    font-family: arial, Helvetica;
    font-size: 14px;
    margin-bottom: 10px;
}

#faq-q-a div.answer {
    position: relative;
    height: 0;
    overflow: hidden;
}

#faq-q-a div.answer p {
    padding: 0;
    margin: 0;
    font-family: arial, Helvetica;
    color: #555;
    font-size: 12px;
    width: 300px;
}​​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:53:03.360

将以下内容添加到 .question-wrapper CSS：

```
overflow: hidden; 
```

更新小提琴：http: [//jsfiddle.net/johnkoer/4vYLb/1/](http://jsfiddle.net/johnkoer/4vYLb/1/)

# javascript - 在 iphone 上播放 vimeo 视频

> ID：11990378
> 
> 赞同：1
> 
> 时间：2012-08-16T15:16:10.007
> 
> 标签：javascript, html, vimeo

我正在使用以下内容`htmlString`在 iPhone 上的 vimeo 上运行文件。

```
<iframe src=\"http://player.vimeo.com/video/8118831?api=1title=0&amp;byline=0&amp;portrait=0&amp;color=008efe&amp\";autoplay=1&amp;loop=1 width=\"320\" height=\"480\" frameborder=\"0\">"//@"</iframe>" 
```

它播放得很好，但我希望视频在没有用户交互的情况下播放。我没有这样做。

我尝试`autoplay=1`按照[http://developer.vimeo.com/player/embedding](http://developer.vimeo.com/player/embedding)中的说明添加它不会自动播放。这篇文章 - [http://vimeo.com/forums/topic:45193](http://vimeo.com/forums/topic:45193)让我相信`autoplay`不适用于 iPhone。因此我尝试用它`JavaScript`来播放视频文件。但是 vimeo 不会公开视频文件。所以我尝试使用 vimeo 自己的 Java API，但它没有播放视频文件的功能 (http://developer.vimeo.com/player/js-api)。

我的问题是，有没有办法在 iPhone 上播放 vimeo 文件而无需用户交互以及如何完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:43:49.043

好像 vimeo 已经更新了它的 api，现在有一个播放视频的功能。我使用了以下 html 字符串：

```
NSString *htmlString = [NSString stringWithFormat:
                                                @"<html><head>"
                                                "<script src=\"froogaloop.js\"></script>"
                                                " <script>"
                                                    "function ready()"
                                                        "{$f(document.getElementById(\"player\")).api(\"play\");}"
                                                    "function func1() "
                                                        "{$f(document.getElementById(\"player\")).addEvent(\"ready\", ready);}"
                                                    "window.onload=func1;"
                                                "</script></head><body>"
                                                       "<iframe id=\"player\" src=\"http://player.vimeo.com/video/39287488?api=1&amp;player_id=player\" width=\"315\" height=\"455\" frameborder=\"0\" webkit-playsinline>"
                                               " </iframe></body></html>"]; 
```

和 onViewDidFinishLoad

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSLog(@"webview loaded");
    NSString *path = [[NSBundle mainBundle] pathForResource:@"froogaloop" ofType:@"js"];
    NSString *jsCode = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];
    [webView stringByEvaluatingJavaScriptFromString:jsCode];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:22:31.140

I also tried alot for doing that but i couldn't. I think it is not allowed by iphone.

( Like u can not play video in browser (It automatically opens native video player) )

# r - R - 将数据框添加到列表

> ID：11990384
> 
> 赞同：14
> 
> 时间：2012-08-16T15:16:16.197
> 
> 标签：r

如何将数据框添加到 R 中的列表中？我正在尝试以下代码。

首先，我从 csv 文件创建一个数据框（任何 csv 文件都可以）

```
> a <- read.csv(csvFile)
> class(a)
[1] "data.frame" 
```

所以，我有一个名为“a”的数据框。现在我创建一个包含一个字符项的列表，如下所示

```
> b <- list("hello world") 
```

现在，我将我的数据框“a”附加到列表 b 中，如下所示

```
> b[[length(b)+1]] <- a
> class(b)
[1] "list"
> length(b)
[1] 2 
```

到目前为止，一切都很好。列表 b 现在有 2 个项目（字符串“hello world”和数据框 a）。现在让我困惑的是以下代码

```
> class(b[2])
[1] "list" 
```

为什么 class(b[2]) 显示为列表而不是数据框？我希望能够将我的数据框“a”添加到列表“b”中，而无需将 a 隐式转换为列表。谁能帮我理解如何做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-16T15:19:13.010

这记录在`?"["`（或`?Extract`）中，在“递归（类似列表）对象”部分（强调添加）：

> '[' 索引类似于原子向量并*选择*指定元素的列表。
> 
> '[[' 和 '$' 都*选择列表的单个元素*。

由于`b[2]`返回一个列表，因此您要使用`[[`，即`b[[2]]`。

# jquery - slideDown/Up 和 scrollTop 互相窃听

> ID：11990385
> 
> 赞同：1
> 
> 时间：2012-08-16T15:16:17.697
> 
> 标签：jquery, slidedown, slideup, scrolltop

向下滚动 150px 时，左侧会出现一个 div（slideDown）。当您按下向上按钮时，窗口应该向上滚动并且 div 应该隐藏 (slideUp)。发生这种情况，但 div 向上滑动，然后再次向下滑动，然后再向上滑动。有什么问题？这是代码：

```
function checkSize() {
    if ($(window).width() > 1250) {
            $(window).scroll(function() {
                if ($(document).scrollTop() > 150) {
                    $("nav#menu-float").slideDown("800");
                }
                else {
                    $("nav#menu-float").slideUp("800");
                }
            });
    }
    else {
        $("nav#menu-float").hide();
    }
}

checkSize();
$(window).resize(function() {
    checkSize();
});

//Back to top
$("div#toTop a").click(function(e) {
    $("body,html").animate({
            scrollTop: 0
    }, 800);
    $(this).parents("nav#menu-float").slideUp("800");
    e.preventDefault();
}); 
```

*编辑*删除了测试用例的链接，因为该链接已经失效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:32:37.247

我认为你可以删除它

```
 $(this).parents("nav#menu-float").slideUp("800"); 
```

行，从`$("div#toTop a").click(function(e)`
Slideup 事件被调用两次：1.on click 事件，并且单击再次调用滚动事件 2.滚动事件尝试再次向上滑动，同时滚动到顶部 '0'....

# c# - MVC4 基于域指定路由命名空间

> ID：11990386
> 
> 赞同：0
> 
> 时间：2012-08-16T15:16:19.290
> 
> 标签：c#, .net, asp.net-mvc-3, asp.net-mvc-routing, asp.net-mvc-4

***_* __ *_* __ *_* ____*更新*__ *_* __ *_* __ *_* ___**

从不同的角度使用自定义 ControllerFactory 解决问题，请参见下面的答案。

***_* __ *_* ____*原始问题*__ *_* __ *_* __**

我有一个用于多个品牌部署的 MVC 代码库。为了满足每个客户的需求，我们设置了可覆盖的控制器和视图。

路线注册看起来像这样

```
protected void Application_Start()
    {
        string deploymentName = GetDeploymentName();
        RouteConfig.RegisterRoutes(RouteTable.Routes, deploymentName);
    } 
```

在 RegisterRoutes 中，我们首先在部署命名空间中寻找匹配的控制器，如果没有找到，则在基本命名空间中查找。

如果我们为每个部署都设置了单独的 IIS 应用程序，这可以正常工作，因为每个部署都会执行自己的 Application_Start()

但是，我们正在尝试在一个 IIS 站点实例中运行所有部署。这意味着 Application_Start() 只被调用一次，只为第一次部署注册路由。

我正在尝试将 RegisterRoutes 从 Application_Start() 移至 Session_Start() 或 Application_PreRequestHandlerExecute()

```
protected void Application_PreRequestHandlerExecute()
    {
        string deploymentName = GetDeploymentName();

        using (RouteTable.Routes.GetWriteLock())
        {
            RouteTable.Routes.Clear();
            RouteConfig.RegisterRoutes(RouteTable.Routes, deploymentName);
        }
    } 
```

使用此代码，每个请求都会获取当前部署命名空间，清除路由表，并使用新命名空间再次注册路由。

2个问题：

1：请求仍然根据之前的路由执行。所以我在生命周期的错误部分，因为此时的请求已经注定了特定的控制器和操作。

2：下一个请求会抛出异常：

> 异常详细信息：System.InvalidOperationException：找到与名为“Home”的控制器匹配的多种类型。如果服务此请求的路由 ('{controller}/{action}/{id}') 未指定命名空间来搜索与请求匹配的控制器，则可能会发生这种情况。如果是这种情况，请通过调用采用“namespaces”参数的“MapRoute”方法的重载来注册此路由。

即使我取消了之前注册的路由，应用程序似乎仍然挂在之前注册的控制器上，现在我已经注册了另一个到另一个同名控制器的路由，这两个控制器之间存在歧义。

我的两个主要问题是：

**1\. 除了 Application_Start() 之外，是否还有其他生命周期事件可用于在请求已解析为先前存在的路由之前注册新路由？**

**2\. 如何彻底清除路由和控制器，以免之前注册的控制器出现歧义异常？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:59:07.883

我做错了……我不应该担心路由，我应该担心控制器实例化。我发现您可以在 Application_Start() 中将 controllerFactory 替换为您自己的自定义工厂：

```
ControllerBuilder.Current.SetControllerFactory(new CustomControllerFactory(domainNamespaces)); 
```

所以在这里，我将带有命名空间值的域键字典传递给我的自定义控制器工厂中的构造函数

然后在工厂中我重写了查找控制器类型的方法

```
public class CustomControllerFactory : DefaultControllerFactory
{
    public Dictionary<string, string> DomainNamespaces { get; set; }

    public CustomControllerFactory(Dictionary<string, string> domainNamespaces)
        : base()
    {
        DomainNamespaces = domainNamespaces;
    }

    protected override Type GetControllerType(RequestContext requestContext, string controllerName)
    {

        controllerName += controllerName.EndsWith("Controller", StringComparison.OrdinalIgnoreCase) ? String.Empty : "Controller";

        string requestDomain = requestContext.HttpContext.Request.Url.Host;
        string defaultNamespace = "API.Controllers.Base";
        string deploymentNamespace = "API.Controllers.Deployments." + DomainNamespaces[requestDomain];

        Assembly asm = Assembly.GetExecutingAssembly();
        Type deploymentMatch = null;
        Type defaultMatch = null;

        foreach (Type type in asm.GetTypes())
        {
            if (type.Namespace == deploymentNamespace && type.Name.Equals(controllerName, StringComparison.OrdinalIgnoreCase))
            {
                deploymentMatch = type;
            }
            else if (type.Namespace == defaultNamespace && type.Name.Equals(controllerName, StringComparison.OrdinalIgnoreCase))
            {
                defaultMatch = type;
            }
        }

        return deploymentMatch ?? defaultMatch;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:36:07.020

如果您在一个实例中运行所有内容并且两个用户正在打开会话，那么在他们都在浏览您的站点时应该保持注册哪个路由？

您可以编写处理当前上下文的自定义路由，而不是在上下文更改时注册新路由：[MVC 3 根据请求参数使用不同的控制器](https://stackoverflow.com/questions/7206065/mvc-3-use-different-controllers-based-on-request-parameters)

# php - Symfony 2 中的请求标头包缺少授权标头？

> ID：11990388
> 
> 赞同：47
> 
> 时间：2012-08-16T15:16:21.767
> 
> 标签：php, http, symfony, http-headers, fiddler

我正在尝试在 Symfony 2 中实现[自定义身份验证提供程序](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)。我正在使用 Fiddler 发送测试请求并打印所有标头服务器端；好吧，`Authorization`标题丢失了。

难道我做错了什么？

```
GET /RESTfulBackend/web/index.php HTTP/1.1
Authorization: FID 44CF9590006BF252F707:jZNOcbfWmD/
Host: localhost
User-Agent: Fiddler
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: it-it,it;q=0.8,en-us;q=0.5,en;q=0.3 
```

侦听器只是打印标题并退出：

```
class HMACListener implements ListenerInterface
{
    private $securityContext;

    private $authenticationManager;

    public function handle(GetResponseEvent $event)
    {
        $request = $event->getRequest();
        print_r($request->headers->all()); 
        die();
     }
} 
```

响应缺少`Authorization`标头：

```
Array
(
    [host] => Array
        (
            [0] => localhost
        )
    [user-agent] => Array
        (
            [0] => Fiddler
        )
    [accept] => Array
        (
            [0] => text/html,application/xhtml+xml,application/xml
        )
    [accept-language] => Array
        (
            [0] => it-it,it;q=0.8,en-us;q=0.5,en;q=0.3
        )
) 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-06-18T17:31:04.843

您必须将此代码添加到**virtualhost**标记

**如果您将它放在目录**标签中，它将不起作用。

```
 RewriteEngine On
    RewriteCond %{HTTP:Authorization} ^(.*)
    RewriteRule .* - [e=HTTP_AUTHORIZATION:%1] 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-11-18T04:04:58.507

Akambi 的答案对我不起作用，但在 php 网站上找到了这个答案：

“在 CGI/FastCGI Apache 下缺少授权标头的解决方法：

```
SetEnvIf Authorization .+ HTTP_AUTHORIZATION=$0 
```

现在，如果客户端发送授权标头，PHP 应该自动声明 $_SERVER[PHP_AUTH_*] 变量。”

谢谢derkontrollfreak+9hy5l！

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-01-05T19:20:35.393

经过验证的解决方案当时对我有用，可以通过 Authorization 标头。但是，当传入请求中没有 Authorization 标头时，它会生成一个空的 Authorization 标头。这就是我解决它的方法：

```
RewriteEngine On
RewriteCond %{HTTP:Authorization} .+
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}] 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-01T22:41:17.013

在编写带有自定义`Authorization`标头的公共 API 时，我遇到了同样的问题。为了修复`HeaderBag`我使用了一个监听器：

```
namespace My\Project\Frontend\EventListener;

use Symfony\Component\HttpFoundation\HeaderBag;

use Symfony\Component\HttpKernel\Event\GetResponseEvent;

/**
 * Listener for the REQUEST event. Patches the HeaderBag because the
 * "Authorization" header is not included in $_SERVER
 */
class AuthenticationHeaderListener
{
    /**
     * Handles REQUEST event
     *
     * @param GetResponseEvent $event the event
     */
    public function onKernelRequest(GetResponseEvent $event)
    {
        $this->fixAuthHeader($event->getRequest()->headers);
    }
    /**
     * PHP does not include HTTP_AUTHORIZATION in the $_SERVER array, so this header is missing.
     * We retrieve it from apache_request_headers()
     *
     * @param HeaderBag $headers
     */
    protected function fixAuthHeader(HeaderBag $headers)
    {
        if (!$headers->has('Authorization') && function_exists('apache_request_headers')) {
            $all = apache_request_headers();
            if (isset($all['Authorization'])) {
                $headers->set('Authorization', $all['Authorization']);
            }
        }
    }
} 
```

并将其绑定到`kernel.request`服务定义中：

```
services:
  fix_authentication_header_listener:
    class: My\Project\Frontend\EventListener\AuthenticationHeaderListener
    tags:
      - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest, priority: 255 } 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-08-16T17:42:27.970

授权标头用于[http 基本身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication#Example)，如果格式不正确，则会被 apache 丢弃。尝试使用其他名称。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-07-04T00:14:05.597

当其他选项不起作用时，另一个适用于 Apache 2.4 的[`CGIPassAuth`](https://httpd.apache.org/docs/current/de/mod/core.html#cgipassauth)选项是在相关`<Directory>`上下文中设置选项，如下所示：

```
CGIPassAuth On 
```

根据文档，它从 Apache 2.4.13 开始可用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-20T12:33:20.757

另一种解决方案是更改您的`PHP`处理程序以运行 PHP as`Apache Module`而不是 as `CGI application`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-03T11:15:29.237

我们应该在服务器端授权这个头“Authorization”，

它也可以简单地用 nelmioCorsBundle 完成 `nelmio_cors: defaults: allow_credentials: false allow_origin: [] allow_headers: [] allow_methods: [] expose_headers: [] max_age: 0 hosts: [] origin_regex: false forced_allow_origin_value: ~ paths: '^/api/': allow_origin: ['*'] allow_headers: ['Authorization']`

# actionscript-3 - Flash Builder 4.6 中 E4X 过滤的奇怪行为

> ID：11990389
> 
> 赞同：0
> 
> 时间：2012-08-16T15:16:28.367
> 
> 标签：actionscript-3, flash-builder, e4x

我的程序中有一个非常奇怪的行为，在尝试了很多事情并在这里搜索可能的答案但没有成功之后，我决定在这里提出一个新问题。所以这是我的问题：

我正在使用 describeType()，所以得到了一个 E4X XML 对象来描述我的班级。我的班级有一个没有参数的元数据 [Table]：

```
[Table]
class MyClass extends ORM
{
    [...] 
```

调试正确时的 XML 对象：

```
trace(xmlDescription.metadata.@name[0]);
// output "Table"
trace(xmlDescription.metadata.(@name == "Table").length());
// output... 0!!!! 
```

还检查了 XML 对象，我得到了所需节点的正确结构：

```
<metadata name="Table"/> 
```

在进行研究时，我想起了 XML.ignoreWhitespace 属性。我尝试在调用 describeType() 之前将其设置为 false，但没有任何改变

所以知道如何在一个 XML 类型变量中获取这个元数据节点，我应该在逻辑上使用它（但结果是 null）：

```
xmlDescription.metadata.(@name == "Table")[0] 
```

？？？

提前致谢

PS：我使用的是 Flash Builder 4.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T00:50:58.897

哇，在 Facebook 上分享了这个问题后，根本不希望从那里得到任何答案，我从一位老同事那里得到了一个工作：

显然，Flash Builder 4 中出现了一个错误，而我的问题就在它的范围内。要“修复”它，您必须使用 String 类型的局部变量才能使其工作。因此，像下面这样替换我的代码使其工作：

```
// before:
public function uniqueMetadata( metadataName : String ) : ReflectionMetadata
{
    var x : XML = xmlDescription.metadata.(@name == metadataName)[0];
    // x is null here

// after
public function uniqueMetadata( metadataName : String ) : ReflectionMetadata
{
    var s : String = metadataName,
        x : XML = xmlDescription.metadata.(@name == s)[0];
    // x is not null and contain the desired node! 
```

所以，是的，奇怪的解决方法。我真的不明白怎么会发生这样的错误......

无论如何，现在它正在工作，我正在我的代码中寻找其他类似的地方，我需要在执行一些 E4X 过滤之前将参数的值复制到相同类型的局部变量中大声笑

# hibernate - 休眠 - 由于 StaleObjectStateException 重试失败的更新仍会尝试保存陈旧的实例

> ID：11990391
> 
> 赞同：2
> 
> 时间：2012-08-16T15:16:33.623
> 
> 标签：hibernate, optimistic-locking

我在休眠和版本控制方面遇到问题。我正在使用 Hibernate 3.6.7-Final。这是来自我的 DAO 类的代码片段（它由使用 @Transactional 注释的 Spring Beans 调用，因此它本身不是事务性的，但为了强制 StaleObjectStateException，使用了刷新）：

```
@Override
public void save(User user) {
    boolean saved = false;
    while (!saved) {
        try {
            sessionFactory.getCurrentSession().saveOrUpdate(user);
            sessionFactory.getCurrentSession().flush();
            saved = true;
        } catch (StaleObjectStateException exc) {
            sessionFactory.getCurrentSession().refresh(user);
        }
    }
} 
```

版本是一个长值映射，如下所示：

```
<version name="version" access="field" column="version" type="long" unsaved-value="null" /> 
```

问题是，用户永远不会被保存，代码只会永远循环。我调试了一下，结果发现hibernate有一个ActionQueue的概念，并且在内部，它在不同的集合中有插入、更新等。对于上面代码的每个循环，更新集合都会增长 1。它失败了，因为它总是尝试在该集合中的索引 0 处执行更新，这是“陈旧”的，并且在该点失败，并且没有尝试使用刷新的版本执行更新。有没有办法让这个工作？

也许一些关于我想要做什么的背景，所以也许更聪明的人将能够提出一个更好的解决方案：假设没有版本控制，并且用户有一个包含无效登录计数的列。每次失败，此计数都会增加一，并在成功登录时重置。（我们用它来设置用户在 x 次不成功尝试后何时可以登录的超时，以防止对帐户的暴力破解，但这在这里无关紧要。）现在，假设攻击者使用攻击，其中服务器上的多个线程可以访问同一个用户帐户，当 2 个线程读取失败计数为 2 的用户时，线程 1 将其更新为 3，保存，然后线程 2 将其更新为 3，并保存 -我们刚刚失去了一次不成功的尝试，这是一个错误。

所以，为了解决这个问题，我想引入版本控制列，在这种情况下，它不会导致上面的线程 2 抛出异常，在这种情况下，将重试操作（可能，但高度不太可能，在一个循环中） - 基本上，这将引入保存用户的序列化，但基于乐观锁定。如前所述，这不起作用。

有人可以帮我解决这个问题吗？这是一个好主意吗？也许有更好的方法？为什么休眠代码段不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T00:54:58.163

您可能需要一个新会话来执行更新。作为一般规则，您不应在引发异常后使用会话。

您可以阅读[此](https://forum.hibernate.org/viewtopic.php?t=942461)线程以获取更多信息。TL;DR：hibernate 抛出的异常是不可恢复的。您必须回滚，关闭会话并重新开始。

# android - 当我使用 notifyDataSetChanged 时出现 IndexOutOfBoundException

> ID：11990399
> 
> 赞同：3
> 
> 时间：2012-08-16T15:17:04.513
> 
> 标签：android, baseadapter

我在这篇[用 notifyDataSetChanged() 更新 ExpandableListView 的帖子中发现了我的问题](https://stackoverflow.com/questions/9260409/updating-expandablelistview-with-notifydatasetchanged)

“每次使用 setNotifyDatasetChanged 刷新视图时，适配器都会调用列表周围的循环。由于您所做的更改，适配器中的列表会获得空值。”

我是初学者，无法正确更改列表

我的消息来源

```
public class UrlArrayAdapter extends ArrayAdapter<UrlItem> {

    private LayoutInflater inflater;
    private ListView urlListView1;
    private ArrayList<UrlItem> urlItems1;

    public UrlArrayAdapter(Context context, ListView urlListView,
            ArrayList<UrlItem> urlLists) {
        super(context, urlListView.getId(), urlLists);
        this.urlItems1 = urlLists;
        this.urlListView1 = urlListView;

        inflater = LayoutInflater.from(context); 
```

**如何从基本适配器的 urlLists 列表中删除项目？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:25:02.287

删除项目：`urlList.remove(item_index);` 然后通知数据集已更改。

**根据您在下面的评论，我正在更新我的答案。**
该`remove()`方法接受被删除元素的索引，而不是元素本身。

因此，要从列表中删除特定数字，您应该首先找到它的索引，然后将该索引传递给该`remove()`方法。

前任：

```
public void deleteItem(int numberToDelete) {
    int index=-1;

    // Find the index of numberToDelete
    if(urlLists.contains(numberToDelete)){
        index = urlLists.indexOf(numberToDelete);
    }

    // Delete the number by spefying the index found.
    if(index!=-1){
        urlLists.remove(index);
    }

//...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T20:20:06.687

除了覆盖之外`public View getView(int position, View view, ViewGroup parent)`，请确保您的扩展类`ArrayAdapter`覆盖这些方法：

```
public int getCount()
public UrlItem getItem(int position)
public int getPosition(Hold item)
public long getItemId(int position) 
```

我相信`notifyDataSetChanged()`会调用`getCount()`您的适配器来确定有多少项目。如果您不覆盖此方法，`return urlItems1.size();`那么`IndexOutOfBoundException`似乎迫在眉睫，因为您的自定义适配器将无法告诉客户其大小和内容。

# oracle - 如果已经用正确的类型定义了变量，是否需要 oracle cast？

> ID：11990403
> 
> 赞同：0
> 
> 时间：2012-08-16T15:17:21.880
> 
> 标签：oracle, casting, plsql, oracle11g

在这个存储的过程片段中：

```
CREATE OR REPLACE PROCEDURE PORTAL_OWNER.searchAtTransfers_prc_xmltype (
   usercredential      IN     VARCHAR,
   doc_result_cursor      OUT SYS_REFCURSOR)
IS
..
..
   docExtTable     DOC_TABLETYPE;//user defiend type that is a collection of below Type.
   docExtRecord    DOC_ROWTYPE;//user defined type
BEGIN
    SELECT DOC_ROWTYPE (extractvalue (value (t), 'transfers/userRequestId')
         , extractvalue (value (t), 'transfers/fromAccount/acctId')      
    BULK COLLECT INTO docExtTable
   FROM TABLE (XMLSEQUENCE (EXTRACT (response, '//transferSearchResponse/transfers'))) t;

   OPEN doc_result_cursor FOR 
        SELECT * FROM TABLE (CAST (docExtTable AS DOC_TABLETYPE));

   COMMIT;
END; 
```

我的问题是：为什么我们需要`CAST (docExtTable AS DOC_TABLETYPE`什么时候`docExtTable`已经被定义为`DOC_TABLETYPE`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:57:53.233

但是我们需要 CAST 吗？

当 Oracle 在 Oracle 8.0 中首次引入 TABLE() 函数时，CAST 是强制性的。但是，Oracle 不久前就认识到了重言式，并且 CAST 在以后的版本中通常是可选的。

您已将问题标记为`[oracle11g]`。那么如果删除 CAST 会发生什么？也就是说，我希望这可以工作：

```
from table (SELECT * FROM docExtTable); 
```

# string - 如何在VB6中访问字符串的单个字符

> ID：11990405
> 
> 赞同：5
> 
> 时间：2012-08-16T15:17:26.417
> 
> 标签：string, vb6

考虑以下 VB 代码：

```
 Dim fooBar As String
    fooBar = "Foo Bar"

    Dim q As String
    q = fooBar(0) 
```

在 VB.Net 中，这会编译并且我的**q**字符串变量设置为字母“F”，但是在 VB6 中我得到一个编译错误，因为编译器需要一个数组。

我在 VB6 中的一个场景中，能够以这种方式处理字符串非常有用，例如通过索引器或类似的东西访问单个字符。

如何在 VB6 中访问字符串的单个字符？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T15:19:30.647

使用`Mid`：

```
q = Mid(fooBar, 1, 1) 
```

# apache - .htaccess 不会根据需要重写

> ID：11990407
> 
> 赞同：0
> 
> 时间：2012-08-16T15:17:33.420
> 
> 标签：apache, .htaccess

我的 .htaccess 并没有像我想要的那样重写干净的 URL。它没有按照指示去做，而是给了我一个 404 错误！

我要这个：

```
http://localhost/somepossiblepath 
```

被路由到这个：

```
http://localhost/index.php?route=somepossiblepath 
```

目前，这是我的 htaccess 文件：

```
RewriteEngine On

RewriteCond ${REQUEST_FILENAME} !-d
RewriteCond ${REQUEST_FILENAME} !-f
RewriteCond ${REQUEST_FILENAME} !-l

RewriteRule ^/(.+)$ /index.php?route=$1 [QSA,L] 
```

我有一个当前的脚本测试，看看它是否会起作用：

```
<?php echo $_REQUEST['route'] ?> 
```

当我输入时它会起作用，但当我`/index`输入其他任何东西时它不会起作用。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:31:42.440

在 .htaccess 文件中，规则正则表达式匹配的字符串已剥离基本目录（`/`在 a 的情况下`DOCROOT/.htaccess`）。所以`^/(.*)$`不会匹配。例如，您需要的是：

```
RewriteEngine On

RewriteRule ^index\.php - [L]

RewriteCond ${REQUEST_FILENAME} !-d
RewriteCond ${REQUEST_FILENAME} !-f
RewriteCond ${REQUEST_FILENAME} !-l

RewriteRule ^(.+)$ /index.php?route=$1 [QSA,L] 
```

# vba - 在每一行之前插入一列并复制标题

> ID：11990409
> 
> 赞同：0
> 
> 时间：2012-08-16T15:17:36.430
> 
> 标签：vba, excel

我是这里的一个极端新手，可能是一个非常基本的问题，所以请多多包涵。

我有一个看起来像这样的工作表：

```
product ID  desc    color   length  width
2           a       black   5   
3           b               4       7
4           c       brown   8       9
5           d       red             7
6           e                       4
7           f       pink    6       1 
```

我正在尝试编写一个宏，该宏将在每个属性（例如 desc、color 等）之前插入一列，然后用其后面的列的标题填充该列。

结果应该是这样的：

```
product ID       desc       color         length        width
2           desc a    color black  length 5       width 
3           desc b    color        length 4       width 7
4           desc c    color brown  length 8       width 9
5           desc d    color red    length         width 7
6           desc e    color        length         width 4
7           desc f    color pink   length 6       width 1 
```

任何帮助，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:08:19.287

只要您的工作表如单元格所示开始，这将起作用`A1`。

我沿着迭代标题范围的路径走了很长一段时间，但无法使其工作，因为向左插入一列会将整个标题范围移动到一个以上或在范围中添加一个空列，然后进行下一次迭代of`For Each`将使用新插入的空白列...

我不喜欢你必须如何使用计数器来使用`colCntr - 1`循环内部的业务，但如果你仔细阅读并设想`Range`偏移量，这将是有意义的（最重要的是，获得预期的结果！）

长话短说，使用计数器和向后迭代只需要大约一半的代码。:) 可能有一种不那么“循环”的方式来做到这一点，但我被难住了：

```
Sub SpecialColumnFormatting()
Dim rng As Range, rngCol As Range
Dim lastCol As Integer, colCntr As Integer
Dim lastRow As Long

'get last row and column
lastRow = Range("A1").End(xlDown).Row
lastCol = Range("A1").End(xlToRight).Column

'grab last col #
colCntr = lastCol

'have to loop backwards
Do Until colCntr = 1

    'insert a column to left
    Range("A1").Offset(0, colCntr - 1).EntireColumn.Insert (xlShiftToRight)

    'you may have to pick this one apart a bit to see what I'm doing
    Set rngCol = Range(Range("A1").Offset(1, colCntr - 1), Range("A1").Offset(lastRow - 1, colCntr - 1))

    For Each rng In rngCol

        rng = Range("A1").Offset(0, colCntr).Text

    Next rng

'decrement
colCntr = colCntr - 1
Loop

End Sub 
```

# r - 使用 R 的 nls，如何定义系数的单个公式/约束？

> ID：11990410
> 
> 赞同：-1
> 
> 时间：2012-08-16T02:47:14.653
> 
> 标签：r, nls

我有一个模型要通过非线性最小二乘法进行估计。该模型以这样一种方式指定，即我有一个具有 5 个系数的主公式，这些系数又具有自己的公式，取决于总共四个系数。第一个公式本身是线性的，它包含系数的各个公式使模型非线性。

R 的 nls 函数要求没有系数的公式。我不知道如何定义它们。

为了让事情变得清晰，我将在下面发布具体公式。如果涉及任何代数，我将使用“_”作为索引，使用“{}”括号作为此类索引的内容。语法非常类似于 TEX，变量名只是单个字符，所以我没有费心在乘法发生的地方放置“*”。

```
p_t = β_1p_{t-1} + β_2p_{t-2} + β_3d_{t-1} + β_4d_{t-2} + β_5d_{t-3} + γ

β_1 = 2 - b - c 
β_2 = -(1-c)(1-b) 
β_3 = cδ + bα 
β_4 = -cδ(1-b) - bα(2-c) 
β_5 = bα(1-c) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T04:21:01.807

“R的nls函数要求没有系数的公式”是什么意思！在 R 中，系数将由 nls 估计。我认为你仍然可以通过使用 nls 来做到这一点。用 b、c、$\alpha$、$\delta$ 的形式写下你的公式，并使用列表为它们写一些起点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T17:53:01.193

我告诉你原理。我不确定我使用了正确的方程式，但是由于您写了大约 4 个参数，我认为这就是您的意思。

我没有检查错误并将其留给您。您还应该进行非线性回归时应该使用的常规诊断。

```
fitfun<-function(p,d,a,b,c,d1){    
  beta_1 <- 2-b-c 
  beta_2 <- -(1-c)*(1-b) 
  beta_3 <- c*d1 + b*a 
  beta_4 <- -c*d1*(1-b) - b*a*(2-c) 
  beta_5 <- b*a*(1-c) 
  res <- as.numeric(filter(p,c(0,beta_1,beta_2),sides=1)) + #use filter to calculate lagged values
         as.numeric(filter(d,c(0,beta_3,beta_4,beta_5),sides=1)) + c
  res[-(1:3)] #to remove NAs
  }

pfit<-df$p0[-(1:3)]
fit<-nls(pfit ~ fitfun(p0,d1,a,b,c,d),data=df,start=list(a=2,b=1,c=1,d=1))
summary(fit)

 Formula: pfit ~ fitfun(p0, d1, a, b, c, d)

Parameters:
  Estimate Std. Error t value Pr(>|t|)    
a  0.13858    0.62064   0.223    0.823    
b  0.21101    0.01594  13.237   <2e-16 ***
c  1.41492    0.03015  46.929   <2e-16 ***
d  0.09838    0.09098   1.081    0.280    
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 6.799 on 1043 degrees of freedom

Number of iterations to convergence: 7 
Achieved convergence tolerance: 5.107e-06 
```

# 编辑

我很快展示了它是如何`filter`工作的。

```
x <- 1:10
#[1]  1  2  3  4  5  6  7  8  9 10
filter(x,c(0,1),sides=1) #1*x_{i-1}
#[1] NA  1  2  3  4  5  6  7  8  9
filter(x,c(0,0,2),sides=1) #2*x_{i-2}
#[1] NA NA  2  4  6  8 10 12 14 16
filter(x,c(1,2,3),sides=1) #1*x_i + 2*x_{i-1} + 3*x_{i-2}
#[1] NA NA 10 16 22 28 34 40 46 52 
```

`filter`是一个时间序列函数，因此非常快。

# jquery - 加载php文件然后运行函数

> ID：11990419
> 
> 赞同：0
> 
> 时间：2012-08-16T15:17:59.193
> 
> 标签：jquery

我正在尝试将一些参数传递给 php 文件，然后将其加载到我的页面上。在我这样做之后，我需要运行一个函数。我的问题是 jQuery 在加载 php 文件之前运行该函数。我可以通过使用为我的函数添加延迟来使其工作

```
 setTimeout(function() {
        addSet(id);
    }, 500); 
```

相反，我希望它在我的加载功能完成运行时运行。我试过使用 $('#exer'+id).ready(function() { 没有运气。

这是我的代码

```
function addExercise(id, name, type, factor, desc) {
        $("<div id='exer"+id+"' class='exer'>lala</div>").insertAfter("#beforeExercises");
        var php_file = "modules/ExerciseSearchTest2/addExercise.php?id="+ id + "&name=" + name + "&type=" + type + "&factor=" + factor + "&desc=" + desc;
        $("#exer"+id).load(encodeURI(php_file));

        addSet(id);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:19:17.633

`.load()`接受仅在加载完成后触发的回调函数。

```
$("#exer"+id).load(encodeURI(php_file), function(){
  //this is the callback function, run your code here.
  addSet(id);
}); 
```

# java - 生成的类中的空值

> ID：11990422
> 
> 赞同：0
> 
> 时间：2012-08-16T15:18:11.080
> 
> 标签：java, axis2, axis

我正在使用 Apache Axis2 v 1.5.6 和 Axis1 v1.2.1

我正在使用它们从 Web 服务 .wsdl 生成 Java 对象。

然后我正在访问这些对象的值。例如

```
recevedObject.getFooInfo().getFooInfoGroup1().getTheValue(). 
```

我应该在这样的情况下执行空检查吗？或者 Axis 是否确保所有 Object 字段都不为空？`getTheValue()`如果返回就好了`null`。但我不想因为`getFooInfo()`返回而得到空指针异常`null`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:59:10.597

基本上，Axis 有助于将 SOAP(XML) 响应转换为对象结构，并且此 SOAP 元素是使用 XSD 定义的。因此，获得 NPE 取决于您在 XSD 中的 XML 元素声明，这将成为响应验证的来源。例如，如果表示 XML/SOAP 响应消息中的 FooInfo 元素的 getFooInfo 元素，如果它是 nil-able，那么在 getFooInfo() 时您可能会获得 NPE，如果它不是 nil-able，那么您将不会获得 NPE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:34:24.080

如果您不应该在 XML 中接收到 fooInfo 的空值并且在 XSD 中定义，那么您应该激活 XSD 中的 XML 验证。

例如，您可以通过*启用模式验证的*选项将其与 CXF 一起使用。我猜 AXIS 中可能有类似的东西。

# gnu-screen - 屏幕启动命令

> ID：11990429
> 
> 赞同：0
> 
> 时间：2012-08-16T15:18:26.650
> 
> 标签：gnu-screen

我想`screen`设置为在启动时打开一组特定的文件进行编辑。

我想有这样的东西`~/.screenrc`：

```
chdir /home/andrew/scripts/
screen -t scripts gvim script1.sh
chdir /home/andrew/scratch/
screen -t test 
```

在打开和分离后，我似乎无法`gvim`打开任何文件，或者我的屏幕无法保持活动状态。`gvim`

# asp.net-mvc - 在 MVC 页面中隐藏内容

> ID：11990430
> 
> 赞同：1
> 
> 时间：2012-08-16T15:18:28.943
> 
> 标签：asp.net-mvc, razor

我是 MVC 和剃须刀的新手。我有一个 MVC 4 应用程序。在 Shared -> _Layout.cshtml 页面中，如果用户不在允许列表中，我想隐藏一些内容。我应该如何进行？

我尝试使用类似的东西，但是当我查看运行代码时， <% %> 之间的部分被注释掉了。

```
<div>
    <a href="../Home/Index" style="color: White;">Home</a>
    <% if(*a condition*) { %>
        <a href="../Admin/Index" style="color: White;">Admin</a>
    <% } %>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:20:11.237

如果您使用的是剃须刀，您只需要使用`@`：

```
<div>
    <a href="../Home/Index" style="color: White;">Home</a>
    @if(1==2) {
        <a href="../Admin/Index" style="color: White;">Admin</a>
    }
</div> 
```

但是，我建议您也考虑使用[ActionLink](https://stackoverflow.com/questions/200476/html-actionlink-method)，而不是硬编码控制器路由

# vba - 错误消息：您无法添加或更改记录，因为 header_generator 中需要记录

> ID：11990431
> 
> 赞同：0
> 
> 时间：2012-08-16T15:18:33.640
> 
> 标签：vba, database, ms-access, relationship, ms-access-2007

嘿，伙计们，我一直在网上看，看到很多关于级联删除、关系和执行引用完整性的评论。但是我仍然找不到我出错的地方，希望有人比我快，顺便说一下我是 Access 的新手。所以这是我的关系图， ![关系](../Images/45e3cab2df0a57f86d5469dade80850d.png) 所以基本上我有很多表主表是包含 HG_ID 的 Header_Generator 并将其链接到所有其他表，所以我的主要目标是如果我删除一个 HG_ID，它将在任何地方删除与该字段相关的记录。说我创建了两个表单，父表单包含 HG_ID 创建和包含 HEADER_ID 的子表单，所以当我在父表单中并且我决定手动删除此记录并完全重定向到另一个表单时，我没有收到任何错误消息并且一切都按假设进行。但是，我为此手动步骤创建了一个按钮，但是自从我创建了这个按钮后，我收到了我之前提到的错误消息

```
 You cannot add or change a record because a record is required in header_generator 
```

如果我避开这条消息，我可以看到代码确实有效，它只是那个错误消息太烦人了，所以这是我在 VBA 中的编码

```
'Delete current data and redirect to home screen.
 Private Sub DeleteEntry_Click()

'Promt
 strPrompt = "All windows created will be delete, are you sure you want to delete this entry?"
'Dialog's Title
 strTitle = "Warning"
'Display MessageBox
 iRet = MsgBox(strPrompt, vbYesNo + vbCritical, strTitle)

If iRet = 6 Then

    Me.USER.SetFocus
    DoCmd.RunCommand acCmdSelectRecord
    DoCmd.RunCommand acCmdDeleteRecord
    DoCmd.Requery
    DoCmd.RunCommand acCmdSaveRecord
    DoCmd.Close

    DoCmd.OpenForm "HOME", OpenArgs:=Permissions & "|" & UserName & ""
  Exit Sub

End If 
```

结束子

总的来说，我可能是一个丢失的案例，所以请帮助兄弟！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T03:16:40.797

兄弟们不要让兄弟们雪花，dawg...查看星型模式...您的查询会飞起来，维护会更容易

好的起点： [http ://docs.oracle.com/cd/B10501_01/server.920/a96520/logical.htm#97636](http://docs.oracle.com/cd/B10501_01/server.920/a96520/logical.htm#97636)

与 Access 没有直接关系，但您可以应用相同的概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:20:10.583

弄清楚它不是关系问题，而是父子表单保存的问题，在焦点解决问题之前输入 Me.Refresh

# javascript - 后来添加的节点不附加到 jQuery UI 函数

> ID：11990434
> 
> 赞同：0
> 
> 时间：2012-08-16T15:18:37.477
> 
> 标签：javascript, jquery, jquery-ui

我目前正在设计一个单页应用程序，并希望使用 jQuery UI。不幸的是，jQuery UI 没有将其功能附加到动态添加的元素上。因此，在加载页面后插入一个 jQuery UI 按钮（具有所有必要的类）会删除所有功能（例如，在悬停时更改颜色）。jQuery 已弃用的 live() 方法应该能够避免这种情况，但显然 jQuery UI 不使用它。

我希望你有一个想法！:)

非常感谢！

狮子座

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:37:09.187

您可以在添加新元素的代码中添加事件。有关示例，请参见此小提琴。

[http://jsfiddle.net/uHEre/3/](http://jsfiddle.net/uHEre/3/)

此外，正如小提琴评论`.on()`中所述，新的`.live()`. 见[http://api.jquery.com/on/](http://api.jquery.com/on/)

# c - 没有宏的静音 printf

> ID：11990436
> 
> 赞同：0
> 
> 时间：2012-08-16T15:18:41.020
> 
> 标签：c

有没有一种方法可以在不使用任何宏的情况下有条件地使所有 printf 语句静音？我想在不触及现有代码的情况下完成静音，但在我的模块中添加一行，这将简单地禁用源代码中已经存在的所有 printf。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:23:22.483

如果您想取消所有输出到`stdout`via `printf`, `puts`,`putchar`等，您可以使用[`freopen(3)`](http://linux.die.net/man/3/freopen)将其重定向到一个位桶，例如：

```
// On Unix and Unix-like systems:
freopen("/dev/null", "w", stdout);
// On Windows:
freopen("NUL", "w", stdout); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T15:22:49.627

在 Linux、BSD 或其他 Unix 上，您可以创建一个共享库，它提供自己的`printf`并包装 C 库`printf`。

然后你可以在 C 库之前使用`LD_PRELOAD=mylib.so ./myprogram`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:21:32.020

通过将其添加到源代码中，将库 printf 替换为您自己的实现：

```
int printf(const char * restrict format,...) { return 0; } 
```

# php - displaying result of HTML form on with js function

> ID：11990437
> 
> 赞同：0
> 
> 时间：2012-08-16T15:18:45.513
> 
> 标签：php, javascript, html

I know that you cannot really have variables in html, but I'm wondering if this is possible. I have searched around and cannot find anything that clearly answers my question. Hopefully someone hear can point me in the right direction. Here's what I have in mind:

```
<!DOCTYPE html>
<html>
<body>

<input type="text" name="test">
<input type="submit" onclick="myFunction(test)">
<script type="text/javascript">
function myFunction(test)
{
alert("Welcome " + test);
}
</script>

</body>
</html> 
```

Would this work or something like it? Thanks, Sam

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:23:41.727

If you mean using the contents of an input as a variable:

```
<!DOCTYPE html>
<html>
<body>

<input type="text" id="some_id" name="test">
<input type="submit" onclick="myFunction(document.getElementById('some_id').value)">
<script type="text/javascript">
function myFunction(test)
{
alert("Welcome " + test);
}
</script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:24:27.677

我从你的问题中了解到的是你想访问`<input>`并发送它来`function(test)` 试试这个：

```
<input type="text" name="test" id="test"> <-- Give ID here
<input type="submit" onclick="myFunction(test)"> <--Send same ID here
<script type="text/javascript">
function myFunction(test)
{
alert("Welcome " + test.value);
}
</script>

</body> 
```

# .net - IsNumeric equivalent in Linq

> ID：11990438
> 
> 赞同：2
> 
> 时间：2012-08-16T15:18:49.483
> 
> 标签：.net, sql, linq, linq-to-sql, isnumeric

I need to use a function in Linq that equivalent to IsNumeric function in SQL. What I am trying to do is get codes that matches a common pattern. The codes should be unique and they are generated by code. The pattern is like this:

ABCD0000001 ABCD0000002 ...

But then user can manuplate the code and enter any character in anywhere in generated code (of course then I check the uniqueness of the code afterwards, but that is out of interest). So the records in database can be

ABCD0000001 ABCD00000T01 ABCDT0000002 ..and so on.

What I want is getting the last programmatically generated (not manipulated by user) codes and retrieve the last numeric digits, so that I can add it by 1 resulting in unique code. (So the last autogenerated code is ABCD0007865 then the new code should be ABCD0007866)

I tried

```
var lastCode = (
    from c in sedc.Codes
    where SqlMethods.Like(c.Code, "ABCD" + "%")
    where Int64.TryParse(c.Code.Substring(3,10),out t)
    orderby c.Code descending
    select c)
    .FirstOrDefault(); 
```

but this code throws an exception saying NotSupportedException: Method 'Boolean TryParse(System.String, Int32 ByRef)' has no supported translation to SQL."

What should I do? Is my way too complicated? Is there a smarter way? Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:29:50.927

这应该有效：

```
var lastCode = (
    from c in sedc.Codes
    where SqlMethods.Like(c.Code, "ABCD[0-9][0-9][0-9][0-9][0-9][0-9][0-9]")
    orderby c.Code descending
    select c)
    .FirstOrDefault(); 
```

# java - validating IP address with existing range of ip address

> ID：11990440
> 
> 赞同：0
> 
> 时间：2012-08-16T15:19:03.380
> 
> 标签：java

I need to check whether the ip address resides within the range of IP.

For example 10-20.3.5.6 contains IP as

10.3.5.6 11.3.5.6 . . . 20.3.5.6

I need to know the following things:

1) 1-10.0-255.0.0-255 is the IP range I have in DB. I need to check if the IP "10.0.7.8" falls in the above specified range.

2) Consider another scenario is 10-20.10-20.10-20.10-20 I have in DB. I need to check if any one of the IP in range 10-20.10.10-30.10-50 falls in above range?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:37:13.163

让我们尝试这样的事情......

```
 ArrayList<String> IPlist = getIPTable(); //IPTable has entries
 Pair IPranges[4] = new Pair[4]();

 //Pair isa class that holds two things, like numbers;

 //parse your DB entries into the IPranges
 IPranges[0].low = 10; IPranges[0].hi = 20;
 IPranges[1].low = 3; IPranges[1].hi = 3;
 IPranges[2].low = 5; IPranges[2].hi = 5;
 IPranges[3].low = 6; IPranges[3].hi = 6;

 for(String IP : IPlist)
 { 
      String octet[4]; //read the octets in the String[] octet using substring();
      boolean continue = true; 
      for(int i = 0 ; i < 4 && continue; i++)
          if(Integer.parseInt(octet[i]) >= IPtable[i].low && Integer.parseInt(octet[i]) <= IPtable[i].hi)
          {
              //this is good, do stuff here
          }
          else
             continue = false;  //the IP failed to pass the filter, no need to process the rest of it
         //safely add the IP to the lsit of valid IPs.
       validIP.add(IP);
}

private class Pair
{
    public int low, hi;

    public Pair(int low, int hi)
    {
        this.low = low; this.hi = hi;
    }
} //feel free to extend this class to do the checking for you. 
```

# c++ - How to disable dialog "switch to"-"retry"-"cancel"

> ID：11990441
> 
> 赞同：3
> 
> 时间：2012-08-16T15:19:08.823
> 
> 标签：c++, com, atl, cross-process

Comunicate between two processes， often pop up boring dialog "This action cannot be completed because the other application is busy.  Choose 'Switch To' to activate the busy application and correct the problem"

Then it offers 3 buttons:  Switch To..., Retry and Cancel.

Could I disable the dialog anyway?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T07:04:04.237

当进程间通信调用没有收到服务器的响应并且超时（服务器端操作耗时太长）时，消息框显示在调用方。

如果服务器和客户端都是您的代码，您可以将其重构为以非阻塞方式运行，例如第一个方法调用开始操作并立即返回，然后客户端在完成时轮询更新，或接收回调。否则，在 中`MFC`，您可以使用 禁用此对话框[`COleMessageFilter::EnableBusyDialog`](http://msdn.microsoft.com/en-us/library/4f799h96%28v=vs.100%29)，请参阅：[从 C++ 设置 OLE 请求超时](https://stackoverflow.com/questions/282091/set-ole-request-timeout-from-c)

# asp.net - Why can I see login credentials sent via HTTPS on my proxy server?

> ID：11990444
> 
> 赞同：2
> 
> 时间：2012-08-16T15:19:10.877
> 
> 标签：asp.net, https, proxy

I've got a login page that uses HTTPS, however when I submit the credentials and intercept the request with the webscarab proxy sever, I can see the credentials in plain text, similar to the the second example in this OWASP [article](https://www.owasp.org/index.php/Testing_for_credentials_transport_%28OWASP-AT-001%29)

Am I misunderstanding how HTTPS/Webscarab works? If I am intercepting a request being sent via HTTPS, shouldn't the login credentials be encrypted in the request by the time the proxy server intercepts them?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:34:52.930

据我了解，WebScarab 旨在用作*显式*代理，即必须有目的地配置浏览器以连接到它。此时，SSL 握手发生在浏览器和 WebScarab 之间，因此显然 WebScarab 可以以明文形式读取数据（您可以将其视为指示浏览器将 WebScarab 作为每个 HTTP 请求的目标主机）

当您不自己设置代理时，情况会有所不同。在这种情况下，SSL 握手是在您和*目标*主机之间进行的，因此无论您的 HTTP 请求经过多少中间代理，都只能由正确的代理解密

# sql-server - 如何安全地将 NVARCHAR 转换为 MONEY

> ID：11990447
> 
> 赞同：3
> 
> 时间：2012-08-16T15:19:12.323
> 
> 标签：sql-server, sql-server-2008, tsql, type-conversion

我有一个现有的表，其类型为 'price_info' 列`NVARCHAR`。我想添加一个类型为“price”的新列，`MONEY`并（在可能的情况下）将“price_info”列的内容转换/复制到其中。

如果“price_info”仅包含数字数据，则可以轻松转换该值。但当然 'price_info' 也可以包含无法转换为类型的数据，`MONEY`在这种情况下会发生错误。

有没有办法只复制转换`MONEY`成功的值，而忽略所有其他行（或在这些情况下将“价格”列设置为 0）？

例如，我想要的是这样的（伪代码）：

```
update products set price = some_conversion_function(money, price_info, 0) 
```

（其中 0 是转换失败时使用的默认值）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:28:19.897

如果您只需要通过脚本执行此操作，则可以运行 2 次更新。

更新 1：运行更新并设置 ISNUMERIC 为 true 的价格

```
update products 
set price = convert(money, price_info)
where ISNUMERIC(price_info) = 1 
```

更新 2：运行更新以将价格设置为 0，其中 ISNUMERIC 为假。

```
update products 
set price = 0
where ISNUMERIC(price_info) = 0 
```

您可以在此处获取有关 ISNUMERIC 的文档[http://msdn.microsoft.com/en-us/library/ms186272.aspx](http://msdn.microsoft.com/en-us/library/ms186272.aspx)

# javascript - 变量看不到

> ID：11990458
> 
> 赞同：2
> 
> 时间：2012-08-16T15:19:56.370
> 
> 标签：javascript, jquery, closures

抱歉，这可能是一个简单的问题。我正在尝试使用 jQuery 构建我的第一个导航。这个想法是，在按钮悬停时，只要不是“选定”按钮，背景颜色和文本颜色就会发生变化。除了文本颜色之外，我所有这些工作都很好。与 jQuery 一样，它看不到我的循环变量：

```
function testIndex(navIndex){
        for(i=0; i<=4; i++){
            if(i != navIndex){
                $('#nav a:eq('+i+')').hover(function(){
                    $(this).fadeTo('fast', 0.3, function(){
                        $(this).css('background-color','#ff3520');
                        $('#nav li:eq('+i+')').css('color', '#ffffff');
                    }).fadeTo('fast', 1);
                },
                function(){
                    $(this).fadeTo('fast', 0.3, function(){
                        $(this).css('background-color', '#e8e8e8');
                        $('#nav li:eq('+i+')').css('color', '#ff3520');
                    }).fadeTo('fast', 1);
                });
            };  
        };
    }; 
```

在

```
$('#nav li:eq('+i+')').css('color', '#ff3520'); 
```

'i' 变量看不到。我已经通过插入我自己的变量对其进行了测试，它可以工作。

有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T15:22:28.443

因为您处于循环中，所以需要一个变量范围来保持对`i`处理程序的引用。

```
function testIndex(navIndex){
    $.each(Array(5), function(i) {
        if(i != navIndex){
            $('#nav a:eq('+i+')').hover(function(){
                $(this).fadeTo('fast', 0.3, function(){
                    $(this).css('background-color','#ff3520');
                    $('#nav li:eq('+i+')').css('color', '#ffffff');
                }).fadeTo('fast', 1);
            },
            function(){
                $(this).fadeTo('fast', 0.3, function(){
                    $(this).css('background-color', '#e8e8e8');
                    $('#nav li:eq('+i+')').css('color', '#ff3520');
                }).fadeTo('fast', 1);
            });
        }
    });
} 
```

在 JavaScript 中调用函数会产生变量作用域，所以我使用`$.each`了 for 循环，因为它为每个数组索引调用函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:45:43.447

已经解释了您的代码存在什么问题（范围`i`）并提供了解决方案。也看看这个相关的问题：[JavaScript 闭包内循环 - 简单实用的例子](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)。

但是，您可以以更面向 jQuery 的方式以不同的方式解决它，根本不使用索引，而是使用 DOM 遍历。我假设您的 HTML 看起来与此类似：

```
<ul id="#nav">
    <li><a>...</a></li>
    <li><a>...</a></li>
</ul> 
```

即`a`元素是`li`你想要改变的后代。

然后，您可以使用以下代码实现相同的目的：

```
function testIndex(navIndex){
    $('#nav a').slice(0,5).not(function(i) { 
        return i === navIndex;
    }).hover(function(){
        $(this).fadeTo('fast', 0.3, function(){
            $(this).css('background-color','#ff3520')
              .closest('li').css('color', '#ffffff');
         }).fadeTo('fast', 1);
    }, function(){
        $(this).fadeTo('fast', 0.3, function(){
            $(this).css('background-color', '#e8e8e8');
              .closest('li').css('color', '#ff3520');
        }).fadeTo('fast', 1);
    });
} 
```

# extjs4.1 - 将自定义组件添加到 EXTJS 图表

> ID：11990462
> 
> 赞同：3
> 
> 时间：2012-08-16T15:20:23.037
> 
> 标签：extjs4.1

我需要在 ExtJS 4 图表区域添加一个小按钮来显示/隐藏图例。它应该直接在图表画布上，而不是在画布之外的额外面板上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T01:37:48.333

我不必专门这样做，但我必须做类似的事情。

您不能真正将 ExtJS 按钮添加到图表画布，因为画布本身的任何内容都必须是绘制的组件。我想你可以画自己的按钮......

但是更容易（也更统一）只需添加一个文本精灵“显示图例”并给它一些侦听器以使其表现得像按钮一样（就像内置图例处理点击的方式一样）。即当你将鼠标悬停在它上面时，它会变粗，当你点击它时，你可以显示/隐藏图例。

我没有其他代码，但这应该给你一个粗略的想法：

```
var chart = Ext.create('Ext.chart.Chart', {
    style: 'background:#fff',
    theme: 'MyTheme',
    // other configs like axes and series...
    items: [{
        type: 'text', // i.e. a text sprite
        text: 'Show Legend',
        font: '14px Arial',
        x: 300, // left location
        y: 10, // top location
        listeners: {
            mouseover: function() {
                // make "Show Legend" bold
            },
            mousedown: function() {
                chart.legend = true;
                chart.redraw();
            }
        }
    }]
}); 
```

# r - 在 `NA` 值的情况下，将来自`lm()` 的拟合值与数据框匹配

> ID：11990463
> 
> 赞同：5
> 
> 时间：2012-08-16T15:20:28.117
> 
> 标签：r, merge, lm

这一定是一个非常微不足道的问题，但我正在努力寻找解决方案。这是我的问题：

**这行得通**

```
#I run a simple regression
 data(mtcars)
 dataf <- mtcars
 summary(fit1 <- lm(mpg ~ wt,  data=dataf))

#Then I merge the fitted values with the data frame
 dataf$fit <- fitted(fit1) 
```

**这（当然）不起作用**

```
 dataf[2,]<-NA
 summary(fit2 <- lm(mpg ~ wt,  data=dataf))
#of course the NA value reduces my lm output
 dataf$fit2 <- fitted(fit2)

Error in `$<-.data.frame`(`*tmp*`, "fit2", value = c(23.3189679389035,  : 
replacement has 31 rows, data has 32 
```

但是我如何让第二个例子起作用呢？`row.names`我通过in尝试了一个解决方案，`model.matrix()`但是当我在回归中包含某些因素时这不起作用（如果我理解正确，这已被报告为[错误）。](https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=14992)谢谢你的热心帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T15:30:15.443

经过一番搜索，我想我找到了另一种选择

```
dataf[2,]<-NA
summary(fit2 <- lm(mpg ~ wt,  data=dataf, na.action="na.exclude"))
dataf$fit2 <- fitted(fit2) 
```

应该做的伎俩。正确的？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T15:28:22.677

```
dataf$fit2 <- NA
dataf$fit2[!is.na(dataf$wt)] <- fitted(fit2) 
```

# vba - VBA 将工作表复制到工作簿末尾（带有隐藏工作表）

> ID：11990465
> 
> 赞同：31
> 
> 时间：2012-08-16T15:20:37.030
> 
> 标签：vba, excel

我想复制一张工作表并将其添加到所有当前工作表的末尾（无论工作表是否隐藏）。

```
Sheets(1).Copy After:=Sheets(Sheets.Count)
Sheets(Sheets.Count).name = "copied sheet!" 
```

这工作正常，除了当有隐藏工作表时，新工作表仅插入最后一个可见工作表之后，因此该`name`命令重命名错误工作表。

我尝试了以下变体来获取对新复制的引用，`WorkSheet`但没有一个是成功和/或有效的代码。

```
Dim test As Worksheet
Set test = Sheets(1).Copy(After:=Sheets(Sheets.Count))
test.Name = "copied sheet!" 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-16T15:23:15.700

Try this

```
Sub Sample()
    Dim test As Worksheet
    Sheets(1).Copy After:=Sheets(Sheets.Count)
    Set test = ActiveSheet
    test.Name = "copied sheet!"
End Sub 
```

Looking back at this, a better approach would be

```
Set test = Sheets(Sheets.Count) 
```

As correctly mentioned in the comments below, there are lot of things that needs to be considered when copying and renaming a sheet. Would recommend checking the other answers as well.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-14T09:17:04.353

Make the source sheet visible before copying. Then copy the sheet so that the copy also stays visible. The copy will then be the active sheet. If you want, hide the source sheet again.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-07T20:01:03.737

在将工作表复制到另一个工作簿时，我遇到了类似的问题。我更喜欢避免使用“activesheet”，因为它在过去给我带来了问题。因此，我编写了一个函数来根据我的需要执行此操作。我在这里为那些像我一样通过谷歌到达的人添加它：

这里的主要问题是将可见工作表复制到最后一个索引位置会导致 Excel 将工作表重新定位到可见工作表的末尾。因此，将工作表复制到最后一张可见工作表之后的位置可以解决此问题。即使您正在复制隐藏的工作表。

```
Function Copy_WS_to_NewWB(WB As Workbook, WS As Worksheet) As Worksheet
    'Creates a copy of the specified worksheet in the specified workbook
    '   Accomodates the fact that there may be hidden sheets in the workbook

    Dim WSInd As Integer: WSInd = 1
    Dim CWS As Worksheet

    'Determine the index of the last visible worksheet
    For Each CWS In WB.Worksheets
        If CWS.Visible Then If CWS.Index > WSInd Then WSInd = CWS.Index
    Next CWS

    WS.Copy after:=WB.Worksheets(WSInd)
    Set Copy_WS_to_NewWB = WB.Worksheets(WSInd + 1)

End Function 
```

要将此功能用于原始问题（即在同一工作簿中），可以使用类似...

```
Set test = Copy_WS_to_NewWB(Workbooks(1), Workbooks(1).Worksheets(1))
test.name = "test sheet name" 
```

* * *

EDIT 04/11/2020 from –user3598756 添加对上述代码的轻微重构

```
Function CopySheetToWorkBook(targetWb As Workbook, shToBeCopied As Worksheet, copiedSh As Worksheet) As Boolean
    'Creates a copy of the specified worksheet in the specified workbook
    '   Accomodates the fact that there may be hidden sheets in the workbook

    Dim lastVisibleShIndex As Long
    Dim iSh As Long

    On Error GoTo SafeExit

    With targetWb
        'Determine the index of the last visible worksheet
        For iSh = .Sheets.Count To 1 Step -1
            If .Sheets(iSh).Visible Then
                lastVisibleShIndex = iSh
                Exit For
            End If
        Next

        shToBeCopied.Copy after:=.Sheets(lastVisibleShIndex)
        Set copiedSh = .Sheets(lastVisibleShIndex + 1)
    End With

    CopySheetToWorkBook = True
    Exit Function

SafeExit:

End Function 
```

除了使用不同的（更具描述性的？）变量名之外，重构主要处理：

1.  将函数类型转换为布尔值，同时在函数参数中包含返回的（复制的）工作表列出这个，让调用子处理可能的错误，比如

    ```
     Dim WB as Workbook: Set WB = ThisWorkbook ' as an example
     Dim sh as Worksheet: Set sh = ActiveSheet ' as an example
     Dim copiedSh as Worksheet
     If CopySheetToWorkBook(WB, sh, copiedSh) Then
         ' go on with your copiedSh sheet
     Else
         Msgbox "Error while trying to copy '" & sh.Name & "'" & vbcrlf & err.Description
     End If 
    ```

2.  让 For - Next 循环从最后一个工作表索引向后步进并在第一个可见工作表出现时退出，因为我们在“最后一个”可见工作表之后

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-24T10:47:42.223

如果您使用基于@Siddharth Rout 的代码的以下代码，则重命名刚刚复制的工作表，无论它是否被激活。

```
Sub Sample()

    ThisWorkbook.Sheets(1).Copy After:=Sheets(Sheets.Count)
    ThisWorkbook.Sheets(Sheets.Count).Name = "copied sheet!"

End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-22T14:37:17.207

当您要复制名为“mySheet”的工作表并使用 .Copy After:= 时，Excel 首先将复制的工作表命名为完全相同，并简单地添加“(2)”，使其最终名称为“mySheet (2)”。

隐藏与否，无所谓。它用 2 行代码震撼，在工作簿的末尾添加复制的工作表！！！

**例子：**

```
Sheets("mySheet").Copy After:=Sheets(ThisWorkbook.Sheets.count)
Sheets("mySheet (2)").name = "TheNameYouWant" 
```

简单不！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-22T20:34:29.033

**将此代码添加到开头：**

```
 Application.ScreenUpdating = False
     With ThisWorkbook
      Dim ws As Worksheet
       For Each ws In Worksheets: ws.Visible = True: Next ws
     End With 
```

**将此代码添加到末尾：**

```
 With ThisWorkbook
     Dim ws As Worksheet
      For Each ws In Worksheets: ws.Visible = False: Next ws
    End With
     Application.ScreenUpdating = True 
```

**如果您希望超过第一张工作表处于活动状态且可见，请在最后调整代码。如下所示：**

```
 Dim ws As Worksheet
      For Each ws In Worksheets
       If ws.Name = "_DataRecords" Then

         Else: ws.Visible = False
       End If
      Next ws 
```

**为确保新工作表是重命名的工作表，请调整您的代码，如下所示：**

```
 Sheets(Me.cmbxSheetCopy.value).Copy After:=Sheets(Sheets.Count)
     Sheets(Me.cmbxSheetCopy.value & " (2)").Select
     Sheets(Me.cmbxSheetCopy.value & " (2)").Name = txtbxNewSheetName.value 
```

此代码来自我的用户表单，它允许我将具有我想要的格式和公式的特定工作表（从下拉框中选择）复制到新工作表，然后使用用户输入重命名新工作表。请注意，每次复制工作表时，都会自动为其指定旧工作表名称，并指定“(2)”。示例“OldSheet”在复制之后和重命名之前变为“OldSheet (2)”。因此，您必须在重命名之前选择带有程序命名的已复制工作表。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2015-01-16T06:17:02.860

**答：**我找到了这个，想和你分享。

```
Sub Copier4()
   Dim x As Integer

   For x = 1 To ActiveWorkbook.Sheets.Count
      'Loop through each of the sheets in the workbook
      'by using x as the sheet index number.
      ActiveWorkbook.Sheets(x).Copy _
         After:=ActiveWorkbook.Sheets(ActiveWorkbook.Sheets.Count)
         'Puts all copies after the last existing sheet.
   Next
End Sub 
```

但是问题是，我们可以使用它和以下代码来重命名工作表吗？如果可以，我们该怎么做？

```
Sub CreateSheetsFromAList()
Dim MyCell As Range, MyRange As Range
Set MyRange = Sheets("Summary").Range("A10")
Set MyRange = Range(MyRange, MyRange.End(xlDown))
For Each MyCell In MyRange
Sheets.Add After:=Sheets(Sheets.Count) 'creates a new worksheet
Sheets(Sheets.Count).Name = MyCell.Value ' renames the new worksheet
Next MyCell
End Sub 
```

# sql-server - 将 wordpress 站点从一个域移动到同一服务器上的另一个域

> ID：11990466
> 
> 赞同：1
> 
> 时间：2012-08-16T15:20:38.490
> 
> 标签：sql-server, wordpress

我已经在我们的专用服务器上的一个域名上建立了一个 wordpress 网站，用于测试目的。wordpress 站点运行良好，所以现在我想将 wordpress 站点移动到另一个域名，该域名也托管在我们的专用服务器上。

是否像复制 wordpress 站点当前所在的**根**文件夹内容一样简单……然后将该内容粘贴到另一个域名的**根文件夹中？**

所以只是为了让事情更清楚 - 我想将 wordpress 网站从：

Domainname.com 到 otherdomainname.com（两个域都托管在同一台服务器上）。

... 还是有并发症？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:22:11.443

Yes, it should be that simple - or you can just repoint the domains, which is personally what I would do.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:27:41.413

基本上是的。首先使用“工具”部分中的导出功能备份您的内容。还要留意 wp-config.php。如果你没有硬编码任何模板链接，你应该没问题。

# java - Java Web Start 应用程序故障排除和访问日志文件

> ID：11990468
> 
> 赞同：19
> 
> 时间：2012-08-16T15:21:01.143
> 
> 标签：java, jnlp, java-web-start

我正在启动一个突然关闭的 Java Web Start 应用程序。有谁知道如何访问 Java Web Start 的日志。是否有任何已知的原因导致它突然关闭？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-16T17:30:32.930

您应该启用详细的跟踪记录[，如本页所述](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-Desktop/html/plugin.html#gcexdf)。同一页面为您提供日志文件的位置；

> 跟踪文件保存`log`在“Java 部署主目录”文件夹中的目录中。该文件夹的位置特定于您的操作系统：
> 
> *   视窗XP：`%HOME%\Application Data\Sun\Java\Deployment`
> *   视窗 7/Vista：`%APPDATA%\..\LocalLow\Sun\Java\Deployment`
> *   Linux/Solaris：`%HOME%/.java/deployment`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-06-20T15:28:45.103

在我的 Windows 10 计算机上，日志文件位于：

```
C:\Users\<MY USER>\AppData\LocalLow\Sun\Java\Deployment\log 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T15:38:57.417

我不确定它为什么会这样失败，但是您应该能够通过转到`File/Preferences/Advanced`.

您还应该能够`java console`从同一位置启用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-10T08:23:05.407

值太大`-Xmx`是我问题的原因。

减少堆大小解决了它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-17T20:52:18.813

在`-XX:MaxPermSize`您的 JNLP 文件中定义可能会在 Linux 和 Mac 机器上导致此问题。从 JNLP 中删除该论点似乎可以解决问题。

检查[此评论](https://stackoverflow.com/questions/14950624/stringindexoutofboundexcpetion-and-failure-to-launch-jnlp-in-mac-os#comment21057341_14950624)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-22T22:56:46.207

尝试清除 Java 控制面板/常规选项卡中的 Java 临时 Internet 文件夹。完成此操作后，我能够通过调用 jnlp 成功重新启动我的应用程序。

# php - 只返回最后一块内容

> ID：11990469
> 
> 赞同：0
> 
> 时间：2012-08-16T15:21:02.840
> 
> 标签：php, curl, file-get-contents

```
function curl_get($url){
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
        $data = curl_exec($ch);

        print_r(curl_getinfo($ch, CURLINFO_SIZE_DOWNLOAD));

        curl_close($ch);
        return $data;
} 
```

我试图将字符串与此页面“wikipedia.sfstate.us/Scarves”匹配。我使用该功能来获取内容：

```
$url = "http://wikipedia.sfstate.us/Scarves";
$html = curl_get($url);
var_dump($html); 
```

结果如下所示：

```
812 //CURLINFO_SIZE_DOWNLOAD
string(812) "..." //$html string where the content is stored 
```

然而，整个文件是 64612 字节（结果来自 web-sniffer.net）。并且 64612 = 1024 * 63 + 812。也就是说，**我只得到文件的最后 812 个字节。**

为什么会发生这种情况？关于如何获取全部内容的任何想法？谢谢。

PS：我也试过了。如下但无济于事

```
if(strlen($html) < 1024){
    $html = '';
    $i = 0;
    while($content = file_get_contents($url, FILE_TEXT,  NULL, $i, $i + 1023)){
            $html .= $content;
            $i += 1023;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:50:57.170

试试这个这是我测试过的代码它工作正常

输出：-![在此处输入图像描述](../Images/e143542b676d6e32497e8f110666d928.png)

```
<?php

function curl_get($url){
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_HEADER, true); 
        curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.79 Safari/537.1");
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
        $data = curl_exec($ch);

        print_r(curl_getinfo($ch, CURLINFO_SIZE_DOWNLOAD));

        curl_close($ch);
        return $data;
}

$url = "http://wikipedia.sfstate.us/Scarves";
$html = curl_get($url);
var_dump($html); 
```

**也试试另一个例子**

```
$ch = curl_init("http://wikipedia.sfstate.us/Scarves");
$fp = fopen("example_htmlpage.html", "w");

curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:05:51.143

您尝试抓取的页面具有基于用户代理的保护。将适当的用户代理添加到您的请求中，它可以工作：

```
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.79 Safari/537.1"); 
```

当然，如果他们有这样的保护，那可能是因为他们不想让你刮掉他们的内容。

# ajax - onClick 按钮：回调未执行

> ID：11990481
> 
> 赞同：1
> 
> 时间：2012-08-16T15:21:39.660
> 
> 标签：ajax, onclick, smalltalk, seaside

我想知道为什么单击按钮时不执行 doRemoveObject 方法。

```
(html button)
  id: 'objectRemoveButton';
  bePush;
  onClick: (html scriptaculous request
      callback: [self doRemoveObject];
      confirm: 'Are you sure you want to delete this?');
  with: 'Remove object' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T05:57:55.963

听起来您没有在应用程序中包含原型和/或脚本库。

使用 Seaside 配置工具 (http://localhost:8080/config/MyApplication) 将“PTDeploymentLibrary”和“SUDeploymentLibrary”添加到您的应用程序（将“MyApplication”替换为您的应用程序名称）。库设置可以在配置设置的“常规”部分中找到。

或者，您也可以通过编程方式将其添加到您的应用程序中，如下所示：

```
|app |
app := self registerAsApplication: 'MyApplication'.
app addLibrary: PTDeploymentLibrary; addLibrary: SUDeploymentLibrary 
```

显然，您也可以使用 PTDevelopmentLibrary。

ps：如果您正在开发一个新的应用程序，请考虑使用 jQuery 而不是 Scriptaculous。

# c# - MVC2 抱怨它无法在控制器上找到公共操作方法，即使它在那里

> ID：11990482
> 
> 赞同：3
> 
> 时间：2012-08-16T15:21:42.827
> 
> 标签：c#, asp.net-mvc-2

我将 MVC2 与 VS2008 一起使用，并在视图 ~/Shared/Site.Master 中使用以下代码：

```
<ul id="navlist">
            <li class="first"><a href="<%= Url.Content("~")%>" id="current">Home</a></li>
            <li><a href="<%= Url.Content("~/Store/")%>">Store</a></li>
            <li>
                **<% Html.RenderAction("CartSummary","ShoppingCart"); %></li>**
            <li><a href="<%= Url.Content("~/StoreManager/") %>">Admin</a></li>
        </ul> 
```

抛出以下异常：

> 执行处理程序“System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper”的子请求时出错。

有这个内部异常：

> “在控制器‘MvcMusicStore.Controllers.ShoppingCartController’上找不到公共操作方法‘CartSummary’。”

……这没有任何意义。“CartSummary”方法定义如下：

```
// GET: /ShoppingCart/CartSummary
[NHibernateActionFilter]
[ChildActionOnly]
[HttpGet]
public ActionResult CartSummary()
{
    var cart = ShoppingCart.GetCart(this.HttpContext, this.NSession);

    ViewData["CartCount"] = cart.GetCount();

    return PartialView("CartSummary");
} 
```

那么给了什么？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T15:28:43.737

如果从子操作中删除 [HttpGet] 属性会发生什么？

如果我是正确的，将使用与调用“主要操作”相同的 HTTP 动词来调用子操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:28:53.337

@Cosmo ...是您的控制器“ShoppingCartController”或 ShoppingCart 的名称。如果它是“ShoppingCartController”，那么 html.RenderAction 将会出错，因为控制器名称将不正确。

更改为：Html.RenderAction("CartSummary","ShoppingCartController");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T20:23:43.930

更改或删除过滤`Html.RenderAction`器`Html.Action``[ChildActionOnly]`

# c# - 几秒钟后关闭 Windows Mobile 应用程序上的 MessageBox (C#)

> ID：11990483
> 
> 赞同：0
> 
> 时间：2012-08-16T15:21:44.260
> 
> 标签：c#, windows-mobile

有没有办法在 Windows Mobile 应用程序（C# 应用程序）中几秒钟后关闭 MessageBox？

SendKeys 类有很多示例，但它们都不能在 Windows Mobile 上运行，并且会产生错误：

当前上下文中不存在名称“SendKeys”

我检查了 [http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx) http://stackoverflow.com/questions/2519006/how-to-send-key-from-我的程序到外部程序 wince

等等

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:08:09.650

我只是构建了自己的并添加了一个调用 close() 的 Timer（它也可以使用事件处理程序来调用 close）。简单，直接，并且有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:07:58.127

好的，我通过添加模拟消息框的面板组件（带有标签消息）解决了这个问题。因此可以通过 Timer 组件在几秒钟后将其设置为不可见。

此外，我还添加了一项操作 - 如果最终用户按下它，它将被设置为不可见。

# php - Create a 'detailed' page

> ID：11990489
> 
> 赞同：0
> 
> 时间：2012-08-16T15:22:05.963
> 
> 标签：php, wordpress, wordpress-theming

I have a page with a few buttons, which are generated by a function and displayed through a short-code. I want to link these buttons to `wp-content/plugin/nameplugin/detailedPage.php?id=blabla`.

Do I need to create a new function or a new PHP page. And if I need to create a new PHP page, how do I get the header/sidebar/footer from the chosen theme of the Wordpress website?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:01:06.300

最好将 URL 查询参数传递到同一页面，并在您的简码逻辑中处理它们。即保持在一页上并根据查询参数切换输出。

# ruby-on-rails - 解析 Rails JSON 关联对象

> ID：11990491
> 
> 赞同：0
> 
> 时间：2012-08-16T15:22:11.203
> 
> 标签：ruby-on-rails

我有一个导出 JSON 的 Rails API，类似于

```
# /customers/1.json
{
  "id":1,
  "name":"Some name","address":"Street 12-3",
  "county":{"id":2,"name":"MyCounty"},
  "contracts":[
    {"id":2663,"number":"6-2/7 (2011)", "county":{"id":2,"name":"MyCounty"}},
} 
```

客户端 Rails ( **3.2.2** ) 具有 Resource models: `Customer`，`Contract`并且`County`都连接到该 API。当我 fetch`Customer.find(1)`时，它似乎根据原始类是否已经加载，将关联的对象解析为两个不同的类。

考虑：

```
rails console
c = Customer.find 1
#<Customer:0x0... @attributes={"id"=>1, "county"=>#<County:0x0...>,
"contracts"=>[#<Customer::Contract:0x0...> .... 
```

**注意：**关联类名称：`County`和`Customer::Contract`

现在，如果我重新加载控制台，它将变为：

```
reload!
c = Customer.find 1
#<Customer:0x0... @attributes={"id"=>1, "county"=>#<Customer::County:0x0...>,
"contracts"=>[#<Customer::Contract:0x0...> .... 
```

但是，如果我启动新控制台并且在任何东西使 Rails 加载类之前，它会变成：

```
rails console
County.new
Contract.new
c = Customer.find 1
#<Customer:0x0... @attributes={"id"=>1, "county"=>#<Customer::County:0x0...>,
"contracts"=>[#<Contract:0x0...> .... 
```

有没有办法让 Rails*总是*以同样的方式解析这些？

**编辑：**代码示例：

```
# app/models/contract.rb
class Contract < ActiveResource::Base
  self.site = APP_CONFIG['k2api']
  self.format = :json
end

# app/models/customer.rb
class Customer < ActiveResource::Base
  self.site = APP_CONFIG['k2api']
  self.format = :json
  # accessor to ActiveResource response headers
  add_response_method :http_response
end

# app/models/county.rb
class County < ActiveResource::Base
  self.site = APP_CONFIG['k2api']
  self.format = :json
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:13:58.780

阅读[Rails ActiveResource 源代码](https://github.com/rails/activeresource/blob/master/lib/active_resource/base.rb#L1478)，答案正如我开始怀疑的那样 - Rails 检查是否已经定义了具有关联名称的类或创建了一个简单的`ActiveResource::Base`子类本身。

为了使我的应用程序无论是否已加载任何模型都表现一致，我在初始化程序中强制加载所有资源模型：

```
[Customer, Contract, County].map &:new 
```

顺便说一句，由于某种原因，[这个 SO 问题](https://stackoverflow.com/questions/3027312/rails-3-loading-all-models-on-startup)中提到的急切加载）给了我工厂女孩的问题。

# sql-server-2008 - Is it possible to pass some values from one stored procedure to another calling it along with the variable names?

> ID：11990494
> 
> 赞同：1
> 
> 时间：2012-08-16T15:22:25.540
> 
> 标签：sql-server-2008, stored-procedures

```
execute addNewItem @new, @KID, @EAN1, @namn, @pris, @Store,''; 
```

I am trying to call a stored procedure `addNewItem`, from another stored procedure which uses a cursor with select. Each time the variables (`@new, @EAN, @KID, ...`) get their values processed, need to pass to this stored procedure `addNewItem`, when I check the tables seems that the operations are not done which were expected to be done by `addNewItem`. Am i doing some mistake here, saw [how to share data between store procedures](http://www.sommarskog.se/share_data.html#INSERTEXEC) but was difficult to understand at least for me. some help would be appreciable.

# magento - Magento 1.6.2.0 - Set Visibility to Search if Stock Quantity is 0

> ID：11990495
> 
> 赞同：0
> 
> 时间：2012-08-16T15:22:27.693
> 
> 标签：magento, visibility, stock

I'm trying to set it up so that when a product in the Magento store has a quantity of 0 or less, it changes the visibility of that product to Search only, instead of Search/Catalog.

The store is set up so customers can still order products even if the stock goes below 0, so it is not set up to automatically change to Out Of Stock or anything like that, I just want the visibility to change.

Has anyone ever been able to set up something like this before or can anyone advise me on where to look in order to add this functionality?

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:08:11.080

你最好的选择是设置一个观察者。

**什么是观察者？**

观察者的工作类似于闹钟——当某个时间到来时，它们会响起，类似地，当某个动作发生时，观察者会做一些事情。

**所以我该怎么做？**

您可能应该设置一个观察者，每当加载（或保存）产品时，它应该检查产品的数量，然后如果它为 0，则将其可见性设置为您想要的。

**好的，我对观察者的事情很感兴趣，我该怎么做？**

[这](https://stackoverflow.com/questions/7287509/observer-for-magent-product-after-save)是另一个stackoverflow问题，它展示了如何构建一个。

你也可以看看[这个教程](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)。

希望这会有所帮助。

# java - 使用旋转拖尾标准输出文件，这会长期有效吗？

> ID：11990497
> 
> 赞同：1
> 
> 时间：2012-08-16T15:22:29.813
> 
> 标签：java, tail

我正在尝试实现一个日志拖尾，它将在前一个文件被删除并被新文件（永远）替换后继续拖尾。所以，每次我们重新启动服务器（打印日志）时，我都不必运行这个程序。

这是我的代码。

```
public void tail(String file) throws InterruptedException, IOException {
    waitUntilFileExist(file);

    File f = new File(file);

    BufferedReader br = new BufferedReader(new FileReader(file.trim()));

    br.skip(f.length());
    String line = null;

    while (f.exists()) {

       f = new File(file);
        line = br.readLine();

        if (line == null) {

            Thread.sleep(1000);

        } else {
            if (msl != null) {
               //Send line to attached interface
                msl.onMessage(line);
            }
        }

    }

   waitUntilFileExist(file);

    tail(file);

}

public void waitUntilFileExist(String file) throws InterruptedException {
    File f = new File(file);
    if (!f.exists()) {
        System.out.println("File doesn't exists");
        Thread.sleep(1000);
        waitUntilFileExist(file);
    } else {
        System.out.println("File does exists");
    }
} 
```

首先，它会检查指定的文件是否存在？虽然它确实存在，但读取文件并打印该行。如果文件在读取过程中被删除，它会等到文件被重新创建后再调用tail方法。

我在 Linux 机器上对此进行了测试，它工作正常，但我不确定这是否是正确的方法。你有其他方法可以做到这一点吗？这适用于几天和几个月的生产环境吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:53:52.420

`tail`您的程序将因堆栈溢出错误而失败，因为每次您在方法和中使用递归方法调用越来越深入`waitUntilFileExist`，并且永远无法摆脱它们。我对您的代码做了更好的变体：

```
public void tail(String file) throws InterruptedException, IOException {
    boolean isNeedRun = true;
    while (isNeedRun) {
        waitUntilFileExist(file);
        try {
            readFile(file);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

private void readFile(String file) throws InterruptedException, IOException {
    File f = new File(file);

    FileReader reader = new FileReader(file.trim());
    try {
        BufferedReader br = new BufferedReader(reader);
        br.skip(f.length());
        String line;

        while (f.exists()) {

            f = new File(file);
            line = br.readLine();

            if (line == null) {

                Thread.sleep(1000);

            } else {
                if (msl != null) {
                    //Send line to attached interface
                    msl.onMessage(line);
                }
            }
        }
    } finally {
        try {
            reader.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

private void waitUntilFileExist(String file) throws InterruptedException {
    File f = new File(file);
    while (!f.exists()) {
        System.out.println("File doesn't exists");
        Thread.sleep(1000);
    }
    System.out.println("File does exists");
} 
```

但是这个变种也不完美！您可能会丢失一些行，因为可能会在行`waitUntilFileExist(file);`和`br.skip(f.length());`.

如果您在 unix 系统上需要 tail，最好使用**tail**控制台工具。您可以从 java 启动单独的进程并使用它的输出。当文件被删除并再次创建时，此变体将保证 0% 的损失。

# jquery - 可降解的 Ajax Jquery 分页

> ID：11990501
> 
> 赞同：2
> 
> 时间：2012-08-16T15:22:32.967
> 
> 标签：jquery, ajax

我有一个包含内容页面的网站。我希望分页是通过 Jquery 驱动的 AJAX，这样当用户单击转到新页面时，内容就会更新而无需重新加载页面。

但是，对于没有启用 javascript 的用户，包括搜索机器人，我希望分页在没有启用 javascript 的情况下工作。

这可能吗？如果可以，怎么做？我正在用 Python 对网站进行编码，如果这样会有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:23:37.433

我想一个好的方法是创建没有任何 Javascript 的页面。你最终会得到这样的结果：

```
<div class="content">
    ...
</div>
<a class="prev" href="previousPage">Prev</a>
<a class="next" href="nextPage">Next</a> 
```

正如您可以想象的那样，内容位于`content`div 中，`Next`并且`Prev`链接通过简单的 HTML 加载不同的页面。

然后你可以像这样包含一些 jQuery：

```
$('.next').click(function(e){
    e.preventDefault();
    // Do the ajax call and load the resulting data in the content div
}); 
```

使用此解决方案，如果未启用 Javascript，则分页将正常工作，因为它是使用简单的 HTML 制作的。但是，如果启用了 Javascript，则 ajax 调用将发挥它的魔力。

# tfsbuild - Why does Microsoft Test Manager expect test DLL's under a bin/debug folders structure?

> ID：11990502
> 
> 赞同：0
> 
> 时间：2012-08-16T15:22:35.577
> 
> 标签：tfsbuild, microsoft-test-manager

When I attempt to run automated tests via Microsoft Test Manager, I get the error

> "Cannot find the test" .... "with storage '..\bin\debug\mytest.dll".

Why is it looking in there?

By build agent working directory is C:\MyBuildOutput, so when a build is run, the DLL's are output to C:\MyBuildOutput\Binaries.

So why does Microsoft Test Manager expect to find the DLL's under C:\MyBuildOutput\bin\debug ?

I haven't told Microsoft Test Manager to look there, and in fact my build definition build process parameters build my solution in Release mode!

I can get it to work by getting a script to create a bin and debug folder and copying the DLL's in there - but that's just plain inconvenient!!

I think it also expects the bin and debug folder even when I specify a custom build directory using the Microsoft Test Manager command-line utility (tcm.exe).

I'm grateful to hear any explanations, solutions, ideas or thoughts!

Thanks

EDIT: As per solution below, MS Test Manager DOES NOT EXPECT test DLL's under a bin/debug folder (although the error message does almost imply it).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:44:06.767

问题解决了。

根据[此处的论坛主题](http://social.msdn.microsoft.com/Forums/da-DK/vsmantest/thread/beada824-1756-43e3-8719-feaa166cbfd4?prof=required)，我收到此消息的原因与 DLL 无关。我的有序测试列表应该放在项目级别 - 不包含在任何文件夹中。因此，实际上 Microsoft 测试管理器正在与我的测试 DLL 相同的文件夹中寻找有序的测试列表，而实际上它位于子文件夹下。

当我将有序的测试列表移动到与测试 DLL 相同的文件夹时，测试成功执行。

# python - How to fix this script so that it won't peg the CPU?

> ID：11990503
> 
> 赞同：8
> 
> 时间：2012-08-16T15:22:41.590
> 
> 标签：python, performance, keyboard, cpu, xlib

On my home Kubuntu machine, I am running a script to beep on every keypress, no matter which window or application has focus, adapted from [this insightful page](http://rants.sayanriju.co.cc/script-to-make-tick-tick-sound-on-keypress)

```
#!/usr/bin/env python 

from Xlib.display import Display
import os
import sys

ZERO=[]
for i in range(0,32):
        ZERO.append(0)
ignorelist=[ZERO]

def main():    
        if os.getuid()==0:
                os.system("modprobe pcspkr")
                print("Speaker enabled, start as normal user")
                sys.exit()

        print("If no beep is heard, then run as root to enable pcspkr")

        disp = Display()
        while 1:
                keymap=disp.query_keymap()
                if keymap not in ignorelist:
                        os.system("beep")

if __name__ == '__main__':
        main() 
```

The script works great, but it pegs both CPUs of my dual-core Intel machine at around 80% each, so I can do little else with the machine. How can I reduce the CPU requirements of this simple script without interfering with its operation? In other words, it should still beep at the moment of keypress, no matter what window or application has focus.

If this is not possible in Python, what other technologies should I look at? C? I would assume that there exists some kernel component which notifies applications of keypresses: how else does KDE handle global shortcuts? How can I get my application to receive these notices as well?

**The goal is to make a beep at the moment each key is pressed**, as I am training my fingers to type on a mechanical keyboard without bottoming out yet without missing keypresses. I just graduated from Cherry Browns to Cherry Blues and the lack of tactical feedback takes some time to get used to.

**Note that any solution must emit a beep no matter which window has focus. This program is intended to be used as a daemon that will run in the background of all applications that I use.**

Thanks.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T15:31:41.477

使用事件：

```
import Xlib
from Xlib.display import Display

display = Display()

screen = display.screen()
w = screen.root.create_window(0, 0, 100, 100, 1,
              screen.root_depth,
              event_mask = Xlib.X.KeyPressMask)
w.map()

while True:
    event = display.next_event()
    if event.type != Xlib.X.KeyPress:
        continue
    print "OHAI" 
```

详细信息来自[http://python-xlib.sourceforge.net/doc/html/python-xlib_10.html#SEC9](http://python-xlib.sourceforge.net/doc/html/python-xlib_10.html#SEC9)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-16T15:32:33.883

您的 while 循环正在消耗您所有的 CPU 周期，因为它执行得尽可能快。您可以添加一个小的 sleep() 延迟，但您可能会错过一些关键事件。或者，考虑使用[pyhook](http://sourceforge.net/apps/mediawiki/pyhook/index.php?title=Main_Page)模块来监控按键。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-12T09:37:27.520

你可以使用 nice 来启动你的脚本。nice 命令会降低脚本的优先级，这样它只会在系统无事可做时运行。这样它仍然会占用 CPU 周期，但您将能够正常使用您的系统来执行其他任务。

有关详细信息，请参见手册页。

**编辑：**

为了减少 CPU 使用率，您可以使用 time.sleep(0.01) 添加一个小的延迟。这将减少 CPU 负载，但会略微增加按键和发出蜂鸣声之间的时间。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-16T15:37:55.820

您的程序正在占用 CPU，因为它正在运行一个无限循环，这将使您的 CPU 忙于每毫秒左右检查一次键盘状态，即使没有按下任何键也是如此。由于您的计算机没有迹象表明它可以停止，它会尽可能频繁地继续检查，从而消耗资源。

正如 Iain 所建议的，这个问题最优雅的解决方案是使用`Display.next_event()`，它会告诉程序等到收到新事件（例如按键）。在这段等待时间内，您的程序不会消耗大量 CPU，并且您的负载应该会大幅下降。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-19T00:30:32.970

从[这个答案到以前发布的问题](https://stackoverflow.com/a/1901928/462117)，揭示了[一个名为的 Python 模块`pyxhook`](http://pykeylogger.git.sourceforge.net/git/gitweb.cgi?p=pykeylogger/pykeylogger;a=blob%5Fplain;f=pyxhook.py;hb=HEAD)，它是[一个名为 pykeylogger 的程序](http://sourceforge.net/projects/pykeylogger/develop)的一部分。

使用此`pyxhook`模块，您应该能够使用以下代码在每次按键时发出哔声：

```
import pyxhook
import time
import os
import sys

def do_beep(event):
    os.system('beep')

hm = pyxhook.HookManager()
hm.HookKeyboard()
hm.KeyDown = do_beep
hm.start()
while True:
    try:
        time.sleep(10)
    except: 
        break
hm.cancel() 
```

我无法正确测试它，因为我没有`beep`命令。但是，它会报告`sh: beep: command not found`每个按键。

# spring - HibernateException：找到对集合的共享引用

> ID：11990506
> 
> 赞同：0
> 
> 时间：2012-08-16T15:22:52.643
> 
> 标签：spring, hibernate, hibernate-4.x, spring-orm

由于某些奇怪的原因，当我升级到 Hibernate 4 时，出现以下异常： HibernateException: Found shared references to a collection

我有以下 bean 像这样映射：

```
@Entity(name = "CIN_PRODUCTS")
@Inheritance(strategy = InheritanceType.JOINED)
public class HibernateCustomerProduct extends AbstractUpdatableDomainObject<Long>       implements CustomerProduct {

/**
 * 
 */
private static final long serialVersionUID = -1146349249414760087L;

/** The name of the product. */
@BusinessField
private String name;

/** The type of product. */
@BusinessField
private ProductTypeCode productType;

/** The product identifier. */
@BusinessField
private Long productId;

/** The address where this product needs to be installed. */
@BusinessField
private Set<Address> addresses;

/** The external ID for a customer. */
@BusinessField
private Long customerId;

/** The provisioning status. */
@BusinessField
private ProvisioningStatus provisioningStatus;

/** The billing status. */
@BusinessField
private BillingStatus billingStatus;

/** The service ID that identifies the product. */
@BusinessField
private String serviceId;

/** The id of the service. */
@BusinessField
private ServiceIdType serviceIdType;

/** The id from the order line where this product refers to. */
@BusinessField
private Long orderLineId;

/** The id from the order where this product refers to. */
@BusinessField
private Long orderId;

/** The numbers that belong to this product. */
private Set<Number> numbers;

/**
 * Default constructor.
 */
public HibernateCustomerProduct() {
    billingStatus = BillingStatus.UNB;
    provisioningStatus = ProvisioningStatus.UPR;
}

@Override
@Id
@SequenceGenerator(name = "CIN_PRODUCTS_SEQ", initialValue = 1, allocationSize = 1, sequenceName = "CIN_PRODUCTS_SEQ")
@GeneratedValue(strategy = GenerationType.AUTO, generator = "CIN_PRODUCTS_SEQ")
@Column(name = "ID")
public Long getId() {
    return id;
}

@Override
@Column(name = "NAME", unique = false, nullable = false)
public String getName() {
    return name;
}

/**
 * @param name
 *        the name to set
 */
public void setName(final String name) {
    this.name = name;
}

@Override
@Type(type = "product_type")
@Column(name = "PTY_CODE", unique = false, nullable = false)
public ProductTypeCode getProductType() {
    return productType;
}

public void setProductType(final ProductTypeCode productType) {
    this.productType = productType;
}

@Override
@Column(name = "PRODUCT_ID", unique = false, nullable = false)
public Long getProductId() {
    return productId;
}

/**
 * @param productId
 *        the productId to set
 */
public void setProductId(final Long productId) {
    this.productId = productId;
}

/**
 * @return the installationAddress
 */
@Override
@OneToMany(mappedBy = "product", targetEntity = HibernateAddress.class, fetch = FetchType.EAGER, cascade = CascadeType.ALL)
public Set<Address> getAddresses() {
    return addresses;
}

/**
 * @param address
 *        the installationAddress to set
 */
public void setAddresses(final Set<Address> addresses) {
    this.addresses = addresses;
}

/**
 * @return the customerId
 */
@Override
@Column(name = "CUSTOMER_ID", nullable = false)
public Long getCustomerId() {
    return customerId;
}

/**
 * @param customerId
 *        the customerId to set
 */
public void setCustomerId(final Long customerId) {
    this.customerId = customerId;
}

/**
 * @return the provisioningStatus
 */
@Override
@Type(type = "provisioning_status")
@Column(name = "PROVISIONING_STATUS", nullable = false)
public ProvisioningStatus getProvisioningStatus() {
    return provisioningStatus;
}

/**
 * @param provisioningStatus
 *        the provisioningStatus to set
 */
@Override
public void setProvisioningStatus(final ProvisioningStatus provisioningStatus) {
    this.provisioningStatus = provisioningStatus;
}

/**
 * @return the billingStatus
 */
@Override
@Type(type = "billing_status")
@Column(name = "BILLING_STATUS", nullable = false)
public BillingStatus getBillingStatus() {
    return billingStatus;
}

/**
 * @param billingStatus
 *        the billingStatus to set
 */
public void setBillingStatus(final BillingStatus billingStatus) {
    this.billingStatus = billingStatus;
}

/**
 * @return the serviceId
 */
@Override
@Column(name = "SERVICE_ID")
public String getServiceId() {
    return serviceId;
}

/**
 * @param serviceId
 *        the serviceId to set
 */
public void setServiceId(final String serviceId) {
    this.serviceId = serviceId;
}

/**
 * @return the serviceIdType
 */
@Override
@Type(type = "service_id_type")
@Column(name = "SDT_CODE")
public ServiceIdType getServiceIdType() {
    return serviceIdType;
}

/**
 * @param serviceIdType
 *        the serviceIdType to set
 */
public void setServiceIdType(final ServiceIdType serviceIdType) {
    this.serviceIdType = serviceIdType;
}

/**
 * @return the numbers
 */
@Override
@OneToMany(targetEntity = HibernateNumber.class, mappedBy = "product", cascade = CascadeType.ALL)
public Set<Number> getNumbers() {
    return numbers;
}

/**
 * @param numbers
 *        the numbers to set
 */
public void setNumbers(final Set<Number> numbers) {
    this.numbers = numbers;
}

/**
 * Adds the specified {@link Number} to this product.
 * 
 * @param number
 *        The number that will be added.
 */
public void addNumber(final Number number) {
    numbers.add(number);
}

/**
 * @return the orderLineId
 */
@Override
@Column(name = "ORDER_LINE_ID", nullable = false)
public Long getOrderLineId() {
    return orderLineId;
}

/**
 * @param orderLineId
 *        the orderLineId to set
 */
public void setOrderLineId(final Long orderLineId) {
    this.orderLineId = orderLineId;
}

/**
 * @return the orderId
 */
@Override
@Column(name = "ORDER_ID", nullable = false)
public Long getOrderId() {
    return orderId;
}

/**
 * @param orderId
 *        the orderId to set
 */
public void setOrderId(final Long orderId) {
    this.orderId = orderId;
}
}

@Entity(name = "CIN_NUMBERS")
public class HibernateNumber extends AbstractUpdatableDomainObject<Long> implements Number {

    /**
     * 
     */
    private static final long serialVersionUID = -1982958589971470757L;

    /** The phone number. */
    @BusinessField
    private String number;

    /** The mobile product related to this CLI. */
    @BusinessField
    private CustomerProduct product;

    @Override
    @Id
    @SequenceGenerator(name = "CIN_NUMBERS_SEQ", initialValue = 1, allocationSize = 1, sequenceName = "CIN_NUMBERS_SEQ")
    @GeneratedValue(strategy = GenerationType.AUTO, generator = "CIN_NUMBERS_SEQ")
    @Column(name = "ID")
    public Long getId() {
        return id;
    }

    @Override
    @Column(name = "PHONE_NUMBER", unique = true, nullable = false)
    public String getNumber() {
        return number;
    }

    /**
     * @param number
     *        the number to set
     */
    public void setNumber(final String number) {
        this.number = number;
    }

    @JoinColumn(name = "PRD_ID")
    @ManyToOne(targetEntity = HibernateCustomerProduct.class, optional = false)
    public CustomerProduct getProduct() {
        return product;
    }

    /**
     * @param product
     *        the product to set
     */
    public void setProduct(final CustomerProduct product) {
        this.product = product;
    }

} 
```

每当我在 HibernateCustomerProduct bean 上设置新集合时，都会出现异常。这很奇怪，因为我的测试中只有一个集合，但它仍然抱怨已经有另一个集合。这怎么可能？我的测试如下所示：

```
 product = new HibernateCustomerProduct();
    product.setCreated(new Date());
    product.setCreatedBy("Salomo");
    product.setCustomerId(123L);
    product.setName("IPhone");
    product.setProductId(1l);
    product.setProductType(ProductTypeCode.MOBILE_SUBSCRIPTION);
    product.setServiceId("036545458874");
    product.setServiceIdType(ServiceIdType.MAIN_PHONE_NUMBER);
    product.setOrderId(24123l);
    product.setOrderLineId(2412l);

    final HibernateNumber number = new HibernateNumber();
    number.setCreated(new Date());
    number.setCreatedBy("sape");
    number.setNumber("0642165348");
    number.setProduct(product);

    final Set<Number> numbers = new HashSet<Number>();
    numbers.add(number);
    product.setNumbers(numbers);

    customerProductDao.save(product);
    customerProductDao.flush(); 
```

有人知道我做错了什么吗？在 Hibernate 3 中，这工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:03:55.057

It seems that this had to do with something else that was introduced in the SessionFactory. When using @PrePersist annotations. When registering listeners normal stuff didn't work properly anymore so we stopped using those annotations and uses Spring aspects instead.

# javascript - Detecting if an extension is installed from another extension

> ID：11990511
> 
> 赞同：1
> 
> 时间：2012-08-16T15:23:16.290
> 
> 标签：javascript, google-chrome-extension

Is it possible to find out whether an extension exists from a second extension?

First off, a bit of background: I have an extension which is overriding the bookmark manager. The client also wants a history manager, which I know can't be done in one extension.

My proposal was to create two extensions, one of which acts as a 'core' as well, handling authentication with the client's API. I've got the two talking together and the auth is working fine, but I'm struggling to cope with the case of the core extension not being installed. I want to show a prompt to install the core one, if it's not there.

I could send a message and capture `chrome.extension.lastError`, but is there a more elegant way of doing this?

Synchronous messages would be a boon here too I imagine....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T02:18:13.193

使用[跨扩展消息](http://developer.chrome.com/extensions/messaging.html)API 将消息从扩展 2 发送到扩展 1。如果扩展 1 没有响应，那么您可以提示用户安装扩展 1。我构建了两个 Chrome 扩展来测试这个想法，效果很好。

如果您想下载这些文件并自己尝试，这里是压缩文件。这是一个截屏视频，显示了 YouTube [http://youtu.be/6u4tIH6Xfcg上的工作示例](http://youtu.be/6u4tIH6Xfcg)

# 分机 2（从属）

## 清单.json

```
{
    "name": "Subordinate Chrome Extension Example",
    "manifest_version": 2,
    "version": "0.1",
    "description": "This is an example extension for StackOverflow that requires a master/companion Google Chrome extension to be installed for it to work",
    "browser_action": {
        "default_popup": "popup.html"
    },
    "background": {
        "scripts": ["background.js"]
    }
} 
```

## 背景.js

```
chrome.extension.onMessage.addListener(
    function(request, sender, sendResponse) {
        switch (request.directive) {
        case "popup-click":
            // check to see if master extension 1 is installed
            chrome.extension.sendMessage('jfhngkelgcildagdkgenelgaaaphlghb', {directive: "ping"}, function(extensionResponse) {
                if (extensionResponse && extensionResponse.data == 'pong') {
                    console.log("The master extension 1 is installed!");
                } else {
                    console.log("The master extension 1 is not installed");
                }
                sendResponse({});
            });
            return true; // required to return true if we want to sendResponse() later since the cross chrome extension message passing is asynchronus
            break;
        default:
            // helps debug when request directive doesn't match
            alert("Unmatched request of '" + request + "' from script to background.js from " + sender);
        }
    }
); 
```

## popup.html

```
<html>
    <head>
        <script src="popup.js"></script>
        <style type="text/css" media="screen">
            body { min-width:250px; text-align: center; }
            #click-me { font-size: 20px; }
        </style>
    </head>
    <body>
        <button id='click-me'>Click Me!</button>
    </body>
</html> 
```

## popup.js

```
function clickHandler(e) {
    chrome.extension.sendMessage({directive: "popup-click"}, function(response) {
        this.close(); // close the popup when the background finishes processing request
    });
}

document.addEventListener('DOMContentLoaded', function () {
    document.getElementById('click-me').addEventListener('click', clickHandler);
}) 
```

# 扩展 1（主/同伴）

## 清单.json

```
{
    "name": "Master Chrome Extension Example",
    "manifest_version": 2,
    "version": "0.1",
    "description": "This is an example extension for StackOverflow that is required for a subordinate/companion Google Chrome extension to work",
    "background": {
        "scripts": ["background.js"]
    }
} 
```

## 背景.js

```
chrome.extension.onMessageExternal.addListener(function(request, sender, sendResponse) {
    if (sender.id == 'ikofjngppooeeendkfenaiedmlmfjmkb') { // restricting cross extension api to known extension
        if (request.directive == 'ping') {
            sendResponse({
                data: 'pong'
            });
        }
    }
}); 
```

# sql - make a select distinct sorting the results according to another column

> ID：11990512
> 
> 赞同：0
> 
> 时间：2012-08-16T15:23:19.437
> 
> 标签：sql, oracle11g

I have this table:

```
| DAY | TRIMESTER | 
```

Day is an integer value, always increasing (it counts the seconds passing from day 0). TRIMESTER contains a String value ('FIRST','SECOND','THIRD',etc). I need to get the list of trimesters in the right order.

```
SELECT DISTINCT TRIMESTER FROM table 
```

returns:

```
| TRIMESTER |
|   FIRST   |
|   THIRD   |
|   SECOND  | 
```

I have assessed that this would solve my problem:

```
SELECT  DISTINCT TRIMESTER, SUM(DAY) FROM table GROUP BY TRIMESTER ORDER BY SUM(DAY) 
```

Is there a nicer solution which would output what I need and that would require less computing done by the database? The database is Oracle 11g and the tables are supposed to become very big.

SAMPLE DATA:

```
| DAY | TRIMESTER |
|  0  |  FIRST    |
|  10 |  FIRST    |
|  12 |  FIRST    |
|  20 |  FIRST    |
|  30 |  SECOND   |
|  35 |  SECOND   |
|  46 |  THIRD    | 
```

I need to get in order: 'FIRST','SECOND' and 'THIRD'. Anyway I have no control over the keys in the TRIMESTER column. They are strings and might just be *any* string, I can't order them by name. I only know that they cover a "range" of DAY values. E.g. if I had values of "DAY" between 31 and 34 in the example, they'd all have a "SECOND" value in the trimester column.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:28:36.723

使用`GROUP BY`：

```
select TRIMESTER 
from MyTable 
group by trimester 
order by max(DAY) 
```

[SQL 小提琴示例 #1](http://sqlfiddle.com/#!4/1ed2e/7)

使用`RANK`和`PARTITION`：

```
SELECT TRIMESTER
FROM (
  SELECT TRIMESTER,
  RANK() OVER (partition by TRIMESTER ORDER BY DAY DESC) DAYRANK
  FROM MyTable)
WHERE DAYRANK = 1; 
```

[SQL 小提琴示例 #2](http://sqlfiddle.com/#!4/1ed2e/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:04:32.770

这应该这样做：

```
SELECT   TRIMESTER
FROM     MY_TABLE
GROUP BY TRIMESTER
ORDER BY MIN (DAY); 
```

# java - 创建数组而不声明大小 - java

> ID：11990514
> 
> 赞同：13
> 
> 时间：2012-08-16T15:23:23.450
> 
> 标签：java, arrays, size, declare

我一直在研究同样的问题，但我找不到和我一样的问题

我想在不声明大小的情况下创建一个数组，因为我不知道它会怎样！

为了解决这个问题，我想给你我正在寻找的代码

```
public class t
{
 private int x[];
 private int counter=0;
 public void add(int num)
 {
   this.x[this.counter] = num;
   this.counter++;
 }
} 
```

如您所见，用户可以使用该`add`函数将元素添加到数组 10000 次或仅一次，因此它的大小未知

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T15:25:18.167

使用 Java.util.ArrayList 或 LinkedList 是执行此操作的常用方法。据我所知，使用数组是不可能的。

例子：

```
List<Float> unindexedVectors = new ArrayList<Float>();

unindexedVectors.add(2.22f);

unindexedVectors.get(2); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-16T15:25:25.250

您可能正在寻找`List`? 要么 要么`LinkedList`是`ArrayList`很好的课程来看看。然后，您可以调用`toArray()`以将列表作为数组获取。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T15:31:38.720

正如其他人所说，使用`ArrayList`. 就是这样：

```
public class t
{
 private List<Integer> x = new ArrayList<Integer>();

 public void add(int num)
 {
   this.x.add(num);
 }
} 
```

如您所见，您的`add`方法只是调用了`ArrayList`add 方法。这仅在您的变量是私有的（它是私有的）时才有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-29T17:34:20.420

一旦在运行程序时数组大小固定，它的大小就不能再改变了。所以在处理动态数组时最好选择 ArrayList。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-08-28T09:40:50.113

这个怎么样

```
 private Object element[] = new Object[] {}; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-16T15:26:12.840

我认为您真正想要的是[ArrayList](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html)或[Vector](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Vector.html)。Java 中的数组与 Javascript 中的数组不同。

# hadoop - hadoop 猪包减法

> ID：11990517
> 
> 赞同：0
> 
> 时间：2012-08-16T15:23:29.013
> 
> 标签：hadoop, apache-pig

我正在使用 Pig 解析我的应用程序日志，以了解上个月未调用的用户（由同一用户）调用了哪些公开的方法。

我已经设法在上个月之前和上个月之后获得了由用户分组的方法：

上个月之前的关系样本

```
u1      {(m1),(m2)}
u2      {(m3),(m4)} 
```

上个月之后的关系样本

```
u1      {(m1),(m3)}
u2      {(m1),(m4)} 
```

我想要的是由用户找到哪些方法在 AFTER 中而不在 BEFORE 中，即

NEWLY_CALLED 预期结果

```
u1      {(m3)}
u2      {(m1)} 
```

问题：我怎样才能在 Pig 中做到这一点？可以减去袋子吗？

我已经尝试过 DIFF 函数，但它没有执行预期的减法。

问候，

乔尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:50:48.330

我认为您需要编写一个UDF，然后您可以使用

```
Set<T> setA ...
Set<T> setB ...
Set<T> setAminusB = setA.subtract(setB); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T09:06:30.693

对于那些可能感兴趣的人，这里是我在下面的类中编写的减法函数并将其推荐给 Pig ( [PIG-2881](https://issues.apache.org/jira/browse/PIG-2881) )：

```
/**
 * Subtract takes two bags as arguments returns a new bag composed of tuples of first bag not in the second bag.<br>
 * If null bag arguments are replaced by empty bags. 
 * <p>
 * The implementation assumes that both bags being passed to this function will fit entirely into memory simultaneously.
 * </br>
 * If that is not the case the UDF will still function, but it will be <strong>very</strong> slow.
 */
public class Subtract extends EvalFunc<DataBag> {

  /**
   * Compares the two bag fields from input Tuple and returns a new bag composed of elements of first bag not in the second bag.
   * @param input a tuple with exactly two bag fields.
   * @throws IOException if there are not exactly two fields in a tuple or if they are not {@link DataBag}.
   */
  @Override
  public DataBag exec(Tuple input) throws IOException {
    if (input.size() != 2) {
      throw new ExecException("Subtract expected two inputs but received " + input.size() + " inputs.");
    }
    DataBag bag1 = toDataBag(input.get(0));
    DataBag bag2 = toDataBag(input.get(1));
    return subtract(bag1, bag2);
  }

  private static String classNameOf(Object o) {
    return o == null ? "null" : o.getClass().getSimpleName();
  }

  private static DataBag toDataBag(Object o) throws ExecException {
    if (o == null) {
      return BagFactory.getInstance().newDefaultBag();
    }
    if (o instanceof DataBag) {
      return (DataBag) o;
    }
    throw new ExecException(format("Expecting input to be DataBag only but was '%s'", classNameOf(o)));
  }

  private static DataBag subtract(DataBag bag1, DataBag bag2) {
    DataBag subtractBag2FromBag1 = BagFactory.getInstance().newDefaultBag();
    // convert each bag to Set,  this does make the assumption that the sets will fit in memory.
    Set<Tuple> set1 = toSet(bag1);
    // remove elements of bag2 from set1 
    Iterator<Tuple> bag2Iterator = bag2.iterator();
    while (bag2Iterator.hasNext()) {
      set1.remove(bag2Iterator.next());
    }
    // set1 now contains all elements of bag1 not in bag2 => we can build the resulting DataBag.
    for (Tuple tuple : set1) {
      subtractBag2FromBag1.add(tuple);
    }
    return subtractBag2FromBag1;
  }

  private static Set<Tuple> toSet(DataBag bag) {
    Set<Tuple> set = new HashSet<Tuple>();
    Iterator<Tuple> iterator = bag.iterator();
    while (iterator.hasNext()) {
      set.add(iterator.next());
    }
    return set;
  }

} 
```

# java - Issue with priority based LinkedList insertion

> ID：11990521
> 
> 赞同：0
> 
> 时间：2012-08-16T15:23:53.607
> 
> 标签：java, linked-list, singly-linked-list

This is the basic class: `Issue(priority, description)` I have a linked list implementation as follows:

```
public class IssueQueue {
    public Issue issue;
    public IssueQueue next;

    private static int count = 0;

    public IssueQueue() {
    }

    public IssueQueue(Issue i) {
      issue = i;
      next = null;
    }

  public int getCount() {
      return count;
  }

  public void Add(Issue newIssue) {
      IssueQueue tempQ = this;
      IssueQueue newIssueQ = new IssueQueue(newIssue);
      if (count == 0) {
          issue = newIssue;
      } else if (issue.getPriority() > newIssue.getPriority()) {
          while (tempQ.next != null
                  && tempQ.issue.getPriority() >   newIssue.getPriority()) {
              tempQ = tempQ.next;
          }

        newIssueQ.next = tempQ.next;
        tempQ.next = newIssueQ;
    } else if (issue.getPriority() <= newIssue.getPriority()) {
        newIssueQ.issue = issue;
        newIssueQ.next = next;
        issue = newIssue;
        next = newIssueQ;

    }
    count++;
}

public void print() {
    IssueQueue tempQ = this;
    if (next == null) {
        System.out.println(issue);
    } else {
        do {
            System.out.println(tempQ.issue);
            tempQ = tempQ.next;
        } while (tempQ.next != null);
        System.out.println(tempQ.issue);
    }
    System.out.println("--------------------");
  }
} 
```

The problem is, on doing the following: iq.Add(new Issue(10, "Issue 1")); iq.print();

```
 iq.Add(new Issue(4, "Issue 2"));
    iq.print();

    iq.Add(new Issue(20, "Issue 3"));
    iq.print();

    iq.Add(new Issue(2, "Issue 4"));
    iq.print();

    iq.Add(new Issue(12, "Issue 5"));
    iq.print(); 
```

The output is correct till 4th insertion:

```
Issue[Priority: 20, Description: Issue 3]
Issue[Priority: 10, Description: Issue 1]
Issue[Priority: 4, Description: Issue 2]
Issue[Priority: 2, Description: Issue 4] 
```

But on 5th Insertion it becomes:

```
Issue[Priority: 20, Description: Issue 3]
Issue[Priority: 10, Description: Issue 1]
Issue[Priority: 12, Description: Issue 5]
Issue[Priority: 4, Description: Issue 2]
Issue[Priority: 2, Description: Issue 4] 
```

## Where is my code wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:07:17.383

我建议你写

```
 PriorityQueue<Issue> issues =  new PriorityQueue<Issue>(); 
```

并使用 Comparable 实现类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:12:18.147

根据此代码，您将在优先级较低的问题之后插入新问题。

```
while (tempQ.next != null
              && tempQ.issue.getPriority() >   newIssue.getPriority()) {
    tempQ = tempQ.next;
}

newIssueQ.next = tempQ.next;
tempQ.next = newIssueQ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:12:55.390

您应该将队列与控制逻辑分开。这样您就不会因为需要由内而外思考这一事实而感到困惑。我敢肯定，你会很容易得到这个错误。

如果您无法记住您的代码-> 重构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T15:57:53.323

你为什么不使用`Collections.sort()`你自己的基于优先级的`compareTo()`？

您实质上是在要求我们使用调试器来单步执行您的代码。但这看起来很奇怪

```
 newIssueQ.next = tempQ.next;
 tempQ.next = newIssueQ; 
```

看你甚至没有检查所有的优先级。我知道这会遍历列表，但是...尝试进入调试器，您会看到。

```
else if (issue.getPriority() > newIssue.getPriority()) {
          while (tempQ.next != null
                  && tempQ.issue.getPriority() >   newIssue.getPriority()) {
              tempQ = tempQ.next;
          } 
```

# bash - BASH command_not_found_handle() -- 不建议解决

> ID：11990523
> 
> 赞同：0
> 
> 时间：2012-08-16T15:24:06.980
> 
> 标签：bash, built-in

我正在尝试`command_not_found_handle`在我的 Scientific Linux 中工作。我安装了`command-not-found`包

```
`sudo yum install PackageKit-command-not-found.x86_64` 
```

现在，如果我发布`type command_not_found_handle`，我会得到：

```
[JmZ:/usr/lib]-->type command_not_found_handle
command_not_found_handle is a function
command_not_found_handle ()
{
    runcnf=1;
    retval=127;
    [ ! -S /var/run/dbus/system_bus_socket ] && runcnf=0;
    [ ! -x /usr/sbin/packagekitd ] && runcnf=0;
    if [ $runcnf -eq 1 ]; then
        /usr/libexec/pk-command-not-found $1;
        retval=$?;
    else
        echo "bash: $1: command not found";
    fi;
    return $retval
} 
```

在安装软件包之前我没有看到。如果我现在为某些未安装的程序（例如 gcl）发出命令，我只会得到以下信息：

```
[JmZ:/usr/lib]-->gcl
Command not found. 
```

而如果我在我的 Ubuntu 中做类似的事情，我会得到：

```
JmZ@ubuntu:~$ gcl
The program 'gcl' is currently not installed.  You can install it by typing:
sudo apt-get install gcl 
```

我想在 Scientific Linux 中获得类似的功能。我该如何设置？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-11T00:53:08.163

目前我正在运行 Linux Mint，版本介于 14 和 16 之间，我`command_not_found_handle`的是这样的：

```
command_not_found_handle is a function
command_not_found_handle () 
{ 
    if [ -x /usr/lib/command-not-found ]; then
        /usr/bin/python /usr/lib/command-not-found -- $1;
        return $?;
    else
        return 127;
    fi
} 
```

该脚本引用[了这个页面](https://launchpad.net/command-not-found)，它有一个 tarball 下载，应该有你需要的一切。

# android - ActionBarSherlock 应用程序在膨胀类时崩溃

> ID：11990524
> 
> 赞同：0
> 
> 时间：2012-08-16T15:24:14.763
> 
> 标签：android, actionbarsherlock, inflate-exception

我有一个登录活动，该活动使应用程序崩溃，活动布局 ID 的 int 无效。有没有其他人看到这个错误，因为我要疯了。我在应用程序中有几个扩展 RoboSherlockActivity 的类，但只有这个导致崩溃。该活动是一个简单的登录页面，其中包含两个用于电子邮件和密码的 EditText 以及一个提交按钮，以及另一个导致 Facebook 登录的按钮。

```
08-16 17:09:55.552: E/AndroidRuntime(31215): FATAL EXCEPTION: main
08-16 17:09:55.552: E/AndroidRuntime(31215): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp/com.myapp.activity.Login}: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.os.Looper.loop(Looper.java:137)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.app.ActivityThread.main(ActivityThread.java:4424)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at java.lang.reflect.Method.invokeNative(Native Method)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at java.lang.reflect.Method.invoke(Method.java:511)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at dalvik.system.NativeStart.main(Native Method)
08-16 17:09:55.552: E/AndroidRuntime(31215): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.view.LayoutInflater.createView(LayoutInflater.java:606)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at com.actionbarsherlock.app.SherlockActivity.setContentView(SherlockActivity.java:218)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at com.myapp.activity.Login.onCreate(Login.java:71)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.app.Activity.performCreate(Activity.java:4465)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
08-16 17:09:55.552: E/AndroidRuntime(31215):    ... 11 more
08-16 17:09:55.552: E/AndroidRuntime(31215): Caused by: java.lang.reflect.InvocationTargetException
08-16 17:09:55.552: E/AndroidRuntime(31215):    at java.lang.reflect.Constructor.constructNative(Native Method)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.view.LayoutInflater.createView(LayoutInflater.java:586)
08-16 17:09:55.552: E/AndroidRuntime(31215):    ... 24 more
08-16 17:09:55.552: E/AndroidRuntime(31215): Caused by: java.lang.NumberFormatException: Invalid int: "?2130772074"
08-16 17:09:55.552: E/AndroidRuntime(31215):    at java.lang.Integer.invalidInt(Integer.java:138)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at java.lang.Integer.parse(Integer.java:375)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at java.lang.Integer.parseInt(Integer.java:366)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at com.android.internal.util.XmlUtils.convertValueToInt(XmlUtils.java:123)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.content.res.TypedArray.getInt(TypedArray.java:254)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.view.View.<init>(View.java:2942)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.view.ViewGroup.<init>(ViewGroup.java:385)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.widget.FrameLayout.<init>(FrameLayout.java:99)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.widget.ScrollView.<init>(ScrollView.java:152)
08-16 17:09:55.552: E/AndroidRuntime(31215):    at android.widget.ScrollView.<init>(ScrollView.java:148)
08-16 17:09:55.552: E/AndroidRuntime(31215):    ... 27 more 
```

**更新**

登录.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:scrollbars="?orientation_specific_scrollbars"
        >

    <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            >

        <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:paddingLeft="14dp"
                android:paddingRight="14dp"
                android:orientation="vertical"
                >

            <TextView
                    style="@style/header"
                    android:id="@+id/sign_in_prompt"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/sign_in"
                    />

            <AutoCompleteTextView
                    android:id="@+id/email"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:singleLine="true"
                    android:hint="@string/email"
                    android:inputType="textEmailAddress"
                    />

            <EditText
                    android:id="@+id/password"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:singleLine="true"
                    android:hint="@string/password"
                    android:password="true"
                    android:inputType="textPassword"
                    />

            <Button
                    android:id="@+id/submit"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/sign_in"
                    />

            <Button
                    android:id="@+id/fb_login"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/login_facebook"
                    />

        </LinearLayout>

    </FrameLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:16:07.777

这条线是什么？

```
android:scrollbars="?orientation_specific_scrollbars" 
```

除非这是我不熟悉的资源值的某种符号，否则这是您的问题。[该`scrollbars`属性](http://developer.android.com/reference/android/view/View.html#attr_android%3ascrollbars)的唯一有效值是：

*   `none`“不显示滚动条。”
*   `horizontal`“仅显示水平滚动条。”
*   `vertical`“仅显示垂直滚动条。”

您需要将其更改为这些值之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:27:13.860

崩溃发生在

```
java.lang.NumberFormatException: Invalid int: "?2130772074" 
```

在您的 xml 中某处放置了？2130772074，将其更改为一个数字。

# javascript - html 5 帮助。使用 websql 数据库中的动态 javascript 呈现选项

> ID：11990525
> 
> 赞同：0
> 
> 时间：2012-08-16T15:24:22.350
> 
> 标签：javascript

在下面的函数中，我渲染了一个选择框。我不确定如何明智地从数据库代码中提取选项，这些选项将集成到现有代码中......谢谢。

```
function renderDrinks_Mixer(menucat2)
{
  $('#tblDrink').empty();
  db.transaction(function(tx) 
    {        
        tx.executeSql('SELECT * FROM Menu where f_objmenucat2="'+ menucat2 +'"', [],         
        function(tx, results) 
        {            
            var len = results.rows.length, i;                                
            for (i = 0; i < len; i++) {                                                                                 

            var len = results.rows.length, i;                                
            for (i = 0; i < len; i++) {                         
              $('#tblDrink').append('<tr class="simpleCart_shelfItem">'

              +'<td class="pcont"><span class="item_category" style="display:none">'+ results.rows.item(i).category +'</span><h3><span class="item_name">'+ results.rows.item(i).drinkname +'</span></h3>'
              +'<p>'+ results.rows.item(i).desc +'</p></td>'
              +'<td align="center" cellpadding="0" cellpadding="0">'
              +'<select data-theme="f" name="'+ results.rows.item(i).drinkname +'" data-iconpos="notext" data-icon="Plus" data-native-menu="true" id="stringselect">'

                  //#### HELP HERE -PULL OPTIONS FROM DB, NOT SURE HOW TO INTEGRATE ####/

                    +'</select>'
              +'</td>'
             +'</tr>').trigger('create');             
            }                                
          }                    
        }
        , null);                                
    }
    );

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:39:35.177

你可能需要`$.post()`. 您应该创建一些**JSON 端点**（将以 JSON 格式返回数据的脚本）并在每次要检索列表所需的数据时对其进行查询。

例如：

```
$.post("json_endpoint.php", { someParameter: 'and_its_value' },
   function(data){ // requestReady handler
     // do whatever you need with retrieved data.
     // here you can do some logic for enumerating list items from object retrieved from your endpoint
   }
); 
```

这样你就可以很容易地集成它并支持在未来作为一个单独的脚本，数据库逻辑将从 JS 工作流中分离出来。JS 工作流将仅依赖于端点返回的数据。

# javascript - 在 iPad 上调试 trigger.io 应用程序

> ID：11990527
> 
> 赞同：2
> 
> 时间：2012-08-16T15:24:26.337
> 
> 标签：javascript, ios, ipad, trigger.io

我正在使用[trigger.io](https://trigger.io/)为 iPad 开发一个应用程序。应用程序构建在模拟器中查找并运行。它还成功构建到 ipa，我可以通过[testflight](https://testflightapp.com/)在我的 iPad 上安装它。

当我尝试`forge run ios`使用它时`"device": "device"`，`local_config.json`它将所有内容复制到设备，然后出现以下错误：

```
[100%] Installed package /[path]/development/ios/device-ios.app/
------ Debug phase ------
Assertion failed: (AMDeviceStartService(device, CFSTR("com.apple.debugserver"), &gdbfd, NULL) == 0), function start_remote_debug_server, file fruitstrap.c, line 231.

[  ERROR] See /[path]/forge-error.log for more details
[  ERROR] Please contact support@trigger.io 
```

该`forge-error.log`文件不存在。

有谁知道是什么原因造成的？

OSX Lion、XCode 4.1、iPad 2、iOS 5.1.1

**更新：**

更新到 XCode 4.4.1，它变得更进一步了。这是新的错误：

```
[100%] Installed package /[path]/development/ios/device-ios.app/
------ Debug phase ------
[100%] Connecting to remote debug server
-------------------------
Switching to remote-macosx protocol
[New thread 7171]
[Switching to process 7171 thread 0x1c03]
0x2fe51028 in ?? ()
Reading symbols for shared libraries . done

[  ERROR] See /[path]/forge-error.log for more details 
```

有任何想法吗？

**进一步更新：**

当我尝试在 iPad 上运行[Forge 引导](https://github.com/trigger-corp/Forge-Bootstrap)应用程序时也会出现同样的问题，所以我认为这与我的代码无关......

**还有另一个更新！**

刚刚注意到命令运行时它似乎出错了两次。在下面提供更完整的输出以防有帮助：

```
$ forge run ios
[   INFO] Forge tools running at version 3.3.11
[   INFO] Checking JavaScript files...
[   INFO] JavaScript check complete
[   INFO] Verifying your configuration settings...
[   INFO] Configuration settings check complete
[   INFO] Running on iOS device: device
[   INFO] Plist OK
[   INFO] Installing app on device: is it connected?
[   INFO] ------ Install phase ------
[   INFO] [....] Waiting up to 10 seconds for iOS device to be connected
[   INFO] [  0%] Found device (fe29da73fa45e10dfb3ca8cabd215c10de079137), beginning install
[   INFO] [  5%] Copying /[path]/development/ios/device-ios.app/ to device
<snip>
[   INFO] [ 49%] Copying /[path]/development/ios/device-ios.app//tabs_modalWebViewController.nib to device
[   INFO] [ 50%] TakingInstallLock
[   INFO] [ 52%] CreatingStagingDirectory
[   INFO] [ 57%] ExtractingPackage
[   INFO] [ 60%] InspectingPackage
[   INFO] [ 65%] PreflightingApplication
[   INFO] [ 70%] VerifyingApplication
[   INFO] [ 70%] InstallingEmbeddedProfile
[   INFO] [ 80%] InstallingApplication
[   INFO] [ 85%] PostflightingApplication
[   INFO] [ 90%] SandboxingApplication
[   INFO] [100%] Installed package /[path]/development/ios/device-ios.app/
[   INFO] ------ Debug phase ------
[   INFO] [100%] Connecting to remote debug server
[   INFO] -------------------------
[   INFO] Switching to remote-macosx protocol
[   INFO] [New thread 7171]
[   INFO] [Switching to process 7171 thread 0x1c03]
[   INFO] 0x2fe11028 in ?? ()
[   INFO] Reading symbols for shared libraries . done
[  ERROR] Something went wrong that we didn't expect:
[  ERROR] Failed when running /[path]/.lib/fruitstrap: ------ Install phase ------
[....] Waiting up to 10 seconds for iOS device to be connected
[  0%] Found device (fe29da73fa45e10dfb3ca8cabd215c10de079137), beginning install
[  5%] Copying /[path]/development/ios/device-ios.app/ to device
<snip>
[ 49%] Copying /[path]/development/ios/device-ios.app//tabs_modalWebViewController.nib to device
[ 50%] TakingInstallLock
[ 52%] CreatingStagingDirectory
[ 57%] ExtractingPackage
[ 60%] InspectingPackage
[ 65%] PreflightingApplication
[ 70%] VerifyingApplication
[ 70%] InstallingEmbeddedProfile
[ 80%] InstallingApplication
[ 85%] PostflightingApplication
[ 90%] SandboxingApplication
[100%] Installed package /[path]/development/ios/device-ios.app/
------ Debug phase ------
[100%] Connecting to remote debug server
-------------------------
Switching to remote-macosx protocol
[New thread 7171]
[Switching to process 7171 thread 0x1c03]
0x2fe11028 in ?? ()
Reading symbols for shared libraries . done

[  ERROR] See /[path]/forge-error.log for more details
[  ERROR] Please contact support@trigger.io 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:42:28.760

尝试重启手机和电脑。

我在这里找到了解决方案： [iPhone - 在模拟器上测试时出现奇怪的错误](https://stackoverflow.com/questions/788277/iphone-strange-error-when-testing-on-simulator)

编辑：我又遇到了这个问题，主要是由于错误的证书或配置文件。请参阅[iOS App 在模拟器上运行而不是在设备上运行？](https://stackoverflow.com/questions/8192108/ios-app-runs-on-simulator-but-not-device).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-16T01:39:37.903

尝试释放设备上的空间，然后重新启动以防万一。为我解决了。

# php - 使用数组上的 foreach 循环对 PHP 中的父节点和子节点进行排序的递归函数

> ID：11990531
> 
> 赞同：1
> 
> 时间：2012-08-16T15:24:37.723
> 
> 标签：php, arrays, recursion, unset

我有一个数据集存储在一个数组中，该数组使用父子 id: `id`、`parent_id`等引用自身`title`。顶层有一个`parent_id`of `0`，并且可以有无数的父子关系。

所以我`foreach`在递归函数中使用循环对这个数组进行排序，以检查每个数组元素与它的父元素，我想我已经盯着这个方法太久了。

我确实以正确的顺序结束了元素，但我似乎无法正确嵌套列表，这让我认为该方法并没有真正起作用。

*   这是最好的路线吗？
*   我能做些什么来改进和修复这个方法
*   我可以应用另一个技巧吗？

这是我的来源：

```
<div>
    <div>Subpages</div>

    <ul>
    <?php subPages($this->subpages->toArray(), 0) ?>
    </ul>
    <br>
    <a href="javascript:;" onclick="">Add New Subpage</a>
</div>

<?php
    function subPages($subpages, $parent){

        foreach($subpages as $key => &$page){

            $newParent =  $page['id'];

            //If the current page is the parrent start a new list
            if($page['id'] == $parent)
            {
                //Echo out a new list
                echo '<ul>';
                echo '<li class="collapsed">';
                echo '<a href="javascript:;" class="toggle">+</a>';
                echo '<a href="javascript:;" onclick="">'.$page['title'].'</a>';        

                subPages($subpages, $newParent);

                echo '</li>';
                echo '</ul>';
            }
            //If the page's parent id matches the parent provided
            else if($page['parent_id'] == $parent)
            {
                //Echo out the link
                echo '<li class="collapsed">';
                echo '<a href="javascript:;" class="toggle">+</a>';
                echo '<a href="javascript:;" onclick="">'.$page['title'].'</a>';

                //Set the page as the new parent
                $newParent = $page['id'];

                //Remove page from array
                unset($subpages[$key]);

                //Check the rest of the array for children
                subPages($subpages, $newParent);

                echo '</li>';
            }
        }
    }
?> 
```

一如既往，感谢您提供任何帮助。如果有不清楚的地方，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T19:24:00.667

我怀疑你们是否仍在寻找一个真正的答案，但它可能会帮助其他有同样问题的人。下面是一个递归函数，用于将一个数组置于父母之下。

```
$initial = array(
    array(
        'name' => 'People',
        'ID' => 2,
        'parent' => 0
        ),
    array(
        'name' => 'Paul',
        'ID' => 4,
        'parent' => 2
        ),
    array(
        'name' => 'Liz',
        'ID' => 5,
        'parent' => 2
        ),
    array(
        'name' => 'Comus',
        'ID' => 6,
        'parent' => 3
        ),
    array(
        'name' => 'Mai',
        'ID' => 7,
        'parent' => 2
        ),
    array(
        'name' => 'Titus',
        'ID' => 8,
        'parent' => 3
        ),
    array(
        'name' => 'Adult',
        'ID' => 9,
        'parent' => 6
        ),
    array(
        'name' => 'Puppy',
        'ID' => 10,
        'parent' => 8
        ),
    array(
        'name' => 'Programmers',
        'ID' => 11,
        'parent' => 4
        )   ,
    array(
        'name' => 'Animals',
        'ID' => 3,
        'parent' => 0
        )                           
    );

/*---------------------------------
function parentChildSort_r
$idField        = The item's ID identifier (required)
$parentField    = The item's parent identifier (required)
$els            = The array (required)
$parentID       = The parent ID for which to sort (internal)
$result     = The result set (internal)
$depth          = The depth (internal)
----------------------------------*/

function parentChildSort_r($idField, $parentField, $els, $parentID = 0, &$result = array(), &$depth = 0){
    foreach ($els as $key => $value):
        if ($value[$parentField] == $parentID){
            $value['depth'] = $depth;
            array_push($result, $value);
            unset($els[$key]);
            $oldParent = $parentID; 
            $parentID = $value[$idField];
            $depth++;
            parentChildSort_r($idField,$parentField, $els, $parentID, $result, $depth);
            $parentID = $oldParent;
            $depth--;
        }
    endforeach;
    return $result;
}

$result = parentChildSort_r('ID','parent',$initial);

print '<pre>';
print_r($result);
print '</pre>'; 
```

这是一种从原始数组中删除元素并以正确顺序将它们放入结果集中的收尾方法。我对你来说有点通用，所以它只需要你告诉它你的“ID”字段和“父”字段被称为什么。顶级项目的 parent_id（无论您如何命名）都必须为 0。我还为每个项目添加了一个深度标记，以便您可以在输出时进行格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:32:27.320

我会尽力帮助你。

可以一次性组合出这样的关系：

```
 /**
     * Used for "recursive" folding of layout items
     * Algorithm of infinite tree (non recursive method)
     * 
     * @param array $items
     * @return array
     */
    function _foldItems($items) {

        $result = array();

        foreach ($items as $key => $item) {

            $itemName = $item['name'];

            if (!isset($item['parent']))
                continue;
            else {

                $parentName = $item['parent']; // it can be either `name` or some `id` of the parent item

                if (isset($result[$itemName][$item['sequence']])) {

                    // Done to eliminate `Warning: Cannot use a scalar value as an array in atLeisure_PropertyImport.class.php`
                    // Sometimes elements already in the list and have [name] => $count and next line tries to put item in array (item becomes parent)
                    if (    isset($result[$parentName][$item['parentSequence']]['items'][$itemName]) AND
                            is_scalar($result[$parentName][$item['parentSequence']]['items'][$itemName])
                        )
                        $result[$parentName][$item['parentSequence']]['items'][$itemName] = array();

                    $result[$parentName][$item['parentSequence']]['items'][$itemName][$item['sequence']] = $result[$itemName][$item['sequence']];

                    unset($result[$itemName][$item['sequence']]);
                } else
                    $result[$parentName][$item['parentSequence']]['items'][$itemName] = $item['count'];

                unset($items[$key]);

                } // if //

            if (empty($result[$itemName]))
                unset($result[$itemName]);

        } // foreach //

        foreach ($items as $item) { // enumerating rest of the items (single items)
            $itemName = $item['itemName'];

            if (!isset($result[$itemName]))
                $result[$itemName][$item['sequence']] = $item['count'];
        }

        return $result;

    } 
```

示例可能有点难以阅读和理解，因为代码真的太多了，但不久前我已经为一个项目创建了这个函数，它似乎可以成功运行。

**注意：**如果有多个相同的项目链接到一个父项目，它也将起作用。它使用项目序列号来避免将相似的值混为一。

# sql - 选择聚合和更新 - SQL Server

> ID：11990534
> 
> 赞同：3
> 
> 时间：2012-08-16T15:24:43.567
> 
> 标签：sql, sql-server

SQL Server 初学者在这里。我在 SELECT/UPDATE 语句上遇到了一些问题。我有一个带有订单号列和行号列的表。下面的 select 语句返回我想要的值。我想获取结果并将该数字插入到订单号匹配的同一表上的列中。我是不是想太多了？或者也许在考虑复杂性？:)

```
 SELECT
    ORDNUM, COUNT(LINNUM) AS 'CountLines'
    FROM [TableName]
    WHERE STS = '3' AND DUEQTY < ONHAND AND STYPE = 'CU'
    GROUP BY ORDNUM

    UPDATE [TableName]
    SET LNCNT = 'CountLines'
    WHERE ORDNUM = ORDNUM 
```

先感谢您。本

**更新：我在下面使用了 Andomars 解决方案，效果很好。谢谢大家的帮助。**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T15:27:56.903

使用 SQL Server 语法：

```
update  tn
set     LNCNT = SubQuery.CountLines
from    TableName as tn
join    (
        select  ordnum
        ,       count(linnum) as CountLines
        from    TableName
        where   sts = '3'
                and DUEQTY < ONHAND 
                and STYPE = 'CU'
        group by
                ordnum
        ) as SubQuery
on      SubQuery.ordnum = tn.ordnum 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T15:27:46.670

以下应该适用于 SQL Server：

```
with counts as
(
    SELECT
    ORDNUM, COUNT(LINNUM) AS 'CountLines'
    FROM [TableName]
    WHERE STS = '3' AND DUEQTY < ONHAND AND STYPE = 'CU'
    GROUP BY ORDNUM
)

    UPDATE tn
    SET tn.LNCNT = c.CountLines
    FROM TableName tn
    INNER JOIN counts as c
    ON tn.OrderNum = c.OrderNum 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:34:08.607

如果您在 MS SQL 中尝试过 DECLARE。

```
DECLARE @countlines INT 
SET @countlines = SELECT COUNT(LINNUM) FROM [AdvPickTicket] WHERE STS = '3' 
AND DUEQTY < ONHAND AND STYPE = 'CU' GROUP BY ORDNUM
UPDATE [TableName]
SET LNCNT = @countlines
WHERE ORDNUM = ORDNUM 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T16:18:53.003

试试这个

```
UPDATE [tablename]
SET LNCNT = abb.CountLines
FROM (SELECT 
    ORDNUM, COUNT(LINNUM) AS 'CountLines' 
    FROM [TableName] 
    WHERE STS = '3' AND DUEQTY < ONHAND AND STYPE = 'CU' 
    GROUP BY ORDNUM) AS abb 
```

# apache-flex - 如何收集由 ObjectBuilder 标签创建的对象并将它们作为集合分配给 Flex 4 Mate 框架中的另一个对象

> ID：11990541
> 
> 赞同：1
> 
> 时间：2012-08-16T15:25:13.160
> 
> 标签：apache-flex, flex4, inversion-of-control, mate

假设我在 Mate 事件映射中实例化了两个子对象：

```
<EventMap>
...
    <ObjectBuilder generator="{SubModelA}" />
    <ObjectBuilder generator="{SubModelB}" />
...
</EventMap> 
```

...以及一个必须包含集合中先前对象的主要对象：

```
...
<ObjectBuilder generator="{MainModel}" />
... 
```

如何使用 Mate 将创建的 SubModelA 和 SubModelB 对象作为集合分配给 MainModel 中的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:35:25.760

您必须使用 Mate`PropertyInjector`将它们注入到适当的 setter in 中`MainModel`，该 setter 处理收集逻辑。就像是：

```
<ns:Injectors target="{MainModel}">
    <ns:PropertyInjector source="{SubModelA}" targetKey="updateCollection"/>
    <ns:PropertyInjector source="{SubModelB}" targetKey="updateCollection"/>
</ns:Injectors> 
```

当然，您必须在`updateCollection`方法中为已添加的模型添加大量检查。使用自定义`[Bindable]`元数据，您甚至可以支持绑定到`MainModel`. 这有点难看（实际上，依赖注入的使用非常糟糕），但我很确定您无法以合理的方式从 EventMap 实例化任何集合。另一种方法是创建您的自定义 Mate 操作（这并不难，请参阅来源以获取如何操作的提示）。您也可以考虑简化您的设计。

# android - 使用 WindowManager 调整窗口大小时显示屏幕保护程序

> ID：11990547
> 
> 赞同：4
> 
> 时间：2012-08-16T15:25:25.757
> 
> 标签：android, google-tv

我（我希望）在为 Google TV 做一些开发时遇到了一点问题

我想做的是我希望能够在右下角显示一个小窗口，这很好..问题是我不确定如何在后台摆脱屏幕保护程序

这是我目前拥有的代码。

```
 public void onCreate(Bundle savedInstanceState)
{
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_eyece_box_window);

     final WindowManager.LayoutParams params = new WindowManager.LayoutParams(               
                         WindowManager.LayoutParams.TYPE_SYSTEM_ALERT,               
                         WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
                         | WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL
                         | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE); 
     params.gravity = Gravity.RIGHT | Gravity.BOTTOM;
     params.width = 300;
     params.height = 500;
     this.getWindow().setAttributes(params);

} 
```

所以我真正希望应用程序做的是显示在堆栈上方

![问题图片](../Images/f4c4c8b4066cb87eddbedcab0c0e6bf7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T05:34:05.073

将 android.permission.WAKE_LOCK 添加到清单并调用 PowerManager：

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock wl = pm.newWakeLock(
PowerManager.SCREEN_DIM_WAKE_LOCK
        | PowerManager.ON_AFTER_RELEASE, "tag");
wl.acquire();
wl.release(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T04:46:34.830

我认为我最好的解决方案是基本上废弃它并在自定义对话框上构建它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:50:21.680

如果您想在直播电视信号上进行叠加，那么您可以使用此意图让直播电视显示：

```
final Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setData(Uri.parse("tv://passthrough"));
context.startActivity(intent); 
```

# javascript - 如何通过单击选项而不是实际按钮本身来选择单选按钮

> ID：11990549
> 
> 赞同：2
> 
> 时间：2012-08-16T15:25:30.377
> 
> 标签：javascript, jquery

假设我有以下三个选项，每个选项旁边都有一个单选按钮

*   伦敦
*   纽约
*   迪拜

我需要 jQuery，当用户单击单选按钮选择的单词时！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:27:29.320

这是 HTML 中的内置功能，因此不需要 JavaScript。只需`label`像这样使用标签：

```
<label><input type="radio"> London</label>
<label><input type="radio"> New York</label>
<label><input type="radio"> Dubai</label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:30:03.510

两种方式：

1.  `<label for="london"><input type="radio" id="london"> London</label>`.

使用类似于' `label`s 的属性。`for``radio``id`

1.  `<label><input type="radio" > London</label>`

放置`radio`内`label`。

很基础`HTML`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T15:30:51.100

您可以使用标签标签：

```
<input id="emptyacct" type="radio" name="account" value="radiobutton" />
<label for="emptyacct">Yes </label> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T15:27:20.480

它只是 HTML ;)

```
<input id="input_london" type="radio" name="london" value="radiobutton" />
<label for="input_london">London</label>

<input id="input_ny" type="radio" name="ny" value="radiobutton" />
<label for="input_ny">New York</label>

... 
```

# jquery - 等待 div 中的图像在使用 ajax 附加内容和 jquery 的fadeIn() 之前加载

> ID：11990550
> 
> 赞同：3
> 
> 时间：2012-08-16T15:25:32.043
> 
> 标签：jquery, ajax, fadein

我正在使用 jquery 的 $.ajax 将图像页面加载到 div 中的站点上工作。当用户滚动到页面底部时，另一页图像被加载到 div 中。目前我有新的内容淡入，但它在图像完全加载之前淡入。我检查了解决方案，但找不到任何对我有用的解决方案。为了澄清，每组图像都是一个 div，其中填充了单个图像的 div。

这是我正在使用的加载功能：

```
function loadContent(pageName, pageView, max_feed){
        loader="<div id=loader><img src=SPACER" height=\"100\" \>"
            + "<br/><img src=\"LOADER" />"
            + "<br/><img src=\"SPACER" height=\"100\" \></div>";
        $(loader).appendTo('#photo_container').fadeIn('fast');
        $.ajax({
            url:pageName,
            data:{view:pageView, max_feed_id:max_feed},
            success:function(result){
                $('#loader').remove();                  
                $(result)
                    .appendTo('#photo_container')
                    .hide()
                    .fadeIn('slow');
                $(window).data('loading', false);
            }
        });
    }; 
```

有没有什么简单的方法可以在调用 fadeIn() 之前等待新内容加载？即有没有类似的东西

```
$(window).load(...) 
```

我可以只用于 div 内容吗？我正在考虑设置某种全局变量，例如 isLoadingMore 然后在 ajax 加载内容的开头将其设置为 false，然后添加

```
$(window).load(...) 
```

函数到 ajax 页面，其中有一个函数将变量设置为 true，然后在调用 loadContent 函数中的 fadeIn 函数之前添加一个 while 循环或等待该标志设置为 true 的东西。不知道这是否是一个好主意，甚至工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T15:27:36.850

在您的图像上，您可以执行以下操作

```
$('img').load(function(e){
$(this).fadeIn();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:55:17.890

听起来我的插件是一个不错的候选者：[waitForImages](https://github.com/alexanderdickson/waitForImages)。

# .net - 任务并行库和异常？

> ID：11990551
> 
> 赞同：1
> 
> 时间：2012-08-16T15:25:42.067
> 
> 标签：.net, task-parallel-library

我应该这样做吗？

```
int x = 0;
Task<int> calc = Task.Factory.StartNew (() => 7 / x);
try
{
  Console.WriteLine (calc.Result);
}
catch (AggregateException aex)
{
  Console.Write (aex.InnerException.Message);  // Attempted to divide by 0
} 
```

或这个？

```
int x = 0;
try
{
  Task<int> calc = Task.Factory.StartNew (() => 7 / x);
  Console.WriteLine (calc.Result);
}
catch (AggregateException aex)
{
  Console.Write (aex.InnerException.Message);  // Attempted to divide by 0
} 
```

如果任务立即开始并且在我们进入 try catch 块之前，我们将不会捕获它......！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:23:39.147

使用的要点之一`Task`是您几乎不必担心这样的事情。

正如您所注意到的，您的第一个样本有两种可能的事件顺序：

1.  `StartNew()`从线程 A 调用。
2.  `Result`从线程 A 调用 getter。任务尚未完成，因此调用阻塞。
3.  委托在 ThreadPool 线程 B 上执行并抛出`DivideByZeroException`.
4.  线程 A 醒来并`Result`抛出`AggregateException`.

第二种可能是：

1.  `StartNew()`从线程 A 调用。
2.  委托在 ThreadPool 线程 B 上执行并抛出`DivideByZeroException`.
3.  `Result`从线程 A 调用 getter。任务已经完成，因此调用立即抛出`AggregateException`.

如您所见，在这两种情况下，`Result`getter 都会引发异常，代码执行的顺序无关紧要。

`StartNew()`您的第二个版本只有在可以 throw时才有意义`AggregateException`，但这永远不会发生。

让我重复一遍：TPL 负责所有同步，您不必在这里担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:24:24.033

任务有一个`Exception`属性来保存在任务执行期间抛出的异常（如果有的话）。这意味着您可以这样做：

```
int x = 0;
Task<int> calc = Task.Factory.StartNew(() => 7 / x);
calc.ContinueWith(t => Console.WriteLine ("Got exception of {0}", t.Exception),
                  TaskContinuationOptions.OnlyOnFaulted); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:25:43.403

您希望在 try 块中执行**尽可能少的代码，**因为您包含的代码越多，您将捕获的虚假、不需要的异常就越多。你只想抓住那些你知道它们是良性的。你不想吞下虫子。

因此，要么这样做：

```
var task = ...;
int result;
try { result = task.Result; } //just catch task.Result
... 
```

甚至这个：

```
if (task.Exception != null) { /* error */ }
else { /* use task.Result */ } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T16:37:39.013

在这种情况下，您不需要将其包含在 try 块中。[Task.Factory.StartNew](http://msdn.microsoft.com/en-us/library/dd321439.aspx)不会抛出异常，除非你传递给它一个 null Action 来执行。正在运行的操作引发的任何异常都将传播到任务中，而不是堆栈。

更一般地说，我认为这些情况的经验法则是异常应该始终进入任务。例如，如果您在异步方法中的第一个 await 之前抛出异常，它也会进入结果任务，而不是向上传播堆栈。

# combobox - gtk2hs 中的组合框，林间空地

> ID：11990554
> 
> 赞同：1
> 
> 时间：2012-08-16T15:25:48.510
> 
> 标签：combobox, glade, gtk2hs

我使用 glade 创建了 Window、ComboBox、Buttons，代码如下：

```
module Main where
import Graphics.UI.Gtk
import Graphics.UI.Gtk.Glade

main = do
    initGUI
    Just xml <- xmlNew "Tp.glade"
    window <- xmlGetWidget xml castToWindow "window1"
    button <- xmlGetWidget xml castToButton "button1"

    comboBox  <- xmlGetWidget xml castToComboBox "combobox1"

    onClicked button $ do
         putStrLn $ "Apply button selected " 
         selected <- comboBoxGetActiveText comboBox

         print selected

   onDestroy window mainQuit
   widgetShowAll window
   mainGUI 
```

*如果我从 ComboBox 中选择一个选项并单击操作按钮，则会显示以下错误消息* **UI.exe：用户错误（gtk\Graphics\UI\G tk\MenuComboToolbar\ComboBox.chs.pp 的 do 表达式中的模式匹配失败： 244:2-13)**

当我从 ComboBox 中选择一个选项时，是否需要为要执行的操作提供单独的功能？请帮我！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:13:38.963

如 Gtk2Hs 文档中所述，comboBoxGetActiveText “返回组合框中当前活动的字符串，如果没有选择则返回 Nothing。请注意，您只能将此函数用于使用 comboBoxNewText 构造的组合框。”

如果要使用此功能，请尝试以下选项之一：

*   不要在 Glade 文件中设置组合框（可能是 ListStore）的 TreeModel 并在该行`comboBoxSetModelText comboBox`之后添加该行`comboBox <- xmlGetWidget xml castToComboBox "combobox1"`。这可能会正常工作，因为 comboBoxNewText “在创建新组合框后内部调用 comboBoxSetModelText”。
*   从 Glade 文件中删除组合框小部件，自己创建它（替换该行`comboBox <- xmlGetWidget xml castToComboBox "combobox1"`并将`comboBox <- comboBoxNewText`其手动打包到程序的主窗口中。

请注意，TreeModel 可以保存任何类型的数据。由于 Haskell 处理数据的方式与 C 或 Python 等命令式语言不同，因此使用 Glade 创建的树模型无法导入到 Haskell 应用程序中：您必须在 Haskell 程序中定义它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:47:11.263

如果您使用该`comboBoxGetActive`函数，它将返回一个 Int ，然后您可以对`comboBox`. 这可以在`Graphics.UI.Gtk.MenuComboToolbar.ComboBox`API 中找到。

# python - 如何从函数进行全局导入？

> ID：11990556
> 
> 赞同：75
> 
> 时间：2012-08-16T15:26:02.457
> 
> 标签：python, import, module, python-module

我担心这是解决问题的一种混乱方式，但是......

假设我想根据某些条件在 Python 中进行一些导入。

出于这个原因，我想写一个函数：

```
def conditional_import_modules(test):
    if test == 'foo':
        import onemodule, anothermodule
    elif test == 'bar':
        import thirdmodule, and_another_module
    else:
        import all_the_other_modules 
```

现在我怎样才能让导入的模块全局可用？

例如：

```
conditional_import_modules(test='bar')
thirdmodule.myfunction() 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-08-16T15:39:09.043

导入的模块只是变量 - 名称绑定到某些值。因此，您只需导入它们并使用`global`关键字将它们设为全局。

例子：

```
>>> math
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'math' is not defined
>>> def f():
...     global math
...     import math
...
>>> f()
>>> math
<module 'math' from '/usr/local/lib/python2.6/lib-dynload/math.so'> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-16T16:25:56.370

您可以在这样的函数中使导入全局化：

```
def my_imports(module_name):
    globals()[module_name] = __import__(module_name) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-09T07:46:18.780

您可以使用内置函数[`__import__`](https://docs.python.org/3.4/library/functions.html#__import__)有条件地导入具有全局范围的模块。

要导入顶级模块（想想：）`import foo`：

```
def cond_import():
  global foo
  foo = __import__('foo', globals(), locals()) 
```

从层次结构导入（想想：）`import foo.bar`：

```
def cond_import():
  global foo
  foo = __import__('foo.bar', globals(), locals()) 
```

从层次结构和别名导入（想想：）`import foo.bar as bar`：

```
def cond_import():
  global bar
  foo = __import__('foo.bar', globals(), locals()) 
  bar = foo.bar 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-17T14:11:37.317

我刚刚遇到了类似的问题，这是我的解决方案：

```
class GlobalImport:

    def __enter__(self):
        return self

    def __call__(self):
        import inspect
        self.collector = inspect.getargvalues(inspect.getouterframes(inspect.currentframe())[1].frame).locals

    def __exit__(self, *args):
        globals().update(self.collector) 
```

然后，在代码中的任何地方：

```
with GlobalImport() as gi:
    import os, signal, atexit, threading, _thread
    # whatever you want it won't remain local
    # if only 
    gi()
    # is called before the end of this block

# there you go: use os, signal, ... from whatever place of the module 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-22T19:52:01.480

我喜欢@badzil 方法。

```
def global_imports(modulename,shortname = None, asfunction = False):
    if shortname is None: 
        shortname = modulename
    if asfunction is False:
        globals()[shortname] = __import__(modulename)
    else:        
        globals()[shortname] = eval(modulename + "." + shortname) 
```

所以传统上在类模块中的东西：

```
import numpy as np

import rpy2
import rpy2.robjects as robjects
import rpy2.robjects.packages as rpackages
from rpy2.robjects.packages import importr 
```

可以转换为全局范围：

```
global_imports("numpy","np")

global_imports("rpy2")
global_imports("rpy2.robjects","robjects")
global_imports("rpy2.robjects.packages","rpackages")
global_imports("rpy2.robjects.packages","importr",True) 
```

可能有一些错误，我将验证和更新。最后一个例子也可以有一个别名，它可以是另一个“shortname”或像“importr|aliasimportr”这样的hack

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-16T15:28:30.540

您可以让此函数返回要导入的模块的名称，然后使用

```
mod == __import__(module_name) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-11-12T04:00:48.193

我喜欢@rafał grabie 方法。因为它甚至支持全部导入。即从操作系统导入*

（尽管这是不好的做法 XD）

不允许评论，但这里是python 2.7版本。

还消除了最后调用函数的需要。

```
class GlobalImport:
    def __enter__(self):
        return self
    def __exit__(self, *args):
        import inspect
        collector = inspect.getargvalues(inspect.getouterframes(inspect.currentframe())[1][0]).locals
        globals().update(collector)

def test():
    with GlobalImport() as gi:
        ## will fire a warning as its bad practice for python. 
        from os import *

test()
print path.exists(__file__) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-06-22T14:04:59.850

第 1 步：config.py、config_v2.py、rnd.py 在同一目录/文件夹中

第二步：config.py

```
HIGH_ATTENDANCE_COUNT_MIN = 0 
```

第三步：config_v2.py

```
HIGH_ATTENDANCE_COUNT_MIN = 5 
```

第四步：rnd.py

```
def versioning_test(v):
    global config

    if v == 'v1':
        config = __import__('config', globals(), locals()) 

    if v == 'v2':
        config = __import__('config_v2', globals(), locals())     

def version_test_in_another_function():
    print('version_test_in_another_function: HIGH_ATTENDANCE_COUNT_MIN: ', config.HIGH_ATTENDANCE_COUNT_MIN)

versioning_test("v2")
version_test_in_another_function() 
```

第五步：$ python3 rnd.py

```
<<output>>: version_test_in_another_function: HIGH_ATTENDANCE_COUNT_MIN:  5 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-11-11T17:16:07.397

我喜欢@maxschlepzig 的回答。

该方法存在一个错误，即如果您直接导入一个函数，它将不起作用。例如，

```
global_imports("tqdm", "tqdm, True) 
```

不起作用，因为未导入该模块。还有这个

```
global_imports("tqdm")
global_imports("tqdm", "tqdm, True) 
```

作品。

我稍微改变了@maxschlepzig 的答案。使用 fromlist 以便您可以使用“From”语句以统一的方式加载函数或模块。

```
def global_imports(object_name: str,
                   short_name: str = None,
                   context_module_name: str = None):
    """import from local function as global import

    Use this statement to import inside a function,
    but effective as import at the top of the module.

    Args:
        object_name: the object name want to import,
                     could be module or function
        short_name: the short name for the import
        context_module_name: the context module name in the import

    example usage:
    import os -> global_imports("os")
    import numpy as np -> global_imports("numpy", "np")
    from collections import Counter ->
        global_imports("Counter", None, "collections")
    from google.cloud import storage ->
        global_imports("storage", None, "google.cloud")

    """
    if not short_name:
        short_name = object_name
    if not context_module_name:
        globals()[short_name] = __import__(object_name)
    else:
        context_module = __import__(context_module_name,
                                    fromlist=[object_name])
        globals()[short_name] = getattr(context_module, object_name) 
```

# c# - 洪水填充算法分析

> ID：11990567
> 
> 赞同：0
> 
> 时间：2012-08-16T15:26:20.777
> 
> 标签：c#, algorithm, fill

我有一些洪水填充算法的方法。这很简单

1.  前往顶部的第一个障碍。

2.  将像素颜色更改为底部

3.  在更改检查左/右像素是否为不同颜色时

4.  如果是：也为该列着色（stack.push()）

5.  环形。

    ```
     Stack<Point> st = new Stack<Point>();
        bool spLeft, spRight;

        Bitmap b = canvas.buffer;

        st.Push(start);
        spLeft = spRight = false;

        Point p = new Point();
        while (st.Count > 0) 
        {
            //going as far top as possible (finding first obstacle)
            p = st.Pop();
            while (p.Y >= 0 && b.GetPixel(p.X, p.Y) == oldColor) p.Y--;
            p.Y++;
            spLeft = spRight = false;

            //looping on every oldColored pixel in column
            while (p.Y < b.Height && b.GetPixel(p.X, p.Y) == oldColor) {
                b.SetPixel(p.X, p.Y, state.currentColor); //setting new color

                //checking if left pixel is oldColored and if it doesn't belong to span
                if (!spLeft && p.X > 0 && b.GetPixel(p.X - 1, p.Y) == oldColor) {
                    st.Push(new Point(p.X - 1, p.Y));
                    spLeft = true;
                }
                //checking if left pixel isn't oldColored and if it belongs to span
                else if (spLeft && p.X > 0 && b.GetPixel(p.X - 1, p.Y) != oldColor) {
                    spLeft = false;
                }
                if (!spRight && p.X < b.Width - 1 && b.GetPixel(p.X + 1, p.Y) == oldColor) {
                    st.Push(new Point(p.X + 1, p.Y));
                    spRight = true;
                }
                else if (spRight && p.X < b.Width - 1 && b.GetPixel(p.X + 1, p.Y) != oldColor) {
                    spRight = false;
                }
                p.Y++;
            }

        } 
    ```

关键是我只是不明白这些部分

```
 //checking if left pixel isn't oldColored and if it belongs to span
    else if (spLeft && p.X > 0 && b.GetPixel(p.X - 1, p.Y) != oldColor) {
    spLeft = false; 
```

和

```
 else if (spRight && p.X < b.Width - 1 && b.GetPixel(p.X + 1, p.Y) != oldColor) {
    spRight = false;
            } 
```

没有这些，代码就可以正常工作，并且看起来它具有相同数量的迭代。你能帮我弄清楚这些线是真的没用还是我只是不理解它们？（我不敢相信我的朋友无目的放它们）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:56:52.387

它们允许填充多个区域。开头的 if 语句检查它们是否为假并将一个像素添加到堆栈中。那些在该区域完成时重置。

如果不重置 spLeft 区域 2 将不会被填充，因为当遇到第一个区域时它会被设置为 true（这避免了不必要地向堆栈添加批次）。

![在此处输入图像描述](../Images/d0013e5341d6afbed18a608bb6f65947.png)

# c# - Excel 互操作。将 xls 保存为 csv 而不会丢失精度

> ID：11990573
> 
> 赞同：1
> 
> 时间：2012-08-16T15:26:44.417
> 
> 标签：c#, excel

我想使用 Excel 互操作将工作表保存为 CSV 文件。通过使用：

```
sheet.SaveAs(tempfile, Microsoft.Office.Interop.Excel.XlFileFormat.xlCSVWindows); 
```

导致精度下降。遍历每个单元格并构建 CSV 不是一种选择，因为它非常慢。从 Range 获取值数组也不好，因为我无法以这种方式获取单元格的 NumberFormat。

我注意到精度丢失了，因为在导出到 CSV 保存的值是显示的值，而不是实际在单元格中的值。

有什么建议吗？

# xcode - 核心数据 - 拒绝删除规则导致错误

> ID：11990576
> 
> 赞同：2
> 
> 时间：2012-08-16T15:27:02.607
> 
> 标签：xcode, ios5

我有一个运行良好的核心数据应用程序。我现在正在尝试将删除规则添加到实体 1 有一组实体 2 的几个关系中

如果实体 1 被删除并且它有一些实体 2 对象，则拒绝删除，否则允许。可以删除实体 2 而无需担心实体 1

我将实体 1 的关系设置为拒绝，而实体 2 的关系设置为无效

我目前在尝试删除实体 1 时遇到错误 [quote]Unresolved error Error Domain=NSCocoaErrorDomain Code=1600 “操作无法完成。（Cocoa 错误 1600。）”UserInfo=0x1e882f40 {NSValidationErrorObject=（实体：工厂；id：0x1dda43e0 [/quote]

我是否必须做其他事情才能使其正常工作

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T11:24:52.213

拒绝规则没有按您的预期工作。来自 Apple 的文档：

> 如果规则为拒绝，则在删除对象之前，必须从关系中删除目标对象或多个对象，否则在保存时会出现验证错误。

不幸的是，拒绝规则不会阻止删除，但会导致验证错误。所以你应该在删除之前手动检查关系是否为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T05:14:25.677

当以下情况成立时，您将生成 1600 错误：

*   **拒绝**删除规则在实体 1 到实体 2 的关系中生效
*   您已删除 Entity 1 对象
*   Entity1.entity2 处有一个相关对象
*   您尝试将持久存储保存到上下文

在执行实体 1 对象的删除之前，您应该检查 Entity1.entity2 是否为空。如果不是，请执行以下任一选项：

*   跳过实体 1 对象的删除，或者，
*   将 Entity1.entity2 对象归零，然后删除 Entity 1 对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T15:42:13.997

在我删除了与它的关系有规则的`detail`对象后，错误发生在我身上。同时，对与 的关系有规则。在我将' 规则从更改为 后，错误消失了。`nullify``master``master``cascade``details``detail``nullify``no action`

它对我来说仍然很奇怪。无法理解错误的原因。

# ubuntu - 我应该为 Ubuntu 11.10 x32 使用哪个 Vagrant 发行版

> ID：11990580
> 
> 赞同：0
> 
> 时间：2012-08-16T15:27:13.840
> 
> 标签：ubuntu, vagrant

我的电脑上有 ubuntu 11.10 x32 版本，需要为项目设置 Vagrant，但在他们的下载页面上找不到发行版：

[http://downloads.vagrantup.com/tags/v1.0.3](http://downloads.vagrantup.com/tags/v1.0.3)（当前）

vagrant_1.0.3_i686.deb 和 vagrant_1.0.3_x86_64.deb 显然都不起作用。如何获取和运行我的操作系统的版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:52:44.787

Vagrant 是一个 Ruby Gem，所以如果你可以运行 Ruby，你总是可以在任何平台上运行最新版本。当然，您应该安装 OpenBox，并可能调整由独立安装程序设置的一些设置，但这样至少可以工作。

# r - R 命名空间访问和 match.fun

> ID：11990589
> 
> 赞同：5
> 
> 时间：2012-08-16T15:27:47.887
> 
> 标签：r, namespaces, package

我正在开发一个 R 包，其中一个函数包含`match.fun`对导入到包命名空间的包中的函数的调用。但是在加载包时，`match.fun`调用找不到函数名。根据[Hadley Wickham 的描述](https://github.com/hadley/devtools/wiki/Namespaces)，我认为我做的一切都是正确的，但显然情况并非如此。

例子：

```
# in the package file header, for creation of the NAMESPACE via roxygen2:
##` @import topicmodels

# The function declaration in the package
ModelTopics <- function(doc.term.mat, num.topics, topic.method="LDA"){
  topic.fun <- match.fun(topic.method)
  output <- topic.fun(doc.term.mat, k=num.topics)
  return(output)

} 
```

然后在 R 中：

```
> library(mypackage)
> sample.output <- ModelTopics(my.dtm, topic.method="LDA", num.topics=5)
Error in get(as.character(FUN), mode = "function", envir = envir) : 
  object 'LDA' of mode 'function' was not found 
```

根据我对命名空间的理解，`match.fun`调用应该可以访问包命名空间，其中应该包含`topicmodels`函数。但这里的情况似乎并非如此。如果我`topicmodels`直接导​​入到 R 会话的全局命名空间，那么这可行。

任何帮助深表感谢。这是在 OSX 上运行的 R64 2.14.1。

更新：包裹在[这里](https://github.com/markhuberty/leghist)

重新描述文件，也许这就是问题所在：roxygen2 没有用`Imports:`语句更新描述文件。但是那里也没有列出其他软件包；只有`match.fun`通话似乎受到影响。

重新命名空间提取，这是导入部分：

```
import(catspec)
import(foreach)
import(gdata)
import(Hmisc)
import(igraph)
import(lsa)
import(Matrix)
import(plyr)
import(RecordLinkage)
import(reshape)
import(RWeka)
import(stringr)
import(tm)
import(topicmodels) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T16:13:30.270

我认为这是一个范围问题。尽管您已经导入了`topicmodels`and `LDA`，但您还没有导出这些函数，因此它们在搜索路径中不可用。

来自`?match.fun`：

> *`match.fun`不打算在顶层使用，因为它将在调用者的父级中执行匹配。*

因此，由于您在全局环境中使用`ModelTopics`，并且在全局环境`LDA`中不可用，因此`match.fun`调用失败。

* * *

在我看来，您有两种选择：

## 选项 1：使用`get`

另一种方法是使用`get`可以指定环境的地方。考虑一下：尝试使用在包`match.fun`中查找：`print.ggplot``ggplot2`

```
match.fun("print.ggplot")
Error in get(as.character(FUN), mode = "function", envir = envir) : 
  object 'print.ggplot' of mode 'function' was not found 
```

由于`print.ggplot`没有导出，`match.fun`所以找不到。

但是，`get`确实找到了它：

```
get("print.ggplot", envir=environment(ggplot))
function (x, newpage = is.null(vp), vp = NULL, ...) 
{
    set_last_plot(x)
    if (newpage) 
        grid.newpage()
    data <- ggplot_build(x)
    gtable <- ggplot_gtable(data)
    if (is.null(vp)) {
        grid.draw(gtable)
    }
    else {
        if (is.character(vp)) 
            seekViewport(vp)
        else pushViewport(vp)
        grid.draw(gtable)
        upViewport()
    }
    invisible(data)
}
<environment: namespace:ggplot2> 
```

## 选项 2：从中导出`topicmodels`您需要的功能

如果您在 NAMESPACE 中提供了必要的功能`topicmodels`，您的代码也应该可以工作。

通过以下任一方式执行此操作：

*   使用选择性导出`LDA`和其他功能到命名空间`@export`
*   声明一个依赖，使用- 这与在全局环境`Depends: topicmodels`中调用相同。`library(topicmodels)`这将起作用，但可能是一种蛮力方法。这也意味着任何后续`library`调用都可能掩盖您的`LDA`函数，从而导致意外结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:00:52.653

回答我自己的问题：DESCRIPTION 文件在重新氧化更新的代码后没有更新`Imports:`and字段。`Depends:`因此`match.fun`问题。出于好奇，为什么这会影响`match.fun`但不影响在其他地方对导入的包函数进行的一系列其他函数调用？

# c - 在这种情况下增量运算符的功能

> ID：11990591
> 
> 赞同：-4
> 
> 时间：2012-08-16T15:27:52.793
> 
> 标签：c

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

我有这段代码，但我不知道它是如何运作的。

```
main()
{
 int i=1;
 i= ++i + ++i + ++i;
 printf("%d",i);
} 
```

我试图编译它并得到输出 10 但我不知道如何。我发现在执行加法运算之前，两个 ++i 被赋值为 3，一个 ++i 被赋值为 4。我无法弄清楚在这种情况下增量运算符是如何工作的。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:28:49.860

行为*[未定义](http://en.wikipedia.org/wiki/Undefined_behavior)*..如果您在 SO 上搜索，会有***很多***类似的帖子。

例如[x = x++ + ++x 的评估顺序是什么？是？](https://stackoverflow.com/questions/2367969/what-would-the-evaluation-order-of-x-x-x-be?lq=1)或者[为什么这些构造（使用++）是未定义的行为？](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)和更多。

最后，只是一个意见/评论：我认为没有人会提倡编写这种类型的代码，因为它也很难理解（因此是您提出问题的原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:30:16.950

我很确定你不应该那样做。基本上，不要在同一个表达式中多次修改一个值。否则会调用“未定义的行为”，这是一种奇特的说法，即“编译器不保证会发生什么。

[（从技术上讲，规则是不要在相同的序列点](http://en.wikipedia.org/wiki/Sequence_point)之间多次修改一个值）

# php - PHP - 将图像从 .jpg 解压缩并转换为 .bmp

> ID：11990601
> 
> 赞同：2
> 
> 时间：2012-08-16T15:28:17.347
> 
> 标签：php, image, converter, unzip

我有一个代码可以解压缩我上传到服务器的文件，它可以正常工作。

但现在我想添加另一个功能。我想将 .zip 文件（.zip 文件仅包含图像）中的所有图像从 .jpg 格式转换为 .bmp。

```
<?php
$file = $target_path1;

$path = $target_path2;

$zip = new ZipArchive;
$res = $zip->open($file);
if ($res === TRUE) {

  $zip->extractTo($path);
  $zip->close();
  unlink($target_path1);    
} 

?> 
```

有一些简单的方法可以做到吗？如果没有，至少我可以获得提取图像的名称吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:26:26.813

您首先使用[imagecreatefromjpeg()](http://www.php.net/manual/en/function.imagecreatefromjpeg.php)从文件中创建一个图像对象。然后将该对象转储为不同的格式（例如使用[imagegif()](http://www.php.net/manual/en/function.imagegif.php)）：

```
$imageObject = imagecreatefromjpeg($imageFile);
imagegif($imageObject, $imageFile . '.gif');
imagepng($imageObject, $imageFile . '.png');
imagewbmp($imageObject, $imageFile . '.bmp'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-02-25T05:15:45.497

```
class ToBmp{

    // new image width
    var $new_width;

    // new image height
    var $new_height;

    // image resources
    var $image_resource;

    function image_info($source_image){
        $img_info = getimagesize($source_image);

        switch ($img_info['mime']){
            case "image/jpeg": { $this->image_resource = imagecreatefromjpeg ($source_image); break; }
            case "image/gif": { $this->image_resource = imagecreatefromgif ($source_image); break; }
            case "image/png": { $this->image_resource = imagecreatefrompng ($source_image); break; }
            default: {die("unsupported image time");}
        }
    }

    public function imagebmp($file_path = ''){

        if(!$this->image_resource) die("cant not convert. image resource is null");
        $picture_width = imagesx($this->image_resource);
        $picture_height = imagesy($this->image_resource);

        if(!imageistruecolor($this->image_resource)){
            $tmp_img_reource = imagecreatetruecolor($picture_width,$picture_height);
            imagecopy($tmp_img_reource,$this->image_resource, 0, 0, 0, 0, $picture_width, $picture_height);
            imagedestroy($this->image_resource);
            $this->image_resource = $tmp_img_reource;

        }

        if((int) $this->new_width >0 && (int) $this->new_height > 0){

            $image_resized = imagecreatetruecolor($this->new_width, $this->new_height);
            imagecopyresampled($image_resized,$this->image_resource,0,0,0,0,$this->new_width,$this->new_height,$picture_width,$picture_height);
            imagedestroy($this->image_resource);
            $this->image_resource = $image_resized;

        }

        $result = '';

        $biBPLine = ((int) $this->new_width >0 &&(int)$this->new_height > 0) ? $this->new_width * 3 : $picture_width * 3;
        $biStride = ($biBPLine + 3) & ~3;
        $biSizeImage = ((int) $this->new_width >0 &&(int)$this->new_height > 0) ? $biStride * $this->new_height : $biStride * $picture_height;
        $bfOffBits = 54;
        $bfSize = $bfOffBits + $biSizeImage;

        $result .= substr('BM', 0, 2);
        $result .= pack ('VvvV', $bfSize, 0, 0, $bfOffBits);
        $result .= ((int) $this->new_width >0 &&(int)$this->new_height > 0) ? pack ('VVVvvVVVVVV', 40, $this->new_width, $this->new_height, 1, 24, 0, $biSizeImage, 0, 0, 0, 0) : pack ('VVVvvVVVVVV', 40, $picture_width, $picture_height, 1, 24, 0, $biSizeImage, 0, 0, 0, 0);

        $numpad = $biStride - $biBPLine;

        $h = ((int) $this->new_width >0 &&(int)$this->new_height > 0) ? $this->new_height : $picture_height;
        $w = ((int) $this->new_width >0 &&(int)$this->new_height > 0) ? $this->new_width : $picture_width;

        for ($y = $h - 1; $y >= 0; --$y) {
            for ($x = 0; $x < $w; ++$x) {
                $col = imagecolorat ($this->image_resource, $x, $y);
                $result .= substr(pack ('V', $col), 0, 3);
            }
            for ($i = 0; $i < $numpad; ++$i) {
                $result .= pack ('C', 0);
            }
        }

    if($file_path == ''){

        header("Content-type: image/bmp");
        echo $result;
    } else {

        $fp = fopen($file_path,"wb");
        fwrite($fp,$result);
        fclose($fp);
        //=============
    }   
    return ;    
    }
}

                                $ToBMP = new ToBmp();
                                $ToBMP->image_info('imgqr/'.$name.'image.png');
                                $ToBMP->new_width  = 300;
                                $ToBMP->new_height = 300;
                                $ToBMP->imagebmp('imgqr/'.$name."image.bmp"); 
```

# java - 编程编译器

> ID：11990602
> 
> 赞同：1
> 
> 时间：2012-08-16T15:28:19.490
> 
> 标签：java, compiler-construction

我正在寻找一个小型编译器供个人/朋友使用。只是一些基本的输入输出控制台功能。以及所有其他的东西，比如字符串、整数、浮点数、字符、布尔值等等。但我想在java中做到这一点。我知道你要说什么，我应该使用一些实用且快速的东西，比如 C。但我也想要一点 OOP。现在，你一定在想，C++。我有一个问题。它完成的程序是.exe 文件。现在我知道您不需要安装任何东西来运行 .exe，并且要运行 .jar（我想要的文件），您需要安装 JVM。但是我有一些朋友在使用 Apple 电脑，而我没有 Apple，所以我无法为这些人提供另一个用 Obj-c 编写的版本。您可以在 Apple 上获得 JVM，如果需要，甚至可以在 linux 上获得，这将是一个跨平台。我知道它会慢一些，但它只是一种小语言，与第一个计算器等需要几分钟的东西相比，差异是如此之小。除非帮助是“获得生活”或“学习 C”之类的帮助，否则任何和所有帮助都将得到重视。我最擅长Java，并且喜欢跨平台，所以如果你建议任何不是Java的东西，我会很生气。谢谢！

编辑：没有多少人能看到我要问的问题，所以又来了。我想知道如何在java中制作A编译器。而已。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T15:36:13.803

看看这些教程/链接：

*   [创建自己的编程语言](http://www.codeproject.com/Articles/50377/Create-Your-Own-Programming-Language)
*   [为 Java 构建自己的脚本语言](http://www.javaworld.com/javaworld/jw-04-2006/jw-0424-scripting.html)
*   [创建自己的编程语言](http://nathansuniversity.com/)
*   [使用 JavaCC 构建您自己的语言](http://www.javaworld.com/jw-12-2000/jw-1229-cooltools.html)
*   [如何创建自己的编译器](http://tutorialsblogs.com/how-to-create-a-compiler/)
*   [为 .NET Framework 创建一个语言编译器](http://msdn.microsoft.com/en-us/magazine/cc136756.aspx)（可能有助于逻辑）

如果你想创建一个编译器来编译你自己的语言，那么你必须做更多的工作，然后创建一个*编译器*。您需要语言语法、堆、堆栈、助记符、操作码、调试器等，最后是*编译器*。

但是，如果您想为 Java 语言创建自己的自定义编译器，请参阅：

*   [类文件格式](http://docs.oracle.com/javase/specs/jvms/se5.0/html/ClassFile.doc.html)
*   [Java 虚拟机指令集](http://docs.oracle.com/javase/specs/jvms/se5.0/html/VMSpecTOC.doc.html)
*   [虚拟机规格](http://docs.oracle.com/javase/specs/)
*   [编译成java字节码（不使用Java）](https://stackoverflow.com/questions/688098/compile-to-java-bytecode-without-using-java)

应该这样做。

您可能会查看字节码工程库 ( [BCEL](http://commons.apache.org/bcel/) ) 以及 Findbugs（它必须阅读/理解类文件）来获得一些灵感。

编辑：

这是另一个类似的问题，有一些很好的答案：[Learning to write a compiler](https://stackoverflow.com/questions/1669/learning-to-write-a-compiler)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T15:46:32.027

这是一本让你入门的好书，对初学者来说真的很好。它从易于理解的理论开始，向您展示如何编写微型编译器以及如何逐步改进它。

[使用 Java、JavaCC 和 Yacc 构建编译器](https://rads.stackoverflow.com/amzn/click/com/0470949597)

这是另一个，它包含很长的代码清单（你可能喜欢也可能不喜欢），很容易理解。

[编写编译器和解释器：一种软件工程方法](https://rads.stackoverflow.com/amzn/click/com/0470177071)

还有其他 Java 编译器书籍和大量非 Java 编译器书籍（我个人拥有其中的一些）。但是如果你真的想坚持Java，我推荐你上面两个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T15:36:35.660

这里有一些我发现的要阅读的资源

[在这里你可以找到 javac（java 编译器）的源代码，这真的应该是一个巨大的知识财富。](http://openjdk.java.net/groups/compiler/)

[龙书，阅读编译器](http://en.wikipedia.org/wiki/Dragon_Book_%28computer_science%29)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-16T15:41:41.010

[http://code.google.com/p/javamicko/](http://code.google.com/p/javamicko/)

它尚未完成，但我希望你能以此为基础。这几乎是您想要的，Java 中的 C 编译器。

编辑：您将需要以下 - 一个扫描仪 - 为此使用 jFlex

解析器 - 为此使用 Bison

语言语法 - 你将在这里使用 C 语法，我认为它是在项目中上传的

“中间代码”可能是 .txt 文件中的一些 ASM 转储。稍后您可以使用该 ASM txt 文件为您的目标机器生成机器代码（本质上断开“编译”与“组装”的连接）；将这两者分开还将为您留出空间在中间代码上运行优化器，以便在将其转换为十六进制字节（操作码）之前进一步优化它。

虽然现在查看代码......但我发现所提交的内容比我最初的要少得多。它是微型 C 编译器的一个端口，来自 C 而不是完整的。这是我的学校项目之一，所以值得一试……

# c# - asp.net 如何在我的代码中引用在 web.config 中硬编码的授权用户

> ID：11990606
> 
> 赞同：1
> 
> 时间：2012-08-16T15:28:27.713
> 
> 标签：c#, asp.net, web-config, authorization

我正在 Intranet 上建立一个网站，其中一个目录只能由硬编码的授权用户访问。它们在 web.config 中定义。它看起来与此类似。

```
<location path="admin">
    <system.web>
        <authorization>
            <allow users="user1"/>
            <allow users="user2"/>
            <allow users="user3"/>
            <allow users="user4"/>
            <deny users="*"/>
        </authorization>
    </system.web>
</location> 
```

然后我想要的是创建一个指向该目录的链接，该链接只显示给那些用户......目前，为了建立链接，我正在重新检查 Windows 用户名并像这样再次硬编码它们......

```
<% 
    if (HttpContext.Current.User.Identity.Name == "user1" ||         
        HttpContext.Current.User.Identity.Name == "user2" ||
        HttpContext.Current.User.Identity.Name == "user3" ||
        HttpContext.Current.User.Identity.Name == "user4")
    {
        Response.Write("<a href='admin/Default.aspx'>Admin Site</a>");
    }   
%> 
```

但我想做的是从 webiconfig 文件中引用我的列表并说类似

```
if (HttpContext.Current.User.Identity.Name == // a user from the web.config list 
```

这可能吗，如果可以的话，你能帮我...谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:29:15.357

您可以像这样从 web.config 获取授权规则：

```
 AuthorizationSection configSection =
      (AuthorizationSection)ConfigurationManager.GetSection("system.web/authorization");

        var users = new List<string>();

        var rules = configSection.Rules;

        foreach (AuthorizationRule rule in rules)
        {
            if (rule.Action == AuthorizationRuleAction.Allow)
            {
                foreach (string user in rule.Users)
                {
                    if (!users.Contains(user)) users.Add(user);
                }
            }
        } 
```

但是你也必须注意规则的优先级。

# dynamic - 背包（多标准）

> ID：11990609
> 
> 赞同：0
> 
> 时间：2012-08-16T15:28:34.613
> 
> 标签：dynamic, knapsack-problem

如果我有一个背包，其中重量 w 有**两个值 v1 和 v2**，容量为 m。如何找到重量不超过容量 m 的 v1 和 v2 的总值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:38:15.373

好的，所以您的问题定义如下。首先是一些（带有样本值的变量定义）：

```
int N = 4; // number of items to choose from
int m = 6; // maximum weight in knapsack

// weight for an item[i] to be summed up, upper limited = m
int weight[N] = {5,2,4,3}; 

// two values for each items:
int values[2][N] = {
  {1,3,5,2},
  {6,3,2,4}
}; 
```

背包应装满物品，背包中所有物品的重量总和不得超过重量“m”。每个项目都有 2 个值。我们可以把这个问题看作：

我想和女朋友一起坐飞机去度假。我们有一个手提箱（=背包）和 N 件物品可供选择。每件物品都有一个重量，重量之和不能太高（例如重量限制航空线是25公斤，行李箱是1公斤，所以我们有m=24公斤作为物品的限制）。对于每个项目，我们有 2 个值。values[1][N] 是我的值（用于在我们的旅行中将项目 n 放入背包中）。values[2][N] 是我女朋友的值，她有不同的喜好。我们还假设，每件物品只能放入背包一次，背包的总价值是它们对我的价值之和加上它们对她的价值之和。

只需将值列表相加，这个问题就可以很容易地转换为标准背包问题。所以一个项目获得一个整体价值（例如，我和她一起），我们只有一个项目的一个价值：

```
int value[N] = {(1+6),(3+3),(5+2),(2+4)}; 
```

要不就：

```
int value[N] = {7, 6, 7, 5}; 
```

现在每个项目只有 -one- 值。这是正常的背包问题。

Wikipedia 上描述了如何以最佳方式解决常见的背包问题。查看[http://en.wikipedia.org/wiki/Knapsack_problem](http://en.wikipedia.org/wiki/Knapsack_problem) -- 如果英语不是您的母语，也请查看您的语言版本（从那里的菜单中选择语言）。

如果您需要进一步的帮助，请询问。

# php - 扩展现有数组输出

> ID：11990616
> 
> 赞同：0
> 
> 时间：2012-08-16T15:28:53.043
> 
> 标签：php, arrays, append

我有这段代码，这是我用于我的 wordpress 主题的自定义幻灯片脚本：

```
$class = shortcode_atts( array('text_color' => '#ffffff', 'image' => '', 'video_vimeo' => '', 'video_youtube' => '', 'video_mp4' => '', 'video_ogg' => '', 'video_webm' => '', 'video_poster' => '', 'slide_desc' => '', 'slide_horizontal' => '', 'slide_fitscreen' => '', 'slide_noresize' => ''), $atts );

            if($class['slide_desc'] != ''){ $slide_desc = $class['slide_desc']; /* $slide_desc = htmlspecialchars_decode(str_replace("*", '"', $slide_desc)); */ $slide_desc = "title=\"".$slide_desc."\""; }
            if($class['text_color'] == '#ffffff'){ $text_color = 'text_white'; }else{ $text_color = 'text_black'; }
            //if($class['slide_desc'] != ''){ $slide_desc = '<div style="opacity: 1; display: block;" id="content"><div class="container_12"><div class="grid_9"><h1 class="page-title" style="margin-bottom: 25px;">'.$class['slide_desc'].'</h1></div></div>'; }
            if($class['image'] != ''){
                $image = $class['image'];
                if($class['slide_horizontal'] == 'true'){ $horizontal = 'slide_horizontal '; }else{ $horizontal = ''; }
                if($class['slide_horizontal'] == 'true' || $class['slide_fitscreen'] == 'true'){ $slide_fitscreen = 'slide_fitscreen'; }else{ $slide_fitscreen = ''; }
                return '<img class="myimage '.$text_color.' '.$horizontal.$slide_fitscreen.'" src="'.$image.'" alt="" '.$slide_desc.' />'; 
```

所以，在这个示例代码中，我想做的也是输出这个：`<?php echo do_shortcode('[daisy]'); ?>`在每个图像、视频上。

我不太擅长 php，我认为这很简单，但我不知道我需要在哪里以及如何添加此代码 ( `<?php echo do_shortcode('[daisy]'); ?>`) 以显示在每张幻灯片上。欢迎任何提示，建议。

# spring-security - Spring Security + Vaadin：如何创建自定义非 JSP 登录表单？

> ID：11990617
> 
> 赞同：0
> 
> 时间：2012-08-16T15:28:54.653
> 
> 标签：spring-security, vaadin

在 Spring Security 中使用自定义 JSP 登录页面相当容易。我们的应用程序虽然基于 Vaadin，但我不想有 JSP 登录页面。我想要的是作为 Vaadin 小部件创建的自定义精美登录窗口。

从技术上讲，我可以使用 Vaadin 的**FormLayout**和名称字段，例如**j_username**和**j_password** ...但这是 Java 类而不是 JSP 文件，那么我在**http** Spring Security 元素中指定什么？我是说：

```
<http auto-config='true'>
    <intercept-url pattern="/**" access="ROLE_USER" />
    <form-login login-page='MyLoginWindow.java or what?' />
</http> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:59:03.343

使用 LoginForm 并在 LoginListener 中使用类似这样的东西

```
try {
  val authentication = new UsernamePasswordAuthenticationToken(name, pass)
  SecurityContextHolder.getContext.setAuthentication(authenticationManager.authenticate(authentication))
} catch {
  case e: AuthenticationException => {
    SecurityContextHolder.clearContext()
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:56:46.433

我对 Spring Security 完全不熟悉，但是几年前我们 Vaadin 的一个人制作了一个演示应用程序[https://github.com/peholmst/SpringSecurityDemo](https://github.com/peholmst/SpringSecurityDemo)。我不知道它是否仍然是最新的，或者它是否回答了你的问题，但也许你可以自己看看，看看你是否能从那里得到任何答案。否则，您也许可以亲自联系 Petter，看看他是否对该主题有任何新的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T12:46:11.957

请看下面我的方法。该代码显示了单击登录按钮时发生的功能。

```
loginBtn.addListener(new Button.ClickListener() {            
        @Override
        public void buttonClick(ClickEvent event) {
            // Getting the helper for working with spring context
            // found here https://vaadin.com/wiki/-/wiki/Main/Spring%20Integration   
            SpringContextHelper helper = new SpringContextHelper(getApplication());

            // Get the providerManagerBean
            ProviderManager authenticationManager = (ProviderManager)helper
                    .getBean("authenticationManager");

            // Get entered data for name and password
            String name = usernameEntered;
            String password = passwordEntered;

            // Validation
            if (StringUtils.isBlank(name) || StringUtils.isBlank(password)) {
                getWindow().showNotification("Username or password cannot be empty", 
                        Notification.TYPE_ERROR_MESSAGE);
            } else {
                try {
                    // Security functionality goes here
                    UsernamePasswordAuthenticationToken token = 
                            new UsernamePasswordAuthenticationToken(name, password);

                    Authentication authentication = authenticationManager.authenticate(token);

                    // Set the authentication info to context      
                    SecurityContextHolder.getContext().setAuthentication(authentication);

                    // During the authentification the AppUser instance was set as 
                    // details, for more info about the user
                    AppUser user = (AppUser) authentication.getDetails();                        

                    if (user != null) {
                        // Switch the view after succesfull login
                        getApplication().getMainWindow().setContent(new ComboBoxUserStartsWith());

                    }
                } catch (AuthenticationException e) {
                    // Display error occured during logining
                    getWindow().showNotification(e.getMessage(), Notification.TYPE_ERROR_MESSAGE);
                }
            }
        }
    }); 
```

# java - Primefaces TreeTable - 无法实例化类

> ID：11990618
> 
> 赞同：2
> 
> 时间：2012-08-16T15:29:23.300
> 
> 标签：java, jsf, primefaces

我正在尝试从我正在解析的属性文件中创建一个树表，并且我不断收到错误“无法实例化类”，并使用下面的代码。我不确定为什么它会在它发生的地方抛出这个异常。

```
for(Map.Entry<Object, Object> prop : props.entrySet()) {
    String key = ((String)prop.getKey()).replace("_", " ");
    String value = (String)prop.getValue();

    String[] parts = key.split("\\.");

    if(parts.length > 4) {
        boolean topLevelExists = false;

        // if there are already child nodes
        if(root.getChildCount() > 0) {
            for(TreeNode n : root.getChildren()) {
                System.out.println("n = "+n);
                System.out.println("n.data = "+((Menu)n.getData()).getName());
                System.out.println("n.getType = "+n.getType());

                if(n.getType().equals(parts[2])) {  
                    System.out.println("they equal");
                    topLevelExists = true;
                    if(topLevelExists == true) {
                        System.out.println("topLevelExists");
                        TreeNode node = new DefaultTreeNode(parts[2], new Menu(parts[2], value), n);
                    }
                } else {
                    TreeNode node = new DefaultTreeNode(parts[2], new Menu(parts[2], value), root);  // FAILS ON THIS LINE WITH THE EXCEPTION BELOW
                }
            }
        // else we are creating the first node
        } else {
            TreeNode node = new DefaultTreeNode(parts[2], new Menu(parts[2], value), root);
        }

    }
} 
```

菜单.java

```
public class Menu {

    private String name;
    private String path;

    public Menu(String name, String path) {
        this.name = name;
        this.path = path;
    }

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getPath() {
        return path;
    }
    public void setPath(String path) {
        this.path = path;
    }
} 
```

抛出异常

```
com.sun.faces.mgbean.ManagedBeanCreationException: Cant instantiate class: edu.mayo.ccs.alliance.menu.backing.MenuBacking.
    at com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:193)
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:102)
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
    at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:69)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:112)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:193)
    at org.primefaces.component.api.UITree.getValue(UITree.java:99)
    at org.primefaces.component.treetable.TreeTableRenderer.encodeTbody(TreeTableRenderer.java:260)
    at org.primefaces.component.treetable.TreeTableRenderer.encodeRegularMarkup(TreeTableRenderer.java:208)
    at org.primefaces.component.treetable.TreeTableRenderer.encodeMarkup(TreeTableRenderer.java:132)
    at org.primefaces.component.treetable.TreeTableRenderer.encodeEnd(TreeTableRenderer.java:88)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:884)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1681)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:854)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1674)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1677)
    at org.primefaces.component.accordionpanel.AccordionPanelRenderer.encodeTab(AccordionPanelRenderer.java:218)
    at org.primefaces.component.accordionpanel.AccordionPanelRenderer.encodeTabs(AccordionPanelRenderer.java:147)
    at org.primefaces.component.accordionpanel.AccordionPanelRenderer.encodeMarkup(AccordionPanelRenderer.java:91)
    at org.primefaces.component.accordionpanel.AccordionPanelRenderer.encodeEnd(AccordionPanelRenderer.java:71)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:884)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1681)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1677)
    at org.primefaces.component.tabview.TabViewRenderer.encodeTabContent(TabViewRenderer.java:279)
    at org.primefaces.component.tabview.TabViewRenderer.encodeContents(TabViewRenderer.java:237)
    at org.primefaces.component.tabview.TabViewRenderer.encodeMarkup(TabViewRenderer.java:128)
    at org.primefaces.component.tabview.TabViewRenderer.encodeEnd(TabViewRenderer.java:69)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:884)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1681)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1677)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1677)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:399)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:509)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at edu.mayo.ccs.alliance.util.BrowserNotSupportedFilter.doFilter(BrowserNotSupportedFilter.java:151)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at edu.mayo.ccs.ctsu.sso.CustomAuthenticator.invoke(CustomAuthenticator.java:42)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.util.ConcurrentModificationException
    at java.util.AbstractList$Itr.checkForComodification(AbstractList.java:372)
    at java.util.AbstractList$Itr.next(AbstractList.java:343)
    at edu.mayo.ccs.alliance.menu.backing.MenuBacking.parseMenu(MenuBacking.java:151)
    at edu.mayo.ccs.alliance.menu.backing.MenuBacking.<init>(MenuBacking.java:96)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:188)
    ... 64 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:09:34.327

就这一点而言，您正在修改`root`它，而您仍在对其进行迭代。

```
for (TreeNode n : root.getChildren()) {
    // ...
    TreeNode node = new DefaultTreeNode(parts[2], new Menu(parts[2], value), root);  // FAILS ON THIS LINE WITH THE EXCEPTION BELOW
    // ...
} 
```

将`new DefaultTreeNode`添加`new Menu`作为给定的子级`root`。但是，这将导致迭代失败，因为支持集合已同时被修改。这就是`ConcurrentModificationException`试图告诉你的所有内容。

您需要相应地重写代码，以便在`new DefaultTreeMode`迭代. 我基本上可以看到 2 种方法来解决这个问题：重新设计代码，以便您根本不需要循环，或者收集一些新的孩子，或者然后将它们添加到. 具体的功能要求并不完全清楚，所以我不能建议哪一个是正确的解决方案。`root``root``root``List``Map``root`

# c++ - OpenGL Y 纹理坐标表现异常

> ID：11990623
> 
> 赞同：2
> 
> 时间：2012-08-16T15:29:45.223
> 
> 标签：c++, opengl, mapping, textures

所以基本上我正在用 opengl/c++ 制作一个 2D 游戏。我有一个四边形，上面贴有纹理，因为我不能使用两个图像的非幂（或者至少我不应该），我在两个图像的幂内有一个图像，我希望使用纹理映射删除多余的图像。

```
GLfloat quadTexcoords[] = {
    0.0, 0.0,
    0.78125, 0.0,
    0.78125, 0.8789,
    0.0, 0.8789
};
glGenBuffers(1, &VBO_texcoords);
glBindBuffer(GL_ARRAY_BUFFER, VBO_texcoords);
glBufferData(GL_ARRAY_BUFFER, sizeof(quadTexcoords), quadTexcoords, GL_DYNAMIC_DRAW);
glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

这是我的纹理代码。我知道没什么特别的。X 坐标 ( `0.7256`) 工作正常，它会删除图像右侧多余的图像。但是 Y 坐标不起作用。我调试了我的游戏，发现正确的坐标被发送到着色器，但它不会映射。有时它似乎在反向工作，但目前还不清楚。

如果我给它一个 Y 的坐标，比如 20，它会重复多次，但仍然在四边形的顶部留下一条小白线。我还没有得到最微弱的想法它可能是什么。

其他细节：我要映射的图像是 800 x 450，它被包裹在大小为 1024 x 512 的图像中。我按 800 x 450 的纵横比缩放四边形。我怀疑这会有所作为，但你永远不会知道！

谢谢你的时间。

编辑：这是发生了什么的一个例子。

![在此处输入图像描述](../Images/e23991ce05d7863ca052e8352828a697.png)

这是完整映射的完整图像（X 和 Y 中的 0 到 1）蓝色部分高 200 像素，完整图像高 300 像素。

![在此处输入图像描述](../Images/e80b1287650769fcacf12e2f65bcb7b8.png)

第二个图像是映射到 Y 轴三分之二的图像（即 Y 轴的 0 到 0.6666）。这应该删除顶部的白色，但这不是正在发生的事情。我不认为坐标是回到前面的，因为我在网上获得了几个教程的映射。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:41:23.797

> 有时它似乎在反向工作，但目前还不清楚。

OpenGL 假定视口原点位于左下方，纹理坐标与 S 中的平面内存纹理值“一起”运行，然后是 T 方向。从本质上讲，这意味着，对于通常的映射之一，纹理的原点位于**左下角**，这与大多数图像处理程序中的左上角原点相反。

因此，在您的情况下，您看到的白色边距只是您可能应用于底部纹理图像的填充，而不是您应该放置它的顶部。为什么你不能使用 NPO2 纹理呢？他们得到了广泛的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:03:40.203

不是解决问题的真正方法，但可能是解决问题的方法：

您可以将图像缩放到 1024x1024（使图像变形）并使用 0->1 纹理坐标。因为四边形的纵横比是 800x450，所以应该正确显示图像。

# seo - Google 上的用户个人资料搜索结果

> ID：11990626
> 
> 赞同：-1
> 
> 时间：2012-08-16T15:29:51.840
> 
> 标签：seo, google-analytics, google-search

在 Google 上搜索您的姓名时，列出的前几个结果大多是您在 Linkedin、Twitter 等上的个人资料。

我想知道，例如，当用户在 Linkedin 上创建新帐户时，Google 是如何特别注意这个新用户的这个页面的？是通过在页面上使用谷歌分析还是在某个全局目录中明确发布到谷歌的链接？

这个问题让我很感兴趣。对此的任何启示都会有很大帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:22:35.690

要知道这个问题的答案，你需要知道谷歌爬虫是如何工作的。请先参考此页面：http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=70897#1](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=70897#1)

Google 爬虫通过访问已编入索引页面上的链接来查找新页面，并将这些新爬取的页面添加到其搜索索引中。

现在，当您在linkedin上创建新的个人资料时，您新创建的个人资料的链接肯定会添加到您加入的群组，您的朋友列表或linkedin网站的任何其他地方。当谷歌爬虫访问这些页面时，他们会找到您的个人资料链接并将其编入索引。

# android - 在 viewpager 中向 xml 添加动态按钮

> ID：11990627
> 
> 赞同：0
> 
> 时间：2012-08-16T15:29:53.010
> 
> 标签：android, android-viewpager

首先，这是我的 MainPageViewer：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.viewpager);

MyPageAdapter adapter = new MyPageAdapter();
ViewPager pager = (ViewPager) findViewById(R.id.pager);
pager.setAdapter(adapter);
pager.setCurrentItem(0); 
```

我的 PageViewer 的适配器在这里：

```
 public int getCount()
        {
            return 3;
        }

    public Object instantiateItem(View collection, int position)
    {
        LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;

        switch(position)
        {
            case 0:
                resId = R.layout.blogandbericht;
                break;
            case 1:
                resId = R.layout.blogandbericht;
                break;
            case 2:
                resId = R.layout.blogandbericht;
                break;
        }

        View view = inflater.inflate(resId, null);

        ((ViewPager) collection).addView(view, 0);

        return view;
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2)
    {
        ((ViewPager) arg0).removeView((View) arg2);
    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1)
    {
        return arg0 == ((View) arg1);
    }

    @Override
    public Parcelable saveState()
    {
        return null;
    } 
```

（是的，我知道，所有布局都是“bloganbericht”）

这是我的blogandbericht：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/masterSv"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:background="#8ad5f0">

    <LinearLayout 
        android:id="@+id/masterLl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="foo bar"/>

    </LinearLayout>

</ScrollView> 
```

一切正常。我可以看到每个布局上的三个按钮。但是我怎样才能动态地将文本视图或按钮等视图添加到布局中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:00:34.000

好吧，viewpager 只支持每个页面内的 1 个视图，所以在适配器中修改方法：

```
public Object instantiateItem( View pager, int position ) 
```

您可以在此方法中创建视图并将其返回为：

```
WebView web = new WebView(mContext);
return web; 
```

或者，如果您需要一个比“对象”更复杂的视图，那么您可以创建一个线性布局或类似的东西，并在其中添加您的其他视图并返回该视图，如下所示：

```
LinearLayout layout = new LinearLayout(mContext);
WebView web = new WebView(mContext);
Button btn = new Button(mContext);
layout.addView(web);
layout.addView(btn);
return layout; 
```

希望能帮助到你。

**更新：**

好吧，现在我正在做类似的事情，我将添加到 viewpager 的视图设为动态的，因此根据对象的类型，我确定里面的内容。我不知道您打算如何确定页面的外观，但我会告诉您我是如何做到的。

我有一个“对象”列表，这些对象从一个类扩展（您也可以使用接口和实现，我出于其他原因使用扩展），并且该类有一个方法“public View getView（ )”，并且在从父类（或实现接口）扩展的所有类中，您覆盖（实现）该方法并添加必要的代码以使“PAGE”看起来像您想要的那样，然后在适配器上您只需要有一个您创建的任何类的“对象”列表，并且根据每个“对象”的类型，它们将创建传递给 ViewPager 的视图。

**例子：**

Dog //类或接口与方法*getView()*

-Chihuahua //这会返回一个WebView

-Sharpei //这会返回一个 Horizo​​ntalListView

-Huskie //这会返回一个带有一堆视图的 LinerLayout

在您的适配器上：

```
public class ViewPagerAdapter extends PagerAdapter {
     List<Dog> Doggies = new ArrayList<Dog>();

     public ViewPagerAdapter( Context context ){
          Doggies.add(new Chihuahua());
          Doggies.add(new Sharpei());
          Doggies.add(new Chihuahua());
          Doggies.add(new Huskie());
          Doggies.add(new Huskie());
          Doggies.add(new Chihuahua());
          Doggies.add(new Sharpei());
     }

     //and last but not least, on your onCreate method in your adapter:

     public Object instantiateItem( View pager, int position ){ 
          return Doggies.get(position).getView();
     }

     /*THE REST OF THE METHODS GOES AFTER THIS*/

 }  //END OF ADAPTER 
```

# azure - 有人对在 Windows Azure 工作者角色上运行 PDFlib 有任何建议吗？

> ID：11990628
> 
> 赞同：2
> 
> 时间：2012-08-16T15:29:53.847
> 
> 标签：azure, azure-worker-roles, pdflib

我们需要在 .NET Azure 应用程序中动态生成 PDF，并确定[PDFLib](http://www.pdflib.com/)最能满足我们的要求。

基本部署是基于 dll 的，因此应该相对简单。在研究这个问题时，我遇到了一个案例研究，涉及安装另一个类似的组件（AbcPdf，[这里](http://www.websupergoo.com/abcpdf-windows-azure-altaine.htm)），这让我想知道是否有人有任何类似的详细经验可以分享关于在云服务上启动和运行 PDFLib ?

具体来说，我感兴趣的是除了引用的 .dll 之外是否还有其他文件必须与包一起复制，是否需要使用启动命令将 PDFLib 安装到 GAC，以及是否有任何问题让许可工作在云环境中。

如果需要，我们当然可以为此使用 VM，但最初我希望使用标准工作角色。我将要求 PDFLib 支持这个问题，并将分享我在这里得到的任何答案，因为我在 Stackoverflow 上的其他任何地方都没有发现这个主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T09:35:53.010

这是我从 PDF Lib 支持中得到的，我认为它涵盖了所有内容：

> .NET PDFLib 是否需要 GAC 部署，或者 dll 是否可以简单地复制到服务器？

您可以简单地部署 pdflib_dotnet dll。

> 除了引用的 dll 之外，是否还有其他文件需要部署才能使 PDFLib 工作？

不，PDFlib 没有任何进一步的依赖关系。

> 在我们可能无法运行安装程序并且我们可能无法访问 Windows 注册表的环境中，我们如何验证我们的产品许可证？

有多种方法可以做到这一点。最简单的方法是在代码中应用许可证密钥。您还可以应用许可证文件。请记住，您需要为每个服务，其中 PDFlib 在生产使用中运行一个单独的许可证。例如，当您在具有 4 个节点（服务器）的集群系统中运行应用程序时，您需要 4 个许可证。

> 而且，您对此类云部署有任何一般性指导吗？

我们对此没有任何特别的评论。但我敢肯定，您会在 PDFlib 8 包中包含的“PDFlib in .NET Howto”中找到很多关于我们的 PDFlib .NET 实现概念的相关信息，也可以在我们的网站上找到： [http ://www.pdflib.com/en/developer/technical-documentation/pdflib-in-net-howto/](http://www.pdflib.com/en/developer/technical-documentation/pdflib-in-net-howto/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:45:03.020

让我从我没有将这个评论部署到 Azure 开始。但是，对于您拥有的任何组件，以下内容应该是准确的。

如果您可以仅将此组件 xcopy 部署到常规服务器，则它应该只使用普通部署包到云服务；但是，如果在分发到普通服务器时需要安装（阅读，而不是您的开发机器），那么您可能需要一些额外的步骤。例如，如果安装将程序集推入 GAC，那么您必须效仿。

我只需在以前没有安装此组件的常规本地机器上测试 xcopy 部署部署，看看它是否有效。如果是这样，您可能会很好地确保它被引用并与您的包一起部署。如果您担心它可能需要其他程序集来配合它，请使用 Reflector、Just Decompile 或 ILDasm 之类的工具来检查程序集的引用（小心，在程序集上使用反编译器可能违反您的 EULA）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T20:53:58.683

我知道您要求的是实际经验，但我会说答案是这应该可行。从[http://www.pdflib.com/fileadmin/pdflib/pdf/support/PDFlib-in-.NET-HowTo.pdf](http://www.pdflib.com/fileadmin/pdflib/pdf/support/PDFlib-in-.NET-HowTo.pdf)：

> 还支持称为 xcopy 部署的过程。您可以使用 xcopy 命令或 FTP 传输简单地将 PDFlib 程序集 (pdflib_dotnet.dll) 复制到服务器

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T22:56:33.920

我下载了 PDFLib x64 版本，并快速试用了 Windows Azure Web Role。该库仅包含一个作为 PDFlib_dotnet.dll 的 DLL，您可以将其添加为参考并将其属性设置为“Copy Local As True”。之后，您可以在代码中引用它并根据文档使用它。

根据我的快速测试，您确实需要修改代码以使用 Windows Azure 本地存储来创建 PDF 文件并同步到 Windows Azure Blob 存储以正确保存它。可能有办法将 PDF 直接创建到 Azure Blob 存储，但我只是没有进一步研究。

我使用以下代码创建了一个基于 ASP.NET 的 webrole：

```
 PDFlib p;
        int font;

        p = new PDFlib();

        try
        {
            // This means we must check return values of load_font() etc.
            p.set_parameter("errorpolicy", "return");

            // Added code to create PDF on Local Storage 

            LocalResource myStorage = RoleEnvironment.GetLocalResource("myLocalStorage");
            string filePath = Path.Combine(myStorage.RootPath, "hello.pdf");

            if (p.begin_document(filePath, "") == -1)
            {
                Console.WriteLine("Error: {0}\n", p.get_errmsg());
                return;
            }

            p.set_info("Creator", "hello.cs");
            p.set_info("Author", "Rainer Schaaf");
            p.set_info("Title", "Hello, world (.NET/C#)!");

            p.begin_page_ext(595, 842, "");

            font = p.load_font("Helvetica-Bold", "unicode", "");
            if (font == -1)
            {
                Console.WriteLine("Error: {0}\n", p.get_errmsg());
                return;
            }

            p.setfont(font, 24);
            p.set_text_pos(50, 700);
            p.show("Hello, world!");
            p.continue_text("(says .NET/C#)");
            p.end_page_ext("");

            p.end_document("");
        }

        catch (PDFlibException eX)
        {
            // caught exception thrown by PDFlib
            Console.WriteLine("PDFlib exception occurred in hello sample:\n");
            Console.WriteLine("[{0}] {1}: {2}\n", eX.get_errnum(),
                    eX.get_apiname(), eX.get_errmsg());
        }
        finally
        {
            if (p != null)
            {
                p.Dispose();
            }
        }
    } 
```

# html - HTML 5 功能检测 - 输入字段上的必需属性 - 它会优雅地降级吗？

> ID：11990629
> 
> 赞同：3
> 
> 时间：2012-08-16T15:29:54.263
> 
> 标签：html, input, required, graceful-degradation

我想在`required`我的一个输入字段上使用该属性。我已经编写了它的 JS 版本，但为了完整起见，为什么不包括 HTML 5（至少为非 JS 用户省去麻烦）。

只添加`required`到输入是否安全，它不会优雅地降级？如果没有，那么我如何检查它的支持（没有 Modernizr）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-03T21:54:54.200

如果您正在使用，那么添加属性`<!DOCTYPE html>`没有问题。`required`

您可以使用此 JS 进行功能检测：

```
'required' in document.createElement('input'); 
```

# android - 触摸屏上的文本视图

> ID：11990634
> 
> 赞同：0
> 
> 时间：2012-08-16T15:30:04.080
> 
> 标签：android

我在 TextView 中有两行...当我触摸第一行时，需要执行一个动作，而当我触摸第二行时，需要执行不同的动作。

能否请你帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:31:59.307

您将必须为您的 TextView 设置一个自定义[ontouchlistener](http://developer.android.com/reference/android/view/View.html#setOnTouchListener%28android.view.View.OnTouchListener%29)并根据收到的坐标，您需要启动不同的操作

# microsoft-metro - 使用 scrollIntoView 在 WinJS Metro 应用程序中定位 ListView

> ID：11990639
> 
> 赞同：0
> 
> 时间：2012-08-16T15:30:16.763
> 
> 标签：microsoft-metro, winjs

我正在构建一个基于 jscript 的 Windows 8 Metro 应用程序。这个应用程序的主屏幕是一个滚动的“全景”视图，其中有几个列表视图显示了应用程序状态的各个方面。在某些情况下，用户会在页面上选择某些内容，从而导航到另一个页面（使用 WinJS.Navigation.navigate 方法。

当用户点击另一个页面上的后退箭头时，它返回到主屏幕，我使用“scrollIntoView”将屏幕定位到用户在导航发生之前正在处理的部分。

不幸的是，这几乎不会导致正确定位视图。似乎是随机的。我怀疑页面还没有完成构建，并且滚动值是根据某个快照的状态设置的。

现在的问题：

WinJS ListView 对象是否会通知它们已完全呈现和布局？或者这是页面就绪功能的工作？

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T22:24:23.247

并排放置多个列表视图不是一个好主意(TM)。我建议放置一个列表视图，并将您的内容放在分组数据源中以获取组。如果项目有不同的模板，那么您可以使用自定义项目模板选择器来动态选择模板。

此外，为了确保列表视图滚动到正确的位置，您需要使用[indexOfFirstVisible](http://msdn.microsoft.com/en-us/library/windows/apps/hh700691.aspx)来设置名称所暗示的项目。

# jquery - 试图取消选中单选按钮

> ID：11990640
> 
> 赞同：0
> 
> 时间：2012-08-16T15:30:27.137
> 
> 标签：jquery, html

试图取消选中一个单选按钮，但奇怪的是它似乎不起作用。

**代码如下**

```
$('#hkitdyn15').attr("checked",false); 
```

**这也行不通**

```
$('#hkitdyn15').prop("checked",false); 
```

**这也行不通**

```
$('#hkitdyn15').removeAttr("checked"); 
```

**在页面加载时，我的单选按钮生成为图像，但它仍然具有选中的属性**

```
<img id="hkitdyn15" style="width: 17px; height: 12px;" src="htmlkit/enabled_radio_checked.gif" checked="false">

<input id="hkitdyn14" class="radio" type="radio" value="checkToRetrieveMessageNames" name="bulkGroup" style="float: left; display: none;"> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:45:40.600

是，`id`不是。用这个：`hkitdyn14``hkitdyn15`

```
$('#hkitdyn14').attr("checked",false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:46:31.193

看起来您引用了错误的 ID。您的图像的 ID 为“hkitdyn15”，而不是单选按钮。您需要使用“hkitdyn14”ID。尝试以下任何方法：

```
$('#hkitdyn14').prop("checked",false);

$('#hkitdyn14').attr("checked",false);

$('#hkitdyn14').removeAttr("checked"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:49:30.053

在删除选中之前尝试记录您的元素

```
console.log($('#hkitdyn15')); 
```

加载脚本时可能未创建您的广播图像

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T15:31:20.950

原样`#hkitdyn15`代表图像，以下语句工作正常。

```
$('#hkitdyn15').removeAttr("checked"); 
```

**[工作样本](http://jsfiddle.net/VWwMN/)**

但是如果你想改变then`checked`的状态`radio`：

```
$('#hkitdyn14').prop("checked", false); 
```

***或者***

```
$('#hkitdyn14').removeAttr("checked"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T15:57:43.210

您必须向单选按钮添加名称属性。

例如 ：

`<input type="radio" id="hkitdyn14" name="hkitdyn14" checked="checked" style="display:none;" />`

接着

`$('input[name=hkitdyn14]').removeAttr('checked');`

看看这个 JsFidlle，它是你想要做的一个完整的例子：http: [//jsfiddle.net/EsXwp/](http://jsfiddle.net/EsXwp/)

# php - Symfony 2.1 - 使用 JMS\DiExtraBundle 创建身份验证侦听器

> ID：11990641
> 
> 赞同：1
> 
> 时间：2012-08-16T15:30:30.867
> 
> 标签：php, symfony-2.1

我创建了以下侦听器：

```
<?php
namespace KekRozsak\SecurityBundle\Security;

use Symfony\Component\Security\Http\Authentication\AuthenticationSuccessHandlerInterface;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Bridge\Doctrine\RegistryInterface;
use Symfony\Component\Security\Core\Event\AuthenticationEvent;
use JMS\DiExtraBundle\Annotation as DI;

/**
 * @DI\Service
 * @DI\Tag("kernel.event_listener", attributes={"event" = "security.authentication.success"})
 */
class AuthSuccess implements AuthenticationSuccessHandlerInterface
{
    /**
     * The Doctrine interface
     *
     * @var Symfony\Bridge\Doctrine\RegistryInterface $doctrine
     *
     * @DI\Inject
     */
    private $doctrine;

    public function onSecurityAuthenticationSuccess(AuthenticationEvent $event)
    {
        $user = $event->getAuthenticationToken()->getUser();
        $em = $this->doctrine->getEntityManager();
        $user->setLastLoginAt(new \DateTime('now'));
        $em->persist($user);
        $em->flush();
    }

    public function onAuthenticationSuccess(Request $request, TokenInterface $token)
    {
        $user = $token->getUser();
        $em = $this->doctrine->getEntityManager();
        $user->setLastLoginAt(new \DateTime('now'));
        $em->persist($user);
        $em->flush();
    }
} 
```

但它没有被调用。如果我注入它

```
 <service id="kek_rozsak_security.auth.success" class="KekRozsak\SecurityBundle\Security\AuthSuccess">
        <argument type="service" id="doctrine" />
        <tag name="kernel.event_listener" event="security.authentication.success" />
    </service> 
```

并添加构造函数：

```
public function __construct(RegistryInterface $doctrine)
{
    $this->doctrine = $doctrine;
} 
```

它像魅力一样运行。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:46:44.787

回答我自己（有点菜鸟）的问题......

我只是忘了添加

```
jms_di_extra:
    locations:
        all_bundles: false
        bundles: [ KekRozsakFrontBundle, KekRozsakSecurityBundle ]
        directories: [ "%kernel.root_dir%/../src" ] 
```

对我`config.yml`

# android - Android VideoView 适用于模拟器但不适用于手机

> ID：11990646
> 
> 赞同：0
> 
> 时间：2012-08-16T15:31:02.740
> 
> 标签：android, eclipse, video, android-emulator

我正在开发一个应用程序，它有一个 VideoView 和一个按钮来启动视频，视频在模拟器上可以正常启动，但在实际手机上却不能。电话说“抱歉，无法播放此视频。”

主.java：

```
 package com.example.friends;

    import android.media.MediaPlayer;
    import android.os.Bundle;
    import android.app.Activity;
    import android.view.Menu;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;  
    import android.widget.MediaController;
    import android.widget.VideoView;

    public class InfoBoard extends Activity implements OnClickListener{
VideoView vid;
MediaPlayer mp;
MediaPlayer mp1;
MediaPlayer mp2;
MediaPlayer mp3;
MediaPlayer mp4;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_info_board);

    mp = MediaPlayer.create(this, R.raw.danw);

    Button Btn1 = (Button) findViewById(R.id.btn1);
    Btn1.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {

        mp.start();
    }
});

    mp1 = MediaPlayer.create(this, R.raw.jackc);

    Button Btn2 = (Button) findViewById(R.id.btn2);
    Btn2.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {

        mp1.start();
    }
});

    mp2 = MediaPlayer.create(this, R.raw.infojon);

    Button Btn3 = (Button) findViewById(R.id.btn3);
    Btn3.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {

        mp2.start();
    }
});

    mp3 = MediaPlayer.create(this, R.raw.cam);

    Button Btn4 = (Button) findViewById(R.id.btn4);
    Btn4.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {

        mp3.start();
    }
});

    vid = (VideoView) findViewById(R.id.vid1);
    vid.setVideoPath("/sdcard/vid1.mp4");
    vid.setMediaController(new MediaController(this));
    vid.requestFocus();

    Button Btn5 = (Button) findViewById(R.id.next1);
    Btn5.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        vid.start();

          }

        }); 
```

这一切都适用于模拟器，但不适用于我的手机。

日志猫：

```
 08-16 16:24:14.789: W/MediaPlayer(9385): info/warning (1, 44)
    08-16 16:24:14.824: W/MediaPlayer(9385): info/warning (1, 44)
    08-16 16:24:14.867: W/MediaPlayer(9385): info/warning (1, 44)
    08-16 16:24:14.898: W/MediaPlayer(9385): info/warning (1, 44)
    08-16 16:24:14.937: W/MediaPlayer(9385): info/warning (1, 44)
    08-16 16:24:14.945: I/MediaPlayer(9385): Info (1,44)
    08-16 16:24:14.945: I/MediaPlayer(9385): Info (1,44)
    08-16 16:24:14.945: I/MediaPlayer(9385): Info (1,44)
    08-16 16:24:14.945: I/MediaPlayer(9385): Info (1,44)
    08-16 16:24:14.945: I/MediaPlayer(9385): Info (1,44)
    08-16 16:24:15.062: W/MediaPlayer(9385): info/warning (1, 26)
    08-16 16:24:15.062: E/MediaPlayer(9385): error (-4, -4)
    08-16 16:24:15.128: I/MediaPlayer(9385): Info (1,26)
    08-16 16:24:15.128: E/MediaPlayer(9385): Error (-4,-4)
    08-16 16:24:15.128: D/VideoView(9385): Error: -4,-4 
```

# zend-framework - magento中每个主题的自定义电子邮件模板

> ID：11990648
> 
> 赞同：0
> 
> 时间：2012-08-16T15:31:11.823
> 
> 标签：zend-framework, magento, magento-1.7

*有没有一种方法可以自定义每个主题*（店面）的所有 magento 交易电子邮件（字体颜色、链接颜色等） ，而无需通过管理区域创建每一个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:07:10.723

我一直在研究一个能够处理这个问题的模块，尽管它并不完整（有很多模板要编辑！）。

它涉及在每个电子邮件模板的开头包含一个模板，其中包含样式信息，然后将其级联到模板的其余部分。如果您有多个主题，您只需将模板从 /base/default 复制到 /your/theme 即可。

不幸的是，它并不是一个容易构建的模块。Magento 中的事务系统在你可以做的事情上是相当严格的。

或者（这将同样多的工作）是看看 sales.xml 布局。您可以为每个主题重写电子邮件布局部分以指向电子邮件中的不同模板，但这将是大量工作，并且维护起来仍然很麻烦。

# singleton - 抽象工厂和单例模式在一起

> ID：11990650
> 
> 赞同：0
> 
> 时间：2012-08-16T15:31:16.017
> 
> 标签：singleton, abstract-factory

是否可以将抽象工厂模式和单例模式结合在一起？如果可以，那么如何？给我一些图表示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:32:50.320

抽象工厂模式是关于创建对象的。单例模式就是不创建多个特定类型的对象。你如何以及为什么设想他们一起工作？

# c# - 等待另一个线程

> ID：11990651
> 
> 赞同：4
> 
> 时间：2012-08-16T15:31:16.193
> 
> 标签：c#, multithreading, synchronization

所以我有这个程序试图在两个不同的线程 thread1 和 thread2 之间建立通信。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;

namespace Project1
{
    class Class1
    {
        public static void thread1() 
        {
            Console.WriteLine("1");
            Console.WriteLine("t2 has printed 1, so we now print 2");
            Console.WriteLine("t2 has printed 2, so we now print 3");
        }

        public static void thread2()
        {
            Console.WriteLine("t1 has printed 1, so we now print 1");
            Console.WriteLine("t1 has printed 2, so we now print 2");
            Console.WriteLine("t1 has printed 3, so we now print 3");
        }

        public static void Main() {

            Thread t1 = new Thread(new ThreadStart(() => thread1()));
            Thread t2 = new Thread(new ThreadStart(() => thread2()));
            t1.Start();
            t2.Start();
            t2.Join();
            t1.Join();

        }

    }
} 
```

但是，我希望它发生这样的行：

```
Console.WriteLine("1"); 
```

...首先被执行，而 thread2 只是等待这一行被执行。然后只有这样它才会打印：

```
Console.WriteLine("t1 has printed 1, so we now print 1"); 
```

打印完这一行之后，只有这样，这一行才会：

```
Console.WriteLine("t2 has printed 1, so we now print 2"); 
```

...打印出来，等等。所以我想更改代码，以便线程相互通信，以便按以下顺序打印行：

```
 Console.WriteLine("1"); // from t1
            Console.WriteLine("t1 has printed 1, so we now print 1"); // from t2
            Console.WriteLine("t2 has printed 1, so we now print 2"); // from t1
            Console.WriteLine("t1 has printed 2, so we now print 2"); // from t2
            Console.WriteLine("t2 has printed 2, so we now print 3"); // from t1
            Console.WriteLine("t1 has printed 3, so we now print 3"); // from t2 
```

我了解 lock 的作用，但它仅适用于两个不同的线程在同一个函数上运行的情况。但是，在这里，这两个功能是不同的，因此我不能在这里使用 lock。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T15:48:20.700

看起来您需要[Monitor.Wait](http://msdn.microsoft.com/en-us/library/system.threading.monitor.wait)和[Monitor.Pulse](http://msdn.microsoft.com/en-us/library/system.threading.monitor.pulse)。有一本关于 Threading 的[免费电子书](http://www.albahari.com/threading/part4.aspx#_How_to_Use_Wait_and_Pulse)（可能有很多，但这个对我有帮助）。

您可以使用静态对象锁定，然后让您的线程调用`Monitor.Pulse`以表示它们“轮到他们”并`Monitor.Wait`“等待下一轮”。这是使用您的基本代码的示例实现：

```
public class Class1
{
     // Use this to syncrhonize threads
    private static object SyncRoot = new object();
     // First "turn" goes to thread 1
    private static int threadInControl = 1;

    public static void thread1()
    {
        lock(SyncRoot) // Request exclusive access to SyncRoot
        {
            Console.WriteLine("1");
            GiveTurnTo(2); // Let thread 2 have a turn
            WaitTurn(1);   // Wait for turn to be given to thread 1
            Console.WriteLine("t2 has printed 1, so we now print 2");
            GiveTurnTo(2); // Let thread 2 have a turn
            WaitTurn(1);   // Wait for turn to be given to thread 1
            Console.WriteLine("t2 has printed 2, so we now print 3");
            GiveTurnTo(2); // Let thread 2 have a turn
        }
    }

    public static void thread2()
    {
        lock(SyncRoot) // Request exclusive access to SyncRoot
        {
            WaitTurn(2);   // Wait for turn to be given to thread 2
            Console.WriteLine("t1 has printed 1, so we now print 1");
            GiveTurnTo(1); // Let thread 1 have a turn
            WaitTurn(2);   // Wait for turn to be given to thread 2
            Console.WriteLine("t1 has printed 2, so we now print 2");
            GiveTurnTo(1); // Let thread 1 have a turn
            WaitTurn(2);   // Wait for turn to be given to thread 2
            Console.WriteLine("t1 has printed 3, so we now print 3");
            GiveTurnTo(1); // Let thread 1 have a turn
        }
    }

    // Wait for turn to use SyncRoot object
    public static void WaitTurn(int threadNum)
    {
        // While( not this threads turn )
        while (threadInControl != threadNum)
        {
            // "Let go" of lock on SyncRoot and wait utill 
            // someone finishes their turn with it
            Monitor.Wait(SyncRoot);
        }
    }

    // Pass turn over to other thread
    public static void GiveTurnTo(int nextThreadNum)
    {
        threadInControl = nextThreadNum;
        // Notify waiting threads that it's someone else's turn
        Monitor.Pulse(SyncRoot);
    }

    public static void  void Main()
    {
        Thread t1 = new Thread(new ThreadStart(() => Class1.thread1()));
        Thread t2 = new Thread(new ThreadStart(() => Class1.thread2()));
        t1.Start();
        t2.Start();
        t2.Join();
        t1.Join();
    }
} 
```

至于使用[lock 关键字](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=VS.71%29.aspx)，不限于同一个函数内的同步。锁定“保证”对单个线程的资源（对象）的独占访问（独占，我的意思是一次只有一个线程可以获得对该资源的锁定，锁定不会阻止其他线程简单地访问对象本身） .

为了简化它，`lock(someObject)`就像一个线程排队使用`someOject`，然后等到它前面的所有其他线程都完成了它们的轮次后再继续。线程在离开 lock 语句的范围时结束其“回合”（除非您添加诸如`Monitor.Pulse`or之类的内容`Monitor.Wait`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T15:35:32.600

使用 ManualResetEvent。在线程 2 中等待它并在 Console.WriteLn() [http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx之后在线程1 中设置它](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T16:00:36.240

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;

namespace Project1
{
    class Class1
    {
        private static ManualResetEvent mre1 = new ManualResetEvent(false);
        private static ManualResetEvent mre2 = new ManualResetEvent(false);

        public static void thread1() 
        {
            Console.WriteLine("1");
            mre2.Set();
            mre1.WaitOne();
            Console.WriteLine("t2 has printed 1, so we now print 2");
            mre2.Set();
            mre1.WaitOne();
            Console.WriteLine("t2 has printed 2, so we now print 3");
        }

        public static void thread2()
        {
            mre2.WaitOne();
            Console.WriteLine("t1 has printed 1, so we now print 1");
            mre1.Set();
            mre2.WaitOne();
            Console.WriteLine("t1 has printed 2, so we now print 2");
            mre1.Set();
            mre2.WaitOne();
            Console.WriteLine("t1 has printed 3, so we now print 3");
        }

        public static void Main() {

            Thread t1 = new Thread(new ThreadStart(() => thread1()));
            Thread t2 = new Thread(new ThreadStart(() => thread2()));

            t1.Start();
            t2.Start();

            while (true) {
                Thread.Sleep(1);
            }

        }

    }
} 
```

多谢你们。我想我现在有了解决方案！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T16:01:48.877

从Joe Albahari 先生的高级线程教程中包含的带有等待和脉冲的信号部分的[双向信号和竞赛部分中给出的示例：](http://www.albahari.com/threading/part4.aspx#_TwoWay_Signaling_and_Races)

```
static readonly object locker = new object();
private static bool ready, go;

public static void Thread1()
{
  IEnumerable<Action> actions = new List<Action>()
  {
   () => Console.WriteLine("1"),
   () => Console.WriteLine("t2 has printed 1, so we now print 2"),
   () => Console.WriteLine("t2 has printed 2, so we now print 3")
  };

  foreach (var action in actions)
  {
    lock (locker)
    {
      while (!ready) Monitor.Wait(locker);
      ready = false;
      go = true;
      Monitor.PulseAll(locker);
      action();
    } 
  }
}

public static void Thread2()
{
  IEnumerable<Action> actions = new List<Action>()
  {
   () => Console.WriteLine("t1 has printed 1, so we now print 1"),
   () => Console.WriteLine("t1 has printed 2, so we now print 2"),
   () => Console.WriteLine("t1 has printed 3, so we now print 3")
  };

  foreach (var action in actions)
  {
    lock (locker)
    {
      ready = true;
      Monitor.PulseAll(locker);
      while (!go) Monitor.Wait(locker);
      go = false;
      action();
    }
  }
}

private static void Main(string[] args)
{
  Thread t1 = new Thread(new ThreadStart(() => Thread1()));
  Thread t2 = new Thread(new ThreadStart(() => Thread2()));
  t1.Start();
  t2.Start();
  t2.Join();
  t1.Join();
} 
```

# c# - NHibernate：Laziness.NoProxy 防止软删除

> ID：11990653
> 
> 赞同：0
> 
> 时间：2012-08-16T15:31:19.303
> 
> 标签：c#, asp.net, nhibernate, proxy, lazy-evaluation

我有这个用于 NHibernate 映射：

```
 public AnswerSet_AnswerMap() {
        Table("DB.AnswerSet_Answer");
        Id(x => x.AnswerSet_AnswerId);
        References(x => x.Answer, "BaseAnswerID").LazyLoad(Laziness.NoProxy);
        References(x => x.AnswerSet, "AnswerSetID").Fetch.Join();
        Map(x => x.Format);
    } 
```

它用于“AnswerSet”和“Answer”之间的连接表。答案引用上的 .LazyLoad(Laziness.NoProxy) 在我们的应用程序中是必需的，但它可以防止 AnswerSet_Answer 对象在数据库中被软删除（它在数据库中保持不变）。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:38:57.263

您是否尝试添加级联？Cascade.DeleteAllOrphan ？

NHibernate Cascades：实体与其他对象有关联，这可能是与单个项目的关联（多对一）或与集合的关联（一对多，多对任意）。无论如何，您可以告诉 NHibernate 自动遍历实体的关联，并根据级联选项进行操作。例如，使用 save-update 级联将未保存的实体添加到集合中将导致它与其父对象一起保存，而无需我们方面的任何明确说明。以下是每个级联选项的含义：

none - 不做任何级联，让用户自己处理。保存更新 - 当对象被保存/更新时，检查关联并保存/更新任何需要它的对象（包括保存/更新多对多场景中的关联）。delete - 当对象被删除时，删除关联中的所有对象。delete-orphan - 当对象被删除时，删除关联中的所有对象。除此之外，当一个对象从关联中删除并且不与另一个对象关联（孤立）时，也将其删除。all - 当一个对象被保存/更新/删除时，检查关联并保存/更新/删除找到的所有对象。all-delete-orphan - 当一个对象被保存/更新/删除时，检查关联并保存/更新/删除找到的所有对象。除此之外，

但是 cascade 会删除你的 orpahnd 记录，而不是“软删除”它。对于软删除，请查看此链接：[NHibernate 中的软删除](http://nhibernate.hibernatingrhinos.com/9/soft-deletes)

# database - 数据库中有太多表有什么不利影响？

> ID：11990667
> 
> 赞同：4
> 
> 时间：2012-08-16T15:31:44.453
> 
> 标签：database

在我解释我的问题之前，我想说我知道这种问题之前已经在 SO 上提出过，但我的问题的规模完全不同，而且情况似乎与我在其他上所读到的完全不同人们的问题。

背景：

我正在为一个拥有包含**2505 个表**的数据库的客户做一些工作。这 2505 个表由几百个 WordPress 实例的表组成，因此这些表不需要相互通信或任何东西。它可以是 250 个数据库，每个数据库有 10 个表，而不是一个数据库，有 2505 个表。

更重要的是：这个特定的应用程序目前仅在美国一个州使用，目标是在所有 50 个州中使用它。所以这大概意味着最终将有 2500 * 50 = 125,000 个表格。说得轻松一点，这让我觉得这是一个次优设计的标志。

问题是客户的开发人员对数据库知之甚少（例如，他不了解规范化、外键或唯一约束），因此要解释为什么数据库中的 2505 个表不是好的数据库设计是一个真正的挑战。

**对于不太了解数据库的人，您如何解释单个数据库中的 2505 个表是一个坏主意？**（我正在寻找具体的、基于事实的、无可辩驳的理由。）

（顺便说一句，我认为问题的根源在于平台选择——WordPress 可能不是适合这项工作的工具——但我想先解决数据库问题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:54:17.597

如果这个人不了解数据库，使用特定的技术参数可能不会有太大帮助。最好使用普通人可以（假装）理解的东西，最好是在他们的老板面前（或者给他们发送一封带有抄送：的电子邮件给他们的老板）。

老板可能会说在一个数据库中保存许多表是*不安全*的，或者根本不是*行业标准*。生成的数据库会很*慢*，可能会*崩溃*，这可能会让客户非常生气。

这种交流是操纵性的，但直接的技术谈话可能会让你一事无成。如果开发人员什么都不懂，仍然坚持不同意你的观点，那么谈论好的或坏的设计是没有用的（可能比无用更糟糕——菜鸟有时会为使用糟糕的设计而自豪，因为能够与糟糕的设计一起工作证明了他们的应该是leet Skillz）。你要说服老板；所以你必须说老板懂的语言。老板想避免项目失败的风险，他们可能会同意使用*非标准*技术会增加风险。可能不需要确切的技术证明，对您所说的效果更好（这通常令人难过，但在这种特定情况下它对您有用）表达了强烈的确定性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:19:52.693

为什么不直接测试它并报告测试结果？只需将现有的生产数据克隆 50 次到新表中并针对它运行一些流量。

这是无可辩驳的，不需要简化隐喻并且没有欺骗性（就像其他答案之一所暗示的那样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:59:57.993

你为什么不试着告诉他一个数据库就像一个柜子，每张桌子都是一个抽屉。

现在让他想象一下通过 2505 或 125.000 个抽屉的柜子……为了使其更具挑战性，他将没有梯子或其他方法可以到达最上面的抽屉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T16:10:47.343

如果您试图向非技术人员解释为什么这样的数据库不好，您将无法像我们许多人那样详细说明。

现在，虽然它可能（或不是）是真的，但您可以使用一些简单的答案：

a）“如果您有更多表，则获取日期的命令（查询）将太复杂/太大 - 这意味着您的系统不会那么响应/快速/等等”

或者

b）“如果发生任何不好的事情或者您需要修改数据库，您将不得不支付更多费用，因为它没有经过优化，无论您付钱给谁做这件事都会更难”

反正我就是这么解释的。

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T18:35:22.700

钱。

开发商花钱。维护要花钱。

与黑板开会或发送带有以下内容的电子邮件：

```
开发人员费用每天 500 英镑

在应用程序后面创建表
----------------------------------

创建 1 个表的时间 = 20 分钟
创建 125,000 个表的时间 = 125,000 x 20 = 2,500,000 分钟
创建 125,000 个表的成本 = 2,500,000 / 60 / 8 * 500 = £2,604,166

更新应用程序
----------------------------------

更新 1 个表的时间 = 5 分钟
更新 125,000 个表的时间 = 125,000 * 5 = 625,000 分钟
更新 125,000 个表的成本 = 625,000 / 60 / 8 * 500 = £651,041

第一个月的费用
----------------------------------
654,041 英镑 + 2,604,166 英镑 = 325.8 万英镑

```

换算成当地货币，并指出“老板”每次想要更改某些东西时都会在维护上节省这么多现金。只是为了确保您不会无缘无故地这样做，请指出这是正常程序之外的*额外*内容。

# html - 如何使带有浮动的 div 框与动态内容具有相同的高度

> ID：11990669
> 
> 赞同：6
> 
> 时间：2012-08-16T15:31:51.863
> 
> 标签：html, css

在表格中，如果您有一行，则该行的高度相同，并且该行中的所有单元格都会随着动态内容而增长和缩小。（如果一个单元格有大量文本，而其他单元格的文本不多，那么它们的高度都相同，让您可以创建列和行）。

随着使用表格的 div 浮动布局的流行，人们常常不赞成。但是，如何复制表格的此功能和其他功能和优点，同时仍将显示设置为阻止，以获得阻止、跨浏览器的好处？

我见过很多 hack，但它们似乎总是太复杂，相互干扰，或者需要调整。我正在为以下内容寻找一种标准的可靠方法：

**使用包装容器使 div 框在一行中具有相同的高度**

```
<style>
    .cell { float:left; }
</style>
<div class="row">
    <div class="cell">Content 1 with more width</div>
    <div class="cell">Content 2<br>with<br>more<br>height<br>Content 2<br>Content 2<br></div>
    <div class="cell">Content 3</div>
</div> 
```

在这种情况下，“单元格”类的所有 div 将具有相同的高度，并且根本不是固定高度而是浮动的，并且对于任何大小的动态内容都将保持这种状态。

**垂直居中内容**

在这种情况下，使用上面的示例，对于任何大小的动态内容，所有内容都将垂直对齐到中间。

**使“单元格”类的 div 共享基于包装“行”的公共宽度**

在表格中，当您将宽度指定为 100% 或固定宽度时，单元格将自动尝试全部为相同宽度，除非图像或块状项目禁止这样做。如何通过浮动 div 实现这一点？好像您说，将所有“单元格”浮动到左侧，您可以指定最小宽度或固定宽度，但我知道没有办法让它们共享一个动态的公共宽度，如表格。在浮动的 div 中，它们本身会缩小到内容的大小。

**如何避免内容推送到容器/包装“行”并将其视为只是一个块**

无论出于何种原因，当浮动 div 位于包装器内时，您可能会出现奇怪的行为，其中内容将“粘”到包装器上，就好像也在浮动一样。即使有时在`<br style="clear:both">`最后使用 a 时，我也会发生这种情况。

如果您能为我回答有关浮动 div 的所有这些问题，我们将不胜感激。请不要告诉我将其分解为单独的问题，因为它们都与同一件事有关。请不要告诉我这最好在其他地方问。但是，如果您希望有所帮助，那就太好了:)

如果解决方案`display:table-cell`单独使用，我已经尝试过了，它使 div 不表现为块，缩小它，背景也缩小到内容，并且在其他方​​面它不表现为块。还有一些版本的 IE 不支持这个，我正在寻找一个跨浏览器的解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:28:31.233

如果您希望您的`div`元素表现得像表格单元格，您可以这样设置它们的样式：

```
.row {
  display: table;
  width: 100%;
}
.cell {
  display: table-cell;
  width: 33.33%;
  vertical-align: middle;
  text-align: center;
}​ 
```

这不依赖于设置 a or`height`元素，因此高度将保持灵活。`min-height``.cell`

[**--- jsFiddle 演示 ---**](http://jsfiddle.net/jackwanders/uqs3h/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:23:30.253

您可以像这样应用CSS；

```
.row{
    height: 200px;
}
.cell{
    display:block;
    float:left;
    height:100%;
} 
```

***[这](http://jsfiddle.net/blasteralfred/ZamZD/)***是一个有效的现场演示。

并且***[这里](http://jsfiddle.net/blasteralfred/ZamZD/6/)***也是分配列的一种解决方法。

**希望这可以帮助**

注意：不要为子 div 添加百分比属性来`div`填充父 div（例如，2 个子 div 各占 50%，4 个子 div 各占 25% 等），因为这些因 div 的数量而异，有时无法准确计算

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T17:27:24.910

好吧，我走的是 jQuery 路线... [http://jsfiddle.net/dtgEt/1/](http://jsfiddle.net/dtgEt/1/)

我想指出的是，虽然是的，但有些人只会使用表格，表格用于显示*表格*数据，而不是布局。在我看来，div 没有语义意义，因此是更好的选择（除非它实际上是您发布到网络的表格数据）。

我的解决方案适用于 IE 7，并且可能适用于 IE 6。如果您想将内容对齐在容器的中心，有很多其他人建议的好方法（击败我）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T16:49:31.543

如果您需要表格的格式，但您必须支持不支持的旧浏览器，请`display:table`使用表格。就这么简单。

有时表格是合适的选项，有时它是唯一可以在不添加一些中等风险的 JS 或 jQuery 来模拟表格格式的情况下工作的选项。

例如，表格（或`display:table`，相当于同一件事）是使动态内容真正垂直居中的唯一自然方式。这也是为动态内容强制等高列的唯一自然方式。通常，只要您需要显示某种数据网格，就可以使用表格。

# vbscript - 使用 pdftk 合并多个位置的 PDF

> ID：11990671
> 
> 赞同：1
> 
> 时间：2012-08-16T15:31:58.107
> 
> 标签：vbscript, batch-file, merge, pdftk

我正在尝试从批处理或 VBS 脚本文件合并多个 PDF 调用 pdftk。问题是 PDF 都位于公共父目录中的子文件夹中。示例：*父文件夹 > subfolder1, subfolder2, subfolder3*，其中脚本/BAT 文件位于*父文件夹*中，每个*子文件夹*包含一个 PDF。

pdftk 调用如下：*pdftk.exe* * *.pdf cat output OutputFile.pdf*

不过，这只会合并当前目录中的 PDF，而不是子文件夹中的 PDF。有没有办法执行以下操作之一：

1.  使用 VBS/BAT 文件将子文件夹中的所有 PDF 复制到另一个目录，如果某些子文件夹为空，则不会出错
2.  让 pdftk 查看子文件夹以选择要合并的 PDF

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:03:46.723

尝试这个：

```
Wscript.Echo "begin."
Dim pdffiles
pdffiles=""
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objSuperFolder = objFSO.GetFolder(WScript.Arguments(0))
Call ShowSubfolders (objSuperFolder)

Dim objShell
Set objShell = CreateObject("Shell.Application")
objShell.ShellExecute "pdftk.exe", pdffiles & " output combined.pdf", "", "runas", 1

Wscript.Echo "end."

WScript.Quit 0

Sub ShowSubFolders(fFolder)
    Set objFolder = objFSO.GetFolder(fFolder.Path)
    Set colFiles = objFolder.Files
    For Each objFile in colFiles
        If UCase(objFSO.GetExtensionName(objFile.name)) = "PDF" Then
            pdffiles=pdffiles & " " & objFile.Name
        End If
    Next

    For Each Subfolder in fFolder.SubFolders
        ShowSubFolders(Subfolder)
    Next
End Sub 
```

# wcf - 多租户 WCF 方法

> ID：11990676
> 
> 赞同：0
> 
> 时间：2012-08-16T15:32:26.233
> 
> 标签：wcf, multi-tenant

我使用的多租户设计来自： [http](http://romiller.com/2011/05/23/ef-4-1-multi-tenant-with-code-first/) ://romiller.com/2011/05/23/ef-4-1-multi-tenant-with-code-first/ ，效果很好:)

现在我想编写一个 WCF 服务来使用这种多租户方法。问题是我想避免编写类似的代码

```
[operationcontract]
public List<Data> getDateById(string tenantShema, int id)
{}

 (EX: get data from Table.User1) 
```

我希望tenantScheme 字符串是背景，就像我猜的WCF 身份验证一样。我相信（不确定）会在 xml 的标头信息中发送并在后台处理。

有可能吗？如何？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:17:39.610

您使用的是什么类型的安全性？你的用户有角色吗？如果是，角色信息将在服务的安全上下文中可用，例如[http://msdn.microsoft.com/en-us/library/aa347790.aspx](http://msdn.microsoft.com/en-us/library/aa347790.aspx)

# windows-services - 如何使用 wix 而不是使用 ServiceInstall 安装 Windows 服务

> ID：11990678
> 
> 赞同：0
> 
> 时间：2012-08-16T15:32:27.140
> 
> 标签：windows-services, wix

我需要使用 wix 安装 Windows 服务。不幸的是 ServiceInstall 不符合我的需要。它不允许显式指定服务文件，并且需要放置在服务可执行文件所在的同一组件中。但是每次构建项目时，我的组件都是由热量动态生成的。所以我不能把 ServiceInstall 放在那里。

有谁知道安装该服务的替代方法？

该服务是 .net 的，所以我的第一个想法是直接从 .net 框架运行 installutil。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:09:53.103

我已经详细谈到了动态安装创作的许多限制。我要做的是为服务静态创作这个组件（使用 ServiceInstall ）并将其从动态生成过程中排除。

再说一次，我不使用动态创作期。我不认为这是最佳做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:11:11.207

`-t`您可以按照您想要的方式使用 XSLT 转换（请参阅开关）转换热量输出。而且它仍然比使用 installutil 好... 查看 DTF 文档（随 WiX 安装的 DTF.chm `Development Guide > Managed CAs > InstallUtil`），了解为什么使用 installutil 不是一个好主意的原因。

# jsf - 将 JSF 错误重定向到日志文件

> ID：11990680
> 
> 赞同：2
> 
> 时间：2012-08-16T15:32:36.527
> 
> 标签：jsf, logging, system.out

如何将所有 JSF 错误日志消息重定向到日志文件？目前它正在被写入`SystemOut.log`文件。

我试图将其更改为将写入日志文件`System.out`的自定义，并将系统输出语句记录到日志文件中。`PrintStream`但是 JSF 错误消息仍在写入`SystemOut.log`文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:54:25.307

Mojarra 使用[`java.util.logging`](http://docs.oracle.com/javase/6/docs/api/java/util/logging/package-summary.html)记录器。因此，您需要做的就是提供或更改`logging.properties`运行时类路径中的文件。如有必要，您可以使用 VM 参数覆盖/指定属性文件位置`-Djava.util.logging.config.file`。

另一种方法是在 servletcontainer 级别对其进行配置。不清楚您使用的是哪一个，但确切的文件名`SystemOut.log`是 WebSphere 的典型文件名。相反，您也可以在其管理控制台中配置跟踪/日志记录。

# java - java中的溢出短路

> ID：11990681
> 
> 赞同：3
> 
> 时间：2012-08-16T15:32:45.513
> 
> 标签：java, primitive-types, short

`short`我对Java 中的数据类型有一个疑问。我知道简写的范围在 -32768 到 32767 之间。

因此，如果我尝试添加两个超出范围的短值，则结果最终是假定的总数减去正范围或负范围乘以 2，如下所示：

```
short a = 30000;
a = (short) (a+a); 
```

结果是**-5536**。

所以数学是**32768 + 32768 = 65536**，**6000 - 65536 = -5536**。

我知道它做了什么，但我不知道为什么它会这样。

任何人都可以解释逻辑或为什么 Java 这样做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T15:39:19.557

正在发生的事情是你的号码正在环绕。更具体地说，你有一个数字 30,000，二进制是：

```
0111 0101 0011 0000 
```

当您将其添加到自身并携带 1 时，您会得到：

```
1110 1010 0110 0000 
```

（注意：在二进制中将一个数字乘以 2 非常容易——只需将所有位向左移动一位。）

short 是使用[二进制补码](http://en.wikipedia.org/wiki/Twos_complement)的有符号数，这意味着最左边的 1 实际上是减号；该数字代表-5536。

如果再次将该数字乘以 2，则需要 2 个以上的字节来表示它。由于 a 中没有超过 2 个字节，因此当表达式的结果缩小到 a`short`时，多余的位就会被丢弃。做到这一点，你会得到一个 0 作为最左边的数字；该数字再次为正。然后最终您将再次将 1 作为最左边；这个数字又是负数了。最终你会将所有的 0 移到数字中；将任何整数乘以 2 足够的次数总是会得到 0（具体来说，如果它是一个 N 位数，那么将它乘以 2 N 次总是会得到 0）。`int``short`

如果您没有缩小到 a `short`，您最终仍然会用完 in 中的数字`int` （当您需要 33 位或更多位时）——这将导致多余的数字被丢弃，即[整数溢出](http://en.wikipedia.org/wiki/Integer_overflow)。如果任何一个参数都是 a ，也会发生同样的事情`long`，尽管它需要 65+ 位。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T15:50:37.603

首先，您的加法[将 short 转换为 int](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.1)，因为加法运算符对操作数执行[二进制数字提升](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2)。

结果是`int tmp = 60000;`

[然后通过缩小原始转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)将该结果转换回短：

> 有符号整数到整数类型 T 的窄化转换只会丢弃除 n 个最低位之外的所有位，其中 n 是用于表示类型 T 的位数。

换句话说`60000 = 1110 1010 0110 0000b`，但是 short 是有符号的，所以最初的 1 是符号并且使用 2 补码，你会得到等效的 short 值，即 -5536：`1110 1010 0110 0000`=> - `0001 0101 1010 0000`（你否定所有位，加一个并放一个减号）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T15:39:58.080

```
 0111 0101 0011 0000
  + 0111 0101 0011 0000
  ______________________
    1110 1010 0110 0000 
```

Java`short`是用二进制补码编码的。在二进制补码中，最高有效位被认为是符号位，`0`是正数`1`和负数。

```
1110 1010 0110 0000 = -5536 in two's complement 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T15:36:41.080

它与数据的二进制表示有关。在大多数系统中，使用称为 2 的补码的东西。正数表现正常，只要它们有一个前导 0。

```
0010 = 2 
```

要翻转符号，请将所有 0 替换为 1，然后添加 1：

```
-2 = 1110 
```

那么如果我们取最大的正数，比如 01111（二进制），然后加 1，会发生什么？我们得到 10000，这是一个负数（特别是 Int.min_val）。这就是整数溢出时发生的情况。

[http://en.wikipedia.org/wiki/Two%27s_complement](http://en.wikipedia.org/wiki/Two%27s_complement)

# jquery - 从jQuery中的数组中排除数组

> ID：11990683
> 
> 赞同：2
> 
> 时间：2012-08-16T15:32:46.677
> 
> 标签：jquery

我想简单地从另一个数组中排除一些数组元素并使用 js 和 jQuery 获取结果。我发现我自己在做一个双 .each() 循环......

```
var exclude = new Array();
exclude = [1,2,3,4];
var original = new Array();
original = [0,1,2,3,4,5,6,7,8];
var finalarray = excludearrayfunction(original, exclude); // [0,5,6,7,8] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T15:37:14.067

# 方法[`.not()`](http://api.jquery.com/not/)_

您可以使用 jQuery[`.not`](http://api.jquery.com/not/)方法从集合中排除项目，如下所示：

```
var exclude = [1,2,3,4];
var original = [0,1,2,3,4,5,6,7,8];
var result = $(original).not(exclude); 
```

这将返回一个 jQuery 对象，将结果选择为数组，我们可以简单地执行以下操作：

```
var finalArray = result.get();
// result: 0,5,6,7,8 
```

## [jsFiddle 演示](http://jsfiddle.net/JgH6t/)

## 完全的

```
var exclude = [1,2,3,4];
var original = [0,1,2,3,4,5,6,7,8];
var finalArray = $(original).not(exclude).get(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T15:36:16.157

```
var exclude = [1,2,3,4];
var original = [0,1,2,3,4,5,6,7,8];
var finalarray = $.grep(original,function(el,i) {
  return !~$.inArray(el,exclude);
}); 
```

`!~`是查看值是否等于 -1 的快捷方式，如果 $.inArray(el,exclude) 返回 -1，则您知道原始数组中的值不在排除数组中，因此您保留它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T15:38:01.103

```
Array.prototype.difference = function(arr) {
    return this.filter(function(i) {return arr.indexOf(i) < 0; });
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T15:38:43.173

你不需要 jQuery，它更适合 perf。

```
finalArray = [];
orig = [0,1,2,3,4,5,6,7,8];
exclude = [1,2,3,4];

orig.forEach(function(x) { if (exclude[x] === undefined) { finalArray.push(x) }}); 
//[0,5,6,7,8] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T15:35:34.943

```
function excludearrayfunction(original, exclude) {
  var temp = [];
  $.each(original, function(i, val) {
      if( $.inArray( val, exclude) != -1 ) {
        temp.push(val);
      }
  });
  return temp;
} 
```

***或者***

```
function excludearrayfunction(original, exclude) {
   return $.grep(original, function(i, val) {
      return $.inArray(exclude, val) != -1;
   })
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T15:43:54.203

使用 jQuery 的`.not`. 你可以在[这里](http://api.jquery.com/not/)找到它。

```
var original = [1,2,3];
var exclude = [1,2];

var tempArr = $(original).not(exclude);

var finalArray = tempArr .get(); 
```

# ios - MonoTouch/OpenTK/GLKit 中启用 GL 的 Texture2D 生成错误 0x0500

> ID：11990686
> 
> 赞同：2
> 
> 时间：2012-08-16T15:32:50.383
> 
> 标签：ios, opengl-es, xamarin.ios, opengl-es-2.0, glkit

我在 GLKViewController 的 MonoTouch 5.2.13 中使用 OpenTK-1.0.dll。我可以使用彩色顶点渲染 3D 对象，那里一切正常。

现在我想用纹理贴图渲染 3D 对象。为此，我在我的`ViewDidLoad`方法中添加了以下调用（在我的 GLKViewController 子类中）：

```
GL.Enable(EnableCap.Texture2D); 
```

但是由于我添加了这个调用，OpenGL 屏幕保持黑色（不再有彩色顶点），并且在控制台上我看到

```
GL ERROR: 0x0500 
```

当我删除`GL.Enable`呼叫时，一切都恢复正常。

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:55:26.883

`glEnable(GL_TEXTURE_2D)`（或等效的 openTK）在 OpenGLES 2.0 中不存在。它只控制固定管道的纹理。

要在 OpenGLES 2.0 中使用纹理，您只需在着色器中对它们进行采样，无需启用任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T09:27:14.303

解决了，我必须添加以下内容：

```
_baseEffect.Texture2d0.Enabled = true;
_baseEffect.Texture2d0.GLName = _myGlkTexture.Name;
_baseEffect.Texture2d0.EnvMode = GLKTextureEnvMode.Replace;
_baseEffect.Texture2d0.Target = GLKTextureTarget.Texture2D;
_baseEffect.PrepareToDraw(); 
```

这个`BaseEffect`类负责管理着色器，所以我们只需要告诉它激活纹理渲染。

# javascript - 多个 JS 文件中的 JQuery 和变量

> ID：11990687
> 
> 赞同：0
> 
> 时间：2012-08-16T15:33:00.693
> 
> 标签：javascript, jquery

我有引用 html ID 的变量，例如

```
<div data-role="footer" id="ftrPaxFlight">
    <h4>&#169; 2012, BT</h4>
</div> 
```

我正在使用 jQuery 将 javascript 嵌入到 html 中，就像

```
<script>
  $(document).ready(function() {
            var ftrPaxFlight = $('#ftrPaxFlight');
    var butMainLogin = $('#butMainLogin');
    var butMainSetup = $('#butMainSetup'); 
       .....
      butMainLogin.bind("click", function() {
           getChangeFtr();
    }); 
```

其中 getChangeFtr 是位于外部 .js 文件中的函数。我想将逻辑与 UI 分开。该文件也包含在标签下

```
function getChangeFtr(){
     alert("Ftr will be changed " + ftrPaxFlight);
 } 
```

单击按钮时..调用 getChangeFtr() 方法，出现错误

> TypeError - ftrPaxFlight 未定义。

有人可以指导我使用 jQuery 将变量传递给多个 javascript 文件的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:36:05.953

有很多方法可以做到这一点，并且没有“正确的方法”。您可以使用全局变量、全局命名空间/单例，或者只是使用参数在函数之间传递对象。在你的情况下，我会使用参数：

```
function getChangeFtr( elem ){
    alert("Ftr will be changed " + elem);
} 
```

和：

```
butMainLogin.bind("click",function() {
    getChangeFtr( ftrPaxFlight );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:37:24.200

您的 ftrPaxFlight 变量在文档就绪函数的范围内声明。您需要在全局范围内声明它，以便您的全局方法访问该变量。

```
var ftrPaxFlight;
$(document).ready(function(){
    ftrPaxFlight = $('#ftrPaxFlight');
    //....etc
}

function getChangeFtr(){
    alert("Ftr will be changed " + ftrPaxFlight);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:35:01.243

利用

```
var ftrPaxFlight = $('#ftrPaxFlight').val() 
```

并声明

```
<script>
var ftrPaxFlight;
$(document).ready(function() { ....... 
```

作为全局前就绪功能。

# powershell - Powershell 正在从程序参数中删除逗号

> ID：11990688
> 
> 赞同：19
> 
> 时间：2012-08-16T15:33:04.803
> 
> 标签：powershell

我想将逗号分隔的值列表作为单个开关的一部分传递到脚本中。

这是程序。

```
param(
  [string]$foo
)

Write-Host "[$foo]" 
```

这是使用示例

```
PS> .\inputTest.ps1 -foo one,two,three 
```

我希望这个程序的输出是，`[one,two,three]`但它正在返回`[one two three]`。这是一个问题，因为我想使用逗号来分隔值。

为什么 powershell 删除逗号，我需要更改什么才能保留它们？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-16T15:35:46.047

逗号是 powershell 中的一个特殊符号，用于表示数组分隔符。

只需将参数放在引号中：

```
inputTest.ps1 -foo "one, two, three" 
```

或者，您可以“引用”逗号：

```
inputTest.ps1 -foo one`,two`,three 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-07-16T15:06:47.690

有以下选择

1.  所有参数的引号 (')

    `inputTest.ps1 -foo 'one,two,three'`

2.  每个逗号前的 Powershell 转义字符（重音 (`)）

    `inputTest.ps1 -foo one`,two`,three`

**参数周围的双引号**不会改变任何东西！
**单引号**消除扩展。
**转义字符**（重音）消除了下一个字符的扩展

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T15:36:49.403

将其括在引号中，以便将其解释为一个变量，而不是逗号分隔的三个列表：

> PS> .\inputTest.ps1 -foo "一、二、三"

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-20T22:12:57.430

如果您要从批处理文件中传递参数，则将您的参数包含在下面“”“Param1，Param2，Param3，Param4”“”

# javascript - Openlayers 导出到 KML 并保留我的地图样式

> ID：11990692
> 
> 赞同：4
> 
> 时间：2012-08-16T15:33:16.803
> 
> 标签：javascript, openlayers, kml

我从 Openlayers 成功编写了 KML，但是 kml 文件中没有样式（颜色、笔触等）。是否可以使用样式生成 KML？

我在这里发现了一个类似的问题： [https ://gis.stackexchange.com/questions/17031/openlayers-format-kml-w​​rite-style](https://gis.stackexchange.com/questions/17031/openlayers-format-kml-write-style)

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T16:12:53.217

到目前为止，WRITE 方法还没有使用您[在此处](http://trac.osgeo.org/openlayers/browser/trunk/openlayers/lib/OpenLayers/Format/KML.js?rev=12434)`'extractStyles':true,`看到的属性。只有 READ 方法可以。

我看到的唯一方法就是重新创建它们。在下面的示例中，我创建了我想要的 KML 样式并将**其注入**到 openlayers 创建的 kml 字符串中。

```
myorg.Util.GetKMLFromFeatures = function (features, strfolderName, strfolderDescription) {

    var format = new OpenLayers.Format.KML({
        'maxDepth': 10,
        'extractStyles': true,
        'internalProjection': myorg.UI.Map.getMap().baseLayer.projection,
        'externalProjection': myorg.UI.Map.Projections.Geographic
    });

    var kmlStyle = "<Style id='OutlineOnlyStyle'><PolyStyle><color>ff0000cc</color><fill>0</fill><outline>1</outline></PolyStyle></Style>";

    format.foldersName = strfolderName;
    format.foldersDesc = strfolderDescription;

    //add style description
    var kml = format.write(features).replace(/<Folder>/g, '<Folder>' + kmlStyle)
    .replace(/><name>/g, '><styleUrl>#OutlineOnlyStyle</styleUrl><name>');

    return kml;

}; 
```

# sql - “OBJECT_NAME”函数不再返回对象的名称

> ID：11990695
> 
> 赞同：3
> 
> 时间：2012-08-16T15:33:32.713
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我将“OBJECT_NAME”函数与系统表结合使用，以返回给定其 object_id 的对象的名称。直到昨天，这工作正常。当我现在使用相同的函数时，我在应该的列中得到一个空值返回对象名称。我尝试重新连接到服务器并在不同的数据库上尝试该功能，但我得到相同的结果。有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T15:38:07.927

一个可能的问题是您在错误的数据库中。“id”是特定于数据库的，所以真正的键是“,”。

如果您执行 OBJECT_ID()，这一点会更加明显。如果您传入一个由三部分组成的名称，那么它将在您所在的任何数据库中解析。如果您传入一个由一个部分组成的名称，那么它会尝试在当前数据库中解析它。如果没有找到，你会得到 NULL。

# c - 连接到环回地址时的管道损坏 (EPIPE)

> ID：11990700
> 
> 赞同：4
> 
> 时间：2012-08-16T15:33:44.660
> 
> 标签：c, sockets, networking, sigpipe, epipe

我目前正在测试我的网络代码。这涉及通过 IPv4 环回地址 (127.0.0.1) 建立连接。不幸的是，程序经常（并非总是）在发送数据时给出 EPIPE 错误。

我正在使用伯克利网络套接字和 libevent。我通过以下方式制作了一个非阻塞套接字：

```
CBSocketReturn CBNewSocket(uint64_t * socketID,bool IPv6){
    *socketID = socket(IPv6 ? PF_INET6 : PF_INET, SOCK_STREAM, 0);
    if (*socketID == -1) {
        if (errno == EAFNOSUPPORT || errno == EPROTONOSUPPORT) {
            return CB_SOCKET_NO_SUPPORT;
        }
        return CB_SOCKET_BAD;
    }
    // Stop SIGPIPE annoying us.
    if (CB_NOSIGPIPE) {
        int i = 1;
        setsockopt(*socketID, SOL_SOCKET, SO_NOSIGPIPE, &i, sizeof(i));
    }
    // Make socket non-blocking
    evutil_make_socket_nonblocking((evutil_socket_t)*socketID);
    return CB_SOCKET_OK;
} 
```

我通过以下方式进行连接事件：

```
bool CBSocketDidConnectEvent(uint64_t * eventID,uint64_t loopID,uint64_t socketID,void (*onDidConnect)(void *,void *),void * node){
    CBEvent * event = malloc(sizeof(*event));
    event->loop = (CBEventLoop *)loopID;
    event->onEvent.ptr = onDidConnect;
    event->node = node;
    event->event = event_new(((CBEventLoop *)loopID)->base, (evutil_socket_t)socketID, EV_TIMEOUT|EV_WRITE, CBDidConnect, event);
    if (NOT event->event) {
        free(event);
        event = 0;
    }
    *eventID = (uint64_t)event;
    return event;
}
void CBDidConnect(evutil_socket_t socketID,short eventNum,void * arg){
    CBEvent * event = arg;
    if (eventNum & EV_TIMEOUT) {
        // Timeout for the connection
        event->loop->onTimeOut(event->loop->communicator,event->node,CB_TIMEOUT_CONNECT);
    }else{
        // Connection successful
        event->onEvent.ptr(event->loop->communicator,event->node);
    }
} 
```

并通过以下方式添加：

```
bool CBSocketAddEvent(uint64_t eventID,uint16_t timeout){
    CBEvent * event = (CBEvent *)eventID;
    int res;
    if (timeout) {
        struct timeval time = {timeout,0};
        res = event_add(event->event, &time);
    }else
        res = event_add(event->event, NULL);
    return NOT res;
} 
```

连接：

```
bool CBSocketConnect(uint64_t socketID,uint8_t * IP,bool IPv6,uint16_t port){
    // Create sockaddr_in6 information for a IPv6 address
    int res;
    if (IPv6) {
        struct sockaddr_in6 address;
        memset(&address, 0, sizeof(address)); // Clear structure.
        address.sin6_family = AF_INET6;
        memcpy(&address.sin6_addr, IP, 16); // Move IP address into place.
        address.sin6_port = htons(port); // Port number to network order
        res = connect((evutil_socket_t)socketID, (struct sockaddr *)&address, sizeof(address));
    }else{
        struct sockaddr_in address;
        memset(&address, 0, sizeof(address)); // Clear structure.
        address.sin_family = AF_INET;
        memcpy(&address.sin_addr, IP + 12, 4); // Move IP address into place. Last 4 bytes for IPv4.
        address.sin_port = htons(port); // Port number to network order
        res = connect((evutil_socket_t)socketID, (struct sockaddr *)&address, sizeof(address));
    }
    if (NOT res || errno == EINPROGRESS)
        return true;
    return false;
} 
```

连接后，会发生 canSend 事件：

```
bool CBSocketCanSendEvent(uint64_t * eventID,uint64_t loopID,uint64_t socketID,void (*onCanSend)(void *,void *),void * node){
    CBEvent * event = malloc(sizeof(*event));
    event->loop = (CBEventLoop *)loopID;
    event->onEvent.ptr = onCanSend;
    event->node = node;
    event->event = event_new(((CBEventLoop *)loopID)->base, (evutil_socket_t)socketID, EV_TIMEOUT|EV_WRITE|EV_PERSIST, CBCanSend, event);
    if (NOT event->event) {
        free(event);
        event = 0;
    }
    *eventID = (uint64_t)event;
    return event;
}
void CBCanSend(evutil_socket_t socketID,short eventNum,void * arg){
    CBEvent * event = arg;
    if (eventNum & EV_TIMEOUT) {
        // Timeout when waiting to write.
        event->loop->onTimeOut(event->loop->communicator,event->node,CB_TIMEOUT_SEND);
    }else{
        // Can send
        event->onEvent.ptr(event->loop->communicator,event->node);
    }
} 
```

但是发送经常会出现 EPIPE 错误：

```
int32_t CBSocketSend(uint64_t socketID,uint8_t * data,uint32_t len){
    ssize_t res = send((evutil_socket_t)socketID, data, len, CB_SEND_FLAGS);
    printf("SENT (%li): ",res);
    for (uint32_t x = 0; x < res; x++) {
        printf("%c",data[x]);
    }
    printf("\n");
    if (res >= 0)
        return (int32_t)res;
    if (errno == EAGAIN)
        return 0; // False event. Wait again.
    return CB_SOCKET_FAILURE; // Failure
} 
```

它登陆`return CB_SOCKET_FAILURE;`并且 errno 设置为 EPIPE。现在为什么会这样？如果设置了发送标志，则它只是 MSG_NOSIGNAL，因为 SIGPIPE 一直以这个错误中断程序。我希望 EPIPE 导致 CBSocketSend 返回 CB_SOCKET_FAILURE 并且不中断程序，但是 EPIPE 没有原因导致发送失败，那么为什么要这样做呢？

上次我收到错误时，我注意到连接的线程仍在 connect() 调用中。使连接事件由单独的线程而不是连接的线程处理是否有危险？

在这些地方查看网络代码：

[https://github.com/MatthewLM/cbitcoin/blob/master/test/testCBNetworkCommunicator.c](https://github.com/MatthewLM/cbitcoin/blob/master/test/testCBNetworkCommunicator.c) [https://github.com/MatthewLM/cbitcoin/tree/master/src/structures/CBObject/CBNetworkCommunicator](https://github.com/MatthewLM/cbitcoin/tree/master/src/structures/CBObject/CBNetworkCommunicator) [https://github。 com/MatthewLM/cbitcoin/tree/master/dependencies/sockets](https://github.com/MatthewLM/cbitcoin/tree/master/dependencies/sockets)

谢谢你。

编辑：我再次运行它，在 connect() 完成后出现错误。

编辑 2：似乎连接事件是在没有对方接受的情况下给出的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:46:15.477

我不是 TCP/IP 专家，但我确实注意到，`EPIPE`即使 MSG_NOSIGNAL 设置为“面向流的套接字”，该文档仍然可以返回。看起来您正在使用`SOCK_STREAM`. 另一端可能正在断开连接。

`CBSocketConnect()`看起来如果你得到你`EINPROGRESS`只是返回true - 如果它连接成功，你也会返回。您将无法知道是否需要等待连接完成。根据[这个](http://www.kernel.org/doc/man-pages/online/pages/man2/connect.2.html)你可以`select()`或`poll()`为连接完成。

* * *

以上是我在@MatthewMitchell 和@user315052 的要求下对OP 的评论的转贴。

* * *

**编辑：** [我正在添加](https://stackoverflow.com/users/315052/user315052)[对此答案](https://stackoverflow.com/a/12068942/315052)的更详细描述，以及随后的一些讨论。

所以，首先尝试做`connect()`. 然后，如果`EINPROGRESS`是错误结果，则从 注册一个写事件唤醒`libevent`。进入回调函数后，使用级别的套接字选项`EV_WRITE`检查连接的状态。如果返回的选项值为，则连接成功。否则，将其视为一个数字。`getsockopt()``SO_ERROR``SOL_SOCKET``0``errno`

[按照此答案](https://stackoverflow.com/a/12068942/315052)中的说明遵循此建议后，您发现客户端遇到了错误`ECONNREFUSED`。这解释了为什么您的写入失败了`EPIPE`. 调查你的服务器后，你发现服务器因为报错而无法监听绑定的地址`EADDRINUSE`。`SO_REUSEADDR`这可以通过在监听套接字上设置选项来处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:14:45.517

下面是一个简单的`libevent`玩具程序，它合成`EINPROGRESS`，然后通过等待等待连接完成`EV_WRITE`。基本上，这个程序表明，在您的应用程序中，您应该首先尝试执行`connect`调用，如果它失败并显示`EINPROGRESS`，您应该在执行 I/O 之前等待完成。

这是`libevent`回调函数：

```
extern "C" void on_connect (int sock, short ev, void *arg) {
    assert(ev == EV_WRITE);
    std::cout << "got wrieable on: " << sock << '\n';
    int optval = -1;
    socklen_t optlen = sizeof(optval);
    getsockopt(sock, SOL_SOCKET, SO_ERROR, &optval, &optlen);
    assert(optval == 0);
    std::cout << "succesful asynchronous connect on: " << sock << '\n';
    event_loopbreak();
} 
```

这些是玩具应用程序使用的一些辅助函数：

```
static void init_addr (struct sockaddr_in *addr, short port) {
    memset(addr, '\0', sizeof(*addr));
    addr->sin_family = AF_INET;
    addr->sin_port = htons(port);
    addr->sin_addr.s_addr = htonl(INADDR_LOOPBACK);
}

static void setup_accept (int sock) {
    const int one = 1;
    struct sockaddr_in addr;
    init_addr(&addr, 9876);
    setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, &one, sizeof(one));
    bind(sock, (struct sockaddr *)&addr, sizeof(addr));
    listen(sock, 1);
}

static int complete_accept (int sock) {
    struct sockaddr_in addr;
    socklen_t addrlen = sizeof(addr);
    return accept(sock, (struct sockaddr *)&addr, &addrlen);
}

static int try_connect (int sock) {
    struct sockaddr_in addr;
    init_addr(&addr, 9876);
    return connect(sock, (struct sockaddr *)&addr, sizeof(addr));
} 
```

`main`程序如下：

```
int main () {
    int accept_sock = socket(PF_INET, SOCK_STREAM, 0);
    setup_accept(accept_sock);
    int sock = socket(PF_INET, SOCK_STREAM, 0);
    fcntl(sock, F_SETFL, fcntl(sock, F_GETFL) | O_NONBLOCK);
    std::cout << "trying first connect on: " << sock << '\n';
    int r = try_connect(sock);
    assert(r < 0 && errno == EINPROGRESS);
    event_init();
    struct event ev_connect;
    event_set(&ev_connect, sock, EV_WRITE, on_connect, 0);
    event_add(&ev_connect, 0);
    int new_sock = complete_accept(accept_sock);
    event_dispatch();
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T16:01:34.597

从你的进程被唤醒处理连接成功的那一刻起，直到它试图写入套接字的那一刻，连接的状态仍然可以在操作系统的内核角度发生变化，而 libevent 无法预见它。

假设您要连接的服务器以我将要描述的方式运行，您所描述的场景可以由以下阶段组成。给定进程 A（您的客户端）和进程 B（连接的另一端）：

1.  B 运行，绑定服务器套接字，等待。
2.  A 运行, `connect()`, 等待
3.  B醒来，做`accept()`
4.  A 唤醒以处理连接成功。
5.  B 关闭套接字（由于进程终止或显式`close()`）。
6.  A 尝试发送，得到`errno == EPIPE`。

这可以在环回上重现。

顺便说一句，`SO_NOSIGPIPE`不是便携式插座选项。如果您正在编写一个可移植的 C 库，最好忽略使用`signal()`with的信号`SIG_IGN`。

# .net - 被超时问题难住了

> ID：11990703
> 
> 赞同：1
> 
> 时间：2012-08-16T15:34:01.910
> 
> 标签：.net, wcf, timeout

单击浏览器中的按钮后，服务器 A 上的 .net Web 应用程序运行 WCF，该 WCF 调用数据库服务器 B 上的存储过程。服务器 A 然后处理结果，然后将响应发送回浏览器。

如果存储过程的时间少于 60 秒，服务器 A 会获取结果并处理它们（可能需要几分钟），并且浏览器会得到响应。如果存储过程花费的时间超过 60 秒，服务器 A 仍将获取结果并处理它们（可能需要几分钟），但浏览器永远不会得到响应。我们已经设置了我们能想到的每个超时值。有任何想法吗？

服务器之间有防火墙，但我被告知默认超时为 30 分钟。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:04:48.983

尝试更改接收超时。默认为一分钟。

# javascript - 奇怪的索引问题

> ID：11990706
> 
> 赞同：1
> 
> 时间：2012-08-16T15:34:08.480
> 
> 标签：javascript, jquery, indexof

如果没有数百行代码，将很难解释这一点，但我会尝试！

我有一个包含子对象数组的父对象。父级使用此函数将 MULTIPLE 选择元素写入页面

```
function writecollectionmultiselect(name,displayname,selectedrange){    

// Create select page element
var collection = $("<select/>");
collection.attr("name",name);
collection.attr("MULTIPLE","multiple");

// Loop over elements in this collection and ask them to draw themselves
for(var i=0; i<this.objectarray.length;i++){
    collection.append(this.objectarray[i].writemultioption(selectedrange));
}
return collection;
} 
```

父母要求每个孩子根据他们的id是否在'selectedrange'中绘制自己的选项元素

```
function writemultioption(selectedrange){
    var option = $("<option/>");
    option.val(this.data.id);
option.html(this.data.name);
if(selectedrange.indexOf(parseInt(this.data.id)) >= 0){
    option.attr('selected', 'selected');
}
return option;
} 
```

当 selectedrange 提供为 selectedrange=[1,2,3] 时，这工作正常但是，如果我使用 jquery 读取页面元素的选定值

```
selectedrange = $('[name='+myname+"]").val(); 
```

当我尝试调用第一个函数时，indexOf 函数似乎完全崩溃了。我添加了这行调试代码

```
alert("looking for "+this.data.id+" in "+selectedrange+" result "+selectedrange.indexOf(parseInt(this.data.id))) 
```

当我第一次绘制选择器时，我得到了这个：

在 1,2,3 结果 0 中寻找 1

但是，读取值并重绘给出

在 1,2,3 结果中寻找 1 -1

我怀疑存在某种数据类型问题，但是几个小时以来我一直在努力解决这个问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:41:34.377

jQuery 将为您提供一个字符串数组，并且您将`this.data.id`使用转换为数字，`parseInt`因此它们永远不会匹配，因为`indexOf`比较是严格的。

一种解决方案是将字符串数组转换为数字。

```
selectedrange = $.map($('[name='+myname+"]").val(), function(n) { 
                                                        return parseInt(n, 10);
                                                    }); 
```

或者另一种解决方案是将数组保留为字符串，但摆脱`parseInt`并执行此操作。

```
if(selectedrange.indexOf(this.data.id) >= 0){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:44:34.033

该`indexOf()`函数将字符串作为参数，在您的示例中，您传入一个整数，尽量不要调用`parseInt()`：

```
alert("looking for " + this.data.id + " in " + selectedrange + "result" + selectedrange.indexOf(this.data.id))
                                                                                      // no parseInt() here 
```

此外，您得到的原因`-1`是因为该`indexOf()`函数`-1`在它正在搜索的字符串中找不到匹配项时返回。

# mysql - error: 'Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)' -- Missing /var/run/mysqld/mysqld.sock

> ID：11990708
> 
> 赞同：411
> 
> 时间：2012-08-16T15:34:18.480
> 
> 标签：mysql, linux, ubuntu

我的问题开始于我无法在我的 mysql 安装上以 root 身份登录。我试图在没有打开密码的情况下运行 mysql ......但是每当我运行命令时

```
# mysqld_safe --skip-grant-tables & 
```

我永远不会得到提示。我试图按照[这些说明恢复密码](http://www.cyberciti.biz/tips/recover-mysql-root-password.html)。

屏幕看起来像这样：

```
root@jj-SFF-PC:/usr/bin# mysqld_safe --skip-grant-tables
120816 11:40:53 mysqld_safe Logging to syslog.
120816 11:40:53 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql 
```

而且我没有得到提示开始输入 SQL 命令来重置密码。

当我按`CTRL`+杀死它时`C`，我收到以下消息：

```
error: 'Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)'

Check that mysqld is running and that the socket: '/var/run/mysqld/mysqld.sock' exists! 
```

如果我重试该命令并将其保留足够长的时间，我会收到以下一系列消息：

```
root@jj-SFF-PC:/run/mysqld# 120816 13:15:02 mysqld_safe Logging to syslog.
120816 13:15:02 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql
120816 13:16:42 mysqld_safe mysqld from pid file /var/run/mysqld/mysqld.pid ended

[1]+  Done                    mysqld_safe --skip-grant-tables
root@jj-SFF-PC:/run/mysqld# 
```

但是，如果我尝试通过执行以下操作以 root 身份登录：

```
# mysql -u root 
```

我收到以下错误消息：

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) 
```

我检查了，`/var/run/mysqld/mysqld.sock`文件不存在。文件夹有，但文件没有。

另外，我不知道这是否有帮助，但我跑了`find / -name mysqld`，它想出了：

```
/var/run/mysqld - folder
/usr/sbin/mysqld - file
/run/mysqld - folder 
```

我是 Linux 和 MySQL 的新手，所以我不知道这是否正常。但我将这些信息包括在内，以防万一。

**我终于决定卸载并重新安装mysql。**

```
apt-get remove mysql-server
apt-get remove mysql-client
apt-get remove mysql-common
apt-get remove phpmyadmin 
```

以与上述相同的顺序再次重新安装所有软件包后，在 phpmyadmin 安装期间，我收到了相同的错误：

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) 
```

所以我再次尝试卸载/重新安装。这一次，在我卸载了这些包之后，我还手动将所有 mysql 文件和目录重命名到`mysql.bad`了它们各自的位置。

```
/var/lib/mysql 
/var/lib/mysql/mysql
/var/log/mysql
/usr/lib/perl5/DBD/mysql
/usr/lib/perl5/auto/DBD/mysql
/usr/lib/mysql
/usr/bin/mysql
/usr/share/mysql
/usr/share/dbconfig-common/internal/mysql
/etc/init.d/mysql
/etc/apparmor.d/abstractions/mysql
/etc/mysql 
```

然后我尝试重新安装`mysql-server`并`mysql-client`再次。但我注意到它不会提示我输入密码。不是应该要求管理员密码吗？

* * *

## 回答 #1

> 赞同：357
> 
> 时间：2014-05-06T03:18:55.027

试试这个命令，

```
sudo service mysql start 
```

* * *

## 回答 #2

> 赞同：229
> 
> 时间：2012-08-16T15:40:02.493

要查找系统上的所有套接字文件，请运行：

```
sudo find / -type s 
```

我的 Mysql 服务器系统打开了套接字`/var/lib/mysql/mysql.sock`

找到打开套接字的位置后，添加或编辑 /etc/my.cnf 文件中包含套接字文件路径的行：

```
socket=/var/lib/mysql/mysql.sock 
```

有时，启动命令行可执行文件的系统启动脚本会指定一个标志`--socket=path`。此标志可能会覆盖 my.cnf 位置，这将导致在 my.cnf 文件指示的位置找不到套接字。然后，当您尝试运行 mysql 命令行客户端时，它会读取 my.cnf 以查找套接字，但它不会找到它，因为它偏离了服务器创建的位置。因此，除非您关心套接字所在的位置，否则只需将 my.cnf 更改为匹配即可。

然后，停止 mysqld 进程。您如何执行此操作将因系统而异。

如果您是 linux 系统的超级用户，如果您不知道 Mysql 设置使用的具体方法，请尝试以下方法之一：

*   `service mysqld stop`
*   `/etc/init.d/mysqld stop`
*   `mysqladmin -u root -p shutdown`
*   某些系统未设置为具有停止 mysql 的优雅方式（或由于某种原因 mysql 没有响应），您可以使用以下任一方法强制终止 mysql：
    *   一步：`pkill -9 mysqld`
    *   两步（最不推荐）：
        *   `pgrep mysql`使用或查找 mysql 的进程 ID`ps aux | grep mysql | grep -v grep`
        *   假设进程 id`4969`终止于`kill -9 4969`

完成此操作后，您可能需要在其中查找 pid 文件`/var/run/mysqld/`并将其删除

确保您的套接字上的权限使得任何运行 mysqld 的用户都可以读取/写入它。一个简单的测试是打开它以完全读/写，看看它是否仍然有效：

```
chmod 777 /var/run/mysqld/mysqld.sock 
```

如果这样可以解决问题，您可以根据您的安全设置按需定制套接字的权限和所有权。

此外，运行 mysqld 进程的用户必须可以访问套接字所在的目录。

* * *

## 回答 #3

> 赞同：187
> 
> 时间：2014-10-20T07:53:50.730

由于多次安装mysql而发生此错误。运行命令：

```
ps -A|grep mysql 
```

使用以下命令终止进程：

```
sudo pkill mysql 
```

然后运行命令：

```
ps -A|grep mysqld 
```

还可以通过运行终止此进程：

```
sudo pkill mysqld 
```

现在您已完全设置，只需运行以下命令：

```
service mysql restart
mysql -u root -p 
```

再次拥有运行良好的 mysql

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2013-02-05T23:47:52.087

解决方案要容易得多。

1.  首先，您必须找到`mysql.sock`文件所在的位置（在终端中使用“sudo find / -type s”）。就我而言，它在`/opt/lampp/var/mysql/mysql.sock`
2.  启动终端并发出 `sudo Nautilus`
    这将以超级用户权限启动您的文件管理器
3.  从 Nautilus 导航到您的`mysql.sock`文件所在的位置
4.  右键单击该文件并选择*制作链接*
5.  将链接文件重命名为`mysqld.sock`然后右键单击该文件并*剪切*它
6.  转到`/var/run`并创建一个名为`mysqld`并输入它的文件夹
7.  现在右键单击并*粘贴*链接文件
8.  瞧！您现在将有一个`mysqld.sock`文件在`/var/run/mysqld/mysqld.sock`:)

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2016-02-23T12:13:21.113

安装后只需要启动 MySQL 服务：

对于 Ubuntu：

```
sudo service mysql start; 
```

对于 CentOS 或 RHEL：

```
sudo service mysqld start; 
```

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2017-03-07T05:15:57.193

在 MySQL 5.6 和 5.7 的 Ubuntu 上存在一个错误，`var/run/mysqld/`只要 MySQL 服务停止或重新启动，该错误就会消失。这完全阻止了 MySQL 的运行。找到了这个不完美的解决方法，但至少在停止/重启后它可以运行：

```
mkdir /var/run/mysqld/
chown mysqld /var/run/mysqld/ 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2013-08-08T20:43:20.287

好的，只需复制并粘贴这些代码：这应该在终端中完成，在服务器内部，当您的 mysql 数据库未正确安装时，并且当您收到此错误时：'无法通过套接字连接到本地 MySQL 服务器'/ var/run/mysqld/mysqld.sock'（2）'。

**停止 MySql**

```
sudo /etc/init.d/mysqld stop 
```

**重新启动它或启动它**

```
sudo /etc/init.d/mysqld restart or sudo /etc/init.d/mysqld start 
```

**制作这样的链接并提供给系统**

```
ln -s /tmp/mysql.sock /var/lib/mysql/mysql.sock 
```

**运行安全安装，指导您配置 mysql 所需的所有过程**

```
/usr/bin/mysql_secure_installation 
```

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2013-01-24T06:37:32.740

我遇到了同样的错误，发现这是由于升级包引起的，所以在重新启动我的系统后我解决了错误。

我认为由于 sql 库/包更新发生了错误，所以如果你正在做一些升级，试试这个:)

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2019-06-20T10:56:40.590

确保您无法访问的套接字文件路径与“/var/run/mysqld/mysqld.sock”相同，否则将路径更改为您的路径。停止 mysqld

```
$ sudo /etc/init.d/mysqld stop 
```

如果进程仍在运行；

```
$ sudo pkill -9 mysqld 
```

删除要创建套接字的 mysql 目录。对我来说它不允许删除，所以我不得不强行删除。

```
$ sudo mkdir -p /var/run/mysqld 
```

将所有权设置为目录

```
$ sudo chown mysql:mysql /var/run/mysqld 
```

启动mysql

```
$ sudo /etc/init.d/mysql start 
```

尝试连接mysql

```
$ sudo mysql -u dbuser -p 
```

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2015-01-23T07:25:07.623

这个问题有很多原因，但有时只需重新启动 mysql 服务器，它就会解决问题。

```
sudo service mysql restart 
```

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2013-11-18T00:38:08.193

用户加载步骤的答案对我有用。有时需要在`/etc/mysql/my.cnf`添加行中编辑文件到客户端

```
[client]
password = your_mysql_root_password
port  = 3306
host  = 127.0.0.1
socket  = /var/lib/mysql/mysql.sock 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2018-06-14T13:17:22.867

在 ubuntu 上使用 XAMPP：

1.  在**/var/run**目录中创建一个名为**mysqld的文件夹。**您可以使用命令完成该操作。**`sudo mkdir /var/run/mysqld`**

***   创建一个指向**mysql.sock**文件的符号链接，该文件由 XAMPP 服务器在启动时创建。你可以使用命令`sudo ln -s /opt/lampp/var/mysql/mysql.sock /var/run/mysqld/mysqld.sock`。** 

 **> **注意：** mysql.sock*文件*在服务器启动时创建，在服务器停止时删除，因此有时您创建的链接可能看起来已损坏，但只要您使用任何一种`sudo /opt/lampp/lampp start`或任何其他方式启动服务器，它就应该可以工作方法。

3.  如果服务器尚未运行，请启动它并再次尝试执行您的程序。

祝你好运！我希望你这次能侥幸逃脱。

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2020-03-06T05:18:17.697

**为什么会出现此错误**

我收到了 mysql 库的新更新，所以在收到这些错误之后我更新了我的 Kubuntu 操作系统。

* * *

**我尝试过的命令以及我如何修复它。**

**MySql-server 运行正常，**但是当我尝试连接它时

```
Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock'. 
```

我检查了`/var/run/mysqld/mysqld.sock'.`这个目录。我的文件不存在。

我也尝试了这些命令来连接，但对我没有用。

```
 mysql -h 127.0.0.1 -P 3306 -u root -p

 sudo service mysql start 
```

浪费了大约**2 个小时后**，我找到了解决方案

```
sudo apt-get clean
sudo apt-get update
sudo apt-get upgrade -f 
```

在那之后，一切都为我解决了。

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2014-10-03T13:29:57.787

# *错误：'无法通过套接字'/var/run/mysqld/mysqld.sock'（2）连接到本地MySQL服务器'

**解决方案**

最后卸载并重新安装mysql。**

*   sudo apt-get 删除 mysql-server
*   sudo apt-get 删除 mysql-client
*   sudo apt-get 删除 mysql-common
*   sudo apt-get 删除 phpmyadmin

然后再次安装

*   sudo apt-get install mysql-server-5.6

此操作后，将使用 164 MB 的额外磁盘空间。

*   你要继续吗？[Y/n] Y 按 YES 完成安装

………………

*   最后你会得到这些线......

    设置 libhtml-template-perl (2.95-1) ...

    设置 mysql-common-5.6 (5.6.16-1~exp1) ... 处理 libc-bin (2.19-0ubuntu6) 的触发器 处理 ureadahead (0.100.0-16) 的触发器 ...

*   进而

    root@ubuntu1404:~# mysql -u root -p (对于你应该首先使用的每个密码)

*   输入密码：

*   注意：输入的密码应该和mysql的安装时密码相同（如.root、system、admin、rahul等...）

    然后输入

*   使用 rahul_db（数据库名称）；

谢谢。**

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2019-03-04T07:10:57.733

我认为您的 MySQL 服务器尚未启动。因此，使用以下命令之一启动服务器。

```
#services mysql start 
```

或者

```
#/etc/init.d/mysql start 
```

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2014-12-08T07:35:31.043

**临时解决方案**

也许有人面临这个问题。我在**Ubuntu 14上使用****Mysql Workbench**并收到此错误。

 **```
mysqldump: Got error: 2002: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) when trying to connect 
```

通过运行找到您的套接字文件`sudo find / -type s`，在我的情况下是`/run/mysqld/mysqld.sock`

所以，我只是在目录中创建了一个指向这个文件的链接`tmp`。

```
sudo ln -s /var/run/mysqld/mysqld.sock /tmp/mysql.sock 
```

**请注意**，这是一个临时解决方案，因为创建的文件将位于`/tmp`. 请参阅其他答案以获得永久解决方案。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2015-07-17T10:57:21.527

`ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)`

在`/etc/my.cnf`添加此行：

```
[client]
socket=/var/lib/mysql/mysql.sock <= this path should be also same as is[mysqld] 
```

并使用以下命令重新启动服务： `service mysql restart`

这对我有用

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2015-09-25T18:50:12.580

这已经被提到了几次，但这对我来说立即起作用：

服务mysql重启

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2013-07-31T12:25:30.957

如果你已经安装`mysqld.sock`了 ，你可以找到`/var/run/mysqld``mysql-server``sudo apt-get install mysql-server`

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2013-10-15T08:32:22.350

在我的情况下，两个 mysqld 进程正在运行.. 使用 pkill -9 mysqld 杀死了可选进程

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2014-04-09T10:53:18.213

如果您的系统上有很多数据库和表，并且您`innodb_file_per_table`在 my.cnf 中进行了设置，那么您的 mysql 服务器可能已经用完了打开的对象/文件（或者更确切地说是这些对象的描述符） 设置一个新的最大数量和

```
open-files-limit = 2048 
```

并重新启动mysql。当根本没有创建套接字时，这种方法可能会有所帮助，但实际上这可能不是真正的问题，这是一个潜在的问题。

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2015-06-24T15:23:34.153

我刚刚在 Ubuntu 14.10 上遇到了这个问题

`mysql-server`不再安装的转弯（不知何故已被删除）但我不能只安装它，因为有一些损坏的包和依赖问题/冲突。

最后我不得不重新安装mysql

```
sudo apt-get remove mysql-client
sudo apt-get install mysql-server 
```

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2018-10-03T06:22:28.073

我在 Ubuntu 上使用 XAMPP。通过终端连接数据库时发现此错误。我在没有任何配置的情况下解决了它，因为 XAMPP 中的默认套接字文件路径写在“/opt/lampp/etc/my.cnf”中，如下所示：

```
[client]
#password   = your_password
port        = 3306
socket      = /opt/lampp/var/mysql/mysql.sock 
```

现在您可以通过在终端上使用 mysql 命令提供此套接字路径参数来进行连接，例如：

```
mysql -u root --socket /opt/lampp/var/mysql/mysql.sock 
```

并且无需任何配置即可完成。

如果您不想每次都输入套接字路径，请通过“/var/run/mysqld/mysqld.sock”更改 my.cnf 中的默认路径。提供权限并重新启动 mysql 服务器。

编辑：最近我安装了 Ubuntu 20.04 并尝试安装 MySQL 服务器，但我的系统崩溃并且根本无法工作。所以我刚刚完全删除了 MySQL 并安装了 MariaDB。它像魅力一样工作，没有任何问题。

* * *

## 回答 #24

> 赞同：3
> 
> 时间：2019-05-23T04:05:31.150

我有完全相同的问题。苦苦挣扎了一个小时，终于找到了不用重新安装mysql-common、mysql-client、mysql-server的方法来纠正。

首先，转到“/var/run/mysqld”。你会发现mysql.sock 不存在。只需删除整个 mysqld 目录并重新创建它并为其提供必要的权限。

```
# rm -rf /var/run/mysqld && mkdir /var/run/mysqld && chown mysql /var/run/mysqld/ 
```

现在，完全杀死 mysql 进程。即使在关闭服务后，它也可能会在运行“/etc/init.d/mysql status”命令时显示“等待页面清理器”。

要完全关闭服务，请使用

```
# pkill -9 mysqld 
```

一旦进程被杀死，请尝试使用再次启动它

```
# /etc/init.d/mysql start 
```

你会看到它运作良好！而且停止它也没有问题。

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2019-06-21T12:27:44.060

我的解决方案；

Ubuntu 18.04 (WSL)

**/etc/mysql/my.cnf**

```
!includedir /etc/mysql/conf.d/
!includedir /etc/mysql/mysql.conf.d/ 
```

**/etc/mysql/mysql.conf.d/mysqld.cnf**

```
[mysqld]
user            = mysql
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
port            = 3306 
```

我改变了端口。它对我有用。你可以写另一个端口。示例 3355

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2015-02-08T03:17:30.523

更改`host`为`127.0.0.1`对我有用。

编辑文件`/etc/mysql/my.cnf`并将下面提到的行添加到该部分：`client`

```
[client]
port  = 3306
host  = 127.0.0.1
socket  = /var/lib/mysql/mysql.sock 
```

在你完成它之后。执行以下命令。

```
sudo service mysql start 
```

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2017-07-25T17:33:26.767

我在 Ubuntu 16.04 [https://askubuntu.com/questions/172514/how-do-i-uninstall-mysql中卸载了 mysql](https://askubuntu.com/questions/172514/how-do-i-uninstall-mysql)

我重新安装了 mysql [https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-ubuntu-16-04](https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-ubuntu-16-04)

这似乎奏效了。

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2019-02-14T11:56:49.220

首先创建目录 /var/run/mysqld

用命令：

```
mkdir -p /var/run/mysqld 
```

然后将 rigths 添加到目录

```
chown mysql:mysql /var/run/mysqld 
```

经过这次尝试

```
mysql -u root 
```

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2021-07-12T17:04:48.340

您必须安装 mysql-server

```
apt install mysql-server 
```

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2015-07-23T08:35:56.600

我还会检查mysql配置。我在自己的服务器上遇到了这个问题，但我有点太仓促并且错误地为我的机器配置了 innodb_buffer_pool_size。

innodb_buffer_pool_size = 4096M

它通常可以运行到 2048 年，但我想我没有足够的内存来支持 4 个演出。

我想这也可能发生在其他 mysql 配置设置中。

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2017-03-13T20:26:23.707

我在 CentOS VPS 上遇到了类似的问题。如果 MySQL 在启动后无法启动或一直崩溃，请尝试以下步骤：

1）找到my.cnf文件（我的位于/etc/my.cnf）并添加以下行：

innodb_force_recovery = X

用 1 到 6 的数字替换 X，从 1 开始，如果 MySQL 无法启动，则递增。设置为 4、5 或 6 可以删除您的数据，因此请注意并阅读[http://dev.mysql.com/doc/refman/5.7/en/forcing-innodb-recovery.html](http://dev.mysql.com/doc/refman/5.7/en/forcing-innodb-recovery.html)。

2) 重启 MySQL 服务。只有 SELECT 会运行，此时这是正常的。

3) 使用 mysqldump 逐一转储所有数据库/模式，不要压缩转储，因为无论如何您都必须在以后解压缩它们。

4) 仅移动（或删除！）/var/lib/mysql 中的 bd 目录，保留根目录中的各个文件。

5) 停止 MySQL，然后取消注释 1) 中添加的行。启动 MySQL。

6) 恢复所有在 3) 中倾倒的 bd。

祝你好运！

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2018-08-28T03:06:31.653

在终端提示符下尝试以下操作：

```
sudo mysql 
```

一旦允许您进入，您就可以创建一个新用户并授予他们需要访问的特定数据库的所需权限。

Mysql 5.7 改变了一些东西，默认情况下使用 auth_socket 插件（而不是 mysql_native_password）作为 root 来保护帐户免受黑客攻击。您可以通过为 root 设置插件字段来覆盖它，但除非您有充分的理由，否则您可能不应该绕过保护。尤其是当`sudo mysql`比`mysql -u root -p`无论如何更容易的时候。

[我从Raspberry Pi](https://www.raspberrypi.org/forums/viewtopic.php?t=202108)帮助网站找到了这个信息——所有地方。在 Lubuntu 18.04 惹恼了我几个小时之后，它就像一个魅力。

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2019-05-20T15:13:29.197

有时只是你的服务器没有足够的空间，只需要释放一些空间（比如清除日志文件），然后启动mysql：

`/etc/init.d/mysql start`

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2020-06-04T02:52:51.467

我的情况是/etc/目录下的mysql改名为mysql_bk，复制mysql_bk就好了

```
sudo cp -r /etc/mysql_bk/ /etc/mysql/ 
```

然后

```
service mysql restart 
```

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2021-10-21T08:40:58.753

我有同样的问题。删除并重新安装mysql后，确实发生了这个问题。

**注意**：您的**数据**将被**删除**！不幸的是，当 mysql 损坏时，我没有找到备份 mysql 文件的方法（如果您知道这样做的方法，请在评论中注明）。
如果您在 mysql 中的数据对您无关紧要（就像我尝试在新安装的操作系统中安装 mysql 时一样），请使用此方法。

## 问题：

是什么导致了问题？首先，我曾经`apt remove`重新安装 mysql，但这项工作在 mysql 中导致错误：

> 无法通过套接字连接到本地 MySQL 服务器 '/var/run/mysqld/mysqld.sock' (2)' -- 缺少 /var/run/mysqld/mysqld.sock

## 使固定：

然后我使用命令`purge`重新安装mysql并且它工作：

1.  `sudo apt purge mysql*`（这将清除您的所有数据！）；
2.  `sudo apt autoremove`
3.  `sudo apt install mysql-server`（添加您需要的应​​用程序！）

完成这些步骤后，只需运行`sudo mysql -u root`.

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2014-02-11T09:54:37.300

错误：`Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)`

有时是由于 mysql 服务器出现故障，在实时服务器中我认为您应该重新启动服务器，并且在 localhost 中您需要重新启动 mysql 服务器。

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2015-06-16T18:16:06.350

我在 Ubuntu 的虚拟机上运行我的 MySQL，所以当我重新启动主机和虚拟机时，IP 发生了变化。我已将 mysql 配置为在 IP 192.168.0.5 上运行，现在由于 IP 的动态分配，我的新 IP 为 192.168.0.8

如果您有同样的问题，只需使用命令检查您的 ip `ifconfig`。

使用命令检查您的 MySQL 绑定`cat /etc/mysql/my.cnf | grep bind-address`

如果两个IP相同，则重新安装您的mysql服务器

如果没有，请`/etc/network/interfaces`使用 nano、vi、vim 或任何您喜欢的方式更改您的 IP。

我更喜欢`sudo nano /etc/network/interfaces`

并输入以下内容

```
auto eth0
iface eth0 inet static
address 192.168.0.5
netmask 255.255.255.0 
```

保存接口文件，重新启动您的接口`sudo ifdown eth0`&&`sudo ifup eth0`用您的网络接口替换“eth0”

重新启动 MySQL `sudo service mysql stop`，然后`sudo service mysql start`

如果你和我有同样的问题，你很高兴！

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2015-06-16T22:10:09.747

此解决方案可以帮助其他人，有时修复非常简单。

在您的实时环境中重新启动 mysql 服务器和 apache

```
sudo service mysql restart
sudo apache services restart 
```

这是安装插件或执行任何数据库命令时的常见问题。

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2016-03-08T15:18:19.820

在archlinux上我遇到了这个错误，问题是`mysqld`-service没有运行。

但是我无法`systemctl start mysqld`按照 Archlinux 文档中的说明启用 mysql-service。我认为错误类似于

> 未找到 mysqld.service

我首先需要重新启动系统。

然后我再次输入命令（并输入`systemctl enable mysqld`），现在`mysql`能够找到创建的`mysql.sock`.

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2016-03-27T13:30:22.627

当我在 digitalocean 上调整液滴的大小时，我遇到了这种类型的问题。我已经升级了 mysql 版本并为我工作。这是我应用的教程 - [https://serverpilot.io/community/articles/how-to-upgrade-mysql-5.5-to-5.6-on-ubuntu-14.04.html](https://serverpilot.io/community/articles/how-to-upgrade-mysql-5.5-to-5.6-on-ubuntu-14.04.html)

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2016-05-23T15:39:42.333

我尝试了几乎所有列出的解决方案，但没有一个对我有用，直到我重新启动机器，然后当我发出命令“service mysql restart”时 mysql 服务器重新启动。

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2016-08-23T18:51:11.933

在我的情况下，问题是 /etc/mysql/my.cnf 中的绑定地址，然后：

纳米 /etc/mysql/my.cnf

搜索绑定地址并删除带有主机 ip 的特定地址（不是 127.0.0.1）

* * *

## 回答 #43

> 赞同：0
> 
> 时间：2017-03-26T21:09:06.583

mysql.sock 文件在 MariaDB 启动时创建，在 MariaDB 关闭时删除。如果 MariaDB 没有运行，它就不会存在。也许你没有安装 MariaDB。[您可以按照以下说明进行操作： https](https://www.linode.com/docs/databases/mariadb/how-to-install-mariadb-on-centos-7) ://www.linode.com/docs/databases/mariadb/how-to-install-mariadb-on-centos-7 最佳

* * *

## 回答 #44

> 赞同：0
> 
> 时间：2021-03-13T03:14:59.450

只是与你们分享，我遇到了同样的问题并使用以下命令解决了

> sudo ln -s /var/lib/mysql/mysql.sock /var/run/mysqld/mysqld.sock

我从 my.cnf 和错误中硬链接两个位置

我从 [此处输入链接描述中得到了这个答案](https://stackoverflow.com/questions/39392648/ubuntu-cant-connect-to-local-mysql-server-through-socket-var-run-mysqld-mysq)

* * *

## 回答 #45

> 赞同：0
> 
> 时间：2021-06-21T14:37:06.327

对于那些通过[Vitess](https://vitess.io/)使用 MySql 的人。

由于传递给它的语法错误（忘记添加到 SQL 命令的末尾），我在*vtttablet*组件收到此错误，如入门[文档中的](https://vitess.io/docs/get-started/operator/)[示例所示](https://github.com/vitessio/vitess/blob/main/examples/helm/101_initial_cluster.yaml)：`;``init_db.sql`

```
apiVersion: v1
kind: Secret
metadata:
  name: my-cluster-config
type: Opaque
stringData:
  users.json: |
    {
      "user": [{
        "UserData": "user",
        "Password": "pass"
      }]
    }
  init_db.sql: |
    # This file is executed immediately after mysql_install_db,
    # to initialize a fresh data directory.
    CREATE DATABASE IF NOT EXISTS my_db <--- No ';' at the end 
```

完整的错误日志：

> TabletManager.ReplicationStatus()（在 zone1from 上）错误：net.Dial(/vt/socket/mysql.sock) 到本地服务器失败：拨打 unix /vt/socket/mysql.sock：连接：没有这样的文件或目录（errno 2002 )

* * *

## 回答 #46

> 赞同：0
> 
> 时间：2022-01-03T23:10:45.453

唯一对我有用的是从我的系统中**完全卸载 MYSQL。**所以我做了以下事情：

```
sudo apt-get remove mysql-server -y
sudo rm -r /var/lib/mysql
sudo rm -r /etc/mysql
sudo apt-get remove mysql-client -y
sudo apt-get remove mysql-common -y
sudo apt-get remove phpmyadmin -y
sudo apt-get install mysql-server -y 
```

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2022-01-06T17:21:26.923

如果你有“Unit mysql.service not found”错误，你应该安装“sudo apt-get install mysql-server”

* * *

## 回答 #48

> 赞同：-1
> 
> 时间：2013-09-15T03:25:59.540

在 /etc/mysql/my.cnf 下找到带有 mysql 配置的 my.cnf 文件（相应地更改它显示套接字的位置）

```
port            = 3306
socket          = /tmp/mysql.sock 
```

这是一些特定程序的条目以下值假设您至少有 32M 内存

这被正式称为 [safe_mysqld]。这两个版本目前都已解析。

```
[mysqld_safe]
socket          = /tmp/mysql.sock
nice            = 0 
```

* * *

## 回答 #49

> 赞同：-1
> 
> 时间：2016-07-19T07:03:25.443

在我认识的lampp中，它不能识别mysql命令。尝试

```
sudo /opt/lampp/bin/mysql 
```

它将打开 mysql 终端，您可以在其中与数据库进行通信..****

# mule - Mule 3.3.0 - 动态端点发生异常 - 流 - 入站 Ajax ---> 出站 Http 端点 - > 文件出站

> ID：11990709
> 
> 赞同：2
> 
> 时间：2012-08-16T15:34:17.927
> 
> 标签：mule

我想在我的 mule 应用程序中模拟 Google 自动完成功能。我正在使用 ajax 入站端点来捕获在浏览器中输入的文本（rpc 调用），流程中的下一步是调用 google 公开的 URL。 [http://clients5.google.com/complete/search?client=ie8&q=##variable##](http://clients5.google.com/complete/search?client=ie8&q=##variable##) 为了达到同样的效果，我使用了动态 HTTP 出站端点。为了清楚起见，我最后添加了文件出站端点，以便查看来自 HTTP 端点的完整响应。

```
<ajax:connector name="AjaxConnectorForSpelling" serverUrl="http://localhost:8081/Ajax" resourceBase="src/main/app/docroot" jsonCommented="false" doc:name="AjaxConnectorForSpelling"/>  

<http:connector name="HTTP_HTTPS" cookieSpec="netscape" validateConnections="true" sendBufferSize="0" receiveBufferSize="0" receiveBacklog="0" clientSoTimeout="10000" serverSoTimeout="10000" socketSoLinger="0" proxyHostname="bci****" proxyPort="8080" doc:name="HTTP\HTTPS"/>  

<http:endpoint exchange-pattern="request-response" method="GET" name="httpgoogle" address="http://clients5.google.com/complete/search?client=ie8&amp;q=#[header:INVOCATION:q]" connector-ref="HTTP_HTTPS" doc:name="HTTP"/>  

<flow name="GoogleAutoComplete" doc:name="GoogleAutoComplete">
    <ajax:inbound-endpoint channel="/services/echo" responseTimeout="10000" connector-ref="AjaxConnectorForSpelling" doc:name="Ajax Channel"/>       
    <message-properties-transformer doc:name="Message Properties" scope="invocation">
        <add-message-property key="q" value="#[payload.get('q')]"/>
    </message-properties-transformer>
    <http:outbound-endpoint ref="httpgoogle" responseTransformer-refs="xml_to_json" doc:name="HTTP"/>   

    <file:outbound-endpoint path="C:\Documents and Settings\I300543\Desktop\proxyfiles\xslt" responseTimeout="10000" doc:name="File"/>

</flow> 
```

我从 google 获得了 xml 的响应，并将其转换为 JSON，并且文件端点能够将其写入文件系统。但是我的 ajax 连接器失败了（如果我将出站 HTTP 端点设为静态，那么上述配置一切正常 - 但这每次都会给我相同的搜索结果）所以没有响应返回到浏览器。

我得到了这个例外。

```
Caused by: org.mule.api.MessagingException: Endpoint scheme must be compatible with the connector scheme. Connector is: "ajax", endpoint is "http://clients5.google.com/complete/search?client=ie8&q=ask" (java.lang.IllegalArgumentException). Message payload is of type: String
at org.mule.endpoint.AbstractEndpointBuilder.doBuildOutboundEndpoint(AbstractEndpointBuilder.java:254)
at org.mule.endpoint.AbstractEndpointBuilder.buildOutboundEndpoint(AbstractEndpointBuilder.java:122)
at org.mule.endpoint.DefaultEndpointFactory.getOutboundEndpoint(DefaultEndpointFactory.java:89)
at org.mule.transport.ajax.AjaxReplyToHandler.processReplyTo(AjaxReplyToHandler.java:66)
at org.mule.routing.requestreply.AbstractReplyToPropertyRequestReplyReplier.processReplyTo(AbstractReplyToPropertyRequestReplyReplier.java:69) 
```

所以我有点困惑为什么 ajax 连接器正在获取 Http 方案的引用（仅在动态端点的情况下）。我最近才开始研究 Mule，所以我不确定我是否正确配置了一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:14:17.400

您是否尝试过（作为实验）：

```
<ajax:connector name="AjaxConnectorForSpelling" ... disableReplyTo="true" /> 
```

这应该使文件能够被写入，但没有任何内容返回浏览器。您还可以尝试使用 ajax:outbound-endpoint 将响应路由回单独的 AJAX Bayeux 通道。

这可能与 3.2.1 中修复的 MULE-5783 有关。

# windows - 用于在同一项目上使用 Windows 和 Linux 的 eclipse 字符集

> ID：11990711
> 
> 赞同：7
> 
> 时间：2012-08-16T15:34:19.693
> 
> 标签：windows, linux, eclipse, utf-8, character-encoding

如果你参加一个项目，其他开发人员在使用 Windows Eclipse 安装 (cp1250) 上的默认设置之前工作......你可以做些什么来明确你的 linux 安装 Eclipse？

甚至，如果您仍然在 Linux 上工作，而其他开发人员在 Windows 上工作，并且不想更改那里的设置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T15:34:19.693

我建议在 UTF-8 而不是 cp1250 上默认设置 eclipse Charsetting。

这里的解决方案：

1.  为所有 cp1250 编码的项目创建单独的工作区
2.  转到 Window > Pereferences > General > Workspace 在下拉框中键入 cp1250（*如果不在列表中，您必须**键入**它！！*）
3.  也许，如果这是一个问题，请选择“行分隔符”Windows（对我来说，默认设置始终有效，所以我不需要更改它！）

这是它的截图： ![配置看起来像这样](../Images/baf63ed771dcbb33fa876235d2956c68.png)

保存它，你就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:30:43.693

在我看来，将默认文本文件编码从 Windows 上的 Cp1252 全局更改为 utf-8 时可能会有很大的“麻烦”，因为它在从 eclipse 执行程序时也会更改系统属性 file.encoding。我最近遇到了这样一种情况，即基于 eclipse 的产品由于非默认文件编码而在导出时无法以相同的方式工作。

但是，如果您热衷于，您可以更改 eclipse.ini 文件并添加 -vmargs -Dfile.encoding=utf-8 以使用另一种编码运行您的 eclipse 实例。

请注意，该 vm 参数存在一些未解决的错误，例如在 Solaris 上它会被忽略。

# web-config - 为子文件夹中的文件类型注册 HttpHandler

> ID：11990714
> 
> 赞同：1
> 
> 时间：2012-08-16T15:34:26.643
> 
> 标签：web-config, httphandler

我正在运行 ASP.net Web Forms 网站（IIS 7.5），我想为文件夹及其子文件夹中的特定文件类型注册一个特定的 HTTP 处理程序。例如，我希望 /Downloads 或 /Library 中对 PDF 文档的所有请求都由我的自定义处理程序处理。

我在 Web.config 中尝试了以下条目...

```
<handlers>
   <add name="DownloadManager_Downloads" verb ="GET" path="/Downloads/*.pdf" type="DownloadManager, XXX" />
   <add name="DownloadManager_Library" verb ="GET" path="/Library/*.pdf" type="DownloadManager, XXX" />
</handlers> 
```

但是，虽然这处理 /Downloads/Test.pdf 它不处理 /Downloads/Latest/Test.pdf

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:26:29.707

最后，我将原始处理程序重构为 HttpModule。这让我可以完全控制应该/不应该调用该机制的位置。

# html - 在 Play 2.0 routes.conf 中处理 hashmark

> ID：11990716
> 
> 赞同：1
> 
> 时间：2012-08-16T15:34:36.967
> 
> 标签：html, playframework, uri

我必须管理这种 URL：

```
http://localhost:9000/oauth2callback#state=/&access_token=ya29..... 
```

我的 Play 2.0 的 routes.conf 看起来像这样：

```
GET     /oauth2callback             controllers.Application.testGoogleCallback(access_token: Option[String]) 
```

不幸的是，看起来 URL 的**#state=/**部分使**testGoogleCallback操作的****access_token**参数未填写（但规则匹配并且该操作被正确调用）。

 **以下 URL 按方面工作，并且我在操作中正确获取了**access_token**参数。

```
http://localhost:9000/oauth2callback?access_token=ya29..... 
```

关于如何指定片段标识符是 routes.conf 文件中 URL 的一部分的任何想法？

提前谢谢

反相

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:38:28.863

哈希标记被浏览器解释为本地锚点，不会发送到服务器。这不是特定于 playframework 的问题，而是 URI 规范的一部分。

是否有任何特定原因需要它作为主题标记？您的有效 URL 是有效的 HTML 语法，这是我希望看到的！？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-23T06:34:28.080

[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986)`#`在哈希标记*片段标识符*之后命名 URI 部分，然后说：

> 因此，片段标识符不用于 URI 的特定于方案的处理；相反，片段标识符在解引用之前与 URI 的其余部分分开，**因此片段本身的标识信息仅由用户代理解引用**，而与 URI 方案无关。

这意味着片段标识符由浏览器处理，甚至不会发送到服务器。**

# objective-c - 旁白打开时导致 tableView 崩溃

> ID：11990718
> 
> 赞同：0
> 
> 时间：2012-08-16T15:34:46.597
> 
> 标签：objective-c, ios

我在 iOS 项目中使用 UItableView，它工作正常，但是当我打开语音时它崩溃了，似乎这段代码返回了一个空单元格。你看到我的代码有什么问题吗：

```
-(UITableViewCell*) cellForIndexPath:(NSIndexPath*) indexPath inTableView:(UITableView*) tableView {
    static NSString *CellIdentifier = @"TocCellView";
    UITableViewCell* cell =(UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        // Use apple technic explained here : http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html

        [[NSBundle mainBundle] loadNibNamed:@"TocCellView" owner:self options:nil];

        cell = self.tableViewCell;
        cell.layer.masksToBounds = YES;
    }

    if ([GraphicHelper isiPad]) {
        [self fillIPadCell:cell withBookPage:[self pageCorrespondingToIndex:indexPath] section:indexPath.section];
    }
    else {
        BOOL isEvenCell = (indexPath.row%2);
        BOOL isEvenHeader = (indexPath.section%2);
        [self fillIPhoneCell:cell withBookPage:[self pageCorrespondingToIndex:indexPath] forEvenCell:isEvenCell inEvenHeader:isEvenHeader];        
    }
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:49:06.303

您需要在此行上放置一个断点：

```
cell.layer.masksToBounds = YES; 
```

如果单元格为空，则可能意味着您的 NIB 无法加载，并且可能与 NIB 的错误名称一样简单，或者您未能在 Interface Builder 中建立正确的连接。

# python - 将 iMacros 脚本集成到 python 中

> ID：11990723
> 
> 赞同：2
> 
> 时间：2012-08-16T15:35:16.423
> 
> 标签：python, tkinter, imacros

我正在尝试使用 GUI 编写 Python 脚本，当我按下按钮时，它将执行 iMacros 脚本。字面意思就是这样，经过大量的谷歌搜索和搜索，我找不到它。我不需要 gui 或任何东西的帮助，只是如何让 iMacros 在 python 函数内/因为 python 函数运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T16:28:23.077

```
import os
os.system('"C:\Program Files\iOpus\iMacros\iMacros.exe" -macro my_macro.iim') 
```

[http://wiki.imacros.net/Example-Batchfile.bat](http://wiki.imacros.net/Example-Batchfile.bat)

or

```
import win32com.client
def Hello():
 import win32com.client
 w=win32com.client.Dispatch("imacros")
 w.iimInit("", 1)
 w.iimPlay("Demo\\FillForm")
if __name__=='__main__':
 Hello() 
```

[http://wiki.imacros.net/Python](http://wiki.imacros.net/Python)

see also: [http://wiki.imacros.net/Sample_Code](http://wiki.imacros.net/Sample_Code)

The rub is that these methods will require the business or enterprise editions of imacros
( [http://www.iopus.com/imacros/compare/](http://www.iopus.com/imacros/compare/))

You can alternatly use Autoit ( [http://www.autoitscript.com/site/autoit/](http://www.autoitscript.com/site/autoit/)) to script opening of web browser and selecting a (imacro)script and running it by clicking play and you can use autoits python bindings even on the free version :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-18T18:45:34.257

我想出了如何使用python在chrome中做到这一点。

见：[https ://imgur.com/a/iJOe0](https://imgur.com/a/iJOe0)

实际参考在这里：[https](https://wiki.imacros.net/iMacros_for_Chrome) ://wiki.imacros.net/iMacros_for_Chrome（在命令行支持下）

遵循这些说明后，只需在 python 中执行此操作：

```
import os
macro =r"C:\your\full\file\directory\and\file\name.html"
os.startfile(macro)
```

# android - Android 切换按钮 - 绿转红

> ID：11990724
> 
> 赞同：-1
> 
> 时间：2012-08-16T15:35:26.423
> 
> 标签：android, android-button

如何制作一个按钮，按下时变为绿色，然后再次变为红色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:38:12.757

```
@Override
    public boolean onTouch(final View view, MotionEvent event) {

    final int action = event.getAction();

        if(view.getId()==R.id.yourButton){
            if(action == MotionEvent.ACTION_DOWN)
                  yourButton.setBackgroundResource(R.drawable.ic_button_green);
            if(action == MotionEvent.ACTION_UP)
                  yourButton.setBackgroundResource(R.drawable.ic_button_red);
        }

 } 
```

# jquery - jquery，找不到孩子

> ID：11990725
> 
> 赞同：1
> 
> 时间：2012-08-16T15:35:26.820
> 
> 标签：jquery, debugging, children

发生了一些事情，所以当我尝试查找元素 children 时，我返回了一个空数组。我的第一个想法是我没有结束标签，但似乎一切都很好。所以我从 div 中删除了所有内容，除了一个简单的元素。当我记录这个时：

```
$(this.el) 
```

我明白了：

```
[<div class=​"sticker" id=​"sticker-id-15">​]
    <div class=​"hello">​&lt;/div>​
</div>​ 
```

但是，如果我记录这个：

```
$(this.el).children(); 
```

我返回一个空数组。

还有其他的调试想法应该浮现在脑海中吗？我在画一个空白...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:38:48.113

不应该

```
 $('#sticker-id-15').children().each(function(){
//code for each child
}); 
```

或者

```
 $('#sticker-id-15').children(); 
```

工作小提琴：http: [//jsfiddle.net/XuZBt/23/](http://jsfiddle.net/XuZBt/23/)

# objective-c - 在 iOS 应用上保存数据的最有效方式

> ID：11990731
> 
> 赞同：1
> 
> 时间：2012-08-16T15:35:39.043
> 
> 标签：objective-c, ios, database, cocoa-touch, data-storage

我正在创建一个包含多个 UITableViewControllers 的应用程序。到目前为止，我已经让它们都连接到我的不同 JSONGetStuff.php 文件，然后使用 JSON 编码从我的数据库中获取数据。这很好用。大多数表格都有包含文本和图像的单元格。现在我有四个包含不同数据的 tableView，我想保存数据而不是每次都加载它。现在我让应用访问 ViewDidLoad 上的 JSON.php 文件，并将数据存储在 NSArray 中，然后通过 NSDictionary 解析得到 ObjectForKey:@""; 此数据是来自 SQL 服务器的普通表，例如“名称”“地址”“图像名称”等。

我已经意识到我不会太频繁地更新数据库，很可能一个月一到两次，甚至可能更少。所以我决定将信息存储在安装的应用程序中。不是每次更改数据库时都必须发布更新，而是保存直到更新。

我想我的应用程序中应该有一个名为“Version”的整数，即 = 1; 发布时。然后，当应用程序启动时，我想让应用程序转到 www.mywebsite.com/version.php，并检查回显的变量是否与“版本”相同。每当我更改我的数据库时，我都可以更改这个整数 ++。当应用程序启动并检查版本时，它在本地是错误的，然后我希望它下载整个负载，并覆盖当前存储在 iPhone 上的数据。

我不知道从哪里开始。我使用 JSON 是因为直接连接到数据库不好，但由于我的数据是数据库数据，我可以创建一个本地数据库并使用该信息而不是数组吗？我在某处读到 .plist 可能更适合字符串，而我的整个数据库只是字符串（varchar x）。

我在哪里保存初始数据？如何使用 ie JSON 解析我的数据库数据？时机成熟时如何覆盖该数据？我从哪里开始？我应该阅读 .plist、NSData、NSCoding 还是 NSFileManager？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T15:40:19.277

尝试考虑将数据持久保存在核心数据数据库中。核心数据是处理数据库的持久框架。核心数据为你处理了很多东西（关系、内存等），并且与表（使用 NSFetchedResultsController）配合得很好。

[http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)

当然，这完全取决于数据量，但您可以开始查看链接的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:17:47.533

如果数据简单，您可以使用`NSCache`或`NSUserDefaults`快速有效地存储数据。

# html - div中的表格未在Opera中显示

> ID：11990737
> 
> 赞同：1
> 
> 时间：2012-08-16T15:35:54.423
> 
> 标签：html, css, html-table, opera

我已经“继承”了一个网站，并且我正在维护它。然而，最近我注意到，虽然该站点在大多数主要浏览器（FF；IE 7、8、9；Chrome）中的行为都合理，但在 Opera 中却完全错误。

经过一番调查，我发现问题是`<table>`Opera 中的 s 没有显示，特别是它们的计算样式包含：`display: none;`. 这让我感到奇怪，因为我已经明确地包含在这个元素的样式中，这`display: table;`也是默认的，并且在链接的样式表中，我看不到任何`display: none;`可能导致表格不显示的地方。

所有其他提到的浏览器都有元素`display: table;`的计算样式`<table>`，即使它在样式表中没有明确显示。

下面提供了一个示例。在 Ubuntu 11.10 和 12.04 64 位下测试。已经确认在 Windows 下效果是一样的（FF、Chrome 和 IE 显示表格；Opera 不显示）。

在使用和不使用 HTTP 服务器（`http://localhost/test1.html`和`file:///var/www/test1.html`）的情况下进行了测试，两种浏览器都没有区别。

我毫不怀疑问题就在我这边，但我没有想法，任何帮助都将不胜感激。如果这是一个微不足道的问题或我（或原始开发人员）对 HTML 或 CSS 的误解，我深表歉意，我主要是一名 PHP 程序员。

我所经历的行为的最短示例是这样的：

`test1.html`

```
<html>
 <head>
  <title>Test</title>
  <link rel="stylesheet" type="text/css" href="test.css" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
 </head>
 <body>
  <div class="menuItem">
   <table class="menuItem"><tr bgcolor="black"><td>ASD</td></tr>
   </table>
  </div>
 </body>
</html> 
```

* * *

`test.css`

```
.menuItem {
    content:"";
    border: 2px green;
    width: inherit;
    height: 50px;
    background-color: green;
}
table.menuItem {
    content:"";
    margin-left: auto;
    margin-right: auto;
    vertical-align: middle;
    height: 50px;
    text-align: center;
    display: table;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:45:54.253

我自己试过了，如果你`content: ""`从两个样式声明中删除，一切正常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T15:50:42.260

看来 Opera 决定不遵循[CSS Level 2 的规范，该规范声明内容仅适用于伪选择`:before`器`:after`](http://www.w3.org/TR/CSS2/generate.html#content)

从这两种风格的声明中删除`content:"";`Opera 修复了这个问题。

PS IE7 遵守标准，而歌剧不遵守，我们生活的疯狂时代

# sql-server-2008 - 暴力登录攻击后超时过期

> ID：11990739
> 
> 赞同：1
> 
> 时间：2012-08-16T15:35:57.867
> 
> 标签：sql-server-2008, timeout

今天早上，我导航到我的网站，发现它在任何存储过程后都崩溃了：

```
Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. 
```

我在事件查看器中注意到有人试图使用“sa”进行暴力登录攻击，所以我禁用了远程访问。

Appart from that,我不知道发生了什么。现在，无法处理任何 ASP.Net 页面，因为 SQL Server 2008 请求不起作用并且在尝试执行存储过程时总是返回 Timeout。

可能是什么原因，我应该检查和修复什么？

[编辑 3]

通过将连接字符串中的 IP 更改为 127.0.0.1 来解决。在我阻止然后解除阻止从外部 IP 访问 SQL 端口之后，一个不起眼的防火墙设置仍在阻止外部 IP。

[编辑 2]

我直接在 SQL 中进行了查询，显示的消息是：

```
A transport-level error has occurred when sending the request to the server. 
```

[编辑]

类似的线程中列出了三种可能性：

1 - 某处出现了僵局。

没有为什么：

*   所有存储过程现在都回答此错误
*   攻击后没有更改任何代码或程序。

2 - 数据库的统计信息和/或查询计划缓存不正确

我输入了 DBCC FREEPROCCACHE，它成功地删除了缓存，没有错误。

我输入了 exec sp_updatestats，缓存重置没有改变任何东西。

3 - 查询太复杂，需要调优

与 1 相同。存储过程非常简单/基本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:47:24.847

这个问题的其他答案（我的意思是“在其他线程中”，而不是“这里”）也应该关注基本问题：

**此错误还可能意味着无法使用当前连接字符串与 SQL Server 进行通信**。很基础。

就我而言，我的 Windows 防火墙没有（像往常一样）反映它的实际行为。当受到蛮力攻击时，我阻止了对防火墙中 SQL 端口的访问并重新启动（它没有改变任何东西）。然后过了一会儿，即使我删除了这条规则，SQL似乎开始拒绝访问来自局域网IP的任何IP地址。但我不再考虑防火墙中的这条规则了。无论如何，我想阻止外部访问，然后发现有一个“案例”可以签入 SQL 管理器来执行此操作。

我所做的是**在连接字符串中将我的公共 IP 地址更改为 127.0.0.1**。

# .net - 使用 .NET 的 Photobucket 替代标识符规范时如何生成签名？

> ID：11990744
> 
> 赞同：1
> 
> 时间：2012-08-16T15:36:09.013
> 
> 标签：.net, api, photobucket

Photobucket API 提供了一种称为“替代标识符规范”的东西，以解决 .NET 将基本 URL 中的 %2F 转换为正斜杠这一事实。我已经能够为不使用此“替代标识符规范”的 Photobucket API 调用生成有效签名，但是当我尝试使用“替代标识符规范”生成签名时，我从 API 收到无效签名错误。当然，文档根本没有解决使用“替代标识符规范”时如何生成签名的问题。

任何人都可以帮忙吗？

# php - 中文字符显示不正确

> ID：11990745
> 
> 赞同：3
> 
> 时间：2012-08-16T15:36:12.980
> 
> 标签：php, codeigniter

我在数据库中有 utf8 编码的数据。

数据在本地和远程数据库的**PHPMYADMIN**中正确显示。

我正在使用**codeigniter**和**twitter bootstrap**来显示这个数据。

数据在我的本地 Windows 计算机上正确显示但同样

替换为远程网站上的 ç�¼ç��è��è�± 字符。

我究竟做错了什么 ？

更新：

**从数据中删除htmlentities()**函数时，这些字符会正确显示，但是如果数据包含破坏网页的 html 标签怎么办

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:42:22.617

你有这个在 html 头：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

如果没有添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:24:19.707

确保您的远程服务器发送正确的标头。

```
Content-Type: text/html; charset=utf-8 
```

确保您的文件采用**utf-8**编码。

# java - 如何使 Web Service 报告过载？

> ID：11990748
> 
> 赞同：1
> 
> 时间：2012-08-16T15:36:19.637
> 
> 标签：java, web-services, weblogic

我正在制作一个 Web 服务，它实现了一个接受输入参数并将它们存储在数据库中的函数。（代码用 Java 编写，使用 NetBeans IDE 编写，部署在 WebLogic 服务器上。）像这样：

```
@WebService
class DataSaver {
    void saveData( ...data... ) {
        ...
    }
} 
```

它已经完成并且似乎可以正常工作，所以现在我担心安全性：

如果有太多的客户端同时连接（或者有人会在我的站点上进行拒绝服务攻击），那么服务器将无法正确处理所有请求，会发生什么情况？

1）如果服务器/应用程序*不崩溃*，我会更喜欢。有什么机制可以在过载的情况下发送请求？它们是否默认启用？如果没有，我该如何打开它们？

2) 由于 Web 服务函数不返回值（如果可能的话，我更愿意保留它的代码，如果可能的话），客户端只能通过 HTTP 错误代码来*区分已处理和未处理的请求。*因此，我希望解决方案在过载的情况下返回 HTTP 错误代码。

我对 Web 服务和性能调整不是很熟悉（我更像是一个理论程序员；算法和其他东西），所以我什至不知道要寻找什么。在我看来，用 Java 解决这个问题为时已晚——当消息到达我的代码时，XML 请求已经被解析。我希望服务器配置中的一些参数可以处理这个问题；但我没有成功通过谷歌或阅读 WebLogic 手册找到它。也许我使用了错误的关键字，或者我对如何解决这个问题有一个完全错误的想法......这就是为什么部分答案也可能非常有用的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:48:28.227

如果你想防御 DOS 攻击，那么你可以获取软件/硬件来做到这一点。

如果您想在代码中执行此操作，那么您可以编写自己的 javax.servlet.Filter。您可以简单地记录活动请求并使用 HTTP 502 或您需要的任何内容进行回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:54:47.270

作为一般规则：不要编码，使用。它适用于 DoS 攻击预防，维基百科有一个很好的[预防和响应清单](http://en.wikipedia.org/wiki/Denial-of-service_attack#Prevention_and_response)：

*   防火墙配置
*   开关配置
*   路由器配置
*   应用前端硬件
*   基于 IPS 的预防
*   基于 DDS 的防御系统
*   黑洞和沉洞
*   清洁管道

DoS 预防是一个安全专业人士必须解决的难题（而且你不是你所说的那样）。

如果您独自为少数客户端创建小型 WebService，您甚至不必考虑防止 DoS 攻击，因为您不太可能遇到此类攻击。

如果 DoS 预防对您来说是强制性的并且有充分的理由，那么请询问安全专家，因为您必须考虑以下类型的 DoS 攻击：

*   ICMP 洪水
*   SYN洪水
*   泪珠攻击
*   低速率拒绝服务攻击
*   点对点攻击
*   饥饿攻击中资源利用的不对称性
*   永久拒绝服务攻击
*   应用级洪水
*   核弹
*   RU-已经死了？
*   分布式攻击
*   反射/欺骗攻击
*   无意拒绝服务
*   拒绝服务级别 II

现在，如果您只是希望您的合法用户能够知道服务运行正常还是失败，只需使用 Web 服务器的经典行为：如果太多合法用户碰巧同时连接，那么您的代码将失败一个例外。然后您的 servlet 服务器将响应[503 HTTP 错误代码](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.4)。此代码将告诉您的用户出现问题。

# c++ - 应用程序菜单中显示的错误

> ID：11990749
> 
> 赞同：1
> 
> 时间：2012-08-16T15:36:22.360
> 
> 标签：c++, while-loop, switch-statement

当我使用`while`循环和`switch`语句时，我的 main 中出现了一些错误。我检查了花括号，我找不到错字。任何人都可以看到问题吗？

```
bool menu = true;
    while(menu)// Loop to revert back to menu when choice is not compatable with options.
    {
    int selection;
    cout<< "Choice: ";
    cin>> selection;

        switch(selection)
        {
        case 1:
            cout<< "View Elements.";
            Array.print();
            break;
        case 2:
            cout<< "Delete Element. ";
            break;
        case 3:
            cout<< "Delete All Elements. ";
            //Array.clear(OrderedArray);
            break;
        case 4:
            cout<< "Insert Element. ";
            //Array.Insert();
            break;
        case 5:
            cout<< "Search for Element. ";
            bool searchMenu = true;
            while(searchMenu)
            {
            int searchSelection;
            cout<< "Choice: ";
            cin>> searchSelection;

            switch(searchSelection)
            {
                case 1:
                cout<< "Linear Search. ";
                //Array.linearSearch();
                    break;

                case 2:
                cout<< "Binary Search ";
                //Array.binarySearch();
                    break;
            }

            }
            break;
        case 6:
            cout<< "Store. ";
            bool storeMenu = true;
            while(storeMenu)
            {
            int storeSelection;
            cout<< "Choice: ";
            cin>> storeSelection;

            switch(storeSelection)
            {
                case 1:
                cout<< "Write File ";
                //Array.writeFile();
                    break;

                case 2:
                cout<< "Read File ";
                //Array.readFile();
                    break;
            }
            }
            break;
        case 7:
            cout<< "Sort. ";
            Array.sort();
            break;
        case 8:
            cout << "Exit.";
            cout << "Please press Enter to exit.";

        }
    } 
```

这些是错误：

```
error C2360: initialization of 'searchMenu' is skipped by 'case' label  c:\users\conor\documents\college\c++\projects\repeat - ordered array\repeat - ordered array\orderedarray.cpp    71  1   Repeat - Ordered Array

error C2360: initialization of 'storeMenu' is skipped by 'case' label   c:\users\conor\documents\college\c++\projects\repeat - ordered array\repeat - ordered array\orderedarray.cpp    94  1   Repeat - Ordered Array

error C2360: initialization of 'searchMenu' is skipped by 'case' label  c:\users\conor\documents\college\c++\projects\repeat - ordered array\repeat - ordered array\orderedarray.cpp    94  1   Repeat - Ordered Array

error C2360: initialization of 'storeMenu' is skipped by 'case' label   c:\users\conor\documents\college\c++\projects\repeat - ordered array\repeat - ordered array\orderedarray.cpp    98  1   Repeat - Ordered Array

error C2360: initialization of 'searchMenu' is skipped by 'case' label  c:\users\conor\documents\college\c++\projects\repeat - ordered array\repeat - ordered array\orderedarray.cpp    98  1   Repeat - Ordered Array` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T15:40:16.530

一旦 case 语句的代码超过两三行，就应该将其转换为单独的函数。尤其是这些嵌套菜单。其他答案是正确的，编译器抱怨在 case 语句中定义变量；代码审查者会抱怨 switch 语句太复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T15:37:55.013

您必须将变量定义包装`{ }`在 switch 语句内的新块 ( ) 中，即

```
switch (var) {
case X: {
    bool var = here;
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T15:38:21.610

`case`除非为它们创建本地范围，否则不能在块内创建初始化变量：

```
switch(Foo)
{
    case A:
    int a = 0; <== error
    break;

    case B:
    {
        int b = 0; <== ok
    }
    break;
} 
```

# jsp - IE8：列表框边框在表格中显示额外的灰线

> ID：11990751
> 
> 赞同：1
> 
> 时间：2012-08-16T15:36:27.427
> 
> 标签：jsp, internet-explorer-8

我知道 ListBox 会在 IE8 中呈现一条细灰线，所以我试图通过将它放在一个表格中来解决这个问题。

我将列表框设置为 100% 的高度和宽度，但是当它显示时，它不会占用整个表格单元格。

它只占据整个宽度，但对于高度，它没有完全占据，但在表格底部边框上方有一条细灰线。

我曾使用 F12 检查 ListBox，但找不到问题。

列表框实际上是 icefaces ： ice:selectOneListbox

PS。该表用于呈现带有装箱的列表框的标题。

# asp.net - Ajax 手风琴控件：在窗格中选择链接时自动从当前窗格失去焦点

> ID：11990757
> 
> 赞同：1
> 
> 时间：2012-08-16T15:36:43.083
> 
> 标签：asp.net, ajax, accordion

![在此处输入图像描述](../Images/1e2885a2f3aae49b62932f2e7a570bf3.png)

我不知道这是一个很简单的问题还是很难，但今天我遇到了这个问题。

我可以`Ajax Accordion`控制我的母版页，其中包含三个[带有**Master ST ERP**`Panes`文本的灰色方形区域是内容页]。

 **现在，我的问题是，每当我在**用户详细信息**窗格中选择链接表示为树时，它会自行折叠并自动打开**ST-ERP 模块**窗格。这让我感到沮丧......问题应该是什么朋友......关于SO的同样问题但不能帮助我：[Ajax Accordion Loses Current Pane](https://stackoverflow.com/questions/3574335/ajax-accordion-loses-current-pane)

**这是我的代码片段：**

```
<ajax:Accordion ID="UserAccordion" runat="server" SelectedIndex="0" HeaderCssClass="accordionHeader"
                            HeaderSelectedCssClass="accordionHeaderSelected" ContentCssClass="accordionContent"
                            FadeTransitions="true" SuppressHeaderPostbacks="true" TransitionDuration="250"
                            FramesPerSecond="40" RequireOpenedPane="false" AutoSize="None" 
                            Width="220px">
                            <Panes>
                                <ajax:AccordionPane ID="AccordionPane1"  runat="server">
                                    <Header>
                                        <a href="#" class="href">ST-ERP Modules</a></Header>
                                    <Content>
                                        <asp:Panel ID="UserReg" runat="server">
                                            <asp:TreeView runat="server" ID="treeMainMenu" DataSourceID="SiteMapDataSource1"
                                                NodeIndent="10" Width="150px" OnTreeNodeDataBound="treeMainMenu_TreeNodeDataBound">
                                                <ParentNodeStyle Font-Bold="False"></ParentNodeStyle>
                                                <HoverNodeStyle ForeColor="#447BD4" Font-Underline="True"></HoverNodeStyle>
                                                <SelectedNodeStyle HorizontalPadding="0px" ForeColor="#DD5555" VerticalPadding="0px"
                                                    Font-Bold="True" Font-Underline="True"></SelectedNodeStyle>
                                                <NodeStyle NodeSpacing="0px" HorizontalPadding="0px" ForeColor="#447BD4" VerticalPadding="0px"
                                                    Font-Size="8pt" Font-Names="Verdana"></NodeStyle>
                                            </asp:TreeView>
                                        </asp:Panel>
                                    </Content>
                                </ajax:AccordionPane>
                                <ajax:AccordionPane ID="AccordionPane2" runat="server">
                                    <Header>
                                        <a href="#" class="href">User Detail</a></Header>
                                    <Content>
                                        <asp:Panel ID="Panel1" runat="server">
                                            <asp:TreeView runat="server" ID="TreeView1" DataSourceID="SiteMapDataSource2" NodeIndent="10"
                                                Width="150px">
                                                <ParentNodeStyle Font-Bold="False"></ParentNodeStyle>
                                                <HoverNodeStyle ForeColor="white" Font-Underline="True"></HoverNodeStyle>
                                                <SelectedNodeStyle HorizontalPadding="0px" ForeColor="#DD5555" VerticalPadding="0px"
                                                    Font-Bold="True" Font-Underline="True"></SelectedNodeStyle>
                                                <NodeStyle NodeSpacing="0px" HorizontalPadding="0px" ForeColor="White" VerticalPadding="0px"
                                                    Font-Size="8pt" Font-Names="Verdana"></NodeStyle>
                                            </asp:TreeView>
                                        </asp:Panel>
                                    </Content>
                                </ajax:AccordionPane>
                                <ajax:AccordionPane ID="AccordionPane3" runat="server">
                                    <Header>
                                        <a href="#" class="href">Job Details</a>
                                    </Header>
                                    <Content>
                                        <asp:Panel ID="Panel2" runat="server">
                                            ddddddddddddd</asp:Panel>
                                    </Content>
                                </ajax:AccordionPane>
                            </Panes>
                        </ajax:Accordion> 
```**

# jquery - slickGrid setWidth 中的 jQuery 自动完成建议

> ID：11990760
> 
> 赞同：1
> 
> 时间：2012-08-16T15:36:49.667
> 
> 标签：jquery, jquery-ui-autocomplete, slickgrid

我在 slickGrid 中有一个带有自动完成文本字段的编辑器。这看起来（简化）如下：

```
 function AutoCompleteEditor(args) {
 var $input;

 this.init = function () {
   $input = $("<INPUT id='tags' class='editor-text' />");
   $input.appendTo(args.container);  
   $input.bind("keydown.nav", function (e) {
        if (e.which === $.ui.keyCode.LEFT || e.which === $.ui.keyCode.RIGHT) {
          e.stopImmediatePropagation();
        }
        if((e.which === $.ui.keyCode.DOWN) || (e.which === $.ui.keyCode.UP)){ 
          e.stopImmediatePropagation();
        } 
        if(e.which === $.ui.keyCode.RETURN){ 
          e.stopImmediatePropagation();
        }
      })
   $input.focus().select();

   $input.autocomplete({
    minLength: 2,
    autoFocus: true,
    source: function(request, response) {
              .....
           },
        focus: function( event, ui ) {
          return false;
        },
        select: function( event, ui ) {
          event.target.value = ui.item.label;
          return false;
        },
        open: function( event, ui ) { 
          $(this).autocomplete( "widget" )
            .find( "ui-menu-item-alternate" )
              .removeClass( "ui-menu-item-alternate" )
            .end()
            .find( "li.ui-menu-item:odd a" )
              .addClass( "ui-menu-item-alternate" );  
        },
        appendTo: args.container,   
        width: 500,
    });

 }; 
```

现在，我有两个问题：

1）建议列表比编辑器字段窄一点。但我希望它更宽——可能和其中最宽的物品一样宽

2）我禁用了输入字段的向上和向下箭头键，但它没有聚焦列表，因此箭头会选择建议项。

有什么想法我的代码有什么问题吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:41:56.580

回答第一个问题。

您可以更改自动完成类的 css

```
<style type="text/css">
.ui-autocomplete {
    max-height: 250px;
    max-width: 200px;
    overflow-y: auto;
    /* prevent horizontal scrollbar */
    overflow-x: hidden;

}
/* IE 6 doesn't support max-height
 * we use height instead, but this forces the menu to always be this tall
 */
* html .ui-autocomplete 
{
    height: 250px;
    width: 200px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:57:29.840

```
//Please find below code make it  up and down event null
 $.widget( "ui.autocomplete", {
options: {
    appendTo: "body",
    autoFocus: false,
    delay: 300,
    minLength: 1,
    position: {
        my: "left top",
        at: "left bottom",
        collision: "none"
    },
    source: null
},

pending: 0,

_create: function() {
    var self = this,
        doc = this.element[ 0 ].ownerDocument,
        suppressKeyPress;
    this.isMultiLine = this.element.is( "textarea" );

    this.element
        .addClass( "ui-autocomplete-input" )
        .attr( "autocomplete", "off" )
        // TODO verify these actually work as intended
        .attr({
            role: "textbox",
            "aria-autocomplete": "list",
            "aria-haspopup": "true"
        })
        .bind( "keydown.autocomplete", function( event ) {
if ( self.options.disabled || self.element.propAttr( "readOnly" ) ) {
                return;
            }

            suppressKeyPress = false;
            var keyCode = $.ui.keyCode;
            switch( event.keyCode ) {
            case keyCode.PAGE_UP:
                //self._move( "previousPage", event );
                break;
            case keyCode.PAGE_DOWN:
                //self._move( "nextPage", event );
                break;
            case keyCode.UP:
                //self._keyEvent( "previous", event );
                break;
            case keyCode.DOWN:
                //self._keyEvent( "next", event );
                break;
            case keyCode.ENTER:
            case keyCode.NUMPAD_ENTER:
                // when menu is open and has focus
                if ( self.menu.active ) {
                    // #6055 - Opera still allows the keypress to occur
                    // which causes forms to submit
                    suppressKeyPress = true;
                    event.preventDefault();
                }
                //passthrough - ENTER and TAB both select the current element
            case keyCode.TAB:
                if ( !self.menu.active ) {
                    return;
                }
                self.menu.select( event );
                break;
            case keyCode.ESCAPE:
                self.element.val( self.term );
                self.close( event );
                break;
                // changes done by justin close the menu if text is empty
                case keyCode.BACKSPACE:                 
                break;
                //****************end *******************
            default:
                // keypress is triggered before the input value is changed
                clearTimeout( self.searching );
                self.searching = setTimeout(function() {
                    // only search if the value has changed
                    //if ( self.term != self.element.val() ) {
                        self.selectedItem = null;
                        self.search( null, event );
                    //}
                }, self.options.delay );
                break;
            }
        }) 
```

# perl - Perl 通过哈希引用删除基键

> ID：11990761
> 
> 赞同：5
> 
> 时间：2012-08-16T15:36:50.197
> 
> 标签：perl, perl-hash

```
my %myHash = (
    key1 => {
        test1 => 1,
        test2 => 2,
    },
    key2 => {
        test1 => 3,
        test2 => 4,
    },
);

my $myRef = $myHash{ "key". ((~~keys %myHash) + 1) } //= {
    test1 => 5,
    test2 => 6,
}; 
```

幽默我并假设上述内容实际上是实用的。我如何通过引用删除这个新创建的密钥？

```
delete $myRef; 
```

显然行不通

**编辑：** 所以从 zostay 我有以下...

```
sub deleteRef {
    my ( $hash_var, $hash_ref ) = @_;

    for ( keys %$hash_var ) {
        delete $hash_var->{$_} if ($hash_var->{$_} == $hash_ref);
    }
} 
```

用法：

```
deleteRef(\%myHash, $myRef); 
```

怎么样？还是不推荐？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:44:55.147

这将删除每次出现的`$myRef`in `%myHash`：

```
for my $key (keys %myHash) {
    if ($myHash{$key} == $myRef) {
        delete $myHash{$key};
    }
} 
```

您可以使用`==`相同的内存地址来测试引用。

我认为这是一个坏主意，但我在取笑你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:47:11.770

就目前而言，您必须遍历哈希以查找该引用。或者您可以将密钥添加到数据结构以供将来使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T21:49:45.073

您*实际上是*如何生成新的哈希键的？

线性搜索所有散列值以找到特定引用并绕过散列应该提供的简单快速访问是不好的形式。

写相当于

```
my $myKey = "key". ((~~keys %myHash) + 1);
$myHash{$myKey} //= {
    test1 => 5,
    test2 => 6,
}; 
```

之后你可以做

```
delete $myHash{$myKey}; 
```

但一切都取决于你的真正意思`"key". ((~~keys %myHash) + 1)`

# c# - Primary Goes down and Secondary now Primary - 如何写入新的 Primary？

> ID：11990765
> 
> 赞同：3
> 
> 时间：2012-08-16T15:36:57.523
> 
> 标签：c#, python, mongodb, pymongo

如果我有一个 MongoDB 副本集，其中我有 3 个节点（Primary、Secondary、Arbiter）并且主节点出现故障，现在辅助节点假设为主节点，您如何动态处理客户端中的更改，以便他们现在将写入主节点？

我在开发环境中经历了这一点，并开始考虑处理这个问题的最佳方法。这不是一个分片集群，只是一个独立的副本集。

您是否检查了诸如“IsPrimary”之类的连接中的某些内容，以便如果不是，则更改您的写作位置？

任何建议，将不胜感激。

谢谢，

小号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:50:42.727

到目前为止，我的发现让我相信，真正正确引导这一点的是司机。我认为我的 C# 驱动程序设置是正确的，但我通过 Python 客户端 (PyMongo) 连接的方式不正确。我应该使用类似 pymongo.ReplicaSetConnection 的东西

显示[在这里](http://emptysquare.net/blog/save-the-monkey-reliably-writing-to-mongodb/)。

我会继续挖掘，但想分享我到目前为止发现的东西。

**编辑：**

C# - 驱动程序正确处理连接非常好

Python：需要像我上面所说的那样修改我的连接，以便它将写入路由到新的主节点

Python（pymongo）代码：

```
from pymongo.replica_set_connection import ReplicaSetConnection

MongoConnection = ReplicaSetConnection('localhost:27017',replicaSet='myReplSet') 
```

--S

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:29:25.290

一旦你建立了连接，驱动程序应该足够聪明，可以确定数据应该发送到哪个节点。

[对于 C# 驱动程序](http://www.mongodb.org/display/DOCS/CSharp+Driver+Tutorial#CSharpDriverTutorial-Connectionstrings)：

> 要连接到副本集，请通过提供多个以逗号分隔的主机名（和端口号，如果需要）来指定种子列表。例如：
> 
> `mongodb://server1,server2:27017,server2:27018`

[对于 Python 驱动程序](http://api.mongodb.org/python/current/examples/replica_set.html)：

> 可以使用普通的 Connection() 构造函数建立与副本集的连接，指定该集合的一个或多个成员。例如，以下任何一项都将创建与我们刚刚创建的集合的连接：

```
Connection("morton.local", replicaset='foo')
Connection([u'morton.local:27019', 'morton.local:27017', u'morton.local:27018'])
Connection("morton.local:27018", replicaset='foo')
Connection([u'morton.local:27019', u'morton.local:27017', 'morton.local:27018'])
Connection("morton.local", 27019, replicaset='foo')
Connection(['morton.local:27019', u'morton.local:27017', u'morton.local:27018'])
Connection(["morton.local:27018", "morton.local:27019"])
Connection(['morton.local:27019', u'morton.local:27017', 'morton.local:27018'])
Connection("mongodb://morton.local:27017,morton.local:27018,morton.local:27019")
Connection(['morton.local:27019', 'morton.local:27017', 'morton.local:27018']) 
```

> 传递给 Connection() 的节点称为种子。如果只指定了一个主机，则必须使用 replicaset 参数来指示这不是与单个节点的连接。只要至少有一个种子在线，驱动程序就能够“发现”集合中的所有节点并连接到当前的主节点。

# php - 卷曲 JSON 时 POST 为空

> ID：11990767
> 
> 赞同：15
> 
> 时间：2012-08-16T15:37:00.433
> 
> 标签：php, json, post, curl

我正在使用 curl 发送这个：

```
curl -i -H "Accept: application/json" -H "Content-type: application/json" -X POST -d "{firstname:james}" http://hostname/index.php 
```

我正在尝试在 index.php 中显示这样的 POST

```
<?php
die(var_dump($_POST)); 
?> 
```

哪个输出

```
array(0) {
} 
```

我一定对通过 POST 发送 JSON 数据有误解

感谢您的时间

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-16T15:40:27.717

`$_POST`是一个*数组*，仅当您以 URL 编码格式发送 POST 正文时才会填充。PHP 不会自动解析 JSON，因此不会填充`$_POST`数组。您需要获取*原始 POST 正文*并自己解码 JSON：

```
$json = file_get_contents('php://input');
$values = json_decode($json, true); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T15:40:30.217

`$_POST`仅当您发送编码的表单数据时才有效。您正在发送 JSON，因此 PHP 无法将其解析为`$_POST`数组。

您需要直接从 POST 正文中读取。

```
$post = fopen('php://input', r);
$data = json_decode(stream_get_contents($post));
fclose($post); 
```

# c# - 在 ASP.NET for x64 上混淆发布配置

> ID：11990768
> 
> 赞同：0
> 
> 时间：2012-08-16T15:37:04.417
> 
> 标签：c#, asp.net, 64-bit, publish

我在 VS 2008 上有一个为任何 CPU 配置的带有 .NET 3.5 的应用程序。由于迁移（所有服务器、开发、支持、阶段和生产都迁移到 x64 2008）

我不得不将其更改为 x64。我清理了解决方案，我将所有 System.anything 引用设置为“false”，“copy local”设置为 true（因为如果不是，应用程序甚至无法在我的开发环境中运行）

但是当我发布站点以获取所有需要的文件以将它们复制到 Dev Env 中时，我仍然得到一个 x86 编译，然后在 bin 文件夹中，一个名为 x64 的文件夹，在其中，一个名为“Debug”的文件夹" 有很多我自己的 dll，所以我有一个奇怪的名称（调试）的文件夹，以及我在 bin 文件夹中的文件的第二个副本。

我接触了很多试图解决这种情况的东西，在谷歌上阅读了很多（检索了很多无事可做的网站和论坛），但我无法获得我需要配置的东西来进行干净的发布我的 asp.net 站点及其库仅在 x64 上，没有第二个副本，并且正确配置。

所以我的问题是......有人可以给我一个详细的答案，链接，教程或类似的东西以一种规则的方式发布我的网站，干净并且没有所有这些东西？

*   如果您不了解此问题的某些内容，请发表评论，我将使用更多必需信息对其进行更新。
*   如果您会否决这个问题以改进它，请发表评论。
*   请避免回答或评论，如“你为什么在 VS2008 上工作”，我正在根据客户要求工作。

谢谢和亲切的问候。

更新：

它为每个发布配置文件在 x64 文件夹中创建一个文件夹，但有些是空的，调试始终是填充的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:42:29.480

将应用程序编译到任何 CPU，然后在发布它时选择“仅运行此应用程序所需的文件”，这样就可以了。如果您不想将所有 dll-s 设置为复制本地，请使用 gacutil 将它们放入环境的 GAC 中。（并非所有的 dll 都会以这种方式工作。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:45:20.847

最后我发现了问题。该文件夹是解决方案中排除的文件夹。这些文件可以从解决方案资源管理器窗口工具栏上的图像按钮显示：“显示所有文件”。

发布还发布排除文件夹和文件。您必须删除它们才能不与其他文件一起发布。

# imageresizer - 权限被拒绝：'CreateObject' - ImageResizer

> ID：11990772
> 
> 赞同：0
> 
> 时间：2012-08-16T15:37:22.227
> 
> 标签：imageresizer

我只是尝试安装 imageresizing.net com 对象。我正在使用以下代码来创建对象。

```
set c = CreateObject("ImageResizer.Configuration.Config")
c.BuildImage "images\red-eye-wikipedia.jpg","test-image.jpg","width=100" 
```

错误

```
Microsoft VBScript runtime error '800a0046'

Permission denied: 'CreateObject'

/resizer.asp, line 5 
```

* * *

我为尝试运行代码的文件夹提供了与其他文件夹相同的权限。我不知道在哪里给予适当的权限。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:51:45.820

You must give the DLL folder Read+Execute permissions for Everyone (or each of the usernames involved in running w3wp and ASP). Recursively.

C:\Program Files\ImageResizingNet\v3\

# backbone.js - 如何在单页应用程序中正确切换复杂的主干应用程序

> ID：11990781
> 
> 赞同：0
> 
> 时间：2012-08-16T15:38:04.390
> 
> 标签：backbone.js, backbone-views, backbone-routing

我有几个复杂的视图/应用程序，它们共同构成了一个大应用程序。

想想 gmail，你有邮件和联系人或 twitter，从个人资料视图切换到设置 在我的例子中，这是一个游戏，你可以在其中玩一个视图和一个地图编辑器。

我想在它们之间切换而无需在大主应用程序中重新加载。

现在我正在努力解决如何实现两件事的概念：

*   如何正确切换（解除绑定事件，拆除所有视图）而不泄漏
*   当所有子应用都可以有自己的导航项时，如何组织路由。

具体问题：

有一个gameApp和一个editorApp

如果我在“#game/12345/details/”并切换到“#editor/map/123”，应该会发生以下情况：

1) 主路由通知app切换 2) 拆掉游戏app和所有子视图/事件 3) 切换并初始化editorApp 4) editorApp路由到map 123，加载数据

考虑到额外的路由参数，主路由器会是什么样子我应该使用子路由器吗？我是否应该将游戏应用程序留在内存中并隐藏它？一个函数如何处理路由？

我知道这是很多东西，但也许你可以在教程/设计模式/.. 网站上指导我？

这个[用主干.js 清洗视图？](https://stackoverflow.com/questions/9079491/cleaning-views-with-backbone-js/9139131#9139131)似乎是切换应用程序的一种选择，但对子路由没有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:32:19.450

看看伟大的 Backbone.Marionette 和参考应用程序 BBCloneMail：

[https://github.com/derickbailey/backbone.marionette](https://github.com/derickbailey/backbone.marionette) https://github.com/derickbailey/bbclonemail

# org-mode - 如何将 Emacs org-mode 与 ctags 集成？

> ID：11990785
> 
> 赞同：1
> 
> 时间：2012-08-16T15:38:13.473
> 
> 标签：org-mode, exuberant-ctags

我一直在使用 org-mode 来处理大量（并且不断增长的）代码。我想使用丰富的 ctags 来帮助我跳来跳去并记住函数名称等，但我无法找到针对 org-mode 文件运行 ctags 的方法。如有必要，我可以使用另一个标签系统，只要它创建一个我可以处理的外部 TAGS 文件。

每个代码块都列出了语言，因此应该可以或多或少地伪造 ctags 来创建文件，但我找不到任何方法。

有没有人成功实现过这个？我找到[了这个](http://comments.gmane.org/gmane.emacs.orgmode/20684)，但它是帮助 org-mode / ctags 处理链接的补丁。我不担心链接，我希望它解析我的实际代码。

# c++ - std::hash 是否保证在 stdlib 发行版中相同

> ID：11990794
> 
> 赞同：10
> 
> 时间：2012-08-16T15:38:47.373
> 
> 标签：c++, c++11, hash, stdhash

如果我`std::hash`使用`libstdc++`然后在即将推出的`C++11`VS 2012 库中使用，它们会匹配吗？

我假设哈希实现不是 C++ 规范的一部分，并且可能因分布而异？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T15:47:22.397

不，这不能保证。`std::hash`只需遵守以下条件：

> 1.  接受一个 Key 类型的参数。
> 2.  返回一个 size_t 类型的值，它表示参数的哈希值。
> 3.  调用时不抛出异常。
> 4.  对于两个相等的参数 k1 和 k2，std::hash()(k1) == std::hash()(k2)。
> 5.  对于不相等的两个不同参数k1和k2，std::hash()(k1) == std::hash()(k2)的概率应该很小，接近1.0/std::numeric_limits::max ()。

[http://en.cppreference.com/w/cpp/utility/hash](http://en.cppreference.com/w/cpp/utility/hash)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-16T15:47:51.893

标准只这么说：

> 20.8.12 类模板散列 23.5 中定义的无序关联容器使用类模板散列的特化作为默认散列函数。对于存在专门化散列的所有对象类型 Key，实例化散列应：
> 
> *   满足 Hash 要求（17.6.3.4），以 Key 作为函数调用参数类型，DefaultConstructible 要求（表 19），CopyAssignable 要求（表 23），
> *   可交换（17.6.3.2）左值，
> *   提供两个嵌套类型 result_type 和 argument_type 分别是 size_t 和 Key 的同义词，
> *   满足如果 k1 == k2 为真，h(k1) == h(k2) 也为真，其中 h 是 hash 类型的对象，k1 和 k2 是 Key 类型的对象。

在 17.6.3.4 中，这是最重要的（表 26）：

> 不得抛出异常。返回的值应仅取决于参数 k。[ 注意：因此，对于具有相同 k 值的表达式 h(k) 的所有评估都会产生相同的结果。— end note ] [ 注意：对于两个不同的值 t1 和 t2，h(t1) 和 h(t2) 比较相等的概率应该很小，接近 1.0 / numeric_-limits::max()。——尾注]

所以一般来说，不，计算本身没有定义，结果不需要在实现上保持一致。就此而言，即使是同一个库的两个不同版本也可能给出不同的结果。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-16T15:50:04.593

函数返回值的要求（**17.6.3.4 Hash requirements [hash.requirements]**`Hash` ）是：

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> ### 表 26 - 哈希要求 [哈希]
> 
> 返回的值应仅取决于参数`k`。`h(k)`[注意：因此，对具有相同值的表达式的所有评估都会`k`产生相同的结果。——尾注] [注：对于两个不同的值`t1`和`t2`， `h(t1)`和`h(t2)`比较相等的概率应该很小，接近`1.0 / numeric_limits<size_t>::max()`。——尾注]

`std::hash(k)`在实践中，对于整数类型而言，equal是很常见的`k`，因为这是符合标准的最简单的实现。对于其他类型，一切皆有可能。

# sql-server-2005 - 解决死锁的最佳方法

> ID：11990797
> 
> 赞同：0
> 
> 时间：2012-08-16T15:38:56.477
> 
> 标签：sql-server-2005, jdbc, spring-jdbc, database-deadlocks

这是一个简单的问题，但我浪费了几天时间来解决它。

我使用 spring jdbc 模板作为我的 DAO 层 mssql sever 2005 作为我的数据库，我们有一个订单输入系统。现在，当系统上有超过 5 个人时，我们会遇到如此多的死锁场景。当人们尝试创建新订单而其他人更新现有订单时，似乎会发生锁定。同一张表的插入和更新语句之间似乎存在冲突。

我没有做任何事情来解决这个问题，并且没有任何工作。所以现在我正在考虑引入 java.util.semaphore 或 Lock 并控制线程的并发访问，或者我可以使用 Synchronized 方法或块。

对此你们怎么看？有没有更好的方法在数据库服务器上处理这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T23:28:06.053

您可以使用 sp_getApplock 在数据库端实现信号量等效解决方案。但大多数时候，这是没有必要的。不同类型的死锁需要不同的处理方式。查看以下链接中的帖子，了解如何修复常见的死锁模式。 [http://sqlindian.com/2012/07/06/sql-server-deadlocks-and-live-lockscommon-patterns/](http://sqlindian.com/2012/07/06/sql-server-deadlocks-and-live-lockscommon-patterns/)

如果您可以使用跟踪标志 1222 捕获您的特定死锁并在此处发布跟踪详细信息，我们将能够为您提供进一步的帮助。

# c# - 将指针传递给另一个进程

> ID：11990799
> 
> 赞同：2
> 
> 时间：2012-08-16T15:39:05.830
> 
> 标签：c#, .net, vb.net, clr, marshalling

我正在尝试将指向结构的指针传递给我创建的另一个进程……我在发送指针的进程中除了无效指针错误什么也没有得到……这在[.NET](http://en.wikipedia.org/wiki/.NET_Framework)中是否可行？

我的发送过程代码：

```
' Initialize unmanged memory to hold the struct.
Dim ptrSettings As IntPtr = Marshal.AllocHGlobal(Marshal.SizeOf(EngineSettings))

' Copy the struct to unmanaged memory.
Marshal.StructureToPtr(EngineSettings, ptrSettings, False)

SendMessage(HWND, MSG_SETTINGS_STRUCT, 0, ptrSettings) 
```

我在第二个过程中重写 WinProc 以在 LParam 中接收消息：

```
EngineSettings = CType(Marshal.PtrToStructure(ptr, GetType(SettingsStruct)), SettingsStruct)

' Free the unmanaged memory.
Marshal.FreeHGlobal(ptr) 
```

指针在两个进程之间是相同的值，这里是第二个进程中的错误：

错误代码为 0xc0000005。此错误可能是 CLR 中的错​​误或用户代码的不安全或不可验证部分中的错误。此错误的常见来源包括 COM 互操作或 PInvoke 的用户封送错误，这可能会损坏堆栈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:48:45.013

进程通常不能共享内存。请记住，*大多数*地址实际上是虚拟地址，并不指向物理硬件位置，而是指向页面和偏移量。

win32 函数返回指针，因为它们在您的进程地址空间中运行，而不是一个单独的进程。

有关所有本机调用如何在 Win32 中实际分配内存（至少来自用户模式代码）的更多信息，请参阅[Win32 中的内存管理选项。](http://www.abstraction.net/content/articles/memory%20management%20options%20in%20win32.htm)该页面上唯一没有提到的是[大页面支持](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366720%28v=vs.85%29.aspx)，它创建非标准页面并且不能分页到磁盘。即使在 C/C++ 中，这些页面也很难使用，因此我强烈建议不要在 CLR 中使用它们。

如果您想直接共享此本机结构，您可能需要使用共享内存。[创建命名共享内存 (Win32)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:46:46.200

我可以建议查看内存映射文件的这种事情吗？看看这里：

[http://msdn.microsoft.com/en-us/library/dd997372(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd997372(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:04:14.667

将类序列化为 XML 并将`SendMessage(WM_SETTEXT)`其序列化到另一个应用程序中的文本框（您可以使用当前代码很容易地传递 hwnd，因为它只是很长）。然后在文本框更改事件上放置一个侦听器。

# c# - 如何为 INotifyPropertyChanged 接口创建自己的 PropertyChangedEventArgs？

> ID：11990801
> 
> 赞同：0
> 
> 时间：2012-08-16T15:39:14.307
> 
> 标签：c#, .net, class, events, mvvm

我遇到了一个问题，我在 my`DataModel`和`ViewModel`with之间陷入无限循环`PropertyChanged event`。

我的结构：

```
public class SomeDataModel : DataModelBase
{
    public SomeDataModel()
    {

    }

    public object SomeProperty
    {
        get
        {
            //
        }
        set;
        {
            //
            OnPropertyChanged("SomeProperty");
        }
    }

    public bool SomeMethod()
    {
        SomeProperty = SomeNewObject
    }
}

public class SomeViewModel : ViewModelBase
{
    public SomeViewModel()
    {

    }

    public SomeDataModel SomeDataModel
    {
        get;
        set;
    }

    public object SomeProperty
    {
        get
        {
            return SomeDataModel.SomeProperty;
        }
        set
        {
            SomeDataModel.SomeProperty = value;
            OnPropertyChanged("SomeProperty");
        }
    }
} 
```

两者`ViewModel`和`DataModel`实现`INotifyPropertyChanged`。

然后我有一个`listener`我`ViewModelBase`的任何`property`变化`DataModel`：

```
private void DataModel_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    PropertyInfo toPropertyInfo = this.GetType().GetProperty(e.PropertyName);
    PropertyInfo fromPropertyInfo = DataModel.GetType().GetProperty(e.PropertyName);

    if (toPropertyInfo != null && fromPropertyInfo != null)
    {
        if (toPropertyInfo.CanWrite && fromPropertyInfo.CanRead)
        {
            toPropertyInfo.SetValue(this, fromPropertyInfo.GetValue(DataModel, null), null);
        }
    }
} 
```

所以现在当. `property`_ `DataModel`_ 但是集合中的集合又回到了导致再次触发的原因，以无限循环结束。`ViewModelBase``property``ViewModel``ViewModel``DataModel``OnPropertyChanged("SomeProperty");`

1.  有没有快速的解决方法来解决它？（**注意**：不能改变结构）
2.  我是否能够创建自己的自定义类，继承自`PropertyChangedEventArgs`并仍然让我的`INotifyPropertyChanged`操作正常工作？

我刚在想：

```
public class CustomPropertyChangedEventArgs : PropertyChangedEventArgs
{
    public CustomPropertyChangedEventArgs(string propertyName, SomeEnum enumName)
        : base(propertyName)
    {
        //Set enum
    }
} 
```

然后在`OnPropertyChanged`我想使用新的`CustomPropertyChangedEventArgs`并传递`enum`我想使用的。

```
public void OnPropertyChanged(string propertyName)
{
    CustomPropertyChangedEventArgs handler = this.PropertyChanged;

    if (handler != null)
    {
        handler(this, new CustomPropertyChangedEventArgs(propertyName, newEnum));
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T15:47:09.890

您可以检查该值是否相同并且不要更新它。这通常`INotifyPropertyChanged`是如何实现的。`OnPropertyChanged`只有当它**真的**改变时，你才会开火。

```
public object SomeProperty
{
    get
    {
        return SomeDataModel.SomeProperty;
    }
    set
    {
        if (SomeDataModel.SomeProperty != value)
        {
            SomeDataModel.SomeProperty = value;
            OnPropertyChanged("SomeProperty");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:56:04.977

```
you can disable and enable the event to avoid loop
private void DataModel_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    OnPropertyChanged -= DataModel_PropertyChanged;
    PropertyInfo toPropertyInfo = this.GetType().GetProperty(e.PropertyName);
    PropertyInfo fromPropertyInfo = DataModel.GetType().GetProperty(e.PropertyName);

    if (toPropertyInfo != null && fromPropertyInfo != null)
    {
        if (toPropertyInfo.CanWrite && fromPropertyInfo.CanRead)
        {
            toPropertyInfo.SetValue(this, fromPropertyInfo.GetValue(DataModel, null), null);
        }
    }
    OnPropertyChanged += DataModel_PropertyChanged;
} 
```

# android - 更改 ListView 字体

> ID：11990802
> 
> 赞同：0
> 
> 时间：2012-08-16T15:39:15.127
> 
> 标签：android, listview, android-asynctask

有什么方法可以加快我的应用程序中字体的更改速度？

我有一个`ListView`从在线 XML 加载它的列表。一切都很好，但我需要从我的资产文件夹中将其字体更改为自定义字体。

当我申请时：

```
 TxEventName = (TextView)row.findViewById(id.eventNameTx);
 TxEventName.setText(getEventsCount(position));
 TxEventName.setTypeface(Utilities.textFont(this.getContext())); 
```

它变得很慢，因为我应用了`setTypeface`.

有时它会先加载 UI 布局然后加载列表，有时它只是一个延迟的黑屏，然后当下一个活动出现时，列表已经存在。

我什`AsyncTask`至用来加载列表的值，类似于：

```
private class initList extends AsyncTask<Void, Void, Void>{

    @Override
    protected Void doInBackground(Void... params) {

        SimpleDateFormat formatterc; 
        Date xdatec=null; 
        formatterc = new SimpleDateFormat("dd/MM/yy");
        try {
            xdatec = (Date)formatterc.parse(date);
            SimpleDateFormat frmtr = new SimpleDateFormat(dateTemplateForChecking);
            selectedDate = frmtr.format(xdatec).toString();
        } catch (ParseException e) {
            e.printStackTrace();
        }

        for(int i = 0; i < XMLParser.ppEvents.size(); i++) {
            EventsObj evObj = XMLParser.ppEvents.get(i);

            for(int j = 0; j < evObj.date.size(); j++) {
                if(selectedDate.equalsIgnoreCase(evObj.date.get(j))) {

                    StringBuilder sbldr = new StringBuilder();
                    sbldr.append(evObj.act_id);
                    sbldr.append("!");
                    if (SelectLanguage.lang == "ENG"){
                    sbldr.append(evObj.name_en);
                    } else if (SelectLanguage.lang == "TCH"){
                        sbldr.append(evObj.name_tc);
                    } else if (SelectLanguage.lang == "SCH"){
                        sbldr.append(evObj.name_sc);
                    }

                    mainEvents.add(sbldr.toString());
                    eventID.add(Integer.toString(evObj.act_id));
                }   
            }
        }
        adapter = new events_adapter(PublicProg.this, layout.events_adapter, id.eventNameTx, mainEvents);
        return null;
    }

    protected void onPostExecute(Void result){
        eventList.setAdapter(adapter);
    }

    protected void onPreExecute(){
        Bundle ext = getIntent().getExtras();

        position = ext.getString("position");
        date = ext.getString("date");

        mainEvents = new ArrayList<String>();
        eventID = new ArrayList<String>();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:17:01.813

我用它来创建简单的缓存`Typeface`

```
public class Typefaces{

private static final Hashtable<String, Typeface> cache = new Hashtable<String, Typeface>();

    public static Typeface get(Context c, String name){
        synchronized(cache){
            if(!cache.containsKey(name)){
                Typeface t = Typeface.createFromAsset(
                        c.getAssets(), 
                        String.format("fonts/%s.OTF", name)
                    );
                cache.put(name, t);
            }
            return cache.get(name);
        }
    }

} 
```

在适配器构造函数中初始化您的自定义`Typeface`

```
myriadBold = Typefaces.get(mContext, "MYRIADPRO-BOLD"); 
```

并将其用于`getView`

```
txt.setTypeface(myriadBold); 
```

这样可以减少`skia`生成自定义字体的数字系统调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:01:35.817

也许你设置字体的地方不是好地方。

还有 Utilities.textFont(this.getContext())，这样您可能正在从文件系统中读取字体，这可能会减慢您的进程，并且根据调用此行的位置，您正在锁定 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:14:01.840

您可以`Typeface`通过自定义设置`TextView`

```
public class TextViewGeorgiaBold extends TextView {

Resources res = getResources();
String font_path = res.getString(R.string.MAIN_FONT);

public TextViewGeorgiaBold(Context context, AttributeSet attrs, int defStyle) {
    super(context.getApplicationContext(), attrs, defStyle);
    Typeface font = Typeface.createFromAsset(getContext()
            .getApplicationContext().getAssets(), font_path);
    setTypeface(font);
}

public TextViewGeorgiaBold(Context context, AttributeSet attrs) {
    super(context.getApplicationContext(), attrs);
    Typeface font = Typeface.createFromAsset(getContext()
            .getApplicationContext().getAssets(), font_path);
    setTypeface(font);

}

public TextViewGeorgiaBold(Context context) {
    super(context.getApplicationContext());
    Typeface font = Typeface.createFromAsset(getContext()
            .getApplicationContext().getAssets(), font_path);
    setTypeface(font);
}

} 
```

as 它设置`TypeFace`布局膨胀的时间。

也许它会帮助你。

# c++ - 如果图像如何着色傅里叶变换

> ID：11990810
> 
> 赞同：0
> 
> 时间：2012-08-16T15:39:57.747
> 
> 标签：c++, image, fft

我已经编写了一个计算 FFT 的应用程序，我想知道一种以颜色可视化光谱的好方法。

不幸的是，我幼稚的尝试并没有产生好的结果。我想实现这样的目标：

[图片](http://www.mathworks.com/help/toolbox/images/transform38.gif)

我目前正在使用它进行着色

```
float r = std::log( std::abs(source[u][v]) + 1 ) * 0.2f;
float g = std::log( std::max(std::abs(source[u][v]) - 10.0f, 0.0f) + 1 ) * 0.2f;
float b = std::log( std::max(std::abs(source[u][v]) - 100.0f, 0.0f) + 1 ) * 0.2f; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:43:52.273

我提出以下方法。首先，选择一个最大值（代表“红色”的那个）并缩放 [0, 1] 区间中的所有值。接下来，将此值用于色调并使用 HSL 到 RGB 转换。Python 代码如下所示：

```
import colorsys
from PIL import Image, ImageDraw

w = 400
h = 20
im = Image.new("RGB", (w, h))
draw = ImageDraw.Draw(im)

for x in range(0, 100):
    value = float(x)/100

    r, g, b = colorsys.hsv_to_rgb(1-value*3/4-0.33, 1, 1)
    color = int(r*255), int(g*255), int(b*255)
    draw.rectangle((x * 4, 0, (x + 1) * 4, h), color, color)

im.save('example.png' , 'png') 
```

结果：

![将 [0,1] 中的值映射到颜色](../Images/dc5680cc75acc8b4b0227e3565bf7977.png)

# solr - 将“UK”匹配到“United Kingdom,scotland etc.” 在 Solr

> ID：11990812
> 
> 赞同：0
> 
> 时间：2012-08-16T15:39:59.777
> 
> 标签：solr, synonym, sunspot-solr

我在我的网站中使用 Solr 作为搜索引擎，除了同义词匹配外，一切都很顺利。

我的 synonym.txt 文件如下所示：

```
uk => united kingdom,england,scotland,wales 
```

这适用于返回标有“英国”的结果，但不适用于其他结果。如果我颠倒排序，则不会返回“英国”结果。

我的字段类型如下所示：

```
<fieldType name="text" class="solr.TextField" omitNorms="false">
      <analyzer>
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
<filter class="solr.SynonymFilterFactory" tokenizerFactory="solr.KeywordTokenizerFactory" synonyms="synonyms.txt" ignoreCase="true" expand="false"/>
      </analyzer>
    </fieldType> 
```

我对 solr 很陌生，所以非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:44:20.493

在[wiki](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters/#solr.SynonymFilterFactory)中，建议仅在索引时使用 SynonymFilter。此外，尝试将“expand”标志设置为 true，这也是处理多词同义词的推荐方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T11:18:49.520

您在 synonyms.txt:和**=>中有 2 个运算符****，**我猜您使用的是一个而不是另一个。

 ****=> 运算符**正在用另一个文本替换一个文本，这对于规范化非常有用。优点：它不会增加您的索引，也不会增加歧义。缺点：您必须将过滤器应用于索引和查询。Exple: doesn't => does not Structurally，你用另一个文本替换一个文本，所以你不能有一个列表

**, 运算符**会将一位文本扩展为所有其他文本。建议仅将其用于索引（所有同义词都将在索引中并与任何单词匹配）。缺点：它会增加你的索引。 **, 运算符**也可以仅在查询时使用，但是在进行复杂查询时，这种行为可能很难预测，并且会减慢您的请求速度。所以，不推荐。

要获得预期的行为，您应该写：
uk,united Kingdom,england,scotland,wales

请注意，根据所使用的分词器，可能存在与多词相关的一些问题（已经有很多关于这个的问题）：搜索“王国”将找到所有用 UK 索引的文档。这可能是预期的行为......或者不是。

附录：我刚刚意识到您可能希望将“uk”替换为“united Kingdom,england,scotland,wales”作为文本。在这种情况下，您必须对 , 进行转义（如果我的记忆正确，请将其替换为 \）。同样，您的搜索结果将在很大程度上取决于它的标记方式。**

# asp.net-mvc-3 - 仅适用于 MVC 应用程序的一个领域的自定义模型绑定器

> ID：11990814
> 
> 赞同：2
> 
> 时间：2012-08-16T15:40:09.947
> 
> 标签：asp.net-mvc-3, model-binding, custom-model-binder

我使用了在 Global.asax 文件中配置的自定义模型绑定器。是否可以仅在应用程序的某些区域下使用此模型绑定器？

```
public class CreatorModelBinder : IModelBinder
{

    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        //what logic can i put here so that this only happens when the controller is in certain area- and when it's not in that area- then the default model binding would work
        var service = new MyService();
        if (System.Web.HttpContext.Current != null && service.IsLoggedIn)
            return service.Creator;
        return new Creator {};
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:20:54.370

尝试使用以下逻辑：

```
if(controllerContext.RouteData.DataTokens["area"].ToString()=="yourArea")
        {
            //do something
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T17:26:10.473

如果你想调用默认的模型绑定器，你应该派生`DefaultModelBinder`而不是直接实现`IModelBinder`接口。

进而：

```
public class CreatorModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var area = controllerContext.RouteData.Values["area"] as string;
        if (string.Equals(area, "Admin"))
        {
            // we are in the Admin area => do custom stuff
            return someCustomObject;
        }

        // we are not in the Admin area => invoke the default model binder
        return base.BindModel(controllerContext, bindingContext);
    }
} 
```

# bitmap - Monodroid 将绘制的位图保存为 jpg

> ID：11990820
> 
> 赞同：1
> 
> 时间：2012-08-16T15:40:22.997
> 
> 标签：bitmap, xamarin.android, image, jpeg

我正在 Monodroid 中编写一个程序来捕获屏幕上的签名，然后将其保存到 jpg 文件中。我可以很好地捕获签名，当我尝试将其保存到文件时出现问题。当用户想要保存图像时，运行以下代码：

```
 void buttonSave_Click(object sender, EventArgs e)
    {
        try
        {
            if (!m_locked)
            {

                MemoryStream stream = new MemoryStream();
                m_bitmap.Compress(Bitmap.CompressFormat.Jpeg, 100, stream);                                                                         
                byte[] byteArray = stream.GetBuffer();

                //string toSave = Convert.ToBase64String(byteArray);

                //save it to file (test);
                string path = "/mnt/sdcard/TestSig/";
                if (!Directory.Exists(path))
                    Directory.CreateDirectory(path);

                string file = path + "signature.jpg";

                FileOutputStream fo = new FileOutputStream(file);  

                fo.Write(byteArray);
            }
        }
        catch (Exception ex)
        {
            //display message
        }
    } 
```

绘制签名的 ImageView 是这样设置的（在活动的 OnCreate 方法中）：

```
 m_imageView = (ImageView)FindViewById(Resource.Id.imageView);

        m_imageView.SetBackgroundColor(Android.Graphics.Color.White);

        Display d = WindowManager.DefaultDisplay;

        m_dw = d.Width;
        m_dh = d.Height;
        m_bitmap = Bitmap.CreateBitmap((int)m_dw, (int)(m_dh * 0.5), Bitmap.Config.Argb8888);

        m_canvas = new Canvas(m_bitmap);
        m_paint = new Paint();
        m_paint.Color = Color.Black;
        m_imageView.SetImageBitmap(m_bitmap);

        m_imageView.SetOnTouchListener(this); 
```

问题是当我在图像编辑器中打开文件时，所有尺寸都可以，但它完全是黑色的。它应该看起来像这样：

![签名](../Images/18246059c4b4f70911175a79ab52717c.png)

顺便说一句，当使用 png 格式时，这似乎工作正常。我将图像保存在 Android 设备上，但在 Windows PC 上查看。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:24:14.193

在您的 m_imageView 设置中，启用绘图缓存（并设置它的背景颜色）：

```
m_imageView.DrawingCacheEnabled = true;
m_imageView.DrawingCacheBackgroundColor = Color.White; 
```

然后用缓存的内容填充 MemoryStream：

```
m_imageView.GetDrawingCache(false).Compress(Bitmap.CompressFormatJpeg,100, stream); 
```

对 .GetDrawingCache() 的调用将返回您在 m_imageView 中看到的位图。

# android - 如何避免在 onCreate() 中执行部分代码

> ID：11990827
> 
> 赞同：2
> 
> 时间：2012-08-16T15:41:11.810
> 
> 标签：android, oncreate

我在处理 Activity 中的 onCreate() 时遇到了一个主要问题。就像[线程](https://stackoverflow.com/questions/6905774/how-do-i-avoid-oncreate-being-called-when-starting-an-activity)说的，我只能在主Activity的onCreate()方法中执行部分代码一次。所以我按照该线程中的步骤并执行以下操作：

```
/*I've updated the code to SharePreferences version*/

public class MyApp extends Activity {
   private static RMEFaceAppActivity instance;
   private boolean wascalled = false;

   private SharedPreferences sharedPreferences;       
   private SharedPreferences.Editor editor; 

   @Override
   protected void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);

     setContentView(R.layout.main);

      //initiate some buttons here

     sharedPreferences = this.getSharedPreferences("test",0);  
     editor = sharedPreferences.edit();  

    if(sharedPreferences.getString("wascalled", "false").equalsIgnoreCase("false"))
    {
        //work can only be done once
        editor.putString("wascalled", "true");
        editor.commit();
    }
        //set buttons to listener methods

   }

   void onClick(View arg0)
   {
      if(arg0.getId() == R.id.button1)
      {
         Intent intent = new Intent(this, MyChildApp.class);
         startActivity(intent);
      }
   }

} 
```

在 MyChildApp 类中，我`finish()`在那里完成工作时调用。但是，该字段`wascalled`始终为 false。我认为当`onCreate()`从返回时第二次执行时`MyChildApp`，`wascalled`应该已经设置为true。然而事实并非如此。并且`onCreate()`每次从`MyChildApp`.

有人对此有建议吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:52:08.663

定义**SharedPreferences**并最初存储一个值`0/false`以显示 was called()**从未**被调用过。

现在，当第一次调用 wasCalled 时，将此 SharedPreference 变量的值更新为`1/true`。

下次`onCreate()`运行时，检查 SharedPreference 中变量的值，如果值为 1/true，则不要再次执行它。

实现 SharedPreferences 的代码：

```
final String PREF_SETTINGS_FILE_NAME = "PrefSettingsFile";
int wasCalledValue;

onCreate() {

....

SharedPreferences preferences = getSharedPreferences(PREF_SETTINGS_FILE_NAME, MODE_PRIVATE);
wasCalledValue=  preferences.getInt("value", 0); 

if(wasCalledValue == 0)
{
// execute the code
//now update the variable in the SharedPreferences
SharedPreferences.Editor editor = preferences.edit();
editor.putInt("value", 1);
editor.commit();

}

else if(wasCalledValue == 1)
{
//skip the code
}

} // end of onCreate() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:46:22.160

当您从 MyChildApp 返回时，myApp 正在重新创建，因此再次调用 onCreate，并再次初始化变量（这就是 wascall 始终为 false 的原因）。

一种可能的解决方案是在 SharePreferences 中存储 was called 状态

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:47:57.760

`wascalled`将始终为 false，因为它是 Activity 实例的一部分。它在您的活动中声明：

```
private boolean wascalled = false; 
```

当重新创建活动时，所有实例变量都被初始化为它们的默认值，这就是你得到 always 的原因`false`。

如果您注意该[线程](https://stackoverflow.com/questions/6905774/how-do-i-avoid-oncreate-being-called-when-starting-an-activity)的代码，您会注意到它`wascalled`是另一个类的一部分，而不是 Activity 的类。

```
if (!YourApplicationInstance.wasCalled) {
} 
```

在这个具体的例子中，`YourApplicationInstance`是一个单独的类，它保持`wascalled`变量的状态。

# c# - 调用商务服务器配置文件刷新方法的更好方法是什么？

> ID：11990828
> 
> 赞同：0
> 
> 时间：2012-08-16T15:41:14.907
> 
> 标签：c#, microsoft-commerce-server

我获取客户、联系人、电话、地址的配置文件对象，然后在每次获得这些配置文件对象后调用配置文件刷新方法。该应用程序部署在网络场上。

我发现当前方法的性能滞后。我们目前仅限于使用 commerce server 2007。

调用商务服务器配置文件刷新方法的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:23:52.510

[在 Web 场场景中使用配置文件中](http://msdn.microsoft.com/en-us/library/bb219221%28v=cs.70%29.aspx)记录了推荐的方法

# objective-c - 内阴影滚动视图

> ID：11990829
> 
> 赞同：1
> 
> 时间：2012-08-16T15:41:15.220
> 
> 标签：objective-c, ios5

我正在尝试在滚动视图中绘制内部阴影。滚动视图包含小图像视图，我需要像附加图像一样放置阴影，但在图层中没有边框。我该怎么做？

![在此处输入图像描述](../Images/b4e4d0ddadc91c5407a89407f93824a0.png)

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:45:02.913

创建一个具有透明度的覆盖 png。将其放入 ImageView 并将其添加到滚动视图的 superView 中（因此您需要一个常规视图控制器作为包含滚动视图的超级视图）

# r - 在 plyr 中使用多个变量

> ID：11990830
> 
> 赞同：2
> 
> 时间：2012-08-16T15:41:15.937
> 
> 标签：r, plyr

我正在尝试使用 plyr，但在使用多个变量时遇到了困难。这里举个例子。

```
 df <- read.table(header=TRUE, text="
    Firm Foreign SME Turnover
A1       N   Y      200
A2       N   N     1000
A3       Y   Y      100
A1       N   N      500
A2       Y   Y      200
A3       Y   Y     1000
A1       Y   N      200
A2       N   N     1000
A2       N   Y      100
A2       N   Y      200  ") 
```

我正在尝试创建一个表格来总结两个变量的营业额。基本上结合以下代码

```
t1 <- ddply(df, c('Firm', 'Foreign'), summarise, 
        BudgetForeign    = sum(Turnover, na.rm = TRUE))

t2 <- ddply(df, c('Firm', 'SME'), summarise, 
        BudgetSME    = sum(Turnover, na.rm = TRUE)) 
```

结果如下

```
res <- read.table(header=TRUE, text="
Firm          A1   A2   A3  
BudgetForeign 200  200 1100
BudgetSME     200  500 1100")
res 
```

如何在不进行多次操作和子集并在之后组合的情况下实现这一目标？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T15:58:18.300

我认为您只想要 Foreign 或 SME 的值`'Y'`……如果是这样的话。我会使用 包中的`melt`and而不是.`dcast``reshape2``plyr`

```
df.m <- melt(df, id.var=c('Firm', 'Turnover'))

dcast(df.m[df.m$value=='Y',], variable ~ Firm, value.var='Turnover', fun.aggregate=sum)

  variable  A1  A2   A3
1  Foreign 200 200 1100
2      SME 200 500 1100 
```

如果您想查看 和 之间的差异`Y`，`N`也可以将它们添加到公式中`dcast`：

```
> dcast(df.m, variable + value ~ Firm, value.var='Turnover', fun.aggregate=sum)
  variable value  A1   A2   A3
1  Foreign     N 700 2300    0
2  Foreign     Y 200  200 1100
3      SME     N 700 2000    0
4      SME     Y 200  500 1100
> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:44:55.493

谢谢贾斯汀。根据您的回答，以下代码应该可以解决我的问题。

```
library(reshape2)
df.m <- melt(df, id.var=c('Firm', 'Turnover'))

x <- dcast(df.m, variable + value ~ Firm, value.var='Turnover', fun.aggregate=sum)

res <- rbind(
         BudgetForeign = subset(x, variable == 'Foreign' & value == 'Y'),
         BudgetSME = subset(x, variable == 'SME' & value == 'Y')
         )
res 
```

# java - 从 jruby 调用静态 java 方法，其中静态方法的参数之一是 java 接口

> ID：11990837
> 
> 赞同：0
> 
> 时间：2012-08-16T15:41:47.957
> 
> 标签：java, interface, jruby

我正在使用一个包含多个重载函数的 Java API

`class Someclass ...`

`public static A fun(AInterface,java.lang.String[],java.lang.String[],double[][])`

`public static A fun(AInterface,java.lang.String[],java.lang.String[],java.lang.String[][])`

伪代码 b/c 我面前没有代码。现在，我试图从 jruby 调用这个函数。我的调用代码如下所示：

`Someclass::fun(@b, ["foo"], ["bar"], [["baz"], ["qux"]])`

`@b`是`A`;的一个实例 `A`实现`AInterface`接口。

然而我得到

`NameError: no method 'fun' for arguments (my.thing.A,org.jruby.RubyArray,org.jruby.RubyArray,org.jruby.RubyObject) on Java::mything::A available overloads: (my.thing.AInterface,java.lang.String[],java.lang.String[],double[][]) (my.thing.AInterface,java.lang.String[],java.lang.String[],java.lang.String[][]) ...`

将调用代码更改为：

`Someclass::fun(@b, [["foo"]].to_java(java.lang.String[]), [["bar"]].to_java(java.lang.String[]), [["baz"], ["qux"]].to_java(java.lang.String[][]))`

没有帮助。

# google-bigquery - 有没有办法从 URL 上传到 CloudStorage？

> ID：11990839
> 
> 赞同：1
> 
> 时间：2012-08-16T15:41:54.393
> 
> 标签：google-bigquery, google-cloud-storage

有一个指向压缩 CSV 文件的公共 URL。

（实际上大约 100 个 URL，每个 zip 文件大约 250MB 和 1.6GB 未压缩）

我希望这些数据在 CloudStorage 中，这样我就可以在 BigQuery 中处理它，但我显然不想将它下载到不同的服务器，只是为了重新上传到 CS。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:51:16.350

Sorry, not possible at this time.

# wordpress - 更改 WordPress URL 结构 - 重定向

> ID：11990842
> 
> 赞同：0
> 
> 时间：2012-08-16T15:42:06.577
> 
> 标签：wordpress, redirect

我正在将我的 URL 结构从 domain.com/postname 更改为 domain.com/type/postname

重定向的最佳方式是什么？我尝试使用重定向插件，但似乎我需要手动重定向每个 URL。有没有办法一次重定向所有帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:59:56.943

使用 domain.com/wp-admin 转到 wp-admin 的仪表板。然后查找“设置”->“永久链接”选项。在此页面中，您可以更改所有帖子的 URL 设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:03:07.833

以下是有关如何重定向您的网站 url 的一些说明。 [更改网站网址](http://codex.wordpress.org/Changing_The_Site_URL)

如果仍然可以，请先备份您的网站？当我更改为漂亮的永久链接时，我必须在自定义字段图像中包含一个正斜杠。

```
from:  wp-content/uploads/2012/08/tulip-813-01.jpg

to:    /wp-content/uploads/2012/08/tulip-813-01.jpg 
```

# python - 为什么 __del__ 不能正常工作

> ID：11990843
> 
> 赞同：2
> 
> 时间：2012-08-16T15:42:07.907
> 
> 标签：python, class

我认为这是面试中最常见的问题：

```
class A:
     def __init__(self, name):
          self.name = name
     def __del__(self):
          print self.name,

aa = [A(str(i)) for i in range(3)]
for a in aa:
    del a 
```

那么这段代码的输出是什么以及为什么。输出将是什么，为什么？那是因为 a 是列表中对象的引用，然后我们调用 del 方法我们删除了这个引用而不是对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T15:44:39.927

至少有 2 个对所引用对象的`a`引用（变量是对对象的*引用*，它们不是对象本身）。列表中有一个引用，然后是引用“ `a`”。当 you 时`del a`，您删除了一个引用（变量`a`），而不是列表中的引用。

另请注意，Python 不保证`__del__`会被调用...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T15:45:59.210

`__del__`当一个对象被销毁时被调用；这将在从程序的可访问内存中删除对对象的最后可能引用之后发生。根据实施情况，这可能会立即发生，也可能会在一段时间后发生。

`a`您的代码只是从执行范围中删除本地名称；该对象保留在列表中，因此仍然可以访问。`del aa[0]`例如，尝试写作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T16:04:54.217

从文档：

> 注意 del x 不直接调用`x.__del__()`——前者将 x 的引用计数减一，而后者仅在 x 的引用计数达到零时调用。

`__del__`当垃圾收集器发现要销毁的对象时触发。垃圾收集器将尝试销毁引用计数为 0 的对象。 `del`只需解耦本地命名空间中的标签，从而减少解释器中对象的引用计数。垃圾收集器的行为在很大程度上被认为是解释器的实现细节，因此不能保证`__del__`on 对象会以任何特定的顺序被调用，甚至根本不被调用。这就是为什么这段代码的行为是未定义的。

# .net - 迭代 WPF 数据网格行并访问包含控件？

> ID：11990844
> 
> 赞同：0
> 
> 时间：2012-08-16T15:42:11.540
> 
> 标签：.net, wpf, xaml, datagrid

我想更改某些单元格的颜色并访问不同单元格的按钮。

我想在调用数据网格的 Loaded 事件时执行此操作。

当前数据网格：

```
<DataGrid SelectionUnit="FullRow" SelectionMode="Single" AutoGenerateColumns="False" Height="468" HorizontalAlignment="Left" Margin="12,0,0,238" Name="LockDataGrid" VerticalAlignment="Bottom" Width="554" LoadingRow="LockDataGrid_LoadingRow" CanUserAddRows="False">
    <DataGrid.Columns>
        <DataGridTextColumn IsReadOnly="True" Header="Name" Width="200" Binding="{Binding Name}"></DataGridTextColumn>
        <DataGridTextColumn IsReadOnly="True" Header="ModuleLock" Binding="{Binding ModuleLock}"></DataGridTextColumn>
        <DataGridTextColumn IsReadOnly="True" Header="StringLock" Binding="{Binding StringLock}"></DataGridTextColumn>
        <DataGridTemplateColumn>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Button>Lock module string</Button>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <DataGridTemplateColumn>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Button>Lock strings</Button>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

加载方法：

```
 private void LockDataGrid_Loaded(object sender, RoutedEventArgs e)
    {
        DataGrid grid = (DataGrid)sender;
    } 
```

如何迭代行和单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:01:33.957

我要直截了当地说，您可能不想走视觉树来实现您的目标（特别是如果它只对按钮/设置单元格颜色做某事）......

当用户滚动数据网格时，行上的控件将进出存在，这意味着您需要不断监视和更新它（对于少量行，这可能不会发生，但它应该表明这是'这不是处理事情的好方法，但如果你真的需要走那条路，LPL 已经链接到了一个相关的答案）。

为了在单击按钮时执行某些操作，您需要在这些按钮上设置命令并将它们绑定到您的数据模型中；此页面是一个教程应用程序，它描述并展示了如何绑定命令[MSDN: WPF Apps With The Model-View-ViewModel Design Pattern](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

然后，您可以使用具有绑定或数据触发器的样式来更改单元格的背景颜色（以及许多其他内容）。我拼凑了一个快速示例来展示这一点（虽然我没有在这个小示例中使用命令绑定，但我强烈建议这样做）。

首先，您将 xaml 修改为具有背景颜色绑定，并在 ModuleLock 的按钮单击时触发功能。

```
 <DataGrid SelectionUnit="FullRow" SelectionMode="Single" AutoGenerateColumns="False"   Name="LockDataGrid"  CanUserAddRows="False">
        <DataGrid.Columns>
            <DataGridTextColumn IsReadOnly="True" Header="Name" Width="200" Binding="{Binding Name}">
                <DataGridTextColumn.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="Background" Value="{Binding CellColor}" />
                    </Style>
                </DataGridTextColumn.CellStyle>
            </DataGridTextColumn>
            <DataGridTextColumn IsReadOnly="True" Header="ModuleLock" Binding="{Binding ModuleLock}"></DataGridTextColumn>
            <DataGridTextColumn IsReadOnly="True" Header="StringLock" Binding="{Binding StringLock}"></DataGridTextColumn>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Click="Button_Click">Lock module string</Button>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button>Lock strings</Button>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

接下来是后面代码中的按钮单击处理程序，在此示例中，我只是将行数据的 CellColor 属性设置为红色。如上所述，可以为按钮设置一个命令，该命令可以配置为更加相关（例如，命令参数可以设置为 DataContext，默认情况下将是该行的数据）。

```
 private void Button_Click(object sender, RoutedEventArgs e)
    {
        var lockModuleButton = sender as Button;
        if (lockModuleButton == null)
        {
            return;
        }

        var theRowData = lockModuleButton.DataContext as Class1;
        if (theRowData == null)
        {
            return;
        }

        theRowData.CellColor = "Red";

    } 
```

最后一个重要部分 - 数据类（我在其中创建了 CellColor 属性）将需要通知属性更改，以便绑定更新[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)（另请注意，我只是费心设置 CellColor 以在绑定更改时更新绑定):

```
using System.ComponentModel;
namespace WpfApplication7
{
class Class1 : INotifyPropertyChanged
{
    private string cellColor;

    public string CellColor
    {
        get
        {
            return cellColor;
        }
        set
        {
            cellColor = value;
            OnPropertyChanged("CellColor");
        }
    }

    public bool ModuleLock { get; set; }
    public bool StringLock { get; set; }
    public string Name { get; set; }

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged.Invoke(this, new PropertyChangedEventArgs(propName));
        }
    }
}
} 
```

这是窗口打开事件中的快速代码，用于虚拟化一些数据并设置 DataGrid 的数据上下文：

```
 public MainWindow()
    {
        InitializeComponent();

        List<Class1> MyList = new List<Class1>();

        MyList.Add(new Class1());
        MyList.Add(new Class1());
        MyList.Add(new Class1());
        MyList.Add(new Class1());
        MyList.Add(new Class1());
        MyList.Add(new Class1());

        LockDataGrid.ItemsSource = MyList;

    } 
```

**编辑：**在构建它时，我发现您要解决的实际问题是在按下按钮时锁定对这些字符串字段的访问（如果是这种情况，可能值得更新您的问题以反映这一点，如果因此，如果它满足您的需求或沿着正确的轨道，我会细化这个答案）。

不幸的是，DataGrid 似乎不是为此而设计的（无论如何我都可以看到） - 但是可以通过使用 DataGridTemplateColumn 来完成，该列具有以下内容：

```
 <DataGridTemplateColumn Header="ModuleLock">

                <DataGridTemplateColumn.CellStyle>
                    <Style TargetType="{x:Type DataGridCell}">
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="IsEditing" Value="True" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGridTemplateColumn.CellStyle>

                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Background="{Binding CellColor}" Text="{Binding ModuleLock}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>

                <DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <TextBox Background="{Binding CellColor}" BorderThickness="0" IsReadOnly="{Binding ModuleLockFlag}" Text="{Binding ModuleLock}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellEditingTemplate>

            </DataGridTemplateColumn> 
```

样式（LPL 会[识别它](https://stackoverflow.com/questions/10428636/how-do-i-stop-a-wpf-datagridtemplatecolumn-from-exiting-edit-mode)；）之所以存在，是因为鼠标有奇怪的聚焦行为；不幸的是，你会想要一些其他的东西来使用标签聚焦，可以在[这里](https://stackoverflow.com/questions/746069/wpf-datagrid-datagridtemplatecolumn-tab-focus-issue)找到一些奇怪的行为：

# php - PHP中的日期偏移量

> ID：11990845
> 
> 赞同：0
> 
> 时间：2012-08-16T15:42:12.117
> 
> 标签：php, date

我正在做我自己的日历。为了更改为下个月和上个月，我使用此功能：

```
date('m',"-1 months");
date('m',"+1 months"); 
```

但是，当我去下个月时，我不能再使用它了，因为**-1**和**+1**总是取自`now()`.

假设我不能对那个偏移量使用动态数字，我的意思是

```
date('m',"$x months"); 
```

如何在特定日期添加或减去 1 个月？

比如这个日期...

```
$date_today = strtotime($_GET['date']);
$next_month = $date_today +/- 1 month ?!?!??! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:44:40.850

```
$next_month = strtotime('+1 month',$date_today); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T15:44:25.410

使用`strtotime`...

```
$next_month = strtotime("+1 month"); 
```

将为您提供一个 unix 时间戳，您可以将其传递给`date`...

```
echo date("m", $next_month); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T15:48:00.117

我目前为具有相同问题的多个站点运行日历。我最终将当前可查看的月份存储为变量，或者当有人单击下个月或上个月时`$_SESSION`将其作为对象传递。`$_POST`

当你在 next 或 prev 第二次被击中时调用它（或第一次）会是这样的

```
if(!isset($_SESSION['viewablemonth']) && $_SESSION['viewablemonth'] = '') {
    $_SESSION['viewablemonth'] = date("m.d.Y");
} 
```

结束然后做你的月份加法或减法：

```
$_SESSION['viewablemonth'] = strtotime("+1 month", $_SESSION['viewablemonth']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T15:45:08.260

您可以将 strtotimes 与参考日期混合，这样：

```
$next_month=strtotime("+1 month");  // assumes today
$following_month=strtotime("+1 month", $next_month); 
```

[http://uk.php.net/manual/en/function.strtotime.php](http://uk.php.net/manual/en/function.strtotime.php) 采用两个参数并假设第二个参数是 time() 如果省略则为当前时间戳

# c# - c# XML 和 LINQ

> ID：11990846
> 
> 赞同：1
> 
> 时间：2012-08-16T15:42:13.423
> 
> 标签：c#, xml, linq

我有一个看起来像这样的 XML 文档：

```
<people>
  <person>
    <name>mike</name>
    <address>1 main st</address>
    <jobTitle>SE</jobTitme>
       <children>
           <name>mary</name>
           <age>5</age>
       </childres> 
  </person>
  <person>
    <name>john</name>
    <address>2 main st</address>
    <jobTitle>SE</jobTitme>
  </person>
</people>` 
```

所以不是所有的人块和孩子块。很简单。当我通过 C# 向 XML 添加一个新人时，我正在编写一个函数，该函数接受一个人对象并且该人对象具有一组子对象（可能是 0 个或更多）。我在该函数中编写 linq 时遇到问题。我可以很容易地添加一个人对象，但有条件地添加 1 个或多个孩子很难。这是我到目前为止所拥有的：

```
 doc.Element("People").Add(
            new XElement("Person", 
                new XElement("Name", person.name),
                new XElement("Address", person.address),
                new XElement("jobTitle", person.jobTitle))) 
```

如果孩子存在，我如何有条件地添加孩子？

`public class person { public List<Child> childList; public string name; public string address; public string jobTitle }`

`public class child { public string name; public int age; }`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:44:19.827

> 如果孩子存在，我如何有条件地添加孩子？

三个选项：

*   在调用中使用`null`参数`XElement`；这将被忽略
*   传入一个空的子序列；再次，这将无关紧要
*   构建元素的其余部分，然后有条件地调用`Add`。

如果不查看您的`Person`类型的代码，很难给出更具体的建议。

（顺便说一句，看起来你的元素实际上应该是`child`而不是子元素，假设每个子元素都有一个元素......）

编辑：现在我们可以看到您的代码，看起来您只是想要：

```
doc.Element("People").Add(
        new XElement("Person", 
            new XElement("Name", person.name),
            new XElement("jobTitle", job.title),
            person.children.Select(c => new XElement("children",
                new XElement("Name", c.name),
                new XElement("Age", c.age))))); 
```

请注意，当涉及到元素名称时，您目前的大小写非常不一致，而且像这样公开公共字段也是一个坏主意。

# c - 如何将参数传递给由 C 程序创建的可执行文件？

> ID：11990848
> 
> 赞同：3
> 
> 时间：2012-08-16T15:42:16.440
> 
> 标签：c, command-line-arguments, executable

命令行参数？如何从 DOS 执行 exe 并传递参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:36:42.087

如果你在问

> 如何从 DOS 执行 exe 并传递参数？

然后

*   打开命令提示符
*   `cd`使用命令导航到 C 生成的可执行文件所在的目录
*   在提示符下写下可执行文件的名称，假设 abc.exe 后跟空格分隔的参数，
    例如：-

    `abc.exe Param1 Param2 Param3`

*   按回车

> 如果你想从 C 执行

然后关注[cnicutar](https://stackoverflow.com/users/714501/cnicutar)

# google-maps - 类似于游戏引擎的东西，但适用于简单的应用程序

> ID：11990850
> 
> 赞同：0
> 
> 时间：2012-08-16T15:42:22.897
> 
> 标签：google-maps, game-engine

是否有任何不适合游戏的引擎让您使用按钮和文本以及 Google 地图位置等创建应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T20:59:34.687

是的，实际上有：

[https://codiqa.com](https://codiqa.com/)

您可以在那里构建可以在两个系统上运行的 jQuery Mobile 应用程序。它基本上是一个网络应用程序，但它可以满足您的需求。

您可以在那里使用谷歌地图并创建基于位置的应用程序。

# python - Django：将 NullBooleanField 显示为 Radio，默认为 None

> ID：11990852
> 
> 赞同：4
> 
> 时间：2012-08-16T15:42:27.643
> 
> 标签：python, django, forms, form-fields

我`NullBooleanField`以多种方式成功实现为单选按钮，但问题是我无法将默认值设置为无。

这是代码：

```
models.py:
class ClinicalData(models.Model):
      approved = models.NullBooleanField()
      ...

forms.py:
NA_YES_NO = ((None, 'N/A'), (True, 'Yes'), (False, 'No'))
class ClinicalDataForm(ModelForm):
      approved = forms.BooleanField(widget=forms.RadioSelect(choices=NA_YES_NO))
      class Meta:
           model = ClinicalData 
```

我尝试了以下方法：`default:None`在模型中设置和/或在表单中设置`inital:None`以及在表单实例中的视图中。
这些都没有成功。我目前使用`CharField`而不是`NullBooleanField`.
但是有什么方法可以得到这个结果`NullBooleanField`？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-15T08:47:51.793

我知道这已经回答了一段时间，但我也试图解决这个问题并遇到了这个问题。

在尝试了 emyler 的解决方案之后，它似乎有效，但是当我查看表单时`self.cleaned_data`，我看到我得到的值都是`True`or `None`，没有`False`记录任何值。

我查看了 Django 代码，发现虽然正常的 NullBooleanField 选择确实分别映射`None`, `True`, `False`to `1`, `2`,`3`但 RadioSelect 映射`1`到`True`, `0`to`False`和任何其他值`None`

这就是我最终使用的：

```
my_radio_select = forms.NullBooleanField(
    required=False,
    widget=widgets.RadioSelect(choices=[(1, 'Yes'), (0, 'No'), (2, 'N/A')]),
    initial=2,  # Set initial to 'N/A'
) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T18:32:57.150

出于某种奇怪的原因——我没有在 Django 代码中检查它——一旦你为 NullBooleanField 提供了一个自定义小部件，它就不再接受你期望的值（`None`或`True`）`False`。

`1`通过分析内置的选择属性，我发现这些值分别等于`2`和`3`。

因此，这是我坚持使用默认为“未知”的单选按钮的快速而肮脏的解决方案：

```
class ClinicalDataForm(forms.ModelForm):
    class Meta:
        model = ClinicalData

    def __init__(self, *args, **kwargs):
        super(ClinicalDataForm, self).__init__(*args, **kwargs)
        approved = self.fields['approved']
        approved.widget = forms.RadioSelect(
            choices=approved.widget.choices)
        approved.initial = '1' 
```

它看起来不太好，除非非常必要，否则我不会使用它。但它就在那里，以防万一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-06T20:18:13.257

对我来说，在 Django 1.7 中，默认情况下没有选择 None 值（尽管 Craig 声称）。我对 RadioSelect 进行了子类化，它对我的​​情况有所帮助：

```
from django.forms.widgets import RadioSelect
from django.utils.translation import ugettext_lazy

class NullBooleanRadioSelect(RadioSelect):
    def __init__(self, *args, **kwargs):
        choices = (
            (None, ugettext_lazy('Unknown')),
            (True, ugettext_lazy('Yes')),
            (False, ugettext_lazy('No'))
        )
        super(NullBooleanRadioSelect, self).__init__(choices=choices, *args, **kwargs)

    _empty_value = None 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-01T12:48:04.357

对于它的价值，这里给出的其他答案不再适用于 Django 1.7。设置`choices`为`[(True, "Yes"), (False, "No"), (None, "N/A")]`工作正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-18T01:39:20.813

我已经用 Django 2.2 实现了这一点。

您应该能够使用和小部件`None`检查单选选项。诀窍是将选择值设置为空字符串。`ChoiceField``RadioSelect``None``''`

我使用的模型字段`BooleanField`与`null=True`模型字段基本相同`NullBooleanField`。

```
approved = forms.ChoiceField(
    choices=[(True, 'Yes'), (False, 'No'), ('', 'N/A')],
    widget=forms.RadioSelect,
    required=False,
) 
```

# flash - 强制使用旧的 Flash 播放器版本

> ID：11990854
> 
> 赞同：1
> 
> 时间：2012-08-16T15:42:29.417
> 
> 标签：flash

首先，我想说我根本不是 Flash 开发人员。我对此了解不多。但是我有一个 *swf 文件的问题。它适用于 Flash 播放器 10.3.183.11，但不再适用于 11.2.202.235。我们如何强制用户使用旧的 Flash 版本来播放 .swf？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:49:00.263

没门。只有一个 Flash 播放器实例可以一次在浏览器上运行。您是否尝试在调试播放器下运行您的 swf 文件？我认为这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:37:09.687

您可以在 google chrome 中运行多个版本的 flash 并使用 chrome://plugins/ 您可以启用和禁用不同的版本，因此“使用你喜欢做你想做的事情'假设它受支持”

# asp.net - RedirectFromLoginPage 忽略 ReturnUrl

> ID：11990855
> 
> 赞同：0
> 
> 时间：2012-08-16T15:42:33.813
> 
> 标签：asp.net, authentication, forms-authentication

好的，我必须在这里遗漏一些明显的东西，但在任何地方都找不到答案。

我在本地机器上的 .Net 4 中使用 FormsAuthentication。当我尝试访问安全页面时，.Net 将我重定向到 login.aspx 并在查询字符串中附加 ReturnUrl。例如 /pages/security/login.aspx?ReturnUrl=%2fPages%2fFriends.aspx

当我使用正确的详细信息登录时，我不会被重定向到 ReturnUrl - 相反，我会被重定向到 web.config defaultUrl 参数中的任何内容。

我的 web.config 看起来像这样：

```
<authentication mode="Forms">
        <forms loginUrl="/pages/security/login.aspx" defaultUrl="/default.aspx" timeout="129600" />
    </authentication> 
```

这是重定向行：

```
FormsAuthentication.RedirectFromLoginPage(userID.ToString(), rememberMe); 
```

我在 web.config 中放入 defaultUrl 的内容就是我被重定向到的内容。事实上，这也是我检查时 FormsAuthenticaton.GetRedirectUrl 中的值。.Net 似乎忽略了 ReturnUrl，但我想不出为什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:20:05.213

好的，这是我的一个愚蠢的疏忽，但我想我会与您分享“解决方案”，因为它可能会帮助其他遇到这些症状的人。

查询字符串被剥离的原因是我的母版页中有一行将表单操作转换为小写，作为避免搜索引擎重复 URL 的一部分。该行正在更新表单操作，但没有附加查询字符串。

因此，如果您在回发时丢失了查询字符串值，请检查以确保表单标记中的操作值包含该查询字符串。

# android - 在 Android 2.3.x 上使用 SDP 获取具有特定 UUID 的设备

> ID：11990856
> 
> 赞同：2
> 
> 时间：2012-08-16T15:42:34.267
> 
> 标签：android, bluetooth, uuid, sdp

给定蓝牙 SDP 中使用的 UUID，运行发现查询以了解使用相同 UUID 而不与它们连接的蓝牙设备。我想要一个适用于 Android 2.3.x 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:38:10.377

该`fetchUuidsWithSdp()`API 允许您查看远程设备支持哪些 UUID。 [http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#fetchUuidsWithSdp](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#fetchUuidsWithSdp)

# maven - Maven：将 install-file 目标与 altDeploymentRepository 一起使用

> ID：11990859
> 
> 赞同：0
> 
> 时间：2012-08-16T15:42:52.443
> 
> 标签：maven, maven-2, repository, maven-3, maven-install-plugin

这里只是一个简单的问题。

我试过了：

```
mvn install:install-file 
-DaltDeploymentRepository=../releases 
-Dfile=gcm-server.jar
-Dsources=gcm-server-sources.jar
-DgroupId=com.google.android.gcm
-DartifactId=gcm-server
-Dversion=1.0.2
-DpomFile=gcm.pom
-Dpackaging=jar
-DcreateChecksum=true 
```

但我得到以下信息：

```
[INFO] --- maven-install-plugin:2.3.1:install-file (default-cli) @ standalone-pom ---
[INFO] Installing /home/sebastien/Bureau/gcm-server-repository/deployer/gcm-server.jar to /home/sebastien/.m2/repository/com/google/android/gcm/gcm-server/1.0.2/gcm-server-1.0.2.jar
[INFO] Installing /home/sebastien/Bureau/gcm-server-repository/deployer/gcm.pom to /home/sebastien/.m2/repository/com/google/android/gcm/gcm-server/1.0.2/gcm-server-1.0.2.pom
[INFO] Installing /home/sebastien/Bureau/gcm-server-repository/deployer/gcm-server-sources.jar to /home/sebastien/.m2/repository/com/google/android/gcm/gcm-server/1.0.2/gcm-server-1.0.2-sources.jar 
```

有没有办法将文件安装到另一个本地 Maven 存储库？我已经检查过，`install:install-file`但它没有提到将文件安装到备用存储库。是否有可能，或者我需要自己将文件从一个存储库移动到另一个存储库？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:29:37.623

Just add `-Dmaven.repo.local=path-to-alternate-repo`

e.g.

```
-Dmaven.repo.local=/tmp/myrepo 
```

# cassandra - FluentCassandra / Cassandra 会丢失我的数据吗？

> ID：11990861
> 
> 赞同：0
> 
> 时间：2012-08-16T15:43:06.637
> 
> 标签：cassandra, fluentcassandra

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using FluentCassandra;

namespace ConsoleApplication2
{
        class Program
        {
                static void Main(string[] args)
                {
                        var session = new CassandraSession("Tester", "localhost");

                        CreateData(session);
                        SelectData(session);
                        Console.WriteLine("Done");
                        Console.ReadLine();
                }

                private static void SelectData(CassandraSession session)
                {
                        using (var db = new CassandraContext(session))
                        {
                                var users = db.GetColumnFamily("Users2");
                                var count = users.AsObjectQueryable<User>().Count();
                                Console.WriteLine("Counted: " + count.ToString());
                        }
                }

                private static void CreateData(CassandraSession session)
                {
                        var startTime = DateTime.UtcNow;
                        for (int index = 0; index < 11 * 1000; index++)
                        {
                                using (var db = new CassandraContext(session))
                                {
                                        var users = db.GetColumnFamily("Users2");
                                        dynamic user = users.CreateRecord(index);
                                        user.Name = "UserX" + index.ToString();
                                        user.Password = "PasswordX" + index.ToString();
                                        db.Attach(user);
                                        db.SaveChanges();
                                        if (index % 1000 == 0)
                                        {
                                                var taken = DateTime.UtcNow - startTime;
                                                Console.WriteLine(string.Format("{0} thousand in {1} seconds", (index / 1000) + 1, taken.TotalSeconds));
                                        }
                                }
                        }
                }
        }

        class User
        {
                public string Name { get; set; }
                public string Text { get; set; }
        }
} 
```

这个应用程序的输出是

```
1 thousand in 0.2760158 seconds
2 thousand in 0.8180468 seconds
3 thousand in 1.3700784 seconds
4 thousand in 1.8971085 seconds
5 thousand in 2.4091378 seconds
6 thousand in 3.0791761 seconds
7 thousand in 3.6002059 seconds
8 thousand in 4.126236 seconds
9 thousand in 4.8292762 seconds
10 thousand in 5.3513061 seconds
11 thousand in 5.8543349 seconds
Counted: 9018
Done 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-25T03:01:34.093

这段代码无法正常工作，我应该知道，我是 FluentCassandra 的开发人员。

```
 using (var db = new CassandraContext(session))
         {
              var users = db.GetColumnFamily("Users2");
              var count = users.AsObjectQueryable<User>().Count();
              Console.WriteLine("Counted: " + count.ToString());
         } 
```

您正在使用 LINQ 进行计数，但尚未在 LINQ 支持中实现 Count。目前在 Cassandra 中没有一个很好的方法来计算记录。最好的方法是启动 CQL 语句并运行

```
SELECT count(*) FROM <COLUMN FAMILY> 
```

希望这可以帮助。我不知道您从该 Count 方法中获得了什么价值，但它肯定不是有意的。

# asp.net - 限制对网络服务的访问，因此只有我的应用程序可以使用它

> ID：11990862
> 
> 赞同：0
> 
> 时间：2012-08-16T15:43:08.603
> 
> 标签：asp.net, asp.net-mvc-3, web-services

我有一个系统，它将每 X 秒更新一些关于用户通知的 UI 细节（就像 StackOverflow 的通知、gmail 收件箱等）。我计划有一个网络服务来检查新的通知并让它每 X 秒调用一次。事实是：我不想把它公开给所有人，我想让它只能被我的系统访问，所以它是唯一能够使用它的人。

有没有办法做到这一点？不需要使用 WebService，如果您有其他方法，我想听听。

我的系统是使用 ASP.NET 4.0 和 Microsoft 的 MVC 框架构建的。我可以要求采取行动吗？

我的问题与此类似：[如何保护 ASP.NET Web 服务以仅允许相对路径调用？](https://stackoverflow.com/questions/2866653/how-do-i-secure-asp-net-web-service-to-only-allow-relative-path-calling)

但据我了解的答案，他提出可以将webservice变成系统内部的普通类方法，外部无法访问。这对我不起作用，因为我想从客户端访问它。

谢谢，奥斯卡

ps：更改基础架构配置（例如：将其托管在内部服务器中）将很难做到......

编辑：我想用这个网络服务实现的是更新通知号码。这应该在不刷新页面的情况下完成，因此我考虑与服务器验证是否有任何通知，如果有，更新 UI。

Edit2：我可以在我的系统中用普通方法转换这个webmethod，那没问题。然后问题将变为**如何将客户端连接到此方法？**也许使用javascript调用一个动作，然后在这个动作中调用该方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:21:27.587

将此 WebService 部署在不同的网站上，然后[将此站点配置](http://technet.microsoft.com/en-us/library/cc733090%28WS.10%29.aspx)为只能从 IP 访问：`127.0.0.1`。另请查看[此博客文章](http://fusiongrokker.com/post/locking-down-website-access-by-ip-in-iis7)- 您可以安装`IP Security`然后：

> 最后，要创建限制，请打开 IIS 管理器并选择要限制的网站。打开 IP 地址和域限制模块，然后在操作面板（右侧）中选择编辑功能设置...。如果只允许本地浏览，您应该默认拒绝。从下拉列表中选择拒绝，然后点击确定。然后添加您的例外——您要允许访问的 IP 或范围。为此，请从操作面板中选择添加允许条目...，然后添加您需要的所有例外。

现在，只有在同一 Web 服务器上运行的应用程序才能访问此 Web 服务。

# delphi - 通过Delphi调试OCX

> ID：11990863
> 
> 赞同：2
> 
> 时间：2012-08-16T15:43:15.297
> 
> 标签：delphi, debugging, ocx

您好，我有一个输出文件扩展名为 ABC.ocx 的 delphi 应用程序。现在这个 ABC.ocx 用于将一些数据从服务器机器复制到本地机器。这个 ABC.ocx 是从另一个应用程序/dll 调用的。有没有办法调试这个？当我单击另一个执行 ABC.ocx 的应用程序/dll 时，如何在 delphi 中设置断点。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:56:10.453

您需要将调用应用程序设置为主机应用程序。

另一个陷阱是 ocx 可能在加载之前被复制到另一个位置，在这种情况下，您也应该将项目的输出路径设置为该位置。

此处详细说明了所需的步骤： [http ://www.drbob42.com/activex/debugx.htm](http://www.drbob42.com/activex/debugx.htm)

# ruby-on-rails - option_groups_from_collection_for_select 在单个表中

> ID：11990864
> 
> 赞同：0
> 
> 时间：2012-08-16T15:43:36.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我需要对选项标签进行分组，但组和值在同一个表中。假设我有模型“Person”，方法是 :age 和 :name，我想按年龄分组并列出相应年龄的所有名称。这将是这样的：

```
option_groups_from_collection_for_select(@people, :name, :age, :id, :name, 1) 
```

显然这不起作用，因为 :name 是单个值。有简单的解决方案吗？也许通过为 Person 创建一个方法“:names”，但我如何将连接设置为:age？

-Bump（没人知道？也许我可以用所有这些组和选项构建一个字符串？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:59:41.683

我认为您缺少[此处](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-option_groups_from_collection_for_select)显示的方法的`group_label_method`参数。`option_groups_from_collection_for_select`

尝试：

```
option_groups_from_collection_for_select(@people, :name, :name, :age, :id, :name, 1) 
```

# php - 检查用户以前是否在另一个网页上？

> ID：11990871
> 
> 赞同：3
> 
> 时间：2012-08-16T15:43:56.800
> 
> 标签：php, webpage

嗨，我想知道当用户访问我的一个网页时如何说“page.html”，我想检查他们在访问“page.html”之前访问的最后一页是否是“google.com”（或任何其他网站）。有没有办法做到这一点，或者我必须控制他们来自的另一个网页才能监控这个？如果可能的话，我认为这可以在 php 中完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T15:46:45.623

您正在寻找在 PHP 中使用的 HTTP Referer 值`$_SERVER['HTTP_REFERER']`。请注意，这是一个完全由客户端浏览器自愿提供的任意值，因此不能保证它是正确的或可信的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T15:46:39.913

使用 PHPs`$_SERVER`变量获取页面的引荐来源网址。 [http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

```
$_SERVER['HTTP_REFERER']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T15:47:13.927

查看您想要的[$_SERVER 文档](http://php.net/manual/en/reserved.variables.server.php)`$_SERVER['HTTP_REFERER']`， 但请注意它并不总是会被设置，它取决于用户代理。

# java - 在 jenkins 上将 windows 7 slave 连接到 debian master 的问题

> ID：11990875
> 
> 赞同：5
> 
> 时间：2012-08-16T15:44:12.790
> 
> 标签：java, selenium, jenkins, webdriver, debian

我正在尝试将 Windows 从站连接到 jenkins 上的 linux 主站，但我总是看到下面的错误。我已经尝试了下面链接提到的所有内容，但我仍然看到同样的错误。

> ```
> ERROR: Access is denied. See http://wiki.jenkins-ci.org/display/JENKINS/Windows+slaves+fail+to+start+via+DCOM for more information about how to resolve this.
> org.jinterop.dcom.common.JIException: Message not found for errorCode: 0x00000005   
>     at org.jinterop.dcom.core.JIComServer.init(JIComServer.java:542)    
>     at org.jinterop.dcom.core.JIComServer.initialise(JIComServer.java:458)
>     at org.jinterop.dcom.core.JIComServer.<init>(JIComServer.java:427)
>     at org.jvnet.hudson.wmi.WMI.connect(WMI.java:59)    
>     at hudson.os.windows.ManagedWindowsServiceLauncher.launch(ManagedWindowsServiceLauncher.java:225)
>     at hudson.slaves.SlaveComputer$1.call(SlaveComputer.java:200)   
>     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)   
>     at java.util.concurrent.FutureTask.run(FutureTask.java:138)     
>     at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
>     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
>     at java.lang.Thread.run(Thread.java:662) 
> Caused by: rpc.FaultException: Received fault. (unknown)    
>     at rpc.ConnectionOrientedEndpoint.call(ConnectionOrientedEndpoint.java:142)
>     at rpc.Stub.call(Stub.java:112)     
>     at org.jinterop.dcom.core.JIComServer.init(JIComServer.java:538)    
>     ... 10 more 
> ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T14:11:15.467

1.  以“管理员”身份启动“regedit.exe”
2.  找到以下注册表项：'HKEY_CLASSES_ROOT\CLSID{76A64158-CB41-11D1-8B02-00600806D9B6}'
3.  右键单击并选择“权限”
4.  按“高级”
5.  双击管理员
6.  允许完全控制
7.  重启远程注册表服务

**更新：**正如**@Kobi**在评论中提到的，

> 如果您无法更改权限，则需要先在“高级 > 所有者”下[更改此注册表路径的所有者。](https://answers.microsoft.com/en-us/windows/forum/windows_7-update/access-denied-setting-owner-andor-permissions-on/71cdd66a-75ce-4e79-bace-89637e0dacae?auth=1)

可以在[此处](http://www.askvg.com/guide-how-to-take-ownership-permission-of-a-registry-key-in-windows/)找到有关更改所有权的分步说明。

# iphone - 自定义视图滞后的 UIView 动画

> ID：11990882
> 
> 赞同：0
> 
> 时间：2012-08-16T15:44:30.903
> 
> 标签：iphone, performance, uiview, core-graphics, uiviewanimation

我创建了一个 UIView 子类，并使用 UIBezierpath 绘制圆角矩形并用一些渐变填充它。

简而言之，这是子类 draw rect 的样子：

```
CGRect frame1 = //size of Frame 1

CGRect frame2 = //size of Frame 2

//gradientingStart
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

if (options == false) {
    self.color = [self createRandomColor];
}

NSArray *gradientColors = [NSArray arrayWithObjects:
                           (id)[UIColor colorWithHue:color saturation:saturationVal brightness:brightnessVal alpha:1].CGColor,
                           (id)[UIColor colorWithHue:color+0.04 saturation:saturationVal+0.15 brightness:brightnessVal-0.15 alpha:1].CGColor, nil];

CGFloat gradientLocations2[] = {0.25,1};
CGGradientRef gradient2 = CGGradientCreateWithColors(colorSpace, (__bridge CFArrayRef)gradientColors, gradientLocations2);
CGContextSaveGState(context);
//gradientingEnd

UIBezierPath *result =
[UIBezierPath bezierPathWithRoundedRect: frame1 cornerRadius:radius];
[result appendPath:
 [UIBezierPath bezierPathWithRoundedRect: frame2 cornerRadius:radius]];
[result setLineWidth:3];
[[UIColor blackColor]setStroke];
[result stroke];
[result fill];
[result addClip];
CGContextDrawLinearGradient(context, gradient2, CGPointMake(0, 0), CGPointMake(0, self.bounds.size.height), 0);

//important to prevent leaks
CGGradientRelease(gradient2);
CGColorSpaceRelease(colorSpace);
//-------
UIImage *texture = [UIImage imageNamed:@"texture2.png"];
[texture drawInRect:CGRectMake(self.bounds.origin.x, self.bounds.origin.y, self.bounds.size.width, self.bounds.size.height)]; 
```

现在我在我的视图控制器中创建了几个这样的实例，并尝试使用这样的动画来移动它们：

```
[UIView animateWithDuration:0.5 delay:0 options:0 animations:^{
    costumview.alpha = 0;
    [costumview setFrame:CGRectMake(320,0,320,420)];
    [self reorderViewsFrom:costumview.intValue];
    overlay.alpha = 0;
}completion:^(BOOL finished){
}]; 
```

但不幸的是，动画在设备上非常滞后，显示的服装视图越多（5-10），效果就越差。

如何提高性能并提供流畅的动画？我认为改变服装视图不是一种选择，因为这会破坏应用程序的感觉。有没有更快的方法来为服装视图设置动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:41:57.233

您的 drawRect 方法非常激烈。绘制这些渐变和圆角边缘是性能繁重的例程，并且因为您在动画中更改图像的帧，所以您的 drawRect 经常被调用。

我会在你的绘制矩形中添加一个 NSLog，看看当你为自定义视图设置动画时它被调用了多少次。你可能会感到惊讶。

您可以尝试使用：

```
view.layer.shouldRasterize = YES 
```

通过这种方式，您可以在设置动画之前渲染自定义视图的位图。再次为帧更改设置动画后，您应该再次调用 drawRect 并禁用 shouldRasterize。

在此处阅读有关 shouldRasterize 的更多信息：

[https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/shouldRasterize](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/shouldRasterize)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:22:57.547

I pointed out that using some CALayer transformation (rounding corners) causing the lag - unfournately this wasn't in the snippet I posted.

I avoided it by creating the rounded corners with a own uiview subclass. This makes the app a lot smoother. All these rasterization stuff didn't do it for me...

# backbone.js - Underscore.js - Uncaught SyntaxError: Unexpected token ) 同时生成带有变量的模板

> ID：11990884
> 
> 赞同：3
> 
> 时间：2012-08-16T15:44:33.797
> 
> 标签：backbone.js, underscore.js

我正在尝试使用 Underscore.js 学习 Backbone.js 并遇到了麻烦。我使用 Grails 作为服务器框架，所以 Underscore.js 语法 <%= %> 是不可能的。我想将其更改为 {{}} 样式。我的 Javascript 被分隔在许多文件中，每个文件代表我需要的每个对象的视图或模型。这是我的视图的代码：

```
$(function () {

    _.templateSettings = {
        interpolate : /\{\{(.+?)\}\}/g,
        evaluate : /\{!(.+?)!\}/g
    };

    APP = window.APP || {};

    APP.PlaceView = Backbone.View.extend({
        initialize:function () {
            this.render();
        },
        el:"#place-form",
        formTemplate:_.template($('#search-template').html()),
        render:function () {
            //Pass variables in using Underscore.js Template
            var variables = { street:"Ulica" };

            this.$el.html(this.formTemplate({ "street":"Ulica" }));
        }
    });

    var view = new APP.PlaceView();
}); 
```

和模板：

```
<script type="text/template" id="search-template">
    <!-- Access template variables with {{ }} -->
    <label>{{ street }}</label>
    <input type="text" id="search_input"/>
    <input type="button" id="search_button" value="Search"/>
</script> 
```

此代码引发 Uncaught SyntaxError: Unexpected token ) 错误。但是当我删除 _.templateSettings 部分时，一切正常，但我没有变量。

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T16:40:39.043

我相信它因为这条线而显示该错误：

```
<!-- Access template variables with {{ }} --> 
```

Underscore 试图用一个不存在的变量替换它，从而引发错误。

# mysql - 更改mysql的tmp文件夹

> ID：11990887
> 
> 赞同：37
> 
> 时间：2012-08-16T15:44:47.493
> 
> 标签：mysql, tmp

我们的 Mysql 查询使用临时表，在此过程中创建临时文件。当前文件被写入/tmp。mysql写入的临时文件夹的路径究竟如何更改？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-16T16:15:46.493

你应该编辑你的 my.cnf

```
tmpdir = /whatewer/you/want 
```

然后重新启动mysql

PS不要忘记给`/whatewer/you/want`mysql用户写权限

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-05-02T19:48:00.197

这是将 mysqld tmpdir 从 /tmp 移动到 /run/mysqld 的示例，该示例已在 Ubuntu 13.04 上存在并且是 tmpfs（内存/ram）：

```
sudo vim /etc/mysql/conf.d/local.cnf 
```

添加：

```
[mysqld]
tmpdir = /run/mysqld 
```

然后：

```
sudo service mysql restart 
```

核实：

```
SHOW VARIABLES LIKE 'tmpdir'; 
```

==================================================== =================

如果您在 MySQL 重新启动时收到错误，您可能启用了 AppArmor：

```
sudo vim /etc/apparmor.d/local/usr.sbin.mysqld 
```

添加：

```
# Site-specific additions and overrides for usr.sbin.mysqld.
# For more details, please see /etc/apparmor.d/local/README.
/run/mysqld/ r,
/run/mysqld/** rwk, 
```

然后：

```
sudo service apparmor reload 
```

来源： http: [//2bits.com/articles/reduce-your-servers-resource-usage-moving-mysql-temporary-directory-ram-disk.html，https](http://2bits.com/articles/reduce-your-servers-resource-usage-moving-mysql-temporary-directory-ram-disk.html) : [//blogs.oracle.com/jsmyth/entry/ apparmor_and_mysql](https://blogs.oracle.com/jsmyth/entry/apparmor_and_mysql)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-16T15:46:39.163

这在文档中得到了回答：

[MySQL 存储临时文件的位置](http://dev.mysql.com/doc/refman/5.0/en/temporary-files.html)

> 在 Unix 上，MySQL 使用 TMPDIR 环境变量的值作为存储临时文件的目录的路径名。如果没有设置 TMPDIR，MySQL 使用系统默认值，通常是 /tmp、/var/tmp 或 /usr/tmp。
> 
> 在 Windows、Netware 和 OS2 上，MySQL 按顺序检查 TMPDIR、TEMP 和 TMP 环境变量的值。对于找到的第一个设置，MySQL 使用它并且不检查剩余的那些。如果没有设置 TMPDIR、TEMP 或 TMP，MySQL 使用 Windows 系统默认值，通常为 C:\windows\temp。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-20T15:20:01.930

如果您没有 apparmor 或 selinux 问题，但仍然收到错误代码 13：

mysql 必须能够访问完整路径。即所有文件夹都必须是 mysql 可访问的，而不仅仅是您打算指向的文件夹。

例如，您尝试在 mysql 配置中使用它：`tmp = /some/folder/on/disk`

```
# will work, as user root:
mkdir -p /some/folder/on/disk
chown -R mysql:mysql /some

# will not work, also as user root:
mkdir -p /some/folder/on/disk
chown -R mysql:mysql /some/folder/on/disk 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-16T23:14:43.220

**这可能对带有 AppArmor 的 MySql 有帮助**

停止mysql：

```
sudo /etc/init.d/mysql stop 
```

创建名为*/somewhere/tmp的目录*

**编辑配置：**

`sudo vim /etc/mysql/my.cnf` ＃ 也许`sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf`

**改变**

> tmpdir = /某处/tmp/

**然后**

```
sudo vim /etc/apparmor.d/usr.sbin.mysqld 
```

**添加**

```
# Allow data dir access
  /somewhere/ r,
  /somewhere/** rwk, 
```

> sudo chown -R root:root /somewhere

> sudo chmod -R 1777 /某处

重新开始

```
 sudo /etc/init.d/apparmor reload

 sudo /etc/init.d/mysql restart 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-22T16:14:57.357

在 centos 8 上适用于 5.7

```
mkdir /tmp/1 /tmp/1

semanage fcontext -a -t mysqld_db_t "/tmp/1(/.*)?"

restorecon -Rv /tmp/1

semanage fcontext -a -t mysqld_db_t "/tmp/2(/.*)?"

restorecon -Rv /tmp/2

to my.cnf tmpdir=/tmp/1:/tmp/2

sudo service mysql restart 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-13T19:03:04.057

您还可以设置`TMPDIR`环境变量。

在某些情况下（在我的例子中是 Docker），设置环境变量比更新配置文件更方便。

# google-apps-script - 如何在 HtmlService 中使用表单检索多个字段？

> ID：11990891
> 
> 赞同：0
> 
> 时间：2012-08-16T15:44:53.553
> 
> 标签：google-apps-script

情况如下：我有一个由 HtmlService 创建的表单，并且有几个项目具有相同的名称，因为我想在一个数组中检索它们。

这是一个例子：

```
 <html>
  <form method="post" action="address of my published script (or dev address for the test)" > 
    <input type="text" name="field" />
    <input type="text" name="field" />
    <input type="submit" value="Send" />
  </form>
</html> 
```

（好吧，这里好像没什么用，但是当用户可以动态添加同名字段时会很有趣，所以我不知道它们有多少）。

在函数`doPost(e)`中，我希望有`e.parameter.field`equals to `[value1, value2]`。不幸的是，我只有第一个元素。

我在 PHP 中读到我们可以编写`name="field[]"`，但它也不起作用。

你知道这样做的任何解决方案吗？

感谢您的回答！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:56:18.540

e.parameters （注意末尾的 s ）将具有您想要的内容。

# regex - 如何将前面的年份批量移动到文件名的末尾？

> ID：11990893
> 
> 赞同：3
> 
> 时间：2012-08-16T15:44:55.840
> 
> 标签：regex, bash, shell, unix, rename

我有一个文件列表（数千个），如下所示：

```
/path/2010 - filename.txt
/path/2011 - another file name.txt 
```

始终遵循这种模式：`#### - string.txt`

我需要将它们更改为如下所示：

```
/path/filename (2010).txt
/path/another file name (2011).txt 
```

如何使用 bash、shell、终端等快速完成此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T15:53:11.497

试试[`rename`](http://manpages.ubuntu.com/manpages/dapper/man1/prename.1.html)命令：

```
rename -n 's/(.*) - (.*)(\.txt)/$2 ($1)$3/' *.txt 
```

* * *

`-n`(--no-act) 选项用于预览。
删除`-n`以执行替换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T16:01:28.907

未经测试。

```
find /path -name '???? - *.txt' -print0 | while read -d ''; do
    [[ $REPLY =~ (.*)/(....)\ -\ (.*)\.txt$ ]] || continue

    path=${BASH_REMATCH[1]}
    year=${BASH_REMATCH[2]}
    str=${BASH_REMATCH[3]}
    echo mv "$REPLY" "$path/$str ($year).txt"
done 
```

`echo`一旦生成的`mv`命令看起来正确，请删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T16:20:25.873

我知道你没有标记它，`zsh`但你确实说`shell`. 无论如何，这里是如何使用`zmv`函数来做到这一点`zsh`：

```
autoload zmv                      # It's not loaded by default
zmv -nvw '* - *.*' '$2 ($1).$3' 
```

`-n`当您对输出感到满意时删除。

`-v`使`zmv`冗长。`-w`隐式地使每个通配符组成一组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T16:16:06.713

我更愿意将此添加为评论，但我还不允许这样做。

我问了一个类似的问题，并在这里收到了许多有用的答案：

[https://unix.stackexchange.com/questions/37355/recursively-rename-subdirectories-that-match-a-regex](https://unix.stackexchange.com/questions/37355/recursively-rename-subdirectories-that-match-a-regex)

也许其中一种解决方案可以根据您的需要进行调整。

# xcode - 如何阻止 Xcode 认为文件丢失

> ID：11990897
> 
> 赞同：2
> 
> 时间：2012-08-16T15:45:03.843
> 
> 标签：xcode

我从我的项目中删除了一些文件（一对 .m/.h）。但是现在每次我构建 Xcode 时都会警告文件丢失（尽管构建是成功的）。

我看不到 Xcode 认为在哪里/如何认为需要这些文件，它必须在某处对它们有一些引用，但我找不到它——这些文件既没有列在编译源部分，也没有列在复制包资源部分中。它们还可以在哪里列出，这样 Xcode 觉得有必要警告它们实际上不在场？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:46:05.800

要删除它们，试试这个：

*   创建一个名为丢失的文件
*   将此文件复制到您的项目文件夹中，以便 Xcode 识别它
*   在项目视图中右键单击 Xcode 内的文件
*   选择删除
*   当 Xcode 询问时，选择移动到垃圾箱

这对我来说适用于文件，但是我对空文件夹有同样的问题。如果有人知道如何为他们消除丢失的警告，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T12:15:08.383

如果项目导航器或签出中缺少文件，但未包含在当前目标的构建中，则构建可能会成功，尽管有警告。

XCode 的 Project Navigator 跟踪文件、它们所在的目录以及 git 或 svn 中的状态。打开项目时的项目警告显示在窗口顶部的状态视图中。当您按下 command-4 时，您可以查看这些警告。

项目导航器在文件夹视图中将其跟踪但找不到的文件标记为红色（按 command-1 可查看该视图）。如果您看到红色文件名，则可能是您在 XCode 不知道的情况下将它们删除或移动到另一个文件夹中。然后选择红色文件名并将其删除。

最重要的是，这些文件可能“*从您的工作副本中丢失*”，但仍存在于存储库中。您可以在终端中做两件事来同步或从颠覆中删除文件。

1.  svn*文件*
2.  svn rm --force*文件*

# ios - 在 iPhone 上拍摄视频

> ID：11990899
> 
> 赞同：0
> 
> 时间：2012-08-16T15:45:15.530
> 
> 标签：ios, video, core-audio, facetime

我正在尝试获得与 facetime 相同的效果。用户当前的视频源显示在屏幕的左下方。我也在尝试录制该视频，以便用户稍后保存......最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:11:19.553

看看[苹果的指南](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/CameraAndPhotoLib_TopicsForIOS/Articles/TakingPicturesAndMovies.html#//apple_ref/doc/uid/TP40010406-SW1)

摘抄：

从 iPhone OS 3.0 开始，您可以在支持的设备上录制包含音频的视频。要显示视频录制界面，创建并推送一个 UIImagePickerController 对象，就像显示静态相机界面一样。

要录制视频，您必须首先检查相机源类型（UIImagePickerControllerSourceTypeCamera）是否可用以及电影媒体类型（kUTTypeMovie）是否可用于相机。根据您分配给 mediaTypes 属性的媒体类型，选择器可以直接显示静态相机或摄像机，或者让用户选择的选择界面。

使用 UIImagePickerControllerDelegate 协议，注册为图像选择器的委托。您的委托对象通过 imagePickerController:didFinishPickingMediaWithInfo: 方法接收完整的视频录制。

在支持的设备上，您还可以从用户的照片库中挑选以前录制的视频。

有关使用图像选择器类的更多信息，请参阅 UIImagePickerController 类参考。有关修剪录制视频的信息，请参阅 UIVideoEditorController 类参考和 UIVideoEditorControllerDelegate 协议参考。

在 UIImagePickerController 委托中成功获得视频后，您可以使用标准文件操作将其保存到应用程序的文档目录中。

# xcode - 将“UIImagePickerController *”传递给“UIImage *”类型参数的不兼容指针类型

> ID：11990900
> 
> 赞同：0
> 
> 时间：2012-08-16T15:45:15.637
> 
> 标签：xcode, xcode4.3

我对 Xcode 很陌生，我正在尝试编写一个应用程序，允许用户使用相机，拍摄多张照片，然后允许用户选择他们想要附加到应用程序内电子邮件的图片。我收到错误，例如：

```
Incompatible pointer types passing "UIImagePickerController *" to parameter of type "UIImage *" 
```

和

```
Instance method '_alloc' not found (return type defaults to 'id') 
```

和

```
Incompatible pointer types sending 'UIImage *' to parameter of type 'NSString *' 
```

和

```
Unused variable 'photoData' 
```

这是我的代码

```
// Camera Control

-(void) takePhotoClicked
{
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])

    {
        UIImagePickerController *theimagepicker = [[UIImagePickerController alloc] init];

        theimagepicker.delegate = self;

        theimagepicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        theimagepicker.mediaTypes = @[(NSString *) kUTTypeImage] ;
        theimagepicker.allowsEditing = NO;
        [self presentModalViewController:theimagepicker animated:YES];
        [theimagepicker release];
        newMedia = YES;

    }
}

// Choose Photo Control

-(void) choosePhotoClicked
{
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeSavedPhotosAlbum])
    {
        UIImagePickerController *theimagepicker = [[UIImagePickerController alloc] init];

        theimagepicker.delegate = self;

        theimagepicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

        theimagepicker.mediaTypes = @[(NSString *) kUTTypeImage];
        theimagepicker.allowsEditing = NO;
        [self presentModalViewController:theimagepicker animated:YES];
        // Save image
        UIImageWriteToSavedPhotosAlbum(theimagepicker, self, @selector(theimagepicker:didFinishSavingWithError:contextInfo:), nil);
        NSLog(@"Creating Mail Data!!!");
        NSData *photoData = [[UIImageJPEGRepresentation([UIImage imageNamed:@"qwerty.png"], 1) alloc] init];

        [theimagepicker release];
        newMedia = NO;

    }
}

// Image Delegate Methods

-(void)theimagepickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo: (NSDictionary *)info
{
    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
    [self dismissModalViewControllerAnimated:YES];
    if ([mediaType isEqualToString:(NSString *)kUTTypeImage])
    {
        UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

        theimageView.image = image;
        if (newMedia)
            UIImageWriteToSavedPhotosAlbum(image, self, @selector (image:finishedSavingWithError:contextInfo:), nil);

        NSLog(@"Creating Mail Data!!!");
        NSData *photoData = [[UIImageJPEGRepresentation([UIImage imageNamed:@"qwerty.png"], 1) alloc] init];

    }
    else if ([mediaType isEqualToString:(NSString *) kUTTypeMovie])
    {

        // Code here to support video if enabled
    }
}

-(void)image:(UIImage *)image
finishedSavingWithError:(NSError *)error
 contextInfo:(void *)contextInfo
{
    if (error) {
        UIAlertView *alert = [[UIAlertView alloc]
                              initWithTitle: @"Save failed"
                              message: @"Failed to save image"
                              delegate: nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
        [alert show];
        [alert release];

    }

}

// Email Control
#pragma mark - Open the mail interface
-(IBAction)email
{
    MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init];
    [composer setMailComposeDelegate:self];
    if([MFMailComposeViewController canSendMail])
    {
        //  NSString *custemail = txtCustomerEmail.text;

        //  NSArray *toRecipients = [NSArray arrayWithObject:custemail];
        // [composer setToRecipients:toRecipients];

        [composer setSubject:@"Title Search results:"];

        [composer addAttachmentData:photoData mimeType:@"image/jpg" fileName:[UIImage imageNamed:theimageView.image]];

        // Fill out the email body text
        NSString *emailBody =[NSString stringWithFormat:@"Examiner Name :%@\nExaminer Address :%@\nExaminer City :%@\nExaminer State :%@\nExaminer Zip Code :%@\nExaminer Email Address :%@\nCustomer Name :%@\nCustomer Address :%@\nCustomer City :%@\nCustomer State :%@\nCustomer Zip Code :%@\nCustomer Email Address :%@\nSearch Through Date :%@\nTitle Held By :%@\nProperty Address :%@\nProperty City :%@\nProperty State :%@\nProperty Zip Code :%@\nProperty County : %@\nTitle Search Notes :%@\nMortgage 1 Lender :%@\nMortgage 1 Dated :%@\nMortgage 1 Recorded :%@\nMortgage 1 Amount :%@\nMortgage 1 Book Number :%@\nMortgage 1 Page Number :%@\nMortgage 1 Assignment :%@\nMortgage 1 Additional Info :%@\nMortgage 2 Lender :%@\nMortgage 2 Dated :%@\nMortgage 2 Recorded :%@\nMortgage 2 Amount :%@\nMortgage 2 Book Number :%@\nMortgage 2 Page Number :%@\nMortgage 2 Assignment :%@\nMortgage 2 Additional Info :%@\nMortgage 3 Lender :%@\nMortgage 3 Dated :%@\nMortgage 3 Recorded :%@\nMortgage 3 Amount :%@\nMortgage 3 Book Number :%@\nMortgage 3 Page Number :%@\nMortgage 3 Assignment :%@\nMortgage 3 Additional Info :%@\nLien/Judgement 1 Creditor :%@\nLien/Judgement 1 Type ;%@\nLien/Judgement 1 Dated :%@\nLien/Judgement 1 Recorded :%@\nLien/Judgement 1 Amount :%@\nLien/Judgement 1 Book Number :%@\nLien/Judgement 1 Page Number :%@\nLien/Judgement 1 Notes :%@\nLien/Judgement 2 Creditor :%@\nLien/Judgement 2 Type ;%@\nLien/Judgement 2 Dated :%@\nLien/Judgement 2 Recorded :%@\nLien/Judgement 2 Amount :%@\nLien/Judgement 2 Book Number :%@\nLien/Judgement 2 Page Number :%@\nLien/Judgement 2 Notes :%@\nLien/Judgement 3 Creditor :%@\nLien/Judgement 3 Type ;%@\nLien/Judgement 3 Dated :%@\nLien/Judgement 3 Recorded :%@\nLien/Judgement 3 Amount :%@\nLien/Judgement 3 Book Number :%@\nLien/Judgement 3 Page Number :%@\nLien/Judgement 3 Notes :%@\nProperty Tax ID :%@\nProperty Tax Amount :%@\nHow Often Are Taxes Paid :%@\nNext Payment Due Date :%@\nNext Payment Due Amount :%@\nExaminers' Notes Line 1:%@\nExaminers' Notes Line 2:%@\nExaminers' Notes Line 3:%@\nExaminers' Notes Line 4:%@\nExaminers' Notes Line 5:%@\nExaminers' Notes Line 6:%@\nExaminers' Notes Line 7:%@\nExaminers' Notes Line 8:%@\nExaminers' Notes Line 9:%@\nExaminers' Notes Line 10:%@\nLegal Description Line 1 :%@\nLegal Description Line 2 :%@\nLegal Description Line 3 :%@\nLegal Description Line 4 :%@\nLegal Description Line 5 :%@\nLegal Description Line 6 :%@\nLegal Description Line 7 :%@\nLegal Description Line 8 :%@\nLegal Description Line 9 :%@\nLegal Description Line 10 :%@\nLegal Description Line 11 :%@\nLegal Description Line 12 :%@\nLegal Description Line 13 :%@\nLegal Description Line 14 :%@\nLegal Description Line 15 :%@\nLegal Description Line 16 :%@\nLegal Description Line 17 :%@\nLegal Description Line 18 :%@\nLegal Description Line 19 :%@\nLegal Description Line 20 :%@\nLegal Description Line 21 :%@\nLegal Description Line 22 :%@\nLegal Description Line 23 :%@\nLegal Description Line 24 :%@\nLegal Description Line 25 :%@\nLegal Description Line 26 :%@\nLegal Description Line 27 :%@\nLegal Description Line 28 :%@\nLegal Description Line 29 :%@\nLegal Description Line 30 :%@", txtExaminerName.text, txtExaminerAddress.text, txtExaminerCity.text, txtExaminerState.text, txtExaminerZip.text, txtExaminerEmail.text, txtCustomerName.text, txtCustomerAddress.text, txtCustomerCity.text, txtCustomerState.text, txtCustomerZip.text, txtCustomerEmail.text, txtSearchThroughDate.text, txtTitleHeldBy.text, txtPropertyAddress.text, txtPropertyCity.text, txtPropertyState.text, txtPropertyZip.text, txtTitleSearchNotes.text, txtMtg1LenderName.text, txtMtg1Dated.text, txtMtg1Recorded.text, txtMtg1Amount.text, txtMtg1BookNumber.text, txtMtg1BookNumber.text, txtMtg1PageNumber.text, txtMtg1Assignment.text, txtMtg1AddlInfo.text, txtMtg2LenderName.text, txtMtg2Dated.text, txtMtg2Recorded.text, txtMtg2Amount.text, txtMtg2BookNumber.text, txtMtg2PageNumber.text, txtMtg2Assignment.text, txtMtg2AddlInfo.text, txtMtg3LenderName.text, txtMtg3Dated.text, txtMtg3Recorded.text, txtMtg3Amount.text, txtMtg3BookNumber.text, txtMtg3PageNumber.text, txtMtg3Assignment.text, txtMtg3AddlInfo.text, txtLien1Creditor.text, txtLien1Type.text, txtLien1Dated.text, txtLien1Recorded.text, txtLien1Amount.text, txtLien1BookNumber.text, txtLien1PageNumber.text, txtLien1Notes.text, txtLien2Creditor.text, txtLien2Type.text, txtLien2Dated.text, txtLien2Recorded.text, txtLien2Amount.text, txtLien2BookNumber.text, txtLien2PageNumber.text, txtLien2Notes.text, txtLien3Creditor.text, txtLien3Type.text, txtLien3Dated.text, txtLien3Recorded.text, txtLien3Amount.text, txtLien3BookNumber.text, txtLien3PageNumber.text, txtLien3Notes.text, txtPropertyTaxID.text, txtPropertyTaxAmount.text, txtHowTaxesArePaid.text, txtNextPaymentDueDate.text, txtNextPaymentAmount.text, txt1ExaminersNotes.text, txt2ExaminersNotes.text, txt3ExaminersNotes.text,txt4ExaminersNotes.text, txt5ExaminersNotes.text, txt6ExaminersNotes.text,txt7ExaminersNotes.text, txt8ExaminersNotes.text, txt9ExaminersNotes.text,txt10ExaminersNotes.text, txt1LegalDescription.text, txt2LegalDescription.text, txt3LegalDescription.text, txt4LegalDescription.text, txt5LegalDescription.text, txt6LegalDescription.text, txt7LegalDescription.text, txt8LegalDescription.text, txt9LegalDescription.text, txt10LegalDescription.text, txt11LegalDescription.text, txt12LegalDescription.text, txt13LegalDescription.text, txt14LegalDescription.text, txt15LegalDescription.text, txt16LegalDescription.text, txt17LegalDescription.text, txt18LegalDescription.text, txt19LegalDescription.text, txt20LegalDescription.text, txt21LegalDescription.text, txt22LegalDescription.text, txt23LegalDescription.text, txt24LegalDescription.text, txt25LegalDescription.text, txt26LegalDescription.text, txt27LegalDescription.text, txt28LegalDescription.text, txt29LegalDescription.text, txt30LegalDescription.text];

        //

        [composer setMessageBody:emailBody isHTML:NO];

        composer.modalPresentationStyle = UIModalPresentationPageSheet;

        [self presentModalViewController:composer animated:YES];

        [composer release];
    }
    else
        [composer release];
}

-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error
{
    if (error)
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"error"

                                                        message:[NSString stringWithFormat:@"error %@", [error description]]

                                                       delegate:nil cancelButtonTitle:@"dismiss" otherButtonTitles:nil, nil];

        [alert show];
        [alert release];

        [self dismissModalViewControllerAnimated:YES];

    }
    else {
        [self dismissModalViewControllerAnimated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:39:56.620

好的，在“choosePhotoClicked”方法中删除这些行

```
 UIImageWriteToSavedPhotosAlbum(theimagepicker, self, @selector(theimagepicker:didFinishSavingWithError:contextInfo:), nil);

    NSData *photoData = [[UIImageJPEGRepresentation([UIImage imageNamed:@"qwerty.png"], 1) alloc] init]; 
```

然后从“didFinishPicking...”中删除这一行

```
 NSData *photoData = [[UIImageJPEGRepresentation([UIImage imageNamed:@"qwerty.png"], 1) alloc] init]; 
```

然后在“电子邮件”操作中替换这一行：

```
 [composer addAttachmentData:photoData mimeType:@"image/jpg" fileName:[UIImage imageNamed:theimageView.image]]; 
```

使用这些行：

```
 NSData *imageData = UIImageJPEGRepresentation(theimageView.image, 1.0);
    [composer addAttachmentData:imageData mimeType:@"image/jpg" fileName:@"this is a string file name"; 
```

# php - 如何强制PDF下载初学者

> ID：11990902
> 
> 赞同：6
> 
> 时间：2012-08-16T15:45:22.550
> 
> 标签：php, pdf, header, force-download

> **可能重复：**
> [如何强制自动下载 pdf？](https://stackoverflow.com/questions/2598658/how-to-force-a-pdf-download-automatically)

我检查了其他论坛，但我不明白他们在说什么。我检查了这个链接，人们似乎确实得到了解决方案：

[http://css-tricks.com/snippets/htaccess/force-files-to-download-not-open-in-browser/](http://css-tricks.com/snippets/htaccess/force-files-to-download-not-open-in-browser/)

我想做一个用于下载 PDF 的按钮，文件太大而无法在线查看。所以我希望该按钮强制浏览器下载文件。询问或不询问用户。会有不同的 PDF 名称文件，所以我需要使用各种 PDF 文件的 PDF 格式下载此按钮。

我检查了不同的网站，似乎可以使用 htaccess 完成，但老实说，我不知道如何做到这一点。有人可以帮我看看我怎么能做到这一点！？！？！有没有通过 CSS/html 的简单方法？

对于这样一个小细节，我已经被困了很长时间。

我的代码很简单：

```
<div class="Container for icons">
<a href="hugefile.pdf" alt=""><img href="icon.png" alt=""/>
</div> 
```

有人可以帮我处理这个吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T15:49:40.537

您需要修改返回给客户端的 HTTP 标头才能完成此操作：

*   [强制打开“另存为...”弹出窗口在文本链接处打开单击以获取 HTML 中的 pdf](https://stackoverflow.com/questions/3802510/force-to-open-save-as-popup-open-at-text-link-click-for-pdf-in-html)

这是一个 PHP 代码示例：

```
$path = "path/to/file.pdf";
$filename = "file.pdf";
header('Content-Transfer-Encoding: binary');  // For Gecko browsers mainly
header('Last-Modified: ' . gmdate('D, d M Y H:i:s', filemtime($path)) . ' GMT');
header('Accept-Ranges: bytes');  // For download resume
header('Content-Length: ' . filesize($path));  // File size
header('Content-Encoding: none');
header('Content-Type: application/pdf');  // Change this mime type if the file is not PDF
header('Content-Disposition: attachment; filename=' . $filename);  // Make the browser display the Save As dialog
readfile($path);  //this is necessary in order to get it to actually download the file, otherwise it will be 0Kb 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T15:53:14.623

而不是`AddType`你可以尝试`ForceType`：

```
<FilesMatch "\.(pdf)$">
  ForceType application/octet-stream
  Header set Content-Disposition attachment
</FilesMatch> 
```

# javascript - 如何在 IE 中使用 javascript 上传文件？

> ID：11990904
> 
> 赞同：0
> 
> 时间：2012-08-16T15:45:30.527
> 
> 标签：javascript, jquery, file-upload

我正在尝试使用 javascript 制作上传器。我基本上有我的输入文件：

```
<input id="attachments" type="file" style="display:none; float:left; margin-right:5px;" multiple="" name="file[]"> 
```

隐藏所以当我点击一个按钮时，我会像这样触发我的输入：

```
$(thisELement).find("#attachments").trigger("click"); 
```

最后我在我的输入中捕捉到了这样的信息：

```
$(thisELement).find("#attachments").change(function(e){
     console.log(this.file); 
```

对于 firefox 和 chrome，它工作正常，但是当我在 IE 9 中测试它时，我进入控制台“this.file”未定义有谁知道为什么 IE 不接受“this.file”，以及哪条指令是是等价的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:06:11.907

IE 在文件上传方面的安全性是出了名的严格。它不允许您使用 JS 触发文件上传，因为这可能不涉及用户交互，并允许页面在用户不知情的情况下“窃取”文件。我已经对此进行了广泛的研究，答案几乎是您无法做到，您必须使用本机文件上传控件。

您可以尝试使用 jquery 插件uploadify。它使用 Flash 来绕过这个安全限制，但是你会被他们的 UI 卡住，而不是浏览器的 UI。然而，他们的 UI 确实允许您进行一些自定义。

# php - 从网页打开 Mac OS 应用程序

> ID：11990906
> 
> 赞同：0
> 
> 时间：2012-08-16T15:45:35.343
> 
> 标签：php, javascript, shell

我正在为一家小型企业构建一个内部系统，其中一个请求的功能是能够通过单击网页上的按钮进入不同的应用程序。

因此，例如，当您单击**Coda**的图标时，它将打开并可用。

这不需要在 Windows 上工作，只在 Mac OS Mountain Lion 上工作！

怎么可能做到这一点？还是不能做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:49:59.367

两种选择：

1.  如果可以使用已注册的 URL 架构打开应用程序，则可以使用它。例如，一个`ftp://...`链接打开默认的 FTP 应用程序，一个`news://...`链接打开默认的新闻阅读器。您可以构建自己的 URL 架构。应用程序通常需要为某个模式注册自己才能使其工作。
2.  如果这不是一个选项，您几乎必须在客户端的浏览器中安装一个插件，该插件可以通过它想要的任何机制执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:51:27.290

您在这里面临的问题是二进制文件和网络的工作方式。像可可应用程序这样的编译应用程序只有在至少它们的起始二进制文件存在时才能工作。但这基本上意味着用户已经下载了二进制文件。

此外，这些应用程序将创建自己的应用程序首选项 - 因此下载的 Coda 版本将没有许可证。

如果用户下载了你的二进制文件，什么会阻止他们永远使用你的软件？（除了上述软件作者的许可问题）。

因此，您唯一能做的就是向他们展示某种类似 VNC 的客户端，该客户端将授予他们对您控制的环境的有限访问权限。但是写这超出了本网站的范围。

（我假设该应用程序尚未在本地安装，但可以从服务器使用）。

# javascript - 移动应用同源政策

> ID：11990907
> 
> 赞同：3
> 
> 时间：2012-08-16T15:45:39.373
> 
> 标签：javascript, html, mobile, cross-domain

我一直在研究这个问题，但找不到让我满意的答案。

我非常清楚它们适用于标准网络浏览器中的网站的相同来源策略。当我开始开发使用本机 webview 并使用 jQuery`.load`方法加载网站内容的移动应用程序时，我的问题出现了。通常在标准 Web 浏览器中，我会收到 XHR 加载错误。

那么，关于原生应用程序和跨源策略的规则是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:02:42.993

机器人伍兹绝对是在正确的轨道上。在处理本机应用程序时，您在某种意义上是从 file:// 发出请求，而不是从 https:// 发出请求。因为您不是通过 HTTP 协议发出请求，所以不适用相同的规则。从您的本地移动应用程序发出请求时，您应该毫无问题地向任何域发出请求。

如果您要让整个页面替换 web 视图中的正常内容，您只需将域添加到 PhoneGap/Cordova 中的白名单，这通常不会发生（您通常只是从服务器请求数据块，而不是进行 window.location 更改）。

# objective-c - AVAssetWriter 写入的 URL 无效

> ID：11990920
> 
> 赞同：2
> 
> 时间：2012-08-16T15:46:34.940
> 
> 标签：objective-c, ios, nsurl

我收到此错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[AVAssetWriter initWithURL:fileType:error:] invalid parameter not satisfying: [outputURL isFileURL]' 
```

在这条线上：

```
AVAssetWriter * assetWriter = [[AVAssetWriter alloc] initWithURL:videoURL
                                                        fileType: AVFileTypeMPEG4
                                                           error: &movieError]; 
```

videoURL 记录为：

```
/var/mobile/Applications/A032EEA6-C83D-49DA-B118-E4E4B9F41C7F/Documents/videoForSegmentNumber1.mp4 
```

调用此之前的行。

我自己也对 isFileURL 进行了测试，它返回 NO。什么是有效的 fileURL？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T15:56:31.657

采用

```
+ (id)fileURLWithPath:(NSString *)path 
```

代替

```
+ (id)URLWithString:(NSString *)URLString 
```

# jsf - 忽略 p:inputText 中某个值的 set 方法，直到提交表单

> ID：11990924
> 
> 赞同：0
> 
> 时间：2012-08-16T15:46:39.840
> 
> 标签：jsf, jsf-2, primefaces

任何人都知道分配 ap:inputText 值的方法，因此它可以在对话框窗口中正确显示，但仅更新来自 commandButton 操作的值更改，而不是支持 bean 中值的动态设置方法。让用户添加一个步骤并显示在环中，然后他们可以单击各个步骤，但我希望他们能够仅通过更新步骤按钮更新步骤信息，而不仅仅是更改字段并关闭对话框? 内置方法会更好，我知道我可以编码，但尽量不要。

提前致谢....

```
 <p:ajaxStatus onstart="statusDialog.show();" onsuccess="statusDialog.hide();"/>  

    <p:dialog modal="true" widgetVar="statusDialog" header="Status"   
        draggable="false" closable="false">  
        <p:graphicImage value="/resources/images/ajaxloadingbar.gif" />  
    </p:dialog> 

    <h:form id="form">

    <p:panel  header="Setup System" >

        <p:selectOneMenu  value="#{groups.selected_sys_code}" id="systems" rendered="#{utility.systemDD}">
            <f:selectItem itemLabel="Choose System" itemValue="" />  
            <f:selectItems value="#{supportBean.access_system_codes}"/>
            <p:ajax  listener="#{groups.valueChanged}" event="valueChange" render="systemForm" execute="@all"/>
        </p:selectOneMenu>  

        <h:panelGroup id="systemForm" > 
         <p:panel id="panel" header="Step Details">  

            <p:messages id="msgs"/>   

            <h:panelGrid columns="2" columnClasses="label, value" styleClass="grid">  
                  <p:panelGrid columns="2" styleClass="veaGrid"> 
                     <h:outputLabel for="name" value="Name:"/>                        
                        <p:inputText id="name" value="#{setup.name}" label="Name"  required="true"/>        
                     <h:outputLabel for="desc" value="Description:"/>                 
                        <p:inputText id="desc" value="#{setup.description}" label="Description" required="true"/>
                     <h:outputLabel for="email" value="Email For Group Responsible:"/> 
                        <p:inputText id="email" value="#{setup.emailResp}" label="Email"  required="true"/> 
                     <h:outputLabel for="process" value="Process:"/>                      
                        <p:inputText id="process" value="#{setup.process}" label="Process"  required="true"/>
                  </p:panelGrid>
            </h:panelGrid>  

            <p:commandButton value="Add Step" update="panel,stepsRing" actionListener="#{setup.setSteps}" process="@form"  >

            </p:commandButton>
            <p:commandButton value="Submit All Steps" actionListener="setup.submitSteps">

            </p:commandButton>
        </p:panel>
        </h:panelGroup>
        <h:panelGroup id="stepsRing" >

               <p:panel header="Steps">
                     <p:ring id="basic" value="#{setup.steps}" var="step" >  
                        <p:column> 
                        <p:outputPanel/> 
                          <p:outputPanel style="text-align:center;" layout="block"  >  
                              Step #{step.sequence}
                              <br/>
                               <p:commandButton update=":form:detail"  title="View" oncomplete="dlg.show()" value="Details" >  
                                    <f:setPropertyActionListener value="#{step}" target="#{setup.selectedStep}" />  
                               </p:commandButton>   
                          </p:outputPanel>  
                        </p:column>  
                      </p:ring>        
               </p:panel> 
        </h:panelGroup>

 <p:dialog id="dialog" widgetVar="dlg" showEffect="fade" hideEffect="fade" modal="true" width="300" >  

    <p:outputPanel id="detail" style="text-align:center;" layout="block">  

        <h:panelGrid  columns="2" cellpadding="5" rendered="#{not empty setup.selectedStep}">  
            <f:facet name="header">  
               Step #{setup.selectedStep.sequence}
            </f:facet>  

            <h:outputText value="Name: " />  
            <p:inputText id="name2" value="#{setup.selectedStep.name}" />  

            <h:outputText value="Description: " />  
            <p:inputText id="desc2" value="#{setup.selectedStep.description}" />  

            <h:outputText value="Email: " />  
            <p:inputText id="email2" value="#{setup.selectedStep.emailResp}"/>  

            <h:outputText value="Process: " />  
            <p:inputText id="process2" value="#{setup.selectedStep.process}"/>  

            <p:commandButton update="stepsRing" actionListener="#{setup.removeStep}" title="Remove" oncomplete="dlg.hide()" value="Remove Step"  >  
                  <f:setPropertyActionListener value="#{step}" target="#{setup.selectedStep}" />  
            </p:commandButton>

            <p:commandButton update="stepsRing" process="@form" actionListener="#{setup.updateStep}" title="Update"  value="Update Step"  >  
                  <f:setPropertyActionListener value="#{step}" target="#{setup.selectedStep}" />  
            </p:commandButton>  
        </h:panelGrid>  
    </p:outputPanel>  

</p:dialog>  

    </p:panel>
    </h:form> 
```

BackingBean

```
@ManagedBean(name="setup")
@ViewScoped 
public class WorkStepSetupSystemBean implements Serializable{

private WorkSetup step;
public ArrayList <WorkSetup> steps=new ArrayList <WorkSetup> (); 
private WorkSetup ws;
private String system="test1";
private String emailResp;
private String process;
private String name;
private String description;
private Integer sequence;   

private String email2;
private String process2;
private String name2;
private String desc2;

private WorkSetup selectedStep;     

public WorkStepSetupSystemBean(){

}

public String getDesc2() {
    return desc2;
}
public String getEmail2() {
    return email2;
}
public String getName2() {
    return name2;
}
public String getProcess2() {
    return process2;
}

public  WorkSetup getSelectedStep() {
    return selectedStep;
}
public ArrayList<WorkSetup> getSteps() {
    return steps;
}

public WorkSetup getStep() {
    return step;
}

public void setSteps(ActionEvent event) {
    step= new WorkSetup();

    step.setName(name);
    step.setEmailResp(emailResp);
    step.setDescription(description);
    step.setSystem(system);
    step.setProcess(process);

    step.setSequence(steps.size()+1);
    steps.add(step);

    return;
}
public void setStep(ArrayList<WorkSetup> steps) {
    this.steps = steps;
}

public Integer getSequence() {
    return sequence;
}   
public String getDescription() {
    return description;
}
public String getEmailResp() {
    return emailResp;
}
public String getName() {
    return name;
}
public String getProcess() {
    return process;
}
public String getSystem() {
    return system;
}
public void setDescription(String description) {
    this.description = description;
}
public void setEmailResp(String emailResp) {
    this.emailResp = emailResp;
}
public void setName(String name) {
    this.name = name;
}
public void setProcess(String process) {
    this.process = process;
}
public void setSequence(Integer sequence) {
    this.sequence = sequence;
}
public void setSystem(String system) {
    this.system = system;
}
public void setDesc2(String desc2) {
    this.desc2 = desc2;
}
public void setEmail2(String email2) {
    this.email2 = email2;
}
public void setName2(String name2) {
    this.name2 = name2;
}
public void setProcess2(String process2) {
    this.process2 = process2;
}

public void setSelectedStep(WorkSetup selectedStep) {
    this.selectedStep = selectedStep;
}
public void removeStep(ActionEvent event) {

    steps.remove(steps.indexOf(this.selectedStep));
    for(int i=0;i<steps.size();i++){
        steps.get(i).setSequence(i+1);
    }

}
public void updateStep(ActionEvent event) {

    step=steps.get(steps.indexOf(this.selectedStep));
    step.setName(name2);
    step.setEmailResp(email2);
    step.setDescription(desc2);
    step.setSystem(system);

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:15:21.553

最终使用

```
 <p:inplace id="inplaceName" > 
               <p:inputText id="name2" value="#{setup.selectedStep.name}" />  
               <p:tooltip for="inplaceName" value="Click here to edit"/> 
 </p:inplace> 
```

没有 AJAX 选项

# c# - c#网站调用编译的dll需要知道它自己的位置

> ID：11990929
> 
> 赞同：0
> 
> 时间：2012-08-16T15:46:46.863
> 
> 标签：c#, .net, sqlite, .net-4.0

我正在使用第 3 方网站来启动我用 .Net 4.0 编写的 DLL。DLL 将与 SQLite 数据库一起上传到网站上，为我提供结果，然后我可以在网站上查看。我知道该网站会将我的 DLL 和 SQLite 数据库放在同一个目录中，但是我不知道该目录在哪里。有没有办法让 DLL 识别它在哪里，以便它可以找到 SQLite 数据库？我试过以下...

```
string path = GetType().Assembly.GetModules(false)[0].FullyQualifiedName;  

string path = typeof(YourClass).Assembly.Location;  

System.Reflection.Assembly.GetExecutingAssembly().Location; 
```

但是所有这些都将目录显示为“C:\WINDOWS\system32\<library>.dll”。有什么办法可以做到这一点，还是我必须接受不可避免的事情并编写自己的网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:43:01.320

您尝试过的所有上述方法都会为您提供 dll 程序集的物理位置，这在您的情况下正确反映为：

C:\windows\system32\something.dll

另一方面，如果您想知道当前引用您的程序集或库的 ASP.NET 网站的物理位置，您可以尝试以下方法之一：

```
Server.MapPath(".")
Server.MapPath("~") 
```

有关更多详细信息，请参阅此 SO 链接：[Server.MapPath(".")、Server.MapPath("~")、Server.MapPath(@"\")、Server.MapPath("/")。有什么区别？](https://stackoverflow.com/questions/275781/server-mappath-server-mappath-server-mappath-server-mappath)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:56:39.190

我可能误解了您（请参阅问题下方的评论），但如果您只想要目录，请尝试以下操作（`path`您最初尝试的结果之一在哪里）：

```
var yourDir = Path.GetDirectoryName(path) 
```

注意：这需要您包含`System.IO;`.

# android - GCM FC / 发件人 ID 未在构造函数上设置

> ID：11990932
> 
> 赞同：13
> 
> 时间：2012-08-16T15:47:00.163
> 
> 标签：android, android-c2dm, google-cloud-messaging

我最近从我的应用程序的用户那里得到了一些奇怪的 StackTraces：

```
Android Version: 2.3.5
Phone Model: GT-I9001
Stacktrace:
java.lang.IllegalStateException: sender id not set on constructor
at com.google.android.gcm.GCMBaseIntentService.getSenderIds(GCMBaseIntentService.java:125)
at com.google.android.gcm.GCMBaseIntentService.onHandleIntent(GCMBaseIntentService.java:237)
at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.os.HandlerThread.run(HandlerThread.java:60) 
```

我正在使用 GCM lib 的第 3 版，并且关于文档，构造函数不再需要传递 senderID（在 C2DM 时代就是这样） - 这也不会在我的设备和设备上崩溃很多其他用户。有人可以了解这些设备上正在发生的事情，并且最好有一些解决方法吗？这些用户的非工作 GCM 对我来说是一个选项，因为设备推送是可选的 - 但我不希望它崩溃..

此处编辑使用的来源： [https ://github.com/ligi/gobandroid/blob/master/src/org/ligi/gobandroid_hd/GCMIntentService.java](https://github.com/ligi/gobandroid/blob/master/src/org/ligi/gobandroid_hd/GCMIntentService.java)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-17T15:07:08.797

您是否覆盖了`getSenderIds(Context context)`GCMBaseIntentService 中的方法？从源代码中，它提到如果您没有在构造函数中传入 SenderID，那么您需要重写`getSenderIds(Context context)`以提供 SenderID。

这是构造函数的注释：

```
/**
 * Constructor that does not set a sender id, useful when the sender id
 * is context-specific.
 * <p>
 * When using this constructor, the subclass <strong>must</strong>
 * override {@link #getSenderIds(Context)}, otherwise methods such as
 * {@link #onHandleIntent(Intent)} will throw an
 * {@link IllegalStateException} on runtime.
 */
protected GCMBaseIntentService() {
    this(getName("DynamicSenderIds"), null);
} 
```

getSenderIds() 的注释：

```
/**
 * Gets the sender ids.
 *
 * <p>By default, it returns the sender ids passed in the constructor, but
 * it could be overridden to provide a dynamic sender id.
 *
 * @throws IllegalStateException if sender id was not set on constructor.
 */
protected String[] getSenderIds(Context context) {
    if (mSenderIds == null) {
        throw new IllegalStateException("sender id not set on constructor");
    }
    return mSenderIds;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-20T12:56:22.073

引用[Google Group](https://groups.google.com/forum/?fromgroups=#!topic/android-gcm/bXQCHuZmK-g)的回复：

> 看起来您正在使用默认构造函数而没有覆盖 getSenderIds() 方法。正如构造函数的 javadoc 解释的那样：
> 
> 不设置发件人 ID 的构造函数，当发件人 ID 是特定于上下文的时很有用。使用该构造函数时，子类必须重写getSenderIds(Context)，否则onHandleIntent(Intent)等方法会在运行时抛出IllegalStateException
> 
> 如果您不需要动态发件人 ID，则应使用采用发件人 ID 的构造函数。

更新：我想我解决了。

查看 GCM 示例，如果您使用带有静态 YOUR_GCM_SENDER_ID 的 supert 构造函数，则必须实现这一点（

```
public GCMIntentService() {
        super(YOUR_GCM_SENDER_ID);
} 
```

否则，如果使用不带参数的超级构造函数，则必须重写 getSenderIds(Context)

[JavaDoc 文档](http://developer.android.com/guide/google/gcm/client-javadoc/com/google/android/gcm/GCMBaseIntentService.html#GCMBaseIntentService%28%29)中解释的所有内容

**更新：解释什么是 YOUR_GCM_SENDER_ID**

当您在[Google API 控制台](https://code.google.com/apis/console)页面上配置您的 Google API 项目时，您必须创建自己的项目并在其上启用 GCM API。

您的项目网址将类似于

```
https://code.google.com/apis/console/#project:4815162342 
```

#project:（本例中为 4815162342）后面的值是您的项目编号，稍后将用作 GCM 发件人 ID。

# c# - 在 ViewModel 中使用后台工作程序时 WPF 应用程序崩溃

> ID：11990933
> 
> 赞同：-3
> 
> 时间：2012-08-16T15:47:00.613
> 
> 标签：c#, wpf, mvvm, backgroundworker

我正在使用带有 MVVM 的 WPF

在后台工作人员正在调用 sendEmail 方法

当我尝试发送 10 或 15 封电子邮件时，应用程序崩溃

如果我使用后台工作人员发送 1 或 2 封电子邮件正在工作。

这里有什么问题，线程有任何问题

```
crash in  vshost.exe has stopped working
Faulting module path: C:\Windows\system32\mswsock.dll 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:15:32.000

随机猜测：服务器拒绝您的客户端的连接，因为它已经打开了太多的连接。

# linux - 配置 gitg 使用 UTF8

> ID：11990935
> 
> 赞同：1
> 
> 时间：2012-08-16T15:47:07.340
> 
> 标签：linux, git, utf-8, git-gui

gitg 无法正确显示 UTF8 文件的 git diff，即使在

*   git 正确执行（如控制台所示）
*   gitg 正确显示 UTF8 文件（不是 diff）

是否可以将其配置为正确显示 UTF8 编码文件的差异？如果有怎么办？

**编辑 ：**

barti_ddu 帮助我意识到似乎发生的事情实际上是 gitg 从收到的 diff 文件中猜测编码。

当我用编码良好的字符替换编码错误的字符时，我遇到了这个问题：diff 中的第一个是错误的，这可能会导致错误的猜测（并且给人的印象是我正在用错误的字符替换编码良好的字符）：

![在此处输入图像描述](../Images/720e99a26255f4565114cb491b2d79d5.png)

所以（不太重要的）目标是强制 gitg decode diff 为 UTF8 而不是猜测。

# javascript - 使用 gmap3 获取位置并绘制到已知位置的路线 - 需要一些微调

> ID：11990936
> 
> 赞同：1
> 
> 时间：2012-08-16T15:47:08.993
> 
> 标签：javascript, jquery, html, google-maps, jquery-gmap3

我正在尝试使用 gmap3 来执行上述操作，但遇到了困难。我可以让“地图”显示并在其上粘贴标记。我仍然在掌握 javascript，而且我确信我的一些语法已经关闭，这显然没有帮助。

在使用地理位置获取用户位置然后绘制到预定义位置的路线方面，我是否走在正确的轨道上？

为不正确的语法道歉 - 我发现在使用 JS 时很难跟踪括号。

我正在使用可以在此处找到的示例：http: [//gmap3.net/api/add-directions-renderer.html](http://gmap3.net/api/add-directions-renderer.html)

```
<script type="text/javascript">
       $(function () {
        //get the user's location
        function getLocation(){
            $('#map').gmap3({ 
              action : 'geoLatLng',
              callback : function(latLng){
                if (latLng){
                  $(this).gmap3({
                    action: 'addMarker', 
                    latLng:latLng
                  },
                  "autofit");
                } 
              }
            });
        }
        //plot directions
        function plotRoute() {
          $('#map').gmap3({
            action: 'getRoute',
            options:{
              origin: 'latLang',
              destination: 'Tallaght Business Park, Dublin, Ireland'
              travelMode: google.maps.DirectionsTravelMode.DRIVING
            },
            callback: function(results){
              if (!results) return;
              $(this).gmap3({
                action: 'init',
                zoom: 13,
                mapTyprId: google.maps.MapTypeId.ROADMAP,
                streetViewControl: true
              },
              action: 'addDirectionsRenderer',
              options: {
                preserveViewPort: true,
                draggable: true,
                directions: results
              }
              );
            }
          });
        }
      });
    </script> 
```

放置在这个 div 中

```
<div class="gmap3" id="map"></div> 
```

# javascript - Backbone.js 不起作用，而 Underscore、JSON 和 jQuery 起作用

> ID：11990938
> 
> 赞同：0
> 
> 时间：2012-08-16T15:47:09.733
> 
> 标签：javascript, ruby-on-rails, backbone.js

我无法让 Backbone.js 的最基本功能在我的 Web 应用程序上运行。
JQuery、JSON 和 Underscore.js 确实可以工作，但由于某些原因 Backbone.js 不能。
我知道这是一个非常简单的问题，但到目前为止搜索互联网并没有帮助。
我真的很感激任何帮助！

**应用详情：**
框架：Rails 3.2.6
所有 JS 文件都存储在 app/assets/javascripts 下
存在的 JS 文件：index.js、application.js、backbone.js、json2.js、underscore.js

**我如何测试哪些库工作**
我已经进行了测试以查看 index.js 文件中的工作原理，该文件包含以下内容：

```
$(function(){

    //test that this Javascript file is working:
alert('index.js javascript file works');

   //test that jQuery is working:
var jQuery_test = $("#app").attr('id');
alert("jQuery works? (following should be 'app'): " + jQuery_test);

    //test that JSON is working
var json_obj = {"key1":"value1", "key2":"value2", "key3":"value3"};
var json_string = JSON.stringify(json_obj);
alert('JSON library works? (following should be a JSON string): ' + json_string);

//test that Underscore is working
var array1 = ["one", "two", "three"];
var x = _.first(array1);
alert("Underscore library works? (following should be 'one'):  " + x);

   //test that Backbone is working
var ItemView = Backbone.View.extend({
    tagName: 'li'
});
var item = new ItemView();
alert("Backbone library works? (following should be '[Object HTMLLIElement]'): " + item.el);

}); 
```

上面的测试通过了除 Backbone 之外的所有测试。也许我正在使用一个糟糕的测试？真的不知道有什么问题。我认为这与我加载文件的方式无关，因为我加载 Backbone 的方式与加载其他库的方式相同，而且它们都可以工作。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:29:59.330

Underscore 是 Backbone 的硬依赖项，应该在 backbone.js 之前加载，就像您可能拥有的任何其他依赖项（jQuery/Zepto）一样。

# php - 在 PHP 中创建一个 24 小时内到期的密码重置链接

> ID：11990941
> 
> 赞同：-1
> 
> 时间：2012-08-16T15:47:16.613
> 
> 标签：php, passwords, change-password

我是 PHP 的新手。我想创建一个模块，门户管理员在其中使用临时密码创建“用户”。

1.  创建用户后，该特定用户应收到包含 24 小时后过期链接的电子邮件。
2.  Manager 通过其他方式将临时密码传递给用户。
3.  如果用户在 24 小时内点击电子邮件链接，它应该要求输入临时密码、新密码和确认新密码字段。
4.  如果临时密码正确，则将数据库中的临时密码替换为新密码。

我应该如何实现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:54:54.510

一种选择是在您存储在数据库中的链接中包含一个参数以及到期日期。如果没有这样的参数，则不接受链接。如果有参数，您可以在数据库中检查到期日期。如果有效，则进入更改密码页面。

示例链接：

```
http://www.example.com/updatepass?key=a8s67as78df7g96sd9fg6sdfg 
```

在具有这种结构的数据库表中：

```
reset_id, user_id,  reset_key, reset_timeout, reset_temp_password 
```

您可以验证`key`参数，然后验证临时密码。`user_id`将用于加入`user`存储用户信息的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:54:47.130

我无法为您编写它，因为我不知道您的应用程序的结构，但这将是我将采取的一般方法：

1.  创建用户，大概是使用用户名，这些详细信息被放入数据库中。
2.  临时密码生成为随机字符串。在数据库中存储一个哈希（MD5、SHA - 如果你不知道，可以用谷歌搜索）以及 NOW() 的时间戳
3.  用户使用用户名和临时密码登录。如果用户名和密码匹配，并且当前时间减去记录的时间少于 24 小时，则要求输入新密码。执行相同的过程，对其进行哈希处理并将其存储在数据库中。当他们下次登录时，检查哈希是否匹配。

这是有道理的，还是任何部分完全陌生，需要进一步解释？

# android - Android SDK：让用户从图库或相机中选择图片？

> ID：11990945
> 
> 赞同：2
> 
> 时间：2012-08-16T15:47:26.480
> 
> 标签：android, sdk

在我的项目中，我想让用户从图库中选择一张照片或从相机中拍摄一张新照片。我是否需要创建自己的菜单供用户选择，或者 SDK 中是否已经内置了一些功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:02:33.140

使用以下代码将图库和相机的选择器放在一起。我真的不知道这是否适用于 startActivityForResult。试试看

```
 Intent galleryintent = new Intent(Intent.ACTION_GET_CONTENT, null);
    galleryintent.setType("image/*");        

    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

    Intent chooser = new Intent(Intent.ACTION_CHOOSER);
    chooser.putExtra(Intent.EXTRA_INTENT, galleryintent);      
    chooser.putExtra(Intent.EXTRA_TITLE, "title");

    Intent[] intentArray =  {cameraIntent}; 
    chooser.putExtra(Intent.EXTRA_INITIAL_INTENTS, intentArray);
    startActivity(chooser); 
```

# iphone - 如何取消每日本地通知

> ID：11990947
> 
> 赞同：0
> 
> 时间：2012-08-16T15:47:30.897
> 
> 标签：iphone

我是 iphone 的初学者，任何人都可以帮助我。

我添加了每日通知功能，我想在特定日期取消此通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:16:47.337

这是删除本地通知的方法：

```
 UIApplication *app = [UIApplication sharedApplication];
    NSArray *eventArray = [app scheduledLocalNotifications];
    for (int i=0; i<[eventArray count]; i++)
    {
        UILocalNotification* oneEvent = [eventArray objectAtIndex:i];
        NSDictionary *userInfoCurrent = oneEvent.userInfo;
        NSString *uid=[NSString stringWithFormat:@"%@",[userInfoCurrent valueForKey:@"someKey"]];
        NSLog (@"deleteAllReminder: %@",uid);

       if (yourcondition) [app cancelLocalNotification:oneEvent];

    } 
```

你只需要定义`yourCondition`

# sql - 超类的 WHERE 语句中的子类属性

> ID：11990948
> 
> 赞同：2
> 
> 时间：2012-08-16T15:47:36.997
> 
> 标签：sql, symfony, doctrine-orm, dql, symfony-2.1

我对 symfony2 项目数据库中的一些表使用[类表继承](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/inheritance-mapping.html#class-table-inheritance)。我有一些关系表，其中包含我的超类的外键。

现在我想编写一个从我的关系表开始并加入超类的查询。如果我想将记录过滤到子类中，我只需要这样写：

```
SELECT r, c
FROM
BasicBundle:RelationEntity r
JOIN r.superclassId c
WHERE
c INSTANCE OF BasicBundle:Subclass 
```

我的问题是我还想设置一个带有子类属性的 WHERE 子句，如下所示：

```
WHERE
c INSTANCE OF BasicBundle:Subclass
AND
c.subclassAttribute LIKE %example% 
```

这行不通。我做了一些研究并找到[了这篇文章](http://www.doctrine-project.org/jira/browse/DDC-16)，但每次我尝试在查询中使用“CAST”时都会出错。所以看起来 CAST 不可用。

有谁知道如何在超类查询的 WHERE 语句中使用子类属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T16:35:44.257

为什么不尝试使用子查询？

例如：

```
WHERE
c INSTANCE OF BasicBundle:Subclass
AND EXISTS 
  (SELECT x FROM BasicBundle:Subclass s 
   WHERE s.id = c.id AND s.subclassAttribute LIKE %example%) 
```

也许我在实例上做错了什么，但老实说，你没有提供一个非常详细的例子。

# javascript - 为什么我的淘汰赛选项绑定不起作用？

> ID：11990949
> 
> 赞同：0
> 
> 时间：2012-08-16T15:47:41.720
> 
> 标签：javascript, data-binding, knockout.js

我正在尝试使用敲除将下拉列表绑定到选项列表的 observableArray。据我所知，我遵循了我找到的示例，但它不起作用。以下是我的代码的相关部分。这是在 MVC 应用程序的一个 cshtml 文件中，所以你会在其中看到一些 Razor 语法。

```
$(function () {
  var $thisdd = $("#@ddname");  //the JQuery selector for my dropdown
  var dropdownItems = new ko.observableArray();

  dropdownItems = getDropdownItemsFromDl("@ddname");

  var newitem = ko.observable({ cname: ddcname, cvalue: ko.observable($thisdd.val()), cpublishtopic: "" });
  classificationsViewModel.push(newitem());
  $thisdd.attr("data-bind", "options: dropdownItems, optionsText: function(item) { return item.value; }, optionsValue: function(item) { return item.key; }, value: classificationsViewModel()[" + classificationsViewModel.indexOf(newitem()) + "].cvalue ");
  ko.applyBindings(newitem);
}); 
```

调用 getDropdownItemsFromDl 后，Chrome 调试监视窗口中的 dropdownItems 如下所示：

```
dropdownItems(): Array[14]
0: Object
key: "0"
value: "none"
__proto__: Object
1: Object
key: "1"
value: "Equity Portfolio"
__proto__: Object
2: Object
key: "2"
value: "Fixed Income Portfolio"
__proto__: Object
3: Object
4: Object
5: Object
6: Object
7: Object
8: Object
9: Object
10: Object
11: Object
12: Object
13: Object
length: 14
__proto__: Array[0] 
```

classificationsViewModel 是一个 ko.observableArray。cvalue 是该数组中对象的 ko.observeable 属性。

下拉选项列表最后只有“无”，即数组中的第一项。我的绑定属性有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:42:42.840

只要绑定到值是最后一个脚本行，我就可以**让它工作。**该 ko.applyBinding 行之后的任何 javascript 都不会被执行！我将创建另一个问题来解决这种奇怪的问题，因为这对我的应用程序来说是一个严重的问题。

请注意，我最终使用了 viewModel。我无法直接绑定到 observableArray 工作。

另请注意， value: 位于 data-bind 属性中的 options: 之前。当我有 value: 作为属性的最后一部分时，选项绑定不起作用。

这是我的代码中“工作”的相关行。

```
$(function () {   
  var $thisdd = $("#@ddname");  //the JQuery selector for my dropdown   

  var dropdownItems = getDropdownItemsFromDl("@ddname");    
  var newitem = ko.observable({ cname: ddcname, cvalue: ko.observable($thisdd.val()), cpublishtopic: "" });   
  classificationsViewModel.push(newitem());   

  var viewModel =
    {
        dditems : dropdownItems 
    };

  $("#@ddname").attr("data-bind", "value: classificationsViewModel()[" + classificationsViewModel.indexOf(newitem()) + "].cvalue, options: dditems, optionsText: 'value', optionsValue: 'key'");
  ko.applyBindings(viewModel);
  ko.applyBindings(classificationsViewModel()[classificationsViewModel.indexOf((newitem())].cvalue);
}); 
```

我希望这个“答案”可以帮助其他人解决这个问题。

# c# - C# 查询 XML 文档

> ID：11990953
> 
> 赞同：1
> 
> 时间：2012-08-16T15:47:55.450
> 
> 标签：c#, xml, linq-to-xml

再会，

我正在尝试查询 XML 文档并进行以下查询：

```
XElement root = XElement.Load(@"..\..\Data.xml");
var entries = root.Descendants()
              .Where(x => x.Name.LocalName == "Entry")
              .ToList();

Console.WriteLine("There are {0} nodes...", entries.Count());
foreach (XElement v in entries)
{
    Console.WriteLine(v.Value);
} 
```

并且此代码有效，因为它提取了正确数量的 Entry 节点。入口节点如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<Database xmlns="http://www.someurl.org/schemas">
    <InfoFromRecord>
        <BaseData>
            <Entry>
                <Date>2006-03-08</Date>XD
                <Time>09:20:00</Time>
                <EnteredBy>DNS</EnteredBy>
                <TextEntry>Record 1</TextEntry>
            </Entry>
            <Entry>
                <Date>2006-03-08</Date>
                <Time>09:33:00</Time>
                <EnteredBy>MW</EnteredBy>
                <TextEntry>Record 2</TextEntry>
            </Entry>
            <Entry>
                <Date>2006-03-08</Date>
                <Time>08:58:00</Time>
                <EnteredBy>BH</EnteredBy>
                <TextEntry>Record 3</TextEntry>
            </Entry>
        </BaseData>
    </InfoFromRecord>
</Database> 
```

问题是，我只想提取日期和时间，而不是所有四个字段。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T16:00:18.137

让我们假设您的整个 XML 文件看起来像这样一个清晰的示例：

```
<Entries>
    <Entry>
        <Date>2006-03-08</Date>
        <Time>09:33:00</Time>
        <EnteredBy>XX</EnteredBy>
        <TextEntry>Test Data</TextEntry>
    </Entry>
</Entries> 
```

然后你可以做这样的事情：

```
var document = XDocument.Load(@"..\..\Data.xml");
var dateAndTimes =
    from d in document.Root.Descendants("Entry")
    select new
                {
                    Date = d.Element("Date").Value,
                    Time = d.Element("Time").Value
                }; 
```

从那里，`dateAndTimes`类型将选择日期和时间的[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)。您可以将匿名类型更改为您自己的类型或其他类型。

* * *

**编辑**：问题是你的`xmlns`. 像这样更改您的代码：

```
XNamespace namespc = "http://www.someurl.org/schemas";
var document = XDocument.Parse(xml);
var dateAndTimes =
    from d in document.Root.Descendants(namespc + "Entry")
    select new
                {
                    Date = d.Element(namespc + "Date").Value,
                    Time = d.Element(namespc + "Time").Value
                }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:49:32.237

```
foreach (XElement v in entries)
{
    Console.WriteLine(v.Element("Date").Value);
    Console.WriteLine(v.Element("Time").Value);
} 
```

不要忘记`Descendants`查找任何级别的子项，即子项、孙子项等，其中`Elements`仅找到直接子项。所以我想`Elements`在大多数情况下是安全的选择。

**编辑：看到 XML 之后**

获取数据时还需要包含命名空间

```
XNamespace ns = "http://www.someurl.org/schemas";
var entries = elm.Descendants().Where(x => x.Name.LocalName == "Entry").ToList();
foreach (XElement v in entries)
{
    Console.WriteLine(v.Element(ns+"Date").Value);
    Console.WriteLine(v.Element(ns+"Time").Value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:57:09.190

我还没有机会尝试，但类似下面的东西可能会给你你正在寻找的东西

```
var entries = from i in root.Descendants() 
where Name=='entry' 
let date = i.Element('Date').Value 
let time = i.ELement('Time').Value 
select new Tuple<string,string>(date,time); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-14T11:44:27.157

```
 IEnumerable<XElement> de = from el in xdoc.Descendants() select el;
  foreach (XElement el in de)
    {
     if (string.Equals(el.Name.ToString(), "movie", 
          `StringComparison.InvariantCultureIgnoreCase))`enter code here`             
               StringComparison.InvariantCultureIgnoreCase))
                    {
                        date(el);
                    } 
```

# facebook - 使用 Facebook Open Graph 地图聚合进行签到

> ID：11990954
> 
> 赞同：0
> 
> 时间：2012-08-16T15:47:56.963
> 
> 标签：facebook, facebook-opengraph

首先，这是我正在尝试解决的功能：

[https://developers.facebook.com/docs/opengraph/define-units/](https://developers.facebook.com/docs/opengraph/define-units/)

（在布局样式标题下）

所以我有一个跨平台的应用程序，它具有允许人们通过它签入 Facebook Places 位置的功能。现在，实际的位置发布效果很好，但我希望在人们的时间表上获得比我们现在拥有的更多的曝光，这是一个小盒子，上面写着“Nabil Freeman check into [location]”小活动窗格，上面写着“Nabil Freeman 改变了他的政治观点等”，以及一个字面意思是“42 checkins”的聚合，仅此而已。

我真的想要一个地图聚合，而不是突出显示路线，它显示 Nabil Freeman 在过去一周、一个月或其他任何时间检查过的所有图钉。每次签到都会在时间轴上发布带有单个图钉的地图，但聚合更为重要。

作为奖励，有没有办法将我自己的图像嵌入到聚合中？如果是这样，我可以使用 Google Maps API 或类似服务构建自己的地图并将其嵌入。

非常感谢你们的时间：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T23:05:22.620

使用应用程序的 Open Graph 设置，您所描述的听起来是可能的。

例如，我使用地图布局聚合制作了这个简单的“签到”地图：

我的应用程序的名称是“ES1”，一个测试应用程序。

![用户查看的 5 个条形的地图布局聚合](../Images/b1222162cdd01765c68237b078b274f6.png)

这显示了用户已查看的 5 个酒吧的地标。鼠标悬停在“第五条”上，因此会显示一个标签。为此，我使用了以下 Open Graph 聚合设置（我的对象“bar”具有自定义属性“rating”（int）和“location”（geopoint））：

*   布局风格：地图
*   排序方式：自定义、bar.rating、从最高到最低
*   聚合标题：评论
*   地图样式：多动作
*   贡献点：bar.location

对于每个动作（“评论”），都会发布一个故事。它看起来像这样：

![带地图附件的 OG 故事](../Images/d369c9b84384f112c3a842a04aac007a.png)

关键是用布局“地图”配置“故事附件”。要查看故事的此地图附件，您必须单击时间线单元中的基于时间的链接。这是带有“大约一分钟前”的基于时间的链接的时间线单元。

![已发布操作的时间线单元](../Images/8df4a773dd13b2f38f60c788e4311f23.png)

我的故事附件（动作类型配置的一部分）配置如下：

*   操作类型：审核
*   连接对象：酒吧
*   [动词时态到这里]
*   附件布局：地图
*   数字：bar.rating（数字选择器）、foo（标题）、points（单位）
*   高亮点：bar.location
*   路线：[空白]

不确定如何使用自己的自定义地图。也许您可以为每个地理点创建一个自定义地图并将其保存为 .png，然后将 .png 用于 og:image。但地图不会是交互式的。或者，只需让 og:url 指定的页面包含您想要的自定义地图。

# c# - LINQ 建议 C#

> ID：11990965
> 
> 赞同：2
> 
> 时间：2012-08-16T15:48:23.720
> 
> 标签：c#, linq

我有一个问题 reg 使用 LINQ 聚合或 groupby 使用 C#

我有一个像这样的用户 IList：

```
Name--dept--age--sex
n1--d1--22--M
n1--d2--22--M
n2--d4--23--F
n2--d2--23--F
n3--d5--21--F 
```

基于上面的IList，我想生成另一个如下格式的User IList。

```
Name--age--sex--concatdept
n1--22--M--d1,d2
n2--23--F--d4,d2
n3--21--F--d5 
```

有人可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T15:52:41.403

```
from u in users
group u by new { u.Name, u.Age, u.Sex } into g
select new
{
   g.Key.Name,
   g.Key.Age,
   g.Key.Sex,
   string.Join(",", g.Select(u1 => u1.dept))
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T15:53:06.567

所以你只想按名称、年龄和性别对部门进行分组？听起来像你想要的：

```
var query = people.GroupBy(person => new { person.Age, person.Sex },
                           person => person.Department);

foreach (var group in query)
{
    Console.WriteLine(group.Key);
    foreach (var department in group)
    {
        Console.WriteLine("  {0}", department);
    }
} 
```

（当然，或者你想对部门做的任何事情。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:54:20.673

```
userList
    .GroupBy(u => u.Name)
    .Select(g=>new{group = g, first = g.First()})
    .Select(x=>
      new
      {
         x.first.Name,
         x.first.Age,
         x.first.Sex,
         concatdept = string.Join(",", x.group.Select(xx => xx.Dept))}) 
```

# android - 找不到垂直的 setRotation/setOrientation 值

> ID：11990966
> 
> 赞同：0
> 
> 时间：2012-08-16T15:48:27.650
> 
> 标签：android, rotation, android-relativelayout

我正在尝试`RelativeLayout`用 Java 制作一个。

问题是我找不到使我的代码适合垂直布局的值：

```
//Build version is just to avoid the deprecated setOrientation
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
    relative.setRotation(HORIZONTAL);
}
else {
    relative.setOrientation(HORIZONTAL);
} 
```

它适用于`HORIZONTAL`，但不适用于`VERTICAL`。我已经尝试过`PORTRAIT`并且`VERTICAL`Eclipse 没有给我任何响应（没有更正或快速修复）来解决这个问题。

有谁知道水平旋转有什么用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:55:32.743

`RelativeLayout`布局没有方向。也就是说，布局中的所有组件都是相对于其他组件的。

`LinearLayout`是可以设置水平或垂直的人

# c - 有趣的 C 语法问题 x ->

> ID：11990970
> 
> 赞同：0
> 
> 时间：2012-08-16T15:48:37.807
> 
> 标签：c

我不清楚这个结构内部的一些语法。有人可以解释一下代码的以下`x->`部分。那有什么作用？这是另一种取消引用的方式吗？

```
void rectangle_init(t_rectangle *x)
{
    x->x0=-1;
    x->y0=-1;
    x->x1=1;
    x->y1=1;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T15:51:09.537

运算符是取消引用和访问成员的`->`简写；当你写

```
x->x0 
```

就像你写的一样

```
(*x).x0 
```

引入速记是因为它经常`struct`通过指针访问 s 的成员，并且“原始”语法看起来不必要地复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:55:20.860

一般来说：当你有一个像 *x 这样的指针并且你想改变 x 中的一个元素时，使用 x->xxx = ... 如果它不是一个指针（例如 y），那么使用 y.xxx = 。 ..

# jquery - 使用带有表格排序器插件的选择标签并将其默认为给定值

> ID：11990972
> 
> 赞同：0
> 
> 时间：2012-08-16T15:48:47.433
> 
> 标签：jquery, ajax, jquery-plugins, tablesorter

我有一个带有下拉框的表格，允许用户选择不同的选项。我需要显示加载表格时的默认选择是什么。到目前为止，这是我的代码：

```
 //get info for defect dropdown
        var myselectoptions = '';
        for(y=0;y<data.defect2.length; y++)
        {
            defect2 = data.defect2[y];
        defect3 = defect2.substring(0,30);
            myselectoptions += '<option value="'+data.defect_id[y]+'">'+defect3+'</option>';    
        }

        if(data.isbn2 === null){
                $("#inventoryUpdate").append('<tr><td>No Records Found</td></tr>');
            }else{
        for(var x=0;x<data.isbn2.length;x++)
                {

        $("#inventoryUpdate").append('<tr><td id="tableSKU">'+data.sku[x]+'</td><td id="tableISBN">'+data.isbn2[x]+
                 '</td><td><input type="text" id="tableQuantity" value="'+data.quantity[x]+
                 '"/></td><td><select id="tableDefect">'+myselectoptions+
                 '"</select></td><td><input type="text" id="tableSource" value="'+data.source[x]+
                 '"/></td><td><input type="text" id="tableFeature" value="'+data.feature[x]+
                 '"/></td><td><input type="text" id="tableWater" value="'+data.water[x]+
                 '"/></td><td><input type="text" id="tableLocation" value="'+data.location[x]+
                '"/></td><td><input type="text" id="tableProcessDate" value="'+data.processDate[x]+
                '"/></td><td><input type="text" id="tableBookType" value="'+data.booktype[x]+
                '"/></td><td><input type="text" id="tableCreatedBy" value="'+data.created[x]+
                '"/></td><td><input type="text" id="tableModifiedBy" value="'+data.modified[x]+
                '"/></td></tr>');
                                    }
        $("#inventoryUpdate").trigger("update"); 
```

我知道如果它是一个常规的下拉菜单，我可以使用 selected="selected"（我试图这样做，

```
'<option value="'+data.defect_id[y]+'"selected="'+data.defect[y]+'">... 
```

），但在这种情况下我该怎么做呢？

编辑：所选数据在 data.defect[x] 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:36:53.153

尝试使用三元运算符（[示例](http://javascript.about.com/od/byexample/a/ternary-example.htm)）：

```
myselectoptions += '<option value="'+data.defect_id[y]+'"' +
 (data.defect[y] ? ' selected="selected"' : '') + '>'+defect3+'</option>'; 
```

# php - 在没有括号的情况下对RegEx中以竖线分隔的选项进行分组？

> ID：11990974
> 
> 赞同：3
> 
> 时间：2012-08-16T15:48:58.727
> 
> 标签：php, regex, backreference

是否可以在不使用括号的情况下对正则表达式的部分进行分组？或者，换句话说，与某些括号内的陈述不匹配？这就是我的意思——考虑以下正则表达式：

```
 $pattern = '/^(what|where|who) (are|is) (.+)$/i';
 preg_match($pattern, $input, $matches); 
```

现在。注意前两个子查询——带有竖线的子查询。我如何防止那些出现？如果`$input`是“他是谁”，我希望“他”是唯一匹配的子查询。

我明白，在这个例子中，我可以抓住`$matches[3]`，这会给我正确的结果。但是，由于我的应用程序的性质，我正在动态生成正则表达式，并且结构不会总是像我在这个示例中那样。我可以有 X 个竖线分隔的子查询和 Y`(.+)`个子查询。我只想匹配`(.+)`那些。

是否有可能做到这一点？如有必要，我可以重写我的正则表达式，但我不知道如何在不使用括号的情况下对语句进行分组，括号标记子查询。如果重要的话，我正在使用 PHP。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T15:51:42.813

您可以消除前两个分组中的反向引用，如下所示：

```
$pattern = '/^(?:what|where|who) (?:are|is) (.+)$/i'; 
```

左`?:`圆括号后告诉正则表达式引擎不要创建此分组的反向引用。每当您不打算使用反向引用时，最好将其包括在内以进行优化。

# c++ - F11 逐行调试仅我的.cpp？

> ID：11990983
> 
> 赞同：5
> 
> 时间：2012-08-16T15:49:28.087
> 
> 标签：c++, visual-studio-2010

我正在开发一个 OpenCV 应用程序，我需要调试我的代码（Visual Studio 2010，opencv with cmake）。

我想逐行调试以查看我的应用程序崩溃的确切位置。我正在尝试使用`F11`的问题是它`F11`向我显示了外部代码（opencv 库、std 库等）。

有没有其他方法可以不在我的代码中放置大量断点？

```
 int main(void) {
    vector<int> myVec;
    myVec.push_back(1);
    //> Do other stuff
 } 
```

如果我尝试`F11`使用此代码，Visual Studio 也会调试矢量库文件，我想避免这种情况。我只想跟随我的 main(); 中的代码流。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:25:44.887

嗨，正如我在 VS2010 中的评论中已经提到的，避免进入 STL 代码的唯一方法是修改注册表项，如本文[所述](https://stackoverflow.com/questions/5334414/auto-skip-stl-functions-during-step-by-step-debugging-in-msvc2010)。

对于 VS2012，还有另一种使用[Visualizers](http://blogs.msdn.com/b/vcblog/archive/2012/07/12/10329460.aspx?PageIndex=2)的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:52:34.230

您不能进入外部代码（除非可能将其显示为程序集）。

您应该使用`F10`to step to next 而不是进入这样的函数。如果您在此类外部函数代码中，也可以使用`Shift`+`F11`返回到下一行（在当前函数之后）。

# clojure - 如何遍历 Clojure 中的嵌套数组哈希结构？

> ID：11990986
> 
> 赞同：1
> 
> 时间：2012-08-16T15:49:29.583
> 
> 标签：clojure

我想在一个数据结构中存储多个配置条目（可以灵活扩展），如下所示：

```
(def config [{:host "test", :port 1},{:host "testtest", :port 2}]) 
```

稍后我想迭代并处理该数组中的每个散列。

有人可以指出如何在 Clojure 中做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T16:04:07.713

您可以使用`for`（或者`doseq`如果您只想要副作用）循环存储在向量中的每个地图。如果您事先知道它们，您甚至可以使用[解构](http://blog.jayfields.com/2010/07/clojure-destructuring.html)来绑定地图的各个键：

```
(def config [{:host "test", :port 1},{:host "testtest", :port 2}])

(for [{h :host p :port} config]
  (format "host: %s ; port: %s" h p))

; => ("host: test ; port: 1" "host: testtest ; port: 2") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T16:04:56.197

一种方便的方法是使用地图

```
 (map #(print (:host %1)) config) 
```

或者只是一般来说

```
 (map my-processing-func config) 
```

# html - 存在水平滚动条时右对齐元素

> ID：11990993
> 
> 赞同：0
> 
> 时间：2012-08-16T15:50:16.883
> 
> 标签：html, css, layout, scrollbar

我有一个页面，我希望一个元素右对齐，同时我的元素可能很宽并导致水平滚动条。例如：

```
<body>
<div style="float:right">Stay right</div>
<div style="white-space:nowrap; clear:both; font-size:2em">
    Wide child element which determines the width of the page.
</div>
</body> 
```

如果宽元素适合浏览器窗口，则此方法可以正常工作。但是如果浏览器窗口太小以至于水平滚动条出现，“保持正确”元素将与窗口而不是页面对齐：

![错误的右对齐](../Images/c1838a061b373eb635a7ee0513aace6e.png)

如果我移动滚动条，“保持正确”元素会移动并且不会真正对齐任何东西。

如果在整个页面周围添加一个表格，它会做我不想要的：

```
<body>
<table width="100%"><tr><td>
<div style="float:right">Stay right</div>
<div style="white-space:nowrap; clear:both; font-size:2em">
    Wide child element which determines the width of the page.
</div>
</td></tr></table>
</body> 
```

无论浏览器窗口大小如何，“保持正确”元素都将与宽子元素的右侧对齐。

编辑：上面基于表格的解决方案将向右对齐宽子元素的宽度***或***窗口宽度的***最大值。***实际上，这为页面提供了由页面内容（即宽子元素）确定的“最小宽度”。这就是我想要的——这在原文中并不清楚，抱歉。

 *我想知道是否有比将整个页面包装在表格中更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:40:35.487

这是一个非常有趣的问题。它实际上发生是因为 div 上的计算宽度匹配窗口大小（和正文大小）而不是文本的宽度。浮动文本在渲染时会查看它的容器的宽度/高度（并且因为该计算值实际上是窗口的大小，浮动停止在窗口的边缘）。

这实际上并不经常发生，因为大多数网站使用类似 grid960/foundation/etc 的东西，并且提供了最小/最大宽度（您可能发现设置宽度可以解决您的问题）。

我不知道动态大小的文本（只有 css）的一个非常好的解决方案......如果不使用表格，我唯一能想到的就是使用`clearfix`. 它实际上是为带有浮动子元素的元素使用/创建的（为了给它们一个正确的宽度/高度。浮动元素通常不会影响容器的尺寸），但在这种情况下它也可以工作。

```
<body>
    <div class="clearfix">
        <div style="float:right">Stay right</div>
        <div style="white-space:nowrap; clear:both; font-size:2em">
            Wide child element which determines the width of the page.
        </div>
    </div>
</body> 
```

**编辑**：我撒谎了，我想出了第二种（更好的）方法，但它确实需要更现代的浏览器。它是使用带有`display: inline-block`OR的包装器`display: table`。它实际上只是其中的一个子集，`clearfix`但如果您能够摆脱基于 IE8+ 的情况，它就会起作用。

```
<body>
    <div style="display:inline-block">
        <div style="float:right">Stay right</div>
        <div style="white-space:nowrap; clear:both; font-size:2em">
            Wide child element which determines the width of the page.
        </div>
    </div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:16:45.713

切勿将整个页面包装在表格中。自 2000 年左右以来，它就会弄乱您的 HTML。

* * *

我认为您想要一个`fixed`位置`div`，它将元素与窗口而不是页面对齐：

```
.myDivThatFloatsRight {
   position: fixed;
   top: 10px;
   right: 10px;
} 
```*

# javascript - asp.net javascript .click() 事件未在服务器上触发

> ID：11990995
> 
> 赞同：0
> 
> 时间：2012-08-16T15:50:21.160
> 
> 标签：javascript, asp.net, iis, click

我有以下代码在开发机器上运行良好。但是，当我将它部署到 IIS 时，`the .click()`不会触发。

1.  I have drop down box, when a status is selected, I add the following code to open up a RadWindow

    ```
    if (ddlStatusID.SelectedValue.ToString() == "2")
         btnUpdateStatus.Attributes.Add("onclick", "return OpenWindow2('" + 
         ResolveUrl("~/Request/AddBillableTime.aspx?  RequestId=" + RequestId.ToString()) +  
    "','650','320');");
    else
       btnUpdateStatus.Attributes.Add("onclick", ""); 
    ```

2.  在弹出页面中，当用户单击我添加的按钮时，请执行以下操作

    ```
    ClientScript.RegisterStartupScript(this.GetType(), "CloseWindow", 
     "ClosePopup();", true); 
    ```

这是 ClosePopup javascript。

```
function ClosePopup() {
    //debugger;
    alert('This is before closing the window');
    var oWindow = GetRadWindow();
    oWindow.argument = null;
    oWindow.close();
    alert('This is after closing the window');
    oWindow.BrowserWindow.ButtonClick();
    } 
```

1.  在主窗口中，我有以下 javascript，它在上述 javascript 的最后一行调用。

    ```
    function ButtonClick() {
    //debugger;
    alert('This is before button click!');
    var btnUpdateStatus =   
    document.getElementById('ctl00_ContentPlaceHolder1_btnUpdateStatus');
    alert('This is getting the button!');
    btnUpdateStatus.setAttribute("onclick", "");
    alert('This is setting the button!');
    btnUpdateStatus.click();
    alert('This is after clicking the button!'); 
    ```

    }

我已经使用警报来检查 javascript 函数的执行程度。

当我使用 Visual Studio 运行它以及在本地 IIS 服务器中托管它时，整个功能都运行良好。但是，当我将它部署到服务器时，click() 事件停止触发。

请让我知道代码中是否有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:55:26.553

由于我被分配了一项新任务，因此我没有时间研究这个问题。但是一旦我回到相同的任务中，就必须修复它。我从我的一个朋友那里得到了一些帮助来解决这个问题。我不得不稍微改变一下当前的逻辑，并在下面解释了解决方案。

我更改了`ButtonClick`如下功能以使用该功能创建手动回帖到页面`__doPostBack`。

```
function ButtonClick() {
__doPostBack('btnUpdatePage', '');
return;
} 
```

我从`Page_Load`页面的方法处理了回帖。

```
if (Request["__EVENTTARGET"] == "btnUpdatePage")
{
     UpdateStatus();
} 
```

如果回发事件目标与`__doPostBack`方法中分配的事件目标匹配，那么我调用一个方法来更新状态。

这样我就可以避免这个问题。但我不知道为什么没有使用旧`ButtonClick`函数触发事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:19:53.640

如果代码在您的 PC 上运行良好，那么对我来说唯一看起来可疑的是以下 2 行：

```
1\. document.getElementById('ctl00_ContentPlaceHolder1_btnUpdateStatus');

2\. btnUpdateStatus.setAttribute("onclick", ""); 
```

对于第一行，您应该这样做，而不是：

```
document.getElementById('<%=btnUpdateStatus.ClientID%>'); 
```

对于第二行，您似乎正在将`onclick`处理程序设置为`""`基本上不应该做任何事情。

这可能根本不是问题。最好的办法是使用 Firebug 对其进行调试，在被调用的适当 Javascript 函数中放置一个断点。

# api - Tumblr API - OAuth 问题：OAuth 验证器和 RESTConsole

> ID：11990996
> 
> 赞同：2
> 
> 时间：2012-08-16T15:50:24.420
> 
> 标签：api, rest, oauth, tumblr

尝试在 Chrome 中使用 Tumblr 的 API 和 RESTConsole 获取博客关注者（不是构建应用程序，只是想检查请求响应）。

我是 Tumblr 的 API 和 RESTConsole 的新手，所以这里有两个可能的错误来源。

我已经 ...

1.  在 Tumblr 上注册了一个应用程序，在此过程中接收 OAuth Consumer Key 和 Secret Key。
2.  进入 REST 控制台我的目标：[http](http://api.tumblr.com/v2/blog/) : //api.tumblr.com/v2/blog/ {blogname}.tumblr.com/followers
3.  在 REST 控制台的“设置 oAuth”窗口中输入我的 OAuth 消费者密钥和秘密密钥，以及 Tumblr 的请求令牌 URL、访问令牌 URL 和授权 URL。
4.  在 Tumblr 提示时批准对我的应用程序的读/写访问权限。
5.  在 REST 控制台的 oAuth 窗口中输入提供的 Token Key 和 Token Secret。

当我尝试获取关注者数量的 GET 请求时（在我自己的博客或其他人的博客上），Tumblr 返回 401，“未授权”。我的博客的首选项页面列出了我尝试使用的具有访问权限的应用程序。

我已经尝试在 REST 控制台的请求参数字段中放置 base-hostname:{blogname}.tumblr.com；我收到同样的错误。我尝试从 Tumblr 的 API（排队帖子）运行不同的 OAuth 方法并收到相同的错误。

帮助？

谢谢。如果不清楚，请告诉我。

编辑：对不起，我想补充一下——我想我可能需要 Oauth Verifier。我一直找不到这个令牌，或者不知道如何获得它。

**编辑 (2)：因此，Tumblr 的 API 需要来自 REST 控制台的逗号分隔符。谢谢大家。**

''

扎克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:17:50.943

```
$conskey = "CONSUMER KEY";
$conssec = "CONSUMER SECRET";

$tumblr_blog = "myblog.tumblr.com";
$to_be_posted = "This is the text to be posted";

$oauth = new OAuth($conskey,$conssec);
$oauth->fetch("http://api.tumblr.com/v2/user/following", array('offset'=>0) ,OAUTH_HTTP_METHOD_GET);

$result = json_decode($oauth->getLastResponse());

foreach($result->response->blogs as $key){
  echo $key->url;
} 
```

上面的代码将检索您的关注者列表。

希望这可以帮助。