# StackOverflow 问答 000830000-000830999

# jquery - 类似于 Stackoverflow 的 JQuery 评论框？

> ID：830003
> 
> 赞同：0
> 
> 时间：2009-05-06T14:53:08.147
> 
> 标签：jquery, asp.net-mvc

前段时间我问过如何制作像 Stackoverflow 这样的可折叠评论框

原始问题可[在此处找到](https://stackoverflow.com/questions/456163/how-to-make-collapsible-comment-box-like-stackoverflow)

但是从那以后我遇到了另一个我不完全确定如何解决的问题，我很确定我以与原始问题相同的方式解决它，但不太确定语法。

基本上我的问题是，我添加了一个函数来限制用户在评论中输入的字符数，并显示剩余的字符。

但是，由于列表中可能有许多注释框，因此脚本仅针对列表中的第一个执行，并且我需要是动态的。

换句话说，就像在我的原始问题中打开评论框的链接一样，每个链接都有一个唯一的 ID。

如何对监视字符输入的脚本执行相同操作。

```
$(function(){
    $('#comment').keyup(function(){
        limitChars('comment', 255, 'charlimitinfo');
    })
}); 
```

**更新：**我确实通过做这样的事情让他们变得充满活力

```
$(function(){

    $('.comment-<%=ViewData.Model.Entry.EntryID %>').keyup(function(){
        limitChars('comment-<%=ViewData.Model.Entry.EntryID %>', 255, 'charlimitinfo');
    })
}); 
```

但是，当您打开一个然后打开另一个时，第二个会控制...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T15:08:31.633

根据我的想法，您的评论框是动态添加的。问题是，由于您有多个不起作用，因为**id 是唯一的**，因此它仅适用于一个，因此您可以在控件中将类设置为“comment”，而不是像您一样通过 id 选择它们标签并以这种方式选择它们。前任：

```
 $(function(){
   $('.comment').keyup(function(){
    limitChars('comment', 255, 'charlimitinfo');
   })
}); 
```

您的文本标签示例：

```
 <textarea cols="20" rows="10" class="comment"></textarea> 
```

**编辑**可以工作的方式是让您的 jquery 设置为条件的方式，但是每个标签都必须有一个唯一的名称，或者向类添加一些内容以使其唯一，但是 jquery 仍然会知道它属于选择器分支或为每个 id 标签附加不同的数字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T15:09:38.417

您的选择器需要在 css 类 $(".comment") 上，而不是 id $("#comment") 上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T15:56:19.803

我实际上解决了我自己的问题......

打开第二个评论框时它无法正常工作的问题是我忘记为在您键入时会更新的唯一 ID 分配剩余的字符数。

```
<script language="javascript">
function limitChars(textid, limit, infodiv)
{
    var text = $('.'+textid).val(); 
    var textlength = text.length;
    if(textlength > limit)
    {
        $('#' + infodiv).html('You cannot write more then '+limit+' characters!');
        $('#'+textid).val(text.substr(0,limit));
        return false;
    }
    else
    {
        $('#' + infodiv).html('You have '+ (limit - textlength) +' characters left.');
        return true;
    }
}

$(function(){

    $('.comment-<%=ViewData.Model.Entry.EntryID %>').keyup(function(){
        limitChars('comment-<%=ViewData.Model.Entry.EntryID %>', 255, 'charlimitinfo-<%=ViewData.Model.Entry.EntryID %>');
    })
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T16:18:30.763

您会注意到 SO 以如下形式使用唯一 ID：

```
<form class="post-comments" id="form-comments-459429"> 
```

..我在我创建的上传控件中使用了类似的方法。我可以将上传控件多次呈现到页面上，并通过 ajax 从部分视图中呈现 - 每次创建视图时，都会为表单分配一个唯一的 id，并且 jQuery 脚本附带它，所以在你的情况下它可能看起来像这样：

```
$('#comment-1234') 
```

..这样，每个 jQuery 脚本只适用于它“附加”到的特定表单。

# networking - 我们可以使用wireshark或ethereal从第三台机器嗅探网络中两台机器之间的数据包吗

> ID：830014
> 
> 赞同：0
> 
> 时间：2009-05-06T14:55:31.133
> 
> 标签：networking, wireshark

我有一个小型网络，其中有 2 个电子设备和一个使用交换机连接的桌面。通过安装了 Ethereal/wireshark 的桌面，我可以嗅探两个电子设备之间正在通信的数据包吗？

我无法在任何一个电子设备上安装 ethereal 或 wireshark，但需要通过我的桌面监控这两个设备之间的流量，该桌面通过同一个交换机连接。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-06T15:04:08.167

将交换机更改为一个好的老式集线器，然后像往常一样嗅探流量。当然，这对你来说可能也不可能，但我想我至少会指出这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T14:58:59.223

是的，如果您的交换机支持镜像选项，该选项允许您将所有 paquet 复制到交换机上的指定端口，您的计算机将在该端口上嗅探数据包。否则我认为这是不可能的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T14:58:49.880

您将不得不使用[该隐和亚伯](http://www.oxid.it/cain.html)或类似的东西。换句话说，你需要使用 ARP 中毒。不知道是不是违法。但它应该是。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T15:04:28.413

如果您有一台带有两个以太网端口的计算机，请将其配置为网桥，连接两个设备并使用wireshark 嗅探您的心。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-06-07T23:36:55.520

集线器将是最简单的方法。接下来使用 SPAN 端口进行切换。但是，如果您没有其中任何一个，并且您提到您有一台带有两个端口的计算机，您可以在它们之间设置桥接。但是，如果您可以配置两个电子设备的 IP 地址，将桌面设置为路由器，实际上会容易得多。具体来说，如果您正在运行 Linux（或者可以在其上启动带有wireshark 的 Linux LiveCD），您可以非常轻松地为设备 1 分配 IP 地址 10.0.0.2，默认网关为 10.0.0.1（假设您可以将设备设置为使用静态 IP；如果他们使用 DHCP，则必须在 linux 机器上设置 DHCP 服务器，这超出了范围）。使用默认网关 10.0.1.1 设置 IP 地址为 10.0.1.2 的第二台设备。设置 linux 机器，使接口 1 (eth0) 的 IP 为 10。0.0.1 和接口 2 (eth1) 的 IP 为 10.0.1.1。将所有 4 个接口插入交换机（您也可以将设备直接连接到每个端口，但根据设备的使用年限，它们可能需要交叉电缆）最后一步是启用路由；在 linux 机器上以 root 身份执行 echo 1 > /proc/sys/net/ipv4/ip_forward 现在这两个设备将需要通过 linux 路由器，以便您可以嗅探流量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T15:00:11.140

通常，要通过交换机嗅探数据包，您需要进行 ARP 中毒攻击（因此交换机会复制嗅探接口上的所有数据包）。有针对这种 ARP 中毒攻击的工具（Cain & Abel 就是一个很好的例子）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-03-31T02:27:38.177

有两种方法可以做到这一点：

1.  将您的嗅探器与 Wireshark 和两个设备连接到集线器（如果您仍然可以找到其中一个...）
2.  使用具有端口镜像功能的交换机。您可以将交换机配置为将来自某些端口的数据包镜像到镜像端口。您将 Wireshark 电脑连接到镜像端口。

# java - Spring MVC @SessionAttributes 混乱！

> ID：830017
> 
> 赞同：3
> 
> 时间：2009-05-06T14:56:15.237
> 
> 标签：java, spring-mvc, session

我正在使用 2.5 并通过注释做所有事情。

我有一个简单的表单，允许用户编辑对象。它背后的控制器创建对象并在 GET 上将其添加到模型中，并在 POST（提交）上处理更改。它工作正常，但我不明白为什么。对象永远不会显式添加到会话中，并且对象的“id”不会传递给提交方法。控制器的提交方法如何知道对象的“id”值？

出现这个问题的原因是我有另一个表单/控制器，它与上面的几乎相同，但除非我将对象添加到@SessionAttributes，否则它不会“工作”。不同之处在于这个特定控制器使用的对象引用了另一个延迟加载的对象（我在幕后使用 Hibernate）。当我提交表单而不将父对象放入 SessionAttributes 时，我会收到 DataIntegrityViolationException，因为我从不加载引用的对象。

当我将父对象添加到 @SessionAttributes 时，问题神奇地消失了。我说的很神奇，因为即使我在 GET 上将父对象放入会话中，我仍然从未显式加载引用的对象，因此它应该为 null（或空代理或发生任何情况）。

世界上到底发生了什么？我需要一些帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-03-08T12:24:17.363

该对象很可能在提交阶段重新创建。id 可能“存储”在隐藏的表单字段中。

你应该小心会话属性，除非我有很好的理由，否则我总是尽量避免它。与 Hibernate 结合使用会让人头疼。

如果必须，请使用完全初始化的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-06T08:49:27.813

> 控制器的提交方法如何知道对象的“id”值？

控制器不知道“id”。我认为 Spring 使用默认构造函数创建新对象并将表单数据填充到其中。Hibernate 必须认为这是一个新对象，并以新的 id 将其存储到数据库中。

# file - Haskell：编写文本文件并将其解析回原始格式

> ID：830021
> 
> 赞同：8
> 
> 时间：2009-05-06T14:57:29.210
> 
> 标签：file, parsing, haskell

我有一个格式为 [(String,String)] 的元组列表，我需要一个函数将列表的内容写入文本文件，然后是另一个函数将该文本文件作为相同的元组列表读取。这是我的保存功能：

```
save :: Table -> IO()
save [] = writeFile "database.txt" ""
save zs = do { writeFile "database.txt" "" ; sequence_ [appendFile "database.txt" ("("++a++","++b++")\n") | (a,b) <- zs] } 
```

这对文本文件来说是一种很好的格式吗？那么我如何能够读取该文本文件并将其转换回元组列表？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-06T15:49:54.810

定义在`Prelude`,

```
type ShowS = String -> String
class Show a where
    showsPrec :: Int -> a -> ShowS
    show :: a -> String
    showList :: [a] -> ShowS

type ReadS a = String -> [(a, String)]
class Read a where
    readsPrec :: Int -> ReadS a
    readList :: ReadS [a]
read :: (Read a) => String -> a 
```

简而言之，这些是 Haskell 中的标准“序列化”方法。 `show :: (Show a) => a -> String`可以将任何作为的实例`Show`转换为字符串，并且`read :: (Read a) => String -> a`可以将字符串转换为任何作为实例的`Read`（或抛出异常）。

标准库中的大多数内置类型和数据结构都`Show`定义了`Read`实例；如果您要从它们中组合部分，则您的类型也已定义`Show`和`Read`实例。

```
type Table = [(String, String)]

load :: (Read a) => FilePath -> IO a
load f = do s <- readFile f
            return (read s)

save :: (Show a) => a -> FilePath -> IO ()
save x f = writeFile f (show x) 
```

如果`Table`是数据类型，您必须请求实例，但您可以请求编译器自动为您派生它们。

```
data Table = Table [(String, String)]
    deriving (Read, Show) 
```

有时这是不可能的，您必须定义自己的实例。

```
instance Show Table where
    showsPrec p x = ...
instance Read Table where
    readsPrec p x = ... 
```

但这不应该是常见的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T22:22:23.870

/方法可以正常工作，我也使用它，但仅适用于小值`show`。`read`在更大、更复杂的值`read`上会非常慢。

这个人为的例子展示了以下的糟糕表现`read`：

```
data RevList a = (RevList a) :< a | Nil
  deriving (Show, Read)

ghci> read "(((((((((((((((Nil)))))))))))))))" :: RevList Int 
```

此外，`read`将无法读取一些有效的 Haskell 表达式，尤其是那些使用中缀构造函数的表达式（如`:<`我的示例中的）。这样做的原因`read`是没有意识到运营商的固定性。这也是为什么`show $ Nil :< 1 :< 2 :< 3`会产生很多看似多余的括号的原因。

如果您想对更大的值进行序列化，我建议您使用其他一些库，例如[Data.Binary](http://code.haskell.org/binary/)。这会比简单的要复杂一些`show`，主要是因为缺少`deriving Binary`. 但是，有各种通用编程解决方案可以为您提供`deriving`类似代理。

**结论：**我想说，使用`show`/`read`解决方案直到你达到它的极限（可能一旦你开始构建实际的应用程序），然后开始寻找更具可扩展性（但也更复杂）的东西，比如 Data.Binary。

* * *

旁注：对于那些对解析器和更高级的 Haskell 东西感兴趣的人；我给出的例子来自论文：[Haskel Do You Read Me?](http://www.cs.uu.nl/wiki/pub/Center/TTTAS/paper-read.pdf) , 在另一种类似*快速* `read`的功能上。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T15:45:31.607

对于您当前的函数，当列表中的字符串包含“，”或“）”时会出现问题，因为当您再次尝试读取数据时，无法找出字符串的结束位置。每当这些字符出现在字符串中时，您都需要以某种方式对其进行转义。

它更易于使用[`show`](http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:show)并将[`read`](http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:read)您的数据转换为字符串，然后自行完成：

```
save :: Table -> IO ()
save zs = writeFile "database.txt" (show zs) 
```

`show`转义特殊字符并确保数据采用 . 可以解析的格式`read`。要加载数据，您可以将文件读入字符串并将其传递给以`read`将其转换为所需的数据结构。

# asp.net - 网站/Webservice 部署环境 diff/monitor？

> ID：830032
> 
> 赞同：4
> 
> 时间：2009-05-06T14:59:02.250
> 
> 标签：asp.net, web-services, deployment, diff, environment

我公司的系统是由 ASP.NET 网站、Web 服务、Windows 服务和数据库的集合构建的。（总共大约 40 个）

我们维护三个环境——QA、PREPROD 和 LIVE；但是管理在每个环境中安装（和工作）的东西是一个真正的痛苦。我们似乎花了更多时间调试在实际开发功能的每个环境中安装和工作的内容。

我正在寻找环境级别的“差异”工具 - 可以告诉我环境之间有什么不同，每个环境上运行哪些服务等等。

有没有像这样的现有工具？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T15:15:28.433

我的开发团队目前正在使用一个名为`ConfigMerge`（可在 CodePlex 上获得）的工具来帮助我们对 web.config 文件进行源代码控制。您可能不太关心 SCM，但这样的工具可以帮助您管理配置文件的部署，因为您可以保留所有服务器通用的单个文件，并分解需要为每个服务器修改的特定 XML 元素服务器。让 ConfigMerge 工具创建最终结果并进行部署。

这并不能帮助您进行“配置差异”，但它可能有助于减少需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-16T15:02:24.067

我能想到的最接近的是[Visual Studio Team System Deployment Designer](http://msdn.microsoft.com/en-us/library/ms181902.aspx)。您可以设计系统模型及其逻辑部署架构，并可以根据物理部署对其进行验证。例如，您可以验证是否正确设置了虚拟目录，检查组件和服务器的版本和补丁等......

您还可以创建报告“在部署图上显示每个图以及每个应用程序、逻辑服务器、端点或区域的所有资源和设置的列表。您还可以在报告中包含部署图验证错误和警告的列表. 应用程序开发和基础设施团队可以使用此报告来共享评估应用程序需求和数据中心策略之间的冲突所需的信息。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T15:11:52.593

我们使用一个构建服务器，它负责在成功构建到我们的开发环境时自动部署站点、服务等。

因为我们使用的是 TFSBuild，所以我们使用 TFSDeployer 来监控构建质量设置。当它切换到“暂存”时，一些 powershell 脚本会执行以将构建移动到我们的暂存环境中。

对于生产，我们还使用了 TFSDeployer 并稍作改动。它不是直接进入生产文件夹，而是将其移动到生产服务器上的备份文件夹中。然后基础设施团队手动将其从他们的位置复制到最终的休息地点。这样可以确保没有人意外部署到生产环境。

总而言之，设置和解决任何问题需要花费几周的时间。从那时起，每个人都更快乐，我们总是确切地知道每个环境中的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T20:50:39.753

补充一下，您可能还想使用 FinalBuilder，它是用于构建自动化的神奇工具，它为我节省了很多时间做与您所做的类似的事情，它可以自动化整个过程，编译 Visual Studio 项目，文件比较，FTP。

希望这可以帮助。

# .net - 从常规 html 调用 ac# .net aspx 脚本

> ID：830033
> 
> 赞同：0
> 
> 时间：2009-05-06T14:59:12.203
> 
> 标签：.net, asp.net, html

我如何从常规的 html 文件中进行表单 POST。并调用以 .aspx 结尾的 .net 文件，我的 html 文件需要什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T15:01:46.940

```
<form method="Post" action="YourNETFile.aspx">
   ... other form elements
</form> 
```

然后在您的 aspx 代码后面，您可以使用以下命令访问表单元素： Request.Params["FormElementName"]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T15:03:38.823

某种形式的东西

```
<form action="location of aspx" method="Get|post">
   <input name="variable name" value="variable value" type="text|hidden|etc" />
</form> 
```

如： [http ://www.w3.org/TR/html401/interact/forms.html](http://www.w3.org/TR/html401/interact/forms.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T15:04:17.340

只是把它作为`action`形式。您需要记住的只是确保您的字段被命名为 CodeBehind 所期望的。

干杯!

ps 现在发布答案似乎是一个“节拍”的游戏

# perl - 如何在不导入外部模块的情况下在 Perl 中转换日期格式？

> ID：830042
> 
> 赞同：3
> 
> 时间：2009-05-06T15:01:41.120
> 
> 标签：perl, date, format

可能是一个简单的答案：如何在不导入外部模块的情况下进行转换？我已阅读 CPAN，但无法明确指出执行以下操作的方法：

```
Convert: 20080428 to 28-APR-08 
```

有任何想法吗？

甚至将我引导到教程将不胜感激。

问候， PIAS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T16:38:03.230

此代码在 Y10k 中失败，但这应该足够好了。正则表达式可能更严格，但如果日期已经过验证（或将以新形式验证），那么就没有关系了。

```
#!/usr/bin/perl

use strict;
use warnings;

my @mon = qw/null JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC/;

my $d = "20080428";

$d =~ s/..(..)(..)(..)/$3-$mon[$2]-$1/;

print "date is now $d\n"; 
```

或者，如果你疯了，想在正则表达式中验证（需要 Perl 5.10）：

```
#!/usr/bin/env perl5.10.0

use strict;
use warnings;

my @mon = qw/null JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC/;

my $d = join '', @ARGV;

# only validates between 1600 and 9999
# because of calendar weirdness prior to 1600 
$d =~ s/
    ^
    (?:
        # non-leap years and everything but 29th of Feb in leap years
        (?:
            1[6-9]     (?<y> [0-9]{2}) | 
            [2-9][0-9] (?<y> [0-9]{2})
        )
        (?: #any month 1st through 28th
            (?: (?<m> 0[1-9] | 1[0-2]) (?<d> 0[0-9] | 1[0-9] | 2[0-8]) )
            | #or 30th of any month but 2
            (?: (?<m>0[13-9] | 1[0-2]) (?<d> 30) )
            | # or 31st of 1, 3, 5, 7, 8, 10, or 12
            (?: (?<m>0[13578] | 1[02]) (?<d> 31) )
        )
        | # or 29th of Feb in leap years
        (?:
            (?: #centuries divisible by 4 minus the ones divisible by 100
                16          |    
                [2468][048] |
                [3579][26]
            )
            (?<y> 00)
            | #or non-centuries divisible by 4
            (?: 1[6-9] | [2-9][0-9] )
            (?<y>
                0[48]       | 
                [2468][048] |
                [13579][26]
            )
        )
        (?<m> 02) (?<d> 29)
    )
    $
/$+{y}-$mon[$+{m}]-$+{d}/x or die "invalid date: $d";

print "date is now $d\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T15:09:42.223

你检查过这些地址 [http://www.go4expert.com/forums/showthread.php?t=15533](http://www.go4expert.com/forums/showthread.php?t=15533) 和这个 perl 文档 [http://perldoc.perl.org/functions/localtime.html](http://perldoc.perl.org/functions/localtime.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T16:03:48.180

```
my %map = ( '01' => 'JAN', '02' => 'FEB', '03' => 'MAR', '04' => 'APR' ); # You can do the rest yourself ;-)
my $in = '20080428';
if ( $in =~ m/..(..)(..)(..)/ ) {
    my ( $y, $m, $d ) = ( $1, $2, $3 );
    my $out = sprintf '%02d-%s-%02d', $d, $map{$m}, $y;
}   
else {
    die "Illegal date format";
} 
```

# c# - 如何获取引发 UnauthorizedAccessException 的路径？

> ID：830066
> 
> 赞同：4
> 
> 时间：2009-05-06T15:05:35.930
> 
> 标签：c#, exception

有谁知道当您在 C# 中捕获 UnauthorizedAccessException 时是否可以访问抛出它的路径？我不希望错误消息只是导致问题的路径。我拥有的 try catch 块可以捕捉到许多不同的块，但我需要报告它并继续到下一个目录/文件而不添加整个异常消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T15:09:57.963

也许让你的错误处理更加细化，所以当它爆炸时你只捕捉一次尝试？您可以通过将有问题的代码重构为实用程序方法来做到这一点（无需重复自己） - 即

```
TryCopyFile(path1);
TryCopyFile(path2);
TryCopyFile(path3); 
```

Where`TryCopyFile`捕获异常并记录作为参数传递的（单个）路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T15:08:51.120

在 UnauthorizedAccessException 的 Message 属性中，您将看到如下内容：

```
Access to the path 'E:\Domains\xxx\wwwroot\Images\main.aspx' is denied. 
```

您可以解析此消息的路径。

# c++ - 什么时候应该在 C++ 中使用 BOOL 和 bool？

> ID：830067
> 
> 赞同：21
> 
> 时间：2009-05-06T15:06:21.780
> 
> 标签：c++, windows

什么时候应该在 C++ 中使用 BOOL 和 bool，为什么？

我认为使用 bool 更清洁、更便携，因为它是内置类型。但是，当您与遗留代码/C 代码交互，或从 .NET 与 C 代码/Windows API 进行互操作时，BOOL 是不可避免的。

所以我的策略是：在 C++ 中使用 bool。与外界对话时使用 BOOL，例如 windows DLL 中的导出函数。

是否有明确的解释何时使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-06T19:46:07.020

如果 BOOL 是某种整数类型，而且它总是这样，并且定义 BOOL 以使其正常工作，那么标准转换将自动使其正确。你不能完全互换使用它们，但你可以接近。

在界面上使用 BOOL，您必须与 Win32 API 或其他什么对话。在其他任何地方使用 bool。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-06T17:19:07.747

Matthew Wilson在[*Imperfect C++*](http://my.safaribooksonline.com/0321228774/ch13lev1sec4)`BOOL`的 13.4.2 节中讨论了、`bool`和类似内容。将两者混合可能会出现问题，因为它们通常具有不同的大小（因此指针和引用不可互换），并且不能保证具有任何特定大小。尝试使用 typedefs 或条件编译来消除和之间的差异，或者尝试允许单个布尔类型在 C 和 C++ 中工作更糟糕：[](http://my.safaribooksonline.com/0321228774/ch13lev1sec4)*`bool``BOOL``bool`*

 *```
#if defined(__cplusplus) || \
    defined(bool) /* for C compilation with C99 bool (macro) */
 typedef bool   bool_t;
#else
 typedef BOOL   bool_t;
#endif /* __cplusplus */ 
```

这种方法意味着函数的返回类型可以根据调用它的语言而有所不同；威尔逊解释说，他在自己的代码和其他人的代码中看到了不止一个由此导致的错误。他总结道：

> 解决这种缺陷的方法通常是禁欲。我从不使用`bool`任何可能跨多个链接单元访问的东西——动态/静态库、提供的目标文件——这基本上意味着不在出现在头文件之外的函数或类中。实际的答案是使用伪布尔类型，即`int`.

简而言之，他会同意你的做法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-06T16:58:48.640

显然，没有充分的理由使用`BOOL`：

[http://blogs.msdn.com/oldnewthing/archive/2008/03/25/8334558.aspx](http://blogs.msdn.com/oldnewthing/archive/2008/03/25/8334558.aspx)
[http://blogs.msdn.com/oldnewthing/archive/2004/12/22/329884.aspx](http://blogs.msdn.com/oldnewthing/archive/2004/12/22/329884.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T19:09:34.393

您应该使用的另一种情况`BOOL`：当实现一个接受或返回一个`BOOL`.

例如，[`EnumWindows()`](http://msdn.microsoft.com/en-us/library/ms633497(VS.85).aspx)获取一个指向具有以下签名的回调函数的指针：

```
BOOL CALLBACK EnumWindowsProc(      
    HWND hwnd,
    LPARAM lParam
); 
```

如果你使用`bool`这个，你将不得不对你的函数指针进行类型转换。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-01-12T20:59:31.873

如果您希望在托管程序（例如 C#）中使用用 C++ 编写的函数（例如嵌入到 DLL 库中），*则必须*使用 BOOL。如果您返回 bool，则结果将始终为真 - 这是很长一段时间以来已知的错误，显然尚未解决（VS 2010，.NET Framework 4）。

最好的问候——幽灵。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2010-01-24T00:31:21.303

我认为 "true"/"TRUE" 和 "false"/"FALSE" 是语法糖，是对从未存在的问题的解决方案。我一直认为使用和阅读“1”和“0”更容易。

当您考虑寄存器中的标志打开或关闭时，您认为是 1 和 0 还是真假？如果你想在一个变量中存储多个标志会发生什么？1 和 0 是通用的。

我认为“假”这个词太长了。当我看到一个“0”时，它在我的脑海中就像一个红色的停车标志一样突出。停车标志是红色的，因为红色会引起人们的注意。读“假”这个词就像看到一个绿色的停车标志。

所以，地狱与布尔和布尔。我默认为int。

...但是，实际上，正确地使用布尔标志是一种语言中最不担心的事情，因为它与 C++ 一样有很多出错的方法。

# dll - 在安装旧版本时，我应该如何确保我的 Visual Studio 安装程序更新 DLL？

> ID：830072
> 
> 赞同：1
> 
> 时间：2009-05-06T15:07:25.130
> 
> 标签：dll, windows-installer, vsinstaller

我最近注意到我的安装程序（VS 2008）在卸载过程中没有删除 DLL。这对我来说不是太大的问题，但以下是一个问题：当我安装*旧*版本的软件时，它不会覆盖 DLL——它会保留新版本。

当我将系统回滚到**旧**版本时，我希望一切都回滚。实现这一目标的最佳方法是什么？我是否需要创建自定义操作以在卸载时删除 DLL 以确保安全，或者是否有其他方法可以删除它们，或者是否有强制安装程序始终写入 DLL 的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T15:17:21.893

首先，您应该问自己为什么安装程序不删除文件，因为它应该删除文件，如果没有，那么它是一个 BUG（或者安装程序正在等待重新启动以删除文件）。
您可以使用日志记录运行 MSI，以发现那里发生了什么：
msiexec.exe /i /l*v

# security - 可以通过 URL 参数通过 HTTPS 安全地发送用户名和密码吗？

> ID：830074
> 
> 赞同：54
> 
> 时间：2009-05-06T15:07:34.740
> 
> 标签：security, authentication, https

昨天，我和一位同事就通过 URL 参数发送登录凭据作为身份验证手段是否安全进行了激烈辩论。他正确地指出，HTTPS 在向服务器端发送请求之前会加密 URL 中的所有非主机名/端口字符。

但是，我仍然认为这里有可能窃取这些凭据的边缘情况，并且认为它们应该通过 HTTPS POST 发送。这实际上是发送登录/令牌数据的安全方法吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2009-05-06T15:11:10.100

请求的 URL 可能会显示在**Web 服务器日志**和**浏览器历史记录/书签**中，这不是一件好事。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2009-05-06T15:26:21.623

如果您有后端数据库，请采取额外的步骤。通过表单提交用户名和密码，让您的后端返回一个令牌（guid 可以），将令牌写入数据库表并分配到期时间，然后在查询字符串中使用该令牌代替凭据. 现在您的系统将非常安全，并且您拥有唯一的会话标识符作为加分项。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-06T15:13:09.673

就证书的传输而言，他是对的。但是还有很多其他的事情需要考虑，比如浏览器历史记录、服务器日志文件、用户观看屏幕等，在这种情况下这将是一个风险。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-06T15:10:13.673

安全是一个大词。SSH 将阻止其他用户检索它，但您真的想在查询字符串上显示某人的密码吗？站在用户肩膀上的那个家伙呢？SQL注入呢？真是个坏主意，至少把它塞进表格里。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-05-06T15:12:10.487

我不知道 HTTPS 也加密了 URL，很高兴知道。

但是，从安全角度来看，可以在 URL 栏中读取凭据这一事实让我更加困扰。更不用说可能存储在浏览器历史记录中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-05-05T01:06:03.703

还有另一个我正在尝试的解决方案。您可以使用 PHP 处理程序进行会话，使用其处理程序轻松地将会话数据作为字符串直接存储到数据库中。您将需要数据库中的会话表和到期时间。通过 HTTPS 登录数据发送后，如果正确，可以将其存储在 $_SESSION 变量中，如果接口做得好，它将转到您的数据库。由于这不会暴露在 PHP 之外，因此您将拥有一个健壮的登录系统，并且在客户端 cookie 中仅存储会话 ID，而不是令牌、帐户或其他敏感数据。

参考：[http ://es.php.net/manual/en/function.session-set-save-handler.php](http://es.php.net/manual/en/function.session-set-save-handler.php)

# database - 关系数据库和版本控制：修订间隔

> ID：830084
> 
> 赞同：1
> 
> 时间：2009-05-06T15:09:47.450
> 
> 标签：database, revision

我一直在考虑如何将数据版本控制应用于我拥有的相对简单的数据库，并认为我应该做一些类似[Jim T 的帖子](https://stackoverflow.com/questions/125877/125900#125900)中提到的事情，其中​​有全局修订号（例如在 Subversion 或 Mercurial 中）和每个数据库记录有一个有效期。

> 例子：
> 
> 创造一个人。
> 
> ```
> |Name|D.O.B  |Telephone|From|To  |
> |Fred|1 april|555-29384|1   |NULL| 
> ```
> 
> 更新电话号码
> 
> ```
> |Name|D.O.B  |Telephone|From|To  |
> |Fred|1 april|555-29384|1   |1   |
> |Fred|1 april|555-43534|2   |NULL| 
> ```
> 
> 删除弗雷德：
> 
> ```
> |Name|D.O.B  |Telephone|From|To  |
> |Fred|1 april|555-29384|1   |1   |
> |Fred|1 april|555-43534|2   |2   | 
> ```

这种方法有缺点吗？好像没那么复杂。

我唯一能想到的是，它似乎会对主键产生微妙的影响，而不是独立且与数据无关的自动递增记录号。例如，如果您有这样的数据：

```
 Person: (primary key = PersonID which is an autoincrementing integer)
 |PersonID|Name|Telephone|
 |1       |Fred|555-2938|
 |2       |Lois|555-2939|
 |3       |Jim |555-1000|

 Home: (primary key = HomeID which is an autoincrementing integer)
 |HomeID|Address       |
 |1     |123 Elm St.   |
 |2     |456 Maple Ave.|

 PersonHome: (primary key = person ID and home ID)
 |PersonID|HomeID|
 |1       |1     |
 |2       |1     |
 |3       |2     | 
```

那么你不能只添加上面的 From 和 To 字段，因为你破坏了主键的唯一性。相反，我可能不得不做这样的事情（添加适当的索引来替换前面的主键的功能）：

```
 Person: (primary key = K which is an autoincrementing integer)
 |K|PersonID|Name     |Telephone|From|To  |
 |1|1       |Fred     |555-2938 |1   |NULL|
 |2|2       |Lois     |555-2939 |1   |1   |
 |3|3       |Jim      |555-1000 |1   |NULL|
 |4|4       |Sunshine |555-2000 |1   |2   |
 |5|2       |Lois     |555-1000 |2   |NULL|
 |6|4       |Daisy May|555-2000 |3   |NULL|
 |7|5       |Connor   |         |5   |NULL|

 Home: (primary key = K which is an autoincrementing integer)
 |K|HomeID|Address       |From|To  |
 |1|1     |123 Elm St.   |1   |NULL|
 |2|2     |456 Maple Ave.|1   |NULL|
 |3|3     |789 Vista Dr. |1   |3   |
 |4|3     |104 Vista Dr. |4   |NULL|   

 PersonHome: (primary key = K which is an autoincrementing integer)
 |K|PersonID|HomeID|From|To  |
 |1|1       |1     |1   |NULL|
 |2|2       |1     |1   |1   |
 |3|3       |2     |1   |NULL|
 |4|4       |3     |1   |NULL|
 |5|2       |2     |2   |NULL|
 |6|5       |2     |5   |NULL|

 Revisions: (comments here for illustration)
 |Revision|Comments                                                       |
 |1       |Initial dataset                                                |
 |2       |Lois divorced Fred and moved in with Jim                       |
 |3       |Sunshine changed her name to Daisy May                         |
 |4       |Daisy May's house was renumbered by the fire dept for 911 rules|
 |5       |Lois and Jim had a baby named Connor                           | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T20:34:50.023

我自己也在思考同样的问题！

from|to 构造的缺点是当您想要添加新版本的记录时需要更新和插入。我也担心这个结构有双重含义，它告诉你版本，例如 x | null 表示最近，它告诉你记录状态，例如 x | x 表示已删除。

历史智慧建议使用日期[http://www.dbforums.com/database-concepts-design/1641734-data-record-versioning-how-implement.html](http://www.dbforums.com/database-concepts-design/1641734-data-record-versioning-how-implement.html)

当您将数据提取到对象模型中时，使用日期并不是最好的事情。

最近，两表方法受到青睐[数据库 - 数据版本控制](https://stackoverflow.com/questions/762405/database-data-versioning)

由于需要维护重复的表，我也不太热衷于此。

如果您将解决方案修改为具有版本列和状态列，那会起作用吗？最高值的版本号是最新的，记录状态是最新的版本。

还在琢磨...

# vb.net - WCF / SSL 问题

> ID：830088
> 
> 赞同：3
> 
> 时间：2009-05-06T15:10:08.417
> 
> 标签：vb.net, wcf, ssl

我正在尝试在本地复制生产系统，但在使用这些服务时遇到问题。我已将服务器的本地实例设置为尽可能靠近生产服务器，但我的本地客户端无法使用它。但是，我的本地机器上的同一个客户端可以在生产实例中正常工作。

为了在本地使用生产系统，我使用hosts文件将所有涉及的地址重定向到127.0.0.1，并且在IIS中使用主机头。

我在本地计算机上知道的唯一区别是，我没有使用从 CA 购买的 SSL 证书，而是使用我使用 IIS 资源工具包中的 SelfSSL 创建的证书。我使用以下命令创建证书：

selfssl.exe /T /N:CN=my.url /V:365 /S:12345 /P:443 （其中 12345 是我的网站在 IIS 中的 ID）

每当我尝试在本地使用/调试客户端时，我都会收到错误消息：

“**无法激活****请求的服务‘ [https://my.url/myService.svc](https://my.url/myService.svc)** ’。有关详细信息，请参阅服务器的诊断跟踪日志。 ”

我尝试在浏览器中使用以下 URL 访问该服务：

[https://my.url/myService.svc?wsdl](https://my.url/myService.svc?wsdl)

[http://my.url/myService.svc?wsdl](http://my.url/myService.svc?wsdl)

在这两种情况下，它都返回了 wsdl XML。

谁能帮我解决这个问题？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T16:39:48.403

解决了！！...这是证书中私钥的权限问题。ASPNET 用户需要权限，我使用 winhttpcertcfg 授予他们权限：

```
winhttpcertcfg -g -c LOCAL_MACHINE\My -s my.url -a ASPNET 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-20T06:02:17.837

请检查 web.config 中的连接字符串属性。我认为您的连接字符串用于 Windows 身份验证。所以请将其更改为sql身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T15:14:00.717

确保您的 IIS 设置是 ASP.NET 2.0 而不是 1.0 或 1.1。

# asp.net - Reporting Services 2005 减去表中的 2 个值

> ID：830097
> 
> 赞同：0
> 
> 时间：2009-05-06T15:11:58.803
> 
> 标签：asp.net, sql-server, reporting-services, reportingservices-2005

我有一个费用列表显示在一个表格对象中。我想在文本框中显示两种费用之间的差异（不确定这是在表格页脚还是在组页脚中）。我能够轻松地对值求和，但我不知道如何减去值。在此示例中，假设我想显示许可费和注册费 (999-333) 的差异。我如何使用组/过滤器等来做到这一点？顺便说一句，我想在报告级别而不是在存储过程中执行此操作！提前致谢...

这是输出数据的样子：

```
FeeDescription    FeeValue
License           $999.00 
Registration      $333.00 
Inspection        $444.00 
Title             $555.00 
Tire Fee          $5.00 
Battery Fee       $1.50 
MVWEA (Lemon Law) $2.00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T12:22:37.657

我猜你正在使用一张桌子。因此，您可以使用相关单元格的 Value 属性中的表达式进行计算。对于项目级行：`=Fields!License.Value - Fields!Registration.Value`。对于组级行：`=sum(Fields!License.Value - Fields!Registration.Value)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T15:10:32.820

像这样的东西应该工作

```
=sum(iif(Fields!FeeDescription="License" or Fields!FeeDescription="Registration",Fields!FeeValue,0)) 
```

# c# - 如何在一个操作中解决多个 linq 查询而不使用基本查询？

> ID：830100
> 
> 赞同：2
> 
> 时间：2009-05-06T15:12:44.260
> 
> 标签：c#, .net, linq, linq-to-sql

我有 14 个 LINQ 查询需要用一种方法解决。它们都没有基本查询，我可以将它们作为子查询挂起，然后将结果存储为匿名类型实例的属性。

与其对数据库进行 14 次单独调用，我如何确保它们都在同一个操作中被调用？

**更新**

我最终使用了一个狡猾的黑客来解决问题。我知道用户表中总是至少有一个用户，所以我最终使用了：

```
var data = (from tmp in DataContext.Users
            select new {
                Property1 = (from...),
                Property2 = (from...),
                PropertyN = (from...),
            }).First(); 
```

**更新 2**

答案之一暗示这样做可能会产生 MARS（多活动结果集）错误。这些错误是什么（我从未见过），为什么会发生，这一系列问题的整个前提有什么问题吗？即我的断言是否有缺陷，即要求数据库一次性返回所有内容会比执行 14 个完全独立的 LINQ 查询更快/更有效？

**更新 3**

我认为我的方法是多余的，从务实的角度来看，应该通过存储过程或某种延迟/混合方法来进行不同的处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T16:24:48.837

您仍然通过每个子查询对数据库进行 14 次单独调用，您只需在调用数据对象时在单个实例中执行此操作。

编辑：

当您有多个打开的数据读取器用于连接时，会发生 MARS 错误。默认情况下，在 SQl 2005 中这是关闭的。在您的查询中，虽然所有 SQL 都一键传递，但您仍然返回 14 个数据读取器。除非您告诉该连接允许多个活动结果集 (MARS)，否则数据读取器会独占该连接。

要解决此问题，您需要将每个子查询预加载到一个列表中并从该列表中运行您的子查询，或者您需要设置连接字符串的 MutlipleActiveResultSet 属性 = true。

```
<add name="Name" connectionString="Data Source=<server>;Initial Catalog=<database>;Integrated Security=True;MultipleActiveResultSets=true" providerName="System.Data.SqlClient"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T15:15:22.927

我不完全确定您的查询，但您可以将查询逻辑封装在存储过程中，将其与 LINQ to SQL 数据上下文设计器一起使用。

如果您需要独立的结果并且您真的不希望往返于数据库服务器，我认为您应该回退`SqlDataReader`并`NextResult`通过调用检索整个数据的过程来使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T15:22:58.877

您可以获取每个查询的 SQL 代码，然后将其分批发送到数据库，最后遍历 14 个结果集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T15:48:41.097

Nathan，您说这些查询不一定是相互依赖的，但都是相关的。我们需要知道的是，它们实际上是 14 个不同的结果集，还是可以组合成一个结果集。如果是后者，为什么不能为此目的创建视图或存储过程？在某些情况下，您需要使用判断来辨别何时使用其他路线以获得更好的性能并完成工作。混合方法一点也不差。

如果您需要 14 个不同的结果集，您可以使用多个活动结果集 (MARS)，方法是在连接字符串中启用它。这样，它们将在一次往返中完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T16:19:18.863

如果你修改你的“狡猾的黑客”，它应该同时运行查询：

```
var data = from a in (from x in ... select x)
           from b in (from x in ... select y)
           from c in (from x in ... select z)
           select new { A = a, B = b, C = c };
var result = data.First(); 
```

但是，它将对所有项目进行完全连接，这可能不是您希望发生的。如果查询都返回相同数量的列，则使用 IQueryable.Concat 可能会起作用：

```
var data = (from x in ... select new { Part = 1, Val = x })
    .AsQueryable() // may not be needed in your context
    .Concat(
        (from y in ... select new { Part = 2, Val = y })
            .AsQueryable()
            .Concat(
                (from z in ... select new { Part = 3, Val = z }).AsQueryable()
            )
    );
foreach (result in data)
{
    switch (result.Part)
    {
        // process each query's resultset
    }
} 
```

仍然很狡猾（并且未经测试），但应该只命中数据库一次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-14T04:38:39.247

我不确定从用户表中进行查询是否真的对您有所帮助。

在编写 LINQ 查询之前，请尝试考虑如何使用基本 SQL 来实现目标。

我不确定您到底要做什么，因为您没有提供太多代码，但是，如果您要在存储过程中执行此操作，那会是什么样子，它会返回什么？

我问这个是因为您需要的数据结构可能不适合单个查询。

如果是这样，那么您只需要重新考虑您是整个 LINQ 方法。

也许您可以提供有关您实际尝试检索的数据以及如何检索的更多信息？

干杯

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-14T23:12:43.637

不确定这是否有帮助，但想知道为什么不使用 let 关键字来增强查询。

'let' 允许您运行子查询并将结果存储在临时变量中，然后您可以在主查询中进一步使用

# remote-desktop - 远程桌面的 Unity 模式

> ID：830101
> 
> 赞同：18
> 
> 时间：2009-05-06T15:12:50.687
> 
> 标签：remote-desktop, utilities, rdp

我通常同时进行多个远程桌面会话。在这些会话中，我可能正在运行不同的应用程序。VMware Workstation 有一个 Unity 模式，允许您将客户机应用程序与主机集成。我希望能够为远程桌面会话做同样的事情。

如果我可以指向远程桌面会话上的应用程序并将其与我的主桌面“统一”，那将是真正的生产力提升。这将使应用程序摆脱被限制在限制性远程桌面窗口中的暴政。

有谁知道使这成为可能的 3rd 方实用程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-12-18T13:56:56.450

随着 RDP 7.0 的发布，如果您应用了 Windows Vista SP1 和 Windows XP SP3 所需的更新，您现在可以将 RemoteApp 用于运行 Windows Vista 或 Windows XP 的远程和/或虚拟机。

这些机器可以在 VirtualBox 或 VMWare Workation/Player 下作为虚拟机运行，而不仅仅是在 Hyper-V 下。

这有点冗长，所以我在博客文章[http://geekswithblogs.net/twickers/archive/2009/12/18/137048.aspx](http://geekswithblogs.net/twickers/archive/2009/12/18/137048.aspx)中记录了如何启用 RemoteApp 连接。

基本上，在客户端上，您必须手动编辑 RDP 文件以设置远程应用程序模式并指定您希望运行的远程应用程序。在来宾/远程系统上，您需要添加相关的注册表项以支持该命名应用程序并允许访问。

将 RDP 7.0 与 RemoteApp 的多监视器支持一起使用的优点是浮动应用程序窗口可以放置在系统上的任何监视器上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T15:21:31.180

有“本地集成远程应用程序”，它是 RDP 的一部分，用于 Windows 7 的 XP 模式中的魔法。我对此知之甚少，但它应该会给你一些东西给谷歌。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T15:21:07.563

SeamlessRDP 在 mac/linux 上执行此操作 - 但不确定是否有适用于 windows 的变体。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-17T19:27:59.030

您正在寻找 Windows Server 2008 中的[TS RemoteApp支持。](http://technet.microsoft.com/en-us/library/cc753844.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-18T18:59:06.737

Winflector [https://www.winflector.com/](https://www.winflector.com/)及其朋友也可以为此提供帮助。它还具有更好的本地化，如本地文件、打印机、串行端口......

这些程序的主要好处是您可以从任何设备（如 android）或任何浏览器使用它。

# database - 如何通过一个或几个永久会话使数百个同时运行的进程与数据库通信？

> ID：830106
> 
> 赞同：4
> 
> 时间：2009-05-06T15:13:42.823
> 
> 标签：database, perl, dbi

长话短说：**如何让数百个同时运行的进程通过一个或几个永久会话与数据库通信？**

整个故事：
我曾经构建了一个数字处理引擎，它通过一个接一个地分叉一个子节点来处理大量的大数据文件，给每个子节点少量的文件来处理。文件锁定、进度监控和结果传播发生在 Oracle 数据库中，所有（子）进程使用封装 DBI 的特定于应用程序的模块在不同时间访问。

起初这很有效，但现在随着输入数据量的增加，不断打开和关闭的数据库会话数量（每个孩子一个，而且它们的寿命可能很短）已成为一个问题。我现在想集中数据库访问，以便只有一个或几个固定数据库会话处理所有（子）进程的所有数据库访问。数据库抽象模块的存在应该使更改变得容易，因为工作实例中的函数调用可以保持不变。我的问题是我想不出一种合适的方法来增强所述模块，以便在所有进程和数据库连接器之间建立通信。

我想到了消息队列，但无法想出一种方法将一大群请求者与一个或几个数据库连接器连接起来，以便可以进行双向通信（用于收集查询结果）。
异步方法在这里可以提供帮助，因为所有请求都写入同一个队列，并且为请求提供服务的数据库连接器将“回调”以提交结果。但是我无法生成足够清晰的图像以便我可以将其绘制成代码。
线程而不是分叉可能让我更容易开始，但这现在需要对代码库进行大量更改，而我不准备对实时系统进行更改。

我想得越多，基本想法对我来说就越像是一个预分叉的 Web 服务器，只是它不提供网页而是提供数据库查询。关于挖掘什么以及在哪里挖掘的任何想法？启发我的示例（伪）代码，可能相关文章的链接，CPAN 上的现成解决方案可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T15:46:46.720

我认为你应该考虑增加一个层次。我认为[POE](http://search.cpan.org/perldoc?POE)可以处理中间层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T15:43:47.383

看看[DBD::Gofer](http://search.cpan.org/perldoc?DBD::Gofer)。它被设计成一个单独的进程来池和管理数据库连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-04-21T21:31:59.637

您可能想与您的 DBA 讨论“共享服务器”，这在 Oracle >= 10 中很容易实现。您可以将其视为服务器端的连接池。因此，当您请求连接时，您不一定要创建一个新的专用服务器进程，并在连接时将其销毁。

您也可以在您身边进行连接池。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T11:01:03.203

您可能会查看 SQLRELAY，它在代理方面也有一些其他优势。

[http://sqlrelay.sourceforge.net/sqlrelay/](http://sqlrelay.sourceforge.net/sqlrelay/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T08:22:10.223

在给定的场景中，最好使用消息队列：

*   对于工作单元锁定：对锁定/解锁单例的请求进行排队。如果无法获取锁，请重新安排工作单元稍后的时间。
*   对于进度监控：将所有进度更新放入队列中，由一些记录器/状态更新器等处理。
*   对于结果提交，将结果集放入队列中，由专门的结果编写者插入。队列条目可能会变得非常大，但任何体面的消息队列都应该能够处理这个问题。在紧要关头，我们可以将有效负载代理到文件中，并且只对文件名和位置进行排队。
*   配置数据可以在工作进程被分叉之前在启动时从数据库中读取，因此它们在分叉期间继承了完整的配置，并且不需要自己的数据库连接。

当我们这样做时，我们可以重构整个设计以使用一些长寿命的工作守护进程而不是短寿命的分叉，后者也从队列中获取它们的工作单元。这将节省所有分叉的开销。

受企业软件安装限制的限制，当时这种方法不可能实现，但现在从头开始构建类似的东西时，这对我来说是可行的方法。

# asp.net - JSON 中的 .d 是什么意思？

> ID：830112
> 
> 赞同：48
> 
> 时间：2009-05-06T15:15:28.263
> 
> 标签：asp.net, jquery, ajax, json

我有一个从 jQuery 调用的 .NET webmethod。该方法返回一些我在 DIV 元素中显示的 HTML 标记。

一旦我得到我使用的回应

```
$("#div").html(result.d); 
```

我的问题是，.d 有什么作用？我不喜欢使用我不完全理解的代码？我可以使用 Eval 获得相同的结果吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-06T15:20:00.810

您指的是 ADO.NET 数据服务吗？

我记得听过关于 JSON 返回 this 的演示文稿，我认为它只是一个包装器，以**确保有效负载是 JSON 对象**而不是数组（这是返回多个实体的情况）。

为什么要专门“d”？我想我记得他们说过类似“嗯，它必须是某种东西”之类的话。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-05T16:19:13.390

基于本教程：[JSON Web Service And jQuery with Visual Studio 2008](http://www.codeproject.com/Articles/37727/Prepare-a-JSON-Web-Service-and-access-it-with-JQue)

Web 方法返回一个以 JSON 格式序列化的产品。由于没有`JSON`类型，因此返回值为`String`JSON 格式。

在客户端，ajax 调用返回一个 JSON。

结果看起来像`{d: 'returned-string-with-JSON-format'}`

更确切地说是：`{d:'{"ID":123,"Name":"Surface Pro 2"}'}`

请注意，这`'returned-string-with-JSON-format'`是一个字符串而不是 JSON 对象，因此您**不能**这样做`result.d.ID`。

相反，您需要使用`JSON.parse(result.d)`或将其转换为 JSON 对象`eval(result.d)`

最后，你真正想要的是这样做：

```
result = JSON.parse(result.d) 
```

**更新** 还考虑这个演示，我使用字符串格式的 JSON 并将其转换为 JSON 对象：

![在此处输入图像描述](https://i.stack.imgur.com/BYsz8.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-05T08:19:16.340

ASPX 代码在这里：

```
<asp:Content runat="server" ID="BodyContent" ContentPlaceHolderID="MainContent">
    <script type="text/javascript">

        function GetData()
        {
            alert("I am called");
                $.ajax({
                    type: "POST",
                    url: "Contact.aspx/GetProducts",
                    data: "{}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (result) {

                       var data = JSON.parse(result.d)
                       alert(data.Id);

                    },
                    error:function(ex)
                    {
                        alert("Test");
                    }
                });
        }
    </script>

     <asp:TextBox ID="txtName" runat="server"></asp:TextBox>

    <asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="GetData();" />
</asp:Content> 
```

C#代码在这里：

```
public partial class Contact : Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                BindList();
            }
            int[] arr1 = new int[] { 1, 2 };
            ListBox1.SelectedValue = "1";
            ListBox1.SelectedValue = "4";

        }

        void BindList()
        {

            List<Product> lst = new List<Product>()
            {
                new Product{Id=1,Name="Photo"},
                new Product{Id=2,Name="Photo"},
                new Product{Id=3,Name="Photo"},
                new Product{Id=4,Name="Photo"}
            };
            ListBox1.DataSource = lst;
            ListBox1.DataTextField = "Name";
            ListBox1.DataValueField = "Id";
            ListBox1.DataBind();
        }

        [WebMethod]
        public static string GetProducts()
        {
            // instantiate a serializer
            JavaScriptSerializer TheSerializer = new JavaScriptSerializer();

            //optional: you can create your own custom converter
           // TheSerializer.RegisterConverters(new JavaScriptConverter[] { new MyCustomJson() });

            //var products = context.GetProducts().ToList();
            Product products = new Product() { Id = 1, Name = "Testing Services" };
            var TheJson = TheSerializer.Serialize(products);

            return TheJson;
        }

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-29T05:32:05.543

对于那些想要真正从头开始学习有关包装类的示例的人来说，这可能是非常有用的链接，其中一个类中的细节永远不会泄露给其他类，但可以通过各种方法间接访问 [http://www.c-sharpcorner .com/Blogs/12038/wrapper-class-in-C-Sharp.aspx](http://www.c-sharpcorner.com/Blogs/12038/wrapper-class-in-C-Sharp.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T15:16:37.793

`d`它返回对象“ ”中名为“ ”的字段的值`result`。

[此问题](https://stackoverflow.com/questions/800593/loop-through-json-object-list)显示了 JSON 外观的示例，请注意该`d:`字段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T15:17:54.467

d 是 .NET 代码返回的结果的一部分。如果您查看此代码，您应该会看到一个名为 d 的变量。如果它是从序列化的类生成的，那么它可能会发送该类的名称为 d 的成员。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-06T15:20:18.533

正如其他人指出的那样，它返回对象的`"d"`成员`"result"`。
如果你想有`"d"`一个变量，你可以使用这个：

```
var property = "d";
var value = result[property]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-05T08:46:37.770

很明显 $("#div").html(result.d); 在你的代码中

“result”是一个对象，d 是“result”的属性。

来解释一下，

如果你像这样创建对象，

```
var result{"id": "number", "d": "day"}; 
```

如果我们访问结果的属性是使用 jquery

```
$("#div").html(result.d); 
```

所以我们在 html 中得到的结果是

```
<html>day</html> 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-03-02T17:55:12.010

有一次，我的朋友告诉我，“d”代表 ajax 作为回报的响应中的“数据”（因为响应可以包含的不仅仅是简单的数据）。

也许是，也许不是，但你仍然可以接受它。:)

# wcf - Web 参考和服务参考有什么区别？

> ID：830118
> 
> 赞同：6
> 
> 时间：2009-05-06T15:16:12.880
> 
> 标签：wcf, visual-studio, asmx

Web 参考和服务参考有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T15:20:04.553

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T15:21:03.367

如果您指的是 Microsoft 提供服务的功能。Web 参考是一种较旧的提供服务的方式。请参阅此链接：http: [//blogs.msdn.com/lifenglu/archive/2007/06/20/add-an-old-8-0-style-web-reference-into-an-orcas-vs-9-项目.aspx](http://blogs.msdn.com/lifenglu/archive/2007/06/20/add-an-old-8-0-style-web-reference-into-an-orcas-vs-9-project.aspx)

基本上它的想法是一样的，通过 Web 提供服务，但是 WCF 为您的应用程序提供了更多选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T15:22:17.327

一个引用 settings.cs 文件[除非您打开它并重新保存它，否则它不会从 app.config 自动刷新 - 如果您对 app.config 进行编辑]，另一个引用 app.config 文件。app.config 文件中的配置块略有不同，后台服务的结构也略有不同。您的代码与对象的交互会略有不同，但最终结果是它们本质上做的是相同的事情。Web 引用是基于 2.0 的，服务​​引用来自 .NET 3.0 或 3.5 [我不确定是哪个]。

您仍然可以为 Web 引用编写代码，但如果您的应用程序以 2.0 框架为目标，则不能使用服务引用。

# .net - C++/CLI 中的垃圾回收

> ID：830119
> 
> 赞同：2
> 
> 时间：2009-05-06T15:16:24.610
> 
> 标签：.net, c++, memory-management, garbage-collection

考虑以下内容：

```
#include <iostream>

public ref class TestClass {
public:
    TestClass() { std::cerr << "TestClass()\n"; }
    ~TestClass() { std::cerr << "~TestClass()\n"; }
};

public ref class TestContainer {
public:
    TestContainer() : m_handle(gcnew TestClass) { }

private:
    TestClass^ m_handle;
};

void createContainer() {
    TestContainer^ tc = gcnew TestContainer();
        // object leaves scope and should be marked for GC(?)
}

int main() {
    createContainer();

    // Manually collect.
    System::GC::Collect();
    System::GC::WaitForPendingFinalizers();

    // ... do other stuff

    return 0;
} 
```

我的输出很简单：TestClass()

我从来没有得到〜TestClass（）。这是我在生产代码中遇到的一个问题的简化，其中一个句柄列表被多次清除和重新填充，并且从未调用句柄析构函数。

我究竟做错了什么？

真诚的，瑞恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T15:19:12.997

```
~TestClass() 
```

声明一个 Dispose 函数。

```
!TestClass() 
```

`~TestClass`将声明一个在 gc 集合上调用的终结器（相当于 C#'s ）（尽管不能保证）。

# iphone - 如何在 UIScrollView 中的滚动事件上调用方法？

> ID：830121
> 
> 赞同：0
> 
> 时间：2009-05-06T15:16:27.653
> 
> 标签：iphone, cocoa-touch, uikit, uiscrollview

我有一个 UIScrollView 对象，我想在其中实现用户滚动时发生的一些效果。每次用户开始滚动动作或滚动时，有没有办法在我的视图控制器类上调用方法？

我需要的也是当前的滚动位置。我几乎可以肯定有一些有用的东西可用。也许我可以每秒询问 50 次当前滚动偏移量之类的。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T15:20:26.333

看一下`UIScrollViewDelegate`协议。

您可以将视图控制器设置为滚动视图的委托，并在那里实现一些方法，例如：

```
– scrollViewDidScroll:
– scrollViewWillBeginDragging:
– scrollViewDidEndDragging:willDecelerate:
– scrollViewShouldScrollToTop:
– scrollViewDidScrollToTop:
– scrollViewWillBeginDecelerating:
– scrollViewDidEndDecelerating: 
```

# sql - TSQL 参数化 SPROC 问题

> ID：830123
> 
> 赞同：1
> 
> 时间：2009-05-06T15:16:50.117
> 
> 标签：sql, sql-server, sql-server-2005, tsql

我需要编写一个存储过程来更新一组类似列中的一个。这些列被命名为“UserField1”、“UserField2”等。我希望将一个参数传递给 SPROC，它将设置要更新的列。但是，我似乎无法正确获取代码。这是我尝试过的一个简化示例（它给我一个“语法不正确”的消息）：

```
create procedure UpdateUserField
    (@UserFieldNumber int, @UserFieldNewValue int)
as
    update MyTable set
        case @UserFieldNumber
        when 1 then UserField1
        when 2 then UserField2
        end
    = @UserFieldNewValue 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T15:20:58.140

使用多个 IF 怎么样？

```
CREATE PROCEDURE UpdateUserField
(
    @UserFieldNumber int,
    @UserFieldNewValue int
) AS

IF @UserFieldNumber=1
BEGIN
    UPDATE MyTable SET UserField1 = @UserFieldNewValue
END

IF @UserFieldNumber=2
BEGIN
    UPDATE MyTable SET UserField2 = @UserFieldNewValue
END 
```

或者，您可以在 exec 中构建动态 SQL

```
CREATE PROCEDURE UpdateUserField
(
    @UserFieldNumber int,
    @UserFieldNewValue int
) AS

EXEC('UPDATE MyTable SET UserField' + CONVERT(varchar(10), @UserFieldNumber) + ' = ' + CONVERT(varchar(10), @UserFieldNewValue)) 
```

但是，如果您这样做，请注意 SQL 注入，使用 int 不会有问题，其他任何您可能需要考虑风险的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T15:26:18.127

如果您不想使用动态 SQL 或多个`IF`and`UPDATE`语句，那么您可以尝试这样的事情：

```
UPDATE MyTable
SET UserField1 = CASE WHEN @UserFieldNumber = 1
        THEN @UserFieldNewValue ELSE UserField1 END,
    UserField2 = CASE WHEN @UserFieldNumber = 2
        THEN @UserFieldNewValue ELSE UserField2 END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T15:21:24.083

```
if @UserFieldNumber=1
BEGIN
    update MyTable set UserField1=@UserFieldNewValue where...
END
ELSE if @UserFieldNumber=2
BEGIN
    update MyTable set UserField2=@UserFieldNewValue where...
END
ELSE if @UserFieldNumber=3
BEGIN
    update MyTable set UserField3=@UserFieldNewValue where...
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T15:22:25.877

update 命令不接受动态字段名称。

相反，您可以做的是使用要执行的更新语句构建一个字符串，然后执行它，如下所示：

```
DECLARE @strToExecute VARCHAR(1000)
SET @strToExecute = 'UPDATE MyTable '
IF @UserFieldNumber = 1 
  SET @strToExecute = @strToExecute + ' SET UserField1 = '
IF @UserFieldNumber = 2
  SET @strToExecute = @strToExecute + ' SET UserField2 = ' 
```

等等来构建你的字符串，然后执行它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-06T15:20:34.507

我认为您不能在语句中的字段列表中使用 CASE 语句。我几乎可以肯定，您只能将 CASE 语句应用于您正在设置、返回或测试的值。

在您的示例中，您尝试使用 case 语句修改字段列表，我假设 SQL 存在问题，因为在编译和运行语句之前不会确定字段列表，这有点像鸡和蛋情况。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-06T15:23:56.230

AFAIK 你不能使用 CASE WHEN 来指定列。

不过，您可以将其包装在 Some Dynamic SQL 中。

```
CREATE PROCEDURE UpdateUserField
( 
    @UserFieldNumber int, 
    @UserFieldNewValue int
)
AS

DECLARE @sql nvarchar(max)
SET @sql = 'UPDATE MyTable SET UserField' + @UserFieldNumber + ' = ' + @UserFieldNewValue
EXEC (@sql) 
```

# c# - 需要工作流程编辑软件 - 推荐

> ID：830124
> 
> 赞同：11
> 
> 时间：2009-05-06T15:17:21.440
> 
> 标签：c#, .net, workflow, business-process-management

对于允许**用户**编辑代表业务流程的工作流的软件有什么建议吗？理想情况下是 .NET，但任何技术（winform / asp.net / wpf / 等）都可以。

我需要能够通过代码初始化/调查布局以将其映射到我的系统 - 通过对象模型或已知格式的文件。

我考虑过：

*   微软自动图形布局 - 老实说有点杂乱无章
*   .NET 的 ILOG 图 - 外观非常令人印象深刻，但对我的需求来说有点贵
*   工作流基础（编辑器托管）- 太特定于 WF（而不是 BPM）

澄清一下 -[这是我正在尝试做的事情](http://www.ilog.com/image.cfm?name=BPMNEditor.png)（这是 ILOG 工具在行动） - 尽管它不必非常丰富......

（编辑 - 我想我会和[Netron](https://stackoverflow.com/questions/830124#979973)一起前进）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T15:49:52.690

有几个带有图形编辑器的[XPDL](http://en.wikipedia.org/wiki/XML_Process_Definition_Language)工具，例如[Bonita ProEd](http://bonita.objectweb.org)：

[![Bonita ProEd](https://i.stack.imgur.com/EdtLD.jpg)](https://i.stack.imgur.com/EdtLD.jpg)
[（来源：[theserverside.com](http://www.theserverside.com/tt/articles/content/BonitaPart3/images/figure7.jpg)）]

或[Enhydra Shark](http://www.together.at/prod/workflow/tws)：

[![在此处输入图像描述](https://i.stack.imgur.com/9umAP.jpg)](https://i.stack.imgur.com/9umAP.jpg)

不知道他们对用户的友好程度如何。

还有[YAWL](http://yawlfoundation.org/)，它有一些非常友好的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T15:38:46.710

[Skelta](http://www.skelta.com/)是一个有趣的软件。虽然我们最终没有购买，因为他们奇怪的许可和定价模式。

我很想看看你最终决定实施什么，因为我们面临着同样的挑战，到目前为止，我们已经决定重新托管 WF 设计器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T09:43:51.153

标记，

我已经看到在使用自定义工作流的公司 .NET 应用程序中使用[WinGraphViz - .NET 程序](http://wingraphviz.sourceforge.net/wingraphviz/)[集依赖项分析器](http://www.drewnoakes.com/code/dependancyanalyser/)使用它。该应用程序可能不适合您的需求，因为我假设您想让用户拖放项目而不是仅仅查看工作流程？虽然这是可能的，但我不确定它会有多顺利！

无论如何，它可能会打开新的大门/新的途径来探索您寻找合适的图书馆。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-10-08T21:30:29.887

您只讨论了图形和可视化工具，但实际的工作流实现呢？我认为您的出发点是错误的——首先选择您的工作流引擎，然后再考虑流程编辑和可视化。

# django-models - 向现有 Django 模型添加字段

> ID：830130
> 
> 赞同：52
> 
> 时间：2009-05-06T15:18:32.343
> 
> 标签：django-models

我有一个有几个用户的小网站，我想向我的一个模型（以及表格）添加一个字段。问题是`syncdb`当然不会触及现有模型，我正在试图弄清楚如何将此字段添加到模型/表中而无需重新填充整个事物。

例子：

```
class Newspaper(models.Model):
    name = models.CharField()

class UserProfile(models.Model):
    user = models.ForeignKey(user, unique=True)
    reads = models.ManyToManyField(Newspaper) 
```

现在我想在不破坏用户配置文件的情况下`blank=True`向模型添加一个 URL 字段 ( ) 。`Newspaper`

有任何想法吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-05-12T19:28:54.600

没有内置的方法可以做到这一点。但是，有许多第三方项目可以为您完成。两个领先的被称为[South](http://south.aeracode.org/)和[django-evolution](http://code.google.com/p/django-evolution/)，尽管还有其他各种（包括我参与过的一个，dmigrations）。

我肯定会推荐 South - 它有许多非常简洁的功能并且运行良好。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-06T15:31:38.833

您可以尝试使用以下方法获取新字段的 SQL：

```
manage.py sql appname 
```

`appname`您的报纸班级所在的应用程序的名称在哪里。

然后，您可以`appname_newspaper`使用`ALTER TABLE`. 我不知道直接使用 Django 执行此操作的方法，因为 Django 不支持迁移。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-29T14:52:26.097

2015年回答：

运行以下命令：

```
python manage.py makemigrations
python manage.py migrate 
```

# c# - 为什么我不能使用 SubSonic 保存数据库事务？

> ID：830132
> 
> 赞同：1
> 
> 时间：2009-05-06T15:19:03.090
> 
> 标签：c#, subsonic

我有一个名为作业的表，我可以毫无问题地从表中获取数据，但保存会导致问题。这是代码和错误：

```
 Job job = new Job(JobId);

        job.Name = txtName.Text;
        job.SimsCustCode = txtSimsCustCode.Text;
        job.Mode = cboMode.Text;
        job.Interval = Convert.ToInt32(nudInterval.Text);
        job.Enabled = Convert.ToBoolean(chkEnabled.Checked);

        job.SourceHost = txtSourceHostName.Text;
        job.SourceType = cboSourceType.Text;
        job.SourceUsername = txtSourceUsername.Text;
        job.SourcePassword = txtSourcePassword.Text;
        job.SourceDirectory = txtSourceDirectory.Text;
        job.SourceIgnoreExtension = txtSourceIgnoreExtension.Text;

        job.TargetHost = txtTargetHostName.Text;
        job.TargetType = cboTargetType.Text;
        job.TargetUsername = txtTargetUsername.Text;
        job.TargetPassword = txtTargetPassword.Text;
        job.TargetDirectory = txtTargetDirectory.Text;
        job.TargetTempExtension = txtTargetTempExtension.Text;

        job.Save(); 
```

这是错误：

```
A first chance exception of type 'MySql.Data.MySqlClient.MySqlException' occurred in MySql.Data.dll
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'interval) VALUES('adf','adsf','inbound','ftp','','','','','','ftp','','','','','' at line 1 
```

为了澄清，如果我编辑一个现有的工作它工作正常，它只会保存失败的新工作。

这是架构：

表创建表

* * *

作业 CREATE TABLE `jobs`(
`id`int(11) NOT NULL auto_increment,
`name`varchar(100) NOT NULL,
`sims_cust_code`varchar(10) NOT NULL,
`mode`varchar(10) NOT NULL,
`source_type`varchar(10) NOT NULL,
`source_host`varchar(100) 默认 NULL,
`source_username`varchar(50 ) 默认 NULL，
`source_password`varchar(50) 默认 NULL，
`source_directory`varchar(100) 默认 NULL，
`source_ignore_extension`varchar(10) 默认 NULL，
`target_type`varchar(10) NOT NULL，
`target_host`varchar(100) 默认 NULL，
`target_username`varchar(50) 默认 NULL，
`target_password`varchar(50)默认 NULL,
`target_directory`varchar(100) 默认 NULL,
`target_temp_extension`varchar(10) 默认 NULL,
`enabled`tinyint(1) NOT NULL,
`interval`int(11) NOT NULL,
PRIMARY KEY ( `id`)
) 引擎=InnoDB AUTO_INCREMENT=7 默认字符集=latin1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T18:23:31.477

看起来一个值没有被正确解析——我需要查看 SQL 模式以及正在生成的 SQL——你有一个分析器吗？可以让您观看正在发生的事情的东西？

间隔是 MySQL 的保留字 :) - 你能输入一个错误吗？我们应该抓住那个...

# vb.net - 寻找从网格视图中选择具有多列的行并将它们添加到另一个网格视图的示例？

> ID：830138
> 
> 赞同：-1
> 
> 时间：2009-05-06T15:20:01.140
> 
> 标签：vb.net

这是处理一个 vb.net 网站的情况，我有学生将参加一门课程。学生网格视图有许多列，如 client_no、student_name、date_of_birth、address 等。

有超过 100000 名学生，所以我需要过滤学生网格视图以找到正确的学生来注册课程。一旦找到它们，用户就会选择它们并以某种方式将它们移动到已注册的网格视图中。如果学生辍学，那么他们将从已注册的网格视图中删除。

这个过程需要易于理解和使用。是否有任何可用示例或其他有关如何执行此操作的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T14:49:33.593

当您在 datagridview 中双击该学生以注册他们时，为什么不直接添加一个确认提示？

您将在 datagridview 上挂钩 CellDoubleclick 事件，然后验证他们正在双击的内容尚未注册？

# selenium - 硒测试套件

> ID：830143
> 
> 赞同：5
> 
> 时间：2009-05-06T15:20:31.823
> 
> 标签：selenium

我一直在使用 Firefox 在 Selenium IDE 中运行测试用例。这很好用，但是当我通过“添加测试用例”创建一个套件时，我永远无法执行该套件。我不知道问题出在 Selenium 上还是我身上。给这个新手的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-23T04:43:19.203

我以前从未使用过测试套件功能，但是当我尝试重现您的问题时，我发现保存然后打开测试套件足以破坏它。我再也无法让它再次运行。显然这是一个已知问题：

[http://jira.openqa.org/browse/SIDE-191](http://jira.openqa.org/browse/SIDE-191)

令人沮丧的是，上面链接的错误是在 2008 年 3 月报告的。我猜测试套件不在优先级列表的顶部。另一方面，我不建议完全放弃 Selenium。如果您对任何受支持的编程语言感到满意，只需导出您的测试并使用 RC 运行它们。从长远来看，这是一个很好的解决方案，因为它允许您在测试中添加控制流和更复杂的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-13T13:33:32.520

您可能会考虑升级到 Selenium 的最新版本...截至 2009 年 6 月 30 日，它们的版本为 1.0。许多错误修复，包括无法通过以下方式向测试套件添加新测试用例的“小”烦恼IDE。

这可能会有所帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T15:52:22.403

是否只执行 1 个测试？或者是什么问题？当套件打开时，您应该在左侧有测试用例列表。然后按播放整个测试套件按钮

# sharepoint - SharePoint - 通过 VBScript 自动发布和检索文件

> ID：830146
> 
> 赞同：3
> 
> 时间：2009-05-06T15:20:49.763
> 
> 标签：sharepoint, file, upload, automation, download

我将需要从不是我公司托管的 SharePoint 网站（它是外部的）推送和拉取文件。我只需要几天（如果那样的话）来完成这项工作，所以我没有太多时间进行实验。

为了增加我的要求/头痛，我将**不得不使用 VBScript 来实现它**。.Net 对我来说是*首选*，但由于我无法控制的原因，我必须使用 VBScript。我无法直接访问我的 VBScript Web 服务器，因此我无法在 .NET 中实现它并使用 VBScript 中的该对象。

我正在寻找可以帮助我快速有效地实现这一目标的任何东西。我找到了这篇文章，想知道这里使用的 PUT/GET 方法是否适合我？

[http://weblogs.asp.net/bsimser/archive/2004/06/06/149673.aspx](http://weblogs.asp.net/bsimser/archive/2004/06/06/149673.aspx) （这个链接来自：[Sharepoint API - How to Upload files to Sharepoint Doc Library from ASP.NET Web Application](https://stackoverflow.com/questions/279429/sharepoint-api-how-to-upload-files-to-sharepoint-doc-library-from-asp-net-web-a)）

最重要的是，我从未对 SharePoint 网站进行过任何编程或管理。我对 SharePoint 的了解是用户的。我知道我所做的少数 Google 搜索中有一个 API。但是，我的阅读让我相信我的代码需要在 SharePoint 服务器上或附近运行。我不相信我有足够的距离来使用 API。

真诚的谢谢！

问候，
弗兰克

**进度更新**：我还在研究这个。Tom 指出我发布的示例可能来自旧的 SharePoint 版本。他建议使用 .Net 在 Web 服务上开发原型很好，但我希望得到更详细的答案。

我现在想知道是否可以使用 HTTP PUT 和 GET 完成我需要完成的任务。在我的公司，对于一个特定的项目，我们确实使用 HTTP PUT 和 GET 来做这样的事情。我们有存储在 HTTP 服务器上的文件，这就是我们发布和检索它们的方式。

**这是否适用于 SharePoint 或 SharePoint 是否需要特殊处理？**基本上，我**必须**使用 Web 服务吗？

**进度更新 2**：此链接很有帮助...[通过内置 Web 服务将文件上传到 SharePoint](https://stackoverflow.com/questions/31868/upload-a-file-to-sharepoint-through-the-built-in-web-services)

但我仍在寻找有关此主题的更多信息...谢谢大家...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T15:30:41.660

您需要使用共享点列表 Web 服务来获取元数据，并使用 get/put 来进行上传。该链接看起来适用于 SharePoint 2001，因此希望您可以使用更新/更简单的版本。

我建议首先在 .net 中构建一些东西来解决 Web 服务调用 - 一些参数可能很难调试，我不想在远程 vbscript 页面上这样做。

假设不需要元数据并且 SharePoint 库像文件服务器一样使用，您可以使用 PUT/GET 完成大部分您想要的操作，但您可能需要调用 GetListItems 来查找要下载的 url。

在我的博客上有一个对该 Web 服务的较低级别调用的示例 - 它是 javascript，但可能足够接近。

[http://tqcblog.com/2007/09/24/sharepoint-blog-content-rating-with-javascript-and-web-services](http://tqcblog.com/2007/09/24/sharepoint-blog-content-rating-with-javascript-and-web-services)

设置 .net 版本让您可以非常快速地设置与服务器的连接（只需在 Visual Studio 中添加 Web 服务引用），这样您就可以获得查询和查询选项字符串以检索您想要的项目。一旦成功，您只需将它们作为一个字符串放在一起，包括肥皂材料，以便在没有所有漂亮工具的情况下使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T23:36:15.623

我对实现的上下文和必须使用 VBScript 的先决条件有点不清楚。文件是从一台服务器移动到另一台服务器还是从用户桌面移动到此 SP 服务器？还是通过 Excel 等软件访问它们？

我想到的第一件事（这听起来可能很疯狂）是使用 Office 应用程序建立连接。您的脚本将调用 Excel（仅作为示例）并将启动打开文件所需的 vba 传递给它，然后提供需要检索的文件的完整路径。然后让它对需要文件的位置执行另存为。做同样的事情，但反过来将文件放在 SharePoint 服务器上。

显然，棘手的部分是让脚本与 Office 应用程序交互。我知道这可以通过 Windows 版本的 PHP 来完成，但我不想在不了解您的情况的情况下进行任何具体的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T19:39:58.997

我非常想知道您是否能够使用 VBScript 来调用 SharePoint Web 服务。我有一段时间没有查看 SharePoint Web 服务，所以我不记得它们是如何定义的。我认为 Web 服务是 SOAP 调用，虽然这使得它比

我不确定我是否尝试使用 Excel 来通过[MSSOAP.SoapClient](http://msdn.microsoft.com/en-us/library/ms997641.aspx)调用一些 Web 服务，并且似乎该组件无法处理除了非常简单的字符串之外的任何 WSDL 类型。任何带有嵌套数据的东西都行不通。相反，您需要创建一个 COM 对象来处理转换，这很麻烦。如果您能够使用 XMLHTTP 组件，那么它可能与 VBScript 一起使用，但我不确定它是否适用于 SharePoint Web 服务。

我不确定您的意思是“我无法直接访问我的**VBScript** Web 服务器”。您的 Web 服务器是 VBScript (ASP) 吗？还是您的意思是 SharePoint 服务器？

您可能会将[C# 脚本](http://www.csscript.net/)(cs-script) 视为使用 .NET 的脚本解决方案。我已经取得了很好的成功，尽管它确实需要安装在运行脚本的计算机上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-03T15:28:02.507

我正在两家公司之间进行整合。根据[这本书](http://books.google.com/books?id=-6Dw74If4N0C&pg=PA27&lpg=PA27&dq=sharing+sharepoint+sites+external+adfs&source=bl&ots=ojOlMP13tE&sig=FjsMmOHymCOMGo7il7vjWF_lagQ&hl=en&ei=ytqfStClO5mMtgejsfH0Dw&sa=X&oi=book_result&ct=result&resnum=5#v=onepage&q=&f=false)，我们应该使用[AD FS](http://en.wikipedia.org/wiki/Active_Directory_Federation_Services)来完成我正在寻找的东西。

我实际上仍然没有这个工作，所以**如果有人有更多信息，我会改变这个问题的答案。**

[http://books.google.com/books?id=-6Dw74If4N0C&pg=PA27&lpg=PA27&dq=sharing+sharepoint+sites+external+adfs&source=bl&ots=ojOlMP13tE&sig=FjsMmOHymCOMGo7il7vjWF_lagQ&hl=en&ei=ytqfStClO5mMtgejsfH0Dw&res_resvult&resnum=5#book =一页&q=&f=假](http://books.google.com/books?id=-6Dw74If4N0C&pg=PA27&lpg=PA27&dq=sharing+sharepoint+sites+external+adfs&source=bl&ots=ojOlMP13tE&sig=FjsMmOHymCOMGo7il7vjWF_lagQ&hl=en&ei=ytqfStClO5mMtgejsfH0Dw&sa=X&oi=book_result&ct=result&resnum=5#v=onepage&q=&f=false)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-12-02T15:46:16.177

我从来没有真正收到过有效的答案，但这对我来说不再是问题。

我们最终做的是抓取 html。实际上，我们将我们自己的 ad-hoc Web 服务处理器放在一起，而不是使用 SOAP，而是使用 html 进行通信。然后我们执行 GET、POST 等以使用 Web 服务。

我们在 VBScript 中为 WebDAV 做了类似的事情——我们有一个类并创建了一个新的类来使用 SharePoint。

# version-control - 为什么 SourceSafe 不尊重“下次打开此数据库...”选项？

> ID：830150
> 
> 赞同：1
> 
> 时间：2009-05-06T15:21:04.677
> 
> 标签：version-control, visual-sourcesafe

使用 Visual SourceSafe 的“打开 SourceSafe 数据库...”命令，对话框底部有一个选项“下次运行 Visual SourceSafe 时打开此数据库”。

通常，在选中此框时，最新的开放vss DB在启动VSS时立即打开（即使这是VSS运行的第二个实例）。

我看到这个选项没有得到尊重。VSS 的所有启动都会导致在启动时打开同一个数据库。

删除所有注册表项`HKLM\Software\Microsoft\SourceSafe\Databases`并`HKCU\Software\Microsoft\SourceSafe\Databases`没有帮助。

此外，该`HKCU\Software\Microsoft\Sourcesafe\Current Database`值准确地指向我想要打开的数据库，而不是 VSS 实际打开的数据库。与下的相似值相同`HKLM`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T15:22:53.813

已设置环境变量以强制该特定数据库。

设置 SSDIR 时，将忽略 VSS 对话框选项。

清除 SSDIR 变量解决了这个问题。

# asp.net - asp.net：如何使用 eventargs 在按钮 onclick 上传递参数？

> ID：830152
> 
> 赞同：23
> 
> 时间：2009-05-06T15:21:14.287
> 
> 标签：asp.net, parameters, button, eventargs

我看过一些代码，其中人们通过 web 控件的 commandParameter 属性传递参数。那么 eventargs 的用途是什么。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-05-06T15:29:11.287

如果您对不同的按钮使用相同的 EventHandler 方法，这将很有用。例如，假设您的标记如下所示：

```
<asp:Button ID="button1" runat="server" CommandArgument="MyVal1"
   CommandName="ThisBtnClick" OnClick="MyBtnHandler" />
<asp:Button ID="button2" runat="server" CommandArgument="MyVal2"
   CommandName="ThatBtnClick" OnClick="MyBtnHandler" /> 
```

您可以为两个按钮使用相同的事件处理程序，并根据 CommandName 进行区分：

```
protected void MyBtnHandler(Object sender, EventArgs e)
{
     Button btn = (Button)sender;
          switch (btn.CommandName)
          {
                case "ThisBtnClick":
                    DoWhatever(btn.CommandArgument.ToString());
                    break;
                case "ThatBtnClick":
                    DoSomethingElse(btn.CommandArgument.ToString());
                    break;
           }
} 
```

**来源：** [aspnet-passing-parameters-in-button-click-handler](http://www.devchix.com/2007/08/10/aspnet-passing-parameters-in-button-click-handler/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-06T15:28:59.837

.NET 中的各种 Button 类型控件都有一个`OnCommand`事件和一个`OnClick`事件。使用`OnCommand`事件时，您可以将其他参数应用于 Button，例如`CommandName`和`CommandArgument`。然后可以在`CommandEventArgs`.

`CommandName`在您希望将相同的方法分配给多个按钮并使用和`CommandArgument`参数指示单击该按钮将产生什么功能的地方时，它很有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-06T15:29:50.070

该类`EventArgs`是一个基类。其他 Web 方法使用其他事件参数。

例如，LinkBut​​ton 有一个带有默认 EventArgs 参数的 OnClick 事件，但它也有一个 OnCommand 事件，该事件采用`CommandEventArgs : EventArgs`具有一些额外信息的参数（即 CommandName 和 CommandArgument）。

事件 args 基类只是作为占位符存在，因此所有 EventHandler 都符合类似的签名。

# javascript - Nokogiri：根据 HTML 文档中的顺序对 ID 数组进行排序

> ID：830155
> 
> 赞同：0
> 
> 时间：2009-05-06T15:22:03.113
> 
> 标签：javascript, ruby-on-rails, ruby, dom, nokogiri

我有一个未排序的数组，其中包含以下 ID：

```
@un_array = ['bar', 'para-3', 'para-2', 'para-7'] 
```

有没有一种聪明的方法可以使用[Nokogiri](http://github.com/tenderlove/nokogiri/tree/master)（或纯 Javascript）根据下面示例 HTML 文档中的 ID 顺序对数组进行排序？

```
require 'rubygems'
require 'nokogiri'

value = Nokogiri::HTML.parse(<<-HTML_END)
  "<html>
    <head>
    </head>
    <body>
        <p id='para-1'>A</p>
        <div id='foo'>
            <p id='para-2'>B</p>
        <p id='para-3'>C</p>
            <div id='bar'>
                <p id='para-4'>D</p>
                <p id='para-5'>E</p>
                <p id='para-6'>F</p>
        </div>
         <p id='para-7'>G</p>
        </div>
        <p id='para-8'>H</p>
    </body>
    </html>"
HTML_END 
```

在这种情况下，生成的排序数组应该是：

```
['para-2', 'para-3', 'bar', 'para-7'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T16:31:53.680

我不知道 Nokogiri 是什么，但是如果您将 HTML 代码作为字符串，则可以通过正则表达式匹配获得订单，例如：

```
var str = '<html>...</html>'; // the HTML code to check
var ids = ['bar', 'para-3', 'para-2', 'para-7']; // the array with all IDs to check
var reg = new RegExp('(?:id=[\'"])('+ids.join('|')+')(?:[\'"])','g') // the regexp
var result = [], tmp; // array holding the result and a temporary variable
while((tmp = reg.exec(str))!==null)result.push(tmp[1]); // matching the IDs
console.log(result); // ['para-2', 'para-3', 'bar', 'para-7'] 
```

使用此代码，您必须小心包含正则表达式元字符的 ID。他们应该首先逃脱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T16:37:29.377

这是在 Nokogiri 中执行此操作的一种方法 - 可能还有其他更有效的方法，因为这最终会遍历整个 DOM。

```
require 'set'

#Using a set here to make lookup O(1), because we don't care about the initial order
id_set = ['bar', 'para-3', 'para-2', 'para-7'].to_set
sorted = []

value.root.traverse do |node|
  node_id = node['id']
  sorted << node_id if node_id && id_set.delete?(node_id)
end
# sorted is now ['para-2', 'para-3', 'bar', 'para-7'] 
```

**编辑：**这是一个获得相同结果的单线，但我还没有进行基准测试以查看哪个更快。

```
ids = ['bar', 'para-3', 'para-2', 'para-7']
value.xpath("//*[@id]").collect {|node| node['id']} & ids 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T13:39:53.023

这是一个同事和我想出的解决方案：

```
parent = value.css('body').first
indexes = []
parent.children.each do |child|
  indexes << child['id']
end

puts @un_array.sort! { |x,y| indexes.index(x) <=> indexes.index(y) } 
```

首先，我将 HTML 文档的所有 ID 提取到一个数组中，`@un_array`然后根据我之前创建的 IDs-Array 进行排序。

# batch-file - 当参数包含引号和空格时运行批处理文件（来自 .NET 框架）

> ID：830156
> 
> 赞同：1
> 
> 时间：2009-05-06T15:22:12.240
> 
> 标签：batch-file

我有一个 bat 文件，它设置了一些环境变量，然后在命令行上执行命令。我想用通过参数传入的命令替换硬编码命令。

所以：

```
:: Set up the required environment
SET some_var=a
SET another_var=b
CALL some.bat

:: Now call the command passed into this batch file
%1 
```

问题是命令很复杂，并且不能干净地转义。它看起来像这样：

```
an.exe -p="path with spaces" -t="some text" -f="another path with spaces" 
```

我正在尝试从 .NET 框架应用程序调用 .bat ，使用：

```
Dim cmd as String = "the cmd"
System.Diagnostics.Process.Start( thebat.exe, cmd ) 
```

但我似乎无法让转义符正常工作。有人能告诉我应该如何输入字符串 cmd 以正确地将命令作为参数传递到 bat 文件中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-02-11T10:32:59.307

答案可能为时已晚，但对其他人可能有用。

我会只用一个参数调用批处理 - params.txt 的路径，其中包含所有其他参数：

```
start /min cmd /c "thebat.bat C:\My Documents\params.txt" 
```

然后批量读取它们：

```
for /f "tokens=1,*" %%A in ('type "%*"') do set P%%A=%%B
echo Options:
echo P1=%P1%
echo P2=%P2%
echo P3=%P3% 
```

*参数.txt：*

```
1 "path with spaces"
2 "some text"
3 "another path with spaces" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T15:36:51.050

为什么不开始上课呢`Process`？`ProcessStartInfo`

它有一个`EnvironmentVariables`属性，您可以在运行之前设置 , 等`some_var`。`another_var`

```
ProcessStartInfo psi = new ProcessStartInfo();
psi.FileName = "an.exe";
psi.Arguments = "-p=\"path with spaces\" -t=\"some text\" -f=\"another path with spaces\"";
psi.EnvironmentVariables["some_var"] = "a";
...
Process.Start(psi); 
```

# .net - 以编程方式获取 Web 服务的参数？

> ID：830166
> 
> 赞同：2
> 
> 时间：2009-05-06T15:24:05.357
> 
> 标签：.net, wcf, web-services, xsd, wsdl

我有一个基于 Web 的系统，用户应该能够通过输入 URL 和必要的参数值从 Web 服务中获取数据。

我的问题是，不知何故我需要找出soap主体中所需参数的结构，不一定只是一两个字符串，而可能是一整棵对象树。

传输不是问题，因为它只是普通的 XML。

我该怎么做呢？我是否需要阅读整个 WSDL Schema 并尝试弄清楚这一点，还是有一些更简单的方法？我知道 .NET 可以为它生成代码，但我可以轻松找出在没有实际生成的情况下会生成哪些类并使用反射来找出它的作用吗？

有人有想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T15:38:25.400

您可以使用[ServiceDescription](http://msdn.microsoft.com/en-us/library/system.web.services.description.servicedescription.aspx)类，它为您提供表示 wsdl 文件的对象模型。

如果你想尝试一个有用的包装器，请查看这篇[文章](http://mikehadlow.blogspot.com/2006/06/simple-wsdl-object.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T15:28:42.240

我从来没有做过，但我相信 .net 允许您动态生成代理。然后，您应该能够反映生成的类。除了简单的界面外，我看不到这对任何东西都有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T15:46:26.083

我看到 3 个选项：

a) 联系 Web 服务的发布者并索取文档和代码示例。

b) 使用 Visual Studio 生成代理类。然后研究生成的代码，弄清楚如何在没有生成的代码的情况下自己完成。您需要了解 XMLSerializer 类的工作原理，因为该类用于将生成的类型转换为 XML。

c) 阅读 WSDL 描述以了解预期的参数及其格式。

希望这可以帮助，

狡猾

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T14:00:57.637

尝试使用 ChannelFactory。这将让您在运行时动态调用 Web 服务并创建代理客户端。我看到您关于加载和卸载程序集的评论。使用带反射的客户端代理，完成后将其处理掉。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-07T14:11:20.513

对于一般情况，这个问题很难解决。如果服务的“参数”之一是 XML 文档怎么办？如果是复杂类型怎么办？您将如何生成允许输入此类内容的 UI？

你也可以看看soapUI。

顺便说一句，创建一个新的 AppDomain 来加载程序集并不困难。事实上，这很容易。

# delphi - 什么时候引入了扩展记录？

> ID：830168
> 
> 赞同：3
> 
> 时间：2009-05-06T15:24:51.843
> 
> 标签：delphi, syntax, version, records

在 Delphi 7 中，您的记录只不过是分组到一个位置的数据集合。在最近的几个版本中，您已经能够向它们添加公共和私有成员、方法、属性和构造函数，将它们视为对象。这个扩展语法是在哪个版本中引入的？

编辑：如果有人想知道我为什么要问，我正在尝试设置一些可以通过使用扩展语法来简化很多的东西，但我想让它与旧版本的 Delphi 向后兼容，所以我需要知道要使用哪些 IFDEF。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-06T15:32:32.857

我很确定 Delphi 2006 中引入了带有方法的记录。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T16:29:22.720

我建议你看看[JCL library](http://jcl.delphi-jedi.org/)。它包含一个非常有用的 jedi.inc 文件，您可以在其中找到所有类型的功能定义，特别是：

```
 SUPPORTS_ENHANCED_RECORDS      Compiler supports class [operator|function|procedure] for record types (D9.NET, D10+) 
```

因此，在 Delphi 2005 (.NET) 和 Delphi 2006 (Win32) 中引入了带有方法的记录

# sharepoint - 在 WSS 中使用 SSRS 的报表查看器控制报表大小

> ID：830169
> 
> 赞同：0
> 
> 时间：2009-05-06T15:25:01.860
> 
> 标签：sharepoint, reporting-services, reportbuilder

有没有办法使用 ReportBuilder 设置报表的大小，以便报表查看器 Web 部件中不显示滚动条以用于较小的报表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T15:37:12.487

在报告生成器中设置报告的页面大小解决了该问题。Internet Explorer 有一个奇怪的刷新问题，但这是另一个问题。

# sql-server-2005 - 存储过程的好资源

> ID：830172
> 
> 赞同：0
> 
> 时间：2009-05-06T15:25:44.197
> 
> 标签：sql-server-2005, stored-procedures, resources

我正在寻找有关存储过程的好资源。特别是对于 Microsoft SQL Server 2005，但任何用于 SQL 的整体良好资源都可以。这些可以是书籍、网站等。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T15:34:06.707

我喜欢[www.simple-talk.com/sql/](http://www.simple-talk.com/sql/)。查看他们的[SQL Server Crib-Sheet Compendium](http://www.simple-talk.com/sql/learn-sql-server/free-ebook-sql-server-crib-sheet-compendium/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T15:28:50.587

寻找 TSQL 资源，因为 SP 是用 TSQL 编码的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T15:28:57.653

Ken Henderson的“ [The Guru's Guide to Transact-SQL](https://rads.stackoverflow.com/amzn/click/com/0201615762) ”是一个很好的 T-Sql 高级指南。它正在成为一种经典。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T15:30:40.643

我想这可能是一本好书。只是看了一下示例页面，所以没有更深入的想法。

您也可以下载电子书。

[SQL Server 2000 存储过程手册（专家之声）](https://rads.stackoverflow.com/amzn/click/com/1590592875)

# delphi - 将 dxGrid 转换为 cxGrid

> ID：830175
> 
> 赞同：1
> 
> 时间：2009-05-06T15:26:19.343
> 
> 标签：delphi, devexpress

我正在将现有的数据库驱动应用程序从 D7 转换为 D2009，因此我将无法再使用 dxGrids。是否有任何自动方法可以将 dxGrid 组件转换为 cxGrids？如果没有，您会建议我什么以便有时间手动转换它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T20:08:26.717

这是 Dev Express 站点上解决此问题的问题 [www.devexpress.com/issue=CQ59375](http://www.devexpress.com/issue=CQ59375)

摘抄：

> 简而言之，您应该执行以下步骤来转换当前项目：
> 
> 1）为Delphi6安装两个版本的ExpressQuantumGrid（v3和v6）；
> 2) 将旧网格的布局转换为最新的产品版本（请参阅 ExpressQuantumGrid 文档中的“转换为 ExpressQuantumGrid”主题以查找有关此主题的更多信息）；
> 3) 调整您的代码以使用最新的产品版本；
> 4）为Delphi 2007安装最新版ExpressQuantumGrid（v6）；5）在Delphi 2007中使用转换后的项目。

从他们引用的帮助文件中：

> ExpressQuantumGrid 在设计时提供了一个导入对话框，用于从第三方网格控件导入设置并将它们转换为 ExpressQuantumGrid 的本机属性。ExpressQuantumGrid 可以导入三种类型的网格组件：
> 
> · ExpressQuantumGrid3 (TdxDBGrid) 和 ExpressQuantumGrid3 布局 (TdxDBGridLayout)
> · 标准 TDBGrid
> · W2W InfoPowerGrid 3000 (TwwDBGrid)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T15:38:02.420

VCL 的 ExpressQuantumGrid 可能具有您需要的[迁移支持。](http://community.devexpress.com/forums/t/51016.aspx)

# silverlight - 如何对 Silverlight 3 Out-Of-Browser 应用程序进行单元测试？

> ID：830179
> 
> 赞同：1
> 
> 时间：2009-05-06T15:28:30.353
> 
> 标签：silverlight, unit-testing

如何对 Silverlight 3 Out-Of-Browser 应用程序进行单元测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T16:34:14.940

Roy Osherove 创建了一个开源框架来测试 silverlight 控件它称为[SilverUnit](http://cthru.codeplex.com/Wiki/View.aspx?title=SilverUnit%20examples)，它使用 Typemock 来拦截 .NET 调用并伪造它们的行为。

SilverUnit 允许您使用简单的单元测试框架测试您的控件，无需浏览器。

对于您正在寻找的东西，这似乎是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T15:37:19.757

由于您喜欢测试版（Silverlight 3），您愿意考虑使用 VS 2010 吗？如果是这样，请查看 Mathew Aniyan 的[博客](http://blogs.msdn.com/mathew_aniyan/)。他有很多关于数据驱动的编码 UI 测试的信息。

# .net - XML 到 .NET 类

> ID：830189
> 
> 赞同：2
> 
> 时间：2009-05-06T15:30:17.493
> 
> 标签：.net, xml

我正在设计一个 WCF 服务，它有一些我公开的操作来获取一些数据。这些操作接受 xml 文档作为参数。有没有办法可以将此文档的节点映射到我创建的用于内部使用的类？

编辑：我接受 xml 文档而不是强类型对象的原因之一是我们可以在未来扩展 api，而不必担心破坏使用旧版本的开发人员的结构。是否有更好的方法来设计无需要求客户更改其现有实现即可发展的 api？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T15:34:15.020

如果您有正在使用的 XML 文档的架构 (XSD)，您可以尝试`xsd.exe`使用 .NET SDK 附带的架构，它将为该架构生成类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T15:34:54.800

是的，您可以使用[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)类将 XML 转换为对象，反之亦然。它非常酷且易于使用，因为它仅使用 .NET 反射来查找映射到 XML 元素的类的公共属性。可以使用[XmlElementAttribute](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlelementattribute.aspx)等属性控制确切的 XML 格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T15:35:30.243

为什么不使用您将在内部映射到的类来定义服务接口？然后你不必做任何映射。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-06T15:36:02.147

您还可以创建对象，并使用 Serialize/Deserialize 函数手动构建与您需要的结构匹配的类。

这实际上是一个非常简单的过程，这篇 MSDN 文章[http://msdn.microsoft.com/en-us/library/ms950721.aspx](http://msdn.microsoft.com/en-us/library/ms950721.aspx)介绍了这个概念。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-06T16:12:19.920

我知道您需要 XML，为此我会推荐您的 .Net 类中的 XMLSerializer。但是，如果您只关心版本控制，您可以查看 WCF 中的服务版本控制支持

[http://msdn.microsoft.com/en-us/library/ms731060.aspx](http://msdn.microsoft.com/en-us/library/ms731060.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T15:35:26.780

您可以直接使用[XMLReader](http://msdn.microsoft.com/en-us/library/9d83k261(VS.80).aspx)或使用[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb308960.aspx)将文档映射到您的类。

# c# - 是否有允许从消息队列 (MSMQ) 轻松导出消息的工具？

> ID：830194
> 
> 赞同：3
> 
> 时间：2009-05-06T15:31:34.090
> 
> 标签：c#, msmq

我目前正在使用 C# 中的 MSMQ 开发批处理应用程序。在应用程序设计中，我有一个错误队列，其中包含使用`ActiveXFormatter`. 我知道我可以编写一个应用程序来将这些错误消息写入文本文件或数据库表。

是否有其他可用**的预构建**工具允许您将消息导出为各种格式（即文本文件、数据库表等）？我只是在寻找最佳实践。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T16:18:39.843

行。我发现编写代码的解决方案非常简单。这是我的参考解决方案。

```
使用系统；
使用 System.Collections.Generic；
使用 System.ComponentModel；
使用 System.Data；
使用 System.Drawing；
使用 System.Linq；
使用 System.Text；
使用 System.Windows.Forms；
使用 System.Messaging；

命名空间导出MSMQMessagesToFiles
{
    公共部分类 frmMain ：表格
    {
        公共 frmMain()
        {
            初始化组件（）；
        }

        私人无效btnExportTextFiles_Click（对象发送者，EventArgs e）
        {           
            //使用来自用户的路径设置 MSMQ...
            MessageQueue q = new MessageQueue(txtMSMQ.Text);

            //设置格式化程序...随便你！？
            q.Formatter = new ActiveXMessageFormatter();

            // 循环所有消息并将它们写入文件...（在本例中为 XML）
            MessageEnumerator msgEnum = q.GetMessageEnumerator2();
            诠释 k = 0;
            而 (msgEnum.MoveNext())
            {
                System.Messaging.Message msg = msgEnum.Current;                                
                字符串文件名 = this.txtFileLocation.Text + "\\" + k + ".xml"；                
                System.IO.File.WriteAllText(fileName, msg.Body.ToString());
                k++;
            }

            MessageBox.Show("全部完成！");
        }
    }
}

```

# windows - 在 Windows 上安装/升级 Adob e AIR 非管理员应用程序

> ID：830202
> 
> 赞同：6
> 
> 时间：2009-05-06T15:33:24.087
> 
> 标签：windows, permissions, installation, air

**有什么方法可以让非管理员用户在 Windows 上安装、升级或卸载 Adob​​e AIR 应用程序？**

我制作了一个 Adob​​e AIR 应用程序，并`.air`使用标准 AIR 机制将其打包为一个包，以创建部署包。如果普通用户或高级用户尝试安装此 AIR 应用程序，应用程序事件日志会显示一条错误消息，指出需要管理权限。即使用户在安装过程中升级，使用自动 AIR 升级系统进行升级仍然需要管理权限（因为升级本质上是在幕后卸载一个`.msi`包，然后安装另一个`.msi`包）。

**有没有办法解决？**

到目前为止我尝试过的是：

*   使用组策略编辑器，将 Windows Installer 设置为在安装期间提升。不起作用，因为 AIR 尝试“为所有用户”安装。
*   指定我的文档作为安装目录。不起作用，因为 AIR 尝试“为所有用户”安装。
*   授予用户对应用程序通常驻留的 Program Files 文件夹的修改访问权限。不起作用，因为这不是文件权限问题。
*   使用户成为超级用户。不起作用，因为 AIR 尝试“为所有用户”安装。

我*猜*如果安装和升级对用户来说都可以正常工作

*   AIR 安装程序将尝试进行“仅适用于我”应用程序安装，而不是“适用于所有用户”安装，并且
*   用户是高级用户，并且可能
*   该应用程序已安装到我的文档

我也猜想 OSX 和 Linux 上不存在这个问题，因为它们对每个用户的应用程序安装有更直观的概念。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-18T20:22:28.013

**编辑：** 从 Adob​​e AIR 3 开始，您可以使用“强制运行时”来避免管理员安装 AIR。请参阅[此处](http://help.adobe.com/en_US/air/build/WSfffb011ac560372f709e16db131e43659b9-8000.html)和[此处](http://www.adobe.com/devnet/air/articles/air3-install-and-deployment-options.html)的说明。免责声明-我实际上没有尝试过。

**pre-AIR 3 的原始答案：**

[根据 AIR 1.5 管理员指南关于安装应用程序](http://help.adobe.com/en_US/AIR/1.5/air_admin/WS5b3ccc516d4fbf351e63e3d11c0f5986ec-8000.html#WS5b3ccc516d4fbf351e63e3d11c0f59823a-7fef)的部分，似乎没有任何方法可以解决此问题，该部分指出：

> 在 Mac OS 上，要安装或更新 AIR 应用程序，用户需要有足够的系统权限才能安装到应用程序目录（如果应用程序需要更新运行时，还需要管理权限）。在 Windows 上，用户需要具有管理权限。

所以这个限制显然适用于所有支持的操作系统。整个文档的语气清楚地表明，AIR 旨在向系统管理员保证用户将被适当地锁定。AIR 并不是我所希望的从浏览器到桌面的愉快途径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-06-02T23:32:05.633

This description of using the Air SDK to run the application might work on windows, too: [http://agoln.net/archives/106](http://agoln.net/archives/106) Not sure how that interacts with auto-update...

# c# - 为什么每次调用 web 方法时都会调用我的 WebService 构造函数？

> ID：830207
> 
> 赞同：4
> 
> 时间：2009-05-06T15:34:35.080
> 
> 标签：c#, asp.net, web-services, constructor, .net-1.1

每次调用 web 方法时，都会调用我的 web 服务构造函数。这导致我正在添加的一些新功能出现一些问题，我无法弄清楚我做错了什么导致这个问题。我要更新 web 服务的唯一地方是 global.asax.cs 的 Application_Start，但是如果我将代码删除到`new`web 服务，它仍然会在我每次调用 web 方法时调用构造函数。

我已经通过浏览到 .asmx 文件并以这种方式调用 webmethod 对此进行了测试，并且我还创建了一个测试控制台应用程序，该应用程序具有对 web 服务的引用并将以这种方式调用方法。这两个都给出了相同的结果。

我在 ASP.NET 1.1 中使用 c#。有任何想法吗？

**编辑：**
我正在尝试创建一个轮询 Windows 服务的心跳线程。我正在尝试将结果保存在哈希表中（多个线程轮询多个服务）。我已经更改了 web 方法（因为它用于轮询 Windows 服务）以从哈希表中获取结果。我们正在尝试提高此 webmethod 调用的速度。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-06T15:48:48.073

每当您调用 Web 方法时，都会创建 Web 服务的新实例 - 这是预期的行为。Web 服务是无状态的，这意味着服务实例在 Web 方法调用之间不会保持活动状态，因此您不能在 Web 服务的成员（字段、属性）中存储任何状态。

如果要在 Web 方法调用之间保存一些值/状态，则必须为此目的使用 ASP.NET 会话或数据库。

有关详细信息，请参阅此问题：[这应该以这种方式工作吗？](https://stackoverflow.com/questions/808168/is-this-supposed-to-work-this-way)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T15:51:35.510

呃......这恐怕是设计使然。您能否描述您遇到的问题以及您想要实现的目标，我认为您需要在这里稍微重构您的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T16:03:31.893

您还可以切换到支持有状态服务的 WCF

# c# - 如何制作一个不会将其行捕捉到控件顶部的 DataGridView？

> ID：830211
> 
> 赞同：3
> 
> 时间：2009-05-06T15:35:19.073
> 
> 标签：c#, .net, winforms, datagridview

我们在客户端中广泛使用了 DataGridView。我们的客户希望能够在一行中输入大量文本 - 太多的文本无法显示在 DataGridView 的高度 - 并使用主滚动条滚动它们 - 即 DataGridView 的滚动条。

但是，DataGridView 只会滚动以使一行对齐到控件的顶部；如果一行比 DataGridView 大，那么你只能看到它的顶部。

如何制作一个不会将其行捕捉到控件顶部的 DataGridView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-10-04T19:26:20.943

将 DataGridView 放在 Panel 控件中并使 Panel 可滚动。确保 DataGridView 的 Dock 设置为 none，Height 设置为网格中行的高度之和。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T18:54:59.113

基本的答案是你不能。DataGridView 通过确定当前的顶行然后将顶行绘制到左上角，然后继续向下（您可以通过使用 Reflector 查看 DataGridView 的 PaintRows 方法来看到这一点）来绘制自己。

与其尝试滚动整行，不如使用自动调整大小的文本框？它将随着用户键入而增加其高度，并且他们可以滚动文本框本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-23T07:11:11.303

你检查过 Visual Basic Power Packs 3.0 下的“DataRepeater”控件吗？它在您的场景中非常方便。

视频教程：
[http ://windowsclient.net/learn/video.aspx?v=30534](http://windowsclient.net/learn/video.aspx?v=30534)

下载链接：http:
[//msdn.microsoft.com/en-us/vbasic/bb735936.aspx](http://msdn.microsoft.com/en-us/vbasic/bb735936.aspx)

# javascript - 如何使用 jQuery 选择器获取此元素？

> ID：830217
> 
> 赞同：1
> 
> 时间：2009-05-06T15:36:07.293
> 
> 标签：javascript, jquery, html, dom

我使用 jQuery 从某些网站获取预先保存的元素的值，使用如下路径：

> HTML BODY #bodyContainer #mainContentContainer #mainContent #productContentRight #swatchContent #colorSwatchContent SPAN

当网站页面包含表格并且在另一个类似路径中有相同元素时我遇到的问题，例如：

> /html/body/div/center/div/div[3]/div/table/tbody/tr[5]/td/div/table/tbody/tr/td/table/tbody/tr/td/table/tbody /tr[3]/td

在最后一条路径中，您可以看到有 5 个`tr`，这意味着可以在另一条路径中找到相同的元素。

我使用路径作为 jQuery 的选择器，jQuery 将返回元素数组，我不知道哪个是正确的元素。

所以我的问题是：

如何保存路径以供以后更好地使用？以及如何解析这个新路径以准备好作为 jQuery 选择器。

如果问题不清楚，请问我，我会尽力解释更多。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-08T03:00:19.620

我不知道为什么有这么多答案说您使用 XPath，因为 XPath 很久以前就被弃用了，而且 jQuery 在没有 XPath 兼容性插件的情况下不再支持它。

请参阅 1.2 的发行说明：http: [//www.learningjquery.com/2007/09/upgrading-to-jquery-12](http://www.learningjquery.com/2007/09/upgrading-to-jquery-12)

XPath 兼容性插件：[http ://docs.jquery.com/Release:jQuery_1.2#XPath_Compatibility_Plugin](http://docs.jquery.com/Release:jQuery_1.2#XPath_Compatibility_Plugin)

只需`$("#colorSwatchContent span")`用作您的选择器。这是一个css风格的选择器，意思是找到一个id为colorSwatchContent的元素的所有后代跨度元素。由于 html 中的 id 是唯一标识符，因此这与您所能获得的一样具体。

`$("#colorSwatchContent > span")`只会选择 DIRECT 后代（直系子女）

`$("#colorSwatchContent > span:first")`将选择第一个跨度直接后代

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T15:48:25.517

为了在有许多匹配项时获取一个特定元素，您应该为元素提供类，例如给每个元素`table`一个描述其中内容的类，然后给每个元素`tr`一个描述该行内容的类。然后每个`td`类都有一个描述它所描述的行的特定部分的类，例如：

```
<table class="person">
    <tr class="john-doe">
        <td class="name">John Doe</td>
        <td class="phone-numbers">
            <table class="phone-numbers">
                <tr class="cell-phone">
                    <th class="label">Cell Phone:</th>
                    <td class="number">555-1234</td>
                </tr>
                <tr class="home-phone">
                    <th class="label">Home Phone:</th>
                    <td class="number">555-1234</td>
                </tr>
            </table>
        </td>
    </tr>
</table> 
```

一旦正确描述了元素，就可以在 jQuery 中使用 CSS 样式选择器。例如，只获得`td`具有家庭电话的电话就像这样做一样简单：

```
$('table.person tr.home-phone td.number'); 
```

希望这能让你朝着正确的方向前进。

需要注意的一件事是，如果您有非常复杂的表结构，您可能需要重新考虑它是否需要在表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T15:44:46.790

tr[5] 并不意味着有 5 个 trs（可能有 10 个！），这意味着它正在选择第 5 个。

在我看来，您正在使用 XPath 选择器来获取您的元素...... jQuery 支持。

如果您可以控制 HTML，选择特定元素的最简单方法是给它一个 id... 在您的第一个示例中，

```
HTML BODY #bodyContainer #mainContentContainer #mainContent #productContentRight #swatchContent #colorSwatchContent SPAN 
```

相当于

```
#colorSwatchContent SPAN 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T15:50:16.120

由于 jQuery 支持 xpath，您可以使用 firebug 来获取特定的 xpath，然后在 jQuery 中使用它。

只需在 firebug 中浏览源代码，右键单击任何元素，然后选择复制 xpath。

# iphone - iPhone 上的 NSOperation

> ID：830218
> 
> 赞同：41
> 
> 时间：2009-05-06T15:36:09.167
> 
> 标签：iphone, objective-c, cocoa-touch, multithreading, nsoperation

我一直在寻找一些具体场景，`NSOperation`说明 iPhone 何时是在应用程序中使用的理想工具。据我了解，这是围绕编写您自己的`threaded`代码的包装。我还没有看到任何使用它的 Apple 演示应用程序，我想知道我是否错过了一个很棒的工具而不是使用`NSThread`.

这里的理想解决方案是描述一个用例场景`NSOperation`以及如何使用它来解决您的问题。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-05-06T18:26:05.933

Cocoa Is My Girlfriend 有一个[很好的教程](http://www.cimgf.com/2008/02/16/cocoa-tutorial-nsoperation-and-nsoperationqueue/)`NSOperation`，介绍了和的使用`NSOperationQueue`。本教程利用`NSOperation`在单独的线程中同时下载多个网页。

另外，请参阅Mac Research 的[这篇文章](http://macresearch.org/node/4567)。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2009-05-07T08:57:07.040

我在 iPhone 应用程序中使用它的方式基本上是在我的应用程序委托中创建一个 NSOperationQueue 成员，并通过属性使其可用。然后每次我需要在后台运行某些东西时，例如下载一些 XML，我将创建一个 NSInvocationOperation 并将其发送到队列。

```
NSInvocationOperation *operationToPerform = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(updateXML) object:nil];
[[(MyAppDelegate *)[[UIApplication sharedApplication] delegate] sharedOperationQueue] addOperation:operationToPerform];
[op release]; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-07T00:58:12.090

一句话：`NSOperationQueue`

`NSOperationQueue`是线程安全的（你可以从不同的线程向它添加操作，而不需要锁）并且使你能够将 NSop 对象链接在一起。

我的 Flickr iPhone 应用程序 Reflections广泛用于管理下载图像`NSOperation`和.`NSOperationQueue``XML`

警告：确保您阅读、重新阅读并理解文档在谈论“并发”时的含义。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2011-06-09T01:38:25.470

您还应该查看此 URL：http: [//developer.apple.com/cocoa/managingconcurrency.html](http://developer.apple.com/cocoa/managingconcurrency.html)

以上所有这些答案都很棒，但请确保您阅读了上面的文章并在您的代码中自由地使用这一行：

```
if ( self.isCancelled ) return; 
```

Coca is my Girlfriend 提供的样本中没有使用该行，直到我从现场获得崩溃日志后，我才意识到这是一个问题/概念。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-27T19:54:23.807

这只是一个非常简单的实现，但需要花时间阅读教程以完全理解所有内容：

```
NSOperationQueue *queue = [NSOperationQueue new];

NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self
    selector:@selector(methodToCall)
    object:objectToPassToMethod];

[queue addOperation:operation]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-21T22:04:48.587

我将它用于异步处理。这是从 Web 服务获取数据或协调需要大量时间运行的操作的最佳方式。因为它们是线程安全的、异步的（不占用主线程）并且它们支持依赖关系，所以它们对于您的工具集来说是一个非常好的工具。

依赖项允许您进行多个单独的操作，并确保执行和成功或错误以特定顺序输出。当您需要同步一堆数据但您需要在同步子对象之前同步父对象时，这真的很棒。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-27T19:02:32.240

您可以尝试使用 Swift 的示例

```
let operation : NSOperation = NSOperation()
operation.completionBlock = {
println("Completed")
}

let operationQueue = NSOperationQueue.mainQueue()
operationQueue.addOperation(operation) 
```

# c# - 这种 SingleOrDefault() 优化是值得的还是过度杀伤/有害？

> ID：830222
> 
> 赞同：3
> 
> 时间：2009-05-06T15:37:08.867
> 
> 标签：c#, sql, linq-to-sql, optimization

我在搞乱 LinqToSQL 和 LINQPad，我注意到 SingleOrDefault() 不会在生成的 SQL 中进行任何过滤或限制（我几乎预计相当于 Take(1)）。

因此，假设您想保护自己免受大量意外退回，以下代码段是否有用还是一个坏主意？

```
 // SingleType is my LinqToSQL generated type 
// Singles is the table that contains many SingleType's
// context is my datacontext
public SingleType getSingle(int id)
{
     var query = from s in context.Singles where s.ID == id select s;
     var result = query.Take(2).SingleOrDefault();
     return result;
} 
```

与我会做的正常方式相反（注意没有 .Take(2) ）

```
 public SingleType getSingle(int id)
{
     var query = from s in Singles where s.ID == id select s;
     var result = query.SingleOrDefault();
     return result;
} 
```

我认为使用 Take(2)，我仍然可以获得 SingleOrDefault() 的功能，另外还有一个好处是永远不必担心意外返回 {n} 行，但我不确定它是否值得，除非我' m 一直期望在我的查询中意外返回 {n} 行。

那么，这值得吗？它有害吗？有没有我没有看到的优点/缺点？

编辑：

## 没有 Take(2) 的 SQL 生成

```
 SELECT [t0].[blah], (...) 
FROM [dbo].[Single] AS [t0]
WHERE [t0].[ID] = @p0 
```

## 使用 Take(2) 生成的 SQL

```
 SELECT TOP 2 [t0].[blah], (...) 
FROM [dbo].[Single] AS [t0]
WHERE [t0].[ID] = @p0 
```

此外，当我谈到 SingleOrDefault 的功能时，我特别希望在返回 2 个或更多时让它抛出异常，这就是为什么我要执行“Take(2)”。不同之处在于，如果没有 .Take(2)，它将从数据库返回 {n} 行，而实际上它只需要返回 2（足以让它抛出）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T17:37:37.390

`Single`与其说是限制结果数量，不如说是获取查询的单个元素的便捷方法。通过使用`Single`你，实际上是在说“我知道这个查询只能有一个项目，所以把它给我吧”，就像`someArray[0]`当你知道只有一个元素时那样做。 `SingleOrDefault`在处理长度为 0 的序列时添加了返回`null`而不是抛出异常的能力。您不应该使用`Single`或`SingleOrDefault`处理可能返回超过 1 个结果的查询：`InvalidOperationException`将抛出一个。

如果`ID`在您的查询中是表或列的主键`UNIQUE`，则数据库将确保结果集包含 1 行或没有，而无需`TOP`子句。

但是，如果您在非唯一/非键列上进行选择，并且想要第一个结果或最后一个结果（请注意，除非您还引入了 ，否则这些没有任何意义`OrderBy`），那么您可以使用`First`or `Last`（两者都有`OrDefault`对应项）来获取您想要的 SQL：

```
var query = from s in context.Singles 
            where s.Id == id
            orderby s.someOtherColumn
            select s;

var item = query.FirstOrDefault(); 
```

附带说明一下，如果您确实正在对单个元素进行查询，则可以节省一些输入：

```
var query = from s in context.Singles where s.Id == id select s;
var item = query.SingleOrDefault(); 
```

可以变成：

```
var item = context.Singles.SingleOrDefault(s => s.Id == id); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T15:43:39.117

如果序列包含多个元素，[SingleOrDefault](http://msdn.microsoft.com/en-us/library/bb359429.aspx)（和[IEnumerable<T>.SingleOrDefault() ）都会引发 InvalidOperationException。](http://msdn.microsoft.com/en-us/library/bb342451.aspx)

您的上述情况永远不会发生 - 它会引发异常。

* * *

编辑：

我的建议将取决于您的使用场景。如果您认为在某些情况下您会定期从该查询返回多于几行，那么添加 .Take(2) 行。这将为您提供相同的行为和相同的异常，但消除了从数据库返回许多记录的可能性。

但是，您对 SingleOrDefault() 的使用表明不应返回 >1 行。如果真的是这样，我会把它关掉，只是把它当作一个例外。在我看来，您通过暗示添加 .Take(2) 时有 >2 条记录是正常的，从而降低了代码的可读性，在这种情况下，我不相信这是真的。我会接受性能。为了简单起见，请在特殊情况下将其关闭。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T16:18:52.743

你已经提到了这一点。如果您期望查询经常返回大量行，它可能会给您带来性能提升。但是，如果这是一个例外情况——并且`SingleOrDefault()`清楚地表明——这是不值得的。它只会污染你的代码，如果你决定让它进来，你应该记录下来。

**更新**

刚刚注意到您正在查询 id。我假设它是主键，结果你会得到一或零行。所以理论上你不应该太在意使用`Single()`,`First()`或`Take(1)`其他什么。但是我仍然认为它是一个很好的设计，可以`Single()`用来明确声明你只需要一行。几周前，一群人告诉我，他们甚至有一个项目，其中出现了严重错误，并且由于市长数据库故障，主键不再是唯一的。所以安全总比后悔好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T16:15:52.173

Allen，ID 是 Singles 表的主键吗？如果是我不完全理解您的问题，因为您的第二个查询将返回一条记录或 null。并且 SQL 将是 ID = ###... 使用 Take(2).SingleOrDefault() 违背了 SingleOrDefault 的目的。

# javascript - 如何确定从选择字段中选择了哪个选项

> ID：830226
> 
> 赞同：0
> 
> 时间：2009-05-06T15:37:22.050
> 
> 标签：javascript, html

有谁知道如何检索从下拉选择框中选择的选项？

我正在使用 document.getElementById("mySelect").value 它似乎没有工作......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T15:39:02.543

```
document.getElementById("mySelect").options[document.getElementById("mySelect").selectedIndex].value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T15:45:04.930

你确定你的下拉菜单有价值吗？你为它提供了价值吗？

```
<select id="dropdownBox">
<option value="val1">value 1</option>
<option value="val2">value 2</option>
<option value="val3">value 3</option>
<option value="val4">value 4</option>
</select> 
```

值为 val1, val2...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-08T07:18:47.177

代码优化最好执行以下操作：

```
var o = document.getElementById("mySelect");
o.options[o.selectedIndex].value; 
```

jQuery替代品：

```
$("#mySelect").val(); 
```

# ruby - 使用 macruby 和 Objective-C 时的内存管理

> ID：830230
> 
> 赞同：0
> 
> 时间：2009-05-06T15:38:03.060
> 
> 标签：ruby, cocoa

我有一个`macruby`泄漏内存的应用*程序*。Ruby 是用于逻辑的东西并访问我的一些 Objective-C 类，访问诸如 Accessibility-API 之类的函数并制作一些屏幕截图并通过 CIImage 处理它们。

**有 ruby​​ 和 Objective-C 代码，哪一个处理内存？**

据我所知，ruby 会自动收集它的垃圾，但对于 Obj.-CI 必须使用一些`NSAutoreleasePool`. 但我应该`release`在哪里游泳池？我的 ruby​​ 代码需要处理返回的值。

在我的项目设置中，我启用了垃圾收集（`-fobjc-gc-only`）。

这是一些代码：

```
+（CGSize）getSizeAttribute：（AXUIElementRef）元素属性：（CFStringRef）属性{
  AXValueRef 温度；  
  CGSize 点；
  AXError 结果代码；
  resultCode = AXUIElementCopyAttributeValue(元素，属性，(CFTypeRef *)&temp);
  AXValueGetValue(temp, kAXValueCGSizeType, &point);
  返回点；
}

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-10-10T20:41:03.647

在您的代码中，

```
resultCode = AXUIElementCopyAttributeValue( element, attribute, (CFTypeRef *)&temp ); 
```

temp 永远不会被释放。

您应该添加：

```
CFMakeCollectable(temp) 
```

MacRuby 应用程序默认在 GC 模式下运行，但是您的 CF/Obj-C 内存管理可能有点棘手（在 MacRuby 之外），请查看 Apple 在其开发网站上提供的文档。

# django - Django 内容类型问题

> ID：830236
> 
> 赞同：1
> 
> 时间：2009-05-06T15:39:19.017
> 
> 标签：django, content-type

我在链接内容类型时遇到问题。我正在尝试从这个模型中提取一个标题

```
class TankProfile(models.Model):
    user = models.ForeignKey(User)
    title = models.CharField(max_length=100)
    tank_type = models.SmallIntegerField(max_length=1, choices=TANK_TYPE, db_index=True, default=1, verbose_name="Tank Type")
    ts = models.DateTimeField(auto_now=True)
    tsStart = models.DateTimeField(auto_now_add=True)
    tsEnd = models.DateTimeField(null=True, auto_now=False, blank=True)
    pic = models.CharField(max_length=25)
    slug = models.CharField(max_length=100)

    def __unicode__(self):
        return str(self.title)

    def get_title(self):
        return "%s" % self.title 
```

我的链接模型如下使用 contenttype

```
class Photo(models.Model):
    album = models.ForeignKey(Album)
    user = models.ForeignKey(User)
    content_type = models.ForeignKey(ContentType, related_name="content_type_set_for_%(class)s")
    object_pk = models.IntegerField(_('object ID'))
    server = models.CharField(max_length=20)
    dir = models.CharField(max_length=20)
    image = models.CharField(max_length=20)
    added = models.DateTimeField(auto_now_add=True)
    title = models.CharField(max_length=150)
    about = models.TextField()

    def get_root_title(self):

        c = ContentType.objects.get(id=self.content_type.id).model_class()
        print c.title

        return "Photos"

    def __unicode__(self):
        return str(self.id) 
```

在我打电话时的模板中

`{{ photo.get_root_title }}`

什么都没有出现..没有打印出来..我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T19:15:36.377

你`c`是一个类对象，它没有属性`title`。

你想要的是一个被两者引用的对象`content_type`-`object_id`这实际上是所谓的*泛型关系*，[如 Django 文档中所述](http://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#id1)。要使用它，请将 FK 添加到您的`Photo`类中：

```
content_object = generic.GenericForeignKey('content_type', 'object_id') 
```

然后你可以在你的模板中使用这个属性`{{ photo.content_object.title }}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T16:21:18.963

我不知道你为什么特别选择 get_root_title def 但通常使用 django 的 ORM 我会这样做

```
{{ photo.content_type.title }} 
```

你很容易得到标题

# .net - .NET WCF 无法解码“分块”响应

> ID：830238
> 
> 赞同：2
> 
> 时间：2009-05-06T15:39:43.400
> 
> 标签：.net, wcf, http, soap, transfer-encoding

我正在从 WCF 调用轴 Web 服务。该请求工作得很好，但我得到了空值。使用 Fiddler，我能够确定响应的基础是 Transfer-Encoding: chunked。这意味着在 xml 之前的响应中有控制字符。WCF 不会引发错误。它只是继续前进，并且该方法应该返回的对象为空。谁能告诉我如何告诉 WCF 如何正确处理 HTTP 1.1 分块编码消息？

这是一个提出类似问题的人的链接：

[http://www.biztalkgurus.com/forums/t/10860.aspx](http://www.biztalkgurus.com/forums/t/10860.aspx)

肥皂反应：

```
HTTP/1.1 200 OK
Date: Wed, 06 May 2009 15:34:41 GMT
Server: Apache
Set-Cookie: JSESSIONID=01A43C26DB5E284B70F1F6D466D5CD5D; Path=/arsys
Keep-Alive: timeout=15, max=100
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: text/xml;charset=utf-8

ba7
<?xml version="1.0" encoding="utf-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soapenv:Body><ns0:HelpDesk_QueryList_ServiceResponse xmlns:ns0="urn:Port" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <ns0:getListValues>
        <ns0:Assigned_Group>CHQ-TSR-WEL</ns0:Assigned_Group>
        <ns0:Assigned_Group_Shift_Name/>
        <ns0:Assigned_Support_Company>IT Support</ns0:Assigned_Support_Company>
        <ns0:Assigned_Support_Organization>WH</ns0:Assigned_Support_Organization>
        <ns0:Assignee>David</ns0:Assignee>
        <ns0:Categorization_Tier_1>ADD</ns0:Categorization_Tier_1>
        <ns0:Categorization_Tier_2>HARDWARE</ns0:Categorization_Tier_2>
        <ns0:Categorization_Tier_3>DESKTOP/LAPTOP/NOTEBOOK</ns0:Categorization_Tier_3>
        <ns0:City/>
        <ns0:Closure_Manufacturer/>
        <ns0:Closure_Product_Category_Tier1/>
        <ns0:Closure_Product_Category_Tier2/>
        <ns0:Closure_Product_Category_Tier3/>
        <ns0:Closure_Product_Model_Version/>
        <ns0:Closure_Product_Name/>
        <ns0:Company>IT Support</ns0:Company>
        <ns0:Contact_Company>IT Support</ns0:Contact_Company>
        <ns0:Contact_Sensitivity>Standard</ns0:Contact_Sensitivity>
        <ns0:Country/>
        <ns0:Department>WEL</ns0:Department>
        <ns0:Summary>Old PC to be Cascaded
</ns0:Summary>
        <ns0:Notes> User Name:
Make: Dell
Model: Latitude D600
Serial Number: 
Location: </ns0:Notes>
        <ns0:First_Name>James</ns0:First_Name>
        <ns0:Impact>3-Moderado/Limitado</ns0:Impact>
        <ns0:Incident_Number>INC000000009017</ns0:Incident_Number>
        <ns0:Internet_E-mail></ns0:Internet_E-mail>
        <ns0:Last_Name>Goodrich</ns0:Last_Name>
        <ns0:Manufacturer/>
        <ns0:Middle_Initial/>
        <ns0:Organization>--</ns0:Organization>
        <ns0:Phone_Number>+326</ns0:Phone_Number>
        <ns0:Priority>Medium</ns0:Priority>
        <ns0:Priority_Weight/>
        <ns0:Product_Categorization_Tier_1>HARDWARE</ns0:Product_Categorization_Tier_1>
        <ns0:Product_Categorization_Tier_2>DESKTOP/LAPTOP/NOTEBOOK</ns0:Product_Categorization_Tier_2>
        <ns0:Product_Categorization_Tier_3>CASCADE PC</ns0:Product_Categorization_Tier_3>
        <ns0:Product_Model_Version/>
        <ns0:Product_Name/>
        <ns0:Region></ns0:Region>
        <ns0:Reported_Source/>
        <ns0:Resolution>New PC
Make: 
Model: 
Serial Number: 
Ship to:
Shipping Carrier:
Tracking Number:</ns0:Resolution>
        <ns0:Resolution_Category/>
        <ns0:Resolution_Category_Tier_2/>
        <ns0:Resolution_Category_Tier_3/>
        <ns0:Service_Type>User Service Request</ns0:Service_Type>
        <ns0:Site>Salt Lake City</ns0:Site>
        <ns0:Site_Group/>
        <ns0:Status>Assigned</ns0:Status>
        <ns0:Status_Reason/>
        <ns0:Urgency>3-Medium</ns0:Urgency>
        <ns0:VIP>No</ns0:VIP>
    </ns0:getListValues>
</ns0:HelpDesk_QueryList_ServiceResponse></soapenv:Body></soapenv:Envelope>
0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T17:56:40.187

我认为你不能让它工作，因为 IIS（或客户端，取决于你在哪一边）应该在它到达你之前把它去掉，就像你不应该手动 de-gzip 一样要求。

在[这种情况下](https://stackoverflow.com/questions/338624?sort=oldest)，服务器软件似乎不太支持分块。

# iphone - 如何实现循环滚动机制？

> ID：830240
> 
> 赞同：1
> 
> 时间：2009-05-06T15:40:33.820
> 
> 标签：iphone, cocoa-touch, uikit, gesture-recognition

我有一些图像，用户应该从中选择一个。现在我不想只提供一个带有无聊网格的平面滚动区域。相反，我想展示一个包含这些图像的轮子。顶部将是一个指示选择的标记。类似于 Pickers 的东西。

问题不在于轮换。我会为此使用一些几何函数。但我不知道如何真正获得那个轮子上的滚动手势。我必须从哪里开始？

顺便说一句：关于循环，我不是指像 Pickers 这样的东西。我的意思是一个真正的轮子，它有一个中心轴并且可以滚动。像非常古老的电话，像自行车轮子。或者将 Picker 旋转 90°，使轴朝向您（Z 坐标）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T18:14:19.520

如果您正在谈论捕获手势，那么这里是[他们在文档中给出的示例](http://developer.apple.com/iphone/library/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/EventHandling/EventHandling.html#//apple_ref/doc/uid/TP40007072-CH9-SW14)。

虽然我可以发誓我听到 Alan Cannistraro 在第一个[CS193P 讲座](http://www.stanford.edu/class/cs193p/cgi-bin/index.php)中说你不必这样做，你可以捕获滑动事件，但我找不到。

真正知道他们在做什么的人可以纠正我，我会删除这篇文章，但现在我知道这会起作用：

```
#define HORIZ_SWIPE_DRAG_MIN  12
#define VERT_SWIPE_DRAG_MAX    4

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    startTouchPosition = [touch locationInView:self];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint currentTouchPosition = [touch locationInView:self];

    // If the swipe tracks correctly.
    if (fabsf(startTouchPosition.x - currentTouchPosition.x) >= HORIZ_SWIPE_DRAG_MIN &&
        fabsf(startTouchPosition.y - currentTouchPosition.y) <= VERT_SWIPE_DRAG_MAX)
    {
        // It appears to be a swipe.
        if (startTouchPosition.x < currentTouchPosition.x)
            [self myProcessRightSwipe:touches withEvent:event];
        else
            [self myProcessLeftSwipe:touches withEvent:event];
    }
    else
    {
        // Process a non-swipe event.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T21:38:33.740

您认为与选择器视图有多相似？您可以使用自己的自定义子视图加载选择器视图，这些子视图可以是图像视图。这将为您提供带有图像的实际选择器视图，这可能是您的实际目标，也可能不是。

# sql-server - SQL 服务器；TEXT 列的索引

> ID：830241
> 
> 赞同：8
> 
> 时间：2009-05-06T15:40:56.207
> 
> 标签：sql-server, indexing

我有一个包含几列的数据库表；其中大多数是`VARCHAR(x)`类型列，其中一些列上有索引，以便我可以快速搜索其中的数据。

但是，其中一列是一`TEXT`列，因为它包含大量数据（23 kb 纯 ascii 文本等）。我希望能够在该列（... `WHERE col1 LIKE '%search string%'...`）中进行搜索，但目前执行查询需要很长时间。我知道由于此列搜索，查询很慢，因为当我从`WHERE`子句中删除该条件时，查询会立即完成（我会考虑）。

我无法在此列上添加索引，因为该选项在 SQL Server Management Studio 的索引构建器/向导中为该列显示为灰色。

我在这里有哪些选择，以加快该列中的查询搜索？

谢谢你的时间...

**更新**
好的，所以我查看了全文搜索并做了所有这些事情，现在我想运行查询。但是，当使用“包含”时，它只接受一个词；如果我需要一个确切的短语怎么办？`... WHERE CONTAINS (col1, 'search phrase') ...`引发错误。

抱歉，我是 SQL Server 新手

**更新 2** 抱歉，刚刚想通了；使用多个“包含”子句而不是一个包含多个单词的子句。实际上，这仍然没有得到我想要的（确切的短语），它只能确保短语中的所有单词都存在。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-06T15:44:23.793

搜索 TEXT 字段总是很慢。尝试[全文搜索](https://docs.microsoft.com/en-us/sql/relational-databases/search/full-text-search)，看看它是否更适合您。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T15:50:49.583

如果您的查询类似（即您**在**`LIKE '%string%'`字段中搜索字符串），那么您将需要一个索引。**`TEXT``FULLTEXT`**

 **如果您在字段 ( ) 的**开头**搜索子字符串`LIKE 'string%'`并使用`SQL Server 2005`或更高，那么您可以将您的转换`TEXT`为 a `VARCHAR(MAX)`，创建一个计算列并索引该列。

有关性能详细信息，请参阅我的博客中的这篇文章：

*   [**索引 VARCHAR(MAX)**](http://explainextended.com/2009/05/01/indexing-varcharmax/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-06T15:44:14.357

您应该考虑在列上使用全文索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T17:42:13.560

您可以在 FTS 中进行复杂的布尔查询；喜欢

contains(yourcol,'"我的第一个字符串"或"我的第二个字符串"和"我的第三个字符串"')

根据您的查询 ContainsTable 或 freetexttable 可能会提供更好的结果。

如果您通过 .Net 进行连接，您可能需要查看[A google full text search](http://www.sqlservercentral.com/Forums/Topic581526-236-5.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-15T02:07:35.423

而且由于没有人已经说过（也许是因为它很明显），因此查询 `LIKE '%string%'`会绕过您现有的索引 - 所以它会运行得很慢。因此 - 为什么您需要使用全文索引。（这是 Quassnoi 所说的）。

更正-我确定我学到了这一点，并且一直相信这一点-但是经过一些调查（在开始时使用通配符）似乎还可以？我的旧正则表达式查询在喜欢时运行得更好！

# visual-studio - 是否可以使用 VS2003 解决方案中的 VS2008 构建库？

> ID：830242
> 
> 赞同：2
> 
> 时间：2009-05-06T15:41:12.507
> 
> 标签：visual-studio, visual-studio-2008, visual-c++

如何在 Visual Studio 2003 项目中使用使用 Visual Studio 2008 编译的 DLL 和库？

谢谢，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T15:45:28.223

通常，除非其中一个编译器被明确列为与另一个编译器兼容的二进制文件，否则您不太可能能够将已编译的 C++ 库（动态或静态）与另一个编译器一起使用。

一些答案提到了“第三方”或 Windows DLL。但是，我敢打赌，即使不是全部，这些 DLL 中的大多数（如果不是全部）都使用 C API，而不是 C++。C++ ABI（应用程序二进制接口）不是标准化的 - 名称修饰之类的东西不能保证在同一编译器的不同版本之间是相同的，并且调用约定可能会根据编译器*选项*而有所不同。

快速的 Google 搜索没有找到任何看起来可用的链接，但正如我在开始时所说，一般来说，您不能在使用不同编译器编译的代码中使用已编译的**C++库，无论是静态的还是动态的。**C是一个不同的野兽，那个答案是完全不同的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T16:17:59.127

您绝对可以使用 DLL。我在 VS2003 和 VS2008 中使用了相同的第三方 DLL。为了使事情变得更容易，您应该只在 DLL 函数之间传递普通的旧数据类型。结构或类要困难得多，但在大多数情况下，在 VS2003 和 VS2008 之间应该也可以。

看看[这个问题](https://stackoverflow.com/questions/232926/how-to-make-consistent-dll-binaries-across-vs-versions)，以获得比我能给你的更深入的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T15:43:01.940

你不能这样做。唯一可能的事情是重新编译到目标 .NET 1.x。

# .net - .net 框架中的正则表达式 $

> ID：830244
> 
> 赞同：1
> 
> 时间：2009-05-06T15:41:45.593
> 
> 标签：.net, regex

我尝试使用 .net 框架测试正则表达式 $anchor，结果出乎意料。$ 锚只返回最后一个。我注意到多线开关很重要，我已经在这里使用过它。谁能说出原因。以下是我的测试代码

谢谢弗雷德

```
 string sourceText = 
@"ab<br />
ab<br />
ab";

        //var m = Regex.Match(sourceText, "^a", RegexOptions.Multiline); //this return 3 match
        var m = Regex.Match(sourceText, "b$", RegexOptions.Multiline); //this return only one match
        while (m.Success)
        {
            Console.Write(m.Value);
            m = m.NextMatch();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T15:47:20.637

`$`仅匹配`\n`，不匹配`\r\n`（因为您的字符串在 Windows 文本文件中使用 C# 文字时）。

正则表达式`b(?=\r?$)`会做你所期望的。

请参阅[http://msdn.microsoft.com/en-us/library/h5181w5w.aspx](http://msdn.microsoft.com/en-us/library/h5181w5w.aspx)并附上解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T17:11:07.703

这不起作用有两个原因。正如 Lucero 所说，匹配 $ 只会匹配换行符，并且您的测试字符串在每行末尾都有一个carrage return以及换行符。第二个原因是您试图在行尾匹配 b 并且您的测试字符串只有一行符合此要求，前两行以 > 结尾。

我怀疑你想要的是更像这样的东西：

```
b(?=(?:<br />)?\r?$) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T18:22:40.340

对于您将正则表达式应用于什么，似乎有些困惑。它出现在您的原始帖子中的方式，字符串文字似乎有文字换行符（甚至不应该编译），SO软件用`<BR>`标签替换了它。如果您希望字符串包含换行符，则必须使用适当的转义序列，如下所示：

```
string sourceText = "ab\nab\nab"; 
```

或者

```
string sourceText = "ab\r\nab\r\nab"; 
```

在任何一种情况下，正则表达式在多行模式下应用时都`b$` *应该*匹配所有三个 b。我没有准备好自己测试它，但如果真的只像[MSDN 文章](http://msdn.microsoft.com/en-us/library/h5181w5w.aspx)`$`所说的那样匹配，我会认为它是 .NET 正则表达式中的一个严重缺陷。给定一个序列，应该在 之前而不是在 之前匹配。`\n``\r\n``$``\r``\n`

# selenium - 硒运行时间

> ID：830246
> 
> 赞同：0
> 
> 时间：2009-05-06T15:42:19.260
> 
> 标签：selenium

我试图弄清楚什么是正确的语法来记录在 Selenium IDE 中运行测试脚本所需的时间。

如何在脚本中记录开始和结束时间（使用 HTML）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T15:56:10.880

IIRC，它已经这样做了。事实上，如果任何测试运行器没有记录，我会记录一个功能请求:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T16:03:08.383

您可能必须执行一些 javascript 语句。

```
storeEval | javascript{var startTime=new Date().getTime(); startTime;} | startingtime
setSpeed | 500
open | http://www.google.com/
setSpeed | 0
storeEval | javascript{var endTime=new Date().getTime(); endTime;} | endingtime
echo | ${startingtime}
echo | ${endingtime} 
```

编辑经过时间的代码：

```
storeEval | javascript{startTime=new Date().getTime(); startTime;} | startingtime
setSpeed | 500
open | http://www.google.com/
setSpeed | 0
storeEval | javascript{endTime=new Date().getTime(); endTime;} | endingtime
storeEval | javascript{var duration = endTime - startTime;duration;} | dur
echo | ${startingtime}
echo | ${endingtime}
echo | ${dur} 
```

# .net - 全屏运行 .NET Form

> ID：830252
> 
> 赞同：3
> 
> 时间：2009-05-06T15:44:14.450
> 
> 标签：.net, forms, fullscreen

我希望我的应用程序以“全屏”方式运行，就像运行 powerpoint 演示一样。标题栏不见了，菜单栏也不见了。

我不认为它应该太复杂，但我只是找不到如何去做

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T15:48:16.530

如果你想做正确的事，包括隐藏任务栏，这里有一篇文章展示了一种工作方法： http: [//www.codeproject.com/KB/cs/FullScreenDotNetApp.aspx](http://www.codeproject.com/KB/cs/FullScreenDotNetApp.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-09-07T04:12:38.013

确保考虑到多显示器场景。此代码将使您的表单在活动监视器（鼠标光标所在的位置）上全屏显示。

```
this.FormBorderStyle = FormBorderStyle.None;
this.Bounds = Screen.FromPoint(MousePosition).Bounds; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T15:48:29.150

[这是一个很好的例子](http://www.vesic.org/english/blog/winforms/full-screen-maximize/)，展示了如何做到这一点。

它需要几个 P/Invoke 调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T15:49:48.010

试试这个（VB.NET 语法）：

```
Me.MaximizeBox = False
Me.MinimizeBox = False
Me.TopMost = 假
Me.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None
Me.WindowState = System.Windows.Forms.FormWindowState.Maximized

```

# asp.net - 网站项目和WCF项目在相同或不同的解决方案中：优缺点

> ID：830257
> 
> 赞同：1
> 
> 时间：2009-05-06T15:45:05.027
> 
> 标签：asp.net, wcf, iis

我有一个 Visual Studio 解决方案，其中包含一个网站项目以及一堆支持项目（域模型、数据访问等）。

我想通过同一域下的 url 将 API 公开给相同的底层数据，因此我开发了一个 WCF/REST 项目来执行此操作（它依赖于同一组域/数据访问项目）。

现在我想知道将 WCF 服务放在单独的解决方案中，部署在虚拟 IIS 路径下，与仅将 WCF 项目放入原始网站解决方案相比有什么优缺点。

是否有充分的理由让我想选择一种方式？我对 IIS 部署没有太多经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T16:04:22.140

如果您想要自托管服务而不是将其托管在 IIS 中，或者如果您出于某种原因想要将服务接口作为程序集共享，那么将它放在单独的程序集中可能会更容易。

我会推荐一个程序集用于服务接口（包括数据契约等），一个用于服务实现，另一个（如果需要）用于自主机（例如 Windows NT 服务或命令行应用程序）。这是最干净的分离，没有真正的理由不这样做，恕我直言。

马克

# silverlight - silverlight OpenFileDialog 再次打开

> ID：830265
> 
> 赞同：0
> 
> 时间：2009-05-06T15:46:54.973
> 
> 标签：silverlight

我在后端使用带有 vb.net 的 sliverlight 2.0 中的 openFileDialog。我把它连线了，它工作正常，除了点击事件似乎触发了两次。它第一次触发，我选择文件并单击确定。它进行处理。但只要我点击确定，点击事件就会再次触发，对话框再次出现。那不是我想要的，我不确定我做错了什么，它第二次出现了。这是代码..希望有人看到我做错了什么。

```
<Button x:Name="bOpenFileDialog" Content="2\. Import CSV"
             Height="30" Width="200" Margin="0,96,0,0"
             HorizontalAlignment="Left" VerticalAlignment="Top" 
             Click="bOpenFileDialog_Click" />
    <TextBlock Height="19" Margin="246,26,261,0" VerticalAlignment="Top" Text="TextBlock" TextWrapping="Wrap" x:Name="lblMsg"/>

 Private Sub bOpenFileDialog_Click(ByVal sender As Object, ByVal e As System.Windows.RoutedEventArgs) Handles bOpenFileDialog.Click
    Me.bOpenFileDialog.IsEnabled = False
    ' Create an instance of the open file dialog box.
    Dim openFileDialog1 As OpenFileDialog = New OpenFileDialog

    ' Set filter options and filter index.
    openFileDialog1.Filter = "LOG Files (*.log)|*.log|All Files (*.*)|*.*"
    openFileDialog1.FilterIndex = 1

    openFileDialog1.Multiselect = True

    ' Call the ShowDialog method to show the dialogbox.
    Dim UserClickedOK As Boolean = CBool(openFileDialog1.ShowDialog)

    ' Process input if the user clicked OK.
    If (UserClickedOK = True) Then
        Dim rows As Integer = openFileDialog1.Files.Count - 1
        ReDim aryIISLogs(rows)

        For i As Integer = 0 To openFileDialog1.Files.Count - 1
            aryIISLogs(i) = openFileDialog1.Files(i).Name
        Next
        Process1File()
    End If
End Sub 
```

谢谢香农

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T19:12:38.410

我认为这是因为您注册了两次事件：您在按钮定义中有它：

```
Click="bOpenFileDialog_Click" 
```

并在方法定义中：

```
Private Sub bOpenFileDialog_Click(ByVal sender As Object, ByVal e As System.Windows.RoutedEventArgs) Handles bOpenFileDialog.Click 
```

这些中的每一个都会触发事件，因此您有两个弹出窗口。如果您删除“Click=”或“handles”，您将只触发一次事件。

# batch-file - 用于迭代调用其他批处理文件的 Windows 批处理文件

> ID：830266
> 
> 赞同：1
> 
> 时间：2009-05-06T15:47:12.727
> 
> 标签：batch-file

考虑一个包含以下文件的目录结构：

```
\1.3\Baseline\GeneratedScripts\One\FullInstall.cmd
\1.3\Baseline\GeneratedScripts\Two\FullInstall.cmd
\1.3\Baseline\GeneratedScripts\Three\FullInstall.cmd
\1.3\Patches\Patch1\GeneratedScripts\One\FullInstall.cmd
\1.3\Patches\Patch1\GeneratedScripts\Two\FullInstall.cmd
\1.3\Patches\Patch1\GeneratedScripts\Three\FullInstall.cmd
\1.3\Patches\Patch2\GeneratedScripts\One\FullInstall.cmd
\1.3\Patches\Patch2\GeneratedScripts\Two\FullInstall.cmd
\1.3\Patches\Patch2\GeneratedScripts\Three\FullInstall.cmd
\1.3\Patches\Patch3\GeneratedScripts\One\FullInstall.cmd
\1.3\Patches\Patch3\GeneratedScripts\Two\FullInstall.cmd
\1.3\Patches\Patch3\GeneratedScripts\Three\FullInstall.cmd 
```

我想构建一个 Windows 批处理文件`InstallEnvironment.cmd`：

1.  将环境名称作为参数；然后
2.  依次执行基线安装脚本和每个补丁脚本。

*批处理文件应自动执行以后添加的任何附加补丁。*

本质上，我需要按照以下方式做一些事情：

```
for %%_ in (1.3\**\GeneratedScripts\%%1\FullInstall.cmd) do cal %%_ 
```

但是我不确定通配符系统是否足够丰富以允许这样做，因为我没有得到任何与`**`目录通配符匹配的内容。

**例如**，使用参数“Two”调用应按顺序执行以下脚本：

```
\1.3\Baseline\GeneratedScripts\Two\FullInstall.cmd
\1.3\Patches\Patch1\GeneratedScripts\Two\FullInstall.cmd
\1.3\Patches\Patch2\GeneratedScripts\Two\FullInstall.cmd
\1.3\Patches\Patch3\GeneratedScripts\Two\FullInstall.cmd 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T16:02:51.643

这将根据参数执行子文件夹中的所有 *.cmd 文件：

```
for /r 1.3\ %%X in (GeneratedScripts\%1\*.cmd) do call "%%X" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T16:03:55.433

根据我的经验，%1 替换在目录名称中起作用。

这应该有效：

安装环境.bat：

```
\1.3\Baseline\GeneratedScripts\%1\FullInstall.cmd
\1.3\Patches\Patch1\GeneratedScripts\%1\FullInstall.cmd
\1.3\Patches\Patch2\GeneratedScripts\%1\FullInstall.cmd
\1.3\Patches\Patch3\GeneratedScripts\%1\FullInstall.cmd

```

编辑此批处理文件以按顺序添加其他补丁，它可以工作。如果您需要在多个目录上运行相同的批处理文件，请创建另一个批处理文件：

```
调用 InstallEnvironment.bat %1
调用 InstallEnvironment.bat %2

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T11:04:45.910

如果要在后台运行批处理文件，请改用 vbs 文件在后台运行该 bat 文件。这是代码：

CreateObject("Wscript.Shell").Run"""" & Wscript.Arguments(0)& """",0,False

将其完全保存为 invisible.vbs（或任何内容），然后制作另一个批处理文件，该文件将调用您的批处理文件以在后台运行它。第二个批处理文件的代码是：

wscript.exe "invisible.vbs" "Your_Batch_File.bat"

然后运行第二个批处理文件。

注意：应在您的计算机上启用 WSH，并且 invisible.vbs 文件和第二个批处理文件应位于同一文件夹中。如果没有，那么您可以在第二个批处理文件的脚本中给出 invisible.vbs 文件的完整路径。

# visual-c++ - 链接到所有 Visual Studio $ 变量

> ID：830271
> 
> 赞同：183
> 
> 时间：2009-05-06T15:47:36.983
> 
> 标签：visual-c++, visual-studio-2008, msbuild, visual-c++-6

我正在查看Visual Studio 2008 中`$(Configuration)`的`$(ProjectDir)`Prebuild 事件等。

是否有所有这些变量的链接以及每个变量的定义？

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2009-05-06T15:53:05.583

试试这个 MSDN 页面：[生成命令和属性的宏](https://docs.microsoft.com/en-us/cpp/build/reference/common-macros-for-build-commands-and-properties?view=vs-2017)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2019-02-11T10:44:18.960

好的，我终于想要一个非常完整的、*可搜索*的这些变量列表以供参考。*这是我机器上*的 Visual C++ 项目的已定义变量的完整（OCR 生成，因为我不容易找到类似于`printenv`命令的东西）列表。可能并非所有宏都是为其他宏定义的（例如），但我想在包容性方面犯错。*`OCTAVE_EXECUTABLE`*

 *例如，这是我第一次看到`$(Language)`（扩展到`C++`该项目）在 IDE 之外被提及。

```
$(AllowLocalNetworkLoopback)
$(ALLUSERSPROFILE)
$(AndroidTargetsPath)
$(APPDATA)
$(AppxManifestMetadataClHostArchDir)
$(AppxManifestMetadataCITargetArchDir)
$(Attach)
$(BaseIntermediateOutputPath)
$(BuildingInsideVisualStudio)
$(CharacterSet)
$(CLRSupport)
$(CommonProgramFiles)
$(CommonProgramW6432)
$(COMPUTERNAME)
$(ComSpec)
$(Configuration)
$(ConfigurationType)
$(CppWinRT_IncludePath)
$(CrtSDKReferencelnclude)
$(CrtSDKReferenceVersion)
$(CustomAfterMicrosoftCommonProps)
$(CustomBeforeMicrosoftCommonProps)
$(DebugCppRuntimeFilesPath)
$(DebuggerFlavor)
$(DebuggerLaunchApplication)
$(DebuggerRequireAuthentication)
$(DebuggerType)
$(DefaultLanguageSourceExtension)
$(DefaultPlatformToolset)
$(DefaultWindowsSDKVersion)
$(DefineExplicitDefaults)
$(DelayImplib)
$(DesignTimeBuild)
$(DevEnvDir)
$(DocumentLibraryDependencies)
$(DotNetSdk_IncludePath)
$(DotNetSdk_LibraryPath)
$(DotNetSdk_LibraryPath_arm)
$(DotNetSdk_LibraryPath_arm64)
$(DotNetSdk_LibraryPath_x64)
$(DotNetSdk_LibraryPath_x86)
$(DotNetSdkRoot)
$(DriverData)
$(EmbedManifest)
$(EnableManagedIncrementalBuild)
$(EspXtensions)
$(ExcludePath)
$(ExecutablePath)
$(ExtensionsToDeleteOnClean)
$(FPS_BROWSER_APP_PROFILE_STRING)
$(FPS_BROWSER_USER_PROFILE_STRING)
$(FrameworkDir)
$(FrameworkDir_110)
$(FrameworkSdkDir)
$(FrameworkSDKRoot)
$(FrameworkVersion)
$(GenerateManifest)
$(GPURefDebuggerBreakOnAllThreads)
$(HOMEDRIVE)
$(HOMEPATH)
$(IgnorelmportLibrary)
$(ImportByWildcardAfterMicrosoftCommonProps)
$(ImportByWildcardBeforeMicrosoftCommonProps)
$(ImportDirectoryBuildProps)
$(ImportProjectExtensionProps)
$(ImportUserLocationsByWildcardAfterMicrosoftCommonProps)
$(ImportUserLocationsByWildcardBeforeMicrosoftCommonProps)
$(IncludePath)
$(IncludeVersionInInteropName)
$(IntDir)
$(InteropOutputPath)
$(iOSTargetsPath)
$(Keyword)
$(KIT_SHARED_IncludePath)
$(LangID)
$(LangName)
$(Language)
$(LIBJABRA_TRACE_LEVEL)
$(LibraryPath)
$(LibraryWPath)
$(LinkCompiled)
$(LinkIncremental)
$(LOCALAPPDATA)
$(LocalDebuggerAttach)
$(LocalDebuggerDebuggerlType)
$(LocalDebuggerMergeEnvironment)
$(LocalDebuggerSQLDebugging)
$(LocalDebuggerWorkingDirectory)
$(LocalGPUDebuggerTargetType)
$(LOGONSERVER)
$(MicrosoftCommonPropsHasBeenImported)
$(MpiDebuggerCleanupDeployment)
$(MpiDebuggerDebuggerType)
$(MpiDebuggerDeployCommonRuntime)
$(MpiDebuggerNetworkSecurityMode)
$(MpiDebuggerSchedulerNode)
$(MpiDebuggerSchedulerTimeout)
$(MSBuild_ExecutablePath)
$(MSBuildAllProjects)
$(MSBuildAssemblyVersion)
$(MSBuildBinPath)
$(MSBuildExtensionsPath)
$(MSBuildExtensionsPath32)
$(MSBuildExtensionsPath64)
$(MSBuildFrameworkToolsPath)
$(MSBuildFrameworkToolsPath32)
$(MSBuildFrameworkToolsPath64)
$(MSBuildFrameworkToolsRoot)
$(MSBuildLoadMicrosoftTargetsReadOnly)
$(MSBuildNodeCount)
$(MSBuildProgramFiles32)
$(MSBuildProjectDefaultTargets)
$(MSBuildProjectDirectory)
$(MSBuildProjectDirectoryNoRoot)
$(MSBuildProjectExtension)
$(MSBuildProjectExtensionsPath)
$(MSBuildProjectFile)
$(MSBuildProjectFullPath)
$(MSBuildProjectName)
$(MSBuildRuntimeType)
$(MSBuildRuntimeVersion)
$(MSBuildSDKsPath)
$(MSBuildStartupDirectory)
$(MSBuildToolsPath)
$(MSBuildToolsPath32)
$(MSBuildToolsPath64)
$(MSBuildToolsRoot)
$(MSBuildToolsVersion)
$(MSBuildUserExtensionsPath)
$(MSBuildVersion)
$(MultiToolTask)
$(NETFXKitsDir)
$(NETFXSDKDir)
$(NuGetProps)
$(NUMBER_OF_PROCESSORS)
$(OCTAVE_EXECUTABLE)
$(OneDrive)
$(OneDriveCommercial)
$(OS)
$(OutDir)
$(OutDirWasSpecified)
$(OutputType)
$(Path)
$(PATHEXT)
$(PkgDefApplicationConfigFile)
$(Platform)
$(Platform_Actual)
$(PlatformArchitecture)
$(PlatformName)
$(PlatformPropsFound)
$(PlatformShortName)
$(PlatformTarget)
$(PlatformTargetsFound)
$(PlatformToolset)
$(PlatformToolsetVersion)
$(PostBuildEventUseInBuild)
$(PreBuildEventUseInBuild)
$(PreferredToolArchitecture)
$(PreLinkEventUselnBuild)
$(PROCESSOR_ARCHITECTURE)
$(PROCESSOR_ARCHITEW6432)
$(PROCESSOR_IDENTIFIER)
$(PROCESSOR_LEVEL)
$(PROCESSOR_REVISION)
$(ProgramData)
$(ProgramFiles)
$(ProgramW6432)
$(ProjectDir)
$(ProjectExt)
$(ProjectFileName)
$(ProjectGuid)
$(ProjectName)
$(ProjectPath)
$(PSExecutionPolicyPreference)
$(PSModulePath)
$(PUBLIC)
$(ReferencePath)
$(RemoteDebuggerAttach)
$(RemoteDebuggerConnection)
$(RemoteDebuggerDebuggerlype)
$(RemoteDebuggerDeployDebugCppRuntime)
$(RemoteDebuggerServerName)
$(RemoteDebuggerSQLDebugging)
$(RemoteDebuggerWorkingDirectory)
$(RemoteGPUDebuggerTargetType)
$(RetargetAlwaysSupported)
$(RootNamespace)
$(RoslynTargetsPath)
$(SDK35ToolsPath)
$(SDK40ToolsPath)
$(SDKDisplayName)
$(SDKIdentifier)
$(SDKVersion)
$(SESSIONNAME)
$(SolutionDir)
$(SolutionExt)
$(SolutionFileName)
$(SolutionName)
$(SolutionPath)
$(SourcePath)
$(SpectreMitigation)
$(SQLDebugging)
$(SystemDrive)
$(SystemRoot)
$(TargetExt)
$(TargetFrameworkVersion)
$(TargetName)
$(TargetPlatformMinVersion)
$(TargetPlatformVersion)
$(TargetPlatformWinMDLocation)
$(TargetUniversalCRTVersion)
$(TEMP)
$(TMP)
$(ToolsetPropsFound)
$(ToolsetTargetsFound)
$(UCRTContentRoot)
$(UM_IncludePath)
$(UniversalCRT_IncludePath)
$(UniversalCRT_LibraryPath_arm)
$(UniversalCRT_LibraryPath_arm64)
$(UniversalCRT_LibraryPath_x64)
$(UniversalCRT_LibraryPath_x86)
$(UniversalCRT_PropsPath)
$(UniversalCRT_SourcePath)
$(UniversalCRTSdkDir)
$(UniversalCRTSdkDir_10)
$(UseDebugLibraries)
$(UseLegacyManagedDebugger)
$(UseOfATL)
$(UseOfMfc)
$(USERDOMAIN)
$(USERDOMAIN_ROAMINGPROFILE)
$(USERNAME)
$(USERPROFILE)
$(UserRootDir)
$(VBOX_MSI_INSTALL_PATH)
$(VC_ATLMFC_IncludePath)
$(VC_ATLMFC_SourcePath)
$(VC_CRT_SourcePath)
$(VC_ExecutablePath_ARM)
$(VC_ExecutablePath_ARM64)
$(VC_ExecutablePath_x64)
$(VC_ExecutablePath_x64_ARM)
$(VC_ExecutablePath_x64_ARM64)
$(VC_ExecutablePath_x64_x64)
$(VC_ExecutablePath_x64_x86)
$(VC_ExecutablePath_x86)
$(VC_ExecutablePath_x86_ARM)
$(VC_ExecutablePath_x86_ARM64)
$(VC_ExecutablePath_x86_x64)
$(VC_ExecutablePath_x86_x86)
$(VC_IFCPath)
$(VC_IncludePath)
$(VC_LibraryPath_ARM)
$(VC_LibraryPath_ARM64)
$(VC_LibraryPath_ATL_ARM)
$(VC_LibraryPath_ATL_ARM64)
$(VC_LibraryPath_ATL_x64)
$(VC_LibraryPath_ATL_x86)
$(VC_LibraryPath_VC_ARM)
$(VC_LibraryPath_VC_ARM_Desktop)
$(VC_LibraryPath_VC_ARM_OneCore)
$(VC_LibraryPath_VC_ARM_Store)
$(VC_LibraryPath_VC_ARM64)
$(VC_LibraryPath_VC_ARM64_Desktop)
$(VC_LibraryPath_VC_ARM64_OneCore)
$(VC_LibraryPath_VC_ARM64_Store)
$(VC_LibraryPath_VC_x64)
$(VC_LibraryPath_VC_x64_Desktop)
$(VC_LibraryPath_VC_x64_OneCore)
$(VC_LibraryPath_VC_x64_Store)
$(VC_LibraryPath_VC_x86)
$(VC_LibraryPath_VC_x86_Desktop)
$(VC_LibraryPath_VC_x86_OneCore)
$(VC_LibraryPath_VC_x86_Store)
$(VC_LibraryPath_x64)
$(VC_LibraryPath_x86)
$(VC_PGO_RunTime_Dir)
$(VC_ReferencesPath_ARM)
$(VC_ReferencesPath_ARM64)
$(VC_ReferencesPath_ATL_ARM)
$(VC_ReferencesPath_ATL_ARM64)
$(VC_ReferencesPath_ATL_x64)
$(VC_ReferencesPath_ATL_x86)
$(VC_ReferencesPath_VC_ARM)
$(VC_ReferencesPath_VC_ARM64)
$(VC_ReferencesPath_VC_x64)
$(VC_ReferencesPath_VC_x86)
$(VC_ReferencesPath_x64)
$(VC_ReferencesPath_x86)
$(VC_SourcePath)
$(VC_VC_IncludePath)
$(VC_VS_IncludePath)
$(VC_VS_LibraryPath_VC_VS_ARM)
$(VC_VS_LibraryPath_VC_VS_x64)
$(VC_VS_LibraryPath_VC_VS_x86)
$(VC_VS_SourcePath)
$(VCIDEInstallDir)
$(VCIDEInstallDir_150)
$(VCInstallDir)
$(VCInstallDir_150)
$(VCLibPackagePath)
$(VCProjectVersion)
$(VCTargetsPath)
$(VCTargetsPath10)
$(VCTargetsPath11)
$(VCTargetsPath12)
$(VCTargetsPath14)
$(VCTargetsPath15)
$(VCTargetsPathActual)
$(VCTargetsPathEffective)
$(VCToolArchitecture)
$(VCToolsInstallDir)
$(VCToolsInstallDir_150)
$(VCToolsVersion)
$(VisualStudioDir)
$(VisualStudioEdition)
$(VisualStudioVersion)
$(VS_ExecutablePath)
$(VS140COMNTOOLS)
$(VSAPPIDDIR)
$(VSAPPIDNAME)
$(VSInstallDir)
$(VSInstallDir_150)
$(VsInstallRoot)
$(VSLANG)
$(VSSKUEDITION)
$(VSVersion)
$(WDKBinRoot)
$(WebBrowserDebuggerDebuggerlype)
$(WebServiceDebuggerDebuggerlype)
$(WebServiceDebuggerSQLDebugging)
$(WholeProgramOptimization)
$(WholeProgramOptimizationAvailabilityInstrument)
$(WholeProgramOptimizationAvailabilityOptimize)
$(WholeProgramOptimizationAvailabilityTrue)
$(WholeProgramOptimizationAvailabilityUpdate)
$(windir)
$(Windows81SdkInstalled)
$(WindowsAppContainer)
$(WindowsSDK_ExecutablePath)
$(WindowsSDK_ExecutablePath_arm)
$(WindowsSDK_ExecutablePath_arm64)
$(WindowsSDK_ExecutablePath_x64)
$(WindowsSDK_LibraryPath_x86)
$(WindowsSDK_MetadataFoundationPath)
$(WindowsSDK_MetadataPath)
$(WindowsSDK_MetadataPathVersioned)
$(WindowsSDK_PlatformPath)
$(WindowsSDK_SupportedAPIs_arm)
$(WindowsSDK_SupportedAPIs_x64)
$(WindowsSDK_SupportedAPIs_x86)
$(WindowsSDK_UnionMetadataPath)
$(WindowsSDK80Path)
$(WindowsSdkDir)
$(WindowsSdkDir_10)
$(WindowsSdkDir_81)
$(WindowsSdkDir_81A)
$(WindowsSDKToolArchitecture)
$(WindowsTargetPlatformVersion)
$(WinRT_IncludePath)
$(WMSISProject)
$(WMSISProjectDirectory) 
```

在 Visual Studio 中的何处可以找到此列表：

1.  打开 C++ 项目的对话框*属性页*
2.  选择可以使用配置变量的*任何文本字段。*（在屏幕截图中，我使用*Target Name*）
3.  在文本框的右侧，单击小组合框按钮并选择选项`<Edit...>`。
4.  在新窗口中（此处，标题为*Target Name*），单击 button `Macros>>`。
5.  滚动浏览环境/链接器/宏变量的巨大列表。

励志截图：

[![带有示例宏变量列表的 Visual Studio 项目属性页](https://i.stack.imgur.com/Ok4LS.png)](https://i.stack.imgur.com/Ok4LS.png)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-02-08T00:05:27.470

虽然似乎没有一个完整的列表，但以下内容也可能会有所帮助：

如何使用环境属性：http:
  [//msdn.microsoft.com/en-us/library/ms171459.aspx](http://msdn.microsoft.com/en-us/library/ms171459.aspx)

MSBuild 保留属性：http:
  [//msdn.microsoft.com/en-us/library/ms164309.aspx](http://msdn.microsoft.com/en-us/library/ms164309.aspx)

众所周知的项目属性（不确定如何使用）：http:
  [//msdn.microsoft.com/en-us/library/ms164313.aspx](http://msdn.microsoft.com/en-us/library/ms164313.aspx)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-06-29T20:44:06.280

如果您需要查找那些标准 VS 宏以外的变量的值，您可以使用[Process Explorer](https://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)轻松完成。启动它，找到你的Visual Studio实例运行的进程，右键，**属性** `→</kbd> **Environment.** It lists all those $ vars as key-value pairs: [![enter image description here](https://i.stack.imgur.com/RuoEV.jpg)](https://i.stack.imgur.com/RuoEV.jpg)`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-04-22T18:42:46.000

Nikita 的回答非常适合 Visual Studio 在其环境中设置的宏，但这远非全面。（环境变量成为 MSBuild 宏，但不是相反。）

对 ojdo 的回答稍作调整：转到任何项目的 IDE 的“构建事件”中的“预构建事件命令行”（您在 IDE 中找到的位置可能取决于语言，即 C#、c++ 等。请参阅位置的其他答案。）将下面的代码发布到“预构建事件命令行”中，然后构建该项目。构建开始后，您将在 TEMP 目录中有一个“macros.txt”文件，其中包含所有宏及其值的漂亮列表。我的列表完全基于 ojdo 的答案中包含的列表。我不知道它是否全面，但这是一个好的开始！

```
echo AllowLocalNetworkLoopback=$(AllowLocalNetworkLoopback) >>$(TEMP)\macros.txt
echo ALLUSERSPROFILE=$(ALLUSERSPROFILE) >>$(TEMP)\macros.txt
echo AndroidTargetsPath=$(AndroidTargetsPath) >>$(TEMP)\macros.txt
echo APPDATA=$(APPDATA) >>$(TEMP)\macros.txt
echo AppxManifestMetadataClHostArchDir=$(AppxManifestMetadataClHostArchDir) >>$(TEMP)\macros.txt
echo AppxManifestMetadataCITargetArchDir=$(AppxManifestMetadataCITargetArchDir) >>$(TEMP)\macros.txt
echo Attach=$(Attach) >>$(TEMP)\macros.txt
echo BaseIntermediateOutputPath=$(BaseIntermediateOutputPath) >>$(TEMP)\macros.txt
echo BuildingInsideVisualStudio=$(BuildingInsideVisualStudio) >>$(TEMP)\macros.txt
echo CharacterSet=$(CharacterSet) >>$(TEMP)\macros.txt
echo CLRSupport=$(CLRSupport) >>$(TEMP)\macros.txt
echo CommonProgramFiles=$(CommonProgramFiles) >>$(TEMP)\macros.txt
echo CommonProgramW6432=$(CommonProgramW6432) >>$(TEMP)\macros.txt
echo COMPUTERNAME=$(COMPUTERNAME) >>$(TEMP)\macros.txt
echo ComSpec=$(ComSpec) >>$(TEMP)\macros.txt
echo Configuration=$(Configuration) >>$(TEMP)\macros.txt
echo ConfigurationType=$(ConfigurationType) >>$(TEMP)\macros.txt
echo CppWinRT_IncludePath=$(CppWinRT_IncludePath) >>$(TEMP)\macros.txt
echo CrtSDKReferencelnclude=$(CrtSDKReferencelnclude) >>$(TEMP)\macros.txt
echo CrtSDKReferenceVersion=$(CrtSDKReferenceVersion) >>$(TEMP)\macros.txt
echo CustomAfterMicrosoftCommonProps=$(CustomAfterMicrosoftCommonProps) >>$(TEMP)\macros.txt
echo CustomBeforeMicrosoftCommonProps=$(CustomBeforeMicrosoftCommonProps) >>$(TEMP)\macros.txt
echo DebugCppRuntimeFilesPath=$(DebugCppRuntimeFilesPath) >>$(TEMP)\macros.txt
echo DebuggerFlavor=$(DebuggerFlavor) >>$(TEMP)\macros.txt
echo DebuggerLaunchApplication=$(DebuggerLaunchApplication) >>$(TEMP)\macros.txt
echo DebuggerRequireAuthentication=$(DebuggerRequireAuthentication) >>$(TEMP)\macros.txt
echo DebuggerType=$(DebuggerType) >>$(TEMP)\macros.txt
echo DefaultLanguageSourceExtension=$(DefaultLanguageSourceExtension) >>$(TEMP)\macros.txt
echo DefaultPlatformToolset=$(DefaultPlatformToolset) >>$(TEMP)\macros.txt
echo DefaultWindowsSDKVersion=$(DefaultWindowsSDKVersion) >>$(TEMP)\macros.txt
echo DefineExplicitDefaults=$(DefineExplicitDefaults) >>$(TEMP)\macros.txt
echo DelayImplib=$(DelayImplib) >>$(TEMP)\macros.txt
echo DesignTimeBuild=$(DesignTimeBuild) >>$(TEMP)\macros.txt
echo DevEnvDir=$(DevEnvDir) >>$(TEMP)\macros.txt
echo DocumentLibraryDependencies=$(DocumentLibraryDependencies) >>$(TEMP)\macros.txt
echo DotNetSdk_IncludePath=$(DotNetSdk_IncludePath) >>$(TEMP)\macros.txt
echo DotNetSdk_LibraryPath=$(DotNetSdk_LibraryPath) >>$(TEMP)\macros.txt
echo DotNetSdk_LibraryPath_arm=$(DotNetSdk_LibraryPath_arm) >>$(TEMP)\macros.txt
echo DotNetSdk_LibraryPath_arm64=$(DotNetSdk_LibraryPath_arm64) >>$(TEMP)\macros.txt
echo DotNetSdk_LibraryPath_x64=$(DotNetSdk_LibraryPath_x64) >>$(TEMP)\macros.txt
echo DotNetSdk_LibraryPath_x86=$(DotNetSdk_LibraryPath_x86) >>$(TEMP)\macros.txt
echo DotNetSdkRoot=$(DotNetSdkRoot) >>$(TEMP)\macros.txt
echo DriverData=$(DriverData) >>$(TEMP)\macros.txt
echo EmbedManifest=$(EmbedManifest) >>$(TEMP)\macros.txt
echo EnableManagedIncrementalBuild=$(EnableManagedIncrementalBuild) >>$(TEMP)\macros.txt
echo EspXtensions=$(EspXtensions) >>$(TEMP)\macros.txt
echo ExcludePath=$(ExcludePath) >>$(TEMP)\macros.txt
echo ExecutablePath=$(ExecutablePath) >>$(TEMP)\macros.txt
echo ExtensionsToDeleteOnClean=$(ExtensionsToDeleteOnClean) >>$(TEMP)\macros.txt
echo FPS_BROWSER_APP_PROFILE_STRING=$(FPS_BROWSER_APP_PROFILE_STRING) >>$(TEMP)\macros.txt
echo FPS_BROWSER_USER_PROFILE_STRING=$(FPS_BROWSER_USER_PROFILE_STRING) >>$(TEMP)\macros.txt
echo FrameworkDir=$(FrameworkDir) >>$(TEMP)\macros.txt
echo FrameworkDir_110=$(FrameworkDir_110) >>$(TEMP)\macros.txt
echo FrameworkSdkDir=$(FrameworkSdkDir) >>$(TEMP)\macros.txt
echo FrameworkSDKRoot=$(FrameworkSDKRoot) >>$(TEMP)\macros.txt
echo FrameworkVersion=$(FrameworkVersion) >>$(TEMP)\macros.txt
echo GenerateManifest=$(GenerateManifest) >>$(TEMP)\macros.txt
echo GPURefDebuggerBreakOnAllThreads=$(GPURefDebuggerBreakOnAllThreads) >>$(TEMP)\macros.txt
echo HOMEDRIVE=$(HOMEDRIVE) >>$(TEMP)\macros.txt
echo HOMEPATH=$(HOMEPATH) >>$(TEMP)\macros.txt
echo IgnorelmportLibrary=$(IgnorelmportLibrary) >>$(TEMP)\macros.txt
echo ImportByWildcardAfterMicrosoftCommonProps=$(ImportByWildcardAfterMicrosoftCommonProps) >>$(TEMP)\macros.txt
echo ImportByWildcardBeforeMicrosoftCommonProps=$(ImportByWildcardBeforeMicrosoftCommonProps) >>$(TEMP)\macros.txt
echo ImportDirectoryBuildProps=$(ImportDirectoryBuildProps) >>$(TEMP)\macros.txt
echo ImportProjectExtensionProps=$(ImportProjectExtensionProps) >>$(TEMP)\macros.txt
echo ImportUserLocationsByWildcardAfterMicrosoftCommonProps=$(ImportUserLocationsByWildcardAfterMicrosoftCommonProps) >>$(TEMP)\macros.txt
echo ImportUserLocationsByWildcardBeforeMicrosoftCommonProps=$(ImportUserLocationsByWildcardBeforeMicrosoftCommonProps) >>$(TEMP)\macros.txt
echo IncludePath=$(IncludePath) >>$(TEMP)\macros.txt
echo IncludeVersionInInteropName=$(IncludeVersionInInteropName) >>$(TEMP)\macros.txt
echo IntDir=$(IntDir) >>$(TEMP)\macros.txt
echo InteropOutputPath=$(InteropOutputPath) >>$(TEMP)\macros.txt
echo iOSTargetsPath=$(iOSTargetsPath) >>$(TEMP)\macros.txt
echo Keyword=$(Keyword) >>$(TEMP)\macros.txt
echo KIT_SHARED_IncludePath=$(KIT_SHARED_IncludePath) >>$(TEMP)\macros.txt
echo LangID=$(LangID) >>$(TEMP)\macros.txt
echo LangName=$(LangName) >>$(TEMP)\macros.txt
echo Language=$(Language) >>$(TEMP)\macros.txt
echo LIBJABRA_TRACE_LEVEL=$(LIBJABRA_TRACE_LEVEL) >>$(TEMP)\macros.txt
echo LibraryPath=$(LibraryPath) >>$(TEMP)\macros.txt
echo LibraryWPath=$(LibraryWPath) >>$(TEMP)\macros.txt
echo LinkCompiled=$(LinkCompiled) >>$(TEMP)\macros.txt
echo LinkIncremental=$(LinkIncremental) >>$(TEMP)\macros.txt
echo LOCALAPPDATA=$(LOCALAPPDATA) >>$(TEMP)\macros.txt
echo LocalDebuggerAttach=$(LocalDebuggerAttach) >>$(TEMP)\macros.txt
echo LocalDebuggerDebuggerlType=$(LocalDebuggerDebuggerlType) >>$(TEMP)\macros.txt
echo LocalDebuggerMergeEnvironment=$(LocalDebuggerMergeEnvironment) >>$(TEMP)\macros.txt
echo LocalDebuggerSQLDebugging=$(LocalDebuggerSQLDebugging) >>$(TEMP)\macros.txt
echo LocalDebuggerWorkingDirectory=$(LocalDebuggerWorkingDirectory) >>$(TEMP)\macros.txt
echo LocalGPUDebuggerTargetType=$(LocalGPUDebuggerTargetType) >>$(TEMP)\macros.txt
echo LOGONSERVER=$(LOGONSERVER) >>$(TEMP)\macros.txt
echo MicrosoftCommonPropsHasBeenImported=$(MicrosoftCommonPropsHasBeenImported) >>$(TEMP)\macros.txt
echo MpiDebuggerCleanupDeployment=$(MpiDebuggerCleanupDeployment) >>$(TEMP)\macros.txt
echo MpiDebuggerDebuggerType=$(MpiDebuggerDebuggerType) >>$(TEMP)\macros.txt
echo MpiDebuggerDeployCommonRuntime=$(MpiDebuggerDeployCommonRuntime) >>$(TEMP)\macros.txt
echo MpiDebuggerNetworkSecurityMode=$(MpiDebuggerNetworkSecurityMode) >>$(TEMP)\macros.txt
echo MpiDebuggerSchedulerNode=$(MpiDebuggerSchedulerNode) >>$(TEMP)\macros.txt
echo MpiDebuggerSchedulerTimeout=$(MpiDebuggerSchedulerTimeout) >>$(TEMP)\macros.txt
echo MSBuild_ExecutablePath=$(MSBuild_ExecutablePath) >>$(TEMP)\macros.txt
echo MSBuildAllProjects=$(MSBuildAllProjects) >>$(TEMP)\macros.txt
echo MSBuildAssemblyVersion=$(MSBuildAssemblyVersion) >>$(TEMP)\macros.txt
echo MSBuildBinPath=$(MSBuildBinPath) >>$(TEMP)\macros.txt
echo MSBuildExtensionsPath=$(MSBuildExtensionsPath) >>$(TEMP)\macros.txt
echo MSBuildExtensionsPath32=$(MSBuildExtensionsPath32) >>$(TEMP)\macros.txt
echo MSBuildExtensionsPath64=$(MSBuildExtensionsPath64) >>$(TEMP)\macros.txt
echo MSBuildFrameworkToolsPath=$(MSBuildFrameworkToolsPath) >>$(TEMP)\macros.txt
echo MSBuildFrameworkToolsPath32=$(MSBuildFrameworkToolsPath32) >>$(TEMP)\macros.txt
echo MSBuildFrameworkToolsPath64=$(MSBuildFrameworkToolsPath64) >>$(TEMP)\macros.txt
echo MSBuildFrameworkToolsRoot=$(MSBuildFrameworkToolsRoot) >>$(TEMP)\macros.txt
echo MSBuildLoadMicrosoftTargetsReadOnly=$(MSBuildLoadMicrosoftTargetsReadOnly) >>$(TEMP)\macros.txt
echo MSBuildNodeCount=$(MSBuildNodeCount) >>$(TEMP)\macros.txt
echo MSBuildProgramFiles32=$(MSBuildProgramFiles32) >>$(TEMP)\macros.txt
echo MSBuildProjectDefaultTargets=$(MSBuildProjectDefaultTargets) >>$(TEMP)\macros.txt
echo MSBuildProjectDirectory=$(MSBuildProjectDirectory) >>$(TEMP)\macros.txt
echo MSBuildProjectDirectoryNoRoot=$(MSBuildProjectDirectoryNoRoot) >>$(TEMP)\macros.txt
echo MSBuildProjectExtension=$(MSBuildProjectExtension) >>$(TEMP)\macros.txt
echo MSBuildProjectExtensionsPath=$(MSBuildProjectExtensionsPath) >>$(TEMP)\macros.txt
echo MSBuildProjectFile=$(MSBuildProjectFile) >>$(TEMP)\macros.txt
echo MSBuildProjectFullPath=$(MSBuildProjectFullPath) >>$(TEMP)\macros.txt
echo MSBuildProjectName=$(MSBuildProjectName) >>$(TEMP)\macros.txt
echo MSBuildRuntimeType=$(MSBuildRuntimeType) >>$(TEMP)\macros.txt
echo MSBuildRuntimeVersion=$(MSBuildRuntimeVersion) >>$(TEMP)\macros.txt
echo MSBuildSDKsPath=$(MSBuildSDKsPath) >>$(TEMP)\macros.txt
echo MSBuildStartupDirectory=$(MSBuildStartupDirectory) >>$(TEMP)\macros.txt
echo MSBuildToolsPath=$(MSBuildToolsPath) >>$(TEMP)\macros.txt
echo MSBuildToolsPath32=$(MSBuildToolsPath32) >>$(TEMP)\macros.txt
echo MSBuildToolsPath64=$(MSBuildToolsPath64) >>$(TEMP)\macros.txt
echo MSBuildToolsRoot=$(MSBuildToolsRoot) >>$(TEMP)\macros.txt
echo MSBuildToolsVersion=$(MSBuildToolsVersion) >>$(TEMP)\macros.txt
echo MSBuildUserExtensionsPath=$(MSBuildUserExtensionsPath) >>$(TEMP)\macros.txt
echo MSBuildVersion=$(MSBuildVersion) >>$(TEMP)\macros.txt
echo MultiToolTask=$(MultiToolTask) >>$(TEMP)\macros.txt
echo NETFXKitsDir=$(NETFXKitsDir) >>$(TEMP)\macros.txt
echo NETFXSDKDir=$(NETFXSDKDir) >>$(TEMP)\macros.txt
echo NuGetProps=$(NuGetProps) >>$(TEMP)\macros.txt
echo NUMBER_OF_PROCESSORS=$(NUMBER_OF_PROCESSORS) >>$(TEMP)\macros.txt
echo OCTAVE_EXECUTABLE=$(OCTAVE_EXECUTABLE) >>$(TEMP)\macros.txt
echo OneDrive=$(OneDrive) >>$(TEMP)\macros.txt
echo OneDriveCommercial=$(OneDriveCommercial) >>$(TEMP)\macros.txt
echo OS=$(OS) >>$(TEMP)\macros.txt
echo OutDir=$(OutDir) >>$(TEMP)\macros.txt
echo OutDirWasSpecified=$(OutDirWasSpecified) >>$(TEMP)\macros.txt
echo OutputType=$(OutputType) >>$(TEMP)\macros.txt
echo Path=$(Path) >>$(TEMP)\macros.txt
echo PATHEXT=$(PATHEXT) >>$(TEMP)\macros.txt
echo PkgDefApplicationConfigFile=$(PkgDefApplicationConfigFile) >>$(TEMP)\macros.txt
echo Platform=$(Platform) >>$(TEMP)\macros.txt
echo Platform_Actual=$(Platform_Actual) >>$(TEMP)\macros.txt
echo PlatformArchitecture=$(PlatformArchitecture) >>$(TEMP)\macros.txt
echo PlatformName=$(PlatformName) >>$(TEMP)\macros.txt
echo PlatformPropsFound=$(PlatformPropsFound) >>$(TEMP)\macros.txt
echo PlatformShortName=$(PlatformShortName) >>$(TEMP)\macros.txt
echo PlatformTarget=$(PlatformTarget) >>$(TEMP)\macros.txt
echo PlatformTargetsFound=$(PlatformTargetsFound) >>$(TEMP)\macros.txt
echo PlatformToolset=$(PlatformToolset) >>$(TEMP)\macros.txt
echo PlatformToolsetVersion=$(PlatformToolsetVersion) >>$(TEMP)\macros.txt
echo PostBuildEventUseInBuild=$(PostBuildEventUseInBuild) >>$(TEMP)\macros.txt
echo PreBuildEventUseInBuild=$(PreBuildEventUseInBuild) >>$(TEMP)\macros.txt
echo PreferredToolArchitecture=$(PreferredToolArchitecture) >>$(TEMP)\macros.txt
echo PreLinkEventUselnBuild=$(PreLinkEventUselnBuild) >>$(TEMP)\macros.txt
echo PROCESSOR_ARCHITECTURE=$(PROCESSOR_ARCHITECTURE) >>$(TEMP)\macros.txt
echo PROCESSOR_ARCHITEW6432=$(PROCESSOR_ARCHITEW6432) >>$(TEMP)\macros.txt
echo PROCESSOR_IDENTIFIER=$(PROCESSOR_IDENTIFIER) >>$(TEMP)\macros.txt
echo PROCESSOR_LEVEL=$(PROCESSOR_LEVEL) >>$(TEMP)\macros.txt
echo PROCESSOR_REVISION=$(PROCESSOR_REVISION) >>$(TEMP)\macros.txt
echo ProgramData=$(ProgramData) >>$(TEMP)\macros.txt
echo ProgramFiles=$(ProgramFiles) >>$(TEMP)\macros.txt
echo ProgramW6432=$(ProgramW6432) >>$(TEMP)\macros.txt
echo ProjectDir=$(ProjectDir) >>$(TEMP)\macros.txt
echo ProjectExt=$(ProjectExt) >>$(TEMP)\macros.txt
echo ProjectFileName=$(ProjectFileName) >>$(TEMP)\macros.txt
echo ProjectGuid=$(ProjectGuid) >>$(TEMP)\macros.txt
echo ProjectName=$(ProjectName) >>$(TEMP)\macros.txt
echo ProjectPath=$(ProjectPath) >>$(TEMP)\macros.txt
echo PSExecutionPolicyPreference=$(PSExecutionPolicyPreference) >>$(TEMP)\macros.txt
echo PSModulePath=$(PSModulePath) >>$(TEMP)\macros.txt
echo PUBLIC=$(PUBLIC) >>$(TEMP)\macros.txt
echo ReferencePath=$(ReferencePath) >>$(TEMP)\macros.txt
echo RemoteDebuggerAttach=$(RemoteDebuggerAttach) >>$(TEMP)\macros.txt
echo RemoteDebuggerConnection=$(RemoteDebuggerConnection) >>$(TEMP)\macros.txt
echo RemoteDebuggerDebuggerlype=$(RemoteDebuggerDebuggerlype) >>$(TEMP)\macros.txt
echo RemoteDebuggerDeployDebugCppRuntime=$(RemoteDebuggerDeployDebugCppRuntime) >>$(TEMP)\macros.txt
echo RemoteDebuggerServerName=$(RemoteDebuggerServerName) >>$(TEMP)\macros.txt
echo RemoteDebuggerSQLDebugging=$(RemoteDebuggerSQLDebugging) >>$(TEMP)\macros.txt
echo RemoteDebuggerWorkingDirectory=$(RemoteDebuggerWorkingDirectory) >>$(TEMP)\macros.txt
echo RemoteGPUDebuggerTargetType=$(RemoteGPUDebuggerTargetType) >>$(TEMP)\macros.txt
echo RetargetAlwaysSupported=$(RetargetAlwaysSupported) >>$(TEMP)\macros.txt
echo RootNamespace=$(RootNamespace) >>$(TEMP)\macros.txt
echo RoslynTargetsPath=$(RoslynTargetsPath) >>$(TEMP)\macros.txt
echo SDK35ToolsPath=$(SDK35ToolsPath) >>$(TEMP)\macros.txt
echo SDK40ToolsPath=$(SDK40ToolsPath) >>$(TEMP)\macros.txt
echo SDKDisplayName=$(SDKDisplayName) >>$(TEMP)\macros.txt
echo SDKIdentifier=$(SDKIdentifier) >>$(TEMP)\macros.txt
echo SDKVersion=$(SDKVersion) >>$(TEMP)\macros.txt
echo SESSIONNAME=$(SESSIONNAME) >>$(TEMP)\macros.txt
echo SolutionDir=$(SolutionDir) >>$(TEMP)\macros.txt
echo SolutionExt=$(SolutionExt) >>$(TEMP)\macros.txt
echo SolutionFileName=$(SolutionFileName) >>$(TEMP)\macros.txt
echo SolutionName=$(SolutionName) >>$(TEMP)\macros.txt
echo SolutionPath=$(SolutionPath) >>$(TEMP)\macros.txt
echo SourcePath=$(SourcePath) >>$(TEMP)\macros.txt
echo SpectreMitigation=$(SpectreMitigation) >>$(TEMP)\macros.txt
echo SQLDebugging=$(SQLDebugging) >>$(TEMP)\macros.txt
echo SystemDrive=$(SystemDrive) >>$(TEMP)\macros.txt
echo SystemRoot=$(SystemRoot) >>$(TEMP)\macros.txt
echo TargetExt=$(TargetExt) >>$(TEMP)\macros.txt
echo TargetFrameworkVersion=$(TargetFrameworkVersion) >>$(TEMP)\macros.txt
echo TargetName=$(TargetName) >>$(TEMP)\macros.txt
echo TargetPlatformMinVersion=$(TargetPlatformMinVersion) >>$(TEMP)\macros.txt
echo TargetPlatformVersion=$(TargetPlatformVersion) >>$(TEMP)\macros.txt
echo TargetPlatformWinMDLocation=$(TargetPlatformWinMDLocation) >>$(TEMP)\macros.txt
echo TargetUniversalCRTVersion=$(TargetUniversalCRTVersion) >>$(TEMP)\macros.txt
echo TEMP=$(TEMP) >>$(TEMP)\macros.txt
echo TMP=$(TMP) >>$(TEMP)\macros.txt
echo ToolsetPropsFound=$(ToolsetPropsFound) >>$(TEMP)\macros.txt
echo ToolsetTargetsFound=$(ToolsetTargetsFound) >>$(TEMP)\macros.txt
echo UCRTContentRoot=$(UCRTContentRoot) >>$(TEMP)\macros.txt
echo UM_IncludePath=$(UM_IncludePath) >>$(TEMP)\macros.txt
echo UniversalCRT_IncludePath=$(UniversalCRT_IncludePath) >>$(TEMP)\macros.txt
echo UniversalCRT_LibraryPath_arm=$(UniversalCRT_LibraryPath_arm) >>$(TEMP)\macros.txt
echo UniversalCRT_LibraryPath_arm64=$(UniversalCRT_LibraryPath_arm64) >>$(TEMP)\macros.txt
echo UniversalCRT_LibraryPath_x64=$(UniversalCRT_LibraryPath_x64) >>$(TEMP)\macros.txt
echo UniversalCRT_LibraryPath_x86=$(UniversalCRT_LibraryPath_x86) >>$(TEMP)\macros.txt
echo UniversalCRT_PropsPath=$(UniversalCRT_PropsPath) >>$(TEMP)\macros.txt
echo UniversalCRT_SourcePath=$(UniversalCRT_SourcePath) >>$(TEMP)\macros.txt
echo UniversalCRTSdkDir=$(UniversalCRTSdkDir) >>$(TEMP)\macros.txt
echo UniversalCRTSdkDir_10=$(UniversalCRTSdkDir_10) >>$(TEMP)\macros.txt
echo UseDebugLibraries=$(UseDebugLibraries) >>$(TEMP)\macros.txt
echo UseLegacyManagedDebugger=$(UseLegacyManagedDebugger) >>$(TEMP)\macros.txt
echo UseOfATL=$(UseOfATL) >>$(TEMP)\macros.txt
echo UseOfMfc=$(UseOfMfc) >>$(TEMP)\macros.txt
echo USERDOMAIN=$(USERDOMAIN) >>$(TEMP)\macros.txt
echo USERDOMAIN_ROAMINGPROFILE=$(USERDOMAIN_ROAMINGPROFILE) >>$(TEMP)\macros.txt
echo USERNAME=$(USERNAME) >>$(TEMP)\macros.txt
echo USERPROFILE=$(USERPROFILE) >>$(TEMP)\macros.txt
echo UserRootDir=$(UserRootDir) >>$(TEMP)\macros.txt
echo VBOX_MSI_INSTALL_PATH=$(VBOX_MSI_INSTALL_PATH) >>$(TEMP)\macros.txt
echo VC_ATLMFC_IncludePath=$(VC_ATLMFC_IncludePath) >>$(TEMP)\macros.txt
echo VC_ATLMFC_SourcePath=$(VC_ATLMFC_SourcePath) >>$(TEMP)\macros.txt
echo VC_CRT_SourcePath=$(VC_CRT_SourcePath) >>$(TEMP)\macros.txt
echo VC_ExecutablePath_ARM=$(VC_ExecutablePath_ARM) >>$(TEMP)\macros.txt
echo VC_ExecutablePath_ARM64=$(VC_ExecutablePath_ARM64) >>$(TEMP)\macros.txt
echo VC_ExecutablePath_x64=$(VC_ExecutablePath_x64) >>$(TEMP)\macros.txt
echo VC_ExecutablePath_x64_ARM=$(VC_ExecutablePath_x64_ARM) >>$(TEMP)\macros.txt
echo VC_ExecutablePath_x64_ARM64=$(VC_ExecutablePath_x64_ARM64) >>$(TEMP)\macros.txt
echo VC_ExecutablePath_x64_x64=$(VC_ExecutablePath_x64_x64) >>$(TEMP)\macros.txt
echo VC_ExecutablePath_x64_x86=$(VC_ExecutablePath_x64_x86) >>$(TEMP)\macros.txt
echo VC_ExecutablePath_x86=$(VC_ExecutablePath_x86) >>$(TEMP)\macros.txt
echo VC_ExecutablePath_x86_ARM=$(VC_ExecutablePath_x86_ARM) >>$(TEMP)\macros.txt
echo VC_ExecutablePath_x86_ARM64=$(VC_ExecutablePath_x86_ARM64) >>$(TEMP)\macros.txt
echo VC_ExecutablePath_x86_x64=$(VC_ExecutablePath_x86_x64) >>$(TEMP)\macros.txt
echo VC_ExecutablePath_x86_x86=$(VC_ExecutablePath_x86_x86) >>$(TEMP)\macros.txt
echo VC_IFCPath=$(VC_IFCPath) >>$(TEMP)\macros.txt
echo VC_IncludePath=$(VC_IncludePath) >>$(TEMP)\macros.txt
echo VC_LibraryPath_ARM=$(VC_LibraryPath_ARM) >>$(TEMP)\macros.txt
echo VC_LibraryPath_ARM64=$(VC_LibraryPath_ARM64) >>$(TEMP)\macros.txt
echo VC_LibraryPath_ATL_ARM=$(VC_LibraryPath_ATL_ARM) >>$(TEMP)\macros.txt
echo VC_LibraryPath_ATL_ARM64=$(VC_LibraryPath_ATL_ARM64) >>$(TEMP)\macros.txt
echo VC_LibraryPath_ATL_x64=$(VC_LibraryPath_ATL_x64) >>$(TEMP)\macros.txt
echo VC_LibraryPath_ATL_x86=$(VC_LibraryPath_ATL_x86) >>$(TEMP)\macros.txt
echo VC_LibraryPath_VC_ARM=$(VC_LibraryPath_VC_ARM) >>$(TEMP)\macros.txt
echo VC_LibraryPath_VC_ARM_Desktop=$(VC_LibraryPath_VC_ARM_Desktop) >>$(TEMP)\macros.txt
echo VC_LibraryPath_VC_ARM_OneCore=$(VC_LibraryPath_VC_ARM_OneCore) >>$(TEMP)\macros.txt
echo VC_LibraryPath_VC_ARM_Store=$(VC_LibraryPath_VC_ARM_Store) >>$(TEMP)\macros.txt
echo VC_LibraryPath_VC_ARM64=$(VC_LibraryPath_VC_ARM64) >>$(TEMP)\macros.txt
echo VC_LibraryPath_VC_ARM64_Desktop=$(VC_LibraryPath_VC_ARM64_Desktop) >>$(TEMP)\macros.txt
echo VC_LibraryPath_VC_ARM64_OneCore=$(VC_LibraryPath_VC_ARM64_OneCore) >>$(TEMP)\macros.txt
echo VC_LibraryPath_VC_ARM64_Store=$(VC_LibraryPath_VC_ARM64_Store) >>$(TEMP)\macros.txt
echo VC_LibraryPath_VC_x64=$(VC_LibraryPath_VC_x64) >>$(TEMP)\macros.txt
echo VC_LibraryPath_VC_x64_Desktop=$(VC_LibraryPath_VC_x64_Desktop) >>$(TEMP)\macros.txt
echo VC_LibraryPath_VC_x64_OneCore=$(VC_LibraryPath_VC_x64_OneCore) >>$(TEMP)\macros.txt
echo VC_LibraryPath_VC_x64_Store=$(VC_LibraryPath_VC_x64_Store) >>$(TEMP)\macros.txt
echo VC_LibraryPath_VC_x86=$(VC_LibraryPath_VC_x86) >>$(TEMP)\macros.txt
echo VC_LibraryPath_VC_x86_Desktop=$(VC_LibraryPath_VC_x86_Desktop) >>$(TEMP)\macros.txt
echo VC_LibraryPath_VC_x86_OneCore=$(VC_LibraryPath_VC_x86_OneCore) >>$(TEMP)\macros.txt
echo VC_LibraryPath_VC_x86_Store=$(VC_LibraryPath_VC_x86_Store) >>$(TEMP)\macros.txt
echo VC_LibraryPath_x64=$(VC_LibraryPath_x64) >>$(TEMP)\macros.txt
echo VC_LibraryPath_x86=$(VC_LibraryPath_x86) >>$(TEMP)\macros.txt
echo VC_PGO_RunTime_Dir=$(VC_PGO_RunTime_Dir) >>$(TEMP)\macros.txt
echo VC_ReferencesPath_ARM=$(VC_ReferencesPath_ARM) >>$(TEMP)\macros.txt
echo VC_ReferencesPath_ARM64=$(VC_ReferencesPath_ARM64) >>$(TEMP)\macros.txt
echo VC_ReferencesPath_ATL_ARM=$(VC_ReferencesPath_ATL_ARM) >>$(TEMP)\macros.txt
echo VC_ReferencesPath_ATL_ARM64=$(VC_ReferencesPath_ATL_ARM64) >>$(TEMP)\macros.txt
echo VC_ReferencesPath_ATL_x64=$(VC_ReferencesPath_ATL_x64) >>$(TEMP)\macros.txt
echo VC_ReferencesPath_ATL_x86=$(VC_ReferencesPath_ATL_x86) >>$(TEMP)\macros.txt
echo VC_ReferencesPath_VC_ARM=$(VC_ReferencesPath_VC_ARM) >>$(TEMP)\macros.txt
echo VC_ReferencesPath_VC_ARM64=$(VC_ReferencesPath_VC_ARM64) >>$(TEMP)\macros.txt
echo VC_ReferencesPath_VC_x64=$(VC_ReferencesPath_VC_x64) >>$(TEMP)\macros.txt
echo VC_ReferencesPath_VC_x86=$(VC_ReferencesPath_VC_x86) >>$(TEMP)\macros.txt
echo VC_ReferencesPath_x64=$(VC_ReferencesPath_x64) >>$(TEMP)\macros.txt
echo VC_ReferencesPath_x86=$(VC_ReferencesPath_x86) >>$(TEMP)\macros.txt
echo VC_SourcePath=$(VC_SourcePath) >>$(TEMP)\macros.txt
echo VC_VC_IncludePath=$(VC_VC_IncludePath) >>$(TEMP)\macros.txt
echo VC_VS_IncludePath=$(VC_VS_IncludePath) >>$(TEMP)\macros.txt
echo VC_VS_LibraryPath_VC_VS_ARM=$(VC_VS_LibraryPath_VC_VS_ARM) >>$(TEMP)\macros.txt
echo VC_VS_LibraryPath_VC_VS_x64=$(VC_VS_LibraryPath_VC_VS_x64) >>$(TEMP)\macros.txt
echo VC_VS_LibraryPath_VC_VS_x86=$(VC_VS_LibraryPath_VC_VS_x86) >>$(TEMP)\macros.txt
echo VC_VS_SourcePath=$(VC_VS_SourcePath) >>$(TEMP)\macros.txt
echo VCIDEInstallDir=$(VCIDEInstallDir) >>$(TEMP)\macros.txt
echo VCIDEInstallDir_150=$(VCIDEInstallDir_150) >>$(TEMP)\macros.txt
echo VCInstallDir=$(VCInstallDir) >>$(TEMP)\macros.txt
echo VCInstallDir_150=$(VCInstallDir_150) >>$(TEMP)\macros.txt
echo VCLibPackagePath=$(VCLibPackagePath) >>$(TEMP)\macros.txt
echo VCProjectVersion=$(VCProjectVersion) >>$(TEMP)\macros.txt
echo VCTargetsPath=$(VCTargetsPath) >>$(TEMP)\macros.txt
echo VCTargetsPath10=$(VCTargetsPath10) >>$(TEMP)\macros.txt
echo VCTargetsPath11=$(VCTargetsPath11) >>$(TEMP)\macros.txt
echo VCTargetsPath12=$(VCTargetsPath12) >>$(TEMP)\macros.txt
echo VCTargetsPath14=$(VCTargetsPath14) >>$(TEMP)\macros.txt
echo VCTargetsPath15=$(VCTargetsPath15) >>$(TEMP)\macros.txt
echo VCTargetsPathActual=$(VCTargetsPathActual) >>$(TEMP)\macros.txt
echo VCTargetsPathEffective=$(VCTargetsPathEffective) >>$(TEMP)\macros.txt
echo VCToolArchitecture=$(VCToolArchitecture) >>$(TEMP)\macros.txt
echo VCToolsInstallDir=$(VCToolsInstallDir) >>$(TEMP)\macros.txt
echo VCToolsInstallDir_150=$(VCToolsInstallDir_150) >>$(TEMP)\macros.txt
echo VCToolsVersion=$(VCToolsVersion) >>$(TEMP)\macros.txt
echo VisualStudioDir=$(VisualStudioDir) >>$(TEMP)\macros.txt
echo VisualStudioEdition=$(VisualStudioEdition) >>$(TEMP)\macros.txt
echo VisualStudioVersion=$(VisualStudioVersion) >>$(TEMP)\macros.txt
echo VS_ExecutablePath=$(VS_ExecutablePath) >>$(TEMP)\macros.txt
echo VS140COMNTOOLS=$(VS140COMNTOOLS) >>$(TEMP)\macros.txt
echo VSAPPIDDIR=$(VSAPPIDDIR) >>$(TEMP)\macros.txt
echo VSAPPIDNAME=$(VSAPPIDNAME) >>$(TEMP)\macros.txt
echo VSInstallDir=$(VSInstallDir) >>$(TEMP)\macros.txt
echo VSInstallDir_150=$(VSInstallDir_150) >>$(TEMP)\macros.txt
echo VsInstallRoot=$(VsInstallRoot) >>$(TEMP)\macros.txt
echo VSLANG=$(VSLANG) >>$(TEMP)\macros.txt
echo VSSKUEDITION=$(VSSKUEDITION) >>$(TEMP)\macros.txt
echo VSVersion=$(VSVersion) >>$(TEMP)\macros.txt
echo WDKBinRoot=$(WDKBinRoot) >>$(TEMP)\macros.txt
echo WebBrowserDebuggerDebuggerlype=$(WebBrowserDebuggerDebuggerlype) >>$(TEMP)\macros.txt
echo WebServiceDebuggerDebuggerlype=$(WebServiceDebuggerDebuggerlype) >>$(TEMP)\macros.txt
echo WebServiceDebuggerSQLDebugging=$(WebServiceDebuggerSQLDebugging) >>$(TEMP)\macros.txt
echo WholeProgramOptimization=$(WholeProgramOptimization) >>$(TEMP)\macros.txt
echo WholeProgramOptimizationAvailabilityInstrument=$(WholeProgramOptimizationAvailabilityInstrument) >>$(TEMP)\macros.txt
echo WholeProgramOptimizationAvailabilityOptimize=$(WholeProgramOptimizationAvailabilityOptimize) >>$(TEMP)\macros.txt
echo WholeProgramOptimizationAvailabilityTrue=$(WholeProgramOptimizationAvailabilityTrue) >>$(TEMP)\macros.txt
echo WholeProgramOptimizationAvailabilityUpdate=$(WholeProgramOptimizationAvailabilityUpdate) >>$(TEMP)\macros.txt
echo windir=$(windir) >>$(TEMP)\macros.txt
echo Windows81SdkInstalled=$(Windows81SdkInstalled) >>$(TEMP)\macros.txt
echo WindowsAppContainer=$(WindowsAppContainer) >>$(TEMP)\macros.txt
echo WindowsSDK_ExecutablePath=$(WindowsSDK_ExecutablePath) >>$(TEMP)\macros.txt
echo WindowsSDK_ExecutablePath_arm=$(WindowsSDK_ExecutablePath_arm) >>$(TEMP)\macros.txt
echo WindowsSDK_ExecutablePath_arm64=$(WindowsSDK_ExecutablePath_arm64) >>$(TEMP)\macros.txt
echo WindowsSDK_ExecutablePath_x64=$(WindowsSDK_ExecutablePath_x64) >>$(TEMP)\macros.txt
echo WindowsSDK_LibraryPath_x86=$(WindowsSDK_LibraryPath_x86) >>$(TEMP)\macros.txt
echo WindowsSDK_MetadataFoundationPath=$(WindowsSDK_MetadataFoundationPath) >>$(TEMP)\macros.txt
echo WindowsSDK_MetadataPath=$(WindowsSDK_MetadataPath) >>$(TEMP)\macros.txt
echo WindowsSDK_MetadataPathVersioned=$(WindowsSDK_MetadataPathVersioned) >>$(TEMP)\macros.txt
echo WindowsSDK_PlatformPath=$(WindowsSDK_PlatformPath) >>$(TEMP)\macros.txt
echo WindowsSDK_SupportedAPIs_arm=$(WindowsSDK_SupportedAPIs_arm) >>$(TEMP)\macros.txt
echo WindowsSDK_SupportedAPIs_x64=$(WindowsSDK_SupportedAPIs_x64) >>$(TEMP)\macros.txt
echo WindowsSDK_SupportedAPIs_x86=$(WindowsSDK_SupportedAPIs_x86) >>$(TEMP)\macros.txt
echo WindowsSDK_UnionMetadataPath=$(WindowsSDK_UnionMetadataPath) >>$(TEMP)\macros.txt
echo WindowsSDK80Path=$(WindowsSDK80Path) >>$(TEMP)\macros.txt
echo WindowsSdkDir=$(WindowsSdkDir) >>$(TEMP)\macros.txt
echo WindowsSdkDir_10=$(WindowsSdkDir_10) >>$(TEMP)\macros.txt
echo WindowsSdkDir_81=$(WindowsSdkDir_81) >>$(TEMP)\macros.txt
echo WindowsSdkDir_81A=$(WindowsSdkDir_81A) >>$(TEMP)\macros.txt
echo WindowsSDKToolArchitecture=$(WindowsSDKToolArchitecture) >>$(TEMP)\macros.txt
echo WindowsTargetPlatformVersion=$(WindowsTargetPlatformVersion) >>$(TEMP)\macros.txt
echo WinRT_IncludePath=$(WinRT_IncludePath) >>$(TEMP)\macros.txt
echo WMSISProject=$(WMSISProject) >>$(TEMP)\macros.txt
echo WMSISProjectDirectory=$(WMSISProjectDirectory) >>$(TEMP)\macros.txt 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-10T07:22:42.450

任何使用 Visual Studio 6.0 处理遗留软件的人都会发现 $(Configuration) 和 $(ProjectDir) 宏没有定义。对于构建后/构建前事件，请给出以 .dsw 文件（工作区）的位置作为起点的相对路径。在[相对路径](https://stackoverflow.com/questions/6895457/how-to-define-relative-paths-in-visual-studio-project)中，点代表当前目录，.. 代表父目录。给出需要处理的文件的相对路径。示例：（复制 /y .\..\..\Debug\mylib.dll .\..\MyProject\Debug\ ）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-12T15:22:20.257

要添加到其他答案，请注意可以为项目配置[属性表，创建自定义项目特定参数。](https://msdn.microsoft.com/en-us/library/669zx6zc.aspx#Anchor_0)

要访问或创建它们，请导航到（至少在 Visual Studio 2013 中）**View -> Other Windows -> Property Manager**。您还可以在源文件夹中以**.prop**文件的形式找到它们

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-15T11:17:37.153

对于 c#，没有属性页。

您可以在项目属性、构建事件、编辑预构建、宏>>中看到非常有限的列表，如[是否有 Visual Studio 环境变量列表中所述？](https://stackoverflow.com/q/1460798/1948625)

另一种方法是**将 MSBuild 输出详细程度设置为 Diagnostic ，如**[https://techblog.dorogin.com/msbuild-a-simple-way-to-find-out-all-properties-and-their](https://techblog.dorogin.com/msbuild-a-simple-way-to-find-out-all-properties-and-their-values-while-building-a-csproj-file-d14bcbe8fadc)中的命令行所述[-values-while-building-a-csproj-file-d14bcbe8fadc](https://techblog.dorogin.com/msbuild-a-simple-way-to-find-out-all-properties-and-their-values-while-building-a-csproj-file-d14bcbe8fadc)或此处： [![选项、项目和解决方案、构建和运行对话框](https://i.stack.imgur.com/dl3Gg.png)](https://i.stack.imgur.com/dl3Gg.png)

宏和变量似乎被输出了很多次。例如，在我的解决方案中，“SolutionPath”显示了 82 次！查找文本“初始属性：”。我的有大约 780 个属性，我不知道它们是否都可以使用。

不幸的是，我仍然看不到`$(VSInstalledExternalTools)`选项、项目和解决方案、Web 包管理、外部 Web 工具所使用的值！我认为这意味着它是未定义的： [![选项、项目和解决方案、Web 包管理、外部 Web 工具对话框](https://i.stack.imgur.com/9gzVg.png)](https://i.stack.imgur.com/9gzVg.png)

# wpf - 计算 ListBox 中可见项目的数量

> ID：830272
> 
> 赞同：2
> 
> 时间：2009-05-06T15:47:55.440
> 
> 标签：wpf, listbox, scroll, visible

我有一门课叫书；

```
class Book
{
    public string Name { get; set; }
    public string Author { get; set; }
    public int PagesCount { get; set; }
    public int Category { get; set; }
} 
```

ListBox 显示书籍列表，并且 ItemTemplate 已被修改，以便直观地表示书籍。文字显示书名、作者和页数。然而，类别由某种颜色表示（例如，历史是蓝色，浪漫是红色等）。现在，文本具有 OuterGlowBitmap 效果和从类别 (int) 到适当颜色的值转换器。ListBoxItem 的所有内容都绑定在 DataTemplate 中。从技术上讲，一切正常。

然而，问题在于性能。似乎 outerGlow 位图效果在处理器上很重，所以当我有一个大约 500 本书的列表时，从数据库中检索数据大约需要 500 毫秒，但将项目实际加载到 ListBox 大约需要 10 秒。即使加载完成，滚动也很慢。我尝试将 VirtualizingStackPanel.IsVirtualizing 设置为 True，但无济于事。（在任何给定时间，数据库中的最大书籍数量约为 30000。）

但是，即使列表框中有 100 多个项目，人脑也无法快速处理，因此我的目标不是加载并向用户列出所有搜索到的书籍。这就是为什么我创建了一个包装导航类 BookNavigator，它实际上将列表框绑定到它的 ObservableCollection 对象。所有书籍都加载到此 BookNavigator 中，但只有 X 本书显示在列表框中（通过将它们添加到 observableCollection 中）。

这样做的问题是我希望显示的书籍数量足够小，以至于列表框不显示滚动条，所以我可以实现自己的滚动方法（第一个、上一个、下一个、最后一个，或者只是我自己的滚动条，不没关系）。

如何计算要显示的项目数，以便不显示滚动条？

弹出的两个问题： - 调整应用程序的大小可以更改列表框的大小 - 并非所有列表框项目的高度都相同（取决于作者的数量）。

有什么办法可以实现我想要做的事情吗？

* * *

**编辑（作为对马丁哈里斯的回复）**

Martin Harris 建议的代码的问题是 foreach 循环使用 FrameworkElement，但列表框填充了 Book 类型的对象，这些对象不继承自 FrameworkElement，也没有任何其他计算其高度的方法。ListBoxItem 的根元素是一个网格，所以也许可以检索这个网格，但我不知道该怎么做？

有什么方法可以获取为表示列表框项而创建的实际 UI 元素？

* * *

**编辑**

我发现这个 Q/A 似乎是我需要的.. [ItemContainerGenerator](https://stackoverflow.com/questions/610343/wpf-listbox-getting-uielement-instead-of-of-selecteditem)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T14:24:32.607

在试图找出类似的东西之后，我想我会在这里分享我的结果（因为它似乎比其他回复更容易）：

我从[这里](https://stackoverflow.com/questions/1517743/in-wpf-how-can-i-determine-whether-a-control-is-visible-to-the-user)得到的简单能见度测试。

```
private static bool IsUserVisible(FrameworkElement element, FrameworkElement container)
{
    if (!element.IsVisible)
        return false;

    Rect bounds =
        element.TransformToAncestor(container).TransformBounds(new Rect(0.0, 0.0, element.ActualWidth, element.ActualHeight));
    var rect = new Rect(0.0, 0.0, container.ActualWidth, container.ActualHeight);
    return rect.Contains(bounds.TopLeft) || rect.Contains(bounds.BottomRight);
} 
```

之后，您可以遍历 listboxitems 并使用该测试来确定哪些是可见的。此列表的计数将为您提供列表框中可见项目的数量。

```
private List<object> GetVisibleItemsFromListbox(ListBox listBox, FrameworkElement parentToTestVisibility)
{
    var items = new List<object>();

    foreach (var item in PhotosListBox.Items)
    {
        if (IsUserVisible((ListBoxItem)listBox.ItemContainerGenerator.ContainerFromItem(item), parentToTestVisibility))
        {
            items.Add(item);
        }
        else if (items.Any())
        {
            break;
        }
    }

    return items;
} 
```

这将包含当前显示在列表框中的项目列表（包括通过滚动或类似方式隐藏的项目）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T15:59:44.833

您是否*可以*在将所有书籍添加到列表框之前弄清楚它们的大小（可能通过在后面的代码中解析和填充模板 XAML，然后询问外部控件的大小），这将是很多工作获得。您不能简单地选择一些足以填满列表框的书籍，但又不能选择太多以减慢渲染速度并关闭滚动条吗？这仍然可以与列表框的大小相关联，以便随着列表框的增长添加更多项目，但添加一些额外项目的性能成本应该低于再次计算所有大小的成本。

快速示例：假设一本书的大小为 150 像素，作者为一个作者。您可以获取列表框的大小并将其除以 125，以粗略估计大致范围内的项目数量，但计算成本并不高。您要避免的是项目太少，因为这会留下空白空间。

* * *

根据您的评论进行编辑。

在这种情况下，您可以将项目添加到列表框中（使用上述方法进行近似猜测），然后计算最后一个完全可见的项目是哪个，然后删除额外的项目。

此扩展方法将获取在列表框中完全显示的最后一个元素，如果没有项目可见，则为 null：

```
public static class ListBoxExtensions
{
    public static FrameworkElement GetLastItem(this ListBox listBox)
    {
        double height = listBox.ActualHeight;

        double currentHeight = 0;
        FrameworkElement previous = null;

        foreach (FrameworkElement item in listBox.Items)
        {
            currentHeight += item.ActualHeight;
            if (currentHeight > height)
            {
                return previous;
            }

            previous = item;
        }

        return previous;
    }
} 
```

如果列表变大，那么您可以向集合中添加足够的项目以填补空白并重新运行该过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-07T21:57:42.880

“我如何计算要显示多少项目而不显示滚动条？”

**简短回答：（listBox1.Height/listBox1.ItemHeight）**

这为您提供了显示/可用行的数量，因此您只能读取此数量的行并将填充所有列表框。

现在，演示：

```
 int listbox_total_visible_lines = 2;
        listBox1.Height = (listbox_total_visible_lines + 1) * listBox1.ItemHeight;
        listBox1.Items.Add("um");
        listBox1.Items.Add("dois");
        listBox1.Items.Add("tres");
        listBox1.Items.Add("quatro");
        listBox1.Items.Add("cinco");
        listBox1.SelectedIndex = listBox1.Items.Count - 1;
        this.Text = (listBox1.Height/ listBox1.ItemHeight).ToString(); 
```

此示例让您选择将要显示的项目数，因此实际可显示的是 os 行数。因此，您只添加“listbox_total_visible_items”项目，列表框将已满且不显示滚动条。

代码说明：

1.  listbox_total_visible_items 包含要显示的行数

2.  设置适当大小的列表框，仅 2 行

3-7。添加一些行

8.  跳到最后一行，只是为了好玩

9.  在表单文本栏上显示列表框行数，基于列表框高度除以每个项目的大小。

就是这样。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2009-05-12T18:35:05.733

可以在这里隐式找到解决方案： [解决方案](https://stackoverflow.com/questions/840161/wpf-observablecollection-and-listboxitem-datatemplate-generation-problem)

# .net - 为 .NET 类生成 XSD 架构

> ID：830282
> 
> 赞同：0
> 
> 时间：2009-05-06T15:49:14.343
> 
> 标签：.net, xml, xsd

我有一组只保存数据的类（这个类中没有定义任何操作）。如何为这些类生成 xsd 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T15:50:22.890

```
xsd Assembly.dll 
```

为所有选项键入类型`xsd /?`，您也可以指定特定类型。

更新：

更好的选择是设计一个适当的模式并用于`xsd /c myschema.xsd`为您生成适当的类:)

# html - 在不破坏 HTML 标签的情况下剪切 HTML 字符串

> ID：830283
> 
> 赞同：10
> 
> 时间：2009-05-06T15:49:28.027
> 
> 标签：html, string

如何编写一个函数，该函数可以将带有 HTML 标签的字符串剪切成 N 长度的字符串，而不会在执行时破坏 HTML 标签。

返回的字符串不需要正好是 N 个字符长。它可以在N长字符串边缘的标签之前或之后切割它。

```
Visit <a href="www.htz.hr">Croatia</a> this summer. 
```

`CutIt(9)`应该返回

```
Visit 
```

或者

```
Visit <a href="www.htz.hr">Croatia</a> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-03-03T06:56:11.983

```
function trimHtml(html, options) {

    options = options || {};

    var limit = options.limit || 100,
        preserveTags = (typeof options.preserveTags !== 'undefined') ? options.preserveTags : true,
        wordBreak = (typeof options.wordBreak !== 'undefined') ? options.wordBreak : false,
        suffix = options.suffix || '...',
        moreLink = options.moreLink || '';

    var arr = html.replace(/</g, "\n<")
        .replace(/>/g, ">\n")
        .replace(/\n\n/g, "\n")
        .replace(/^\n/g, "")
        .replace(/\n$/g, "")
        .split("\n");

    var sum = 0,
        row, cut, add,
        tagMatch,
        tagName,
        tagStack = [],
        more = false;

    for (var i = 0; i < arr.length; i++) {

        row = arr[i];
        // count multiple spaces as one character
        rowCut = row.replace(/[ ]+/g, ' ');

        if (!row.length) {
            continue;
        }

        if (row[0] !== "<") {

            if (sum >= limit) {
                row = "";
            } else if ((sum + rowCut.length) >= limit) {

                cut = limit - sum;

                if (row[cut - 1] === ' ') {
                    while(cut){
                        cut -= 1;
                        if(row[cut - 1] !== ' '){
                            break;
                        }
                    }
                } else {

                    add = row.substring(cut).split('').indexOf(' ');

                    // break on halh of word
                    if(!wordBreak) {
                        if (add !== -1) {
                            cut += add;
                        } else {
                            cut = row.length;
                        }
                    }
                }

                row = row.substring(0, cut) + suffix;

                if (moreLink) {
                    row += '<a href="' + moreLink + '" style="display:inline">»</a>';
                }

                sum = limit;
                more = true;
            } else {
                sum += rowCut.length;
            }
        } else if (!preserveTags) {
            row = '';
        } else if (sum >= limit) {

            tagMatch = row.match(/[a-zA-Z]+/);
            tagName = tagMatch ? tagMatch[0] : '';

            if (tagName) {
                if (row.substring(0, 2) !== '</') {

                    tagStack.push(tagName);
                    row = '';
                } else {

                    while (tagStack[tagStack.length - 1] !== tagName && tagStack.length) {
                        tagStack.pop();
                    }

                    if (tagStack.length) {
                        row = '';
                    }

                    tagStack.pop();
                }
            } else {
                row = '';
            }
        }

        arr[i] = row;
    }

    return {
        html: arr.join("\n").replace(/\n/g, ""),
        more: more
    };
}

if (typeof module !== 'undefined' && module.exports) {
    module.exports = trimHtml;
} 
```

**用法**

```
var html = '<div><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. </p><p>Ut
enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip
ex ea commodo consequat. </p><p>Duis aute irure dolor in reprehenderit in
voluptate velit esse cillum dolore eu fugiat nulla pariatur. </p><p>Excepteur
sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit
anim id est laborum.</p></div>';
var trim = trimHtml(html, { limit: 200 });

// **returns object**

{
   html: '<div><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,
   sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. </p><p>Ut
   enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut...
   </p></div>',
   more: true // indicates if limit is reached
} 
```

[工作示例](https://jsfiddle.net/rekfwL1j/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T20:23:41.440

我解决了这个问题，所以这里是 c# 中的代码；

```
static string CutIt(string s, int limit)
{
    if (s.Length < limit) return s;

    int okIndex = 0;
    bool inClosingTag = false;
    int numOpenTags = 0;

    for (int i = 0; i < limit; i++)
    {
        if (s[i]=='<')
        {
            if (s[i+1]=='/')
            {
                inClosingTag = true;    
            }
            else
            {
                numOpenTags++;   
            }
        }
        if (s[i]=='>')
        {
            if (s[i-1]=='/')
            {
                numOpenTags--;
            }
            if (inClosingTag)
            {
                numOpenTags--;
            }
        }

        if (numOpenTags == 0) okIndex = i;

    }
    return s.Substring(0, okIndex + 1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T16:02:56.793

这可能有点矫枉过正，但尝试查找[AWK](http://en.wikipedia.org/wiki/AWK)，它可以很容易地完成这类事情，因为它以处理文本为中心。

您还可以编写自定义解析脚本，例如

```
string s = "Visit <a href="www.htz.hr">Croatia</a> this summer."

result = ""

slice_limit = 9

i= 0

j = 0

in_tag = false

while i < slice_limit and j < s.size do

  if s[j] == "<" then in_tag = true

  if in_tag and s[i]==">" then in_tag = false

  if !in_tag then i++

  result += s[j]

end 
```

...或类似的东西（尚未测试，但它给了你这个想法）。

**编辑**：您还必须添加一些东西来检测标签是否关闭（只需添加一个像 in_tag 这样的标志并将它与一些正则表达式混合，它应该可以工作）希望有帮助

**EDIT2**：如果您提供了要使用的语言，那可能会有所帮助。javascript？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-06T16:35:27.807

```
static string CutIt(string s, int limit)
{
  s = s.Substring(0, limit);
  int openMark = s.LastIndexOf('<');
  if (openMark != -1)
  {
    int closeMark = s.LastIndexOf('>');
    if (openMark > closeMark)
    {
      s = s.Substring(0, openMark);
    }
  }
  return s.Trim();
}

public static void Main()
{
  Console.WriteLine(
    CutIt("Visit <a href=\"www.htz.hr\">Croatia</a> this summer.", 9)
  ); // prints "Visit"
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T15:52:10.453

当我遇到这样的问题（对于 RSS 提要）时，我只是在剪切字符串之前调用了 strip_tags。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T16:03:19.850

在 javascript 中，您可以使用 DOM 元素的 textContent 属性来获取它。

HTML

```
<p id='mytext'>Hey <a href="#">Visit Croatia</a> today</p> 
```

Javascript

```
var el = document.getElementById("mytext");
console.log( el.textContent );
//alert( el.textContent ); // if you don't have firebug. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-19T19:46:34.287

这是 JavaScript 解决方案：[trimHtml](https://github.com/brankosekulic/trimHtml)

# .net - .NET 实体框架

> ID：830291
> 
> 赞同：1
> 
> 时间：2009-05-06T15:50:25.310
> 
> 标签：.net, database, entity-framework, .net-3.5

将 Entity Framework 生成的对象用作业务对象是不好的做法吗？围绕实体框架对象编写一个辅助包装器，然后在层之间传递它会更好吗？

例如，编写我自己的 POCO Person 接受我生成的实体框架对象 EFPerson 来初始化 POCO Person 对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T16:04:47.100

虽然有些人倾向于将实体框架类包装到他们的业务对象中，但我通常建议不要这样做。

我知道这改进了业务逻辑和数据访问的分离，但我认为这通常不值得复制所有实体类型的开销。

OR 映射器的目的是什么？它是持久化业务对象，而不需要复杂的数据访问层手动将对象映射到数据库。如果您包装实体框架类，您将只使用获得的便利的一半。

最后，数据访问和业务逻辑之间的耦合在部分类中并不是那么紧密。不久前，我在几个小时内将一个涉及大约 30 个实体的项目从 Entity Framework 更改为 LINQ to SQL，没有出现重大问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T16:02:12.863

我不明白为什么这是*不好的*做法。根据您打算如何使用 EF 对象，这可能会很尴尬。

我有部分类来在 EF 对象中实现 BIZ 逻辑，使用接口来提供一定程度的抽象。

例如。

```
public partial class Client : IClient
{
   void DoSomething();
}

// then an EF generated object ...
public partial class Client
{
 // ...
} 
```

我遇到的唯一问题是序列化对象。就我而言，使用 WCF 序列化为 JSON。如果不将中间 DTO 创建为离散类/对象或匿名类型，这是不可能的。

如果您对序列化感兴趣，请在此处查看我的另一个问题：将[实体框架对象序列化为 JSON](https://stackoverflow.com/questions/657939/serialize-entity-framework-objects-into-json)

# eclipse - “行[0]”是什么意思？

> ID：830292
> 
> 赞同：0
> 
> 时间：2009-05-06T15:50:27.633
> 
> 标签：eclipse, birt

你好！我正在寻找一个文档来定义“rows[0]”这个词的含义。这是 Eclipse 框架中的 BIRT。也许这是一个 Javascript 词？我不知道...一直在疯狂地寻找，但什么也没找到。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T15:56:49.863

通常像 rows[x] 这样的代码正在访问数组中的元素。任何编程书籍介绍都应该能够为您定义。

rows[0] 将访问数组中的*第一个元素。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T15:58:33.917

*rows 是 dataSet.rows 的快捷方式。返回与此报表项实例关联的数据集的当前数据行（DataRow[] 类型）。如果此报表元素没有数据集，则此属性未定义。*

资料来源： http: [//www.eclipse.org/birt/phoenix/ref/ROM_Scripting_SPEC.pdf](http://www.eclipse.org/birt/phoenix/ref/ROM_Scripting_SPEC.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T16:23:54.853

该操作有多个名称，具体取决于语言，但通常是相同的概念。在 Java 中，它是C# 中的[数组访问表达式，它是](http://java.sun.com/docs/books/jls/second_edition/html/expressions.doc.html#239587)[索引器](http://msdn.microsoft.com/en-us/library/aa691360(VS.71).aspx)或[数组访问运算符](http://msdn.microsoft.com/en-us/library/aa288465(VS.71).aspx)。与几乎任何东西一样，C++ 更复杂，但基本上 [] 运算符获取某物或数组的集合，并拉出（或分配给）该集合或数组中的特定编号元素（通常从 0 开始）。所以在 C#...

```
// create a list of integers
List<int> lst = new List<int>() { 1, 2, 3, 4, 5 }; 

// access list
int x = lst[0]; // get the first element of the list, x = 1 afterwords
x = lst[2];     // get the third element of the list, x = 3 afterwords
x = lst[4];     // get the fifth element of the list, x = 5 afterwords
x = lst[5];     // IndexOutOfBounds Exception 
```

# sql-server - 如何绕过openquery默认列不为空

> ID：830293
> 
> 赞同：0
> 
> 时间：2009-05-06T15:50:44.263
> 
> 标签：sql-server, openquery

我有一个这样的 sql server pass-thru 查询：

*select * into myTable from openquery (yourComputer, 'select x,y,z, from yourTable')*

问题是 myTable 中的列默认不为空，我稍后会想在此表中添加一些列为空的行。

我可以绕过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T16:32:46.830

在插入数据之前创建 myTable，然后执行插入。

```
create table myTable (
    x int null,
    y int null,
    z int null
)
go
insert into myTable (x, y, z)
select x, y, z
from openquery (yourComputer, 'select x,y,z, from yourTable') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T16:03:10.833

您可以将结果插入临时表，然后更新表以将所有空值设置为''，然后将临时表中的值插入到实际表中

# php - PHP：将文件传递给用户定义的函数

> ID：830298
> 
> 赞同：0
> 
> 时间：2009-05-06T15:51:35.447
> 
> 标签：php, email

我有一个 PHP 页面（registration.php），我将从该页面将文件提交到另一个表单（preocess.php）。这样在下一页中，该页面会将该文件作为电子邮件 ID 的附件发送。我可以在另一个文件中调用一个函数并将这个文件传递给那个函数吗？有些人认为就像将流传递给函数。（我不确定。）有人可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T16:02:11.677

当然，只需包含最初调用该函数的文件。

```
<?php include ('file_with_function.php'); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T16:07:49.713

不应该传递文件，最好在后台处理它。

*   存储文件
*   将一些 id（在最坏的情况下是路径）放入会话中
*   将用户转发到下一步（process.php）

如有必要，最好审查和重构代码，以便一步完成处理。这样可以避免半处理的事情，中间进入处理管道以及类似的常见多页表单处理问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T04:57:24.983

如果您尝试通过电子邮件将文件发送给某人，PHPMailer ( [http://phpmailer.codeworxtech.com/index.php?pg=methods](http://phpmailer.codeworxtech.com/index.php?pg=methods) ) 有一个非常有效的函数 addAttachment。

如果您只是尝试以某种方式处理文件，file_get_contents 将获取文件内容作为字符串，如果它是文本，这将很有用。但是，您确实需要小心它是一个小文件，否则您很快就会耗尽内存。

# asp.net - 如何在占位符中动态生成的标签之间创建换行符？

> ID：830304
> 
> 赞同：16
> 
> 时间：2009-05-06T15:52:13.527
> 
> 标签：asp.net, dynamic, button, line-breaks, placeholder

`Page_Load`这是文件事件背后的代码中的以下代码：

```
 LinkButton linkButton = new LinkButton();
        linkButton.ID = "LinkButtonDynamicInPlaceHolder1Id" + i;
        linkButton.ForeColor = Color.Blue;
        linkButton.Font.Bold = true;
        linkButton.Font.Size = 14;
        linkButton.Font.Underline = false;
        linkButton.Text = itemList[i].ItemTitle.InnerText;
        linkButton.Click += new EventHandler(LinkButton_Click);
        linkButton.Attributes.Add("LinkUrl",itemList[i].ItemLink.InnerText);
        PlaceHolder1.Controls.Add(linkButton); 
        Label label = new Label();
        label.ID = "LabelDynamicInPlaceHolder1Id" + i;
        label.ForeColor = Color.DarkGray;
        label.Text = itemList[i].ItemDescription.InnerText;
        PlaceHolder1.Controls.Add(label); 
```

我想在生成的每个控件之间换行。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-05-06T15:59:40.327

但是，您的换行问题的解决方案如下，如果您在 Page_Load 事件中执行此操作，那么您的事件处理程序将无法工作并且您将遇到页面生命周期问题。基本上，为了让您的事件处理程序在 PostBack 上触发，您确实需要在页面生命周期的早期创建这些动态控件。如果确实遇到此问题，请尝试将代码移至 OnInit 方法。

```
 LinkButton linkButton = new LinkButton();
    linkButton.ID = "LinkButtonDynamicInPlaceHolder1Id" + i;
    linkButton.ForeColor = Color.Blue;
    linkButton.Font.Bold = true;
    linkButton.Font.Size = 14;
    linkButton.Font.Underline = false;
    linkButton.Text = itemList[i].ItemTitle.InnerText;
    linkButton.Click += new EventHandler(LinkButton_Click);
    linkButton.Attributes.Add("LinkUrl",itemList[i].ItemLink.InnerText);
    PlaceHolder1.Controls.Add(linkButton); 

    //Add This
    PlaceHolder1.Controls.Add(new LiteralControl("<br />"));

    Label label = new Label();
    label.ID = "LabelDynamicInPlaceHolder1Id" + i;
    label.ForeColor = Color.DarkGray;
    label.Text = itemList[i].ItemDescription.InnerText;
    PlaceHolder1.Controls.Add(label); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T18:43:34.233

另一种解决方案是您可以将每个控件添加到面板中，这将呈现它们每个，`<div>`从而产生您正在寻找的效果。

对我来说，这将更加动态，因为如果您隐藏任何控件，div 将折叠并且不会留下空行。

```
 LinkButton linkButton = new LinkButton();
    linkButton.ID = "LinkButtonDynamicInPlaceHolder1Id" + i;
    linkButton.ForeColor = Color.Blue;
    linkButton.Font.Bold = true;
    linkButton.Font.Size = 14;
    linkButton.Font.Underline = false;
    linkButton.Text = itemList[i].ItemTitle.InnerText;
    linkButton.Click += new EventHandler(LinkButton_Click);
    linkButton.Attributes.Add("LinkUrl",itemList[i].ItemLink.InnerText);

    //Add control to a panel, add panel to placeholder
    Panel lbPan = new Panel();
    lbPan.Controls.Add(linkButton); 
    PlaceHolder1.Controls.Add(lbPan);

    Label label = new Label();
    label.ID = "LabelDynamicInPlaceHolder1Id" + i;
    label.ForeColor = Color.DarkGray;
    label.Text = itemList[i].ItemDescription.InnerText;

    //Add control to a panel, add panel to placeholder
    Panel lblPan = new Panel();
    lblPan.Controls.Add(label); 
    PlaceHolder1.Controls.Add(lblPan); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-01-11T08:56:58.723

[如何：以编程方式将控件添加到 ASP.NET 网页](http://msdn.microsoft.com/en-us/library/kyt0fzt1.aspx)

> 在某些情况下，您可能希望同时创建静态文本和控件。 **要创建静态文本，您可以使用 Literal 或 Label Web 服务器控件**。然后，您可以像添加任何其他控件一样将这些控件添加到容器中。有关在运行时创建的控件中的视图状态的信息，请参阅动态 Web 服务器控件和视图状态。

# android - Android 中的 Flash 支持

> ID：830309
> 
> 赞同：2
> 
> 时间：2009-05-06T15:53:29.000
> 
> 标签：android, flash

我打算将 Flash 播放器移植到 Android 操作系统。目前 Android 不支持 Flash。我研究了开源 Flash 播放器 GNash，但问题是它不支持最新版本的 Flash 文件，我们无法使用 GNash 打开 youtube。

是否有任何可以移植到 Android 的开源轻量级 Flash 播放器。

编辑：我也试过 SwfDec 但即使是这个也没有播放来自 youtube 的视频。

还有其他可以播放 youtube 视频的开源播放器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T16:39:54.877

当然，这可能是一个有趣的破解项目；但是，您很快就会面临来自 Adob​​e 的真正竞争，正如我们所说，他们正在移植自己的播放器：

[http://www.google.se/search?q=flash+android](http://www.google.se/search?q=flash+android)

以防万一你能等得起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T15:46:58.813

我使用 ffmpeg 将 flv 转换为 mp4。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T20:17:50.197

根据 Google/OHA 成员工程师的说法，您将遇到的问题是当前设备硬件的性能，特别是 G1s。

我的印象是，在 Dalvik VM JIT 开发完成之前，您不会看到 flash……可能直到 SDK 3.5 才可能……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T20:34:55.420

GNash 网站声明（我自己的经验证实）GNash 实际上可以播放大多数 youtube 视频。请参阅[GNash 维基。](http://wiki.gnashdev.org/YouTube)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-02-21T01:14:38.943

现在 Android 有 Flash 支持，也许这会有所帮助： [http](http://www.synesthesia.it/playing-flash-flv-videos-in-android-applications) ://www.synesthesia.it/playing-flash-flv-videos-in-android-applications 在 Android 上使用 web 视图中的 flash 播放器播放 FLV

# http - 在 ActionScript2 中读取 HTTP 标头

> ID：830310
> 
> 赞同：0
> 
> 时间：2009-05-06T15:53:58.560
> 
> 标签：http, http-headers, actionscript-2

在 AS2 中，我需要获取一个 URL。在 HTTP 响应的标头中，设置了一个 cookie。是否可以读取 HTTP 响应的标头并获取 cookie 的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T22:38:04.750

这有点棘手。您可能需要做的是使用服务器端脚本来获取 HTTP 请求标头，然后从 flash 中调用该脚本。

# c# - 删除某些内容后更新数据库出现问题！

> ID：830311
> 
> 赞同：0
> 
> 时间：2009-05-06T15:54:04.207
> 
> 标签：c#, data-binding

我正在研究基本的 sql，使用 C# 和绑定选项和适配器。我已成功将数据添加到我的数据库中，然后可以毫无问题地更新。但是当我尝试删除一些数据然后 UPDATE 它抛出一个异常：

> System.Data.dll 中发生“System.InvalidOperationException”类型的未处理异常附加信息：当传递带有已删除行的 DataRow 集合时，更新需要有效的 DeleteCommand。

编码：

```
private void button4_Click(object sender, EventArgs e)
{
    table1TableAdapter.Update(dataSet1);
}

private void button5_Click(object sender, EventArgs e)
{
    table1BindingSource.RemoveCurrent();
} 
```

为什么从数据库中删除某些内容后我不能更新我的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T15:58:27.397

您删除的代码不会从数据库中删除任何内容。它正在删除与数据源的*绑定。*因此，当您调用`Update()`该数据源时，它不再绑定到任何东西。

# c# - 当我尝试保存实体时出现错误：对象引用未设置为对象的实例

> ID：830318
> 
> 赞同：1
> 
> 时间：2009-05-06T15:55:38.387
> 
> 标签：c#, asp.net-mvc

当我尝试保存实体时出现错误：

> 你调用的对象是空的

我能够创建一个新实体，代码几乎相同。

当我尝试保存实体时，我能够跟踪一些代码我的控制器代码如下所示：

```
 _entities.Kandidaats.Attach(kandidaatBewerken,true);
  _entities.SubmitChanges();
  return RedirectToAction("Index"); 
```

当我跟踪代码时，我看到我的 kandidaatBewerken 在第一行保存了正确的数据，之后跟踪返回到我的视图代码并在第二行给出错误：

```
 <% using (Html.BeginForm()) {%>
<%= Html.TextBox("KandidaatId", Model.KandidaatId)%> 
```

当我跟踪它时，它说我的模型是空的，而只是在这个之前的处理，它是填充的。

为什么我会收到此错误，我该如何继续？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T12:56:45.903

我会在这里猜测..因为没有很多代码可以继续..

但是“索引”视图正在创建一个表单来编辑您的 Kandidaat 对象......

但是，您将用户重定向到没有填充模型的表单（这就是第二行引发错误的原因。模型为 null 并且您正在调用 null 对象的属性）。

尝试：

```
return RedirectToAction("Index", kandidaatBewerken); 
```

但这会将您带回表单（这可能是您想要的结果）。我会将用户带回生成列表的任何操作，或另一条路线...

```
return RedirectToAction("List"); 
```

或者

```
return RedirectToRoute("Home"); 
```

# .net - Winforms MenuStrip 带下划线的热键字母

> ID：830326
> 
> 赞同：7
> 
> 时间：2009-05-06T15:58:18.393
> 
> 标签：.net, winforms, hotkeys, underline, menustrip

通常，MenuStrip 上的热键字母带有下划线。（&File、&Open 等）在我正在处理的项目中，下划线会显示在设计器中，但不会在运行时显示。我找不到控制它的属性。外面有人知道吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-08-08T14:16:27.763

您可以通过创建自定义 ToolStrip 渲染器来强制用户查看下划线。我花了很长时间才弄清楚如何绕过克里斯的回答。这是我创建的渲染器：

```
using System;
using System.Drawing;
using System.Windows.Forms;

namespace YourNameSpace
{
    class CustomMenuStripRenderer : ToolStripProfessionalRenderer
    {
        public CustomMenuStripRenderer() : base() { }
        public CustomMenuStripRenderer(ProfessionalColorTable table) : base(table) { }

        protected override void OnRenderItemText(ToolStripItemTextRenderEventArgs e)
        {
            e.TextFormat &= ~TextFormatFlags.HidePrefix;
            base.OnRenderItemText(e);
        }
    }
} 
```

然后在带有 MenuStrip 的表单中，在构造函数中设置渲染器：

```
public YourFormConstructor()
{
    InitializeComponents();
    menuStripName.Renderer = new CustomMenuStripRenderer();
} 
```

我想指出，如果您更喜欢系统风格的渲染外观，您可以扩展 ToolStripSystemRenderer 类而不是 Professional，但我喜欢能够自定义颜色表。这是不需要客户端更改其计算机设置的修复程序。享受！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-06T16:05:32.013

在 Windows 中，有一个是否显示下划线的设置。要更改设置，

1.  右键单击桌面
2.  选择“属性”
3.  单击“外观”选项卡
4.  点击“效果”按钮
5.  取消选中标有“隐藏带下划线的字母以进行键盘导航”的框

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-06T16:02:15.063

它们只会在用户按下 alt 键时出现在运行时。当您按下 alt 键时，表单会认为您可能想要使用其中一个快捷方式，因此它会显示任何下划线。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-08T22:55:31.977

对于与此相关的后续问题，即使其适用于所有应用程序热键：

```
[DllImport ("user32.dll")] 
static extern void SystemParametersInfo(uint uiAction, uint uiParam, ref
int pvParam, uint fWinIni); 

const uint SPI_SETKEYBOARDCUES = 0x100B; 

private static void GetAltKeyFixed() 
{ 
 //Set pvParam to TRUE to always underline menu access keys, 
 int pv = 1; 
 /* Call to systemparametersinfo to set true of pv variable.*/ 
 SystemParametersInfo(SPI_SETKEYBOARDCUES, 0, ref pv, 0); 
} 
```

在 Application.Run 或等效之前调用 GetAltKeyFixed。

我需要这个来满足 508 的要求，几乎所有关于这个主题的答案都是更改桌面设置或简洁的“你为什么要这样做？” 回复。这不是我听到的最疯狂的要求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-29T22:28:04.390

在 Windows 10 中，该设置位于

`Settings`- `Ease of Access`- `Keyboard`-`Underline access keys when available`

在`Change how keyboard shortcuts work section`.

# asp.net - 如何使用 JavaScript 更改鼠标光标焦点上动态生成的链接按钮的颜色？

> ID：830331
> 
> 赞同：0
> 
> 时间：2009-05-06T15:59:23.320
> 
> 标签：asp.net, dynamic, button, events, client

代码：

```
LinkButton linkButton = new LinkButton();
linkButton.OnClientClick="changecolor";--i need to change this to on mouse focus event 
```

链接按钮没有像我们一样的属性`onClientClick`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T16:01:04.597

```
linkButton.Attributes.Add("onmouseover", "yourChangeColorFunction();"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T16:29:43.780

您可以为悬停时具有不同颜色的链接按钮定义 CSS 类。

```
a
{
  color:black;
}
a.hover
{
  color:blue;
} 
```

# linq-to-sql - 如何使用 LINQ to SQL 更新给定 ID 的 SQL 行？

> ID：830335
> 
> 赞同：1
> 
> 时间：2009-05-06T16:01:22.303
> 
> 标签：linq-to-sql, .net-3.5, crud, disconnected

鉴于此架构：

```
Fruits
 - FruitID       INT PK
 - FruitName     NVARCHAR(30)
 - FruitStatusID INT NULL FK: Statuses

Statuses
 - StatusID      INT PK
 - StatusName    NVARCHAR(30) 
```

如果我有一个`FruitID`int（只是一个 int，而不是一个 Fruit 对象），我如何在不先从数据库加载 Fruit 对象的情况下更新`FruitName`和 null 出来？`FruitStatusID`

注意：[这个解决方案](http://tonesdotnetblog.wordpress.com/2008/08/15/linq-to-entities-disconnected-crud/)让我走得很远，但我不知道如何清空 FK 列。

用 C# 或 VB 回答，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T17:38:48.903

这可行，但似乎不必要地复杂：

```
''//initialize the values I'm going to null out to something
Dim Tag As Data_Tag = New Data_Tag() With {
  .Data_Tag_ID = DataTagID, 
  .Last_Error_DateTime = New DateTime(), 
  .Last_Error_Message = "", 
  .Last_Error_Severity_Type_ID = -1 }

''//start change tracking
DB.Data_Tags.Attach(Tag)

''//record changes to these properties (must be initialized above)
Tag.Last_Error_DateTime = Nothing
Tag.Last_Error_Message = Nothing
Tag.Last_Error_Severity_Type_ID = Nothing

DB.SubmitChanges() 
```

肯定有更好的办法！

（注意：奇怪的注释语法仅适用于代码高亮——它不喜欢 VB 风格的注释）

# php - Jquery，拖放并保存到mysql数据库？

> ID：830336
> 
> 赞同：4
> 
> 时间：2009-05-06T16:01:59.883
> 
> 标签：php, jquery, mysql, drag-and-drop

我一直在网上搜索，我只能找到 inettuts-with-cookies，它教如何使用 Jquery 执行拖放然后保存在 cookie 中。谁能告诉我如何保存到数据库（php和mysql）？我非常需要它..

编辑：

首先，我不是 php 初学者，而是 AJAX 初学者。这些教程仅适用于 1 列。有没有人可以拖放并保存到数据库中 2 或 3 列？请>>>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T20:43:40.923

这一篇刚刚出来： [使用 jQuery UI Sortable、PHP 和 MySQL 动态排序项目 (AJAX)](http://www.hdeya.com/blog/2009/05/sorting-items-on-the-fly-ajax-using-jquery-ui-sortable-php-mysql/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T16:16:12.500

这是相当广泛的。我的第一反应是：去读一本 PHP 初学者的书。话虽如此，您需要学习以下内容：

*   [PHP/MySQL 基础教程](http://www.freewebmasterhelp.com/tutorials/phpmysql)
*   [jQuery AJAX 基础知识](http://docs.jquery.com/Ajax/jQuery.ajax)，让您学习如何通过 AJAX 与 Web 服务器交互
*   [jQuery 可拖动文档](http://jqueryui.com/demos/draggable/)
*   [jQuery 可拖放文档](http://jqueryui.com/demos/droppable/)

然后尝试阅读这些综合教程：

*   [拖放重新排序](http://www.wiseguysonly.com/2008/12/07/drag-and-drop-reordering-of-database-fields-sortables-with-jquery/)
*   [动态拖放](http://www.webresourcesdepot.com/dynamic-dragn-drop-with-jquery-and-php/)

**更新：** 听起来您应该使用 JSON 发送数据，它遵循类似于 XML 的结构。最好的选择是从[JSON.org](http://json.org/)开始。jQuery 网站上也有关于 GET 和 POST 的 JSON 函数的教程。

至于更新多个列，您可以做多个 AJAX 帖子，或者使用 PHP 拆分传递的数据并多次访问 DB。根据您发布的信息，这是我最好的猜测。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T16:25:52.853

这里有一些链接可以帮助您拖放： http: [//geekswithblogs.net/AzamSharp/archive/2008/02/21/119882.aspx](http://geekswithblogs.net/AzamSharp/archive/2008/02/21/119882.aspx) [http://www.codeproject.com/KB/webforms/JQueryPersistantDragDrop。 aspx](http://www.codeproject.com/KB/webforms/JQueryPersistantDragDrop.aspx) 这真的很简单，但是您必须根据您的特定应用程序编写代码。

在 onDrop 方法中，您需要编写一个 Ajax 请求来 POST 您要保存的数据。JQuery AJAX API 在这里： [http ://docs.jquery.com/Ajax/jQuery.post#urldatacallbacktype](http://docs.jquery.com/Ajax/jQuery.post#urldatacallbacktype)

POST URL 应该引用将保存数据的 PHP 脚本。在 PHP 端，您连接到数据库：

```
<?php 
        $dbc = mysql_connect('localhost:/private/tmp/mysql.sock', 'root', 'password') or die (mysql_error());   
        mysql_select_db('database_name');
?> 
```

然后你写一个 INSERT 语句。这是音乐节目的插入语句：

```
$sql_insert = "INSERT INTO shows (date,venue,venueLink,location,comment,time,dateOrder,locComment,confirm_by) VALUES ('".$Date."', '".$Venue."', '".$VenueLink."', '".$Location."', '".$Comment."', '".$Time."', '".$dateSort."', '".$locComment."', '".$confirmAll."')"; 
```

例如，$Venue 将是您的 AJAX 发布请求中的一个变量。您可以从 PHP 超全局变量中获取这些变量：

```
$Venue = $_POST['venue'] 
```

仅供参考：您可以使该查询看起来更好，因为双引号实际上会打印变量...我只是复制并粘贴了一些我不久前找到的菜鸟代码。你可以担心以后让它变得漂亮。

# wpf - 如何获取 DataGridColumnHeadersPresenter 控件模板的标题内容？

> ID：830337
> 
> 赞同：2
> 
> 时间：2009-05-06T16:02:02.957
> 
> 标签：wpf, wpfdatagrid, controltemplate

```
<dg:DataGridColumnHeadersPresenter>
    <dg:DataGridColumnHeadersPresenter.Template>
        <ControlTemplate>
            <Border>
                <ContentPresenter ContentSource= ??? />
            </Border>
        </ControlTemplate>
    </dg:DataGridColumnHeadersPresenter.Template>
</dg:DataGridColumnHeadersPresenter> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-03-28T21:41:06.130

您是否尝试创建/获取/覆盖内容，如果是，请使用 HeaderTemplate：

```
<DataGridTemplateColumn>  
    <DataGridTemplateColumn.HeaderTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBlock Text="part one"/>
                <TextBlock Text="part one"/>
            </StackPanel>
         </DataTemplate>
    </DataGridTemplateColumn.HeaderTemplate>
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
        <TextBlock Text="{Binding someValueInYourList}"/>
        </DataTemplate>
     </DataGridTemplateColumn.CellTemplate>
 </DataGridTemplateColumn> 
```

# c# - 拦截对 SSL 证书的 Http 调用

> ID：830341
> 
> 赞同：0
> 
> 时间：2009-05-06T16:02:27.043
> 
> 标签：c#, asp.net, http, http-headers, ssl-certificate

有没有办法拦截 WebBrowser 对 SSL 的调用（在 asp.net 应用程序中）？在发出请求之前，我需要在运行时将参数传递给 http-headers。

**示例**：如果我输入“ [http://test.com](http://test.com) ”，浏览器将与服务器通信并返回“ [https://test1.com](https://test1.com) ”作为安全 URL。我应该能够拦截呼叫并将标头信息（确定原始主机的键、值）传递给[http://test.com](http://test.com)。还是有更好的解决方案来实现这一目标？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-13T21:56:13.457

我执行以下操作来强制用户使用 HTTPS：

```
protected override void OnPreInit(EventArgs e)
{
    if (string.Compare(Request.ServerVariables["HTTPS"], "OFF", true) == 0)
    {
        StringBuilder builder = new StringBuilder("https://");
        builder.Append(Request.ServerVariables["SERVER_NAME"]);
        builder.Append(Request.ServerVariables["URL"]);
        Response.Redirect(builder.ToString());
        return;
    }

    base.OnPreInit(e);
} 
```

你应该能够修改它来做你需要的。

# firefox - sIFR 鼠标滚轮在 Firefox 中滚动冻结

> ID：830347
> 
> 赞同：1
> 
> 时间：2009-05-06T16:03:20.083
> 
> 标签：firefox, sifr, mouseover, freeze

我已经开始在工作中的网站上使用 sIFR，除了一件事，一切都很好。

当我用鼠标滚轮向下滚动网页时，当指针位于 Flash 对象上时它会停止滚动。当鼠标悬停在 Flash 对象上时，它似乎正在窃取焦点。

我只在 Firefox 中遇到过这个问题，Safari 和 IE7 没有这个鼠标滚轮滚动问题。

必须有解决此问题的方法...我在 Vimeo 上看到，即使鼠标悬停在 Flash 视频上，鼠标滚轮也可以滚动。这里的例子：http: [//vimeo.com/3280159](http://vimeo.com/3280159)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T17:40:50.333

我找到了一个解决方案，这不是最好的，但它有效......

我在配置文件的 sIFR 替换功能中添加了一个条件。我使用 jQuery 来验证正在使用哪个浏览器，**如果是 IE：wmode=window，否则如果是任何浏览器，wmode=transparent**

```
var myfont = { src: '/sifrfont.swf' };
sIFR.activate(myfont );
sIFR.replace(myfont , {
  selector: 'h1',
  wmode: ($.browser.msie)?'window':'transparent',
  css: '.sIFR-root { color: #3e2616; font-size: 50; leading:0;letter-spacing: -2; display: inline;}'
}); 
```

我已经在 Windows XP 中使用以下浏览器对此进行了测试：Firefox 3、Safari、IE6、IE7 和 Google Chrome。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-05-11T15:54:39.703

最近在大多数浏览器上使用版本 3 时遇到了同样的问题，我们找到的最简单的解决方案是注释掉 sIFR.as 中的第 201 行： Mouse.addListener({onMouseWheel: function() { sIFR.instance.blur() } }); 然后重新发布您的 .swf 文件。

# java - 自动检测挂线

> ID：830356
> 
> 赞同：2
> 
> 时间：2009-05-06T16:04:38.567
> 
> 标签：java, multithreading

我目前正在寻找一种方法来识别 java 中的挂起线程。任何人都知道这样做的最佳方法是什么？

目前我可以想出两种可能的方法来做到这一点：

1.  在应用程序的所有方法中定期调用（回调）方法。这似乎“有点”复杂且难看......而且在调用外部方法时我无法控制......
2.  一个额外的线程，它定期为所有线程生成线程转储（或者可能只是为一些应该被监控的线程 - 因为我知道我想要监控哪个线程）并分析结果（“线程是否仍然在同一点上锁定相同的对象”，...）。这可能有点危险，因为线程可能再次（！）在同一点......顺便说一下 - 有没有一种简单的方法可以在 Java 1.4 中获取线程转储（我不想调用外部应用程序）。我想 1.5 或 1.6 有一些方法可以轻松做到这一点......

我想这两种方法都不是一个好的解决方案......那么你知道一种方法吗？

正如我之前所说：我不想使用任何外部应用程序......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T16:59:09.997

我发现当我们有线程被卡住时，我们通常会在我们的应用程序服务器中遇到性能问题。

我们有一种低技术的方法来尝试确定线程卡在哪里。

我们向 JVM 发送几个 kill -3 信号以生成多个线程转储，然后分析输出以寻找类似的痕迹，表明有问题的代码。

低技术和手动，但它的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T16:08:40.833

[您可以使用jconsole](http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html)或[jvisualvm](http://java.sun.com/javase/6/docs/technotes/tools/share/jvisualvm.html)附加到正在运行的进程。这两个工具都允许您查看线程的堆栈跟踪和线程状态。

JVisualVM 截图：

![JVisualVM 监控线程](https://visualvm.dev.java.net/images/docs/thread-timeline-screen.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T17:23:49.373

这里的问题是“挂线”是什么意思以及在什么情况下。

是在大型 J2EE 服务器（可能会自行发现）还是在您生成大量线程的小型 Java 程序中？如果是后者，请考虑研究 Java 5+ 中的并发实用程序，它允许您控制 Runnables 和 Callables。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T16:46:08.437

这只是一个想法：

将有关线程开始时间和线程引用的集中（同步）类信息保存在一个集中的（同步的）类中。例如一个 ConcurrentHashMap（从现在开始 CHM）。

过去一些（保守的）时间，您可以向 CHM 询问该线程（或您怀疑它可能被绞死的水线程）的开始时间。如果线程还活着，你可以（保守地）确定它被绞死了。

如前所述，您可以更进一步并保留线程的堆栈跟踪。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T16:32:21.697

如果您正在寻找一种“自动”的方式。除了在设计过程中花费更多时间外，没有好的解决方案。如果您有“挂起”的线程，那么它们没有正确关闭。我会花时间研究如何在上下文中关闭它们，而不是尝试编写一个查找过时线程的例程/线程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-08T05:00:43.670

如果您有竞争条件，那么带来额外的资源（即安装 JDK 并使用 jps 和 jstack）来解决问题肯定是合理的......

也就是说，如果您在容器外运行应用程序，则只需从控制台运行该应用程序并按 ctrl+break (Windows) 即可获取线程转储。或者 *nix 上的 kill -3。

但根据您在评论中的回答，听起来这可能是在某种应用服务器中运行。

这里的问题是，你所做的几乎任何事情都会给情况带来更多的不确定性。你怎么知道你的死锁监视器本身不对死锁负责？

另一种选择是引入系统输入的日志记录，然后根据这些输入重新播放系统中发生的事情。如果您的客户基本上说他们不会帮助您解决竞争条件，那么您需要自己在自己的测试环境中找到它。模拟客户站点的负载条件是一种尝试方法。

但实际上，我建议您与他们合作安装 JDK（这样您就可以使用 jstack），或某种 JRE 1.4 监控应用程序（见鬼，确保他们的应用服务器还没有提供这种东西）。

# winapi - 捕获隐藏或最小化的窗口

> ID：830359
> 
> 赞同：10
> 
> 时间：2009-05-06T16:05:15.600
> 
> 标签：winapi, screen-capture

我按照本[教程](http://www.differentpla.net/content/2004/04/grabbing-a-snapshot-of-the-screen)（这里列出的内容比这里列出的要多一点，因为在我的代码中，我通过鼠标单击获得了一个窗口）将一个窗口作为位图抓取，然后在另一个窗口中渲染该位图。

我的问题：

当该窗口被最小化或隐藏（SW_HIDE）时，我的屏幕捕获不起作用，那么当窗口被最小化或隐藏时是否可以捕获它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-07T12:50:46.230

PrintWindow api[运行](http://msdn.microsoft.com/en-us/library/dd162869.aspx)良好，我用它来捕获隐藏窗口的缩略图。尽管名称不同，但它与 WM_PRINT 和 WM_PRINTCLIENT 不同，它几乎适用于除 Direct X / WPF 窗口之外的所有窗口。

我添加了一些代码（C#），但是在查看了我如何使用代码之后，我意识到当我捕获它的位图时窗口实际上并没有隐藏，它只是在屏幕外，所以这可能不适用于你的情况。你能把窗口显示在屏幕外，打印一下然后再隐藏吗？

```
 public static Bitmap PrintWindow(IntPtr hwnd)
    {
        RECT rc;
        WinUserApi.GetWindowRect(hwnd, out rc);

        Bitmap bmp = new Bitmap(rc.Width, rc.Height, PixelFormat.Format32bppArgb);
        Graphics gfxBmp = Graphics.FromImage(bmp);
        IntPtr hdcBitmap = gfxBmp.GetHdc();
        bool succeeded = WinUserApi.PrintWindow(hwnd, hdcBitmap, 0);
        gfxBmp.ReleaseHdc(hdcBitmap);
        if (!succeeded)
        {
            gfxBmp.FillRectangle(new SolidBrush(Color.Gray), new Rectangle(Point.Empty, bmp.Size));
        }
        IntPtr hRgn = WinGdiApi.CreateRectRgn(0, 0, 0, 0);
        WinUserApi.GetWindowRgn(hwnd, hRgn);
        Region region = Region.FromHrgn(hRgn);
        if (!region.IsEmpty(gfxBmp))
        {
            gfxBmp.ExcludeClip(region);
            gfxBmp.Clear(Color.Transparent);
        }
        gfxBmp.Dispose();
        return bmp;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T16:09:20.083

您可以将一些消息发送到窗口`WM_PRINT`，`WM_PRINTCLIENT`从而将其内容呈现到`HDC`您选择的窗口中。

然而，这些并不完美：虽然标准 Win32 控件可以正确处理这些，但应用程序中的任何自定义控件可能都不能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-06-17T16:11:10.177

我正在尝试获取部分隐藏控件的位图。

我在绘制之前使用了代码，但包括重叠它的窗口。所以..也许你想试试这个。WM_PRINTCLIENT 应该（在我的理解中）重绘控件内部的所有内容，即使它不是真正可见的。

```
const int WM_PRINT = 0x317, WM_PRINTCLIENT = 0x318, PRF_CLIENT = 4,
PRF_CHILDREN = 0x10, PRF_NON_CLIENT = 2,
COMBINED_PRINTFLAGS = PRF_CLIENT | PRF_CHILDREN | PRF_NON_CLIENT;
SendMessage(handle, WM_PRINTCLIENT, (int)hdc, COMBINED_PRINTFLAGS);
//GDIStuff.BitBlt(hdc, 0, 0, width, height, hdcControl, 0, 0, (int)GDIStuff.TernaryRasterOperations.SRCCOPY); 
```

之前的代码现在被注释掉了。它基于此处找到的代码：[Pocket PC：将控件绘制到位图](https://stackoverflow.com/questions/2292391/pocket-pc-draw-control-to-bitmap)（已接受答案）。这与 Tim Robinson 在此线程中建议的基本相同。

另外，看看这里 [http://www.tcx.be/blog/2004/paint-control-onto-graphics/](http://www.tcx.be/blog/2004/paint-control-onto-graphics/)

# php - 使用另一个数组中的索引值创建一个数组

> ID：830363
> 
> 赞同：2
> 
> 时间：2009-05-06T16:06:24.973
> 
> 标签：php, arrays

好的，这就是我想做的。我有一个数组。我想要做的是从第一个索引值中创建另一个数组。采取以下我想从中创建和排列的内容：

```
 Array ( 
    [identifier] => ID 
    [label] => HouseNum 
    [items] => Array ( 
                      [0] => Array ( 
                                    [ID] => 1 
                                    [HouseNum] => 17  
                                    [AptNum] => 
                                    [Street] => birch glen dr 
                                    [City] => Clifton Park 
                                    [State] => NY [Zip5] =>   
                                    [EID] => E083223 
                                    [RequestDate] => 02/05/09 
                                    [Status] => In-Qeue 
                                    [DateCompleted] => 
                                    [CompletedBy] =>  
                                    [ContactName] => Suzy Q 
                                    [ContactNumber] => 555-867-5309 
                                    [ContactTime] => 9-9 )
                       )
    ); 
```

最终看起来像这样：

```
Array(
      [0] => [ID] 
      [1] => [HouseNum] 
      [2] => [AptNum]
      [3] => [Street] 
      [4] => [City]
      [5] => [State] 
      [6] => [Zip5]  
      [7] => [EID] 
      [8] => [RequestDate]
      [9] => [Status]
      [10] => [DateCompleted]
      [11] => [CompletedBy]  
      [12] => [ContactName] 
      [13] => [ContactNumber]
      [14] => [ContactTime]
      ); 
```

关于如何实现这一目标的任何想法？我主要需要知道如何获取索引值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-06T16:10:44.590

```
$indexes = array_keys($whatever['items'][0]); 
```

[http://us.php.net/manual/en/function.array-keys.php](http://us.php.net/manual/en/function.array-keys.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T16:09:06.730

```
foreach($items[0] as $idx => $val)
   {
   $indexes[] = $idx;
   } 
```

或者：

```
$indexes = array_keys($items[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T16:11:48.220

```
$result = array_keys($input['items'][0]); 
```

# python - Python的PIL裁剪问题：裁剪图像的颜色搞砸了

> ID：830366
> 
> 赞同：4
> 
> 时间：2009-05-06T16:07:18.340
> 
> 标签：python, image-processing, colors, python-imaging-library, crop

PIL 的裁剪功能可能有一个非常基本的问题：裁剪图像的颜色完全搞砸了。这是代码：

```
>>> from PIL import Image
>>> img = Image.open('football.jpg')
>>> img
<PIL.JpegImagePlugin.JpegImageFile instance at 0x00
>>> img.format
'JPEG'
>>> img.mode
'RGB'
>>> box = (120,190,400,415)
>>> area = img.crop(box)
>>> area
<PIL.Image._ImageCrop instance at 0x00D56328>
>>> area.format
>>> area.mode
'RGB'
>>> output = open('cropped_football.jpg', 'w')
>>> area.save(output)
>>> output.close() 
```

原图：![在此处输入图像描述](https://i.stack.imgur.com/xJCt3.jpg)

[和输出](http://lh6.ggpht.com/_6sm8225Z3w8/SgG0AWKPUaI/AAAAAAAAAjw/SWP360wFo1M/cropped_football.jpg)。

如您所见，输出的颜色完全混乱......

提前感谢您的帮助！

-霍夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T16:21:57.947

`output`应该是文件名，而不是处理程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-07T10:35:36.260

代替

```
output = open('cropped_football.jpg', 'w')
area.save(output)
output.close() 
```

做就是了

```
area.save('cropped_football.jpg') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-07-26T16:23:20.097

由于调用`save`实际产生的输出，我不得不假设 PIL 能够交替使用文件名或打开的文件。问题在于文件模式，默认情况下会尝试根据文本约定进行转换 - 在 Windows 上，'\n' 将被替换为 '\r\n'。您需要以二进制模式打开文件：

```
output = open('cropped_football.jpg', 'wb') 
```

PS我对此进行了测试，并且可以正常工作：

![在此处输入图像描述](https://i.stack.imgur.com/fKUz5.jpg)

# vb6 - VB 6 应用程序的国际化

> ID：830367
> 
> 赞同：3
> 
> 时间：2009-05-06T16:07:38.963
> 
> 标签：vb6, internationalization

有没有人将 VB 6 应用程序国际化？您可以提供任何有用的资源或提示/技巧吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T16:38:56.457

获取[Michael Kaplan](http://blogs.msdn.com/michkap/)的书[Internationalization With Visual Basic](http://www.amazon.co.uk/Internationalization-Visual-Basic-Michael-Kaplan/dp/0672319772)（可能是[二手](http://www.abebooks.com/servlet/SearchResults?an=kaplan&sts=t&tn=Internationalization+With+Visual+Basic)的）。这是一个有用信息的金矿。我对编辑有些不满——索引很糟糕，章节顺序有点随意——但它仍然很棒。这本书的网站上有一些免费的[示例章节。](http://www.i18nwithvb.com/chapters/)

如果您还不熟悉*Unimess* - 支持 VB6 Unicode 的骇人听闻的混搭 - 请阅读免费章节之一的[第 6章。](http://www.i18nwithvb.com/chapters/Chapter06_en.htm)Cyber​​activex.com 也有关于这个主题的很好的[教程](http://www.cyberactivex.com/UnicodeTutorialVb.htm)。

最后，请阅读 VB6 手册中的[国际问题](http://msdn.microsoft.com/en-us/library/aa242115(VS.60).aspx)部分。它并不详尽，但值得一读。

编辑：有关国际化的编程语言中立讨论，请参阅[此答案- 几乎所有与 VB6 相关。](https://stackoverflow.com/questions/898/internationalization-in-your-projects/1462#1462)VB6[格式](http://msdn.microsoft.com/en-us/library/aa262745(VS.60).aspx)功能对于数字、货币、日期和时间的区域感知显示非常有用。[CDbl、CDate 等](http://msdn.microsoft.com/en-us/library/aa263426(VS.60).aspx)对于从字符串转换回内在类型很有用。

# ios - 如何在 Objective-C / iOS 中表示金钱？

> ID：830369
> 
> 赞同：19
> 
> 时间：2009-05-06T16:08:26.967
> 
> 标签：ios, objective-c, currency

我正在开发一个 iPhone 应用程序，并希望代表货币 ($) 金额。我不能使用浮点数，因为它们会引入一定数量的舍入误差。我可以使用什么？

我正在考虑在内部定义我自己的 Money 类并将美元和便士存储为 NSInteger。

```
@interface Money : NSObject {
    //$10.25 is stored as dollas=10 and pennies=25
    NSInteger dollars;
    NSInteger pennies;
} 
```

另一种可能的表示（更容易加法和乘法）是使用单个 NSInteger 作为便士。

```
@interface Money : NSObject {
    //$10.25 is stored as pennies=1025
    NSInteger pennies;
} 
```

你觉得呢？你有没有什么想法？我可以使用“BigDecimal”类型吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-06T16:20:41.773

使用 NSDecimalNumber。当然它有开销，但除非你能证明这是一个问题，否则你会喜欢它给你的准确性。

[http://www.cimgf.com/2008/04/23/cocoa-tutorial-dont-be-lazy-with-nsdecimalnumber-like-me/](http://www.cimgf.com/2008/04/23/cocoa-tutorial-dont-be-lazy-with-nsdecimalnumber-like-me/) [http://developer.apple.com/documentation/Cocoa/Reference/ Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-06T16:19:26.270

使用[`NSDecimalNumber`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/)类。

# objective-c - Objective-C 单例和 LLVM/clang 泄漏警告

> ID：830376
> 
> 赞同：2
> 
> 时间：2009-05-06T16:10:37.630
> 
> 标签：objective-c, llvm, clang

我在应用程序的多个位置使用单例模式，并且`clang`在分析代码时遇到内存泄漏错误。

```
static MyClass *_sharedMyClass;
+ (MyClass *)sharedMyClass {
  @synchronized(self) {
    if (_sharedMyClass == nil)
      [[self alloc] init];
  }
  return _sharedMyClass;
}

// clang error: Object allocated on line 5 is no longer referenced after this point and has a retain count of +1 (object leaked) 
```

我将这些设置用于`scan-build`：

`scan-build -v -v -v -V -k xcodebuild`

我相当确定单例中的代码很好 - 毕竟，它与 Stack Overflow 以及 Apple 文档中引用的代码相同 - 但我想整理内存泄漏警告，所以我的扫描 -构建返回成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T16:16:13.157

我可能特别密集，但肯定是你的第 5 行

```
[[self alloc] init]; 
```

分配包含类类型的对象，并立即将其丢弃？你不想

```
_sharedMyClass = [[self alloc] init]; 
```

?

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-12-08T01:55:27.780

此后，Apple 更新了他们[推荐的单例代码](http://developer.apple.com/mac/library/documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html#//apple_ref/doc/uid/TP40002974-CH4-SW32)以通过静态分析器：

```
+ (MyGizmoClass*)sharedManager
{
    if (sharedGizmoManager == nil) {
        sharedGizmoManager = [[super allocWithZone:NULL] init];
    }
    return sharedGizmoManager;
}

+ (id)allocWithZone:(NSZone *)zone
{
    return [[self sharedManager] retain];
} 
```

现在`+sharedManager`调用 super`-allocWithZone:`并分配 的返回值`-init`，而单例`-allocWithZone:`只返回一个保留的 sharedInstance。

编辑：

为什么要保留在 +allocWithZone: 中？

+allocWithZone: 被覆盖，因为使用 MyGizmoClass 的人可以通过调用 [[MyGizmoClass alloc] init] 而不是 [MyGizmoClass sharedManager] 来规避单例。它被保留是因为 +alloc 应该总是返回一个保留计数为 +1 的对象。

对 +alloc 的每次调用都应与 -release 或 -autorelease 保持平衡，因此如果 +allocWithZone: 中没有保留，则共享实例可能会从其他用户下释放。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-11-12T22:15:34.843

您可能对发布在[Mike Ash 的网站](http://www.mikeash.com/?page=pyblog/friday-qa-2009-10-02-care-and-feeding-of-singletons.html)上的简单、单一方法、基于 GCD 的单例实现（因此仅限 10.6+）感兴趣：

```
+ (id)sharedFoo
{
    static dispatch_once_t pred;
    static Foo *foo = nil;

    dispatch_once(&pred, ^{ foo = [[self alloc] init]; });
    return foo;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T04:24:05.407

您`self`在类方法中引用！大禁忌！其次，您正在调用`[[self alloc] init]`并且只是丢弃实例。您应该在类方法中分配单例引用，而不是`init`像我猜的那样。接下来，没有真正的保证`_sharedMyClass`将被初始化为零。您应该将其显式初始化为`nil`.

```
static MyClass *_sharedMyClass = nil;

+ (MyClass *)sharedMyClass {
  @synchronized(self) {
    if (_sharedMyClass == nil)
      _sharedMyClass = [[MyClass alloc] init];
  }
  return _sharedMyClass;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-06T03:47:05.583

你也可能在里面也有这个......

```
+ (id)allocWithZone:(NSZone *)zone {
    @synchronized(self) {
        if (sharedInstance == nil) {
            sharedInstance = [super allocWithZone:zone];
            return sharedInstance;  // assignment and return on first allocation
        }
    }
    return nil; // on subsequent allocation attempts return nil
} 
```

您没有将其存储在 init 中的原因是因为您将其存储在 alloc 调用的方法中。这是苹果在他们的例子中的模式。如果你也将值保存在你的 init 中，一切都很好，警告就会消失。我会单独留下 allocWithZone 实现。

# oracle - Oracle 触发器权限

> ID：830378
> 
> 赞同：1
> 
> 时间：2009-05-06T16:10:55.150
> 
> 标签：oracle, permissions, triggers, privileges, ora-01031

我想为用户 B 拥有的表创建用户 A 拥有的触发器。我必须在 B.table 上设置哪些权限以避免 ORA-01031：权限不足错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T16:20:43.927

```
GRANT CREATE ANY TRIGGER ON b TO a 
```

无法授予在某个表上创建触发器的权限。

# c# - ASP.NET-MVC 项目中的 ADO.NET 数据服务

> ID：830379
> 
> 赞同：2
> 
> 时间：2009-05-06T16:11:27.020
> 
> 标签：c#, asp.net-mvc, entity-framework, wcf-data-services

我正在尝试将 ADO.NET 数据服务添加到 vanilla ASP.NET-MVC 项目中。有谁知道这些技术是否兼容？

当我 Ctrl+f5 解决方案并访问服务 URL 时，我得到的只是非常无用的“请求错误...查看服务器日志”页面。开发 Web 服务器是否甚至写入任何日志，如果是，在哪里？

我猜想路由可能是问题所以我补充说： -

```
routes.IgnoreRoute("{service}.svc/{*pathInfo}"); 
```

试图解决这个问题，但这无济于事。

我宁愿不创建一个单独的 ASP.NET Web 项目来托管数据服务。在标准 ASP.NET 项目中不常见的 ASP.NET-MVC 项目中添加数据服务是否还有其他步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T04:42:44.970

您是否将调试属性放入服务类？

```
**[System.ServiceModel.ServiceBehavior(IncludeExceptionDetailInFaults = true)]**  
public class MyDataService : DataService<...>
{
    // This method is called only once to initialize service-wide policies.
    public static void InitializeService(IDataServiceConfiguration config)
    {
        // TODO: set rules to indicate which entity sets and service operations are visible, updatable, etc.
        // Examples:
        config.SetEntitySetAccessRule("*", EntitySetRights.AllRead);
        config.SetServiceOperationAccessRule("*", ServiceOperationRights.All);

        **config.UseVerboseErrors = true;**
    } 
```

# javascript - 在 IE 6 方面需要帮助

> ID：830383
> 
> 赞同：1
> 
> 时间：2009-05-06T16:12:07.970
> 
> 标签：javascript, html, css

所以我现在已经在一个网站上工作了几个月，我主要在 chrome 上测试它。但在我发布任何大的东西之前，我总是在 firefox 3.something 和 IE7 上检查它。现在我收到了一些抱怨，说它在 IE6 中看起来不太好，当我检查它时......好吧，它看起来不像它应该的那样。是否有任何快速修复可以添加到我的 HTML 以使其在 IE6 中看起来与其他任何地方一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T16:24:22.187

冒着被否决的风险：您是否尝试过将 IE6 添加到您的测试矩阵中？如果您有大量用户抱怨它在 IE6 上看起来很糟糕，那么您显然有大量用户使用 IE6 来使用它，因此将它添加到您的浏览器集中似乎是值得的发布前检查。只是在说'。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T16:18:22.683

一个非常好的开始是[http://code.google.com/p/ie7-js/](http://code.google.com/p/ie7-js/) 只需将它放在文档头部的条件注释标签中，它就会使 ie6 '符合标准'。之后确保每个版本的 IE 都有单独的 css 文档，并确保所有代码在 w3 的验证器中都是有效的。声明一个 doctype 也可以解决很多问题，但它必须在浏览器看到的第一行。

编辑：另外，对于 png 透明度，我发现这个[http://www.twinhelix.com/test/](http://www.twinhelix.com/test/)（IE PNGFIX 2.0 Alpha）效果最好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T16:16:36.137

让一切正常工作没有捷径可走。几乎必须检查每个看起来不同的元素。也就是说，您可以尝试查看 CSS 重置文件。 [雅虎有一个。](http://developer.yahoo.com/yui/reset/) 如果你[搜索谷歌](http://www.google.com/#hl=en&q=css+reset&btnG=Google+Search&aq=f&oq=css+reset&fp=KqtEvp1-d7s)，我相信你可以找到其他人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-06T16:20:48.043

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-06T16:27:49.807

您的网站在 IE6 中“崩溃”有多严重？如果是轻微的，那我就不用担心了。

它在 IE6 中工作有多重要？它的[市场份额](http://www.w3schools.com/browsers/browsers_stats.asp)正在缓慢但肯定地下降（查看我自己来自政府网站的日志也表明 IE6 肯定会消失）。您能否在您的网站上显示一条消息，让用户知道他们是否使用 IE6 并建议他们升级？

升级的原因有很多，教育您的用户为什么他们应该升级也可能是值得的？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T16:18:04.570

嗯...如果有一个简单的解决方案我真的很想知道它。:) 但是您无论如何都可以使用[这个](http://www.microsoft.com/expression/features/Default.aspx?key=webpreview)优秀的 Microsoft 工具来交叉测试您的页面。它对于比较网站的最终渲染很有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-07-27T15:39:23.883

您可以检查客户端浏览器的版本并包含该浏览器的 css 修复。但最简单的解决方案是向客户显示他的浏览器已过时的警报或通知，并提供下载最新浏览器的链接

这是显示该通知的一些方法

[http://garmahis.com/tools/ie6-update-warning/](http://garmahis.com/tools/ie6-update-warning/)

我喜欢这个解决方案

[http://www.browser-update.org/](http://www.browser-update.org/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-06T16:21:00.773

如果在 IE7 中看起来不错，CSS 重置可能什么也不做。浮动和溢出时的双倍边距之类的东西：自动错误是需要为每次出现手动添加的东西。我建议将以下行添加到您的 head 标签中：

```
<!--[if lt IE 7]><style type="text/css">@import "/stylesheets/ie6.css";</style><![endif]--> 
```

然后编写一个 ie6.css 文件来修复所有错误（是的，一次一个）

可能不是你想听到的，但这就是为什么每个人都这么讨厌 IE6

# wpf - 无法从 TiffBitmapDecoder.Frames 检索 TIFF 页面——所有帧都是第 1 页

> ID：830386
> 
> 赞同：2
> 
> 时间：2009-05-06T16:13:14.943
> 
> 标签：wpf, tiff, xps, bitmapsource

我正在尝试将多页 tiff 图像转换为多页 XPS 文档。我遇到的问题是 TiffBitmapDecoder 及其 BitmapFrames。

这是代码：

```
private static void ToXpsDocument(string imageName, string xpsName)
{
    using (var p = Package.Open(xpsName))
    {
        PackageStore.AddPackage(new Uri("pack://thedocloljk.xps"), p);
        XpsDocument doc = new XpsDocument(p);
        var writer = XpsDocument.CreateXpsDocumentWriter(doc);
        var dec = new TiffBitmapDecoder
                          (new Uri(imageName),
                          BitmapCreateOptions.IgnoreImageCache,
                          BitmapCacheOption.None);

        var fd = new FixedDocument();
        foreach (var frame in dec.Frames)
        {
            var image = new System.Windows.Controls.Image();
            image.Source = frame;
            var fp = new FixedPage();
            fp.Children.Add(image);
            fp.Width = frame.Width;
            fp.Height = frame.Height;
            var pc = new PageContent();
            (pc as IAddChild).AddChild(fp);
            fd.Pages.Add(pc);
        }
        writer.Write(fd);
        p.Flush();
        p.Close();
        PackageStore.RemovePackage(new Uri("pack://thedocloljk.xps"));
    }
} 
```

这会产生具有正确页数的 XPS。但是，每一页都是 tiff 第一页的副本。事实上，如果我选择一个帧（比如 dec.Frames[4]）并将其写入磁盘，它看起来就像是第一页。

我到底做错了什么？框架实际上不是图像的各个页面吗？我怎样才能让他们出去和他们一起工作？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-05T14:01:06.197

尝试使用以下代码（注释行与您的版本不同）：

```
foreach (var frameSource in dec.Frames) // note this line
{
    var frame = BitmapFrame.Create(frameSource); // and this line
    var image = new System.Windows.Controls.Image(); 
    image.Source = frame; 
    var fp = new FixedPage(); 
    fp.Children.Add(image); 
    fp.Width = frame.Width; 
    fp.Height = frame.Height; 
    var pc = new PageContent(); 
    (pc as IAddChild).AddChild(fp); 
    fd.Pages.Add(pc); 
} 
```

# c# - 确定线程的来源

> ID：830388
> 
> 赞同：5
> 
> 时间：2009-05-06T16:13:38.107
> 
> 标签：c#, .net, multithreading, debugging

在我为测试我为我们的一个应用程序编写的组件而开发的一个小型应用程序中，我一直在经历高度的闪烁和 UI 滞后。因为闪烁和延迟是在空闲时间发生的（当应该 - 严重 - 什么都没有发生时），我决定做一些调查。我注意到线程窗口中有一些我不知道的线程（并非完全出乎意料），但引起我注意的是其中一个线程被设置为`Highest`优先级。这个线程在`Main()`被调用时就存在，甚至在我的任何代码执行之前。我发现这个线程似乎出现在我编写的每个 .NET 应用程序中，甚至是控制台应用程序中。

作为一个勇敢的灵魂，我决定冻结线程，看看发生了什么。闪烁确实停止了，但是在进行数据库交互时我遇到了一些奇怪的情况（我使用的是 SQL CE 3.5 SP1）。我的想法是这可能是数据库实际运行的线程，但考虑到它是在应用程序加载时启动的（在对数据库的任何引用之前）并且存在于其他非数据库应用程序中，我倾向于相信事实并非如此。

因为如果我在暂停时在调试器中切换到该线程（与其他几个线程一样）显示位置列中没有数据并且没有列出调用堆栈，我尝试通过 GetCurrentProcess().Threads 匹配对应线程的 StartAddress 属性，但它超出了所有当前加载的模块地址范围。

有谁知道这个线程是什么，或者我怎么知道？

**编辑**

在进行了一些挖掘之后，看起来 StartAddress 在 kernel32.dll 中（基于附近的内存内容）。这让我认为这只是用于启动线程的标准系统函数，根据[这个页面](http://msdn.microsoft.com/en-us/library/system.diagnostics.processthread.startaddress.aspx)，这基本上让我回到了确定这个线程实际来自哪里的问题。这个列表中的所有线程都具有相同的 StartAddress 值这一事实进一步证实了这一点，这让我问到底目的是什么......？

**编辑 2**

Process Explorer 让我找到了一个真正有意义的起始地址。它看起来像它`mscorwks.dll!CreateApplicationContext+0xbbef`。此 dll 位于 %WINDOWS%\Microsoft.NET\Framework\v2.0.50 中，因此看起来它显然是一个运行时程序集。我仍然不确定为什么

*   这是最高优先级
*   它似乎导致我的应用程序出现问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T16:29:34.403

您可以尝试使用[Sysinternals](http://technet.microsoft.com/en-us/sysinternals/default.aspx)。 [Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)让您深入挖掘。右键单击进程以访问属性。然后是“线程”选项卡。在那里，您可以看到线程的堆栈和模块。

编辑：

在[询问](https://stackoverflow.com/questions/830822)了一些之后，您的“最高”优先级线程似乎是`Finalizer`由于垃圾收集而运行的线程。我仍然没有充分的理由说明它为什么会不断运行。也许您的过程中有一些时髦的对象生命周期行为？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T16:22:15.187

我不确定这是什么，但如果您打开非托管调试，并使用[Windows 符号服务器](http://www.hanselman.com/blog/SetUpYourSystemToUseMicrosoftsPublicSymbolServer.aspx)设置 Visual Studio ，您可能会获得更多线索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T16:47:26.373

可能是垃圾收集器线程。当我有一次调查与终结器相关的错误时，我也注意到了这一点。也许您的系统内存不足，而 GC 一直在尝试收集？前面提到的错误也是这种情况。我无法在我的机器上重现它，但我的一个同事有一台 RAM 较少的机器，它会像发条一样重新出现。

# asp.net - 在 Windows 2008 服务器上运行 aspnet_setreg.exe

> ID：830391
> 
> 赞同：5
> 
> 时间：2009-05-06T16:14:20.697
> 
> 标签：asp.net, iis, windows-server-2008

我有一个使用 aspnet_setreg.exe 将身份用户的用户名和密码加密到注册表中的站点。它一直运行良好，但是当我在 Windows 2008 上运行它时，我得到了这个：

C:\aspnet_setreg>aspnet_setreg.exe -k:SOFTWARE\MYCODE\identity -u:"域\用户" -p:"密码"

请编辑您的配置以包含以下内容：

userName="registry:HKLM\SOFTWARE\MYCODE\identity\ASPNET_SETREG,userName" password="registry:HKLM\SOFTWARE\MYCODE\identity\ASPNET_SETREG,password"

注册表项上的 DACL 将完全控制权授予系统、管理员和创建者所有者。

如果您有配置部分的加密凭据或配置部分的连接字符串，请确保进程标识对注册表项具有读取访问权限。此外，如果您已将 IIS 配置为访问

UNC 共享，用于访问共享的帐户将需要对注册表项的读取权限。Regedt32.exe 可用于查看/修改注册表项权限。

您可以重命名注册表子项和注册表值以防止发现。

有没有其他人使用这个，你有没有看到它在 2008 年工作。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T17:02:15.417

aspnet_setreg.exe 的潜在问题是它是一个 32 位进程，并且会写入 Wow6432Node 而不是上面指出的位置。如果您正在运行 64 位应用程序池，则需要将 reg 密钥复制到“真实”x64 位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-01-20T07:54:23.323

1) aspnet_setreg 应用程序将注册表项放入 HKLM\Software\Wow6432Node\rest 路径。

如上所述，这是 32 位应用程序修改 64 位注册表项的行为。

2) 要将密钥移动到正确的位置，我将密钥导出到 .reg 文件，然后编辑该文件并删除文件中的 Wow6432Node 目录。

3）或者，您可以只使用 Wow6432Node 路径：

例如：

```
userName="registry:HKLM\Software\Wow6432Node\MYCODE\identity\ASPNET_SETREG,userName"

password="registry:HKLM\Software\Wow6432Node\MYCODE\identity\ASPNET_SETREG,password" 
```

4）另外，请注意，您必须具有管理员权限才能运行它。在 Windows 7 上，我使用“以管理员身份运行”从命令行运行它，aspnet_setreg 将其存储在 HKEY_USERS[USER SID]\Software\Classes\VirtualStore\MACHINE\SOFTWARE\Wow6432Node 中。

5）最后，记得设置注册表项的权限，以便您的应用程序可以从注册表项中读取。

参考资料： http: [//support.microsoft.com/kb/329290](http://support.microsoft.com/kb/329290)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-07T20:00:34.387

您对 x64 位置的看法是正确的。如何让 aspnet_setreg.exe 在 x32 注册表位置设置 reg 值？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-01-26T13:13:53.820

我从 2003 年的服务器上移动了密钥。但仍然想知道是否有其他人有在 2008 年机器上使用它的经验。

# asp.net - 定制 VisualStudio 中的发布功能以使用单个文件的特定路径

> ID：830400
> 
> 赞同：-1
> 
> 时间：2009-05-06T16:16:05.340
> 
> 标签：asp.net, visual-studio, visual-studio-2008

有没有办法定制 VisualStudio 的发布功能（我使用的是 VS 2008），以便不同的文件进入不同的目录。我正在开发一个在 CMS（即时）中使用的 Web 应用程序，并且解决方案的文件夹结构与目标文件夹结构完全不同。

例如，在我的解决方案中，我有：

```
MySolution\MyWebPage.aspx
MySolution\bin\MyWebApplication.dll 
```

需要发布到：

```
CMS\Admin\Addins\MyWebSite\MyWebPage.aspx
CMS\Admin\bin\MyWebApplication.dll 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T20:43:10.370

不幸的是，这是不可能的。

# asp.net-mvc - 在控制器的操作中如何查看验证结果？

> ID：830403
> 
> 赞同：1
> 
> 时间：2009-05-06T16:16:24.980
> 
> 标签：asp.net-mvc, validation

我在执行 UpdateModel 的控制器中有一个更新操作。在我将数据传回视图之前，我想记录未能验证的属性。

我希望存储错误的字典位于 ModelState 中（因为存在 AddModelError() 方法），但事实并非如此。如何在控制器中访问此字典？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-18T11:00:53.970

在控制器上：

```
 foreach (ModelState state in ViewData.ModelState.Values)
        foreach (ModelError error in state.Errors)
          MyLog(error.ErrorMessage); 
```

# javascript - 获取输入文本，打印到页面并单击打开新窗口

> ID：830406
> 
> 赞同：0
> 
> 时间：2009-05-06T16:16:56.213
> 
> 标签：javascript, function, input, variables, window

我需要帮助：

我的页面应采用用户输入文本，然后显示页面上输入的内容（无警报），如果找到将存储在数组或 var 中的匹配项，则单击时打开一个新窗口。

* * *

这是我在下面遇到问题的行：

```
 onclick="insert(this.form.name.value),show();"/> 
```

* * *

这是到目前为止的代码：

输入

```
 var array = new Array();

        function insert(val){
            array[array.length]=val;
        }

        function show() {
            var string="<b>All Element of the Array :</b><br>";
            for(i = 0; i < array.length; i++) {
                string =string+array[i]+"<br>";
            }
            if(array.length > 0)
                document.getElementById('myDiv').innerHTML = string;
        }

function open_win(){

window.open ,"_blank","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=no, 

copyhistory=no, width=200, height=305")
}

    </script>

</head>

<body>
    <h2>Input</h2>
    <form name="form1">

        <table width="407">
            <tr>
                <td width="154" align="right"><b>Name</b>
                <td width="9"><b>&nbsp;:</b>
                <td width="224">
                <input type="text" name="name"/>
            </tr>
            <tr>

                <td width="154" align="right">
                <td width="9">
                <td width="224">
            </tr>
            <tr>
                <td width="154" align="right">
                <td width="9">
                <td width="224">
                <input type="button" Value="Print Name to page and open new window" 
                       onclick="insert(this.form.name.value),show();"/>

            </tr>
        </table>
    </form>
    <div id="myDiv"></div>
</body> 
```

谢谢您的帮助，

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T17:17:58.017

尝试使用分号而不是逗号。您要执行第一个函数，然后执行第二个函数。

```
onclick="insert(this.form.name.value); show(); return false;" 
```

您添加`return false;`以便链接不会被跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T17:16:32.887

从 insert() 函数内部调用后续函数。然后返回 true/false 以指示浏览器是否应该跟随链接。

# c# - 如何在 Visual Studio 2003 的调试器中检查 XML 流

> ID：830408
> 
> 赞同：11
> 
> 时间：2009-05-06T16:17:23.340
> 
> 标签：c#, xml, stream, .net-1.1, visual-studio-2003

我必须编辑一个 XSLT 样式表，但我是盲目的，因为 XML 输入只是短暂地存在于一堆流中。我可以调试代码，但不知道如何将流的内容转换为我可以查看的文本（并在我编辑它们时手动运行 XSLT）。

该代码是大型旧遗留系统的一部分，如果绝对必要，我可以在调试环境中对其进行修改，但它在连接到一堆 MSMQ 的 Windows 服务中运行。因此，出于各种原因，我宁愿能够使用调试器来查看 XML，而不必先更改代码。

代码大大简化，是这样的：（C# - 但请记住它是 VS 2003 中的 .net 1.1。）

这是将 XML 作为流获取的函数，然后将其馈送到某种 XSLT 转换对象中。我尝试在监视窗口和即时窗口中查看 writer 和 xmlStream 对象，但不太了解如何查看实际的 XML。

```
private MemoryStream GetXml()
{
    MemoryStream xmlStream;
    xmlStream = new MemoryStream();
    XmlWriter writer = new XmlTextWriter(xmlStream, Encoding.UTF8);
    writer.WriteStartDocument();
    //etc etc...
    writer.WriteEndDocument();
    writer.Flush();
    xmlStream.Position = 0;
    return xmlStream; //Goes off to XSLT transform thingy!
} 
```

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-29T16:13:12.613

在 MemoryStream 准备好后，您可以简单地将此表达式添加到您的监视窗口：

```
(new StreamReader(xmlStream)).ReadToEnd(); 
```

监视表达式不需要是简单的变量值。它们可以是复杂的表达式，但它们会产生副作用。正如您所注意到的，这将中断执行，因为流内容将被完全读出。如果您需要重新开始执行，您可以在中断后使用另一个表达式重新创建流。

这种情况在使用流调试代码时经常出现，因此我避免将它们用于简单的、自包含的任务。不幸的是，对于大型系统，提前知道是否应该使代码流面向并不总是那么容易，因为这在很大程度上取决于它将如何使用。然而，我认为在许多情况下使用流是一种过早的优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T17:50:51.947

好的，不修改代码我没有成功使用调试器。我在下面的代码片段中添加了，它让我可以在其中放置一个断点或使用 debugview。

```
private MemoryStream GetXml()
{
    MemoryStream xmlStream;
    xmlStream = new MemoryStream();
    XmlWriter writer = new XmlTextWriter(xmlStream, Encoding.UTF8);
    writer.WriteStartDocument();
    //etc etc...
    writer.WriteEndDocument();
    writer.Flush();
    xmlStream.Position = 0;

    #if DEBUG
    string temp;
    StreamReader st=new StreamReader(xmlStream);
    temp=st.ReadToEnd();
    Debug.WriteLine(temp);
    #endif

    return xmlStream; //Goes off to XSLT transform thingy!
} 
```

我仍然更愿意以某种方式简单地查看调试器中的 xmlstream 对象，即使它破坏了执行流程，但与此同时，这是我管理过的最好的。

# clearcase - 使用 Rational ClearCase 自动化库 (CAL) 获取视图所有者/创建者

> ID：830412
> 
> 赞同：1
> 
> 时间：2009-05-06T16:17:53.230
> 
> 标签：clearcase, cal, ibm-rational

这里有没有人已经使用过 Rational / IBM CAL 并且知道是否知道，以及如何检查视图的创建者/所有者（用户名）？Elements、Vobs 等都有一个 Owner/Creator，但出于某种原因视图没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T20:50:12.203

我只使用 CAL 编写了小型 VB 脚本，如[关于 label 的答案所示](https://stackoverflow.com/questions/268595/how-do-i-get-latest-clearcase-label-programmatically-from-c/269624#269624)。

在检查了 cc_cal.chm（在 C:\Program Files\IBM，在最新的 7.1.0.1 版本的 ClearCase 安装中找到）之后，我发现它们的`ICCView`界面非常不完整，并且总是喜欢修补经典的输出：

```
cleartool lsview -l -full -pro aTagViewName 
```

有了这个输出，我肯定能找到我需要的任何信息。

* * *

获取给定用户名的某些视图的唯一其他“纯 CAL”方法是用于 UCM 视图，您可以在其中向流询问这些视图（但这并不能直接解决您的问题）

```
 Dim Streams As CCStreams 
 Dim Stream As CCStream 
 Set Streams = Project.DevelopmentStreams(Name) 
 For Each Stream In Streams 
       Dim Views As CCViews 
       Set Views = Stream.Views(Name) 
       Dim View As CCView 
       For Each View In Views 
             Str = Str & View.TagName & " in stream: " & _ 
             Stream.Title & vbCrLf 
       Next 
 Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-06T00:22:06.113

基本上，如果你能想到用 cleartool 做的方法，答案是肯定的。如果没有特定的接口/对象 API 来执行您想要的操作，只需在 CAL 中创建 cleartool 对象并将您的查询填入其中！

使用 CAL 的优点是您只需要加载 .dll 一次，并且如果您必须这样做，则不必支付执行无数单独的 cleartool 进程的代价。

不过，CAL 文档很烂。在 Visual Studio 中，您可以通过在资源浏览器中找到 DLL 来将 CAL 添加为资源，并像其他任何东西一样通过 COM 与它对话。

如果您不使用 VB 或 VB.NET（例如 C#），那么您必须进行比示例文档中更多的类型转换。

# ruby-on-rails - 如何找到 rake 任务的源文件？

> ID：830423
> 
> 赞同：52
> 
> 时间：2009-05-06T16:18:34.133
> 
> 标签：ruby-on-rails, ruby, rake

我知道您可以通过键入查看所有可能的 rake 任务

```
rake -T 
```

但我需要知道一个任务到底是做什么的。从输出中，我怎样才能找到实际具有任务的源文件？例如，我正在尝试查找 db:schema:dump 任务的来源。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-04-27T21:41:43.007

我知道这是一个老问题，但无论如何：

```
rake -W 
```

这是在 rake 0.9.0 中引入的。

[http://rake.rubyforge.org/doc/release_notes/rake-0_9_0_rdoc.html](http://rake.rubyforge.org/doc/release_notes/rake-0_9_0_rdoc.html)

> 支持 -where (-W) 标志，用于显示任务的定义位置。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-04-12T18:50:24.120

不管其他人怎么说，您*可以通过*编程方式在 rails 应用程序中获取 rake 任务的源位置。为此，只需在您的代码中或从控制台运行类似以下内容：

```
# load all the tasks associated with the rails app
Rails.application.load_tasks

# get the source locations of actions called by a task
task_name = 'db:schema:load' # fully scoped task name
Rake.application[task_name].actions.map(&:source_location) 
```

这将返回为此任务执行的任何代码的源位置。您还可以使用`#prerequisites`而不是`#source_location`获取先决条件任务名称的列表（例如“环境”等）。

您还可以使用以下命令列出所有加载的任务：

```
Rake.application.tasks 
```

**更新：**请参阅下面的 Magne 的好答案。对于**rake >= 0.9.0**的版本，您可以使用它`rake -W`来显示 rake 任务的源位置。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-06T17:58:28.760

不幸的是，没有编程方法可以做到这一点。Rake 任务可以从 rails 本身、lib/tasks 或任何带有任务目录的插件加载。

这应该包括 Rails 本身以外的大部分内容：

```
find . -name "*.rake" | xargs grep "whatever" 
```

至于`db:schema:dump`，这里是来源：

```
desc "Create a db/schema.rb file that can be portably used against any DB supported by AR"
task :dump => :environment do
  require 'active_record/schema_dumper'
  File.open(ENV['SCHEMA'] || "#{RAILS_ROOT}/db/schema.rb", "w") do |file|
    ActiveRecord::SchemaDumper.dump(ActiveRecord::Base.connection, file)
  end
end 
```

它可以在 rails 2.2.2 gem 的 lib/tasks/database.rake 的第 242 行找到。如果您有不同版本的 Rails，只需搜索“ `namespace :schema`”。

您可能实际上想要 的来源`ActiveRecord::SchemaDumper`，但我认为您应该毫不费力地找出它的来源。:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T16:37:54.430

对于 Rails 中的大多数 rake 任务，请在 lib/tasks 中的 Rails gem 目录中查看。

如果您已将 Rails 供应到您的应用程序目录结构中，请查看 vendor/rails/railties/lib/tasks

无论哪种方式，db:schema:dump 都在 databases.rake 中。

# c# - Gridview 的 DataKeys 属性和 DataKeyNames 有什么区别？

> ID：830427
> 
> 赞同：2
> 
> 时间：2009-05-06T16:19:09.577
> 
> 标签：c#, asp.net, gridview

他们似乎是平等的。两者都可以有多个用逗号分隔的键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T16:23:30.877

DataKeyNames 是您指定组成键的字段名称的地方。支持复合键是复合的。

DataKeys 存储实际的键值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T16:25:00.920

两者都是不同的 datakeysname 存储主键列的名称，而 datakeys 将具有该列的值。

请参阅以下示例。 [http://www.highoncoding.com/Articles/87_Accessing_Invisible_Columns_of_GridView_Control.aspx](http://www.highoncoding.com/Articles/87_Accessing_Invisible_Columns_of_GridView_Control.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-01T08:02:29.850

数据键名：

获取一个数组，其中包含 GridView 中当前显示的行的主键字段的名称。

数据键：

获取 DataKey 对象的集合，这些对象表示在 GridView 的 DataKeyNames 属性中设置的主键字段的值。

# c# - 如何使用 c# 和 WebClient 类检查服务器上是否存在文件

> ID：830435
> 
> 赞同：23
> 
> 时间：2009-05-06T16:20:22.727
> 
> 标签：c#, http, file, webclient, exists

在我的应用程序中，我使用**WebClient**类通过简单地调用**DownloadFile**方法从 Web 服务器下载文件。现在我需要在下载某个文件之前检查它是否存在（或者我只是想确保它存在）。我有两个问题：

1.  在不通过网络传输大量数据的情况下检查服务器上是否存在文件的最佳方法是什么？（我需要检查的文件非常多）
2.  有没有办法在不下载的情况下获取给定远程文件的大小？

提前致谢！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-05-06T16:26:36.377

`WebClient`相当有限；如果您切换到 using `WebRequest`，那么您将获得发送 HTTP HEAD 请求的能力。当您发出请求时，您应该得到一个错误（如果文件丢失），或者一个`WebResponse`具有有效`ContentLength`属性的错误。

**编辑：**示例代码：

```
WebRequest request = WebRequest.Create(new Uri("http://www.example.com/"));
request.Method = "HEAD";

using(WebResponse response = request.GetResponse()) {
   Console.WriteLine("{0} {1}", response.ContentLength, response.ContentType);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-05T08:12:45.310

当您使用**WebClient**类请求文件时，404 错误（未找到文件）将导致异常。最好的方法是处理该异常并使用可以设置的标志来查看文件是否存在。

示例代码如下：

```
System.Net.HttpWebRequest request = null;
System.Net.HttpWebResponse response = null;
request = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create("www.example.com/somepath");
request.Timeout = 30000;
try
{
    response = (System.Net.HttpWebResponse)request.GetResponse();
    flag = 1;
}
catch 
{
    flag = -1;
}

if (flag==1)
{
    Console.WriteLine("File Found!!!");
}
else
{
    Console.WriteLine("File Not Found!!!");
} 
```

您可以将代码放在相应的 if 块中。希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-27T18:40:05.840

> 在不通过网络传输大量数据的情况下检查服务器上是否存在文件的最佳方法是什么？

您可以`WebClient.OpenRead`在不读取所有文件字节的情况下进行测试以打开文件流：

```
using (var client = new WebClient()) 
{
    Stream stream = client.OpenRead(url); 
    // ^ throws System.Net.WebException: 'Could not find file...' if file is not present
    stream.Close(); 
} 
```

这将指示文件是否存在于远程位置。

要完全读取文件流，您将执行以下操作：

```
using (var client = new WebClient()) 
{
    Stream stream = client.OpenRead(url); 
    StreamReader sr = new StreamReader(stream);
    Console.WriteLine(sr.ReadToEnd());
    stream.Close(); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-17T13:00:42.287

万一有人遇到 ssl 证书问题

```
ServicePointManager.ServerCertificateValidationCallback = new RemoteCertificateValidationCallback
                                                                            (
                                                                               delegate { return true; }
                                                                            );
            WebRequest request = WebRequest.Create(new Uri("http://.com/flower.zip"));
            request.Method = "HEAD";

            using (WebResponse response = request.GetResponse())
            {
                Console.WriteLine("{0} {1}", response.ContentLength, response.ContentType);
            } 
```

# http - 检查 Web 浏览器中的 HTTP 状态代码

> ID：830458
> 
> 赞同：-1
> 
> 时间：2009-05-06T16:23:57.990
> 
> 标签：http, browser

我想验证我的定制错误页面是否返回正确的[HTTP 状态代码](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)。

*   200 好
*   301 永久搬家
*   401未经授权
*   404 未找到
*   500内部服务器错误

等等

如何让我的网络浏览器显示代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T16:25:51.277

我建议您使用 HTTP 工具[Fiddler](http://www.fiddler2.com/fiddler2/)。

它会显示每个请求的 HTTP 状态代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T16:25:59.873

使用Mozilla firefox 的[LiveHTTPHeaders 插件](https://addons.mozilla.org/en-US/firefox/addon/3829)。

[![替代文字](https://i.stack.imgur.com/eKsve.png)](https://i.stack.imgur.com/eKsve.png)
[（来源：[googlepages.com](http://chathuranga.chandrasekara.googlepages.com/Livehttp.PNG)）]

# c++ - 全局变量和main中的变量有什么区别？

> ID：830463
> 
> 赞同：6
> 
> 时间：2009-05-06T16:25:12.120
> 
> 标签：c++

```
MyClass GlobalVar;

int main()
{
    MyClass VarInMain;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-06T16:27:52.677

有几件事：

1.  通常，它们被分配在不同的地方。局部变量分配在栈上，全局变量分配在别处。
2.  main 中的局部变量仅在 main 中可见。另一方面，可以在任何地方访问全局变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T17:15:16.947

更多区别：

1.  如果全局对象的构造函数/析构函数抛出异常，则调用函数终止并且没有机会继续。对于本地对象，您可以捕获异常并做一些事情（但从析构函数中抛出仍然很棘手）。
2.  全局对象的构造/销毁顺序没有很好地指定。这意味着，通常对于两个全局对象，你不能说，首先构造哪个。另一方面，局部对象在定义点创建并在块结束时销毁，顺序与创建顺序相反。
3.  范围...（已经提到）

一般来说，在没有非常充分的理由的情况下使用全局对象并不是一个好习惯。使用全局变量通常会导致代码难以维护。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T16:27:02.913

变量 VarInMain 是一个局部变量，只能在声明它的函数内部使用，在您的情况下，是 main 函数。GlobalVar 可以在程序的每个函数中使用，因为它是在函数之外声明的。这称为范围。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-06T16:27:15.360

范围。VarInMain 只能通过 main 中的代码直接访问。GlobalVar 可以通过文件中任何函数中的代码直接访问。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-06T16:44:56.893

一个简单的例子：

```
int y = 43;

void foo() {
  // y is visible here, x is not
}

int main() {
  int x = 42;
  foo(); // x is visible here, but not when we enter the foo() function 
```

}

全局变量在所有函数中都是全局可见的。局部变量仅在声明它的范围内可见。如果您在 main 中声明一个局部变量，它将在那里可见，是的，但在从 main 调用的函数中不可见。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-06T16:28:28.463

`VarInMain`只能在`main()`函数内访问。如果`main()`调用另一个函数，该函数将无权访问它。这是**功能范围**。

`GlobalVar`可以在同一文件中的每个函数中访问。如果您放入`extern MyClass GlobalVar;`标头，则可以在具有或包含该声明的文件中的任何函数中使用它。这是**全局范围**。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-06T17:24:45.737

另一个区别：全局对象初始化的顺序是未定义的。例如：

```
static Integer Global_Integer(5);
static Foo Global_Foo; 
```

由于这些是对象，C++ 运行时将在初始化它们时调用它们的构造函数，但我们无法预测这将发生的顺序。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-14T01:58:16.823

另一个区别：全局变量将在程序启动之前初始化（即 main() 被调用），而局部变量在执行到达该点时被初始化（即在上面的示例中调用 main 之后）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-06T16:27:58.853

全局变量可以在 main 之外声明的函数中使用，而在 main 中声明的任何内容都必须首先传递给另一个函数。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-06T21:09:38.990

另一个：全局变量（或任何其他命名空间中的变量）被初始化为`(T)0`，`T`作为变量的类型（如果它是简单的非类类型），数组和类的所有元素都像这样初始化。

但在我看来，无论如何显式初始化事物是个好主意，而不是依赖于零初始化，因为当显式提及初始值时，它提高了程序的可读性。然而，在阅读别人的代码时知道它仍然很有用，始终记住编译器会自动初始化这些代码。

未声明为静态的局部变量不会自动初始化。所以你必须自己做任何初始化，以防`T`没有构造函数为你做。永远记住这一点。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-14T06:54:57.653

任何函数都可以访问全局变量。main 中的变量的行为与任何其他局部变量完全相同，并且只能由 main 中的代码访问。此外，如果 main（或其他函数）调用自身，将复制局部变量，但不会复制全局变量。

```
int x = 0;
void myfunction()
{
    x++;
    printf("%i ",x);
}
int main()
{
    myfunction();
    myfunction();
} 
```

此示例将输出：1 2

移动“int x = 0;” into myfunction 将输出： 1 1

因为每次调用 myfunction 时都会初始化局部变量。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-09-20T16:08:56.747

**LOCAL VARIABLE** 它是在函数或块中声明的变量。它只能在声明它的函数/块中访问。

**GLOBAL VARIABLE** 它是在所有函数之外声明的变量。它在整个程序中都可以访问。

# c# - 为什么我的 Linq Where 子句产生的结果更多而不是更少？

> ID：830465
> 
> 赞同：2
> 
> 时间：2009-05-06T16:25:26.583
> 
> 标签：c#, linq, linq-to-entities

我刚刚经历了很长一段时间以来最奇怪的调试体验。承认有点尴尬，但它让我相信我的 Linq 查询在添加额外的 Where 子句时会产生更多结果。

我知道这是不可能的，所以我将我的违规函数以及属于它的单元测试重构为：

```
[Test]
public void LoadUserBySearchString()
{
    //Setup
    var AllUsers = new List<User>
                       {
                           new User
                               {
                                   FirstName = "Luke",
                                   LastName = "Skywalker",
                                   Email = "luke@jedinet.org"
                               },
                           new User
                               {
                                   FirstName = "Leia",
                                   LastName = "Skywalker",
                                   Email = "faeryprincess@winxmail.com"
                               }
                       };

    //Execution
    List<User> SearchResults = LoadUserBySearchString("princess", AllUsers.AsQueryable());
    List<User> SearchResults2 = LoadUserBySearchString("princess Skywalker", AllUsers.AsQueryable());

    //Assertion
    Assert.AreEqual(1, SearchResults.Count); //test passed!
    Assert.AreEqual(1, SearchResults2.Count); //test failed! got 2 instead of 1 User???
}

//search CustID, fname, lname, email for substring(s)
public List<User> LoadUserBySearchString(string SearchString, IQueryable<User> AllUsers)
{
    IQueryable<User> Result = AllUsers;
    //split into substrings and apply each substring as additional search criterium
    foreach (string SubString in Regex.Split(SearchString, " "))
    {            
        int SubStringAsInteger = -1;
        if (SubString.IsInteger())
        {
            SubStringAsInteger = Convert.ToInt32(SubString);
        }

        if (SubString != null && SubString.Length > 0)
        {
            Result = Result.Where(c => (c.FirstName.Contains(SubString)
                                        || c.LastName.Contains(SubString)
                                        || c.Email.Contains(SubString)
                                        || (c.ID == SubStringAsInteger)
                                       ));
        }
    }
    return Result.ToList();
} 
```

我已经调试了 LoadUserBySearchString 函数并断言对该函数的第二次调用实际上产生了一个带有两个 where 子句而不是一个的 linq 查询。因此，似乎附加的 where 子句正在增加结果的数量。

更奇怪的是，LoadUserBySearchString 函数在我手动测试时效果很好（使用数据库中的真实用户）。它仅在运行单元测试时显示这种奇怪的行为。

我想我只是需要一些睡眠（甚至是延长假期）。如果有人可以帮我阐明这一点，我可以停止质疑我的理智并重新开始工作。

谢谢，

阿德里安

**编辑（澄清我到目前为止的几个回复）**：我知道它看起来像是 or 子句，但不幸的是它并不是那么简单。LoadUserBySearchString 将搜索字符串拆分为多个字符串，并为每个字符串附加一个 Where 子句。“天行者”匹配卢克和莱娅，但“公主”只匹配莱娅。

这是搜索字符串“princess”的 Linq 查询：

```
+       Result  {System.Collections.Generic.List`1[TestProject.Models.User].Where(c => (((c.FirstName.Contains(value(TestProject.Controllers.SearchController+<>c__DisplayClass1).SubString) || c.LastName.Contains(value(TestProject.Controllers.SearchController+<>c__DisplayClass1).SubString)) || c.Email.Contains(value(TestProject.Controllers.SearchController+<>c__DisplayClass1).SubString)) || (c.ID = value(TestProject.Controllers.SearchController+<>c__DisplayClass3).SubStringAsInteger)))}  System.Linq.IQueryable<TestProject.Models.User> {System.Linq.EnumerableQuery<TestProject.Models.User>} 
```

这是搜索字符串“天行者公主”的 Linq 子句

```
+       Result  {System.Collections.Generic.List`1[TestProject.Models.User].Where(c => (((c.FirstName.Contains(value(TestProject.Controllers.SearchController+<>c__DisplayClass1).SubString) || c.LastName.Contains(value(TestProject.Controllers.SearchController+<>c__DisplayClass1).SubString)) || c.Email.Contains(value(TestProject.Controllers.SearchController+<>c__DisplayClass1).SubString)) || (c.ID = value(TestProject.Controllers.SearchController+<>c__DisplayClass3).SubStringAsInteger))).Where(c => (((c.FirstName.Contains(value(TestProject.Controllers.SearchController+<>c__DisplayClass1).SubString) || c.LastName.Contains(value(TestProject.Controllers.SearchController+<>c__DisplayClass1).SubString)) || c.Email.Contains(value(TestProject.Controllers.SearchController+<>c__DisplayClass1).SubString)) || (c.ID = value(TestProject.Controllers.SearchController+<>c__DisplayClass3).SubStringAsInteger)))}    System.Linq.IQueryable<TestProject.Models.User> {System.Linq.EnumerableQuery<TestProject.Models.User>} 
```

与上面相同，只是多了一个 where 子句。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T16:46:00.153

这是一个不错的小问题。

正在发生的事情是，由于匿名方法和延迟执行，您实际上并没有过滤“公主”。相反，您正在构建一个过滤器来过滤`subString`变量的内容。

但是，您随后更改此变量，并构建另一个过滤器，它再次使用相同的变量。

基本上，这就是您将执行的简短形式：

```
Where(...contains(SubString)).Where(...contains(SubString)) 
```

所以，你实际上只过滤了最后一个单词，这两个单词都存在，仅仅是因为在实际应用这些过滤器时，只剩下一个 SubString 值，即最后一个。

如果您更改代码以便在循环范围内捕获 SubString 变量，它将起作用：

```
if (SubString != null && SubString.Length > 0)
{
    String captured = SubString;
    Int32 capturedId = SubStringAsInteger;
    Result = Result.Where(c => (c.FirstName.Contains(captured)
                                || c.LastName.Contains(captured)
                                || c.Email.Contains(captured)
                                || (c.ID == capturedId)
                               ));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T16:41:08.540

您的算法相当于“选择与搜索字符串中的任何单词匹配的记录”。

这是因为延迟执行。在调用 .ToList() 之前，不会实际执行查询。如果您在循环内移动 .ToList() ，您将获得您想要的行为。

# perl - Perl CGI 程序是否存在 HTML 联系表单的缓冲区溢出或脚本漏洞？

> ID：830472
> 
> 赞同：4
> 
> 时间：2009-05-06T16:26:17.873
> 
> 标签：perl, security, post, formmail

我的托管公司说，当使用 Apache/HTTP POST 到 CGI-Bin Perl 脚本（例如[NMS FormMail](http://nms-cgi.sourceforge.net/scripts.shtml)）。

他们说发生核心转储时，可以在服务器上运行任意脚本（存储为输入字段文本的一部分），这可能会危及站点。他们说这不是他们可以在他们的 Apache/Perl 配置中保护的东西——由 Perl 脚本通过限制发布字段中的字符数来防止这种情况。但似乎核心转储可能会在脚本限制字段大小之前发生。

这种类型的联系表格和方法被成千上万的网站广泛使用，所以我想知道他们所说的是否属实。你们那里的安全专家能启发我吗？这是真的吗？我也想知道 PHP 脚本是否会发生同样的事情。对于安全的站点联系脚本/方法，您有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T16:31:28.003

我不确定缓冲区溢出，但无论如何限制 POST 大小也无妨。只需在脚本顶部添加以下内容：

```
use CGI qw/:standard/;
$CGI::POST_MAX=1024 * 100;  # max 100K posts
$CGI::DISABLE_UPLOADS = 1;  # no uploads 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T14:03:58.833

您绝对应该向您的托管公司询问具体信息。里面有很多不相关的说法。

“缓冲区溢出”和“资源问题”是完全不同的事情。缓冲区溢出表明您将导致 perl 或 mod_perl 或 httpd 本身崩溃。如果是这种情况，那么这些组件之一中存在错误，他们应该引用有问题的错误并提供他们何时应用安全更新的时间表。这样的错误肯定会导致 Bugtraq。

另一方面，资源问题是完全不同的事情。如果我在我的 POST 中向您发送许多兆字节，那么我可以吃掉任意数量的内存。这可以通过在 httpd.conf 中配置 LimitRequestBody 指令来解决。默认为无限制。这必须由托管服务提供商设置。

> 他们说发生核心转储时，可以在服务器上运行任意脚本（存储为输入字段文本的一部分），这可能会危及站点。他们说这不是他们可以在他们的 Apache/Perl 配置中保护的东西——由 Perl 脚本通过限制发布字段中的字符数来防止这种情况。但似乎核心转储可能会在脚本限制字段大小之前发生。

同样，如果这是在 httpd（或）中创建核心转储`mod_perl`，那么它表示 httpd（或`mod_perl`）中的错误。Perl 的动态和垃圾回收内存管理原则上不受缓冲区溢出或坏指针的影响。这并不是说 perl 本身的错误不会导致这种情况，只是 perl 语言本身不具备以这种方式导致核心转储所需的语言特性。

当您的脚本可以访问数据时，要阻止此处描述的任何事情都为时已晚。您的脚本当然有其自身的安全问题，并且有很多方法可以诱骗 perl 脚本运行任意命令。没有太多方法可以让它们以这里描述的方式跳转到任意内存位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T18:53:28.207

要求他们为您提供对该漏洞的具体参考。我确信有些版本的 Apache 可能会通过特制的 POST 请求导致缓冲区溢出，但我不知道任何特定于 NMS FormMail 的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T10:18:08.813

Formail 过去很容易受到此类攻击，因此我相信您的 ISP 正在使用它来说明。任何 perl 脚本中的不良做法都可能导致这样的灾难。

如果可能，我建议确保 perl 脚本验证所有用户输入。否则，请仅使用受信任的脚本并确保它们保持更新。

# php - 如何计算每页使用的 MySQL 查询总数？

> ID：830489
> 
> 赞同：7
> 
> 时间：2009-05-06T16:28:30.990
> 
> 标签：php, mysql, count

PHP 或 MySQL 中是否有内置函数可以提供页面上使用的 MySQL 查询总数？我在很多网站（主要是论坛）上看到他们在底部有一条消息，上面写着“页面在 0.6 秒内生成，有 20 个查询”。

如果没有内置任何东西，那么我会在我的数据库类中添加一些东西来计算它们，但它似乎是已经可用的那种功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T16:39:56.547

选项一是通过包装器传递所有查询：

```
function custom_mysql_query($sql)
{
    $GLOBAL['query_count'] ++;
    return mysql_query($sql);
} 
```

请注意，这仅用于说明，没有错误处理等。

您可以查询 MySQL 查询运行的数量：

```
mysql> SHOW STATUS LIKE 'Com_select';
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| Com_select    | 2     | 
+---------------+-------+
1 row in set (0.00 sec) 
```

您可能想要执行以下操作：

```
SHOW STATUS LIKE 'Com_%'; 
```

然后将 Com_select、Com_update、Com_insert 和 Com_delete 相加

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T16:31:50.297

我所做的是创建一个计数的 sql 查询类，每次运行类中的查询方法时，它都会将 1 添加到一个名为 querycount 的变量中，这样我就有了一个运行总数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T16:29:53.420

PHP 的原生 mysql/mysqli 扩展中没有内置任何内容。如果您使用的是数据库抽象层，则可能会内置某种类型的分析/基准测试来为您提供该信息。

顺便说一下，我知道[Kohana使用](http://kohanaphp.com/)[Profiler](http://docs.kohanaphp.com/libraries/profiler)库来做到这一点。我会假设大多数框架的数据库库都做类似的事情。

如果您对使用第 3 方框架或数据库抽象层犹豫不决，我通过简单地继承 PHP5 的内置[PDO](http://us3.php.net/pdo)类已经取得了成功。您可以添加一些基本的基准测试信息和查询计数，并将`query()`or`execute()`调用传递给父类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-01T17:00:08.363

为了避免全局变量，在您的 db 类中：

```
class db {
    public static $query_count = 0;

    public static function query($str) { 
        self::$query_count++;
        // your db query method here
    }
} 
```

然后只需像这样访问您的静态查询计数：

```
<?= db::$query_count ?> 
```

# visual-studio-2008 - 如何关闭 Visual Studio 2008 脚本调试

> ID：830497
> 
> 赞同：7
> 
> 时间：2009-05-06T16:30:20.940
> 
> 标签：visual-studio-2008, internet-explorer, script-debugging

如果我使用 Visual Studio 2008 和 Internet Explorer 启动 ASP.NET 项目，Visual Studio 将启动脚本调试。我得到一个带有 Windows Internet Explorer 子节点和 Default.aspx 子节点的 Script Documents 节点，下面有一个不计其数的匿名代码节点。

除了告诉 VS 在 FireFox 中启动应用程序之外，我很难关闭它。我四处搜索并找到了在 Internet Explorer 中关闭脚本调试的解决方案，但这对我来说没有任何改变。

有没有人找到解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T16:34:29.570

禁用所有脚本调试：

*   打开一个新的命令提示符（开始->运行，cmd.exe）。**如果您使用的是 64 位计算机，这需要是 32 位提示符**（开始->运行，c:\windows\syswow64\cmd.exe）
*   注册添加 HKLM\SOFTWARE\Microsoft\VisualStudio\9.0\AD7Metrics\Engine\{F200A7E7-DEA5-11D0-B854-00A0244A1DE2} /v ProgramProvider /d {4FF9DEF4-8922-4D02-9379-3FFA64D1D639} /f

如果您使用的是 Visual Web Developer Express，请将“VisualStudio”替换为“VWDExpress”：

*   注册添加 HKLM\SOFTWARE\Microsoft\VWDExpress\9.0\AD7Metrics\Engine\{F200A7E7-DEA5-11D0-B854-00A0244A1DE2} /v ProgramProvider /d {4FF9DEF4-8922-4D02-9379-3FFA64D1D639} /f

如果要恢复计算机以便再次调试脚本：

*   注册添加 HKLM\SOFTWARE\Microsoft\VisualStudio\9.0\AD7Metrics\Engine\{F200A7E7-DEA5-11D0-B854-00A0244A1DE2} /v ProgramProvider /d {170EC3FC-4E80-40AB-A85A-55900C7C70DE} /f

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T16:34:25.233

您是否选中了 IE 中的两个框以禁用脚本调试：

禁用脚本调试 (Internet Explorer)

禁用脚本调试（其他）

此外，请确保在进行更改后关闭所有 IE 实例。然后再次尝试使用 VS 进行调试。

更新：我自己试过了，这个解决方案不起作用。

Update2：重新启动后仍然无法正常工作

终于[从这里](http://blogs.msdn.com/greggm/archive/2009/04/06/disabling-script-debugging-in-vs-2008-ie8.aspx)找到了一个可能的解决方案。显然这是一个已知问题，解决方法是安装 silverlight 工具并告诉 Web 项目调试 silverlight（调试器显然无法调试 silverlight 和脚本）。

确认：Silverlight 工具解决方案确实有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T17:02:52.060

因为这是一个已知问题，并且可能的解决方法是安装 Silverlight 工具，所以我决定最好的解决方案是放弃 Internet Explorer 8 并在 FireFox 中启动我的网站。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-06T16:32:53.053

可以肯定的是，它是一个 IE 选项，需要重新启动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T16:34:28.667

在 IE 中，转到 Internet 选项 -> 高级选项卡，然后选中禁用脚本调试 (Internet Explorer)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T16:34:31.957

在 Internet Explorer 中：工具 -> Internet 选项 -> 高级选项卡 -> 禁用脚本调试

![Internet 选项屏幕截图](https://lh6.ggpht.com/_1RtF2lqDv2g/SgG8fkOaY4I/AAAAAAAAFag/k3fbY7fYOvI/s800/script.jpg "用于禁用脚本调试的对话框。")

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-06T16:35:52.297

您是否尝试过右键单击该文件并选择“在浏览器中查看”以查看是否遇到相同的错误？如果您确定它当然没有错误，则此方法避免了调试代码的需要。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-06T16:40:34.067

在 Visual Studio 中，转到工具 > 选项。确保选中“显示所有设置”。

![Visual Studio 工具选项](https://lh6.ggpht.com/_C8KzYtJdsqU/SgHIlZxHZyI/AAAAAAAAAfw/xBHIZ3AVZ9c/VSOptions.jpg)

它在调试部分

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-16T08:38:58.073

这个对我有用。

此解决方法需要安装适用于 Visual Studio 2008 SP1 的 Silverlight 2 工具。因此，如果您没有安装这些工具，您可以从 Microsoft ( [http://www.microsoft.com/downloads/details.aspx?familyid=C22D6A7B-546F-4407-8EF6-D60C8EE221ED&displaylang=en](http://www.microsoft.com/downloads/details.aspx?familyid=C22D6A7B-546F-4407-8EF6-D60C8EE221ED&displaylang=en) ) 下载它们。如果这不适合您，那么在这篇博文的底部有一些替代解决方法。右键单击您的项目并打开项目属性转到“开始选项”表，然后单击屏幕底部的“Silverlight”按钮。因为调试器不能同时调试 Silverlight 代码和脚本代码，这将禁用脚本调试，从而避免该问题。

[http://blogs.msdn.com/greggm/archive/2009/04/06/disabling-script-debugging-in-vs-2008-ie8.aspx](http://blogs.msdn.com/greggm/archive/2009/04/06/disabling-script-debugging-in-vs-2008-ie8.aspx)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-22T14:26:57.837

按照以下步骤操作 Visual Studio 2008

1)

```
32Bit: start->run, cmd.exe
64Bit: start->run, c:\windows\syswow64\cmd.exe 
```

2）运行此命令：

一种。关闭：

```
reg add HKLM\SOFTWARE\Microsoft\VisualStudio\9.0\AD7Metrics\Engine\{F200A7E7-DEA5-11D0-B854-00A0244A1DE2} /v ProgramProvider /d {4FF9DEF4-8922-4D02-9379-3FFA64D1D639} /f 
```

湾。打开：

```
reg add HKLM\SOFTWARE\Microsoft\VisualStudio\9.0\AD7Metrics\Engine\{F200A7E7-DEA5-11D0-B854-00A0244A1DE2} /v ProgramProvider /d {170EC3FC-4E80-40AB-A85A-55900C7C70DE} /f 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-10-22T22:15:56.053

IE/ASP 调试器快把我逼疯了，因为启动 Office 加载项项目实际上需要几分钟时间。

“禁用脚本调试”无效。注册表也没有被破解，并且安装 Silverlight 工具充其量是令人不快的，假设它会起作用。

答案实际上很简单：在 Web 项目的 Project Properties 窗格中，在“Web”选项卡下，转到“Debuggers”并取消选中 ASP.Net。

您可能还会发现使用 CTRL-F5“不调试就开始”对我的 Office 加载项项目很有帮助。或者，您可以在“多个启动项目”设置中设置“不调试就启动”。

希望这对其他人有所帮助。

# blackberry - 关于创建黑莓网络和本机应用程序的任何好的教程？

> ID：830502
> 
> 赞同：3
> 
> 时间：2009-05-06T16:31:46.613
> 
> 标签：blackberry

创建黑莓应用程序的教程似乎受到严重限制。即使在黑莓网站上，样本也不是很好。我想了解如何使用文本框、下拉菜单和按钮等表单对象构建用户界面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-08T14:45:26.283

我强烈推荐 RIM 的 Blackberry 开发人员资源。关于这两个主题的一些非常可靠的文档。

**Java 开发**
[http://na.blackberry.com/eng/developers/javaappdev/learningresources/](http://na.blackberry.com/eng/developers/javaappdev/learningresources/)

**网页开发**
[http://na.blackberry.com/eng/developers/browserdev/learningresources.jsp](http://na.blackberry.com/eng/developers/browserdev/learningresources.jsp)

对于这两个链接，请查看知识库和参考文档。我想添加更多的直接链接，但是 RIM 的站点有很多肮脏的用户实例特定的 URL（因此进行了编辑）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-09T05:28:41.447

[http://supportforums.blackberry.com/rim/board/message?board.id=java_dev&thread.id=13264](http://supportforums.blackberry.com/rim/board/message?board.id=java_dev&thread.id=13264)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-24T21:33:14.397

BlackBerry 10 应用程序开发视频教程：http: [//udemy.com/blackberry-10-app-development](http://udemy.com/blackberry-10-app-development)

# java - CXF 中是否有办法禁用 SoapCompressed 标头以进行调试？

> ID：830508
> 
> 赞同：1
> 
> 时间：2009-05-06T16:32:45.893
> 
> 标签：java, soap, cxf

我正在使用[DonsProxy](http://donsproxy.sourceforge.net/)观看 CXF 服务流量，并且 CXF 客户端发送一个 HTTP 标头“SoapCompressed”：

```
HttpHeadSubscriber starting...
Sender is CLIENT at 127.0.0.1:2680
Packet ID:0-1
POST /yada/yada HTTP/1.1
Content-Type: text/xml; charset=UTF-8
SoapCompressed: true
Accept-Encoding: gzip,gzip;q=1.0, identity; q=0.5, *;q=0
SOAPAction: ""
Accept: */*
User-Agent: Apache CXF 2.2
Cache-Control: no-cache
Pragma: no-cache
Host: localhost:9090
Connection: keep-alive
Transfer-Encoding: chunked 
```

我想在我的开发环境中关闭 SoapCompressed，这样我就可以在线上看到 SOAP。我搜索了 Google 并 grepped 了 CXF 源代码，但在引用此的文档或代码中看不到任何内容。知道如何让客户端发送“SoapCompressed：off”，而不是通过 Apache HTTPD 等路由它吗？换句话说，有没有办法在 CXF 客户端配置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T17:01:40.340

CXF 代码库的 grep 根本不会产生“SoapCompressed”。我真的不认为是 CXF 发送的。Accept-Encoding 也值得怀疑，因为只有在启用 GZIP 拦截器时才会发送。您正在使用的代理是否有可能正在添加它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T07:24:57.043

org.apache.cxf.jaxrs.client.AbstractClient 的客户端具有您在键值映射 (Map) 中设置标头的位置。“SoapCompressed”，“假”。

# c# - WPF 焦点问题

> ID：830510
> 
> 赞同：1
> 
> 时间：2009-05-06T16:32:50.357
> 
> 标签：c#, wpf, focus

我有处理我的控件的 LostFocus 事件的代码。它验证该值，并且在某些情况下将启用后续控制。例如，可能有一个允许用户选择国家/地区的 ComboBox。随后的 ComboBox 允许用户选择一个状态。如果当前选择的国家不是美国，则禁用状态组合框。如果用户选择“USA”，然后在组合框中跳出选项卡，LostFocus 代码将启用状态 ComboBox。但是，State ComboBox 没有获得焦点，而是焦点转到 State ComboBox 后面的控件。

我尝试使用 PreviewLostKeyboardFocus 来处理事件，但没有成功。对于想办法破解 WPF 来完成这项工作，我有点不知所措。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T16:39:44.253

我猜正在发生的事情是它确定了在 LostFocus 事件触发之前要切换到的控件，从而跳过了 State 组合框，因为它被禁用了。这是有关[焦点如何在 WPF](http://msdn.microsoft.com/en-us/library/aa969768.aspx)中工作的信息。您要做的是在您的处理程序中，确定它是否应该接下来进入状态组合框，并通过[FocusManager](http://msdn.microsoft.com/en-us/library/system.windows.input.focusmanager.aspx)类以编程方式聚焦该元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T16:41:19.913

尝试验证数据何时更改，而不是 UI。您可以添加从绑定更新属性时将触发的验证规则。然后您可以使用样式触发器来激活相关控件。 [检查这篇文章](http://blog.falafel.com/2008/07/29/ValidatingInputOfDataboundControlsInWPFWithValidationRules.aspx)它应该有帮助。

# jquery - $.ajax 不返回数据

> ID：830520
> 
> 赞同：1
> 
> 时间：2009-05-06T16:34:56.840
> 
> 标签：jquery, asp.net-mvc

我正在尝试将数据发布回服务器并取回数据集。相反，我得到的是整个页面的 HTML，并且*它*没有启动控制器中的操作。是的 - JQuery 仍然让我感到困惑。

我目前拥有的代码是：

```
function updateNavIndex(pageIndex) {
    var filters = $("form").serialize();
    var productGroup = $("#valProductGroup").attr('title');
    var productType = $("#valProductType").attr('title');
    var itemsPerPage = $("#ItemsPerPage").val();

    $.ajax({ path: "/CatalogAjaxController/UpdateNavigation"
          , type: "POST"
          , data: "{ productGroup: " + productGroup + ", productType: " + productType + ", itemsPerPage: " + itemsPerPage + ", pageIndex: " + pageIndex + ", filters: " + filters + "}"
          , success: function(data) { handleMenuData(data); }
    });
    $.ajax({ path: "/CatalogAjaxController/UpdateProducts"
          , type: "POST"
          , data: "{ productGroup: " + productGroup + ", productType: " + productType + ", itemsPerPage: " + itemsPerPage + ", pageIndex: " + pageIndex + ", filters: " + filters + "}"
          , success: function(data) { handleProductData(data); }
    });
} 
```

回调函数正在跳闸，函数定义如下所示：

```
function handleMenuData(data) {
    $("#navigation ul").remove();
    } 
```

此时“数据”变量中包含页面 HTML。（就像我说的那样，Action 没有触发。）我认为我不应该直接调用 $ajax 函数，而是使用 var 函数定义。就像是：

```
var retrieveMenuData = function(path, productGroup, productType, itemsPerPage, pageIndex, filter, fnHandleCallback) {
    $.ajax( path
          , type
          , { productGroup: productGroup, productType: productType, itemsPerPage: itemsPerPage, pageIndex: pageIndex, filter: filter }
          , function(data) { fnHandleCallback(data); });
}; 
```

我不确定我是否正确定义了它或如何正确调用它。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T16:42:07.477

解决方案可能非常简单。

你正在使用`path:`它应该有的地方`url:`

来源：[jQuery.ajax 选项列表](http://docs.jquery.com/Ajax/jQuery.ajax#options)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T16:47:12.037

此外，你有一些奇怪的引号在那里.. 的语法`data:`更像是这样的：

```
$.ajax({
    type: "POST",
    url: "bin/login.php",
    data:{data1: var1,data2: var2},
    success: function(data) {
        }
     }); 
```

# c# - 动态类创建

> ID：830538
> 
> 赞同：1
> 
> 时间：2009-05-06T16:39:53.020
> 
> 标签：c#, .net, dynamic-data

我们有一个数据层，其中包含由数据库的输出（表/视图/procs/函数）生成的类。数据库中的表是规范化的，其设计类似于 OOP 设计（“发票”表与“文档”表具有 1:1 关系，“发票项”表与“文档项”表具有 1:1 关系“等...”。所有对/从数据库的访问都是通过存储过程（也适用于简单表）。

典型的类看起来像（很快）：

```
public class DocumentItem {
    public Guid? ItemID { get; set; }
    public Guid? IDDocument { get; set; }
    public DateTime? LastChange { get; set; }
}

public class InvoiceItem : DocumentItem {
    public Guid? IDProduct { get; set; }
    public decimal? Price { get; set; }
} 
```

问题是，数据库表的关系类似于 OOP 中的多重继承。现在我们为每个数据库输出创建一个新类。但是每个数据库输出都是数据库中“纯”表的组合。

理想的解决方案是（恕我直言）将类转换为接口，使用接口的多个实现，然后自动实现成员（这个“表类”只有属性，属性的主体总是相同的）。

例如：公共接口 IItem { Guid? 项目 ID { 获取；放; } 约会时间？上次更改 { 获取；放; } }

```
public interface IDocumentItem : IItem {
    Guid? IDDocument { get; set; }
}

public interface IItemWithProduct : IItem {
    Guid? IDProduct { get; set; }
}

public interface IItemWithRank : IItem {
    string Rank { get; set; }
}

public interface IItemWithPrice : IItem {
    decimal? Price { get; set; }
}

// example of "final" item interface
public interface IStorageItem : IDocumentItem, IItemWithProduct, IItemWithRank { }

// example of "final" item interface
public interface IInvoiceItem : IDocumentItem, IItemWithProduct, IItemWithPrice { }

// the result should be a object of class which implements "IInvoiceItem"
object myInvoiceItem = SomeMagicClass.CreateClassFromInterface( typeof( IInvoiceItem ) ); 
```

该数据库包含大量表，整个解决方案由动态加载的模块（100 多个模块）组成。

您认为什么是最好的方法，如何处理？

**编辑：**

使用部分类是一个很好的提示，我们解决方案中的芽不能使用，因为“IDocumentItem”和“IItemWithPrice”（例如）在不同的程序集中。

现在，如果我们在“DocumentItem”表中进行更改，我们必须在所有依赖程序集中重新生成源代码。几乎没有重用（因为不能使用多重继承）。如果有几十个依赖程序集，它会非常耗时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T21:33:49.337

我认为从数据库模式自动生成域模型是个坏主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-07-28T18:14:15.153

如果您希望继续从数据库自动生成并希望对多重继承进行建模，那么我认为您的想法是正确的：更改工具以输出具有多重继承的接口，以及 X num 实现。

您在其他地方指出了继承与聚合的约定，并且（据我了解）您确切知道生成的接口和类的外观。我知道业务规则在其他地方实现（可能在业务规则引擎中？），因此重新生成类不需要更改依赖代码，除非您想利用这些更改，或者现有属性已被更改或删除。

但你不会完成的。您的类仍将具有相关实体的 id。如果您想让客户端代码更容易，您应该引用相关实体（不关心相关实体的 ID），如下所示：

```
public class Person{
    public Guid? PersonID { get; set; }
    public Person Parent { get; set; }
} 
```

这将使客户端的事情变得更容易。当您考虑时，从 ID 到引用是您无论如何都必须做的工作；最好在中间层做一次，而不是让客户做 N 次。另外，这使您的代码不那么依赖数据库。

所以最重要的是，我建议为自动生成的类编写一个 OO 包装器。您将针对几乎所有内容针对此 OO 包装器进行编程；只让数据访问层与自动生成的类交互。当然，您不能在数据库中重用继承元数据（我假设是通过约定指定的？），但至少您不会开辟新的道路。

相比之下，您现在拥有的数据模型看起来像一个[贫乏的数据模型](http://martinfowler.com/bliki/AnemicDomainModel.html)或更糟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T21:31:30.030

所以，你真的在​​寻找某种混合技术。当然，我不得不问你为什么不使用 LINQ to Entity Framework 或 NHibernate。O/RM 通过将关系模型映射到可用的数据结构来处理这些问题，这些数据结构具有 API 来支持您在数据库中操作数据所需的所有事务。但我离题了。

如果您真的在寻找一种混合技术来进行动态代码生成，请查看[Mono Project 中的 Cecil](http://www.mono-project.com/Cecil)。这是一个比尝试使用 Reflection.Emit 构建动态类更好的起点。还有其他动态代码生成器，但您可能想从 Cecil 开始，因为文档非常好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T23:47:35.473

我不清楚这种情况。

如果生成了代码，则不需要任何魔法：将一些元数据添加到标记“基本”接口的数据库对象（例如 SQL Server 中的扩展属性），并修改生成模板/工具以考虑这些标记。

如果问题是关于多重继承，那么您对.Net 不走运。

如果生成了代码，您还可以利用部分类和方法（您使用的是 .Net 3.5 吗？）在不同的源文件中生成代码。

如果您需要在运行时生成代码，有很多技术，尤其是 ORM 工具。

现在您可以更明确地说明您的设计背景吗？

# java - 如何解析和解释ant的build.xml

> ID：830541
> 
> 赞同：4
> 
> 时间：2009-05-06T16:40:02.803
> 
> 标签：java, ant, build, classpath

是否有用于读取和 ant build.xml 并从中检索元素的 Ant API？具体来说，我希望能够检索路径元素中的值并能够遍历路径中的所有元素。

我的目的是检索给定路径并确保在清单中正确引用它，以便在产品投入生产时构建和清单匹配。

编辑：关于使用 XML API 的响应（并感谢他们），问题是当前构建的构建文件比这更复杂。即类路径引用不同的类路径并包含它，并且类路径中引用的元素本身定义在属性文件中，因此有太多的 Ant API 无法合理地重新创建。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-06T21:02:54.713

您可以使用`ProjectHelper`该类通过构建文件配置您的项目。如果您要检查的路径包含在引用中，那么您可以通过其 ID 从项目中获取引用。

例如，如果您的 中有这样的东西`build.xml`：

```
<path id="classpath">
    <fileset dir="${basedir}/lib" includes="*.jar"/>
</path> 
```

然后您可以`Path`使用以下代码获取参考：

```
import java.io.File;

import org.apache.tools.ant.Project;
import org.apache.tools.ant.ProjectHelper;
import org.apache.tools.ant.types.Path;

public class Test {
    public static void main(String[] args) throws Exception {    
        Project project = new Project();
        File buildFile = new File("build.xml");
        project.init();
        ProjectHelper.configureProject(project, buildFile);

        Path path = (Path) project.getReference("classpath");
     }
} 
```

请注意，`ProjectHelper.configureProject`在 ant 1.6.2 中已弃用，但在 1.7 中不推荐使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-21T18:04:29.210

有时我们需要在 Ant 脚本中解析 xml 文件以运行 java 文件或读取一些属性值等等。这很容易，我们可以使用名为`<xmlproperty>`. 该标签加载xml文件，并在内部将xml文件的所有值转换为ant属性值，我们可以将这些值用作ant属性。例如

```
<root>
    <properties>
      <foo>bar</foo>
    </properties>
</root> 
```

大致相当于这个到 ant 脚本文件中： `<property name="root.properties.foo" value="bar"/>` 并且你可以用 ${root.properties.foo} 打印这个值。

完整示例： 1\. 创建一个 xml 文件，比如 Info.xml 2\. 创建一个 ant 脚本，比如 Check.xml

信息.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<Students>

  <Student>
    <name>Binod Kumar Suman</name>
        <roll>110</roll>
    <city> Bangalore </city>
  </Student>

</Students> 
```

检查.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Check" default="init">
 <xmlproperty file="Info.xml" collapseAttributes="true"/>

<target name = "init">
  <echo> Student Name :: ${Students.Student.name} </echo>
  <echo> Roll :: ${Students.Student.roll} </echo>
  <echo> City :: ${Students.Student.city} </echo>
</target>

</project> 
```

现在运行这个 (Check.xml) ant 脚本后，你会得到输出

构建文件：C:\XML_ANT_Workspace\XML_ANT\src\Check.xml 初始化：[echo] 学生姓名 :: Binod Kumar Suman [echo] Roll :: 110 [echo] City :: Bangalore BUILD SUCCESSFUL 总时间：125 毫秒

到这里为止非常简单，但是如果您在 xml (StudentsInfo.xml) 中有多个记录，那么它将显示所有记录，并以逗号分隔，如下所示

构建文件：C:\XML_ANT_Workspace\XML_ANT\src\Check.xml 初始化：[echo] 学生姓名 :: Binod Kumar Suman,Pramod Modi,Manish Kumar [echo] Roll :: 110,120,130 [echo] City :: Bangalore,Japan,Patna构建成功总时间：109 毫秒

[关联](http://binodsuman.blogspot.com/2009/06/how-to-parse-xml-file-in-ant-script.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T16:53:48.543

我认为没有可用的 API，但由于您只对一个特定元素感兴趣，您可以编写一个仅提取路径元素并检查它们的脚本。python 中的 SAX 解析器应该很容易做到这一点。

```
from xml.sax import make_parser
from xml.sax.handler import ContentHandler 

def PathHandler(ContentHandler):
    def __init__(self):
        self._reading_path = False
        self._path = ""

    def start_element(self, name, attrs):
        if name == "path":
            self._reading_path = True

    def characters(self, ch):
        if self._reading_path:
            self._path += ch

    def end_element(self, name):
        if name == "path":
            self._reading_path = False
            #self._path is now populated with the contents of the path element

    @property
    def path(self):
        return self._path

handler = PathHandler()
parser = make_parser()
parser.setContentHandler(handler)
parser.parse("build.xml") 
```

这将读取两个 xml 元素之间的任何文本节点。它应该很容易定制以满足其他简单的 XML 解析要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T16:57:57.377

如果您只想检索特殊元素，请使用 Java XML API。

# c - LD_LIBRARY_PATH

> ID：830542
> 
> 赞同：3
> 
> 时间：2009-05-06T16:40:09.450
> 
> 标签：c

我可以为单个应用程序设置 LD_LIBRARY_PATH 吗？我正在调查系统调用失败，那么有什么方法可以使用 LD_LIBRARY_PATH 设置设置正确的路径吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-06T16:43:52.747

最简单的方法是创建一个 shell 脚本。

让 shell 脚本导出您的新 LD_LIBRARY_PATH 变量，然后启动您的应用程序

例如（其中 foo 是您的应用程序）

```
#!/bin/sh
LD_LIBRARY_PATH=some_path:$LD_LIBRARY_PATH
export LD_LIBRARY_PATH
foo 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-06T17:19:18.747

很简单：

```
LD_LIBRARY_PATH=new_path:$LD_LIBRARY_PATH foo 
```

在 bash 中有效。我*认为*它适用于所有 bourne shell 衍生产品，但我不能保证。

当然，使用这种方法，您必须*每次*都键入路径。要反复做，更喜欢[格伦的方法](https://stackoverflow.com/questions/830542/ldlibrarypath/830559#830559)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-07T04:24:42.377

需要注意的一点：您不能`LD_LIBRARY_PATH`在程序中进行设置并使其对当前程序产生任何影响。这是因为动态加载器（`ld.so.1`或类似名称）已经加载，并且在运行任何代码之前已经读取并处理了环境变量。您可以在当前进程的环境中设置它，然后该值将影响任何子进程，并且您可以使用`exec()`函数系列之一来运行具有该环境集的程序。在极端情况下，您可以重新执行当前程序 - 但这是*极端*的！

# windows - 当第二个屏幕不可见时，将窗口从第二个屏幕移动到主屏幕

> ID：830547
> 
> 赞同：21
> 
> 时间：2009-05-06T16:41:51.427
> 
> 标签：windows

我使用 VPN 和 Windows 远程桌面从我的 Win Vista 64 家庭计算机登录到我的 Windows XP 工作计算机。唯一的问题是，我有时会在下班时忘记将所有重要的窗口移到主屏幕上。有谁知道我可以将窗户移到主窗口而看不到它们的方法？到目前为止，我知道如何做到这一点的唯一方法是关闭它们并重新打开，这对于已经运行了多个小时的测试来说不是一个选项。

我在网上看到了一些非免费的桌面管理工具，但我不想花钱来解决这么简单的问题。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-05-06T16:51:32.387

右键单击任务栏中的窗口，选择移动并使用箭头键移动窗口。

或者，您可以在窗口处于焦点时按 Alt + Space 以显示与移动相同的菜单。

无法最大化窗口以移动，但您可以使用相同的菜单恢复它。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-17T06:55:36.903

在 Windows 7 上，启动任务管理器，选择“应用程序”选项卡，选择任务，用鼠标右键单击，然后执行： 1\. 最小化。2.最大化。

在我的例子中，它把已经打开到第二个桌面上的寡妇带到了主桌面上。

# iphone - 将（大）数字“12345”格式化为“12,345”

> ID：830553
> 
> 赞同：9
> 
> 时间：2009-05-06T16:42:43.530
> 
> 标签：iphone, c, objective-c, formatting, numbers

假设我有一个大数字（整数或浮点数），例如**12345**，我希望它看起来像**12,345**。

**我将如何做到这一点？**

我正在尝试为 iPhone 应用程序执行此操作，因此 Objective-C 或 C 中的某些内容会很好。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-06-22T05:59:03.863

这是答案。

```
 NSNumber* number = [NSNumber numberWithDouble:10000000];
  NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
  [numberFormatter setNumberStyle:kCFNumberFormatterDecimalStyle];
  [numberFormatter setGroupingSeparator:@","];
  NSString* commaString = [numberFormatter stringForObjectValue:number];
  [numberFormatter release];
  NSLog(@"%@ -> %@", number, commaString); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-05-06T16:47:20.943

尝试使用[NSNumberFormatter](http://developer.apple.com/iphone/library/documentation/Cocoa/Conceptual/DataFormatting/Articles/dfNumberFormatting10_4.html)。

这应该允许您在 iPhone 上正确处理此问题。不过，请确保使用 10.4+ 样式。从该页面：

“iPhone OS：iPhone OS 上没有 v10.0 兼容模式，只有 10.4 模式可用。”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-07T04:07:57.203

至少在 Mac OS X 上，您可以只使用带有 printf(3) 的“'”字符串格式化程序。

$ man 3 printf

```
 `''          Decimal conversions (d, u, or i) or the integral portion
                  of a floating point conversion (f or F) should be
                  grouped and separated by thousands using the non-mone-
                  tary separator returned by localeconv(3). 
```

如 printf("%'6d",1000000);

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T18:37:38.887

更清洁的 C 代码

```
// write integer value in ASCII into buf of size bufSize, inserting commas at tousands
// character string in buf is terminated by 0.
// return length of character string or bufSize+1 if buf is too small.
size_t int2str( char *buf, size_t bufSize, int val )
{
    char *p;
    size_t len, neg;

    // handle easy case of value 0 first
    if( val == 0 )
    {
         a[0] = '0';
         a[1] = '\0';
         return 1;
    }

    // extract sign of value and set val to absolute value
    if( val < 0 )
    {
        val = -val;
        neg = 1;
    }
    else
        neg = 0;

    // initialize encoding
    p = buf + bufSize;
    *--p = '\0';
    len = 1;

    // while the buffer is not yet full
    while( len < bufSize )
    {
         // put front next digit
         *--p = '0' + val % 10;
         val /= 10;
         ++len;

         // if the value has become 0 we are done
         if( val == 0 )
             break;

         // increment length and if it's a multiple of 3 put front a comma
         if( (len % 3) == 0 )
             *--p = ',';
   }

   // if buffer is too small return bufSize +1 
   if( len == bufSize && (val > 0 || neg == 1) )
       return bufSize + 1;

   // add negative sign if required
   if( neg == 1 )
   {
       *--p = '-';
       ++len;
   }

   // move string to front of buffer if required
   if( p != buf )
       while( *buf++ = *p++ );

   // return encoded string length not including \0
   return len-1;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-06T19:50:10.927

我最近为 iPhone 游戏做了这个。我使用的是内置 LCD 字体，这是一种等宽字体。我格式化了数字，忽略了逗号，然后将逗号插入。（计算器这样做的方式，逗号不被视为字符。）

查看[RetroJuJu](http://www.retrojuju.com)的截图。抱歉——它们不是全尺寸的截图，所以你必须眯着眼睛！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T17:59:30.960

希望对您有所帮助（它在 C 中）：

```
char* intToFormat(int a)
{
    int nb = 0;
    int i = 1;
    char* res;

    res = (char*)malloc(12*sizeof(char));
    // Should be enough to get you in the billions. Get it higher if you need
    // to use bigger numbers.

    while(a > 0)
    {
        if( nb > 3 && nb%3 == 0)
            res[nb++] = ',';

        // Get the code for the '0' char and add it the position of the
        // number to add (ex: '0' + 5 = '5')
        res[nb] = '0' + a%10;

        nb++;
        a /= 10;
    }

    reverse(&res);
    return res;
} 
```

可能有一些我没有看到的错误（我对此一无所知......）它就像一个增强的 iToA，所以它可能不是最好的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-07T11:04:28.747

使用递归，卢克：

```
#include <stdio.h>
#include <stdlib.h>

static int sprint64u( char* buffer, unsigned __int64 x) {
  unsigned __int64 quot = x / 1000;
  int chars_written;
  if ( quot != 0) {
    chars_written = sprint64u( buffer, quot);
    chars_written += sprintf( buffer + chars_written, ".%03u", ( unsigned int)( x % 1000));
  }
  else {
    chars_written = sprintf( buffer, "%u", ( unsigned int)( x % 1000));
  }
  return chars_written;
}
int main( void) {
  char buffer[ 32];
  sprint64u( buffer, 0x100000000ULL);
  puts( buffer);
  return EXIT_SUCCESS;
} 
```

# ruby-on-rails - 如何检查 Rails 应用程序控制器中是否存在方法？

> ID：830563
> 
> 赞同：0
> 
> 时间：2009-05-06T16:44:42.650
> 
> 标签：ruby-on-rails, methods

在我的应用程序控制器中，我有一个方法应该检查子类控制器中是否存在另一个方法来设置下载文件的文件名，但是我无法使其正常工作

我试过了

```
def filename
  begin
    send "filename_method"
  rescue NoMethodError
    default_filename
  end
end 
```

和

```
def filename
 if respond_to?("filename_method")
  send "filename_method"
 else
  default_filename
 end
end 
```

但两者总是返回 default_filename，即使在子类控制器中定义了 filename_method。有人可以在这里指出我正确的方向吗？

谢谢，

-C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T17:39:09.167

我猜这是因为控制器超类不知道子类方法的存在。`methods`您可以通过检查子类的数组来确认这一点。

似乎解决方案是重新考虑您的设计。无需检查 是否存在`filename_method`，只需在基方法中提供默认文件名行为`filename`并覆盖`filename`子类中的方法以提供自定义文件名功能。

例如，在您的超类中：

```
def filename
  # return default file name 
end 
```

在你的子类中：

```
def filename
  # return custom file name 
end 
```

# batch-file - 如何在启动/调用批处理文件时检查是否定义了参数？

> ID：830565
> 
> 赞同：109
> 
> 时间：2009-05-06T16:45:11.573
> 
> 标签：batch-file, arguments

我正在尝试在批处理文件中使用以下验证逻辑，但即使没有向批处理文件提供参数，“使用”块也不会执行。

```
if ("%1"=="") goto usage

@echo This should not execute

@echo Done.
goto :eof

:usage
@echo Usage: %0 <EnvironmentName>
exit 1 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2009-05-06T16:45:37.097

检查是否设置了命令行参数可以`[%1]==[]`，但是，正如[Dave Costa](https://stackoverflow.com/users/6568/dave-costa) [指出的那样](https://stackoverflow.com/questions/830565/how-do-i-check-that-a-parameter-is-defined-when-calling-a-batch-file/830593#830593)，`"%1"==""`也可以。

我还修复了用法 echo 中的语法错误以转义大于和小于符号。此外，`exit`需要一个`/B`参数否则`CMD.exe`将退出。

```
@echo off

if [%1]==[] goto usage
@echo This should not execute
@echo Done.
goto :eof
:usage
@echo Usage: %0 ^<EnvironmentName^>
exit /B 1 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-01-01T01:42:51.793

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-05-06T16:51:05.380

去掉括号。

示例批处理文件：

```
echo "%1"

if ("%1"=="") echo match1

if "%1"=="" echo match2 
```

运行上述脚本的输出：

```
C:\>echo "" 
""

C:\>if ("" == "") echo match1 

C:\>if "" == "" echo match2 
match2 
```

我认为它实际上是把括号作为字符串的一部分，并且它们正在被比较。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-11-24T16:50:50.790

```
IF "%~1"=="" GOTO :Usage 
```

如果引用了 %1 本身， ~ 将取消引用 %1。

" " 将防止传递的特殊字符。例如使用 &ping 调用脚本

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-12-27T16:13:29.673

这与其他答案相同，但仅使用一个标签并将用法放在首位，这也使其作为脚本的一种文档推荐，通常也位于顶部：

```
@echo off
:: add other test for the arguments here...
if not [%1]==[] goto main
:: --------------------------
echo This command does something.
echo.
echo %0 param%%1 param%%2
echo       param%%1 the file to operate on
echo       param%%1 another file

:: --------------------------
exit /B 1

:main
:: --------------------------
echo do something with all arguments (%%* == %*) here... 
```

但是，如果您不必使用 cmd/batch，在 WSL 或 powershell 上使用 bash，它们的语法更健全，神秘功能更少。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-01T21:52:55.540

```
IF "%1"=="" GOTO :Continue
.....
.....
:Continue
IF "%1"=="" echo No Parameter given 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-26T18:33:42.773

IF "%1"=="" 将失败，在某些有毒字符条件下，所有版本都会失败。只有 IF DEFINED 或 IF NOT DEFINED 是安全的

# windows - VB.NET 定时器问题

> ID：830567
> 
> 赞同：2
> 
> 时间：2009-05-06T16:45:47.297
> 
> 标签：windows, vb.net, windows-services, timer

我写了一个 VB.NET Windows 服务，它工作得很好。我只有一个问题。我希望服务在半小时和小时标记的顶部执行（例如 9:00、9:30、10:00、10:30、11:00 等）。我正在使用以下代码：

```
Protected Overrides Sub OnStart(ByVal args() As String)
    ' Add code here to start your service. This method should set things
    ' in motion so your service can do its work.
    Dim oCallBack As New TimerCallback(AddressOf TimedEvent)
    oTimer = New System.Threading.Timer(oCallBack, Nothing, 300000, 300000)
    EventLog.WriteEntry("CCFinalizeService has begun successfully." , _
                        System.Diagnostics.EventLogEntryType.Information)

End Sub 
```

但是，如果服务在 10:15 开始，则此代码有效，那么它将在 10:15、10:45、11:15、11:45 执行。我如何使它始终在 30 分钟和小时标记上执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T16:49:31.080

您可以更改它，以便在启动时根据当前时间计算出半小时增量所需的时间。基本上，您的第一个计时器将是 <300000，然后切换到每 300000。

或者，您可能要考虑使用[Windows 任务计划程序](http://support.microsoft.com/kb/308569)，而不是将其作为服务执行。任务调度程序允许您指定运行应用程序的特定时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T16:50:30.360

可能最简单的解决方案是在服务启动时通过 Date.Now 属性测试当前时间。然后，您可以使用第二个计时器启动第一个计时器，但将第二个计时器的间隔设置为仅在下一个 1/2 小时或整小时标记处触发。

或者，在你的启动例程中，有一个无限的 while 循环来测试当前时间是否在你的标记上。如果没有， System.Threading.Thread.Sleep(1000) 并再次测试。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T16:51:33.557

也许是这样的？？

```
 If Now.Minute <> 0 Or Now.Minute <> 30 Then
    Thread.Sleep((30 - Now.Minute) * 60 * 1000)
 End If 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T17:03:45.053

只需要修改Timer创建方法中的dueTime参数即可

```
Dim now As Date = DateTime.Now
Dim dueTime As Integer ' milliseconds to the next half-hour
dueTime = 1800000 - (now.Minute Mod 30) * 60000 - now.Second * 1000 - now.Millisecond
oTimer = New System.Threading.Timer(oCallBack, Nothing, dueTime, 1800000) 
```

# jquery - 在 jQuery 中一起使用 :visible 和 :first-child

> ID：830569
> 
> 赞同：9
> 
> 时间：2009-05-06T16:45:56.597
> 
> 标签：jquery

我正在尝试在 jQuery 中同时使用 ":visible" 和 ":first-child" 伪选择器，但似乎没有成功。我有以下 HTML：

```
<div>
    <a class="action" style="display:none;">Item One</a>
    <a class="action">Item One</a>
    <a class="action">Item One</a>
</div> 
```

以及以下 jQuery 调用：

```
$("div a.action:visible:first-child").addClass("first"); 
```

但它似乎永远找不到正确的元素......它找到了第一个元素，但没有找到第一个**可见**元素。我什至尝试交换选择器顺序 ":first-child:visible" 而不是 ":visible:first-child" ，但这也不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-06T16:54:20.413

你的选择器

```
$("div a.action:visible:first-child").addClass("first"); 
```

*仅当A*元素是父 DIV 的第一个子元素且可见时才匹配该元素。

如果要获取第一个可见*的 A*元素，则应使用[.eq 函数](http://docs.jquery.com/Traversing/eq#index)

```
$("div a.action:visible").eq(0).addClass("first"); 
```

或[:first 伪类](http://docs.jquery.com/Selectors/first)

```
$("div a.action:visible:first").addClass("first"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T16:53:54.033

我不确定为什么`:visible:first-child`不起作用，但您可以尝试

```
$("div a.action:visible").eq(0).addClass("first"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T16:54:09.570

据我所知，伪类选择器 :first-child 只会匹配第一个孩子。不能通过添加一个伪类来进一步指定它也必须是可见的。你可能想尝试写作

```
$("div a.action:visible:first").addClass("first"); 
```

而不是使用正确的 css 伪类。[用于 :first 的 JQuery 文档](http://docs.jquery.com/Selectors/first)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-06T16:54:35.700

您可能想尝试`$( "div a.action:visible(:first-child))`作为您的选择器，这就是 jQuery 在其 API 文档中指定使用多个伪选择器的方式。

# c++ - 当涉及多个模板类型时，是否可以缩小类和函数之间的朋友关系？

> ID：830573
> 
> 赞同：2
> 
> 时间：2009-05-06T16:46:08.933
> 
> 标签：c++, templates, friend

假设我将一个图像类表示为：

```
template <typename Pixel> class Image { ... }; 
```

我需要自己的交换功能来防止额外复制图像，所以我需要让它成为 Image 的朋友。如果在图像内我写：

```
template <typename T> friend void swap(Image<T>&, Image<T>&); 
```

我得到了我想要的，但它使所有交换函数成为所有 Image 类的朋友。所以我可以缩小朋友关系如下：

```
template <typename Pixel> class Image;
template <typename T> void swap(Image<T>&, Image<T>&);

template <typename Pixel> class Image {
   ...
   friend void swap<>(Image&, Image&);
}; 
```

如[C++ FAQ-lite 35.16](http://www.parashift.com/c++-faq-lite/templates.html#faq-35.16)中所述。

现在假设我还有一个可以采用浮点或整数内核的卷积函数：

```
template <typename Pixel, typename KernelValue>
Image<Pixel> convolve(const Image<Pixel>&, const Kernel<KernelValue>&); 
```

卷积需要访问 Image 的原始内存，所以它也必须是一个朋友。但是，我想*部分缩小*友谊，以便 convolve 是所有 KernelValues 的朋友，但仅限于特定的 Pixel 类型，例如：

```
template <typename KernelValue> friend Image<Pixel> 
    convolve(const Image<Pixel>&, const Kernel<KernelValue>&); 
```

在图像定义中。编译器根本不喜欢这个（或其他变种），主要是因为它与原始函数声明不匹配，因此无法访问私有指针。是否有可能在这里得到我想要的，或者我应该满足于“更友好”的版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T17:16:20.530

据我所知，您不能拥有部分专业化的模板化功能。

您可以制作一个可以部分专门化的**Convolver**结构，然后创建一个包装器来进行卷积。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T14:28:51.800

我看到这种情况发生的唯一方法是在 Image 类中定义函数，如下所示：

```
#include <iostream>
using std::cout;

template <typename Pixel>
struct image
{
    template <typename KernelValue>
    friend image<Pixel> convolve(image<Pixel> const&, image<KernelValue> const&)
    {
            cout << "foo\n";
            return image<Pixel>();
    }
};

int main()
{
    image<int> i;
    image<float> i2;

    convolve(i, i2);
} 
```

# sharepoint - 在 SharePoint MasterPages 中使用资源文件

> ID：830574
> 
> 赞同：0
> 
> 时间：2009-05-06T16:46:28.450
> 
> 标签：sharepoint, master-pages

我无法弄清楚如何在 SharePoint 母版页中使用资源文件 (resx) 中的字符串。

我知道如何将它与服务器控件一起使用，但我可以以某种方式提取一个值并在一般 html 中使用它。即在 img 标签的 alt 属性中？

```
<img src="photo.jpg" alt="my_resource_entry_here" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T18:24:17.810

这里有 2 篇非常好的博客文章，描述了如何使用资源：

*   [http://tomblog.insomniacminds.com/2008/02/25/sharepoint-internals-resources/](http://tomblog.insomniacminds.com/2008/02/25/sharepoint-internals-resources/)
*   [http://www.mikhaildikov.com/2007/03/sharepoint-resources-types-use-and_2163.html](http://www.mikhaildikov.com/2007/03/sharepoint-resources-types-use-and_2163.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T18:59:26.947

我假设你有一个类，它有一个方法可以让你通过键获取资源字符串，例如 MyResources.GetString(key)。在这种情况下，您可以使用以下内容：

```
<img src="photo.jpg" alt='<%=MyResources.GetString("my_resource_key_here")%>' /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-09T13:56:54.827

最简单的方法是将 runat="server" 属性添加到您的 alt 标签。这将解决您的问题，您可以使用“正常”的方式获取资源。否则，使用此语法从 App_Global 资源中的 resx 文件位置获取值：

```
 <img src="photo.jpg" 
alt='<%=this.GetGlobalResourceObject("Global", "Mystring").ToString()%>' 
```

# bandwidth - 从带宽转换为流量会根据运营商的位置给出不同的结果？

> ID：830577
> 
> 赞同：1
> 
> 时间：2009-05-06T16:47:25.267
> 
> 标签：bandwidth, megabyte

这一定是一个愚蠢的问题，但我还是觉得很好奇：

假设我有 128Kbps 的稳定下载。

一小时后将消耗多少磁盘空间（以 MB 为单位）？

128 x 60 x 60 / 8 / 1024 = 56.25 MB

但

128 x 60 x 60 / 1000 /8 = 57.6 MB

那么计算这个的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T16:53:43.393

在一个计算中，您除以 1000，但在另一个计算中，您除以 1024。得到不同的数字应该不足为奇。

当您谈论基于 1024 的版本时，国际电工委员会标准机构正式尝试将“千字节[”作为“千字节”的替代品。](http://en.wikipedia.org/wiki/Kibibytes)但是如果你使用它，人们会嘲笑你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T17:07:15.063

请记住，任何传输都有开销。可能有“丢弃”的数据包等。通常还有一些上行流量，因为您的 PC 确认收到数据包。最后，由于可以乱序接收数据包，因此数据包本身包含“额外”数据，以供所有接收者以正确的顺序重建数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T07:40:57.723

好的，我找到了赛门铁克关于此事的官方解释：http: [//seer.entsupport.symantec.com/docs/274171.htm](http://seer.entsupport.symantec.com/docs/274171.htm)

似乎想法是在计算中尽早从位转换为字节，然后通常的 1024 除法到位。

我只是希望这是一个标准程序，而不是赛门铁克强加的:)。

# javascript - 在同一页面上以 HTML 格式显示 FCKeditor 输入数据，作为用户类型？

> ID：830579
> 
> 赞同：0
> 
> 时间：2009-05-06T16:48:06.980
> 
> 标签：javascript, jquery, fckeditor

我目前正在使用 FCKEditor，并且我正在尝试复制堆栈溢出如何准确地显示您的帖子在您键入时在 HTML 中的外观。我的 FCKEditor 创建得很好，我只是不知道创建后如何访问编辑器数据。我想要做的是从编辑器中获取 html，然后将其放入`<p id="inputText"></p>`. 尝试使用 $("#fckEdtr") 使用 jQuery 访问它不起作用，我希望这是因为它是使用 javascript 动态创建的。我知道 FCKeditor JavaScript API 中的 IsDirty() 方法，但我还没有看到任何关于如何获取编辑器的当前实例并使用该方法的可靠示例。任何人都可以帮忙吗？我的代码如下：

```
<html>
<head>
<title>FCKeditor Test</title>
<script type="text/javascript" src="fckeditor/fckeditor.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript"> 
    $(document).ready(function() {
          ...code to output editor data as user types
    }); 
</script>
</head>
<body>
<form>
<script type="text/javascript">
    var oFCKeditor = new FCKeditor('fckEdtr');
    oFCKeditor.BasePath = "./fckeditor/";
    oFCKeditor.ToolbarSet = 'Default';
    oFCKeditor.Create();
</script><br/><br/>
<input type="submit" value="Post" />
<p id="inputText">
</p>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T19:18:03.093

我刚刚在关于 SO 的另一个问题中找到了答案：

[如何在 ASP.Net 站点中启用 FCKeditor 的实时预览？](https://stackoverflow.com/questions/293854/how-can-i-enable-live-preview-for-fckeditor-in-an-asp-net-site)

此外，当我使用 div 元素而不是段落元素时，它可以工作。这是我对任何可能有帮助的人的最终工作代码：

```
<html>
<head>
<title>FCKeditor - Sample</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="fckeditor/fckeditor.js"></script>
<script type="text/javascript">         
    function FCKeditor_OnComplete( oFCKeditor )
    {  
         oFCKeditor.Events.AttachEvent( 'OnSelectionChange', function() {        
              document.getElementById("postText").innerHTML = 
                    oFCKeditor.GetHTML(true); 
         }) ;
    }
</script>
</head>
<body>
<form method="post" action="process.php">
<script type="text/javascript">
    var oFCKeditor = new FCKeditor('fckEdtr');
    oFCKeditor.BasePath = "./fckeditor/";
    oFCKeditor.ToolbarSet = 'Custom' ;
    oFCKeditor.Create();
</script><br/><br/>
<input type="submit" value="Post" />
<div id="postText">
</div>
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T23:08:13.453

很高兴您已经找到了答案，但我想知道在处理所见即所得编辑器时为什么需要预览窗口。我的猜测是，您在编辑器中获得的外观与结果外观不同，因为后者应用了 CSS。如果我错了，请忽略下面的建议。

如果*是*这种情况，您可能会考虑将 CSS 中最相关的部分复制到 \fckeditor\editor\css\fck_editorarea.css 以便在编辑器窗口中应用它们。当然，有时你确实想要不同。例如，剧透应该在发布时隐藏，但在编辑器中可见。

# linq - 学习 LINQ 的资源？

> ID：830581
> 
> 赞同：15
> 
> 时间：2009-05-06T16:48:19.430
> 
> 标签：linq, linq-to-sql, linq-to-entities, asp.net-3.5

我正在寻找学习 LINQ，但我发现它比我最初期望的要多得多。事实上，有这么多，我不确定从哪里开始最好。我知道有 LINQ to SQL 和 LINQ to Entities 以及许多其他的 LINQ 等等。

哪个是最好的开始？似乎我看到了更多关于 LINQ to SQL 的现成信息，但我也看到了很多关于 LINQ to Entities 的信息。LINQ to Entities 比 LINQ to SQL 更难吗？

另外，我正在寻找一些关于学习 LINQ 的好资源。我已经看到 Scott Gu 有一些关于 LINQ to SQL 的博客，但我正在寻找更多。有没有人对他们印象深刻的 LINQ 书？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-06T17:03:26.960

LINQ Pad 是开始学习的好方法，它也是免费的...

[http://www.linqpad.net/](http://www.linqpad.net/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-06T16:58:42.413

我一直在寻找同样的东西，但我发现真的没有一个地方可以让所有东西都在一起..

但是有一些很好的资源。

LinQ 101 - [http://msdn.microsoft.com/en-us/vcsharp/aa336746.aspx](http://msdn.microsoft.com/en-us/vcsharp/aa336746.aspx)

这个有很多关于如何用许多不同语言做事的小示例片段。它也有一个 linq 部分

[http://www.java2s.com/Code/CSharp/LINQ/CatalogLINQ.htm](http://www.java2s.com/Code/CSharp/LINQ/CatalogLINQ.htm)

我说从 linq to sql 开始，他们不久前就停止了开发，但是语法与 linq to entity 完全一样，linq to entity 和 linq to sql 几乎相同，有一些不同之处，但 id 说从底端” ：）

这是一个关于如何从“linq to sql”跳转到“linq to entity”的非常好的教程 [http://naspinski.net/post/Getting-started-with-Linq-To-Entities.aspx](http://naspinski.net/post/Getting-started-with-Linq-To-Entities.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-06T18:03:22.743

一开始，我发现[标准查询运算符](http://download.microsoft.com/download/5/8/6/5868081c-68aa-40de-9a45-a3803d8134b8/standard_query_operators.doc)(MS Word .doc) 是一个非常宝贵的参考。

Joseph Rattz 的 Pro LINQ 是一本关于该主题的好书，尽管它不包括 LINQ to Entities。

除了每个标准查询运算符的深入示例外，它还涵盖：

*   LINQ 到对象
*   LINQ 转 XML
*   LINQ 到数据集
*   LINQ 到 SQL

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T17:16:50.077

虽然这不是免费的，而且对于初学者来说可能看起来“令人生畏”。但是我发现 Wrox 出版的 Professional LINQ 书作为一本“让你的脚湿透”的书很好。尽管有标题，但我不会将其视为他们专业系列的一部分，并且没有达到应有的深度，但这仍然是一个好的开始。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-07T02:31:07.420

这本书/电子书也很好。非常适合初学者。 [http://www.manning.com/marguerie/](http://www.manning.com/marguerie/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-10-31T12:03:52.510

[这](http://www.pmakesp.com/Topic/TakeQuiz/Language%20Integrated%20Query%2c%20in%20C%23/758)是一个练习它的好网站（还有 c#）。它仍然没有很多问题，但足以让您继续前进（您也可以自己添加问题）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-07T02:22:42.217

个人初学者 LINQ 导师的下一个最好的事情：

[http://www.asp.net/LEARN/linq-videos/](http://www.asp.net/LEARN/linq-videos/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-16T09:02:14.537

学习 LINQ 的另一个好方法是浏览代码示例，如果时间允许，自己尝试一下。

以下是我个人最喜欢的两个 LINQ 资源，它们都有易于理解的代码示例，在我看来非常适合初学者：

[http://linqsamples.com](http://linqsamples.com)

和

[http://www.dotnetperls.com/linq](http://www.dotnetperls.com/linq)

# .net - 在存储过程或客户端代码中循环

> ID：830583
> 
> 赞同：2
> 
> 时间：2009-05-06T16:48:41.487
> 
> 标签：.net, sql-server, tsql, stored-procedures

从效率和最佳实践的角度来看，我很欣赏每个人的想法。

我有一个存储过程，它制作（n）行副本并将行插入必要的表中。

例如。制作库存项目的副本并将副本添加到库存。

我看到这种类型的存储过程有两个选项。

**选项1：**

```
CREATE PROCEDURE CopyInventory
@InventoryID int
AS

BEGIN

INSERT INTO Inventory (fieldOne, fieldTwo, FieldThree)
(SELECT FieldOne, FieldTwo, FieldThree FROM Inventory WHERE InventoryID = @InventoryID)

END 
```

使用选项一，我将在客户端应用程序代码的 while 循环中多次调用存储过程。

**选项 2：**

```
 CREATE PROCEDURE CopyInventory
    @InventoryID int,
    @CopyCount int
    AS

    BEGIN

    DECLARE @counter int

    SET @counter = 0

    WHILE @counter < @CopyCount

    INSERT INTO Inventory (fieldOne, fieldTwo, FieldThree)
    (SELECT FieldOne, FieldTwo, FieldThree FROM Inventory WHERE InventoryID = @InventoryID)

    END
END 
```

使用选项二，我将从客户端应用程序代码中调用一次存储过程，并将复制计数作为参数传递。

选项二对我来说似乎是最好的选择，因为它只导致一个数据库调用。

我感谢您对为什么您更喜欢其中一个或两者都不喜欢以及任何最佳实践建议的想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-06T16:51:53.897

当然是在服务器端进行。

这将为您节省大量客户端和服务器之间的往返。

如果你让你的循环集为基础会更好：

```
WITH hier(cnt) AS
        (
        SELECT  1 AS value
        UNION ALL
        SELECT  cnt + 1
        FROM    hier
        WHERE   cnt < @count
        )
INSERT
INTO    Inventory (fieldOne, fieldTwo, FieldThree)
SELECT  FieldOne, FieldTwo, FieldThree
FROM    hier, Inventory
WHERE   InventoryID = @InventoryID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T16:56:45.663

在这种情况下，我会说在服务器端做。

不过，通常情况下，我会说基于集合的操作应该在服务器端完成——因为这是 SQL Server 特别擅长的，而迭代操作应该在客户端完成，因为这是编译语言擅长的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T16:57:11.310

如果它只是你想要的性能，那么选项 2 就是要走的路。

如果您可以避免保持客户端上的连接打开，那么选择选项 1 有几个原因。

1.  您可以轻松地在应用程序中放置进度条
2.  您可以在循环中间轻松中止进程......就像用户点击取消一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T16:58:41.493

它确实需要分析，但我的第一个想法是服务器端最好。关键是运行循环的数据库引擎的开销是否大于重复客户端-服务器调用以重复发出命令的开销，这将因数据库而异（我的一个想法是它可能引擎为存储过程提供更好的并发性，如果它是通过多个调用而不是单个存储过程进行的......纯粹是一个实现细节）。

作为一个建议，为什么不同时创建两者？根据单个版本实施计数版本，然后您可以更轻松地并排分析这两个选项，看看哪个为您的情况提供更好的性能。

# unit-testing - 你能指定VS 2005测试引擎中的测试执行顺序吗？

> ID：830589
> 
> 赞同：1
> 
> 时间：2009-05-06T16:50:25.087
> 
> 标签：unit-testing, visual-studio-2005

我在 Visual Studio 2005 中使用提供的单元测试引擎，我想知道是否有办法让我指定测试的顺序。我有许多测试类和每个内部的许多测试方法。我想控制测试类的执行顺序以及每个测试方法的顺序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T17:08:29.223

为什么？实际上测试应该能够单独运行。如果您需要在运行测试之前执行某些特定代码，您应该在测试类中包含这些代码：

```
//Use TestInitialize to run code before running each test
[TestInitialize()]
public void MyTestInitialize()
{
}

//Use TestCleanup to run code after each test has run
[TestCleanup()]
public void MyTestCleanup()
{
} 
```

我认为您的测试执行顺序并不重要。但是，如果您真的需要订购 Matthew Whited 链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T17:08:32.970

您可以使用有序测试

[http://msdn.microsoft.com/en-us/library/ms182629(VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms182629(VS.80).aspx)

# c# - 为什么我不应该总是在 C# 中使用可为空的类型

> ID：830592
> 
> 赞同：40
> 
> 时间：2009-05-06T16:50:47.427
> 
> 标签：c#, null, c#-2.0, nullable

自从 .net 2.0 中引入这个概念以来，我一直在寻找一些好的指导。

为什么我想在 C# 中使用不可为空的数据类型？（一个更好的问题是我为什么不默认选择可空类型，并且仅在明确有意义时才使用不可空类型。）

选择一个可以为空的数据类型而不是它的不可为空的对等体是否有“显着”的性能影响？

我更喜欢根据 null 而不是 Guid.empty、string.empty、DateTime.MinValue、<= 0 等检查我的值，并且通常使用可为 null 的类型。我不经常选择可空类型的唯一原因是我后脑勺发痒的感觉，这让我觉得不仅仅是向后兼容性会迫使额外的“？” 明确允许空值的字符。

有没有人总是（最总是）选择可空类型而不是不可空类型？

谢谢你的时间，

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-05-06T17:15:59.177

您不应该总是使用可空类型的原因是有时您能够保证一个值*将*被初始化。而且您应该尝试设计您的代码，以便尽可能多地出现这种情况。如果一个值不可能被未初始化，那么 null 就没有理由成为它的合法值。作为一个非常简单的例子，考虑一下：

```
List<int> list = new List<int>()
int c = list.Count; 
```

这*总是*有效的。没有可能`c`未初始化的方法。如果它变成了`int?`，您实际上是在告诉代码的读者“此值可能为空。请务必在使用前检查”。但是我们知道这永远不会发生，那么为什么不在代码中公开这个保证呢？

在值是可选的情况下，您是绝对正确的。如果我们有一个函数可能返回也可能不返回字符串，则返回 null。不要返回 string.Empty()。不要返回“魔法值”。

但并非所有值都是可选的。并且使所有内容都是可选的，这会使您的其余代码变得更加复杂（它添加了另一个必须处理的代码路径）。

如果你可以明确保证这个值总是有效的，那为什么要扔掉这个信息呢？这就是您通过将其设为可为空的类型所做的。现在该值可能存在也可能不存在，任何使用该值的人都必须处理这两种情况。但你知道，一开始只有一种情况是可能的。因此，您的代码的用户可以帮个忙，并在您的代码中反映这一事实。然后，您的代码的任何用户都可以依赖该值是有效的，他们只需要处理一个案例而不是两个案例。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-06T16:56:32.997

因为总是要检查可空类型是否为`null`.

显然，在某些情况下，值确实是可选的，在这些情况下，使用可为空的类型而不是幻数等是有意义的，但在可能的情况下，我会尽量避免使用它们。

```
// nice and simple, this will always work
int a = myInt;

// compiler won't let you do this
int b = myNullableInt;

// compiler allows these, but causes runtime error if myNullableInt is null
int c = (int)myNullableInt;
int d = myNullableInt.Value;    

// instead you need to do something like these, cumbersome and less readable
int e = myNullableInt ?? defaultValue;
int f = myNullableInt.HasValue ? myNullableInt : GetValueFromSomewhere(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T16:57:06.350

我认为语言设计者认为“默认情况下可以为空的引用类型”是一个错误，不可为空是唯一合理的默认值，您应该选择为空。（在许多现代函数式语言中就是这样。）“null”通常是一堆麻烦。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-06T17:01:21.363

你似乎有2个不同的问题......

> 为什么我想在 C# 中使用不可为空的数据类型？

很简单，因为编译器保证您所依赖的值类型数据实际上具有值！

> 为什么我默认不选择可空类型，而仅在明确有意义时才使用不可空类型？

正如 Joel 已经提到的，一个类型只能是 null 如果它是一个引用类型。编译器保证值类型具有值。如果您的程序依赖于一个变量来获得一个值，那么这就是您不选择可空类型所希望的行为。

当然，当您的数据来自不是您的程序的任何地方时，所有的赌注都没有了。最好的例子来自数据库。数据库字段可以是`null`，因此您希望您的程序变量模仿这个值 - 而不仅仅是创建一个“代表”的“神奇”值（即 -1、0 或其他）`null`。您可以使用可为空的类型来执行此操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-06T17:14:03.500

尽管空值可以方便地用作“尚未初始化”或“未指定”值，但它们会使代码更加复杂，主要是因为您重载了*`null`*变量的含义（数字或null 与只是一个数字）。

NULL 值受到许多数据库设计人员和 SQL 数据库程序员的青睐，但是只要稍微改变一下对问题的思考，您就可以取消 null 值，并且实际上拥有更简单和更可靠的代码（例如，不用担心`NullReferenceException`s）。

实际上对“T！”的需求很大。使任何引用类型不可为空的运算符，类似于 "T?" 使值类型可以为空，C# 的发明者 Anders Hejlsberg 希望他能包含这种能力。

另请参阅问题，[*为什么 C# 和 java 中存在“null”？*](https://stackoverflow.com/questions/178026/why-is-null-present-in-c-and-java)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T16:56:47.787

我倾向于在任何有意义的地方使用 Nullable 类型——在出现问题之前我不会关心性能，然后我会修复它所在的几个区域并完成它。

但是，我也发现一般来说，我的大多数值最终都是不可为空的。事实上，很多时候我实际上都想要一个 NotNullable，当我得到 null 时，我可以使用它来找出 null 问题，而不是稍后尝试使用它时。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-01-24T02:31:57.447

唯一应该使用 Nullable 类型的情况是，数据库表中的某个字段绝对需要应用程序在某个时刻发送或接收空值。即使在这种情况下，也应该始终尝试找到使用 Nullable 类型的方法。布尔并不总是你最好的朋友。

# youtube - YouTube 为他们的视频使用什么类型的 ID？

> ID：830596
> 
> 赞同：12
> 
> 时间：2009-05-06T16:51:37.360
> 
> 标签：youtube

我很好奇 youtube 使用什么类型的 ID 来识别他们的视频？它们似乎与 Digg 和 Bit.ly 等网站上用于短网址的 ID 类型相同。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-10-28T17:21:19.150

正如 Ishmael 猜测的那样，它是经过修改的 base64。正常 Base64 是 [a-zA-Z0-9\+\/][=]*。也就是说，数字包含 AZ、az、0-9、+ 或 /，并在末尾用 0、1 或 2“=”填充。YouTube 似乎跳过了填充（如 MIME 的 UTF-7 Base64），并且由于 URL 的 + 和 / 造成问题， - 和 _ 分别被替换。

因此，YouTube ID 应匹配 REGEXP：/[a-zA-Z0-9\-_]+/ 或 /[\w\-]+/（它们是等价的，因为 \w 是 [A-Za-z0- 9_])

我在动态 YouTube SWFObject 加载器实现中使用它，它工作正常。我在 YouTube ID 中观察到 - 和 _，但从未观察到任何其他非字母数字字符。更多 Base64 信息可以在 Wikipedia 上找到：[Base64 的 URL 应用](http://en.wikipedia.org/wiki/Base64#URL_applications "Base64 URL 应用程序")

祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T17:24:09.903

它可能是 GUID 的修改后的 Base 64 表示。（通用 Base 64 实现包括 URL 的问题字符）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T17:04:08.033

他们使用此 ID 来防止人们通过简单地增加一个数字来种植/发送垃圾视频。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T21:54:38.587

我已经看到至少有一个带有“_”下划线的组合。这让我感到惊讶......因为我一直假设与 Piskvor 相同的正则表达式......直到现在......

# python - 处理异常的设计 - 谷歌应用引擎

> ID：830597
> 
> 赞同：6
> 
> 时间：2009-05-06T16:51:40.310
> 
> 标签：python, google-app-engine, exception-handling, web-applications

我正在开发一个关于谷歌应用引擎（webapp 框架）的项目。我需要你们评估我如何处理异常。

我正在处理 4 种类型的异常：

1.  编程异常
2.  错误的用户输入
3.  不正确的网址
4.  查询字符串不正确

这是我处理它们的方法：

1.  我已经继承了 webapp.requesthandler 类并覆盖了 handle_exceptions 方法。每当发生异常时，我都会将用户带到一个友好的“我们很抱歉”页面，同时向管理员发送一条带有追溯信息的消息。

2.  在客户端，我（将）使用 js 并在服务器端进行验证。在这里，除了根据编程逻辑（检查：现金输入是否为浮点类型？）和业务规则（检查：用户有足够的积分来执行该操作吗？）验证输入之外，我认为（作为具有非 Web 经验的编码器） ，我还必须检查恶意意图。我应该采取什么措施来应对恶意行为？

3.  我有一个处理错误 URL 的包罗万象的 URL。也就是说，我把用户带到了一个自定义的“页面不存在”页面。在这里我没有问题，我想。

4.  如果留给自己，不正确的查询字符串可能会引发异常。如果 ID 不存在，则该方法返回 None（正在发生异常）。如果参数不方便，代码会引发异常。在这里我想我必须提出一个 404 并将用户带到自定义的“页面不存在”页面。我应该怎么办？

你有什么意见？提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T17:03:47.193

你似乎已经把事情想得很好。我唯一要补充的是，您可能想以[博客](http://github.com/DocSavage/bloog/tree/master)为例。Bloog 是一个写得很好的和流行的开源博客引擎，用于用 Python 编写的 App Engine。

此外，在第 2 点上，请注意[这些类型](http://ha.ckers.org/xss.html)的[跨脚本](http://en.wikipedia.org/wiki/Cross-site_scripting)攻击。

至于#4，请记住，404 页面是为您的设计添加一些[色彩和创造力的机会。](http://www.smashingmagazine.com/2009/01/29/404-error-pages-one-more-time/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T10:14:34.000

广告。#4：我通常将查询字符串视为非必要的。如果查询字符串有任何问题，我只会显示裸资源页面（好像没有查询存在），可能会向用户提供一些信息给用户查询字符串有什么问题。

这导致了类似于您的#3 的问题：用户是如何进入这个错误的查询的？我的应用程序是否在某处产生了错误的 URL？或者它是某些外部服务中的过时链接，还是保存的书签？`HTTP_REFERER`可能包含一些线索，但当然不是权威的，所以我会记录有问题的查询（带有一些额外的 HTTP 标头）并尝试调查此案。

# python - Python 迭代器帮助 + lxml

> ID：830600
> 
> 赞同：1
> 
> 时间：2009-05-06T16:52:23.833
> 
> 标签：python, iterator, for-loop, lxml

我有这个脚本-

```
import lxml
from lxml.cssselect import CSSSelector
from lxml.etree import fromstring
from lxml.html import parse

website = parse('http://example.com').getroot()

selector = website.cssselect('.name')

for i in range(0,18): 
    print selector[i].text_content() 
```

正如您所看到的，for 循环在我预先设置的多次后停止。我希望 for 循环仅在打印完所有内容后才停止。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T16:56:47.787

CSSSelector.cssselect() 方法返回一个可迭代的，所以你可以这样做：

```
for element in selector:
    print element.text_content() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T16:56:07.443

关于什么

```
for e in selector:
    print e.text_content() 
```

?

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T16:57:48.080

我希望您想要一个 for 循环，例如：

```
selectors = website.cssselect('.name , .name, .desc')

for selector in selectors: 
    print selector.text_content() 
```

# javascript - jquery $函数在IE中返回不同的结果

> ID：830601
> 
> 赞同：1
> 
> 时间：2009-05-06T16:53:11.210
> 
> 标签：javascript, jquery

```
$('.Schedule .Full input').each(function(i)
 {
        var controls = $('.Morning input, .MorningPart input, .Afternoon input, .AfternoonPart input', $(this).parents('.Schedule'));
        alert(controls.length + " Conflicting Controls\n"+
              $(this).parents('.Schedule').attr('id') + " Parent");
 }); 
```

当我在 Firefox 中运行此代码时，第一次执行此函数会产生一个警告框，内容如下：

> 17 冲突控制
> 星期一父

在 IE 6 或 7 中运行的完全相同的页面会生成一个警告框，内容如下：

> 45 冲突控制
> 星期一父

Firefox 是对的，只有 17 个冲突控件。IE 识别的 45 是不是“星期一”后代的控件。如果我将“星期一”指定为 $()​​ 函数的上下文，为什么 IE 会返回它之外的控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T17:21:50.860

试试这个

```
var controls = $(this).parents('.Schedule').children('.Morning input, .MorningPart input, .Afternoon input, .AfternoonPart input') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T17:42:02.607

我修改了你的例子，因为我的结构有点不同

```
$(this).parents('.RadioSchedule').children('.Morning, .MorningPart, .Afternoon, .AfternoonPart').find('input'); 
```

这项工作在 IE 和 Firefox 上产生了相同的结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T18:03:13.273

```
<div id="Monday" class="Schedule">
    <div class="Full">
        <div>
            <input type="radio" name="MondayFullDay" checked="checked" value="none"/>None 
        </div>
    </div>
</div>
<div id="Tuesday" class="Schedule">
    <div class="Full">
        <div>
            <input type="radio" name="TuesdayFullDay" checked="checked" value="none"/>None 
        </div>
    </div>
</div> 
```

好的，这是另一个棘手的部分......看起来

```
$(this).parents('.Schedule'); 
```

当它被执行时，它会逐渐返回更多的结果。因此，当它在 MondayFullDay 第一次执行时，它返回 1 个结果，但一旦到达 TuesdayFullDay，它就会返回 2 个结果。这仅在 IE 中。

因为上面的 xhtml 结构对于这个应用程序不是可选的，所以我最终只是通过连续调用 .parent() 手动遍历 DOM。

改变这个

```
$(this).parents('.Schedule'); 
```

进入这个

```
$(this).parent().parent().parent(); 
```

我仍然相信 parents() 方法没有像记录的那样工作......

# asp.net - 跨 DNN 和 ASP.net 应用程序共享身份验证、成员资格和角色

> ID：830610
> 
> 赞同：4
> 
> 时间：2009-05-06T16:54:12.270
> 
> 标签：asp.net, forms-authentication, dotnetnuke, single-sign-on

这是我的情况。我有一个 DotNetNuke 应用程序。我想从 DNN 网站链接到现有的 ASP.net 网站，并决定为此使用 DNN 的 IFrame。

现有的 ASP.net 应用程序使用 Forms Authentication 来确保安全 - 只有授权用户才能访问这些页面。这个 asp.net 应用程序还需要用户角色来授权不同的页面。

我不希望用户必须登录两次，并且我希望 asp.net 页面使用来自 DNN 应用程序的用户成员资格和角色数据——它不应该需要它自己的成员资格数据库。

这可能吗？根据 MSDN 网站：

“ASP.NET 支持分布式环境中的表单身份验证，无论是跨单个服务器上的应用程序还是在 Web 场中。当跨多个 ASP.NET 应用程序启用表单身份验证时，用户在应用程序之间切换时无需重新进行身份验证。”

这是否适用于链接到 asp.net 应用程序的 DotNetNuke 应用程序？两者也在同一个域中。

（我尝试修改 asp.net 页面的 config.web 以使用 DNN config.web，匹配机器密钥和表单设置 - 但它不起作用。我可能做错了什么，但在我继续之前，我想知道这是否可能。）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T17:17:59.030

我不知道你所说的在 DNN 中是否可行。我们在 DNN 4.0 上，他们对 ASP.NET 成员表做了一些奇怪的事情，这可能会导致麻烦。

我可以告诉您的是另一种方法（假设您可以控制 ASP.NET 应用程序）。有一个名为[MADAM](http://www.raboof.com/Projects/Madam/)（混合身份验证配置 ASP.NET 模块 - 我知道有点拗口）的项目，可用于为应用程序登录提供表单身份验证以外的方法。

您可以做的是在您的 ASP.NET 应用程序上设置 MADAM，然后从 DNN 将用户凭据传递给 ASP.NET 应用程序。最终结果对用户显示为单点登录。

如果您需要我详细说明任何内容，请在评论中告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-05T09:25:31.913

实际上，我在 dnn 页面上的 iframe 模块中显示了一些 aspx 页面。现在，由于在 iFrame 内部，我正在显示托管在其他地方但在同一服务器上的 aspx 页面。我只想在 iFrame 中加载页面之前验证 dnn 登录用户。

dnn 是否提供我可以从托管在其他地方的 apsx 页面调用的任何 API，以限制对任何未经授权的用户的访问。

# c - 打印会从我的链接列表中删除值

> ID：830613
> 
> 赞同：0
> 
> 时间：2009-05-06T16:54:54.217
> 
> 标签：c, linked-list, traversal

作为作业的一部分，我需要编写两个函数：

1.  将两个自然数相加的函数，表示为链表
2.  打印以相同方式表示的数字的函数。

出于某种原因，这两个函数分别工作得很好，但是当我尝试对 sum 函数的结果使用 print 函数时，它会在 print 函数的开头更改 sum 的值，并打印错误的值。当我使用 printf 在 main 中打印相同的值时，没有问题。我的代码在下面详述。有任何想法吗？

```
void main() 
{
  int a[1] = { 1 },
    b[1] = { 2 };
  int * *pa, **pb;
  List lst1, lst2;
  List sum;

  pa = (int * *) malloc(sizeof(int * )); * pa = &a[0];
  pb = (int * *) malloc(sizeof(int * )); * pb = &b[0];
  lst1 = arrToList(pa, 1);
  lst2 = arrToList(pb, 1);
  addNumbers(lst1, lst2, &sum);
  //printf("%d\n",*(sum.head->dataPtr));
  printNumber(sum);
}

//a function that recieves a number represented ad a list and prints it
void printNumber(List num) 
{
  ListNode * curr;
  int currData,
  i,
  number;

  if (isEmptyList(num) == TRUE) 
    printf("the input was an empty list, nothing to print");
  else 
  {
    i = 0;
    number = 0;
    curr = num.head;
    while (curr != NULL) 
    {
      currData = *(curr - >dataPtr);
      number = number + currData * ((int) pow(10, i));
      curr = curr - >next;
      i++;
    }
    printf("%d \n", number);
  }
}

// a function that sums in list 
// representation two numbers,
// each represented as a list 
void addNumbers(List n1, List n2, List * sum) 
{
  ListNode * currN1;
  ListNode * currN2;
  ListNode * currSum;
  int currN1N2Sum; //stores the sum of the current digits in n1 and n2 
  int carrier,
  prevCarrier; //current and previous  carriers that carries +1 to the 
  next digit of sum
  if the lst sum was bigger then 9

  if ((isEmptyList(n1) == TRUE) || (isEmptyList(n2) == TRUE)) 
    printf("bad input =(");
  else 
  {
    currN1 = n1.head;
    currN2 = n2.head; * sum = createEmptyList();
    carrier = 0;
    prevCarrier = 0;
    while ((currN1 != NULL) && (currN2 != NULL)) 
    {
      currN1N2Sum = *(currN1->dataPtr) + *(currN2->dataPtr) + prevCarrier;
      if (currN1N2Sum > 9) 
      {
        carrier = 1;
        currN1N2Sum = currN1N2Sum - 10;
      }
      currSum = creatNewListNode( & currN1N2Sum, NULL);
      insertNodeToEnd(sum, currSum);
      prevCarrier = carrier;
      carrier = 0;
      currN1 = currN1 - >next;
      currN2 = currN2 - >next;
    } //while ((currL1!=NULL)&&(currL2!=NULL))

    while (currN1 != NULL) 
    {
      currN1N2Sum = *(currN1 - >dataPtr) + prevCarrier;
      currN1 = currN1 - >next;
      if (prevCarrier != 0) prevCarrier = 0;
    }

    while (currN2 != NULL) 
    {
      currN1N2Sum = *(currN2 - >dataPtr) + prevCarrier;
      currN2 = currN2 - >next;
      if (prevCarrier != 0) prevCarrier = 0;
    }
  } // ! ((isEmptyList(n1)==TRUE)||(isEmptyList(n2)==TRUE))
} 
```

这是其余的代码：

```
typedef struct listNode{
int* dataPtr;
struct listNode* next;
} ListNode;

typedef struct list
{
ListNode* head;
ListNode* tail;
} List;

List createEmptyList()//creates and returns an empty linked list 
{
    List res;

    res.head = res.tail = NULL;

    return res;
}

Bool isEmptyList ( List lst )//checks if a given list is empty or not
{
    if (lst.head == NULL && lst.tail == NULL)
        return TRUE;
    else
        return FALSE;
}

void insertDataToEnd ( List * lst, int *dataPtr ) //inserts new data to the end of an existing linked list
{
    ListNode * newTail;
    newTail = creatNewListNode ( dataPtr, NULL );
    insertNodeToEnd(lst,newTail);
}

void insertNodeToEnd ( List * lst, ListNode * newTail )//insert an existing node to an existing linked list
{
    if (isEmptyList(*lst) == TRUE )
        insertNodeToStart ( lst,newTail );
    else
    {
        (*lst).tail -> next = newTail;
        newTail->next = NULL;
        (*lst).tail = newTail;
    }
}

ListNode * creatNewListNode ( int * dataPtr, ListNode * next )//inserts new node in an existing linked list
{
    ListNode * res;

    res = (ListNode *) malloc (sizeof(ListNode));

    res -> dataPtr  = dataPtr;
    res -> next     = next;

    return res;
}

void insertNodeToStart  ( List * lst, ListNode * newHead )//inserts node to the begining of a given linked list
{
    if ( isEmptyList( *lst ) == TRUE )
    {
        (*lst).head = newHead;
        (*lst).tail = newHead;
        newHead -> next = NULL;
    }
    else
    {
        newHead -> next = (*lst).head;
        (*lst).head = newHead; 
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T19:14:55.677

该错误在函数 addNumbers 中。当您添加一个节点来存储总和时，您将一个指针传递给变量 currN1N2Sum，该变量是一个局部变量（存储在堆栈上）。当 addNumbers 函数终止时，局部变量的存储被释放。只要不重用存储，在该位置找到的值将保持不变，因此显然有效。

这就是为什么您认为 addNumbers 函数是正确的。调用 printNumber 函数时，存储被覆盖，您会在其中找到不同的值。

这解释了你的错误。

addNumbers 还有另一个问题。当您尝试添加两位数字时，currN1N2Sum 的内容将被新值覆盖。

您应该做的是分配一个缓冲区（malloc）并将包含在 currN1N2Sum 中的值存储到其中。将指向缓冲区的指针传递到新节点。

顺便说一句：您可以在 lst->head 中更改 (*lst).head。它将使您的代码更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T17:46:30.910

我认为您可能会在指针方面搞砸了……您在 addNumbers 中分配列表“总和”的方式似乎非常非常奇怪。（如果它破坏了东西，我不会感到惊讶......）

尝试进行以下更改：

主要：

```
List *sum;
<...>
addNumbers(lst1,lst2,sum); //Note the absence of the reference operator &
printNumbers(*sum); 
```

（或者，将 printNumbers 更改为接受 (List *) 而不是 (List)）。

希望这对你有帮助 XD

# **编辑：**

**在调用 addNumbers() 之前尝试分配“总和”。**

 **```
lst1 = arrToList(pa, 1);
lst2 = arrToList(pb, 1);
sum = createEmptyList(); 
```

我仍然认为您的数据结构有点奇怪：S

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T17:04:28.580

我们需要看更多代码：如何定义保存节点的数据结构，如何添加节点等。

以下行是可疑的：

```
 number=number+currData*((int)pow(10,i)); 
```

假设您有 123 个存储为 1、2 和 3 个节点：

```
 number =  0;
    number =  0 + 1 * 1   = 1;
    number =  1 + 2 * 10  = 21;
    number = 21 + 3 * 100 = 321; 
```

但是，如果您存储为 3、2 和 1 个节点，您将获得：

```
 number =  0;
    number =  0 + 3 * 1   = 3;
    number =  3 + 2 * 10  = 23;
    number = 23 + 1 * 100 = 123; 
```

这是你的问题吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T17:08:33.547

如果没有看到 的实现，我不知道这是不是一个问题`createNewListNode()`，但这里有一些事情需要考虑：从通话中返回后，列表
中的`dataPtr`s`sum`指向哪里？`addNumbers()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T19:42:05.783

createEmptyList 有问题。您在那里声明一个名为 res 的列表并返回结构，但是该函数返回该结构的那一刻不再有效。尝试使用 malloc （用于结构），然后将指针返回给调用者。您在 *sum 开头使用此函数。

这与 chmike 发现的错误相似，因此您最好同时修复这两个错误。

# django - 调整 queryset.get 以在模型管理器中不存在 DoesNotExist 异常的情况下工作

> ID：830615
> 
> 赞同：1
> 
> 时间：2009-05-06T16:55:03.017
> 
> 标签：django, django-models

我有两个类似的模型和一个通用的管理器，它返回当前登录用户的查询集。当引发 DoesNotExist 异常时，我希望 User_Places.current_user.get(place=XXX) 返回现有的 User_Place() 对象或空的 User_Places()。这怎么可能？CurrentUserManager 对 User_Places 和 User_Projects 模型一无所知，如果我是对的？

我只是不想总是写：

```
try:
    places = User_Places.current_user.get(place=XXX)
except:
    places = User_Places() 
```

我的模型代码：

```
class User_Places(models.Model):
    place = models.ForeignKey('Place')
    user = models.ForeignKey(User)
    current_user = CurrentUserManager()

class User_Projects(models.Model):
    project = models.ForeignKey('Project')
    user = models.ForeignKey(User)
    current_user = CurrentUserManager()

class CurrentUserManager(models.Manager):
    def get_query_set(self):
        user = threadlocals.get_current_user()
        qs = super(CurrentUserManager, self).get_query_set()
        if user:
            qs = qs.filter(user=user)
        return qs

    def get(self, *args, **kwargs):
        try:
            object = super(CurrentUserManager, self).get(*args, **kwargs)
        except:
            object = ????????????????????????
        return object 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T19:27:34.193

[在这里](https://stackoverflow.com/questions/809210/django-manager-chaining)找到解决方案。Manager 类中有 self.model() ：

```
class CurrentUserManager(models.Manager):
    ....
    def get(self, *args, **kwargs):
        try:
            object = super(CurrentUserManager, self).get(*args, **kwargs)
        except:
            object = self.model(**kwargs)
        return object 
```

# javascript - || 是什么意思 运营商呢？

> ID：830618
> 
> 赞同：7
> 
> 时间：2009-05-06T16:55:29.613
> 
> 标签：javascript, operators

```
Attacklab.wmd_env.buttons=Attacklab.wmd_env.buttons||_4; 
```

|| 是什么 在这种情况下怎么办？
将 _4 添加到 Attacklab.wmd_env.buttons 的数组中？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-06T16:57:09.797

JavaScript 中的`||`运算符返回左边的值，如果该值不计算为`false`，否则返回右边的值。

来自[Mozilla 的核心 JavaScript 1.5 参考](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Operators/Logical_Operators)：

> `expr1 || expr2`
> 返回`expr1`是否可以转换为 true；否则，返回`expr2`。因此，当与布尔值一起使用时，`||`如果任一操作数为真，则返回真；如果两者都为假，则返回假。

因此，在这种情况下，如果`Attacklab.wmd_env.buttons`没有值，它会将值设置为`_4`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-06T17:01:37.010

这是一种奇特的写作方式

```
if(!Attacklab.wmd_env.buttons)
    Attacklab.wmd_env.buttons = _4; 
```

提供默认值很好。请记住，不仅`null`和`undefined`会触发条件，而且`0`,`false`和`''`，即`false`在布尔上下文中考虑的所有内容。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-06T16:57:02.717

如果`Attacklab.wmd_env.buttons`是`null`或`undefined`，它将被设置为默认值`_4`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-06T17:04:03.417

|| 运算符检查表达式左侧提供的值是否为假（在布尔上下文中）。如果是这样，则返回表达式右侧指示的替代值。否则返回原始值。

因此，例如，如果 'Foo' 为空，则以下代码会将其设置为默认值：

```
富 = 富 || “默认值” 

```

这有时称为 Coalescing 运算符。Ruby 和 Perl 等其他语言也支持它。C# 有 ?? 做同样事情的操作员。

# c# - C# Listview 项目文本方向

> ID：830636
> 
> 赞同：0
> 
> 时间：2009-05-06T16:58:02.090
> 
> 标签：c#, visual-studio, listview, orientation

我正在使用带有 LargeIcons 作为视图类型的 Listview 容器来设计应用程序。我需要一种方法来更改 Listview Items 相对于图标的文本方向。

例如：我想把文字显示在Listview容器中图标的右边。

有没有办法做到这一点？

谢谢，-肖恩！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T17:08:42.047

你想达到这个目的吗？

```
[    ]
[icon] Text
[    ] 
```

如果是这样，听起来你需要`View.Tile`而不是`View.LargeIcon`.

# c++ - 关于windows iocp的一个问题

> ID：830639
> 
> 赞同：2
> 
> 时间：2009-05-06T16:58:05.070
> 
> 标签：c++, windows, visual-c++, iocp

当我在 Windows Vista 中编写有关 IO 完成端口的程序时，第一个示例不起作用，GetQueuedCompletionStatus() 无法获取任何 OVERLAPPED 结构。

所以我把 OVERLAPPED 结构放在全局范围内，它的效果非常好。这是为什么？

代码1：

```
int main()
{
    OVERLAPPED o;
    ..
    CreateIoCompletionPort(....);

    for (int i = 0; i<10; i++)
    {
        WriteFile(..,&o);

        OVERLAPPED* po;
        GetQueuedCompletionStatus(..,&po);
    }

} 
```

代码2：

```
OVERLAPPED o;

int main()
{

    ..
    CreateIoCompletionPort(....);

    for (int i = 0; i<10; i++)
    {
        WriteFile(..,&o);

        OVERLAPPED* po;
        GetQueuedCompletionStatus(..,&po);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T17:11:47.110

好的！这是来自[OVERLAPPED](http://msdn.microsoft.com/en-us/library/ms684342(VS.85).aspx)结构的 MSDN 页面的备注部分：

> 在函数调用中使用该结构之前，该结构的任何未使用成员都应始终初始化为零。否则，该函数可能会失败并返回 ERROR_INVALID_PARAMETER。

全局变量是零初始化，而局部变量不是。如果您打算使用以前的代码，则需要将内存清零：

```
int main() {
    OVERLAPPED o = {0}; 
    // ... 
```

# dns - DNS 两域一台服务器

> ID：830640
> 
> 赞同：3
> 
> 时间：2009-05-06T16:58:06.863
> 
> 标签：dns, subdomain, multiple-domains

问候所有，长期读者第一次海报。我在一个小学区工作。我们是我们自己的 SOA，所以我们几乎可以做我们想做的事。

在华盛顿州，所有教育机构的名称都类似于*myschools.wednet.edu*。我最近购买了一个新的并且希望更容易记住的域*myschools.org*，我想使用这两个域并让它们指向相同的信息和子域，即*helpdesk.myschools.org*将等于*helpdesk.myschools.wednet.edu* . 我也希望这与电子邮件一起使用，但我认为这有点复杂。

我确定这已经完成，但我不完全确定我以一种可以轻松回答的方式提出问题。

任何和所有的帮助表示赞赏。

TIA，戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T17:12:02.663

为此，您将拥有多个指向同一 IP 地址的 DNS 记录条目 (A-Recs)。您可能还需要调整 IIS（或您的 Web 服务器软件）以接受来自两个域的请求。

所以...在您的 DNS 管理器中（例如在 Register.com 或您管理域的任何地方）更改 A-Rec 以将 myschools.org（您的域）指向 myschools.wednet.edu 当前指向的同一服务器 IP 地址（我认为您告诉他们将子域指向何处）。

*如果您使用的是 IIS*，那么在一个网站上设置多个域很容易。您将只创建一个网站（或使用 wednet.edu 指向的网站）。接下来，右键单击 IIS 中的网站并选择“属性”。在“网站”选项卡上，单击“高级”，然后在出现的对话框中，使用“添加”按钮添加其他域/子域。这就是你需要做的。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-08T07:14:56.343

If you want lots of subdomain entries to map from one domain to the other then you'll need to either add `A` or `CNAME` records in the new domain pointing to the old domain.

In most cases I'd recommend a `CNAME`, however if you want the unadorned "myschools.org" domain to respond to HTTP requests that would have to be an `A` record, because you can't put in a `CNAME` at the top level of a zone.

Alternatively, there's a relatively new DNS record type called `DNAME` which can map an entire domain to another in one fell swoop. Unfortunately it's not widely supported yet.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T05:30:48.087

您所要做的就是创建两个“A”记录，一个主机类型为“@”，另一个主机类型为“www”，两者都应指向您服务器的 IP 地址。

这可能有点令人困惑，这是一个如何设置@GoDaddy 的示例： ![在此处输入图像描述](https://i.stack.imgur.com/yf1LT.jpg)

# jvm - 是否可以在 Java 中进行 InterProcess 通信？

> ID：830641
> 
> 赞同：3
> 
> 时间：2009-05-06T16:58:21.353
> 
> 标签：jvm, ipc

我有两个 Java 程序，每个程序都在自己的 JVM 实例中运行？他们可以使用任何 IPC 技术（如共享内存或管道）相互通信吗？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T17:00:38.010

是的; [D-BUS](http://dbus.freedesktop.org/doc/dbus-java/)和[Pipes](http://java.sun.com/j2se/1.4.2/docs/api/java/nio/channels/Pipe.html)都易于使用且跨平台。D-BUS 对于一般的消息传递 IPC 和发送批量数据的管道很有用。

如果您需要支持连接到中央服务器的多个客户端，您还可以在 localhost 上打开 TCP 或 UDP 套接字。

我还在[Java 中找到了 UNIX 套接字的实现](http://www.matthew.ath.cx/projects/java/)，尽管它需要 JNI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T17:01:01.270

[http://java.sun.com/javase/technologies/core/basic/rmi/index.jsp](http://java.sun.com/javase/technologies/core/basic/rmi/index.jsp)

Java 远程方法调用 (Java RMI) 使程序员能够创建基于 Java 技术到基于 Java 技术的分布式应用程序，其中远程 Java 对象的方法可以从可能在不同主机上的其他 Java 虚拟机*调用。RMI 使用对象序列化来编组和解组参数并且不截断类型，支持真正的面向对象的多态性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T17:02:45.230

当然。看看 RMI 或[Java Spaces 之](http://java.sun.com/developer/technicalArticles/tools/JavaSpaces/)类的共享内存概念。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-21T16:22:16.697

在 Java NIO 中使用 MemoryMappedByteBuffer 在进程之间共享内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-17T14:59:55.513

对于来自 Apache 的列式（即基于数组的）数据的与语言无关的 IPC，有一个相当新的倡议，称为[Plasma](http://arrow.apache.org/blog/2017/08/08/plasma-in-memory-object-store/)。

到目前为止（2017 年 9 月）还没有 JVM 绑定，但是由于该项目得到了 Spark 之类的支持，我认为我们很快就会看到实现。

然而，我的理解是，没有一个通用的 IPC 系统，因为它旨在共享用于科学计算的原语数组`double`，`long`而不是类/对象；虽然我在这里可能是错的。从好的方面来说，它也与语言无关，因此您可以使用它与另一个（非 JVM）运行时进行通信。但是，OP 确实要求使用 Java IPC，因此这可能无关紧要。

# vim - 在 vim 中更改某一列的背景颜色

> ID：830645
> 
> 赞同：22
> 
> 时间：2009-05-06T16:59:00.823
> 
> 标签：vim, macvim

我希望能够通过更改背景颜色（或者可能只是一条线？）来突出显示 vim 中的换行边距/文本宽度。很多 IDE 都有这个。我嘲笑我在说什么：

![](https://farm4.static.flickr.com/3598/3508086136_6c075936a5_o.jpg)

任何人都知道这是否可以在 macvim 或 gvim 中完成？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2011-06-30T23:44:46.107

从 Vim 7.3 开始，可以像这样突出显示列：

![突出显示列的 MacVim 屏幕截图](https://i.stack.imgur.com/IwQ5F.png)

要将其设置为当前`textwidth`：

```
:set cc=+1 
```

或者您可以将其设置为预定义值：

```
:set cc=80 
```

你可以像这样改变它的颜色：

```
:hi ColorColumn ctermbg=lightgrey guibg=lightgrey 
```

有关更多详细信息，请参阅帮助：

```
:help colorcolumn 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-05-06T17:04:02.573

尝试这个：

```
:match ErrorMsg '\%>80v.\+' 
```

它将突出显示超过 80 个字符的文本，您可以将“80”替换为您拥有的任何换行宽度。但是，它只会突出显示超出宽度的字符，然后只会突出显示实际上比宽度长的行。

查看[http://vim.wikia.com/wiki/Highlight_long_lines](http://vim.wikia.com/wiki/Highlight_long_lines)以获取更多信息，但它们几乎都完成了同样的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T14:28:41.483

```
autocmd FileType * execute "setlocal colorcolumn=" . join(range(&textwidth,250), ',')
highlight ColorColumn guibg=#303030 ctermbg=0 
```

最大的问题是 colorcolumn 突出显示的优先级高于 hlsearch！所以基本上你将无法看到超出该边距的突出显示的搜索项......

# java - Eclipse：是否可以通过源代码“附件”编辑已知的 Java 源代码

> ID：830648
> 
> 赞同：8
> 
> 时间：2009-05-06T16:59:48.760
> 
> 标签：java, eclipse, jar

我正在使用 Eclipse 3.4.2 来开发我的代码。作为我的项目定义的一部分，我引用了一个实用程序库，我已将源代码附加到该实用程序库中。到目前为止，一切都很好——当我从库中调出类和调试时，我可以看到那个源代码。

然而，现在我想对其中一个类进行更改，同时仍保留 Eclipse Java 编辑器的所有功能（特别是工具提示和快速修复之类的东西）。当我查看源代码时，这些功能似乎可以工作（例如，我可以通过方法名称 CTRL+LClick），但它是只读的。另一方面，我可以显式打开允许我编辑它的源文件，但我失去了所有“智能”编辑功能。

我最近从 IntelliJ 切换到 Eclipse，这是可能的，所以我希望它也在 Eclipse 中。请注意，虽然我可以简单地将代码作为项目包含在我的工作区中，但我真的不想这样做。工作区已经非常大了，我不想通过添加我很少接触的项目来进一步减慢 Eclipse。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T17:08:26.680

我不确定我的问题是否正确。当您将预编译库添加到项目构建路径（JAR）并将源附加到此 JAR 时，当您单击 JAR 中的 .class 时，Eclipse 将向您显示源代码。调试器也是如此，如果 JAR 中的类是使用行号信息编译的，它还允许您单步执行源代码中的代码行。

现在您似乎想要做的是修改 JAR 中的类（源视图只是一个覆盖，如果您附加不同版本的源，甚至可以关闭），这是不可能的，因为它们被包装了JAR 档案中的二进制形式——即使 Eclipse 足够聪明，可以单独显示它们。

我猜你会期望你的更改被调试器热交换到正在运行的程序中。这只能在您完成更改后通过重新编译来完成。通常，当您保存 Java 源文件时，Eclipse 会自动执行此操作。但是，由于您的源文件不是工作区的一部分（或明确声明为 Java 源的外部文件夹） - 它不会重新编译和交换。

我建议将您的外部库的源代码作为 Eclipse 中的一个项目包含在内，而不必过多担心性能 - 我每天都使用 3.4.2，我的工作区有大约 45 个打开的项目，其中有几个 10.000 个类和数百万行代码。我为 Eclipse VM 分配了千兆字节的 RAM，并且在 Core2Duo 2.6GHz 机器上没有问题。

# ironpython - 您如何使用 IronPython？

> ID：830651
> 
> 赞同：28
> 
> 时间：2009-05-06T17:00:36.077
> 
> 标签：ironpython

我热衷于喝一些现代动态语言 koolaid，所以我相信 Michael Foord 的博客和播客上的所有内容，我买了他的书（并阅读了其中的一些内容），并添加了一个嵌入式 IPy 运行时到大约一年前现有的大型应用程序（尽管那是给别人的，我自己并没有真正使用它）。

现在我需要做一些相当简单的代码生成工作，我将在一些 .net 对象（自定义、C# 编写的对象）上调用一些方法、创建一些字符串、编写一些文件等。

尝试这个的经历让我觉得自己像一个小男孩，认为他是唯一能看到皇帝没有穿衣服的人。如果您使用的是 IronPython，我非常感谢您知道您如何处理它的以下方面：

*   *代码编辑 - 您是否使用没有*Intellisense的 .NET 框架？
*   重构——我知道大量的“重构”是关于解决与语言相关的繁忙工作，所以如果 Python 足够轻量级，那么我们就不需要它了，但是在我看来，重命名之类的东西对于迭代开发高质量代码是必不可少的，无论语言。
*   严重的启动时间——解释语言的优点之一是缺乏编译时间，从而导致快速的交互式开发。不幸的是，我可以编译一个 C# 应用程序并以比 IPy 启动速度更快的速度启动它。
*   交互式黑客 - IPy 控制台/repl 应该对此有好处，但我还没有找到一种很好的方法来获取您以交互方式到达的代码并将其保存到文件中 - 从控制台剪切和粘贴是相当的悲惨的。并且控制台似乎包含对您已导入的 .NET 程序集的引用，因此如果您也在处理 C# 内容，则必须退出它并重新启动它。在诸如 LinqPad 之类的东西中对 C# 进行黑客攻击似乎是一种更快、更简单的尝试方法（并且具有适当的 Intellisense）。你用控制台吗？
*   调试 - 这里有什么故事？我知道 IPy 团队中的某个人正在开发一个命令行爱好项目，但可以说我并没有立即被命令行调试器所吸引。我真的不需要来自小 Python 脚本的调试器，但如果我使用 IPy 进行脚本单元测试，例如，我会这样做。
*   单元测试 - 我可以看到动态语言可能对此非常有用，但是否有任何 IDE 测试运行程序集成（如 Resharper 等）。福特的书有一章关于这个，我承认我还没有正确阅读，但它似乎确实涉及从命令提示符驱动控制台模式测试运行器，这感觉是使用的一个巨大的退步像 TestDriven.net 或 Resharper 这样的集成测试运行器。

我真的很想相信这些东西，所以我仍然假设我错过了一些东西。我真的很想知道其他人是如何处理 IPy 的，特别是如果他们以一种不觉得我们刚刚失去 15 年的工具开发价值的方式来做这件事。

更新：（2010 年 7 月）这个问题看起来已经过时了，现在有两个官方[IronPython 工具用于 VS](http://ironpython.net/tools/)和[PyCharm](http://blogs.jetbrains.com/pycharm/)，它们都显示出很大的希望，而当我写它时，它们都没有出现。感谢所有回答的人。对于那些对*没有*自动重构工具感到满意的人，我是否可以建议您永远不要使用具有良好自动重构功能的 IDE。拥有之后，您会想知道为什么您认为自己对 find-replace 感到满意，并且您再也不想在没有它的情况下工作。如果不出意外，即时重命名标识符而不必担心替换错误的文本的能力会改变您命名内容的整个方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-10T11:06:42.077

```
do you use the .NET framework without Intellisense? 
```

是的。我只使用带有 IronPython 的 emacs。“M-/”对我来说已经足够了。当我真的需要有关 SDK 的信息时，我偶尔会切换到 Reflector 和 MSDN。

```
Refactoring 
```

当您说“重构”时，您实际上是指“自动重构”。我在编码时做了很多重构。一些自动化可能会更好。但我对手动重构很好。这也迫使我加入更多的测试。我从未广泛使用任何具有重构功能的 IDE，也许这就是我不痛苦的原因。简单的搜索和替换对我来说很好。

```
Crippling startup time 
```

是的，这是我的主要痛苦，尽管我正在使用 4G Ram 的 3GHz 四核，运行 359 个测试用例确实需要 50 秒。一半的时间（25s）是启动时间！！在导入大型模块时，IronPython 似乎执行了一些非常繁重的处理任务。我现在计划将我的测试分成几部分来减轻这种痛苦。

```
Interactive hacking - Do you use the console? 
```

当我想尝试一些临时想法时，我偶尔会使用控制台。不要有问题。然而，大多数时候我把我的想法写进了单元测试。

```
Debugging - what's the story here? 
```

如果调试意味着断点和变量检查。我只对那些东西使用 print 语句。我正在开发的那种应用程序即将存在并至少维持十年。为了处理有缺陷的代码，我只赌三件事：可理解的代码、单元测试和广泛的日志记录。

```
Unit testing 
```

我从来没有接近你提到的任何工具。只需使用 unittest.TextTestRunner。除了可怕的启动时间，我没有任何其他抱怨。

** 更新 **

我刚刚升级到 IPy 2.6B1 并取得了惊人的效果。启动时间从 25s 减少到 6s，我的整体测试时间从 50s 减少到 16s !!!

惊人的 ！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2010-06-22T14:16:59.687

Visual Studio 2010 的 IronPython 工具怎么样？

*IronPython 工具提供 Python 代码编辑器、基于文件的项目系统和交互式 Python 解释器，所有这些都在 Visual Studio 2010 中，而且全部免费。* [http://ironpython.net/tools/](http://ironpython.net/tools/)

我认为这个加载项将涵盖您的大部分观点。

希望能帮助到你，

帕特里克

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-21T23:42:45.667

IronPython 是一个很好的解决方案，但我继续使用 CPython for Windows。为什么 ？

根据我的经验，Windows、Mac OS/X 和 *NIX 下的 CPython 几乎是相同的。我可以在每个环境中使用几乎所有的“电池”。我经常在 Linux 上开发应用程序并发布到 Windows 服务器。除了线程的几个问题，我没有任何问题。

另一方面，IronPython 是围绕 .Net 框架的 Python 语言包装器。我发现它比 C# 好用得多，但仅此而已。我的 CPython 程序如果不进行大量返工就无法工作。IronPython 的电池不同。

如果您的目标是在 .Net 上高效，那么 IPy 可能还可以。但是，如果您正在寻求可移植的 Python 技能，那么我会避免使用它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-15T22:55:49.083

我正在使用 PyDev 编写 IronPython 代码。我正在尝试尽可能多地分离 .NET 特定代码，以便我可以从 PyDev 中运行 (Iron)Python 脚本。感谢 PyDev，我可以使用可以在[http://www.logilab.org/857](http://www.logilab.org/857)找到的 Pylint 。最新版本的 PyDev 甚至可以根据文件或项目配置解释器。因此，我可以轻松地将解释器从 IronPython 切换到 CPython，反之亦然。通过这种方式，我可以看到我的代码在 Python 实现之间是可移植的。（虽然我没有使用，但在 PyDev 中也可以使用 Jython 2.5 RC。）

拥有 Python 和 IronPython 2.5 兼容的代码，我可以使用 PyDev 中的重构，请参阅[http://pydev.sourceforge.net/refactoring.html](http://pydev.sourceforge.net/refactoring.html)。

如果 IronPython Studio 支持 IronPython 2.x，它将是一个不错的选择，但遗憾的是，它不支持。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2010-07-28T11:05:07.820

PyDev、Wing、PyCharm 和 IronPython Tools for Visual Studio 都支持 IronPython 下的 .NET 智能感知。我感觉 SharpDevelop 对 IronPython 也有智能感知。

IronPython 2.6 和 2.7 的启动时间都有很大改善。然而，它仍然比 CPython 慢得多。

自行车修理工和绳索是 Python 的两个流行的自动重构工具。我从来没有发现需要它们中的任何一个。

pdb（Python 标准库调试器）与 IronPython 一起工作。PyDev、SharpDevelop 和 IronPython Tools for Visual Studio 都支持 IronPython 的调试。

我使用过集成测试工具（Wing 有很好的单元测试支持 SharpDevelop 支持 IronPython 的 unittest 和 unittest2，PyDev 和 PyCharm 可能也有很好的单元测试集成）。我更喜欢从命令行运行我的测试。unittest2 非常适合这一点，因为它消除了编写您自己的测试集合/运行代码的需要。

我大量使用交互式解释器进行实验，偶尔也将其用作增强外壳。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-05-20T21:40:19.393

我最近在我的项目中广泛使用 IronPython（以及一般的 DLR）来处理各种事情。一些例子：

*   我制作了一个基于模板的文档生成器，它使用 py 脚本来构建和转换传递给模板渲染器的上下文变量（Excel、Word、html->pdf）
*   作为专用规则引擎的表达式评估器。脚本保存在数据库表的列中，并在运行时评估以确定适用的规则。
*   作为 ETL 引擎中的步骤。基本上我有一些可以读取 Excel 文件的组件，我使用 python 脚本来转换数据并创建 NHibernate 实体来填充数据库。
*   C# 组件的动态配置脚本。
*   一些需要从大量数据中创建的指标的计算引擎。我将并行扩展与预编译脚本相结合，到目前为止性能很好。

类似的东西。一旦正确配置了引擎，并设置了路径和引用，您基本上可以使用脚本来处理任何事情。

几乎所有这些东西都在 asp.net mvc 应用程序中运行，到目前为止一切都很好。我发现 ScriptEngine 和 ScriptScope 等一些组件是线程安全的，因此我什至可以在控制器等之间共享 IoC 容器（例如 Windsor）中保存的已配置引擎。

至于编辑，我大部分时间都是EditPlus。VS 2010 python 编辑器往往有点不稳定，尽管快速编辑不是问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-07T02:16:48.953

我对 IronPython 的使用仅限于为自己制作快速原型，所以我不能说太多。但是，如果您正在寻找一个特定于 IronPython 的 IDE，[IronPython Studio](http://www.codeplex.com/IronPythonStudio)是可以通过的。它会给你一些 Intellisense 功能，虽然它有时有点不稳定，所以暂时不要关闭那个 MSDN 文档窗口。它将允许您像任何其他 .Net 项目一样进行交互式调试。如果您希望以这种方式制作 GUI，它还支持 Visual Studio 2008 表单设计器。我还没有尝试过，但它也可能支持使用 TestDriven.net 运行 nUnit 测试。

遗憾的是，VS 2008 提供的重命名和其他重构功能似乎不受支持。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-10T10:19:37.337

我在嵌入式环境中使用 IPy 来运行测试脚本。

1 & 2\. 你说得对，对代码编辑或重构的支持并不多——适当的 Visual Studio 支持会很棒。

忽略您的第三点-解释与编译是一个古老的论点。

还没有做太多的交互式黑客，所以不能评论第四点。

我使用 Visual Studio 调试器来调试我的 IPy 脚本。

也不知道单元测试 IDE 集成。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-05-10T10:27:44.290

不幸的是，我使用 Iron Python 不是专业的，而是作为我个人项目的快速开发语言。

Python 是一种非常棒的语言，它易于使用、简洁但代码的可读性和简单性。其中一些是因为它是一种动态语言，但也是它的基本语法。

然而，我不是 cpython 专家，并且可以从 Iron Python 中获得比 cpython 更多的东西，因为我可以轻松地利用 .NET 平台，在这个平台上我更熟悉。我很失望，目前 cpython 中没有 Twisted 库的端口，这是我唯一喜欢的扩展 Python 库，因为它们在 .NET 中非常有用。

当我用 C# 编码时，我还使用交互式窗口来测试 .NET 结构。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2010-04-11T17:08:50.267

我正在 Python 2.6 与 IronPython 2.6 上运行一组二十一点模拟，尽管大肆宣传，IronPython 似乎只是慢了一点（可能慢了大约 10%？）代码非常简单，就像这样：

```
def highcount(hand):
  total=0
  for c in hand:
    if c[1]==11 and 11+total>21:
      total+=1
    else:
      total+=c[1]
  return total 
```

和

```
def dmove():
  if ( (dhand[0][1]==11 and dhand[1][1]==10) or 
       (dhand[0][1]==10 and dhand[1][1]==11) ):
    return 21 # should return blackjack

  while 1:
    lc=lowcount(dhand)
    hc=highcount(dhand)
    if lc>21: return lc # dealer busts
    if lc>=17: return hc # stand on soft 17
    if hc>=17: return hc # stand on hard 17
    dhand.append(deck.pop()) # hit otherwise 
```

如果 .NET VM 优化类似于 JVM 的 Hotspot，则很有可能在较长时间内运行，IronPython 可能会更快地运行模拟。

另一个需要注意的重要一点是二十一点模拟很容易在多个线程上产生，而 CPython 的 GIL 在速度提升方面完全没有价值。使用 IronPython，我确实在四核上获得了 400% 的完整加速，这真的很酷。

该代码没有使用任何深奥的 Python 特性（这是一件好事），这意味着它在 IronPython 上 100% 未经修改即可运行。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-30T15:29:37.193

我刚买了福特的书，所以现在我只是在学习它。我真的希望将它用于 Web 开发，但遗憾的是我必须等到它被 asp.net mvc 支持。我还计划将它用作 Windows 系统的脚本工具，因为我可以利用 .net 框架

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-02-20T17:31:58.400

在工作中，我们针对 SharePoint 对象模型使用 IronPython。它非常适合许多比 powershell 脚本更大但不需要作为工件部署到 SharePoint 中的小程序。它非常适合在未安装 Visual Studio 的服务器上进行快速原型设计。我们通常使用 Notepad++ 作为我们选择的编辑器。

# c# - sqlite 在我的 C#2.0 Windows 应用程序中让我头疼

> ID：830653
> 
> 赞同：0
> 
> 时间：2009-05-06T17:00:50.053
> 
> 标签：c#, sqlite, connection-string

从今天早上开始，我一直在为这个 sqlite 事情苦苦挣扎。在阅读了一些好的教程后，我决定将它用作我的 winform 应用程序中的嵌入式数据库。我下载了为我安装 system.datal.sqlite 的 SQLite-1.0.61.0-setup 并下载了 firefox 插件 sqlite manager 和另一个名为 wxSQLitePlus 的管理工具，基于[此处找到的本](http://cfred.free.fr/wxsqliteplus.php)[教程](http://decoding.wordpress.com/2009/01/14/using-sqlite-with-net/)（只是明确）希望我不是发布任何将被忽略的愚蠢内容，这是我的两个挑战。第一个挑战是我无法引用文件夹内的数据库让我们说数据库我有异常“无法打开数据库文件”。我的 app.config 如下

```
<connectionStrings>
  <add name="embcon" connectionString="Data Source=database\iagency.db;Version=3;"/> 
```

但如果 iagency.db 在根文件夹中，则根本没有问题。app.config 之类的

```
<connectionStrings>
  <add name="embcon" connectionString="Data Source=iagency.db;Version=3;"/> 
```

第二个挑战是无法在我正在使用的 Visual Studio 2005 中查询通过诸如 firefox 插件或 wxsqlite+ 之类的工具创建的对象。如果查询时它是一个表，我有一个异常，即使这两个工具都不存在该对象显示相同的数据。工具无法查看由 Visual Studio 中的查询创建的 inversly 表。那么有什么关系呢？它是记忆的东西还是我只是错过了一些要点？谁能解释发生了什么？感谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T17:08:31.487

尝试使用完整的文件路径作为数据源（例如 Data Source=c:\data\iagency.db）

有关更多信息，请参阅此帖子：[连接字符串中的数据源位置](http://sqlite.phxsoftware.com/forums/p/123/436.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-11T12:08:49.250

试试看：

```
<add name="embcon" connectionString="Data Source=|DataDirectory|\iagency.db;Version=3;"/> 
```

# asp.net - 神秘的 IIS 问题：站点停止提供动态页面，日志中没有错误

> ID：830654
> 
> 赞同：3
> 
> 时间：2009-05-06T17:00:51.880
> 
> 标签：asp.net, windows, iis-7

这可能是我遇到过的最神秘的问题。

我们有一个 IIS7 安装，上面有 3 个网站，每个网站都有自己的应用程序池。每天一次，大约一个小时，其中一个特定的人会倒下。

我所说的“下降”是指：

1.  它停止响应对动态页面的请求（例如 default.aspx），但会很好地提供静态文件（logo.png）。
2.  Wireshark 告诉我，这些动态页面请求实际上是返回 HTTP 500 Internal Server 错误，但是在浏览器中，我没有看到错误。我只看到浏览器在旋转。
3.  **如果我在本地**登录到盒子并浏览**一切运行正常**。所有页面都拉起，因此正在查询数据库。这一切似乎都很正常。
4.  事件日志中没有错误。
5.  我们的内部（应用程序级）错误日志记录没有记录任何错误。
6.  我认为记录了每个请求的基本 IIS 日志文件**没有**显示这些请求进入的记录。

而且，如果我重新启动网站的应用程序池，一切都会立即恢复。或者，如果我只等一个小时左右，它就会回来。

所以，我排除了：

1.  DNS问题，因为我没有问题终端服务到主机名的框中。
2.  数据库问题，因为当我在盒子本地并四处冲浪时，该网站工作正常
3.  HTTP防火墙问题，因为我在wireshark中看到了请求，甚至正在获取要提供的图像。

我不得不假设这是我的应用程序的问题，但 IIS 甚至没有显示这些请求曾经发生过，并且 IIS 或我的应用程序中没有任何内容记录错误。

它甚至不会在每天的同一时间下降。这从晚上（@midnight）开始，似乎它逐渐开始将每天的时间移动一个小时左右，直到现在它在上午 9 点到达。

非常感谢您提供进一步故障排除的任何线索。

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T17:07:09.040

我会启动性能监视器并寻找抛出的请求和异常。我的回答没有太多价值，但它可能会开始为您指明正确的方向。

实际上，首先检查事件日志，看看是否有什么东西抛出错误。此外，检查内存使用情况和分页。

# java - 具有所有类属性的构造函数还是具有设置器的默认构造函数？

> ID：830657
> 
> 赞同：24
> 
> 时间：2009-05-06T17:01:05.717
> 
> 标签：java, constructor, setter

以下是两种方法：

*   具有所有类属性的构造函数

优点：我必须输入准确数量的参数类型，所以如果我出错，编译器会警告我（顺便说一句，有没有办法防止在参数列表上错误地切换两个 Integer 的问题？）

缺点：如果我有很多属性，则实例化行可能会变得很长，并且可能跨越两行或多行

*   setter 和默认的空构造函数

优点：我可以清楚地看到我在设置什么，所以如果我做错了什么，我可以在输入时立即查明它（我不能犯切换相同类型的两个变量的先前错误）

缺点：具有许多属性的对象的实例化可能需要几行（不知道这是否真的是一个缺点），如果我忘记设置一个属性，编译器不会说任何东西。

你会做什么，为什么？您是否知道建议的任何灯光模式（考虑到每次实例化具有 7 个以上属性的对象时都应该使用它）？我问这个是因为我倾向于不喜欢大型构造函数，因为我无法快速找出我正在寻找的变量在哪里，另一方面，我发现“设置所有属性”容易丢失一些属性。

随意争论我的利弊假设，因为它们只是我的想法:)

更新 - 我发现了一个与此相关的问题：[Building big, immutable objects without using constructors have long parameter lists](https://stackoverflow.com/questions/2848938/building-big-immutable-objects-without-using-constructors-having-long-parameter)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-06T17:06:05.347

您已经错过了拥有带有大量参数的构造函数的最大优点：它允许您创建不可变类型。

创建不可变类型*而没有*大量构造函数讨厌的正常方法是拥有一个辅助类型 - 一个*构建器*，它维护您在最终对象中想要的值，然后在您准备好时构建不可变对象。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-05-06T17:09:55.600

您可以查看 Joshua Bloch 倡导的 Builder 模式，并在**Effective Java**中进行了描述。[在http://developers.sun.com/learning/javaoneonline/2007/pdf/TS-2689.pdf](http://developers.sun.com/learning/javaoneonline/2007/pdf/TS-2689.pdf)上有一个介绍要点；毫无疑问，您可以找到更好的参考。

基本上，您有另一个类，可能是一个内部类，它提供以设置的属性命名的方法，并返回原始构建器，以便您可以链接调用。它产生了相当可读的代码块。

例如，假设我有一个简单`Message`的几个属性。构建它的客户端代码可以使用构建器来准备 a `Message`，如下所示：

```
Message message = new Message.Builder()
    .sender( new User( ... ) )
    .recipient( new User( ... ) )
    .subject( "Hello, world!" )
    .text( messageText )
    .build(); 
```

的片段`Message.Builder`可能类似于以下内容：

```
public class Builder {

    private User sender = null;
    // Other properties

    public Builder sender( User sender ) {
        this.sender = sender;
        return this;
    }
    // Methods for other properties

    public Message build() {
        Message message = new Message();
        message.setSender( sender );
        // Set the other properties
        return message;
    }

} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-06T17:06:51.663

最近关于 API 可用性的学术研究（CMU 和 Microsoft）表明，使用 setter 的默认构造函数将是可用性方面的最佳选择。这是来自 Jeff Stylos 和 Steven Clarke 的“对象构造函数中需要参数的可用性影响”，并在国际软件工程会议上发表：

[抽象的](http://portal.acm.org/citation.cfm?id=1248820.1248828)：API 的可用性对程序员的生产力越来越重要。基于对特定 API 的可用性研究的经验，探索了用于研究许多 API 共有的设计选择的可用性的技术。进行了一项比较研究，以评估专业程序员如何在对象的构造函数中使用带有所需参数的 API，而不是无参数的“默认”构造函数。据推测，通过引导程序员正确使用对象并防止错误，所需的参数将创建更多可用和自记录的 API。然而，在研究中发现，与预期相反，程序员强烈倾向于使用不需要构造函数参数的 API 并且更有效。参与者

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-06T17:27:48.337

您在帖子中提到了它，但我认为这是值得更多关注的重点：除非每个输入参数都是不同的类型，否则大型构造函数的最大问题是转置几个变量*非常*容易。编译器是一个不可靠的安全网——它会捕捉到一些错误，但漏掉的错误将更加难以识别和调试。特别是因为一个巨大的构造函数的输入列表是非常不透明的，除非你在另一个窗口中打开了 API。

Getter 和 setter 更容易调试，特别是如果您制定了在对象未正确填充时引发运行时异常的安全措施。而且我是“易于调试”的忠实拥护者。

在此线程之前，我从未听说过 Rob 提到的 Builder 模式。我自己从未使用过它（显然），但它非常有趣。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-06T21:53:22.237

出于上述不变性的原因，我更喜欢使用构造函数参数。如果这为您提供了一个带有大量参数（比如说四个以上）的构造函数，那对我来说就是一种代码味道：其中一些参数应该捆绑在一起成为它们自己的类型。

例如，如果你有这样的事情：

```
class Contact
{
    public Contact(string firstName, string lastName, string phoneNumber,
        string street, string city, string state, int zipCode) { ... }
} 
```

我将其重构为：

```
class Contact
{
    public Contact(Person person, PhoneNumber number, Address address) { ... }
}

class Person
{
    public Person(string firstName, string lastName) { ... }
}

class PhoneNumber
{
    public PhoneNumber(string digits) { ... }
}

class Address
{
    public Address(string street, string city, string state, int zipCode) { ... }
} 
```

过大的类是 OOP 代码库中一个非常常见的设计问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T17:11:07.207

还有其他方面。如果您希望能够在设计时而不是在运行时对类进行某些操作，例如将您的类作为对象添加到 Object Palette（这是使用 Netbeans 的 Java）中，您需要在为了能够这样做。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-06T17:50:37.797

这里还有其他策略。在试图弄清楚如何处理大量参数之前，我认为重新审视你的设计并看看你的类是否做得太多是很重要的。看看您是否可以将一些参数组合到一个新类中，并将一些行为移到该类中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-06T18:47:19.627

> setter 和默认的空构造函数

[JRL 间接地谈到了它](https://stackoverflow.com/questions/830657/constructor-with-all-class-properties-or-default-constructor-with-setters/830717#830717)，但考虑使用 setter 的一个原因是让对象符合[JavaBean 规范](http://java.sun.com/javase/technologies/desktop/javabeans/api/index.html)。这使得实例可以通过自省工具和使用某些[序列化技术的持久性进行](http://java.sun.com/javase/6/docs/api/java/beans/XMLEncoder.html)[编辑](http://java.sun.com/javase/6/docs/api/java/beans/PropertyDescriptor.html#getWriteMethod())。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-06T22:01:05.823

谁说你不能两者兼得？我想说强制属性进入构造函数，可选属性由设置器处理。顺便说一句，谁说每个属性都需要一个二传手？如果两个属性在概念上属于一起，为什么不将它们设置在一起呢？

我也喜欢 Builder 模式，但最重要的规则是：始终使用你的大脑并找到最适合特定问题的设计。没有一种万能的解决方案。

# sql-server - Sql Server：如何在拒绝 SELECT 的表上编写触发器

> ID：830662
> 
> 赞同：3
> 
> 时间：2009-05-06T17:01:56.930
> 
> 标签：sql-server, permissions, triggers, access-denied

您好，我有一张表，我拒绝向用户提供 SELECT privs。
该表有一个引用 INSERTED 表的触发器，基本上是在执行

```
AFTER UPDATE SET <table>.[UPDATED] = getdate() 
  WHERE ROWID IN SELECT ROWID FROM INSERTED 
```

它给了我一个错误，说“SELECT PERMISSIONS DENIED”，我猜是因为 SELECT FROM INSERTED。

如何保持 SELECT 拒绝，但允许触发器从 INSERTED 伪表中选择？

**提前致谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T14:02:57.823

考虑添加一个**EXECUTE AS**子句，以便触发器以架构所有者的权限运行。

```
CREATE TRIGGER [dbo].[TR_Product_Update] ON [Product]
   WITH EXECUTE AS OWNER
   AFTER UPDATE
AS
SELECT ProductId
FROM INSERTED 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T17:55:03.903

为什么拒绝选择？只是不授予他们选择权怎么办？拒绝选择和不授予选择之间存在细微差别。此外，如果您拒绝选择任何系统级角色，那么这也可能是问题的一部分。

**- 编辑 -**

在您询问 SQL Server 是否具有上下文信息的评论中。[2005 可以，您可以在此处](http://www.sqlhub.com/2009/03/session-variable-contextinfo-sql-server.html)查看如何使用它。

> 会话变量 – Context_Info：会话是任何编程语言中的强大工具。SQL-Server 不是一种完整的编程语言，但它确实支持当前会话或连接的会话变量。它将会话的值存储在 128 字节的二进制信息中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T17:28:45.260

加入插入的表，而不是像：

```
update t1
set updated = getdate()
from table1 t1
join inserted i
on i.rowid = t1.rowid 
```

无论如何，这也可能比子选择更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T13:01:11.567

我怀疑您的问题是您的 UPDATE 语句本身需要 SELECT 权限。

我创建了一个测试数据库，如下所示：

`DROP DATABASE triggerPermissionTest
CREATE DATABASE triggerPermissionTest
GO
USE triggerPermissionTest
GO
CREATE USER foo FROM LOGIN tester
GO
CREATE TABLE triggerTable (id int)
GO
DENY SELECT ON triggerTable to foo
GRANT UPDATE ON triggerTable to foo
GO
CREATE TRIGGER execAsTrigger ON triggerTable
AFTER UPDATE AS SELECT * FROM triggerTable
GO
INSERT INTO triggerTable VALUES (1)
GO` 

并使用“tester”登录尝试以下更新语句：

`UPDATE triggerTable SET id = 2
GO
UPDATE triggerTable SET id = id *2
GO` 

第一个执行良好并且触发器执行（将 select * from triggerTable 的结果提供给没有选择权限的用户，证明它设法进行了选择）。

第二个给我一个错误，指出我没有对 triggerTable 的选择权限（因为它需要从 triggerTable 中进行选择才能获取 id 的值来进行更新）。

这使我得出结论，触发器是问题附带的，而 UPDATE 语句是权限问题的原因。

# .net - C++/CLI 终结器和运算符

> ID：830663
> 
> 赞同：4
> 
> 时间：2009-05-06T17:02:00.287
> 
> 标签：.net, c++-cli, managed-c++

在以下示例中，我得到：

```
error C2300: 'UnmanagedClass' : class does not have a finalizer called '!SmartPointer' 
```

如果我删除 operator->，这个错误就会消失。有人可以解释为什么会这样吗？

```
// Unmanaged class.
class UnmanagedClass { };

public ref class SmartPointer {
public:
    SmartPointer(UnmanagedClass* u) : m_ptr(u) { }
    ~SmartPointer() { this->!SmartPointer(); }
    !SmartPointer() { delete m_ptr; }

    // This line triggers C2300.
    UnmanagedClass* operator->() { return m_ptr; }
};

int main() {
    SmartPointer^ s = gcnew SmartPointer(new UnmanagedClass);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T17:11:29.513

您正在覆盖 -> 运算符，因此当您这样做时：

```
~SmartPointer() { this->!SmartPointer(); } 
```

你有效地打电话

```
~SmartPointer() { m_ptr->!SmartPointer(); } 
```

不过，我相信您可以通过以下方式解决此问题：

```
~SmartPointer() { (*this).!SmartPointer(); } 
```

# iphone - 从 NSDictionary 实例化自定义类

> ID：830673
> 
> 赞同：20
> 
> 时间：2009-05-06T17:03:53.603
> 
> 标签：iphone, objective-c, collections, nsdictionary

我觉得这是个愚蠢的问题，但我还是会问...

我有一个`NSDictionary`对象集合，其键/值对对应于我创建的自定义类，称之为`MyClass`。有没有一种简单或“最佳实践”的方法可以让我基本上做一些类似`MyClass * instance = [`地图`NSDictionary`属性的事情`MyClass` `];`？`NSCoding`我有一种感觉，我需要用or做点什么`NSKeyedUnarchiver`，但与其自己跌跌撞撞，我认为那里的某个人可能能够为我指明正确的方向。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-06T18:40:45.947

-setValuesForKeysWithDictionary: 方法以及 -dictionaryWithValuesForKeys: 是您想要使用的。

例子：

```
// In your custom class
+ (id)customClassWithProperties:(NSDictionary *)properties {
   return [[[self alloc] initWithProperties:properties] autorelease];
}

- (id)initWithProperties:(NSDictionary *)properties {
   if (self = [self init]) {
      [self setValuesForKeysWithDictionary:properties];
   }
   return self;
}

// ...and to easily derive the dictionary
NSDictionary *properties = [anObject dictionaryWithValuesForKeys:[anObject allKeys]]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-10-19T06:44:06.750

NSObject上没有`allKeys`。您需要在 NSObject 上创建一个额外的类别，如下所示：

NSObject+PropertyArray.h

```
@interface NSObject (PropertyArray)
- (NSArray *) allKeys;
@end 
```

NSObject+PropertyArray.m

```
#import <objc/runtime.h>

@implementation NSObject (PropertyArray)
- (NSArray *) allKeys {
    Class clazz = [self class];
    u_int count;

    objc_property_t* properties = class_copyPropertyList(clazz, &count);
    NSMutableArray* propertyArray = [NSMutableArray arrayWithCapacity:count];
    for (int i = 0; i < count ; i++) {
        const char* propertyName = property_getName(properties[i]);
        [propertyArray addObject:[NSString  stringWithCString:propertyName encoding:NSUTF8StringEncoding]];
    }
    free(properties);

   return [NSArray arrayWithArray:propertyArray];
}
@end 
```

例子：

```
#import "NSObject+PropertyArray.h"

...

MyObject *obj = [[MyObject alloc] init];
obj.a = @"Hello A";  //setting some values to attributes
obj.b = @"Hello B";

//dictionaryWithValuesForKeys requires keys in NSArray. You can now
//construct such NSArray using `allKeys` from NSObject(PropertyArray) category
NSDictionary *objDict = [obj dictionaryWithValuesForKeys:[obj allKeys]];

//Resurrect MyObject from NSDictionary using setValuesForKeysWithDictionary
MyObject *objResur = [[MyObject alloc] init];
[objResur setValuesForKeysWithDictionary:objDict]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T17:23:13.777

假设您的类符合[键值编码](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html)协议，您可以使用以下内容：（为方便起见，在 NSDictionary 上定义为类别）：

```
// myNSDictionaryCategory.h:
@interface NSDictionary (myCategory)
- (void)mapPropertiesToObject:(id)instance
@end 
```

```
// myNSDictionaryCategory.m:
- (void)mapPropertiesToObject:(id)instance
{
    for (NSString * propertyKey in [self allKeys])
    {
        [instance setValue:[self objectForKey:propertyKey]
                    forKey:propertyKey];
    }
} 
```

以下是您将如何使用它：

```
#import "myNSDictionaryCategory.h"
//...
[someDictionary mapPropertiesToObject:someObject]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-01T23:17:11.577

如果你做这种事情的机会是你处理 JSON，你可能应该看看 Mantle [https://github.com/Mantle/Mantle](https://github.com/Mantle/Mantle)

然后你会得到一个方便的方法`dictionaryValue`

```
[anObject dictionaryValue]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-30T12:41:06.727

只需为 NSObject 添加类别即可从您的自定义对象中获取 dictionaryRepresentation（在我的情况下，仅在 JSON 序列化中使用）：

```
//  NSObject+JSONSerialize.h
#import <Foundation/Foundation.h>

@interface NSObject(JSONSerialize)

- (NSDictionary *)dictionaryRepresentation;

@end

//  NSObject+JSONSerialize.m
#import "NSObject+JSONSerialize.h"
#import <objc/runtime.h>

@implementation NSObject(JSONSerialize)

+ (instancetype)instanceWithDictionary:(NSDictionary *)aDictionary {
    return [[self alloc] initWithDictionary:aDictionary];
}

- (instancetype)initWithDictionary:(NSDictionary *)aDictionary {
    aDictionary = [aDictionary clean];

    self.isReady = NO;

    for (NSString* propName in [self allPropertyNames]) {
        [self setValue:aDictionary[propName] forKey:propName];
    }

    //You can add there some custom properties with wrong names like "id"
    //[self setValue:aDictionary[@"id"] forKeyPath:@"objectID"];
    self.isReady = YES;

    return self;
}

- (NSDictionary *)dictionaryRepresentation {
    NSMutableDictionary *result = [NSMutableDictionary dictionary];
    NSArray *propertyNames = [self allPropertyNames];

    id object;
    for (NSString *key in propertyNames) {
        object = [self valueForKey:key];
        if (object) {
            [result setObject:object forKey:key];
        }
    }

    return result;
}

- (NSArray *)allPropertyNames {
    unsigned count;
    objc_property_t *properties = class_copyPropertyList([self class], &count);

    NSMutableArray *rv = [NSMutableArray array];

    unsigned i;
    for (i = 0; i < count; i++) {
        objc_property_t property = properties[i];
        NSString *name = [NSString stringWithUTF8String:property_getName(property)];
        [rv addObject:name];
    }
    //You can add there some custom properties with wrong names like "id"
    //[rv addObject:@"objectID"];
    //Example use inside initWithDictionary:
    //[self setValue:aDictionary[@"id"] forKeyPath:@"objectID"];

    free(properties);

    return rv;
}

@end 
```

此外，您可以看到我的解决方案不适用于具有嵌套对象或数组的自定义对象。对于数组 - 只需更改`dictionaryRepresentation`方法中的代码行：

```
 if (object) {
        if ([object isKindOfClass:[NSArray class]]) {
            @autoreleasepool {
                NSMutableArray *array = [NSMutableArray array];
                for (id item in (NSArray *)object) {
                    [array addObject:[item dictionaryRepresentation]];
                }

                [result setObject:array forKey:key];
            }
        } else {
            [result setObject:object forKey:key];
        }
    } 
```

# c++ - C++ 数据库连接？

> ID：830674
> 
> 赞同：4
> 
> 时间：2009-05-06T17:03:55.803
> 
> 标签：c++, database, connectivity

嘿，我想知道如何用 C++ 连接数据库？任何支持许多数据库的跨平台解决方案？我知道 SQLAPI++，但它是一个共享软件……所以有免费的吗？如果我将操作系统仅限于 Windows，我有什么解决方案？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-06T17:29:56.880

[SOCI - C++ 数据库访问库](http://soci.sourceforge.net/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T17:08:53.857

为什么不是 Qt 框架？它现在在 LGPL 下可用。它易于使用、跨平台、免费，提供了一个简单的 api 来访问多个数据库引擎，而无需了解底层数据库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T17:14:13.220

对于跨平台，对于您的应用程序和它们可以使用的数据库，您最好的选择是以某种形式使用 ODBC。尝试谷歌搜索“odbc c++ wrapper”以获得许多可能的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-06T17:05:59.480

sqlite呢？

[http://www.sqlite.org/](http://www.sqlite.org/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-11-15T12:38:45.880

您可以检查[Debea](http://debea.net) - SQL Access and ORM for C++

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T17:09:51.547

您可以使用 OTL ( [http://otl.sourceforge.net/](http://otl.sourceforge.net/) ) 连接到 Oracle 和 DB2-CLI 数据库。它还将使用 ODBC 进行连接，因此如果您的数据库支持它应该可以工作。

它基于 C++ 模板。

它是免费的，但我不确定它是根据什么许可证发布的。

# .net - 如何从实用程序类中读取 asp.net 页面的资源

> ID：830684
> 
> 赞同：0
> 
> 时间：2009-05-06T17:06:37.263
> 
> 标签：.net, asp.net, resources

我需要从实用程序类的页面资源文件中获取一个字符串。

我试过了

```
 ResourceManager resources = 
            new ResourceManager(
                "Company.Application.Folder.App_LocalResources.Page.aspx", 
                Assembly.GetExecutingAssembly());

        string value = resources.GetString("ResourceName"); 
```

但有一个异常，即找不到资源。我也尝试将“Company.Application.Folder.Page.aspx”作为路径。

您能否帮我编写正确的资源路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T17:12:18.730

你应该通过属性。

```
Company.Application.Properties.Resources.ResourceName 
```

（假设 Company.Application 是默认命名空间）

# soap - 如何使用 Java JAX-WS 添加 SOAP 标头

> ID：830691
> 
> 赞同：23
> 
> 时间：2009-05-06T17:07:29.460
> 
> 标签：soap, header, jax-ws

使用 JAX-WS 的典型 SOAP 客户端请求可能是

```
FooService service = new FooService();
FooPort port = service.getFooPort();
FooPayload payload = new FooPayload();
payload.setHatSize(3);
payload.setAlias("The Hat");
...
port.processRequest(payload); 
```

这会生成一个 HTTP 请求内容，例如

```
<?xml ... ?>
<S:Envelope xmlns:S="http://...soap-envelope">
  <S:Body>
    <!-- payload -->
  </S:Body>
</S:Envelope> 
```

通过操纵 port.processRequest() 调用的参数，您只能影响“有效负载”部分。您不能影响 XML 消息的外部。

我想在 SOAP 正文之前插入一个 SOAP 标头

```
<S:Header>
   <X:Security xmlns:X="http://...wsssecurity...>
      <X:BinarySecurityToken>kjh...897=</X:BinarySecurityToken>
   </X:Security>
</S:Header> 
```

我怎么做？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-07T15:53:43.263

谢谢努诺，

只要我弄清楚如何正确登录到 stackoverflow.com，我就会对您的回复做正确的事情。

与此同时，这是我最终得到的代码：

```
FooService service = new FooService();
service.setHandlerResolver(new HandlerResolver() {
    public List<Handler> getHandlerChain(PortInfo portInfo) {
        List<Handler> handlerList = new ArrayList<Handler>();
        handlerList.add(new RGBSOAPHandler());
        return handlerList;
    }
});
FooPort port = service.getFooPort();
FooPayload payload = new FooPayload();
payload.setHatSize(3);
payload.setAlias("The Hat");
...
port.processRequest(payload); 
```

和

```
class RGBSOAPHandler implements SOAPHandler<SOAPMessageContext> {

    public Set<QName> getHeaders() {
        return new TreeSet();
    }

    public boolean handleMessage(SOAPMessageContext context) {
        Boolean outboundProperty = 
            (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);
        if (outboundProperty.booleanValue()) {
            SOAPMessage message = context.getMessage();
            try {
                SOAPEnvelope envelope = context.getMessage()
                        .getSOAPPart().getEnvelope();
                SOAPFactory factory = SOAPFactory.newInstance();
                String prefix = "X";
                String uri = "http://...wsssecurity...";
                SOAPElement securityElem = 
                        factory.createElement("Security",prefix,uri);
                SOAPElement tokenElem = 
                        factory.createElement("BinarySecurityToken",prefix,uri);
                tokenElem.addTextNode("kjh...897=");
                securityElem.addChildElement(tokenElem);
                SOAPHeader header = envelope.addHeader();
                header.addChildElement(securityElem);

            } catch (Exception e) {
                System.out.println("Exception in handler: " + e);
            }
        } else {
            // inbound
        }
        return true;
    }

    public boolean handleFault(SOAPMessageContext context) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    public void close(MessageContext context) {
        //
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T17:25:19.293

您可能想查看处理程序和处理程序链。-我最近必须将 cookie 添加到给定的 Web 服务调用中，这就是我所做的，刚刚创建了一个拦截初始调用并注入 cookie 的处理程序，您还可以操作带有 Pivot 处理程序的调用标头

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-25T03:50:10.553

对于添加 Soap 标头，如果您在 Web 应用程序服务器上实现 WS，则在您按照 WS-SECURITY 标准配置后，Was 将在标头添加安全部分，例如 web-policy 等。我不明白为什么需要除了加密的内容部分，如加密密码等，添加自己

# c# - 如果我在子类中实现 ISerializable，父类也必须这样做吗？

> ID：830693
> 
> 赞同：8
> 
> 时间：2009-05-06T17:08:17.493
> 
> 标签：c#, serialization

我必须在派生类中实现 ISerializable（进行一些自定义序列化/反序列化），但父类被标记为 [Serializable]。序列化“有效”（我可以在没有运行时错误的情况下进行序列化和反序列化），但看起来基类数据没有被保留。

我在派生类中实现 GetObjectData 是否否定了基类的序列化？如果是这样，我是否必须在基类中实现 ISerializable ，然后在派生类中调用 base.GetObjectData(...) 以保留数据，或者是否有比编写 info.AddValue(...) 100 次更好的方法?

编辑>谢谢蒂姆。你证实了我的怀疑。问题本身更进一步。在我的例子中，基类实现了 BindingList(T)，它本身没有实现 ISerializable。

在此期间，对于每个属性，我将尝试： 在 ISerializable 构造函数中 base.Property = info.GetValue(...);

并在 GetObjectDate info.AddValue("name", base.Property);

除非优秀的 SO 社区提出更好的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T17:11:04.210

> 我是否必须在基类中实现 ISerializable，然后在派生类中调用 base.GetObjectData(...)

是的。一旦你实施`ISerializable`，任何自动序列化都会被关闭。

同样，您需要在基类和派生类中实现受保护的序列化构造函数。

# ruby-on-rails - 在 Rails 中的常量上缓存模型实例的问题

> ID：830700
> 
> 赞同：1
> 
> 时间：2009-05-06T17:08:43.203
> 
> 标签：ruby-on-rails, ruby, caching, sti

我在我的一个模型上为 Rails 应用程序使用单表继承 (STI)，并且在将模型对象存储在常量上时遇到问题。我已将问题隔离到一个示例项目中并将其提交到 GitHub：http: [//github.com/fcoury/rails-sti-caching](http://github.com/fcoury/rails-sti-caching)

我要做的是在初始化程序（在 Rails`/config/initializers/`目录中）上加载模型实例（在本例中为 Music 模型，通过 STI 从 Media 模型继承）并将其保持为常量：

```
MUSIC_CACHE = Hash.new
Music.all.each { |m| MUSIC_CACHE[m.id] = m } 
```

我有一个示例控制器，它执行以下操作：

```
class MusicsController < ApplicationController
  def index
    require 'pp'
    pp MUSIC_CACHE
    @debug = []
    MUSIC_CACHE.each_pair do |k, v|
      music = Music.find(k)
      d "Object for Music.find(#{k})  => class: #{music.class} - class obj_id: #{music.class.object_id} - #{music.inspect}"
      d "Object for MUSIC_CACHE[#{k}] => class: #{v.class} - class obj_id: #{v.class.object_id} - #{v.inspect}"

      begin
        d "  - Music.is_a?(Media) => #{v.is_a?(Media)}"
        d "  - Try to call name   => #{v.name}"
      rescue
        d "*** Error raised:\n#{$!}"
      end
    end

    @musics = Music.all
  end

  def d(s)
    puts s
    @debug << s
  end
end 
```

以及与之相伴的观点：

```
<h1 id="music">Music</h1>

<ul>
  <% for m in @musics %>
  <li><%= m.name %> - <%= m.file %></li>
  <% end %>
</ul>

<pre><%=h @debug.join("\n") %></pre> 
```

这段代码第一次运行时，`<pre>`标签上的输出是这样的：

```
 Object for Music.find(2)  => class: Music - class obj_id: 13067420 - #<Music id: 2, name: "5th Symphony", file: "5s.mp3", type: "Music", created_at: "2009-05-06 16:31:41", updated_at: "2009-05-06 16:31:41">
  Object for MUSIC_CACHE[2] => class: Music - class obj_id: 13067420 - #<Music id: 2, name: "5th Symphony", file: "5s.mp3", type: "Music", created_at: "2009-05-06 16:31:41", updated_at: "2009-05-06 16:31:41">
    - Music.is_a?(Media) => true
    - Try to call name   => 5th Symphony 
```

但是，如果我只是重新加载页面，则会输出以下内容：

```
Object for Music.find(2)  => class: Music - class obj_id: 18452280 - #<Music id: 2, name: "5th Symphony", file: "5s.mp3", type: "Music", created_at: "2009-05-06 16:31:41", updated_at: "2009-05-06 16:31:41">
Object for MUSIC_CACHE[2] => class: Music - class obj_id: 13067420 - #<Music id: 2, name: "5th Symphony", file: "5s.mp3", type: "Music", created_at: "2009-05-06 16:31:41", updated_at: "2009-05-06 16:31:41">
  - Music.is_a?(Media) => false
*** Error raised:
You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.include? 
```

有谁知道这个错误背后的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T17:52:43.113

我的第一个想法是 Rails 在服务请求后释放（无效）所有模型对象。因此`class: Music - class obj_id: 13067420`在第二个请求中变得不可用。我建议查看 ActiveRecord 源代码并找出谁使模型对象无效。

这个rails模型缓存教程也很有用：[http ://railscasts.com/episodes/115-caching-in-rails-2-1](http://railscasts.com/episodes/115-caching-in-rails-2-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T01:30:16.523

基本上，你不能那样做。

在开发环境中，每个请求都会重新加载您的类。这意味着它们被完全摧毁和重建。原来的类对象消失了，一个新的对象取而代之。

如果您在请求之间保留一个对象，则在第二个请求中，该对象仍将继承自原始类，即已删除的类。指向该类的常量现在指向一个新的类对象，它可能与前一个相同也可能不同，具体取决于您是否更改了类定义或影响它的插件，但它仍然是一个不同的类对象内存，旧对象将不知道它应该从这个新的类对象继承。

我假设如果您在生产环境中运行您的应用程序，它会工作。

# php - php 连接池 mysql

> ID：830707
> 
> 赞同：19
> 
> 时间：2009-05-06T17:09:56.430
> 
> 标签：php, mysql, connection, connection-pooling

我打算使用MYSQL。是否有可用的连接池扩展？或者连接的正常做法是什么？是不是到处都用这个...

```
mysqli_connect("localhost", "xxx", "xxx", "test"); 
```

人们只是使用普通的`mysql_connect`还是`pconnect`..？PConnect有多好`pconnect`，我应该做哪些设置？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-06T17:15:13.500

你用过`mysql_pconnect()`吗？ 行为与两个主要区别`mysql_pconnect()`非常相似。`mysql_connect()`

首先，在连接时，该函数将首先尝试查找已使用相同主机、用户名和密码打开的（永久）链接。如果找到，将返回它的标识符，而不是打开新连接。

其次，脚本执行结束时不会关闭与 SQL 服务器的连接。相反，该链接将保持打开状态以供将来使用（`mysql_close()`不会关闭由 建立的链接`mysql_pconnect()`）。

因此，这种类型的链接被称为“持久”

[在这里](http://ir.php.net/function.mysql-pconnect)检查

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2011-06-01T10:02:54.237

> PHP 5.3 中为 mysqli 扩展引入了持久连接支持。PDO MYSQL 和 ext/mysql 中已经存在支持。持久连接背后的想法是客户端进程和数据库之间的连接可以被客户端进程重用，而不是被多次创建和销毁。这减少了每次需要时创建新连接的开销，因为未使用的连接被缓存并准备好被重用。
> 
> 与 mysql 扩展不同，mysqli 没有提供单独的函数来打开持久连接。**要打开持久连接，您必须在连接时将 p: 添加到主机名。**

来源：[http ://www.php.net/manual/en/mysqli.persistconns.php](http://www.php.net/manual/en/mysqli.persistconns.php)

```
sample code:
$GLOBALS["mysqli"] = new mysqli('p:localhost', 'username', 'password', 'db_name'); 
```

编辑：对不起，没有看到其他答案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-08-02T12:34:22.393

使用 mysqli 或 PDO 扩展而不是旧的 mysql 扩展。

你可以告诉`mysqli_connect`或`mysqli::__construct`使用持久连接，如果你在你的主机名前加上'p：'

[http://php.net/manual/en/mysqli.construct.php](http://php.net/manual/en/mysqli.construct.php)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-07-01T03:49:24.537

This is an old question, but I wanted to add my two cents, as I was looking at this same issue. As of PHP 5.3, mysqli supports persistent connections, you just need to prepend p: to the front of the host name.

If you are running Apache, have you tried looking into connection pooling with mysql through the Apache mod_dbd module? It supports connection pooling for MySQL. [http://httpd.apache.org/docs/2.2/mod/mod_dbd.html](http://httpd.apache.org/docs/2.2/mod/mod_dbd.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-03-21T08:41:40.857

有3个连接功能：

**mysql_connect**：正常连接，没有池，不能执行存储过程（只是sql）

**mysql_pconnect**：池连接，不能执行存储过程（只是 sql）

**mysqli_connect** : 正常连接，无pooling，可以执行存储过程（需要mysql 5以上）

**mysqli_pconnect**：不存在。没有内置的连接函数既处理存储过程又处理池

我的建议（通过经验和冲浪）：

如果您需要存储过程，请省略池并使用 mysqli_connect

如果不需要存储过程，请使用 mysql_pconnect

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-03-21T08:54:44.500

不完全是一个答案，但我认为您可能还会考虑 PHP 数据对象 (PDO) [http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php) 和 PDO for MySQL [http://php.net/manual/en/ ref.pdo-mysql.php](http://php.net/manual/en/ref.pdo-mysql.php)

# c++ - 这个程序是异步运行还是同步运行？

> ID：830708
> 
> 赞同：4
> 
> 时间：2009-05-06T17:10:11.390
> 
> 标签：c++, winapi, visual-c++, operating-system, iocp

当我运行这个程序

```
OVERLAPPED o;

int main()
{
    ..
    CreateIoCompletionPort(....);

    for (int i = 0; i<10; i++)
    {
        WriteFile(..,&o);

        OVERLAPPED* po;
        GetQueuedCompletionStatus(..,&po);
    }
} 
```

似乎 WriteFile 直到写入工作完成才返回。同时，调用 GetQueuedCompletionStatus()。该行为类似于同步 IO 操作，而不是异步 IO 操作。

这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T18:09:06.130

如果文件句柄和卷启用了写入缓存，则文件操作可能只需要一个内存副本缓存即可完成，稍后会延迟刷新。由于没有发生实际的 IO，因此在这种情况下没有理由进行异步 IO。

在内部，每个 IO 操作都由一个[IRP](http://msdn.microsoft.com/en-us/library/ms795960.aspx)（IO 请求包）表示。它由内核创建并交给文件系统来处理请求，它通过分层驱动程序向下传递，直到请求成为实际的磁盘控制器命令。该驱动程序将发出请求，将 IRP 标记为待处理并返回对线程的控制。如果为重叠 IO 打开句柄，内核会立即将控制权交还给您的程序。否则，内核将等待 IRP 完成后再返回。

然而，并不是所有的 IO 操作都能一直到磁盘。文件系统可以确定写入应该被缓存，直到稍后才写入。甚至还有一个可以完全使用缓存来满足操作的特殊路径，称为[快速 IO](http://msdn.microsoft.com/en-us/library/ms790753.aspx)。即使您发出异步请求，快速 IO 也始终是同步的，因为它只是将数据复制到缓存中和从缓存中复制出来。

[进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)，在高级输出模式下，显示不同的模式，并在 IRP 未决时在状态字段中显示空白。

写入缓存中允许未完成的数据量是有限制的。一旦填满，写入操作不会立即完成。尝试一次写入大量数据，并进行可能的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T06:58:23.490

我写了一篇博客，题为“什么时候异步文件写入不是异步的”，不幸的是，答案是“大部分时间”。请参阅此处的帖子：http: [//www.lenholgate.com/blog/2008/02/when-are-asynchronous-file-writes-not-asynchronous.html](http://www.lenholgate.com/blog/2008/02/when-are-asynchronous-file-writes-not-asynchronous.html)

它的要点是：

*   出于安全原因，Windows 以同步方式扩展文件
*   您可以尝试通过在开始之前将文件的结尾设置为较大的值，然后在完成时将文件修剪为正确的大小来解决此问题。
*   您可以通过使用告诉缓存管理器使用您的缓冲区而不是它的缓冲区 `FILE_FLAG_NO_BUFFERING`
*   至少它不像你被迫使用那样糟糕`FILE_FLAG_WRITE_THROUGH`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T17:25:06.923

如果 GetQueuedCompletionStatus 正在被调用，那么对 WriteFile 的调用是同步的（并且它已经返回），但是如果它是异步的，即使在返回之后它仍然可以修改 &o。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T17:28:06.743

从MSDN的[这个页面：](http://msdn.microsoft.com/en-us/library/aa365747(VS.85).aspx)

> 对于异步写入操作，hFile 可以是使用 FILE_`FLAG_OVERLAPPED`标志的 CreateFile 函数打开的任何句柄，也可以是套接字或接受函数返回的套接字句柄。

另外，从[这个页面](http://msdn.microsoft.com/en-us/library/aa363862(VS.85).aspx)：

> 如果提供了句柄，则必须为重叠 I/O 完成打开它。例如，您必须`FILE_FLAG_OVERLAPPED`在使用 CreateFile 函数获取句柄时指定标志。

# c# - 如何使用 LINQ 来“修剪”字典？

> ID：830709
> 
> 赞同：5
> 
> 时间：2009-05-06T17:10:24.727
> 
> 标签：c#, linq

我有一个字典和一个要从字典中删除的键列表。这是我现在的实现：

```
var keys = (from entry in etimes
            where Convert.ToInt64(entry.Value) < Convert.ToInt64(stime)
            select entry.Key).ToList();

foreach (var key in keys)
{
    etimes.Remove(key);
    count--;
} 
```

我可以做些什么来消除 foreach 循环吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T17:14:52.750

```
var pruned = etimes.Where(entry => Convert.ToInt64(entry.Value) >= 
    Convert.ToInt64(stime)).ToDictionary(entry => entry.Key, 
        entry => entry.Value); 
```

此语句仅使用 LINQ`Where`函数过滤字典以选择要*保留*的项目而不是要删除的项目（然后需要进一步的代码，如您所示）。由于需要指定两个 lambda 表达式以从 a 中选择键和值（然后创建一个新字典） ，因此`ToDictionary`转换`IEnumerable<KeyValuePair<TKey, TValue>>`为所需`Dictionary<TKey, TValue>`类型，并且至少非常简单，即使不是非常优雅或高效。`KeyValuePair`这么说，我真的不认为这是一个问题，特别是如果字典很小和/或被删除的项目数量很大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T17:35:21.157

好吧，抛开性能或可读性问题不谈，难道不能像下面这样做：

```
<Extension> void itemDelete(List l, object item) {
    l.Remove(item)
}

var keys = (from entry in etimes
        where Convert.ToInt64(entry.Value) < Convert.ToInt64(stime)
        select entry.Key).ToList();

keys.foreach(itemDelete()); 
```

Forgive my coding, I'm not 100% certain of the exact syntax (especially in C#); consider that pseudo-code. Note the addition of the new function, and the **.foreach** function on the end of the LINQ query. I know this would be possible in VB, i assume C# has something similar... if not you could always write your own **.foreach** extension. It may or may not improve anything, but it's an idea.

# asp.net - asp.net - 传递通用列表

> ID：830729
> 
> 赞同：3
> 
> 时间：2009-05-06T17:14:14.750
> 
> 标签：asp.net, vb.net, generics, collections

我有一个将通用列表作为参数的实用程序类。

代码如下：

```
Function DoStuff(collection as Object, elt as Object)
   ...
   collection.Add(elt)
   ...
End Function 
```

这被称为：

```
DoStuff( List(Of Foo), new Foo() )
DoStuff( List(Of Bar), new Bar() ) 
```

大约有十几种不同的类型。

目前，作为对象传递会导致后期绑定分辨率警告，尽管它运行良好。

我尝试了不同的方法来传递集合和 elt（Foo 和 Bar 都扩展了一个基类），但似乎无法找出“正确”的方法来做到这一点。

想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T17:19:35.767

我想你正在寻找这样的东西。

```
Public Sub DoStuff(Of T)(collection As List(Of T), elt As T)
    ...
    collection.Add(elt)
    ...
End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-01T23:33:14.457

我认为 womp 和 Qua 的答案是正确的，但是如果您的 12 种类型都继承自某个公共基类（如您原来的问题所建议的那样），您可以编写该方法使其适用于您的类型，并且仅适用于您的类型这样的：

```
Public Sub DoStuff(Of T As YourBaseClass)(collection As List(Of T), elt As T)
    ...
    collection.Add(elt)
    ...
End Sub 
```

这样，该方法仅适用于继承自`YourBaseClass`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T17:42:55.913

您应该始终努力构建/使用强类型代码。想象一下，如果将整数作为*集合*对象传递会发生什么 - 您必须手动检查变量的类型。更糟糕的是，您的方法的用户必须在文档中查找您的方法需要什么样的对象作为它的第一个参数。

您应该采用*womp*建议的方法，或者更好的是，您应该使您的参数需要一个扩展通用集合接口 ICollection(Of T) 的对象：

```
Public Function DoStuff(Of T)(collection As ICollection(Of T), elt As T) As stuff
...
collection.Add(elt)
...
End Function 
```

因为这将允许该方法的用户不仅可以传递列表，还可以传递所有其他继承 ICollection(Of T) 接口的类（synchronizedCollection、HashSet、LinkedList 或自定义类等），这确实是面向对象编程的强大功能.

# iphone - 优化presentModalViewController的加载时间：

> ID：830733
> 
> 赞同：0
> 
> 时间：2009-05-06T17:15:11.080
> 
> 标签：iphone

在我的 NiB 中，我有几个视图控制器。当应用程序启动时，所有相应的 ViewDidLoad() 调用都会被调用。

在 ViewControllerA 中，我的 ViewA 包含一个带有 100 张图片的 UiScrollView。在 ViewdidLoad 中初始化这些图片。所以在应用程序启动时，所有图片都被初始化。

在我的主菜单视图控制器中，我有一个按钮，按下时会调用 presentModalViewController:ViewControllerA

该呼叫需要 20 秒。

我认为 ViewDidload 中的预加载会优化这一点。但是，一旦电话返回并被召回（第二次调出这个 VC，它真的很快和即时）。

那么是什么原因造成的呢？为什么第一次调用 presentModalViewController 需要这么长时间。在内部，它是否试图排列所有图像？有什么办法可以优化吗？如果不是，那么显示 UiActivityIndi​​cator 的最佳方式是什么

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T13:36:27.837

事实证明，这太长了，无法发表评论。

我会先玩 UITableView 看看它是否可以应用。

如果它是完全全屏的，那么你有 UITableView 是纵向的，但是在它们的单元格中旋转你的图片。这将与景观相同。

如果滚动视图没有填满屏幕，您仍然可以尝试使用视图转换来旋转 UITableView。

然后你的下一个方法应该是在滚动视图中放置占位符，以延迟加载图像。如果所有图像的大小相同，那么这非常简单，您可以通过仅保存有限数量的这些单元来优化内存。

另一个疯狂的想法：让它成为 UIWebView。这将为您完成所有延迟加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T01:19:22.447

首先，在您的 -viewDidLoad 方法中添加一些 NSLog() 语句。当您认为他们是时，他们可能没有被调用。UIViewControllers 是懒惰的。在有人引用他们的 -view 之前，他们实际上不会加载他们的 NIB。

如果通过“调用所有相应的 ViewDidLoad() 调用”，您的意思是您实际上是手动调用 [viewController viewDidLoad] ，那将不起作用并且不要这样做。这是一个只能由系统调用的委托方法。

您可以但不应该通过调用 [viewController view] 来解决所有这些问题。这将强制加载，但这几乎总是错误的答案。

图片有多大？你真的有足够的内存来一直保存所有 100 个吗？您可以根据需要加载这些图片吗？图片是什么形状的？UITableView 可以为你做很多工作吗？如果它们在一个网格中，您可以为每个 UITableViewCell 显示 4-5 张图片，然后您将获得 UITableView 的所有优化。

# nant - 能不能 将星期几格式化为字母，如 Java 的 SimpleDateFormat "E" 模式？

> ID：830736
> 
> 赞同：1
> 
> 时间：2009-05-06T17:15:36.587
> 
> 标签：nant

我[搜索了 SO](https://stackoverflow.com/search?q=nant+tstamp)，据我所知，这还没有被问到。

我想在 NAnt 中这样做：

```
<tstamp property="Now" pattern="EEE MMM dd, HH:mm"/> 
```

希望得到类似的结果：“Tue May 15, 09:05”

[NAnt](http://nant.sourceforge.net/release/latest/help/tasks/tstamp.html)的文档没有明确给出允许的模式字母列表。我认为它可能会像在[Ant](http://ant.apache.org)中那样工作，所以我检查了[Ant 的文档](http://ant.apache.org/manual/Tasks/tstamp.html)，上面写着：

> 日期/时间模式在 Java [SimpleDateFormat](http://java.sun.com/j2se/1.4.2/docs/api/java/text/SimpleDateFormat.html)类中定义。

SimpleDateFormat 文档显示：

> E 星期几 文本星期二；周二

这就是我在 NAnt 中编写我的模式（上图）的原因。不幸的是，我得到的输出是：“EEE May 6, 12:27”，所以看起来 E 不受支持。

`${datetime::get-day-of-week(datetime::now())}`我的解决方法是用一堆 ifs检查并设置我自己的 dayofweektext 属性，阿拉：

```
<if test="${datetime::get-day-of-week(datetime::now()) == '0'}">
    <property name = "dayofweektext" value = "Sun"/>
</if> 
```

然后使用这个：

```
<tstamp property="Now" pattern="${dayofweektext} MMM dd, HH:mm" /> 
```

但是所有的ifs都会造成很多混乱。

**有没有一种模式可以做我想要的？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-10-22T23:28:14.530

dddd MMM dd, HH:mm

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-03-14T18:38:07.593

这对我有用...

```
<tstamp>
    <format property="build.date" pattern="E MMM dd HH:mm:ss z yyyy"/>
</tstamp> 
```

并生产...

```
build.date=Mon Mar 14 11:27:08 PDT 2011 
```

# c - GraphViz 边缘标签

> ID：830737
> 
> 赞同：5
> 
> 时间：2009-05-06T17:15:40.877
> 
> 标签：c, graphviz, data-visualization, dot

我正在尝试使用 graphviz 绘制 C 头文件之间的依赖关系图。

基本上，我正在做的是记录所有出现的#include 和条件（我的意思是#if 条件）。如果一个文件包含另一个文件，则它在图中成为它的父亲，潜在条件是边缘标签。

我得到一个相当大的图表。问题源于始终水平的边缘标签（您无法更改它）并且似乎总是左对齐（我尝试过 labelloc 和 labeljust 但它没有改变任何东西。“居中”的正确方法是什么？一条边的标签。

为了避免这个问题，我尝试将条件渲染为节点。如果 Ah 在 ANSI 条件下包含 Bh，则存在从 Ah 到 ANSI，然后从 ANSI 到 Bh 的链接。这看起来不错，但问题是如果 Ch 在相同条件下包含 Dh，我会看到从 Ah 到 ANSI 的链接, 一个从到 Ch 到 ANSI；一个从 ANSI 到 Bh ，一个从 ANSI 到 Dh 。问题是我不知道是 Ah 还是 Ch 包含 Bh 。有没有办法指定诸如通过节点之类的东西（ANSI下的从Ah到Bh的链接可能利用了透明度。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T17:57:36.953

labelloc 和 labeljust 对边缘没有意义。请参见[此处](http://www.graphviz.org/doc/info/attrs.html#a:labeljust)，它分别将“GC”表示为 Graph、Cluster 或“N”表示为 Node。

但是，您可以考虑*为每个*带有标签的条件生成唯一节点。然后会有多个节点具有不同的“点 ID”，但具有相同的标签（条件文本），因此很清楚它是否包含`A.h`或`C.h`包含`B.h`。我认为您会对结果感到满意，因为您已经说过它看起来不错。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-27T16:09:05.650

根据我所说明的内容，我使用具有相同标签的唯一节点取得了很多成功。根据需要获得边缘标签居中错觉的一种有趣方法是使用 shape=plaintext 的节点。

您也可以使用它来提供一个连接点 - 有许多边去往或来自明文节点，如下所示：

```
digraph joins {

node [shape=box weight=bold fontsize=18 color=black fontcolor=black]
edge [color=black fontcolor=black ]
graph[size="6,4",ratio=fill,center=1]

tblXXMaster[shape=record label="tblXXMaster | <f0>intMasterXXNumber | <f1>boolXXsPrinting"] 
set[shape=plaintext label="sets flag"]
setandclear[shape=plaintext label="sets next value\nand clears flag"]
setandclear->tblXXMaster:f0
setandclear->tblXXMaster:f1

set->tblXXMaster:f1
use[shape=plaintext label="uses current\nnumber"]
tblXXMaster:f0->use
XX[shape=plaintext label="XXs\nflag"]
tblXXMaster:f1->XX

"wndManualReceipt\n.procOne"->setandclear
"wndManualDebit\n.procOne"->setandclear
"wndApproveXXs\n.procOne\n.d005TempSetBitToZero"->setandclear
"wndPrintXXs\n.procZero\n.procOne"->setandclear
"wndUnapproveXXs\n.procZero\n.procOne"->setandclear
"wndWriteXXForMultipleInvoices\n.procOne\n.d005TempSetBitToZero"->setandclear
"wndWriteManualXX\n.procOne\n.procZero"->setandclear

"wndConfirmXXPrint\n.applyLock"->set
"wndConfirmMultiInvoiceXXPrint\n.applyLock"->set

use->"wndConfirmXXPrint\n.nextNumber"
use->"wndConfirmManualXXPrint\n.nextNumber"
use->"wndConfirmMultiInvoiceXXPrint\n.nextNumber"
XX->"wndConfirmManualXXPrint\n.doPrint"
XX->"wndConfirmMultiInvoiceXXPrint\n.doPrint"
} 
```

# sql-server - sql server中的id，date或date，id索引之间有区别吗

> ID：830740
> 
> 赞同：3
> 
> 时间：2009-05-06T17:16:23.993
> 
> 标签：sql-server, indexing

我在 sql server 2005 中创建一个索引，与同事的讨论是它是否在索引键列是 id 和 date vs date 然后是 id 之间有所不同。

在这两种情况下创建索引的方式是否存在根本差异？

它会对其他版本的 SQL Server 产生影响吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-06T17:19:20.103

当然是。有没有人查询过表中的 JUST 日期或 JUST id？date,id 的索引可用于仅查找日期，但不能仅查找 id，反之亦然

使用日期，ID：

```
Jan 1     4  
Jan 1     7  
Jan 2     6  
Jan 2     9  
Jan 2     33  
Jan 3     23  
Jan 4     1 
```

使用 id，日期：

```
1     Jan 4  
4     Jan 1  
6     Jan 2  
7     Jan 1  
9     Jan 2  
23    Jan 3  
33    Jan 2 
```

如果您的 WHERE 子句或查询中的 JOIN 同时使用日期和 id，那么任何一个索引都可以。但是您可以看到，如果您只是按日期进行查找，则第一个索引对此很有用，但第二个索引是完全随机的。

在更一般的意义上，A、B、C、D 上的索引将对 A、B、C、D、OR A、B、C OR A、B OR 仅 A 的查询有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T17:19:38.620

当涉及到索引时，列的顺序确实很重要。这对你的情况是否重要取决于。

让我解释。

假设您有一个包含名字、姓氏和中间名的人员表。

所以你创建了这个索引，列的顺序如下：

```
FirstName, MiddleName, LastName 
```

现在，假设您现在对所有这些列使用 WHERE 进行查询。它将使用整个索引。

但是，假设您只查询名字和姓氏，现在发生的情况是，虽然它仍将使用查询，但它将获取与您的 WHERE 子句具有相同名字的索引范围，然后扫描这些，检索那些具有匹配姓氏的人。请注意，它将扫描具有相同名字的所有行。

但是，如果您重新排列了索引，如下所示：

```
FirstName, LastName, MiddleName 
```

然后上面的查询将获取具有相同名字和姓氏的索引范围，并检索那些。

如果换个角度看，会更容易掌握。

电话簿按姓氏排序，然后是名字和中间名。如果你把中间名放在名字和姓氏之间，然后排序，那么名字和姓氏相同的人似乎到处都是，因为你把中间名放在名字之前。

因此，如果您要查找我的名字，即“Lasse Vågsæther Karlsen”，您会找到所有 Karlsen 人，我们将位于电话簿中的顺序列表中，但我的名字似乎是随机放置的，仅仅是因为该列表将按 Vågsæther 排序。

因此可以使用索引，即使查询没有使用索引中的所有列，但快速查找功能仅在列在索引前面列出时才起作用。一旦你跳过一列，就会发生某种扫描。

现在，如果您的所有查询都使用 id 和日期，那没关系，但如果所有查询都包含日期，并且只有其中一些包含一个 id，那么我会先放日期，然后再放 id，这样该索引将在更多情况下使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T17:22:43.137

是的，这很重要。假设您在列 (A, B) 上创建索引。您可以使用包含两个列的 WHERE 子句执行 SELECT，并且可以使用索引。如果您使用仅包含列 A 的 WHERE 执行 SELECT，也将使用该索引。但如果您使用仅包含列 B 的 WHERE 执行 SELECT，*则无法*使用索引。

请参阅[此处](http://blog.cumps.be/efficient-compound-index-usage/)了解更多信息。

# c# - 将 XML 数据放入 Windows 事件日志

> ID：830750
> 
> 赞同：4
> 
> 时间：2009-05-06T17:19:14.957
> 
> 标签：c#, .net, xml, event-viewer

如何将 XML 数据写入 Windows 事件日志？

我注意到有一种方法可以将 XML 插入到 Windows 事件日志中（而不是仅仅将其填充到描述中）。效果是您`General`在 Windows Vista 上的视图中只看到您的描述消息。您可以在视图中看到您的 XML 数据`Details`。

如果您选择`Friendly`单选按钮，它将出现在`Event Data`节点下方。如果您选择 XML 视图，那么您将看到 XML。

我认为该`EventLog.WriteEntry()`方法中的 rawData 字节数组将允许我这样做。我尝试将 XMLWriter 的输出填充到其中。这会将数据放入事件日志中，但它被视为二进制而不是 XML。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T18:11:09.433

除非我弄错了，否则为了将 xml 写入 Crimson/Vista 事件日志，您将创建并注册一个清单，该清单将为您提供适当的通道和事件。然后您必须使用[WindowsSDK 中的消息编译器 (mc.exe)](http://blogs.msdn.com/windowssdk/archive/2009/02/03/released-windows-sdk-for-windows-7-and-net-framework-3-5-sp1-beta.aspx)编译清单。

然后，如果您想从 C# 记录，您将需要创建一个托管提供程序来包装事件记录 API。这有点困难，因为您必须使用 PInvoke 来获取 API。

[这里](http://blogs.msdn.com/daiken/archive/2005/09.aspx)有关于如何完成整个过程的博客文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T18:36:18.157

[您在Windows SDK (ver 6.1)](http://www.microsoft.com/downloads/details.aspx?FamilyID=e6e1c3df-a74f-4207-8586-711ebe331cdc&displaylang=en)中有一个名为 EventProvider的示例。
它是一个使用新事件日志 API（AKA crimson）的 C# 提供程序（需要 Vista 和最多才能工作）。
此示例显示如何添加自定义数据（金额其他内容）。

# asp.net - Asp.NET / VB.NET：从 URL / URI 获取路径？

> ID：830755
> 
> 赞同：0
> 
> 时间：2009-05-06T17:20:06.403
> 
> 标签：asp.net, vb.net, url, path

假设我有一个正在部署的项目

www.foo.com/path1/default.aspx

和

www.foo.com/path2/default.aspx

知道我是在文件夹“path1”还是“path2”中的最可靠方法是什么？我可以直接抓取它，还是需要在 Request.Url.AbsolutePath 上以某种方式拆分（），或者...？

我只想根据用户所在的文件夹更改颜色等。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T17:24:25.880

如果您想将该逻辑直接编码到页面中，那么是的，我会在 Request.Url.AbsolutePath 上使用 split()。

也就是说，我会考虑将这种设置存储在 web.config 的 AppSettings 部分。这样，如果您决定更改 path2 中的颜色，您只需编辑 path2 的 web.config。如果您需要添加新路径，只需在此处部署并根据需要编辑 web.config。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T21:08:11.830

是的使用`Request.Url.AbsolutePath`。

我这样做是为了创建面包屑，使用 Split 来拆分 URL，然后在您的情况下，我建议使用 Switch 语句根据 Switch 语句的情况更改颜色

[这](http://www.west-wind.com/weblog/posts/269.aspx)是一篇关于 ASP 中路径的精彩文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-07T00:26:39.373

查看 上的 MSDN 文档`System.IO.Path`。它包含许多处理路径名的有用函数。你可以得到`GetDirectoryName()`or`GetFullPath()`或`GetFileName()`or `GetFileNameWithoutExtension()`。

# xml - XML 重用问题

> ID：830756
> 
> 赞同：2
> 
> 时间：2009-05-06T17:20:56.993
> 
> 标签：xml, xsd, reusability

在 XML 中，是否可以重用元素？

具体来说，我要解决的问题如下。我想定义一个`table`包含一个元素`tableSchema`和一个元素的元素`dataSource`。`table`我想以一种s 可以引用`tableSchema`其他地方定义的方式来做到这一点。因此，我可以有多个报告`table`根据相同的定义 s `tableSchema`。

为了澄清，我希望能够做到以下几点：

```
<report name="Report1">
  <page>
    <table>
      <!--reference to tableSchema named "foo"-->
      <dataSource>fooData</dataSource>
    </table>
  </page>
  <page>
    <table> 
      <!--reference to tableSchema named "bar"-->
      <dataSource>barData</dataSource>
    </table>
  </page>
</report> 
```

和

```
<report name="Report2">
  <page>
    <table>
      <!--reference to tableSchema named "foo" (same as above!)-->
      <dataSource>anotherFooData</dataSource>
    </table>
  </page>
</report> 
```

并且有`tableSchema`s`bar`和`foo`在别处定义，可能在同一个 XML 文档中。

编辑添加：这里，tableSchema，我不是指另一个 Xml 模式。我的意思是定义 a 中的字段`table`。例如，我希望能够执行以下操作：

```
<tableSchema name="bar">
    <field>
      <displayName>bar1</displayName>
      <sourceName>bar1Source</sourceName>
      <format>Currency</format>
    </field>
    <field>
      <displayName>bar2</displayName>
      <sourceName>bar2Source</sourceName>
      <format>Text</format>
    </field>
</tableSchema>

<tableSchema name="foo">
    <field>
      <displayName>foo1</displayName>
      <sourceName>foo1Source</sourceName>
      <format>Percent</format>
    </field>
</tableSchema> 
```

然后，在上面`Report1`定义了一个包含两个`table`s 的报告，一个根据 格式化`tableSchema` `foo`，第二个根据 格式化`tableSchema` `bar`，并`Report2`定义一个报表，其中包含一个`table`根据 格式化`tableSchema` `foo`并且架构与 中相同的报告`Report1`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T17:28:13.747

您没有提供有关创建/解析此 XML 的内容的上下文，但假设您可以控制它，那么您可以为此定义自己的约定，例如：

```
<tableSchema ref="foo"> 
```

然后解析器将在其中查找 id 为“foo”的元素以检索 tableSchema 信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T19:47:36.847

为什么不只包括定义？您在一个 XML Schema 中定义它，然后[*将*](http://www.w3.org/TR/xmlschema-0/#SchemaInMultDocs)它包含在另一个 XML Schema 中您想使用的任何位置，如下所示：

```
<include schemaLocation="http://www.example.com/schemas/barDef.xsd"/>
<include schemaLocation="http://www.example.com/schemas/fooDef.xsd"/> 
```

您的问题还有第二个方面：让 XML 文档能够指定它是哪种类型的*tableSchema*。

这是与 OO 编程的类比：（1）定义一个超类，（2）将 foo 和 bar 定义为它的子类。然后，(3) 将字段的类型定义为它们的公共超类；现在（4）。运行时对象可以属于任一子类。那有意义吗？我认为无论如何，这就是您的想法。

完成类比：在 XML 中，类是*complexType*；子类是它的*扩展*；一个字段是一个*元素*，它的类是它的*类型*属性 - 运行时对象的类是*XML 文档*中*元素*的*xsi:type*。关键是最后一部分，*xsi:type*。

 ***(1)。定义通用超类——一个 XML complexType：

```
<complexType name="MySuperType">
  ...
</complexType> 
```

(2)。定义子类 - 上述 complexType 的扩展：

```
<complexType name="Foo">
  <complexContent>
    <extension base="MySuperType">
      ...
    </extension>
  </complexContent>
</complexType>

<complexType name="Bar">
  <complexContent>
    <extension base="MySuperType">
      ...
    </extension>
  </complexContent>
</complexType> 
```

(3)。定义一个属于超类的字段 - 一个属于 complexType 的元素，扩展自：

```
<element name="tableSchema" type="mySuperType"/> 
```

(4)。*现在 XML 可以在 XML 本身*中指定一个元素是特定的 complexType ：

```
<report xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <page>
    <table>
      <tableSchema xsi:type="foo"/>
      <dataSource>fooData</dataSource>
    </table>
  </page>
  <page>
    <table> 
      <tableSchema xsi:type="bar"/>
      <dataSource>barData</dataSource>
    </table>
  </page>
</report> 
```

请注意，*类型*是特殊的，并且在给定的命名空间中定义。事实上，有几个命名空间问题可能令人沮丧，但关键是它*可以*为所欲为。

有关更完整的示例，请参阅[XML Schema Primer](http://www.w3.org/TR/xmlschema-0)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T17:23:40.250

您可能必须使用 XSL 样式表转换来做您想做的事情。最后，它将生成一个完整且已解析的 XML。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T21:39:58.200

（我可能还不明白这个问题，但是......）假设您想按字面意思使用 tableSchema 中的文本值，那么这真的取决于您的处理代码。XML 只是数据的表示。所以你可以制作自己的格式，就像这样说：

```
<tableSchema ref="foo"/> 
```

然后您的工具会读取整个文档，并记住 foo 和 bar 的定义（在表格中）。然后，它开始处理报告：当它使用 Report1 时，它看到上面对 foo 的引用，它在哈希表中查找 foo 并使用它。你的意思是这样的吗？

如果是这样，使用 ID 和 IDREF 标记会对此提供更多支持，所以你有这个：

```
<tableSchema myidref="foo"/>

<tableSchema myid="foo">
    <field>
      <displayName>foo1</displayName>
      <sourceName>foo1Source</sourceName>
      <format>Percent</format>
    </field>
</tableSchema> 
```

然后，（我认为）解析工具将为您填充和查找表格。您需要将 myidref 和 myid 定义为 Schema/DTD 中的 IDREF 和 ID 类型，因此解析器知道要特别对待它们。类似于（仅显示 myidref）：

```
<element name="tableSchema">
  <complexType>
    <xsd:attribute name="myidref" type="xsd:IDREF" use="required"/>
  </complexType>
</element> 
```

# crystal-reports - Crystal Reports - 非常大的数据库，非常长的处理时间

> ID：830775
> 
> 赞同：1
> 
> 时间：2009-05-06T17:27:21.300
> 
> 标签：crystal-reports

我真的不知道如何进行。我有一个非常大的数据库，我正在访问的表大约有。600,000 条记录。使用会计应用程序访问该数据库，该应用程序为报告提供 SQL 查询，该报告通过该查询访问数据库。

我的报表有一个链接的子报表，该子报表具有放置在报表标题中的限制。运行此报告时，平均刷新时间（使用非常基本的查询）为 36 分钟。向查询中再添加两个项目时，报告需要 2.5 小时。

这是我尝试过的：

*   清理报告只留下绝对必要的项目 - 没有区别
*   删除了大多数公式（删除剩余的公式没有时间差异）
*   尝试编辑 SQL 查询 - 由于会计应用程序不允许
*   尝试翻转子报告和主报告 - 没有用
*   添加了其他分组 - 没有区别
*   删除分组 - 没有区别
*   检查所有服务器是否缺少临时磁盘空间 - 没问题
*   尝试“按需”子报告 - 没有变化
*   检查参数（离散与范围），它应该是
*   尝试了突发索引，在服务器上分组等 - 没有区别
*   该报告需要 2 次通过。我试过把它降到一次，但没有成功。

一定有什么我错过了。

使用常规晶体函数似乎没有对报告进行任何其他修改。有什么方法可以加快数据的访问速度，而不必遍历所有 600,000 条记录？访问这些数据的 SQL 查询很长并且有很多请求。这不是我能改变的。

我可以添加一些东西（公式？）来取消这些请求吗？我现在到达...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T17:30:23.353

我们成功的几件事是向数据库添加索引，而不是将表导入报表，而是编写了一个存储过程来检索所需的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T17:35:56.960

如果索引和存储过程不能让你到达你需要的地方，那么你已经达到了非规范化，直到它与数据库一起工作。您可能想考虑创建一个 MI 数据库，其中包含针对您的报告需求而优化的表；以及一些可以将生产中的数据提取到 MI 数据库的数据转换脚本。取决于它是什么 oracle/ms 有工具可以帮助你做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-10-08T16:25:25.997

我们使用带有计费系统的 Crystal Reports，我们在数据库中的查询需要 1.5 多个小时才能完成。这甚至没有考虑报告的呈现/格式。

我们创建了[物化视图](http://download.oracle.com/docs/cd/B10500_01/server.920/a96567/repmview.htm)并强制客户每天刷新它们。物化视图基本上是保存返回数据集的数据库视图。除非您明确告诉它刷新，否则不会刷新数据集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T19:53:33.940

你知道什么是 SQL 查询吗？如果是这样，您可以将报告移出会计应用程序并将查询直接粘贴到数据库专家的命令中。在几个案例中，我不得不使用我使用的另一个应用程序来执行此操作。

# xslt - 调用 XSL 模板时的可选参数

> ID：830780
> 
> 赞同：22
> 
> 时间：2009-05-06T17:28:21.830
> 
> 标签：xslt

有没有办法用可选参数调用 XSL 模板？

例如：

```
<xsl:call-template name="test">
  <xsl:with-param name="foo" select="'fooValue'" />
  <xsl:with-param name="bar" select="'barValue'" />
</xsl:call-template> 
```

以及生成的模板定义：

```
<xsl:template name="foo">
  <xsl:param name="foo" select="$foo" />
  <xsl:param name="bar" select="$bar" />
  <xsl:param name="baz" select="$baz" />
  ...possibly more params...
</xsl:template> 
```

这段代码会给我一个错误“表达式错误：找不到变量'baz'。” 是否可以省略“baz”声明？

谢谢你，亨利

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-05-06T17:33:51.643

您使用的`xsl:param`语法错误。

改为这样做：

```
<xsl:template name="foo">
  <xsl:param name="foo" />
  <xsl:param name="bar" />
  <xsl:param name="baz" select="DEFAULT_VALUE" />
  ...possibly more params...
</xsl:template> 
```

Param 获取使用与语句`xsl:with-param`名称匹配的参数传递的值。`xsl:param`如果没有提供，则采用`select`属性 full XPath 的值。

更多细节可以在[W3School 的 param 条目](https://www.w3schools.com/xml/ref_xsl_el_param.asp)中找到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T22:07:37.367

就个人而言，我更喜欢执行以下操作：

```
<xsl:call-template name="test">  
   <xsl:with-param name="foo">
      <xsl:text>fooValue</xsl:text>
   </xsl:with-param> 
```

我喜欢在文本中显式使用，这样我就可以在我的 XSL 上使用 XPath 进行搜索。在对我没有编写或不记得的 XSL 进行分析时，它多次派上用场。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T17:40:50.253

如果不传递参数，将使用 param 元素的 select 部分中的值。

由于变量或参数 $baz 尚不存在，因此您收到错误消息。它必须在顶层定义才能在您的示例中工作，这无论如何都不是您想要的。

此外，如果您将文字值传递给模板，那么您应该像这样传递它。

```
<xsl:call-template name="test">  
    <xsl:with-param name="foo">fooValue</xsl:with-param> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-25T15:52:00.160

`<xsl:param .../>`如果您不需要它以增加可读性，请不要使用它。

这很好用：

```
<xsl:template name="inner">
    <xsl:value-of select="$message" />
</xsl:template>

<xsl:template name="outer">
  <xsl:call-template name="inner">
    <xsl:with-param name="message" select="'Welcome'" />
  </xsl:call-template>
</xsl:template> 
```

# java - 在 ColdFusion 中，有没有办法确定代码在哪个服务器上运行？

> ID：830782
> 
> 赞同：18
> 
> 时间：2009-05-06T17:29:42.497
> 
> 标签：java, networking, coldfusion

ColdFusion 代码中有什么方法可以确定代码在哪个服务器上执行？我有几个负载平衡的 ColdFusion 服务器。当我捕获异常时，我希望能够知道代码在哪个服务器上运行，因此我可以将该信息包含在日志记录/报告代码中。

服务器是 Windows 2003/IIS，如果这很重要的话。我也很想知道如何在 Linux/Apache 中做到这一点。:-)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-05-06T18:16:23.150

这可能会帮助您进一步...

```
<cfscript>
machineName = createObject("java", "java.net.InetAddress").localhost.getCanonicalHostName();
hostaddress = createObject("java", "java.net.InetAddress").localhost.getHostAddress();
</cfscript>
<cfdump var="#machineName#"><br />
<cfdump var="#hostaddress#"><br /> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-06T17:47:02.440

您可以使用[服务器变量](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=sharedVars_19.html)，例如

```
server.coldfusion.appserver 
server.coldfusion.expiration    
server.coldfusion.productlevel
server.coldfusion.productname   
server.coldfusion.productversion
server.coldfusion.rootdir   
server.coldfusion.serialnumber  
server.coldfusion.supportedlocales
server.os.additionalinformation 
server.os.arch  
server.os.buildnumber   
server.os.name  
server.os.version 
```

将您的代码调整到特定平台。执行`<cfdump var=”#SERVER#” />`以查看适用于您的 Coldfusion 版本的内容。

您可以通过 Java 调用获取主机名：

```
<cfscript>
machineName = createObject("java", "java.net.InetAddress").localhost.getHostName();
instanceName = createObject("java", "jrunx.kernel.JRun").getServerName();
</cfscript> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T17:36:02.573

我相信[CGI.SERVER_NAME](http://livedocs.adobe.com/coldfusion/6/CFML_Reference/Expressions4.htm)会给你你想要的。

根据评论编辑：您也许可以做一些更“低级”的事情......

```
<cfset inet = CreateObject("java", "java.net.InetAddress")>  
<cfdump var = "#inet.getLocalhost().gethostname()#"> 
```

（这里没有 CF 服务器在工作，所以我无法测试）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T14:20:34.067

查找有关正在执行的 JRun 进程的信息的另一个地方是实例化以下内容：

```
<cfset oErrorJRun = createObject("java","jrunx.kernel.JRun")/>
<cfset strServerName = oErrorJRun.ServerName /> 
```

这将为您提供正在执行代码的 JRun 实例的名称。我们遇到过这样的情况，在我们的集群环境中，一个节点上的 IIS 将记录页面命中，但另一个节点上的 JRun 将处理请求。有时，我们会让一个节点的 JRun 停止响应，我们需要重新启动一些服务以将流量返回到该节点。我在我的错误处理程序插件中使用上述代码将服务器名称粘贴在我发送给管理员的电子邮件中，并将其合并到我编写调试信息的文件名中。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-03-06T11:10:50.700

使用以下代码获取域名。

```
<cfoutput>#cgi.server_name#</cfoutput> 
```

希望这是你所期待的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-09-11T10:04:16.017

对于我们使用负载平衡代理后面的节点，我最终调用了“主机名”命令，也适用于 Windows - 所以这里是集合：

```
<cfscript>
machineName = createObject("java", "java.net.InetAddress").localhost.getCanonicalHostName();
hostaddress = createObject("java", "java.net.InetAddress").localhost.getHostAddress();
</cfscript>
<cfdump var="#machineName#"><br />
<cfdump var="#hostaddress#"><br />
<cfdump var="#CGI.SERVER_NAME#"><br />
<cfexecute name = "hostname" timeout = "1"></cfexecute> 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2019-02-22T14:45:52.973

```
<cffunction name="getMachineName" returntype="string" access="private" output="false" hint="Server Name">
    <cftry>
        <cfexecute
            name="hostname"
            arguments=""
            variable="local.machineNameResult"
            timeout=10 />
            <cfreturn Trim(local.machineNameResult)>
        <cfcatch type="any">
            <cfdump var="#cfcatch#">
            <cfabort>
        </cfcatch>
    </cftry>
</cffunction>

<cfdump var="#getMachineName()#" />
<cfabort /> 
```

# iphone - 为什么 UIWindow 是 UView 的孩子，也是 UView 的父母？

> ID：830785
> 
> 赞同：5
> 
> 时间：2009-05-06T17:31:54.300
> 
> 标签：iphone, uiview, software-design, uiwindow

UIKit 参考说 UIView 是 UIWindow 的超类，但尽管有这种父级，但 UIWindow 实际上管理 UIView。这对我来说听起来很不寻常。

有谁知道这在软件设计方面有什么意义？

非常感谢。

编辑：
我阅读了 iPhone 编程指南中的相关段落。然而我不明白为什么他们会反其道而行之：让 UIWindow 成为 UIView 的父级。一定有什么东西迫使 Apple 以这种方式设计类层次结构。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T17:59:20.430

来自[http://developer.apple.com/iPhone/library/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/WindowsandViews/WindowsandViews.html](http://developer.apple.com/iPhone/library/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/WindowsandViews/WindowsandViews.html)

> 有经验的 Mac OS X 开发人员可能会发现 UIWindow 类不寻常的一件事是它的继承。在 Mac OS X 中，NSWindow 的父类是 NSResponder。在 iPhone OS 中，UIWindow 的父类是 UIView。因此，在 iPhone OS 中，窗口也是一个视图对象。尽管它的起源，您通常在 iPhone OS 中将窗口视为与在 Mac OS X 中相同。也就是说，您通常不会直接操作 UIWindow 对象的与视图​​相关的属性。

编辑：

UIView 是通用的（提供用于创建所有类型的视图并访问其属性的常用方法。）而 UIWindow 更具体（类定义管理和协调应用程序在屏幕上显示的窗口的对象。）

我知道有点模糊，我认为只有苹果才会知道这种层次结构的确切原因。

[http://developer.apple.com/iPhone/library/documentation/UIKit/Reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html#//apple_ref/occ/cl/UIWindow](http://developer.apple.com/iPhone/library/documentation/UIKit/Reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html#//apple_ref/occ/cl/UIWindow)

> UIWindow 类定义管理和协调应用程序在屏幕上显示的窗口的对象（称为 windows ）。窗口的两个主要功能是提供一个用于显示其视图的区域以及将事件分发到视图。

和 [http://developer.apple.com/iPhone/library/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/cl/UIView](http://developer.apple.com/iPhone/library/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/cl/UIView)

> UIView 类提供了用于创建所有类型的视图并访问它们的属性的常用方法。例如，除非子类有自己指定的初始化程序，否则您可以使用 initWithFrame: 方法来创建视图。frame 属性指定视图在超级视图坐标中的原点和大小。所有视图的坐标系原点都在左上角。
> 
> UIView 对象排列在 UIWindow 对象中，在子视图的嵌套层次结构中。视图层次结构中的父对象称为超级视图，子视图称为子视图。视图对象声称其封闭父视图的矩形区域，负责该区域内的所有绘图，并且有资格接收发生在其中的事件。同级视图能够毫无问题地重叠，从而允许复杂的视图放置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-03-17T12:52:09.563

因为这样每个 UIView 都会有（继承的）属性和行为，这些属性和行为只对窗口有意义。那是错误的。

另一种方式更有意义：窗口在视图之上添加行为。所以它可以绘制、有边界、包含其他视图等。但它扩展了这一点，例如，知道如何渲染到显示器。

在 MacOS X 中，NSWindows 不是视图。它们包含一个“根视图”，称为 contentView。iOS 窗口是由 NSWindow + 其根视图组成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-24T05:53:29.560

每个常规 UIView 包括主窗口的根视图都应该有一个父视图。UIWindow 继承 UIView 以执行视图层次结构中父视图的职责。UIWindow 不是常规视图，它有自己的 UIView 接口方法实现。

# sql - T-SQL：四舍五入到最近的 15 分钟间隔

> ID：830792
> 
> 赞同：57
> 
> 时间：2009-05-06T17:36:27.487
> 
> 标签：sql, sql-server, datetime

将 HH:MM 值舍入到最接近的 15 分钟间隔的最佳方法是什么？我不跟踪秒，所以它们无关紧要。

```
00:08:00 becomes 00:15:00 
00:07:00 becomes 00:00:00 
01:59:00 becomes 02:00:00 
```

等等。是否有一种优雅的、非 UDF 或 Case 语句方法来执行此操作？

**编辑：**这是我用来获取上述值的 SQL，我想四舍五入：

```
CONVERT(CHAR(8), DATEADD(n, SUM(DATEDIFF(n, starttime, stoptime)), 0), 108) 
```

`starttime`并且`stoptime`是 SQL `datetime`。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2009-10-26T14:02:00.713

我目前正在为此使用带有零 (0) 日期的 dateadd / datediff 变体。无需铸造：

```
select dateadd(minute, datediff(minute,0,GETDATE()) / 15 * 15, 0) 
```

GETDATE() 是您的日期时间。

这将适用于至少在 datediff 由于溢出而失败之前的 5500 年之前的日期。但是，如果您尝试使用第二精度，上面将立即失败。

使用另一个固定日期，如“2009-01-01”或今天的日期（警告，更丑陋的 SQL）将解决这个问题。未来的日期也将起作用。只要它的时间部分为 00:00:00，您就可以在其上建立另一个日期时间。

例如：四舍五入到最接近的 30 秒：

```
select dateadd(second, round(datediff(second, '2010-01-01', GETDATE()) / 30.0, 0) * 30, '2010-01-01'); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-06-29T16:49:31.353

我知道这是一篇旧帖子，但想分享我的答案。这建立在@hbrowser 响应之上。这是我想出的。这将向上或向下舍入到最接近的 15 分钟。

```
SELECT DATEADD(MINUTE, ROUND(DATEDIFF(MINUTE, 0, GETDATE()) / 15.0, 0) * 15, 0); 
```

> 通过在大型记录集上执行此逻辑内联而不是在用户定义的函数中，您应该体验到更高的性能。
> 
> 您可以通过交换`ROUND`函数以使用`FLOOR`或`CAST expr AS INT`始终向下舍入或使用`CEILING`以始终向上舍入来更改舍入的方式。

您的个人用例将决定您可能需要使用哪种类型的舍入。

以下脚本可用于观察不同舍入技术提供的差异：

> 注意：为了简化输出，每个结果都被转换为 TIME(0)，这样做只是为了简化这个特定示例的输出。

```
DECLARE @SequenceStart SmallDateTime = CAST(GETDATE() AS Date); 
DECLARE @SequenceEnd SmallDateTime = DateAdd(HOUR, 2, @SequenceStart); -- Recursive CTEs should always have an upper limit
DECLARE @SequenceIntMins INT = 5; -- increment by 5 to show the difference with rounding
WITH TimeSequence([Time]) as
(
    SELECT @SequenceStart as [Time]
    UNION ALL
    SELECT DateAdd(MINUTE, 5, [Time]) FROM TimeSequence 
    WHERE [Time] <= @SequenceEnd
)
    SELECT [Time] = Cast([Time] as TIME(0))
    , Rounded = CAST(DATEADD(MINUTE, ROUND(DATEDIFF(MINUTE, 0, [Time]) / 15.0, 0) * 15, 0) as TIME(0))
    , Casted = CAST(DATEADD(MINUTE, CAST(DATEDIFF(MINUTE, 0, [Time]) / 15.0 AS INT) * 15, 0) as TIME(0))
    , Floored = CAST(DATEADD(MINUTE, FLOOR(DATEDIFF(MINUTE, 0, [Time]) / 15.0) * 15, 0) as TIME(0))
    , Ceilinged = CAST(DATEADD(MINUTE, CEILING(DATEDIFF(MINUTE, 0, [Time]) / 15.0) * 15, 0) as TIME(0))
FROM TimeSequence OPTION ( MaxRecursion 1000);
-- MaxRecursion may be neccessary if you change the interval or end of the sequence 
```

```
时间 圆形 铸造 地板 天花板
00:00:00 00:00:00 00:00:00 00:00:00 00:00:00
00:05:00 00:00:00 00:00:00 00:00:00 00:15:00
00:10:00 00:15:00 00:00:00 00:00:00 00:15:00
00:15:00 00:15:00 00:15:00 00:15:00 00:15:00
00:20:00 00:15:00 00:15:00 00:15:00 00:30:00
00:25:00 00:30:00 00:15:00 00:15:00 00:30:00
00:30:00 00:30:00 00:30:00 00:30:00 00:30:00
00:35:00 00:30:00 00:30:00 00:30:00 00:45:00
00:40:00 00:45:00 00:30:00 00:30:00 00:45:00
00:45:00 00:45:00 00:45:00 00:45:00 00:45:00
00:50:00 00:45:00 00:45:00 00:45:00 01:00:00
00:55:00 01:00:00 00:45:00 00:45:00 01:00:00
01:00:00 01:00:00 01:00:00 01:00:00 01:00:00
01:05:00 01:00:00 01:00:00 01:00:00 01:15:00

```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2009-05-06T17:50:50.713

这在[How to Round a Time in T-SQL 中](https://stackoverflow.com/questions/249794/how-to-round-a-time-in-t-sql)得到了回答，我认为它应该对你有用。

```
CREATE FUNCTION [dbo].[RoundTime] (@Time datetime, @RoundTo float) RETURNS datetime
AS
BEGIN
    DECLARE @RoundedTime smalldatetime, @Multiplier float

    SET @Multiplier = 24.0 / @RoundTo

    SET @RoundedTime= ROUND(CAST(CAST(CONVERT(varchar, @Time, 121) AS datetime) AS float) * @Multiplier, 0) / @Multiplier

    RETURN @RoundedTime
END

-- Usage    
SELECT dbo.RoundTime('13:15', 0.5) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-05-06T18:17:15.860

您可以将日期四舍五入到最近的四分之一，例如：

```
cast(floor(cast(getdate() as float(53))*24*4)/(24*4) as datetime) 
```

将日期时间转换为双精度以避免溢出，double = float(53)。乘以 24*4，即一天的季度数。使用 floor() 四舍五入到最接近的四分位数倍数，然后除以 24*4 以转换回正常时间。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-09-09T21:36:57.263

尝试了 Andomar 的答案，在 30 和 00 处存在舍入问题 - 所以进行了一些调整，这非常有效：

```
cast(round(floor(cast(getdate() as float(53))*24*4)/(24*4),5) as smalldatetime) 
```

这将显示最后 15 分钟的增量，而不是最近的增量，即它不会前进，这正是我所需要的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-10-25T02:12:57.493

好的最简单的方法：

通过除以 60 将分钟转换为十进制数。

```
8/60 = 0.1333333333333333 
```

乘以 4

```
0.1333333333333333 * 4   = 0.5333333333333333 
```

圆形产品：

```
Round(0.5333333333333333,0) = 1 
```

将整数除以 4

```
1/4 = 0.25 = 15 minutes 
```

如果你想要分钟只需乘以 60

```
0.25*60 = 15 
```

给男人一条鱼....

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-12-07T20:02:43.317

试试这个：

```
Declare @Dt DateTime 
Set @Dt = getDate()

Select DateAdd(minute, 
        15 * ((60 * Datepart(hour, @Dt) + 
        Datepart(Minute, @Dt)+ 
        Case When DatePart(second, @Dt) < 30 
        Then 7 Else 8 End) / 15),
    DateAdd(day, DateDiff(day, 0, @Dt), 0)) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-06T16:05:01.287

```
DECLARE @t time  ='00:51:00.000' 
DECLARE @m  int = DATEPART(MI,@t)%15

-- 2008
SELECT DATEADD(mi,CASE WHEN @m >=8 THEN 15-@m ELSE -1*@m END,@t)

-- 2012
SELECT DATEADD(mi,IIF(@m >=8,15-@m,-1*@m),@t) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-06-26T14:13:45.633

——这是我最喜欢的打发时间的方式

```
DECLARE @Time DATETIME = GETDATE()
       ,@RoundInterval INT = 30  --in minutes, needs to be a number that can be divided evenly into 60
       ,@RoundDirection INT = 2  --0 is down to the last interval, 1 is to the nearest interval, 2 is up to the next interval

SELECT  DATEADD(MINUTE,DATEDIFF(MINUTE,0,DATEADD(SECOND,30*@RoundDirection*@RoundInterval,@Time))/@RoundInterval*@RoundInterval,0) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-06T18:25:46.293

```
create function RoundQuarterHour
(
    @dt datetime
)
returns datetime
as
begin
    declare @result datetime
    declare @mm int
    set @mm=datepart(minute,@dt)
    set @result = dateadd(minute,-@mm + (round(@mm/cast(15 as float),0)*15) , @dt )

    return @result
end
go

           select dbo.RoundQuarterHour('2009-may-5 20:00') , '00'
 union all select dbo.RoundQuarterHour('2009-may-5 20:01') , '01'
 union all select dbo.RoundQuarterHour('2009-may-5 20:07') , '07'
 union all select dbo.RoundQuarterHour('2009-may-5 20:08') , '08'
 union all select dbo.RoundQuarterHour('2009-may-5 20:22') , '22'
 union all select dbo.RoundQuarterHour('2009-may-5 20:23') , '23'
 union all select dbo.RoundQuarterHour('2009-may-5 20:37') , '37'
 union all select dbo.RoundQuarterHour('2009-may-5 20:38') , '38'
 union all select dbo.RoundQuarterHour('2009-may-5 20:52') , '52'
 union all select dbo.RoundQuarterHour('2009-may-5 20:53') , '53'
 union all select dbo.RoundQuarterHour('2009-may-5 20:59') , '59' 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-06T18:51:35.810

T-SQL 中的时间舍入实际上是非常有问题的，而且很多时候是不准确的。

多年前，我将所有时间都转移到了代码中，而不是使用 T-SQL 中必须做的所有额外的 hub-bub 来实现它并准确地实现它。代码中的舍入时间更容易也更准确。

如果您被困在 T-SQL 中并且没有支持代码，或者无法访问该代码，请按照前面提到的示例进行操作。否则，我谦虚地建议让代码完成这项工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-12-07T19:33:09.077

这个怎么样？（为可读性添加了变量）

```
create function dbo.FloorTimeToQuarters
(
 @dt as datetime
)
RETURNS datetime
as

BEGIN

 DECLARE @timeAsInt bigint
 SET @timeAsInt = ( cast( @dt as float ) * 96 )
 RETURN DateAdd( hour, @timeAsInt % 96, cast( @timeAsInt / 96 as datetime)  )

END 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-07-01T22:03:40.207

在 15 分钟内设置块：

```
CREATE FUNCTION RoundQuarterHour (
    @dt DATETIME
) RETURNS DATETIME

AS
BEGIN
    DECLARE @date DATETIME
    SET @date = CONVERT(varchar(16),@dt,121) --Sin segundos, ni milisegundos
    RETURN DATEADD(MINUTE,(DATEPART(MINUTE,@date) % 15)*-1, @date)
END

PRINT dbo.RoundQuarterHour('2011/01/01 18:00:07')  --Jan  1 2011  6:00PM
PRINT dbo.RoundQuarterHour('2011/01/01 18:01:07')  --Jan  1 2011  6:00PM
PRINT dbo.RoundQuarterHour('2011/01/01 18:13:07')  --Jan  1 2011  6:00PM
PRINT dbo.RoundQuarterHour('2011/01/01 18:14:07')  --Jan  1 2011  6:00PM
PRINT dbo.RoundQuarterHour('2011/01/01 18:15:07')  --Jan  1 2011  6:15PM
PRINT dbo.RoundQuarterHour('2011/01/01 18:16:07')  --Jan  1 2011  6:15PM 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-03-19T17:47:14.087

这将四舍五入到最接近的 15 分钟。您可以将@ROUND 修改为您选择的间隔。

```
Declare @Dt DateTime = '2016-01-01 14:38:00' 
DECLARE @ROUND int = 15;
SELECT
CASE WHEN (DATEPART(MINUTE, @Dt) % @ROUND) * 60 + DATEPART(SECOND, @Dt) < (30 * @ROUND)
THEN DATEADD(minute, datediff(minute,0, @Dt) / @ROUND * @ROUND, 0) 
ELSE DATEADD(minute, (DATEDIFF(minute,0, @Dt) / @ROUND * @ROUND) + @ROUND, 0) 
END 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-04-04T21:36:26.613

前提分解为弄清楚你想要什么增量，60分钟的百分比是多少......然后找出到达那里所需的增量数量......取INT值（这会去掉余数），你就有了它是一个简单的函数，可以向上或向下舍入到最接近的增量。

简单功能：

```
 ALTER FUNCTION [dbo].[RoundOffDateTime]
(
    @IncDate    DATETIME,
    @Increment  INT
)
RETURNS SMALLDATETIME
AS
BEGIN

    DECLARE @IncrementPercent DECIMAL(2,2) = CAST(@Increment as decimal)/60
    DECLARE @IncMinutes REAL = ROUND(CAST(DATEPART(mi,@IncDate) as decimal)/CAST(@Increment as decimal),0)
    DECLARE @MinutesNeeded INT = CAST(@IncMinutes * @Increment as INT)

    RETURN CAST(DATEADD(mi,@MinutesNeeded,DATEADD(ss,-DATEPART(ss,@IncDate),DATEADD(mi,-DATEPART(mi,@IncDate),@IncDate))) as smalldatetime)

END 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-07-29T16:41:28.827

```
 DECLARE   @Date             DATETIME = GETDATE()

    SELECT    @Date
            , DATEADD(ms, 900000 - DATEDIFF(ms, CAST(@Date AS DATE), @Date) % 900000, @Date) 
```

# java - 包结构中的非 java 文件

> ID：830794
> 
> 赞同：12
> 
> 时间：2009-05-06T17:37:18.813
> 
> 标签：java

我们有一个开发人员习惯于在我们存储库的 src/java 文件夹下的 java 包中提交非 java 文件（xsd、dtd 等）。诚然，这些是该包的相关文件，但我只是讨厌在 src 文件夹中看到非 java 文件。

这是我应该习惯的一种常见做法，还是我们通过像这样维护这些文件来做一些奇怪的事情？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-06T18:02:59.983

将与代码密切相关的非 Java（或其他语言）文件放在与代码不同的位置的问题是知道在哪里可以找到它们。可以将位置标准化，然后理论上每个人都会知道去哪里和做什么。但我发现在实践中不会发生。

想象一下，您的应用程序在 5 或 10 年后仍由一个初级 - 中级开发人员团队维护，他们现在不在公司工作，也永远不会与现在从事您项目的任何人交谈。将与源代码紧密链接的文件放在源代码包结构中可以使他们的生活更轻松。

我非常支持在合理范围内尽可能多地消除歧义。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-06T17:46:59.927

这是很常见的，甚至推荐只要它是合理的。通常，当它是静态资源时（DTD+XSLT 用于专有格式、预制脚本等）是合理的，但当文件可能会被第三方更新，例如 IP/地理位置数据库转储时，则不是。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-06T17:50:57.547

我认为如果您认为“src”不是专门指“源代码”，它会变得更容易。将其视为程序在编译时和/或运行时所需的资源的**来源。**

编译或构建活动的**产物**不应该放在这里。

诚然，像大多数事情一样，例外情况可能适用:)

**更新：** 就个人而言，我喜欢将 src 进一步分解为下面每种资源类型的子目录。其他人可能喜欢更高级别的划分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T17:43:09.017

有很多 jar 库使用相同的做法。我认为这是可以接受和舒适的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-06T18:25:46.450

在 Eclipse 中，我们有一个包含 java 类的 src 文件夹和一个包含属性文件等的配置文件夹（作为源文件夹被祝福）对我们来说效果很好。然后它们一起进入输出文件夹，并且可以在类路径中找到同时仍位于 Eclipse 内的单独文件夹中

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-06T20:00:43.070

将所有辅助文件保留在源代码旁边的优点之一是在这些 3rd 方库和您的源代码之间保持版本一致性。如果您需要返回并调试特定版本，您可以拉取整套 source+config 并使其全部为同一版本。

话虽如此，我会将它们放在`$project/config/`目录或类似目录中，而不是放在目录中`$project/src/java`。它们实际上不是源代码，也不是 java，因此将它们放在该目录中会产生误导。

但是，当您真正认真对待时，这是个人风格的问题。没有“正确”的答案，您应该与这些团队成员交谈并了解他们做出此决定的原因。使用该线程作为支持单方面决定的证据可能不会很好。;)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-06T17:41:50.860

它很常见，您可以在非常流行的框架中找到它，例如用于 spring 各种模式的 xsd 文件。此外，人们通常将休眠映射文件与模型类放在同一个包中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-06T17:44:40.293

我认为只要文件是必要的，这很常见。当人们开始提交源不需要的文件时，就会出现问题，例如设计规范或随机文本文件。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-05-06T17:50:51.650

这当然很常见，但非常懒惰和草率。当我看到它时，我的皮肤会爬行。

使用诸如[Maven](http://maven.apache.org)之类的工具来构建您的产品使您能够轻松、清晰地将[代码与资源](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)分开。

Eclipse 包也可以类似地分开。

# google-translate - 谷歌翻译 API

> ID：830799
> 
> 赞同：1
> 
> 时间：2009-05-06T17:39:22.583
> 
> 标签：google-translate

我有想要翻译成俄语的文本。文本具有自定义标签并具有多个`<BR>`标签。API 对`<BR>`标签的行为很奇怪。`<BR>`标签是否存在已知问题？有没有办法解决它或者使用 Google JQuery 翻译来翻译文本的最佳方法是什么？

文字是

```
<INPUTANSWER PARTID='1'>
  <SPAN STYLE="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>
  Place a <STRONG>90 degree</STRONG> explicit angle constraint to the inside 
  faces of <STRONG>DP-1007:1 </STRONG>and<STRONG>DP-1006:1</STRONG> as shown.</P>
  <P STYLE="MARGIN-LEFT: 0.5in; TEXT-INDENT: -0.25in">
  2.
  <SPAN STYLE="FONT: 7pt 'Times New Roman'"> </SPAN>
  Drive this angle constraint between <STRONG>90 and 100 degrees</STRONG>
  with an <STRONG>increment</STRONG> <STRONG>of 0.125 degrees.</STRONG>
</INPUTANSWER> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T17:47:02.207

检查[这个](http://code.google.com/p/jquery-translate/)。它的 jquery 翻译项目。我以前用过普通文本，从未尝试过标记，但引用了他们的主页

> 它还通过连接元素减少了请求的数量，并且不会发送不必要的 html 标记，仍然提供对每个元素的访问，因为它们已被翻译。

如果这不起作用，您始终可以保留原始文档片段，然后步行，翻译内容并替换。我相信这会起作用，因为 API 在纯文本中表现得很好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T21:21:52.647

找翻译者，他会读机器翻译，那是一种糟糕的语气。由于完全不同的语言结构，除了从英语到俄语完全不清楚。用英语阅读比自动翻译文本更容易阅读

# language-agnostic - 有命名参数，然后有

> ID：830801
> 
> 赞同：2
> 
> 时间：2009-05-06T17:39:36.170
> 
> 标签：language-agnostic, parameters

由于命名参数是那些由它们的显式名称而不是它们的顺序来标识的参数，它们没有名称的表亲的名称是什么，那些仅由顺序标识的参数是什么？

匿名参数？未命名的参数？他们有名字吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-06T17:42:32.683

位置参数。

如果您搜索“位置参数”，通常会发现它指的是您在 shell 脚本中获得的 $1、$2、$3 变量，但它也适用于“普通”参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T17:40:42.877

参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T17:43:41.853

在 Python 中，有*关键字 arguments*和*arguments*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-06T22:47:40.720

教程里有啊

[http://docs.python.org/tutorial/controlflow.html#keyword-arguments](http://docs.python.org/tutorial/controlflow.html#keyword-arguments)

> 通常，参数列表必须有任何位置参数，后跟任何关键字参数，其中关键字必须从形式参数名称中选择。

和词汇表：

[http://docs.python.org/glossary.html#glossary](http://docs.python.org/glossary.html#glossary)

> 争论
> 
> 传递给函数或方法的值，分配给函数体中的命名局部变量。一个函数或方法在其定义中可能同时具有位置参数和关键字参数。
> 
> 位置论据
> 
> 分配给函数或方法内的本地名称的参数，由它们在调用中给出的顺序决定。* 用于接受多个位置参数（在定义中时），或将多个参数作为列表传递给函数。见论据。

# hibernate - iReport 和休眠...

> ID：830803
> 
> 赞同：2
> 
> 时间：2009-05-06T17:40:21.533
> 
> 标签：hibernate, hql, ireport

好的，我已经启动并运行了 iReport，现在我可以在其中运行 HQL 查询，它会取回对象，并将它们放在报告检查器的字段部分中。

我真的需要展平所有查询，以便只返回一个“级别”的实际数据值，而不是我的实体对象吗？我宁愿只返回对象并将它们的 toString() 显示在报告上，否则 HQL 似乎太复杂以至于难倒我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T18:10:55.800

我认为您可以使用这些对象。例如，如果您有一个字段父亲，您可以使用“father.getFather().getFather().getName()”来获取当前行的祖父的名字。需要注意的一件事是加载类型。它必须是 EAGER（而不是 LAZY），否则数据将不会被适当地加载。

编辑：约书亚，我们可以将我们想要的任何 java 代码放入 textField 中：

```
<textFieldExpression   class="java.lang.String"><![CDATA[$P{samples}.size() < 2 ? "" : ((br.com.laboroil.report.bean.Sample) $P{samples}.get(1)).getCode()]]></textFieldExpression> 
```

# sql - SQL Server 非标准基于日期的直方图

> ID：830814
> 
> 赞同：3
> 
> 时间：2009-05-06T17:42:10.983
> 
> 标签：sql, sql-server, reporting, data-mining

我有带有时间戳的用户登录数据，我想做的是按年份获取登录的直方图，但年份从任意日期开始。例如，我想要以下类型的信息：

```
1 May 2005 - 30 Apr 2006 | 525
1 May 2006 - 30 Apr 2007 | 673
1 May 2007 - 30 Apr 2008 | 892
1 May 2006 - 30 Apr 2009 | 1047 
```

第一列中的标签并不重要，但日期范围很重要。我知道我可以通过以下方式将其分解：

```
SELECT YEAR([date]) AS [year], COUNT(*) AS cnt 
FROM logins
GROUP BY YEAR([date])
ORDER BY [year] 
```

但这并没有给我想要的数据范围。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T17:48:16.883

```
declare @baseDate datetime
set @baseDate = '1 May 2005'

SELECT
    datediff(year, @baseDate, [date]) AS YearBucket 
    ,COUNT(*) AS cnt 
FROM logins
GROUP BY datediff(year, @baseDate, [date])
ORDER BY datediff(year, @baseDate, [date]) 
```

编辑 - 抱歉，你是对的。这是一个固定版本（我应该使用测试表开始......）

```
create table logins (date datetime, foo int)
insert logins values ('1 may 2005', 1)
insert logins values ('1 apr 2006', 2)
insert logins values ('1 may 2006', 3)

declare @baseDate datetime
set @baseDate = '1 May 2005'

SELECT
    datediff(day, @baseDate, [date]) / 365 AS YearBucket 
    ,COUNT(*) AS cnt 
FROM logins
GROUP BY datediff(day, @baseDate, [date]) / 365
ORDER BY datediff(day, @baseDate, [date]) / 365 
```

如果您想要比天更多的粒度，请更改日期差异单位。

编辑#2 - 好的，这是一个处理闰年的更强大的解决方案:) 编辑#3 - 实际上这不处理闰年，而是允许指定可变的时间间隔。使用 dateadd(year, 1, @baseDate) 进行闰年安全方法。

```
declare @baseDate datetime, @interval datetime
--@interval is expressed as time above 0 time (1/1/1900)
select @baseDate = '1 May 2005', @interval = '1901'

declare @timeRanges table (beginIntervalInclusive datetime, endIntervalExclusive datetime)
declare @i int
set @i = 1
while @i <= 10
begin
    insert @timeRanges values(@baseDate, @baseDate + @interval)
    set @baseDate = @baseDate + @interval
    set @i = @i + 1
end

SELECT
    tr.beginIntervalInclusive,
    tr.endIntervalExclusive,
    COUNT(*) AS cnt 
FROM logins join @timeRanges as tr
    on logins.date >= tr.beginIntervalInclusive
        and logins.date < tr.endIntervalExclusive
GROUP BY  tr.beginIntervalInclusive, tr.endIntervalExclusive
ORDER BY  tr.beginIntervalInclusive 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T17:46:12.457

如果您可以找到一种在单独的表中定义日期范围的方法，则选择一个标签和两列日期，然后根据您的表从您的主查询中加入类似这样的内容。

```
Select Count(*) as NoLogons, DateRangeLabel
From logins a
inner join
(
Select
DateRangeLabel, StartDate, EndDate
From tblMyDates 
) b
on a.date between b.startdate and b.enddate
Group by DateRangeLabel 
```

# ruby-on-rails - 如何在 Rails 中回显 GET 变量？

> ID：830819
> 
> 赞同：0
> 
> 时间：2009-05-06T17:43:18.033
> 
> 标签：ruby-on-rails

我创建了一个 iFrame 组件供人们集成到他们的网站中。当页面加载到远程站点时，iFrame 需要从 URL 字符串传递一个 GET 变量。在这种情况下，父页面将被称为[http://www.theirsite.com/tracking=12345](http://www.theirsite.com/tracking=12345)并且在页面呈现时应该将跟踪变量写入 iframe 的远程页面上的 html 代码中。

我已经为除 rails 之外的每种主要语言创建了代码版本。代码的 PHP 版本如下所示。

作为一个完整的 Rails 新手，我希望有人可以为 Rails 生成类似的代码片段，具有类似于 htmlentities() 的 XSS 保护。

我发布代码供人们抓取并复制到他们的网站中。

```
... src="mysite.com?tracking=<?php echo htmlentities($_GET['tracking']); ?>" ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T17:53:08.073

`params`哈希包含所有 GET 和 POST 变量的集合：

```
... src="mysite.com?tracking=<%= CGI::escape(params[:tracking]) %>" ... 
```

该`CGI:escape()`函数对 URL 的参数进行编码，可能有助于防止 XSS 攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-12T06:13:02.883

如果您需要专门获取变量，您可以这样做：

... src="mysite.com?tracking=<%= request.GET["tracking"] %>"

# .net - .NET 垃圾收集器 - 它的线程优先级是什么？

> ID：830822
> 
> 赞同：5
> 
> 时间：2009-05-06T17:44:11.370
> 
> 标签：.net, garbage-collection

我找到了一些很棒的文章（[Maoni](http://blogs.msdn.com/maoni/default.aspx)、[Richter #1](http://msdn.microsoft.com/en-us/magazine/bb985010.aspx)、[Richter #2](http://msdn.microsoft.com/en-us/magazine/bb985011.aspx)），提供了有关 GC 的理论和实践的许多细节，但我找不到任何说明如何设置 GC 线程优先级的内容。

我发现的最接近的是这个，它指出终结器线程[“以高优先级与应用程序异步运行”。](http://blogs.msdn.com/cbrumme/archive/2003/04/15/51319.aspx)

我一直认为这是一个“低优先级”线程，但是阅读越来越多的关于它的内容似乎是错误的（因为 GC 必须阻塞所有其他线程，并且您不想让您的应用程序依赖于一个低优先级的线程，以便及时恢复）。

有人确定知道实际的优先级应该是什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-06T17:54:11.160

在*CLR 通过 C#*中，Richter 解释说：

> 一个特殊的高优先级 CLR 线程专用于调用`Finalize`方法

（参见第 20 章的“Finalization Internals”标题）

这是他谈论垃圾收集器线程的唯一上下文。在本章前面一点，他解释说垃圾收集是为了响应以下事件之一而启动的：

*   第 0 代已满
*   拨电至`GC.Collect`
*   Windows 报告内存不足的情况
*   CLR 正在卸载 AppDomain
*   CLR 正在关闭

...这表明垃圾收集器创建的唯一线程是这个单一的“高优先级”终结器线程。

**编辑：**然后他在“并发集合”中继续解释：

> 在运行执行引擎的工作站版本的多处理器系统上，垃圾收集器有一个额外的后台线程，用于在应用程序运行时同时收集对象。[...]**垃圾收集器有一个正常优先级的后台线程，用于标记无法访问的对象。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T17:51:09.403

GC 线程以正常优先级运行。终结器线程以“最高”优先级运行。

您可以通过打开“调试”“线程”窗口并中断托管应用程序中的任何位置来看到这一点。线程都被列出（尽管它们没有被命名），以及它们的优先级。需要花一点时间来解读哪个是哪个，但是会有一个额外的“Normal”和“Highest”优先级线程，它们对应于 GC 和 Finalizer 线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T13:50:54.230

GC 运行的线程取决于您的应用程序使用的 GC 版本。

这个问题的答案包含在我写的一篇博文中：**[如何确定正在运行的垃圾收集器](http://dave-black.blogspot.com/2012/04/how-to-determine-which-garbage.html)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T07:23:04.700

垃圾收集器以低于关键线程的优先级运行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-04T07:25:21.323

GC 线程优先级是一个实现细节，现在它们以正常优先级运行，但是终结器线程作为高优先级运行并且也有超时。

# c# - C# WinForms - 如何通过另一个表单从一个表单上的文本框中检索数据？

> ID：830824
> 
> 赞同：1
> 
> 时间：2009-05-06T17:44:51.900
> 
> 标签：c#, winforms

我有一个在一个表单中执行的方法，但是我需要从另一个表单中检索数据以传递给该方法。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T17:48:11.127

您可以在一个表单上公开一个属性并从另一个表单调用它。当然，您需要某种方法来获取 form1 的实例。您可以将其作为静态属性保存在程序类或其他父类中。通常在这种情况下，我有一个包含实例的静态应用程序类。

```
public static class Application
{
public static MyForm MyFormInstance { get; set; }
} 
```

然后，当您启动第一个表单时，将应用程序的 MyFormInstance 属性设置为第一个表单的实例。

```
MyForm instance = new MyForm();
Application.MyFormInstance = instance; 
```

将属性添加到第二个表单。

```
public String MyText
{ get { return textbox1.Text; }
  set { textbox1.Text = value; }
} 
```

然后你可以从你的第二个表单中访问它：

```
Application.MyFormInstance.MyText 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T17:48:43.950

在包含您需要数据的文本框的表单上，公开一个属性或返回文本的方法。IE：

```
internal string TextBoxTest
{
   get{ return this.textBox1.Text;}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T18:03:33.367

[这里](https://stackoverflow.com/questions/818930/how-to-pass-values-from-one-form-to-another)有一个类似的帖子

下面的视频将阐明您关于在 2 个表单之间传递数据的许多概念。

有多种方法可以在 2 个表单之间传递数据检查这些链接，其中包含示例视频来执行此操作

*   FormToForm 使用属性 - [http://windowsclient.net/learn/video.aspx?v=108089](http://windowsclient.net/learn/video.aspx?v=108089)

*   FormToForm 使用参数 - [http://windowsclient.net/learn/video.aspx?v=105861](http://windowsclient.net/learn/video.aspx?v=105861)

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T17:55:22.997

不要这样做。

更长的版本：为什么你的视图直接与另一个视图交互？

更长的版本：

如果具有感兴趣字段的表单与某种形式的数据对象交互，然后将其传递给感兴趣的方法，它将提供更好的封装和隔离，而不是创建一个公开该字段的公共属性。

应该仔细考虑感兴趣的方法的位置 - 如果它控制视图的各个方面（在您的情况下为 WinForm），那么它可能是该类的适当成员 - 如果不是，它的真正家可能在数据对象中？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T18:24:22.990

假设 formB 在 formA 中初始化，我建议向 formB 的构造函数添加一个字符串，发送 Texbox1.Text

如在

```
class formB: Form{
   private string data;
   public formB(string data)
    {
        InitializeComponent();
        this.data = data;
    }
  //rest of your code for the class

} 
```

# c++ - 如何从 Windows 服务捕获标准错误输出？

> ID：830825
> 
> 赞同：8
> 
> 时间：2009-05-06T17:45:02.833
> 
> 标签：c++, windows, service, ldap

我有一个使用 Mozilla LDAP 库的应用程序。我们正在诊断一个涉及 LDAP 库未能与服务器建立连接的问题。我正在尝试通过将 lib 的调试版本与应用程序一起放入并使用 ldap_set_opt 启用调试来从 LDAP 库中获取更多信息。不幸的是，我认为调试库正在将调试字符串发送到标准错误。

当我再次重新编译 LDAP 客户端库时，希望启用使其调用 OutputDebugString 而不是流式传输到 stderr 的选项，一个不错的解决方案是将 stderr 输出捕获到文件中。但是，该应用程序作为 Windows 服务运行。

任何人都知道如何将 stderr 重定向到作为服务运行的应用程序的文件？

**编辑**

我希望不必修改比我已经拥有的更多的服务源代码。服务配置中的选项将是理想的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T18:01:13.700

您可以尝试手动重定向stderr吗？

```
 FILE* stderr_redirect = freopen( "C:/stderr.log", "w", stderr );

    // Code that writes to stderr

    fclose( stderr_redirect );
```

编辑：

除了自己处理服务中的这些流之外，没有办法为服务重定向 stdout 或 stderr。某些服务提供将这些消息重定向到文件的选项。您可以临时重定向这些流或向您的服务添加一个选项，以便在下次遇到问题时对其进行配置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T17:57:23.897

如果要修改服务的代码，可以在 ServiceMain 中调用[SetStdHandle](http://msdn.microsoft.com/en-us/library/ms686244(VS.85).aspx)：

```
SetStdHandle(STD_ERROR_HANDLE, logFileHandle); 
```

# c# - 如何使用 LINQ 查询语法更优雅地编写以下代码？

> ID：830828
> 
> 赞同：4
> 
> 时间：2009-05-06T17:46:43.203
> 
> 标签：c#, linq

如何使用 LINQ 查询语法更优雅地编写以下代码？

```
var mergedNotes = new List<Note>();

var noteGroupsByUserID = notes.GroupBy( x => x.UserID );

foreach (var group in noteGroupsByUserID)
{
    var sortedNotesByOneUser = group.OrderBy( x => x.CreatedOn ).ToList();
    var mergedNotesForAUserID = GetMergedNotesFor( sortedNotesByOneUser );
    mergedNotes.AddRange( mergedNotesForAUserID );
}

return mergedNotes; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T18:04:50.663

我认为这可以解决问题：

```
var mergedNotes = new List<Note>();
mergedNotes.AddRange((from n in notes
                      orderby n.CreatedOn
                      group n by n.UserID into g
                      let m = GetMergedNotesFor(g)
                      select m).SelectMany(m => m));
return mergedNotes; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T18:21:02.107

不是 LINQ 语法，但至少更优雅......

```
List<Note> mergedNotes =
    notes
    .GroupBy(x => x.UserID)
    .SelectMany(g => GetMergedNotesFor(g.OrderBy(x => x.CreatedOn)))
    .ToList(); 
```

使用我的测试数据，它会产生与原始代码相同的结果。

# c# - 在 C# 中将 IntPtr 转换为 int*？

> ID：830832
> 
> 赞同：3
> 
> 时间：2009-05-06T17:47:18.100
> 
> 标签：c#, pointers, intptr, managed-code

我有一个 C++ DLL 返回`int*`一个 C# 程序。问题是分配后`int*`仍然存在 C# 中的问题。`null`

当我将 C++ 结果分配给 时`IntPtr`，我得到一个正确的非空值。`int*`但是，任何将其转换为结果的尝试都会导致`null`.

我试过了：

```
IntPtr intp = cppFunction ();           // Non-null.

int* pi = (int *) intp;                 // Results in null.

int* pi = (int *) intp.ToPointer ();    // Results in null.

void* vp = intp.ToPointer ();

int* pi = (int *) vp;                   // Results in null, but vp is non-null. 
```

我怎样才能得到一个非 null `int*`？

谢谢！艾伦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T17:51:15.860

你的 cppFunction 声明应该是这样的：

```
void cppFunction(ref int* ptr) {
   ptr = somevalue;
} 
```

那应该可以解决您的问题。

您可能会发现这也很有用： [http ://www.pcreview.co.uk/forums/thread-2902012.php](http://www.pcreview.co.uk/forums/thread-2902012.php)

# java - Java如何访问COM控件（在windows平台上）API

> ID：830833
> 
> 赞同：1
> 
> 时间：2009-05-06T17:47:31.627
> 
> 标签：java

我有一个 COM 控件（在 Windows 上），它公开了一组 API。我用 VC++ 和 C# 编写了应用程序，并且可以访问 API。现在我需要编写一个使用这些 COM API 的 Java 应用程序。你能让我知道我该怎么做吗？我是否需要为 COM 控件（如 JNI）编写 Java 包装器？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T17:51:33.893

看看[雅各布。](http://sourceforge.net/projects/jacob-project/)

我不得不从 Java 内部访问 COM 控件，而 Jacob 完全救了我的培根。

# excel - 如何从 Excel 工作簿中删除自定义工具栏？

> ID：830840
> 
> 赞同：3
> 
> 时间：2009-05-06T17:49:48.517
> 
> 标签：excel, toolbar

我正在使用 Excel 2007，并且我有一个附有自定义工具栏的 Excel 工作簿。每次我打开工作簿时，工具栏都会出现在“加载项”下的功能区上。我可以右键单击工具栏并选择删除自定义工具栏，然后将其删除。但是当我重新打开工作簿时，它会重新出现。如何永久删除它？

工具栏不是由 VBA 创建的。[使用http://office.microsoft.com/en-us/excel/HP051986401033.aspx](http://office.microsoft.com/en-us/excel/HP051986401033.aspx)中概述的步骤将它附加到早期版本的 Excel 中的工作簿中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:53:02.610

我意识到这是一个老问题，但我刚刚找到了一个此处未提及的简单解决方案，它将对未来的观众有用：

1.  将文件的扩展名更改为“.zip”
2.  打开存档
3.  `Attachedtoolbars.bin`从存档中删除文件
4.  关闭存档
5.  将文件的扩展名改回原来的样子

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T20:53:41.680

虽然正确的解决方案是将工具栏从工作簿中分离出来，但我不确定在 Excel 2007 中是如何完成的。作为一种解决方法，每次打开工作簿时都可以使用宏来删除工具栏：

```
Private Sub Workbook_Open()
    ' Delete the unwanted toolbar that is attached to this workbook.
    Dim cmdbar As CommandBar
    For Each cmdbar In Application.CommandBars
        If cmdbar.Name = "Zap" Then
            cmdbar.Delete
        End If
    Next End Sub
End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-03-31T14:26:48.553

我发现了两种对我有用的方法：

1.  在 Office 2003 中打开并分离自定义工具栏：工具 > 自定义 > 选项卡工具栏 > 按钮附加... > 删除工作簿中的自定义工具栏

2.  在 Office 2007 中打开并导出所有对象、窗体、模块和类模块并将它们导入到新的新工作簿 (.xlsm) 您将摆脱所有旧垃圾并且所有宏仍然可以工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-17T14:08:03.753

在这里查看答案：

[http://msdn.microsoft.com/en-us/library/office/ff862231%28v=office.15%29.aspx](http://msdn.microsoft.com/en-us/library/office/ff862231%28v=office.15%29.aspx)

```
For Each bar In CommandBars 
    If bar.BuiltIn = False Then 
        bar.Delete
    End If 
Next bar 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-06-15T22:02:27.770

或者，如果不是在 VBA 中完成，您只需：右键单击菜单栏区域，单击自定义 在工具栏选项卡中单击附加并确保它未附加到工作簿。

有时人们会忘记基本...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-02-22T14:26:41.547

我在显示自定义工具栏的电子表格中遇到了同样的问题，然后将其留在了我的默认工具栏文件中。

我找到了这个解决方案：http: [//support.microsoft.com/kb/291074](http://support.microsoft.com/kb/291074)

在 Excel 2007 中，要删除的文件是 c:\Winnt\profiles\username\Application Data\Microsoft\Excel\Excel12.xlb

对我来说效果很好（尽管它会删除您可能已安装的所有自定义工具栏）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-06T18:18:25.343

如果不是 VBA，您可以进入注册表禁用与工具栏关联的插件。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-06T19:04:34.000

您还可以遍历 Excel.Application.CommandBars 中的所有命令栏并按其名称查找工具栏，然后将其删除。这是假设工具栏从上一个会话中被卡在那里（并且添加工具栏的工作簿/插件/等没有在 Workbook_Beforeclose 事件中将其删除）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-01-20T23:49:14.723

我知道这个问题很老，但最终对我有用的是进入我的 excel 插件项目的 bin/debug 文件夹并删除所有文件，然后重新加载 Excel。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-06T17:52:21.427

很可能，工作簿上附加了 VBA 代码，其中包含创建工具栏的 onLoad 事件。

您必须删除或禁用 VBA 代码。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-03-25T23:52:53.583

我们的生产 2010 Excel 电子表格中的功能区存在同样的问题，需要更改。自定义功能区需要修改，但它在我们尝试编辑/删除它的每个位置都被锁定。

由于禁用了“自定义...”选项，因此无法右键单击工具栏。

删除所有 VBA 代码无效，自定义功能区仍会替换默认功能区。

在 Excel 选项中，“自定义功能区”控件不包含任何选择或被禁用。

在视图、工具栏、自定义下的 VBA 窗口中，菜单栏工具栏被锁定以进行编辑。

我们已尝试按照一些帖子的建议在硬盘上找到文件，但找不到文件（甚至文件夹层次结构也不存在）。

表外选项是编辑注册表或通过导入对象创建全新的文件。

问题：为什么它们使管理功能区变得如此困难？

# .net - 将 Excel 文件合并为一个

> ID：830841
> 
> 赞同：8
> 
> 时间：2009-05-06T17:49:48.970
> 
> 标签：.net, excel

我有几百个 Excel 文件，每个文件的第一张纸上都有一些数据。我被要求用 C# 编写一个控制台应用程序，它将所有 Excel 文件合并到一个文档中，同时保留格式。

合并文件是单个工作簿，其中包含合并到文档中的每个文件的工作表。不幸的是，Excel 文件是二进制而不是 XML 格式，所以我不能执行 XSL 转换。

**是否有免费的库或示例代码演示如何将多个 Excel 文档中的工作表合并到一个文件中？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T17:55:28.817

您需要使用 Microsoft Excel 互操作库。[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.aspx)

您应该能够在 com 选项卡中添加对 Microsoft Excel 11 对象库的引用。

[http://msdn.microsoft.com/en-us/library/ms173186(VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms173186(VS.80).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-10-17T11:59:48.367

对于一个名为 Bulk File Merger 的简洁小程序来说，这是一项简单的任务（他们有一个名为 Excel File Merger 的 Mac 版本）。我设法在几分钟内合并了 300 多个文件。您还可以合并 csv 文件，这需要更少的时间。我们在几秒钟内敲出了 1300 多个 csv 文件。害怕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T17:57:08.437

它不是免费的（开发者许可证是 425 美元），但[GemBox](http://www.gemboxsoftware.com/)有一个非常好的库，比使用办公对象要快得多。一年半以来，我们在我当前的项目中使用它，它对我们来说一直表现得非常好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T17:58:36.483

查看 Visual Studio Tools for Office (VSTO)。
您可以在代码中打开工作簿并使用许多 Excel 功能，以及复制工作表，就像您说需要做的那样。

对于资源，[此 MSDN 论坛帖子](http://social.msdn.microsoft.com/forums/en-US/vsto/thread/b31bf687-2549-436a-8997-c11c9f3258ed/)演示了打开 excel 文件和复制工作表。希望这将使您朝着正确的方向前进。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-05-06T18:00:37.290

当然你可以做工具->比较->合并工作簿。正如 Joshua 所说，在 Excel 中，COM 互操作库中有 merge 方法。如果您需要一些帮助，请告诉我我在 Excel 中大量工作，并且可能能够以少量费用为您提供帮助。

# c++ - 有没有办法让 Visual Studio 卸载 dll？

> ID：830842
> 
> 赞同：1
> 
> 时间：2009-05-06T17:50:14.897
> 
> 标签：c++, wpf, visual-studio-2008, dll

我有一个 Visual Studio 2008 项目，其中包含一些旧的本机 C++ DLL 项目，以及一些使用 DLL 的较新的 WPF 项目。当我在设计器中打开 WPF xaml 窗口时，Visual Studio 会加载本机 DLL 以显示窗口。

问题是，如果我现在需要更改旧版 DLL，我需要关闭所有 WPF 窗口并重新启动 Visual Studio 才能构建它们。显然，我需要关闭正在使用 DLL 的选项卡，但是在我这样做之后，有没有办法告诉 Visual Studio 在不完全重启的情况下卸载这些 DLL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T17:55:01.890

我有过类似的问题。比重新启动好一点的是删除对 dll 的引用，然后重新添加引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T17:55:10.110

听起来像VS中的一个错误。您可以尝试获取 VS 2008 SP1 以查看是否可以修复它。否则，请到这里报告：[http](http://connect.microsoft.com/VisualStudio) ://connect.microsoft.com/VisualStudio 。如果有任何解决方法，他们会提供帮助。

# regex - 什么正则表达式会捕获从 ' 标记到行尾的所有内容？

> ID：830855
> 
> 赞同：154
> 
> 时间：2009-05-06T17:52:49.180
> 
> 标签：regex

我有一个文本文件，它用一个`'`.

有些行有两个引号，但我需要从 a 的第一个实例`'`和换行符中获取所有内容。

```
I AL01                  ' A-LINE                            '091398 GDK 33394178    
         402922 0831850 '                                   '091398 GDK 33394179    
I AL02                  ' A-LINE                            '091398 GDK 33394180    
         400722 0833118 '                                   '091398 GDK 33394181    
I A10A                  ' A-LINE 102                       '  53198 DJ  33394182    
         395335 0832203 '                                  '  53198 DJ  33394183    
I A10B                  ' A-LINE 102                       '  53198 DJ  3339418 
```

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2009-05-06T17:59:06.233

```
'.* 
```

我相信你需要这个选项，Multiline。

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2009-05-06T17:58:17.467

适当的正则表达式将是 ' 字符，后跟任意数量的任何字符 [包括零字符]，以字符串/行标记结尾：

```
'.*$ 
```

如果您想捕获' 字符*之后*的所有内容但不将其包含在输出中，您将使用：

```
(?<=').*$ 
```

这基本上是说给我所有跟随 ' 字符直到行尾的字符。

**编辑**：已经注意到 $ 在使用 .* 时是隐含的，因此不是严格要求的，因此模式：

```
'.* 
```

在技​​术上是正确的，但更明确的是具体并避免以后的代码维护混淆，因此我使用 $. 我相信，在可能对清晰度提出质疑的情况下，声明明确的行为总是比依赖隐含的行为更好。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2009-05-06T17:58:48.183

```
'.*$ 
```

从单引号 ( `'`) 开始，匹配任何字符 ( `.`) 零次或多次 ( `*`)，直到行尾 ( `$`)。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-09-21T15:45:50.560

当我在 Windows（Notepad ++）中尝试 '.* 时，它将匹配第一个 ' 之后的所有内容，直到最后一行结束。

为了捕获直到该行结束的所有内容，我输入了以下内容：

```
'.*?\n 
```

这只会捕获从 ' 到该行末尾的所有内容。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-06-01T11:19:53.177

在您的示例中，我将采用以下模式：

```
'([^\n]+)$ 
```

使用多行和全局选项来匹配所有出现。

要在匹配中包含换行符，您可以使用：

```
'[^\n]+\n 
```

但是如果没有换行符，这可能会错过最后一行。

对于单行，如果您不需要匹配我更喜欢使用的换行符：

```
'[^$]+$ 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-05-06T18:01:39.610

这将捕获反向引用 1 中直到 ' 的所有内容 - 以及反向引用 2 中 ' 之后的所有内容。尽管取决于语言 (\')，您可能需要转义撇号

```
/^([^']*)'?(.*)$/ 
```

快速修改：如果该行没有 ' - 反向引用 1 仍应捕获整行。

```
^ - start of string
([^']*) - capture any number of not ' characters
'? - match the ' 0 or 1 time
(.*) - capture any number of characters
$ - end of string 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-24T18:58:02.653

[https://regex101.com/r/Jjc2xR/1](https://regex101.com/r/Jjc2xR/1)

```
/(\w*\(Hex\): w*)(.*?)(?= |$)/gm 
```

我确信这个有效，它将在结构不良的多行文本中捕获 de hexa serial 波纹管

```
 Space Reservation: disabled
         Serial Number: wCVt1]IlvQWv
   Serial Number (Hex): 77435674315d496c76515776
               Comment: new comment 
```

我是正则表达式的永恒新手，但我会尝试解释这个

(\w*(Hex): w*) ：在字符串包含“Hex：”的行中查找文本

(.*?) 这是第二个捕获的文本，表示之后的所有内容

(?= |$) 创建一个限制，即 = 和 | 之间的空格

因此，对于第二组，您将拥有价值

# java - 将 Delphi 应用程序迁移到 Java 或 Web 应用程序

> ID：830858
> 
> 赞同：6
> 
> 时间：2009-05-06T17:53:22.113
> 
> 标签：java, ajax, delphi, swing

我们希望将 UI 丰富的应用程序从 delphi 迁移到 java 或 Web 应用程序。

原因是我们希望应用程序在所有操作系统上都是可移植的。

Delphi 中当前应用的组件和模块：

*   在 Delphi 中，我们使用 TWebBrowser 组件来显示 HTML 内容
*   我们正在播放在 HTML 中单击时从 FileStream 中提取的 mp3。
*   HTML 的所有资源都从嵌入式数据库 Firebird/Ms Access 中检索。
*   为了同步一些内容，我们将 HTTP 发布到 PHP 脚本，以集中网络服务器上的数据。

部署： - 应用程序必须部署在 CD 上并安装在 Mac OS、Linux、Windows 上的台式计算机上。

我需要你的帮助来处理这种迁移。最好使用将与 WAMP/XAMP 以及 Linux 和 Mac 上的适当发行版一起部署的 Java UI 或 Web 应用程序。

编辑：我对音频功能有一些特定要求。音频文件是分布在 CD 或 USB 上的单独文件。音频文件是从 mp3 内部编译的一个实体文件。应用程序必须能够根据存储在索引文件中的 mp3 的偏移量和大小提取 mp3 并实时播放......这如何影响使用这种方法的 Web App 的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-07T07:58:56.090

为什么不试试 FreePascal？它使用与 Delphi 相同的语言，并且可以编译为 Windows / Linux / Mac 上的原生应用程序。由于您已经在 Delphi 中拥有您的应用程序，因此转换它应该不会太困难。

看看[freepascal网站](http://www.freepascal.org/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T18:04:47.607

如果我必须在 CD 上进行部署，我可能会选择 Adob​​e 的 AIR。它确实以合理的方式履行了 Java 10 年前做出的承诺。它并不完美，但它做得很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T18:05:14.533

我听说这个互联网的东西真的很流行。

由于过去 10 年应用程序已经上线的所有原因，实际上没有太多讨论可以讨论。

尽管 Java 是可靠的，但为这些应用程序分发和推出后续更新既繁重又耗时。

我从事 Delphi 开发工作超过 9 年。很长一段时间以来，我一直反对通过 Web 分发*真实应用程序的想法。*今天，我不敢相信有人会选择以这种方式继续下去。

一件好事，如果您有创意，您可能可以在后端重用一些 Delphi 逻辑。（我只会在短期内推荐这个）

但是，这个答案并没有真正解决您的问题，因为您说您*必须*通过 CD 分发它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T18:29:15.647

Java 6u10 版本允许在媒体上而不是从 Web 服务器分发 Java WebStart 应用程序，这可能正是您正在寻找的。如果需要，您也可以将适用于 Windows 的 JRE 安装程序放在 CD 上。

您的跨平台需求到底是什么？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-06T21:17:28.173

如果您有一些使用 Datasnap 的 Delphi 应用程序：您还可以在 Delphi Prism 中使用 Datasnap 重新使用 Delphi 制作的服务器并制作 Silverlight 应用程序。

DataAbstract 也是如此

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-06T18:52:06.277

如果大多数应用程序都是基于 HTML 的，为什么不使用 Ajax 和 Java 将其变成一个完整的 Web 应用程序呢？

我推荐 NetBeans 和 ICEFaces，这是一种支持 Ajax 的 Java Server Faces 实现，包括并发更新 - 如果一个用户编辑记录，所有其他用户将在他们的网页中看到更新。

可以将整个应用程序打包在一个 jar 文件中，包括 servlet 容器（例如 Jetty），因此一个简单的 java -jar myapp.jar 将运行该应用程序。

NetBeans 允许对 ICEFaces 网页进行可视化编辑，甚至可以对页面关系进行可视化编辑。NetBeans.org 上的教程非常好，加上 Maven、Hudson 等工具，代码质量和开发过程可以达到很高的水平。

# message-queue - System i (iSeries, AS/400) 消息队列选项

> ID：830866
> 
> 赞同：1
> 
> 时间：2009-05-06T17:55:12.217
> 
> 标签：message-queue, ibm-midrange

我正在尝试在 iSeries 上找到除 WebSphere MQ 之外的 MQ 选项。这个事情谁有经验？可能吗？我可以运行像 OpenMQ 这样的纯 Java MQ 服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T19:14:00.250

尽管我没有亲自尝试过，但我看不出有什么理由不这样做。[但是，我强烈建议使用支持AMQP](http://amqp.org/)的软件包。我相信它是为 OpenMQ 计划的，但实际上还没有实现。 [Apache Qpid](http://qpid.apache.org/)可能是您应该看的东西。[它几乎和RabbitMQ](http://www.rabbitmq.com/)一样好，但是用 Java 和 JMS 兼容编写。

# linq - 动态 LINQ 上下文

> ID：830871
> 
> 赞同：2
> 
> 时间：2009-05-06T17:56:35.753
> 
> 标签：linq, .net-3.5

我试图弄清楚如何创建动态上下文，我的意思是我有两个数据库：一个用于测试，一个用于生产。根据我的网站托管位置，我希望我的上下文指向两者之一。所以，在我的 web.config 我有：

```
<add name="Testing_ChannelsEntities" connectionString="removed for brevity" providerName="System.Data.EntityClient" />
<add name="Production_ChannelsEntities" connectionString="removed for brevity" providerName="System.Data.EntityClient" /> 
```

请不要因为我删除了此示例的连接字符串而挂断电话。请注意，我在 web.config 中有一个测试和生产连接。

所以，这是我的代码隐藏，我希望为测试连接字符串创建一个上下文：

```
using (ChannelsEntities chEntity = new ChannelsEntities("Testing_ChannelsEntities")) {
    // removed the business logic because it's not relevant at all
} 
```

一旦执行命中 using 语句，我会收到以下错误：

初始化字符串的格式不符合从索引 0 开始的规范。

我在这里想念什么？这应该很容易做到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T18:10:13.663

尝试：

```
using (ChannelsEntities chEntity = new ChannelsEntities(WebConfigurationManager.ConnectionStrings["Testing_ChannelsEntities"].ConnectionString)) {
    // removed the business logic because it's not relevant at all
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T18:47:10.830

我做过类似的。试试这个 -

```
using (ChannelsEntities chEntity = new ChannelsEntities("name=Testing_ChannelsEntities")) {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T18:50:53.177

我们将连接字符串放在根 web.config 中。您可以在虚拟目录中按名称引用连接字符串，它将从您的根 web.config 继承设置。

# java - 运行时 exec 和自定义构建的 RTF 编辑器

> ID：830874
> 
> 赞同：1
> 
> 时间：2009-05-06T17:57:16.970
> 
> 标签：java, rtf, runtime.exec

我有一个管理 RTF 文档创建的类和该类中的一个方法，该方法使用 XML 文件调用 RTF 编辑器进行显示。

除一位用户外，所有用户都可以毫无问题地访问此编辑器。这个用户一直遇到他们的应用程序挂起的问题。任何日志中都没有错误。通常这种问题很容易识别、重现和纠正，但是，我不能在我的生命周期内重现它，所以我的调试尝试失败了。

基本上代码如下：

```
int exitVal = CUBSRTFEditor.runRTFEditor("c:\\tmp\\control"+ap_doc_id+".xml", xml,"I:\\AppealsLetters.exe /process \"c:\\tmp\\control"+ap_doc_id+".xml\"");

public static int runRTFEditor(String xmlLocation, String xmlContent, String executePath)
{
    int exitVal = 0;
    createLocalFile(xmlLocation, xmlContent);

    try
    {
        System.out.println("executePath must = "+executePath);
        Runtime rt = Runtime.getRuntime();
        Process proc = rt.exec(executePath);
        System.out.println("after executePath runs");

        //exhaust that stream before waiting for the process to exit
        InputStream inputstream = proc.getInputStream();
        InputStreamReader inputstreamreader = new InputStreamReader(inputstream);
        BufferedReader bufferedreader = new BufferedReader(inputstreamreader);
        // read the ls output
        String line;
        while ((line = bufferedreader.readLine())!= null)
        {
            System.out.println(line);
        }
        exitVal = proc.waitFor();
    }
    catch (Throwable t)
    {
        t.printStackTrace();
    }

    CUBSRTFEditor.deleteTempFile(xmlLocation);

    return exitVal;
} 
```

最后一个输出是第一个 System.out。当我获取 xml 文件并在任何其他 PC 上执行它时，它可以毫无问题地执行。我在 proc.getErrorStream() 或 proc.getOutputStream() 中看不到任何有用的信息。

JDK关于这个问题的Javadoc文档（exec挂起）： *由于一些原生平台只为标准输入输出流提供有限的缓冲区大小，未能及时写入子进程的输入流或读取输出流可能会导致子进程阻塞，甚至陷入僵局。*

我尝试在等待进程退出之前耗尽该流，但这似乎没有帮助，因为它似乎永远不会达到这一点（第二个 System.out 未显示）

我是否错误地实施了这一点？我错过了什么重要的东西吗？关于如何从流程中获取更多信息的任何想法都会很棒。

我被困住了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T18:07:41.907

Runtime.exec() 是一个看似讨厌的小土豆。我发现[这篇文章](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)（旧的，但仍然相关）很有帮助。您可以随时跳到第 4 页以获取一些高度可 gankable 的示例代码。:-)

乍一看，您的代码需要同时处理 proc.getOutputStream() 和 proc.getErrorStream()，这是在单独的线程中处理这些流的一个很好的理由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T20:12:57.060

我想对此进行更新，因为该更改今天已进入生产环境并且有效。根据 BlairHippo 的建议，我让它与一个匿名内部类一起工作，以创建一个单独的线程来耗尽错误和输入流。

```
new Thread(new Runnable(){
    public void run()
    {
        try
        {
            BufferedReader br = new BufferedReader(new InputStreamReader(proc.getErrorStream()));
            String line;
            while ((line = br.readLine())!= null)
            {
                System.out.println(line);
            }
        }
        catch (Throwable t)
        {
            t.printStackTrace();
        }
    }
}).start(); 
```

# sql-server - 如何使用 Visual Studio 输入长 SQL 文本示例数据？

> ID：830880
> 
> 赞同：1
> 
> 时间：2009-05-06T17:58:14.580
> 
> 标签：sql-server, visual-studio

Visual Studio 中内置的服务器资源管理器是连接数据库、查看现有数据和编辑数据的好方法。对于将样本数据输入数据库以进行测试和开发非常有用。

但是，如果您有一个“文本”列并想输入一个长文本字段怎么办？例如，我有一个文本列，我想在其中存储一个多行 XML 值。我希望能够从表数据查看器中进行多行编辑。

我不知道该怎么做？有谁知道它是否可以完成，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T18:11:47.717

我不认为这是可能的。Management Studio 将多行文本显示为一个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-15T12:30:06.150

我认为编辑器不支持多行输入或编辑。但是，您可以通过创建简单的 INSERT 语句来输入多行数据。例如：

```
CREATE TABLE TableA (
  id INT IDENTITY PRIMARY KEY,
  data VARCHAR(MAX)
)

INSERT INTO TableA (data) VALUES
('row 1
row 2
row 3') 
```

然后，只需选择整个 INSERT 语句和所有数据，然后按 F5 即可执行它。

此外，FWIW，TEXT 数据类型已被弃用；VARCHAR(MAX) 是替代品（出于多种原因，它会更好）。

# asp.net - 做出选择之后和提交上传之前的 asp.net FileUpload 事件

> ID：830899
> 
> 赞同：8
> 
> 时间：2009-05-06T18:03:08.063
> 
> 标签：asp.net, file-upload

我想显示通过 FileUpload 控件的 Browse 按钮​​选择的文件的大小。

理想情况下，该值会在用户选择文件之后但在单击“上传文件”按钮之前立即显示。

我有一个网络表单。按钮如下所示：

```
<asp:Button ID="UploadButton" runat="server" onclick="UploadButton_Click" Text="Upload File"/> 
```

按钮控件的 onclick 事件导致回发并上传文件。

我知道如何获取文件的大小，但在单击“上传文件”按钮并发生回发之前不知道。

是否存在与 FileUpload Web 控件相关的事件，无需单击按钮即可提交表单（即回发）？

整个意图是我想让用户了解上传可能需要多长时间......为 10mb 文件设置与 2kb 文件不同的预期，等等）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-06T18:11:26.157

问题是如果不回发就无法在客户端找出文件的大小。您可以使用 Ajax，但这意味着无论如何都要先上传文件。

这只能使用某种**ActiveX**控件来完成。我建议使用**[Silverlight FileUploader](http://www.codeplex.com/SilverlightFileUpld)**之类的东西，因为它会在回发之前获取文件的大小，甚至还有一个不错的进度指示器。

**更新：**如果您想在用户单击浏览后触发回发或 Ajax 请求，则客户端事件为“onchange”。这是一个如何使用 onchange 事件的示例。

```
<asp:FileUpload runat="server" 
    onchange="alert('you selected the file: '+ this.value)" /> 
```

您可以使用 onchange，触发 ajax 以首先上传文件，然后更新显示文件大小的标签。这样做的问题是，如果它是一个大文件，它会破坏让用户事先知道它需要很长时间的目的。

这是另一个建议：有一个jQuery插件，它使用flash在上传之前确定文件的大小，它非常容易使用。**[在jQuery Uploadify](http://www.uploadify.com/demo/)**中查看

# crystal-reports - Crystal Report：在报表查看器控件中居中报表

> ID：830910
> 
> 赞同：1
> 
> 时间：2009-05-06T18:05:43.830
> 
> 标签：crystal-reports, reporting

当包含的表单最大化时，寻找一种在 .NET Crystal Reports 查看器控件中居中报表的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-03-20T09:28:44.703

将 ReportViewer 控件 DOCK 属性设置为 FILL，并在调用 Show 方法后以编程方式设置窗体的 Maximized 属性。如果它在设计时设置它不起作用。请参阅下面的示例代码。

```
Me.rptViewer.Zoom(100) 

Me.rptViewer.Show()

Me.Show()

Me.WindowState = FormWindowState.Maximized 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T13:25:07.270

我认为它默认居中报告？我把 crv 放在一个表格上，然后设置扩展坞来填充。事实上，我不知道如何让它不居中报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-12-17T18:50:53.027

在查看器控件的 DOCK 属性上，将其设置为 FILL。

# wpf - WPF 不支持 Textbox.MinLines 进行自动高度计算

> ID：830912
> 
> 赞同：2
> 
> 时间：2009-05-06T18:06:53.390
> 
> 标签：wpf, user-interface, xaml, layout, textbox

我想要一个文本框，当我输入文本行时，它的高度会增长。

我已将 Height 属性设置为“Auto”，到目前为止，工作量越来越大。现在我希望文本框的高度至少为 5 行。现在我将 MinLines 属性设置为“5”，但如果我启动应用程序，TextBox 的高度仍然是一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T18:16:39.187

尝试设置 MinHeight 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-06T02:10:41.707

使 MinLines 属性工作的 hack

```
public class TextBoxAdv : TextBox
{
    bool loaded = false;

    /// <summary>
    /// Constructor
    /// </summary>
    public TextBoxAdv()
    {
        Loaded += new RoutedEventHandler( Control_Loaded );

        SetResourceReference( StyleProperty, typeof( TextBox ) );
    }

    void Control_Loaded( object sender, RoutedEventArgs e )
    {
        if( !loaded )
        {
            loaded = true;

            string text = Text;
            Text = "Text";
            UpdateLayout();
            Text = text;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-14T06:15:12.723

我提出了一个不同的解决方案，该解决方案适当地尊重`MinLines`财产，而不是强迫你使用`MinHeight`.

首先，从一个方便的方法开始，让您对`Post`窗口循环执行一个操作。（我包括一个你需要通过状态的地方和一个你不需要的地方。）

```
public static class Globals {

    public static void Post(Action callback){

        if(SynchronizationContext.Current is SynchronizationContext currentContext)
            currentContext.Post( _ => callback(), null);
        else{
            callback();
        }
    }

    public static void Post<TState>(TState state, Action<TState> callback){

        if(SynchronizationContext.Current is SynchronizationContext currentContext)
            currentContext.Post(_ => callback(state), null);
        else{
            callback(state);
        }
    }
} 
```

接下来，创建一个扩展方法`TextBox`来“初始化”基于`MinLines`. 我把它放在一个`Hacks`类中，因为对我来说，这就是它，它清楚地标识了代码。

```
public static void FixInitialMinLines(this TextBox textBox) {

    Globals.Post(() => {

        var textBinding = textBox.GetBindingExpression(TextBox.TextProperty)?.ParentBinding;

        if (textBinding != null) {
            BindingOperations.ClearBinding(textBox, TextBox.TextProperty);
            textBox.UpdateLayout();
            BindingOperations.SetBinding(textBox, TextBox.TextProperty, textBinding);
        }
        else {
            var lastValue = textBox.Text;
            textBox.Text = lastValue + "a";
            textBox.UpdateLayout();
            textBox.Text = lastValue;
        }
    });
} 
```

上面的代码处理了绑定和未绑定的`TextBox`控件，但不是像其他控件那样简单地更改值，这些控件可能会通过绑定向下更改，它首先断开绑定，强制布局，然后重新连接绑定，从而触发正确的布局用户界面。如果绑定是双向的，这可以避免无意中更改绑定的源。

`TextBox`最后，只需为设置的每个位置调用扩展方法`MinLines`。由于`Post`扩展方法中的调用，您可以立即调用它，`InitializeComponent`并且在所有其他事件触发后仍然会执行它，包括所有布局和`Loaded`事件。

```
public partial class Main : Window {

    public Main() {

        InitializeComponent();

        // Fix initial MinLines issue
        SomeTextBoxWithMinLines.FixInitialMinLines();
    }

    ...
} 
```

将上述代码添加到您的函数“库”中，您可以在所有窗口和控件中使用一行代码来解决该问题。享受！

# security - 当用户可以上传自己的文件时会出现哪些安全问题？

> ID：830919
> 
> 赞同：16
> 
> 时间：2009-05-06T18:09:58.517
> 
> 标签：security

我想知道当网站的最终用户可以将文件上传到服务器时会出现什么安全问题。

例如，如果我的网站允许用户上传个人资料图片，而一个用户上传了有害的东西，会发生什么？我应该设置什么样的安全措施来防止此类攻击？我在这里谈论的是图像，但是如果用户可以将任何内容上传到文件库类型的应用程序中呢？

这更像是一个笼统的问题，而不是关于特定情况的问题，那么在这种情况下，最佳实践是什么？你平时做些什么？

我想：上传时的类型验证，[上传文件的不同权限](https://stackoverflow.com/questions/290483/what-file-permissions-should-i-set-for-uploaded-files)……还有什么？

**编辑**：为了清除上下文，我正在考虑一个 Web 应用程序，用户可以在其中上传任何类型的文件，然后在浏览器中显示它。该文件将存储在服务器上。用户是使用该网站的任何人，因此不涉及信任。

我正在寻找适用于不同语言/框架和生产环境的一般答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-06T18:24:51.863

您的第一道防线是限制上传文件的大小，并终止任何大于该数量的传输。

文件扩展名验证可能是很好的第二道防线。类型验证可以稍后完成……只要您不依赖（用户提供的）mime 类型进行所述验证。

为什么要文件扩展名验证？因为这是大多数 Web 服务器用来识别哪些文件是可执行的。如果您的可执行文件未锁定到特定目录（很可能没有），则具有特定扩展名的文件将在站点文档根目录下的任何位置执行。

文件扩展名检查最好使用您要接受的文件类型的白名单来完成。

验证文件扩展名后，您可以通过检查魔术字节或使用 unix file 命令来检查以验证所述文件是否是其扩展名声明的类型。

我确定还有其他我错过的问题，但希望这会有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T18:25:33.563

假设您只处理图像，您可以做的一件事是使用图像库生成缩略图/一致的图像大小，并在完成后将原件扔掉。然后你实际上有一个漏洞点：你的图像库。假设你保持它是最新的，你应该没问题。

用户将无法上传 zip 文件或任何非图像文件，因为如果图像库尝试调整非图像数据的大小，则会出错，您可以捕获异常。不过，您可能希望对文件扩展名进行初步检查。如果文件名是“foo.zip”，则没有必要通过图像库发送文件。

至于权限，嗯......不要设置执行位。但实际上，权限并不能帮助您防止恶意用户输入。

如果您的编程环境允许，您将希望在上传过程中运行其中一些检查。恶意 HTTP 客户端可能会发送无限大小的文件。IE，它只是永远不会停止传输随机字节，从而导致拒绝服务攻击。或者，也许他们只是上传了一段视频作为他们的个人资料图片。大多数图像文件格式的开头也有一个标题。如果客户端开始发送与任何已知图像标头都不匹配的文件，您可以中止传输。但这开始进入矫枉过正的领域。除非你是 Facebook，否则这种事情可能是不必要的。

**编辑**

如果您允许用户上传脚本和可执行文件，您应该确保通过该表单上传的任何内容都不会作为`application/octet-stream`. `Content-Type`当您处理具有潜在危险的上传时，请勿尝试混合使用。如果您要告诉用户他们必须担心自己的安全性（这实际上是您在接受脚本或可执行文件时所做的），那么一切都应该被提供，`application/octet-stream`以便浏览器不会尝试呈现它。您还应该设置`Content-Disposition`标题。如果您想处理可执行文件，在管道中加入病毒扫描程序可能也是明智之举。 [例如， ClamAV](http://www.clamav.net/)是可编写脚本和开源的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T18:50:16.437

尺寸验证也会很有用，现在你不希望有人故意上传 100gb 的假图片吗 :)

此外，您可能需要考虑一些措施来阻止人们使用您的带宽来简单地托管图像（我主要关心托管非法内容）。无论如何，大多数人都会使用 imageshack 进行临时图像托管。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-22T09:06:34.757

如需进一步阅读，Acunetix 有一篇很棒的文章，关于[为什么文件上传表单是主要的安全威胁](http://www.acunetix.com/websitesecurity/upload-forms-threat/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T18:26:09.693

有了更多的上下文，就更容易知道漏洞可能在哪里。

如果数据可以存储在数据库中（听起来好像不会），那么您应该防范[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。

如果数据可以在浏览器中显示（听起来很像），那么您可能需要防范[HTML/CSS 注入](http://en.wikipedia.org/wiki/Code_injection#HTML.2FScript_injection_.28cross-site_scripting.29)攻击。

如果您在服务器上使用脚本语言（例如 PHP），那么您可能需要防范针对这些特定语言的注入攻击。使用已编译的服务器代码（或糟糕的脚本实现），就有可能发生缓冲区溢出攻击。

也不要忽视用户数据的安全性：您的用户能否信任您以防止他们的数据被泄露？

**编辑**：如果您真的想涵盖所有基础，请考虑[JPEG](http://www.microsoft.com/downloads/details.aspx?FamilyID=39847B71-FD47-41C7-9FA4-06C930C488A5&displaylang=en)和[WMF](http://www.google.com/url?sa=t&source=web&ct=res&cd=1&url=http%3A%2F%2Fwww.microsoft.com%2Ftechnet%2Fsecurity%2Fadvisory%2F912840.MSPX&ei=BNcBSrrSIt3JtgewpYyRBw&usg=AFQjCNFem8uJ4xvTSowtNJft0LW7P8-lpg)安全漏洞的风险。如果恶意用户可以从一个系统上传文件，然后从另一个系统查看文件 - 或说服另一个用户查看文件，这些可能会被利用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-09T14:01:32.813

内容大小 限制某些文件类型（.jpeg、.png 等，只允许列入白名单的文件类型） 文件篡改（例如：支持外语的网站，允许某些编码。黑客可能会利用这并添加任何脚本/恶意代码编码并附加到原始文件并尝试上传）

# css - CSS 样式表——IE 6/7 错误

> ID：830921
> 
> 赞同：1
> 
> 时间：2009-05-06T18:10:31.277
> 
> 标签：css, xhtml, internet-explorer-7, rendering, internet-explorer-6

我正在使用表单开发一个网站，不幸的是，其中一个目标浏览器是 IE 6 和 7。我遇到了 CSS 和 IE 呈现样式的表单元素的问题。

我写了一个测试用例，它就是这样（也可以在[http://xistence.osnn.net/testcases/ie67fieldset/](http://xistence.osnn.net/testcases/ie67fieldset/)在线获得）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>IE [6|7] Wha?</title>
    <style type="text/css">

    html, body, div, span, applet, object, iframe,
    h1, h2, h3, h4, h5, h6, p, blockquote, pre,
    a, abbr, acronym, address, big, cite, code,
    del, dfn, em, font, img, ins, kbd, q, s, samp,
    small, strike, strong, sub, sup, tt, var,
    dl, dt, dd, ol, ul, li,
    fieldset, form, label, legend,
    table, caption, tbody, tfoot, thead, tr, th, td {
        margin: 0;
        padding: 0;
        border: 0;
        outline: 0;
        font-weight: inherit;
        font-style: inherit;
        font-size: 100%;
        font-family: inherit;
        vertical-align: baseline;
    }

    /* remember to define focus styles! */
    :focus {
        outline: 0;
    }

    body {
        line-height: 1;
        color: black;
        background: white;
    }

    #req fieldset {
        border: 0;
        border-top: 1px solid #000;
        padding: 0em 1em 0em 1em;
    }

    #req legend + label {
        margin-top: 0.5em;
    }

    #req legend {
        font-size: 1.2em;
    }

    #req label {
        display: block;
        background: none;
    }

    #req input, #req textarea {
        position: relative;
        display: block;
        left: 200px;
        top: -1em;
        margin-bottom: -0.3em;
    }

    #req input[type="text"], #req textarea {
        width: 300px;
    }

    #req textarea {
        height: 3.6em;
    }

    #req input[type="text"], #req textarea {
        border: 1px solid #0a0;
    }

    #req label.required + input[type="text"], #req label.required + textarea {
        border: 1px solid #a00;
    }

    #req input[type="submit"] {
        position: relative;
        top: 0;
        margin: 0;
        left: 200px;
        margin-top: 0.5em;
    }

    #req input[type="hidden"] {
        display: none;
    }
    </style>
</head>
<body>
<form id="req">
    <fieldset>
        <legend>Contact Information</legend>
        <label for="name" class="required">Name: </label> <input type="text" id="name" name="name"></input>
        <label for="phone" class="required">Phone Number: </label> <input type="text" id="phone" name="phone"></input>
        <label for="email">Email: </label> <input type="text" id="email" name="email"></input>
    </fieldset>
    <fieldset>
        <legend>Personal Info</legend>
        <label for="sports">Sports:</label> <input type="text" id="sports" name="sports"></input>
        <label for="spentonline">Hours spent online: </label> <input type="text" id="spentonline" name="spentonline"></input>
        <label for="moreinfo">Tell us about yourself: </label> <textarea id="moreinfo" name="moreinfo"></textarea>
    </fieldset>
    <fieldset>
        <input type="submit" value="Submit" />
    </fieldset>
</form>
</body>
</html> 
```

我还拍摄了两张屏幕截图，一张是 IE 7，一张是 IE 8，IE 7 和 IE 6 同意这种样式，所以我没有费心拍摄 IE 6 的屏幕截图。

IE [6|7]： ![在此处输入图像描述](https://i.stack.imgur.com/5Zkud.png)

即 8：

![在此处输入图像描述](https://i.stack.imgur.com/0FHSK.png)

有没有人见过这个错误？我哪里做错了？我必须删除什么才能使其在 IE 6/7 中工作而无需通过我的输入框有额外的行。当边框顶部在字段集上消失时，多余的行将被删除，但这不是解决方案，因为这样做会删除整个视觉分离。

* * *

它是固定的。textarea 和 input[type="text"] 上的 margin-bottom 导致 IE 6/7 出现渲染错误。删除了这些，一切都很好。我想我可以处理页面上元素之间的额外空间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T18:17:03.147

我看你用

```
input[type="submit"] 
```

我怀疑 IE6 是否支持这一点...您可能希望在所有字段上放置类以区分不同类型的输入。

**编辑**：

```
margin-bottom: -0.3em; 
```

您当前使用的负边距通常会导致 IE 出现问题，因此应将其删除

# sql-server - 数据库 + Windows 身份验证 + 用户名/密码？

> ID：830929
> 
> 赞同：26
> 
> 时间：2009-05-06T18:11:53.643
> 
> 标签：sql-server, authentication, windows-authentication

我一直认为，为了使用带有显式指定凭据的 Windows 身份验证连接到 SQL Server，您必须先登录用户、模拟，然后再连接。

在我看来，[这个链接](http://blogs.msdn.com/spike/archive/2008/11/14/connectionstrings-mixing-usernames-and-windows-authentication-who-goes-first.aspx)表明，只需在连接字符串中指定“uid=...;pwd=...”，就可以轻松连接到 SQL 服务器。我测试了这种方法只是为了确保它不起作用，并且 - 你瞧 - 它没有。如果那篇博文不在 msdn.com 上，我会认为它是菜鸟谈话，但确实如此。

有谁知道我错过了什么？

**EDIT1：**许多受访者误解了我的意思。这是我正在谈论的内容的副本/粘贴。它*不是*集成的 SQL，也不是由 IIS 进行的 ASP.NET 模拟：

```
string sql4 = String.Format(
   @"Data Source={0};Integrated Security=SSPI;uid=<uid>;pwd=<pid>", server);     
// Database + Windows Authentication + Username/Password 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-05-06T22:35:23.650

SQL Server 有两种不同的安全性。“Windows 身份验证”和“SQL Server 身份验证”。当您看到 uid 和 pwd 时，您看到的是后者。在这种情况下，uid 不是 Windows 主体——操作系统对此一无所知。

所以你的问题的答案是，**不**，你不能在连接字符串中传递 Windows 用户名和密码来登录 SQL Server。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T18:16:14.040

这取决于 - 如果您从命令行或 Winforms 应用程序直接连接到您的 SQL Server，您可以指定“Integrated Security=SSPI;” 然后使用您的 Windows 凭据作为登录凭据，或者您指定“用户 id=....；pwd=.....” - 但那是 SQL 登录 - 而不是您的 Windows 登录。

您提到“模拟然后连接”——这似乎表明 ASP.NET——这又是一个完全不同的故事。如果您冒充，那么您基本上是在使用您的 Windows 凭据，例如，Web 服务器将“冒充”您并以您的身份登录（使用您的 Windows 凭据）。在这种情况下，再一次，不需要指定“uid=....；pwd=.....”（如果是，它将被忽略）。

正如您提到的链接清楚地表明 - 如果您可以直接连接，并且您指定“Integrated Security=SSPI;”，那么这优先于您可能还指定并记录的任何 uid=...;pwd=...。您在使用您的 Windows 凭据；那些额外的 uid=...;pwd=.... 部分将被忽略。

马克

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T19:18:23.250

有问题的文章和观点涉及 SQL 安全性，而不是集成安全性。如果启用了 SQL 身份验证（混合模式），您可以传递 SQL 用户的凭据并以这种方式登录。如果 SQL 服务器设置为仅使用集成安全性，那么这将不起作用。允许使用 Windows 登录凭据登录也不起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-06T22:49:08.920

在我们的商店中，我们通常使用您描述的连接字符串。没问题。但是你的 sql server 数据库必须设置为使用 sql security，而不是 windows 身份验证。

我们应用程序中的示例连接字符串（来自 web.config）如下所示：

```
<connectionStrings>
<add name="ConfigurationData" connectionString="server=DevServer;
database=travel_expense_management_dv;uid=userid;pwd=password!;"
providerName="System.Data.SqlClient" />
</connectionStrings> 
```

另一方面，我们商店的 DBA 大师在主服务器上为我设置了一个个人数据库，该数据库与我的 Windows 登录集成了安全性。我不需要 uid 和 pwd，因为它从上下文中获取了我的身份验证信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-14T14:42:20.193

是的，正如你所说，文章提到了这一点：

```
string sql4 = String.Format(@"Data Source={0};Integrated Security=SSPI;uid=<uid>;pwd=<pid>", server);     // Database + Windows Authentication + Username/Password 
```

但是，如果您稍后仔细阅读几行，它会说：

> 字符串 sql4 -> 使用 Windows 登录登录，即。优先于用户名/密码。

:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-06T21:03:20.623

这是很老的，但也许有人有同样的问题。

您**可以**使用**WindowsAuthentication**并**在您的连接字符串上指定用户 ID 和密码进行连接**，但不是在每台设备上。**例如，您可以在 WinCE**设备 ( [https://technet.microsoft.com/en-us/library/aa275613(v=sql.80).aspx](https://technet.microsoft.com/en-us/library/aa275613(v=sql.80).aspx) )上实现此目的。

我不知道您是否可以仅使用连接字符串在其他操作系统上执行相同的操作（无需进行模拟操作）。

希望能帮助到你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-30T05:54:41.717

对于仍然遇到此类问题的一些人来说，这只是一个贡献。根据我的经验，如果您未在连接中指定任何用户/密码，它将使用 Windows 身份验证自动连接到数据库。这意味着它将获取用户 ID 和登录机器的用户的凭据。如果系统识别出您的用户 ID 在数据库中存在/创建，系统将允许您连接到数据库。但是，一旦您在连接中指定了用户名和密码，它就会绕过 Windows 身份验证并使用 sql server 身份验证。

# silverlight - 如何将多个系列数据绑定到 Silverilght 工具包图表

> ID：830931
> 
> 赞同：1
> 
> 时间：2009-05-06T18:12:55.607
> 
> 标签：silverlight, charts, toolkit

我正在尝试使用数据绑定将数据绑定到 Silverlight 工具包图表。我将有一组系列，因此无法事先确定我需要多少系列。我还想坚持一个数据绑定模型，而不是求助于以编程方式添加这些系列，因为许多其他控件绑定到这个数据源。

我在网上找到了 Jeremiah Morrill 的一篇文章，该文章展示了这个问题的解决方案。

[耶利米的解决方案](http://jmorrill.hjtcentral.com/Home/tabid/428/EntryId/351/Silverlight-Charts-Binding-multiple-Series.aspx)

现在这最初工作得很好，直到我尝试在应用程序运行时更新我的​​数据绑定的数据源值，这不会反映出来。好像它没有订阅 PropertyChanged 事件。我什至将相同的数据绑定到图表旁边的数据网格，并且每次我的数据绑定的数据源值发生变化时，数据网格都会按预期做出反应。

在我来自 Jeremiah 解决方案的 ChartHelper 中，我有以下依赖属性

```
public static readonly DependencyProperty SeriesSourceProperty =
        DependencyProperty.RegisterAttached("SeriesSource", 
                                            typeof(IEnumerable), 
                                            typeof(ChartHelper),
                                            new PropertyMetadata(SeriesSourceChanged)); 
```

SeriesSourceChanged 事件在我的应用程序启动时被调用。但是，当我的 DataBinding 的数据源值更改时，不会再次调用它。

所以问题如下：

*   如何使用此解决方案捕获 PropertyChanged 通知？
*   有什么我可以添加到上面的 DependencyProperty 来捕获的吗？
*   我需要添加到图表或系列中来实现这一点吗？

我已经为此绞尽脑汁好几天了，所以任何帮助或建议将不胜感激

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-02-22T23:29:38.310

SeriesSource 类型应该是 ObservableCollection 而不是 IEnumerable。然后你做这样的事情：

```
private static void SeriesSourceChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
{
    var sender = o as YourType;
    var newCollection = e.NewValue as ObservableCollection<DataSetViewModel>;
    if (newCollection != null)
    {
        newCollection.CollectionChanged += new NotifyCollectionChangedEventHandler(sender.OnCollectionChanged);
    }
}

private void OnCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-07-13T06:20:59.437

我从来没有找到解决这个问题的方法，最终使用了来自[visifire的图表控件](http://www.visifire.com/)

我发现这更容易定制，但从未找到一种使用数据绑定来实现这一目标的巧妙方法，最终采用了一种更具程序性的方法。

# linq - 编写一个 linq 表达式以选择项目的子树

> ID：830935
> 
> 赞同：1
> 
> 时间：2009-05-06T18:14:29.237
> 
> 标签：linq, tree

给定一个类：

```
class Control
{
    public Control Parent { get; set; }
    public List<Control> Children { get; set; }
} 
```

和一个清单：

```
List<Control> myControls; 
```

是否可以编写一个 linq 查询来选择给定控件的所有子和孙子？例如，如果一棵树看起来像这样：

```
GridA1
  PanelA1
    TextBoxA1
    TextBoxA2
    PanelA2
      ListBoxA1
      ListBoxA2
GridB1
  PanelB1
    TextBoxB1 
```

我想要一个查询，给定列表 myControls，其中包含所有上述控件，其父和子属性设置为适当，可以使用 PanelA1 参数化并返回 TextBoxA1、TextBoxA2、PanelA2、ListBoxA1 和 ListBoxA2。有没有一种有效的方法可以用 linq 做到这一点？我正在从数据库中选择一个树结构，并寻找一种比递归函数更好的方法来分离子树。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T18:20:21.080

使用 LINQ 很难以非常漂亮的方式做到这一点，因为 lambda 表达式在定义之前不能自递归。递归函数（可能使用 LINQ）是您最好的选择。

我将如何实现它：

```
public IEnumerable<Control> ChildrenOf(this IEnumerable<Control> controls)
{
    return controls.SelectMany(c =>
        new Control[] { c }.Concat(ChildrenOf(c.Children)));
} 
```

# python - Python 将 args 转换为 kwargs

> ID：830937
> 
> 赞同：28
> 
> 时间：2009-05-06T18:14:35.383
> 
> 标签：python, decorator

我正在编写一个装饰器，它需要在调用它正在装饰的函数之前调用其他函数。装饰函数可能有位置参数，但装饰器将调用的函数只能接受关键字参数。有没有人有一种方便的方法将位置参数转换为关键字参数？

我知道我可以获得装饰函数的变量名列表：

```
>>> def a(one, two=2):
...    pass

>>> a.func_code.co_varnames
('one', 'two') 
```

但我不知道如何区分按位置传递的内容以及作为关键字的内容。

我的装饰器看起来像这样：

```
class mydec(object):
    def __init__(self, f, *args, **kwargs):
        self.f = f

    def __call__(self, *args, **kwargs):
        hozer(**kwargs)
        self.f(*args, **kwargs) 
```

除了比较 kwargs 和 co_varnames，向 kwargs 添加任何不存在的内容并希望获得最好的结果之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-06T19:00:32.653

任何按位置传递的 arg 都将传递给 *args。并且作为关键字传递的任何 arg 都将传递给 **kwargs。如果您有位置参数值和名称，那么您可以执行以下操作：

```
kwargs.update(dict(zip(myfunc.func_code.co_varnames, args))) 
```

将它们全部转换为关键字参数。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-10-23T07:31:18.693

如果您使用的是 Python >= 2.7 `inspect.getcallargs()`，则可以立即为您执行此操作。您只需将装饰函数作为第一个参数传递给它，然后将其余参数完全按照您计划调用它的方式传递。例子：

```
>>> def f(p1, p2, k1=None, k2=None, **kwargs):
...     pass
>>> from inspect import getcallargs 
```

我打算这样做`f('p1', 'p2', 'p3', k2='k2', extra='kx1')`（请注意，k1 在位置上作为 p3 传递），所以...

```
>>> call_args = getcallargs(f, 'p1', 'p2', 'p3', k2='k2', extra='kx1')
>>> call_args
{'p2': 'p2', 'k2': 'k2', 'k1': 'p3', 'p1': 'p1', 'kwargs': {'extra': 'kx1'}} 
```

如果您知道修饰函数不会使用`**kwargs`，那么该键将不会出现在字典中，并且您就完成了（我假设没有`*args`，因为这会打破所有东西都有名称的要求）。如果你*确实*有`**kwargs`，就像我在这个例子中那样，并且想将它们包含在其余的命名参数中，它需要多一行：

```
>>> call_args.update(call_args.pop('kwargs'))
>>> call_args
{'p2': 'p2', 'k2': 'k2', 'k1': 'p3', 'p1': 'p1', 'extra': 'kx1'} 
```

更新：对于 Python >= 3.3，请参阅[`inspect.Signature.bind()`](https://docs.python.org/3/library/inspect.html#inspect.Signature.bind)和相关[`inspect.signature`功能](https://docs.python.org/3/library/inspect.html#inspect.signature)的功能类似于（但更强大）`inspect.getcallargs()`。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-07T07:37:01.103

注意 - co_varnames 将包括局部变量和关键字。这可能无关紧要，因为 zip 会截断较短的序列，但如果您传递错误数量的 args，可能会导致混淆错误消息。

您可以使用 来避免这种情况`func_code.co_varnames[:func_code.co_argcount]`，但更好的是使用[检查](http://docs.python.org/library/inspect.html)模块。IE：

```
import inspect
argnames, varargs, kwargs, defaults = inspect.getargspec(func) 
```

您可能还想处理函数定义`**kwargs`或的情况`*args`（即使只是在与装饰器一起使用时引发异常）。如果设置了这些，则第二个和第三个结果`getargspec`将返回它们的变量名，否则它们将为无。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2010-02-22T19:08:23.160

好吧，这可能是矫枉过正。我为 dectools 包（在 PyPi 上）编写了它，所以你可以在那里获得更新。它返回考虑到位置、关键字和默认参数的字典。包中有一个测试套件（test_dict_as_call.py）：

```
def _dict_as_called(function, args, kwargs):
    """ return a dict of all the args and kwargs as the keywords they would
    be received in a real function call.  It does not call function.
    """

    names, args_name, kwargs_name, defaults = inspect.getargspec(function)

    # assign basic args
    params = {}
    if args_name:
        basic_arg_count = len(names)
        params.update(zip(names[:], args))  # zip stops at shorter sequence
        params[args_name] = args[basic_arg_count:]
    else:
        params.update(zip(names, args))    

    # assign kwargs given
    if kwargs_name:
        params[kwargs_name] = {}
        for kw, value in kwargs.iteritems():
            if kw in names:
                params[kw] = value
            else:
                params[kwargs_name][kw] = value
    else:
        params.update(kwargs)

    # assign defaults
    if defaults:
        for pos, value in enumerate(defaults):
            if names[-len(defaults) + pos] not in params:
                params[names[-len(defaults) + pos]] = value

    # check we did it correctly.  Each param and only params are set
    assert set(params.iterkeys()) == (set(names)|set([args_name])|set([kwargs_name])
                                      )-set([None])

    return params 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-10-27T19:43:12.397

Nadia 的答案是正确的，但我觉得该答案的工作演示很有用。

```
def decorator(func):
    def wrapped_func(*args, **kwargs):
        kwargs.update(zip(func.__code__.co_varnames, args))
        print(kwargs)
        return func(**kwargs)
    return wrapped_func

@decorator
def thing(a,b):
    return a+b 
```

给定这个修饰函数，以下调用会返回适当的答案：

```
thing(1, 2)  # prints {'a': 1, 'b': 2}  returns 3
thing(1, b=2)  # prints {'b': 2, 'a': 1}  returns 3
thing(a=1, b=2)  # prints {'a': 1, 'b': 2}  returns 3 
```

但是请注意，如果您开始嵌套装饰器，事情就会变得很奇怪，因为装饰函数现在不再需要 a 和 b，而是需要 args 和 kwargs：

```
@decorator
@decorator
def thing(a,b):
    return a+b 
```

这里`thing(1,2)`将打印`{'args': 1, 'kwargs': 2}`和错误`TypeError: thing() got an unexpected keyword argument 'args'`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-04-04T17:28:54.870

`inspect.signature`这是使用（用于 Python 3.3+）解决此问题的新方法。我将给出一个可以自己运行/测试的示例，然后展示如何使用它修改原始代码。

这是一个测试函数，它只是总结了给它的任何 args/kwargs；至少需要一个参数`a`（`b`

```
def silly_sum(a, *args, b=1, **kwargs):
    return a + b + sum(args) + sum(kwargs.values()) 
```

现在让我们创建一个包装器，`silly_sum`它可以以相同的方式被调用`silly_sum`（除了我们将得到的一个例外），但它只将 kwargs 传递给被包装的`silly_sum`.

```
def wrapper(f):
    sig = inspect.signature(f)
    def wrapped(*args, **kwargs):
        bound_args = sig.bind(*args, **kwargs)
        bound_args.apply_defaults()
        print(bound_args) # just for testing

        all_kwargs = bound_args.arguments
        assert len(all_kwargs.pop("args", [])) == 0
        all_kwargs.update(all_kwargs.pop("kwargs"))
        return f(**all_kwargs)
    return wrapped 
```

`sig.bind`返回一个`BoundArguments`对象，但这不会考虑默认值，除非您`apply_defaults`明确调用。`*args`如果没有给出/ ，这样做还会为 args 生成一个空元组，为 kwargs 生成一个空字典`**kwargs`。

```
sum_wrapped = wrapper(silly_sum)
sum_wrapped(1, c=9, d=11)
# prints <BoundArguments (a=1, args=(), b=1, kwargs={'c': 9, 'd': 11})>
# returns 22 
```

然后我们只需获取参数字典并添加任何参数`**kwargs`。使用此包装器的例外是`*args`不能传递给函数。这是因为这些没有名称，所以我们无法将它们转换为 kwargs。如果可以接受将它们作为名为 args 的 kwarg 传递，则可以改为这样做。

* * *

以下是如何将其应用于原始代码：

```
import inspect

class mydec(object):
    def __init__(self, f, *args, **kwargs):
        self.f = f
        self._f_sig = inspect.signature(f)

    def __call__(self, *args, **kwargs):
        bound_args = self._f_sig.bind(*args, **kwargs)
        bound_args.apply_defaults()
        all_kwargs = bound_args.arguments
        assert len(all_kwargs.pop("args"), []) == 0
        all_kwargs.update(all_kwargs.pop("kwargs"))
        hozer(**all_kwargs)
        self.f(*args, **kwargs) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-09T04:17:14.877

在这里完善@mikenerone 的（最佳）解决方案是原始海报问题的解决方案：

```
import inspect
from functools import wraps

class mydec(object):
    def __init__(self, f, *args, **kwargs):
        self.f = f

    def __call__(self, *args, **kwargs):
        call_args = inspect.getcallargs(self.f, *args, **kwargs)
        hozer(**call_args)

        return self.f(*args, **kwargs)

def hozer(**kwargs):
    print('hozer got kwds:', kwargs)

def myadd(i, j=0):
    return i + j

o = mydec(myadd)
assert o(1,2) == 3
assert o(1) == 1
assert o(1, j=2) == 3 
```

```
hozer got kwds: {'i': 1, 'j': 2}
hozer got kwds: {'i': 1, 'j': 0}
hozer got kwds: {'i': 1, 'j': 2} 
```

这是一个通用装饰器，它将所有参数转换并合并到 Python 函数中`kwargs`，并仅使用这些 kwargs 调用包装函数。

```
def call_via_kwargs(f):
    @wraps(f)
    def wrapper(*args, **kwds):
        call_args = inspect.getcallargs(f, *args, **kwds)
        print('kwargs:', call_args)
        return f(**call_args)
    return wrapper

@call_via_kwargs
def adder(i, j=0):
    return i + j

assert adder(1) == 1
assert adder(i=1) == 1
assert adder(1, j=2) == 3 
```

```
kwargs: {'i': 1, 'j': 0}
kwargs: {'i': 1, 'j': 0}
kwargs: {'i': 1, 'j': 2} 
```

这些解决方案正确处理默认参数。

# c# - WPF 数据绑定：如何将存储过程绑定到 Listview

> ID：830939
> 
> 赞同：2
> 
> 时间：2009-05-06T18:15:19.593
> 
> 标签：c#, wpf, data-binding, stored-procedures

我有一个按钮，单击该按钮将在 SQL Server 上运行存储过程，并在同一窗口内的网格中显示结果数据。

在 Windows 窗体世界中，我会创建一个数据表，使用数据适配器填充它，然后将数据表分配给我的 DataGridView 的 DataSource 属性，然后噗……这是我的数据。

我在 WPF 中尝试使用带有 Gridview 的 ListView 进行类似的操作，但我似乎无法使其工作。我的 XAML 中有以下内容：

 `````
<ListView Grid.Row="1" Name="Preview" ItemsSource="{Binding Path=Report}">
  <GridView>
    <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Path=FormalName}" />
  </GridView>
</ListView> 
````  `在我的 C# 代码中

```
private void CreateReport(object sender, RoutedEventArgs e) 
{
  DataTable dt = new DataTable("Report");
  SqlConnection cn = new SqlConnection("Data Source=DailyTimesheets;
             Initial Catalog=DailyTimesheets;Integrated Security=SSPI");

  SqlCommand cm = new SqlCommand("Reports.PayrollHoursInterface", cn);
  cm.Parameters.AddWithValue("@PayBatchID", 722);
  cm.CommandType = CommandType.StoredProcedure;

  SqlDataAdapter da = new SqlDataAdapter(cm);
  da.Fill(dt);

  Preview.DataContext=dt;
} 
```

当我单击按钮（触发 CreateReport 方法）时，我的数据表被填充并分配给 Datacontext，但没有显示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T22:26:12.847

我制作了一个示例应用程序，发现您需要用 ListView.View 包围您的 GridView 并将您的 ItemsSource 设置为 {Binding} ，如下所示：

```
<ListView Name="Preview" ItemsSource="{Binding}">
<ListView.View>
  <GridView>
    <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Path=FormalName}" />
  </GridView>
 </ListView.View>
</ListView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T19:07:41.200

我认为部分问题是您仍在考虑 WinForms。与其将 Grid 绑定到 Table，不如将 ListBox 绑定到 Collection？

试试这个：

1) 创建另一个实现 INotifyPropertyChanged 的​​类。我们将把这个类用于 DataContext。将其视为您的 BindingEngine。我通常将其作为 Window 本身的 DataContext，使其在 Window 中的任何位置都可用。

2) 在作为 ObservableCollection 的新类中公开一个属性，其中 YourType 是另一个实现 INotifyPropertyChanged 并公开您希望显示的数据属性的类。

3) 在引擎中创建一个填充您的集合的方法。然后在填充时触发 PropertyChanged 事件。

4) 将 ListBox ItemsSource 绑定到属性。

5) 创建一个 ItemTemplate 并使用 YourType 中的属性名称进行绑定。

这是伪代码，但应该让你接近：

```
<Window>
    <Window.Resources>
        <ObjectDataProvider x:Key="MyEngineDS" ObjectType="{x:Type MyEngine:MyEngineNamespace}" d:IsDataSource="True"/>
        <DataTemplate x:Key="ItemTemplate1">
            <TextBlock Text="{Binding MyPropertyName}" />
        </DataTemplate>
    </Window.Resources>
    <Window.DataContext>
        <Binding Mode="OneWay" Source="{StaticResource MyEngineDS}"/>
    </Window.DataContext>
    <Grid x:Name="LayoutRoot">
        <ListBox ItemsSource="MyCollection" ItemTemplate="{DynamicResource ItemTemplate1}" />
    </Grid>
</Window> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T18:21:21.263

尝试使用 ItemsSource="{Binding}" 代替。

# css - IE8 问题：即使浮动，div 也会断行

> ID：830940
> 
> 赞同：1
> 
> 时间：2009-05-06T18:15:29.983
> 
> 标签：css, internet-explorer-8

这看起来像 IE8 问题。我有两个并排的 div，因为我将其中一个浮动到左侧。但是，如果右 div 内的内容对于窗口来说太大，则右 div 会换行并位于左 div 之下。如何让两个 div 并排保持在同一水平？

这是代码：

CSS：

```
 <style type="text/css">
    #left_div
    {
        float: left;
        width: 250px;
        height: 400px;
        border: solid 1px red;
    }
    #right_div
    {
        width: 3000px;
        border: solid 1px blue;
    }
</style> 
```

html:

```
 <div id="left_div">
        text in left_div
    </div>
    <div id="right_div">
        text in right_div
    </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T18:40:24.293

将 float: left 也添加到 right_div 。

[如果它与Matthew James Taylor](http://matthewjamestaylor.com/blog/perfect-2-column-left-menu.htm)和他的[Perfect 2 Column Left Menu](http://matthewjamestaylor.com/blog/perfect-2-column-left-menu.htm)显示的示例相似，请看看他是如何做到的，也许可以复制它！

* * *

IE 过去也存在这样一个问题，即它需要高度和宽度来表示高度最小值和宽度最小值，因此即使它们设置了特定的限制，它们仍然允许调整大小。请参阅[Webcredible 的文章](http://www.webcredible.co.uk/user-friendly-resources/css/internet-explorer.shtml)，最值得注意的是他们列表中的第 2 位！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T21:20:41.223

您还可以在 right_div 中添加至少 250px（left_div 的宽度）的左边距，这样在 right_div 旁边总会有 left_div 的空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-27T17:45:30.580

更改文档类型：（IE8 需要它正确呈现网页）

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" " [http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd](http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd) " >
<html xmlns="http ://ww w.w3.org/1999/xhtml" xml:lang="en-GB">

（我用空格编辑了网址，所以不要忘记删除它们:)）

# sql-server - SSRS css 搞砸了？

> ID：830943
> 
> 赞同：2
> 
> 时间：2009-05-06T18:16:28.360
> 
> 标签：sql-server, css, reporting-services, reportingservices-2005

所以在过去的几天里，我的 ssrs 开发网页看起来真的很奇怪，好像它根本没有被 css 样式化。我不是唯一一个看到这样的人。我们刚刚重新启动了服务器，它没有任何效果。如果您知道这是什么原因造成的，请提供帮助。

另一个症状是我现在无法修改安全设置。

![产品](https://i630.photobucket.com/albums/uu24/Thirster42/screen2.jpg)

![开发](https://i630.photobucket.com/albums/uu24/Thirster42/screen1.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T18:39:30.957

如果我是你，我会使用 FF (firebug) 查看页面，并查看头部是否正在导入 CSS。

如果是，请确保路径正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T15:00:21.627

一些一般的事情浮现在脑海中......

*   确保您的 IIS 应用程序/虚拟目录设置正确，尤其是在您使用 SSRS2005 时。默认的 IIS 应用程序是“Reports”和“ReportServer”
*   确保 NTFS 权限对于本地路径是正确的。例如，ReportServer 的默认位置是“c:\Program Files\Microsoft SQL Server\MSSQL.3\Reporting Services\ReportServer”

根据我的经验，当发生这样的奇怪事情时，会出现用户权限/访问问题。特别是当您无法修改安全设置时。

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T19:04:59.530

好吧，它似乎已经修复了自己。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T01:42:55.950

这可能有点幼稚，但是您是否尝试过代码的离线版本？

在您选择的浏览器中通过“查看源代码”获取生成的 HTML，然后通过使用来自 html 的任何路径直接从同一浏览器访问它来获取样式表（我推荐 Google Chrome，因为查看源代码提供了可点击的超链接来源）。将它们都放在您的桌面上，确保保留相对路径，然后查看离线状态。

我确信服务器/Microsoft 会生成所有这些代码，因此它应该可以工作，因此缺少结束标记或放错分号可能不是答案，但我不止一次发现将我的输出从服务器并在我的桌面上使问题从神秘变为“哦！Duh！/styles/style.css，而不是/Styles/style.css”等。

如果 www 没有对所有正确文件夹的读取/执行访问权限，则问题只能出在您的服务器上。我发现这真的不太可能，但是通过简单地尝试查看 CSS 的源代码很容易检查。如果可以，问题出在服务器后输出。

# jquery - 返回元素上的 $.getJSON 错误

> ID：830944
> 
> 赞同：0
> 
> 时间：2009-05-06T18:16:30.153
> 
> 标签：jquery, asp.net-mvc

仍在通过 JQuery 获取数据并重新填充页面的某些部分。现在我无法让它返回数据，但它确实弹出一个错误，说“数据未定义”。

代码：

```
var retrieveData2 = function(path, productGroup, productType, itemsPerPage, pageIndex, filters, fnHandleCallback) {
    $.getJSON(path
             , { productGroup: productGroup, productType: productType, itemsPerPage: itemsPerPage, pageIndex: pageIndex, filter: filter }
             , function(data) { fnHandleCallback(data); });
};

function updateNavIndex(pageIndex) {
    var filters = $("form").serialize();
    var productGroup = $("#valProductGroup").attr('title');
    var productType = $("#valProductType").attr('title');
    var itemsPerPage = $("#ItemsPerPage").val();

    retrieveData2("/CatalogAjaxController/UpdateNavigation", productGroup, productType, itemsPerPage, pageIndex, filters, handleMenuData(data));
}

function handleMenuData(data) {
    $("#CatalogPagingMenu").remove();

    // [http://ejohn.org/blog/javascript-micro-templating/][apply data to template]
    } 
```

当调用 updateNavIndex 函数时，我收到“Microsoft JScript 运行时错误：‘数据’未定义”的错误。

我错过了什么？

* * *

啊！更接近（现在有 1 票的答案）-**但没有进行服务器调用**。它直接进入回调处理程序。:(

* * *

让它大部分工作。我的 URL 指向 CatalogAjaxController。它应该指向 CatalogAjax，因为 MVC 知道它是一个控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T19:35:16.487

您将 handleMenuData(data) 作为函数**调用**而不是函数指针传递。它不是传递函数，而是传递该函数调用的结果。

要解决此问题，您需要将回调放在引号中： `'handleMenuData(data)'`或者更好：将其包装在一个内联函数中`function() { handleMenuData(data); }`

但看起来数据是结果的一部分，在这种情况下，您只需从方法中删除参数：

```
retrieveData2("/CatalogAjax/UpdateNavigation", productGroup, productType, itemsPerPage, pageIndex, filters, handleMenuData); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T18:20:53.200

在这一行：

```
retrieveData2("/CatalogAjaxController/UpdateNavigation", productGroup, productType, itemsPerPage, pageIndex, filters, handleMenuData(data)); 
```

您传递给 handleMenuData 的数据在 updateNavIndex 函数的范围内是未定义的。实际上我看不到 updateNavIndex 函数是如何被调用的，它应该如何知道数据参数。

* * *

更改此行：

```
retrieveData2("/CatalogAjaxController/UpdateNavigation", productGroup, productType, itemsPerPage, pageIndex, filters, handleMenuData(data)); 
```

至：

```
retrieveData2("/CatalogAjaxController/UpdateNavigation", productGroup, productType, itemsPerPage, pageIndex, filters, handleMenuData); 
```

retrieveData2 函数获取最后一个参数一个函数，在您的情况下是 handleMenuData。它将使用在retrieveData2 中定义的数据参数调用它。相信你明白了一些东西：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T18:35:43.867

在您发布的代码中，`retrieveData2`有一个名为的参数，`filters`但您的调用`$.getJSON()`被传递`filter: filter`而不是`filter: filter`**s**：

```
var retrieveData2 = function(path, productGroup, productType, itemsPerPage, pageIndex, filters, fnHandleCallback) {
    $.getJSON(path
             , { productGroup: productGroup, productType: productType, itemsPerPage: itemsPerPage, pageIndex: pageIndex, filter: filter }
             , function(data) { fnHandleCallback(data); });
}; 
```

这可能是原因吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T02:18:28.683

代替：

```
retrieveData2("/CatalogAjaxController/UpdateNavigation", productGroup, productType, itemsPerPage, pageIndex, filters, handleMenuData); 
```

我需要做：

```
retrieveData2("/CatalogAjax/UpdateNavigation", productGroup, productType, itemsPerPage, pageIndex, filters, handleMenuData); 
```

由于我的路线，我最终将其更改为：

```
retrieveData2("/Catalog/Ajax/Update/Navigation", productGroup, productType, itemsPerPage, pageIndex, filters, handleMenuData); 
```

注意“控制器”这个词现在不是路径的一部分。感谢这方面的帮助。没有完全正确的答案，但所有答案都让我有足够的精力来度过难关。特别感谢 Ben Scheirman 今天的一些时间向我展示了 FireBug 并使用带有局部视图的 $.ajax！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T18:22:04.697

从您的服务器脚本返回的 json 可能无效或完全为空。发布生成 JSON 的服务器端脚本将有助于诊断这一点。

您在 Firefox 中遇到任何错误吗？您是否尝试过使用 Firebug 查看服务器响应？Firebug 对于调试这种东西是无价的。

# asp.net - 带有 jquery 和 blockui 的下拉列表

> ID：830953
> 
> 赞同：0
> 
> 时间：2009-05-06T18:18:00.493
> 
> 标签：asp.net, jquery, blockui

我几乎想通了，谁能告诉我为什么我的 $.unblock 永远不会执行？

```
$(document).ready(function () {
    $('#somedropdown').change(function () {
        $.blockUI({
            css: {
                border: 'none',
                padding: '15px',
                backgroundColor: '#000',
                '-webkit-border-radius': '10px',
                '-moz-border-radius': '10px',
                opacity: '.5',
                color: '#fff'
            }
        });

        var dropdownvalue = $('#somedropdown').val();
        var xaml1obj = document.getElementById("Xaml1");
        $.getScript(xaml1obj.Content.scriptableObject.InitializeSomething(dropdownvalue), function () { $.unblockUI(); });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-28T16:51:22.593

解决方案是从托管代码（C# 到 javascript）调用 unblock 方法。换句话说，当您进行选择时，您调用 block，做您的工作（即调用服务器等），然后在最后调用 unblock。对阻塞和解除阻塞的调用是由托管代码 (c#) 进行的，但实际工作是在 javascript 中执行的（因为这是 jQuery）

# wordpress - current_user_can() 函数参数是什么？

> ID：830955
> 
> 赞同：0
> 
> 时间：2009-05-06T18:18:24.267
> 
> 标签：wordpress

什么是`current_user_can()`函数参数？

这个函数用在wordpress脚本中，我知道一个参数叫`publish_posts`，我想知道其他参数。

有一个示例代码：

```
if( current_user_can( 'publish_posts' ) ) {
    require_once dirname( __FILE__ ) . '/post-form.php';
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T18:23:17.127

这应该是一个完整的列表：

[角色和能力 - 能力](http://codex.wordpress.org/Roles_and_Capabilities#Capabilities)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T18:24:58.073

[您可以在 WordPress角色和功能](http://codex.wordpress.org/Roles_and_Capabilities)页面上找到这些内容。

您可以使用任何角色或能力作为 current_user_can() 函数的参数。查看该页面右侧的内容 - 角色和功能（所有可用的）都已列出。

# php - PHP 的 ActiveScaffold

> ID：830957
> 
> 赞同：1
> 
> 时间：2009-05-06T18:18:38.417
> 
> 标签：php, ruby-on-rails, frameworks

Ruby on Rails 有很多插件可以扩展普通的脚手架：

*   [利普西管理](http://groups.google.com/group/lipsiadmin)
*   [流浪汉](http://hobocentral.net/)
*   [流线型](http://github.com/relevance/streamlined/tree/master)
*   [主动式脚手架](http://activescaffold.com/)

PHP社区有类似的东西吗？phpmyadmin 很棒，但它没有任何方法来控制数据的呈现。您始终会以其演示格式获取所有数据。这些 Rails 框架更加用户友好。

*编辑：我原来的问题不是很清楚。我不想比较 PHP 和 Rails。我也不是在寻找一个通用的通用框架。我正在寻找类似于我上面列出的四个软件的东西，但是用 PHP 编写的。我上面列出的管理软件会根据您的配置为您生成一个 crud 界面。配置包括您要显示哪些表格，您可以对表格进行哪些操作，以及哪些人可以看到这些信息。剩下的工作由软件完成，从编写 SQL 到处理请求再到生成接口。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T19:30:30.897

我会看看[Zend](http://www.zend.com/en/community/framework)、[CakePHP](http://cakephp.org/)、[CodeIgniter](http://codeigniter.com/)或[Kohana](http://kohanaphp.com/)。看看他们是否有可以做到这一点的插件或插件。

您列出的四个软件的问题在于它们扩展了 Rails。当您说“PHP”时，没有什么可以在相同的意义上扩展。（我真的怀疑您是否需要一个 PHP 模块来执行此操作。）您不需要 PHP 插件，您需要一个 [框架] 插件。

我或 Jonathan 列出的任何框架都类似于 Rails。Kohana 特别有一个名为[Auto Modeler](http://dev.kohanaphp.com/projects/automodeler)的插件模块，可以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T18:42:18.983

你看过梨吗：http: [//pear.php.net/](http://pear.php.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T19:12:52.983

在这里强调语言和框架之间的区别很重要。PHP 本身并不是一个带有模块的框架。PHP 是一种语言，类似于 C 或 Python。

有几个用 PHP 编写的网站框架。最受欢迎的可能是[Drupal](http://drupal.org/)，尽管我在过去一年中看过几个看起来同样功能的：

*   [CakePHP](http://cakephp.org/)
*   [代码点火器](http://codeigniter.com/)
*   [Joomla！](http://www.joomla.org/)
*   [Symfony](http://www.symfony-project.org/)
*   [曾德](http://www.zend.com/en/)

[PhpMyAdmin](http://www.phpmyadmin.net/home_page/index.php)不是模块或框架。它是一个用 PHP 编写的用于数据库管理的独立 Web 应用程序。它不会成为在网站上展示数据的任何策略的组成部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T21:56:55.863

Symfony 可能是一个“通用框架”，但它有脚手架，如果您的需求很简单，您可以将其用作完整的应用程序。您在 YML 配置文件中定义模型，然后可以基于此模型生成 CRUD 模块。代码生成也可以通过编辑其他 YML 配置文件来定制。无需编写任何 PHP 代码。但是如果需要，您可以选择使用 PHP 和完整的框架来扩展脚手架。

请参阅有关代码生成的 Symfony[文档](http://www.symfony-project.org/book/1_2/14-Generators#Scaffolding)。

[一个名为 ATK 的框架](http://www.atk-framework.com/)还声称具有良好的代码：功能比（“10 行代码中的应用程序”）。

# apache-flex - Flash/Flex/AIR 帮助系统

> ID：830961
> 
> 赞同：0
> 
> 时间：2009-05-06T18:20:36.650
> 
> 标签：apache-flex, actionscript-3, documentation, air, help-system

我正在用 Flex/AIR 构建一个桌面应用程序，我的 TODO 列表中的当前项目之一是开发一个帮助系统。

在整个 GUI 中，有一些小 (?) 按钮。当用户单击其中一个按钮时，会出现一个 HelpPanel，显示文档中的一些相关信息。

很简单。

但我真的很想建立一个成熟的帮助系统，就像通常部署在桌面应用程序中的系统一样：分层目录、搜索关键字的能力、帮助主题之间的超链接等。

此外，由于我的应用程序将为插件作者提供 API，我还想为第三方插件提供挂钩，以将他们自己的文档与核心帮助系统集成。

使用我的应用程序，用户可能并不总是在线，因此所有帮助数据都必须在本地可用（尽管如果可以从服务器定期同步新的帮助内容会非常酷）。

从头开始构建这种帮助系统会相对简单，但实际开发应用程序的核心功能也需要很多时间，所以我宁愿使用现成的解决方案。

我做了一些谷歌搜索，但找不到任何符合要求的东西。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T18:46:00.957

您可能会考虑使用 AIR html 控件来显示绑定到应用程序链接的 html 帮助文件，并使用任意数量的可用工具构建 HTML 帮助屏幕。

如果您使用传统的 Web 服务器目录和文件结构来设计它，那么有很多工具可以用来维护同步文件。

* * *

[此链接](http://ffeathers.wordpress.com/2008/05/15/aodc-adobe-air-help/)引用了一个基于 AIR 的帮助系统，以及一个可能的 RoboHelp 界面。

[这是](http://www.adobe.com/products/robohelp/robohelp-packager-for-air/)RoboHelp“打包程序”的链接。

[可能感兴趣的](http://www.leximation.com/airhelp/)另一页。

# ruby-on-rails - 防止 Ruby on Rails 通知守护程序通过电子邮件多次发送相同的信息

> ID：830962
> 
> 赞同：0
> 
> 时间：2009-05-06T18:20:46.587
> 
> 标签：ruby-on-rails

我正在编写的房地产应用程序的一部分将允许用户订阅一个位置，如果该位置有新的房产可用，那么用户将收到一封电子邮件，通知他们这一点。

我计划每隔几个小时运行一次后台进程来处理匹配。

现在我有一个名为 location 的模型，计划添加另一个名为 notification 的模型。位置模型有纬度和经度，通知模型也有。

就像是：

```
create_table "locations", :force => true do |t|
    t.decimal  "lat",            :precision => 15, :scale => 10
    t.decimal  "lng",            :precision => 15, :scale => 10
end

create_table "notifications", :force => true do |t|
    t.decimal  "lat",            :precision => 15, :scale => 10
    t.decimal  "lng",            :precision => 15, :scale => 10
    t.string   "user_name"
    t.string   "user_email"
end 
```

显而易见的事情是遍历位置列表，如果一个与通知中的位置列表匹配，则向通知模型中定义的 user_email 发送邮件。

我试图避免的是多次向同一个用户发送关于某个位置的相同电子邮件。该过程每隔几个小时运行一次。

我想在通知模型中添加另一个名为“has_been_mailed”的字段，一旦发送邮件，该字段将设置为 true，但这意味着未来不会添加其他位置的任何更新。

有没有人对实现这一点的最佳方法有任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T18:26:32.407

在不改变模型的情况下，您应该在两个表中都有`created_at`时间戳字段。`updated_at`

这样，您可以仅查询自上次运行邮件脚本以来已更新的位置和通知。

# windows-vista - Vista中的权限

> ID：830969
> 
> 赞同：1
> 
> 时间：2009-05-06T18:22:07.067
> 
> 标签：windows-vista, windows-installer, file-permissions

我正在调用：config.Save(ConfigurationSaveMode.Modified); 这个调用在 Windows XP 中运行良好。

当我在 Vista 中运行它时，我得到：

> 异常：System.Reflection.TargetInvocationException：调用的目标已引发异常。---> System.Configuration.ConfigurationErrorsException：加载配置文件时出错：访问路径“C:\Windows\system32\2lqfj0cv.tmp”被拒绝。(C:\Windows\system32\MsiExec.config) ---> System.UnauthorizedAccessException: 对路径“C:\Windows\system32\2lqfj0cv.tmp”的访问被拒绝。

现在我猜测这里的相关事实是我正在从 Windows Installer MSI 运行上面的调用（调用托管 DLL）。我想我需要做些什么来提高用户权限？我真的不太了解 Vista 权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T18:39:27.977

尝试以管理员身份运行。您的意思是要编辑 MSIEXEC.config 吗？

[http://msdn.microsoft.com/en-us/library/bb756929.aspx](http://msdn.microsoft.com/en-us/library/bb756929.aspx)

# windows - Windows 大师能否在 Linux 开发平台上高效工作？

> ID：830974
> 
> 赞同：3
> 
> 时间：2009-05-06T18:23:04.910
> 
> 标签：windows, linux, development-environment

假设我找到了一位拥有 10 年以上经验、出色的 C/C++ 技能以及出色的参考资料的 Windows 开发人员，他是一名[能够完成工作](http://www.joelonsoftware.com/articles/GuerrillaInterviewing3.html)的多才多艺的程序员。我可以聘请他在 Linux 平台上进行开发并期望他在几周内高效地进行生产吗？还是从开发环境和日常工作中使用的所有常用工具来说，门槛太高了？这个人要克服的主要障碍是什么？

请注意，这是一个普遍问题，我基本上假设典型的 Windows 和 Linux 环境（Visual Studio 与 Eclipse 或 EMACS，添加/删除程序与 apt-get，对话框向导与命令行等）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T18:28:07.740

这真的取决于很多因素。

一个真正优秀的开发人员将能够很快地学习他们需要知道的一切。主要语言相同。

但是，根据您在 Linux 上开发的内容，可能需要克服一些主要的学习曲线。

几个例子：

*   整个操作系统的 API 是不同的。
*   如果您使用任何大型库，则该库将有一个学习曲线。
*   如果您使用的是更传统的 unix 构建系统，那么（可能）将有一个学习曲线来使用这些系统与在 Visual Studio 等 IDE 中工作的正常“Windows 方式”。

我认为期待有一个完美的开发。在 2 周内可能有点雄心勃勃 - 但如果他们做得很好，他们会很快变得富有成效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T18:33:13.203

不久前我就是这样的开发人员（但我确实有一些 *nix 经验）。

就我个人而言，我发现最初的过渡非常容易。有足够的工具可以满足您至少要进行编码所需的一切。第二阶段非常困难 - 为我正在做的事情找到正确的*工具*，以及如何使用这些工具。我一个人被扔进了这个特定的项目，所以除了谷歌我没有人可以问，而且学习键盘快捷键以及新的 IDE 和编译器开关之类的东西确实需要很长时间。

当时我觉得，如果我有人问问题，整个事情会花费更少的时间。

这么长的回答简短：我认为任何优秀的程序员都不会在简单的事情上遇到麻烦，但要确保经常以友好的方式告诉新开发人员，其他人都在那里帮助回答问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-06T18:29:49.387

我曾多次尝试切换到 Linux/Unix。我基本上可以找到解决方法并进行开发[如果我有 Mono]。现在，我可以在短时间内对几乎任何盒子的基本用户要求同样高效，但如果你希望我能够弄清楚所有安装、配置和所有其他东西系统维护那么短的时间，我敢说我会在两个星期前把头发全部拔掉。总是有人会要求我做一些我在 Linux/Unix 中不知道做的事情，最终会切换回 Windows，因为我可以在短时间内轻松完成。

我会说如果他们有其他人要问问题，当然，这是小菜一碟。如果你期望他们能够作为一个自我启动者开始运行，那是值得怀疑的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-06T18:30:40.010

伟大的开发者在任何平台上都会很棒。这可能需要他一点时间，但如果他是“把事情做好”的人，他应该能够跟上进度并为项目做出积极的贡献。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-06T18:39:59.677

我认为是的，但您可能需要耐心等待更长的启动时间。一个想法：给他一个 Windows 机器，里面运行一个 Linux 虚拟机（反之亦然），所以如果他遇到了在 Linux 中无法快速完成的事情，他可以切换到 Windows 来完成该特定任务，直到他成为更精通Linux方面。这可能会减轻一些 Windows 用户在切换到 Linux 时的一些“分离焦虑”。把它想象成“带有训练轮的 Linux”。

好的程序员就是好的程序员，而且很难找到。如果你愿意，你可以让它工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-06T18:35:50.700

好吧，如果他真的是一位大师，我会说是的。许多研究表明，一个优秀的程序员每天所产生的有用工作量是普通程序员的 10 倍以上。真正的大师可能会产生 100 倍的产量。

因此，如果要在 WIndows 专家和普通 Linux 人员之间进行选择，我会选择任何一天的专家。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-06T18:43:22.100

为什么你不能聘请一位 Linux 大师呢？

有趣的是，有多少人来宣布“是的，他可以”。

为什么没有人问他是否愿意？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-06T19:13:43.667

毫无疑问，Windows 大师（如果这是真的）可以处理 Linux 的东西。

你唯一应该问自己的是你有多少时间 4 这个项目，因为你不能指望从未在 Linux 中开发过的人会像在一段时间内这样做的其他人一样快。

如果你有能力让这个男人有时间采取跑步姿势，你应该给他一个机会。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-06T19:36:11.630

我认为这取决于。如果你拿走一个人的 Visual Studio，你就会把他的工作效率减半。如果您使用命令行编译器在 emacs 中做所有事情，那么您可能只是减少了他另一半的生产力。现在，随着时间的推移，其中一些会随着他变得更加熟悉而逐渐增加，但您几乎可以打赌，如果没有 IDE，这位大师在 Linux 上的工作效率将永远不会如此高。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-06T19:30:53.673

如果我还记得回到青铜时代，当我在 Unix 上学习编程时，我使用的技术是尽可能地一次学习一个东西。在我对 C 已经相当熟悉之前，我没有学习 vi。然后我学习了 make，然后学习了 Unix API。最终，它到了当我需要知道它时，我只是在学习我需要知道的东西，但它花了几个月的时间。

至少你说的那个人精通C和C++。如果他不想处理 vi 或 Emacs 并制作，请给他买一个不错的 IDE。那么最大的问题是正在使用的 API；他们可能需要一些时间来内化。并确保有人来回答简单的小问题，并在一段时间内做一些较小但可能令人困惑的事情。

# actionscript-3 - 在 TabNavigator 中隐藏选项卡的最佳方法是什么？

> ID：830977
> 
> 赞同：9
> 
> 时间：2009-05-06T18:23:34.690
> 
> 标签：actionscript-3, apache-flex, flex3

我想有条件地隐藏 TabNavigator 中的选项卡。似乎设置 visible 无法正常工作（可能是因为 TabNavigator 隐藏当前未选择的选项卡的方式）。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-06T23:20:37.410

您可以通过使用 TabNavigator 的 getTabAt() 方法来执行此操作，该方法返回构成可视选项卡的 Button。然后，您可以设置该按钮的可见属性。使用绑定进行此设置有点棘手，但它是可行的。

您也可以考虑只禁用选项卡，您可以通过在相应的 TabNavigator 子项上设置启用来做到这一点（对于该子项可见不起作用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T18:28:30.203

你说的隐藏是什么意思？如果您实际上的意思是删除，那么只需获取绑定到 TabNavigator 中数据的数组，然后从中删除适用的元素。

如果您只想暂时删除它们，请创建一个您自己的组件，该组件封装 TabNavigator 并具有一组已删除选项卡和一组实际选项卡。然后按照您认为合适的方式处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T20:34:40.057

您可能想查看[flexlib](http://code.google.com/p/flexlib/)项目。他们有一个名为 SuperTabNavigator 的组件，它为基本的 Flex TabNavigator 添加了许多功能，包括隐藏选项卡（我认为）。

但是，如果您确实必须创建自己的组件，那就有点棘手了。要知道的是，“选项卡”实际上是特殊样式的按钮，包含在 TabBar 组件中（TabBar 然后包含在 TabNavigator 中）。然后，您必须做的是子类 TabNavigator 并在您的视图上拥有一些属性（即添加到 TabNavigator 的画布等），这些属性绑定到 TabBar 按钮的可见和 includeInLayout 属性。

本质上，您将拥有如下内容：

```
BindingUtils.bindProperty( tabButton, "visible", view, "someProperty" );
BindingUtils.bindProperty( tabButton, "includeInLayout", view, "someProperty" ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T22:25:29.073

我不知道 TabNavigator，但是在其他容器中，您可以将`includeInLayout`属性设置为`false`，它将被忽略。您可能仍需要将其与`visible`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-05-17T14:03:31.727

```
var secondTab = tabNavigator.removeChildAt(0); 
```

# netbeans - 有没有办法将 NetBeans DIFF 工具用作 TortiseSVN 或其他编辑器的外部差异编辑器？

> ID：830978
> 
> 赞同：3
> 
> 时间：2009-05-06T18:24:05.267
> 
> 标签：netbeans, tortoisesvn, diff

...或者也许是一种通过中间人应用程序启动 NetBeans 并在 DIFF 编辑器中打开 BASE 和 LOCAL 文件的方法...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-13T11:22:26.787

如果是您喜欢的 netbeans diff 工具的风格，请查看免费的[Perforce Merge Tool。](http://www.perforce.com/perforce/products/merge.html)

[![P4合并](https://i.stack.imgur.com/bx80F.gif)](https://i.stack.imgur.com/bx80F.gif)
[（来源：[perforce.com](http://www.perforce.com/images/products/p4merge/main.gif)）]

在 TortoiseSVN 设置中，将外部差异查看器设置为：

```
C:\Program Files\Perforce\P4Merge.exe -dw %base %mine 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T18:39:11.393

您可以在设置中配置 TortoiseSVN 使用的差异工具（外部程序 -> 差异查看器）。

[TortoiseSVN 帮助文件](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-settings.html#tsvn-dug-settings-progs)解释了可以通过命令行传递给外部差异工具的不同参数。

# c++ - VC2008 编译器错误打开 sbr 文件 (C2418 C1903 C2471)

> ID：830980
> 
> 赞同：15
> 
> 时间：2009-05-06T18:24:50.773
> 
> 标签：c++, visual-studio-2008

编辑：有关修补程序，请参阅下面的答案。

原始问题：

在为我们的船编程冒险进行设置时，我必须设置源代码控制并修复项目文件以供团队使用。（该项目以前只由一个在设置项目包括等方面采取捷径的人从事）

我正在修复那些 SLN 和 Proj 文件。当尝试在外部 USB 驱动器上进行构建时（我没有在主硬盘驱动器上尝试过），我遇到了奇怪的错误（很多错误用于各种文件）：

> 致命错误 C1083：无法打开编译器生成的文件：'.\Debug\.sbr'：权限被拒绝

这些文件在 vcproj 文件中被引用，相对路径用双引号括起来：

> 相对路径=“..\..\源\.cpp”

我在 IDE 中的 sln 文件中或者如果我使用 sln 文件调用 msbuild 时得到相同的错误形式。

这些文件是一些 sln 文件（项目）的“共享”。

最初创建 SLN 文件的人并不以配置 MSDev 或使事情为团队工作而闻名。

这是引用源文件的方式的问题吗？关于如何解决这些问题的任何建议？

此 URL 似乎没有有用的信息：

[MSDN 上的致命错误 C1083](http://msdn.microsoft.com/en-us/library/et4zwx34.aspx)

注意 - proj 文件中有/仍然有硬编码路径，但我看不到这些文件。它们主要用于 include 和 lib 目录。我想我把它们都删了。

我也收到这些错误：

> ..\..\Source\.cpp : 错误 C2471: 无法更新程序数据库 '\debug\vc90.pdb'
> 
> ..\..\Source\.cpp(336)：致命错误 C1903：无法从先前的错误中恢复；停止编译
> 
> ..\..\Source\.cpp(336)：错误 C2418：无法删除浏览器文件：.\Debug\.sbr

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-07-25T17:35:14.793

**标题：当您尝试在 Visual C++ 中构建解决方案时，您可能会收到“PRJ0008”或“C2471”或“C1083”或“D8022”或“LNK1103”或类似的错误消息**

**症状：**

*   D8022：无法打开“RSP00000215921192.rsp”
*   PRJ0008：无法删除文件“vc90.idb”。
*   C1083 : 无法打开程序数据库文件 'vc90.pdb'
*   C2471：无法更新程序数据库“vc90.pdb”
*   LNK1103：调试信息损坏。

**原因：**

当以下所有条件都为真时，会出现此问题：

1.  您有一个包含多个项目的解决方案。
2.  两个或多个项目不相互依赖。
3.  您启用了并行构建。（工具 -> 选项：项目和解决方案，构建和运行：“最大并行项目构建数”设置为大于 1 的值）
4.  您正在构建具有多个 CPU（内核）的系统。
5.  两个或多个非依赖项目被配置为使用相同的中间和/或输出目录。
6.  mspdbsrv.exe 中的特定竞争条件仍未更正。

**解析度：**

要解决此问题，请执行以下一项或多项操作：

*   重新配置非依赖项目以指定彼此不同的中间和输出目录，例如输出目录 = "$(SolutionDir)$(ProjectName)\$(ConfigurationName)"，中间目录 = "$(OutDir)"。
*   调整解决方案的项目依赖项（Project -> Project Dependencies...），使每个依赖项都依赖于另一个。
*   禁用并行构建。
*   将“/onecpu”引导选项添加到您的 boot.ini 文件中。
*   更改您的 BIOS 设置以启用/仅使用一个 CPU。
*   向 Microsoft 技术支持提交问题报告，并不断向他们提出问题，直到他们最终修复 mspdbsrv。

**地位：**

问题是用户项目配置错误以及 Microsoft 的“mspdbsrv.exe”实用程序中的竞争条件的组合，该实用程序无法正确处理多个线程同时为同一文件调用它，从而导致文件的 HANDLE保持开放。

此外，Visual Studio 本身和/或其构建系统（VCBUILD 和/或 MSBUILD）（或所有三个！）应该足够智能，以检测并提醒用户此类用户错误，以便采取纠正措施。

这个问题已经存在了很长时间。

**适用于：**

*   微软视觉 C++ 2005
*   微软视觉 C++ 2008
*   其他的？

**郑重提交：**

“鱼”（大卫·B·特劳特）
fish@infidels.org

**ps：**

别客气。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T19:28:37.657

嗯。

也许：

[http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/0ceac3c6-62f6-4fdf-82e1-d41e1b4fcd20/](http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/0ceac3c6-62f6-4fdf-82e1-d41e1b4fcd20/)

有一个来自 MS 的修补程序

[http://code.msdn.microsoft.com/KB946040](http://code.msdn.microsoft.com/KB946040)

[http://support.microsoft.com/kb/946040](http://support.microsoft.com/kb/946040)

那可能是我的问题。我想它可能只在我拥有的一台机器上。

编辑：

我下载并运行了修补程序安装程序。它似乎已经修复了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-10-06T02:17:19.567

当我从磁盘物理删除一个文件，但将它留在 VS 中时，我得到了同样的错误。在 VS2005 中它会给出一个更好的结果：未找到致命错误文件。我认为这是VS2008中的一个错误。上面提到的修补程序对我没有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-02-15T07:47:58.163

就我而言，是我的病毒包（趋势科技）导致了所有问题。我将我的开发文件夹添加到忽略/白名单以解决问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T18:30:33.053

删除您的调试文件夹并重新构建您的项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T18:55:33.523

偶尔我的 Visual Studio 会突然做出这样的决定。我发现切换到发布，进行完全重建，然后切换回调试可能会有所帮助。

# vb.net - 与 .NET 中的字符串

> ID：830984
> 
> 赞同：1
> 
> 时间：2009-05-06T18:25:27.010
> 
> 标签：vb.net, string, types

我使用 developerfusion.com 将我的 C# 代码片段转换为 VB .NET，我注意到 String 类型被转换为 [String]。

我尝试了 Google 和 Searching SO 无济于事，所以我会问社区 [String] 和 String 之间是否有区别？如果是这样，有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-06T18:27:37.287

在 VB.Net 中，围绕单词的 [] 用于允许将关键字用作普通标识符。所以使用 [String] 意味着我想用字符串而不是 VB 关键字字符串来识别某些东西。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-06T18:36:23.007

转换器可能这样做是因为它无法识别字符串类型并认为它是您的代码中定义的类。

您可以将括号括在标识符周围以使用关键字。您可以创建自己的`[String]`类，该类与内置`String`类不同，但这当然很容易让人感到困惑......

```
Public Class [String]
   Public Value As Integer
End Class

Dim s As New [String]
s.Value = 42 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T18:27:06.960

方括号通常表示使用保留关键字的变量名称。您是否将字符串变量命名为 String？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-07T00:22:56.513

可以在 VB.NET 中使用括号以允许将 VB.NET 关键字用作用户定义的名称。例如，您可以创建一个名为 Integer 的类，即使 VB.NET 中已经存在 Integer 关键字：

```
Public Class [Integer]
End Class 
```

希望这可以澄清！

# python - 使用 Beautiful Soup，我如何遍历所有嵌入的文本？

> ID：830997
> 
> 赞同：6
> 
> 时间：2009-05-06T18:26:52.547
> 
> 标签：python, beautifulsoup

假设我想从 HTML 中删除元音：

```
<a href="foo">Hello there!</a>Hi! 
```

变成

```
<a href="foo">Hll thr!</a>H! 
```

我想这是美丽汤的工作。如何选择标签之间的文本并像这样对其进行操作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-06T20:18:58.503

假设变量`test_html`具有以下 html 内容：

```
<html>
<head><title>Test title</title></head>
<body>
<p>Some paragraph</p>
Useless Text
<a href="http://stackoverflow.com">Some link</a>not a link
<a href="http://python.org">Another link</a>
</body></html> 
```

只需这样做：

```
from BeautifulSoup import BeautifulSoup

test_html = load_html_from_above()
soup = BeautifulSoup(test_html)

for t in soup.findAll(text=True):
    text = unicode(t)
    for vowel in u'aeiou':
        text = text.replace(vowel, u'') 
    t.replaceWith(text)

print soup 
```

打印：

```
<html>
<head><title>Tst ttl</title></head>
<body>
<p>Sm prgrph</p>
Uslss Txt
<a href="http://stackoverflow.com">Sm lnk</a>nt  lnk
<a href="http://python.org">Anthr lnk</a>
</body></html> 
```

请注意，标签和属性保持不变。

# apache-flex - Flex：X-out 标签？

> ID：830999
> 
> 赞同：1
> 
> 时间：2009-05-06T18:27:07.430
> 
> 标签：apache-flex

我正在尝试制作一个上面有 X 的标签。就像这样，我可以说这个价格比价格高出 X。我想让它成为一个组件，因为我将不止一次地使用它。我希望 X 接近与文本相同的大小，这样它就不是小文本上的大 X 或大文本上的小 X。

这是我尝试过的代码，它什么也没做：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Label xmlns:mx="http://www.adobe.com/2006/mxml">

    <mx:Script>
        <![CDATA[

            override public function set text(value:String):void
            {
                super.text = value;

                var g:Graphics = this.graphics;
                g.clear();
                g.lineStyle(3,0xFF0000);
                g.lineTo(this.width,this.height);
                g.moveTo(0,this.height);
                g.lineTo(this.width,0);
            }       

        ]]>
    </mx:Script>

</mx:Label> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T18:31:57.230

看到[这个](http://www.cubicleman.com/2007/05/10/strike-through-text-component/)帖子。它提供了一个组件来为你做这件事。

目前本机不支持它。``*********