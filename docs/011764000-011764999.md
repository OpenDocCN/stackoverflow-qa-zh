# StackOverflow 问答 11764000-11764999

# git - 更改 Git 存储库的根目录

> ID：11764003
> 
> 赞同：5
> 
> 时间：2012-08-01T16:56:14.770
> 
> 标签：git, repository

我有以下源结构：

```
/dir1
    file1
    file2
    file3 
```

`dir1`不需要，因为存储库本身可以像一个文件夹，所以我希望我的 git 存储库看起来像这样：

```
file1
file2
file3 
```

我应该怎么做才能实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T17:00:43.537

**免责声明：这将重写历史并成为任何已经克隆了您的存储库的人的 PITA。你不应该在已发表的历史上这样做。**

也就是说，您应该能够使用[`filter-branch`](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)Git 的命令重写所有树。在使用它之前一定要了解所有的含义（请阅读手册页；有备份）。

```
git filter-branch \
  --subdirectory-filter dir1 \
  --tag-name-filter cat \
  -- --all 
```

注意。此命令还将保留您的移植物并替换 refs。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-02-02T11:34:06.307

您可以将 .git 移动到子目录中（不要忘记您的 .gitignore）。然后运行 ​​git init ：

重要提示：在移动之前进行最后一次提交（我会解释它......）

```
mv .git ./dir1/.
git init .
git add .
git commit 
```

在移动之前进行最后一次提交很重要：git 使用文件的哈希来识别它们。未更改的文件被视为“重命名”。如果您在移动之前有未提交的文件，它将为每个修改过的文件记录几个“删除”“添加”，您将丢失这些文件的历史记录。

# mysql - 错误代码：2008 MySQL 客户端内存不足

> ID：11764004
> 
> 赞同：1
> 
> 时间：2012-08-01T16:56:15.350
> 
> 标签：mysql

我有一个很大的数据库。当我尝试使用 MySQL 工作台检索表时，出现以下错误：

```
Error code: 2008 MySQL client ran out of memory 
```

MySQL 提供的一种解决方案是使用`--quick`选项，但我使用工作台。我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:38:33.873

您使用的内存比提供给您的更多...尝试将您的内存分成多个块。我在 python 连接中也遇到了这个问题，所以我使用了生成器并将我的查询分成了多个块......这不会占用你的记忆。

尝试使用限制和偏移。

# c# - 如何在 C# 中更改表单的颜色和大小？

> ID：11764008
> 
> 赞同：-7
> 
> 时间：2012-08-01T16:56:24.850
> 
> 标签：c#, winforms

如何在 C# 中更改表单的颜色和大小？

```
 // something like
  Form1.BackColor = Color.Red;  
  From1.size = 1600,900; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T16:58:18.220

```
this.BackColor = Color.Red;
this.Size = new Size(1600, 900); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:59:35.797

如果您正在创建表单的实例：

```
Form1 form = new Form1();

form.BackColor = Color.Red;
form.Size = new Size(1600,900);

form.Show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T17:01:29.730

```
 Form1.BackColor = Color.Red;
 Form1.Size = New System.Drawing.Size(1600, 900);
 Form1.Invalidate(); 
```

无效将导致表单重绘自身

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T16:59:10.263

```
this.BackColor = System.Drawing.Color.Red
this.Size = new Size(100, 100) 
```

# python - Python for 循环一次访问两个元素

> ID：11764010
> 
> 赞同：11
> 
> 时间：2012-08-01T16:56:29.663
> 
> 标签：python, for-loop

我在字典的 value 部分中添加了一个项目的名称和属性值：

```
value+=child.get('name') + '\t' + child.text + '\t' 
```

每段文本都由一个制表符分隔。因此，当我稍后处理这个值字符串时，我在选项卡上拆分并有一个 for 循环来迭代列表。

如何访问 for 循环中的名称和值。至于每个属性，我想一次性获取名称和值并将其写入文件。目前该列表如下所示：

[a,b,a,b,a,b,a,b]

对于每个 a,b 我想写：

'<' 标签名=a '>' b '<' /tag '>'

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-01T17:02:04.903

您可以使用步长 2 迭代列表，并在每次迭代中获取名称和标记...

```
for i in range(0,len(list1),2):
    name = list1[i]
    tag = list1[i+1]
    print '<tag name="%s">%s</tag>' % (name, tag) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T17:02:20.900

编辑：*如果*您的键是唯一的，并且顺序无关紧要，那么...

我认为您应该[将列表转换为字典](https://stackoverflow.com/questions/4576115/python-list-to-dictionary)，然后遍历字典的键：

```
# assuming you converted your list to a dictionary called values

for k in values:
   print '<tag name="%s">%s</tag>' % (k, values[k]) 
```

* * *

编辑：如果您不需要字典来打印结果，那么发布的另一个答案可能是更好的方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T17:07:41.223

首先，使用 string += string2 是一个坏主意，因为每次它都会复制到一个新字符串。

```
value+=child.get('name') + '\t' + child.text + '\t' 
```

应该

```
values = ((child.get('name'),child.text) for child in children) 
```

然后当您打印时，只需执行

```
for name,text in values:
    print '<tag name="{name}">{text}</tag>'.format(name=name,text=text) 
```

如果出于某种原因，您真的想要选项卡，那么您将不得不将值构造函数更改为列表（来自生成器）并执行以下操作：

```
''.join((name+'\t'+value+'\t' for name,value in values))[:-1] 
```

# jquery - 从 Python 解析 jQuery 表单数据

> ID：11764012
> 
> 赞同：1
> 
> 时间：2012-08-01T16:56:32.897
> 
> 标签：jquery, python, ajax, bottle, form-data

我的应用程序有一个 python (bottle.py) 后端和一个 html/jquery 前端。我正在使用表单中的“输入”获取文本文件，并在后台使用 python 端的事件处理程序将其上传。然后事件处理程序解析文件（`file.readline()`重复调用）并以 json 形式返回一些结果。

一切顺利，直到我需要在 python 中解析文件。

这是我的javascript：

```
function UploadFile() {
    var file = $('#data')[0].files[0];
    var formData = new FormData();
    formData.append("file", file);
    $.ajax({
        url: 'plates',
        type: 'POST',
        data: formData,
        cache: false,
        contentType: false,
        processData: false,
        success: function(data){
            ...
        }
    });
} 
```

当我在 python 端收到 POST 请求时，我只能使用`request.body.read().decode()`. 如果我正在尝试`request.files.data.file.read()`，我会收到“断管”错误：

```
socket.error: [Errno 32] Broken pipe 
```

我可以用 获取文本`request.body.read().decode()`，将它们保存到文件中，然后加载并解析。但是我想避免创建不需要创建的文件，并且想在内存中做所有事情。

为什么`request.body.read().decode()`有效而`request.files.data.file.read()`无效？有没有办法用我现有的函数解析文件而不将其写入磁盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:37:09.883

我建议确保您的请求使用内容类型“multipart/form-data”提交。默认值为“application/x-www-form-urlencoded”，这可能不是瓶子在尝试解析文件时所期望的。

如果您想了解有关在 HTTP 中处理多部分表单（包括文件）的更多信息，[RFC 2388是一个很好的（尽管很厚）信息来源](https://www.rfc-editor.org/rfc/rfc2388)

另外，这里有一个[关于使用 jQuery 上传文件的好讨论](https://stackoverflow.com/questions/5392344/sending-multipart-formdata-with-jquery-ajax)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:50:49.827

我完全不知道为什么这两个调用不同（我使用 django），但是在不写入磁盘的情况下解析它的方式是获取一个新的 BytesIO 实例，写入该实例，然后使用它代替文件句柄。只是部分解决方案。

如果只是文本，请考虑改用 StringIO

# ruby - 使用 Bunny gem 处理来自队列的消息时优雅关闭

> ID：11764018
> 
> 赞同：3
> 
> 时间：2012-08-01T16:57:07.160
> 
> 标签：ruby, amqp

我正在使用 Bunny gem 通过 AMQP 消费消息。我的应用程序订阅了队列中的消息，这是一个永无止境的阻塞调用（通过订阅块）。我希望它在进程中断时正常关闭（例如终端中的 ctrl+c）。正确的方法是什么？如果它正在处理一条消息，我希望它处理当前消息，然后跳出块。

代码示例：

```
trap("INT") do 
  puts "Stopping now"
  Indexer.client.stop # ???
end

module Indexer
  extend self

  def run    
    client.queue('indexer.index').subscribe do |msg|
      # omitted
    end
  end

  def client
    @client ||= Bunny.new.tap(&:start)
  end

end

Indexer.run # runs forever 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-06T15:13:35.910

我知道这个问题已经有 2 年了，你现在可能已经想通了。也就是说，我处理这个问题的方式是写一个“我应该退出吗？” 在您的订阅循环结束时检查，然后让您的 SIGINT 陷阱切换变量。Bunny 本身非常擅长清理所有 AMQP 连接的东西，所以你真的只需要担心自己在退出时的问题。

# jquery - 获取 DIV 中的所有内容，包括输入选择器的标记值

> ID：11764022
> 
> 赞同：0
> 
> 时间：2012-08-01T16:57:21.713
> 
> 标签：jquery

我正在容器 div 中加载一个 html 表单。此 html 是从数据库中检索的模板。然后用户填写表格（或表格的一部分）。

用户完成后，他们会选择一个调用函数的按钮。

```
function submitForm() {
    var workflowID = $('#workFlowID').val();
    var formID = $('#formID').val();
    var uploadedFiles = $('#uploadedFiles').val();
    var htm = $('#formContent').html();
    console.log(htm);
    alert(workflowID + ", " + formID + ", " + uploadedFiles + ", : " + htm);
} 
```

问题是我得到了忠实复制的表单，但输入字段不包含在生成的“htm”中，我需要能够复制 html，因为它已被填写以保存到新表中。我错过了什么，或者这甚至可能吗？

被要求提供更多信息；这是一个 html 可能有 10 个输入区域的示例。一旦填写了适当的输入，表格就会被保存，以供其他人查看并添加。然而，当填写表格时，上面的参考代码会拉回 html 减去用户输入的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:21:02.770

我不确定如何像其他人一样评论您的帖子，但您使用服务器端的什么语言来促进这一点？是 C#、PHP 还是...

编辑：

我想我以前也遇到过类似的问题。我所做的是对整个页面（所有 html 元素和所有内容）的 AJAX 请求。您将在变量中获取此数据。您必须通过此变量解析您要查找的信息。例如，如果您想要介于两者之间的所有内容，则可以进行一些字符串解析以将其分开。

我并不是说这是一件好事，但如果我理解正确的话，它可能是一个可行的解决方案。

您也可以尝试 [http://api.jquery.com/html/](http://api.jquery.com/html/) 并在表单或正文的 ID 上使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:26:34.600

因此，您在名为“formContent”的表单元素中有一个 div，并且您想提取该 div 中所有输入的值（可能是 html），但在提交时输入的数量是未知的？它们都是文本区域吗？

尝试使用 jQuery 查找所有适当的区域，但我不确定如何处理这些值。

```
var value = "";
$("#formContent").children("textarea").each(function(){value += $(this).val()}); 
```

**编辑：与 OP 讨论后添加更多内容**

所以我会添加一个至少包含两列的数据库表：ElementID 和 Value。创建一个检查 ElementID 是否存在的 Web 服务。如果存在，则更新值，否则，插入。

构建时使用此数据填充表单的值。这可能是服务器端的挑战，您可能必须依靠客户端上的多个调用来抓取和填充。

最后，在用户点击提交后，使用我上面展示的类似方法来查找所有输入并对 web 服务执行 ajax 调用，提交元素的 id 及其值。像这样的东西：

```
$("#formContent").find("input", "select", "textarea").each(
    function()
    {
        var elementId = $(this).attr("id");
        var value = $(this).val();
        //perform ajax call to webservice with elementId and value parameters
    }
); 
```

请记住，每个 elementId 都必须是唯一的，这可能会导致多个 HTTP 请求。否则，您可能希望一次将一些可解析的数据发送到 Web 服务以获取所有数据并相应地更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T18:21:46.367

我发现这个概念的答案是遍历每个标签并设置属性。

```
$("input").each(function () {
    if ($(this).is(':text')) { $(this).attr("value", $(this).val()); }
    else if ($(this).is(':checkbox')) {
        if ($(this).is(':checked')) {
            $(this).attr('checked', 'checked');
        }
        else {
            $(this).removeAttr('checked');

        }
        if ($(this).is("textarea")) {
                $(this).text($(this).val());
        }
        if ($(this).is(':radio')) {
            if ($(this).is(':checked')) {
                $(this).attr('checked', 'checked');
            }
            else {
                $(this).removeAttr('checked');

            }

        } 
```

然后我可以回去做我开始尝试做的事情：

```
 var htm = $('#formContent').html(); 
```

这将包括在 html 中输入的值。

感谢所有回复并帮助我指出正确的方向。

# c - 如何知道内核代码是否是原子的？

> ID：11764030
> 
> 赞同：4
> 
> 时间：2012-08-01T16:57:59.090
> 
> 标签：c, linux-kernel, atomic

我正在编写一个内核模块，我在其中实现了一些将从我修改过的另一个模块中使用的功能。测试时系统崩溃。我收到“原子时调度”错误。

经过调试，我意识到`atomic_set()`调用a时系统崩溃了。这意味着我正在从非原子函数调用原子函数？在这种情况下我不能使用 atomic_set() 吗？我应该改用什么？

另外，正如我所说，我修改了一些原始内核文件来调用我的函数。我怎么知道我在哪里工作是不是原子代码？

**编辑：添加实际代码**

在[net/netfilter/ipvs/ip_vs_core.c](http://git.kernel.org/?p=linux/kernel/git/stable/linux-stable.git;a=blob;f=net/netfilter/ipvs/ip_vs_core.c;h=a54b018c6eea72fc122aa47c6f66de76676c1fa1;hb=HEAD)第 451 行，我调用我的函数：

```
my_callback(svc, skb); 
```

然后，在另一个文件中，我有：

```
int my_callback(struct ip_vs_service *svc, struct sk_buff *skb)
{
        int swto;

        printk(KERN_INFO "callback called \n");

        swto = swtoing(svc);
        return swto;
} 
```

我的`swtoing()`函数有点长，但我已经调试了很多，并且发现如果我`swtoing()`用`atomic_set()`...

有什么帮助吗？

**编辑 2：更多信息**

我意识到我正在修改的内核模块充满了`spin_locks`类似的东西......所以我认为（如果我错了，请原谅我）我必须在我正在创建的函数中做一些事情，以保持锁定/原子的东西......但我不知道是什么:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:01:21.927

您可以使用[in_atomic](http://lxr.linux.no/linux+v3.5/include/linux/hardirq.h#L109)宏，但它有一些限制。见评论。

# mysql - 同义和反义数据库的Mysql数据库模式？

> ID：11764032
> 
> 赞同：0
> 
> 时间：2012-08-01T16:58:21.747
> 
> 标签：mysql, database, database-design

我想为同义词和反义词创建一个数据库，但我不确定如何建立表之间的关系以获得更好的性能以及我应该创建哪个索引。

首先我想：

```
table name: synonymous
id (int) primary key
name (varchar) text index
syn_group_id (int)
ant_group_id (int) 
```

因此，所有同义词都将具有相同的 syn_group_id，但这是不可能的，因为所有单词都不共享相同的同义词，反义词也是如此。所以我完全不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:05:26.000

我想你可以简单地拥有这样的结构：

```
table: Words
id(int, autoindex,primary,key)
word(varchar, unique index)

table: Synonyms
lookup_id, related_id (both int related to words table id field with compound primary key indexing)

table: Antonyms (same structure as synonyms) 
```

同义词和反义词表只是与单词表相关的多对多连接表。

因此，示例查找查询可能是：

```
SELECT w.word FROM words as w INNER JOIN synonyms as s on w.id = s.related_id WHERE s.lookup_id = [LOOKUP_ID]; 
```

# android - 权限映射问题

> ID：11764037
> 
> 赞同：1
> 
> 时间：2012-08-01T16:58:54.053
> 
> 标签：android, permissions

在`AndroidManifest.xml`中，权限声明为：

```
android.permission.ACCESS_FINE_LOCATION 
```

在设置 -> 应用程序 -> 管理应用程序 -> 应用程序信息（以及在 Google Play 中）中，权限被声明为`Fine (GPS) location`.

问题是我在哪里可以找到从一种格式到另一种格式的映射？一个权限是否有可能映射到另一种格式的多个权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:06:35.483

`android.permission.ACCESS_FINE_LOCATION`是 GPS 的许可。（又名你的位置）。

它说良好（GPS）位置的事实只是为了使其用户友好，以便他们理解它的含义。

我不确定这是怎么回事..

可以在 [此处找到有关权限及其作用的更多信息（用户将看到类似的简要说明）](http://developer.android.com/reference/android/Manifest.permission.html)

[以下是每个人所做的详细说明，以及用户将看到的确切消息。](http://techpp.com/2010/07/30/android-apps-permissions-secure-private-data/)它没有说随之而来的 xml 权限，但它们并不难弄清楚。

# azure - 如何在 Azure 本地模拟器上测试 RoleEnvironment.Changing 事件？

> ID：11764039
> 
> 赞同：5
> 
> 时间：2012-08-01T16:58:57.420
> 
> 标签：azure, azure-worker-roles

如何使用 Azure SDK 1.7在本地测试[RoleEnvironment.Changing事件？](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.changing.aspx)我必须更改哪个文件，更改该文件后是否必须运行任何其他命令？

该[线程](http://social.msdn.microsoft.com/Forums/en-US/windowsazuremanagement/thread/badfb9b0-9aa4-48d9-908b-2fb8dc36f9e3)上的信息不是很完整，它不再适用于 1.7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T21:46:58.653

经过反复试验，我发现问题出在错误的 cscfg 上。要测试它：

1.  从 Azure 项目更改 ServiceConfiguration.Local.cscfg
2.  以管理员身份打开 Windows Azure SDK 环境
3.  将目录 (cd) 更改为 ServiceConfiguration.Local.cscfg 文件所在的 Azure 项目
4.  运行命令**csrun /update:[DEPLOYMENT ID];ServiceConfiguration.Local.cscfg**其中 [DEPLOYMENT ID] 是 Azure 模拟器标签部署 (XX) 后面括号中的数字

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-11T11:23:25.243

我还注意到，如果我们正在调试解决方案（开始调试 - F5）， csrun /update:[DEPLOYMENT ID];ServiceConfiguration.Local.cscfg 将终止部署，它只会在（**不调试开始 - Ctrl F5**）下正常工作选项。

添加以防万一它可以帮助任何人。

# iphone - 将 iphone/iPad 文本动态更改为自定义字体

> ID：11764040
> 
> 赞同：3
> 
> 时间：2012-08-01T16:58:58.360
> 
> 标签：iphone, dynamic, fonts

我想创建一个使用用户自定义字体的应用程序，因此我希望我的应用程序在运行时加载 ttf 文件。我熟悉通过 UIAppFonts 键 [添加自定义字体，如在 iphone 上添加自定义字体中](https://stackoverflow.com/questions/10922002/adding-custom-font-on-iphone)所述。如果提供用户创建的自定义版本，大概我不会成功创建可以由我的应用程序换出的占位符自定义字体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:24:52.283

我使用的字体文件是这样的：[http ://www.webpagepublicity.com/free-fonts/a/Almagro%20Regular.ttf](http://www.webpagepublicity.com/free-fonts/a/Almagro%20Regular.ttf)

我使用以下代码做到了：

```
 CGDataProviderRef fontDataProvider = CGDataProviderCreateWithFilename([fontFilepath UTF8String]);

 // Create the font with the data provider, then release the data provider.
CGFontRef customFont =  CGFontCreateWithDataProvider(fontDataProvider);
CGDataProviderRelease(fontDataProvider);

CFErrorRef error = nil;
CTFontManagerRegisterGraphicsFont(customFont, &error);

CGFontRelease(customFont);

if (error != nil)
{
    NSError* err = (__bridge NSError*)error;
    NSLog(@"error code %d desc: %@",err.code, [err description]);
}

UIFont* f = [UIFont fontWithName:@"Almagro" size:14.0]; 
```

不过也有一些陷阱。您需要知道字体名称，因为它可能与文件名略有不同。在我的示例中，文件名是“Almagro Regular.ttf”，但字体名称只是“Almagro”。在另一个论坛上，有人说您需要注意名称中带有空格的字体，因为像“Sans Serif”这样的字体将被注册为 UIFont fontWithName:size 的“SansSerif”：

让我知道它是否有效。

# php - CakePHP 2.2.1 如何将validationErrors 传递给SetFlash？

> ID：11764046
> 
> 赞同：0
> 
> 时间：2012-08-01T16:59:15.530
> 
> 标签：php, cakephp

我正在为我的网站构建一个简单的联系表格。

在我的模型中，我有：

```
class Contact extends AppModel {
public $useTable = false;
public $validate = array(
    'name' => array(
        'rule' => 'notEmpty',
        'message' => 'Field name must be not empty'
    ),
    'email' => 'email',
    'message' => array(
        'rule' => 'notEmpty',
        'message' => 'Field message must be not empty'
    )
);
} 
```

控制器：

```
class ContactsController extends AppController {
public $helpers = array('Html', 'Form');

public function index() {

}

public function send() {
$this->Contact->set($this->request->data);
if ($this->Contact->validates()) {
//sending mail logic
        };
                                } else {
// didn't validate logic
$errors = $this->Contact->validationErrors;

}
}
}
} 
```

在 index.ctp 视图中我有：

```
echo $this->Form->create('Contact', array('action' => 'send'));
echo $this->Form->input('name', array('label' => 'Your name:'));
echo $this->Form->input('email', array('label' => 'Your e-mail:'));
echo $this->Form->input('message', array('rows' => '6', 'label' => 'Your message:'));
echo $this->Form->end('Send button');

echo $this->Session->flash(); 
```

因此，因为我使用来自控制器的验证数据，所以将 $errors 传递给 Session->flash 时遇到了问题。这样做的正确方法是什么？我不想在我的控制器中为“发送”方法制作额外的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:22:38.470

我的问题是我没有在我的控制器中使用第二个视图作为发送方法。当我添加 $this->render('index'); 它解决了所有问题，现在我的表单会自动显示验证消息。

# subreport - 带有子报表的报表产生空白页

> ID：11764055
> 
> 赞同：3
> 
> 时间：2012-08-01T16:59:50.993
> 
> 标签：subreport

Windows 7 上的 iReport 4.5.1

我有一份包含 7 个子报告的报告。此报告针对一组数据运行...大约 10 项。大约 9 个项目包含 3 个子报表。其他报告针对一个特定项目运行。

我的问题如下：

1.  生成每个项目的报告后会生成一个空白页。
2.  我希望在每个页面上生成 ietm 和日期，但它仅在初始报告页面上生成。我该如何实现。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-27T07:21:06.493

我在使用子报表时遇到了与上述 #1 相同的问题 - 在 iReport 中独立运行报表，一切看起来都很棒，但是当它作为子报表运行时，每页内容之后都会出现一个空白页。我所做的修复是确保我的子报表设计与页面大小选项中的父报表的宽度相同，然后确保子报表元素的大小完全适合父节的宽度。这对我有用。

# internet-explorer - mac上的虚拟机进行ie测试，如何查看本地主机？

> ID：11764060
> 
> 赞同：0
> 
> 时间：2012-08-01T17:00:21.417
> 
> 标签：internet-explorer, localhost, virtualization, virtualbox

我已经下载并安装了虚拟盒子和 ie7/8/9 的扩展。

如何浏览“本地主机”文件。

我在 localhost:5000 在本地为 ruby​​ on rails 运行 Web 服务器。

正如您在下面看到的，我可以在本地访问我的服务器，但虚拟框使用相同的地址看不到它。如何让虚拟盒子查看我的本地 Web 服务器地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:00:50.677

确保您可以从虚拟机 ping 本地框的 ip。一旦你可以 ping，http://:5000/ 就可以工作了。

如果机器是 unix/linux，你可以在终端输入 ifconfig 来获取你的 ip。

在windows中通过ipconfig获取windows虚拟机的ip地址。

# java - 片段着色器中的状态相关渲染

> ID：11764062
> 
> 赞同：3
> 
> 时间：2012-08-01T17:00:33.537
> 
> 标签：java, gwt, webgl, fragment-shader

我目前正在写我的学士论文，该论文是关于使用 GWT 插件 gwt-g3d 创建仓库的 3D 可视化。

我已经能够非常有效地显示结构布局。`gl.draw()`由于我将所有渲染保留在着色器中并最小化调用，因此以不错的帧速率渲染 200 万多个顶点。但是，我认为使用这种技术已经走到了死胡同，因为它是非常静态的。我需要的是一种使我的应用程序更加动态的方法。由于我习惯于 Java 中的面向对象编程，因此着色器语言很难让我理解。这就是我要说的...

我正在尝试以不同的方式（以不同的颜色开始）渲染我的可视化的多个区域（这些区域的数量在初始化时是未知的）。所以我在片段着色器中尝试了这样的事情：

```
...
uniform vec3 alteredCoords[]; //a coordArray of positions that i want to render alternatively
...

// color each of these coords in grey
for (int i = 0; i < alteredCoords.length(); i++) {
  if ( position.x == alteredCoords[i].x && position.y == alteredCoords[i].y && position.z == alteredCoords[i].z) {
    gl_FragColor = vec4(100.0/255.0, 100.0/255.0, 100.0/255.0, 1.0);
    return;
  }
} 
```

我知道这不会按原样工作，因为数组需要恒定大小并且存在强制转换问题 - 现在尝试忽略它，因为无论如何这都不起作用，因为着色器语言不支持动态大小的数组。

我需要的是针对此问题的某种解决方法。有任何想法吗？

这是我目前布局的屏幕截图：

![](../Images/a5df51ff3ec21f88127f06922be8d311.png)

请注意，我已经为单个区域（灰色正方形）实现了我的想法——我所需要的只是一些以这种方式动态渲染多个区域的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:45:25.357

这是在片段着色器中获取动态大小的数组的典型解决方法：

纹理！

更具体地说，您可以传入`n`x`m`像素纹理（使用最近邻重采样），并传入值`n`和`m`作为制服。纹理采样器使用归一化`uv`坐标，因此您可以像这样构造一个映射函数：

```
uniform sampler2D sampler;
uniform float n;
uniform float m;

vec4 get_texel(float idx) {
    vec2 idx2d = vec2(
        (mod(idx, n) + 0.5) / n,
        (floor(idx / n) + 0.5) / m);
    return texture2D(sampler, idx2d);
} 
```

现在你有一个可变大小的`vec4`s数组

为了进一步扩展这一点，假设您的货架排列在规则网格中，您可以非常轻松地创建一个映射函数，该函数获取当前片段的世界坐标并将其映射到您传入的纹理中的特定像素，然后使用纹理的值来选择如何渲染所述片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:37:39.110

由于有关您要以不同方式绘制的信息与顶点相关联，因此您可能最好使用[顶点属性](http://www.opengl.org/sdk/docs/tutorials/ClockworkCoders/attributes.php)将信息与这些顶点一起传输到管道。我不是这方面的专家，但我认为其他任何东西都可能比这更贵。

# sql - Oracle SQL 根据列值将连续数字分配给子集

> ID：11764064
> 
> 赞同：6
> 
> 时间：2012-08-01T17:00:35.190
> 
> 标签：sql, oracle, aggregate-functions

我在表上有以下数据

```
ID_1 ID_2 序列组
212648 601327 1   
212648 1805 2   
212648 500886 3   
212648 3405 4   
212648 501174 5   
212648 201245 6   
212648 500449 7   
212648 3804 8   
212648 501533 9   
212648 3989 10  
212648 500280 11 开始
212648 175 12 之间
212648 500395 13 完
212648 1817 14  
212648 500945 15 开始
212648 183 16 之间
212648 500543 17 之间
212648 181 18 之间
212648 500009 19 完
212648 5576 20  
212648 500960 21  
212648 5562 22  
212648 603659 23  

```

我想添加一个列，它将为“START”和“END”之间的行应用组名。例如：

```
ID_1 ID_2 SEQ 组 GROUP_SEQ
212648 601327 1       
212648 1805 2       
212648 500886 3       
212648 3405 4       
212648 501174 5       
212648 201245 6       
212648 500449 7       
212648 3804 8       
212648 501533 9       
212648 3989 10      
212648 500280 11 开始 1
212648 175 12 1 之间
212648 500395 13 结束 1
212648 1817 14      
212648 500945 15 开始 2
212648 183 16 2之间
212648 500543 17 2 之间
212648 181 18 2之间
212648 500009 19 结束 2
212648 5576 20      
212648 500960 21      
212648 5562 22      
212648 603659 23      

```

我搜索了 Oracle 的分析函数（RANK()、FIRST、LAST() 等），但找不到解决方案。提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T17:54:46.480

最重要的是，这个查询得到了结果。如果花更多时间在它上面，可能是一种更清洁的方法。

```
SELECT id_1, id_2, seq, the_group

      ,CASE WHEN (start_count - end_count) > 0 OR (start_count = end_count AND the_group = 'END')
            THEN start_count
            ELSE NULL
       END AS group_seq

  FROM ( SELECT id_1, id_2, seq, the_group

               ,SUM( CASE WHEN the_group = 'START' THEN 1 ELSE 0 END )
                  OVER( PARTITION BY ID_1 ORDER BY id_1, SEQ ) AS start_count

               ,SUM( CASE WHEN the_group = 'END' THEN 1 ELSE 0 END )
                  OVER( PARTITION BY ID_1 ORDER BY id_1, SEQ ) AS end_count

           FROM myTable )

  ORDER BY id_1, seq 
```

# ios - 对 iOS 中宏的误解

> ID：11764066
> 
> 赞同：0
> 
> 时间：2012-08-01T17:00:53.030
> 
> 标签：ios, xcode, macros, header-files

有些东西我根本不明白，因为我一辈子都无法让它发挥作用。我想创建一个扩展`NSLog(NSString *format, ...)`. 这是我想出的：

NSLogExtensions.h

```
#define DebugLog(debugMode, format, ...) MyDebugLog(debugMode, [[NSString stringWithFormat:@"<%@> (Line %d): ", NSStringFromClass([self class]), __LINE__] stringByAppendingString:format], ##__VA_ARGS__)

@interface NSLogExtensions : NSObject

@end 
```

NSLogExtensions.m

```
#import "NSLogExtensions.h"

@implementation NSLogExtensions

void MyDebugLog(bool debugMode, NSString *format, ...) {
    va_list(argumentList);
    va_start(argumentList, format);
    if (debugMode) {
        NSLogv(format, argumentList);
    }
    va_end(argumentList);
}

@end 
```

我希望能够包含 NSLogExtensions 头文件，然后能够使用宏，但我仍然收到 GCC 隐式函数声明警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:07:11.603

签出这个答案

[真的不应该在生产代码上使用 NSLog() 吗？](https://stackoverflow.com/questions/300673/is-it-true-that-one-should-not-use-nslog-on-production-code)

它有更多关于如何为扩展的 NSLogs 使用宏的详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T18:21:09.267

`DebugLog`宏使用函数，`MyDebugLog`所以必须添加原型

```
void MyDebugLog(bool debugMode, NSString *format, ...); 
```

到*NSLogExtensions.h*。然后它编译没有警告。

**但是**与@calvinBhai 所指的解决方案相比，您的解决方案有一个（在我看来）很大的缺点：即使您通过设置关闭日志记录 ，`debugMode`宏也会评估所有参数并调用。使用其他解决方案，如果禁用日志记录，预处理器将删除所有内容。`false``DebugLog``MyDebugLog`

# javascript - Javascript“for(i in array)”将 i 设置为最后一个索引

> ID：11764077
> 
> 赞同：2
> 
> 时间：2012-08-01T17:01:31.227
> 
> 标签：javascript, for-in-loop

据我了解，代码

```
var a = new Array("a","b","c");
var out = "";
for(i in a)
  out += i+":"+a[i]+"\n"; 
```

应该着手

```
0:a
1:b
2:c 
```

对？

好吧，我的一个项目中有以下代码片段：

```
for(i in player.neededItems)
{
  debug(i+":");
  if(!player.hasItem(player.neededItems[i].type))
    itemsRemaining.push(player.neededItems[i]);
  debug(i+"<br />");
} 
```

*   debug(x) 只是一个将 x 附加到 id 为“debug”的 div 内容的函数。
*   player.neededItems 是一个对象数组。
*   itemsRemaining 是一个先前为空的数组。
*   player.hasItem 返回玩家是否有物品。

行。所以这就是奇怪的地方。在 for 循环中，'i' 仅用作数组的索引。它没有以任何方式修改。但是，“调试”中的输出如下：

```
0:3
1:3
2:3
3:3 
```

为什么“我”变了？！player.neededItems 不会在任何功能或任何东西中被修改。我不知道发生了什么。但是，当我切换

```
for(i in player.neededItems) 
```

为了

```
for(i = 0; i < player.neededItems.length; i++) 
```

一切正常。

那么我是否遗漏了一些关于“for（i in a）”语法的功能？还是我偶然发现了 webKit 中的 javascript 解析器中的一个错误？或者（更有可能）我要疯了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:05:59.823

```
for(var i in player.neededItems)
{
  debug(i+":");
  if(!player.hasItem(player.neededItems[i].type))
    itemsRemaining.push(player.neededItems[i]);
  debug(i+"<br />");
} 
```

# java - 在模拟器上成功运行我的 Android 应用程序后我该怎么办？

> ID：11764078
> 
> 赞同：0
> 
> 时间：2012-08-01T17:01:31.850
> 
> 标签：java, android, netbeans

我的模拟器终于显示了我的要求，现在我如何将它放入我的 Android 设备中？我正在使用 Netbeans 7.1.2，仅供参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:16:54.583

使用**[adb](http://developer.android.com/tools/help/adb.html#move)**命令行工具

1 -- 使用**adb devices**命令获取设备列表

> ```
> > adb devices
> emulator-5556 
> ```

2 -- 使用**adb install 安装**

```
 > adb install <path_to_apk>
  e.g.

  > adb -s emulator-5556 install helloWorld.apk 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:03:27.617

我使用 eclipse 时不了解 netbeans，但尝试连接设备并安装所有必要的驱动程序。然后尝试启动该项目，它可能会让您在模拟器和设备之间进行选择。选择设备，并在应用加载之前等待一段时间。

# php - 通过 AWS PHP SDK 响应循环/迭代

> ID：11764079
> 
> 赞同：2
> 
> 时间：2012-08-01T17:01:36.370
> 
> 标签：php, sdk, amazon-web-services, simplexml

我注意到的是，来自[AWS PHP SDK](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/)的响应有时是单个结果，有时是一系列结果。

这个问题可能是因为我在处理 CFSimpleXML/SimpleXML 对象时缺乏知识。

我尝试了几种方法，但每种方法都相当困难，我了解到的是，在做了一段时间后，它们看起来都很困难，那么你做错了。

# 发生了什么

## 使用 describe_load_balancers 的示例调用

```
<?php

$elb      = new AmazonELB();
$response = $elb->describe_load_balancers();

if ($response->isOK())
{
    foreach($response->body->LoadBalancerDescriptions() AS $loadBalancer)
    {
        print_r($loadBalancer);
    }
}
?> 
```

## 如果它只有一个结果，它会打印如下内容：

```
CFSimpleXML Object
(
    [member] => CFSimpleXML Object
        (
            [SecurityGroups] => CFSimpleXML Object
                (
                )

            [LoadBalancerName] => LBName1
            [CreatedTime] => 2012-08-01T12:22:03.910Z
            ...
        )
) 
```

## 如果它有多个结果，它会打印如下内容：

```
CFSimpleXML Object
(
    [member] => Array
        (
            [0] => CFSimpleXML Object
                (
                    [SecurityGroups] => CFSimpleXML Object
                        (
                        )

                    [LoadBalancerName] => LBName1
                    [CreatedTime] => 2012-08-01T12:22:03.910Z
                    ...
                )

            [1] => CFSimpleXML Object
                (
                    [SecurityGroups] => CFSimpleXML Object
                        (
                        )

                    [LoadBalancerName] => LBName2
                    [CreatedTime] => 2012-08-01T16:17:21.030Z
                    ...
                )
        )
) 
```

* * *

# 如果只有一个结果，我想要什么

```
CFSimpleXML Object
(
    [member] => Array
        (
            [0] => CFSimpleXML Object
                (
                    [SecurityGroups] => CFSimpleXML Object
                        (
                        )

                    [LoadBalancerName] => LBName1
                    [CreatedTime] => 2012-08-01T12:22:03.910Z
                    ...
                )
        )
) 
```

我试图循环查看是否`member`是一个数组，但它仍然将它作为 CFSimpleXML 对象返回，所以我无法检测到该数组`print_r`是否存在。

我希望能够遍历列表，或者在我的代码中从 SimpleXML 中创建 ELB 模型，或者轻松地遍历属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:06:22.170

```
$elb      = new AmazonELB();
$response = $elb->describe_load_balancers();

foreach($response->body->LoadBalancerDescriptions() AS $item)
{
    foreach($item->member() AS $member)
    {
        print_r($member);
    }
} 
```

## 印刷

```
CFSimpleXML Object
(
[SecurityGroups] => CFSimpleXML Object
    (
    )

[LoadBalancerName] => LBName1
[CreatedTime] => 2012-08-01T12:22:03.910Z 
```

2012 年 9 月 14 日编辑：只想快速更新并分享一个我发现有帮助的链接：[Konrad Kiss' Code & Tech Rant: Listing AWS instances in PHP](http://www.konradkiss.com/2011/06/listing-aws-ec2-instances-in-php_02.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T03:31:04.807

您可以利用 $response->body 的 to_json、to_stdClass 和 to_array 方法

```
<?php

require_once 'AWSSDKforPHP/sdk.class.php';

$ec2 = new AmazonEC2();

$response = $ec2->describe_instances(); 
$instances = $response->body->to_stdClass();

echo count($instances->reservationSet->item).PHP_EOL;

foreach ($instances->reservationSet->item as $reservation) {
    echo $reservation->instancesSet->item->instanceId.PHP_EOL; 
} 
```

这已经在这里讨论过：[迭代 SimpleXML Objext PHP](https://stackoverflow.com/questions/5778444/iterating-over-simplexml-objext-php)

# php - 将变量从php连续加载到javascript中

> ID：11764080
> 
> 赞同：1
> 
> 时间：2012-08-01T17:01:50.667
> 
> 标签：php, javascript, google-visualization

我目前正在尝试使用谷歌的可视化工具绘制一些动态加载的图形。

我想从 sql 数据库中提取数据。我有一个能够这样做的 php 脚本 ( **getnumber.php )。**

我试图在我的 javascript 中使用这个 php 脚本来绘制图形。

```
<html>
<head>
<!--Load the AJAX API-->
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript">
  function drawChart(Z)
  {
    tmpdata = new google.visualization.DataTable();
    datalist.push(tmpdata);
    datalist[Z].addColumn('string', 'Complete');
    datalist[Z].addRows([['Finished', $.ajax({url:"getnumber.php"})], ['Incomplete', 10]]);
    .
    .
    .
  }
  window.setInterval("drawChart()", 1000);
</script> 
```

我意识到 $.ajax 的这种使用是完全错误的，但我很难过！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:09:18.297

您应该尝试使用其中一个`$.post()`或`$.get()`函数，而不是使用基本的 ajax 函数。无论如何，您可以通过这种方式操作这 3 个函数中的数据

```
$.post('getnumber.php',function(data){
/* Do whatever you want with the data you grabbed from the php page. */
}); 
```

我不确定你的问题到底是什么，但我希望这会对你有所帮助。

祝你今天过得愉快！

编辑：函数本身不包含数据，它包含`function(data){}`在调用部分中`$.ajax()`。

Edit2：与其他两个函数相比，该`$.ajax();`函数有一个`success(data, textStatus, jqXHR)`可以使用的参数调用。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:58:54.590

我最终使用了以下内容：

```
my_url="dosomething.php";
function getvar() {
  var json = null;
  $.ajax({
      'async': false,
      'global': false,
      'url': my_url,
      'dataType': "json",
      'success': function (data) {
          json = data;
      }
  });
  json = parseInt(json);
  return json;
}; 
```

以 php 脚本结尾：

`echo json_encode($id_max);`

由于某种原因，我无法让 $.post 工作。无论如何感谢您的帮助。

# java - 我想扩展 ArrayList 以实现但无法访问 elementData 私有 var

> ID：11764085
> 
> 赞同：0
> 
> 时间：2012-08-01T17:02:14.330
> 
> 标签：java, collections, arraylist, overriding, extend

我想知道如何`indexOf()`在`ArrayList`. 我需要对**私有瞬态`elementData`**变量使用相同的访问超级。

如何解决我的设计问题？

**编辑：**这可能是一个有效的解决方案，将对 elementData[i] 的调用更改为类似的 this.get(i) （实际上是允许的吗？）。它会以某种方式破坏或破坏逻辑吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T17:03:59.497

你不应该，基本上。如果*您*想创建一个行为方式与`ArrayList`. 的私人细节`ArrayList`是私人的，这是有充分理由的；它们是可以在版本之间更改的实现细节，您的代码不应该关心它们。

（扩展实际上*可能*`ArrayList`是一种有效的方法，但不太可能是 IMO。你还没有说出你真正想要实现的目标，只是阻止你实现它的原因。如果你能告诉我们更多关于大局的信息，我们'更有可能提供帮助。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:07:12.507

您可以创建一个容器，该容器提供与 ArrayList 相同的方法，并具有 ArrayList 类型的字段（用于数据存储）。然后将所有 ArrayList 方法添加到容器类中，这些方法在 ArrayList（字段）上执行相应的方法，但要覆盖的方法除外。

# javascript - jQuery 自定义事件和 chrome 内容脚本

> ID：11764087
> 
> 赞同：2
> 
> 时间：2012-08-01T17:02:19.510
> 
> 标签：javascript, jquery, google-chrome

我想做的是从网页触发一个事件，并将其捕获到注入该网页的内容脚本中。页面和内容脚本都加载了一个 jQuery 实例，它们无法访问彼此的变量，但可以访问同一个 DOM。

是否可以使用 jQuery 事件来做到这一点？它们实际上是如何在后台工作的？

页：

```
$('#elementID').trigger('stateChange', state) 
```

内容脚本：

```
$('#elementID').on('stateChange', function(event, state) {...}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:48:17.863

这不适用于 jQuery 事件。最简单的方法是使用 HTML5 api window.postMessage()。Google Chrome 扩展文档中对此有很好的描述和示例：[http ://code.google.com/chrome/extensions/content_scripts.html#host-page-communication](http://code.google.com/chrome/extensions/content_scripts.html#host-page-communication)

# c#-4.0 - 使用 Fluent nHibernate 连接具有不同列名的两个表

> ID：11764090
> 
> 赞同：0
> 
> 时间：2012-08-01T17:02:40.290
> 
> 标签：c#-4.0, fluent-nhibernate, fluent-nhibernate-mapping, jointable

我正在使用流利的 nhibernate 3.1 映射到旧数据库。我有两个班级，想将 B 加入 A。数据库结构没有外键。

AModel.OccurrenceNumber 和 BModel.OccurrenceNumber 具有相同的数据（即在一个和另一个中声明 #1234），只是不同的列名。是否可以在映射阶段加入？如果需要，我可以编写一个 linq 语句来加入他们，但想知道是否可以在这里完成。提前致谢。

```
public class AMap : ClassMap<AModel>
{
    public AMap()
    {
        Table("ATable");

        Id(x => x.Id).GeneratedBy.Increment();
        Map(x => x.OccurrenceNumber).Column("OCCUR"); //Same Data
    }
}

public class BMap : ClassMap<BModel>
{
    public BMap()
    {
        Table("BTable");

        Id(x => x.Id).GeneratedBy.Increment();
        Map(x => x.OccurrenceNumber).Column("B69_CLAIM_OCCUR"); // Same Data
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T17:12:32.353

您可以在 AMap 或 BMap 类中声明以下引用

```
References<AModel>(x => x.AModels).Column("B69_CLAIM_OCCUR").PropertyRef("OccurrenceNumber").ReadOnly(); 
```

在您的 BModel 类中将 AModeldata 数据定义为

```
public virtual IList<AModel> AModels{ get; set; } 
```

因此，当您编写连接这两个表的查询时，它将自动连接到`B69_CLAIM_OCCUR`和`OCCUR`。

我假设您在 A 和 B 实体之间存在一对多关系。

# machine-learning - 成本的 WEKA LibSVM 权重参数

> ID：11764092
> 
> 赞同：3
> 
> 时间：2012-08-01T17:02:47.230
> 
> 标签：machine-learning, data-mining, weka, svm, libsvm

我正在使用 LibSVM 在高度不平衡的数据集上训练 SVM。输出的 10% 为真，而 90% 为假。我读到了重量参数：

```
 -wi weight: set the parameter C of class i to weight*C, for C-SVC (default 1) 
```

每个类的参数集应该是什么？这个权重参数在直观上是什么意思，我们应该如何使用呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T18:25:22.170

权重参数控制 SVM 优化的偏度。也就是说，权重较高的类将计数更多。如果一个类的权重是另一个类的 3 倍，则权重较低的类的实例距离 libsvm 确定为另一个类的实例的类之间的边界距离可以是 3 倍以获得相同的优化值。

你如何使用它完全取决于你——你可以设置它，使两个类的权重相等（即权重为 9），但如果你得到的结果实际上改进了使用相同的权重是不同的事情。

我建议你玩不同的重量，看看会发生什么。

# visual-studio-2010 - #error 指令

> ID：11764098
> 
> 赞同：0
> 
> 时间：2012-08-01T17:03:06.483
> 
> 标签：visual-studio-2010, visual-c++

#error 指令在 Microsoft Visual C++ 中有效吗？是，所以语法是什么。我找到了这个示例代码：

```
#include <stdio.h>

#if MyVAL != 2
#error MyVAL must be defined to 2
#endif
int main()
{
return 0;
} 
```

我得到了错误：

```
fatal error C1189: #error :  MyVAL must be defined to 2 
```

据我所见，通常的语法如上所示，但 Windows Visual Studios 2010 不喜欢这样吗？有没有办法在 MSVS 2010 中实现这一点。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:55:40.747

所以这完全是一个愚蠢的问题。正如评论所示，我收到的错误正是我应该做的。

# android - AutoCompleteTextView sqlite 填充异常

> ID：11764099
> 
> 赞同：0
> 
> 时间：2012-08-01T17:03:16.343
> 
> 标签：android, sqlite, autocompletetextview

我的第一篇文章只有不到一半的文字，因此是第二篇（完整的）文章。

我正在使用 sqlite 来填充两个 AutoCompleteTextView 的测试应用程序我正在使用汽车制造商和模型进行测试

**自动完成的：**

使自动完成

模型自动完成

makeAutocomplete 的列表是从 sql 查询中填充的，并且工作正常

选择品牌时填充第二个

```
makeAutoComplete.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

            final String[] makeSelected = {arg0.getItemAtPosition(arg2).toString()};
            final String[] modelDeal = sqlDBModel.getAllModelFilter(makeSelected);
            ArrayAdapter<String> modelAdapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_dropdown_item_1line, modelDeal);
            initModelAutoComplete(modelAdapter);

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    }); 
```

**initModelAutoComplete 声明**

```
public void initModelAutoComplete(ArrayAdapter<String> adapter){

    //adapter = new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, list);
    modelAutoComplete.setAdapter(adapter);
    modelAutoComplete.setThreshold(1);
    modelAutoComplete.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3){
            arg0.getItemAtPosition(arg2);
        }
    });
} 
```

**SQLiteModelSearch.getAllModelFilter 声明**

```
 public String[] getAllModelFilter(String[] vehiclemake){

    if(vehiclemake != null){

        Cursor cursor = this.sqliteDBInstance.query(DB_MAKEMODEL_TABLE,
                                                    new String[]{DB_COLUMN_MAKE, DB_COLUMN_MODEL},
                                                    DB_COLUMN_MAKE+"=?",
                                                    vehiclemake,
                                                    null,
                                                    null,
                                                    null,
                                                    null);

        if( cursor != null){
            String[] str = new String[cursor.getCount()];

            int i = 0;
            while(cursor.moveToNext()){
                str[i] = cursor.getString(cursor.getColumnIndex(DB_COLUMN_MODEL));
                i++;
            }
            return str;
        } else {
            Log.i("vehiclemake = ", "NULL");
            return new String[]{};
        }
    }

    return new String[]{};
} 
```

**日志猫**

> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 android.app.ActivityThread.main(ActivityThread.java:3683)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): at java.lang.reflect.Method.invokeNative(Native Method) 07-31 13:00:19.631: E/AndroidRuntime(1302): 致命异常: main
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): java.lang.NullPointerException
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 com.myapp.sqltest.database.SQLiteModelSearch.getAllModelFilter(SQLiteModelSearch.java:100)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 com.myapp.sqltest.activity.addVehicleActivity$2.onItemSelected(addVehicleActivity.java:62)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 android.widget.AdapterView.fireOnSelected(AdapterView.java:871)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 android.widget.AdapterView.access$200(AdapterView.java:42)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:837)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 android.os.Handler.handleCallback(Handler.java:587)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 android.os.Handler.dispatchMessage(Handler.java:92)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 android.os.Looper.loop(Looper.java:130)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 java.lang.reflect.Method.invoke(Method.java:507)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): at dalvik.system.NativeStart.main(Native Method)

我可以看到异常被抛出：

```
Cursor cursor = this.sqliteDBInstance.query(DB_MAKEMODEL_TABLE,
                                                    new String[]{DB_COLUMN_MAKE, DB_COLUMN_MODEL},
                                                    DB_COLUMN_MAKE+"=?",
                                                    vehiclemake,
                                                    null,
                                                    null,
                                                    null,
                                                    null); 
```

但不知道为什么，我已经看过所有进入函数的变量，但没有一个是空的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:22:16.763

我怀疑 OnItemSelected 会被 AutoCompleteTextView 调用，当用户单击下拉列表中的项目时，AutoComplete 只会触发 OnItemClick 事件。

尝试将您的 OnItemSelectedListener 代码移动到 OnItemClickListener。

**添加**

SQLiteDatabase.query() 总是会返回一个有效的 Cursor，你需要检查 Cursor 的大小看它是否有效：

```
 if(cursor != null){ // Not applicable 
```

尝试：

```
if(cursor.getCount() > 0) 
```

此外，您不需要特别将 Cursor 转换为 String 数组，SimpleCursorAdapter 将处理此细节。但是您的方法也将起作用（进行一些更改）。

**空指针异常**

如果您在这里收到 NPE：

```
Cursor cursor = this.sqliteDBInstance.query(...); 
```

然后简单地`sqliteDBInstance`为空。你在哪里初始化`sqliteDBInstance`？您`open()`在 SQLiteModelSearch 中是否有方法，如果有，您是否调用了它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T23:24:20.743

我已经想通了。问题是我已经定义了

```
public AutoCompleteTextView modelAutoComplete;
public AutoCompleteTextView makeAutoComplete; 
```

然后在函数 onCreate

我已经定义：

```
AutoCompleteTextView modelAutoComplete = (AutoCompleteTextView) findViewById(R.id.autoCompleteModel);
AutoCompleteTextView makeAutoComplete = (AutoCompleteTextView) findViewById(R.id.autoCompleteModel); 
```

我忽略了变量范围，因为 makeAutoComplete 和 modelAutoComplete 都定义了两次，一次作为全局类变量，第二次作为局部函数变量。

因为全局变量只是被定义而没有被初始化。函数 initModelAutoComplete() 引用了导致 NPE 异常的全局公共变量 modelAutoComplete。

# vb.net - Excel 因 RTD 调用而冻结

> ID：11764106
> 
> 赞同：0
> 
> 时间：2012-08-01T17:03:28.623
> 
> 标签：vb.net, excel, rtd

所以，这过去从未发生过，现在它每次都在这样做。

出于测试目的，RTD 服务器现在已关闭，Excel 无需执行任何操作，只需要输出 #N/A。奇怪的是它工作正常并且由于错误/错误的 progID 而失败，但是使用正确的（服务器仍然关闭）它会挂起并冻结。

> =RTD("正确的.prog",,"TEST")

以上将冻结Excel；它确实与 RTD 通信并且 RTD 开启并执行它应该做的事情，只是 Excel 冻结

> =RTD("错误的.prog",,"TEST2")

以上内容对 Excel 没有任何作用，而 Excel 做了它应该做的事情并输出 #N/A

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:00:43.013

我敢打赌你忽略了一些简单的事情。这里有一些想法：

1.  您是否在没有父窗口的情况下调用 ShowDialog()。可以按Alt+Tab来查看，看看后面有没有Window。

2.  当您调试并按下暂停时，代码控制是否停止在调试器中？

a）如果确实如此，则调试您的代码。它可能是一个无限循环。
b) 如果调试器没有在您的代码中停止，请仔细检查您是否没有禁用使其显示为挂起/冻结状态的 Excel 设置：

```
xlApp.ScreenUpdating = true;
xlApp.DisplayAlerts = true;
xlApp.UserControl = true;
xlApp.EnableEvents = true; 
```

# spring - 在 Spring 3 XML 中加载数组的特定索引？

> ID：11764110
> 
> 赞同：1
> 
> 时间：2012-08-01T17:03:48.747
> 
> 标签：spring

我正在尝试在我的 spring (v3) xml 中初始化一个 boolean[]。问题是我需要加载该数组的特定索引。例如，我想在下面加载 bArray：

```
 boolean[10] bArray;

  bArray[Options.AUTO]=true;
  bArray[Options.AIR]=false;
  bArray[Options.FOOT]=false; 
```

我见过像下面这样的例子，但是这个例子没有定义值的索引。

```
<bean id="MyBean" class="org.test.Autos">
    <property name="lists">
        <util:list list-class="java.util.ArrayList">
            <value>true</value>
            <value>false</value>
            <value>false</value>
        </util:list>
    </property>
</bean> 
```

这可以在 Spring xml 中完成吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:52:06.487

这是 Tomasz 使用`@Configuration`注解的一个例子：

首先你需要定义`AutosConfiguration`类：

```
@Configuration
public class AutosConfiguration {

    @Bean
    public boolean[] b_Array() {
        boolean[] bArray = new boolean[10];
        bArray[Options.AUTO]=true;
        bArray[Options.AIR]=false;
        bArray[Options.FOOT]=false;
        return bArray;
    }
} 
```

您将使用此类为`bArray`变量指定自定义配置。

然后你需要配置你的 spring 上下文：

```
<context:annotation-config />
<context:component-scan base-package="com.my.pack" />

<bean id="MyBean" class="org.test.Autos">
    <property name="bArray" ref="b_Array" />
</bean> 
```

其中 com.my.pack 是`AutosConfiguration`找到该类的包。

我希望这可以帮到你。

# php - 使用 php 仅获取带有特定标签的 XML 数据

> ID：11764113
> 
> 赞同：0
> 
> 时间：2012-08-01T17:03:58.020
> 
> 标签：php, xml, parsing

我正在尝试从 XML 文件中获取数字 ID 列表。它的格式是这样的。

```
<Count>Number of things found</Count>
<RetMax>Number of things asked for</RetMax>
<RetStart>0</RetStart>
<IdList>
<Id>ID#</Id>
<Id>ID#</Id>
<Id>ID#</Id>
<Id>ID#</Id>
<Id>ID#</Id>
<Id>ID#</Id>
<Id>ID#</Id>... 
```

该文件是使用 pubmed 数据库上的 Esearch 生成的。有没有办法使用 php 只获取“count”、“RetMax”和“ID”标签之间的文本并区分它们？最好是数组格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:05:55.643

```
$xml = simplexml_load_string($xmlstring);
$json = json_encode($xml);
echo $json->Count; 
```

[http://ka.lpe.sh/2012/07/26/php-convert-xml-to-json-to-array-in-an-easy-way/](http://ka.lpe.sh/2012/07/26/php-convert-xml-to-json-to-array-in-an-easy-way/)

# xml - 制作 XML 文档副本的 XSLT 样式表

> ID：11764114
> 
> 赞同：-1
> 
> 时间：2012-08-01T17:03:58.747
> 
> 标签：xml, xslt

编写一个 XSLT 样式表来制作 XML 文档的副本。源文档具有大写的元素和属性名称。输出文档应该是一个精确的副本，除了元素和属性名称是小写的。例如，它应该转换：

```
<p>
<BODY ATTRIBUTE="TheValue">
<H1>Hello world</H1>
</BODY>

into

<body attribute=”TheValue”&gt;
<h1>Hello world</h1>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:17:48.313

尝试这个：

```
<?xml version="1.0"?>
<!-- Transform a document to itself, lowercasing all tag names -->
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <!-- Import the identity transformation -->
    <!-- Whenever you match any node or any attribute -->
    <xsl:template match="node()|@*">
        <!-- Copy the current node -->
        <xsl:copy>
            <!-- Including any attributes it has and any child nodes -->
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
    <!-- Whenever you match any node or any attribute -->
    <!-- When you match any element -->
    <xsl:template match="*">
        <!-- Create the same element with a lowercase name -->
        <xsl:element name="{translate(name(),'ABCDEFGHIJKLMNOPQRSTUVWXYZ',  'abcdefghijklmnopqrstuvwxyz')}">
            <!-- Including any attributes it has and any child nodes -->
            <xsl:apply-templates select="@*|node()"/>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

# linux - 我可以使用 Qt Creator 在 C 上进行非 gui 编程吗？

> ID：11764116
> 
> 赞同：1
> 
> 时间：2012-08-01T17:04:00.147
> 
> 标签：linux, qt, qt-creator

我可以使用 Qt Creator IDE 进行非 GUI 编程吗？现在，像普通 C 项目一样编译“Hello world”：

```
#include <stdio.h>
int main(void)
{
    printf("Hello World!\n");
    return 0;
} 
```

我收到一个错误

> :-1: 错误：循环所有 <- 项目依赖项已删除。

我做错了什么？

我找到了解决方案。在终端中的工具 - 选项 - 环境中写了**xterm -e**并且它起作用了:) 谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:00:39.067

我一直在使用 QtCreator 在 C 中编写控制台应用程序。我在项目文件的顶部只有以下内容：

```
TEMPLATE = app
CONFIG += console
CONFIG -= qt 
```

然后是包含源的常用内容（例如，SOURCES += main.c）。似乎工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:13:26.223

理论上你可以做到这一点。所有 C 程序都应该在 C++ 中编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:31:07.480

QT 为非 GUI 应用程序提供了特殊的类，称为 QCoreApplication。

# php - onclick 提交按钮 AND $_SESSION['variable']=1，可以合并吗？

> ID：11764119
> 
> 赞同：-1
> 
> 时间：2012-08-01T17:04:22.287
> 
> 标签：php, javascript, session, onclick

我一直在阅读有关此的相关帖子，但我仍然没有得到正确的答案。我采纳了他们的建议，但未能实现我想要的。我想实现这一点：当我单击提交按钮时，我希望将 $_SESSION['roomno'] = 400 和 $_SESSION['chairnum']=5 传递到 PHP 中的另一个页面。

部分 monica.php 代码：

```
<div id="popupContact">
        <a id="popupContactClose">x</a>
        <center><form method = "POST" action="gervent.php">
        <h1>Information </h1>
        Fullname : <input type="text" name="student_name" /><br /><br />
        Student ID No. : <input type="text" name="stud_id" />
        <br /><br />
        <input type="submit"  value="Submit" onclick=???/>
        </form></center>
        </div>
        <div id="backgroundPopup"></div> 
```

gervent.php

```
<?php
session_start();

$name = $_POST['student_name'];
$stud_id = $_POST['stud_id'];
/*Should have this
    $room_id = $_SESSION['roomno'];
    $chair_num = $_SESSION['chairnum'];
*/

mysql_connect("localhost", "root", "") or die (mysql_error());
mysql_select_db('seat_reservation') or die (mysql_error());

$query = mysql_query("INSERT INTO reservation WHERE (room_id, chair_number, chair_status, student_name, stud_id) VALUES ($room_id, $chair_num, 1, $name, $stud_id)");

if($insert)
    die ("Seat reserved! <br />Redirecting...<meta http-equiv='refresh' content=2;monica.php>");

else 
        die ("Try Again! <br />Redirecting...<meta http-equiv='refresh' content=2;monica.php>");
   ?> 
```

所以 gervent.php 应该从 monica.php 获取 SESSION 值，以便它可以在插入时使用它。在点击中怎么可能？注意：简单解释一下，我对 PHP 快车道来说太慢了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:11:33.623

`$_SESSION`*变量本身*没有“通过” 。它们在脚本之间维护，因此不需要传递。您只需在需要时设置/更改它们，然后在服务器端的任何地方调用它们（前提是您`session_start()`在页面开头调用了，但我确定您已经知道了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:11:26.740

虽然这没有意义，但只有在表单存在的页面中“专门”设置会话变量并且它们在其他页面中更改（我这么说是因为我猜这里的会话变量似乎是根据用户打开的房间页面设置，并且可能有多个房间页面要保留一个座位，每个页面设置不同的会话变量）或者如果会话是可选的并且在表单所在的页面中没有启动会话，那么您可以将隐藏的输入字段添加到具有房间值和椅子编号的表单中（并且您应该找到一种方法将它们预定义到表单中，例如 $_GET['value'] 等），然后您可以通过单击提交将它们发送到目标页面。

```
<div id="popupContact">
<a id="popupContactClose">x</a>
<center><form method = "POST" action="gervent.php">
<h1>Information </h1>
Fullname : <input type="text" name="student_name" /><br /><br />
Student ID No. : <input type="text" name="stud_id" />
<br /><br />
<!-- the php variables of values has to be set before, any way you'd like -->
<input type="hidden" name="room_id" value="<?=$room_id?>" />
<input type="hidden" name="chair_num" value="<?=$chair_num?>" />
<input type="submit" value="Submit" />
</form></center>
</div>
<div id="backgroundPopup"></div> 
```

接收表单值的页面应该是这样的；

```
<?php
session_start();

$name = $_POST['student_name'];
$stud_id = $_POST['stud_id'];
$room_id = isset($_SESSION['roomno']) ? $_SESSION['roomno'] : $_POST['room_id']; // here you set the value according to an already present existance of a session or not
$chair_num = isset($_SESSION['chairnum']) ? $_SESSION['chairnum'] : $_POST['chair_num']; // the same as above but this time for the chair number

mysql_connect("localhost", "root", "") or die (mysql_error());
mysql_select_db('seat_reservation') or die (mysql_error());
// below sql query is corrected by changing the WHERE clause with COLUMNS
$query = mysql_query("INSERT INTO reservation COLUMNS (room_id, chair_number, chair_status, student_name, stud_id) VALUES ($room_id, $chair_num, 1, $name, $stud_id)");

if($query) //there was no $insert variable set. This condition would always return false because the sql query which you insert the values to the DB is assigned to $query, not $insert
    die ("Seat reserved! <br />Redirecting...<meta http-equiv='refresh' content=2;monica.php>");

else 
    die ("Try Again! <br />Redirecting...<meta http-equiv='refresh' content=2;monica.php>");
?> 
```

并且没有必要以这种方式使用任何 javascript onclick 事件。

# c++ - 如何从此源代码中删除所有空格字符

> ID：11764120
> 
> 赞同：-7
> 
> 时间：2012-08-01T17:04:22.783
> 
> 标签：c++, c

作为这个 c/c++ 代码：

```
typedef const char* LPSTR; 
```

我想删除所有空格字符。

我找到了两种方法来做到这一点：

```
typedef/**/const/**/char*LPSTR; // 1

#define o(s) s
o(typedef)o(const)char*LPSTR; // 2 
```

但我不想做任何新行和任何评论。

那么，有第三种方式吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T17:05:45.207

~~愚蠢的~~要求要求~~愚蠢的~~解决方案：

```
typedefconstchar*LPSTR; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:53:59.920

在某些*可以*有空格的地方：

```
#define typedef_const_char_ptr_LPSTR typedef const char* LPSTR 
```

如果您不能在其中包含带有宏的文件，恐怕我没有想法。无论哪种方式，我建议重新评估任何导致您要求没有空间的设计。

# java - 在 Android 应用程序中使用下载的 Java 类文件

> ID：11764122
> 
> 赞同：0
> 
> 时间：2012-08-01T17:04:27.620
> 
> 标签：java, android, apk

假设我们已经安装了一个 Android 应用程序。

是否可以通过网络下载 Java 类文件，或者从应用程序资源中获取它，然后使用此类提供的某些功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:07:20.883

也许您应该阅读Android 开发者网站上[的这篇博文。](http://android-developers.blogspot.com/2011/07/custom-class-loading-in-dalvik.html)

# c# - BlockingCollection 未按预期执行

> ID：11764123
> 
> 赞同：1
> 
> 时间：2012-08-01T17:04:35.513
> 
> 标签：c#, blockingcollection

我有一个调用`Func`后台线程传递的方法，称为`TaskSpin`. `DataGridView`这会根据在(DGV)中单击的站点一次执行一种方法，并且一次只能执行一种方法。所以我点击一个站点（DGV 中的一个纽扣电池），然后它在该站点上运行该方法。现在我有很多站点，不想点击等待数百次，而是想批量处理 DGV 中包含的所有站点。我不能使用直接循环来运行这些，即

```
foreach (DataGridViewRow row in this.DGV)
    TaskSpin(SomeMethod, SomeParameterArray); 
```

因为这几乎会立即返回给调用者，并将开始运行以下站点，这并不好，因为他们使用共享文件。所以我需要一种方法来将站点排队以逐个执行。我决定使用 a `ConncurrentCollection - BlockingCollection`，但我被卡住了。在某些按钮单击事件中，我有

```
BlockingCollection<Action<object[]>> taskQueue = 
    new BlockingCollection<Action<object[]>>();
List<object[]> paramQueue = new List<object[]>();
foreach (DataGridViewRow row in this.DataGridViewDrg.Rows) 
{
    paramQueue.Add(DrgDataRowInfo(row.Index));
    Action<object[]> action = new Action<object[]>(AsyncMethod);
    taskQueue.Add(action);
}
int i = 0;
foreach (Action<object[]> action in taskQueue.GetConsumingEnumerable())
    action(paramQueue[i]); 
```

其中`AsyncMethod`使用 TPL 在后台线程上启动了一个 set 方法。

```
private void AsyncMethod(object[] siteInfo)
{
    TaskSpin(BuildDataForSite, siteInfo);
} 
```

我的期望是这将一个`Action<object[]>`接一个地运行。但这只是冻结了我的申请。我在这里做错了什么？

谢谢你的时间。

**编辑。任务旋转**

```
public TaskSpin(Func asyncMethod, object[] methodParameters)
{
    ...
    asyncTask = Task.Factory.StartNew<bool>(() => 
        asyncMethod(uiScheduler, methodParameters));

    asyncTask.ContinueWith(task =>
    {
        ...
        // Finish the processing update UI etc.
        ...
    }
    ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:10:52.763

编码

```
foreach (Action<object[]> action in taskQueue.GetConsumingEnumerable())
    action(paramQueue[i]); 
```

正在您的 UI 线程上运行，从而导致阻塞。

您的要求似乎是您想在非 UI 线程上一次处理一个事物列表。要使用您当前的代码和最少的修改来实现这一点，您可以将上面的*foreach*移动到一个单独的线程中，例如通过创建一个运行*foreach*的任务。

```
Task.Factory.StartNew(() =>
{
    foreach (Action<object[]> action in taskQueue.GetConsumingEnumerable())
        action(paramQueue[i]);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-27T11:49:29.357

虽然我迟到了

我的解决方案是使用`Task.Run`而不是`Task.Factory.StartNew`

```
Task.Run(() =>
{
    foreach (Action<object[]> action in taskQueue.GetConsumingEnumerable())
        action(paramQueue[i]);
}); 
```

我根据这篇[文章发布这个答案](https://blog.stephencleary.com/2013/08/startnew-is-dangerous.html)

我也在使用`Task.Factory.StartNew`，但有时它会在我的 UI 线程上运行，导致我的应用程序挂起。`Task.Run`解决了我的问题。

# php - PHP DateTime 类不起作用

> ID：11764129
> 
> 赞同：2
> 
> 时间：2012-08-01T17:05:10.743
> 
> 标签：php, drupal

我想知道 DateTime 类是否无法工作或不受我的服务器支持的任何原因。我的规格是：

1.  PHP 5.3.10
2.  Drupal 7.12

我不确定它是 Drupal 还是什么。如果有错误，我不知道在哪里看，这让我很烦恼，应该是核心的一部分的东西不是。一个简单的脚本，如：

```
<?php
    $d = new DateTime();
    echo $d->format("Y-m-d");
?> 
```

适用于我的本地 MAMP 测试服务器，但不适用于远程服务器。那么它是某种 Drupal 恶作剧还是可能在 PHP 中被关闭/排除的东西？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:13:38.090

根据[http://php.net/manual/en/datetime.installation.php](http://php.net/manual/en/datetime.installation.php)：

> 无需安装即可使用这些功能；它们是 PHP 核心的一部分。

有一些 php.ini 设置可能*会对*DateTime 操作产生影响，但我不确定它们是否会使它根本不起作用：http: [//php.net/manual/en/datetime.configuration。 php](http://php.net/manual/en/datetime.configuration.php)

根据最近的评论，您可以使用上一个链接中的设置在 php.ini 中设置 TimeZone，或者您可以在运行时使用`date_default_timezone_set()`接受可以在[此列表](http://www.php.net/manual/en/timezones.php)中找到的时区标识符的函数来执行此操作。

更多关于函数： http: [//php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)

# ios - 使用故事板将信息从一个视图控制器传递到下一个视图控制器

> ID：11764131
> 
> 赞同：0
> 
> 时间：2012-08-01T17:05:21.103
> 
> 标签：ios, uistoryboard

我无法通过情节提要找到有关此的任何信息。我已经看到了一些写出所有代码的方法，我可以这样做，但我现在正在尝试学习故事板，所以......我在这里。

我正在我的第一个视图控制器上创建一个表单。两个 UITextFields，两个我用作复选框的 UIButtons，以及一个我想挂接到第二个 ViewController 的 segue 的 UIButton。我遇到的问题是我需要将来自第一个视图控制器的信息发送到第二个视图控制器，因为这是实际使用信息的地方。我不知道如何做到这一点，我越想越开始认为我这样做完全错误，我需要停下来寻求帮助；）

![我的故事板截图](../Images/c52c14e020a652567dda14718fcd40e3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:10:31.217

您在以下位置配置 segue 的目标视图控制器`prepareForSegue`：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{    
    if ([[segue identifier] isEqualToString:@"YourSegueID"]) {        
        MyViewController* vc = segue.destinationViewController;
        //configure view controller here
        vc.detailData = someObject;
    }
} 
```

# git - 为什么我必须 --force 我的 git 提交

> ID：11764133
> 
> 赞同：2
> 
> 时间：2012-08-01T17:05:38.867
> 
> 标签：git, git-push

我设置了几个 git 存储库，每次我设置一个新存储库并进行第一次提交和推送时，此命令都会失败`git push origin master`，并且我会收到一些关于它如何无法推送一些 refs 的错误。

```
----@--------- /c/git/repo/---- (master)
$ git push origin master
--------------------------------
--------------------------------
To -----------------------------
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'https://github.com/-----/----.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

但是，如果我这样做了`git push --force origin master`，为什么会这样，为什么我每次都必须这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T17:15:03.973

这个错误...

```
 ! [rejected]        master -> master (non-fast-forward) 
```

...表示远程存储库具有尚未在您的存储库中的更改。`.gitignore`如果您在 GitHub 上创建存储库，如果您要求 GitHub 使用或`README`文件预先填充您的存储库，则可以创建一个非空存储库。

无论如何，当您看到此错误时，而不是使用`--force`（这将覆盖远程存储库中的任何更改），您可能应该只运行：

```
git pull 
```

这将降低任何更改并将它们合并到您的本地存储库中，此时 a`git push`应该可以正常工作。

如果您不确定那里有什么，您还可以将远程存储库克隆到另一个目录并检查它的内容。

# javascript - SyntaxHighlighter 和固定元素的溢出问题

> ID：11764134
> 
> 赞同：1
> 
> 时间：2012-08-01T17:05:40.710
> 
> 标签：javascript, css, syntax-highlighting, syntaxhighlighter

我正在开发的页面上有一个固定元素。它包含一个徽标和几个导航链接。

在上述网站上，我需要展示各种语言的代码片段。我正在使用 Alex Gorbatchev 的 SyntaxHighlighter 为语法着色。问题是，样式代码流过我的固定元素。

这是它的样子： ![在此处输入图像描述](../Images/03b4fabf72425e72a6c86ba52f22c076.png)

[这是关于 JSFiddle](http://jsfiddle.net/nySGp/2/)的一个非常简化的示例

看来罪魁祸首是`shCore.css`。当我删除它时，溢出消失了。不幸的是，它的删除也会导致行号与其相应的代码行不同步。

我已经开始摆弄文件中的 CSS 以及我自己的样式表。我已经在 SyntaxHighlighter 生成的元素和我自己的元素上尝试了各种组合`overflow`和`float`值，但似乎没有任何效果。

我知道随附的样式表非常庞大，搜索它们以查找错误是一项乏味的工作，但我无法让它变得更简单。我已经研究这个愚蠢的问题几个小时了，所以我决定在这里问一个问题。

任何善良而无聊的灵魂可以帮助我吗？以前有人用 SyntaxHighlighter 遇到过这种问题吗？如果您认为这个问题不够简洁，请不要投票删除它，因为我会在解决问题后自己发布答案。这似乎是任何人都容易遇到的事情。

我也很高兴收到任何**关于哪些 CSS 属性会导致这种行为的评论。**也许我的`overflow`猜测很离谱。

或者改变语法着色库可能是一个很好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:21:58.257

一位有几年前端经验的同事帮助我解决了这个问题。我被难住了，看看它是多么简单。

我必须做的是`z-index`向我的固定元素添加一个属性，以有效地将其移动到前台。

这是一个[关于 JSFiddle 的工作示例](http://jsfiddle.net/nySGp/3/)

# javascript - 遍历嵌套对象/数组

> ID：11764142
> 
> 赞同：1
> 
> 时间：2012-08-01T17:06:04.453
> 
> 标签：javascript, loops, yui3

我正在尝试遍历可以具有多个数组级别的对象。

例如。

我开始：

```
var htmlString = {
    "div": [{
        "attributes": {
            "class": "myDivClass"
        },
        "p": [{
            "attributes": {
                "class": "myPClass"
            }
        }]
    }]
}; 
```

现在让我们添加其他内容：

```
var htmlString = {
    "div": [{
        "attributes": {
            "class": "myDivClass"
        },
        "p": [{
            "attributes": {
                "class": "myPClass"
            },
            "span": [{
                "attributes": {
                    "class": "mySpanClass"
                }
            }]
        }]
    }]
}; 
```

我正在处理的代码将具有与以下相同的形状：

```
var childNode = document.createElement("myChildElement");
for (key in value) {
    if (value.hasOwnProperty(key)) {
        if (key == "attributes") {
            childNode.setAttributes(myAttributes); // loop through attributes on the element
        }
        else {
            //the same code ad infinitum
            var childChildNode = document.createElement("myChildChildElement");
            // etc etc....
        }
    }
}
parentNode.appendChild(childNode); 
```

每个额外元素的规则是相同的，所以我应该能够以相同的方式为两段代码循环这个数据结构，我只是不确定如何，虽然我敢打赌有一个 while()在某处循环。谁能告诉我？

PS 原生 javascript，请不要使用 jQuery！（虽然，如果你有 YUI3 的答案，我会很感兴趣）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:37:10.383

```
var createTree = function (node, data) {
    for (var key in data) {
        if (data.hasOwnProperty(key)) {
            if (key == "attributes") {
                node.setAttributes(myAttributes); // loop through attributes on the element
            }
            else {
                for (var i = 0; i < data[key].length; ++i) {
                    var childNode = document.createElement(key);
                    createTree(childNode, data[key][i]);
                    node.appendChild(childNode);
                }
            }
        }
    }
}

createTree(parentNode, htmlString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T23:05:23.360

好的，Qnan 的代码需要稍作调整，因为它没有正确处理到达分支末尾的问题。一旦到了最后，就没有什么要检查的了，空值没有任何东西会导致错误。

我知道这是不好的做法，但为时已晚，我需要修复它，所以这是我的调整。

```
var createTree = function (node, data) {
    for (key in data) {
        if (data.hasOwnProperty(key)) {
            if (key == "attributes") {
                node.setAttributes(myAttributes); // loop through attributes on the element
            }
            else {
                try {
                    for (var i = 0; i < data[key].length; ++i) {
                        var childNode = document.createElement(key);
                        createTree(childNode, data[key][i]);
                        node.appendChild(childNode);
                    }
                }
                catch(error) {
                    console.log("there was an error");
                }
            }
        }
    }
}

createTree(parentNode, htmlString); 
```

是的，没错，我通过尝试/捕捉它来掩埋错误......然后什么也不做。不要在家里尝试这个孩子！

Qnan，再次非常感谢。

# solr - solr 分数文档，无论术语的频率如何，所有术语都相同

> ID：11764143
> 
> 赞同：2
> 
> 时间：2012-08-01T17:06:06.450
> 
> 标签：solr

我对如何从 solr 排序返回结果有一个要求。在高层次上，它们应该如下所示：

*   对按日期排序的子集 1 字段的完全匹配
*   对按日期排序的子集 2 字段的完全匹配
*   按日期排序的子集 1 字段的部分匹配
*   按日期排序的子集 2 字段的部分匹配
*   对按日期排序的子集 1 字段的模糊匹配
*   对按日期排序的子集 2 字段的模糊匹配

目前我正在排序 solr 分数然后日期。当我查询 solr 时，我使用了一个 boost 函数，它对旧文档进行反向提升，因此它们被向下移动，而新文档也“浮动”到顶部，并且我正在提升适当的字段，以便我得到精确、部分和以正确的顺序进行模糊匹配。这让我大部分时间都在那里。

现在是棘手的部分。该要求规定，如果我搜索“red ford truck”之类的内容，则包含“red ford truck”的文档，无论术语的频率如何，都应该得到相同的评分。将较新的文档提升到顶部不会对分数产生足够的影响，从而无法将具有较高词频的文档向下推得足够远。

例如，假设我有 2 个文档：文档 1：

*   Field1：“红色的福特卡车真的很红，而且是一辆快车”
*   日期：2010 年 1 月 1 日

文件 2：

*   Field1：“红色福特卡车停在街上”
*   日期：1/10/2012

当我搜索“红色福特卡车”时，我希望文档 2 首先出现，因为它较新并且包含所有查询的术语。当前文档 1 将首先出现，因为它在 Field1 中有更多匹配项，并且反向提升不足以将其向下推。

所以现在我的问题是 solr 中是否有一个配置点来告诉它在查询的术语上只匹配一次文档？有点像 T-SQL 中的 Exists 。

如果有任何其他有用的信息，请告诉我，并提前感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:27:45.590

由于术语频率和字段长度，这些分数是不同的。

`omitNorms`似乎您正在寻找有关字段长度的内容。看看[这个](https://stackoverflow.com/questions/6830795/solr-what-are-the-benefits-of-length-normalization-omitnorms-false)先前的答案，并记住该字段的索引时间提升也将被禁用：

> 如果为 true，则省略与该字段相关的规范（这会禁用字段的长度规范化和索引时间提升，并节省一些内存）。

`omitTermFreqAndPositions`似乎您正在寻找关于术语频率的内容：

> 如果为 true，则忽略此字段的发布中的术语频率、位置和有效负载。对于不需要该信息的字段，这可以提高性能。它还减少了索引所需的存储空间。依赖于使用此选项在字段上发出的位置的查询将默默地找不到文档。对于所有非文本字段的字段，此属性默认为 true。

# c# - C# WCF 服务在重新连接后重新发送数据？这是什么属性？

> ID：11764146
> 
> 赞同：3
> 
> 时间：2012-08-01T17:06:23.550
> 
> 标签：c#, wcf, .net-4.0, configuration, reconnect

一点背景。我正在使用 .NET Framework 4 使用 C#。我的绑定目前`WsHttpBinding`没有安全性。我有一个 WCF 客户端，它每秒左右向 WCF 服务器报告一次心跳。这个心跳只是一个无符号整数。

我拉了几分钟网线，然后重新连接。所有丢失的心跳值都会涌入。什么 WCF 配置属性导致了这种情况发生？我希望这些消息会被丢弃，而我只会收到最新的心跳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:11:09.567

根据描述，这听起来可能是由于客户端中 WCF 服务的超时时间过长。

由于请求是异步的，并且您之前已经与服务器建立了连接，我预计这将是由于发送超时。

[这是关于WCF 中的超时及其默认值](http://blogs.msdn.com/b/hongmeig/archive/2010/03/06/timeouts-in-wcf-and-their-default-values.aspx?Redirected=true)的一个很好的 MSDN 博客条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:43:24.140

这很可能是因为您没有为服务指定[实例化模式](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.instancecontextmode.aspx)。

如果不是，那么它将默认为每个会话。这意味着在幕后 WCF 运行时正在实现一种称为[WS-ReliableMessaging](http://msdn.microsoft.com/en-us/library/aa480191.aspx)的 WS-* 规范，该规范试图保证一旦建立会话就可以在消费者和服务之间传递消息。

我想如果您等待很长时间（我认为默认为 10 分钟），您将开始看到丢失消息的证据。

或者，如果您使用每次调用实例模式配置您的服务，我想您不会看到这种行为。

# git - 如何让我的 git 集成万花筒显示所有即将提交的文件？

> ID：11764148
> 
> 赞同：6
> 
> 时间：2012-08-01T17:06:26.107
> 
> 标签：git, diff

我正在使用命令行 git 和[Kaleidoscope](http://www.kaleidoscopeapp.com/)来执行我的代码审查。当我将一个分支合并到另一个分支并输入

```
git difftool 
```

Kaleidoscope 仅显示“未暂存以进行提交”的更改，并且不显示“未合并的路径”或“更改为提交”。

命令行显示其余的东西。

知道为什么吗？

这是我的 ~/.gitconfig

```
[user]
        name = Dirty Henry
        email = dirty@henry.com
[core]
        excludesfile = /Users/dirty/.gitignore_global
        editor = mate
[difftool "Kaleidoscope"]
        cmd = ksdiff-wrapper git \"$LOCAL\" \"$REMOTE\"
[mergetool "sourcetree"]
        cmd = /Applications/SourceTree.app/Contents/Resources/opendiff-w.sh \"$LOCAL\" \"$REMOTE\" -ancestor \"$BASE\" -merge \"$MERGED\"
        trustExitCode = true
[diff]
        tool = Kaleidoscope
[credential]
        helper = osxkeychain
[difftool]
        prompt = false 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-01T19:00:45.683

简短的回答：你想在命令行上输入的是`git difftool HEAD`，而不是`git difftool`。

长答案：这是正常的 git 行为，如果您没有意识到发生了什么，这会令人沮丧。我不确定为什么命令行差异按预期工作，但两者都`git diff`应该`git difftool`按照 git 手册页类似地执行：

> git diff [--options] [--] [<path>...] 这个表格是用来查看你相对于索引（下一次提交的暂存区）所做的更改。换句话说，差异是你可以告诉 git 进一步添加到索引但你仍然没有。您可以使用 git-add(1) 暂存这些更改。

因此`git diff`，`git difftool`应该只向您展示**未分级的**更改。

如果您想查看**分阶段**的更改，您应该使用`git diff --cached`and`git difftool --cached`代替：

> git diff [--options] --cached [<commit>] [--] [<path>...] 此表单用于查看您为下一次提交相对于命名的 <commit> 进行的更改。通常，您希望与最新提交进行比较，因此如果您不提供 <commit>，则默认为 HEAD。如果 HEAD 不存在（例如未出生的分支）并且没有给出 <commit>，它会显示所有阶段性更改。--staged 是 --cached 的同义词。

最后，如果您想查看**暂存和未暂存**的更改，请使用第三种形式，`git diff HEAD`或者`git difftool HEAD`：

> git diff [--options] <commit> [--] [<path>...] 这个表格是用来查看你在工作树中相对于命名的<commit>的变化。您可以使用 HEAD 将其与最新提交进行比较，或者使用分支名称与不同分支的尖端进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:34:13.997

```
git difftool --staged 
```

会给你的。

`staged`在这种情况下是 的同义词`cached`，尽管我觉得`staged`更容易记住。

# javascript - translateZ 后鼠标向上/单击事件未触发

> ID：11764151
> 
> 赞同：3
> 
> 时间：2012-08-01T17:06:33.923
> 
> 标签：javascript, html, google-chrome, css

我有一个`a`标签，它链接到另一个页面。当用户单击此链接时，我有一个`mouseDown`事件触发，它对`translateZ`元素有一点影响。

奇怪的是，在 之后`translateZ`，鼠标向上或单击事件（依赖于 mouseup）不会触发。

似乎在 Firefox 中可以正常工作，但在 chrome 中不行。

这是一个显示我的问题的小 jsfiddle：http: [//jsfiddle.net/8LMzb/9/](http://jsfiddle.net/8LMzb/9/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T17:20:14.207

如果您给父对象一个正的 translateZ 大于受影响的子对象，则链接可能会再次开始工作，因为它们可能已被剪切到浏览器平面下方。有时这会导致整个翻译的 div 也消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T18:43:43.567

这似乎是`tile.style.webkitTransform = "perspective(800px) translateZ( -30px )";`MouseDown() 事件中的一个错误。
在`translateZ( -30px )` *（带有负像素数量的 NB 参数）*之后，元素没有响应。如果您尝试`translateZ( 30px )`一切都会正常工作。

[http://jsfiddle.net/8LMzb/142/](http://jsfiddle.net/8LMzb/142/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:58:10.767

由于这在 Firefox 中有效，我不太确定它是 chrome 错误，还是预期的行为......也不知道这个修复是否会继续工作。我所做的是，在触发 mousedown 事件之前不对变换应用任何透视，这以某种方式允许触发 mouseup 事件并链接工作。

相关小提琴：http: [//jsfiddle.net/8LMzb/152/](http://jsfiddle.net/8LMzb/152/)

# c - 我无法在“;”之前的代码预期表达式中解决此错误 令牌

> ID：11764153
> 
> 赞同：0
> 
> 时间：2012-08-01T17:06:35.163
> 
> 标签：c, syntax-error

嗨，我或多或少是 c 新手，当我学习如何使用结构和联合时，我收到了这个错误：“';'之前的预期表达式” 令牌”我一直在寻找错误很长时间，但我找不到它。我所要求的只是以下代码中需要的更正。

我在 mac os x 上使用 Gnu C 编译器

```
#include <stdio.h>;
#include <stdlib.h>;

struct lista;
struct elemento;
union member{
  int i;
  struct lista * n;};

struct elemento{
  union member * v;
  struct elemento * n;};

struct lista{
  int len;
  struct elemento * n;};

void append(struct lista* a , union member * e);

int main(void){
  return 0;}

void append(struct lista * a , union member * e){
  struct elemento ** j= ((*a).n)*;                    /* error here */
  int c;
  for(c=0;c<(*a).len;c++){
    j=((**j).n)* ;}                                   /* error here */
  (*a).len++;
  *j=(struct elemento *)malloc(sizeof(struct elemento));
  (**j).v=e;} 
```

它在第 24 行和第 28 行代码中引发了两个错误，请帮助我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T17:09:07.210

```
struct elemento ** j= ((*a).n)*;   // 24th line 
```

尝试这个 -

```
struct elemento ** j= & ((*a).n); // Note the removal of * and adding & symbol before. 
```

由于`j`是指向指针的指针，因此需要添加`&`符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:10:46.383

分号前面的那颗星是错误的。不确定您认为有什么好处，但您必须将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T17:10:49.577

你这里有问题

```
 for(c=0;c<(*a).len;c++) {
     j=((**j).n)* ;}
                ^
                ^ 
```

删除那个`*`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T17:08:29.317

```
void append(struct lista * a , union member * e){
  struct elemento ** j= ((*a).n)*; 
```

在分号之前有一个悬空的星号。需要删除它：

```
void append(struct lista * a , union member * e){
  struct elemento ** j= ((*a).n); 
```

这个问题的另一个发生是在 for 循环中（感谢 Dennis Meng）。

* * *

题外话：你不需要分号后`#include`：

```
#include <stdio.h>
#include <stdlib.h> 
```

# javascript - 对象的属性“$”

> ID：11764154
> 
> 赞同：1
> 
> 时间：2012-08-01T17:06:36.683
> 
> 标签：javascript, jquery, html, wordpress

我有一个 Wordpress 网站，它最终是一个流媒体广播网站。在标题上，我有一个脚本，该脚本从我的专用服务器的 CP 中提取流数据（如听众数量和当前正在播放）..（Centova Cast）

我在function.php中注册了脚本：

这是寄存器

> wp_register_script('streaminfo', 'http://94.23.250.14:2199/system/streaminfo.js',false,null); wp_enqueue_script('streaminfo');

这是供您查看的整个 jQuery 部分。

```
/* ------------------------------------

:: INITIATE JQUERY / STYLING

------------------------------------ */

function init_dynscripts() {
    if (!is_admin()) {

        if ( function_exists('bp_is_blog_page')) {
            if (!bp_is_blog_page()) {
                wp_enqueue_script( 'bp-js', BP_PLUGIN_URL . '/bp-themes/bp-default/_inc/global.js', array( 'jquery' ) );
            }
        }

        wp_register_style('northvantage-style', get_bloginfo('stylesheet_url'),false,null);
        wp_enqueue_style('northvantage-style');

        if(get_option('enable_responsive')!='disable') :

        wp_register_style('northvantage-responsive', get_template_directory_uri().'/stylesheets/responsive.css',false,null);
        wp_enqueue_style('northvantage-responsive');

        endif;  

        wp_enqueue_script('jquery-ui-core',false,null);
        wp_enqueue_script('jquery-ui-tabs',false,null);
        wp_enqueue_script("jquery-ui-accordion",false,null);
        wp_enqueue_script("swfobject",false,null);
        wp_deregister_script("jquery-effects-core");

        wp_deregister_script('libertas');   
        wp_register_script('libertas',get_template_directory_uri().'/js/nv-script.pack.js',false,null);
        wp_enqueue_script('libertas');  
        wp_register_script( ’streaminfo’, 'http://94.23.250.14:2199/system/streaminfo.js',false,null);
        wp_enqueue_script( ’streaminfo’ );
        wp_register_script( ’jpie’, get_template_directory_uri().'/js/jpie.js',false,null);
        wp_enqueue_script( ’jpie’ );
        wp_register_style('jpiestyle', get_template_directory_uri().'/jpie.css',false,null);
        wp_enqueue_style('jpiestyle');

        if(get_option('jwplayer_js')) { // Check jw player javascript file is present

        $NV_jwplayer_js = get_option('jwplayer_js');

        wp_deregister_script( 'jw-player' );    
        wp_register_script( 'jw-player', $NV_jwplayer_js,false,null);
        wp_enqueue_script( 'jw-player' );       
        }
    }
}    
add_action('init', 'init_dynscripts',100);

function _remove_script_version( $src ){ // remove script version
    $parts = explode( '?', $src );
    return $parts[0];
}
add_filter( 'script_loader_src', '_remove_script_version', 15, 1 );
add_filter( 'style_loader_src', '_remove_script_version', 15, 1 ); 
```

看来我在 streaminfo.js 和我的网站之间存在冲突。元素检查给出：

> 未捕获的类型错误：对象 [object Window] 的属性“$”不是函数

简而言之……我尝试使用该文件的所有操作都以错误告终。

我尝试将文件中的每个 $ 符号更改为 jQuery，它消除了冲突，但与其他文件产生了冲突。

我尝试添加

> jQuery（文档）.ready（函数（$）{

到文件的头部，但它破坏了 CP 上的其他元素。

最终我运行了一个简单的测试并创建了一个只有这段代码的网页：

```
<html>
<body>
<span id="cc_strinfo_title_tranceilfm" class="cc_streaminfo"></span>
<script language="javascript" type="text/javascript" src="http://94.23.250.14:2199/system/streaminfo.js"></script>
</body>
</html> 
```

并且页面没有返回任何错误。（我确实包含了 google jQuery 文件的路径）

Wordpress 中的某些东西弄乱了 jQuery 插件？或者我的代码中缺少某些字符串？

> www.tranceil.fm

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T17:08:54.617

尝试`jQuery.noConflict()`在文档顶部添加。准备好。这将取消绑定`$`变量，从而消除您的冲突。

为了回应我们在评论中的讨论，并帮助其他看到这个问题的人，这里有一些概述：

**jQuery 和 jQuery.noConflicts() 是如何工作的：**

当您加载 jQuery 库时，`jQuery`会创建一个名为的变量，它代表“jQuery”函数。还创建了一个`jQuery`名为的别名。`$`

无论出于何种原因，其他几个 javascript 库都会更改`$`别名以表示它们自己的函数。发生这种情况时，您就会发生冲突，因为两个不同的事物试图控制该`$`变量。jQuery.noConflict() 所做的是`$`与取消关联`jQuery`，允许任何其他尝试`$`使用的东西自由使用它。

问题是现在`$`不引用`jQuery`，所以在任何你想访问 jQuery 对象的地方，你都需要使用`jQuery`而不是`$`.

# html - 如何将此导航栏扩展到页面之外？

> ID：11764155
> 
> 赞同：0
> 
> 时间：2012-08-01T17:06:59.220
> 
> 标签：html, css

我有一个 css 导航栏，我想从网页的两侧延伸出来。现在它的宽度非常小，似乎无论我玩多少比例都没有改变。有人可以帮我吗？我对网页设计比较陌生。我将发布我的 CSS 和 HTML

CSS：

```
/* Links */

.menu li a {
    display: block;
    padding: 0 14px;
    margin: 6px 0;
    line-height: 28px;
    text-decoration: none;

    border-left: 1px solid #4075a6;
    border-right: 1px solid #4075a6;

    font-family: Archer,Helvetica, Arial, sans-serif;
    font-weight: light;
    font-size: 13px;

    color: white;
    text-shadow: 0px 0px 0px rgba(0,0,0,.6);

    -webkit-transition: color .2s ease-in-out;
    -moz-transition: color .2s ease-in-out;
    -o-transition: color .2s ease-in-out;
    -ms-transition: color .2s ease-in-out;
    transition: color .2s ease-in-out;
}

.menu li:first-child a { border-left: none; }
.menu li:last-child a{ border-right: none; }

.menu li:hover > a { color: #b8ccdc; }

/* Sub Menu */

.menu ul {
    position: absolute;
    top: 40px;
    left: 0;
    opacity: 0;
    background: #195892;
    -webkit-border-radius: 0 0 5px 5px;
    -moz-border-radius: 0 0 5px 5px;
    border-radius: 0 0 5px 5px;

    -webkit-transition: opacity .25s ease .1s;
    -moz-transition: opacity .25s ease .1s;
    -o-transition: opacity .25s ease .1s;
    -ms-transition: opacity .25s ease .1s;
    transition: opacity .25s ease .1s;
    width: 101px;
}

.menu li:hover > ul { opacity: 1; }

.menu ul li {
    height: 0;
    overflow: hidden;
    padding: 0;

    -webkit-transition: height .25s ease .1s;
    -moz-transition: height .25s ease .1s;
    -o-transition: height .25s ease .1s;
    -ms-transition: height .25s ease .1s;
    transition: height .25s ease .1s;
}

.menu li:hover > ul li {
    height: 36px;
    overflow: visible;
    padding: 0;
}

.menu ul li a {
    width: 100px;
    padding: 0px 0px 0px 0px;
    margin: 0;

    border: none;
    border-bottom: 1px solid #353539;
}

.menu ul li:last-child a {
    border: none;
    color: #195892;
} 
```

HTML：

```
<ul class="menu">
    <li><a href="#">Home</a></li>
    <li><a href="#">Developements</a></li>
    <li><a href="#">Condominiums</a>
    <ul>
        <li><a href="#" class="documents">Documents</a></li>
        <li><a href="#" class="messages">Messages</a></li>
        <li><a href="#" class="signout">Sign Out</a></li>
    </ul>
    </li>
    <li><a href="#">Video Tours</a></li>
    <li><a href="#">Contact </a></li>
</ul>
<!-- end .menu --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:33:58.053

我需要将我的 .menu 更改为 100% 宽度并添加 position: absolute; 右：0；左：0；这非常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:16:51.167

您需要将 UL 上的宽度设置为所需的宽度。我认为 100% 对你有用，因为它会从包裹它的容器的边缘到边缘。

我建议在 UL 和 LI 上放置背景颜色，以便您可以轻松查看它们的开始和结束位置，然后在将它们放置在您想要的位置后将其移除。

# php - 使用 phpMailer 和 PHP 从表单发送文件附件

> ID：11764156
> 
> 赞同：76
> 
> 时间：2012-08-01T17:07:02.080
> 
> 标签：php, file-upload, phpmailer, email-attachments

我有一个`example.com/contact-us.php`看起来像这样的表格（简化）：

```
<form method="post" action="process.php" enctype="multipart/form-data">
  <input type="file" name="uploaded_file" id="uploaded_file" />
  <input type="hidden" name="MAX_FILE_SIZE" value="10000000" />
</form> 
```

在我的`process.php`文件中，我使用以下代码`PHPMailer()`发送电子邮件：

```
require("phpmailer.php");

$mail = new PHPMailer();

$mail->From     = me@example.com;
$mail->FromName = My name;
$mail->AddAddress(me@example.com,"John Doe");

$mail->WordWrap = 50;
$mail->IsHTML(true);

$mail->Subject  =  "Contact Form Submitted";
$mail->Body     =  "This is the body of the message."; 
```

电子邮件正确发送正文，但没有`uploaded_file`.

**我的问题**

我需要将`uploaded_file`表单中的文件附加到电子邮件中并发送。`process.php`在脚本通过电子邮件发送文件后，我不关心保存文件。

我知道我需要在`AddAttachment();`某处添加（我假设在该`Body`行下方）以发送附件。但...

1.  我在文件顶部放什么`process.php`来拉入文件`uploaded_file`？喜欢`$_FILES['uploaded_file']`从contact-us.php 页面中提取文件的东西吗？
2.  文件附在里面`AddAttachment();`并与电子邮件一起发送，这段代码需要放在哪里？

请帮助并提供代码！谢谢！

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-08-01T17:12:21.987

尝试：

```
if (isset($_FILES['uploaded_file']) &&
    $_FILES['uploaded_file']['error'] == UPLOAD_ERR_OK) {
    $mail->AddAttachment($_FILES['uploaded_file']['tmp_name'],
                         $_FILES['uploaded_file']['name']);
} 
```

基本示例也可以在[这里](https://code.google.com/a/apache-extras.org/p/phpmailer/wiki/AdvancedMail)找到。

的函数定义为`AddAttachment`：

```
public function AddAttachment($path,
                              $name = '',
                              $encoding = 'base64',
                              $type = 'application/octet-stream') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-15T19:07:49.650

# 无法从客户端 PC 附加文件（上传）

在 HTML 表单中，我没有添加以下行，所以没有附件：

enctype="多部分/表单数据"

在表格中添加上述行（如下）后，附件就完美了。

```
<form id="form1" name="form1" method="post" action="form_phpm_mailer.php"  enctype="multipart/form-data"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-02T10:50:11.503

此代码帮助我发送附件....

```
$mail->AddAttachment($_FILES['file']['tmp_name'], $_FILES['file']['name']); 
```

用上面的代码替换您的 AddAttachment(...) 代码

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-26T11:33:38.870

使用此代码在 phpmailer 中使用 html 表单发送带有上传文件选项的附件

```
 <form method="post" action="" enctype="multipart/form-data">

                    <input type="text" name="name" placeholder="Your Name *">
                    <input type="email" name="email" placeholder="Email *">
                    <textarea name="msg" placeholder="Your Message"></textarea>

                    <input type="hidden" name="MAX_FILE_SIZE" value="30000" />
                    <input type="file" name="userfile"  />

                <input name="contact" type="submit" value="Submit Enquiry" />
   </form>

    <?php

        if(isset($_POST["contact"]))
        {

            /////File Upload

            // In PHP versions earlier than 4.1.0, $HTTP_POST_FILES should be used instead
            // of $_FILES.

            $uploaddir = 'uploads/';
            $uploadfile = $uploaddir . basename($_FILES['userfile']['name']);

            echo '<pre>';
            if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
                echo "File is valid, and was successfully uploaded.\n";
            } else {
                echo "Possible invalid file upload !\n";
            }

            echo 'Here is some more debugging info:';
            print_r($_FILES);

            print "</pre>";

            ////// Email

            require_once("class.phpmailer.php");
            require_once("class.smtp.php");

            $mail_body = array($_POST['name'], $_POST['email'] , $_POST['msg']);
            $new_body = "Name: " . $mail_body[0] . ", Email " . $mail_body[1] . " Description: " . $mail_body[2];

            $d=strtotime("today"); 

            $subj = 'New enquiry '. date("Y-m-d h:i:sa", $d);

            $mail = new PHPMailer(); // create a new object

            //$mail->IsSMTP(); // enable SMTP
            $mail->SMTPDebug = 1; // debugging: 1 = errors and messages, 2 = messages only ,false = Disable 
            $mail->Host = "mail.yourhost.com";
            $mail->Port = '465';
            $mail->SMTPAuth = true; // enable 
            $mail->SMTPSecure = true;
            $mail->IsHTML(true);
            $mail->Username = "admin@domain.net"; //from@domainname.com
            $mail->Password = "password";
            $mail->SetFrom("admin@domain.net", "Your Website Name");
            $mail->Subject = $subj;
            $mail->Body    = $new_body;

            $mail->AddAttachment($uploadfile);

            $mail->AltBody = 'Upload';
            $mail->AddAddress("recipient@domain.com");
             if(!$mail->Send())
                {
                echo "Mailer Error: " . $mail->ErrorInfo;
                }
                else
                {

                echo '<p>       Success              </p> ';

                }

        }

?> 
```

使用此[链接](http://php.net/manual/en/features.file-upload.post-method.php)作为参考。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-08T22:49:40.977

这将完美地工作

```
 <form method='post' enctype="multipart/form-data">
    <input type='file' name='uploaded_file' id='uploaded_file' multiple='multiple' />
    <input type='submit' name='upload'/> 
    </form>

    <?php
           if(isset($_POST['upload']))
        {
             if (isset($_FILES['uploaded_file']) && $_FILES['uploaded_file']['error'] == UPLOAD_ERR_OK)
                {
                     if (array_key_exists('uploaded_file', $_FILES))
                        { 
                            $mail->Subject = "My Subject";
                            $mail->Body = 'This is the body';
                            $uploadfile = tempnam(sys_get_temp_dir(), sha1($_FILES['uploaded_file']['name']));
                        if (move_uploaded_file($_FILES['uploaded_file']['tmp_name'], $uploadfile))
                             $mail->addAttachment($uploadfile,$_FILES['uploaded_file']['name']); 
                            $mail->send();
                            echo 'Message has been sent';
                        }       
                else
                    echo "The file is not uploaded. please try again.";
                }
                else
                    echo "The file is not uploaded. please try again";
        }
    ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T17:13:45.813

您将使用`$_FILES['uploaded_file']['tmp_name']`，这是 PHP 存储上传文件的路径（它是一个临时文件，在脚本结束时由 PHP 自动删除，除非您已将其移动/复制到其他地方）。

假设您的客户端表单和服务器端上传设置是正确的，那么您无需做任何事情来“拉入”上传。它会神奇地在那个 tmp_name 路径中可用。

请注意，您必须验证上传是否实际成功，例如

```
if ($_FILES['uploaded_file']['error'] === UPLOAD_ERR_OK) {
    ... attach file to email ...
} 
```

否则，您可能会尝试使用损坏/部分/不存在的文件制作附件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-16T11:04:10.540

嘿伙计们，下面的代码对我来说非常好。只需将 setFrom 和 addAddress 替换为您的偏好即可。

```
<?php
/**
 * PHPMailer simple file upload and send example.
 */
//Import the PHPMailer class into the global namespace
use PHPMailer\PHPMailer\PHPMailer;
use PHPMailer\PHPMailer\Exception;
$msg = '';
if (array_key_exists('userfile', $_FILES)) {
    // First handle the upload
    // Don't trust provided filename - same goes for MIME types
    // See http://php.net/manual/en/features.file-upload.php#114004 for more thorough upload validation
    $uploadfile = tempnam(sys_get_temp_dir(), hash('sha256', $_FILES['userfile']['name']));
    if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) 
    {
        // Upload handled successfully
        // Now create a message

        require 'vendor/autoload.php';
        $mail = new PHPMailer;
        $mail->setFrom('info@example.com', 'CV from Web site');
        $mail->addAddress('blabla@gmail.com', 'CV');
        $mail->Subject = 'PHPMailer file sender';
        $mail->Body = 'My message body';

        $filename = $_FILES["userfile"]["name"]; // add this line of code to auto pick the file name
        //$mail->addAttachment($uploadfile, 'My uploaded file'); use the one below instead

        $mail->addAttachment($uploadfile, $filename);
        if (!$mail->send()) 
        {
            $msg .= "Mailer Error: " . $mail->ErrorInfo;
        } 
        else 
        {
            $msg .= "Message sent!";
        }
    } 
        else 
        {
            $msg .= 'Failed to move file to ' . $uploadfile;
        }
}
?>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>PHPMailer Upload</title>
</head>
<body>
<?php if (empty($msg)) { ?>
    <form method="post" enctype="multipart/form-data">
        <input type="hidden" name="MAX_FILE_SIZE" value="4194304" />
        <input name="userfile" type="file">
        <input type="submit" value="Send File">
    </form>

<?php } else {
    echo $msg;
} ?>
</body>
</html> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-10T07:07:23.743

在我自己的情况下，我`serialize()`在表单上使用，因此文件没有被发送到 php。如果您使用的是 jquery，请使用`FormData()`. 例如

```
<form id='form'>
<input type='file' name='file' />
<input type='submit' />
</form> 
```

使用jQuery，

```
$('#form').submit(function (e) {
e.preventDefault();
var formData = new FormData(this); // grab all form contents including files
//you can then use formData and pass to ajax

}); 
```

# ruby-on-rails - Ctrl-c out of Guard 返回中断通知

> ID：11764158
> 
> 赞同：1
> 
> 时间：2012-08-01T17:07:08.430
> 
> 标签：ruby-on-rails, command-line, rspec, rspec-rails, guard

我运行警卫，它工作正常，但是当我 Ctrl-C 退出时，它给了我标准的 By bye... 然后是我粘贴在下面的输出。谁能解释发生了什么？似乎没有运行不正确，我只是想知道。

```
Users-MacBook-Pro:tasks user$ guard
Guard::RSpec is running, with RSpec 2!
Running all specs
No examples found.

Finished in 0.00007 seconds
0 examples, 0 failures
Bye bye...
/Library/Ruby/Gems/1.8/gems/listen-0.4.7/lib/listen/turnstile.rb:19:in `pop': Interrupt
    from /Library/Ruby/Gems/1.8/gems/listen-0.4.7/lib/listen/turnstile.rb:19:in `wait'
    from /Library/Ruby/Gems/1.8/gems/guard-1.2.3/lib/guard.rb:163:in `start'
    from /Library/Ruby/Gems/1.8/gems/guard-1.2.3/lib/guard/cli.rb:100:in `start'
    from /Library/Ruby/Gems/1.8/gems/thor-0.15.4/lib/thor/task.rb:27:in `send'
    from /Library/Ruby/Gems/1.8/gems/thor-0.15.4/lib/thor/task.rb:27:in `run'
    from /Library/Ruby/Gems/1.8/gems/thor-0.15.4/lib/thor/invocation.rb:120:in `invoke_task'
    from /Library/Ruby/Gems/1.8/gems/thor-0.15.4/lib/thor.rb:275:in `dispatch'
    from /Library/Ruby/Gems/1.8/gems/thor-0.15.4/lib/thor/base.rb:425:in `start'
    from /Library/Ruby/Gems/1.8/gems/guard-1.2.3/bin/guard:6
    from /usr/bin/guard:23:in `load'
    from /usr/bin/guard:23
Users-MacBook-Pro:tasks user$ 
```

# jquery - jquery循环动画

> ID：11764165
> 
> 赞同：2
> 
> 时间：2012-08-01T17:07:25.127
> 
> 标签：jquery, function, loops

我有这些我需要循环的脚本：

```
$(document).ready(function() {
    runIt();
})
function resets()
{
  $('.grower').removeAttr("style");
}

function runIt() 
    {
        $('.grower').animate({width: "30px",height: '30px', left: "-6", top: "-6", opacity:"0"}, 800, resets);
    } 
```

但是当我添加 runIt(); 在它内部，它可以循环，它循环但我的浏览器变为空白，我不会响应。我该怎么做才能循环播放该动画。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T17:15:46.517

无需不断地查询 DOM。将 存储`$('.grower')`在一个变量中：

```
$(document).ready(function() {
    var $grower = $('.grower');

    function runIt() {
        $grower.animate({
            width: "30px",
            height: '30px',
            left: "-6",
            top: "-6",
            opacity:"0"
        }, 800, function() {
            $grower.removeAttr("style");
            runIt();
        });
    }

    runIt();
}); 
```

这是小提琴：http: [//jsfiddle.net/jC8Js/](http://jsfiddle.net/jC8Js/)

* * *

**更新：**如果您希望它在每个周期之前暂停，请使用[计时器](https://developer.mozilla.org/en/DOM/window.setTimeout)：

```
setTimeout(runIt, 1000); 
```

这是小提琴：http: [//jsfiddle.net/jC8Js/1/](http://jsfiddle.net/jC8Js/1/)

* * *

或者，您可以使用[间隔计时器](https://developer.mozilla.org/en/DOM/window.setInterval)运行所有这些：

```
$(document).ready(function() {
    var $grower = $('.grower');

    setInterval(function() {
        $grower.animate({
            width: "30px",
            height: '30px',
            left: "-6",
            top: "-6",
            opacity:"0"
        }, 800, function() {
            $grower.removeAttr("style");
        });
    }, 1500);
});​ 
```

这是小提琴：http: [//jsfiddle.net/jC8Js/2/](http://jsfiddle.net/jC8Js/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:11:03.557

[http://jsfiddle.net/nUVbb/](http://jsfiddle.net/nUVbb/)

```
 $(document).ready(function() {
    runIt();
})
function resets()
{
    $('.grower').removeAttr("style");
    runIt();
}
function runIt() 
{
    $('.grower').animate({width: "30px",height: '30px', left: "-6", top: "-6", opacity:"0"}, 800, resets);
} 
```

# html - 从 excel 文件中提取的 HTML

> ID：11764171
> 
> 赞同：1
> 
> 时间：2012-08-01T17:07:55.623
> 
> 标签：html, excel

我想知道如果没有服务器端代码，这是否可能：我想制作一个 HTML 文件，加载时会从 Excel 电子表格中提取信息。我会用什么语言来做这件事？我不能使用像 PHP 这样的服务器端语言。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:39:25.307

这可能会对您有所帮助：http: [//www.codeproject.com/Questions/85672/Read-Excel-values-using-Javascript](http://www.codeproject.com/Questions/85672/Read-Excel-values-using-Javascript)，但您需要在您的计算机（以及运行您的程序的计算机）中安装 Excel。我的建议，使用服务器端代码（PHP 是一个很好的），你将能够使用这个不错的库： http: [//phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:17:31.383

XLS 是一种二进制专有格式。用 javascript 做到这一点几乎是不可能的。但是，使用 HTML5 文件 API，您可以读取其二进制内容，但为了解析和解释它，您需要了解 XLS 格式的规范。

如果有帮助请采纳！祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T17:26:22.000

您可以尝试考虑将其从 XLS 转换为 CSV，然后使用 JavaScript 来处理解析。

这个讨论也可能与您有关 - [JavaScript & CSV](https://stackoverflow.com/questions/8493195/how-can-i-parse-a-csv-string-with-javascript)

# html - 禁用文本区域和文本输入，同时保持一致的跨浏览器样式

> ID：11764174
> 
> 赞同：0
> 
> 时间：2012-08-01T17:08:01.383
> 
> 标签：html, css, internet-explorer, cross-browser

我希望禁用一些 html 控件，并且由于 IE 和 Firefox/Webkit 浏览器之间的差异而遇到跨浏览器问题。主要问题在以下行中很明显：

```
<input type="text" name="badIE" disabled="disabled" style="color:blue;" value="IE won't show this correctly" /> 
```

在 IE 中，上面的输入会有灰色文本，而在我测试过的所有其他浏览器中，文本都是蓝色的。看起来 IE 允许`disabled`文本输入字段优先于文本颜色的 CSS 规则。是否有任何既定的最佳实践或 IE CSS hack 来解决此类问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:21:41.990

根据此处赞成（但未接受）的[答案](https://stackoverflow.com/questions/602070/changing-font-colour-in-textboxes-in-ie-which-are-disabled)，您有点坚持使用“只读”。

只是出于好奇——你为什么要在一个你甚至不希望你的用户能够关注的文本区域中显示文本？在我看来，您最好在常规文本 HTML 元素（例如`<p>`）中显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:15:14.460

事实证明，解决这个问题的方法很少，但没有一个确切的答案。为了提供最完整的答案，这里列出了可能的解决方案。

1.  接受浏览器之间的差异并继续使用禁用的字段。这可能是*正确*的答案。正如[chipcullen](https://stackoverflow.com/users/1173898/chipcullen)在[他的评论](https://stackoverflow.com/users/1173898/chipcullen)中所建议的那样，几乎没有必要让所有浏览器看起来都相同。最好简单地接受它们之间的差异并与之合作。

2.  使用只读属性而不是禁用。这种方法的问题是用户仍然可以与只读控件交互。例如，用户可以专注于控件或在文本中间粘贴一个闪烁的光标。如果交互是一个主要问题，您总是可以将禁用的控件隐藏在一个不可见的元素后面，尽管该方法是在 hacky 方面。

3.  我选择的选项是用纯文本元素替换输入元素。尽管这种方法可能不像听起来那么简单。我的页面是交互式的，某些元素将根据客户端操作启用/禁用。为了处理过渡，我将以下 Javascript 放在一起（在[chipcullen 的](https://stackoverflow.com/users/1173898/chipcullen)建议和 jQuery 的帮助下）：

    ```
    function disabledToSpan() {
    $('input[type=text]:disabled, textarea:disabled').replaceWith(function () {
        return $('<span>' + $(this).val() + '</span>').attr('class',
            $(this).attr('class')).addClass('disabledTextInput');
        });
    } 
    ```

    总之，这将找到所有禁用的文本输入和文本区域，将它们切换到跨度，同时保留它们的值和类，最后添加一个 disabledTextInput 类来专门设置禁用元素的样式。

# intellij-idea - 如何为 IntelliJ IDEA 设置基于项目的环境变量？

> ID：11764176
> 
> 赞同：1
> 
> 时间：2012-08-01T17:08:01.857
> 
> 标签：intellij-idea

我确实有一个需要一些环境变量的基于 MAVEN 的 java 项目。

到目前为止，我使用了一个`setenv`bash 脚本来设置它们，并在项目根目录中添加了一些其他脚本来调用它并进行构建、测试......

问题是如何使用 IntelliJ IDEA 进行这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:53:53.617

尚不支持，请[投票支持此功能](http://youtrack.jetbrains.com/issue/IDEA-41050)。

# iphone - 如何在 iOS 中加密 mp3 文件

> ID：11764177
> 
> 赞同：0
> 
> 时间：2012-08-01T17:08:06.657
> 
> 标签：iphone, ios, cocoa-touch, encryption, avplayer

我有一个应用程序，它从我们的网络服务器下载 MP3 文件并将它们暂时存储在 NSData 对象中。然后将此对象写入存储在应用程序沙箱中的 /Library/Cache 文件夹中的 .mp3 文件。

当需要播放文件时，我将它加载到 AVPlayerItem 中，如下所示：

```
 NSString *filePath = [[NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) objectAtIndex:0]
                          stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.mp3", trackID]];

    NSURL *fileURL = [[NSURL alloc] initFileURLWithPath:filePath];
    self.trackPlayerItem = [[AVPlayerItem alloc] initWithURL:fileURL]; 
```

我认为继续将此项目加载到 AVPlayer 并播放它。

所以我的主要问题是：如何在这些 mp3 文件存储在磁盘上时对其进行加密，以确保它们不会被任何拥有越狱设备的人从文件系统中提取出来？

我已经看过 Stack Overflow 但找不到任何帮助。

希望有人可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:13:50.367

查看有关将[RSA](https://stackoverflow.com/questions/10072124/iphone-how-to-encrypt-nsdata-with-private-key-and-decrypt-with-public-key)加密/解密添加到`NSData`.

# spring - 无法使用 Cypher 删除节点

> ID：11764183
> 
> 赞同：0
> 
> 时间：2012-08-01T17:08:54.653
> 
> 标签：spring, graph, neo4j, cypher

我正在研究 Spring Data Neo4j 并使用 Cypher-Language 进行一些查询。工作正常这么久，但删除一个节点不起作用。

例如：

```
@Query("start u=node(5) delete u")
void deleteNode(); 
```

我使用依赖项

```
<dependency>
    <groupId>org.neo4j</groupId>
    <artifactId>neo4j-cypher</artifactId>
    <version>1.6.2</version>
</dependency>
<dependency>
    <groupId>org.neo4j</groupId>
    <artifactId>neo4j-kernel</artifactId>
    <version>1.6.2</version>
</dependency> 
<dependency>
    <groupId>org.springframework.data</groupId>
    <artifactId>spring-data-neo4j</artifactId>
    <version>2.0.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework.data</groupId>
    <artifactId>spring-data-neo4j-rest</artifactId>
    <version>2.0.1.RELEASE</version>
</dependency> 
```

我不能使用 Cypher 的 1.7.2 版本，因为它与 spring data neo4j 和内核 1.6 冲突。

有谁能够帮我？

我不想删除一个节点

```
repository.delete(5); 
```

因为我也想删除关系等等。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:15:28.720

我认为您应该删除与要删除的节点的关系。@Query("启动 u=node(5) 删除 u")

如果你想删除一个节点，你应该确认该节点与其他节点没有关系。请尝试以下代码：@Query("start u=node(5) match u-[r]-() delete u,r")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:15:10.953

有趣的想法，还没有尝试过 b/c SDN 仍然正式指向 Neo4j 1.7，但这很快就会改变。

为什么不能更新到 SDN 2.1.RC2 ？

SDN 2.0.1 不适用于 Neo4j 1.8，因为 Neo4j 中有 API 更改。

您还需要添加`@Transactional`到方法中。

# android - Android：阻止网址

> ID：11764184
> 
> 赞同：0
> 
> 时间：2012-08-01T17:09:01.430
> 
> 标签：android, parental-control

是否有可能创建一个阻止 URL（或列表或 URL）的 Android 应用程序/服务？

从我在 StackOverflow 和 Google 上搜索的内容来看，这似乎是不可能的： [https ://groups.google.com/forum/?fromgroups#!topic/android-security-discuss/ciepvxyn8UY](https://groups.google.com/forum/?fromgroups#!topic/android-security-discuss/ciepvxyn8UY)

但是，[Norton Safety Minder](https://play.google.com/store/apps/details?id=com.symantec.familysafety&hl=en)以某种方式“阻止”某些网站，尽管：

1.  它让页面在重定向用户之前完全加载（知道他们是如何做到的吗？）
2.  它似乎只适用于股票浏览器（任何想法为什么？也许他们正在监听浏览器书签历史的变化？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:33:22.693

> 是否有可能创建一个阻止 URL（或列表或 URL）的 Android 应用程序/服务？

不是真的，对于无根设备。使用 root，您可能能够装配一些 iptables 的东西来通过一些透明代理来路由。

> 它似乎只适用于股票浏览器（任何想法为什么？也许他们正在监听浏览器书签历史的变化？）

鉴于 Play 商店的一条评论（“进入隐身模式会绕过网络过滤器。请修复。”），这将是我的猜测。像这样的脚本小子技术永远不会可靠。

# svn - 提交时乌龟svn中的工作副本锁定错误

> ID：11764185
> 
> 赞同：94
> 
> 时间：2012-08-01T17:09:05.353
> 
> 标签：svn, tortoisesvn

每当我对工作副本进行更改时，我都会使用 Tortoise SVN 来更新和提交对服务器中存储库的更改。但是从几天开始，我无法提交更改，并且每当我尝试提交时都会收到以下错误。

```
Working copy 'C:\Program Files\EasyPHP\www\project\php' locked.
'C:\Program Files\EasyPHP\www\project' is already locked. 
```

我试图通过右键单击它并选择**Tortoise SVN > Release lock**来解锁文件夹，它说

> 没有什么可以解锁的。此工作副本中没有文件被锁定

可能是什么问题？

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2012-08-01T18:01:24.390

没问题...试试这个：

*   转到顶级 SVN 文件夹。
*   右键单击文件夹（包含您的 svn 文件）> TortoiseSVN > **CleanUp**

这肯定会解决你的问题。我做了很多时间...... :)

笔记。确保在“清理”对话框中选择了“解除锁定”选项。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-06-11T10:23:12.863

接受的答案对我不起作用。要解决这个问题，我必须右键单击被锁定的文件，选择`repo-browser`. 这将打开一个包含文件的弹出窗口，因为它们位于 SVN 服务器上。然后我右键单击锁定的文件并选择`break lock`.

当我关闭存储库浏览器时，我终于可以提交资源管理器了！

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-08-29T10:50:23.643

1.  右键单击文件夹。
2.  TortoiseSVN->检查修改。
3.  单击检查存储库按钮。
4.  **打破**所有返回文件的锁定。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-09T17:14:22.890

我也遇到了这个问题。对于某些人，我想指出，如果它被锁定，请与您的团队确认。团队中的某个人可能会因为他们正在处理某些事情而被锁定（这允许开发人员在没有其他人进入并尝试处理相同内容的情况下进行工作）。如果是这种情况，释放锁然后更新可能会丢失锁定它的开发人员的数据。

考虑到这一点，我担心“清理”选项可能会更改我的工作副本或从 Subversion 的 Repo 级别删除信息。事实并非如此。答案对我有用。当我在更新过程中单击取消时，我的被锁定了。最后我拉了一些我们的树枝，我不需要这些东西，所以我点击了取消。我的工作副本被锁定。当我使用命令“释放锁定”时，我找不到任何出现“锁定”的文档。这让我感到困惑，在快速阅读（和这个线程）后，我尝试了“清理”命令。清理后它解决了我的问题，并且没有任何东西被锁定。

来源：[http ://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-locking.html](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-locking.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-03T02:44:39.677

SVN中的“锁定”有多种含义，其中一些谈论“打破锁定”或队友持有锁定的答案没有使用原始问题的相关含义。这个问题涉及“工作副本锁定”（即它们完全位于您计算机上工作副本的本地，与您或持有文件锁定/签出的队友无关）。MicroEyes 接受的答案是指正确的用法，并且是发生这种情况时的最佳选择。

如果清理不起作用，您可能需要检查项目的新工作副本。如果您有任何修改过的、未提交的文件，您需要将它们复制到新的工作副本中，这样您就不会丢失所做的更改。

请参阅 Tortoise SVN 文档中的此页面，了解“锁”的三种用法：http: [//tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-locking.html](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-locking.html)

摘录（重点补充）：

> “锁”的三种含义</p>
> 
> 在本节中，以及本书几乎所有地方，“锁定”和“锁定”这两个词描述了用户之间相互排斥的机制，以避免冲突提交。不幸的是，Subversion 有时需要关注另外两种“锁”，因此本书也需要关注。
> 
> 第二个是**工作副本锁**，Subversion 内部使用它来防止在同一个工作副本上运行的多个 Subversion 客户端之间发生冲突。通常，每当像 update/commit/... 这样的命令由于错误而中断时，您都会获得这些锁。这些锁可以通过在工作副本上运行 cleanup 命令来移除，如“Cleanup”一节中所述。
> 
> ...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-02T15:37:15.147

我不知道哪个文件被锁定了，所以我为解决这个问题所做的事情是：

1.  转到最高级别的文件夹
2.  点击清理，也**从清理方法打勾 --> Break locks**

这对我有用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-06-10T20:40:43.560

我尝试了各种方法，包括对较低子目录的“清理”。最后，我尝试更新顶级文件夹。没有什么。然后我阅读了“清理顶层”提示。我试过了。清理部分成功，但锁仍然存在。我的解决方案是**回到顶层，清理，然后清理我可以深入到的每个红色（！）文件夹**。毕竟是“清理”，更新工作完美。“破锁”提示看起来也不错，但您的团队中的某个人*可能*对某事拥有合法的锁定。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-02T12:54:39.307

我设法将自己锁定在 svn 中的文件之外-不知道如何-但是当我尝试（重新）获得锁定时（乌龟正在显示文件的“获取锁定”选项），它抱怨说已经有了锁。我尝试删除文件并提交目录更改 - 结果相同。我尝试了 CleanUp（包括刷新覆盖），但也失败了。

解决方案是进入 Tortoise 存储库浏览器，找到文件并使用**断锁**功能。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-11T13:20:50.803

如果这（[https://stackoverflow.com/a/11764922/3045875](https://stackoverflow.com/a/11764922/3045875)）没有帮助：检查是否有其他 SVN 工具干扰并关闭该工具。我们只是在使用 TortoiseSVN 合并过程中苦苦挣扎了几个小时，并且遇到了几十个这样的锁定错误。最终我们发现 Matlabs SVN 集成存在干扰，关闭后一切都解决了。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-07-17T09:35:15.883

视窗解决方案：

[https://sourceforge.net/projects/win32svn/](https://sourceforge.net/projects/win32svn/)

1.下载它，然后将它添加到系统路径。

2.进入工作目录，在cmd中执行“svn clean”和“svn update”。

# cuda - 为 Visual Studio 2010 安装 nsight

> ID：11764187
> 
> 赞同：1
> 
> 时间：2012-08-01T17:09:07.567
> 
> 标签：cuda, nvidia, nsight

我正在使用 Visual Studio 2010 Express Edition，当我尝试安装 nsight 时，我在安装窗口中得到以下信息

> 将不会安装 Nsight for Visual Studio 2010
> 未满足要求

关于问题可能是什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:46:46.743

这是正确的。Nsight Visual Studio Edition 需要 Visual Studio 2008 或 2010 Professional（或更高版本）才能实现与 IDE 的深度集成。

# css - 无法让 CSS 下拉导航浏览内容

> ID：11764192
> 
> 赞同：2
> 
> 时间：2012-08-01T17:09:34.777
> 
> 标签：css, html, nav

好的，我已经尝试了我能想到的所有方法，但无法获得 z-index:1; 将我的下拉菜单放在内容和页面标题的顶部。有人可以看看并告诉我我有什么问题吗？

非常感谢（提前）

[http://jsfiddle.net/kreali/cDgH2/](http://jsfiddle.net/kreali/cDgH2/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T17:13:48.537

你`div.myMain`有`z-index:1000;`所以你`#nav_home`必须有更大的z-index！穿上。`z-index: 9999;`_ `#nav_home`这是编辑过的小提琴[http://jsfiddle.net/cDgH2/1/](http://jsfiddle.net/cDgH2/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:14:32.027

像这样？[http://jsfiddle.net/joplomacedo/cDgH2/2/](http://jsfiddle.net/joplomacedo/cDgH2/2/)

您将`z-index`on`div.myMain`设置为 1000，高于`z-index: 1`on `#nav_home`。

# java - 如何捕获特定异常

> ID：11764193
> 
> 赞同：1
> 
> 时间：2012-08-01T17:09:42.057
> 
> 标签：java, oracle, exception, jakarta-ee, exception-handling

如何捕获特定异常？例如，在 Java EE 项目`SQLException`中可能会出现。为了捕捉目的，我们写

```
catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

但这可能由于不同的原因而发生，例如

> ORA-00001: 违反唯一约束 (SYSTEM.PK_USERID)

或者

> 侦听器拒绝连接并出现以下错误：ORA-12505，TNS:listener 目前不知道连接描述符中给出的 SID 客户端使用的连接描述符是：localhost:1521:XE。

因此，如果我想具体捕获正在发生的异常，我该如何在代码中实现它？代码片段将非常有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:14:01.227

如果您在谈论`java.sql.SQLException`，请检查它的[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/sql/SQLException.html)，因为您可以单独捕获该异常的大量子类（以及**这些**子类的子类）。另外，如果您使用任何框架，它们有可能提供更多`SQLException`自己的子类。您可以在 IDE 中轻松检查这一点。在 Eclipse 中，它被称为*Type Hierarchy*视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:11:12.187

看起来您希望根据结果以不同方式响应异常`e.getMessage()`。为此，我建议在 catch 块中使用一系列 if 语句；你几乎肯定想要捕获异常（因为未捕获的异常很麻烦），所以除了它是异常的事实之外，你不需要决定是否捕获。

编辑：如果是您自己的方法抛出某些异常，您可以将 SQLException 子类化以表示原始类的不同变体，并单独捕获这些变体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T17:11:42.930

抓住，检查那是否是消息，如果不是，则重新抛出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T17:13:25.490

您给出的是各种消息`SQLException.` 如果您必须以不同方式处理它们，您可能必须使用 if 语句或 switch 语句`e.getMessage()`

# android - 无法解析 Landroid/support/v4/app/FragmentActivity 的超类

> ID：11764195
> 
> 赞同：7
> 
> 时间：2012-08-01T17:10:04.727
> 
> 标签：android, eclipse, actionbarsherlock

我有一个使用`WelcomeActivity`which extends的项目`FragmentActivity`。我使用支持库，文件夹`android-support-v4.jar`中也是如此。`libs`当我运行这个应用程序时，没有任何问题。

但是，我想将 ActionBarSherlock 添加到项目中。在我使用的ABS 项目`actionbarsherlock-plugin-maps-4.1.0.jar`和文件夹中。在我的应用程序项目中，我添加了 ABS 库，当我尝试运行该应用程序时，出现此错误：`android-support-v4-r6-googlemaps.jar``libs`

```
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added: Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat$AccessibilityServiceInfoStubImpl; 
```

为了解决这个问题，我`android-support-v4.jar`从我的应用程序`libs`文件夹中删除了 。当我现在启动我的应用程序时，应用程序会因以下 logcat 而崩溃：

```
08-01 18:59:11.182: W/dalvikvm(13338): Unable to resolve superclass of Landroid/support/v4/app/FragmentActivity; (620)
08-01 18:59:11.182: W/dalvikvm(13338): Link of class 'Landroid/support/v4/app/FragmentActivity;' failed
08-01 18:59:11.182: W/dalvikvm(13338): Unable to resolve superclass of Lcom/myapp/welcome/WelcomeActivity; (109)
08-01 18:59:11.182: W/dalvikvm(13338): Link of class 'Lcom/myapp/welcome/WelcomeActivity;' failed
08-01 18:59:11.182: E/dalvikvm(13338): Could not find class 'com.myapp.welcome.WelcomeActivity', referenced from method com.myapp.MainDispatcherActivity.startWelcomeActivity
08-01 18:59:11.182: W/dalvikvm(13338): VFY: unable to resolve const-class 690 (Lcom/myapp/welcome/WelcomeActivity;) in Lcom/myapp/MainDispatcherActivity;
08-01 18:59:11.182: D/dalvikvm(13338): VFY: replacing opcode 0x1c at 0x0002
08-01 18:59:11.182: D/dalvikvm(13338): VFY: dead code 0x0004-000b in Lcom/myapp/MainDispatcherActivity;.startWelcomeActivity ()V
08-01 18:59:11.182: D/AndroidRuntime(13338): Shutting down VM
08-01 18:59:11.182: W/dalvikvm(13338): threadid=1: thread exiting with uncaught exception (group=0x40015560)
08-01 18:59:11.182: E/AndroidRuntime(13338): FATAL EXCEPTION: main
08-01 18:59:11.182: E/AndroidRuntime(13338): java.lang.NoClassDefFoundError: com.myapp.welcome.WelcomeActivity
08-01 18:59:11.182: E/AndroidRuntime(13338):    at com.myapp.MainDispatcherActivity.startWelcomeActivity(MainDispatcherActivity.java:33)
08-01 18:59:11.182: E/AndroidRuntime(13338):    at com.myapp.MainDispatcherActivity.startProperActivity(MainDispatcherActivity.java:26)
08-01 18:59:11.182: E/AndroidRuntime(13338):    at com.myapp.MainDispatcherActivity.onCreate(MainDispatcherActivity.java:19)
08-01 18:59:11.182: E/AndroidRuntime(13338):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-01 18:59:11.182: E/AndroidRuntime(13338):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-01 18:59:11.182: E/AndroidRuntime(13338):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-01 18:59:11.182: E/AndroidRuntime(13338):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-01 18:59:11.182: E/AndroidRuntime(13338):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-01 18:59:11.182: E/AndroidRuntime(13338):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 18:59:11.182: E/AndroidRuntime(13338):    at android.os.Looper.loop(Looper.java:130)
08-01 18:59:11.182: E/AndroidRuntime(13338):    at android.app.ActivityThread.main(ActivityThread.java:3683)
08-01 18:59:11.182: E/AndroidRuntime(13338):    at java.lang.reflect.Method.invokeNative(Native Method)
08-01 18:59:11.182: E/AndroidRuntime(13338):    at java.lang.reflect.Method.invoke(Method.java:507)
08-01 18:59:11.182: E/AndroidRuntime(13338):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:862)
08-01 18:59:11.182: E/AndroidRuntime(13338):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)
08-01 18:59:11.182: E/AndroidRuntime(13338):    at dalvik.system.NativeStart.main(Native Method) 
```

我怎样才能解决这个问题？

**编辑**
我有另一个使用相同 ABS 库的项目，并且运行良好。我不知道我做了什么不同，或者哪些设置是错误的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T19:32:55.080

`<application>`似乎发生此错误是因为我在标记中的 AndroidManifest.xml 文件中没有这一行：

```
<uses-library android:name="com.google.android.maps" /> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-14T08:25:32.170

点击[这里](https://stackoverflow.com/questions/16663686/link-of-class-landroid-support-v4-app-watson-failed-unable-to-resolve-superc?answertab=votes#tab-top)

我认为在构建路径-> 配置构建路径-> 订购和导出处是同样的问题，需要检查“android-support-v4.jar”。

希望对你有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T17:44:27.947

您是否为 actionbarsherlock 库项目设置了编译器合规性？右键单击库项目，转到属性。在 java 编译器下，确保合规性设置为 1.6。我遇到了类似的问题，发现合规性设置为 1.5。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T17:21:12.647

我自己没有遇到过，但我认为[文档](http://actionbarsherlock.com/usage.html)说你需要`ActionBarSherlock`扩展`SherlockFragmentActivity`而不是`FragmentActivity`. 这可能不是问题，但它是*一个**问题*。

# python - 在 python 脚本中启动 Fab 文件

> ID：11764203
> 
> 赞同：4
> 
> 时间：2012-08-01T17:10:34.773
> 
> 标签：python, fabric

我有一个`fab`脚本，它工作正常。要启动它，我执行：

```
fab -H 192.168.xx.xx deployFiles deployConfiguration:'master',7 
```

`deployFiles`并且`deployConfiguration`都是我的功能`fabfile.py`。`'master'`并且`7`是我的参数`deployConfiguration`

我有另一个 Python 脚本，我想启动`fab`他里面的前一个命令。

如何使用 Python 脚本中的这些参数执行我的 fabfile？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T17:26:27.340

您只需导入它们，然后调用它们。使用设置上下文管理器或在 fabric.api.env 上设置相关设置

```
from fabric.context_managers import settings
from fabfile import deployFiles, deployConfiguration

with settings(host_string='user@192.168.xx.xx'):
    deployFiles()
    deployConfiguration('master', 7) 
```

# regex - 基本正则表达式 URL 匹配

> ID：11764211
> 
> 赞同：0
> 
> 时间：2012-08-01T17:11:06.897
> 
> 标签：regex, google-analytics

我正在学习正则表达式，但仍然无法真正理解它。但是，我需要为 Google Analytics 创建一个，并希望有人能提供帮助。

目前我的目标页面是头部匹配：

> /结帐/购物车？完成

和漏斗步骤：

> /结帐/一页

问题在于漏斗步骤可能是几个不同的略有不同的 URL。它可能是：

> /结帐/一页
> 
> /结帐/一页/索引
> 
> /结帐/多运输/登录
> 
> /结帐/多运输/计费
> 
> /结帐/多运输/运输

谁能告诉我将这 5 个潜在的 URL “合并”为同一事物的表达方式是什么？另外，如果潜在结果可能是以下示例之一，我会将我的目标网址更改为什么：

> /checkout/cart?complete=10000245 <-- （单笔订单）
> 
> /checkout/cart?complete=10000245,10000246,10000247 <--（多发订单）

我知道我必须先避开问号，但之后我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:18:48.580

对于您的目标页面，您需要使用`+ ?`and`*`运算符。

```
/checkout/cart\?complete(=(\d+,?)*)? 
```

对于漏斗，您需要`|`and`?`运算符

```
/checkout/(onepage(/index)?|multishipping/(login|billing|shipping)) 
```

# javascript - 在 UpdatePanel 中多次触发 pageLoad 事件

> ID：11764213
> 
> 赞同：1
> 
> 时间：2012-08-01T17:11:10.903
> 
> 标签：javascript, asp.net, postback

我有一个带有可编辑字段和几个必填字段的页面。问题是，每当我单击按钮激活可编辑字段以进行更改或应用/取消这些更改时，它都会导致我的 Javascript 再次触发，从而将另一个“必填字段”指示器附加到我的必填字段。我希望指示器仅在第一次加载时附加，并且不受界面上单击的按钮的影响。我怎样才能做到这一点？我相信我的 Javascript“if”语句只需要正确的条件，但不知道那可能是什么。我已经研究过了，结果很干。

这是我的标记。您可以放心地忽略整个`UpdatePanel`区域。您唯一需要知道的是，其中的按钮会导致每次单击时 Javascript 再次运行。

谢谢！;)

```
<asp:Content runat="server" ContentPlaceHolderID="HeadContent">
    <script type="text/javascript">
        function contentPageLoad() {
            // Add "Required Field" Indicators
            if (/*NEED CONDITION*/) {
                $("h4.required").append(" <span class=\"r\">*</span>");
            }
        }
    </script>
</asp:Content>
<asp:Content runat="server" ContentPlaceHolderID="MainContent">
    <!-- This is an updatable textfield. -->
    <!-- PROBLEM!: LinkButtons here cause the double firing of the javascript above. -->
    <!-- Remember that "ChildrenAsTriggers" defaults to True for UpdatePanel. -->
    <asp:UpdatePanel ID="RequestorNameUpdatePanel" runat="server">
    <ContentTemplate>
    <asp:MultiView ID="RequestorName_mv" runat="server" ActiveViewIndex="0">
        <asp:View ID="RequestorNameNormalView" runat="server">
            <div class="rightCol">
                <asp:LinkButton ID="editRequestorName" runat="server" />
                <h6 class="inlineH">Requestor's Name: <asp:Label ID="RequestorName_lbl" runat="server"></asp:Label></h6>
            </div>
        </asp:View>
        <asp:View ID="RequestorNameEditView" runat="server">
            <div class="rightCol">
                <asp:LinkButton ID="updateRequestorName" runat="server" />
                <asp:LinkButton ID="cancelRequestorName" runat="server" />
                <h6 class="inlineH">Requestor's Name: </h6>
                <asp:DropDownList ID="RequestorName_ddl" runat="server" ViewStateMode="Inherit" AutoPostBack="False" ></asp:DropDownList>
                <asp:TextBox ID="RequestorName_cb" runat="server" EnableViewState="True" AutoPostBack="False"></asp:TextBox>
                <button id="RequestorName_btn" type="button" class="toggle ui-button"></button>
            </div>
        </asp:View>
    </asp:MultiView>
    </ContentTemplate>
    </asp:UpdatePanel>

    <!-- "REQUIRED" indicator from javascript appended here -->
    <h4 class="required">First Name</h4>
    <asp:TextBox ID="tbFirstName" runat="server"></asp:TextBox>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:14:46.333

将此代码放在准备好的文档上。

```
$(document).ready(function() {
  $("h4.required").append(" <span class=\"r\">*</span>");
}); 
```

然后在您的更新面板加载时不会调用它。

# javascript - if 语句永远不会到达 else 部分

> ID：11764214
> 
> 赞同：-2
> 
> 时间：2012-08-01T17:11:11.100
> 
> 标签：javascript, jquery

我正在尝试使用以下代码更改按钮的文本。

```
// hide unavailable courses
$("#availability_button").click(function () {
    $(".availability_red").toggle();
        if ($(this).val('Show Unavailable')){
            $(this).html('Hide Unavailable');
        } else {
            $(this).html('Show Unavailable');
        }
}); 
```

按钮文本在我第一次使用时会更改，但不会再更改。不知道为什么会这样，我几乎已经达到了我的 JS 调试知识的极限。

我在其中设置了一个警报，并证明它永远不会到达 else 路径。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T17:13:03.437

它总是评估为，`true`因为`.val(val)`返回 jQuery 对象并且对象是真实的（`ToBoolean`给定`true`）值。

此外，您正在使用`.val()`，而您可能想检查`.html()`

尝试这个：

```
if ($(this).html() === 'Show Unavailable') {
    $(this).html('Hide Unavailable');
} else {
    $(this).html('Show Unavailable');
} 
```

演示[http://jsfiddle.net/jfetf/](http://jsfiddle.net/jfetf/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T17:13:17.347

`$(this).val("Show Unavailable")`正在设置值并返回一个对象，而不是检查相等性。

试试`$(this).val() == "Show Unavailable"`吧。它将获取当前值并将其与字符串进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T17:14:07.927

`$(this).val('Show Unavailable')`return`jQuery object`被解释为`true`.

另外 $(this).val('Show Unavailable') 将值设置为元素...

# c++ - OSX 升级后 QtCreator 构建系统损坏

> ID：11764216
> 
> 赞同：5
> 
> 时间：2012-08-01T17:11:12.320
> 
> 标签：c++, macos, qt-creator, osx-mountain-lion

我最近将我的 OSX 升级到山狮，因为我不能再使用 Qt Creator 编译我的项目。我收到一堆错误，如下所示：

`/Users/user/codes/lib/io/xdmfWriter.cpp:63: error: explicit instantiation of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]' but no definition available`

`/Users/user/codes/lib/io/xdmfWriter.cpp:-1: In instantiation of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]':`

`/Users/user/codes/lib/io/xdmfWriter.cpp:63: instantiated from here`

```
// xdmfWriter.cpp -- line 63:
gridName << xdmfName_ << "." << timeStep; 
```

`gridName`是一个`std::ostringstream`对象，`xdmfName_`是一个`std::string`声明为类的私有成员`xdmfWriter`并在类构造函数中初始化的变量。我以前没有这个问题......有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T10:14:57.740

这可以通过添加 a 来解决，`c_str()`如下所示：

```
gridName << xdmfName_.c_str() << "." << timeStep; 
```

然而，这不是一个永久的解决方案。

**更新：**我在[https://web.archive.org/web/20140809210004/http://qt-project.org/forums/viewthread/19106/P15找到了解决方案](https://web.archive.org/web/20140809210004/http://qt-project.org/forums/viewthread/19106/P15)

您需要更改`-mmacosx-version-min=10.5`为. 这是因为适用于 10.5 或 10.6 的 SDK 不包含在 Mountain Lion 和 XCode 4.4 中。`$QTDIR/mkspecs/common/g++-macx.conf``-mmacosx-version-min=10.7`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-27T17:32:48.537

我尝试更改 g++-macx.conf 文件，但我仍然收到错误。我发现使用：

```
QMAKE_CXXFLAGS += -fpermissive 
```

在我的专业档案上做了诀窍。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T17:41:41.627

听起来如果我使用`Clang`工具链（它强制`clang++`而不是`llvm-g++`）我没有这个问题......

# php - PHP Evernote SDK TTransportException

> ID：11764217
> 
> 赞同：0
> 
> 时间：2012-08-01T17:11:13.027
> 
> 标签：php, ubuntu, openssl, evernote

在 Ubuntu 12.04 中，Evernote PHP SDK 总是报错：

`Uncaught TTransportException: exception 'TTransportException' with message 'THttpClient: Could not connect to sandbox.evernote.com:443/edam/user'`

通过允许扩展，我能够在我的 WAMP 服务器中解决此问题`php_openssl.dll`。但是，在 Ubuntu 12.04 中没有成功`php_openssl.so`。

关于修复的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:27:05.990

我们知道我们的 SSL 端点存在问题，并希望尽快发布补丁：http: [//discussion.evernote.com/topic/26978-ssl-handshake-problems/](http://discussion.evernote.com/topic/26978-ssl-handshake-problems/)

# erlang - Erlang 与 Erlsom 和 DTD

> ID：11764218
> 
> 赞同：0
> 
> 时间：2012-08-01T17:11:22.627
> 
> 标签：erlang

![在此处输入图像描述](../Images/fb8e8c4a62fa1a9559530ed293996e5f.png)
我正在尝试使用 Erlsom 处理 1 GB XML 和 DTD 文件。问题是 parse_sax 抛出异常，因为它不能与 DTD 文件一起使用。基本上我不需要这些信息，所以我的问题是我如何告诉 sax_parser 忽略这个？甚至使用try and catch，当错误被捕获时，跳过文件中的这个位置并从那里继续。

这是一个例外：

```
** exception throw: {error,"Malformed: unknown reference: uuml"}
     in function  erlsom_sax_latin1:nowFinalyTranslate/3 (src/erlsom_sax_latin1.erl, line 1051)
     in call from erlsom_sax_latin1:translateReferenceNonCharacter/4 (src/erlsom_sax_latin1.erl, line 1024)
     in call from erlsom_sax_latin1:parseTextNoIgnore/3 (src/erlsom_sax_latin1.erl, line 922)
     in call from erlsom_sax_latin1:parseContent/2 (src/erlsom_sax_latin1.erl, line 898)
     in call from erlsom_sax_latin1:parse/2 (src/erlsom_sax_latin1.erl, line 172)
     in call from mapReduce:run/0 (/home/alon/workspace/mapReduce/src/mapReduce.erl, line 26)(mapReduce@alon-Vostro-3300)2> 
```

问题在于“uuml”，因为在 XML 文件中它出现在 ü

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:02:25.377

在 sax 解析器的限制下，在[ErlSom](http://orcas.googlecode.com/svn/trunk/src/erlsom/doc/erlsom-0.6.doc)文档中遇到了同样的错误：

> 它不支持实体，除了预定义的实体（< 等）和字符引用（&#nnn; 和 &#xhhh;）。

# r - R：从样本中拟合出一个 ARMA

> ID：11764219
> 
> 赞同：0
> 
> 时间：2012-08-01T17:11:27.450
> 
> 标签：r, statistics, modeling

在 R 中，在样本中校准 ARMA 模型的系数后，如何生成错误，这将导致在另一组样本外数据上使用相同的系数？

假设 insamp 包含我的样本系列，我通过键入以下内容校准 ARMA(5,2)：

```
 det_fit = arima(insamp , c(5,0,2)); 
```

现在我想计算 outsamp 系列的误差（我将系列任意分为两半 insamp 和 outsamp）。

如果模型是 AR(5)，这就是我所做的：

```
 detrended_outsamp_forecast_ts = det_fit$coef["intercept"] + 
    det_fit$coef["ar1"] * c(rep(NA,1), outsamp)  + 
    det_fit$coef["ar2"] * c(rep(NA,2), outsamp) +
    det_fit$coef["ar3"] * c(rep(NA,3), outsamp) +
    det_fit$coef["ar4"] * c(rep(NA,4), outsamp) +
    det_fit$coef["ar5"] * c(rep(NA,5), outsamp); 
```

这很长而且不是通用的。

有没有人写了一个函数来在任意时间序列上应用 ARMA 系数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T02:16:09.270

```
library(forecast)
det_fit <- Arima(insamp, order=c(5,0,2))
new_fit <- Arima(outsamp, model=det_fit) 
```

# mysql - 如何设计这个数据库

> ID：11764223
> 
> 赞同：4
> 
> 时间：2012-08-01T17:11:46.363
> 
> 标签：mysql, database

1.  我有一张供用户使用的桌子。每个用户都有他们教授的某些技能。例如：

    *   鲍勃可以教空手道
    *   路易丝可以教钢琴和编织
    *   罗杰可以教柔道、帆船和击剑

这就是我在数据库中完成的方式：

```
Table users
pk: uid, name

1 Bob, 
2 Louise, 
3 Roger

Table skills
pk: sk_id, skill

1 karate,
2 piano,
3 knitting,
4 judo,
5 sailing,
6 fencing

Table user_skill (relationship between user and skills)
pk:usk_id, fk:uid, sk_id

1 1 1,
2 2 2,
3 2 3,
4 3 4,
5 3 5,
6 3 6, 
```

我想然后显示“罗杰有这些技能：柔道，编织篮子”

```
select name, skill 
from users, skills, user_skill
where users.uid = user_skill.uid
and users.uid = 3 
```

这是正确的方法吗 - 无论是在设计表和查询（mysql）方面吗？

1.  然后说我想用他们教的领域更新他们的个人资料：

    *   鲍勃可以在伦敦教空手道
    *   路易丝可以在博尔顿教钢琴，在曼彻斯特教针织
    *   罗杰可以在伦敦和曼彻斯特教柔道，在利物浦教帆船，在布拉德福德教击剑

所以我添加了以下表格：

```
Table cities
pk: city_id, city

1 London,
2 Manchester,
3 Liverpool,
4 Bolton,
5 Bradford, 
```

但我对如何处理关系感到困惑。我一直在写它并意识到它不起作用并重新开始，所以我显然在某个地方出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:16:47.267

我想说就关系而言，您的一般数据库结构很好。要合并城市方面，您可以使用建议的城市表，但也可以在 user_skill 表中添加一列以包含对城市表的引用。

还要确保在选择查询中使用正确的连接语句，因为这是最佳实践，可以帮助查询尽可能高效地运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:17:36.687

用户能否在多个地点教授技能，例如“鲍勃在伦敦和博尔顿教授柔道”？还是严格意义上的一技一城？

根据您想要表格的方式，您只需将“城市”字段添加到 user_skills 表格，并拥有多个“bob/judo/cityX”“bob/judo/cityY”类型的记录。或者，您将添加另一个表“user_city_skills”，它将是“user_skill_ID，cityID”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T17:20:55.313

除了您的 usr_skill 表之外，您的结构看起来不错。要合并最后一部分，请在 user_skill 表中添加一个 fk city_id。如果玩家可以在多个城市教授相同的技能，您将需要一个额外的表格来避免多值列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T17:22:04.110

是的，继续。您还应该在表格中添加一列，`user_skill`该列将包含`city_id`.

# c# - 连接到来自 SSRS 的数据馈送

> ID：11764226
> 
> 赞同：4
> 
> 时间：2012-08-01T17:12:04.497
> 
> 标签：c#, .net, reporting-services, rss

我需要定期对 SSRS 生成的一些报告进行快照。我已经请求后端访问数据，但不允许我连接到数据库。

我从未对数据提要/RSS 做过任何事情，我想知道如何开始使用 C# 来获取在 SSRS 中生成的报告？

有一个图标**导出到数据馈送：**

![在此处输入图像描述](../Images/8a3b0363f114ea06f1625546e259ccd0.png)

如何以编程方式获取这些数据？有没有办法利用这种导出到数据馈送选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:18:54.567

您可以使用 Web 服务访问报告服务器。

本文展示了如何呈现报告：

[http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render%28SQL.105%29.aspx](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render%28SQL.105%29.aspx)

这将使您开始访问 Web 服务

[http://msdn.microsoft.com/en-us/library/ms152787%28SQL.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms152787%28SQL.105%29.aspx)

上面的链接适用于 2008 R2，但对于 2005 - 2012 应该同样适用

# python - 在 Pyramid 中发送分块二进制文件的标头

> ID：11764229
> 
> 赞同：2
> 
> 时间：2012-08-01T17:12:20.320
> 
> 标签：python, streaming, pyramid

我有一个名为 dummy 的视图，我想从我的服务器流式传输 mp3 并将其流式传输到一个`<audio src="/stream">`标签，以便客户端可以立即开始播放文件而无需等待整个文件。

```
def dummy(request):
    headers = {
        'Content-Transfer-Encoding': 'binary',
        'Content-Type': 'audio/mpeg',
        'Transfer-Encoding': 'chunked',
        'Connection': 'keep-alive',
        'Cache-Control': 'no-cache'
    }
    with open('songer.mp3') as handle:
        while True:
            bytes = handle.read(CHUNK)
            if not bytes:
                break
            return Response(bytes, headers=headers) 
```

但我是`ERR_INVALID_CHUNKED_ENCODING`从 chrome 获得的，我也不确定我返回响应的方式是否会起作用，因为一旦它到达返回，它不会结束响应吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T21:46:12.677

你是对的，你不能从一个视图返回多个响应......或者实际上，通常在一个循环中从一个函数发出多个返回 - 第一个 return 语句将终止该函数。

看看`Response.body_file`和`Response.app_iter`属性。

> **response.app_iter：** 将产生响应内容的可迭代对象（例如列表或生成器）。这也可以作为 response.body（一个字符串）、response.unicode_body（一个 unicode 对象，由 response.charset 通知）和 response.body_file（一个类似文件的对象；写入它附加到 app_iter）来访问
> 
> **body_file**可用于写入正文的类似文件的对象。如果您传入一个列表 app_iter，则该 app_iter 将被写入修改。

[http://docs.pylonsproject.org/projects/pyramid/en/latest/api/response.html](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/response.html)

如果你做类似的事情

```
request.response.body_file = open('songer.mp3')
# set any headers here
return response 
```

该文件将从磁盘读取并立即发送到客户端，而无需等待整个文件。我不确定这里是否需要分块传输编码。

WebOb 文档有一个更复杂的文件服务应用程序示例，它可以有效地处理 Range 请求：[http ://docs.webob.org/en/latest/file-example.html](http://docs.webob.org/en/latest/file-example.html)

# java - 如何在将浮点数编码为 JSON 时将其截断为 %.2f 格式？

> ID：11764232
> 
> 赞同：9
> 
> 时间：2012-08-01T17:12:36.203
> 
> 标签：java, android, json

让我们有一些`float f = 52.92;`。事实上，它会持有类似的值`52.91999816894531`。但我想使用 json-string 截断那些非有效数字将它传输到我的网络应用程序。我该怎么做？

结果，我需要获取这个json字符串：

```
{"price": 52.92} 
```

我使用的代码：

```
float f = 52.92;
JSONObject js_price = new JSONObject();
js_price.put("price", f);
Log.d("json", js_price.toString()); 
```

产生这个丑陋的json：

```
{"price": 52.91999816894531} 
```

另外，我需要`"price"`是 json 中的数字格式，而不是字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T18:18:56.490

看来，我可以使用构造函数[JSONObject(String json)](http://developer.android.com/reference/org/json/JSONObject.html#JSONObject%28java.lang.String%29)，如下所示：

```
JSONObject js_price = JSONObject(String.format("{\"price\": %.2f}", f); 
```

之后我可以用这个对象做任何其他与 json 相关的事情......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T17:21:17.310

尝试使用 String.format

`Log.d("json", String.format("%.2f", f));`

编辑：

是否需要使用浮点数，或者您可以尝试加倍吗？

```
 double d = 52.92;
    JSONObject js_price = new JSONObject();
    js_price.put("price", d);
    Log.d("json", js_price.toString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T17:19:55.207

AFAIK，你不能用`JSONObject`.

由于没有精确的浮点值，因为`52.92`您确实必须使用字符串格式化规则，但是您不能让 JSON 编码器将该值视为数字而不是带引号的字符串。

你必须这样做：

```
String json = String.format("{\"price\", %.2f }", f); 
```

无论如何，当在客户端读回 JSON 时，它*仍然*不会`52.92`，它会`52.91999816894531`再次出现。因此，您将实现的只是节省了 JSON 的大小。

另一种选择是将数字乘以 100，然后将其作为整数发送。但是，当您在客户端划分它时，您仍然*会*得到！`52.91999...`

您还可以继承`JSONObject`并覆盖此方法：

```
static public java.lang.String numberToString(java.lang.Number number) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T17:20:04.317

试试GSON...

```
class Serializer {

// You can register custom serilaizers to it to suite your needs    
private static Gson gson = new GsonBuilder().create();

    public static final <T> String toJSON(T clazz) {
        return gson.toJson(clazz);
    }
} 
```

然后使用以下代码获取json字符串

```
float f = 52.92;
Map<String,Object> js_price = new HashMap<String,Object>()
js_price.put("price", f);
String json = Serializer.toJSON(js_price) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-04T09:32:56.690

我会将此实用程序类与您自己的参数一起使用：

```
public class BigDecimalUtils {

    /**
     * <code>MathContext</code> with precision 10 for coordinates.
     */
    private final static MathContext MC = new MathContext(10);

    /** Scale for coordinates. */
    private final static int SCALE = 6;

    public static float format(double aDouble) {
        BigDecimal bdLatitude = new BigDecimal(aDouble, MC).setScale(SCALE, RoundingMode.HALF_UP);
        return bdLatitude.floatValue();
    }

    public static float format(float aFloat) {
        BigDecimal bdLatitude = new BigDecimal(aFloat, MC).setScale(SCALE, RoundingMode.HALF_UP);
        return bdLatitude.floatValue();
    }

} 
```

然后打电话`js_price.put("price", BigDecimalUtils.format(f));`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-01T17:18:53.283

您可以在反序列化值后尝试此方法

```
DecimalFormat dec = new DecimalFormat("###.##");

System.out.println(dec.format(value)); 
```

# ruby - 使用 ruby 启动 Redis

> ID：11764233
> 
> 赞同：1
> 
> 时间：2012-08-01T17:12:39.873
> 
> 标签：ruby, ruby-on-rails-3, macos, command-line, redis

我已经通过 gems 安装了 Redis，但是在启动它时遇到了问题。

按照 James Edward Gary II 的步骤[http://blog.grayproductions.net/articles/setting_up_the_redis_server/](http://blog.grayproductions.net/articles/setting_up_the_redis_server/)

我有：

```
$ sudo gem install ezmobius-redis

Password:
Successfully installed ezmobius-redis-0.1
1 gem installed
Installing ri documentation for ezmobius-redis-0.1...
Installing RDoc documentation for ezmobius-redis-0.1...

$ redis-server path/to/redis.conf

-bash: redis-server: command not found 
```

关于我缺少什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:33:53.473

如果您已经完成了您在问题中描述的内容，那么您就错过了 redis。*ezmobius-redis*只是一个允许连接到 redis 的 Ruby 库。redis 本身是一个独立运行的独立软件。

如果您关注了您链接的文章，并且您特别这样做了：

```
curl -O http://redis.googlecode.com/files/redis-1.0.tar.gz
tar xzvf redis-1.0.tar.gz 
cd redis-1.0
make
sudo cp redis-server redis-cli redis-benchmark /usr/local/bin 
```

那么你实际上已经在*/usr/local*目录中安装了一个非常旧版本的 redis。

如果您这样做启动服务器不起作用，那么您的*/usr/local*可能不在您的*PATH*中。您可以使用以下命令启动服务器：

```
$ /usr/local/bin/redis-server path/to/redis.conf 
```

但是，我建议安装最新版本的 redis。要在 OSX 上执行此操作，您应该使用自制软件： - 阅读此（https://github.com/mxcl/homebrew/wiki/Installation）作为如何安装自制软件的指南，然后执行

```
brew install redis 
```

安装最新版本的 redis。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:50:50.700

您可能需要打开一个新终端来获取最新的路径设置。尝试输入“bash”或“xterm &”并再次输入 redis-server 命令。

# spring - Hibernate 准备好的语句正在用问号替换值

> ID：11764234
> 
> 赞同：1
> 
> 时间：2012-08-01T17:12:47.520
> 
> 标签：spring, hibernate, db2, websphere-6.1

我们将 Hibernate 3 与 WebSphere v6 和 DB2 一起使用。我们遇到了 Hibernate 发出的错误 SQL 准备语句并导致语法问题的奇怪问题。

Hibernate 发出的良好查询：

> SELECT * FROM rocc.Transaction t WHERE t.status_cd = 0 和 t.application_cd = ? order by coalesce(t.priority,0) 仅获取前 25 行

Hibernate 有时会错误地发出相同的查询：

> SELECT * FROM rocc.Transaction t WHERE t.status_cd = ***?*** ***和*** t.application_cd = ? ***ORDER BY COALESCE*** (t.priority, ***?*** ) ***FETCH*** first ***?*** ***仅行***

它用问号替换值（零）并将关键字的字体更改为大写（没关系，但在这里提到）。它还用问号更改了 fetch 子句中的数字 25。

Hibernate 有时发出错误的准备好的语句是什么原因造成的？

Hibernate 正在调用 WSJdbcPreparedStament.executeQuery 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:39:16.233

这是 JDBC 上preparedStatement 的正常行为，它将查询中的参数替换为?，这也有助于数据库为您的查询构建优化的访问计划。Hibernate 只是自动执行此操作。

[Jdbc 参考](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)或我们在休眠之前的习惯。

# java - 如何在 Eclipse 中向 Java 文件添加自定义警告？

> ID：11764236
> 
> 赞同：5
> 
> 时间：2012-08-01T17:13:04.153
> 
> 标签：java, eclipse, eclipse-plugin

我想为`.java`Eclipse 中的文件添加一条自定义警告消息（即在“问题”选项卡的“警告”部分添加一个条目）。

虽然我找到了关于创建插件和使用标记的信息（here 和其他地方），但我还没有找到任何关于扩展“问题发现”过程的信息。我发现的大多数文章都没有讨论*何时*创建标记，只讨论*如何*创建标记，以及那些假设我有兴趣将它们附加到自定义构建步骤或自定义编辑器的文章，这两者似乎都不适合我正在尝试做。

如何创建一个警告，其功能类似于通过 Window > Preferences > Java > Compiler > Errors/Warnings 提供的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T18:10:49.420

我认为建设者可能适合您想做的事情。新插件向导中有一个模板，可以创建构建器所需的一切（例如业务逻辑）。由于每次修改文件时都会运行构建器，因此您可以清除旧警告（为您生成的代码）并添加新警告（为您生成的代码）（如果适用）。这也适用于首次创建文件时。

如果需要，您甚至可以查看代码并找到硬编码的字符串并用警告标记它们。

至于今天代码中标记翻译键的注释，那些是用来指导 NLS 工具的（你可能已经知道了）。这个想法是先写代码，然后再回去翻译。如果稍后对代码进行了更改，这些工具可以再次运行并且只对增量添加的新字符串起作用。

# hadoop - Hive 在读取期间强制执行架构？

> ID：11764237
> 
> 赞同：16
> 
> 时间：2012-08-01T17:13:06.650
> 
> 标签：hadoop, mapreduce, hive, hdfs

我在这里的演讲中遇到的这两个陈述的区别和含义是什么：

```
1\. Traditional databases enforce schema during load time. 
```

和

```
2\. Hive enforces schema during read time. 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-01T17:32:54.997

您谈到了 Hadoop 和其他 NoSQL 策略如此成功的原因之一，所以我不确定您是否希望获得一篇论文，但它就在这里！数据分析中额外的灵活性和敏捷性可能促成了“数据科学”的爆炸式增长，只是因为它通常使大规模数据分析更容易。

传统的关系数据库在存储数据时会考虑到模式。它知道第二列是一个整数，它知道它有 40 列，等等。因此，您需要提前指定您的模式并妥善规划。这是“写入时的模式”——也就是说，在将数据写入数据存储时应用模式。

Hive（在某些情况下）、Hadoop 和许多其他 NoSQL 系统通常都是关于“读取模式”的——当从数据存储中读取数据时应用模式。考虑以下原始文本行：

```
A:B:C~E:F~G:H~~I::J~K~L 
```

有几种方法可以解释这一点。`~`可能是分隔符，也`:`可能是分隔符。谁知道？读取模式时，没关系。您在分析数据时决定架构是什么，而不是在编写数据时决定。这个例子有点荒谬，因为你可能永远不会遇到这种情况，但它希望能说明问题。

读取模式后，您只需将数据加载到数据存储中，然后考虑如何解析和解释。在这个解释的核心，*阅读模式*意味着先写你的数据，然后再弄清楚它是什么。*写入模式*意味着首先弄清楚您的数据是什么，然后再写入。

* * *

这里有一个权衡。其中一些是主观的和我自己的观点。

*写入模式的*好处*：*

 **   对静态数据进行更好的类型安全和数据清理
*   由于数据已经被解析，通常更有效（存储大小和计算）

*写入模式的*缺点：

*   在存储数据之前，您必须提前计划您的模式（即，您必须进行 ETL）
*   通常，您会丢弃原始数据，如果您的摄取过程中有错误，这可能会很糟糕
*   对同一数据有不同的看法更难

*阅读模式的*好处：

*   灵活定义数据在加载时的解释方式
    *   这使您能够随着时间的推移发展您的“模式”
    *   这使您可以拥有不同版本的“模式”
    *   这允许更改原始源数据格式，而无需合并为一种数据格式
*   您可以保留原始数据
*   您可以在知道如何处理数据之前加载数据（因此您不会将其丢在地上）
*   使您能够灵活地存储非结构化、不干净和/或无组织的数据

*读取模式的*缺点：

*   通常它的效率较低，因为您每次都必须重新解析和重新解释数据（这对于 XML 等格式可能很昂贵）
*   数据不是自记录的（即，您无法查看模式来确定数据是什么）
*   更容易出错，您的分析必须考虑脏数据*

# ruby-on-rails-3 - 受时区影响的 rails 3 应用程序

> ID：11764240
> 
> 赞同：0
> 
> 时间：2012-08-01T17:13:23.557
> 
> 标签：ruby-on-rails-3, datetime, timezone, location, virtual-attribute

**更新：**

*复制自以下评论：*

我曾考虑为网站的每个访问者使用针对 IP 地址的 Web 服务，但后来我想知道用户在跨时区的位置查看会议，因此时区必须与正在查看的会议的位置相关联，而不是与用户的位置相关联自己就在那一刻。我需要一个用户能够查看会议列表（包含时间和地点），并且显示的时间是实际的会议时间，但是用于列出会议的 SELECT 的 WHERE 子句需要考虑每个会议地点的时区.

* * *

我环顾四周，有很多关于在 Rails 应用程序中使用时区的问题。

问题在于应用程序需要知道用户所在的时区，以便它能够正确地对数据库运行查询以检查将来的日期时间。

我不希望我网站的常规访问者需要登录才能使其正常工作，所以我正在考虑以下几点：

*   管理员用户登录以发布`item`特定的`location`和`datetime`
*   保存项目时，它使用`[lat,lng]`的`location`调用来`Timezone gem`捕获`timezone``location`
*   我想我需要将它添加到与和`timezone`相同模型上的额外字段（轨道另存为）（[https://stackoverflow.com/a/2533323](https://stackoverflow.com/a/2533323)）`[lat,lng]``datetime``UTC`
*   我需要我的模型将`UTC datetime`其与其各自的模型相结合，`timezone`以便当普通用户访问该网站时，网页会选择未来`item`的位置`UTC+timezone datetimes`

这听起来可能/正确吗？

如果这听起来令人困惑，请在评论中说，如果可以的话，我会尝试改写得更好。

有人可以为模型提供任何代码来创建与字段`virtual attribute`相结合的（我认为）吗？`UTC datetime``timezone`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:02:17.247

拥有国家及其时区列表不是更好吗？当用户来到站点时，确定他来自哪个国家，而不是尝试使用本地 Rails 时区方法。例如，我有具有 created_at 参数的用户和表模型：

```
Time.zone => (GMT+00:00) UTC
User.last.created_at => Mon, 25 Jun 2012 21:17:25 UTC +00:00
Table.last.created_at => Mon, 16 Jul 2012 14:08:17 UTC +00:00

Time.zone = 'Moscow' => "Moscow"
Time.zone => (GMT+04:00) Moscow

User.last.created_at => Tue, 26 Jun 2012 01:17:25 MSK +04:00
Table.last.created_at => Mon, 16 Jul 2012 18:08:17 MSK +04:00 
```

如何确定您应该寻找宝石或某些服务的国家/地区。我认为这将是通过他的 IP 地址确定用户国家的服务。

# cluster-analysis - 聚类还是分类？

> ID：11764243
> 
> 赞同：3
> 
> 时间：2012-08-01T17:13:29.250
> 
> 标签：cluster-analysis, classification, mahout

我被困在对我得到的数据集应用分类或聚类的决定之间。我想得越多，我就越困惑。这就是我所面临的。

我有新闻文件（大约 3000 份，并且还在不断增加），其中包含有关公司、投资、股票、经济、季度收入等的新闻。我的目标是对新闻进行排序，以便我知道哪些新闻对应于哪家公司。例如，对于新闻项目“Apple 推出新的 iphone”，我需要将 Apple 公司与它关联起来。一个特定的新闻项目/文档只包含“标题”和“描述”，所以我必须分析文本以找出新闻所指的公司。也可能是多家公司。

为了解决这个问题，我求助于 Mahout。

我从集群开始。我希望将“Apple”、“Google”、“Intel”等作为集群中的首要术语，从那里我会知道集群中的新闻与其集群标签相对应，但情况有点不同。我得到了“投资”、“股票”、“通信”、“绿色能源”、“终端”、“股票”、“街道”、“奥林匹克”和许多其他术语作为最重要的术语（这对于聚类算法是有意义的' 寻找常用术语）。虽然有一些“Apple”集群，但与之相关的新闻项目很少。我认为集群可能不是针对这类问题，因为许多公司新闻进入更一般的集群（投资、利润）而不是特定的公司集群（Apple）。

我开始阅读需要训练数据的分类，这个名字也很有说服力，因为我实际上想将我的新闻项目“分类”为“公司名称”。当我继续阅读时，我的印象是名称分类有点欺骗性，与分类相比，该技术更多地用于预测目的。我遇到的另一个困惑是如何为新闻文档准备训练数据？假设我有一个我感兴趣的公司列表。我编写了一个程序来为分类器生成训练数据。该程序将查看新闻标题或描述是否包含公司名称“Apple”，然后它是关于苹果的新闻报道。这是我准备训练数据的方式吗？（当然，我读到训练数据实际上是一组预测变量和目标变量）。如果是这样，那么我为什么要首先使用 mahout 分类呢？我应该放弃 mahout，而是使用我为训练数据编写的这个小程序（它实际上进行了分类）

你可以看到我对如何解决这个问题有多么困惑。另一个让我担心的事情是，如果可以让一个系统变得如此智能，如果新闻说“iphone 销量创历史新高”而不使用“Apple”这个词，那么系统可以将其归类为与苹果相关的新闻吗？

提前感谢您为我指明正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T19:13:28.870

*从邮件列表中复制我的回复：*

分类器是有监督的学习算法，所以你需要提供一堆正类和负类的例子。在您的示例中，可以将一堆文章标记为“关于 Apple”与否，然后使用从 TF-IDF 派生的特征向量作为输入，使用这些标签来训练一个分类器，该分类器可以判断一篇文章何时是“关于苹果”。

我不认为根据简单的规则通过标记自动生成训练集会很有效，如果标题中有“Apple”，那么它是关于 Apple 的。好吧，如果你这样做了，那么训练分类器就没有意义了。您只需检查标题中是否包含“Apple”，就可以制作一个在测试集上达到 100% 准确率的简单分类器！是的，你是对的，这对你没有任何好处。

显然，您想从分类器中学到一些更微妙的东西，这样标题为“苹果汁可降低痴呆风险”的文章就不会被归类为关于公司的文章。你真的需要给它手工分类的文件。

这是个坏消息，但是，您当然可以通过这种方式为 N 个主题训练 N 个分类器。

分类器将项目放入或不放入类中。它们与预测输入的连续值的回归技术不同。它们相关但不同。

聚类具有不受监督的优点。你不需要标签。但是，不能保证生成的集群与您对文章主题的概念相匹配。您可能会看到一个包含大量 Apple 文章的集群，其中一些是关于 iPod 的，还有一些是关于三星和笔记本电脑的。我认为这不是解决您的问题的最佳工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:07:35.237

首先，您不需要 Mahout。3000 份文件几乎没有。当您达到一百万时，请重新访问 Mahout。我已经在一台计算机上处​​理了 100.000 张图像，所以你现在真的可以跳过 Mahout 的开销。

您正在尝试做的事情对我来说听起来像是*分类*。因为你有预定义的类。

聚类算法是无监督的。它**会**（除非您过度拟合参数）可能会将 Apple 分为“iPad/iPhone”和“Macbook”。或者另一方面，它可能会合并苹果和谷歌，因为它们密切*相关*（比苹果和福特要多得多）。

**是的，您需要训练数据，以反映您要测量的结构**。还有其他结构（例如，iPhone 与 Macbook 不同，谷歌、Facebook 和苹果比 Kellogs、福特和苹果更相似）。如果您想要*公司*级别的结构，则需要此详细级别的培训数据。

# google-analytics - 谷歌分析漏斗没有报告

> ID：11764244
> 
> 赞同：1
> 
> 时间：2012-08-01T17:13:30.110
> 
> 标签：google-analytics

我在使用漏斗报告时遇到了 Google Analytics（分析）问题。目前我正在跟踪交易，但我的漏斗报告显示没有人进入漏斗。我有一个棘手的设置。

1) 我们正在使用第三方供应商来运行我们的购物车和订购流程，他们想要他们在网站上的跟踪代码，而我们想要我们的。

例如：

```
_gaq.push(
 ['_setAccount', 'UA-10187XXX-1'], // OurDomain.com GA property ID
 ['_setDomainName', '.OurDomain.com'],
 ['_setAllowLinker', true],
 ['_setAllowHash', false],

 ['_trackPageview', '/customer_shopping_cart_funnel/personal_info_customer.html'],

 ['b._setAccount', 'UA-12670XXX-3'] // vendors GA property ID

 , ['b._trackPageview', '/customer_shopping_cart_funnel/personal_info_customer.html']

); 
```

2）一旦有人进入订购过程，一些网址就不会改变。我尝试像这样使用 _trackPageView：

```
// example for each step
['_trackPageview', '/customer_shopping_cart_funnel/step1.html']
['_trackPageview', '/customer_shopping_cart_funnel/step2.html']
['_trackPageview', '/customer_shopping_cart_funnel/step3.html']
['_trackPageview', '/customer_shopping_cart_funnel/order_confirmation.html'] 
```

3）漏斗应该是这样的：

*   用户登陆页面以选择国家进行订购流程
*   用户进入购物车
*   用户选择产品（用户可以访问多个产品）
*   用户输入购买信息
*   用户查看订单并提交订单
*   订单确认页面

我遇到的问题是我们需要从显示标志的页面进行跟踪，但在购物体验中，它们可以移动到多个页面。

使用漏斗，据我了解，您需要专门列出所有步骤。我所做的是为每个产品页面分配相同的 _trackPageView 值，因此步骤始终相同。

我可以在这里做些什么来让漏斗正确报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:38:13.880

您能否在其他报告中跟踪这些页面？如果是这样，我想问题在于您的目标漏斗是如何设置的。

确保您为每个步骤设置的 URL 是正确的，并且与报告中列出的一样。如果您使用配置文件过滤器来更改 URL 在报告中的显示方式，请务必考虑到这一点。将标志页面标记为必需步骤也是一个好主意。

至于具体列出渠道的所有步骤，访问期间发生的综合浏览量不必与渠道的确切顺序相匹配，也可以计入渠道和目标。

例如，假设您的渠道是 step1 > step2 > step3 > order_confirmation。

一系列页面浏览量，包括未在渠道中指定的其他页面，例如 step1 > step2 > step3 > contact_us > order_confirmation，仍将计入目标渠道。

此外，只要在达到目标之前查看了渠道的第一页，Google Analytics（分析）就会人为地回填错过的页面，以至少获得与后续页面一样多的浏览量。

使用与上述相同的漏斗示例，即使跳过了第 2 步，访问页面 step1 > step3 > order_confirmation 仍将被视为达到漏斗目标。并且， step2 将被“回填”为已被查看，即使它没有被查看。

因此，Google Analytics（分析）将显示在 order_confirmation 网页浏览之前包含 step1 网页浏览的任何访问，以匹配每个渠道的每个步骤，其中 step1 作为第一步，order_confirmation 作为目标 URL。这意味着为每个产品页面分配相同的 _trackPageView 值对于目标漏斗进行正确跟踪是不必要的。

# delphi - Delphi 和 SAML（Web 应用程序或桌面应用程序）？

> ID：11764245
> 
> 赞同：2
> 
> 时间：2012-08-01T17:13:32.130
> 
> 标签：delphi, saml, saml-2.0, opensaml

SAML 协议（Sing Sign ON）是单独用于 Web 应用程序和 Web 服务，还是也用于标准应用程序？

修改：

我正在寻找一些用于单点登录的 Windows（标准应用程序（不是基于 Web））协议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T20:00:03.857

如果您专门研究 Windows，为什么不使用 Kerberos 和集成 Windows 身份验证？它内置于 Active Directory 和域控制器中。一旦您开始进入 Internet 和不同的安全域，它就不会真正起作用，但它在企业环境中的防火墙后面运行良好。

但是，SAML 可用于桌面应用程序。我之前遇到过一些应用程序，它会从桌面检索 Kerberos 票证，对 STS 进行 WSTrust/RST 调用以验证 Curb 令牌并在 RSTR 中取回一个 SAML 令牌，该令牌将嵌入到 Web 服务调用中需要制作的桌面应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T17:19:56.333

SAML 允许安全的 Web 域交换用户身份验证和授权数据，并且根据定义，这样做需要互联网连接。所以不，你不想将它用于桌面应用程序。

修改

这是使用 Delphi 实现活动目录的链接。

[http://www.agnisoft.com/white_papers/active_directory.asp](http://www.agnisoft.com/white_papers/active_directory.asp)

[http://adsi.mvps.org/adsi/Delphi/index.html](http://adsi.mvps.org/adsi/Delphi/index.html)

# asp.net-mvc - VB.NET 等价于 Var_dump($myVar); 死（）;

> ID：11764248
> 
> 赞同：1
> 
> 时间：2012-08-01T17:13:41.200
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

在 PHP 中，可以立即停止脚本的执行并输出一个变量。例如，如果你想知道 $myVar 中有什么，你可以这样做：

var_dump($myVar); 死（）;

无论如何要立即获取变量的值，然后在 VB.NET 中将其杀死？

我不是要求必须包含的功能；只是如果有一个本机函数基本上会立即输出一个 var，我不必将它添加到控制器，然后是视图，然后发布和测试。理想情况下，它只会在调试器或消息框或其他东西中输出变量......

我也在使用 ASP.NET MVC 3。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:53:43.693

您可以使用[System.Diagnostics.Trace](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.trace)和[System.Diagnostics.Debug](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.debug)类来打印信息。

停止执行通常通过返回相关的[System.Web.Mvc.ActionResult](https://docs.microsoft.com/en-us/dotnet/api/system.web.mvc.actionresult)（例如[System.Web.Mvc.HttpNotFoundResult](https://docs.microsoft.com/en-us/dotnet/api/system.web.mvc.httpnotfoundresult) ）或通过抛出[System.Web.HttpException](https://docs.microsoft.com/en-us/dotnet/api/system.web.httpexception)以及最能描述问题的[HTTP 状态代码来实现。](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

这是一个天真的例子。原谅我可怜的VB。

```
Public Function UpdateUser(id as Integer, userName as String, password as Password) as ActionResult
    Dim user as User = DataServices.GetUserById(id)
    If user Is Nothing Then
        System.Diagnostics.Debug.WriteLine("Aborting because user did not exist.")
        throw new HttpException(404, "Page not found.")
    End
    ' Do more stuff
end 
```

或者在 C# 中

```
public ActionResult UpdateUser(int id, string userName, string password) {
    var user = DataServices.Users.Where(u => u.id == id).SingleOrDefault();

    if( user == null ) {
        Debug.WriteLine("Aborting because user did not exist.");
        return HttpNotFound(); // Helper method in Controller Class.
    }
    else if( myRoles() < thisUsersRoles(user) ) {
        Debug.Writeline("Aborting because insufficient access.");
        throw new HttpException(401, "Unauthorized");
    }

    // update user here
    return View();
} 
```

请注意，这些示例仅用于显示 Debug 的使用和 http 状态代码的返回。

# php - 使用 mysql 行创建一个简单的 php 数组...

> ID：11764254
> 
> 赞同：-4
> 
> 时间：2012-08-01T17:13:53.733
> 
> 标签：php, mysql

我有一个这样的mysql代码......

```
INSERT INTO `product` (`product_id`, `model`, `sku`) VALUES
(61, 'one-s 1407', ''),
(72, 'one-s 1408', ''),
(88, 'one-s 1409', ''),
(91, 'one-s 1403', ''),
(95, 'one-s 1404', ''); 
```

现在我想提取product_id并创建一个像这样的php数组..

```
$productid = array(61,72,88,91,95); 
```

请注意：

我给出的 mysql 代码只是为了示例。但是我的表中有 1000 多行和 15 列。

如果有人给我一些可以轻松完成这项工作的 php 片段，我会非常高兴。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:15:43.653

这是一个技术：

```
<?php

// Query the database
SELECT product_id FROM product

// Loop
$Products = array();
while(){
    $Products[] = $Row->product_id;
}

print_r($Products);

?> 
```

自己尝试一些东西。使用 PDO 扩展来创建您的查询，然后使用该方法`fetch`在循环中获取您的数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T17:17:55.520

```
$query = mysql_query("SELECT * FROM product");    

$array = array();

while($row = mysql_fetch_array($query)){
    $array [] = $row['p']
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T17:20:45.313

尝试这样的事情

```
$pid= array();

while($row = mysql_fetch_array($query)){
$pid[] = $row['product_id']
 } 
```

# ms-access-2007 - 查询中的访问日期格式不起作用

> ID：11764255
> 
> 赞同：3
> 
> 时间：2012-08-01T17:14:00.573
> 
> 标签：ms-access-2007

我在 access 2007 中有一个日期格式 dd/mm/yyyy 的表格。即使在区域设置中，它也是英国格式 - dd/mm/yyyy

但是当我编写一个查询来过滤表中日期的记录时。

我必须这样写#07/01/2012#。

```
select * from table1
where datecolumn between #07/01/2012# and #07/03/2012# 
```

如果我写#01/07/2012#，它不会显示任何数据。

```
select * from table1
where datecolumn between #01/07/2012# and #03/07/2012# 
```

但是从 2012 年 7 月 13 日开始，如果我使用 #13/07/2012# 格式编写，它可以正常工作。

```
select * from table1
where datecolumn between #13/07/2012# and #14/07/2012# 
```

我有一个问题，直到 7 月 1 日到 7 月 12 日。我不确定问题出在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T17:15:30.267

您的日期需要明确，因此年、月、日通常是最安全的。

```
select * from table1
where datecolumn between #2012/07/01# and #2012/07/03# 
```

一旦一天超过 12，如果年份是 4 位数字，日期就会变得不那么模糊或明确，因为没有月份 13。

# python - 如何在numpy矩阵中找到最小值？

> ID：11764260
> 
> 赞同：12
> 
> 时间：2012-08-01T17:14:13.837
> 
> 标签：python, arrays, matrix, numpy, minimum

嘿，这是一个快速而简单的问题......我如何找到这个矩阵的最小值，不包括 0？如，8

```
arr = numpy.array([[  0.,  56.,  20.,  44.],
                   [ 68.,   0.,  56.,   8.],
                   [ 32.,  56.,   0.,  44.],
                   [ 68.,  20.,  56.,   0.]]) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-01T17:15:57.283

当你使用`numpy`时，你可以使用

```
arr[arr>0].min() 
```

对于您发布的案例。但如果你的数组可能有负值，那么你应该使用

```
arr[arr != 0].min() 
```

# objective-c - 如何制作一种检测所有击键的方法？

> ID：11764265
> 
> 赞同：0
> 
> 时间：2012-08-01T17:14:42.963
> 
> 标签：objective-c, ios

我是初学者，所以请多多包涵……在我使用 xcode 和 Objective c 的应用程序中，我希望能够检测到何时按下键盘上的任何键。我已经查看并找到了一些仅检测某些键的代码，但我想制作一种方法来检测从 esc 到 enter 的任何键击。理想情况下，只要按下任何键，我都会运行一系列 if 语句。

```
//if a keystroke is detected run through this if statement

if([firstName.text length] < 1){

[firstNameLabel setHidden:NO];
 } else {
 [firstNameLabel setHidden:YES]; 
 }
 if([secondName.text length] < 1){

 [secondNameLabel setHidden:NO]; 
 } else {
 [secondNameLabel setHidden:YES]; 
 }
 if([email.text length] < 1){

 [emailLabel setHidden:NO]; 
 } else {
 [emailLabel setHidden:YES]; 
 }
 if([password.text length] < 1){

 [passwordLabel setHidden:NO]; 
 } else {
 [passwordLabel setHidden:YES]; 
 }
 if([passwordSame.text length] < 1){

 [passwordSameLabel setHidden:NO]; 
 } else {
 [passwordSameLabel setHidden:YES]; 
 }
 if([schoolName.text length] < 1){

 [schoolNameLabel setHidden:NO]; 
 } else {
 [schoolNameLabel setHidden:YES]; 
 }
 if([gradeLevel.text length] < 1){

 [gradeLevelLabel setHidden:NO]; 
 } else {
 [gradeLevelLabel setHidden:YES]; 
 } 
```

有人知道您将如何编写此方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:39:13.373

您应该使用 textField:shouldChangeCharactersInRange:replacementString: 委托方法。您可以使用您的逻辑并检测那里的击键。

# php - 使用数组从 Access 获取 PHP 总和

> ID：11764268
> 
> 赞同：2
> 
> 时间：2012-08-01T17:14:56.050
> 
> 标签：php, arrays, ms-access, sum

我有一个涉及 PHP 数组并将值相加的问题。

我有一个包含此方案中信息的访问数据库

```
----------------------
| time | code        |
|------|-------------|
| 600  | broke down  |
| 500  | broke down  |
| 300  | waiting     |
| 200  | waiting     |
| 400  | remove coil | 
```

无论如何，你明白了。我有多个代码值，但一个代码可以有多个时间值。我试图用 PHP 完成的是将所有**时间**值相加并仅显示**一个代码值**。

我想要的结果是：

```
1100 | Brokedown (600 & 500 added together)
500  | Waiting (300 & 200 added together)
400  | Remove Coil 
```

举个例子。我认为我应该使用多维数组，但我似乎无法完全理解如何使用它。一个正确方向的点将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:19:11.623

为什么不是 SQL？

```
SELECT Code, Sum([Time]) 
FROM Table
GROUP BY Code 
```

时间是一个保留字，所以我猜它是一个虚构的名字。如果它是真实的，则必须将其括在方括号中，或者更好地更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:20:06.693

您实际上可以为此使用 SQL 来返回您要查找的内容。

```
SELECT SUM(time), code FROM table_name GROUP BY code 
```

# objective-c - UIPanGestureRecognizer 与 UISwipeGestureRecognizer 重叠

> ID：11764271
> 
> 赞同：2
> 
> 时间：2012-08-01T17:15:11.930
> 
> 标签：objective-c, uiview, uigesturerecognizer, uipangesturerecognizer, uiswipegesturerecognizer

我有`UIView`一个`UIPanGestureRecognizer`附在它上面的。我在其中也有一个对象，`UIView`它有多个`UISwipeGestureRecognizers`.

`UIPanGestureRecognizer`和`UISwipeGestureRecognizers`关联的对象重叠。

有没有办法让`UIPanGestureRecognizer`完全忽略的某个区域`UIView`或使对象的`UISwipeGestureRecognizers`优先并覆盖`UIView's` `UIPanGestureRecognizer`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T19:16:01.657

你想要的是...

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
     if(gestureRecognizer == myPanGesture) return NO;

     return YES;
} 
```

或该委托方法的类似用法。它是 UIGestureRecognizerDelegate 协议的一部分。如果您正在滑动，这将使您无法识别平移。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T21:21:40.433

使用此委托方法解决了此问题：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
      if ([touch.view isKindOfClass:[UIButton class]] && gestureRecognizer == recognizer) return NO;
      return YES;
} 
```

感谢您为我指明正确的方向@MikeS

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T12:14:52.350

非常感谢您的回答，这对我的问题有所帮助。

**我只想分享我的解决方案，因为它可能会有所帮助：**

```
-(BOOL) gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch{
NSLog2(@"Gesture on Class %@ tag %i", [touch.view class], touch.view.tag);////////

if (touch.view.tag == kTagToIgnoreGestures){
    return NO;
}
return YES; 
```

}

我定义了一个**kTagToIgnoreGestures**，它是应该忽略手势的视图标签。这样，我可以在一个带有 UIGestureRecognizer 的视图中拥有 2 个子视图，其中只有一个会受到手势的影响。

希望能帮助到你。谢菲

# sql - 按全名自动提示搜索

> ID：11764272
> 
> 赞同：0
> 
> 时间：2012-08-01T17:15:12.043
> 
> 标签：sql, sql-server, autosuggest

我已经使用 jQuery、php 和 SQL server 2008 实现了自动建议搜索。我正在按他们的名字寻找人。人名分为三个字段“名词”、“apellido_paterno”和“apellido_materno”。我的自动建议匹配三个字段之一看起来像输入文本中的模式的结果。

```
 $values = array(':x'=>$data['term'].'%',':y'=>$data['term'].'%',':z'=>$data['term'].'%');
  $sql = "SELECT TOP 10 id_persona, nombres +' '+ apellido_paterno +' '+ apellido_materno AS value 
                FROM personas WHERE nombres LIKE :x OR apellido_paterno LIKE :y OR apellido_materno LIKE :z"; 
```

因此，如果您按姓名或姓氏搜索，我的查询工作正常，但是如果您按全名搜索，则没有匹配项。那么，如何在查询中添加条件以匹配全名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:28:48.223

假设这三个都是 varchar 字段，并且您查询的记录数量有限，我会这样做：

```
$values = array(':x'=>'%'.$data['term'].'%');
  $sql = "SELECT TOP 10 id_persona, nombres +' '+ apellido_paterno +' '+ apellido_materno AS value 
FROM personas 
WHERE
nombres + ' ' + apellido_paterno + ' ' + apellido_materno LIKE :x"; 
```

# android - Android 和 CherryPy：尝试将文件、字符串或字节数组从 android 应用程序上传到 CherryPy

> ID：11764273
> 
> 赞同：0
> 
> 时间：2012-08-01T17:15:21.713
> 
> 标签：android, http-post, cherrypy

我在设置 HTTP Post android 应用程序代码以将文件、字符串或字节数组上传到 CherryPy 时遇到问题。有人可以指出我正确的方向吗？

我得到 HTTPError: (404, 'Missing parameters: myFile')。CherryPy 代码：

```
 html += """            <h2>Upload a file</h2>
        <form action="upload" method="post" enctype="multipart/form-data">
        filename: <input type="file" name="myFile" /><br />
        <input type="submit" />
        </form></body></html>"""

def upload(self, myFile):
    out = """<html>
    <body>
        myFile length: %s<br />
        myFile filename: %s<br />
        myFile mime-type: %s
    </body>
    </html>"""

    size = 0
    f = open(myFile.filename, 'w')
    while True:
        data = myFile.file.read(8192)
        if not data:
            break
        size += len(data)
        f.write(data)

    return out % (size, myFile.filename, myFile.content_type)
upload.exposed = True 
```

安卓应用代码：

```
 String writeOut = "1,1234,4567,8910";
              byte[] byteArray = writeOut.getBytes();

              File tmpFile = new File("/sdcard/Download/tst.txt");

              HttpParams params = new BasicHttpParams(); 
              params.setParameter("myFile", "myfile1");
              HttpConnectionParams.setConnectionTimeout(params, 15000); 
              HttpConnectionParams.setSoTimeout(params, 5 * 60 * 1000); 
              HttpClient client = new DefaultHttpClient(params); 
              HttpPost  post = new HttpPost("http://192.168.1.123:8080/upload"); 
              HttpEntity requestEntity = new FileEntity(tmpFile, "multipart/form-data;boundary=--");
              post.setEntity(requestEntity); 
              HttpResponse response = (HttpResponse) client.execute(post); 
              int statusCode = response.getStatusLine().getStatusCode();
              HttpEntity entity = response.getEntity();
              String page = EntityUtils.toString(entity);
              Log.d(HTTPTAG, "reply: " + page);
              Log.d(HTTPTAG, "statuscode: " + statusCode); 
```

记录 CherryPy 端：

```
192.168.1.114 - - [01/Aug/2012:10:10:25] "POST /upload HTTP/1.1" 404 1265 "" "" 
```

Logcat端：

```
D/MyApp.HTTP( 6966): reply: <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
D/MyApp.HTTP( 6966): "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
D/MyApp.HTTP( 6966): <html>
D/MyApp.HTTP( 6966): <head>
D/MyApp.HTTP( 6966):     <meta http-equiv="Content-Type" content="text/html;     charset=utf-8"></meta>
D/MyApp.HTTP( 6966):     <title>404 Not Found</title>
D/MyApp.HTTP( 6966):     <style type="text/css">
D/MyApp.HTTP( 6966):     #powered_by {
D/MyApp.HTTP( 6966):         margin-top: 20px;
D/MyApp.HTTP( 6966):         border-top: 2px solid black;
D/MyApp.HTTP( 6966):         font-style: italic;
D/MyApp.HTTP( 6966):     }
D/MyApp.HTTP( 6966): 
D/MyApp.HTTP( 6966):     #traceback {
D/MyApp.HTTP( 6966):         color: red;
D/MyApp.HTTP( 6966):     </style>
D/MyApp.HTTP( 6966): </head>
D/MyApp.HTTP( 6966):     <body>
D/MyApp.HTTP( 6966):         <h2>404 Not Found</h2>
D/MyApp.HTTP( 6966):         <p>Missing parameters: myFile</p>
D/MyApp.HTTP( 6966):         <pre id="traceback">Traceback (most recent call     last):
D/MyApp.HTTP( 6966):   File "/usr/local/lib/python2.7/dist-packages/CherryPy-3.2.2-py2.7.egg/cherrypy/_cprequest.py", line 656, in respond
D/MyApp.HTTP( 6966):     response.body = self.handler()
D/MyApp.HTTP( 6966):   File "/usr/local/lib/python2.7/dist-packages/CherryPy-3.2.2-py2.7.egg/cherrypy/lib/encoding.py", line 188, in __call__
D/MyApp.HTTP( 6966):     self.body = self.oldhandler(*args, **kwargs)
D/MyApp.HTTP( 6966):   File "/usr/local/lib/python2.7/dist-packages/CherryPy-3.2.2-py2.7.egg/cherrypy/_cpdispatch.py", line 40, in __call__
D/MyApp.HTTP( 6966):     raise sys.exc_info()[1]
D/MyApp.HTTP( 6966): HTTPError: (404, 'Missing parameters: myFile')
D/MyApp.HTTP( 6966): </pre>
D/MyApp.HTTP( 6966):     <div id="powered_by">
D/MyApp.HTTP( 6966):     <span>Powered by <a href="http://www.cherrypy.org">CherryPy 3.2.2</a></span>
D/MyApp.HTTP( 6966):     </div>
D/MyApp.HTTP( 6966):     </body>
D/MyApp.HTTP( 6966): </html>
D/MyApp.HTTP( 6966): statuscode: 404 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:10:59.080

```
HttpConnectionParams.setConnectionTimeout(params, 15000); 
HttpConnectionParams.setSoTimeout(params, 5 * 60 * 1000); 

HttpParams params = new BasicHttpParams(); 
params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);

HttpClient client = new DefaultHttpClient(params);
HttpPost post = new HttpPost("http://192.168.1.123:8080/upload"); 

File tmpFile = new File("/sdcard/Download/tst.txt");
MultipartEntity mpEntity = new MultipartEntity();
mpEntity.addPart("myFile", new FileBody(tmpFile, "text/plain"));
post.setEntity(mpEntity); 

HttpResponse response = (HttpResponse) client.execute(post); 
int statusCode = response.getStatusLine().getStatusCode();
HttpEntity entity = response.getEntity();
String page = EntityUtils.toString(entity);
Log.d(HTTPTAG, "reply: " + page);
Log.d(HTTPTAG, "statuscode: " + statusCode); 
```

# python - Python删除带字符的行

> ID：11764276
> 
> 赞同：-1
> 
> 时间：2012-08-01T17:15:34.053
> 
> 标签：python

我是 Python 新手。我正在寻找从包含字符的文件中删除所有行的最佳方法。

例如，从下面看，处理后只存在 User1、User2、User3 和 User 4。注意用户 4 有一个空格。

```
5!pY
"TmL
c]+y?"
|)}?E
\e2g%
User1
User2
User3
User 4
11-01-05
[GO-B 
```

如果有人能指出我正确的方向，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:22:04.033

如果您可以确保您将拥有一个*用户*字，您可以使用它来识别“有效”文本：您可以使用正则表达式来查找字符串“用户”，后跟 0 个或多个空格，后跟一个或更多数字：

```
>>> import re
>>> line='5!pY "TmL c]+y?" |)}?E \e2g% User1 User2 User3 User 4 11-01-05 [GO-B'
>>> regex=re.compile("User\s*\d+")
>>> regex.findall(line)
['User1', 'User2', 'User3', 'User 4'] 
```

否则，您需要编辑问题并提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:31:43.327

我认为所有这些行都包含字符，所以我假设您的意思是标点符号和空格？

```
import sys,string
xChars = string.punctuation + " "
for x in sys.stdin:
        for c in x. strip():
                if c in xChars:
                        break
        else:
                print x.strip() 
```

在包含您的示例数据的文件“deleteme”上运行此脚本：

```
> cat deleteme | python dellines.py 
User1
User2
User3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T17:30:43.870

如果您的意思是删除所有包含非字母、数字或空格字符的行，那么这应该可以解决问题。

```
import string

data = """5!pY
TmL
c]+y?"
|)}?E
\e2g%
User1
User2
User3
User 4
11-01-05
[GO-B"""

allowed = string.letters + string.digits + ' '

clean_data = [item for item in data.split('\n') if set(item).issubset(allowed)]
print clean_data #  ['TmL', 'User1', 'User2', 'User3', 'User 4'] 
```

# objective-c - 如何检查 UITextField 中的文本是否与特定模式匹配？

> ID：11764279
> 
> 赞同：0
> 
> 时间：2012-08-01T17:15:43.727
> 
> 标签：objective-c, ios, regex

我有一个 UITextField，当用户键入时，我需要检查他们迄今为止在文本字段中输入的文本是否与特定模式匹配。

更具体地说，我需要文本匹配任何数字 0-9 并且`####-##-##`是破折号的模式（请注意，这不是电话号码或电子邮件）。例如，条目匹配、不匹配和DOES 匹配，因为它尚未违反模式（即使文本尚未完全匹配模式）。`#``-``1990-12-09``1990:12:09``1990-12`

我应该如何处理这个？理想情况下，我不必在一系列 if 语句中硬编码。

困难在于我想检查文本字段中的文本是否与此模式匹配，*因为用户键入*. 我不想只在最后检查它。

我认为正则表达式可能是一种方式，但我对他们的经验还不够，无法知道他们是否拥有解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:22:50.540

您可以将键盘类型设置`myTextField.keyboardType = UIKeyboardTypeNumberPad`为限制输入类型的原因。

那么这篇文章应该有助于回答您的格式问题：[xx-xx-xxx 中的 UITextField 格式](https://stackoverflow.com/questions/7709450/uitextfield-format-in-xx-xx-xxx)

# iphone - 基于加速度计的运动

> ID：11764281
> 
> 赞同：0
> 
> 时间：2012-08-01T17:15:45.963
> 
> 标签：iphone, cocos2d-iphone

现在正在使用加速度计左右移动玩家精灵的游戏中工作。我使用了本教程：[COCOS2D_ACCELEROMETER_MOVEMENT](http://www.cocos2d-iphone.org/wiki/doku.php/tips:using_accelerometer_for_sprite_movement) 这仅在某些时候有效......有时不移动..我该如何解决这个问题？这是我的示例：[查看此示例](http://www.4shared.com/zip/BUJJedIy/testAcc.html) 感谢您阅读此内容……我的代码有什么问题？还有其他方法吗？

这是我的代码：

```
#define kHeroMovementAction 1
#define kPlayerSpeed 500
- (void) accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {

    // use the running scene to grab the appropriate game layer by it's tag

    // grab the player sprite from that layer using it's tag
    CCSprite *playerSprite = mPlayer;
    float destX, destY;
    BOOL shouldMove = NO;

    float currentX = playerSprite.position.x;
    float currentY = playerSprite.position.y;

    if(acceleration.x > 0.25) {  // tilting the device upwards
        destX = currentX - (acceleration.y * kPlayerSpeed);
        destY = currentY + (acceleration.x * kPlayerSpeed);
        shouldMove = YES;
    } else if (acceleration.x < -0.25) {  // tilting the device downwards
        destX = currentX - (acceleration.y * kPlayerSpeed);
        destY = currentY + (acceleration.x * kPlayerSpeed);
        shouldMove = YES;
    } else 

        if(acceleration.y < -0.25) {  // tilting the device to the right
        destX = currentX - (acceleration.y * kPlayerSpeed);
        destY = currentY + (acceleration.x * kPlayerSpeed);
        shouldMove = YES;
    } else if (acceleration.y > 0.25) {  // tilting the device to the left
        destX = currentX - (acceleration.y * kPlayerSpeed);
        destY = currentY + (acceleration.x * kPlayerSpeed);
        shouldMove = YES;
    } else {
        destX = currentX;
        destY = currentY;
    }

    if(shouldMove) 
    {
        CGSize wins = [[CCDirector sharedDirector] winSize];
        // ensure we aren't moving out of bounds     
        if(destX < 30 || destX > wins.width - 30 || destY < 30 || destY > wins.height - 100) {
            // do nothing
        } else {
            CCAction *action = [CCMoveTo actionWithDuration:0.5f position: CGPointMake(destX, playerSprite.position.y)];
            [playerSprite stopActionByTag:kHeroMovementAction];
            [action setTag:kHeroMovementAction];
            [playerSprite runAction:action];
        }
    } else {
        // should stop
        [playerSprite stopActionByTag:kHeroMovementAction];
    }

} 
```

**更新：这是[最好的方法。](https://gamedev.stackexchange.com/questions/33412/accelerometer-to-move-player-left-and-right/33427#33427)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:24:54.830

您应该在[这里查看 Ray Wenderlich 的滚动教程](http://www.raywenderlich.com/6804/how-to-make-a-multi-directional-scrolling-shooter-part-1#Adding_Accelerometer_Support)

他的加速度计部分靠近页面底部。

# objective-c - 这个“未找到属性”错误是 XCode 错误还是新手的编码错误？

> ID：11764284
> 
> 赞同：1
> 
> 时间：2012-08-01T17:15:49.827
> 
> 标签：objective-c, ios5, xcode4.3

> **可能重复：**
> [分配给模型类中的属性的值在视图/控制器类中消失](https://stackoverflow.com/questions/11772307/value-assigned-to-a-property-in-the-model-class-disappears-in-the-view-controlle)

[这是在类型 y 的对象上找不到属性 x](https://stackoverflow.com/questions/11752983/property-x-not-found-on-object-of-type-y)的后续行动，关于我得到的“在类型 y 的对象上找不到属性 x”错误。这是问题的更完整版本；我真的希望这是我的错误，而不是 XCode 中的错误，因为我对此很陌生，我依靠我得到的错误来帮助我学习。

问题出`(IBAction)testPressed`在 CalculatorViewController.m（代码如下）中调用的方法中，该方法使用名为`whatHappenedSinceLastClear`. 该属性在 CalculatorBrain.m 的接口中声明并在实现中合成，但 , 行中`(IBAction)testPressed`的行`NSMutableArray *program = brain.whatHappenedSinceLastClear;`产生错误`property 'whatHappenedSinceLastClear' not found on object of type 'CalculatorBrain *'.`

如果我在 CalculatorBrain.h 中声明 'whatHappenedSinceLastClear'，错误就会消失，正如我在上一篇文章的答案中所建议的那样，但另一位海报指出它不应该有所作为，这只是一种解决方法。在查看stackoverflow之后，我尝试清理并尝试删除派生数据，但我仍然收到错误消息。

这是我的（非常未完成的）代码，其中一些我知道的方法在长度上是无关紧要的。

计算器视图控制器.h

```
#import <UIKit/UIKit.h>

@interface CalculatorViewController : UIViewController
@property (weak, nonatomic) IBOutlet UILabel *display;
@property (weak, nonatomic) IBOutlet UILabel *history;

@end 
```

CalculatorViewController.m（剪掉了一些明显无关紧要的方法）

```
#import "CalculatorViewController.h"
#import "CalculatorBrain.h"

@interface CalculatorViewController ()
@property (nonatomic) BOOL userIsEnteringNumber;
@property (nonatomic) BOOL numberIsNegative;
@property (nonatomic,strong) CalculatorBrain *brain;
@property (nonatomic) NSArray *arrayOfDictionaries;
@property (nonatomic) NSDictionary *dictionary;
@end

@implementation CalculatorViewController
@synthesize display = _display;
@synthesize history = _history;
@synthesize userIsEnteringNumber = _userIsEnteringNumber;
@synthesize numberIsNegative;
@synthesize brain = _brain;
@synthesize arrayOfDictionaries;
@synthesize dictionary;

-(CalculatorBrain *)brain
{
if (!_brain) _brain = [[CalculatorBrain alloc] init];
return _brain;
}

- (IBAction)digitPressed:(UIButton *)sender 
{
NSString *digit = sender.currentTitle;
//self.display.text = @"0";
//Enter digit if it wouldn't create a two-decimal-point case.
NSRange range = [self.display.text rangeOfString:@"."];
if (range.location==NSNotFound || (![digit isEqualToString:@"."]))
{
    if (self.userIsEnteringNumber)
    {
        self.display.text = [self.display.text stringByAppendingString:digit];
        self.history.text = [self.display.text stringByAppendingString:@" "];
    }
    else 
    {
        self.history.text = [self.history.text stringByAppendingString:digit];
        self.history.text = [self.history.text stringByAppendingString:@" "];
        if (![sender.currentTitle isEqualToString:@"."])
        {
            self.display.text = digit;
        }
        else 
        {

        }
        self.userIsEnteringNumber = YES;
    }
}
}

- (IBAction)operationPressed:(UIButton *)sender 
{
NSDictionary *dict = [self loadDictionary];
if (self.userIsEnteringNumber) [self enterPressed];
NSString *operation = sender.currentTitle;
double result = [self.brain performOperation:operation];
self.display.text = [NSString stringWithFormat:@"%g",result];
self.history.text = [self.history.text stringByAppendingString:sender.currentTitle];
self.history.text = [self.history.text stringByAppendingString:@" = "];
[self.brain pushOperand:operation withDictionary:dict];
}

-(NSDictionary *)loadDictionary
{ 
NSDictionary *dict = self.dictionary;
NSArray *variableArray = [[NSArray alloc] init];
variableArray = [NSArray arrayWithObjects:@"x",@"y",@"z",@"foo",@"π",nil];
NSArray *valueArray = [[NSArray alloc] init];
valueArray = [NSArray arrayWithObjects:[NSNumber numberWithDouble:3],[NSNumber numberWithDouble:4.1],[NSNumber numberWithDouble:-6],[NSNumber numberWithDouble:8.2],[NSNumber numberWithDouble:3.14159], nil];
dict = [[NSDictionary alloc] initWithObjects:valueArray forKeys:variableArray];
return dict;
}

- (IBAction)variablePressed:(UIButton *)sender 
{
NSDictionary *dict = [self loadDictionary];
NSString *var = sender.currentTitle;
[self.brain convertVariable:var usingDictionary:dict];
self.display.text = [NSString stringWithFormat:@"%@",var];
self.history.text = [self.history.text stringByAppendingString:sender.currentTitle];
[self.brain pushOperand:[dict objectForKey:var] withDictionary:dict];
}

-(IBAction)testPressed:(id)sender
{
CalculatorBrain *brain = self.brain;   
brain = [[CalculatorBrain alloc] init];
NSMutableArray *program = brain.whatHappenedSinceLastClear;
double blah = [brain runProgram:program];
self.history.text=@"";
self.history.text=[self.history.text stringByAppendingFormat:@"%f",blah];
NSLog(@"%f",blah);
}

- (IBAction)enterPressed 
{
[self.brain pushOperand:[NSNumber numberWithDouble:[self.display.text doubleValue]] withDictionary:self.dictionary];
self.userIsEnteringNumber = NO;
}

@end 
```

CalculatorBrain.h

```
#import <Foundation/Foundation.h>

@interface CalculatorBrain : NSObject

-(void)pushOperand:(id)operand withDictionary:(NSDictionary *)dictionary;
-(double)performOperation:(NSString *)operation;
-(void)clearStack;
-(void)deleteLastDigit;
-(double)convertVariable:(NSString *)variable usingDictionary:dictionaryContainingValuesYouWantToUse;
@property (readonly) id thisMeansAProgramCanGetAndSet;
+ (NSSet *)variablesUsedInProgram:(id)whatHappenedSinceLastClear;
-(double)runProgram:(id)whatHappenedSinceLastClear;
- (double)runProgram:(id)whatHappenedSinceLastClear usingVariableValues:(NSDictionary *)variableValues;
-(NSString *)descriptionOfProgram:(id)whateverSpecificProgramYouNeedToDescribe;

@end 
```

和 CalculatorBrain.m（同样被剪断了明显无关紧要的方法）。

```
#import "CalculatorBrain.h"

@interface CalculatorBrain ()
-(id)copyOfWhatHappenedSinceLastClear;
@property (nonatomic, strong) NSMutableArray *whatHappenedSinceLastClear;
-(double)popOffProgramStack:(NSMutableArray *)particularStackYouNeedToPopOff;
-(double)runProgram:(id)whateverSpecificProgramYouNeedToRun;
-(NSString *)descriptionOfProgram:(id)whateverSpecificProgramYouNeedToDescribe;
@end

@implementation CalculatorBrain
@synthesize whatHappenedSinceLastClear = _whatHappenedSinceLastClear;
@synthesize thisMeansAProgramCanGetAndSet = _thisMeansAProgramCanGetAndSet;

-(id)copyOfWhatHappenedSinceLastClear
{
return [self.whatHappenedSinceLastClear copy];
}

-(double)runProgram:(id)whatHappenedSinceLastClear
{
NSMutableArray *mutableCopyOfWhatHappenedSinceLastClear;
if ([whatHappenedSinceLastClear isKindOfClass:[NSArray class]]) {
    mutableCopyOfWhatHappenedSinceLastClear = [whatHappenedSinceLastClear mutableCopy];
}
return [self popOffProgramStack:mutableCopyOfWhatHappenedSinceLastClear];
}

- (double)runProgram:(id)whatHappenedSinceLastClear usingVariableValues:(NSDictionary *)variableValues
{
return 0;
}

- (double)popOffProgramStack:(NSMutableArray *)particularStackYouNeedToPopOff
{
double result = 0;

id topOfStack = [particularStackYouNeedToPopOff lastObject];
if (topOfStack) [particularStackYouNeedToPopOff removeLastObject];

if ([topOfStack isKindOfClass:[NSNumber class]])
{
    result = [topOfStack doubleValue];
}
else if ([topOfStack isKindOfClass:[NSString class]])
{
    NSString *operation = topOfStack;
    if ([operation isEqualToString:@"+"]) {
        result = [self popOffProgramStack:particularStackYouNeedToPopOff] +
        [self popOffProgramStack:particularStackYouNeedToPopOff];
    } else if ([@"*" isEqualToString:operation]) {
        result = [self popOffProgramStack:particularStackYouNeedToPopOff] *
        [self popOffProgramStack:particularStackYouNeedToPopOff];
    } else if ([operation isEqualToString:@"-"]) {
        double subtrahend = [self popOffProgramStack:particularStackYouNeedToPopOff];
        result = [self popOffProgramStack:particularStackYouNeedToPopOff] - subtrahend;
    } else if ([operation isEqualToString:@"/"]) {
        double divisor = [self popOffProgramStack:particularStackYouNeedToPopOff];
        if (divisor) result = [self popOffProgramStack:particularStackYouNeedToPopOff] / divisor;
    }
}

return result;
}

-(NSMutableArray *)whatHappenedSinceLastClear
{
if(!_whatHappenedSinceLastClear) _whatHappenedSinceLastClear = [[NSMutableArray alloc] init];
return _whatHappenedSinceLastClear;
}

-(void)clearStack
{
self.whatHappenedSinceLastClear = [[NSMutableArray alloc] init];
}

-(void)pushOperand:(id)operand withDictionary:(NSDictionary *)dictionary
{
NSArray *operations = [[NSArray alloc] initWithObjects:@"+",@"-",@"/",@"*",@"sin",@"cos",@"√", nil];
NSNumber *operandAsNumberObject;
NSString *operationAsObject;
if (![operand isKindOfClass:[NSString class]])
{
    operandAsNumberObject = operand;
    [self.whatHappenedSinceLastClear addObject:operandAsNumberObject];
}
else if ([operations containsObject:operand])
{
    operationAsObject = operand;
    [self.whatHappenedSinceLastClear addObject:operationAsObject];
}
else 
{
    operandAsNumberObject = [dictionary objectForKey:operand];
    [self.whatHappenedSinceLastClear addObject:operandAsNumberObject];
}
}

-(double)popOperand
{
NSNumber *operandAsObject = [self.whatHappenedSinceLastClear lastObject];
if (operandAsObject) [self.whatHappenedSinceLastClear removeLastObject];
return [operandAsObject doubleValue];
}

- (double)performOperation:(NSString *)operation
{
[self.whatHappenedSinceLastClear addObject:operation];
return [self runProgram:self.copyOfWhatHappenedSinceLastClear];
//when it was a class method code was:  return [[self class] runProgram:self.copyetc.]
}

@end 
```

那么有没有人看到什么（手指交叉，这是一个基本的，愚蠢的错误）我做错了可以解释发生了什么？

# python - 如何在 Avro 模式中嵌套记录？

> ID：11764287
> 
> 赞同：38
> 
> 时间：2012-08-01T17:16:06.407
> 
> 标签：python, avro

我正在尝试让 Python 解析 Avro 模式，例如以下...

```
from avro import schema

mySchema = """
{
    "name": "person",
    "type": "record",
    "fields": [
        {"name": "firstname", "type": "string"},
        {"name": "lastname", "type": "string"},
        {
            "name": "address",
            "type": "record",
            "fields": [
                {"name": "streetaddress", "type": "string"},
                {"name": "city", "type": "string"}
            ]
        }
    ]
}"""

parsedSchema = schema.parse(mySchema) 
```

...我得到以下异常：

```
avro.schema.SchemaParseException: Type property "record" not a valid Avro schema: Could not make an Avro Schema object from record. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-01T18:10:18.390

根据网络上的其他来源，我将重写您的第二个地址定义：

```
mySchema = """
{
    "name": "person",
    "type": "record",
    "fields": [
        {"name": "firstname", "type": "string"},
        {"name": "lastname", "type": "string"},
        {
            "name": "address",
            "type": {
                        "type" : "record",
                        "name" : "AddressUSRecord",
                        "fields" : [
                            {"name": "streetaddress", "type": "string"},
                            {"name": "city", "type": "string"}
                        ]
                    }
        }
    ]
}""" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-07-30T14:44:31.190

每次我们将类型提供为命名类型时，需要将字段指定为：

```
"name":"some_name",
"type": {
          "name":"CodeClassName",
           "type":"record/enum/array"
 } 
```

但是，如果命名类型是 union，那么我们不需要额外的类型字段并且应该可以用作：

```
"name":"some_name",
"type": [{
          "name":"CodeClassName1",
           "type":"record",
           "fields": ...
          },
          {
           "name":"CodeClassName2",
            "type":"record",
            "fields": ...
}] 
```

希望这进一步澄清！

# java - junit 4.11-SNAPSHOT中@Parameters注解的使用

> ID：11764289
> 
> 赞同：2
> 
> 时间：2012-08-01T17:16:13.667
> 
> 标签：java, scala, junit

我想利用最新版本的 junit 中的新功能来命名我的参数化测试

我有以下两个用 java & scala 编写的测试，但是 scala 测试会生成编译器错误：

> 错误：未知注释参数名称：名称 @Parameters(name = "{0}") def data: util.Collection[Array[AnyRef]] = util.Arrays.asList(Array("x"), Array("y" ), 数组("z"))

导致此错误的实现有什么区别？

### 爪哇

```
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.junit.runners.Parameterized.Parameters;

import java.util.Arrays;
import java.util.Collection;

import static org.junit.Assert.fail;

@RunWith(Parameterized.class)
public class ParameterizedTest {
    @Parameters(name = "{0}")
    public static Collection<Object[]> data() {
        return Arrays.asList(new Object[]{"x"}, new Object[]{"y"}, new Object[]{"z"});
    }

    @Test
    public void foo() {
        fail("bar");
    }
} 
```

### 斯卡拉

```
import java.util
import org.junit.Assert._
import org.junit.Test
import org.junit.runner.RunWith
import org.junit.runners.Parameterized
import org.junit.runners.Parameterized._

@RunWith(classOf[Parameterized])
class ParameterizedScalaTest {
  @Test def foo() {
    fail("bar")
  }
}

object ParameterizedScalaTest {
  @Parameters(name = "{0}") def data: util.Collection[Array[AnyRef]] = util.Arrays.asList(Array("x"), Array("y"), Array("z"))
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:54:42.420

事实证明，这里的问题是由于 junit-dep.jar 通过对 jMock 2.4.0 的瞬时依赖而位于类路径上

删除修复了编译器错误，奇怪的是这是 scalac 而不是 javac 的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:58:10.443

因为@Parameters 被定义为一个内部，你似乎需要给出全名。

尝试

```
@Parameters(Parameters.name = "{0}") 
```

至少，这是我在 @Parameters 和 @Test 的定义中可以观察到的唯一显着差异，这是有效的：

```
@Test(timeout = 10) 
```

# asp.net - 如何在 VisualBasic Web 应用程序中保留 IE8 cookie

> ID：11764292
> 
> 赞同：-4
> 
> 时间：2012-08-01T17:16:22.697
> 
> 标签：asp.net, visual-studio-2010, cookies, internet-explorer-8

我在 VisualBasic 2010 上编写了一个 Web 应用程序，并且 cookie 在除 Internet Explorer 8 之外的所有浏览器中都存在。

下面的答案解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:42:34.503

我通过重写我的 cookie 读写方法解决了这个问题。（使用 VisualBasic2010 开发并在 Windows Server 2008 上运行的 Web 应用程序）

```
sub update_cookie_string( cookie_string, cookie_subkey  )

    dim cookie_object as HttpCookie     
    if request.cookies( PROGRAM_COOKIE_NAME ) is nothing then   ' PROGRAM_COOKIE_NAME not at browser?
        cookie_object = new httpcookie( PROGRAM_COOKIE_NAME )           ' init cookie object as cookie named: PROGRAM_COOKIE_NAME
    else
        cookie_object = request.cookies( PROGRAM_COOKIE_NAME )          ' Read cookie named PROGRAM_COOKIE_NAME from page from browser
    End If

    cookie_object.Values( cookie_subkey ) = cookie_string       ' Update cookie_subkey with new value cookie_string
    cookie_object.Expires = DateTime.Now.AddDays(365)           ' set expiration for a long time
    response.Cookies.add( cookie_object )                   ' Send it back to browser for storage there.
end sub

' Retrieve stored cookie_subkey.
function get_cookie_string( byval cookie_subkey  ) 
    dim cookie_object as HttpCookie     
    if  request.cookies( PROGRAM_COOKIE_NAME ) is nothing then  ' PROGRAM_COOKIE_NAME not at browser?
        get_cookie_string = ""
    else
        get_cookie_string = Request.Cookies( PROGRAM_COOKIE_NAME )( cookie_subkey )  ' Return string value of cookie_subkey 
    End If 
```

# python - python和matplotlib中的更新图

> ID：11764293
> 
> 赞同：6
> 
> 时间：2012-08-01T17:16:25.380
> 
> 标签：python, plot, matplotlib, figure

我已经对 SO 进行了搜索，但还没有找到正确的“解决方案”来解决我的问题。我正在对一些我希望绘制的数据运行循环。在循环的每一步——我用 plt.show() 绘制图形。但是，由于这是一个阻塞功能，我被卡住了，直到我手动关闭窗口，然后循环继续，下一个图出现。

我想做的是能够绑定一个按键事件来关闭图形并继续循环（而不是使用鼠标将“X”移出图形）。

如果这不可能，我想设置一个计时器来关闭图形并继续循环。

我所有的问题似乎都涉及 plt.show() 阻止其他一切的事实——有什么办法解决这个问题吗？

我的图上的一些注释：它们使用相同的轴，但包含散点图、填充框和注释——它们总是在变化。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T17:39:52.450

尝试使用`ion`from `matplotlib.pyplot`：

```
import matplotlib.pyplot as pp
pp.ion()
fig = pp.figure() 
```

`ion`有关交互式与非交互式使用的更多信息，请[点击此处](http://matplotlib.sourceforge.net/faq/usage_faq.html#interactive-example)

或者，如果您想使用按钮按下方法，请分配回调

```
def moveon(event):
    pp.close()

cid = fig.canvas.mpl_connect('key_press_event', moveon)
pp.show() 
```

事件计时器更棘手，因为`show`命令是阻塞的，所以它可能必须涉及线程。

# javascript - 在跨度中包装变量词

> ID：11764294
> 
> 赞同：1
> 
> 时间：2012-08-01T17:16:27.177
> 
> 标签：javascript, jquery

基于各种用户输入，我们将一组单词放入隐藏的 div (#words) 中，然后使用该信息执行功能。

我想做的是检查 div 中的现有单词，即：

```
terms = $("#words").html(); 
```

然后，在页面其他位置的可见且单独的 div (.ocrText) 中，仅将这些单词包装在强标记中。

```
$('.ocrText').each(function() {
  $(this).html($(this).html().replace(/term/g, "<strong>term</strong>"));
}); 
```

所以，如果他们搜索“Tallant France”并且我们存储了它，那么下面的句子：

“马克·塔兰特在法国服役。”

会成为：

“马克·`<strong>`塔兰特`</strong>`曾任职`<strong>France</strong>`。”

但我不知道如何将该变量注入 .replace()

///

编辑：这些术语以这种格式插入到#words div中：["Tallant","France","War"] ...等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:01:41.900

假设您的单词仅包含字母数字字符，您可以构造一个正则表达式来一次搜索所有这些字符，如下所示：

```
html = html.replace (
  new RegExp(terms.split(/\s*,\s*|\s+/).join('|'), 'g'), '<strong>$&</strong>'); 
```

拆分应该将术语字符串转换为包含单个单词的数组，在示例中，我将其编码为以逗号分隔，可选地由空格或空格包围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:23:19.320

```
$('.ocrText').each(function() {
    var term = 'term'
    var pattern = RegExp(term, 'g')
    $(this).html($(this).html().replace(pattern, "<strong>" + term + "</strong>"));
}); 
```

# c# - 增加画布上对象的拇指灵敏度

> ID：11764295
> 
> 赞同：0
> 
> 时间：2012-08-01T17:16:32.943
> 
> 标签：c#, wpf, xaml

我在画布上有一个对象，用户可以使用它周围的两个拇指来选择和移动它。我的问题是如何提高鼠标的灵敏度，以便当光标靠近拇指时允许用户拖动/移动对象？

当然这不是鼠标灵敏度，但我相信我必须增加拇指半径，所以鼠标诅咒会变成不同的状态（移动或......），目前，用户很难选择或移动他的光标超近对于那些拇指，需要太多的移动和点击，这不会使其用户友好。

任何帮助将不胜感激。

谢谢，阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:38:31.780

你可以添加一个比对象大的路径吗？

例如，您有一个半径为 10 厘米的圆形对象。

添加半径为 15 的圆形路径（透明色）。

# android - 使用 Phonegap 在 Android 中更改铃声设置

> ID：11764302
> 
> 赞同：4
> 
> 时间：2012-08-01T17:16:57.637
> 
> 标签：android, cordova

我正在考虑将 PhoneGap 用于我的第一个 android 项目，因为我之前在 HTML5 方面有丰富的经验。但在我开始深入研究 phonegap 之前，我想确定 phonegap 是否提供了我项目所需的所有功能。

我的应用程序应该能够更改设备的铃声设置（音量和振动设置）。所以，我想知道这是否可以使用 PhoneGap。

我查看了 PhoneGap 的文档，但找不到任何东西。我什至尝试在他们的谷歌小组中问这个问题，但我认为在堆栈溢出中问这个问题会快得多。

如果无法使用PhoneGap ...有任何解决方法吗？

此致， 阿尤什·什雷斯塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T09:17:31.353

您需要为此编写自己的插件 - Cordova 并没有开箱即用，因为它是特定于平台的。

请查看以下链接以了解如何在本地更改铃声：[在 Android 中设置铃声](https://stackoverflow.com/questions/1986756/setting-ringtone-in-android)。

然后，您需要将其转换为插件（这应该不会太难 - 有很多示例：[http](http://plugins.cordova.io/) ://plugins.cordova.io/ ，您可以下载和检查）。

希望有帮助！

# java - Java中的Mongodb地理查询

> ID：11764303
> 
> 赞同：3
> 
> 时间：2012-08-01T17:16:58.780
> 
> 标签：java, mongodb, geospatial

如何在 Java 中运行这个 mongodb 命令 geonear

> db.runCommand ({ geoNear : "mycollection", near : [ -121.97679901123047,37.557369232177734], 球形 : true, maxDistance : 50 / 3959 /* 到弧度 */ , 查询: { $or : [ {"myuserid" : "att "},{"_id":{$in: [ObjectId("4fda8fbbe7e96e2d775595d")] }}] } } );

我正在使用 Commandresult 在 java 中尝试此操作，但出现错误。

这就是我到目前为止所做的并得到空指针异常，尽管命令打印正确。我是 Java 和数据库的新手。

```
BasicDBObject myCmd = new BasicDBObject(); 
myCmd.append("geoNear", "mycollection"); 
double[] loc = {-121.97679901123047,37.557369232177734}; 
myCmd.append("near", loc); 
myCmd.append("spherical", true); 
myCmd.append("maxDistance", (double)50 / 3959 ); 
System.out.println(myCmd); 
CommandResult myResults = db.command(myCmd); 
System.out.println(myResults.toString()); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:27:10.283

我能够弄清楚我的问题。未连接到正确的数据库。感谢你的帮助。地理查询现在工作正常。谢谢。

# multidimensional-array - Lua：访问多维表/数组中的变量

> ID：11764304
> 
> 赞同：1
> 
> 时间：2012-08-01T17:17:03.477
> 
> 标签：multidimensional-array, lua, lua-table

我正在尝试使用一个表格制作一个网格，该表格存储诸如 x & y 坐标、纹理信息和另一个表格等信息。下面是一些用于创建网格的代码：

```
for i = i, n do
    local random = math.floor(rainbow.random(1, 13))
    self.grid[i] = {
        sprite = Labyrinth:make_cell_texture(spritebatch, position_x, position_y, i, random),
        y = position_y,
        x = position_x,
        nav = Cell:get_nav(random)
    }
    position_x = position_x + 0.09375
end 
```

它在

```
nav = Cell:get_nav(random) 
```

我正在创建新表的部分：

```
if random == 1 then
    self.nav = {
        north = true,
        east = false,
        south = false,
        west = false,
    } 
```

问题是访问所述变量，以检查它们是真还是假。我回到`self.nav`，`grid[i].nav`我能够`print(self.nav.east)`得到一个`true`.

但是稍后访问该表会导致它总是返回`nil`，即使我可以让它打印那里有一张表。

我试过这个循环：

```
for i = 1, 10 do
    if self.grid[i].nav.north and self.grid[i + 10].nav.south then
        print("Two sides are touching!")
    end
end 
```

也有`self.grid[i][4].north`，但无济于事。

是不是我设置的方式不对？还尝试重命名`nav`为`[4]`.

我在吠叫错误的树吗？桌子不是设计得这么深吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:29:19.670

在您填充网格的循环中，您使用以下代码：

```
nav = Cell:get_nav(random) 
```

现在，从您的问题来看，它似乎调用了这样的函数：

```
function Cell:get_nav(random)
   self.nav = {
    north = true,
    east = false,
    south = false,
    west = false,
}
--more code here
end 
```

如果是这样，发生的事情是您将 Cell 传递给函数内部的标识符 self ，所以您实际上是在说

```
Cell.nav = {
    north = true,
    east = false,
    south = false,
    west = false,
} 
```

这是因为 Dog:jump(height) 与 Dog.jump(self,height) 相同，其中 Dog 被传递给 self。

但是，我相信您打算拥有的是网格 self.grid[i] 中的每个索引都包含一个表，该表本身包含一个键“导航”和一个包含方向的表。如果是这样，请更改 Cell:get_nav 函数以返回值，如下所示：

```
if random == 1 then
return {
    north = true,
    east = false,
    south = false,
    west = false,
} 
```

这会将方向表分配给 self.grid[i].nav，与之前一样，它将 nil 值分配给 self.grid[i].nav，因为：

```
function edit_my_param(f)
f = 3
end 

nav = edit_my_param(4)
print(nav) 
```

将值 nav 设置为 nil，因为该函数不返回值。

问候，亨利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:40:44.827

在某些情况下，您会调用它`Cell[i]`，而在其他情况下`grid[i]`- 您确定您指的是同一张表吗？

`Cell:get_nav`返回什么？它返回的值被放入，`self.Cell[i].nav`因此它可能是多余的，而且设置也肯定会令人`self.nav`困惑`Cell:get_nav`

# mysql - 中间表中的唯一外键关联

> ID：11764305
> 
> 赞同：0
> 
> 时间：2012-08-01T17:17:12.030
> 
> 标签：mysql, triggers, phpmyadmin

我对 Mysql 有点陌生，并且遇到了唯一约束的问题：p

以下是表格：

![在此处输入图像描述](../Images/02163981d806684d27767d66c8a53d3e.png)

该关系将是一个中间表，字段将是：

ID (主) userAsker (外键) userAsked (外键) (((accept (int) don't care)))

我想要的是，我们不能拥有 2 次具有相同 2 个外键的实体：

ID：1 用户询问：1 用户询问：2

ID：2 用户询问：1 用户询问：2

否则，用户可以做大量的需求......我知道如何在 phpmyadmin 中创建一个唯一的索引，但我不知道如何将两个字段分组到一个唯一的索引中......有人可以帮助我：S 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:23:30.843

只需在您的 phpmyadmin 中执行此 SQL 语句。

`alter table [your_intermedia_table_name] add unique key(userAsker, userAsked)`

# java - 去除重复元素的研究

> ID：11764308
> 
> 赞同：-2
> 
> 时间：2012-08-01T17:17:21.140
> 
> 标签：java, collections

> **可能重复：**
> [以不同方式从列表中删除重复项](https://stackoverflow.com/questions/11763362/removing-duplicates-from-the-list-with-different-ways)

我正在做一项研究，并在下面找到从列表中删除重复项的方法..但请告知是否还有其他方法，因为我正在对此进行研究，我也想在集合中探索其他方法，这将是一个太棒了..我对我的研究更感兴趣的是新的 jdk 1.5 在这种情况下提供了一些新的东西

```
class Emp //implements Comparable
{
      String name,job;
      int salary;
      public Emp(String n,String j,int sal)
      {
         name=n;
         job=j;
         salary=sal;
       }
      public void display()
      {
        System.out.println(name+"\t"+job+"\t"+salary);
       }
     public boolean equals(Object o)
      {

         Emp p=(Emp)o;
          return this.name.equals(p.name)&&this.job.equals(p.job) &&this.salary==p.salary;
       }
     public int hashCode()
       {
          return name.hashCode()+job.hashCode()+salary;
       }

      /* public int compareTo(Object o)
       {
          Emp e=(Emp)o;
          return this.name.compareTo(e.name);
           //return this.job.compareTo(e.job);
        //   return this.salary-e.salary;

        }*/
} 
```

最后一堂课是……

```
 class EmpListDemo
    {
          public static void main(String arg[])
          {
              List  list=new ArrayList ();
              list.add(new Emp("Ram","Trainer",34000));
              list.add(new Emp("Sachin","Programmer",24000));
              list.add(new Emp("Ram","Trainer",34000));
              list.add(new Emp("Priyanka","Manager",54000));
              list.add(1,new Emp("Ravi","Administrator",44000));
              list.add(new Emp("Anupam","Programmer",34000));
              list.add(new Emp("Priyanka","Manager",54000));
              list.add(new Emp("Sachin","Team Leader",54000));
              System.out.println("There are "+list.size()+" elements in the list.");

              System.out.println("Content of list are : ");
              ListIterator itr1=list.listIterator();
              while(itr1.hasNext())
              {
                Emp e=(Emp)itr1.next();  
                e.display();
              }           

//Removing duplicates from the list
          Set hs = new HashSet();
          hs.addAll(list);
          list.clear();
          list.addAll(hs);
          System.out.println("******************************");
          System.out.println("There are "+hs.size()+" elements in the set.");
          System.out.println("Contents after modification : ");
          Iterator itr=list.iterator();
          while(itr.hasNext())
          {
            Emp e=(Emp)itr.next();  
            e.display();
          }   

              }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:21:57.067

使用`HashSet`：

```
class EmpListDemo
{
  public static void main(String arg[])
  {
      Set list = new HashSet();
      list.add(new Emp("Ram","Trainer",34000));
      list.add(new Emp("Sachin","Programmer",24000));
      list.add(new Emp("Ram","Trainer",34000));
      list.add(new Emp("Priyanka","Manager",54000));
      list.add(new Emp("Ravi","Administrator",44000));
      list.add(new Emp("Anupam","Programmer",34000));
      list.add(new Emp("Priyanka","Manager",54000));
      list.add(new Emp("Sachin","Team Leader",54000));
      System.out.println("There are "+list.size()+" elements in the list.");

      System.out.println("Content of list are : ");
      ListIterator itr1=list.listIterator();
      while(itr1.hasNext())
      {
        Emp e=(Emp)itr1.next();  
        e.display();
      }           

      }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:24:17.560

使用`Set`Brother的任何实现..而不是允许重复然后删除它；防止您的数据结构甚至允许它们...

# php - 如何优化我的 array_join（模拟 LEFT JOIN）函数？

> ID：11764309
> 
> 赞同：2
> 
> 时间：2012-08-01T17:17:28.123
> 
> 标签：php

我编写了以下代码以在 PHP 中获取数组并将它们“连接”在一起，就像在 MySQL 中使用 LEFT JOIN 一样。为了我的缘故，我使用 foreach 编写了函数，并将数组传入并返回了一个新数组……我觉得它非常易读，但我也知道它效率低下。

理想情况下，我希望这个函数可以处理每个数组超过 10,000 行，我怀疑这意味着：1）通过引用传递 $original（以节省内存），以及 2）使用 PHP 迭代数组函数之一而不是 foreach （以节省处理时间）。

通常我不会发布这类“测验”之类的问题，但我觉得这个问题的答案会让社区受益。（像这家伙：[加入 2 多维数组](https://stackoverflow.com/questions/8833522/join-2-multidimensional-array)）

愿 1）最快和 2）最低内存消耗的答案获胜！:P

```
<?php

// Join Arrays on Keys (**updated with knittl's suggestion**)
function array_join($original, $merge, $on) {
    if (!is_array($on)) $on = array($on);
    foreach ($merge as $remove => $right) {
        foreach ($original as $index => $left) {
            foreach ($on as $from_key => $to_key) {
                if (!isset($original[$index][$from_key])
                    || !isset($right[$to_key])
                    || $original[$index][$from_key] != $right[$to_key])
                    continue 2;
            }
            $original[$index] = array_merge($left, $right);
            unset($merge[$remove]);
        }
    }
    return array_merge($original, $merge);
}

// Test Arrays
$data1 = array(
    array(
        'productId' => '822335',
        'dateHour' => '2011-11-17 06:00:00',
        'qtySold' => '200',
        'qtyCanceled' => '10',
    ),
    array(
        'productId' => '822335',
        'dateHour' => '2011-11-17 07:00:00',
        'qtySold' => '100',
        'qtyCanceled' => '20',
    ),
    array(
        'productId' => '822336',
        'dateHour' => '2011-11-17 06:00:00',
        'qtySold' => '0',
        'qtyCanceled' => '30',
    ),
    array(
        'productId' => '822336',
        'dateHour' => '2011-11-17 07:00:00',
        'qtySold' => '50',
        'qtyCanceled' => '40',
    ),
);

$data2 = array(
    array(
        'entity_id' => '822335',
        'dateHour' => '2011-11-17 06:00:00',
        'productInventory' => '300',
    ),
    array(
        'entity_id' => '822335',
        'dateHour' => '2011-11-17 07:00:00',
        'productInventory' => '200',
    ),
    array(
        'entity_id' => '822336',
        'dateHour' => '2011-11-17 06:00:00',
        'productInventory' => '100',
    ),
    array(
        'entity_id' => '822336',
        'dateHour' => '2011-11-17 07:00:00',
        'productInventory' => '50',
    ),
);

// Usage
$result = array_join($data1, $data2, array(
    'productId' => 'entity_id',
    'dateHour' => 'dateHour'
));
print_r($result); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:34:00.257

更好的？

```
function array_join($original, $merge, $on) {
    if (!is_array($on)) $on = array($on);
    foreach ($merge as $remove => $right) {
        foreach ($original as $index => $left) {
            foreach ($on as $from_key => $to_key) {
                if (!isset($original[$index][$from_key])
                || !isset($right[$to_key])
                || $original[$index][$from_key] != $right[$to_key])
                    continue 2;
            }
            $original[$index] = array_merge($left, $right);
            unset($merge[$remove]);
        }
    }
    return array_merge($original, $merge);
} 
```

# php - js中的模块和php中的类有什么区别？

> ID：11764313
> 
> 赞同：7
> 
> 时间：2012-08-01T17:17:36.363
> 
> 标签：php, javascript, singleton

我正在在线学习模块，似乎 js 中的模块和 php 中的类非常相似。两个组一起工作，以便更容易理解编码。函数可以在两者中声明并设为公共或私有。它们在使用上有何相似之处，又有何不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:17:45.103

Javascript 的模块提供了一些不错的特性，例如封装、私有状态，甚至从其他模块继承。虽然它们提供了类的一些特性，就像在 PHP 中一样，但它们不是。他们试图在现有的 Javascript 功能上构建来模拟类，因此会造成混淆。即它们的**外观和感觉都像类**。

Javascript 的模块是分配给变量的匿名函数的实例。因此，它们具有从上到下执行代码的函数的所有功能，它们具有并且有时使用**返回语句**（在 PHP 类中，除了字段定义和赋值之外，没有任何语句可以直接运行），它们甚至**可以访问全局变量**。另一方面，在 PHP 中，一个类，或者更确切地说是它的方法，不能访问不在类本身中的变量。为了访问全局变量，类方法或静态函数必须显式调用该变量，即`global $a`导入它。在 js 模块中，所有全局变量都是可访问的，但有时会选择显式导入它们以获得更整洁的代码`(function(a){})(imported);`

另一个重要的问题是数据抽象。虽然 js 模块为字段提供私有状态，但 PHP 的类，就像 C++、java、python 等一样，为属性提供了更多的安全性。它允许基类使用`abstract class`and`interface`关键字，其中类方法和属性仅被定义或结构化，但不被使用。

PHP 类也有构造函数和析构函数，它们在类对象初始化时调用，最后一次用于销毁对象。当然，您可以在模块中创建函数以在需要时运行，而在 PHP 中，方法中的函数仅在被对象、类或其他函数调用时才会执行。

类中有静态函数，它们甚至可以在没有类的对象的情况下调用，并且独立于对象运行，而在js中，一切都是对象；这违背了静态函数的观点。

它们的相似之处在于：都具有继承性，您可以使用新模块扩展现有模块，而在 PHP 中，您可以使用`extends`从父类继承。它们都具有阻止外部访问的私有数据状态，它们都对数据和方法进行分组和打包，并且在正确使用时都很棒。

# php - 为什么 Yii $model->save() 在使用虚假电子邮件时失败（格式正确）

> ID：11764314
> 
> 赞同：2
> 
> 时间：2012-08-01T17:17:37.937
> 
> 标签：php, validation, email, yii

正如刚才提到的。

这是一个片段：

```
$model=SomeModel::model()->findByPk($someId);
$model->email = $_POST['email'];
$model->save(); 
```

什么时候失败`$_POST['email']`。`test@asdf134.com`什么时候成功`$_POST['email']`。`test@hotmail.com`

这有什么问题？此外，当我使用它时，它也没有显示任何格式错误，`test@asdf134.com`并且除了设置的电子邮件之外，日志完全相同。

Yii 是否对电子邮件进行身份验证？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:28:45.920

将**checkMX**设置为*true*将强制它根据 DNS 记录进行验证。

[http://www.haldwaniuk.in/validating-email-in-yii/](http://www.haldwaniuk.in/validating-email-in-yii/)

# jquery - 如何制作一个反映逐步表单进度的 jquery/css 进度条？

> ID：11764317
> 
> 赞同：1
> 
> 时间：2012-08-01T17:18:17.903
> 
> 标签：jquery, progress

我看到很多示例进度条显示进度条已填满。但是，我只想知道我如何才能让进步一步一步地反映进步。可以在[这里](http://planner.builtbybuffalo.com/step-1/)看到我想要的一个很好的例子。来自其他页面的任何有用的代码或示例/演示都会很好。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T17:22:49.820

如果你喜欢 Buffalo 的，看看*他们*是怎么做的。

首先，他们定义了一个这样的 div：

```
<div id="progress">
    <div id="complete" class="s1">
        <div id="marker"></div>
    </div>
</div> 
```

然后他们使用 CSS 根据进度（由 class="s1" 等控制）呈现 div。

```
/**
 * PROGRESS
 */
#progress,#complete {
    width: 520px;
    margin: 1px 0 19px;
    height: 32px;
    background:url(/img/backgrounds/progress.png);
    position:relative;
}
#complete {
    background-position: 0px 57px;
    margin-top: 0;
}
#complete #marker {
    position: absolute;
    top: 0;
    right: -26px;
    background:url(/img/backgrounds/markers.png);
    width: 26px;
    height: 32px;
}
#progress .s1 {
    width: 19px;
}
#progress .s2 {
    width:111px;
}
#progress .s3 {
    width:203px;
}
#progress .s4 {
    width:295px;
}
#progress .s5 {
    width:386px;
}
#progress .s6 {
    width:478px;
}
#progress .s2 #marker {
    background-position: -26px 0;
}
#progress .s3 #marker {
    background-position: -52px 0;
}
#progress .s4 #marker {
    background-position: -78px 0;
}
#progress .s5 #marker {
    background-position: -104px 0;
}
#progress .s6 #marker {
    background-position: -130px 0;
} 
```

CSS 操作图像以显示所需的状态

![在此处输入图像描述](../Images/16febf91d9ab602702b6dc4b913b4a31.png)

![在此处输入图像描述](../Images/5788c8685566d75783aaabee7066f4be.png)

# ruby-on-rails - 如何在 Heroku 服务器上使用 Barby::Code128A？

> ID：11764319
> 
> 赞同：0
> 
> 时间：2012-08-01T17:18:35.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, barcode

我无法弄清楚为什么在 heroku 服务器上我的应用程序崩溃了。在本地服务器上似乎一切正常。

```
2012-08-01T17:14:50+00:00 app[web.1]: NameError (uninitialized constant Barby::Code128A):
2012-08-01T17:14:50+00:00 app[web.1]:   app/models/order.rb:102:in `generate_shipment'
2012-08-01T17:14:50+00:00 app[web.1]:   app/models/order.rb:60:in `generate_items'
2012-08-01T17:14:50+00:00 app[web.1]:   app/controllers/orders_controller.rb:17:in `create' 
```

我尝试添加 Procfile，但它也对我没有帮助。 [https://devcenter.heroku.com/articles/procfile/#deploying-to-heroku](https://devcenter.heroku.com/articles/procfile/#deploying-to-heroku)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:11:38.510

在使用之前，您可能需要单独使用 code128a 生成器。只需将以下行添加到您正在使用的文件中`Barby::Code128A`

```
require 'barby/barcode/code_128' 
```

# java - 包含 Java 代码的 JQuery 中的转义字符

> ID：11764327
> 
> 赞同：0
> 
> 时间：2012-08-01T17:19:07.170
> 
> 标签：java, jquery, html

我正在使用 JSP 页面，我需要在 DIV 中附加一些 HTML 和 Java 代码，我只记得我应该转义“这样的 \”，但我不知道其他字符，我不知道知道是否应该转义所有非字母字符，这里是字符串。

```
 String s ="<% ResultSet joinedRooms = myJavaDB.updateJoinedRooms(loginBean.getId());

 while(joinedRooms.next()){%> <div id="<%=joinedRooms.getString(1)%>" class="chatRoom">

<div class="chatRoomName"><%=myJavaDB.getRoomName(joinedRooms.getInt(1))%></div></div><% } %>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:24:01.880

无需自己动手，看看 Apache Commons [StringEscapeUtils](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html#escapeJavaScript%28java.lang.String%29)。

# java - 我怎样才能让我的角色在java中跳跃？

> ID：11764331
> 
> 赞同：3
> 
> 时间：2012-08-01T17:19:39.563
> 
> 标签：java

我在 youtube 上观看 thenewboston 的教程，所以现在我正在创建“Bucky's Land”。这段代码目前允许我向左、向右、向上和向下移动我的角色。它会根据玩家的移动方式改变玩家的侧面。我是java的初学者，我想知道如何让我的角色跳跃。任何帮助，将不胜感激！

```
package javagame;

import org.newdawn.slick.*;
import org.newdawn.slick.state.*;

public class Play extends BasicGameState{

Animation bucky, movingUp, movingDown, movingLeft, movingRight;
Image worldMap;
boolean quit = false;
int[] duration = {200,200};
float buckyPositionX = 0;
float buckyPositionY = 0;
float shiftX = buckyPositionX + 320;
float shiftY = buckyPositionY + 160;
boolean jumping = false; 
float verticalSpeed = 0.0f;

public Play(int state){
}

public void init(GameContainer gc, StateBasedGame sbg) throws SlickException{
   worldMap = new Image("res/world.png");
      Image[] walkUp = {new Image("res/buckysBack.png"), new Image("res/buckysBack.png")}; 
      Image[] walkDown = {new Image("res/buckysFront.png"), new Image("res/buckysFront.png")};
      Image[] walkLeft = {new Image("res/buckysLeft.png"), new Image("res/buckysLeft.png")};
      Image[] walkRight = {new Image("res/buckysRight.png"), new Image("res/buckysRight.png")};

      movingUp = new Animation(walkUp, duration, false);
      movingDown = new Animation(walkDown, duration, false);
      movingLeft = new Animation(walkLeft, duration, false);
      movingRight = new Animation(walkRight, duration, false);
      bucky = movingDown; 
  }

public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{
   worldMap.draw(buckyPositionX, buckyPositionY);
   bucky.draw(shiftX, shiftY);
   g.drawString("Buckys X: "+buckyPositionX+"\nBuckys Y: "+buckyPositionY, 400, 20);

   if(quit==true){
         g.drawString("Resume (R)", 250, 100);
         g.drawString("Main Menu (M)", 250, 150);
         g.drawString("Quit Game (Q)", 250, 200);
         if(quit==false){
            g.clear();
         }
    }
 }

public void update(GameContainer gc, StateBasedGame sbg, int delta) throws SlickException{
   Input input = gc.getInput();
   if(input.isKeyDown(Input.KEY_UP)){
         bucky = movingUp; //change bucky to up image
         buckyPositionY += delta * .1f; //increase the Y coordinates of bucky (move him up)
         if(buckyPositionY>162){
            buckyPositionY -= delta * .1f; //dont let him keep going up if he reaches the top
         }
      }
      if(input.isKeyDown(Input.KEY_DOWN)){
         bucky = movingDown;
         buckyPositionY -= delta * .1f;
         if(buckyPositionY<-600){
            buckyPositionY += delta * .1f;
         }
      }
      if(input.isKeyDown(Input.KEY_LEFT)){
         bucky = movingLeft;
         buckyPositionX += delta * .1f;
         if(buckyPositionX>324){
            buckyPositionX -= delta * .1f;
         }
      }
      if(input.isKeyDown(Input.KEY_RIGHT)){
         bucky = movingRight;
         buckyPositionX -= delta * .1f;
         if(buckyPositionX<-840){
            buckyPositionX += delta * .1f;
         }
      }
        //when they hit escape
      if(quit==true){
         if(input.isKeyDown(Input.KEY_R)){
            quit = false;
         }
         if(input.isKeyDown(Input.KEY_M)){
            sbg.enterState(0);
            try{
               Thread.sleep(250);
            }catch(InterruptedException e){
               e.printStackTrace();
            }
         }
         if(input.isKeyDown(Input.KEY_Q)){
            System.exit(0);

         }
     }
}

public int getID(){
  return 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:24:13.347

为此，您需要一些物理知识。这个想法是，例如，当有人按下空格键时，您将角色的速度设置为例如 5 up。每一秒你从它减去 1 并将它添加到角色的高度，直到他再次撞到地面。您可能还希望将速度限制为 (5,-5)

# php - 使用 slim 上传文件：POST 响应中的 301

> ID：11764344
> 
> 赞同：2
> 
> 时间：2012-08-01T17:20:29.510
> 
> 标签：php, slim

我的文件上传有问题。当尝试将文件发送到我的本地服务器时，我得到“301 永久移动”作为 POST 的响应。上传目录中没有创建文件。下面是 index.php 和 upload.html 的代码。$base_url 指向 localhost/testpage

[索引.php]

```
$app->get('/upload/', function() use ($app) {
    global $base_url;
    return $app->render('upload.html', array('base_url' => $base_url));
});

$app->post('/upload/', function() use ($app) {
    $imagename = $_FILES['image']['name'];
    $unique_id = md5(uniqid(rand(), true));
    $filetype = strrchr($imgname, '.');
    $new_upload = 'upload' . $unique_id . $filetype;
    move_uploaded_file($_FILES['image']['tmp_name'], $new_upload);
    //$the_upload = copy($_FILES['image']['tmp_name'], $new_upload);
    //@chmod($new_upload, 0777);
    $app->redirect('/');
}) 
```

[上传.html]

```
<html>
  <body>
    <form action="{{base_url}}/upload" method="POST">
        <input type="file" name="photo" value="" id="image" />
        <input type="submit" value="Upload image" />
    </form>
  </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-16T09:55:36.313

您应该在 $_FILES 数组中引用“照片”而不是“图像”。输入标签的 id 字段不会在表单数据中发送，它仅由浏览器使用。

# javascript - 在图片库上缓慢滚动

> ID：11764345
> 
> 赞同：1
> 
> 时间：2012-08-01T17:20:42.100
> 
> 标签：javascript, jquery, html, optimization

除了一个问题，我有一个已完成的图像库。图库页面的滚动相当缓慢且缓慢。起初我以为只是这台计算机或浏览器，但它在拥有 10 倍图像的 facebook 画廊上运行并不慢。

页面加载后应该不再执行 javascript，所以我无法想象是我的 jQuery 导致了问题，但它可能是。有没有办法使用 Google 的开发者工具检查器或 Firefox firebug 来判断是否有 javascript 随时执行？我设置了断点并运行了代码，最终它停止了，我无法再进入任何功能。因此让我认为它不是 jQuery。

检查网络日志，我只提取了**2.37MB**的图像和资产（这是在我清除缓存之后，所以每个图像都是全新加载的），所以我不认为它纯粹是图像大小。

最后，我什至检查了我的任务管理器 CPU 和内存使用情况，当我在该页面上时它没有飙升，所以我认为它不是任何类型的无限循环或内存问题。

这是滚动滞后的页面：[图库](http://www.daemondeveloper.com/photography/gallery.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:26:53.377

EDIT2：您可以尝试实现图像精灵，但我真的[不建议](https://stackoverflow.com/a/10519282/773263)在这种情况下使用它。

[http://www.w3schools.com/css/css_image_sprites.asp](http://www.w3schools.com/css/css_image_sprites.asp)

或者您可以使用 Photoshop 增加每个图像的图像优化。（如果您还没有这样做，建议您这样做。）...或像[http://kraken.io/这样的在线图像优化器](http://kraken.io/)

* * *

编辑：您可以通过确保所有 Javascript 都被引用为外部文件来大大提高速度，删除您拥有的嵌入式 javascript。将所有javascript从您拥有它的最顶部移动到之前...

```
</body> 
```

如果可能的话，将你所有的 javascript 文件组合成尽可能少的文件并[缩小](http://jscompress.com/)它们。

* * *

一些可能的改进... [http://analyze.websiteoptimization.com/](http://analyze.websiteoptimization.com/)

分析与建议

TOTAL_HTML - 恭喜，此页面上的 HTML 文件总数（包括主 HTML 文件）为 1，大多数浏览器都可以多线程。最小化 HTTP 请求是网站优化的关键。

TOTAL_OBJECTS - 警告！此页面上的对象总数为 41，其数量将主导网页延迟。考虑将其减少到更合理的数字。每页超过 20 个对象，处理实际对象的开销（描述时间和等待时间）占整个页面延迟的 80% 以上。有关对象开销如何支配网页延迟的更多详细信息，请参见图 II-3：显示对象开销主导网页延迟的延迟组件的相对分布。组合、优化和优化您的外部对象。用 CSS 翻转替换图形翻转以加快显示速度并最大限度地减少 HTTP 请求。考虑使用 CSS 精灵来帮助整合装饰性图像。使用 CSS 技术，例如彩色背景、边框、或间距而不是图形技术可以减少 HTTP 请求。用 CSS 文本标头替换图形文本标头，以进一步减少 HTTP 请求。最后，考虑通过使用不同的主机名或 CDN 来优化并行下载，以减少对象开销。

TOTAL_IMAGES - 警告！此页面上的图像总数为 32 ，请考虑将其减少到更合理的数量。建议组合、替换和优化您的图形。用 CSS 翻转菜单替换图形翻转菜单，以加快显示速度并最大限度地减少 HTTP 请求。考虑使用 CSS 精灵来帮助整合装饰性图像。使用彩色背景、边框或间距等 CSS 技术而不是图形技术来减少 HTTP 请求。用 CSS 文本标头替换图形文本标头，以进一步减少 HTTP 请求。最后，考虑通过使用不同的主机名来优化并行下载以减少对象开销。

TOTAL_CSS - 注意。此页面上的外部 CSS 文件总数为 3 ，请考虑将其减少到更合理的数量。由于外部 CSS 文件必须位于 HTML 文档的 HEAD 中，因此必须先加载它们，然后才能显示任何 BODY 内容。尽管它们在后续请求时被缓存，但 CSS 文件会减慢页面的初始显示速度。合并、优化和优化您的外部 CSS 文件。理想情况下，您的页面上应该有一个（甚至为高流量页面嵌入 CSS）。您可以使用速记属性、分组来优化 CSS 文件，然后缩小和 GZIP 压缩它们以减少它们的占用空间。请记住将 CSS 文件放在 HEAD 中，并将 JavaScript 文件放在 BODY 的末尾以启用渐进式显示。

TOTAL_SIZE - 警告！此页面的总大小为 2987624 字节，在 56Kbps 调制解调器上将在 603.63 秒内加载。考虑将总页面大小减少到 100K 以下，以在 56K 连接上实现低于 20 秒的响应时间。超过 100K 的页面超过了 56Kbps 的大多数注意力阈值，即使有反馈也是如此。考虑使用网站优化秘诀优化您的网站，加速您的网站或就我们的优化服务联系我们。TOTAL_SCRIPT - 注意。此页面上的外部脚本文件总数为 5 ，请考虑将其减少到一两个。合并、重构和缩小以优化您的 JavaScript 文件。理想情况下，您的页面上应该有一个（甚至嵌入用于高流量页面的脚本）。考虑在服务器上将 JavaScript 文件缝合在一起以最小化 HTTP 请求。

HTML_SIZE - 恭喜，这个 HTML 文件的总大小是 1472 字节，小于 50K。假设您指定图像的 HEIGHT 和 WIDTH，此大小允许您的 HTML 在 10 秒内显示内容，这是用户愿意等待页面显示而没有反馈的平均时间。IMAGES_SIZE - 警告！图片的总大小为 2900543 字节，超过 100K。考虑切换图形格式以实现更小的文件大小（例如从 JPEG 到 PNG）。最后，用 CSS 技术代替图形技术来创建彩色边框、背景和间距。SCRIPT_SIZE - 警告！外部脚本的总大小为 65770 字节，超过 20K。考虑优化 JavaScript 的大小，将它们组合起来，并在适合放置在文档 HEAD 中的任何脚本的情况下使用 HTTP 压缩。您可以将 CSS 菜单替换为基于 JavaScript 的菜单，以尽量减少甚至消除 JavaScript 的使用。

CSS_SIZE - 注意。你的外部 CSS 总大小为 19839 字节，大于 8K 小于 20K。对于外部文件，最好将它们保持在 1160 字节以下，以适应一个更高速度的 TCP-IP 数据包（或其近似倍数）。考虑优化您的 CSS 并消除功能以将其减小到更合理的大小。MULTIM_SIZE - 恭喜，您所有外部多媒体文件的总大小为 0 字节，小于 10K。

# sqlite - Sqlite3 全文搜索的限制不允许 OR 与 MATCHes。解决方法？

> ID：11764357
> 
> 赞同：2
> 
> 时间：2012-08-01T17:21:05.750
> 
> 标签：sqlite, fts3

Sqlite3 的全文搜索工具 - FTS3 - 允许使用 MATCH 运算符进行快速全文搜索：

```
SELECT ItemId FROM docs WHERE docs.text MATCH 'linux' 
```

但是，它不支持 SQL 查询中存在 MATCH 的任何地方的 OR 运算符（来源：[1](http://osdir.com/ml/sqlite-users/2010-03/msg00074.html)、[2](https://stackoverflow.com/questions/2621308/sqlite-fts3-search-for-a-string-in-a-column)）：

```
SELECT ItemId FROM docs WHERE docs.text MATCH 'linux' OR column=value
error: unable to use function MATCH in the requested context 
```

（不要与 FTS3 查询本身中的 OR 运算符混淆，即`SELECT ItemId FROM docs WHERE docs.text MATCH 'linux OR unix'`. 这很好用。）

有没有办法重写查询以使其工作（即使它有点慢）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:21:05.750

使用临时视图重写查询将按预期工作：

```
CREATE TEMP VIEW view1 AS SELECT ItemId FROM docs WHERE docs.text MATCH 'linux' 
SELECT * FROM docs WHERE ItemId IN view1 OR column=value
DROP VIEW view1 
```

如果临时视图不是“扫描”的，即它不会生成很多行，则速度将与“直接”查询（没有临时视图）的速度相当。

# python - python导入处理速度

> ID：11764362
> 
> 赞同：-1
> 
> 时间：2012-08-01T17:21:15.203
> 
> 标签：python, python-module

基本上，我想知道在每个模块中导入标准库是否比在一个模块中导入一次标准模块并在其他模块中重用它更好/更差。换句话说，我想知道以下两个代码之间是否存在速度/性能差异：

```
"""
One way - Just importing time module only once
"""
# /usr/bin/python
# mytime.py
import time

def get_time():
    return time.time()

# /usr/bin/python
# usingtime.py
import mytime

print (mytime.time() - mytime.time.time())

"""
Another way - importing time module as needed
"""
# /usr/bin/python
# mytime.py
import time

def get_time():
    return time.time()

# /usr/bin/python
# usingtime.py
import time
import mytime

print (mytime.time() - time.time()) 
```

哪个代码更好？还是真的很重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:34:30.237

在第二个示例中没有理由重新导入`time`，这实际上就是您正在做的事情。为了优雅起见，您应该只在（直接）使用它的同一模块中导入一个模块。

想象一下导入 3 级深度（一个模块导入另一个模块，该模块导入另一个模块......）并在第一个顶级模块中跟踪所有这些导入！维持这将是一场噩梦。

就速度而言，我相信重新导入对性能的影响可以忽略不计。多次导入时，Python 解释器不会进行完全重新导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T18:03:23.537

来自：[http ://docs.python.org/reference/simple_stmts.html#the-import-statement](http://docs.python.org/reference/simple_stmts.html#the-import-statement)

> 检查的第一个地方是 sys.modules，之前已导入的所有模块的缓存。如果在那里找到模块，则在导入的步骤 (2) 中使用它。

通过导入加载的模块本质上是单例。在模块的第一次导入时，模块全局范围内的代码将被执行（模块的初始化）并且模块实例被添加到 sys.modules。任何其他模块中的下一个导入将仅引用此初始化实例。成本可以忽略不计。

简单的例子：

**一个.py**

```
print "HELLO" 
```

**b.py**

```
import a
import c 
```

**py**

```
import a 
```

**在交互式解释器中：**

```
Python 2.6.6 (r266:84297, Aug 24 2010, 18:13:38) [MSC v.1500 64 bit (AMD64)] on
win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import b
HELLO
>>> 
```

（注意“HELLO”只打印一次）

# c++ - 如何让 C++ 程序在用户输入输入时计算字数？

> ID：11764365
> 
> 赞同：1
> 
> 时间：2012-08-01T17:21:29.417
> 
> 标签：c++

我正在尝试编写一个程序，该程序一直接收用户的输入，直到用户输入“退出”。每次用户输入时，我希望程序打印出用户输入的字数。因此，用户的以下输入：

```
hello how are you 
```

将产生以下输出：

```
You entered 4 words. 
```

但是，我在编写程序时遇到了麻烦，它只计算一行的单词数；在进入下一行之前，它不会清除数字。因此，如果它从用户那里输入了三次，它将把这三行上的单词总数相加。例如，以下输入：

```
how are you
i am good thank you
quit 
```

将产生以下输出：

```
 You entered 9 words. 
```

当我希望它输出用户输入的每一行之后的字数时（退出除外），即

```
>>how are you
<<You entered 3 words.
>>i am good thank you
<<You entered 5 words.
>>quit 
```

这是我的代码的相关位：

```
char *input;
int inum;

int inputLoop()
{
    char quit[] = "quit";
    inum = 0; //counts number of words

    while (strcmp(input, quit) != 0)
    {
         cin >> input;
         inum++;
    }
    cout <<"You entered " <<inum <<" words." <<endl; 
```

我宁愿不使用向量之类的东西；我使用的任何东西最终都需要转换为 *char，因为我的全局变量是 *char。（而且我的全局变量是 *char，因为根据某些条件，*input 可能会从 main 设置为 *argv[]。）

我已经尝试了各种各样的事情，但我似乎无法克服这样一个事实，即 strcmp(input, quit) 一次比较输入的一个单词以退出，而不是比较整个输入行以退出。帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T17:31:21.697

您的任何要求都不排除使用`std::string`and `std::vector`。我建议你使用它们。

```
#include <string>
#include <sstream>
#include <iostream>
#include <vector>

std::vector<std::string> words;

int inputLoop()
{
    char quit[] = "quit";
    total_words = 0;

    std::string line;
    // grab a line at a time
    while(std::getline(std::cin, line) && line != quit) {
        // clear the vector of words
        words.clear();
        // make a string stream to read words from that line
        std::stringstream ss(line);
        // grab all the words into a vector
        std::string word;
        while(ss >> word) {
             words.push_back(word);
        }
        std::cout <<"You entered " <<words.size() <<" words." <<endl;
    }
}

int main(int argc, char** argv) {
    // get the data from argv
    words = std::vector<std::string>(argv, argv + argc);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:29:00.930

您应该使用[getline()](http://www.cplusplus.com/reference/string/getline/)将整行输入获取到某个缓冲区。然后，处理该输入缓冲区以计算其中的单词数。假设您将每个单词定义为由空格分隔的字符块。我自己，我是[strtok()](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)打破缓冲区的粉丝。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T18:22:35.743

另一种方法，只是为了好玩：

```
#include <iostream>
#include <algorithm>
#include <iterator>

int main()
{
    unsigned num = 0;
    std::for_each(
        std::istream_iterator<std::string>(std::cin),
        std::istream_iterator<std::string>(),

        [&num](const std::string& s)
        {
            if (s == "quit")
                std::cin.setstate(std::ios::eofbit);
            ++num;
            if (std::cin.peek() == '\n') {
                std::cout << "You entered "
                          << num
                          << " word"
                          << ((num == 1) ? "." : "s.")
                          << '\n';
                num = 0;
            }
        });
} 
```

不会通过将线标记为向量来浪费资源:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T18:29:58.340

我会打电话给距离

```
#include <string>
#include <algorithm>
#include <iterator>
#include <iostream>
#include <sstream>

int main()
{
    std::string line;
    while(std::getline(std::cin, line) && line != "quit")
    {
        std::stringstream  linestream(line);
        std::cout << "You entered "
                  << std::distance(std::istream_iterator<std::string>(linestream), 
                                   std::istream_iterator<std::string>())
                  << " words\n";
    }
} 
```

# php - Google Drive PHP 客户端库检索文件资源列表

> ID：11764367
> 
> 赞同：3
> 
> 时间：2012-08-01T17:21:35.140
> 
> 标签：php, google-drive-api

我尝试在我的代码中使用此功能：[https ://developers.google.com/drive/v2/reference/files/list](https://developers.google.com/drive/v2/reference/files/list)

在下面：

```
/**
 * Retrieve a list of File resources.
 *
 * @param apiDriveService $service Drive API service instance.
 * @return Array List of File resources.
 */
function retrieveAllFiles($service) {
  $result = array();
  $pageToken = NULL;

  do {
    try {
      $parameters = array();
      if ($pageToken) {
        $parameters['pageToken'] = $pageToken;
      }
      $files = $service->files->listFiles($parameters);

      array_merge($result, $files->getItems()); // <---- Exception is throw there !
      $pageToken = $files->getNextPageToken();
    } catch (Exception $e) {
      print "An error occurred: " . $e->getMessage();
      $pageToken = NULL;
    }
  } while ($pageToken);
  return $result;
} 
```

但我得到了这个错误：

> 致命错误：在第 115 行调用 C:\Program Files (x86)\EasyPHP-5.3.6.1\www\workspace\CPS\class\controller\CtrlGoogleDrive.php 中非对象的成员函数 getItems()

你的数组似乎是空的，但它不应该是：

```
Array
(
    [kind] => drive#fileList
    [etag] => "WtRjAPZWbDA7_fkFjc5ojsEvE7I/lmSsH-kN3I4LpwShGKUKAM7cxbI"
    [selfLink] => https://www.googleapis.com/drive/v2/files
    [items] => Array
        (
        )

) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T18:26:01.190

PHP 客户端库可以以两种方式运行，返回对象或关联数组，后者是默认值。

文档中的示例假设您希望库返回对象，否则您将不得不替换以下两个调用：

```
$files->getItems()
$files->getNextPageToken() 
```

使用使用关联数组的相应调用：

```
$files['items']
$files['nextPageToken'] 
```

更好的是，您可以通过设置将库配置为始终返回对象

```
$apiConfig['use_objects'] = true; 
```

请检查`config.php`文件以获取更多配置选项：

[http://code.google.com/p/google-api-php-client/source/browse/trunk/src/config.php](http://code.google.com/p/google-api-php-client/source/browse/trunk/src/config.php)

# xna - 游戏开始时 XNA 加载/启动画面

> ID：11764378
> 
> 赞同：0
> 
> 时间：2012-08-01T17:22:32.693
> 
> 标签：xna

我试图让加载屏幕在您运行启动游戏的可执行文件后立即弹出，而游戏加载时我想在桌面上显示图像，就像 Gamemaker 允许您拥有加载图像一样。

我环顾四周，大多数人都希望在加载不是我想要的内容时显示图像，或者可能是... =P

我的猜测是在开始时将游戏窗口设置为无边界，加载启动画面，绘制它，然后开始所有主要加载（特别是通过 SlimDX 加载 DirectInput 需要一段时间）。但是，这是否支持具有透明/不规则形状的图像？EG如果我想在游戏加载时显示一个无边框的圆圈，这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T18:16:14.433

这很简单。只需实施`System.Threading`，您就完成了。

这是它的工作原理，首先添加：

```
using System.Threading; 
```

到班级的顶部，然后添加以下内容：

```
 //the enum for state types
    enum GameState
    {
        Loading,
        StartMenu

    }

    //Init our gameState enum as variable
    GameState gameState;        

    protected override void LoadContent()
    {
        gameState = GameState.Loading; 

        spriteBatch = new SpriteBatch(GraphicsDevice);

        device = GraphicsDevice;

        Window.Title = "Your Window";

        //Other stuff that you had here before, now go in LoadGame()

        loadingscreen = Content.Load<Texture2D>("loading");             

        Thread bgLoad = new Thread(new ThreadStart(LoadGame));
        bgLoad.IsBackground = true;
        bgLoad.Start();

    }
    public void LoadGame()
    {
        //Loading stuff here

        gameState = GameState.StartMenu; //or GameState.Playing
    } 
```

然后在您的内容项目中放置一个加载纹理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:47:50.127

如果我理解正确，您基本上希望打开一个非全屏窗口，该窗口也缺少窗口附带的常规边框和按钮。

我无法对此进行测试，但这应该是一个好的开始。

[这里！](http://forums.create.msdn.com/forums/p/65209/399049.aspx)

我将从创建一个简单的 Game1 类开始，它可以跟踪图像并跟踪计时器的时间。稍后您可以添加实际跟踪主程序中资产加载的逻辑。首先，我只测试它一段固定的时间，比如 3 秒。

# usb - USB设备和设备驱动开发的学习资源

> ID：11764386
> 
> 赞同：0
> 
> 时间：2012-08-01T17:23:00.383
> 
> 标签：usb, device-driver, pic, avr, usb-drive

我从未做过任何 USB 开发，我对 PIC、AVR 微控制器和 Windows 上的 C 编程（不是 Windows 编程）有丰富的经验。我想学习如何开发可以与 PC 通信的嵌入式设备和设备驱动程序，而不是通过 USB 硬件中的串行端口仿真器。我喜欢有一些关于我应该接近它的观点和资源。我应该开始学习哪些软件和硬件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:06:44.457

阅读这本精彩的书：Jan Axelson 的《 [USB Complete 》。](http://www.lvr.com/usbc.htm)在他的网站上也有全面的信息。

# regex - Perl，将正则表达式匹配分配给标量

> ID：11764387
> 
> 赞同：3
> 
> 时间：2012-08-01T17:23:01.997
> 
> 标签：regex, perl

[Mail::POP3Client](http://search.cpan.org/~sdowd/Mail-POP3Client-2.18/POP3Client.pm)中有一个示例片段，其中有一段我不明白它为什么或如何工作的语法：

```
foreach ( $pop->Head( $i ) ) {
    /^(From|Subject):\s+/i and print $_, "\n";
} 
```

特别是正则表达式位。`$_`该行之后保持不变，但仅打印匹配项。一个附加问题；我如何将该正则表达式的匹配项分配给我自己的标量，以便我可以使用它而不是仅仅打印它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T17:27:12.003

这实际上非常棘手。它所做的是利用 perl 的短路特性来做一个条件语句。这和说这个是一样的。

```
if (/^(From|Subject):\s+/i) { 
    print $_;
} 
```

它之所以有效，是因为 perl 在某些事物评估为 0 后停止评估和声明。除非另有指定，否则表单中的正则表达式`/regex/`而不是`$somevar =~ /regex/`将正则表达式应用于默认变量，`$_`

你可以像这样存储它

```
my $var;    
if (/^(From|Subject):\s+/i) { 
        $var = $_;
} 
```

或者您可以使用捕获组

```
/^((?:From|Subject):\s+)/i 
```

它将整个东西存储到`$1`

# r - 布局添加线R

> ID：11764388
> 
> 赞同：-1
> 
> 时间：2012-08-01T17:23:04.313
> 
> 标签：r, layout

`layout`在可以由 生成的函数的第四个示例中`example(layout)`，我想将线图覆盖在来自正态分布的样本的条形图上。
我试过了`lines()`，`plot( , add=TRUE)`但没有运气。
我怎样才能做到这一点？还是我必须采取与使用不同的路线`layout`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:25:34.450

这是一种方法：

```
library(TeachingDemos)
x <- pmin(3, pmax(-3, stats::rnorm(50)))
y <- pmin(3, pmax(-3, stats::rnorm(50)))
xhist <- hist(x, breaks=seq(-3,3,0.5), plot=FALSE)
yhist <- hist(y, breaks=seq(-3,3,0.5), plot=FALSE)
top <- max(c(xhist$density, yhist$density))
xrange <- c(-3,3)
yrange <- c(-3,3)
nf <- layout(matrix(c(2,0,1,3),2,2,byrow=TRUE), c(3,1), c(1,3), TRUE)
layout.show(nf)

par(mar=c(3,3,1,1))
plot(x, y, xlim=xrange, ylim=yrange, xlab="", ylab="")
par(mar=c(0,3,1,1))
bx.out <- barplot(xhist$density, axes=FALSE, ylim=c(0, top), space=0)
updateusr( bx.out[1:2], 0:1, xhist$mids[1:2], 0:1 )
xdens <- density(x)
lines(xdens$x, xdens$y, col='blue')
par(mar=c(3,0,1,1))
by.out <- barplot(yhist$density, axes=FALSE, xlim=c(0, top), space=0, horiz=TRUE)
updateusr( 0:1, by.out[1:2], 0:1, yhist$mids[1:2] )
ydens <- density(y)
lines(ydens$y, ydens$x, col='blue') 
```

请注意从`counts`到的更改，`density`以便条形的“高度”与密度相匹配，并使用`updateusr`来自 TeachingDemos 包来匹配坐标系。代替`updateusr`你也可以指定和`width`函数。`xlim``barplot`

# c# - Websocket 连接设置

> ID：11764391
> 
> 赞同：8
> 
> 时间：2012-08-01T17:23:26.250
> 
> 标签：c#, javascript, sockets, tcp, websocket

我正在尝试了解有关 websocket 及其内部实现的更多信息。但仍然无法理解一些事情。我尝试使用谷歌搜索以获得深入的解释，但其中大多数只是提供高级概述。以下是我的疑惑

**1.**根据我的阅读，web socket服务器（C#/C++实现）默认使用80端口。虽然我们可以使用任何端口，但我们最好使用80端口，因为我们不会有任何防火墙问题。如果是这样，我们应该如何在同一个端口（80）上同时运行 Web 服务器和 Web 套接字服务器？

**2.**假设 web socket 服务器运行在 81 端口，webserver 运行在 80 端口。

1.  所以当浏览器发出初始握手 HTTP 请求 (Upgrade: websocket) 时，这个请求会发送到 81 端口。对吧？如果是这样，这个请求（见下文）与 HTTP 协议没有任何关系。但是我们仍然使用 HTTP 协议头。为什么？

    ```
     GET /mychat HTTP/1.1
           Host: server.example.com
           Upgrade: websocket
           Connection: Upgrade
           Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==
           Sec-WebSocket-Protocol: chat
           Sec-WebSocket-Version: 13
           Origin: http://example.com 
    ```

2.  为什么他们使用当前在大多数浏览器中实现的相同 websocket 接口来发出与给定端口的直接 TCP/IP 连接，而没有任何 HTTP 内容？

**3.** 从客户端/服务器发送/接收的数据是否有任何数据包大小限制或数据/缓冲区限制？如果是这样，我们是否需要将数据框起来并自己处理？

**4.** websocket 服务器是否总是需要一个单独的服务/进程？将来网络服务器（IIS、apache）是否会支持在其进程空间内托管网络套接字服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T18:16:30.790

1.  通过使用与 HTTP 兼容的握手，您可以将 WebSocket 处理程序集成到您的 Web 服务器中，或者只是让 Web 服务器将 WebSocket 连接转发到专用的 WebSocket 服务器。

2.  WebSocket 握手使用与 HTTP 兼容的握手，以允许在同一端口上轻松处理两种协议，并允许现有防火墙配置更轻松地支持 WebSocket 流量。此外，在 HTTP 请求的上下文中很好地防止跨端脚本攻击，因此 WebSocket 充分利用了这些知识。即使在建立连接之后，WebSocket**也不是原始套接字**连接。它是一个基于消息的协议，因此需要成帧。此外，当从客户端（浏览器）发送到服务器时，框架会被屏蔽，以减轻对行为不端的代理/缓存/中介的理论漏洞的担忧。

3.  协议本身对消息大小没有限制。一条消息可以分成多个帧。帧大小有协议限制，但它是 2^64 字节。实际的帧大小限制会更小，具体取决于客户端/服务器实现。如果您要发送数兆字节的单条消息，您可能会考虑更改应用程序以使用更小的消息来最大化跨浏览器和跨服务器支持。

4.  WebSocket 处理绝对可以集成到 Web 服务器中，这在很大程度上是工作组设想的场景。例如，考虑[pywebsocket](http://code.google.com/p/pywebsocket/)，它旨在独立运行或作为 Apache 中的 mod_python 模块运行。作为另一个示例，[ASP.NET 4.5 和 IIS 8 将内置对 WebSockets 的支持](http://www.asp.net/vnext/overview/whitepapers/whats-new#_Toc318097383)。

# android - 从 Picasa//Google + 同步文件夹从图库中获取图片不起作用

> ID：11764392
> 
> 赞同：61
> 
> 时间：2012-08-01T17:23:25.803
> 
> 标签：android, android-intent, android-contentprovider

我正在尝试从 Google+ 同步照片的其中一个文件夹中的图库应用程序中获取图像。选择图像后，Uri 正在正确传回。但是当我尝试在存储设备上获取该图像的实际路径以便我可以使用它时，它会崩溃。问题似乎与**picasa 内容提供商**有关。

在 Nexus S 和 Nexus 7 以及其他设备上进行了测试。

```
E/AndroidRuntime(14572): java.lang.RuntimeException: 传递结果失败 ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://com.google.android.gallery3d.provider /picasa/item/5427003652908228690 }}

```

在这里，dat 字段似乎正确地传递了 Uri，但是当我尝试获取图像的位置时，它会因以下错误而崩溃。

```
W/GalleryProvider(14381)：不支持的列：_data

```

似乎 Picasa 相册的内容提供程序没有 _data 字段。

获取位置的代码是：

```
// imageUri 是上面的 Uri。
String[] proj = { MediaStore.Images.Media.DATA };
光标 cursor = context.getContentResolver().query(imageUri, proj,null, null, null);
int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
cursor.moveToFirst();

字符串文件路径 = cursor.getString(column_index);
光标.close();

```

此图像似乎支持的唯一列是：[user_account, picasa_id, _display_name, _size, mime_type, datetaken, latitude, longitude,orientation]

我们如何获得这张图片的实际位置。如果我们不应该使用这个图像，**那么这些图像首先不应该显示给用户。**

启动图库应用的意图是：

```
意图意图 = new Intent();
intent.setType("图片/*");
意图.setAction（意图.ACTION_GET_CONTENT）；

```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-01-13T19:34:34.863

我现在浪费了很多时间，现在我找到了一个在所有情况下都有效的解决方案，而无需在特殊线程或其他东西中进行任何魔术下载。以下方法从用户选择的内容中返回一个流，这适用于野外的所有内容。

```
FileInputStream getSourceStream(Uri u) throws FileNotFoundException {
    FileInputStream out = null;
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
        ParcelFileDescriptor parcelFileDescriptor =
                mContext.getContentResolver().openFileDescriptor(u, "r");
        FileDescriptor fileDescriptor = parcelFileDescriptor.getFileDescriptor();
        out = new FileInputStream(fileDescriptor);
    } else {
        out = (FileInputStream) mContext.getContentResolver().openInputStream(u);
    }
    return out;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-30T18:45:40.207

经过大量研究，我觉得有太多变通方法来做一些似乎很简单的事情。因此，我继续编写了一个小型库，它可以处理所有复杂的 if else，并且恰好适用于我能想到的所有可能的场景。试一试，看看这是否有帮助。

[http://techdroid.kbeanie.com/2013/03/easy-image-chooser-library-for-android.html](http://techdroid.kbeanie.com/2013/03/easy-image-chooser-library-for-android.html)

这是一个初步的实现。尽管它几乎可以处理所有情况，但可能存在一些错误。如果您使用此库，请告诉我您的反馈，如果可以进一步改进。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-30T17:17:47.650

大约一年前我遇到了同样的问题。我向您展示了我的解决方案（代码很混乱，请重构它）。所以，你有从画廊返回的图像 URI：

```
 ImageInfo getImage(URI imageUri) {

        ImageInfo result = null;

        final String[] cursorColumns = {MediaStore.Images.Media.DATA, MediaStore.Images.Media.ORIENTATION};

        // some devices (OS versions return an URI of com.android instead of com.google.android
        if (imageUri.toString().startsWith("content://com.android.gallery3d.provider"))  {
            // use the com.google provider, not the com.android provider.
            imageUri = Uri.parse(imageUri.toString().replace("com.android.gallery3d","com.google.android.gallery3d"));
        }

        Cursor cursor = App.getContext().getContentResolver().query(imageUri, cursorColumns, null, null, null);
        if (cursor != null) {

            int dataColumnIndex = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA);
            int orientationColumnIndex = cursor.getColumnIndex(MediaStore.Images.ImageColumns.ORIENTATION);

            cursor.moveToFirst();

            // if it is a picasa image on newer devices with OS 3.0 and up
            if (imageUri.toString().startsWith("content://com.google.android.gallery3d")) {

                result = new ImageInfo(downloadImage(imageUri), "0");                       

            } else { // it is a regular local image file

                result = new ImageInfo(cursor.getString(dataColumnIndex), cursor.getString(orientationColumnIndex));

            }

            cursor.close();

        } else {
            result = new ImageInfo(downloadImage(imageUri), "0");
        }

        return result;                      
} 
```

现在我们需要函数来下载图像：

```
private String downloadImage(URI imageUri) {

    File cacheDir;
    // if the device has an SD card
    if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED)) {
        cacheDir = new File(android.os.Environment.getExternalStorageDirectory(),".OCFL311");
    } else {
        // it does not have an SD card
        cacheDir = App.getContext().getCacheDir();
    }

    if(!cacheDir.exists()) cacheDir.mkdirs();
    File f = new File(cacheDir, PUT_HERE_FILE_NAME_TO_STORE_IMAGE);

    try {

        InputStream is = null;
        if (imageUri.toString().startsWith("content://com.google.android.gallery3d")) {
            is = App.getContext().getContentResolver().openInputStream(imageUri);
        } else {
            is = new URL(imageUri.toString()).openStream();
        }

        OutputStream os = new FileOutputStream(f);
        Utils.InputToOutputStream(is, os);

        return f.getAbsolutePath();
    } catch (Exception ex) {
        Log.d(this.getClass().getName(), "Exception: " + ex.getMessage());
        // something went wrong
        ex.printStackTrace();
        return null;
    }
} 
```

ImageInfo 是我的类来存储图像的路径及其方向。

```
public static class ImageInfo {
    public final String filePath;
    public final String imageOrientation;

    public ImageInfo(String filePath, String imageOrientation) {
        this.filePath = filePath;

        if (imageOrientation == null) imageOrientation = "0";
        this.imageOrientation = imageOrientation;           
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-12T03:50:34.030

根据@drindt 的回答，下面的代码给出`File`了从 Google Photo cloud-synced-but-not-in-device 文件下载的临时路径。

```
@SuppressLint("NewApi")
public static String getFilePath(final Context context, final Uri uri) {

    // Google photo uri example
    // content://com.google.android.apps.photos.contentprovider/0/1/mediakey%3A%2FAF1QipMObgoK_wDY66gu0QkMAi/ORIGINAL/NONE/114919

    if ("content".equalsIgnoreCase(uri.getScheme())) {
        String result = getDataColumn(context, uri, null, null); // 
        if (TextUtils.isEmpty(result))
            if (uri.getAuthority().contains("com.google.android")) {
                try {
                    File localFile = createImageFile(context, null);
                    FileInputStream remoteFile = getSourceStream(context, uri);
                    if(copyToFile(remoteFile, localFile))
                        result = localFile.getAbsolutePath();
                    remoteFile.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        return result;
    }
    // File
    else if ("file".equalsIgnoreCase(uri.getScheme())) {
        return uri.getPath();
    }

    return null;
}

/**
 * Get the value of the data column for this Uri. This is useful for
 * MediaStore Uris, and other file-based ContentProviders.
 *
 * @param context       The context.
 * @param uri           The Uri to query.
 * @param selection     (Optional) Filter used in the query.
 * @param selectionArgs (Optional) Selection arguments used in the query.
 * @return The value of the _data column, which is typically a file path.
 */
static String getDataColumn(Context context, Uri uri, String selection,
                            String[] selectionArgs) {

    Cursor cursor = null;
    final String column = "_data";
    final String[] projection = {
            column
    };

    try {
        cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs,
                null);
        if (cursor != null && cursor.moveToFirst()) {
            final int column_index = cursor.getColumnIndexOrThrow(column);
            return cursor.getString(column_index);
        }
    } finally {
        if (cursor != null)
            cursor.close();
    }

    return null;
}

/**
 * Copy data from a source stream to destFile.
 * Return true if succeed, return false if failed.
 */
private static boolean copyToFile(InputStream inputStream, File destFile) {
    if (inputStream == null || destFile == null) return false;
    try {
        OutputStream out = new FileOutputStream(destFile);
        try {
            byte[] buffer = new byte[4096];
            int bytesRead;
            while ((bytesRead = inputStream.read(buffer)) >= 0) {
                out.write(buffer, 0, bytesRead);
            }
        } finally {
            out.close();
        }
        return true;
    } catch (IOException e) {
        return false;
    }
}

public static String getTimestamp() {
    try {
        return new SimpleDateFormat("yyyyMMdd_HHmmss", Locale.ROOT).format(new Date());
    } catch (RuntimeException e) {
        return new SimpleDateFormat("yyyyMMdd_HHmmss", Locale.getDefault()).format(new Date());
    }
}

public static File createImageFile(Context context, String imageFileName) throws IOException {
    if (TextUtils.isEmpty(imageFileName))
        imageFileName = getTimestamp(); // make random filename if you want.

    final File root;
    imageFileName = imageFileName;
    root = context.getExternalCacheDir();

    if (root != null && !root.exists())
        root.mkdirs();
    return new File(root, imageFileName);
}

public static FileInputStream getSourceStream(Context context, Uri u) throws FileNotFoundException {
    FileInputStream out = null;
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
        ParcelFileDescriptor parcelFileDescriptor =
                context.getContentResolver().openFileDescriptor(u, "r");
        FileDescriptor fileDescriptor = null;
        if (parcelFileDescriptor != null) {
            fileDescriptor = parcelFileDescriptor.getFileDescriptor();
            out = new FileInputStream(fileDescriptor);
        }
    } else {
        out = (FileInputStream) context.getContentResolver().openInputStream(u);
    }
    return out;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-30T17:17:57.727

下面的技巧对我有用，我在这里做的是如果 URI 中有任何授权 url，那么我将使用下面的代码创建一个临时图像并返回相同的内容 URI。

我[在这里也回答了类似的问题。。](https://stackoverflow.com/a/30567302/1677824)

```
public static String getImageUrlWithAuthority(Context context, Uri uri) {
    InputStream is = null;
    if (uri.getAuthority() != null) {
        try {
            is = context.getContentResolver().openInputStream(uri);
            Bitmap bmp = BitmapFactory.decodeStream(is);
            return writeToTempImageAndGetPathUri(context, bmp).toString();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    return null;
}

public static Uri writeToTempImageAndGetPathUri(Context inContext, Bitmap inImage) {
    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
    String path = MediaStore.Images.Media.insertImage(inContext.getContentResolver(), inImage, "Title", null);
    return Uri.parse(path);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-14T10:47:22.810

我使用了这种方法，对我来说效果很好，希望这对你有帮助....

ACTIVITYRESULT_CHOOSEPICTURE 是调用 startActivity(intent, requestCode) 时使用的 int；

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
  if(requestCode == ACTIVITYRESULT_CHOOSEPICTURE) {
    BitmapFactory.Options options = new BitmapFactory.Options();
    final InputStream ist = ontext.getContentResolver().openInputStream(intent.getData());
    final Bitmap bitmap = BitmapFactory.decodeStream(ist, null, options);
    ist.close();
  }
} 
```

如果上面的代码不起作用，而不仅仅是参考这个链接......它会很好地展示方式

[http://dimitar.me/how-to-get-picasa-images-using-the-image-picker-on-android-devices-running-any-os-version/](http://dimitar.me/how-to-get-picasa-images-using-the-image-picker-on-android-devices-running-any-os-version/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-26T08:41:08.103

最后以经典解决方案结束...通过使用涵盖所有权限的 Document.util：-1-在您的 onActivityResult() 内部：-

```
case GALLERY_CAPTURE_IMAGE_REQUEST_CODE:
                    String filePath = DocumentUtils.getPath(MainContainerActivity.this,data.getData();

                    break; 
```

2- 创建类 DocumentUtils:-

```
public class DocumentUtils {

@TargetApi(Build.VERSION_CODES.KITKAT)
public static String getPath(final Context context, final Uri uri) {

    final boolean isKitKat = Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT;

    // DocumentProvider
    if (isKitKat && DocumentsContract.isDocumentUri(context, uri)) {
        // ExternalStorageProvider
        if (isExternalStorageDocument(uri)) {
            final String docId = DocumentsContract.getDocumentId(uri);
            final String[] split = docId.split(":");
            final String type = split[0];

            if ("primary".equalsIgnoreCase(type)) {
                return Environment.getExternalStorageDirectory() + "/" + split[1];
            }

            // TODO handle non-primary volumes
        }
        // DownloadsProvider
        else if (isDownloadsDocument(uri)) {

            final String id = DocumentsContract.getDocumentId(uri);
            final Uri contentUri = ContentUris.withAppendedId(Uri.parse("content://downloads/public_downloads"), Long.valueOf(id));

            return getDataColumn(context, contentUri, null, null);
        }
        // MediaProvider
        else if (isMediaDocument(uri)) {
            final String docId = DocumentsContract.getDocumentId(uri);
            final String[] split = docId.split(":");
            final String type = split[0];

            Uri contentUri = null;
            if ("image".equals(type)) {
                contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;
            } else if ("video".equals(type)) {
                contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;
            } else if ("audio".equals(type)) {
                contentUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
            }

            final String selection = "_id=?";
            final String[] selectionArgs = new String[]{split[1]};

            return getDataColumn(context, contentUri, selection, selectionArgs);
        }
    }
    // MediaStore (and general)
    else if ("content".equalsIgnoreCase(uri.getScheme())) {
        // Return the remote address
        String url;
        if (isGooglePhotosUri(uri)) {
            url = getDataColumnWithAuthority(context, uri, null, null);
            return getDataColumn(context, Uri.parse(url), null, null);
        }

        return getDataColumn(context, uri, null, null);

    }
    // File
    else if ("file".equalsIgnoreCase(uri.getScheme())) {
        return uri.getPath();
    }

    return null;
}

/**
 * Get the value of the data column for this Uri. This is useful for
 * MediaStore Uris, and other file-based ContentProviders.
 *
 * @param context       The context.
 * @param uri           The Uri to query.
 * @param selection     (Optional) Filter used in the query.
 * @param selectionArgs (Optional) Selection arguments used in the query.
 * @return The value of the _data column, which is typically a file path.
 */
public static String getDataColumn(Context context, Uri uri, String selection, String[] selectionArgs) {

    Cursor cursor = null;
    final String column = "_data";
    final String[] projection = {column};

    try {
        cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs, null);
        if (cursor != null && cursor.moveToFirst()) {
            final int column_index = cursor.getColumnIndexOrThrow(column);
            return cursor.getString(column_index);
        }
    } finally {
        if (cursor != null)
            cursor.close();
    }
    return null;
}
/**
 * Function for fixing synced folder image picking bug
 *
 * **/
public static String getDataColumnWithAuthority(Context context, Uri uri, String selection, String[] selectionArgs) {
    Bitmap bitmap = null;
    InputStream is = null;
    if (uri.getAuthority()!=null){
        try {
            is = context.getContentResolver().openInputStream(uri);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        Bitmap bmp = BitmapFactory.decodeStream(is);
        return ImageLoader.getImageUri(context,bmp).toString();
    }

    return null;
}

/**
 * @param uri The Uri to check.
 * @return Whether the Uri authority is ExternalStorageProvider.
 */
public static boolean isExternalStorageDocument(Uri uri) {
    return "com.android.externalstorage.documents".equals(uri.getAuthority());
}

/**
 * @param uri The Uri to check.
 * @return Whether the Uri authority is DownloadsProvider.
 */
public static boolean isDownloadsDocument(Uri uri) {
    return "com.android.providers.downloads.documents".equals(uri.getAuthority());
}

/**
 * @param uri The Uri to check.
 * @return Whether the Uri authority is MediaProvider.
 */
public static boolean isMediaDocument(Uri uri) {
    return "com.android.providers.media.documents".equals(uri.getAuthority());
}

/**
 * @param uri The Uri to check.
 * @return Whether the Uri authority is Google Photos.
 */
public static boolean isGooglePhotosUri(Uri uri) {
    if(uri.getAuthority()!=null)
        return true;
    return false;
} 
```

}

3-您还需要 ImageLoader.java 中的以下功能：-

```
public static Uri getImageUri(Context inContext, Bitmap inImage) {
    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
    String path = MediaStore.Images.Media.insertImage(inContext.getContentResolver(), inImage, "Title", null);
    return Uri.parse(path);
} 
```

# ios - iOS，为什么 iCloud 在第二台设备上同步对象但不同步对象的属性

> ID：11764396
> 
> 赞同：3
> 
> 时间：2012-08-01T17:23:59.587
> 
> 标签：ios, sync, relationship, icloud, nsmanagedobjectcontext

> iOS iCloud 确实在第二台设备上同步对象，但不同步对象的属性

*   NonSyncing 属性：类别

*   应用程序：通用 iOS，CoreData 库样式，使用 FRC 处理 tableViews，没有 GarbageCollection

*   设备：5.1.1 上的 iPhone 4、iPad 1 都运行相同的 iOS 应用程序。

*   XCode 4.3.2

*   数据模型：

# ** 实体关系目标反向 **

```
 Recipe       categories      Category        recipes

   Category     recipes         Recipe          categories 
```

*   相关对象：Recipe 和Category，第一个有可选的to-many 属性类别，第二个有成对的可选to-many 属性recipe。Recipe 的其他属性包括成分、NSString*

*   程序：在 iPad 应用程序上，在 MOC 中创建一个新配方，然后我将现有类别添加到配方 obj 中，然后添加一些成分文本。然后我保存：到MOC，--唯一保存：调用。新食谱在 iPhone 上与配料文本同步，但缺少在 iPad 上添加和保存的类别。此搜索类别在添加它的 iPad 上“有效”，但在 iPhone 上无效，也就是说，该类别未添加到第二台设备的新配方的类别属性中。iCloud 将两个 *.cdt 文件放在 iPhone 上。

下面是Recipe和Category的Class接口和实现文件，以及iPhone上出现的两个Log文件的内容plist

*   问题：我希望这些信息足以让您告诉我在哪里寻找修复？我不确定在这里提供什么信息。iCloud 不应该自己处理这个属性同步吗？

谢谢您阅读此篇！标记

```
 // Recipe.h

    #import <CoreData/CoreData.h>

    @class Category;
    @class Photo;

    @interface Recipe :  NSManagedObject  
    {

    }
    @property (nonatomic, retain) NSString * name;
    @property (nonatomic, retain) NSNumber * recipeID;
    @property (nonatomic, retain) NSNumber * ctime;
    @property (nonatomic, retain) NSString * ingredients;
    @property (nonatomic, retain) NSString * comments;
    @property (nonatomic, retain) NSString * nameShort;
    @property (nonatomic, retain) NSString * directions;
    @property (nonatomic, retain) NSNumber * ptime;
    @property (nonatomic, retain) NSSet* photos;
    @property (nonatomic, retain) NSSet* categories;

    - (NSComparisonResult)compareRecipeNames:(Recipe *)recipe;

    @end

    @interface Recipe (CoreDataGeneratedAccessors)
    - (void)addPhotosObject:(Photo *)value;
    - (void)removePhotosObject:(Photo *)value;
    - (void)addPhotos:(NSSet *)value;
    - (void)removePhotos:(NSSet *)value;

    - (void)addCategoriesObject:(Category *)value;
    - (void)removeCategoriesObject:(Category *)value;
    - (void)addCategories:(NSSet *)value;
    - (void)removeCategories:(NSSet *)value;

    @end

    // 
    //  Recipe.m

    #import "Recipe.h"

    #import "Category.h"
    #import "Photo.h"

    @implementation Recipe

    @dynamic name;
    @dynamic recipeID;
    @dynamic ctime;
    @dynamic ingredients;
    @dynamic comments;
    @dynamic nameShort;
    @dynamic directions;
    @dynamic ptime;
    @dynamic junk;
    @dynamic photos;
    @dynamic categories;

    - (id)init{

        self = [super init];

        return self;
    }

    - (void)addCategories:(NSSet *)value{

        [self willChangeValueForKey:@"categories"
                        withSetMutation:NSKeyValueUnionSetMutation
                            usingObjects:value];

        [[self primitiveCategories] unionSet:value];

        [self didChangeValueForKey:@"categories"
                      withSetMutation:NSKeyValueUnionSetMutation
                          usingObjects:value];

    }

    - (void)addCategoriesObject:(Category *)value 
    {    
        NSSet *changedObjects = [[NSSet alloc] initWithObjects:&value count:1];

        [self willChangeValueForKey:@"categories" withSetMutation:NSKeyValueUnionSetMutation usingObjects:changedObjects];
        [[self primitiveValueForKey:@"categories"] addObject:value];
        [self didChangeValueForKey:@"categories" withSetMutation:NSKeyValueUnionSetMutation usingObjects:changedObjects];

        [changedObjects release];
    }

    - (void)removeCategoriesObject:(Category *)value 
    {
        NSSet *changedObjects = [[NSSet alloc] initWithObjects:&value count:1];

        [self willChangeValueForKey:@"categories" withSetMutation:NSKeyValueMinusSetMutation usingObjects:changedObjects];
        [[self primitiveValueForKey:@"categories"] removeObject:value];
        [self didChangeValueForKey:@"categories" withSetMutation:NSKeyValueMinusSetMutation usingObjects:changedObjects];

        [changedObjects release];
    }

    - (void)addPhotosObject:(Photo *)value 
    {    
        NSSet *changedObjects = [[NSSet alloc] initWithObjects:&value count:1];

        [self willChangeValueForKey:@"photos" withSetMutation:NSKeyValueUnionSetMutation usingObjects:changedObjects];
        [[self primitiveValueForKey:@"photos"] addObject:value];
        [self didChangeValueForKey:@"photos" withSetMutation:NSKeyValueUnionSetMutation usingObjects:changedObjects];

        [changedObjects release];
    }

    - (void)removePhotosObject:(Photo *)value 
    {
        NSSet *changedObjects = [[NSSet alloc] initWithObjects:&value count:1];

        [self willChangeValueForKey:@"photos" withSetMutation:NSKeyValueMinusSetMutation usingObjects:changedObjects];
        [[self primitiveValueForKey:@"photos"] removeObject:value];
        [self didChangeValueForKey:@"photos" withSetMutation:NSKeyValueMinusSetMutation usingObjects:changedObjects];

        [changedObjects release];
    }

    - (NSComparisonResult)compareRecipeNames:(Recipe *)recipe  {
        // Compare nodes to each other by comparing the data part.
        return [self.name compare:[recipe name] options:NSCaseInsensitiveSearch];
    }

    @end

    -- Category.h

    //Category.h

    #import <CoreData/CoreData.h>

    @class Recipe;

    @interface Category :  NSManagedObject  
    {
    }

    @property (nonatomic, retain) NSString * nameShort;
    @property (nonatomic, retain) NSString * name;
    @property (nonatomic, retain) NSSet* recipes;
    @property (nonatomic, retain) NSNumber* sortIndex;

    - (NSComparisonResult) compareCategoryNames:(Category *)category ;
    - (NSComparisonResult) compareCategorySortIndeces:(Category *)category;

    @end

    @interface Category (CoreDataGeneratedAccessors)
    - (void)addRecipesObject:(Recipe *)value;
    - (void)removeRecipesObject:(Recipe *)value;
    - (void)addRecipes:(NSSet *)value;
    - (void)removeRecipes:(NSSet *)value;

    @end

    // 
    //  Category.m
    //

    #import "Category.h"
    #import "Recipe.h"

    @implementation Category 

    @dynamic nameShort;
    @dynamic name;
    @dynamic recipes;
    @dynamic sortIndex;

    - (void)addRecipesObject:(Recipe *)value 
    {    
        NSSet *changedObjects = [[NSSet alloc] initWithObjects:&value count:1];

        [self willChangeValueForKey:@"recipes" withSetMutation:NSKeyValueUnionSetMutation usingObjects:changedObjects];
        [[self primitiveValueForKey:@"recipes"] addObject:value];
        [self didChangeValueForKey:@"recipes" withSetMutation:NSKeyValueUnionSetMutation usingObjects:changedObjects];

        [changedObjects release];
    }

    - (void)removeRecipesObject:(Recipe *)value 
    {
        NSSet *changedObjects = [[NSSet alloc] initWithObjects:&value count:1];

        [self willChangeValueForKey:@"recipes" withSetMutation:NSKeyValueMinusSetMutation usingObjects:changedObjects];
        [[self primitiveValueForKey:@"recipes"] removeObject:value];
        [self didChangeValueForKey:@"recipes" withSetMutation:NSKeyValueMinusSetMutation usingObjects:changedObjects];

        [changedObjects release];
    }

    - (NSComparisonResult) compareCategoryNames:(Category *)category
    {
        return [[self name] localizedCaseInsensitiveCompare: [category name]];
    }

    - (NSComparisonResult) compareCategorySortIndeces:(Category *)category
    {

         if ([self sortIndex] > [category    sortIndex]) {
              return (NSComparisonResult)NSOrderedDescending;
         }

         if ([self sortIndex] < [category sortIndex]) {
              return (NSComparisonResult)NSOrderedAscending;
         }
         return (NSComparisonResult)NSOrderedSame;
    }

    @end 
```

-- 来自 cdt 文件的第一个 plist

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
    <plist version="1.0">
    <dict>
        <key>compressedGlobalIDs</key>
        <array>
            <string>0:0:0</string>
            <string>1:1:0</string>
            <string>0:2:0</string>
            <string>0:3:0</string>
            <string>0:4:0</string>
            <string>0:5:0</string>
            <string>0:6:0</string>
            <string>0:7:0</string>
            <string>0:8:0</string>
            <string>0:9:0</string>
            <string>0:10:0</string>
            <string>0:11:0</string>
            <string>0:12:0</string>
            <string>0:13:0</string>
        </array>
        <key>deleted</key>
        <dict/>
        <key>entityNames</key>
        <array>
            <string>Recipe</string>
            <string>Category</string>
        </array>
        <key>inserted</key>
        <dict>
            <key>0</key>
            <dict>
                <key>categories</key>
                <array>
                    <string>1</string>
                </array>
                <key>ctime</key>
                <integer>0</integer>
                <key>name</key>
                <string>Aaa Rx D</string>
                <key>photos</key>
                <array/>
                <key>ptime</key>
                <integer>0</integer>
                <key>recipeID</key>
                <integer>0</integer>
            </dict>
        </dict>
        <key>kvStr</key>
        <string>mobile.F0F5BE6D-59A3-5D63-A0B2-4767EFECC603:1</string>
        <key>modelVersionHash</key>
        <string>9FRYa_LmmBTIAw8875pOlLyYmr5vrP1Hwi~lgvsHL1k=</string>
        <key>peerIDs</key>
        <array>
            <string>mobile.F0F5BE6D-59A3-5D63-A0B2-4767EFECC603</string>
        </array>
        <key>peerStates</key>
        <dict/>
        <key>primaryKeys</key>
        <array>
            <string>p89</string>
            <string>p6</string>
            <string>p43</string>
            <string>p4</string>
            <string>p41</string>
            <string>p5</string>
            <string>p52</string>
            <string>p58</string>
            <string>p68</string>
            <string>p13</string>
            <string>p79</string>
            <string>p28</string>
            <string>p17</string>
            <string>p25</string>
        </array>
        <key>transactionDate</key>
        <real>1343676810.7298651</real>
        <key>transactionNumber</key>
        <integer>1</integer>
        <key>updated</key>
        <dict>
            <key>1</key>
            <dict>
                <key>name</key>
                <string>Desserts</string>
                <key>recipes</key>
                <array>
                    <string>2</string>
                    <string>3</string>
                    <string>4</string>
                    <string>5</string>
                    <string>6</string>
                    <string>7</string>
                    <string>8</string>
                    <string>9</string>
                    <string>0</string>
                    <string>10</string>
                    <string>11</string>
                    <string>12</string>
                    <string>13</string>
                </array>
                <key>sortIndex</key>
                <integer>0</integer>
            </dict>
        </dict>
    </dict>
    </plist> 
```

-第二个plist

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
    <plist version="1.0">
    <dict>
        <key>compressedGlobalIDs</key>
        <array>
            <string>0:0:0</string>
            <string>1:1:0</string>
            <string>0:2:0</string>
            <string>0:3:0</string>
            <string>0:4:0</string>
            <string>0:5:0</string>
            <string>0:6:0</string>
            <string>0:7:0</string>
            <string>0:8:0</string>
            <string>0:9:0</string>
            <string>0:10:0</string>
            <string>0:11:0</string>
            <string>0:12:0</string>
            <string>0:13:0</string>
        </array>
        <key>deleted</key>
        <dict/>
        <key>entityNames</key>
        <array>
            <string>Recipe</string>
            <string>Category</string>
        </array>
        <key>inserted</key>
        <dict>
            <key>0</key>
            <dict>
                <key>categories</key>
                <array>
                    <string>1</string>
                </array>
                <key>ctime</key>
                <integer>0</integer>
                <key>name</key>
                <string>Aaa Rx D</string>
                <key>photos</key>
                <array/>
                <key>ptime</key>
                <integer>0</integer>
                <key>recipeID</key>
                <integer>0</integer>
            </dict>
        </dict>
        <key>kvStr</key>
        <string>mobile.F0F5BE6D-59A3-5D63-A0B2-4767EFECC603:1</string>
        <key>modelVersionHash</key>
        <string>9FRYa_LmmBTIAw8875pOlLyYmr5vrP1Hwi~lgvsHL1k=</string>
        <key>peerIDs</key>
        <array>
            <string>mobile.F0F5BE6D-59A3-5D63-A0B2-4767EFECC603</string>
        </array>
        <key>peerStates</key>
        <dict/>
        <key>primaryKeys</key>
        <array>
            <string>p89</string>
            <string>p6</string>
            <string>p43</string>
            <string>p4</string>
            <string>p41</string>
            <string>p5</string>
            <string>p52</string>
            <string>p58</string>
            <string>p68</string>
            <string>p13</string>
            <string>p79</string>
            <string>p28</string>
            <string>p17</string>
            <string>p25</string>
        </array>
        <key>transactionDate</key>
        <real>1343676810.7298651</real>
        <key>transactionNumber</key>
        <integer>1</integer>
        <key>updated</key>
        <dict>
            <key>1</key>
            <dict>
                <key>name</key>
                <string>Desserts</string>
                <key>recipes</key>
                <array>
                    <string>2</string>
                    <string>3</string>
                    <string>4</string>
                    <string>5</string>
                    <string>6</string>
                    <string>7</string>
                    <string>8</string>
                    <string>9</string>
                    <string>0</string>
                    <string>10</string>
                    <string>11</string>
                    <string>12</string>
                    <string>13</string>
                </array>
                <key>sortIndex</key>
                <integer>0</integer>
            </dict>
        </dict>
    </dict>
    </plist> 
```

# - 唯一 MOC 保存后的消息：

2012-07-31 12:38:44.632 iHungryMePlus[688:1b03] +PFUbiquityBaseline metadataFromCurrentBaselineForStoreWithName:modelVersionHash:andUbiquityRootLocation:withError:: CoreData: Ubiquity: 没有从元数据 url:file://localhost/private/ 获取基线元数据var/mobile/Library/Mobile%20Documents/3PAT8SS34X~com~DrummingGrouse~iHMP/.baseline/current.nosync/com.DrummingGrouse.iHMP.mainstore/9FRYa_LmmBTIAw8875pOlLyYmr5vrP1Hwi~lgvsHL1k=/baseline.meta

错误：（空）

2012-07-31 12:38:44.818 iHungryMePlus[688:1b03] +PFUbiquityBaseline metadataFromCurrentBaselineForStoreWithName:modelVersionHash:andUbiquityRootLocation:withError:: CoreData: Ubiquity: 没有从元数据 url:file://localhost/private/ 获取基线元数据var/mobile/Library/Mobile%20Documents/3PAT8SS34X~com~DrummingGrouse~iHMP/.baseline/current.nosync/com.DrummingGrouse.iHMP.mainstore/9FRYa_LmmBTIAw8875pOlLyYmr5vrP1Hwi~lgvsHL1k=/baseline.meta

错误：（空）

2012-07-31 12:38:44.824 iHungryMePlus[688:1b03]-PFUbiquityBaselineRecoveryOperation 主要：CoreData：Ubiquity：localPeerID：mobile.F0F5BE6D-59A3-5D63-A0B2-4767EFECC603，商店名称：com.DrummingGrouse.iHMP.mainstore，modelVersion 9FRYa_LmmBTIAw8875pOlLyYmr5vrP1Hwi~lgvsHL1k=

```
ubiquityRootLocation: <PFUbiquityLocation: 0x162e10>: /private/var/mobile/Library/Mobile Documents/3PAT8SS34X~com~DrummingGrouse~iHMP 
```

当前基线元数据为零，（空）

# c++ - 搜索数据集的高效算法

> ID：11764399
> 
> 赞同：1
> 
> 时间：2012-08-01T17:24:13.080
> 
> 标签：c++, algorithm, search

给定几组元素，例如：

```
int set1[5] {5601, 935, 4153, 2195, 422};
int set2[5] {5601, 935, 23, 44, 422};
int set3[5] {4205, 935, 4153, 2195, 15};
int set4[5] {4205, 589, 4015, 44, 422}; 
```

在顺序很重要的情况下（即 1、2、3 与 2、1、3 不同），定位特定集合的有效算法是什么？例如，您要定位：

```
int value[5] {5601, 935, 23, 44, 422}; 
```

注意事项：

1.  新集合的插入成本不是问题，因此它们可以存储在任何数据结构中，以优化搜索时间。

2.  每个集合将包含 1 到 1,000,000 个元素（大约，并且将有 1 到 1000 个集合（再次，大约）。但是，对于任何给定的集合，元素的数量将始终相同（例如，如果一个set 有 10 个元素，那么所有的集合将有 10 个元素）。

后续问题，我将在 C++ 中实现它，所以我有兴趣找出任何推荐的算法，它们是否存在于开源 C++ 库（最好是 STL、Boost 或 QT，但我会考虑其他人也是）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T17:28:56.247

如果顺序很重要，那么您正在查看的是序列，而不是集合。术语很重要。

由于您只考虑大约 1,000 个序列，因此将它们存储在哈希表中应该很容易，并且性能良好。我会考虑构建一个字符串来表示每个序列，例如，通过连接每个元素的字符串表示形式，加上某种分隔符，然后对其进行散列处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T17:27:40.313

使用 a`std::vector<set_type>`来存储集合。将所有套件插入容器中。使用 对容器进行排序`std::sort`。`std::binary_search`使用（或者`std::lower_bound`如果您需要元素的迭代器）查找元素。

您使用的类型`set_type`取决于每个集合中的元素数量。如果已知元素的数量很小，那么`std::array<T, N>`就足够了；否则，考虑`std::vector<T>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T17:26:27.713

定义集合的顺序，然后将它们插入树中。或者定义一个哈希码和一个比较器并对它们进行哈希表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T22:52:08.830

在这种情况下，我会使用哈希表。您将有访问时间`O(1)`（最坏的情况是`O(n)`，但有一个好的哈希函数，这不是问题）

因此，如果您的 Hashtabel 足够大并且您不必担心空间问题，这绝对是最快的搜索方式。（考虑二分搜索在`O(log(n))`）

哈希表仅在新 C++0x 标准的 STL 中可用。见[STL::TR1](http://en.wikipedia.org/wiki/C++_Technical_Report_1%22)

# xaml - 图片加载动画

> ID：11764403
> 
> 赞同：1
> 
> 时间：2012-08-01T17:24:24.907
> 
> 标签：xaml, windows-8, microsoft-metro

我正在寻找一个很好的例子，说明如何在我的 Metro xaml 应用程序中制作图像加载动画。我有一个图像控件，它通过 mvvm 直接绑定到 URL 来设置源。

所以我知道有 ImageOpened 和 ImageFailed 事件来停止任何动画，但是“下载”什么时候开始启动呢？因为应用程序第二次启动时，图像仍然被缓存，并且不再触发 ImageOpened 事件。

任何提示/技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:29:22.923

你看过[DownloadProgress 事件](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.bitmapimage.downloadprogress.aspx)吗？看起来事件 args 包含一个介于 0-100 之间的 Progress 值，您可以使用它来确定是否开始新的下载。

此外，还有一个通用的[XAML 动画库示例](http://code.msdn.microsoft.com/windowsapps/Animations-f758de70)，以防万一。

# jquery - 背景图像未正确渲染，其他图像未出现在 Ipad 上

> ID：11764404
> 
> 赞同：0
> 
> 时间：2012-08-01T17:24:26.617
> 
> 标签：jquery, css, ipad, html, ipad-2

嗨，我目前正在开发这个网站：

[http://remedia-solutions.com/clientes/0039_kiplingmexico/demo2/](http://remedia-solutions.com/clientes/0039_kiplingmexico/demo2/)

实际上它在 Mac 和 PC 浏览器上完美运行，这里的问题是当我进入 Safari Ipad 时，一些背景图像根本不显示，而其他的则存在比例问题。

所以我会向你展示我目前的 CSS，看看我是否能得到任何帮助，因为我是 Ipad 上的新手。

这是我用于 IPAD 的 css（PC 和 mac 有另一个 css）：

```
#fondo1{
    background-image: url("images/imagesbackground/BACKGROUND-INICIO.jpg");
    background-position: top center; 
    background-repeat: no-repeat;
    background-size: 1440px 950px;
    -webkit-background-size: 1440px 950px;
    position: absolute;
    width: 100%;
    height: 100%;
    display: block; 
}
#fondo1int{
    background-image: url("images/INICIO.png");
    background-position: center center; 
    background-repeat: no-repeat;
    background-size: 50%;
    -moz-background-size: 50%;
    position: absolute;
    width: 100%;
    height: 100%; 
    display: block; 
    top: 0;
    left: 0;
}

#fondo2{
    background-image: url("images/imagesbackground/BACKGROUND-HISTORIA.jpg");
    background-position: top center; 
    background-repeat: no-repeat;
    background-size: 1440px 950px;
    -moz-background-size: 1440px 950px;
    -webkit-background-size: 1440px 950px;
    position: absolute;
    width: 100%;
    height: 100%; 
}

#fondo2int{
    background-image: url("images/BACKGTOUND-TEXTO-HISTORIA.png");
    background-position: center center; 
    background-repeat: no-repeat;
    background-size: 50%;
    -moz-background-size: 50%;
    position: absolute;
    width: 100%;
    height: 100%; 
} 
```

这是我的 jquery 来计算窗口的高度和宽度：

```
$("#todoini,#todohistoria , #todocoleccion , #todocuidados, #todosucursales,#todocontacto").css('height', $(window).height());
$("#todoini, #todohistoria , #todocoleccion , #todocuidados, #todosucursales,#todocontacto").css('width', $(window).width());
$("#navimage").css('margin-left', $(window).width() / 2 - 140);
$("#navimage").css('margin-top', $(window).height() -140);
$("#contenidoimagen , #contenidoimagen2 , #contenidoimagen3 , #contenidoimagen4, #contenidoimagen5,#contenidoimagen6").css('width', $(window).width());
$("#contenidoimagen, #contenidoimagen2 ,#contenidoimagen3 , #contenidoimagen4 , #contenidoimagen5,#contenidoimagen6").css('height', $(window).height());
$("#todo").css('width', $("#todoini").width() + $("#todohistoria").width() + $("#todocoleccion").width() + $("#todocuidados").width() + $("#todosucursales").width() + $("#todocontacto").width());
$("#todoini , #todohistoria, #todocoleccion, #todocuidados, #todosucursales, #todocontacto").css('float', 'left');
$(window).resize(function() {
    $("#todoini,#todohistoria , #todocoleccion , #todocuidados, #todosucursales, #todocontacto ").css('height', $(window).height());
    $("#todoini,#todohistoria , #todocoleccion , #todocuidados, #todosucursales, #todocontacto").css('width', $(window).width());
    $("#contenidoimagen , #contenidoimagen2 , #contenidoimagen3 , #contenidoimagen4, #contenidoimagen5 , #contenidoimagen6").css('width', $(window).width());
    $("#todo").css('width', $("#todoini").width() + $("#todohistoria").width() + $("#todocoleccion").width() + $("#todocuidados").width() + $("#todosucursales").width() + $("#todocontacto").width());
});
$(window).trigger('resize') 
```

所以背景容器总是有一个宽度和一个高度设置。

有任何想法吗？

如果我使用背景大小，请快速编辑：覆盖它确实显示但图像很大：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:16:59.700

解决方案是为每个背景设置宽度和高度。

```
#fondo1{
    background:  url("images/imagesbackground/BACKGROUND-INICIO.jpg");
    background-position:    top center;
    background-repeat:      no-repeat;
    -webkit-background-size:    1024px 768px !important;
    position:absolute;
    width:1024px !important;
    height:768px !important;

}
#fondo1int{
    background-image: url("images/INICIO-OTONO.png") !important;
    background-position:    center center;
    background-attachment: initial; 
    background-repeat:      no-repeat;
    background-size:    800px 400px !important;
    position:absolute;
    width:1024px !important;
    height:768px !important;

} 
```

# javascript - 如何使用 javascript 检查可见性属性

> ID：11764407
> 
> 赞同：4
> 
> 时间：2012-08-01T17:24:48.313
> 
> 标签：javascript, css, properties

我测试了以下 div 的可见性：

```
<div id="div1">div</div> 
```

单独定义的样式

```
#div1 {
    visibility:visible; //or hidden
} 
```

如果样式是内联定义的，`<div id="div1" style="visibility:visible">div</div>`则很容易检查属性中的可见`element.style.visibility`性。但问题是当单独定义样式时（如上所示 - #div1、.div1 或 div）。

那么在哪里可以只使用纯 JavaScript 检查可见性属性呢？jQuery 每次都返回正确的样式（我不知道如何跟踪它），那么他们是怎么做到的呢？这是我不成功的尝试的一个小技巧，除了 jQuery 的工作之外没有任何测试[：](http://jsfiddle.net/ZJuFZ/)

```
alert($(el).css('visibility')); // jQuery works well - returns correct property
alert(el.style.visibility); // not works - always empty string
alert(el.offsetWidth > 0 || el.offsetHeight > 0 ? 'yes':'no'); // also not working - always true - http://stackoverflow.com/questions/1343237/how-to-check-elements-visibility-via-javascript
alert(el.getComputedStyle); // undefined - http://stackoverflow.com/questions/4795473/check-visibility-of-an-object-with-javascript
alert(el.getAttribute('visibility')); // not works - of course null 
```

关于如何成功的任何想法？在最新的 Firefox 15 中测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T17:27:20.063

[`getComputedStyle`](https://developer.mozilla.org/en/DOM/window.getComputedStyle)是一种全局方法。按如下方式使用它：

```
window.getComputedStyle(el, null).getPropertyValue('visibility'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T17:27:29.327

您使用`getComputedStyle`错误：

```
getComputedStyle( el ).visibility
//"visible" 
```

演示：http: [//jsfiddle.net/hMFry/1/](http://jsfiddle.net/hMFry/1/)

在 Internet Explorer 中，您将使用：

```
el.currentStyle.visibility; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T17:28:34.020

```
getComputedStyle(el).getPropertyValue('visibility'); 
```

# python - 为什么 python-cgi 在 unicode 上失败？

> ID：11764408
> 
> 赞同：10
> 
> 时间：2012-08-01T17:25:01.270
> 
> 标签：python, unicode, cgi

如果在控制台中运行此代码 - 它运行良好（它是俄语），但如果在 Apache2 服务器上像 cgi 一样运行它 - 它会失败：`<type 'exceptions.UnicodeEncodeError'>: 'ascii' codec can't encode characters in position 8-9: ordinal not in range(128)`. 代码是：

```
#!/usr/bin/env python
# -*- coding: UTF-8 -*-

import cgitb
cgitb.enable()

print "Content-Type: text/html;charset=utf-8"
print 
s=u'Nikolja \u043d\u0435 \u0421\u0430\u0440\u043a\u043e\u0437\u0438!'
print s#.encode('utf-8') 
```

是的，解决方案是取消注释`.encode('utf-8')`，但我花了更多时间来理解为什么而不是发生，我看不到答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T21:09:40.300

从控制台运行时，Python 可以检测控制台的编码，并将打印到控制台的 Unicode 隐式转换为该编码。如果该编码不支持您尝试打印的字符，它仍然会失败。UTF-8 可以支持所有 Unicode 字符，但其他常见的控制台编码（如美国 Windows 上的 cp437）不支持。

当 stdout 不是控制台时，Python 2.X 在无法确定控制台编码时默认为 ASCII。这就是为什么在网络服务器中你必须明确并自己编码你的输出。

例如，从控制台和您的网络服务器尝试以下脚本：

```
import sys
print sys.stdout.encoding 
```

从控制台你应该得到一些编码，但你应该从 web 服务器得到`None`. 请注意，Python 2.X 使用`ascii`但 Python 3.X`utf-8`在无法确定编码时使用。

重定向输出时，控制台也可能出现此问题。这个脚本：

```
import sys
print >>sys.stderr,sys.stdout.encoding
print >>sys.stderr,sys.stderr.encoding 
```

直接运行与重定向时返回以下内容`stdout`：

```
C:\>test
cp437
cp437

C:\>test >out.txt
None
cp437 
```

Note`stderr`没有受到影响，因为它没有被重定向。

环境变量`PYTHONIOENCODING`也可用于覆盖默认的 stdout/stdin 编码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T17:48:25.410

尝试在标准输入和标准输出上应用 utf-8 编解码器...

```
#!/usr/bin/env python
# -*- coding: UTF-8 -*-

import cgitb
import sys
import codecs

sys.stdout = codecs.getwriter('utf-8')(sys.stdout)
# If you need input too, read from char_stream as you would sys.stdin
char_stream = codecs.getreader('utf-8')(sys.stdin)

cgitb.enable()

print "Content-Type: text/html;charset=utf-8"
print 
s=u'Nikolja \u043d\u0435 \u0421\u0430\u0440\u043a\u043e\u0437\u0438!'
print s 
```

# android - 为什么我的 C 代码找不到我的 Java 函数？

> ID：11764409
> 
> 赞同：0
> 
> 时间：2012-08-01T17:25:06.153
> 
> 标签：android, android-ndk, java-native-interface

我的应用程序调用本地库，然后在本地库中调用 Java 代码。我对本机库的调用正常工作（我很确定），但它没有告诉我在尝试从 C 文件调用它们时找不到 Java 函数。

该应用程序甚至没有崩溃，没有弹出窗口告诉我它意外关闭，它只是闪烁黑屏并且没有任何反应。

我试图重现的代码最初是用 C 语言为 Palm Pilot 制作的，并且正在转移到 Android 设备上。这是 CI 中的原始调用，我试图复制...

```
InitRelay(Changeit,getit,putit,flushit,delayit); 
```

上面调用中的参数是函数名，函数如下：

```
void Changeit(WORD baud){
    ChangeRate(baud);
}

extern Boolean ChangeRate(UInt32 baud)
{...}

Int16 getit(UInt16 t) {...}

void putit( BYTE p ) {...}

void flushit(void){...}

extern void delayit( UInt16 wait ) {...} 
```

这是我的`.c`文件中显示的 InitRelay：

```
BYTE __stdcall InitRelay(fp_setbaud _setbaud, fp_get _get, fp_put _put, fp_flush _flush, fp_delay _delay){

    RelayAPI_SetBaud=_setbaud;
    RelayAPI_get=_get;
    RelayAPI_put=_put;
    RelayAPI_flush=_flush;
    RelayAPI_delay=_delay;
    ....
} 
```

上面显示的参数是在我的`.h`文件中定义的：

```
typedef void (__stdcall *fp_setbaud)(WORD);
typedef short (__stdcall *fp_get)(WORD);
typedef void (__stdcall *fp_put)(BYTE);
typedef void (__stdcall *fp_flush)(void);
typedef void (__stdcall *fp_delay)(WORD); 
```

这些`WORD/BYTE/DWORD`类型在此处显示的单独`.h`文件中定义：

```
typedef unsigned char BYTE;
typedef unsigned short WORD;
typedef unsigned long DWORD; 
```

现在，在我的 Android 代码中，我调用了一个名为 InitRelayJava() 的函数，应用程序的所有数据都存储在一个名为`RelayAPIModel`. 我在其中创建了一个嵌套类来存储我的所有本机函数。我这样做是为了无论应用程序当前处于什么活动中，我都可以以相同的方式访问这些功能。

```
public class RelayAPIModel {
    ....
    public static class NativeCalls {
        static {
            System.loadLibrary( "RelayAPI" );
        }

        public native static byte InitRelayJava();

    public native static void FreeRelayJava();

        public static void changeItJavaWrapper( short l ) {
            mModelService.changeitJava( l );
        }

        public static void flushItJavaWrapper() {
            mModelService.flushitJava();
        }

        public static void putItJavaWrapper( byte[] p ) {
            mModelService.putitJava( p );
        }

        public static void delayItJavaWrapper( short wait ) {
            mModelService.delayitJava( wait );
        }

        public static short getItJavaWrapper( short s ) {           
            return mModelService.getitJava( s );
        }
    }
 } 
```

在函数内部进行的`*Wrapper`调用转到一个单独的类，我必须处理所有应用程序的蓝牙功能。我认为这个问题不需要这些。

这就是 InitRelayJava 在我的 C 代码中的样子......

```
BYTE Java_my_eti_commander_RelayAPIModel_00024NativeCalls_InitRelayJava( JNIEnv *env, jobject obj  ) {

    myEnv = (env);
    bluetoothClass = (*env)->GetObjectClass( env, obj );
    myObject = obj;

    changeID = (*myEnv)->GetMethodID( myEnv, myObject, "changeitJavaWrapper", "(S)V"  );
    getID    = (*myEnv)->GetMethodID( myEnv, myObject, "getitJavaWrapper"   , "(S)S"   );
    putID    = (*myEnv)->GetMethodID( myEnv, myObject, "putitJavaWrapper"   , "(B)V" );
    flushID  = (*myEnv)->GetMethodID( myEnv, myObject, "flushitJavaWrapper" , "()V"   );
    delayID  = (*myEnv)->GetMethodID( myEnv, myObject, "delayitJavaWrapper" , "(S)V"  );
...
} 
```

这是我收到的 LogCat...

```
08-02 10:27:32.406: D/dalvikvm(28376): Trying to load lib /data/data/my.eti.commander/lib/libRelayAPI.so 0x40515430
08-02 10:27:32.406: D/dalvikvm(28376): Added shared lib /data/data/my.eti.commander/lib/libRelayAPI.so 0x40515430
08-02 10:27:32.406: D/dalvikvm(28376): No JNI_OnLoad found in /data/data/my.eti.commander/lib/libRelayAPI.so 0x40515430, skipping init
08-02 10:27:32.406: D/dalvikvm(28376): GetMethodID: method not found: Lmy/eti/commander/RelayAPIModel$NativeCalls;.changeitJavaWrapper:(S)V
08-02 10:27:32.413: D/dalvikvm(28376): GetMethodID: method not found: Lmy/eti/commander/RelayAPIModel$NativeCalls;.getitJavaWrapper:(S)S
08-02 10:27:32.413: E/dalvikvm(28376): Class lookup Ljava/lang/NoSuchMethodError; attempted while exception Ljava/lang/NoSuchMethodError; pending 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:24:56.100

`InitRelayJava`是一个静态方法 - 这意味着您的第二个参数 ( `obj`) 是一个类对象指针，而不是一个`this`指针。所以摆脱以下行：

```
bluetoothClass = (*env)->GetObjectClass( env, obj ); 
```

而是传递`obj`给 GetMethodID()，如下所示：

```
changeID = (*myEnv)->GetMethodID( myEnv, obj, "changeitJavaWrapper", "(I)Z"  ); 
```

编辑：另外，您的参数/返回类型签名是错误的。Short 与 int 不同，因此 for 的签名`changeitJavaWrapper`是“(S)Z”，for`getitJavaWrapper`是“()I”，因为它不带参数并返回一个 int。请多加小心；不需要高深的 C 知识就能做到这些，只需进行一些自我检查。你的这个项目正在慢慢进入[你尝试了什么？](http://www.whathaveyoutried.com/)领土。

JNI 类型代码的备忘单在[这里](http://dev.kanngard.net/Permalinks/ID_20050509144235.html)。

让我试着预测你的下一个问题——你不能调用这些方法。当然你不能，不可能从静态方法调用非静态方法。您的 Java 回调都是非静态的，而本地方法是静态的。要么将它们设为静态，要么将本机方法设为非静态并插入`GetObjectClass`后面。

EDIT2：所以您将Java方法更改为静态而不告诉。现在，`(*env)->GetMethodID()`您不需要调用`(*env)->GetStaticMethodID()`来获取方法 ID。相同的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:21:03.640

你的方法签名是错误的。用于`javap -s classname`获取类的签名，例如：`javap -s java.lang.String`. 您可以`javap`在本地 JDK 中找到。

# sql - 要在 phpmyadmin 中创建的语言表集。可以提高效率吗？是否正确标准化？

> ID：11764411
> 
> 赞同：0
> 
> 时间：2012-08-01T17:25:30.633
> 
> 标签：sql

我目前正在为语言列表设置 SQL 表，该表将在不久的将来作为我的 Web 应用程序翻译工作的框架。

我决定创建的表和字段如下所示：

```
Language
--------
Language ID
Language name
Native name

Region
------
Language ID
Region

Active
------
Language ID
Active 
```

语言 ID 将是两个表中的主键。

活动表中的活动字段只是让我知道哪些语言已被翻译（用 1 表示），哪些尚未翻译。

示例数据如下所示：

**语言表**

```
Language ID  Language name   Native name
-----------  -------------   -------------
afr          Afrikaans       Afrikaans
sqi          Albanian        gjuha shqipe
ara          Arabic          العربية 
```

**区域表**

```
Language ID  Region 
-----------  -------------   
afr          Africa       
sqi          Eastern Europe
ara          Middle East 
```

**活动表**

```
Language ID  Active
-----------  -------------   
afr          0
sqi          1
ara          0 
```

计划有固定数量的语言和地区。我计划添加到数据库中的语言（供以后翻译使用）包括（它们的所有代码都将从 ISO 639-2/B 列中获取，可在此处找到：[http ://en.wikipedia.org/wiki/ List_of_ISO_639-1_codes](http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes)）：

```
Afrikaans
Albanian
Arabic
Belarusian
Bulgarian
Catalan
Chinese (simplified)
Chinese (traditional)
Croatian
Czech
Danish
Dutch
English
Estonian
Esperanto
Filipino
Finnish
French
Galician
German
Greek
Hebrew
Hindi
Hungarian
Icelandic
Indonesian
Irish
Italian
Japanese
Korean
Latvian
Lithuanian
Macedonian
Malay
Maltese
Norwegian
Persian
Polish
Portuguese
Romanian
Russian
Serbian
Slovak
Slovenian
Spanish
Swahili
Swedish
Thai
Turkish
Ukrainian
Vietnamese
Welsh
Yiddish 
```

区域类别包括：

```
All
Africa 
Middle East
Americas
Asia-Pacific
Eastern Europe
Western Europe 
```

我现在的问题是我是否已经完全规范化了这张表？是否可以进一步规范化或提高效率。在进行设置之前，我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:55:05.657

如果您在多个表中使用 languageID 作为 PK，则您未正确规范化。

活动表是否应该指示语言是否处于活动状态？如果如此活跃应该只是语言表中的一个字段。

地区表应该是regionID，地区。

应该添加另一个表，将区域链接到仅包含列 languageID 和 regionID 的语言，pk 应该是 regionID 和 languageID 的组合键。这将使您能够扩展以更好地表示语言与区域的多对多关系。

按要求（以及我会做的一些小改动）：

在您的示例中，您为什么需要链接表并不明显，但是当您到达“美洲”地区时，请考虑一下，您实际上需要使用多种语言，因为每个国家/地区可能会说英语、西班牙语、法语或葡萄牙语。即使你把它分解为一个国家，加拿大也需要法语和英语。西班牙语也将出现在多个地区，欧洲和美洲。链接表将更好地代表这一点。

语言 ID 应该是一个 int，即使 3 个字母的缩写是唯一的，大多数 SQL 引擎将能够更快地加入 int，因此您的语言表应该是：

```
Language ID  Language Code  Language name   Native name   Active
-----------  -------------  -------------   ------------  ------
1            afr            Afrikaans       Afrikaans     0
2            sqi            Albanian        gjuha shqipe  1
3            ara            Arabic          العربية
4            spa            Spanish         Espanol       1
5            eng            English         English       1 
```

我似乎无法在阿拉伯语之后的活动字段中添加 0，无论 squiggle 是什么 ASCII 都不能很好地发挥作用，所以想象一下它就在那里。

您的区域表应该很简单：

```
Region ID  Region 
---------- -------------   
1          Africa       
2          Eastern Europe
3          Middle East
4          Americas
5          Western Europe 
```

现在你想要一个链接表，它基本上是：

```
Region ID  Language ID
---------  -----------
1          1
2          2
3          3
4          4
4          5
5          4
5          5 
```

所以你可以看到这更好地代表了同一地区可能使用多种语言，一种语言可能在多个地点使用。

# sql - 将记录与第二个表上的最新记录连接起来

> ID：11764413
> 
> 赞同：2
> 
> 时间：2012-08-01T17:25:35.280
> 
> 标签：sql, join

我有 2 张桌子

```
Delivery
--------
deliveryid int (PK)

description long varchar

DeliveryHistory
---------------
historyid int

delievryid int

statusid int

recordtime timestamp 
```

我正在尝试做的是左外连接，以从表 Delivery 中带回所有记录，每次交付时只有 DeliveryHistory 中的最新条目。但是，如果 DeliveryHistory 中没有用于交付的条目，我想要一个空值

我已经这样做了：

```
select d.deliveryid,d.description, h.statusid from delivery d
left outer join  Deliveryhistory h on d.deliveryid = h.deliveryid
where  h.recordtime =
       ( SELECT MAX(recordtime)
           FROM Deliveryhistory
          WHERE deliveryid = d.deliveryid) 
```

但它只返回在 DeliveryHistory 中有条目的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:31:14.343

您的 where 子句导致所有空值都被排除在外。尝试

```
where  h.RecordTime is null OR
       h.recordtime =
       ( SELECT MAX(recordtime)
           FROM Deliveryhistory
          WHERE deliveryid = d.deliveryid) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:31:08.050

```
select d.deliveryid,d.description, h.statusid from delivery d
left outer join  Deliveryhistory h on d.deliveryid = h.deliveryid
where  (h.recordtime =
   ( SELECT MAX(recordtime)
       FROM Deliveryhistory
      WHERE deliveryid = d.deliveryid)
  or h.deliveryid = null) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T17:35:38.833

现有的答案就是全部，但如果您想在不使用`WHERE`子句的情况下执行此操作，则可以使用以下构造。

```
SELECT  d.deliveryid
        ,d.description
        , dh.statusid
FROM    Delivery d 
        LEFT OUTER JOIN (
          SELECT deliveryid, MAX(recordtime) AS recordtime
          FROM   DeliveryHistory
          GROUP BY
                 deliveryid
        ) dhm ON dhm.deliveryid = d.deliveryid                 
        LEFT OUTER JOIN DeliveryHistory dh ON dh.deliveryid = dhm.deliveryid 
                                              AND dh.recordtime = dhm.recordtime 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T17:46:12.307

CTE 产生 maxrow（IFF 实现支持 CTE ;-) 加上与 CTE 的简单左连接。

```
WITH last AS (
        SELECT * FROM Deliveryhistory dh
        WHERE NOT EXISTS (
                SELECT * 
                FROM Deliveryhistory nx
                WHERE nx.deliveryid = dh.deliveryid
                AND nx.recordtime > dh.recordtime -- no one is bigger: dh must be the max
                )
        )
SELECT d.deliveryid, d.description, l.statusid 
FROM delivery d
LEFT JOIN last l ON d.deliveryid = l.deliveryid
        ; 
```

# php - 如何在 Drupal 中调试缓存？

> ID：11764414
> 
> 赞同：2
> 
> 时间：2012-08-01T17:25:57.713
> 
> 标签：php, caching, drupal-7

我在 Drupal 7 网站上有一个问题，其中不应该缓存的块正在被缓存。如何调试此类问题？我是否有一种简单的方法可以知道哪个块正在被缓存以及使用哪个 cid？

被缓存的块是这样定义的`hook_block_info`：

```
$blocks['product-info-block'] = array(
  'info' => t('Product info'),
  'cache' => DRUPAL_NO_CACHE,
); 
```

在数据库中没有这个特定块的痕迹，所以我怀疑它被缓存为其他东西的一部分，有没有简单的方法来解决这个问题？

注意：我没有开发这个，所以我对结构知之甚少，我只是在做一些错误修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:38:44.130

检查您的 APC 缓存。显然，检查您的本地缓存。

此外，如果您使用启用了缓存的代理服务器，请让管理员将您的站点从缓存中排除。

**更新 09:36 GMT-6 20120804：**

*好的，所以没有 APC 缓存...*我知道它很脏，但是您可以在站点（或至少您的主题/模块文件夹）中查找“产品信息块”或显示块时显示的某些文本. 该块可能存储在插件模块或主题中。

我还会**检查您的模块**屏幕是否有任何与块或性能相关的模块，最后**检查您**对匿名和经过身份验证的用户的权限。*（例如，块访问模块可能向匿名用户显示缓存块，但向登录用户显示实时块。这也发生在 Drupal 的缓存中，可以在 Drupal 管理屏幕的性能部分下进行配置。）*

# mysql - MYSQL插入成功但没有添加数据

> ID：11764416
> 
> 赞同：1
> 
> 时间：2012-08-01T17:26:14.947
> 
> 标签：mysql

这是表结构

```
-- phpMyAdmin SQL Dump
-- version 3.4.10.1

-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Aug 01, 2012 at 12:20 PM
-- Server version: 5.1.63
-- PHP Version: 5.2.6

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

--
-- Database: `beta2_fetcher`
--

-- --------------------------------------------------------

--
-- Table structure for table `rss_fetch_stack`
--

CREATE TABLE IF NOT EXISTS `rss_fetch_stack` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `sourceData` text CHARACTER SET utf8 NOT NULL,
  `sourceId` int(11) NOT NULL,
  `ts` int(11) NOT NULL,
  `fetched_ts` int(11) NOT NULL,
  `fetch_status` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `sourceId` (`sourceId`,`fetch_status`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=6866 ; 
```

继承人我正在尝试执行的 sql 查询：

```
insert into rss_fetch_stack set ts = '1343840864' , fetch_status='0', sourceId='42312' , sourceData='O:8:"stdClass":26:{s:2:"id";s:2:"12";s:7:"site_id";s:1:"3";s:5:"title";s:25:"عربي";s:3:"url";s:50:"someXML";s:7:"groupId";s:1:"0";s:8:"category";s:1:"6";s:7:"enabled";s:1:"1";s:13:"bypassCompare";s:1:"0";s:7:"isInner";s:1:"0";s:8:"useProxy";s:1:"0";s:8:"autoPush";s:1:"0";s:11:"autoPushAge";s:1:"0";s:13:"autoPushCount";s:1:"0";s:12:"byWordFilter";s:1:"0";s:15:"publishInterval";s:2:"10";s:12:"publishCount";s:1:"1";s:6:"preURL";s:0:"";s:7:"postURL";s:0:"";s:9:"deleteURL";s:0:"";s:8:"preTitle";s:0:"";s:9:"postTitle";s:0:"";s:11:"deleteTitle";s:0:"";s:12:"maxFetchNews";s:1:"0";s:13:"fetchInterval";s:1:"2";s:10:"wordFilter";s:0:"";s:11:"blockFilter";s:0:"";}' 
```

我正在尝试通过 phpmyadmin 执行此操作，它说添加了一行，并给了我行 ID ...但表格保持为空！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:31:53.700

请改用此语法，它肯定会起作用：

INSERT INTO 表名 (col1, col2) VALUES('data1', 'data2' )

这里有一些例子：

*   [http://www.ntchosting.com/mysql/insert-data-into-table.html](http://www.ntchosting.com/mysql/insert-data-into-table.html)
*   [http://www.ntchosting.com/mysql/insert-date.html](http://www.ntchosting.com/mysql/insert-date.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:37:50.583

您尚未将其设置`fetched_ts`并定义为`NOT NULL`.

否则，您可以运行如下查询：

`insert into rss_fetch_stack values ( 'O:8:"stdClass":26:{s:2:"id";s:2:"12";s:7:"site_id";s:1:"3";s:5:"title";s:25:"عربي";s:3:"url";s:50:"someXML";s:7:"groupId";s:1:"0";s:8:"category";s:1:"6";s:7:"enabled";s:1:"1";s:13:"bypassCompare";s:1:"0";s:7:"isInner";s:1:"0";s:8:"useProxy";s:1:"0";s:8:"autoPush";s:1:"0";s:11:"autoPushAge";s:1:"0";s:13:"autoPushCount";s:1:"0";s:12:"byWordFilter";s:1:"0";s:15:"publishInterval";s:2:"10";s:12:"publishCount";s:1:"1";s:6:"preURL";s:0:"";s:7:"postURL";s:0:"";s:9:"deleteURL";s:0:"";s:8:"preTitle";s:0:"";s:9:"postTitle";s:0:"";s:11:"deleteTitle";s:0:"";s:12:"maxFetchNews";s:1:"0";s:13:"fetchInterval";s:1:"2";s:10:"wordFilter";s:0:"";s:11:"blockFilter";s:0:"";}', '42312', '1343840864' , '111111111', '0')`;

//其中 1111111 是`fetched_ts`

# grails - 更新数据库中的用户后如何更新主体？

> ID：11764423
> 
> 赞同：2
> 
> 时间：2012-08-01T17:26:33.877
> 
> 标签：grails, spring-security, spring-ldap

我想我问的问题和[这里](https://stackoverflow.com/questions/7889660/how-to-reload-spring-security-principal-after-updating-in-hibernate)的问题一样。

这是我正在做的事情：

1.) 不在我的数据库中的用户第一次登录到我的应用程序。

2.) 用户通过 LDAP 进行身份验证

3.) 我听一个`AuthenticationSuccessEvent`. 当检测到用户时，如果他们不存在，我会将其添加到我的数据库中，或者如果他们确实存在，则使用 LDAP 信息更新他们的信息。

我的问题是，如果我第一次将用户添加到我的数据库中，`id`他们在添加之前没有。我想更新`principal`所以`id`可以从`principal`对象访问。

我已经尝试过[这里](http://forum.springsource.org/showthread.php?87771-Reload-Update-custom-UserDetails-without-logging-out)描述的方法，但没有奏效。

# android - AutoCompleteView 在光标处崩溃

> ID：11764425
> 
> 赞同：0
> 
> 时间：2012-08-01T17:26:48.857
> 
> 标签：android, sqlite

我的第一篇文章只有不到一半的文字，因此是第二篇（完整的）文章。

我正在使用 sqlite 来填充两个 AutoCompleteTextView 的测试应用程序我正在使用汽车制造商和模型进行测试

**自动完成的：**

使自动完成

模型自动完成

makeAutocomplete 的列表是从 sql 查询中填充的，并且工作正常

选择品牌时填充第二个

```
makeAutoComplete.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

            final String[] makeSelected = {arg0.getItemAtPosition(arg2).toString()};
            final String[] modelDeal = sqlDBModel.getAllModelFilter(makeSelected);
            ArrayAdapter<String> modelAdapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_dropdown_item_1line, modelDeal);
            initModelAutoComplete(modelAdapter);

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    }); 
```

**initModelAutoComplete 声明**

```
public void initModelAutoComplete(ArrayAdapter<String> adapter){

    //adapter = new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, list);
    modelAutoComplete.setAdapter(adapter);
    modelAutoComplete.setThreshold(1);
    modelAutoComplete.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3){
            arg0.getItemAtPosition(arg2);
        }
    });
} 
```

**SQLiteModelSearch.getAllModelFilter 声明**

```
 public String[] getAllModelFilter(String[] vehiclemake){

    if(vehiclemake != null){

        Cursor cursor = this.sqliteDBInstance.query(DB_MAKEMODEL_TABLE,
                                                    new String[]{DB_COLUMN_MAKE, DB_COLUMN_MODEL},
                                                    DB_COLUMN_MAKE+"=?",
                                                    vehiclemake,
                                                    null,
                                                    null,
                                                    null,
                                                    null);

        if( cursor != null){
            String[] str = new String[cursor.getCount()];

            int i = 0;
            while(cursor.moveToNext()){
                str[i] = cursor.getString(cursor.getColumnIndex(DB_COLUMN_MODEL));
                i++;
            }
            return str;
        } else {
            Log.i("vehiclemake = ", "NULL");
            return new String[]{};
        }
    }

    return new String[]{};
} 
```

**日志猫**

> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 android.app.ActivityThread.main(ActivityThread.java:3683)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): at java.lang.reflect.Method.invokeNative(Native Method) 07-31 13:00:19.631: E/AndroidRuntime(1302): 致命异常: main
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): java.lang.NullPointerException
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 com.myapp.sqltest.database.SQLiteModelSearch.getAllModelFilter(SQLiteModelSearch.java:100)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 com.myapp.sqltest.activity.addVehicleActivity$2.onItemSelected(addVehicleActivity.java:62)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 android.widget.AdapterView.fireOnSelected(AdapterView.java:871)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 android.widget.AdapterView.access$200(AdapterView.java:42)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:837)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 android.os.Handler.handleCallback(Handler.java:587)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 android.os.Handler.dispatchMessage(Handler.java:92)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 android.os.Looper.loop(Looper.java:130)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 java.lang.reflect.Method.invoke(Method.java:507)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
> 
> 07-31 13:00:19.631: E/AndroidRuntime(1302): at dalvik.system.NativeStart.main(Native Method)

我可以看到异常被抛出：

```
Cursor cursor = this.sqliteDBInstance.query(DB_MAKEMODEL_TABLE,
                                                    new String[]{DB_COLUMN_MAKE, DB_COLUMN_MODEL},
                                                    DB_COLUMN_MAKE+"=?",
                                                    vehiclemake,
                                                    null,
                                                    null,
                                                    null,
                                                    null); 
```

但不知道为什么，我已经看过所有进入函数的变量，但没有一个是空的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T23:51:09.133

I've figured it out. the issue was that I had defined

```
public AutoCompleteTextView modelAutoComplete;
public AutoCompleteTextView makeAutoComplete; 
```

Then then in function onCreate

I had defined:

```
AutoCompleteTextView modelAutoComplete = (AutoCompleteTextView) findViewById(R.id.autoCompleteModel);
AutoCompleteTextView makeAutoComplete = (AutoCompleteTextView) findViewById(R.id.autoCompleteModel); 
```

I overlooked variable scope since both makeAutoComplete and modelAutoComplete where defined twice, one as a global class variable, and the second as a local function variable.

since the global variable was only defined and not initialized. The function initModelAutoComplete() was referencing the global public variable modelAutoComplete causing the NPE exception.

# regex - 正则表达式多行：IP 更正

> ID：11764429
> 
> 赞同：0
> 
> 时间：2012-08-01T17:27:06.357
> 
> 标签：regex

我有一个 ip:port 形式的 ip 地址列表，但其中一些格式不正确，例如：

```
OCTETS ARE EXAMPLES, It doesn't matter that they are over 255
12.345.678.90:12345
58412.345.678.91:12391
12.345.678.92:1823
12.345.678.93:80 
```

我想使用正则表达式从第二个 IP 中去除多余的数字，因为它经常发生，我有大约 2000 个要过滤

我的第一个想法是找到：`\r\n[0-9]{3,15}(.*\r\n[0-9]{1,3})`并替换为`\2\1\2`，但它似乎没有效果。

我不得不假设下一行具有相同的前导数字，这不是必须的。如果有人能告诉我一个解决方案，只有在下一行以点之前包含的数字开头时才能修复它，那将不胜感激。

编辑：我正在为这个正则表达式使用 Notepad++

此外，即使您使用八位字节检测，如果我想要的数字是 12，而第一个八位字节是 112，该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:35:22.160

尝试替换`^\d+(\d{2}\.)`为`\1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:37:06.703

`(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9]{1,2})\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9]{1,2})`

这应该匹配任何有效的 IP 地址。（即不是“257.4.33.134”，因为 257 太大了）

注意：这将不匹配您的任何示例，因为八位字节太大

欢迎来到 StackOverflow！

# java - 安装juno eclipse时出错

> ID：11764430
> 
> 赞同：0
> 
> 时间：2012-08-01T17:27:11.360
> 
> 标签：java, eclipse, glassfish

上周我下载了新版Eclipse，juno版。我刚尝试安装 Glassfish 3.1 并收到以下错误：

```
An error occurred while collecting items to be installed
session context was: (profile = epp.package.jee, org.eclipse.equinox.internal.p2.engine.phases.Collect phase =, operand =, action =).
Problems downloading artifact: osgi.bundle, oracle.eclipse.tools.doc.javaee5, 1.0.0.201201241920.
MD5 hash is not as expected. Expected: 699d173f277d25db59d2b339a1e9098b and found 2887a201d2514c6b8322c5f630be0887.
Problems downloading artifact: osgi.bundle, oracle.eclipse.tools.doc.javaee6, 1.0.0.201201241920.
MD5 hash is not as expected. Expected: 089c09298729b38ac585f25f054477a5 and found 85033b5cbc613a8c6a5612c0cc91179b.
Problems downloading artifact: osgi.bundle, oracle.eclipse.tools.glassfish, 5.0.1.201201241920.
MD5 hash is not as expected. Expected: 26c38ca1a321d9b1b1ca3271d777ee75 and found 472830c9576aad4b375175bc39fa9d4e.
Problems downloading artifact: org.eclipse.update.feature, oracle.eclipse.tools.juno.glassfish, 2.0.1.201201241920.
MD5 hash is not as expected. Expected: fbef299b507f02fcab8887c108e82434 and found a10465b7694743e7df1fb779b38a7e3b. 
```

这个错误是什么意思？我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:08:14.190

取消选中“安装期间联系所有更新站点以查找所需软件”框解决了安装/升级问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T18:20:36.520

看起来这可能是 glassfish 本身的错误（[报告](https://bugs.eclipse.org/bugs/show_bug.cgi?id=383293)）。也许到现在（一年后）它已经解决了。您可以检查一下 glassfish 插件是否已修复。最好的祝愿！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:22:08.680

我找到了解决方法：尝试手动安装 glassfish+glassfish 工具（帮助 -> 安装新软件...），更新站点是[http://download.java.net/glassfish/eclipse/juno](http://download.java.net/glassfish/eclipse/juno)。

这将安装整个应用服务器，但您可以稍后将其删除并添加您自己的。

# php - 显示用户名相同的mysql数据

> ID：11764431
> 
> 赞同：0
> 
> 时间：2012-08-01T17:27:11.067
> 
> 标签：php, mysql, database, match

我有一个 mysql 表，其中包含我预订系统上所有航班预订的数据。当用户预订航班时，该预订的详细信息连同他们的用户名一起存储在该表中。

现在，我正在创建一个页面，其中所有用户以前的航班都显示在 HTML 表中，除了过滤结果只来自该用户的代码之外，一切正常。

这是我正在使用的（部分）代码；

`$query_string = "SELECT name, seats, departure, destination, class, username, miles, timestamp FROM $tablename WHERE username IN ('$username')";`

该`username`字段是存储预订航班的用户的用户名，`$username`变量包含当前登录用户的用户名。我要做的只是显示`$username`匹配的字段`username`（因此只显示当前用户的预订）。

当我使用上面没有的代码时`WHERE username IN ('$username')`，它会显示所有数据，但是当我添加上面的代码时，当有匹配时它什么也不显示。

如果有人可以帮助修复我的代码，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:32:30.047

你使用`IN`不正确。`IN`比较以逗号分隔的字符串或值列表。这可以是字面的：

```
WHERE username IN ('user1', 'user2', 'user3') 
```

或者它可以来自子查询：

```
WHERE username IN (SELECT username FROM users) 
```

如果你想要一个完全匹配，你的`WHERE`子句应该是

```
WHERE username = '$username' 
```

如果这仍然不起作用，您必须验证您正在向数据库发送正确的查询。

```
echo $query_string; 
```

# php - 用于更改内容类型的 Amazon S3 签名 URL

> ID：11764433
> 
> 赞同：1
> 
> 时间：2012-08-01T17:27:11.823
> 
> 标签：php, amazon-s3, signatures

我们在 S3 上的自定义域上托管了大量视频/音频/媒体，并创建了一组函数来对 URL 进行签名并允许它们既可流式传输又可下载。问题是签名的 URL 当然永远不会起作用。错误是：

**我们计算的请求签名与您提供的签名不匹配。检查您的密钥和签名方法。**

当然，如果我们将此页面返回的字节码输入到[Amazon S3 签名测试](http://developer.amazonwebservices.com/connect/entry.jspa?externalID=199)器并从那里获取字节码，它就可以正常工作。即使从我们的函数中签名的字符串以及签名测试器中解码的字节码相同，它也永远不会起作用。

它通过一小段 PHP 代码调用：

```
$headers = createS3parameters($expiry, $file_type);
$request = preg_replace("/^.*?:\/\/.*\//", "/", $bucketurl);
$signature = signRequest($request, $expiry, $s3secret, $headers, "GET", $file_type);
$signed_request = "$bucketurl?AWSAccessKeyId=$s3key&Expires=$expiry&$headers&Signature=$signature"; 
```

这是实际签署它的功能。

```
function signRequest($request, $expiration, $s3secret, $headers = '', $type = 'GET', $content_type = 'default')
{
    if ($expiration == 0 || $expiration == null)
    {
        $expiration = time() + 315576000; // 10 years (never)
    }

    if (strcmp($content_type, 'default') == 0)
    {
        $content_type = "";
    }

    // S3 tester spits out this format
    /*$string = "$type\n".
              "\n\n".
              "$expiration\n".
              "/mybucket$request?$headers";*/

    $string = "$type\n".
              "\n".
              "$content_type\n".
              "$expiration\n".
              "$headers\n".
              "$request";

    // must be in UTF8 format
    $string = utf8_encode(trim($string));
    // encode to binary hash using sha1\. require S3 bucket secret key
    $hash = hash_hmac("sha1",$string, $s3secret,false);
    // sha1 hash must be base64 encoded
    $hash = base64_encode($hash);
    // base64 encoded sha1 hash must be urlencoded
    $signature = rawurlencode($hash);

    return $signature;
} 
```

然后创建一个 URL，例如：

```
http://mybucket.s3.amazonaws.com/My_Boring_Video.wmv?AWSAccessKeyId=AKIAIEXAMPLE6GA3WYQ&Expires=1344160808&response-content-type=application/force-download&response-expires=1344160808&Signature=OTIxOTI0YjNjMTA1NjMyNmJjYTk0MGE2YWJkMmI5OWQ3MGM2ZGY0MQ%3D%3D 
```

不幸的是，这不起作用。这里有一个明显的问题，我一直盯着太久无法正确弄清楚吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:44:54.120

**更新：规格是规格，但只有在符合实际情况时才有帮助。**

亚马逊的 S3 规范说签名应该形成如下：

```
Signature = URL-Encode( Base64( HMAC-SHA1( YourSecretAccessKeyID, UTF-8-Encoding-Of( StringToSign ) ) ) );

StringToSign = HTTP-VERB + "\n" +
    Content-MD5 + "\n" +
    Content-Type + "\n" +
    Expires + "\n" +
    CanonicalizedAmzHeaders +
    CanonicalizedResource; 
```

**但是**，所需的实际请求如下所示：

```
 StringToSign = HTTP-VERB + "\n" +
     "\n" + 
     "\n" +
     Expires + "\n" +
     Bucket + CanonicalizedResource + "?" + CanonicalizedAmzHeaders; 
```

奇怪的是，在 PHP 中你似乎也不能这样做：

```
$string = "$type\n".
          "\n".
          "\n".
          "$expiration\n".
          "/$bucket$request?$headers"; 
```

它更改了签名并最终被拒绝，因此必须全部在一行上。我还没有检查这是否是我们特定版本的 PHP 中的错误或只是一般的 PHP 错误（或者可能是预期的功能？？！）。即使您使用的是可用的虚 URL，例如 mybucket.s3.amazonaws.com 或 mybucket.mydomain.com，您也必须包含存储桶的名称。该[文档](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth)没有指定您可以做什么或不能做什么，我假设由于我们使用的是基于 S3 的虚 URL，它 (S3) 会获取域名并将其转换为存储桶。

我最终将我的功能更改为以下内容：

```
function signRequest($bucket, $request, $expiration, $s3secret, $headers = '', $type = 'GET', $content_type = 'default')
{
    if ($expiration == 0 || $expiration == null)
    {
        $expiration = time() + 315576000; // 10 years (never)
    }

    if (strcmp($content_type, 'default') == 0)
    {
        $content_type = "";
    }

    $headers = trim($headers, '&');

    // This is the spec:
    /*$string = "$type\n".
        "\n".
        "$content_type\n".
        "$expiration\n".
        "$headers\n".
        "$bucket$request";*/
    // but it will only work as this
    $string = "$type\n\n\n$expiration\n/$bucket$request?$headers";

    // this could be a single line of code but left otherwise for readability
    // must be in UTF8 format
    $string = utf8_encode(trim($string));
    // encode to binary hash using sha1\. require S3 bucket secret key
    $hash = hash_hmac("sha1",$string, $s3secret,true);
    // sha1 hash must be base64 encoded
    $hash = base64_encode($hash);
    // base64 encoded sha1 hash must be urlencoded
    $signature = urlencode($hash);

    return $signature;
} 
```

希望其他人也觉得这很有用。

**更新（20180109）：添加调用它的函数（也就是让我们把它变得非常简单）。**

它有助于理解传递给 signRequest() 函数的内容。

```
 private function genS3QueryString($bucketurl)
    {
            $file_type = 'application/force-download';
            $expiry = '1831014000'; //Sun, Jan 09 2028 0700 UTC

            $headers = '&response-content-type='.$file_type.'&response-expires='.$expiry;

            $bucket = preg_replace("/^.*?:\/\/(.*)\.s3\.amazonaws\.com\/.*/", "$1", $bucketurl);
            $request = preg_replace("/^.*?:\/\/.*\//", "/", $bucketurl);
            $signature = $this->signRequest($bucket, $request, $expiry, S3_SECRET_KEY, $headers, 'GET', $file_type);

            $signed_request = '?AWSAccessKeyId='.S3_KEY.'&Expires='.$expiry.$headers.'&Signature='.$signature;

            return $signed_request;
    } 
```

但是您会注意到，第一个函数仅生成附加到 AWS 的 GET 请求所需的加密签名部分。根据文档（请参阅上面的链接），请求需要更多，正如上面的第二个函数形成的那样。

如果您愿意，我认为到期时间可以是滚动到期时间，但在未来应该足够长，以使资产在实际到期时间之前很久就过时并被替换。选择了任意时间以充分超过当前版本的网站。

第二个功能只需要受保护资产的存储桶 url。可以将所需的响应类型添加到调用中或简单地更改，以便将资产（在这种情况下只是不可显示的）文档作为不同的类型下载。

然后必须将返回的signed_request 附加回bucketurl，以便工作URI 向受保护的S3 资产请求**。**

# expect - 期望脚本子句评估

> ID：11764434
> 
> 赞同：0
> 
> 时间：2012-08-01T17:27:19.143
> 
> 标签：expect

在我的期望脚本中，我的目标是发送一个命令来显示主板上两个处理器的属性。请假设远程登录成功。这是未成功评估 send 子句变量的地方。

1.  我有一个过程和一个变量： set showcpu "show -d properties /SYS/MB/P\r"

2.  如果“cpu”计数从 0 开始且小于 2，我创建了一个 while 循环来执行“发送”。

    ```
    set cpu 0

    while { $cpu < 2 } {
      expect {
        -re $prompt {send "${showcpu}${cpu}\r"; }
        timeout {
          my_puts "ILOM prompt timeout error-2" [ list $fh1 $fh3 stdout ]
          exit 1
        }
      }

      set cpu [ expr {$cpu + 1} ]
    } 
    ```

执行结果是这样的：

```
[BL0/SP]-> show -d properties /SYS/MB/P
show: Invalid target /SYS/MB/P

[BL0/SP]-> 0
Invalid command '0' - type help for a list of commands. 
```

我希望脚本将值`$showcpu`与它结合起来`$cpu`，它应该如下所示：

```
show -d properties /SYS/MB/P0 and show -d properties /SYS/MB/P1. 
```

有人可以告诉我我需要做些什么来实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:37:02.200

变量`${showcpu}`本身已经包含“\r”（根据 1.）。要么在没有“\r”的情况下定义它：

```
set showcpu "show -d properties /SYS/MB/P" 
```

或使用`string trim`（[http://wiki.tcl.tk/10174](http://wiki.tcl.tk/10174)）：

```
send "[string trim ${showcpu}]${cpu}\r" 
```

我建议在设置变量的地方修剪空白，而不是在使用变量的地方。

# r - 在 R 中正确链接向量

> ID：11764436
> 
> 赞同：1
> 
> 时间：2012-08-01T17:27:22.347
> 
> 标签：r

测试数据及其确定方法位于：[R 中 IF 函数的使用](https://stackoverflow.com/questions/11757617/use-of-if-function-in-r)

我需要将“测试”数据输入到另一个函数中。下面提供了 x 和 y 的数据（基本上是两个选项，1 = (89.3, 12.1) 和 2 = (97.2, 8.5)。下面的等式是更大函数的一部分，但这就是问题所在。我想要什么要做的是从我们拥有的向量（测试）中单独调用每个值，并且输出对于测试中的每个值都有2个值。当我直接链接测试时，我收到一个具有50个输出值的新向量，这使得没有实际意义。如果我将测试向量中的第一个值放入，我会收到 2 个正确值的输出（我已经手动检查过）。

```
set.seed(1)
Test <- ifelse(runif(50, 0, 1) < 0.69, rnorm(50, 25, 4), rnorm(50, 28, 4.3))

x <- c(89.3, 97.2)
y <- c(12.1, 8.5)

c(-0.75*(((Test)-x)/y)^2) 
```

当前是上述函数的输出：

```
 [1] -21.32750 -55.05068 -25.23216 -49.25087 -20.09236 -53.28421 -19.61593
 [8] -51.81307 -21.32136 -62.68412 -22.28700 -56.50245 -21.33593 -47.71792
[15] -18.53459 -55.10348 -16.12545 -42.79888 -19.73790 -40.38937 -17.77048
[22] -51.94862 -19.20262 -54.78823 -18.92120 -51.75187 -22.82277 -52.08655
[29] -18.82475 -45.86141 -16.28231 -56.33673 -24.02006 -50.75048 -14.97440
[36] -40.67076 -20.51602 -50.05597 -21.04648 -58.66084 -20.32455 -65.47588
[43] -20.01028 -53.19754 -15.84125 -52.88386 -23.09141 -50.51265 -19.73710
[50] -50.32994 
```

但是从测试中获取第一个值并手动将其放入会给出：

```
c(-0.75*(((24.77549)-x)/y)^2)
[1] -21.32750 -54.44958 
```

这就是我想要的所有 50 个测试值

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:43:33.547

使用[sapply](http://stat.ethz.ch/R-manual/R-patched/library/base/html/lapply.html)：

```
set.seed(1)
Test <- ifelse(runif(50, 0, 1) < 0.69, rnorm(50, 25, 4), rnorm(50, 28, 4.3))

x <- c(89.3, 97.2)
y <- c(12.1, 8.5)

result = sapply(Test, function(t) c(-0.75*(((t)-x)/y)^2)) 
```

`result`然后是一个 2x50 矩阵：

```
> result
          [,1]      [,2]      [,3]      [,4]      [,5]      [,6]      [,7]
[1,] -21.32750 -21.59186 -25.23216 -19.04891 -20.09236 -20.81548 -19.61593
[2,] -54.44959 -55.05068 -63.29020 -49.25087 -51.63562 -53.28421 -50.54767
          [,8]      [,9]     [,10]     [,11]     [,12]     [,13]     [,14]
[1,] -20.17012 -21.32136 -24.96341 -22.28700 -22.23106 -21.33593 -18.37988
[2,] -51.81307 -54.43561 -62.68412 -56.62937 -56.50245 -54.46874 -47.71792
         [,15]     [,16]     [,17]     [,18]     [,19]     [,20]     [,21]
[1,] -18.53459 -21.61509 -16.12545 -16.24298 -19.73790 -15.20235 -17.77048
[2,] -48.07270 -55.10348 -42.52723 -42.79888 -50.82633 -40.38937 -46.31876
         [,22]     [,23]     [,24]     [,25]     [,26]     [,27]     [,28]
[1,] -20.22954 -19.20262 -21.47642 -18.92120 -20.14330 -22.82277 -20.29001
[2,] -51.94862 -49.60262 -54.78823 -48.95848 -51.75187 -57.84436 -52.08655
         [,29]     [,30]     [,31]     [,32]     [,33]     [,34]     [,35]
[1,] -18.82475 -17.57154 -16.28231 -22.15805 -24.02006 -19.70470 -14.97440
[2,] -48.73760 -45.86141 -42.88975 -56.33673 -60.55407 -50.75048 -39.86019
         [,36]     [,37]     [,38]     [,39]     [,40]     [,41]     [,42]
[1,] -15.32366 -20.51602 -19.40083 -21.04648 -23.18320 -20.32455 -26.20255
[2,] -40.67076 -52.60188 -50.05597 -53.81015 -58.66084 -52.16534 -65.47588
         [,43]     [,44]     [,45]     [,46]     [,47]     [,48]    [,49]
[1,] -20.01028 -20.77743 -15.84125 -20.63975 -23.09141 -19.60061 -19.7371
[2,] -51.44830 -53.19754 -41.86986 -52.88386 -58.45297 -50.51265 -50.8245
         [,50]
[1,] -19.52067
[2,] -50.32994 
```

# mysql - 父子关系可能的mysql数据库表结构

> ID：11764437
> 
> 赞同：0
> 
> 时间：2012-08-01T17:27:22.797
> 
> 标签：mysql, sql, tree

我有一个考试题：我叫 D。我是三个孩子 A、B 和 C 的爸爸。我有一个父母 Z。我的父母有一个父母 X，我有一个兄弟 Y。我存放在一个mysql数据库。

```
CREATE TABLE `test_tree` (
`idperson` int(11) NOT NULL,
`name` varchar(45) DEFAULT NULL,
`prime` int(11) DEFAULT NULL,
`product` int(11) DEFAULT NULL,
PRIMARY KEY (`idperson`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8

INSERT INTO `temp`.`test_tree`
(`idperson`,
 `name`,
 `prime`,
 `product`)
 VALUES
 ('1', 'x', '2', '2'),
 ('2', 'z', '3', '6'),
 ('3', 'y', '17', '102'),
 ('4', 'd', '5', '30'); 
```

注：Prime 和 products 用于计算我家的父子关系。Prime = 下一个可用的素数 Product = (prime * product of parent)。每个素数的乘积只能除以那些素数。

**问题：可用于创建树的其他方法是什么？它们与当前解决方案相比如何？**

我的回答：

```
Solution 1:
**test_tree**
-id pk
-parent_id fk (references id)
-name

Solution 2:
**person**
-id pk
-name

**relation**
-child_id fk (references person.id)
-parent_id fk (references person.id)

For me, solution 2 has redundant table. 
```

你能建议我为这种关系创建表的其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:00:52.033

您已经省略了用于表示层次结构的“嵌套集模型”。

[http://en.wikipedia.org/wiki/Nested_set_model](http://en.wikipedia.org/wiki/Nested_set_model)

* * *

维基百科文章提供了一个示例，以及指向其他参考资料的链接以及大量示例。

# git - 查找导致文件被 git 忽略的 gitignore 文件和行

> ID：11764439
> 
> 赞同：13
> 
> 时间：2012-08-01T17:27:28.447
> 
> 标签：git

如何找到导致文件被 git 忽略的 gitignore 文件和行？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T17:27:28.447

从 repo 根目录，试试这个：

```
find . ~/.gitignore .git/info/exclude -name '*gitignore' -exec cat {} + | less 
```

还要检查您是否使用了不同的排除文件：

```
git config -l | grep exclude
core.excludesfile=~/.gitignore 
```

[当您在子文件夹中而不是在 git 项目的 root 中有子模块时，您也可能会收到该](https://stackoverflow.com/q/11749515/79125)错误。

感谢[Jon Lin](https://stackoverflow.com/users/851273/jon-lin)和[Christopher](https://stackoverflow.com/users/877115/christopher)帮助我解决了[最初的问题](https://stackoverflow.com/q/11749515/79125)。

# removing-whitespace - 隐藏/删除带有空格的 DIV

> ID：11764442
> 
> 赞同：1
> 
> 时间：2012-08-01T17:27:36.893
> 
> 标签：removing-whitespace

这是我遇到的问题。我想隐藏或删除为空或有空格的 div。如果您在 Firefox 中打开以下链接并执行 firebug，您仍然会看到那些空 div。如何删除或隐藏它们？

[http://jsfiddle.net/f5BMy/4/](http://jsfiddle.net/f5BMy/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:37:38.113

这是你如何做到的。

```
 $(document).ready(function () {

        $('.row').each(function(index) {
         if($(this).text().trim() == '') {
               $(this).remove();
               // or $(this).hide();
          }
        });
    });​ 
```

[http://jsfiddle.net/f5BMy/3/](http://jsfiddle.net/f5BMy/3/)

# cocos2d-iphone - 在 ipad1 中出现内存警告

> ID：11764444
> 
> 赞同：0
> 
> 时间：2012-08-01T17:27:49.240
> 
> 标签：cocos2d-iphone

我创建了 cocos2d 游戏。在测试过程中，我收到了一些内存警告，我解决了 ipad3（新 ipad）中的所有内存警告，但我无法解决 ipad 1 中的以下内存警告。你们能帮我....

1.

```
2012-08-01 22:19:16.399 Game[238:707] cocos2d: CCSpriteFrameCache: Trying to use file 'Animation.png' as texture
2012-08-01 22:19:16.662 Game[238:707] cocos2d: CCSpriteFrameCache: Trying to use file 'Ani.png' as texture
2012-08-01 22:19:16.681 Game[238:707] cocos2d: CCSpriteFrameCache: Trying to use file 'Faces.png' as texture
2012-08-01 22:19:16.753 Game[238:707] cocos2d: removeChildByTag: child not found!
2012-08-01 22:19:16.819 Game[238:707] Received memory warning. 
```

2.

```
2012-08-01 22:23:11.573 Game[238:707] cocos2d: Received memory warning.
2012-08-01 22:23:11.573 Game[238:707] cocos2d: CCTextureCache: removing unused texture: img.jpg
2012-08-01 22:23:11.576 Game[238:707] cocos2d: CCTextureCache: removing unused texture: play.png
2012-08-01 22:23:11.582 Game[238:707] cocos2d: CCTextureCache: removing unused texture: img1.png
2012-08-01 22:23:11.585 Game[238:707] cocos2d: CCTextureCache: removing unused texture: youNeedToPopup.png
2012-08-01 22:23:11.590 Game[238:707] cocos2d: CCTextureCache: removing unused texture: popup.png
2012-08-01 22:23:11.599 Game[238:707] cocos2d: CCTextureCache: removing unused texture: conti.png 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:39:28.820

内存警告是完全正常的。实际上，这是允许 iOS 重新收回已用内存的机制，这些内存可以被释放并继续工作而不会崩溃。

您可以在 Instruments Allocation 工具中观察到：内存逐渐被填满；然后发送内存警告，您将看到内存很快被释放（直到某个点）。这是健康应用程序的标志。

您应该担心的是，当发出内存警告时，内存不会恢复。但是你的应用程序会立即被杀死。

因此，内存警告 + 应用程序不崩溃完全不用担心。

# entity-framework - 来自实体框架生成的日志

> ID：11764448
> 
> 赞同：0
> 
> 时间：2012-08-01T17:28:12.217
> 
> 标签：entity-framework, auto-generate

我正在使用 EF 与我的数据库进行通信。我做了一个函数导入映射，所以我可以调用一个存储过程。在运行时，我收到一条错误消息，提示“找不到方法”，指的是为调用 SP 而创建的方法。我假设这是运行时生成期间的错误。

问题是：有什么方法可以查看执行时间生成期间发生的情况，以便找到问题所在？

# vb.net - VB.NET OleDbDataReader

> ID：11764449
> 
> 赞同：0
> 
> 时间：2012-08-01T17:28:16.553
> 
> 标签：vb.net, oledbdatareader

我正在使用 OleDbDataReader 从 Access 数据库中读取一列，并且我希望能够使用同一个阅读器在同一个函数中再次读取该列，因为我正在对 2 个数据库和有时相同的记录进行比较数据库的顺序不同，所以我必须遍历数据库，直到找到指定的记录然后进行比较。

问题是

是否有获取当前行索引的函数`OleDbDataReader`？

以及如何将其重置`OleDbDataReader`为第一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:34:42.297

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdatareader.aspx)，`OleDbDataReader`该类

> 提供一种从数据源读取只进数据行流的方法。

这意味着没有办法回到前一行。您所能做的就是阅读当前行或移至下一行。如果您需要能够随机访问任何行，典型的解决方案是将所有行加载到一个列表中，例如 a `DataTable`，然后处理列表中的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:38:56.127

您无法将阅读器重置为开始，因为它是专为[只进阅读](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdatareader%28v=vs.100%29.aspx)而设计的。

还有其他几种方法可以解决此类问题：

1.  如果您比较的数据集大小合理，并且您在一个字段上进行比较，您可以将来自一个数据库的数据缓存在一个键控对象中，例如通用字典。然后，当您从第二个数据库读取数据时，您可以根据键从字典中获取详细信息并以这种方式执行比较。

2.  您可以为一个数据库中的每条记录发出独立查询，以查看第二个数据库中是否存在匹配项，而不是嵌套读取器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T18:15:14.167

我正在解决一个类似的问题，并且使用 DataTable 是解决数据阅读器仅转发问题的最简单方法。

```
 DataTable table = new DataTable("DataTable");
            for (int colNum = 0; colNum < reader.FieldCount; colNum++)
            {
                DataColumn col = new DataColumn();
                col.ColumnName = reader.GetName(colNum);
                table.Columns.Add(col);
            }//colNum
            while (reader.Read())
            {
                DataRow row = table.NewRow();
                for (int colNum = 0; colNum < reader.FieldCount; colNum++)
                {
                    string columnName = reader.GetName(colNum);
                    row[columnName] = reader.GetValue(colNum);
                }//for
                table.Rows.Add(row);
            }//while
            table.AcceptChanges(); 
```

卡洛斯·A·梅里赫。

# c# - 使用 MediaPlayer 类获取音频文件的持续时间的问题

> ID：11764450
> 
> 赞同：0
> 
> 时间：2012-08-01T17:28:18.790
> 
> 标签：c#, winforms, media-player, duration

我正在我的应用程序中处理一些音频文件（mp3、wav、..etc）我正在使用`System.Windows.Media`命名空间中的 MediaPlayer 类。但我在计算声音文件的持续时间时遇到了一些问题，我的表单实际上是小型媒体播放器，它有`TrackBar`一个`ComboBox` 和正常的`next`，`previous`和`play`按钮.. 我用这段代码来获取声音文件的持续时间来确定轨迹栏的最大值：

```
private void MusicComboBox_SelectedIndexChanged(object sender, EventArgs e)
{   
  System.Windows.Duration duration = Player.NaturalDuration;
  SeekBar.Value = 0;
  Player.Open(new Uri(soundEffectPackage.GetMusicAt(MusicComboBox.SelectedIndex)));
  if(duration.HasTimeSpan)
    SeekBar.Maximum = duration.TimeSpan.Seconds;  
} 
```

这仅适用于某些文件，而其他文件没有，`TimeSpan`所以 if 没有被执行，如果我删除了 if，我会得到一个异常，说我应该先检查一下这`HasTimeSpan`是真的，然后继续。

我怎样才能解决这个问题？如何获取音频文件的持续时间？他们所说的时间跨度是什么意思？

任何帮助将不胜感激，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:52:32.077

据此[_](https://stackoverflow.com/questions/4068332/mediaelement-naturalduration-throws-excpetion-when-queriyng-timespan-totalsecond)

您需要等待 MediaOpened 事件触发，NaturalDuration 之后将可用。要检查值是否可用，您可以使用`NaturalDuration.HasTimeSpan`属性。

但处理音频和视频文件的最佳选择是“Fmod.dll”。这有很多权限来处理音频文件

# c# - MVC2 C#：如何使用文件中的 html 填充内容占位符？

> ID：11764451
> 
> 赞同：0
> 
> 时间：2012-08-01T17:28:18.233
> 
> 标签：c#, html, asp.net-mvc-2, asp.net-mvc-partialview

所以.. 我遇到的问题是我正在将客户端的 Web 应用程序迁移到 MVC2，而显示 html 内容的原始方法无法与 MVC 一起使用，因此我需要对其进行更新。我需要的功能是这样的：有一个包含操作的侧导航，并说用户单击“FooBar”，它将使用文档目录中的“FooBar.html”文件填充“mainContent”占位符。如果可能的话，我也想在没有回发的情况下这样做。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:33:59.363

当用户单击链接时，您可以使用 jQuery ajax 加载页面。[`load()`](http://api.jquery.com/load/)功能在这里将是理想的。

它只是`HTML`和`javascript`。没有特定于 ASP.NET MVC

```
//Include jQuery library
<div>
  <a href="Home/about" class="aLink" >About</a>
  <a href="Home/FAQ" class="aLink" >FAQ</a>
  <a href="Home/Contact" class="aLink" >Contact</a>
</div>
<div id="mainContent">

</div>

<script type="text/javascript">
 $(function(){
    $("a.aLink").click(function(e){
       e.preventDefault();  // prevent the default navigation behaviour
       $("#mainContent").load($(this).attr("href"));
    });
 });

</script> 
```

# c# - 返回派生类实例的基类扩展方法

> ID：11764453
> 
> 赞同：0
> 
> 时间：2012-08-01T17:28:31.407
> 
> 标签：c#

我有一个班级继承人：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MyProject.Models;
using MyProject.Extensions;

namespace MyProject.Models
{
    public abstract class Vehicle
    {
        public string Color { get; set; }
    }

    public class Car : Vehicle
    {
        public int Mileage { get; set; }
    }

    public class Boat : Vehicle
    {   
        public int Displacement { get; set; }
    }

}

namespace MyProject.Extensions
{
    public static class VehicleExtensions
    {
        public static IEnumerable<Vehicle> FilterByColor(this IEnumerable<Vehicle> source, string color)
        {
            return source.Where(q => q.Color == color);
        }
    }
}

namespace MyProject.Controllers
{
    public class IndexController : Controller
    {
        public ActionResult Index()
        {
            List<Car> cars = new List<Car>();
            cars.Add(new Car() { Color = "white", Mileage = 10000 });
            cars.Add(new Car() { Color = "black", Mileage = 20000 });

            IEnumerable<Car> filtered = cars.FilterByColor("black");        
                // Compile error, can not cast IEnumerable<Vehicle> to IEnumerable<Car>

                //.OfType<Car>() - only this helps. I`m looking for another ways

            return View(filtered);
        }
    }
} 
```

我想使用扩展方法`IEnumerable<Car>`并从中获取`IEnumerable<Car>`，但方法返回`IEnumerable<Vehicle>`，因为它适用于所有派生类 - 编译错误。我知道解决此问题的唯一一种方法是添加 call `.OfType<Car>()`，但这是首选方法吗？可能有更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T17:30:17.887

我怀疑你只是想让它成为一个带有约束的泛型方法，以确保类型参数是`Vehicle`或子类：

```
public static IEnumerable<T> FilterByColor<T>(this IEnumerable<T> source, 
    string color) where T : Vehicle
{
    return source.Where(q => q.Color == color);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T17:30:37.777

您需要使其通用：

```
public static IEnumerable<T> FilterByColor(this IEnumerable<T> source, string color) where T : Vehicle 
```

# cluster-computing - 是否可以使用单个节点设置神经节集群？

> ID：11764455
> 
> 赞同：0
> 
> 时间：2012-08-01T17:28:40.600
> 
> 标签：cluster-computing, ganglia

我正在尝试查看一些通常需要 100 多个节点的软件，这些节点使用神经节来分配和监视作业。我没有一百个节点，而且 DNS 在家里无法正常工作。我可以只用一个节点设置神经节吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:15:12.117

当然可以 ！我以前在一台机器上使用过 ganglia。您必须在同一台机器上安装所有 ganglia 进程（gmond 和 gmetad）。如果我没记错的话，Ganglia 会自动检测你的节点（感谢 gmond heartbeats）。

# jms - WebSphere MQ 中监听器的目的是什么？

> ID：11764466
> 
> 赞同：6
> 
> 时间：2012-08-01T17:29:03.393
> 
> 标签：jms, listener, ibm-mq

当我转到我的 WebSphere MQ 资源管理器并连接到远程队列管理器并转到 时`--> Advanced --> Listeners`，我没有看到任何定义的侦听器。但是我能够创建一个远程 JMS 客户端，通过使用通道连接连接到这个队列管理器并将消息发布到一个主题。

那么听众的目的是什么？就我而言，没有听众，一切都很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T18:05:33.200

WebSphere MQ 侦听器接受远程连接并启动入站通道。现代队列管理器几乎总是定义了侦听器，但也可以为 QMgr 指定一个默认端口来侦听，而无需实际定义侦听器。不过，这很不寻常。对于旧版本的 MQ，通常用于`inetd`启动通道。此方法不使用侦听器。

所以请放心，您的 QMgr 上的*某些东西*正在监听连接。由于您没有看到它，因此可能存在三种可能性：

*   侦听器名称以开头，`SYSTEM.`并且您的 Explorer 视图设置为过滤 SYSTEM 对象。
*   默认端口已在`qm.ini`文件中指定
*   你有一个非常老的 QMgr 正在使用`inetd`

顺便说一句，去获取一个新版本的 WMQ Explorer。既然你有`Advanced --> Listeners`你必须有一个旧版本。从[SupportPac MS0T](http://ibm.co/SupptPacMS0T)下载。

# model-view-controller - 将客户端 MVC/MVVM 模式与 MVC 服务器端模式结合使用

> ID：11764472
> 
> 赞同：23
> 
> 时间：2012-08-01T17:29:29.857
> 
> 标签：model-view-controller, design-patterns, mvvm, client-side, server-side

考虑到最流行的 MVC/MVVM 客户端模式（如[Knockout.js](http://knockoutjs.com)、[Angular.js](http://angularjs.org)、[Ember.js](http://emberjs.com)等），我有一个很大的疑问：

*还考虑到双方的建模冗余，**将这些客户端模式与 MVC 服务器端模式一起使用有什么优点和缺点？***

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T19:31:16.117

我为如何回答这个问题而苦苦挣扎......希望这会有所帮助，即使它是以一种迂回的方式。

虽然已经说明了一些优点/缺点，但我认为最好的总结是在[这个答案](https://softwareengineering.stackexchange.com/questions/143194/what-advantages-are-conferred-by-using-server-side-page-rendering)中。

对我来说，使用客户端逻辑的最大优势是丰富的 UI 方面。

但是您问题的关键部分似乎是“模型冗余”（我将其称为重复逻辑，或者至少具有重复逻辑的潜力）。在我看来，这是一个可能独立于上一个链接中的利弊而存在的问题。

所以首先，我认为是否使用客户端框架的决定应该基于有据可查的利弊。一旦做出决定，相关的问题就可以得到解决。

让我们假设您正在使用某种服务器端框架/平台，以及一个客户端框架来提供一点 UI 交互性。现在，模型逻辑的放置位置存在问题：在客户端、服务器或两者上。

解决问题的一种方法是仅在客户端**或**服务器中定义模型逻辑。那么你没有代码重复，但它会影响一些更高级别的优点/缺点。

例如，如果您的模型逻辑 100% 是服务器端的，那么您会丢失一些 UI 的交互部分。或者，您不断地将模型扔到服务器或从服务器扔出，这会有一些缺点。

如果您的模型逻辑是 100% 客户端，您可能会遇到性能问题，具体取决于您的视图/模型的大小。这是 Twitter 转向服务器端处理模型的原因之一。

然后是“两者”......在客户端和服务器中都存在模型逻辑。我认为这是最好的解决方案，**只要不重复任何逻辑即可**。

例如，在购物车页面上，您可以根据产品价格和用户可编辑的数量框重新计算订单成本。我认为这个逻辑应该只存在于客户端。加载后不会更改的其他模型属性可能很好地托管在服务器上。

这里有很多灰色区域……我很难把所有的鸡蛋放在一个篮子里。例如，选择客户端框架，创建大量客户端逻辑，然后 [假设地] 遇到性能、浏览器支持或类似问题。现在您可能想要调整一两个页面以提高性能（例如将其移动到服务器端，例如 Twitter）。但我认为明智地构建代码将有助于缓解这个问题。如果您的代码是可维护且干净的，那么将逻辑从客户端移动到服务器就不难了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T05:22:38.380

优点是客户端模式适用于服务器无法直接访问的客户端。如果您要构建丰富的交互式 HTML UI，请使用客户端 MVVM。在这种情况下，服务器端 MVC 可能仍然与向客户端提供适当的内容相关。例如，ASP.NET WebAPI 是一个用于创建 HTTP API 的框架，它具有与 ASP.NET MVC 框架类似的控制器架构。使用此框架实现的 API 可以被客户端代码调用，从而在服务器端产生 MVC，在客户端产生 MVVM。通常，在使用MVC服务器端和MVVM客户端时，各自的职责是非常不同的，因此没有冗余。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-08T09:56:51.660

将 MVVM 模型合并到已经实现的 MVC 框架中也是一件好事，我们最近在一些新的项目页面中添加了淘汰，以适应已经过时的 MVC 框架（旧页面，而不是框架本身）。

我认为 MVVM 非常棒，因为上述答案表明它提供了卓越的用户体验和极快的响应时间，您可以在后台隐藏验证调用而不会减慢它们的速度，而且它很直观。

然而，痛苦是单元测试非常困难，而且您可以获得一些非常大的 javascript 文件，而且由于我们的遗留系统仍然在 IE6 上运行，我们不得不做的额外编码是荒谬的。

但是 MVVM 和 MVC 不必单独使用，我们两者都使用。但是拥有 3 个级别的验证仍然让我感到困扰。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T11:58:17.400

*   好处
    *   这可以摇滚。
*   缺点
    *   你可以拧它。

严重地。利用将部分前端逻辑传输到浏览器中可以促进您的应用程序开发，为什么您将更严格的数据处理封装在服务器端。

这基本上是分层的。两层，上一层与下一层对话，反之亦然：

```
[client] <--> [server] 
```

您通常以轻量级序列化格式（如 Json）在两者之间交换值对象。

这可以很好地映射用户期望的有用结构，而服务器端的域对象则不能那么详细。

但是，如果服务器端在某些时候不是用 javascript 编写的，那么真正的力量将是，因为我认为您无法在那里创建良好的域对象。*如果*遇到该问题，请考虑 Scala（或类似的表达方式） 。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-25T16:27:40.077

提出这个问题十个月后，我在同一个应用程序中使用了这两种模式。

唯一的问题是需要两次映射模型。

**MVC（ASP.NET MVC 4 Web API）**

最重要的资源是路线。

*   模型被创建用于数据库交互并作为控制器操作的参数。
*   创建控制器是为了操作 API 申请并呈现视图。
*   视图不是用服务器端模型建模的，而是部分视图和部分的所有资源。

**MVVM（淘汰赛.js）**

*   创建的模型具有与服务器端模型相同的属性。
*   视图与模型的属性绑定，并减少了很多视图的大小。
*   视图模型是使用 API 方法提供的值创建的。

总的来说，MVC 与 MVVM 的组合非常有用，但它需要大量的专业知识和知识。也需要耐心，因为您需要考虑每个应用层的职责。

# tfs - 有没有办法查看给定变更集的工作区？

> ID：11764473
> 
> 赞同：0
> 
> 时间：2012-08-01T17:29:29.913
> 
> 标签：tfs, workspace, changeset, checkin

有没有办法以任何方式从进行特定签到的地方获取工作区？

使用 Team Foundation Sidekicks，我可以看到当前签出项目的工作区、计算机和本地路径，但不能看到变更集。TFS 会跟踪这个吗？

**更新**

这可能有助于解释我真正想要什么。有人使用另一个团队成员的帐户进行了签入（或者至少这是他声称的哈哈），我试图通过找到变更集的工作区来解决这个烂摊子，因为它包含足够的信息来制作称呼。现在我除了评论之外唯一的信息是日期和时间，但也许还有其他我可以使用的信息。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:23:13.107

据我所知不是。我花了一些时间查看我们的 TFS 集合数据库，但找不到将变更集链接到工作区的任何内容。

我一直在使用的表是：

*   AD对象
*   tbl_Workspace
*   tbl_WorkspaceMapping
*   tbl_Changeset
*   tbl_LocalVersion
*   tbl_PendingChange

因为工作区只处理存储在本地机器上的项目，所以我不相信在提交变更集时信息会被发送到 TFS 服务器。

# netlogo - 比较 Netlogo 中的乌龟颜色

> ID：11764476
> 
> 赞同：0
> 
> 时间：2012-08-01T17:29:58.207
> 
> 标签：netlogo

我正在尝试做一些我认为相对简单的事情，但由于某种原因，我花了很长时间才弄清楚，我的所有搜索都变成了空白。

我想查询特定海龟的颜色并检查它是否与另一种颜色匹配。我想做这样的事情：

if color targetTurtleNum = red [set target-confirmed true] ;

但我不断收到错误消息：

IF 预期此输入是命令块，但得到的是真/假。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:00:10.343

假设`targetTurtleNum`是您感兴趣的海龟的“谁”编号，请尝试：

```
if [ color ] of turtle targetTurtleNum = red [ set target-confirmed true ] 
```

您收到的错误是因为`if`需要两个输入：一个布尔值（您要检查的条件）和一个命令块（如果条件为真，该怎么办）。在您的代码版本中，第一个输入`if`是`color`，第二个是`targetTurtleNum = red`，因此编译器抱怨将布尔值作为第二个输入。

在这里正确的版本中，整个`[ color ] of turtle targetTurtleNum = red`部分是算作第一个输入的布尔值，并且`[ set target-confirmed true ]`是预期作为第二个输入的命令块。

# c# - 如何让 .3ds 中的模型出现在透明背景上？

> ID：11764479
> 
> 赞同：0
> 
> 时间：2012-08-01T17:30:09.923
> 
> 标签：c#, .net, winforms, 3d, 3ds

如何使模型背景的图像透明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:31:59.423

没有办法在 c# 中执行此操作，我认为您需要在 .3ds 文件中进行设置。但是不知道该怎么做。

试试：[http ://board.flashkit.com/board/archive/index.php/t-557898.html](http://board.flashkit.com/board/archive/index.php/t-557898.html)

# c# - 使用 Mozilla Firefox 的 WebRequest

> ID：11764481
> 
> 赞同：3
> 
> 时间：2012-08-01T17:30:25.897
> 
> 标签：c#, .net, wpf, firefox, webrequest

我需要访问 Facebook 页面的 HTML，以从中提取一些数据。所以，我需要创建一个`WebRequest`.

例子：

我的代码在其他网站上运行良好，但对于 Facebook，我必须登录才能访问 HTML。

如何使用 Firefox 数据创建`WebRequest`Facebook 页面？

我试过这个：

```
List<string> HTML_code = new List<string>();
WebRequest request = WebRequest.Create(URL);
using (WebResponse response = request.GetResponse())
using (StreamReader stream = new StreamReader(response.GetResponseStream()))
{
    string line;
    while ((line = stream.ReadLine()) != null)
    {
        HTML_code.Add(line);
    }
} 
```

...但是当我没有登录时，结果的 HTML 是 Facebook 主页的 HTML。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T18:52:24.223

如果您想要从 Facebook 页面检索点赞数，您可以使用[Facebook 的 Graph API 服务](https://developers.facebook.com/docs/reference/api/)。太简单了，这就是我在代码中基本上所做的：

1.  检索 Facebook 页面的数据。在这种情况下，我使用了[可口可乐页面的数据](https://graph.facebook.com/cocacola)，因为它是 FB 列出的示例。
2.  使用 Json.Net 解析返回的 Json。还有其他方法可以做到这一点，但这只是保持简单，您可以在[Codeplex](http://json.codeplex.com/)获得 Json.Net 。我查找代码的文档来自文档中的[此页面](http://james.newtonking.com/projects/json/help/index.html?topic=html/SelectToken.htm)。如果需要，他们的文档还将帮助您解析和序列化更多 Json。

然后这基本上转化为这段代码。请注意，我省略了所有花哨的异常处理以保持简单，因为使用网络并不总是可靠的！另外不要忘记在您的项目中包含 Json.Net 库！

用途：

```
using System.IO;
using System.Net;
using Newtonsoft.Json.Linq; 
```

代码：

```
string url = "https://graph.facebook.com/cocacola";
WebClient client = new WebClient();
string jsonData = string.Empty;

// Load the Facebook page info
Console.WriteLine("Connecting to Facebook...");
using (Stream data = client.OpenRead(url))
{
    using (StreamReader reader = new StreamReader(data))
    {
        jsonData = reader.ReadToEnd();
    }
}

// Get number of likes from Json data
JObject jsonParsed = JObject.Parse(jsonData);
int likes = (int)jsonParsed.SelectToken("likes");

// Write out the result
Console.WriteLine("Number of Likes: " + likes); 
```

# php - 为什么我的 PHP 计算器不能工作？（字符串函数..）

> ID：11764486
> 
> 赞同：3
> 
> 时间：2012-08-01T17:30:44.200
> 
> 标签：php, html

这个计算器应该在网页文本框中输入带有空格的输入（如“2 + 2”），然后在其上方回显答案。目前，输出要么是“0”，要么看起来会从输入中剪掉一个随机数。

我 95% 确定问题出在 substr 函数中——它们没有被分配正确的值。这是我的猜测，因为输出行为。展示，

1 + 1 将 = 0 2 + 2 将 = 0 ... 9 + 9 将 = 0 10 + 10 将 = 1 20 + 20 将 = 2

**注意：**从第 16 行开始的 $firstNumber、$secondNumber 和 $operator 初始声明值是任意的。

以下是PHP 手册中的*substr( , )* **示例**：

```
echo substr('abcdef', 1);     // bcdef   <br>
echo substr('abcdef', 1, 3);  // bcd<br>
echo substr('abcdef', 0, 4);  // abcd<br>
echo substr('abcdef', 0, 8);  // abcdef<br>
echo substr('abcdef', -1, 1); // f<br> 
```

.

```
//'if' is executed when submit is pressed
if (isset($_POST['test']))
{
    $input = $_POST['test'];
    $answer = calculate($input);
    echo $answer;
}

//does string processing and number calculation
function calculate($input)
{
    //declarations (random)
    $firstNumber = 20;
    $secondNumber = 30;
    $operator = "+";
    $answer = 7;

    //string processing. 
    for($i = 0; $i <= strlen($input); $i++)  
    {
        //if current position of the string scan is an operator,
        if( trim(substr($input, $i, $i + 1), " ") == "+" ||trim(substr($input, $i, $i + 1), " ") == "-"
          ||trim(substr($input, $i, $i + 1), " ") == "*" ||trim(substr($input, $i, $i + 1), " ") == "/")
        {
            //then 

            //$operator = current position TO current position + 1
            $operator = substr($input, $i, $i + 1);
            //trim $operator
            $operator = trim($operator, " ");

            //$firstNumber = 0 TO current position - 1
            $firstNumber = substr($input, 0, $i - 1);
            //trim $operator
            $firstNumber = trim($firstNumber, " ");

            //$secondNumber = current position + 1 TO end of string
            $secondNumber = substr($input, $i + 1, strlen($input));
            //trim $operator
            $secondNumber = trim($secondNumber, " ");
        }

    }

    //if operator is ... then do that operation. 
    //example: if "+", then add $firstNumber and $secondNumber

    if($operator == "+")
    {
        $answer = $firstNumber + $secondNumber;
    }
    else if($operator == "-")
    {
        $answer = $firstNumber - $secondNumber;
    }
    else if($operator == "*")
    {
        $answer = $firstNumber * $secondNumber;
    }
    else if($operator == "/")
    {
        $answer = $firstNumber / $secondNumber;
    }

    //return the calculated answer for echo
    return $answer;
}

?>

<form action="test.php" method="POST">

    <textarea name="test" rows="3" cols="30"></textarea>
    <input type="submit" value="calculate!">

</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T17:41:17.073

你的问题是你使用`substr`.

`substr`取一个字符串、一个起始位置和一个长度。这是您滥用的长度。当您平移输入字符串时，您正在增加您正在寻找的子字符串的长度。由于运算符的长度为`1`，因此您应该使用

```
 //if current position of the string scan is an operator,
    if( trim(substr($input, $i, 1), " ") == "+" || trim(substr($input, $i, 1), " ") == "-"
      ||trim(substr($input, $i, 1), " ") == "*" || trim(substr($input, $i, 1), " ") == "/")
    {
         .... 
```

您还需要在此处更新您的代码：

```
//$operator = current position TO current position + 1
$operator = substr($input, $i, 1);
//trim $operator
$operator = trim($operator, " "); 
```

你可以通过这样做来简化一点

```
 potentialOperator = trim(substr($input, $i, 1), " ") 
```

并将其与您支持的运营商进行比较。这将为您节省多次不必要的调用`trim`，`substr` 这也意味着您只需一次识别操作员。

您可能还想查看`preg_split`with`PREG_SPLIT_DELIM_CAPTURE`来解析输入字符串，而不是逐个字符地扫描它。

# java - 使用内存数据库进行单元测试

> ID：11764487
> 
> 赞同：6
> 
> 时间：2012-08-01T17:30:55.067
> 
> 标签：java, unit-testing, postgresql, testing, in-memory-database

我有 PostgreSQL 数据库。它用于单元测试。

*   我想加快测试速度，所以我想使用某种内存数据库（例如 H2）。
*   我想转储数据库（来自 PostgreSQL）并将这样的转储导入内存数据库。

您对内存数据库选择有什么建议吗？我希望该数据库与 PostgreSQL 兼容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T19:41:35.990

我只需在 tmpfs 中创建一个数据库目录（在 PostgreSQL 中称为集群）（本质上是一个 RAM 磁盘——`/dev/shm`在大多数 Linux 发行版中都是这样配置的），然后在非标准端口上简单地运行 postgres，例如像这样：

```
initdb -D /dev/shm/pgtest
postmaster -D /dev/shm/pgtest -p 11111 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T17:39:59.743

我建议将[HSQL](http://hsqldb.org/)与弹簧组合一起使用。我被带到我目前的职业中来做这件事，即使这很头疼，也可以做到。根据快速研究，似乎[hsql 与 PostgreSQL 兼容](http://hsqldb.org/doc/guide/management-chapt.html#mtc_compatibility_postgres)。如果您还有其他问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T00:03:13.697

你需要为此放弃Pg吗？

如果您针对不同的数据库进行单元测试，而不是在生产环境中运行，那么您的测试就不会那么好。

试试这个：[优化 PostgreSQL 以进行快速测试](https://stackoverflow.com/questions/9407442/optimise-postgresql-for-fast-testing/9407940#9407940)。

……看你怎么走。

*更新*：您可能认为将所有内容都放在 ramdisk 上会使您的测试大大加快，但您可能错了。让未使用的数据溢出到磁盘通常*更有效，这样系统就可以为手头的任务使用更多的 RAM。*使用`unlogged`表和正确的异步提交或（仅用于测试，会吃掉您的数据）`fsync=off`应该可以让您获得非常相似的速度。

如果您*确实*需要真正的内存表，请在 ramdisk 或 tmpfs 上创建一个文件系统，并在其中 initdb 一个新集群。您也可以使用`UNLOGGED`表，这样它们就不会通过预写日志。

请注意，虽然`tmpfs`它是一个 ramdisk，但它允许较少使用的页面进入交换空间。如果出于某种原因您绝对必须将所有数据固定在 RAM 中，则需要使用`ramdisk`驱动程序并[在 ramdisk 上创建文件系统](http://jayant7k.blogspot.com.au/2006/08/ram-disk-in-linux.html)。我的建议：不要这样做。只需正确配置 Pg 即可进行快速测试。

# javascript - 使用日期选择器选择多个目标

> ID：11764488
> 
> 赞同：0
> 
> 时间：2012-08-01T17:30:56.933
> 
> 标签：javascript, jquery

我最近为我的网站找到了一个 jquery datepicker。我已经安装了相关文件，但是遇到了一个问题，因为我的页面上有两个日期字段应该是日期选择器的目标。目前它仅适用于两个字段中的第一个，即使两个字段具有相同的 id 和名称（“日期”）。日期选择器使用的 javascript 如下

```
<script type="text/javascript">
window.onload = function(){
    new JsDatePick({
        useMode:2,
        target:"date",
        dateFormat:"%Y-%m-%d",
        isStripped:false,
        cellColorScheme:"armygreen",
        /*selectedDate:{                This is an example of what the full configuration offers.
            day:5,                      For full documentation about these settings please see the full version of the code.
            month:9,
            year:2006
        },*/
        yearsRange:[1978,2020],
        limitToToday:false,
        //cellColorScheme:"beige",

        imgPath:"img/",
        weekStartDay:1
    });
}; 
```

我不知道如何将另一个目标添加到此代码中的目标行理想情况下，我喜欢它以定位“dateA”和“dateB”。

有任何想法吗？对不起，如果我很愚蠢！约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:41:04.903

```
<link rel="stylesheet" type="text/css" media="all" href="../css/jsDatePick_ltr.min.css" />
        <script type="text/javascript" src="../js/jsDatePick.min.1.3.js"></script>
        <script type="text/javascript">
            window.onload = function(){
                new JsDatePick({
                    useMode:2,
                    target:"inputField1",
                    dateFormat:"%d-%M-%Y"

                });
                                new JsDatePick({
                    useMode:2,
                    target:"inputField2",
                    dateFormat:"%d-%M-%Y"

                });
                                new JsDatePick({
                    useMode:2,
                    target:"inputField3",
                    dateFormat:"%d-%M-%Y"

                });
            };
        </script>

<input type="text" size="12" id="inputField1" name="txt_ordate" class="ErrorField">
<input type="text" size="12" id="inputField2" name="txt_ordate" class="ErrorField">
<input type="text" size="12" id="inputField3" name="txt_ordate" class="ErrorField"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:30:26.153

确保您使用的是 JQueryUI 的 datepicker，因为它是最可靠的。

如果您不熟悉 JQueryUI，请访问[http://jqueryui.com/demos/](http://jqueryui.com/demos/)（这展示了它的功能）。

要查看 datepicker 的现场演示，请访问[http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)。**确保查看选项/事件/方法！**.

至于代码...

将这些脚本放在您的 中`<head>`，这将为您提供*JQuery*和*JQueryUI*的脚本：

```
<head>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>

<script type="text/javascript">
    $(document).ready(function(){
        $("#datepicker").datepicker({
            altField: "#result1, #result2",
            altFormat: "mm/dd/yy"
            //altFormat: "DD, d MM, yy" //another format
        });
    });
</script>
</head> 
```

对于身体，我使用了以下内容：

```
<p>
Date: 
<input type="text" id="datepicker"> 
<input type="text" id="result1"> 
<input type="text" id="result2">
</p>​ 
```

为了直观地看到我做了什么，我做了一个快速演示。随意使用它！

[http://jsfiddle.net/6UnTh/23/](http://jsfiddle.net/6UnTh/23/)

要自定义您的主题，请访问[http://jqueryui.com/themeroller/](http://jqueryui.com/themeroller/)并下载必要的文件（否则使用我在 中提供的文件`<head>`）。

希望这可以帮助！确保使用 JQueryUI 提供的其他选项/方法！快乐编码！

链接：JQuery ( [http://docs.jquery.com/Main_Page](http://docs.jquery.com/Main_Page) )
JQuery UI ( [http://jqueryui.com/demos/](http://jqueryui.com/demos/) )

***编辑：（我已经更新了演示！）：***

[http://jsfiddle.net/6UnTh/27/](http://jsfiddle.net/6UnTh/27/)

# php - PHP - 通过数组排序并重复[模运算符]

> ID：11764496
> 
> 赞同：0
> 
> 时间：2012-08-01T17:31:19.617
> 
> 标签：php, arrays, loops, sequence

我需要能够循环一个项目数组并从另一个数组中给它们一个值，但我无法完全理解它。

**我的阵列**

```
$myarray = array('a','b','c'); 
```

假设我有一个 foreach 循环，我总共循环了 6 个项目。

如何获得以下输出

```
item1 = a
item2 = b
item3 = c
item4 = a
item5 = b
item6 = c 
```

我的代码看起来像这样。

```
$myarray = array('a','b','c'); 
$items = array(0,1,2,3,4,5,6);
foreach ($items as $item) {
   echo $myarray[$item];
} 
```

在线示例。 [http://codepad.viper-7.com/V6P238](http://codepad.viper-7.com/V6P238)

我当然希望能够循环无限次

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T17:40:48.410

```
$myarray = array('a','b','c'); 
$count = count($myarray);
foreach ($array as $index => $value) {
  echo $value . ' = ' . $myarray[$index % $count] . "\n";
} 
```

`%`是[模运算符](http://php.net/language.operators.arithmetic)。它返回

> $a 的余数除以 $b。

什么意思

```
0 % 3 = 0
1 % 3 = 1
2 % 3 = 2
3 % 3 = 0
4 % 3 = 1 
```

等等。在我们的例子中，这反映了`$myarray`我们想要检索的数组的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:40:43.517

如果您想要完成任意数量的循环，您可以使用模数运算符循环遍历您的键：

```
$loop = //how much you want the loop to go
//...
for ($i = 0, $i < $loop, $i++) {
    $key = $i % count($myarray);
    echo $i, ' = ', $myarray[$key];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T17:41:29.570

我认为您正在寻找的是[模运算符](http://en.wikipedia.org/wiki/Modulo_operation)。尝试这样的事情：

```
for ($i = 1; $i <= $NUMBER_OF_ITEMS; $i++) {
    echo "item$i = ".$myarray[$i % count($myarray)]."\n";
} 
```

# actionscript-3 - 子鼠标已启用

> ID：11764498
> 
> 赞同：1
> 
> 时间：2012-08-01T17:31:26.100
> 
> 标签：actionscript-3

有一个包含许多其他影片剪辑的主容器，在这些 CHILD1 影片剪辑中，也有一个 CUBE 和一个 IMAGE 影片剪辑。我只想禁用 IMAGE 影片剪辑的鼠标事件，可以吗？

```
CONTAINER
 -CHILD1
  -CUBE //this has mouse events!
  -IMAGE //want to disable the mouse events for this!
 -CHILD2
  -CUBE //this has mouse events!
  -IMAGE //want to disable the mouse events for this!
 -CHILD3
  -CUBE //this has mouse events!
  -IMAGE //want to disable the mouse events for this! 
```

任何的想法？谢谢！CHILD的代码块：

```
private function added(e:Event) {
    removeEventListener(Event.ADDED_TO_STAGE, added);
    addEventListener(MouseEvent.MOUSE_UP, NEXT);
}
public function NEXT(e:MouseEvent) {
    //OB is the instance name of the IMAGE
    if(e.target.name == "OB"){
        e.stopImmediatePropagation();
        return;
    }
    OB.gotoAndStop(Main.ID);
} 
```

**[已解决]** 要禁用特定孩子的事件监听：

```
private function added(e:Event) {
    mouseEnabled = false; //This is the clue.
    OB.mouseEnabled = false;
    OB.mouseChildren = false;
    removeEventListener(Event.ADDED_TO_STAGE, added);
    cube.addEventListener(MouseEvent.MOUSE_UP, NEXT);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:34:34.497

如果您的鼠标侦听器已附加到图像，请在构造函数中将 IMAGE 的 mouseEnabled 和 mouseChildren 属性设置为 false（或者如果在 Flash CSX 中使用时间线），然后在 IMAGE 对象时间轴上（在第一帧上）将 mouseEnabled 和 mouseChildren 设置为 false .

这里将是您发布的代码的更改（不确定您将 CUBE 实例称为什么）：

```
private function added(e:Event) {
    removeEventListener(Event.ADDED_TO_STAGE, added);
    CUBE.addEventListener(MouseEvent.MOUSE_UP, NEXT);
    OB.mouseEnabled = false;
    OB.mouseChildren = false;
}
public function NEXT(e:MouseEvent) {
    OB.gotoAndStop(Main.ID);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:52:50.733

为您的图像指定一个实例名称（假设它是“OB”）并且：

```
private function added(e:Event) 
{
    this.getChildByName("OB").mouseEnabled = false
    this.getChildByName("OB").mouseChildren = false; 
    removeEventListener(Event.ADDED_TO_STAGE, added);
    addEventListener(MouseEvent.MOUSE_UP, NEXT);    
} 
```

如果这不起作用，则可能您的代码中有其他问题，您应该解释并显示您的代码。

# windows-7 - 并行制作在 Windows 7 上不起作用

> ID：11764500
> 
> 赞同：2
> 
> 时间：2012-08-01T17:31:33.203
> 
> 标签：windows-7, parallel-processing, makefile

我有在 Windows XP 上完美运行的构建环境。

但是当我在我的 Windows 7 (x64) PC 上移动所有东西时。

> 使-j4

给出一条信息：

```
make: Do not specify -j or –jobs if sh.exe is not available.
make: Resetting make for single job mode 
```

使用 SHELL=CMD.EXE（也是 cmd.exe）根本没有帮助。为什么？

# javascript - Javascript 闭包对象生命周期

> ID：11764505
> 
> 赞同：1
> 
> 时间：2012-08-01T17:31:50.563
> 
> 标签：javascript, closures

这是在闭包内创建本地对象的代码。

```
function A() {
    this.welcome = "Welcome";
}

var P = (function() {
    var a = new A();
    function printa() {
        console.log(a);
    }
    return {
        printa: printa
    };
})();

P.printa(); 
```

它打印：

```
{ welcome: 'Welcome' } 
```

在 P=... 函数执行后，P 得到一个新对象，其中包含对函数 printa() 的引用，但此时，局部变量 a 应该被释放。为什么不释放？还是因为没有垃圾收集而暂时存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T17:34:06.140

`a`由`printa`函数的闭包保持引用。

`a`在不再引用该`printa`函数后的一段时间内将被垃圾收集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T17:33:50.493

有一个规则：如果某个变量被某个范围持有，那么它不是免费的。在您的示例中，变量`a`由`printa`函数范围使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T17:34:28.130

`a`将始终存在于由 function 创建的闭包之外`printa`。`a`仍然在 的范围链内`printa`，因此在没有更多对 的引用之前，它不会被释放（即垃圾收集）`printa`

然而，垃圾收集因浏览器而异（IE6 有人吗？），所以所有的赌注都押在它何时会被垃圾收集。

# wcf-ria-services - 如何在 SL 客户端通过异常验证？

> ID：11764514
> 
> 赞同：0
> 
> 时间：2012-08-01T17:32:24.650
> 
> 标签：wcf-ria-services, silverlight-5.0

假设我有一个实体 Person(id, dept, EmailAddress,DOB, ...)，当使用 EF 创建模型时，然后为此类创建一个元数据类以将验证规则放在服务器端，例如：

```
[CustomValidation(typeof(MyValidator), "DOBValidator")]
public Nullable<DateTime> DOB { get; set; }

[RegularExpression("^([\\w-\\.]+)@((\\[[0–9]{1,3}\\.[0–9]{1,3}\\.[0–9]{1,3}\\.)|(([\\w-]+\\.)+))([a-zA-Z]{2,4" + "}|[0–9]{1,3})(\\]?)$", ErrorMessage = "Invalid email address")]
[StringLength(128)]
public string EmailAddress { get; set; } 
```

当验证规则到位时，对于从客户端发送的任何数据，在提交任何数据进行保存时都将毫无例外地进行验证。

但现在我想要规则的例外：从 UI，当通过绑定实体 Person 从 UI 获取数据时，基于数据，我想忽略验证。例如，当 Dept=A 时，不检查 EmailAddress 验证，对于 dept=B，不检查 DOB 验证。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:19:53.957

我相信您需要类级别的验证。看看这个[问题](https://stackoverflow.com/questions/3880727/class-level-validation) 当然，您的代码需要在客户端编译。（如果使用 WCF ria 服务，有几种方法可以达到此目的）

高温高压

# java - 无法在 Eclipse Juno 4.2 中运行 Java 程序

> ID：11764515
> 
> 赞同：0
> 
> 时间：2012-08-01T17:32:26.897
> 
> 标签：java, eclipse, eclipse-juno

每年发布新版本时，我都会重新安装我的 Eclipse 环境。然而，最新版本 - Juno - 没有按预期工作。

目前，例如，当我尝试从 Oracle 运行演示时，它会要求我在编译之前选择要运行的 Ant 文件。在创建一个空白的 Ant 文件以绕过该要求后（我认为这很愚蠢，因为我认为 TDD 不是应该强加于人的东西），它仍然拒绝运行，说“无法启动选择。 "

我知道 Juno 是从 3.x 轨道到 4.x 轨道的更新，但这对我来说似乎有点荒谬。我可以或应该怎么做才能让 Eclipse 重新启动并运行？

只是为了澄清：

*   所有有问题的文件都在我的 Eclipse 工作区路径上
*   我在 Java 开发方面做的不多，尽管我知道我很快就会这样做。因此，我对最新版本的 Eclipse 不熟悉。
*   我想在没有 Ant 文件的情况下运行我的文件和项目。我知道它与运行配置有关，但我不知道如何更改它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:03:17.867

这是我从 Eclipse Juno 运行演示时所做的：

1.  [从http://docs.oracle.com/javase/tutorial/uiswing/examples/zipfiles/components-FrameDemoProject.zip](http://docs.oracle.com/javase/tutorial/uiswing/examples/zipfiles/components-FrameDemoProject.zip)下载项目（如果这不是正确的演示，请提供您正在使用的链接）
2.  将其解压缩到我的项目目录（不是我的工作区），以便您拥有：

    PROJECTS_DIR/components-FrameDemoProject/src

    PROJECTS_DIR/components-FrameDemoProject/nbproject

    PROJECTS_DIR/components-FrameDemoProject/build.xml

3.  在 Eclipse 中，文件 > 新建 > Java 项目

4.  列表项取消选中`Use default location`并导航到`<PROJECTS_DIR>/components-FrameDemoProject`
5.  打`Finish`
6.  向下钻取`src/components/FrameDemo.java`
7.  右键单击`FrameDemo.java`并选择`Run As`>`Java Application`

如果这些步骤中的任何一个给您带来麻烦，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:01:16.573

查看您的项目属性并选择 Builders 条目。你看到一个`Ant Builder`条目吗？尝试选择或创建一个`Java Builder`条目。

我刚刚在 Juno 中创建了一个新的 Java 项目并添加了`FrameDemo.java`源代码。在我的例子中，`Java Builder`被选为这个新项目的默认值。

# lisp - 何时在 Lisp 中更喜欢 gensym 而不是 make-symbol

> ID：11764518
> 
> 赞同：3
> 
> 时间：2012-08-01T17:32:52.407
> 
> 标签：lisp

gensym 将唯一数字附加到前缀的功能是否会派上用场？我不明白为什么会有`gensym`什么时候

```
(let ((str "batman"))
  (eq (make-symbol str)
      (make-symbol str))) 
```

总是返回`nil`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T19:16:18.820

例如，GENSYM 使调试生成的代码稍微容易一些。

例子：

请参阅 LOOP 宏的扩展。您可以通过查看它们的名称来查看哪些符号是相同的，即使它们没有被保存在包中。有两个 uninterned 临时变量。现在不同的名称使使用变得清晰。

```
CL-USER 4 > (pprint (macroexpand '(loop for i in '(1 2 3) sum i)))

(BLOCK NIL
  (MACROLET ((LOOP-FINISH () '(GO #:|end-loop-1103|)))
    (LET ((I NIL) (#:|tail-1106| '(1 2 3)) (#:|by-1107| 'SYSTEM:CDR$CONS))
      (LET ((#:|accumulator-1104| 0))
        (DECLARE (TYPE NUMBER #:|accumulator-1104|))
        (TAGBODY
         #:|begin-loop-1102| NIL
                 (PROGN
                   (WHEN (OR (ENDP #:|tail-1106|)) (GO #:|end-loop-1103|))
                   (LET ((#:|temp-1109| (FUNCALL #:|by-1107| #:|tail-1106|))
                         (#:|temp-1108| (SYSTEM:CAR$CONS #:|tail-1106|)))
                     (SETQ I #:|temp-1108|)
                     (SETQ #:|tail-1106| #:|temp-1109|)))
                 (INCF #:|accumulator-1104| I)
                 (GO #:|begin-loop-1102|)
         #:|end-loop-1103| (RETURN-FROM NIL #:|accumulator-1104|)))))) 
```

# java - 以另一种语言获取 JSON Google 路线输出？

> ID：11764521
> 
> 赞同：2
> 
> 时间：2012-08-01T17:33:01.887
> 
> 标签：java, android, json, google-maps, android-mapview

我正在使用 Google 路线的 JSON 输出在我的 Android 应用程序中解析它，有没有办法使用另一种语言检索路线？在 KML 中，我曾经为另一种语言方向添加此参数 hl=xx，但我在 JSON 上尝试了这一点，但它没有效果（仍然获得英语方向）。有区域参数但我不明白如何使用它，这是解决方案（使用区域参数）吗？有任何想法吗？

这是一个示例链接：[http ://maps.google.com/maps/api/directions/json?hl=fr&origin=26.2,50.6&destination=26.3,50.7&sensor=true](http://maps.google.com/maps/api/directions/json?hl=fr&origin=26.2,50.6&destination=26.3,50.7&sensor=true)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T17:35:25.987

只需`language`在 url 中添加参数，如下所示：

[http://maps.google.com/maps/api/directions/json?origin=26.2,50.6&destination=26.3,50.7&sensor=true&language=cs](http://maps.google.com/maps/api/directions/json?origin=26.2,50.6&destination=26.3,50.7&sensor=true&language=cs)

# php - 需要一个字符串来实际包含字符 \n

> ID：11764538
> 
> 赞同：0
> 
> 时间：2012-08-01T17:34:06.663
> 
> 标签：php

我想要一个包含 '\n' 的字符串

如果我使用这些值，我会得到以下结果 -

```
$a = "\n";
$b = "\\n";
$c = '\n';
$d = '\\n'; 
```

$a 是 '' {空字符串}

$b 是 \\n

$c 是 \\n

$d 是 \\n

那么有什么方法可以真正将 \n 变成一个字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:37:08.260

`"\\n"`两者`'\n'`都有效→ [http://codepad.org/4WMGii9s](http://codepad.org/4WMGii9s)

编辑：甚至`'\\n'`有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:37:02.020

假设你想要一个文字`\n`：

```
$a = "\n";
$b = "\\n";
$c = '\n';
$d = '\\n'; 
```

`$b`, `$c`,`$d`所有工作都按要求工作。

我鼓励您阅读有关[单引号和双引号字符串在 PHP 中的工作原理](http://php.net/manual/en/language.types.string.php)。特别是字符如何转义。

### 更新

如果你愿意`\\n`，那么你可以使用：

```
echo "\\\\n";
echo '\\\\n'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T17:38:50.037

如果您希望字符串包含斜杠字符，然后是 n 字符（而不是单个“换行符”字符，那么您问题中的 $c 会执行此操作，并且输出中的某些内容是添加额外的斜杠。

```
<?php
$a = '\n';
echo $a; 
```

此代码在通过`>php -f myTest.php`输出 \n （文字字符）运行时。

这是因为对于单引号字符串，PHP 不会尝试为任何特殊序列（如换行符）“解释”字符串的内容。

# c# - 写 FizzBu zz

> ID：11764539
> 
> 赞同：25
> 
> 时间：2012-08-01T17:34:16.093
> 
> 标签：c#, optimization, fizzbuzz

阅读编码恐怖，我又一次遇到了 FizzBu​​zz。

原帖在这里：[编码恐怖：为什么程序员不能……编程？](http://www.codinghorror.com/blog/2007/02/why-cant-programmers-program.html)

对于那些不知道的人： FizzBu​​zz 是一款非常受欢迎的儿童游戏。从 1 数到 100，每当一个数字能被 3 整除时，就调用字符串“Fizz”，每当一个数字能被 5 整除时，就调用字符串“Buzz”，每次一个数字都能被 3 和 5 整除时串在一起的“FizzBu​​zz”被调用而不是数字。

这一次，我写了代码，花了我一分钟，但有几件事我不喜欢。

这是我的代码：

```
public void DoFizzBuzz()
{
    var combinations = new Tuple<int, string>[] 
    { 
        new Tuple<int, string> (3, "Fizz"), 
        new Tuple<int, string> (5, "Buzz"), 
    };

    for (int i = 1; i <= 100; ++i)
    {
        bool found = false;

        foreach (var comb in combinations)
        {
            if (i % comb.Item1 == 0)
            {
                found = true;
                Console.Write(comb.Item2);
            }
        }

        if (!found)
        {
            Console.Write(i);
        }

        Console.Write(Environment.NewLine);
    }
} 
```

**所以我的问题是：**

1.  如何摆脱找到的布尔值？
2.  有没有比 foreach 更好的测试方法？

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2012-08-01T17:39:21.567

我认为你的实现是不必要的复杂。这个可以完成工作并且更容易理解：

```
public void DoFizzBuzz()
{
    for (int i = 1; i <= 100; i++)
    {
        bool fizz = i % 3 == 0;
        bool buzz = i % 5 == 0;
        if (fizz && buzz)
            Console.WriteLine ("FizzBuzz");
        else if (fizz)
            Console.WriteLine ("Fizz");
        else if (buzz)
            Console.WriteLine ("Buzz");
        else
            Console.WriteLine (i);
    }
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-01T17:57:20.010

利用条件格式说明符获得一个很好的高尔夫版本：

```
public void DoFizzBuzz()
{
    for(int i=1;i<101;i++)Console.WriteLine("{0:#;}{1:;;Fizz}{2:;;Buzz}",i%3*i%5==0?0:i,i%3,i%5);
} 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-08-01T18:12:53.277

展开以获得最大效率。这个程序可以胜过所有其他程序。

```
public void FizzBuzz()
{
    const string FIZZ = "Fizz";
    const string BUZZ = "Buzz";
    const string FIZZBUZZ = "FizzBuzz";

    int i = 0;
    while (i < 150)
    {
        Console.WriteLine(++i);
        Console.WriteLine(++i);
        Console.WriteLine(FIZZ); ++i;
        Console.WriteLine(++i);
        Console.WriteLine(BUZZ); ++i;
        Console.WriteLine(FIZZ); ++i;
        Console.WriteLine(++i);
        Console.WriteLine(++i);
        Console.WriteLine(FIZZ); ++i;
        Console.WriteLine(BUZZ); ++i;
        Console.WriteLine(++i);
        Console.WriteLine(FIZZ); ++i;
        Console.WriteLine(++i);
        Console.WriteLine(++i);
        Console.WriteLine(FIZZBUZZ); ++i;
    }
} 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-08-01T18:08:51.140

我认为您要完成的是 FizzBu​​zz 的通用解决方案，它适用于任意数量的数字单词组合。

你有一个好的开始——我想我可以用这个例子回答你的问题：

```
public void DoFizzBuzz()
{
    var combinations = new List<Tuple<int, string>>
    { 
        new Tuple<int, string> (3, "Fizz"), 
        new Tuple<int, string> (5, "Buzz"), 
    };

    Func<int, int, bool> isMatch = (i, comb) => i % comb == 0;
    for (int i = 1; i <= 100; i++)
    {
        Console.Write(i);

        var matchingCombs = combinations.Where(c => isMatch(i, c.Item1)).ToList();
        if (matchingCombs.Any())
        {
            Console.Write(string.Join("", matchingCombs.Select(c => c.Item2)));
        }
        else
        {
            Console.Write(i);
        }
        Console.Write(Environment.NewLine);
    }
} 
```

在实践中，您会传入`combinations`该方法，但为了简洁起见，我将其包含在其中。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2012-08-01T17:36:42.113

第三次编辑：

这是从您的版本中“摆脱布尔”的一种方法（即用此替换原始问题中的 for 循环）：

```
for (int i = 1; i <= 100; i++)
{
  var x = combinations.Where(n => i % n.Item1 == 0);

  if (x.Count() == 0)
    Console.Write(i);
  else
    Console.Write(string.Join("",x.Select(e => e.Item2)));

  Console.Write(Environment.NewLine);
} 
```

* * *

之前的回答：

对于纯 C# 解决方案，请查看[Keith Thompson 的](https://github.com/Keith-S-Thompson/fizzbuzz-polyglot/blob/master/fizzbuzz.cs)解决方案。

```
using System;
class FizzBuzz {
    static void Main() {
        for (int n = 1; n <= 100; n ++) {
            if (n % 15 == 0) {
                Console.WriteLine("FizzBuzz");
            }
            else if (n % 3 == 0) {
                Console.WriteLine("Fizz");
            }
            else if (n % 5 == 0) {
                Console.WriteLine("Buzz");
            }
            else {
                Console.WriteLine(n);
            }
        }
    }
} 
```

我使用 linq 在 FixBuzz 上做了一些工作。这些是我想出的解决方案——我相信它们代表了使用 Linq 来表达这个问题的解决方案的最佳方式。( [GitHub](https://github.com/hoganlong/fizzbuzz-polyglot) )

```
using System;
using System.Linq;

class FizzBuzz {
  static void Main() {
    var list = Enumerable.Range(1,100)
                .Select(n => {
                      if (n % 15 == 0) {
                        return "FizzBuzz";
                      }
                      if (n % 3 == 0) {
                        return "Fizz";
                      }
                      if (n % 5 == 0) {
                        return "Buzz";
                      }
                      return n.ToString();
                    });

    foreach(string item in list)
      Console.WriteLine(item);
  }
} 
```

和疯狂的单行版本：

```
using System;
using System.Linq;

class FizzBuzz {
    static void Main() {
      Console.WriteLine(
      String.Join(
        Environment.NewLine,
        Enumerable.Range(1, 100)
          .Select(n => n % 15 == 0 ? "FizzBuzz" 
                     : n % 3 == 0 ? "Fizz" 
                     : n % 5 == 0 ? "Buzz" 
                     : n.ToString())
      ));
    }
} 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2012-08-01T17:52:29.297

```
public void DoFizzBuzz()
{
    for (int i = 1; i <= 100; i++)
    {
        if (i % 3 == 0)
            Console.Write("Fizz");
        if (i % 5 == 0)
            Console.Write("Buzz");
        if (!(i % 3 == 0 || i % 5 == 0))
            Console.Write(i);

        Console.Write(Environment.NewLine);
    }
} 
```

这摆脱了 bool `found`，但迫使您进行重复评估。`i % 15 == 0`它与用于 FizzBu​​zz 资格的其他一些答案略有不同。这是否更好还有待商榷。然而，这是*另*一种方式。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2013-11-27T22:21:53.003

有人已经做过这个了吗？

```
Enumerable.Range(1, 100).Select(x =>
                (x % 15 == 0) ? "FIZZBUZZ"
                : (x % 5 == 0) ? "BUZZ"
                : (x % 3 == 0) ? "FIZZ"
                : x.ToString()
                )
                .ToList()
                .ForEach(console.WriteLine); 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2013-07-19T05:03:42.117

我认为你从一个复杂的方式开始。改进该代码会更加复杂。您可以使用临时变量在 FizzBu​​zz 检查结束时跟踪和显示该变量。下面是代码，您还可以观看此详细信息 c# FizzBu​​zz youtube 视频 ( [http://www.youtube.com/watch?v=OX5TM3q-JQg](http://www.youtube.com/watch?v=OX5TM3q-JQg) )，它解释了如何实现以下代码。

```
 for (int j = 1; j <= 100; j++)
    {
    string Output = "";

    if (j % 3 == 0) Output = "Fizz";// Divisible by 3 --> Fizz

    if (j % 5 == 0) Output += "Buzz"; // Divisible by 5 --> Buzz

    if (Output == "") Output = j.ToString(); // If none then --> number

    Console.WriteLine(Output); // Finally print the complete output
    } 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2014-03-05T12:40:01.083

将我的 5 美分添加到 Linq 的解决方案中。每个人都在使用 Select，它基本上是 Map 功能。恕我直言 foldl 功能更适合解决这个测验：

```
Console.WriteLine(
                Enumerable
                .Range(1, 100)
                .Aggregate(new StringBuilder(), (builder, i)
                    => i % 15 == 0 ? builder.AppendLine("FizzBuzz")
                     : i % 3 == 0 ? builder.AppendLine("Fizz")
                     : i % 5 == 0 ? builder.AppendLine("Buzz")
                     : builder.AppendLine(i.ToString()))
                .ToString()); 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2015-04-12T04:39:24.647

林克：

```
Enumerable.Range(1, 100).ToList().ForEach(i => Console.WriteLine( i % 3 * i % 5 == 0 ? (i % 3 == 0 ? "Fizz" : "") + (i % 5 == 0 ? "Buzz" : "") : i.ToString())); 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2014-06-08T00:42:28.130

在我看来，FizzBu​​zz 问题总是对被采访者提出挑战，让 FizzBu​​zz 出现而不显式打印它。这是我在 C# 中的解决方案。

```
internal void PrintFizzBuzzAlternative(int num)
{
    if (num % 5 == 0)
        Console.Write("Fizz");
    if (num % 3 == 0)
        Console.Write("Buzz");
    if (num % 5 != 0 && num % 3 != 0)
        Console.Write(num);
    Console.WriteLine();
} 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-11-23T13:30:39.143

不是最有效的，但这是使用 C#-6[字符串插值](https://msdn.microsoft.com/en-us/library/dn961160.aspx)的方法：

```
void Main()
{
    for (int i = 1; i <= 100; i++)
    {
       Console.WriteLine($"{(i % 15 == 0 ? "FizzBuzz" : 
                             i % 3 == 0 ? "Fizz" : 
                             i % 5 == 0 ? "Buzz" : i.ToString())}");
    }
} 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2016-09-02T13:16:12.037

```
Enumerable.Range(1, 100).ToList().ForEach(i=>Console.WriteLine($"{(i%3*i%5==0?0:i):#;}{i%3:;;Fizz}{i%5:;;Buzz}")); 
```

这个答案应有尽有：

*   LINQ
*   条件格式
*   字符串插值
*   全部在一条线上

胜利！

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2012-08-01T18:05:03.383

FizzBu​​zz 问题是一个很好的面试问题。我们已经开始在面试过程中使用它。这么简单的问题竟然有多少人解决不了，真是*令人吃惊。*

请记住，由于大量人发布更多解决方案，原始博客文章最终被锁定。哈哈哈。

无论如何，这是我用 C++ 编写的！^_^

```
#include <iostream>
using namespace std;

int main(int argc, char** argv)
{
    for (int i = 1; i <= 100; ++i)
    {
        bool isMultipleOfThree = (i % 3) == 0;
        bool isMultipleOfFive = (i % 5) == 0;

        if (isMultipleOfThree) cout << "Fizz";
        if (isMultipleOfFive) cout << "Buzz";
        if (!isMultipleOfThree && !isMultipleOfFive) cout << i;

        cout << '\n';
    }

    return 0;
} 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2012-08-01T20:29:17.957

好吧，这到底是什么，这是我喜欢的解决方案:)

```
public void DoFizzBuzz()
{
    for (int i = 1; i <= 100; ++i)
    {
        bool isDivisibleByThree = i % 3 == 0;
        bool isDivisibleByFive = i % 5 == 0;

        if (isDivisibleByThree || isDivisibleByFive)
        {
            if (isDivisibleByThree)
                cout << "Fizz";

            if (isDivisibleByFive)
                cout << "Buzz";
        }
        else
        {
            cout << i;
        }
        cout << endl;
    }
} 
```

显然，这不是最快的解决方案，但我喜欢它，因为它强调可读性，并使“FizzBu​​zz”案例不再是特例，而是通过代码路径自然发生的事情。

最后，每当这个问题出现时，我最喜欢的是我们可以看到 ppl 可以提出多少不同的解决方案。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2013-02-13T05:10:38.053

我是初学者，这是我的尝试：

```
public void DoFizzBuzz()
   {
       for (int i = 1; i < 101; i++)
       {

           if ((i % 3 == 0) && (i % 5 == 0))
           {
               Console.WriteLine("{0} FizzBuzz", i);
           }
           else if (i % 3 == 0)
           {
               Console.WriteLine("{0} Fizz", i);
           }
           else if (i % 5 == 0)
           {
               Console.WriteLine("{0} Buzz", i);
           }
           else
           {
               Console.WriteLine(i);
           }

       }
       Console.ReadLine();
   } 
```

我的方法有什么问题吗？我的方法似乎比其他人的方法简单得多，所以它一定是错误的。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2013-08-07T11:04:36.670

您可能希望使其可配置，但问题是应该使什么可配置 - 我们不知道。也许我们应该使所有周期都可配置（FizzBu​​zz 有周期）。这是具有可配置周期的非常小而有趣的版本：

```
string[] fizzBuzzCycle = 
    "FizzBuzz,{0},{0},Fizz,{0},Buzz,Fizz,{0},{0},Fizz,Buzz,{0},Fizz,{0},{0}"
    .Split(',');

for (int i = 1; i <= 100; i++)
    Console.WriteLine(fizzBuzzCycle[i%fizzBuzzCycle.Length], i); 
```

因此，如果要更改字符串或整个循环，则很容易更改。但是您只是不知道如何进行可配置。也许条件会改变：“对于素数打印 Pizz”，对于这个修改，@ThomasLevesque 的解决方案更好，因为它更容易改变。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2016-07-10T18:45:52.183

我试图在不看答案的情况下解决这个问题。我花了3个小时才成功。（顺便说一句，我只是一个爱好程序员，所以请不要猛烈抨击我:)）这是我的 c# 版本解决方案：

```
 static void Main(string[] args)
    {

        for (int i = 1; i <= 100; i++)
        {
            if(  ((i % 3) != 0) && ((i % 5) != 0))
            {
                WriteLine($"{i}");
            }
            else
            {
                if ((i % 15) == 0)
                {
                    WriteLine("FizzBuzz");
                }
                else if ((i % 3) == 0)
                {
                    WriteLine("Fizz");
                }
                else if ((i % 5) == 0)
                {
                    WriteLine("Buzz");
                }
            }                 
        }
    } 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2012-08-01T17:45:38.557

我建议在 for 循环中使用 ++i 而不是 i++，因为 i++ 需要制作副本；）

```
public void DoFizzBuzz()
{
    for (int i = 1; i < 101; ++i)
    {
        if (i % 15 == 0)
            Console.WriteLine ("FizzBuzz");
        else if (i % 3 == 0)
            Console.WriteLine ("Fizz");
        else if (i % 5 == 0)
            Console.WriteLine ("Buzz");
        else
            Console.WriteLine (i);
    }
} 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2012-08-01T19:45:50.663

在 Rob H 和 Jacob Krall 的帮助下，我目前拥有的就是这里。也许我将来会玩这个......只是想提供它。

```
public void DoFizzBuzz()
{
    // expect this to come in as parameter
    var combinations = new Tuple<int, string>[] 
    { 
        new Tuple<int, string> (3, "Fizz"), 
        new Tuple<int, string> (5, "Buzz"), 
    };

    Func<int, int, bool> isMatch = (i, comb) => i % comb == 0;

    // expect the borders 1, 100 to come in as parameters
    for (int i = 1; i <= 100; ++i)
    {
        var matchingCombs = combinations.Where(c => isMatch(i, c.Item1)).DefaultIfEmpty(new Tuple<int, string>(i, i.ToString())).Aggregate((v, w) => new Tuple<int, string>(v.Item1, v.Item2 + w.Item2)).Item2;
        Console.WriteLine(matchingCombs);
    }
} 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2013-01-23T15:38:13.760

我建议将这个紧凑的代码作为之前简单而漂亮的版本的补充。

```
for (int i = 1; i <= 100; i++) // i++ but not ++i as in your example, be careful here
{
    bool fizz = i % 3 == 0;
    bool buzz = i % 5 == 0;
    string output = fizz && buzz ? "FizzBuzz" :
                            fizz ? "Fizz" :
                            buzz ? "Buzz" :
                            i.ToString();

    Console.WriteLn(output);
} 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2015-12-11T06:20:10.990

一种功能性的方法...

```
Console.WriteLine(Enumerable
    .Range(1,100)
    .Aggregate("", 
        (a,i) => a + "\n" + (i%15==0 ? "fizzbuzz" : 
                                (i%5==0 ? "buzz" :
                                    (i%3==0 ? "fizz" : i.ToString()))))); 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2016-09-26T16:04:36.500

使用 for 循环的相对简单的解决方案。

没有 Linq 或任何东西 - 只是基本的速记 if 语句

```
for(int x=1;x<101;x++)
    Console.WriteLine(x%3==0?"Fizz"+(x%5==0?"Buzz":""):x%5==0?"Buzz":x+""); 
```

很像 csells（无字符串插值）并且适合一行的 Linq 解决方案是：

```
Enumerable.Range(1,100).ToList().ForEach(x=>Console.WriteLine(x%3==0?"Fizz"+(x%5==0?"Buzz":""):x%5==0?"Buzz":x+"")); 
```

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2016-10-16T18:16:34.177

显然，这有点超出了 FizzBu​​zz 挑战的精神。但在我的基准测试中，这是我在单线程时可以做到的最快速度，但仍以 100 终止。它是半展开的，使用`StringBuilder`. 它比标准方法快大约三倍。

```
const string FIZZ = " Fizz\n";
const string BUZZ = " Buzz\n";
const string FIZZBUZZ = " FizzBuzz\n";
    ...
var sb = new StringBuilder();
int i = 0;

while(true)
{       
    sb.Append(i+3);
    sb.Append(FIZZ);        
    sb.Append(i+5);
    sb.Append(BUZZ);        
    sb.Append(i+6);
    sb.Append(FIZZ);        
    sb.Append(i+9);
    sb.Append(FIZZ);        
    sb.Append(i+10);
    sb.Append(BUZZ);        
    if(i+12 > 100)
        break;
    sb.Append(i+12);
    sb.Append(FIZZ);    
    i+=15;
    sb.Append(i);
    sb.Append(FIZZBUZZ);
}

Console.Write(sb.ToString()); 
```

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2017-11-30T18:45:54.677

空合并运算符非常有用：

```
string output = null;
for (int i = 1; i <= 100; i++)
{
     if (i % 3 == 0) output += "fizz";
     if (i % 5 == 0) output += "buzz";
     Console.WriteLine(output ?? i.ToString());
     output = null;
}
Console.ReadKey(); 
```

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2018-03-21T23:52:51.703

即使已经编写了 20 个其他解决方案，我也会添加我的：它是这样的......

```
var x = 1;
while (x <= 100)
{
     if (x % 3 == 0 && x % 5 == 0)
        {Console.Writeline("FizzBuzz");}
     else if (x % 3 == 0)
        {Console.Writeline("fizz");}
     else if (x % 5 == 0)
        {Console.Writeline("Buzz");}
     else
        {Console.Writeline(x);}
     x++ 
} 
```

我想出的第一个解决方案。简单，切中要害，完成工作。不需要布尔值。

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2019-11-16T20:23:53.303

这是我将 Func 与 IEnumerable 混合的努力

```
 class Program
{
    static void Main(string[] args)
    {
        foreach (var i in FizzBuzz(100))
        {
            Console.WriteLine(i);
        }
    }

    private static IEnumerable<string> FizzBuzz(int maxvalue)
    {
        int count = 0;
        //yield return count.ToString();
        Func<int, string> FizzBuzz = (x) => ((x % 5 == 0 && x % 3 == 0) ? "FizzBuzz" : null);
        Func<int, string> Buzz = (x) => ((x % 5 == 0) ? "Buzz" : null);
        Func<int, string> Fizz = (x) => ((x % 3 == 0) ? "Fizz" : null);
        Func<int, string> Number = (x) => x.ToString();

        while (count < maxvalue)
        {
            count++;

            yield return FizzBuzz(count) ?? Buzz(count) ?? Fizz(count) ?? Number(count);
        }
    }
} 
```

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2012-08-01T18:15:29.813

最初的问题是：1.如何摆脱找到的布尔？2.有没有比foreach更好的测试方法？

这摆脱了 bool 和 foreach，我认为它仍然是可读的。

```
public static void DoFizzBuzz()
{
    var combinations = new Tuple<int, string>[]  
    {  
        new Tuple<int, string> (3, "Fizz"),  
        new Tuple<int, string> (5, "Buzz"),  
    };

    for (int i = 1; i <= 100; i++)
    {
        var fb = combinations.Where(t => {
            if (i % t.Item1 == 0)
            {
                Console.Write(t.Item2);
                return true;
            }
            return false;
        }).ToList();

        if (!fb.Any())
        {
            Console.Write(i);
        }

        Console.Write(Environment.NewLine);
    }
} 
```

谁能想到我们会对一个简单的儿童游戏如此兴奋？:)

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2013-06-28T17:47:55.303

您可以使用任何一种，只取您想要的量

```
static void Main(string[] args)
{
    GetFizzBuzz().Take(100).ToList().ForEach(Console.WriteLine);
}

private static IEnumerable<string> GetFizzBuzz()
{
    for (var i = 0; i < int.MaxValue; i++)
    {
        if (i % 3 == 0 && i % 5 == 0) yield return "FizzBuzz";
        if (i % 3 == 0) yield return "Fizz";
        yield return i % 5 == 0 ? "Buzz" : i.ToString(CultureInfo.InvariantCulture);
    }
} 
```

或者干脆使用这个：

```
Enumerable.Range(1, 100).Select(s => {
    if (s % 3 == 0 && s % 5 == 0) return "FizzBuzz";
    if (s % 3 == 0) return "Fizz";
    return s%5 == 0 ? "Buzz" : s.ToString(CultureInfo.InvariantCulture);
}).ToList().ForEach(Console.WriteLine); 
```

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2017-02-24T20:14:00.667

没有 if 条件，只有一个三元运算符。

```
string[] s = new string[6]{"Fizz", "Buzz", "", "", "", ""};
for (int i = 1; i <= 100; i++)
{
    string output = s[(i%3)*2] + s[(i%5)+1];
    Console.WriteLine(string.IsNullOrEmpty(output)? "" + i : output);
} 
```

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2019-02-04T12:34:11.240

发现 Stringbuilder 是最快的。

我发现这个实现也是最容易阅读的。

```
public static void FizzBuzz() {

    StringBuilder sb = new StringBuilder();

    for (int i = 1; i <= 100; i++) {    
        if (i % 3 == 0 && i % 5 == 0) {
            sb.AppendLine($"{i} - FizzBuzz");
        } else if (i % 3 == 0) {
            sb.AppendLine($"{i} - Fizz");
        } else if (i % 5 == 0) {
            sb.AppendLine($"{i} - Buzz");
        } else {
            sb.AppendLine($"{i}");
        }
    }
    Console.WriteLine(sb);
} 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2014-08-18T20:54:29.160

不使用任何 If 的 C# 代码。

```
 //False = 0, True = 1.
    private void DivisibilityByFiveThreeTest(int num)
    {
        string[,] values = new string [2,2]{
                             {"None","Fizz"},
                             {"Buzz","FizzBuzz"}
                             };
        for(int i=1;i< num;i++)
        Console.WriteLine(values[Convert.ToInt32(i % 5 == 0), Convert.ToInt32(i%3==0)]);

    } 
```

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2016-10-03T18:16:07.997

JavaScript 中的直接解决方案

```
var i = 1;
while (i <= 100){
    console.log((i % 3 === 0 && i % 5 === 0) ? "FizzBuzz" : (i % 3 === 0) ? "Fizz" : (i % 5 === 0 ? "Buzz" : i));
    i++;
} 
```

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2016-10-07T14:24:34.003

在蟒蛇......

```
 for i in range(0, 100) :
        a = i % 3 == 0
        b = i % 5 == 0

        if(a & b):
            print("FizzBuzz")
        elif(a):
            print("Fizz")
        elif(b):
            print("Buzz")
        else:
            print(i) 
```

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2017-07-02T16:18:57.447

C++ 实现

```
vector<string> FizzBuzz::execute(int n) {

    if(n == 0)
        return vector<string>();

    auto push = n % 15 == 0 ? "fizzbuzz" :
                n % 3 == 0 ? "fizz" :
                n % 5 == 0 ? "buzz" :
                to_string(n);

    auto execution = execute(n-1);
    execution.push_back(push);
    return execution;
} 
```

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2018-09-18T11:00:11.790

```
In C#...

using System;
using System.IO;
class Solution {
    static void Main(String[] args) {        
        for(int i=1;i<=100;i++)
        {                       
         string result=(i%3==0 && i%5==0) ? "FizzBuzz" : 
               (i%5==0) ? "Buzz" :
                       (i%3==0) ? "Fizz" : i.ToString();            
         Console.WriteLine(res);
        }
    }
}

In VB.NET...

Imports System
Imports System.IO

Class Solution
    Private Shared Sub Main(ByVal args As String())
        For i As Integer = 1 To 100
            Dim res As String = If((i Mod 3 = 0 AndAlso i Mod 5 = 0), "FizzBuzz", If((i Mod 5 = 0), "Buzz", If((i Mod 3 = 0), "Fizz", i.ToString())))
            Console.WriteLine(res)
        Next
    End Sub
End Class 
```

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2018-10-15T19:21:37.043

已被回答至死，但只是为了展示另一个回答实际问题的解决方案

```
public static void DoFizzBuzz()
{
    var combinations = new (int multiple, string output)[]
    {
        (3, "Fizz"),
        (5, "Buzz")
    };

    for (int i = 1; i <= 100; ++i)
    {
        // Seed the accumulation function with an empty string and add any 'matches' from each combination
        var fb = combinations.Aggregate("", (c, comb) => c + (i % comb.multiple == 0 ? comb.output : ""));

        Console.WriteLine(!string.IsNullOrEmpty(fb) ? fb : $"{i}");
    }
} 
```

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2019-01-25T02:46:58.813

最短的答案！！！

读一读……看我的意思是：

`for(;++$i<101;)print($i%15?$i%3?$i%5?$i:Buzz:Fizz:FizzBuzz)."\n"`

语言 PHP。享受。

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2019-01-29T10:11:10.270

这是用 JavaScript 编写的答案

```
//returns true if modulus is zero and is reusable        
var isModulusZero = (challenge, modulator) => {
    let answer = challenge % modulator;

    if (answer == 0) {
        return true
    } else {
        return false
    }
}

var printOneToHundred = () => {
    var i = 1;

    for (i; i <= 100; i++) {

        if (isModulusZero(i, 3) && isModulusZero(i, 5)) {
            console.log('FizzBuzz')
        } else if (isModulusZero(i, 3)) {
            console.log('Fizz')
        } else if (isModulusZero(i, 5)) {
            console.log('Buzz')
        } else {
            console.log(i)
        }

    }
} 
```

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2019-04-01T18:00:21.170

好的 - 我会咬人的。我在最近的一次初步编码面试中提出的 LINQ 重型解决方案。令人惊讶的是，这个简单的问题有多少不同的解决方案。

```
public static class FizzBuzzUtils
{
    private static List<KeyValuePair<int, string>> map = new List<KeyValuePair<int, string>> {
        new KeyValuePair<int, string>(3, "Fizz"),
        new KeyValuePair<int, string>(5, "Buzz")
    };

    public static string GetValue(int i)
    {
        var matches = map.Where(kvp => i % kvp.Key == 0)
            .Select(kvp => kvp.Value)
            .ToArray();
        return matches.Length > 0 ? string.Join(string.Empty, matches) : i.ToString();
    }

    public static IEnumerable<string> Range(int start, int count)
    {
        return Enumerable.Range(start, count)
            .Select(i => GetValue(i));
    }
} 
```

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2019-12-28T16:12:44.293

Fizz Buzz Pattern（参见 CachedFizzBu​​zz 方法），结合策略模式。

```
using System;
interface IFizzBuzz
{
}
class NullFizzBuzz: IFizzBuzz
{
    public static int value;
     public override string ToString()
    {
        return value.ToString();
    }
}
class Buzz : IFizzBuzz
{
    public override string ToString()
    {
        return "Buzz";
    }
}
class Fizz: IFizzBuzz
{
    public override string ToString()
    {
        return "Fizz";
    }
}
class FizzBuzz : IFizzBuzz
{
    public override string ToString()
    {
        return "FizzBuzz";
    }
}

class FizzBuzzSolver
{
    public int Fizz { get; }
    public int Buzz { get; }
    public int Iterations { get; }
    public int FizzBuzz { get; }
    public int Quotient { get; }
    public int Remainder { get; }
    public FizzBuzzSolver(int fizz, int buzz, int iterations, int fizzbuzz, int quotient, int remainder)
    {
        Fizz = fizz;
        Buzz = buzz;
        Iterations = iterations;
        FizzBuzz = fizzbuzz;
        Quotient = quotient;
        Remainder = remainder;
    }

    internal void Solve(Action<FizzBuzzSolver> fizzBuzz)
    {
        fizzBuzz(this);
    }
}
class Program
{
    static void Main()
    {
        int fizz = 3;// int.Parse(Console.ReadLine());
        int buzz = 5;// int.Parse(Console.ReadLine());
        int iterations = 100;//int.Parse(Console.ReadLine());
        int fizzbuzz = fizz * buzz;
        int quotient = Math.DivRem(iterations, fizzbuzz, out var remainder);
        FizzBuzzSolver fb = new FizzBuzzSolver(fizz, buzz, iterations, fizzbuzz, quotient, remainder);
        switch (quotient)
        {
            case 0: fb.Solve(RemainderFizzBuzz); break;
            case 1: fb.Solve(NormalFizzBuzz);  break;
            default: fb.Solve(CachedFizzBuzz); break;
        };

        Console.Read();
    }

    private static void NormalFizzBuzz(FizzBuzzSolver fb)
    {
        for (int i = 1; i < fb.FizzBuzz; i++)
        {
            Console.WriteLine(i % fb.Fizz == 0 ? "Fizz" : i % fb.Buzz == 0 ? "Buzz" : i.ToString());
        }
        Console.WriteLine("FizzBuzz");
        for (int i = fb.FizzBuzz+1; i <= fb.Iterations; i++)
        {
            Console.WriteLine(i % fb.Fizz == 0 ? "Fizz" : i % fb.Buzz == 0 ? "Buzz" : i.ToString());
        }
    }

    private static void CachedFizzBuzz(FizzBuzzSolver fb)
    {
        var fizzbuzzArray = new IFizzBuzz[fb.FizzBuzz];

        for (int i = 0; i < fb.FizzBuzz - 1; i++)
        {
            int s = i + 1;
            if (s % fb.Fizz == 0)
            {
                fizzbuzzArray[i] = new Fizz();
                Console.WriteLine("Fizz");
            }
            else
            if (s % fb.Buzz == 0)
            {
                fizzbuzzArray[i] = new Buzz();
                Console.WriteLine("Buzz");
            }
            else
            {
                fizzbuzzArray[i] = new NullFizzBuzz();
                Console.WriteLine(s);
            }

        }
        fizzbuzzArray[fb.FizzBuzz - 1] = new FizzBuzz();
        Console.WriteLine("FizzBuzz");
        NullFizzBuzz.value = fb.FizzBuzz;
        for (int j = 1; j < fb.Quotient; j++)
        {
            for (int i = 0; i < fb.FizzBuzz; i++)
            {
                NullFizzBuzz.value++;
                Console.WriteLine(fizzbuzzArray[i]);
            }

        }
        for (int i = 0; i < fb.Remainder; i++)
        {
            NullFizzBuzz.value++;
            Console.WriteLine(fizzbuzzArray[i]);
        }
    }

    private static void RemainderFizzBuzz(FizzBuzzSolver fb)
    {
        for (int i = 1; i <= fb.Remainder; i++)
        {
            Console.WriteLine(i % fb.Fizz == 0 ? "Fizz" : i % fb.Buzz == 0 ? "Buzz" : i.ToString());
        }
    }
} 
```

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2021-02-26T15:24:04.840

与此处的其他答案不同，此解决方案提供了轻松扩展它的可能性。如果面试官要求您也将 7 替换为“Woof”，则可以通过添加到地图中轻松完成。

```
var map = new Dictionary<int, string>
{
    {3*5*7, "FizzBuzzWoof"}, // Optional
    {5*7, "BuzzWoof"}, // Optional
    {3*7, "FizzWoof"}, // Optional
    {3*5, "FizzBuzz"},
    {7, "Woof"},
    {5, "Buzz"},
    {3, "Fizz"},
    {1, null} // For all numbers not evenly divisible
};

var words = Enumerable
    .Range(0, 154)
    .Select(i => (i == 0 ? null : map[map.Keys.First(k => i % k == 0)]) ?? i.ToString())
    .Dump("Words");

string.Join(' ', words).Dump("Result"); 
```

然而，识别所有排列成为一件苦差事，添加的额外单词越多，查找的次数就越多，但关键是要争论理解编码原则。

* * *

## 回答 #43

> 赞同：0
> 
> 时间：2021-07-15T17:36:13.727

因为我们要使用通用的 FizzBu​​zz（我见过这个叫做[Raindrops](https://exercism.io/tracks/csharp/exercises/raindrops)），所以有几个简单的修改来保持它的通用性和可读性：

1.  将“组合”重命名为“primeFactors”使其更具描述性
2.  [元组字段名称](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/value-tuples#tuple-field-names)使访问元组字段更具可读性
3.  [Linq](https://docs.microsoft.com/en-us/dotnet/csharp/linq/)查询我们想要的显示字符串的素数列表（删除`foreach`）
    *   `Where`将列表过滤为当前整数的因子
    *   `Select`将匹配因子转换为它们的显示字符串
    *   `DefaultIfEmpty`处理“未找到匹配”的情况，允许我们删除该布尔值
    *   `Aggregate`将所有匹配的显示字符串连接在一起

[在线尝试！](https://tio.run/##bZFfS8MwFMXf@ykuRSFhs0zEp1pBNyeCgrCHPYw9xOy2BtKkJulkHf3sM2237g/el3AP53dPcsPtDdcGd6UVKoPZxjrM4@C0i8ZaSuROaGWjV1RoBL9wvAv1EwdBUX5JwYFLZi18Gp0Zlgfbg2wdc/5Ya7GCDyYUsc74GYslMJNZ6o0AEz0VVfVcVhWhcVDv/kFPLS0DsGYGCiNynDLutLGQgMJfIEI56KQhdGEwEbaQbEMXy5bs@KbI3RDCZnJIh0fx3otNVEhbrY7bI9UGSBPqAzBD4/Nu47558N1oFMNgsFdoP2/sV6glRnMjHPqlITm9dm9rKpp/o0HiykIiJI/99GtopahjIElgRM/BGTa/dSQ7/@Hh594JpqyU7i19yQu3IVfhdp9ThxfOpywzmDGHhKTCWOc3ilyrFW0iPNeK9bYTT@n2H@vdHw)

```
public void DoFizzBuzz()
{
    var primeFactors = new (int Factor, string Display)[]
    {
        (3, "Fizz"),
        (5, "Buzz")
    };
    for (var integer = 1; integer <= 100; ++integer)
        Console.WriteLine(primeFactors
            .Where(tuple => integer % tuple.Factor == 0)
            .Select(tuple => tuple.Display)
            .DefaultIfEmpty($"{integer}")
            .Aggregate((first, second) => $"{first}{second}")
        );
} 
```

# iphone - iOS NSURLConnection POST 错误处理

> ID：11764540
> 
> 赞同：0
> 
> 时间：2012-08-01T17:34:21.533
> 
> 标签：iphone, objective-c, ios, xcode, nsurlconnection

因此，对于我的 iOS 客户端，我正在启动 POST 以通过以下方式上传大量数据（例如 30MB）：

```
[[NSURLConnection connectionWithRequest:req delegate:self] retain]; 
```

但是，我需要处理 URL 错误的情况 - 例如，返回 404 的情况。问题是，我的`didSendBodyData`委托方法被一遍又一遍地调用，就像它应该假设 URL 是正确的一样，以 32k 为单位价值的数据，直到达到 30MB 的总文件大小。我实际上是在用这种方法进行计算以显示和显示进度条，即使 URL 无效，它的外观和行为也像是在传输整个文件（我不确定幕后到底发生了什么 - 它可以'实际上没有做任何事情，URL 解析为 404！）

然后，在假定上传 20 秒后，我的`didReceiveResponse`委托方法最终被调用，我可以在其中检查 NSURLResponse 并查看是否提供了 404。为什么它似乎在我能够得到任何类型的错误之前传输了整个文件？使用`[NSURLConnection connectionWithRequest]`，我怎么能在它实际做任何事情之前知道这是一个 404 ？无论如何，有什么`didSendBodyData`方法可以告诉，或者有什么其他方式可以比我看到的更早告诉吗？

一个更大的问题是，我让你限制上传时间，所以它会在 x 秒后停止，此时我取消连接（在`didSendBodyData`方法的中间），所以这样做似乎没有办法知道任何事情网址出错了。

看起来这应该有一个非常简单的解决方案，但我没有看到它。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:57:52.670

根据规范，我不相信 HTTP 服务器在完全接收到 HTTP 请求之前会发回 HTTP 响应。这意味着即使您将一堆数据发送到任何地方，您看到的行为也是预期的。

您可以尝试在请求中发送[HTTP Expect 标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.20)。否则，您是否考虑过发送初步 ping 请求以检查 url 端点是否存在？也许是没有数据的 POST？然后，您可以在提出昂贵的请求之前了解 404。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:53:09.203

你实现了[NSURLConnectionDataDelegate](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate)吗？

因为以下委托方法可能是您所追求的：

```
- (NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)response;

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response;

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data; 
```

如果您只想检查响应代码并执行一些操作，那么我会将以下内容添加到您的代码中

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response   
{
            NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response;
                if (httpResponse.statusCode == 404){
                    NSLog(@"Epic Fail");
                }
        ...

        ...
} 
```

# javascript - Ajax - For 循环

> ID：11764541
> 
> 赞同：0
> 
> 时间：2012-08-01T17:34:22.237
> 
> 标签：javascript, ajax, dom

Ajax 调用一个由四个字符串组成的数组，然后我想将每个字符串打印到一个新行。我有这个代码：

```
window.onload = function () {
    var obj;
    var xmlhttp;

    if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    } else {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            obj = JSON.parse(xmlhttp.responseText);

            for (var i = 0; i <= obj.length; i++) {
                document.createTextNode(obj[i]);
            }
        }
    }

    xmlhttp.open("GET", "verify.php", true);
    xmlhttp.send();
} 
```

但是，它不起作用。`obj.length`返回`4`，我不知道循环是否没有执行，或者我是否无法访问 DOM？我对 Javascript 和 DOM 脚本非常陌生。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T17:37:39.543

您需要将节点实际放入文档中。

```
var node;
for (var i = 0, n = obj.length; i < n; i++) {  // NB: not <=
    node = document.createTextNode(obj[i]);
    document.body.appendChild(node);

    node = document.createElement('br');
    document.body.appendChild(node);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T17:37:11.897

这只会创建 textNode，您仍然必须通过 appendChild 将其应用到 DOM：

[https://developer.mozilla.org/en/DOM/document.createTextNode](https://developer.mozilla.org/en/DOM/document.createTextNode)

# php - 在 Wordpress 中包含另一个 MySQL 类

> ID：11764542
> 
> 赞同：0
> 
> 时间：2012-08-01T17:34:25.110
> 
> 标签：php, mysql, wordpress

我有一个 Wordpress 安装，比如在 localhost/blog/ 路径中。

我还在根文件夹中安装了另一个自定义 CMS，例如 localhost/ 。

我想将我的 CMS 的 MySQL 类包含到博客的安装中，所以在博客主题的 header.php 中，我包含如下：

```
<?php
global $site_config, $_db // $_db is my CMS' equivalent to $wpdb;

include_once("../includes/class.query.php");
?> 
```

我可以在 Wordpress 博客中访问我的 CMS 数据库。

但是，Wordpress 中的一些变量（例如文章作者）丢失了。调用诸如“get_the_author_meta('ID')”、“the_post_thumbnail('thumbnail')”之类的函数会返回空字符串。还张贴在帖子中的画廊也失踪了。其他内容（如帖子内容）运行良好。

上面'class.query.php' 的内容相当简单。我把它缩小到这几行：

```
function connect()
{
    if ($this->mysql_link = @mysql_connect($this->dbhost, $this->dbuser, $this->dbpass))
    {
        if (!mysql_select_db($this->dbase))  // <---- this is the line that screwed up the integration
        {
.... 
```

我想知道是否有人知道这里发生了什么。为什么只有一些 Wordpress 功能受到影响？

我怎样才能解决这个问题？

提前致谢。

# android - Android - 在相机上显示网格线

> ID：11764549
> 
> 赞同：8
> 
> 时间：2012-08-01T17:34:49.383
> 
> 标签：android, camera, grid, lines, glsurfaceview

我是android应用程序开发的新手。我想创建一个从相机获取流并在 SurfaceView 或 FrameLayout 上显示的应用程序。

我需要在流媒体“显示网格线”上显示一个选项，当用户单击它时，网格线将显示在相机流上。

任何人都可以帮助我如何在相机流媒体上显示网格线？？？

任何帮助将是可观的...

谢谢你。莫辛

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-04-30T11:15:11.733

如果要根据屏幕尺寸动态绘制线条，则应在相机预览类中使用以下代码。

```
 @Override  
    protected void onDraw(Canvas canvas)  
    { 
        if(grid){
        //  Find Screen size first  
        DisplayMetrics metrics = Resources.getSystem().getDisplayMetrics();  
        int screenWidth = metrics.widthPixels;  
        int screenHeight = (int) (metrics.heightPixels*0.9);  

        //  Set paint options  
        paint.setAntiAlias(true);  
        paint.setStrokeWidth(3);  
        paint.setStyle(Paint.Style.STROKE);  
        paint.setColor(Color.argb(255, 255, 255, 255));  

        canvas.drawLine((screenWidth/3)*2,0,(screenWidth/3)*2,screenHeight,paint);
        canvas.drawLine((screenWidth/3),0,(screenWidth/3),screenHeight,paint);
        canvas.drawLine(0,(screenHeight/3)*2,screenWidth,(screenHeight/3)*2,paint);
        canvas.drawLine(0,(screenHeight/3),screenWidth,(screenHeight/3),paint);
        }
    } 
```

您还需要在相机预览类的构造函数中添加以下行：

```
this.setWillNotDraw(false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T19:42:24.367

如果您想在相机预览上叠加，您必须编写自己的相机。这是一个很难涵盖的主题，但这里有一个指南可以帮助您入门：

[http://developer.android.com/guide/topics/media/camera.html#custom-camera](http://developer.android.com/guide/topics/media/camera.html#custom-camera)

一旦你有工作的相机，只需编辑你的相机活动的 XML 布局。使用RelativeLayout，它将允许您在预览表面上放置其他视图（按钮、图像）。

这是与上述指南兼容的 XML 布局示例。预览表面以编程方式创建并放入 FrameLayout（上面链接的指南中有更多内容）。ImageView 将绘制在预览表面上。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

  <FrameLayout
    android:id="@+id/camera_preview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    />

  <ImageView
    android:id="@+id/grid"
    android:src="@drawable/your_grid_drawable"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    />

</RelativeLayout> 
```

您还必须在那里放置一个捕获按钮和一个网格切换按钮，但您应该从上面的示例中了解如何做到这一点。只需将更多元素添加到 RelativeView 并像在普通布局中一样定位它们。

# java - Java 使用多线程写入文件不会加速执行

> ID：11764552
> 
> 赞同：0
> 
> 时间：2012-08-01T17:34:53.877
> 
> 标签：java, multithreading, opengl

我前段时间问过[这个问题，以了解加快图像写入文件的速度。我基本上有一个 OpenGL 应用程序。在每个渲染循环结束时，我将帧缓冲区保存到图像文件中。](https://stackoverflow.com/questions/11520805/java-threads-in-opengl-application)

```
 fbo.readFrame();

   glReadPixels(0, 0, _viewportWidth, _viewportHeight, GL_RGBA, GL_UNSIGNED_BYTE, _data);
   _data.rewind(); //ByteBuffer
   new TImageExporter(ImageExporter.TGA, "renderings/", _data, _viewportWidth, _viewportHeight, true, _frameCount++).run(); 
```

TImageExporter 扩展了 Thread 并在“run()”方法中执行写入文件。令我惊讶的是，50 帧的渲染循环所用的时间几乎与我使用图像导出器的单线程版本一样。（3293 毫秒 - 多线程和 3437 毫秒使用单线程）。我在这里做错了什么？这是TImageExporter里面的代码：

```
public void export() {
    _pixels = new int[_width * _height];
    int bindex;
    int plenght = _pixels.length;
    // convert RGB data in ByteBuffer to integer array
    for (int i = 0; i < plenght; ++i) {
        bindex = i * 4;  //use 3 for RGB
          //// here write the pixels to RGBA/////
         ............
         .......................

    }

    _image.flush();
    _image.setRGB(0, 0, _width, _height, _pixels, 0, _width);
    _image = ImageUtils.flipY(_image);

    renderByFormatType();

}

private void renderByFormatType() {

    String formattedString = String.format(_formatString, _frameCount);

    if (_exportType.equals(TGA)) {
        try {
           writeTGA(_image, new File(_renderPath + "screenshot_test" + formattedString + ".tga"), _flipX);
        } catch (IOException ex) {
            Logger.getLogger(TImageExporter.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

}

@Override
public void run() {

        export();

} 
```

更新：人们在这里问我是否写入同一个文件。不，每个线程都写入一个全新的文件。

UPDATE1：设置一个全局静态变量，保存 BufferedImage 数组。现在每个新的 TImageExporter 将图像数据写入该数组到不同的索引。直接写入磁盘时，我得到的只是 3038 毫秒而不是 3437 毫秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:40:46.293

多线程不会加速文件传输，因为：

> 1.  当 1 个线程去保存它时，进行非线程安全的文件写入将覆盖其他线程正在写入的一些信息。
>     
>     
> 2.  磁盘 I/O 是您的瓶颈。最好的办法是将您想要的内容写入内存流（有人编辑并提供文档，我无法快速找到它）并允许它写入磁盘..这将允许持续的磁盘 i/o 而无需担心线程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T17:40:01.157

即使您的代码是多线程的；因为你所有的线程都试图访问同一个文件..它不会有太大的不同..因为在这种情况下，即使有很多线程正在运行；在某一时刻，除了 1 之外的所有内容都将等待获取对文件的写访问权限。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T22:27:45.843

为什么你认为它会更快？磁盘不是多线程的。

# c++ - 将 QProcess 与包含执行文件路径的字符串一起使用

> ID：11764553
> 
> 赞同：1
> 
> 时间：2012-08-01T17:35:00.420
> 
> 标签：c++, qt

我正在使用 Qt。谁能告诉我如何在里面使用字符串`QProcess`？为了更清楚，我正在制作一个图像转换器，其中我将 png 文件的目标文件路径转换为使用`QFileDialog`. 现在我有一个 exe 文件，它完成了 png 到 jpeg 的所有转换，我需要做这样的事情：

```
convertor.exe  path/to/png/file  path/for/storing/converted/output 
```

我如何在 Qt 中做到这一点？

```
QProcess conv;
conv.start("C:/converter.exe" ??) what to do here? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:54:35.997

您可以将参数作为 QStringList 提供给进程：

```
QStringList args;
args << "path/to/png/file" << "path/for/storing/converted/output";
QProcess conv;
conv.start("C:/converter.exe", args); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:56:31.193

QProcess 的参数在 QStringList 中传递：http: [//doc.qt.io/qt-4.8/qprocess.html#start](http://doc.qt.io/qt-4.8/qprocess.html#start)

```
QStringList args;
args << pathToPng << pathToOutput
QProcess conv;
conv.start("c:/converter.exe", args); 
```

# sql - 使用子查询进行分组和聚合

> ID：11764554
> 
> 赞同：1
> 
> 时间：2012-08-01T17:35:02.500
> 
> 标签：sql, sql-server-2008, group-by

我有一个查询，旨在查找不止一次去医院的人数。我有什么工作，但是有没有办法在没有子查询的情况下做到这一点？

```
SELECT count(*) as counts, hospitals.hospitalname 
    FROM  Patient INNER JOIN
    hospitals ON Patient.hospitalnpi = hospitals.npi
    WHERE     (hospitals.hospitalname = 'X')
    group by patientid, hospitalname
    having count(patient.patientid) >1
    order by count(*) desc 
```

这将始终返回正确的行数（30），而不是数字 30。如果我删除了，`group by patientid`那么我会返回整个结果集。

我通过这样做解决了这个问题

```
select COUNT(*),hospitalname 
from
(
    SELECT count(*) as counts,hospitals.hospitalname 
        FROM hospitals INNER JOIN
        Patient ON hospitals.npi = Patient.hospitalnpi
        group by patientid, hospitals.hospitalname
        having count(patient.patientid) >1

) t 
group by  t.hospitalname
order by t.hospitalname desc 
```

我觉得必须有一个比一直使用子查询更优雅的解决方案。如何改进？

```
sample data from first query
row #  revisits  
    1  2
    2  2
    3  2
    4  2

same data from second, working query
row#    hosp. name    revisitAggregate
1       x             30 
2       y             15 
3       z             5 
```

患者和医院之间简单的一对多关系

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:48:45.837

这是超级hacky，但你在这里：

```
SELECT TOP 1 
    ROW_NUMBER() OVER (order by patient.patientid) as Count
FROM  
    Patient 
    INNER JOIN hospitals 
        ON Patient.hospitalnpi = hospitals.npi
WHERE     
    (hospitals.hospitalname = 'X')
GROUP BY 
    patientid, 
    hospitalname
HAVING
    count(patient.patientid) >1
ORDER BY 
    Count desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:03:31.050

```
 select distinct hospitalname, count(*) over (partition by hospitalname) from (
    SELECT hospitalname, count(*) over (partition by   patientid,
    hospitals.hospitalname)   as counter
    FROM hospitals INNER JOIN
    Patient ON hospitals.npi = Patient.hospitalnpi
    WHERE     (hospitals.hospitalname = 'X')
    ) Z
    where counter > 1 
```

# iphone - YouTube - 自动播放

> ID：11764556
> 
> 赞同：0
> 
> 时间：2012-08-01T17:35:20.793
> 
> 标签：iphone, objective-c

我有一个 UIButton。按下此按钮时，我会加载带有 youtube 视频的 WebView：

```
- (IBAction)buttonAction:(id)sender {
    UIWebView *webView = [[UIWebView alloc] initWithFrame:[MyButton frame]];
    NSString *htmlString = @"<html> (...) </html>"; // HTML w/ the YouTube iFrame
    webView.mediaPlaybackRequiresUserAction = NO;
    [webView loadHTMLString:htmlString baseURL:nil];
    [self.view addSubView:webView];
} 
```

问题是，当它发生时，我有这个结果： ![在此处输入图像描述](../Images/471a2889c094fba7e121981e5ab1451c.png)

我想在加载 WebView 后立即开始播放视频。

任何提示/解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:37:40.677

我建议创建一个 html 页面，它是一个使用 youtube player api 的独立页面。由于您创建的 html 页面已经让 uiwebview 使用您创建的独立站点，然后您可以使用 youtube 播放器中内置的自动播放功能。我可以提供更多细节，但如果您不能使用独立的 html 网站作为您的选择，那么这将是一个毫无价值的答案，因此我添加的任何其他内容都对您没有帮助。

# android - 滚动画廊启用按下状态并从子项中删除点击侦听器

> ID：11764560
> 
> 赞同：9
> 
> 时间：2012-08-01T17:35:33.850
> 
> 标签：android, listview, scrollview, android-gallery

我有一个相当复杂的项目画廊。每个项目由一个图像和 2 个按钮组成。当画廊加载一切正常时，按钮会执行它们应该做的事情，并且按钮的按下状态仅在实际按下按钮时发生。

但是，一旦我滚动图库，按钮就会停止工作，并且单击任何位置都会启用按钮的按下状态。

我已经尝试将所有内容嵌入到一个不传递 OnDown 事件的 LinearLayout 中，但是，[这](https://stackoverflow.com/a/10899859/292851)只会阻止点击事件。

我知道 Gallery 不是像这样的复杂布局的理想小部件，但我想知道是否有更好的解决方法来解决这个问题。

**更新：**

我将尝试解释一下架构。我有一个包含 ListFragment 的 FragmentActivity，它仅由一个 ListView 组成。

ListView 由一组较小的元素（Bettable）以及一些元信息组成。这些组被实施为画廊。具体来说，我扩展了 Gallery（称为 OneGallery），它做了几件事，它确保一次只滚动一个项目，并在滚动发生时转换画廊项目。[这是代码](http://hastebin.com/gepayufuyo.java)

[这是画廊的适配器](http://hastebin.com/vabiduyejo.java)

这是[Bettable 布局的代码](http://hastebin.com/vatiqubiyo.java)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T23:03:10.410

尝试在子视图周围添加一个新的包装布局并覆盖 setPressed。画廊将停止将其状态传递给孩子，并且您描述的提到的不良行为将得到修复。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-01T20:41:40.193

这是视图回收。尝试使用 ViewHolder 模式并为每个 getView 调用设置项目状态。如果你想这样做，你必须在你的复杂对象中保持视图状态。例如，您的复杂对象包含 TextView、ImageView 和 CheckBox

```
public View getView(int position, View convertView, ViewGroup parent) {

    ComplexObject co = objects.get(position);

    // A ViewHolder keeps references to children views to avoid unneccessary calls
    // to findViewById() on each row.
    ViewHolder holder;

    // When convertView is not null, we can reuse it directly, there is no need
    // to reinflate it. We only inflate a new View when the convertView supplied
    // by ListView is null.
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.list_item_icon_text, null);

        // Creates a ViewHolder and store references to the two children views
        // we want to bind data to.
        holder = new ViewHolder();
        holder.text = (TextView) convertView.findViewById(R.id.text);
        holder.icon = (ImageView) convertView.findViewById(R.id.icon);
        holder.checkbox = (CheckBox)convertView.findViewById(R.id.checkbox);
        convertView.setTag(holder);
    } else {
        // Get the ViewHolder back to get fast access to the TextView
        // and the ImageView.
        holder = (ViewHolder) convertView.getTag();
    }

    // Bind the data efficiently with the holder.
    holder.text.setText(co.getText());
    holder.icon.setImageBitmap((position & 1) == 1 ? mIcon1 : mIcon2);
    holder.checkbox.setChecked(co.isChecked());

    holder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(CompoundButton compoundButton, boolean isChecked) {
                    co.setChecked(isChecked);
                }
            });

    return convertView;
}

protected class ViewHolder{
    TextView text;
    ImageView icon;
    CheckBox checkbox; 

} 
```

希望它会有所帮助

# grails - 将列表属性中的条目放入静态映射的 joinTable

> ID：11764563
> 
> 赞同：2
> 
> 时间：2012-08-01T17:35:53.693
> 
> 标签：grails, grails-orm

我有一个名为 FoapRequest 的域类。我希望称为“批准者”的属性之一是整数列表。顺序很重要，因此我将[http://grails.org/doc/latest/guide/GORM.html#sets,ListsAndMaps](http://grails.org/doc/latest/guide/GORM.html#sets,ListsAndMaps)描述的类定义为列表：

```
class FoapRequest {
    Integer requester
    Integer subject
    List approver
    static hasMany = [foap:FOAP, newFoap:NewFoap, approver:Integer]
... 
```

只是为了澄清，FOAP 和 NewFoap 是另外两个领域对象。

我需要将此类映射到 Oracle 数据库中的特定表，因此我还指定了一个带有连接表的静态映射：

```
static mapping = {
    table 'OUR_SCHEMA.FOAP_REQUEST_TABLE
    id column : 'ID',  generator:'sequence', params: [sequence:'OUR_SCHEMA.FOAP_REQUEST_SEQ']
    requester column : 'REQUESTER'
    subject column : 'SUBJECT'
    approver indexColumn: [name: "APPROVER_IDX"], generator:'sequence', params: [sequence:'OUR_SCHEMA.APPROVER_SEQ'], 
    joinTable: [name:'OUR_SCHEMA.APPROVER_TABLE',
    key: 'ASSOCIATED_REQUEST',
    column: 'APPROVER_PIDM',
    type: "integer"
    ] 
```

但是，当我尝试创建 FoapRequest 对象的新实例时，出现以下错误： `Invalid column type`

控制台显示以下内容： `Error 2012-08-01 12:29:31,619 [http-bio-8080-exec-9] ERROR errors.GrailsExceptionResolver - SQLException occurred when processing request: [POST] /FOAPauth/foapRequest/saveFoapRequests - parameters:`

我确信问题出在可连接件上。域模型最初不包括 joinTable——批准者只是一个整数类型（我意识到我需要跟踪多个批准者为时已晚）。

下面是创建 APPROVERS 表的 SQL：

```
CREATE TABLE "OUR_SCHEMA"."APPROVER_TABLE"
    (
    "APPROVER_IDX"        NUMBER(*,0) NOT NULL ENABLE,
    "ASSOCIATED_REQUEST"  NUMBER(*,0) NOT NULL ENABLE,
    "APPROVER_PIDM"       NUMBER(8),
    ); 
```

如果可能的话，我宁愿避免创建 Approver 域类，因为我真正需要跟踪的是整数标识符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:22:30.997

因此，在多次使用连接表后，我确定满足我需求的最佳方法是在我的域模型中简单地创建一个 Approver 对象。

```
class Approver {

Integer pidm
String  approvalDecision
Date lastUpdated
Date dateCreated

static belongsTo = [foap: FOAP]
} 
```

老实说，我不确定我为什么要如此努力地避免这种情况。可能是因为我的 DBA 对表定义使用版本控制系统，我觉得这很烦人。:)

无论如何，域类之间简单的一对多关系满足了我的所有需求，不需要连接表。

对于那些仍然想知道的人，我确实设法使用 Map 获得了一个静态映射的连接表，这更适合我的需求（尽管不像新的域类那样适合它们，而且几乎没有那么简单） .

我最终在不同的域对象中执行它——FOAP 而不是 FoapRequest：

```
import java.util.Map
class FOAP {
...
Map approvalData
...
static mapping = {
    table 'OURSCHEMA.FOAP_TABLE'
    id column : 'ID',  generator:'jpl.hibernate.util.TriggerAssignedIdentityGenerator'
    fund column : 'FUND'
    org column : 'ORG'
    chartOfAccounts column : 'CHART_OF_ACCOUNTS'
    permissionType column: 'PERMISSION_TYPE'
    foapRequest column: 'REQUEST_ID'
    version column : 'VERSION'
    approvalData joinTable: [name:'OURSCHEMA.FOAP_APPROVERS',
        key: 'FOAP'
    ]
} 
```

对于表定义，我使用了与原始问题中类似的列名。

```
CREATE TABLE "OUR_SCHEMA"."APPROVER_TABLE"
(
"FOAP"          NUMBER(*,0) NOT NULL ENABLE,
"APPROVER_IDX"  VARCHAR2(255),
"APPROVER_DLT"  NUMBER(8),
); 
```

IDX 列是地图对象的键，DLT 列是它的值。对于任何可以避免它的人，我建议不要使用这种方法。创建一个新的域对象要简单得多。

# javascript - 这些代码行是什么意思？

> ID：11764569
> 
> 赞同：-3
> 
> 时间：2012-08-01T17:36:38.697
> 
> 标签：javascript

我试图找出别人的代码。它是由 Javascript 编写的。我更熟悉Jquery。

我知道这是一个函数，但不确定这些参数是否适用于（imaglist、sucess、hobject）。谢谢您的帮助。

```
var mystuff = new Object();

var all_done = function (imagelist,success,hobject){
  //alert(success);

mystuff = imagelist.list;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:39:55.180

从技术上讲，它只是一个函数，以 imagelist、success 和 hobject 作为参数。所以你会这样称呼它：

```
all_done(anImagelist, somethingRepresentingSuccess, myHobject) 
```

但在这种情况下，看起来 all_done 是一个**回调函数**，当某事（此处未显示）完成时调用它。imagelist、success 和 hobject 是回调变量，它们是回调分配给的任何函数的结果。

假设我们有一个 ajax 调用，如下所示：

```
$.ajax({
   type: "POST",
   data: something,
   success: all_done
}); 
```

现在，当 ajax 调用完成时，它的结果（假设有 3 个）将传递给 all_done。真的，我什至不确定这是否可以通过 ajax 调用实现，但这个想法很重要。所以，当ajax调用完成后，`mystuff`会设置为imagelist.list；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:40:06.870

它是一个接受三个参数（`imagelist`、`success`和`hobject`）的函数。你可以调用它`all_done(some_list, some_state, some_object);`

这与编写这样的函数*基本*相同：

```
function all_done(imagelist, success, hobject) {
  // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T17:40:47.557

你有`mystuff` `Object`你可以附加任何你想要的属性。然后你有`all_done`哪个存储了一个接收的函数，`imagelist,success,hobject`当该函数被触发时，无论你发送给它什么，因为它`imagelist`也是一个必须包含该属性的对象，`list`它将附加到`mystuff` `Object`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T17:48:08.540

不确定，但它将一个函数存储到一个名为 all_done 的变量中。如果在您发布的代码之后立即调用了 all_done 函数，那么 mystuff 将变为 imagelist.list：

```
 var imagelist = {list:"myList"};
    var mystuff = new Object();
    var all_done = function (imagelist,success,hobject){
    //alert(success);
    mystuff = imagelist.list;
    }
    all_done(imagelist,true,null);
    alert(mystuff==imagelist.list);//should alert true
    alert(mystuff);//should alert myList 
```

# .net - 如何将绑定源过滤器重置为空

> ID：11764574
> 
> 赞同：1
> 
> 时间：2012-08-01T17:36:52.987
> 
> 标签：.net, winforms, c#-4.0, bindingsource, bindinglist

`BindingSource`在 LINQ to SQL 上使用，并`BindingList`在我的项目中实现了 a ，我必须使用 a`Textbox`来过滤 a 中的行`DataGridView`，所以当我删除文本框内容时，应该将 Filter 重置为空。

我的代码如下：

```
if (textBox1.Text.Length == 0)
{
    productBindingSource.Filter = null;
}
else
{
    productBindingSource.Filter = "ProductName = '" + textBox1.Text +"'";
    //productBindingSource.RemoveFilter();
}
productDataGridView.DataSource = productBindingSource; 
```

但这无济于事，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:39:45.207

试试这样：

```
if (textBox1.Text.Length == 0) {
  productBindingSource.RemoveFilter();
} else {
  productBindingSource.Filter = "ProductName = '" + textBox1.Text +"'";
}

// productDataGridView.DataSource = productBindingSource; 
```

如果 DataGridView 已经在使用 productBindingSource，则不需要再次对其进行 DataSourced。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T18:38:31.387

[http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.filter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.filter.aspx)

如图所示，这`bindingsource.Filter`是一个字符串值。默认值为空，所以只需执行以下操作：

```
productBindingSource.Filter = null; 
```

尽管您可能必须做一些事情来更新您的 UI，但通常 bindingSource 会自行处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T01:05:46.870

I found that "Find" method cannot be used directly with BindingList, but fortunately there is an alternative, using IEnumerable. After Implementing a BindingList in the project, I can filter a bound datagridview using the next code:

```
 private void button1_Click(object sender, EventArgs e)
    {
        var qry = (from p in dc.Products
                   select p).ToList();
        BindingList<Product> list = new BindingList<Product>(qry);
        IEnumerable<Product> selection = list.Where(m => m.ProductName.Contains(textBox1.Text) == true);
        productBindingSource.DataSource = selection;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-14T13:02:58.607

我假设您在 TextChanged 事件中测试文本框是否为空。当文本长度 = 0 时，可能没有调用您的方法。我不记得确切原因，但我以前经历过这种情况。

如果您使用的是您编写的 BindingList，请提供代码。RemoveFilter，将 Filter 设置为 null 或空字符串一直对我有用。

# python - 旋转窗口后的 Python 2.7.3 + OpenCV 2.4 不适合图像

> ID：11764575
> 
> 赞同：16
> 
> 时间：2012-08-01T17:36:56.913
> 
> 标签：python, python-2.7, opencv

我正在尝试将图像旋转几度，然后将其显示在窗口中。我的想法是旋转，然后在一个新窗口中显示它，新窗口的宽度和高度是根据旧的宽度和高度计算的：

```
new_width = x * cos angle + y * sin angle
new_height = y * cos angle + x * sin angle 
```

我期待结果如下所示：

![在此处输入图像描述](../Images/dbd48f11c7f6a3eeb67f09865969f535.png)

但结果是这样的：

![在此处输入图像描述](../Images/8e8d308a0ba948f04fda5a14d868d1d1.png)

我的代码在这里：

```
#!/usr/bin/env python -tt
#coding:utf-8

import sys
import math
import cv2
import numpy as np 

def rotateImage(image, angle):#parameter angle in degrees

    if len(image.shape) > 2:#check colorspace
        shape = image.shape[:2]
    else:
        shape = image.shape
    image_center = tuple(np.array(shape)/2)#rotation center

    radians = math.radians(angle)

    x, y = im.shape
    print 'x =',x
    print 'y =',y
    new_x = math.ceil(math.cos(radians)*x + math.sin(radians)*y)
    new_y = math.ceil(math.sin(radians)*x + math.cos(radians)*y)
    new_x = int(new_x)
    new_y = int(new_y)
    rot_mat = cv2.getRotationMatrix2D(image_center,angle,1.0)
    print 'rot_mat =', rot_mat
    result = cv2.warpAffine(image, rot_mat, shape, flags=cv2.INTER_LINEAR)
    return result, new_x, new_y

def show_rotate(im, width, height):
#    width = width/2
#    height = height/2
#    win = cv2.cv.NamedWindow('ro_win',cv2.cv.CV_WINDOW_NORMAL)
#    cv2.cv.ResizeWindow('ro_win', width, height)
    win = cv2.namedWindow('ro_win')
    cv2.imshow('ro_win', im)
    if cv2.waitKey() == '\x1b':
        cv2.destroyWindow('ro_win')

if __name__ == '__main__':

    try:
        im = cv2.imread(sys.argv[1],0)
    except:
        print '\n', "Can't open image, OpenCV or file missing."
        sys.exit()

    rot, width, height = rotateImage(im, 30.0)
    print width, height
    show_rotate(rot, width, height) 
```

我的代码中一定有一些愚蠢的错误导致了这个问题，但我想不通......而且我知道我的代码不够pythonic :( ..抱歉..

谁能帮我？

最好的，</p>

熊熊

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-10-20T21:45:41.070

正如 BloodyD 的回答所说，`cv2.warpAffine`转换后的图像不会自动居中。相反，它只是使用变换矩阵变换每个像素。（这可以将像素移动到笛卡尔空间中的任何位置，包括原始图像区域之外。）然后，当您指定目标图像大小时，它会抓取该大小的区域，从 (0,0) 开始，即左上角原来的框架。转换后的图像中不在该区域内的任何部分都将被截断。

这是用于旋转和缩放图像的 Python 代码，结果居中：

```
def rotateAndScale(img, scaleFactor = 0.5, degreesCCW = 30):
    (oldY,oldX) = img.shape #note: numpy uses (y,x) convention but most OpenCV functions use (x,y)
    M = cv2.getRotationMatrix2D(center=(oldX/2,oldY/2), angle=degreesCCW, scale=scaleFactor) #rotate about center of image.

    #choose a new image size.
    newX,newY = oldX*scaleFactor,oldY*scaleFactor
    #include this if you want to prevent corners being cut off
    r = np.deg2rad(degreesCCW)
    newX,newY = (abs(np.sin(r)*newY) + abs(np.cos(r)*newX),abs(np.sin(r)*newX) + abs(np.cos(r)*newY))

    #the warpAffine function call, below, basically works like this:
    # 1\. apply the M transformation on each pixel of the original image
    # 2\. save everything that falls within the upper-left "dsize" portion of the resulting image.

    #So I will find the translation that moves the result to the center of that region.
    (tx,ty) = ((newX-oldX)/2,(newY-oldY)/2)
    M[0,2] += tx #third column of matrix holds translation, which takes effect after rotation.
    M[1,2] += ty

    rotatedImg = cv2.warpAffine(img, M, dsize=(int(newX),int(newY)))
    return rotatedImg 
```

[![在此处输入图像描述](../Images/f764b6fd5e031dfcf38283699883b438.png)](https://i.stack.imgur.com/AJV6O.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T06:53:47.873

当你得到这样的旋转矩阵时：

```
rot_mat = cv2.getRotationMatrix2D(image_center,angel,1.0) 
```

您的“比例”参数设置为 1.0，因此如果您使用它将图像矩阵转换为相同大小的结果矩阵，它必然会被剪裁。

您可以改为获得这样的旋转矩阵：

```
rot_mat = cv2.getRotationMatrix2D(image_center,angel,0.5) 
```

它会旋转和收缩，在边缘留出空间（你可以先放大它，这样你仍然会得到一个大图像）。

此外，您似乎混淆了图像大小的 numpy 和 OpenCV 约定。OpenCV 使用 (x, y) 来表示图像大小和点坐标，而 numpy 使用 (y,x)。这可能就是您要从纵向到横向纵横比的原因。

我倾向于像这样明确地说明它：

```
imageHeight = image.shape[0]
imageWidth = image.shape[1]
pointcenter = (imageHeight/2, imageWidth/2) 
```

ETC...

最终，这对我来说很好：

```
def rotateImage(image, angel):#parameter angel in degrees
    height = image.shape[0]
    width = image.shape[1]
    height_big = height * 2
    width_big = width * 2
    image_big = cv2.resize(image, (width_big, height_big))
    image_center = (width_big/2, height_big/2)#rotation center
    rot_mat = cv2.getRotationMatrix2D(image_center,angel, 0.5)
    result = cv2.warpAffine(image_big, rot_mat, (width_big, height_big), flags=cv2.INTER_LINEAR)
    return result 
```

**更新：**

这是我执行的完整脚本。只是 cv2.imshow("winname", image) 和 cv2.waitkey() 没有参数来保持它打开：

```
import cv2

def rotateImage(image, angel):#parameter angel in degrees
    height = image.shape[0]
    width = image.shape[1]
    height_big = height * 2
    width_big = width * 2
    image_big = cv2.resize(image, (width_big, height_big))
    image_center = (width_big/2, height_big/2)#rotation center
    rot_mat = cv2.getRotationMatrix2D(image_center,angel, 0.5)
    result = cv2.warpAffine(image_big, rot_mat, (width_big, height_big), flags=cv2.INTER_LINEAR)
    return result

imageOriginal = cv2.imread("/Path/To/Image.jpg")
# this was an iPhone image that I wanted to resize to something manageable to view
# so I knew beforehand that this is an appropriate size
imageOriginal = cv2.resize(imageOriginal, (600,800))
imageRotated= rotateImage(imageOriginal, 45)

cv2.imshow("Rotated", imageRotated)
cv2.waitKey() 
```

那里真的不多......`if __name__ == '__main__':`如果它是你正在处理的真正模块，那么你绝对是正确的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-16T09:32:08.533

好吧，这个问题似乎不是最新的，但我遇到了同样的问题，花了一段时间才解决它，而没有放大和缩小原始图像。我将发布我的解决方案（不幸的是 C++ 代码，但如果需要，它可以很容易地移植到 python）：

```
#include <math.h>
#define PI 3.14159265
#define SIN(angle) sin(angle * PI / 180)
#define COS(angle) cos(angle * PI / 180)

void rotate(const Mat src, Mat &dest, double angle, int borderMode, const Scalar &borderValue){

    int w = src.size().width, h = src.size().height;

    // resize the destination image
    Size2d new_size = Size2d(abs(w * COS((int)angle % 180)) + abs(h * SIN((int)angle % 180)), abs(w * SIN((int)angle % 180)) + abs(h * COS((int)angle % 180)));
    dest = Mat(new_size, src.type());

    // this is our rotation point
    Size2d old_size = src.size();
    Point2d rot_point = Point2d(old_size.width / 2.0, old_size.height / 2.0);

    // and this is the rotation matrix
    // same as in the opencv docs, but in 3x3 form
    double a = COS(angle), b = SIN(angle);
    Mat rot_mat   = (Mat_<double>(3,3) << a, b, (1 - a) * rot_point.x - b * rot_point.y, -1 * b, a, b * rot_point.x + (1 - a) * rot_point.y, 0, 0, 1);

    // next the translation matrix
    double offsetx = (new_size.width - old_size.width) / 2,
           offsety = (new_size.height - old_size.height) / 2;
    Mat trans_mat = (Mat_<double>(3,3) << 1, 0, offsetx , 0, 1, offsety, 0, 0, 1);

    // multiply them: we rotate first, then translate, so the order is important!
    // inverse order, so that the transformations done right 
    Mat affine_mat = Mat(trans_mat * rot_mat).rowRange(0, 2);

    // now just apply the affine transformation matrix
    warpAffine(src, dest, affine_mat, new_size, INTER_LINEAR, borderMode, borderValue);
} 
```

一般的解决方法是将**旋转****后**的图片旋转平移到正确的位置。所以我们创建了两个变换矩阵（第一个用于旋转，第二个用于平移）并将它们相乘到最终的仿射变换。由于 opencv 的 getRotationMatrix2D 返回的矩阵只有 2x3，因此我必须以 3x3 格式手动创建矩阵，以便它们可以相乘。然后只取前两行并应用仿射变换。

 ****编辑**：我创建了一个要点，因为我在不同的项目中经常需要这个功能。它还有一个 Python 版本：[https ://gist.github.com/BloodyD/97917b79beb332a65758](https://gist.github.com/BloodyD/97917b79beb332a65758)**

# python - 同时提交多个表单（编辑个人资料页面）

> ID：11764579
> 
> 赞同：0
> 
> 时间：2012-08-01T17:37:08.147
> 
> 标签：python, google-app-engine, profile

我想我的问题很简单。基本上，我有个人资料。它传入了许多变量。例如，名称、用户名、个人资料图片以及许多其他由各自页面更新的变量。因此，将使用一个页面来更新个人资料图片，并且该表单会将表单中的数据提交给处理程序，并将其 put() 到数据库。我在这里尝试做的是将用于编辑配置文件的所有表单同时放在一个页面上。

我需要一个巨大的处理程序来处理那个页面吗？当我点击页面底部的“保存”时，如何避免覆盖未修改的数据？目前，假设我有 5 个配置文件变量，它们映射到 5 个处理程序，以及 5 个包含各自表单的单独页面。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:47:24.387

我在我的大多数 webapps 上都使用了 django，但概念应该是一样的；每当用户点击提交（并且表单返回 false）时，我使用 ajax 将数据发送到后端，以便用户可以继续编辑它。使用 ajax，您可以将数据发送到后端的不同处理程序。此外，使用 jQuery，您可以设置标志以查看字段是否已更改，以避免首先发送 ajax 消息。Ajax 请求的行为几乎与标准 HTTP 请求完全相同，但我相信标头指示 AJAX。

如果您正在查看严格的后端，那么您将需要在后端执行多个“if”语句，并一次检查一个字段以查看它是否已更改。在后端，您仍然应该能够调用其他处理程序（向它们传递相同的请求）。

# algorithm - 找出金字塔结构中第 i 个杯子里的水量？

> ID：11764582
> 
> 赞同：7
> 
> 时间：2012-08-01T17:37:18.193
> 
> 标签：algorithm, data-structures, graph

这个问题是在论坛上问的。有什么建议么？

有一个金字塔，第 1 层有 1 个杯子，第 2 层有 2 个，第 3 层有 3 个，依此类推。它看起来像这样

> ```
>  1
>  2 3
> 4 5 6 
> ```

每个杯子的容量为 C。你从顶部倒 L 升水。当杯子 1 装满时，它会均匀地溢出到杯子 2,3，当它们装满时，杯子 4 和 6 只从 2 和 3 分别得到水，但 5 会从两个杯子中取水，依此类推。现在给定 C 和 L。找出第 i 杯中的水量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T19:07:24.653

每个玻璃杯都有一个*流入流*，玻璃杯中*的水量*，可能还有一些*流出流*（溢出）。

如果每个玻璃杯可以装 1 个单位的水，而你倒了 15 个单位的水，你会得到以下结果（括号中的溢出量）：

```
Incoming flow = 15, capacity = 1

Level 1:               1(14)
Level 2:           1(6)     1(6)
Level 3:       1(2)     1(5)     1(2)
Level 4:    1(1)   1(2.5)  1(2.5)    1(1)
Level 5:   1  1(0.75)  1(1.5)  1(0.75)   1
Level 6:  0 0.375 1(0.125) 1(0.125) 0.375 0
Level 7: 0 0  0.0625   0.125    0.0625   0 0 
```

到第一层的流入流量为 L。来自*一层*玻璃的*流入流量*为，可写为：`c``r``Fin(c, r)`

```
Fin(0, r) = 0
Fin(r+1, r) = 0
Fin(1, 1) = L
Fin(c, r) = Fout(c - 1, r - 1)/2 + Fout(c, r - 1)/2 
```

该玻璃杯*中的水量*为：

```
A(c, r) = Min(C, Fin(c, r)) 
```

*流出*的流量是：

```
Fout(c, r) = Max(0, Fin(c, r) - C) 
```

`A(c, r)`如果不递归地进行评估，我看不到任何明显的公式。

* * *

要从索引到行和玻璃位置，您可以执行以下操作：

```
index = r*(r-1)/2 + c

r = floor((1 + sqrt(8*index - 7))/2)
c = index - r*(r-1)/2

(indexes start with 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:42:04.587

一些想法：（1）重要的是知道哪两个杯子是第 i 个杯子的输入。(2) 重要的是要知道从左侧为您提供水的最小 Lleft 以及从右侧为您提供水的 Lright 的高度 (3) 所以您需要知道哪些杯子为第 i 个杯子提供水。如果你从 0 开始编号，这更容易，思考得更快。第 i 个杯子将填充 (i-1)*2+1 和 i*2，这意味着第 k 个杯子将从 (for k%2=1) ( k-1)/2 和 (k+1)/2 (对于 k%2=0) k/2 和 k/2+1 (4) 你应该检查一下对于任何 L 你将计算 L- Lleft 和 L-Lright。当为正时，提供的水是计算出的差除以 2^n 的结果，其中 n 是杯子的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:37:17.053

如果将金字塔建模为图形，则问题将转换为广度优先搜索。当您遍历每个节点时，获取其邻居并存储它们的溢出量。如果一个邻居已经被前一个节点检索到（这将在 5 个节点的情况下发生，因为节点 2 和节点 3 有一条边），您将必须根据其容量和已填充的内容更新溢出（通过节点 2；假设节点 2 在节点 3 之前被遍历）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-26T04:03:51.433

计算二项式系数的帕斯卡三角解可以用来解决这个问题。我们只需要稍微调整算法，而不是计算二项式系数，而是计算水位。给定第 i 个杯子，我们计算水平和指数以找出杯子在三角形中的位置。

杯子被建模为

```
 0         Level 1
  1   2       Level 2
3   4   5     Level 3 
```

getIndex() 和 getLevel() 返回索引和级别。索引和级别从 1 开始。

```
public static int getIndex(int i) {
    int totalNodes = i + 1;
    double d = (-3 + Math.sqrt(9 - 8*(1-totalNodes)))/2;
    int level = (int)Math.floor(d);
    int total = ((level+1)*(level+2))/2;
    int index = 0;
    if(total==totalNodes) index = level;
    else{
        level++;
        index = totalNodes - total - 1;
    }

    return ++index;
}

public static int getLevel(int i) {
    int totalNodes = i + 1;
    double d = (-3 + Math.sqrt(9 - 8*(1-totalNodes)))/2;
    int level = (int)Math.floor(d);
    int total = ((level+1)*(level+2))/2;
    int index = 0;
    if(total==totalNodes) index = level;
    else{
        level++;
        index = totalNodes - total - 1;
    }

    return ++level;
} 
```

k 是从 0 开始的第 k 个杯子。C 是杯子容量，L 是总水量。

```
public static double getWaterLevel(double C, double L, int k) {
    int n = getLevel(k);
    int index = getIndex(k);
    double[] water = new double[index+1];

    water[1] = L;

    for(int i = 2; i <= n; i++)
    {
        boolean overflowed = false;

        for(int j = Math.min(i, index); j > 0; j--) {
            double over = 0;
            if(water[j]>C) over = (water[j]-C)/2;
            if(water[j-1]>C) over += (water[j-1]-C)/2;

            water[j] = over;

            if(!overflowed && over!=0) overflowed=true;
        }

        if(!overflowed) break; // no more overflow. stop 
    }

    return water[index] > C ? C : water[index];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-15T05:25:13.133

这是另一种简单的解决方案，只需将水倒入当前的玻璃杯中，然后检查是否有多余的水，然后流到下一个水平。在这里，我使用了 2D Mat 来倒水。然后我将 2D 垫子转换为 1D 尺寸等于第 i 个元素/玻璃，我们需要返回并返回它。实施明智，这是一个非常简单的解决方案。

```
private double fillWaterInGlasses(double capacity, double water , int glassToFind) {
    int maxLevel = (int)(water/capacity)/2 + 1;
    double[][] glasses = new double[maxLevel][maxLevel];
    // Pour total water in top glass initially.
    glasses[0][0] = water;
    int level=0;
    boolean waterInLevel = true;
    while(waterInLevel) {
        waterInLevel = false;
        // For each glass in the level.
        for(int j=0; j<=level; j++) {
            // If the glass has more liquid then it can store then pour it to glasses under it.
            if(glasses[level][j] > capacity) {
                double extraWater = glasses[level][j] - capacity;
                glasses[level][j] = capacity;
                glasses[level+1][j] += extraWater / 2;
                glasses[level+1][j+1] += extraWater / 2;
                waterInLevel = true;
            }
        }
        level++;
    }
    double res[] = new double[glassToFind];
    int k =0;
    for (int i = 0; i < glasses.length; i++) {
        for (int j = 0; j <= i; j++) {
            res[k] = glasses[i][j];
            if (k == glassToFind-1){
                return res[glassToFind-1];
            }
            k++;
        }
    }
    return res[glassToFind-1];
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-01-08T10:33:29.910

这是一个简单易懂的实现：

```
public class main {
    static float total_water = 50;
    static int N = 20;
    static glass[][] pyramid = new glass[N][N];

    public static void main(String[] args) {
        build_pyramid();
        pour_water(0, 0, total_water);
        print_pyramid();
        print_total_water_stored();
    }

    private static void print_total_water_stored() {
        float total = 0;
        for (int i = 0; i < N; i++) {
            for (int j = 0; j <= i; j++)
                total += pyramid[i][j].filled;
        }
        System.out.println("total water stored= " + total);
    }

    private static void pour_water(int row, int col, float water) {
        if (water >= (pyramid[row][col].capacity - pyramid[row][col].filled)) {
            water -= (pyramid[row][col].capacity - pyramid[row][col].filled);
            pyramid[row][col].filled = pyramid[row][col].capacity;
            pour_water(row + 1, col, water / 2);
            pour_water(row + 1, col + 1, water / 2);
        } else {
            pyramid[row][col].filled += water;
        }
    }

    public static void build_pyramid() {
        for (int i = 0; i < N; i++) {
            for (int j = 0; j < N; j++)
                pyramid[i][j] = new glass(1);
        }
    }

    public static void print_pyramid() {
        for (int i = 0; i < N; i++) {
            for (int j = 0; j <= i; j++)
                System.out.print(pyramid[i][j].filled + " ");
            System.out.println();
        }
    }
}

class glass {
    float capacity;
    float filled;

    glass(float cap) {
        capacity = cap;
        filled = 0;
    }
} 
```

# java - 单击图像时显示说明

> ID：11764584
> 
> 赞同：0
> 
> 时间：2012-08-01T17:37:22.500
> 
> 标签：java, android

对不起我的英语不好！需要帮忙！我制作了一些程序，在单击按钮后显示随机图像。用户单击后如何为每个图像进行描述？

程序显示随机图像，当用户单击它时，我如何在新窗口中为每个图像进行描述？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:46:45.677

好吧，您可以使用`setOnClickListener`按钮上的方法来做您想做的事。

```
final TextView label = (TextView)findViewById(R.id.some_text_label);

button.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
        label.setText("Hello, World!");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:47:19.733

这里有一个提示。

使用列表或哈希图并创建自定义类来保存图像和图像数据。（评论员的更改）

利用`Math.Random();//Random the id numbers`

学习的东西：研究按钮事件和查看鳍状肢事件

这是一个例子：

我使用**weakhashmap**和改进的想法我建议保存位置而不是位图（浪费内存）。

```
private WeakHashMap<int, Image> whp = new WeakHashMap<Int, Image>
private int position = 0;

public void onCreate{
    //Do download information or store images from sd card
    //Place it in image class

    loop amount of images{
        image Image = new image(Bitmap_Image, Image_Description);//load image
        whp.add(position, Image);//Note the amount of positions the image is field
        position++;
    }

    //To get bitmap use "whp.get(position).image" <- This code returns a bitmap

    setOnClickListener//Create event to listen on clicked image
    {
        int image_random = new Random().nextInt(position);
        String data = whp.get(image_random).note_item;//Image Description
    }
}

class image{

    Bitmap image;//Actual Image
    String note_item;//Image description

    public void image(Bitmap intake_image, String intake_description){

        this.image = intake_image;
        this.note_item = intake_description;

    }

} 
```

# javascript - 通过gm使用Express.js上传的流文件消除双重写入

> ID：11764585
> 
> 赞同：5
> 
> 时间：2012-08-01T17:37:29.527
> 
> 标签：javascript, node.js, express, graphicsmagick

我正在使用`Express.js`并有一条上传图片的路线，然后我需要调整它们的大小。目前我只是让`Express`文件写入磁盘（我认为`node-formidable`在幕后使用），然后使用`gm`（http://aheckmann.github.com/gm/）调整大小，它将第二个版本写入磁盘。

```
gm(path)
  .resize(540,404)
  .write(dest, function (err) { ... }); 
```

我读过您可以在将`node-formidable`文件流写入磁盘之前获取文件流，并且由于`gm`可以接受流而不仅仅是路径，因此我应该能够通过消除对磁盘的双重写入来传递这一权利。

我想我需要覆盖`form.onPart`，但我不确定在哪里（应该作为`Express`中间件完成？）而且我不确定如何获取`form`或如何处理`part`. 这是我在几个地方看到的代码骨架：

```
form.onPart = function(part) {
    if (!part.filename) { form.handlePart(part); return; }

    part.on('data', function(buffer) {

    });
    part.on('end', function() {

    }
} 
```

有人可以帮我把这两部分放在一起吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T18:28:50.080

通过重写，您走在了正确的轨道上`form.onPart`。强大的默认写入磁盘，所以你想在它之前采取行动。

部件本身就是流，因此您可以将它们通过管道传输到您想要的任何内容，包括`gm`. 我还没有测试过，但是根据文档这是有道理的：

```
var form = new formidable.IncomingForm;
form.onPart = function (part) {
  if (!part.filename) return this.handlePart(part);

  gm(part).resize(200, 200).stream(function (err, stdout, stderr) {
    stdout.pipe(fs.createWriteStream('my/new/path/to/img.png'));
  });
}; 
```

至于中间件，我会`multipart`从 Connect/Express 复制粘贴中间件并将`onPart`函数添加到其中：[http ://www.senchalabs.org/connect/multipart.html](http://www.senchalabs.org/connect/multipart.html)

`formidable`如果默认情况下不写入磁盘或者带有标志，那会好得多，不是吗？您可以向他们发送问题。

# bash - 将错误重定向到unix中的文件

> ID：11764586
> 
> 赞同：0
> 
> 时间：2012-08-01T17:37:33.747
> 
> 标签：bash, shell, unix

我知道你必须使用...

```
php lots_of_errors.php > temp.txt 2>&1 
```

...如果您想将错误日志重定向到 temp.txt

*   1 = 标准输出（程序打印正常输出）
*   2 = 标准错误（程序打印错误）

你`&1`用来表示它是一个文件描述符而不是一个文件，但你为什么不在 2 前面使用 & 签名`&2>&1`呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T17:40:36.137

因为`&`符号是 shell 如何知道您正在重定向到文件描述符而不是文件的方式。`>`也就是说，运算符的左侧（LHS）*始终*是文件描述符，而 RHS 通常是文件名。所以这：

```
2>1 
```

将文件描述符 2 重定向到名为“1”的文件。& 号是 shell 如何知道您的意思是“文件描述符 1”：

```
2>&1 
```

# database - 数据库设计复合键困境

> ID：11764587
> 
> 赞同：0
> 
> 时间：2012-08-01T17:37:36.043
> 
> 标签：database, er-diagrams

在为多对多关系设计表时，[1](https://i.stack.imgur.com/xqMdf.jpg)边主键将出现在中间表的[M]边，我当前的中间表是

```
Salesline : Itemid(PK), SOId(PK), userid(PK) 
```

或者

```
Salesline : Itemid(PK), SOId(PK), 
userid_salesorder(PK) , // links to the salesorder.userid attribute 
userid_item(PK) // links to the item.userid attribute 
```

哪个是正确的方法？

![ERD](../Images/cd3d036cbd9b1f03d96a4180b06b6deb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:55:02.493

看起来您的实体之间的自然关系是：

*   一个用户可以放置 0 个、1 个或多个 SalesOrders
*   一个 SalesOrder 可能包含 1 个或多个 SalesLines
*   一个 SalesLine 正好对应于 1 个项目
*   可以在多个 SalesOrders 上订购一个项目

我建议打破 User 和 Item 表之间的关系，并将订购的特定项目的数量移动到 SalesLine 表。User、SalesOrder 和 Item 应该有简单的，可能是代理的主键。SalesLine 的主键可能是复合的，由 SalesOreder 表的外键和订单中的行号组成。

# java - 对具有原始数字返回类型的方法的反思

> ID：11764588
> 
> 赞同：9
> 
> 时间：2012-08-01T17:37:37.593
> 
> 标签：java, reflection, primitive-types

我目前正在开发一个小型框架来收集 OSGi 系统中的指标。它的核心是一个注解@Metric，表示服务的给定方法在被询问时可以传递一个度量（例如数值）。

这些方法看起来像：

```
@Metric
public int getQueueSize() {...} 
```

或者

```
@Metric
public double getAvgTaskTime() {...} 
```

我正在使用反射来检查服务实现类并注册使用`@Metric`. 作为健全性检查，我正在检查该方法是否确实提供了一个数值。我试过这个但失败了：

```
for (Method method: metricSource.getClass().getMethods()) {
    if (method.isAnnotationPresent(Metric.class) &&  Number.class.isAssignableFrom(method.getReturnType()) { 
        // add method for later process
    } 
```

然后，稍后在处理器上，我会这样做：

```
Number value = (Number) method.invoke(target, obj[]); 
```

事实证明，对于原始类型，您会得到 eg`int.class`并且不能分配给 Number.class 而装箱类型 Integer.class 会。该死。继续。

然后我创建了一个`Map<Class<?>, Extractor>`where Extractor 接受一个类并将一个参数转换为该类：

```
public NumberExtractor(Class<? extends Number> clazz) {
    this.clazz = clazz;
    }       
    public double extract(Object val) {
        Number nbr = clazz.cast(val);
        return nbr.doubleValue();
    }
} 
```

面对之前的观察，我添加了这样一个条目：

```
extractorMap.put(int.class, new NumberExtractor(int.class)); 
```

但这也没有用。它给出了一个运行时类转换异常，说 Integer.class 不能转换为 int。另请注意，编译器不会抱怨`new NumberExtractor(int.class)`，让边界检查`Class<? extends Number>`通过`int.class`

最后，这种组合奏效了：

```
extractorMap.put(int.class, new NumberExtractor(Integer.class)); 
```

这里发生了什么？反射说对象（int.class）的返回类型不能分配给Number.class，但是当我继续调用方法时，我实际上得到了一个Integer.class？威士忌探戈狐步舞？！

我想知道除了维护 int -> Integer、Integer -> Integer、float -> Float、Float -> Float 的 Map 之外，是否还有其他方法可以解决这个问题？（现在已经完成了，所以这是为了学习）

装箱和类型信息的行为在这里似乎不一致。

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T17:50:57.900

> 反射说对象（int.class）的返回类型不能分配给Number.class，但是当我继续调用方法时，我实际上得到了一个Integer.class？

绝对地。反射 API*不可能*返回一个实际的`int`，所以它把值装在一个`Integer`. 它还能做什么？

它必须装箱的事实*不会*将可分配性从`int`to改变`Number`。查看[文档`isAssignableFrom`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29)：

> 如果此 Class 对象表示原始类型，则如果指定的 Class 参数正是此 Class 对象，则此方法返回 true；否则返回false。

所以它的行为完全符合文档。

> 我想知道除了维护 int -> Integer、Integer -> Integer、float -> Float、Float -> Float 的 Map 之外，是否还有其他方法可以解决这个问题？（现在已经完成了，所以这是为了学习）

是的，这听起来对我来说是正确的。或者只是有一个`Set<Class>`原始数字类型而不是显式映射。

# c# - While 循环没有中断用户在 WPF（C#）中给出的信号

> ID：11764592
> 
> 赞同：0
> 
> 时间：2012-08-01T17:37:43.293
> 
> 标签：c#, wpf, user-controls

我有一个 WPF，它执行用于串行通信的 GUI。我想继续触发设备并重新获取值，直到用户说停止。我有一个全局布尔变量 STOP，当用户按下停止时我将其设置为 false，这反过来应该终止持续触发设备的 while 循环，但问题是一旦用户选择运行 while 循环的运行按钮，WPF应用程序冻结并且不接受 STOP 按钮单击。

有人可以给我一个关于这里发生的事情的想法或关于如何以不同方式实施它的任何建议。

这是我的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.IO.Ports;
using Keyence.data_class;
using Microsoft.Win32;
using System.IO;
using Keyence;
using System.Threading;

namespace Keyence
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public static string filePath;
        public static string fileName;
        public static int baudrate = 9600;
        public static string thresHold = "60";
        public bool STOP = true;
        public static char[] buffer = new char[256];
        public static string x, y, match;
        public static string value;
        public static SerialPort port = new SerialPort("COM4", baudrate, Parity.None, 8, StopBits.One);

        public MainWindow()
        {

            InitializeComponent();

            //port.DataReceived
            //SerialPort port = new SerialPort(COM, baudrate, Parity.None, 8, StopBits.One);
            port.Open();
            port.NewLine = "\r";
            //*******display camera types*****
            string[] cameraTypes = new string[] { "CVseries100 ", "CVseries500" , "CVseries700" };
            foreach (string cam in cameraTypes)
            {
                camera_type.Items.Add(cam);
            }
            //*******select your trigger mode( default is set to NONE)*******
            string[] triggerModes = new string[] { "triggerModeNone", "triggerModeDATA", "triggerModeRepeat" };
            foreach(string trigger in triggerModes)
            {
                trigger_mode.Items.Add(trigger);
            }
            //*****put a default value for thresHold********
            threshold_value.Text = thresHold;

            //*******add values to the baudrate dropdown********
            baud_rate.Items.Add("9600");
            baud_rate.Items.Add("19200");
            baud_rate.Items.Add("38400");

            port.DataReceived += new SerialDataReceivedEventHandler(port_DataReceived);

        }

        public static void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
        {
            SerialPort sp = (SerialPort)sender;
            value = sp.ReadTo("\r");
            string[] values = value.Split(new char[] { ',' });
            x = values[0];
            y = values[1];
            match = values[2];
        }

        //public static void get_data()
        //{
        //    port.Write("T");
        //}

        #region encapsulates all the individuals functions when the user changes settings ( UI interaction functions)

        private void get_sample_Click(object sender, RoutedEventArgs e)
        {
            //write code to read x,y,threshold values in the text boxes
            port.Write("T");
            //MainWindow.get_data();
            x_value.Text = string.Format("{0}", x);
            y_value.Text = string.Format("{0}", y);
            thresholdvalue.Text = string.Format("{0}", match);
        }

        #region the method opens a savefileDialog(dataFile) and lets user save the file in which data is stored
        public void data_file_Click(object sender, RoutedEventArgs e)
        {
            SaveFileDialog dataFile = new SaveFileDialog();
            dataFile.DefaultExt = ".txt";
            dataFile.InitialDirectory = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
            dataFile.RestoreDirectory = true;
            dataFile.Title = "select or create a new file";
            DateTime currentTime = DateTime.Now;
            dataFile.Filter =  " Text Document |*.txt | Excel |*.xls";
            string datepatt = @"M-d-yy_hh-mm_Data";
            string saveDT = currentTime.ToString(datepatt);
            dataFile.FileName = saveDT;
            Nullable<bool> result = dataFile.ShowDialog();
            if (result == true)
            {
                filePath = dataFile.FileName;
                fileName = dataFile.SafeFileName;
            }

            System.IO.FileStream fs = (System.IO.FileStream)dataFile.OpenFile();
            using (StreamWriter Write = new StreamWriter(fs))
            {
            Write.WriteLine("Wafer Placement Data\n\n");
            Write.WriteLine("File Name : {0}\n", fileName);
            Write.WriteLine("Port Name : COM4\n");
            Write.WriteLine("Threshold : {0}\n", threshold_value.Text);
            Write.WriteLine("Date : {0}\n\n", Convert.ToString(DateTime.Now));
            //************Print Header to the file******************
            Write.WriteLine("\tX\tY\tcorrelation\tDate\n");
            }
        }
        #endregion

        #region function called when the threshold value is changed
        private void threshold_value_TextChanged(object sender, TextChangedEventArgs e)
        {
            thresHold = threshold_value.Text;
        }
        #endregion

        #region function to write individual data points on the window for checking
        private void writeSample(double X, double Y, double threshold)
        {
            FileStream file = new FileStream(filePath, FileMode.Append, FileAccess.ReadWrite);
            using (StreamWriter Writer = new StreamWriter(file))
            {
                Writer.WriteLine(DateTime.Now);
                Writer.WriteLine("\t X \t Y\t threshold% ");
            }
        }
        #endregion

        private void run_button_Click(object sender, RoutedEventArgs e)
        {

            do
            {

                port.Write("T");
                FileStream file = new FileStream(filePath, FileMode.Append, FileAccess.Write);
                Thread.Sleep(500);
                using (StreamWriter Writer = new StreamWriter(file))
                {
                    Writer.WriteLine("\t{0}\t{1}\t{2}\t{3}", x, y, match, Convert.ToString(DateTime.Now));
                }
                port.DiscardInBuffer();
            } while (STOP);
        }

        private void stop_button_Click(object sender, RoutedEventArgs e)
        {
            STOP = false;
        }

        private void command_TextChanged(object sender, TextChangedEventArgs e)
        {
            string C = command.Text;
            port.WriteLine(C);
        }
       #endregion

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:43:29.537

您需要在单独的线程中运行您的串行端口代码。在您的实现中，GUI 线程正忙于串行端口通信，这就是您的窗口被冻结的原因。以下文章准确解释了您需要什么： [http ://www.ryanvice.net/wpf-3-5/using-backgroundworker-with-wpf/](http://www.ryanvice.net/wpf-3-5/using-backgroundworker-with-wpf/)

# matlab - 有没有办法使用中心柱前后的柱子进行分析？

> ID：11764594
> 
> 赞同：0
> 
> 时间：2012-08-01T17:37:50.120
> 
> 标签：matlab, matrix

我正在尝试对具有不同列数的数据集进行分析，但每次使用我的方程时我需要使用 3 列。我想使用数据集中的所有列（第一列和最后一列除外，因为它们不起作用）但我需要选择一个中心列、之前的列和之后的列。我需要实现这些方程：

```
lower_actual = lower_original - dark;
lower_avg = sum(lower_actual)/length(lower_actual);
lower_gain = lower_avg./lower_actual;

upper_actual = upper_original - dark;
upper_avg = sum(upper_actual)/length(upper_actual);
upper_gain = upper_avg./upper_actual;

middle_actual = middle_original - dark;

x1 = lower_actual;
x2 = middle_actual;
x3 = upper_actual;
y1 = lower_gain;
y3 = upper_gain;
y2 = (((x2-x1).*(y3-y1))./(x3-x1))+y1;
interpolate = y2.*middle_actual; 
```

在这些方程中，变量与以下相关：

```
lower = column before
middle = center column
upper = column after
dark = first column in data set 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:10:37.673

您可以使用[HANKEL](http://www.mathworks.com/help/techdoc/ref/hankel.html)函数生成所有三个连续列的所有可能索引（第一列和最后一列除外）：

例子：

```
>> X = rand(10,7);
>> idx = hankel((1:3)+1, 3+1:size(M,2)-1)
idx =
     2     3     4
     3     4     5
     4     5     6 
```

每列按该顺序为您提供 X 列的一个组合的前/中/后的索引：

```
interpolate = zeros(size(X,1), size(idx,2));
for i=1:size(idx,2)
    ind = idx(:,i);
    xLower = X(:,ind(1));
    xMiddle = X(:,ind(2));
    xUpper = X(:,ind(3));

    %# perform calculations
    interpolate(:,i) = ...;
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:49:34.077

假设您在矩阵上工作`M`，例如

```
M = randn(10, 7); 
```

只需遍历跳过第一个和最后一个的列。

```
interpolate = zeros(size(M, 1), size(M, 2) - 2);
dark = M(:, 1);
% Loop over the columns. Do not use the first and the last column as
% center columns.
for idx = 2 : size(M, 2) - 2
    lower_original = M(:, idx);
    middle_original = M(:, idx + 1);
    upper_original = M(:, idx + 2);

    % Your computations.
    lower_actual = lower_original - dark;
    lower_avg = mean(lower_actual);
    lower_gain = lower_avg./lower_actual;

    upper_actual = upper_original - dark;
    upper_avg = mean(upper_actual);
    upper_gain = upper_avg./upper_actual;

    middle_actual = middle_original - dark;

    x1 = lower_actual;
    x2 = middle_actual;
    x3 = upper_actual;
    y1 = lower_gain;
    y3 = upper_gain;
    y2 = (((x2-x1).*(y3-y1))./(x3-x1))+y1;

    interpolate(:, idx - 1) = y2.*middle_actual;
end 
```

获取的最大列索引为`size(M, 2) - 3 + 2 == size(M, 2) - 1`，即最后一列将被跳过。

# c# - C# winform，使用 Microsoft.DirectX.AudioVideoPlayback dll 中的视频/音频类后应用程序崩溃

> ID：11764597
> 
> 赞同：1
> 
> 时间：2012-08-01T17:38:03.080
> 
> 标签：c#, winforms, directx, audiovideoplayback

我正在使用我的应用程序中的一些音频文件（mp3、wav、..etc）我正在使用 Microsoft.DirectX.AudioVideoPlayback dll 中的音频类所以首先我必须下载 dll，这样做之后，我去了**添加引用** 然后我浏览到 dll 位置，并添加它我还安装了**DirectX 9.0 Web 安装程序**

`Audio aud;` 现在，我只是说：但如果我做这样的事情，我没有任何问题：

```
Audio aud = new Audio(path); 
```

或者

```
Video vid = new Video(path); 
```

如果我按下`Ctrl+F5`应用程序将立即崩溃，如果我尝试调试，我只是看不到调试光标，如果我一直按 F10 什么都不会发生.. 我把它放在一个`try/catch`块中，它没有抛出异常..

怎么回事？我怎样才能解决这个问题 ？

我什至尝试制作一个全新的应用程序，这是整个代码，其中没有任何内容：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Microsoft.DirectX.DirectSound;
using Microsoft.DirectX.AudioVideoPlayback;
using Microsoft.DirectX;

namespace WindowsFormsApplication2
{
  public partial class Form1 : Form
  {
    public Form1()
    {
      InitializeComponent();
      Audio aud = new Audio("C:\\Users\\vexe\\Desktop\\Songs\\Kimosabe.mp3");
    }
  }
} 
```

任何帮助将不胜感激..提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:20:27.040

将此代码添加到您的项目中：

```
using Microsoft.DirectX.DirectSound
using Microsoft.DirectX 
```

# java - 正确使用 JRSwapFileVirtualizer？

> ID：11764598
> 
> 赞同：2
> 
> 时间：2012-08-01T17:38:06.563
> 
> 标签：java, jasper-reports, export

我正在导出一个非常大的碧玉报告（大约 20000 页）。为此，为了避免内存不足错误，正如不同网站所建议的那样，我正在使用 JRSwapFileVirtualize，如下所示：

```
virtualizer = new JRSwapFileVirtualizer(1000, new JRSwapFile(reportFilePath, 2048, 1024), true);
parameters.put(JRParameter.REPORT_VIRTUALIZER, virtualizer);
.
.
JasperPrint print = JasperFillManager.fillReport(report, parameters, list);
virtualizer.cleanup(); 
```

我的问题是：

1）我将maxSize配置为1000，20000页的报表可以吗？

2）我在方法调用“fillReport”后立即清理虚拟器。是否正确，或者我需要在将报告导出到 XLS 后清理虚拟器？

3）无论如何在导出报告后清理虚拟器，对我有帮助吗？

4) 创建 JasperPrint 对象，逻辑写在服务器端。导出报表逻辑，是用java客户端写的。如果我应该清理虚拟器，在导出报告后，我该如何处理这种情况？因为在这种情况下，我需要在服务器端创建此虚拟器的静态对象（因为 JRSwapFileVirtualizer 不可序列化，因此我无法在服务器和客户端之间创建并传递它），然后在导出后再次调用服务器端方法进行清理虚拟机。我在想创建静态对象是有风险的，因为如果对服务器端逻辑进行多次调用，那么虚拟器静态对象将保存对最新调用创建的交换文件的引用，因此在清理之后，以前的交换文件可能不会被删除.

我找到了有关此主题的更多信息：在 jasper 提供的使用虚拟器的示例中，他们仅在调用 common export 时清理虚拟器，它导出了多种类型的文件。当他们只导出单一类型的报告时，他们没有调用清理：

```
else if (TASK_CSV.equals(taskName))
{
    exportCSV(jasperPrint);
}       
else if (TASK_EXPORT.equals(taskName))
{
    exportPDF(jasperPrint);
    exportXML(jasperPrint, false);
    exportHTML(jasperPrint);
    exportCSV(jasperPrint);

    // manually cleaning up
    virtualizer.cleanup();
} 
```

他们也没有在这个例子中提到 XLS 导出。我找到了另一个链接，该人遇到了同样的问题，但也没有提到解决方案：

[http://www.jasperforge.org/plugins/espforum/view.php?group_id=102&forumid=103&topicid=95689](http://www.jasperforge.org/plugins/espforum/view.php?group_id=102&forumid=103&topicid=95689)

此链接还说我们可以改用 JRXlsxExporter 。但是 JRXlsxExporter 只导出 excel 2007 格式而不是 2003 格式。

我正在使用 JExcelApiExporter.exportReport() 将报告导出到 XLS，对于大型报告它不起作用。请帮我解决这个问题。任何小的提示或建议都是可以理解的。如果您需要更多信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:13:34.510

1.对于您的第一个问题，这实际上取决于您为报告生成应用程序提供了多少堆大小。尝试试错方案，您将获得准确的尺寸

对于你的第二个问题

2.根据您的第一个代码片段，您正在填写报告并立即在虚拟器上应用清理。因此，即使您创建了报告，清理后您的交换文件也将被销毁并且因为您的数据。-- 一旦确认报告数据使用完成，您应该在虚拟器上应用清理。所以在这种情况下，在导出为特定格式后。

3.cleanup 是立即销毁交换文件。因此，如果您不打算在导出后重用报告，则应用清理是最好的主意。注意：即使您没有明确地清理它，垃圾收集器也会在处理 jasperPrint 时将其销毁。

你的第四点对我来说很不清楚，你是说 jasperPrint 一直在服务器端创建......并且导出逻辑是在客户端编写的......导出逻辑如何在客户端没有参考 JasperPrint，哪个在服务器端....??1!!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:51:31.657

好的..当您应用fillReport时，您的所有数据集（记录）将保存在jvm（堆空间）中，导出器将在导出为任何格式时使用它。

在这里，如果您的数据集大小比 jvm 的大小增加，您将被 outOfMemeryError 挂起，因此 virtualizer(FileVirtualizer & swapfile) 将帮助您将这些数据集存储到文件中，而不是使用 jvm 内存（最终它使用序列化来存储数据集归档）。

关于文章：这是正确的，它在填充报告时使用：因此，在填充（调用 fillReport）时将一些对象存储在内存中，这些对象需要即时访问并使用虚拟器保留到文件中。因此，当您尝试访问剩余记录时（使用导出器选项进行分页），JasperPrint 将从文件中获取这些记录，并根据需要交换未使用的页面。

在这里，我只说 abt JRFileVirtualizer JRSwapFileVirtualizer。在 JRGzipVirtualizer 的情况下，存储将在内存中但压缩格式。如果您没有直接访问磁盘的权限，将使用哪个。

# java-me - 使用 J2ME，是否可以通过编程方式将电话直接发送到语音信箱？

> ID：11764602
> 
> 赞同：0
> 
> 时间：2012-08-01T17:38:15.670
> 
> 标签：java-me

我正在为支持 J2ME 的特定手机编写应用程序。它将作为服务在后台运行。我需要能够根据事件从服务中弹出到前台并将任何来电重定向到语音邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:12:14.017

还不如算了。使用 J2ME 无法实现这样的目标。

# drupal - “Drush up”自动运行更新

> ID：11764603
> 
> 赞同：0
> 
> 时间：2012-08-01T17:38:20.723
> 
> 标签：drupal, drush

在一个 Drupal 站点中，我运行“Drush up”来升级一些模块，虽然我不想全部升级，所以我选择退出它。但是，Drush 仍然自动运行数据库更新。这是通常的行为吗？

当涉及到`Do you wish to run all pending updates? (y/n):`“y”时，由 Drush 填写。这怎么能被禁用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:57:21.647

仅更新代码是 [`drush pm-updatecode`](http://drush.ws/help/5#pm-updatecode)或`pm upc`简称。

`drush up`= 更新 Drupal 核心和贡献项目并应用任何挂起的数据库更新（与 pm-updatecode + updatedb 相同）。

# asp.net - 将 checkboxlist 选定项目作为连接字符串传递

> ID：11764604
> 
> 赞同：1
> 
> 时间：2012-08-01T17:38:25.293
> 
> 标签：asp.net, vb.net, .net-2.0, concatenation, checkbox

我正在尝试将 asp.net（vs 2005/.net 2.0）中复选框列表中的选定项目作为连接字符串传递。

目前我的 .aspx 是

```
 <asp:CheckBoxList id="checkbox1" AutoPostBack="False" AppendDataBoundItems="true" CellPadding="5" CellSpacing="5" RepeatColumns="1" RepeatDirection="Vertical" RepeatLayout="Flow" TextAlign="Right" runat="server">
            <asp:ListItem Value="1">Carrots</asp:ListItem>
            <asp:ListItem Value="2">Lettuce</asp:ListItem>
            <asp:ListItem Value="3">Olives</asp:ListItem>
            <asp:ListItem Value="4">Onions</asp:ListItem>
            <asp:ListItem Value="5">Tomato</asp:ListItem>
            <asp:ListItem Value="6">Pickles</asp:ListItem>
        </asp:CheckBoxList> 
```

.aspx.vb 是（在 Protected Sub 内提交）

```
 For Each li As ListItem In checkbox1.Items
        If li.Selected = True Then
            checkbox1.Text = checkbox1.Text + "," + li.Text
        End If
    Next 
```

哪个是通过

```
checkbox1.Text = dv(0)("Salad").ToString() 
```

当我选择并保存时，我目前收到一个错误

## “/”应用程序中的服务器错误。

“checkbox1”有一个无效的 SelectedValue，因为它不存在于项目列表中。

参数名称：值

关于如何连接所选复选框项目的任何想法

例如，如果有人选择胡萝卜、生菜和番茄；

```
checkbox1 = 1,2,5 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T17:59:06.153

我不认为你正在分配一个变量，就像你描述你要返回的那样。

```
string list = "";
For Each li As ListItem In chkQ4.Items
        If li.Selected = True Then
            list = list + "," + li.Text
        End If
    Next 
```

是你应该如何写上面的行。

在使用 linq 的 C# 中，我会写

```
var list =  checkbox1.Items
.Cast<ListItem>()
.Where(item => item.Selected == true)
.Select(item => item.Value);
var result = string.Join(",",list); 
```

我相信这是VB中的以下内容

```
Dim list = checkbox1.Items.Cast(Of ListItem)().Where(Function(item) item.Selected = True).[Select](Function(item) item.Value)
Dim result = String.Join(",", list.ToArray()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:13:45.197

这是一个小例子

标记：

```
<asp:CheckBoxList ID="CheckBoxList1" runat="server">
<asp:ListItem Value="1">Carrots</asp:ListItem>
<asp:ListItem Value="2">Apples</asp:ListItem>
<asp:ListItem Value="3">Lettuce</asp:ListItem>        
</asp:CheckBoxList>
<br />
<asp:Literal ID="Literal1" runat="server"></asp:Literal><br />
<br />
<asp:Button ID="Button1" runat="server" Text="Concatenate" /><br />
<asp:Button ID="Button2" runat="server" Text="Save" /> 
```

代码隐藏：

```
 Private Sub SaveItems(ByVal strItems As String)

    Dim cn As New SqlConnection("user id=sa;password=abcd;database=BD_Test;server=SERVNAME")
    Dim cmd As New SqlCommand("Insert into CheckItems values (@ItemId)", cn)
    Dim cmdPar As New SqlParameter("@ItemId", SqlDbType.Char, 1)

    If strItems.Split(",").Length > 0 Then

        cmd.Parameters.Add(cmdPar)
        Using cn
            cn.Open()
            Using cmd 
            ''Split the existing selected values, store it in an array 
            ''and iterate to get each element of it to save it in the DB
            For Each strItem As String In strItems.Split(",")                    
                    cmd.Parameters("@ItemId").Value = strItem
                    cmd.ExecuteNonQuery()                    
            Next
            End Using  
            Me.Literal1.Text = "Items saved"
        End Using

    End If

End Sub

Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click

    Me.Literal1.Text = ""

    For Each l As ListItem In Me.CheckBoxList1.Items

        ''Concatenate keeping the order of the items in your CheckboxList
        If l.Selected Then
            Me.Literal1.Text = Me.Literal1.Text & l.Value & ","
        End If

    Next

    ''Remove the final "," in case its at the end of the string 
    ''to avoid db issues and selected items issues
    If Right(Me.Literal1.Text, 1) = "," Then
        Me.Literal1.Text = Left(Me.Literal1.Text, Me.Literal1.Text.Length - 1)
    End If

    ''You can also save the items directly after concatenating
    ''Me.SaveItems(Me.Literal1.Text)

End Sub

Protected Sub Button2_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button2.Click

    Me.SaveItems(Me.Literal1.Text)

End Sub 
```

预期的结果是在页面文字上具有项目的选定值：

```
1,3 
```

希望这可以帮助。

# css - 背景问题 IE7 v7.0 vs IE7 v8.0 FACEBOOK bug（见答案）

> ID：11764606
> 
> 赞同：0
> 
> 时间：2012-08-01T17:38:36.377
> 
> 标签：css, background, internet-explorer-7

我正在使用跨浏览器兼容性，修复了 IE7 和 IE8 可修复的所有内容。但似乎 CMS 调用的背景存在轻微（巨大）问题。看起来，在 IE7 v8.0 中没有问题，但在 IE7 v7.0 中，大多数页面看起来都移到了一边，但在其他页面中却没有。我认为这是因为我对一些丢失的位置进行了修复，但是当我在右侧搜索丢失的对象时，却没有。而且我不知道如何让这个 bg 看起来正确。

请帮我！我要疯了！页面： [http ://www.tvazteca.com/homes/laislaelreality](http://www.tvazteca.com/homes/laislaelreality)

我认为问题在于背景位置。我不能让它适用于 IE7。

```
<body class="fondo-pagina" data-twttr-rendered="true">

<style type="text/css">
    .fondo-pagina {background:url(http://static.tvazteca.com/imagenes/2012/29/1634805.jpg)  no-repeat; background-position: 50% 40px;background-color:#0b4a51; 
    *background-position: 50% 0 !important;
     }
        .bgBottom{background:url() bottom center no-repeat;}
</style> 
```

上面的样式由 CMS 自动添加。虽然我在样式表中有相同的类：

```
.fondo-pagina{
background: url(../img/fondoislaEtapa1.jpg) top center no-repeat;background-color: #0b4a51;
*overflow-x:hidden;background-position: 50% 0px!important;
*background-position: 50% 0px!important; } 
```

我无法让它工作。我知道我在使用 hack，这不是最好的选择，但我被要求只为该站点使用一个样式表，因此 IE7-IE8 的另一个样式表是不可能的。

如何让 IE7 读取背景位置？是不是因为双考而发疯？

使用 Chrome 和 FF，元素检查器我发现没有任何背景位置分类被用于 IE。

TY 阅读 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:47:35.403

我发现了问题。Html php 和我的 Css 没有任何问题 问题来自 FACEBOOK：

```
<script>
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id))      {js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
</script> 
```

脚本必须放在包含喜欢/评论等的 div 中。否则它会在 IE 中发疯。它打开了一个大 div，强制页面被包含并扩展水平滚动条。结果，背景将采用与基础宽度相同的宽度，并将其自身定位在该物体的 50% 0px 上。

它只影响 IE 版本。其他浏览器工作正常。

# javascript - 单击链接时突出 显示工具提示中的文本

> ID：11764607
> 
> 赞同：2
> 
> 时间：2012-08-01T17:38:47.230
> 
> 标签：javascript, hyperlink, twitter-bootstrap, tooltip, href

当用户单击短网址锚点时，我想突出显示工具提示中的文本，以便他可以复制粘贴它。工具提示由 Twitter Bootstrap 提供，标记如下所示：

```
<div class="shorturl">
    <a href="#" rel="tooltip_r" data-original-title="http://tmblr.co/ZPPojuQzc9bb">Short URI</a>
</div> 
```

我发现这个片段我认为它可以正常工作，只是我还没有弄清楚如何处理链接的点击（它不会滚动并突出显示工具提示中的文本）。

```
function selectText() {
    if (document.selection) {
    var range = document.body.createTextRange();
        range.moveToElementText(document.getElementByClass('tooltip'));
    range.select();
    }
    else if (window.getSelection) {
    var range = document.createRange();
    range.selectNode(document.getElementByClass('tooltip'));
    window.getSelection().addRange(range);
    }
} 
```

我怎样才能使这项工作？输入非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:41:45.580

这就是我对你的建议：[现场演示（jsfiddle）](http://jsfiddle.net/Sherbrow/Enc76/)

```
var selector = '[rel="tooltip_r"]';  // Links that will have the feature
var tooltipOptions = {               // Some options for the tooltips (careful if you override the "defaults" set below)
    placement: 'right'
};
var attribute = 'data-url';          // Attribute where to find the url, could be href

/* Be sure of what you are doing if you modify below this */
$elts = $(selector);
var defaultOptions = {
        trigger: 'manual',
        title: '<input type="text" readonly="readonly"/>'
};
var opts = $.extend({}, defaultOptions, tooltipOptions);

$elts.each(function() {
    var $this = $(this);
    var url = $this.attr(attribute);
    $this.tooltip(opts);
    $this.on('click.tooltip',function(e) {
        $this.tooltip('show');
        $this.data('tooltip').$tip.find('input').val(url).select()
            .on('click', function(e){ e.stopPropagation(); });
        e.preventDefault();
        e.stopPropagation();
    });
});

$('html').on('click.tooltip', function() {
    $elts.tooltip('hide');
}); 
```

您可能会使用一些样式来改进工具提示中的输入。例如 ：

```
.tooltip .tooltip-inner > input[type="text"] {
    background: transparent;
    border: none;
    max-width: 100%;
    width: auto;
    padding: 0;
    color: inherit;
} 
```

## 更新

如果您在动态加载的内容中需要相同的功能，则需要使用[委托事件。](http://api.jquery.com/on/#direct-and-delegated-events)这是一个工作[jsfiddle](http://jsfiddle.net/Sherbrow/Enc76/9/)。

```
var selector = '[rel="tooltip_r"]';  // Links that will have the feature
var tooltipOptions = {               // Some options for the tooltips (careful if you override the "defaults" set below)
    placement: 'right'
};
var attribute = 'data-url';          // Attribute where to find the url, could be href    
var onClass = 'on';                  // Class used to determine which tooltips are displayed

/* Be sure of what you are doing if you modify below this */
var defaultOptions = {
        trigger: 'manual',
        title: '<input type="text" readonly="readonly"/>'
};
var opts = $.extend({}, defaultOptions, tooltipOptions);
var selectorOn = selector+'.'+onClass;

$('body').on('click.tooltip', selector, function(e) {
    var $this = $(this);
    var url = $this.attr(attribute);
    $this.data('tooltip') || $this.tooltip(opts);
    $this.tooltip('show').addClass(onClass);
    $this.data('tooltip').$tip.find('input').val(url).select()
        .on('click', function(e){ e.stopPropagation(); });
    e.preventDefault();
    e.stopPropagation();
})
  .on('click.tooltip', function() {
    var $elts = $(selectorOn);
    $elts.tooltip('hide');
}); 
```

# asp.net - radcombobox 总是在回发时选择顶部项目

> ID：11764610
> 
> 赞同：1
> 
> 时间：2012-08-01T17:38:57.880
> 
> 标签：asp.net, telerik, radcombobox

我有一个编辑页面，我在其中根据从数据库返回的值设置 radcombobox (rcb_ParentCompany) 的选定索引。但是，在回发时，组合框中的文本会不断更改为数据集中的顶部项目。任何想法为什么？

```
protected void Page_Load(object sender, EventArgs e)
    {
         if (IsPostBack)
         {
             BindOperatingNameComboBox(rcb_OperatingName);
             BindParentCompanyComboBox(rcb_ParentCompany);
         }
    }

protected void btn_Edit_Command(object sender, CommandEventArgs e)
    {
        Client ClientToEdit = ClientController.ViewClient(int.Parse(e.CommandArgument.ToString()));

        //Populate Client fields
        txt_ClientName.Text = ClientToEdit.ClientName;
        rcb_OperatingName.Text = ClientToEdit.OperatingName;
        int ParentCompanyIndex = rcb_ParentCompany.FindItemIndexByValue(ClientToEdit.ParentCompanyID.ToString());
        rcb_ParentCompany.SelectedIndex = ParentCompanyIndex;
        txt_Address1.Text = ClientToEdit.Address1;
        txt_Address2.Text = ClientToEdit.Address2;
        txt_Country.Text = ClientToEdit.Country;
        txt_Region.Text = ClientToEdit.Region;
        txt_City.Text = ClientToEdit.City;
        txt_PostalCode.Text = ClientToEdit.PostalCode;
        txt_ClientNote.Text = ClientToEdit.ClientNote;

        tbl_EditServices.Controls.Clear();
        PopulateEditClientPanel(ClientToEdit);

        btn_SaveChanges.CommandArgument = e.CommandArgument.ToString();
        btn_Cancel.CommandArgument = e.CommandArgument.ToString();
    }

protected void BindParentCompanyComboBox(RadComboBox ComboBox)
    {
        DataTable OperatingNames = ClientController.GetExistingClientAndOperatingNames("");
        ComboBox.DataTextField = "ClientName";
        ComboBox.DataValueField = "ClientID";
        ComboBox.DataSource = OperatingNames;
        ComboBox.DataBind();
    }

protected void rcb_ParentCompany_ItemsRequested(object sender, RadComboBoxItemsRequestedEventArgs e)
    {
        BindParentCompanyComboBox((sender as RadComboBox));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:52:57.937

> 任何想法为什么？

是的，因为你正在做`if(IsPostBack)`而不是`if(!IsPostBack)`

# java - AsyncHttpClient (Java) onComplete()：onCompleted() 是否在单独的线程上运行？

> ID：11764614
> 
> 赞同：3
> 
> 时间：2012-08-01T17:39:22.660
> 
> 标签：java, asynchttpclient

查看 Java 库[AsyncHttpClient](https://github.com/sonatype/async-http-client)中的代码块，客户端启动一个新线程 (a `Future`) 来发出请求。回调会发生在同一个线程上，还是会在“主”线程上运行（在这种情况下，`new AsyncHttpClient()`是被调用的线程？

```
import com.ning.http.client.*;
import java.util.concurrent.Future;

AsyncHttpClient asyncHttpClient = new AsyncHttpClient();
asyncHttpClient.prepareGet("http://www.ning.com/ ").execute(new AsyncCompletionHandler<Response>(){

    @Override
    public Response onCompleted(Response response) throws Exception{
        // Do something with the Response
        // ...
        return response;
    }

    @Override
    public void onThrowable(Throwable t){
        // Something wrong happened.
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:54:15.610

> 客户端启动一个新线程 (a `Future`) 来发出请求。

没有。基本的`Future`意思是：这个方法已经返回但是它还没有完成处理。处理将在后台继续（在您无法控制的其他线程中），并将在*未来*的某个时间完成。您可以询问该`Future`对象以查看未来是否已经到来（处理完成）。您自己没有创建任何线程。

想想`ExecutorService`。您正在提交一些要完成的任务并等待结果。但是，您不会阻塞，而是`Future`会在您提交的任务到达线程池并被处理后立即返回结果。

> 回调会发生在同一个线程上，还是会在“主”线程上运行

两者都不。当响应返回时，您的线程（调用的线程`AsyncHttpClient.execute()`）很可能正在做一些完全不同的事情。也许它为另一个客户服务或者已经死了。您不能只代表*某个*线程调用任意代码。

实际上，这段代码将由 AsyncHttpClient 库创建的内部 NIO 线程执行。你完全无法控制这个线程。但是您必须记住，这将异步发生，因此如果您访问全局对象，可能需要同步或某些锁定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T17:54:04.643

您可以通过那段代码检查：

```
import java.io.IOException;

import com.ning.http.client.AsyncCompletionHandler;
import com.ning.http.client.AsyncHttpClient;
import com.ning.http.client.Response;

public class Asink {

    public static void main(String... args) throws IOException {
        AsyncHttpClient asyncHttpClient = new AsyncHttpClient();
        asyncHttpClient.prepareGet("http://www.google.com/").execute(
                new AsyncCompletionHandler<Response>() {

                    @Override
                    public Response onCompleted(Response response)
                            throws Exception {
                        // Do something with the Response
                        // ...
                        String threadName = Thread.currentThread().getName();
                        System.out.println(threadName);
                        return response;
                    }

                    @Override
                    public void onThrowable(Throwable t) {
                        // Something wrong happened.
                    }
                });
    }
} 
```

# php - 缩短重复代码

> ID：11764615
> 
> 赞同：0
> 
> 时间：2012-08-01T17:39:27.103
> 
> 标签：php, arrays, if-statement, foreach

我怎样才能使这段代码更短？例如使用 foreach。

```
 if($Email == NULL){
        $Email = "-";
    }
    elseif($Age == NULL){
        $Age = "-";
    }
    elseif($Sex == NULL){
        $Sex = "-";
    } 
```

它必须像这样替换

```
$search = array("%UserID%", "%RegDate%", "%Name%", "%Email%", "%Age%", "%Gender%");
$replace = array($UserID, $RegDate, $Name, $Email, $Age, $Sex);
$content = str_replace($search, $replace, $content); 
```

**编辑：**

我现在已经这样了，是否也可以在三元代码中使用 $variable = $row ？顺便说一句，我有一个 variables.php 文件，我在其中使用三元代码进行定义，我已经在那里尝试过，但是因为它之前被使用过，所以它没有用，我没有想到：P

但是这个当前的代码有效，我只是想知道它是否可以更短。

```
while($row = mssql_fetch_assoc($accountinforesult)){
    $UserID = $row['UserID'];
    $RegDate = $row['RegDate'];
    $Name = $row['Name'];
    $Email = $row['Email'];
    $Age = $row['Age'];
    $Sex = $row['Sex'];

    $UserID = isset($UserID) ? $UserID : "-";
    $RegDate = isset($RegDate) ? $RegDate : "-";
    $Name = isset($Name) ? $Name : "-";
    $Email = isset($Email) ? $Email : "-";
    $Age = isset($Age) ? $Age : "-";
    $Sex = isset($Sex) ? $Sex : "-";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:50:29.230

未经测试，但我相信这应该有效。

```
$vars = array('UserID', 'RegDate', 'Name', 'Email', 'Age', 'Sex');
foreach ($vars as $k => $v) {
    $$v = ($$v !== NULL) ? $$v : '-';
} 
```

$$v 表示“名称为 $v 的变量”。如果 $v = 'foo' 那么 $$v 就是 $foo。

看“变量变量”： http: [//php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:51:18.560

```
$Email = is_null($Email) ? "-" : $Email; 
```

你想剩下的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T17:51:31.553

我现在已经这样了，是否也可以在三元代码中使用 $variable = $row ？顺便说一句，我有一个 variables.php 文件，我在其中使用三元代码进行定义，我已经在那里尝试过，但是因为它之前被使用过，所以它没有用，我没有想到：P

但是这个当前的代码有效，我只是想知道它是否可以更短。

```
while($row = mssql_fetch_assoc($accountinforesult)){
    $UserID = $row['UserID'];
    $RegDate = $row['RegDate'];
    $Name = $row['Name'];
    $Email = $row['Email'];
    $Age = $row['Age'];
    $Sex = $row['Sex'];

    $UserID = isset($UserID) ? $UserID : "-";
    $RegDate = isset($RegDate) ? $RegDate : "-";
    $Name = isset($Name) ? $Name : "-";
    $Email = isset($Email) ? $Email : "-";
    $Age = isset($Age) ? $Age : "-";
    $Sex = isset($Sex) ? $Sex : "-";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T17:52:59.640

```
$params = array(
  'Email' => $Email,
  'Age' => $Age,
  'Gender' => $Sex,
);

foreach($params as $paramName => $paramValue) {
  $paramValue = is_null($paramValue) ? '-' : $paramValue;
  //$paramValue = mysql_real_escape_string($paramValue); // or something like that...
  $content = str_replace('%'.$paramName.'%', $paramValue, $content);
} 
```

# java - android项目的巨大java类，如何拆分它？

> ID：11764618
> 
> 赞同：3
> 
> 时间：2012-08-01T17:39:37.730
> 
> 标签：java, android, class, android-activity

在 C++ 中，我习惯于使用范围解析运算符 (::) 将类拆分为多个文件，但在 java 中，似乎不可能在多个文件之间拆分一个类。

我读过类不应该超过几百行，但这听起来像是那些不编写重要应用程序的人的意识形态废话。

我正在编写一个工业 Android 应用程序（不是针对消费者，而是针对使用专业测试和测量设备以及通过蓝牙链接的应用程序的技术人员），我的几​​个 android 活动的长度超过 1000 行，我什至还没有接近完成的。主要活动超过 6000 行，我希望它会变得更长......它变得非常笨拙，就像我说的，在 C++ 中，我只会在多个源文件中逻辑拆分类，但我想这不是选项在这里。

是否有任何替代方法可以减少我的源文件的长度而不实际删除代码（这不是一个选项......）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T17:49:30.600

有一个超过一百行的类是可以接受的（我写的大多数类都超过 100 行）。问题是，处理一种面向对象的语言，应该尽可能多地进行分类，以使代码`maintainable`和. 祝你的应用好运！`intuitive``readable`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T17:43:20.333

您可以子类化您的类。创建一个具有核心功能的基类并将其子类化。所以你可以有几个文件，最后你只有一个可以使用的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T17:44:04.623

您仍然可以使用组合和实现技术。Java*包*与 C++*命名空间相同*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T17:53:41.200

为什么不尝试在不同的类中分离常见的东西，然后在你的活动中使用这些类的实例？类似于[命令模式](http://en.wikipedia.org/wiki/Command_pattern)的东西，但更简单一些。

# java - MIDI 14bit 到 7bit 转换弯音

> ID：11764619
> 
> 赞同：2
> 
> 时间：2012-08-01T17:39:47.177
> 
> 标签：java, midi

我想知道如何转换 14 位 midi 弯音值

所以基本上如果我有 14 位值 8192（没有弯曲）

我如何在 LSB 和 MSB 的 MIDI 0-127 中表达这一点

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T02:01:12.073

高 7 位是 msb，低 7 位是 lsb（这是 C 语法，但我认为 Java 是一样的，对吧？）：

```
msb = pitchValue >> 7 & 0x7F;
lsb = pitchValue & 0x7F; 
```

因此，对于您的值 8192 (0x2000)，msb 为 0x40，lsb 为 0x00。

# javascript - 用 jquery 和子字符串截断书名

> ID：11764622
> 
> 赞同：1
> 
> 时间：2012-08-01T17:39:54.983
> 
> 标签：javascript, jquery, substring

我正在尝试截断从我的数据库中检索到的书名以打印在条形码标签上。我无法从查询中截断它，因为我需要整个标题出现在同一页面上的表中。这是我所拥有的：

```
 $.ajax({
        type: "POST",
        url: "advanceProcess.php",
        dataType: "json",
        data: ({sourceID: $('#sourceID').val(), fromDate: $('#fromDate').val(), toDate: $('#toDate').val()}),
        success: function(data){
            if(data.isbn == null ){
                $("#acctRecords").append('<tr><td>No Records Found</td></tr>');
            }else{
                //append general data
                for(var x=0;x<data.isbn.length;x++)
                {
                    $("#acctRecords").append('<tr><td id="tableSKU">'+data.tempsku[x]+
                    '</td><td id="tableISBN">'+data.isbn[x]+
                    '</td><td id="tableTitle">'+data.title[x]+
                    '</td><td id="tableOrderid">'+data.orderId[x]+
                    '</td><td id="tableQtyBought">'+data.quantity[x]+
                    '</td><td id="tableCost">'+data.cost[x]+
                    '</td><td id="tabledateCreated">'+data.dateCreated[x]+
                    '</td><td id="tableWeight">'+data.weight[x]+
                    '</td><td id="tableCheckNumber">'+data.checkNumber[x]+'</td></tr>');
                }// end of for loop
                //refreshes the tablesorter plugin
                $("#acctRecords").trigger("update");
    //Print the bar codes
    sku = data.tempsku;
    title = data.title[x];
    //console.log(JSON.stringify(data));
    title = title.substr(0,16);
    var x=0;
    for (x=0;x<title.length;x++)
    {   
        first += '$("#'+indexGlobal+'").barcode("'+sku[x]+'", "codabar",{barHeight:40, fontSize:30, output:"bmp"});';
        second += '<div class="wrapper"><img src="../images/temp.jpg" /><div id="'+indexGlobal+
        '"></div><div class="fullSKU">&nbsp &nbsp &nbsp '+sku[x]+'</div><br/><div class="title">'+title[x]+
        '</div></div><br/><div class="page-break"></div>';
        indexGlobal++;
    } 
```

一切正常，除了标题太长。目前我收到一条错误消息：TypeError: title.substr is not a function。我在这里和谷歌上做了一些研究，看来我的代码是正确的。有任何想法吗？

编辑：这是 JSON 的结果：

```
"title":["Understanding and Applying Medical Anthropology","The Ethical Chemist : Professionalism and Ethics in Science","Magic, Witchcraft, and Religion: A Reader in the Anthropology of Religion","Principles of Cancer Biology","AIDS and Accusation: Haiti and the Geography of Blame","In Search of Respect: Selling Crack in El Barrio (Structural Analysis in the Social Sciences)"] 
```

编辑 2：我更新了脚本以显示整个 ajax 调用以及如何返回结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:59:41.270

您正在使用多个标题，以便从数组中获取第一个标题：

```
title = data.title[0];
title = title.substr(0,16); 
```

如果要为*每个*标题构建条形码：

```
for(x=0; x<data.title.length; x++)
{
   title = data.title[x];
   title = title.substr(0,16);

   // Build barcode

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:01:33.407

```
//Your object [JSON]
var obj = {"title":["Understanding and Applying Medical Anthropology","The Ethical     Chemist : Professionalism and Ethics in Science","Magic, Witchcraft, and Religion: A Reader in the Anthropology of Religion","Principles of Cancer Biology","AIDS and Accusation: Haiti and the Geography of Blame","In Search of Respect: Selling Crack in El Barrio (Structural Analysis in the Social Sciences)"]}

//Result
obj.title[0] // Understanding and Applying Medical Anthropology 
```

# php - drupal 6 在 .module 文件中包含 tpl.php

> ID：11764626
> 
> 赞同：0
> 
> 时间：2012-08-01T17:40:05.173
> 
> 标签：php, drupal

我是 drupal 新手，想将模块 otuput 内容的 html 放在某个模板中。在模块中正确的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:13:34.680

阅读我对 Drupal 7 主题的回答[（$hook, $variables = array()) 以及它在 Drupal 7 中的工作原理](https://stackoverflow.com/questions/8258494/themehook-variables-array-and-how-it-works-in-drupal-7/8258798#8258798)

在 Drupal 6 中，这是非常相似的过程。

# ios - NSUInteger 中的值错误。为什么？

> ID：11764629
> 
> 赞同：0
> 
> 时间：2012-08-01T17:40:10.010
> 
> 标签：ios, nsnumber, nsuinteger

这就是我的 MyManager numberOfBedrooms 属性的设置方式：

```
@property(nonatomic, assign) NSUInteger numberOfBedrooms; 
```

这就是我从文本框中为其分配值的方式：

```
 myManager.numberOfBedrooms = (NSUInteger) self.bedroomTextField.text;

When i enter a 1 in text box, and do the following, I get large values like 304284 WHy?

NSLog(@"bedrooms is: %@", [NSNumber numberWithUnsignedInt: myManager.numberOfBedrooms] );
NSLog(@"bedrooms is: %d", myManager.numberOfBedrooms ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:41:57.590

改成：

```
 myManager.numberOfBedrooms = (NSUInteger) [self.bedroomTextField.text intValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:42:44.560

你不能做这个转换（你正在将一个对象转换为一个 int）：

```
myManager.numberOfBedrooms = (NSUInteger) self.bedroomTextField.text; 
```

您应该执行以下操作：

```
myManager.numberOfBedrooms = [self.bedroomTextField.text intValue]; 
```

# eclipse - 由于 java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory 错误，无法运行 ./bin/mahout

> ID：11764631
> 
> 赞同：1
> 
> 时间：2012-08-01T17:40:13.737
> 
> 标签：eclipse, maven, slf4j, mahout

我正在尝试使用 Mahout 并使用 lucene 索引器从文本创建向量，如下所示：[https ://cwiki.apache.org/confluence/display/MAHOUT/Creating+Vectors+from+Text](https://cwiki.apache.org/confluence/display/MAHOUT/Creating+Vectors+from+Text)

但是当我从 cygwin 的 MAHOUT_HOME 目录运行命令 ./bin/mahout 时，我收到此错误：

```
java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
        at org.apache.mahout.driver.MahoutDriver.<clinit>(MahoutDriver.java:89)
Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        ... 1 more
Exception in thread "main" 
```

我知道这是对 slf4j 的依赖问题，但我不知道应该如何解决。

我已经使用“mvn install”成功构建了 mahout，所有测试都可以正常工作，没有错误，而且我正在为我的项目（创建 lucene 索引器）使用 Eclipse Indigo（Maven 内置功能）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:08:28.450

如果我没有正确理解您的问题，我深表歉意。

也许可以通过将以下依赖项添加到您尝试使用 MAHOUT 的项目的 pom.xml 来解决此问题：

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.6.6</version>
</dependency> 
```

如果您需要特定版本的 sl4j，请通过[此](http://search.maven.org/#search%7Cgav%7C1%7Cg%3a%22org.slf4j%22%20AND%20a%3a%22slf4j-api%22)搜索检查 maven 中央存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T19:12:37.763

您正在运行一些 Mahout 类，而没有 Mahout 在您的类路径中依赖的第三方类。这是 slf4j 日志记录外观。您可以将此项目中的 JAR 添加到您的类路径中。或者您可以确保您运行的脚本为您设置。或者，您可以使用 Mahout 与 Maven 构建的“.job”文件，该文件生成一个 JAR 文件，其中包含所有依赖项打包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T00:48:34.030

原来我的问题是使用 jdk 7 和 mahout 0.4。我将其更改为 jdk 6，之后一切正常。

# facebook - 获取 Facebook Connect 登录站点的计数

> ID：11764635
> 
> 赞同：2
> 
> 时间：2012-08-01T17:40:40.943
> 
> 标签：facebook, facebook-graph-api, login, facebook-authentication

[计算用户使用 Facebook Connect 登录按钮（这个东西](https://developers.facebook.com/docs/reference/plugins/login/)）登录网站的次数的最佳方法是什么？

我已阅读[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)无济于事。我还没有访问 Facebook API 设置的权限，但也许这提供了登录计数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:42:56.473

如果您的 og 标签设置正确：

```
fb:app_id - A Facebook Platform application ID that administers this page. 
```

更多信息在这里：[https ://developers.facebook.com/docs/opengraphprotocol/](https://developers.facebook.com/docs/opengraphprotocol/)

您的 Facebook 应用程序上的“洞察”选项卡将为您提供您所寻找的信息。但请记住，数据可能滞后 48 小时。

# php - 需要通过他们授权的 Facebook 应用程序在所有用户时间线上发布提要

> ID：11764646
> 
> 赞同：1
> 
> 时间：2012-08-01T17:41:29.290
> 
> 标签：php, facebook, facebook-graph-api

嗨，我正在使用此代码通过在 $gg_fbid 中提供 id 将提要发送给特定用户。有什么方法可以通过 Facebook 应用程序向使用 PHP SDK 中的 Facebook 应用程序的所有用户发送提要和访问令牌。 **是的，这就是我想要的，这可能还是我应该建立一个单独的数据库来存储他们的 ID**

```
 require_once("fb/facebook.php");

  $gg_fbid='100004012849319';

    $facebook = new Facebook(array(
  'appId'  => 'xxxxxxxxxxxxxxxxxx',
  'secret' => 'xxxxxxxxxxxxxxxxxxxxxxxx',
));

  $attachment = array
 (
 'access_token'=>$facebook->getAccessToken(),
 'message' => 'This Page is awesome.',
 'name' => 'Must Like It',
 'caption' => 'Dailyjokes',
 'link' => 'http://facebook.com/wtfdailyjokes/',
 'description' => 'Awesome Picture',
 'picture' => 'https://www.facebook.com/photo.php?fbid=264680606974256&set=a.206648236110827.41772.206637039445280&type=1&relevant_count=1'
 );
 $result = $facebook->api($gg_fbid.'/feed/','post',$attachment); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:52:13.033

如果您有一个访问令牌数据库，您可以检索它们并对其进行迭代以发布在您的应用程序用户的墙上。

```
<?php
// instantiate Facebook SDK with your app's credentials
// do database query; fetch access tokens and store in an array called $access_tokens;

foreach ($access_tokens as $access_token) {
    try {
        $facebook->api('/me/feed', array(
            'access_token' => $access_token,
            'message' => 'This Page is awesome.',
            // and the rest of your details
        ));
    }
    catch (FacebookApiException $e) {
        // an error occurred
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T07:56:41.017

没有办法直接发布到使用 Facebook 应用程序的用户墙关于任何事件或其他内容，这就是为什么要回答我自己的问题。Facebook 权限 publish_stream 是此工作所必需的。/

当他们像在我的代码中一样使用您的应用程序时，您需要创建一个用户数据库

```
 $facebook = new Facebook(array(
  'appId'  => 'xxxxxxxxxxxxxxx',
  'secret' => 'xxxxxxxxxxxxxxxxxxxxxx',
));
$args = array(
    'message'   => 'Your Message to user Wall',
    'link'      => 'http://apps.facebook.com/lxxxxxxxx',
    'caption'   => ' Use this Awesome application or Like this Page.',
    'picture'      => 'http://xxxxx.png',

);
$post_id = $facebook->api("/me/feed", "post", $args);

  define('db_user','username);
  define('db_password','password');
  define('db_host','localhost');
  define('db_name','database name');

  // Connect to MySQL
  $dbc = @mysql_connect (db_host, db_user, db_password) OR die ('Could not connect to  MySQL: ' . mysql_error() );
    // Select the correct database
   mysql_select_db (db_name) OR die ('Could not select the database: ' . mysql_error() );

  $me = $facebook->api('/me'); 

        $dbcheck = mysql_query("SELECT * FROM users WHERE oauth_provider = 'facebook' AND     oauth_uid = ". $me['id']);  
 $dbr = mysql_fetch_array($dbcheck);  

if(empty($dbr)){ 

  $db=mysql_query("INSERT INTO users (oauth_provider, oauth_uid, username) VALUES ('facebook', {$me['id']}, '{$me['name']}')  ");

} 
```

所以发布我的原始代码来详细告诉你。

这是人们第一次打开您的应用程序时的代码，此 $args 被发布到用户墙，并且 id 和用户名存储到数据库中。

所以将来如果您想将任何内容发布到正在使用您的应用程序并授予权限的用户墙上。您可以做推广网站或 Facebook 粉丝专页。

最后这件事是如何发生的。正如 Martin 先生所说，我们将需要 10 个用户的 10 个访问令牌，但如果您从应用程序发布而不是使用应用程序令牌一次在所有用户墙上发布，那么这是不正确的，因此您可以使用单个应用程序访问令牌发布如果您的应用程序具有此功能，则向数百万用户。那么如何使用此链接获取应用程序的访问令牌

```
https://graph.facebook.com/oauth/access_token?type=client_cred&client_id=xxxxxxxxx&client_secret=xxxxxxxxxxxxxxxxxxxxxxxx 
```

之后获取数组中的所有 id 并执行相同的代码以使用 for 循环在所有用户墙上发布，或者无论如何我仍然提供我使用的代码。

```
<?php 

 require_once("fb/facebook.php");

    $facebook = new Facebook(array(
  'appId'  => 'xxxxxxxxxx',
  'secret' => 'xxxxxxxxxxxxxxxxxx',
));

$x=array("100001944919003","100000968648478","100001672538252","100003924282886");

$y=0;

while($y<=3){

     $posting_fbid=$x[$y];

     $attachment = array
 (
 'access_token'=>'access token from the url from the graph api',
 'message' => 'This Page is awesome.',
 'name' => 'DailyJokes-Must Like It',
 'caption' => 'Dailyjokes',
 'link' => 'http://facebook.com/wtfdailyjokes/',
 'description' => 'Awesome Picture',
 'scope' => 'publish_stream',
 'picture' => 'https://www.facebook.com/photo.php?fbid=264680606974256&set=a.206648236110827.41772.206637039445280&type=1&relevant_count=1'
 );

  $result = $facebook->api($posting_fbid.'/feed/','post',$attachment);

    echo 'successful for id '.$posting_fbid.'<br>';

    $y++;

}

  ?> 
```

# android - 日食无法获取谷歌地图

> ID：11764655
> 
> 赞同：-5
> 
> 时间：2012-08-01T17:42:26.137
> 
> 标签：android, google-maps

我正在eclipse上制作一个android应用程序并环顾四周，但我仍然无法打开地图，我有要求的附加组件但地图上没有，谁能帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:44:43.823

确保您的 android SDK 包含 Google API。如果没有下载它。这可能有助于 [https://developers.google.com/android/add-ons/google-apis/installing](https://developers.google.com/android/add-ons/google-apis/installing)。安装后只需通过链接 [http://mobiforge.com/developing/story/using-google-maps-android](http://mobiforge.com/developing/story/using-google-maps-android)。它非常有用。之后，如果您有任何疑问，请在此处发布..

# iphone - 以特定方式在 NSArray 中搜索子字符串

> ID：11764658
> 
> 赞同：1
> 
> 时间：2012-08-01T17:42:50.250
> 
> 标签：iphone, ios, nspredicate, uisearchdisplaycontroller

我有一个 UISearchDisplay 控制器设置，它正在过滤值，但我想知道是否有人可以帮助我用更高级的方式过滤结果。

假设我的数组是：{ American example, Eric, Different-Eric }

如果用户搜索“Eri”，结果应该是 { Eric, Different-Eric } 因为它应该只返回单词以子字符串开头的结果，而不是它在单词的中心（美国）。

它还应该检查 '-' 是否可以是 ' ' 和 viversa。所以子串'Different-Eri'也会搜索子串'Different Eri'，反之亦然。

如果您需要更多说明，我很乐意回答。我只是想知道是否有一个好的方法来解决这个问题。

当前代码：

```
NSPredicate *resultPredicate = [NSPredicate 
                                    predicateWithFormat:@"SELF.comname contains[cd] %@",
                                    searchText];

    searchResults = [[birdsArray filteredArrayUsingPredicate:resultPredicate] mutableCopy]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:04:43.903

实际上，我通过对自定义对象和搜索谓词进行一些更改来解决这个问题。解决方案比我以前想象的要简单得多。

在我的自定义对象中，我创建了 2 个属性，并让 Getters 方法分别返回“名字”和“姓氏”，这基本上将完整的字符串分解为第一个单词和最后一个单词，使用“”或“-”作为单词分隔符。

我的搜索谓词简单地变成了：

```
NSPredicate *spacePredicate = [NSPredicate 
                                   predicateWithFormat:@"SELF.comname BEGINSWITH[cd] %@ OR SELF.lastname BEGINSWITH[cd] %@",
                                   searchText, searchText];

    searchResults = [[birdsArray filteredArrayUsingPredicate:spacePredicate] mutableCopy]; 
```

我使用 'BEGINSWITH' 而不是 contains 来确保单词的开头与子字符串匹配。

结束:)，希望它对某人有所帮助。

# ndepend - ndepend，.net 程序集已启用

> ID：11764659
> 
> 赞同：1
> 
> 时间：2012-08-01T17:43:06.247
> 
> 标签：ndepend

在 tools -> options -> .NET Assemblies Enabled 中，可以暂时禁用 mscorlib 和 system 等框架程序集。无论如何要在每个项目的基础上执行此操作，以便保留设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:59:59.917

*每次打开NDepend 项目属性面板*时，都会自动推断框架/第三方程序集。所以你仍然可以从你的 .ndproj 文件 XML 内容中手动丢弃它们，但是当你打开*NDepend Project Properties 面板*时它们会回来。你为什么想这么做？

# java - 为什么 new String("a") == new String("a") 给出 false 而 "a"=="a" 给出 true。为什么在以后的情况下它们似乎都被视为同一个实例？

> ID：11764661
> 
> 赞同：0
> 
> 时间：2012-08-01T17:43:10.130
> 
> 标签：java, string, pointers, equals

> **可能的重复： Java 中**
> [Equals 和 ==](https://stackoverflow.com/questions/971954/difference-between-equals-and)
> [字符串比较和字符串实习之间的区别](https://stackoverflow.com/questions/3885753/string-comparison-and-string-interning-in-java)

这次很不言自明的问题。

**编辑**：我理解 == 不等于。我不明白为什么 "a" == "a" 中的 a 都被分配或视为相同的对象实例（它们是）。

**编辑**有人读过这个问题还是只是喜欢按下关闭按钮？它与上述任何一个都没有关系。告诉我我在哪里提到 Equals 方法......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T17:43:56.410

`"a" == "a"`给出 true ，因为 "a" 将被视为[字符串文字](http://www.xyzws.com/Javafaq/what-is-string-literal-pool/3)并被池化。因此，两个“a”都指向同一个实例，因为两个引用都指向同一个对象，== 返回 true。

当你说`new String("a")`。全新的对象会在 Heap 和不同的引用上创建，所以 == 返回 false，你需要使用`.equals()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T17:47:11.467

*   `==` checks for equality in references (pointers of memory)
*   `"a"` is a string literal and it's stored in constant data table (so that every use of it will point to the same literal)
*   `new String("a")` allocates a string object with the content of "a" but it is a stand alone object with is own memory space.
*   every `new` always allocates a different obect, so two allocated object can't have same reference

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T17:45:07.710

你必须使用 "a".equals("a");

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T17:47:01.183

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T17:52:50.573

When you use `new String("a")` it creates a new memory location. When you're comparing objects (String is an Object) with == it compares the memory locations and thus you get false. The `new` forced it to create 2 different memory locations. The "a" == "a" compares the memory locations for each and since they are string literal's they have same memory reference. The proper way to compare string is to use the `.equals()` method from the String class.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-01T19:19:07.193

`"a" == "a"` - Here process keept this string in a text segment, which is read only data. And you are just comparing the address of the text segment where this string is present. Which will give you true.

But `new String("a")` will allocate memory dynamically in heap and it will copy the string `"a"` to that dynamically allocated place. So `new String("a") = new String("a")` will allocate memory two times in heap. And you are comparing those two address its absolutely different. Because it has allocated memory in heap two times.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-01T17:49:12.403

Java creates a string-pool for strings that are know in design time. If you write something like

string a = "a"; string b = "b"; a == b will return true because java creates only one object with the same address.

If you write something like

new String("a") == new String("b")

this will return false because two objects are created during runtime with different addresses.

The == operator compares the addresses of the objects, not the values.

# debugging - CE设备平台SDK未出现在VS2008中

> ID：11764666
> 
> 赞同：1
> 
> 时间：2012-08-01T17:43:26.653
> 
> 标签：debugging, visual-studio-2008, mobile, sdk, windows-ce

所以我安装了 VS2010 express 用于桌面开发，然后安装了 VS2008 用于移动开发（我正在为 Honeywell Dolphin 6100 开发），然后是 Honeywell 的平台和设备 SDK。

SDK 文件已安装到正确的位置，但它没有显示为 VS2008 中用于调试的目标设备。

知道什么给出了吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T01:31:11.093

我发现，在 Windows 7 上运行时，它可以帮助从提升的命令提示符（以管理员身份运行）运行 SDK 安装程序。Platform Builder 中的 SDK 构建工具需要使用自定义操作来更新 Visual Studio 的配置文件，我不确定它们是否设置为正确的值以在有权修改文件的帐户下运行。

平台信息在 %ProgramFiles%\Microsoft Visual Studio 9.0\VC\vcpackages\WCE.VCPlatform.config 中定义，如果您运行的是 64 位操作系统，则在 %ProgramFiles(x86)% 中定义。我还发现一些安装程序将设置应用于 VS 2005，但不适用于 VS 2008：如果您确实安装了两个版本，则可以从一个复制到另一个。

# python - sqlalchemy 反对

> ID：11764669
> 
> 赞同：-1
> 
> 时间：2012-08-01T17:43:34.797
> 
> 标签：python, sql, sqlalchemy

它一定很简单，但我找不到让它工作的方法。因此，假设我创建了一个表，或者我从现有数据库*自动加载*生成了一个表对象，如下所示：

```
from sqlalchemy import create_engine, MetaData, Column, String, Table

engine = create_engine('sqlite://')
meta = MetaData(bind=engine)

def create_table(meta):
    tbl = Table('User', meta,
            Column('name', String),
            Column('surname', String),
    )

    meta.create_all()
    return tbl

tbl = create_table(meta) 
```

现在假设我想使用一个会话和类似的东西

```
 session.add(myobject) 
```

我如何从该表中实际创建一个对象，因为尝试直接调用该表不起作用：

```
Traceback (most recent call last):
  File "sample.py", line 17, in <module>
    tbl(name='dfd')
TypeError: 'Table' object is not callable 
```

所以我想我需要某种映射，但是如何？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-01T18:33:45.690

如果您是第一次尝试深入研究 SA，我建议您直接从教程开始，然后针对您自己的用例进行修改。与 DBAPI 方法相比，使用 SA 可能是一个巨大的飞跃（至少对我和我的团队来说是这样）。

您的示例代码使用的是核心教程，它*不是*ORM 接口。您的问题提到使用 a `mapper`（问题标题也是如此），因此您可能会更高兴遵循[ORM tutorial](http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html)。我建议不要在此处复制该代码，而是转到该页面并完成已发布的示例。

# jquery - 按钮点击保持在活动状态并且在点击功能完成之前不会改变（解决方法？）

> ID：11764670
> 
> 赞同：0
> 
> 时间：2012-08-01T17:43:43.057
> 
> 标签：jquery, click, jquery-events

我有这个按钮使用单击事件进行 ajax 调用。我的目标是使按钮内的文本在我进行 ajax 调用时从“提交”变为“正在加载...”。问题是，由于某种原因，我无法更改匿名函数内部的文本（甚至隐藏按钮），我坚持使用该`.click()`方法，直到执行完所有代码。或者至少在 ajax 调用完成之前没有明显的效果，而是停留在按钮的活动状态。

我上交`async: false`了`$.ajax`电话，这使得完成点击事件中的所有内容都需要一段时间。我认为我需要这种方式，但出于必要时我可以考虑的原因。我提出这个问题的原因是因为我正在寻找的解决方案应该在 ajax 调用之前以同步方式更改文本。

这是我正在使用的 jQuery 的简化版本：

```
$('a').click(function(){
    $(this).text('loading');//changing text BEFORE the ajax call
    $.ajax({
        type: 'POST',
        url: 'http://www.jsfiddle.net/',
        data: {foo: 'bar'},
        async: false
    });
    $(this).text('Send Request');
});​ 
```

这是一个[jFiddle](http://jsfiddle.net/uJzzn/1/)显示我的意思。

我可以这样做还是需要以不同的方式处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:57:32.503

编辑：

我终于明白你在说什么了。在 ajax 开始之前，您可以执行以下操作来更改文本。使用 setTimeout 然后使用成功函数将其设置回来

```
$('a').click(function() {
    var $this = $(this);
    $this.text('loading');
    setTimeout(function(){
        $.ajax({
            type: 'POST',
            url: '/echo/json/',
            data: {
                foo: 'bar',
              delay: 3
            },
            async: false,           
            success: function(){
                 $this.text('Send Request');  
            }
        });
    },100);      
}); 
```

[http://jsfiddle.net/uJzzn/11/](http://jsfiddle.net/uJzzn/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:48:45.803

使用[.ajaxStart](http://api.jquery.com/ajaxStart/)和[.ajaxStop](http://api.jquery.com/ajaxStop/)事件处理程序

```
$('a').click(function(){

    $(this).ajaxStart(function(){
       $(this).html('loading');
     });
    $.ajax({
        type: 'POST',
        url: '/echo/json/',
        data: {foo: 'bar'}
    });
    $(this).ajaxStop(function(){
       $(this).html('Send Request');
     });
});​ 
```

# coldfusion - 当我没有输入任何内容时，我正在插入空记录

> ID：11764673
> 
> 赞同：1
> 
> 时间：2012-08-01T17:44:00.177
> 
> 标签：coldfusion, null, cfquery

我正在尝试首先检查 NULL，如果值为 NULL，则跳过`INSERT`. 但事实并非如此。即使我没有在表单字段中输入任何内容，代码也会插入 NULL 记录。这几乎就像它在识别不存在的东西。

```
<cfoutput>
<cfif form.TBCom is not ""> 
    <cfquery name="TestTBComm" datasource="TrenaTest">
        INSERT INTO Comment1 (
            UniqueNum,
            ComTyp,
            Comments )
        SELECT 
           '#UniqueNum#',
           '#TBComV#',
           '#TBCom#'
    </cfquery>
</cfif>
</cfoutput> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T14:55:01.180

前面的答案是正确的，因为在测试一般字符串时，NULL 检查不适用于 CF。您可以测试长度或值。

这个问题吓到我了，我认为有必要提供一个完整的例子。用户提供数据的查询的每个字段都必须包含在 CFQUERYPARAM 中。查找术语“ [sql 注入](https://www.google.com/#hl=en&gs_nf=1&tok=woP0DdS0qqzVGjldobHqww&cp=7&gs_id=q&xhr=t&q=sql+injection&pf=p&output=search&sclient=psy-ab&oq=sql+inj&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=fd914e5a4ec503ba&biw=1680&bih=965)”以了解原因。

此查询应该适合您：

```
<cfquery name="TestTBComm" datasource="TrenaTest">
    INSERT INTO Comment1 (
        UniqueNum,
        ComTyp,
        Comments )
    VALUES (
        <cfqueryparam cfsqltype="cf_sql_integer" value="#FORM.UniqueNum#">
        , <cfqueryparam cfsqltype="cf_sql_varchar" value="#FORM.TBComV#" NULL="#!Len(FORM.TBComV)#">
        , <cfqueryparam cfsqltype="cf_sql_varchar" value="#FORM.TBCom#" NULL="#!Len(FORM.TBCom)#">
    )
</cfquery> 
```

在 NULL 参数中，请注意“！”，它反转 LEN() 函数的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T18:56:46.537

如果您的意思是希望在表单字段为空时跳过插入，`trim()`请先检查长度。如果长度为 0，则跳过插入：

```
 <cfif len(trim(form.TBCom))>
      not empty. do the insert ...
 </cfif> 
```

顺便说一句，您不需要`cfoutput`在`cfquery`. 变量将被自动评估。此外，您应该[`cfqueryparam`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f6f.html)在所有用户提供的参数上使用（[请参阅 Mike 的答案以获取示例](https://stackoverflow.com/a/11780203/104223)）并确保您的变量范围，即`form.TBCom`不仅使用`TBCom`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T22:06:08.040

上面的代码不会在指定的 3 列（uniqueNum、comTyp 和注释）中插入空值。它将插入空字符串 - 这与 NULL 不同。

另外 - 我同意 Leigh 的观点，正确的语法应该是：

```
 <cfquery name="TestTBComm" datasource="TrenaTest">
        INSERT INTO Comment1 (
            UniqueNum,
            ComTyp,
            Comments )
        VALUES (
           '#UniqueNum#',
           '#TBComV#',
           '#TBCom#'
           )
    </cfquery> 
```

那么......这些空值发生在哪里？如果它们在数据库的其他列中（这不是此查询的一部分），那是因为您没有插入这些列，并且它们被设置为“允许空值”并且没有“默认”值。

# nservicebus - NServiceBus - 扩展订阅者在 master 和 worker 之间重复事件

> ID：11764676
> 
> 赞同：1
> 
> 时间：2012-08-01T17:44:10.873
> 
> 标签：nservicebus, subscriber, nservicebus-distributor, nservicebus3

我的核心问题是如何在 NServiceBus 中扩展订阅者。请让我知道我做错了什么或我错过了什么。我很乐意回答有关我的设置的任何问题。

设想：

我在尝试扩展订户时看到了我希望的不正确行为。我在机器 01 上安装了 master，在机器 02 上安装了 worker。我卸载了这两个服务并重新安装了“NServiceBus.Production NServiceBus.Master”作为 master 的命令行，但使用 NServiceBus.Worker 作为 worker 的命令行. 两个服务都运行良好，有两个线程可用。我在关闭服务的情况下运行场景的第一部分，队列计数如下面的第一个列表所示。注意到 Master 和 Worker 中的 816 条消息了吗？我以为使用 Production 命令行安装会导致两个服务共享相同的订阅信息，并且只有 master 会收到订阅的事件，但我错了。

第二组队列计数是启动两个服务并让它们完成处理的结果。请注意 02 上的工作人员服务如何处理他原来的 816 以及分销商给他的任何东西？

此处未列出主服务器的网关、重试和超时队列以及工作人员的重试和超时队列，因为在运行服务之前和之后，队列和日志的值均为 0

// 服务关闭***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** *****

格式名称：DIRECT=OS:vm-01\private$\creditalertnotificationprocessor.distributor.control

```
Queue Messages: 0

Journal Messages: 0 
```

格式名称：DIRECT=OS:vm-01\private$\creditalertnotificationprocessor.worker

```
Queue Messages: 0

Journal Messages: 0 
```

格式名称：DIRECT=OS:vm-01\private$\creditalertnotificationprocessor.distributor.storage

```
Queue Messages: 5

Journal Messages: 0 
```

FormatName:DIRECT=OS:vm-01\private$\creditalertnotificationprocessor

```
Queue Messages: 816

Journal Messages: 0 
```

FormatName:DIRECT=OS:vm-02\private$\creditalertnotificationprocessor

```
Queue Messages: 816

Journal Messages: 0 
```

// 服务开启（并完成）***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ******

格式名称：DIRECT=OS:vm-01\private$\creditalertnotificationprocessor.distributor.control

```
Queue Messages: 0

Journal Messages: 1634 
```

格式名称：DIRECT=OS:vm-01\private$\creditalertnotificationprocessor.worker

```
Queue Messages: 0

Journal Messages: 483 
```

格式名称：DIRECT=OS:vm-01\private$\creditalertnotificationprocessor.distributor.storage

```
Queue Messages: 824

Journal Messages: 817 
```

FormatName:DIRECT=OS:vm-01\private$\creditalertnotificationprocessor

```
Queue Messages: 0

Journal Messages: 816 
```

FormatName:DIRECT=OS:vm-02\private$\creditalertnotificationprocessor

```
Queue Messages: 0

Journal Messages: 1149 
```

工人配置文件...

```
 <?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="UnicastBusConfig" type="NServiceBus.Config.UnicastBusConfig, NServiceBus.Core" />
    <section name="MessageForwardingInCaseOfFaultConfig" type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core" />
    <section name="MsmqTransportConfig" type="NServiceBus.Config.MsmqTransportConfig, NServiceBus.Core" />
    <section name="MasterNodeConfig" type="NServiceBus.Config.MasterNodeConfig, NServiceBus.Core" />
  </configSections>

  <MasterNodeConfig Node="vm-01"/>

  <UnicastBusConfig>
    <MessageEndpointMappings>
      <add Messages="Sample.Common.Messages.Commands.LogMessage, Sample.BusFramework.Common" Endpoint="Sample.BusFramework.LogMessageProcessor@vm-01" />
      <add Messages="Sample.Credit" Endpoint="Sample.Credit.AlertBackfillProcessor" />
    </MessageEndpointMappings>
  </UnicastBusConfig>
  <MessageForwardingInCaseOfFaultConfig ErrorQueue="error" />
  <MsmqTransportConfig NumberOfWorkerThreads="2" MaxRetries="1" />

  <connectionStrings>
    <add name="ApplicationLog" connectionString="" providerName="" />
    <add name="ProductFulfillment" connectionString="" providerName="" />
  </connectionStrings>

  <appSettings>
    <add key="BusLoggingThreshold" value="DEBUG"/>
  </appSettings>

</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:41:33.263

您无需通过配置中的 MessageEndpointMappings 进行订阅。Master 将订阅并将处理委托给该节点。您会看到重复项，因为 Worker 是自己订阅的。

# php - 英镑符号 Simplexml_load_string 问题

> ID：11764678
> 
> 赞同：0
> 
> 时间：2012-08-01T17:44:13.517
> 
> 标签：php, mysql, utf-8, simplexml

我有一个 php 脚本，它使用以下代码对 xml 文件进行分级，然后将其输入到 mysql 数据库中。

除了所有显示为 ￡ 的英镑符号外，它的效果非常好。

xml 编码为 utf-8。

```
$xml = file_get_contents('test.xml');
$params = json_decode(json_encode(simplexml_load_string($xml)), 1);

//DETAILS TO INSERT
$contact_url = $params['contact_url']; 

etc 
```

有谁知道为什么会发生这种情况？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:51:02.933

英镑符号是 UTF-8 中的 0xC2 0xA3；错误消息中报告的字节是 ISO-8859-1 字符：

[井号][7][0][0]

所以我认为您的文档实际上被编码为 iso-8859-1，尽管声明表明 utf-8。

# c# - 模板化两个 XML 文件

> ID：11764681
> 
> 赞同：1
> 
> 时间：2012-08-01T17:44:34.960
> 
> 标签：c#, xml, merge, templating

我正在尝试合并两个 XML 文档。第一个是具有默认值的模板，第二个具有相同的结构，但缺少字段。我想加载这两个文件并使用第一个文件中给出的默认值填充第二个 XML 文件的缺失字段。例如 ：

默认配置.xml：

```
<CollectionItem>
   <Item>
      <var1>10</var1>
      <var2>20</var2>
   </Item>
</CollectionItem> 
```

配置1.xml：

```
<CollectionItem>
   <Item>
      <var1>5</var1>
   </Item>
   <Item>
      <var2>5</var2>
   </Item>
</CollectionItem> 
```

因此，我希望输出文件看起来像：

```
<CollectionItem>
   <Item>
      <var1>5</var1>
      <var2>20</var2>
   </Item>
   <Item>
      <var1>10</var>
      <var2>5</var2>
   </Item>
</CollectionItem> 
```

此外，我想是通用的，如果我在节点项目中添加一个字段，我不想对其进行编码，而是在默认的 XML 文件中读取它。谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:56:55.300

[使用XElemnt](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.aspx)类读取 XML 文件。您可以使用 Elements() 方法获取子元素。每个元素都有一个属性“名称”。如果非默认元素没有默认元素具有的字段 - 使用 Add 函数添加它。

最后不要忘记调用函数“保存”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:26:48.183

好的，简单的方法，我只是想知道是否还没有一种方法可以做到这一点。我知道两个数据集的合并功能可以将结构与属性“转换”为元素或元素合并为遵循 gicen 方案的属性....

更进一步，如果这两个文件只是一个这样的文件怎么办：

```
<CollectionItem>
   <Item>
      <Name>default</Name>
      <var1>5</var1>
      <var2>20</var2>
   </Item>
   <Item>
      <Name>config1</Name>
      <var1>10</var>
   </Item>
</CollectionItem> 
```

and while deserialization into a class "CollectionItem", I'd like to populate the second Item with its values plus the default values that I find in the first Item if not given ? It is quite simple to do it after deserialization, but is it possible possible to do it AT deserialization. With binary files it is also easy with the interface IOnDeseralizationCallback, but this concept does not exist with XML files...

# continuous-integration - Bitbucket 与 Bamboo OnDemand 的持续集成

> ID：11764682
> 
> 赞同：1
> 
> 时间：2012-08-01T17:44:35.297
> 
> 标签：continuous-integration, bitbucket, bamboo, ondemand

我无法让 Bitbucket (Git repo) 触发 Bamboo OnDemand (版本 4.1.2-ondemand-rc9) 构建。我遵循了从 Bitbucket 设置 Bamboo 服务的[文档](https://confluence.atlassian.com/display/BITBUCKET/Setting+Up+the+Bitbucket+Bamboo+Service)，但它没有触发构建计划。竹子似乎工作正常；我可以手动触发构建没有任何问题。作为备份，我将构建策略更改为“轮询存储库以进行更改”并且有效。

我有一些问题：

1.  Bitbucket 是否支持向 Bamboo OnDemand 发送 CI 通知？如果有帮助，我启用了“接受旧版远程 API 调用？” Bamboo 设置中的选项
2.  有没有办法从 Bitbucket 获取日志或错误以进行调试？这样我就可以看到它是否正在拨打电话，以及响应是什么。

谢谢。蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:28:53.030

我与 Atlassian 支持人员进行了交谈，他们更新了他们的文档，结果发现我弄错了 URL。遵循此处的说明有所帮助，它就像一个魅力。

~~[https://confluence.atlassian.com/display/BITBUCKET/Setting+Up+the+Bitbucket+Bamboo+Service](https://confluence.atlassian.com/display/BITBUCKET/Setting+Up+the+Bitbucket+Bamboo+Service)~~ [https://confluence.atlassian.com/bitbucket/bamboo-service-management-278069514.html](https://confluence.atlassian.com/bitbucket/bamboo-service-management-278069514.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-22T07:54:31.783

这是为了以防您仍然需要查看日志：在您的任务在 Bamboo 计划中运行后，单击“日志”链接，然后在日志摘要窗口中。您可以选择下载或查看详细日志。好主意，如果您通过右键单击选择“查看”来执行此操作，那么它允许您在新标签页中打开登录。

顺便说一句，请注意上面提到的超链接不再正确。

# uiviewcontroller - 如何将场景设置为初始视图控制器 cocos2d

> ID：11764684
> 
> 赞同：0
> 
> 时间：2012-08-01T17:44:45.530
> 
> 标签：uiviewcontroller, cocos2d-iphone, xcode4.3, uistoryboard

我不确定如何在线程中正确显示代码，对此我深表歉意。所以我有我的 App Delegate 调用

[director_pushScene：[IntroLayer场景]]；

然后我的 introLayer 这样做：

```
-(void) makeTransition:(ccTime)dt
{
[[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:1.0 scene:[MainMenu scene] withColor:ccBLUE]];
} 
```

然后我有 MainMenu.h 和 .m 但它们几乎是空的，除了 .m 有：

```
@implementation MainMenu

// Helper class method that creates a Scene with the GamePlay as the only child.
+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    MainMenu *layer = [MainMenu node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
}
@end 
```

然后我有一个使用导航控制器的故事板，当我调用“makeTransition”函数时，我希望开场场景成为主菜单。在我的故事板中，这个主菜单上有一个播放按钮。这个播放按钮被推到另一个“CCViewController”类的视图控制器上。我有 CCViewController.m 和 .h，然后我从中创建了一个名为 cocos2dViewController.m 和 .h 的子类。在我的 cocos2dViewController.m 我调用：

```
if(director.runningScene)

    [director replaceScene:[GamePlay scene]];

else

    [director pushScene:[GamePlay scene]]; 
```

GamePlay.m 和 .h 是我定义我的整个游戏的地方。

因此，当我运行它时，我会看到启动屏幕，然后它会从蓝色过渡到黑色屏幕。这是因为 MainMenu.m 中没有任何内容吗？另外，（我认为）我不应该在 MainMenu.m 中需要任何东西。我只需要某种方式使 MainMenu 场景成为情节提要的初始（主菜单）场景。我觉得我已经很接近让这个工作了，您在这一点上必须提供的任何建议/知识，或者如果您需要更多信息来诊断问题，我们将再次不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:46:58.147

当 cocos2d 中没有运行场景时，你应该通过调用来启动一个`runScene`，而不是`replaceScene`.

这是你应该尝试改变的第一件事。

另一方面，在我看来，您正试图在 UIKit 视图控制器中显示 cocos2d 场景。这也需要一些小心才能工作。如果您使用的是 cocos2d 2.0，请查看[这篇文章](http://www.tinytimgames.com/2012/02/07/cocos2d-and-storyboards/)以获取一些提示。

# django - Django ModelAdmin 对字段集具有基于请求/用户的限制（需要是线程安全的）

> ID：11764685
> 
> 赞同：1
> 
> 时间：2012-08-01T17:44:49.483
> 
> 标签：django, django-admin, django-modeladmin

我有几个非常定制的 Django ModelAdmins，如果用户是超级用户，我想添加额外的字段。我发现有人说要像这样覆盖 get_fieldsets 方法

```
def get_fieldsets(self, request, obj=None):
    fieldsets = super(PageAdmin, self).get_fieldsets(request, obj)
    if request.user.is_superuser:
        fieldsets[0][1]['fields'].insert(0,'group')
        fieldsets[0][1]['fields'].insert(2,'is_live')
    else:
        groups = request.user.page_groups.filter(
            is_live = True,
        )
        if groups.count() > 1:
            fieldsets[0][1]['fields'].insert(0,'group')
    return fieldsets 
```

这有效（有点），我喜欢使用 get_fieldsets，因为它让我可以将字段分组到字段集中。我还在此管理员上使用 get_form，因为该表单有几个特定于用户的表单字段，这些字段具有基于用户的查询集。

```
def get_form(self, request, obj=None, **kwargs):
    if request.user.is_superuser:
        return PageForm
    else:
        form = RestrictedPageForm
        form.owner = request.user #(this may be a bad way to do this but it works I think)
        return form 
```

现在我遇到了我认为是线程问题。

发生的情况是，如果您在浏览器中快速刷新 change_form 页面，您将在表单中看到多个“group”或“is_live”字段。

我真的很喜欢利用管理员来让我不必写所有东西，但我不知道如何正确地做到这一点。任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T17:57:08.933

问题是您实际上是在更改 上的`fieldsets`属性`ModelAdmin`，这不是线程安全的，即使`get_fieldsets` *is*。

最好的方法是指定单独的字段集：

```
fieldsets = (...)
restricted_fieldsets = (...) 
```

然后：

```
def get_fieldsets(self, request, obj=None):
    if some_condition:
        return self.restricted_fieldsets
    else:
        return super(MyModelAdmin, self).get_fieldsets(request, obj=obj) 
```

# string - 从矩阵列中读取和检测字符串

> ID：11764686
> 
> 赞同：0
> 
> 时间：2012-08-01T17:44:49.863
> 
> 标签：string, matlab, matrix

我在矩阵中有一列字符串

```
X = ['apple1 (15%)'; 'apple2 (15%)'; 'apple3 (15%)'; 'orange1 (15%)'; 'orange2 (15%)'; 'orange3 (15%)' ] 
```

我需要创建另一列矩阵来重新定义 X 的内容。

例如，我希望 MATLAB 将“apple”重新定义为 1，将“orange”重新定义为 2。所以最后我会期待这样的事情：

```
[1; 1; 1; 2; 2; 2] 
```

但是，当我读取字符串列时，MATLAB 无法读取字符串：

```
theMatrix = xlsread(myFile.xls);

for i = numTotalTrials;
 X = theMatrix(i,2)

> X = Nan 
```

此外，我正在使用`strfind`重新定义列：

```
t = strfind(X,'a');
if t == 1
    newColumn = 1
else
    newColumn = 2
end 
```

MATLAB 是否以这种方式工作？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:21:13.437

使用正则表达式的另一种解决方案：

```
%# note the use of cell-arrays
X = {'apple1 (15%)'; 'apple2 (15%)'; 'apple3 (15%)'; 
     'orange1 (15%)'; 'orange2 (15%)'; 'orange3 (15%)'};

%# match either apples or oranges
m = regexp(X, '^(apple|orange)', 'match', 'once');

%# which one was found
[~,loc] = ismember(m, {'apple','orange'}) 
```

结果：

```
>> loc
loc =
         1
         1
         1
         2
         2
         2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:13:29.137

不知道，如果这正是您要寻找的东西，但从

```
X = ['apple1 (15%)'; 'apple2 (15%)'; 'apple3 (15%)'; 
     'orange1 (15%)'; 'orange2 (15%)'; 'orange3 (15%)']; 
```

我会定义一个输出向量`result`，循环输入，然后查找所需的字符串，使用`strfind`它可能看起来像

```
result = zeros(size(X, 1), 1);
for row = 1 : size(X, 1)
    if ~isempty(strfind(X(row,:), 'apple'))
        result(row) = 1;
    elseif ~isempty(strfind(X(row,:), 'orange'))
        result(row) = 2;
    end
end 
```

这将返回

```
result = [1; 1; 1; 2; 2; 2]; 
```

# c++ - Winsock 接收额外数据

> ID：11764687
> 
> 赞同：2
> 
> 时间：2012-08-01T17:44:52.827
> 
> 标签：c++, winsock

我尝试使用 Winsock 制作文件下载器，但我意识到如果 Internet 连接速度较慢，客户端会收到一些不需要的数据以及服务器发送的数据。
所以我做了一个简单的测试：
我从服务器发送从 1 到 30000 的数字：

```
char* buf = (char*)malloc(BUFLEN);          
for( int i = 0;i < 30000;++i ){
     ZeroMemory(buf, BUFLEN);
     itoa(i+1, buf, 10);
     send(current_client, buf, BUFLEN, 0);
}
free(buf); 
```

客户端接收并保存它们：

```
char *buf = (char*)malloc(DEFAULT_BUFLEN);
ofstream out;
out.open(filename, ios::binary);
for( int i = 0;i < 30000;++i ){
     ZeroMemory(buf, DEFAULT_BUFLEN);
             recv(ConnectSocket, buf, DEFAULT_BUFLEN, 0);
             out.write(buf, DEFAULT_BUFLEN);
             out << endl;
}
out.close();
free(buf); 
```

我希望在文件中看到类似的内容：
1
2
3
4
...
30000
但是有一些额外的数据包，包含“/0”，传输并且文件看起来像这样：
1
2
3

4
5

6
...
2600
如果我尝试跳过“/ 0”数据包，来自服务器的数据也会像这样跳过：
1
2
3
4
5
6
9 <- 7 和 8 丢失
...
2600
我做错了什么?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:51:41.583

从[手册](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740121%28v=vs.85%29.aspx)`recv`页：

> 对于面向连接的套接字（例如 SOCK_STREAM 类型），调用 recv 将返回当前可用的尽可能多的数据——最大为指定的缓冲区大小。

这意味着`recv`可能会给您不完整的数据包。如果数据包有固定长度或终止符，则需要`recv`在附加到缓冲区的循环中调用，直到接收到所有数据包。然而，这带来了另一个问题，第二次调用`recv`可能会给你最后一个数据包的剩余部分，还有另一个数据包的一部分。

在您的情况下，发送者的发送速度也可能比接收者接收它们的速度快，在这种情况下，`recv`将阻塞（如果套接字阻塞）或返回错误（如果套接字非阻塞）。您必须检查返回的值`recv`才能知道它是什么。如果套接字是非阻塞的，那么`recv`将返回`SOCKET_ERROR`（即`-1`）并[`WSAGetLastError`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741580%28v=vs.85%29.aspx)返回`WSAEWOULDBLOCK`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T19:51:43.780

`recv()`告诉您实际收到了多少字节。即使没有完全填满，您也会忽略输出整个缓冲区的值。服务器端也是一样 - 您发送的数据更多，然后是格式化。

您也没有考虑到这两者`send()`，并且`recv()`可以发送/接收的字节数少于您请求的字节数。

试试这个：

```
bool sendraw(SOCKET socket, void *buf, int buflen)
{
    unsigned char *p = (unsigned char*) buf;
    while (buflen > 0)
    {
        int sent = send(socket, p, buflen, 0);
        if (sent < 1) return false;
        p += sent;
        buflen -= sent;
    }
    return true;
}   

for( int i = 0; i < 30000;++i )
{   
    int j = htonl(i+1);
    if (!sendraw(current_client, &j, sizeof(int)))
        break;
} 
```

.

```
bool recvraw(SOCKET socket, void *buf, int buflen)
{
    unsigned char *p = (unsigned char*) buf;
    while (buflen > 0)
    {
        int received = recv(socket, p, buflen, 0);
        if (received < 1) return false;
        p += received;
        buflen -= received;
    }
    return true;
}   

ofstream out; 
out.open(filename, ios::binary); 
for( int i = 0; i < 30000;++i )
{ 
    int j;
    if (!recvraw(ConnectSocket, &j, sizeof(int)))
        break;
    out << ntohl(j) << endl; 
} 
out.close(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T21:45:42.370

我弄清楚了问题所在。
正如 Joachim 和 Remy 所说，有时客户端不会收到整个缓冲区，所以我稍微修改了代码：
从服务器端：

```
 sent = 0;
             while( sent != BUFLEN ){
                    sent += send(current_client, (buf+sent), BUFLEN-sent, 0);
             } 
```

和客户：

```
 recvd = 0;  
             while( recvd != DEFAULT_BUFLEN ){  
                    recvd += recv(ConnectSocket, (buf+recvd), DEFAULT_BUFLEN-recvd, 0);  
             } 
```

而且我知道缓冲区没有完全填满，通常我将二进制数据作为 char* 发送，而不仅仅是整数。

# javascript - 在其他文本输入字段中输入文本时启用复选框

> ID：11764688
> 
> 赞同：1
> 
> 时间：2012-08-01T17:44:56.597
> 
> 标签：javascript, jquery, input, checkbox

通常他们会做另一件事：在选中/取消选中复选框时启用/禁用文本输入字段，但只有当用户在文本字段（开始日期）中输入一些文本时，我才需要启用复选框组（工作日）。因此，当用户未在输入字段中键入开始日期时，复选框仍必须禁用。

我认为我需要采取比这里更多的行动：http: [//jsfiddle.net/H8VPY/11/](http://jsfiddle.net/H8VPY/11/)

请帮我选择正确的 jquery 事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:52:05.313

您可以使用`prop()`方法和`keyup`事件处理程序。尝试以下操作：

```
$('input[name=other_name]').keyup(function(){
    if (this.value.length > 0) {
       $('input[name="others"]').prop('disabled', false)
    } else {
       $('input[name="others"]').prop('disabled', true)      
    }
}) 
```

[演示](http://jsfiddle.net/H8VPY/47/)

或者正如 Esailija 正确建议的那样，您可以使用较短的版本：

```
$('input[name=other_name]').keyup(function(){
     $('input[name="others"]').prop('disabled', !this.value.length)
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:49:20.657

添加一个类并禁用您的复选框；

```
<checkbox class="checkbox_class" disabled > 
```

在您的文本框中；

```
<input type="text" onkeyup="javascript: if($(this).val() != '') $('.checkbox_class').enable()" > 
```

# sql - Excel Sql 在 Excel 只读模式下运行时抛出参数太少错误

> ID：11764694
> 
> 赞同：1
> 
> 时间：2012-08-01T17:45:27.300
> 
> 标签：sql, vba, excel

我有一个 excel 表，我通过 ODBC 从 oracle 将数据加载到“数据”表中。然后应用excel sql过滤一些数据

注意：我在服务器机器上工作，所以不能粘贴整个代码。但无论我说什么都是 100% 正确的。

```
'Load Data Sheet
Sql = Select * from oracleTable
. . . 
set rs1 = commandData.Execute() 'record set
'Then code to store rs1 values in to Data Sheet...
.
.
'Apply filter in Excel 
query = select col1,col2,col3 from [Data$A1:IV100] where col1='10'
set rs = commandData.Execute() 'record set 
```

在写入模式下打开时返回正确的结果。但是，当我将工作表置于只读模式以供用户保护工作表内容时。它可以从 oracle 加载数据，然后当我在行执行过滤器 excel sql 时显示错误。

```
 set rs = commandData.Execute() ' Error at this line when opened in read only mode 
```

**错误：**

> [Microsoft][ODBC Excel 驱动程序] 参数太少。预计 1

是否类似于以只读方式打开 excel 时它在 Temp 目录中打开，所以在执行 excel 查询时，是否很难找到正确的工作表来应用 sql？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:55:06.267

您没有正确使用 .Execute() 函数。

非行返回的语法：

```
commandobject.Execute RecordsAffected, Parameters, Options 
```

行返回的语法：

```
Set recordsetobject = commandobject.Execute (RecordsAffected, Parameters, Options) 
```

这是更深入报道的链接：http: [//www.devguru.com/technologies/ado/quickref/command_execute.html](http://www.devguru.com/technologies/ado/quickref/command_execute.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:22:06.423

我自己经常遇到这个错误。如果你挂断了试试这个：

1.  打开 VBA 编辑器
2.  按 Ctrl + G （这将打开即时窗口）
3.  将查询分配给变量后立即在代码中设置断点（在本例中为紧随其后的行`query =`
4.  当代码在断点处中断时，输入`?query`即时窗口并按 Enter
5.  这会将 SQL 语句写入即时窗口
6.  查看 SQL 语句是否有任何错误（缺少引号等）

您还可以尝试将即时窗口中的 SQL 语句粘贴到数据库中并运行查询。有时您的数据库会抛出更具体的错误消息，您可以相应地更正您的 VBA 代码。

# java - 在java中转换ssh密钥

> ID：11764698
> 
> 赞同：4
> 
> 时间：2012-08-01T17:45:39.363
> 
> 标签：java, jsch

是否有将 ssh2 密钥转换为 openssh 密钥的 java 库。很像用于 Windows 的 puttykeygen.exe 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T12:09:32.610

您可以使用 PEMWriter 将您的私钥转换为大多数应用程序都接受的 PEM 格式 (.key)

以下示例转换从 KeyStore (JKS) 返回的密钥

```
Key privateKey = KeyStore.getKey(privateKeyAlias, keyStorePassword);//get key from JKS
StringWriter stringWriter = new StringWriter();
PEMWriter pemWriter = new PEMWriter(stringWriter);
pemWriter.writeObject(privateKey);
pemWriter.close();

byte[] privateKeyPEM = stringWriter.toString().getBytes(); 
```

# css - 使用 CSS 字符串集属性和内容方法

> ID：11764700
> 
> 赞同：2
> 
> 时间：2012-08-01T17:46:02.483
> 
> 标签：css, less

我正在为学习目标设置字符串，并使用内容方法来调用和显示这些项目。除非我特别声明一个静态字符串，否则 content 方法无法正常工作。这是内容方法的正确语法吗？

```
&.toc-section .listitem{
    display:none;
    string-set: cnx-learning-objectives content();
}   

&:after {
    display:block;
    background-color: @green;
    content: cnx-learning-objectives content();
    color: red !important;  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:57:37.010

如果您尝试将内容设置`listitem`到`after`元素中（我认为这就是您想要做的），那么我相信这就是您想要的：

```
&.toc-section .listitem{
    display:none;
    string-set: cnx-learning-objectives content();
}   

&:after {
    display:block;
    background-color: @green;
    content: string(cnx-learning-objectives);
    color: red !important;  
} 
```

# c++ - 在 OSX 上将库静态链接到 C++ dylib

> ID：11764702
> 
> 赞同：0
> 
> 时间：2012-08-01T17:46:06.400
> 
> 标签：c++, macos, static-linking, dylib

我正在编译一些 .dylibs （一个插件），我想将 tinyxml2 静态包含到它们中。我有`tinyxml2.cpp`并`tinyxml2.h`坐在源旁边。当我运行我的 make 时，它​​产生的命令是：

```
rm -rf *.a *.os *.dylib
g++-4.0 -g -c -Werror -DUSE_GLEW -I/Applications/Nuke6.3v4/Nuke6.3v4.app/Contents/MacOS/include -isysroot /Developer/SDKs/MacOSX10.5.sdk -arch x86_64 tinyxml2.cpp -o tinyxml2.a
g++-4.0 -g -c -Werror -DUSE_GLEW -I/Applications/Nuke6.3v4/Nuke6.3v4.app/Contents/MacOS/include -isysroot /Developer/SDKs/MacOSX10.5.sdk -arch x86_64 -o SyGeo.os SyGeo.cpp
g++-4.0 -L/Applications/Nuke6.3v4/Nuke6.3v4.app/Contents/MacOS -Wl,-syslibroot,/Developer/SDKs/MacOSX10.5.sdk -arch x86_64 -bundle -lDDImage -lGLEW -framework QuartzCore -framework IOKit -framework CoreFoundation -framework Carbon -framework ApplicationServices -framework OpenGL -framework AGL  -o SyGeo.dylib SyGeo.os
Undefined symbols:
  "tinyxml2::XMLDocument::LoadFile(char const*)", referenced from:
      SyDistorter::readPreset()       in SyGeo.os
  "tinyxml2::XMLDocument::~XMLDocument()", referenced from:
      SyDistorter::readPreset()       in SyGeo.os
      SyDistorter::readPreset()       in SyGeo.os
  "tinyxml2::XMLElement::FindAttribute(char const*) const", referenced from:
      tinyxml2::XMLElement::QueryFloatAttribute(char const*, float*) constin SyGeo.os
  "tinyxml2::XMLNode::NextSiblingElement(char const*) const", referenced from:
      tinyxml2::XMLNode::NextSiblingElement(char const*)in SyGeo.os
  "tinyxml2::XMLDocument::XMLDocument(bool)", referenced from:
      SyDistorter::readPreset()       in SyGeo.os
  "tinyxml2::XMLNode::FirstChildElement(char const*) const", referenced from:
      tinyxml2::XMLNode::FirstChildElement(char const*)in SyGeo.os
  "tinyxml2::XMLAttribute::QueryFloatValue(float*) const", referenced from:
      tinyxml2::XMLElement::QueryFloatAttribute(char const*, float*) constin SyGeo.os
ld: symbol(s) not found
collect2: ld returned 1 exit status
make: *** [SyGeo.dylib] Error 1 
```

我应该如何进行链接？（我希望我正在构建的所有 .dylib 静态包含 tinyxml2 库，最好使用命名空间修饰）。

请注意，我在这里使用的是较旧的 10.5 SDK - 因为我的主机应用程序使用它，所以我必须这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:35:53.637

链接时，您将指定所需的所有目标文件。所以在链接创建`tinyxml2.a`后添加。`SyGeo.os``SyGeo.dylib`

# ruby-on-rails - 链接到命名空间中的模型的 yardoc 语法是什么？

> ID：11764705
> 
> 赞同：3
> 
> 时间：2012-08-01T17:46:12.080
> 
> 标签：ruby-on-rails, ruby, rest, yard

我在他们的网站上的任何地方都找不到。

这是我所拥有的：

```
# {Page::Section} 
```

但是当我运行 yardoc 生成时，我得到了这个错误：

```
[warn]: In file `app/controllers/pages_controller.rb':2: Cannot resolve link to Page::Section from text:
[warn]: ...{Page::Section}... 
```

当我转到编写上述文档的 api 页面时，它只显示纯文本，而不是指向该对象页面的链接。

我怀疑，上述错误是因为它从未找到这个类：

```
class Page::Section < ActiveRecord::Base 
```

（但如果我将其更改为 PageSection，则文档呈现得很好）。

也许它与我正在使用的[yard-rest-plugin版本有关？](https://github.com/DerNalia/yard-rest-plugin/)我不确定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-08T15:40:07.163

我在命名空间控制器上遇到了这个问题。我很沮丧，但最终成为用户错误。

假设`class Inherited::ResourceController < InheritedController`

`{Inherited::ResourceController#show}`会工作，但`{InheritedController::ResourceController#show}`不会。（看，我告诉过你这是用户错误）

# css - 两列，左侧为固定宽度，右侧为动态宽度

> ID：11764706
> 
> 赞同：7
> 
> 时间：2012-08-01T17:46:19.850
> 
> 标签：css, html

我正在尝试实现一个内容，我需要有一个浏览器宽度的 100% 的部分，在其中我需要在左边有一个 200px 宽度的 div，在右边我需要有一个动态宽度的 div取决于浏览器的宽度。示例 .. 浏览器 = 900px -> 左 div 200px 右 div 700px。并且这两个 div 都具有动态高度，具体取决于我在其中放入了多少信息 .. 包装器 div 将采用这 2 个 div 高度中最大的一个..

到目前为止，我做了类似这样的 html

```
<section id="wrapper">
  <div id="list">
  </div>
  <div id="grid">
  </div>
</section> 
```

css

```
#wrapper {
    width: 100%;
    min-width: 1000px;
    margin: 0 auto;
    padding: 40px 0;
    overflow: hidden;
} 
```

现在我需要对#list 和#grid div 进行css。我希望有一个有效的解决方案，因为稍后我将在#grid div 中做同样的事情:)

提前谢谢你，丹尼尔！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-01T19:04:49.393

你可以用 CSS 来做到这一点。诀窍是使用浮动（左侧 div）和非浮动 div（右侧）。左侧（浮动）div 也需要有一个最小高度，否则如果左侧没有任何内容，右侧（非浮动）div 将占用左侧列的空间。

编辑：该权利`<div>`还应具有以下规则：

```
overflow: hidden;
display: block; 
```

使`overflow: hidden`右 div 表现为一列，否则其内容将围绕左 div 流动。

请注意，`#wrapper`不需要宽度，因为 a 的默认宽度`<div>`是 100%（因为您说它将占用浏览器窗口的整个宽度），并且还删除了它的边距。

这是一个示例（为了非 HTML5 浏览器，我将其更改`<section>`为`<div>`，但它的工作原理相同）。

我放置了背景颜色来区分所有元素。

[http://jsfiddle.net/pmv3s/1/](http://jsfiddle.net/pmv3s/1/)

这是全屏版本： http: [//fiddle.jshell.net/pmv3s/1/show/light/](http://fiddle.jshell.net/pmv3s/1/show/light/)

**CSS：**

```
#wrapper {
    padding: 40px 0;
    overflow: hidden;
    background-color: red;
    min-height: 5px;
}
#list {
    float: left;
    width: 200px;
    background-color: green;
    overflow: hidden;
    min-height: 100px;
}
#grid {
    display: block;
    float: none;
    background-color: blue;  
    min-height: 100px;
    overflow: hidden;    
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T18:06:31.050

这是使用一点 jQuery 为您提供的解决方案，因为我认为您的问题没有纯 CSS 解决方案（但我可能错了）。

[http://fiddle.jshell.net/L32uj/](http://fiddle.jshell.net/L32uj/)

# python - 您可以将参数添加到 Django 自定义管理操作吗？

> ID：11764709
> 
> 赞同：22
> 
> 时间：2012-08-01T17:46:30.303
> 
> 标签：python, django, admin, models

例如（不是这种情况，只是为了说明）如果我想添加一个操作以将所选项目中的特定字段设置为 X。是否可以添加一个操作以允许输入 X 而不是硬编码？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-01T17:53:39.933

请参阅：[提供中间页面的操作](https://docs.djangoproject.com/en/dev/ref/contrib/admin/actions/#actions-that-provide-intermediate-pages)

您不能直接从更改列表页面执行此操作，但在中间页面上，您可以有一个允许用户输入值的表单，然后将该值用于操作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-01T12:13:35.643

It is possible with Django 1.5, though its a little hackish. I am not sure with what other older Django versions it's possible.

You write your own ModelAdmin subclass. ModelAdmin has an attribute called `action_form` which determines the form shown before `Go` button on changelist page. You can write your own form, and set it as action_form on your ModelAdmin subclass.

```
from django import forms
from django.contrib.admin.helpers import ActionForm
# ActionForm is the default form used by Django
# You can extend this class

class XForm(ActionForm):
    x_field = forms.CharField()

class YourModelAdmin(admin.ModelAdmin):
    action_form = XForm 
```

With these changes, you will have a `CharField`, where you can put value for `X`.

And use `x_field` in your action function.

```
def set_x_on_objects(modeladmin, request, queryset):
    for obj in queryset:
        obj.something = request.POST['x_field']
    # do whatever else you want

class YourModelAdmin(admin.ModelAdmin):
    action_form = XForm
    actions = [set_x_on_objects] 
```

# php - 将日期保存到数据库并使用 PHP 获取

> ID：11764710
> 
> 赞同：-4
> 
> 时间：2012-08-01T17:46:37.227
> 
> 标签：php, mysql, date, save

就像标题说的那样，我怎样才能使用这个日期函数将它保存为一个字符串，或者我以后可以把它从数据库中取出来？

```
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");
$newsTitel   = $_POST['title'];
$submitDate  = date('Y-m-d g:i:s A');
$newsContent = $_POST['newstext'];
mysql_query("INSERT INTO $tbl_name (Nieuwstitel, Nieuwsbericht, Postdatum) 
     VALUES('$newsTitel', '$newsContent', '$submitDate' ) ");
echo "Het bericht is successvol geplaatst!";
echo date('Y-m-d g:i:s A'); 
```

这会显示日期之类的新闻：2012 仅当它必须是完整长度时：

```
 mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
 mysql_select_db("$db_name")or die("cannot select DB");   
 $result = mysql_query("SELECT * FROM $tbl_name ORDER BY newsid DESC");
 $count = mysql_num_rows($result);
 while($row = mysql_fetch_array($result)){
 $count = mysql_num_rows($result);
  echo "<table class='newsList'>";

    echo "<tr><div id='nav'><th align='left'>".$row['Nieuwstitel']."</th>
              <th class='right'>".$row['Postdatum']."</div></tr>";
    echo "<tr><td colspan='2'>".$row['Nieuwsbericht']."<br/></td></tr>";
  echo "</table>";
  if ($count == 0){
     echo "<center><p>No news at the moment!</p><p>&nbsp;</p></center>";
  }
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:58:12.407

与其使用字符串日期，不如使用 MySQL 函数，稍后输出此值时，您可以简单地对其进行格式化。像这样使用 Now() 函数；

```
mysql_query("INSERT INTO $tbl_name (Nieuwstitel, Nieuwsbericht, Postdatum)       
VALUES('$newsTitel', '$newsContent', NOW()) "); 
```

这将为您提供当前的日期时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:59:07.560

我不同意任何说将数据库中的日期保存为 unix 时间戳的人（因为许多 PHP 程序员似乎出于懒惰而想要这样做）。这使得表中的数据更难以人类可读的形式读取，并且更难使用 MySQL 的日期/时间函数进行查询。

如果您只是想在查询时设置当前时间戳，我实际上建议在您的插入查询中使用 mysql 的 NOW() 函数，例如：

```
mysql_query("INSERT INTO $tbl_name (Nieuwstitel, Nieuwsbericht, Postdatum) VALUES('$newsTitel', '$newsContent', NOW() ) "); 
```

这消除了您在 PHP 中执行任何时间公式的需要。

# python - 为什么数据库行元组中的整数具有“L”后缀？

> ID：11764713
> 
> 赞同：48
> 
> 时间：2012-08-01T17:46:48.640
> 
> 标签：python, mysql

我的问题是为什么 MySQL 行的整数值有一个“L”后缀？以下是详细信息：

下面的字典——为了便于展示，这里人工格式化——

```
{'estimated': '', 
 'suffix': '', 
 'typeofread': 'g', 
  'acct_no': 901001000L, 
  'counter': 0, 
  'time_billed': datetime.datetime(2012, 5, 1, 9, 5, 33), 
  'date_read': datetime.datetime(2012, 3, 13, 23, 19, 45), 
  'reading': 3018L, 
  'meter_num': '26174200'} 
```

由 MySQL 数据库表的列组成，该列压缩了从表中读取一次的结果。

我可以通过将这些值传递给 int() 来删除“L”，因此如果该字典位于名为 snapped_read 的变量中，我可以这样做：

`int(snapped_read['reading'])`并将`3018L`更改为`3018`.

我只是好奇为什么整数会以这种方式出现。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-01T17:51:30.870

因为在 Python 3 之前的 Python 版本中，长整型字面量用`l`or`L`后缀表示。在 Python 3 中，`int`s 和`long`s 已合并为 just `int`，其功能与以前非常相似`long`。

请注意，从技术上讲，Python(2)'s`int`等同于 C's `long`，而 Python's`long`更像是`BigNumber`具有无限精度的 -type 事物（现在是 Python 3 的`int`类型的情况。）

[http://docs.python.org/library/stdtypes.html#numeric-types-int-float-long-complex](http://docs.python.org/library/stdtypes.html#numeric-types-int-float-long-complex)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-01T17:50:34.500

`L`用于`long`数据类型。

例如，

```
age = 24 # int
bankBalance = 20000005L # long 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-01T17:51:53.147

因为它们不完全是整数，所以它们是“长整数”。

[http://docs.python.org/library/stdtypes.html#typesnumeric](http://docs.python.org/library/stdtypes.html#typesnumeric)

不过，它们通常不会带来太多麻烦

```
>>> a=1
>>> b=long(1)
>>> a
1
>>> b
1L
>>> a==b
True 
```

关于这个的其他stackoverflow问题：[这里](https://stackoverflow.com/questions/2104884/how-does-python-manage-int-and-long)

# javascript - 在 javascript for 循环的迭代之间应用延迟

> ID：11764714
> 
> 赞同：8
> 
> 时间：2012-08-01T17:46:51.470
> 
> 标签：javascript, jquery, for-loop, delay, underscore.js

是否可以使用 jQuery 或下划线对 javascript for 循环的连续迭代应用延迟？我的页面上有一个 for 循环，用于在用户满足某些条件时弹出咆哮通知，如果有多个条件，我想错开咆哮通知而不是同时弹出多个。这是有问题的循环：

```
var badge_arr = response.split("Earned badge:");
//Start at 1 so I'm not getting everything before the first badge
for(i = 1; i < badge_arr.length; i++){
    responseStr += badge_arr[i];
    //Create growl notification
    //badge info echoed back will be of the form 
    //Earned badge: name: description: imgSource
    var badge_info = badge_arr[i].split(':');
    var title = 'NEW BADGE UNLOCKED';
    var text = 'You just unlocked the badge '+badge_info[0]+': '+badge_info[1];
    var img = badge_info[2];
    createGrowl(title, text, img);
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-01T17:50:04.690

```
for(i = 1; i < badge_arr.length; i++){
    (function(i){
        setTimeout(function(){
            responseStr += badge_arr[i];
            //Create growl notification
            //badge info echoed back will be of the form 
            //Earned badge: name: description: imgSource
            var badge_info = badge_arr[i].split(':');
            var title = 'NEW BADGE UNLOCKED';
            var text = 'You just unlocked the badge '+badge_info[0] +
                       ': '+badge_info[1];
            var img = badge_info[2];
            createGrowl(title, text, img);
        }, 1000 * i);
    }(i));
} 
```

**插图：**

```
for(i = 1; i <= 8; i++){
    (function(i){
        setTimeout(function(){
            document.body.innerHTML += i + "<br/>"
        }, 1000 * i);
    }(i));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-29T23:43:08.233

我更喜欢使用接收多次迭代的自调用函数：

```
(function loop(i) {          
   setTimeout(function () {   

      console.log('hello world'); // your code

      if (--i) loop(i); // iteration counter
   }, 5000) // delay
})(10); // iterations count 
```

# javascript - 带有砌体的网格视图/列表视图

> ID：11764720
> 
> 赞同：0
> 
> 时间：2012-08-01T17:47:22.050
> 
> 标签：javascript, jquery, grid, jquery-masonry

自 2 天以来，我一直在解决这个问题。 [http://jsfiddle.net/DSk8D/](http://jsfiddle.net/DSk8D/)

我想用网格视图实现 jquery.masonry，但是 jquery 钩子错了`$('#products.grid').masonry({`？只有在刷新时它才会起作用 - 嗯很奇怪。我尝试了很多东西，但没有任何效果。

我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:19:45.843

当您希望文档上的网格视图准备好时，您需要在加载文档后将网格类分配给产品 ID：

```
$("#products").addClass("grid");
```

. 如果可能，您可以将其添加到您的 html 模板中：

```
 <div id="products" class="grid"> 
```

# iphone - IOS UILlabel sizeToFit

> ID：11764726
> 
> 赞同：0
> 
> 时间：2012-08-01T17:48:22.547
> 
> 标签：iphone, ios, xcode, uilabel, sizetofit

我想使用 sizeToFit 方法在 UILabel 中显示可变数量的文本。它可以完美地显示所有文本......但是有没有办法使用 sizeToFit 达到某个最大帧高度。

换句话说，我想让 sizeToFit 将框架大小增加到某个点，以便显示更多文本，但不一定是所有文本。

是否有一些解决方法或方法可以做到这一点？

谢谢！xcode 4.3.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:58:12.507

我认为您可以获得动态宽度并使用字体大小和文本字符串将其设置为标签..

# ruby-on-rails - rspec 验证失败：“不能为空”

> ID：11764732
> 
> 赞同：2
> 
> 时间：2012-08-01T17:48:40.703
> 
> 标签：ruby-on-rails, rspec

我无法解决以下 rspec 验证错误：

```
Failures:

  1) User treating associations should have the right treatings in the right order
     Failure/Error: FactoryGirl.create(:treating, requestor: @user, created_at: 1.day.ago)
     ActiveRecord::RecordInvalid:
       Validation failed: Requestee can't be blank
     # ./spec/models/user_spec.rb:143:in `block (3 levels) in <top (required)>' 
```

我正在处理两个模型，用户和治疗（将其视为会议）：

用户.rb

```
class User < ActiveRecord::Base
    attr_accessible :name, :email, :password, :password_confirmation
    has_secure_password

    has_many :sent_treatings, :foreign_key => "requestor_id", :class_name => "Treating", dependent: :destroy
    has_many :received_treatings, :foreign_key => "requestee_id", :class_name => "Treating", dependent: :destroy

end 
```

治疗.rb

```
class Treating < ActiveRecord::Base
  attr_accessible :intro, :proposed_date, :proposed_location

  validates :intro, presence: true, length: { maximum: 190 }
  validates :requestor_id, presence: true
  validates :requestee_id, presence: true

    belongs_to :requestor, class_name: "User"
    belongs_to :requestee, class_name: "User"

    default_scope order: 'treatings.created_at DESC'

end 
```

最后，我的 user_spec 中给我这个错误的部分：

```
describe "treating associations" do
        before { @user.save }
        let!(:older_treating) do
            FactoryGirl.create(:treating, requestor: @user, created_at: 1.day.ago)
            FactoryGirl.create(:treating, requestee: @user, created_at: 1.day.ago)

        9end
        let!(:newer_treating) do
            FactoryGirl.create(:treating, requestor: @user, created_at: 1.hour.ago)
            FactoryGirl.create(:treating, requestee: @user, created_at: 1.hour.ago)
        end

        it "should have the right treatings in the right order" do
            @sent_treating = requestor.sent_treatings.build(intro: "Lorem ipsum")
            @sent_treating.requestee = requestee

            @received_treating = requestee.received_treatings.build(intro: "Lorem ipsum")
        @received_treating.requestor = requestor

            requestor.sent_treatings.should == [newer_treating, older_treating]
            requestee.received_treatings.should == [newer_treating, older_treating]
        end 
```

我不确定为什么 'requestee' 在这里会是空白的并且可以使用一些帮助。谢谢你。

编辑：工厂在下面，谢谢！

```
FactoryGirl.define do
    factory :user do
        sequence(:name) { |n| "Person #{n}" }
        sequence(:email) { |n| "person_#{n}@example.com"}
        password "foobar"
        password_confirmation "foobar"

        factory :admin do
            admin true
        end
    end

    factory :treating do
    intro "Lorem ipsum"
  end

end 
```

（我尝试在 :treating 工厂的 'intro' 下方添加 'user'、'requestor' 和 'requestee'，但仍然没有成功）。当我在工厂文件中添加“用户”时（在“介绍”“Lorem ipsum”下方），我收到以下错误：

```
1) User treating associations should have the right treatings in the right order
     Failure/Error: FactoryGirl.create(:treating, requestor: @user, created_at: 1.day.ago)
     NoMethodError:
       undefined method `user=' for #<Treating:0x00000104fa0668>
     # ./spec/models/user_spec.rb:143:in `block (3 levels) in <top (required)>' 
```

当我将“请求者”和“请求者”添加到工厂而不是用户（除了使用）时，我收到以下错误：

```
Failures:

  1) User treating associations should have the right treatings in the right order
     Failure/Error: FactoryGirl.create(:treating, requestor: @user, created_at: 1.day.ago)
     ArgumentError:
       Trait not registered: requestee 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:33:47.390

问题是您的处理工厂没有定义请求者和被请求者，此外，您需要告诉 FactoryGirl 请求者和被请求者是用户的别名

```
factory :user, :aliases => [:requestor, :requestee]  do
    sequence(:name) { |n| "Person #{n}" }
    sequence(:email) { |n| "person_#{n}@example.com"}
    password "foobar"
    password_confirmation "foobar"

    factory :admin do
        admin true
    end
end

factory :treating do
    intro "Lorem ipsum"
    requestor
    requestee
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T22:43:41.430

这是解决方法。

factory.rb 需要在 :user trait 行中提到的别名为

```
FactoryGirl.define do

  factory :user, aliases: [:requestor, :requestee] do
    sequence(:name) { |n| "Person #{n}" }
    sequence(:email) { |n| "person_#{n}@example.com"}
    password "foobar"
    password_confirmation "foobar"

    factory :admin do
      admin true
    end
  end

  factory :treating do
    intro "Lorem ipsum"
    requestor
    requestee
  end

end 
```

最后，“治疗关联”测试需要将较旧/较新的接收/发送治疗（4 个变体）分解为：

```
describe "treating associations" do
  before { @user.save }
  let!(:older_sent_treating) do
    FactoryGirl.create(:treating, requestor: @user, created_at: 1.day.ago)
  end
  let!(:older_received_treating) do
    FactoryGirl.create(:treating, requestee: @user, created_at: 1.day.ago)
  end
  let!(:newer_sent_treating) do
    FactoryGirl.create(:treating, requestor: @user, created_at: 1.hour.ago)
  end
  let!(:newer_received_treating) do
    FactoryGirl.create(:treating, requestee: @user, created_at: 1.hour.ago)
  end       

  it "should have the right treatings in the right order" do
    @user.sent_treatings.should == [newer_sent_treating, older_sent_treating]
    @user.received_treatings.should == [newer_received_treating, older_received_treating]
  end
end 
```

那么测试应该通过。谢谢！

# php - 如何保存包含教义嵌入表格的 sfForm？

> ID：11764736
> 
> 赞同：0
> 
> 时间：2012-08-01T17:48:51.860
> 
> 标签：php, symfony1, symfony-1.4, symfony-forms

我有一个基于 KanoonGood 模型类的学说形式（KanoonGoodForm），如下所示：

```
class KanoonGoodForm extends BaseKanoonGoodForm
{
    public function configure()
    {
       $this->widgetSchema['count_num']->setAttribute('size', '1');
       $this->widgetSchema['price']->setAttribute('size', '1');

       $this->validatorSchema['category_id']->setOption('required', false);
       $this->validatorSchema['owner_id']->setOption('required', false);
       $this->validatorSchema['shop_id']->setOption('required', false);
       $this->validatorSchema['name']->setOption('required', false);
       $this->validatorSchema['price']->setOption('required', false);
       $this->validatorSchema['count_num']->setOption('required', false);
       $this->validatorSchema['description']->setOption('required', false);
    }
} 
```

然后我制作了 KanoonGoodsGroupForm 类，以拥有一个包含任意数量的嵌入式 KanoonGoodForm 表单的表单：

```
class KanoonGoodsGroupForm extends sfForm
{
    public function configure() 
   { 
       for ($i = 0; $i < 2; $i++) 
       {
           $this->embedForm('good_'.($i+1), new KanoonGoodForm());
       }
       $this->widgetSchema->setNameFormat('KanoonGoodsGroup[%s]');
       $this->mergePostValidator(new KanoonGoodValidatorSchema());
   }
} 
```

在一个模块（名为 good）中，当调用新操作时，我会回显 KanoonGoodsGroupForm 的一个实例：

```
public function executeNew(sfWebRequest $request)
{
    $this->form = new KanoonGoodsGroupForm();
} 
```

因为不需要填写所有嵌入的表格，正如本文[所说](http://www.symfony-project.org/more-with-symfony/1_4/en/06-Advanced-Forms)，我制作了自己的验证器：

```
class KAnoonGoodValidatorSchema extends sfValidatorSchema
{
  protected function configure($options = array(), $messages = array())
  {
    $this->addMessage('category_id', 'The category_id is required.');
    $this->addMessage('owner_id', 'The owner_id is required.');
    $this->addMessage('shop_id', 'The shop_id is required.');
    $this->addMessage('name', 'The name is required.');
    $this->addMessage('price', 'The price is required.');
    $this->addMessage('count_num', 'The count_num is required.');
    $this->addMessage('description', 'The description is required.');
  }

  protected function doClean($values)
  {
    $errorSchema = new sfValidatorErrorSchema($this);

    foreach($values as $key => $value)
    {
      $errorSchemaLocal = new sfValidatorErrorSchema($this);
      // no caption and no filename, remove the empty values
      if (!$value['name'] && !$value['price']&& !$value['count_num']&& !$value['description'])
      {
        unset($values[$key]);
      }

      // some error for this embedded-form
      if (count($errorSchemaLocal))
      {
        $errorSchema->addError($errorSchemaLocal, (string) $key);
      }
    }

    // throws the error for the main form
    if (count($errorSchema))
    {
      throw new sfValidatorErrorSchema($this, $errorSchema);
    }

    return $values;
  }
} 
```

现在我想保存那些由用户填写的嵌入式表单，我应该在我的创建操作中做什么来完成这个？

```
public function executeCreate(sfWebRequest $request)
{
    $this->forward404Unless($request->isMethod(sfRequest::POST));
    $this->form = new KanoonGoodsGroupForm();
    $this->form->bind($request->getParameter('KanoonGoodsGroup'), $request->getFiles('KanoonGoodsGroup'));

    if ($this->form->isValid())
    {

         //what should I do here? to save those filled embedded forms?
    }

   $this->setTemplate('edit');
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T13:00:22.250

当我遇到类似的问题时，我用自定义的 save() 方法解决了这个问题，它是这样的嵌入式表单的集合

```
public function save($conn = null){
    foreach ($this->getEmbeddedForms() as $key => $form) {
        $object = $form->getObject();
        $object->merge($this->getValue($key));
        $object->save($conn);
    }
} 
```

它遍历嵌入式表单并将其对象与来自组表单的经过验证的数据合并，然后保存它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:00:42.737

您必须致电：

```
$this->form->save(); 
```

**但是**，你必须实现相关的部分`saveEmbeddedForms`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T17:28:51.730

您将必须为 KanoonGoodsGroupForm 实现保存方法，如下所示：

```
public function save() {
    $this->updateObjectEmbeddedForms($this->getTaintedValues());
    $this->saveEmbeddedForms();
  }

  public function saveEmbeddedForms($forms = null) {
    if (null === $forms) {
      $forms = $this->embeddedForms;
    }

    foreach ($forms as $form) {
      if ($form instanceof sfFormObject) {
        $form->getObject()->save();
        $form->saveEmbeddedForms();
      } else {
        $this->saveEmbeddedForms($form->getEmbeddedForms());
      }
    }
  }

  public function updateObjectEmbeddedForms($values, $forms = null) {
    if (null === $forms) {
      $forms = $this->embeddedForms;
    }

    foreach ($forms as $name => $form) {
      if (!isset($values[$name]) || !is_array($values[$name])) {
        continue;
      }

      if ($form instanceof sfFormObject) {
        $form->updateObject($values[$name]);
      } else {
        $this->updateObjectEmbeddedForms($values[$name], $form->getEmbeddedForms());
      }
    }
  } 
```

# java - 我无法在 google chrome 或 safari 中放置小程序

> ID：11764737
> 
> 赞同：0
> 
> 时间：2012-08-01T17:48:59.650
> 
> 标签：java, macos, google-chrome, safari, applet

我正在学习 HTML，我正在尝试将我的小程序放入我的 HTML 文件中。当我用 Firefox 打开它时，它运行良好，但是当我尝试用 chrome 或 safari 打开它时，它失败了。铬 说：

```
load: class Main.class not found. 
```

这是我正在使用的标签：

```
<applet code="Main.class" width="500" height="500"></applet> 
```

我已将 Main.class 与 HTML 文件放在同一个文件夹中。
我正在运行 Mac，但我在另一台运行 Windows 7 的计算机上尝试了它，它与 chrome 一起使用。

帮助！我的mac闹鬼了吗？

我正在运行苹果公司的 java 版本 1.6.0_33

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:46:31.500

尝试这样修改html代码

```
<applet code="Main" width="500" height="500"></applet> 
```

* * *

报告是否有帮助

祝你好运

# xml - XML xs:int 十六进制值

> ID：11764738
> 
> 赞同：8
> 
> 时间：2012-08-01T17:49:05.790
> 
> 标签：xml, xsd, hex

我想将一个数字存储在 XML 文件中，类型为 of 或其他简单整数类型，但允许用户以十六进制格式输入数字。XML 标准是否允许这样做，因为我找不到任何相关的东西？

例如，如果 XSD 显示：

```
<xs:element name="value" type="xs:integer" use="required" /> 
```

然后我希望 XML 能够说：

```
<value>0xFF00FF</value> 
```

或任何十六进制表示法。

显然我可以尝试它，但这仅证明对一个特定实现的支持，而不是它是否是标准。我并不特别关心保存到 XML 是否会失去基础。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-27T09:06:56.507

我会在元素中使用[正则表达式。](https://en.wikipedia.org/wiki/Regular_expression)`<xs:pattern>`

```
<xs:element name="value" use="required">
  <xs:simpleType>
    <xs:restriction base="xs:string">
      <xs:pattern value="0x[0-9A-Fa-f]+|[0-9]+"/>
    </xs:restriction>
  </xs:simpleType>
</xs:element> 
```

这允许您存储十进制和十六进制数（带有强制`0x`前缀）。但是，在将字符串转换为数字时，您需要专门处理它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T18:23:14.400

我不这么认为。`xs:integer`是 的派生/子集类型`xs:decimal`，其表示[定义为](http://www.w3.org/TR/xmlschema-2/#decimal)

> decimal 有一个词法表示，由一个有限长度的十进制数字序列 (#x30-#x39) 组成，由句点分隔作为十进制指示符。允许使用可选的前导符号。如果省略符号，则假定为“+”。前导零和尾随零是可选的。如果小数部分为零，则可以省略句号和后面的零。例如：-1.23、12678967.543233、+100000.00、210。

您可以删除 0x 并将其设置为 hexBinary，尽管您丢失了数字语义。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-25T01:56:34.720

我自己需要这个并在这里结束。

这是一个 32 位无符号整数类型，允许您以十六进制或十进制输入值。

```
<xs:simpleType name="U32BitHexInt">
  <xs:union memberTypes="xs:unsignedInt">
    <xs:simpleType>
      <xs:restriction base="xs:token">
        <xs:pattern value="0x[0-9A-Fa-f]{8}"/>
      </xs:restriction>
    </xs:simpleType>
  </xs:union>
</xs:simpleType> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T22:16:23.557

XSD 不允许这样做。

但是 XSD 1.1 确实允许实现定义的方面，包括前词汇方面，并且 Saxon 利用这种自由来提供这里描述的 saxon:preprocess 方面：

[http://www.saxonica.com/documentation/#!schema-processing/extensions11/preprocess](http://www.saxonica.com/documentation/#!schema-processing/extensions11/preprocess)

这将允许您接受十六进制表示法作为整数类型的词法表示。唯一的缺点（可能是一个大缺点！）是它只适用于撒克逊人。

# html - 愚蠢的 HTML 放置问题：强制一个元素低于另一个元素？

> ID：11764743
> 
> 赞同：8
> 
> 时间：2012-08-01T17:49:24.510
> 
> 标签：html, css, layout, placement

我的基本布局是这样的：

```
<table>
...
</table>
<table>
...
</table> // There's actually five tables, but that's irrelevant
<img .../>
</body> 
```

我正在尝试将图像变成页脚，在所有表格下方，但我能做到的最好的办法是它卡在表格的右侧（我的屏幕很大，所以它可能会在表格下方为您环绕，但不适合我）或者我可以使用 position:absolute 让它漂浮在桌子的正上方。我一辈子都无法将图像强行包裹在桌子下面。

我尝试将图像包装在一个 div 中，并将各种属性/属性组合添加到 div 中，但就像我说的那样，它们都会产生上面列出的两个坏结果之一。

谁能提供某种解决方案？

我已经看到了其他一些 SO 问题，例如[如何强制 div 出现在下面而不是紧挨着另一个？](https://stackoverflow.com/questions/2492873/how-to-force-div-to-appear-below-not-next-to-another)，但我根本不理解该解决方案（ float:left 如何强制某些东西低于其他东西？）而且我也不相信该解决方案需要额外的 wrapper `<div>`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T17:53:51.633

```
<div>
<table>
...
</table>
<table>
...
</table>

</div>
<div style="clear:both;">
<img .../>
</div>

</body> 
```

或使用 css。并为 img 或 div 标签创建样式。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-01T17:53:27.207

在包含表格的最后一个 div 之后，只需添加：

```
<div style="clear:both"></div> 
```

它有效:) 您的 div 正在使用，`float: left`因此您必须放置一个 div 告诉它停止所有这些浮动！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T17:53:35.303

将以下样式应用于图像。

```
<img style="display:block;clear:both;" .../> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T17:52:39.110

你可以用css来做。为您的图像添加一个类，然后将其更改为阻止或清除浮动。例如，

HTML：

```
<img src="" class="my-img" /> 
```

CSS：

```
.my-img
{
display:block;
/*Or*/
clear:both;
} 
```

# java - 如何在 main() 中创建每个其他类都可以访问的对象？（爪哇）

> ID：11764752
> 
> 赞同：0
> 
> 时间：2012-08-01T17:50:19.087
> 
> 标签：java, oop, scope

所以我想使用我在 main 方法中使用的相同对象，以便所有其他类都可以访问。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T17:53:35.983

该对象必须在`main`方法外部声明为`static`. 有了这个，所有类都可以访问对象的同一个实例，因为它只能是同一个 JVM 中的一个。浏览[Oracle 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T17:51:04.263

`static`您应该在任何类中创建一个字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T17:56:23.987

您可以将其`static`置于方法之外，`main`也可以将其传递给其他类的构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T17:58:07.840

您还可以使用单例模式，它以最简单（和线程安全）的形式看起来像

```
public class Single {
    private static final INSTANSE = new Single();
    //disallow instantiation outside
    private Single() {
    }
    public Single getInstance() {
         return INSTANCE;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T17:58:37.387

您不能在 main 方法中声明它。您必须将其声明为类下的静态变量。

IE：

```
public class Temp
{
    public static String a = "";
    public static void main(String[] args)
    {
        a = "asdf";
    }
} 
```

现在，您可以通过调用 Temp.a 在任何地方访问变量 a

# javascript - Knockout.js foreach 非常慢

> ID：11764755
> 
> 赞同：6
> 
> 时间：2012-08-01T17:50:28.003
> 
> 标签：javascript, knockout.js

我正在尝试使用模板创建一个简单的标记。就像是：

```
<div class="list" data-bind="template: {name: 'mytemplate', data: someData}"></div>

<script id="mytemplate">
  <div class="item" data-bind="text: someText"></div>
</script> 
```

它工作得很好，但是如果我需要用这个模板渲染很多 div，它会很慢。创建每个 div 后的淘汰赛将其添加到文档中。但是，如果我这样做：

```
el = document.createElement("div");
applyBindings(myModel, el);

(div.list).innerHTML = el.innerHTML 
```

它工作得更快，但不方便。

也许 Knockout 有一些内置功能来创建一组元素，然后将这个组添加到文档中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T17:52:42.443

听起来 KO 正在使用您添加的每个 DIV 操作 DOM。DOM 遍历是昂贵的，并且会减慢页面的渲染速度。在 KO Github 下有一个未解决的问题：[https ://github.com/SteveSanderson/knockout/issues/248](https://github.com/SteveSanderson/knockout/issues/248)

在我看来，Knockout 目前还不能胜任处理大型 foreach 数据集的任务。Chrome 上的性能不错（因为 Chrome 很棒），但在 Internet Explorer 上性能很差（在旧版 IE 上更糟）：http: [//jsfiddle.net/StarcounterJack/FgSCw/](http://jsfiddle.net/StarcounterJack/FgSCw/)

不要使用 Knockout，而是尝试手动方法：首先在内存中创建 DIV，然后将它们一次全部插入 DOM。这就是您在使用 document.createElement() 的第二个示例中所做的。使用 jQuery，您可以这样做：

```
var newDiv = $("<div>my new div</div>");
var newDiv2 = $("<div>my new div2</div>");
newDiv.append(newDiv2);
$('body').append(newDiv); //only this last step traverses the DOM 
```

对于模板，我更喜欢使用 Mustache.js，使用 John Resig 的`<head><script type="text/templates">` [模板包含技巧](http://ejohn.org/blog/javascript-micro-templating/)加载模板，并通过我自己的 JavaScript 手动处理渲染。您可以更好地控制元素的呈现方式，并且可以在遇到像现在这样的性能问题时尝试不同的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-20T16:19:33.447

现在最好的解决方案可能是我的[knockout-fast-foreach 插件](https://github.com/brianmhunt/knockout-fast-foreach)。

它具有`O(1)`插入和删除功能，以及其他使其速度特别快的功能（即比您自己轻松完成的速度还要快）。

它是替换 KO 3.5（或 3.6）中当前 foreach 绑定的有力竞争者。

# sql - 如何在左连接中使用 LEN 函数？

> ID：11764762
> 
> 赞同：1
> 
> 时间：2012-08-01T17:50:49.283
> 
> 标签：sql, sql-server, left-join

```
SELECT DISTINCT
        Positions.Issuer_Name
    FROM
     Positions
        LEFT JOIN
        (
            SELECT DISTINCT
              [Assetid]
            FROM
                Report
        ) Report ON
            Report.[Assetid] = Positions.CUSIP //here instead of Report.[Assetid] i need to use `"right([Assetid], Len([Assetid])-1)"` 
```

我需要使用`"right([Assetid], Len([Assetid])-1)"`它来删除第一个字母并进行比较`"Positions.CUSIP"`

写这个更好的方法是什么？

而不是像这样写

`" ) Report ON Report.right([Assetid], Len([Assetid])-1) = Positions.CUSIP"`

我应该先声明变量并先做，`"right([Assetid], Len([Assetid])-1)"`但是我如何在 JOIN 中使用它呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T18:01:57.977

这取决于您要执行的操作，您是要根据当时的`right()`值进行比较，还是要在以下`right()`值之前进行比较：

```
SELECT DISTINCT p.Issuer_Name
FROM Positions p
LEFT JOIN
(
    SELECT DISTINCT Right([Assetid], Len(Assetid)-1) TrimmedAssetid, [Assetid]
    FROM Report
) r 
    ON r.TrimedAssetid = p.CUSIP 
```

或者

```
SELECT DISTINCT p.Issuer_Name
FROM Positions p
LEFT JOIN
(
    SELECT DISTINCT [Assetid]
    FROM Report
) r 
    ON Right(r.Assetid,  Len(r.Assetid)-1)) = Positions.CUSIP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:59:52.830

尝试这个 ：

AssetID 是您需要与别名一起使用的列

```
SELECT DISTINCT
    Positions.Issuer_Name
FROM
 Positions
    LEFT JOIN
    (
        SELECT DISTINCT
          [Assetid]
        FROM
            Report
    ) Report ON
        right(Report.[Assetid], Len(Report.[Assetid])-1) = Positions.CUSIP 
```

# c - 在c中绘制一个sin函数

> ID：11764769
> 
> 赞同：-3
> 
> 时间：2012-08-01T17:51:12.560
> 
> 标签：c, math, trigonometry

我正在尝试在 C 中绘制（使用 ASCII 文本字符）一个 sin 函数，其中“y”分量作为幅度，但我不太确定该怎么做。

我走了这么远：http: [//i.imgur.com/sTR4E.jpg](http://i.imgur.com/sTR4E.jpg)

然后我想尝试使用 sin 函数，所以我写了`y = x * sin();`

但我不断收到错误：http: [//i.imgur.com/olQM4.jpg](http://i.imgur.com/olQM4.jpg)

输出应该是这样的：

```
***
*****
*** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:11:25.557

给你：

```
#include <stdio.h>
#include <math.h>

#define RESOLUTION 20
#define AMPLITUDE  80
#define ZxPI 6.283

int main()
{
    int i;

    for( i=1; i<=RESOLUTION; i++ )
    {
        float x = (AMPLITUDE/2) * (sin( (ZxPI / RESOLUTION)*i ) + 1);
        int y = x ;
        while( y-- )
        {
            printf("*");
        }
        printf("\n");
    }

    return 0;
} 
```

# javascript - 在javascript中进行回发之前的延迟

> ID：11764770
> 
> 赞同：0
> 
> 时间：2012-08-01T17:51:14.087
> 
> 标签：javascript

我现在能想到的在 3 秒延迟后回发的唯一方法就是这样。

```
setInterval("__doPostBack('UpdatePanel1', '' )", 3000); 
```

我遇到的问题是它每 3 秒回发一次。有没有更好的方法来做到这一点或清除间隔的方法？我正在使用一个 asp updatepanel 控件。

这是我完整的 javascript 代码，让您了解我正在尝试做的事情：

```
 var delayb4scroll = 1000 //Specify initial delay before marquee starts to scroll on page (2000=2 seconds)
    var marqueespeed = 2 //Specify marquee scroll speed (larger is faster 1-10)
    var pauseAtBottom = 3000 //Pause at the end of the scroll for this many seconds (3000 = 3 seconds)
    var copyspeed = marqueespeed
    var actualheight = ''
    var boolRunOnce = ''

    function pageLoad() {
        initializemarquee();
    }

    function scrollmarquee() {
        if (parseInt(cross_marquee.style.top) - 975 > (actualheight * (-1) + 8)) //if scroller hasn't reached the end of its height
            cross_marquee.style.top = parseInt(cross_marquee.style.top) - copyspeed + "px" //move scroller upwards
        else { //else, scrollbar has reached the bottom, display for 3 seconds then postback
            setInterval("__doPostBack('UpdatePanel1', '' )", 3000);        
        }
    }

    function initializemarquee() {
        cross_marquee = document.getElementById("vmarquee")
        cross_marquee.style.top = 0
        marqueeheight = document.getElementById("marqueecontainer").offsetHeight
        actualheight = cross_marquee.offsetHeight //height of marquee content (much of which is hidden from view)       
        setTimeout('lefttime=setInterval("scrollmarquee()",30)', delayb4scroll)
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:54:44.897

```
setTimeout(function() { __doPostBack('UpdatePanel1', '' ); }, 3000); 
```

只会运行一次。

或者您可以使用 setInterval 的返回值作为对间隔线程的引用，然后可以将其清除；

```
myInterval = setInterval(function() { __doPostBack('UpdatePanel1', '' ); }, 3000);
//later
clearInterval(myInterval); 
```

* * *

**编辑：**根据注释添加正确的函数语法。

# javascript - 在 Ajaxterm 中以 root 身份登录

> ID：11764777
> 
> 赞同：0
> 
> 时间：2012-08-01T17:51:35.407
> 
> 标签：javascript, python, ajax, bash, terminal

我正在尝试使用`Ajaxterm`，我记得大约一年前我第一次使用它时，有一些关于以 root 身份登录的事情。

谁能告诉我如何启用 root 登录或指向我的指南？许多不同的谷歌搜索都没有返回任何结果。

PS我的问题***不是***我是否*应该*以root身份登录，而是*如何*以root身份登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:01:14.113

以非 root 用户身份登录后，您可以仅以 root 用户身份`su`登录

# matlab - kmeans的matlab onlinephase选项与增量/顺序kmeans相同吗？

> ID：11764779
> 
> 赞同：2
> 
> 时间：2012-08-01T17:51:36.913
> 
> 标签：matlab, cluster-analysis, k-means

我只是在这里有点困惑。matlab中现有的kmeans函数是否有能力连续查找数据的kmeans？或者在线阶段是否意味着别的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:58:51.770

不，这`'onlinephase'`是在通常的“分配重新计算”迭代（在批处理模式下）之后作为第二步执行的。它保证在给定距离函数（也给定初始簇质心）的情况下找到局部最小解，方法是在簇之间移动点，直到距离的总和不能进一步减小。

不要将此与找到全局最小值混淆（我认为这是 NP 难题）

这在文档中有很好的解释：

> ### 算法
> 
> kmeans 使用两阶段迭代算法来最小化点到质心距离的总和，对所有 k 个集群求和：
> 
> *   第一阶段使用批量更新，其中每次迭代都包括一次将点重新分配到它们最近的集群质心，然后重新计算集群质心。此阶段有时不会收敛到局部最小值的解，即，将任何单个点移动到不同集群的数据分区会增加距离的总和。这对于小型数据集更有可能。批处理阶段很快，但可能仅将解决方案近似为第二阶段的起点。
>     
>     
> *   第二阶段使用在线更新，如果这样做会减少距离总和，则单独重新分配点，并且在每次重新分配后重新计算聚类质心。第二阶段的每次迭代都包含一次通过所有点。第二阶段将收敛到一个局部最小值，尽管可能存在其他距离总和较小的局部最小值。寻找全局最小值的问题通常只能通过详尽（或聪明或幸运）的起点选择来解决，但使用具有随机起点的多个复制通常会导致全局最小值的解决方案。

# objective-c - 委托连接以在 Cocoa-Applescript 中接收 shouldStartLoadWithRequest？

> ID：11764784
> 
> 赞同：1
> 
> 时间：2012-08-01T17:51:53.813
> 
> 标签：objective-c, macos, cocoa, webview, applescript

我正在尝试从 applescript/objective-c OSX 应用程序中的 WebView 接收 shouldStartLoadWithRequest 消息。

我想收到消息的applescript：

```
on webView_shouldStartLoadWithRequest_(request, navigation_type)
    log "should start!"
    return yes
end webView_shouldStartLoadWithRequest_ 
```

我被引导相信我在 IntefaceBuilder 中有错误的委托连接，但我已经尝试了所有看起来合理但仍然没有运气的方法。

```
downloadDelegate --> MyApp App Delegate
frameLoadDelegate --> MyApp App Delegate
resourceLoadDelegate --> MyApp App Delegate
UIDelegate --> MyApp App Delegate 
```

到目前为止没有运气。但是，我有其他消息正常工作（例如`webView_didStartProvisionalLoadForFrame_`工作正常）。

我需要连接或添加什么才能接收此事件？我对这种类型的编程很陌生，所以如果我遗漏了一些明显的东西，我深表歉意。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:00:14.827

您可能所做的一切都是正确的，但是由于没有发送消息，因此没有收到该消息。`webView:shouldStartLoadWithRequest:`不是 OS X 上任何 Web 视图委托协议中的方法。（它确实[存在于 iOS 上](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006951-CH3-SW6)。）

我对那些[不同的委托协议](http://developer.apple.com/library/mac/search/index.php?Search=webview+delegate)一点也不熟悉，但是根据您要完成的工作，似乎它们[`webView:resource:willSendRequest:redirectResponse:fromDataSource:`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebResourceLoadDelegate_Protocol/Reference/Reference.html%23//apple_ref/occ/instm/NSObject/webView%3aresource%3awillSendRequest%3aredirectResponse%3afromDataSource%3a)或者可能[`webView:decidePolicyForNavigationAction:request:frame:decisionListener:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Protocols/WebPolicyDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/20001912-SW2)有用。

# ruby-on-rails - Heroku迁移：PG ::错误：错误：关系“角色”不存在

> ID：11764785
> 
> 赞同：3
> 
> 时间：2012-08-01T17:51:54.883
> 
> 标签：ruby-on-rails, postgresql, heroku, migration

当我运行`heroku run rake db:migrate`将我的应用程序部署到 Heroku 的命令时，我收到此错误：

```
PG::Error: ERROR:  relation "roles" does not exist
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
              FROM pg_attribute a LEFT JOIN pg_attrdef d
                ON a.attrelid = d.adrelid AND a.attnum = d.adnum
             WHERE a.attrelid = '"roles"'::regclass
               AND a.attnum > 0 AND NOT a.attisdropped
             ORDER BY a.attnum

Tasks: TOP => db:reset => environment
(See full trace by running task with --trace) 
```

我也试过`heroku run rake db:reset`or `heroku restart`，但没有帮助我。

我在应用中使用的 RoR & PostgreSQL 版本是

```
gem 'rails', '3.2.1'
gem 'pg', '~> 0.13.2' 
```

在 localhost 上一切正常，但由于这个错误，我可以将我的数据库迁移到 Heroku。

谁能给我一些建议，如何解决这个问题？

太感谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:06:29.340

rails rake 命令在 Heroku 上受到限制。您可以使用“heroku pg”来操作数据库。'heroku pg help' 查看所有可用的命令。

尝试

```
heroku pg:reset SHARED_DATABASE 
```

然后：heroku 运行 rake db:migrate

然后重启：heroku restart

# android - 如何在 Android 上的 Phonegap 中获取来电号码？

> ID：11764788
> 
> 赞同：0
> 
> 时间：2012-08-01T17:52:05.057
> 
> 标签：android, cordova

当有人从 Phonegap 应用程序呼叫我时，是否可以获取该号码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:24:06.490

不，Phonegap 不为此提供[事件](http://docs.phonegap.com/en/1.2.0/phonegap_events_events.md.html)。

# c# - Jira SOAP WSDL 缺少功能

> ID：11764794
> 
> 赞同：1
> 
> 时间：2012-08-01T17:52:23.740
> 
> 标签：c#, api, soap, jira

我正在尝试通过 C# 在 JIRA 上自动创建错误，并按照说明生成所需的服务。但是，似乎缺少许多重要功能。这是生成的 WSDL：

```
<wsdl:definitions 
    targetNamespace="http://my_jira_server/rpc/soap/jirasoapservice-v2"     
    xmlns:apachesoap="http://xml.apache.org/xml-soap"  
    xmlns:impl="http://my_jira_server/rpc/soap/jirasoapservice-v2" 
    xmlns:intf="http://my_jira_server/rpc/soap/jirasoapservice-v2" 
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
    xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<!--WSDL created by Apache Axis version: 1.3
Built on Oct 05, 2005 (05:23:37 EDT)-->
   <wsdl:portType name="JiraSoapService">
   </wsdl:portType>
   <wsdl:binding name="jirasoapservice-v2SoapBinding" type="impl:JiraSoapService">
       <wsdlsoap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
   </wsdl:binding>
   <wsdl:service name="JiraSoapServiceService">
      <wsdl:port binding="impl:jirasoapservice-v2SoapBinding" name="jirasoapservice-v2">
         <wsdlsoap:address location="http://my_jira_server/rpc/soap/jirasoapservice-v2"/>
      </wsdl:port>
   </wsdl:service>
</wsdl:definitions> 
```

当我在 Visual Studio 2008 中将服务引用添加到我的项目时，我得到了具有几个属性的 JiraSoapServiceClient 对象，除此之外我没有什么可以使用的。没有登录，没有获取，没有任何功能。任何想法为什么会发生这种情况？

# linux - Linux awk 列比较

> ID：11764795
> 
> 赞同：0
> 
> 时间：2012-08-01T17:52:28.987
> 
> 标签：linux, awk

我的数据如下所示：

```
 0 1 0 0
    0 0 0 1
    0 0 0 1
    0 1 0 0 
```

我想使用 awk 在同一列中直接打印所有带有 1 的后续行。我该怎么做？

编辑：

awk 中是否无法指定上一列，例如“$ 1-1”（我知道那是错误的顺便说一句）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:27:42.260

这过于简单，但它适用于您的示例数据：

```
awk '$0 == prev {print} {prev = $0}' inputfile 
```

如果要打印两行（相同）：

```
awk '$0 == prev {print; print} {prev = $0}' inputfile 
```

或者

```
awk '$0 == prev {print prev; print} {prev = $0}' inputfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:55:34.017

我假设每行都有**一个。** `1`进一步假设您的数据在 data.input 中。

**用法：**

```
awk -f foo.awk data.input 
```

**foo.awk：**

```
function printBlock() {
    for(i=0; i<N; i++) {
        print BLOCK[i];
    }
}

{
    for(col=1; col<=NF; col++) {
        if($col==1) break;
    }
    if(col != last_col) {
        if(N > 1) {
            printBlock()
        }
        N = 0
    }
    BLOCK[N++] = $0;
    last_col = col;
}

END {
    if(N > 1) {
        printBlock()
    }
} 
```

# windows - Windows Git 无法打开自定义差异工具

> ID：11764798
> 
> 赞同：1
> 
> 时间：2012-08-01T17:52:33.900
> 
> 标签：windows, git

我已经为此苦苦挣扎了好几个小时。我只是想让 git 打开一个自定义差异工具（Win 7 64bit）。我什至不在回购中，我只是想启动它。这是我的配置：

```
[diff]
tool = bc3
[difftool]
prompt = false
[difftool "bc3"]
cmd = \"C:/Program Files (x86)/Beyond Compare 3/BComp.exe\" \"$LOCAL\" \"$REMOTE\"
prompt = false
[merge]
tool = bc3
[mergetool]
prompt = false
keepBackup = false
[mergetool "bc3"]
cmd = \"c:/program files (x86)/beyond compare 3/bcomp.exe\" \"$LOCAL\" \"$REMOTE\" \"$BASE\" \"$MERGED\"
trustExitCode = true 
```

用两个测试文件执行这个命令，虽然 git bash 什么都不做，没有错误，什么也没有。

git difftool test.txt test2.txt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T19:10:08.843

此页面（[http://www.learnphpbasics.com/php-reference/git-on-windows-how-do-you-set-up-a-mergetool.html](http://www.learnphpbasics.com/php-reference/git-on-windows-how-do-you-set-up-a-mergetool.html)）建议使用 Cygwin`cygpath`来帮助解决路径差异。例子：

```
git config --global mergetool.fooTool.cmd 'fooTool.exe "$(cygpath -wla $BASE)" "$(cygpath -wla $LOCAL)" "$(cygpath -wla $REMOTE)" "$(cygpath -wla $MERGED)"' 
```

# javascript - 使 jquery 自动完成也由箭头控制

> ID：11764801
> 
> 赞同：0
> 
> 时间：2012-08-01T17:52:48.890
> 
> 标签：javascript, jquery, jquery-autocomplete

我正在创建一个网站以开始学习编码，并正在制作一个具有搜索自动完成功能的搜索网站。脚本在[这里](http://papermashup.com/jquery-php-ajax-autosuggest/)。

这很好用（对于 jquery 和编码初学者来说，它确实是一个很棒且简单的脚本！）但是当建议弹出时，我希望能够通过像谷歌一样在我的键盘上向上/向下移动来控制它们。我怎样才能做到这一点（我只知道关于 jquery 的最基本知识:)

超级感谢所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:55:20.230

也许考虑使用jQuerys自己的jQuery-UI库的自动完成：http: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

默认情况下，它具有键盘控件。

如果您像这样修改它，您可以使用您发布的解决方案中的 PHP 脚本：

```
$db = new mysqli('DB_HOST', 'USERNAME', 'PASSWORD', 'DATABASE_NAME');
//create array to store results
$results = array();

if ($db) {
  if (isset($_POST['queryString'])) {
    $queryString = $db->real_escape_string($_POST['queryString']);
    if (strlen($queryString) > 0) {
      $query = $db->query("SELECT country FROM countries WHERE country LIKE '$queryString%' LIMIT 10");
      if ($query) {
        while ($result = $query->fetch_object()) {
          //add results to array
          $results[] = $result->country;
        }
      }
    }
  }
}
//echo result array as JSON
echo json_encode($results); 
```

有关详细信息，请参阅[http://jqueryui.com/demos/autocomplete/#remote](http://jqueryui.com/demos/autocomplete/#remote)

# java - Android - 减少使用的活动数量

> ID：11764803
> 
> 赞同：0
> 
> 时间：2012-08-01T17:52:55.193
> 
> 标签：java, android, android-activity

我正在尝试一种方法，通过使用相同的活动切换布局来减少应用程序中使用的活动总数。我正在做的是-

```
/* Class A is the actual activity */
public class A extends Activity{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button but=(Button)findViewById(R.id.button1);
        but.setOnClickListener(new View.OnClickListener(){

        /*When the button is pressed, create an object of class B to switch layout*/
        public void onClick(View arg0) {
            B b=new B(A.this);
        }
        });
    }
}

/*Classs B handles some operation*/
public class B{

    Activity a;

    /*Set the new layout inside the constructor or call some other function to do that*/
    B(Activity act){
        a=act;
        a.setContentView(R.layout.newlayout);
    } 
```

所以，B类会切换布局，做一些操作。我想知道这种方法是否是好的做法，以及是否有其他方法可以做到这一点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:44:16.227

老实说，我认为这不是一个好的做法，因为这样可以使堆栈中的几个类保持活动状态，因为它们被始终运行的主要活动类引用，因此可能会浪费资源。

在我看来，管理几个处理特定任务的活动要好得多，原因有两个：

1.  它遵循面向对象的原则
2.  You delegate to the OS the task to manage resources. For this reason activity class has a lifecycle in order to optimise the resources.

# sql-server - TSQL 中的嵌套事务

> ID：11764818
> 
> 赞同：14
> 
> 时间：2012-08-01T17:53:46.613
> 
> 标签：sql-server, tsql

嗨，我目前对 TSQL 中嵌套事务的理解是，如果您有多个事务（多个事务嵌套在一个“外部”事务中），则必须提交所有事务（“外部”事务是最后一个）要对数据库进行更改。如果提交的数量少于打开的事务的数量，则不会进行与任何事务相关的更改。这是对嵌套事务如何工作的正确概述吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-01T18:03:10.583

你的描述`COMMIT`是正确的。

[Kalen Delaney 有一篇文章涵盖了您描述的相同类型的行为。](http://sqlblog.com/blogs/kalen_delaney/archive/2007/08/13/did-you-know-nesting-transactions.aspx)

然而，正如 Kalen 的文章中所讨论的，`ROLLBACK`嵌套事务中的一个内部事务将回滚整个外部事务，而不仅仅是发生回滚的内部事务。

请注意以下结果：

```
BEGIN TRAN
SELECT @@trancount
BEGIN TRAN
SELECT @@trancount
BEGIN TRAN
SELECT @@trancount

ROLLBACK TRAN
SELECT @@trancount 
```

这在 MSDN 文章[Nesting Transactions](http://msdn.microsoft.com/en-us/library/ms189336%28v=sql.105%29.aspx)中有描述：

> 没有事务名称的 ROLLBACK WORK 或 ROLLBACK TRANSACTION 语句回滚所有嵌套事务并将 @@TRANCOUNT 递减为 0。使用一组嵌套事务中最外层事务的事务名称的 ROLLBACK TRANSACTION 回滚所有嵌套事务并将 @@TRANCOUNT 减为 0。当您不确定是否已经在事务中时，请选择 @@TRANCOUNT 以确定它是否为 1 或更多。如果@@TRANCOUNT 为0，则您不在事务中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-01T18:05:37.290

简而言之，你的答案是肯定的。从[嵌套事务](http://msdn.microsoft.com/en-us/library/ms189336%28v=sql.105%29.aspx)：

> SQL Server 数据库引擎会忽略提交内部事务。基于在最外层事务结束时采取的操作，事务要么被提交，要么被回滚。如果提交了外部事务，则也提交了内部嵌套事务。如果外部事务被回滚，那么所有内部事务也会被回滚，而不管内部事务是否被单独提交。

对于 ROLLBACK，只允许 ROLLBACK 整个外部事务。

# asp.net - 使用 VB.NET MySQLDataReader 变量在单独的 MySQL 查询中表示文本框输入

> ID：11764819
> 
> 赞同：0
> 
> 时间：2012-08-01T17:53:48.903
> 
> 标签：asp.net, mysql, vb.net

我有一个内置在 ASP.NET 中的搜索表单，它有一个下拉列表，用于确定要从哪个表中搜索。两个表的结构相似，只是列名不同的地方，所以我把每个表的信息放在一个单独的表中。它基本上是这样设置的：

名称|表单字段名称|表格名称|表格列名称

从那里我设置了一个循环，它将根据下拉列表中的选择保存表单字段名称、表名称和列名称。循环将获取该信息并根据用户的输入使用 StringBuilder 构建单独的 MySQL 查询。这是循环：

```
If drFields.HasRows Then
    While drFields.Read()
        If drFields("ASPControlName") <> "" Then
            If strbQuery.ToString <> "" Then
                strbQuery.Append(" AND ")
            End If
            strbQuery.Append(" " & drFields("DBField") & " LIKE '%" & drFields("ASPControlName").ToString & "%' ")
        End If
    End While
End If 
```

我的问题，我相信你可以说，drFields("ASPControlName")，它充满了 txtFirstName.Text.Trim 的内容，只会出现 txtFirstName.Text.Trim 的字符串在里面。该变量不会像我想要的那样转换为引用文本框。

我知道这可能是一种倒退的方式，但它甚至有可能实现我想要的吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:58:21.070

> 我知道这可能是一种倒退的方式

非常真实。我不会继续这条路线。

> 但它甚至有可能实现我想要的吗？

是的，您可以使用反射来获取控件并调用您需要的属性以接收实际值，但由于这根本不是一个好方法，所以我不会提供示例。

此外，像您描述的那样构建动态查询需要特殊处理，以确保您不会将自己暴露在 SQL 注入攻击中。尝试重新考虑这里的策略。

很难建议对您有用的东西，因为我认为问题中没有足够的上下文，但通常，我会选择创建一个存储过程，该过程将根据某些参数执行我需要的查询。

一些可能有用的资源：

*   [在 MySQL 存储过程中将 FieldName 作为参数传递](https://stackoverflow.com/a/9994344/345490)
*   [从 .NET 调用 MySQL 准备好的语句](http://dev.mysql.com/doc/refman/5.0/es/connector-net-using-prepared.html)

# mysql - 选择列 x 中的值计数，其中 columnfoo = y

> ID：11764820
> 
> 赞同：-1
> 
> 时间：2012-08-01T17:53:50.993
> 
> 标签：mysql, sql

我一直在尝试做很多年，但似乎做不到，这是以下情况：

选择列 x 中的值计数，其中 columnfoo = y

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:57:52.410

试试这个：

```
SELECT COUNT(DISTINCT x) 
FROM table
WHERE columnfoo = y 
```

...或更一般地说，

```
SELECT columnfoo, COUNT(DISTINCT x) 
FROM table
GROUP BY columnfoo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T18:56:04.020

您可以[`CASE`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#operator_case)在聚合函数中使用表达式仅基于条件进行聚合：

```
SELECT COUNT(CASE WHEN columnfoo = 'y' THEN 1 END) AS y_count
FROM   tbl 
```

*如果 columnfoo = `y`，则将该行计入计数，否则，不要添加到计数中。*

这避免了必须过滤掉`WHERE`子句中的记录，以防您还想处理 columnfoo 不同的记录`y`。

示例：您可以同时根据不同的条件进行计数：

```
SELECT COUNT(CASE WHEN columnfoo = 'y' THEN 1 END) AS y_count,
       COUNT(CASE WHEN columnfoo = 'x' THEN 1 END) AS x_count,
       COUNT(CASE WHEN columnfoo = 'z' THEN 1 END) AS z_count
--     etc..
FROM   tbl 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T17:58:40.837

```
SELECT x, COUNT(x) FROM TABLE_NAME WHERE columnfoo = y GROUP BY x 
```

# objective-c - 使用变量设置默认的 NSView 填充颜色

> ID：11764825
> 
> 赞同：0
> 
> 时间：2012-08-01T17:54:29.213
> 
> 标签：objective-c, macos, nsview

我试图用一种颜色填充我`NSView`的颜色，但它没有使用我想要的颜色。它只是黑色的。

这是我对 NSView 子类的实现：

```
#import "OCOvalView.h"

@implementation OCOvalView

- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        bgColorValue = [NSColor greenColor];//I WANT IT TO BE FILLED GREEN
    }

    return self;
}

- (void)drawRect:(NSRect)dirtyRect
{
    [bgColorValue set];
    [NSBezierPath fillRect:[self bounds]];//BUT IT ENDS UP BLACK!!
}

@end 
```

`[bgColorValue set];`如果我更改为，它将起作用`[[NSColor greenColor] set];`，但我想使用如上所示的变量。

如何获得与'颜色相同`bgColorData`的颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:19:54.400

**解决方案：**由于我设置为`bgColorValue`within `initWithFrame:frame`，因此在这种情况下没有调用它。我现在将变量设置为：

```
-(void)awakeFromNib{
    bgColorValue = [NSColor greenColor];
} 
```

# html - 在 IE/Chrome 中打印平铺背景图像

> ID：11764826
> 
> 赞同：0
> 
> 时间：2012-08-01T17:54:32.070
> 
> 标签：html, css, printing

我的网页上有一种旋风，我正在使用平铺图像来制作垂直和水平线，沿着页面向下和穿过。页面在浏览器中显示时看起来不错，但是在打印垂直和水平线图像时不会平铺在页面上留下空白间隙。下面是我用来创建旋风左手部分的代码。

```
 <td style="width:100%;" colspan="2">
        <table border=0 cellpadding="0" cellspacing="0">
            <tr>
                <td style="width:170px;"><img src="CurveBottom.png" /></td>
                <td style="width:530px;background-image:url('HorizontalLine.png');">&nbsp;</td>
            </tr>

        </table>

    </td> 
```

# scroll - 如何以编程方式跨浏览会话捕获/测量帧速率？

> ID：11764827
> 
> 赞同：2
> 
> 时间：2012-08-01T17:54:31.900
> 
> 标签：scroll, google-chrome-devtools, frame-rate

我正在尝试为我的应用程序测量客户端性能——特别是帧速率/滚动延迟。我想知道是否有人找到了一种以编程方式捕获此类数据的好方法？我正在尝试比较随时间/变化的性能...... iow，给定的变化是否使滚动更顺畅？

到目前为止，我一直在做以下事情：
+开始“时间线”录制（使用开发工具的“时间线”功能/视图）
+运行一个以固定速率向下滚动的简单 js 例程
+查看/导出/分析 Chrome 的时间线数据

上述的缺点是使用 javascript 滚动页面的行为引入了它自己的性能成本，并且最终我从时间轴获得的数据是......非常彻底。理想情况下，我将能够获得某种汇总数据 - 例如：平均值、中位数、第 95 pct 帧长度/持续时间和最长帧。

有人对这种类型的事情有任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-31T20:54:37.533

您可以通过在 DevTools 窗口上打开 DevTools 窗口（“DevTools-On-DevTools”）以编程方式提取 FPS 数据，然后在控制台中运行命令以从 DevTools 模型中提取数据。这在这里介绍：

[https://stackoverflow.com/a/48081289/1669860](https://stackoverflow.com/a/48081289/1669860)

查看这个不相关的答案以获取有关“DevTools-On-DevTools”的更多帮助：

[https://stackoverflow.com/a/48198185/1669860](https://stackoverflow.com/a/48198185/1669860)

您也可以使用 Puppeteer 来实现这一点：

[https://github.com/GoogleChrome/puppeteer](https://github.com/GoogleChrome/puppeteer)

# android - 隐藏 android 网络服务 URL

> ID：11764828
> 
> 赞同：0
> 
> 时间：2012-08-01T17:54:34.790
> 
> 标签：android, web-services

当我连接到我的服务器时，我在 java 代码中显示它的地址，如下所示：

```
HttpClient httpclient = new DefaultHttpClient();

HttpPost httppost = new HttpPost("http://192.168.1.13/spotnshare/syncAddress.php");

httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost); 
```

但是我们告诉我，代码中的 IP 地址是不正确的，我猜我应该把它作为别名放在配置文件中。

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:32:50.453

在应用的配置文件中添加一个元素：

```
<resources>
  <string name="syncAddress">http://192.168.1.13/spotnshare/syncAddress.php</string> 
```

然后设置一个静态字符串来保存它，并读取配置：

```
public static String SYNCADDRESS = getResources().getString(R.string.syncAddress); 
```

每个[访问资源](http://developer.android.com/guide/topics/resources/accessing-resources.html)：

> 当您的应用程序被编译时，aapt 会生成 R 类，其中包含 res/ 目录中所有资源的资源 ID。对于每种类型的资源，都有一个 R 子类（例如，所有可绘制资源的 R.drawable），对于该类型的每种资源，都有一个静态整数（例如，R.drawable.icon）。此整数是可用于检索资源的资源 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:41:32.107

创建一个常数

```
public static final String URL_SYNCADRESS = "your url"; 
```

然后使用

```
HttpPost httppost = new HttpPost(URL_SYNCADRESS); 
```

# php - 在 PHP 脚本中包含一段 HTML 或 SSI？

> ID：11764833
> 
> 赞同：0
> 
> 时间：2012-08-01T17:54:47.947
> 
> 标签：php, html, cookies

我正在努力使我的网站符合欧盟 cookie 指令，并且在主页上，我需要帮助确定如何包含 cookie 警告消息以及禁用 Google Analytics 的脚本。

我已经为网站设置了一组偏好 cookie。

我的网站是用 SSI 制作的：meta header newsletter -- page content -- footer

在我的 Header SSI 中，在我的内容之前，在我的 body 标签打开之后，我需要包含一个我为征求 cookie 同意而制作的小页面 (/inc/cookies.shtml)

我将如何获得一个 php 脚本来插入 cookies.shtml 的内容？

我做了一些错误的代码:(:

```
<?php
if ($_COOKIE["shcpr"] == TRUE)
/* If the user has agreed to accept cookies, just stop this script or whatever */
{die()}
else
/* If the shcpr  cookie value is not TRUE, include the warning box */
{include 'inc/cookies.shtml'}

?> 
```

* * *

/inc/cookies.shtml

```
<div id="cookie-outer"> cookie warning content and form to consent and stuff is here </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:57:00.770

我很确定您应该在语句的末尾加上分号：

```
<?php
   if ($_COOKIE["shcpr"] == TRUE)
   /* If the user has agreed to accept cookies, just stop this script or whatever */
   { die(); }
   else
   /* If the shcpr  cookie value is not TRUE, include the warning box */
   { include('inc/cookies.shtml'); }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:58:11.130

很可能`$_COOKIE["shcpr"]`包含**字符串** `TRUE`。

```
<?php
if ($_COOKIE["shcpr"] == "TRUE")
/* If the user has agreed to accept cookies, just stop this script or whatever */
{die();}
else
/* If the shcpr  cookie value is not TRUE, include the warning box */
{include 'inc/cookies.shtml';}  
?> 
```

# c# - 无尽的（几乎）字母数字计数器

> ID：11764838
> 
> 赞同：1
> 
> 时间：2012-08-01T17:55:12.740
> 
> 标签：c#

尝试在此线程 [ [Alphanumeric Counter](https://stackoverflow.com/questions/3007308/alphanumeric-counter) ] 中的答案的基础上构建一个没有填充的无限（对于任何 int）字母数字计数器。

我想创建一个从 0 开始并计算类似这样的计数器。

0,1,2...Y,Z,10,11,12...1Y,1Z,20,21...ZY,ZZ,100,101...ZZZ,1000,1001 .. 无穷大（溢出）。 ...

计数器的目的是从我`INT`的数据库 ID 创建短 URL。我想输入行的 id 并从中获取一个基数为 36 的值，我可以将其用作 url。

我做了一些尝试，但似乎都错了。当我应该增加字符数时，我陷入了如何测试的问题。即从 Z 到 10 或从 ZZ 到 100。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T18:06:41.363

我认为这就是你想要的：

```
using System;
using System.Collections.Generic;

class Test
{
    static void Main()
    {
        foreach (string x in EndlessBase64Sequence())
        {
            Console.WriteLine(x);
        }
    }

    private static char NextBase36Char(char c)
    {
        if ((c >= '0' && c <= '8') ||
            (c >= 'A' && c <= 'Z'))
        {
            return (char) (c + 1);
        }
        if (c == '9')
        {
            return 'A';
        }
        throw new ArgumentException();
    }

    public static IEnumerable<string> EndlessBase64Sequence()
    {
        char[] chars = { '0' };

        while (true)
        {
            yield return new string(chars);

            // Move to the next one...
            bool done = false;
            for (int position = chars.Length - 1; position >= 0; position--)
            {
                if (chars[position] == 'Z')
                {
                    chars[position] = '0';
                }
                else
                {
                    done = true;
                    chars[position] = NextBase36Char(chars[position]);
                    break;
                }
            }
            // Need to expand?
            if (!done)
            {
                chars = new char[chars.Length + 1];
                chars[0] = '1';
                for (int i = 1; i < chars.Length; i++)
                {
                    chars[i] = '0';
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T17:59:06.407

[这个](http://www.codeproject.com/Articles/10619/Base-36-type-for-NET-C)“用于 .NET 的 Base 36 类型”项目似乎可以直接插入您需要的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T18:11:08.313

这就是我现在最终使用的。

它不是无限的，但我将我的 MVC3 模型 ID 更改为长（MVC3 不支持 ulong），最大值为 9223372036854775807。我怀疑我的系统会有比这更多的行。

```
 private const string base36Characters = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    public static string toBase36(long x)
    {
        String alpha ="";
        while(x>0){
            alpha = base36Characters[(int) (x % 36)] + alpha;
            x /= 36;
        }
        return alpha.ToLower();
    } 
```

测试它的数字高达 zzzzz，然后我的笔记本电脑停止工作......

# css - 将鼠标悬停在 Div 上并更改另一个，不行吗？

> ID：11764839
> 
> 赞同：0
> 
> 时间：2012-08-01T17:55:16.823
> 
> 标签：css, hover, css-transitions

我有一个 Div，我想要发生的事情是，当您将鼠标悬停在 div 1 上时，它会更改 div 2。

所以我可以用 CSS 来做到这一点，`.div1:hover .div2`这意味着当我将鼠标悬停在 1 上时，2 会发生变化。

我以前甚至在同一个样式表上都使用过它，但由于某种原因它不起作用。

这是CSS。

```
#slide {
width:220%;
height:300px;
text-align:center;
position:relative;
top:0px;
left:0px;
-webkit-transition: left 2s linear;
-moz-transition: left 2s linear;
-ms-transition: left 2s linear;
-o-transition: left 2s linear;
transition: left 2s linear;
}
.six {
position:relative;
top:0px;
left:0px;
background-color:#F00;
}
.six:hover #slide {
left:-100%;
} 
```

所以这对我来说看起来不错，它适用于相同的样式表，但有什么东西阻止了它？

任何想法都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:58:23.053

`.div1:hover .div2`选择器指的是“具有类的元素是悬停在其`div2`上的类的元素的子元素”，因此它仅在是.`div1``div2``div1`

如果您需要`div2`与 无关`div1`，那么您只能使用 JavaScript 执行此操作。像这样的东西（使用 jQuery 库）：

```
$('.div1').hover(function() {
    $('.div2').addClass('div1-hovered-on');
}, function() {
    $('.div2').removeClass('div1-hovered-on');
}); 
```

# datetime - 如何将日期时间字段从 OLTP 非规范化到 OLAP 数据库？

> ID：11764841
> 
> 赞同：0
> 
> 时间：2012-08-01T17:55:22.490
> 
> 标签：datetime, plugins, transform, pentaho, kettle

是否有任何插件可以通知 OLTP 数据库中的日期时间列，以便我可以将日期时间分解为年、月、日、小时、分钟和秒？或者在我找不到的网络上是否有关于该教程的教程？提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:08:37.190

只需使用“选择值”步骤。将您的日期字段转换为字符串，并设置格式掩码，例如 yyyy 年。然后做同样的事情来获得分钟/秒等。

您可以在选择值步骤中多次使用相同的字段，并且只要重命名该字段，您最终会在流中获得多个新字段。

# iphone - iOS：这个接口是怎么实现的？

> ID：11764847
> 
> 赞同：-2
> 
> 时间：2012-08-01T17:55:53.073
> 
> 标签：iphone, ios, xcode, ipad, uiscrollview

这是该应用程序[的链接](http://itunes.apple.com/gb/app/cinema-listings-guide-uk/id456423683?mt=8)。请参阅第一个选项卡的屏幕截图。

如您所见，内容是通过 XML 动态加载的。每行三个可点击的图像。这是在 UIScrollView 上加载的吗？你怎么能实现这个接口？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:21:23.383

有一个开源项目可以创建这样的网格视图。它被称为[AQGridView](https://github.com/AlanQuatermain/AQGridView)。它的设计使 API 非常类似于 UITableView 接口（具有委托和数据源等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:59:53.007

您只需将 UIImages 添加到 UIScrollView 即可实现此效果。您可以在运行时动态执行此操作。我为快速拨号应用程序做了类似的事情，您可以在其中单击图像来呼叫您的联系人。

当然，我不知道他们是不是那样做的；）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T18:53:34.880

这是一个相当模糊的问题。

构建一个包含图像大小的按钮的自定义视图，在按钮元素周围的视图中留出额外的空间（填充）（按钮应该在视图的中心）使视图背景清晰。然后编写方法来更新带有您下载的任何内容的按钮图像。创建委托以启用对您的 viewController 和中提琴的回调，您可以开始想要的东西。

然后将这些视图添加到 UIScrollView 中，您应该会获得所需的效果，只需确保相应地调整滚动视图的内容大小即可。至于三列布局，您应该能够解决这个问题:)

如果您需要比这更多的细节，请发表评论。

# android - 跨 Android 版本的 openOptionsMenu()

> ID：11764854
> 
> 赞同：1
> 
> 时间：2012-08-01T17:56:22.380
> 
> 标签：android, compatibility, android-3.0-honeycomb

我有一个设计为隐藏在所有意图中的标题栏的应用程序。我想从一个按钮使用 Activity.openOptionsMenu() 。它在 2.2 上运行良好，但是当我在蜂窝上运行应用程序时，调用 openOptionsMenu() 似乎不起作用。还有其他方法吗？

onclick 代码在这里，如果重要的话。这是在我的 mapview 活动中，扩展了 MapView：

```
 OnClickListener ocl =  new OnClickListener()
  {

     @Override
     public void onClick (View v)
     {
        switch (v.getId ())
        {
           case R.id.b_options:
                                  Log.d (TAG, "options clicked");
                                  mymapview.this.openOptionsMenu ();
           break;

           case R.id.b_prev:
                                  Log.d (TAG, "prev clicked");
           break;
        }

     }
  }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:00:56.370

你的应用程序中有一个 ActionBar 吗？我相信 openOptionsMenu() 仅适用于 Honeycomb 中随附的 ActionBar。ICS 不会带回菜单按钮，但您不再需要 ActionBar 来使 openOptionsMenu() 工作。

# ruby-on-rails - 删除资产预编译上的 console.log

> ID：11764856
> 
> 赞同：19
> 
> 时间：2012-08-01T17:56:26.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline

在 assets:precompile 期间，javascript 被缩小，但 console.logs 留在里面。

将代码推送到生产环境时，有没有办法在预编译时删除所有 console.logs？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-01-23T16:02:28.290

从 Uglifier 2.4.0 开始， :compress 选项包括对 :drop_console 的支持，这意味着您可以在 config/environments/production.rb 文件中使用类似的内容轻松删除所有 console.* 函数：

```
# Compress JavaScripts
config.assets.compress = true
config.assets.js_compressor = Uglifier.new(
  # Remove all console.* functions
  :compress => { :drop_console => true }
) if defined? Uglifier 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T05:28:39.477

您可以将此添加到`application.js.erb`. 该解决方案将阻止任何日志记录到`console.log()`生产环境中。但它仍然允许登录到`console.error()`.

```
<% if Rails.env.production? %>
  window.console = {};
  window.console.log = function(){};
<% else %>
  // the || in the code ensures IE compatability
  window.console = window.console || {};
  window.console.log = window.console.log || function(){};
<% end %> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T18:24:22.403

要为您指明正确的方向，请查看**[UglifyJS的](https://github.com/mishoo/UglifyJS)****[用作代码预处理器](https://github.com/mishoo/UglifyJS#use-as-a-code-pre-processor)**部分。

我需要研究更多关于如何在 中传递`--define DEVMODE=false`标志的信息，但是如上面链接中所述，调整代码以使用布尔值`rake assets:precompile`进行包装应该可以得到您正在寻找的结果。`console.log``DEVMODE`

**更新：**

在某些将在 期间加载的文件中`rake assets:precompile`，添加以下猴子补丁。

```
class Uglifier
  private
    def mangle_options
      {
        "mangle" => @options[:mangle],
        "toplevel" => @options[:toplevel],
        "defines" => { DEVMODE: ["name", "null"] }, # This line sets DEVMODE
        "except" => @options[:except],
        "no_functions" => @options[:mangle] == :vars
      }
    end
end 
```

正如我在下面的评论中提到的，Uglifier**[不支持传递`:defines`mangle option](https://github.com/lautis/uglifier/blob/master/lib/uglifier.rb#L109)**。您可以选择将上面标记的行更改为`"defines" => @options[:defines]`并使用此行更新您的配置

```
config.assets.js_compressor = Uglifier.new(defines: { DEVMODE: ["name", "null"] }) 
```

运行 rake 任务时，`DEVMODE`现在将`null`在您的源中转换为。现在，在您的 Javascript 源代码中给出以下代码：

```
if (typeof DEVMODE === 'undefined') {
  DEVMODE = true;
}

if (DEVMODE) {
  console.log('some log message');
} 
```

默认情况下*（在开发模式下）*，`DEVMODE`将设置为`true`，导致`console.log()`执行。运行时`rake assets:precompile`，UglifyJS 将设置`DEVMODE`为`null`在编译/压缩开始之前。当走过`if (null) {`它会看到条件永远不会评估`true`，并将从结果源中删除这个死代码。

只要你`console.log()`像上面那样写你的电话或速记为

```
DEVMODE && console.log('some log message'); 
```

`console.log()`调用将从生产代码中删除。除了剥离之外，我还可以看到其他好处`console.log()`，允许其他特定于开发的代码在开发模式**和仅**开发模式下与其他 Javascript 共存。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T17:32:17.080

我想提一下[bitcrowd](http://blog.bitcrowd.net/disable-console-log-in-production/)的解决方案。他们的想法基本上是：

1.  在你的身体标签中定义一个`data`属性，代表你的应用程序的状态（开发/生产/...） - 例如`<body data-env="<%= Rails.env %>">`
2.  根据这一点，让我们`console.log()`打印出一些东西或什么都不做 - 例如：

    ```
    if ($('body').data('env') == 'production' || typeof console == "undefined"){
        var console = { log: function() {}, debug: function() {}, info: function() {} };
    } 
    ```

# asp.net - 在 ASP.NET 中使用 Sharepoint 文档库

> ID：11764859
> 
> 赞同：0
> 
> 时间：2012-08-01T17:56:40.960
> 
> 标签：asp.net, sharepoint

我们有一个 ASP.NET Web 应用程序。我们想使用 SharePoint 文档库进行文档管理和归档。我们是 Sharepoint 的新手。我们有一个 sharepoint 管理团队询问他们需要与 ASP.NET 集成的任务的详细信息。我们在 ASP.NET 中维护用户级别的权限。请澄清以下几点：

1.  我们可以使用其 WebServices 连接到 Sharepoint 吗？我们不想使用需要安装在 ASP.NET WebServer 中的 Sharepoint 对象模型。我们想使用网络服务上传、签入、签出、删除和下载。

2.  我们可以要求 Sharepoint 管理员为我们的应用程序创建一个根级文件夹和一个用户，我们可以使用它使用 WebService 上传文档吗？我们将使用我们的 ASP.NET 应用程序来限制权限。

3.  要求他们定期归档文件。这是否需要任何工作流程或仅来自 Sharepoint Admin 的配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:46:05.110

> 我们可以使用其 WebServices 连接到 Sharepoint 吗？我们不想使用需要安装在 ASP.NET WebServer 中的 Sharepoint 对象模型。我们想使用网络服务上传、签入、签出、删除和下载。

大多数情况下这是可能的，您也可以为此使用 SharePoint 中的客户端对象模型。

> 我们可以要求 Sharepoint 管理员为我们的应用程序创建一个根级文件夹和一个用户，我们可以使用它使用 WebService 上传文档吗？我们将使用我们的 ASP.NET 应用程序来限制权限。

是的

> 要求他们定期归档文件。这是否需要任何工作流程或仅来自 Sharepoint Admin 的配置？

这取决于您在“存档”下的意思 - 在某处制作根文件夹的 zip 或备份文档库。对于压缩，您需要第三方或您自己的解决方案（可能是工作流程或计时器作业）。对于备份，您只需要一个 Power Shell 脚本来执行粒度备份。[在http://technet.microsoft.com/en-us/library/ee428301#section1](http://technet.microsoft.com/en-us/library/ee428301#section1)上查看更多信息 然后您可以自动化在 Windows 任务计划程序中运行的脚本。

# sql - 如何从表中解析集合的值？

> ID：11764864
> 
> 赞同：0
> 
> 时间：2012-08-01T17:57:05.200
> 
> 标签：sql, select, set

在一个表中，我有一个名为**Categories**的列，它是一个集合，并且具有变量值，列中没有行，所以我不想解析行中的值，我直接解析这个集合中的值，我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:16:31.670

根据我的理解，您有一个表，其中一个列是集合类型。这不是传统的，也不推荐。表本身就是集合。尝试通过将表格分成两部分来重塑表格：一个是您已经拥有的列减去 Categories ；和一个类别表，用于保存与外键关联的所有集合的每个元素。现在不需要解析了。

当然，如果您无法进行此类更改，这不是一个有效的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:59:22.580

也许这可以满足您的要求：

```
SELECT DISTINCT Categories FROM (Table) 
```

# c - 响铃字符（\a）删除空格

> ID：11764866
> 
> 赞同：1
> 
> 时间：2012-08-01T17:57:19.167
> 
> 标签：c

该程序如何删除空白？：

```
int main()
{
    char s[]="remove   white     space";
    int i;
    for(i=0;s[i];++i)
            if(s[i]==' ')
                    s[i]='\a';
    printf("%s",s);
    return 0;
} 
```

[在此处](http://ideone.com/GfSXz)查看输出

输出：

```
removewhitespace 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:59:34.803

是非图形字符，您的`\a`程序将字符串中的所有空格替换`\a`为非图形字符。

从标准看这里（强调我的）：

> (C99, 5.2.2p2)**表示执行字符集中非图形字符的字母转义序列**旨在在显示设备上产生如下操作：
> 
> **\a** (alert) 在**不改变活动位置的情况下**产生有声或可见的警报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T18:01:17.087

它并没有删除空格，它只是用响铃字符替换它，大多数终端不会打印（相反，它们通常会产生挑剔的哔哔声）。

虽然在终端上是不可见的，但这些字符显然是写在标准输出上的，所以如果你重定向到程序的输出文件，它们将被写入磁盘，并且可以用大多数编辑器显示。

![VIM 中显示的铃铛字符](../Images/ca77c03d718c256fc8f1f129321497c8.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T18:01:49.070

`\a`是一个不可打印的字符 - 它会发出哔哔声。
因此，当空格字符被替换（就地）时`\a`，字符串被发送到`printf()`控制台，为每个这样的 bell-char 发出哔哔声，而不是移动一个空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T18:01:56.907

1.  停止状态（`s[i]`）：特殊符号`\0`出现时停止。
2.  它用未显示的符号替换所有空格。

# jquery - 使用 jQuery 对图像进行分类

> ID：11764870
> 
> 赞同：0
> 
> 时间：2012-08-01T17:57:40.927
> 
> 标签：jquery, html, css

我正在尝试在我的个人网站上实现几个部分来显示/隐藏某些图像。例如：打印/Web/UI/ALL。一旦点击了这些，它将隐藏除该链接之外的所有内容。有谁知道使用 jQuery 的一种简单的方法来做到这一点？这是我现在设置的代码：

```
<div class="boxgrid slideright">
<img class="cover" src="images/xxx.jpg"/>
<h3>Some title</h3>
<p>some text<br/><a href="images/xxx.jpg" rel="group" 
     class="fancybox">View &raquo;</a>  </p>    
</div> 
```

我在网上看过，所以没有运气。抱歉，如果我在某处遗漏了什么，请提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:16:56.880

这是一个简单的实现，可以很好地为您提供开发思路：

```
$('#controls li a').click(
    function(e){
        e.preventDefault();
        var that = this,
            $that = $(that),
            id = that.id,
            gallery = $('#gallery');
        if (id == 'all') {
            gallery.find('img:hidden').fadeIn(1000);
        }
        else {
            gallery.find('img.' + id + ':hidden').fadeIn(1000);
            gallery.find('img').not('.' + id).fadeOut(1000);
        }
    });​ 
```

这基于以下 HTML 结构：

```
<ol id="controls">
    <li><a href="#" id="web">Web</a></li>
    <li><a href="#" id="canvas">Canvas</a></li>
    <li><a href="#" id="print">Print</a></li>
    <li><a href="#" id="all">All</a></li>
</ol>
<div id="gallery">
    <img src="http://davidrhysthomas.co.uk/img/dexter.png" class="web" />
    <img src="http://davidrhysthomas.co.uk/img/mandark.png" class="canvas" />
    <img src="http://davidrhysthomas.co.uk/img/drPooh2.png" class="print" />
</div> 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Ebrnj/)。

参考：

*   [`click()`](http://api.jquery.com/click/).
*   [`event.preventDefault()`](http://api.jquery.com/event.preventDefault/).
*   [`fadeIn()`](http://api.jquery.com/fadeIn/).
*   [`fadeOut()`](http://api.jquery.com/fadeOut/).
*   [`find()`](http://api.jquery.com/find/).
*   [`not()`](http://api.jquery.com/not/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:01:15.043

我不确定这是否是您真正想要做的，但根据您的问题，这是一个答案：

```
$('a').click(function(){
    var $self = $(this);
    $('a').each(function(){
        if($(this) !== $self) $(this).hide();
    });
    $('img').hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T18:03:08.087

给他们所有相同的类，但唯一的ID。然后，将 onclick 附加到该类的所有元素，并用于`$.each()`隐藏所有通过的元素：

```
if(item.attr('id') != this.attr('id')) 
```

根据您的评论，您可以像这样“显示全部”：

```
<a href="#" onclick = "ShowAll()">Show all</a>
<script type="text/javascript">
    function ShowAll(){
        $(".commonClassName").each(function(index, item){
            item.show(); 
        });
    }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T18:04:33.820

只需隐藏所有内容，然后显示被点击的内容，非常简单......

```
$('a').click(function(){
    $('a').hide();
    $(this).show();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T18:22:26.440

使用 img 标签的 'title' 属性来存储该图像的类别。

```
<div class="boxgrid slideright">
    <img src="images/xyz.jpg" title="print" alt="" />
    <img src="images/abc.jpg" title="web" alt="" />
    <img src="images/def.jpg" title="print" alt="" />
    <img src="images/jkl.jpg" title="ui" alt="" />
    <img src="images/123.jpg" title="web" alt="" />
</div> 
```

然后，给你的“a”元素一个相应的类。

```
<a href="#" class="web">Web</a>
<a href="#" class="print">Print</a>
<a href="#" class="ui">UI</a>
<a href="#" class="all">All</a> 
```

然后在js中：

```
$('div.boxgrid.slideright a').click(function(ev) {
    if($(this).hasClass('all')) {
        $('div.boxgrid.slideright img').show();        
    }
    else {
        $('div.boxgrid.slideright img[title="' + $(this).attr("class") + '"]').show();
        $('div.boxgrid.slideright img:not([title="' + $(this).attr("class") + '"])').hide();            
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T18:31:03.943

从您的问题的标题来看，您正在寻求分类，并且 CSS 选择器类的名称来自分类和分类，因此，您应该将图像的每个类别分类在相同的类名下。即为您要对其进行分类的每个图像提供属性类 class='print' class='web' 等等。

在 jquery 中，您应该执行以下操作：

```
<html>
<head>
<script type="text/javascript" src="jquery-1.6.2.min.js"></script>
<script>
$(document).ready(function(){
$('.print').click(function(){

$('.print').css('display','none');

$(this).css('display','inline');

}) ;
}); 
</script>
</head>
<body>
<input type='button' value="b1" class="print" />
<input type='button' value="b2" class="print" />
<input type='button' value="b3" class="print" />
<input type='button' value="b4" class="print" />

<input type='button' value="bA" class="web" /><input type='button' value="bB" class="web" /><input type='button' value="bC" class="web" />
</body>
</html> 
```

# objective-c - 调试器将 BOOL 块参数的值报告为 NO，但我的 if 语句评估为 true

> ID：11764871
> 
> 赞同：0
> 
> 时间：2012-08-01T17:57:50.603
> 
> 标签：objective-c, xcode, debugging, objective-c-blocks

我正在调用一个带有布尔值的块。根据调试器，布尔值是假的，但它似乎被视为真。这是编译器/Xcode 错误，还是我应该以类似于的方式标记传递给块的参数`__block`？

```
// Hovering over the |finished| parameter displays the value of finished as NO
[self.repDataSynchronizationClient synchronizeWithRepId:rep.id andCompletion:^(NSString * progressMessage, BOOL finished){
    if( finished )
    {
        [self hideLoader];    // Breakpoint set here, which I am hitting
    }
    else
    {
        [self setLoaderTitle:progressMessage];
    }
}]; 
```

这是情况[的屏幕截图](http://i.stack.imgur.com/PV4Kd.png)，显示了断点命中和工具提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T18:09:40.777

如果您处于发布状态而不是调试状态，则很可能只是**断点错误**。这可能是由于编译器删除了发布中的一些语句，如优化和行号不再与它们应该的代码对齐。

验证您的 if 语句使用语句到达的子句`NSLog`。

* * *

在单独的说明中，您提到了 的使用`__block`，但实际上并没有使用它，并且似乎在那里有一个保留周期。它可能应该是：

```
__block id selfReference = self;
[self.repDataSynchronizationClient synchronizeWithRepId:rep.id andCompletion:^(NSString* message, BOOL finished) {
    if (finished)
    {
        [selfReference hideLoader];
    }
    else 
    {
        [selfReference setLoaderTitle:progressMessage];
    }
}]; 
```

如果使用 ARC，请`__unsafe_unretained`使用`__block`.

# sql - Oracle SQL 通过游标使用和单次提交有效地插入大型数据集

> ID：11764873
> 
> 赞同：0
> 
> 时间：2012-08-01T17:57:52.103
> 
> 标签：sql, database, performance, oracle, oracle10g

以下 SQL 在具有相同架构的两个表之间生成所有匹配记录，然后继续迭代存储此结果集的游标。我在此函数的末尾使用提交进行逐行插入。我的问题是如何从这种类型的查询中获得最大的性能？代码如下：

```
BEGIN  
DECLARE    
   CURSOR foo IS  
        SELECT * FROM tableOne to  
        WHERE EXISTS (SELECT * FROM tableTwo tt  
                       WHERE TO.FOO = TT.FOO  
                       AND TO.BAR = TT.BAR);  --THIS TAKES 5 MINUTES (66 MILLION ROWS)
     BEGIN  
           FOR nextFoo IN foo  
     LOOP  
            INSERT INTO tracker t  
               (id,foo,bar,baz)  
            VALUES(trackerSequence.nextval, nextFoo.foo,nextFoo.bar,nextFoo.baz);  
     END LOOP;   
     COMMIT;  
     END;  
END; 
```

此查询可能需要一个多小时，我正在尝试减少与之相关的时间成本。我一般将处理 1.4 亿条记录，因此我预计此过程所需的时间会增加一倍。所有列都被索引。

版本信息：

10克10.2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T18:08:02.157

怎么样

```
INSERT INTO tracker t SELECT trackerSequence.nextVal
                            ,foo
                            ,bar
                            ,baz 
                      FROM tableOne to 
                            INNER JOIN tabletwo tt 
                         ON (to.foo = tt.foo and to.bar=tt.bar); 
```

我想知道这是否会更好地优化。

还要确保在插入时禁用跟踪器-表索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T18:13:33.693

好的，我知道你想要光标...

使用游标的唯一真正优势是每 10k 提交一次？处理这么多数据时的行以避免填满日志。

除非你真的需要游标，否则消除行处理。

```
insert into tracker (id, foo, bar, baz)
select trackersequence.nextval, t1.foo, t1.bar, t2.baz
from tableone t1, tabletwo t2 where 
t1.foo = t2.foo and
t1.bar = t2.bar; 
```

建议的直接路径插入提示

```
insert /*+ append */ into tracker (id, foo, bar, baz)
select trackersequence.nextval, t1.foo, t1.bar, t2.baz
from tableone t1, tabletwo t2 where 
t1.foo = t2.foo and
t1.bar = t2.bar; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T18:08:20.663

```
DECLARE    

CURSOR foo_cur 
IS SELECT * FROM tableOne TO  
    WHERE EXISTS (SELECT * FROM tableTwo tt  
                   WHERE TO.FOO = TT.FOO  
                   AND TO.BAR = TT.BAR);  --THIS TAKES 5 MINUTES (66 MILLION ROWS)  

TYPE foo_nt IS TABLE OF tableOne%ROWTYPE;
v_foo_nt foo_nt;

 BEGIN

  OPEN foo_cur ;
  LOOP
  FETCH foo_cur BULK COLLECT INTO v_foo_nt LIMIT 1000;

       FORALL  i IN v_foo_nt.FIRST..v_foo_nt.LAST  
         INSERT INTO tracker t  
           (id,foo,bar,baz)  
          VALUES(trackerSequence.nextval, v_foo_nt(i).foo,v_foo_nt(i).bar,v_foo_nt(i).baz);  

EXIT WHEN foo_cur%NOTFOUND;  
END LOOP; 
  CLOSE foo_cur;  
  COMMIT;  
 END;  
END; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T18:07:46.260

首先 - 如何优化 PL/SQL 的性能：

*   在开始加载之前禁用目标表上的索引和任何其他约束，并在完成后重新启用它们
*   不要在最后提交 - 有提交点来释放回滚段

第二 - 不要使用 PL/SQL 进行插入。使用 BulkLoading（正如一些评论已经建议的那样）。如果你用谷歌搜索“oracle sql loader”，你可以很容易地找到关于 BulkLoading 的大量信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T19:04:38.790

`BITMAP INDEXES`通过结合使用 DPL（直接路径加载）（即使用提示），我几乎总能在此类批量数据插入中获得更好的性能`/*+ APPEND+/`。

`TT.FOO, TT.BAR`我还假设这样您将在和上都有适当的索引`TO.FOO, TO.BAR`。所以有人认为

```
INSERT /*+ APPEND*/
  INTO TRACKER T
SELECT trackerSequence.nextval, to.foo,to.bar,to.baz
  FROM tableOne to  
  WHERE EXISTS (SELECT 'x' 
                  FROM tableTwo tt  
                 WHERE TO.FOO = TT.FOO  
                   AND TO.BAR = TT.BAR); 
```

另外-请记住，`EXIST`在某些情况下，该子句可能会咬你。因此，您可能想要使用简单的外连接。

```
INSERT /*+ APPEND*/
  INTO TRACKER T
SELECT DISTINCT trackerSequence.nextval, to.foo,to.bar,to.baz
  FROM tableOne to , tableTwo tt
  WHERE TO.FOO = TT.FOO  
    AND TO.BAR = TT.BAR; 
```

请记住 - DPL（直接路径加载）不会总是提高查询的性能，如果您的表正确分区，它可能会提高（或帮助）。

尝试对这些查询进行解释计划以找出最好的。此外，（正如已经提到的答案之一）最后不要提交，但也不要在每条记录上提交。建议使用类似于 while using `LIMIT XXXX`while `BULK COLLECT`ing 的自定义提交点。您的提交点将决定您的`ROLLBAK`分段有多大。您还可以在程序上（即在 PLSQL BLOCK 中）使用您的自定义提交点（就像计数器一样简单）。

查询性能还取决于`HWM`您的表（具体而言），您几乎总是希望`HWM`在表下执行。虽然`TRUNCATE`放在`TRACKER`桌子上有助于实现这一点，但以前的数据会丢失，所以这在这里很难解决。按照此[AskTom](http://asktom.oracle.com/pls/asktom/f?p=100:11%3a%3a%3a%3a%3aP11_QUESTION_ID:1445404373378)链接了解如何查找`HWM`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T14:15:07.053

我发现以下将在大约 49 分钟内完成 1.3 亿次插入。

```
INSERT INTO tracker t  
    SELECT * FROM tableOne to  
        WHERE NOT EXISTS (SELECT * FROM tableTwo tt  
                       WHERE TO.FOO = TT.FOO  
                       AND TO.BAR = TT.BAR); 
```

# android - 如何在android中使用计时器在gridview的不同图像视图中随机显示图像？

> ID：11764884
> 
> 赞同：-1
> 
> 时间：2012-08-01T17:58:30.013
> 
> 标签：android, android-layout, android-intent, android-widget

我已经制作了网格视图并将所有图像都放在了drawable中，现在我想要的是这些图像随机出现在我在网格视图中的9个图像视图中，就像在1秒时，一旦用户触摸它就会显示一个图像消失，它会在不同的图像视图中显示另一个图像，然后继续。如果任何人有这个想法，请帮助。之后如何使图像随机出现在图像视图中。

```
<
import android.content.Context;
import android.database.DataSetObserver;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.ListAdapter;

public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    // references to our images
    private Integer[] mThumbIds = {
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7
    };
}
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:20:05.650

您将不得不使用类似 CountDownTimer 的东西（如果您愿意，也可以使用 Handler）。我已经包含了一个如何使用 CountDownTimer 的示例。您必须使用此倒数计时器来触发有关显示（和未显示）以及何时显示的事件。就在我的脑海中，一种方法是将所有 ImageViews（应该从网格适配器获取）放入一个数组中，并每 5 秒迭代一次该数组（使用您的计时器）并确定哪些 ImageViews 应该设置为 Invisible `setVisibility(View.Invisible)`。

```
**Activity**

// CountDownTimer Example

public class ExampleActivity extends Activity implements OnClickListener {

// Constants
private static final long DURATION = 5 * 1000; // 5 seconds
private static final long INTERVAL = 500; // 500 milliseconds
private static final String FINISHED = "finished";
private static final String CANCEL_MESSAGE = "Timer Cancelled";
private static final long START_TICK_VALUE = 0;
private static final String START = "Start";
private static final String STOP = "Stop";

// Timer
private MyTimer timer;
private long tick;

// UI
private TextView tv;
private Button startButton;
private Button stopButton;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.your_layout);

    tv = (TextView) findViewById(R.id.your_text_view);
    tv.setVisibility(View.VISIBLE);

    // start button
    startButton = (Button) findViewById(R.id.button1);
    startButton.setVisibility(View.VISIBLE);
    startButton.setOnClickListener(this);   
    startButton.setText(START);
    // stop button
    stopButton = (Button) findViewById(R.id.button2);
    stopButton.setVisibility(View.VISIBLE);
    stopButton.setOnClickListener(this);
    stopButton.setText(STOP);
    stopButton.setEnabled(false);

    timer = new MyTimer(DURATION, INTERVAL);
}

// CountDownTimer class
private class MyTimer extends CountDownTimer {

    public MyTimer(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
    }

    @Override
    public void onFinish() {
        tv.setText(FINISHED);
        setStartLayout();
    }

    @Override
    public void onTick(long millisUntilFinished) {
        tick += INTERVAL;
        String tickText = String.valueOf(tick);
        tv.setText(tickText);
    }
}

@Override
public void onClick(View v) {
    switch (v.getId()) {
    // start timer
    case R.id.button1:
        resetTick();
        setStopLayout();
        timer.start();
        break;
    // stop timer
    case R.id.button2:
        timer.cancel();
        setStartLayout();
        tv.setText(CANCEL_MESSAGE);
        break;
    }
}

private void resetTick() {
    tick = START_TICK_VALUE;
}

private void setStopLayout() {
    startButton.setEnabled(false);
    stopButton.setEnabled(true);
}

private void setStartLayout() {
    startButton.setEnabled(true);
    stopButton.setEnabled(false);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:19:38.413

好吧，在您的情况下，您可以`GridView`使用适配器来实现，`BaseAdapter`这不是一个糟糕的选择。您将图像放在网格上的 9 个随机位置。您可以使用 Java 中的 Random 方法来获得一些随机行为。您还在`onClickListener`Grids 上设置了 a，因此当用户单击它时，您选择另一个随机数，该数字将对应于 Grid 上的另一个点。巴姆。我想我在这个答案上所做的工作和你在这个问题上所做的一样多:)

哦，我刚刚意识到你想要一个计时器。那么在这种情况下，请查看 Java 文档中的 Timer 类。我很确定有一些选择，无论是原生的还是非原生的。任你选。但我的实现保持不变。每次计时器关闭时，您只需使用 Math.random 在网格上随机放置图像来刷新网格 :)

# css - 样式表未出现

> ID：11764888
> 
> 赞同：0
> 
> 时间：2012-08-01T17:58:44.937
> 
> 标签：css, browser

我正在尝试将样式表添加到网站。样式表 URL 是 [http://www.widgetsinabottle.com/widget/widgetstyle.css](http://www.widgetsinabottle.com/widget/widgetstyle.css)

这是页面头部的代码，

```
<link type="text/css" rel="stylesheet" href="http://www.widgetsinabottle.com/widget/widgetstyle.css"/> 
```

这是网站网址， [http://widgetsinabottle.com/widget/demo/effect.html#.UBltBWEe5K3](http://widgetsinabottle.com/widget/demo/effect.html#.UBltBWEe5K3)

问题是当我用萤火虫调试它时它没有显示样式表。

这是来自的代码片段`<head>`

```
<!-- Include jQuery --> 
```

```
<!-- Include Theatre files - I recommend extracting all the Theatre files into "theatre" folder for easier upgrades in the future --> 
```

http://www.widgetsinabottle.com/widget/widgetstyle.css' rel='stylesheet' type='text/css' />

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T18:00:37.183

您的样式表不是有效的 CSS。从文档的开头删除这些行：

```
<!-- Design for nicer paging -->
<style type="text/css"> 
```

以及底部的这些行：

```
 </style>
</head> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T18:02:11.067

使您的 CSS 看起来像这样：（删除其他所有内容，它无效！）

```
 .paging {
  text-align: center;
  }
  .paging span {
  text-decoration: none;
  color: silver;
  cursor: pointer;
  }
  .paging span.active {
  font-size: 2em;
  color: black;
  }

  .paging2 span {
  font-size: 2em;
  }
  .test {
  text-align: center;
  }
  .test span {
  text-decoration: none;
  color: silver;
  cursor: pointer;
  }
  .test span.active {
  font-size: 2em;
  color: black;
  }

  .test2 span {
  font-size: 2em;
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T19:14:18.777

在我看来，您已将 html 代码粘贴到 xml 文档中，`<?xml version="1.0"?>`在文档顶部删除。

# c# - Metro WinRT 应用程序中的 AesManaged 解密

> ID：11764891
> 
> 赞同：4
> 
> 时间：2012-08-01T17:58:55.653
> 
> 标签：c#, cryptography, aes, windows-runtime

我有一些文本，由 C# 的 AesManaged 加密，必须在 WinRT Metro 应用程序中解密。我无法更改加密代码，因为该代码具有其他无法更改的依赖项。

加密函数如下所示：

```
// Note: Edited out possibly real password and salt:
Guid password = Guid.Parse("AAAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA");
Guid salt = Guid.Parse("AAAAAAAAA-BBBB-BBBB-BBBB-AAAAAAAAAAAA");

string EncryptedValue(string data)
{   
byte[] passwordBytes = password.ToByteArray();
byte[] saltBytes = salt.ToByteArray();

byte[] bKey = new byte[16];
for(int i = 0; i < 16; i++)
{
    bKey[i] = passwordBytes[i];
}

string encryptedData = String.Empty;
using (System.Security.Cryptography.AesManaged aesAlg = new System.Security.Cryptography.AesManaged())
{
    aesAlg.Key = bKey;
    aesAlg.IV = saltBytes;

    // Create a decrytor to perform the stream transform.
    System.Security.Cryptography.ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV);

    // Create the streams used for encryption.
    using (MemoryStream msEncrypt = new MemoryStream())
    {
        using (System.Security.Cryptography.CryptoStream csEncrypt = new System.Security.Cryptography.CryptoStream(msEncrypt, encryptor, System.Security.Cryptography.CryptoStreamMode.Write))
        {
            using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
            {

                //Write all data to the stream.
                swEncrypt.Write(data);
            }

            encryptedData = Convert.ToBase64String(msEncrypt.ToArray());
        }
    }
}

return encryptedData;
} 
```

示例数据：

```
 // Decrypted value is: 2029
   var _id = EncryptedSettingsBase.Decrypt("ROSNJ1XnAozF7LC0wW8AOg=="); 
```

我阅读了以下帖子： [http](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/7cfcc576-1c2c-4a50-a546-09a45d3ff41f) ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/7cfcc576-1c2c-4a50-a546-09a45d3ff41f 这看起来像同样的问题，但是我没有能够让他们的建议发挥作用，因为我得到了例外：'数据错误（循环冗余检查）。（来自 HRESULT 的异常：0x80070017）'。

```
internal class EncryptedSettingsBase
{
    public static string Decrypt(string cipherText)
    {
        var passwordBytes = (new Guid("AAAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA")).ToByteArray();
        var salt = (new Guid("AAAAAAAAA-BBBB-AAAA-AAAA-AAAAAAAAAAAA")).ToString();

        byte[] bKey = new byte[16];
        for (int i = 0; i < 16; i++)
        {
            bKey[i] = passwordBytes[i];
        }

        IBuffer pwBuffer = CryptographicBuffer.CreateFromByteArray(bKey);
        IBuffer saltBuffer = CryptographicBuffer.ConvertStringToBinary(salt, BinaryStringEncoding.Utf16LE);
        IBuffer cipherBuffer = CryptographicBuffer.DecodeFromBase64String(cipherText);

        // Derive key material for password size 32 bytes for AES256 algorithm
        KeyDerivationAlgorithmProvider keyDerivationProvider = KeyDerivationAlgorithmProvider.OpenAlgorithm("PBKDF2_SHA1");
        // using salt and 1000 iterations
        KeyDerivationParameters pbkdf2Parms = KeyDerivationParameters.BuildForPbkdf2(saltBuffer, 1000);

        // create a key based on original key and derivation parmaters
        CryptographicKey keyOriginal = keyDerivationProvider.CreateKey(pwBuffer);
        IBuffer keyMaterial = CryptographicEngine.DeriveKeyMaterial(keyOriginal, pbkdf2Parms, 32);
        CryptographicKey derivedPwKey = keyDerivationProvider.CreateKey(pwBuffer);

        // derive buffer to be used for encryption salt from derived password key 
        IBuffer saltMaterial = CryptographicEngine.DeriveKeyMaterial(derivedPwKey, pbkdf2Parms, 16);

        // display the keys - because KeyDerivationProvider always gets cleared after each use, they are very similar unforunately
        string keyMaterialString = CryptographicBuffer.EncodeToBase64String(keyMaterial);
        string saltMaterialString = CryptographicBuffer.EncodeToBase64String(saltMaterial);

        SymmetricKeyAlgorithmProvider symProvider = SymmetricKeyAlgorithmProvider.OpenAlgorithm("AES_CBC_PKCS7");
        // create symmetric key from derived password material
        CryptographicKey symmKey = symProvider.CreateSymmetricKey(keyMaterial);

        // encrypt data buffer using symmetric key and derived salt material
        IBuffer resultBuffer = CryptographicEngine.Decrypt(symmKey, cipherBuffer, saltMaterial);
        string result = CryptographicBuffer.ConvertBinaryToString(BinaryStringEncoding.Utf16LE, resultBuffer);
        return result;
    }
} 
```

我可能在做一些愚蠢的事情，但我并不完全理解这些东西。有人知道我要去哪里错了吗？

任何帮助深表感谢。

干杯，乔恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T18:49:35.970

您在一侧使用 PBKDF2，而在 .net 部分中没有使用 PBKDF2。不幸的是，您无法更改的部分没有正确使用密钥；它只是直接使用 UID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T08:39:34.787

如果我可以更改所有依赖项以正确加密，则以下代码可以解决问题：

这里的代码有帮助：http: [//visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2966549-make-equal-aesmanaged-snippet-as-in-silverlight-an](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2966549-make-equal-aesmanaged-snippet-as-in-silverlight-an)

加密代码，C# 4.0 端：

```
string salt = "AAAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA";
string password = "AAAAAAAAA-BBBB-AAAA-AAAA-AAAAAAAAAAAA";

string EncryptedValue(string data)
{   
byte[] saltBytes = System.Text.Encoding.UTF8.GetBytes(salt);

string encryptedData = String.Empty;
using (System.Security.Cryptography.AesManaged aes = new System.Security.Cryptography.AesManaged())
{
    var rfc = new System.Security.Cryptography.Rfc2898DeriveBytes(password, saltBytes);

    aes.BlockSize = aes.LegalBlockSizes[0].MaxSize; 
    aes.KeySize = aes.LegalKeySizes[0].MaxSize; 
    aes.Key = rfc.GetBytes(32); 
    rfc.Reset(); 
    aes.IV = rfc.GetBytes(16);

    // Create a decrytor to perform the stream transform.
    System.Security.Cryptography.ICryptoTransform encryptor = aes.CreateEncryptor(aes.Key, aes.IV);

    // Create the streams used for encryption.
    using (MemoryStream msEncrypt = new MemoryStream())
    {
        using (System.Security.Cryptography.CryptoStream csEncrypt = new System.Security.Cryptography.CryptoStream(msEncrypt, encryptor, System.Security.Cryptography.CryptoStreamMode.Write))
        {
            using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
            {
                // Write all data to the stream.
                swEncrypt.Write(data);
            }

            encryptedData = Convert.ToBase64String(msEncrypt.ToArray());
        }
    }
}

return encryptedData;
} 
```

WinRT端解密代码：

```
protected string Decrypt(string encryptedData)
    {
        const string password = "AAAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA";
        const string salt = "AAAAAAAAA-BBBB-AAAA-AAAA-AAAAAAAAAAAA";

        IBuffer pwBuffer = CryptographicBuffer.ConvertStringToBinary(password, BinaryStringEncoding.Utf8);
        IBuffer saltBuffer = CryptographicBuffer.ConvertStringToBinary(salt, BinaryStringEncoding.Utf8);
        IBuffer cipherBuffer = CryptographicBuffer.DecodeFromBase64String(encryptedData);

        KeyDerivationAlgorithmProvider keyDerivationProvider = KeyDerivationAlgorithmProvider.OpenAlgorithm("PBKDF2_SHA1");

        KeyDerivationParameters pbkdf2Parms = KeyDerivationParameters.BuildForPbkdf2(saltBuffer, 1000);

        CryptographicKey keyOriginal = keyDerivationProvider.CreateKey(pwBuffer);
        IBuffer keyMaterial = CryptographicEngine.DeriveKeyMaterial(keyOriginal, pbkdf2Parms, 32);

        CryptographicKey derivedPwKey = keyDerivationProvider.CreateKey(pwBuffer);

        IBuffer saltMaterial = CryptographicEngine.DeriveKeyMaterial(derivedPwKey, pbkdf2Parms, 16);

        SymmetricKeyAlgorithmProvider symProvider = SymmetricKeyAlgorithmProvider.OpenAlgorithm("AES_CBC_PKCS7");

        CryptographicKey symmKey = symProvider.CreateSymmetricKey(keyMaterial);

        IBuffer resultBuffer = CryptographicEngine.Decrypt(symmKey, cipherBuffer, saltMaterial);

        byte[] asd;
        CryptographicBuffer.CopyToByteArray(resultBuffer, out asd);
        string result = CryptographicBuffer.ConvertBinaryToString(BinaryStringEncoding.Utf8, resultBuffer);
        return result;
    } 
```

# python - 对字符串使用 locals() 和 format() 方法：有什么注意事项吗？

> ID：11764900
> 
> 赞同：57
> 
> 时间：2012-08-01T17:59:39.950
> 
> 标签：python, string-formatting, local-variables, locals

使用以下模式是否有任何缺点、警告或不良做法警告？

```
def buildString(user, name = 'john', age=22):
    userId = user.getUserId()
    return "Name: {name}, age: {age}, userid:{userId}".format(**locals()) 
```

我有一个非常重复的字符串生成代码要编写并且很想使用它，但是关于使用的一些事情`locals()`让我感到不舒服。这是否有任何意外行为的危险？

编辑：上下文

我发现自己经常写这样的东西：

```
"{name} {age} {userId} {etc}...".format(name=name, age=age, userId=userId, etc=etc) 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2017-06-08T17:48:18.363

从 Python 3.6.0 开始，现在有一种官方方法可以做到这一点：[格式化字符串文字](https://docs.python.org/3/whatsnew/3.6.html#whatsnew36-pep498)。

它是这样工作的：

```
f'normal string text {local_variable_name}' 
```

例如，而不是这些：

```
"hello %(name) you are %(age) years old" % locals()
"hello {name} you are {age} years old".format(**locals())
"hello {name} you are {age} years old".format(name=name, age=age) 
```

这样做：

```
f"hello {name} you are {age} years old" 
```

这是官方的例子：

```
>>> name = "Fred"
>>> f"He said his name is {name}."
'He said his name is Fred.'
>>> width = 10
>>> precision = 4
>>> value = decimal.Decimal("12.34567")
>>> f"result: {value:{width}.{precision}}"  # nested fields
'result:      12.35' 
```

参考：

*   [Python 3.6 新增功能](https://docs.python.org/3/whatsnew/3.6.html#whatsnew36-pep498)
*   [政治人物 498](https://www.python.org/dev/peps/pep-0498)
*   [词法分析说明](https://docs.python.org/3/reference/lexical_analysis.html#f-strings)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-01T18:07:47.867

如果格式字符串不是用户提供的，那么这种用法是可以的。

`format`优于使用旧`%`的字符串替换。
[`locals`](http://docs.python.org/library/functions.html#locals)是 Python 内置的，它的行为将是可靠的。

我认为`locals`正是你需要的。
只是不要从当地人那里修改字典，我会说你有一个很好的解决方案。

如果格式字符串是用户提供的，那么您很容易受到各种不良的注入攻击。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-29T15:53:30.513

## Python 3.6 之前的答案

这已经很老了，但是如果您发现自己使用`.format`了我在传入时遇到的一个警告，`**locals`那就是如果您没有在任何地方定义该变量，它将中断。在大多数现代 IDE 中，明确说明传入的变量将避免这种情况。

```
foo = "bar"
"{foo} and {baz} are pair programming".format(**locals())
<exception occurs> 
```

# html - 在第三个容器 div 内水平对齐 2 个 div

> ID：11764905
> 
> 赞同：10
> 
> 时间：2012-08-01T17:59:55.387
> 
> 标签：html, css

我有以下代码：

```
<div id="container">
    <div id="div1">Div 1</div>
    <div id="div2">Div 2</div>
</div> 
```

我希望能够让#box1 和#box2 在容器内彼此相邻。容器居中

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-01T18:09:06.300

这将使容器居中，并使其中的两个 div 居中，同时将样式与实际内容分开：

HTML：

```
<div id="container">
    <div>Div 1</div>
    <div>Div 2</div>
</div> 
```

CSS：

```
#container > div
{
    display: inline-block;
    border: solid 1px #000;
}
#container
{
    border: solid 1px #ff0000;
    text-align: center;
    margin: 0px auto;
    width: 40%;
} 
```

工作示例：

[http://jsfiddle.net/JLjjK/](http://jsfiddle.net/JLjjK/)

**2017 年更新**：

Flexbox 变得越来越普遍。这是使用 Flexbox 实现类似结果的一种方法：

HTML：

```
<div class="outer">
  <div>1</div>
  <div>2</div>
</div> 
```

CSS：

```
.outer {
  border: 1px solid #000;
  display:flex;
  justify-content: center;
  padding: 3px;
}
.outer > div {
  border: 1px solid #000;
  margin:2px;
} 
```

示例：[https ://jsfiddle.net/pb61a1cj/1/](https://jsfiddle.net/pb61a1cj/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T18:03:02.330

试试这个：

HTML：

```
<div id="container">
    <div id="box1" class="inlined">
        <div id="box3"></div>
        <div id="box4"></div>
    </div>
    <div id="box2" class="inlined"></div>
</div> 
```

CSS：

```
.inlined
{
    display: inline-block;
} 
```

您也可以使用`.inlined { float: left; }`or `.inlined { float: right; }`，但根据周围的元素，它们可能会出现意外行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T18:37:44.830

我希望这就是你正在寻找的...

```
<style type="text/css">
.container{
    margin-left: auto;
    margin-right: auto;
    width: 300px;
}
.box1, .box2 {
    width:280px;
    height:auto;
    float:left;
    margin-bottom:10px;
    padding:10px;
    border:1px solid #888;
}
.box1 {
    clear:left;
    margin-right:10px;
}
.clear {
    clear:both;
}
</style>

<div id="container">
    <div class="box1">
       Enter box 1 content here.
    </div>
    <div class="box2">
       Enter box 2 content here.
    </div>
    <div class="clear"></div>
</div> 
```

# php - 通过类中的函数包含文件时实例的继承？

> ID：11764906
> 
> 赞同：0
> 
> 时间：2012-08-01T17:59:59.100
> 
> 标签：php

我是新来的，如果有人可以帮助我，我有一个快速的问题。为了简短起见，我正在一个网站上工作，我的文件由目录分隔，我根据我所在页面的名称包含文件。例如，我有一个主页dashboard.php，它看起来像：

```
include $file1;
include $file2;
include $file3 etc. 
```

现在，我尝试使用一个类页面，该页面包含构建对象时自动需要的所有文件。我的问题是当我在类的帮助下包含文件时，我似乎无法在包含的文件中找到对象的实例。例如：`$page=new Page("Test") includes $file1,$file2`等....现在，当我尝试在 $file1 中使用对象 $page 时，它​​找不到它。如果有人对此问题有解决方案，或者您认为这是设计网页的错误方式，请告诉我。

这不是包含的问题，包含正在工作，我正在使用自动加载，所有问题都在于查看通过该类包含的类中的对象方法。让我更明确地说：

```
main.php :

    $page=new Page("Test");

Page.class.php :
__construct($title)
{
include($file1);
include($file2);
}
$file1:
echo "test"; // working
$file2:
echo $page->getTitle() // doesn't work, don't worry about the method it exists and works 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:05:36.540

根据[手册](http://us.php.net/manual/en/function.include.php)，该[`include()`](http://us.php.net/manual/en/function.include.php)函数继承了它所在行的[变量范围。](http://us.php.net/manual/en/language.variables.scope.php)

我假设你目前正在做类似的事情：

```
class Page {
public __construct() {
    include($file1);
    include($file2);
}
} 
```

如果您需要在您希望它们包含的类之外访问文件，您应该在类*之外*添加包含，例如：

```
include($file1);
include($file2);
class Page { ... 
```

如果您需要包含的文件来访问类实例本身（根据您的最新更新），您将使用[`$this`](http://php.net/manual/en/language.oop5.basic.php)伪变量。您不能`$page`在包含的文件中使用的原因是因为`$page`尚未定义；该变量的范围在您的 main.php 文件和它包含的任何其他文件中（但没有“内部”类）。

您可以更新您的包含 ($file2) 以使用`$this`with`echo $this->getTitle()`而不是，`echo $page->getTitle()`它应该可以正常工作。

或者，如果您想使用`$page`变量而不是，您可以在包含使用它的文件之前`$this`定义它，如下所示：`$page = $this;`

```
public __construct() {
    $page = $this;
    include($file2); // file2 will now have access to a variable named $page
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:04:49.753

如果您需要的是自动加载所需的类文件，PHP 已经有一个功能。

[http://php.net/manual/en/language.oop5.autoload.php](http://php.net/manual/en/language.oop5.autoload.php)

# android - NetBeans 和 APK 调试（重新编译，在设备上）

> ID：11764907
> 
> 赞同：0
> 
> 时间：2012-08-01T18:00:05.230
> 
> 标签：android, debugging, netbeans

我正在测试一个 Android 应用程序。我使用[APKTOOL](http://code.google.com/p/android-apktool/)反编译/重新编译（带有调试符号）。我执行了调试代码签名，然后安装了 APK。该程序似乎运行良好。

根据[APKTOOL](http://code.google.com/p/android-apktool/wiki/SmaliDebugging)，我应该能够附加到 NetBeans 中正在运行的进程。但我只能选择附加到本地主机上的进程。DDMS 未显示进程树和关联的调试套接字，如[使用 DDMS](http://developer.android.com/tools/debugging/ddms.html)中的图 1 所示。这对于所有应用程序都是预期的，因为我正在运行发布内核，但对于目标进程来说却是意外的。我使用 DDMS 来定位设备上的 PID，但当我尝试通过 PID 附加时，NetBeans 声称“不是有效的 PID”。我还安装了[NBAndroid](http://www.nbandroid.org/)插件。

如何使用 NetBeans 附加到设备上运行的进程？

杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T23:24:33.350

好的，找到问题了。即使我向 APKTOOL 询问调试信息（即`apktool -d ...`），该工具也没有生成格式良好的 AndroidManifest.xml（或修复现有清单）。清单中缺少`android:debuggable="yes"`该`application`元素。或者 APKTOOL 文档省略了该步骤...

“无法将调试器附加到设备上的应用程序”，[http://code.google.com/p/android-apktool/issues/detail](http://code.google.com/p/android-apktool/issues/detail?id=338) ?id=338 。

这里还潜伏着另一个问题：NetBeans 7.2 不能使用 Smali 文件（即使以前版本的 NetBeans 可以）。所以没有实时分析，因为调试器无法设置断点。请参阅[NetBeans/Smali 调试已损坏（SmaliDebugging 页面）](http://code.google.com/p/android-apktool/issues/detail?id=339)和[*.smali 没有 MIME 类型](http://code.google.com/p/smali/issues/detail?id=135)。

# c - Lua从函数返回值

> ID：11764915
> 
> 赞同：1
> 
> 时间：2012-08-01T18:01:02.493
> 
> 标签：c, lua

我有一个问题，当我这样做时

```
luaL_loadstring(luaState, "return 3, 4, 5"); 
```

我在堆栈上有 3 个值，但是当我尝试调用函数时

```
luaL_loadstring(luaState, vhs:get_sender_resolutions());

get_sender_resolutions = {function (self)
    local rresc = self.iface:GetSenderResolutionCount()
    local resolutions = {}
    for i=0,rresc-1 do
       local res = self.iface:GetSenderResolution(i)
       printdump (res, "#"..i.." = ")
       table.insert(resolutions, res)
    end
return 6, 7, 8 
```

我在堆栈上只有 1 个值 - 函数？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:32:03.423

`luaL_loadstring`想要加载一个字符串；您的第二次调用似乎是`luaL_loadstring`使用表参数（或函数，尚不清楚）进行调用。

# ruby-on-rails - Mongoid：为嵌入创建运行时模型

> ID：11764921
> 
> 赞同：0
> 
> 时间：2012-08-01T18:01:19.083
> 
> 标签：ruby-on-rails, runtime, mongoid, models, embedding

在我的应用程序中，我们必须在运行时创建模型，并将它们嵌入到当前模型中。这些创建的模型也可以反过来嵌入模型。为了获得这些可嵌入模型的共同点，我创建了一个可以包含在其中的模块。

例如：

```
module CommonMethods
  def make_self(context)
    if context['nested']
      inner_klass_name = context['name'].classify
      inner_klass = Object.const_set(inner_klass_name, Class.new)
      inner_klass.class_eval <<-ENDSRC
        include Mongoid::Document
        include CommonMethods

        embedded_in :#{@mclass_name.underscore}, :inverse_class_name => "#{@mclass_name}"

        after_initialize :start_make_self

        def start_make_self
          @mclass_name = "#{inner_klass_name}"
          make_self(#{context['nested_context']})
        end
      ENDSRC

      self.class_eval <<-ENDSRC
        embeds_one :#{context['name']}, :inverse_class_name => "#{inner_klass_name}"
      ENDSRC
    else
      self.class_eval <<-ENDSRC
        field :#{context['name']}, :type => String
      ENDSRC
    end
  end
end

class MModel
  include Mongoid::Document
  include CommonMethods

  field :context_id, :type => String
  after_initialize :start_make_self

  def start_make_self
    context = Context.where(:uid => self.context_id)
    @mclass_name = "MModel"
    make_self(context.attributes)
  end
end 
```

因此，它的字段`MModel`及其嵌入文档是在`Context`模型的帮助下制作的。

这里的问题是，虽然生成了非嵌套字段，并且可以动态验证，但嵌套（嵌入式）模型似乎存在问题：在生成新字段时它们没有被初始化`MModel`，并且数据被传递给它。第一级有效，低于它的任何级别都不起作用。

对此有任何提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:38:33.567

我通过覆盖类的构造函数部分解决了这个问题。

```
class MModel
  include Mongoid::Document
  include CommonMethods

  field :context_id, :type => String

  def initialize(attrs=nil)
    context = Context.where(:uid => attrs[:context_id])
    @mclass_name = "MModel"
    make_self(context.attributes)
    super
  end
end 
```

对于 inner_klass 也是如此。剩下的唯一问题是，虽然关系和验证工作（`embeds_one`等），但运行时字段声明似乎不起作用。例如，使用类型声明为 an 的字段`Array`不受支持。我通过提供相同的自定义验证暂时解决了这个问题。

# jquery - TD元素上的jQuery Click事件而不触发嵌套表TD元素

> ID：11764923
> 
> 赞同：1
> 
> 时间：2012-08-01T18:01:27.713
> 
> 标签：jquery, html

我有一个表格，其中的行是通过 jQuery 动态删除和添加的。元素上应该有单击事件处理程序，并且`td > ul`元素中可能存在子表`td`。我的问题是我无法弄清楚如何在`td > ul`不触发对嵌套表元素的单击的情况下在父表的元素上建立侦听器`td > ul`。我已经尝试使用以下语句`jQuery.on()`。

HTML

```
<table class="click-me">
    <tbody>
        <tr>
            <td>
                <ul><li>click</li></ul>
            </td>
            <td>dummy td
            </td>
        </tr>
    </tbody>
</table> 
```

CSS

```
td { border: 1px solid; margin: 20px; padding: 20px; }

.new { background-color: yellow; } 
```

Javascript

```
$("table.click-me > tbody").on("click", "tr:first-child > td > ul > li", function()
{
    $(this).closest("tr").after("<tr class=\"new\"><td><ul><li>click (new)</li></ul></td><td><table><tbody><tr><td><ul><li>click</li></ul></td><td>dummy td</td></tr></tbody></table></td></tr>")
});

$("table.click-me").on("click", "tbody > tr > td > ul > li", function()
{
    $(this).closest("tr").after("<tr class=\"new\"><td><ul><li>click (new)</li></ul></td><td><table class=\"\"><tbody><tr><td><ul><li>click</li></ul></td><td>dummy td</td></tr></tbody></table></td></tr>")
}); //works on ALL children elements, even the sub-table. Not the desired results 
```

与往常一样，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:08:57.757

你需要给它一个起点

从 table.click-me > tbody > 开始，然后只获取第一个 tr

```
$("table.click-me").on("click", "tbody:first > tr > td > ul > li", function(){
     $(this).closest("tr").after("<tr class=\"new\"><td><ul><li>click (new)</li></ul></td><td><table><tbody><tr><td><ul><li>click</li></ul></td><td>dummy td</td></tr></tbody></table></td></tr>")
}); 
```

[http://jsfiddle.net/wgRb5/1/](http://jsfiddle.net/wgRb5/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:10:26.043

见[演示](http://jsfiddle.net/Z4tX2/1/)

```
$("table.click-me > tbody > tr:first-child > td > ul > li").on("click", function() {
  $(this).closest("tr").after("<tr class=\"new\"><td><ul><li>click (new)</li></ul></td><td><table><tbody><tr><td><ul><li>click</li></ul></td><td>dummy td</td></tr></tbody></table></td></tr>")
});    ​ 
```

或者也许你想要[这个](http://jsfiddle.net/SgNbP/)

```
$("table.click-me > tbody > tr > td > ul > li").live("click", function() {
  $(this).closest("tr").after("<tr class=\"new\"><td><ul><li>click (new)</li></ul></td><td><table><tbody><tr><td><ul><li>click</li></ul></td><td>dummy td</td></tr></tbody></table></td></tr>")
});

​ 
```

# intellij-idea - 未能单击 Intellij 变量监视弹出窗口，因为它关闭得太快。

> ID：11764929
> 
> 赞同：1
> 
> 时间：2012-08-01T18:01:45.573
> 
> 标签：intellij-idea

当我在 IntelliJ 中调试 java 程序时将鼠标移到变量上时，会显示一个变量监视弹出窗口。窗口建议单击它以展开视图，但在我移动鼠标的那一刻，弹出窗口就关闭了！我从来没有成功地在这样一个弹出式监视窗口中扩展视图。

是否有任何设置可以让弹出窗口更具粘性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:45:35.167

您可以**在变量上**`Alt`使用+来获得粘性弹出窗口。也请[为相关问题投票](http://youtrack.jetbrains.com/issue/IDEA-63112)。`Click`

 **此快捷方式在**Keymap** ( `Main menu`| `Run`| **Quick Evaluate Expression** ) 中定义：

![快速评估表达式](../Images/4c7e541ad37ffe0ead55e73f6b22ae87.png)**

# php - Drupal 7 代币替换

> ID：11764932
> 
> 赞同：4
> 
> 时间：2012-08-01T18:01:51.270
> 
> 标签：php, drupal-7, token

将令牌替换存储在变量中的正确方法是什么？或者我什至应该打扰并直接打电话给他们？

像：

```
$author_uid = [node:author:uid];
$name = [node:title];
$picture = [node:field-image-upload:file];
$link = [node:url]; 
```

给我一个错误：

```
PHP Parse error:  syntax error, unexpected ':' 
```

难道我做错了什么？

同样关于这条线：

```
$picture = [node:field-image-upload:file]; 
```

我真正想要的是该图像文件的 url 链接。我怎样才能用令牌做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T18:25:30.260

如果要将令牌存储在变量中，则应编写`$author_uid = "[node:author:uid]";`

请注意，**令牌只是一个字符串**。
如[文档中`token.inc`](http://api.drupal.org/api/drupal/includes!token.inc/7)所述，令牌系统是...

> 用于将文本中的占位符替换为有意义的值的 API 函数。

如果您想要图像文件的 URL 链接，您可以执行以下操作：

```
$picture = token_replace('[node:field-image-upload:file]', array('node' => $node)); 
```

请注意，您需要已经拥有`$node`要传递给[令牌替换函数](http://api.drupal.org/api/drupal/includes!token.inc/function/token_replace/7)的对象。

# ruby-on-rails - mongodb 集合中的前 n 个元素

> ID：11764937
> 
> 赞同：1
> 
> 时间：2012-08-01T18:02:11.713
> 
> 标签：ruby-on-rails, ruby, mongodb

我有一个像这样输入的 mongo db 集合

```
{
      _id:
      sender:
      receiver:
} 
```

无论如何使用/不使用mapreduce在集合中的发送者和接收者中获得前N个？我正在使用 mongodb ruby​​ 驱动程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:11:40.607

如果可能，我会查看 MongoDB 2.2（下一个稳定版本）中可用的新聚合框架。这是你想要完成的吗？

输入：

```
{_id:1, name:"Jenna"}
{_id:2, name:"Jenna"}
{_id:3, name:"Tom"}
{_id:4, name:"Tom"}
{_id:5, name:"George"}
{_id:6, name:"George"} 
```

命令：

```
> db.unicorn.aggregate({$group: {_id: "$name"}},{$limit:2}) 
```

结果：

```
{
    "result" : [
        {
            "_id" : "George"
        },
        {
            "_id" : "Tom"
        }
    ],
    "ok" : 1
} 
```

www.mongodb.org/display/DOCS/Aggregation+Framework

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:40:49.337

有一个与 map reduce 相关的限制参数，但文档说你不能将它与分片集群一起使用。您可以将 map reduce 的结果输出到新集合并对该集合执行 .find().limit(n) 查询吗？或者您是否试图避免长时间运行的聚合命令，这就是您首先对限制输出感兴趣的原因？还是我误解了你的问题？

输入：

```
{ "_id" : 1, "sender" : "Jenna"}
{ "_id" : 2, "sender" : "Jenna"}
{ "_id" : 3, "sender" : "George"}
{ "_id" : 4, "sender" : "George"}
{ "_id" : 5, "sender" : "Amy"} 
```

MR函数

```
map = function () {
    emit(this.sender, 1);
}

reduce = function (key, values) {
    return 1;
} 
```

输出：

```
"results" : [
        {
            "_id" : "Amy",
            "value" : 1
        },
        {
            "_id" : "George",
            "value" : 1
        },
        {
            "_id" : "Jenna",
            "value" : 1
        }
    ] 
```

# jquery - jQuery 选择下拉选项，只有一个非空白选项

> ID：11764942
> 
> 赞同：3
> 
> 时间：2012-08-01T18:02:20.433
> 
> 标签：jquery, html, html-select

我正在处理一个店面包（所以我没有编辑核心文件的选项），我们有下拉菜单来选择用户想要名片的正面和背面。有些卡片只有一个选项，所以如果只有一个选项，客户希望隐藏下拉菜单。

容易，对吧？

```
$("select").each(function(){
    var count = $(this).children("option").length;
    if ( count == 1 ) {
        // there's only one option, do something
    }
}); 
```

这行得通，但问题是系统有时会`<option>`为某些下拉菜单生成空白，因此实际上有两个选项，但只有一个“真实”选项：

```
<select>
    <option></option>
    <option value="Something">A real option</option>
</select> 
```

基本上，我需要选择`<select>`只有一个`<option>`或两个`<option>`s 而一个是空的。

我不能完全理解这种 if 语句的逻辑，所以如果有人有任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T18:06:52.077

您可以使用`not`方法和`:empty`选择器：

```
$("select").each(function(){
    var count = $(this).find("option").not(':empty').length;
    if ( count == 1 ) {
        alert('okay')
    }
}); 
```

[演示](http://jsfiddle.net/TwW9u/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:07:16.910

改变你计算它们的方式：

```
$('select').each(function() {
    var count = 0;
    $(this).children('option').each(function() {
        if ( $(this).text() ) // true if not empty
        {
            ++count;
        }
    });
    if ( count == 1 ) // count only includes non-empty options 
```

那应该处理它。

# php - MacPorts：MySQL 和 PHP 无法连接

> ID：11764945
> 
> 赞同：0
> 
> 时间：2012-08-01T18:02:35.823
> 
> 标签：php, mysql, apache2, macports

我浏览了相关的帖子及其建议的解决方案（[此处](https://stackoverflow.com/questions/5353954/)和[此处](https://stackoverflow.com/questions/1516739/)），但它们似乎对我的情况没有帮助。

我在 Snow Leopard 上运行 MacPorts 2.1.2，并且安装了以下软件包：

```
php5-mysql @5.3.15_0+mysql5 (active)
php5 @5.3.15_0+apache2 (active)
mysql5 @5.1.63_0 (active)
mysql_select @0.1.2_0 (active)
apache2 @2.2.22_2+preforkmpm (active) 
```

我可以将我的网络浏览器指向 localhost，它将连接到默认站点；一个测试 index.php

```
<?php phpinfo() ?> 
```

页面也可以正常工作，因此我假设此时 PHP 可以正常工作。问题是连接到已安装的 MySQL 服务器。phpmyadmin 和 Joomla 似乎都无法连接，并且尝试 .php 测试脚本也会导致问题。对于如何从这里开始，我有点不知所措。

MySQL 服务器显然正在运行：

```
~ > ps ax | grep mysql
10884   ??  S      0:00.03 /bin/sh /opt/local/lib/mysql5/bin/mysqld_safe
10930   ??  S      0:07.66 /opt/local/libexec/mysqld --basedir=/opt/local --datadir=/opt/local/var/db/mysql5 --user=_mysql --log-error=/opt/local/var/db/mysql5/tigger.local.err --pid-file=/opt/local/var/db/mysql5/tigger.local.pid 
```

我可以使用 mysql 客户端：

```
~ > mysql
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 15
Server version: 5.1.63 Source distribution

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| test               |
+--------------------+
2 rows in set (0.04 sec)

mysql> show grants for 'root'@'localhost';
+---------------------------------------------------------------------+
| Grants for root@localhost                                           |
+---------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION |
+---------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

有插座

```
~ > ll /opt/local/var/run/mysql5/mysqld.sock 
srwxrwxrwx 1 _mysql admin 0 Jul 31 16:55 /opt/local/var/run/mysql5/mysqld.sock 
```

php.ini 包含 MySQL 模块和配置

```
~ > /opt/local/bin/php -i | grep mysql | grep socket
mysql.default_socket => /opt/local/var/run/mysql5/mysqld.sock => /opt/local/var/run/mysql5/mysqld.sock
mysqli.default_socket => no value => no value
pdo_mysql.default_socket => /opt/local/var/run/mysql5/mysqld.sock => /opt/local/var/run/mysql5/mysqld.sock 
```

在我看来，这一切都应该是这样的。但是，当我尝试使用“root”登录 phpmyadmin 时，连接失败，在 Joomla 设置期间也会发生同样的情况。

任何帮助，提示，建议表示赞赏:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:36:48.547

首先，我发现[这个](https://stackoverflow.com/questions/1591978/macports-mysql5-setup-under-snow-leopard)线程很有帮助，让我验证我所做的一切正常。

我缺少什么：

1.  我明确地将其添加`/opt/local/var/run/mysql5/mysqld.sock`到`etc/php5/php.ini`文件中。不确定这是否改变了任何东西，但现在所有 php 都可以访问套接字：

    ```
    /opt/local/etc > /opt/local/bin/php -i | grep mysql | grep socket
    mysql.default_socket => /opt/local/var/run/mysql5/mysqld.sock => /opt/local/var/run/mysql5/mysqld.sock
    mysqli.default_socket => /opt/local/var/run/mysql5/mysqld.sock => /opt/local/var/run/mysql5/mysqld.sock
    pdo_mysql.default_socket => /opt/local/var/run/mysql5/mysqld.sock => /opt/local/var/run/mysql5/mysqld.sock 
    ```

2.  我本可以发誓我这样做了，但我还是尝试了：`/opt/local/lib/mysql5/bin/mysqladmin -u root password '..'`现在 Joomla 和 phpmyadmin 都连接到 mysqld。

就这样！另一个线程的[测试脚本也可以正常工作。](https://stackoverflow.com/questions/1591978/macports-mysql5-setup-under-snow-leopard/7141542#7141542)

# c# - 检查鼠标滚轮时图像是否在底部

> ID：11764948
> 
> 赞同：1
> 
> 时间：2012-08-01T18:02:48.700
> 
> 标签：c#, winforms

我正在增强一个显示 TIFF 图像的 Windows 窗体应用程序。该应用程序在面板顶部有一个图片框，一次显示一个图像页面（用户可以单击缩略图来查看特定图像）。如果有多个图像，用户希望通过使用诸如鼠标滚轮之类的事件来查看下一个图像。我们目前有上一个和下一个箭头按钮/功能，但他们想要更多）

我认为我应该做的是在鼠标滚轮事件期间找出图像是否位于底部，然后选择下一个。同样，相反的方法，如果他们使用鼠标滚轮向上，则获取上一个图像并滚动到底部。

另外，我需要注意图像可能比面板大，因此会出现垂直滚动条。所以，在使用鼠标滚轮时，需要确保它在底部。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:27:14.820

您可以使用[MouseWheelEvent](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousewheel%28v=vs.71%29.aspx)在滚动上添加一个事件处理程序，然后查看 e.Delta

如果 e.delta 为正，则向上滚动，如果为负，则只需增加或减少要显示的图像索引。

这有意义/回答你的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:06:11.193

我找到了解决方案

1）创建了一个新变量来存储之前的垂直滚动值（prevVScrollVal）。
2) 创建一个新的 MouseEventHandler

```
this.imageContainer.MouseWheel += new MouseEventHandler(this.imageContainer_MouseWheel); 
```

3）在鼠标事件处理程序中通过查看@ e.delta 来识别是向上还是向下，然后检查先前的滚动值是否相同并相应地切换图像。

```
 private void imageContainer_MouseWheel(object sender, MouseEventArgs e)
    {
        if (e.Delta > 0)
        {
            imageContainer_MouseWheelScrollUp(sender, e);
        }
        else if (e.Delta < 0)
        {
            imageContainer_MouseWheelScrollDown(sender, e);
        }

        prevVScrollVal = imageContainer.VerticalScroll.Value;
    }

    private void imageContainer_MouseWheelScrollUp(object sender, MouseEventArgs e)
    {
        if (imageContainer.VerticalScroll.Value == 0 && 
            prevVScrollVal == 0 && 
            current > 1)
        {
            setPagePrev();
        }
    }

    private void imageContainer_MouseWheelScrollDown(object sender, MouseEventArgs e)
    {

        if (imageContainer.VerticalScroll.Value == prevVScrollVal && 
                current < endPage)
        {
            setPageNext();
        }
    }

    /// <summary>
    /// Sets the page to the Next
    /// </summary>
    private void setPageNext()
    {
        setPage(current + 1);
    }

    /// <summary>
    /// Sets the page to the Previous
    /// </summary>
    private void setPagePrev()
    {
        setPage(current - 1);
        prevVScrollVal = imageContainer.VerticalScroll.Maximum;
        imageContainer.VerticalScroll.Value = imageContainer.VerticalScroll.Maximum;
        imageContainer.PerformLayout();
    }
    /// <summary>
    /// Sets the page to be viewed
    /// </summary>
    /// <param name="page">page to be viewed</param>
    public void setPage(int page)
    {  ....  } 
```

# javascript - 通过正则表达式删除部分网址

> ID：11764949
> 
> 赞同：0
> 
> 时间：2012-08-01T18:02:50.447
> 
> 标签：javascript, regex

我有这个字符串：

```
url(http:\/\/localhost\/cards\/media\/images\/designs\/backgrounds\/default\/1.jpg) 
```

现在我想删除`url(http:\/\/localhost\/cards\/`

最大的问题是它可以一直改变，但这部分`/media\/images\/designs\/backgrounds\`会一直保持不变，所以我想我需要匹配所有内容，直到`media`但我不太了解正则表达式，所以我需要一些帮助： )

这也应该用`js`or来完成`jquery`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:06:49.857

```
var url = 'http:\/\/localhost\/cards\/media\/images\/designs\/backgrounds\/default\/1.jpg';
var start = url.indexOf('/media');
var result = url.substr(start);

​alert(result);​ 
```

[jsFiddle 链接](http://jsfiddle.net/THJQm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T18:07:33.527

**编辑：**

`string.replace(/.*(?=\/media\/images\/designs\/backgrounds\/default\/1.jpg)/i,"");`

# .net - 在 Unity 调用站点拦截方法的完整堆栈跟踪

> ID：11764951
> 
> 赞同：5
> 
> 时间：2012-08-01T18:03:03.187
> 
> 标签：.net, unity-container, unity-interception

我们正在研究使用 Unity 来处理带有拦截的日志服务方法。然而，一个问题是调用站点上没有完整的堆栈跟踪。它仅在拦截器调用中可用。

这是一个示例设置：

```
public interface IExceptionService
{
    void ThrowEx();
}

public class ExceptionService : IExceptionService
{
    public void ThrowEx()
    {
        throw new NotImplementedException();
    }
}

public class DummyInterceptor : IInterceptionBehavior
{
    public IEnumerable<Type> GetRequiredInterfaces()
    {
        return Type.EmptyTypes;
    }

    public IMethodReturn Invoke(IMethodInvocation input, GetNextInterceptionBehaviorDelegate getNext)
    {
        IMethodReturn ret = getNext()(input, getNext);
        if (ret.Exception != null)
            Console.WriteLine("Interceptor: " + ret.Exception.StackTrace + "\r\n");
        return ret;
    }

    public bool WillExecute
    {
        get { return true; }
    }
}

class Program
{
    static void Main(string[] args)
    {
        IUnityContainer container = new UnityContainer();
        container.AddNewExtension<Interception>();

        container.RegisterType<IExceptionService, ExceptionService>(
            new Interceptor<InterfaceInterceptor>(),
            new InterceptionBehavior<DummyInterceptor>());

        try
        {
            container.Resolve<IExceptionService>().ThrowEx();
        }
        catch (Exception e)
        {
            Console.WriteLine("Call Site: " + e.StackTrace);
        }

    }
} 
```

这是运行该程序的控制台输出：

```
Interceptor:
at ConsoleDemo.ExceptionService.ThrowEx() in    C:\code\ServiceDemo\ConsoleDemo\Program.cs:line 25
at DynamicModule.ns.Wrapped_IExceptionService_248fe3264f81461f96d34670a0a7d45d.<ThrowEx_DelegateImplementation>__0(IMethodInvocation inputs, GetNextInterceptionBehaviorDelegate getNext)

Call Site:
at DynamicModule.ns.Wrapped_IExceptionService_248fe3264f81461f96d34670a0a7d45d.ThrowEx()
at ConsoleDemo.Program.Main(String[] args) in C:\code\ServiceDemo\ConsoleDemo\Program.cs:line 63 
```

拦截器中的堆栈跟踪很好，足以在服务级别进行日志记录。但是，我们失去了呼叫站点拦截代理呼叫之后的所有内容；

我可以将异常包装在 ServiceException 或类似的拦截器中，这会将调用堆栈保留在内部异常中，但这会导致尴尬的日志记录和调试检查场景（尽管比完全丢失跟踪要尴尬）。

我还注意到，当我们使用TransparentProxyInterceptor 时，我们或多或少地得到了我们想要的东西，但这被认为比InterfaceInterception 慢，并且会为某些组触发警报。

有没有更简洁的方法可以在代理的调用站点通过 Unity 拦截获得完整的堆栈跟踪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:21:14.077

在 .NET 4.5 中将有[ExceptionDispatchInfo](http://msdn.microsoft.com/en-us/library/system.runtime.exceptionservices.exceptiondispatchinfo%28v=vs.110%29.aspx)用于此目的。

对于所有其他版本，您可以看到这个问题：
[在 C# 中，如何在不丢失堆栈跟踪的情况下重新抛出 InnerException？](https://stackoverflow.com/questions/57383/in-c-how-can-i-rethrow-innerexception-without-losing-stack-trace)

# php - PHP下拉框未填充

> ID：11764958
> 
> 赞同：0
> 
> 时间：2012-08-01T18:03:30.727
> 
> 标签：php, drop-down-menu

我试图让一个下拉框从数据库中的数据中填充，但它似乎不起作用。它传递一个错误，指出数据库中没有数据可供读取，但有。下面是我用来使它工作的脚本。

```
 <?php
@ini_set('display_errors', 'on');
 echo "<h1>Register</h1>";
if ($_SERVER['REQUEST_METHOD'] == 'POST'){

$errors = array();
if (empty($_POST['firstname'])){
$errors[] = 'Your forgot to enter your first name.';
}else{
  $firstname = trim($_POST['firstname']);
  }
if (empty($_POST['lastname'])){
$errors[] = 'Your forgot to enter your last name.';
}else{
  $lastname = trim($_POST['lastname']);
}
if (empty($_POST['username'])){
$errors[] = 'Your forgot to enter your  username.';
}else{
  $username = trim($_POST['username']);
}
if (!empty($_POST['password1'])) {
if ($_POST['password1'] != $_POST ['password2']) {
  $errors[] = 'Your password did not match the confirmed password!';
 }else{
   $password = trim($_POST['password1']);
  }
} else {
  $errors[] = 'You forgot to enter your password!';
}
if (empty($_POST['birthdate'])){
$errors[] = 'Your forgot to enter your  birthdate.';
}else{
  $birthdate = trim($_POST['birthdate']);
}
if (empty($_POST['gamespyid'])){
$errors[] = 'Your forgot to enter your  gamespy id.';
}else{
  $gamespyid = trim($_POST['gamespyid']);
}
  if (empty($errors)) {
     if (is_file('admin/mysqli_connect.php')) { echo '<p>The connection file is there.</p>';require('admin/mysqli_connect.php'); }

else {
  echo '<p>The connection file is not there</p>';
  }
     $q="INSERT INTO Users (firstname, lastname, username, password1, birthdate, gamespyid, base) VALUES ('$firstname', '$lastname', '$username', md5('$password1'), '$birthdate', '$gamespyid', '$base')";
$r = mysql_query($dbc, $q);
if ($r){
 echo'<p>You are now registered</p>';
}else{
  echo'<p>You have not been registered</p>';
                                            }
  } else {
    echo 'Error<br> <p>The following errors have occured:<br/>';
    foreach ($error as $msg) {
      echo " - $msg<br/>\n";
    }
    echo '</p><p>Please try again.</p><p><br/></p>';
  }   //if no errors

 }     //submit

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
  <title></title>
</head>

<body>
  <form action="http://www.virtual-aviation.org/gatewayaviation/index.php?p=register" method='POST'>
    <table summary="REgform">
      <tr>
        <td>First Name:</td>

        <td><input type='text' name='firstname' value='<?php echo $firstname; ?>'></td>
      </tr>

      <tr>
        <td>Last Name:</td>

        <td><input type='text' name='lastname'value='<?php echo $lastname; ?>'></td>
      </tr>

      <tr>
        <td>Username:</td>

        <td><input type='text' name='username'value='<?php echo $username; ?>'></td>
      </tr>

      <tr>
        <td>Password:</td>

        <td><input type='password' name='password1'></td>
      </tr>

      <tr>
        <td>Repeat Password:</td>

        <td><input type='password' name='password2'></td>
      </tr>

      <tr>
        <td>Birthdate:</td>

        <td><input type='text  ' name='birthdate'value='<?php echo $birthdate; ?>'></td>
      </tr>

      <tr>
        <td>Gamespy Id:</td>

        <td><input type='text' name='gamespyid'value='<?php echo $gamespyid; ?>'></td>
      </tr>
       <td>Base:</td>
      <tr>
       <td><select name="base" size="1">
          <option>
            Select One
          </option>
         <?php
         $qf = "SELECT  airport_id, CONCAT_WS(' ', airport_name, airport_code) FROM airports ORDER BY airport_code ASC";
         $rf = mysqli_query ($dbc, $qf);

         if (mysqli_num_rows($rf) > 0) {
         while ($row = mysql_fetch_array ($rf, MYSQLI_NUM)) {
         echo "<option value=\"$row[0]\"";
         if (isset($_POST['existing']) && ($_POST['existing'] == $row[0]) ) echo 'selected="selected"'; echo ">$row[1]</option>\n";
         }
   } else {
   echo '<option>Please a new airport first.</option>';
    }
    //mysqli_close($dbc);

         ?>
        </select></td>
      </tr>
    </table>
   <input type='submit' name='submit' value='Register'/>
  </form>
  <?php
  echo '<p>debugger<p>' . $rf ;
  ?>
</body>
</html> 
```

以下是我查看源代码时遇到的一些错误；错误出现在选项框内容应位于的位置。

**警告**：mysqli_query() 期望参数 1 为 mysqli，在第**182**行的**/home5/virtua15/public_html/gatewayaviation/pages/register.inc.php中给出 null****警告**：mysqli_num_rows() 期望参数 1 为 mysqli_result，在**/中给出 null** **home5/virtua15/public_html/gatewayaviation/pages/register.inc.php**在第**184行**

 ******```
Please a new airport first. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:08:49.503

使用 mysql_* 或 mysqli_* 函数，但不能同时使用。我希望您选择后者并了解准备好的语句： http: [//php.net/manual/en/mysqli.quickstart.prepared-statements.php](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)

问题是您的`$dbc`变量很可能是 mysql 资源*或 null*，而不是 mysqli 资源，因此当您将其传递给 mysqli_* 函数时，它会失败。有多种方法可以检查并确保您拥有有效的资源：

```
$mysqli = new mysqli("example.com", "user", "password", "database");
if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
} 
```

要解决您的问题，您需要重组代码以**仅**使用mysqli 并确保`$dbc`是有效的 mysqli 资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:09:31.160

在示例的第 123 行，您有`$rf = mysqli_query ($dbc, $qf);`Parameter #1 is `$dbc`，即 MySQL 连接对象。错误消息指出连接对象是`null`，这是真的 - 它没有在脚本中的任何地方声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T18:13:04.143

好，

警告：mysqli_query() 期望参数 1 为 mysqli，在第 182 行的 /home5/virtua15/public_html/gatewayaviation/pages/register.inc.php 中给出 null

是因为你不能使用 mysqli_query ($dbc, $qf); 当 $dbc 不是从 mysql_connect 或 mysql_init 返回时，因为它需要一个链接作为第一个参数，而那些返回它需要的链接。

这也是您遇到第二个错误的原因。mysqli 没有向 $rf 返回任何内容。

我建议重构整个页面。从给变量赋予有意义的名称开始，转义你的 SQL 字符串参数以帮助避免注入。

清除这些警告并再试一次。******

# arrays - Fortran 子例程返回失败

> ID：11764960
> 
> 赞同：0
> 
> 时间：2012-08-01T18:03:31.040
> 
> 标签：arrays, fortran, fortran90

我有一个从外部模块调用子程序的 Fortran 数字代码。在我尝试在另一台机器上编译和运行之前，这段代码一直运行良好。在新机器上，我的程序很快就崩溃了。

使用调试打印语句，我已经隔离了崩溃发生在从外部子例程返回时。主程序多次调用子程序，第二次调用子程序返回时发生崩溃（第一次调用正常）。它总是在使用这组输入数据的第二个子程序调用时崩溃，但是对于另一组输入数据（大约是第一个数据的 1/3），它在从第五个子程序调用返回时崩溃。

这些症状向我表明，每次都将某些内容存储在内存中，并在每个子例程调用中累积，直到空间不足，但我不确定那是什么或如何发生。代码很难简化为最小的工作示例，但我在下面发布了相关部分。让我知道是否还有其他有助于查看的内容。它基本上是固定形式的 Fortran 90。

```
 use fd

         implicit none

         integer, parameter :: ms = 2000
         integer n
         real(dp), dimension(ms) :: s
         real(dp), dimension(ms) :: e
         real(dp), dimension(ms) :: f
         real(dp), dimension(ms) :: d1f
         real(dp), dimension(ms) :: d2f
         real(dp), dimension(ms) :: c, d
         real(dp), dimension(ms) :: a
         real(dp), dimension(ms) :: b
         real(dp), dimension(ms) :: temp
         integer w
         integer k
         real(dp) th

         do i = 1,n
           temp(i) = a(i)
         end do
         call lprsmf(s(1:n),temp(1:n),n,w,k,th,a(1:n),d1f(1:n),
      *               d2f(1:n))

         do i = 1,n
           temp(i) = b(i)
         end do
         call lprsmf(s(1:n),temp(1:n),n,w,k,th,b(1:n),d1f(1:n),
      *               d2f(1:n))

         do i = 1,n
           temp(i) = c(i)
         end do
         call lprsmf(s(1:n),temp(1:n),n,w,k,th,c(1:n),d1f(1:n),
      *               d2f(1:n))

         do i = 1,n
           temp(i) = d(i)
         end do
         call lprsmf(s(1:n),temp(1:n),n,w,k,th,d(1:n),d1f(1:n),
      *               d2f(1:n))

         do i = 1,n
           temp(i) = e(i)
         end do
         call lprsmf(s(1:n),temp(1:n),n,w,k,th,e(1:n),d1f(1:n),
      *               d2f(1:n))

         do i = 1,n
           temp(i) = f(i)
         end do
         call lprsmf(s(1:n),temp(1:n),n,w,k,th,f(1:n),d1f(1:n),
      *               d2f(1:n)) 
```

模块`fd`：

```
 module fd
        ! Double precision real kind
        integer, parameter :: dp = selected_real_kind(15)

      contains

      subroutine lprsmf(x,y,n,w,k,th,s,d1,d2)
!       INPUTS:
!         x, y, n, w, k, th
!       OUTPUTS:
!         s, d1, d2

        implicit none

        real(dp), dimension(n) :: x,y,s,d1,d2
        integer n,w,k
        real(dp) th

!     ... code here ...

      end subroutine lprsmf

      end module fd 
```

我的编译器是 gfortran 4.6.1。除了让代码停止崩溃之外，我真的很想了解参数传递的基本情况（因为我认为问题在于数组切片被传递出程序）。请注意，`a,b,c,d,e,f,s,temp,d1f,d2f`长度为 2000，而`n`表示有效数据的范围，其范围为 100-500，具体取决于输入数据的长度。

**编辑：** 错误消息是 Windows 弹出一个对话框，通知我程序已停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:31:31.137

感谢大家帮助追查这个问题。我遵循[MSB 的建议](https://stackoverflow.com/questions/11764960/fortran-subroutine-fails-on-return#comment15630980_11764960)并使用`-O2 -fimplicit-none -Wall -Wline-truncation -Wcharacter-truncation -Wsurprising -Waliasing -Wimplicit-interface -Wunused-parameter -fwhole-file -fcheck=all -fbacktrace`. 这揭示了我包含在我的子程序中的其他人的旧 F77 代码中的内存泄漏。显然，一些内部数组的长度比需要的短 1 项。我解决了这个问题，现在一切似乎都很好。

# button - 如何在wordpress中制作具有浮动属性的社交网络共享按钮

> ID：11764961
> 
> 赞同：0
> 
> 时间：2012-08-01T18:03:30.987
> 
> 标签：button, twitter, facebook-like, google-plus-one, pinterest

我想知道如何在我的 wordpress 模板中添加社交媒体按钮。我想在我的 wordpress 主体的左侧有一个 Facebook like、google plus、pinterest pin it 和 twitter 推文按钮。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:38:14.827

也许这个关于[如何添加浮动 facebook like、twitter tweet、google plus one 和 pinterest 按钮的](http://www.bendaggers.com/how-to-make-a-floating-facebook-like-twitter-tweet-google-plus-one-pinterest-pin-it-in-your-wordpress-theme/, "如何添加浮动 facebook like、twitter tweet、google plus one 和 pinterest 按钮")教程可以帮助你。它还具有一项功能，只要您的屏幕分辨率较低，它就会自动隐藏。

# python - 包含在 Python 字符串中的粗体搜索文本

> ID：11764963
> 
> 赞同：3
> 
> 时间：2012-08-01T18:03:40.330
> 
> 标签：python, text, substring

**示例** 如果用户搜索“汽车”，我希望输出看起来像

今天找到您最喜欢的**汽车，接下来 2 天的****汽车**销售。

请注意，汽车是粗体的。谷歌做到了： ![在此处输入图像描述](../Images/c6d63f2523d302c8c4b662351c1ffa6a.png)

在 Python 中执行此操作的最佳方法是什么？粗体在 HTML 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T18:06:46.090

```
>>> the_string = "New Cars, Used Cars, Car Reviews, Car Finance Advice - Cars.com"
>>> re.sub(r'(car)', r'<b>\1</b>', the_string, flags=re.I)
'New <b>Car</b>s, Used <b>Car</b>s, <b>Car</b> Reviews, <b>Car</b> Finance Advice - <b>Car</b>s.com' 
```

不过，要弄清楚到底什么应该算作“汽车”的实例有点棘手。这将使“**汽车**香椿”等。你可以试试`\b(cars?)\b`这个特定的短语；通常，您可能想要使用[stemmer](http://en.wikipedia.org/wiki/Stemming)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T18:44:33.283

```
>>> import re
>>> the_string = "New Cars, Used Cars, Car Reviews, Car Finance Advice - Cars.com"
>>> word = 'cars'
>>> toreplace = "<span class='highlight' STYLE='color:black'>\g<0></span>"
>>> pattern = re.compile(re.escape(word), re.I)
>>> highlighted_txt = re.sub(pattern,toreplace,the_string)
>>> highlighted_txt
 "New <span class='highlight' STYLE='color:black'>Cars</span>, Used <span class='highlight' STYLE='color:black'>Cars</span>, Car Reviews, Car Finance Advice - <span class='highlight' STYLE='color:black'>Cars</span>.com"
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T18:15:21.443

字符串替换方法非常好用，可以替换搜索词的所有实例：

```
s = 'New Cars, Used Cars, Other Cars'
s2 = s.replace('Cars', '<b>Cars</b>') 
```

如果要保留原始的大写/小写，请使用 re 模块：

```
import re
s3 = re.sub(r'(CARS)', r'<b>\1</b>', s, flags=re.IGNORECASE) 
```

# html - 仅在 CSS 中的悬停列表

> ID：11764971
> 
> 赞同：6
> 
> 时间：2012-08-01T18:04:06.337
> 
> 标签：html, css

我在使用 CSS 翻转菜单时遇到了一些问题。

我看过很多，也有教程，但是有太多不必要的代码，我发现很难区分哪些是需要的代码，哪些是其他 CSS。

我只想在 CSS 上有一个悬停菜单，因为我正在处理的网站有很多用户故意禁用脚本（JavaScript）。

我不明白，在 CSS 中，当用户将鼠标悬停在父列表项上时，如何使“子菜单”出现在其父列表项下方。有人可以帮我理解这在 CSS 中是如何工作的吗？

下面是我所指的图像：

> ![在此处输入图像描述](../Images/cf6198b079b65f5cd0e14d1b98658325.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T18:06:47.203

以下将以其基本形式起作用，但适合您自己的口味（位置、边框、颜色等）：

```
<ul>
    <li>Simple List item
        <ul>
            <li>sub menu item 1</li>
            <li>sub menu item 2</li>
            <li>sub menu item 3</li>
       </ul>
    </li>
</ul> 
```

使用 CSS：

```
ul li {
    position: relative;
}

ul ul {
    position: absolute;
    top: 1em;
    left: 0;
    display: none;
}

ul > li:hover ul {
    display: block;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/4fsaC/1/)。

# sql - While循环问题

> ID：11764972
> 
> 赞同：2
> 
> 时间：2012-08-01T18:04:11.500
> 
> 标签：sql, tsql, sql-server-2005, while-loop

该查询应该从 sql DB 中删除临时表/视图，但是当删除最后一个表/视图时，它会一直循环。任何人都有答案，为什么在删除最后一张表时会进入无限循环？

```
DECLARE @name VARCHAR(128)

DECLARE @SQL VARCHAR(254)

DECLARE @type VARCHAR(50)

DECLARE @tmp_table TABLE
    (
      table_name VARCHAR(50)
    , table_type VARCHAR(50)
    )

;WITH    cte_tempTables

          AS (
               SELECT
                table_name
              , crdate
              , crdate + 90 [ExperiationDate]
              , TABLE_TYPE
               FROM
                INFORMATION_SCHEMA.TABLES t
               inner join sysobjects s
                on s.name = t.table_name
               WHERE
                TABLE_CATALOG = 'SBR_Temp'
                AND t.table_name NOT IN ( 'DaleDelq' ,'tblCancelContract' ,
                                          'tblCreateContracts' ,'MWFRTPay' )

             )

    INSERT INTO
        @tmp_table
        (
          table_name
        , table_type 
        )
        select
            table_name
          , table_type

        FROM
            [cte_tempTables]
        WHERE
            ExperiationDate < GETDATE()

SELECT TOP 1
    @name = [table_name]
  , @type = CASE WHEN [table_type] = 'BASE TABLE' THEN 'TABLE'
                 ELSE 'VIEW'
            END

FROM
    @tmp_table

WHILE @name IS NOT NULL

    OR @name <> ''

    BEGIN
        SELECT
            @SQL = 'DROP ' + @type + ' SBR_Temp.[dbo].[' + RTRIM(@name) + ']'
            --EXEC (@SQL)
        PRINT 'Dropped ' + @type + ':' + @name

        DELETE
            @tmp_table
        WHERE
            [table_name] = @name

        SELECT TOP 1
            @name = [table_name]
          , @type = CASE WHEN [table_type] = 'BASE TABLE' THEN 'TABLE'
                         ELSE 'VIEW'
                    END
        FROM
            @tmp_table
            SELECT @name
    END
GO 
```

这是一个结果示例

（4 行受影响）删除了 VIEW:vue_SunsetCoveClientInventory

（1 行受影响）

（1 行受影响）删除 VIEW:vue_SunsetCoveClientCoOwners

（1 行受影响）

（受影响的 1 行）删除的表：BKDischarge

（1 行受影响）

（1 行受影响）删除 VIEW:vue_nocoop

（1 行受影响）

（1 行受影响）删除 VIEW:vue_nocoop

（0 行受影响）

（1 行受影响）删除 VIEW:vue_nocoop

（0 行受影响）

（1 行受影响）删除 VIEW:vue_nocoop

（0 行受影响）

（1 行受影响）删除 VIEW:vue_nocoop

（0 行受影响）

（1 行受影响）删除 VIEW:vue_nocoop

（0 行受影响）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T18:30:40.807

一旦您没有更多的行`@tmp_table`，您就不再更改 的值`@name`。我认为你宁愿使用：

```
WHILE EXISTS (SELECT NULL FROM @tmp_table)
BEGIN
    SELECT TOP 1... 
```

更改为这种检查方式还具有以下好处：

*   您不再假设您至少有一行可以开始。
*   您不必`SELECT TOP 1...`在两个地方保持相同。

您可以运行此演示代码以简化形式查看您的问题：

```
-- Setup two rows of example data
declare @table table (
    id int primary key
)
insert into @table select 1
insert into @table select 2

declare @id int

-- Select, display and delete the first row
select top 1 @id = id from @table
select @id
delete from @table where id = @id

-- Select, display and delete the second row
select top 1 @id = id from @table
select @id
delete from @table where id = @id

-- Nothing left to select, but @id still retains its value!
select top 1 @id = id from @table
select @id 
```

# c# - C# 无界泛型类型作为约束

> ID：11764973
> 
> 赞同：5
> 
> 时间：2012-08-01T18:04:24.427
> 
> 标签：c#, generics, generic-constraints

是否可以有一个无界泛型类型的泛型约束？

例如：

```
public T DoSomething<T>(T dictionary) where T : IDictionary<,>
{
    ...
} 
```

* * *

**编辑：**只是为了解释上下文，我想将方法​​的使用限制为 IDictionary，但对于方法本身，TKey 和 TValue 到底是什么并不重要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T18:08:41.203

这是不可能的，您需要指定类型参数：

```
public T DoSomething<T, TKey, TValue>(T dictionary) where T : IDictionary<TKey, TValue> { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-06T18:07:02.390

[rosylin github](https://github.com/dotnet/roslyn/issues/5023)中有一个问题，但是还没有完成。所以现在不可能，但我希望它会相对较快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T18:10:42.843

不，你不能那样做。也许你可以使用

```
public IDictionary<TKey, TValue> DoSomething<TKey, TValue>(IDictionary<TKey, TValue> dictionary)
{
...
} 
```

# java - Salesforce：调用方法并将联系人与帐户关联以进行顶点测试方法？

> ID：11764979
> 
> 赞同：0
> 
> 时间：2012-08-01T18:04:44.053
> 
> 标签：java, testing, salesforce, scheduled-tasks, apex-code

我编写了一个 Apex 调度程序，它会在员工生日前 2 天向经理发送电子邮件通知。

我已经在沙盒中对其进行了测试，我已经准备好投入生产了。但是，我无法使用我的测试方法获得代码覆盖率。

我的 Apex 调度程序类使用 SOQL 语句来识别帐户名称为“我们的公司”并且在 2 天内过生日的联系人。

我在我的测试方法中创建了一个帐户和联系人记录。

我需要将我的帐户和联系人记录链接/关联在一起。（联系人是为我创建的账户工作的。我知道它与ID有关。你不能写accountId。

我想我需要创建一个帐户变量并将其分配给contactID ...我尝试了代码示例，但它们不起作用。Salesforce 认为我正在尝试编写您无法执行的联系人 ID。再具体一点：

```
 Contact testContact = new Contact();
 testContact.firstName='Jack';
 testContact.lastName='Dell';
 AccountID = testAccount.id; 
```

如何创建帐户变量？

另一个问题是调用我的`sendBirthdayEmail();`方法。

编写 testContact.sendBirthdayEmail(); 不调用我的电子邮件方法。相反，我收到一条错误消息“错误：编译错误：SObject 联系人的无效字段 ContactID”。

为什么我的测试方法不能识别我的 sendBirthdayEmail 方法？测试方法不理解我班上的其他方法吗？

```
global class BirthdayName implements Schedulable{ 
global void execute (SchedulableContext ctx) 
{ 

sendBirthdayEmail(); 

}
public void sendBirthdayEmail()
{

   for(Contact con : [SELECT name, Id, Birthdate FROM Contact WHERE Next_Birthday__c = : system.Today().addDays(2) AND Account.Name = 'Our Company'])

  {
  String conId = con.Id;
  String conName = con.name;
Messaging.SingleEmailMessage mail = new Messaging.SingleEmailMessage(); 

mail.setTargetObjectId('005J0000000JWYx');

mail.setsubject('Birthday Reminder');
mail.setHtmlBody('This is a scheduler-generated email to notify you that the birthday of Name:  <b>  ' + con.name + '  </b> is in two days. Birthdate of: ' + con.Birthdate + '. Please wish them a happy Birthday.');
mail.setSaveAsActivity(false);
Messaging.sendEmail(new Messaging.SingleEmailMessage[] {mail }); 
}

}

static testMethod void myTestBirthday() {

//create the required test data needed for the test scenario
//In this case, I need to create a new contact, with the account name of Our Company and has a birthday 2 days away

Account testAccount = new Account(name='Our Company');
insert testAccount;

// creating new contact
Contact testContact = new Contact();
testContact.firstName='Jack';
testContact.lastName='Dell';
// TRYING to make this contact associated with the account by setting the account id of      the account I just created to the contact
AccountID = testAccount.id;

 // inserting test contact

insert testContact;

testContact.birthdate=system.Today().addDays(2);

update testContact;

testContact.sendBirthdayEmail();

}

} 
```

请帮助我，我已经阅读了文档并搜索了留言板，但我仍然卡住了。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:58:47.367

尝试将 testAccount.Id 分配给 testContact.Account：

```
testContact.account = testAccount.Id; 
```

而不是 AccountID = testAccount.Id;

希望这可以帮助！

阿努普

# ruby-on-rails - rails 3.2.2 无法反序列化序列化模型对象 - 奇怪的行为

> ID：11764983
> 
> 赞同：2
> 
> 时间：2012-08-01T18:04:52.353
> 
> 标签：ruby-on-rails, activerecord, deserialization

对于这个冗长/复杂的问题，我深表歉意。

使用 rails 3.2.2 (ruby 1.9.3-p194)，我们使用 Dalli/memcached 将用户特定的 ActiveRecord 模型对象保存到会话存储中，并且在开发过程中，我们有时会在从会话中检索数据时看到错误：

```
ArgumentError (Unable to unmarshal value: dump format error for symbol(0x46)): 
```

通常，当数据有问题时会发生错误（例如，对象有一个指向不存在的记录的外键）。

但是，每当我们添加或删除涉及多对多关联的记录时，我们仍然会收到此错误，即使所有外键都是有效的并且一切似乎都是正确的（在删除数据库、杀死 rails 和 memcache 服务器等之后）。 ）。

多对多关联是通过连接表和 has_many-through 实现的。我们模式的高度简化视图是：

```
 User
   |
 Profile
  |  \
  .   \
  .    \
  .     \
  |      \
 Foo ==== Bar 
```

其中一个用户有很多个人资料，一个个人资料有很多 Foos（间接地，通过其他表），一个个人资料有很多条，并且 Foos 和 Bars 通过 BarFoo 连接表彼此有很多。

该错误通常在向/从 Bar 添加/删除 Foo 时触发。尽管我们在从 session 中检索时就意识到了这一点，但 session/memcache 本身并不是罪魁祸首，因为即使在数据存储在 session 中之前，错误也可能被迫发生。

为了从等式中消除会话，我在 Foo/Bar 记录创建/删除之后插入了以下代码：

```
Marshal.load(Marshal.dump(user)) # throws exception first time 
```

这会引发异常。真正令人费解的是：如果我捕捉到异常以便可以继续处理请求，那么用户对象实际上是存储在会话中的，之后会毫无问题地被*获取*。（我发现这一点是因为在调试断点期间，运行上述代码一次失败，然后立即再次运行成功并在继续执行时“修复”问题。）

更奇怪的是，如果不是上面的代码，而是在 Foo/Bar 创建/删除之后立即执行以下操作：

```
Marshal.load(Marshal.dump(profile)) # does not throw any exception 
```

我一点也不例外，其余代码都可以正常工作（用户从会话中存储和检索，没有错误）。

我读过很多讨论似乎说 AR 模型实例不应该被缓存，因为它们可能包含 procs、IO 等。但是，我们在转储对象时没有收到 TypeErrors。通过在用户模型上运行两次序列化/反序列化或在其子模型上运行一次来​​“纠正”问题的事实非常令人费解。一个对象的序列化表示怎么可能前一刻无效，下一刻有效？

谁能告诉我这是否是rails中的错误？还是我们正在做一些不受支持的事情？有没有办法将模型对象及其关联模型序列化，或者我是否必须为模型对象及其关联实现自己的序列化/反序列化代码？

更新：此错误不仅限于多对多关联。在架构中创建/更新/删除其他表时也会发生这种情况，但在这种情况下，这种情况要少得多，而且几乎不可能重现。

# javascript - 当函数的名称作为字符串传递时，如何执行 JavaScript 函数？

> ID：11764988
> 
> 赞同：0
> 
> 时间：2012-08-01T18:05:10.463
> 
> 标签：javascript, jquery, function, hide, show

如何使用作为参数传递的函数名。

例子：

```
showError('container', 'id', '- message', 'show');
showError('container', 'id', '', 'hide');

function showError(container, id, msg, action)
{    
    if(action == 'show') {  
        $('#' + container).show();       
        $('#' + id).html(msg).show();
    }
    else {  
        $('#' + container).hide();       
        $('#' + id).html(msg).hide();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T18:07:36.913

`obj.foo()`真的是一个两步的事情。 `obj.foo`返回一个函数对象，然后`()`执行它。 `obj['foo']`返回相同的函数对象，所以添加一个`()`来执行它。

既然`obj['foo']`是一样的`obj.foo`。即使该属性的值是一个函数。因此，您始终可以使用访问器访问任何属性`[]`，使用字符串作为键名。

```
$('#' + container)[action](); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T18:07:41.193

使用[括号表示](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Member_Operators#Bracket_notation)法通过字符串访问相应的方法：

```
function showError(container, id, msg, action) {    
    $('#' + container)[action]();       
    $('#' + id).html(msg)[action]();
} 
```

但是，您的方法看起来很奇怪。我建议将操作限制为两个值，并自动执行此操作：

```
function showError(container, id, msg) {
    var action = msg=='' ? 'hide' : 'show';
    $('#' + container)[action]();       
    $('#' + id).text(msg)[action]();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T18:11:16.230

在*一般*情况下，括号表示法是好的。在您的情况下，请使用`toggle`：

```
function showError(container, id, msg, action)
{    
        $('#' + container).toggle(action === 'show');       
        $('#' + id).html(msg).toggle(action === 'show');
} 
```

甚至（正如 Bergi 建议的那样）：

```
function showError(container, id, msg)
{    
        $('#' + container).toggle(!!msg);       
        $('#' + id).html(msg);
} 
```

（它使用我自己的发明 double-bang `!!`，它将真值或假值转换为布尔等价物。）

# javascript - jquery模拟点击

> ID：11764989
> 
> 赞同：3
> 
> 时间：2012-08-01T18:05:11.547
> 
> 标签：javascript, jquery

我需要使用 jquery 模拟单击​​按钮。

常规的 Javascript MouseEvents（mousedown 和 mouseup）确实有效，但我想要 jquery。

我在 jquery 对象中有 div：（只是一个参考）

它被定义为

```
var $button = $(document.getElementById("iframe")...); 
```

`$button`->`<div id="1" class="2" role = "button"><b>Action</b></div>`

我试过了`$button.click()`，`$button.trigger('click')`但都不起作用。

我读过[这个](https://stackoverflow.com/questions/6562407/what-does-role-button-mean)，但没有提供这个问题的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T18:12:19.350

试试这个：

```
var e = document.createEvent("MouseEvents");
e.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
$button[0].dispatchEvent(e); 
```

# qtp - qtp 对象存储库不工作

> ID：11764990
> 
> 赞同：1
> 
> 时间：2012-08-01T18:05:14.730
> 
> 标签：qtp

这是问题：

记录工作正常并记录所有对象并运行少数对象而不是运行少数对象。当我要去对象存储库查看对象是否保存在其中时。QTP 识别应用程序中的某些对象，而另一些则不识别..

所以我正在尝试使用 Object Spy 识别该对象（qtp 无法理解）并使用高度我确保 qtp 理解然后将该对象完美地添加到存储库中，现在存储库应该认识到这个问题，但它没有认识到目的。

所以问题总结g，reocrding是完美记录对象，并且object spy也可以完美识别，但对象存储库无法识别

QTP 版本 11 QTP POWER BULIDER 是 12.5 POWER BULIDER 版本是 12

我在这里做了什么来纠正问题：

修复qtp但问题没有解决。

QTP 11 对象存储库问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:05:52.653

你有启用智能识别吗？有时我会遇到使用 object spy 识别对象的问题，但在运行时 qtp 偶尔会抱怨它无法在特定页面中找到该对象。

如果这不起作用，请尝试使用不同的对象属性来标识对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:13:23.923

您可以尝试添加一些属性来识别对象。尝试添加 HTML id，因为它总是唯一的。智能识别如果打开会产生问题，关闭智能识别并试一试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T19:45:22.913

一些看似显而易见但经常被忽视的事情是从一组非常基本的属性开始并确认 QTP/ObjectSpy/Object Repository 可以看到该对象，然后进一步缩小查询范围。如果您有多个可见的对象，您可能需要设置一个索引，如果您正在进行描述性识别编程并且可以找出哪个是哪个。

# java - 关闭选项卡时结帐

> ID：11764991
> 
> 赞同：0
> 
> 时间：2012-08-01T18:05:25.313
> 
> 标签：java, javascript, session, jsf

在我使用 Java EE 和 JSF 2.0 的应用程序中，我希望当用户关闭应用程序的选项卡时会话结束。如果此用户在应用程序中打开了另一个选项卡，则不应关闭此另一个选项卡的会话。这样就不会干扰应用程序的管理。

要结束我使用的会话：

```
public String deconnecter() {
    //invalidate user session
    FacesContext context = FacesContext.getCurrentInstance();
    HttpSession session = (HttpSession) context.getExternalContext().getSession(false);
    session.invalidate();
    return "login";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:08:50.533

这不可能是你想要的方式。同一浏览器实例的所有窗口/选项卡共享同一会话。

无论如何，要实现这一点，您需要创建一个具有条件渲染包含的单个视图和一个视图范围 bean，您可以在其中存储与视图相关的所有内容，并始终返回`void`或`null`从操作方法返回。这样，您根本不需要会话范围。要创建一个新视图，只需发送一个新的 GET 请求（如一个新选项卡）或`null`从操作方法返回一个非字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:02:13.113

可能为时已晚，但由于我在网上看到了许多与此相关的问题，我可能只是把我的解决方案放在这里，我已经在 chrome 和 firefox 上进行了测试（尽管所有最新版本）

设置：更优雅的解决方案是使用过滤器，但我使用了预渲染事件（对我的整个网站使用单个模板，因此我可以跟踪每个页面的加载时间，并且我已经在模板上指定了预渲染事件）

# Javascript部分：

```
 window.onbeforeunload = function(){
      //log out of the server too.
      var xmlhttp;
      if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
      }
      else
      {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
      var url = '/context/index.xhtml?onunload=true';
      xmlhttp.open('GET', url, true);
      xmlhttp.send();
    }
     window.onload = function(){
      console.log('window name: '+window.name);
      if(window.name != '#{controller.sessionId}'){
        window.name = '#{controller.sessionId}';
        var xmlhttp;
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        var url = '/context/index.xhtml?onload=true';
        xmlhttp.open('GET', url, true);
        xmlhttp.send();
      }
    }
    //Called when user logs out.
    function onLogout(){
      console.log('logging out: '+window.name);
      window.name = '';
      console.log('logged out: '+window.name);
    } 
```

# 服务器端代码：

该方法在视图在 prerender 事件上渲染之前被调用

```
public void trackUserTabs() {
String onload = Controller.getParameter(ONLOAD_ID);
if (onload != null && onload.trim().equals("true")) {
  openedTabs++;
  System.err.println("onload: " + controller.getCurrentPrinciple() + "..........." + openedTabs);
}
String onunload = Controller.getParameter(ONUNLOAD_ID);
if (onunload != null && onunload.trim().equals("true")) {
  openedTabs--;
  System.err.println("onunload: " + controller.getCurrentPrinciple() + ".............." + openedTabs);
}
if (openedTabs <= 0 && controller.getCurrentProfile() != null) {
  /**
   * All tabs are closed, log out current user.
   */
  controller.logoutCurrentProfile();
} 
```

}

ajax 请求的 javascript 代码由 Stackoverflow 中的答案提供。

# c# - 在传递给 NHibernate 的 Criteria API 的谓词中设置操作

> ID：11764998
> 
> 赞同：0
> 
> 时间：2012-08-01T18:05:48.827
> 
> 标签：c#, nhibernate, criteria, specifications

在我正在进行的项目中，我们将一个规范（也就是 Martin Fowler 提出的规范模式）传递给一个使用 NHibernate 作为其后端的存储库。用于确定给定对象是否实现为包装为表达式的 lambda 的谓词，存储库将其传递给 NHibernate 中的 Criteria API 以实际获取结果。

我们所拥有的看起来像：

```
class MySpecification : ISpecification<AnEntity>
{
      public Expression<Func<AnEntity, bool>> Satisfies
      {
           get { return entity => entity.Children.Count(c => !c.IsDeleted) == 0; }
      }
} 
```

并在存储库中：

```
public IEnumerable<AnEntity> Select(ISpecification<AnEntity> spec)
{
      ICriteria criteria = Session.CreateCriteria<AnEntity>();
      criteria.Add(NHibernate.Criterion.Expression.Where(spec.Satisfies));
      return criteria.List<AnEntity>();
} 
```

在运行时，我们得到以下形式的异常：

```
{variable 'entity' of type 'AnEntity' referenced from scope '', but it is not defined"} System.Exception {System.InvalidOperationException} 
```

当我们将谓词简化为对子集合不执行集合操作（​​例如 Any、Count、Where）的简单布尔表达式时，一切正常。

考虑到这一点，有没有办法使用对主实体的子集合进行操作的 lambda 表达式来构建标准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:40:31.463

使用 Criteria API 无法执行此类操作。您正在尝试混合 Linq 和 Criteria API。Criteria API 有自己的方法来处理子集合。

您可以使用 linq-to-nhibernate 实现您想要的。尝试更改您的方法，如下所示

```
public IEnumerable<AnEntity> Select(ISpecification<AnEntity> spec)
{
    return Session.Query<AnEntity>() 
        .Where(spec.Satisfies)
        .ToList();
} 
```

`Query`是一种扩展方法`NHibernate.Linq.LinqExtensionMethods.Query(this ISession session)`