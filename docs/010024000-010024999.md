# StackOverflow 问答 10024000-10024999

# django - 将 fandjango (Facebook django) 用户连接到 Django 用户以添加属性

> ID：10024001
> 
> 赞同：0
> 
> 时间：2012-04-05T07:02:05.613
> 
> 标签：django, facebook, facebook-canvas, fandjango

我是 FanDjango 的新手，并试图理解一些东西。我已经把所有东西都设置好并且工作得很漂亮，我可以查询 request.facebook.user 并获取信息。

但现在，我想开发一个应用程序，它提供的信息比 Facebook 提供的更多关于每个用户的信息。例如，我想存储该用户对其他对象（即关系）的模式的赞成/反对票。我想存储用户设置。等等......标准的“Django Way”是使用用户配置文件，但我不知道如何将 FanDjango 的用户连接到用户配置文件。

我不清楚如何做到这一点。

我在 fandjango 之前查看了 django-facebook，但我无法让它工作，这就是我搬到这里的原因。他们所做的是，他们允许您的用户配置文件从他们的用户定义继承。同样的事情可以在这里工作，还是我应该做一些不同的事情？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:06:18.823

好吧，您可以简单地创建一个`Profile`模型并将其[`OneToOneField`](https://docs.djangoproject.com/en/dev/topics/db/queries/#one-to-one-relationships)指向 Fandjango 配置文件

```
class Profile(models.Model):
     facebook_user = models.OneToOneField("fandjango.User")
     votes = ... 
```

这将允许您在给定配置文件的情况下获得 Fandjango 配置文件，反之亦然：

```
request.facebook.user.profile 
```

反过来：

```
profile.facebook_user 
```

这样做的一个问题是，因为您根本没有使用`django.contrib.auth`，所以您无法获得它的任何不错的功能，例如能够使用`{% if user.is_authenticated %}`等。

编辑添加：

此处提供的额外详细信息：[https ://github.com/jgorset/fandjango/issues/63#issuecomment-4988917](https://github.com/jgorset/fandjango/issues/63#issuecomment-4988917)

> 然后我只听“Fandjango.models.User”的 post_save 信号，当设置“created”参数时，我实例化 Profile 模型。
> 
> ```
> @receiver(post_save, sender=User)
> def profile_creation(sender, instance, created, **kwargs):
>     if created:
>         profile, created = Profile.objects.get_or_create(user=instance) 
> ```

# iphone - iPhone 应用程序中的 I18n 是否需要所有这些步骤？

> ID：10024002
> 
> 赞同：1
> 
> 时间：2012-04-05T07:02:21.540
> 
> 标签：iphone, ios, internationalization

我已经能够在 iPhone 应用程序中引入 i18n 并且发现它有点困难，所以我想验证我是否正确地执行它。

真的需要这三个步骤吗？

*   为每种语言添加一个“Localizable.strings”。用于类中的值。
*   为每种语言添加一个“InfoPlist.strings”。用于应用显示名称。
*   将所有语言的 i18n 添加到所有 xib 文件中，并在每个单独的 xib 中设置正确的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:53:27.087

是的，恐怕所有这些步骤都会使您的 iOS 应用程序本地化。但是，对于不包含任何可本地化内容的 xib 文件，您可以跳过第三步。

# joomla1.5 - 在joomla自定义组件冲突中编辑和添加新

> ID：10024009
> 
> 赞同：0
> 
> 时间：2012-04-05T07:02:50.600
> 
> 标签：joomla1.5, joomla-extensions

我已经开始按照 joomla 制作组件的食谱制作自己的自定义组件。一切都很好，但是当我尝试编辑现有数据时，它会自动再次添加与编辑数据相同的新数据。这有什么问题？这里真的需要帮助。对不起我的英语不好..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T07:12:33.367

我遇到了同样的错误并花了几个小时来解决这个问题。但是，最后我注意到我的表单操作 URL 中缺少等号 (=)。

以前是这样的；

`<form action="<?php echo JRoute::_('index.php?option=com_mycomponent&layout=edit&id' . (int) $this->item->id); ?>" method="post" name="adminForm" id="section-form">`

所以我把它改成了；

`<form action="<?php echo JRoute::_('index.php?option=com_mycomponent&layout=edit&id=' . (int) $this->item->id); ?>" method="post" name="adminForm" id="section-form">`

请注意URL 上*id*参数旁边的缺失 (=) 。

# ios - 在 UIBezierPath 上移动几个 UIImage 均匀分布

> ID：10024013
> 
> 赞同：0
> 
> 时间：2012-04-05T07:03:12.427
> 
> 标签：ios, uiimage, cakeyframeanimation, uibezierpath

我正在尝试创建一个上面有 UIBezierPath 的视图。这现在有效。我想将 UIImages（随机数量的图像）放在 UIBezierPath 上，并根据请求为它们设置动画，以供下一步或上一步使用。一次所有图像都指向同一个方向。

现在一直在查看所有文档，但我无法弄清楚。

所以希望有人可以帮助我或指出我正确的方向。

我认为您可以将其与一些相互追逐的赛车进行比较，而不是相互追逐，并且都从不同的位置开始。我想通过触摸将它们移动到下一个点，因此不需要循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:09:09.020

看看[这个教程](http://nachbaur.com/blog/core-animation-part-4)。相关代码：

```
//create the image layer
CALayer *car = [CALayer layer];
car.bounds = CGRectMake(0, 0, 44.0, 20.0);
car.position = CGPointMake(160, 25);
car.contents = (id)([UIImage imageNamed:@"carmodel.png"].CGImage);
[self.view.layer addSublayer:car];

// animate it
CAKeyframeAnimation *anim = [CAKeyframeAnimation animationWithKeyPath:@"position"];
anim.path = trackPath.CGPath;
anim.rotationMode = kCAAnimationRotateAuto;
anim.repeatCount = HUGE_VALF;
anim.duration = 8.0;
[car addAnimation:anim forKey:@"race"]; 
```

为所有图层（图像）添加此动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T02:56:26.113

您可能必须`UIBezierPaths`为每个段构造一个 , 数组。跟踪每个`UIImage`位置，并使其沿适当的段移动。

这仅在您有离散步骤时才有效。遗憾的是，您不能使用该`values`属性将移动限制在总路径的一部分……但这被忽略了。应该可以进行子类`CAMediaTimingFunction`化以将其输出范围更改为 0 到 1 以外的值，但其中所有重要部分都是私有的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:42:21.883

您可以使用 strokeStart 和 strokeEnd 属性来获取从 0 到 1 的值，以便将对象定位在路径上。

# c# - 如何保持控件禁用直到线程结束

> ID：10024018
> 
> 赞同：2
> 
> 时间：2012-04-05T07:03:25.840
> 
> 标签：c#

我通过 gps 调制解调器通过 comport 使用以下代码发送 SMS

```
Thread thread = null;
private void btnsend_Click(object sender, EventArgs e)
    {
        if (thread == null)
        {                
            thread = new Thread(SendSms);
            thread.IsBackground = true;
            thread.Start();
        }
    }
    private void Update(int i)
    {
        if(InvokeRequired)
        {
            this.BeginInvoke(new Action<int>(Update), new Object[] {i});
            return;
        }
        using (var sp = new SerialPort("COM6"))
        {
            sp.Open();
            sp.WriteLine("AT" + Environment.NewLine);
            sp.WriteLine("AT+CMGF=1" + Environment.NewLine);
            sp.WriteLine("AT+CMGS=\"" + dt2.Rows[i]["PhoneNo"] + "\"" + Environment.NewLine);
            sp.WriteLine(tbsms.Text + (char)26);
            if (sp.BytesToRead > 0)
            {
                tbsentto.Text = i + 1 + " of " + dt2.Rows.Count;
            }
        }
    }
    private void SendSms()
    {
        for(int i = 0; i < dt2.Rows.Count; i++)
        {
            Update(i);
            Thread.Sleep(5000);
        }
        thread = null;
    } 
```

我的问题是：我怎样才能让 btnsend 保持禁用状态，直到我的线程正在进行中，这样用户就不能按 btnsend 向其他收件人发送短信

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T09:01:10.930

我在自己的一个项目中遇到了类似的问题。

我寻求的解决方案如下：

当我为表单上的每个按钮创建后台工作人员时，我为它们分配了 DoWork 和 RunWorkerCompleted 工作线程。

然后，在单击按钮时触发的线程上，我还包括检查以确保没有工作线程已经在运行（包括按钮本身触发的线程）。

所以我的代码看起来像这样：

```
private void XYZ_button_Click(object sender, EventArgs e)
{
    /* Check no background workers are already running */
    if ((XYZ_backgroundworker.IsBusy != true) &&
        (PQR_backgroundworker.IsBusy != true)) /* etc, etc for any other background
        workers you might have */
    {
        XYZ.RunWorkerAsync();
    }
}

private void XYZ_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    if (e.Error != null) MessageBox.Show("Error: " + e.Error.Message);
    else if (e.Cancelled == true) MessageBox.Show("Canceled!");
}

private void XYZ_DoWork(object sender, DoWorkEventArgs e)
{
    //Your code here
} 
```

我假设您知道如何创建后台工作人员，但如果不知道，您可以在表单设计页面的工具箱中找到它们。您只需从列表中选择它们，单击要将它们分配给的按钮，瞧！然后您需要做的就是转到后台工作人员的事件属性并分配适当的工作线程。

在您的特定情况下，您需要做的是创建后台工作线程并将内容移动`btnsend_Click`到`DoWork`线程。然后按照我上面使用的格式。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T07:14:02.020

您可以在线程操作结束时调用一个函数来启用按钮。这是一种简单的方法。但是，如果您想更通用地处理这个问题，您可以在 Thread 类上编写一个包装器或从 Thread 类派生一个新类。在新类中，您可以创建将在线程操作完成结束时触发的事件。

**更新**：（汉斯帕桑特提醒我之后）

您可以使用[BackGroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。它的作用与我上面解释的相同。注册事件 WorkerCompleted，该事件将在操作完成后触发。这是一个小[例子](http://www.c-sharpcorner.com/uploadfile/mahesh/backgroundworker-in-C-Sharp/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T22:04:56.730

在 GeorgePotter 的帮助下，我找到了问题的解决方案。非常感谢

```
private void btnsend_Click(object sender, EventArgs e)
    {
        foreach (Control c in Controls)
        {
            c.Enabled = false;
        }
        if (bgw.IsBusy == false)
        {
            bgw.RunWorkerAsync();
        }
    }
    private void Update(int i)
    {
        if (InvokeRequired)
        {
            this.BeginInvoke(new Action<int>(Update), new Object[] { i });
            return;
        }
        using (var sp = new SerialPort(cbcomport.Text))
        {
            sp.Open();
            sp.WriteLine("AT" + Environment.NewLine);
            sp.WriteLine("AT+CMGF=1" + Environment.NewLine);
            sp.WriteLine("AT+CMGS=\"" + dt.Rows[i]["PhoneNo"] + "\"" + Environment.NewLine);
            sp.WriteLine(tbsms.Text + (char)26);
            if (sp.BytesToRead > 0)
            {
                tbsentto.Text = i + 1 + " of " + dt.Rows.Count;
            }
        }
    }        
    private void bgw_DoWork(object sender, DoWorkEventArgs e)
    {
        for (int i = 0; i < dt.Rows.Count; i++)
        {
            Update(i);
            Thread.Sleep(5000);
        }
    }
    private void bgw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        foreach (Control c in Controls)
        {
            c.Enabled = true;
        }
    } 
```

# extjs - 在输入字段之前放置复选框

> ID：10024019
> 
> 赞同：0
> 
> 时间：2012-04-05T07:03:29.290
> 
> 标签：extjs

我有一组字段的面板，这些字段有一些捆绑的验证规则和其他功能，如 setValue、InitValue 等。现在我试图在运行时插入复选框字段，尝试使用 Ext JS 的插入添加功能，但它们正在插入在面板的单独行上，但我需要在输入字段之一之前插入此复选框，为此我创建了带有新输入字段和复选框的新面板并添加到父面板这可以通过在输入字段之前放置复选框来正常工作观点，但问题是输入字段失去了其原生配置选项，如 setValue、initValue、validator 等并引发错误，任何建议放置复选框而不损害输入字段组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:23:13.793

您可以使用 Ext.form.CompositeField 代替 TextField，例如：

```
 new Ext.form.CompositeField({
        fieldLabel: '...',
        msgTarget : 'side',
        combineErrors: false,
        items: [
            {
                xtype: 'checkbox'
            },
            {
                xtype: 'textfield'
            }
        ]
    }) 
```

# c# - 我如何将数据绑定到 Devexpress 中的 xrRichTextbox

> ID：10024024
> 
> 赞同：0
> 
> 时间：2012-04-05T07:03:53.157
> 
> 标签：c#, asp.net, devexpress

我已将 XRRichTextbox 添加到 XtraReport 中，我只想将 HTML 绑定到 RichTextbox

我如何将 HTML 绑定到 Devexpress 中的 RichTextbox？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:36:14.287

使用 Html 数据绑定属性

![在此处输入图像描述](../Images/8b0b282850f9e97116d2283a7ad6603f.png)

# javascript - 我可以使用谷歌登录验证我的应用程序中的用户吗？

> ID：10024026
> 
> 赞同：0
> 
> 时间：2012-04-05T07:04:05.260
> 
> 标签：javascript, authentication, login

我用java脚本开发了河内塔游戏。现在，我想制作相同的登录页面，但我不想使用我的数据库信息来验证用户名和密码。

我的要求：我想允许任何拥有谷歌帐户的用户玩游戏。我可以这样做吗？

如果是，如何？请帮忙。将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:09:38.177

我将为您提供客户端应用程序（即 javascript 应用程序）的 OAuth 2.0 的直接链接

[https://developers.google.com/accounts/docs/OAuth2UserAgent](https://developers.google.com/accounts/docs/OAuth2UserAgent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:07:30.460

使用 openID - [http://openid.net/add-openid/](http://openid.net/add-openid/)

# comments - 自动将（非英语）评论翻译成英语？

> ID：10024034
> 
> 赞同：5
> 
> 时间：2012-04-05T07:05:31.440
> 
> 标签：comments, translation, google-translate, translate, spoken-language

我有一个 Matlab 代码库，它的**注释是用瑞典语写的**。是这样的：

```
% Syntax: result = ocr(DOC, METHOD, fname)
% DOC - bild som ska processas
% METHOD - ann eller knear
% fname - full filename of the net ('ann' method) or the database 
%         ('knear' method)
%         default: ann20.mat resp db4000.mat
function result = ocr(DOC, METHOD, fname)

% Segmentera bilden
disp('Segmenting...');
[ROWB, CH] = segment(DOC, 0.99, 0.99);

% Analysera den 
switch lower(METHOD)
  case 'ann', 
    % ladda in neuronnät, inför NET, E, CP
    if isempty(fname)
      load ./db/ann50.mat;
    else
      load(fname);
    end 
```

好吧，[谷歌翻译](http://translate.google.com/)对我来说是个大救星。这是复制粘贴到翻译框中的结果，非常令人满意。

```
% Syntax: result = ocr (DOC, METHOD, fname)
% DOC - image to be processed
% METHOD - ann or knear
% Fname - full filename of the net ('ann' method) or the database
% ('Knear' method)
% Default: ann20.mat respectively db4000.mat
function result = ocr (DOC, METHOD, fname)

Segment image%
disp ('Segmenting ...');
[ROWB, CH] = segment (DOC, 0.99, 0.99);
% Analyze the
switch lower (METHOD)
   case 'ann'
     % Load the neural networks, for NET, E, CP
     f isempty (fname)
       ./db/ann50.mat load;
     else
       load (fname);
     end 
```

1.  对于多文件代码库，我可以自动化这个过程吗？
2.  如何处理转换为`"% Segmentera bilden"`to等错误`"Segment image%"`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T19:00:51.060

您不能依靠谷歌翻译来将 % 保持在最前面；众所周知，随机切换标点符号，甚至组合或分隔行。它还可能尝试翻译代码字或变量。要获得可靠的解决方案，请创建一个小帮助脚本，例如在 Ruby 或您选择的快速而肮脏的编程语言中。

这个帮助脚本应该
* 遍历代码库中的每个文件（首先备份）
* 查看每一行而不对其进行评估
* 在 % 之后提取所有内容并将其输入谷歌翻译（对每个评论单独请求，以防止混淆)
* 用文件中的谷歌翻译替换瑞典语注释
* 保存文件并抓取下一个文件

# c# - 将所有相机照片上传到 windows phone 7 中的 skydrive 文件夹

> ID：10024050
> 
> 赞同：1
> 
> 时间：2012-04-05T07:06:11.453
> 
> 标签：c#, windows-phone-7

如何将 windows phone 7 中的所有相机胶卷照片同步到 skydrive？我想将它们全部同步到 skydrive 上的文件夹中。但我不知道该怎么做。任何用于参考的示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:04:30.937

您可能会发现 Reddit wp7dev 上的一篇文章很有用：-

[http://www.reddit.com/r/wp7dev/search?q=skydrive&restrict_sr=on](http://www.reddit.com/r/wp7dev/search?q=skydrive&restrict_sr=on)

# php - 如何在表 JOIN 中添加括号，Active Records Codeigniter

> ID：10024051
> 
> 赞同：0
> 
> 时间：2012-04-05T07:06:19.647
> 
> 标签：php, mysql, codeigniter, activerecord

嗨，我正在使用 codeigniter 活动记录，我想创建一个 talbe 连接

这是我的查询

```
 $table = $this->mastables ['table1'];
    $table1 = $this->mastables ['table2'];

    $this->db->select ( 'a.RelationshipCategoryName,a.RelationshipCategoryID,COUNT( b.ShopRelationshipID ) AS count' );
    $this->db->from ( $table . " as a" );
    $this->db->join ( $table1 . " as b", "(( a.RelationshipCategoryID=b.RecieverRelationshipCategory AND b.3rdPartyID=" .$shop_id. " ) OR (  a.RelationshipCategoryID=b.SenderRelationshipCategory AND b.ShopID=" .$shop_id. " )) AND b.IsDelete!=1", 'left' );
    $this->db->where ( 'a.ShopID', $shop_id );

    $this->db->where ( 'a.IsActive', 1 );

    if ($limit != NULL) {
        $this->db->limit ( $limit, $offset );
    }
    if ($oderby != NULL && $oder != NULL) {
        $this->db->order_by ( $oderby, $oder );
    }

    $this->db->group_by ( 'a.RelationshipCategoryID' );

    $query = $this->db->get ();
    if ($query->num_rows () > 0) {
        return $query->result_array ();
    } else {
        return FALSE;
    } 
```

错误是

```
A Database Error Occurred

Error Number: 1064

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') OR ( a.RelationshipCategoryID=b.SenderRelationshipCategory AND b.ShopID=11 )) ' at line 3

SELECT `a`.`RelationshipCategoryName`, `a`.`RelationshipCategoryID`, COUNT( b.ShopRelationshipID ) AS count FROM (`mas_shop_relationship_category` as a) LEFT JOIN `mas_shop_relationship` as b ON `a`.`RelationshipCategoryID`=`b`.`RecieverRelationshipCategory` AND b.3rdPartyID=11 ) OR ( a.RelationshipCategoryID=b.SenderRelationshipCategory AND b.ShopID=11 )) AND b.IsDelete!=1 WHERE `a`.`ShopID` = '11' AND `a`.`IsActive` = 1 GROUP BY `a`.`RelationshipCategoryID` ORDER BY `a`.`RelationshipCategoryName` asc LIMIT 5

Filename: C:\xampp\htdocs\elephanti2\system\database\DB_driver.php

Line Number: 330 
```

错误来自这一行

```
 $this->db->join ( $table1 . " as b", "(( a.RelationshipCategoryID=b.RecieverRelationshipCategory AND b.3rdPartyID=" .$shop_id. " ) OR (  a.RelationshipCategoryID=b.SenderRelationshipCategory AND b.ShopID=" .$shop_id. " )) AND b.IsDelete!=1", 'left' ); 
```

如何在我的代码中正确添加这部分代码

```
(( a.RelationshipCategoryID=b.RecieverRelationshipCategory AND b.3rdPartyID=" .$shop_id. " ) OR (  a.RelationshipCategoryID=b.SenderRelationshipCategory AND b.ShopID=" .$shop_id. " )) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:35:18.003

似乎当查询生成 2 paranthesess 正在从这里转义`(( a.RelationshipCategoryID=b..`再次检查您的查询。另外，`db->select()`您应该作为第二个参数传递，`false`以免转义特殊字符

```
$this->db->select ('select query', false); 
```

但是最好只`$this->db->query('whole sql query');`用于复杂的查询

# flash - 将 Swf 标志和 Brun 转换为 dvd 播放器

> ID：10024053
> 
> 赞同：0
> 
> 时间：2012-04-05T07:06:29.823
> 
> 标签：flash

嗨，我已经在 Flash 中进行了 Swing 登录，我想导出为 avi 格式的 dvd 播放器，如果我导出到 swf，我可以看到我的徽标不停地摇摆，但是当我导出到 avi 并在媒体播放器中打开时，徽标是摆动 1-2 秒并停止，我怎样才能不停地播放我的 avi 格式的徽标并在 DVD 播放器中播放，我想在电视上为我的客户显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:13:33.247

我认为您的徽标仅摆动 2 秒，因为那是动画的总时间。然后 FLash 只是让它循环。

当您将其转换为 avi 时，您应该有一些选项可以说“激活循环”或类似的内容，具体取决于您使用的程序。

例如，在 Photoshop 中有“循环动画”和 sonyvegas 视频编辑器中的类似内容。

# iphone - 将 UImage 上传到 Facebook

> ID：10024056
> 
> 赞同：0
> 
> 时间：2012-04-05T07:06:34.840
> 
> 标签：iphone, ios, facebook

我将 UIImage 发布到用户的 facebook 墙上的以下代码无法正常工作。我查看了 facebook sdk 附带的示例代码，并且工作正常。我找不到我的代码出了什么问题。

```
-(void) shareOnFacebook
{
facebook = [[Facebook alloc] initWithAppId:@"MYAPPID" andDelegate:(id)self];

NSArray * neededPermissions = [[NSArray alloc] initWithObjects:@"offline_access",@"user_about_me", @"publish_stream", @"user_photos", nil] ;
[facebook authorize:neededPermissions ];

if (![facebook isSessionValid]) 
{

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   img, @"picture",
                                   nil];
    [facebook requestWithGraphPath:@"me/photos"
                                    andParams:params
                                andHttpMethod:@"POST"
                                  andDelegate:(id)self];

} 
```

}

请告诉我可能是什么问题？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:48:55.940

您需要在调用委托方法后调用上传函数`- (void)fbDidLogin`..尝试这样做，它应该可以工作

```
- (void)fbDidLogin {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[fb accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[fb expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];

    [self uploadImageWithName:yourImageName];
}

- (void) uploadImageWithName : (NSString*)name
{
    NSString *img = [NSString stringWithFormat:@"%@.PNG",name];
    UIImage *uploadImage = [UIImage imageNamed:img];

    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   [fb accessToken], 
                                   @"access_token",nil];

    [params setObject:uploadImage forKey:@"source"];

    [fb requestWithGraphPath:@"me/photos"
                             andParams: params
                         andHttpMethod: @"POST"
                           andDelegate:self];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:12:51.137

这没有意义，不是吗？您询问 facebook 对象会话是否有效*，如果不是*，则继续上传照片。我不知道其余代码是否正常，但至少尝试删除条件或将其更改为`if ([facebook isSessionValid])`，看看是否有帮助。

# apache-flex - 如何计算我的下拉菜单的绝对高度

> ID：10024060
> 
> 赞同：0
> 
> 时间：2012-04-05T07:06:55.997
> 
> 标签：apache-flex

我的 flex 应用程序中有很多下拉菜单。现在我想设置 rowCount 属性，以便尽可能多的行，以便在看到下拉项目时滚动更少。flex 应用程序在弹出窗口上运行。所以我想我必须知道从下拉菜单到窗口底部边框的距离，然后计算 rowCount 应该是什么数字。像高度/每行高度。

据我所知， dropdown.y 是其自身的相对 y 坐标。但是我的下拉菜单有很多父 UI 布局组件，而且我有很多下拉菜单，很难一一计算。那么你知道我的问题的一些效率解决方案吗？或者你有其他方法来获取rowCount？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:58:14.527

在您的下拉课程中：

```
var globalPoint:Point = this.localToGlobal(new Point(0,this.y));

trace("dropdown global Y = "+globalPoint.y); 
```

# c# - 仅在 FireFox 中的文件下载问题

> ID：10024063
> 
> 赞同：0
> 
> 时间：2012-04-05T07:07:11.420
> 
> 标签：c#, cross-browser, http-headers

我已经制作了一个消息系统，用户可以在其中相互发送消息，他们也可以将文件作为消息中的附件发送（它就像简单的电子邮件系统）。我在 Firefox 中遇到问题，如果文件名在 Firefox 中包含空格（例如，ticket.doc 的 602_Sign 文件），它将与 602_Sign.doc 一起保存，但它应该显示完整的名称，问题在 IE 和 chrome 上运行良好，下面是我的下载文件代码

```
public ActionResult Download(string attFileName)
        {
            string FileName = Path.Combine(Server.MapPath("~/MessageAttachmentFiles"), attFileName);
            System.Web.HttpResponse response = System.Web.HttpContext.Current.Response;
            response.ClearContent();
            response.Clear();
            Response.AddHeader("Content-Disposition", string.Format("attachment; filename = {0}", System.IO.Path.GetFileName(FileName)));
            response.TransmitFile(FileName);
            response.Flush();
            response.End();
            return null;

        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T07:14:13.180

下面应该工作

```
response.AddHeader("Content-Disposition", 
                    string.Format("attachment; filename = \"{0}\"",
                    System.IO.Path.GetFileName(FileName))); 
```

[关于为什么http://kb.mozillazine.org/Filenames_with_spaces_are_truncated_upon_download](http://kb.mozillazine.org/Filenames_with_spaces_are_truncated_upon_download)的更多详细信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T07:14:40.250

文件名应该用双引号引起来

```
Content-Disposition: attachment; filename="602_Sign File for ticket.doc" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-20T18:14:36.430

```
response.AddHeader("Content-Disposition", 
                    string.Format("attachment; filename = \"{0}\"",
                    System.IO.Path.GetFileName(FileName))); 
```

这是正确的解决方案

# php - 表单提交时从另一个表中检索数据

> ID：10024065
> 
> 赞同：0
> 
> 时间：2012-04-05T07:07:16.420
> 
> 标签：php, sql, forms

我的网站上有一个表格，用户在注册时填写。所有的注册都存储在“注册”表中。表结构如下所示：
id、用户名、密码、名字、姓氏、电子邮件、性别、职位、f1、国家、f2、fbook、f3、fmovie、f4。

***jobtitle***、***country***、***fbook***和fmovie***是***下拉菜单。这些 dropdwon 菜单的值也存储在另一个名为“extraininfo”的表中，其结构如下：jobtitle、f1、country、f2、fbook、f3、fmovie、f4。

当用户提交表单时，它应该检查 jobtitle、country、fbook 和 fmovie 字段中的值并从“extraininfo”表中检索值。

因此，如果用户在 jobtitle 下拉菜单中选择“DECORATOR”，它应该从“extraininfo”表中的 f1 列中获取值，并将其插入“registration”表的 f1 列中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:15:46.490

您可以通过读取提交的值并使用 SQL 查询将其与数据库中的数据进行比较来实现这一点，方法是选择数据匹配的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:59:49.603

您可以使用其中已有的值构建下拉列表，而不是事后查找它们：

```
<SELECT name="jobtitle">
    <OPTION value="f1_value">Decorator</OPTION>
    <OPTION value="f1_value">Welder</OPTION>
</SELECT> 
```

其中`f1_value`是`extrainfo`表中每个职位的值。如果您首先将信息读入数组，则还可以使用`foreach`结构来构建：`<OPTION>...</OPTIONS>`

```
<?php
$q="select * from extrainfo";
if ($r=mysql_query($q))
{
  $m=array();
  while ($row=mysql_fetch_assoc($m))
  {
    $m[]=$row;
  }
?>
<SELECT name="jobtitle">
<?php
  foreach ($m as $line)
  {
    echo '<OPTION value="'.$line['f1'].'">'.$line['jobtitle'].'</OPTION>';
  }
?>
</SELECT> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T07:35:52.647

表单提交后尝试这样

通过 $_POST 获取选择框的值

```
$jobtitle = $_POST['jobtitle']; //name of select box is assumed as jobtitle 
```

从 extrainfo 获取值

```
$r = mysql_query("select f1 from extrainfo where jobtitle='$jobtitle'); //get f1 from extrainfo
$j = mysql_fetch_row($r); 
```

像这样为所有列插入注册表

```
mysql_query("insert into registration(f1)values('$j[0]')"); //insert the f1 into registration table 
```

# mysql - 如何改进此查询。发送数据太慢

> ID：10024066
> 
> 赞同：0
> 
> 时间：2012-04-05T07:07:17.043
> 
> 标签：mysql, sql

```
SELECT COUNT(`t`.id) 
FROM `product` `t` 
INNER JOIN `category` `c1` ON ( `c1`.id ='15' )
LEFT JOIN `category` `c2` ON ( `c2`.`parent_category_id` = '15' ) 
LEFT JOIN `category` `c3` ON ( `c3`.`parent_category_id` = `c2`.`id` ) 
LEFT JOIN `category` `c4` ON ( `c4`.`parent_category_id` = `c3`.`id` ) 
LEFT JOIN `category` `c5` ON ( `c5`.`parent_category_id` = `c4`.`id` ) 
LEFT JOIN `category` `c6` ON ( `c6`.`parent_category_id` = `c5`.`id` ) 
LEFT JOIN `category` `c7` ON ( `c7`.`parent_category_id` = `c6`.`id` ) 
WHERE 
t.category_id IN (c2.id,c3.id,c4.id,c5.id,c6.id,c7.id) 
AND (t.mod='Accepted') 
```

我有一个类别和产品表，类别表有 parent_category_id 引用相同的类别表，但表示记录是子类别。

```
 SHOW PROFILE Result (ordered by duration)

state   duration (summed) in sec    percentage
Sending data    1.69029 99.96392
freeing items   0.00015 0.00887
statistics  0.00015 0.00887
checking query cache for query  0.00009 0.00532
init    0.00006 0.00355
preparing   0.00003 0.00177
checking permissions    0.00002 0.00118
optimizing  0.00002 0.00118
Opening tables  0.00002 0.00118
System lock 0.00001 0.00059
starting    0.00001 0.00059
cleaning up 0.00001 0.00059
Table lock  0.00001 0.00059
end 0.00001 0.00059
executing   0.00001 0.00059
logging slow query  0.00001 0.00059
Total   1.69090 100.00000

Change Of STATUS VARIABLES Due To Execution Of Query

variable    value   description
Bytes_received  291 Bytes sent from the client to the server
Bytes_sent  72  Bytes sent from the server to the client
Com_select  1   Number of SELECT statements that have been executed
Handler_read_key    133514  Number of requests to read a row based on a key
Handler_read_next   133549  Number of index columns read with a range constraint or an index scan
Key_read_requests   444695  Number of MyISAM key blocks read from cache
Key_reads   234 Number of MyISAM key blocks that were read from disk. Indicates insufficient key cache size
Key_write_requests  200 Number of MyISAM key blocks that were written to cache
Key_writes  105 Number of MyISAM key blocks written to disk. Indicates insufficient key cache size
Last_query_cost*    19845567    The total cost of this query as computed by the query optimizer
Open_files* 1475    Number of files opened
Qcache_free_memory* 149209104   Amount of Query cache free memory
Qcache_hits 1520    Number of queries served directly by the Query Cache
Qcache_inserts  190 Number of queries inserted into the Query Cache
Qcache_not_cached*  2062788 Number of queries that were not cached by the Query Cache. They are not cacheable or was not cached due to the query_cache_type setting
Questions   1   Number of statements executed by the server
Table_locks_immediate   574 The number of requests for table locks that could be granted immediately
Threads_cached  6   The number of threads in the thread cache
Threads_running*    3   The number of threads that are not sleeping
* Actual values after query execution (not changes due to query)

EXPLAIN Result

id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  c1  const   PRIMARY PRIMARY 4   const   1   Using index
1   SIMPLE  t   ref category_id, mod    mod 2   const   48  Using where
1   SIMPLE  c2  ref parent_category_id  parent_category_id  5   const   18  
1   SIMPLE  c3  ref parent_category_id  parent_category_id  5   ucuzolur.c2.id  7   
1   SIMPLE  c4  ref parent_category_id  parent_category_id  5   ucuzolur.c3.id  7   
1   SIMPLE  c5  ref parent_category_id  parent_category_id  5   ucuzolur.c4.id  7   
1   SIMPLE  c6  ref parent_category_id  parent_category_id  5   ucuzolur.c5.id  7   
1   SIMPLE  c7  ref parent_category_id  parent_category_id  5   ucuzolur.c6.id  7   Using where 
```

您可以在上面找到个人资料。如您所见，一切都很好，只是发送数据太慢了。这个查询只是一个计数查询，为什么发送消耗太多时间以及如何改进这个查询。我在类别表中有 20000 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:35:33.123

确保您在要加入的列上有索引，并尽量不要使用“WHERE IN”。

@Quassnoi 的回答提出了一个很好的观点： [SQL JOIN 与 IN 性能？](https://stackoverflow.com/questions/1200295/sql-join-vs-in-performance)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:38:12.960

如果我正确理解您的目标，而不是创建整个类别结构，您可以尝试使用子查询向下钻取以查找属于类别 15 结构的所有产品。

简化的 SQL：

```
SELECT COUNT(*)
FROM 'product' 't'
WHERE EXISTS (
    SELECT *
    FROM 'category' 'c1'
    WHERE 't'.'category_id' = 'c1'.'id'
        AND ('c1'.'id' = 15
        OR (EXISTS
            (SELECT *
            FROM 'category' 'c2'
            WHERE 'c2'.'parent_category_id' = 'c1'.'id'
                AND ('c2'.'id' = 15                    
                    OR (EXISTS .... 
                        recursion here depending on 
                        how many levels the categories can have)
            )
        ))
    ) 
```

这也可能表现得很糟糕，但它也可能更好地利用索引，或者减少对类别表的点击次数。

**尝试 2**

以下行为是否更好？

```
SELECT COUNT(`t`.id) 
FROM `product` `t` 
    LEFT JOIN `category` `c2` ON ( `c2`.`id` = t.category_id )
    LEFT JOIN `category` `c3` ON ( `c2`.`parent_category_id` = `c3`.`id` ) 
    LEFT JOIN `category` `c4` ON ( `c3`.`parent_category_id` = `c4`.`id` ) 
    LEFT JOIN `category` `c5` ON ( `c4`.`parent_category_id` = `c5`.`id` ) 
    LEFT JOIN `category` `c6` ON ( `c5`.`parent_category_id` = `c6`.`id` ) 
    LEFT JOIN `category` `c7` ON ( `c6`.`parent_category_id` = `c7`.`id` ) 
WHERE (`c2`.`id` = 15
    OR `c3`.`id` = 15 
    OR `c4`.`id` = 15
    OR `c5`.`id` = 15
    OR `c6`.`id` = 15
    OR `c7`.`id` = 15)
AND (t.mod='Accepted') 
```

确保 parent_category 当然有一个索引。

# api - 是否有任何理由不以明文形式存储 api 密钥？

> ID：10024068
> 
> 赞同：0
> 
> 时间：2012-04-05T07:07:25.143
> 
> 标签：api, security, api-key

我正在为 CMS 实现 API。

客户端通过公钥或私钥访问 API（用于更敏感的数据）。他们可以使用私钥读取和写入数据库。

我将密钥（只是随机字符串）作为明文存储在数据库中。

我学会了不要将密码存储为明文。主要原因是，潜在的攻击者可以在用户使用相同密码的其他系统（如 facebook）上使用密码。

apiKeys 不是这种情况，因为它们是由 API 本身生成的，唯一的价值是授予对数据库的访问权限。如果攻击者做到了那么远，他就已经可以访问了。

话虽如此：如果我将 api Keys 存储为明文，我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:24:31.263

我认为以明文形式存储这样的密钥没有任何问题，但是如果您对其进行加密，它将增加额外的安全层。如果有人闯入您的服务器并从您的数据库中读取明文密钥，他们可以使用这些密钥访问您的 API。如果加密密钥对攻击者没有用处。

# java - 如何在java中删除部分字符串？

> ID：10024070
> 
> 赞同：-6
> 
> 时间：2012-04-05T07:07:27.293
> 
> 标签：java, string

> **可能重复：**
> [如何使用任何空白字符作为分隔符拆分字符串？](https://stackoverflow.com/questions/225337/how-do-i-split-a-string-with-any-whitespace-chars-as-delimiters)

我想在java中分解一个字符串。我有一个字符串“message.txt.cpabe”。我想删除最后一部分，只想要“message.txt”。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T07:09:05.763

```
String s = "message.txt.cpabe";
int indexOfLast = s.lastIndexOf(".");
String newString = s;
if(indexOfLast >= 0) newString = s.substring(0, indexOfLast);
System.out.println(newString); // prints "message.txt" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T07:10:27.513

我会使用[LastIndexOf(".")](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#lastIndexOf%28int%29)来获取最后一个 '.' 的索引，然后使用[substring()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#substring%28int,%20int%29)剪切出你想要的部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T07:48:21.803

```
String str="message.txt.cpabe";
str=str.substring(0,str.lastIndexOf(".")); 
```

尝试这个。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-05T07:11:47.737

可能不是你想要的，但肯定是你要求的.. :-)

```
String original = "message.txt.cpabe";
original = "message.txt"; 
```

# c# - .dll 中出现“System.StackOverflowException”类型的未处理异常

> ID：10024072
> 
> 赞同：2
> 
> 时间：2012-04-05T07:07:35.100
> 
> 标签：c#, windows

我正在用 C# 开发一个 Windows 应用程序。在我的应用程序中，我使用了一个静态类。

下面是代码：

```
public static class clsNumber
{
     private static object vValue;

     public static object Value
     {
         get
         {
              return Value;
         }
         set
         {
              Value = value;
         }
     }

     public static string HexValue
     {
         get
         {
              try
              {
                   return Microsoft.VisualBasic.Conversion.Hex(vValue);
              }
              catch
              {
                   return Convert.ToString(vValue);
              }
         }
         set
         {
              Value = Microsoft.VisualBasic.Conversion.Val("&H" + value);
         }
     }
} 
```

从另一个类中设置上述类的“HexValue”值。下面是代码行：

```
iStick = sOutPut.Substring(0, 8);
clsNumber.HexValue = iStick; 
```

在执行上面的代码行时，出现了下面提到的错误：

```
"An unhandled exception of type 'System.StackOverflowException' occurred in <.....>.dll" 
```

谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T07:10:45.840

您在这里有一个非终止递归：

```
public static object Value  
{
     get
     {
          return Value;
     }
     set
     {
           Value = value;      
     }
 } 
```

getter 中的行`return Value`递归调用 getter 并导致堆栈溢出。对于二传手也是如此。

我想你的意思是：

```
public static object Value  
{
     get
     {
          return vValue;
     }
     set
     {
           vValue = value;      
     }
 } 
```

我看不出在这里使用显式命名的字段来返回属性会得到什么。我会`vValue`像这样删除并声明该属性：

```
public static object Value { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:20:20.200

2件事：

1.  您忘记了您已经创建了 vValue 字段。

2.  不要使属性递归（除非确实需要，并且在一些迭代后可以解决）。在这里，您在 Value 属性中调用 Value 属性。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-05T08:28:15.813

```
public static string HexValue 
```

在上面的行中使用 StringBuilder 而不是 string

# windows-phone-7 - WP7 噪音检测 - 录制音频

> ID：10024074
> 
> 赞同：1
> 
> 时间：2012-04-05T07:07:44.530
> 
> 标签：windows-phone-7, audio, windows-phone

我想录制音频以了解噪音水平。

我不需要太多的精度，只需要强烈的噪音。我怎么知道声音的幅度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T07:44:17.363

您使用 XNA-Class Microsoft.Xna.Framework.Microphone 录制音频： http: [//cisforcoder.wordpress.com/2010/08/21/recording-audio-in-silverlight-on-windows-phone-7/](http://cisforcoder.wordpress.com/2010/08/21/recording-audio-in-silverlight-on-windows-phone-7/)

如果要检测噪声级别，请尝试以下方法之一：

[如何在.net中检测来自麦克风的声音](https://stackoverflow.com/questions/2368035/how-to-detect-sound-from-microphone-in-net)

[给定一个音频流，找出门何时关上（声压级计算？）](https://stackoverflow.com/questions/499795/given-an-audio-stream-find-when-a-door-slams-sound-pressure-level-calculation)

# sharepoint - Sharepoint 计算数据

> ID：10024076
> 
> 赞同：0
> 
> 时间：2012-04-05T07:08:13.670
> 
> 标签：sharepoint

我的共享点列表中有两列

[集群名称] 和 [主机名]

我想为 [Cluster Name] 列实现计算出的共享点数据，例如如果该字段为空白，则它需要 Hostname 的前 3 个字符加上 STANDALONE 的后缀，任何人都可以帮我解决这个问题，这就是我到现在为止，但是当我尝试这个时它给出了一个错误

=IF(ISBLANK([Cluster Name]),(UPPER(LEFT([Host Name],3))-STANDALONE),)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:39:07.417

IF 的语法是

如果（测试，真，假）

但是在您的公式中，您缺少错误的部分。

另外 - STANDALONE 是一个字符串 - 但你没有任何引号。

最后，您尝试使用 - 将字符串连接在一起 - 但它应该是 &

所以

```
=IF(ISBLANK([Cluster Name]),(UPPER(LEFT([Host Name],3))-STANDALONE),) 
```

应该

```
=IF(ISBLANK([Cluster Name]),UPPER(LEFT([Host Name],3)) & "STANDALONE",[Cluster Name]) 
```

查看[MSDN 计算字段公式](http://msdn.microsoft.com/en-us/library/bb862071.aspx)或[此](http://office.microsoft.com/en-us/windows-sharepoint-services-help/examples-of-common-formulas-HA001160947.aspx)公式或[计算列备忘单](http://blog.pentalogic.net/2011/05/sharepoint-calculated-column-cheat-sheet/)以获取一些示例和语法。

*（免责声明 - 最后一个是我公司网站的链接，需要通过电子邮件注册才能下载备忘单 pdf）*

# ruby-on-rails - 以 url 操作路径为前缀的资产？

> ID：10024094
> 
> 赞同：1
> 
> 时间：2012-04-05T07:09:30.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml, form-for

我正在使用 rails 3.2.2 和 haml。我不确定为什么它将资产路径添加到我正在构建的这个表单中。

这是视图中的代码：

```
%table
  %tbody
    - @netscaler.vips.each do |vip|
      %tr
        = form_for vip, :url => { :controller => 'vips', :action => 'update' }, :remote => true do |f|
          %td= f.check_box vip, { :checked => vip.active ? true : false, :class => 'vip_state' }
          %td= vip.name

%p 
```

这是html输出：

```
<table>
  <tbody>
    <tr>
      <form accept-charset="UTF-8" action="/assets?action=update&amp;controller=vips" class="edit_vip" data-remote="true" id="edit_vip_95" method="post">
        <div style="margin:0;padding:0;display:inline">
          <input name="utf8" type="hidden" value="&#x2713;" />
          <input name="_method" type="hidden" value="put" />
          <input name="authenticity_token" type="hidden" value="CdH+TARoORHZHhhwuPfooGdDDgZBTJjR7uRBvYdoh1I=" />
        </div>
        <td>
          <input name="vip[#&lt;Vip:0x92c384c&gt;]" type="hidden" value="0" />
          <input checked="checked" class="vip_state" id="vip_#&lt;Vip:0x92c384c&gt;" name="vip[#&lt;Vip:0x92c384c&gt;]" type="checkbox" value="1" />
         </td>
         <td>image-vip</td>
      </form>
    </tr>
  </tbody>
</table> 
```

我也在使用嵌套资源：

```
resources :netscalers do
  resources :vips
end 
```

# visual-studio - 如何让 Visual Studio 在构建之前检查文件内容是否更改？

> ID：10024106
> 
> 赞同：0
> 
> 时间：2012-04-05T07:11:22.310
> 
> 标签：visual-studio, build-process

Visual Studio 在构建文件之前使用时间戳来确定文件是否已更改。但是，就我而言，这还不够，因为时间戳可能会更改，但内容将保持不变。有没有办法让 Visual Studio 检查文件内容是否更改（例如使用 MD5 哈希）并且仅在更改时才构建？任何加载项或内置功能？

系统信息：VS Team System 2008 版本 3.5 SP1，Windows 7 64 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:35:39.660

是不可能的。

[[来源](http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/b46989d3-3005-4e1b-86ed-47ce05491d34/)]

# java - Java：序列化是否也为 Hibernate 实体编写流式方法代码？

> ID：10024109
> 
> 赞同：1
> 
> 时间：2012-04-05T07:11:41.797
> 
> 标签：java, hibernate, serialization, pojo

作为一个实验，我通过“加载”获取了一个 Hibernate 实体 pojo，并通过正常的序列化将其写入文件。我通过正常的反序列化再次通过单独的程序读取该文件，然后使用反射查找实体对象的代理类包含的字段和方法。

令我惊讶的是，它向我展示了代理类中包含的所有方法（例如，'getHibernateLazyInitializer()' 或 'CGLIB$SET_THREAD_CALLBACKS(net.sf.cglib.proxy.Callback[])' 等）

更重要的是，我能够在反序列化实例上调用“getHibernateLazyInitializer()”方法！现在，如果代理代码是动态生成的，并且如果在创建它的 JVM 关闭后该类不存在，我怎么能调用该方法？方法字节码是否也通过它们的代理为 Hibernate pojo 序列化/反序列化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:36:01.980

不，它没有。如果您尝试反序列化 Java 进程中的类路径不知道该类的对象，则会出现错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:44:59.673

由于您实际序列化的对象实例不是您的实体类本身，而是扩展该类的代理，因此很明显，如果您反序列化您得到的不是您的实体实例，而是再次获得代理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:12:26.817

好的，我又调试了一些，发现在序列化代理实例时，Hibernate 实际上编写了一个 SerializableProxy 的实例。发生这种情况是因为代理类实现了一个接口“HibernateProxy”，其中有一个“writeReplace()”方法，该方法返回所述 SerializableProxy 实例。

当这个实例被反序列化时，SerializableProxy 的 readResolve() 会启动并返回一个 HibernateProxy 对象，该对象是根据 SerializableProxy 实例中提到的信息创建的，并依次使用 CGLib Enhancer。这就是为什么我能够看到所有这些方法并调用它们。

底线：流中没有写入任何方法代码。Hibernate 通过 writeReplace 更改对象本身，然后在读回该对象时使用 readResolve 和 CGLIb 重新创建代理。

# mysql - 如何使用 MySql 在 Magento 中添加类别/子类别

> ID：10024112
> 
> 赞同：1
> 
> 时间：2012-04-05T07:11:49.680
> 
> 标签：mysql, magento, add, categories

我想使用 MySql 在 Magento 中添加类别及其子类别。我不太了解 EAV 架构。到目前为止，我发现 catalog_category_entity 是描述哪个类别是谁的父类别，以及它的级别和位置等的表。但是我对添加类别的表感到困惑，因为我确信我需要多个表插入数据以使其工作。

需要有关如何添加类别及其子类别并将产品分配给它们的指导。

谢谢

# java - 我怎样才能布局这样的组件？

> ID：10024113
> 
> 赞同：2
> 
> 时间：2012-04-05T07:11:50.563
> 
> 标签：java, blackberry, java-me

在 BlackBerry（OS 6+）中，我需要如下图所示的布局。但到目前为止，我还不能正确地得到红圈部分。

我使用了 a`HorizontalFieldManager`并添加了`BasicEditField`和​​两个`ButtonFields`。但是只有`BasicEditField`屏幕上可见，两个按钮被推出屏幕（但它们仍然是可聚焦的，尽管不可见）。

那么有什么想法吗？非常感谢任何帮助！

图像（我正在尝试做的事情用红色圈起来）： ![在此处输入图像描述](../Images/b7b0de1cc735b93dd83a1a6ffaeb7e42.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:16:24.077

试试这个它正在工作。

```
HorizontalFieldManager manager = new HorizontalFieldManager(USE_ALL_WIDTH);
    BasicEditField editField = new BasicEditField("Test", ""){
        protected void layout(int width, int height) {
            super.layout(width, height);
            setExtent(140, getPreferredHeight());
        }
    };
    manager.add(editField);
    manager.add(new ButtonField("button1"));
    manager.add(new ButtonField("button2"));
    add(manager); 
```

在上面的 setExtent(width,height) 方法中，根据您的需要设置宽度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T07:52:27.763

你可以检查类`MyManager`。可能是同一个布局可以实现`HorizontalFieldManager`，但是我在使用的时候失败了好几次`HorizontalFieldManager`。

```
public class MyScreen extends MainScreen {
    private BasicEditField _bef = new BasicEditField();
    private ButtonField _bf1 = new ButtonField("Button");
    private ButtonField _bf2 = new ButtonField("Button");

    public MyScreen() {
        MyManager mgr = new MyManager();
        _bef.setText("BasicEditField");
        mgr.add(_bef);
        mgr.add(_bf1);
        mgr.add(_bf2);
        add(mgr);
    }
}

class MyManager extends Manager {
    private final int HORIZONTAL_GAP = 5;

    public MyManager() {
        super(0);
    }

    protected void sublayout(int width, int height) {
        int fields = getFieldCount();
        Field field;
        int nHeight = 0;
        int remaininigWidth = width;
        int x0, x1, x2;

        // specific layout implementation only
        if (fields == 3) {
            // right most ButtonField
            field = getField(2);
            layoutChild(field, remaininigWidth, height);
            nHeight = Math.max(nHeight, field.getHeight()); 
            remaininigWidth -= (field.getWidth() + HORIZONTAL_GAP);
            x2 = remaininigWidth;

            // middle ButtonField
            field = getField(1);
            layoutChild(field, remaininigWidth, height);
            nHeight = Math.max(nHeight, field.getHeight()); 
            remaininigWidth -= (field.getWidth() + HORIZONTAL_GAP);
            x1 = remaininigWidth;

            // first BasicEditField
            field = getField(0);
            layoutChild(field, remaininigWidth, height);
            nHeight = Math.max(nHeight, field.getHeight());
            x0 = 0;

            setPositionChild(getField(0), x0, (nHeight - getField(0).getHeight()) / 2);
            setPositionChild(getField(1), x1, (nHeight - getField(1).getHeight()) / 2);
            setPositionChild(getField(2), x2, (nHeight - getField(2).getHeight()) / 2);

            setExtent(width, nHeight);
        } else {
            setExtent(width, 0);
        }

        field = null;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T04:57:22.350

```
 HorizontalFieldManager hfm = new HorizontalFieldManager();
BasicEditField editField = new BasicEditField("", ""){
    protected void layout(int width, int height) {
        super.layout(100,  getPreferredHeight());
        setExtent(100, getPreferredHeight());
    }
};
hfm.add(editField);
hfm.add(new ButtonField("button1"));
hfm.add(new ButtonField("button2"));
add(hfm); 
```

# ios - 如何检查用户定义的路径中是否存在文件？

> ID：10024117
> 
> 赞同：5
> 
> 时间：2012-04-05T07:12:27.277
> 
> 标签：ios, objective-c, iphone

我有一个名为 demo.png 的文件，它保存在`documents/test/`文件夹中。现在我想检查文件是否存在于该特定路径，并且我想删除该文件。如何检查，你能告诉我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T07:16:04.143

```
 NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]; 

 NSString* foofile = [documentsPath stringByAppendingPathComponent:@"foo.html"];
 BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:foofile];

 if (fileExists)    //Does file exist?
     {
    if (![[NSFileManager defaultManager] removeItemAtPath:path error:&error])   //Delete it
    {
        NSLog(@"Delete file error: %@", error);
    }
   } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T07:15:28.570

```
if([[NSFileManager defaultManager] fileExistsAtPath:somePath])
     [[NSFileManager defaultManager] removeItemAtPath:somePath error:NULL]; 
```

这可用于检查您的路径中是否存在文件。

# genetic-algorithm - 囚徒困境的演变策略

> ID：10024119
> 
> 赞同：1
> 
> 时间：2012-04-05T07:12:39.160
> 
> 标签：genetic-algorithm, game-theory

有人可以帮助我理解这篇[文章](http://www.cs.umd.edu/~golbeck/downloads/JGolbeck_prison.pdf)吗？我已经了解囚徒困境是什么，但无法理解刺激部分以及如何计算适应度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:35:43.370

**对于刺激部分：**
有6个人：
所以可能性是2次方6 = 64；2 表示 **C** 或**D**
考虑是否有**0**人有缺陷**[0][0][0][0][0][0]**
**1**人有缺陷**[0][0][0][0][0][ *1* ]**
**2**人有缺陷**[0][0][0][0][ *1* ][0]**
希望你能得到它..

# iphone - 在 iPhone 4s 上运行应用程序时出现 Xcode 4.3.2 错误

> ID：10024120
> 
> 赞同：4
> 
> 时间：2012-04-05T07:12:43.103
> 
> 标签：iphone, ios, xcode

我刚刚创建了一个`Tab-Based`Application模板，然后设置`App ID`，构建并运行，得到如下错误：

> 错误：无法启动 '/Users/zhanqi/Library/Developer/Xcode/DerivedData/mytest-ggqepovwnaqjfidycsaekzocibxx/Build/Products/Debug-iphoneos/mytest.app/mytest' --
> 
> 没有这样的文件或目录（/Users/zhanqi/Library/Developer/Xcode/DerivedData/mytest-ggqepovwnaqjfidycsaekzocibxx/Build/Products/Debug-iphoneos/mytest.app/mytest）

我检查了下面的路径，它确实存在。我已经重装了 3 次 Xcode，但它仍然无法正常工作。 `"/Users/zhanqi/Library/Developer/Xcode/DerivedData/mytest-ggqepovwnaqjfidycsaekzocibxx/Build/Products/Debug-iphoneos/mytest.app"`

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T12:45:26.893

首先清除您的 DerivedData (/Library/Developer/Xcode/DerivedData/) 从那里删除所有内容。

现在重启你的 XCode，重启你的设备。

这可能会奏效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T12:35:06.733

我有完全相同的问题，但部署到 iPad。它在 iPad 模拟器上工作，但不在设备上。

通过重新启动 Xcode 解决了它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T12:58:04.913

我刚刚遇到了与 armv6 设备相同的问题。最后，我发现目标设置下的“信息”选项卡中的“所需设备功能”中有“armv7” - 我从列表中删除了该项目，现在它可以工作了。

# bash - 调整 Bash 'cd' 和 TAB 补全以识别拼写错误

> ID：10024123
> 
> 赞同：21
> 
> 时间：2012-04-05T07:12:50.353
> 
> 标签：bash, autocomplete, case-insensitive, cd

我正在寻找对 cd 命令的调整，以便它识别目录的拼写错误并自动完成相似的目录名称。

现在，我的设置可以识别目录的拼写错误，但不会自动完成它们。

对于目录拼写错误更正，我在以下代码中有此代码`~/.bashrc`：

```
shopt -s cdspell 
```

现在它以下列方式工作，假设我有一个名为“垃圾”的目录

```
vickey@home:~$ cd tras
trash
vickey@home:~/trash$ cd ..
vickey@home:~$ cd trasx
trash
vickey@home:~/trash$ pwd
/home/vickey/trash
vickey@home:~/trash$ 

vickey@home:~$ cd Trash
trash
vickey@home:~/trash$ pwd
/home/vickey/trash 
```

但是我遇到的问题是假设我创建了一个名为 Temp 的目录并执行类似的操作

```
vickey@home:~$ mkdir Temp
vickey@home:~$ cd temp
Temp
vickey@home:~/Temp$ cd ..
vickey@home:~$ cd te #and tab here
test/   textin/ 
```

它没有显示`Temp`为选项。有没有让自动完成不区分大小写？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-05T08:31:34.433

完成是`readline`.

您可以通过以下方式启用不区分大小写的完成：

1）添加到您的`~/.bashrc`：

```
bind 'set completion-ignore-case on' 
```

或者

2）添加到您的`/etc/inputrc`：

```
set completion-ignore-case on 
```

笔记：

*   `/etc/inputrc`，正如@mak 评论，影响所有使用 的shell `readline`，而不仅仅是`bash`.

*   这将使*所有*完成不区分大小写。

# node.js - 处理来自流式传输的数据时，Nodejs 和 TypeError 方法“修剪”未定义

> ID：10024125
> 
> 赞同：0
> 
> 时间：2012-04-05T07:13:06.617
> 
> 标签：node.js

我有以下来自流媒体的数据：

```
'ID|20120206|080500|0000001|0|1|record1|END'
'ID|20120206|080500|0000002|0|1|record2|END'
'ID|20120206|080500|0000003|0|1|record3|END' 
```

我想使用下面的nodejs代码逐行处理流数据：

```
var net = require('net');

var HOST = 'localhost',
    PORT = 9010,
    lastSeqNo = 0;

var client = new net.Socket();
client.setEncoding('ascii');

client.connect(PORT, HOST, function () {
    console.log('Connected to: %s : %d', HOST, PORT);
});

client.on('close', function (hadError) {
    console.log(hadError);
});

client.on('error', function (ex) {
    console.log(ex);
});

var i = 1;
var Line = function (rows, data) {
    this.SeqNo = parseFloat(rows[3].trim());
    this.Date = rows[1].trim();
    this.Time = rows[2].trim();
    this.MsgType = parseInt(rows[4].trim(), 10);
    this.Data = data;
};

client.on('data', function (data) {
    var content = data.split('\r\n');
    content.forEach(function (item) {
        if (item.length > 0) {
            console.log(i, item);
            i++;

            var rows = item.split('|'),
                line = new Line(rows, data),
                seqNo = line.SeqNo,
                msgType = line.MsgType;

            console.log('seqno:', seqNo);
        }
    });
}); 
```

经过一些数据线处理后，我得到了一些错误，如下所示：

```
D:\test node\app.js:33
    this.SeqNo = parseFloat(rows[3].trim());
                                    ^
TypeError: Cannot call method 'trim' of undefined
    at new <anonymous> (D:\test node\app.js:33:37)
    at D:\test node\app.js:48:24
    at Array.forEach (native)
    at Socket.<anonymous> (D:\test node\app.js:42:13)
    at Socket.emit (events.js:67:17)
    at TCP.onread (net.js:362:31) 
```

你能帮我上面的代码有什么问题吗？

谢谢你。来自印度尼西亚的问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:29:07.837

该`data`事件不保证它会立即发送完整的行。最有可能的问题是您实际上获得的数据少于代码预期的数据，因此`rows[3]`是未定义的。

正如您自己所说，您正在流式传输数据。当您收听该`data`事件时，您可能一次只获得一小部分数据 - 而不是一次获得全部数据。

# mysql - 带有两个表的 MYSQL 选择查询 - 从不给出结果

> ID：10024126
> 
> 赞同：2
> 
> 时间：2012-04-05T07:13:08.597
> 
> 标签：mysql, mysql-management

我需要从一个表中获取一组不在另一个表中的行（它将超过 70k 条记录）。

表1：记录数将超过14000k 表2：记录数将超过110k

所以我的 SQL 查询是

```
SELECT  pre.`id` , pre.`deal_id` , pre.`coupon_code` , pre.`csv` 
FROM `customerorders` AS oc, `precoupon` AS pre 
WHERE oc.`uniqueid` != pre.`coupon_code` 
```

问题是它永远无法完成。

它一直在加载，最后在 phpmyadmin 上出现了一个白页，我收到了这条消息。

内存耗尽 - PHP 上的致命错误无论我在 ini_set 中的大小如何

SSH 很长时间没有结果。

查询是否有任何问题，或者是否有任何优化的查询？

**如果 table1 中的特定列不可用，我需要导出这些第二个表记录。**

请帮助我的人。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T07:16:40.297

试试这样的左连接：

```
SELECT
     pre.`id` ,
     pre.`deal_id` ,
     pre.`coupon_code` ,
     pre.`csv`
FROM `precoupon` AS pre
LEFT OUTER JOIN `customerorders` AS oc
    ON oc.`uniqueid` = pre.`coupon_code`
WHERE oc.uniuqueid IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T07:19:14.030

尝试这样的事情：

```
SELECT  id , deal_id , coupon_code, csv 
FROM precoupon
WHERE coupon_code not in (select uniqueid from customerorders) 
```

使用完整的产品不是一个好主意:-)

# javascript - 需要ID一个图表软件

> ID：10024129
> 
> 赞同：0
> 
> 时间：2012-04-05T07:13:21.707
> 
> 标签：javascript, jquery, graphics

您好，我正在寻找一款不错的图表软件，我记得有一款我非常喜欢它的外观。 [http://imgur.com/fsXGa](http://imgur.com/fsXGa) 您可以在那张照片中看到它，但我已经搜索过，但找不到类似的东西。我猜它至少在 Javascript 中，因为它是动态显示的。有人知道它是什么吗？另外，如果您知道该栏随附的软件是什么。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:16:55.643

不完全一样，但[FusionCharts](http://www.fusioncharts.com/%20FusionCharts)可以做类似的事情。

# asp.net-mvc-3 - 如何在 mvc3 中将 html 视图转换为 pdf 文档

> ID：10024131
> 
> 赞同：1
> 
> 时间：2012-04-05T07:13:34.423
> 
> 标签：asp.net-mvc-3, razor

我正在使用 itextSharp 帮助我将一些文本转换为 pdf，但我想通过控制器传递我的整个 html 视图，并且 pdf 应该生成为报告。我是 MVC 3 的初学者，所以如果有任何想法，请提供帮助。

# java - Android - 为什么此服务的多个实例正在运行

> ID：10024133
> 
> 赞同：4
> 
> 时间：2012-04-05T07:13:43.523
> 
> 标签：java, android, android-service

我编写了一项服务，并计划让多个应用程序使用 Messenger 与其通信。我已经按照[messenger 的 Android Bound Services 示例中的示例进行操作](http://developer.android.com/guide/topics/fundamentals/bound-services.html#Messenger)。我已将该服务放在一个 Android 库项目中，并且所有其他 Android 项目都使用该库。

我遇到的问题是当我绑定到它时会运行多个服务实例。每个应用程序都通过以下方式绑定到服务：

```
// Bind to the service
bindService(new Intent(ApplicationOneActivity.this, MessengerService.class), mConnection, Context.BIND_AUTO_CREATE); 
```

服务是：

```
public class MessengerService extends Service {
    /** Command to the service to display a message */
    public static final int MSG_SAY_HELLO = 0;
    /** Command to the service to display a message from App 1 */
    public static final int MSG_APP1_HELLO = 1;

    public static final int MSG_APP2_HELLO = 2;

    public static final int MSG_APP3_HELLO = 3;

    private int[] stat = new int[3];

    private Timer timer = null;

    /**
     * Handler of incoming messages from clients.
     */
    class IncomingHandler extends Handler {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case MSG_SAY_HELLO:
                Toast.makeText(getApplicationContext(), "hello!", Toast.LENGTH_SHORT).show();
                break;
            case MSG_APP1_HELLO:
                Toast.makeText(getApplicationContext(), "App One says: " + msg.arg1, Toast.LENGTH_SHORT).show();
                stat[0] = msg.arg1;
                break;
            case MSG_APP2_HELLO:
                Toast.makeText(getApplicationContext(), "App Two says: " + msg.arg1, Toast.LENGTH_SHORT).show();
                stat[1] = msg.arg1;
                break;
            case MSG_APP3_HELLO:
                Toast.makeText(getApplicationContext(), "App Three says: " + msg.arg1, Toast.LENGTH_SHORT).show();
                stat[2] = msg.arg1;
                break;
            default:
                super.handleMessage(msg);
            }
        }
    }

    /**
     * Target we publish for clients to send messages to IncomingHandler.
     */
    final Messenger mMessenger = new Messenger(new IncomingHandler());

    /**
     * When binding to the service, we return an interface to our messenger
     * for sending messages to the service.
     */
    @Override
    public IBinder onBind(Intent intent) {
        Toast.makeText(getApplicationContext(), "binding", Toast.LENGTH_SHORT).show();

        return mMessenger.getBinder();

    }

    @Override
    public boolean onUnbind(Intent intent) {
        Toast.makeText(getApplicationContext(), "unbinding", Toast.LENGTH_SHORT).show();
        return super.onUnbind(intent);
    }

    final Handler handler = new Handler() {

        public void handleMessage(Message msg) {
            // Create and send a message to the service, using a supported 'what' value
            ReportAsyncTask report = new ReportAsyncTask();
            report.execute("");
        }
    };

    @Override
    public void onCreate() {
        super.onCreate();

        if (timer == null) {
            timer = new Timer();
            timer.schedule(new ScheduledTaskWithHandeler(), 10000);
            Toast.makeText(getApplicationContext(), "Register Timer To Report Back ", Toast.LENGTH_SHORT).show();
        }
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        if (timer != null) {
            timer.cancel();
            timer = null;
        }
    }

    class ScheduledTaskWithHandeler extends TimerTask {

        @Override
        public void run() {
            handler.sendEmptyMessage(0);
        }
    }

    private class ReportAsyncTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {
            String response = "";
            try {
                String urlParams="device=" + URLEncoder.encode(android.os.Build.MODEL, "UTF-8")
                        + "&status="+URLEncoder.encode("App1 says " + stat[0] + ", App2 says " + stat[1] + ", App3 says " + stat[2],"UTF-8");
                String url = "http://192.168.43.143:8080/SimpleServlet3/monitor-servlet";
                HttpClient httpclient = new DefaultHttpClient();
                HttpGet httpget = new HttpGet(url+"?"+urlParams);
                HttpResponse httpresponse = httpclient.execute(httpget);
                HttpEntity entity = httpresponse.getEntity();
                if (entity != null) {
                    InputStream instream = entity.getContent();
                    int l;
                    byte[] tmp = new byte[2048];
                    while ((l = instream.read(tmp)) != -1) {
                        response += l;
                    }
                }
                timer.schedule(new ScheduledTaskWithHandeler(), 10000);
            } catch (Exception e) {
                e.printStackTrace();
            }
            return response;
        }

        @Override
        protected void onPostExecute(String result) {
            Toast.makeText(getApplicationContext(), "Server says " + result, Toast.LENGTH_SHORT).show();
        }

    }

} 
```

每个应用程序的清单看起来更像：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.app1"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="11" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <application
        android:icon="@drawable/spinifex"
        android:label="@string/app_name" >
        <activity
            android:name=".ApplicationOneActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service
            android:name="com.example.services.MessengerService"
            android:process=":remote" />
    </application>

</manifest> 
```

知道我做错了什么吗？Toast 消息非常明确地表明同一服务的多个实例正在运行。我的项目结构错了吗？我不应该将服务放在单独的图书馆项目中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:34:22.860

您必须仅在一个 AndroidManifest 中声明`<service />`标签，而在其他应用中您必须通过完整的组件名称进行绑定。如：

```
Intent intent = new Intent();
intent.setClassName(
  "com.example.app1" /* your package which contains service */,
  "com.example.services.MessengerService" /* service name */
);

bindService(intent, mConnection, Context.BIND_AUTO_CREATE); 
```

**此外**，当你这样做时`android:process=":remote"`，你告诉 android 该进程是当前应用程序私有的。

# razor - Ajax.BeginForm 和 OnBegin 防止调用动作

> ID：10024135
> 
> 赞同：13
> 
> 时间：2012-04-05T07:14:03.610
> 
> 标签：razor, ajax.beginform

我在我的 MVC 3 + Razor 应用程序中使用 Ajax.Begin Form

```
 using (Ajax.BeginForm("ActionName", "ControllerName", new AjaxOptions { OnBegin = "ValidateDateFunction('" + @abc.xyz + "')", HttpMethod = "POST", UpdateTargetId = "savebutton" }))
   {
         <input type="submit" value="Save" />
   } 
```

下面是我的 onBegin 方法的样子。我正在向这个方法传递一个值，我能够得到一个适当的警报。

```
 function ValidateDateFunction(id) {
        alert(id);
        if(some-ConditionUsing-formId)
        {
            return false;
        }

        return true;           
    } 
```

现在使用它，我希望如果我的条件失败，那么不应该调用动作。但是在我的情况下，在这两种情况下，我的动作都被调用了。

请帮助解决这个问题。

下面是我的实际验证方法

```
 function ValidateDateFunction(fId) {

        var first = document.getElementById("startDate" + fId);
        var second = document.getElementById("endDate" + fId);

        if (first.value == "" && second.value != "") {
            alert("Please select both dates");
            return false;
        }
        else if (first.value != "" && second.value == "") {
            alert("Please select both dates");
            return false;
        }

        var startDateVal = new Date(first.value);
        var endDateVal = new Date(second.value);

        if (startDateVal.getTime() > endDateVal.getTime()) {
            alert("Error ! The start date is after the end date!");
            return false;
        }
        alert('should not reach here');
        return true;

    } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-06T05:35:45.937

找到了 ！

只需将我的 OnBegin 属性调整为

```
OnBegin = "return ValidateDateFunction('" + @abc.xyz + "')" 
```

链接我提到 [ASP.Net MVC 3.0 Ajax.ActionLink Onbegin Function true 执行动作？](https://stackoverflow.com/questions/8056968/asp-net-mvc-3-0-ajax-actionlink-onbeign-function-true-the-execute-the-action)

# gwt - 最佳实践——数据提交 GWT MVP

> ID：10024140
> 
> 赞同：1
> 
> 时间：2012-04-05T07:14:22.423
> 
> 标签：gwt, gwt-mvp

我正在寻找一些在 GWT 中使用 MVP 提交表单的最佳实践。

在我的应用程序中，打开了一个对话框，其中呈现了一个简单的 from。单击“确定”按钮时，将读取元素值并将其分配给值对象。然后将该对象添加到一个新的地方。

看法：

```
 onOkButtonClicked(event){
       // read values from dialog box elements
       // assign the values to ValueObject(name, number, address)
       presenter.goto(new ListRecordPlace("list","addrecord", valueObject);
    } 
```

活动：

```
ListRecordActivity(ListRecordPlace place, eventBus){
   this.place = place;
}

start(...){
   if(this.place.getAction().equals("addrecord")){
      // RPC call to add the new record: this.place.getNewRecord();
      // RPC returns list of records
      view.setRecordList();
      container.setWidget(view.asWidget());
   }
} 
```

这是通过 MVP 活动和地点向服务器提交数据的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:01:59.283

A`Place`不是一个*动作*，它（顾名思义）是一个*位置*。

所以不，这是绝对*错误*的做事方式。您应该执行 RPC 以响应单击 OK 按钮，*然后*只转到`ListRecordPlace`记录可见的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:14:31.913

在使用`MVP`时，服务的调用`RPC`应该在 Presenter 中完成。

*OK* click in view -> *view* : call Presenter (presenter.okClicked()) -> *Presenter* : 更新值并调用`RPC`服务保存 -> *Presenter* : 成功*保存*后转到其他地方。

当你去下一个地方时，你不应该使用 Place 对象来传输数据。负责处理新地点的对象应负责数据更新和显示。

# iphone - xCode - beginBackgrounTaskWithExpirationHandler 无限制（10 分钟）

> ID：10024141
> 
> 赞同：0
> 
> 时间：2012-04-05T07:14:25.847
> 
> 标签：iphone, xcode, multitasking, ios-4.2

对于我的秒表项目，我想在应用程序进入后台时运行计时器（如 iPhone 时钟内的“秒表”）。我试过“beginBackgrounTaskWithExpirationHandler”，但它最多只能执行 10 分钟的任务。没有这个限制我怎么能做到这一点。谁能帮我解决这个问题....

感谢您的快速回复。这是我的代码：

## 视图控制器.m

```
- (void)countDown{
    count = count - 1;

    //until 30 minutes i need to play an animation here... 

        if(count == 0)
        {
           //close timer...
        [myTimer invalidate];
        myTimer = nil;

           //update counter again
             [self updateCounter];
        }
}

//update counter function...

- (void)updateCounter{

    //setting count value
    count = 1800;

    //count-down fun
    myTimer = [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(countDown) userInfo:nil repeats:YES];

} 
```

这就是我希望在后台执行的操作..请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:31:08.713

1.  你不能（延长你的应用程序的后台时间）
2.  请改用[本地通知](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:31:16.103

实际上，如果您只需要时间，只需在您的应用程序再次激活时调整您的时钟。

如果您需要在某个时间处于活动状态，请使用`scheduleAlarmForDate:`，请参阅[Apple 文档](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW31)。

# facebook - 可以测试用户是否挡住了他的墙

> ID：10024142
> 
> 赞同：2
> 
> 时间：2012-04-05T07:14:26.153
> 
> 标签：facebook, facebook-javascript-sdk

我使用 FB.api feed 方法通过我的 facebook 应用程序在用户的墙上发布一些消息。

问题是，当用户屏蔽他的墙时，为了获得好的 fb 弹出窗口，我获得了标题为“发布时出错”和消息“无法发布到用户的墙”的弹出窗口。

是否可以测试用户是否挡住了他的墙？或者是否有可能从 facebook 收到错误并做其他事情？

谢谢 ：-）。

# android - 将 TabActivity 转换为片段

> ID：10024144
> 
> 赞同：2
> 
> 时间：2012-04-05T07:14:27.767
> 
> 标签：android

我`TabActivity`为我的项目实现了一个运行良好的 2.3 版本，但对于大于 3 的版本崩溃。如何将编写的代码转换`TabHostActivity`为`Fragments`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T07:19:02.657

添加**android-support-v4.jar**文件以支持 android 3.0 较低版本中的 Fragments。按照下面的链接下载 jar 文件。

[http://www.java2s.com/Code/Jar/a/Downloadandroidsupportv4jar.htm](http://www.java2s.com/Code/Jar/a/Downloadandroidsupportv4jar.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:14:57.673

[了解如何实现 Fragment](https://web.archive.org/web/20130118120808/http://android10.org/index.php/articlesuserinterface/309-learn-how-to-implement-fragments-in-android)并[允许较低版本使用 Fragment](https://web.archive.org/web/20130117085453/http://android10.org/index.php/articlesuserinterface/311-android-compatibility-fragments-for-all)

# sql - 多个左连接的sql查询困难

> ID：10024146
> 
> 赞同：1
> 
> 时间：2012-04-05T07:14:34.290
> 
> 标签：sql, database

我有一个查询

```
SELECT * FROM Issue I, Condition C, Result R, Status S      
            LEFT JOIN Issue as i1 ON C.ID = i1.ConditionID
            LEFT JOIN Issue as i2 ON R.ID = i2.ResultID
            LEFT JOIN Issue as i3 ON S.ID = i3.StatusID 
            WHERE I.ID = 452 
```

这给了我错误消息：

> 无法绑定多部分标识符“C.ID”。
> 无法绑定多部分标识符“R.ID”。

我希望得到如下结果：

> 身份证| 问题名称| 条件ID| 结果ID| 状态ID| 身份证| 条件名称| 身份证| 结果名称| 身份证| 状态名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:21:05.237

我假设您没有使用`MySQL Server`. 尝试这个：

```
SELECT * 
FROM Issue I, Condition C, Result R, Status S      
     LEFT JOIN Issue as i1 ON C.ID = i1.[Condition ID]
     LEFT JOIN Issue as i2 ON R.ID = i2.[Result ID]
     LEFT JOIN Issue as i3 ON S.ID = i3.StatusID 
WHERE I.ID = 452 
```

或者

```
SELECT *
FROM Issue I LEFT JOIN Condition C ON C.ID = I.ConditionID
     LEFT JOIN Result    R ON R.ID = I.ResultID
     LEFT JOIN Status    S ON S.ID = I.StatusID
WHERE I.ID = 452 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T07:19:51.180

我会尝试

```
SELECT *
FROM Issue I
LEFT JOIN Condition C ON C.ID = I.ConditionID
LEFT JOIN Result    R ON R.ID = I.ResultID
LEFT JOIN Status    S ON S.ID = I.StatusID
WHERE I.ID = 452 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T07:29:20.673

首先，关系“I”与您发布的查询中的任何其他关系之间没有 JOIN，因此您最终将在此处获得笛卡尔连接。

使用老式连接查询可能如下所示：

```
SELECT *
  FROM Issue I, Condition C, Result R, Status S
 WHERE I.ConditionID = C.ID
   AND I.ResultID = R.ID
   AND I.StatusID = S.ID
   -- the filter comes here
  AND I.ID = 42; 
```

使用 ANSI 连接语法：

```
SELECT *
  FROM Issue I
    LEFT JOIN Condition C ON C.ID = I.ConditionID
    LEFT JOIN Result R ON R.ID = I.ResultID
    LEFT JOIN Status S ON S.ID = I.StatusID
 -- the filter comes here
 WHERE I.ID = 42; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T07:17:55.543

```
SELECT * FROM Issue I, Condition C, Result R , Status S      
                                             ^---- You missing this
            LEFT JOIN Issue as i1 ON C.ID = i1.Condition ID
            LEFT JOIN Issue as i2 ON R.ID = i2.Result ID
            LEFT JOIN Issue as i3 ON S.ID = i3.StatusID 
            WHERE I.ID = 452 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T07:16:46.577

您的查询中有错字：

```
Result R [comma is needed here] Status S 
```

# android - 如何在android中为不同的布局使用不同的tabhosts

> ID：10024149
> 
> 赞同：1
> 
> 时间：2012-04-05T07:14:44.270
> 
> 标签：android, android-tabhost, android-tabactivity

我知道如何编写选项卡主机，但这里的情况有点不同
我有一个屏幕，因为有 2 个选项卡 1.ABC 2.XYZ 当我们点击 XYZ 选项卡下一页时，我们需要显示其他 4 个tabs P,Q,R,S 如何设置 tabhosts 以满足上述条件 请指定任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:33:17.597

您只需要创建两个扩展 TabActivity 的类

第一个包含

```
1.ABC
2.XYZ 
```

第二个包含

```
1.P
2.Q
3.R
4.S 
```

现在，您必须使用内部的第二个表的意图调用起始性，`onTabChanged()`因此选择选项卡xyz时，打开第二个制表率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:27:14.923

将该方法添加到您的 TabActivity 中：

```
 private void addTab(String name, Class<?> c)
    {
        TabHost tabHost = getTabHost();
        Intent intent = new Intent(this, c);
        TabHost.TabSpec spec = tabHost.newTabSpec(name);

        spec.setIndicator(name);
        spec.setContent(intent);
        tabHost.addTab(spec);
    }

    public void addMyFourNewTabs()
    {
        addTab("P", PActivity.class);
        addTab("Q", QActivity.class);
        addTab("R", RActivity.class);
        addTab("S", SActivity.class);
    } 
```

在您要创建新标签的活动中：

```
((TabActivity) getParent()).getTabHost().addMyFourNewTabs(); 
```

# android - 如何在android中找到设备类型，无论是IP摄像头还是带有IP地址的PC

> ID：10024150
> 
> 赞同：0
> 
> 时间：2012-04-05T07:14:44.270
> 
> 标签：android, camera, ip

我正在做一个项目，我必须找到设备类型，无论是相机还是 PC 的 IP 地址。我正在获取 LAN 中所有设备的 IP 地址。请建议我找到它的方法..

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:19:21.133

如果您有 IP 地址，您也应该能够获得 MAC 地址。MAC 地址的第一部分是识别制造商。因此，如果您知道哪家制造商生产 IP 摄像机，您将能够以高概率识别它们。

第二个标识符可以是特定的开放 TCP 端口。

# javascript - 在 UIWebView 中打开的 HTML 页面中自动填充用户名和密码

> ID：10024151
> 
> 赞同：2
> 
> 时间：2012-04-05T07:14:45.083
> 
> 标签：javascript, iphone, ipad, uiwebview, autofill

我将用户输入的用户名和密码数据保存在 UIWebView 中打开的 HTML 页面中。现在，我想做的是将用户名和密码放回各自的字段并提交表单，我希望此功能适用于几乎任何类型的网站。

目前，我可以使用 JavaScript 将数据放回各自的字段中。我的问题是当网页上有多个表单时如何识别填充了值的表单。

此外，在我的应用程序开发过程中，我发现出于安全原因，一些网站不允许填充密码字段。我应该使用什么 JavaScript 代码来实现这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:13:20.917

嘿，伙计，我希望这会在 Web 视图中对您有所帮助。

```
 - (void)webViewDidFinishLoad:(UIWebView *)webView
    {
            //For Authentication
        NSString *savedUsername = @"Bapu";
        NSString *savedPassword = @"Bapu123";

        if (savedUsername.length != 0 && savedPassword.length != 0)
        {
         //create js strings
         NSString *loadUsernameJS = [NSString stringWithFormat:@"var inputFields = document.querySelectorAll(\"input[type='text']\"); \
                                                 for (var i = inputFields.length >>> 0; i--;) { inputFields[i].value = '%@';}", savedUsername];
        NSString *loadPasswordJS = [NSString stringWithFormat:@"var inputFields = document.querySelectorAll(\"input[type='password']\"); \
                                        for (var i = inputFields.length >>> 0; i--;) { inputFields[i].value = '%@';}", savedPassword];

             //autofill the form
        [webView stringByEvaluatingJavaScriptFromString: loadUsernameJS];
        [webView stringByEvaluatingJavaScriptFromString: loadPasswordJS];
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:24:43.427

简而言之，我能想到的唯一答案是 java 脚本。比如，假设你的 UIWebView 对象是 *webView。使类支持 UIWebViewDelegate，然后在适当的地方分配委托：

```
// In viewDidLoad or somewhere appropriate.
self.webView.delegate = self; 
```

UIWebView 委托函数。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView 
{
    NSString *fillAndSubmit = [NSString stringWithFormat:@"<--- javascript --->",username,password];
    NSString *output = [webView stringByEvaluatingJavaScriptFromString:fillAndSubmit];
    // Any other stuff you need to do.
} 
```

以上是一个粗略的大纲，将 <--- javascript ---> 替换为 javascript 代码，该代码会将用户名和密码填写到相关表单中并提交。如果加载的页面使用 JQuery，您可以在此处的 javascript 中使用 JQuery。

至于要使用的 javascript，这完全取决于相关网页，所以我真的可以在那里提供帮助。

# python - 如何使用 python 将图表/图形添加到工作表/excelsheet

> ID：10024161
> 
> 赞同：0
> 
> 时间：2012-04-05T07:15:52.423
> 
> 标签：python, pychart

我已经使用 pychart 创建了图表，但输出以 pdf/png/ps 等的形式出现。但我需要这些图表应该进入 excel 表。将此图表提取到工作表的方法是什么。

```
from pychart import *
import sys
def to_percents(data):
    total = float(sum(v for _, v in data))
    data[:] = [(k, v / total) for k, v in data]
    return data

data = [("foo", 10),("bar", 20), ("baz", 30), ("ao", 40)]
theme.use_color = True
theme.get_options()    
ar = area.T(size=(150,150), legend=legend.T(),
            x_grid_style = None, y_grid_style = None)

plot = pie_plot.T(data=data, arc_offsets=[0,0,0,0],
                  shadow = (0, 0, fill_style.gray50),
                  label_offset = 25,
                  arrow_style = arrow.a3)
ar.add_plot(plot)
ar.draw() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:26:58.020

尝试使用win32com包

```
from win32com import client
excel=client.Dispatch("Excel.Application")
excel.Visible=True
book=excel.Workbooks.Open("myfile.csv", False, True)
sheet=book.Worksheets(1)
chart=book.Charts.Add() 
```

然后，根据需要修改图表

# android - 如何更改谷歌图表API中的轴颜色？

> ID：10024164
> 
> 赞同：2
> 
> 时间：2012-04-05T07:16:06.660
> 
> 标签：android, google-maps

我使用下面的 URL 来显示折线图，但有一件事我必须将轴颜色默认（黑色）更改为其他颜色。

[http://chart.apis.google.com/chart?cht=lc&chs=250x250&chco=0000ff&chls=4,1,0&chxt=x,y&chxl=0:|0|20|40|50|60|80|100|1 :|0|181.8|363.6|545.4|727.2|909&chd=t:0.0,20.0,40.0,50.0,60.000004,80.0,100.0&chf=bg,s,FFFFFF00&chm=o,0000FF,0,-1,10.0](http://chart.apis.google.com/chart?cht=lc&chs=250x250&chco=0000ff&chls=4,1,0&chxt=x,y&chxl=0:|0|20|40|50|60|80|100|1:|0|181.8|363.6|545.4|727.2|909&chd=t:0.0,20.0,40.0,50.0,60.000004,80.0,100.0&chf=bg,s,FFFFFF00&chm=o,0000FF,0,-1,10.0)

请弄清楚这个..

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:25:12.473

请参阅[imagecharteditor](http://imagecharteditor.appspot.com/)链接，您可以从那里找到**Axis 样式**，您可以将轴默认颜色更改为其他颜色。

# asp.net - 在 asp.net 中限制重新分发开源 Web 应用程序的解决方案

> ID：10024171
> 
> 赞同：0
> 
> 时间：2012-04-05T07:16:40.727
> 
> 标签：asp.net, .net, security, web-applications, licensing

我们在 asp.net 4.0 中实现了一个 web 应用程序，客户也需要我们给他们源代码，以便他们可以自己进行应用程序的维护和有限的改进，但我们需要确保他们不能更改应用程序和销售对其他客户，有什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:23:20.923

如果您向他们提供完整的源代码，那么阻止他们重新分发它（作为源代码或作为编译的解决方案）的唯一方法是将其作为他们与您之间的**许可协议的条件。**在代码中，没有办法通过简单地删除强制执行它的代码来强制执行他们无法绕过的。

如果您可以将**一些**组件作为已编译的程序集提供给它们（例如；它们不需要更改的组件，例如数据访问层或某些 UI 控件库），您可以在执行以下操作之一的库中放置某种形式的许可证检查以下：

1.  确认`web.config`文件中的许可证密钥与其运行的服务器的 IP 地址相匹配（考虑对进入“私有”IP 地址范围（例如 127.0.0.0 和 192.168.0.0 等）的请求执行一揽子“允许” ,.. 允许他们的开发人员执行测试）。
2.  “Phones Home”到您提供的许可 Web 服务，以检查运行代码的服务器是否已获得授权（确保他们知道这将发生，以便他们的服务器/防火墙可以配置为允许此检查）。您可能希望通过 SSL 执行此操作，以使其更难绕过。

如果您执行上述两项之一，请记住，这不会阻止他们反编译程序集并删除您放入的检查。在这种情况下，您可能需要考虑混淆编译的程序集。

# regex - ANT：获取与特定正则表达式名称匹配的所有文件夹

> ID：10024172
> 
> 赞同：0
> 
> 时间：2012-04-05T07:16:41.667
> 
> 标签：regex, ant

我想通过只告诉这些文件夹名称的一部分来获取文件夹列表，如下所示：

```
Pattern: com.mypackages.*
Root folder: ${root}
Other folder: com.mypackages.p1 
```

如何在 ANT 中获取与该模式匹配的所有文件夹？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:36:16.263

只需使用[dirset](https://ant.apache.org/manual/Types/dirset.html) 和 include 标签。它不是正则表达式，但对于您所说的要求，以下内容似乎就足够了。

```
<dirset dir="${root}">
  <include name="com/mypackages/*/>
</dirset> 
```

# php - HTML 复选框验证

> ID：10024173
> 
> 赞同：-1
> 
> 时间：2012-04-05T07:16:45.067
> 
> 标签：php, javascript, html

我在 PHP 中创建了如下复选框

```
echo "<Input type = 'Checkbox' class='cl2'  Name =".$i."/>".$f1. 
```

现在我想验证它，因为当没有选中复选框时，会在提交时创建一个弹出框。

我用下面的js试过了

```
function Validate() {
    alert (document.getElementsByClassName('cl2')[0].checked);
    for(i=0;i<=5;i++) {
        if(document.getElementsByClassName('cl2')[i].checked == false) {
            alert("approve atleast one request");
        } else {
            return true;
        } 
    }
} 
```

它没有返回任何东西。for循环中的条件应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:19:43.803

当验证无效时，您应该返回 false，见下文。使用 getElementsByClassName 时要小心，它仅在最新的浏览器中受支持，您应该为旧浏览器设置后备，或者使用 jQuery。

```
function Validate() {
    for (i = 0; i <= 5; i++) {
        if (document.getElementsByClassName('cl2')[i].checked == false) {
            alert("approve atleast one request");
            return false;
        } else {
            return true;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:36:31.697

首先，您需要像这样包装您的**name**属性：

```
name='" . $i . "' 
```

否则，当字符串被回显时，您与 php 连接的**$i**将不会在 HTML 标记中用引号括起来，并且您的 HTML 标记将是错误的。

其次，我会格式化 javascript 更像这样（不确切知道你要做什么）

```
function Validate() {
    var isChecked = false;
    for(i=0; i <= 5; i++) {
        if(document.getElementsByClassName('cl2')[i].checked == true) {
          isChecked = true;
        }
    }
    return isChecked;
}

if(Validate()) {
    // do something 
} else {
    alert("approve atleast one request");   
} 
```

在循环中生成返回语句是不好的风格，所以要避免。另外，我会尝试将您的 javascript 插入到您回显的 php**下方**的脚本标记中，以确保脚本在内容加载后执行。否则，您可以在标签中插入一个`onload="Validate()"`属性`<body>`，并将 javascript 放在`<head>`页面的部分中。

希望这可以帮助。干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T07:23:54.350

要获取 for 循环的长度，请尝试以下操作：

```
var elem = this.getElementsByTagName('cl2');
for (var i = 0; i < elem.length; i++) 
```

# javascript - 使用 MSXML 2.0 执行 XSLT 转换

> ID：10024176
> 
> 赞同：2
> 
> 时间：2012-04-05T07:16:56.733
> 
> 标签：javascript, xml, xslt, dom

我正在尝试一些方法来使用 xslt 和 xml 作为字符串来执行 xslt 转换。如果我们传递 xml 文件的 url，那么使用 load() 方法可以正常工作。

```
function init(xml, xslt) {
    var srcTree = new ActiveXObject("Msxml2.DOMDocument.6.0");
    srcTree.async=false;
    srcTree.load(xml); 
    var xsltTree= new ActiveXObject("Msxml2.DOMDocument.6.0");
    xsltTree.async = false;
    xsltTree.load(xslt);
    var resTree = document.getElementById("HTMLData");
    resTree.innerHTML = srcTree.transformNode(xsltTree);
} 
```

在上述方法中，我们传递了 xml 和 xslt 的位置（url）。但根据要求，我们需要将整个 xml 和 xslt 作为字符串传递（如`<?xml version=`....）。如果你觉得我的问题难以理解，那么也评论说这个问题不容易理解。提前致谢。

编辑：

可以使用（示例）调用上述函数：

```
init('/myfiles/xml/books.xml', '/myfiles/xslt/style.xslt'); 
```

但我需要将 xml 作为字符串变量存储在 javascript 中，然后将这些字符串变量传递给 init 方法。例子：

```
var xmlDocument = '<?xml version='1'?><books>....</books>';
var xsltDocument = '<?xml version='1'?><xsl xmlns:xsl='...'....</xsl>';
init(xmlDocument, xsltDcoument); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:20:21.783

使用`loadXml`而不是`load`- 请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ms754585(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms754585(v=vs.85).aspx)

```
function init(xml, xslt) { 
    var srcTree = new ActiveXObject("Msxml2.DOMDocument.6.0"); 
    srcTree.async=false; 
    srcTree.loadXml(xml);  
    var xsltTree= new ActiveXObject("Msxml2.DOMDocument.6.0"); 
    xsltTree.async = false; 
    xsltTree.loadXml(xslt); 
    var resTree = document.getElementById("HTMLData"); 
    resTree.innerHTML = srcTree.transformNode(xsltTree); 
} 
```

# watin - 对 HTML5 标签的 WatiN 支持

> ID：10024178
> 
> 赞同：11
> 
> 时间：2012-04-05T07:17:02.367
> 
> 标签：watin

我有以下 HTML：

```
<input type="email" id="email"> 
```

我想从 WatiN 输入文本：

```
var field = Browser.TextField("email");
Assert.IsTrue(field.Exists); 
```

但是找不到该字段。这是因为 WatiN 还不支持 HTML5 标签。我通过创建扩展的 TextField 类找到了[解决方案：](http://sourceforge.net/mailarchive/forum.php?forum_name=watin-users&max_rows=100&style=nested&viewmonth=201204)

```
[ElementTag("input", InputType = "text", Index = 0)]
[ElementTag("input", InputType = "password", Index = 1)]
[ElementTag("input", InputType = "textarea", Index = 2)]
[ElementTag("input", InputType = "hidden", Index = 3)]
[ElementTag("textarea", Index = 4)]
[ElementTag("input", InputType = "email", Index = 5)]
[ElementTag("input", InputType = "url", Index = 6)]
[ElementTag("input", InputType = "number", Index = 7)]
[ElementTag("input", InputType = "range", Index = 8)]
[ElementTag("input", InputType = "search", Index = 9)]
[ElementTag("input", InputType = "color", Index = 10)] 
public class TextFieldExtended : TextField
{
    public TextFieldExtended(DomContainer domContainer, INativeElement element)
        : base(domContainer, element)
    {
    }

    public TextFieldExtended(DomContainer domContainer, ElementFinder finder)
        : base(domContainer, finder)
    {
    }

    public static void Register()
    {
        Type typeToRegister = typeof (TextFieldExtended);
        ElementFactory.RegisterElementType(typeToRegister);
    }
} 
```

注册类型并运行代码后，它仍然不起作用。任何人都可以看到为什么或有人对此问题有其他解决方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T14:27:36.867

```
var field = Browser.TextField("email"); 
```

尝试获取带有 id email 的 TextField，因此 TextFieldExtended 类型失败。

```
var field = Browser.ElementOfType<TextFieldExtended>("email"); 
```

获取带有 id email 的 TextFieldExtended。

# c# - 在 UserControl 中公开 DependencyProperty 但无法绑定

> ID：10024180
> 
> 赞同：1
> 
> 时间：2012-04-05T07:17:12.900
> 
> 标签：c#, wpf, image, data-binding, dependency-properties

我已经在论坛中搜索了这个问题的解决方案。有几个类似的问题和解决方案，但我无法真正理解它们。请原谅我再次问...：P

让我解释一下我的设置...我有一个 UserControl，它是作为与主应用程序分开的 dll 开发的。在这个相当复杂的 UserControl 中，我有几个子控件。其中之一是图像。我在 UserControl 代码隐藏处声明了一个 DependencyProperty，以公开 Image 的 Source 属性。

```
public static DependencyProperty MyImageSourceProperty = DependencyProperty.Register("MyImageSource", typeof(ImageSource), typeof(MyUserControl), new UIPropertyMetadata(null));

public ImageSource MyImageSource
{
   get { return (ImageSource)GetValue(MyImageSourceProperty); }
   set { SetValue(MyImageSourceProperty, value); }
} 
```

然后在我的主应用程序中，我将 UserControl 放在我的 MainWindow 中并将其装配起来......

```
 <controls:MyUserControl Name="MyControl" MyImageSource={Binding MySource}/> 
```

MySource 在我的 MainWindow 的 ViewModel 中声明。

```
 public string MySource
   {
      get { return this.mySource; }
      set { if (value == mySource) 
               return;
            this.mySource = value;
            OnPropertyChanged("MySource");
          }
   } 
```

基本上，该程序应该这样运行： 1) 用户单击主窗口中的按钮。2）一个openFileDialog弹出，他选择一个图像文件加载。3) 一旦他确认选择，图像应该加载到 MyUserControl 的图像控件中。即 MySource 已更新，这会触发一连串事件，从而导致 Image 的 Source 属性被更新。

编译没有错误。但是当我尝试执行程序并选择我要加载的图像时，图像根本不显示......

希望有人能启发我。真的在墙上撞了好几个小时，试图弄清楚出了什么问题......提前非常感谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:28:44.560

将以下行添加到构造函数中：

```
this.DataContext = this; 
```

这告诉表单它是它自己的数据上下文。否则，用户控件不知道哪个对象“承载”了该`MySource`属性。

# c++ - 在网络游戏中通过 UDP 发送键盘输入

> ID：10024181
> 
> 赞同：3
> 
> 时间：2012-04-05T07:17:17.707
> 
> 标签：c++, network-programming, synchronization, udp

我正在通过 UDP 实现联网小行星。我打算将客户端发送的用户输入消息限制为状态*更改*。因此，仅当箭头或空格键上有向下或向上键时才发送消息。这将大大减少从客户端发送的数据包数量。

然而，现在我重新阅读了 Gaffers 关于网络物理的文章*以及*他关于使 UDP 消息可靠的更复杂的文章，我正在重新考虑。他说：

`The key to making this input stream tolerant of packet loss and out of order delivery is the inclusion of a floating point time in seconds value with every input rpc sent. The server keeps track of the current time on the server and ignores any input received with a time value less than the current time. This effectively drops any input that is received out of order. Lost packets are ignored.`

因此，它不关心数据包是否丢失。现在我认为指示按下键以将船向前推进的重要数据包可能会丢失，并且永远不会怨恨，从而破坏游戏。

因此，我是否正确地说客户端被迫发送更多常规（最多每次物理更新，每秒 50 次）实际键盘*状态*的转储，而不是状态*更改*以适应这种容忍数据包丢失的方案？或者有没有更高尚的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:06:18.010

正如我在评论中已经说过的那样，没有答案来统治它们。

但在你的情况下，我可能不会转移击键而是物理变化：

*   仅传输物理变化，例如当物体（玩家、小行星）的加速度发生变化并更改为一般游戏状态（小行星/玩家爆炸、射击、得分）时
*   当您这样做时，还要传输该对象的当前位置以补偿延迟（即使只有 3 毫秒，对象的位置也会略有不同）并更新适当对象的位置（有时看起来对象可能会跳了一下，但几乎每场比赛都有这个问题）。
*   其他一切（世界物理，如重力）都可以在客户端本身上计算，不需要通过网络传输。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T16:57:24.037

基于对我在gamedev上提出的相同问题的回答：[https](https://gamedev.stackexchange.com/questions/26840/send-regular-keyboard-samples-or-keyboard-state-changes-over-network) : //gamedev.stackexchange.com/questions/26840/send-regular-keyboard-samples-or-keyboard-state-changes-over-network 似乎一致仅在键盘状态发生变化时发送键盘状态（仅在按下键或按下键时）。这几乎不会产生任何流量。它需要确保这些消息是可靠的。这将是一个挑战，因为消息是时间紧迫的。即，即使客户端可以继续移动他们自己的播放器（ala 客户端预测），其他客户端也需要通过服务器“实时”获知其竞争对手状态的变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-16T09:22:18.793

另一种方法是握手数据包并重复重新发送，直到实现握手。当然，您需要在两个方向上执行此操作。在过去的串行时代，这可以通过四根控制线完成，每端两根。

# php - 使用 PHP 创建带有任务计划的日历

> ID：10024182
> 
> 赞同：1
> 
> 时间：2012-04-05T07:17:18.750
> 
> 标签：php, javascript, jquery, calendar

我想在图片中创建一个具有以下功能的日历![在此处输入图像描述](../Images/436150d222c6e126b31c2da455a1e3ff.png)

我想在左栏中有时间，在底部区域有任务。我想从底部列表中拖动一个任务并将其安排在指定日期的指定时间。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T07:36:52.470

查看[http://arshaw.com/js/fullcalendar-1.5.3/demos/external-dragging.html](http://arshaw.com/js/fullcalendar-1.5.3/demos/external-dragging.html)。

# blackberry - 黑莓 - 应用程序已经在商店; 我可以更改代码签名密钥吗

> ID：10024184
> 
> 赞同：3
> 
> 时间：2012-04-05T07:17:22.247
> 
> 标签：blackberry

一段时间前，我们为客户构建了一个应用程序，用我们的公司密钥对其进行了签名，然后将其发布在 BlackBerry App World 商店中。

此后，我们终止了与客户的合同。

他们现在在应用程序上做了进一步的（内部）开发，并要求我们提供我们的签名密钥，以便他们可以签名。该请求的答案是一个非常响亮的“不！”。

我的问题是：

*   如果他们申请**新的签名密钥**，并使用该密钥签署新版本，他们是否能够上传新应用并替换应用世界上的当前应用？即作为**版本 2.x**

（或者密钥是否可以识别应用程序？例如，在 Android 上，您必须使用相同的密钥对应用程序进行签名才能提交新版本）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T07:19:08.610

显然更改签名密钥不是问题：

[应用程序的签名密钥是否必须与供应商匹配？](http://supportforums.blackberry.com/t5/BlackBerry-App-World-Development/Does-the-signing-key-for-an-app-have-to-match-the-vendor/td-p/1367251)

# java - 从 src 复制到 Eclipse IDE 中的目标时，Excel 文件损坏

> ID：10024185
> 
> 赞同：22
> 
> 时间：2012-04-05T07:17:22.277
> 
> 标签：java, eclipse, maven

我对eclipse有一个奇怪的问题。当我将 .xls 文件放在`src/test/resources`路径中时，eclipse 会将其复制到`target`路径中。

但是，目标路径中的文件不再相同。我无法再在 MS Excel 中打开它，当我比较这两个文件时，我看到了一些二进制差异。这怎么可能发生？

PS：我的eclipse环境是用maven生成的。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-05T08:22:00.827

感谢上面的答案，我们发现了如何处理这个问题：

```
 <plugin>
      <artifactId>maven-resources-plugin</artifactId>
      <version>2.5</version>
      <configuration>
        <encoding>UTF-8</encoding>
        <nonFilteredFileExtensions>
          <nonFilteredFileExtension>xls</nonFilteredFileExtension>
        </nonFilteredFileExtensions>
      </configuration>
    </plugin> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-05T07:22:22.603

我遇到了同样的问题，这是由过滤和更改我的 Excel 文件的 Maven 资源插件引起的。

为防止这种情况发生，请添加如下内容（请参阅[Maven 文档](http://maven.apache.org/plugins/maven-resources-plugin/examples/include-exclude.html)）：

```
<build>               
       <resources>
           <resource>
               <filtering>true</filtering>
               <directory>src/test/resources</directory>
               <excludes>
                   <exclude>**/*.xls</exclude>
               </excludes>
         </resource>
... 
```

更新：复制资源，但不过滤

```
<resources>
      <resource>
        <directory>src/test/resources</directory>
        <filtering>true</filtering>
        <excludes>
          <exclude>**/*.xls</exclude>
        </excludes>
      </resource>
      <resource>
        <directory>src/test/resources</directory>
        <filtering>false</filtering>
        <includes>
          <include>**/*.xls</include>
        </includes>
      </resource>
      ...
    </resources> 
```

# javascript - 在rails中遵循javascript字符串/转义引号有什么问题

> ID：10024189
> 
> 赞同：1
> 
> 时间：2012-04-05T07:17:42.777
> 
> 标签：javascript, ruby-on-rails

在我的 Rails 应用程序中，我正在使用日历助手

```
cell.innerHTML = '<%= calendar_for('start_date')%>'; 
```

标签生成的 html 给出了语法错误。

```
cell.innerHTML = '<img alt="Calendar" 
                       class="calendar-trigger" 
                       id="start_date_trigger"     
                       src="/application/images/calendar.png?13282" />

<script type="text/javascript">
    Calendar.setup({inputField : 'start_date', 
                    ifFormat : '%Y-%m-%d', 
                    button :'start_date_trigger' });
</script>'; 
```

这些问题的快速解决方案是什么？

如何使用 Rails 转义引号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:46:54.180

您可以使用 escape_javascript 助手

```
cell.innerHTML = '<%= escape_javascript(calendar_for('start_date')) %>'; 
```

# jung - 如何使用 JUNG 让每个 KKLayout 点击显示不同的图形？

> ID：10024199
> 
> 赞同：0
> 
> 时间：2012-04-05T07:18:34.583
> 
> 标签：jung, graph-visualization

我有一个名为 KKLayout 的 menuItem。我想知道是否每次我都会出现不同的图形

单击该项目。我试过写一些代码。但它每次都显示相同的图形。

你能帮我吗？而且我发现有时几个边缘会挥动而不会停留

仍然，为什么会发生这种情况？我该如何解决？

![KKLayout图形](../Images/efcd6cd8b0ea575c2e6998de4b6eafb6.png)

# android - VideoView onErrorListener

> ID：10024206
> 
> 赞同：0
> 
> 时间：2012-04-05T07:19:02.477
> 
> 标签：android, android-videoview

是否可以处理`OnErrorLisenter`for 中的错误以`VideoView`使其继续播放视频。我已经尝试了以下代码，但它只是冻结了。这个问题在蜂窝 3.2 中似乎很常见，每 5-10 分钟它就会出现视频流问题并崩溃。

下面的错误处理程序会导致视频冻结约 1 分钟，然后再次开始播放。我还尝试重新初始化有效的视频视图，但我似乎无法捕获正在播放的视频的当前位置，以便寻找到该位置并从出错的位置继续播放。

```
vw.setOnErrorListener(new MediaPlayer.OnErrorListener() {

        public boolean onError(MediaPlayer mp, int what, int extra) {           
            if (showUri != null) {
                Log.v("ShowViewerActiity", String.valueOf(mp.getCurrentPosition()));

            }
            mp.start();
            return true;
        }
    }); 
```

# visual-studio - 在 Visual Studio 2010 中调试 asm：我们可以像在 GDB 中那样采取多个步骤吗？

> ID：10024209
> 
> 赞同：2
> 
> 时间：2012-04-05T07:19:13.383
> 
> 标签：visual-studio, visual-studio-2010, debugging, .net-assembly, visual-studio-debugging

在 gdb 中，我可以输入

```
stepi 100 
```

向前执行 100 步机器指令。

Visual Studio 调试器中是否有等价物？[命令窗口中的命令“p”将“跳过”，命令“t”将根据此处](http://msdn.microsoft.com/en-us/library/c3a0kd3x.aspx)的参考“步入” 。

所以当然，我试过了：

```
p 100
100 p 
```

但我只是得到：

> 命令“Debug.StepOver”不接受参数或开关。

有谁知道如何在 VS 2010 调试器中复制 gdb 的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:24:29.077

您可以定义自己的接受命令行参数的宏命令。然后您可以使用 DTE.ExecuteCommand("p") 循环执行 p 命令。当然，这不是最快的方法，但它应该有效。

# c - 如何取回现有的 msg 队列 id

> ID：10024211
> 
> 赞同：2
> 
> 时间：2012-04-05T07:19:14.973
> 
> 标签：c, linux, unix

我正在使用 msgget() 系统调用来获取新的 msg 队列。我在其中使用了 IPC_CREAT 和 IPC_EXCL 标志。就像 `message_queue = msgget(ftok("/tmp", 100), (0666 | IPC_CREAT | IPC_EXCL));` 现在，当我的 prog 意外存在时，味精队列仍然存在，我无法重新创建味精队列。所以，我的问题是“我怎样才能取回现有的 msg 队列的 ID？”

顺便说一句， msg queue 将其 id 存储在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:43:48.423

Regd "我怎样才能取回现有的 msg 队列的 ID？"

来自 man msgget

```
 If  msgflg  specifies both IPC_CREAT and IPC_EXCL and a message queue already exists for key, then msgget() fails with errno set to EEX-
   IST.  (This is analogous to the effect of the combination O_CREAT | O_EXCL for open(2).) 
```

尝试不使用 IPC_EXCL 标志。

注册。msg queue在哪里存储它的id

从人 proc

```
 /proc/sysvipc
          Subdirectory  containing  the  pseudo-files  msg,  sem  and  shm.  These files list the System V Interprocess Communication (IPC)
          objects (respectively: message queues, semaphores, and shared memory) that currently  exist  on  the  system,  providing  similar
          information  to that available via ipcs(1).  These files have headers and are formatted (one IPC object per line) for easy under-
          standing.  svipc(7) provides further background on the information shown by these files. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:10:13.320

下面是一个尝试回答这个问题，如果有用的话，功劳应该去[The Linux Programmer's Guide](http://tldp.org/LDP/lpg-0.4.pdf)。如果它被确定为无关紧要或什么的，错误都是我的。

ipcs 命令可用于获取所有 System V IPC 对象的状态。

```
ipcs -q: Show only message queues
ipcs -s: Show only semaphores
ipcs -m: Show only shared memory
ipcs --help: Additional arguments 
```

ipcrm 命令可用于从内核中删除 IPC 对象。虽然 IPC 对象可以通过用户代码中的系统调用来删除（我们稍后会看到如何），但经常需要手动删除 IPC 对象，尤其是在开发环境中。

它的用法很简单：

```
ipcrm <msg | sem | shm> <IPC ID> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T07:40:43.570

不要尝试第二次*重新创建*消息队列。您`IPC_CREAT | IPC_EXCL`第二次的使用导致`msgget`失败。

来自[msgget的手册页](http://linux.die.net/man/2/msgget)

> 如果**msgflg**同时指定了**IPC_CREAT**和**IPC_EXCL**并且 key 的消息队列已经存在，那么**msgget** () 将失败并且**errno**设置为**EEXIST**。（这类似于组合**O_CREAT | O_EXCL** 对**open** (2) 的影响。）

所以你仍然可以继续使用`msgget`第二次，但只使用`IPC_CREAT`标志。还要注意检查两者的返回值，`ftok`并将`msgget`错误值（如果有）与手册页进行比较。还要检查`errno`。

此外，如果您对现有消息队列有太多问题，您可以通过调用`msgctl`标志`IPC_RMID`来删除它

此外，关于味精队列存储位置的另一个答案。您可能很想删除一个麻烦的消息队列 :) 但请注意，它们是位于虚拟文件系统 /proc 上的只读文件！

# ruby - RangeError：bignum 太大而无法转换为“long”

> ID：10024212
> 
> 赞同：1
> 
> 时间：2012-04-05T07:19:15.940
> 
> 标签：ruby, irb, bignum

```
num = "0000001000000000011000000000000010010011000011110000000000000000"
for n in 0...num.length 
   temp = num[n] 
   dec =  dec + temp*(2**(num.length - n - 1))
end
puts dec 
```

当我在 irb 中运行此代码时，以下错误消息是输出。当我在 python 中编译相同的逻辑时，它工作得非常好。我已经用谷歌搜索了“RangeError：bignum 太大而无法转换为‘long’：但没有找到相关答案。请帮助我:(提前致谢。

```
RangeError：bignum 太大而无法转换为*'long'
        from (irb):4:in
        来自 (irb):4:in each'block in irb_binding'
        from (irb):2:in
        来自 (irb):2
        来自 C:/Ruby193/bin/irb:12:in `'
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T07:46:32.447

你得到的`num[n]`是一个字符串，而不是一个数字。我将您的代码重写为更惯用的 Ruby，这就是它的样子：

```
dec = num.each_char.with_index.inject(0) do |d, (temp, n)| 
  d + temp.to_i * (2 ** (num.length - n - 1))
end 
```

然而，最惯用的可能是`num.to_i(2)`，因为正如我所见，您正在尝试从二进制转换为十进制，这正是它所做的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T07:29:31.440

试试这个

```
num = "0000001000000000011000000000000010010011000011110000000000000000"
dec = 0
for n in 0...num.length 
   temp = num[n] 
   dec =  dec + temp.to_i * (2**(num.length - n - 1))
end
puts dec 
```

# asp.net - ASP 过滤器函数 -> C# 等效函数

> ID：10024229
> 
> 赞同：0
> 
> 时间：2012-04-05T07:21:45.783
> 
> 标签：asp.net, asp-classic

目前在工作中，我需要将旧的 ASP 页面翻译成 C# (asp.net)。在 asp 页面上，我遇到了 filter 函数，我想知道 C# 是否有与之等效的函数？

```
b = Filter(servicePeriodsArray,CStr(Year(billingDate) & Month(billingDate))) 
```

昨天我把它翻译成下面的一段代码。

```
string lookup1 = billingDate.Year.ToString() + billingDate.Month.ToString();
          for (int k = 0; k < servicePeriodsArray.Length; k++)
          {
              if (servicePeriodsArray[k].Contains(lookup1))
              {
                   b[c] = servicePeriodsArray[k];
                   c++;
              }
          } 
```

由于我是旧 ASP 语言的完全“菜鸟”，我想知道我的翻译是否正确。如果你们中的任何人知道用于 ASP 函数过滤器的 C# 等效函数，请告诉我，或者如果你们可以帮助我进行翻译，那将是很棒的。

亲切的问候凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:39:35.543

使用 LINQ Where 运算符将是最简单的方法。

```
string lookup1 = billingDate.Year.ToString() + billingDate.Month.ToString();
var b = servicePeriodsArray.Where(i => i.Contains(lookup1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:44:48.657

```
b = servicePeriodsArray.Where(value = value.Contains(billingDate.Year.ToString() + billingDate.Month.ToString()); 
```

# mysql - 在 Ruby 中运行 mysql2 时出错

> ID：10024236
> 
> 赞同：0
> 
> 时间：2012-04-05T07:22:19.077
> 
> 标签：mysql, ruby

对这个错误进行了排序 -

[红宝石mysql2错误](https://stackoverflow.com/questions/9936523/ruby-mysql2-error)

我现在收到此错误消息 -

```
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': 193: %1 is not a valid Win32 application.
C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/1.9/mysql2.so (LoadError) 
```

有什么想法吗？

干杯马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:28:52.977

从[这里](http://instantrails.rubyforge.org/svn/trunk/InstantRails-win/InstantRails/mysql/bin/)简单下载**libMySql.dll**，然后把它放到 ruby​​\bin 中。

# android - Android：键盘未在设备上显示编辑区域

> ID：10024242
> 
> 赞同：0
> 
> 时间：2012-04-05T07:22:58.063
> 
> 标签：android, keyboard, android-edittext

我的 android 应用程序中有一个与键盘相关的问题。设备上的键盘未显示编辑视图。

模拟器是在 Android3.3 上设置的，它显示的键盘如下：

![在此处输入图像描述](../Images/b2bc132646d0fa9c335d4d8e0a534dde.png)

输入的文本“新”在键盘顶部可见。这个键盘占据了屏幕的一半。

我在设备上也有相同的 android 版本。在设备上显示此键盘，但我从键盘输入的内容不会出现在键盘顶部。但是我输入的任何内容实际上都会被捕获并从键盘返回将在`edittext`.

我还在 Android2.2 的设备上对此进行了测试，它还使用它全屏显示键盘`editbox`。那也很好。问题出在 Android3.3 设备键盘上。

我的 EditText 代码是：

> ```
>  edittext = new EditText(this);
>     edittext.setImeOptions(EditorInfo.IME_ACTION_DONE);
>     edittext.setOnEditorActionListener(new OnEditorActionListener() {
>         public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
>             if (actionId == EditorInfo.IME_ACTION_DONE ||
>                     event.getAction() == KeyEvent.ACTION_DOWN &&
>                     event.getKeyCode() == KeyEvent.KEYCODE_ENTER) {                     
>                 InputMethodManager imm = (InputMethodManager)v.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
>                 imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
>                 return true;    
>             }
>             return false;
>         }
>     }); 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:40:31.093

您可以使用 Android 3.0+ 应用在 AndroidManifest.xml 中尝试此配置

```
<application android:hardwareAccelerated="true" ... /> 
```

# jquery - 检查 jQuery 使用情况

> ID：10024248
> 
> 赞同：0
> 
> 时间：2012-04-05T07:23:36.093
> 
> 标签：jquery

我喜欢在网站上制作的 jQuery 动画，我想了解他们是如何做到的。是否可以检查您不拥有的网站的 jQuery？我需要什么工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:24:36.297

你可以使用firebug、chrome开发工具、IE开发工具，甚至fiddler来实现。简单地查看网页的来源甚至可能会让您到达那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T07:27:23.230

因为 javascript 是在客户端（浏览器）上解释的，所以可以通过查看源代码来查看它。它通常在`<head>`标签中或标签底部`<body>`，在`<script>`标签中。javascript 可能位于不同的文件中，这由`href`属性指示。

然而，源有可能被缩小。这意味着变量名被替换为非常小的名字，比如`a`，并且所有的空格和注释都被删除了。这使得阅读源代码变得更加困难，但是有一些工具可以格式化脚本并使其更具可读性。但是，您不会得到变量名称和注释。

# web-services - 使用 webservice 创建一个新的 wordpress 用户

> ID：10024249
> 
> 赞同：1
> 
> 时间：2012-04-05T07:23:36.530
> 
> 标签：web-services, wordpress, registration

我正在为使用 JAVA 编写的移动应用程序提供网络服务。我正在我的手机中创建一个注册过程。因此，当我调用网络服务时，我必须创建一个 Wordpress 用户。

我想知道有什么方法可以直接从我的手机调用 wordpress 插件或一些 wordpress WS 代码来插入 wordpress 用户。

提前致谢。

迪利普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:56:57.227

WordPress forumn 上的这个帖子详细解释了你想要做什么。[http://wordpress.org/support/topic/add-user-via-php](http://wordpress.org/support/topic/add-user-via-php)

# windows - SVN 和 Apache - 有什么优势吗？

> ID：10024251
> 
> 赞同：2
> 
> 时间：2012-04-05T07:23:40.090
> 
> 标签：windows, apache, svn, http

我只是将 Apache 和 SVN 连接在一起。不知道我在期待什么，但我想会更令人兴奋一些。让我想知道有什么用 - 根据[Jeff Atwood](http://www.codinghorror.com/blog/2008/04/setting-up-subversion-on-windows.html)在评论中的说法：

> 在 Apache 中设置 svn 更复杂……这对我们有什么好处？某种网络用户界面？使用 80 端口？

如果我想要一个 UI，那么已经编写了几个 PHP 接口......这就引出了一个问题，Apachifying SVN 安装有什么好处吗？安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T07:28:22.293

通常，我将 Apache 设置为各种 VCS 的前端：

*   https通信（点对点加密）
*   验证：
    *   您可以为通过 http 公开的服务要求“有效用户”
    *   您可以将该身份验证链接到您的公司 LDAP，以便使用与 Windows 会话相同的登录名/密码
*   服务列表（您可以在您的域后面聚合许多服务，`https://yourdomain/svn`只是其中之一：`https://yourdomain/jira`, `https://yourdomain/fisheye`, ...）

# jquery-mobile - 在 Java EE 上下文中使用 MVC 框架的 jQueryMobile

> ID：10024265
> 
> 赞同：1
> 
> 时间：2012-04-05T07:24:34.237
> 
> 标签：jquery-mobile

我正计划为一项商业需求开发一个移动 Web 应用程序。我正在考虑使用 jQueryMobile 框架。这应该是可以与 jQueryMobile 结合使用的理想 MVC 框架。这将在 Java EE 环境中。

这个项目是一种与 LMS 的集成项目。LMS 具有标准 API。这将是 Java EE 上下文中与 jQueryMobile 一起使用的最佳 MVC 框架。请提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:30:43.873

由于您想在 Java EE 环境中使用 MVC 框架，Struts2 或 Spring MVC 都适合。它们都是完整的框架，几乎可以满足开发人员构建网站的所有要求，包括为 jquery 移动 Web 应用程序提供服务。

您将能够使用任一框架的 JSON 数据传输实现，并且您将拥有完整的本地化、验证、安全性、数据库后端通信和事务、错误处理。

不过学习曲线相当陡峭。如果您在其中一种方面有任何经验，那将是最好的选择，除非您有足够的时间研究它，尽管其中一种相对于另一种的优势可能很小。您的选择不太可能受到 LMS 及其 API 的影响，这两种框架都可以提供合适的位置来编写交互代码。

# ios - 为什么这段代码可以在 Xcode 模拟器上运行，但不能在设备上运行？

> ID：10024266
> 
> 赞同：3
> 
> 时间：2012-04-05T07:24:34.517
> 
> 标签：ios, xcode, macos, kernel, bsd

我真的希望有人向我解释。我正在编写一个使用它的设备 mac 地址的应用程序，并且此代码在模拟器上完美运行，但在设备上不起作用。

我从[Objective-C 中的 Get router mac (without system call for ARP) 问题中得到了这段代码](https://stackoverflow.com/q/2189200)

```
#include <stdio.h>

#include <sys/types.h>
#include <stdio.h>
#include <string.h>
#include <sys/socket.h>
#include <net/if_dl.h>
#include <ifaddrs.h>
#include <net/if_types.h>

char*  getMacAddress(char* macAddress, char* ifName) 
{
   int  success;
   struct ifaddrs *addrs;
   struct ifaddrs *cursor;
   const struct sockaddr_dl *dlAddr;
   const unsigned char* base;
   int i;

   success = getifaddrs(&addrs) == 0;
   if (success) 
   {
       cursor = addrs;
       while (cursor != 0) 
       {
           const struct sockaddr_dl *socAddr = 
           (const struct sockaddr_dl *)cursor->ifa_addr;
           _Bool afLinkFamily = (cursor->ifa_addr->sa_family == AF_LINK);
           /* Ethernet CSMA/CD */
           _Bool sdlIFTEther = (socAddr->sdl_type == IFT_ETHER);

           if ((afLinkFamily) && 
                sdlIFTEther &&
                strcmp(ifName,  cursor->ifa_name) == 0) 
           {
               dlAddr = (const struct sockaddr_dl *) cursor->ifa_addr;
               base = 
                   (const unsigned char*)&dlAddr->sdl_data[dlAddr->sdl_nlen];
               strcpy(macAddress, ""); 
               for (i = 0; i < dlAddr->sdl_alen; i++) 
               {
                   if (i != 0) 
                   {
                       strcat(macAddress, ":");
                   }
                   char partialAddr[3];
                   sprintf(partialAddr, "%02X", base[i]);
                   strcat(macAddress, partialAddr);

               }
           }
           cursor = cursor->ifa_next;
       }

       freeifaddrs(addrs);
   }    
   return macAddress;
} 
```

它给了我一个错误：

```
'net/if_types.h' file not found 
```

所以我的问题是为什么会发生这种情况，在模拟器和设备上运行有什么区别？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:47:29.570

iOS 设备 SDK 中根本没有头文件。无论出于何种原因，Apple 都不希望您使用它。如果你只是想让代码工作，你可以尝试提取所需的定义：

```
#define IFT_ETHER   0x6     /* Ethernet CSMACD */ 
```

并删除线

```
#include <net/if_types.h> 
```

完全地。尽管这破坏了与可以将该常量定义为其他值的平台的兼容性。

# java - 如何在 Spring MVC 错误处理程序中打印堆栈跟踪

> ID：10024268
> 
> 赞同：1
> 
> 时间：2012-04-05T07:24:37.590
> 
> 标签：java, spring-mvc

我在我的应用程序中使用 Spring SimpleMappingExceptionResolver

```
<bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
   <property name="exceptionMappings">
      <map>
         <entry key="Exception" value="error.htm"/>
      </map>
    </property>
    <property name="defaultErrorView" value="error.htm" />
</bean> 
```

我的错误处理程序也很简单

```
@Controller
@RequestMapping("error.htm")
public class ErrorController {

    @RequestMapping(method = RequestMethod.GET)
    public ModelAndView getErrorReport(HttpServletRequest request) {

        return new ModelAndView("/WEB-INF/jsp/error.jsp"); 
        }
    @RequestMapping(method = RequestMethod.POST)
    public ModelAndView getErrorPostReport(HttpServletRequest request,HttpServletResponse response) {
        TreeMap<String,Object> map=new TreeMap<String,Object>();
        map.put("isDataChange", true);
        map.put("isBigError", true);
        return new ModelAndView(JSONView.RenderObject(map, response));
        }

} 
```

如何在我的错误控制器中打印异常消息和异常堆栈跟踪（或通过电子邮件发送）？

提前致谢

更新

谢谢回复。我想在 jsp 和控制台中打印堆栈跟踪。我还希望访问 ErrorController 本身中的对象，以便我可以将该信息用于电子邮件日志（因为某些调用是基于 ajax 的（它们使用 POST），error.jsp 在那里将没有用，所以我需要一些方法来访问该信息在控制器本身）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T08:51:54.077

由于您的`getErrorReport`方法除了返回 jsp 页面之外什么都不做，您可以在 bean 声明中返回它：

```
<property name="defaultErrorView" value="/WEB-INF/jsp/error.jsp" /> 
```

在页面中，您可以访问`exception`模型对象：

```
<c:forEach items="${exception.stackTrace}" var="element">
    <c:out value="${element}">
</c:forEach> 
```

如评论中所述。

# javascript - 使用 Cloud9 IDE 时如何放入 Jquery 文件？

> ID：10024270
> 
> 赞同：2
> 
> 时间：2012-04-05T07:24:48.750
> 
> 标签：javascript, jquery, cloud9-ide

我正在为我的 JavaScript 项目使用 cloud9 ide。我尝试了很多，但我真的无法将 JQuery 文件添加到我的项目中。我唯一的想法是复制文件内容并将其粘贴到在 Cloud9 IDE 上创建的新文件中。是否有导入 JavaScript 文件的解决方案，以便轻松地将这些内容包含到我的项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:03:11.423

您可以将 jQuery 文件拖放到 Cloud9 上的文件树中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:00:08.723

在 Github 上获取一个 fork： [https ://github.com/jquery/jquery](https://github.com/jquery/jquery)

登录您的 Cloud9 帐户并在您的 github 项目中找到 fork（假设您已将 Github 连接到您的帐户）

# c# - VHD 驱动器的服务器路径

> ID：10024272
> 
> 赞同：0
> 
> 时间：2012-04-05T07:24:56.750
> 
> 标签：c#, azure-storage

我想获取 VHD 驱动器的服务器路径。我正在开发 azure web 应用程序。我上传了一些文件并将其保存到 Test.VHD 驱动器中（比如说）。这是一些 blob 容器“驱动器”（例如）内的云驱动器。我通过以下方式安装和映射它：

```
driveLetter = drive.Mount(localCache.MaximumSizeInMegabytes - 20, DriveMountOptions.Force); 
```

“driveLetter”是“A:\”（比如说）。现在我将所有 pdf 文件名显示为页面上的链接按钮。单击这些文件时，我想使用 javascript 函数在浏览器中打开该 pdf 文件

```
window.open(pdfPath, pdfName, 'scrollbars=yes, resizable=yes'); 
```

**我的问题是我必须作为“pdfPath”参数传递什么？**

我有路径“A:\Uploads\pdfName.pdf”。但我不能通过它。我必须像[http://servername:port/path](http://servername:port/path)一样传递它，以便用户可以查看它。

但我不知道如何将其转换为[http://servername:port/path](http://servername:port/path)之类的链接。通过这样做，我可以在浏览器中查看 pdf。

请帮我，

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T18:05:59.677

那里有一个小混乱。

从技术上讲，Azure 驱动器是存储在 Azure Blob 存储中的 Blob，因此它具有 URL。相比之下，无法使用 URL 直接访问 Azure 驱动器的内容。如果要公开 Azure 驱动器中包含的文件，则必须使它们可以从 Windows Azure 实例访问。

您可以通过在装载驱动器时将 Azure 驱动器映射为 IIS 中的虚拟文件夹来执行此操作。如果您在 .Net 中编码，请查看 System.Web.Administration（您必须将其包含在您的项目中，它是 IIS 的一部分，而不是直接包含在 CLR 中）。如果您使用其他语言编写代码，最简单的方法是调用 appcmd.exe 来定义虚拟文件夹。

皮埃尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T02:11:04.610

我意识到这并不能直接回答你的问题，但是......我认为你会通过写 Azure Drives 看到你正在做的事情的一些限制：

*   在任何给定时间，只有一个 Role 实例可以对 vhd 具有写访问权限。这意味着您的解决方案可以扩展到一个实例之外，除非您每个实例都有一个唯一的 vhd（或者每个 add'l 实例只是创建一个只读快照）
*   您现在必须通过您的角色实例来访问单个文件，因为您无法提供指向外部世界的 vhd 内文件的直接链接
*   要管理任何文件，您必须安装 Azure 驱动器。这意味着您无法从 Windows Azure 之外的代码管理任何文件（Azure 驱动器只能由 Windows Azure 角色实例安装）

我建议将单个文件写入单个 blob。与在您的方案中使用 Azure 驱动器相比，这有几个优点：

*   任何实例都可以读/写每个单独的文件（每个文件在一个单独的 blob 中）
*   您可以选择在您的网页中嵌入直接文件 url。这提供了对 blob 的直接访问，而无需通过您的角色实例之一进行路由（由于不需要 IIS，这反过来又减轻了所述实例的负载）
*   You can choose to make individual blobs private, and *still* provide url's to private blobs, via Shared Access Signatures
*   You can manage individual blobs remotely, and there are several 3rd-party tools available to help you do this.
*   If you wanted to, you could enable CDN (edge caching) for your storage, which then lets you point your URL's to a CDN link instead of directly to the source blob. This is limited to public-facing blobs.

# html - 具有 HTML 内容格式的水晶报表

> ID：10024273
> 
> 赞同：2
> 
> 时间：2012-04-05T07:25:02.330
> 
> 标签：html, css, crystal-reports, formatting, text-styling

你们中有人从事将 HTML 数据填充到水晶报表中的工作吗？

我正在使用 Visual Studio 2010。我有一个来自 DB 的 XML 数据。它能够使用 XSL 转换成 HTML。现在我的下一个任务是将它放入水晶报表中。

任何提示都会很棒。因为所有在线资源都只是给我提供了与创建数据集和执行存储过程等相关的结果。

我能够将我的 HTML 内容拉到水晶报告中。现在嵌入式样式无法应用。我需要调整的任何线索？

提前致谢。

问候， 帕万 N

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:49:39.377

您是否将 HTML 推送到文本对象中？您是否将解释设置为 HTML？

请注意，水晶实际上能够解释的样式和 HTML 的级别是有限的。我找到了这个清单：

支持的标签有：

*   html
*   身体
*   div（导致段落中断）
*   tr（仅导致段落中断；不保留表格的列结构）
*   跨度
*   字体
*   p（导致段落中断）
*   br（导致段落中断）
*   h1（导致段落中断，使字体加粗和两倍默认大小）
*   h2（导致段落中断，使字体粗体和默认大小的 1.5 倍）
*   h3（导致段落中断，使字体粗体和 9/8 默认大小）
*   h4（导致段落中断，使字体变粗）
*   h5（导致段落中断，使字体粗体和 5/6 默认大小）
*   h6（导致段落中断，使字体粗体和 5/8 默认大小）
*   中央
*   大（将字体大小增加 2 磅）
*   小（如果字体大小为 8 点或更大，则将字体大小减小 2 点）
*   b
*   一世
*   s
*   罢工
*   你

支持的属性是：

*   对齐
*   脸
*   尺寸
*   颜色
*   风格
*   字体系列
*   字体大小
*   字体样式
*   字体粗细

这里：[http ://forums.asp.net/t/1209306.aspx/1](http://forums.asp.net/t/1209306.aspx/1)

此外，显然该`a`标签已添加到 CR 2008 SP3 中。可能还有更多...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:28:33.167

最后，我终于找到了一个突破，它在性能和内容质量上都非常完美。

首先，无论我想要什么内容，我都会准备一个 html 字符串和

要获取 PDF，请使用 WKHTMLTOPDF.exe 要使用 HTML 准备图像，请使用 WKHTMLTOIMAGE.exe 和我创建的相同图像到一个字节 [] 并添加一个新的水晶报告。

然后 byte[] 将被输入到水晶报表中的控件。

它工作得很好。不需要 itextsharp 或任何其他第三方命令工具来打印图像、打印 pdf 和打印 html。我现在正在使用带有图像的水晶报告做所有事情。

谢谢大家。

问候， 帕万 N

# javascript - 如何使用 Javascript 获取位于锚标记侧的文本框的值？

> ID：10024278
> 
> 赞同：0
> 
> 时间：2012-04-05T07:25:30.033
> 
> 标签：javascript, asp.net, textbox, anchor

我在锚标签中有一个文本框。我想使用 JavaScript 来获得它的价值。我的代码是

```
<a rel="tooltip" title="This information comes from the Income/Expense worksheet.">
  <span class="TooltipTextBox">    
          <asp:TextBox ID="txt_Helo" runat="server" CssClass="small_text_box"  ReadOnly="true" TabIndex="-1" BackColor="#CCCCCC" size="15">
          </asp:TextBox>
  </span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:29:29.977

我会建议 JQuery（编辑：如果您在您的网站上使用更多 JS 而不仅仅是使用它来获取此值）。如果您只想要文本，这应该可以：

```
var Text = $("#<%= txt_Helo.ClientID %>").val(); 
```

基本上，您使用 ASP.NET 分配给该控件的 ID 访问 TextBox。

没有 JQuery：

```
var Text = document.getElementById("<%= txt_Helo.ClientID %>").value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T07:32:40.593

首先，您需要找出文本框的客户端 ID。实际上，此 ID 与文本框是否包含在 acnhor 中无关。因此，您可以使用 ASP.NET 并执行以下操作：

```
<script>var clientID = "<%=txt_hello.ClientID%>"</script> 
```

然后你可以访问带有 ID 的文本框：

```
<script>var txtBoxElement = document.getElementById(clientID);</script> 
```

然后您可以访问 txtBoxElement 的值。

另一种方法是纯粹基于 JS，但您不知道确切的客户端 ID，因此使用例如 jQuery 来利用 css 选择器：

```
<script>var textBoxVal = $("a span.TooltipTextBox input").val();</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T07:32:45.040

我想你在 asp.net 中不需要做更多的事情

```
var value = document.getElementById('<% =txt_Helo.ClientID %>').value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T07:28:52.767

我对asp不熟悉，所以，不确定是什么`<asp:TextBox>`产生的，但如果它有一个id，为什么它是一个锚的孩子有关系？为什么不直接使用它的 id 来获取它的值呢？

# bash - 如何在 Makefile 中使用 shell 命令

> ID：10024279
> 
> 赞同：126
> 
> 时间：2012-04-05T07:25:53.813
> 
> 标签：bash, makefile, echo

我正在尝试使用`ls`其他命令（例如 echo、rsync）中的结果：

```
all:
    <Building, creating some .tgz files - removed for clarity>
    FILES = $(shell ls)
    echo $(FILES) 
```

但我得到：

```
make
FILES = Makefile file1.tgz file2.tgz file3.tgz
make: FILES: No such file or directory
make: *** [all] Error 1 
```

我试过使用`echo $$FILES`,`echo ${FILES}`和`echo $(FILES)`，但没有运气。

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2012-04-05T07:39:00.367

和：

```
FILES = $(shell ls) 
```

像这样缩进下面`all`，这是一个构建命令。所以这会展开`$(shell ls)`，然后尝试运行该命令`FILES ...`。

如果`FILES`应该是`make`变量，则需要在配方部分之外分配这些变量，例如：

```
FILES = $(shell ls)
all:
        echo $(FILES) 
```

当然，这意味着在运行任何创建 .tgz 文件的命令*之前*`FILES`将设置为“输出自`ls`” 。（尽管[Kaz 指出](https://stackoverflow.com/a/10081105/1256452)该变量每次都会重新扩展，因此最终它将包含 .tgz 文件；为了提高效率和/或正确性，一些 make 变体必须避免这种情况^(。1)）*`FILES := ...`*

 *如果`FILES`应该是一个 shell 变量，你可以设置它，但你需要在 shell-ese 中进行，没有空格，并引用：

```
all:
        FILES="$(shell ls)" 
```

但是，每一行都由一个单独的 shell 运行，因此该变量将无法保存到下一行，因此您必须立即使用它：

```
 FILES="$(shell ls)"; echo $$FILES 
```

这有点傻，因为 shell 会`*`首先为你扩展（和其他 shell glob 表达式），所以你可以：

```
 echo * 
```

作为你的shell命令。

最后，作为一般规则（并不真正适用于这个例子）：正如[世界语](https://stackoverflow.com/users/1691599/esperanto)在评论中指出的那样，使用输出`ls`并不完全可靠（一些细节取决于文件名，有时甚至取决于版本`ls`；一些版本的`ls`尝试清理输出在某些情况下）。因此，正如[l0b0](https://stackoverflow.com/users/96588/l0b0)和[idelic 所](https://stackoverflow.com/users/109744/idelic)指出的，如果您使用的是 GNU make，您可以使用`$(wildcard)`并`$(subst ...)`完成其内部的所有内容`make`（避免任何“文件名中的奇怪字符”问题）。（在`sh`脚本中，包括 makefile 的配方部分，另一种方法是用来`find ... -print0 | xargs -0`避免跳过空格、换行符、控制字符等。）

* * *

¹ [GNU Make 文档进一步指出 POSIX`::=`在 2012 年添加了分配](https://www.gnu.org/software/make/manual/html_node/Flavors.html#Flavors)。我还没有找到指向 POSIX 文档的快速参考链接，我也不知道哪些`make`变体支持`::=`赋值，尽管 GNU make 今天支持赋值，其含义与 相同`:=`，即现在通过扩展进行赋值。

请注意，`VAR := $(shell command args...)`它也可以拼写`VAR != command args...`为多种`make`变体，据我所知，包括所有现代 GNU 和 BSD 变体。这些其他变体没有`$(shell)`因此使用`VAR != command args...`在更短*和*在更多变体中工作方面具有优势。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-04-09T23:22:03.363

此外，除了 torek 的回答：突出的一件事是您正在使用延迟评估的宏分配。

如果您使用的是 GNU Make，请使用`:=`分配而不是`=`. 此赋值导致右侧立即展开，并存储在左侧变量中。

```
FILES := $(shell ...)  # expand now; FILES is now the result of $(shell ...)

FILES = $(shell ...)   # expand later: FILES holds the syntax $(shell ...) 
```

如果使用`=`赋值，则意味着每次出现`$(FILES)`都会扩展`$(shell ...)`语法，从而调用 shell 命令。这会使你的 make 工作运行得更慢，甚至会产生一些令人惊讶的后果。*

# sql-server-2008 - 如何在 SQL 存储过程中减去日期？

> ID：10024282
> 
> 赞同：1
> 
> 时间：2012-04-05T07:26:09.787
> 
> 标签：sql-server-2008, datetime, stored-procedures

我正在 SQL Server 2008 中编写一个存储过程。这里我有一个数据库表

```
Id       LastUpdateTime
1        2011-12-27 11:15:03.700
2        2011-12-27 11:16:03.700
3        2011-12-27 11:15:03.700 
```

在我的存储过程中，我想检查一下

```
if (currentSystemTime - LastUpdateTime > 5 minute)
{
   // some action
}
else
{
   // some other action
} 
```

但我不知道如何做到这一点。请帮我。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:32:42.083

看看使用[DateDiff](http://msdn.microsoft.com/en-us/library/ms189794.aspx)函数：

```
DATEDIFF(minute, cuurentSystemTime, LastUpdateTime) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T07:32:51.453

使用[DATEDIFF](http://msdn.microsoft.com/en-us/library/ms189794.aspx)函数。

```
if (DATEDIFF(minute, cuurentSystemTim, LastUpdateTime) > 5)
{
    ....
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T07:31:30.420

使用 DATEDIFF ( datepart , startdate , enddate )。请参阅 [http://msdn.microsoft.com/en-us/library/ms189794(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms189794(v=sql.90).aspx)

# hibernate - 将继承策略与 hibernate 混合使用

> ID：10024283
> 
> 赞同：0
> 
> 时间：2012-04-05T07:26:11.157
> 
> 标签：hibernate, inheritance, jpa

我正在尝试使用 JPA 注释（休眠 3.6）进行以下实体映射：

抽象类A；

B类扩展A；（表 B）

C类扩展A；（表 C）

C1 类扩展 C；（表 C）

C2 类扩展 C；（表 C）

所以这意味着 TABLE_PER_CLASS 用于顶层，而 SINGLE_TABLE 用于 C 及以下。

我已阅读以下问题，但似乎不适用于我的要求：

[如何将继承策略与 JPA 注释和 Hibernate 混合使用？](https://stackoverflow.com/questions/3915026/how-to-mix-inheritance-strategies-with-jpa-annotations-and-hibernate)

Hibernate 似乎在一些文档中表明它能够混合继承策略，但实际上它似乎不起作用？

谢谢。

# java - Web服务中的单例

> ID：10024286
> 
> 赞同：1
> 
> 时间：2012-04-05T07:26:43.480
> 
> 标签：java, web-services, design-patterns, playframework

我创建了自己的库来绘制一些东西......

我制作了一个播放项目并将其设置为 Web 服务服务器并调用我的库为用户提供图像作为返回值。

我想问的是，**我应该做一个单例类来访问图书馆吗？为什么？**

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:25:05.693

您的 Play Web Service 操作是一个静态方法，因此实际上您的控制器代码已经是单个可执行代码。如果您从控制器代码访问您的库（我认为您是基于您之前的问题），那么除了向您的应用程序添加不必要的代码之外，单例不会有任何区别。

# javascript - Dojo 使用附加点隐藏和显示 div

> ID：10024287
> 
> 赞同：2
> 
> 时间：2012-04-05T07:26:43.870
> 
> 标签：javascript, dojo

为了简单起见，我定义了一个加载器 div

```
<div dojoAttachpoint="loaderDiv" style="display:none;">.....</div> 
```

现在，当我有一个被调用的函数时，我希望显示这个 div，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:48:51.250

`dojoAttachPoint`s 用于小部件模板。因此，在您的小部件中，您只需引用节点，例如`this.loaderDiv`

```
dojo.style(this.loaderDiv, 'display', ''); 
```

如果此代码不在小部件中，那么您应该使用 id。

```
<div id="loaderDiv" style="display:none;">.....</div>

dojo.style(dojo.byId('loaderDiv'), 'display', ''); 
```

我还建议看看`dojox.widget.StandBy`.

[在道场进行中的轮子](https://stackoverflow.com/questions/9783712/in-progress-wheel-in-dojo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:16:28.420

由于您提到这是在您编写的自定义小部件中，因此建议的执行此操作的方法是从您的小部件中公开一个执行此操作的函数

您可以使用 Craig 提到的 this.loaderDiv 访问该函数中的 loaderDiv

不建议直接从小部件外部访问 loaderDiv，因为它被封装在小部件渲染中

# objective-c - Restkit 多对多关系导致重复对象

> ID：10024288
> 
> 赞同：2
> 
> 时间：2012-04-05T07:26:50.443
> 
> 标签：objective-c, ios, core-data, mapping, restkit

我正在为我的应用程序使用 RestKit release/0.10.0 分支。我正在使用 CoreData 和 RestKit 的对象映射功能来加载/同步数据。我正在加载的 XML 数据如下所示（简化）：

```
<iphoneSync>
<time>12-04-03 16:47</time>
<pages>
    <page id="177">
        <title>
            Foo
        </title>
        <meta>
            <tags>
                <tag type="undef" id="16">Lorem</tag>
                <tag type="undef" id="20">Ipsum</tag>
            </tags>
        </meta>         
    </page>
    <page id="580">
        <title>
            Bar
        </title>
        <meta>
            <tags>
                <tag type="undef" id="16">Lorem</tag>
                <tag type="undef" id="20">Ipsum</tag>
                <tag type="" id="46">Abc</tag>
                <tag type="symptom" id="47">Cde</tag>
            </tags>
        </meta>
    </page>
</pages> 
```

域类**Page**和**Tag**如下所示：

```
@interface Page : NSManagedObject
@property (nonatomic, strong) NSNumber * id;
@property (nonatomic, strong) NSString * title;
@property (nonatomic, strong) NSSet *tags;
@end

@interface Tag : NSManagedObject
@property (nonatomic, strong) NSNumber * id;
@property (nonatomic, strong) NSString * name;
@property (nonatomic, strong) NSString * type;
@property (nonatomic, strong) NSSet *pages;
@end 
```

Page 实体有很多标签，一个标签可以属于多个页面。所以我将双方的关系设置为多对多。从 Page 到标签的删除规则是级联的。从标签到页面它是无效的。

![CoreData 属性](../Images/7a86181e9d07206f7d2979bd50684dbc.png)

映射设置：

```
//Tag mapping
RKManagedObjectMapping* tagMapping = [RKManagedObjectMapping mappingForClass:[Tag class] inManagedObjectStore:[RKManagedObjectStore defaultObjectStore]];
tagMapping.setDefaultValueForMissingAttributes = YES;
tagMapping.primaryKeyAttribute = @"id";
[tagMapping mapKeyPathsToAttributes:@"type",@"type",@"text",@"name",@"id",@"id", nil];

//Page mapping
RKManagedObjectMapping* pageMapping = [RKManagedObjectMapping mappingForClass:[Page class] inManagedObjectStore:[RKManagedObjectStore defaultObjectStore]];    
pageMapping.primaryKeyAttribute = @"id";
[pageMapping mapKeyPathsToAttributes:@"id",@"id",@"title",@"title",nil];
[pageMapping mapKeyPath:@"meta.tags.tag" toRelationship:@"tags"  withMapping:tagMapping];
pageMapping.setNilForMissingRelationships = YES;
pageMapping.setDefaultValueForMissingAttributes = YES;

//Root mapping
RKObjectMapping* rootMapping = [RKObjectMapping mappingForClass:[NSMutableDictionary class]];
[rootMapping mapKeyPath:@"iphoneSync.pages.page" toRelationship:@"pages" withMapping:pageMapping];

//RKObjectManager
RKManagedObjectStore* mainManagedObjectStore = [RKManagedObjectStore objectStoreWithStoreFilename:OBJECT_STORE_FILE];
RKObjectManager* objectManager = [RKObjectManager objectManagerWithBaseURL:baseURL];
[RKObjectManager setSharedManager:objectManager];
objectManager.acceptMIMEType = RKMIMETypeXML;
objectManager.serializationMIMEType = RKMIMETypeXML;
objectManager.objectStore = mainManagedObjectStore;
objectManager.objectStore.cacheStrategy = [RKInMemoryManagedObjectCache new];
objectManager.client.cachePolicy = RKRequestCachePolicyNone;

[objectManager.mappingProvider addObjectMapping:rootMapping];    
[objectManager.mappingProvider addObjectMapping:pageMapping];
[objectManager.mappingProvider addObjectMapping:tagMapping]; 
```

然后我像这样加载它：

```
[objectManager loadObjectsAtResourcePath:@"/" usingBlock:^(RKObjectLoader* loader) {
    loader.objectMapping = [[RKObjectManager sharedManager].mappingProvider objectMappingForClass:[NSMutableDictionary class]];
}]; 
```

对象已正确加载和映射，但 ID 16 和 ID 20 的标签在数据库中存储了两次（每个页面实体一个）。但我希望它们是不同的，这样具有相同 ID 的标签只存储一次。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:01:29.790

此问题已得到解决。这是 RestKit 中的一个错误。请参阅[https://github.com/RestKit/RestKit/issues/661](https://github.com/RestKit/RestKit/issues/661) 克隆最新版本的开发分支以获得工作版本。

# oracle10g - Oracle 10g 中如何获取换行符中的列值

> ID：10024292
> 
> 赞同：-1
> 
> 时间：2012-04-05T07:27:04.947
> 
> 标签：oracle10g

我有以下要求：

`Emp`表有以下`3 columns`，

`Id , Name and programming`

```
Id   Name   Programming 
-- ---- ---------------
1    Raju   Java,Plsql,sql 
2    Kamal  C,C++,Java 
------------------------- 
```

我需要如下输出：

```
Id        Name                 Programming 
--------------------------------------------
1         Raju                     Java 
                                   plsql 
                                   sql 
2         kamal                     c 
                                    c++ 
                                   Java. <code>
------------------------------------------------ 
```

`Id`is`1`和 the is`Name`然后`Raja`编程是`Java`，在下一行应该`not`有任何`value for id and Name`但`programming`应该有 Plsql 并且在下一行也同样没有价值。

对于编程`Id`，`Name`它应该是`Sql`.

谁能建议我获得上述格式的代码？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:52:28.847

使用函数从逗号分隔的字符串创建集合：

1）创建类型；

```
CREATE OR REPLACE TYPE  "TNA_STRMANIPTYPE" as table of varchar2(4000)
/ 
```

2)

```
CREATE OR REPLACE function str_manipulation
  ( p_str in varchar2,
    p_delim in varchar2 default ',' )
  return tna_strManipType
  AS
     v_str long default p_str || p_delim;
     v_n   number;
     v_data tna_strManipType := tna_strManipType();
  BEGIN
      LOOP
          v_n := instr( v_str, p_delim );
          exit when (nvl(v_n,0) = 0);
          v_data.extend;
          v_data(v_data.count) := ltrim(rtrim(substr(v_str,1,v_n-1)));
          v_str := substr( v_str, v_n+1 );
      END LOOP;
      RETURN v_data;
END; 
```

现在您可以将此集合用作表格：

```
SELECT column_value 
  FROM TABLE(str_manipulation('Java,Plsql,sql')) 
```

并使用此功能并将其转换为表格，您将需要根据需要处理插入部分的其余部分:)

# sql - 使用 Select 进行内部联接的 SQL 查询

> ID：10024295
> 
> 赞同：11
> 
> 时间：2012-04-05T07:27:15.353
> 
> 标签：sql

我想编写如下所示的 SQL 查询。它的语法不正确。我该如何纠正？

```
$sql_package_feature = "SELECT f.feature_id, f.feature_name FROM  tbl_feature f 
LEFT JOIN SELECT * FROM tbl_feature_and_profile fp WHERE fp.profile_id= ? ) ON 
f.feature_id = fp.feature_id AND f.package_id = fp.package_id WHERE fp.feature_id 
IS NULL  AND f.package_id = ? ORDER BY f.feature_id"; 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-05T07:29:31.833

我认为在子选择之后缺少'as fp'。试试这个查询：

```
SELECT 
      f.feature_id, 
      f.feature_name 
FROM  tbl_feature f 
LEFT JOIN (SELECT * FROM tbl_feature_and_profile fp WHERE fp.profile_id= ? ) 
     as fp ON (f.feature_id = fp.feature_id AND f.package_id = fp.package_id) 
WHERE 
     fp.feature_id IS NULL  AND f.package_id = ? ORDER BY f.feature_id 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T07:31:23.993

如果你加入一个子选择，你必须命名它。将名称放在子选择而不是其中的表上：

```
SELECT f.feature_id, f.feature_name
FROM  tbl_feature f
LEFT JOIN (
  SELECT *
  FROM tbl_feature_and_profile
  WHERE profile_id= ?
) fp ON f.feature_id = fp.feature_id AND f.package_id = fp.package_id
WHERE fp.feature_id IS NULL AND f.package_id = ?
ORDER BY f.feature_id 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T07:35:09.437

您没有为第二个表命名，但您稍后在 ON 子句中使用它。`fp`在右括号后丢失：

```
SELECT f.feature_id, f.feature_name 
FROM  tbl_feature f
LEFT JOIN (
    SELECT *
    FROM tbl_feature_and_profile fp 
    WHERE fp.profile_id= ?
) fp
ON      f.feature_id = fp.feature_id 
    AND f.package_id = fp.package_id
WHERE   fp.feature_id IS NULL
    AND f.package_id = ?
ORDER BY f.feature_id"
; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T07:33:16.333

尝试一个没有嵌套 SELECT 语句的 JOIN，只有一个表名。尝试：

```
$sql_package_feature = 
"SELECT f.feature_id, f.feature_name 
FROM  
tbl_feature f 
LEFT JOIN 
tbl_feature_and_profile fb
ON f.feature_id = fp.feature_id AND f.package_id = fp.package_id 
WHERE fp.feature_id IS NULL  AND f.package_id = ? AND fp.profile_id = ? ORDER BY f.feature_id"; 
```

# search - 在搜索结果中显示托管属性 - Sharepoint 2010 的 FAST Search

> ID：10024298
> 
> 赞同：1
> 
> 时间：2012-04-05T07:27:30.303
> 
> 标签：search, sharepoint-2010, fastsearch

我们正在使用快速搜索 Sharepoint 2010，并通过创建一些托管属性（例如 BestBetDescription、关键字等）完成了一些后端设置。

从前端部分，我们正在创建一个应用程序，它将获取所有这些属性并显示在网格中。

然而，在查询后端时，我们并没有获得这些托管属性（BestBetDescription）以及其他属性，如 Title、URL 等。

以下是我的源代码：

```
settingsProxy = SPFarm.Local.ServiceProxies.GetValue<SearchQueryAndSiteSettingsServiceProxy>();
searchProxy = settingsProxy.ApplicationProxies.GetValue<SearchServiceApplicationProxy>("FAST Query SSA");
keywordQuery = new KeywordQuery(searchProxy);
keywordQuery.EnableFQL = true;
keywordQuery.QueryText = p;
keywordQuery.ResultsProvider = SearchProvider.FASTSearch;
keywordQuery.ResultTypes = ResultType.RelevantResults;
ResultTableCollection resultsTableCollection = keywordQuery.Execute();
ResultTable searchResultsTable = resultsTableCollection[ResultType.RelevantResults];
DataTable resultsDataTable = new DataTable();
resultsDataTable.TableName = "Results";
resultsDataTable.Load(searchResultsTable, LoadOption.OverwriteChanges);
return resultsDataTable; 
```

结果返回，我看不到我们在 resultDataTable 中创建的托管属性。

有没有我错过的财产或者这是一个后端问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:58:07.903

嗨，如果您正在创建自定义元数据属性，那么您应该使用此选项来选择

请检查以下链接

[http://screencast.com/t/SQdlarjhx4F](http://screencast.com/t/SQdlarjhx4F)

> 您可以在以下位置找到此选项：中央管理员：- 服务：- 快速搜索：- 元数据属性：- 您的属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:36:38.270

我缺少一个属性**KeywordQuery.SelectProperties**

所以代码看起来像这样

```
String[] arrSearchProperties = new String[] { "Title", "body", "url" };
KeywordQuery.SelectProperties(arrSearchProperties); 
```

这将获取您定义的所有托管属性。

# xhtml - Primefaces工具提示在数据表中的定位

> ID：10024299
> 
> 赞同：0
> 
> 时间：2012-04-05T07:27:36.827
> 
> 标签：xhtml, primefaces

我们正在数据表上实现 primefaces 工具提示。但是工具提示发布远离数据行。

```
<p:tooltip targetPosition="bottomLeft" Delay="0" showDelay="0">
<h:outputText value="#{label.lockTime}"
style="font-weight:bold" />
<h:outputText value=": #{cert.lockTime}" />
<p:spacer width="1" height="10" />
<h:outputText value="#{cert.label} " style="font-weight:bold" />
<h:outputText value=": #{cert.userDetails}" />
</p:tooltip> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T13:10:34.707

你试试这个

```
<p:tooltip />
<p:dataTable var="var" ........>
    <p:column headerText="Market" >
        <h:outputText value=" #{var.market}" title=" #{var.market}" 
                      style="display:block;">
        </h:outputText>             
     </p:column> 
     <p:column headerText="Value" >
        <h:outputText value=" #{var.value}" title=" #{var.value}" 
                      style="display:block;">
        </h:outputText>             
     </p:column> 

</p:dataTable> 
```

我希望它会起作用。

# facebook - Facebook JS SDK：FB.Login 弹出框的替代方案

> ID：10024305
> 
> 赞同：1
> 
> 时间：2012-04-05T07:28:16.043
> 
> 标签：facebook

我正在使用 Facebook JS SDK 开发 Facebook Page Tab 应用程序。登陆页面有一个按钮。单击后，如果用户尚未安装该应用程序，则会要求他们安装该应用程序。

代码如下：

```
<script type="text/javascript"> 
function installApp() {
    FB.login(function(response) {
        if (response.authResponse) {
            var accessToken = response.authResponse.accessToken;
        }
        if (response.status === 'connected') {
            window.location = 'share.php';
        } else {
            alert('Please install app first');
        }
    }, {scope:'friends_likes,email'});
}
</script> 
```

默认情况下， [FB.Login](https://developers.facebook.com/docs/reference/javascript/FB.login/)会弹出一个请求权限的框。有没有其他方法可以避免弹出框？我已经看到其他 Facebook 应用程序成功地实现了这一点，但我不知道他们是如何做到的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:03:38.243

您可以将 Javascript Api 与 Graph Api 调用一起使用，

```
function fbLogin() {
    var oauth_url = 'https://www.facebook.com/dialog/oauth/';
    oauth_url += '?client_id=APP_ID_HERE';
    oauth_url += '&redirect_uri=' + encodeURIComponent('https://apps.facebook.com/APP_NAMESPACE/');
    oauth_url += '&scope=email'
    window.top.location = oauth_url;
} 
```

然后您可以使用 onclick 事件在自定义按钮中调用它：

```
<a href="#" onclick="return fbLogin();">Custom Login</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T07:39:32.383

您是否浏览过[身份验证文档](https://developers.facebook.com/docs/authentication/)？

它几乎涵盖了您可以使用的所有选项。IE：

1.  [客户端身份验证](http://developers.facebook.com/docs/authentication/client-side/)
2.  [服务器端身份验证](http://developers.facebook.com/docs/authentication/server-side/)
3.  [页面选项卡内的身份验证](https://developers.facebook.com/docs/authentication/pagetab/)

您可能可以使用任何这些方法，但第 3 种可能最适合。

# google-cloud-datastore - 为什么不按实体键的一部分过滤？

> ID：10024309
> 
> 赞同：0
> 
> 时间：2012-04-05T07:28:25.710
> 
> 标签：google-cloud-datastore, objectify

我有一个这样定义的对象化实体：

```
public class MyEntity1
{
    @Id @Indexed String             phoneNumber;
    @Parent @Indexed Key<MyEntity2> parentEntityKey;
} 
```

当我尝试按电话号码过滤时，我收到以下错误消息：

```
Cannot (yet) filter by @Id fields on entities which have @Parent fields. 
```

这种构造的原因是，当我知道 phoneNumber 和 parentEntityKey 时，我希望能够获取（而不是查询）这些记录，我有时会这样做。在其他一些情况下，我只知道电话号码并希望查询它。

这是 Objectify 或 Datastore 的缺点吗？我可以找到解决方法吗？您是否有一个解决我的两个要求的提案（当我知道两个值时获取而不是查询，当只知道这两个值时通过 phoneNumber 查询）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:22:41.760

这是数据存储区密钥的本质。

您不能按键的 id 部分进行过滤。您可以按整个键进行过滤，也可以使用祖先（）查询按键层次结构“过滤”，但不能仅按键的 @Id 部分进行过滤。想想 BigTable 中键的布局方式：

```
/parentkind1/parentid1/parentkind2/parentid2/kind/id 
```

您不能仅对 id 部分进行范围扫描。

听起来您想要做的是在您的实体上创建一个索引 phoneNumber 属性，与 @Id 字段分开。是的，它是重复数据，但无论如何您都需要单独的索引，因此序列化到 blob 中的额外数据可以忽略不计。

请注意，您不能查询事务内的索引属性，并且查询将具有最终的一致性行为。如果您需要唯一分配电话号码，则需要创建一个单独的 PhoneNumber 实体，而没有 @Parent ，其@Id 是电话号码本身。XG 事务允许您创建此唯一性实体并将其与您的 MyEntity1 关联到一个一致的操作中。

# jsf-2 - 请求 JSF 页面时的无限 setStatus() 循环

> ID：10024312
> 
> 赞同：3
> 
> 时间：2012-04-05T07:28:40.320
> 
> 标签：jsf-2, tomcat7

嗨，我已经将我的配置和库升级到了休眠 4 spring 3.1.1 richfaces 4 .... 我在 tomcat 7 上运行。但是当我尝试打开我的索引页面时，服务器运行一个循环。当我尝试在“ViewHandlerResponseWrapper”中设置断点时，eclipse卡住了，我无法调试它以找到原因。并且“HttpServletResponseWrapper”的来源似乎不可用。循环的异常如下所示：

```
 Apr 05, 2012 9:21:56 AM org.apache.catalina.core.ApplicationDispatcher invoke
    Schwerwiegend: Servlet.service() for servlet Faces Servlet threw exception
    java.lang.StackOverflowError
        at javax.servlet.http.HttpServletResponseWrapper.setStatus(HttpServletResponseWrapper.java:201)
        at javax.servlet.http.HttpServletResponseWrapper.setStatus(HttpServletResponseWrapper.java:201)
        at com.sun.faces.application.ViewHandlerResponseWrapper.setStatus(ViewHandlerResponseWrapper.java:88)
        at javax.servlet.http.HttpServletResponseWrapper.setStatus(HttpServletResponseWrapper.java:201)
        at javax.servlet.http.HttpServletResponseWrapper.setStatus(HttpServletResponseWrapper.java:201)
        at com.sun.faces.application.ViewHandlerResponseWrapper.setStatus(ViewHandlerResponseWrapper.java:88)
        at javax.servlet.http.HttpServletResponseWrapper.setStatus(HttpServletResponseWrapper.java:201)
        at javax.servlet.http.HttpServletResponseWrapper.setStatus(HttpServletResponseWrapper.java:201)
        at com.sun.faces.application.ViewHandlerResponseWrapper.setStatus(ViewHandlerResponseWrapper.java:88)
        at javax.servlet.http.HttpServletResponseWrapper.setStatus(HttpServletResponseWrapper.java:201)
        at javax.servlet.http.HttpServletResponseWrapper.setStatus(HttpServletResponseWrapper.java:201)
        at com.sun.faces.application.ViewHandlerResponseWrapper.setStatus(ViewHandlerResponseWrapper.java:88)
        at javax.servlet.http.HttpServletResponseWrapper.setStatus(HttpServletResponseWrapper.java:201)
        at javax.servlet.http.HttpServletResponseWrapper.setStatus(HttpServletResponseWrapper.java:201)
        at com.sun.faces.application.ViewHandlerResponseWrapper.setStatus(ViewHandlerResponseWrapper.java:88)
        at javax.servlet.http.HttpServletResponseWrapper.setStatus(HttpServletResponseWrapper.java:201)
        at javax.servlet.http.HttpServletResponseWrapper.setStatus(HttpServletResponseWrapper.java:201)
... and so on 
```

希望有人可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T07:57:19.777

好的，我自己找到了它：我必须从以下位置升级我的 faces-config.xml 的标头：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE faces-config PUBLIC "-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.1//EN"
                              "http://java.sun.com/dtd/web-facesconfig_1_1.dtd">
<faces-config> 
```

至

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0"> 
```

# android - 获取视图不绑定所有子元素

> ID：10024319
> 
> 赞同：0
> 
> 时间：2012-04-05T07:28:53.883
> 
> 标签：android

我正在使用 a`Gallery`并且我将 a`ImageView`和`ImageButton`a绑定`ProcessBar`到它。`getView()`画廊和拍摄时的方法中有 50 多张图像`ViewGroup.getChildCount()`。它只返回一个 int 值 3。

为什么`ViewGroup.getChildCount()`即使我滚动所有图像都返回 3。

所以我在方法中遇到错误：

```
ViewGroup.getChildAt(position).findViewById(R.id.progressbar_Horizontal).setVisibility(View.VISIBLE); 
```

主要活动

```
public class SliderActivity extends Activity {  

     private Integer[] mImageIds = {
                R.drawable.sample_1,
                R.drawable.sample_2,
                R.drawable.sample_3,
                R.drawable.sample_4,
                R.drawable.sample_5,
                R.drawable.sample_6,
                R.drawable.sample_7
        };
    /** Called when the activity is first created. */

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);               

        Gallery gallery = (Gallery) findViewById(R.id.gallery);
        gallery.setAdapter(new ImageAdapter(this,mImageIds));      

    }

} 
```

图像适配器类：

```
public class ImageAdapter extends BaseAdapter {

    private int mGalleryItemBackground;
    private Activity mContext;
    private Integer[] Images;
    private int[] ID;
    private ProgressBar process;
    private ImageButton imgBtn;
    private ImageView imageview;

    public ImageAdapter(Activity c,Integer[] images) {
        this.mContext = c;
        this.Images=images;
        TypedArray attr = mContext.obtainStyledAttributes(R.styleable.HelloGal999lery);
        mGalleryItemBackground = attr.getResourceId(
                R.styleable.HelloGal999lery_android_galleryItemBackground, 0);
        attr.recycle();

        ID=new int[getCount()];
    }

    public int getCount() {
        return Images.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return 1;
    }

    public View getView(final int position, View convertView,final ViewGroup parent) {  

         View rowView = convertView;

        if(rowView==null)
        {

         LayoutInflater inflater = mContext.getLayoutInflater();
         rowView = inflater.inflate(R.layout.test, null, true);

         imageview=(ImageView) rowView.findViewById(R.id.ImageViewuser);    
         imgBtn=(ImageButton)rowView.findViewById(R.id.Download);
         process=(ProgressBar)rowView.findViewById(R.id.progressbar_Horizontal);

         imageview.setImageResource(Images[position]);               
         imageview.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
         imageview.setBackgroundResource(mGalleryItemBackground);        

         if(position==0)
         {
             if(ID[position]==1)
             {
                 imgBtn.setVisibility(View.INVISIBLE);
                 process.setVisibility(View.VISIBLE);
             }          
         }

         if(ID[position]==position && position!=0)
         {
             imgBtn.setVisibility(View.INVISIBLE);
             process.setVisibility(View.VISIBLE);
         }               
        }                                                    
        else{
            Log.e("Else", "Else case");     
        }

        imgBtn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {               
                // TODO Auto-generated method stub  
                if(position==0)
                {
                    ID[position]=1;                     
                }
                else
                {
                    ID[position]=position;
                }
                parent.getChildCount();
                Toast.makeText(mContext, position+"", Toast.LENGTH_SHORT).show();
                parent.getChildAt(position).findViewById(R.id.progressbar_Horizontal).setVisibility(View.VISIBLE);          
                BackgroundAsyncTask objDownload=new BackgroundAsyncTask(parent,position);
                objDownload.execute();
            }

        }); 
         return rowView;                    
    }

    private class BackgroundAsyncTask extends
        AsyncTask<Void, Integer, Void> {

      public BackgroundAsyncTask(ViewGroup vg,int position) {       
            this.subGroup=vg;   
            this.pos=position;
        }

    int myProgress; 
    private ViewGroup subGroup;
    private int pos;

      @Override
      protected void onPostExecute(Void result) {
       // TODO Auto-generated method stub

          subGroup.getChildAt(pos).findViewById(R.id.Download).setVisibility(View.VISIBLE);         
          subGroup.getChildAt(pos).findViewById(R.id.progressbar_Horizontal).setVisibility(View.INVISIBLE);             
          Toast.makeText(mContext,"Download finished "+pos, Toast.LENGTH_SHORT).show();

          ID[1]=0;

      }

      @Override
      protected void onPreExecute() {
       // TODO Auto-generated method stub           
       myProgress = 0;
       imgBtn.setVisibility(View.INVISIBLE);
      }

      @Override
      protected Void doInBackground(Void... params) {
       // TODO Auto-generated method stub
       while(myProgress<100){
        myProgress++;
        publishProgress(myProgress);
           SystemClock.sleep(100);               
       }
    return null;              
}

        protected void onProgressUpdate(Integer... values) {

            process.setProgress(values[0]);

      }
     }      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:44:39.267

Android对此进行了优化。比如说，你有一个 ListView，它有无数个元素。如果您查询它的孩子数，它将返回例如 10 个孩子。它的发生是因为 android 只创建当前在屏幕上的视图，并且它们只是重用它们。

您可以在有关[Adapter.getView](http://developer.android.com/reference/android/widget/Adapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)的文档中阅读更多信息，查看第二个 arg `convertView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:30:50.943

修复你的`getView`

```
public View getView(final int position, View convertView,final ViewGroup parent) {  

     View rowView = convertView;

    if(rowView==null)
    {

     LayoutInflater inflater = mContext.getLayoutInflater();
     rowView = inflater.inflate(R.layout.test, null, true);

     imageview=(ImageView) rowView.findViewById(R.id.ImageViewuser);    
     imgBtn=(ImageButton)rowView.findViewById(R.id.Download);
     process=(ProgressBar)rowView.findViewById(R.id.progressbar_Horizontal);
     }

     imageview.setImageResource(Images[position]);               
     imageview.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
     imageview.setBackgroundResource(mGalleryItemBackground);        

     if(position==0)
     {
         if(ID[position]==1)
         {
             imgBtn.setVisibility(View.INVISIBLE);
             process.setVisibility(View.VISIBLE);
         }          
     }

     if(ID[position]==position && position!=0)
     {
         imgBtn.setVisibility(View.INVISIBLE);
         process.setVisibility(View.VISIBLE);
     }               

    imgBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {               
            // TODO Auto-generated method stub  
            if(position==0)
            {
                ID[position]=1;                     
            }
            else
            {
                ID[position]=position;
            }
            parent.getChildCount();
            Toast.makeText(mContext, position+"", Toast.LENGTH_SHORT).show();
            parent.getChildAt(position).findViewById(R.id.progressbar_Horizontal).setVisibility(View.VISIBLE);          
            BackgroundAsyncTask objDownload=new BackgroundAsyncTask(parent,position);
            objDownload.execute();
        }

    }); 
     return rowView;                    
} 
```

# java - Maven包含父类

> ID：10024320
> 
> 赞同：11
> 
> 时间：2012-04-05T07:28:56.620
> 
> 标签：java, inheritance, maven

我有一个相当简单的 maven 化 Java 项目，但是我很难理解它。

我的父模块定义了许多我希望对几个子模块有用的 Java 类（和依赖项）。其中一个子模块专门用于部署 Web 应用程序，因此它需要一些额外的类（servlet）以及父模块中的所有内容。

文件结构如下所示

```
 - parent
   - src
   - pom.xml
   - child
     - src
     - pom.xml 
```

我的父母 pom 看起来像这样：

```
<project>
  <groupId>my.group</groupId>
  <artifactId>parent</artifactId>
  <version>0.0.1</version>
  <packaging>pom</packaging>

  ...

  <modules>
    <module>child</module>
  </modules>
</project> 
```

孩子看起来像这样：

```
<project>
  <artifactId>child</artifactId>
  <packaging>war</packaging>
  <parent>
    <artifactId>parent</artifactId>
    <groupId>my.group</groupId>
    <version>0.0.1</version>
  </parent>

  ...

</project> 
```

这就是我需要让孩子了解父级中定义的类和依赖项的全部内容吗？似乎不是：eclipse 给出了编译错误，并且从父文件夹或子文件夹运行*mvn clean package*会在任何时候提到父类的类时产生“找不到符号”消息。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-05T07:53:04.710

我会像这样更改您的项目的结构：

*   父母（pom）
    *   核心（jar，所有曾经在父级中的类）
    *   孩子（战争，取决于核心）

家长：

```
<project>
  <groupId>my.group</groupId>
  <artifactId>parent</artifactId>
  <version>0.0.1</version>
  <packaging>pom</packaging>

  <modules>
    <module>core</module>
    <module>child</module>
    <!-- possibly more modules... -->
  </modules>
</project> 
```

核：

```
<project>
  <parent>
    <groupId>my.group</groupId>
    <artifactId>parent</artifactId>
    <version>0.0.1</version>
  </parent>
  <artifactId>core</artifactId>
  <packaging>jar</packaging>
</project> 
```

孩子：

```
<project>
  <parent>
    <groupId>my.group</groupId>
    <artifactId>parent</artifactId>
    <version>0.0.1</version>
  </parent>
  <artifactId>module1</artifactId>
  <packaging>war</packaging>

  <dependencies>
    <dependency>
      <groupId>my.group</groupId>
      <artifactId>core</artifactId>
      <version>${project.version}</version>
    </dependency>
  </dependencies>
</project> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T07:40:38.373

由于您的父模块的包装是“pom”，因此不会提供任何 jar 文件，并且其他模块将无法访问其中的任何 .class 文件。尝试将其更改为“jar”并再试一次。

尽管将父母作为“罐子”并不是一个好习惯。我会坚持“pom”父母，可能会创建一个新的“核心”或“普通”孩子，让我的“战争”依赖它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T07:40:34.097

尝试在子模块 pom 中添加内部依赖，使其熟悉它的父模块

```
<dependency>
   <groupId>my.group</groupId>
   <artifactId>parent</artifactId>
   <version>0.0.1</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T07:42:06.927

您应该做的第一件事是在您的父项的[dependencyManagmeent块中定义您的依赖项，如下所示：](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)

```
<dependencyManagement>
   <dependencies>
     <dependency>
       <groupId>group-a</groupId>
       <artifactId>artifact-a</artifactId>
       <version>1.0</version>
     </dependency>
     ...
   </dependencies>
</dependencyManagement> 
```

此外，在您的孩子中，您应该说出您的孩子希望将哪个依赖项用作依赖项：

```
 <dependencies>
     <dependency>
       <groupId>group-a</groupId>
       <artifactId>artifact-a</artifactId>
       <!-- No version given. See dependencyManagement -->
     </dependency>
     ...
   </dependencies> 
```

# c# - 使用泛型运行 ServiceOperation？

> ID：10024325
> 
> 赞同：0
> 
> 时间：2012-04-05T07:29:12.270
> 
> 标签：c#, wcf, generics, delegates

**你好，**

我有一个有很多操作的服务，我需要将调用包装在客户端的一个特殊方法中，如果调用失败，它会尝试重新连接。

我的服务操作总是看起来像这样：

```
[MySpecialResponse] MyServiceOperation([MySpecialRequest] request) 
```

我需要这样的方法（伪代码）：

```
DoServiceCall<MySpecialResponse>(MyServiceOperation(request));

public T DoServiceCall<T>(ServiceMethod)
{
   return ServiceMethod(request);
} 
```

我不确定如何使用泛型来做到这一点，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:50:25.713

也许你想做类似的事情

```
public TResult DoServiceCall<T, TResult>(Func(T, TResult) operation, T request)
{
    // Your wrapping here
    return operation(request);
    // and here?
} 
```

所以，你会像这样使用它。

```
MySpecialResponse response = DoServiceCall(MyServiveOperation, request) 
```

如果您的服务操作采用不同数量的参数，则需要`DoServiceCall`相应地重载。

**编辑**

我写了这个控制台应用程序来证明它有效

```
class Program
{
    static void Main()
    {
        Console.WriteLine(DoServiceCall(times2, 5));
        Console.ReadKey();
    }

    public static TResult DoServiceCall<T, TResult>(Func<T, TResult> operation,
                                                    T request)
    {
        return operation(request);
    }

    private static int times2(int x)
    {
        return 2 * x;
    }
} 
```

# wcf - 将客户端向服务器报告的数据转储到日志文件

> ID：10024327
> 
> 赞同：0
> 
> 时间：2012-04-05T07:29:23.220
> 
> 标签：wcf, wcf-client

我在客户端应用程序中使用 WCF 服务将数据从客户端传输到服务器，反之亦然。我正在寻找一种将发送到服务器的数据记录到客户端机器上的日志文件中的机制。我查看了 WCF 库，但找不到任何序列化 WCF 请求的代码。记录没有问题，我为此使用 N-Log，但我没有找到任何提供 webrequest 数据的内置函数。

我的问题是，是否有任何内置支持来获取 webrequest 详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:46:05.257

内置选项称为[消息日志记录](http://msdn.microsoft.com/en-us/library/ms730064.aspx)，但此选项使用自己的方式使用标准 .NET 跟踪侦听器记录消息。

如果您想要自定义消息记录器，则必须[使用 IClientMessageInspector 实现自己的日志记录端点行为](http://weblogs.asp.net/paolopia/archive/2007/08/23/writing-a-wcf-message-inspector.aspx)。

# c++ - c++简单程序错误

> ID：10024334
> 
> 赞同：0
> 
> 时间：2012-04-05T07:29:31.997
> 
> 标签：c++, include, iostream, deprecated

`untitled1.cpp`我使用以下脚本创建了一个名为dev-cpp 的文件：

```
#include <iostream.h>
using namespace std;
int main(){
    cout << "C++";
    return 0;
} 
```

但是编译器会显示如下错误：

> 1 F:\Dev-Cpp\include\c++\3.4.2\backward\iostream.h:31，
> 来自 F:\Dev-Cpp\Untitled1.cpp 在包含在 include/c++/3.4.2/backward/iostream 的文件中.h:31, from F:\Dev-Cpp\Untitled1.cpp 32:2 F:\Dev-Cpp\include\c++\3.4.2\backward\backward_warning.h #warning 此文件包括至少一个已弃用或过时的文件标题。请考虑使用 C++ 标准第 17.4.1.2 节中的 32 个标头之一。示例包括将标头替换为 C++ 包含的标头，或者代替已弃用的标头。要禁用此警告，请使用 -Wno-deprecated。

我有什么错误？我如何解决它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T07:31:32.533

在 C++ 中，您可以在不使用`.h`后缀的情况下导入标准库。

```
#include <iostream> 
```

所以你的固定例子：

```
#include <iostream>

int main(int argc, char **argv) {
    std::cout << "C++";
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T07:32:00.577

您的代码不是标准 C++。你应该说`#include <iostream>`（没有“.h”！）。无论您从中学习什么资料，都已经过时了大约 25 年，您应该考虑获取一些更现代的资料。

（“iostreams.h”头文件在 1990 年代早期是一个非常早期的非标准库的一部分，因此出于“兼容性”的原因，或者为了抓住非常惰性的程序员并给他们一个有用的提示，它被保留了下来。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T07:32:22.223

使用头文件`#include<iostream>`代替`#include<iostream.h>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T07:33:20.490

包括`iostream`而不是 `iostream.h`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T07:32:15.723

它表示在这种情况下，标头`iostream.h`已被弃用或过时。（你只有一个标题，所以就是那个！只需阅读错误消息！）

所以你必须使用`iostream`，而不是`iostream.h`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T07:33:18.587

这只是一个警告。

我认为您可以尝试包含`iostream`而不是`iostream.h`修复它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-05T08:45:16.447

您已经在问题中发布了原因！

> 此文件至少包含一个已弃用或过时的标头。

因此，真正的问题应该是：“哪个是过时的，我该如何替换它？”，而不是“有什么错误”。答：使用`<iostream>`。这些`<*.h>`版本是预标准的旧式标头。

所以：阅读错误信息，人们。

# php - jQuery mobile 动态添加可折叠内容 php

> ID：10024336
> 
> 赞同：1
> 
> 时间：2012-04-05T07:29:45.240
> 
> 标签：php, jquery, mobile

我正在使用 jquery mobile 构建一个 webapp，我需要从外部数据库获取数据并将该数据显示为可折叠内容。

```
<div data-role="collapsible" data-theme="b" data-content-theme="d" data-collapsed="true">
    <?php 

// display the results returned
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    printf('<h3><b> %s </h3> 
    <p> %s <p>',$row["OSO"], $row["AIKA"]);
}

        ?> 
```

如何让每个 H3 都显示为可折叠的内容标题？现在只有第一个显示为标题，其余的都在内容部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:38:17.920

如果您想要多个标题，您应该为每个条目创建一个新的可折叠项...

```
<?php 
// display the results returned
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
?>
<div data-role="collapsible" data-theme="b" data-content-theme="d" data-collapsed="true">
   <h3><?= $row["OSO"] ?></h3>
   <p><?= $row["AIKA"] ?><p>
</div>
<?php } ?> 
```

# php - 包含文件内变量的未定义变量错误

> ID：10024346
> 
> 赞同：1
> 
> 时间：2012-04-05T07:30:37.727
> 
> 标签：php, variables, include, undefined

我包括这个文件来收集它的一个变量。文件路径是正确的，我没有得到文件包含错误。但是当我尝试在该文件中打印一个变量时，它会给出未定义的变量错误。以下是代码。

```
include_once($path . "folder/file.php");
 echo($code); 
```

有一个php类。类里面有一个登录功能。在该函数中，我包含另一个文件，假设它是 funtions.php。

functions.php 中有上面的代码。

在functions.php 文件中，我包含了这个文件，其中包含我正在寻找的变量（假设它是test.php）。

test.php 看起来像这样（在 php 标签内）

```
 $code="something";
     $another_variable="something else"; 
```

所以现在就像我之前所说的，当我在functions.php中包含它并打印$code时它为什么会给出一个未定义的错误？

**完整代码**

```
 function log($user, $pass) {

     global $config;
    $this->get_available_accounts();
    if (isset($this->Users_obj[$user])) {
        if ($this->Users_obj[$user]->userName == $user && $this->Users_obj[$user]->passWord == $pass) {
            delete_cache_full();
            $_SESSION['username'] = $user;
            $_SESSION['log'] = true;
            $_SESSION['usergroup']=$this->Users_obj[$user]->level;
            $this->set_permission_session($_SESSION['usergroup']);
            include_once $config->path . 'config.php';
            $newUpdate2=showUpdates2();
            if(!empty($newUpdate2)){
                $_SESSION['updateremindlater']=$newUpdate2['date'];
                }
            //file  
            include_once $config->path . 'functions.php';
            $func = new UserFuncs();
            $func->validate();
            include_once $config->path  . 'view/ViewDashboard.php';
            return true;
        }
    } 
```

这就是包含此文件的功能。`include_once $config->$path . 'functions.php';`包括functions.php文件functions.php看起来像这样

```
 include_once($path. "folder/config.php");
   echo($code); 
```

和 config.php 看起来像

```
 $code = "ERGERW2342HV3453WERWEER";
  $host_name = "SERV345WERFDGDDFGDGF";
  $return_code = "DFGDFSDGFS";
  $vurl = "YUIYUJHGJ";
  $next_val ="AWERFDFVDV";
  $val_exp = "NMGHJGJGH"; 
```

非常感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:52:17.423

只是猜测您之前`include`在其他地方使用过 config.php，并且由于`include_once`. 因此，变量不会在您第二次包含它的范围内创建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T08:01:32.590

这可能是变量范围的问题，您尝试从某个特定对象无法访问该变量（例如，函数）访问该变量（您确实提到您将文件包含在一个类中）。我同意 deceze 和 hakre，如果没有看到您的代码，很难回答这个问题。

# php - 用于与 Android 手机应用程序同步数据的 Web 应用程序

> ID：10024350
> 
> 赞同：0
> 
> 时间：2012-04-05T07:31:19.430
> 
> 标签：php, android, html, web

我已经知道很多使用 Android java 的技巧，并且我有一个需要与 Web 应用程序同步的应用程序。它需要做的是连接到服务器并同步数据库并下载用户上传的jpg图片。Web 应用程序也应该适用于更多用户，每个用户都有自己的手机和 Android 应用程序，因此它应该可以通过登录名和密码访问。

我的问题是我对 Web 应用程序的经验为零。我只知道一点HTML。所以我的问题是，我应该如何开始？我使用什么语言？我的 Web 应用程序应该具备什么样的基本结构或原则？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:56:37.037

我会推荐一个 PHP - MySQL 解决方案。PHP 和 MySQL 是开源的，我知道 Java 可以与那种数据库交互。两种语言都有很好的文档记录，PHP 与 Java 的相似之处在于它是基于 C 的，因此如果您对 Java 相当了解，那么 PHP 对您来说应该相对简单。我建议前往 Lynda.com 并搜索 Kevin Skoglund 的 PHP Essential Training。Lynda 是一个很棒的在线视频教程网站，您可以免费访问大量内容。但是，如果您真的想开发这个 Web 应用程序，我会进行投资（我曾经做过，我做过，我很高兴）。这就是我大部分时间学习 PHP / MySQL 的方式。

首先，要进行任何 PHP / MySQL 开发，您需要在您的计算机上安装服务器，例如 WAMP（Windows Apache MySQL PHP - 适用于 windows）、MAMP（Mac “” - 适用于 mac）或 LAMP（Linux " " - 对于 Linux），您将能够开始开发您的应用程序。这是您的“测试”服务器或“开发”服务器。例如，我使用 MAMP，因为我在 Mac 上。MAMP 和其他版本一样是免费的，但您可以付费升级。出于您的目的，请从免费版本开始。从本质上讲，*AMP 随附预先打包的 Apache 服务器软件、MySQL 数据库安装和 PHP 安装，并准备好以最少的配置运行。从那里，您可以开始编写 PHP 和 MySQL 并开始您的项目。

事实上，Lynda.com 上的标题 PHP Essential Training 将引导您完成我刚才所说的**所有**步骤，并且使用设置基本内容管理系统的练习项目，包括密码保护、用户登录和身份验证，以及您需要使用的所有基本 PHP 和 MySQL。说真的，看看 Lynda.com。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:48:08.943

这是一个非常开放的问题，您可能会得到大量不同的答案，但都不是完美的。但是，我会尝试做一个简单的回应。

拥有一台服务器并从中公开 Web 服务。此 Web 服务将处理数据的 CRUD（我假设您将使用数据库并且您有使用数据库的经验）。

Web 服务是一个很大的话题。如果您想要最简单的 Web 服务，并且您打算使用 PHP，我建议您使用带有 JSON 的 RESTful，因为它非常简单。

Web 应用程序应该在 Web 服务的同一个域/服务器中，至少在开始时（如果它增长，您可以更改此架构），因为这样您就不需要使用 JSONP，只需坚持标准 AJAX（我现在假设您不知道 JSONP 是什么，我建议您阅读：[http](http://remysharp.com/2007/10/08/what-is-jsonp/) ://remysharp.com/2007/10/08/what-is-jsonp/这只是我刚刚在 Google 上得到的第一个结果;))，它会更容易。

你说你有安卓的经验。我假设您知道如何使用 Java/Android 使用 Web 服务。如果您不这样做，这里有一个示例：http: [//www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php](http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php)

请注意那里的 PHP 代码很脏，但作为“如何”，我认为它看起来很棒。唯一需要注意的是：示例使用 HttpClient，而首选方法是使用 HttpURLConnection ( [http://android-developers.blogspot.mx/2011/09/androids-http-clients.html](http://android-developers.blogspot.mx/2011/09/androids-http-clients.html) )

话虽如此，PHP + MySQL 是标准的。在网络应用程序中，您应该使用 HTML。请不要使用 Flash 或 Java Applets（我在这里甚至提到 Java Applets 时都笑了笑）。对于 Web 服务和 HTML 客户端之间的所有通信目的，我建议使用带有 AJAX 的jQuery ( [http://jquery.com/ )。](http://jquery.com/)

除非您希望其他网站能够使用您的 API，否则不要使用 JSONP API。

这只是一种使用您提供的少量信息创建的快速方法。您提供的信息越多（越清晰），就有可能出现更好的解决方案。

# iphone - 通过视图问题进行用户交互

> ID：10024360
> 
> 赞同：2
> 
> 时间：2012-04-05T07:31:52.497
> 
> 标签：iphone, objective-c

请帮我关闭用户交互。我有一个自定义视图，它在视图层次结构的顶层显示了几秒钟。视图下方有几个按钮。问题是当用户点击视图时按钮会捕获触摸事件。我设置了 myCustomView.userInteractionEnabled = NO; 什么也没有发生。按钮通过视图捕捉事件都是一样的。如何创建一个不允许通过它拦截触摸的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:38:45.900

您可以在按钮的公共超级视图上禁用用户交互：

```
someButton.superview.userInteractionEnabled = NO; 
```

在某些覆盖 UI 位于顶部时禁用 UI 的另一种方法是将覆盖放在其自己的窗口中，而不是在现有视图的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:42:55.910

如果`myCustomView`位于视图层次结构的顶层，我想您正在尝试实现类似覆盖视图的东西，它半透明地覆盖其他视图。在这种情况下，设置`userInteractionEnabled = NO`此视图将导致触摸事件被转发到下面的视图。

正确的方法是`userInteractionEnabled = YES`在您的自定义视图上进行设置，然后创建一个透明按钮以将触摸重新路由到关闭 IBAction，或者忽略它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T07:45:21.123

采用：

`[[UIApplication sharedApplication] beginIgnoringInteractionEvents]`

用于忽略用户事件。几秒钟后，您的视图消失了，您可以使用：

`[[UIApplication sharedApplication] endIgnoringInteractionEvents]`

这样你就可以解决你的问题。

# android - 远程服务+安卓的目的

> ID：10024361
> 
> 赞同：1
> 
> 时间：2012-04-05T07:31:59.623
> 
> 标签：android, android-intent, android-service

我需要一些帮助来理解何时以及为什么使用远程服务而不是本地服务。有几种情况可以使用本地服务。例如：在后台播放音乐，从网络下载文件而不中断用户。但我无法找到我必须使用远程服务的类似用例场景。

我很好奇可以使用远程服务的场景。

任何帮助表示赞赏。我不想知道如何实现它。我知道如何实现它的技术部分，进行进程间通信。我只想知道什么时候用这个。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:37:57.750

当不同的应用程序需要与所述服务通信时使用远程服务。拥有一项服务，例如，跟踪您的位置，可以使用远程服务从多个应用程序访问。

# fullcalendar - WP-日历星期六不会显示

> ID：10024362
> 
> 赞同：0
> 
> 时间：2012-04-05T07:32:00.077
> 
> 标签：fullcalendar

我的问题说起来很简单。在我的一个页面中调用的图形日历中。尽管设置了参数并阅读了文档，但我可以让一周中的每一天都显示在日历中，星期六除外。我不会太在意，除非我主持一个网络广播节目，而我的特色节目之一是在星期六。我希望它能够在全月视图中显示所有 7 天。我真的很喜欢你日历的布局和设计，但你的参数让我头晕目眩。我将周末设置为 true，因为我认为从我阅读的内容中可以显示它们。我想我错了。我还不是网页设计师的程序员。我秋天开始上学。我很难理解这些设置。请帮忙。

您可以直接访问我的页面以了解我的意思。

[http://www.loftonspace.com/home/radio/](http://www.loftonspace.com/home/radio/)

感谢您的任何帮助。
PS 我知道人们不会免费提供帮助，所以对于最能帮助解决我的问题的人，我在我的网站页脚有一个特殊的位置，特别感谢帮助网站的人。我愿意在那里添加一个指向专业网站的链接。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T19:10:33.883

您需要设置日历的宽度。它完全显示了 fullCalendar，但溢出隐藏在您放置日历的较小 div 后面。使可用空间更小，这应该可以解决问题......

至于促销...如果我的回答被接受，请使用 Stackoverflow 作为促销，因为我不经营任何专业机构。我只是做我自己的项目。

我无法进一步检查代码并给你一个正确的答案，但你可以使用 firebug 来找到你需要更改的 div 的类/ID。希望能帮助到你。

# wcf - 为什么 WCF 中的消息似乎总是 SOAP 格式？

> ID：10024367
> 
> 赞同：1
> 
> 时间：2012-04-05T07:32:13.943
> 
> 标签：wcf, serialization, soap, basichttpbinding, wcf-serialization

我通过实现在 WCF 中实现了一个消息检查器`IDispatchMessageInspector`。

在这个方法上设置一个断点......

```
public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
{
    // Impementation
} 
```

...我可以看一下`request`物体，看看里面有什么。

显然我对 WCF 的理解不够，因为无论我使用什么端点绑定（basichttp、nettcp 和 netpipe），内部的消息总是以 SOAP 格式表示，例如

```
<s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\">
    <s:Header>
        -- headers --
    </s:Header>
    <s:Body>
        -- body --
    </s:Body>
</s:Envelope> 
```

这是因为对请求对象执行 .ToString() 仅代表 SOAP 格式的消息吗？

我想象使用另一种协议，例如 netTcp 会导致不同的消息负载。

还可以说我想以 JSON 格式表示我的数据，我将如何去做呢？或者我最终会在 SOAP 信封中使用 JSON 格式的数据结构吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T07:39:16.297

这是因为您提到的所有绑定都是为使用 SOAP 协议而设计的。他们使用其中一个`TextMessageEncoder`或`BinaryMessageEncoder`两个都与 SOAP 信封一起使用（除了`TextMessageEncoder`在自定义绑定中使用`MessageVersion`set to的情况`None`）。

唯一允许其他消息格式的开箱即用绑定是`WebHttpBinding`同时`WebMessageEncoder`支持 XML 和 JSON。

# c - c malloc 在其他函数和结构中

> ID：10024376
> 
> 赞同：0
> 
> 时间：2012-04-05T07:32:44.103
> 
> 标签：c

我在使用 c 和指针时遇到问题。我一直在努力，它必须很容易。我有一个结构，我在一个函数中分配，然后将指针传递回原始函数。但是当我尝试用其他变量填充结构的值，然后打印或复制它们时，应用程序段错误说内存地址超出范围。

```
struct memcache_buffer{
        int  elements, action;
        char keys[MAX_KEYS], values[MAX_KEYS], returns[MAX_KEYS]; //action 0 = delete , 1 = get 2 = set
}memcache_buffer;

struct memcache_buffer* memcache_allocate_buffer(int size){
        struct memcache_buffer *buffer;
        buffer =malloc(sizeof(struct memcache_buffer));
        return buffer;
}

void memcache_set(char * key, char * value){
        pthread_t process_t;
        struct memcache_buffer *buffer=memcache_allocate_buffer(1);
        char keys,values;
        buffer->elements = 1;
        buffer->action=2;
        //printf("crash?\n");
        printf("%s %s",key,value);
        snprintf(buffer->keys[0],KEY_SIZE,"%s",key);
        snprintf(buffer->values[0],VALUE_SIZE,"%s",value);
        pthread_create(&process_t,NULL,memcache_process,buffer);
} 
```

我分配的内存正确吗？分配内存和这些指针肯定很粗糙，尤其是过去只会弄乱php。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T07:36:22.687

这是你的问题：

```
struct memcache_buffer{
    char keys[MAX_KEYS], values[MAX_KEYS]
}

snprintf(buffer->keys[0],KEY_SIZE,"%s",key);
                     ^^^
snprintf(buffer->values[0],VALUE_SIZE,"%s",value);
                       ^^^ 
```

删除`[0]`or`snprintf`将尝试取消引用一些虚假值。

# ninject - Ninject 几个构造函数具有相同的优先级

> ID：10024377
> 
> 赞同：0
> 
> 时间：2012-04-05T07:32:44.147
> 
> 标签：ninject, ninject.web.mvc

我无法摆脱来自 Ninject 的异常“几个构造函数具有相同的优先级”

我有存储库

```
public interface IRepository<TEntity> where TEntity : class
{
    List<TEntity> FetchAll();
    IQueryable<TEntity> Query { get; }
    void Add(TEntity entity);
    void Delete(TEntity entity);
    void Save();
}

public class Repository<T> : IRepository<T> where T : class
{
    private readonly DataContext _db;

    public Repository(DataContext db)
    {
        _db = db;
    }

    #region IRepository<T> Members

    public IQueryable<T> Query
    {
        get { return _db.GetTable<T>(); }
    }

    public List<T> FetchAll()
    {
        return Query.ToList();
    }

    public void Add(T entity)
    {
        _db.GetTable<T>().InsertOnSubmit(entity);
    }

    public void Delete(T entity)
    {
        _db.GetTable<T>().DeleteOnSubmit(entity);
    }

    public void Save()
    {
        _db.SubmitChanges();
    }

    #endregion
} 
```

我试图绑定存储库的控制器

```
 public class AdminController : Controller
    {
        private readonly IRepository<Store> _storeRepository;

 public AdminController(IRepository<Store> storeRepository)
        {
            _storeRepository = storeRepository;
        }

} 
```

Ninject 引导程序

```
 private static void RegisterServices(IKernel kernel)
{
    var connectionString = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
    kernel.Bind(typeof (DataContext)).ToMethod(context => new DataContext(connectionString));
    kernel.Bind(typeof(IRepository<>)).To(typeof(Repository<>));
} 
```

运行应用程序后出现错误

```
Error activating DataContext using implicit self-binding of DataContext
Several constructors have the same priority. Please specify the constructor using ToConstructor syntax or add an Inject attribute.

Constructors:
DataContext(string fileOrServerOrConnectionMappingSource mapping)
DataContext(IDbConnection connectionMappingSource mapping) 
```

似乎 Ninject 试图绑定到 DataContext 类构造函数

```
namespace System.Data.Linq: IDisposable
{
    public class DataContext : IDisposable
    {
        public DataContext(IDbConnection connection);
        public DataContext(string fileOrServerOrConnection);

//skip code

} 
```

但我想绑定到我的存储库构造函数

```
 public class Repository<T> : IRepository<T> where T : class
    {
        private readonly DataContext _db;

        public Repository(DataContext db)
        {
            _db = db;
        }
//skip code
} 
```

此外，如果我删除表单引导程序下方的行，我仍然会遇到相同的异常。当我尝试绑定存储库时，似乎 Ninject 会自动尝试绑定依赖项。

```
 kernel.Bind(typeof (DataContext)).ToMethod(context => new DataContext(connectionString)); 
```

# objective-c - 如何创建不同宽度和高度的平铺照片库？

> ID：10024383
> 
> 赞同：2
> 
> 时间：2012-04-05T07:32:57.720
> 
> 标签：objective-c, ios, ipad, user-interface, ios5

我一直在寻找为 iPad 应用程序创建一个照片库，其中的图像具有不同的宽度和高度。我不想裁剪它们以适应网格视图，而是创建一个“马赛克”效果，如[Pinterest](http://reviewholes.com/wp-content/uploads/2012/03/Pinterest-Coming-soon-in-iPad.jpg)和[Jetsetter](http://www.blogcdn.com/www.gadling.com/media/2011/08/ipad1.jpg)应用程序中所见（参见参考图像链接）

知道我可以从哪里开始创建这样的效果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:03:39.393

对于可变高度 a la Pinterest，最简单的方法是`UITableView`对每一列使用 a，因为它已经提供了使用`UITableViewRowAnimation`s 插入/删除图像的机制。如果图像的高度是已知的，则更容易，因为`UITableView`在加载单元格之前会要求它。但如果不是，您可以做的是将每个单元按顺序（头部或尾部）插入**最短**的UITableView。加载图像，必要时调整大小。磁盘缓存高度，因此您不必为每个单元格加载图像。我已经以这种方式成功实现了它。

附录：使用 3 个（或更多）UITableViews 的部分技巧是手动同步滚动。否则他们会自行滚动：

```
#pragma mark - UIScrollView stuff
- (void)scrollViewDidScroll:(UIScrollView *)inScrollView {
    // Sync the scrolling of all table views
    CGPoint offset = inScrollView.contentOffset;

    for (NSInteger i = 0; i < self.tableViews.count; i++) {
        PLAlbumTableView *tableView = [self.tableViews objectAtIndex:i];
        if (tableView != inScrollView)
            tableView.contentOffset = offset;

    }
}

- (void)scrollViewWillBeginDecelerating:(UIScrollView *)inScrollView {
    // Sync the scrolling of all table views
    for (NSInteger i = 0; i < self.tableViews.count; i++) {
        PLAlbumTableView *tableView = [self.tableViews objectAtIndex:i];
        if (tableView != inScrollView)
            [tableView setContentOffset:tableView.contentOffset animated:NO];
    }
} 
```

# content-management-system - Liferay CMS 功能

> ID：10024385
> 
> 赞同：2
> 
> 时间：2012-04-05T07:33:00.240
> 
> 标签：content-management-system, liferay

我有为企业建立一个CMS系统的要求，它必须是基于java的开源，我发现liferay有CMS功能，但我找不到任何关于它的CMS引入的功能的详细描述，我也发现有些人正在谈论将 Liferay 与 Alfresco 集成！这是否意味着 Liferay 不是一个完整的 CMS？如果有人可以指导我并为我提供详细说明 liferay CMS 功能的任何资源，我将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T10:37:49.737

是的，Liferay 具有 CMS 功能 - 来自门户背景的 CMS 只是开箱即用的众多功能之一。门户通常是任何类型的应用程序的集成平台。如果您*只*需要 CMS，可能是“纯”CMS 产品提供了更多功能，但是，许多人对 Liferay 提供的 CMS 功能非常满意。如果你不是，它通常很容易扩展（这是门户的重点）。

开始成为 CMS 并希望通过应用程序扩展它的系统（谁不想要）通常有不同的心态——“一切都是内容”——自然你的应用程序感觉更像是“内容”。portlet 标准以及您可用的其他 API 是一种不错的开始方式。

对于 CMS，要走的路通常是使用专有 API 来扩展它。在门户中，CMS 是可能的可用应用程序之一。

关于 Alfresco：是的，您可以将它与 Liferay 结合使用。虽然 Alfresco 更倾向于来自内容方面，但 Liferay 来自门户/集成方面。我会要求您先评估两者，看看您是否缺少任何重要功能。然后评估您更喜欢哪种痛苦：1）在您决定使用的系统中添加您想要的缺失功能，或 2）集成两个系统并同时运行它们。当然，最佳结果是两者中只有一个足以满足您的要求。然后展望未来，试着找出你会首先错过的东西。

这个问题没有正确答案，这完全取决于您的要求、经验以及学习和管理一个或两个系统的能力。

免责声明：查看我的个人资料以检测我的隐含偏见 - 我希望在这个答案中不要过分强调它。

# javascript - 复制网页内容而不执行

> ID：10024386
> 
> 赞同：0
> 
> 时间：2012-04-05T07:33:00.560
> 
> 标签：javascript, parsing

你好，

我想解析页面的脚本部分，当然不执行它。我该怎么做？

谢谢，法布里齐奥

# javascript - 如何循环一个 JavaScript 对象

> ID：10024387
> 
> 赞同：0
> 
> 时间：2012-04-05T07:33:01.390
> 
> 标签：javascript, jquery

我用了

```
console.log(response); 
```

并在控制台（在 Firebug 中）中得到以下信息。如何循环检查“LMNOPQ”是否存在？

```
data        [Object { name="Excel in ABCD", category="Book", id="327361517327399", more...}, Object { name="LMNOPQ", category="Product/service", id="175625882542984", more...}, Object { name="UVWXYZ", category="Book", id="260641707360118", more...}, 7 more...]
            0       Object { name="Excel in ABCD", category="Book", id="327361517327399", more...}
            category        "Book"
            created_time        "2012-04-04T05:31:04+0000"
            id      "327361517327399"
            name        "Excel in ABCD"
            1       Object { name="LMNOPQ", category="Product/service", id="175625882542984", more...}
            2       
Object { name="UVWXYZ", category="Book", id="260641707360118", more...} 
```

然后按照 Baptiste Pernet 的建议，我尝试了以下方法：

```
for(var i in response) {
    console.log(response[i].name);//gives me undefined
    console.log(response[i]);//gives me another object (it is nested, check below)
} 
```

> [Object { name="Excel in ABCD", category="Book", id="327361517327399", 更多...}, Object { name="LMNOPQ", category="Product/service", id="175625882542984" , 更多...}, 对象 { name="UVWXYZ", category="Book", id="260641707360118", 更多...},

我现在如何获得这个名字？我被困在：

```
console.log(response[i]); 
```

为了获得嵌套对象的属性，我应该写什么？另一个循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:38:47.053

您应该尝试使用`JSON.stringify(response)`然后[这个站点](http://chris.photobooks.com/json/default.htm)来可视化结果。它比您提供的格式要标准得多。

从您提供的内容来看，您似乎有一个名为的成员`data`，其中包含一个数组（同样，我不确定，因为您没有提供一个好的格式来描述您的 javascript 对象）。

所以让我们试试

```
for(var i in response.data) {
  if (response.data[i].name == 'LMOPQ') {
    return true
  }
}

return false; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-05T07:41:04.287

您可以使用

```
for (var prop in Object) {
    if(prop == "LMNOPQ") {
        // Do something
    }
} 
```

或者您可以`if( response[like].hasOwnProperty("LMNOPQ") )`替代使用。

# sql - 减少 SQL 存储过程中的比较次数

> ID：10024395
> 
> 赞同：0
> 
> 时间：2012-04-05T07:33:28.867
> 
> 标签：sql, sql-server

我创建了一个存储过程。

以下是要求：

*   第一次匹配是在公司名称和人名上完成的。
*   如果未找到匹配项，则应在地址、城市和人名上进行第二次匹配。
*   如果未找到匹配项，则应在 zip 和人名上进行第三次匹配。

我写的是

```
exec('insert into ProcessedFile_'+@fileuplodedId +' ('+@ConcatAppendedField+ ',UploadedB2bFiled_id) select '+@concatAppendFieldForSelect +',B2bFiled_id from UploadedFile_'+@fileuplodedId+' a , b2bdb b where ((a.CompanyDomain = b.domain and ISNULL(a.CompanyDomain,'''') <> '''' and a.CompanyDomain is not null and a.Name=b.Name)) group by B2bFiled_id,' + @concatAppendFieldForGroupBy ) 

exec('insert into ProcessedFile_'+@fileuplodedId +' ('+@ConcatAppendedField+ ',UploadedB2bFiled_id) select '+@concatAppendFieldForSelect +',B2bFiled_id from UploadedFile_'+@fileuplodedId+' a , b2bdb b where (((a.CompanyDomain is null or a.CompanyDomain !=b.domain) and a.Address1 = b.address and a.City = b.city and a.Name = b.Name )) group by B2bFiled_id,' + @concatAppendFieldForGroupBy) 

exec('insert into ProcessedFile_'+@fileuplodedId +' ('+@ConcatAppendedField+ ',UploadedB2bFiled_id) select '+@concatAppendFieldForSelect +',B2bFiled_id from UploadedFile_'+@fileuplodedId+' a , b2bdb b where ((((a.CompanyDomain is null or a.CompanyDomain !=b.domain) and (a.Address1 = b.address and a.City = b.city and a.Name = b.Name )) and a.Zip = b.Zip and a.Name = b.Name )) group by B2bFiled_id,' + @concatAppendFieldForGroupBy)` 
```

但这绝对是低效的，因为在每个语句中（第一个语句除外）我都在比较我之前所做的所有字段，因为首先我比较了公司名称和人名，在第二个语句中我再次比较了这些字段（公司名称和人姓名）。

如何摆脱这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:25:14.427

`RETURN`如果插入了行，您可以在每次插入后添加一条语句以退出批处理。这样您就不必从上一个查询中消除条件。例如

```
DECLARE @QueryStart NVARCHAR(1000), @QueryEnd NVARCHAR(1000)
SET @QueryStart = ' INSERT INTO ProcessedFile_' + @FileUploadID + 
                ' (' + @ConcatAppendField + ', UploadedB2bFiled_ID) ' + 
                ' SELECT ' + @ConcatAppendFieldForSelect + ', B2bFiled_ID ' + 
                ' FROM UploadFile_' + @FileUploadedID + ' a, B2bDB b '

SET @QueryEnd = ' GROUP BY B2bFiled_ID, ' + @ConcatAppendFieldForGroupBy    

DECLARE @Query NVARCHAR(1000)
SET @Query = @QueryStart + 
            ' WHERE a.CompanyDomain = b.Domain ' + 
            ' AND   ISNULL(a.CompanyDomain, '''') != '''' ' + 
            ' AND   a.CompanyDomain IS NOT NULL ' +
            ' AND   a.Name = b.Name ' +
            @QueryEnd

EXECUTE SP_EXECUTESQL @Query

IF (@@ROWCOUNT > 0)
    RETURN

SET @Query = @QueryStart + 
            ' WHERE a.Address1 = b.Address ' + 
            ' AND   a.City = b.City ' + 
            ' AND   a.Name = b.Name ' + 
            @QueryEnd

EXECUTE SP_EXECUTESQL @Query

IF (@@ROWCOUNT > 0)
    RETURN

SET @Query = @QueryStart + 
            ' WHERE a.Zip = b.Zip ' + 
            ' AND   a.Name = b.Name ' + 
            @QueryEnd

EXECUTE SP_EXECUTESQL @Query 
```

我复制了您的条款，但值得指出的是，可以简化以下 where 条款。

```
WHERE a.CompanyDomain = b.Domain
AND   ISNULL(a.CompanyDomain, '') != '' 
AND   a.CompanyDomain IS NOT NULL 
```

由于 NULL 不等于任何内容，甚至不等于 NULL，如果 a.CompanyDomain 为 NULL，则它永远不会等于 b.Domain，因此可以将其简化为

```
WHERE NULLIF(a.CompanyDomain, '') = b.Domain 
```

**附录**

好的，据我所知，如果第一个查询返回结果，您不想中止执行，您只想排除第二个查询中第一个查询插入的任何内容，以及第三个查询中第一个和第二个插入的任何内容，所以您避免插入重复项？如果是这种情况，我认为您可以通过将所有条件组合到一个查询中来解决此问题：

```
DECLARE @Query NVARCHAR(1000)
SET @Query = ' INSERT INTO ProcessedFile_' + @FileUploadID + 
            ' (' + @ConcatAppendField + ', UploadedB2bFiled_ID)
            SELECT ' + @ConcatAppendFieldForSelect + ', B2bFiled_ID
            FROM    UploadFile_' + @FileUploadedID + ' a 
                    INNER JOIN B2bDB b 
                        ON a.Name = b.Name
            WHERE   NULLIF(a.CompanyDomain, '''') = b.Domain
            OR      (a.Address1 = b.Address AND a.City = b.City) 
            OR      a.Zip = b.Zip
            GROUP BY B2bFiled_ID, ' + @ConcatAppendFieldForGroupBy  

EXECUTE SP_EXECUTESQL @QUERY 
```

If this isn't what is required I think you may have to use your original solution of 3 inserts as it sounds like you are using data inserted by the first query in the second, and data inserted in the first and second in the third.

# php - Mod Rewrite Rule 重写不正确

> ID：10024397
> 
> 赞同：0
> 
> 时间：2012-04-05T07:33:48.190
> 
> 标签：php, mod-rewrite

在我的 .htaccess 文件中，我有以下重写规则

```
RewriteRule ^([a-z]*)$ work.php?album=$1 [L] 
```

我正在读取根目录中的所有目录并创建链接，例如

PHP中的代码

```
$dir=glob('images/works/*');
$dir_listing=array();
foreach($dir as $list)  
{
if(is_dir($list))
$dir_listing[]= (basename($list));
}
foreach($dir_listing as $folders )  
echo"<a href='$folders' ><img src='Default-thumbnail-folder.jpg' /> </a>"; 
```

问题是我在工作目录*{alb,ban,bas}下有三个文件夹*

第一个和最后一个*{alb 和 bas}*适用于我的重定向规则*URL{siteName/works/bas}*

但是第二个 {ban} 创建了一个类似*{siteName/works/ban/}*的 URL注意额外的**“/”**正在造成问题，似乎对于某些文件夹名称它正在造成问题，所以请帮助我创建正确的重定向规则

我想要一个链接

```
<a href="alb" >About</a> // to redirect to work.php?content=about 
```

我还注意到，如果浏览器中的 URL 类似于 work/alb/ CSS 未应用，我尝试过

```
<link href="sample.css" rel="stylesheet" type="text/css" /> 
```

和

```
<link href="css/sample.css" rel="stylesheet" type="text/css" /> 
```

它不适用于像 {works/about/} 这样的 URL 它适用于 {works/about}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:59:23.050

简单的！

尝试将您的重写规则更改为：

```
RewriteRule ^([a-z]*)/?$ work.php?album=$1 [L] 
```

所以最后的 " `/`" 可能出现也可能不出现，在这两种情况下都可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:31:40.413

避免重写 css URI 使用这些规则

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

至于您的其他问题，您可以在结果 url 上使用修剪以确保最后没有“/” `trim($url,'/');`

# html - 带有图像的块内的文本显示- CSS

> ID：10024400
> 
> 赞同：1
> 
> 时间：2012-04-05T07:34:11.573
> 
> 标签：html, css

 我有一个如下页面；

```
<style type="text/css">
#test a{
  display: block;
  width: 150px;
  height: 50px;
  background-color: #CCCCCC;
}
</style>

<div id="test">
    <a>text text text<img src="image.jpg"></a>
</div> 
```

我得到的结果是；

![当前结果](../Images/735df4df9bedd6d2c001ce74670b0796.png)

但我想要类似的东西；

![需要结果](../Images/d2c7e2a8b4563b5fb7c5fd4498bf7238.png) 

****[这](http://jsfiddle.net/blasteralfred/nPSBL/)**是小提琴**

 **有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:36:38.897

您可以添加`vertical-align:top`到图像

```
#test img{vertical-align:top;} 
```

[更新的小提琴](http://jsfiddle.net/nPSBL/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T07:38:57.413

您好，您可以定义`#test img {vertical-align:top;}`

像这样

**css**

```
#test a{
  display: block;
  width: 150px;
  height: 50px;
  background-color: #CCCCCC;
}

#test img{vertical-align:top;} 
```

**HTML**

```
<div id="test">
    <a>text text text<img src="http://i.imgur.com/VlyB1.jpg"></a>
</div> 
```

现场演示[http://jsfiddle.net/rohitazad/nPSBL/2/](http://jsfiddle.net/rohitazad/nPSBL/2/) ​</p>

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-05T07:35:48.373

尝试添加到 CSS：

```
#test a {
    vertical-align: top;
} 
```**

# xcode - xcode 4.2 与 ios5.1

> ID：10024401
> 
> 赞同：0
> 
> 时间：2012-04-05T07:34:15.043
> 
> 标签：xcode

我有带有 OS X 10.7.2 的 Xcode 4.2 版，我试图在运行 iOS 5.1 的新 iPad 上安装我们的应用程序。问题是 Xcode 无法将 iPad 识别为可部署设备。我知道这是一个常见问题，但请通读。

我在组织者那里得到这个：（在推送“用于开发”之后）

```
The version of iOS on “iPad” does not match any of the versions of iOS supported for development with this installation of the iOS SDK. Please restore the device to a version of the OS listed below, or update to the latest version of the iOS SDK; which is available here.

OS Installed on iPad
5.1 (9B176)

Xcode Supported iOS Versions
Latest
5.0 (9A334)
4.3
4.2 
```

现在我知道，为了将 iOS 5.1 设备连接到 Xcode，我需要最新版本的 Xcode，但我可以将另一部装有 iOS 5.1 的 iPhone 连接到同一个 Xcode 并在其中部署应用程序。

这是为什么？

它们之间唯一不同的是，这款 iPhone 之前连接了 Xcode，而 iPad 没有。我确实设法使用 iOS 5.1 在 iPhone 上安装了一个应用程序！

这里发生了什么？如果我可以安装到 5.1，我不想安装新的 Xcode。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:54:46.237

Xcode 不会让您构建到高于其支持的 iOS 版本，在这种情况下，使用 Xcode 4.2，您将无法部署到 iOS 5.1。我建议更新到 OS X Lion 10.7.3 并下载 4.3.2 版本的 Xcode。执行此操作，您将能够毫无问题地部署到您的 5.1 设备。除此之外，第二个设备应该不能从 Xcode 接收构建。请检查有问题的设备是否实际上运行 iOS 5.0.1 而不是 5.1，因为 5.1 将无法在 Xcode 4.2 上运行，而 5.0.1 将。

# excel - 如何删除字符串中的换行符

> ID：10024402
> 
> 赞同：52
> 
> 时间：2012-04-05T07:34:17.020
> 
> 标签：excel, vba

如果我的字符串以换行符结尾，我想从字符串中删除换行符。

```
Sub linebreak(myString)
    If Len(myString) <> 0 Then
        If Right$(myString, 1) = vbCrLf Or Right$(myString, 1) = vbNewLine Then myString = Left$(myString, Len(myString) - 1)
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-04-05T11:19:24.527

## 概括

```
str = Replace(str, vbLf, "") 
```

此代码将所有换行符从代码中取出

如果你只想要最后一个：

```
If Right(str, 1) = vbLf Then str = Left(str, Len(str) - 1) 
```

是你如何尝试确定的方式。

* * *

## 背景信息

**换行 = ASCII`10`**，**换页 = ASCII`12`**和**回车 = ASCII`13`**。在这里，我们清楚地看到了我们都知道的：PC 来自（电动）打字机。

`vbLf`is `Chr (10)`and 表示光标向下跳一行（打字机：转动滚轮）

`vbCr`is `Chr (13)`and 表示光标跳到开头（打字机：拉回卷）

在**DOS**中，换行符总是`VBCrLf`或`Chr (13) & Chr (10)`，无论如何在文件中，但例如在 VB 中的文本框也是如此。

另一方面，在**Excel 单元格**`VBLf`中，换行符仅为，即使没有 ，第二行也会从第一个位置开始`vbCr`。**然后再深入一**格**。`vbCrLf`**

所以这取决于你从哪里阅读和获取你的字符串。如果要删除字符串中的所有`vbLf`( `Chr(10)`) 和`vbCr`( `Char(13)`)，可以这样做：

```
strText = Replace(Replace(strText, Chr(10), ""), Chr(13), "") 
```

如果你只想删除最后一个，你可以像这样测试：

```
If Right(str, 1) = vbLf or Right(str, 1) = vbCr Then str = Left(str, Len(str) - 1) 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-04-09T04:15:42.357

`vbCrLf`并且`vbNewLine`实际上是两个字符长，所以改为`Right$(myString, 2)`

```
Sub linebreak(myString)
    If Len(myString) <> 0 Then
        If Right$(myString, 2) = vbCrLf Or Right$(myString, 2) = vbNewLine Then 
            myString = Left$(myString, Len(myString) - 2)
        End If
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-08-27T17:08:04.793

尝试以下行：

```
CleanString = Application.WorksheetFunction.Clean(MyString) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-05T09:11:57.827

当您使用 Excel 时，您不需要 VBA 来实现这一点，您可以简单地使用内置的“Clean()”函数，这将删除回车、换行等，例如：

```
=Clean(MyString) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-09-23T10:38:34.417

可以通过这种方式从 VBA 调用 Clean 函数：

`Range("A1").Value = Application.WorksheetFunction.Clean(Range("A1"))`

[然而，正如这里](https://support.office.com/en-us/article/Remove-spaces-and-nonprinting-characters-from-text-023f3a08-3d56-49e4-bf0c-fe5303222c9d?CTT=5&origin=HP010062560&CorrelationId=374c0217-a015-4bc8-8b6c-63b7e0c1a11d&ui=en-US&rs=en-US&ad=US)所写，CLEAN 函数旨在从文本中删除 7 位 ASCII 代码（值 0 到 31）中的前 32 个非打印字符。在 Unicode 字符集中，还有其他非打印字符（值 127、129、141、143、144 和 157）。CLEAN 函数本身不会删除这些额外的非打印字符。

**Rick Rothstein** 已经编写了代码来处理这种[情况](http://www.excelfox.com/forum/f13/trim-all-cells-in-a-worksheet-vba-155/#post1092)：

```
Function CleanTrim(ByVal S As String, Optional ConvertNonBreakingSpace As Boolean = True) As String
  Dim X As Long, CodesToClean As Variant
  CodesToClean = Array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, _
                       21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 127, 129, 141, 143, 144, 157)
  If ConvertNonBreakingSpace Then S = Replace(S, Chr(160), " ")
  For X = LBound(CodesToClean) To UBound(CodesToClean)
    If InStr(S, Chr(CodesToClean(X))) Then S = Replace(S, Chr(CodesToClean(X)), "")
  Next
  CleanTrim = WorksheetFunction.Trim(S)
End Function 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-01-23T17:14:29.787

只是这个：

```
str = Replace(str, vbCrLf, "") 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-12-21T23:08:24.007

```
mystring = Replace(mystring, Chr(10), "") 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-17T10:17:22.767

替换（yourString，vbNewLine，“”，，，，vbTextCompare）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-08-25T09:55:41.117

我知道这篇文章很旧，但我找不到任何可以做到这一点的东西。所以我终于把所有论坛的这个放在一起。

这将删除左右所有换行符，并删除所有空白行。然后修剪一切看起来不错。改变你认为合适的。如果有兴趣，我还制作了一个删除所有换行符的。泰

```
 Sub RemoveBlankLines()
    Application.ScreenUpdating = False
    Dim rngCel As Range
    Dim strOldVal As String
    Dim strNewVal As String

    For Each rngCel In Selection
        If rngCel.HasFormula = False Then
            strOldVal = rngCel.Value
            strNewVal = strOldVal
            Debug.Print rngCel.Address

            Do
            If Left(strNewVal, 1) = vbLf Then strNewVal = Right(strNewVal, Len(strNewVal) - 1)
            If strNewVal = strOldVal Then Exit Do
                strOldVal = strNewVal
            Loop

            Do
            If Right(strNewVal, 1) = vbLf Then strNewVal = Left(strNewVal, Len(strNewVal) - 1)
            If strNewVal = strOldVal Then Exit Do
                strOldVal = strNewVal
            Loop

            Do
            strNewVal = Replace(strNewVal, vbLf & vbLf, "^")
            strNewVal = Replace(strNewVal, Replace(String(Len(strNewVal) - _
                        Len(Replace(strNewVal, "^", "")), "^"), "^", "^"), "^")
            strNewVal = Replace(strNewVal, "^", vbLf)

            If strNewVal = strOldVal Then Exit Do
                strOldVal = strNewVal
            Loop

            If rngCel.Value <> strNewVal Then
                rngCel = strNewVal
            End If

        rngCel.Value = Application.Trim(rngCel.Value)
        End If
    Next rngCel
    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-12T08:02:04.350

```
Private Sub Form_Load()
    Dim s As String

    s = "test" & vbCrLf & "this" & vbCrLf & vbCrLf
    Debug.Print (s & Len(s))

    s = Left(s, Len(s) - Len(vbCrLf))
    Debug.Print (s & Len(s))
End Sub 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-19T16:08:02.963

没有其他答案（除了一个例外，请参阅我的编辑）处理有多个尾随回车的情况。如果目标是创建一个类似于“Trim”的函数来删除回车符和空格，那么您可能希望它足够健壮，可以删除尽可能多的，而不仅仅是一个。另外，我建议避免在 VBA 中使用“左”或“右”函数，因为它们在 VB.Net 中不存在。有时可能需要将 Office VBA 宏转换为 VSTO COM 加载项，因此避免使用仅存在于 VBA 中的函数是一个好习惯。

```
Function RemoveTrailingWhiteSpace(s As String) As String
    RemoveTrailingWhiteSpace = s
    Dim StrLen As Long
    StrLen = Len(RemoveTrailingWhiteSpace)
    While (StrLen > 0 And (Mid(RemoveTrailingWhiteSpace, StrLen) = vbCr Or Mid(RemoveTrailingWhiteSpace, StrLen) = vbLf) Or Mid(RemoveTrailingWhiteSpace, StrLen) = " ")
        RemoveTrailingWhiteSpace = Mid(RemoveTrailingWhiteSpace, 1, StrLen - 1)
        StrLen = Len(RemoveTrailingWhiteSpace)
    Wend
End Function 
```

编辑：我应该澄清这里列出的另一个答案是从字符串的两端修剪回车符和空格，但它看起来更加复杂。这可以相当简洁地完成。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-04-14T20:36:21.573

从来没有人建议过 RegExp 解决方案。所以这里有一个：

```
Function TrimTrailingLineBreak(pText)
    Dim oRE: Set oRE = New RegExp: oRE.Global = True
    oRE.Pattern = "(.*?)(\n|(\r\n)){1}$"
    TrimTrailingLineBreak = oRE.Replace(pText, "$1")
End Function 
```

它捕获并返回所有内容，直到文本末尾的单个 ( `{1}`) 尾随换行 ( `\n`) 或回车和换行 ( )。 要删除所有尾随换行符，请更改为. 并删除所有尾随空格（包括换行符）使用.`\r\n``$`
`{1}``*`
`oRE.Pattern = "(.*?)\s*$"`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-01-11T11:15:19.570

我希望这会做。否则，可以直接问我

```
Sub RemoveBlankLines()
    Application.ScreenUpdating = False
    Dim rngCel As Range
    Dim strOldVal As String
    Dim strNewVal As String

    For Each rngCel In Selection
        If rngCel.HasFormula = False Then
            strOldVal = rngCel.Value
            strNewVal = strOldVal
            Debug.Print rngCel.Address

            Do
            If Left(strNewVal, 1) = vbLf Then strNewVal = Right(strNewVal, Len(strNewVal) - 1)
            If strNewVal = strOldVal Then Exit Do
                strOldVal = strNewVal
            Loop

            Do
            If Right(strNewVal, 1) = vbLf Then strNewVal = Left(strNewVal, Len(strNewVal) - 1)
            If strNewVal = strOldVal Then Exit Do
                strOldVal = strNewVal
            Loop

            Do
            strNewVal = Replace(strNewVal, vbLf & vbLf, "^")
            strNewVal = Replace(strNewVal, Replace(String(Len(strNewVal) - _
                        Len(Replace(strNewVal, "^", "")), "^"), "^", "^"), "^")
            strNewVal = Replace(strNewVal, "^", vbLf)

            If strNewVal = strOldVal Then Exit Do
                strOldVal = strNewVal
            Loop

            If rngCel.Value <> strNewVal Then
                rngCel = strNewVal
            End If

        rngCel.Value = Application.Trim(rngCel.Value)
        End If
    Next rngCel
    Application.ScreenUpdating = True
End Sub
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2020-02-07T03:06:01.870

我有完全相同的问题。我制作了一个单独的函数，可以在需要时轻松调用：

```
Function removeLineBreakIfAtEnd(s As String) As String
    If Right(s, 1) = vbLf Then s = Left(s, Len(s) - 2)
    removeLineBreakIfAtEnd = s
End Function 
```

我发现我只需要检查最后一个字符并执行 -2 来删除换行符。我还发现检查 vbLf 是检测换行符的唯一方法。该函数可以这样调用：

```
Sub MainSub()
    Dim myString As String
    myString = "Hello" & vbCrLf
    myString = removeLineBreakIfAtEnd(myString)
    MsgBox ("Here is the resulting string: '" & myString & "'")
End Sub 
```

# javascript - jQuery：当用户单击 div 水平滚动条箭头时触发事件

> ID：10024403
> 
> 赞同：2
> 
> 时间：2012-04-05T07:34:19.033
> 
> 标签：javascript, javascript-events, jquery

我有一个水平滚动的 div。

![在此处输入图像描述](../Images/0afc2f329c0b2bc64bb1ffb5805b8979.png)

*   有什么方法可以检测到使用 jquery 对水平滚动箭头的点击？

> **笔记：**
> 
> 实际上，当用户单击右滚动箭头时，我希望滚动将固定的像素数向右移动，反之亦然。
> 
> 该事件不应在滚动时触发。仅当用户明确单击滚动箭头时才应触发它。
> 
> 有多个具有滚动条的 div，具有相同的类且没有 id。
> 
> 宁愿不使用任何插件

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:54:52.320

这是您想要的演示

[http://jsbin.com/opufow/4/edit](http://jsbin.com/opufow/4/edit)

我希望这能帮到您？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:28:21.393

**编辑2** ：另一个建议是根据您对滚动区域的实现来做这样的*事情（请参阅*[工作 jsfiddle](http://jsfiddle.net/L7tsT/1/)）：

```
function CustomScrollArrow(elementToScroll) {
    var $el = $(elementToScroll);
    return $('<a>Click me to scroll</a>').css(/*...*/).click(function(){
        $el.scrollLeft($el.scrollLeft()+10);
    });
}

$('.ScrollAreaClass').each(function(){
    // You could choose to append to your scrolling
    // areas or their wrapper classes or whatever...
    $('body').append(new CustomScrollArrow(this));
});​ 
```

之后，只需为您的手工箭头设计样式即可。

**编辑 1**：我看到你更新了你的问题，所以这里有一个更新的答案和一个替代解决方案。

您可以尝试通过使用自定义滚动条实现来规避该问题，例如Kelvin Luck 的[jScrollPane](http://jscrollpane.kelvinluck.com)或任何其他的，等等。如果解决方案在箭头上提供点击事件 - 那么你就设置好了。否则只是做一些修补......

但是，我坚持我的观点，除非您希望在浏览器执行箭头单击**之前**执行某个操作，否则我建议您为该单击的实际结果（即滚动）添加一个事件处理程序。

这样做将有助于避免浏览器中滚动的各种实现之间的不一致；如果以其他方式（即滑动手势）执行滚动，将继续工作；如果有一些 javascript 代码替换了滚动条的默认浏览器实现，它仍然可以工作。

jQuery 提供[.scroll](http://api.jquery.com/scroll/)处理程序来捕获滚动，并提供[.scrollLeft](http://api.jquery.com/scrollLeft/)来确定水平滚动内容的结果位置。

尝试**[工作的 jsfiddle](http://jsfiddle.net/maAGz/2/)**或查看以下代码：

```
// Cache the initial scroll position:
var initialLeftScroll = $('#wrapper').scrollLeft();
// Bind event:
$('#wrapper').scroll(function (ev) { 
    // Get new horizontal scroll offset:
    var currentLeftScroll = $('#wrapper').scrollLeft();
    // Determine the difference
    // (did the user scroll horizontally or just vertically?):
    var leftScrollDifference = currentLeftScroll - initialLeftScroll;
    // Now we can check 
    if (leftScrollDifference) {
        /* Do something here */
    }
    // Reset the cache:
    initialLeftScroll = currentLeftScroll;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T07:43:04.153

您可以使用 jquery 的 .scroll 功能。

# javascript - HTML5 中的麦克风捕获

> ID：10024409
> 
> 赞同：3
> 
> 时间：2012-04-05T07:34:39.040
> 
> 标签：javascript, html

有没有办法在 HTML5/JavaScript 中访问麦克风？

它计划用于音频流，而不是录制。因此，无需写入文件等，而只是流式传输麦克风输入。

有一个音频 API 和 getUserMedia()。目前，似乎无法获取音频。有没有办法或解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:52:00.123

如果您在输入字段中添加“x-webkit-speech”，我相信所有 Web 工具包浏览器都会添加启用音频输入的 HTML5 音频图标。

```
<input type="text" name="query" spellcheck="false" placeholder="Search the Site" tabindex="1" x-webkit-speech> 
```

# lwuit - 如何在代码中使用新渲染器的标签（使用 GUI 创建）（LWUIT v1.5）

> ID：10024410
> 
> 赞同：-1
> 
> 时间：2012-04-05T07:34:44.397
> 
> 标签：lwuit

我在资源编辑器中创建了一个渲染器，带有三个标签（图标、目标、lblDate）。

并在 StateMachine.java 中的 Listmodel 事件的列表中使用它

```
cmp.setModel(new DefaultListModel(payments));
         cmp.setRenderer(new  DefaultListCellRenderer(false) {
        public Component getCellRendererComponent(Component list, Object model, Object value, int index, boolean isSelected) {
               if(value instanceof Payment) { 
                   Payment r = (Payment)value;
                 super.getCellRendererComponent(list, model, r.getPhoneNumber(), index, isSelected);                     
                 setText( r.toString());
                return this;
               }
               return super.getCellRendererComponent(list, model, value, index, isSelected);
        }     
    }); 
```

在这段代码中，我只能更改渲染器的目标标签

```
setText( r.toString()); 
```

但是如何使用其他标签，例如 lblDate？如何设置它们的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T11:58:58.270

[您没有为渲染器使用 GUI 构建器，您可以在Codename One Blog](http://codenameone.blogspot.com/2010/12/lwuit-resource-editor-tutorial-part-6.html)中查看有关如何使用它的详细视频。您正在使用一个 DefaultListCellRenderer，它是一个标签，因此它只能包含一个字符串和一个图像，您需要使用更精细的基础并实现 ListCellRenderer 接口或使用带有 Hashtable 数据模型的标准 GUI 构建器支持。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T06:40:42.940

我刚刚得到了 Shai Almog 的答案。谢谢。答案是在 GUI 中使用类似于渲染器的 Hashtable 向量。

图形用户界面：

![在此处输入图像描述](../Images/54c35506e300d26ae3924e31e023f7fc.png)

示例代码：

```
 Vector PaymentsHashVec = new Vector() ;
   for(int iter = 0 ; iter < getPayments().size() ; iter++) {
      Hashtable hsh = new Hashtable();
      Payment p = (Payment)getPayments().elementAt(iter);
      hsh.put("phn", p.getPhoneNumber()) ;
      hsh.put("ant",p.getOriginalAmount()+"/ " + p.getAmount()) ;
      hsh.put("btm",p.getDateSubmitted()) ;
      PaymentsHashVec.addElement(hsh);                                  
   }
 cmp.setModel(new DefaultListModel(PaymentsHashVec)); 
```

# html - 使用 html5 中的自定义按钮更改滑块栏按钮

> ID：10024412
> 
> 赞同：2
> 
> 时间：2012-04-05T07:34:50.090
> 
> 标签：html

是否可以在任何自定义按钮中更改滑块按钮（用于读取数值）？请提出您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:39:34.910

原来，webkit中有：

```
 input[type="range"]{
   -webkit-appearance:none !important;
 }

 input[type="range"]::-webkit-slider-thumb{
   -webkit-appearance:none !important;  
 } 
```

然后，您可以为每个选择器添加所需的任何属性。背景、渐变等...

希望有帮助！

另请参阅此链接：[http ://webstutorial.com/range-input-slider-html5-css3/html-5](http://webstutorial.com/range-input-slider-html5-css3/html-5)

# windows - Rsync for Windows 无法在任务计划程序上运行

> ID：10024415
> 
> 赞同：2
> 
> 时间：2012-04-05T07:35:01.667
> 
> 标签：windows, rsync, scheduled-tasks

我有下面说明的批处理脚本，我在任务调度程序（Windows 2008 R2）上运行它。运行时，任务的状态仍然是运行，耗时过长。我看不到任何错误，甚至在历史记录或任何日志中都看不到。我已经在 Windows 中设置了位置的正确所有者和权限。任何人都可以给我一些灯？谢谢！

```
SETLOCAL

SET CWRSYNCHOME=C:\scripts\CWRSYNC
SET CYGWIN=nontsec
SET HOME=%HOMEDRIVE%%HOMEPATH%
SET CWOLDPATH=%PATH%
SET PATH=%CWRSYNCHOME%\BIN;%PATH%

rsync -rltDuv --progress -e "ssh -i /cygdrive/c/scripts/id_rsa"  /cygdrive/c/backup/ root@123.123.123.123:/path/to/backup/ > c:/scripts/logs.txt 2>&1 
```

# firefox - 萤火虫的替代品

> ID：10024419
> 
> 赞同：2
> 
> 时间：2012-04-05T07:35:12.243
> 
> 标签：firefox, firebug, firefox-developer-tools

Firebug 在工作中被阻止，所以有人可以建议它的替代方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T07:38:24.670

FireBug 1.9.0 是块，但最新版本 1.9.1 正在运行： [https ://addons.mozilla.org/en-US/firefox/addon/firebug](https://addons.mozilla.org/en-US/firefox/addon/firebug)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T18:52:25.280

Firefox 现在有一个内置工具，可以包含并扩展 Firebug。可以使用以下键盘快捷键激活内置脚本面板：

*   视窗：`Ctrl + Shift + s`
*   操作系统：`command + shift + s`

以下是其他 Firebug 等效项的快捷方式：

**网络面板：**

*   视窗：`Ctrl + Shift + k`
*   操作系统：`command + shift + k`

**控制台面板***

*   视窗：`Ctrl + Shift + k`
*   操作系统：`command + shift + k`

*控制台位于网络内容下方

**HTML面板：**

*   视窗：`Ctrl + Shift + i`
*   操作系统：`command + shift + i`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T19:15:08.730

Google Chrome 和 Internet Explorer 都内置了类似的功能。您可以按 访问这些功能`F12`。我偶尔使用这些作为 Firebug 的替代品。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T07:37:09.990

您可以使用 Mozilla 自己的调试器。虽然它不像萤火虫那么先进。它带有FF 10+

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T19:20:16.943

萤火虫精简版怎么样？无需安装（虽然我只用于 IE..）

[http://getfirebug.com/firebuglite](http://getfirebug.com/firebuglite)

# jquery-cycle - Jquery 循环幻灯片在 Wordpress 博客上的页面加载上重叠

> ID：10024420
> 
> 赞同：0
> 
> 时间：2012-04-05T07:35:16.333
> 
> 标签：jquery-cycle

我正在使用使用 jquery.cycle.all.2.72.js 的 wordpress 插件 WP Featured Content Slider。我遇到了一个非常奇怪的视觉故障。在页面加载时，所有幻灯片都显示在彼此的顶部，然后随着脚本循环浏览每张幻灯片，***有时***它最终会自行修复（直到重新加载页面）。

我在这个论坛上发现了另一个主题与相同的问题和解决方案列出了[jQuery Cycle Slides 在页面加载时重叠](https://stackoverflow.com/questions/5760157/jquery-cycle-slides-overlap-on-page-load)

但我不是技术人员..有人可以告诉我需要将上述解决方案中建议的代码放在 wordpress 自托管博客中的什么位置。

在这里找到示例[http://ramblingego.com](http://ramblingego.com)

内容滑块 PHP 代码如下

```
<?php
$direct_path =  get_bloginfo('wpurl')."/wp-content/plugins/wp-featured-content-slider";
?>

<script type="text/javascript">
    jQuery('#featured_slider ul').cycle({ 
        fx: '<?php $effect = get_option('effect'); if(!empty($effect)) {echo $effect;} else {echo "scrollLeft";}?>',
        prev: '.feat_prev',
        next: '.feat_next',
        speed:  800, 
        timeout: <?php $timeout = get_option('timeout'); if(!empty($timeout)) {echo $timeout;} else {echo 4000;}?>, 
        pager:  null
    });
</script>

<style>

#featured_slider {
float: left;
margin: 10px 0px;
position: relative;
background-color: #<?php $bg = get_option('feat_bg'); if(!empty($bg)) {echo $bg;} else {echo "FFF";}?>;
border: 1px solid #<?php $border = get_option('feat_border'); if(!empty($border)) {echo $border;} else {echo "CCC";}?>;
width: <?php $width = get_option('feat_width'); if(!empty($width)) {echo $width;} else {echo "860";}?>px;
}

#featured_slider ul, #featured_slider ul li {
list-style: none !important;
border: none !important;
float: left;
margin: 10px;
width: <?php $width = get_option('feat_width'); if(!empty($width)) {echo $width;} else {echo "860";}?>px;
height: <?php $height = get_option('feat_height'); if(!empty($height)) {echo $height;} else {echo "210";}?>px;
}

#featured_slider .img_right {
float: left;
width: <?php $img_width = get_option('img_width'); if(!empty($img_width)) {echo $img_width;} else {echo "320";}?>px;
height: <?php $img_height = get_option('img_height'); if(!empty($img_height)) {echo $img_height;} else {echo "200";}?>px;
margin-left: 20px;
}

#featured_slider .img_right img {
width: <?php $img_width = get_option('img_width'); if(!empty($img_width)) {echo $img_width;} else {echo "320";}?>px;
height: <?php $img_height = get_option('img_height'); if(!empty($img_height)) {echo $img_height;} else {echo "200";}?>px;
}

#featured_slider .content_left {
float: left;
color: #<?php $text_color = get_option('text_color'); if(!empty($text_color)) {echo $text_color;} else {echo "333";}?>;
width: <?php $text_width = get_option('text_width'); if(!empty($text_width)) {echo $text_width;} else {echo "450";}?>px;
}

#featured_slider .content_left p {
line-height: 22px !important;
color: #<?php $text_color = get_option('text_color'); if(!empty($text_color)) {echo $text_color;} else {echo "333";}?>;
}

#featured_slider .content_left h2 {
font-size: 20px !important;
margin-bottom: 20px;
}

#featured_slider .feat_prev {
background: transparent url(<?php echo $direct_path;?>/images/sprite.png) no-repeat;
background-position: 0px 0px;
width: 17px;
z-index: 10;
height: 16px;
position: absolute;
left: 20px;
cursor: pointer;
bottom: 30px;
float: left;
}

#featured_slider .feat_prev:hover {
background-position: 0px -16px;
}

#featured_slider .feat_next {
background: transparent url(<?php echo $direct_path;?>/images/sprite.png) no-repeat;
background-position: -17px 0px;
width: 17px;
z-index: 10;
height: 16px;
position: absolute;
left: 40px;
bottom: 30px;
cursor: pointer;
}

#featured_slider .feat_next:hover {
background-position: -18px -16px;
}

</style>

<div id="featured_slider">

    <ul id="slider">

        <?php

        $sort = get_option('sort'); if(empty($sort)){$sort = "post_date";}
        $order = get_option('order'); if(empty($order)){$order = "DESC";}
        $limit = get_option('limit'); if(empty($limit)){$limit = 350;}
        $points = get_option('points'); if(empty($points)){$points = "...";}
        $post_limit = get_option('limit_posts'); if(empty($limit_posts)){$limit_posts = "-1";}

        global $wpdb;

        global $post;

        $args = array( 'meta_key' => 'feat_slider', 'meta_value'=> '1', 'suppress_filters' => 0, 'post_type' => array('post', 'page'), 'orderby' => $sort, 'order' => $order, 'numberposts'=> $post_limit);

        $myposts = get_posts( $args );

        foreach( $myposts as $post ) :  setup_postdata($post);

            $custom = get_post_custom($post->ID);

            $thumb = get_wp_generated_thumb("feat_slider");

        ?>

        <li><div class="content_left"><h2><a href="<?php the_permalink();?>"><?php the_title();?></a></h2><?php echo cut_text_feat(get_the_content(), $limit, $points);?></div><div class="img_right"><a href="<?php the_permalink();?>"><img src="<?php echo $thumb;?>" /></a></div></li>

        <?php endforeach; ?>

    </ul>

    <div class="feat_next"></div>
    <div class="feat_prev"></div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T01:19:26.137

如果您无法使用 display:hidden 输出所有幻灯片，您可以使用 jquery 隐藏所有幻灯片（第一个除外），然后循环插件应该完成其余的工作。

像这样：

```
<script type="text/javascript">
    jQuery('#featured_slider ul>li:gt(0)').hide(function() {

        jQuery('#featured_slider ul').cycle({ 
        fx: '<?php $effect = get_option('effect'); if(!empty($effect)) {echo $effect;} else {echo "scrollLeft";}?>',
        prev: '.feat_prev',
        next: '.feat_next',
        speed:  800, 
        timeout: <?php $timeout = get_option('timeout'); if(!empty($timeout)) {echo $timeout;} else {echo 4000;}?>, 
        pager:  null
    });

}); 
```

# sql - SQL 将查询“商品详情 - 001”更新为“产品 ID - 001”

> ID：10024423
> 
> 赞同：0
> 
> 时间：2012-04-05T07:35:18.640
> 
> 标签：sql

我想知道是否有人知道如何更新这样的信息

```
Merchandise Detail - 001
Merchandise Detail - 002 to
Merchandise Detail - 499
Merchandise Detail - 500 
```

我想一次更新所有信息

```
Product ID - 001
Product ID - 002 to
Product ID - 499
Product ID - 500 
```

基本上“-Number”前面的所有内容都是一样的。
有更新命令我可以做到吗？非常感谢。

我正在使用 PHPmyadmin。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:40:05.520

```
update TableName set ColumnName=replace(ColumnName, 'Merchandise Detail', 'Product ID') 
```

如果需要，添加 where 子句！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T07:40:08.013

```
update your_table
set your_column = replace(your_column, 'Merchandise Detail', 'Product ID') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T07:40:24.660

在 MySQL 中，您可以使用

```
UPDATE your_table
SET your_field = REPLACE(your_field, 'Merchandise Detail', 'Product ID') 
```

# wordpress - 我网站中的某些页面没有加载 doctype，所以它以怪癖模式显示，有人可以帮助我吗？

> ID：10024429
> 
> 赞同：0
> 
> 时间：2012-04-05T07:35:35.900
> 
> 标签：wordpress, internet-explorer, internet-explorer-9, quirks-mode

这是我的网站： http: [//kidscare.edu.vn](http://kidscare.edu.vn)

用IE9打开，首页切换到quirks模式，显示难看

但是当打开另一个页面时，它会显示很好[http://kidscare.edu.vn/babiescare](http://kidscare.edu.vn/babiescare)

我使用`F12`工具检查，我看到文件类型没有加载到标题中

谁能帮我解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:42:47.427

不要使用`F12`工具（Firebug 或 IE 的等效工具）来查看是否加载了 doctype。这些工具不会向您显示源代码，它们会向您展示它们如何解释源代码。

要实际查看源，请右键单击屏幕并选择“查看源”。

我相信这以 quirksmode 显示的原因是因为您使用的是过渡文档类型。

所以尝试使用严格的文档类型：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

# c++ - 读/写操作不好也不坏

> ID：10024430
> 
> 赞同：0
> 
> 时间：2012-04-05T07:35:37.773
> 
> 标签：c++, visual-c++, buffer

我正在编写人脸检测算法。在我的代码中，我正在解析一个 XML 文件（以递归方式，非常低效，我需要大约 4 分钟来解析整个 XML 文件）。我想使用**Iosteam**二进制文件将 XML 内容保存到文件中。我在 C++ 中使用结构来使用原始数据。

**我的目标是仅**在原始数据文件不存在时才解析 XML 。

该方法的工作原理如下：

1.  如果原始数据文件不存在，则解析 XML 文件并将数据保存到文件中。
2.  如果原始数据文件存在，则从文件中读取原始数据

我的问题是：每当我打开原始数据文件并从中读取时。我只能从文件中读取少量字节，我不知道有多少，但在某个点上，我的缓冲区上只收到 0x00 数据。

我的猜测：我相信这与操作系统缓冲区有关，它有一定数量的缓冲区用于读写操作。这一点我可能是错的。虽然我不确定操作中的哪一个效果不好，但要么是写入，要么是读取。

我正在考虑逐个字符或逐行写入/读取原始数据。另一方面，该文件不包含文本，这意味着我无法逐行读取或逐字符读取。

原始数据大小为

```
 size_t datasize = DataSize();   ==  196876 (Byte) 
```

在这个函数中检索哪个

```
/* Get the upper bound for predefined cascade size  */
size_t CCacadeInterpreter::DataSize()           
{
// this is an upper boundary for the whole hidden cascade size
size_t datasize = sizeof(HaarClassifierCascade) * TOTAL_CASCADE+    
    sizeof(HaarStageClassifier)*TOTAL_STAGES +
    sizeof(HaarClassifier) * TOTAL_CLASSIFIERS  + 
    sizeof(void*)*(TOTAL_CASCADE+TOTAL_STAGES+TOTAL_CLASSIFIERS);   

return datasize;
 } 
```

该方法是这样工作的

```
BYTE * CCacadeInterpreter::Interpreter()
 {
printf("|Phase - Load cascade from memory |  CCacadeInterpreter::Interpreter | \n"); 

size_t datasize = DataSize();
// Create a memory structure 
nextFreeSpace = pStartMemoryLocation = new BYTE [datasize];
memset(nextFreeSpace,0x00,datasize);

// Try to open a predefined cascade file on the current folder (instead of parsing the file        again)
fstream stream; 
stream.open(cascadeSavePath);  // ...try existing file          
if (stream.is_open())  
{
    stream.seekg(0,ios::beg);
    stream.read((char*)pStartMemoryLocation , datasize);  // **ream from file** 
    stream.close();
    printf("|Load cascade from saved memory location |  CCacadeInterpreter::Interpreter | \n"); 
    printf("Completed\n\n"); 
    stream.close();
    return pStartMemoryLocation; 
}

        // Open the cascade file and parse the cascade xml file 
std::fstream cascadeFile;
cascadeFile.open(cascadeDestanationPath, std::fstream::in);      // open the file with read only attributes 
if (!cascadeFile.is_open())
{
    printf("Error: couldn't open cascade XML file\n"); 
    delete pStartMemoryLocation; 
    return NULL;
}

// Read the file XML file , line by line
string buffer, str; 
getline(cascadeFile,str);
while(cascadeFile)
{
    buffer+=str; 
    getline(cascadeFile,str);
}
cascadeFile.close(); 
split(buffer, '<',m_tokens); 

// Parsing begins 
pHaarClassifierCascade = (HaarClassifierCascade*)nextFreeSpace; 
nextFreeSpace += sizeof(HaarClassifierCascade);
pHaarClassifierCascade->count=0;
pHaarClassifierCascade->orig_window_size_height=20;
pHaarClassifierCascade->orig_window_size_width=20;

m_deptInTree=0;
m_numOfStage = 0; 
m_numOfTotalClassifiers=0;
while (m_tokens.size())
{
    Parsing();
}
// Save the current cascade into a file 
SaveBlockToMemory(pStartMemoryLocation,datasize);
printf("\nCompleted\n\n"); 
return pStartMemoryLocation;
    }

   bool CCacadeInterpreter::SaveBlockToMemory(BYTE * pStartMemoryLocation,size_t dataSize)
   {
fstream stream; 
if (stream.is_open() )   
    stream.close();   

stream.open(cascadeSavePath);  // ...try existing file          
if (!stream.is_open())  // ...else, create new file...
    stream.open(cascadeSavePath, ios_base::in | ios_base::out | ios_base::trunc);

stream.seekg(0,ios::beg);
stream.write((char*)pStartMemoryLocation,dataSize);
stream.close(); 
return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:03:01.473

尝试使用[Boost](http://www.boost.org/doc/libs/1_49_0/libs/iostreams/doc/quick_reference.html) IOstreams 库。它有一个易于使用的包装器来处理文件

# android - ANDROID：Iptables 阻止传入连接

> ID：10024431
> 
> 赞同：1
> 
> 时间：2012-04-05T07:35:40.580
> 
> 标签：android, connection, iptables

我想阻止`iptables`我的 android 设备上的所有传入连接。我知道谷歌应用程序，如游戏商店等。需要一些传入连接（GTalkService 的 fe），它们在阻塞后将无法运行。但我只想使用我的浏览器，所以我知道浏览器不需要传入连接。所以我试图阻止所有传入的连接：

```
iptables -A INPUT --j DROP 
```

现在的问题是，所有连接都被阻止了，我的浏览器也离线了。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:11:31.367

问题是，iptables 不会阻止连接，而是数据包。您所做的是阻止所有传入的数据包，因此您没有收到响应是正常的。您需要添加类似这样的内容，以让数据包通过以下方式形成已建立的连接（您通过打开网页等启动的连接）：

```
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT 
```

阻止所有传入连接会破坏很多事情，因此请谨慎使用。

# java - 在 Solr 中将 java 对象存储为字段

> ID：10024442
> 
> 赞同：1
> 
> 时间：2012-04-05T07:36:32.297
> 
> 标签：java, solr, solrj

在 solr 上索引文档时，我想执行一些预处理并将单词的同义词存储在文档中。我希望它与文件相关联，因此我计划将此 java 2d 数组存储为 solr 中的一个字段。

```
 How can i add a java object as a field while indexing files in solr ? 
```

在 lucene 中，我看到该字段可以是字节数组，因此我序列化我的对象并将其存储为字节数组，然后再检索它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:51:41.220

看看[这个](http://lucidworks.lucidimagination.com/display/solr/Solr+Field+Types#SolrFieldTypes-WorkingwithExternalFiles)。此外，您可以尝试使用 JAXB/JSON 序列化程序或类似方法将其保存为多值字段。

# vb.net - 用于 ANSI 的编码 - vb.net

> ID：10024445
> 
> 赞同：1
> 
> 时间：2012-04-05T07:36:39.000
> 
> 标签：vb.net, encoding

我们需要使用什么编码将文件保存为文本文件（ANSI 类型） - 在保存文本文件时使用 ANSI 编码。在这里使用什么，不将 ANSI 视为一个选项

vb.net 代码 - 编码后应该给出什么。？

```
My.Computer.FileSystem.WriteAllText("d:\binary.txt", strTemp, True,System.Text.Encoding. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T08:00:18.610

ANSI 不是一种编码，它只是“非 Unicode”的通用名称。您通常使用 Encoding.Default，与您的操作系统使用的代码页相同。至少在那台机器上运行的所有程序都可以毫无问题地读取该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T23:09:53.530

这个对我有用：

```
System.Text.Encoding.ASCII 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-26T13:02:32.253

使用具有系统编码的流写入器作为默认值：

```
Dim myfilepath as String = "C:/"
Dim myappendingoption as boolean = True 'True: append text to file, False: overwrite
Dim sw As StreamWriter = New StreamWriter(myfilepath, myappendingoption, System.Text.Encoding.Default)
sw.Write("sometext")
sw.Close() 
```

# jquery - JQuery Accordion 如何使用脚本打开特定标题

> ID：10024447
> 
> 赞同：5
> 
> 时间：2012-04-05T07:36:46.043
> 
> 标签：jquery, header, accordion

我使用以下代码创建了一个手风琴菜单

```
<h3>Level 1</h3>
  <div>Content</div>
<h3>Level 2</h3>
  <div>Content</div>
<h3>Level 3</h3>
  <div>Content</div> 
```

我想使用代码打开不同级别的标题。我尝试查看手风琴和小部件代码，但找不到任何功能。

请帮助我应该使用什么代码来打开特定的标题。以及如何查找应该打开的头部是否已经打开。

我也尝试过使用

```
$("#rightMenuAccordion").activate('activate',1) 
```

如此处所列[，](http://jqueryui.com/demos/accordion/#method-activate)但它说它不存在

这是我用来创建手风琴的代码

```
<div id="rightMenuAccordion" 
    style="position:absolute;width:100%;height:100%;left:0px;top:0px;"></div>

$("#rightMenuAccordion").
    accordion({autoHeight: false, navigation: true, collapsible: false}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:41:11.550

use activate() [FUNCTION](http://docs.jquery.com/UI/Accordion/activate)

see complete [example](http://jsfiddle.net/ZdAPh/)

NOTE: activate() method only works "collapsible:true"

```
$("#rightMenuAccordion").
    accordion({autoHeight: false, navigation: true, collapsible: true});

//by index
$("#rightMenuAccordion").accordion( "option", "active", 2 );

//OR header 
$("h3:last").accordion( "activate",true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T06:36:33.890

var indexOfHeaderToBeOpened = 0;

$("#accordion").accordion('activate', indexOfHeaderToBeOpened);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:46:37.337

初始化手风琴并传递要打开的活动标题索引

```
//setter for making the header be open on page load with active index value
$(".selector").accordion("option","active",activeIndex); 
```

**注意**：`activeIndex`上面应该是一个整数值而不是字符串。第一个标头从索引值 0 开始。

# haskell - 如何避免为执行模式匹配的函数编写样板代码？

> ID：10024455
> 
> 赞同：10
> 
> 时间：2012-04-05T07:37:14.760
> 
> 标签：haskell

在对[另一个问题的](https://stackoverflow.com/q/10005478/91757)[回应](https://stackoverflow.com/a/10007262/91757)中，给出了一个小的 Haskell 代码草图，它使用包装函数来分解出一些代码，用于对命令行参数进行语法检查。这是我试图简化的代码部分：

```
takesSingleArg :: (String -> IO ()) -> [String] -> IO ()
takesSingleArg act [arg] = act arg
takesSingleArg _   _     = showUsageMessage

takesTwoArgs :: (String -> String -> IO ()) -> [String] -> IO ()
takesTwoArgs act [arg1, arg2] = act arg1 arg2
takesTwoArgs _   _            = showUsageMessage 
```

有没有办法（也许使用[Template Haskell](http://www.haskell.org/haskellwiki/Template_Haskell)？）避免为每个数量的参数编写额外的函数？理想情况下，我希望能够写出类似的东西（我正在编写这个语法）

```
generateArgumentWrapper<2, showUsageMessage> 
```

这扩展到

```
\fn args -> case args of
                 [a, b] -> fn a b
                 _      -> showUsageMessage 
```

理想情况下，我什至可以为`generateArgumentWrapper`元函数提供可变数量的参数，这样我就可以做到

```
generateArgumentWrapper<2, asInt, asFilePath, showUsageMessage> 
```

这扩展到

```
\fn args -> case args of
                 [a, b] -> fn (asInt a) (asFilePath b)
                 _      -> showUsageMessage 
```

有人知道实现这一目标的方法吗？`[String]`将命令行参数 ( ) 绑定到任意函数将是一种非常简单的方法。或者是否有完全不同的更好的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T08:47:21.170

Haskell 具有多变量函数。想象一下你有一个像

```
data Act = Run (String -> Act) | Res (IO ()) 
```

有一些功能可以做你想做的事

```
runAct (Run f) x = f x
runAct (Res _) x = error "wrong function type"

takeNargs' 0 (Res b) _ = b
takeNargs' 0 (Run _) _ = error "wrong function type"
takeNargs' n act (x:xs) = takeNargs' (n-1) (runAct act x) xs
takeNargs' _ _ [] = error "not long enough list" 
```

现在，您所需要的只是将函数编组为这种`Act`类型。你需要一些扩展

```
{-# LANGUAGE FlexibleInstances, FlexibleContexts #-} 
```

然后你可以定义

```
class Actable a where
  makeAct :: a -> Act
  numberOfArgs :: a -> Int

instance Actable (String -> IO ()) where
  makeAct f = Run $ Res . f
  numberOfArgs _ = 1

instance Actable (b -> c) => Actable (String -> (b -> c)) where
  makeAct f = Run $ makeAct . f
  numberOfArgs f = 1 + numberOfArgs (f "") 
```

现在你可以定义

```
takeNArgs n act = takeNargs' n (makeAct act) 
```

这使得定义你的原始函数变得更容易

```
takesSingleArg :: (String -> IO ()) -> [String] -> IO ()
takesSingleArg = takeNArgs 1

takesTwoArgs :: (String -> String -> IO ()) -> [String] -> IO ()
takesTwoArgs = takeNArgs 2 
```

但我们可以做得更好

```
takeTheRightNumArgs f = takeNArgs (numberOfArgs f) f 
```

令人惊讶的是，这有效（GHCI）

```
*Main> takeTheRightNumArgs putStrLn ["hello","world"]
hello
*Main> takeTheRightNumArgs (\x y -> putStrLn x >> putStrLn y)  ["hello","world"] 
hello
world 
```

* * *

编辑：上面的代码比它需要的要复杂得多。真的，你想要的只是

```
class TakeArgs a where
   takeArgs :: a -> [String] -> IO ()

instance TakeArgs (IO ()) where
   takeArgs a _ = a

instance TakeArgs a => TakeArgs (String -> a) where
   takeArgs f (x:xs) = takeArgs (f x) xs
   takeArgs f [] = error "end of list" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T14:24:13.267

您可能希望利用现有库来处理命令行参数。我相信现在事实上的标准是[cmdargs](http://hackage.haskell.org/package/cmdargs)，但也存在其他选项，例如[ReadArgs](http://hackage.haskell.org/package/ReadArgs)和[console-program](http://hackage.haskell.org/package/console-program)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T08:38:32.263

组合器是你的朋友。尝试这个：

```
take1 :: [String] -> Maybe String
take1 [x] = Just x
take1 _ = Nothing

take2 :: [String] -> Maybe (String,String)
take2 [x,y] = Just (x,y)
take2 _ = Nothing

take3 :: [String] -> Maybe ((String,String),String)
take3 [x,y,z] = Just ((x,y),z)
take3 _ = Nothing

type ErrorMsg = String

with1 :: (String -> IO ()) -> ErrorMsg -> [String] -> IO ()
with1 f msg = maybe (fail msg) f . take1

with2 :: (String -> String -> IO ()) -> ErrorMsg -> [String] -> IO ()
with2 f msg = maybe (fail msg) (uncurry f) . take2

with3 :: (String -> String -> String -> IO ()) -> ErrorMsg -> [String] -> IO ()
with3 f msg = maybe (fail msg) (uncurry . uncurry $ f) . take3

foo a b c = putStrLn $ a ++ " :: " ++ b ++ " = " ++ c

bar = with3 foo "You must send foo a name, type, definition"

main = do
  bar [ "xs", "[Int]", "[1..3]" ]
  bar [ "xs", "[Int]", "[1..3]", "What am I doing here?" ] 
```

如果你喜欢强大的语言扩展：

```
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies, FlexibleInstances, FlexibleContexts, UndecidableInstances #-}

foo a b c = putStrLn $ a ++ " :: " ++ b ++ " = " ++ c
foo_msg = "You must send foo a name, type, definition"

class ApplyArg a b | a -> b where
  appArg :: ErrorMsg -> a -> [String] -> IO b

instance ApplyArg (IO b) b where
  appArg _msg todo [] = todo
  appArg msg _todo _ = fail msg

instance ApplyArg v q => ApplyArg (String -> v) q where
  appArg msg todo (x:xs) = appArg msg (todo x) xs
  appArg msg _todo _ = fail msg

quux :: [String] -> IO ()
quux xs = appArg foo_msg foo xs

main = do
  quux [ "xs", "[int]", "[1..3]" ]
  quux [ "xs", "[int]", "[1..3]", "what am i doing here?" ] 
```

# apache - 如何在向用户发送页面之前预处理 Apache 上的步骤

> ID：10024456
> 
> 赞同：1
> 
> 时间：2012-04-05T07:37:20.457
> 
> 标签：apache, apache-modules

我有一个 Apache Web 服务器，当用户请求某个页面时，我需要在 Web 服务器之外执行一些进程。我会尝试更清楚一点：当用户请求页面 X 时，我必须启动一个外部程序，将一些会话参数传递给它，等待响应，然后将请求的页面发送给用户。

这有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:13:03.603

我使用了 apache ext_mod_filter：[http ://httpd.apache.org/docs/2.0/mod/mod_ext_filter.html](http://httpd.apache.org/docs/2.0/mod/mod_ext_filter.html)

表演不是那么好，但就我的目的来说还可以。

# iphone - 我怎么能禁止选择一个tableviewcell

> ID：10024461
> 
> 赞同：1
> 
> 时间：2012-04-05T07:37:39.450
> 
> 标签：iphone, xcode, uitableview

像往常一样，当一个 tableviewcell 被触摸时，它将被选中。但是现在我需要在我的表格视图中永远不会选择一个单元格。我怎么能禁止选择一个表格视图单元格？

修改 didSelectRowForIndexPath: 方法后。现在可以了。Thx ALLl :) 一旦选择了单元格（需要被禁止），我只需使用 selectRowAtIndexPath 方法来选择之前选择的单元格以再次选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:40:27.773

正确的方法是使用[`tableView:willSelectRowAtIndexPath:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006942-CH3-SW13).
与所有其他答案不同，这也适用于 segues ;-)

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath should not be selected) {
        // if another indexPath should be selected instead return this indexPath
        return nil;
    }
    return indexPath;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T07:40:31.570

您可以禁用该单元格的用户交互或为该单元格设置选择样式无。希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T07:40:51.180

在您的`-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`方法中，将以下行添加到您不希望选择的单元格中：

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

希望能帮助到你

**编辑**

并在您的`-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`方法中在开头添加以下内容：

```
if (indexPath == indexPathOfTheCellThatShouldntBeSelected) return; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T07:42:56.937

在您的`didSelectRowForIndexPath:`方法中，您可以检查电池是否符合您的质量标准，`UIAlertView`如果符合要求，请显示或继续

# javascript - 将分页动态应用于 jqgrid

> ID：10024463
> 
> 赞同：0
> 
> 时间：2012-04-05T07:37:47.600
> 
> 标签：javascript, jquery, json, jqgrid, pagination

我需要在我的jsp页面（即客户端）中动态地将分页应用于jqgrid以获取json数据

```
$(window).resize( function(){
//I need pagination code here
} 
```

# ruby-on-rails - imagick 和 rmagick 阻止 rails 服务器启动

> ID：10024465
> 
> 赞同：1
> 
> 时间：2012-04-05T07:38:07.013
> 
> 标签：ruby-on-rails, rubygems, imagemagick, rmagick, imagick

我安装了 ImageMagick 6.6.0-4 而不是卸载它而不是安装 ImageMagick 6.7.6.3 但它仍然是旧的，所以我该如何解决这个问题，如果我想再次安装所有的 gem，那么我必须做些什么才能再次安装它

```
 /var/lib/gems/1.8/gems/rmagick-2.13.1/lib/RMagick2.so: This installation of RMagick was configured with ImageMagick 6.7.6 but ImageMagick 6.6.0-4 is in use. (RuntimeError)
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in `require'
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:596:in `new_constants_in'
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in `require'
    from /var/lib/gems/1.8/gems/rmagick-2.13.1/lib/RMagick.rb:11
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in `require'
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in `require'
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:596:in `new_constants_in'
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in `require'
    from /var/lib/gems/1.8/gems/gruff-0.3.6/lib/gruff/base.rb:2
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in `require'
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in `require'
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:596:in `new_constants_in'
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /var/lib/gems/1.8/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in `require'
    from /var/lib/gems/1.8/gems/gruff-0.3.6/lib/gruff.rb:25
    from /var/lib/gems/1.8/gems/gruff-0.3.6/lib/gruff.rb:5:in `each'
    from /var/lib/gems/1.8/gems/gruff-0.3.6/lib/gruff.rb:5
    from /var/lib/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require'
    from /var/lib/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require'
    from /var/lib/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `each'
    from /var/lib/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `require'
    from /var/lib/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each'
    from /var/lib/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `require'
    from /var/lib/gems/1.8/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
    from /home/paladion/project/new-sprint/sprint-19/config/application.rb:14
    from /var/lib/gems/1.8/gems/railties-3.0.7/lib/rails/commands.rb:28:in `require'
    from /var/lib/gems/1.8/gems/railties-3.0.7/lib/rails/commands.rb:28
    from /var/lib/gems/1.8/gems/railties-3.0.7/lib/rails/commands.rb:27:in `tap'
    from /var/lib/gems/1.8/gems/railties-3.0.7/lib/rails/commands.rb:27
    from script/rails:6:in `require'
    from script/rails:6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:06:41.033

你只需要用你当前的 imagemagick 重新安装 rmagick

```
gem install rmagick 
```

# javascript - 使用 jQuery 在失败时重试 AJAX 请求的最佳方法是什么？

> ID：10024469
> 
> 赞同：116
> 
> 时间：2012-04-05T07:38:26.323
> 
> 标签：javascript, jquery, ajax, xmlhttprequest

伪代码：

```
$(document).ajaxError(function(e, xhr, options, error) {
  xhr.retry()
}) 
```

更好的是某种指数回退

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2012-04-05T07:44:22.667

像这样的东西：

```
 $.ajax({
    url : 'someurl',
    type : 'POST',
    data :  ....,   
    tryCount : 0,
    retryLimit : 3,
    success : function(json) {
        //do something
    },
    error : function(xhr, textStatus, errorThrown ) {
        if (textStatus == 'timeout') {
            this.tryCount++;
            if (this.tryCount <= this.retryLimit) {
                //try again
                $.ajax(this);
                return;
            }            
            return;
        }
        if (xhr.status == 500) {
            //handle error
        } else {
            //handle error
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-10-01T23:17:35.633

### 一种方法是使用包装函数：

```
(function runAjax(retries, delay){
  delay = delay || 1000;
  $.ajax({
    type        : 'GET',
    url         : '',
    dataType    : 'json',
    contentType : 'application/json'
  })
  .fail(function(){
    console.log(retries); // prrint retry count
    retries > 0 && setTimeout(function(){
        runAjax(--retries);
    },delay);
  })
})(3, 100); 
```

### 另一种方法是`retries`在`$.ajax`

```
// define ajax settings
var ajaxSettings = {
  type        : 'GET',
  url         : '',
  dataType    : 'json',
  contentType : 'application/json',
  retries     : 3  //                 <-----------------------
};

// run initial ajax
$.ajax(ajaxSettings).fail(onFail)

// on fail, retry by creating a new Ajax deferred
function onFail(){
  if( ajaxSettings.retries-- > 0 )
    setTimeout(function(){
        $.ajax(ajaxSettings).fail(onFail);
    }, 1000);
} 
```

## 另一种方式（[GIST](https://gist.github.com/yairEO/3f0a5c2d6adbdad14c3c7825abeaab7e)） - 覆盖原始`$.ajax`（更适合 DRY）

```
// enhance the original "$.ajax" with a retry mechanism 
$.ajax = (($oldAjax) => {
  // on fail, retry by creating a new Ajax deferred
  function check(a,b,c){
    var shouldRetry = b != 'success' && b != 'parsererror';
    if( shouldRetry && --this.retries > 0 )
      setTimeout(() => { $.ajax(this) }, this.retryInterval || 100);
  }

  return settings => $oldAjax(settings).always(check)
})($.ajax);

// now we can use the "retries" property if we need to retry on fail
$.ajax({
    type          : 'GET',
    url           : 'http://www.whatever123.gov',
    timeout       : 2000,
    retries       : 3,     //       <-------- Optional
    retryInterval : 2000   //       <-------- Optional
})
// Problem: "fail" will only be called once, and not for each retry
.fail(()=>{
  console.log('failed') 
}); 
```

需要考虑的一点是**确保**该`$.ajax`方法之前没有被包装，以避免相同的代码运行两次。

* * *

您可以将这些片段（按原样）复制粘贴到控制台以进行测试

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-25T09:37:25.220

我在下面的代码中取得了很大的成功（例如：http: [//jsfiddle.net/uZSFK/](http://jsfiddle.net/uZSFK/)）

```
$.ajaxSetup({
    timeout: 3000, 
    retryAfter:7000
});

function func( param ){
    $.ajax( 'http://www.example.com/' )
        .success( function() {
            console.log( 'Ajax request worked' );
        })
        .error(function() {
            console.log( 'Ajax request failed...' );
            setTimeout ( function(){ func( param ) }, $.ajaxSetup().retryAfter );
        });
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-20T17:15:23.410

如果有人在他们的 ajax 调用之后调用，这些答案都不起作用，`.done()`因为您将没有成功方法来附加到未来的回调。因此，如果有人这样做：

```
$.ajax({...someoptions...}).done(mySuccessFunc); 
```

然后`mySuccessFunc`不会在重试时被调用。这是我的解决方案，它大量借鉴了@cjpak[在此处](https://stackoverflow.com/q/11793430/491553)的回答。就我而言，我想在 AWS 的 API 网关响应 502 错误时重试。

```
const RETRY_WAIT = [10 * 1000, 5 * 1000, 2 * 1000];

// This is what tells JQuery to retry $.ajax requests
// Ideas for this borrowed from https://stackoverflow.com/a/12446363/491553
$.ajaxPrefilter(function(opts, originalOpts, jqXHR) {
  if(opts.retryCount === undefined) {
    opts.retryCount = 3;
  }

  // Our own deferred object to handle done/fail callbacks
  let dfd = $.Deferred();

  // If the request works, return normally
  jqXHR.done(dfd.resolve);

  // If the request fails, retry a few times, yet still resolve
  jqXHR.fail((xhr, textStatus, errorThrown) => {
    console.log("Caught error: " + JSON.stringify(xhr) + ", textStatus: " + textStatus + ", errorThrown: " + errorThrown);
    if (xhr && xhr.readyState === 0 && xhr.status === 0 && xhr.statusText === "error") {
      // API Gateway gave up.  Let's retry.
      if (opts.retryCount-- > 0) {
        let retryWait = RETRY_WAIT[opts.retryCount];
        console.log("Retrying after waiting " + retryWait + " ms...");
        setTimeout(() => {
          // Retry with a copied originalOpts with retryCount.
          let newOpts = $.extend({}, originalOpts, {
            retryCount: opts.retryCount
          });
          $.ajax(newOpts).done(dfd.resolve);
        }, retryWait);
      } else {
        alert("Cannot reach the server.  Please check your internet connection and then try again.");
      }
    } else {
      defaultFailFunction(xhr, textStatus, errorThrown); // or you could call dfd.reject if your users call $.ajax().fail()
    }
  });

  // NOW override the jqXHR's promise functions with our deferred
  return dfd.promise(jqXHR);
}); 
```

此代码段将在 2 秒、5 秒、10 秒后回退并重试，您可以通过修改 RETRY_WAIT 常量对其进行编辑。

AWS 支持建议我们添加重试，因为它在我们身上只会发生一次。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-26T03:13:22.363

您的代码几乎已满 :)

```
const counter = 0;
$(document).ajaxSuccess(function ( event, xhr, settings ) {
    counter = 0;
}).ajaxError(function ( event, jqxhr, settings, thrownError ) {
    if (counter === 0 /*any thing else you want to check ie && jqxhr.status === 401*/) {
        ++counter;
        $.ajax(settings);
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-23T13:10:35.853

这是一个小插件：

[https://github.com/execjosh/jquery-ajax-retry](https://github.com/execjosh/jquery-ajax-retry)

自动递增超时将是一个很好的补充。

要在全局范围内使用它，只需使用 $.ajax 签名创建您自己的函数，使用 retry api 并用您的新函数替换所有 $.ajax 调用。

您也可以直接替换 $.ajax，但如果不重试，您将无法进行 xhr 调用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-09T00:36:01.713

这是对我有用的异步加载库的方法：

```
var jqOnError = function(xhr, textStatus, errorThrown ) {
    if (typeof this.tryCount !== "number") {
      this.tryCount = 1;
    }
    if (textStatus === 'timeout') {
      if (this.tryCount < 3) {  /* hardcoded number */
        this.tryCount++;
        //try again
        $.ajax(this);
        return;
      }
      return;
    }
    if (xhr.status === 500) {
        //handle error
    } else {
        //handle error
    }
};

jQuery.loadScript = function (name, url, callback) {
  if(jQuery[name]){
    callback;
  } else {
    jQuery.ajax({
      name: name,
      url: url,
      dataType: 'script',
      success: callback,
      async: true,
      timeout: 5000, /* hardcoded number (5 sec) */
      error : jqOnError
    });
  }
} 
```

然后只需`.load_script`从您的应用程序调用并嵌套您的成功回调：

```
$.loadScript('maps', '//maps.google.com/maps/api/js?v=3.23&libraries=geometry&libraries=places&language=&hl=&region=', function(){
    initialize_map();
    loadListeners();
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-25T09:37:34.847

DemoUsers 的答案不适用于 Zepto，因为错误函数中的 this 指向 Window。（并且使用“this”的这种方式不够安全，因为您不知道它们如何实现 ajax 或不需要。）

对于 Zepto，也许你可以在下面尝试，直到现在它对我来说效果很好：

```
var AjaxRetry = function(retryLimit) {
  this.retryLimit = typeof retryLimit === 'number' ? retryLimit : 0;
  this.tryCount = 0;
  this.params = null;
};
AjaxRetry.prototype.request = function(params, errorCallback) {
  this.tryCount = 0;
  var self = this;
  params.error = function(xhr, textStatus, error) {
    if (textStatus === 'timeout') {
      self.tryCount ++;
      if (self.tryCount <= self.retryLimit) {
        $.ajax(self.params)      
        return;
      }
    }
    errorCallback && errorCallback(xhr, textStatus, error);
  };
  this.params = params;
  $.ajax(this.params);
};
//send an ajax request
new AjaxRetry(2).request(params, function(){}); 
```

使用构造函数确保请求是可重入的！

# python - 最小化 Django 中的数据库命中：.values_list() 依赖于先前的 .filter() 子句

> ID：10024470
> 
> 赞同：3
> 
> 时间：2012-04-05T07:38:33.030
> 
> 标签：python, django

我在 Django 中遇到了数据库查询问题。

我的数据库（models.py）：

```
class Food(models.Model):
    name = models.CharField(max_length=200)
    ...

class Combination(models.Model):
    food1 = models.ForeignKey(Food, related_name='food1')
    food2 = models.ForeignKey(Food, related_name='food2')
    ... 
```

食物的组合顺序对我的问题无关紧要。
此外，每个组合可以存在多次（并且在两个方向上）。

例如 food1="chocolate" & food2="fruit" 与 food2="chocolate" & food1="fruit" 相同
，两种组合都存在多次。

如果我想找到包括特定食物（由 food_id 标识）在内的所有组合，
我目前正在求助于以下查询：

```
combinations1 = Combination.objects.filter(food1=food_id).values_list('food2')
combinations2 = Combination.objects.filter(food2=food_id).values_list('food1') 
```

它可以工作，但以后需要更多处理。我尝试将 Q 对象与 OR 一起使用，但我没有成功，因为提取的列取决于过滤器......

我知道这个解决方案远非优雅。我应该使用自定义字段还是 CommaSeparatedIntegerField 而不是组合中的两个单独的食物字段？有没有办法通过一个 DB Hit 获取所有请求的值（来自两列）？

谢谢你的协助！

干杯，
奥利弗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:07:04.177

不是吗

```
itertools.chain(Food(id=food_id).food1.all(), Food(id=food_id).food2.all()) 
```

你在追求什么？

如果食物的组合顺序无关紧要，为什么不使用`ManyToManyField(Food)`on `Combination`？然后`Food(id=food_id).combination_set.all()`将是所有包含特定食物的组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T10:51:26.653

我认为您最好的选择是使用 Q 对象，例如

```
qs = Combination.objects.filter(Q(food1=food_id)|Q(food2=food_id).values_list('food1', 'food2')
combinations = set()
for row in qs:
   if row[0] == food_id:
       combinations.append(row[1])
   else:
       combinations.append(row[0]) 
```

# mysql - Visual Basic 6.0 的 MySQL 示例 - 读/写

> ID：10024474
> 
> 赞同：5
> 
> 时间：2012-04-05T07:38:48.187
> 
> 标签：mysql, vb6

我想找到一个使用远程 MySQL 库的简单示例。我知道，互联网上有一些教程，解释了如何设置 ADODB.Connection 和 connectionstrings，但我无法让它工作。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T08:09:04.283

`ODBC connector`从[MySQL 下载页面](http://www.mysql.com/downloads/connector/odbc/)下载。

`connectionstring`在[这里](http://www.connectionstrings.com/mysql#p31)寻找右边。

在您的 VB6 项目中选择对`Microsoft ActiveX Data Objects 2.8 Library`. 如果您有 Windows Vista 或 Windows 7，那么您也可能有 6.0 库。如果您希望程序也可以在 Windows XP 客户端上运行，那么最好使用 2.8 库。如果您使用带有 SP 1 的 Windows 7，那么由于 SP1 中的兼容性错误，您的程序将永远不会在任何其他规格较低的系统上运行。[您可以在KB2517589](http://support.microsoft.com/kb/2517589)中阅读有关此错误的更多信息。

此代码应为您提供足够的信息来开始使用 ODBC 连接器。

```
Private Sub RunQuery()
    Dim DBCon As adodb.connection
    Dim Cmd As adodb.Command
    Dim Rs As adodb.recordset
    Dim strName As String

    'Create a connection to the database
    Set DBCon = New adodb.connection
    DBCon.CursorLocation = adUseClient
    'This is a connectionstring to a local MySQL server
    DBCon.Open "Driver={MySQL ODBC 5.1 Driver};Server=localhost;Database=myDataBase; User=myUsername;Password=myPassword;Option=3;"

    'Create a new command that will execute the query
    Set Cmd = New adodb.Command
    Cmd.ActiveConnection = DBCon
    Cmd.CommandType = adCmdText
    'This is your actual MySQL query
    Cmd.CommandText = "SELECT Name from Customer WHERE ID = 1"

    'Executes the query-command and puts the result into Rs (recordset)
    Set Rs = Cmd.Execute

    'Loop through the results of your recordset until there are no more records
    Do While Not Rs.eof
        'Put the value of field 'Name' into string variable 'Name'
        strName = Rs("Name")

        'Move to the next record in your resultset
        Rs.MoveNext
    Loop

    'Close your database connection
    DBCon.Close

    'Delete all references
    Set Rs = Nothing
    Set Cmd = Nothing
    Set DBCon = Nothing
End Sub 
```

# visual-studio-2010 - 微软outlook如何获取收件箱

> ID：10024475
> 
> 赞同：0
> 
> 时间：2012-04-05T07:38:50.383
> 
> 标签：visual-studio-2010, automation, qtp, testcomplete

我需要捕获 Microsoft Outlook 的收件箱项目以使其自动化。我尝试了 TestComplete,QTP 和 VSTS 。但没能为它捕捉到对象。有没有其他工具可以做到这一点。由于 VSTS 是 Microsoft 产品，它可以捕获收件箱中的项目吗？提前谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:09:23.077

您可以在这篇操作指南文章中找到演示如何从 TestComplete 使用 Microsoft Outlook 的示例脚本：[通过 MS Outlook 接收电子邮件](http://support.smartbear.com/viewarticle/9022/)。

# hadoop - Amazon Elastic MapReduce 引导操作不起作用

> ID：10024476
> 
> 赞同：3
> 
> 时间：2012-04-05T07:38:52.260
> 
> 标签：hadoop, amazon-web-services, mapreduce, elastic-map-reduce, amazon-emr

我尝试了以下引导操作的组合来增加我的工作的堆大小，但它们似乎都不起作用：

```
--mapred-key-value mapred.child.java.opts=-Xmx1024m 
--mapred-key-value mapred.child.ulimit=unlimited

--mapred-key-value mapred.map.child.java.opts=-Xmx1024m 
--mapred-key-value mapred.map.child.ulimit=unlimited

-m mapred.map.child.java.opts=-Xmx1024m
-m mapred.map.child.ulimit=unlimited 

-m mapred.child.java.opts=-Xmx1024m 
-m mapred.child.ulimit=unlimited 
```

什么是正确的语法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T08:01:49.523

您有两种选择来实现这一目标：

### 自定义 JVM 设置

为了应用自定义设置，您可能需要查看[Amazon Elastic MapReduce (Amazon EMR)的](http://aws.amazon.com/elasticmapreduce/)[引导操作](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/Bootstrap.html)文档，特别是操作[配置守护进程](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/Bootstrap.html#PredefinedBootstrapActions_ConfigureDaemons)：

> 此预定义引导操作允许您为 Hadoop 守护程序指定堆大小或其他 Java 虚拟机 (JVM) 选项。您可以使用此引导操作为需要比 Hadoop 默认分配更多内存的大型作业配置 Hadoop。您还可以使用此引导操作来修改高级 JVM 选项，例如垃圾收集行为。

还提供了一个示例，它将*堆大小设置为 2048 并配置 Java namenode 选项*：

```
$ ./elastic-mapreduce –create –alive \
  --bootstrap-action s3://elasticmapreduce/bootstrap-actions/configure-daemons \
  --args --namenode-heap-size=2048,--namenode-opts=-XX:GCTimeRatio=19 
```

### 预定义的 JVM 设置

或者，根据常见问题解答[如何为我的工作流程配置 Hadoop 设置？](http://aws.amazon.com/elasticmapreduce/faqs/#cluster-15)，*如果您的作业流任务是内存密集型的，您可以选择每个核心使用更少的任务并减少您的作业跟踪器堆大小。对于这种情况，预定义的引导操作可用于在启动时配置您的作业流程*- 这是指操作[配置内存密集型工作负载](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/Bootstrap.html#PredefinedBootstrapActions_MemoryIntensive)，它*允许您将集群范围的 Hadoop 设置设置为适合内存密集型作业流程的值工作负载*，例如：

```
$ ./elastic-mapreduce --create \
--bootstrap-action \
  s3://elasticmapreduce/bootstrap-actions/configurations/latest/memory-intensive 
```

[此预定义引导操作应用的特定配置设置在Hadoop 内存密集型配置设置](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/HadoopMemoryIntensive.html)中列出。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-13T01:45:00.610

Steffen's answer is good and works. On the other hand if you just want something quick-and-dirty and just want to replace one or two variables, then you're probably looking to just change it via the command line like the following:

```
elastic-mapreduce --create \
--bootstrap-action s3://elasticmapreduce/bootstrap-actions/configure-hadoop \
  --args "-m,mapred.child.java.opts=-Xmx999m" 
```

I've seen another documentation, albeit an older one, that simply quotes the entire expression within one quote like the following:

```
--bootstrap-action "s3://elasticmapreduce/bootstrap-actions/configure-hadoop -m \
    mapred.child.java.opts=-Xmx999m"    ### I tried this style, it no longer works! 
```

At any rate, this is not easily found in the [AWS EMR documentation](http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/emr-plan-bootstrap.html). I suspect that mapred.child.java.opts is one of the most overridden variables-- I was also looking for an answer when I got a GC error: "java.lang.OutOfMemoryError: GC overhead limit exceeded" and stumbled on this page. The default of 200m is just too small ([documentation on defaults](https://hadoop.apache.org/docs/r2.2.0/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml)).

Good luck!

# makefile - 便携式清洁规则

> ID：10024486
> 
> 赞同：1
> 
> 时间：2012-04-05T07:39:39.390
> 
> 标签：makefile, mingw, porting

我正在编写一个小的 C 程序来取乐。我决定只使用 MinGW（仅 C）、make 和 Notepad++ 作为不使用花哨的 IDE 进行更改的练习。到目前为止，一切都很好，很有趣。

（MinGW == 我在 Windows 上工作。）

现在，由于该程序是针对 vanilla CI 编译的，因此想到了使其完全可移植。MinGW make 和 gcc 足够聪明，可以根据规则创建程序：

```
myprog: myprog.o other.o
    $(CC) $(CFLAGS) $(LDFLAGS) $^ -o $@ 
```

显然，由于我在 Windows 上，编译器会创建`myprog.exe`. 这非常聪明，并且使整个东西非常便携。

就[标准目标](https://www.gnu.org/prep/standards/standards.html#Standard-Targets)而言，我至少想实施`clean`，因为我实际上使用了该规则。现在，在 Windows 上实际运行的干净目标如下所示：

```
clean:
   rm myprog.exe *.o 
```

这条规则在 POSIX 环境中肯定行不通，因为程序在那里没有扩展。（PSOIX：想想 GNU/Linux）

有没有一种便携式的方式来实现清洁而不需要太多的麻烦？

到目前为止，我还没有找到任何关于这个问题的真正有用的文档。如果您查看 autoconf 和 automake 是如何解决这个问题的，它们会介绍该模式`@EXEEXT@`。但这依赖于测试环境的冗长配置代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:06:28.230

If solved it the following way:

```
UNAME = $(shell uname -o)
ifeq ($(UNAME), Msys)
  EXEEXT = .exe
endif

clean:
    rm *.o myprog$(EXEEXT) 
```

It solved the issue quite nicely. Although it is not totally 100% portable it works most common cases.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:18:44.627

将二进制名称定义为变量（可选地从定义“main()”的源文件的名称中推导出来，使用简单的 egrep 命令）：

```
EXE_EXT_LINUX:=
EXE_EXT_WINDOWS:=exe
EXE_EXT:=$(EXE_EXT_$(PLATF))

BINARY_NAME:=$(notdir $(basename $(shell egrep -r -l --include=*.cpp '^[ \t]*?int[ \t]*?main[ \t]*?\(') ) )$(EXE_EXT) 
```

并使用此宏而不是硬编码名称

# python - 当我运行 >>>> help('modules') 时，Python 2.5 解释器抛出 PyNoAppError

> ID：10024488
> 
> 赞同：1
> 
> 时间：2012-04-05T07:39:54.260
> 
> 标签：python, wxpython, python-2.5

当我尝试拉出所有可访问模块的列表时，我的 Python 解释器给了我一个丑陋的错误（见下文）。我用谷歌搜索了“wx._core.PyNoAppError：必须先创建 wx.App 对象！” 而且我还没有找到一个很好的解释来说明如何在这种情况下解决它。谁能帮我吗？

```
Python 2.5.4 (r254:67916, Aug  1 2011, 15:52:49) 
[GCC 4.2.1 (Apple Inc. build 5646)] on darwin
Type "help", "copyright", "credits" or "license" for more information.

>>>> help('modules')

Please wait a moment while I gather a list of all available modules...

/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/pkgutil.py:110: DeprecationWarning: twisted.flow is unmaintained.
  __import__(name)
/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/twisted/words/im/__init__.py:8: UserWarning: twisted.im will be undergoing a rewrite at some point in the future.
  warnings.warn("twisted.im will be undergoing a rewrite at some point in the future.")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site.py", line 348, in __call__
    return pydoc.help(*args, **kwds)
  File "/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/pydoc.py", line 1645, in __call__
    self.help(request)
  File "/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/pydoc.py", line 1682, in help
    elif request == 'modules': self.listmodules()
  File "/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/pydoc.py", line 1803, in listmodules
    ModuleScanner().run(callback)
  File "/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/pydoc.py", line 1854, in run
    for importer, modname, ispkg in pkgutil.walk_packages():
  File "/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/pkgutil.py", line 110, in walk_packages
    __import__(name)
  File "/var/tmp/wxWidgets/wxWidgets-13~231/2.5/DSTROOT/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/wxaddons/__init__.py", line 29, in <module>
  File "/var/tmp/wxWidgets/wxWidgets-13~231/2.5/DSTROOT/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/wx-2.8-mac-unicode/wx/_misc.py", line 3298, in __init__
wx._core.PyNoAppError: The wx.App object must be created first! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:18:56.347

如果您调用，则调用`help('modules')`您的 , 中定义的。`site.py``pydoc.help()`

这导致调用 Helper.listmodules() 然后`ModuleScanner()`根据其文档字符串调用“搜索模块概要的可中断扫描程序”。

不幸的是，并非所有模块/包都能够被扫描，因为这包括导入模块。然而，你很幸运，你只是得到了一个错误。在我的系统（Linux，Python 2.7.3）上，这会导致分段错误

# php - Elgg 1.8 的视频插件

> ID：10024493
> 
> 赞同：1
> 
> 时间：2012-04-05T07:40:18.230
> 
> 标签：php

我正在使用 1.8 版的 Elgg 网站，我需要在我的网站上添加一个视频插件，在该插件中，您可以使用该插件添加一个 youtube URL，并在底部播放带有评论块的视频，并允许在其中进行评论视频页面没有刷新整个页面。但我无法获得 1.8 版本的插件为此我添加了 izap-izap-video 插件，但它给出了一个可比性错误说

“需要插件：izap-elgg-bridge >= 2.1
需要 PHP 扩展：curl”任何人都可以建议我解决上述问题，或者如果他们是支持 Elgg 1.8 版本并满足上述要求的任何其他插件，可以建议我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T12:24:53.987

你可以试试 ：

对于 1.8 的简单视频插件：http: [//community.elgg.org/pg/plugins/project/740863/developer/plugingalaxy/videos-plugin-for-elgg-18](http://community.elgg.org/pg/plugins/project/740863/developer/plugingalaxy/videos-plugin-for-elgg-18)

对于 Elgg 1.8 解决方案的视频上传插件：[http ://www.webgalli.com/elgg_plugins/profile/2831/videos-plugin-for-elgg-18](http://www.webgalli.com/elgg_plugins/profile/2831/videos-plugin-for-elgg-18)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:52:09.827

这不是任何类型的错误。这是一个兼容性问题。实际上，该插件需要再添加一项才能在您的`elgg`网站上运行。`iZAP elgg bridge`.

下载它：[http](http://www.pluginlotto.com/store/product/tarun/15877/izap-elgg-bridge-free-elgg-plugin) ://www.pluginlotto.com/store/product/tarun/15877/izap-elgg-bridge-free-elgg-plugin 并安装在您的网站上。

视频会很好地移动。`izap-elgg-bridge`是一件了不起的事情。继续探索……

# asp.net-mvc-3 - MVC 3.0：为处理程序创建 URL

> ID：10024494
> 
> 赞同：0
> 
> 时间：2012-04-05T07:40:20.000
> 
> 标签：asp.net-mvc-3, url-routing

因为我们使用 Url.Action() 方法在 MVC 中创建 URL。同样的方法不适用于 Handler 调用。我可以知道背后的原因吗？它的替代品是什么？

# c++ - c++ 中每个对话框的新形式？

> ID：10024498
> 
> 赞同：0
> 
> 时间：2012-04-05T07:40:27.680
> 
> 标签：c++, visual-studio, user-interface

我正在为一个简单的一位数字用户输入创建第六种形式，它让我徘徊也许有一种更简单的方法可以做到这一点，也许有一个内置工具可以以与错误警告类似的方式创建对话框。

是否有在 Visual Studio 中使用 c++ 创建基本 UI 对话框的简化方法？

PS 我可以对多个输入操作使用相同的表单，但我必须获得不同的类型和大小值，因此涉及到一些用户输入验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:15:17.827

*   您可以创建一个能够使用验证类或它验证的规则列表的表单。因此，您可以使用相同的表单进行不同的验证。

*   您可以创建一个表单并将此表单用作基类。然后实现派生类的区别

*   您当然也可以创建一个向导来为您生成基本代码。这会不太优雅，但会减少创建表单所需的时间。

我知道没有“开箱即用”的解决方案能够满足您的需求，至少无需或几乎无需努力。

# php - 贝宝在 php 中的集成

> ID：10024508
> 
> 赞同：-1
> 
> 时间：2012-04-05T07:41:08.417
> 
> 标签：php, paypal

我第一次开始实施贝宝集成。请告诉我如何在 php 中为支付网关（paypal）编写代码，如果你能展示一个很好的演示，我可以从中获得一些想法会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:11:19.213

网上有几个来源，您可以在其中找到有关 paypal 集成（使用 php）的详细信息。这是一个要命名的：

*   [贝宝](https://www.paypalobjects.com/IntegrationCenter/ic_sample-code.html)

# com - 如何找到仅给定 server.create 实例的 COM 对象？

> ID：10024522
> 
> 赞同：1
> 
> 时间：2012-04-05T07:42:11.583
> 
> 标签：com, asp-classic

我继承了一个经典的 ASP 应用程序并查看代码我看到了一个自定义 COM 对象引用

```
Server.CreateObject("DBaseManager.Recordset") 
```

现在，不幸的是，查看源代码没有提供 .dll，因此 COM dll*必须*仍然存在于实时服务器上。

为了让代码在我的开发服务器上运行，我需要获取 dll 的副本，以便我可以在我的开发服务器上注册它。

有人对我如何找到进行上述调用的 COM dll 有任何建议吗？

谢谢和最好的祝愿马克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T07:45:49.993

注册表搜索 - 在 下`HKEY_CLASSES_ROOT`，找到`DBaseManager.Recordset`键。在该键下，应该有一个`CLSID`键，其默认值包含一个 guid。

现在，在`HKEY_CLASSES_ROOT\CLSID`. 在那个键下应该有一个子键`InprocServer32`（如果它是一个进程内 COM 库），它又应该有一个默认值，给出 DLL 的路径。

* * *

当然，如果有问题的 DLL 是更大的产品或 SDK 的一部分，仅仅在您的开发服务器上安装 dll 可能还不够。您可能必须找到并安装整个产品/SDK，才能使其在另一台机器上实际工作。

# javascript - asp:repeater 中的按钮 ClientID

> ID：10024523
> 
> 赞同：1
> 
> 时间：2012-04-05T07:42:12.993
> 
> 标签：javascript, asp.net, repeater

我怎样才能在中继器内的按钮的ClientID？当我写下面这样的内容时，我收到错误“btnGetFile 不存在”。有什么想法吗？？

```
<asp:Repeater id="rep" runat="server">
<asp:LinkButton runat="server" ID="btnGetFile"
OnClientClick=
'<%# GetOnClientClick((short) Eval("LastAntivirusScanStatus")
, (int) Eval(GP.eRecruiter.Models.Candidates.CandidateCustomFile.PropertyName.Id)
, (string) btnGetFile.ClientID) %>'>
Text
</asp:LinkButton>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:51:38.830

也许你可以试试：

```
Container.FindControl("btnGetFile").ClientID 
```

代替

```
(string) btnGetFile.ClientID) 
```

# c# - 带有 camlQuery 的 Sharepoint 2010 客户端对象模型 - 文件下载但没有内容/0 字节

> ID：10024524
> 
> 赞同：4
> 
> 时间：2012-04-05T07:42:15.080
> 
> 标签：c#, sharepoint-2010, caml, sharepoint-clientobject

我正在尝试从文档库中文件夹内的子文件夹下载 txt 文件。

我正在使用 camlQuery 来实现这一点。不幸的是，我没有得到 txt 文件的内容。它有 0 个字节。

```
public void SaveFolderFiles(string fileName, string libraryName, ClientOM.ClientContext clientContext)
    {
        ClientOM.List sharedDocumentsList = clientContext.Web.Lists.GetByTitle(libraryName);
        ClientOM.CamlQuery camlQuery = new ClientOM.CamlQuery();
        camlQuery.FolderServerRelativeUrl = "/Site/Folder/Folder2010/";
        camlQuery.ViewXml =
            @"<View>
            <Query>
              <Where>
                <Eq>
                  <FieldRef Name='FileLeafRef'/>
                  <Value Type='Text'>" + fileName + @"</Value>
                </Eq>
              </Where>
              <RowLimit>1</RowLimit>
            </Query>
          </View>";
        ClientOM.ListItemCollection listItems = sharedDocumentsList.GetItems(camlQuery);
        clientContext.Load(sharedDocumentsList);
        clientContext.Load(listItems);
        clientContext.ExecuteQuery();
        if (listItems.Count == 1)
        {
            ClientOM.ListItem item = listItems[0];
            Console.WriteLine("FileLeafRef: {0}", item["FileLeafRef"]);
            Console.WriteLine("FileDirRef: {0}", item["FileDirRef"]);
            Console.WriteLine("FileRef: {0}", item["FileRef"]);
            Console.WriteLine("File Type: {0}", item["File_x0020_Type"]);
            ClientOM.FileInformation fileInformation = ClientOM.File.OpenBinaryDirect(clientContext, (string)item["FileRef"]);
            using (MemoryStream memoryStream = new MemoryStream())
            {
                fileInformation.Stream.CopyTo(memoryStream);
                using (FileStream fileStream = File.Create(@"D:\" + item["FileLeafRef"].ToString()))
                {
                    memoryStream.CopyTo(fileStream);
                }
                memoryStream.Flush();
            }

        }
        else
        {
            Console.WriteLine("Document not found.");
        }
    } 
```

也许有人有想法？

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T09:38:03.147

**尝试这个：**

使用[`FileInformation`](http://msdn.microsoft.com/en-us/library/ee956524.aspx)并获取 MemoryStream

```
string fileurl = (string)liitem["FileRef"];
FileInformation ffl = Microsoft.SharePoint.Client.File.OpenBinaryDirect(clientContext, fileurl);
byte[] bytesarr = ReadFully(ffl.Stream);
MemoryStream mnm = new MemoryStream(bytesarr); 
```

ReadFully 函数转换`Stream`为`Bytes array`

```
 public byte[] ReadFully(Stream input)
    {
        byte[] buffer = new byte[16 * 1024];
        using (MemoryStream ms = new MemoryStream())
        {
            int read;
            while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
            {
                ms.Write(buffer, 0, read);
            }
            return ms.ToArray();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T13:43:03.147

直接导出到输出文件......我认为这是最简单和最简单的方法。

```
FileInformation fInfo = File.OpenBinaryDirect(currentSiteContext, ServerRelativeURL);
System.IO.FileStream outPutFile = System.IO.File.OpenWrite(string.Concat(OutputPath, "\\", DocumentName));
fInfo.Stream.CopyTo(outPutFile);
fInfo.Stream.Close();
outPutFile.Close(); 
```

# css - 如何在标题中绘制正确的 CSS 边框？

> ID：10024525
> 
> 赞同：5
> 
> 时间：2012-04-05T07:42:17.397
> 
> 标签：css, qt, qt-designer

图片上的对话窗口只有一个小部件类`QTableWidget`。我的问题是标题的*底部*边框（红色正方形，`QHeaderView`类）与左/右彩色边框重叠！我想要的是使红色方块部分正确显示为绿色方块。

![在此处输入图像描述](../Images/71c29e6a90bfbd5151b7fafc4ce66def.png)

`Qt Designer`这是我正在使用的 CSS 代码：

```
QTableView#tableWidget QHeaderView::section:horizontal
{
    height: 24px;

    border-style: none;

    border-left: 1px solid #ecedef;
    border-top: 1px solid #161618;
    border-right: 1px solid #b1b1b5;
    border-bottom: 1px solid #161618;

    background-color: qlineargradient(x1:0, y1:0, x2:0, y2:1, stop:0 #f4f4f6, stop:1 #ceced6);
 }

/*
QTableView#tableWidget QHeaderView::section:horizontal:first,
QTableView#tableWidget QHeaderView::section:horizontal:last
{
    border-left-color: qlineargradient(x1:0, y1:0, x2:0, y2:1, stop:0 #f4f4f6, stop:1 #ceced6);
}
*/ 
```

谢谢！

* * *

**更新**：这是放大的图片，以防万一......

![在此处输入图像描述](../Images/2abd03f648fa9a0a521ad4ed9a13e6a5.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T10:41:24.907

我已经了解这些东西是如何工作的！

**解决方案**：

```
QTableView#tableWidget QHeaderView
{
    /* draw the hole hor top & bottom line for the header */
    height: 24px;

    border-top: 1px solid #161618;
    border-bottom: 1px solid #161618;
}

QTableView#tableWidget QHeaderView::section:horizontal:first
{
    border-left-color: qlineargradient(x1:0, y1:0, x2:0, y2:1, stop:0 #f4f4f6, stop:1 #ceced6);
}

QTableView#tableWidget QHeaderView::section:horizontal:last
{
    border-right-color: qlineargradient(x1:0, y1:0, x2:0, y2:1, stop:0 #f4f4f6, stop:1 #ceced6);
}

QTableView#tableWidget QHeaderView::section:horizontal
{
    /* for each section draw ONLY left & right lines */
    height: 24px;

    border-style: none;

    border-left: 1px solid #ecedef;
    border-right: 1px solid #b1b1b5;

    background-color: qlineargradient(x1:0, y1:0, x2:0, y2:1, stop:0 #f4f4f6, stop:1 #ceced6);

 } 
```

此外，结果图看起来如何：

![在此处输入图像描述](../Images/0c25c3752825aabfa37cb7bfdfb0c586.png)

总之谢谢大家！

# java - JFace PopupDialog 中小部件的背景颜色

> ID：10024526
> 
> 赞同：2
> 
> 时间：2012-04-05T07:42:18.693
> 
> 标签：java, swt, eclipse-rcp, widget, jface

我想将 JFace PopupDialog 用作用户输入的轻量级对话框。但是我对文本小部件的背景颜色有一些问题。

正如您在下面的[1](https://i.stack.imgur.com/4sqlb.png)中看到的，SWT.MULTI 文本小部件没有背景和边框，SWT.SINGLE 文本小部件没有背景。我试图用以下方法覆盖背景颜色：

```
Text comment = new Text(composite, SWT.MULTI|SWT.BORDER);
comment.setFocus();
comment.setBackground(new Color(Display.getDefault(), new RGB(000, 000, 000)));
// method of PopupDialog
applyBackgroundColor(new Color(Display.getDefault(), new RGB(000, 000, 000)), comment); 
```

有谁知道如何正确处理这个问题？

提前致谢！

![左侧为 SWT.Multi，右侧为 SWT.SINGLE](../Images/2c36027168d42a42702018fdc1d0fd2e.png)

**编辑：**根据要求，这是弹出窗口的来源。我将 PopupDialog 子类化，因为我希望在光标位置旁边打开弹出窗口：

```
public class MouseLocationPopupDialog extends PopupDialog {
 private final static int SHELL_STYLE = PopupDialog.INFOPOPUP_SHELLSTYLE;

 public MouseLocationPopupDialog(Shell parent, String infoText) {
    this(parent, SHELL_STYLE, true, false, false, false, false, null, infoText);
 }

 public MouseLocationPopupDialog(Shell parent, String titleText, String infoText) {
     this(parent, SHELL_STYLE, true, false, false, false, false, titleText, infoText);
 }

 public MouseLocationPopupDialog(Shell parent, String infoText, final Point size) {
     this(parent, infoText);
     getShell().setSize(size);
 }

 public MouseLocationPopupDialog(Shell parent, int shellStyle, boolean takeFocusOnOpen, boolean persistSize, boolean persistLocation, boolean showDialogMenu, boolean showPersistActions, String titleText, String infoText) {
     super(parent, shellStyle, takeFocusOnOpen, persistSize, persistLocation, showDialogMenu, showPersistActions, titleText, infoText);
 }

 @Override
 protected void adjustBounds() {
     super.adjustBounds();
     Display d = Display.getCurrent();
     if (d == null) {
         d = Display.getDefault();
     }
     Point point = d.getCursorLocation();
     getShell().setLocation(point.x + 9, point.y + 14);
 }
} 
```

实际使用情况如下：

```
final PopupDialog dialog = new MouseLocationPopupDialog(HandlerUtil.getActiveShell(event), "Title", "Bottom bar") {
@Override
protected Control createDialogArea(Composite parent) {
  Control composite = super.createDialogArea(parent);
  Composite table = new Composite((Composite) composite, SWT.NONE);
  table.setLayout(new GridLayout(2, true));
  // text is a member variable
  text = new Text(table, SWT.SINGLE | SWT.BORDER);
  Button submit = new Button(table, SWT.PUSH);
  return composite;
}

@Override
protected Control createContents(Composite parent) {
  Control contents = super.createContents(parent);

  final Color backgroundColor = new Color(Display.getCurrent(), new RGB(255, 255, 255));
  text.setBackground(backgroundColor);
  final Color foregroundColor = new Color(Display.getCurrent(), new RGB(0,0,0));
  text.setForeground(foregroundColor);
  backgroundColor.dispose();
  foregroundColor.dispose();

  return contents;
}
};
dialog.open(); 
```

`open()`请注意，此弹出窗口独立于其他 UI 元素：代码不会像其他 JFace 对话框（例如 TitleAreaDialog）那样等待弹出窗口的完成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:11:06.777

首先，使用`SWT.BORDER`代替`SWT.BORDER_SOLID`. ~~如果你很幸运，这会以某种方式导致你的问题。除此之外，仅从您的小片段就很难看出哪里出了问题。除非以后有其他代码可以重置背景颜色，否则这应该可以工作。~~

**更新**：尝试覆盖的方法`getBackground()`，`PopupDialog`让它返回你想要的颜色。您的代码可能在您的代码**之后**`createDialogArea(..)`并将`PopupDialog`此颜色应用于基本上所有内容。如果您只想更改特定控件的背景颜色，您可以尝试以下操作：

 **```
@Override
protected Control createContents(Composite parent) {
  Composite contents = super.createContents(parent);

  // set the color here

  return contents;
} 
```**

# javascript - 在 chrome 的新标签页中打开一个新链接

> ID：10024527
> 
> 赞同：2
> 
> 时间：2012-04-05T07:42:20.727
> 
> 标签：javascript, jquery, html

我试图在 ajax 成功的新选项卡中打开一个链接，但该链接在一个新窗口中打开。如何使用 jquery 或 javascript 在选项卡中而不是在新窗口中强制打开链接。

代码：

```
$("#A1").click(function (event) {
    $.ajax({ 
        type: "POST", 
        url: "Home.aspx/btnTestProject", 
        data: "{'preview':'" + inventory + "' }", 
        contentType: "application/json; charset=utf-8", 
        datatype: "json", 
        cache: false, 
        success: function (response) { 
            window.open("TestnRun.aspx"); //opens in new window 
        }    
    }); 

    window.open("TestnRun.aspx"); //opens in new tab 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:49:43.880

一般来说，你无法控制它。因为这是用户偏好在新窗口或选项卡中打开带有 target="_blank" 的链接。

当浏览器开始完全支持 css-3 时，您将来会有一个选择：

[http://www.w3.org/TR/2004/WD-css3-hyperlinks-20040224/#target-new](http://www.w3.org/TR/2004/WD-css3-hyperlinks-20040224/#target-new)

你可以使用这个：

```
#anchorId { target-new: tab ! important } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-06T16:52:02.053

我看到了同样的事情。

我已经注意到（我使用的是 jquery.1.9.1）：

如果您以异步方式调用 $.ajax，或者在新窗口中打开浏览器（Chrome），否则如果您运行 JSON 调用**SYNC**，则窗口将**打开选项卡**！

这在一个新窗口中打开，弹出：

```
 $.ajax({ url: "/cliFindExist/", 
    async: true, 
    function(data){... 
    window.open("some.aspx","_blank")}); 
```

这个打开的窗口选项卡

```
$.ajax({ url: "/cliFindExist/", 
async: false, // <<<<<<<<<<<<< NOTE
function(data){... 
window.open("some.aspx","_blank")}); 
```

JQuery在调用函数时可能会改变方式/上下文？取决于它是运行同步还是异步调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T07:47:53.437

像这样使用目标“_blank”

```
<a href="http://www.google.it" target="_blank">My link</a> 
```

或者像这样的Javascript

```
<button onclick="window.open('http://www.google.it','_blank')">Button</button> 
```

# android - 如何从 Android 发布 JSON 字符串

> ID：10024535
> 
> 赞同：0
> 
> 时间：2012-04-05T07:43:01.437
> 
> 标签：android, json, parsing

尝试从 Android 在服务器上发布 json 时遇到问题。错误是：

> 加载 JSON 失败。请求中不得包含特殊字符。请检查请求的 JSON。

我遵循了很多例子，但没有一个是有帮助的。请提出解决方案或帮助我在代码中找到问题。

下面是在服务器上发布 JSON 字符串的代码。

```
public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            /* ====================================================================================================*/

                        JSONObject listobj = new JSONObject ();
                        JSONObject listInvoice = new JSONObject ();
                        listInvoice.put("client_id","");
                        listInvoice.put("date_from","");
                        listInvoice.put("date_to","");
                        listInvoice.put("invoice_number","");
                        listInvoice.put("invoice_record_status","");
                        listInvoice.put("invoice_status","");
                        listInvoice.put("page","1");
                        listInvoice.put("per_page_record","10");
                        listobj.put("listInvoice", listInvoice);

                      //--List nameValuePairs = new ArrayList(1);
                        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
                        nameValuePairs.add(new BasicNameValuePair("json_data", listobj.toString()));

                        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                        Log.d("JSON",listobj.toString());
            /*======================================================================================================*/

            HttpResponse httpResponse = httpClient.execute(httpPost);
            String is = EntityUtils.toString(httpResponse.getEntity());

            Log.d("JSON","RESPONSE : " + is);

            //--HttpEntity httpEntity = httpResponse.getEntity();
            //--is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        catch (JSONException e) {
            Log.e("JSON",e.getMessage());
     }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

      }
     }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T07:55:04.783

这是将 json 传递到您的 URL 的函数

```
public void getServerData() throws JSONException, ClientProtocolException, IOException {

    String title = Title_edittext.getText().toString().trim();
    String details = Details_edittext.getText().toString().trim();

    HttpParams httpParams = new BasicHttpParams();
    HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
    HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
    HttpClient client = new DefaultHttpClient(httpParams);
    HttpPost request = new HttpPost(url); // add your url here...

    request.setHeader( "Content-Type", "application/json" );        

    JSONObject json = new JSONObject();     
    json.put("client_id", channel_token);
    json.put("date_from", data_src_id);
    json.put("date_to", title);  

    Log.i("JSON Object", json.toString());

    StringEntity se = new StringEntity(json.toString());

    se.setContentEncoding("UTF-8");
    se.setContentType("application/json");

    request.setEntity(se);      

    HttpResponse response = client.execute(request); 

    HttpEntity entity = response.getEntity();
    InputStream is = entity.getContent();
    String _response = convertStreamToString(is);
    System.out.println("res--  " + _response);

    // Check if server response is valid code          
    int res_code = response.getStatusLine().getStatusCode();
    System.out.println("code-- " +res_code);
}
private static String convertStreamToString(InputStream is) {

    BufferedReader reader = new BufferedReader(new InputStreamReader(is), 8192);
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append((line + "\n"));
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T19:54:54.677

这是链接[How to send a JSON object over Request with Android?](https://stackoverflow.com/questions/3027066/how-to-send-a-json-object-over-request-with-android)

```
int TIMEOUT_MILLISEC = 10000;  // = 10 seconds
HttpParams httpParams = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
HttpClient client = new DefaultHttpClient(httpParams);

HttpPost request = new HttpPost(serverUrl);
request.setEntity(new ByteArrayEntity(
    postMessage.toString().getBytes("UTF8")));
HttpResponse response = client.execute(request); 
```

看这条线： request.setEntity(new ByteArrayEntity( postMessage.toString().getBytes("UTF8")));

# javascript - 如何通过 jQuery 获取文本元素的当前值

> ID：10024536
> 
> 赞同：0
> 
> 时间：2012-04-05T07:43:03.633
> 
> 标签：javascript, jquery, forms

我有文本输入元素，并且在模糊事件和用户按下回车时触发了一个事件。

我的问题是，如果用户输入“foo”并按下回车`val()`函数仍然返回 null，在模糊事件`val()`返回 foo 之后。据我了解，这是由于 HTML 输入元素的 value 属性仅在失去焦点时才更新。你能给我一个解决办法吗？

这是我使用的确切代码：

```
var meetmove_address_field_listener = function(e){
    var type = $(this).attr('data-marker-type');;
    var value = $(this).val();
    meetmove_map.geocodeAddress(type, value);
};

$(document).ready(function(){
    $('input[data-type="name"]').blur(meetmove_address_field_listener);
    $('input[data-type="name"]').keypress(function(event){
        if (event.which == 13){
            event.preventDefault();
            meetmove_address_field_listener(event);
            return false; 
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T07:54:41.487

该值可以立即访问，您只需要使用正确的处理程序。将在字符显示在输入中*之前*`.keypress()`触发。尝试代替，它应该可以工作。*[`.keyup()`](http://api.jquery.com/keyup/)`.keypress()`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:11:45.143

好吧，Sudahir 的回答确实解决了我的问题 --- 我滥用了 $(this) 引用，它会根据上下文改变含义。但他删除了他的答案，所以这里是工作代码：

```
$(document).ready(function(){
    $('input[data-type="name"]').blur(meetmove_address_field_listener);
    $('input[data-type="name"]').keyup(function(event){
        if (event.which == 13){
            event.preventDefault();
            var type = $(this).attr('data-marker-type');
            var value = $(this).val();
            meetmove_map.geocodeAddress(type, value);
            return false;
        }
    });
}); 
```*

# eclipse - git硬重置时未版本化的文件丢失

> ID：10024538
> 
> 赞同：1
> 
> 时间：2012-04-05T07:43:04.937
> 
> 标签：eclipse, git

我正在通过 Eclipse 使用 git。我创建了一个新文件，并对现有的版本化文件进行了更改。我提交并尝试拉取更改，但遇到了与现有版本化文件的冲突。我无法解决它，所以我终于硬重置到我提交之前。这解决了冲突，但也删除了我创建的新的未版本控制的文件。有没有办法找回那个文件？我不认为硬重置会影响未版本化的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T08:03:19.833

`git reset --hard`不会影响未版本控制的文件，但是一旦您将新文件添加到索引并提交它就不再是未版本控制的，因此重置为没有该文件的提交将丢失它。您可以通过重置为添加该文件的提交来取回它。运行`git reflog`；您将获得以下几行的输出：

```
7d6d2bd HEAD@{0}: reset: moving to HEAD~1
4aaf64d HEAD@{1}: commit: new 
```

`HEAD@{1}`是你的新提交；`HEAD@{0}`正在重置回旧的。再次重置，重置之前的提交丢失了新文件（在我的示例中，它是`HEAD@{1}`）：

```
$ git reset --hard HEAD@{1} 
```

这会将存储库恢复到您提交后重置之前的状态，因此新文件应该会恢复。至于您最初尝试做的事情，有几种方法可以重置而不会丢失您在最新提交中添加的新文件。最简单的方法可能是进行混合重置，然后进行结帐：

```
$ git reset HEAD~1
$ git checkout . 
```

混合重置将使存储库保持在您提交之前的状态——您将对旧文件进行未提交的更改，并且新文件将被取消版本化。结帐会将您对旧文件的更改还原，但由于新文件现在没有版本化，因此它将不理会它

# iphone - 在 iPad App 中使用 Glow 效果绘制线条

> ID：10024543
> 
> 赞同：2
> 
> 时间：2012-04-05T07:43:13.447
> 
> 标签：iphone, objective-c, ipad

我在我的应用程序中集成了画线，我没有使用过`OpenGL`或任何其他类似的框架。

所以现在我想给他们的线条加上发光效果，那我该怎么做呢？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T07:54:03.693

将图形上下文中的阴影设置为具有零大小偏移、大约 6-10 的模糊（根据口味更改）以及与笔触颜色相同的颜色。这将为所有后续绘图提供发光效果。命令是

```
CGContextSetShadowWithColor() 
```

记录[在这里](http://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGContext/Reference/reference.html#//apple_ref/c/func/CGContextSetShadowWithColor)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:05:10.063

```
-(void)drawRect:(CGRect)rect{

[curImage drawAtPoint:CGPointMake(0, 0)];

 CGPoint mid1 = midPoint(previousPoint1, previousPoint2); 

 CGPoint mid2 = midPoint(currentPoint, previousPoint1);

    CGContextRef context = UIGraphicsGetCurrentContext(); 

    [self.layer renderInContext:context];

    CGContextMoveToPoint(context, mid1.x, mid1.y);
    // Use QuadCurve is the key
    CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y); 

    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, self.lineWidth);
    CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);
        //------------  Glow Lines ----------

    if (appDel.BrushType == 201) // (201 is glow brush type)
    {
        CGContextSetLineWidth(context, 7);

        CGColorSpaceRef space = CGColorSpaceCreateDeviceRGB();

        CGFloat components[4]={appDel.R_color/255.0,appDel.G_color/255.0,appDel.B_color/255.0,1.0};
        CGColorRef color1 = CGColorCreate(space, components);

        CGContextSetShadowWithColor(context, CGSizeMake( 0.0, 0.0 ), 15, color1);

        CGContextStrokePath(UIGraphicsGetCurrentContext());

    }
    //--------------
    CGContextStrokePath(context);
    [super drawRect:rect];

    [curImage release];

} 
```

# database - 在哪里定义安全角色？

> ID：10024545
> 
> 赞同：2
> 
> 时间：2012-04-05T07:43:24.977
> 
> 标签：database, security, oop, symfony, roles

我有一个用户和一个组实体，它们都拥有一系列角色。

现在我想保持选项打开以修改角色，添加它们等等。

我应该为此在类中使用常量，还是应该将 OneToOne 关系与保留所有角色的表相关联？

最好的问候， pus.dev

用户 <=> 角色组 <=> 角色

```
public function getRoles()
{
    $roles = $this->roles;

    foreach ($this->getGroups() as $group) {
        $roles = array_merge($roles, $group->getRoles());
    }

    // we need to make sure to have at least one role
    $roles[] = static::ROLE_DEFAULT;

    return array_unique($roles);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:38:22.087

如何为每个用户创建一个具有 ManyToOne 关系的 Roles 表。Roles 表的一行将包含一个角色（字符串或常量 int）和一个用户。

或者，您可以创建一个 Roles 表并与 User 表建立 ManyToMany 关系。使用它，您可以动态定义角色，因此您不必对可能的角色进行硬编码。

在 OneToMany 案例中，您可以通过编写这样的函数来检索角色：

```
/** @OneToMany(...) */
/** $roles contains strings */
protected $roles;

public function getRoles() {
    return $this->roles;
} 
```

或者

```
/** @OneToMany(...) */
/** $roles contains integers */
protected $roles;

public function getRoles() {
    $rolesArr = array(1 => 'ROLE_ADMIN', 2 => 'ROLE_USER', 3 => 'ROLE_EDITOR'); // you should refactor $rolesArr
    $retRoles = array();
    foreach($this->roles as $role) {
        $retRoles[] = $rolesArr[$role];
    }
    return $retRoles;
} 
```

在 ManyToMany 案例中，您可以通过编写这样的函数来检索角色：

```
/** @ManyToMany(...) */
protected $roles;
// ...
public function getRoles() {
    $retRoles = array();
    // symfony2 requires a string array
    foreach($this->roles as $role) {
        $retRoles[] = $role->getName(); // or $retRoles[] = 'ROLE_' . $role->getName();
    }
    return $retRoles;
} 
```

并且不要忘记您的 User 模型必须实现 symfony 的内置用户界面。

对于组角色，您可以这样做：

```
class Group
{
    /** @ManyToMany(...) */
    protected $roles;

    public function getRoles() {
        return $this->roles;
    }
}

class User
{
   /** @ORM\Column(...) */
   protected $group;

    /** @ManyToMany(...) */
    protected $roles;
    // ...

    public function getRoles() {
        $retRoles = array();
        // symfony2 requires a string array
        $roles = $this->roles->merge($this->group->getRoles());
        foreach($roles as $role) {
            $retRoles[] = $role->getName(); // or $retRoles[] = 'ROLE_' . $role->getName();
        }
        return $retRoles;
    }
} 
```

# silverlight - Winphone7编程ToggleSwitch空间

> ID：10024546
> 
> 赞同：0
> 
> 时间：2012-04-05T07:43:35.227
> 
> 标签：silverlight, windows-phone-7

我在列表框中添加了 ToggleSwitches。

以下是 xaml 文件。

```
<ListBox>
<toolkit:ToggleSwitch Header="" Margin="30,0,0,0" Name="Item1" SwitchForeground="#FFF09609">
<toolkit:ToggleSwitch.ContentTemplate>
<DataTemplate>                                
<StackPanel Orientation="Horizontal">
<TextBlock Text="item1" Width="110" Margin="10,0,100, 0"/>
</StackPanel>                                
</DataTemplate>
</toolkit:ToggleSwitch.ContentTemplate>
</toolkit:ToggleSwitch>
</ListBox> 
```

我的问题是删除切换开关中的顶部和底部空间。我想在 ListBox 中添加几个 ToggleSwitch，但是一个 Toggle Switch 的顶部和底部间距很大。如果我降低 ToggleSwitch 的高度，文本和图形的底部会被切掉。有什么解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:10:25.957

您可以为 ToggleSwitch 的边距设置减值，如下所示：-

```
 <StackPanel>
                <toolkit:ToggleSwitch Content="Test"
                                      Margin="0,-20,0,-20" />
                <toolkit:ToggleSwitch Content="Test"
                                      Margin="0,-20,0,-20" />
                <toolkit:ToggleSwitch Content="Test"
                                      Margin="0,-20,0,-20" />
                <toolkit:ToggleSwitch Content="Test"
                                      Margin="0,-20,0,-20" />
            </StackPanel> 
```

# javascript - 加载内部内容后调整“iframe”的大小

> ID：10024547
> 
> 赞同：2
> 
> 时间：2012-04-05T07:43:40.580
> 
> 标签：javascript, ajax, iframe, dom-events

我有一个 iFrame，我正在加载一个页面，该页面在单击各种页面标签后使用 ajax 加载数据。现在我正在使用 Javascript 函数来计算加载数据高度以替换 iframe 的高度，从而调整 iframe 的大小，从而避免滚动条。现在我的问题是只要单击标签就会调用脚本，但数据仍在加载。请告诉我一些我可以用来等到 ajax 完成加载数据然后调用我的函数的东西。

我正在使用以下脚本：

```
function resizeFrame() {
    var body = document.body,
    html = document.documentElement;
    var iFrame = parent.document.getElementById("iframe1");//get id of iframe from parent
    var nHeight=0;
    var iframeWin = iFrame.contentWindow.document.body ;
    nHeight = iframeWin.scrollHeight;
    iFrame.style.height = nHeight+'px'; //set the frame height to correspond to the content 
} 
```

我的html如下：

```
<iframe src="" id="iframe1" name="iframe1" scrolling="no" frameborder="0" onload="$(document).ready(function(){resizeFrame();});"  style="width:960px;height:570px"> 
```

上面的代码对我来说很好（iframe/src url 都在同一个域中。）我还想获取 iframe 内容窗口页面中的 div 元素的高度。我该如何抓住它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:14:55.643

html

```
<iframe id="containter-frame" 
        src="<url of the page>"
        frameborder="0"
        min-height="600px"
        width="100%">
</iframe> 
```

javascript/jquery：

```
$(document).ready(function(){

    var frame = $('iframe#containter-frame');

    //hide document default scroll-bar
    document.body.style.overflow = 'hidden';

    frame.load(resizeIframe);   //wait for the frame to load
    $(window).resize(resizeIframe); 

    function resizeIframe() {
        var w, h;       

        //detect browser dimensions
            if($.browser.mozilla){
            h = $(window).height();
            w = $(window).width();                  
        }else{
            h = $(document).height();
            w = $(document).width();
        }

        //set new dimensions for the iframe
            frame.height(h);
        frame.width(w);
    }
}); 
```

这里的技巧是`frame.load`方法等待帧加载。之后，根据需要操纵高度和宽度。我在这里的设置是覆盖整个屏幕。该页面仅包含一个 iframe，没有其他内容。

亲切的问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T03:47:59.843

如果您对窗口的整个宽度不感兴趣，您可以让它适合内容

```
var frame = $('iframe#modal-body');

frame.load(resizeIframe);
function resizeIframe() {
    frame.height(frame.contents().height());
    frame.height(frame.contents().height());
} 
```

# c# - 该进程无法访问文件 .NET

> ID：10024548
> 
> 赞同：0
> 
> 时间：2012-04-05T07:43:46.520
> 
> 标签：c#, .net

我需要读取一个文本文件并将其存储到 Db 中。多次访问/读取文件后，突然出现此消息

> 该进程无法访问该文件，因为它正在被另一个进程使用..

我检查了几次，但没有附加其他过程。这是我的代码..

```
// Storing the data in a data table
DataTable table = new DataTable();

table.Columns.Add(new DataColumn("L_Date", typeof(DateTime)));
table.Columns.Add(new DataColumn("L_Time", typeof(TimeSpan)));
table.Columns.Add(new DataColumn("L_CardID", typeof(string)));
table.Columns.Add(new DataColumn("L_Status", typeof(string)));
table.Columns.Add(new DataColumn("L_Type", typeof(string)));
table.Columns.Add(new DataColumn("L_Catatan", typeof(string)));

int i2 = 0;
string[] content = System.IO.File.ReadAllLines(e.FullPath);

foreach (string line in content)
{
    // some code
} 
```

我的代码人有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:52:21.180

你可以试试：

```
FileStream stream = new FileStream("file.txt", FileMode.Open, FileAccess.Read, FileShare.ReadWrite); 
StreamReader reader = new StreamReader(stream); 
```

它至少会打开被 Word 锁定的文本文件 =) 虽然你的问题的根源将是未知的 =\

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:56:38.647

在多用户文件系统中，当您调用关闭文件句柄的方法时，您的锁可能不会被解锁。

几毫秒后重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:00:32.957

不要使用 Process Monitor（在访问文件时监控实时活动），而是使用 Process Explorer（它可以向您显示所有具有句柄的文件，即使它们当前未被访问）。

转到查找/查找句柄或 DLL，搜索文件，双击它将在后面的窗口中选择句柄，然后您可以右键单击并关闭它。

# jsf - @ManagedProperty 不反映更改并不断返回 null

> ID：10024550
> 
> 赞同：3
> 
> 时间：2012-04-05T07:43:51.700
> 
> 标签：jsf, null, managed-property

我正在尝试将一个 sessionscoped bean 的值注入到 viewscoped bean 中，但它一直返回 null，这是一个片段：

```
import javax.faces.application.FacesMessage;
import javax.faces.bean.SessionScoped;
import javax.faces.bean.ManagedBean;
import javax.faces.context.FacesContext;

//Class for managing the current logged-in user
@ManagedBean(name="user")
@SessionScoped
public class User implements Serializable{

private String userName;

public void setUserName(String userName) {
    this.userName = userName;
}
public String getUserName() {
    return this.userName;
} 
```

它用于：

```
@ManagedBean(name="databrowser")
@ViewScoped
public class dataBrowser implements Serializable {  

private List<UploadData> dataItems;
private SelectItem[] dataTypeOptions, qualityOptions, accessOptions;
private UploadData selectedData;
private String filelocation;

@ManagedProperty(value="#{user.userName}")
private String userName;

public String getUserName() {
    return this.userName;
} 
```

dataBrowser 用于填充 Primefaces 数据表，当它被称为 userName 时为空，我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:03:44.593

最近我也遇到了注入嵌套托管 bean 属性的问题`@ManagedProperties`。一旦注入它就永远不会改变。我通过在 getter 中评估 EL 而不是注入它来解决问题。

试试看：

```
public String getUserName() {
    FacesContext context = FacesContext.getCurrentInstance();
    return (String) context.getApplication().evaluateExpressionGet(context,"#{user.userName}", String.class);
} 
```

您还可以尝试注入整个`user`bean 并`userName`在 getter 中从中获取字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T10:41:11.240

`#{user.userName}`由 JSF 解释为`getUser().getUserName()`

所以最好有一个`@ManagedProperty`of type `User`，它的 getter/setter 方法`getUser`/ `setUser`。有了它，您可以通过 访问用户名`#{user.userName}`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T09:46:11.113

在所有 setter/getter 就位后，由于**在 User 类中缺少空构造函数，我遇到了同样的问题（对用户的****null**引用）。

 **在您提供的示例中，`dataBrowser`在构造表之前实例化了和用户 bean，因此引用`#{dataBrowser.userName}`应该已经找到`userName @ManagedProperty`正确注入的（不是`@PostConstruct`问题）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-16T21:18:57.660

我只是遇到了同样的问题，并且偶然发现它不起作用，如果我尝试使用 firefox（实际上是 linux 下的 icedove），但如果我尝试使用 eclipse 内置浏览器，它工作得很好。

即便如此，这对我来说没有意义，您是否已经尝试过使用不同的浏览器？

* * *

michal777 的回答非常有效。我已将其扩展到：

```
 @ManagedProperty("#{nameBean}")
private NameBean nameBean;  
public NameBean getNameBean() { return nameBean; }
public void setNameBean(NameBean nameBean) { this.nameBean = nameBean; }

public NameBean getNameBean_Workaround() {
    FacesContext context = FacesContext.getCurrentInstance();
    return (NameBean) context.getApplication().evaluateExpressionGet(context,"#{nameBean}", NameBean.class);
} 
```

后来：

```
 if (nameBean != null) {
        nameBean.setName("achsooo");
    }
    else {
        getNameBean_Workaround().setName("achsooo2222");
    } 
```

现在，在 eclipse 浏览器中设置了“achsooo”，在 icedove 中设置了“achsooo2222”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-17T14:32:25.063

我有这个问题，问题实际上是双重的。（另请注意，@ManagedProperty 只能在 @ManagedBean 类中工作，并且如果 @ManagedProperty 类的范围相同或更小（应用程序、会话、视图、请求等）。）这是我修复它的方法：

* * *

**问题 1：** JSF 很愚蠢，不能在类中`@ManagedProperty`正确处理注入。`abstract`

**解决方案：**

1.  使每个使用的类都`@ManagedProperty`用`@ManagedBean`.
2.  使每个`abstract`使用该属性的类不被注释，`@ManagedProperty`而是只提供非抽象类将各自覆盖的抽象 getter 和 setter 方法。
3.  在类中使用`abstract`类的 getter 方法而不是 @ManagedProperty 本身`abstract`。

* * *

**问题 2：** JSF 是愚蠢的，并且不能`@ManagedProperty`在不是由 JSF 创建的 @ManagedBean 类中正确处理注入（即您自己使用创建这些类`new`）。

**解决方案选项：**

*   让 JSF 创建使用`@ManagedProperty`.
*   使用以下代码：

* * *

```
MyClass example = Utils.getELValue("EL Expression Goes Here", MyClass.class);

public static <T> T getELValue(final String elName, final Class<T> clazz) {
  FacesContext fc = FacesContext.getCurrentInstance();
  return (T) fc.getApplication().getELResolver().getValue(fc.getELContext(), null, elName);

  // Potential (untested) alternative:
  // ((HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest()).getSession().getAttribute("")
} 
```**

# eclipse - Hibernate3 Maven 插件的生命周期问题

> ID：10024552
> 
> 赞同：4
> 
> 时间：2012-04-05T07:44:09.197
> 
> 标签：eclipse, maven, maven-3, m2e

我想在我的一个项目中使用 Hibernate3 maven 插件。但是，因为 m2e 没有针对它的生命周期配置器，所以我需要配置生命周期插件以忽略插件执行。但是，我也使用了 m2e AFAIK 也不支持的 maven 依赖插件。

所以，我的生命周期插件的配置是：

```
<plugin>
    <groupId>org.eclipse.m2e</groupId>
    <artifactId>lifecycle-mapping</artifactId>
    <configuration>
        <lifecycleMappingMetadata>
            <pluginExecutions>
                <pluginExecution>
                    <pluginExecutionFilter>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-dependency-plugin</artifactId>
                            <versionRange>[2.0,)</versionRange>
                            <goals>
                                <goal>copy-dependencies</goal>
                            </goals>
                    </pluginExecutionFilter>
                    <action>
                        <ignore />
                    </action>
                </pluginExecution>
                <pluginExecution>
                    <pluginExecutionFilter>
                            <groupId>org.codehaus.mojo</groupId>
                            <artifactId>hibernate3-maven-plugin</artifactId>
                            <versionRange>[3.0,)</versionRange>
                            <goals>
                                <goal>hbm2ddl</goal>
                            </goals>
                    </pluginExecutionFilter>
                    <action>
                        <ignore />
                    </action>
                </pluginExecution>
            </pluginExecutions>
        </lifecycleMappingMetadata>
    </configuration>
</plugin> 
```

问题是，当我在项目中使用 Hibernate3 插件时，出现错误“生命周期配置未涵盖插件执行：org.codehaus.mojo:hibernate3-maven-plugin:3.0:hbm2ddl (execution: schema-generation, phase ：进程类）”在该行。请注意，我在使用 maven 依赖插件的那一行没有收到此错误。

任何想法？

谢谢

* * *

**编辑：** Hibernate3 插件的 hbm2ddl 目标绑定到进程类阶段。我已将阶段更改为打包（只是为了尝试），但没有收到错误。有什么解释吗？hbm2ddl 目标应该绑定到哪个阶段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:04:01.877

您必须添加一个阶段，这意味着您必须增强您的配置，如下所示：

```
 <pluginExecutionFilter>
   <groupId>org.codehaus.mojo</groupId>
   <artifactId>hibernate3-maven-plugin</artifactId>
   <versionRange>[3.0,)</versionRange>
   <phase>process-classes</phase>
   <goals>
     <goal>hbm2ddl</goal>
   </goals>
 </pluginExecutionFilter> 
```

# c# - 如何从多个目录中获取文件并将其显示在 datagridview 中？

> ID：10024558
> 
> 赞同：2
> 
> 时间：2012-04-05T07:44:30.230
> 
> 标签：c#, winforms

如问题中所述。我想从多个目录中读取文件并将其全部显示在一个 datagridview 中。我发现一个有同样的问题，但那个是使用 List<>.AddRange 来获取目录，而我正在使用 string[]。请帮忙。这是我获取目录和文件的代码片段：

```
s1 = Directory.GetFiles(@"C:\Documents and Settings\Administrator\Desktop\FILE\7", "*.*"); 
```

这是为了阅读它并将其填充到 datagridview 中：

```
for (int i = 0; i <= s1.Length - 1; i++)
        {

            try
            {
                if (i == 0)
                {
                    dt.Columns.Add("File_Name");
                    dt.Columns.Add("File_Type");
                    dt.Columns.Add("File_Size");
                    dt.Columns.Add("Create_Date");
                }

                FileInfo info = new FileInfo(s1[i]);
                FileSystemInfo sysInfo = new FileInfo(s1[i]);
                dr = dt.NewRow();

                dr["File_Name"] = sysInfo.Name;
                dr["File_Type"] = sysInfo.Extension;
                dr["File_Size"] = (info.Length / 1024).ToString();
                dr["Create_Date"] = sysInfo.CreationTime.Date.ToString("dd/MM/yyyy");
                dt.Rows.Add(dr);

                if ((info.Length / 1024) > 1500000)
                {
                    MessageBox.Show("" + sysInfo.Name + " had reach its size limit.");
                }

                if (dt.Rows.Count > 0)
                {
                    dataGridView1.DataSource = dt;
                }
            }
            catch (UnauthorizedAccessException ex)
            {
                MessageBox.Show("Error : " + ex.Message);
                continue;
            }
        }

   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T09:11:56.480

```
List<string> s1 = System.IO.Directory.GetFiles(@"C:\Documents and Settings\Administrator\Desktop\FILE\7", "*.*").ToList<string>();
s1.AddRange(System.IO.Directory.GetFiles(@"C:\Documents and Settings\Administrator\Desktop\FILE\9", "*.*").ToList<string>()); 
```

等等……然后

foreach(s1 中的字符串 s) .....

# mysql - wordpress 数据库（wp_post_meta）结构效率

> ID：10024559
> 
> 赞同：2
> 
> 时间：2012-04-05T07:44:34.237
> 
> 标签：mysql, database, performance, wordpress

我对 word press 数据库结构的效率有疑问。我的预期应用程序将包含 3 种自定义帖子类型和每种帖子类型大约 20-30 个字段。wordpress db 的基本结构基本上要求我在发布新帖子后对每个已发布的帖子进行 30 次插入操作……这是最好的方法吗？如果我将有 5000 个帖子（将在 1 年后出现），我将有一个 150,000 行的 wp_post_meta ...我会遇到性能问题的效率如何？

正如我所看到的那样，桌子会变得越来越长，这将对它的效率产生影响。

还是我完全错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:40:03.257

表 wp_postmeta 在 post_id 和 meta_key 列上有一个索引。因此，与 wp_posts 表的 JOIN 将非常快，并且不需要太多资源。

我确实有包含超过 700 万行的表的数据库。我在这些表中做了很多 INSERT 和 JOIN 语句。但是由于我在每个重要列上都有一个索引，所以您并没有真正认识到这些表有数百万行。

# asp-classic - ASP 从引用 url 中获取两个参数

> ID：10024560
> 
> 赞同：0
> 
> 时间：2012-04-05T07:44:35.210
> 
> 标签：asp-classic, vbscript

嗨，我正在使用代码来获取推荐 URL，如下所示：

```
sRef = encode(Request.ServerVariables("HTTP_REFERER")) 
```

上面的代码得到以下 URL： [http ://www.rzammit.com/pages/linux-form.asp?adv=101&loc=349&websync=233344-4555665-454&ptu=454545](http://www.rzammit.com/pages/linux-form.asp?adv=101&loc=349&websync=233344-4555665-454&ptu=454545)

从该网址我只想获取 ADV 和 LOC（Request.querystring 不起作用，因为这是一个在提交表单时运行的脚本）

因此，简而言之，通过使用推荐 URL，我想获取 adv 和 loc 参数的值。

请帮助我如何做到这一点？

以下是我目前正在使用的代码，但我遇到了问题。loc 之后的参数也显示出来。我想要一些动态的东西。adv 和 loc 的值也可以更长。

```
 <%
sRef = Request.ServerVariables("HTTP_REFERER")

a=instr(sRef, "adv")+4
b=instr(sRef, "&loc")

response.write(mid(sRef ,a,b-a))
response.write("<br>")
response.write(mid(sRef ,b+5))

%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:27:44.730

您可以使用以下通用函数：

```
function getQueryStringValueFromUrl(url, key)
    dim queryString, queryArray, i, value

    ' check if a querystring is present
    if not inStr(url, "?") > 0 then
        getQueryStringValueFromUrl = empty
    end if

    ' extract the querystring part from the url
    queryString = mid(url, inStr(url, "?") + 1)

    ' split the querystring into key/value pairs
    queryArray = split(queryString, "&")

    ' see if the key is present in the pairs
    for i = 0 to uBound(queryArray)
        if inStr(queryArray(i), key) = 1 then
            value = mid(queryArray(i), len(key) + 2)
        end if
    next

    ' return the value or empty if not found
    getQueryStringValueFromUrl = value
end function 
```

在你的情况下：

```
dim url
url = "http://www.rzammit.com/pages/linux-form.asp?adv=101&loc=349&websync=233344-4555665-454&ptu=454545"

response.write "ADV = " & getQueryStringValueFromUrl(url, "adv") & "<br />"
response.write "LOC = " & getQueryStringValueFromUrl(url, "loc") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:47:11.367

这是让您入门的东西；它使用正则表达式为您获取所有 URL 变量。您可以使用 split() 函数将它们拆分为“=”符号并获取一个简单的数组，或者将它们放入字典或其他任何东西中。

```
 Dim fieldcontent : fieldcontent = "http://www.rzammit.com/pages/linux-form.asp?adv=101&loc=349&websync=233344-4555665-454&ptu=454545"
    Dim regEx, Matches, Item
    Set regEx = New RegExp
        regEx.IgnoreCase = True
        regEx.Global = True
        regEx.MultiLine = False

        regEx.Pattern = "(\?|&)([a-zA-Z0-9]+)=([^&])"

        Set Matches  = regEx.Execute(fieldcontent)
        For Each Item in Matches
            response.write(Item.Value & "<br/>")
        Next

    Set regEx = Nothing 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T19:33:22.460

? 之后的所有内容的子串。

按“&”分割

迭代数组以找到“adv=”和“loc=”

下面是代码：

```
Dim fieldcontent 
fieldcontent = "http://www.rzammit.com/pages/linux-form.asp?adv=101&loc=349&websync=233344-4555665-454&ptu=454545"
fieldcontent = mid(fieldcontent,instr(fieldcontent,"?")+1)
Dim params
 params = Split(fieldcontent,"&")
for i = 0 to ubound(params) + 1
    if instr(params(i),"adv=")>0 then
        advvalue = mid(params(i),len("adv=")+1)
    end if
    if instr(params(i),"loc=")>0 then
       locvalue = mid(params(i),5)
    end if
next 
```

# objective-c - 检测按下 UILocalNotification 关闭按钮？

> ID：10024565
> 
> 赞同：0
> 
> 时间：2012-04-05T07:44:56.550
> 
> 标签：objective-c, ios, uilocalnotification

如何在 Objective-C 中处理 UILocalNotification 的关闭事件？
或者我可以检测到通知已完成？
如何将此代码修改为关闭按钮中的代码？

```
localNotification.alertBody=[NSString stringWithFormat:@"%@",[tmpdict objectForKey:@"Reminder"]];

NSDictionary *snoozeDic=[tmpdict objectForKey:@"Snooze"];
if ([[snoozeDic valueForKey:@"Switch"]intValue]==1) {
    localNotification.alertAction=@"Snooze";
} else
{
    localNotification.hasAction=NO;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:16:04.930

无法访问关闭按钮操作。安排 LocalNotification 后，它成为系统事件，您只能使用“didReceiveLocalNotification”访问“视图”事件

```
- (void)application:(UIApplication *)application 
        didReceiveLocalNotification:(UILocalNotification *)notification 
```

相信我，我希望不是这样……

# javascript - 在ajax加载页面中运行功能？

> ID：10024568
> 
> 赞同：1
> 
> 时间：2012-04-05T07:45:05.320
> 
> 标签：javascript, facebook, jquery

我在加载 ajax 页面时尝试运行一个函数。在 index.html 中，我正在加载 page1.html，而在 page1.html 中，我有一个要在加载页面时运行的函数。

我尝试了很多东西，但没有运气。

假设我只想运行一个带有警报的函数，那看起来如何？谢谢！

我使用 jquery 来获取 page1.html。在 page1.html 我有以下代码从 facebook 获取一些专辑，我只是​​想在页面加载时运行代码？

```
alert('onload');

//get album name
FB.api('/1424613333333/albums', function(response) {

  if (response && response.data && response.data.length){
    var ul = document.getElementById('fb-albumslist');
    for (var i=0, l=response.data.length; i<l; i++) {
     if (response.data !== "undefined"){    
      var
        album = response.data[i],
        li = document.createElement('li'),
        a = document.createElement('a');
        if(!album.link) continue;
      a.innerHTML = album.name;
      a.href = album.link;
      li.appendChild(a);
      ul.appendChild(li);

    }
   }
  }

  });
 FB.XFBML.parse( document.getElementById('fb-albumslist') );

} 
```

我用它来加载 ajax 页面：

```
function loadPage(url) {

      $('#guiden_menyn').load('manmade/guiden/guiden_menyn.html #content', hijackLinks);

      $('#container').load(url + ' #content', hijackLinks);

}
function hijackLinks() {
    $('#guiden_menyn a').click(function(e){
        e.preventDefault();
        loadPage(e.target.href);
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T04:43:50.260

这是一种方法 - 解析响应，提取脚本，然后评估它们

[在 responseHTML 中执行 JavaScript](https://stackoverflow.com/questions/3129393/execute-javascript-within-responsehtml/3130915#3130915)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:49:16.400

我认为这是不可能的。但是你可以在ajax之后手动调用函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T07:51:41.033

尝试使用 jquery 加载 (http://api.jquery.com/load/)。它在加载完成后提供回调

# javascript - JSP 捕获数据并返回

> ID：10024569
> 
> 赞同：0
> 
> 时间：2012-04-05T07:45:06.013
> 
> 标签：javascript

我有一个对话框，我在其中指定一个 url。单击确定后，URL 将在另一个对话框中打开。现在我想捕获输入的信息并将其返回到以前的对话框。如何才能做到这一点？？？

```
function urlwindowopen() 
{ 
var projecturl = document.getElementById("prourl").value;
alert("Prourl: "+projecturl);
window.open(projecturl);
} 
```

我希望打开的新窗口中的数据返回到函数中，我无法编辑打开的新窗口的代码，因为 dat URL 可能是第 3 方。

# url-rewriting - 使用 urlrewritefilter 从 url 中删除文件

> ID：10024573
> 
> 赞同：1
> 
> 时间：2012-04-05T07:45:44.420
> 
> 标签：url-rewriting, tuckey-urlrewrite-filter

我有一个类似的网址`www.foo.com/start/rewrite.php/home/say/index`

如何使用 UrlRewriteFilter 从此 URL 中删除 rewrite.php，例如

```
www.foo.com/start/home/say/index 
```

我认为 mod_rewrite 可以使用

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^/start/rewrite.php/?(.*) /$1 [R=301,L] 
```

谁能帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:25:23.493

这可以工作：

```
<rule>
    <from>^(.*)/(rewrite.php)/(.*)$</from>
    <to>$1/$3</to>
</rule> 
```

# java - Quartz cron 表达式为 0/0

> ID：10024576
> 
> 赞同：2
> 
> 时间：2012-04-05T07:45:56.250
> 
> 标签：java, quartz-scheduler, cronexpression

作为输入验证的一部分，我在想这是否是一个真正有效的 cron 表达式以及它将如何执行：

```
0 0/0 * * * ? 
```

Quartz 验证返回 true

```
org.quartz.CronExpression.isValidExpression("0 0/0 * * * ?") 
```

那么，这是否一直运行，从不，每小时或每分钟......？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T09:25:47.027

您可以使用[TriggerUtils.computeFireTimesBetween()](http://quartz-scheduler.org/api/2.1.0/org/quartz/TriggerUtils.html#computeFireTimesBetween%28org.quartz.spi.OperableTrigger,%20org.quartz.Calendar,%20java.util.Date,%20java.util.Date%29)找到结果：

```
try {
        CronTriggerImpl cron = new CronTriggerImpl();

        cron.setStartTime(new Date());
        cron.setCronExpression("0 0/0 * * * ?");

        BaseCalendar calendar = new BaseCalendar();
        List<Date> result = TriggerUtils.computeFireTimesBetween(cron, calendar, new Date(),DateBuilder.futureDate(1, IntervalUnit.DAY));

        for (Date date : result) {
            System.out.println(date);
        }

    } catch (ParseException e) {
        e.printStackTrace();
    } 
```

输出是：

```
Thu Apr 05 18:00:00 CST 2012
Thu Apr 05 19:00:00 CST 2012
Thu Apr 05 20:00:00 CST 2012
Thu Apr 05 21:00:00 CST 2012
Thu Apr 05 22:00:00 CST 2012
Thu Apr 05 23:00:00 CST 2012
Fri Apr 06 00:00:00 CST 2012
Fri Apr 06 01:00:00 CST 2012
Fri Apr 06 02:00:00 CST 2012
Fri Apr 06 03:00:00 CST 2012
Fri Apr 06 04:00:00 CST 2012
....................... 
```

因此，`0 0/0 * * * ?`将在 0 分 0 秒时每小时运行一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T09:15:19.123

根据[CronTrigger 教程](http://www.quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/crontrigger)文档：

> *   `/`- 用于指定增量。例如，秒字段中的“0/15”表示“秒 0、15、30*和 45* ”。而秒字段中的“5/15”表示“*秒 5、20、35 和 50* ”。您还可以在 '' 字符之后指定 '/' - 在这种情况下，'' 相当于在 '/' 之前有 '0'。日期字段中的“1/3”表示“从该月的第一天开始每 3 天触发一次”。

这意味着`0`在这种情况下实际上没有意义。然而[`CronExpression`](http://quartz-scheduler.org/api/2.1.0/org/quartz/CronExpression.html)似乎忽略它并简单地丢弃该值，有效地将这个表达式视为：

```
0 0 * * * ? 
```

如果您好奇，[这是](http://grepcode.com/file/repo1.maven.org/maven2/org.quartz-scheduler/quartz/2.1.3/org/quartz/CronExpression.java/#970)丢弃无效`0`值的代码：

```
 if ((incr == 0 || incr == -1) && val != ALL_SPEC_INT) {
        if (val != -1) {
            set.add(Integer.valueOf(val));
        } else {
            set.add(NO_SPEC);
        }

        return;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T07:58:07.477

[CronTrigger](http://www.quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/crontrigger)文档中的更多信息。我的猜测是该表达式`0 0/0 * * * ?`表示*每小时一次*（即`0/0`不表示每分钟）。但是，如果您一直需要（即每秒），您可以使用`* * * * ? *`.

# jquery - 表单提交后从 iframe 获取变量？

> ID：10024577
> 
> 赞同：1
> 
> 时间：2012-04-05T07:45:56.367
> 
> 标签：jquery, forms, iframe, submit

```
$(function() {
    $(".preview").click(function() {
        $('#image').wrap('<form action="/index/upload.php" method="post" enctype="multipart/form-data" id="imageform" target="imageupload" />');
        $('#imageform').submit();
        $('#image').unwrap();
        var image = $('#imageupload').filename;
        return false;
    });
});

<iframe style="display: none;" name="imageupload" id="imageupload"></iframe>
<input type="file" id="image" name="image">
<input type="button" value="Preview" class="preview"> 
```

在上面的代码中，图像提交到服务器后，它在 iframe 中创建了一个变量，供我检索，其中包含上传的图像的文件名。我遇到的问题是，当检索文件名时，jQuery 的 .submit() 函数在提交表单时没有任何回调，因此在上传图像时，我的代码尝试在文件名不存在时获取文件名。有谁知道我可以解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:22:04.943

我发现 iframe 本身有一个 onload 事件，因此我能够在提交到 iframe 后触发此事件，并且在文件上传后代码继续执行。

```
$(function() {
   $(".preview").click(function() {
       $('#image').wrap('<form action="/index/upload.php" method="post" enctype="multipart/form-data" id="imageform" target="imageupload" />');
        $('#imageupload').attr('onload', 'preview()');
        $('#imageform').submit();
        $('#image').unwrap();
        return false;
   });
});
function preview() {
    var image = $('#imageupload').contents().find('#filename').html();
}

<iframe style="display: none;" onload="" name="imageupload" id="imageupload"></iframe>
<input type="file" id="image" name="image">
<input type="button" value="Preview" class="preview"> 
```

# javascript - 从数据网格中获取行数据的更好方法？

> ID：10024582
> 
> 赞同：0
> 
> 时间：2012-04-05T07:46:22.517
> 
> 标签：javascript, jquery, grid, telerik-grid

我正在使用客户端 API 来获取 Telerik MVC 网格的行数据，但效率非常低，尤其是在数百行的循环中：

```
var grid = row.closest("div.t-grid").data("tGrid");
var rowIndex = row[0].rowIndex;
var rowData = grid.data[rowIndex]; 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:41:28.157

我只是访问模型，也许从那里得到我的行。我不确定您要做什么，但是您可以使网格行可单击并以这种方式处理。

无论哪种方式，我认为我们需要更多信息才能更好地帮助您。

# objective-c - 存储应用程序范围的实例

> ID：10024584
> 
> 赞同：1
> 
> 时间：2012-04-05T07:46:35.250
> 
> 标签：objective-c, ios

如果我需要在我的应用程序内的许多其他类中访问同一个类的实例，在我的应用程序委托中创建一个包含此实例的属性，然后从我在应用程序中需要它的任何地方访问该属性，使用`[UIApplication sharedApplication].delegate.instance`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:14:52.600

我不这么认为。最好的方法是使用单例类：[link](http://iphone.galloway.me.uk/iphone-sdktutorials/singleton-classes/)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:16:39.300

你可以这样做，或者你可以像 Heliem 所说的那样使用单例。

但是，您需要引用委托的类：

```
((MyAppDelegate *) [UIApplication sharedApplication].delegate).instance; 
```

# actionscript-3 - 在 flex NativeProcess 中传递参数

> ID：10024593
> 
> 赞同：0
> 
> 时间：2012-04-05T07:47:33.677
> 
> 标签：actionscript-3, apache-flex, air, flex4

我想将两个参数传递给 nativeProcess。

当我使用带有参数的 windows 命令运行 exe 文件时，它正在工作。窗口命令是“abc.exe a.txt b.txt”

如何使用 flex nativeProcess 以该格式将两个参数传递给 exe？

这是我到目前为止所拥有的：

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx" applicationComplete="windowedapplication1_applicationCompleteHandler(event)">
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            private var process:NativeProcess;
            protected function windowedapplication1_applicationCompleteHandler(event:FlexEvent):void
            {
                if (NativeProcess.isSupported)
                {
                    callExe();
                }
                else
                {
                    textReceived.text = "NativeProcess not supported.";
                }
            }

            public function callExe():void
            {
                var a_FilePath:String = File.applicationStorageDirectory.resolvePath("dist/a.txt").nativePath;
                var b_FilePath:File = File.applicationStorageDirectory.resolvePath("dist/b.txt").nativePath;

                if (Capabilities.os.toLowerCase().indexOf("win") > -1)
                {
                    var file:File = File.applicationStorageDirectory.resolvePath("dist/abc.exe");
                }

                var nativeProcessStartupInfo:NativeProcessStartupInfo = new NativeProcessStartupInfo(); 
```

// 我把这行放在下面，它适用于我的情况

**nativeProcessStartupInfo.workingDirectory = File.applicationStorageDirectory.resolvePath();**

nativeProcessStartupInfo.executable = 文件；

```
 var args:Vector.<String> = new Vector.<String>();
                args.push(a_FilePath);
                args.push(b_FilePath);

                nativeProcessStartupInfo.arguments = args;

                process = new NativeProcess();
                process.start(nativeProcessStartupInfo);
                process.addEventListener(ProgressEvent.STANDARD_OUTPUT_DATA, onOutputData);
                process.addEventListener(ProgressEvent.STANDARD_INPUT_PROGRESS, inputProgressListener);
                process.addEventListener(ProgressEvent.PROGRESS, progressEvent);
                process.addEventListener(ProgressEvent.STANDARD_ERROR_DATA, errorData);
            }

            public function inputProgressListener(event:ProgressEvent):void
            {
                textReceived.text += "Input Progress Event";
            }
            public function onOutputData(event:ProgressEvent):void
            {
                textReceived.text += "Output Event";
            }
            public function progressEvent(event:ProgressEvent):void
            {
                textReceived.text += "Progress Event";  
            }
            public function errorData(event:ProgressEvent):void
            {
                textReceived.text += "Error Event";
            }
        ]]>
    </fx:Script>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <mx:TextInput id="textReceived" width="352" height="200"/>

</s:WindowedApplication> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:45:29.603

我通过以粗体添加以下行来解决我的难题：

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx" applicationComplete="windowedapplication1_applicationCompleteHandler(event)">
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            private var process:NativeProcess;
            protected function windowedapplication1_applicationCompleteHandler(event:FlexEvent):void
            {
                if (NativeProcess.isSupported)
                {
                    callExe();
                }
                else
                {
                    textReceived.text = "NativeProcess not supported.";
                }
            }

            public function callExe():void
            {
                var a_FilePath:String = File.applicationStorageDirectory.resolvePath("dist/a.txt").nativePath;
                var b_FilePath:File = File.applicationStorageDirectory.resolvePath("dist/b.txt").nativePath;

                if (Capabilities.os.toLowerCase().indexOf("win") > -1)
                {
                    var file:File = File.applicationStorageDirectory.resolvePath("dist/abc.exe");
                }

                var nativeProcessStartupInfo:NativeProcessStartupInfo = new NativeProcessStartupInfo(); 
```

// 我把这行放在下面，它适用于我的情况

**nativeProcessStartupInfo.workingDirectory = File.applicationStorageDirectory.resolvePath();**

nativeProcessStartupInfo.executable = 文件；

```
 var args:Vector.<String> = new Vector.<String>();
                args.push(a_FilePath);
                args.push(b_FilePath);

                nativeProcessStartupInfo.arguments = args;

                process = new NativeProcess();
                process.start(nativeProcessStartupInfo);
                process.addEventListener(ProgressEvent.STANDARD_OUTPUT_DATA, onOutputData);
                process.addEventListener(ProgressEvent.STANDARD_INPUT_PROGRESS, inputProgressListener);
                process.addEventListener(ProgressEvent.PROGRESS, progressEvent);
                process.addEventListener(ProgressEvent.STANDARD_ERROR_DATA, errorData);
            }

            public function inputProgressListener(event:ProgressEvent):void
            {
                textReceived.text += "Input Progress Event";
            }
            public function onOutputData(event:ProgressEvent):void
            {
                textReceived.text += "Output Event";
            }
            public function progressEvent(event:ProgressEvent):void
            {
                textReceived.text += "Progress Event";  
            }
            public function errorData(event:ProgressEvent):void
            {
                textReceived.text += "Error Event";
            }
        ]]>
    </fx:Script>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <mx:TextInput id="textReceived" width="352" height="200"/>

</s:WindowedApplication> 
```

# delphi - 如何在 Delphi 中获取 CWnd 对象的窗口句柄？

> ID：10024595
> 
> 赞同：0
> 
> 时间：2012-04-05T07:47:40.773
> 
> 标签：delphi, visual-c++, mfc, handle, cwnd

我有 Epic Editor，它返回窗口的句柄（请参阅下面 plugin_1 中的 Java 代码）：

```
int handle = com.arbortext.epic.Application.getActiveWindow().getNativeHandle(); 
```

其实这个句柄就是`CWnd *`指针。它直接转移到本机 plugin_2 不起作用。相反，我们必须使用带有 MFC 支持的 dll 来调用

```
HWND __stdcall GetHandle(CWnd *cp)
{
 HWND hWnd = cp->GetSafeHwnd();
 return hWnd; 
} 
```

如何在没有 MFC 的情况下在 Delphi 中重写此代码？我的意思是从指向`CWnd`对象的指针中提取窗口句柄。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T07:51:44.217

您不能以安全的方式在 Delphi 中编写它。那是因为`CWnd`它是一个 C++ 类，你不能将 C++ 类导入 Delphi 代码。我想你可以对内存布局进行逆向工程，`CWnd`但我对谈论这种方法的智慧持怀疑态度。我的建议是坚持使用 MFC DLL。

# facebook - 我们可以制作允许我们的用户在我们的应用程序中创建新的 facebook 应用程序的 facebook 应用程序吗？

> ID：10024596
> 
> 赞同：-1
> 
> 时间：2012-04-05T07:47:41.543
> 
> 标签：facebook

我们想知道，是否有可能开发一个 Facebook 应用程序，允许我们的应用程序用户通过我们的网站或通过我们的应用程序制作 Facebook 应用程序？

你们有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:58:28.757

不，没有任何方法可以在运行时以自动方式创建 fb 应用程序。

如果我没记错的话，他们曾经有类似的东西来创建“子应用程序”，但我找不到任何参考。

您可以做的是要求您的用户输入他们自己创建的 fb 应用程序的应用程序 ID。

* * *

# 编辑

我设法找到了一些实现目标的**旧**方法的参考，但它在很久以前就已被弃用，并且没有新的替代方法。至于现在，你根本做不到。

参考： [Facebook 让您使用新的创建应用程序 API 轻松集成到站点和小部件中，](http://blog.programmableweb.com/2009/10/15/facebook-lets-you-easily-integrate-into-sites-and-widgets-with-new-create-application-api/)该 API位于此线程：以编程方式[创建 facebook 应用程序](http://facebook.stackoverflow.com/questions/6264080/create-a-facebook-application-programmatically)。

您可以在此处找到有关此问题的许多其他线程。但我可以向你保证，你不会偶然发现会说任何不同的东西。

# google-maps - Maps API：是否可以对马来西亚的房屋或建筑物名称进行地理编码

> ID：10024597
> 
> 赞同：0
> 
> 时间：2012-04-05T07:47:44.927
> 
> 标签：google-maps, google-maps-api-3

是否可以仅根据马来西亚的建筑物名称对地址进行地理编码？我正在使用具有高级许可证的 Maps APIs v3 地理编码服务，但查询结果始终返回状态：ZERO_RESULTS。

在[http://maps.google.com.my/](http://maps.google.com.my/)中，前提搜索运行良好。知道 Maps API 是否可行？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-27T22:04:29.947

使用前提设置应该是可能的，但这取决于地图数据库对于马来西亚的健壮程度，例如：

```
var buildingName = "The Building Name";

geocoder.geocode( { 'premise' : buildingName }, function(results, status) {
...
} 
```

# flash - 创建和查看 Flash 日志

> ID：10024600
> 
> 赞同：0
> 
> 时间：2012-04-05T07:47:59.140
> 
> 标签：flash, apache-flex, logging, flexbuilder, flashlog

我想为我的 flex 应用程序创建日志文件。也就是说，当我运行我的 flex 应用程序时，该文件应该包含其中的所有跟踪打印。我如何配置 flex 来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T07:57:44.327

[使用调试 Flash Player，您可以通过编辑/创建 mm.cfg 文件](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7fc9.html)将跟踪语句写入磁盘。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T14:59:57.820

这部分取决于您希望在何处/如何访问日志文件。如果这只是您/开发团队关心的事情 - 特别是在远程调试场景中，那么执行上述操作的辅助工具就足够了。

但是，如果这是您希望以用户身份在应用程序中运行的内容，那么您需要更有创意并尝试使用 Logger 类。它按优先级区分每个日志事件，并能够创建一个实现——其中之一是跟踪记录器。但是，仍然需要遵循 logger api，这意味着重构实际的 trace 语句本身以指向 logger 实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T16:34:50.163

I suggest that you take a look at: [http://www.as3commons.org/as3-commons-logging/index.html](http://www.as3commons.org/as3-commons-logging/index.html) Thats a library very similar to Log4j, I personally implemented a appender for AMF logging.

If you read the user guide [http://www.as3commons.org/as3-commons-logging/userguide.html](http://www.as3commons.org/as3-commons-logging/userguide.html) you'll see that it's very easy to log everything (and if you have Flash player 10 you could even log uncatched errors). The only downside is that with the normal flash player (not the debugger version) you can't get the stack trace.

Hope it helps

# c# - 我应该使用存储库模式在 MVVM 上下文中检索 WPF 应用程序中的数据吗？

> ID：10024603
> 
> 赞同：0
> 
> 时间：2012-04-05T07:48:15.767
> 
> 标签：c#, wpf, mvvm, repository-pattern

我正在开发一个读取和写入 XML 数据的 WPF 应用程序。

我来自 MVC 背景，我想采用 MVVM 方法。

在我从事的最后一个 MVC 项目中，我将使用存储库模式来获取数据。控制器将具有到服务的接口，而服务又将具有到存储库的接口。存储库将获取数据并将其返回给控制器，控制器将填充要传递给视图的 ViewModel。

我在想

*   我应该在这里采取类似的方法吗？
*   我应该实现一个存储库模式。
*   如果是这样，我会在例如按钮单击事件中提供服务接口吗？
*   我应该在按钮单击事件中还是在服务中填充 ViewModel？

如果我不应该使用存储库模式，那么检索 XML 数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:05:05.373

在我之前构建的 MVC 应用程序中，我将视图/编辑模型放在单独的 dll 中以帮助清理控制器。该服务（域操作的外观）将域对象映射到视图/编辑模型并将它们传递回调用控制器。

如果您确实希望使用存储库模式，我会在服务中填充模型 - 这允许所有此类操作包含在一个地方，而不是分散在各种点击事件中。

# regex - Python使用正则表达式搜索子文件夹中的文件名并附加到列表以供进一步使用

> ID：10024605
> 
> 赞同：1
> 
> 时间：2012-04-05T07:48:25.013
> 
> 标签：regex, list, search, python-2.6, subdirectory

我的文件系统包含大量文件夹，文件夹名称的格式为 4 位。每个文件夹中都有不同数量的不同格式的文件，其名称与文件夹名称相对应，有些还带有字母和/或日期。我想做的是搜索每个文件夹，如果一年的格式为“19？？” 或“20？？” 找到后，创建一个标有该年份的文件夹。如果文件名还包含表达式“ED*”，请创建一个带有该标签的子文件夹。创建所有文件夹后，将所有文件复制到其相应的文件夹中，并将名称删除到前 6 个字符。此文件结构将在单独的驱动器上创建。

示例：文件夹 MAIN 包含许多子文件夹，例如 2742、2830、3417 等。文件夹 2742 包含文件

*   2742AB.txt
*   2742AB_1999.tif
*   2742BB_1999_ED1.txt
*   2742AC_1999_ED2_FINAL.txt
*   2742CC_2001_ED4.tif

运行脚本后，文件夹结构应如下所示：

*   主\2742\2742AB.txt
*   主\2742\1999\2742AB.tif
*   主\2742\1999\ED1\2742BB.txt
*   主\2742\1999\ED2\2742AC.txt
*   主\2742\2001\ED4\2742CC.tif

在这里搜索类似示例后使用各种代码片段，我想出了以下内容： import os folder = 'C:\MAIN' os.chdir(folder)

```
dirlist = []
for dirname, dirnames, filenames in os.walk(folder):
    for subdirname in dirnames:
        dirlist.append(subdirname)
    for filename in filenames:
        dirlist.append(filename) 
```

我的问题是下一部分，即修改上面的搜索以首先检查该值是否已经在列表中。如果它在列表中，则继续搜索，否则检查文件名是否包含正则表达式，如果包含，则将其添加到数组中。在（某种）伪代码中：

```
initialise list years
#search through folders etc
for filenames in folders
    if filename contains either regex
        for values in years
            if filename exists
                skip it and continue searching
            else
                append filename to years 
```

我在这里查看了有关使用正则表达式等搜索文件夹的各种答案，但我不完全确定我使用的方法是否正确。对我使用的方法的任何建议和/或评论将不胜感激。

**编辑**我编辑的代码，使用下面 Michal 的建议并自己修改一下：

```
import os, re, shutil
tfolder = 'C:\\MAIN'
os.chdir(tfolder)

re_year19xx = re.compile('(19[0-9][0-9])')
re_year20xx = re.compile('(20[0-9][0-9])')
re_ed = re.compile('(ed[0-9]\d+)', re.IGNORECASE)
destPath = 'C:\\DEST'

filePath, coords = os.path.split(fname)
coordsFolder = coords[:4]
coordsFname = coords[:6]
coordsExt = os.path.splitext(fname)
year = ' ' #create variable year
ed = ' ' #create variable ed to store the edition number if necessary
bname = fname #the original file name
for re_year in (re_year19xx, re_year20xx):
    rx = re_year.search(fname) #search for regex in the file name and store it in rx
    if rx:
        year = rx.group(1) #if the regex is found, store the year
        print(year)
        bname.replace(year, ' ')
        re_searchEd = re_ed.search(fname)
        if re_searchEd:
            ed = re_searchEd.group(1)
            bname.replace(ed, ' ')
    os.chdir(destPath)  
    fname2 = os.path.join(destPath, coordsFolder,year, ed) + coordsFname + coordsExt[1]
    print('%s -> %s' % (fname, fname2))
    dirn, _ = os.path.split(fname2)
    if not os.path.exists(dirn):
        os.makedirs(dirn)
    shutil.copy(fname, fname2)

for root, dirs, files in os.walk(tfolder):
    for name in files:
        fn = os.path.join(root, name)
        analyse_file_name(fn) 
```

再次查看我的代码，一切似乎都正常工作，直到它必须创建子文件夹，即一旦`coordsFolder`创建，如果`year`不是空白，创建子文件夹，如果`ed`不是空白，创建子文件夹，然后将原始文件复制到相应的子文件夹并重命名。文件夹的调试`print`语句结果`2742`如下：

```
C:\MAIN\2742\2742AB.txt -> C:\DEST\2742\year\ed2742AB.txt
C:\MAIN\2742\2742AB.txt -> C:\DEST\2742\year\ed2742AB.txt
1999
C:\MAIN\2742\2742AB_1999.tif -> C:\DEST\2742\1999\ed2742AB.tif
C:\MAIN\2742\2742AB_1999.tif -> C:\DEST\2742\1999\ed2742AB.tif
1999
C:\MAIN\2742\2742AC_1999_ED2_final.tif -> C:\DEST\2742\1999\ed2742AC.tif
C:\MAIN\2742\2742AC_1999_ED2_final.tif -> C:\DEST\2742\1999\ed2742AC.tif
1999
C:\MAIN\2742\2742BB_1999_ED1.txt -> C:\DEST\2742\1999\ed2742BB.txt
C:\MAIN\2742\2742BB_1999_ED1.txt -> C:\DEST\2742\1999\ed2742BB.txt
C:\MAIN\2742\2742CC_2001_ED4.tif -> C:\DEST\2742\year\ed2742CC.tif
2001
C:\MAIN\2742\2742CC_2001_ED4.tif -> C:\DEST\2742\2001\ed2742CC.tif
1999 
```

**编辑**添加检查值后`year`：

```
if year is 'year':
    fname2 = os.path.join(destPath, coordsFolder) + '\\' + coordsFname + coordsExt[1]
else:
    fname2 = os.path.join(destPath, coordsFolder,year) + '\\' + coordsFname + coordsExt[1] 
```

路径是正确创建的 npw 并且文件被复制到正确的位置并正确重命名！所以问题的最后一部分现在适用于`ed`子文件夹。目前，代码只是忽略了文件名中包含“ED1”、“ED2”等的部分。如果 的值`ed`不是“ed”> 的初始值，我在哪里放置创建子文件夹的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:37:24.953

我的问题的最终答案（经过大量编辑和@Michal Niklas 的大量帮助：

```
import os, re, shutil

tfolder = 'C:\\MAIN'

os.chdir(tfolder)

re_year19xx = re.compile('(19[0-9][0-9])')
re_year20xx = re.compile('(20[0-9][0-9])')

re_ed = re.compile('(ED[0-9])')
destPath = 'C:\\DEST'

def analyse_file_name(fname):
    filePath, coords = os.path.split(fname) #the new folders will be named according to the first 4 characters of the original file name
    coordsFolder = coords[:4]
    coordsFname = coords[:6]
    coordsExt = os.path.splitext(fname)
    year = 'year' #create variable year
    ed = 'ed' #create variable ed to store the edition number if necessary
    bname = fname #the original file name
        for re_year in (re_year19xx, re_year20xx):
        rx = re_year.search(fname) #search for regex in the file name and store it in rx
        if rx:
            year = rx.group(1) #if the regex is found, store the year
            bname.replace(year, ' ')
            res = re_ed.search(fname)
            if res:
                ed = res.group(1)
                bname.replace(ed, ' ')
        os.chdir(destPath)  
        if year is 'year':
            fname2 = os.path.join(destPath, coordsFolder) + '\\' + coordsFname + coordsExt[1]
        else:
            fname2 = os.path.join(destPath, coordsFolder,year,ed) + '\\' + coordsFname + coordsExt[1]
        print('%s -> %s' % (fname, fname2)) #debug print
        dirn, _ = os.path.split(fname2)
        if not os.path.exists(dirn):
            os.makedirs(dirn)
        shutil.copy(fname, fname2)

for root, dirs, files in os.walk(tfolder):
    for name in files:
        fn = os.path.join(root, name)
        analyse_file_name(fn) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:19:04.773

您应该创建分析文件名的函数 - 拆分其部分，用您想要的内容替换它们等。此类函数的示例：

```
re_year19xx = re.compile('(19\d\d)')
re_year20xx = re.compile('(20\d\d)')

re_ed = re.compile('(ed\d+)', re.IGNORECASE)

def analyze_file_name(fname):
    digits = fname[:4]
    year = ''
    ed = ''
    bname = fname
    for re_year in (re_year19xx, re_year20xx):
        rx = re_year.search(fname)
        if rx:
            year = rx.group(1)
            bname = bname.replace(year, '')
    rx = re_ed.search(fname)
    if rx:
        ed = rx.group(1)
        bname = bname.replace(ed, '')
    fname2 = os.path.join('MAIN', digits, year, ed, bname)
    fname2 = fname2.replace('_', '')
    print('%s -> %s' % (fname, fname2)) 
```

如果要将文件移动（重命名）到新目标，则可以检查并创建目标目录，然后将文件移动到那里。代码可能如下所示：

```
 ...
    fname2 = fname2.replace('_', '')
    dirn, _ = os.path.split(fname2)
    if not os.path.exists(dirn):
        os.makedirs(dirn)
    os.rename(fname, fname2)
    print('%s -> %s' % (fname, fname2)) 
```

如果您想同时拥有源文件和目标文件，则`os.rename()`可以使用。`shutil.copy()`

你也有问题`os.walk()`。在当前形式中，您将多次获得相同的文件名，并且`analyze_file_name()`只会获得文件名的最后一部分（即没有目录）。我将向您展示如何获得完整的文件名：

```
for root, dirs, files in os.walk(tfolder):
    for name in files:
        fn = os.path.join(root, name)
        analyse_file_name(fn) 
```

您还可以将带有目录名称的额外参数添加到`analyse_file_name()`.

完整版本基于您创建 dest 目录的最后一个来源：

```
def analyse_file_name(fname):
    filePath, coords = os.path.split(fname)
    coordsFolder = coords[:4]
    coordsFname = coords[:6]
    coordsExt = os.path.splitext(fname)
    year = 'year' #create variable year
    ed = 'ed' #create variable ed to store the edition number if necessary
    bname = fname #the original file name
    for re_year in (re_year19xx, re_year20xx):
        rx = re_year.search(fname) #search for regex in the file name and store it in rx
        if rx:
            year = rx.group(1) #if the regex is found, store the year
            print(year)
            bname.replace(year, ' ')
            re_searchEd = re_ed.search(fname)
            if re_searchEd:
                ed = re_searchEd.group(1)
                bname.replace(ed, ' ')
        fname2 = os.path.join(destPath, coordsFolder,year, ed)
        fname2 = fname2 + coordsFname + coordsExt[1]
        print('%s -> %s' % (fname, fname2))
        dirn, _ = os.path.split(fname2)
        if not os.path.exists(dirn):
            os.makedirs(dirn)
        shutil.copy(fname, fname2) 
```

# ios - Xcode 中的 iPhone 模拟器是否支持低功耗蓝牙？

> ID：10024608
> 
> 赞同：54
> 
> 时间：2012-04-05T07:48:37.337
> 
> 标签：ios, ios-simulator, ios5, core-bluetooth

我正在新的 Mac mini 上尝试一些 iOS 测试应用程序，它支持蓝牙低功耗。CoreBluetooth框架用于这些[。](http://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html)但是，我无法让蓝牙在 iPhone 模拟器中工作，这是 Xcode 的一部分。

当我分配一个新的[CBCentralManager](http://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CBCentralManager_Class/translated_content/CBCentralManager.html)时， centralManagerDidUpdateState: 接收`CBCentralManagerStatePoweredOff`代表*蓝牙当前已关闭的数据。*

我第一次运行文本应用程序时，打开了一个看起来很错误的框（仅使用了语言变量，而不是实际文本），并带有两个按钮。第一个引导我进入设置面板，其中有一个启用蓝牙的选项。但是，在我告诉它启用蓝牙后，它只显示旋转动画，既不会完成也不会取消。即使在重新启动 Mac 后，仍然只有旋转动画。盒子也不再打开了。

本质上，我认为 iPhone 模拟器应该支持低功耗蓝牙。否则，在模拟器的设置应用程序中有一个选项并没有真正意义。此外，中央管理器状态是`CBCentralManagerStatePoweredOff`但不代表`CBCentralManagerStateUnsupported`The *platform does not support Bluetooth Low Energy*。这也带来了支持可能存在的希望。

*   iPhone 模拟器是否支持低功耗蓝牙？
*   如果是，我该如何启用它？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-15T10:56:33.607

根据 Apple 的这个 appnote，模拟器[确实支持蓝牙低功耗 (4.0)。](http://developer.apple.com/library/ios/#technotes/tn2295/_index.html)唯一的问题是，即使你有一台内置 BLE 的电脑，你也不能和它一起使用模拟器，因为（我认为）你占用了 BLE 上的可用性，让其他设备发现你的电脑，从而限制了Mac 的功能。

因此，如果您自己购买 BLE USB 加密狗，您将能够在模拟器中使用它。

编辑：从@JoeShaw 添加信息：

> 不幸的是，iOS 7 的模拟器似乎已经放弃了核心蓝牙支持。参考：doubleencore.com/2013/09/whats-new-in-bluetooth-le-ios-7。此外，链接的技术说明似乎已被删除。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-13T15:38:55.813

我一直在使用模拟器来测试 BLE 应用程序 - 但您需要使用 OSX 10.7。正如 Wilhelmsen 提到的，您还需要一个 BLE USB 加密狗。此外，您需要设置 NVRAM 设置：

```
$sudo nvram bluetoothHostControllerSwitchBehavior="never" 
```

有关使用模拟器测试 BLE 应用程序的更多详细信息，请参阅 Apple 的此技术说明：http: [//developer.apple.com/library/ios/#technotes/tn2295/_index.html](http://developer.apple.com/library/ios/#technotes/tn2295/_index.html)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-11-15T20:36:18.113

根据[http://www.doubleencore.com/2013/09/whats-new-in-bluetooth-le-ios-7/](http://www.doubleencore.com/2013/09/whats-new-in-bluetooth-le-ios-7/)，从 iOS 7 开始，模拟器已不再支持核心蓝牙。我还没有想到找出原因，但这意味着您将来需要在真实硬件上进行测试。

看起来 Apple 已经删除了 Tech Note 2295，因为当我点击 URL 时会被重定向。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-17T08:40:38.100

我发现 Apple 在[他们自己的示例](https://developer.apple.com/library/ios/#samplecode/TemperatureSensor/Listings/ReadMe_txt.html#//apple_ref/doc/uid/DTS40012194-ReadMe_txt-DontLinkElementID_3)中写道，模拟器不能用于测试基于*核心蓝牙*的应用程序。

> 重要提示：此项目需要支持蓝牙 LE 的设备（目前只有 iPhone 4S），并且无法在模拟器上运行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-05T14:50:10.573

过去一周我一直在开发 BLE 应用程序，并且可以自信地说不，除非您使用的 mac 具有 BLE（Macbook Air），否则模拟器不支持 BLE - 但即便如此我也不是 100% 确定如何启用此功能（很可能只需在您的 Mac 和模拟器上开启 BLE）。

如果您没有启用 BLE 的 mac，则必须为自己找一个 4s 进行测试！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-19T17:07:09.703

其实我在模拟器里试过了，还是不行。模拟器无法识别您的计算机中是否有蓝牙 4.0，但如果您在 Xcode 中使用命令行工具项目，则它可以工作。仅适用于您想在命令行工具中创建内容的情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-02T17:16:25.803

在模拟器中使用 CoreBluetooth 的另一种方法是使用 Nordic Semiconductor 的 CoreBluetooth-Mock 库，它允许您将 CoreBluetooth 存根并提供模拟/模拟外围设备以在使用模拟器时使用：

[https://github.com/NordicSemiconductor/IOS-CoreBluetooth-Mock](https://github.com/NordicSemiconductor/IOS-CoreBluetooth-Mock)

它确实需要一些小的代码更改，但它提供的接口几乎与 CoreBluetooth 的接口相同。

它也非常适合编写集成测试。

# iphone - 转到另一个视图控制器时，表格视图单元格的选定状态会发生变化吗？

> ID：10024610
> 
> 赞同：1
> 
> 时间：2012-04-05T07:48:51.637
> 
> 标签：iphone, uitableview, selectedindex

我有一个自定义 UITableView 单元，我选择了一个特定的单元并转到另一个 ViewController，当我回到第一个视图控制器时，单元的选定状态不可见。从另一个视图控制器导航后，我将如何更改单元格的选定状态？

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
   return [timeSet count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   timeSettingCell *newCell = nil;
   newCell = [tableView dequeueReusableCellWithIdentifier:identifier];
   if(newCell == nil)
   {
    NSLog(@"newCell ===================");
    NSArray *nibViews = [[NSBundle mainBundle] loadNibNamed:@"timeSettingCell"   owner:self options:nil];
    newCell  = [ nibViews lastObject];
    }
    newCell.timeLabel.text=[timeSet objectAtIndex:indexPath.row];

    if (newCell.selected==YES) {
      newCell.highlighted=YES;
      newCell.timeImage.image=[UIImage imageNamed:@"radioSelected.png"];
    }
    else {
      newCell.highlighted=NO;
      newCell.timeImage.image=[UIImage imageNamed:@"radioNotSelected.png"];
    }
return newCell;
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
value=[[time1 objectAtIndex:indexPath.row]integerValue];

SettingsViewController *settings=[[SettingsViewController alloc]initWithNibName:nil bundle:nil andCounterValue:value];
[[self presentingViewController] dismissModalViewControllerAnimated:YES];
index=indexPath.row;
[settings release];
}
-(void)viewWillAppear:(BOOL)animated{
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:08:11.873

像这样放，它会工作得很好......

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

[tableView deselectRowAtIndexPath:indexPath animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:13:26.357

我认为您应该使用创建为单例、ivar 或 NSUserDefault 的 NSArray 来记住您的单元格状态（已选择或未选择），然后在`cellForRowAtIndexPath`.

编辑：示例代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
// Do what you want

// This save the index of your selected cell on disk
[[NSUserDefaults standardUserDefaults] setInteger:indexPath.row forKey:@"selectedCell"];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
// Create your cell

// Here you check if the cell should be selected or not
if (indexPath.row == [[NSUserDefaults standardUserDefaults] integerForKey:@"selectedCell"]) {
    newCell.highlighted=YES;
    newCell.timeImage.image=[UIImage imageNamed:@"radioSelected.png"];
} else {
    newCell.highlighted=NO;
    newCell.timeImage.image=[UIImage imageNamed:@"radioNotSelected.png"];
}

return aCell;
} 
```

`NSUserDefaults`对于在您的设备上保存数据并稍后检索它们很有用。这意味着即使在关闭并重新打开您的应用程序后，您也可以检查您的单元格状态。

要使用`NSUserDefaults`，您需要将 Settings.bundle 添加到您的项目中。看看[NSUserDefaults 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)

# django - django - 向 MultiValueField / MultiWidget 的字段添加属性

> ID：10024611
> 
> 赞同：1
> 
> 时间：2012-04-05T07:48:54.247
> 
> 标签：django, django-forms, django-multiwidget

全部，

我设法让 MultiValueField 和 MultiValueWidget 工作。但是，除了“选择”之外，我似乎无法向构成 MultiValueField 的子字段添加属性（如“标签”或“初始”）。

这是我的（简化的）代码：

```
class MyMultiWidget(django.forms.widgets.MultiWidget):
    def __init__(self,*args,**kwargs):
        myChoices = kwargs.pop("choices",[])
        widgets = (
            django.forms.fields.TextInput(),
            django.forms.fields.TextInput(),
            django.forms.fields.Select(choices=myChoices),
        )
        super(MyMultiWidget, self).__init__(widgets,*args,**kwargs)        

class MyMultiValueField(django.forms.fields.MultiValueField):
    widget = MyMultiWidget

    def __init__(self,*args,**kwargs):

        myLabel = "my label"
        myInitial = "my initial value"
        myChoices = [("a","a"),("b","b")]

        fields = (
            django.forms.fields.CharField(label=myLabel),
            django.forms.fields.CharField(initial=myInitial),
            django.forms.fields.ChoiceField(choices=myChoices),
        )
        super(MyMultiValueField,self).__init__(fields,*args,**kwargs)
        self.widget=MyMultiWidget(choices=myChoices)

class MyField(models.Field):

    def formfield(self,*args,**kwargs):
        return MyMultiValueField()

class MyModel(django.models.Model):
    myField = MyField(blank=True)

MyForm = modelform_factory(MyModel) 
```

MyModel 的“myField”字段在 MyForm 中*几乎*可以正确呈现；它显示了三个小部件：两个 TextInput 和一个 Select。后者仅限于适当的选择。但前两者没有设置标签或初始值。

关于我做错了什么有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:54:41.257

您应该定义`format_output`小部件的功能 - 请参阅：[https ://docs.djangoproject.com/en/dev/ref/forms/widgets/](https://docs.djangoproject.com/en/dev/ref/forms/widgets/)

这允许您以任何您喜欢的方式格式化表单 html。我认为默认只是连接字段元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T21:37:44.870

本提供的答案有点老套，我会使用'attrs'传递初始值：

```
forms.TextInput(attrs={'value': 'some text'}) 
```

有趣的是，某些属性似乎被正确传递了——例如在我的例子中，在 CharField 上设置 'max_length' 是有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-16T17:02:12.557

@george 是正确的，`value`可以静态定义，但您也可以覆盖`get_context`以在运行时计算值。

```
class MyInput(forms.CharField):
    def get_context(self, name, value, attrs):
        return super().get_context('some_name', 'some_value', attrs) 
```

将渲染

```
<input type="text" name="some_name" value="some_value" ...> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-06T10:49:46.617

我知道这个线程已经超过 9 年了，但我自己解决了这个问题（Python 3.9，Django 3.2）。

我最终做的是定义一个`CharField`要传递给`MultiValueField`构造函数的对象元组。CharField 对象使用我想要传递给的属性进行实例化`MultiValueField` （`widget`包括`placeholder`&`value`属性，以及`help_text`每个属性）。

`placeholder`是每个字段的一个非常有效的标签，`value`可以用作默认值。

`value`请注意，如果您在 a 上使用基于类的通用视图，则不能硬编码到字段中，`ModelForm`因为它会导致在打开`UpdateView`. 考虑到这一点，您必须为模型中的字段设置一个默认值（我使用了 a `JSONField`），然后在初始化后从表单实例中获取相关数据并将其传递给 multi_fields 元组中的字段构造函数。

编辑：不要忘记在表单的`Meta`类中包含模型字段。我发现如果你错过了这个，你的表单将不会保存新值。

然后，我将该元组作为`fields`参数传递给构造函数，并在元组上使用列表推导来动态定义`widget`（使用列表推导构建的自定义 MultiWidget）和`help_text`属性。

```
# MODELS.PY
from django import models

def default_multi_values():
    return {
        'Field1': 'Field1Value',
        'Field2': 'Field2Value'
    }

class ExampleModel(models.Model):
    example_field = models.JSONField(
        default=default_multi_values()
    ) 
```

```
# FORMS.PY
from django import forms

class CustomMultiWidget(forms.widgets.MultiWidget):

    def decompress(self, value):
        **do decompress**

class CustomMultiValueField(forms.MultiValueField):
    widget = CustomMultiWidget

    def compress(self, data_list):
        **do compress**

class CustomModelForm(forms.ModelForm):

    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)

        mf_values = self.instance.multi_value_field_here

        multi_fields = (
            forms.CharField(
                help_text='HelpText1',
                widget=forms.TextInput({
                    'placeholder': 'Placeholder1',
                    'value': mf_values['Field1']
                })
            ),
            forms.CharField(
                help_text='HelpText2',
                widget=forms.TextInput({
                    'placeholder': 'Placeholder2',
                    'value': mf_values['Field2']
                })
            ),
        )

        self.fields['multi_value_field_here'] = CustomMultiValueField(
            fields=multi_fields,
            widget=ColumnHeadersWidget(
                widgets=[field.widget for field in multi_fields],
            # Display an ordered list below the MultiWidget 
            # constructed from help_text messages from each consecutive field.
            help_text=
                f"<u><strong>MultiField Guide</strong></u></br>"
                f"{'</br>'.join(f'{multi_fields.index(field) + 1}: {field.help_text}' for field in multi_fields]}"
            )
        )

        class Meta:
            model = ExampleModel
            fields = [
                'example_field'
            ] 
```

# grails - 是否可以使用watchedResources 观察Config.groovy 的变化？

> ID：10024615
> 
> 赞同：0
> 
> 时间：2012-04-05T07:49:12.213
> 
> 标签：grails, grails-2.0

我正在 grails 2.0.1 中开发一个插件，我想在其中监视正在使用它的应用程序的配置更改。

我试图将其添加到我的插件定义文件中：

```
def watchedResources = ["file:./grails-app/conf/Config.groovy"]

def onChange = { event ->
    println " config has changed"       
} 
```

现在，每次我更改应用程序的 Config.groovy 中的任何内容时，我都希望在控制台中看到 println 语句输出，但我没有。

谁能让我知道我做错了什么（或者如果这可能的话）？

谢谢 ！

菲利普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:48:41.137

您无需为此设置手表，已经有一个手表处于活动状态。使用`onConfigChange`事件回调：

```
def onConfigChange = { event ->
  // TODO Implement code that is executed when the project configuration changes.
  // The event is the same as for 'onChange'.
} 
```

# ruby-on-rails - 我怎样才能触发：依赖=>销毁

> ID：10024616
> 
> 赞同：0
> 
> 时间：2012-04-05T07:49:12.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3, dependent-destroy

我有两个模型，用户和图像。

```
class User < ActiveRecord::Base
  has_many :images,:order => "created_at DESC", :dependent => :destroy, :conditions => "archive = 0"

  def destroy
    self.archive = 1
    self.deleted_at = Time.now
    self.save
  end 
end 

class Image < ActiveRecord::Base
 belongs_to :user , :counter_cache => true

 def destroy
  self.archive = 1
  self.deleted_at = Time.now
  self.save
 end   
end 
```

现在，如果您看到上面的代码，我将覆盖模型中的销毁调用。不是当用户删除他的帐户时，我想触发依赖 => 销毁回调，以便我触发 Image 的销毁。

PS：我不想使用 act_as_paranoid 或其他一些插件。我需要触发dependent=> destroy 因为我有一个非常复杂的映射，例如：

用户 has_many 图像、has_many 评论、has_many likes、has_many 活动以及更多 9 种类型的映射以及深度映射等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:53:50.870

你只需要模拟依赖破坏。

在你的destroy方法中调用你的Image的所有destroy方法

```
class User < ActiveRecord::Base
  has_many :images,:order => "created_at DESC", :dependent => :destroy, :conditions => "archive = 0"

  def destroy
    self.archive = 1
    self.deleted_at = Time.now
    self.save
    self.images.each(&:destroy)
  end 
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:29:18.433

也许为了让事情更容易一些，您可以将归档模型和可归档模型的行为封装在模块中：

```
module Archivable
  def archive!
    self.archive = 1
    self.deleted_at = Time.now
    self.save
  end
end

module Archiver
  def destroy
    self.archive = 1
    self.deleted_at = Time.now
    archive_models!
    self.save
    freeze
  end

  def archive_models!
    archivable_models.each do |model|
      model_name = model.name.pluralize.downcase.to_s
      self.send(model_name).each { |m| m.archive! }
    end
  end

  def archivable_models
    ActiveRecord::Base.send(:subclasses).select { |m| m.method_defined?(:archive!) }
  end
end

class Image < ActiveRecord::Base
  include Archivable
  belongs_to :user, :counter_cache => true
end

class User < ActiveRecord::Base
  include Archiver 
  has_many :images,:order => "created_at DESC", :conditions => "archive = 0", :dependent => :destroy
  attr_accessible :name
end 
```

这是一个**非常**hack-ish 的实现，但它确实有效。如果您按照帖子中的描述添加 Comment 模型，您只需将 has_many 语句添加到 User 并在 Comment 模型中包含 Archivable ：

```
class User < ActiveRecord::Base
  include Archiver 
  has_many :images,:order => "created_at DESC", :conditions => "archive = 0", :dependent => :destroy
  has_many :comments,:order => "created_at DESC", :conditions => "archive = 0", :dependent => :destroy
  attr_accessible :name
end

class Comment < ActiveRecord::Base
  include Archivable
  belongs_to :user, :counter_cache => true
end 
```

# c# - 实体框架最佳实践与 asp.net webforms 应用程序

> ID：10024620
> 
> 赞同：2
> 
> 时间：2012-04-05T07:49:19.980
> 
> 标签：c#, asp.net, linq, entity-framework, 3-tier

我在 .net 框架 4.0 上构建 asp.net 应用程序，我将使用 Linq 到实体（实体框架）作为我的数据模型（DAL），我的设计模式将是实体框架将是 DAL 的 3 层层层。

我的问题是我是否应该为我的表设置一个 BLL 层，以便我从我调用我的选择、插入、更新和删除函数的表示层（我的页面）处理它，或者最好直接调用实体框架我的表示层？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:09:46.797

这取决于应用程序；没有定义层是因为它们很好，定义了层是因为需要它们。

如果您的应用程序很大并且业务规则经常更改，那么请构建一个 BLL 层。否则，恕我直言，这只是过度设计。在决定时，您的应用程序的规模和变化率应该是您的主要关注点。

请注意，如果您直接调用 EF，您的业务规则将在您的表示层内。如果它们可能会发生变化，那么重构表示层将是一团糟，并且可重用性也会降低。

但这又取决于您的应用程序的规模、您的项目进度、业务规则的变化率和其他因素。

# asp.net - 为什么要使用 FindControl...？

> ID：10024623
> 
> 赞同：2
> 
> 时间：2012-04-05T07:49:27.823
> 
> 标签：asp.net

我遇到了一个问题，即我将文本框动态添加到placedHolder。

**占位符声明：**

```
<asp:PlaceHolder ID="phTextBoxes" runat="server" >
  </asp:PlaceHolder> 
```

**文本框的分配**

```
 ...if (phTextBoxes!= null) phTextBoxes.Controls.Add(txt); 
```

但是当我构建应用程序时，我得到了错误

**当前上下文中不存在名称“phTextBoxes”** 我已通过使用**FindControl()**解决了该问题，如下所示。

```
PlaceHolder phtxt = (PlaceHolder)form1.FindControl("phTextBoxes"); 
```

然后将控件添加到 phtxt。错误消失了。但我想知道为什么旧的 placeHolder 会出错以及 FindControl 是如何找到它的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:32:21.860

As @GrahamClark mentioned before, you could be missing something. There's no way not to see phTextBoxes in code behind unless it is inside another control, such as GridView, etc.. Make sure your place holder is not inside any other control.

Another thing, on the top of your Designer window (aspx or ascx file), make sure you have referenced the related class name in **CodeBehind**/**CodeFile**, and **Inherits** if necessary.

Example1: I have a usercontrol called **UC1**, in the ascx file I should declare the class name as follows:

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="Cart.ascx.cs"
 Inherits="UserControls_UC1" %> 
```

Example2: I have a ASPX page called **Default**, in the aspx file I should declare the class name as follows:

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs"
 Inherits="_Default" %> 
```

# javascript - Javascript倒计时设置超时

> ID：10024625
> 
> 赞同：2
> 
> 时间：2012-04-05T07:49:34.850
> 
> 标签：javascript, refactoring, settimeout

我试图制作一个简单的 javascript 倒数计时器，每隔一秒将按钮中的值从 3 更改为 1。我得到了代码，但它使用了许多功能。我想知道我是否可以减少使用它。我试图将倒计时放在显示 i 值的 for 循环中，但它似乎无法正常工作。

这是我的代码：

```
 function launch( )
{
  document.getElementById("blast").value = "Preparing to launch...";
  setTimeout ( "countdown3()", 1000 );
}
function countdown3()
{
    document.getElementById("blast").value = "3";
    setTimeout("countdown2()", 1000);
}
function countdown2()
{
    document.getElementById("blast").value = "2";
    setTimeout("countdown1()", 1000);
}

function countdown1()
{
document.getElementById("blast").value = "1";
setTimeout("GO()", 1000 );
}
function GO()
{
    document.getElementById("blast").value = "BLAST OFF";
    move();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T07:57:06.017

这个怎么样 ：

```
function launch(seconds, id, message, callback)
{
    var target = document.getElementById(id);
    target.innerHTML = message;

    var countDownId = setInterval( function(){
       target.innerHTML = seconds;
       if(seconds == 0){
          clearInterval(countDownId);
          callback(target);          
       }
       seconds--;
    }, 1000 );

}

function GO(target)
{
    target.innerHTML = "BLAST OFF";
    move();
}

launch(3, "blast", "Preparing to launch...", GO); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:05:37.527

这有效（在 chrome 上测试）

```
function launch( )
{
  document.getElementById("blast").value = "Preparing to launch...";
  setTimeout ( "countdown(3)", 1000 );
}

function countdown(index)
{
    if(index==0) {
         GO();
         return
    }

    document.getElementById("blast").value = index;
    setTimeout("countdown("+(--index)+")", 1000);
}

function GO()
{
    document.getElementById("blast").value = "BLAST OFF";
    move();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T07:56:19.597

这是一种适用于任何消息的通用方式，而不仅仅是倒计时。显然，如果您有更长的倒计时时间，这不是一件好事 - 但是根据您当前的消息与计数器比率，我会说这是一个很好的解决方案：

```
function launch() {
    var elem = document.getElementById('blast');
    var step = 0;
    var messages = ['Preparing to launch', '3', '2', '1', 'LIFTOFF'];
    window.setTimeout(function() {
        elem.value = messages[step++];
        if(step < messages.length) {
            window.setTimeout(arguments.callee, 1000);
        }
    }, 1);
}

launch(); 
```

演示：http: [//jsfiddle.net/ThiefMaster/qmBXs/](http://jsfiddle.net/ThiefMaster/qmBXs/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T07:57:59.357

尝试使用递归，例如：

```
var blast = document.getElementById("blast");
countdown();

function countdown() {
 var nwvalue = Number(blast.value)-1; 
 blast.value = nwvalue;
 if (nwvalue>0) {
  setTimeout(countdown, 1000 ); //- value>0: call countdown in a timeout again
 } else {
  blast.value = 'all done';     //- here you would call GO()
 }
} 
```

看到[这个jsfiddle](http://jsfiddle.net/KooiInc/pa7bV/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-05T07:55:10.550

这个怎么样：

```
function launch( )
{
    var countdown = function (index) {
        if(index > 0) {
          document.getElementById("blast").value = index;
          setTimeout (function() { countdown(index - 1) }, 1000 );
        }
        else {
          document.getElementById("blast").value = "BLAST OFF";
          move();
        }  
    };

    document.getElementById("blast").value = "Preparing to launch...";
    setTimeout (function() { countdown(3) }, 1000 );
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-05T07:55:29.460

像这样的东西？

```
var i = 4;
document.getElementById("blast").value = 'Preparing to launch...';
function doIt(){
  var timerId = setInterval(function(){
    i--;
    if( i > 0 )
       document.getElementById("blast").value = i;
    else {
       document.getElementById("blast").value = 'BLAST OFF'; 
       clearInterval(timerId);
    }
  },1000);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-05T08:02:13.977

我在 Chrome 调试器工具中测试了这个解决方案。将 document.getElementById 属性替换为 console.info 并在调试器中运行它以查看控制台上的输出。

```
function countdown(start, duration) {

    if(start == duration) {
        setTimeout(function() {
            document.getElementById("blast").value = "BLAST OFF";
            // console.info("BLAST OFF");
        },duration * 1000);
        return;
    } else {

        setTimeout(function() {

            document.getElementById("blast").value = start;
            // console.info(start);

        }, (duration-start) * 1000);
        countdown(start+1, duration);
    }    

}

countdown(0,3);  // 3 seconds 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-05T07:55:22.010

```
var i =3;
function launch( )
{
  document.getElementById("blast").value = "Preparing to launch...";
  setTimeout ( function() { countDown() }, 1000 );
}
function countDown()
{
if(i<0)
   i="blast off";
document.getElementById("blast").value = i;
i--;
setTimeout("countDown()",1000);

} 
```

尝试这个

# sql-server - Sql中的日期时间错误

> ID：10024628
> 
> 赞同：0
> 
> 时间：2012-04-05T07:49:44.937
> 
> 标签：sql-server, casting

我已在我的数据库中以**yyyy/mm/dd**格式存储`StartDate`为数据类型。当我尝试将其转换为 a时，我得到了`nvarchar`**`datetime``Arithematic Flow Error.`**

 **这是什么错误？我已经尝试了两种方法`cast`，`convert`但仍然抛出错误。

这是我的代码：

```
cast(Start_Date as datetime) &&
convert(datetime,Start_Date,103 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:00:43.190

看看[CAST 和 CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。

`103`所以`dd/mm/yyyy`这会失败

```
declare @S varchar(10)
set @S = '2012/03/31'
select convert(datetime, @S, 103) 
```

试试这个

```
select convert(datetime, replace(@S, '/', ''), 112) 
```

如果您将[DATEFORMAT 设置](http://msdn.microsoft.com/en-us/library/ms189491.aspx?ppud=4)为 ，您的演员将失败`dmy`。

```
set dateformat dmy

declare @S varchar(10)
set @S = '2012/03/31'
select cast(@S as datetime) 
```

但是，如果您改用它，效果会很好`ymd`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:17:32.413

```
declare @TestDateValue nvarchar(50)
set @TestDateValue = '2012/12/03'
select cast(@TestDateValue as datetime) as NewTestDateTime 
```

您的代码应该可以工作。我刚刚在这里举了一个例子。您可以发布您要转换的字符串吗？可能与它有关。**

# asp.net - 使用 Web.Config 从域上的一个页面重定向到另一个页面

> ID：10024629
> 
> 赞同：2
> 
> 时间：2012-04-05T07:49:56.493
> 
> 标签：asp.net, iis, url-rewriting, web-config, http-status-code-301

我有一个内容管理的 ASP.NET 站点，它以不同的语言（例如 mysite.com、mysite.fr、mysite.eu 等）运行相同版本的站点。我被要求创建从我们法国网站上的一个页面到我们欧洲网站上的页面的重定向，所以我在 IIS 中启动了 URL Rewrite 并尝试编写规则和映射来执行此操作。失败后，我尝试将其写入 Web.config 文件，但再次无济于事。

为了清楚起见，我需要：

*   `http://www.mysite.fr/publication/jobs.aspx`重定向到 `http://www.mysite.eu/jobs.aspx`
*   `http://www.mysite.fr/sign-in.aspx` 重定向到`http://www.mysite.eu/sign-in.aspx`.

有谁知道我该怎么做，或者这是否可以在具有多个域的 ASP.NET 站点上完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:57:56.173

您可以使用 URL 重写来执行此操作。

这是我使用的一个例子。

```
<rule name="Redirect .co.uk" stopProcessing="true">
  <match url="(.*)" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
     <add input="{HTTP_HOST}" pattern="^uk\.test\.com$" />
    </conditions>
  <action type="Redirect" url="http://www.test.co.uk/{R:1}" />
</rule> 
```

这将检查`{HTTP_HOST}`请求的，如果它匹配 uk.test.com，重定向到新的 url 但保留*页面/文件夹路径 ({R:1})。*

添加*/publication/*会使事情变得有点棘手，但它可以写入原始匹配项（*类似。`(.*)\/publication\/(/*)`或其他东西，我的正则表达式并不完美 :-)*）。

高温高压

# java - 将字符串转换为特定格式的日期，无需时间

> ID：10024632
> 
> 赞同：1
> 
> 时间：2012-04-05T07:50:31.283
> 
> 标签：java, android

我怀疑当我将字符串转换为日期时，它将返回为：

**2017 年 4 月 30 日星期日 00:00:00 GMT+05:30**

但我希望格式为：

**2017-04-30**

```
Date last_date_date = new SimpleDateFormat("yyyy-MM-dd").parse("2017-04-30"); 
```

那么我需要申请哪种方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:59:10.260

```
DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");

//current date into your required format
String str = dateFormat.format(new Date()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:00:07.667

```
DateFormat df = SimpleDateFormat("yyyy-MM-dd");
Date lastDateDate = df.parse("2017-04-30");

String date = df.format(lastDateDate); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T08:02:55.873

您的代码运行良好，这是一个证明：

```
Date last_date_date = new SimpleDateFormat("yyyy-MM-dd").parse("2017-04-30");
System.out.println(new SimpleDateFormat("yyyy-MM-dd").format(last_date_date)); 
```

**输出：**

```
2017-04-30 
```

# c# - Silverlight中的GetManifestStream加载xml文件

> ID：10024633
> 
> 赞同：1
> 
> 时间：2012-04-05T07:50:46.370
> 
> 标签：c#, silverlight

我有一个 Silverlight 应用程序，我在其中执行以下操作来加载 XML 文件，并进一步解析它。

我已将构建操作设置为嵌入式资源，复制到输出目录。
我正在使用的代码是：

```
try
            {
                Xmlfile = XDocument.Load(Assembly.GetExecutingAssembly().GetManifestResourceStream("file.xml"));
            }
            catch(Exception ex)
            {
                MessageBox.Show(ex.Message);
            } 
```

我收到的异常消息：
*值不能为空。
参数名称：输入*

**编辑**

我尝试了以下方法（在 WPF 中），但在 Silverlight 中出现问题：

```
Assembly.GetExecutingAssembly().GetManifestResourceStream(Assembly.GetExecutingAssembly().GetName().Name + ".file.xml") 
```

**错误：**

```
'System.Reflection.Assembly.GetName()' is inaccessible due to its protection level 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:11:25.993

您将需要在程序集及其子文件夹的名称前面添加，如下所示：

```
string assemblyName = System.Reflection.Assembly.GetExecutingAssembly().GetName().Name;
XDocument.Load(assemblyName + ".subfolder.file.xml"); 
```

有时不清楚子文件夹应该是什么。如果是这种情况，只需使用以下命令直接检查名称：

```
string[] names = System.Reflection.Assembly.GetExecutingAssembly().GetManifestResourceNames(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:00:00.253

我还没有答案，但前置“解决方案”不适用于 Silverlight 5 应用程序。

如果您使用 Silverlight 5.0 项目编译提供的代码，您将得到“System.Reflection.Assembly.GetName()”由于其在编译时的保护级别而无法访问。

作为记录，我收到类似的错误：

```
System.Reflection.Assembly.GetName();
System.Reflection.Assembly.GetEntryAssembly()
<someAssembly>.GetReferencedAssemblies() 
```

对于其他 GetName() 重载，您会收到相同的保护错误。

```
<someAssembly>.GetType(fullyQualifiedTypeName, false, true); 
```

'System.Reflection.Assembly.GetType(string, bool, bool)' 由于其保护级别而无法访问

我怀疑保护级别错误源于 Silverlight 应用程序只是部分受信任的代码，而反射本质上需要高度信任。但是，最后我只是猜测微软代码墙的背后是什么。

MSDN 上或某处是否有文章描述了在合并到 Silverlight 5 Web 应用程序时禁用/保护的 C# 反射相对于程序集的哪些部分？

# sql - sql - 从字符串转换日期时转换失败

> ID：10024634
> 
> 赞同：0
> 
> 时间：2012-04-05T07:50:48.710
> 
> 标签：sql, sql-server, tsql

嗨，

我有问题，我想不通...

```
 declare @start_date datetime, @date_1m datetime, @date_1m_end datetime

    set @start_date = GETDATE()
    set @date_1m = DATEADD(MONTH,-1,DATEADD(MONTH, DATEDIFF(MONTH, 0, @start_date),0))
    set @date_1m_end = DATEADD(SS, -1, DATEADD(MONTH, 1, @date_1m))

    set @sql_exec = 'insert into #temp select ... where a.date between ' + @date_1m + ' and ' + @date_1m_end + ''
exec(@sql_exec) 
```

它给了我以下错误：

`Conversion failed when converting date and/or time from character string.`

为什么以及如何解决这个问题，因为它变得令人沮丧..

PS：我需要运行`exec()`，因为这个存储过程每个月都会运行，它会为那个月创建数据库

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:01:32.037

TSql 正在尝试将所有文​​本转换为日期时间。您需要在连接之前将日期转换为字符串，然后将它们转换回查询中的日期。

```
set @sql_exec = 'insert into #temp select ... where a.date between ' 
    + 'convert(datetime, ''' 
    + convert(varchar(10), @date_1m, 104) 
    + ''', 104)'
    + ' and '
    + 'convert(datetime, ''' 
    + convert (varchar(10), @date_1m_end, 104) 
    + ''', 104)' 
```

# python - 在@date 命令之后自动插入文件修改时间

> ID：10024640
> 
> 赞同：0
> 
> 时间：2012-04-05T07:51:14.133
> 
> 标签：python, doxygen

我正在用 doxygen 记录 python 代码，我想使用@date 命令来显示文件修改日期/时间。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:39:39.603

您可以使用将文件修改日期添加到 @date 命令的输入过滤器。以下 perl 文件可以解决问题：

```
use File::stat;
$fn = $ARGV[0];
$time = localtime stat($fn)->mtime;
open F,"<$fn";
while (<F>)
{
  s/\@date/\@date $time/;
  print $_;
}
close F; 
```

如果您将其保存为`filemod.pl`您可以通过在配置文件中设置以下内容使 doxygen 为每个输入文件使用过滤器：

```
INPUT_FILTER = "perl filemod.pl" 
```

# iphone - 找出当前动画块的动画时长

> ID：10024642
> 
> 赞同：14
> 
> 时间：2012-04-05T07:51:30.317
> 
> 标签：iphone, animation, uiview, uiviewanimation

在 UIView 动画块中，有没有办法获取当前动画的持续时间？

```
[UIView animateWithDuration:1.0 animations:^{
    // float duration = ?
}]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-10-22T11:33:11.230

如果您的目标是`iOS 9.0`或更高版本，那么您正在寻找一个`UIView`名为的类属性`inheritedAnimationDuration`。

用法：

```
let currentAnimationDuration = UIView.inheritedAnimationDuration 
```

来自**苹果文档**：

> **概括**
> 
> 返回当前动画的继承持续时间。
> 
> **讨论**
> 
> `UIView`如果在动画块中调用此方法，则仅返回非零值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-30T22:33:16.407

TL；DR：使用 CALayer -actionForKey:，而不是 -animationForKey:

@Dimitri Bouniol 从动画块内受影响的设置器调用时，我的答案对我不起作用。据我了解，原因是 UIView 的动画系统在开始实际动画之前设置状态（并在开始实际动画之前调用设置器）。对我有用的是在图层上调用类似的 -actionForKey: 方法。返回的操作确实设置了适当的持续时间，并且可以在他的答案中使用。

```
CAAnimation *animation = (CAAnimation *)[self.layer actionForKey@"position"]; // or property of interest

[CATransaction begin];
[CATransaction setAnimationDuration:animation.duration];
[CATransaction setAnimationTimingFunction:animation.timingFunction];

// CALayer animation here

[CATransaction commit]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T14:34:03.863

`[CATransaction animationDuration]` is what you're looking for

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T19:28:54.367

既然您使用的是块，为什么不直接用它来捕获一个变量呢？

```
CGFloat duration = 1.0;
[UIView animateWithDuration:duration animations:^{ 
    CGFloat theDuration = duration; 
}]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-10T05:10:53.457

您可以很容易地获得当前动画。例如，设置一个`CATransaction`：

```
CAAnimation *animation = [self.layer animationForKey:self.layer.animationKeys.firstObject];
[CATransaction begin];
[CATransaction setAnimationDuration:animation.duration];
[CATransaction setAnimationTimingFunction:animation.timingFunction];

// CALayer animation here

[CATransaction commit]; 
```

# iphone - 更新应用程序时是否更新数据库

> ID：10024643
> 
> 赞同：1
> 
> 时间：2012-04-05T07:51:34.497
> 
> 标签：iphone, objective-c, ios, sqlite

我的设备中有一个包含数据库的应用程序，如果我从 App Store 更新该应用程序，则应用程序的数据库将被更新，或者它使用与以前的应用程序相同的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:04:33.243

如果您将数据存储在`NSDocumentDirectory`或`NSLibraryDirectory`中，则您的数据在更新应用程序后仍然存在，直到应用程序被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:59:45.640

应用程序的数据库只有在你修改了应用程序中的 .sqlite 文件并且你用相同的名称替换之前的文件时才会更新。希望能帮助到你！

# python - 如何获取具有唯一属性的对象列表

> ID：10024646
> 
> 赞同：29
> 
> 时间：2012-04-05T07:51:40.643
> 
> 标签：python, list, set

## 背景

我有一个`list`. 这`list`有很多对象。每个对象都有一个`id`. 现在对象是不同的类型。

```
objects = [Aobject, Bobject, Cobject] 
```

在哪里

```
>>> Aobject != Bobject
True
>>> Aobject.id ==  Bobject.id
True 
```

## 问题

我想要一个`list`基于`object.id`.

像这样的东西：

```
set(objects, key=operator.attrgetter('id')) 
```

（这不起作用。但我想要这样的东西）

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-05T07:59:09.303

```
seen = set() 

# never use list as a variable name
[seen.add(obj.id) or obj for obj in mylist if obj.id not in seen] 
```

这是有效的，因为`set.add`返回`None`，所以列表推导中的表达式总是产生`obj`，但`obj.id`前提是尚未添加到`seen`.

（表达式只能计算为`None`if `obj is None`；在这种情况下，`obj.id`会引发异常。如果`mylist`包含`None`值，请将测试更改为`if obj and (obj.id not in seen)`）

请注意，这将为您提供列表中具有给定 ID 的第一个对象。@Abhijit 的回答会给你最后一个这样的对象。

更新：

或者，ordereddict 可能是一个不错的选择：

```
import collections
seen = collections.OrderedDict()

for obj in mylist:
    # eliminate this check if you want the last item
    if obj.id not in seen:
       seen[obj.id] = obj

list(seen.values()) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-03-08T08:49:43.853

如何使用`dict`（因为它的键是唯一的）？

假设我们有

```
class Object:
    def __init__(self, id):
        self.id = id

Aobject = Object(1)
Bobject = Object(1)
Cobject = Object(2)
objects = [Aobject, Bobject, Cobject] 
```

然后可以使用**Python 3**中的理解生成`list`具有`Object`唯一字段的 s`id``dict`

 **```
unique_objects = list({object_.id: object_ for object_ in objects}.values()) 
```

在**Python 2.7中**

```
unique_objects = {object_.id: object_ for object_ in objects}.values() 
```

在**Python <2.7中**

```
unique_objects = dict([(object_.id, object_) for object_ in objects]).values() 
```

最后，我们可以编写函数（**Python 3**版本）

```
def unique(elements, key):
    return list({key(element): element for element in elements}.values()) 
```

where`elements`可能是 any`iterable`并且`key`是一些从（在我们的特定情况下等于）`callable`返回`hashable`对象的地方。`elements``key`[`operator.attrgetter('id')`](https://docs.python.org/3/library/operator.html#operator.attrgetter)

[Marcin 的答案](https://stackoverflow.com/a/10024750/5997596)工作正常，但对我来说看起来不像 Pythonic，因为列表理解会`seen`从外部范围改变对象，使用`set.add`方法并将其结果（即`None`）与`obj`.

最后但同样重要的部分：

# 基准

```
setup = '''
import random

class Object:
    def __init__(self, id):
        self.id = id

objects = [Object(random.randint(-100, 100))
           for i in range(1000)]
'''
solution = '''
seen = set()
result = [seen.add(object_.id) or object_
          for object_ in objects
          if object_.id not in seen]
'''
print('list comprehension + set: ',
      min(timeit.Timer(solution, setup).repeat(7, 1000)))
solution = '''
result = list({object_.id: object_
               for object_ in objects}.values())
'''
print('dict comprehension: ',
      min(timeit.Timer(solution, setup).repeat(7, 1000))) 
```

在我的机器上给

```
list comprehension + set:  0.20700953400228173
dict comprehension:  0.1477799109998159 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T08:24:45.667

鉴于您的对象列表`somelist`类似于

```
[(Object [A] [1]), (Object [B] [1]), (Object [C] [2]), (Object [D] [2]), (Object [E] [3])] 
```

你可以做这样的事情

```
>>> {e.id:e for e in somelist}.values()
[(Object [B] [1]), (Object [D] [2]), (Object [E] [3])] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T08:14:22.850

如果您可以更改对象的类，则可以添加用于集合比较的适当方法：

```
# Assumption: this is the 'original' object
class OriginalExampleObject(object):
    def __init__(self, name, nid):
        self.name = name
        self.id = nid
    def __repr__(self):
        return "(OriginalExampleObject [%s] [%s])" % (self.name, self.id)

class SetExampleObj(OriginalExampleObject):
    def __init__(self, name, nid):
        super(SetExampleObj, self).__init__(name, nid)
    def __eq__(self, other):
        return self.id == other.id
    def __hash__(self):
        return self.id.__hash__()

AObject = SetExampleObj("A", 1)
BObject = SetExampleObj("B", 1)
CObject = SetExampleObj("C", 2)

s = set()
s.add(AObject)
s.add(CObject)
print(s)

s.add(BObject)
print(s) 
```

输出：

```
set([(OriginalExampleObject [A] [1]), (OriginalExampleObject [C] [2])])
set([(OriginalExampleObject [A] [1]), (OriginalExampleObject [C] [2])]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-27T14:46:23.923

您可以使用[文档](https://docs.python.org/3/library/itertools.html#itertools-recipes)`unique_everseen`中提供的配方。这在 3rd 方库中也可用，例如. 请注意，此方法将保留给定属性的对象的*第一个*实例。`itertools` [`toolz.unique`](https://toolz.readthedocs.io/en/latest/api.html#toolz.itertoolz.unique)

 *```
from toolz import unique
from operator import attrgetter

res = list(unique(objects, key=attrgetter('id'))) 
```

如果惰性迭代器就足够了，则可以省略`list`转换。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-05T08:11:04.380

一个相当简单的方法是

```
for obj in mylist:
    if obj.id not in s:
        s.add(obj.id) 
```

这应该添加任何未见过的 id。花费的时间与源列表的大小成线性关系。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-09-19T06:06:35.267

```
objects = [Aobject, Bobject, Cobject]
unique_objects = {o['id']:o for o in objects}.values() 
```***

# jsf - UI 组件中的 UI Mode 和 switchType 属性

> ID：10024650
> 
> 赞同：0
> 
> 时间：2012-04-05T07:51:43.117
> 
> 标签：jsf, jsf-2, richfaces

刚刚学习 Richfaces UI 组件。我在一些 UI 组件中看到一个属性**模式**，它使用三个值“ajax”、“服务器”、“客户端”之一。我检查了文档。但我没有找到任何适当的解释。

还有一个是 switchType 属性。我也不明白对此的解释。

谁能给我解释一下这两个。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:24:55.807

这些属性`mode`用于指定标签组件在对其执行操作时应如何操作：

*   服务器（默认值）。通过向服务器发出请求来呈现控件。动作在服务器端执行，不包含 ajax 来执行动作，类似于单击`<h:commandButton />`.
*   阿贾克斯。与`server`value 类似，但一切都是通过 ajax 调用完成的，类似于单击`<a4j:commandButton />`.
*   客户：这种模式没有动作。控件都在客户端呈现。

# svn - SVN 结帐问题 - SASL 身份验证错误

> ID：10024653
> 
> 赞同：2
> 
> 时间：2012-04-05T07:51:56.933
> 
> 标签：svn, sasl

我想知道在签出 SVN 存储库时是否有人在 Windows 7 上遇到相同的问题并出现以下错误消息（它在我的 Macbook 上通过相同的 Wifi 连接完美运行）。

我已关闭所有防火墙和防病毒软件，但没有运气

```
Command: Checkout from svn://XX.XX.XX.XX/online/, revision HEAD, Fully      recursive, Externals excluded  
Error: Unable to connect to a repository at URL 'svn://89.234.30.79/online/property'  
Error: SASL authentication error: SASL(-1): generic failure: Unable to find a  
Error:  callback: 2  
Completed!: 
```

非常感谢，洪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-03T07:34:59.910

我为我的一些用户苦苦挣扎……在我的情况下，这表明密码错误。只是这样可能会警告其他寻找此错误的人。

# c - 我们可以用C编写iphone程序吗？

> ID：10024654
> 
> 赞同：0
> 
> 时间：2012-04-05T07:51:57.047
> 
> 标签：c, ios, xcode

我了解到Xcode可以编译c代码，这意味着我们可以用c编写整个程序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T07:54:01.240

是的。Objective C 是 C 的严格超集。这意味着任何 C 代码在 Objective C 中也是有效的。但是大多数框架 API 都在 Objective C 中，如果你需要调用这些，你也必须包含 Objective C 代码。然而，标准的 C 库是受支持的，甚至对于 2D 图形，C 中也有 Cocoa 类。

# ruby-on-rails - 使用 Grape、Rails 3 和 Heroku 的 XML 代替 JSON

> ID：10024655
> 
> 赞同：1
> 
> 时间：2012-04-05T07:52:25.280
> 
> 标签：ruby-on-rails, xml, json, heroku, grape-api

我在 Rails 3 中使用 Grape (https://github.com/intridea/grape)，我遇到了一个奇怪的问题。

我在我的 API 类中将 json 定义为默认输出格式，并且我使用 as_json 方法来输出我的结果。

在我的 /lib/MyAPI.rb 中：

```
class MyAPI < Grape::API
  prefix 'api'
  version 'v1', :using => :path, :format => :json, :default_format => :json

  resource "users" do
    get do
      error!("401 invalid token", 401) unless current_user
  users = User.where('id != ?' , current_user.id) - current_user.friends
       users.as_json()
    end
  end 
end 
```

在开发模式下，json 被正确渲染，但是在 heroku 上，xml 被渲染而不是 json。

有人知道为什么吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:12:17.917

在根据 README 和代码。在 Grape 0.2.0 版本中，`default_format`没有版本类方法的选项。您需要由您的班级修复它：

```
class MyAPI < Grape::API
  prefix 'api'
  version 'v1', :using => :path
  format :json
  default_format :json

  resource "users" do
    get do
      error!("401 invalid token", 401) unless current_user
  users = User.where('id != ?' , current_user.id) - current_user.friends
       users.as_json()
    end
  end 
end 
```

# iphone - 从iphone sdk中的当前位置获取最小位置后如何重新排列tableview？

> ID：10024657
> 
> 赞同：0
> 
> 时间：2012-04-05T07:52:35.977
> 
> 标签：iphone, cllocationdistance

我创建了一个显示来自用户当前位置的数据的应用程序。我想根据用户找到的最小距离对它们进行排序。我知道我需要使用这种功能：

`[userLocationd istanceFromLocation:cameraLocation];`

但是，在那之后我该怎么办？我应该根据距离对每个人进行排序并将它们放入一个数组中，但是我如何根据用户的最小位置重新排列每个单元格？(cellForRowAtIndexPath)

还; 我还没有真正弄清楚如何找到用户的位置。我同意这一点，但如果有人指出我正确的方向会很有帮助。

如何对数组进行排序以最小距离到最大位置？

我用过这段代码。

```
 CLLocation *location1 = [[[CLLocation alloc] initWithLatitude:someLatitude longitude:someLongitude] autorelease];

    CLLocation *location2 = [[CLLocation alloc] initWithLatitude:coordinate.latitude longitude:coordinate.longitude];

    float target = [location2 distanceFromLocation:location1];
    target = target / 1000; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:09:56.997

我发现使用此代码的解决方案将完美运行

```
 uint smallest[5];

    NSMutableArray *array = [[NSMutableArray alloc] initWithObjects:[NSNumber numberWithDouble:0.5], [NSNumber numberWithDouble:0.25], [NSNumber numberWithDouble:1], [NSNumber numberWithDouble:0.75], [NSNumber numberWithDouble:0.15], [NSNumber numberWithDouble:0.85], [NSNumber numberWithDouble:0.95], [NSNumber numberWithDouble:0.32], [NSNumber numberWithDouble:0.21], [NSNumber numberWithDouble:0.05], nil];

    // declare flags
    uint flags[array.count];

    // initialize flags
    for(uint i = 0; i < [array count]; i++)
        flags[i] = 0;

    for(int i = 0; i < 5; i++)
    {
        smallest[i] = -1;
        for(int j = 0; j < [array count]; j++)
        {
            // check flag
            if(!flags[j])
            {
                if(smallest[i] == -1 ||
                   [[array objectAtIndex:smallest[i]] doubleValue] > [[array objectAtIndex:j] doubleValue])
                {
                    // reset flag for previous index
                    if(smallest[i] != -1)
                        flags[smallest[i]] = 0;
                    // set flag for current index
                    flags[j] = 1;
                    smallest[i] = j;
                }
            }
        }
    }

    for(uint i = 0; i < 5; i++)
        NSLog(@"Smallest[%u]: %u -> %f", i, smallest[i], [[array objectAtIndex:smallest[i]] doubleValue]); 
```

如果有人有任何问题，请链接到这个专门针对原始开发人员[MatthewD的问题](http://www.iphonedevsdk.com/forum/iphone-sdk-development/81207-find-5-smallest-values-array.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:49:01.550

对模型中的数组进行排序，使其符合您想要的距离顺序，然后在 tableview 上调用重新加载。然后将从数据模型中刷新，您的列表将按正确的顺序排列。

# html - 如何抑制 DIV 中的单词

> ID：10024658
> 
> 赞同：0
> 
> 时间：2012-04-05T07:52:47.467
> 
> 标签：html

如何以如下图所示的方式抑制 DIV（具有定义的宽度和高度）中的单词而不弄乱顺序？

![在此处输入图像描述](../Images/0c3e3b22bec34840a55b902f32722e48.png)

如果在 DIV 中没有运气，我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:57:56.063

您可以使用`column-count`这里的小提琴：http: [//jsfiddle.net/X3XtK/1/](http://jsfiddle.net/X3XtK/1/)

现在看到你的评论了。如果您需要将每列限制为最多 6 个项目并且项目数量未知，那么`column-count`将很棘手。我认为您必须将它们分组到标记中（例如，将每组 6 个放在自己的组中`div`，然后将它们浮动）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:53:42.780

您可以使用一个小的 jQuery 脚本来完成。看到这个小提琴：http: [//jsfiddle.net/GlauberRocha/ZwY7q/](http://jsfiddle.net/GlauberRocha/ZwY7q/)

我把它做成了一个列表而不是一个`div`（但你可以很容易地修改它）。在我的示例中，项目最初位于无序列表 ( `ul`) 中。它们以 6 x 6 递归方式取出并放入一个新的有序列表 ( `ol`) 元素，该元素是浮动的。

如果您可以在原始标记中对元素进行分组（如@powerbuoy 建议的那样），那很好，但是使用 JavaScript 进行分组有两个优点：

*   你保持你的 HTML 标记简单和“语义”，
*   可以动态设置行数（在我的示例中，它作为参数传递给函数）

# java - 一次显示一个阵列的每个图像的 GUI

> ID：10024661
> 
> 赞同：0
> 
> 时间：2012-04-05T07:52:56.493
> 
> 标签：java, arrays, swing, user-interface, actionlistener

我对 GUI（和 Java，不到 3 个月前开始）非常陌生，并且需要一些关于我正在为家庭作业做的 GUI 的帮助。我作为最后的手段来到这里，因为我无法弄清楚这一点并且已经工作了几个小时。

我需要制作一个将通过 ImageIcons 数组的 GUI，并一次显示每个 ImageIcon（删除显示的前一个）。我已经把它放到了它显示我的第一个图像的位置，但是我的 JButton 完全没有做任何事情，我不知道如何让它工作。我翻阅了我的教科书和许多在线资源和老师给出的例子，但仍然一无所获。我知道一旦我看到一个解决方案，我会感到很愚蠢，但现在，我很累，并且开始思考不正确，因为我已经这样做了很长时间。请帮忙=D！！！

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.ImageIcon;

public class HangmanPanel extends JPanel {
    private JLabel imageLabel;
    private ImageIcon[] images;
    private JButton nextImage;
    private int imageNumber;

    public HangmanPanel() {

        nextImage = new JButton("Next Image");
        nextImage.setEnabled(true);
        nextImage.setToolTipText("Press for next image.");
        nextImage.addActionListener(new ButtonListener());

        images = new ImageIcon[8];
        // Populating the array
        {
            images[0] = new ImageIcon("hangman0.png");
            images[1] = new ImageIcon("hangman1.png");
            images[2] = new ImageIcon("hangman2.png");
            images[3] = new ImageIcon("hangman3.png");
            images[4] = new ImageIcon("hangman4.png");
            images[5] = new ImageIcon("hangman5.png");
            images[6] = new ImageIcon("hangman6.png");
            images[7] = new ImageIcon("hangman7.png");
        }

        setBackground(Color.white);

        add(nextImage);
        int count = 0;
        while (images.length > count)
        imageLabel = new JLabel (images[imageNumber]);
        count++;
        imageNumber++;
        add (imageLabel);
    }

    public void paint(Graphics page) {
        super.paint(page);

    }
    private class ButtonListener implements ActionListener{
        public void actionPerformed(ActionEvent event) {
            imageNumber++;
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:02:10.200

*   这些方法在教程 avout [Icon/ImageIcon](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html.)和[JLabel](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)中有描述，使用方法`JLabel#setIcon()`

*   不要忘记检查是否`imageNumber++;`不在 Array of 中`ImageIcon[] images;`，否则 Array Index Out of Bounds Exception 将冻结您的 GUI，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T08:02:39.243

假设你想在按下按钮时改变图片，你想把你的逻辑放在 ActionListener 里面。这将使程序在单击按钮时触发更改。

在构造函数中，您只想启动第一个图标，并且您想保存一个全局计数参考，以便您知道下一个是哪个图像。“图像更改逻辑”将在您的侦听器内部，因此您想做这样的事情：

```
//construcor
   imageLabel = new JLabel (images[imageNumber]);
   imageNumber++;
   add (imageLabel);

//listener
private class ButtonListener implements ActionListener{
        public void actionPerformed(ActionEvent event) {
           if(imageNumber<images.length){  //add a check so you don't get outofbounds exception
              imageLabel.setIcon(images[imageNumber]); //this will set the image next in line
              imageNumber++;
              imageLabel.repaint();
            }
          else
            System.out.println("Whole array has been looped thru, no more images to show");
          }

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T08:02:19.783

您只需要在 ButtonListener 中添加几行

```
 private class ButtonListener implements ActionListener{
        public void actionPerformed(ActionEvent event) {
            imageNumber++;
            imageNumber %= images.length;
            imageLabel.setIcon(images[imageNumber]);
            imageLabel.repaint();

        }
    } 
```

# mysql - MySQL 连接 - ON 子句的放置

> ID：10024682
> 
> 赞同：0
> 
> 时间：2012-04-05T07:54:34.413
> 
> 标签：mysql, join, left-join, outer-join

我最近试图提取一些结果，并且正在努力找出正确的查询来做到这一点。我见过的所有例子，甚至我的 MySQL 书都显示如下：

```
SELECT * 
FROM table_1
LEFT JOIN table_2 LEFT OUTER JOIN table_3 LEFT JOIN table_2
ON table_1.id = table_2.rel_id
AND table_1.id = table_3.rel_id
AND table_3.id = table_2.rel_id
WHERE table_1.some_col = some_vale; 
```

这不起作用，相反，解决方案是：

```
SELECT *
FROM table_1
LEFT JOIN table_2 ON table_1.id = table_2.rel_id
LEFT OUTER JOIN table_3 ON table_1.id = table_3.rel_id
LEFT JOIN table_2 ON table_3.id = table_2.rel_id
WHERE table_1.some_col = some_value; 
```

`SELECT`这两种说法有什么区别？什么时候应该使用每个？怎么做

你确定连接是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:10:31.620

第一条语句不起作用，因为您在第一次使用某个名称且没有条件的情况下两次加入 table_2。mysql中的左外连接是完全等价的左连接。最终第一个陈述完全不正确。

连接表时，必须使用“ON”子句或在 WHERE 子句中描述连接条件。如果您将一个表连接两次，则必须为它们添加别名，例如“left join table_2 as t2 left join table_2 as t22”。

无论如何文档会帮助你:)

[mysql 选择语句](http://dev.mysql.com/doc/refman/5.0/en/select.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:33:31.170

你必须阅读[`MYSQL JOIN Syntax`](http://dev.mysql.com/doc/refman/5.0/en/join.html)

基本语法

```
 SELECT * FROM first_table ft  
     (LEFT | RIGHT )JOIN second_table st ON st.column = ft.column
     (LEFT | RIGHT )JOIN third_table tt ON tt.column = ft.column (OR st.column)
     WHERE 
```

***注意：***默认**JOIN**是**INNER JOIN** 或者您可以使用以下语法

```
SELECT * FROM t1 LEFT JOIN (t2, t3, t4)
                 ON (t2.a=t1.a AND t3.b=t1.b AND t4.c=t1.c) 
```

# javascript - 如何使用 JQuery 创建切换按钮？

> ID：10024683
> 
> 赞同：-4
> 
> 时间：2012-04-05T07:54:39.180
> 
> 标签：javascript, jquery, html, css

如何使用 jQuery 创建切换按钮？我需要 Word 和其他文本编辑器中的“B”、“I”、“U”等按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:59:25.763

看看[这个 JSFiddle 代码](http://jsfiddle.net/centerwow/2kkHp/7/)是否对你有帮助。

```
<p><b>Disclaimer:</b> Due to a webkit bug involving pseudo classes and sibling selectors this may not work in some webkit-based browsers.</p>

<p>Here's our finished toggle button.</p>

<label id="label">
     <input type="checkbox" id="checkbox" />
     <span id="off">Off</span>
     <span id="on">On</span>
</label>

<p>Here's how we build it. First you start off with a label containing a checkbox and two spans.</p>

<label id="label">
    <input type="checkbox" />

    <span>Off</span>
    <span>On</span>
</label>

<p>Simple and not much to look at. Let's style those two spans to look like buttons and hide the checkbox.</p>

<label id="label">
    <input type="checkbox" id="checkbox" />
    <span id="off">Off</span>
    <span id="on" style="display:block;">On</span>
</label>

<p>Now, the key is to hide the "On" span initially with "display: none;". Then we show it when the checkbox is checked while hiding the "Off" span at the same time. This is done with this CSS:</p>

<pre>
#checkbox:checked + #off {
    display: none;
}
#checkbox:checked + #off + #on {
    display: block;
}
</pre>

<p>So, when the checkbox is checked we are targeting its sibling "off" and we are also targeting the sibling of the checkbox's sibling which is "on".</p>

<p>At this point you could use server-side code or javascript to react to the hidden checkbox being checked just like you would with a normal checkbox.</p>
​

p {
    margin: 10px;
}
pre {
    margin: 10px;
}

#label {
    cursor: pointer;
    display: block;
    margin: 20px auto;
    width: 200px;
}
#checkbox {
    display: none;
}
#checkbox:checked + #off {
    display: none;
}
#checkbox:checked + #off + #on {
    display: block;
}
#off {
    background: #ff3019;
    background: -moz-linear-gradient(top,  #ff3019 0%, #cf0404 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ff3019), color-stop(100%,#cf0404));
    background: -webkit-linear-gradient(top,  #ff3019 0%,#cf0404 100%);
    background: -o-linear-gradient(top,  #ff3019 0%,#cf0404 100%);
    background: -ms-linear-gradient(top,  #ff3019 0%,#cf0404 100%);
    background: linear-gradient(top,  #ff3019 0%,#cf0404 100%);
    border: 2px solid #cf0404;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    -o-border-radius: 10px;
    border-radius: 10px;
    color: white;
    display: block;
    font: 1em "Amaranth", sans-serif;
    padding: 4px 10px;
    text-align: center;
    -moz-user-select: none;
    -webkit-user-select: none;
    -o-user-select: none;
    user-select: none;
}
#on {
    background: #b4ddb4;
    background: -moz-linear-gradient(top,  #b4ddb4 0%, #83c783 17%, #52b152 33%, #008a00 67%, #005700 83%, #002400 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#b4ddb4), color-stop(17%,#83c783), color-stop(33%,#52b152), color-stop(67%,#008a00), color-stop(83%,#005700), color-stop(100%,#002400));
    background: -webkit-linear-gradient(top,  #b4ddb4 0%,#83c783 17%,#52b152 33%,#008a00 67%,#005700 83%,#002400 100%);
    background: -o-linear-gradient(top,  #b4ddb4 0%,#83c783 17%,#52b152 33%,#008a00 67%,#005700 83%,#002400 100%);
    background: -ms-linear-gradient(top,  #b4ddb4 0%,#83c783 17%,#52b152 33%,#008a00 67%,#005700 83%,#002400 100%);
    background: linear-gradient(top,  #b4ddb4 0%,#83c783 17%,#52b152 33%,#008a00 67%,#005700 83%,#002400 100%);
    border: 2px solid #002400;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    -o-border-radius: 10px;
    border-radius: 10px;
    color: white;
    display: none;
    font: 1em "Amaranth", sans-serif;
    padding: 4px 10px;
    text-align: center;
    -moz-user-select: none;
    -webkit-user-select: none;
    -o-user-select: none;
    user-select: none;
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:23:37.070

jQuery UI 提供了为复选框呈现的按钮。看到这个解决方案：http: [//jqueryui.com/demos/button/#checkbox](http://jqueryui.com/demos/button/#checkbox)

# unity3d - Unity3d - 帮助，这段代码在 iPhone 上太慢了

> ID：10024685
> 
> 赞同：1
> 
> 时间：2012-04-05T07:54:43.017
> 
> 标签：unity3d, alpha

我正在尝试像橡皮擦工具一样制作（当用户在纹理上拖动手指时，纹理在该位置变得透明）。我使用下面的代码进行了尝试（我在网上找到了一个示例并对其进行了一些修改），但它太慢了。我正在使用画笔纹理在背景纹理上绘制.. 这个问题还有其他解决方案吗？也许使用一些着色器会更快，但我不知道如何。

谢谢你的帮助

```
void Start()
{
   stencilUV = new Color[stencil.width * stencil.height];
   tex = (Texture2D)Instantiate(paintMaterial.mainTexture);
}

void Update () 
{
     RaycastHit hit;
    if (Input.touchCount == 0) return;
    //if (!Input.GetMouseButton(0)) return;
    if (Physics.Raycast(mainCamera.ScreenPointToRay(Input.mousePosition), out hit))
    {
        pixelUV = hit.textureCoord;
        pixelUV.x *= tex.width;
        pixelUV.y *= tex.height;

        CreateStencil((int)pixelUV.x, (int)pixelUV.y, stencil);
    }
}

void CreateStencil(int x, int y, Texture2D texture)
{
    paintMaterial.mainTexture = tex;
    for (int xPix = 0; xPix<texture.width; xPix++)
    {
        for (int yPix=0;yPix<texture.height; yPix++)
        {
            stencilUV[i] = tex.GetPixel((x - texture.width / 2) + xPix,
                (y - texture.height / 2) + yPix);
            stencilUV[i].a = 0;//1-color.a;
            i++;
        }
    }
    i=0;
    tex.SetPixels(x-texture.width/2, y-texture.height/2, texture.width, texture.height, stencilUV);
    tex.Apply();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:16:30.203

如您所知，该`Update()`函数在每一帧都被调用。所以这是你应该尝试优化代码的地方。该`CreateStencil()`函数对我来说似乎相当昂贵，因为您迭代纹理中的每个像素，然后`tex.GetPixel(..)`在您的 for 循环中调用 - 这意味着：当您触摸屏幕时，应用程序会尝试为纹理中的每个像素运行该函数的每一帧 - 绝对不是要走的路。我会尝试在`Start()`or`Awake()`函数中的某个其他数组中缓冲像素信息，并且只在内部执行必要的部分`Update()`。您可以省去的每一项昂贵的操作对于让您的应用程序在 iPhone 上流畅运行都至关重要。

# vb.net - 如何为 ObjectDataSource 设置 commandTimeout

> ID：10024686
> 
> 赞同：1
> 
> 时间：2012-04-05T07:54:44.490
> 
> 标签：vb.net, objectdatasource, command-timeout

我需要在 VB.NET 中为 ObjectDataSource 设置 commandTimeout，但我找不到任何方法。我可以在 SqlDataSource 中轻松做到这一点，但我仅限于使用 ObjectDataSource。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-08T06:56:31.000

答案取自[这里](https://forums.asp.net/t/1789465.aspx?commandTimeout%20property%20for%20ObjectDataSource)。

> 如果您使用的是强类型 TableAdapter，则需要通过在 _commandCollection 中的命令上设置 CommandTimeout 属性来编辑生成的代码：

`YourDataSet.Designer.cs:`

```
[global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [global::System.CodeDom.Compiler.GeneratedCodeAttribute("System.Data.Design.TypedDataSetGenerator", "4.0.0.0")]
        private void InitCommandCollection() {
            this._commandCollection = new global::System.Data.SqlClient.SqlCommand[1];
            this._commandCollection[0] = new global::System.Data.SqlClient.SqlCommand();
            this._commandCollection[0].Connection = this.Connection;
            this._commandCollection[0].CommandText = "SELECT * FROM dbo.Table";
            this._commandCollection[0].CommandType = global::System.Data.CommandType.Text;
            this._commandCollection[0].CommandTimeout = 1000; //Timeout in seconds
        } 
```

# php - 用于 php 的 ODBC 连接字符串

> ID：10024689
> 
> 赞同：1
> 
> 时间：2012-04-05T07:54:54.227
> 
> 标签：php, mysql, html, odbc

我已经开发了一个纯**HTML**的网站。我的表单包含名称、地址、资格等字段。单击**提交**按钮时，我想将这些详细信息保存到**mysql**数据库中。

**我使用myodbc-3.51.11-2-win.msi** setup安装了 mysql 驱动程序（mysqlconnector） 。控制面板的**ODBC**连接也成功完成。

从我的 html 页面我调用 php 页面如下：

```
<form action="database.php" method="post"> 
```

我在**CSE html 验证器**中编码。**我希望代码使用php的****odbc**连接连接到**mysql**数据库。

 ****我在我的系统上安装了 XAMPP。CSE **html 验证器**是否支持 php？请帮帮我。提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:24:00.060

除了实现这一点的可能性之外，这让我觉得这是一个糟糕的主意——您将在客户端以明文形式包含连接字符串，以便访问 HTML 页面的任何人都可以看到您的数据库用户名和密码？

从技术上讲，您可以使用 ActiveX - Google 'ActiveXObject("ADODB.Connection");' 有关这方面的信息，但它只适用于 Internet Explorer 浏览器。您最好使用 PHP、C# 甚至服务器端 JS（即 Node.js）等语言实现服务器端接口，以保持安全性和跨浏览器兼容性。****

# authentication - 如何检查当前用户是否可以在视图中做某事？

> ID：10024693
> 
> 赞同：0
> 
> 时间：2012-04-05T07:55:10.323
> 
> 标签：authentication, playframework-2.0

例如，如果当前用户是 admin，`Admin`则会显示该按钮。

如何在 play2 中实现这一点？有标准解决方案吗？我没有发现任何内置示例可以证明这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:36:13.087

不，Play 内部没有内置授权机制。您可以编写自己的代码来做到这一点（也许就像从对象中查找标志一样简单`User`）。然后是[Deadbolt 2](https://github.com/schaloner/deadbolt-2)。我自己没有尝试过，但它看起来很棒。并且可以做很多事情。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:03:12.680

检查`zentasks`示例，在那里您还可以找到身份验证的基础知识。我认为你可以满足你的需要。

# c# - 带有 SQLdatasource 的下拉列表层次结构

> ID：10024700
> 
> 赞同：2
> 
> 时间：2012-04-05T07:55:39.647
> 
> 标签：c#, asp.net, sqldatasource

在我的 ASP.NET 文件夹中，我有 3 个下拉框，其中填充了具有 3 个不同 SQLdatasources 的各种类别。每个下拉列表都取决于它上面的那个。
这个东西的用意是，在 dropdownlist1 中选择了某个东西后，dropdownlist2 中的数据源发生了变化。所以 dropdown2 中的数据取决于 dropdown1 中的选定值。而 dropdown3 中的数据取决于 dropdown2 中的选定值。
第一次，这一切都很好，花花公子。但是当我在 dd1 中选择一个值，然后在 dd2 中选择一个值时，它开始失败。
例如，当我在 dropdown1 中第二次更改该值时，其他下拉列表不会改变。

提前谢谢回复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T08:03:36.217

要做这种事情，你需要确保你的顶级下拉列表只填充一次，所以把它放在页面加载中，并在它周围加上一个 !isPostback。然后在该顶级下拉列表上附加一个 OnSelectedIndexChanged() 事件，并在其中确保在设置新数据源之前清除二级下拉列表中的项目。

然后在第二级下拉列表中使用 OnSelectedIndexChanged()，并确保在填充之前清除第三级。

然后第三个不需要任何事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:07:33.080

将代码填写`dd2`在`OnSelectedIndexChanged`of 中，对 of`dd1`执行相同`OnSelectedIndexChanged`的操作`dd2`（以填写`dd3`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T08:27:35.817

具有通过键连接的 2 个不同表的代码示例，在此示例中：companyID。

```
public partial class Default : Page
{
    public void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            var datacontext = new DataClasses1DataContext();
            List<Company> companies = datacontext.Companies.ToList();
            DropDownList1.DataSource = companies;
            DropDownList1.DataValueField = "CompanyID";
            DropDownList1.DataTextField = "CompanyName";
            DropDownList1.DataBind();
        }
    }

    public void DropDownList1SelectedIndexChanged(object sender, EventArgs e)
    {
        using (var dc = new DataClasses1DataContext())
        {
            DetailsView2.DataSource = null;
            DetailsView2.DataBind();

            DetailsView1.DataSource = dc.Companies.Where(d => d.CompanyID.Equals(DropDownList1.SelectedValue)).ToList();
            DetailsView1.DataBind();

            List<Contact> contacts = 
            dc.Contacts.Where(d => d.CompanyID.Equals(DropDownList1.SelectedValue)).ToList();            
            DropDownList2.DataSource = contacts;
            DropDownList2.DataTextField = "LastName";
            DropDownList2.DataValueField = "ContactID";
            DropDownList2.DataBind();

            if (contacts.Any())
            {
                DetailsView2.DataSource = dc.Contacts.Where(c => c.ContactID.Equals(DropDownList2.SelectedValue)).ToList();
                DetailsView2.DataBind();
            }

        }
    }

    public void DropDownList2SelectedIndexChanged(object sender, EventArgs e)
    {
        using (var dc = new DataClasses1DataContext())
        {
            DetailsView2.DataSource = dc.Contacts.Where(c => c.ContactID.Equals(DropDownList2.SelectedValue)).ToList();
            DetailsView2.DataBind();
        }
    }
} 
```

# javascript - 使用 AJAX 加载 XML 但未显示结果

> ID：10024704
> 
> 赞同：0
> 
> 时间：2012-04-05T07:56:00.377
> 
> 标签：javascript, jquery, xml, ajax

我正在加载一个 XML 文件，然后我将根据它们的标签显示它的内容，但似乎我的代码不起作用。这是我的 XML

```
<?xml version="1.0" encoding="UTF-8"?> 
<xml> 
<word> 
  <threeletter>RIP</threeletter> 
  <fourletter>PIER</fourletter>
  <fiveletter>SPIRE</fiveletter> 
  <sixletter>SPIDER</sixletter> 
 </word>
</xml> 
```

这是我的 Ajax 代码

```
$(document).ready(function() {
    $.ajax({ 
    url: "dictionary.xml", 
    success: function( xml ) { 
        $(xml).find("sixletter").each(function(){ 
            $("ul").append( 
              "<li>" + $(this).text() + "</li>"); 
        }); 
    } 
});
}) 
```

它们都在同一个文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:10:18.683

您的代码适用于我，使用 jQuery 1.7.1

也许您没有对 xml 文件的通用读取权限？将您的浏览器导航到您的 xml 文件，如果它没有加载，那就是您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:00:40.303

尝试添加数据类型：

```
 $(document).ready(function() {
    $.ajax({ 
    url: "dictionary.xml", 
    dataType: "xml",
    success: function( xml ) { 
        $(xml).find("sixletter").each(function(){ 
            $("ul").append( 
              "<li>" + $(this).text() + "</li>"); 
        }); 
    } 
});
}) 
```

希望能帮助到你

# asp.net - 对齐单行文本不起作用

> ID：10024705
> 
> 赞同：1
> 
> 时间：2012-04-05T07:56:00.847
> 
> 标签：asp.net, css, text-justify

我需要证明单行文本，我过去遇到过这个问题，并在 Stack Overflow 网站上的解决方案的帮助下解决了这个问题

[我无法在 asp.net 中使用 CSS 来证明单行文本的合理性](https://stackoverflow.com/questions/8922703/i-cant-justify-single-line-text-using-css-in-asp-net)

现在我必须做类似的事情，这是行不通的，我已将代码放在 Fiddle 上，即使上述解决方案也尝试过，这也行不通。

可能是我在做一些对我来说不明显的错误。我是一名专业开发人员，但在当前项目中也必须做设计工作

提琴手链接[http://jsfiddle.net/pp9hb/2/](http://jsfiddle.net/pp9hb/2/)

这适用于使用 Web 表单和 c# 的 ASP.Net 网站开发人员。

**解决方案**：下面的 CSS 对我有用。现在在所有浏览器中对齐文本

```
.Top10ArticleHeading
{
   text-align:Justify; 
   font-size:11px; 
    font-family:Tahoma, Geneva, sans-serif;  
    height:16px;
    color:black;
    padding-top:2px;
    text-decoration:none;
    width:160px;
}
.Top10ArticleHeading:after 
{
  content: "";
  display: inline-block;
  width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:48:16.413

嗨，您将这个 css 样式表定义为这样

**css** p, h1 {文本对齐：对齐；文本对齐最后：对齐；}

```
p:after, h1:after
{content: ".";
display: inline-block;
width: 100%;
height: 0;
visibility: hidden;}

h1
{height: 1.1em;
line-height: 1.1;
background:green;} 
```

**HTML**

```
<h1>This is heading </h1>

<p>hello demo texthello demo texthello demo texthello demo texthello demo texthello demo texthello demo texthello demo texthello demo texthello demo texthello demo texthello demo texthello demo texthello demo text</p>

​ 
```

现在有关此[http://kristinlbradley.wordpress.com/2011/09/15/cross-browser-css-justify-last-line-paragraph-text/的更多信息](http://kristinlbradley.wordpress.com/2011/09/15/cross-browser-css-justify-last-line-paragraph-text/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T11:05:41.277

解决方案：CSS 下面对我有用。现在在所有浏览器中对齐文本

```
.Top10ArticleHeading
{
   text-align:Justify; 
   font-size:11px; 
    font-family:Tahoma, Geneva, sans-serif;  
    height:16px;
    color:black;
    padding-top:2px;
    text-decoration:none;
    width:160px;
}
.Top10ArticleHeading:after 
{
  content: "";
  display: inline-block;
  width: 100%;
} 
```

# c - 如何在文本文件中写入“ const char * ”的内容？

> ID：10024708
> 
> 赞同：-3
> 
> 时间：2012-04-05T07:56:14.577
> 
> 标签：c, pointers, file-io

如果像这样声明一个常量

```
const char   *http_range; 
```

那么我怎样才能在文本文件中写入内容或它的值呢？你能告诉我语法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T07:57:49.917

首先，这不是“常数”。它是指向常量字符数据的指针，即指向只读字符串的指针。您可以更改指针，但不能更改它指向的数据。例如：

```
FILE *out;
const char *http_range = "Accept: text/*;q=0.3, text/html;q=0.7";

if ((out = fopen("textfile.txt", "w")) != NULL)
{
  fprintf(out, "the range is '%s'\n", http_range);
  fclose(out);
} 
```

请注意，以上内容是在 C 中，您的问题很奇怪地被双重标记，所以我选择了 C。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T08:02:08.417

在 C++ 中，以下代码将在 test.txt 中写入值

```
// basic file operations
#include <iostream>
#include <fstream>
using namespace std;

int main () {
  const char *http_range = "TEST";
  ofstream myfile;
  myfile.open ("test.txt");
  myfile << http_range;
  myfile.close();
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T07:57:58.177

您可以使用该[`fwrite`](http://www.cplusplus.com/reference/clibrary/cstdio/fwrite/)功能。

# css - 字体系列 (CSS)

> ID：10024718
> 
> 赞同：0
> 
> 时间：2012-04-05T07:56:54.483
> 
> 标签：css, fonts, font-family

我正在为客户开发一个网站，我想稍微自定义一下字体。

在这个网站上：

[http://unos.com/](http://unos.com/)

导航菜单中有几个主题，例如：菜单、位置、营养、电子邮件俱乐部等。

这就是我想要的字体。检查页面源时，我能找到的只有：

```
font-family: Verdana, Arial, Helvetica, sans-serif; 
```

但这并没有达到预期的效果。

我怎样才能获得上面网站上的字体？

另外：我确实尝试`font-family:cursive`过，但这也没有给我想要的结果。

我也试图避免`CSS3`在旧浏览器的情况下使用。但是，如果这是唯一的方法，那么我可以`font-face`很容易地使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:01:11.693

您在该导航菜单中看到的不是字体，而是[图像](http://unos.com/images/navmenu2011.gif)。如果您不想使用直截了当的图像，请使用 Google“字体替换”，您会找到讨论如何用更复杂的内容替换网页中的“纯”文本的材料（例如，[请参阅此](http://webdesign.tutsplus.com/articles/typography-articles/a-web-designers-guide-to-font-replacement-methods/)）。

# java - 为什么 IF 和 ELSE 案例都被执行了？

> ID：10024725
> 
> 赞同：0
> 
> 时间：2012-04-05T07:57:26.173
> 
> 标签：java, android, eclipse

```
private static synchronized String[][] map2data(Map<String, Object> map) {
    if (map != null) {
        String[][] msg_data = (String[][]) map.get("message_data");
        return msg_data;
    } else {
        return null;
    }
} 
```

我的android项目的java代码如下。当我在eclipse中调试它时，`String[][] msg_data = (String[][]) map.get("message_data");`执行后，它会进入`return null;` 案例`else`。

我对此完全感到困惑。首先，我猜 是 有问题`String[][] msg_data = (String[][]) map.get("message_data");`，但是当我将其更改为 时`String a = "a"`，它仍然是一样的。为什么？可能是因为“静态同步”还是其他原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:59:20.070

它显示的方式..您可能还注意到，在 else 语句中，只有`return`语句在调试时突出显示，而不是之前的语句...它从未真正执行过..尝试`else`使用 Log 在该条件下打印一些东西

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T08:00:48.877

我认为您的代码和二进制文件不同步。尝试重新编译，您应该不会再看到它了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T08:00:43.673

从你的代码看它永远不会发生..

签`msg_data`入`if statement`可能是它的**null**。如果您正确调试它，可能是您的代码不同步。所以再建一次..

**编辑：**

从中删除 else 部分，使用此代码，

**代码：**

```
private static synchronized String[][] map2data(Map<String, Object> map) {
String[][] msg_data = null;
    if (map != null) {
        msg_data = (String[][]) map.get("message_data");
       } 
return msg_data;
} 
```

# jpa - 是否可以使用 jpa1 @notnull 注释？

> ID：10024735
> 
> 赞同：0
> 
> 时间：2012-04-05T07:58:02.820
> 
> 标签：jpa

是否可以对 jpa 1 使用 @notnull 之类的注释？如果不是，这是如何实现的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:40:15.557

JPA 1.0（或 2.0）没有 @notnull 注释。

JPA 1.0 在 @Column 注释上可以为空。

# android - 如何确定 Fragment 何时在 ViewPager 中可见

> ID：10024739
> 
> 赞同：804
> 
> 时间：2012-04-05T07:58:15.290
> 
> 标签：android, android-fragments, android-viewpager

问题：`onResume()`在`ViewPager`片段真正可见之前触发片段。

例如，我有 2 个带有`ViewPager`和的片段`FragmentPagerAdapter`。第二个片段仅适用于授权用户，我需要在片段可见时要求用户登录（使用警报对话框）。

但是`ViewPager`当第一个片段可见时创建第二个片段，以便缓存第二个片段并在用户开始滑动时使其可见。

所以`onResume()`事件在第二个片段变得可见之前很久就在第二个片段中被触发。这就是为什么我试图找到一个在第二个片段变得可见时触发的事件以在适当的时刻显示一个对话框。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：604
> 
> 时间：2012-06-17T23:42:09.847

> 如何确定 Fragment 何时在 ViewPager 中可见

`setUserVisibleHint`您可以通过覆盖来执行以下操作`Fragment`：

```
public class MyFragment extends Fragment {
    @Override
    public void setUserVisibleHint(boolean isVisibleToUser) {
        super.setUserVisibleHint(isVisibleToUser);
        if (isVisibleToUser) {
        }
        else {
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：531
> 
> 时间：2012-09-21T02:56:33.283

**更新**：Android 支持库（第 11 版）最终[修复了用户可见提示问题](https://github.com/android/platform_frameworks_support/commit/bf7974e46b008ffa4a16c61386735c4817d343aa)，现在如果您将支持库用于片段，那么您可以安全地使用`getUserVisibleHint()`或覆盖`setUserVisibleHint()`以捕获 Gorn 回答中描述的更改。

**更新 1**这是`getUserVisibleHint()`. 此值为默认值`true`。

```
// Hint provided by the app that this fragment is currently visible to the user.
boolean mUserVisibleHint = true; 
```

`setUserVisibleHint()`因此，在调用之前尝试使用它可能会出现问题。作为一种解决方法，您可以在`onCreate`这样的方法中设置值。

```
public void onCreate(@Nullable Bundle savedInstanceState) {
    setUserVisibleHint(false); 
```

* * *

过时的答案：

在大多数用例中，`ViewPager`一次只显示一页，但如果您使用`FragmentStatePagerAdapter`in ，预缓存的片段也会置于“可见”状态（实际上是不可见） `Android Support Library pre-r11`。

我覆盖：

```
public class MyFragment extends Fragment {
    @Override
    public void setMenuVisibility(final boolean visible) {
        super.setMenuVisibility(visible);
        if (visible) {
            // ...
        }
    }
   // ...
} 
```

捕获片段的焦点状态，我认为这是您所说的“可见性”最合适的状态，因为 ViewPager 中只有一个片段实际上可以将其菜单项与父活动的项放在一起。

* * *

## 回答 #3

> 赞同：147
> 
> 时间：2014-08-03T03:02:12.820

这似乎恢复了`onResume()`您所期望的正常行为。按 Home 键离开应用程序然后重新进入应用程序时效果很好。 `onResume()`不会连续调用两次。

```
@Override
public void setUserVisibleHint(boolean visible)
{
    super.setUserVisibleHint(visible);
    if (visible && isResumed())
    {
        //Only manually call onResume if fragment is already visible
        //Otherwise allow natural fragment lifecycle to call onResume
        onResume();
    }
}

@Override
public void onResume()
{
    super.onResume();
    if (!getUserVisibleHint())
    {
        return;
    }

    //INSERT CUSTOM CODE HERE
} 
```

* * *

## 回答 #4

> 赞同：74
> 
> 时间：2012-08-03T14:41:51.913

这是另一种使用方式`onPageChangeListener`：

```
 ViewPager pager = (ViewPager) findByViewId(R.id.viewpager);
  FragmentPagerAdapter adapter = new FragmentPageAdapter(getFragmentManager);
  pager.setAdapter(adapter);
  pager.setOnPageChangeListener(new OnPageChangeListener() {

  public void onPageSelected(int pageNumber) {
    // Just define a callback method in your fragment and call it like this! 
    adapter.getItem(pageNumber).imVisible();

  }

  public void onPageScrolled(int arg0, float arg1, int arg2) {
    // TODO Auto-generated method stub

  }

  public void onPageScrollStateChanged(int arg0) {
    // TODO Auto-generated method stub

  }
}); 
```

* * *

## 回答 #5

> 赞同：58
> 
> 时间：2015-04-14T07:27:17.327

`setUserVisibleHint()`**有时会在之前** 被调用`onCreateView()`，有时会在之后被调用，这会导致麻烦。

为了克服这个问题，您还需要检查`isResumed()`内部`setUserVisibleHint()`方法。但在这种情况下，我意识到**只有**在 Fragment 恢复且可见时`setUserVisibleHint()`才会调用，而不是在创建时调用。

 **因此，如果您想在 Fragment 为 时更新某些内容`visible`，请将您的更新函数放在`onCreate()`和中`setUserVisibleHint()`：

```
@Override
public View onCreateView(...){
    ...
    myUIUpdate();
    ...        
}
  ....
@Override
public void setUserVisibleHint(boolean visible){
    super.setUserVisibleHint(visible);
    if (visible && isResumed()){
        myUIUpdate();
    }
} 
```

**更新：**我仍然意识到`myUIUpdate()`有时会被调用两次，原因是，如果您有 3 个选项卡并且此代码在第二个选项卡上，那么当您第一次打开第一个选项卡时，也会创建第二个选项卡，即使它不可见并被`myUIUpdate()`调用。然后，当您滑动到第二个选项卡时，会调用`myUIUpdate()`from `if (visible && isResumed())`，因此`myUIUpdate()`可能会在一秒钟内调用两次。

另一个*问题*是`!visible`在`setUserVisibleHint`1) 当你离开片段屏幕时和 2) 在它创建之前，当你第一次切换到片段屏幕时被调用。

**解决方案：**

```
private boolean fragmentResume=false;
private boolean fragmentVisible=false;
private boolean fragmentOnCreated=false;
...

@Override
public View onCreateView(...){
    ...
    //Initialize variables
    if (!fragmentResume && fragmentVisible){   //only when first time fragment is created
        myUIUpdate();
    }
    ...        
}

@Override
public void setUserVisibleHint(boolean visible){
    super.setUserVisibleHint(visible);
    if (visible && isResumed()){   // only at fragment screen is resumed
        fragmentResume=true;
        fragmentVisible=false;
        fragmentOnCreated=true;
        myUIUpdate();
    }else  if (visible){        // only at fragment onCreated
        fragmentResume=false;
        fragmentVisible=true;
        fragmentOnCreated=true;
    }
    else if(!visible && fragmentOnCreated){// only when you go out of fragment screen
        fragmentVisible=false;
        fragmentResume=false;
    }
} 
```

**解释：**

`fragmentResume`, `fragmentVisible`: 确保仅在片段创建且可见时调用 in，而不是在恢复时调用`myUIUpdate()`。`onCreateView()`它还解决了您在第一个选项卡时的问题，即使第二个选项卡不可见也会创建。这解决了这个问题并检查片段屏幕是否在`onCreate`.

`fragmentOnCreated`：确保片段不可见，并且在您第一次创建片段时不被调用。所以现在这个 if 子句只有在你滑出片段时才会被调用。

**更新** 您可以将所有这些代码放在这样的代码中`BaseFragment`并[覆盖](https://gist.github.com/jemshit/749f4c3ae7156a387fda0a252028e219)方法。

* * *

## 回答 #6

> 赞同：49
> 
> 时间：2019-09-11T11:44:55.020

在版本中`ViewPager2`和`ViewPager`版本`androidx.fragment:fragment:1.1.0`中，您可以只使用`onPause`和`onResume`回调来确定当前对用户可见的片段。当片段变得可见并且停止可见时`onResume`调用回调。`onPause`

在 ViewPager2 的情况下，它是默认行为，但可以`ViewPager`轻松地为旧物品启用相同的行为。

要在第一个 ViewPager 中启用此行为，您必须将`FragmentPagerAdapter.BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT`参数作为`FragmentPagerAdapter`构造函数的第二个参数传递。

```
FragmentPagerAdapter(fragmentManager, BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT) 
```

注意：带有一个参数的 `setUserVisibleHint()`方法和构造函数现在在新版本的来自 android jetpack 的 Fragment 中已弃用。`FragmentPagerAdapter`

* * *

## 回答 #7

> 赞同：34
> 
> 时间：2017-02-03T08:34:14.953

### 新的

`ViewPager2`++ （在Fragment中`FragmentStateAdapter`）`onResume()`解决问题

### 旧答案（已弃用）

`Fragment`为了检测`ViewPager`可见，我很确定**仅使用** `setUserVisibleHint`是不够的。
这是我检查片段是否可见或不可见的解决方案。首先在启动viewpager时，在页面之间切换，转到另一个活动/片段/背景/前景`

```
public class BaseFragmentHelpLoadDataWhenVisible extends Fragment {
    protected boolean mIsVisibleToUser; // you can see this variable may absolutely <=> getUserVisibleHint() but it not. Currently, after many test I find that

    /**
     * This method will be called when viewpager creates fragment and when we go to this fragment background or another activity or fragment
     * NOT called when we switch between each page in ViewPager
     */
    @Override
    public void onStart() {
        super.onStart();
        if (mIsVisibleToUser) {
            onVisible();
        }
    }

    @Override
    public void onStop() {
        super.onStop();
        if (mIsVisibleToUser) {
            onInVisible();
        }
    }

    /**
     * This method will called at first time viewpager created and when we switch between each page
     * NOT called when we go to background or another activity (fragment) when we go back
     */
    @Override
    public void setUserVisibleHint(boolean isVisibleToUser) {
        super.setUserVisibleHint(isVisibleToUser);
        mIsVisibleToUser = isVisibleToUser;
        if (isResumed()) { // fragment have created
            if (mIsVisibleToUser) {
                onVisible();
            } else {
                onInVisible();
            }
        }
    }

    public void onVisible() {
        Toast.makeText(getActivity(), TAG + "visible", Toast.LENGTH_SHORT).show();
    }

    public void onInVisible() {
        Toast.makeText(getActivity(), TAG + "invisible", Toast.LENGTH_SHORT).show();
    }
} 
```

**解释** 你可以仔细检查下面的logcat然后我想你可能知道为什么这个解决方案会起作用

**首次发射**

```
Fragment1: setUserVisibleHint: isVisibleToUser=false isResumed=false
Fragment2: setUserVisibleHint: isVisibleToUser=false isResumed=false
Fragment3: setUserVisibleHint: isVisibleToUser=false isResumed=false
Fragment1: setUserVisibleHint: isVisibleToUser=true isResumed=false // AT THIS TIME isVisibleToUser=true but fragment still not created. If you do something with View here, you will receive exception
Fragment1: onCreateView
Fragment1: onStart mIsVisibleToUser=true
Fragment2: onCreateView
Fragment3: onCreateView
Fragment2: onStart mIsVisibleToUser=false
Fragment3: onStart mIsVisibleToUser=false 
```

**转到第 2 页**

```
Fragment1: setUserVisibleHint: isVisibleToUser=false isResumed=true
Fragment2: setUserVisibleHint: isVisibleToUser=true isResumed=true 
```

**转到第 3 页**

```
Fragment2: setUserVisibleHint: isVisibleToUser=false isResumed=true
Fragment3: setUserVisibleHint: isVisibleToUser=true isResumed=true 
```

**转到背景：**

```
Fragment1: onStop mIsVisibleToUser=false
Fragment2: onStop mIsVisibleToUser=false
Fragment3: onStop mIsVisibleToUser=true 
```

**转到前台**

```
Fragment1: onStart mIsVisibleToUser=false
Fragment2: onStart mIsVisibleToUser=false
Fragment3: onStart mIsVisibleToUser=true 
```

[演示项目在这里](https://github.com/PhanVanLinh/AndroidDetectFragmentVisible)

希望有帮助

* * *

## 回答 #8

> 赞同：26
> 
> 时间：2016-01-06T13:54:44.007

```
package com.example.com.ui.fragment;

import android.os.Bundle;
import android.support.annotation.Nullable;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.example.com.R;

public class SubscribeFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_subscribe, container, false);
        return view;
    }

    @Override
    public void setUserVisibleHint(boolean isVisibleToUser) {
        super.setUserVisibleHint(isVisibleToUser);

        if (isVisibleToUser) {
            // called here
        }
    }

    @Override
    public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
    }
} 
```

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2015-06-19T18:34:21.477

`setPrimaryItem()`在子类中覆盖`FragmentPagerAdapter`。我用这个方法，效果很好。

```
@Override
public void setPrimaryItem(ViewGroup container, int position, Object object) {
    // This is what calls setMenuVisibility() on the fragments
    super.setPrimaryItem(container, position, object);

    if (object instanceof MyWhizBangFragment) {
        MyWhizBangFragment fragment = (MyWhizBangFragment) object;
        fragment.doTheThingYouNeedToDoOnBecomingVisible();
    }
} 
```

* * *

## 回答 #10

> 赞同：14
> 
> 时间：2012-09-09T12:04:16.910

为此覆盖[`Fragment.onHiddenChanged()`](https://developer.android.com/reference/android/app/Fragment.html#onHiddenChanged%28boolean%29)。

> `public void onHiddenChanged(boolean hidden)`
> 
> [`isHidden()`](https://developer.android.com/reference/android/app/Fragment.html#isHidden())当片段的隐藏状态（由 返回）改变时调用。片段开始时没有隐藏；每当片段改变状态时，都会调用它。
> 
> 参数
> `hidden`- `boolean`：如果片段现在隐藏，则为真，如果不可见，则为假。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2020-07-28T06:13:43.057

只有这对我有用！现在`setUserVisibleHint(...)`已弃用（我在最后附上了文档），这意味着大多数其他答案都已弃用；-)

```
public class FragmentFirewall extends Fragment {
    /**
     * Required cause "setMenuVisibility(...)" is not guaranteed to be
     * called after "onResume()" and/or "onCreateView(...)" method.
     */
    protected void didVisibilityChange() {
        Activity activity = getActivity();
        if (isResumed() && isMenuVisible()) {
            // Once resumed and menu is visible, at last
            // our Fragment is really visible to user.
        }
    }

    @Override
    public void onResume() {
        super.onResume();
        didVisibilityChange();
    }

    @Override
    public void setMenuVisibility(boolean visible) {
        super.setMenuVisibility(visible);
        didVisibilityChange();
    }
} 
```

经过测试和使用`NaviagationDrawer`，`isMenuVisible()`总会有回报`true`（`onResume()`看起来足够了，但我们也想支持`ViewPager`）。

> `setUserVisibleHint`已弃用。如果重写此方法，则传入时实现的行为`true`应移至`Fragment.onResume()`，传入时实现的行为`false`应移至`Fragment.onPause()`。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2014-06-24T08:20:46.777

我发现只有在片段*真正*可见`onCreateOptionsMenu`的情况下才调用方法。我找不到任何类似这些行为的方法，我也尝试过，但它不适用于这种情况，例如，我需要在方法中初始化一个变量。`onPrepareOptionsMenu`*`OnPageChangeListener``onCreate`*

 *所以这两种方法可以作为一种解决方法来解决这个问题，特别是对于小而短的工作。

我认为，这是更好的解决方案，但不是最好的。我将使用它，但同时等待更好的解决方案。

问候。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2020-06-06T10:06:01.020

**setUserVisibleHint(boolean visible)**现在**已弃用**所以这是正确的解决方案

```
FragmentPagerAdapter(fragmentManager, BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT) 
```

在版本中的**ViewPager2**和**ViewPager**`androidx.fragment:fragment:1.1.0`中，您可以使用`onPause()`并`onResume()`确定当前对用户可见的片段。`onResume()`当片段变得可见并且`onPause`停止可见时调用。

要在第一个 ViewPager 中启用此行为，您必须将`FragmentPagerAdapter.BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT`参数作为`FragmentPagerAdapter`构造函数的第二个参数传递。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-04-06T12:57:46.497

此处发布的另一个解决方案[覆盖了 kris larson 的 pageradapter 中的 setPrimaryItem](https://stackoverflow.com/questions/10024739/how-to-determine-when-fragment-becomes-visible-in-viewpager/30945061#30945061)几乎对我有用。但是每个设置都会多次调用此方法。我还从片段中的视图等中获得了[NPE](https://en.wikipedia.org/wiki/Null_pointer#Dereferencing)，因为在调用此方法的前几次还没有准备好。通过以下更改，这对我有用：

```
private int mCurrentPosition = -1;

@Override
public void setPrimaryItem(ViewGroup container, int position, Object object) {
    super.setPrimaryItem(container, position, object);

    if (position == mCurrentPosition) {
        return;
    }

    if (object instanceof MyWhizBangFragment) {
        MyWhizBangFragment fragment = (MyWhizBangFragment) object;

        if (fragment.isResumed()) {
            mCurrentPosition = position;
            fragment.doTheThingYouNeedToDoOnBecomingVisible();
        }
    }
} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-05-08T15:30:26.363

我们有一个 MVP 的特殊情况，即 Fragment 需要通知 Presenter 视图已经可见，并且 Presenter 是由 Dagger 注入的`fragment.onAttach()`。

`setUserVisibleHint()`还不够，我们检测到需要解决的 3 种不同情况（`onAttach()`提及是为了让您知道演示者何时有空）：

1.  刚刚创建了片段。系统进行以下调用：

    ```
    setUserVisibleHint() // before fragment's lifecycle calls, so presenter is null
    onAttach()
    ...
    onResume() 
    ```

2.  已创建片段并按下主页按钮。将应用程序恢复到前台时，这称为：

    ```
    onResume() 
    ```

3.  方向变化：

    ```
    onAttach() // presenter available
    onResume()
    setUserVisibleHint() 
    ```

我们只希望可见性提示到达演示者一次，所以我们是这样做的：

```
@Nullable
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View root = inflater.inflate(R.layout.fragment_list, container, false);
    setHasOptionsMenu(true);

    if (savedInstanceState != null) {
        lastOrientation = savedInstanceState.getInt(STATE_LAST_ORIENTATION,
              getResources().getConfiguration().orientation);
    } else {
        lastOrientation = getResources().getConfiguration().orientation;
    }

    return root;
}

@Override
public void onResume() {
    super.onResume();
    presenter.onResume();

    int orientation = getResources().getConfiguration().orientation;
    if (orientation == lastOrientation) {
        if (getUserVisibleHint()) {
            presenter.onViewBecomesVisible();
        }
    }
    lastOrientation = orientation;
}

@Override
public void setUserVisibleHint(boolean isVisibleToUser) {
    super.setUserVisibleHint(isVisibleToUser);
    if (presenter != null && isResumed() && isVisibleToUser) {
        presenter.onViewBecomesVisible();
    }
}

@Override public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt(STATE_LAST_ORIENTATION, lastOrientation);
} 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-12-16T11:43:00.323

**通过检测`focused view`！**

这对我有用

```
public static boolean isFragmentVisible(Fragment fragment) {
    Activity activity = fragment.getActivity();
    View focusedView = fragment.getView().findFocus();
    return activity != null
            && focusedView != null
            && focusedView == activity.getWindow().getDecorView().findFocus();
} 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2016-11-11T19:37:46.453

`FragmentStatePagerAdapters`我在使用3 个选项卡时遇到了同样的问题。每当单击第一个选项卡时，我都必须显示一个 Dilaog，并在单击其他选项卡时将其隐藏。

单独覆盖`setUserVisibleHint()`并不能帮助找到当前可见的片段。

从第 3 个选项卡单击时 -----> 第一个选项卡。它为第二个片段和第一个片段触发了两次。我将它与 isResumed() 方法结合使用。

```
 @Override
public void setUserVisibleHint(boolean isVisibleToUser) {
    super.setUserVisibleHint(isVisibleToUser);
    isVisible = isVisibleToUser;

    // Make sure that fragment is currently visible
    if (!isVisible && isResumed()) {
        // Call code when Fragment not visible
    } else if (isVisible && isResumed()) {
       // Call code when Fragment becomes visible.
    }

} 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2017-01-02T18:24:31.593

在片段内添加以下代码

```
@Override
public void setMenuVisibility(final boolean visible) 
 {
    super.setMenuVisibility(visible);
    if (visible && isResumed()) 
     {

     }
} 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2014-03-11T18:35:48.193

我遇到过同样的问题。`ViewPager`执行其他片段生命周期事件，我无法更改该行为。我使用片段和可用动画编写了一个简单的寻呼机。 [简单寻呼机](https://github.com/rukmaldias/SimplePager "简单寻呼机")

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-09-21T10:57:28.917

我用了这个，它奏效了！

```
mContext.getWindow().getDecorView().isShown() //boolean 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2019-05-09T09:56:27.537

我支持带有子片段的 SectionsPagerAdapter 所以经过很多头痛后，我终于得到了基于该主题解决方案的工作版本：

```
public abstract class BaseFragment extends Fragment {

    private boolean visible;
    private boolean visibilityHintChanged;

    /**
     * Called when the visibility of the fragment changed
     */
    protected void onVisibilityChanged(View view, boolean visible) {

    }

    private void triggerVisibilityChangedIfNeeded(boolean visible) {
        if (this.visible == visible || getActivity() == null || getView() == null) {
            return;
        }
        this.visible = visible;
        onVisibilityChanged(getView(), visible);
    }

    @Override
    public void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (!visibilityHintChanged) {
            setUserVisibleHint(false);
        }
    }

    @Override
    public void onResume() {
        super.onResume();
        if (getUserVisibleHint() && !isHidden()) {
            triggerVisibilityChangedIfNeeded(true);
        }
    }

    @Override
    public void onHiddenChanged(boolean hidden) {
        super.onHiddenChanged(hidden);
        triggerVisibilityChangedIfNeeded(!hidden);
    }

    @Override
    public void setUserVisibleHint(boolean isVisibleToUser) {
        super.setUserVisibleHint(isVisibleToUser);
        visibilityHintChanged = true;
        if (isVisibleToUser && isResumed() && !isHidden()) {
            triggerVisibilityChangedIfNeeded(true);
        } else if (!isVisibleToUser) {
            triggerVisibilityChangedIfNeeded(false);
        }
    }

    @Override
    public void onPause() {
        super.onPause();
        triggerVisibilityChangedIfNeeded(false);
    }

    @Override
    public void onStop() {
        super.onStop();
        triggerVisibilityChangedIfNeeded(false);
    }

    protected boolean isReallyVisible() {
        return visible;
    }
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-08-05T14:12:26.417

当我试图让计时器在视图页面中的片段在屏幕上供用户查看时触发时，我遇到了这个问题。

计时器总是在用户看到片段之前启动。这是因为`onResume()`在我们看到片段之前调用了片段中的方法。

我的解决方案是检查`onResume()`方法。当片段 8 是视图寻呼机当前片段时，我想调用某个方法 'foo()'。

```
@Override
public void onResume() {
    super.onResume();
    if(viewPager.getCurrentItem() == 8){
        foo();
        //Your code here. Executed when fragment is seen by user.
    }
} 
```

希望这可以帮助。我已经看到这个问题弹出了很多。这似乎是我见过的最简单的解决方案。许多其他的与较低的 API 等不兼容。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-09-24T06:46:26.653

可能会很晚。这对我有用。我稍微更新了@Gobar 和@kris Solutions 的代码。我们必须更新`PagerAdapter`.

`setPrimaryItem`每次选项卡可见并返回其位置时调用。如果位置相同意味着我们不为所动。如果位置改变并且当前位置不是我们点击的标签设置为-1。

```
private int mCurrentPosition = -1;

@Override
public void setPrimaryItem(@NotNull ViewGroup container, int position, @NotNull Object object) {
    // This is what calls setMenuVisibility() on the fragments
    super.setPrimaryItem(container, position, object);
    if (position == mCurrentPosition) {
        return;
    }
    if (object instanceof YourFragment) {
        YourFragment fragment = (YourFragment) object;
        if (fragment.isResumed()) {
            mCurrentPosition = position;
            fragment.doYourWork();//Update your function
        }
    } else {
        mCurrentPosition = -1;
    }
} 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2015-12-09T19:53:47.207

请注意，`setUserVisibleHint(false)`在活动/片段停止时不会调用。您仍然需要检查启动/停止以正确地`register/unregister`任何侦听器/等。

此外，`setUserVisibleHint(false)`如果您的片段以不可见状态开始，您会得到；你不想去`unregister`那里，因为你以前从未在这种情况下注册过。

```
@Override
public void onStart() {
    super.onStart();

    if (getUserVisibleHint()) {
        // register
    }
}

@Override
public void onStop() {
    if (getUserVisibleHint()) {
        // unregister
    }

    super.onStop();
}

@Override
public void setUserVisibleHint(boolean isVisibleToUser) {
    super.setUserVisibleHint(isVisibleToUser);

    if (isVisibleToUser && isResumed()) {
        // register

        if (!mHasBeenVisible) {
            mHasBeenVisible = true;
        }
    } else if (mHasBeenVisible){
        // unregister
    }
} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-05-28T17:35:03.357

一种简单的实现方法是在访问片段**之前检查用户是否已登录。**

在您的 MainActivity 中，您可以在**onNavigationItemSelected**方法中执行类似的操作。

```
 case R.id.nav_profile_side:

                if (User_is_logged_in) {

                    fragmentManager.beginTransaction()
                            .replace(R.id.content_frame
                                    , new FragmentProfile())
                            .commit();
                }else {

                    ShowLoginOrRegisterDialog(fragmentManager);

                }

                break; 
```

但是，如果您使用导航抽屉，抽屉中的选择将更改为 Profile，尽管我们还没有进入 ProfileFragment。

要将选择重置为当前选择，请运行以下代码

```
 navigationView.getMenu().getItem(0).setChecked(true); 
```

* * *

## 回答 #26

> 赞同：-4
> 
> 时间：2013-01-11T21:28:09.303

我覆盖了关联的 FragmentStatePagerAdapter 的 Count 方法，并让它返回总计数减去要隐藏的页数：

```
 public class MyAdapter : Android.Support.V13.App.FragmentStatePagerAdapter
 {   
     private List<Fragment> _fragments;

     public int TrimmedPages { get; set; }

     public MyAdapter(Android.App.FragmentManager fm) : base(fm) { }

     public MyAdapter(Android.App.FragmentManager fm, List<Android.App.Fragment> fragments) : base(fm)
     {
         _fragments = fragments;

         TrimmedPages = 0;
     }

     public override int Count
     {
         //get { return _fragments.Count; }
         get { return _fragments.Count - TrimmedPages; }
     }
 } 
```

因此，如果最初添加了 3 个片段到 ViewPager，并且在满足某些条件之前只显示前 2 个片段，则通过将 TrimmedPages 设置为 1 来覆盖页面计数，并且它应该只显示前两个页面。

这对最后的页面很有用，但对开始或中间的页面没有帮助（尽管有很多方法可以做到这一点）。***

# linq - LINQ to Entities 无法识别“Boolean CheckMeetingSettings(Int64, Int64)”方法

> ID：10024741
> 
> 赞同：-2
> 
> 时间：2012-04-05T07:58:21.757
> 
> 标签：linq, entity-framework, c#-4.0, linq-to-entities

我正在使用 EDM 中的代码优先方法并面临一个我无法解决的错误。请帮助我

> LINQ to Entities 无法识别方法 'Boolean CheckMeetingSettings(Int64, Int64)' 方法，并且此方法无法转换为存储表达式。

我的代码如下（这是我写的查询

```
from per in obj.tempPersonConferenceDbSet
           where per.Conference.Id == 2
           select new PersonDetials
           {
               Id = per.Person.Id,
               JobTitle = per.Person.JobTitle,
               CanSendMeetingRequest = CheckMeetingSettings(6327,per.Person.Id)
           }

public bool CheckMeetingSettings(int,int)
{
  ///code I have written.
} 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:07:05.627

EF 无法将自定义代码转换为 SQL。尝试迭代结果集并在 LINQ 查询之外分配属性。

```
var people = (from per in obj.tempPersonConferenceDbSet
           where per.Conference.Id == 2
           order by /**/
           select new PersonDetials
           {
               Id = per.Person.Id,
               JobTitle = per.Person.JobTitle,
           }).Skip(/*records count to skip*/)
             .Take(/*records count to retrieve*/)
             .ToList();

people.ForEach(p => p.CanSendMeetingRequest = CheckMeetingSettings(6327, p.Id)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:04:08.037

Linq to Entities 无法将您的自定义代码转换为 SQL 查询。

您可能会考虑首先仅选择数据库列，然后添加 .ToList() 以强制解析查询。获得这些结果后，您可以再次选择从 CheckMeetingSettings 方法中添加信息的位置。

我更喜欢流畅的语法，所以我在下面的例子中使用了它。

```
var query = obj.tempPersonConferenceDbSet
               .Where(per => per.Conference.Id == 2).Select(per => new { Id = per.Person.Id, JobTitle = per.Person.JobTitle })
               .ToList()
               .Select(per => new PersonDetails { Id = per.Id, 
                                                  JobTitle = per.JobTitle,
                                                  CanSendMeetingRequest = CheckMeetingSettings(6327, per.Person.Id) }) 
```

如果您的 CheckMeetingSettings 方法还访问数据库，您可能要考虑不使用单独的方法来防止 SELECT N+1 场景，并尝试以数据库可以理解的方式将逻辑表达为查询的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T08:10:17.443

尝试：

```
var personDetails = obj.tempPersonConferenceDbSet.Where(p=>p.ConferenceId == 2).AsEnumerable().Select(p=> new PersonDetials
           {
               Id = per.Person.Id,
               JobTitle = per.Person.JobTitle,
               CanSendMeetingRequest = CheckMeetingSettings(6327,per.Person.Id)
           });

public bool CheckMeetingSettings(int,int)
{
  ///code I have written.
} 
```

你必须使用`AsEnumerable()`这样你才能预成型`CheckMeetingSettings`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T08:08:01.623

使用 Entity Framework，您不能将在数据库服务器上运行的代码与在应用程序内部运行的代码混合在一起。编写这样的查询的唯一方法是在 SQL Server 中定义一个函数来实现您编写的代码。

可以在[此处](http://blogs.microsoft.co.il/blogs/gilf/archive/2009/05/28/entity-sql-user-defined-functions-in-entity-framework-4.aspx)找到有关如何将该函数公开给 LINQ to Entities 的更多信息。

或者，您必须`CheckMeetingSettings`在初始查询之外调用，如 Eranga 所示。

# android - android.database.Cursor registerContentObserver

> ID：10024746
> 
> 赞同：2
> 
> 时间：2012-04-05T07:58:45.857
> 
> 标签：android, sqlite

这里是 registerContentObserver 的描述：

abstract void registerContentObserver(ContentObserver 观察者)

注册一个观察者，当支持此游标的内容发生更改时调用该观察者。

这是我的代码：

```
Cursor cursor = (SQLiteCursor)dataBase.query(projection, null, null, null);
cursor .registerContentObserver(new ChangeObserver());

private class ChangeObserver extends ContentObserver {
    public ChangeObserver() {
        super(new Handler());
    }

    @Override
    public boolean deliverSelfNotifications() {
        return true;
    }

    @Override
    public void onChange(boolean selfChange) {
        Log.d(Constants.TAG, "ChangeObserver.onChange");
    }
} 
```

但是，当我更改数据库（删除/更新/添加行）时，永远不会调用 ContentObserver 的 onChange 方法。所以我想知道什么情况会触发 ContentObserver ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T09:17:11.327

基本上，这是文档中的一个问题，正如[这篇文章](https://stackoverflow.com/a/6470941/1337498)中所解释的那样——感谢@mikerowehl 进行研究！

它归结为主要用于描述与 ContentProviders/ContentResolvers 一起使用的游标行为的文档。如果不涉及这些类，并且没有按照@Renard 的建议进行操作，则 ContentObserver 将不会得到回调。尽管文件说了什么。

*因此，原始 SQLiteCursor 与那些花哨*的游标有点“不良关系” ...... :)

# asp.net - 来自 trirand 的 jqChart - asp.net webforms

> ID：10024747
> 
> 赞同：0
> 
> 时间：2012-04-05T07:58:45.997
> 
> 标签：asp.net, jqchart

有人对 JQchart 有任何经验吗？ [JQChart](http://www.trirand.net/demochartaspnet.aspx) 网站上的演示都是硬编码的，我很想找到一些从数据库动态加载数据的示例或教程。

jqgrid 摇滚，所以我希望他们的图表也一样

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:07:37.697

他们在他们的网站上有示例，展示了如何在后面的代码中将其加载到页面上。这些方法可以很容易地转换为动态加载信息[asp.net 演示](http://www.trirand.net/demochartaspnet.aspx)

# java - 关于 JDBC ResultSet 的建议

> ID：10024752
> 
> 赞同：1
> 
> 时间：2012-04-05T07:59:17.030
> 
> 标签：java, jdbc, scrollableresults

我有员工表和一个实体类，
我的任务是我需要两次结果集中（**可滚动类型**
）中的员工表数据， 在这种情况下，第二次使用数据会更好->

1：在第一次遍历结果集时，创建实体类的实例并将其存储在List中。
或
2：第一次迭代后调用结果集的 first() 方法返回第一行并第二次使用数据。

哪个选项将消耗更少的时间和资源。
如果您有更好的建议，请提供。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:01:58.307

除非这是关于非常大的结果集，否则您可能最好将整个 JDBC 消耗`ResultSet`到内存中并在 a`java.util.List`而不是 a 上操作`java.sql.ResultSet`，原因如下：

1.  该列表对开发人员更友好
2.  可以立即释放数据库资源（不易出错）
3.  在 Java 中，您可能不会用完 1000 行的内存。
4.  在可滚动对象上操作时可能会犯很多错误`ResultSet`，因为各种 JDBC 驱动程序实现此功能的方式略有不同。

您可以使用工具来使用 JDBC 结果集。例如[Apache DbUtils](http://commons.apache.org/dbutils/examples.html)：

```
QueryRunner run = new QueryRunner(dataSource);
ResultSetHandler<List<Person>> h
  = new BeanListHandler<Person>(Person.class);
List<Person> persons = run.query("SELECT * FROM Person", h); 
```

[jOOQ](http://www.jooq.org)（3.0 语法）：

```
List<Person> list =
DSL.using(connection, sqldialect)
   .fetch("SELECT * FROM Person");
   .into(Person.class); 
```

[春天 JdbcTemplate](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/core/JdbcTemplate.html)：

```
JdbcTemplate template = // ...
List result = template.query("SELECT * FROM Person", rowMapper); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:03:43.633

缓存您从数据库中检索的数据。即使驱动程序在自己的级别上提供缓存，它也总是比轮询更好。如果不再需要它，您可以随时撤回它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T08:11:37.907

也许`Map`通过他们的主键使用员工会有所帮助？

如果您描述了为什么您认为您需要多次迭代列表，那么我们会看看那里是否有更好的算法来首先摆脱第二次交互。

# erlang - 将 gen_fsm 状态更改为不同模块中的函数

> ID：10024758
> 
> 赞同：0
> 
> 时间：2012-04-05T07:59:43.410
> 
> 标签：erlang, gen-fsm

我们有一个相当大的 USSD 应用程序，它使用 Erlang 的 gen_fsm 模块来管理菜单选项。

当前版本有一个`menus_fsm.erl`包含 5000 多行 gen_fsm 相关代码的文件。我们的下一个版本让我们有机会将其拆分`menus_fsm.erl`为单独的文件，以使其在未来更易于维护。

在旧版本中，为了显示帮助菜单，我们执行以下操作（`help_menu/1`从显示主菜单的未显示代码中调用）：

```
-module(menus_fsm).    
% Snipped some irrelvant code

help_menu(StateData) ->
    % Display the first menu
    send_menu(StateData, "Please Select:\n1\. Option 1\n2\. Option 2"),
    {next_state, waitHelpMenuChoice, StateData, ?MENU_TOUT};

waitHelpMenuChoice(Params, StateData) ->
    io:format("Got Help menu response: ~p", [Params]),
    doTerminate(ok,"Help Menu", StateData). 
```

我遗漏了很多显示 FSM 入口点的代码等等。

在新版本中，我们希望将`help_menu/1`和`waitHelpMenuChoice/2`移至一个新模块`help_menu`，该模块从 调用`menus_fsm`，如下所示：

```
-module( help_menu ).    
% Snipped some irrelevant code

help_menu(StateData) ->
    menus_fsm:send_menu(StateData, "Please Select:\n1\. Option 1\n2\. Option 2"),
    {next_state, waitHelpMenuChoice, StateData, ?MENU_TOUT};

waitHelpMenuChoice(Params, StateData) ->
    io:format("Got Help menu response: ~p", [Params]),
    menus_fsm:doTerminate(ok,"Help Menu", StateData). 
```

问题出在这行`{next_state, waitHelpMenuChoice, StateData, ?MENU_TOUT};`:`gen_fsm`期望`waitHelpMenuChoice`在模块`menus_fsm`中，这将我带回到我们开始的地方。

我试图用

```
{next_state, fun help_menu:waitHelpMenuChoice/2, StateData, ?MENU_TOUT}; 
```

但这只会导致如下错误： `{badarg,[{erlang,apply,[conv_fsm,#Fun<help_menu.waitHelpMenuChoice.2>,[]]}`

有人对如何解决这个问题有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:20:36.417

也许您可以使用[http://www.erlang.org/doc/man/gen_fsm.html#enter_loop-6](http://www.erlang.org/doc/man/gen_fsm.html#enter_loop-6)来做到这一点？不确定在另一个 fsm 中调用它是否可行，但可能值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:24:41.143

我设法找到了解决我自己问题的方法。如果这看起来很明显，那可能是因为我对 Erlang 有点陌生。

`wait_for_menu_response/2`我向模块添加了一个新函数，该函数`menus_fsm`代表其他模块处理状态转换。

```
-module(menus_fsm),
-export([wait_for_menu_response/2]).
% ...snip...
wait_for_menu_response(Params, {Function, StateData}) ->
    Function(Params, StateData). 
```

然后`help_menu`模块更改如下：

```
-module( help_menu ).    
% ...snip...

help_menu(StateData) ->
    menus_fsm:send_menu(StateData, "Please Select:\n1\. Option 1\n2\. Option 2"),
    {next_state, wait_for_menu_response, {fun waitHelpMenuChoice/2, StateData}, ?MENU_TOUT}.

waitHelpMenuChoice(Params, StateData) ->
    io:format("Got Help menu response: ~p", [Params]),
    menus_fsm:doTerminate(ok,"Help Menu", StateData). 
```

所以当它调用时`gen_fsm`留在`menus_fsm`模块内`wait_for_menu_response`，但`wait_for_menu_response`现在可以自由调用`help_menu:waitHelpMenuChoice/2`。`help_menu:waitHelpMenuChoice/2`不需要以任何方式修改。

实际上，在我的最终版本中，该`menus_fsm:send_menu`函数被修改为接受`fun waitHelpMenuChoice/2`作为其第三个参数，因此该`help_menu`函数简单地变为：

```
help_menu(StateData) ->
    menus_fsm:send_menu(StateData, "Please Select:\n1\. Option 1\n2\. Option 2", 
        fun waitHelpMenuChoice/2). 
```

但我认为我上面的解释更好地说明了这个想法。

# c# - 在gridview中总计小计

> ID：10024761
> 
> 赞同：2
> 
> 时间：2012-04-05T07:59:53.317
> 
> 标签：c#, oracle, gridview

我需要在我的项目中显示小计的数量，但我不知道如何在网格视图中显示它和小计的数量。有人能帮助我吗？我需要像这样展示它：

## 教师姓名 A 班 B 班 C 班

```
 Mia           23       32       24
                  35       35       20
                 ----------------------
Sub Total :       58       67       44
                 ----------------------
  Stephen         36       25       34     
                  22       31       19
                 ----------------------
Sub Total :       58       56       43
                 ----------------------
    Total :       116      123      87 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T08:03:55.410

是的，您可以实现这一点，您需要遵循本文中给出的详细信息：Group [Total，Grand Total in GridView](http://www.dotnettwitter.com/2011/02/group-total-grand-total-in-grid-view.html#)

结束后你会得到像

![在此处输入图像描述](../Images/581f1fe77a63481a69628f99d4210024.png)

# asp.net-mvc-3 - MVC3 - 显示存储值的下拉列表

> ID：10024762
> 
> 赞同：0
> 
> 时间：2012-04-05T08:00:04.460
> 
> 标签：asp.net-mvc-3, drop-down-menu

我有一个更新页面，有一个字段调用成分名称，下拉列表列出了所有成分，但是如何绑定存储在每个成分中的值以用于配方。

在我的控制器中，我有以下代码，它将在下拉列表中列出所有成分；

```
foreach (RecipeIngredient recipeIngredient in recipe.RecipeIngredientList)
{
    rIngredients.Add(recipeIngredient);
} 
```

在更新页面上，我希望文本框显示一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:40:41.907

`<%: Html.DropDownList("BusinessTypeId", new SelectList(Model.BusinessTypes, "BusinessTypeId", "BusinessTypeName"), "Select an Option")%>`

这里的值是 BusinessTypeId，名称是 BusinessTypeName

```
 foreach (BusinessType businessType in _businessDetails.BusinessTypes)
                {

                        businessType.BusinessTypeName = businessType.SpanishBusinessTypeName;

                    businessTypeLst.Add(businessType);
                } 
```

//页

var _ddValue = $('#BusinessTypeId').val();

将其分配给文本框

$('#txtboxId').val(_ddValue );

# mysql - 将 mysql 数据库连接到 Easy Query Builder

> ID：10024763
> 
> 赞同：0
> 
> 时间：2012-04-05T08:00:06.363
> 
> 标签：mysql, sql

我刚刚下载了 Easy query Builder，我正在尝试将它与我当前的 mysql 数据库连接，它们有几种连接类型的选项：ODBC、OLE DB、MS SQL Server、ORACLE SQL Server，我不确定到底该选择哪一个或是否我错过了任何我非常感谢帮助的东西

# objective-c - 解析 NSString 中的真实路径，不带“..”（以前的目录引用）

> ID：10024765
> 
> 赞同：1
> 
> 时间：2012-04-05T08:00:09.307
> 
> 标签：objective-c, cocoa, path, nsstring

好吧，让我解释一下……

我在`NSString`其中存储了一个和一个路径，就像这样（看起来很奇怪）：

> /A/B/C/../D/../E/F

这实际上与以下内容相同：

> /A/B/E/F

我想要的是将第一种路径格式（其中包含`..`s）转换为第二种格式。

有没有类似的内置 Cocoa 功能？

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T08:06:58.443

刚找到！:-)

```
-(NSString *)stringByStandardizingPath; 
```

> 返回通过从接收器中删除无关路径组件生成的新字符串。

[NSString 类参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/stringByStandardizingPath)。

# ios - 有没有办法以编程方式为 ios 应用程序配置通知显示设置？

> ID：10024767
> 
> 赞同：1
> 
> 时间：2012-04-05T08:00:18.620
> 
> 标签：ios, notifications, apple-push-notifications

我在两部 iphone 上对其进行了测试：第一次设置为“无”，第二次设置为“横幅”（看起来很奇怪）。我想知道是否有办法在应用程序中明确编码？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:52:39.530

现在我知道没有办法做到这一点。

# objective-c - viewWillAppear 方法没有执行代码

> ID：10024769
> 
> 赞同：0
> 
> 时间：2012-04-05T08:00:19.943
> 
> 标签：objective-c, ios, xcode

我遇到了这个问题，`viewWillAppear`当我的视图显示时，我的方法中的代码没有执行。我在某处搜索它，我认为问题在于`Class Identity`，因为我的视图中有一个选项卡视图控制器，所以视图和选项卡视图控制器的类标识应该相同。在哪里可以找到代码标识？我想不通。提前感谢任何有用的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:11:22.750

尝试使用以下内容来确定是否`viewWillAppear`未正确触发，或者您的代码中的某些内容无法正常工作。

```
- (void)viewWillAppear:(BOOL)animated
{
    NSLog(@"viewWillAppear");
} 
```

# sql - 在 Oracle 中使用 IN 和 OUT 参数调用存储过程

> ID：10024771
> 
> 赞同：52
> 
> 时间：2012-04-05T08:00:20.150
> 
> 标签：sql, oracle11g

我有这个程序：

```
CREATE OR REPLACE PROCEDURE PROC1(invoicenr IN NUMBER, amnt OUT NUMBER)
AS BEGIN
SELECT AMOUNT INTO amnt FROM INVOICE WHERE INVOICE_NR = invoicenr;
END; 
```

因此，当我这样运行它时，它绝对不会返回任何内容：

```
DECLARE
    amount NUMBER;
BEGIN
    PROC1(1000001, amount);
    dbms_output.put_line(amount);
END; 
```

顺便说一句，我使用 DreamCoder for Oracle。程序本身或我调用它的方式有问题吗？INVOICE 表中有一个 INVOICE_NR 等于 1000001 的条目。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-06-16T06:52:53.830

如果在整个代码之前将服务器输出设置为 ON 模式，它可以工作，否则 put_line() 将不起作用。试试看！

代码是，

```
set serveroutput on;
CREATE OR REPLACE PROCEDURE PROC1(invoicenr IN NUMBER, amnt OUT NUMBER)
AS BEGIN
SELECT AMOUNT INTO amnt FROM INVOICE WHERE INVOICE_NR = invoicenr;
END; 
```

然后按原样调用函数：

```
DECLARE
amount NUMBER;
BEGIN
PROC1(1000001, amount);
dbms_output.put_line(amount);
END; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-04T22:46:24.840

我有同样的问题。我使用了一个触发器，在那个触发器中我调用了一个过程，该过程将一些值计算为 2 个 OUT 变量。当我尝试在触发器主体中打印结果时，屏幕上没有显示任何内容。但后来我通过在一个函数中创建 2 个局部变量来解决这个问题，用它们计算我需要的东西，最后，将这些变量复制到你的 OUT 过程变量中。我希望它会是有用的和成功的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T05:54:17.733

转到菜单工具 -> SQL 输出，运行 PL/SQL 语句，输出将显示在 SQL 输出面板上。

# php - 按提交显示错误后编辑用户

> ID：10024774
> 
> 赞同：-1
> 
> 时间：2012-04-05T08:00:32.673
> 
> 标签：php, edit

我的编辑用户有问题。单击提交按钮后，它将显示错误“您的 SQL 语法有错误；请检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法”这是错误代码它。我不知道我的代码发生了什么。我确实尝试调试它很多次。

```
<?php
//set session start
session_start();

function renderForm($UID,$Username,$Unitno,$Cont,$PW,$UEmail,$UPay,$JD,$PD)
    {?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><link href="styles/style1.css" media="screen" rel="stylesheet" title="CSS" type="text/css" /></head><body><!-- Begin Container -->
    <div id="container">
        <!-- Begin Masthead -->
        <div id="masthead">

        </div>
        <!-- End Masthead -->

        <!-- Begin Navigation -->
        <div id="navigation">
            <ul>
                <li><a href="homepage.php">Home Page</a></li>
                <li><a href="notice.php">Notice</a></li>
                <li><a href="feedback.php">Feedback</a></li>
                <li><a href="user.php">User</a></li>
                <li><a href="logout.php">Logout</a></li>
            </ul>
        </div>
        <!-- End Navigation -->

        <!-- Begin Content -->
        <div id="content">
            <!-- #BeginEditable "content" -->
            <h1>Edit User</h1>

            <hr/>

            You are on: 
                <a href="user.php">User</a>

            <br/>

            <form action="" method="post">
                <table align="center">
                <tr>
                <p align = "center"><strong>User ID: </strong> <?php echo $UID?></p><br/>
                    <td align = "right">

                    <strong>User Name: </strong> <input type="text" name="UserName" value = "<?php echo $Username; ?>" /><br/>
                    <strong>Unit No: </strong> <input type="text" name="UnitNo" value = "<?php echo $Unitno; ?>" /><br/>
                    <strong>Contact: </strong> <input type="text" name="Contact" value = "<?php echo $Cont; ?>" /><br/>
                    <strong>Password: </strong> <input type="text" name="Password" value = "<?php echo $PW; ?>" /><br/>
                    <strong>Email: </strong> <input type="text" name="UserEmail" value = "<?php echo $UEmail; ?>" /><br/>
                    <strong>User Pay: </strong> <input type="text" name="UPayment" value = "<?php echo $UPay; ?>" /><br/>
                    <strong>Join Date: </strong> <input type="text" name="JoinDate" value = "<?php echo $JD; ?>" /><br/>
                    <strong>Pay Date: </strong> <input type="text" name="PayDate" value = "<?php echo $PD; ?>" /><br/>

                    <input type="submit" name="submit" value="Submit">

                    </td>
                    </tr></table>
            <br/>

            <hr/>
        </div>
        <!-- End Content -->

        <!-- Begin Footer -->
        <div id="footer">
            <p>
                Copyright &copy; 2012 Condominium Management. All Rights Reserved.
            </p>
        </div>
        <!-- End Footer -->
    </div>
    <!-- End Container -->
</body>
</html><?php

include ("connection_db.php");

                        if(isset($_POST['submit']))
                        {

                        if (is_numeric($_POST['UID']))
                        {
                            $UserID = $_POST['UserID'];
                            $UserName= mysql_real_escape_string(htmlspecialchars($_POST['UserName']));
                            $UnitNo = mysql_real_escape_string(htmlspecialchars($_POST['UnitNo']));
                            $Contact = mysql_real_escape_string(htmlspecialchars($_POST['Contact']));
                            $Password= mysql_real_escape_string(htmlspecialchars($_POST['Password']));
                            $UEmail = mysql_real_escape_string(htmlspecialchars($_POST['UserEmail']));
                            $UPayment = mysql_real_escape_string(htmlspecialchars($_POST['UPayment']));
                            $JoinDate= mysql_real_escape_string(htmlspecialchars($_POST['JoinDate']));
                            $PayDate = mysql_real_escape_string(htmlspecialchars($_POST['PayDate']));
                        }
                        else
                        {
                            $sql = "UPDATE User SET UserName='$UserName', UnitNo='$UnitNo', Contact='$Contact', Password='$Password', UserEmail='$UEmail', UPayment='$UPayment', JoinDate='$JoinDate', PayDate='$PayDate' where UserID = $UserID";

                            mysql_query($sql) or die(mysql_error());
                            header("Location:user.php");
                        }
                        }
                        else
                        {
                        if(isset($_GET['UserID']) && is_numeric($_GET['UserID']) && $_GET['UserID']>0)
                        {
                        $uid = $_GET['UserID'];
                        $result = mysql_query("SELECT * FROM User Where UserID = $uid") or die (mysql_error());
                        $row = mysql_fetch_array($result);

                        if($row)
                        {
                        $UID = $row['UserID'];
                        $Username = $row['UserName'];
                        $Unitno = $row['UnitNo'];
                        $Cont = $row['Contact'];
                        $PW = $row['Password'];
                        $UEmail = $row['UserEmail'];
                        $UPay = $row['UPayment'];
                        $JD = $row['JoinDate'];
                        $PD = $row['PayDate'];

                        renderForm($UID, $Username, $Unitno, $Cont, $PW, $UEmail, $UPay, $JD, $PD, '');
                        }
                        else
                        {
                        echo "No result";
                        }
                        }
                        else
                        {
                        echo 'Error';
                        }
                        }?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:08:30.837

您确实应该打印出 sql 语句：

`$sql = "UPDATE User SET UserName='$UserName', UnitNo='$UnitNo', Contact='$Contact', Password='$Password', UserEmail='$UEmail', UPayment='$UPayment', JoinDate='$JoinDate', PayDate='$PayDate' where UserID = $UserID";`

```
echo "MY QUERY: ".$sql;
mysql_query($sql) or die(mysql_error());
header("Location:user.php"); 
```

请发布您的结果，我想我们可以轻松检测到错误。

**更新**：确保`$UserID`已定义（非空）并添加分号：

`$sql = "UPDATE User SET UserName='$UserName', UnitNo='$UnitNo', Contact='$Contact', Password='$Password', UserEmail='$UEmail', UPayment='$UPayment', JoinDate='$JoinDate', PayDate='$PayDate' where UserID = '$UserID' ;";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:13:10.173

我看到两个错误。

1.  您引用了`$_POST['UserID']`，但没有名为 UserID 的字段，只有 UID。
2.  您使用在 UPDATE 语句中调用的变量`$UserID`，但该变量仅由其他代码路径设置，因此当 UPDATE 运行时，它尚未初始化，因此可能是一个空字符串。

我认为这是导致您的问题的第二个问题。您的 UPDATE 语句可能以`where UserID =`. 但是，正如其他人所说，唯一可以确定的方法是打印出您的查询，看看它有什么问题。

一般来说，要调试您的 SQL 问题，您应该：

1.  修改您的代码以打印出所有 SQL 查询。
2.  检查查询，看看您是否可以分辨出哪个有问题以及错误在哪里
3.  如果没有，请尝试手动运行它们以查看哪些有效，哪些无效
4.  在查询字符串中找到错误后，请查看创建它导致该错误的问题所在。
5.  修理它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-25T16:52:42.070

替换`where UserID = $UserID"`为`where UserID = '$UserID';"`不要忘记那些引号和分号

# jquery - 使用对话框的功能需要包含哪个JS文件

> ID：10024775
> 
> 赞同：0
> 
> 时间：2012-04-05T08:00:36.913
> 
> 标签：jquery, jquery-ui, include

我想打开一个对话框以在单击按钮时进行确认。为此，我使用以下代码

```
$('#dialog-box').dialog({
                show : 'drop', 
```

……

其中#dialog-box 是按钮的 ID。现在我收到一个错误： **Uncaught TypeError: Object [object Object] has no method 'dialog'**

需要包含哪个 js 文件才能消除此错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:38:58.070

该[`.dialog()`](http://jqueryui.com/demos/dialog/)函数是[JQuery UI](http://jqueryui.com/docs/Getting_Started)的一部分。

[这是来自 Google 的 CDN 的库](https://developers.google.com/speed/libraries/#jquery-ui)。
为确保获得 JQuery UI 所需的一切，您可以从[此处](http://jqueryui.com/download)下载 或使用他们的在线托管脚本从[此处](http://code.jquery.com/)。

[这是一个示例脚本](http://jsfiddle.net/3neQC/)

请注意我检索库然后执行脚本的顺序：

1.  jQuery
2.  jQuery 用户界面
3.  初始化对话框

```
<!-- JQuery UI stylesheet --> 
<link rel="stylesheet" href="http://code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css" type="text/css" media="all" />

<!-- First get JQuery -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<!-- Then get JQuery UI -->
<script src="http://code.jquery.com/ui/1.8.18/jquery-ui.min.js"></script>

<script>
    $(function() {
        $( "#dialog-box" ).dialog({
            width: "auto",
            height: "auto"
        });
    });
</script>

<div id="dialog-box" title="Getting down with dialog boxes">
    <p>This is how you initialize and use the dialog box.</p>
</div> 
```

# sharepoint - 重新启动 Sharepoint 命令行管理程序

> ID：10024781
> 
> 赞同：0
> 
> 时间：2012-04-05T08:01:00.927
> 
> 标签：sharepoint, powershell

我想知道是否可以重新启动 Sharepoint Management Shell，以便我可以重新加载新的应用程序域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:26:15.273

没关系，我找到了，只是使用：Powershell.exe -File script.ps1

# ruby-on-rails - 在 Redis 数据库中保存每日价格统计信息

> ID：10024785
> 
> 赞同：0
> 
> 时间：2012-04-05T08:01:14.160
> 
> 标签：ruby-on-rails, redis

我收到了来自服务提供商的**报价**，我需要根据以下内容构建统计数据：

*   报价**开始日期**
*   优惠**期限**
*   提供**目的地**
*   报价**_**

基本上，它将用于为特定目的地和持续时间构建日期价格图。

您建议将其存储在 Redis 数据库中的方式是什么？

![最后应该怎么看](../Images/013ae1242a6be2f871673b21efd23242.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:40:18.923

我建议制作 type 的钥匙`Sorted Set`。

*   每个*键*都是目标和持续时间的组合，例如`offer:newyork:7`.

*   每个*成员*（在键中）包含价格*值和日期**分数*（作为[Unix 时间](http://redis.io/commands/time)）。

通过这种方式，您可以查询您事先知道的特定目的地和持续时间（另一个选项，部分可接受但取决于 - 通过`KEYS`命令获取可用密钥），并获取按日期排序的所有报价 ( `ZRANGEBYSCORE ... WITHSCORES`)。

# asp.net - 基于模板自定义列表视图中的项目

> ID：10024786
> 
> 赞同：0
> 
> 时间：2012-04-05T08:01:26.077
> 
> 标签：asp.net, xslt, dotnetnuke, dotnetnuke-6

我必须在列表视图/网格视图中显示产品及其描述，就像任何其他 eComm 应用程序一样。用户希望在显示产品时设置他想要显示的产品的布局和属性。

我打算使用模板，并提供用户基于模板生成模板（XSLT），布局和属性会显示，但我不知道天气是否可能。请指导

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:26:41.570

看看 www.ventrian.com 如何做他们的模块——尤其是 NewsArticles 系统。

他们没有为用户提供 XSLT 文件来编辑以控制布局，而是拥有自己的模板/令牌系统。有很多模块使用这种策略，如果您期望“用户”来管理它们，XSLT 就有点严重了。即使是很多使用 DNN 为其他专业人士构建网站的人也难以理解 XML 转换。

但您的问题的答案肯定是肯定的——您可以提供转换 XML 的 XSLT 文件，因为它的工作原理与 ASP .NET 一样。但是，大多数流行的模块都为用户提供了一种自定义布局的方法，但并不像这样复杂。

# oracle - Oracle 11gr2 在 hp-ux 上检查内核参数失败

> ID：10024793
> 
> 赞同：0
> 
> 时间：2012-04-05T08:01:57.070
> 
> 标签：oracle, oracle11g, hp-ux

我正在 64 位 itanium HP-UX (v 11.31) 系统上安装 oracle 11gR2（用于 HP Operation Manager 9）。根据安装要求，我已经更改了内核参数，但是当我开始安装过程时它无法识别它们。

在我设置的参数下方：

```
Parameter      ( Manual)                    (on server)
-------------------------------------------------------------

fs_async            0                           0                                            
ksi_alloc_max       (nproc*8)                   10240*8 = 81920                                 
executable_stack    0                           0                          
max_thread_proc     1024                        3003                                           
maxdsiz             0x40000000  (1073741824)    2063835136                            
maxdsiz_64bit       0x80000000  (2147483648)    2147483648                                           
maxfiles            256 (a)                     4096                                    
maxssiz             0x8000000   (134217728)     134217728                                     
maxssiz_64bit       0x40000000  (1073741824)    1073741824                                       
maxuprc             ((nproc*9)/10)              9216                          
msgmni              (nproc)                     10240                          
msgtql              (nproc)                     32000                          
ncsize              35840                       95120                        
nflocks             (nproc)                     10240                        
ninode              (8*nproc+2048)              83968                         
nkthread            (((nproc*7)/4)+16)          17936               
nproc               4096                        10240                         
semmni              (nproc)                     10240                         
semmns              (semmni*2)                  20480                         
semmnu              (nproc-4)                   10236                         
semvmx              32767                       65535                         
shmmax   size of memory or 0x40000000 (higher one)   1073741824        
shmmni              4096                          4096                        
shmseg              512                           1024                        
vps_ceiling         64                            64 
```

如果这可以帮助：

```
[root@HUG30055 /] # swapinfo 
            Kb      Kb      Kb   PCT  START/      Kb
TYPE      AVAIL    USED    FREE  USED   LIMIT RESERVE  PRI  NAME
dev     4194304       0 4194304    0%       0       -    1  /dev/vg00/lvol2
dev     8388608       0 8388608    0%       0       -    1  /dev/vg00/lvol10
reserve       -  742156 -742156
memory  7972944 3011808 4961136   38%

[root@HUG30055 /] # bdf /tmp
Filesystem          kbytes    used   avail %used Mounted on
/dev/vg00/lvol6    4194304 1773864 2401576   42% /tmp 
```

# c++ - C ++“虚拟函数但没有虚拟析构函数”

> ID：10024796
> 
> 赞同：42
> 
> 时间：2012-04-05T08:02:06.513
> 
> 标签：c++

我有一个基类`Media`和几个派生类，即`DVD`,`Book`等...基类写成：

```
class Media{
    private:
        int id;
        string title;
        int year;
    public:
        Media(){ id = year = 0; title = ""; }
        Media(int _id, string _title, int _year): id(_id), title(_title), year(_year) {}
//      virtual ~Media() = 0;
        void changeID(int newID){ id = newID; }
        virtual void print(ostream &out);
}; 
```

问题是：没有析构函数，GCC 给了我一堆警告`class has virtual functions but non-virtual destructor`，但仍然可以编译，我的程序运行良好。现在我想摆脱那些烦人的警告，所以我通过添加一个虚拟析构函数来满足编译器，结果是：它没有编译，错误：

```
undefined reference to `Media::~Media()` 
```

使析构函数纯虚拟并不能解决问题。那么出了什么问题呢？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-05T08:03:34.623

您还需要定义虚拟析构函数，而不仅仅是添加它。

```
//Media.h
class Media{
    //....
    virtual ~Media() = 0;
};

//Media.cpp
#include "Media.h"
//....
Media::~Media() {}; 
```

您收到警告的原因是所有将派生的类都应具有虚拟或受保护（信用@Steve）析构函数，否则通过指向基类的指针删除实例会导致未定义的行为。

**请注意**，您必须为析构函数提供定义，即使它们是纯虚拟的。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-04-05T10:02:06.237

> 问题是：没有析构函数，GCC 给了我一堆警告“类具有虚函数但非虚析构函数”，但仍然可以编译并且**我的程序运行良好**

这在现代 C++ 中是一个令人讨厌的警告，但在旧的对象样式 C++ 中它通常是正确的。

问题在于您的对象被破坏的方式。一个简单的测试：

```
#include <iostream>

class Base {};
class Derived: public Base { public: ~Derived() { std::cout << "Aargh\n"; } };

int main() {
  Base* b = new Derived();
  Derived* d = new Derived();

  delete d;
  delete b;
} 
```

这打印：

```
Aargh 
```

是的，只有一次。

问题是，当您调用`delete`type 的变量时`Base*`，会调用该`Base::~Base()`方法。如果是`virtual`，则调用将动态分派到最终方法（基于动态类型），在这种情况下`Derived::~Derived()`，但如果不是，则`Derived::~Derived()`永远不会调用，因此永远不会执行。

因此，如果您希望`delete`在基本类型上调用（或使用智能指针），那么您需要添加`virtual ~Base() {}`它们的类定义。这就是为什么当你创建一个没有`virtual`析构函数的多态类时 gcc 会警告你。

* * *

*注意：时间变了，从那以后我`-Wdelete-non-virtual-dtor`在 Clang 中实现，它也在 gcc 中复制。*

*`-Wnon-virtual-dtor`对库编写者有用（因为它在基类上发出警告），但可能有更高的误报率；另一方面[`-Wdelete-non-virtual-dtor`](https://gcc.gnu.org/wiki/VerboseDiagnostics#delete-non-virtual-dtor)，在调用站点触发，并且误报率要低得多（您通常可以通过`final`删除类的“多态”属性来解决这个问题）。*

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-05T08:05:58.850

您注释掉的是析构函数的纯虚拟声明。这意味着必须在派生类中重写该函数才能实例化该类的对象。

您想要的只是将析构函数定义为虚函数：

```
virtual ~Media() {} 
```

在 C++ 11 或更高版本中，通常最好将其定义为默认值，而不是使用空主体：

```
virtual ~Media() = default; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-05T08:04:56.277

您应该实现虚拟析构函数，而不是使其成为纯虚拟的。

查看[这个](https://stackoverflow.com/questions/630950/pure-virtual-destructor-in-c)类似的问题（从虚拟析构函数错误的角度来看可能相同，而不是警告）以获取更多信息。

编辑：更通用的解决方案，回复 LuchianGrigore 的评论（感谢您指出）

您还可以将析构函数设为纯虚拟并按照上述问题中的说明实现。

在你的类中使用虚拟析构函数应该是为了防止基类的实例化（即当你没有其他纯虚拟方法来使类抽象时）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T08:08:01.407

先取消注释声明，然后尝试在类声明后添加以下行

```
Media::~Media(){} 
```

# sharepoint - Sharepoint 2010 向托管元数据列添加多个值

> ID：10024808
> 
> 赞同：1
> 
> 时间：2012-04-05T08:02:57.557
> 
> 标签：sharepoint, sharepoint-2010, metadata

下面的代码有问题只会将 TestTaxonomyControl.Text 中的最新值添加到元数据列中。（打开多个值）

```
 TaxonomyFieldValueCollection values = new TaxonomyFieldValueCollection(String.Empty);
            values.PopulateFromLabelGuidPairs(TestTaxonomyControl.Text);
         TaxonomyField entKeyword = (TaxonomyField)item.Fields["Metadata"];
            foreach (TaxonomyFieldValue value in values)
            {  
                TaxonomyFieldValue term = new TaxonomyFieldValue("1;#" + value.Label + "|" + value.TermGuid);

                entKeyword.SetFieldValue(item, term);
            }
            item.Update(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:02:28.217

我会说你只需要这样的东西：

```
TaxonomyFieldValueCollection values = new TaxonomyFieldValueCollection(String.Empty);             
values.PopulateFromLabelGuidPairs(TestTaxonomyControl.Text); 
item["Metadata"] = values;
item.Update(); 
```

# forms - 需要将用户输入从一个表单传递到同一页面上的另一个表单

> ID：10024809
> 
> 赞同：0
> 
> 时间：2012-04-05T08:03:02.287
> 
> 标签：forms, variables

我根本不知道 .php，但在我的一个网站上遇到了问题。1\. 单页有两种支付处理形式。2\. 每个表单都有一个单独的提交按钮。

**问题。** 我需要将一些用户输入从表格一传递到表格二。 **笔记。**这是在同一页上。

**表格 1**

```
 <input type="hidden" name="payfast_url" id="payfast_url" value="https://www."/>
    <input type="hidden" name="merchant_id" id="merchant_id" value="xxxxx"/>
    <input type="hidden" name="merchant_key" id="merchant_key" value="xxxxx"/>
    <input type="hidden" name="return_url" id="return_url" value="payment_finished.html"/>
    <input type="hidden" name="cancel_url" id="cancel_url" value="payment_cancelled.html"/>
    <input type="hidden" name="notify_url" id="notify_url" value="/payment_notify.html"/>
    <input type="hidden" name="item_name" id="item_name" value="Product name"/>
    <input type="hidden" name="item_description" id="item_description"value="description"/>
    <input type="hidden" name="email_confirmation" id="email_confirmation" value="1"/>
    <input type="hidden" name="confirmation_address" id="confirmation_address" value=""/>
    <input type="hidden" name="amount" id="amount" value="price" />
    <input type="hidden" name="payment_id" id="payment_id" value="website_sales" />  
    <span class="formlable">Name</span><input name="name_first" id="name_first"type="text" value="" class="forminput"/>
    <span class="formlable">Surname</span> <input name="name_last" id="name_last" type="text" value="" class="forminput"/>
    <span class="formlable">E-Mail</span>  <input type="text" name="email_address" id="email_address" value="" class="forminput"/>
    <span class="formlable">Post Address</span> <input name="custom_str1" id="custom_str1" type="text" value="" class="forminput"/>
    <span class="formlable">City</span><input name="custom_str2" id="custom_str2" type="text" value="" class="forminput"/>
    <span class="formlable">Postal Code</span><input name="custom_str3" id="custom_str3" type="text" value="" class="forminput"/>
<input type="button" value="EFT Payment" onclick="quickPostPaymentToPayFast(document.getElementById('payfast_url').value);" id="button" method="post"/> 
```

**表格 2**

```
<form name="CreditCards" action="https://www.mygate.co.za/.cfm" method="post"/>
<input type="hidden" name="Mode" id="Mode" value="0"/>
<input type="hidden" name="txtMerchantID" id="txtMerchant" value="xxxxxxx"/>
<input type="hidden" name="txtApplicationID" id="txtApplicationID" value="xxxxxxxx"/>
<input type="hidden" name="txtMerchantReference" id="txtMerchantReference" value="1234"/>
<input type="hidden" name="txtPrice" id="txtPrice" value="1234"/>
<input type="hidden" name="txtCurrencyCode" id="txtCurrencyCode" value="ZAR"/>
<input name="txtRedirectSuccessfulURL"  value="success_failure.php" readonly="true" type="hidden"/>
<input name="txtRedirectFailedURL" value="success_failure.php" readonly="true" type="hidden"/ >           
<input type="hidden" name="txtQty" id="txtQty" value="1"/>
<input type="hidden" name="txtItemDescr" id="txtItemDescr" value="descr"/>
<input type="hidden" name="txtItemAmount" id="txtItemAmount" value="449.00"/>
<input type="hidden" name="txtRecipient"         value="<?php $_POST["name_first"]; ?>"/>
<input type="hidden" name="txtShippingAddress1"  value="<?php $_POST["name_last"]; ?>"/>
<input type="hidden" name="txtShippingAddress2"  value="<?php $_POST["email_address"]; ?>"/>
<input type="hidden" name="txtShippingAddress3"  value="<?php $_POST["custom_str1"]; ?>"/>
<input type="hidden" name="txtShippingAddress4"  value="<?php $_POST["custom_str2"]; ?>"/>
<input type="hidden" name="txtShippingAddress5"  value="<?php $_POST["custom_str3"] ?>"/>
<input type="submit" id="button4" value="Credit card" />
</form> 
```

name_first name_last email_address custom_str1 custom_str2 Custom-str3 从第一种形式也必须转移到第二种形式

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:17:37.850

您应该考虑使用一些客户端 JavaScript。我建议使用 jQuery。

不确定您是否有任何 JS 经验，但这不会很复杂。

基本上，您所要做的就是：

1) 读取第一个输入的值

```
电子邮件 = $('#email_address').val()
```

2）将其分配给另一个字段（不确定要分配哪些字段）

```
$('#txtShippingAddress2').val(email)
```

然后只需将此代码绑定到您的提交按钮或您需要的任何地方。

[您可以在http://jquery.com/](http://jquery.com/)找到更多关于 jQuery 的信息

# php - Yahoo openid check_authentication 返回 is_valid: false

> ID：10024811
> 
> 赞同：2
> 
> 时间：2012-04-05T08:03:30.240
> 
> 标签：php, curl, openid, yahoo, urlencode

雅虎 openid`check_authentication`总是返回`is_valid:false` 我是否缺少一些参数？

```
https://open.login.yahooapis.com/openid/op/auth?
openid.assoc_handle=xAS_t.4jTdUdsshHxy2bcoP4XRDBZ3JtfMwc2Otwbw0V3AhEVUg9FF0t.1jZp65mk8Oqf8ZypMZlRMWLP1_Yj44SO16NTlq9cmOq1ls_evue_5ltKPQDMAJo7gNrKe8-
&openid.claimed_id=https://me.yahoo.com/a/CHxd29Etm54Hzrq4_oQ_RSiba_x.k4uA#47ac6
&openid.identity=https://me.yahoo.com/a/CHxd29Etm54Hzrq4_oQ_RSiba_x.k4uA
&openid.mode=check_authentication
&openid.ns=http://specs.openid.net/auth/2.0
&openid.op_endpoint=https://open.login.yahooapis.com/openid/op/auth
&openid.response_nonce=2012-04-05T07:23:23ZsCfrX0VBTKMuHhly34RkZH_wnq887IVClA--
&openid.return_to=http://voxiternal.com/bong/open/verify/yahoo
&openid.signed=assoc_handle,claimed_id,identity,mode,ns,op_endpoint,response_nonce,return_to,signed,pape.auth_level.nist
&openid.pape.auth_level.nist=0
&openid.sig=eymoRtkcrb2EbQVAlF+DdbAb2oM=
&openid.realm=http://voxiternal.com 
```

我`check_authentication`的与谷歌完美合作。但不是雅虎。首先，我尝试使用`CURLOPT_POSTFIELDS`which 与 Google 合作，但不适用于 Yahoo。然后我尝试将其更改为 GET Params 但它仍然无法正常工作

我附上我的 PHP 代码`check_authentication`

```
public static function authenticate($request){
    $keys = explode(',', $request['openid_signed']);
    foreach($keys as $key){
        $params['openid.'.$key] = $request['openid_'.str_replace('.', '_', $key)];
    }
    $params['openid.ns']           = $request['openid_ns'];
    $params['openid.signed']       = $request['openid_signed'];
    $params['openid.sig']          = $request['openid_sig'];
    $params['openid.assoc_handle'] = $request['openid_assoc_handle'];
    $params['openid.mode']         = 'check_authentication';
    $params['openid.claimed_id']   = $request['openid_claimed_id'];
    $url = $request['openid_op_endpoint'];
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_VERBOSE, 1); 
    curl_setopt($curl, CURLOPT_HEADER, 1);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);
    curl_setopt($curl, CURLOPT_POST, 1);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $params);
    $res_buff = curl_exec($curl);
    curl_close($curl);
    list($headers, $body) = explode("\r\n\r\n", $res_buff, 2);
    while(strpos($headers,"100 Continue")!==false){
        list($headers, $body) = explode("\r\n\r\n", $body , 2);
    }
    $headers = self::disect($headers);
    $body = self::disect($body);
    if(!isset($headers['HTTP/1.1 200 OK']))
        return -2;
    if(!isset($body['is_valid']))
        return 0;
    return $body['is_valid'];
} 
```

-> 此解决方案在所有 openid 提供程序中都能正常运行。只是 check_authentication 不适用于雅虎。所以我不愿意让所有其他部分不稳定并转移到一些 openid 库

**编辑**

经过数小时的努力，它看起来像**它的雅虎，**`check_authentication`因为它在几天前工作，目前有问题。但是`hmac_sha1`，使用签名进行验证是有效的。但`check_authentication`总是通过它与 google、aol 一起返回 false。

如果有人可以`check_authentication`使用他们的工具/库进行非签名验证，那就太好了。

# .net - 有哪些框架/解决方案可用于调度和执行自定义作业

> ID：10024815
> 
> 赞同：2
> 
> 时间：2012-04-05T08:03:38.283
> 
> 标签：.net, scheduling

我正在考虑实现许多不同的可配置作业（自定义代码）以进行调度。我将根据事件运行自定义代码，这将安排其他作业以供以后执行。

IE。

*   在特定时间运行代码
*   在依赖作业成功后运行作业
*   如果出现问题，重试多次
*   报告（有什么失败，什么是异常，运行了多长时间等）
*   错误警报

现在我可以自己滚动所有这些 - 但这些是常见的要求，所以我认为这个空间中必须已经存在一些东西。

是否存在适合这种情况的东西？

最好是开源的，但不是必需的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:16:08.507

正如 Damien 在评论中所发布的，[Quartz.Net](http://quartznet.sourceforge.net/)是一个可以满足您的大部分需求并且是开源的。

> Quartz.NET 是一个功能齐全的开源作业调度系统，可用于从最小的应用程序到大型企业系统。

# java - 如何在 sun.net.ftp.FtpClient 中捕获 ftp 成功/失败？

> ID：10024820
> 
> 赞同：0
> 
> 时间：2012-04-05T08:04:03.330
> 
> 标签：java, ftp, put, ftp-client

我想知道是否真的“放置”已成功将文件放置到目的地。如果由于任何原因文件没有放在目标位置[可能是由于目标服务器中的问题，如空间限制等]，我需要知道这一点。

**代码：**

```
 private static boolean putFile(String m_sLocalFile, FtpClient m_client) {
            boolean success = false;
    int BUFFER_SIZE = 10240;
    if (m_sLocalFile.length() == 0) {
        System.out.println("Please enter file name");
    }
    byte[] buffer = new byte[BUFFER_SIZE];
    try {
        File f = new File(m_sLocalFile);
        int size = (int) f.length();
        System.out.println("File " + m_sLocalFile + ": " + size + " bytes");
        System.out.println(size);
        FileInputStream in = new FileInputStream(m_sLocalFile);
        OutputStream out = m_client.put(f.getName());

        int counter = 0;
        while (true) {
            int bytes = in.read(buffer);
            if (bytes < 0)
                break;
            out.write(buffer, 0, bytes);
            counter += bytes;
            System.out.println(counter);
        }

        out.close();
        in.close();
    } catch (Exception ex) {
        System.out.println("Error: " + ex.toString());
    }
          return success;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:09:42.777

我希望它会抛出一个`IOException`. 你有理由相信它不会吗？但是你不应该直接使用那个类，你应该使用一个 ftp:`URL`和它的`URLConnection`类来做 I/O，在调用`setDoOutput(true)`.

# jquery - Jquery 在 Opera/IE 中获取失败

> ID：10024833
> 
> 赞同：0
> 
> 时间：2012-04-05T08:05:09.357
> 
> 标签：jquery, internet-explorer, get, opera

我正在制作一个网络广播页面。我们使用一个非常基本的脚本从服务器获取当前歌曲名称：

```
$.get('http://test.gigsters.ru/whateva/icecastsstats/stats.php', function (data) {
$('#currently-playing').text(data);
});` 
```

使用代码的页面在[这里](http://gigsters.ru/radio)。它适用于 Safari/FF/Chrome，但无法在 IE（包括 9）和 Opera 中完成这项工作。我还创建了一个[干净的测试页面](http://test.gigsters.ru/misc/tumblr/xx.html)来测试 IE&Opera 是否根本无法获取数据。但是那里的脚本功能没问题。我尝试了浏览器调试器，它们似乎没有合理的帮助。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:36:12.187

不是我解决了它，但问题是脚本位于主域（gigsters.ru）和子域（test.gigsters.ru）上的php文件。不知何故，IE 或 Opera 也更严格地遵循同域策略（或者可能更少？为什么其他浏览器允许这样做呢？）。

放置在 test.gigsters.ru 区域，与获取 PHP 脚本相同，JS 代码开始正常工作。

顺便说一句，我尝试使用 getJSON 和 getJSONP，但无济于事。

# c++ - 单例同步 C++

> ID：10024834
> 
> 赞同：2
> 
> 时间：2012-04-05T08:05:14.450
> 
> 标签：c++, design-patterns, singleton, ipc

如果我必须用 C++ 编写一个单例类，我将使用一个静态变量、私有构造函数和一个返回类对象的公共静态函数。但是在多线程环境中，代码会出现问题。为了避免多个线程同时访问同一个变量，Boost线程是用于同步的最佳机制吗？我的意思是设置/取消设置整个资源的锁/互斥锁。C++ 标准库中是否还有其他内置的东西，我不必下载 boost、构建东西等？我听说过 C++ Ox，但不太了解。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T08:10:07.430

C++98/03 根本没有支持线程的东西。如果您使用的是 C++98 或 03 编译器，那么您几乎会被困在使用 Boost 或某些（或多或少）特定于操作系统的东西上，例如 pthread 或 Win32 的线程原语。

C++11 有一个相当完整的线程支持库，包括互斥体、锁、线程本地存储等。

然而，我觉得有必要指出，备份并多考虑一下你是否需要/想要一个 Singleton 可能会更好。说得好听一点，单例模式在很大程度上已经失宠了。

编辑：重读这篇文章，我有点跳过了我想说的一件事：至少当我使用它们时，任何/所有单例在任何辅助线程启动之前都已完全初始化。这使得在初始化时对线程安全的担忧完全没有意义。我想在启动辅助线程之前可能有一个您无法初始化的单例，因此您需要处理这个问题，但至少立即让我觉得这是一个相当不寻常的例外，我只会在以下情况下处理/如果绝对必要的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-08T15:52:34.887

对我来说，使用 c++11 实现单例的最佳方法是：

```
class Singleton
{
public:
static Singleton & Instance()
{
    // Since it's a static variable, if the class has already been created,
    // It won't be created again.
    // And it **is** thread-safe in C++11.

    static Singleton myInstance;

    // Return a reference to our instance.
    return myInstance;
}

// delete copy and move constructors and assign operators
Singleton(Singleton const&) = delete;             // Copy construct
Singleton(Singleton&&) = delete;                  // Move construct
Singleton& operator=(Singleton const&) = delete;  // Copy assign
Singleton& operator=(Singleton &&) = delete;      // Move assign

// Any other public methods

protected:
Singleton() 
{
   // Constructor code goes here.
}

~Singleton()
{
    // Destructor code goes here.
}

 // And any other protected methods.
} 
```

这是一个 c++11 功能，但通过这种方式，您可以创建一个线程安全的单例。按照新标准，这个问题就不用管了。对象初始化将仅由一个线程进行，其他线程将等待它完成。或者你可以使用 std::call_once。

如果你想独占访问单例的资源，你必须在这些函数上使用锁。

不同类型的锁：

使用**atomic_flg_lck：**

```
class SLock
{
public:
  void lock()
  {
    while (lck.test_and_set(std::memory_order_acquire));
  }

  void unlock()
  {
    lck.clear(std::memory_order_release);
  }

  SLock(){
    //lck = ATOMIC_FLAG_INIT;
    lck.clear();
  }
private:
  std::atomic_flag lck;// = ATOMIC_FLAG_INIT;
}; 
```

使用**原子：**

```
class SLock
{
public:
  void lock()
  {
    while (lck.exchange(true));
  }

  void unlock()
  {
    lck = true;
  }

  SLock(){
    //lck = ATOMIC_FLAG_INIT;
    lck = false;
  }
private:
  std::atomic<bool> lck;
}; 
```

使用**互斥锁：**

```
class SLock
{
public:
  void lock()
  {
    lck.lock();
  }

  void unlock()
  {
    lck.unlock();
  }

private:
  std::mutex lck;
}; 
```

仅适用于**Windows**：

```
class SLock
{
public:
  void lock()
  {
    EnterCriticalSection(&g_crit_sec);
  }

  void unlock()
  {
    LeaveCriticalSection(&g_crit_sec);
  }

  SLock(){
    InitializeCriticalSectionAndSpinCount(&g_crit_sec, 0x80000400);
  }

private:
  CRITICAL_SECTION g_crit_sec;
}; 
```

**atomic**和**atomic_flg_lck**将线程保持在旋转计数中。**互斥锁**只是让线程休眠。如果等待时间太长，最好让线程休眠。最后一个“ **CRITICAL_SECTION** ”将线程保持在旋转计数中，直到消耗了一段时间，然后线程进入睡眠状态。

如何使用这些关键部分？

```
unique_ptr<SLock> raiilock(new SLock());

class Smartlock{
public:
  Smartlock(){ raiilock->lock(); }
  ~Smartlock(){ raiilock->unlock(); }
}; 
```

使用 raii 成语。锁定临界区的构造函数和解锁它的析构函数。

例子

```
class Singleton {

   void syncronithedFunction(){
      Smartlock lock;
      //.....
   }

} 
```

此实现是线程安全和异常安全的，因为变量锁保存在堆栈中，因此当函数范围结束（函数结束或异常）时，将调用析构函数。

我希望你觉得这很有帮助。

谢谢！！

# c# - SQL Server Compact 不支持服务器生成的键和服务器生成的值

> ID：10024839
> 
> 赞同：1
> 
> 时间：2012-04-05T08:05:41.487
> 
> 标签：c#, entity-framework, linq-to-entities, sql-server-ce

在插入记录时：

```
 Poster_ratings prItem = new Poster_ratings
        {
            poster_id = posterId,
            rating = rating,
            email = email,
            name = name,
            event_id = eventId,
            id = GetNextID()
        };

        entity.AddToPoster_ratings(prItem);
        entity.SaveChanges(); 
```

我收到不支持服务器生成的值的错误。

我正在使用 Sql compact 3.5（MS Sync Framework 支持的最高版本）。我已经阅读[了这篇文章](https://stackoverflow.com/questions/2734424/c-sharp-4-0-ef-server-generated-keys-and-server-generated-values-are-not-suppo)并将此表的“setStoreGeneratedPattern”设置为无，但这也没有帮助，我一直收到同样的错误。我应该怎么做才能解决这个问题？

提前问候和感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:13:21.030

看看这个：[SQL Server Compact 不支持服务器生成的键和服务器生成的值](https://stackoverflow.com/questions/648449/server-generated-keys-and-server-generated-values-are-not-supported-by-sql-serve)

正如 Erik 上面指出的那样，在同步时为您的 PK 使用标识值是有问题的。如果两个或多个客户端通过身份插入行并获得相同的自动生成数字，则在将它们同步到服务器时会出现 PK 冲突。

这是在 Sync Framework 中选择 PK 的链接：[为分布式环境选择适当的主键](http://msdn.microsoft.com/en-us/library/bb726011.aspx)

# php - Sphinx 使用 PHP API 搜索多个表并聚合结果

> ID：10024841
> 
> 赞同：0
> 
> 时间：2012-04-05T08:05:52.503
> 
> 标签：php, mysql, sphinx

我正在尝试使用 Sphinx 搜索具有不同字段的几个 MySQL 表，并根据相关性将所有结果组合成一个集合。

我已经为 Sphinx 配置了每个表的索引，并通过一次搜索所有索引成功地组合了结果。

当我`SEARCH`通过 shell 查询时，我按预期返回了所有结果信息。但是，当我使用 PHP API 时，返回的结果只包含行的 ID，因此无法判断它来自哪个表。

有没有办法让 PHP API 告诉我它来自哪个表/索引，以便我可以进入并查询实际数据？

我正在考虑的替代方法是尝试处理 shell 脚本的输出，但这似乎很混乱。

**这是 PHP：** $search = $_GET['query']; // 连接信息 $sphinxClient = new SphinxClient(); $sphinxClient->SetServer('localhost', 9312); $sphinxClient->SetMaxQueryTime(5000);

```
//Sphinx Result Configuration
$sphinxClient->SetMatchMode(SPH_MATCH_ANY);
$sphinxClient->SetRankingMode( SPH_RANK_PROXIMITY_BM25 );
$sphinxClient->SetLimits(0, 20);

// Give me back the results as an array
$sphinxClient->SetArrayResult(true);

$searchResults = $sphinxClient->Query( $search, 'user model' ); 
```

**shell脚本很简单：**

```
./search SEARCHTERM 
```

**其中 SEARCHTERM 是搜索**

**输出如下所示的内容：**

Sphinx 2.0.3-release (r3043) 版权所有 (c) 2001-2011, Andrew Aksyonoff 版权所有 (c) 2008-2011, Sphinx Technologies Inc (http://sphinxsearch.com)

使用配置文件“/usr/local/sphinx/etc/sphinx.conf”...索引“用户”：查询“NEWTON”：在 0.000 秒内返回 10 个匹配项，共 10 个

显示匹配项： 1\. document=1，weight=2629，time=Thu Jan 1 00:33:32 1970 id=1 first_name=Joe last_name=Shmo company=Acme

**JSON 格式的 PHP API 输出：** { "error":"", "warning":"", "status":"good", "fields": ["name","code_name","code","description ","rating","angles","published","key_words","re​​ferenced_num","approved","used_num","avg_runtime","examples","editor","published_time"], "attrs" :{"time":2}, "matches": [ {"id":1,"weight":"1","attrs":{"time":2012}} ], "total":"1" , "total_found":"1", "time":"0.000", "words":{"posuere":{"docs":"1","hits":"2"}} }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:28:11.280

我很确定，在通过 API 搜索时，您不仅会获得匹配的文档的 ID，还会获得找到的文档的所有其他 int 值。

所以你可以尝试在你的源代码中添加类似

```
SELECT id, "1" as type FROM table1

sql_attr_uint = type 
```

和`type`字段现在告诉你 id 来自哪个表

但是请注意，一次搜索不同表的多个索引存在一些问题。

1.  您需要确保 id 在结果集中出现的次数不会超过一次（通常建议的解决方案是将 id 填充 1000000 或通过某种类似的方式 - 我个人觉得这很糟糕）

2.  结果仅包含正在搜索的第一个索引中的列。您需要确保所有来源都返回相同的列。

就我个人而言，每次我想到一次搜索多个索引时，我最终都会单独搜索每个索引并呈现结果。

更新：添加了所需的 sql_attr_uint

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:54:05.253

Sphinx 返回对象（行）ID 是正常的。问题出在您的模型中。如果您无法通过 id 确定它是哪个对象，则您的模型是错误的。可能的选项是：

*   为每个对象类型（表或一组链接表）创建一个单独的 sphinx 索引
*   改进您的对象编号以使对象识别成为可能，例如通过一些前缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:46:34.863

如果表具有相同的结构，您可以使用联合与您的 sql 查询

```
SELECT * FROM table1 WHERE id IN (ids,from,sphinx)
UNION
SELECT * FROM table2 WHERE id IN (ids,from,sphinx)
...
UNION
SELECT * FROM tableN WHERE id IN (ids,from,sphinx) 
```

请注意，这是 CPU 密集型的

# spring - Spring批处理尝试再次创建持久批处理作业存储库

> ID：10024845
> 
> 赞同：6
> 
> 时间：2012-04-05T08:06:11.983
> 
> 标签：spring, spring-batch

这似乎是一个愚蠢的问题。我正在尝试为 Spring Batch Job Repository (Spring Batch 2.1.7) 配置 Oracle10g 数据库，我能够使用*org/springframework/batch/core/schema-oracle10g.sql*中可用的脚本创建表。我还将属性*batch.data.source.init*设置为*false*。

在一个干净的数据库上，我的批处理程序运行良好，成功创建了所有批处理表/序列并用批处理结果的详细信息填充它们。但是，当我再次运行它时，Spring Batch 尝试再次创建这些表并抛出“ORA-00955：名称已被现有对象使用”异常。我究竟做错了什么？

```
# For Oracle
batch.jdbc.driver=oracle.jdbc.driver.OracleDriver
batch.jdbc.url=jdbc:oracle:thin:@localhost:1521:orcl
batch.jdbc.user=****
batch.jdbc.password=****
batch.schema=****
batch.schema.script=classpath:/org/springframework/batch/core/schema-oracle10g.sql
batch.drop.script=classpath:/org/springframework/batch/core/schema-drop-oracle10g.sql
batch.jdbc.testWhileIdle=true
batch.data.source.init=false 
```

以下是我的上下文文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:batch="http://www.springframework.org/schema/batch"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xsi:schemaLocation="
        http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch-2.1.xsd
        http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:property-placeholder location="classpath:batch.properties" />

    <context:component-scan base-package="com.myco.mypack" />

    <jdbc:initialize-database data-source="dataSource">
        <jdbc:script location="${batch.schema.script}" />
    </jdbc:initialize-database>

    <import resource="classpath:/META-INF/spring/module-context.xml" />

    <bean id="jobLauncher" class="org.springframework.batch.core.launch.support.SimpleJobLauncher">
        <property name="jobRepository" ref="jobRepository"/>
    </bean>

    <bean id="transactionManager"  class="org.springframework.jdbc.datasource.DataSourceTransactionManager" lazy-init="true">
        <property name="dataSource" ref="dataSource" />   
    </bean>

    <bean id="jobRepository" class="org.springframework.batch.core.repository.support.JobRepositoryFactoryBean">
         <property name="dataSource" ref="dataSource" />
         <property name="transactionManager" ref="transactionManager"/>
         <property name="databaseType" value="oracle" />
         <property name="tablePrefix" value="BATCH_"/>
         <property name="isolationLevelForCreate" value="ISOLATION_DEFAULT"/>
    </bean>  

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="${batch.jdbc.driver}" />
        <property name="url" value="${batch.jdbc.url}" />
        <property name="username" value="${batch.jdbc.user}" />
        <property name="password" value="${batch.jdbc.password}" />
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T19:54:26.890

我没有看到像这样使用**batch.data.source.init**：

```
<jdbc:initialize-database data-source="dataSource" 
                          enabled="${batch.data.source.init}">
    <jdbc:script location="${batch.schema.script}" />
</jdbc:initialize-database> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-15T13:35:25.857

已经有一段时间了，但我认为对于搜索此问题的人来说，知道您可以通过使用禁用创建数据库会有所帮助

```
spring.batch.initializer.enabled=false 
```

在文档中给出的 application.properties 中：http: [//docs.spring.io/spring-boot/docs/current/reference/html/howto-database-initialization.html](http://docs.spring.io/spring-boot/docs/current/reference/html/howto-database-initialization.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:22:49.120

```
<jdbc:initialize-database data-source="dataSource" 
                      enabled="${batch.data.source.init}">
<jdbc:script location="${batch.schema.script}" /> 
```

如果我通过命令行参数 -Dbatch.data.source.init=false ，则不启用初始化。

但是如果我使用以下配置并在上下文 xml 中将 enabled 设置为 false ，那么即使启用标志为 false 也会触发初始化

```
<jdbc:initialize-database data-source="dataSource" 
                      enabled="false">
<jdbc:script location="false" /> 
```

# java - 如果我省略了 code 中注释的特定行，则代码块，不接受任何输入并冻结

> ID：10024851
> 
> 赞同：0
> 
> 时间：2012-04-05T08:06:42.143
> 
> 标签：java, image, applet

剪切代码：这是代码，我无法摆脱渲染 tank2 的行，当我切换正在向该服务器发送数据的客户端时它工作正常。这是我正在制作的游戏的服务器端：-

```
package dataEx;

import java.applet.*;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;

import java.net.MalformedURLException;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.URL;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;

import java.awt.image.FilteredImageSource;
import java.awt.image.ImageFilter;
import java.awt.image.ImageProducer;
import java.awt.image.RGBImageFilter;

import javax.imageio.ImageIO;

public class test extends Applet implements Runnable, ActionListener,MouseListener, MouseMotionListener,Serializable 
{

    dataToExchange xc;

    public static Image makeColorTransparent(Image im, final Color color) 
          {
            ImageFilter filter = new RGBImageFilter() 
            {

                  public int markerRGB = color.getRGB() | 0xFF000000;               //color to make transparent

                  public final int filterRGB(int x, int y, int rgb) 
                  {
                    if ( ( rgb | 0xFF000000 ) == markerRGB ) 
                    {
                      // Mark the alpha bits as zero - transparent
                      return 0x00FFFFFF & rgb;
                    }

                    else 
                    {
                      // nothing to do
                      return rgb;
                    }
                 }
            }; 

         ImageProducer ip = new FilteredImageSource(im.getSource(), filter);
         return Toolkit.getDefaultToolkit().createImage(ip);

    }

    private Image dbImage;
    private Graphics dbg;

    ServerSocket server;
    Socket connection;

    dataToExchange data_recv=null;  
    Thread t;

    int frameNumber=0;  
    int speed=5,block_front=0,block_end=0;
    int fire=0,tankSpeed=0,pressing=0;
    int topnose_x1,topnose_x2,topnose_y1,topnose_y2;
    int bck_x=-500;
    int init_x=500,tank_y=500;
    int hand_x,hand_y,mouth_x,mouth_y;
    double theta =0.785,angle;
    int moveWithBck=0,glass_x=500;
    Boolean shoot=false;

    Image cannon[]=new Image[6];
    Image glass,glass_t;    
    Image background;

    //String[] tankSeq=new String[6];

    ObjectInputStream input;
    ObjectOutputStream output;

    public void init()
    {   
        setCursor (Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
        try
        {
            connect();
        } catch (ClassNotFoundException e) {

            e.printStackTrace();
        }

          setSize(1350,640);
          setBackground( Color.white);  

          cannon[0]=getImage (getCodeBase (), "1.png");
          cannon[1]=getImage (getCodeBase (), "2.png");
          cannon[2]=getImage (getCodeBase (), "3.png");
          cannon[3]=getImage (getCodeBase (), "4.png");
          cannon[4]=getImage (getCodeBase (), "5.png");
          cannon[5]=getImage (getCodeBase (), "6.png");

          glass = getImage (getCodeBase (), "glass.png");
          glass_t = makeColorTransparent(glass, Color.red);

          background = getImage (getCodeBase (), "wall2.jpg");

    }

    private void connect() throws ClassNotFoundException
    {
        int portNumber=1232;
        server = null;
        try 
        {
            server=new ServerSocket(portNumber,1);

        while(true)
        {
            System.out.println("wainting for clients");
            connection=server.accept();

            input=new ObjectInputStream(connection.getInputStream()); 
            output= new ObjectOutputStream(connection.getOutputStream());

            String message=(String)input.readObject();
            System.out.println("message "+message);     
            break;          
        }   

        } catch (IOException e) {

            e.printStackTrace();
        }

    }

    public void start()
    {       
        Thread t = null;
        t = new Thread( this );
        t.start();
        try {
            SendTheChange();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }  

    public void update (Graphics g)                                             //overriding the update for double buffering
    {       
        // initialize buffer
        dbImage = createImage (this.getSize().width, this.getSize().height);
        dbg = dbImage.getGraphics ();

        // clear screen in background
        dbg.setColor (getBackground());
        dbg.fillRect (0, 0, this.getSize().width, this.getSize().height);

        // draw elements in background
        dbg.setColor (getForeground());
        paint (dbg);

        // draw image on the screen
        g.drawImage (dbImage, 0, 0, this);      
    }

    void drawTank(Graphics g) throws MalformedURLException, IOException 
    {
        int tank_x=tankSpeed+init_x;

        if(frameNumber<5)
        {
            if(pressing==1)
                frameNumber=frameNumber+1;          
        }
        else
            frameNumber=0;

        Image tank= ImageIO.read(new URL(getCodeBase(), "1.png"));  
        Image  tank2 = makeColorTransparent(tank, new Color(0).white);               

        **g.drawImage (tank2, tank_x,tank_y, this)**; //I just cant get rid of this line        

        g.drawImage (cannon[frameNumber], tank_x,tank_y, this);

        topnose_x1=tank_x+100;
        topnose_x2=tank_x+150;
        topnose_y1= tank_y+65;
        topnose_y2=tank_y+50;

        Graphics2D g2 = (Graphics2D) g;
        g2.setStroke(new BasicStroke(7));

        double base,height;

        base=hand_x-topnose_x1;
        height=topnose_y1-hand_y;

        if(base<2)  
        {
            base=2;
        }

        if(height<4)    
        {
            height=4;
        }

        double tantheta=height/base;

        theta=-Math.atan(tantheta);

        topnose_x2=(int) (53*Math.cos(theta)+topnose_x1);
        topnose_y2=(int) (53*Math.sin(theta)+topnose_y1);   

        g2.drawLine(topnose_x1,topnose_y1 , topnose_x2, topnose_y2);        
        g2.drawLine(topnose_x1+5,topnose_y1+4 , topnose_x2+2, topnose_y2+1);        
        g2.drawLine(topnose_x1+10, topnose_y1+5, topnose_x2+4, topnose_y2+2);
        pressing=0;     
    }

    void drawBackground(Graphics g)
    {

        g.drawImage (background,bck_x,0, this);
    }

    public void paint( Graphics g)      
    {           
        drawBackground(g);      

        try {

            drawTank(g);

            } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   

    }

    public void run()
    {       
        while (true)
        {
            try {
                recieveChanges();
            } catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }{
            // repaint the applet
            repaint();

            try
            {
                Thread.sleep (20);
            }
            catch (InterruptedException ex)
            {

            }

            }
        }
    }

    private void recieveChanges() throws IOException, ClassNotFoundException 
    {           
        data_recv=(dataToExchange)input.readObject();
        //System.out.println("ds"+data_recv.xOffsetTank);   
    }
    int checkBckRange()
    {
        int p_bck_x = 0;

        if(bck_x<0)
        {
            p_bck_x=bck_x*-1;
            block_front=0;
        }
        else
        {
            block_front=1;
        }
        //if(bck_x+bck_length>)

        return p_bck_x;

    }
    private void SendTheChange() throws IOException 
    {

        dataToExchange data=new dataToExchange() ;

        int p_bck_x=checkBckRange();

        int offset=p_bck_x+init_x;

        data.frameIndex=frameNumber;
        data.xOffsetTank=offset;

        output.writeObject(data);       
        output.flush();     
    }

    public boolean mouseMove (Event e, int x, int y)
    {
        hand_x=x;
        hand_y=y;       

        return false;   
    }

     public boolean mouseDrag (Event e, int x, int y)
     {

        hand_x=x;
        hand_y=y;       

        return false; 

     }
     public boolean mouseDown (Event e, int x, int y) 
     {
         if(shoot==false)
         {
             shoot=true;
             mouth_x=topnose_x1;
             mouth_y=topnose_y1-2;
             moveWithBck=0;
             angle=-theta;
             //System.out.println(x+"     "+y+"\n");
         }
         return true;
     }

    public boolean keyDown(Event e, int key) 
    {
        // user presses left cursor key

            if (key == 'a'&& block_front==0)
            {       

                bck_x=bck_x+speed;  
                moveWithBck=moveWithBck+speed;
                pressing=1;
            }
            // user presses right cursor key 
            else if (key == 'd')
            {       
                bck_x=bck_x-speed;
                moveWithBck=moveWithBck-speed;
                pressing=1;
            }
            else if (key == 'w')
            {       
                tank_y=tank_y-200;
            }

            else if (key == 's')
            {       
                tank_y=tank_y-200;
            }

        try {
            SendTheChange();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        return true;
    }

    @Override
    public void mouseDragged(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void mouseMoved(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void mouseClicked(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void mouseEntered(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void mouseExited(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void mousePressed(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void mouseReleased(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void actionPerformed(ActionEvent arg0) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:08:46.853

在我看来，在绘画方法中这样做是一个非常糟糕的主意：

```
tank= ImageIO.read(new URL(getCodeBase(), "1.png")); 
```

当您的小程序启动时，您应该这样做*一次。*我想知道它是否只是把所有时间都花在阅读图像上......

# java - SSO - CAS 协议 - 更新参数

> ID：10024854
> 
> 赞同：1
> 
> 时间：2012-04-05T08:07:00.777
> 
> 标签：java, security, protocols, single-sign-on, cas

[我有一个关于CAS 协议](http://www.jasig.org/cas/protocol)的（也许很简单）问题。根据我在协议描述中读到的内容，在**/serviceValidate调用中使用****renew**参数会强制用户再次提供其凭据。

 **> 2.5.1。参数 以下 HTTP 请求参数可以指定给 /serviceValidate。它们区分大小写，必须全部由 /serviceValidate 处理。
> 
> [...] renew [OPTIONAL] - 如果设置了此参数，则仅当服务票证是从用户的主要凭据的呈现中发出时，票证验证才会成功。如果票证是从单点登录会话发出的，它将失败。

由于每个票证都是特定于给定服务的，这是否意味着**更新**参数会强制用户在每次尝试访问应用程序时提供其凭据，即使他已经登录并使用了其他应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T23:40:53.763

在 /serviceValidate URI 上设置“renew=true”表示只有当用户通过提供主要凭据（用户 ID、psw）获得该票证时，CAS 才会验证服务票证请求。因此，如果您在之前尝试建立 SSO 会话时尝试验证服务票证，将“renew=true”设置为 true 将导致验证失败。

但是，如果您试图强制用户每次使用**/login** URI 调用到 CAS 服务器时都输入他的凭据，那么“renew=true”将是要使用的参数。换句话说，如果应用程序 X 被指定为 /login URL 的服务 URL 并且 renew 设置为 true，则无论之前的 SSO 会话是否存在，用户都将被迫提供凭据。

希望有帮助。:)**

# android - Android - 创建幻灯片的最佳方式是什么？

> ID：10024860
> 
> 赞同：0
> 
> 时间：2012-04-05T08:07:23.090
> 
> 标签：android, android-layout

在 Android 中创建幻灯片的最佳方法是什么？
基本上，我需要的是滑过一组 LinearLayout 或 RelativeLayout 对象，其中包含不同的视图，例如：一个 ImageView 和一个覆盖在该图像上的 TextView。
在屏幕底部，应该是一些标记点，用于跟踪画廊中的当前元素。

给出一个想法，看看这个 jQuery 实现：[http](http://slidesjs.com/)
: //slidesjs.com/（我不需要“左”/“右”控件，也不需要可点击的点，如示例)

此外，幻灯片应该循环播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:11:21.810

也许不是最好的，但我使用了`Gallery`.

# javascript - 使用 JavaScript 从数组中删除对象

> ID：10024866
> 
> 赞同：709
> 
> 时间：2012-04-05T08:07:51.663
> 
> 标签：javascript, arrays

如何从数组中删除对象？我希望从中删除包含名称的`Kristian`对象`someArray`。例如：

```
someArray = [{name:"Kristian", lines:"2,5,10"},
             {name:"John", lines:"1,19,26,96"}]; 
```

我想实现：

```
someArray = [{name:"John", lines:"1,19,26,96"}]; 
```

* * *

## 回答 #1

> 赞同：936
> 
> 时间：2012-04-05T08:11:37.143

您可以使用多种方法从数组中删除项目：

```
//1
someArray.shift(); // first element removed
//2
someArray = someArray.slice(1); // first element removed
//3
someArray.splice(0, 1); // first element removed
//4
someArray.pop(); // last element removed
//5
someArray = someArray.slice(0, someArray.length - 1); // last element removed
//6
someArray.length = someArray.length - 1; // last element removed 
```

如果要删除 position 的元素`x`，请使用：

```
someArray.splice(x, 1); 
```

或者

```
someArray = someArray.slice(0, x).concat(someArray.slice(-x)); 
```

回复[@chill182](https://stackoverflow.com/users/995721/chill182)`Array.filter`的评论：可以使用，或者`Array.splice`结合`Array.findIndex`（见[**MDN**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter) ）从数组中删除一个或多个元素，例如

```
// non destructive filter > noJohn = John removed, but someArray will not change
let someArray = getArray();
let noJohn = someArray.filter( el => el.name !== "John" ); 
log(`let noJohn = someArray.filter( el => el.name !== "John")`,
  `non destructive filter [noJohn] =`, format(noJohn));
log(`**someArray.length ${someArray.length}`);

// destructive filter/reassign John removed > someArray2 =
let someArray2 = getArray();
someArray2 = someArray2.filter( el => el.name !== "John" );
log("", 
  `someArray2 = someArray2.filter( el => el.name !== "John" )`,
  `destructive filter/reassign John removed [someArray2] =`, 
  format(someArray2));
log(`**someArray2.length after filter ${someArray2.length}`);

// destructive splice /w findIndex Brian remains > someArray3 =
let someArray3 = getArray();
someArray3.splice(someArray3.findIndex(v => v.name === "Kristian"), 1);
someArray3.splice(someArray3.findIndex(v => v.name === "John"), 1);
log("",
  `someArray3.splice(someArray3.findIndex(v => v.name === "Kristian"), 1),`,
  `destructive splice /w findIndex Brian remains [someArray3] =`, 
  format(someArray3));
log(`**someArray3.length after splice ${someArray3.length}`);

// if you're not sure about the contents of your array, 
// you should check the results of findIndex first
let someArray4 = getArray();
const indx = someArray4.findIndex(v => v.name === "Michael");
someArray4.splice(indx, indx >= 0 ? 1 : 0);
log("", `someArray4.splice(indx, indx >= 0 ? 1 : 0)`,
  `check findIndex result first [someArray4] = (nothing is removed)`,
  format(someArray4));
log(`**someArray4.length (should still be 3) ${someArray4.length}`);

// -- helpers -- 
function format(obj) {
  return JSON.stringify(obj, null, " ");
}

function log(...txt) {
  document.querySelector("pre").textContent += `${txt.join("\n")}\n`
}

function getArray() {
  return [ {name: "Kristian", lines: "2,5,10"},
           {name: "John", lines: "1,19,26,96"},
           {name: "Brian", lines: "3,9,62,36"} ];
}
```

```
<pre>
**Results**

</pre>
```

* * *

## 回答 #2

> 赞同：230
> 
> 时间：2012-04-05T08:11:44.387

干净的解决方案是使用[`Array.filter`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)：

```
var filtered = someArray.filter(function(el) { return el.Name != "Kristian"; }); 
```

问题在于它[不适](http://kangax.github.com/es5-compat-table/)用于 IE < 9。但是，您可以包含来自 Javascript 库（例如[underscore.js](http://documentcloud.github.com/underscore/#filter)）的代码，该库为任何浏览器实现此功能。

* * *

## 回答 #3

> 赞同：144
> 
> 时间：2012-04-05T08:14:01.680

我建议使用 lodash.js 或[sugar.js](http://sugarjs.com/)来完成以下常见任务：

```
// lodash.js
someArray = _.reject(someArray, function(el) { return el.Name === "Kristian"; });

// sugar.js
someArray.remove(function(el) { return el.Name === "Kristian"; }); 
```

在大多数项目中，拥有一组由此类库提供的辅助方法非常有用。

* * *

## 回答 #4

> 赞同：95
> 
> 时间：2012-04-11T20:54:50.590

这个怎么样？

```
$.each(someArray, function(i){
    if(someArray[i].name === 'Kristian') {
        someArray.splice(i,1);
        return false;
    }
}); 
```

* * *

## 回答 #5

> 赞同：93
> 
> 时间：2017-08-08T18:50:38.793

ES2015

```
let someArray = [
               {name:"Kristian", lines:"2,5,10"},
               {name:"John", lines:"1,19,26,96"},
               {name:"Kristian", lines:"2,58,160"},
               {name:"Felix", lines:"1,19,26,96"}
            ];

someArray = someArray.filter(person => person.name != 'John'); 
```

它将删除**约翰**！

* * *

## 回答 #6

> 赞同：76
> 
> 时间：2012-04-05T08:12:27.973

如图所示，您的“数组”是无效的 JavaScript 语法。花括号`{}`用于具有属性名称/值对的对象，但方括号`[]`用于数组 - 如下所示：

```
someArray = [{name:"Kristian", lines:"2,5,10"}, {name:"John", lines:"1,19,26,96"}]; 
```

在这种情况下，您可以使用该[`.splice()`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)删除项目。要删除第一项（索引 0），请说：

```
someArray.splice(0,1);

// someArray = [{name:"John", lines:"1,19,26,96"}]; 
```

如果您不知道索引但想在数组中搜索以找到名称为“Kristian”的项目以删除您可以这样做：

```
for (var i =0; i < someArray.length; i++)
   if (someArray[i].name === "Kristian") {
      someArray.splice(i,1);
      break;
   } 
```

编辑：我刚刚注意到您的问题被标记为“jQuery”，因此您可以尝试以下[`$.grep()`方法](http://api.jquery.com/jQuery.grep/)：

```
someArray = $.grep(someArray,
                   function(o,i) { return o.name === "Kristian"; },
                   true); 
```

* * *

## 回答 #7

> 赞同：56
> 
> 时间：2015-04-18T12:14:04.990

你可以使用array.filter()。

例如

```
 someArray = [{name:"Kristian", lines:"2,5,10"},
                     {name:"John", lines:"1,19,26,96"}];

        someArray = someArray.filter(function(returnableObjects){
               return returnableObjects.name !== 'Kristian';
        });

        //someArray will now be = [{name:"John", lines:"1,19,26,96"}]; 
```

箭头功能：

```
someArray = someArray.filter(x => x.name !== 'Kristian') 
```

* * *

## 回答 #8

> 赞同：20
> 
> 时间：2013-05-07T04:01:52.693

我制作了一个动态函数，获取对象数组、键和值，并在删除所需对象后返回相同的数组：

```
function removeFunction (myObjects,prop,valu)
        {
             return myObjects.filter(function (val) {
              return val[prop] !== valu;
          });

        } 
```

完整示例：[DEMO](http://jsfiddle.net/aPH7m/1/)

```
var obj = {
            "results": [
              {
                  "id": "460",
                  "name": "Widget 1",
                  "loc": "Shed"
              }, {
                  "id": "461",
                  "name": "Widget 2",
                  "loc": "Kitchen"
              }, {
                  "id": "462",
                  "name": "Widget 3",
                  "loc": "bath"
              }
            ]
            };

        function removeFunction (myObjects,prop,valu)
        {
             return myObjects.filter(function (val) {
              return val[prop] !== valu;
          });

        }

console.log(removeFunction(obj.results,"id","460")); 
```

* * *

## 回答 #9

> 赞同：17
> 
> 时间：2014-07-18T15:50:47.223

这是一个对我有用的功能：

```
function removeFromArray(array, value) {
    var idx = array.indexOf(value);
    if (idx !== -1) {
        array.splice(idx, 1);
    }
    return array;
} 
```

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2017-07-27T08:06:42.273

你也可以尝试做这样的事情：

```
var myArray = [{'name': 'test'}, {'name':'test2'}];
var myObject = {'name': 'test'};
myArray.splice(myArray.indexOf(myObject),1); 
```

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2013-07-26T18:00:46.720

```
someArray = jQuery.grep(someArray , function (value) {
        return value.name != 'Kristian';
}); 
```

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2012-04-05T08:10:22.923

在数组上使用拼接函数。指定开始元素的位置和要删除的子序列的长度。

```
someArray.splice(pos, 1); 
```

* * *

## 回答 #13

> 赞同：10
> 
> 时间：2013-03-27T12:29:47.273

为使用数组的简单工作投票支持[UndercoreJS](http://underscorejs.org/)。

[_.without()](http://underscorejs.org/#without "_。没有（）")函数有助于删除元素：

```
 _.without([1, 2, 1, 0, 3, 1, 4], 0, 1);
    => [2, 3, 4] 
```

* * *

## 回答 #14

> 赞同：10
> 
> 时间：2021-08-03T18:26:38.730

```
const someArray = [{name:"Kristian", lines:"2,5,10"}, {name:"John", lines:"1,19,26,96"}]; 
```

我们得到名称属性值为“Kristian”的对象的索引

```
const index = someArray.findIndex(key => key.name === "Kristian");
console.log(index); // 0 
```

通过使用 splice 函数，我们正在删除 name 属性值为“Kristian”的对象

```
someArray.splice(index,1);
console.log(someArray); // [{name:"John", lines:"1,19,26,96"}] 
```

* * *

## 回答 #15

> 赞同：9
> 
> 时间：2021-01-27T19:31:16.590

# 表现

今天 2021.01.27，我在 Chrome v88、Safari v13.1.2 和 Firefox v84 上对 MacOs HighSierra 10.13.6 进行测试，以选择解决方案。

## 结果

对于所有浏览器：

*   元素不存在时的快速/最快解决方案：A 和 B
*   大阵列的快速/最快解决方案：C
*   元素存在时大数组的快速/最快解决方案：H
*   小阵列的相当慢的解决方案：F 和 G
*   大型阵列的非常慢的解决方案：D、E 和 F

[![在此处输入图像描述](../Images/79172cfb049867208400be2c466f8893.png)](https://i.stack.imgur.com/woivl.png)

## 细节

我执行 4 个测试用例：

*   小数组（10 个元素）和元素存在 - 你可以在[这里运行它](https://jsbench.me/1skk6tqmiv/1)
*   小数组（10 个元素）和元素不存在 - 你可以在[这里运行它](https://jsbench.me/wmkk6tsiwg/1)
*   大数组（百万元素）和元素存在 - 你可以在[这里运行它](https://jsbench.me/j0kkfb2t9c/1)
*   大数组（百万元素）和元素不存在 - 你可以在[这里运行它](https://jsbench.me/xwkkfbson2)

下面的片段展示了解决方案 [A](https://stackoverflow.com/a/10024926/860099) [B](https://stackoverflow.com/a/10024926/860099) [C](https://stackoverflow.com/a/10025321/860099) [D](https://stackoverflow.com/a/10024929/860099) [E](https://stackoverflow.com/a/42606805/860099) [F](https://stackoverflow.com/a/10024964/860099) [G](https://stackoverflow.com/a/15658809/860099) [H](https://stackoverflow.com/a/10113835/860099) [I之间的差异](https://stackoverflow.com/a/17887990/860099)

```
function A(arr, name) {
  let idx = arr.findIndex(o => o.name==name);
  if(idx>=0) arr.splice(idx, 1);
  return arr;
}

function B(arr, name) {
  let idx = arr.findIndex(o => o.name==name);
  return idx<0 ? arr : arr.slice(0,idx).concat(arr.slice(idx+1,arr.length));
}

function C(arr, name) {
  let idx = arr.findIndex(o => o.name==name);
  delete arr[idx];
  return arr;
}

function D(arr, name) {
  return arr.filter(el => el.name != name);
}

function E(arr, name) {
  let result = [];
  arr.forEach(o => o.name==name || result.push(o));
  return result;
}

function F(arr, name) {
  return _.reject(arr, el => el.name == name);
}

function G(arr, name) {
  let o = arr.find(o => o.name==name);
  return _.without(arr,o);
}

function H(arr, name) {
  $.each(arr, function(i){
      if(arr[i].name === 'Kristian') {
          arr.splice(i,1);
          return false;
      }
  });
  return arr;
}

function I(arr, name) {
  return $.grep(arr,o => o.name!=name);
}

// Test
let test1 = [   
    {name:"Kristian", lines:"2,5,10"},
    {name:"John", lines:"1,19,26,96"},  
];

let test2 = [   
    {name:"John3", lines:"1,19,26,96"},
    {name:"Kristian", lines:"2,5,10"},
    {name:"John", lines:"1,19,26,96"},
  {name:"Joh2", lines:"1,19,26,96"},
];

let test3 = [   
    {name:"John3", lines:"1,19,26,96"},
    {name:"John", lines:"1,19,26,96"},
  {name:"Joh2", lines:"1,19,26,96"},
];

console.log(`
Test1: original array from question
Test2: array with more data
Test3: array without element which we want to delete
`);

[A,B,C,D,E,F,G,H,I].forEach(f=> console.log(`
Test1 ${f.name}: ${JSON.stringify(f([...test1],"Kristian"))}
Test2 ${f.name}: ${JSON.stringify(f([...test2],"Kristian"))}
Test3 ${f.name}: ${JSON.stringify(f([...test3],"Kristian"))}
`));
```

```
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.20/lodash.min.js" integrity="sha512-90vH1Z83AJY9DmlWa8WkjkV79yfS2n2Oxhsi2dZbIv0nC4E6m5AbH8Nh156kkM7JePmqD6tcZsfad1ueoaovww==" crossorigin="anonymous"> </script>

This shippet only presents functions used in performance tests - it not perform tests itself!
```

这是 chrome 的示例结果

[![在此处输入图像描述](../Images/b1e240242de701ff2a43ac24f927ab55.png)](https://i.stack.imgur.com/ZO8TD.png)

* * *

## 回答 #16

> 赞同：9
> 
> 时间：2020-10-03T21:42:49.500

这是一个带有 map 和 splice 的示例

```
const arrayObject = [
  { name: "name1", value: "value1" },
  { name: "name2", value: "value2" },
  { name: "name3", value: "value3" },
];

let index = arrayObject.map((item) => item.name).indexOf("name1");
if (index > -1) {
  arrayObject.splice(index, 1);
  console.log("Result", arrayObject);
}
```

**输出**

```
Result [
  {
    "name": "name2",
    "value": "value2"
  },
  {
    "name": "name3",
    "value": "value3"
  }
] 
```

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2017-11-29T14:30:42.877

带 ES 6 箭头功能

```
let someArray = [
                 {name:"Kristian", lines:"2,5,10"},
                 {name:"John", lines:"1,19,26,96"}
                ];
let arrayToRemove={name:"Kristian", lines:"2,5,10"};
someArray=someArray.filter((e)=>e.name !=arrayToRemove.name && e.lines!= arrayToRemove.lines) 
```

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2012-04-05T08:40:23.023

虽然这可能不适合这种情况，但前几天我发现`delete`如果您不需要更改数组的大小，您也可以使用关键字从数组中删除项目，例如

```
var myArray = [1,2,3];

delete myArray[1];

console.log(myArray[1]); //undefined

console.log(myArray.length); //3 - doesn't actually shrink the array down 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2012-04-05T08:12:25.057

最简单的解决方案是创建一个按名称存储每个对象的索引的映射，如下所示：

```
//adding to array
var newPerson = {name:"Kristian", lines:"2,5,10"}
someMap[ newPerson.name ] = someArray.length;
someArray.push( newPerson );

//deleting from the array
var index = someMap[ 'Kristian' ];
someArray.splice( index, 1 ); 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2018-06-15T20:10:15.037

如果要删除给定对象的所有出现（基于某些条件），请在 for 循环中使用 javascript splice 方法。

由于删除对象会影响数组长度，因此请确保将计数器递减一步，以便长度检查保持不变。

```
var objArr=[{Name:"Alex", Age:62},
  {Name:"Robert", Age:18},
  {Name:"Prince", Age:28},
  {Name:"Cesar", Age:38},
  {Name:"Sam", Age:42},
  {Name:"David", Age:52}
];

for(var i = 0;i < objArr.length; i ++)
{
  if(objArr[i].Age > 20)
  {
    objArr.splice(i, 1);
    i--;  //re-adjust the counter.
  }
} 
```

上面的代码片段删除了所有年龄大于 20 的对象。

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2017-03-05T09:48:07.900

您也可以使用**地图**功能。

```
someArray = [{name:"Kristian", lines:"2,5,10"},{name:"John",lines:"1,19,26,96"}];
newArray=[];
someArray.map(function(obj, index){
    if(obj.name !== "Kristian"){
       newArray.push(obj);
    }
});
someArray = newArray;
console.log(someArray); 
```

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2018-07-27T09:48:05.303

这个答案

```
for (var i =0; i < someArray.length; i++)
   if (someArray[i].name === "Kristian") {
      someArray.splice(i,1);
   } 
```

不适用于满足条件的多个记录。如果您有两条这样的连续记录，则仅删除第一条，跳过另一条。你必须使用：

```
for (var i = someArray.length - 1; i>= 0; i--)
   ... 
```

反而 。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2012-04-05T08:13:56.287

你的数组语法似乎有一个错误，所以假设你的意思是一个数组而不是一个对象，[Array.splice](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)是你的朋友：

```
someArray = [{name:"Kristian", lines:"2,5,10"}, {name:"John", lines:"1,19,26,96"}];
someArray.splice(1,1) 
```

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2012-04-05T11:13:46.210

使用 javascript 的 splice() 函数。

这可能会有所帮助：[http ://www.w3schools.com/jsref/jsref_splice.asp](http://www.w3schools.com/jsref/jsref_splice.asp)

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2017-07-06T18:59:23.817

你也可以使用[`some`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)：

```
someArray = [{name:"Kristian", lines:"2,5,10"},
             {name:"John", lines:"1,19,26,96"}];

someArray.some(item => { 
    if(item.name === "Kristian") // Case sensitive, will only remove first instance
        someArray.splice(someArray.indexOf(item),1) 
}) 
```

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2020-06-10T06:40:53.430

我想答案是非常分支和打结的。

您可以使用以下路径删除与现代 JavaScript 术语中给出的对象匹配的数组对象。

```
 coordinates = [
    { lat: 36.779098444109145, lng: 34.57202827508546 },
    { lat: 36.778754712956506, lng: 34.56898128564454 },
    { lat: 36.777414146732426, lng: 34.57179224069215 }
];

coordinate = { lat: 36.779098444109145, lng: 34.57202827508546 };

removeCoordinate(coordinate: Coordinate): Coordinate {
    const found = this.coordinates.find((coordinate) => coordinate == coordinate);
    if (found) {
      this.coordinates.splice(found, 1);
    }
    return coordinate;
  } 
```

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2018-04-05T00:03:50.080

这就是我使用的。

```
Array.prototype.delete = function(pos){
    this[pos] = undefined;
    var len = this.length - 1;
    for(var a = pos;a < this.length - 1;a++){
      this[a] = this[a+1];
    }
    this.pop();
  } 
```

然后就是这么简单

```
var myArray = [1,2,3,4,5,6,7,8,9];
myArray.delete(3); 
```

用任意数字代替三。之后预期的输出应该是：

```
console.log(myArray); //Expected output 1,2,3,5,6,7,8,9 
```

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2014-10-09T23:45:00.867

splice(i, 1) 其中 i 是数组的增量索引将删除对象。但请记住 splice 也会重置数组长度，因此请注意“未定义”。使用您的示例，如果您删除“Kristian”，那么在循环内的下一次执行中，i 将为 2，但 someArray 的长度为 1，因此如果您尝试删除“John”，您将收到“未定义”错误. 一个解决方案虽然不优雅，但有一个单独的计数器来跟踪要删除的元素的索引。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2017-02-09T18:42:53.707

`name`仅返回属性不是“Kristian”的数组中的对象

```
var noKristianArray = $.grep(someArray, function (el) { return el.name!= "Kristian"; }); 
```

* * *

**演示：**

```
 var someArray = [
                {name:"Kristian", lines:"2,5,10"},
                {name:"John", lines:"1,19,26,96"},
                {name:"Kristian", lines:"2,58,160"},
                {name:"Felix", lines:"1,19,26,96"}
                ];

var noKristianArray = $.grep(someArray, function (el) { return el.name!= "Kristian"; });

console.log(noKristianArray);
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2017-08-04T11:48:26.403

这个概念使用剑道网格

```
var grid = $("#addNewAllergies").data("kendoGrid");

var selectedItem = SelectedCheckBoxList;

for (var i = 0; i < selectedItem.length; i++) {
    if(selectedItem[i].boolKendoValue==true)
    {
        selectedItem.length= 0;
    }
} 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-07-08T20:04:35.377

如果您知道数组中的对象没有任何属性（或者可能是唯一的），但是您有对要删除的对象的引用，则可以执行`unregisterObject`以下方法中的操作：

```
let registeredObjects = [];

function registerObject(someObject) { registeredObjects.push(someObject); }
function unregisterObject(someObject) { registeredObjects = registeredObjects.filter(obj => obj !== someObject); }

let myObject1 = {hidden: "someValue1"}; // Let's pretend we don't know the hidden attribute
let myObject2 = {hidden: "someValue2"};

registerObject(myObject1);
registerObject(myObject2);
console.log(`There are ${registeredObjects.length} objects registered. They are: ${JSON.stringify(registeredObjects)}`);

unregisterObject(myObject1);
console.log(`There are ${registeredObjects.length} objects registered. They are: ${JSON.stringify(registeredObjects)}`);
```

# varnish - Varnish 客户端 IP 未登录 Apache 日志

> ID：10024877
> 
> 赞同：6
> 
> 时间：2012-04-05T08:08:48.013
> 
> 标签：varnish, varnish-vcl

我已经用 Apache 配置了 Varnish 3，它运行得很好。但是我无法在 Apache 日志中登录客户端 ip。我尝试了一些解决方案，但没有运气。现在我的 Apache 访问日志文件正在记录服务器 IP 而不是客户端 IP 地址。

以下是我的配置供您考虑：

清漆 VCL：（/etc/varnish/default.vlc）：[http ://pastebin.com/PuBqZ6fx](http://pastebin.com/PuBqZ6fx)

# 阿帕奇配置

/etc/httpd/conf/httpd.conf

LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" varnishcombined

# 阿帕奇虚拟主机

...... 其他东西 ...... ErrorLog 日志/fr-error-log CustomLog 日志/fr-custom-log varnishcombined ...... 其他东西 .....

注意：安装的 Varnish 版本是 varnish-3.0.2-1.el5.x86_64

谢谢。拉赫尔

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T12:06:28.870

我认为您在 pastebin 示例中有一个有效的配置，这实际上应该可以解决问题：

```
if (req.restarts == 0) {
  if (req.http.X-Forwarded-For) {
    set req.http.X-Forwarded-For = req.http.X-Forwarded-For + ", " + client.ip;
  } else {
    set req.http.X-Forwarded-For = client.ip;
  }
} 
```

在您的 vcl_recv{} 中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-05T11:24:53.080

正如评论中提到的OP，解决方案是一个Apache模块。Varnish`X-Forwarded-For`默认添加标题。

然后像[mod_rpaf](http://www.stderr.net/apache/rpaf/) (Apache 2.2) 或[`mod_remoteip`](http://httpd.apache.org/docs/trunk/mod/mod_remoteip.html)(Apache 2.4) 这样的 apache 模块会将 remote_ip 值设置为`X-Forwarded-For`标头传入的值。

这提供了一个比简单地将 X-Forwarded-For 标头的值记录到 apache 日志中更强大的解决方案。例如，它允许您通过 Varnish 或直接访问 2 个 IP 上的同一个站点，并且该站点按您预期的方式运行并正确记录。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-19T00:53:59.507

将此行添加到您的 vcl

```
sub vcl_recv {
  # Add a unique header containing the client address
  remove req.http.X-Forwarded-For;
  set    req.http.X-Forwarded-For = client.ip;

} 
```

然后改变apache的logformat

```
LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" varnishcombined 
```

现在在您的虚拟主机中

```
<VirtualHost *:8080>
  ServerName www.abc.com

  CustomLog /var/log/httpd/www.abc.com/access.log varnishcombined

</VirtualHost> 
```

# c# - 从 AppDomain 创建实例时程序集未解析

> ID：10024879
> 
> 赞同：1
> 
> 时间：2012-04-05T08:08:56.157
> 
> 标签：c#, .net, .net-4.0, assemblies, appdomain

```
var processAssembly  = Assembly.LoadFile(baseLocationCCDebugFolder+"\\CC.dll");
var processType = processAssembly.GetType("CC.Executor.CCProcess",true,true);

AppDomainSetup appDSetup = new AppDomainSetup()
{
  ApplicationBase = baseLocationCCDebugFolder,
  //PrivateBinPath = processAssembly.CodeBase
};

StrongName fullTrustAssembly = processAssembly.Evidence.GetHostEvidence<StrongName>();

AppDomain executionDomain = AppDomain.CreateDomain("ExecutionDomain",null,appDSetup,internetPS,fullTrustAssembly);
CCProcess process =(CCProcess)executionDomain.CreateInstanceAndUnwrap(processAssembly.ManifestModule.FullyQualifiedName, processType.FullName); 
```

我在此代码的最后一行遇到错误，如下所示。

```
Could not load file or assembly 'D:\\work\\compilerCom\\CompileCom_Build_4_newArchitecture\\CompilerCom\\CC\\bin\\Debug\\CC.dll' or one of its dependencies. The given assembly name or codebase was invalid. (Exception from HRESULT: 0x80131047)<br/> 
```

我仍然在应用程序域中寻找我的方式。
我究竟做错了什么？

编辑：-`baseLocationCCDebugFolder`变量的值是`D:\\work\\compilerCom\\CompileCom_Build_4_newArchitecture\\CompilerCom\\CC\\bin\\Debug`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:33:02.450

我的猜测是，不是未找到该程序集，而是未正确加载引用的程序集之一。您可能需要处理父 appdomain 中的解析程序集事件。这里有一篇很好的文章来描述它。

[http://social.msdn.microsoft.com/forums/en-US/clr/thread/0a18ed66-6995-4e7c-baab-61c1e528fb82/](http://social.msdn.microsoft.com/forums/en-US/clr/thread/0a18ed66-6995-4e7c-baab-61c1e528fb82/)

# java - Play 2.0 框架模板引擎中的计算

> ID：10024880
> 
> 赞同：4
> 
> 时间：2012-04-05T08:08:56.787
> 
> 标签：java, scala, playframework, playframework-2.0

play 2.0模板引擎是否支持html页面中的简单计算。

假设，我创建了一个 sum.scala.html 页面：

```
@(a:String, b: String)

<html>
<head></head>
<body>
  <h1> answer is getSum(@a,@b) </h1>
</body>
</html> 
```

有什么方法可以通过某个函数“获取 a 和 b 的总和”？或者是否有任何 play 2.0 专家知道关于 play 2.0 模板引擎中的计算的好主意？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-05T08:59:08.213

你试过`@(a.toInt + b.toInt)`吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T08:19:42.027

您可以将值传递给模板，不是吗？

```
@(a:String, b: String, c: String)

<h1> answer for @a + @b is @c </h1> 
```

您还可以从`Yourcontroller`模板中调用函数：

```
@Yourcontroller.getSum(a,b); 
```

在`/app/controllers/Yourcontroller.java`广告中，功能（最简单的示例）：

```
public static Integer getSum(String a, String b){
    Integer c = Integer.valueOf(a) + Integer.valueOf(b);
    return c;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T12:42:07.657

如果要多次引用结果，可以使用`defining`：

```
@defining(a.toInt + b.toInt) { sum =>
  <h1>The sum is @sum</h1>
  The sum of @a + @b is @sum
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-03T11:12:18.950

用于在 scala html 模板中重用您的代码。您可以为此在模板中创建模板功能。

```
@sum(a:Long,b:Long) = {
@(a + b)
} 
```

并在您的模板中将其作为普通函数调用。喜欢@sum(2,3)

# android - GLSL - 顶点属性中的错误数据

> ID：10024883
> 
> 赞同：1
> 
> 时间：2012-04-05T08:09:07.040
> 
> 标签：android, glsl, opengl-es-2.0, vbo, vertex-shader

我已经花了 2 天时间试图弄清楚这个问题，但没有用。

我已经使用 opengles2.0 for android 编写了一个 collada 动画渲染器；使用着色器进行蒙皮。代码几乎完成了，它在我的 HTC DesireS 上运行得很好。

但是，当我尝试在带有 PowerVR 芯片组的三叉戟 SetTopBox 上运行相同的程序时，我的几何图形不会显示。经过一天的调试，我发现它正在发生，因为我得到 != -1 作为着色器中的骨骼矩阵索引。

我确认它在我的手机中是 == -1；但在机顶盒中是 != -1。

什么可能是错的？请救我脱离这个大麻烦。

抱歉没有贴出代码。这是顶点着色器。我期望 vec2(boneIndices) 在 [0] 和 [1] 中有 -1；但在 Powervr 上并非如此。

```
attribute vec4 vPosition;
attribute vec2 vTexCoord;
attribute vec2 boneIndices;
attribute vec2 boneWeights;

uniform mat4 boneMatrices[BNCNT];

uniform mat4 modelMatrix;
uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;

varying mediump vec2 fTexCoord;
varying mediump vec3 col;

void main(){
    vec4 tempPosition = vPosition;
    int index = int(boneIndices.x);
    col = vec3(1.0, 0.0, 0.0);
    if(index >= 0){
        col.y = 1.0;
        tempPosition = (boneMatrices[index] * vPosition) * boneWeights.x;
    }
    index = int(boneIndices.y);
    if(index >= 0){
        col.z = 1.0;
        tempPosition = (boneMatrices[index] * vPosition) * boneWeights.y + tempPosition;
    }
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * tempPosition;

    fTexCoord = vTexCoord;
} 
```

* * *

设置属性指针

```
glVertexAttribPointer(position, 3, GL_FLOAT, GL_FALSE, 13*sizeof(GLfloat), 0);
glVertexAttribPointer(texCoord, 2, GL_FLOAT, GL_FALSE, 13*sizeof(GLfloat), (GLvoid*)(3*sizeof(GLfloat)));
glVertexAttribPointer(boneIndices, 2, GL_FLOAT, GL_FALSE, 13*sizeof(GLfloat), (GLvoid*)(9*sizeof(GLfloat)));
glVertexAttribPointer(boneWeights, 2, GL_FLOAT, GL_FALSE, 13*sizeof(GLfloat), (GLvoid*)(11*sizeof(GLfloat)));
glEnableVertexAttribArray(position);
glEnableVertexAttribArray(texCoord);
glEnableVertexAttribArray(boneIndices);
glEnableVertexAttribArray(boneWeights); 
```

* * *

我的顶点和索引缓冲区

```
GLfloat vertices[13*6] =
{-0.5*size, -0.5*size, 0, 0,1, 1,1,1,1, -1,-1, 0,0,                                 
 -0.5*size,  0.5*size, 0, 0,0, 1,1,1,1, -1,-1, 0,0, 
  0.5*size,  0.5*size, 0, 1,0, 1,1,1,1, -1,-1, 0,0, 

 -0.5*size, -0.5*size, 0, 0,1, 1,1,1,1, -1,-1, 0,0, 
  0.5*size,  0.5*size, 0, 1,0, 1,1,1,1, -1,-1, 0,0, 
0.5*size, -0.5*size, 0, 1,1, 1,1,1,1, -1,-1, 0,0 };

GLushort indices[]= {0,1,2, 3,4,5}; 
```

* * *

我期望着色器中的索引为-1；但他们不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:50:41.327

经过几天的挫折，**我终于自己找到了问题所在**。

罪魁祸首是“int()”函数调用，即使我指定 -1，它也会返回 0。观察到的行为是它返回
0 表示 -1
-1 表示 -2
-2 表示 -3 等等......

我不确定这是否是驱动程序/硬件错误，或者是因为浮点表示，其中 -1 表示为“-.9999999”之类的东西

任何人都可以对此有所了解吗？

# java - WEB : 读入文件并编辑其字段

> ID：10024884
> 
> 赞同：0
> 
> 时间：2012-04-05T08:09:07.903
> 
> 标签：java, javascript, html, applet

我有一个简单的配置文件，包括

var = '价值'

...

行，我想在网页中显示这些并能够编辑值并保存回文件。我考虑过 java applet 和 javascript，但我想问问做过这件事的人。

# mysql - 大数据的数据库选择

> ID：10024893
> 
> 赞同：6
> 
> 时间：2012-04-05T08:09:58.720
> 
> 标签：mysql, database, nosql, distributed, bigdata

我有很多文本文件，它们的总大小约为 300GB ~ 400GB。它们都是这种格式

```
key1 value_a
key1 value_b
key1 value_c
key2 value_d
key3 value_e
.... 
```

每行由一个键和一个值组成。我想创建一个数据库，它可以让我查询一个键的所有值。例如，当我查询 key1 时，返回 value_a、value_b 和 value_c。

首先，将所有这些文件插入数据库是一个大问题。我尝试使用 LOAD DATA INFILE 语法将几 GB 大小的块插入 MySQL MyISAM 表。但似乎 MySQL 不能利用多核来插入数据。它像地狱一样慢。所以，对于这么多记录，我认为 MySQL 不是一个好的选择。

此外，如果可能，我需要定期、每周甚至每天更新或重新创建数据库，因此，插入速度对我来说很重要。

单个节点不可能有效地进行计算和插入，要高效，我认为最好在不同节点中并行执行插入。

例如，

```
node1 -> compute and store 0-99999.txt
node2 -> compute and store 10000-199999.txt
node3 -> compute and store 20000-299999.txt
.... 
```

所以，这是第一个标准。

**标准 1\. 分布式批处理方式插入速度快。**

然后，正如您在文本文件示例中看到的那样，最好为不同的值提供多个相同的键。就像示例中的 key1 映射到 value_a/value_b/value_c 一样。

**标准 2\. 允许多个键**

然后，我需要查询数据库中的键。不需要关系或复杂的连接查询，我只需要简单的键/值查询。重要的部分是相同值的多个键

**标准 3\. 简单快速的键值查询。**

我知道有 HBase/Cassandra/MongoDB/Redis....等等，但我对它们都不熟悉，不确定哪一个适合我的需求。所以，问题是 - 使用什么数据库？如果它们都不符合我的需求，我什至打算建立自己的，但这需要努力：/

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T09:30:31.530

可能有很多系统可以满足您的需求。您的要求通过以下几种方式让事情变得轻松愉快：

*   因为您不需要任何跨键操作，您可以使用多个数据库，通过散列或范围分片在它们之间划分键。这是解决您在 MySQL 中观察到的缺乏并行性的简单方法，并且可能会在许多其他数据库系统中观察到。
*   因为您从不进行任何在线更新，所以您可以批量构建一个不可变数据库，然后在一天/一周的剩余时间里查询它。我希望您通过这种方式获得更好的性能。

我倾向于构建一组散列分片[LevelDB](http://code.google.com/p/leveldb/)表。也就是说，我不会使用`leveldb::DB`支持更复杂数据结构（一堆表和一个日志）的实际，以便您可以进行在线更新；相反，我会直接使用`leveldb::Table`和`leveldb::TableBuilder`对象（没有日志，给定键只有一个表）。这是一种非常有效的查询格式。如果您的输入文件已经像您的示例中那样排序，那么表格构建也将非常有效。您可以通过增加分片数量来实现所需的任何并行性——如果您使用 16 核、16 磁盘机器来构建数据库，则至少使用 16 个分片，所有这些分片都是并行生成的。如果您使用 16 台 16 核、16 磁盘机器，则至少 256 个分片。如果像现在很多人一样，您的磁盘数量比核心数量少得多，请同时尝试两者，但您可能会发现更少的分片可以更好地避免寻道。如果你小心点，我认为你基本上可以在构建表时最大限度地提高磁盘吞吐量，这就是我所说的很多。d 由于键前缀压缩（以及可选的 Snappy 块压缩），预计这些表明显小于您的输入文件。您将主要避免搜索，因为除了您通常可以在 RAM 中缓冲的相对较小的索引之外，leveldb 表中的键的存储顺序与您从输入文件中读取它们的顺序相同，再次假设您的输入文件已经排序。如果不是，您可能需要足够的分片，以便您可以在 RAM 中对分片进行排序，然后将其写出，也许更按顺序处理分片。再次假设您的输入文件已经排序。如果不是，您可能需要足够的分片，以便您可以在 RAM 中对分片进行排序，然后将其写出，也许更按顺序处理分片。再次假设您的输入文件已经排序。如果不是，您可能需要足够的分片，以便您可以在 RAM 中对分片进行排序，然后将其写出，也许更按顺序处理分片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T00:39:56.183

我建议你使用 SSDB（[https://github.com/ideawu/ssdb](https://github.com/ideawu/ssdb)），一个适合存储数据集合的 leveldb 服务器。

您可以将数据存储在地图中：

```
ssdb->hset(key1, value1)
ssdb->hset(key1, value2)
...

list = ssdb->hscan(key1, 1000);
// now list = [value1, value2, ...] 
```

SSDB速度快（速度是Redis的一半，每秒30000次插入），是leveldb的网络封装，单线安装启动。其客户包括 PHP、C++、Python、Java、Lua、...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:00:29.517

传统的答案是，如果你有大笔钱，就使用 Oracle，如果你没有，就使用 PostgreSQL。但是，我建议您也看看像 mongoDb 这样的解决方案，我发现它非常快，并且还可以适应您的架构不固定并且可以在您的数据中更改的场景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T10:24:41.020

由于您已经熟悉 MySQL，因此我建议您在迁移到新系统之前尝试所有 MySQL 选项。许多大数据系统针对非常具体的问题进行了调整，但在 RDBMS 认为理所当然的领域表现不佳。此外，大多数应用程序需要常规 RDBMS 功能以及大数据功能。因此，迁移到新系统可能会产生新问题。

还要考虑您选择的系统周围可用的软件生态系统、社区支持和知识库。

回到解决方案，数据库中有多少行？这是一个重要的指标。我假设超过1亿。

尝试[分区](http://dev.mysql.com/doc/refman/5.6/en/partitioning.html)。它可以帮助很多。您的选择标准很简单，而且您不需要连接，这一事实只会让事情变得更好。

Postgres 有一种处理分区的好方法。它需要更多的代码来启动和运行，但提供了惊人的控制。与 MySQL 不同，Postgres 对分区数量没有硬性限制。Postgres 中的分区是常规表。这使您可以更好地控制索引、搜索、备份、恢复、并行数据访问等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T18:01:31.863

看看[HBase](http://hbase.apache.org/)。您可以使用列针对一个键存储多个值。与 RDBMS 不同，您不需要在每一行中具有固定的列集，但可以在一行中具有任意数量的列。由于您通过键（HBase 用语中的行键）查询数据，因此您可以通过读取该行中所有列的值来检索给定键的所有值。

HBase 也有保留期的概念，因此您可以决定哪些列可以存活多长时间。因此，数据可以根据需要自行清理。人们采用了一些有趣的技术来利用保留期。

HBase 具有很强的可扩展性，并且支持非常快速的读取和写入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T14:08:37.153

InfoBright 或许是个不错的选择。

# eclipse - 为什么应用程序没有错误时，Eclipse jar 文件会产生编译错误？

> ID：10024894
> 
> 赞同：1
> 
> 时间：2012-04-05T08:10:02.897
> 
> 标签：eclipse, jar, warnings

我正在尝试使用 Eclipse 生成我的项目的 jar 文件，当我尝试使用它时，它给了我错误，因为某些文件没有包含在 jar 文件中。我再次重新编译了项目，在生成 jar 文件后，它指出“Jar 文件导出完成并出现警告”并且某些文件在导出时出现编译警告。

还有另一种生成jar文件的方法吗？我尝试使用 netbeans，但它不允许我导入项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:18:10.887

您可以在项目属性中检查您在项目环境中使用的依赖项 ( `Project -> Properties -> Java Build Path`)。

如果您正在创建的 JAR 文件中未包含所有必要的依赖项，并且在目标系统的类路径中也不可用，则会发生此类错误。

您可以将所需的依赖项打包到您的 JAR 中，也可以将它们单独部署到目标系统 - 您使用哪种方法实际上取决于依赖项是 3rd 方库（它们应该单独部署）还是作为一部分的本地组件系统本身（它们应该打包在一起）。

# php - 使用 PHP 的 Ajax 即时通讯工具

> ID：10024895
> 
> 赞同：1
> 
> 时间：2012-04-05T08:10:03.843
> 
> 标签：php, ajax, jquery

试图为我的网站创建一个 AJAX IM...需要在将行插入 mysql DB 时加载页面的一部分...任何人都可以帮我解决这个问题..提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:52:33.090

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">
var  waittime=2000;
var intUpdate = null;

function verifDB(){

$.ajax({
   type: "POST",
   url: "verifdb.php",
   success: function(msg){
    alert(msg),; 
   }
 });

intUpdate = setTimeout("verifDB()", waittime);
}
verifDB();
</script> 
```

每 2000 毫秒查询一次 verifdb.php 文件以检查数据库，您可以将文件放在 requette verifdb.php 中，您将在变量 msg 中得到答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:07:48.367

**客户端**

对于客户端的异步请求，您可以使用 JQuery 或纯 Javascript [XMLHTTPRequest](https://developer.mozilla.org/En/XMLHttpRequest/Using_XMLHttpRequest)

**服务器端**

我知道您已经指定了 PHP，但我建议您检查[google 频道](https://developers.google.com/appengine/docs/python/channel/overview)的工作方式并在 PHP 中进行类似的实现。

由于检查有多个用户检查数据库上的更新，我建议您使用 memcache。

就像是：

```
$script_called_time = time();
while($memcache->get('last_message') < $script_called_time){
    usleep(100);
}

$result = $database->query("SELECT * FROM `messages` WHERE `date` > " . $script_called_time . "'");
... 
```

这样将建立连接，并且用户将在有任何响应时收到响应...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-23T21:29:03.230

```
(function() {
  var chat = {
    messageToSend: "",
    messageResponses: [
      "I Love You",
      "I Wants to Kiss You.",
      'Hug Me!"',
      "Lets Sleep Together",
      "Lets go for a date",
      "Will you be physical with me?"
    ],
    init: function() {
      this.cacheDOM();
      this.bindEvents();
      this.render();
    },
    cacheDOM: function() {
      this.$chatHistory = $(".chat-history");
      this.$button = $("button");
      this.$textarea = $("#message-to-send");
      this.$chatHistoryList = this.$chatHistory.find("ul");
    },
    bindEvents: function() {
      this.$button.on("click", this.addMessage.bind(this));
      this.$textarea.on("keyup", this.addMessageEnter.bind(this));
    },
    render: function() {
      this.scrollToBottom();
      if (this.messageToSend.trim() !== "") {
        var template = Handlebars.compile($("#message-template").html());
        var context = {
          messageOutput: this.messageToSend,
          time: this.getCurrentTime()
        };

        this.$chatHistoryList.append(template(context));
        this.scrollToBottom();
        this.$textarea.val("");

        // responses
        var templateResponse = Handlebars.compile(
          $("#message-response-template").html()
        );
        var contextResponse = {
          response: this.getRandomItem(this.messageResponses),
          time: this.getCurrentTime()
        };

        setTimeout(
          function() {
            this.$chatHistoryList.append(templateResponse(contextResponse));
            this.scrollToBottom();
          }.bind(this),
          1500
        );
      }
    },

    addMessage: function() {
      this.messageToSend = this.$textarea.val();
      this.render();
    },
    addMessageEnter: function(event) {
      // enter was pressed
      if (event.keyCode === 13) {
        this.addMessage();
      }
    },
    scrollToBottom: function() {
      this.$chatHistory.scrollTop(this.$chatHistory[0].scrollHeight);
    },
    getCurrentTime: function() {
      return new Date()
        .toLocaleTimeString()
        .replace(/([\d]+:[\d]{2})(:[\d]{2})(.*)/, "$1$3");
    },
    getRandomItem: function(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }
  };

  chat.init();

  var searchFilter = {
    options: { valueNames: ["name"] },
    init: function() {
      var userList = new List("people-list", this.options);
      var noItems = $('<li id="no-items-found">No items found</li>');

      userList.on("updated", function(list) {
        if (list.matchingItems.length === 0) {
          $(list.list).append(noItems);
        } else {
          noItems.detach();
        }
      });
    }
  };

  searchFilter.init();
})(); 
```

[Messenger 使用 Jquery 和 PHP](https://codepen.io/ashokpachauri/pen/WNvaNgN) 如果您需要有关此答案的任何帮助，请随时通过 pachauriashokkumar[at]gmail[dot]com 与我联系

需要外部文件

1.  [https://code.jquery.com/jquery-3.4.1.js](https://code.jquery.com/jquery-3.4.1.js)
2.  [https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js](https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js)
3.  [https://raw.githubusercontent.com/javve/list.js/v1.5.0/dist/list.min.js](https://raw.githubusercontent.com/javve/list.js/v1.5.0/dist/list.min.js)

使用 JQuery 和 PHP 演示的 Messenger也在[这里](https://codepen.io/ashokpachauri/pen/WNvaNgN)[PenCode](https://codepen.io/ashokpachauri/pen/WNvaNgN)上这篇文章的作者可通过电子邮件 pachauriashokkumar[at]gmail[dot]com 进行澄清

# android - 我们能否将 Android 作为一个操作系统缩小到仅使用 70-80% 的实际屏幕？

> ID：10024897
> 
> 赞同：1
> 
> 时间：2012-04-05T08:10:09.270
> 
> 标签：android, android-layout, android-widget

我想在这里实现的是缩小所有 Android 的操作系统 UI（包括所有内容）以仅使用 70-80% 的屏幕。

原因是我希望我的区域可以放置我想要的任何东西 - 存在且始终可见的应用程序图标（无论我是在浏览器中，还是在玩愤怒的小鸟等）......就像 Windows 的快速启动或 Mac 的永远呆在那里的码头。我还可以添加一些我希望在与设备或其他任何交互过程中看到的重要文本。

我只想自己使用 20-30% 的屏幕尺寸并在屏幕的剩余部分运行 Android。

![在此处输入图像描述](../Images/efd8e5801cde377ffc01ffc5a17ded1b.png)

你认为有可能吗？如果是这样，你能给我指点吗？

非常感谢，

罗汉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:13:28.780

对我来说有两种解决方案：1）创建自定义 Android 构建。稍微更改 WindowManager 代码。2）创建自己的虚拟键盘，它将为键盘和你的东西提供服务（http://developer.android.com/reference/android/inputmethodservice/InputMethodService.html）

# android - 在 webView 上显示电子邮件？

> ID：10024898
> 
> 赞同：4
> 
> 时间：2012-04-05T08:10:11.897
> 
> 标签：android, email, webview, mime-types

我正在获取除附件之外的整个电子邮件内容并将其作为字符串插入数据库中。但是，当我从 db 中获取它并使用以下代码将其加载到 webView 时，它无法正确打开邮件。

`mailView.loadDataWithBaseURL(null, body, "text/plain", "UTF-8", null);`

当我查看邮件部分的内容类型时，根据电子邮件的内容，它给了我很多类型，`mime types`例如 "text/html" 、 "text/plain" 、 "multipart/alternative" 等等。我不知道如何加载包含多种类型的邮件`mime`。这里我附上了一些演示项目的图像，展示了这个邮件功能，请仔细阅读它们：![Demo_mail 图像显示纯文本和 html 文本。](../Images/632bf8ef670c205a96f7a8fa3ff45929.png)

![在此处输入图像描述](../Images/2e862bf460c36d93cce8c80fb9c828a3.png) ![在此处输入图像描述](../Images/8e592740c7d7a6494b047537af36871e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-04T22:05:56.023

我遇到了同样的问题并按以下步骤解决：

1.  将电子邮件正文提取为 text/plain 或 text/html，如果为 text/plain，则需要对内容进行转义，以便在 webview 中正确显示。
2.  使用以下方式调用 loadDataWithBaseURL() ： mMessageContentView.loadDataWithBaseURL("email://", html, "text/html", "utf-8", null);

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:35:49.353

我首先要确保您的数据库以正确的编码存储数据。它可能会丢失 UTF-8 数据。

# python - 不同计算机上的 Python 以不同方式报告失败的断言

> ID：10024902
> 
> 赞同：0
> 
> 时间：2012-04-05T08:10:20.307
> 
> 标签：python, assertions

在远程服务器上，我在 Python 上运行我的代码既不输出失败断言的确切行，也不输出以下注释。在我的本地机器上，输出符合预期。

这是什么原因？我需要安装额外的软件包吗？

远程服务器：

```
...
Traceback (most recent call last):
  File "classify.py", line 48, in <module>
    print "start reading files"
AssertionError
me@remoe:~/foo$ python --version
Python 2.7.2+ 
```

在我的本地机器上：

```
...
start processing training data
Traceback (most recent call last):
  File "classify.py", line 83, in <module>
    assert(test_images == 0)  # no test files found
AssertionError
me@local:~/foo$ python --version
Python 2.6.6 
```

**[更新]**

服务器上的代码与本地计算机上的代码相同，因为我将本地硬盘安装在服务器上。

我试着写一个最小的例子，但它太小了，所以没有效果。我将尝试构建一个更广泛的最小示例，其中出现错误。

有人可以指点我一个教程来安装另一个python版本而不会弄乱一切。

# sql - 使用多个复合输出参数调用 PostgreSQL 函数

> ID：10024905
> 
> 赞同：3
> 
> 时间：2012-04-05T08:10:26.630
> 
> 标签：sql, database, function, postgresql, plpgsql

我想在 PostgreSQL 9.1 中定义一个函数，它接受多个复合类型的 INOUT 参数，但我不知道如何调用它。

例如。

```
CREATE TYPE my_type_a AS (a integer, b float);
CREATE TYPE my_type_b AS (c boolean, d varchar(5));

CREATE FUNCTION my_complex_func(INOUT a my_type_a, INOUT b my_type_b)
RETURNS RECORD
'...'
LANGUAGE plpgsql; 
```

定义语句执行得很好，但是我不知道如何调用这个函数！我试过了：

```
SELECT INTO a, b
    a, b FROM my_complex_func(a, b); 
```

但这给出了一个错误：

```
ERROR:  record or row variable cannot be part of multiple-item INTO list 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:25:43.830

我认为这与您的输入类型或它们的数量没有任何关系。

不要返回 RECORD，返回真正的复合类型（使用 CREATE TYPE 定义）。

该错误`record or row variable cannot be part of multiple-item INTO list`是因为您试图将一个 ROW 嵌套在另一个 ROW 中。

这应该有效：

```
CREATE TYPE my_type_a AS (a integer, b float);
CREATE TYPE my_type_b AS (c boolean, d varchar(5));
CREATE TYPE ret_type  AS (w integer, v boolean);

CREATE FUNCTION my_complex_func(INOUT a my_type_a, INOUT b my_type_b)
RETURNS ret_type as $$
 ...
$$ LANGUAGE plpgsql; 
```

然后你可以这样做：

```
SELECT INTO a, b 
  (x.comp).w, (x.comp).v 
  FROM (select my_complex_func(j, i) as comp) x; 
```

* * *

这个具体的例子对我有用：

```
create type smelly1 as (a integer, b text);
create type smelly2 as (a boolean, b float);
create type rettype as (w integer, v boolean);
create function foo_func(n smelly1, m smelly2) returns rettype as $$
declare
  f_ret rettype;
begin
   f_ret.w := n.a;
   f_ret.v := m.a;
   return f_ret;
end;
$$ language plpgsql;

select (x.comp).w, (x.comp).v from 
  (select foo_func('(4, hello)'::smelly1, '(true,3.14)'::smelly2) as comp) x; 
```

返回：

```
 w | v 
---+---
 4 | t
(1 row) 
```

# wpf - 如何在 PRISM 中为所有模块（项目）使用单个 WCF 代理？

> ID：10024906
> 
> 赞同：1
> 
> 时间：2012-04-05T08:10:26.833
> 
> 标签：wpf, wcf, prism

我正在开发一个 WPF LOB 应用程序，它有几个模块，如销售、库存、采购等。我正在使用 WCF 从数据库中获取数据。由于创建 WCG 代理是一件昂贵的事情，我想创建一个 WCF 代理以在所有模块中使用。实现这一目标的最佳方法是什么？感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:08:04.643

Create `IWCFService` and import it into your ViewModels. Just make sure you create it as singleton (MEF exports like this by default).

Your infrastructure project or even your shell project can hold implementation of this interface and it will be available throughout application.

# c# - 如何使用 PDFSharp 从 PDF 中提取 FlateDecoded 图像

> ID：10024908
> 
> 赞同：5
> 
> 时间：2012-04-05T08:10:35.477
> 
> 标签：c#, pdfsharp

如何使用 PDFSharp 从 PDF 文档中提取 FlateDecoded（如 PNG）的图像？

我在 PDFSharp 的示例中发现了该评论：

```
// TODO: You can put the code here that converts vom PDF internal image format to a
// Windows bitmap
// and use GDI+ to save it in PNG format.
// [...]
// Take a look at the file
// PdfSharp.Pdf.Advanced/PdfImage.cs to see how we create the PDF image formats. 
```

有没有人有这个问题的解决方案？

感谢您的回复。

**编辑：**因为我无法在 8 小时内回答我自己的问题，所以我这样做：

感谢您的快速回复。

我在方法“ExportAsPngImage”中添加了一些代码，但没有得到想要的结果。它只是提取了更多图像（png）并且它们没有正确的颜色并且被扭曲。

这是我的实际代码：

```
PdfSharp.Pdf.Filters.FlateDecode flate = new PdfSharp.Pdf.Filters.FlateDecode();
        byte[] decodedBytes = flate.Decode(bytes);

        System.Drawing.Imaging.PixelFormat pixelFormat;

        switch (bitsPerComponent)
        {
            case 1:
                pixelFormat = PixelFormat.Format1bppIndexed;
                break;
            case 8:
                pixelFormat = PixelFormat.Format8bppIndexed;
                break;
            case 24:
                pixelFormat = PixelFormat.Format24bppRgb;
                break;
            default:
                throw new Exception("Unknown pixel format " + bitsPerComponent);
        }

        Bitmap bmp = new Bitmap(width, height, pixelFormat);
        var bmpData = bmp.LockBits(new Rectangle(0, 0, width, height), ImageLockMode.WriteOnly, pixelFormat);
        int length = (int)Math.Ceiling(width * bitsPerComponent / 8.0);
        for (int i = 0; i < height; i++)
        {
            int offset = i * length;
            int scanOffset = i * bmpData.Stride;
            Marshal.Copy(decodedBytes, offset, new IntPtr(bmpData.Scan0.ToInt32() + scanOffset), length);
        }
        bmp.UnlockBits(bmpData);
        using (FileStream fs = new FileStream(@"C:\Export\PdfSharp\" + String.Format("Image{0}.png", count), FileMode.Create, FileAccess.Write))
        {
            bmp.Save(fs, System.Drawing.Imaging.ImageFormat.Png);
        } 
```

那是正确的方法吗？还是我应该选择其他方式？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-08-01T07:21:20.953

我知道这个答案可能会晚几年，但也许会对其他人有所帮助。

在我的情况下发生了失真，因为`image.Elements.GetInteger(PdfImage.Keys.BitsPerComponent)`似乎没有返回正确的值。正如[Vive la déraison](https://stackoverflow.com/q/10024908)在您的问题下指出的那样，您获得了用于使用`Marshal.Copy`. 因此，在执行后反转字节并旋转位图`Marshal.Copy`就可以了。

生成的代码如下所示：

```
private static void ExportAsPngImage(PdfDictionary image, ref int count)
    {
        int width = image.Elements.GetInteger(PdfImage.Keys.Width);
        int height = image.Elements.GetInteger(PdfImage.Keys.Height);

        var canUnfilter = image.Stream.TryUnfilter();
        byte[] decodedBytes;

        if (canUnfilter)
        {
            decodedBytes = image.Stream.Value;
        }
        else
        {
            PdfSharp.Pdf.Filters.FlateDecode flate = new PdfSharp.Pdf.Filters.FlateDecode();
            decodedBytes = flate.Decode(image.Stream.Value);
        }

        int bitsPerComponent = 0;
        while (decodedBytes.Length - ((width * height) * bitsPerComponent / 8) != 0)
        {
            bitsPerComponent++;
        }

        System.Drawing.Imaging.PixelFormat pixelFormat;
        switch (bitsPerComponent)
        {
            case 1:
                pixelFormat = System.Drawing.Imaging.PixelFormat.Format1bppIndexed;
                break;
            case 8:
                pixelFormat = System.Drawing.Imaging.PixelFormat.Format8bppIndexed;
                break;
            case 16:
                pixelFormat = System.Drawing.Imaging.PixelFormat.Format16bppArgb1555;
                break;
            case 24:
                pixelFormat = System.Drawing.Imaging.PixelFormat.Format24bppRgb;
                break;
            case 32:
                pixelFormat = System.Drawing.Imaging.PixelFormat.Format32bppArgb;
                break;
            case 64:
                pixelFormat = System.Drawing.Imaging.PixelFormat.Format64bppArgb;
                break;
            default:
                throw new Exception("Unknown pixel format " + bitsPerComponent);
        }

        decodedBytes = decodedBytes.Reverse().ToArray();

        Bitmap bmp = new Bitmap(width, height, pixelFormat);
        BitmapData bmpData = bmp.LockBits(new Rectangle(0, 0, bmp.Width, bmp.Height), ImageLockMode.WriteOnly, bmp.PixelFormat);
        int length = (int)Math.Ceiling(width * (bitsPerComponent / 8.0));
        for (int i = 0; i < height; i++)
        {
            int offset = i * length;
            int scanOffset = i * bmpData.Stride;
            Marshal.Copy(decodedBytes, offset, new IntPtr(bmpData.Scan0.ToInt32() + scanOffset), length);
        }
        bmp.UnlockBits(bmpData);
        bmp.RotateFlip(RotateFlipType.Rotate180FlipNone);
        bmp.Save(String.Format("exported_Images\\Image{0}.png", count++), System.Drawing.Imaging.ImageFormat.Png);
    } 
```

该代码可能需要一些优化，但在我的情况下它确实正确导出了 FlateDecoded 图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:33:00.633

要获得 Windows BMP，您只需创建一个位图标题，然后将图像数据复制到位图中。PDF 图像是字节对齐的（每个新行都从一个字节边界开始），而 Windows BMP 是 DWORD 对齐的（每个新行都从一个 DWORD 边界开始（由于历史原因，一个 DWORD 是 4 个字节））。位图标题所需的所有信息都可以在过滤器参数中找到或可以计算出来。

调色板是 PDF 中的另一个 FlateEncoded 对象。您还可以将其复制到 BMP 中。

这必须针对多种格式（每像素 1 位、8 bpp、24 bpp、32 bpp）完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-09T05:06:48.490

这是我执行此操作的完整代码。

我正在从 PDF 中提取 UPS 运输标签，因此我提前知道格式。如果您提取的图像是未知类型，那么您需要检查`bitsPerComponent`并相应地处理它。我也只处理第一页上的第一张图片。

注意：我正在使用`TryUnfilter`“放气”，它使用应用的任何过滤器并为我就地解码数据。无需明确调用“Deflate”。

```
 var file = @"c:\temp\PackageLabels.pdf";

    var doc = PdfReader.Open(file);
    var page = doc.Pages[0];

    {
        // Get resources dictionary
        PdfDictionary resources = page.Elements.GetDictionary("/Resources");
        if (resources != null)
        {
            // Get external objects dictionary
            PdfDictionary xObjects = resources.Elements.GetDictionary("/XObject");
            if (xObjects != null)
            {
                ICollection<PdfItem> items = xObjects.Elements.Values;

                // Iterate references to external objects
                foreach (PdfItem item in items)
                {
                    PdfReference reference = item as PdfReference;
                    if (reference != null)
                    {
                        PdfDictionary xObject = reference.Value as PdfDictionary;
                        // Is external object an image?
                        if (xObject != null && xObject.Elements.GetString("/Subtype") == "/Image")
                        {
                            // do something with your image here 
                            // only the first image is handled here
                            var bitmap = ExportImage(xObject);
                            bmp.Save(@"c:\temp\exported.png", System.Drawing.Imaging.ImageFormat.Bmp);
                        }
                    }
                }
            }
        }
    } 
```

使用这些辅助函数

```
 private static Bitmap ExportImage(PdfDictionary image)
    {
        string filter = image.Elements.GetName("/Filter");
        switch (filter)
        {
            case "/FlateDecode":
                return ExportAsPngImage(image);

            default:
                throw new ApplicationException(filter + " filter not implemented");
        }
    }

    private static Bitmap ExportAsPngImage(PdfDictionary image)
    {
        int width = image.Elements.GetInteger(PdfImage.Keys.Width);
        int height = image.Elements.GetInteger(PdfImage.Keys.Height);
        int bitsPerComponent = image.Elements.GetInteger(PdfImage.Keys.BitsPerComponent);   

        var canUnfilter = image.Stream.TryUnfilter();
        var decoded = image.Stream.Value;

        Bitmap bmp = new Bitmap(width, height, System.Drawing.Imaging.PixelFormat.Format8bppIndexed);
        BitmapData bmpData = bmp.LockBits(new Rectangle(0, 0, bmp.Width, bmp.Height), ImageLockMode.WriteOnly, bmp.PixelFormat);
        Marshal.Copy(decoded, 0, bmpData.Scan0, decoded.Length);
        bmp.UnlockBits(bmpData);

        return bmp;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-12T11:53:40.923

到目前为止......我的代码......它适用于许多`png`文件，但不适用于来自 adobe photoshop 的带有色彩空间索引的文件：

```
 private bool ExportAsPngImage(PdfDictionary image, string SaveAsName)
        {
            int width = image.Elements.GetInteger(PdfSharp.Pdf.Advanced.PdfImage.Keys.Width);
            int height = image.Elements.GetInteger(PdfSharp.Pdf.Advanced.PdfImage.Keys.Height);
            int bitsPerComponent = image.Elements.GetInteger(PdfSharp.Pdf.Advanced.PdfImage.Keys.BitsPerComponent);
            var ColorSpace = image.Elements.GetArray(PdfImage.Keys.ColorSpace);
System.Drawing.Imaging.PixelFormat pixelFormat= System.Drawing.Imaging.PixelFormat.Format24bppRgb; //24 just for initalize

            if (ColorSpace is null) //no colorspace.. bufferedimage?? is in BGR order instead of RGB so change the byte order. Right now it works
            {
                byte[] origineel_byte_boundary = image.Stream.UnfilteredValue;
                bitsPerComponent = (origineel_byte_boundary.Length) / (width * height);
                switch (bitsPerComponent)
                {
                    case 4:
                        pixelFormat = System.Drawing.Imaging.PixelFormat.Format32bppPArgb;
                        break;
                    case 3:
                        pixelFormat = System.Drawing.Imaging.PixelFormat.Format24bppRgb;
                        break;
                    default:
                        {
                            MessageBox.Show("Unknown pixel format " + bitsPerComponent, "Error", MessageBoxButtons.OK, MessageBoxIcon.Warning);
                            return false;
                        }
                        break;
                }
                Bitmap bmp = new Bitmap(width, height, pixelFormat); //copy raw bytes to "master" bitmap so we are out of pdf format to work with 
                System.Drawing.Imaging.BitmapData bmd = bmp.LockBits(new Rectangle(0, 0, width, height), System.Drawing.Imaging.ImageLockMode.WriteOnly, pixelFormat);
                System.Runtime.InteropServices.Marshal.Copy(origineel_byte_boundary, 0, bmd.Scan0, origineel_byte_boundary.Length);
                bmp.UnlockBits(bmd);
                Bitmap bmp2 = new Bitmap(width, height, pixelFormat);
                for (int indicex = 0; indicex < bmp.Width; indicex++)
                {
                    for (int indicey = 0; indicey < bmp.Height; indicey++)
                    {
                        Color nuevocolor = bmp.GetPixel(indicex, indicey);
                        Color colorintercambiado = Color.FromArgb(nuevocolor.A, nuevocolor.B, nuevocolor.G, nuevocolor.R);
                        bmp2.SetPixel(indicex, indicey, colorintercambiado);
                    }
                }
                using (FileStream fs = new FileStream(SaveAsName, FileMode.Create, FileAccess.Write))
                {
                    bmp2.Save(fs, System.Drawing.Imaging.ImageFormat.Png);
                }
                bmp2.Dispose();
                bmp.Dispose();
            }
            else
            {
// this is the case of photoshop... work needs to be done here. I ´m able to get the color palette but no idea how to put it back or create the png file... 
                switch (bitsPerComponent)
                {
                    case 4:
                        pixelFormat = System.Drawing.Imaging.PixelFormat.Format32bppArgb;
                        break;
                    default:
                        {
                            MessageBox.Show("Unknown pixel format " + bitsPerComponent, "Error", MessageBoxButtons.OK, MessageBoxIcon.Warning);
                            return false;
                        }
                        break;
                }
                if ((ColorSpace.Elements.GetName(0) == "/Indexed") && (ColorSpace.Elements.GetName(1) == "/DeviceRGB"))
                {
                    //we need to create the palette
                    int paletteColorCount = ColorSpace.Elements.GetInteger(2);
                    List<System.Drawing.Color> paletteList = new List<Color>();
                    //Color[] palette = new Color[paletteColorCount+1]; // no idea why but it seams that there´s always 1 color more. ¿transparency?
                    PdfObject paletteObj = ColorSpace.Elements.GetObject(3);
                    PdfDictionary paletteReference = (PdfDictionary)paletteObj;
                    byte[] palettevalues = paletteReference.Stream.Value;
                    for (int index = 0; index < (paletteColorCount + 1); index++)
                    {
                        //palette[index] = Color.FromArgb(1, palettevalues[(index*3)], palettevalues[(index*3)+1], palettevalues[(index*3)+2]); // RGB
                        paletteList.Add(Color.FromArgb(1, palettevalues[(index * 3)], palettevalues[(index * 3) + 1], palettevalues[(index * 3) + 2])); // RGB
                    }                  
                }
            }
            return true;
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-13T10:28:50.600

PDF 可能包含带有遮罩和不同色彩空间选项的图像，这就是为什么在某些情况下简单地解码图像对象可能无法正常工作的原因。

因此代码还需要检查 PDF 中的图像掩码 (/ImageMask) 和图像对象的其他属性（以查看图像是否也应该使用反转颜色或使用索引颜色）以重新创建类似于在 PDF 中显示的图像。请参阅官方[PDF 参考](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_reference_1-7.pdf)中的图像对象、/ImageMask 和 /Decode 字典。

不确定 PDFSharp 是否能够在 PDF 中找到图像蒙版对象，但[iTextSharp](http://itextpdf.com)能够访问图像蒙版对象（请参阅 PdfName.MASK 对象类型）。

[PDF Extractor SDK](http://bytescout.com/products/developer/pdfextractorsdk/index.html)等商业工具能够以原始形式和“渲染”形式提取图像。

*我为 ByteScout 工作，它是 PDF Extractor SDK 的制造商*

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-02-07T04:50:27.123

Maybe not directly answer the question but another option to extract images from PDF is to use FreeSpire.PDF which can extract the image from pdf easily. It is available as Nuget package [https://www.nuget.org/packages/FreeSpire.PDF/](https://www.nuget.org/packages/FreeSpire.PDF/). They handle all the image format and can export as PNG. Their sample code is

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Drawing;
using Spire.Pdf;

namespace ExtractImagesFromPDF
{
    class Program
    {
        static void Main(string[] args)
        {
            //Instantiate an object of Spire.Pdf.PdfDocument
            PdfDocument doc = new PdfDocument();
            //Load a PDF file 
            doc.LoadFromFile("sample.pdf");
            List<Image> ListImage = new List<Image>();
            for (int i = 0; i < doc.Pages.Count; i++)
            {
                // Get an object of Spire.Pdf.PdfPageBase
                PdfPageBase page = doc.Pages[i];
                // Extract images from Spire.Pdf.PdfPageBase
                Image[] images = page.ExtractImages();
                if (images != null && images.Length > 0)
                {
                    ListImage.AddRange(images);
                }

            }
            if (ListImage.Count > 0)
            {
                for (int i = 0; i < ListImage.Count; i++)
                {
                    Image image = ListImage[i];
                    image.Save("image" + (i + 1).ToString() + ".png", System.Drawing.Imaging.ImageFormat.Png);
                }
                System.Diagnostics.Process.Start("image1.png");
            }  
        }
    }
} 
```

(code taken from [https://www.e-iceblue.com/Tutorials/Spire.PDF/Spire.PDF-Program-Guide/How-to-Extract-Image-From-PDF-in-C.html](https://www.e-iceblue.com/Tutorials/Spire.PDF/Spire.PDF-Program-Guide/How-to-Extract-Image-From-PDF-in-C.html))

# php - 哪种检查数组是否包含多个元素的更好方法？

> ID：10024910
> 
> 赞同：180
> 
> 时间：2012-04-05T08:10:42.367
> 
> 标签：php, arrays

我只需要检查一个数组是否有多个元素。我正在尝试这样做：

```
if (isset($arr['1'])) 
```

另一种传统方式是

```
if (sizeof($arr)>1) 
```

两者哪个更好？在这种情况下，我应该如何在两种替代方法之间进行判断？是否有任何性能检查表可用于测量哪个更好？

* * *

## 回答 #1

> 赞同：346
> 
> 时间：2012-04-05T08:14:14.260

用这个

```
if (sizeof($arr) > 1) {
     ....
} 
```

或者

```
if (count($arr) > 1) {
     ....
} 
```

`sizeof()`是 的别名`count()`，它们的工作方式相同。

**编辑：** 回答问题的第二部分：问题中的两行代码不是替代方法，它们执行不同的功能。第一个检查是否设置了 at 的值`$arr['1']`，而第二个返回数组中元素的数量。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-04-05T08:11:58.810

`if(is_array($arr) && count($arr) > 1)`

只是为了确保 $arr 确实是一个数组。

`sizeof`是 的别名`count`，我更喜欢使用 count 因为：

1.  少输入 1 个字符
2.  快速浏览 sizeof 可能意味着数组的内存大小，太技术性了:(

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-05T08:13:52.933

```
if (count($arr) >= 2)
{
  // array has at least 2 elements
} 
```

`sizeof()`是 的别名`count()`。两者都适用于非数组，但如果参数是数组或*对象，**它们只会返回大于 1 的值`Countable`*，所以你很安全。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-05T08:13:59.557

显然使用`count($arr) > 1`(`sizeof`只是`count`) 的别名是最好的解决方案。根据数组的结构，可能有大量元素但没有`$array['1']`元素。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-06-26T01:28:02.443

采用`count()`

```
if (count($my_array) > 1) {
// do
} 
```

这个页面解释得很好[http://phparraylength.com/](http://phparraylength.com/)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-12-11T09:17:28.853

我更喜欢`count()`函数而不是`sizeOf()`as`sizeOf()`只是一个别名，`count()`并且在许多其他语言中并不相同。许多程序员希望`sizeof()`返回分配的内存量。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-07-22T07:05:36.683

对于检查数组，empty() 优于 sizeof()。

如果数组包含大量数据。计算数组大小需要更多时间。但是检查空总是很容易。

```
//for empty
  if(!empty($array))
     echo 'Data exist';
  else 
     echo 'No data';

 //for sizeof
 if(sizeof($array)>1)
      echo 'Data exist';
 else 
    echo 'No data'; 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-04-05T08:11:32.603

isset() 仅检查是否设置了变量。与大小或数组包含的内容无关

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-04-05T08:13:28.097

我假设 $arr 是一个数组，那么这就是你要找的

```
if ( sizeof($arr) > 1) ... 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-10-22T20:06:36.780

第一种方法 `if (isset($arr['1']))` 不适用于关联数组。

例如，以下代码显示“不，不超过一个”。

```
$arr = array(
    'a' => 'apple',
    'b' => 'banana',
);

if (isset($arr['1'])) {
    echo "Yup, more than one.";
} else {
    echo "Nope, not more than one.";
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-04-01T23:41:39.077

我在 Swift 4/5 中进行数组循环并相应地填充默认值

```
 for index in 0..<3
    {
        let isIndexValid = allObjects.indices.contains(index)
        var yourObject:Class = Class()
        if isIndexValid { yourObject = allObjects[index]}
        resultArray.append(yourObject)
    } 
```

# facebook - fb：我所有网站上的评论都消失了

> ID：10024916
> 
> 赞同：0
> 
> 时间：2012-04-05T08:11:14.933
> 
> 标签：facebook, tags, comments

Facebook 评论面板突然从我的所有网站上消失了（大约 4 个实时网站和 8 个开发网站）

显然，我没有同时更改所有站点的任何内容。

我的代码突然过时了吗？[已编辑以显示我的一个实时站点的数据]

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:og="http://ogp.me/ns#"
  xmlns:fb="http://www.facebook.com/2008/fbml"
  xml:lang="en" lang="en"> 

<script type="text/javascript" src="/js/jquery/jquery-1.4.2.js"></script>

<script type="text/javascript"  
src="http://connect.facebook.net/en_US/all.js#xfbml=1">    </script>

<meta property="og:title" content="www.PrintMyCanvas.com Home Page" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://www.PrintMyCanvas.com" />
<meta property="og:image" content="http://www.PrintMyCanvas.com/img/icon
  /FacebookShareIcon.png" />
<meta property="og:site_name" content="PrintMyCanvas" />
<meta property="fb:admins" content="[hidden]" />
<meta property="og:description" content="Canvas art prints made by real 
  artists with love in San Francisco! Upload your photo on our site 
  and receive your personal printing / art piece within a few days, 
  ready to hang on your wall." /> 
```

我的网站会被 Facebook 列入黑名单吗？

可能出了什么问题？

谢谢，

凯尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:31:55.210

We have been seeing the same problems, and [https://www.facebook.com/groups/fbdevelopers](https://www.facebook.com/groups/fbdevelopers) has been timing out on me

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T19:39:07.870

一定是脸书出了问题，几天后所有的评论框都重新出现了。

# facebook - 用本地主机测试 facebook/javascript？

> ID：10024918
> 
> 赞同：1
> 
> 时间：2012-04-05T08:11:19.473
> 
> 标签：facebook, url, login, web

我刚刚在 facebook 中创建了一个应用程序来获取 appid，但我没有一个真正的网站左右，我需要在我的 localhost 上对其进行测试，是否可以将“网站 url”字段留空并进行测试？

当我尝试从我的 javascript FB.login 时，我不断收到一个对话框：

> 发生错误。请稍后再试。

这是因为我没有正确的 URL 造成的吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:15:01.947

只需在网站 url 中写入：*http://localhost*并在*App Domain*中输入*localhost*。

这应该够了吧。

# java - Windows XP SP3 TCP/IP 没有可用的缓冲区空间

> ID：10024919
> 
> 赞同：0
> 
> 时间：2012-04-05T08:11:22.450
> 
> 标签：java, tcp, windows-xp

我需要使用 Java 创建 1000 个服务器套接字。在创建 600 和 700 个套接字之间的某个地方出现此错误：

> 05.04.2012 10:23:57 java.net.SocketException：没有可用的缓冲区空间（达到最大连接数？）：在 sun.nio.ch.ServerSocketChannelImpl.bind 处监听 sun.nio.ch.ServerSocketChannelImpl.listen(Native Method) (ServerSocketChannelImpl.java:127) 在 sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59) 在 sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:52) 在 channelserver.NIOAppServer.initSelector(NIOAppServer. java:40) 在 channelserver.NIOAppServer.(NIOAppServer.java:27) 在 channelserver.NIOServer.main(NIOServer.java:433) 在 channelserver.NIOServer.main(NIOServer.java:438)

之后我的电脑重新启动。我尝试编辑注册表设置 MaxUserPort = 65534 和 MaxFreeTcbs = 2000，但没有帮助。我还可以做些什么？在[http://serverfault.com](http://serverfault.com)上有人告诉我它可能与 JDBC 有关，但我只连接到 DB 一次。我使用 SQLite。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:30:29.923

在 Windows XP 上对半开连接有限制以打破此规则，您需要修补您的 tcpip.sys 驱动程序（但它是非法的）或使用像 Windows Vista/7 这样的现代操作系统，它们没有这些限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:20:58.967

以防万一有人也遇到这个问题。
最后，在我看来，这只是 WinXP 的问题。我用更多的 RAM 尝试了相同的代码 - 结果是一样的。但是当我在 Win7 上尝试过时，即使有 1200 个套接字，一切正常。
所以，WinXP 就是不适合这样的任务。

# ruby-on-rails - 数据库设计 - 我是否需要将用户 ID 设置为待办事项列表应用程序的所有表中的字段之一？

> ID：10024924
> 
> 赞同：0
> 
> 时间：2012-04-05T08:11:32.023
> 
> 标签：ruby-on-rails, database-design

我正在开发一个名为 lists4me 的简单 Rails 应用程序，以创建一个简约的任务管理应用程序并在讨价还价中学习 Rails。我设置的表是用户、类别、项目、任务和步骤。基本上一个用户有很多类别，一个类别有很多项目，一个项目有很多任务，一个任务有很多（可操作的）步骤。目前 user_id 字段设置在类别表中，但未设置在其余表中。

最近，我正在查看在创建新任务或项目时从 todoist.com 发布的数据，似乎也发送了 user_id。由于我只在类别表上设置了 user_id，这让我想到我的所有表是否也应该有一个 user_id 作为字段？如果是，那为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:18:31.460

基本上，要回答这个问题，我会考虑*“我是否需要知道（项目|任务|步骤）属于哪个用户？”的问题。*

如果这永远不会成为问题，或者因为它不是必需的，或者因为您可以通过类别将用户加入（项目 | 任务 | 步骤）来简单地工作，那么在没有用户 ID 字段的情况下，您就可以了其他表。

但是，如果您要经常查找给定用户的所有未完成任务，那么在此处添加一个用户 ID 字段以保存连接操作可能是值得的，如果我的理解是正确的, 不是特别快。

# ios - 在 iOS 设备的主屏幕上为书签设置默认标题？

> ID：10024932
> 
> 赞同：9
> 
> 时间：2012-04-05T08:11:50.217
> 
> 标签：ios, web-applications, bookmarks

在使用 iOS 设备的主屏幕上为书签设置默认图像时

```
<link rel="apple-touch-icon-precomposed" href="bla.png"/> 
```

书签的标题始终是 Web 应用程序标题的分块部分。是否有机会设置在“添加到主屏幕”对话框中自动显示的默认标题？

谢谢

马特

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-07T00:49:07.967

```
<meta name="apple-mobile-web-app-title" content="Title"> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-05T08:16:50.123

标题是从 head 部分的标题自动设置的。

查看此[文档](http://developer.apple.com/library/ios/ipad/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)以获取更多信息。

# java - 使用 Maven 命令构建 Netbeans 项目

> ID：10024935
> 
> 赞同：3
> 
> 时间：2012-04-05T08:12:01.337
> 
> 标签：java, netbeans, maven-2

如何使用 构建 Netbeans 项目`pom.xml`？

在 Eclipse 中，我必须使用以下命令来做到这一点：

```
mvn install 
```

然后

```
mvn eclipse:eclipse 
```

在 Netbeans 中构建项目的类似命令有哪些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:16:15.877

我认为您的问题是：“如何将基于 Maven 的项目导入 NetBeans 进行开发？”

如果是这样，请参阅[NetBeans wiki](http://wiki.netbeans.org/Maven)。您应该只安装 Maven 插件并从`pom.xml`.

PS`mvn eclipse:eclipse`有点过时了。查看[m2eclipse](http://www.eclipse.org/m2e/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T09:18:30.243

在 Netbeans 中导入 Maven 项目。Netbeans 本身将构建您的 Web 项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:38:25.797

Netbeans 7 可以自动打开 Maven 项目。在 Netbeans 中，只需`File->Open Project`指向包含您的目录即可`pom.xml`。

# c# - 通过 XAML 验证 WPF 文本框数据

> ID：10024940
> 
> 赞同：1
> 
> 时间：2012-04-05T08:12:19.300
> 
> 标签：c#, wpf, visual-studio-2010, xaml

> **可能重复：**
> [WPF 中文本框中的验证](https://stackoverflow.com/questions/1346707/validation-in-textbox-in-wpf)

我目前正在使用此代码创建一个纯数字文本框

Xaml

```
<TextBox Height="22" HorizontalAlignment="Left" Margin="192,118,0,0" Name="Unit_ID"  VerticalAlignment="Top" Width="173" PreviewTextInput="UnitID_PreviewTextInput" TextInput="Unit_ID_TextInput" TextChanged="Unit_ID_TextChanged" /> 
```

和 C# 代码隐藏

```
 private void UnitID_PreviewTextInput(object sender, TextCompositionEventArgs e)
        {
            foreach (char c in e.Text)
                if (!Char.IsDigit(c))
                {
                    e.Handled = true;
                    break;
                } 
```

是否可以通过独家使用 XAML 来做到这一点？我正在尝试最小化我的 .cs 文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:35:09.423

如果您将 TextBox 的 Text 属性的值绑定到一个 int，您将获得一种验证，因为您无法将 MyInt 的值设置为除 int 之外的任何值（以及 TextBox 边框如果你尝试会变红）。

在 XAML 中：

```
<TextBox Text="{Binding MyInt}"/> 
```

在演示者中：

```
public class MyPresenter : INotifyPropertyChanged
{
    public int MyInt { get; set; }
    // ...
} 
```

并将 XAML 的 DataContext 设置为 MyPresenter 的一个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:22:22.017

就像您不能使用纯 HTML 来完成这项工作一样，您也不能专门使用 XAML（据我所知）。我得到了整个“少即是多”的理念，但在这种情况下，您至少需要一些代码，例如 Regex，来验证输入。

# jquery - Scrolltop 动画后的滚动/滚动条锁定

> ID：10024949
> 
> 赞同：12
> 
> 时间：2012-04-05T08:12:53.123
> 
> 标签：jquery, scrolltop

我有一些锚点链接到页面中的特定部分（使用主题标签），以及滚动到文档窗口顶部或底部的锚点。

```
$("html, body").animate({ scrollTop: $(document).height() }, 2000); 
```

但是，一旦动画和滚动到达目的地并完成，文档滚动和滚动条似乎会禁用几秒钟。例如，如果单击“转到页面底部”链接，我的文档窗口将正确滚动到页面底部。当我尝试向上滚动时，它会以一种紧张的动作上下晃动，并允许我稍后滚动几次。

关于可能导致此问题的任何提示？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-06-03T14:46:28.923

这个线程很旧，但我遇到了这个问题并且在任何地方都没有答案，但这里有一个解决方案：

```
$(window).bind("mousewheel", function() {
    $("html, body").stop();
}); 
```

如果用户在动画执行时使用滚动条，它会停止动画。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-30T21:19:49.353

只是为了帮助 Scotty 的回答，您实际上还可以向 .stop() 方法添加两个选项：*clearQueue*和*jumpToEnd*。

我遇到了滚动问题，并使用 Scotty 建议的 .stop() 开始，但注意到动画仍在“挣扎”完成。我在这里查看了文档：[.stop() 方法文档](https://api.jquery.com/stop/)

通过添加`.stop(true, false);`，我能够：

1.）删除排队的动画（以防几个被触发/级联）

2.) 防止动画尝试跳转到其结束值。

希望这可以帮助其他人用头撞键盘；）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-25T09:40:32.580

我也建议`$("html, body").stop();`在“动画”之前添加。

```
$("html, body").stop();
$("html, body").animate({ scrollTop: $(document).height() }, 2000);
$(window).bind("mousewheel", function() {
    $("html, body").stop();
}); 
```

# android - 使用后台时的 Android ViewPager 性能问题

> ID：10024950
> 
> 赞同：9
> 
> 时间：2012-04-05T08:12:58.003
> 
> 标签：android, android-layout, android-viewpager

我有一个`Activity`由 XML 制作的，我已经将它的背景设置为我的可绘制文件夹中的背景图像。

在同一个活动中，我创建了一个`ViewPager`允许在视图之间来回滑动。里面的所有视图`ViewPager`都包含一个图像。

每当我向左或向右滑动时，过渡都很慢。

我尝试通过将其设置为白色（#fff）来删除背景图像，所有的滞后都消失了。效果很好！问题是我确实需要该应用程序的背景。

有什么方法可以优化背景图像或其他东西，这样滑动会再次顺利进行吗？由于滞后，目前使用起来太令人沮丧了。

我还尝试将图像裁剪为小尺寸，然后将其拉伸到屏幕上，但我没有注意到任何性能改进。`ViewPager`此外，当我使用 TextViews 对其进行测试时，也不是位于 中的图像故障，而是存在相同的延迟。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-05T09:47:16.557

经过一番搜索，我自己弄清楚了，我会在这里为遇到此问题的其他人留下答案。

显然，当图像被拉伸时，android 在渲染背景时会遇到很多麻烦。至少在运行 Android 3.2 的 Galaxy Tab 10.1 上是这样。

我使用的背景图片是一张木地板的图片，因为它是同一块木板的重复图案，我设法将图像从 1440 x 1050 裁剪到大约 350x500。当将此图像用作背景并在整个屏幕上拉伸时，性能会出现巨大下降。然而，当在左上角显示为单个图像时，它工作得很好。

使用[这里](https://stackoverflow.com/questions/2706913/how-to-make-android-apps-background-image-repeat)描述的方法，我设法在整个屏幕上重复图像而不是拉伸它。令人惊讶的是，我注意到完全没有额外的压力，而且过渡非常顺利。

所以就在这里，希望这能帮助其他有同样性能问题的人！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-11-03T11:27:03.503

晚年的另一个解决方案：您必须将您的可绘制对象放入适当的文件夹中。我在可绘制文件夹中有我的 background.png 并且它滞后，因为它与拉伸作斗争。我不能使用可重复的，因为我的手机上没有那种模式。

但是当我把我的可绘制背景放在 drawable-xhdpi 中时，工作完全没有任何延迟。因此，以供将来参考，这也可能解决您的问题。参考这个自行解决的问题：[ViewPager 在三星 S4 上真的很慢](https://stackoverflow.com/questions/23628726/viewpager-really-slow-on-samsung-s4)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-08T10:23:19.237

使用寻呼机刷卡时，这个技巧对我有很大帮助。它基于硬件加速。

```
 viewPager.setOnPageChangeListener(new OnPageChangeListener() {
                @Override
                public void onPageScrollStateChanged(int scrollState) {
                    if (scrollState != ViewPager.SCROLL_STATE_IDLE) {
                        final int childCount = viewPager.getChildCount();
                        for (int i = 0; i < childCount; i++)
                            viewPager.getChildAt(i).setLayerType(View.LAYER_TYPE_NONE, null);
                    }
                }

          ....
}); 
```

希望它会有所帮助。

# php - php 通过它们的值之一合并两个或多个 ArrayIterators

> ID：10024953
> 
> 赞同：3
> 
> 时间：2012-04-05T08:13:16.760
> 
> 标签：php, arrays, merge, iterator

我有两个迭代器，我必须合并到一个结果中。

以下是数据样本：

```
ArrayIterator Object
(
[storage:ArrayIterator:private] => Array
    (
        [0] => Array
            (
                [period] => 04/04/2012 16:00:00
                [bl_subs] => 1
                [bl_unsubs] => 1
                [bl_block_total] => 1
            )

        [1] => Array
            (
                [period] => 04/04/2012 17:00:00
                [bl_subs] => 1
                [bl_unsubs] => 2
                [bl_block_total] => 0
            )

        [2] => Array
            (
                [period] => 04/04/2012 18:00:00
                [bl_subs] => 0
                [bl_unsubs] => 0
                [bl_block_total] => -1
            )

        [3] => Array
            (
                [period] => 04/04/2012 19:00:00
                [bl_subs] => 2
                [bl_unsubs] => 0
                [bl_block_total] => -2
            )

        [4] => Array
            (
                [period] => 04/04/2012 20:00:00
                [bl_subs] => 2
                [bl_unsubs] => 0
                [bl_block_total] => 1
            )

    )

)

ArrayIterator Object
(
[storage:ArrayIterator:private] => Array
    (
        [0] => Array
            (
                [period] => 04/04/2012 15:00:00
                [bl_avg] => 5
                [bl_full] => 0
            )

        [1] => Array
            (
                [period] => 04/04/2012 17:00:00
                [bl_avg] => 0
                [bl_full] => 7
            )

        [2] => Array
            (
                [period] => 04/04/2012 18:00:00
                [bl_avg] => 1
                [bl_full] => 0
            )

    )

) 
```

我想通过键“句点”将它们合并到一个摘要迭代器中。

最终结果应如下所示：

```
ArrayIterator Object
(
[storage:ArrayIterator:private] => Array
    (
        [0] => Array
            (
                [period] => 04/04/2012 15:00:00
                [bl_subs] => 0
                [bl_unsubs] => 0
                [bl_avg] => 5
                [bl_full] => 0
                [bl_block_total] => 0
            )

        [1] => Array
            (
                [period] => 04/04/2012 16:00:00
                [bl_subs] => 1
                [bl_unsubs] => 1
                [bl_avg] => 0
                [bl_full] => 0
                [bl_block_total] => 1
            )

        [2] => Array
            (
                [period] => 04/04/2012 17:00:00
                [bl_subs] => 1
                [bl_unsubs] => 2
                [bl_avg] => 0
                [bl_full] => 7
                [bl_block_total] => 0
            )

        [3] => Array
            (
                [period] => 04/04/2012 18:00:00
                [bl_subs] => 0
                [bl_unsubs] => 0
                [bl_avg] => 1
                [bl_full] => 0
                [bl_block_total] => -1
            )

        [4] => Array
            (
                [period] => 04/04/2012 19:00:00
                [bl_subs] => 2
                [bl_unsubs] => 0
                [bl_avg] => 0
                [bl_full] => 0
                [bl_block_total] => -2
            )

        [5] => Array
            (
                [period] => 04/04/2012 20:00:00
                [bl_subs] => 2
                [bl_unsubs] => 0
                [bl_avg] => 0
                [bl_full] => 0
                [bl_block_total] => 1
            )

    )

) 
```

如果我们不使用 foreach、for、while 或任何其他循环，那将是最好的。那是因为数据会很大，我们不希望出现内存问题。我正在尝试使用`current()`和`next()`使用内部数组指针。

如果有人知道摆脱这种情况的方法，请告知。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T08:36:55.047

它两个迭代器总是排序的，你可以缓存它们，每次迭代比较哪个先出现（如果不相等）并处理那个。如果相等，则同等处理。

**不相等：**

```
$it1[[period] => 04/04/2012 16:00:00] > $it2[[period] => 04/04/2012 15:00:00]

=> process $it2 data:

    [period] => 04/04/2012 15:00:00
    [bl_avg] => 5
    [bl_full] => 0

  as current():

    [period] => 04/04/2012 15:00:00
    [bl_subs] => 1
    [bl_unsubs] => 1
    [bl_avg] => 5
    [bl_full] => 0
    [bl_block_total] => 1

+ $it2->next(); 
```

> *注意：*我不知道源数据 ( `$it2[0] (15:00)`) `[bl_subs => 1]`中不存在`[bl_unsubs] => 1`的元素是如何`[bl_block_total] => 1`来的。那是默认值吗？

**相等：（**跳过一次迭代）

```
$it1[[period] => 04/04/2012 17:00:00] == $it2[[period] => 04/04/2012 17:00:00]

=> process $it1 and $it2 data:

    $it1:
        [period] => 04/04/2012 17:00:00
        [bl_subs] => 1
        [bl_unsubs] => 2
        [bl_block_total] => 0

    $it2:
        [period] => 04/04/2012 17:00:00
        [bl_avg] => 0
        [bl_full] => 7

  as current():

        [period] => 04/04/2012 17:00:00
        [bl_subs] => 1
        [bl_unsubs] => 2
        [bl_avg] => 0
        [bl_full] => 7
        [bl_block_total] => 0

 + $it1->next(); $it2->next(); 
```

您可以将此处理包装成`Iterator`它自己的，以便很好地封装。由于给出的信息有限，我创建了一个简化的示例，将日期缩短到问题的域：一次迭代两个迭代器。如果两个迭代器相等，则返回两者。如果不相等，则返回两者比较时的第一个。

使用的简化数据：

```
$ar1 = array('04/04/2012 16:00:00', '04/04/2012 17:00:00', '04/04/2012 18:00:00', '04/04/2012 19:00:00', '04/04/2012 20:00:00');
$ar2 = array('04/04/2012 15:00:00', '04/04/2012 17:00:00', '04/04/2012 18:00:00'); 
```

只有两个包含比较值的数组。这些变成了两个迭代器：

```
$it1 = new ArrayIterator($ar1);
$it2 = new ArrayIterator($ar2); 
```

写出的问题仅限于两个迭代器。为了更通用地解决问题，它应该使用 0 个或更多迭代器。因此，每次迭代都会根据迭代器的当前值相互比较迭代器。为此，使用了比较功能。您可以将其与[`usort`^(*Docs*)](http://php.net/usort)的工作方式进行比较：一个函数比较 A 和 B 并基于两者返回一个整数值：

*   A < B：-1（A小于B，返回值小于零）
*   A = B：0（A等于B，返回值为零）
*   A > B：1（A大于B，返回值大于零）

这允许相互比较无限数量的对。它只需要两个函数：一个从我们使用的迭代器中获取当前值，另一个在 A 和 B 之间进行实际比较（实际上您可以将两者合并到一个函数中，但这是示例性的，您的数组/迭代器有点不同，我认为值得分开，这样你以后可以更容易地修改它）。所以首先是从迭代器中获取值的函数，我与 ISO 日期时间值进行比较，因为我可以用一个简单的方法来做到这一点`strcmp`：

```
/**
 * Get Comparison-Value of an Iterator
 *
 * @param Iterator $iterator
 * @return string
 */
$compareValue = function(Iterator $iterator) {
    $value = $iterator->current();
    sscanf($value, '%d/%d/%d %s', $month, $day, $year, $timeISO);
    $dateISO = sprintf('%04d-%02d-%02d %s', $year, $month, $day, $timeISO);
    return $dateISO;
}; 
```

> *注意：*我不知道您使用哪种日期格式，也许我将月份与日期混合在一起，只是交换变量，它几乎是自描述的。

这个函数所做的只是获取一个可以从迭代器中轻松比较的值。这还没有进行上面描述的比较，所以需要另一个函数来使用这个比较值函数作为依赖：

```
/**
 * Compare two Iterators by it's value
 *
 * @param Iterator $a
 * @param Iterator $b
 * @return int comparison result (as of strcmp())
 */
$compareFunction = function(Iterator $a, Iterator $b) use ($compareValue) {
    return strcmp($compareValue($a), $compareValue($b));
}; 
```

这就是现在的比较函数，基于`strcmp`字符串比较函数并使用该`$compareValue`函数获取字符串进行比较。

因此，假设您有一个包含两个迭代器的数组，现在可以对其进行排序。也可以将第一个元素与下一个元素进行比较，以确定它们是否相等。

完成后，现在可以创建一个由多个迭代器组成的迭代器，并且在每次迭代时，附加的迭代器都会被排序，并且只有第一个迭代器（以及与其相等的迭代器）将作为当前迭代器返回并转发。像这样的流程：

![DITAA 图表](../Images/dd95a05000abdf455c1412a3ec7897e5.png)^([源](http://pastebin.com/NqXRwtEn))

由于排序已经通过比较函数完成，所以只需要封装这个迭代逻辑。由于排序适用于任何大小（0 个或更多元素）的数组，因此它已经被通用化了。使用示例：

```
/**
 * Usage
 */
$it = new MergeCompareIterator($compareFunction, array($it1, $it2));

foreach ($it as $index => $values) {
    printf("Iteration #%d:\n", $index);
    foreach ($values as $iteratorIndex => $value) {
        printf("  * [%d] => %s\n", $iteratorIndex, $value);
    }
} 
```

此用法示例将输出它所在的迭代以及该迭代的关联值。在这种情况下，仅作为示例数组的时间信息仅由这些组成。它还把它来自的迭代器放在方括号中（0 表示第一个，1 表示第二个）。这会生成以下输出：

```
Iteration #0:
  * [1] => 04/04/2012 15:00:00
Iteration #1:
  * [0] => 04/04/2012 16:00:00
Iteration #2:
  * [0] => 04/04/2012 17:00:00
  * [1] => 04/04/2012 17:00:00
Iteration #3:
  * [0] => 04/04/2012 18:00:00
  * [1] => 04/04/2012 18:00:00
Iteration #4:
  * [0] => 04/04/2012 19:00:00
Iteration #5:
  * [0] => 04/04/2012 20:00:00 
```

如您所见，对于两个（预排序的）迭代器中相等的比较值，将作为一对返回。在您的情况下，您需要进一步处理这些值，例如在提供默认值的同时合并它们：

```
$defaults = array('bl_subs' => 0, ...);
foreach ($it as $values) {
    array_unshift($values, $default);
    $value = call_user_func_array('array_merge', $values);
} 
```

所以这实际上是 that 的用法`MergeCompareIterator`。实现相当简单，到目前为止，这个没有缓存排序/当前迭代器，如果你想改进它，我把它留作练习。

完整代码：

```
<?php
/**
 * @link http://stackoverflow.com/q/10024953/367456
 * @author hakre <http://hakre.wordpress.com/>
 */

$ar1 = array('04/04/2012 16:00:00', '04/04/2012 17:00:00', '04/04/2012 18:00:00', '04/04/2012 19:00:00', '04/04/2012 20:00:00');
$ar2 = array('04/04/2012 15:00:00', '04/04/2012 17:00:00', '04/04/2012 18:00:00');

$it1 = new ArrayIterator($ar1);
$it2 = new ArrayIterator($ar2);

/**
 * Get Comparison-Value of an Iterator
 *
 * @param Iterator $iterator
 * @return string
 */
$compareValue = function(Iterator $iterator)
{
    $value = $iterator->current();
    sscanf($value, '%d/%d/%d %s', $month, $day, $year, $timeISO);
    $dateISO = sprintf('%04d-%02d-%02d %s', $year, $month, $day, $timeISO);
    return $dateISO;
};

/**
 * Compare two Iterators by it's value
 *
 * @param Iterator $a
 * @param Iterator $b
 * @return int comparison result (as of strcmp())
 */
$compareFunction = function(Iterator $a, Iterator $b) use ($compareValue)
{
    return strcmp($compareValue($a), $compareValue($b));
};

/**
 * Iterator with a comparison based merge-append strategy over 0 or more iterators.
 *
 * Compares 0 or more iterators with each other. Returns the one that comes first
 * and any additional one that is equal to the first as an array of their current()
 * values in this current().
 * next() forwards all iterators that are part of current().
 */
class MergeCompareIterator implements Iterator
{
    /**
     * @var Iterator[]
     */
    private $iterators;

    /**
     * @var callback
     */
    private $compareFunction;

    /**
     * @var int
     */
    private $index;

    /**
     * @param callback $compareFunction (same sort of usort()/uasort() callback)
     * @param Iterator[] $iterators
     */
    public function __construct($compareFunction, array $iterators = array())
    {
        $this->setCompareFunction($compareFunction);
        foreach ($iterators as $iterator) {
            $this->appendIterator($iterator);
        }
    }

    /**
     * @param callback $compareFunction
     */
    public function setCompareFunction($compareFunction)
    {
        if (!is_callable($compareFunction)) {
            throw new InvalidArgumentException('Compare function is not callable.');
        }
        $this->compareFunction = $compareFunction;
    }

    public function appendIterator(Iterator $it)
    {
        $this->iterators[] = $it;
    }

    public function rewind()
    {
        foreach ($this->iterators as $it) {
            $it->rewind();
        }
        $this->index = 0;
    }

    /**
     * @return Array one or more current values
     * @throws RuntimeException
     */
    public function current()
    {
        $current = array();
        foreach ($this->getCurrentIterators() as $key => $value) {
            $current[$key] = $value->current();
        }
        return $current;
    }

    /**
     * @return Iterator[]
     */
    private function getCurrentIterators()
    {
        /* @var $compareFunction Callable */
        $compareFunction = $this->compareFunction;

        $iterators = $this->getValidIterators();
        $r = uasort($iterators, $compareFunction);
        if (FALSE === $r) {
            throw new RuntimeException('Sorting failed.');
        }

        $compareAgainst = reset($iterators);
        $sameIterators = array();
        foreach ($iterators as $key => $iterator) {
            $comparison = $compareFunction($iterator, $compareAgainst);
            if (0 !== $comparison) {
                break;
            }
            $sameIterators[$key] = $iterator;
        }
        ksort($sameIterators);
        return $sameIterators;
    }

    /**
     * @return Iterator[]
     */
    private function getValidIterators()
    {
        $validIterators = array();
        foreach ($this->iterators as $key => $iterator) {
            $iterator->valid() && $validIterators[$key] = $iterator;
        }
        return $validIterators;
    }

    /**
     * @return int zero based iteration count
     */
    public function key()
    {
        return $this->index;
    }

    public function next()
    {
        foreach ($this->getCurrentIterators() as $iterator) {
            $iterator->next();
        }
        $this->index++;
    }

    public function valid()
    {
        return (bool)count($this->getValidIterators());
    }
}

/**
 * Usage
 */
$it = new MergeCompareIterator($compareFunction, array($it1, $it2));

foreach ($it as $index => $values) {
    printf("Iteration #%d:\n", $index);
    foreach ($values as $iteratorIndex => $value) {
        printf("  * [%d] => %s\n", $iteratorIndex, $value);
    }
} 
```

希望这会有所帮助。它仅适用于“内部”迭代器中的预排序数据，否则与当前元素比较的合并/追加策略没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:02:41.787

好的，这很简单。假设两个迭代器都已排序，您需要做的就是对它们进行合并排序（基本上）：

```
function mergeIterators(Iterator $it1, Iterator $it2, $compare, $merge) {
    $result = array();
    //rewind both itertators
    $it1->rewind();
    $it2->rewind();
    while ($it1->valid() || $it2->valid()) {
        if (!$it1->valid()) {
            $cmp = 1;
        } elseif (!$it2->valid()) {
            $cmp = -1;
        } else {
            $cmp = $compare($it1->current(), $it2->current());
        }

        if ($cmp === 0) {
            // equal, merge together
            $result[] = $merge($it1->current(), $it2->current());
            $it1->next();
            $it2->next();
        } elseif ($cmp < 0) {
            //first is less than second
            $result[] = $it1->current();
            $it1->next();
        } else {
            $result[] = $it2->current();
            $it2->next();
        }
    }
    return $result;
} 
```

这里唯一的技巧是传入正确的`$compare`函数和`$merge`函数......

这是一个快速示例：

```
$compare = function(array $val1, array $val2) {
    return strtotime($val1['period']) - strtotime($val2['period']);
};

$merge = function(array $val1, array $val2) {
    return array_merge($val1, $val2);
}; 
```

可能需要更改合并功能，因为它只是进行粗略合并，您可能想要做一些更复杂的事情（例如将键添加在一起等）...

但是这个函数足够通用，可以用于合并任何 2 个迭代器，而不仅仅是你的用例......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T08:20:03.830

您可以使用`AppendIterator`http://php.net/manual/en/class.appenditerator.php[获取](http://php.net/manual/en/class.appenditerator.php)更多文档。

示例： http: [//php.net/manual/en/function.iterator-to-array.php](http://php.net/manual/en/function.iterator-to-array.php)

```
$first = new ArrayIterator ( array (
        'k1' => 'a',
        'k2' => 'b',
        'k3' => 'c',
        'k4' => 'd' 
) );
$second = new ArrayIterator ( array (
        'k1' => 'X',
        'k2' => 'Y',
        'Z' 
) );

$combinedIterator = new AppendIterator ();
$combinedIterator->append ( $first );
$combinedIterator->append ( $second );

var_dump ( iterator_to_array ( $combinedIterator, false ) ); 
```

谢谢

:)

# java - 生成spring xml文件运行时

> ID：10024961
> 
> 赞同：0
> 
> 时间：2012-04-05T08:13:55.207
> 
> 标签：java, xml, spring, runtime, javabeans

我写了一个使用spring框架的应用程序。现在我想编写一个代码，它从某个地方消耗一些输入，然后生成一些 spring 配置 xml 文件。问题是，当我的应用程序正在运行并且我的应用程序通过“XMLApplicationContext”创建对象传递时，我可以将这些文件交给 spring 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:21:28.453

您是在谈论`ApplicaitonContext`基于用户输入的多个基础吗？这是可行的。看看`FileSystemXmlApplicationContext`Spring框架中的。您可以生成 XML，并将 xml 传递`FileSystemXmlApplicationContext`给创建新的应用程序上下文。

# php - ZF2：在控制器中获取 url 参数

> ID：10024969
> 
> 赞同：26
> 
> 时间：2012-04-05T08:14:27.047
> 
> 标签：php, zend-framework2, zend-framework-mvc

我体验过 Zend Framework 1，并使用该框架构建了一些应用程序。

现在，我正在试验 Zend Framework 2，但我坚持使用 url 参数。我已经像这样设置了我的路由：

```
// Setup for router and routes
'Zend\Mvc\Router\RouteStack' => array(
    'parameters' => array(
        'routes' => array(
            'default' => array(
                'type'    => 'Zend\Mvc\Router\Http\Segment',
                'options' => array(
                    'route'    => '/[:slug]',
                    'constraints' => array(
                    'slug' => '[a-zA-Z][a-zA-Z0-9_\/-]*'
                    ),
                'defaults' => array(
                    'controller' => 'Htmlsite\Controller\BootController',
                    'action'     => 'index',
                    'slug' => 'home'
                    ),
                ),
            ),
        'home' => array(
            'type' => 'Zend\Mvc\Router\Http\Literal',
            'options' => array(
                'route'    => '/',
                'defaults' => array(
                    'controller' => 'Htmlsite\Controller\BootController',
                    'action'     => 'index',
                    ),
                ),
            ),
        ),
    ),
), 
```

正如你所看到的，我试图制作一个变量 slug。我怎样才能访问这个变量？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-15T15:48:44.510

或者简单地说：

```
$slug= $this->params('slug'); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-05-14T19:13:01.110

为什么不是这个：

```
$this->params()->fromRoute('slug'); 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-04-05T08:35:49.633

从[这里](http://framework.zend.com/issues/browse/ZF2-149)：

```
$slug = $this->getEvent()->getRouteMatch()->getParam('slug'); 
```

更多文档[here](http://packages.zendframework.com/docs/latest/apidoc/index.html)，但看起来有点不完整。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-10-28T22:47:59.803

你也可以简单地使用它

```
$this->params()->fromQuery('slug',null);
$this->params()->fromPost('slug',null); 
```

我希望它有效...

# android - 如何确定一个活动是否被AlarmManager打开？

> ID：10024970
> 
> 赞同：1
> 
> 时间：2012-04-05T08:14:28.583
> 
> 标签：android, android-activity, alarmmanager

在我的应用程序中，有 2 个选项可以打开应用程序。其中一个是手动打开应用程序并开始播放音频流，另一个是设置一个 AlarmManager，它将在定义的时间内启动相同的活动。

我发现要暂停应用程序，我应该使用 AlarmManager。我需要确定用户是如何打开应用程序的（自己使用 AlarmManager 或手动打开）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:20:07.847

我相信您可以在通过 AlarmManager 安排应用程序启动时指定一个意图。如果您指定一个不同于 android.intent.action.MAIN 的意图操作，您将能够确定应用程序是如何启动的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:20:18.750

`Extend Application`类和创建可以用作标志的静态字段（从活动或从 AM 开始）.. 然后创建 getter 和 setter... 现在`set it true if started from actvity false if from Alarm manager`.. 这里的优点是应用程序类将在整个应用程序中可见，并且是单例，..

# testcomplete - 自定义 DevExpress 网格的快照

> ID：10024975
> 
> 赞同：0
> 
> 时间：2012-04-05T08:14:58.583
> 
> 标签：testcomplete

我有一个用自定义 GridView 覆盖的自定义 DevExpress Grid。我如何使用 TestComplete 中的表快照来支持此控件。对于自定义 TreeList，我找到了以下步骤：

您可以调整 TestComplete 以便它使用对象映射功能以与相应“标准”控件相同的方式处理自定义控件。此功能设置控件类型及其可能的类名之间的对应关系。要指定 TestComplete 应将特定控件视为受支持的控件之一： • 在 Project Explorer 面板中右键单击您的项目并选择 Edit | 上下文菜单中的属性。这将打开项目属性页面。• 选择对象映射。• 在控件类型列表中，选择与您的自定义控件对应的类型。• 按添加类名并输入控件的类名。-- 或 -- 单击 Add From Screen 并使用随后的 Add New Object Class 对话框捕获控件。类名不区分大小写，可以包含通配符（* 和？）。• 选择文件| 从 TestComplete 的主菜单中保存以保存当前项目的对象映射模板。注意：TestComplete 还提供对受支持的第三方控件的许多子控件的脚本访问。通常，您可以像使用父控件一样使用子控件。有关详细信息，请参阅使用自定义子控件。

您不仅可以为当前项目中的自定义控件添加对象映射模板，还可以为使用 TestComplete 创建的所有新项目添加对象映射模板。这是通过“默认项目属性”对话框的“对象映射选项”完成的。在这种情况下，所有新项目都已经“熟悉”了自定义控件。

他们工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T17:21:21.110

由于您正在使用基于 Developer Express 控件的网格的 .NET Windows 窗体应用程序，因此基本网格控件很可能是**XtraGrid**。TestComplete 对此网格控件具有高级支持（请参阅[使用 Developer Express XtraGrid - 概述主题），您可以使用](http://support.smartbear.com/support/viewarticle/14581/)[对象映射](http://support.smartbear.com/support/viewarticle/11156/)功能将您的后代网格映射到此支持的控件。

为此，您需要打开当前项目的属性编辑器（***工具 | 当前项目属性***），选择**对象映射**选项组并找到基本**XtraGrid**控件的记录作为**Developer Express Controls | XtraGrid**项目。将自定义网格类的全名添加到列表中。此名称存储在网格对象的[ClrFullClassName](http://support.smartbear.com/support/viewarticle/11667/)属性中。[您可以在“对象浏览器](http://support.smartbear.com/support/viewarticle/11024/)”面板中看到此属性。

# php - 这个 php 脚本安全吗？fwrite 并获取

> ID：10024977
> 
> 赞同：1
> 
> 时间：2012-04-05T08:15:08.167
> 
> 标签：php, .htaccess, get, xss, fwrite

此脚本的目的是在出现 404/500 等服务器错误时将日志邮寄给他的网站管理员。

该脚本利用 fwrite 对日志进行计数，然后保存 10 条日志并在达到 10 条日志时将其邮寄。它使用一些值并通过 echo 显示它们，我怎么能确定它没有 XSS 或其他可破解的问题。我知道这个脚本可能没有那么先进、高效或简洁，但它确实帮了我大忙。我只是担心它的安全性。

**.htaccess 文件**

```
ErrorDocument 400 /errors/error.php?err=400
ErrorDocument 401 /errors/error.php?err=401
ErrorDocument 403 /errors/error.php?err=403
ErrorDocument 404 /errors/error.php?err=404
ErrorDocument 500 /errors/error.php?err=500
ErrorDocument 410 /errors/error.php?err=410 
```

**php 文件 /errors/error.php**

```
<?php

$fp = fopen("counterlog.txt", "r"); 
$count = fread($fp, 1024); 
fclose($fp); 

$errorNum = (int)$_GET['err'];
$err_str = array(404=>'Type of error: Not Found (404)', 400=>'Type of error: Bad Request (400)', 401=>'Type of error: Unauthorized (401)', 403=>'Type of error: Forbidden (403)', 410=>'Type of error: Gone (410)', 500=>'Type of error: Internal Server Error (500)');

$ip = getenv ("REMOTE_ADDR"); 
$requri = getenv ("REQUEST_URI"); 
$servname = getenv ("SERVER_NAME"); 
$combine = $ip . " tried to load " . $servname . $requri; 

$httpref = getenv ("HTTP_REFERER");

if (empty($httpref)) { 
 $httpref = "Unknown Location";
}

$httpagent = getenv ("HTTP_USER_AGENT");

$today = date("F j, Y, H:i:s"); 

$note = "This information has been sent to the webmaster." ;

$message = "On $today \n <br> $combine <br> \n User Agent = $httpagent \n <br>User got there from: $httpref <br><br> $err_str[$errorNum] <br><br> $note\n ";
$message2 = "#$count \n $today \n $combine \n User Agent = $httpagent \n User got there     from: $httpref \n $err_str[$errorNum] \n\n ";

$fh = fopen("errorlogje.txt", "a") or die("can't open file");
$stringData = $message2;
fwrite($fh, $stringData);
fclose($fh);

if ($count == 10) {
$count = 0;
$fh = fopen("errorlogje.txt", "r");
$bericht = fread($fh, 4096);
$to = "mail@mail.nl"; // webmaster email
$subject = "errorpage guardian has a message"; // email bericht
$from = "From: mailguardian@mail.nl\r\n";  // email afzender (makelijk voor het sorteren)
mail($to, $subject, $bericht, $from);

$fh = fopen("errorlogje.txt", "w");
fclose($fh);
}
else {
$count = $count + 1;
}

$fp = fopen("counterlog.txt", "w"); 
fwrite($fp, $count); 
fclose($fp); 

echo " $message ";

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:45:56.687

这是完全安全的，是的。`$_GET`您使用的唯一值被转换为整数，这样就消除了它的任何可能问题。

# c - 仅使用 c 从文本文件中获取数字

> ID：10024978
> 
> 赞同：2
> 
> 时间：2012-04-05T08:15:14.567
> 
> 标签：c, arrays, file

**/edited/** 我是新来的。我有一个文本文件，内容如下：

```
6
<cr>
R 0
R 1
R 4
R 36
R 0
R 4 
```

这就是我所拥有的。我想将每一行读入一个数组，以便我可以将该数组转换为一个整数，这样我就可以只打印我以后想要的任何一行的数字。

```
 #include <stdio.h>
    #include <conio.h>
    #include <math.h>
    #include <stdlib.h>
    #include <ctype.h>
    #include <string.h>

    int main()
    {
        FILE *fr;   /*declares file pointer*/
        int i, j, num[32];
        char array[32][32], input_file[32], line[32];
        printf("Enter file: ");
        fflush(stdin);
        scanf("%s", input_file);    
        fr = fopen(input_file, "r");
        for(i=0;i<32;i++)
            for(j=0;j<32;j++){
                array[i][j] = \'0';
            }
            for(i=0;i<32;i++){
                line[i] = '\0';
            }
        if(fr != NULL){

            while(fgets(line, sizeof(line), fr) != NULL){
                strcpy(array[i],line);
                    num[i] = atoi(array[i]);
                        i++;
                        printf("%d\n", num[i]);
            }
        }fclose(fr);
        else{
            perror(input_file);
        }
    } 
```

我没有收到任何错误，但打印的内容不正确；这是它打印的内容：

```
-370086
-370086
-370086
-370086
-370086
-370086
-370086
-370086 
```

谁能向我解释出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:25:04.427

我想我会以不同的方式处理这个问题。尽管您没有明确说明，但我将假设第一个数字告诉我们还要阅读多少行字母/数字（不包括空白行）。所以，我们要阅读它，然后阅读其余的行，忽略任何前导的非数字，只注意数字。

如果这是正确的，我们可以稍微简化代码：

```
int num_lines;
int i;
int *numbers;

fscanf(infile, "%d", &num_lines); // read the number of lines.

numbers = malloc(sizeof(int) * num_lines); // allocate storage for that many numbers.

// read that many numbers.
for (i=0; i<num_lines; i++)
    fscanf(infile, "%*[^0123456789]%d", numbers+i);
    // the "%*[^0123456789]" ignores leading non-digits. The %d converts a number. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:20:43.400

有几个问题：

1.  你从来没有设置`input_file`任何东西，所以你似乎正在打开一个随机文件。
2.  您`i`在嵌套循环中双重使用。
3.  您根本没有显示`array`，因此无法判断它是如何声明的。
4.  您在使用循环索引打印数字*之前*增加了循环索引，因此您总是“丢失”并在下一个（尚未写入的）插槽中打印数字。

`memset()`如果您担心，您应该使用清除阵列。无需清除将要被覆盖的数组，例如`line`由`fgets()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T08:22:22.430

假设`array`是一个`char`数组，当你这样做时：

```
...
strcpy(array[i],line);
num[i] = atoi(array[i]);
... 
```

您实际上转换了整行而不是其中`integer`的。您应该考虑使用`fscanf`，或者至少在 line 变量中搜索整数并将其转换。

做`atoi(array[i])`的和`atoi("R 32\n")`例子一样。

# java - Java 泛型：使用单个构造函数参数 B 实例化 A

> ID：10024980
> 
> 赞同：2
> 
> 时间：2012-04-05T08:15:21.250
> 
> 标签：java, generics

我正在寻找一个很好的模式来执行以下操作：我有一个类`FooBar<A,B>`，我知道它`A`有一个带有单个`B`参数的构造函数。我想要一个`FooBar`带有以下签名的受保护方法：

```
protected A chuckNorris42(B b); // intent: return new A(b) 
```

当然，上面提到的“意图”是不可编译的。作为一种解决方法，我将此方法抽象化，并在我用内联`FooBar`实现的具体类进行实例化时`chuckNorris42`：

```
FooBar<Chuck, Norris> = new FooBar<Chuck, Norris>() {
  protected Chuck chuckNorris42(Norris norris) {
    return new Chuck(norris);  
  }
} 
```

它有效，但我想知道是否有更好或更清洁的方法来实现相同的目标，所以我决定在这里提出这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T10:00:18.883

关键是，您不知道 A 的任何实际实例都有这样的构造函数，Java 类型系统还不够强大，无法强制执行此操作。因此，没有干净的通用内置方法来调用您静态不知道的类的构造函数。您必须像在其他答案中一样使用反射，但是如果 A 突然被实例化为不可实例化的类型（例如，A 可能是抽象类！），或者没有合适的构造函数。如果你想避免这种情况，你可以使用工厂：

```
interface Factory<A, B> {
  A createInstance(B b);
} 
```

然后让您的类的用户为您`FooBar`提供该工厂的实例，用于类型 A 和 B 的当前值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T08:30:00.753

我不确定它有多好和更清洁，但你可以尝试这样的事情：

```
public class FooBar<A,B> {
private Class<A> aClass;
public FooBar(Class<A> aClass) {
    this.aClass = aClass;
}

protected A chuckNorris42(B b) throws NoSuchMethodException, InstantiationException,IllegalAccessException,InvocationTargetException{
    return aClass.getConstructor(b.getClass()).newInstance(b);
}
} 
```

没有办法获得通用参数的类。因此，实例化泛型参数类对象的方法之一是在构造函数中传递类。

**更新：** 还有一种方法可以将通用参数*拆分为层次结构：*

```
public abstract class Foobar<A,B> {
   protected abstract A chuckNorris(B b);
}

public class FooBarChuck<B> extends Foobar<Chuck<B>,B>{

   @Override
  protected Chuck<B> chuckNorris(B b) {
      return new Chuck<B>(b);
  }
}
public class Chuck<B> {
  public Chuck(B b) {
    //something here
  }
} 
```

然后您不必为所有 B 类重新实现此方法，但您仍然必须为每个 Chuck 创建单独的类。

PS我实际上并不认为这种方法比你的更干净:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T08:24:36.503

您可以尝试反射，例如

```
public A produce(Class<A> clazz, B arg) throws IllegalArgumentException, SecurityException, InstantiationException, IllegalAccessException, InvocationTargetException, NoSuchMethodException {
    return clazz.getConstructor(arg.getClass()).newInstance(arg);
} 
```

# caching - 使用 Nginx 的分布式和缓存 MP4 伪流（搜索）

> ID：10024981
> 
> 赞同：9
> 
> 时间：2012-04-05T08:15:22.467
> 
> 标签：caching, nginx, cdn, mp4, pseudo-streaming

我尝试使用 nginx (origin + edge) 设置至少 2 台服务器。[都使用mp4](http://wiki.nginx.org/HttpMp4Module) -module编译。来源包含我所有的 mp4 文件。Edge 配置了所有按预期工作的缓存内容（见下文），每个 mp4 文件请求第二次由边缘缓存提供服务，没有原始流量。

但我希望能够在文件中查找。该功能来自 mp4 模块。只需附加查询参数 "?start=120" 告诉 nginx 从时间戳 120sec 开始提供 mp4 内容。这适用于直接请求的来源。但是一旦我在 nginx 的缓存位置启用 mp4-module，请求将是 404。

nginx.conf @起源：

```
server {
  listen       80;
  server_name  localhost;
  root         /usr/share/nginx/www;
  location ~ \.mp4$ {
    mp4;
    expires max;
  }
} 
```

nginx.conf @ 边缘：

```
proxy_cache_path /usr/share/nginx/cache levels=2:2 keys_zone=icdn_cache:10m inactive=7d max_size=2g;
proxy_temp_path /usr/share/nginx/temp;
proxy_ignore_headers X-Accel-Expires Cache-Control Set-Cookie;
log_format cache '[$time_local] Cache: $upstream_cache_status $upstream_addr $upstream_response_time $status $bytes_sent $proxy_add_x_forwarded_for $request_uri';
access_log /usr/local/nginx/logs/cache.log cache;

upstream origin {
  server <origin-domain>;
}
server {
  listen       80;
  server_name  localhost;

  location ~ \.mp4$ {
    mp4;
    proxy_cache icdn_cache;
    proxy_pass http://origin;
    proxy_cache_key $uri;
  }
} 
```

我也试过：

```
location / {
  location ~ \.mp4$ { mp4; }
  proxy_cache icdn_cache;
  proxy_pass http://origin;
  proxy_cache_key $uri;
} 
```

有没有办法让缓存的 mp4 文件与 mp4-module 的搜索功能一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:29:16.390

您必须使用`proxy_store`. `proxy_cache`将为每个`?start=xxxx`请求创建大量文件。

要让 mp4 模块在文件中查找，您需要完整的电影。`proxy_store`将在缓存服务器上创建一个镜像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T19:53:35.053

`proxy_cache`是代理模块的一部分。目前您不能将 nginx mp4 模块与代理一起使用，它仅适用于静态文件，仅此而已。

# javascript - 通过绑定到 div 的 onclick 事件在 iPad 上加载 HTML5 视频

> ID：10024986
> 
> 赞同：1
> 
> 时间：2012-04-05T08:15:36.190
> 
> 标签：javascript, html, ios, video, dom-events

我正在开发一个 HTML5 应用程序（游戏），它会自动预加载 5 个视频文件。我能够在 Safari for PC 上正确执行此操作，因此文件格式、编解码器等方面没有被忽视的问题。在 iPad 上加载失败。正如 iOS 上的视频官方指南所说：

> 这意味着 JavaScript play() 和 load() 方法在用户开始播放之前也是不活动的，除非用户操作触发了 play() 或 load() 方法。换句话说，用户启动的播放按钮有效，但 onLoad="play()" 事件无效。

这是否意味着，如果该操作未与`video`元素绑定（用户单击常规 div — 我请求加载和显示视频，比较而言，我无法在用户启动操作后启动视频加载）用户实际点击一个`video`元素来加载和播放该特定元素）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:37:46.077

这意味着如果用户没有按下播放，则不能使用这些方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:19:46.790

经过进一步检查，事实证明，可以从任何元素的任何处理程序调用`video.load()`和`video.play()`方法（这可能在每个 html 元素中都保持正确，可以接收点击事件。`onClick``<div>`

在 iPad 上预加载 5 个视频文件的问题是它只能预加载 1 个并且会刷新任何视频数据，如果`video.load()`发出了对不同视频的新请求，因此您无法预加载 5 个视频，但您可以将它们变成单个然后预加载该单个视频。

# xml - XSLT 命名空间更改

> ID：10024989
> 
> 赞同：2
> 
> 时间：2012-04-05T08:16:13.803
> 
> 标签：xml, xslt, xpath, namespaces

我有以下内容：

```
<Data xmlns:x="Namespace.com">
    <Node></Node>
    <Node2></Node2>
    <Node3></Node3>
</Data> 
```

如何使用 XSLT 更改 Data 节点中的一个命名空间，而不会看到命名空间声明出现在其他任何地方。

期望的输出：

```
<Data xmlns:x="TheNewNamespace.com">
    <Node></Node>
    <Node2></Node2>
    <Node3></Node3>
</Data> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:24:19.450

利用：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="*">
    <xsl:element name="{name()}" namespace="TheNewNamespace.com">
      <xsl:copy-of select="@*"/>
      <xsl:apply-templates/>
    </xsl:element>
  </xsl:template>

</xsl:stylesheet> 
```

# javascript - ui.draggable("destroy") 的 jquery ui 错误

> ID：10024990
> 
> 赞同：2
> 
> 时间：2012-04-05T08:16:15.207
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

`<div>`当我将它放在容器上时，我想删除它的拖动属性。但我得到一个错误`"Property 'draggable' of object #<Object> is not a function"`，我的代码如下。

```
$( "#fighter1" ).draggable(); //fighter1 is the id of draggable object
$( "#fighter2" ).draggable();
$( "#fighter3" ).draggable();
$( "#fighter4" ).draggable();
$( "#fighter5" ).draggable();
$( "#fighter6" ).draggable();
$( "#dest" ).droppable({      //dest is the id of droppable object
   drop: function( event, ui ) {
      ui.draggable("destroy"); //I get error here.
   }
}); 
```

我使用 jquery ui 版本 1.8.12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-09T18:01:49.513

[调用可拖动控件方法](http://api.jqueryui.com/draggable/#method)的语法是：

```
$( ".selector" ).draggable( "method" ); 
```

您应该将方法名称作为 a`string`传递给`draggable()`方法。

在 drop 事件回调中，`ui.draggable`只是对可拖动元素对应的 jQuery 对象的引用（`$( ".selector" )`语法的一部分）。

您实际上应该调用`draggable()`它并传递方法名称：

```
ui.draggable.draggable("destroy");
----^-------        ------^------
selector                method name
       --------^--------
   this guy executes the method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:22:57.677

我的猜测是“ui”是一个简单的旧 javascript 对象而不是 jQuery 对象。
尝试（修订）：
`$(ui.draggable).draggable("destroy");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T13:49:33.760

我使用 setTimeout 函数解决了这个问题：

```
setTimeout(function(a){a.draggable("destroy");},100,ui.draggable); 
```

# java - 打开 Eclipse 插件编辑器

> ID：10024995
> 
> 赞同：-1
> 
> 时间：2012-04-05T08:16:54.587
> 
> 标签：java, eclipse, eclipse-plugin

我有一个扩展 TextEditor 以创建编辑器视图的类。我已经完成了所有必需的条目，例如在`plugin.xml`. 现在我在打开编辑器时收到以下错误...

> org.eclipse.core.runtime.AssertionFailedException：空参数：编辑器输入必须具有非空名称

我正在使用以下代码打开编辑器。

```
IWorkbenchPage page =
    PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();
page.openEditor(input, xyz.ID); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-23T13:04:14.340

以下代码是该问题的正确解决方案。

```
if (fileToOpen.exists() && fileToOpen.isFile()) {
    Stirng path = // file path that to be input.;
    IWorkbenchPage page = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();
    URI fromString = org.eclipse.core.runtime.URIUtil.fromString("file://" + path);
    try {
        IEditorPart openEditor = IDE.openEditor(page, fromString, XYZEditor.ID, true);
        IEditorInput editorInput = openEditor.getEditorInput();
        //editorInput.
    } catch ( PartInitException e ) {
        //Put your exception handler here if you wish to
    }
} 
```

# objective-c - 防止窗口打开（无窗口应用程序）

> ID：10024996
> 
> 赞同：1
> 
> 时间：2012-04-05T08:16:59.653
> 
> 标签：objective-c, macos, cocoa

我想做一个无窗口的应用程序。问题是我使用的框架有时会显示一些警报框，并且我无法抑制它们（至少不会发生崩溃）。

我已设置`LSBackgroundOnly`为 1（在 info.plist 应用程序文件中），但这似乎不起作用。有没有可能我在这里遗漏了一些东西（也许我需要设置一些其他设置）？

我也尝试过为`NSWindow`：

1.  覆盖`alloc`，`allocWithZone:`因此不会创建任何窗口。这适用于某些情况，但启动模态会话会引发异常（因为向 发送 nil 参数`beginModalSessionForWindow:`）。

2.  尝试覆盖 NSApplication`beginModalSessionForWindow:`并每次都返回 nil，但这会导致框架中某处的 EXC_BADACCESS （`runModalSession:`并且`endModalSession:`也被覆盖，但崩溃发生在它们中的任何一个被调用之前）。

欢迎任何其他想法。

如果它有帮助，我正在使用的框架是 Twain.Framework，所以如果有人知道一种方法来阻止所有 UI 与 twain（这包括在设备未连接时显示的错误警报），那么如果你分享会很棒.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:22:14.473

我设法让它“无窗口”（一些窗口仍然显示，但至少它们不可见，并且它们会自动关闭）。我只处理模态窗口，因为这些在我的情况下显示。

1.  我为 做了一个类别`NSWindow`，这样所有的窗口都是不可见的，并且不能成为键或主窗口：

    ```
    -(BOOL)canBecomeKeyWindow{
       [self setOpaque:NO];
       self.alphaValue = 0;
       return NO;
    }
    -(BOOL)canBecomeMainWindow{
       [self setOpaque:NO];
       self.alphaValue = 0;
       return NO;
    } 
    ```

2.  子类`NSApplication`：

    ```
    -(NSInteger)runModalForWindow:(NSWindow *)aWindow{
       return NSCancelButton;
    }
    -(NSModalSession)beginModalSessionForWindow:(NSWindow *)aWindow{
       NSModalSession session = [super beginModalSessionForWindow:aWindow];
       [aWindow performSelector:@selector(close) withObject:nil afterDelay:1];
       return session;
    } 
    ```

然而，这并没有太大帮助。如果`runModalForWindow:`一切都很好，因为窗口的所有者收到了回复。如果`beginModalSessionForWindow:`应用程序卡住了，很可能是因为窗口的所有者正在等待它从未收到的特定事件（例如按钮单击）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:01:41.453

目前尚不清楚您希望得到什么。您是否希望应用程序通常不显示窗口但允许第三方框架显示其警报？或者您是否希望找到一种方法来阻止框架显示其警报，以便您的应用程序绝对**没有**任何窗口？

如果是前者，您可能正在寻找 LSUIElement。这是一个可以有一些 UI 元素的应用程序，但不会显示在 Dock 或 Command-Tab 应用程序切换器中，也没有菜单栏。

# java - 在 jdbc 调用中一次减少提交和插入批量记录？

> ID：10024997
> 
> 赞同：1
> 
> 时间：2012-04-05T08:17:14.470
> 
> 标签：java, oracle, jdbc

我已经实现了数据库日志记录，以将我的 java weblogic 门户应用程序中的某些详细信息记录到 Oracle DB。为此，我使用连接池来获取连接并使用它来使 jdbc 调用存储过程。

我有一个静态 java 方法 logService，它获取连接对象并调用 SP。这个 logservice 方法是从我的 java 应用程序中的不同位置调用的，相关详细信息传入参数，这些详细信息又传递给 SP 调用。

因此，每个访问门户的用户大约会调用 10-20 个 logservice 方法。因此，我将进行 10-20 次 SP 调用，每次调用 SP 时我都必须提交。

但问题是，我的 DBA 建议不要为每个事务提交，而是一次提交所有 10-20 个事务，因为他说提交频率很高。我该如何做到这一点？如果不清楚，我可以发布示例代码。

是的，我已经为我的 Web 应用程序提供了过滤器，如下所示，

```
public final class RequestFilter implements Filter{

public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain) {
 try {
      ((HttpServletResponse) response).sendRedirect(redirectUrl);

  if (chain != null) {
            chain.doFilter(request, response);
        }
     }
 finally { // commit transaction here }
 }
} 
```

重定向到redirectURL后，我从我的应用程序的许多地方调用logservice，如下所示，

```
DBLog.logService(param1, param2); // static method call 
```

此日志服务使用连接池对象对 SP 进行prepareCall。只是我在下面提供了一个简短的示例代码，说明我的工作方式。

```
public static void logService(String param1, String param2) {

try {

con=getConnection();
stmt = con.prepareCall("{call DB_LOG_SP (?, ?}");
stmt.setString(1, param1);
stmt.setString(2, param2);
stmt.execute();
stmt.close();
}finally {
           stmt.close();
           con.close();
        } 
 } 
```

但是由于我在 SP 调用后关闭了连接，如何在 doFilter 方法内的 finally {} 块中提交我的事务？

过滤方法——

```
public class DBLog {

static Connection con = null;
    static PreparedStatement stmt = null;

static {
        try{
        new net.verizon.whatsnext.dblog.JDCConnectionDriver("oracle.jdbc.driver.OracleDriver", 
        "jdbc:oracle:thin:@localhost:7001:xe","user", "password"); 
    con=getConnection(); // Getting connection from Connection pool

    }catch(Exception e){}
    }

 public static Connection getConnection() throws SQLException {
        return DriverManager.getConnection("jdbc:jdc:jdcpool"); 
    }

public static void logService(String param1, String param2) {
    ...
    finally {
               stmt.close();
            } 
     }

 public static void closeTrans() {

    con.commit();
    con.close();
    }
} //End of DBLog class

 public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain) {
    ...
     finally { 
          DBLog.closeTrans();
         }
    } 
```

因此，在 doFilter 方法的 finally 块中提交后，我最终关闭了连接。我做得对吗？它会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:58:19.467

事务分界，因为它是安全和日志记录的情况，可以看作是你的代码的装饰。

假设您有一个 interface `BusinessTask`，它是您当前所有数据库操作正在实现的一个：

```
public interface BusinessTask {
   public void doWork();
} 
```

例如，您有 a`AddSavingsAccountTask`和 a `TransferMoneyTask`。

现在，最初您可以以这样一种方式来实现每个任务，即每个任务都单独提交（或回滚）。但是，如果您想创建一个包括创建帐户和立即转账的任务，那么您将遇到麻烦，因为现在您需要更改交易边界。

因此，一种方法是定义一个 TransactionDecorator，您可以在其中放置事务分界。

```
public class TransactionDecorator implements BusinessTask{

    private final BusinessTask task;

    public TransactionDecorator(BusinessTask task){
        this.task = task;
    }

    @Override
    public void doWork() {
        //beging transaction
        task.doWork();
        //commit or rollback
    }
} 
```

然后你可以简单地用事务划分来装饰你现有的任务：

```
final AddSavingsAccount addSavingsAccountTask = new AddSavingsAccount();
final TransferFunds transferFundsTask = new TransferFunds();

BusinessTask transaction = new TransactionDecorator(new BusinessTask(){

    @Override
    public void doWork() {
        addSavingsAccountTask.doWork();
        transferFundsTask.doWork();
    }
});

transaction.doWork(); //all the magic happens here 
```

现在，我只是在这里提出一种模式。在您的代码中实现这一点会因您的设计而异，具体取决于您的代码结构。

更多参考资料

*   [装饰图案](http://en.wikipedia.org/wiki/Decorator_pattern)
*   [代理模式](http://en.wikipedia.org/wiki/Proxy_pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:19:31.473

考虑使用每个请求的事务。您可以创建一个[过滤器](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html)，在处理请求之前打开数据库事务并在之后提交它。这样就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T13:09:44.863

首先，不要在每个请求上打开连接，而是重用连接池中的连接（可能是[DataSource](http://docs.oracle.com/javase/1.4.2/docs/api/javax/sql/DataSource.html)），并放入共享空间 - 在您的情况下，最简单的方法是利用静态[ThreadLocal](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ThreadLocal.html)字段。

在过滤器中：

```
public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain) {
  Connection conn = obtainConnection(); // obtain connection and store it ThreadLocal
  conn.setAutoCommit(false);
  try {
    chain.doFilter(request, response);
  } finally {
    conn.commit();
  }
} 
```

在您的记录器类中：

```
public static void logService(String param1, String param2) {
  Connection conn = getConnection(); // obtain thread-local connection
  // your database statements go here
} 
```

一般来说，避免使用静力学。也许考虑重新考虑您的日志记录方法。