# StackOverflow 问答 12200000-12200999

# java - ConcurrentHashMap 的 concurrencyLevel 参数给了我们什么保证？

> ID：12200001
> 
> 赞同：2
> 
> 时间：2012-08-30T15:07:38.893
> 
> 标签：java, data-structures, hashtable, java.util.concurrent

来自 ConcurrentHashMap 的Javadocs：

> 更新操作之间允许的并发性由可选的 concurrencyLevel 构造函数参数（默认为 16）指导，该参数用作内部大小调整的提示。

我不明白“用作内部尺寸提示”的部分。. 这是什么意思 ？设置此值的最佳实践是什么，它给我们什么保证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:11:15.383

看看 Javadoc 中接下来的句子：

> 该表在内部进行了分区，以尝试允许指定数量的并发更新而不会发生争用。因为哈希表中的放置本质上是随机的，所以实际的并发性会有所不同。理想情况下，您应该选择一个值来容纳尽可能多的线程同时修改表。使用显着高于您需要的值会浪费空间和时间，而显着降低的值会导致线程争用。但是一个数量级内的高估和低估通常不会产生太大的影响。当已知只有一个线程会修改而所有其他线程只会读取时，值 1 是合适的。此外，调整这种或任何其他类型的哈希表的大小是一个相对较慢的操作，因此，如果可能，

所以换句话说，16 的 concurencyLevel 意味着 ConcurrentHashMap 在内部创建了 16 个单独的哈希表来存储数据。修改一个哈希表中的数据的操作不需要锁定其他哈希表，这允许对整个 Map 进行一定程度的并发访问。

您可能想尝试阅读[ConcurrentHashMap 的源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/concurrent/ConcurrentHashMap.java#ConcurrentHashMap)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:25:26.257

并发级别大约等于可以在不使用内部锁定机制的情况下同时调用 map 上的操作数。正如 maat b 所说， ConcurrentHashMap 将有 N 个内部哈希表，因此在不同哈希表上工作的操作不需要额外的锁定 - 否则，如果操作在同一个内部哈希表上工作，则 ConcurrenyHashMap 对它们使用额外的内部锁定。

# jquery - 使用 ajax 加载到变量中的问题

> ID：12200003
> 
> 赞同：0
> 
> 时间：2012-08-30T15:07:50.310
> 
> 标签：jquery, ajax

我正在尝试使用 $.get() 函数稍后将网站的一部分加载到我们的变量中。我目前拥有的代码是：

```
$(document).ready(function(){
var container;
function loadData(data, targetVar) {
  container = data;
}

$.get('page.html#div', loadData(container)); 
```

问题是回调函数在页面加载之前一直触发，使变量具有未定义的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:10:13.357

您正在使用以下代码执行功能：

```
loadData(container) 
```

这意味着您不是将处理程序传递给函数，而是函数的结果。您还需要将返回的数据传递`$.get`到您的函数中。

您可以将其放在匿名函数中：

```
$.get('page.html#div', function(data) { loadData(data, container); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:13:48.730

如果你只想加载远程文档的一部分，你可以使用`.load`method.

```
$(document).ready(function(){
  $('#container_id').load('page.html #div');
} 
```

# jquery-ui - 重复的 ID 导致选项卡之间的干扰

> ID：12200004
> 
> 赞同：0
> 
> 时间：2012-08-30T15:07:53.543
> 
> 标签：jquery-ui, tabs

我正在考虑将旧应用程序转换为使用 jQuery UI 选项卡（使用 AJAX 获取每个选项卡的数据）。

我们能够轻松地将遗留应用程序配置为仅响应页面的 HTML “guts”，而不使用周围页眉、左、右和页脚窗格的 HTML，并且性能改进（感知和实际）是显着的，此外，它使应用程序看起来更加流畅和更新。

但是，遗留应用程序使用 3 个单独的页面进行数据库 CRUD 操作：

第 1 页：标准表单 - 发布到：
第 2 页：SQL 查询和显示结果 - 带有指向：
第 3 页：用于维护记录的表单，带有删除和保存选项

并且在所有三个原始页面上都有重复的 ID、表单名称和表单字段名称。更改遗留应用程序以使 ID 唯一将是大量工作（大量此类页面），因此如果可能，我想解决它。

我的第一次尝试是当它失去焦点时将innerHTML 从选项卡“移动”到关联数组，并在选项卡获得焦点时恢复它。从显示的角度来看，这工作得很好，但它似乎破坏了与底层代码相关的所有 Javascript（一旦它被移动到关联数组并再次返回）。

在我开始尝试各种其他方法之前，我将不胜感激您可能有的任何经验/建议。我的想法是：

答：整理出我使用的方法破裂的内容
。

但也许有更好的方法？

非常感谢您的帮助。

其他信息：

遗留应用程序具有对 JS 函数的 OnClick 调用 [用于 SAVE、DELETE、FIND 等操作]，这些函数假定表单等的固定名称，并且表单的验证具有基于 FormFields 名称定义规则的 JS ......所以改变整个系统的工作量很大，并且需要大量的 QA 测试，因此如果可能的话，我很想找到另一条路线

# delphi - 在 Lazarus 和 Delphi 之间选择的预定义符号

> ID：12200006
> 
> 赞同：8
> 
> 时间：2012-08-30T15:08:04.277
> 
> 标签：delphi, freepascal, lazarus, conditional-compilation

我正在寻找一个预定义的符号来编写这样的代码：

```
{$IFDEF LAZARUS}
// code compiles by fpc/lazarus
{$ELSE}
// code compiles by delphi
{$ENDIF} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T15:09:15.587

采用`FPC`             

```
{$IFDEF FPC} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:43:09.150

对于 GUI 应用程序 afaik，“ **LCL** ”符号在 Lazarus 项目中定义。在这种情况下，它可能无关紧要。

一般来说，对于更大的代码库，我会避免在你的源代码中包含太多的 ifdef FPC/LCL 和 ifdef。它使添加异常或其他版本变得更加困难。

使用 JCL 和 Zeos(7) 之类的系统，您可以在其中为大多数差异指定一个自己的名称（例如“USE_FPCUNIT”或“USE_DUNIT”）并将它们链接到中央包含文件中的版本。

有关该主题的简短论文，请参见[http://www.stack.nl/~marcov/porting.pdf](http://www.stack.nl/~marcov/porting.pdf)（第 2 章）

Ps 我会认为 Pocketstudio、TP、GPC、VP 和 WDSybil（以及我忘记的任何东西）对于大多数实际用途来说已经死了，并且字节码变体 Canterbury Pascal/Component Pascal/Oxygene/Prism/Delphi.NET 不兼容（无论如何，大多数都比 Pascal 更多 Oberon ）。这几乎让 Delphi、Kylix 和 FPC 担心。

# django - 通过Django中的按钮在表单中添加条目

> ID：12200011
> 
> 赞同：2
> 
> 时间：2012-08-30T15:08:14.183
> 
> 标签：django, forms, django-forms

为了说明我正在尝试做的事情，我将使用一个示例：

我有一个创建配方表格，在这个表格中我打算有一些字符字段和另外两个表格：
1.步骤表格
2.配料表格

对于这些表格中的每一个，我都希望有一个按钮，允许您添加另一个步骤或另一种成分。

这是我到目前为止给你一个想法的[截图。](http://imgur.com/PQME2)

然后我需要将所有字段和表单压缩到单个 create_recipe 表单中。

有没有人尝试过这样的事情？

如果有帮助，我可以附上我拥有的一些代码。

谢谢，

凯蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:48:40.073

我将其设置如下：

1.  创建食谱表格
2.  创建一个步骤表单并基于该步骤表单集
3.  创建成分表单并基于该成分表单集
4.  将食谱表单、步骤表单集和成分表单集添加到您的模板。
5.  在您的基础视图中构建对这 3 个的处理
6.  [使用http://code.google.com/p/django-dynamic-formset/](http://code.google.com/p/django-dynamic-formset/)使您的表单集动态化，即添加和删除按钮

这个链接可能对一些实现细节很有帮助：http: [//haineault.com/blog/155/](http://haineault.com/blog/155/)

# java - 当 EObject 包含无序 EList 时，如何比较它们之间的相等性？

> ID：12200019
> 
> 赞同：8
> 
> 时间：2012-08-30T15:08:35.693
> 
> 标签：java, list, equals, emf

我仍然是 EMF 的新手，所以也许我的问题没有真正意义，或者我假设错误。

我正在做一个模型驱动的项目，所以我定义了一个 ecore 元模型并生成了关联代码。现在我正在尝试进行单元测试，我需要能够测试对象之间的相等性，尤其是扩展 EObject 的对象之间的相等性。

我尝试使用 EcoreUtil.equals() 进行测试，但它总是返回 false，因为我的对象包含列表（类 EList）中的引用，这些引用的排序方式不同。但是，我在我的元模型中明确定义了引用没有排序：我想使用它们更像是 Set 而不是 List。

所以，我最终决定在我生成的 *Impl 类中实现我自己的 equals 方法，即使它在 javadoc 中不鼓励，但它还有另一种更优雅的方式来测试 EMF 对象之间的结构相等性，而不考虑顺序清单？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:32:47.160

您可以实现自己的实用程序类，使用 EObject 默认的 equals 方法编写自己的无序列表比较代码。

您可以 使用列表“包含”而不是像该方法那样按索引在[EqualityHelper.equals(List list1, List list2)中实现您的实现。](http://www.grepcode.com/file/repository.grepcode.com/java/eclipse.org/4.2/org.eclipse.emf/ecore/2.8.0/org/eclipse/emf/ecore/util/EcoreUtil.java#EcoreUtil.EqualityHelper.equals%28java.util.List,java.util.List%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T12:18:21.757

我在 Xtend 中编写了以下实用方法：

```
static def boolean equalsTo(Set<? extends EObject> eObjectSet1, Set<? extends EObject> eObjectSet2) {
    contains(eObjectSet1, eObjectSet2) && contains(eObjectSet2, eObjectSet1)
}

static def boolean contains(Set<? extends EObject> eObjectSet1, Set<? extends EObject> eObjectSet2) {
    eObjectSet1.forall[eObject1 | eObjectSet2.exists[eObject2 | EcoreUtil.equals(eObject1, eObject2)]]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-10T16:44:20.257

这可以通过使用`EMap`, 来解决，前一个列表的元素作为键，任意其他类型，例如`EString`，作为值。

如果一个元素应该在集合中，则将其映射到空字符串。

```
EMap<SomeClass, EString> someSet; 
```

如果列表可以包含多个元素，请将其映射到给出元素数量的整数。

# facebook - 新页面事件的实时更新

> ID：12200021
> 
> 赞同：0
> 
> 时间：2012-08-30T15:08:46.197
> 
> 标签：facebook, real-time-updates

我知道关于这个话题有几个问题，但没有一个完全相同。

我目前正在按位置搜索与特定地理位置相关的所有页面，并将它们的事件缓存在数据库中。问题是我目前必须循环浏览我经常观看的所有页面以检查更新。

目前，我正在跟踪的 >10,000 页需要很长时间才能更新。通知而不是轮询会更整洁（并且对 fb 更好）。

有谁知道这样做更有效？

谢谢

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:52:59.853

有一个名为[Real-time Updates](http://developers.facebook.com/docs/reference/api/realtime/)的 API 。您必须注册一个 http-server。Facebook 将发送一个带有相关更改的 POST 请求。您不能订阅所有连接，但事件可以。我还没有尝试过，但它应该对你有用。

在 Stack Overflow 上搜索“[facebook] 实时更新事件”会得到 5000 多个结果。所以我认为，某处应该有一些可用的代码。

# regex - 坚持使用正则表达式以排除可选项目

> ID：12200023
> 
> 赞同：0
> 
> 时间：2012-08-30T15:08:50.870
> 
> 标签：regex

我正在使用一个允许使用正则表达式来控制实体命名的应用程序。

我有一堆这样命名的实体（每一行都是全名）：

```
Subsystem - CPU - Utilisation [1x]
Subsystem - CPU - Utilisation [2x]
Subsystem - CPU - Utilisation [4x]
Subsystem - CPU - Queue Length
Subsystem - Disk - Space
Subsystem - Disk - Capacity 
```

我需要使用正则表达式将每个变成这样：

```
CPU \n Utilisation
CPU \n Queue Length
Disk \n Space
Disk \n Capacity 
```

（周围的空格`\n`是为了清楚起见，而不是在实际输出中）

我使用的正则表达式是：

```
Find:     ^Subsystem - (.*) - (.*)( \[.*\])$
Replace:  ${1}\n${2} 
```

这适用于有`[something]`部分的人，但不适用于没有的人。

本质上，我需要获取`part1`and `part2`， where`part2`由`[`行尾或行尾终止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:20:15.330

~~此正则表达式应该为您提供匹配项：~~

 ~~```
^Subsystem - ([^\s-]+) - ([^\s\[]+)(?=(?:\s\[)|$).*$ 
```~~ 

~~在此[Rubular 链接测试](http://rubular.com/r/4OwEOzrN4b)~~

**编辑：**
更新包括“队列长度”

```
^Subsystem - ([^\s-]+) - (.+?)(?=(?:\s+\[)|$).*$ 
```

在此[Rubular 链接测试](http://rubular.com/r/BnjgKrsi8x)

分解：

*   `^Subsystem -`：自我解释，匹配前几个常量字符
*   `([^\s-]+)`：捕获负字符集的组，基本上匹配任何内容，直到遇到空格或连字符
*   `(.+?)(?=(?:\s+\[)|$)`: 正向前瞻匹配任何（非贪婪）总是后跟空格和“[”或行尾的东西。这`?:`是一个非捕获组，因此它不匹配它。
*   `.*$`: 匹配任何其他内容直到行尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:12:10.283

试试这个（使最后一部分可选 - 零或一次）：

```
^Subsystem - (.*) - (.*)( \[.*\])?$ 
```

那应该工作！

此外，我喜欢使用[http://rubular.com/](http://rubular.com/)来尝试我的正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:29:27.380

（在记事本++上测试）

```
.+?- +([\w ]+) +- +([\w ]+) .* 
```

解释：

`.+?-`非贪婪，直到第一次冲刺 -

`+([\w ]+) +`- 第二个单词（只有字母和空格）匹配 1 个或多个空格

`- +([\w ]+)` - second word (only letters and spaces) match preceded by dash and one or more spaces

`.*` - the rest of the string

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-30T15:12:26.803

然后您可以将 [...] 部分设为可选：

```
^Subsystem - (.*) - (.*?)(?: \[.*\])?$ 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-30T15:17:20.893

只需在 $ 符号之前再添加一个 *。
使用如下：
`^Subsystem - (.*) - (.*)( \[.*\])*$`

# r - 涉及向量的表达式上的R曲线（）

> ID：12200024
> 
> 赞同：2
> 
> 时间：2012-08-30T15:08:50.503
> 
> 标签：r, vectorization, curve

我想绘制 x 的函数，其中 x 应用于向量。无论如何，最容易举一个简单的例子：

```
var <- c(1,2,3)
curve(mean(var)+x)
curve(mean(var+x)) 
```

虽然第一个有效，但第二个给出错误：“expr”没有评估为长度为“n”的对象，并且在 var + x 中：较长的对象长度不是较短对象长度的倍数

基本上我想找到这样一个函数的最小值：例如

```
optimize(function(x) mean(var+x), interval=c(0,1)) 
```

然后能够可视化结果。虽然优化功能有效，但我不知道如何让曲线（）也能正常工作。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:19:32.880

该函数需要向量化。这意味着，如果它评估一个向量，它必须返回一个相同长度的向量。如果将任何向量传递给`mean`结果，则始终是长度为 1 的向量。因此，均值未向量化。您可以使用`Vectorize`：

```
f <- Vectorize(function(x) mean(var+x))
curve(f,from=0, to=10) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:17:22.940

这可以在一般情况下使用`sapply`：

```
curve(sapply(x, function(e) mean(var + e))) 
```

在您给出的具体示例中，`mean(var) + x`, 当然在算术上等同于您正在寻找的内容。对于您正在使用的任何更复杂的功能，可能存在类似的快捷方式。

# asp.net - 存储在远程 Web 服务器中的 ASP.NET 解决方案。如何调试？

> ID：12200029
> 
> 赞同：1
> 
> 时间：2012-08-30T15:09:08.067
> 
> 标签：asp.net, asp.net-mvc-3, debugging, remote-debugging

我正在使用 ASP.NET MVC3 框架的网站上工作。目前我已经将解决​​方案移至远程服务器，从那时起我一直在使用我的主机和它的 VStudio 2010 IDE 来处理它。我只需要建立一个 VPN 连接，一切都很顺利，我什至可以通过构建 > 重建解决方案远程构建解决方案。问题是 Visual Studio 的默认调试器在 localhost 上运行，而我正在处理的解决方案在远程服务器上。

那么我该如何设置这个解决方案/项目的远程调试呢？

希望有人知道如何帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:10:33.640

请遵循本指南：

[http://www.codeproject.com/Articles/38132/Remote-IIS-Debugging-Debug-your-ASP-NET-Applicatio](http://www.codeproject.com/Articles/38132/Remote-IIS-Debugging-Debug-your-ASP-NET-Applicatio)

# linq - 试图执行 WHERE IN: Invalid 'where' 条件。实体成员正在调用无效的属性或方法

> ID：12200034
> 
> 赞同：2
> 
> 时间：2012-08-30T15:09:24.170
> 
> 标签：linq, dynamics-crm-2011

我正在尝试获取在先前列表中找到其 AccountID 的案例列表。

错误发生在以下最后一行：

```
// Gets the list of permissions for the current contact
var perms = ServiceContext.GetCaseAccessByContact(Contact).Cast<Adx_caseaccess>();

// Get the list of account IDs from the permissions list
var customerIDs = perms.Select(p => p.adx_accountid).Distinct();

// Get the list of cases that belong to any account whose ID is in the `customerID` list
var openCases = (from c in ServiceContext.IncidentSet where customerIDs.Contains(c.AccountId) select c).ToList(); 
```

我不确定错误所说的“无效属性”是什么。代码编译，我只是在运行时得到错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:59:32.083

问题是[CRM Linq Provider](http://msdn.microsoft.com/en-us/library/gg328328.aspx#limitations "使用 LINQ 构造查询：LINQ 限制")。它不支持 Linq-to-objects 提供程序提供的所有可用选项。在这种情况下，CRM 不支持该`Enumerable.Contains()`方法。

> **where**：子句的左侧必须是属性名，子句的右侧必须是值。您不能将左侧设置为常数。子句的两边都不能是常数。支持**字符串**函数**Contains**、**StartsWith**、**EndsWith**和 **Equals**。

您可以通过以下两种方式之一解决此问题：

1.  重新编写查询以使用更自然的联接。
2.  如果无法进行连接，您可以使用 Dynamic Linq`OR`为`customerIDs`. 这将类似于`Enumerable.Contains`.

请参阅我的答案或对[“如何获得今天的所有生日？”问题的接受答案。](https://stackoverflow.com/a/10146065/684271 "如何获得今天的所有生日？")有两种不同的方法来实现这一点。

# asp.net-mvc-3 - Razor 语法中的折叠注释区域

> ID：12200049
> 
> 赞同：0
> 
> 时间：2012-08-30T15:10:06.493
> 
> 标签：asp.net-mvc-3, razor

我正在开发一个新的应用程序，该应用程序在我处理页面的不同部分时有很大的区域我想注释掉。

有没有办法在 ac# razor 文件中折叠 Visual Studio 2010 中的注释区域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:13:29.433

是的你可以！

选择代码/评论或您想要折叠的内容...

然后，右键单击并选择**Collapse Tag**。

唯一的缺点是它不会持续存在。一旦你关闭视图，当你重新打开它时它就不会在那里。

我可以提出的唯一其他建议是将您正在处理的部分分离到部分视图中。这样您就可以处理较小的部分，而不必担心任何东西的折叠。

# c# - 我无法使用 c# 以编程方式设置 IIS 身份验证

> ID：12200053
> 
> 赞同：5
> 
> 时间：2012-08-30T15:10:16.790
> 
> 标签：c#, iis-7

我正在尝试使用 c# 在站点上打开匿名身份验证

这段代码抛出了写在底部的异常我到处搜索我找不到答案如何解决它：

```
using (ServerManager serverManager = new ServerManager())
{
    Configuration configapp = serverManager.GetApplicationHostConfiguration();
    ConfigurationSection anonymousAuthenticationSection = configapp.GetSection("system.webServer/security/authentication/anonymousAuthentication", Site1);
    anonymousAuthenticationSection["enabled"] = false;

    serverManager.CommitChanges();
} 
```

例外：

```
System.IO.FileNotFoundException: Filename: \\?\C:\Windows\system32\inetsrv\config\applicationHost.config
Error: Unrecognized configuration path 'MACHINE/WEBROOT/APPHOST/Site1'
   at Microsoft.Web.Administration.Interop.AppHostWritableAdminManager.GetAdminSection(String bstrSectionName, String bstrSectionPath)
   at Microsoft.Web.Administration.Configuration.GetSectionInternal(ConfigurationSection section, String sectionPath, String locationPath)
   at Microsoft.Web.Administration.Configuration.GetSection(String sectionPath, String locationPath)
   at FlowSuiteWebConfigurator.label.button1_Click(Object sender, EventArgs e) in C:\Users\Administrator\documents\visual studio 2010\Projects\Projectname\Projectname\Form1.cs:line 264 
```

有人可以指导我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-26T11:32:40.870

可能有点晚了（一年半之后......），但问题似乎出在您的位置定义中（configapp.GetSection 的第二个参数）：异常说`Error: Unrecognized configuration path 'MACHINE/WEBROOT/APPHOST/Site1'`

在我的机器上进行本地测试，我也不例外，使用有效的位置名称，如`Default Web Site/MyCustomPortal`.

注意：添加的参考`Microsoft.Web.Administration.dll`在 下`C:\Windows\System32\inetsrv\`，这些代码行查看`applicationHost.config`位于的文件`C:\Windows\System32\inetsrv\config`

# php - mysql_query 返回错误，但不在 phpmyadmin 中

> ID：12200056
> 
> 赞同：0
> 
> 时间：2012-08-30T15:10:25.910
> 
> 标签：php, mysql, phpmyadmin

这真的不是我的第一个 SQL 查询；），但是......！，我有一个奇怪的错误：我正在从 CSV 文件导入到我的数据库中，并且**查询返回错误 mysql_query**，并且**在 phpmyadmin 中，如果我复制/粘贴查询，一切正常**。

```
$result = mysql_query ($ sql);
echo $ sql. "=>". $result. ','. Mysql_error ($this-> cnx). '<br> cnx ='. $this-> cnx. '<br>'; 
```

在回声中：

```
INSERT INTO tiny_url (`id`, `url`, `tiny_url`, `page_rank`, `link_name`, `destination_url`, `anchor`, `active`) VALUES (NULL, "111", "222", 3, "444", "555", 1,1)
=>, You have an error in your SQL syntax; check the manual That corresponds to your MySQL server version for the right syntax to use near '
'At line 3
cnx = Resource id # 27 
```

如果我这样做：它有效：

```
$sql = 'INSERT INTO tiny_url (`id`, `url`, `tiny_url`, `page_rank`, `link_name`, `destination_url`, `anchor`, `active `) VALUES (NULL," 111 "," 222 ", 3," 444 "," 555 ", 1,1) ';

$result = mysql_query ($sql);
echo $sql. "=>". $result. ','. mysql_error($this-> cnx). '<br> cnx ='. $this-> cnx. '<br>'; 
```

你能帮帮我吗？

工厂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:14:33.763

您的列被称为`active`（后跟一个空格）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:19:00.883

我发现了问题：在我的代码中，我添加了这个

```
$sql .= ")<br>"; 
```

当然，查询中不允许使用 html 代码。当然。

等等瞧... :(

工厂

# erlang - 如何确保使用 ssl 发送消息

> ID：12200057
> 
> 赞同：2
> 
> 时间：2012-08-30T15:10:31.183
> 
> 标签：erlang

我正在实现一个 gen_server 作为一个 gen_server，它作为一个 ssl 身份验证服务器的接口。如果收到的数据包错误（例如错误的用户名和密码），ssl 服务器将切断连接。连接必须是持久的。

在我的 gen_server 中，我使用 handle_cast/2 打开与服务器的 ssl 连接：

```
 handle_cast(connect, State) ->
    ......
    case ssl:connect(Address, Port, Options, Timeout) of
        {ok, NewSocket} ->
           {noreply, State#state{socket=NewSocket}};
        {error, Reason} ->
           gen_server:cast(?SERVER, connect),
           {noreply, State#state{socket=undefined}}; 
```

然后我在 handle_cast/2 中等待其他其他消息，例如可以使用：

```
 gen_server:cast(Pid, {authenticate, User, Password}). 
```

每当我收到这样的强制转换消息时，我都会生成一个新函数，该函数使用 gen_server:call/3 从服务器状态恢复 SSL 套接字并将身份验证消息发送到 SSL 服务器。如果发送部分返回错误，我会尝试重新连接，否则我会在套接字上读取一段时间，以确保套接字不会关闭，如果是，我会重新连接。

```
send_auth(_, _, 0) ->
    {error, max_num_reached}; 

send_auth(User, Password, Num) ->
    Socket = gen_server:call(?SERVER, socket),
    %% also a check that socket is not 'undefined'
    case ssl:send(Socket, AuthMessage) of
      ok ->
          case ssl:recv(Socket, 0, 2000) of
            {error, timeout} ->
                ok;
            _ ->
                gen_server:cast(?SERVER, connect),
                send_auth(User, Password, Num-1)
          end,
      {error, closed} ->
          gen_server:cast(?SERVER, connect),
          send_auth(User, Password, Num-1)
    end. 
```

我做了很多测试，但每次，如果一条消息（不是最后一条）是错误的，则实际上没有传递以下消息。

如何允许所有有效的身份验证消息都传递到身份验证服务器？此外，如何确保服务器仅在尚未尝试连接时才会连接？否则就像 DOS 攻击一样！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:43:17.747

1.  据我所知，系统中只有一个身份验证服务器，那么为什么不能在**gen_server**的初始化中直接连接到它呢？如果连接有点可靠，如果连接有任何问题，您可以杀死**gen_server并让****主管**重新启动它。它可能会解决您的 DOS 问题。
2.  当您使用**send_auth**生成其他进程时，您只需在参数中传递套接字连接，而不是进行 gen_server 调用。
3.  为了保证交付，您将在您的协议中添加某种*确认。*身份验证服务器应该回复**send_auth**并确认它得到了它。并且**send_auth**应该重试，直到它收到该确认或有一些其他后备行为，以防它永远不会这样做。

# java - Java 数字类型到 as3 类型

> ID：12200058
> 
> 赞同：1
> 
> 时间：2012-08-30T15:10:31.970
> 
> 标签：java, actionscript-3, flash, types

我需要使用字节数组将二进制格式的数字从 java 传输到 flash，但 flash as3 不支持浮点数和长整数。

那么我该怎么做呢，因为即使我尝试将 java long 转换为 double 并返回，它看起来也很乱？

> ```
> public static void main(String[] args)
> {
>     long l = Long.MAX_VALUE/100;
>     Double d= l;
> 
>     System.out.println("long  : " + l);
>     System.out.println("double: " + (long)d);
> } 
> ```

```
run:

long  : 92233720368547758

double: 92233720368547760

BUILD SUCCESSFUL (total time: 1 second) 
```

长号转换成双倍后失去了原来的值！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:11:44.213

你的观察不准确。Flash 支持浮点数。`Number`AS3 中的类是`double`Java 中的 IEEE-754 双精度 64 位浮点数。但是，它没有`long`. `Number`足以存储 Java `float`，因为这也是一个浮点数，但幅度较小（它只需要 32 位）。Flash 可以读取这些值并将其写入 ByteArray，但在类型层次结构中没有对应的类型。

不可能有 Java 的确切类比`long`，因为存储浮点数的格式保留了一些位用于其他目的，实际上只使用 52 位来保存浮点数的值。

如果你真的需要很长时间，你可以在 Flash 中做什么：

*   很简单：使用两个整数。

*   复杂：有几个用于长数学的类，它们不会限制您使用任意选择的位数，即您可以对远远超过 64 位的数字进行数学运算。这些传统上称为 BigInt 或类似名称。谷歌应该至少找到几个实现。搜索密码学库，几乎每一个都需要这个类来操作。

*您可能会发现一些有用的信息：*

**Java原语：**

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

**Flash 顶级类（还包括所有数字类型）：**

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package-detail.html#classSummary](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package-detail.html#classSummary)（不幸的是，它们与其他顶级类一起列出，但数量并不多让它变得非常困难）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:21:00.740

在动作脚本中，您必须使用“数字”类型。

var myNumber：数字；myNumber = Number.MAX

# c# - Windows 服务：指定的事件源已存在

> ID：12200062
> 
> 赞同：1
> 
> 时间：2012-08-30T15:10:42.293
> 
> 标签：c#, windows-services, event-log

我正在用 C# (.NET 4) 编写 Windows 服务。

这是安装程序的代码：

```
 [RunInstaller(true)]
public partial class JobManagerInstaller : Installer
{
    public JobManagerInstaller()
    {
        InitializeComponent();

        this.Installers.Clear();

        ServiceProcessInstaller serviceProcessInstaller = new ServiceProcessInstaller();
        ServiceInstaller serviceInstaller = new ServiceInstaller();
        EventLogInstaller eventLogInstaller = new EventLogInstaller();

        // Service Account Information
        serviceProcessInstaller.Account = ServiceAccount.LocalSystem;
        serviceProcessInstaller.Username = null;
        serviceProcessInstaller.Password = null;

        // Service Information
        // The installer's ServiceName must be identical to the JobManager.ServiceName set in the constructor of JobManager.cs
        serviceInstaller.ServiceName = "VIAVista";
        serviceInstaller.DisplayName = "VIAVista";
        serviceInstaller.StartType = ServiceStartMode.Automatic;

        // EventLog
        eventLogInstaller.Source = "VIAVista";
        eventLogInstaller.Log = "VIAVista";

        // Dependency SQL Server service (i.e.SQL Server must run)
        serviceInstaller.ServicesDependedOn = new string[] { "MSSQL$SQLEXPRESS" };

        this.Installers.Add(serviceProcessInstaller);
        this.Installers.Add(serviceInstaller);
        this.Installers.Add(eventLogInstaller);
    }
} 
```

如您所见，我希望将事件的源和日志命名为“VIAVista”。

当我尝试在我的服务器（Windows Web Server 2008 R2 64bit）上安装服务时，我被告知事件源已经存在于日志“应用程序”中。这很奇怪，因为我认为 this.Installers.Clear() 会阻止创建默认源/日志。

信息：在安装服务之前，我使用 regedit 确保没有“VIAVista”密钥。

有任何想法吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:07:48.977

尝试

```
 serviceInstaller.Installers.Clear(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:28:50.050

做这个：

```
if (!EventLog.SourceExists(source))
    EventLog.CreateEventSource(source, log);

EventLog.WriteEntry(source, message, type, eventid); 
```

如果源存在，它将被使用，否则将被创建。

# connection - Java 独立应用程序中的 JMS 连接池与 Websphere MQ 7.0

> ID：12200065
> 
> 赞同：3
> 
> 时间：2012-08-30T15:10:53.217
> 
> 标签：connection, jms, connection-pooling, pool

我将开发作为 JMS 客户端的独立 Java 应用程序。我想确保每次向队列发送消息时，我都不必创建会话、连接等。

我正在考虑使用 Apache Camel 附带的 CachedConnectionFactory 或使用 Spring 提供的解决方案。尽管如此，据我所知，前者的局限性在于它不适合事务，而后者的局限性在于它在故障转移的情况下可能无法正常运行。

在一篇文章（http://stackoverflow.com/questions/8922339/how-to-pooling-the-jms-connection-in-a-standalone-java-applications）上，有人建议使用 Apache 公共池组件，但我无论如何不要认为创建这样的池将是一项微不足道的任务

对此有何评论？

# java - Json Gson 不工作（异常对象/字符串）

> ID：12200069
> 
> 赞同：0
> 
> 时间：2012-08-30T15:11:01.547
> 
> 标签：java, json, gson

我有一个将 JSON 传输到 java 类型的问题，我想传输这个 JSON：

```
{ "kind": "fusiontables#sqlresponse", "columns": [  "Pre",  "Post" ], "rows": [  [   "Si2",   "Si2"  ],  [   "CeSP-A",   "CeSP-A"  ],  [   "Si2",   "Si1"  ],  [   "Si1",   "Si2"  ],  [   "Si2",   "Si1"  ],  [   "Si1",   "Si2"  ] ]} 
```

到一个 java 列表，其中每个列表都有两个私有字符串 Pre 和 Post

这是我的代码：

```
Gson gson = new Gson();
        List<Edges> list = gson.fromJson(jsonU,
                new TypeToken<List<Edges>>() {
                }.getType());
        for (int i = 0; i < list.size(); i++) {
            Edges p = list.get(i);
            System.out.println(p.getPre() + ", " + p.getPost());
            System.out.println();
        } 
```

jsonU 是 JSON 文件的字符串

```
{ "kind": "fusiontables#sqlresponse", "columns": [  "Pre",  "Post" ], "rows": [  [   "Si2",   "Si2"  ],  [   "CeSP-A",   "CeSP-A"  ],  [   "Si2",   "Si1"  ],  [   "Si1",   "Si2"  ],  [   "Si2",   "Si1"  ],  [   "Si1",   "Si2"  ] ]} 
```

但是，我得到了错误：

```
 Exception in thread "main" com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 1 column 2 
```

你能帮我解决这个问题吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:14:18.597

您正在告诉 GSON 反序列化 a`List<Edges>`但您传递的 JSON 以对象开头，带有`{`和`}`标记。

GSON，根据您传递给它的类型参数，期待类似：

```
[
    { "kind": .... },
    { "kind: .... },
    ...
] 
```

换句话说，当您传递对应于单个对象的 JSON 时，GSON 如何构造一个列表？

# php - PHP ODBC不接受带空格的列名别名

> ID：12200072
> 
> 赞同：5
> 
> 时间：2012-08-30T15:11:05.237
> 
> 标签：php, sql, sql-server, odbc

基本上，我需要使用 PHP 从 SQL Server 2005 中获取一些数据。

之前我们使用了`mssql_*`函数，但是由于各种服务器问题，我们现在只能使用`odbc_*`函数。

该表有各种列，其名称中有空格，在建议之前....不，我无法更改它们，因为这是另一种语言的完全独立的软件，它会破坏它，我只是得到统计数据其中。

Anywho，我以前一直通过将它们的名称放在方括号中来访问这些列，例如 [column name] 并且它在`mssql_*`函数下运行良好，但是当我这样做时：

```
$sql = "select top 1 [assessment name] as AssessmentName from bksb_Assessments";
$result = odbc_exec($db, $sql);
while($row = odbc_fetch_array($result))
{
    var_dump($row);
} 
```

它将结果打印为：

> '评估名称' => 字符串'数学 E3 诊断'（长度 = 25）

所以你可以看到它完全忽略了我给它的别名，仍然称它为[评估名称]。

但是，如果我在 SQL Server Management Studio Express 中运行完全相同的东西，它可以正常工作并使用别名。

我尝试了各种不同的组合，例如引用别名、引用列、不同的括号等……但到目前为止还没有运气。

这不是一个大问题，因为我可以更改我的脚本用于在结果数组而不是别名中查找“评估名称”的内容，但我无法弄清楚**为什么**会发生这种情况，这有点烦人。 ..

干杯! :)

**编辑：**

实际上我不认为方括号有什么不同，只是试图通过 php odbc 对任何列进行别名处理，但是我仍然可以做类似 CAST(whatever) AS 'alias' 之类的事情，而且效果很好......只是没有选择一列作为别名......？：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:59:53.617

这绝不是一个完美的解决方案，我很想学习处理这个问题的正确方法，但同时，添加

```
+''
```

到每一列，在基础列名之后，但在 AS 别名之前，您应该能够规避这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-02T22:17:56.297

在尝试解决此问题并确定为什么我的团队的某些存储过程会出现这种行为时，我终于找到了原因。奇怪的是，我们只在几个存储过程中遇到了这个问题，而大多数都按预期返回了别名。

似乎声明至少一个变量，无论它是否被使用，都可以防止这个特定的错误发生。变量可以是任何类型。

如果您只是在不使用**存储过程的情况下执行****SELECT**查询，请使用**DECLARE语句在语句****之前**或**之后**定义变量：

 ******```
// This works...
DECLARE @ignore TINYINT; SELECT EmployeeID AS employee_id FROM Employee;

// So does this...
SELECT EmployeeID AS employee_id FROM Employee; DECLARE @ignore TINYINT; 
```

现在，如果您在**存储过程**中遇到这个问题，您可以通过在正文中的**任何位置**定义一个变量来采用上述相同的方法。

我注意到的另一件事是，如果存储过程是用参数定义的，如果你的参数在**if 语句中被****设置**或评估，这个 bug 也不会发生。例如，

 **```
// This works...
CREATE PROC get_employee(
  @employee_id VARCHAR(16) = NULL
)
AS
  IF (@employee_id IS NOT NULL)
  BEGIN
    SELECT FirstName AS first_name FROM Employee WHERE EmployeeID = @employee_id;
  END
GO 
```

使用**SET**：

```
// So does this...
CREATE PROC get_employee(
  @employee_id VARCHAR(16) = NULL,
  @ignore TINYINT
)
AS
  SET @ignore = NULL;

  SELECT FirstName AS first_name FROM Employee WHERE EmployeeID = @employee_id;
GO 
```

我仍然不太了解错误的原因或性质；但是这些变通方法，类似于上面的类型转换技巧，似乎可以解决这个烦人的错误。

*可能还值得一提的是，我们在Ubuntu 14.04*和*PHP 5.4*中没有遇到这个问题。一旦我们升级到*Ubuntu 18.04*和*PHP 7.2*，我们就开始遇到这个问题。在这两种情况下，我们都将 FreeTDS 配置为使用*7.1*版本，这就是为什么我们对这个特定的错误感到困惑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-16T12:07:39.803

@dearsina 的方法实际上似乎是处理此错误的少数方法之一。

但是，此解决方案不适用于所有数据类型。所以对我来说，覆盖所有需要的列的唯一方法是`CAST()`相关列（最初 c.State 将是 datatype `bit`）：

```
SELECT
    CAST(c.State AS nvarchar) AS 'customer_state'
FROM
    customers AS c; 
```

否则您可能会收到类似于

> 数据类型 bit 和 varchar 在 add 运算符中不兼容。

*`CAST`大型数据集参考： [https ://social.msdn.microsoft.com/Forums/sqlserver/en-US/643b6eda-fa03-4ad3-85a1-051f02097c7f/how-much-do-cast-statements-affect-performance ?forum=transactsql](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/643b6eda-fa03-4ad3-85a1-051f02097c7f/how-much-do-cast-statements-affect-performance?forum=transactsql_)*

* * *

关于这个主题的一些进一步发现是最近（2017 年 11 月）在 bugs.php.net 上提出的错误报告，声称该问题与 FreeTDS 有关：[https](https://bugs.php.net/bug.php?id=75534) ://bugs.php.net/bug.php?id=75534 。此错误报告包含一个**非官方的（至少从我的最终*未经测试*的）补丁**：

```
diff --git a/ext/odbc/php_odbc_includes.h b/ext/odbc/php_odbc_includes.h
index 93e2c96..8451bcd 100644
--- a/ext/odbc/php_odbc_includes.h
+++ b/ext/odbc/php_odbc_includes.h
@@ -292,18 +292,16 @@ void odbc_sql_error(ODBC_SQL_ERROR_PARAMS);

 #define PHP_ODBC_SQLCOLATTRIBUTE SQLColAttribute
 #define PHP_ODBC_SQLALLOCSTMT(hdbc, phstmt) SQLAllocHandle(SQL_HANDLE_STMT, hdbc, phstmt)
-
-#define PHP_ODBC_SQL_DESC_NAME SQL_DESC_NAME
 #else
 #define IS_SQL_LONG(x) (x == SQL_LONGVARBINARY || x == SQL_LONGVARCHAR)

 #define PHP_ODBC_SQLCOLATTRIBUTE SQLColAttributes
 #define PHP_ODBC_SQLALLOCSTMT SQLAllocStmt
-
-#define PHP_ODBC_SQL_DESC_NAME SQL_COLUMN_NAME
 #endif
 #define IS_SQL_BINARY(x) (x == SQL_BINARY || x == SQL_VARBINARY || x == SQL_LONGVARBINARY)

+#define PHP_ODBC_SQL_DESC_NAME SQL_DESC_LABEL
+
 PHP_ODBC_API ZEND_EXTERN_MODULE_GLOBALS(odbc)
 #define ODBCG(v) ZEND_MODULE_GLOBALS_ACCESSOR(odbc, v) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-05T17:54:13.057

面临类似的问题。[**odbc_connect**](https://www.php.net/manual/en/function.odbc-connect.php)的第四个参数在我选择游标类型**SQL_CUR_USE_ODBC**的情况下起到了作用。********

# asp.net - ASP.NET Web API 包问题

> ID：12200073
> 
> 赞同：0
> 
> 时间：2012-08-30T15:11:05.660
> 
> 标签：asp.net, asp.net-web-api, nuget

我成功地在我的网络应用程序中安装了 asp.net web api 包。

```
PM> install-package aspnetwebapi
Attempting to resolve dependency 'Microsoft.AspNet.WebApi (≥ 4.0.20710.0 && < 4.1)'.

Attempting to resolve dependency 'Microsoft.AspNet.WebApi.WebHost (≥ 4.0.20710.0 && < 4.1)'.
Attempting to resolve dependency 'Microsoft.Web.Infrastructure (≥ 1.0.0.0)'.
Attempting to resolve dependency 'Microsoft.AspNet.WebApi.Core (≥ 4.0.20710.0 && < 4.1)'.
Attempting to resolve dependency 'Microsoft.AspNet.WebApi.Client (≥ 4.0.20710.0 && < 4.1)'.
Attempting to resolve dependency 'Microsoft.Net.Http (≥ 2.0.20710.0 && < 2.1)'.
Attempting to resolve dependency 'Newtonsoft.Json (≥ 4.5.6)'.
You are downloading Microsoft.AspNet.WebApi from Microsoft, the license agreement to which is available at http://www.microsoft.com/web/webpi/eula/MVC_4_eula_ENU.htm. Check the package for additional dependencies, which may come with their own license agreement(s). Your use of the package and dependencies constitutes your acceptance of their license agreements. If you do not accept the license agreement(s), then delete the relevant components from your device.
Successfully installed 'Microsoft.AspNet.WebApi 4.0.20710.0'.
You are downloading AspNetWebApi from Microsoft, the license agreement to which is available at http://www.microsoft.com/web/webpi/eula/MVC_4_eula_ENU.htm. Check the package for additional dependencies, which may come with their own license agreement(s). Your use of the package and dependencies constitutes your acceptance of their license agreements. If you do not accept the license agreement(s), then delete the relevant components from your device.
Successfully installed 'AspNetWebApi 4.0.20710.0'.
Successfully added 'Microsoft.Web.Infrastructure 1.0.0.0' to ProductConfiguration.
Successfully added 'Microsoft.Net.Http 2.0.20710.0' to ProductConfiguration.
Successfully added 'Newtonsoft.Json 4.5.8' to ProductConfiguration.
Successfully added 'Microsoft.AspNet.WebApi.Client 4.0.20710.0' to ProductConfiguration.
Successfully added 'Microsoft.AspNet.WebApi.Core 4.0.20710.0' to ProductConfiguration.
Successfully added 'Microsoft.AspNet.WebApi.WebHost 4.0.20710.0' to ProductConfiguration.
Successfully added 'Microsoft.AspNet.WebApi 4.0.20710.0' to ProductConfiguration.
Successfully added 'AspNetWebApi 4.0.20710.0' to ProductConfiguration. 
```

当我添加一个 Web API 控制器时，我得到以下信息：

![在此处输入图像描述](../Images/ddba28a3f46487c802543d9c39249051.png)

它添加的控制器来自 Web API Beta（带有“命名空间**。**控制器”）

我正在使用 VWD 2010。

我怎样才能让它正常工作？

**编辑：** 无法卸载...

![在此处输入图像描述](../Images/7b63cdf3f9ff91a63c89d56a71601d5b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:14:40.650

如果尚未安装，请尝试使用 NuGet 进行安装

# android - 如何停止意图服务？

> ID：12200078
> 
> 赞同：-1
> 
> 时间：2012-08-30T15:11:25.473
> 
> 标签：android, intentservice

我使用 S3 Multipart api 将文件上传到网络。上传是在 IntentService 中完成的。现在 api 支持恢复支持，我想允许用户暂停和恢复上传。现在的问题是当我允许用户按下暂停按钮时，我怎样才能终止 Intent 服务？我需要获取当前正在执行的 IntentService，并以某种方式调用一个函数来保存上传对象的状态并暂停或终止它。知道如何向当前正在执行的意图服务发送消息并杀死它吗？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:13:51.680

an在方法退出`IntentService`时自行停止。`onHandleIntent()`这是它相对于常规服务的好处之一——您不需要管理生命周期。

来自[Android 文档页面`IntentService.onHandleIntent()`](http://developer.android.com/reference/android/app/IntentService.html#onHandleIntent%28android.content.Intent%29)，

> 在工作线程上调用此方法并请求处理。一次只处理一个 Intent，但处理发生在独立于其他应用程序逻辑运行的工作线程上。因此，如果这段代码需要很长时间，它会阻止对同一个 IntentService 的其他请求，但不会阻止其他任何请求。处理完所有请求后，IntentService 会自行停止，因此您不应调用 stopSelf()。

至于暂停/恢复上传，您需要使用非阻塞 IO。无法中断或以其他方式停止阻塞 IO。您能做的最好的事情就是设置一些状态，告诉自己在结果完成后丢弃结果。非阻塞 IO 稍微复杂一些，超出了这里讨论的范围。这是关于该主题的一个[合理的教程。](http://rox-xmlrpc.sourceforge.net/niotut/index.html)如果您使用更高级别的 API（如 AWS Android API）与 S3 交互，则该 API 需要支持非阻塞 IO。

在您的情况下，您可以为每次上传保留一个数据库。当您在您的意图服务中获得结果时，您可以查询数据库以查看用户是否取消了上传。

如果您正在寻找一种强大的方式来下载支持暂停/恢复的文件，您是否查看过[`DownloadManager`](http://developer.android.com/reference/android/app/DownloadManager.html)API？

# google-app-engine - App Engine 索引卡在构建和删除状态

> ID：12200079
> 
> 赞同：2
> 
> 时间：2012-08-30T15:11:27.907
> 
> 标签：google-app-engine

我在我的应用程序和索引构建的最新版本中引入了一个新实体，因为它已经停留在“构建”状态超过 12 小时，即使数据库中还没有这种实体。

我尝试了 update_indexes 并尝试重新部署我的应用程序。然后我从 index.yaml 中删除了所有索引并尝试了 Vacuum_indexes。现在所有其他索引在同一时间段内都停留在“删除”状态。所有对 Vacuum_indexes 的额外调用都会产生以下消息：

“6 个索引没有被删除。这很可能是因为它们不再存在。”

然后列出的 6 个索引是处于“正在构建”状态的索引。

因此，没有一个索引处于“错误”状态，但它们不会完成构建和删除。我在数据存储区中有大约 400 个实体，而索引构建从来没有超过几分钟。

解答： 20 多个小时后，索引终于建好，删除的索引消失了。

# asp.net - 在单独的 DAL 项目中播种 EF 数据库

> ID：12200086
> 
> 赞同：0
> 
> 时间：2012-08-30T15:11:56.350
> 
> 标签：asp.net, asp.net-mvc, entity-framework, data-access-layer, entity-framework-5

我正在开始一个新的 ASP.NET 项目，并且我正在尝试遵循[我在 Stackoverflow 的多个问题中提到的多项目方法](https://stackoverflow.com/a/7474357/1080891)。

我一直在关注[本](http://www.asp.net/web-forms/tutorials/aspnet-45/getting-started-with-aspnet-45-web-forms/create_the_data_access_layer)教程，但它假定您的整个解决方案只有一个项目。最值得注意的是，它建议使用代码修改 Global.asax 文件以设置数据库初始化程序。

看到我的 DAL 项目没有 Global.asax 文件，为初始 EF 数据库播种的正确程序是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:23:51.107

在`Application_Start`Global.asax 中：

```
Database.SetInitializer(new Configuration());
using (var db = new Context())
{
    try
    {
        db.Database.Initialize(false);
    }
    catch (DataException ex)
    {

    }
    catch (Exception ex)
    {
        throw;
    }
} 
```

Context 类在**DAL**中的位置：

```
public class Context : DbContext
{
    public Context() : base("YourDatabaseName") { }
    public DbSet<Employee> Employees { get; set; }

    // ...

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new EmployeeMap()); 
```

您在一个专门的类中进行映射`public class EmployeeMap : EntityTypeConfiguration<Employee>`。

**播种**在 DAL 中完成：

```
public sealed class Configuration : DropCreateDatabaseAlways<Context>
{
    protected override void Seed(Context context)
    {
        // Do your seeding here
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:55:14.763

我在上述评论中更正了您可以通过辅助参考访问 DAL。如果您真的不想在您的 Web 项目中引用 DAL，请在您的 BLL 中创建一个 Bootstrapper 类来为您处理数据库内容

这些示例来自以下博客文章： [http ://weblogs.asp.net/rashid/archive/2009/02/17/use-bootstrapper-in-your-asp-net-mvc-application-and-reduce-代码-smel.aspx](http://weblogs.asp.net/rashid/archive/2009/02/17/use-bootstrapper-in-your-asp-net-mvc-application-and-reduce-code-smell.aspx)

创建引导接口

```
public interface IBootstrapperTask
{
    void Execute();
} 
```

创建一个可以处理您的数据库配置的类

```
public class InitializeDatabase : IBootstrapperTask
{
    public void Execute()
    {
        Database.SetInitializer(new Configuration());
        using (var db = new Context())
        {
          try
          {
            db.Database.Initialize(false);
          }
          catch (DataException ex)
          {

          }
          catch (Exception ex)
          {
            throw;
          }
        }
      }
       } 
```

创建一个将执行任务的静态类（您可以有多个，注册路由可以移动到 BootstrapperTask）

```
public static class Bootstrapper
{
    static Bootstrapper()
    {
        ConfigureContainer();
    }

    public static void Run()
    {
        var tasks = ServiceLocator.Current.GetAllInstances<IBootstrapperTask>();

        foreach(var task in tasks)
        {
            task.Execute();
        }
    }

    private static void ConfigureContainer()
    {
        IUnityContainer container = new UnityContainer();

        UnityConfigurationSection configuration = (UnityConfigurationSection) ConfigurationManager.GetSection("unity");
        configuration.Containers.Default.Configure(container);

        ServiceLocator.SetLocatorProvider(() => new UnityServiceLocator(container));
    }
} 
```

最后，您的 global.asax 将有一个班轮

```
protected void Application_Start()
{
    Bootstrapper.Run();
} 
```

您将在博客文章中看到一些 web.config 的事情要做。此外，[这个问题](https://stackoverflow.com/questions/3843802/how-should-i-implement-an-mvc-bootstrapper-for-unity-and-automapper)可以提供更多关于处置等细节的信息。boostrapping 比简单地不必参考 DAL 有更多的好处，社区中有一些关于为什么使用这种模式是一件好事的优秀帖子以及几种不同的实施方法。

# c++ - 哪个库链接到用户 boost::intrusive_ptr

> ID：12200089
> 
> 赞同：1
> 
> 时间：2012-08-30T15:12:12.093
> 
> 标签：c++, boost, linker, shared-libraries

是否有可能找出为使用 boost::intrusive_ptr 的库链接的库文件？

我尝试使用 boost bcp 工具，但这并没有给出编译 dylib boost::intrusive_ptr 的任何提示。

在我的系统上，我编译了这些 boost 库（版本 1.49.0）：

```
/usr/local/Cellar/boost/1.49.0/lib/
libboost_chrono-mt.a            libboost_iostreams-mt.a         libboost_math_c99l-mt.dylib     libboost_program_options-mt.a       libboost_serialization-mt.dylib     libboost_timer-mt.dylib
libboost_chrono-mt.dylib        libboost_iostreams-mt.dylib     libboost_math_tr1-mt.a          libboost_program_options-mt.dylib   libboost_signals-mt.a           libboost_unit_test_framework-mt.a
libboost_date_time-mt.a         libboost_locale-mt.a            libboost_math_tr1-mt.dylib      libboost_python-mt.a            libboost_signals-mt.dylib       libboost_unit_test_framework-mt.dylib
libboost_date_time-mt.dylib     libboost_locale-mt.dylib        libboost_math_tr1f-mt.a         libboost_python-mt.dylib        libboost_system-mt.a            libboost_wave-mt.a
libboost_exception-mt.a         libboost_math_c99-mt.a          libboost_math_tr1f-mt.dylib     libboost_random-mt.a            libboost_system-mt.dylib        libboost_wave-mt.dylib
libboost_filesystem-mt.a        libboost_math_c99-mt.dylib      libboost_math_tr1l-mt.a         libboost_random-mt.dylib        libboost_test_exec_monitor-mt.a     libboost_wserialization-mt.a
libboost_filesystem-mt.dylib        libboost_math_c99f-mt.a         libboost_math_tr1l-mt.dylib     libboost_regex-mt.a         libboost_thread-mt.a            libboost_wserialization-mt.dylib
libboost_graph-mt.a         libboost_math_c99f-mt.dylib     libboost_prg_exec_monitor-mt.a      libboost_regex-mt.dylib         libboost_thread-mt.dylib
libboost_graph-mt.dylib         libboost_math_c99l-mt.a         libboost_prg_exec_monitor-mt.dylib  libboost_serialization-mt.a     libboost_timer-mt.a 
```

lib 名称本身并不总是提示找到要链接的文件（例如 boost::asio 在 lboost_system-mt 中）。显然，随机链接是没有意义的。如果我使用 boost 中的任何东西，有什么方法可以找到依赖项？

最好的，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:58:39.393

`intrusive_ptr`是智能指针库的一部分，它只是标题，即你不需要链接任何东西。

Boost.Asio 不在*lboost_system* -mt 中，它只是*使用*Boost.System（已记录在案）。

# objective-c - 拆分视图控制器中的 UIPageViewController

> ID：12200092
> 
> 赞同：-1
> 
> 时间：2012-08-30T15:12:19.530
> 
> 标签：objective-c, xcode, ipad, uisplitviewcontroller, uipageviewcontroller

我想在我的拆分视图控制器中有 UIPageViewController。所以我创建了 UIPageViewController 并替换了我的详细视图控制器。

但现在的问题是我可以移动到下一页但不能移动到前一页。当我在纵向模式下使用拆分视图时，当我尝试移至上一页时会出现主 vc。在横向模式下没有响应。

任何解决方案或样品将不胜感激。

我已按照此链接创建 UIPageViewCntroller [http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:14:44.537

您可以通过执行禁用拆分视图控制器中的滑动

```
splitViewController.presentsWithGesture = NO; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:22:39.467

我得到它的工作如下，

```
- (BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation 
```

现在我的主视图将始终在纵向模式下可见。

# python - python：active_directory 模块：检查 用户名

> ID：12200094
> 
> 赞同：0
> 
> 时间：2012-08-30T15:12:24.940
> 
> 标签：python, active-directory

使用 active_directory 模块时遇到一个奇怪的问题，顺便说一句，这是一个很棒的包装器。

无论如何，我需要确保用户名是唯一的......这是我的功能：

```
import active_directory

def creative_name(fname, lname, n=1):
    uname = fname[:n] + lname
    x = active_directory.find_user(uname)
    if x: creative_name(fname, lname, n+1)
    else: return uname

if __name__=='__main__':
    print creative_name("Sarah", "Smith") 
```

它不断出现 None ......我希望它返回 uname ......或

```
fname[:n+1] + lname 
```

这很奇怪，因为如果我像这样运行函数：

```
def creative_name(fname, lname, n=1):
    uname = fname[:n] + lname
    x = active_directory.find_user(uname)
    if x: creative_name(fname, lname, n+1)
    else: print uname

>>>
SaSmith
>>> 
```

SaSmith 被返回......为什么它不返回值？！？！print uname 有效，但 return uname 返回 None！

请帮忙！

谢谢大家，

兰迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:20:26.127

它没有返回`SaSmith`，因为没有返回递归部分，所以如果`x`为 true，则函数返回`None`。添加一个`return`应该可以解决：

```
def creative_name(fname, lname, n=1):
    if n > len(fname): return None
    uname = fname[:n] + lname
    x = active_directory.find_user(uname)
    if x: return creative_name(fname, lname, n+1)
    else: return uname 
```

.

注意：第一行防止无限循环 if `active_directory.find_user(fname[:n]_lname)`is True for each `n`。

*我同意@Randall 的观点，即使用`for`循环可能更具可读性，它`None`在上述情况下返回。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:14:56.060

哦，伙计……容易多了。

```
import active_directory

def creative_name(fname, lname):
    for i in range(1,len(fname)):
        uname = fname[:i] + lname
        x = active_directory.find_user(uname)
        if not x: return uname

if __name__=='__main__':
    print creative_name("Sarah", "Smith") 
```

# virtualenv - 安装 virtualenvwrapper

> ID：12200095
> 
> 赞同：0
> 
> 时间：2012-08-30T15:12:25.260
> 
> 标签：virtualenv, virtualenvwrapper

我正在尝试安装 virtualenvwrapper 并面临一些问题..

错误：

```
error: /Library/Python/2.7/site-packages/virtualenvwrapper: Permission denied
Command /usr/bin/python -c "import setuptools;__file__='/Users/build/virtualenvwrapper/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /var/folders/x6/1rbbd59j1w7dx74lrrs181vh0000gn/T/pip-HQwbCQ-record/install-record.txt failed with error code 1 in /Users/build/virtualenvwrapper 
```

如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:14:48.380

您是否尝试过使用 sudo 命令来运行您的命令？

[http://www.gratisoft.us/sudo/man/1.8.5/sudo.man.html](http://www.gratisoft.us/sudo/man/1.8.5/sudo.man.html)

# c - C 标准的哪一部分允许编译此代码？

> ID：12200096
> 
> 赞同：14
> 
> 时间：2012-08-30T15:12:25.473
> 
> 标签：c

我正在修复一些代码的错误，编译器（合法地）警告说该函数`dynscat()`没有被声明——其他人对可接受的编码标准的想法——所以我追踪了函数的定义位置（很容易）以及哪个头文件声明了它（没有; 咕噜！）。但我期待找到结构定义的细节对于`extern`声明是必要的`qqparse_val`：

```
extern struct t_dynstr qqparse_val;

extern void dynscat(struct t_dynstr *s, char *p);
extern void qqcat(char *s);

void qqcat(char *s)
{
    dynscat(&qqparse_val, s);
    if (*s == ',')
        dynscat(&qqparse_val, "$");
} 
```

原始代码中的`qqcat()`函数是静态的；extern 声明消除了此代码片段的编译器警告。`dynscat()`完全没有函数声明；再次，添加它会平息警告。

通过显示的代码片段，很明显只使用了变量的地址，因此在某种程度上，结构的细节未知并不重要。如果是变量`extern struct t_dynstr *p_parseval;`，你就不会看到这个问题；这将是 100% 的预期。如果代码需要访问结构的内部，则需要结构定义。但是我一直期望如果你声明变量是一个结构（而不​​是指向结构的指针），编译器会想知道结构的大小——但显然不是。

我试过让 GCC 抱怨，但它没有，即使是 GCC 4.7.1：

```
gcc-4.7.1 -c -Wall -Wextra -std=c89 -pedantic surprise.c 
```

该代码已经在 AIX、HP-UX、Solaris、Linux 上编译了十年，因此它不是特定于 GCC 的。

### 问题

C 标准是否允许这样做（主要是 C99 或 C11，但 C89 也可以）？哪个板块？或者我只是碰到了一个奇怪的盒子，它可以在它移植到的所有机器上运行，但没有得到标准的正式批准？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T15:50:56.417

你所拥有的是一个不完整的类型（ISO/IEC 9899:1999 和 2011——所有这些参考在两者中都是相同的——§6.2.5 ¶22）：

> 未知内容的结构或联合类型（如 §6.7.2.3 中所述）是不完整类型。

不完整的类型仍然可以是左值：

§6.3.2.1 ¶1（左值、数组和函数指示符）

> 左值是具有对象类型或除 void 以外的不完整类型的表达式；...

因此，它就像任何其他`&`具有左值的一元一样。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T15:33:03.870

看起来像是获取类型不完整的对象的地址的情况。

使用指向不完整类型的指针是完全正常的，每次使用指向 void 的指针时都会这样做（但没有人告诉过你 :-)

另一种情况是，如果您声明类似

```
extern char a[]; 
```

可以分配给 的元素并不奇怪，`a`对吧？尽管如此，它还是一个不完整的类型，一旦你将这样的标识符作为 a 的操作数，编译器就会告诉你`sizeof`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-30T16:06:59.387

你的线

```
extern struct t_dynstr qqparse_val; 
```

是对象的外部声明，而不是定义。作为外部对象，它“具有链接”，即外部链接。

标准说：

> 如果对象的标识符被声明为没有链接，则对象的类型应在其声明符的末尾完成，...

这意味着如果它具有链接，则类型可能不完整。所以`&qqparse_val`以后做是没有问题的。`sizeof(qqparse_val)`由于对象类型不完整，您将无法做到这一点。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-24T22:52:53.597

声明对于“引用”某事是必要的。定义是“使用”某物所必需的。声明可以提供一些有限的定义，如“int a[];” 让我难过的是：

```
int f(struct _s {int a; int b;} *sp)
{
    sp->a = 1;
} 
```

gcc 警告在参数列表中声明了“struct _s”。并声明“它的范围只是这个定义或声明，......”。但是，它不会在参数列表中没有的“sp->a”上给出错误。在编写“C”解析器时，我必须决定定义范围的结束位置。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-30T22:43:04.123

专注于第一行：

```
extern struct t_dynstr qqparse_val; 
```

它可以分为创建类型和变量的单独步骤，从而产生这对等效的行：

```
struct t_dynstr; /* declaration of an incomplete (opaque) struct type */
extern struct t_dynstr qqparse_val; /* declaration of an object of that type */ 
```

第二行看起来和原来的一样，但现在它指的是由于第一行而已经存在的类型。

第一行有效，因为这就是不透明结构的完成方式。

第二行有效，因为您不需要完整的类型来执行 extern 声明。

组合（第二行没有第一行）有效，因为将类型声明与变量声明结合起来通常有效。所有这些都使用相同的原理：

```
struct { int x,y; } loc; /* define a nameless type and a variable of that type */
struct point { int x,y; } location; /* same but the type has a name */
union u { int i; float f; } u1, u2; /* one type named "union u", two variables */ 
```

`extern`紧随其后的是类型声明，这看起来有点有趣，就像您试图使类型本身成为“extern”一样，这是无稽之谈。但这不是它的意思。这`extern`适用`qqparse_val`于尽管他们在地理上分开。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-30T15:35:34.817

这是我对标准（C11）的看法。

> **第 6.5.3.2 节：地址和间接运算符**
> 
> **约束**
> 
> **第 1 段**：一元 & 运算符的操作数应为函数指示符、[] 或一元 * 运算符的结果，或指定不是位域且未使用寄存器存储声明的对象的左值-类说明符。
> 
> **第 2 段**：一元 * 运算符的操作数应具有指针类型。

在这里，我们没有对对象指定任何要求，除了它是一个对象（而不是位域或寄存器）。

另一方面，让我们看看 sizeof。

> **6.5.3.4 sizeof 和 _Alignof 运算符**
> 
> **约束**
> 
> **第 1 段：** sizeof 运算符不得应用于具有函数类型或不完整类型的表达式、此类类型的括号名称或指定位域成员的表达式。_Alignof 运算符不应应用于函数类型或不完整类型。

在这里，标准明确要求对象不是不完整的类型。

因此，我认为这是允许没有明确拒绝的情况。

# php - 如何用 PHP 创建一个“数学方块”拼图？

> ID：12200099
> 
> 赞同：2
> 
> 时间：2012-08-30T15:12:33.867
> 
> 标签：php, math, logic

**数学广场：** 像这个：[http ://www.ps-heine.de/archives/416](http://www.ps-heine.de/archives/416)

*   数学正方形必须从左到右，从上到下求解。
*   操作规则的顺序不适用。
*   每个号码只能按时使用。

我从小学就喜欢这本书，但不幸的是我找不到任何书。对此感到失望，我以为我可以尝试自己做一些。

我仍处于概念阶段，但让我解释一下我到目前为止所采取的步骤：

首先我创建一个数组`$matrix`。

*   它包含矩阵的每一行的数组。
*   每个行数组包含实际行的列/单元格。
*   每个单元格都是一个带有参数“id”、“type”和“value”的数组。

在此处查看阵列示例：http: [//pastebin.com/RdBmxvjq](http://pastebin.com/RdBmxvjq)

在此示例中，您已经可以看到运算符。

我有一个函数 operator()，它随机返回运算符“+”、“-”、“*”、“/”之一。

自然首先包括运算符，而不是找到适合矩阵的数字以及它们比反之亦然容易得多。

*在这一点上，我可能已经完成了！*

现在我可以输入随机数（当然是从数组中，所以它们不会重复），计算行和列的结果，删除数字并完成我的拼图！

**如果没有除法运算符！**

当然，我们不希望我/最终用户尝试除以素数或得到小数。

现在我可以循环并“蛮力”，直到我找到在除号之前输入的完美数字，但这是如此...... naff

我希望有一种方法可以在最初确保所有部门的结果都很好……结果……

有任何想法吗？

**编辑：**

让我添加一些我刚刚想到的一些随机想法，这些想法对我来说有点有意义：

首先，当我更改拼图中的数字时，它将对整个拼图生效。因此，更改数字，包括所有类型的蛮力，是性能杀手（除了它的 naff 之外）。

因此，一个合乎逻辑的结果是首先开始仅在发生除法的地方包含数字。

我们可以使用一个数字作为我们首先通过乘以其他一些数字来计算的“产品”，以确保该数字不是质数并具有一个因子。

但是，如果其中一个因数是质数，又发生了除法，会发生什么？

如果我们反复使用一个数字乘以另一个数字来获得一个非质因数，这将减少我们拼图中数字的多样性，从而使整个事情变得不那么有趣。

当我们对它进行“逆向工程”时，谜题中的乘法会发生什么？他们自动“成为分裂”，问题重新开始。

请让一些数学家来叫我愚蠢并提出一个非常简单的解决方案......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:22:27.573

尝试这个：

```
$num = integer; // the number before /
$factors = array(1, $num); // allowed numbers after / (1 and $num are always allowed)

// loop through whole numbers up to the original $num
for($i = 2; $i < $num ; $i++) {
    // if $i can devide $num, save it and the other factor
    if($num % $i == 0) {

        // if $i is there, we have gone through all factors, no need to loop anymore
        if(in_array($i, $factors)) {
            break;
        }

        // save $i and $num / $i
        $factors[] = $i;
        if($i != $num / $i) { // do not save $i twice
            $factors[] = $num / $i;
        } 
    }
} 
```

并使用 $factors 数组中的随机数作为“/”之后的数字。

关于填写数字（伪代码）：

```
R = row, C = collumn
for(R; R < max rows; R = R+2) { // R+2 to skip sign rows
    for(C; C < max cols; C = C+2) { // C+2 to skip sign columns

        if(C-1 == / && R-1 == / && C >= 2 && R >= 2) {
            find factors of C - 2;
            find factors of R - 2;
            select number from subsection of these (should be at least 1)                 
        } 

        else if (C-1 == / && C >= 2) {
            select number from factors of C-2
        }

        else if (R-1 == / && R >= 2) {
            select number from factors of R-2
        }   

        else {
            select any number (maybe select just non-prime numbers here)
        }
    }
} 
```

我不想承认，这就是我今天的所有脑力......我稍后会检查一下，看看是否有任何有趣的发展。

# javascript - 在“赞”之后触发事件

> ID：12200101
> 
> 赞同：1
> 
> 时间：2012-08-30T15:12:45.150
> 
> 标签：javascript, facebook, dom-events, facebook-like

如果我想在我的网站上显示的灯箱上嵌入点赞按钮，有没有办法触发导致以下任一事件的事件：

1.  第二个灯箱，在访客点击“喜欢”后感谢访客
2.  一个新标签，在访问者点击“喜欢”后感谢他们

目标是在整个过程中尽可能保持用户体验最佳。我认为这必须是可能的，但我找不到任何资源来解释执行它时的最佳实践。

另外，如果可能的话，我希望能够用发送按钮做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:24:11.490

看看[https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)，类似于：

```
 FB.Event.subscribe('edge.create',
    function(response) {
        greetUser();
    }
  ); 
```

应该管用。

# ruby-on-rails - 从 Rails 3.2.6 降级到 3.0.11

> ID：12200104
> 
> 赞同：0
> 
> 时间：2012-08-30T15:12:59.370
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-1.8.7

我在尝试使用 rails 3.0.11 时遇到问题。我最初使用的是 rails 3.2.6。在 Rails 3.2.6、Ruby 1.9.2 和 gem 1.8.7 中构建原型应用程序。但后来发现，我们需要托管的服务器是共享服务器，只能支持Rails 3.0.11、Ruby 1.8.7 和gem 1.7.2。

因此，在遇到更多问题之前，我想保持我的开发环境完全相同。我发现两个版本的 routes.rb 存在一些差异。

我遵循的步骤：

1.  未安装的导轨
2.  卸载红宝石
3.  [从这里](http://rubyinstaller.org/downloads/)安装 ruby​​ 。
4.  这安装了 ruby​​ 版本 1.8.7-p370 和 gem 1.8.7
5.  在此之后，我通过将版本指定为 3.0.11 来安装 rails

但是当我运行命令 rails -v 时，它仍然会向我抛出一个错误，说“缺少 gem rails 3.2.6。运行捆绑安装以解决问题'

当我运行 bundle install 时，它再次完全安装了 rails 3.2.6 并且问题仍未解决。

请建议我如何在 Rails 3.0.11 上开始我的开发而不遇到任何问题？我是否需要删除系统中用于检测 rails 3.2.6 并产生问题的一些注册表或映射？

它很紧迫，因为我需要在 9 月 7 日之前完成我的开发。

由于我是stackexchange的新手，请指导在同一个相关线程上提问是否合适，或者我应该为我的问题打开新的讨论吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:06:46.910

当您更改您的 rails 依赖项时，您还应该检查删除您的 Gemfile.lock 或手动“捆绑更新 rails”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:54:45.140

@Gun - 请注意回应您在上面发布的评论之一 - 您确实需要更改您的 Gemfile - 如果您`rails -v`从项目目录运行，它将**读取**Gemfile。

有一个脚本位于`script/rails`- 这是从项目目录运行 rails 命令时运行的脚本。请注意，此 rails 脚本需要您的`config/application.rb`文件 - 它依次读取 Gemfile 并捆绑引用的 gem。因此，您的 Gemfile 仍然引用 3.2.6，并且它没有安装，`rails -v`将**无法**工作

很高兴听到问题已解决:)

至于资产管道 - 如果您使用的是 rails 3.2.6（或正在使用它），那么您**可能**一直在使用资产管道来服务您的资产（javascript 文件、CSS 文件、图像等）。**如果**你是，并且你降级到任何之前的 Rails 版本 3.1，那么通过资产管道提供的任何东西都将不再工作。

这是资产管道的一个很好的描述：http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:45:19.973

非常感谢大家的帮助。

我相信这是一个奇怪的问题。我在系统上有heroku。我最初将我的应用程序部署在同一台服务器上，然后更改为另一台托管服务器。卸载heroku后，它工作得很好。可能，那是在某个地方干扰。虽然不确定，但问题已解决。

再次非常感谢您的大力帮助！！！

同时，我会要求 alup 进一步说明资产管道支持。是吗？你能解释更多吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T17:10:02.423

我建议使用[rbenv](https://github.com/sstephenson/rbenv)或 rvm 创建一个虚拟环境/沙箱，您可以在其中安装您喜欢的 ruby​​ 版本（例如 1.8.7）并单独跟踪您的依赖项。这将为您节省很多精力。

请记住，rails 3.0 没有资产管道支持（它已包含在 rails 3.1 中）！这是一个非常重要的区别，如果您依赖它，您将面临降级的大问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T19:00:12.653

需要从桌面删除 C:\Users\.ror 文件夹和 C:\Users\.gemfile 和 C:\Users\.gemfile.lock ..

# objective-c - 如何在 appDelegate 和/或其他视图控制器中使变量可访问？

> ID：12200105
> 
> 赞同：0
> 
> 时间：2012-08-30T15:13:01.063
> 
> 标签：objective-c, xcode, uiviewcontroller, global-variables

我有一个布尔变量需要在我的 appDelegate 中访问，但我不知道该怎么做。我试图导入另一个视图控制器然后实现它，但它出现了一个 Apple Mach-O 链接器 (id) 错误，显示“链接器命令失败，退出代码为 1”。我对应用程序开发相当陌生，所以请用简单的术语解释一下。我正在使用情节提要，因此无法将 xib/nib 文件与我的代码结合使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:19:33.037

Yon 可以在 MyAppDelegate.h 中声明一个属性：

```
@property (strong, nonatomic) NSString *myString; 
```

然后你可以在你的 ViewController 中访问它：

```
#import "MyAppDelegate.h"
...
MyAppDelegate *appDelegate = (MyAppDelegate *)[[UIApplication sharedApplication] delegate];
NSLog(@"%@", appDelegate.myString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T12:47:54.543

**访问 AppDelegate.h 中的 Bool 变量声明到任何其他 UIViewController..**

**1) 在 AppDelegate.h**

```
@property (nonatomic)BOOL myBool; 
```

**2) 在 AppDelegate.m**

```
@synthesize myBool; 
```

**3) 访问任何其他 UIViewController 中的 myBool 变量**

```
#define myAppDelegate [[UIApplication sharedApplication]delegate]

// define above line below @implementation XyzViewController

 if (((AppDelegate *)myAppDelegate).myBool)
 {
    //implement logic    
 }
 else
 {

 } 
```

# java - Java HttpComponents 未使用原始 URL 进行 GET 请求

> ID：12200108
> 
> 赞同：1
> 
> 时间：2012-08-30T15:13:12.470
> 
> 标签：java, http, apache-httpcomponents

看来如果我在这里有这个代码......

```
someGetMethod = 
    new HttpGet("http://www.website.com/blah/Action?test1=1&Test2=2"); 
```

奇怪的是，我生成了这个 http 请求标头。请注意如何`Action`丢失并且 URL 是错误的

```
GET /blah/?test1=1&Test2=2 
```

有谁知道为什么 HttpComponents 会出现这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T16:25:01.427

所以有一个错误。它在构造函数调用`new HttpGet("URI...")`中。

这解决了问题...

```
HttpGet someGet new HttpGet();
someGet.setURI(new URI(url)); 
```

# c# - Microsoft Exchange Folders.findItems 结果限制为 1000

> ID：12200109
> 
> 赞同：5
> 
> 时间：2012-08-30T15:13:15.283
> 
> 标签：c#, exchangewebservices

我正在尝试从 Microsoft Exchange 中的联系人文件夹中获取联系人列表。
即使文件夹中有更多项目，结果也只返回 1000 个项目。
这是我的代码。

```
FindFoldersResults r = service.FindFolders(new FolderId(WellKnownFolderName.PublicFoldersRoot), new FolderView(10));
     Folder folder = getFolder("test", r.Folders);
     ContactsFolder contactsfolder = ContactsFolder.Bind(service, new FolderId(folder.Id.ToString()), new PropertySet(BasePropertySet.IdOnly, FolderSchema.TotalCount));        
     FindItemsResults<Item> items = folder.FindItems(new ItemView(contactsfolder.TotalCount)); 
```

我怎样才能让它退回所有物品？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-22T19:46:54.723

正如 Jason 引用的文章所暗示的，分页是关键。这是我用于 Office365 Exchange Server 的代码，用于获取给定文件夹中所有电子邮件的列表（超过 20,000 封电子邮件，页面大小为 100 时运行速度非常快）：

```
 // via https://msdn.microsoft.com/en-us/library/office/dn592093(v=exchg.150).aspx
            int pageSize = 100;
            int offset = 0;
            ItemView view = new ItemView(pageSize + 1, offset);
            view.PropertySet = new PropertySet(ItemSchema.Subject, ItemSchema.DateTimeSent);
            view.OrderBy.Add(ItemSchema.DateTimeReceived, SortDirection.Descending);
            view.Traversal = ItemTraversal.Shallow;

            bool moreItems = true;
            ItemId anchorId = null;

            while (moreItems)
            {
                FindItemsResults<Item> results = service.FindItems(buildsFolderId, view);
                moreItems = results.MoreAvailable;
                if (moreItems && anchorId != null)
                {
                    // Check the first result to make sure it matches
                    // the last result (anchor) from the previous page.
                    // If it doesn't, that means that something was added
                    // or deleted since you started the search.
                    if (results.Items.First<Item>().Id != anchorId)
                    {
                        Console.Error.WriteLine("The collection has changed while paging. Some results may be missed.");
                    }
                }

                if (moreItems)
                {
                    view.Offset += pageSize;
                }

                anchorId = results.Items.Last<Item>().Id;

                // Because you’re including an additional item on the end of your results
                // as an anchor, you don't want to display it.
                // Set the number to loop as the smaller value between
                // the number of items in the collection and the page size.
                int displayCount = results.Items.Count > pageSize ? pageSize : results.Items.Count;

                for (int i = 0; i < displayCount; i++)
                {
                    Item item = results.Items[i];

                    Console.WriteLine("[" + item.DateTimeSent + "] " + item.Subject);
                }

                Console.Error.WriteLine("Current offset: {0}/{1}", view.Offset, folder.TotalCount);
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T07:55:22.710

我发现这篇文章描述了可能导致限制为 1000 个项目的 EWSFindCountLimit 设置。

这似乎仅适用于 Exchange Server 2010。

[限制策略和 EWSFindCountLimit](http://blogs.msdn.com/b/exchangedev/archive/2010/03/12/throttling-policies-and-the-ewsfindcountlimit.aspx)

从[New-ThrottlingPolicy](http://technet.microsoft.com/en-us/library/dd351045.aspx)，

```
Set-ThrottlingPolicy -Identity <ThrottlingPolicyIdParameter> [-EWSFindCountLimit <UInt32>] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-04T04:42:21.843

这是相同答案的 PowerShell 版本：

```
$allItems = @()

$pageSize = 1000
$offset = 0
$ItemView = New-Object Microsoft.Exchange.WebServices.Data.ItemView -ArgumentList ($pageSize + 1), $offset
$ItemView.PropertySet = New-Object Microsoft.Exchange.WebServices.Data.PropertySet ([Microsoft.Exchange.WebServices.Data.BasePropertySet]::FirstClassProperties,[Microsoft.Exchange.WebServices.Data.EmailMessageSchema]::DateTimeReceived)
$ItemView.OrderBy.Add([Microsoft.Exchange.WebServices.Data.EmailMessageSchema]::DateTimeReceived, 'Descending')
$SearchQuery = "sent:>=1/23/2020 AND sent:<=1/24/2020" 
$Folder = 'SentItems'

do
{
    $items = $exchangeService.FindItems($Folder, $SearchQuery, $ItemView)
    Write-Host "Items Count: $($items.Items.Count), offset: $($ItemView.Offset)"

    if ($items.MoreAvailable)
    {
        $ItemView.Offset += $pageSize
    }

    $items.Items | ForEach-Object {
        $allItems += $PSItem
    }
}
while ($items.MoreAvailable)

$allItems.Count 
```

# python - Python中的二维优化（最小化）（使用scipy.optimize）

> ID：12200114
> 
> 赞同：4
> 
> 时间：2012-08-30T15:13:42.903
> 
> 标签：python, optimization, scipy, minimization

`E(n,k)`我正在尝试优化（最小化）定义如下的二维函数：

```
error=lambda x,y,w: (math.log(abs(Tformulated(x,y,w))) - math.log(abs(Tw[w])))**2 + (math.atan2(Tformulated(x,y,w).imag,Tformulated(x,y,w).real) - math.atan2(Tw[w].imag,Tw[w].real))**2 
```

其中`Tformulated`获得如下：

```
def Tformulated(n,k,w):
    z=1j
    L=1
    C=0.1
    RC=(w*L)/C
    n1=complex(1,0)
    n3=complex(1,0)
    n2=complex(n,k)
    FP=1/(1-(((n2-n1)/(n2+n1))*((n2-n3)/(n2+n3))*math.exp(-2*z*n2*RC)))
    Tform=((2*n2*(n1+n3))/((n2+n1)*(n2+n3)))*(math.exp(-z*(n2-n1)*RC))*FP
    return Tform 
```

并且`Tw`是先前计算的具有复值元素的列表。我真正想做的是对于`w`（在“错误x，y，w ....”中使用）的每个值，我想最小化`x`&的值的函数“错误” `y`。`w`范围从 1 到 2048。因此，它基本上是一个 2D 最小化问题。我已经尝试过编程（尽管我一直不知道使用什么方法以及如何使用它）；我的代码如下：

```
temp=[]
i=range(5)
retval = fmin_powell(error , x ,y, args=(i) , maxiter=100 ,maxfun=100)
temp.append(retval) 
```

我不确定即使`fmin_powell`是正确的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:41:35.360

这是一个最简单的例子：

```
from scipy.optimize import fmin

def minf(x):
  return x[0]**2 + (x[1]-1.)**2

print fmin(minf,[1,2]) 
```

[出去]：

```
Optimization terminated successfully.
         Current function value: 0.000000
         Iterations: 44
         Function evaluations: 82
[ -1.61979362e-05   9.99980073e-01] 
```

这里一个可能的问题是最小化例程需要一个列表作为参数。有关所有血腥细节，请参阅[文档](http://docs.scipy.org/doc/scipy/reference/optimize.html)。不确定是否可以直接最小化复值函数，您可能需要分别考虑实部和虚部。

# iphone - 将dataSource添加到tableView而不使用interfase并显示它

> ID：12200118
> 
> 赞同：0
> 
> 时间：2012-08-30T15:13:50.470
> 
> 标签：iphone, objective-c, uitableview

我有接口：

```
@interface Box : CDVPlugin <UITableViewDataSource, UITableViewDelegate, UISearchDisplayDelegate> 
```

现在，在一个事件之后，我想用不同类型的数据显示 tableView。我创建了一个 tableView 并添加它......它的工作

```
UITableView *tView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 150, 150)];
      [[self.webView superview] addSubview:tView]; 
```

我怎样才能连接它做一个数据源？

我尝试添加：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section { 
```

但它永远不会停在那里，桌子总是空的。如何将其连接到数据（NSMutableArray）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:17:01.150

你永远不会告诉表格 View 谁是数据源

你可以这样做：

```
UITableView *tView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 150, 150)];
tView.dataSource = self; // or something else
tView.delegate = self; // or something else
[[self.webView superview] addSubview:tView]; 
```

DataSource 用于创建单元格（cellForRowAtIndex:、numberOfRowsInSection: 等）Delegate 用于操作，例如 (didSelectRowAtIndexPath:)

# html - 背景元素上的 z-index 图像

> ID：12200122
> 
> 赞同：3
> 
> 时间：2012-08-30T15:13:52.007
> 
> 标签：html, css, z-index

回到基础，我有一个情况，我有一个图像需要出现在它正下方的元素的背景上。但是，我不希望图像超出该元素内容的顶部，只希望元素（和背景属性）本身：

[http://jsfiddle.net/chricholson/4twr5/1/](http://jsfiddle.net/chricholson/4twr5/1/)

HTML：

```
<img src="https://www.google.com/images/srpr/logo3w.png" />

<div>
    <a href="#">Hello World</a>
</div>
​ 
```

CSS：

```
img { position: absolute; z-index: 20; }

div { position: relative; top: 45px; z-index: 10; padding: 30px; background: red; }

a { position: relative; z-index: 30; padding: 10px; background: yellow; display: block; } 
```

预期的行为将是图像出现在 div 背景*[check]*的顶部，但随后出现在黄色链接后面，但事实并非如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T15:52:01.163

Found my "answer" (more confirming my doubts) here [Can't get z-index to work for div inside of another div](https://stackoverflow.com/questions/4456234/cant-get-z-index-to-work-for-div-inside-of-another-div). The key sentence being "Once you set position:relative on test_1 you are causing its z-index to be in a **different world** than the z-index of test_2."

It seems the reason I have a problem is because once I have set the image higher than the div, no matter what z-index value I set to the contents of the div it will always be covered. I didn't think z-indexes worked like this, I thought everything was "separate" and so long as a value was higher than a value elsewhere (regardless of parent containers) things would be fine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:20:11.983

```
img { position: absolute; z-index: 15; }

div { position: relative; top: 45px; z-index: 20; padding: 30px; background: red; }

a {z-index: 30; padding: 10px; background: yellow; display: block; }
​ 
```

你可以试试这段代码。顺便说一句，a 是 div 的孩子。你不需要输入 position: relative; 因为你是为 div 写的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:26:41.877

[http://jsfiddle.net/4twr5/21/](http://jsfiddle.net/4twr5/21/)看看这个 jsfiddle

根据评论更新[http://jsfiddle.net/4twr5/22/](http://jsfiddle.net/4twr5/22/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T15:27:35.867

将图像放入 div 中，如下所示：

```
<div>
    <img src="https://www.google.com/images/srpr/logo3w.png" />
    <a href="#">Hello World</a>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T15:38:04.403

# android - VideoView 内容调整大小

> ID：12200124
> 
> 赞同：0
> 
> 时间：2012-08-30T15:14:07.093
> 
> 标签：android, video, android-videoview

我有一个 VideoView，它设置为填充父级并且适用于全尺寸视频，我发现当视频大小为 4:3 或更小时它保持在我的视图左侧时很难找到解决方案，而 ios 显示中的相同应用程序是它全屏。我们可以调整视频的大小并以与 Video View 相同的大小显示它吗？或者 VideoView 的内容可以调整大小吗？我试过了

```
view.measure(View.MeasureSpec.EXACTLY, View.MeasureSpec.EXACTLY); 
```

但没有结果

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T15:28:34.150

制作一个像这样的自定义视频类：

```
public class CustomVideoView extends VideoView {

    protected int _overrideWidth = 480;

    protected int _overrideHeight = 360;

    public CustomVideoView(Context context) {
        super(context);
    }

    public CustomVideoView(Context context, AttributeSet set) {
        super(context, set);
    }

    public void resizeVideo(int width, int height) {
        _overrideHeight = height;
        _overrideWidth = width;
        // not sure whether it is useful or not but safe to do so
        getHolder().setFixedSize(width, height);
        //getHolder().setSizeFromLayout();
        requestLayout();
        invalidate(); // very important, so that onMeasure will be triggered

    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
    {
        setMeasuredDimension(_overrideWidth, _overrideHeight);
    }

} 
```

在您的类中使用`resizeVideo`以屏幕宽度和高度为参数的方法。

考虑到这一切都取决于电影比例和屏幕比例。如果它们相同，则视频将全屏显示，但当它们不同时，将调整视频的宽度/高度。

# php - 使用 curl 和 PHP 进行身份验证 - 神秘的安全性

> ID：12200128
> 
> 赞同：1
> 
> 时间：2012-08-30T15:14:25.663
> 
> 标签：php, security, curl, login

我正在尝试制作一个脚本，该脚本将在我每天访问的一些网站上运行，并从中获取最有趣的信息/统计数据。我想为此目的使用 curl，因为其中一些站点需要身份验证。一切都很好，直到我碰到了这个站点：rossnet.pl，它似乎以某种方式安全，因为我根本无法验证自己的身份。

我想使用的表格可以在这里找到： [https ://www.rossnet.pl/rossnetlogin.aspx](https://www.rossnet.pl/rossnetlogin.aspx)

在左侧，文字下方：“Mam konto w Rossnet.pl - Logowanie”。它似乎没有任何隐藏的输入字段，只有两个用于凭据的文本字段，称为：-“dnn$ctr1203$ViewLogin$txtUserLogin”-“dnn$ctr1203$ViewLogin$txtUserPass”

我正在使用下面显示的代码，但服务器返回的页面似乎完全没有发生任何事情（没有错误消息，看起来与我不发送任何 POST 数据时相同）。

有谁知道可能出了什么问题？在下面的代码中，我输入了实际的帐户凭据，以便您能够测试脚本，如果您想帮助我。

在这里你可以看到下面的脚本是如何在我的服务器上工作的：http: [//kremuwa.netii.net/rossman/skrypt.php](http://kremuwa.netii.net/rossman/skrypt.php)

```
<?php

$url = "https://www.rossnet.pl/rossnetlogin.aspx";   

$ch = curl_init();  

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie.txt');
curl_setopt($ch, CURLOPT_COOKIEFILE, 'cookie.txt');
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.13) Gecko/20101206 Ubuntu/10.10 (maverick) Firefox/3.6.13');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);        
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

curl_setopt($ch, CURLOPT_REFERER, $url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, 'dnn$ctr1203$ViewLogin$txtUserLogin=warzywko3000&dnn$ctr1203$ViewLogin$txtUserPass=password123');

$output = curl_exec($ch);  

curl_close($ch);  

echo $output;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:50:52.257

登录表单有时会受到挑战的保护，这些挑战会阻止您在不先加载页面的情况下直接提交表单。我列出了一些可能会妨碍您的选项。

一种选择是 cookie 挑战，它也是最容易处理的，只需加载页面（获取 cookie）并将其与表单提交一起发送。

另一种选择是隐藏领域挑战；隐藏的表单字段填充了质询代码，并且提交也希望发送该值。

我能想到的最后一个选项是涉及 JavaScript 的更困难的方法。该页面将使用 JavaScript 加载挑战字符串，可能会对其进行一些混淆，然后将其发送（通过隐藏的表单字段或 ajax 请求）。

# javascript - 执行 jQuery 后如何保留网站的状态？

> ID：12200130
> 
> 赞同：0
> 
> 时间：2012-08-30T15:14:35.673
> 
> 标签：javascript, jquery, panel, uislider, deep-linking

我有一个实现 jQuery 插件的网站，例如水平滑块和其他 java 脚本元素。单击网站右侧的链接后，页面将滑动包含链接的面板并下拉附加文本。它还将重定向到另一个页面。我希望用户能够完全按照在重定向之前看到的那样返回网站。

我研究了深度链接，但发现它不够；据我所见，它依赖于我想避免的 Ajax。如果它只能用 jQuery 来完成，那将是最佳的。这怎么可能实现？

作为参考，我正在使用[Spry 滑动面板](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CCsQFjAB&url=http://labs.adobe.com/technologies/spry/samples/slidingpanels/SlidingPanelsSample.html&ei=ZII_ULjOC4-vqAHow4HgDQ&usg=AFQjCNFdiweP13SK4_Gf2dtZrohIOG01xg&sig2=jIaTiG-7EVhuxAkBeEKEdg)滑动到新面板，以及 jQuery 的 slideDown() 并且在单击这两个操作之后，我想将当前页面的状态保存在浏览器的历史记录中。

# php - 使用 PHP 获取 Active Directory 组的用户列表

> ID：12200133
> 
> 赞同：1
> 
> 时间：2012-08-30T15:14:41.290
> 
> 标签：php, ldap

我创建了一个 PHP 脚本来查询 LDAP 服务器（运行 Microsoft Active Directory）并从特定 OU 中检索组列表。这一切正常。但是，我现在需要提取每个组的用户列表。从 AD 返回的属性，似乎不包括这个，我找不到将它们拉出来的方法。

我创建了一个解决方法，它将从特定 OU 中提取每个用户，并根据我正在查看的组检查它的组列表，但这非常低效，因为我通常会提取 100 多个组。

另一个担忧是，每个组都可能拥有来自 70 多个不同域的用户，这不可能每次都进行搜索。

所以，基本上，我需要能够直接从组中提取用户列表。有谁知道我可以用 PHP 实现这一目标的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:25:10.737

您需要绑定有效的用户名/密码才能看到“成员”属性。把我扔了一会儿，因为大多数其他东西似乎都可以在没有身份验证的情况下使用。

# java - 无法在泛型中实例化类型

> ID：12200136
> 
> 赞同：6
> 
> 时间：2012-08-30T15:14:45.947
> 
> 标签：java, generics, wildcard, bounded-wildcard

我有这门课

```
public class Tree<T> {

    //List of branches for this tree
    private List<Tree<? super T>> branch = new ArrayList<Tree<? super T>>();
    public Tree(T t){ this.t = t; }
    public void addBranch(Tree< ? super T> src){ branch.add(src); }
    public Tree<? extends T> getBranch(int branchNum){
        return (Tree<? extends T>) branch.get(branchNum);
    }

    private T t;

} 
```

我正在尝试使用这个从这个类中创建一个变量

```
public static void main(String[] args){ 
        Tree<? super Number> num2 = new Tree<? super Number>(2);
    } 
```

它给了我这个错误

```
Cannot instantiate the type Tree<? super Number> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T15:32:32.047

`?`创建新实例时不能使用通配符。您应该将代码更改为类似的内容

```
import java.util.ArrayList;
import java.util.List;

public class Test1 {
  public static void main(String[] args){
    Tree<? super Number> num2 = new Tree<Number>(2);
    num2.addBranch(new Tree<Number>(1));
    Tree<? super Number> num3 = (Tree<? super Number>) num2.getBranch(0);
    System.out.println(num3);
  }
}

class Tree<T> {

  //List of branches for this tree
  private List<Tree<? super T>> branch = new ArrayList<Tree<? super T>>();
  public Tree(T t){ this.t = t; }
  public void addBranch(Tree<Number> src){ branch.add((Tree<? super T>) src); }
  public Tree<? extends T> getBranch(int branchNum){
    return (Tree<? extends T>) branch.get(branchNum);
  }

  public String toString(){
    return String.valueOf(t);
  }

  private T t;

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T15:15:33.037

实例化泛型时应替换为相应的对象。

前任：

```
 Tree<Integer> num2 = new Tree<Integer>(2); 
```

# .net - 设置 DataGrid ScrollViewer.IsDeferredScrollingEnabled="True" 会产生 DataGridComboBoxColumn 滚动问题

> ID：12200146
> 
> 赞同：3
> 
> 时间：2012-08-30T15:15:16.630
> 
> 标签：.net, wpf, datagrid, scrollviewer, datagridcomboboxcolumn

我有一个使用具有数千行的 WPF DataGrid 的应用程序。我在使用 Vertical ScrollBar 滚动时遇到了性能问题，所以我做了一些研究，发现我可以推迟行的加载，直到通过`ScrollViewer.IsDeferredScrollingEnabled = "True"`在 DataGrid 中设置完成滚动。一切正常，直到一些用户注意到滚动`DataGridComboBoxColumn`DataGrid 内的选项列表现在滚动整个`DataGrid`而不是`ComboBox`. 仅当您在 ComboBox 滚动条上拖动鼠标时才会发生这种情况，而使用鼠标滚轮滚动时不会发生这种情况。

我使用 .net 4.0 在 vb 中整理了一个示例类，它将说明当使用鼠标拖动滚动 Column 中的 ComboBox 时出现的问题。

### XAML

```
<Window x:Class="MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" Height="279" Width="496">
<Grid>
    <DataGrid AutoGenerateColumns="False" Height="209" HorizontalAlignment="Left" Margin="12,12,0,0" Name="DataGrid1" VerticalAlignment="Top" Width="448" ItemsSource="{Binding}" ScrollViewer.IsDeferredScrollingEnabled="True">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Path=Name}" Header="Name" />
            <DataGridComboBoxColumn Header="Drag Scroll through Items in a cell below" x:Name="IssueComboBoxColumn" />
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

### 代码

```
Class MainWindow 

Public Sub New()

    ' This call is required by the designer.
    InitializeComponent()

    ' Add any initialization after the InitializeComponent() call.
    Dim sourceList As New List(Of itemExample)
    For i As Integer = 0 To 50
        sourceList.Add(New itemExample("Item" & i.ToString, 4))
    Next

    Dim comboList As New List(Of String)
    For i As Integer = 0 To 50
        comboList.Add("Drop Item " & i.ToString)
    Next

    DataGrid1.DataContext = sourceList
    IssueComboBoxColumn.ItemsSource = comboList
    IssueComboBoxColumn.SelectedValuePath = "ComboItem"
End Sub

Private Class itemExample
    Property Name As String
    Property ComboItem As Integer

    Public Sub New(name As String, comboItem As Integer)
        Me.Name = name
        Me.ComboItem = comboItem
    End Sub
End Class
End Class 
```

# c# - 字段连接 RDLC-Tablix

> ID：12200147
> 
> 赞同：0
> 
> 时间：2012-08-30T15:15:20.977
> 
> 标签：c#, vb.net, visual-studio-2010, rdlc

我有一个 rdlc 报告。我希望在 Tablix 的 1 列中一起显示 2 个字段。当有值时，下面的表达式效果很好。但是当没有值时它也会显示#Error..那么如何避免这个#Error消息..

注意：我希望只避免#Error 消息并且我不想隐藏。

谢谢

```
=Fields!item_disc_perc.Value.ToString & vbcrlf & Fields!itm_dsc_val.Value.ToString 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:20:46.960

如果您说“没有价值”，Value 属性的计算结果是“Nothing”（在 VB 中）还是 null（C#）？如果是这样，您将收到 NullReferenceException。如果它在 C# 中，我建议使用 ?: 运算符。例如，替换：

```
=Fields!item_disc_perc.Value.ToString() 
```

和

```
=Fields!item_disc_perc.Value != null ? Fields!item_disc_perc.Value.ToString() : "(null)" 
```

# multithreading - 您可以在 HP Unix 的单个进程中创建多少个线程？

> ID：12200155
> 
> 赞同：0
> 
> 时间：2012-08-30T15:15:46.400
> 
> 标签：multithreading, unix, pthreads, file-descriptor

我在 HP Unix Itanium 服务器 (HP-UX 11.3) 中开发了一个应用程序。我试图通过创建并发线程来访问我的应用程序。我不能同时创建多个线程。我只能创建 1024 个线程；过了一段时间，我得到了一个核心转储：`segmentation fault`.

在 HP-UX 中可以创建的线程数是否有任何限制？

# continuous-integration - 适用于不同类型从站的 Jenkins 插件

> ID：12200161
> 
> 赞同：0
> 
> 时间：2012-08-30T15:15:55.943
> 
> 标签：continuous-integration, jenkins, jenkins-plugins

我们有一些测试需要在多种类型的特定硬件上运行。这些测试可能会在某些硬件上通过但在其他硬件上失败，我们想知道它们在哪里工作以及在哪里失败。

因此，对于某些测试，我们希望提供需要对其进行测试的硬件列表。我们希望将所有需要的硬件放在 Jenkins 可以访问的池中，然后让 Jenkins 在正确的硬件上运行正确的测试，具体取决于测试附带的硬件列表。当然，我们想跟踪哪个测试在哪里起作用。

Jenkins 有没有一个插件可以处理这种事情？有没有其他人解决过这类问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:37:32.180

如果您将标签值分配给从属设备以指示硬件类型，然后将作业限制为仅在使用这些标签的从属设备上运行，您应该会获得所需的结果。

# php - 登录代码无法正常工作

> ID：12200166
> 
> 赞同：-1
> 
> 时间：2012-08-30T15:16:09.557
> 
> 标签：php, mysql, html

我已经为我的应用程序使用了登录名..首先我只使用了管理员登录名并且它工作得很好，但是现在当我也添加了教师和学生登录名时，但我发现一个问题，它没有登录我的旅馆。，，但只是重定向到未经授权的访问请求帮助

登录.php

```
<?php include("../includes/config.php");?>

<!DOCTYPE HTML>
<html>
<head>
<title>Admdin Login</title>
</head>
<body>
    <form method="post" action="login-action.php">
    <label>User Name:</label> <input type="text" name="un" />
    <label>Password:</label> <input type="password" name="pd" />  <br /><br />
    <input type="submit" value="Login" />
</form>

<a href="forgot-password.php">Forgot Password?</a>
</body>
</html> 
```

这是登录-action.php

```
<?php include("../includes/config.php");?>
<?php

$uid=$_POST["un"];
$pwd=$_POST["pd"];
$encpwd=md5($pwd);
$con=mysql_connect($dbserver,$dbusername,$dbpassword);
if (!$con) { die('Could not connect: ' . mysql_error()); }

mysql_select_db($dbname, $con);

$result = mysql_query("SELECT * FROM accounts WHERE (email='".$uid."' AND   password='".$encpwd."')");

$num_rows = mysql_num_rows($result);
if ($num_rows > 0) {

while($row = mysql_fetch_array($result))
{
   $_SESSION['firstname'] = $row['firstname'];
   $_SESSION['lastname'] = $row['lastname'];
   $_SESSION['type'] = $row['type'];
   $_SESSION['id'] = $row['id'];
   $_SESSION['email'] = $row['email'];

   $_SESSION["loggedin"]=true;
}
}
else {
 $_SESSION["loggedin"]=false;
}

mysql_close($con);

if ($_SESSION["loggedin"])
{
if ($_SESSION["type"]=="A")
    {
        $_SESSION["isadmin"]=true;
    }

if ($_SESSION["type"]=="T")
    {
        $_SESSION["isteacher"]=true;
    }
if ($_SESSION["type"]=="S")
     {
         $_SESSION["isstudent"]=true;
     }

 }
if ($_SESSION["isadmin"])
{
header("Location: $fullpath"."admin/000.php");
}

if ($_SESSION["isteacher"])
{
header("Location:$fullpath"."teacher/");
}

if ($_SESSION["isstudent"])
{
header("Location:$fullpath"."student/");
}

else {
   header("Location: $fullpath"."login/unauthorized.php");
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:21:52.113

```
 if ($_SESSION["isadmin"])
    {
        header("Location: $fullpath"."admin/000.php");
    }

    elseif ($_SESSION["isteacher"])
    {
        header("Location:$fullpath"."teacher/");
    }

    elseif ($_SESSION["isstudent"])
    {
        header("Location:$fullpath"."student/");
    }

    else {
        header("Location: $fullpath"."login/unauthorized.php");
    } 
```

# c# - 如何在鼠标单击时找出拆分容器中的哪个面板？

> ID：12200167
> 
> 赞同：2
> 
> 时间：2012-08-30T15:16:10.663
> 
> 标签：c#, winforms, layout

我在我的应用程序中使用拆分容器。一个父拆分容器。父拆分容器的 panel2 中有 3 个拆分容器。

现在，当我单击嵌入在父容器的 panel2 中的拆分容器面板之一时，如何找到单击了哪个容器的哪个面板？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:03:22.360

您可以尝试订阅所有面板以使用相同的点击事件。发件人将是 SplitterPanel 类，它将有一个 Parent 属性（从 IDE 隐藏但它在那里），它将是 SplitContainer：

```
public Form1() {
  InitializeComponent();

  splitContainer1.Panel1.MouseClick += Panel_MouseClick;
  splitContainer1.Panel2.MouseClick += Panel_MouseClick;
  splitContainer2.Panel1.MouseClick += Panel_MouseClick;
  splitContainer2.Panel2.MouseClick += Panel_MouseClick;
  splitContainer3.Panel1.MouseClick += Panel_MouseClick;
  splitContainer3.Panel2.MouseClick += Panel_MouseClick;
  splitContainer4.Panel1.MouseClick += Panel_MouseClick;
  splitContainer4.Panel2.MouseClick += Panel_MouseClick;
}

void Panel_MouseClick(object sender, MouseEventArgs e) {
  SplitterPanel sp = sender as SplitterPanel;
  SplitContainer sc = sp.Parent as SplitContainer;
  MessageBox.Show(sc.Name + " - " + sp.Tag.ToString());
} 
```

出于演示目的，我在每个面板的 tag 属性中输入了 1 或 2，因为 SplitContainer 中使用的子面板不使用 Name 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:55:53.033

事件处理程序的`sender`属性是单击的面板。

```
private void button1_Click(object sender, System.EventArgs e){
    //sender is the panel which has just been clicked, cast it.
} 
```

# android - 又一个 ffmpeg/libx264 问题

> ID：12200172
> 
> 赞同：1
> 
> 时间：2012-08-30T15:16:28.800
> 
> 标签：android, ubuntu, ffmpeg, shared-libraries, libx264

我现在的情况是；ffmpeg 和 libx264 已为 Android 编译，分别作为共享库和静态库。由于我有 libx264.a 和 libffmpeg.so，剩下的就是链接它们并获得一个 ffmpeg 库，让我可以继续我的应用程序。然而，一些问题仍未得到解答。我在 Windows 7 下使用带有虚拟机的 Ubuntu。我使用的是 x264 的最新版本，ffmpeg 0.10.4 版本和 NDK 7。

我试图调整标志（extracf 和 extrald），以便将 libx264 也包含到 ffmpeg 编译过程中，但是我一直失败。您可以在下面找到我的 ffmpeg 构建脚本以及我遇到的错误。

```
NDK=~/Android_NDK_r7b 
PLATFORM=$NDK/platforms/android-8/arch-arm/ 
PREBUILT=$NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86 
x264=/usr/local 
#x264v2=~/x264 
function build_one 
{ 
./configure --target-os=linux \ 
    --prefix=$PREFIX \ 
    --enable-cross-compile \ 
    --extra-libs="-lgcc" \ 
    --arch=arm \ 
    --cc=$PREBUILT/bin/arm-linux-androideabi-gcc \ 
    --cross-prefix=$PREBUILT/bin/arm-linux-androideabi- \ 
    --nm=$PREBUILT/bin/arm-linux-androideabi-nm \ 
    --sysroot=$PLATFORM \ 
   # --extra-cflags=" -O3 -fpic -DANDROID -DHAVE_SYS_UIO_H=1 -Dipv6mr_interface=ipv6mr_ifindex -fasm -Wno-psabi -fno-short-enums -fno-strict-aliasing -finline-limit=300 $OPTIMIZE_CFLAGS " \ 
    --extra-cflags="-I$x264/include" \ 
    --enable-shared \ 
    --enable-static \ 
    #--extra-ldflags="-Wl,-rpath-link=$PLATFORM/usr/lib  -L$PLATFORM/usr/lib -nostdlib -lc -lm -ldl -llog" \ 
    --extra-ldflags="-L$x264/lib" \ 
   --disable-everything \ 
   # --enable-demuxer=mov \ 
   # --enable-demuxer=h264 \ 
   # --disable-ffplay \ 
    --enable-gpl \ 
    --enable-libx264 \ 
   # --enable-protocol=file \ 
   # --enable-avformat \ 
   # --enable-avcodec \ 
   # --enable-encoder=libx264 \ 
   # --enable-decoder=rawvideo \ 
   #--enable-decoder=mjpeg \ 
   # --enable-decoder=h263 \ 
   # --enable-decoder=mpeg4 \ 
   # --enable-encoder=h264 \ 
   # --disable-network \ 
    #--enable-zlib \ 
   # --disable-avfilter \ 
    #--disable-avdevice \ 
    $ADDITIONAL_CONFIGURE_FLAG 

make clean 
make  -j4 install 
$PREBUILT/bin/arm-linux-androideabi-ar d libavcodec/libavcodec.a inverse.o 
$PREBUILT/bin/arm-linux-androideabi-ld -rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib  -soname libffmpeg.so -shared -nostdlib  -z,noexecstack -Bsymbolic --whole-archive --no-undefined -o $PREFIX/libffmpeg.so libavcodec/libavcodec.a libavformat/libavformat.a libavutil/libavutil.a libswscale/libswscale.a -lc -lm -lz -ldl -llog  --warn-once  --dynamic-linker=/system/bin/linker $PREBUILT/lib/gcc/arm-linux-androideabi/4.4.3/libgcc.a 
} 

#arm v7vfpv3 
CPU=armv7-a 
OPTIMIZE_CFLAGS="-mfloat-abi=softfp -mfpu=vfpv3-d16 -marm -march=$CPU " 
PREFIX=./androidIncludeTrialsNDK7/$CPU 
ADDITIONAL_CONFIGURE_FLAG= 
build_one 
```

如果我基本上删除行 extracf 和 extrald 标志并使用其他标志（注释掉），它工作正常，除了 libx264 not found 错误。否则，我会收到以下错误。

```
./buildnew.sh: line 35: --extra-cflags=-I/usr/local/include: No such file or directory 
./buildnew.sh: line 38: --extra-ldflags=-L/usr/local/lib: No such file or directory 
./buildnew.sh: line 40: --disable-everything: command not found 
./buildnew.sh: line 44: --enable-gpl: command not found 
```

编译过程如下结束。

```
make: *** [libavdevice/v4l.o] Error 1 
make: *** Waiting for unfinished jobs.... 
/home/mehmet/Android_NDK_r7b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-ar: creating libavcodec/libavcodec.a 
/home/mehmet/Android_NDK_r7b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-ld: cannot open output file ./androidIncludeTrialsNDK7/armv7-a/libffmpeg.so: No such file or directory 
```

我在我的目录 /home/mehmet/x264 中安装了 x264，我还检查了 whereis x264.a，它显示为 /usr/local/lib。我尝试更改路径 $x264 以指向 home/mehmet/x264 文件夹，但我得到了同样的错误。

最后，如果我同时启用了 extracf 和 extrald 标志（注释的和使用的）。我得到了上面提到的同样的错误。恐怕我在这里做了一个简单的错字，但看不到它，这让我发疯。非常感谢你的帮助。

最好的。

**编辑**

我已删除评论，现在获得以下内容。

```
./buildnew.sh: 4: ./buildnew.sh: function: not found
ERROR: libx264 not found 
```

当我运行脚本时，从终端观察到上述错误。它建立到某个点并完成该过程并出现以下错误。

```
libavcodec/libavcodec.a(libx264.o): In function `X264_frame':
/home/mehmet/ffmpeg-0.10.4/libavcodec/libx264.c:159: undefined reference to `x264_picture_init'
/home/mehmet/ffmpeg-0.10.4/libavcodec/libx264.c:179: undefined reference to `x264_encoder_reconfig'
/home/mehmet/ffmpeg-0.10.4/libavcodec/libx264.c:191: undefined reference to `x264_encoder_encode'
/home/mehmet/ffmpeg-0.10.4/libavcodec/libx264.c:197: undefined reference to `x264_encoder_delayed_frames'
libavcodec/libavcodec.a(libx264.o): In function `encode_nals':
/home/mehmet/ffmpeg-0.10.4/libavcodec/libx264.c:196: undefined reference to `x264_bit_depth'
libavcodec/libavcodec.a(libx264.o): In function `X264_close':
/home/mehmet/ffmpeg-0.10.4/libavcodec/libx264.c:231: undefined reference to `x264_encoder_close'
libavcodec/libavcodec.a(libx264.o): In function `X264_init':
/home/mehmet/ffmpeg-0.10.4/libavcodec/libx264.c:284: undefined reference to `x264_param_default'
/home/mehmet/ffmpeg-0.10.4/libavcodec/libx264.c:292: undefined reference to `x264_param_default_preset'
/home/mehmet/ffmpeg-0.10.4/libavcodec/libx264.c:305: undefined reference to `x264_param_parse'
/home/mehmet/ffmpeg-0.10.4/libavcodec/libx264.c:502: undefined reference to `x264_param_apply_fastfirstpass'
/home/mehmet/ffmpeg-0.10.4/libavcodec/libx264.c:505: undefined reference to `x264_param_apply_profile'
/home/mehmet/ffmpeg-0.10.4/libavcodec/libx264.c:544: undefined reference to `x264_encoder_open_125'
/home/mehmet/ffmpeg-0.10.4/libavcodec/libx264.c:554: undefined reference to `x264_encoder_headers'
./buildnew.sh: 51: ./buildnew.sh: build_one: not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:08:40.737

您的错误与 ffmpeg/libx264 无关。你不能把这些评论放在中间。看看错误

./buildnew.sh：第 35 行：--extra-cflags=-I/usr/local/include：没有这样的文件或目录

它认为 --extra-cflags 是一个命令，依此类推，用于注释后的第一行。

您的命令应该是连续的并且没有任何注释。“\”运算符不适用于注释。

# android - Android 使用 proguard 保护应用程序

> ID：12200173
> 
> 赞同：0
> 
> 时间：2012-08-30T15:16:29.727
> 
> 标签：android, proguard

我已经创建了我的应用程序并按照[此处](https://stackoverflow.com/questions/4732656/enabling-proguard-in-eclipse-for-android)的建议完成了此操作：

在 proguard-project.txt 中：

```
# to define the proguard.config property as described in that file.
#
# Add project specific ProGuard rules here.
# By default, the flags in this file are appended to flags specified
# in ${sdk.dir}/tools/proguard/proguard-android.txt
# You can edit the include path and order by changing the ProGuard
# include property in project.properties.
#
# For more details, see
#   http://developer.android.com/guide/developing/tools/proguard.html

# Add any project specific keep options here:

# If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#}

-optimizationpasses 10
-dontwarn android.support.**
-verbose

-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-keep public class ClassOne extends Activity
-keep public class ClassTwo extends ListActivity
-keep public class ClassThree extends ListActivity
-keep public class ClassFour extends ListActivity
-keep public class ClassFive extends ListActivity
-keep public class ClassSix extends ListActivity
-keep public class ClassSeven extends Activity 
```

这些是我的课`manifest`

在 project.properties 中取消注释该行：

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

我已经导出了我的应用程序并打开了使用过的 dex2jar 和 jd-gui 以查看是否添加成功。

问题是代码几乎和我写的一样，而且很容易理解。

难道我做错了什么？我可以改善混淆吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:30:08.420

您应该按字面意思复制“保留”，如

```
-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class com.android.vending.licensing.ILicensingService
-keep public class * extends android.support.v4.app.Fragment
-keep public class * extends android.app.Fragment 
```

而不是替换您自己的实际活动名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:01:57.857

行。

我已经删除了这些行：

```
-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class com.android.vending.licensing.ILicensingService
-keep public class * extends android.support.v4.app.Fragment
-keep public class * extends android.app.Fragment 
```

现在正如我所料

由于互联网上的所有示例都有这些行，我认为它们很重要。

测试我的应用程序，它按预期工作

# sql - CSV 文件的 SQL 批量插入的 BCP 文件格式

> ID：12200174
> 
> 赞同：1
> 
> 时间：2012-08-30T15:16:29.430
> 
> 标签：sql, csv, insert, bcp, bulk

我正在尝试使用 BCP 将 csv 文件批量插入到 SQL 表中，但无法修复此错误：“第 1 行第 2 列的数据文件中的列太长。验证字段终止符和行终止符指定正确。” - 有人可以帮忙吗？

这是我的 SQL 代码：

```
BULK INSERT UKPostCodeStaging
FROM 'C:\Users\user\Desktop\Data\TestFileOf2Records.csv'
WITH (
DATAFILETYPE='char',
FIRSTROW = 1,
FORMATFILE = 'C:\Users\User\UKPostCodeStaging.fmt'); 
```

这是我在 TestFileOf2Records.csv 中包含的测试数据：

> "HS1 2AA",10,14,93,"S923","","S814","","S1213","S132605"
> "HS1 2AD",10,14,93,"S923","", "S814","","S1213","S132605"

这是我尝试适当编辑的 BCP 文件：

```
10.0
11
1   SQLCHAR  0  0  "\""      0  FIRST_QUOTE                 SQL_Latin1_General_CP1_CI_AS
2   SQLCHAR  8  0  "\","     1  PostCode                    SQL_Latin1_General_CP1_CI_AS
3   SQLINT   1  0  ","       2  PositionalQualityIndicator  ""
4   SQLINT   1  0  ","       3  MetresEastOfOrigin          ""
5   SQLINT   1  0  ",\""     4  MetresNorthOfOrigin         ""
6   SQLCHAR  8  0  "\",\""   5  CountryCode                 SQL_Latin1_General_CP1_CI_AS
7   SQLCHAR  8  0  "\",\""   6  NHSRegionalHACode           SQL_Latin1_General_CP1_CI_AS
8   SQLCHAR  8  0  "\",\""   7  NHSHACode                   SQL_Latin1_General_CP1_CI_AS
9   SQLCHAR  8  0  "\",\""   8  AdminCountyCode             SQL_Latin1_General_CP1_CI_AS
10  SQLCHAR  8  0  "\",\""   9  AdminDistrictCode           SQL_Latin1_General_CP1_CI_AS
11  SQLCHAR  8  0  "\"\r\n"  10 AdminWardCode               SQL_Latin1_General_CP1_CI_AS 
```

有什么想法我哪里出错了吗？谢谢

# c# - 如何使用c#在参数中传递转换表达式？

> ID：12200175
> 
> 赞同：1
> 
> 时间：2012-08-30T15:16:35.117
> 
> 标签：c#, tsql

我使用字符串生成器在 c# 代码中创建了一个临时插入语句。

```
var str = new StringBuilder(string.Empty);
str.Append(" INSERT INTO Table_01 ( ID,");
        str.Append("Comment,");
        str.Append("DateTimeStamp,");
str.Append(" ) VALUES( ");
        str.Append("'" + Guid.NewGuid() + "',");
        str.Append("'" + CaseComment + "',");
        str.Append("CONVERT(DATETIME, '" + DateTime.Now.Year + "/" + DateTime.Now.Month + "/" + DateTime.Now.Day + "',120)"); 
```

我已将此代码转换为 SqlParameter:-

```
var str = INSERT INTO Table_01(ID,Comment,DateTimeStamp)     
VALUES(@ID,@Comment,@DateTimeStamp)
using (var cmd = new SqlCommand(str, con))
{
cmd.Parameters.Add(new SqlParameter("@ID", Guid.NewGuid()));
cmd.Parameters.Add(new SqlParameter("@Comment", CaseComment));
cmd.Parameters.Add(new SqlParameter("@DateTimeStamp", ?????));
cmd.ExecuteNonQuery();
} 
```

在传递 DateTime 之前，我必须确保格式等于 TSQL 中的“ **convert(varchar, getdate(), 120) -- 2016-10-23 06:10:55(24h)** ”。我将如何使用 TSQL 转换表达式传递 @datetime 参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:59:08.297

假设数据库列实际上是 a`DateTime`而不是`varchar`，如果使用参数，则不需要在插入时进行转换。数据库不会将日期保存为字符串，而是保存为偏移量，而在使用内联 SQL 时必须转换它的唯一原因是因为您必须确保数据库将字符串识别为 a`DateTime`以便它可以在内部正确地将其转换回来。使用参数可以避免这种情况。

（换句话说，只需 insert `DateTime.Now`，不要将其撕成字符串）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:22:40.367

为什么不对[DateTime 使用字符串格式](http://www.csharp-examples.net/string-format-datetime/)？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T16:08:44.103

老实说，每当我需要将当前日期/时间戳插入表时，我喜欢使用服务器日期而不是客户端日期。如果应用程序与 SQL Server 运行在同一个机器上，那没关系，但如果应用程序运行在不同的机器上，那么最好在同一个时区有一致的日期。因此，我将完全删除 datetime 参数并使用 SQL 日期函数 GetDate()，如下所示：

```
var str = INSERT INTO Table_01(ID,Comment,DateTimeStamp)     
VALUES(@ID,@Comment,GetDate())
using (var cmd = new SqlCommand(str, con))
{
cmd.Parameters.Add(new SqlParameter("@ID", Guid.NewGuid()));
cmd.Parameters.Add(new SqlParameter("@Comment", CaseComment));
cmd.ExecuteNonQuery();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T15:20:25.617

你可以使用`Convert`类。试试这样的，

```
cmd.Parameters.Add(new SqlParameter("@DateTimeStamp", Convert.ToDateTime(DateTime.Now))); 
```

或者

```
cmdItemSearch.Parameters.Add(new SqlParameter("@EndDate", SqlDbType.DateTime)); 
cmdItemSearch.Parameters["@EndDate"].Value = DateTime.Now; 
```

# c# - .Net 允许绑定包含字符串的类

> ID：12200177
> 
> 赞同：0
> 
> 时间：2012-08-30T15:16:44.233
> 
> 标签：c#, .net, winforms, gridview, binding

我有一个包含一个字符串的类，该字符串用于存储多个值（考虑 xml 描述）和 [] 的覆盖以将值放入字符串并获取它。

```
 class Entity
{
    private String _Data;
    public String Data
    {
        get { return (String)_Data; }
        set { _Data=value;}
    }

    public Object this[String propertyname]
    {
        get
        {
            return GetPropertyValue(propertyname);
        }
        set
        {
            SetPropertyValue(propertyname,Value);       
        }
    }

    private String GetPropertyValue(String propname)
    {
        if (Data == null) return "";
        String fbalise = "<" + propname + ">";
        int indexstart = Data.IndexOf(fbalise);
        if (indexstart == -1)
            //throw new Exception("Cannot Get Value because balise for " + propname + " does not exist");
            return null;
        indexstart += fbalise.Length;
        String ebalise = "</" + propname + ">";
        int caraclength = Data.IndexOf(ebalise, indexstart) - indexstart;
        return Data.Substring(indexstart, caraclength);
    }

   private void SetPropertyValue(String propname, String valuetoinsert)
    {
        if (Data == null) Data = "";
        String fbalise = "<" + propname + ">";
        String ebalise = "</" + propname + ">";
        int indexstart = Data.IndexOf(fbalise);
        if (indexstart == -1)
        {
            indexstart = Data.Length;
            Data = Data + fbalise + ebalise;
        }

        indexstart += fbalise.Length;

        int caraclength = Data.IndexOf(ebalise, indexstart) - indexstart;
        String lastvalue = Data.Substring(indexstart, caraclength);
        if (lastvalue != valuetoinsert)
        {
            Data = Data.Remove(indexstart, caraclength);
            Data = Data.Insert(indexstart, valuetoinsert);
        }
    }
} 
```

现在我有一个`List<Entity>`我想通过设置gridview的数据源绑定到gridview。

绑定后，它只将数据显示为包含我所有文本的列。（这很正常，我可以，这是正常规则）但是是否可以指定我的绑定，而不是研究属性，使用 [] 来获取数据并将其绑定到适当的列（例如，如果我有列“名称”，调用 entity[“Name”] 而不是 entity.Name，它不存在.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:22:33.580

您本质上是在谈论列表列表。我所做的是嵌套数据绑定控件。第一个控件绑定到您的`List<Entity>`then in on`OnItemDataBound`事件拉出数据项，然后将其绑定到您的内部控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:21:14.090

为什么不能添加`Name`属性？您可以使用现有的索引器作为支持字段：

```
public string Name
{
  get
  {
    return this["Name"];
  }
  set
  {
    this["Name"] = value;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:21:15.947

您可以通过实现使您的 Entity 类看起来像键值字符串对的集合`IDictionary<string, string>`

（这整个方法有点可疑，但我认为你有充分的理由，所以我不会进行讨论。）

# php - 使用 htaccess 和 PHP 重写 URL

> ID：12200178
> 
> 赞同：-2
> 
> 时间：2012-08-30T15:16:46.467
> 
> 标签：php, regex, .htaccess

我有一个 URL：search/?word=asdf 并想重定向到：search/word/asdf/ 并在内部运行：?cmd=search&word=asdf

这样就可以得到 PHP 的 $_GET['cmd'] 和 $_GET['word']。

如何在htaccess中做到这一点？

**编辑：**

我现在的 .htaccess 是：

```
RewriteRule search(.*) %{HTTP_REFERER}cmd/search$1
RewriteRule cmd/search/?key-word=(.*) %{HTTP_REFERER}cmd/search/key-word/$1 
```

但这不起作用。新的 URL 是：localhost/bruc/sandbox/electrolux/trunk/cmd/search/?key-word=asdf

但它应该是：localhost/bruc/sandbox/electrolux/trunk/cmd/search/key-word/asdf

所以，我将这个正确的 URL 重定向到：localhost/bruc/sandbox/electrolux/trunk/?cmd=search&key-word=asdf

但不能正常工作！试试，我的方法在这里：[http ://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:28:24.797

试试`RewriteRule ^([^/]*)/word/([^/]*)$ /?cmd=$1&word=$2 [L]`。我相信这将实现您的目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:28:55.087

试试这个 ：

```
RewriteEngine on
RewriteRule ^search/word/(.*)$ /?cmd=search&word=$1 [L] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T15:34:34.273

检查这个。

```
RewriteEngine on
RewriteRule ^([^/]+)/([^/]+)/([^/]+) /?cmd=$1&word=$2 [L] 
```

这包括三个部分：

1.  RewriteRule 指定这是用于重写的规则（与条件或其他指令相反）。命令是将第 2 部分重写为第 3 部分。
2.  这部分是一个正则表达式，只有当 URL 匹配这个正则表达式时，规则才会运行。在这种情况下，它说 - 查找字符串的开头，然后是一堆非斜线字符，然后是一个斜线，然后是另一束非斜线字符。然后又是一堆非斜线字符，然后是一个斜线，然后是另一束非斜线字符。括号表示括号内的部分将被存储以供将来参考。
3.  最后，这部分说以这种格式重写给定的 URL。$1 和 $2 是指捕获和存储的部分。

# templates - 具有模板方法的非模板类的静态成员

> ID：12200182
> 
> 赞同：0
> 
> 时间：2012-08-30T15:16:51.973
> 
> 标签：templates, static-members

我有以下类结构：

```
class A {
  template<typename T> static void f(const T& input) {
     //do something with X and input
  }
  static ostringstream x;
} 
```

然后我主要做：

```
...
int n = 5;
A::f(n);
... 
```

这编译得很好，但我得到一个链接错误，A::x 是一个找不到的符号。有没有人遇到过这个错误？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:36:58.390

是的，你还没有定义`x`：

```
// A.cpp
std::ostringstream A::x; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:25:14.030

改为使用`A::f<int>(n);` 。

# xslt - 如何从现有的pdf中获取xsl？

> ID：12200183
> 
> 赞同：1
> 
> 时间：2012-08-30T15:16:51.697
> 
> 标签：xslt, pdf, xsl-fo, apache-fop

是否可以从现有的 .pdf 文件中获取 .xsl 文件？

我知道使用 Apache FOP，您可以从 .xml 和 .xsl 获取 .pdf 文件，但我想朝另一个方向发展。任何想法？

```
XML+XSL->PDF with Apache FOP, but is it somehow possible PDF->XSL????? 
```

我想这样做的原因是因为我想打开一个包含表单的 PDF，对其进行编辑，向表单添加一些信息，然后将其再次保存为 PDF。

我已经将编辑后的表单设置为 .xml 并且我正在尝试生成 PDF，但是我需要一个 .xsl 文件用于布局......所以我想也许我可以重用原始 PDF 中的布局，因为他们会是相同的。还有其他更好的方法吗？？我想避免为每个表单创建一个特定的 XSL 文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:32:20.330

绝对不是 XSLT 文件，因为这甚至不是 FOP 的一部分。FOP 仅适用于 FO 文档，它允许您使用 XML+XSLT 获取 FO 源的事实只是一个很好的可用性功能。但是，一旦它获得了 FO 文件，它就不知道它是如何获得的，因此它不能以任何方式嵌入 XSLT 文件。

您可以使用其他工具（例如 PDFBox）对 PDF 文件进行后处理，以嵌入您想要的任何元数据。

# wordpress - 如何轻松将 Evernote Notebook 转换为 Wordpress 类别

> ID：12200184
> 
> 赞同：0
> 
> 时间：2012-08-30T15:16:54.040
> 
> 标签：wordpress, evernote

我有一堆 Evernote 条目，按笔记本分组。想要将其转换为保留格式的 WP 帖子。Internet 中描述的大多数方法都涉及单个帖子。Everpress 插件不保留格式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:30:33.513

看起来，我明白了。将 Evernote Notebook 导出为 html -> wordpress.org/extend/plugins/import-html-pages/

# php - symfony 推进：错误填充的对象与标准 addJoin

> ID：12200188
> 
> 赞同：0
> 
> 时间：2012-08-30T15:17:14.227
> 
> 标签：php, symfony-1.4, criteria, propel

这是我在这里的第一个问题，所以请耐心等待我:)

我偶然发现了填充对象的奇怪行为。

我开始将`objectQuery::create()-> ... ->find()`项目中使用的方法转换为，`$c = new Criteria(), $c-> ... objectPeer::doSelect($c)`因为有人告诉我，当条件可以使用时，不应该使用查询。

我有一个函数，它返回商店中所有商品的价格。或者至少做到了。我无法弄清楚的是：

旧代码：

```
static public function shopGetPrices($id){

    $prices = itemPriceQuery::create()->
        addJoin(itemPricePeer::ITEM_ID, itemPeer::ID, Criteria::LEFT_JOIN)->
        addJoin(itemPeer::CATEGORY_ID, categoryPeer::ID, Criteria::LEFT_JOIN)->
        addJoin(categoryPeer::SHOP_ID, shopPeer::ID, Criteria::LEFT_JOIN)->
        add(shopPeer::ID, $id)->find();

    return $prices;
} 
```

返回正确填充的`PropelObjectCollection`对象，通过它我可以使用 foreach，并获取/设置我需要的 itemPrice 对象和属性。

现在，新代码：

```
static public function shopGetPrices($id){

    $c = new Criteria();
    $c->addJoin(itemPricePeer::ITEM_ID, itemPeer::ID, Criteria::LEFT_JOIN)->
        addJoin(itemPeer::CATEGORY_ID, categoryPeer::ID, Criteria::LEFT_JOIN)->
        addJoin(categoryPeer::SHOP_ID, shopPeer::ID, Criteria::LEFT_JOIN)->
        add(shopPeer::ID, $id);

    return self::DoSelect($c);
} 
```

返回一个对象数组`itemPrice`，但它们通过连接填充了与 itemPrice 对象相关的项目值。这意味着：当我称之为`print_r(self::DoSelect($c));`打印时

```
 Array
 (
  [0] => ItemPrice Object
    (
        [startCopy:protected] => 
        [id:protected] => 47 <- id of joined item
        [item_id:protected] => 9 <-foreign key to category object of joined item
        [price:protected] => 0 
        [unit:protected] => Axe <- name of item, not unit (unit is like 'golden', 'iron', 'wood' or whatever )
        [active:protected] => 
        [collItemsOrder:protected] => 
        [collItemsOrderPartial:protected] => 
        [alreadyInSave:protected] => 
        [alreadyInValidation:protected] => 
        [polozkyObjednavkasScheduledForDeletion:protected] => 
        [prisadyPolozkyObjednavkasScheduledForDeletion:protected] => 
        [validationFailures:protected] => Array()
        [_new:protected] => 
        [_deleted:protected] => 
        [modifiedColumns:protected] => Array()
        [virtualColumns:protected] => Array()

    )

[1] => ItemPrice Object
    ( 
```

...等等。

标准和查询对象之间可能存在一些我遗漏的关键区别。我在 Google、StackOverflow 上进行了搜索，谁知道在哪里，但我没有找到任何类似的解决方案。

这个[家伙/女孩](http://oldforum.symfony-project.org/index.php/m/77192/)有一个模糊的相似问题，但我没有使用`addSelectColumn`我的标准，所以这对我来说是另一个死胡同。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:58:13.763

我发现了问题。那是我`do select`在`itemPricePeer`课堂上重写了方法

```
public static function doSelect(Criteria $criteria, PropelPDO $con = null){

    $critcopy = clone $criteria;
    $critcopy->add(self::ACTIVE, 1);

    return self::populateObjects(itemPeer::doSelectStmt($critcopy, $con));

} 
```

`self/itemPricePeer`我在参数`itemPeer`中切换。`populateObjects`愚蠢的我：-/无论如何，谢谢你的回复。

# powershell - 如何使用 powershell 将 csv 中的 sid 更改为用户？

> ID：12200189
> 
> 赞同：1
> 
> 时间：2012-08-30T15:17:14.570
> 
> 标签：powershell, csv

这似乎很基本，但无法在任何地方找到或弄清楚。

我有一个要导入的 .csv 文件，将具有不同 SID 的用户列更改为对应的用户名，然后导出回 .csv。我知道如何找到 SIDtoUser，但我不知道如何在 .csv 中进行替换。还有一些用户列是空白的或有“管理员”，我需要单独留下。

当前的

```
ComputerName,   TimeStamp,  Message,    User               
hp8440,         8/30/2012,  message1,   admin  
hp8440,         8/30/2012,  message2  
hp8440,         8/30/2012,  message3,   S-1-5-21...1105  
hp8440,         8/30/2012,  message4,   S-1-5-21...1255 
```

想读

```
ComputerName,   TimeStamp,  Message,    User  
hp8440,         8/30/2012,  message1,   admin  
hp8440,         8/30/2012,  message2  
hp8440,         8/30/2012,  message3,   user1  
hp8440,         8/30/2012,  message4,   user2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:26:33.320

```
Import-Csv .\sid.csv | ForEach-Object{

    if($_.User -and $_.User -ne 'admin')
    {
        # User is not empty and not admin
        # perform translation and assign the results back to the User column
        # then return the current object back to the pipeline
        $_.User = (New-Object System.Security.Principal.SecurityIdentifier $_.User).Translate([System.Security.Principal.NTAccount]).Value
        $_
    }
    else
    {
        # Ignore empty User or admin 
        # and return the current object back to the pipeline
        $_
    }

} | Export-Csv .\users.csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:27:08.530

作为一个单行：

```
Import-Csv .\data.csv |%{ $_.User = ConvertSidToUserName $_.User; $_ } | Export-Csv .\updated.csv 
```

有点可读性...

```
$data = Import-Csv .\data.csv

# replace the User Propery
$data |%{ $_.User = ConvertSidToUserName $_.User }

# export back out to csv
$data | Export-Csv .\updated.csv 
```

# linq - 在 ICollection (EF) 中使用 LINQ

> ID：12200191
> 
> 赞同：1
> 
> 时间：2012-08-30T15:17:21.287
> 
> 标签：linq, entity-framework, icollection

碰巧在 EF 中你必须使用 ICollection 作为你的属性，

```
eg. public virtual ICollection<Question> Questions { get; set; } 
```

但我不想在该列表上使用 LINQ，这在 ICollection 中是不可能的。
我应该将它转换为 IQueryable 吗？如何？或者实现这一目标的标准方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T15:34:07.223

瑞恩在评论中是正确的。

您需要确保引用 Linq 命名空间。

> 使用 System.Linq；

# windows - 如何找到安装证书的路径

> ID：12200193
> 
> 赞同：0
> 
> 时间：2012-08-30T15:17:24.920
> 
> 标签：windows, winforms, windows-phone-7, winapi

考虑以下情况，假设我有注册路径 HKLM\XXX，所以每当安装新证书时，都会在此路径中添加新密钥。

我已经在这个注册表路径上注册了一个回调，但是有什么方法可以确定证书是从哪个路径安装的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:44:24.607

由于标准的安全限制，您无法在 Windows Phone 7 上立即执行此操作。**不要**混淆 Windows 和 Windows Phone 7，因为两者都采用不同的安全策略，为开发人员提供不同级别的系统组件访问权限。

# android - android - 如何在没有内存泄漏的情况下管理背景图像？

> ID：12200194
> 
> 赞同：1
> 
> 时间：2012-08-30T15:17:38.690
> 
> 标签：android

早上好，

在编写我的第一个 android 应用程序的过程中，所以请耐心等待。

我想为我使用的活动提供背景图像。我的第一种方法是将它简单地添加到活动的布局中，

```
....
<ImageView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:contentDescription="@string/desc_background"
    android:scaleType="centerCrop"
    android:src="@drawable/background"
    android:tint="#dd000022" />
.... 
```

不幸的是，当我反复调用某些活动时，这似乎会导致内存泄漏。最后我找到并找到了为什么[在Android上避免内存泄漏的原因](http://www.curious-creature.org/2008/12/18/avoid-memory-leaks-on-android/)

我的下一个想法是执行上述文章中 Romain 所说的“非常快速且非常错误”的解决方案 - 将位图保存在静态字段或 Application 对象中。

我发现了有关该主题的各种文章，但似乎都没有意识到 Romains 的观点。我也不清楚如何实施 Romains 解决方案。

任何提示如何在不遇到内存泄漏的情况下处理 android 中的图像将不胜感激。

非常感谢

马丁

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-30T15:23:59.633

为什么不只是为您正在使用的布局添加背景。

前使用线性布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout1"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:background="@drawable/my_background"
    android:keepScreenOn="true"
    android:orientation="vertical" >

    **REST OF LAYOUT HERE**
</LinearLayout> 
```

或为所有活动使用一张图片创建您自己的风格，然后在您的清单中应用

在你的 res/values 添加一个 styles.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="MyTheme" parent="android:Theme">
        <item name="android:windowBackground">@drawable/my_background</item>
        <item name="android:windowNoTitle">true</item>
        <item name="android:windowFullscreen">true</item>
    </style>

</resources> 
```

并在每个活动的清单中添加

```
android:theme="@style/MyTheme" 
```

# java - JavaFX HBox 隐藏项目

> ID：12200195
> 
> 赞同：30
> 
> 时间：2012-08-30T15:17:40.473
> 
> 标签：java, javafx-2

如何在 HBox 中隐藏一个项目，并使该项目使用的空间可用于其他项目。

```
TitledPane legendPane = new TitledPane("Legend", _legend);
legendPane.setVisible(false);
LineChart chart = new LineChart<Number, Number>(_xAxis, _yAxis);

HBox hbox = new HBox(5);
hbox.getChildren().addAll(legendPane, chart); 
```

在上面的代码中，我希望图表节点在隐藏图例窗格时使用所有可用空间。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-30T16:29:52.460

在调用 legendPane.setVisible 之前，调用：

```
legendPane.managedProperty().bind(legendPane.visibleProperty()); 
```

Node.managed属性防止[场景](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#managedProperty)中的节点影响其他场景节点的布局。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-30T15:57:47.583

您可以暂时将其从场景中移除：

```
legendPane.visibleProperty().addListener(new ChangeListener<Boolean>() {
    @Override
    public void changed(ObservableValue<? extends Boolean> observable, Boolean oldValue, Boolean newValue) {
        if (newValue) {
            hbox.getChildren().add(legendPane);
        } else {
            hbox.getChildren().remove(legendPane);
        }
    }
}); 
```

或者操纵它的大小：

```
legendPane.visibleProperty().addListener(new ChangeListener<Boolean>() {
    @Override
    public void changed(ObservableValue<? extends Boolean> observable, Boolean oldValue, Boolean newValue) {
        if (newValue) {
            legendPane.setMaxSize(Double.MAX_VALUE, Double.MAX_VALUE);
            legendPane.setPrefSize(prefWidth, prefHeight);
        } else {
            legendPane.setMaxSize(0, 0);
            legendPane.setMinSize(0, 0);

        }
    }
}); 
```

# javascript - 一个 Web 应用程序上的两个 JavaScript

> ID：12200198
> 
> 赞同：0
> 
> 时间：2012-08-30T15:17:50.790
> 
> 标签：javascript, css, jquery-animate

我正在为慈善机构创建一个 Web 应用程序，并且我找到了两个想要使用的 JavaScript 函数。

第一个是“添加到 iPhone 的主屏幕”，我已经将它放在我的网络应用程序中并且可以使用，它可以在这里找到：[http ://cubiq.org/add-to-home-screen](http://cubiq.org/add-to-home-screen)

第二个脚本我想使用可折叠的下拉按钮来隐藏慈善机构想要使用的文本。我找到了 JavaScript 代码，我知道我要使用下面的代码：

```
<body onload="dothat();dothis()">

<!------------SCRIPT 1-------------->
<script>
function dothis(){
"
"
"
}
</script>
<!------------END OF SCRIPT 1--->

<!-------------SCRIPT 2---------------->
<script>
function dothat(){
"
"
"
}
</script>
<!------------END OF SCRIPT 2------>

</body> 
```

如何在一个 Web 应用程序页面上使用这两个脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:21:32.107

如果它们是更大的功能，也许你应该在 html 头中链接它们。

```
<script type="text/javascript" language="javascript" src="script1.js"></script>
<script type="text/javascript" language="javascript" src="script2.js"></script> 
```

# c++ - C++：将整数的文本文件转换为 BMP 格式的位图图像文件

> ID：12200201
> 
> 赞同：7
> 
> 时间：2012-08-30T15:18:00.973
> 
> 标签：c++, image, bmp, armadillo

我有一个由包含二维矩阵的矩阵库保存的文本文件，如下所示：

```
1 0 0 
6 0 4
0 1 1 
```

每个数字都用一个彩色像素表示。我正在寻找一些关于如何解决这个问题的见解。如果需要更多信息，请随时询问。

编辑：我尝试过的另一种方法是：`fwrite(&intmatrix, size,1, bmp_ptr);`我传入矩阵指针的位置，它似乎没有输出可读的 BMP 文件。的值当然是，矩阵的类型是`size`来自犰狳线性代数库的矩阵。`rows*cols``arma::Mat<int>`

编辑二：阅读[这](https://stackoverflow.com/questions/10124517/c-bmp-to-byte-array-in-a-file)表明我的大小可能应该是 rows*cols*4 如果我没记错的话，考虑到行的大小，关于这一点的任何指导也会很好。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T05:58:17.850

这是一个应用程序，它生成一个随机整数的文本文件，将它们读回，并将它们作为（大致正方形）每像素 32 位 .BMP 图像写入磁盘。

请注意，我对原始文本文件的格式、数字范围等做了一些假设，但它们都记录在代码中。通过这个工作示例，您应该能够在必要时轻松调整它们。

```
// IntToBMP.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <cstdint>
#include <iostream>
#include <fstream>
#include <string>
#include <vector>
#include <random>
#include <ctime>
#include <memory>

#pragma pack( push, 1 ) 
struct BMP
{
    BMP();
    struct
    {
        uint16_t ID;
        uint32_t fileSizeInBytes;
        uint16_t reserved1;
        uint16_t reserved2;
        uint32_t pixelArrayOffsetInBytes;
    } FileHeader;

    enum class CompressionMethod : uint32_t {   BI_RGB              = 0x00, 
                                                BI_RLE8             = 0x01,
                                                BI_RLE4             = 0x02,
                                                BI_BITFIELDS        = 0x03,
                                                BI_JPEG             = 0x04,
                                                BI_PNG              = 0x05,
                                                BI_ALPHABITFIELDS   = 0x06 };

    struct
    {
        uint32_t headerSizeInBytes;
        uint32_t bitmapWidthInPixels;
        uint32_t bitmapHeightInPixels;
        uint16_t colorPlaneCount;
        uint16_t bitsPerPixel;
        CompressionMethod compressionMethod;
        uint32_t bitmapSizeInBytes;
        int32_t horizontalResolutionInPixelsPerMeter;
        int32_t verticalResolutionInPixelsPerMeter;
        uint32_t paletteColorCount;
        uint32_t importantColorCount;
    } DIBHeader;
};
#pragma pack( pop )

BMP::BMP()
{
    //Initialized fields
    FileHeader.ID                                   = 0x4d42; // == 'BM' (little-endian)
    FileHeader.reserved1                            = 0;
    FileHeader.reserved2                            = 0;
    FileHeader.pixelArrayOffsetInBytes              = sizeof( FileHeader ) + sizeof( DIBHeader );
    DIBHeader.headerSizeInBytes                     = 40;
    DIBHeader.colorPlaneCount                       = 1;
    DIBHeader.bitsPerPixel                          = 32;
    DIBHeader.compressionMethod                     = CompressionMethod::BI_RGB;
    DIBHeader.horizontalResolutionInPixelsPerMeter  = 2835; // == 72 ppi
    DIBHeader.verticalResolutionInPixelsPerMeter    = 2835; // == 72 ppi
    DIBHeader.paletteColorCount                     = 0;
    DIBHeader.importantColorCount                   = 0;
}

void Exit( void )
{
    std::cout << "Press a key to exit...";
    std::getchar();

    exit( 0 );
}

void MakeIntegerFile( const std::string& integerFilename )
{
    const uint32_t intCount = 1 << 20; //Generate 1M (2^20) integers
    std::unique_ptr< int32_t[] > buffer( new int32_t[ intCount ] ); 

    std::mt19937 rng;
    uint32_t rngSeed = static_cast< uint32_t >( time( NULL ) );
    rng.seed( rngSeed );

    std::uniform_int_distribution< int32_t > dist( INT32_MIN, INT32_MAX );

    for( size_t i = 0; i < intCount; ++i )
    {
        buffer[ i ] = dist( rng );
    }

    std::ofstream writeFile( integerFilename, std::ofstream::binary );

    if( !writeFile )
    {
        std::cout << "Error writing " << integerFilename << ".\n";
        Exit();
    }

    writeFile << buffer[ 0 ];
    for( size_t i = 1; i < intCount; ++i )
    {
        writeFile << " " << buffer[ i ];
    }
}

int _tmain(int argc, _TCHAR* argv[])  //Replace with int main( int argc, char* argv[] ) if you're not under Visual Studio
{
    //Assumption: 32-bit signed integers
    //Assumption: Distribution of values range from INT32_MIN through INT32_MAX, inclusive
    //Assumption: number of integers contained in file are unknown
    //Assumption: source file of integers is a series of space-delimitied strings representing integers
    //Assumption: source file's contents are valid
    //Assumption: non-rectangular numbers of integers yield non-rectangular bitmaps (final scanline may be short)
    //            This may cause some .bmp parsers to fail; others may pad with 0's.  For simplicity, this implementation
    //            attempts to render square bitmaps.

    const std::string integerFilename = "integers.txt";
    const std::string bitmapFilename = "bitmap.bmp";

    std::cout << "Creating file of random integers...\n";
    MakeIntegerFile( integerFilename );

    std::vector< int32_t >integers; //If quantity of integers being read is known, reserve or resize vector or use array

    //Read integers from file
    std::cout << "Reading integers from file...\n";
    {   //Nested scope will release ifstream resource when no longer needed
        std::ifstream readFile( integerFilename );

        if( !readFile )
        {
            std::cout << "Error reading " << integerFilename << ".\n";
            Exit();
        }

        std::string number;
        while( readFile.good() )
        {
            std::getline( readFile, number, ' ' );
            integers.push_back( std::stoi( number ) );
        }

        if( integers.size() == 0 )
        {
            std::cout << "No integers read from " << integerFilename << ".\n";
            Exit();
        }
    }

    //Construct .bmp
    std::cout << "Constructing .BMP...\n";
    BMP bmp;
    size_t intCount = integers.size();
    bmp.DIBHeader.bitmapSizeInBytes = intCount * sizeof( integers[ 0 ] );
    bmp.FileHeader.fileSizeInBytes = bmp.FileHeader.pixelArrayOffsetInBytes + bmp.DIBHeader.bitmapSizeInBytes;
    bmp.DIBHeader.bitmapWidthInPixels = static_cast< uint32_t >( ceil( sqrt( intCount ) ) );
    bmp.DIBHeader.bitmapHeightInPixels = static_cast< uint32_t >( ceil( intCount / static_cast< float >( bmp.DIBHeader.bitmapWidthInPixels ) ) );

    //Write integers to .bmp file
    std::cout << "Writing .BMP...\n";
    {
        std::ofstream writeFile( bitmapFilename, std::ofstream::binary );

        if( !writeFile )
        {
            std::cout << "Error writing " << bitmapFilename << ".\n";
            Exit();
        }

        writeFile.write( reinterpret_cast< char * >( &bmp ), sizeof( bmp ) );
        writeFile.write( reinterpret_cast< char * >( &integers[ 0 ] ), bmp.DIBHeader.bitmapSizeInBytes );
    }

    //Exit
    Exit();
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T01:01:27.633

如果您选择正确的图像格式，这很容易。 [PGM](http://netpbm.sourceforge.net/doc/pgm.html)有一个 ASCII 变体，看起来几乎与您的矩阵一模一样，但有一个标题。

```
P2
3 3
6
1 0 0 
6 0 4
0 1 1 
```

ASCII PGM 的魔力在哪里`P2`，大小是 3x3，6 是`maxval`. 我选择 6 是因为这是您提供的最大值，这使 6 变成白色（而 0 是黑色）。在 255 的典型 PGM 中，这与 8 位灰度图像一致。

[PPM](http://netpbm.sourceforge.net/doc/ppm.html)几乎同样简单，它每个像素只有 3 个颜色分量，而不是 1 个。

您可以使用任何需要 PPM（netpbm、ImageMagick、GIMP 等）的方式对这些图像进行操作。您可以将它们重新保存为与等效 BMP 大小基本相同的二进制 PPM。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-01T15:38:29.377

要输出可读的 BMP 文件，您需要先放一个标头：

```
#include <WinGDI.h>

DWORD dwSizeInBytes = rows*cols*4; // when your matrix contains RGBX data)

// fill in the headers
BITMAPFILEHEADER bmfh;
bmfh.bfType = 0x4D42; // 'BM'
bmfh.bfSize = sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER) + dwSizeInBytes;
bmfh.bfReserved1 = 0;
bmfh.bfReserved2 = 0;
bmfh.bfOffBits = sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER);

BITMAPINFOHEADER bmih;
bmih.biSize = sizeof(BITMAPINFOHEADER);
bmih.biWidth = cols;
bmih.biHeight = rows;
bmih.biPlanes = 1;
bmih.biBitCount = 32;
bmih.biCompression = BI_RGB;
bmih.biSizeImage = 0;
bmih.biXPelsPerMeter = 0;
bmih.biYPelsPerMeter = 0;
bmih.biClrUsed = 0;
bmih.biClrImportant = 0; 
```

现在在你写你的颜色信息之前，只写位图标题

```
fwrite(&bmfh, sizeof(bmfh),1, bmp_ptr);
fwrite(&bmih, sizeof(bmih),1, bmp_ptr); 
```

最后是颜色信息：

```
fwrite(&intmatrix, size, sizeof(int), bmp_ptr); 
```

请注意，块大小是 sizeof(int)，因为您的矩阵不包含单个字符，而是每个值的整数。根据矩阵的内容，将值转换为 COLORREF 值可能是个好主意（检查 RGB 宏，也可以在 WinGDI.h 中找到）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T19:03:15.660

我已经重写并评论了来自[https://stackoverflow.com/a/2654860/586784](https://stackoverflow.com/a/2654860/586784)的答案。我希望你觉得它足够清楚。

```
#include <cstddef>
#include <armadillo>
#include <map>
#include <cstdio>
#include <cassert>

///Just a tiny struct to bundle three values in range [0-255].
struct Color{
  Color(unsigned char red, unsigned char green, unsigned char blue)
    : red(red),green(green),blue(blue)
  {}

  ///Defualt constructed Color() is black.
  Color()
    : red(0),green(0),blue(0)
  {}

  ///Each color is represented by a combination of red, green, and blue.
  unsigned char red,green,blue;
};

int main(int argc,char**argv)
{

  ///The width of the image. Replace with your own.
  std::size_t w = 7;
  ///The height of the image. Replace with your own
  std::size_t h = 8;

  ///http://arma.sourceforge.net/docs.html#Mat
  ///The Armadillo Linear Algebra Library Mat constructor is of the following
  /// signature: mat(n_rows, n_cols).
  arma::Mat<int> intmatrix(h,w);

  ///Fill out matrix, replace this with your own.
  {

    ///Zero fill matrix
    for(std::size_t i=0; i<h; ++i)
      for(std::size_t j=0;j<w; ++j)
        intmatrix(i,j) = 0;

    intmatrix(0,3) = 1;
    intmatrix(1,3) = 1;

    intmatrix(2,2) = 6;
    intmatrix(2,4) = 6;

    intmatrix(3,2) = 4;
    intmatrix(3,4) = 4;

    intmatrix(4,1) = 6;
    intmatrix(4,2) = 6;
    intmatrix(4,3) = 6;
    intmatrix(4,4) = 6;
    intmatrix(4,5) = 6;

    intmatrix(5,1) = 1;
    intmatrix(5,2) = 1;
    intmatrix(5,3) = 1;
    intmatrix(5,4) = 1;
    intmatrix(5,5) = 1;

    intmatrix(6,0) = 4;
    intmatrix(6,6) = 4;

    intmatrix(7,0) = 6;
    intmatrix(7,6) = 6;

  }

  ///Integer to color associations. This is a map
  ///that records the meanings of the integers in the matrix.
  ///It associates a color with each integer.
  std::map<int,Color> int2color;

  ///Fill out the color associations. Replace this with your own associations.
  {
    ///When we see 0 in the matrix, we will use this color (red-ish).
    int2color[0] = Color(255,0,0);
    ///When we see 0 in the matrix, we will use this color (green-ish).
    int2color[1] = Color(0,255,0);
    ///When we see 0 in the matrix, we will use this color (blue-ish).
    int2color[4] = Color(0,0,255);
    ///When we see 0 in the matrix, we will use this color (grey-ish).
    int2color[6] = Color(60,60,60);
  }

  ///The file size will consist of w*h pixels, each pixel will have an RGB,
  /// where each color R,G,B is 1 byte, making the data part of the file to
  /// be of size 3*w*h. In addition there is a header to the file which will
  /// take of 54 bytes as we will see.
  std::size_t filesize = 54 + 3*w*h;

  ///We make an array of 14 bytes to represent one part of the header.
  ///It is filled out with some default values, and we will fill in the
  ///rest momentarily.
  unsigned char bmpfileheader[14] = {'B','M', 0,0,0,0, 0,0, 0,0, 54,0,0,0};

  ///The second part of the header is 40 bytes; again we fill it with some
  ///default values, and will fill in the rest soon.
  unsigned char bmpinfoheader[40] = {40,0,0,0, 0,0,0,0, 0,0,0,0, 1,0, 24,0};

  ///We will now store the filesize,w,h into the header.
  ///We can't just write them to the file directly, because different platforms
  ///encode their integers in different ways. This is called "endianness"
  ///or "byte order". So we chop our integers up into bytes, and put them into
  ///the header byte-by-byte in the way we need to.

  ///Encode the least significant 8 bits of filesize into this byte.
  ///Because sizeof(unsigned char) is one byte, and one byte is eight bits,
  ///when filesize is casted to (unsigned char) only the least significant
  ///8 bits are kept and stored into the byte.
  bmpfileheader[ 2] = (unsigned char)(filesize    );
  ///... Now we shift filesize to the right 1 byte, meaning and trunctate
  ///that to its least significant 8 bits. This gets stored in the next
  ///byte.
  bmpfileheader[ 3] = (unsigned char)(filesize>> 8);
  ///...
  bmpfileheader[ 4] = (unsigned char)(filesize>>16);
  ///Encodes the most significant 8 bits of filesize into this byte.
  bmpfileheader[ 5] = (unsigned char)(filesize>>24);

  ///Now we will store w (the width of the image) in the same way,
  /// but into the byte [5-8] in bmpinfoheader.
  bmpinfoheader[ 4] = (unsigned char)(       w    );
  bmpinfoheader[ 5] = (unsigned char)(       w>> 8);
  bmpinfoheader[ 6] = (unsigned char)(       w>>16);
  bmpinfoheader[ 7] = (unsigned char)(       w>>24);

  ///Now we will store h (the width of the image) in the same way,
  /// but into the byte [9-12] in bmpinfoheader.
  bmpinfoheader[ 8] = (unsigned char)(       h    );
  bmpinfoheader[ 9] = (unsigned char)(       h>> 8);
  bmpinfoheader[10] = (unsigned char)(       h>>16);
  bmpinfoheader[11] = (unsigned char)(       h>>24);

  ///Now we open the output file
  FILE* f = fopen("img.bmp","wb");

  ///First write the bmpfileheader to the file. It is 14 bytes.
  ///The 1 means we are writing 14 elements of size 1.
  ///Remember, bmpfileheader is an array which is basically
  ///the same thing as saying it is a pointer to the first element
  ///in an array of contiguous elements. We can thus say:
  ///write 14 bytes, starting from the spot where bmpfileheader points
  ///to.
  fwrite(bmpfileheader,1,14,f);
  ///Then write the bmpinfoheader, which is 40 bytes, in the same way.
  fwrite(bmpinfoheader,1,40,f);

  ///Now we write the data.
  ///For each row (there are h rows), starting from the last, going
  ///up to the first.
  ///We iterate through the rows in reverse order here,
  ///apparently in the BMP format, the image
  ///is stored upside down.
  for(std::size_t i=h-1; i != std::size_t(-1); --i)
  {
    ///For each column in the row,
    for(std::size_t j=0; j<w; ++j)
    {

      ///We retreive the integer of the matrix at (i,j),
      ///and assert that there is a color defined for it.
      assert (int2color.count(intmatrix(i,j)) != 0
        && "Integer in matrix not defined in int2color map");

      ///We somehow get the color for pixel (i,j).
      ///In our case, we get it from the intmatrix, and looking
      ///up the integer's color.
      Color color = int2color[intmatrix(i,j)];

      ///Now the colors are written in reverse order: BGR

      ///We write the color using fwrite, by taking a pointer
      ///of the (unsigned char), which is the same thing as
      ///an array of length 1\. Then we write the byte.
      ///First for blue,
      fwrite(&color.blue,1,1,f);
      ///Same for green,
      fwrite(&color.green,1,1,f);
      ///Finally red.
      fwrite(&color.red,1,1,f);
    }

    ///Now we do some padding, from 0-3 bytes, depending in the width.
    unsigned char bmppad[3] = {0,0,0};
    fwrite(bmppad,1,(4-(w*3)%4)%4,f);
  }

  ///Free the file.
  fclose(f);

  return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T14:55:08.020

您是否有问题将矩阵视为图像或从代码中写入图像？

在前一种情况下，就像本杰克逊说的那样做

在后一种情况下，您想要传递 Arm::Matrix 的数据指针的地址，并且使用 fwrite 假设 Arm::Matrix 将其数据保存为一个连续的内存数组

[编辑]简要看看犰狳文档还告诉数据以列优先模式存储，但BMP假定行优先模式，所以你的图像看起来会翻转

[edit2] 使用犰狳矩阵函数，更简单

```
// assume A is a matrix
// and maxVal is the maximum int value in you matrix (you might scale it to maxVal = 255)
std::ofstream outfile("name.pgm");
oufile << "P2 " << sd::endl << a.n_rows << " " << a.n_cols << std::endl << maxVal << std::endl;
outfile << a << std::endl;
outfile.close(); 
```

# sql - 如何将行号限制为 SQL 查询中的一个唯一行？

> ID：12200202
> 
> 赞同：0
> 
> 时间：2012-08-30T15:18:01.847
> 
> 标签：sql, sql-server

我需要将行号限制为 SQL 查询中的一个唯一行。这是识别我在说什么的示例数据：

```
john doe 3000 fog horn drive , ky 40444
john doe 3001 merry lane , ky 40484 
```

我想返回列表中的第一个，这是我的查询：

```
Select 
    DISTINCT p.personID, e.citizenship, 
    rtrim(i.lastname + CASE WHEN i.suffix IS NULL THEN '' ELSE ' ' + i.suffix END) + ', ' + i.firstname + (CASE WHEN i.middlename IS NULL THEN '' ELSE ' ' + i.middlename END) StuName, 
    e.grade, i.gender, p.studentNumber, e.citizenship, e.adult, i.birthdate, 
    e.disability1, e.disability2, ad.city, e.displacedHomemaker, e.homeSchooled, 
    e.localStudentNumber, e.migrant, e.modifiedDate, e.modifiedByID,
    rtrim(Staff.lastname + CASE WHEN Staff.suffix IS NULL THEN '' ELSE ' ' + Staff.suffix END) + ', ' + Staff.firstname + (CASE WHEN Staff.middlename IS NULL THEN '' ELSE ' ' + Staff.middleName END) Staffname, 
    Staff.personID Staffid, i.lastname, i.firstname, i.middlename, i.ssn, 
    ad.phone, ad.state, ad.zip, ad.addressLine1
FROM 
    Person p 
LEFT join 
    Enrollment e ON e.personID = p.personID And isnull(e.noshow, 0) = 0 
LEFT join 
    EnrollmentKY ky ON ky.enrollmentID = e.enrollmentID 
LEFT join 
    [Identity] i ON i.identityID = p.currentIdentityID And i.personID = p.personID 
INNER join 
    Calendar c ON c.calendarID = e.calendarID 
INNER join 
    SchoolYear sy ON sy.endYear = c.endYear AND sy.active = 1 
JOIN 
    staffMember Staff ON Staff.personID = e.modifiedByID 
--join view_students s ON  s.personID = i.personID
left join 
    v_MailingAddress ad ON ad.personID = i.personID And ad.relatedBy = 'household'
                        And ad.endDate IS NULL And isnull(ad.secondary, 0) = 0 
order by 
    i.lastname, i.firstname, i.middlename 
```

编辑：只需要在 SQL 代码中选择第一行，因为我对拥有多个地址的人有疑问，它为他们放置了两行，而对于拥有多个地址的人，我只需要第一行数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:47:34.643

如果`personId`每个记录的 是不同的并且它们只是具有不同的地址，那么您可以为 添加一个字段，`row_number()`然后只选择其中的记录`row_number = 1`：

```
select *
from 
(
  Select p.personID,
    e.citizenship, 
    rtrim(i.lastname + CASE WHEN i.suffix IS NULL THEN '' ELSE ' ' + i.suffix END) + ', ' + i.firstname + (CASE WHEN i.middlename IS NULL THEN '' ELSE ' ' + i.middlename END) StuName, 
    e.grade, 
    i.gender, 
    p.studentNumber, 
    e.citizenship, 
    e.adult, 
    i.birthdate, 
    e.disability1, 
    e.disability2, 
    ad.city, 
    e.displacedHomemaker, 
    e.homeSchooled,
    e.localStudentNumber,
    e.migrant,
    e.modifiedDate,
    e.modifiedByID,
    rtrim(Staff.lastname + CASE WHEN Staff.suffix IS NULL THEN '' ELSE ' ' + Staff.suffix END) + ', ' + Staff.firstname + (CASE WHEN Staff.middlename IS NULL THEN '' ELSE ' ' + Staff.middleName END) Staffname, 
    Staff.personID Staffid,
    i.lastname, 
    i.firstname, 
    i.middlename,
    i.ssn, 
    ad.phone, 
    ad.state, 
    ad.zip, 
    ad.addressLine1,
    row_number() over(partition by p.personid order by p.personid) rn -- add this field
  FROM Person p 
  LEFT join Enrollment e 
    ON e.personID = p.personID 
    And isnull(e.noshow,0)=0 
  LEFT join EnrollmentKY ky 
    ON ky.enrollmentID = e.enrollmentID 
  LEFT join [Identity] i 
    ON i.identityID = p.currentIdentityID 
    And i.personID = p.personID 
  INNER join Calendar c 
    ON c.calendarID = e.calendarID 
  INNER join SchoolYear sy 
    ON sy.endYear = c.endYear 
    AND sy.active = 1 
  JOIN staffMember Staff 
    ON Staff.personID = e.modifiedByID 
  --join view_students s ON  s.personID = i.personID
  left join v_MailingAddress ad 
    ON ad.personID = i.personID 
    And ad.relatedBy = 'household'
    And ad.endDate IS NULL 
    And isnull(ad.secondary,0)=0 
) x
where x.rn = 1
order by x.lastname, x.firstname, x.middlename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:22:25.913

尝试使用`LIMIT`来限制编号。的输出。

例如：

```
SELECT COLUMN_NAME
FROM TABLE
ORDER BY CONDITION
LIMIT NO_OF_ROWS; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:24:43.683

您是否尝试过使用“GROUP BY”子句而不是 DISTINCT 关键字？

另外，子查询呢？如果我正在编写这种类型的东西，我会使用存储过程并创建一个临时表。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-30T15:21:49.930

编辑：删除原始答案，因为问题已更改，原始答案不是更改问题的方法。

根据 Neil Hoskins 建议 GROUP BY 子句。

# objective-c - 单击横幅按钮项目时应用程序崩溃

> ID：12200203
> 
> 赞同：0
> 
> 时间：2012-08-30T15:18:02.993
> 
> 标签：objective-c, xcode, uitoolbar

我的应用程序底部有一个显示广告的旋转横幅，当用户单击旋转时，带有简单 web 视图的视图控制器和顶部的工具栏显示显示特定于横幅的网页。除了我需要工具栏中的关闭按钮之外，这一切都很好。由于某种原因，在我将关闭按钮链接到单击时应在日志中显示“关闭”的操作之后。我运行应用程序并单击按钮，出现错误访问错误，但错误日志中没有消息。

这是显示带有 webview 的 viewcontroller 的地方。它是从应用程序委托中的一个方法调用的，该方法可以从应用程序中的任何位置访问。

```
BannerViewer* viewer = [BannerViewer alloc];
[viewer setUrl:db.WEBurl];
[_window addSubview: viewer.view]; 
```

BannerViewer.h

```
@interface BannerViewer : UIViewController {
        IBOutlet UIWebView* webView;
        IBOutlet UIBarButtonItem* close;
        IBOutlet UINavigationBar* navBar;
        NSURL *url;
    }

    @property(nonatomic,strong)IBOutlet UIWebView* webView;
    @property(nonatomic,strong)NSURL *url;
    @property(nonatomic,strong)IBOutlet UIBarButtonItem* close;
    @property(nonatomic,strong)IBOutlet UINavigationBar* navBar;
    -(IBAction)closeWindow:(id)sender;
    @end 
```

BannerViewer.m

```
-(IBAction)closeWindow:(id)sender{
    NSLog(@"close");
} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:32:30.847

```
BannerViewer* viewer = [BannerViewer alloc]; 
```

分配对象后，您需要通过调用指定的初始化程序对其进行初始化。对于以`UIViewController`编程方式实例化的子类，您需要以下内容：

```
BannerViewer* viewer = [[BannerViewer alloc] initWithNibName:nil bundle:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T22:39:44.107

我也刚遇到这个问题。

为了解决这个问题，我将新的 UIViewController 变成了一个属性。

```
@property (nonatomic, strong) ThirdViewController *theSecondView; 
```

根据 xcode 提供给我的少量信息，这似乎是一个内存问题。似乎正在发生的事情是，当按下按钮时，视图被创建，但是 ARC 在它创建后很快就会释放它在内存中的位置，所以单击按钮只会让 Xcode 变得合适。

如果使用了强属性，则新视图在内存中拥有更强的引用，直到父视图控制器也被释放后才会释放。

# .net - .Net 基础设施上的 Django？

> ID：12200206
> 
> 赞同：0
> 
> 时间：2012-08-30T15:18:06.073
> 
> 标签：.net, django, web-applications

我正在阅读[这篇](http://batsov.com/articles/2011/06/19/django-vs-rails/)关于 Django vs Rails 的文章

作者说

```
"The also the possibility to deploy Django apps on Java or .Net infrastructure using Jython or IronPython." 
```

如何在 .Net 基础设施上部署 Django 应用程序？我找不到任何解释这种事情的教程。还是我对作者的理解有误？

此外，当他说“应用程序”时，他的意思是像来自 Django 项目或应用程序的一个“应用程序”，就像在完整的 Django 项目（即网络应用程序）中一样。

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:42:23.443

Jython 是一个用 Java 实现的 Python 解释器，而 Ipython 是一个用 .Net 实现的 Python 解释器。因此，您可以使用其中任何一个在各自的平台上运行 Python 程序，利用该平台的所有优点（和缺点）。根据这篇文章，我很确定作者在谈论应用程序时指的是 Django 项目。

# mysql - MySQL - COALESCE 使用结果加入

> ID：12200211
> 
> 赞同：0
> 
> 时间：2012-08-30T15:18:31.410
> 
> 标签：mysql

在我从带有 COALESCE 的 SELECT 中获得结果后，我试图加入一个表

```
SELECT
    COALESCE(
            (
                SELECT
                      relocations.location_id
                FROM
                      relocations
                WHERE
                      parts.id=relocation.part_id
                ORDER BY
                      relocations.date_moved
                DESC
                LIMIT 
                      1
            )
            ,
            parts.location_id
       ) AS locationId,
    locations.name
FROM
    parts
JOIN
    locations ON locations.id=locationId 
```

但是查询无效，MySQL 告诉我 locationId 是一个未知列。我该如何解决这个问题？

**表结构**

[零件] id | location_id

[搬迁] id | location_id | 日期移动

[地点] id | 姓名

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:29:42.960

如果我理解正确，您正在尝试加入该`COALESCE`专栏。试试这个：

```
SELECT a.locationId, locations.name FROM
    (SELECT
        COALESCE(
                    (
                    SELECT
                          relocations.location_id
                    FROM
                          relocations
                    WHERE
                          parts.id=relocation.part_id
                    ORDER BY
                          relocations.date_moved
                    DESC
                    LIMIT 
                          1
                )
                ,
                parts.location_id
           ) AS locationId
    FROM
        parts) a
JOIN locations ON locations.id=a.locationId 
```

# java - 我应该使用哪些对象进行 HttpClient 编程？

> ID：12200213
> 
> 赞同：0
> 
> 时间：2012-08-30T15:18:34.080
> 
> 标签：java, httpclient, httpresponse

我正在尝试编写一个能够通过 URL 向服务器发送请求并接收来自服务器的响应的类。

我一直在研究 HttpClient 但似乎有来自不同用户的许多不同类型的 HttpClient 对象。我不确定我应该使用哪个。如果可能的话，我更喜欢使用 Apache 对象。

要求：

必须能够使用 get 方法通过 url 发送请求。我想为此使用 HttpMethod 。必须能够向 get 或 post 方法提交表单。必须能够从响应中获取和存储 cookie，并在请求标头中发送这些 cookie。欺骗引荐来源标头的能力也很有用。

我正在尝试做的一些示例代码：

```
String searchURL = //however I'm generating the search URL
String responeAsString = "";
HttpClient client = new HttpClient(new MultiThreadedConnectionManager());
client.getHttpConnectionManager().getParams().setConnectionTimeout(30000);
HttpMethod method = new GetMethod(searchURL);

try{
    client.executeMethod(method);
    responseAsString = method.getResponseBodyAsString();
}catch (Exception e){
    //error fixing code
} 
```

我希望能够将 responseAsString 替换为实际的 HttpResponse 对象，但我无法找到下载 jar 文件的资源。

如果您可以包含有关从何处下载您建议的对象的 .jar 文件的链接，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:25:25.950

这可能有点矫枉过正，但我​​会看看开源项目 GWT [https://developers.google.com/web-toolkit/](https://developers.google.com/web-toolkit/)

他们有一个与服务器通信的示例应用程序，您可以看到它是如何工作的。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:40:11.730

您可以使用 Apache Default Http Client 版本 4 完成您请求的所有操作，您可以将响应字符串修改为任何有效的 HTTPResponse 对象。您可以更改请求和响应中的所有标头，包括引用标头。您应该只知道标题名称才能替换它。

该库位于[http://hc.apache.org/httpcomponents-client-ga/](http://hc.apache.org/httpcomponents-client-ga/)

请确保您获得版本 4。

有关如何使用它的指南，请访问： http: [//hc.apache.org/httpcomponents-client-ga/tutorial/html/](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/)

您可以在以下位置找到可以使用的请求和响应标头列表：google 搜索关键字“http 响应标头”给出的第一个链接 - wiki 文章。

享受！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:32:02.957

[您可以在http://oaklandsoftware.com/product_http/compare.html](http://oaklandsoftware.com/product_http/compare.html)找到 Java HTTP 客户端比较

您的要求似乎很基本，因此任何库都应该支持它们，除了关于 HttpResponse 对象的最后一个，但使用 Apache 库您可以从 HttpMethod 获取响应的正文、页眉和页脚，这已经足够了。我想其他图书馆应该提供类似的东西。

# jquery - jquery prepend plus fadein 不适用于 1.8 版

> ID：12200214
> 
> 赞同：0
> 
> 时间：2012-08-30T15:18:38.233
> 
> 标签：jquery

我的一部分代码使用从 ajax 调用返回的 html 预先添加到 div。但是当我更新到 jquery 1.8 版时，它在 firefox 中停止工作，认为它在 chrome 和其他浏览器中完美运行。

我的代码是

```
$("#content").prepend($(html).fadeIn('slow')); 
```

并且Firefox中的错误是

> NS_ERROR_XPC_BAD_CONVERT_JS：无法转换 JavaScript 参数 arg 0 [nsIDOMWindow.getComputedStyle]

我厌倦了找出问题，发现使用`$("#content").prepend(html);`不带淡入淡出的作品`fadeIn('slow')`是导致问题的原因。任何人都可以帮助我编写一个我可以同时使用的代码，并且可以在 jquery 1.8 版和 firefox 上正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:20:06.200

怎么样：

```
$(html).prependTo("#content").fadeIn('slow'); 
```

`$(html)`当然必须最初隐藏它才能工作？

如果你真的想淡入`#content`元素，你可以这样做：

```
$('#content').prepend(html).fadeIn('slow'); 
```

# ruby-on-rails - Bundler：Gemfile 中的 :require => nil 是什么意思？

> ID：12200215
> 
> 赞同：7
> 
> 时间：2012-08-30T15:18:39.690
> 
> 标签：ruby-on-rails, bundler

这个 gemfile 条目中的 nil 是什么意思？

```
gem "hub", ">= 1.10.2", :require => nil 
```

我发现这个问题和答案是错误的；

[Bundler： Gemfile 中的 :require => false 是什么意思？](https://stackoverflow.com/questions/4800721/bundler-what-is-the-require-false-on-the-gemfile-means)

在这种情况下，nil 的行为是否与 false 相同？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T15:24:46.897

是的，`nil`并且`false`在这里表现相同：它使 Bundler 不需要指定的 gem。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-30T17:14:58.993

Require`nil`或`false`意味着捆绑器不会加载 ( `require`) 特定的 gem。但是，它们将位于`$:`加载路径中，因此您可以在任何时候明确要求它们使用它们。对于仅在特殊情况下需要的 gem（例如外部脚本、rake 任务等），使用它是一个很好的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-26T08:09:29.743

每当您在您的`Gemfile`和运行中指定一个 Gem 时 `bundle install`，bundler 将去安装指定的 gem 并通过 put 在您的应用程序中加载该 Gem 的代码 `require 'whenever'` ，这样 bundler 将为您的 Rails 应用程序中的所有 Gems 加载代码，您可以调用任何任何宝石的方法都没有任何痛苦，就像你大部分时间一样。

但是像 Gems 这样`whenever,faker or capistrano` 的东西是您的应用程序代码中不需要的东西，只要文件中的代码`schedule.rb` 用于管理文件中的 crons 和 capistrano 代码`deploy.rb` 以自定义部署配方，因此您无需在应用程序代码中以及在任何地方加载这些 gems 的代码想要从这些 Gems 中调用任何方法，您可以通过 put 手动要求这些 Gems `require "whenever"` 。所以你为这些 Gems 放入`:require => false`或`:require => nil`放入 Gemfile（两者的含义相同），这样捆绑程序将安装该 Gem 但不加载该 Gem 本身的代码，您可以随时通过简单地将 like require 'whenever' 放入您的案子。

# linux - 新贵的期望/重生可以用于分叉两次以上的进程吗？

> ID：12200217
> 
> 赞同：19
> 
> 时间：2012-08-30T15:18:52.373
> 
> 标签：linux, rhel, upstart

我正在使用 upstart 启动/停止/自动重启守护进程。其中一个守护进程分叉了 4 次。[新贵食谱](http://upstart.ubuntu.com/cookbook/#expect)指出它只支持分叉两次。有解决方法吗？

## 它是如何失败的

如果我尝试使用`expect daemon`or `expect fork`，upstart 使用第二个 fork 的 pid。当我试图停止工作时，没有人响应新贵的 SIGKILL 信号，它会挂起，直到你用完 pid 空间并循环回来。如果您添加重生，情况会变得更糟。新贵认为这份工作已经结束，并立即开始另一份工作。

## 上游确认的错误

为暴发户[输入了一个错误。](https://bugs.launchpad.net/upstart/+bug/406397)提出的解决方案是坚持使用旧的 sysvinit，重写你的守护进程，或者等待重写。RHEL 比最新的 upstart 包晚了将近 2 年，所以当重写发布并且我们得到更新时，等待可能会是 4 年。该守护程序是由承包商的分包商的分包商编写的，因此它也不会很快被修复。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-31T14:09:43.410

我想出了一个丑陋的黑客来完成这项工作。它适用于我系统上的应用程序。YMMV。

1.  在预启动部分启动应用程序
2.  在脚本部分运行一个只要应用程序运行就运行的脚本。这个脚本的 pid 是 upstart 将跟踪的。
3.  在 post-stop 部分杀死应用程序

## 例子

```
env DAEMON=/usr/bin/forky-application

pre-start script
    su -s /bin/sh -c "$DAEMON" joeuseraccount
end script

script 
    sleepWhileAppIsUp(){
        while pidof $1 >/dev/null; do
            sleep 1
        done
    }

    sleepWhileAppIsUp $DAEMON
end script

post-stop script
    if pidof $DAEMON;
    then
        kill `pidof $DAEMON`
        #pkill  $DAEMON # post-stop process (19300) terminated with status 1
    fi
end script 
```

可以对 pid 文件采取类似的方法。

# right-to-left - 是否有 Dynatree 的有效 RTL 示例

> ID：12200219
> 
> 赞同：0
> 
> 时间：2012-08-30T15:18:56.460
> 
> 标签：right-to-left, dynatree

尝试与 Dynatree 一起使用 dragndrop 显示 RTL 树。尝试使用 css，但它显然需要更多。有没有人有一个工作的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T12:25:42.603

查看[此解决方案](http://wwwendt.de/tech/dynatree/doc/sample-rtl.html)，它会格式化整个树并使用以下命令翻转文本：bidi-override。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:41:55.013

我为它开了一张票： [https ://code.google.com/p/dynatree/issues/detail?id=352](https://code.google.com/p/dynatree/issues/detail?id=352)

# heroku - 在 Heroku 上安装 freetds

> ID：12200232
> 
> 赞同：6
> 
> 时间：2012-08-30T15:19:51.333
> 
> 标签：heroku, freetds, tiny-tds

我正在寻找分步指南，如何在 Heroku 上安装 freetds。我需要从 ruby​​ 脚本访问 Sql Server，不幸的是，Cedar 不支持开箱即用的 tinytds gem。我已经阅读了互联网上可用的任何信息，包括有关 heroku buildpacks 的信息，但未能成功。

我将非常感谢任何可以帮助在 heroku 上部署 freetds 的人。

在此先感谢， - 杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T04:44:59.597

试试在 Cedar + Rails 3 上开箱即用的[tiny_tds](https://github.com/rails-sqlserver/tiny_tds)。它有[一个本机编译通道](https://github.com/rails-sqlserver/tiny_tds/blob/master/tasks/ports.rake)，其中捆绑了 FreeTDS。

# matlab - parfor 和处理类

> ID：12200236
> 
> 赞同：6
> 
> 时间：2012-08-30T15:19:58.023
> 
> 标签：matlab, parallel-processing, handle

我有一个句柄类：

```
classdef A<handle

    properties
        a;
    end

    methods
        function obj = A(a)
            obj.a=a;
        end
    end
end 
```

我有一个`A`对象单元格数组：

```
arr={};
for i=1:3
    arr{i}=A(i);
end 
```

我想做的是将该单元格数组传递给一个`parfor`循环，以便每个对象的值都会改变：

```
parfor i=1:3
    arr{i}.a=i*5;
end 
```

但是，此代码根本没有改变`arr`。确实，[这里](http://www.mathworks.com/help/toolbox/distcomp/bq__cs7-1.html)指出

> 在循环迭代期间为处理工作人员上的类所做的更改不会自动传播到客户端。

我该如何克服呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T16:12:11.747

一个有趣的问题；我实际上从未遇到过这个问题。了解有关限制的一切总是好的`parfor`，所以我做了一些谷歌搜索并想出了[这个](http://www.mathworks.com/matlabcentral/answers/26604)：

> 我已从技术支持处收到了对此问题的答复。显然，Mathworks 将其视为不返回对象更改的“功能” - 尽管我看不出这是一个非常有用的功能。无论如何，获取从 parfor 循环返回的修改后的类属性的方法是进行可以被 parfor 识别的显式更改。以下是适用于上述示例对象的两个示例：
> 
> ```
> parfor n = 1:num
>     exArray(n).data = n:n+5;
> end 
> ```
> 
> 或者
> 
> ```
> parfor n = 1:num
>     temp = exArray(n);
>     setData(temp,n:n+5);
>     exArray(n) = temp;
> end 
> ```
> 
> 实际上，如果您更改任何对象属性，它似乎也可以工作。因此，例如这也有效，如果明确设置了第二个属性 data2 ，则 data 和 data2 都会正确返回：
> 
> ```
>  parfor n = 1:num
>       setData(exArray(n),n:n+5);
>       exArray(n).data2 = n:n+5;
>   end 
> ```

示例对象由

```
classdef Example < handle

    properties
        data
    end

    methods
        function obj = Example(data)
            obj.data = data;
        end

        function setData(obj,data)
            obj.data = data;
        end

        function data = getData(obj)
            data = obj.data;
        end
    end
end 
```

并且数组被简单地初始化为

```
% Initialise array of objects
for n = 1:num
    exArray(n) = Example(zeros(1,6));
end 
```

# iphone - iOS - 架构 armv7 的 2 个重复符号

> ID：12200238
> 
> 赞同：6
> 
> 时间：2012-08-30T15:20:02.793
> 
> 标签：iphone, ios, restkit

我在我的项目中到处都在使用[Resty](http://projects.lukeredpath.co.uk/resty/)，但是现在因为我必须将图像上传到服务器，所以我尝试添加另一个名为[RestKit](http://restkit.org/)的框架来处理文件上传。但是当我编译时，它得到了错误：

```
duplicate symbol _NewBase64Decode in:
    /Users/iforests/Library/Developer/Xcode/DerivedData/Owlch-gnysrakcbhsgkubbjjjfbahlocqi/Build/Products/Debug-iphoneos/libRestKit.a(NSData+Base64.o)
    /Users/iforests/Documents/iOSworkspace/Owlch/LRResty.framework/LRResty(NSData+Base64.o)
ld: 2 duplicate symbols for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

有没有办法在不移除LRResty的情况下解决这个问题（因为明天是这个项目的截止日期）。非常感谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-15T09:38:00.133

在将新库导入现有（旧）项目时遇到了这个问题 - 结果问题是`-all_load`（无论出于何种原因）仍然在 Xcode的“**构建设置 - 链接 - 其他链接器标志”中设置的链接器标志。**

删除此标志后一切正常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T15:29:12.280

从 Resty 源中删除这些文件。

> LRResty/Classes/Categories/NSData+Base64.h LRResty/Classes/Categories/NSData+Base64.m

这将解决链接问题。

如果它因此停止工作，请在 Resty 代码中重命名 NSData+Base64 的文件和类别，然后在 Resty 代码导入“NSData+Base64.h”的任何地方，将导入更改为您重命名类别的任何内容

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-15T19:55:19.370

我也想出了同样的错误。通常，由于项目文件夹中的类和 xib 重复，会发生这种错误。例如，在我的项目中，我有两次这些课程`ServiceRequest.h/.m`。摆脱重复的，你很高兴。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T05:22:14.613

问题是两个库都定义了相同的方法：NewBase64Decode。

因此，您可以修改任何一个库的源代码并将方法名称更改为其他名称，例如“RKNewBase64Decode”。请记住在调用 NewBase64Decode 方法的任何位置对 *.m 文件进行更改！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-12T17:49:36.593

另外，我注意到，如果您愚蠢地导入了 .m，请删除导入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-23T09:01:21.343

在导入包含与项目中的名称完全相同的类的框架时，我发生了这种情况。

# jquery - 数字的正则表达式

> ID：12200243
> 
> 赞同：4
> 
> 时间：2012-08-30T15:20:18.550
> 
> 标签：jquery, asp.net, regex

我对 reg 表达式相当陌生，我正在努力想出一个价格字段的正则表达式。

我想用

```
var price = $('#new_price').val().replace(/*regex*/, ''); 
```

去除任何不需要的字符。

价格可以是 int 即 10 或小数到 2dp 即 9.99

基本上我想要删除任何与标准货币格式不匹配的东西。

或者

我想要一个正则表达式来检查（使用`.match(regex)`）该字段是否采用所需的格式。

如果有人可以快速为我编写这些正则表达式中的任何一个并向我解释，那么我知道未来我会非常感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T15:22:21.990

您可以使用此正则表达式去除任何非数字或`.`字符：`/[^\d\.]/g`

所以：

```
$('#new_price').val().replace(/[^\d\.]/g, ''); 
```

这个正则表达式的工作方式如下：

```
/  -> start of regex literal
[  -> start of a "character class". Basically you're saying I to match ANY of the
      characters in this class.
^  -> this negates the character class which says I want anything that is NOT in 
      this character class
\d -> this means digits, so basically 0-9.
\. -> Since . is a metacharacter which means "any character", we need to escape 
      it to tell the regex to look for the actual . character
]  -> end of the character class
/  -> end of the regex literal.
g  -> global flag that tells the regex to match every instance of the pattern. 
```

所以基本上这会寻找任何不是数字或小数点的东西。

要查看它的格式是否正确，您可以检查值是否匹配：

```
/\d*(\.\d{0, 2})?/ 
```

你可以像这样使用它：

```
if(/^\d*(\.\d{0, 2})?$/.test($('#new_price').val()) {
   ...
   ...
} 
```

因此，`if`块中的代码只有在匹配模式时才会运行。这是正则表达式的解释：

```
/        -> start of regex literal
^        -> anchor that means "start of string". Yes the ^ is used as an anchor
            and as a negation operator in character classes :) 
\d       -> character class that just matches digits
*        -> this is a regex metacharacter that means "zero or more" of the 
            preceding. So this will match zero or more digits. You can change
            this to a + if you always want a digit. So instead of .99, you want
            0.99.
(        -> the start of a group. You can use this to isolate certain sections or
            to backreference.
\.       -> decimal point
\d{0, 2} -> zero to two numbers.
)        -> end of the group
?        -> regex metacharacter that means "zero or one" of the preceding. So 
            what this means is that this will match cases where you do have 
            numbers after the decimal and cases where you don't.
$        -> anchor that means "end of string"
/        -> end of the regex literal 
```

# rest - EJB 端点接口 - 客户端是否“在 VM 中”？

> ID：12200247
> 
> 赞同：0
> 
> 时间：2012-08-30T15:20:41.313
> 
> 标签：rest, jakarta-ee, jvm, ejb

作为 SLSB EJB 的初学者，我知道在本地（通过本地业务接口）访问它们比远程访问更有效。

通过 Endpoint 访问 EJB 时，是远程访问还是本地访问？

这是在通过 JAX-RS 访问 EJB 的上下文中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:36:54.637

Web 服务端点既不是本地的也不是远程的。这是它自己的客户端视图。

也就是说，远程的开销主要是由于参数和返回类型的按值传递语义的编组/解编组参数。Web 服务视图将需要相同的，因此您应该期望性能比使用传递引用的本地慢。网络服务视图是比远程更快还是更慢取决于网络服务和远程实现。

# javascript - 新手查询动态添加属性

> ID：12200257
> 
> 赞同：0
> 
> 时间：2012-08-30T15:21:17.947
> 
> 标签：javascript

[这是我之前的查询](https://stackoverflow.com/questions/12172119/javascript-how-to-avoid-addition-of-a-new-property-in-a-function/12172186)的后续。从那以后我一直在尝试一些代码：

```
var myFunc = function(){
    this.int1=1;
    var int2=2;
};
myFunc.int1=3;
myFunc.int3=4;

for(var name in myFunc){
    console.log('myFunc...'+name+'='+myFunc[name]);
};

var myFuncImpl = new myFunc();
myFuncImpl.int1=5;
for(var name in myFuncImpl){
    console.log('myFuncImpl...'+name+'='+myFuncImpl[name]);
}; 
```

我得到的输出为：

```
myFunc...int1=3
myFunc...int3=4
myFuncImpl...int1=5 
```

我无法回答以下问题：

1.  为什么**int2**作为 myFunc 的属性不可见？它仍然在 myFunc 的范围内，对吧？这个定义在哪里消失了？

2.  为什么我能够在函数范围之外覆盖**int1的值？**如果有人不小心删除了我在代码之外的值怎么办？对于“对象”，我理解“Object.freeze()”可以帮助解决 myFuncImpl - 但是像 myFunc 这样的函数定义呢？

3.  为什么我不能从 myFuncImpl 访问**int3**？先前的定义（在定义 myFunc 时）去哪儿了？

我想我的怀疑是由于我认为 myFunc 作为一个“类”（如在 Java 中）和 myFuncImpl 作为一个对象。也许我走得太远了？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:28:12.343

1.  `int2`实际上是一个私有变量，因此函数外部*的*代码无法检测到它[http://javascript.crockford.com/private.html](http://javascript.crockford.com/private.html)

2.  这只是“香草”JS 的生活事实。如果您需要防止覆盖值，请使用`Object.defineProperty`. IE<9 的注意事项

3.  `int3`是函数的“静态”属性。它在实例上不可用，有点像在 C# 中，如果你有一个静态方法，它对类的实例不可用。这里的区别是你可以稍后在你的代码中说`myFunc.int1 = "asdf";`，现在你的“静态”属性已经改变了。不要将**静态**与**常量混淆** [http://elegantcode.com/2011/01/19/basic-javascript-part-7-static-properties-and-methods/](http://elegantcode.com/2011/01/19/basic-javascript-part-7-static-properties-and-methods/)

# entity-framework - Visual Studio 2012 - 无法移动 EF .tt 文件

> ID：12200258
> 
> 赞同：14
> 
> 时间：2012-08-30T15:21:21.017
> 
> 标签：entity-framework, visual-studio-2012

我在 VS2012 中注意到，当您创建新的 EF 模型 (.edmx) 时，DbContext 是默认代码生成，并且 .tt（T4 模板）文件**现在嵌套在**解决方案资源管理器中的 .edmx 文件下方。

**问题：** *有没有办法将这些 .tt 文件移动到另一个文件夹或项目？* 当我尝试在解决方案资源管理器中拖放时，它不允许我移动嵌套的 .tt 文件。

**问题详细信息：** 以前（在 VS2010 中）我曾经将我的 POCO 的一个 .tt 文件移动到一个名为 DataDefinitions 的类库中，并将另一个 .tt 文件留给我的上下文在一个名为 DataAccess 的类库中。现在看来我将无法移动这些文件......并将我的资产分成不同的层。

在这篇 MSDN 文章中，如果滚动到底部，您可以看到 .tt 文件现在是如何嵌套的图片... [http://msdn.microsoft.com/en-us/data/jj613116](http://msdn.microsoft.com/en-us/data/jj613116)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-30T20:23:06.997

这是一些奇怪的新功能，其中模板作为依赖项添加到 EDMX 文件。您可以通过为您的项目编辑 .csproj 文件来修复它（您可以在记事本中完成或在 VS 中卸载项目并进行编辑）。你会发现这样的东西：

```
<None Include="Model.tt">
  <Generator>TextTemplatingFileGenerator</Generator>
  <DependentUpon>Model.edmx</DependentUpon>
  <LastGenOutput>Model.cs</LastGenOutput>
</None> 
```

您只需要删除`DependentUpon`元素，模板项将成为项目的独立部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:25:01.287

我在 EF 数据模型的单独项目中使用 EF5.xa DBContext。尽管删除了`DependentUpon`Ladislav 所述的项目文件中的条目，但[这里](http://allen-conway-dotnet.blogspot.co.uk/2013/01/separating-entity-framework-poco.html)的类仍然出现在我的 Model1.tt 文件下。

为了解决这个问题，我还必须从每个表的项目文件中删除部分条目：

```
<Compile Include="MyTableName.cs">
  <DependentUpon>Model1.tt</DependentUpon>
</Compile> 
```

只`<DependentUpon>`应删除带有标签的行，而`<Compile Include="...">`应保留标签。删除整个条目将导致文件从项目列表中消失。为简洁起见，条目可以缩短`<Compile Include="MyTableName.cs"\>`为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T21:30:01.837

我没有编辑项目文件，而是将同名的 EF 模型添加到项目中，关闭解决方案，从其他项目复制模型文件，然后重新打开解决方案。我更改了 edmx 属性中的命名空间，然后重新编译模型。

# extjs - 在 extjs4.1 中的服务器端过滤存储

> ID：12200263
> 
> 赞同：3
> 
> 时间：2012-08-30T15:21:31.490
> 
> 标签：extjs, filter, extjs4, store, extjs4.1

我必须从插入在单独 Ext.form.Panel 中的页面顶部的一组文本字段/组合框中过滤网格存储。我使用这个代码做网格过滤器：

```
doGridFilters : function() {
        //storeClients.clearFilter();
        var client_Id = Ext.getCmp('Id_form').getValue();
        var filter1 = Ext.create('Ext.util.Filter',{
             root:'list',
             comparison: 'eq',
             property: "Id",
             value: client_Id
        });

        storeClients.getProxy().extraParams = { filter: filter1 };
        storeClients.load();
    }, 
```

但商店不执行任何类型的过滤器。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T04:39:50.543

远程过滤非常简单：

*   存储必须配置[remoteFilter](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-property-remoteFilter)以便代理将处理并通过所有应用的过滤器
*   接下来使用 [store.filter('propertyName', 'filtervalue')](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-filter)应用过滤器。应用过滤器后，商店现在将自动加载。
*   期望在服务器端有一个过滤器列表，看起来像 `...filter:[{property:'Name', value:'value'}]...`

就这样。`remoteFilter`每次应用过滤器之前都可以更改该属性。对于您的情况：

```
doGridFilters : function(grid) {
    var store = grid.store;
    store.clearFilter();
    store.remoteFilter = true;// optional
    var client_Id = Ext.getCmp('Id_form').getValue();
    store.on('load', function(s){ s.remoteFilter = false; }, this, { single: true }) // optional
    store.filter("Id",client_Id);
} 
```

注意：代理将始终只应用属性值配对过滤器，仅此而已 [ExtJS 4.1.1] 更多您需要覆盖负责的代理功能

# mysql - 具有两个条件的 LEFT OUTER JOIN 无法正常工作

> ID：12200265
> 
> 赞同：1
> 
> 时间：2012-08-30T15:21:37.833
> 
> 标签：mysql, sql, left-join

```
SELECT mein.person_id AS per_Id, DATE( mein.timestamp ) AS dates, SUM( nr_pos ) AS pos, SUM( nr_neg ) AS neg, SUM( nr_neu) AS neu, 
op , clo  
FROM base1.q  
LEFT JOIN base1.mein ON DATE( mein.timestamp ) = q.date  
AND mein.person_id = q.id  
WHERE mein.person_id = 1  
GROUP BY q.date, q.id  
ORDER BY mein.person_id, q.date DESC 
```

上面的代码应该执行以下操作：我想从我的数据库中加入两个表`base1`，即`q`和`mein`。如果列`date(mein.timestamp)`和列`q.date`重合并且列`mein.person_id`和列重合，则必须以某种方式连接它们`q.id`。`q`我遇到的困难是即使没有条目，我也希望条目在那里`date(mein.timestamp)`，这就是我使用左外连接的原因。
不幸的是，仍然有行被踢出，`date(mein.timestamp)`但没有条目`q.date`。我怎样才能防止这种情况发生并将这些行留在联合表中？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:24:43.750

当您`mein.person_id`在 WHERE 子句中测试 LEFT JOINed 列（在您的情况下）时，您强制该连接表现得好像它是一个 INNER JOIN。相反，将该测试作为连接条件的一部分。

```
SELECT mein.person_id AS per_Id, DATE( mein.timestamp ) AS dates, SUM( nr_pos ) AS pos, SUM( nr_neg ) AS neg, SUM( nr_neu) AS neu, 
op , clo  
    FROM base1.q  
        LEFT JOIN base1.mein 
            ON DATE( mein.timestamp ) = q.date  
                AND mein.person_id = q.id  
                AND mein.person_id = 1  
    GROUP BY q.date, q.id  
    ORDER BY mein.person_id, q.date DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:25:15.560

你的加入应该是

```
LEFT JOIN base1.mein ON DATE( mein.timestamp ) = q.date  
AND mein.person_id = q.id  AND mein.person_id = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:31:37.933

改变

```
WHERE mein.person_id = 1 
```

至

```
WHERE q.id = 1 
```

所以你从 base1.q 中获取所有行，其中 q.id = 1，如果存在任何行，则从 base1.mein 中获取与 mein.timestamp 和 mein.person_id 匹配的相应行

# active-directory - 使用 C# 检索特定的 Active Directory 记录属性

> ID：12200270
> 
> 赞同：0
> 
> 时间：2012-08-30T15:21:52.113
> 
> 标签：active-directory

我被要求设置一个监控活动目录的进程，特别是某些帐户，以检查它们是否没有被锁定，这样如果发生这种情况，支持团队可以得到早期警告。

我找到了一些让我开始的代码，它基本上设置了请求并将它们添加到通知队列中。然后将此事件分配给一个更改事件，并将一个 ObjectChangedEventArgs 对象传递给它。

目前，它遍历属性并将它们写入文本文件，如下所示：

```
private static void NotifierObjectChanged(object sender, 
                                              ObjectChangedEventArgs e)
    {
        if (e.ResultEntry.Attributes.AttributeNames == null)
        {
            return;
        }

        // write the data for the user to a text file...
        using (var file = new StreamWriter(@"C:\Temp\UserDataLog.txt", true))
        {
            file.WriteLine("{0} {1}", DateTime.UtcNow.ToShortDateString(), DateTime.UtcNow.ToShortTimeString());
            foreach (string attrib in e.ResultEntry.Attributes.AttributeNames)
            {
                foreach (object item in e.ResultEntry.Attributes[attrib].GetValues(typeof(string)))
                {
                    file.WriteLine("{0}: {1}", attrib, item);
                }
            }
        }
    } 
```

我想要检查对象，如果特定字段（例如名称）是特定值，则检查 IsAccountLocked 属性是否为 True，否则跳过记录并等待下一个通知到来。我'正在努力如何访问 ResultEntry 的特定属性而不必遍历它们。

我希望这是有道理的 - 请询问我是否可以提供任何其他信息。

谢谢马丁
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:42:49.060

根据您的确切业务需求，这可能会变得很棘手。如果您想更详细地交谈，请离线联系我，我很乐意通过电子邮件/电话/IM 提供帮助。

所以我要注意的第一件事是，根据查询之前的样子，这可能非常昂贵或容易出错（即丢失结果）。这让我有些担心，因为那里的大多数示例代码都会出错。:) 你如何得到改变的东西？虽然这听起来很简单，但在目录领域这实际上是一个有点棘手的问题，因为 AD 支持的语义以及它是一个多主系统的事实，其中写入发生在所有地方（并在事后复制）。其他变量可能是您运行此程序的频率、AD 中数据集的大小等。AD 有一些 API 可以帮助您（想到的大 API 称为 DirSync），但如果您以前没有使用过它，这可能会有些复杂。这就是“

对于您的确切问题，我假设您的结果实际上是 SearchResultEntry （如果不是我可以修改，请告诉我您手头有什么）。如果是这种情况，那么你会发现那个人身上挂着一个属性字段，从那里有 AttributeNames 和 Values。如果你手头有价值观，我想你会从那里看到它是如何工作的，例如：

```
foreach (var attr in sre.Attributes.Values)
{
    var da = (DirectoryAttribute)attr;
    Console.WriteLine(da.Name);
    foreach (var val in da.GetValues(typeof(byte[])))
    {
        // Handle a byte[] val ...
    }
} 
```

正如我所说，如果您手头有 SearchResultEntry 以外的其他内容，请告诉我们，我可以修改代码示例。

# c# - 从我的 C# Web 应用程序打印 ListView

> ID：12200272
> 
> 赞同：0
> 
> 时间：2012-08-30T15:21:55.873
> 
> 标签：c#

我在这里构建 ac# web 应用程序，我有一个 Listview。我想在页面上有一个按钮，单击该按钮将轻松打印列表视图。任何人都知道如何做到这一点？

谢谢 ![在此处输入图像描述](../Images/d985d33e1eb8de4685252ffa86ada47a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:38:51.237

我能想到2个选项：

1.  将其发送到查询字符串中带有 ID（可能是订单号？）的不同页面；从查询字符串中读取订单id，并在页面中输出详细信息。`window.print`然后打电话`window.load`

就像是：

```
Order o = DAL.GetOrderByID(int.Parse(Request.QueryString["OrderID"]));
//output the order in this new page... 
```

在这个新页面上，有这样一行：

```
window.onload=function(){window.print();}; 
```

1.  使用这个[jquery 插件](http://www.bennadel.com/blog/1591-Ask-Ben-Print-Part-Of-A-Web-Page-With-jQuery.htm)来做到这一点。它在页面中创建一个框架并调用`.print`该框架。实现起来似乎很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:59:32.447

尝试在按钮单击事件中添加以下代码。完全希望它会有所帮助。

```
 this.ListView1.DataBind();
    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);
    ListView1.RenderControl(hw);
    string ListViewHTML = sw.ToString().Replace("\"", "'").Replace(System.Environment.NewLine, "");
    StringBuilder sb = new StringBuilder();
    sb.Append("<script type = 'text/javascript'>");
    sb.Append("window.onload = new function(){");
    sb.Append("var printList = window.open('', '', 'left=0");
    sb.Append(",top=0,width=800,height=700,status=0');");
    sb.Append("printList.document.write(\"");
    sb.Append(ListViewHTML);
    sb.Append("\");");
    sb.Append("printList.document.close();");
    sb.Append("printList.focus();");
    sb.Append("printList.print();");
    sb.Append("printList.close();};");
    sb.Append("</script>");
    ClientScript.RegisterStartupScript(this.GetType(), "ListViewPrint", sb.ToString());
    this.ListView1.DataBind(); 
```

# python - 创建不锁定窗口Pyqt4的循环

> ID：12200274
> 
> 赞同：2
> 
> 时间：2012-08-30T15:22:02.043
> 
> 标签：python, user-interface, pyqt4

我正在使用 PyQt4，并且创建了一个带有切换按钮的窗口。当我选择按钮时，我想启动一个尽快更新屏幕的循环。目前，它锁定了我的窗口，我无法再次选择按钮来关闭循环甚至移动窗口。我希望找到一种没有线程的方法。我不能发布我的实际代码，但这基本上就是我现在所拥有的。

```
self.connect(self.pushButton,SIGNAL("toggled(bool)"),self.testLoop)

def testLoop(self, bool):
    while bool:
        print "looping" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:33:28.207

您采用的方法主要取决于您的循环正在执行的任务的性质。

如果您可以将任务分解为非常小的步骤，则可以简单地使用计时器启动循环，然后调用[`processEvents`](http://doc-snapshot.qt-project.org/4.8/qcoreapplication.html#processEvents)每个步骤来更新您的 gui：

```
from PyQt4 import QtGui, QtCore

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.label = QtGui.QLabel('Count = 0', self)
        self.button = QtGui.QPushButton('Start', self)
        self.button.clicked.connect(self.handleButton)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.label)
        layout.addWidget(self.button)
        self._active = False

    def handleButton(self):
        if not self._active:
            self._active = True
            self.button.setText('Stop')
            QtCore.QTimer.singleShot(0, self.runLoop)
        else:
            self._active = False

    def closeEvent(self, event):
        self._active = False

    def runLoop(self):
        from time import sleep
        for index in range(100):
            sleep(0.05)
            self.label.setText('Count = %d' % index)
            QtGui.qApp.processEvents()
            if not self._active:
                break
        self.button.setText('Start')
        self._active = False

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:35:14.830

使用单独的[线程](http://docs.python.org/library/threading.html)进行循环。

```
import threading

self.connect(self.pushButton,SIGNAL("toggled(bool)"),self.on_testLoop)

def on_testLoop(self, bool):
    threading.Thread(target=self.testLoop, args=(bool,)).start()

def testLoop(self, bool):
    while bool:
        print "looping" 
```

我发现另一种非常有用的方法是将函数变成生成器。这使您能够在每次迭代后做一些事情。

```
self.connect(self.pushButton,SIGNAL("toggled(bool)"),self.on_testLoop)

def on_testLoop(self, bool):
    for _ in testLoop(bool):
        # do some stuff, update UI elements etc.

def testLoop(self, bool):
    while bool:
        print "looping"
        yield 
```

我不知道为此使用生成器有多好，因为我对 PyQt 和 gui 编程很陌生，但这对我来说效果很好。

# android - 启动时加载 SharedPreferences 时出错

> ID：12200275
> 
> 赞同：1
> 
> 时间：2012-08-30T15:22:02.100
> 
> 标签：android, sharedpreferences

我显然做错了什么。在我的初始屏幕上，当它决定去哪个活动时，我有以下代码：

```
SharedPreferences getPrefs = PreferenceManager
                        .getDefaultSharedPreferences(getBaseContext());
                boolean disclamerChecked = getPrefs.getBoolean("disclamer", false);
                boolean medicalScreeningChecked = getPrefs.getBoolean("screening", false); 
```

所以，我正在尝试读取 2 Boolean，它在应用程序安装时应该是错误的，并且在安装完成后它应该是永久正确的。

现在，在我的活动中（目前仅免责声明）我有以下内容：

```
private void setDisclamerPropertie() {
    // TODO Auto-generated method stub
    startupPrefs= getSharedPreferences("startupPrefs", MODE_WORLD_WRITEABLE);
    SharedPreferences.Editor editor = startupPrefs.edit();
    editor.putBoolean("disclamer", true);
    editor.commit();
    return;
} 
```

此函数在 On Create 函数中调用，当单击“接受”按钮时，它应该保存共享首选项（或者至少这是我需要发生的）。

按钮有效，它进入下一个活动，然后又进入下一个活动，但是当我重新加载应用程序时，布尔值似乎没有保存，应用程序再次要求确认。

那么，我在哪里写错了，或者在阅读正确的偏好时缺少了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:26:21.217

您正在使用不同的偏好。

```
startupPrefs= getSharedPreferences("startupPrefs", MODE_WORLD_WRITEABLE); 
```

这也应该是：

```
startupPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:26:33.177

您正在读取默认的共享首选项，但写入一个命名的首选项（“startupPrefs”），因此有 2 个单独的共享首选项实例

# javascript - 在 JQuery 事件中查找父元素

> ID：12200277
> 
> 赞同：12
> 
> 时间：2012-08-30T15:22:08.667
> 
> 标签：javascript, jquery

我添加了一个如下的点击事件，并想检查目标是否有特定的父级。

```
$(document).click(function(event){
    // Check here if target has specific parent for example -> #parent
}); 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-30T15:23:10.517

有一个[.parent()](http://api.jquery.com/parent/) dom 遍历方法。

根据 Pointy 的水晶球，你可能想做这样的事情：

```
$(document).click(function(event) {
  if ($(event.target).parents('.selector').length > 0) {
  }
}); 
```

我不确定你为什么要在文档上设置点击处理程序，也许是在寻找事件委托和[.on()](http://api.jquery.com/on/)？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-31T15:48:10.113

我相信这也有效.. AFAIK jQuery 事件在调用事件时使用文字元素而不是 jQuery 对象。基本上`this`应该是具有普通 JavaScript 属性的普通 DOM 元素。

```
$(document).click(function(event)
{
   let myparent = $(this.parentNode); //jquery obj
   let parent = $(this.parentNode)[0]; //plain DOM obj

   let myself = $(this); //jquery obj;
   let $elf = this; //plain DOM obj
}); 
```

注意：有时使用“self”作为变量是不好的/导致与某些库发生冲突，所以我使用了 $elf。$elf 中的 $ 并不特殊；不是 jQuery 约定或类似的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T15:23:49.600

```
$(document).click(function(event){
    var $parent = $(this).parent();

     // test parent examples 
    if($parent.hasClass('someclass')) { // do something }

    if($parent.prop('id') == 'someid')) { // do something }

    // or checking if this is a decendant of any parent

    var $closest = $(this).closest('someclass');

    if($closest.length > 0 ) { // do something }

    $closest = $(this).closest('#someid'); 

    if($closest.length > 0 ) { // do something }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T15:29:27.493

我过去可靠地使用过它：

```
var target = $( event.target ) 
```

这将为您提供对已调用事件的元素的 jQuery 对象的引用。您可以使用相同的方法并查看父级是否为“#parent”，如下所示：

```
var target = $( event.target )
if (target.parent().attr('id') == "#parent") {
    //do something
} 
```

# grails - 在创建域对象之前将子元素添加到域对象上

> ID：12200279
> 
> 赞同：9
> 
> 时间：2012-08-30T15:22:14.777
> 
> 标签：grails, grails-2.1

*[（对不起，如果这是一个菜鸟问题，我在grails 参考资料](http://grails.org/doc/latest/ref/Domain%20Classes)上找不到答案）*

我有以下域层次结构：

**用户**>（有很多）**调查**>（有很多）**SurveyQuestion** >（有很多）**SurveyQuestionResponse**

这是上面的两个：

```
class Survey {

    String surveyName

    static hasMany = [questions: SurveyQuestion]
    static belongsTo = [user:User]
    static constraints = {
    }
}

class SurveyQuestion {

    String question

    static hasMany = [responses : SurveyQuestionResponse]
    static belongsTo = [survey:Survey]

    static constraints = {
    }
} 
```

当我创建调查时，我首先会看到这样的屏幕：

![（民意调查）](../Images/fc49cd5c3ff78b71c9a891d7a966e337.png)

我填写调查名称，然后单击添加调查问题，然后看到下一个屏幕：

![（调查问题）](../Images/493fd58e70153d5ff7de6e9c08e6d01d.png)

但它需要设置一个尚未完成的调查。

**问题**：我是否必须先创建并保存调查，然后对其进行编辑并添加调查问题（每个问题都需要单独创建和保存，然后才能创建响应），或者有没有办法像我一样添加子对象m 创建父对象？

我想使用动态脚手架，所以我不必手动创建控制器和视图。

问题和答案是完全独立的，不会在整个层次结构中重复使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T11:22:17.903

您应该使用命令对象。这样您就可以在创建父元素时轻松地添加子元素。例如

```
class CreateSurveyCommand {
     String surveyName
     List<SurveyQuestion> surveyQuestions = 
         org.apache.commons.collections.list.LazyList.decorate(
             new ArrayList(), 
             new org.apache.commons.collections.functors.InstantiateFactory(SurveyQuestion.class))
} 
```

在视图中（假设`index.gsp`）你有类似的东西：

```
<g:textField name="surveyName" value="${cmd?.question}" />
<g:each in="${cmd.surveyQuestions}" var="surveyQuestion" status="i">
    <g:textField
        name="surveyQuestions[i].question" 
        value="${cmd?.surveyQuestions[i].question}" />
</g:each>
<g:actionSubmit action="addQuestion"/> 
```

在`addQuestion`您的控制器中执行操作：

```
def addAction(CreateSurveyCommand cmd) {
    cmd.surveyQuestions.add(new SurveyQuestion())
    render(view:"index", model: [cmd: cmd])
} 
```

编辑是另一个主题，但工作方式相同。

看看这篇博文：

[http://blog.andresteingress.com/2012/06/29/groovy-2-0-love-for-grails-command-objects](http://blog.andresteingress.com/2012/06/29/groovy-2-0-love-for-grails-command-objects)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T15:37:33.023

使用该用户界面，您应该创建、保存和添加。更好的方法是创建主/详细用户界面。你可以在这里看到这种方法：

[https://github.com/leadVisionary/Grails-Survey-Module](https://github.com/leadVisionary/Grails-Survey-Module)

[http://programmingitch.blogspot.com/2009/10/data-binding-for-one-to-many.html](http://programmingitch.blogspot.com/2009/10/data-binding-for-one-to-many.html)

[http://omarello.com/2010/08/grails-one-to-many-dynamic-forms/](http://omarello.com/2010/08/grails-one-to-many-dynamic-forms/)

[http://java.dzone.com/articles/creating-master-detail-forms](http://java.dzone.com/articles/creating-master-detail-forms)

[http://kapilpandit.wordpress.com/2009/02/25/complex_form_grails/](http://kapilpandit.wordpress.com/2009/02/25/complex_form_grails/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T14:53:23.267

如果您在类中声明`questions`为 a ，那么您的视图将能够通过索引访问它们。`List``Survey`

```
List questions
static hasMany = [questions: SurveyQuestion] 
```

在您的 GSP 表格中，您可以使用如下内容：

```
<g:textField
    name="questions[0].question"
    value="${surveyInstance?.questions?.size() > 0 ? surveyInstance?.questions[0]?.question : ''}"/> 
```

该值的三元值有点粗略，但可以很容易地隐藏在您自己的标签中。

如果您确实需要使用动态脚手架，您可以覆盖单个视图或用于生成视图的模板。或者，您可以使用[字段插件](http://freeside.co/grails-fields)来呈现`questions`属性的输入。

我创建了一个简单的应用程序，此时一切似乎都可以正常工作。我原以为必须编写一个`PropertyEditor`实现来增加列表，但似乎 Grails 2.1 会为你做这件事。

重新排序或删除问题需要更多的实验，但更新问题是可行的，即更改问题文本而不是`SurveyQuestion`创建新实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T15:42:40.897

如果您要重复使用这些问题...也许您不应该使用 belongsTo =[survey:Survey]

然后，如果您没有这种关系，您可以创建一个用于创建问题的模板，并将它们添加到调查对象中的问题集合中，然后再保存！

# xaml - CoreDispatcher.ProcessEvents() 导致间接崩溃？

> ID：12200280
> 
> 赞同：1
> 
> 时间：2012-08-30T15:22:18.197
> 
> 标签：xaml, microsoft-metro, windows-runtime, c++-cx

我必须将一些遗留代码移植到 Metro/WinRT（使用 C++/CX）。因为这些对话框提供了它们自己的消息循环（使用`DialogBoxParam()`），所以调用代码将一直等到用户单击了消息框上的按钮。

我目前正在尝试为使用 XAML 和弹出控件的旧消息框类编写替代品。要重现相同的行为，我必须在调用线程中等待，但还必须保持 UI 响应。我发现，它`CoreDispatcher::ProcessEvents()`可以在循环中使用，以继续处理事件（是的，我意识到这不是很漂亮，但我不想将我们所有的遗留代码更改为新的线程模型）。但是，我遇到了一个让我的应用程序不断崩溃的问题。

这是一个重现该问题的最小示例（只需创建一个 XAML 应用程序并将其连接到一个按钮）：

```
void CPPXamlTest::MainPage::Button_Click_1(Platform::Object^ sender, Windows::UI::Xaml::RoutedEventArgs^ e)
{
    bool cancel = false;

    auto popup = ref new Popup();
    auto button = ref new Button();
    button->Content = "Boom";
    auto token = (button->Click += ref new RoutedEventHandler([&cancel] (Object ^, RoutedEventArgs ^) { cancel = true; }));
    popup->Child = button;
    popup->IsOpen = true;

    while (!cancel)
    {
        Window::Current->Dispatcher->ProcessEvents(CoreProcessEventsOption::ProcessOneAndAllPending);
    }

    popup->IsOpen = false;
    button->Click -= token;
} 
```

这似乎适用于使用两个按钮打开和关闭弹出窗口的前一两次尝试。然而，经过几次尝试，应用程序将立即崩溃`Windows.UI.Xaml.dll`，同时尝试取消引用空指针。我也可以在 C# 中重现它（使用几乎相同的代码）。

有谁知道，这里发生了什么？或者对替代方法的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T15:29:30.533

对我来说很好的解决方法是替换该行：

```
Window::Current->Dispatcher->ProcessEvents(CoreProcessEventsOption::ProcessOneAndAllPending); 
```

和：

```
auto myDispatchedHandler = ref new DispatchedHandler([&](){
   Window::Current->Dispatcher->ProcessEvents(CoreProcessEventsOption::ProcessOneAndAllPending);
}); 
dispatcher->RunAsync(CoreDispatcherPriority::Normal,myDispatchedHandler); 
```

有关更多信息，请参阅MSDN 上[的这篇文章](http://social.msdn.microsoft.com/Forums/windowsapps/en-US/ce522990-90ed-4f70-a8d9-dfcce97abc82/incompatibility-report-dispatcherprocessevents-is-no-longer-allowed-in-background-calls)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:53:53.770

如果有人感兴趣：几天后我在 MSDN 论坛上问了同样的问题，并得到了微软员工的回复：

[http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/11fa65e7-90b7-41f5-9884-80064ec6e2d8/](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/11fa65e7-90b7-41f5-9884-80064ec6e2d8/)

显然，这里的问题是由在事件处理程序中调用 ProcessEvents 引起的嵌套消息循环。WinRT 似乎不支持这一点，但不是以明确定义的方式失败，而是会或可能导致崩溃。

唉，这是我能找到的最好也是唯一的答案，所以我最终解决了这个问题，将事件处理程序（和许多其他代码）分派到另一个线程中。然后，我可以模拟`DialogBox()`/ `DialogBoxParam()`（在主线程之外）的等待行为，方法是等待用户单击/点击我的 XAML“对话框”弹出窗口上的按钮时发出的信号。

# .htaccess - .htacces 文件的内部服务器错误

> ID：12200285
> 
> 赞同：0
> 
> 时间：2012-08-30T15:22:27.553
> 
> 标签：.htaccess

我需要你的帮助，因为 .htacces 文件，当我把它放在服务器上时，我得到内部服务器错误，当我删除它时，我可以看到网站在线，但由于链接可能存在问题，链接标题变成了链接。 html，当然在关注它之后找不到页面（正常，因为真正的链接是 mysite/offers.php?id=

这是 .htacces 的副本：

```
IndexIgnore  */.??* *~ *# */HEADER* */README* */_vti*

php_value post_max_size 96M

php_value upload_max_filesize 96M

php_value max_execution_time 0

php_value memory_limit 96M

# Changement d'extension

RewriteCond %{HTTP_HOST} !^www.mysite.com$

RewriteRule ^(.*) http://www.mysite.com/$1 [QSA,L,R=301]

<Limit GET POST>

order deny,allow

deny from all

allow from all

</Limit>

<Limit PUT DELETE>

order deny,allow

deny from all

</Limit>

AuthName mysite.com

AuthUserFile /home/larbi/public_html/_vti_pvt/service.pwd

AuthGroupFile /home/larbi/public_html/_vti_pvt/service.grp

RewriteEngine on

RewriteRule ^([0-9]+)-(.*)-.*$   offres.php?lang=$2&id=2_$1 [L]

RewriteRule ^prestations.php$   offres.php?id=2_1 [L]

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule (.*) /erreur_404.html 
```

请等待你的回答，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:01:00.990

您的 htaccess 文件没有任何问题，但请确保以下几点：

1.  确保您启用了 mod_rewrite。它应该是 httpd.conf 中的一行，如下所示：

    ```
    LoadModule rewrite_module modules/mod_rewrite.so 
    ```

2.  确保存在一个文件`/erreur_404.html`，如果该文件丢失，重写引擎将循环。

3.  此外，确保`/offres.php`存在，如果该文件丢失，重写引擎将重定向到`/erreur_404.html`.

# postgresql - 以下 Postgresql 查询有什么问题？

> ID：12200287
> 
> 赞同：-2
> 
> 时间：2012-08-30T15:22:39.330
> 
> 标签：postgresql, postgresql-9.1

查询：

```
CREATE TABLE unapprovedteaminfo (
UnapprovedTeamInfoID        BIGSERIAL NOT NULL,
EmailVerified               boolean NOT NULL DEFAULT FALSE,
VerificationCode            char (20) NOT NULL,
PRIMARY KEY (UnapprovedTeamInfoID)
); 
```

错误：

```
ERROR: syntax error at or near "(" Position: 160 [ERROR:0, SQLSTATE:42601] 
```

我可以补充一点，通过“位置”（而不是列和行）指出错误的位置是令人难以置信的烦人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:26:06.367

DDL 查询没有任何问题。我刚刚在我的 9.1.5 安装中执行它没有问题。

原因必须不在您的问题中。

顺便说一句：我假设您知道，未引用的标识符被转换为小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:29:54.457

我不确定您遇到什么错误，因为同一个查询对我来说非常好。

看看[这里](http://sqlfiddle.com/#!1/78859)

可能还有其他这里没有提到的原因。

您在此处提到的错误发生在以下情况：

> 注释未使用注释分隔符正确关闭。注释被视为在源文件末尾关闭。

[在此处](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=%2Frzala%2Frzalaml.htm)查看您的错误的描述。

# php - 带有 PHP 类的 jQuery 文件上传

> ID：12200293
> 
> 赞同：0
> 
> 时间：2012-08-30T15:23:01.527
> 
> 标签：php, jquery

我正在使用来自 blueImp 的 jQuery 文件上传将文件上传到 web 目录。在大多数情况下，它可以正常工作，但它始终会删除文件。我将以下内容用于 ajax 请求。这会遍历每个上传的文件和 images.php 写入数据库的内容。

```
//On successfull upload of pages
    $('#albumPages.fileupload').bind('fileuploadalways',function(e,data) {
        //Loop through each page and return object and write to DB
        $.each(data.files, function (index, file) {
            var filename = data.result[0].name;
            $.ajax({ 
                type: "POST",
                url: "../queries/images.php",
                data: {file: filename}
            });
        });
        //CSS to change GUI

        $('#albumPages.fileupload').bind('fileuploadstop' , function(e,data) {
            $('.modal_uploader_pages').css("display","none");
            $('.modal_uploader_back').css("display","block");
            $('.breadcrumbs').css("background-position","left 128px");
        });
    }); 
```

**数据库写入**

```
INSERT INTO galleryimage 
            (
                galleryId
                ,image
                ,OrgImageName
                ,clientRef
                -- ,sort
                ,layout
            ) VALUES (
                '{$galleryID}'
                ,'{$imageID}'
                ,'{$originalName}'
                ,'{$clientRef}'
                -- ,'{$order}'
                ,'{$galleryLayout}'
            )" 
```

我使用 Chrome 开发人员工具的“网络”选项卡收到的错误是 500 内部服务器错误。有关解决此问题的任何见解或方向。我已经通过 SSH 连接到服务器以检查 php 错误日志，但没有关于此事件的任何内容。

# java - java新手。在 while 循环中使用扫描仪类时出错？

> ID：12200299
> 
> 赞同：2
> 
> 时间：2012-08-30T15:23:18.510
> 
> 标签：java, io

所以我的第一个任务是制作一个简单的问答程序。用户提出问题，我生成答案。我以前从未做过java。这是我的输入类：

```
//msg is the msg I output (answer to their question).
//Function returns inputStr which is the question the user asks.
public String getInput(String msg) {
    System.out.println(msg);
    Scanner theInput = new Scanner(System.in);
    String inputStr = theInput.nextLine(); //ERROR HERE ON 2nd ITERATION!
    theInput.close();
    if (inputStr.equals("exit")) {
        System.out.println("GoodBye!"); 
        System.exit(0);
    }
    return inputStr;
} 
```

在 while 循环中调用 this 的函数如下：

```
 //inputSource is an object that has the getInput method. It is an argument for this function.
    String userQuestion = inputSource.getInput(firstLine);
    String initMsg = processMessage(userQuestion);
    while(!initMsg.equalsIgnoreCase("GoodBye")){
        userQuestion = inputSource.getInput(initMsg);
        //Doesn't get to here.
        initMsg = processMessage(userQuestion);
    }
    System.out.println(initMsg); 
```

错误：

```
Exception in thread "main" java.util.NoSuchElementException: No line found
at java.util.Scanner.nextLine(Scanner.java:1516) 
```

所以基本上，发生的情况是它问了一次问题，然后它给出了一次答案，但是当它进入 while 循环时，它会卡在指定的点。帮助不大。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T15:28:49.077

我注意到一件事：您可能不应该调用`close()`扫描仪。根据[JavaDocs](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#close%28%29) ，您正在关闭底层输入流（标准输入） 。

# visual-studio-2010 - 是否可以在 VS 构建事件中使用条件编译符号？

> ID：12200301
> 
> 赞同：11
> 
> 时间：2012-08-30T15:23:29.883
> 
> 标签：visual-studio-2010, conditional-compilation, build-events

例如，我有一个 Visual Studio 项目，其配置名为“MyConfig”，并且`MY_CONFIG_SYMBOL`定义了编译符号。

是否有宏或命令来查看是否`MY_CONFIG_SYMBOL`在构建前/构建后事件中定义？类似的东西`#if MY_CONFIG_SYMBOL`，但对于构​​建事件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-03-16T16:21:02.520

我终于找到了答案。以下工作完美：

```
if "$(DefineConstants.Contains('DEBUG'))" == "True" <command> 
```

这适用于构建中定义的任何常量，但请注意该常量区分大小写（'DEBUG' != 'Debug'）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:15:51.447

如果您的意思是基于构建类型（调试或发布）的条件构建，那么是的。查看这些线程：

[Visual Studio 2008 中的条件生成后事件](http://blogit.create.pt/blogs/ricardocosta/archive/2008/02/20/Conditional-Post_2D00_build-event-in-Visual-Studio-2008.aspx)

[如何仅为调试构建运行 Visual Studio 构建后事件](https://stackoverflow.com/questions/150053/how-to-run-visual-studio-post-build-events-for-debug-build-only)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T19:05:13.420

好吧，这不是一个解决方案，只是试图通过分享一些实验来推进状态。（我还没有找到测试条件编译符号的方法。）

这是巩固开关调试打开和关闭的一种方式：

```
<#@ include file="debug.incl" #>`

some text1
<# if ( xdebug ) { #>
    foo = bas;
<# } #>
more text 
```

其中 debug.incl 包含：

```
<# 
bool xdebug = true;
#> 
```

第一个文件中的条件 (if) 能够看到 xdebug 的值，因此输出会根据`xdebug`debug.incl 中的设置进行更改。

然而，遗憾的是，输出文件并没有根据 debug.incl 的更改重建，尽管它明显包含在内。甚至清理和重建似乎也不会触发生成，因此需要一些单独的构建结构......

（我确实尝试过 debug.tt 而不是 debug.incl 无济于事，切换到 .incl 以便 debug.cs 不是由 debug.tt 创建的。）

* * *

这并没有很好地工作，因为它没有看到条件编译符号，但实际上确实打开了模板调试属性！

```
<#
#if DEBUG 
bool xdebug = true;
#else
bool xdebug = false;
#endif
#>

some text1
<# if ( xdebug ) { #>
    foo = bas;
<# } #>
more text 
```

与`<#@ template debug="true" #>`vs.`<# template debug=false #>`您分别获得或不获得条件输出。

# android - 上下文中的 StackOverflowError

> ID：12200303
> 
> 赞同：0
> 
> 时间：2012-08-30T15:23:46.730
> 
> 标签：android, sqlite, android-context, sqliteopenhelper

我收到“java.lang.StackOverflowError”错误。

这是代码：

```
08-30 10:34:49.528: E/AndroidRuntime(22897): FATAL EXCEPTION: main
08-30 10:34:49.528: E/AndroidRuntime(22897): java.lang.StackOverflowError
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications.java:28)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.RejectedNotifications.<init>(RejectedNotifications.java:27)
08-30 10:34:49.528: E/AndroidRuntime(22897):    at com.silm.database.ApprovedNotifications.<init>(ApprovedNotifications 
```

关于该项目：

为什么我想做：

我想单击批准按钮将通知/消息保存到批准的通知/消息数据库中。但我注意到，当我点击 Aprrove 按钮时，它被插入，当点击 Rejected 按钮时，它也被插入到 Rejected 表中。因此，我检查是否不在拒绝表中，然后将其插入到批准表中。那时一切都很好，但是当我做同样的事情时（从批准中删除通知并插入拒绝），然后我得到了 StackOverFlow 错误。

这是生成错误的代码：

```
public RejectedNotifications(Context context) {
        super(context, TABLE_NAME_REJECTED_NOTIFICATION, null, DATABASE_VERSION);
        ***approved = new ApprovedNotifications(context);***
    } 
```

表 Approved 的另一个数据库处理程序类似于关于代码：

```
public ApprovedNotifications(Context context) {
        super(context, TABLE_NAME_APPROVED_NOTIFICATION, null, DATABASE_VERSION);
        rejected = new RejectedNotifications(context);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:26:45.823

您已经在代码中创建了一个无限循环。每次创建实例时`ApprovedNoficiations`，它都会创建一个`RejectedNotifications`实例，然后再创建另一个`ApprovedNotifications`实例，依此类推......

这两个类之间的关系是循环的。如果您希望两个实例相互引用，您可能需要先创建一个，然后将其作为参数传递给第二个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:28:07.383

你有一个非常清晰的无限递归。`ApprovedNotifications`的构造函数创建一个新的`RejectedNotifications`. `RejectedNotifications`构造函数创建一个新`ApprovedNotifications`的，等等。

# java - 你能确定 Java 集合的初始容量吗？

> ID：12200312
> 
> 赞同：1
> 
> 时间：2012-08-30T15:24:22.073
> 
> 标签：java, collections

在 Java 中，有什么方法可以确定用于创建[Collection](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html)的初始容量？

因此，当这样创建集合时：

```
List<Object> objectList = new ArrayList<Object>(5); 
```

有什么方法可以告诉它`objectList`是用 5 的初始容量创建的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T15:27:44.077

不，ArrayList 类至少[不会跟踪](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#127)传入的 originalCapacity 值。

如果您担心需要调整内部数组大小的 ArrayList 操作，您可以随时调用`ArrayList.ensureCapacity(int)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:31:06.453

据我在 API 中看到的，不存在这样的方法。

但是您可以将 ArrayList 子类化，如下所示：

```
class MyArrayList<T> extends ArrayList<T> {
    private final int initialCapacity;

    public MyArrayList(final Integer initialCapacity) {
        super(initialCapacity);

        this.initialCapacity = initialCapacity;      
    }

    public Integer getInitialCapacity() {
        return this.initialCapacity;
    }
} 
```

然后你可以这样做：

```
 final List<Integer> li = new MyArrayList<Integer>(5);
    ((MyArrayList) li).getInitialCapacity(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:33:03.130

你不能。即使您将项目添加到集合中，“toArray(...)”生成的数组也只是添加的项目的长度。此外， size() 只会返回添加的元素数。

# c++ - 基于范围的 for 循环可以知道结尾吗？

> ID：12200313
> 
> 赞同：17
> 
> 时间：2012-08-30T15:24:25.857
> 
> 标签：c++, stl, c++11

给定最小的 C++11 STL 示例：

```
set<int> S = {1,2,3,4};
for(auto &x: S) {    
   cout << x;
   cout << ",";
} 
```

有没有办法`x`在结束之前检查是否是正确的？此示例中的目标是输出`1,2,3,4`而不是最后的逗号。目前我使用带有两个迭代器的标准 for 循环，

```
set<int>::const_iterator itr;
set<int>::const_iterator penultimate_end_itr = --S.end();
for(itr=S.begin(); itr!=penultimate_end_itr;++itr) 
    cout << (*itr) << ',';
cout << (*penultimate_end_itr); 
```

哪个有效，但非常麻烦。有没有办法在基于范围的 for 循环中进行检查？

**编辑：**问题的重点*不是*打印出逗号分隔的列表。我想知道基于范围的 for 循环是否对列表中的倒数第二个元素有任何了解（即它是否在末尾之前一个）。给出了最小的例子，所以我们都有一个共同的代码块可以讨论。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-30T15:28:36.763

基于范围的 for 循环的真正目的是忘记迭代器。因此，它们只允许您访问当前值而不是迭代器。下面的代码会为你做吗？

```
set<int> S = {1,2,3,4};

std::string output;
for(auto &x: S) {    
   if (!output.empty())
       output += ",";
    output += to_string(x);
  }

cout << output; 
```

**编辑**

另一种解决方案：您可以比较值的地址，而不是比较迭代器（就像对“正常” for 循环所做的那样）：

```
set<int> S = {1,2,3,4};
auto &last = *(--S.end());
for (auto &x : S)
{
    cout << x;
    if (&x != &last)
        cout << ",";
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-30T16:51:23.703

[Boost.Range](http://www.boost.org/doc/libs/1_51_0/libs/range/doc/html/range/reference/utilities/iterator_range.html)可以在这里提供帮助：

```
if (std::begin(S) != std::end(S)) {
    std::cout << *std::begin(S);
    for (const auto &x: boost::make_iterator_range(std::next(std::begin(S)), std::end(S))) {
        std::cout << ", " << x;
    }
} 
```

一个更灵活的方法是索引范围，使用[`boost::adaptors::indexed`](http://www.boost.org/doc/libs/1_56_0/libs/range/doc/html/range/reference/adaptors/reference/indexed.html)（自 Boost 1.56 起）：

```
for (const auto &element: boost::adaptors::index(S)) {
    std::cout << (element.index() ? ", " : "") << element.value();
} 
```

在 1.56 之前的 Boost 版本中`boost::adaptors::indexed`不起作用，但您可以轻松编写类似的工作：

```
template <typename... T>
auto zip(const T&... ranges) -> boost::iterator_range<boost::zip_iterator<decltype(boost::make_tuple(std::begin(ranges)...))>>
{
    auto zip_begin = boost::make_zip_iterator(boost::make_tuple(std::begin(ranges)...));
    auto zip_end = boost::make_zip_iterator(boost::make_tuple(std::end(ranges)...));
    return boost::make_iterator_range(zip_begin, zip_end);
}

template<typename T>
auto enumerate(const T &range) -> boost::iterator_range<boost::zip_iterator<boost::tuple<
    boost::counting_iterator<decltype(boost::distance(range))>, decltype(std::begin(range))>>>
{
    return zip(boost::make_iterator_range(boost::make_counting_iterator(0),
        boost::make_counting_iterator(boost::distance(range))), range);
}

for (const auto &tup: enumerate(S)) {
    std::cout << (tup.get<0>() ? ", " : "") << tup.get<1>();
} 
```

这是使用[c++11](https://stackoverflow.com/questions/8511035/sequence-zip-function-for-c11)`zip`的Sequence-zip 函数中的函数吗？

# php - 插入 Schema.org 属性：JQuery 还是 DOMDocument？

> ID：12200321
> 
> 赞同：0
> 
> 时间：2012-08-30T15:24:48.010
> 
> 标签：php, jquery, wordpress, domdocument, schema.org

我的 Wordpress 插件将架构属性插入到页面的源代码中。到目前为止，我使用 DOMDocument 来完成这项工作。

```
$imgs = $doc->getElementsByTagName('img');
foreach ($imgs as $img) {
    $img->setAttribute('itemprop', 'image');
} 
```

因为我已经在同一个插件中使用了 JQuery，所以我想用这个替换这个函数。

```
$('img').attr('itemprop', 'image'); 
```

我更喜欢 JQuery 的原因是：我注意到无效的 HTML 语法会破坏 DOMDocument 方法。由于我不能指望插件的其他用户只使用有效的 HTML，我禁用了该功能的错误报告。这样做我感觉不舒服，而且 JQuery 函数似乎工作得更优雅（在我看来！）另外，我还没有找到一种将属性插入到 body-tag 中的方法，我只能添加属性到身体内的标签（我想知道你是怎么做到的！）

然而，JQuery 函数有一个缺点——这最终会导致我的问题。我注意到插入的属性不会显示在 Firefox 或 Chrome 的源视图中。这可能是因为 JQuery 在页面呈现后插入了这些。我可以在 Firebug 和 Chrome 检查器中看到项目属性。

现在。

我对爬虫的工作原理没有太多了解，如果他们愿意/可以执行 Javascript。如果他们不这样做，那么为此使用 JQuery 是没有意义的。

你怎么看，什么*更好*？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T05:12:54.903

通过使用丰富网页摘要测试工具，您将准确了解爬虫所看到的内容： [http ://www.google.com/webmasters/tools/richsnippets](http://www.google.com/webmasters/tools/richsnippets)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T05:22:08.700

爬虫不会读取 jQuery 插入的元数据。您需要在发送 http 响应之前添加此内容。

可以通过指定正确的文档类型来修复 DOMDocument 中断。无论如何，后渲染 javascript 解决方案是不够的，因为元数据对搜索引擎是不可见的。

# jquery - 我的jQuery代码有些麻烦

> ID：12200322
> 
> 赞同：0
> 
> 时间：2012-08-30T15:24:53.470
> 
> 标签：jquery

我在这段代码中遇到了一些麻烦，我想判断`next().children()`div 是否没有长度，然后执行 ajax 要求。但它总是使 ajax 需要即使 div 有内容。

这是html代码：

```
<noscript>
<style>
.more{display:none;}
</style>
</noscript>
<!-- main content -->
<p class="click hidden" rel="12345">View more</p>
<div class="more">
    <h5>Relative post</h5>
    <div class="relative-post"></div>
    <!-- comment area -->
</div>
<!-- main content -->
<p class="click hidden" rel="23456">View more</p>
<div class="more">
    <h5>Relative post</h5>
    <div class="relative-post"></div>
    <!-- comment area -->
</div> 
```

这是jquery代码：

```
jQuery(document).ready(function(){
    $(".click").live('click',function() {
        if($(this).next('.more').is(':visible')){
            $(this).next('.more').css('display','none');
        }else{
            $(this).next('.more').css('display','block');
        }
        if($(this).next('.more').children('.relative-post:has(*)').length){
            }else{
            var $this = $(this);
            var item_id = $this.attr('rel');
            $.ajax({
                url: "process",
                dataType: "html",
                type: 'POST', 
                data: 'post=' + item_id, 
                cache: false,
                success: function(data){ 
                    $this.next('.more').children('.relative-post').html(data);
                }
            }); 
                    }
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:35:46.937

```
$(function() {
    $(document).on('click', '.click', function() {
        var next = $(this).next('.more');
        next.toggle(!next.is(':visible'));

        if (next.children('.relative-post:empty').length) {
            var item_id = $(this).attr('rel');
            $.ajax({
                url: "process",
                dataType: "html",
                type: 'POST',
                data: {post: item_id},
                cache: false,
                success: function(data) {
                    next.children('.relative-post').html(data);
                }
            });
        }
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/M5hfH/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:28:01.333

尝试

`if($(this).next('.more').children('.relative-post').html().length){`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:31:31.640

替换代码

```
if($(this).next('.more').children('.relative-post:has(*)').length) 
```

有以下

```
 if($(this).next('.more').children('.relative-post').html()) 
```

# python - 对 mod_wsgi 3.3 使用“make”时出错

> ID：12200323
> 
> 赞同：0
> 
> 时间：2012-08-30T15:25:02.957
> 
> 标签：python, apache, mod-wsgi

尝试`make`在 CentOS x86_64 上运行 mod_wsgi 3.3 编译时出现以下错误：

```
/usr/local/include/python2.6/pyport.h:694:2: error: #error "LONG_BIT definition
  appears wrong for platform (bad gcc/glibc config?)." 
```

设置信息：

我的配置脚本：

```
./configure --prefix=/usr/local  --with-python=/usr/local/bin/python2.6
  --with-apxs=/usr/sbin/apxs 
```

制作：

```
LD_RUN_PATH=/usr/local/lib make

file /usr/local/bin/python2.6:
/usr/local/bin/python2.6: ELF 64-bit LSB executable, AMD x86-64, version 1 (SYSV), for GNU/Linux 2.6.9, dynamically linked (uses shared libs), not stripped
file /usr/sbin/httpd:
/usr/sbin/httpd: ELF 64-bit LSB shared object, AMD x86-64, version 1 (SYSV), for GNU/Linux 2.6.9, stripped 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:54:21.510

您的 Python 安装似乎没有正确安装 32 位和 64 位。

# xml - SUM() XML 的不同节点

> ID：12200325
> 
> 赞同：2
> 
> 时间：2012-08-30T15:25:09.850
> 
> 标签：xml, xslt, xpath, sum, bi-publisher

我在 BI Publisher 中有一个如下所示的 XML-

```
<ROW1>
  <TOTAL_RETAIL>10.95</TOTAL_RETAIL>
  <TOTAL_TAX> 1.8</TOTAL_TAX>
  <TOTAL_SHIPPING>7.95</TOTAL_SHIPPING>
</ROW1> 
```

`<ROW1>`不重复。现在，据我所知，`SUM`我可以使用 XPath 函数`sum()`，如`<?sum(.//TOTAL_RETAIL)?>`. 这将`TOTAL_RETAIL`仅对节点的值求和，我想要 、 和`TOTAL_RETAIL`的`TOTAL_TAX`总和`TOTAL_SHIPPING`。有没有办法我可以编写`sum`函数来实现这一点。

注意 - 它不能以编程方式处理，即使用变量等，因为它在报告模板中并且必须定义，因为`<?sum(...)?>`此值将映射到 Excel 报告模板中的特定单元格。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T15:28:30.660

尝试

```
<?sum(.//TOTAL_RETAIL | .//TOTAL_TAX | .//TOTAL_SHIPPING)?> 
```

`|`是联合运算符，因此您传递给的参数`sum()`是三个子表达式的联合。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T15:30:11.630

```
sum(.//TOTAL_RETAIL | .//TOTAL_TAX | .//TOTAL_SHIPPING) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-01T06:02:37.930

您也可以尝试在每个节点上拆分总和，它的工作原理如下：

```
<?sum(.//TOTAL_RETAIL) + sum(.//TOTAL_TAX) + sum(.//TOTAL_SHIPPING)?> 
```

如果您有 NULL 值或空节点，请使用此过滤器确保 sum 函数始终有效：`sum(.//TOTAL_RETAIL[.!='']) + ...etc`

# xml - RestSharp 双嵌套元素未被反序列化

> ID：12200352
> 
> 赞同：1
> 
> 时间：2012-08-30T15:26:34.493
> 
> 标签：xml, serialization, restsharp

所以我试图使用来自 RestSharp 的默认 XmlDeserializer 来反序列化以下 XML 结构。对于我的生活，我根本无法让“精选”被反序列化。

```
<PlayerList>
   <Player>
      <PlayerName>Name</PlayerName>
      <PlayerRank>5</PlayerRank>
      <Picks>
         <PickID>1</PickID>
         <Status>Active</Status>
         <CreatedDate>2012-08-30 09:43:38</CreatedDate>
      </Picks>
      <Picks>
         <PickID>2</PickID>
         <Status>Disabled</Status>
         <CreatedDate>2012-08-30 09:49:33</CreatedDate>
      </Picks>
   </Player>
</PlayerList> 
```

我最接近的是在“玩家”类中将它们定义为......

```
public class Player {
    /*other properties*/
    public List<Picks> Picks { get; set; }
} 
```

它确实返回了一个“Picks”对象，其所有属性都设置为 null（或 DateTime 最小值）。

构造可序列化 C# 类以获取从每个 Picks 返回的数据的正确方法是什么？我想知道它是否与具有复数名称的“Picks”对象有关......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:53:55.767

终于明白这是什么问题了。使它起作用所需的更改是对“播放器”类进行这些更改...

```
public class Player {
    /* other properties */
    List<Picks> PickList { get; set; }
} 
```

出现此问题是因为 RestSharp 感到困惑，因为属性的名称（“Picks”）与它试图反序列化的对象类型（“Picks”）相同。

# delphi - Delphi 7 应用程序和 Microsoft Security Essentials

> ID：12200353
> 
> 赞同：5
> 
> 时间：2012-08-30T15:26:36.557
> 
> 标签：delphi, delphi-7, delphi-xe2, ms-security-essentials

我们有一个**Delphi 7 应用程序**在许多客户端机器上运行。最近，一些客户端计算机开始使用 Microsoft Security Essentials。它开始将我们的可执行文件识别为恶意软件并立即将其关闭。MS Security Essentials 显示的消息是：

***“Security Essentials 在您的 PC 上检测到它无法识别的项目......”***

奇怪的是它并不总是出现在应用程序的相同选项中。您可以在后续登录时执行相同的操作，有时它会起作用，而有时安全要素会将其关闭。这使得在我们的应用程序中缩小到特定原因变得非常困难。

我尝试使用提升的帐户权限运行该应用程序，但仍然能够使其失败。运行同一应用程序的 Delphi XE2 编译时，我无法复制该问题。

**关于寻找什么的任何想法？** 我们确实在努力避免将我们的应用程序添加到 Security Essentials 排除列表中。我们的应用程序从未被各种安全程序（norton、mcaffee 等）识别为问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:37:49.263

我曾经在使用 Delphi(7) 构建的可执行文件中遇到过类似的问题，尽管它与 Delphi-7 无关。恰好可执行文件的某些部分与某些病毒签名匹配，或者 AV 启发式扫描怀疑可执行文件有问题。您可以尝试的一件事是更改一些编译器设置，例如调试选项。更改调试信息或使用调试 DCU 可能会导致最终可执行文件中的字节序列略有不同。

# mysql - 如何按天对 MySQL 表进行分区？

> ID：12200359
> 
> 赞同：2
> 
> 时间：2012-08-30T15:26:45.373
> 
> 标签：mysql, database

我正在运行 MySQL 5.1 并将 Web 日志中的数据存储到表中。有一个日期时间列，我想按天分区。每天晚上我都会将前一天的新数据添加到表中，这就是我想按天分区的原因。它通常是几百万行。我想按天进行分区，因为 MySQL 查询通常需要 20 秒才能完成。

**简而言之，我想按每天进行分区，因为用户可以单击日历来获取包含一天数据的 Web 日志信息。数据跨越数百万行（一天）。**

我在很多分区文章中看到的问题是您必须明确指定要分区的值是什么？我不喜欢这种方式，因为这意味着我必须每晚更改表才能添加额外的分区。是否有内置的 MySQL 功能可以自动为我执行此操作，或者我是否必须编写一个 bash 脚本/cron 作业来每天晚上为我更改表？

例如，如果我要遵循以下示例： [http ://datacharmer.blogspot.com/2008/12/partition-helper-improving-usability.html](http://datacharmer.blogspot.com/2008/12/partition-helper-improving-usability.html)

在一年内，我将拥有 365 个分区。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-11-26T04:45:54.263

索引对于任何表都是*必须的。*索引的详细信息来自`SELECTs`您拥有的；让我们看看他们。

经验法则：

*   不要对少于一百万行的表进行分区
*   不要使用超过 50 个分区。
*   如果您在几天/几周/几个月后“清除旧数据”，请参阅[我的博客](http://mysql.rjweb.org/doc.php/partitionmaint)以获取有关如何执行此操作的代码。
*   `PARTITION BY RANGE()`是唯一有用的分区机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:34:27.877

我试过一次。我最终创建了一个 cron 作业来定期（每月一次）进行分区。请记住，每个表最多有 1024 个分区 (http://dev.mysql.com/doc/refman/5.1/en/partitioning-limitations.html)。

顺便说一句，我可能不会推荐它。出于我的需要，我发现这在任何需要跨分区结果的搜索中造成了显着的放缓。

根据您更新的解释，我首先建议创建必要的索引。我会阅读[MySQL 优化](http://dev.mysql.com/doc/refman/5.1/en/column-indexes.html)章节（特别是关于索引的部分），以更好地了解如何确保您拥有必要的索引。您还可以使用 slow_query 日志来帮助隔离有问题的查询。

缩小范围后，我可以看到您需要将分区更改为想要分区以限制特定分区的大小（可能是为了存储空间或快速截断等）。此时，您可以决定按月或按年进行分区。

使用日期作为分区键进行分区显然会迫使您为日期字段创建索引。在您开始按计划进行分区的额外工作之前，先看看它是如何进行的。

# java - 将 JSON 列表转换为 POJO

> ID：12200366
> 
> 赞同：0
> 
> 时间：2012-08-30T15:27:16.717
> 
> 标签：java, json, jackson

我无法将这一点 JSON 放入 POJO。我正在使用这样配置的杰克逊：

```
protected ThreadLocal<ObjectMapper> jparser = new ThreadLocal<ObjectMapper>();

    public void receive(Object object) {
    try { 
        if (object instanceof String && ((String)object).length() != 0) {
            ObjectDefinition t = null ; 
            if (parserChoice==0) { 
                if (jparser.get()==null) {
                    jparser.set(new ObjectMapper());
                }
                t = jparser.get().readValue((String)object, ObjectDefinition.class);
            }

            Object key = t.getKey();
            if (key == null)
                return;
            transaction.put(key,t); 
        } 
    } catch (Exception e) { 
        e.printStackTrace();
    }
} 
```

这是需要转换为 POJO 的 JSON：

```
{
    "id":"exampleID1",
    "entities":{
      "tags":[
         {
            "text":"textexample1",
            "indices":[
               2,
               14
            ]
         },
         {
            "text":"textexample2",
            "indices":[
               31,
               36
            ]
         },
         {
            "text":"textexample3",
            "indices":[
               37,
               43
            ]
         }
      ]
} 
```

最后，这是我目前对 java 类的内容：

```
 protected Entities entities;
@JsonIgnoreProperties(ignoreUnknown = true)
protected class Entities {
    public Entities() {}
    protected Tags tags;
    @JsonIgnoreProperties(ignoreUnknown = true)
    protected class Tags {
        public Tags() {}

        protected String text;

        public String getText() {
            return text;
        }

        public void setText(String text) {
            this.text = text;
        }
    };

    public Tags getTags() {
        return tags;
    }
    public void setTags(Tags tags) {
        this.tags = tags;
    }
};
//Getters & Setters ... 
```

我已经能够将更简单的对象转换为 POJO，但这个列表让我很困惑。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:03:13.183

我认为您的问题在于您的班级定义。您似乎希望`Tags`该类包含来自 Json 的原始文本，它是一个数组。我会做什么：

```
protected Entities entities;
@JsonIgnoreProperties(ignoreUnknown = true)
protected class Entities {
    public Entities() {}
    @JsonDeserialize(contentAs=Tag.class)
    protected List<Tag> tags;

    @JsonIgnoreProperties(ignoreUnknown = true)
    protected class Tag {
        public Tag() {}

        protected String text;

        public String getText() {
            return text;
        }

        public void setText(String text) {
            this.text = text;
        }
    };

    public Tags getTags() {
        return tags;
    }
    public void setTags(Tags tags) {
        this.tags = tags;
    }
}; 
```

在字段标签上，我使用 List 来表示 Json 数组，并告诉 Jackson 将该列表的内容反序列化为 Tag 类。这是必需的，因为 Jackson 没有泛型声明的运行时信息。你会对索引做同样的事情，即有一个`List<Integer> indices`带有 JsonDeserialize 注释的字段。

# c# - 在sql server中标准化不同格式的varchar字段到日期

> ID：12200367
> 
> 赞同：2
> 
> 时间：2012-08-30T15:27:20.073
> 
> 标签：c#, sql, sql-server-2008

我知道过去有人问过类似的问题，但他们仍然没有为我的案件提供适当的解决方案。

我有一个包含值`varchar`列的数据库表（第三方） `datetime`。

它包含以下格式的日期。

```
 11181980 
  8 18 1960 
  10/01/1960 
  04-12-1953 
  041371 
  7/29/44
  Empty String 
  NULL 
```

当我选择此列时，我想`mm/dd/yyyy`在可用时以标准格式（比如 ）或 NULL 将日期带入。

我只能想到一个函数来执行此操作，但我不想执行 UDF，因为我需要确保它在尝试转换时不会出错。UDF 中没有 try/catch。我可以做一个 CLR 函数来利用更强大的 .net 功能，尽管我想避免它。

有没有其他更好的方法来处理 SQL Server 中的这种转换？如果可能的话，我应该如何在 SQL 中进行这种转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:00:02.557

对于您描述的一组潜在格式：

```
DECLARE @x TABLE(y VARCHAR(32))

INSERT @x VALUES
('11181980'),
('8 18 1960'),
('10/01/1960'),
('04-12-1953'), 
('041371'),
('7/29/44'),
(''), 
(NULL);

SET DATEFORMAT MDY;

SELECT CONVERT(DATETIME, CASE WHEN y LIKE '%/%' THEN y
 WHEN LEN(RTRIM(y)) = 0 THEN NULL
 WHEN LEN(RTRIM(y)) IN (6,8) AND ISNUMERIC(y) = 1 THEN
 STUFF(STUFF(y,3,0,'/'),6,0,'/') END)
FROM (SELECT y = REPLACE(REPLACE(y, ' ', '/'), '-', '/') FROM @x) AS x; 
```

这将根据服务器设置解释`7/29/44`为`2044`, not 。`1944`为确保所有日期都在过去，您可以执行以下操作：

```
SELECT y = DATEADD(YEAR, CASE WHEN y > GETDATE() THEN -100 ELSE 0 END, y) 
FROM
(
  SELECT y = CONVERT(DATETIME, CASE WHEN y LIKE '%/%' THEN y
   WHEN LEN(RTRIM(y)) = 0 THEN NULL ELSE
   STUFF(STUFF(y, 3, 0, '/'),6, 0, '/') END)
  FROM (SELECT y = REPLACE(REPLACE(y, ' ', '/'), '-', '/') FROM @x) AS x
) AS z; 
```

这也取决于没有垃圾数据不能被处理成日期。到底是什么样的系统进入这种不一致的胡说八道？

在 SQL Server 2012 中，您将能够使用[TRY_PARSE](http://msdn.microsoft.com/en-us/library/hh213126.aspx)或[TRY_CONVERT](http://msdn.microsoft.com/en-us/library/hh230993.aspx)，但是由于格式混乱，您仍然需要进行一些处理才能获得有意义的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:40:51.117

如果您拥有数据库但无法更改它，我将运行一个存储过程，将所有值清理为一种通用格式，并确保只能插入/更新该格式的条目。如果您无法控制 CRUD 操作，我将按原样获取“日期”并`DateTime`在您的 BL 层中执行到 a 的转换。

也许不是您问题的答案，但我个人喜欢通过将转换和其他逻辑保留在数据库之外来尽可能简单地查询所有查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:53:44.953

我建议您执行以下操作：

1.  找到设计那张桌子的人并射击他们
2.  编写一个 CLR 函数将值解析为日期，可能使用正则表达式模式匹配
3.  创建一个返回所有相同列的视图，但您的函数结果而不是 varchar 字段

老实说，数据看起来像垃圾，我怀疑你完全可以依赖它。可能存在以下值：

*   11190
*   1111990

这些应该是 1990-11-01 还是 1990-01-11？我认为 CLR 功能将以最稳定的方式为您提供最多的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-15T23:46:41.993

这是我对这个 3 年老问题的解决方案。我没有任何空格，但是您可以以此为基础，并在评估时使用*替换*功能将其删除。给你，互联网。感谢过去 10 年的所有帮助。这是相当特定于 SQL 数据导入导出的，但希望能帮助那些陷入手动 ETL 模式的人。

```
 CASE    WHEN DOB LIKE '__/__/____'  THEN [DOB]                              -- PROPER FORMAT
    WHEN DOB LIKE '_/__/____'   THEN '0'+ [DOB]                         -- NEED TO ADD A ZERO TO THE MONTH
    WHEN DOB LIKE '__/_/____'   THEN  LEFT(DOB,3)+'0'+RIGHT(DOB,6)      -- NEED TO ADD A ZERO TO THE DAY
    WHEN DOB LIKE '_/_/____'    THEN '0'+LEFT(DOB,2)+'0'+RIGHT(DOB,6)   -- NEED TO ADD A ZERO TO THE MONTH AND DAY
    WHEN LEN(DOB)=8 AND DOB BETWEEN '1900' AND '2016' THEN LEFT(RIGHT(DOB,4),2) + '/' + RIGHT(DOB,2) +'/'+ LEFT(DOB,4)
    WHEN LEN(DOB)=8 AND DOB BETWEEN '01011900' AND '12312016' AND DOB NOT LIKE '%/%' THEN LEFT(DOB,2) + '/' + RIGHT(LEFT(DOB,4),2) +'/'+ RIGHT(DOB,4)
    WHEN DOB LIKE '__/__/__'     -- CONVERT FROM MM/DD/YY (ADD TWO DIGIT YEAR PREFIX)
        THEN    CASE    WHEN RIGHT(replace(dob,'/',''),2) > RIGHT(YEAR(GETDATE()),2) --WHEN 2-DIGIT YEAR IS WITHIN 100 YEARS AGO USE 19
                            THEN LEFT(DOB,2)+'/'+LEFT(RIGHT(replace(dob,'/',''),4),2)+'/19'+RIGHT(replace(dob,'/',''),2) 
                        WHEN RIGHT(DOB,2) < RIGHT(YEAR(GETDATE()),2) --WHEN 2-DIGIT YEAR IS MORE THAN 100 YEARS AGO USE 20
                            THEN LEFT(DOB,2)+'/'+LEFT(RIGHT(replace(dob,'/',''),4),2)+'/20'+RIGHT(replace(dob,'/',''),2) 
                ELSE NULL END 
```

ELSE NULL END AS [DOB_CONVERTER]

正如 Max Vernon 所指出的，您必须考虑要匹配和修复的每个模式。错误处理可以很好地实现自动化。在那之前，一旦数据被清理，就会查看数据，加载到临时表并使用类似的模式查找坏人（WHERE NULL 以查找非模式匹配）（WHERE RIGHT(LEFT(REPLACE([DOB],'/',' '),4),2) > 31

模式搜索是 microsoft.com 上的一个有用站点 [https://technet.microsoft.com/en-us/library/ms187489(v=sql.105).aspx](https://technet.microsoft.com/en-us/library/ms187489(v=sql.105).aspx)

# apache-flex - 在移动设备上查看 as 或 mxml 哪个更好

> ID：12200368
> 
> 赞同：0
> 
> 时间：2012-08-30T15:27:22.000
> 
> 标签：apache-flex

正如标题所说，在移动应用程序上编写视图哪个更好：AS 或 MXML，在性能和视觉方面？

我已经测试了这两种方法，我发现有时 mxml 比 AS 效果更好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:25:31.060

我不同意@Apocalyptic0n3：HTML 和 JS 是两种完全不同的语言，而 MXML 只是一种编写 AS 的声明性方式。MXML 代码先编译为 AS，生成的 AS 再编译为 ABC 字节码，就像普通的 AS。

这意味着只要您使用 Flex 组件层次结构在 AS 中编写组件，**几乎不会有任何性能差异**。你可以用 MXML 编写的任何东西都可以用 AS 编写。某些生成的代码可能对您的特定用例无用，因此可以在那里进行一些优化，但在大多数情况下几乎不会引起注意。（如果你在 Flex 框架之外编写纯 AS 组件，那当然是另一回事了）

主要区别在于您编写代码的速度，因为与 MXML 相比，您将**花费更多时间**在 AS 中编写组件。

在 MXML 中，您自然也会使用**数据绑定**，而在用 AS 编写的组件中，您通常会通过覆盖`commitProperties()`方法来设置属性。这里有一个显着的性能差异，但这并不意味着您不能在 AS 中使用绑定，或者您不能`commitProperties`在基于 MXML 的组件中覆盖。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T16:13:02.913

MXML 在 GUI 布局方面远远优于 AS3。它的编写速度更快，更灵活（您仍然可以使用 AS3 启动），并且总体速度通常更快，特别是因为您不需要绑定调整大小的侦听器。MXML 和 AS3 旨在一起使用，就像 HTML 和 JS 一样。

# php - php 字符串在不应该时回显为 0

> ID：12200369
> 
> 赞同：0
> 
> 时间：2012-08-30T15:27:27.577
> 
> 标签：php, syntax

我正在编写代码来显示某些产品的价格。如果价格为 0，则不显示任何内容。

```
<? if ($book->price_euro != 0) {$europrice = number_format($book->price_eur, 2); echo "€$europrice";}?>
<? if ($book->price_gbp != 0) {$gbpprice = number_format($book->price_gbp, 2); echo "£$gbpprice";}?>
<? if ($book->price_usd != 0) {$usdprice = number_format($book->price_usd, 2); echo "$$usdprice";}?> 
```

这与“€0.00 £33.00 $66.00”相呼应。欧元价格设置为 99。我看不出有任何理由应该回显为 0！难道我做错了什么？语法不好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T15:29:54.443

```
$europrice = number_format($book->price_eur, 2 
```

不应该`$book->price_euro`吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T15:30:08.540

欧元的错别字

```
number_format($book->price_eur, 2); // This is what you have.

number_format($book->price_euro, 2); // This is what you need. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T15:30:19.490

如果没有看到更多，我看不出这段代码有什么问题。但也许你的变量？

```
<? if ($book->price_euro != 0) {$europrice = number_format($book->price_eur, 2); echo "€$europrice";}?> 
```

`price_eur`应该是`price_euro`？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T15:32:49.533

```
number_format($book->price_eur, 2); 
```

应该

```
number_format($book->price_euro, 2); 
```

空值导致您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T15:31:03.490

您可能仍会得到空值或其他尝试使用空的东西

```
<? if (empty($book->price_euro)) {$europrice = number_format($book->price_euro, 2); echo "€$europrice";}?>
<? if (empty($book->price_gbp)) {$gbpprice = number_format($book->price_gbp, 2); echo "£$gbpprice";}?>
<? if (empty($book->price_usd)) {$usdprice = number_format($book->price_usd, 2); echo "$$usdprice";}?> 
```

# ms-word - 用分页符替换字符

> ID：12200370
> 
> 赞同：6
> 
> 时间：2012-08-30T15:27:31.527
> 
> 标签：ms-word

在 MS Word 中，我需要将模式 ( `$$$newpage`) 替换为分页符。这可以通过标准页面搜索实现吗？还是我需要以编程方式进行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T15:38:33.507

转到“查找和替换”并输入您的“查找”字符并将其替换为您可以*[在此处](http://office.microsoft.com/en-us/word-help/find-and-replace-text-or-other-items-HA001230392.aspx#_Toc282602052)*`^m`
阅读有关它的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-08T13:33:59.713

我有同样的问题，但我需要用分页符“^m”替换分节符“^b”。查找和替换对我不起作用。我使用这个 VBA 脚本解决了：

```
Sub ReplaceSectionBreaks()
    'reliably replace section breaks with page breaks
    'even if they're followed by tables
    Dim rg As Range
    Set rg = ActiveDocument.Range
    With rg.Find
        .Text = "^b"
        .Wrap = wdFindStop
        While .Execute
            rg.Delete
            rg.InsertBreak Type:=wdPageBreak
            rg.Collapse wdCollapseEnd
        Wend
    End With
End Sub 
```

尝试用您的模式“$$$newpage”更改“^b”，它也应该为您工作。

# python - 使用 python (MAC) 检查返回码

> ID：12200373
> 
> 赞同：0
> 
> 时间：2012-08-30T15:27:40.077
> 
> 标签：python, svn, return-value

我编写了一个脚本来检查 SVN Repo 是否启动并运行，结果基于返回值。

```
import subprocess

url = " validurl"

def check_svn_status():
    subprocess.call(['svn info'+url],shell=True)

def get_status():
    subprocess.call('echo $?',shell=True)

def main():
    check_svn_status()
    get_status()

if __name__ == '__main__':
    main() 
```

我面临的问题是，如果我将 url 更改为不存在的东西，我仍然会得到返回值为 0，但如果我要在脚本之外运行它，即转到终端类型`svn info wrong url`，然后执行`echo $?`我得到的返回值为 1。但我无法在 python 中重新创建它。有什么指导方针吗？

**更新后的TraceBack**

```
Traceback (most recent call last):
  File "svn_status.py", line 21, in <module>
    main()
  File "svn_status.py", line 15, in main
    check_svn_status()
  File "svn_status.py", line 8, in check_svn_status
    p = sp.Popen(['svn info'], stdout=sp.PIPE, stderr=sp.PIPE)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 672, in __init__
    errread, errwrite)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 1202, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or director 
```

是的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T15:36:04.883

**为什么您的方法不起作用：** 您调用两个独立的子shell。第二个 shell 不知道第一个 shell，因此没有关于在第一个 shell 中执行的进程的返回码的任何信息。

**解决方案：** 使用`subprocess`模块，直接生成子进程（而不是通过子shell）并检索返回码。通过阅读模块的文档来帮助自己：http: [//docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html)

有几种方法可以实现您的目标。一种简单的方法可能是：

```
import subprocess as sp
p = sp.Popen(['command', 'arg1', 'arg2'], stdout=sp.PIPE, stderr=sp.PIPE)
stdout, stderr = p.communicate()
returncode = p.returncode 
```

这样，您就不必通过子shell（`shell=False`默认情况下），由于各种原因，这是推荐的方法。您可以直接捕获生成的子进程的返回码，并且可以完全访问子进程的标准输出和标准错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:37:26.800

subprocess.call 返回 retcode，只存储你的结果`subprocess.call(['svn info'+url],shell=True)`

[http://docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html)

# ruby-on-rails - Rails3 FactoryGirl has_one 未知属性错误

> ID：12200374
> 
> 赞同：0
> 
> 时间：2012-08-30T15:27:40.867
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, factory-bot, has-one

我有以下设置：

楷模：

```
class Product < ActiveRecord::Base
  has_one :product_category

  attr_accessible :name, :product_category, :product_category_id
end

class ProductCategory < ActiveRecord::Base
  belongs_to :product

  attr_accessible :name

end 
```

迁移：

```
class CreateProducts < ActiveRecord::Migration
  def change
    create_table :products do |t|
      t.references :product_category
      t.string :name

      t.timestamps
    end
  end
end

class CreateProductCategories < ActiveRecord::Migration
  def change
    create_table :product_categories do |t|
      t.string :name

      t.timestamps
    end
  end
end 
```

现在，我想使用 FactoryGirl 和 RSpec 进行测试。所以我设置了以下 FactoryGirl 测试模型：

product_spec.rb

```
require 'factory_girl'
FactoryGirl.define do
  factory :product, class: Product do
    product_category {|a| a.association(:product_category)}
    name "Demo Product"
  end
end 
```

product_category_spec.rb

```
require 'factory_girl'
FactoryGirl.define do
  factory :product_category, class: ProductCategory do
    name "Demo Product"
  end
end 
```

但是当我在 product_spec.rb 上运行 RSpec 时，我收到以下错误：

```
can't write unknown attribute 'product_id' 
```

我无法弄清楚为什么会发生这种情况。如果我从产品工厂中删除 product_category，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:30:45.477

您的迁移是错误的：应该[按照 doc](http://guides.rubyonrails.org/association_basics.html#the-belongs_to-association)`belongs_to`中的说明使用外键。

# c# - 如何从回调方法返回信息？C# 4.0

> ID：12200377
> 
> 赞同：1
> 
> 时间：2012-08-30T15:27:42.703
> 
> 标签：c#, wcf, .net-4.0, asynchronous, callback

我正在使用 WCF 异步方法。

当我尝试返回回调函数的值时遇到问题。

有哪些可能的解决方法？（**使用 .net 4.0，但不是 4.5**）

```
 public static Object LoadInfo()
    {
        var service = new SomeWcfService();
        service.BeginGetInfo(CallbackMethod, service);

        // HOW TO GET INFROMATION FROM CALLBACK??
        return INFORMATION;
    }

    private static void CallbackMethod(IAsyncResult ar)
    {
        // HOW TO PASS INFROMATION TO LoadInfo??
        var INFORMATION = (ar.AsyncState as SomeWcfService).EndGetInfo(ar);
    } 
```

**注意：**所有工作都应该是异步的。

**谢谢。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:47:42.573

最好设计使用异步模式而不是反对它。

但是，如果您必须同步访问异步方法，则可以使用信号量来阻塞调用线程，直到异步方法返回。

```
public static Object LoadInfo()
{
    // this is our semaphore
    var blocker = new AutoResetEvent();
    object result = null;

    var service = new SomeWcfService();
    // use a lambda instead of a method as the callback.
    // this will result in a closure where we can access the result and blocker variables
    service.BeginGetInfo(x => 
    {
        // We are on a different thread within this lambda
        result = (x.AsyncState as SomeWcfService).EndGetInfo(ar);
        // release anybody calling blocker.WaitOne
        blocker.Set(); 
    }, service);

    // we are still on the original thread here, and
    // BeginGetInfo has possibly not yet executed, so we must wait until Set is called
    blocker.WaitOne(Timeout.Infinite); 
    return result;
} 
```

这很少是一个好的设计选择。异步模式更适合响应式 UI。最好做这样的事情

```
public void LoadInfo()
{
    // Makes the UI show a loading indicator, blocking all actions except for CANCEL
    LoadingInfo = true;

    var service = new SomeWcfService();
    service.BeginGetInfo(CallbackMethod, service);
}

private void CallbackMethod(IAsyncResult ar)
{
    // the UI is now released from loading 
    LoadingInfo = false;
    // the UI is triggered to show our data
    ViewModel.Data = (ar.AsyncState as SomeWcfService).EndGetInfo(ar);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:45:53.793

一开始就理解异步，尤其是回调是很困难的。在您的示例中，您做出了不正确但自然的假设...

```
public static Object LoadInfo() 
{ 
    var service = new SomeWcfService(); 
    service.BeginGetInfo(CallbackMethod, service); 

    // HOW TO GET INFROMATION FROM CALLBACK?? 
    // ERROR: You assume you have more work to do in this method,
    // or that this is the place to return your results.
    return INFORMATION; 
} 
```

您在下面给出的方法是返回结果后进行工作的地方：

```
private static void CallbackMethod(IAsyncResult ar) 
{ 
    // HOW TO PASS INFROMATION TO LoadInfo?? 
    // OOPS! No need to pass pack to LoadInfo - it's done...
    var INFORMATION = (ar.AsyncState as SomeWcfService).EndGetInfo(ar); 
} 
```

相反，你会想要这样的东西

```
public static void LoadInfo()        
{        
    var service = new SomeWcfService();        
    // begin an asynchronous service call
    // and handle the results in another method, "CallbackMethod"
    service.BeginGetInfo(CallbackMethod, service);  
    // You can do other, non-service related,
    // things here while the service call executes 
} 
```

然后您的其他方法处理所有结果：

```
private static void CallbackMethod(IAsyncResult ar)            
{            
    var results = (ar.AsyncState as SomeWcfService).EndGetInfo(ar);  
    // Do whetever you need with results here
} 
```

正如威尔在他的出色回答中指出的那样（+1，好像他需要它，哈哈！），您可以使用带有 lambda 表达式的匿名方法，而不是使用单独的回调方法，例如：

```
public static void LoadInfo()        
{        
    var service = new SomeWcfService();        
    // begin an asynchronous service call
    // and handle the results in this anonymous method
    service.BeginGetInfo(x =>
    {
        // B. This code block will be called when the service returns with results
        var results = (ar.AsyncState as SomeWcfService).EndGetInfo(ar);  
        // Do whetever you need with results here
    }, service);  

    // A. You can do other things here while the service call executes
    // but debugging this gets more complicated because things will likely
    // occur at A before they occur at B
} 
```

所以，Asynchronous 的总体思路是：

*   您的程序设置并开始一个服务调用，然后继续做它想做的任何其他事情，而无需等待。提示：这是开始加载动画和/或禁用某些控件的自然位置。
*   当您进行异步调用时，作为参数之一，您提供了一个在调用完成后运行的方法。
*   当服务返回结果时，将运行您指定的方法来处理结果。提示：在此方法中，您可以结束加载动画，和/或重新启用您的控件，并将结果插入您的 ViewModel。

# objective-c - UIPageControl 需要 XIB 吗？

> ID：12200378
> 
> 赞同：0
> 
> 时间：2012-08-30T15:27:44.123
> 
> 标签：objective-c, ios, uiscrollview, xib, uipagecontrol

我看到的所有 PageControl 示例都使用 XIB 在滚动时在视图之间切换。这是一个要求吗？是否可以在 Storyboard 中为 PageControl 加载另一个 viewController？我试过这样做，但没有成功。它不加载 ViewController。我被告知使用 initWithCoder 从 Storyboard 加载视图。我不知道在 initWithCoder 中放什么，而且关于 initWithCoder 和 Coders 的 Apple Dev 文档令人困惑。

我只能使用 XIB 进行分页。

更新：更具体地说，分页工作正常，但我问我何时创建一个管理分页视图之一的 ViewController 类。如何让类从 Storyboard 加载视图？我只能在使用 XIB 时加载视图。

谢谢，艾伦

# c# - 如何在作为 List 的 ObservableCollection 的绑定属性（到 ListView）上调用 String.Joing

> ID：12200400
> 
> 赞同：2
> 
> 时间：2012-08-30T15:28:47.327
> 
> 标签：c#, wpf, xaml, data-binding, observablecollection

我有一个简单的 Observable 集合，它有两个公共属性，int ID 和 List Targets。代码隐藏看起来像（简化代码以删除不必要且不相关的代码）：

```
public class MyClass
{
   public ObservableCollection<SomeClass> jobs;

   public class SomeClass
   {
      private int id;
      private List<string> targets;

      public int ID
      {
         get { return id; }
         set { id = value; }
      }

      public List<string> Targets
      {
         get { return targets; }
         set { targets = value; }
      }

      public SomeClass(int _id, List<string> _targets)
      {
         id = _id;
         targets = _targets;
      }
   }

   public MyClass()
   {
      InitializeComponent();
      jobs = new ObservableCollection<SomeClass>();
      myListView.ItemsSource = jobs; //jobs is populated from a a loader in Window_Loaded
   }
} 
```

xaml 中的 ListView 和绑定如下所示：

```
 <ListView Name="MyListView" ItemsSource="{Binding Path=jobs, RelativeSource={RelativeSource AncestorType=Window},
            Mode=OneWay}" Width="480" Height="155" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,35,10,0" >
     <ListView.ContextMenu>
        <ContextMenu Name="contextMenuJobRemove">
           <ContextMenu.BitmapEffect>
              <OuterGlowBitmapEffect />
           </ContextMenu.BitmapEffect>
           <MenuItem Header="Remove" Click="contextMenuJobRemove_Click" CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=Parent}"/>
        </ContextMenu>
     </ListView.ContextMenu>
     <ListView.View>
        <GridView AllowsColumnReorder="True" ColumnHeaderToolTip="Broadcast call targets">
           <GridViewColumn DisplayMemberBinding="{Binding Path=ID}"   Header="ID"      Width="50" />
           <GridViewColumn DisplayMemberBinding="{Binding Path=Targets}" Header="Targets" Width="100" />
        </GridView>
     </ListView.View>
  </ListView> 
```

因此，当 ListView 显示时，Targets 列正确地显示“（集合）”。理想情况下，我希望此列显示类似`String.Join(",", Targets.ToArray())`. 如何做到这一点，我是在 xaml 还是代码隐藏中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T15:32:30.000

一种方法是绑定中的[转换器。](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)

但是，这只会在属性更改（而不是集合内容）后更新。因此，最好在您的对象中公开一个显示字符串属性，并在列表更改时触发该属性的更改通知。如果集合一开始没有改变，那么这些通知显然是没有必要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:37:52.930

使用值转换器：

```
[ValueConversion(typeof(IEnumerable<string>), typeof(string))]
public class MyArrayToStringConverter : IValueConverter
{
    public object Convert(object value, Type targetType, 
        object parameter, CultureInfo culture)
    {
        return String.Join (",", ( (IEnumerable<string>)value ).ToArray() );
    }

    public object ConvertBack(object value, Type targetType, 
        object parameter, CultureInfo culture)
    {
        throw new NotImplementedException ();
    }
}

<Window
    ...
    xmlns:my="clr-namespace:XXXXXXXXXXXXXXXXXXXXXCSharpNamespace"
    ...>
    <Window.Resources>
        <my:MyArrayToStringConverter x:Key="myconverter" />
    </Window.Resources>
    ...
    "{Binding ... Converter={StaticResource myconverter}}"
</Window> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:36:01.057

您可以创建一个简单的值转换器：

```
public class ListConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter,
                          CultureInfo culture)
    {
        var enumerable = value as IEnumerable;
        if (enumerable == null)
            return string.Empty;
        return String.Join(", ", enumerable.ToArray());
    }

    public object ConvertBack(object value, Type targetType, object parameter,
                              CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# android - 在视图中的元素之间膨胀视图（Android XML）

> ID：12200404
> 
> 赞同：1
> 
> 时间：2012-08-30T15:29:02.843
> 
> 标签：android, xml, android-layout, android-xml

我想放大一些视图，但在视图底部有一个按钮。我已经知道如何动态膨胀视图，然后膨胀其他膨胀视图下方的按钮。但是，当只有几个膨胀视图（导致组合视图占用的空间少于整个屏幕）时，按钮不会像我想要的那样位于页面底部。我的想法是，我需要通过将按钮设置为：android:layout_alignParentBottom 使按钮在相对布局的底部对齐（当我尝试这样做时，尽管应用程序崩溃了）

这是我所拥有的屏幕截图，然后是我想要的屏幕截图，您看到的所有项目都被膨胀到相对布局内的滚动视图上。我认为问题在于按钮被充气到滚动视图上，而滚动视图的大小仅在项目强制它是（不幸的是我太菜鸟不知道如何充气到视图的不同部分）

![在此处输入图像描述](../Images/e4a947282794e5e5ef73facdc5739b4a.png)

左侧图像的代码如下（我没有左侧视图的错误）： parentView：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@drawable/blurybg"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">    
<ScrollView     
  android:layout_height="wrap_content" 
  android:id="@+id/scrollView1" 
  android:layout_width="fill_parent" >
<LinearLayout     
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:id= "@+id/parent_of_inflated_view_id">
</LinearLayout>   
</ScrollView>
</RelativeLayout> 
```

childButton（其他视图与此类似）

```
<?xml version="1.0" encoding="utf-8"?>
<Button
xmlns:android="http://schemas.android.com/apk/res/android"
android:height="30dp"
android:layout_width="fill_parent"
android:background="@drawable/done"
android:layout_alignBottom ="@layout/availablerestaurants"
/> 
```

用于创建充气机和充气按钮的 Java。其他充气视图与此类似（我当然使用相同的充气机）。我最后添加了充气按钮以使其位于视图的底部。

```
LayoutInflater theInflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
LinearLayout linLayout = (LinearLayout)findViewById(R.id.parent_of_inflated_view_id); 

    Button doneButtonCurrentRest=  (Button) theInflater.inflate(R.layout.done_button_availrest, null);
    linLayout.addView(doneButtonCurrentRest); 
```

感谢您的帮助，亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:23:52.953

请检查我的代码。它应该按预期工作：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/parent_of_inflated_view_id"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" />
    </ScrollView>

    <Button
        android:layout_width="match_parent"
        android:layout_height="30dp"
        android:layout_alignParentBottom="true" />

</RelativeLayout> 
```

你的代码呢。我可以看到几个错误：

1）您应该`android:layout_height`为您的按钮指定。没有这个参数会抛出异常。您使用`android:height`但它与`android:layout_height`.

2）`android:layout_alignBottom`应该指向id，而不是布局。此外，我在按钮的单独布局中看不到此属性的用途。

**更新**

这是下面评论中问题的解决方案：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:id="@+id/layout_for_positioning"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/parent_of_inflated_view_id"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:orientation="vertical" />

        <Button
            android:id="@+id/button"
            android:layout_width="match_parent"
            android:layout_height="30dp"
            android:layout_weight="0" />
    </LinearLayout>

</ScrollView> 
```

请注意，我用于`android:fillViewport="true"`ScrollView，因此它可以填满整个屏幕。我也曾经正确地拉伸视图（你可以在[这里](https://stackoverflow.com/questions/3995825/what-does-androidlayout-weight-mean)`android:layout_weight`找到属性的解释 ）。

# c# - 在嵌套事务范围内提交事务

> ID：12200407
> 
> 赞同：1
> 
> 时间：2012-08-30T15:29:22.193
> 
> 标签：c#, asp.net, asp.net-4.0

我有以下情况：

```
using (TransactionScope TX = new TransactionScope()) 
{

   for (int i = 0; i < Iterations; i++)
   {
      //Loop and perform DB updates.

      //Update logs
      using (TransactionScope TX1 = new TransactionScope()) 
      {
         //Open DB Connection and update the logs to say i out of iterations complete.
         TX1.Complete();
      }
   }

   TX.Complete();
} 
```

我遇到的问题是我想更新日志，以便用户可以检查以查看进度，但我不想提交在循环中执行的主要 SQL 块。

不确定我是否遗漏了一些明显的东西，但有没有人有任何建议。

我正在使用 ASP.NET 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:40:47.840

首先，您似乎希望在 FOR 循环内而不是在循环外更新您的日志。

其次，您有两个同名交易。将您的嵌套事务命名为其他名称（例如 TX_2 或其他名称）。

# facebook - 将 facebook 用户签到与基于纬度和经度的城市列表相关联

> ID：12200411
> 
> 赞同：1
> 
> 时间：2012-08-30T15:29:35.207
> 
> 标签：facebook, facebook-graph-api, latitude-longitude, facebook-checkins

我正在研究一个应用程序的开发，它可以向用户显示他们的朋友去过世界上的哪些城市。为此，我正在考虑获取每个用户朋友的签到列表，并根据每个签到的纬度和经度将这些签到映射到我的城市列表。这看起来是实现此目的的唯一方法，因为 Facebook 图形 API 不返回城市 locationId，我可以使用它来将签到城市映射到我自己的城市列表。

我完全不知道如何执行从登记纬度/经度到我为城市表中每个城市存储的纬度/经度的映射。谁能指出我正确的方向或解释如何做到这一点的教程？

我只有一对纬度/经度坐标，所以我想我需要为每个城市定义市中心纬度和经度周围的纬度和经度范围，这将使办理登机手续被视为发生在任何给定的城市，然后对我的城市表执行 SQL 查询以查找任何给定的签到所在的城市？或者有另一种/更好的方法吗？提前感谢您的任何提示和建议。

洛泰尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:21:22.813

您可以使用搜索 API [https://developers.facebook.com/docs/reference/api/#searching](https://developers.facebook.com/docs/reference/api/#searching)搜索特定纬度/经度位置周围的地点。

比如旧金山的caffes：[https ://graph.facebook.com/search?q=coffee&type=place¢er=37.76,-122.427&distance=1000](https://graph.facebook.com/search?q=coffee&type=place&center=37.76,-122.427&distance=1000)

同样，您可以搜索坐标周围的地点并查看地点类型以过滤掉城市。您可以通过调用[https://graph.facebook.com/PLACE_ID](https://graph.facebook.com/PLACE_ID)并查看详细信息来做到这一点。例如，在上面的搜索示例中，Philz Coffee（第一个结果） - [https://graph.facebook.com/151116474914629](https://graph.facebook.com/151116474914629) - 为您提供`"category": "Local business"`.

如果您的目标是城市，这并不理想，因为签到的重点是人们在城市去的地方（实际上，您的朋友签到地方的结果可能比他们签到城市的结果更多）。

# android - adwhril 样本不起作用

> ID：12200424
> 
> 赞同：0
> 
> 时间：2012-08-30T15:30:13.030
> 
> 标签：android, adwhirl

谁能给我一个将 adwhril 集成到 android 中的示例。我试过这个示例

[http://paste2.org/p/2168910](http://paste2.org/p/2168910)

我使用与替换我的 sdk 密钥的代码相同的代码但我收到警告说

![在此处输入图像描述](../Images/c6fb3343159044bd4a293541ea6d7133.png)

任何人都可以建议我

按照建议更新代码并收到此警告

![在此处输入图像描述](../Images/e20e9f9228f31339144bacd2a84e0a7d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T04:42:00.530

是的，我也遇到过这个问题并以这种方式解决

如果您尚未在清单中添加，请添加这些

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

在您要显示添加的活动中

```
<meta-data android:value="---- Your Key ----"
            android:name="ADWHIRL_KEY"/> 
```

现在，在您的 ad-whirl 网络中添加您使用的添加提供程序的所有 jar。将它们添加到应用程序的 libs 文件夹中，然后通过从 libs 中右键单击它们将它们添加到构建路径。

例如，如果您使用 Admob，则将 admob 的 jar 添加到 libs 并将其添加到构建路径。然后将此行添加到清单中，因为需要单独显示来自 admob 的添加或使用 adwhirl

```
<activity android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" >
        </activity> 
```

现在您将看到 admob 的添加。

谢谢

Ps：我已经添加了带有图像的完整代码

**清单**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.expadwhirl"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <meta-data android:value="2f120f401e9a40d0afa55557d3a3a58c"
                android:name="ADWHIRL_KEY"/>
        </activity>

        <activity android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" >
        </activity>
    </application>

</manifest> 
```

**布局**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.adwhirl.AdWhirlLayout
        android:id="@+id/adwrl"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        />

</RelativeLayout> 
```

**活动**

```
import android.app.Activity;
import android.os.Bundle;

import com.adwhirl.AdWhirlLayout;
import com.adwhirl.AdWhirlLayout.AdWhirlInterface;

public class MainActivity extends Activity implements AdWhirlInterface {

    AdWhirlLayout adwrl;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public void adWhirlGeneric() {
        // TODO Auto-generated method stub
    }
} 
```

**整体项目**

![库和引用库](../Images/d9101109d7761254dbe42298dd261865.png)

# c# - 我在 C# 中收到 Oracle.DataAccess 错误

> ID：12200425
> 
> 赞同：2
> 
> 时间：2012-08-30T15:30:16.180
> 
> 标签：c#, .net, oracle

错误信息是

```
 Could Not load file or assembly 'Oracle.DataAccess, version=4.112.3.0, Culture=netural,
PublicKeyToken=89b483f429c47342' or one of its dependencies.
The system cannot find the file specified. 
```

我可以知道它是什么解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:32:16.023

此错误表明您的计算机上没有 Oracle.DataAccess.Client.dll 文件。

首先要做的是检查它是否存在并且它是正确的版本。

如果不存在，您可以为您的机器下载并安装 ODAC（Oracle 数据访问组件）。这应该允许您使用 dll。

当您安装 ODAC 程序集时，您将通过查看您的 machine.config（对于您正在使用的给定架构）和 GAC 看到 dll 已成功安装。

[ODAC](http://www.oracle.com/technetwork/database/windows/downloads/index-101290.html)

编辑：鉴于您添加的信息，请尝试在您的 IIS 服务器上安装您的 ODAC。如果这不起作用，那么这个主题可能会有所帮助，或者至少为您提供另一种说服方式。

[IIS 7.5 上的 ODAC 错误](https://stackoverflow.com/questions/8412401/oracle-data-access-components-64-bit-not-working-in-iis-express-7-5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:32:14.207

您需要安装适用于 .NET 的 Oracle 数据访问组件。看[这里](http://www.oracle.com/technetwork/database/windows/downloads/index-101290.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:32:34.013

您可以在您的机器上安装 Oracle Data Access

[http://www.oracle.com/technetwork/topics/dotnet/index-085163.html](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)

# html - CSS PIE 在一台计算机上工作但在另一台计算机上不工作（相同的浏览器）

> ID：12200427
> 
> 赞同：0
> 
> 时间：2012-08-30T15:30:20.573
> 
> 标签：html, css, internet-explorer

我正在尝试为我的网站使用 CSS Pie.htc。然而，发生了一件奇怪的事情...... CSS pie 在一台计算机上运行，​​但在另一台计算机上运行，​​即使浏览器是相同的（IE 8.0.6001.18702）。

我尝试以多种方式在我的选择器中编写行为，例如

```
behavior: url (PIE.htc)
behavior: url ('PIE.htc')
behavior: url(PIE.htc)
behavior: url('http://mysite.com/PIE.htc') 
```

我想不通。PIE.htc 文件位于网站的父根目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:37:26.103

按下可在 IE`F12`中查看[开发者工具；](http://msdn.microsoft.com/en-us/library/dd565628%28v=vs.85%29.aspx)两台机器上的浏览器模式设置相同吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:46:56.040

在 PIE 工作的计算机上检查 IE 的安全设置，然后与不能工作的计算机进行比较。可能是一台机器上的某些安全设置阻止了 PIE 执行。

# salesforce - 如何为具有简档的用户使用 Salesforce 共享规则？

> ID：12200433
> 
> 赞同：3
> 
> 时间：2012-08-30T15:30:34.753
> 
> 标签：salesforce

是否可以为具有个人资料的用户使用共享规则。如果用户有个人资料，它们有什么用吗？或者配置文件是否完全覆盖记录访问权限，以便我可以忘记共享规则？

我的所有用户都有个人资料。我想做的是将某些记录的“编辑”访问权限授予某些用户组。那可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:40:24.503

用户的角色决定了他们可以查看哪些记录，而他们的个人资料决定了他们可以对这些记录做什么。通常，配置文件覆盖角色的唯一情况是他们分配的配置文件包含对象的“查看全部”或“修改全部”权限之一。

例如，如果您设置了一个角色层次结构来划分组织的不同分支，则隐藏这些分支之间的数据可能很有用。在这种情况下，您可能希望将组织范围的默认设置设置为只读，并提供根据需要授予访问权限的共享规则（这些共享规则将基于用户的角色、公共组或他们属于）。

共享规则还允许您指定是否要授予编辑记录的能力或只是查看它们。因此，在您的情况下，您将希望创建一个共享规则，将一组用户拥有的记录的编辑权限授予您的第二组用户。

有关详细信息，请参阅[共享设置概述](https://login.salesforce.com/help/doc/en/managing_the_sharing_model.htm)。

# perl - 将非系统 perl 用于 Web 应用程序的推荐方法是什么？

> ID：12200435
> 
> 赞同：6
> 
> 时间：2012-08-30T15:30:57.427
> 
> 标签：perl, web-applications, perlbrew

我想在我的 web 服务器上运行一个 Catalyst 应用程序，它具有系统 perl v5.10。我想至少为应用程序使用 v5.12。我不想干预系统 perl。

我们的系统管理员坚持认为该应用程序。由非 shell 用户运行（例如“nobody”）

我知道我可以使用 perlbrew 来使用非系统 perl 进行开发，但我不确定运行实时版本的最佳方法是什么。人们建议如何处理这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T16:10:28.763

由于您熟悉 perlbrew，您仍然可以使用它来安装 Perl。

```
perlbrew install 5.16.1 --as=5.16.1t -Dusethreads 
```

您只需确保您授予适当的权限。说你`$PERLBREW_ROOT`是`/home/djh/perl5/perlbrew`（默认）：

```
chmod a+x /home/djh/
chmod a+x /home/djh/perl5/
chmod a+x /home/djh/perl5/perlbrew/
chmod a+x /home/djh/perl5/perlbrew/perls/
chmod -R a+rX /home/djh/perl5/perlbrew/perls/5.16.1t/  # Capital "X"!!! 
```

然后在脚本中使用以下 shebang 行：

```
#!/home/djh/perl5/perlbrew/perls/5.16.1t/bin/perl 
```

* * *

但也许你不希望它在你的家里。如果是这样，您可以这样做：

```
cd /tmp
wget http://search.cpan.org/CPAN/authors/id/R/RJ/RJBS/perl-5.16.1.tar.bz2
tar xvjf perl-5.16.1.tar.bz2
cd perl-5.16.1
sh Configure -des -Dprefix=/opt/perls/5.16.1t -Dusethreads
make test

sudo mkdir /opt/perls/5.16.1t
sudo chown djh:djh /opt/perls/5.16.1t
make install 
```

安装程序将正确设置权限。您所要做的就是将 shebang 设置为

```
#!/opt/perls/5.16.1t/bin/perl 
```

* * *

（“t”是我对线程构建的约定。`-Dusethreads`如果您不想要线程支持，请删除。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T15:40:52.883

授予`nobody`（即每个人）对 perl 可执行文件和所有库（`@INC`目录下的所有内容）的读取和执行权限。

将所有应用程序脚本（至少包括目录下的所有内容）中的 shebang 行更改为您要使用`./scripts`的实例。`perl`或者，如果您想灵活处理，请将 shebang 行指向指向所需`perl`可执行文件的符号链接。确保此链接也可供`nobody`.

每当您将符号链接指向不同版本的 Perl 时，重新启动您的应用程序。

# java - 在java中并行化网络请求

> ID：12200436
> 
> 赞同：1
> 
> 时间：2012-08-30T15:31:01.470
> 
> 标签：java, android, multithreading

我有一个`Response`对象用于表示对 Web 服务的发布响应。鉴于此代码：

```
Response resp1= Server.request(a);
Response resp2= Server.request(b);
Response resp3= Server.request(c);
if (resp1.isOk() && resp2.isOk() && resp3.isOk()){
    // Do stuff
} 
```

由于服务器有点慢，我想在 3 个线程中并行化请求。但我不知道如何让主线程等待结果并检索 3 个响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:38:03.413

您有一些基于*线程*的方法。

*   第一个是公开一个阻塞调用，例如，

    `resp1.waitFoCompletion();`

*   二是提供轮询机制（不是很好）

    `while(resp1.isCompleted())`

*   第三是提供一个回调，例如，您的主类可以实现

    `interface Callback() { void onCompletion(Result result); }`

但是一个重要的问题是，当您可以使用例如 时，为什么要自己这样做[`Executors`](http://developer.android.com/reference/java/util/concurrent/Executor.html)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:42:15.957

你不能。您将不得不分拆三个单独的线程，然后让主线程轮询三个线程并等待一段时间（如果它们没有完成）。如果您知道您的哪些服务很慢，您可以在为其他服务启动单独的线程后让主线程调用该服务，但您仍然必须处理其他一个在异常情况下需要更长时间的情况。

不过，有几条评论：如果这确实是一个加载问题，那么关闭额外的线程可能无济于事，而且实际上可能会受到伤害。这种方法只有在多个服务确实很慢时才会有所帮助，因为它们需要为这个调用做很多事情（而不是因为它们处于负载之下）。另外，它们必须在单独的硬件上；如果这些真的是共享硬件，那么你只会得到并行运行的错觉，因为每个都减慢了其他的速度，无论如何，只是以多线程的方式。

最后，您不应该无所适从地推出新线程。它们是一种相对昂贵的消耗性资源。你应该有一个线程池，这样它们的数量永远不会超过 N，而且你必须非常小心，它们永远不会落入黑洞。所以所有线程都需要超时，并且进程必须在所有可能的错误情况下始终清理并将线程返回到池中。

编辑：上一张海报建议使用 Executors，他还提到了回调。如果您按照他的链接，您会看到 Executor 的默认实现不会分离单独的线程，它只是等待完成，因此不会让您获得并行性。然而，executor-with-a-callback 模式是一个很好的实现线程池和集成我上面提到的轮询和等待机制的模式。您的执行程序处理线程池并启动任务，然后调用回调。您的主线程使用任务创建执行程序，而回调只是在主线程的对象中设置标志的东西。现在您的主线程只需要一个循环来查找所有设置的标志并等待。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:45:48.610

我想你可以做这样的事情来启动 3 个线程中的调用并等待它们的终止：

```
private Response resp1, resp2, resp3;

protected void doRequests() {
    Thread thread1 = new Thread() {
        public void run() {
            resp1= Server.request(a);           
        }
    };
    Thread thread2 = new Thread() {
        public void run() {
            resp1= Server.request(a);           
        }
    };
    Thread thread3 = new Thread() {
        public void run() {
            resp1= Server.request(a);           
        }
    };

    thread1.start();
    thread2.start();
    thread3.start();

    try { thread1.join(); } catch(InterruptedException e) { }
    try { thread2.join(); } catch(InterruptedException e) { }
    try { thread3.join(); } catch(InterruptedException e) { }
} 
```

# wpf - 为什么在控件上使用弱事件模式而不是在其他地方管理生命周期？

> ID：12200438
> 
> 赞同：3
> 
> 时间：2012-08-30T15:31:03.840
> 
> 标签：wpf, garbage-collection, weak-references, weak-events

我了解弱引用和弱事件模式。

使用弱事件模式的一个地方是在控件和数据模型之间的数据绑定中。在DataBinding过程中，如果DataModel支持INotifyPropertyChange，Control会通过事件请求DataModel通知他改变。如果没有弱事件，DataModel 将在控件上保留一个硬引用。由于该引用，无法在窗口变为可用于 GC 的同时将控件标记为可用于 GC。

微软决定使用弱引用来解决这个问题。

我想知道像提议的其他替代方案是否会更好？

替代方案：使用传递其子 UiElements 的代码在 Window 上实现 IDisposable 以要求他们将其 DataBinding 删除到 DataModel ？该解决方案有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T00:22:53.150

使用弱事件有一个基本优势：将 Control 与 DataModel 解除绑定的任务留给垃圾收集器本身。垃圾收集器通常在低优先级线程中运行，该线程仅在系统空闲或需要释放内存时才被激活，因此它不会减慢其他活动的速度。相比之下，让 IDisposable 将 Control 从 DataModel 中分离出来意味着，如果您手动处置 Control，则必须在常规调用者的线程中进行解除绑定。

另一个方面（这是 MVC 模式强制要求的）是让模型独立于视图。如果您将对象生命周期视为依赖项，那么弱引用正是保持模型独立所需要的，因为您不必依赖控件的合作来释放绑定。

# php - 使用正则表达式，替换以“嵌入：”开头的文本块中的任何行

> ID：12200440
> 
> 赞同：0
> 
> 时间：2012-08-30T15:31:08.413
> 
> 标签：php, regex, string

正如标题所说，我正在寻找一个使用 php 代码的正则表达式，它给出了一个带有换行符的 $string，如下所示：

```
Hello my name is John Doe. Here is a cool video:

embed:http://youtube.com/watch......

I hope you liked it! 
```

它会返回：

```
Hello my name is John Doe. Here is a cool video:

I hope you liked it! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:34:12.747

尝试这个 ：

```
preg_replace('#embed:.*?\n*#m', '', $string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:35:32.433

这应该这样做：

```
preg_replace('/^embed:.*\s*/m', '', $block_of_text); 
```

解释：

1.  `/m`修饰符启用多行模式（因此您可以轻松匹配基于行的模式）

2.  它使用插入符号（锚）匹配行的开头：`^`

3.  匹配`"embed:`字符串

4.  使用匹配直到行尾`.*`

5.  匹配当前行之后的任何换行符和空格（这可以更好地清理空行）

# php - PHP SQL 搜索表单语法

> ID：12200441
> 
> 赞同：0
> 
> 时间：2012-08-30T15:31:13.103
> 
> 标签：php, sql

我有一个搜索 SQL 数据库的 php 表单。据说有八个表单字段，每个字段都是可选的。如果所有内容都留空，则查询将返回整个数据库。如果填写了一个字段，它将按一个字段过滤，两个它将按两个过滤，等等。在我想要搜索空条目的能力之前，我没有任何问题。例如，我想搜索客户有姓氏但没有主要电话号码的位置。我已经工作了几个小时，想不出一种简单的方法来实现这样的事情。我设想它是当您在搜索字段中键入关键字以在其他所有内容之上搜索该项目为空的位置。因此，如果我将“Smith”放入姓氏并将“NULL”放入电话号码，它将适用于我上面的示例。以下是我当前的代码。

```
$query = "SELECT * 
          FROM customer_search_view 
          WHERE COALESCE(customer_search_view.first_name,'') LIKE $firstName AND 
            COALESCE(customer_search_view.last_name,'') LIKE $lastName AND 
            COALESCE(customer_search_view.customer_id,'') LIKE $customerId AND 
            COALESCE(customer_search_view.primary_phone,'') LIKE $primaryPhone AND 
            COALESCE(customer_search_view.email,'') LIKE $email AND 
            COALESCE(customer_search_view.store,'') LIKE $store AND 
            COALESCE(customer_search_view.sales_associate,'') LIKE $salesAssociate AND 
            COALESCE(customer_search_view.bdr_associate,'') LIKE $bdrAssociate AND 
            COALESCE(customer_search_view.status,'') LIKE $status AND 
            COALESCE(customer_search_view.lead_category,'') LIKE $leadCategory 
          ORDER BY created_on DESC LIMIT 0,100"; 
```

如果无论如何要搜索 LIKE NULL 的位置，它也将是一个快速修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:50:51.810

找到 NULL 的唯一方法是使用`COALESCE(customer_search_view.primary_phone,'') IS NULL`，因此您需要将变量扩展为

```
COALESCE(customer_search_view.primary_phone,'') $primaryPhoneOperator $primaryPhone 
```

如果您无法更改前端，则可以在查询之前遍历值，例如

```
if(empty($primaryPhone)) { $primaryPhoneOperator = "IS NULL";  } else { $primaryPhoneOperator = "LIKE"; } 
```

# php - 在服务器上上传后自动编辑文件

> ID：12200442
> 
> 赞同：0
> 
> 时间：2012-08-30T15:31:15.293
> 
> 标签：php, javascript, html

一件事困扰着我。我打算进入一些在上传时自动编辑文件的脚本。

我的意思是喜欢。我有一个表格，有人上传了一个html。该脚本编辑 html 的某些部分，然后为用户提供新编辑的 html。

就像我们在在线转换器中看到的那样。任何形式的帮助将不胜感激。

提前非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:37:33.593

1.  上传您的文件。
2.  [读取文件的内容](http://ie2.php.net/file_get_contents)。
3.  [解释和改变那些内容](http://docs.php.net/manual/en/domdocument.loadhtml.php)。
4.  [用更改的内容替换旧内容](http://php.net/manual/en/function.fwrite.php)。
5.  向用户显示新内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:38:09.817

当然这仍然取决于什么样的文件和什么样的编辑。

但总体思路是：

1.  保存一个 tmp 文件
2.  使用正确的解析器解析文件
3.  输出新文件
4.  如果需要，删除 tmp 文件
5.  通知用户完成

没有更多信息，很难提供更多建议。

# jquery - 删除按钮的悬停/单击状态

> ID：12200444
> 
> 赞同：0
> 
> 时间：2012-08-30T15:31:35.737
> 
> 标签：jquery, css, jquery-mobile

如何覆盖 jQuery Mobile 按钮的悬停和单击状态？

我有一个这样的按钮：

```
<a class="aButton" href='#' data-role="button" data-icon="check">My Button</a> 
```

如果我使用以下 CSS 覆盖，如果我按住它或单击它，它仍然会突出显示按钮，我不想要任何这些。我只是不知道是什么导致了突出显示，我已经尝试了所有方法（它是按钮样式 B，但我认为我会将所有其他类放在以防万一）！

```
.ui-btn, a, .aButton, .ui-btn-a, .ui-btn-b, .ui-btn-c, .ui-btn-d, .ui-btn-e, .ui-btn-down-a, .ui-btn-down-b, .ui-btn-down-c, .ui-btn-down-d, .ui-btn-down-e, .ui-btn-hover-a, .ui-btn-hover-b, .ui-btn-hover-c, .ui-btn-hover-d, .ui-btn-hover-e {
    background: -moz-linear-gradient(#DDDDDD, #CCCCCC) repeat scroll 0 0 #030303 !important;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:41:23.497

使用`:hover`和`:active`

例如`.aButton:active{ /* styles */ }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:48:54.457

才意识到我在做一些愚蠢的事情。根本没有应用背景，因为我在我的 Android 手机上使用了**-moz** -linear-gradient ，而它应该是**-webkit** -linear-gradient ... wooops。

# c# - 数据绑定后的目标手风琴窗格内容模板，以便我可以按需加载数据？

> ID：12200446
> 
> 赞同：1
> 
> 时间：2012-08-30T15:31:42.367
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我有一个手风琴，它的一个窗格中有另一个手风琴。这个内部手风琴是使用数据源创建的，因此它的每个窗格都是从对象列表中加载的。在这种特殊情况下，这个数据源也是按需加载的。现在，我卡住的地方是我希望能够仅加载窗格标题，然后在单击窗格时加载内容；类似于我在外窗格中的内容。我在这里感到困惑的原因是，单击窗格时会发生延迟加载，但是由于这发生在数据绑定之后，因此我不知道如何引用调用 ItemCommand 的窗格的内容。不确定这是否有意义。这是内部手风琴：

```
<ajaxToolkit:Accordion runat="server" ID="accReviewers" OnItemDataBound="accOuterAccordion_ItemDataBound" ContentCssClass="ReviewerContent" RequireOpenedPane="False" SelectedIndex="-1" OnItemCommand="accReviewers_ItemCommand">
            <HeaderTemplate>
                <div>
                    <asp:LinkButton Text='<%#Eval("Header") %>' CssClass="InReviewHeader" runat="server" 
                    CommandName="LoadReviewers" CommandArgument='<%#Eval("MocRequestId") %>'/>    
                </div>
            </HeaderTemplate>
            <ContentTemplate>
                <div>
                    <asp:ListView runat="server" ID="lvReviewers" ItemPlaceholderID="phReviewer" OnItemDataBound="lvReviewers_ItemDataBound">
                        <LayoutTemplate>
                            <div>
                                <asp:HyperLink runat="server" ID="lnkGotoRequest" Text="View this request"/>
                            </div>
                            <asp:PlaceHolder runat="server" ID="phReviewer"/>
                            <div style="margin-top: 5px;">
                                <asp:Button runat="server" ID="btnResubmit" Text="Resubmit" CssClass="ResubmitInitial"/>    
                            </div>
                        </LayoutTemplate>
                        <ItemTemplate>
                            <div class="ReviewerItem">
                                <%#Eval("Assignee.Name") %><br />
                                <img src="" alt="Reviewer" runat="server" ID="imgReviewer" width="75" style="border: 1px solid gray; border-radius: 6px;"/><br />
                                <asp:Label runat="server" ID="lblStatus" Text='<%#Eval("ReviewStatus") %>' />
                                <asp:HyperLink runat="server" ID="lnkRejectComment" CssClass="InitialRejectComment">(details)</asp:HyperLink>
                            </div>
                        </ItemTemplate>
                    </asp:ListView>
                </div>
            </ContentTemplate>
        </ajaxToolkit:Accordion>
    </Content>  
</ajaxToolkit:AccordionPane> 
```

如您所见，手风琴 accReviewers 是通过 DataSource 生成的。在单击 LinkBut​​ton 之前，LayoutTemplate 中包含的列表视图不会绑定其数据源，这将触发 item 命令。还值得注意的是，整个手风琴都包含在一个 UpdatePanel 中。

这是我开始使用的代码，但它似乎没有获得正确的列表视图实例，虽然列表不为空，但它不会显示任何内容：

```
 protected void accReviewers_ItemCommand(object sender, CommandEventArgs e)
    {
        var mocId = int.Parse(e.CommandArgument.ToString());
        var list = (sender as AjaxControlToolkit.Accordion).FindControl("lvReviewers") as ListView; //APPARENTLY WRONG
        var reviewers = MocApi.GetReviews(mocId); 
        list.DataSource = reviewers;
        list.DataBind();
    } 
```

回顾一下，当单击 HeaderTemplate 中的 LinkBut​​ton 时，我需要以某种方式获得对 ListView 正确实例的引用，以便我可以绑定它的数据源。与往常一样，感谢任何帮助或见解。这与我的上一个问题相似，但特定于在数据绑定之后获得此参考，这似乎有点复杂。TIA

更新：我发现如果我能以某种方式捕获它的索引，我可以绑定项目数据源。我正在探索尝试在内部手风琴的数据绑定期间将其设置为命令参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:56:56.017

我设法用一些小的恶作剧解决了这个问题：

这是标记：

```
<ItemTemplate>
    <div class="ReviewerItem">
        <%#Eval("Assignee.Name") %><br />
        <div style="display: inline-block; position: relative;">
            <img src="" alt="Reviewer" runat="server" ID="imgReviewer" width="75" style="border: 1px solid lightgray; border-radius: 6px; overflow: hidden;"/><br />    
            <div runat="server" ID="divYes" Visible="False">
                <img src="../Images/Yes.png" alt="Approved" class="ApprovalIcon"  />
            </div>
            <div runat="server" ID="divNo" Visible="False">
                <img src="../Images/No.png" alt="Rejected" class="ApprovalIcon" id="imgNo" />
            </div>
        </div>
        <asp:Label runat="server" ID="lblStatus" Text='<%#Eval("ReviewStatus") %>' />
        <asp:HyperLink runat="server" ID="lnkRejectComment" CssClass="InitialRejectComment">(details)</asp:HyperLink>
        <asp:Panel runat="server" ID="pnlDemoApproval" Visible="False" CssClass="DemoButtons">
            <asp:Button runat="server" ID="btnApprove" Text="Approve" CommandArgument='<%#Eval("Assignee.Guid") + "|" + Eval("Ticketid") %>' CommandName="ApproveReview"/>
            <asp:Button runat="server" ID="btnDeny" Text="Deny" CommandArgument='<%#Eval("Assignee.Guid") + "|" + Eval("Ticketid") %>' CommandName="DenyReview"/>
        </asp:Panel>
        <ajaxToolkit:BalloonPopupExtender runat="server" ID="balloon" BalloonPopupControlID="pnlPopup"
        TargetControlID="lnkRejectComment" Position="TopRight" BalloonStyle="Cloud" BalloonSize="Medium" DisplayOnMouseOver="True"/>
        <asp:Panel runat="server" ID="pnlPopup">Rejection Reason</asp:Panel>
    </div>
</ItemTemplate> 
```

在数据绑定上，我捕获了该项目，以便我可以获取索引并将其设置为 CommandName 以供以后使用：

```
AjaxControlToolkit.AccordionItemEventArgs e)
{
    if (e.ItemType != AjaxControlToolkit.AccordionItemType.Content) return;
    var index = e.ItemIndex;
    var button = e.AccordionItem.Parent.FindControl("lnkbHeader") as LinkButton;
    if (button != null) button.CommandName = index.ToString();
} 
```

现在该控件包含索引，我可以使用它来定位正确的窗格并绑定其数据源：

```
protected void accReviewers_ItemCommand(object sender, CommandEventArgs e)
{
    //This seems stupid to put here, but for some reason the item command bypasses the listview catch and passes it to the accordion

    if (e.CommandName == "ApproveReview")
    {
        var assigneeGuid = new Guid(e.CommandArgument.ToString().Split('|')[0]);
        var ticketId = int.Parse(e.CommandArgument.ToString().Split('|')[1]);
        var ticket = new MocApproval(ticketId);
        DoDemoApproval(ticketId, assigneeGuid, true);
        var approvalIndex = (sender as AjaxControlToolkit.Accordion).SelectedIndex;
        var lv =
            (sender as AjaxControlToolkit.Accordion).Panes[approvalIndex].FindControl("lvReviewers") as ListView;
        lv.DataSource = MocApi.GetReviews(ticket.MocRequest);
        lv.DataBind();
        return;
    }
    if (e.CommandName == "DenyReview")
    {
        var assigneeGuid = new Guid(e.CommandArgument.ToString().Split('|')[0]);
        var ticketId = int.Parse(e.CommandArgument.ToString().Split('|')[1]);
        var ticket = new MocApproval(ticketId);
        DoDemoApproval(ticketId, assigneeGuid, false);
        var approvalIndex = (sender as AjaxControlToolkit.Accordion).SelectedIndex;
        var lv =
            (sender as AjaxControlToolkit.Accordion).Panes[approvalIndex].FindControl("lvReviewers") as ListView;
        lv.DataSource = MocApi.GetReviews(ticket.MocRequest);
        lv.DataBind();
        return;
    }

    ... 
```

# php - $_GET 到动态 URL

> ID：12200447
> 
> 赞同：1
> 
> 时间：2012-08-30T15:31:51.950
> 
> 标签：php, url, get

我创建了这样的动态网址：

```
http://www.example.com/index.php?page=test 
```

但是，如果我通过 GET 发送值，则无法获取值，因为 URL 的结构如下：

```
http://www.example.com/index.php?page=test?value=1 
```

不使用 POST 如何获取值？这是因为我使用第三方应用程序，他们只支持 GET。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:37:04.380

如果您创建动态网址，例如

`http://www.example.com/index.php?page=test&`

那么你会得到

`http://www.example.com/index.php?page=test&?value=1`

我相信你应该能够使用它。然后，您只需在初始 ? 之后查找第一个参数？我`$_GET['?value']`相信

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:43:57.503

我希望我理解了这个问题，但是您可以分配一个完整的变量列表，`&`其中第一个变量除外。

```
$page = 'test&value=1'; 
```

然后将其分配给您的网址。

# vb.net - 为每个实例提供 Forms.WebBrowser 插件安装程序

> ID：12200448
> 
> 赞同：0
> 
> 时间：2012-08-30T15:31:56.063
> 
> 标签：vb.net, winforms, plugins, browser

我一直在努力升级应用程序，并且遇到了两堵砖墙，尽管这个问题只与第一个有关。

我们允许用户从基于 Web 的文档服务中添加附件，因此当用户在我们的应用程序中单击其中一个表单上的按钮时，它会打开一个 Forms.WebBrowser 实例，它本质上是一个 IE 包装器。我在注册表中添加了一个值，使其在 IE8 兼容模式下运行，因为此文档服务不支持 IE7 兼容模式（Forms.WebBrowser 默认为该模式）。这是我对我创建的 Forms.WebBrowser 实例所做的唯一更改。

当我打开 WebBrowser 时，它立即给我一个弹出窗口，说要为文档服务安装一个插件，我知道我肯定已经安装在我的计算机上。我可以单击安装或不安装，它似乎仍然可以正常工作。问题是，每次我从应用程序打开 WebBrowser 时都会发生这种情况，我真的不希望我的用户遇到这种情况，并且每次他们想要从中添加附件时都必须按什么感到困惑文件服务。

有没有办法让 WebBrowser 引用我正常安装的 IE 的已安装插件，或者如果这不可能，有没有办法自动接受或拒绝插件安装（应用程序以完全信任的方式运行），甚至在最坏的情况下，我们可以让 Forms.WebBrowser 阻止所有弹出窗口，并且在没有插件的情况下继续吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:55:17.800

尝试使用[ScriptErrorsSuppressed 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.scripterrorssuppressed.aspx)。它应该禁用所有对话框，而不仅仅是脚本错误。

# hibernate - 在 Hibernate 中防止延迟加载

> ID：12200449
> 
> 赞同：0
> 
> 时间：2012-08-30T15:31:57.193
> 
> 标签：hibernate, hibernate-mapping, hibernate-annotations

是否可以仅在一个集合上防止延迟加载？假设我们有对象 A，里面有两个集合（例如@OneToMany）。他们俩都很懒惰。我想对第二个集合执行类似驱逐的操作，但仍然有可能获取第二个集合的数据，因此驱逐整个父对象不是我的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:56:16.637

好的，我假设设置 null 值并不是一个糟糕的解决方案。它的意思是——“我不想在这个集合中拥有任何东西”。但是，如果有人知道更多关于仅在一个代理/集合上阻止惰性的潜在可能性，那么在这里有这些信息会很好。

问候。

# pdf - Ghostscript 脚本或其他，从两个多页 pdf 文件中交错奇数页和偶数页

> ID：12200450
> 
> 赞同：2
> 
> 时间：2012-08-30T15:32:01.030
> 
> 标签：pdf, ghostscript, pdftk

我的扫描仪有进纸但没有双面扫描。因此，如果我扫描打印在纸张两面的多页文档，我将得到两个 pdf 文件，一个包含所有奇数页（奇数页 pdf 文件），另一个包含所有偶数页（偶数页 pdf 文件）。

我觉得应该可以有一个 Ghostscript 脚本来合并这两个文件，从而使偶数页 pdf 文件中的每一页都像其他页面一样添加到奇数页 pdf 文件中。

有人知道该怎么做吗？

优选地，脚本将采用参数，以便第一个参数指定输出文件，第二个参数指定奇数页 pdf 文件，第三个参数指定偶数页 pdf 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-22T15:03:38.693

简单得多：（来自[超级用户](https://superuser.com/questions/516612/merge-two-pdf-files-containing-even-and-odd-pages-of-a-book)）

```
pdftk A=even.pdf B=odd.pdf shuffle A B output merged.pdf 
```

或者如果 B 的页面顺序相反：

```
pdftk A=even.pdf B=odd.pdf shuffle A Bend-1 output merged.pdf 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T07:05:47.557

所以，如果我理解正确的话，你有两个 pdf 文件

*   奇数.pdf
*   偶数.pdf

你需要从这两个多页pdf文件中交错这些页面：（奇数，偶数，奇数......等等......）

我前段时间写了，出于同样的需要，我附上了一个脚本，它是交互式的，这意味着它要求参数，如果您更喜欢非交互式脚本，我可以修改它

它只需要**PDFTK**

```
#!/bin/bash
#script able to interleave the pages of two pdf files, saving the result in a new pdf file. Useful for any use, specially to mount parallel text books
echo "enter the name (with extension) of first PDF"
read filename1
echo "enter the name (with extension) of second PDF"
read filename2
pages1="`pdftk $filename1 dump_data output |grep Pages|cut -f2 -d :`"
pages2="`pdftk $filename2 dump_data output |grep Pages|cut -f2 -d :`"

if [ $pages1 -gt $pages2 ]
    then
    pagesincr="$(echo "scale=0; $pages2+1" |bc -l)"
echo "$filename1 has $pages1 pages"
echo "$filename2 has $pages2 pages"

rule="$(for x in $(seq 1 $pages2); do echo -n "A$x B$x ";  done; for x in $(seq $pagesincr $pages1); do echo -n "A$x ";done)"

    echo $rule

        elif
        [ $pages2 -gt $pages1 ]
            then
    pagesincr="$(echo "scale=0; $pages1+1" |bc -l)"

echo "$filename1 has $pages1 pages"
echo "$filename2 has $pages2 pages"

rule="$(for x in $(seq 1 $pages1); do echo -n "A$x B$x ";  done; for x in $(seq $pagesincr $pages2); do echo -n "B$x ";done)"

    echo $rule
                else
echo "$filename1 has $pages1 pages"
echo "$filename2 has $pages2 pages"

rule="$(for ((a=1, b=1; a <= $pages1, b <= $pages2 ; a++, b++)); do echo -n "A$a B$b "; done)"

echo $rule
fi

pdftk A=$filename1 B=$filename2 cat $rule output interleaved.pdf
echo "file created!"
exit 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-10T08:25:32.427

我在上面尝试了 Dingo 的脚本，它似乎运行良好。

但是，在我的情况下，“偶数”文件中的页面是相反的。我只是将整叠页面翻过来并放回扫描仪中。因此，如果我扫描了 5 个双面页面，我将拥有：

奇数：1、3、5、7、9

偶数：10、8、6、4、2

我需要的是最终输出： A1 B5 A2 B4 A3 B3 A4 B2 A5 B1

```
#!/bin/bash
#script able to interleave the pages of two pdf files, saving the result in a new pdf file. 
#Useful for any use, specially to mount parallel text books

# This version assumes that filename2 is in the reverse order
# This is normally what happens if you just flip the pages over
# and scan the second side.

args=$#

if [[ $args -ge 2 ]]
then
  filename1=$1
  filename2=$2
  if [[ $args -ge 3 ]]
  then
    outputfile=$3
  else
    outputfile="interleaved.pdf"
    echo "output file will be: $outputfile"
  fi
else
  echo "enter the name (with extension) of first PDF"
  read filename1
  echo "enter the name (with extension) of second PDF"
  read filename2
  echo "enter the name (with extension) of the output PDF"
  read outputfile
fi

pages1="`pdftk "$filename1" dump_data output |grep Pages|cut -f2 -d :`"
pages2="`pdftk "$filename2" dump_data output |grep Pages|cut -f2 -d :`"

if [ $pages1 -gt $pages2 ] 
then
      pagesincr="$(echo "scale=0; $pages2+1" |bc -l)"
      echo "$filename1 has $pages1 pages"
      echo "$filename2 has $pages2 pages"

      rule="$(for ((a=1, b=$pages2 ; a <= $pages1, b >= 1 ; a++, b--)); do echo -n "A$a B$b "; done; for x in $(seq $pagesincr 1 $pages1); do echo -n "A$x ";done)"

      echo $rule

elif [ $pages2 -gt $pages1 ] 
then

      echo "$filename1 has $pages1 pages"
      echo "$filename2 has $pages2 pages"

      pagesincr=$(($pages2 - $pages1))
      echo $pagesincr
      rule="$(for ((a=1, b=$pages2 ; a <= $pages1, b >= (($pages2 - $pages1 + 1)) ; a++, b--)); do echo -n "A$a B$b "; done;  for x in $(seq $pagesincr -1 1); do echo -n "B$x ";done)"

      echo $rule
else
  echo "$filename1 has $pages1 pages"
  echo "$filename2 has $pages2 pages"

  rule="$(for ((a=1, b=$pages2 ; a <= $pages1, b >= 1 ; a++, b--)); do echo -n "A$a B$b "; done)"

  echo $rule
fi

pdftk A="$filename1" B="$filename2" cat $rule output "$outputfile"
echo "file created!"
exit 0 
```

注意。您可以在命令行上提供文件名，或者脚本会询问您。

希望对其他人有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T00:43:50.520

如果要合并 PDF 交错页面，请使用 jPDF Tweak。要反转所有页面的顺序，请使用 PDFTools

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T18:29:59.297

问题是您需要一次打开 2 个 PDF 文件才能有效地执行此操作，而目前我认为这是不可能的。

我能快速想到的唯一方法是使用“%d”格式的 OutputFile 选项将每个 PDF 的每一页输出到单独的文件中。然后，您可以将各个文件反馈给 Ghostscript，以将它们全部组合成一个最终的 PDF 文件。

您可能可以通过编写一些 PostScript 来完成基本相同的任务，但使用 shell 脚本可能更容易。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-22T08:13:33.413

我编写了一个 java 应用程序（Windows/Linux），它就是这样做的！您必须扫描一个 PDF 中的所有偶数页，然后扫描 PDF 中的所有奇数页（使用进纸器），然后您可以使用此工具将它们合并：

[http://sourceforge.net/projects/duplexmerger/](http://sourceforge.net/projects/duplexmerger/)

您只需输入 2 个 PDF 文件的路径，其余的将自动处理。:)

# javascript - 使用 javascript onclick 下拉菜单交换图像

> ID：12200455
> 
> 赞同：0
> 
> 时间：2012-08-30T15:32:11.783
> 
> 标签：javascript, jquery, html, image, drop-down-menu

所以我得到了这个有图像的代码，当你点击它时，会出现一个下拉菜单。很简单。该代码工作正常，但我试图在点击时合并图像交换，但我遇到了困难。这是 HTML 和 JS（也有一些 CSS，但我会省略）：

HTML：

```
<div id="header">
  <dl class="dropdown">
    <dt><a href="#"><img src="images/cogwheel_btn.png"/></a></dt>
    <dd>
    <ul>
        <li><a href="#">Favorites</a></li>
        <li><a href="#">History</a></li>
    </ul>
    </dd>
  </dl>
</div> 
```

JS：

```
$(document).ready(function() {
$(".dropdown dt a").click(function() {
    $(".dropdown dd ul").toggle();
});     
$(".dropdown dd ul li a").click(function() {
    var text = $(this).html();
    $(".dropdown dt a span").html(text);
    $(".dropdown dd ul").hide();
    $("#result").html("Selected value is: " + getSelectedValue("sample"));
});       
function getSelectedValue(id) {
    return $("#" + id).find("dt a span.value").html();
}
$(document).bind('click', function(e) {
    var $clicked = $(e.target);
    if (! $clicked.parents().hasClass("dropdown"))
    $(".dropdown dd ul").hide();
});
}); 
```

我试过添加像 ("dt").empty(); 这样的行 然后 ("dt").html("new_image") 但它会导致下拉功能停止工作。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:55:32.610

我在 JSFiddle 创建了代码。只需检查这是否是您希望它的行为方式：

[http://jsfiddle.net/3L3At/2/](http://jsfiddle.net/3L3At/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:58:59.440

我认为您会想要更新图像的 src 属性-

您可以像这样在下拉列表中找到图像：

```
$('.dropdown dt img') 
```

然后更新 src 属性

```
$('.dropdown dt img').attr('src', '/newimage.jpg'); 
```

我怀疑您会希望在 click 函数中使用它，如下所示：

```
$(".dropdown dt a").click(function() {
    $(".dropdown dd ul").toggle();
    $('.dropdown dt img').attr('src', '/newimage.jpg');
}); 
```

请注意，如果您希望它打开/关闭，您可以通过检查检查`ul`元素的可见性[`.is(':visible')`](http://api.jquery.com/visible-selector/)。或者更好的是，用 div 替换图像，并使用用[`toggleClass()`](http://api.jquery.com/toggleClass/).

# python - django-fiber 内容模板

> ID：12200466
> 
> 赞同：1
> 
> 时间：2012-08-30T15:32:33.823
> 
> 标签：python, django, fiber

我目前正在我们的一个项目中实施**Django-fiber**。但是我发现文档非常缺乏。我正在尝试为网站上的不同内容块使用**自定义内容模板**。

我添加了

```
FIBER_CONTENT_TEMPLATE_CHOICES = (
('', 'Default template'),
('three-columns.html', 'Special template'),
) 
```

但是我似乎无法使用`three-columns.html`模板，该模板已放在**django-fiber**的模板目录中。页面的自定义模板完美运行。

我很想从一直在使用纤维的人那里得到一些反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:34:04.113

不确定您是如何设置的，但我只是在 settings.py 中将 PROJECT/templates 添加到 TEMPLATES_DIRS 中。在里面我有一个带有我自己的模板的纤维子目录。

光纤设置如下：

```
FIBER_DEFAULT_TEMPLATE = 'fiber/content_base.html'
FIBER_CONTENT_TEMPLATE_CHOICES = (
    ('', 'Default template'),
    ('fiber/three-columns.html', 'Special template'),
) 
```

如果您通过应用程序添加模板，那么它将寻找：

```
PROJECT/App_name/templates/three-columns.html 
```

请记住，如果您更改 FIBER_CONTENT_TEMPLATE_CHOICES，您还需要更新数据库记录。

# c++ - MSVS2010中“%”宏和“$”宏的区别

> ID：12200475
> 
> 赞同：0
> 
> 时间：2012-08-30T15:33:09.220
> 
> 标签：c++, visual-studio-2010, msbuild

我是 MSVS2010 的新手。我正在将解决方案从 MSVS2005 移植到 MSVS2010。我们使用英特尔编译器 9.1，现在使用英特尔编译器 12.1。因此，这些项目之前被拆分为两个文件：*.vcproj 和 *.icproj。现在它们只保存在一个文件中：*.vcxproj。

好。我看到一些使用 %(MACRONAME) 宏的地方。我知道 $(MACRONAME) 喜欢 $(OutDir) 但**%(...) 是什么意思？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:40:38.640

%( *ItemMetadataName* ) 是[MSBuild 批处理](http://msdn.microsoft.com/en-us/library/ms171473.aspx)语法。有目标批处理和任务批处理，两者都用于根据项目的元数据迭代目标或任务。

# c# - 是否可以通过使用它实现的接口之一来过滤接口上可用的属性？

> ID：12200476
> 
> 赞同：1
> 
> 时间：2012-08-30T15:33:09.680
> 
> 标签：c#, oop, interface

**背景：**

我不确定如何表达这个问题，所以这是我想要实现的示例：

```
public interface IEverythingVM : IA, IB
{
    MyTypeA {get;}
    MyTypeB {get;}
    MyTypeC {get;}

    MyTypeD {get;}
    MyTypeE {get;}
    MyTypeF {get;}
}

public class EverythingVM : IEverythingVM
{
    // Populate everything from MyTypeA to MyTypeF
}

public interface IA
{
    MyTypeA {get;}
    MyTypeB {get;}
    MyTypeC {get;}
}

public interface IB
{
    MyTypeD {get;}
    MyTypeE {get;}
    MyTypeF {get;}
} 
```

**实现：**

我的印象是我可以做类似以下的事情，但是写出来之后，它为什么不起作用就很明显了——我正在尝试做一些大的事情，去定义它，然后*重新定义*它，这是一个概念太荒谬了，让我想大声笑出来。

```
{
    IA varIA = new EverythingVM(param1, param2);
    IB varIB = new EverythingVM(param1, param2);

    var cm = new ComparisonManager(varIA, varIB);        
}

public class ComparisonManager
{
    public ComparisonManager(IEverythingVM varEIA, IEverythingVM varEIB)
    {
        // be able to acces MyTypeA, MyTypeB & MyTypeC from varEIA
        // be able to acces MyTypeD, MyTypeE & MyTypeF from varEIB
    }
} 
```

**问题**：

最终，我想要实现的是，在某些情况下我想要`MyTypeA`，`MyTypeB`&`MyTypeC`可用`ComparisonManager`，而在其他情况下，我想要`MyTypeD`，`MyTypeE`&`MyTypeF`可用`ComparisonManager`。鉴于当前的结构，我有什么办法可以实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:37:59.567

你为什么不这样做：

```
public class ComparisonManager
{
    public ComparisonManager(IA varEIA, IB varEIB) {}
} 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:14:10.037

事实证明，解决方案是：

```
public class ComparisonManager<T>
{
    private readonly T _diskServiceVm;
    private readonly T _panelServiceVm;

    public ComparisonManager(T diskServiceVm, T panelServiceVm)
    {
        _diskServiceVm = diskServiceVm;
        _panelServiceVm = panelServiceVm;
    }
} 
```

执行：

```
if (/* circumstance A */)
{
    IA varIA = new A(varA, varB);
    IA varIB = new B(varA, varB);

    // this knows how to deal with MyTypeA, MyTypeB & MyTypeC
    var comparisonManager = new ComparisonManager<IA>(varIA , varIB);
}
else
{
    IB varIA = new A(varA, varB);
    IB varIB = new B(varA, varB);

    // this knows how to deal with MyTypeD, MyTypeE & MyTypeF
    var comparisonManager = new ComparisonManager<IB>(varIA , varIB);
} 
```

# mysql - 两个具有相同列的表或一个具有附加列的表？

> ID：12200478
> 
> 赞同：8
> 
> 时间：2012-08-30T15:33:17.357
> 
> 标签：mysql, database, database-design

假设我有两个表（Apples 和 Oranges），它们的列相同，只是表名不同。将它变成一个表（假设它称为 Fruit）并带有一个附加列“type”，然后存储 Apple 或 Orange 的值是否有任何优点/缺点？

编辑以澄清：

CREATE TABLE 苹果（id int，weight int，variety varchar(255)）

CREATE TABLE 橙子（id int，weight int，variety varchar(255)）

或者

CREATE TABLE fruit ( id int, weight int, 品种 varchar(255), type ENUM('apple', 'orange') )

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T17:16:28.990

取决于约束：

*   `apples`您是否有不存在的外键或检查`oranges`（反之亦然）？
*   您是否需要在两个表中保持键的唯一性（因此 no`apple`可以具有与 some 相同的 ID `orange`）？

如果这两个问题的答案是：**“是”**和**“否”**，请将表分开（这样可以将约束设置为特定于表的¹）。

如果答案是：**"no"**和**"yes"**，请将它们合并在一起（这样您就可以创建一个跨越两者的键）。

如果答案是：**“是”**和**“是”**，请考虑模拟继承²：

![在此处输入图像描述](../Images/2bf83b1e2f92c1b964ac8997123e08be.png)

* * *

*¹ [查找数据](https://stackoverflow.com/a/12124811/533120)是看起来相似的表的典型示例，但必须保持独立，以便 FK 可以保持独立。*

*²具体来说，这是表示继承（又名类别、子类化、子类型化、泛化层次结构等）的“单独表中的所有类”策略。您可能想查看[这篇文章](https://stackoverflow.com/a/12037398/533120)以获取更多信息。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:38:29.490

如果确实没有任何进一步的业务规则（以及由此产生的基础数据要求）将这两种子类型分开，那么我将使用一个带有 fk 的表到 FruitType 查找表。

您没有提及您将使用什么来访问可能会影响您采用哪种方法的架构（例如，如果您使用的平台为您的数据库提供 ORM，那么这可能值得注意）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:40:41.437

优点是标准化。然后，您的表格将采用 2NF（[第二范式](http://en.wikipedia.org/wiki/Second_normal_form)）。你的水果`type`将是一张桌子的外键，上面有这样的水果：

```
CREATE TABLE fruit_type (type varchar(15))

CREATE TABLE fruits (id int, weight int, variety varchar(255), type varchar(15)) 
```

# asp.net - 基于 asp.net 的聊天 - 从这里去哪里？

> ID：12200479
> 
> 赞同：0
> 
> 时间：2012-08-30T15:33:18.557
> 
> 标签：asp.net, .net

我正在我的网站上构建一个非常简单的聊天页面，这是我目前所拥有的：

![聊天](../Images/3911b843fa2fef8e374278b12e68cb17.png)

这是代码：

```
<asp:Content ID="Content2" ContentPlaceHolderID="maincontent" Runat="Server">
    <script language="javascript" type="text/javascript">
        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm.add_endRequest(EndRequestHandler);

        function EndRequestHandler(sender, args) {
            document.getElementById('<%=FormView1.FindControl("chattxt").ClientID%>').focus(); 
        }
    </script>
    <div id="chatbg">
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
<div id="chatmessages">
    <asp:Repeater ID="Repeater1" runat="server" DataSourceID="SqlDataSource1">
    <ItemTemplate>
        <asp:Literal ID="Literal1" runat="server" Text='<%# Eval("Username") %>'></asp:Literal>: <asp:Literal ID="Literal2" runat="server" Text='<%# Eval("Message") %>'></asp:Literal><br />
    </ItemTemplate>
    </asp:Repeater>
</div>
    <asp:ListBox ID="ListBox1" runat="server" Rows="16" CssClass="memberlist"></asp:ListBox>
    </ContentTemplate>
    </asp:UpdatePanel>
        <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
        <asp:FormView ID="FormView1" runat="server" DefaultMode="Insert"
        OnItemInserted="fv_ItemInserted" RenderOuterTable="False" 
            DataSourceID="SqlDataSource1">
        <InsertItemTemplate>
            <asp:Panel ID="Panel1" runat="server" DefaultButton="Button1">
            <asp:TextBox ID="chattxt" runat="server" CssClass="chattxtbox"
            Text='<%# Bind("Message") %>' autocomplete="off"></asp:TextBox>
        <asp:Button ID="Button1" runat="server" CommandName="insert" style="display:none" Text="Button"/>
            </asp:Panel>
        </InsertItemTemplate>
        </asp:FormView>
        </ContentTemplate>
        </asp:UpdatePanel>
</div>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:orangefreshConnectionString1 %>" 
        InsertCommand="INSERT INTO [Chat] ([Username], [Message]) VALUES (@Username, @Message)" 
        SelectCommand="SELECT [Id], [Username], [Message], [Date] FROM [Chat] ORDER BY [Id]" >
        <InsertParameters>
            <asp:Parameter Name="Message" Type="String" />
            <asp:Parameter Name="Date" Type="DateTime" /> 
            <asp:SessionParameter Name="Username" SessionField="Username" Type="String" />
        </InsertParameters>
    </asp:SqlDataSource>
    <script type="text/javascript">
        function scrollpos() {
            var objDiv = document.getElementById("chatmessages");
            objDiv.scrollTop = objDiv.scrollHeight;
        }

</script>
</asp:Content> 
```

*   页面顶部的脚本在回发后将焦点重新放在我的文本框上。
*   页面底部的脚本通过回发确保消息窗口上的滚动始终位于底部。

这是我的代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.Security;
using orangefreshModel;

public partial class chat : BasePage
{

    protected void Page_Load(object sender, EventArgs e)
    {
        Session["Username"] = User.Identity.Name;
        ListBox1.Items.Clear();
        foreach (MembershipUser myuser in Membership.GetAllUsers())
            if (myuser.IsOnline == true)
            {
                ListBox1.Items.Add(myuser.ToString());

            }

        ScriptManager.RegisterStartupScript(
                            UpdatePanel1,
                            this.GetType(),
                            "ScrollPos",
                            "scrollpos();",
                            true);
    }

    protected void fv_ItemInserted(object sender, FormViewInsertedEventArgs e)
    {
        this.FormView1.DataBind();
    }
} 
```

所以这一切工作得很好，UpdatePanel 确保我的消息立即弹出，现在的问题是看到其他用户消息。这是我的第一个 ASP.NET 项目，所以我考虑过一点，并尝试每秒尝试一个 Timer 来重新填充我的中继器......但没有成功，我认为这根本不是一个明智的解决方案：

首先，影响我的中继器窗口的计时器使用户无法向上滚动以阅读消息，因为它每秒刷新一次滚动是不可能的。

其次，无论如何我从来没有让它工作，这是我为我的计时器尝试的事件：

```
 protected void Timer1_Tick(object sender, EventArgs e)
        {
            this.Repeater1.DataSource = SqlDataSource1;
            this.Repeater1.DataBind();
        } 
```

但是，是的，没有成功。

这就是我现在与这个聊天的地方：我可以看到我的消息弹出很好，但现在我需要想办法让我的窗口在其他用户输入他们的消息时更新，如果其他用户输入一个新的消息，我需要发送自己的消息才能看到他们的消息。

我一直在浏览网页，阅读了一些关于 Signal R 的内容，但我想知道是否有人对我应该去哪里有更简单的想法，如何在我的消息窗口上实现实时更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:47:54.660

我建议研究 SignalR - [http://nuget.org/packages/signalr](http://nuget.org/packages/signalr)

SignalR 是一个保持持久连接打开并允许服务器将数据“推送”到客户端的库。

您还可以查看[http://www.slideshare.net/adammokan/introduction-to-signalr-10082193](http://www.slideshare.net/adammokan/introduction-to-signalr-10082193)作为 SignalR 的一个不错的概述

它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:53:22.987

[SignalR](http://signalr.net/)是一个不错的选择。

但是，如果您出于某种原因确实想自己做，那么您应该这样做。

在 asp.net 中构建聊天的最有效方法是使用[IHttpAsyncHandler](http://msdn.microsoft.com/en-us/library/system.web.ihttpasynchandler.aspx)和 ajax 请求。

异步请求允许您延迟请求的响应，直到发生外部事件。
用户调用此处理程序并等待有人向他发送消息。
一旦您将消息发送给用户，它们就会被传递。

收到消息后，客户端发出另一个请求并等待下一条消息。这就是保持持久连接打开并允许服务器将数据推送到客户端的方式。

这比轮询站点以检查消息是否到达要有效得多。
使用异步处理程序还可以确保在用户等待消息到来时不会浪费任何 asp.net 线程。使用计时器轮询您将很快用完线程来处理 asp.net 中的请求。

这可以确保即使网站用户数量增加，您的聊天也可以很好地扩展。

这是一个与 ajax 一起[实现这个的完全工作的项目。](http://www.codeproject.com/Articles/42734/Using-IHttpAsyncHandler-and-XMLHttpRequest-to-push)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:38:06.973

一种选择是在 ASP.Net 生命周期之外执行此操作，并向服务器发出手动 AJAX 请求。服务器方法最多可以保持连接 30 秒，并在新消息到达后立即返回。然后将其返回给客户端并在 JS 中处理，然后他们打开另一个连接并再次等待。我听说这叫`reverse AJAX poll`.

但是，您是否检测到新消息取决于您，您可以每秒轮询 DB，或在内存中维护消息等。

请注意，如果成千上万的客户端保持与服务器的打开连接，这可能会导致问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T15:56:04.483

我同意 KingPancake 的观点，SignalR 将是处理此类问题的一种非常好的方法。如果您想完全保留数据，您可以使用新的 .Net Web API 和 SignalR 等“后端”

查看Brad Wilson 的[此演示文稿，它可能会对您有所帮助：](http://bradwilson.typepad.com/blog/2012/07/webstack-of-love.html "这个演示文稿")

# xml - 使用 XLST 复制选定的节点和子节点

> ID：12200481
> 
> 赞同：1
> 
> 时间：2012-08-30T15:33:35.133
> 
> 标签：xml, xslt

我在进行 XSLT 转换时遇到了麻烦，我希望有人可以帮助我。这是我正在使用的数据的结构，

```
<excelFiles>
    <sheet>
        <row index='1'>
            <column_1>allowedValue</column_1>
            <column_2>US</column_2>
             <column_3>allowedValue</column_3>
        </row>
        <row index='1'>
           <column_1>notAllowedValue</column_1>
           <column_2>US</column_2>
           <column_3>allowedValue</column_3>
        </row>
  </sheet>
</excelFiles> 
```

我要做的只是复制没有子节点包含无效数据的行。使用 XSLT 可以做到这一点吗？我只能使用 XSLT 来解决这个问题。

为清楚起见进行编辑：无效数据是节点中的唯一值是“-”字符时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:13:43.520

从身份转换开始，然后添加一个与您*不*想要的节点匹配并忽略它们的无操作模板：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <!-- ignore any row element that has any child element whose text value is
       a single hyphen -->
  <xsl:template match="row[* = '-']" />

  <!-- copy everything else -->
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

# javascript - 如何使用jQuery循环元素中的单个div

> ID：12200484
> 
> 赞同：7
> 
> 时间：2012-08-30T15:33:35.163
> 
> 标签：javascript, jquery, animation

我正在尝试查看以下是否可行：

![单旋转div](../Images/5933c97560e9ba94351bc2694cf23406.png)

我希望能够在一个元素中连续循环单个 div [所以 div 的开始是在它循环的同一个 div 的末尾。]

这不必是现有的插件。如果可能的话，我宁愿不克隆 div。div 的宽度将在循环之前通过 javascript 设置，但可能会进行少量调整。

我会很感激任何想法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T16:12:04.780

## *[jsBin 演示](http://jsbin.com/ogetoh/8/edit)*

jQuery：

```
$('.scroller').each(function(){
  $(this).find('img').clone().appendTo($(this));
});

(function move(){
  $('.scroller').scrollLeft(0).stop().animate({scrollLeft:310},800,'linear',move);
})(); 
```

HTML：

```
 <div class="scroller">
    <img src="" alt="" />
  </div> 
```

CSS：

```
.scroller{
  width:310px;
  height:80px;
  white-space:nowrap;
  word-spacing:-1em;
  overflow:hidden;
  margin:30px;
}
.scroller img{
  display:inline; 
} 
```

它只会克隆一次。比我的 jQuery 脚本会创建一个循环，它只会使用`scrollLeft()`element 属性。

注意：这只是一个简单的例子，你可以`310px`动态计算，但那是另一回事，让我们保持简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:43:00.513

选框插件呢？

[演示](http://remysharp.com/demo/marquee.html)
[文档](http://remysharp.com/2008/09/10/the-silky-smooth-marquee/)

请注意，演示中的第一个示例向左滚动，如果您将容器的宽度设置为与要滚动的内容相同或小于内容的大小，它将看起来流畅地循环。

# c++ - 如何在使用算法保持原始排序的同时从未排序的 std::vector 中删除重复项？

> ID：12200486
> 
> 赞同：26
> 
> 时间：2012-08-30T15:33:42.347
> 
> 标签：c++, duplicates, stdvector, stl-algorithm, stdset

我有一个整数数组，我需要从中删除重复项，同时保持每个整数第一次出现的顺序。我可以看到这样做，但想象有更好的方法可以更好地利用 STL 算法？插入超出了我的控制范围，因此我无法在插入之前检查重复项。

```
int unsortedRemoveDuplicates(std::vector<int> &numbers) {
    std::set<int> uniqueNumbers;
    std::vector<int>::iterator allItr = numbers.begin();
    std::vector<int>::iterator unique = allItr;
    std::vector<int>::iterator endItr = numbers.end();

    for (; allItr != endItr; ++allItr) {
        const bool isUnique = uniqueNumbers.insert(*allItr).second;

        if (isUnique) {
            *unique = *allItr;
            ++unique;
        }
    }

    const int duplicates = endItr - unique;

    numbers.erase(unique, endItr);
    return duplicates;
} 
```

使用 STL 算法如何做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-30T15:47:46.597

听起来像是[std::copy_if](http://en.cppreference.com/w/cpp/algorithm/copy)的工作。定义一个谓词来跟踪已经处理过的元素，如果有则返回 false。

如果您没有 C++11 支持，则可以使用笨拙命名的[std::remove_copy_if](http://en.cppreference.com/w/cpp/algorithm/remove_copy)并反转逻辑。

这是一个未经测试的例子：

```
template <typename T>
struct NotDuplicate {
  bool operator()(const T& element) {
    return s_.insert(element).second; // true if s_.insert(element);
  }
 private:
  std::set<T> s_;
}; 
```

然后

```
std::vector<int> uniqueNumbers;
NotDuplicate<int> pred;
std::copy_if(numbers.begin(), numbers.end(), 
             std::back_inserter(uniqueNumbers),
             std::ref(pred)); 
```

其中 an`std::ref`已用于避免算法在内部复制有状态函子的潜在问题，尽管`std::copy_if`对所应用函子的副作用没有任何要求。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-02T09:53:28.200

*天真*的方法是`std::set`像每个人告诉你的那样使用。这是矫枉过正并且缓存局部性很差（慢）。
smart* 方法是`std::vector`适当使用（确保在底部看到脚注）：

```
#include <algorithm>
#include <vector>
struct target_less
{
    template<class It>
    bool operator()(It const &a, It const &b) const { return *a < *b; }
};
struct target_equal
{
    template<class It>
    bool operator()(It const &a, It const &b) const { return *a == *b; }
};
template<class It> It uniquify(It begin, It const end)
{
    std::vector<It> v;
    v.reserve(static_cast<size_t>(std::distance(begin, end)));
    for (It i = begin; i != end; ++i)
    { v.push_back(i); }
    std::sort(v.begin(), v.end(), target_less());
    v.erase(std::unique(v.begin(), v.end(), target_equal()), v.end());
    std::sort(v.begin(), v.end());
    size_t j = 0;
    for (It i = begin; i != end && j != v.size(); ++i)
    {
        if (i == v[j])
        {
            using std::iter_swap; iter_swap(i, begin);
            ++j;
            ++begin;
        }
    }
    return begin;
} 
```

然后你可以像这样使用它：

```
int main()
{
    std::vector<int> v;
    v.push_back(6);
    v.push_back(5);
    v.push_back(5);
    v.push_back(8);
    v.push_back(5);
    v.push_back(8);
    v.erase(uniquify(v.begin(), v.end()), v.end());
} 
```

***注意：这是***典型情况下*的聪明方法，重复的数量不会太高。如需更全面的性能分析，请参阅[相关问题的相关答案](https://stackoverflow.com/a/1041939/541686)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-12-17T18:04:40.110

快速简单，C++11：

```
template<typename T>
size_t RemoveDuplicatesKeepOrder(std::vector<T>& vec)
{
    std::set<T> seen;

    auto newEnd = std::remove_if(vec.begin(), vec.end(), [&seen](const T& value)
    {
        if (seen.find(value) != std::end(seen))
            return true;

        seen.insert(value);
        return false;
    });

    vec.erase(newEnd, vec.end());

    return vec.size();
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-08-30T15:52:09.780

```
int unsortedRemoveDuplicates(std::vector<int>& numbers)
{
    std::set<int> seenNums; //log(n) existence check

    auto itr = begin(numbers);
    while(itr != end(numbers))
    {
        if(seenNums.find(*itr) != end(seenNums)) //seen? erase it
            itr = numbers.erase(itr); //itr now points to next element
        else
        {
            seenNums.insert(*itr);
            itr++;
        }
    }

    return seenNums.size();
}

//3 6 3 8 9 5 6 8
//3 6 8 9 5 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-05-13T12:32:41.873

为了验证提议的解决方案的性能，我测试了其中的三个，如下所列。测试使用具有 100 万个元素和不同重复率（0%、1%、2%、...、10%、...、90%、100%）的随机向量。

*   [Mehrdad 的解决方案](https://stackoverflow.com/users/541686/mehrdad)，目前被接受的答案：

    ```
    void uniquifyWithOrder_sort(const vector<int>&, vector<int>& output)
    {
        using It = vector<int>::iterator;
        struct target_less
        {
            bool operator()(It const &a, It const &b) const { return *a < *b; }
        };

        struct target_equal
        {
            bool operator()(It const &a, It const &b) const { return *a == *b; }
        };

        auto begin = output.begin();
        auto const end = output.end();
        {
            vector<It> v;
            v.reserve(static_cast<size_t>(distance(begin, end)));
            for (auto i = begin; i != end; ++i)
            {
                v.push_back(i);
            }
            sort(v.begin(), v.end(), target_less());
            v.erase(unique(v.begin(), v.end(), target_equal()), v.end());
            sort(v.begin(), v.end());
            size_t j = 0;
            for (auto i = begin; i != end && j != v.size(); ++i)
            {
                if (i == v[j])
                {
                    using std::iter_swap; iter_swap(i, begin);
                    ++j;
                    ++begin;
                }
            }
        }

        output.erase(begin, output.end());
    } 
    ```

*   [juanchopanza 的解决方案](https://stackoverflow.com/a/12200741/2642204)

    ```
    void uniquifyWithOrder_set_copy_if(const vector<int>& input, vector<int>& output)
    {
        struct NotADuplicate
        {
            bool operator()(const int& element)
            {
                return _s.insert(element).second;
            }

        private:
            set<int> _s;
        };

        vector<int> uniqueNumbers;
        NotADuplicate pred;

        output.clear();
        output.reserve(input.size());
        copy_if(
            input.begin(),
            input.end(),
            back_inserter(output),
            ref(pred));
    } 
    ```

*   [利维坦的解决方案](https://stackoverflow.com/a/34341344/2642204)

    ```
    void uniquifyWithOrder_set_remove_if(const vector<int>& input, vector<int>& output)
    {
        set<int> seen;

        auto newEnd = remove_if(output.begin(), output.end(), [&seen](const int& value)
        {
            if (seen.find(value) != end(seen))
                return true;

            seen.insert(value);
            return false;
        });

        output.erase(newEnd, output.end());
    } 
    ```

为简单起见，它们稍作修改，并允许将就地解决方案与非就地解决方案进行比较。用于测试的完整代码[可在此处获得](https://gist.github.com/bartoszkp/64d47743ec79de7e88a2e4d0fa6ce24f#file-uniquifywithorder-cpp)。

结果表明，如果您知道您将有至少 1% 的重复，则该`remove_if`解决方案`std::set`是最好的解决方案。否则，您应该使用`sort`解决方案：

```
// Intel(R) Core(TM) i7-2600 CPU @ 3.40 GHz 3.40 GHz
// 16 GB RAM, Windows 7, 64 bit
//
// cl 19
// /GS /GL /W3 /Gy /Zc:wchar_t /Zi /Gm- /O2 /Zc:inline /fp:precise /D "NDEBUG" /D "_CONSOLE" /D "_UNICODE" /D "UNICODE" /WX- /Zc:forScope /Gd /Oi /MD /EHsc /nologo /Ot 
//
// 1000 random vectors with 1 000 000 elements each.
// 11 tests: with 0%, 10%, 20%, ..., 90%, 100% duplicates in vectors.

// Ratio: 0
// set_copy_if   : Time : 618.162 ms +- 18.7261 ms
// set_remove_if : Time : 650.453 ms +- 10.0107 ms
// sort          : Time : 212.366 ms +- 5.27977 ms
// Ratio : 0.1
// set_copy_if   : Time : 34.1907 ms +- 1.51335 ms
// set_remove_if : Time : 24.2709 ms +- 0.517165 ms
// sort          : Time : 43.735 ms +- 1.44966 ms
// Ratio : 0.2
// set_copy_if   : Time : 29.5399 ms +- 1.32403 ms
// set_remove_if : Time : 20.4138 ms +- 0.759438 ms
// sort          : Time : 36.4204 ms +- 1.60568 ms
// Ratio : 0.3
// set_copy_if   : Time : 32.0227 ms +- 1.25661 ms
// set_remove_if : Time : 22.3386 ms +- 0.950855 ms
// sort          : Time : 38.1551 ms +- 1.12852 ms
// Ratio : 0.4
// set_copy_if   : Time : 30.2714 ms +- 1.28494 ms
// set_remove_if : Time : 20.8338 ms +- 1.06292 ms
// sort          : Time : 35.282 ms +- 2.12884 ms
// Ratio : 0.5
// set_copy_if   : Time : 24.3247 ms +- 1.21664 ms
// set_remove_if : Time : 16.1621 ms +- 1.27802 ms
// sort          : Time : 27.3166 ms +- 2.12964 ms
// Ratio : 0.6
// set_copy_if   : Time : 27.3268 ms +- 1.06058 ms
// set_remove_if : Time : 18.4379 ms +- 1.1438 ms
// sort          : Time : 30.6846 ms +- 2.52412 ms
// Ratio : 0.7
// set_copy_if   : Time : 30.3871 ms +- 0.887492 ms
// set_remove_if : Time : 20.6315 ms +- 0.899802 ms
// sort          : Time : 33.7643 ms +- 2.2336 ms
// Ratio : 0.8
// set_copy_if   : Time : 33.3077 ms +- 0.746272 ms
// set_remove_if : Time : 22.9459 ms +- 0.921515 ms
// sort          : Time : 37.119 ms +- 2.20924 ms
// Ratio : 0.9
// set_copy_if   : Time : 36.0888 ms +- 0.763978 ms
// set_remove_if : Time : 24.7002 ms +- 0.465711 ms
// sort          : Time : 40.8233 ms +- 2.59826 ms
// Ratio : 1
// set_copy_if   : Time : 21.5609 ms +- 1.48986 ms
// set_remove_if : Time : 14.2934 ms +- 0.535431 ms
// sort          : Time : 24.2485 ms +- 0.710269 ms 
```

* * *

```
// Ratio: 0
// set_copy_if   : Time: 666.962 ms +- 23.7445 ms
// set_remove_if : Time: 736.088 ms +- 39.8122 ms
// sort          : Time: 223.796 ms +- 5.27345 ms
// Ratio: 0.01
// set_copy_if   : Time: 60.4075 ms +- 3.4673 ms
// set_remove_if : Time: 43.3095 ms +- 1.31252 ms
// sort          : Time: 70.7511 ms +- 2.27826 ms
// Ratio: 0.02
// set_copy_if   : Time: 50.2605 ms +- 2.70371 ms
// set_remove_if : Time: 36.2877 ms +- 1.14266 ms
// sort          : Time: 62.9786 ms +- 2.69163 ms
// Ratio: 0.03
// set_copy_if   : Time: 46.9797 ms +- 2.43009 ms
// set_remove_if : Time: 34.0161 ms +- 0.839472 ms
// sort          : Time: 59.5666 ms +- 1.34078 ms
// Ratio: 0.04
// set_copy_if   : Time: 44.3423 ms +- 2.271 ms
// set_remove_if : Time: 32.2404 ms +- 1.02162 ms
// sort          : Time: 57.0583 ms +- 2.9226 ms
// Ratio: 0.05
// set_copy_if   : Time: 41.758 ms +- 2.57589 ms
// set_remove_if : Time: 29.9927 ms +- 0.935529 ms
// sort          : Time: 54.1474 ms +- 1.63311 ms
// Ratio: 0.06
// set_copy_if   : Time: 40.289 ms +- 1.85715 ms
// set_remove_if : Time: 29.2604 ms +- 0.593869 ms
// sort          : Time: 57.5436 ms +- 5.52807 ms
// Ratio: 0.07
// set_copy_if   : Time: 40.5035 ms +- 1.80952 ms
// set_remove_if : Time: 29.1187 ms +- 0.63127 ms
// sort          : Time: 53.622 ms +- 1.91357 ms
// Ratio: 0.08
// set_copy_if   : Time: 38.8139 ms +- 1.9811 ms
// set_remove_if : Time: 27.9989 ms +- 0.600543 ms
// sort          : Time: 50.5743 ms +- 1.35296 ms
// Ratio: 0.09
// set_copy_if   : Time: 39.0751 ms +- 1.71393 ms
// set_remove_if : Time: 28.2332 ms +- 0.607895 ms
// sort          : Time: 51.2829 ms +- 1.21077 ms
// Ratio: 0.1
// set_copy_if   : Time: 35.6847 ms +- 1.81495 ms
// set_remove_if : Time: 25.204 ms +- 0.538245 ms
// sort          : Time: 46.4127 ms +- 2.66714 ms 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-03T14:20:08.010

这就是 WilliamKF 正在寻找的内容。它使用擦除语句。此代码适用于列表，但不适用于向量。对于向量，您不应使用擦除语句。

```
//makes uniques in one shot without sorting !! 
template<class listtype> inline
void uniques(listtype* In)
    {

    listtype::iterator it = In->begin();
    listtype::iterator it2= In->begin();

    int tmpsize = In->size();

        while(it!=In->end())
        {
        it2 = it;
        it2++;
        while((it2)!=In->end())
            {
            if ((*it)==(*it2))
                In->erase(it2++);
            else
                ++it2;
            }
        it++;

        }
    } 
```

我在不使用 sort 的情况下尝试过的向量是：

```
//makes vectors as fast as possible unique
template<typename T> inline
void vectoruniques(std::vector<T>* In)
    {

    int tmpsize = In->size();

        for (std::vector<T>::iterator it = In->begin();it<In->end()-1;it++)
        {
            T tmp = *it;
            for (std::vector<T>::iterator it2 = it+1;it2<In->end();it2++)
            {
                if (*it2!=*it)
                    tmp = *it2;
                else
                    *it2 = tmp;
            }
        }
        std::vector<T>::iterator it = std::unique(In->begin(),In->end());
        int newsize = std::distance(In->begin(),it);
            In->resize(newsize);
    } 
```

不知何故，这看起来会起作用。我对其进行了一些测试，也许有人可以判断这是否真的有效！该解决方案不需要任何更大的运算符。我的意思是为什么要使用更大的运算符来搜索独特的元素？向量的用法：

```
int myints[] = {21,10,20,20,20,30,21,31,20,20,2}; 
std::vector<int> abc(myints , myints+11);
vectoruniques(&abc); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-12T15:11:42.507

这是处理具有移动支持的 POD 和非 POD 类型的东西。使用默认 operator== 或自定义相等谓词。不需要排序/运算符<、密钥生成或单独的集合。不知道这是否比上述其他方法更有效。

```
template <typename Cnt, typename _Pr = std::equal_to<typename Cnt::value_type>>
void remove_duplicates( Cnt& cnt, _Pr cmp = _Pr() )
{
    Cnt result;
    result.reserve( std::size( cnt ) );  // or cnt.size() if compiler doesn't support std::size()

    std::copy_if( 
        std::make_move_iterator( std::begin( cnt ) )
        , std::make_move_iterator( std::end( cnt ) )
        , std::back_inserter( result )
        , [&]( const typename Cnt::value_type& what ) 
        { 
            return std::find_if( 
                std::begin( result )
                , std::end( result )
                , [&]( const typename Cnt::value_type& existing ) { return cmp( what, existing ); }
            ) == std::end( result );
        }
    );  // copy_if

    cnt = std::move( result );  // place result in cnt param
}   // remove_duplicates 
```

使用/测试：

```
{
    std::vector<int> ints{ 0,1,1,2,3,4 };
    remove_duplicates( ints );
    assert( ints.size() == 5 );
}

{
    struct data 
    { 
        std::string foo; 
        bool operator==( const data& rhs ) const { return this->foo == rhs.foo; }
    };

    std::vector<data>
        mydata{ { "hello" }, {"hello"}, {"world"} }
        , mydata2 = mydata
        ;

    // use operator==
    remove_duplicates( mydata );
    assert( mydata.size() == 2 );

    // use custom predicate
    remove_duplicates( mydata2, []( const data& left, const data& right ) { return left.foo == right.foo; } );
    assert( mydata2.size() == 2 );

} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-10-15T17:26:34.197

这是一个 c++11 通用版本，它与迭代器一起使用并且不分配额外的存储空间。它可能具有 O(n^2) 的缺点，但对于较小的输入大小可能更快。

```
template<typename Iter>
Iter removeDuplicates(Iter begin,Iter end)
{
    auto it = begin;
    while(it != end)
    {
        auto next = std::next(it);
        if(next == end)
        {
            break;
        }
        end = std::remove(next,end,*it);
        it = next;
    }

    return end;
} 
```

……

```
std::erase(removeDuplicates(vec.begin(),vec.end()),vec.end()); 
```

示例代码：[http ://cpp.sh/5kg5n](http://cpp.sh/5kg5n)

# powershell - 清理配置文件

> ID：12200487
> 
> 赞同：2
> 
> 时间：2012-08-30T15:33:45.393
> 
> 标签：powershell

我正在尝试编写这个 PS 脚本，但如果有人击败我，我相信他们会得到免费的因果报应。

无论如何，这就是我想要进行这样的文件设置

```
foo.bar=Some random text is stored here
foo.bar=Lazy maintainers make me angry
bar.foo=Hello World!
bar.foo=Hello World! 
```

主要目标是删除任何重复的条目，我有几个 . . . 这似乎很容易

```
Get-Content c:\list.txt | Select-Object -Unique 
```

但我也想将具有相同密钥标识符的任何冲突存储到一个单独的文件中，以便我可以查看应该保留哪些冲突。

我仍然是一个 PS 新手，还没有找到一个好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:51:40.507

您可以使用`Group-Object`相同的键将项目组合在一起。然后查找其中包含多个元素的组（表示重复条目）。最后，将它们打印到某个文件中：

```
# raw content
$lines = Get-Content C:\data.txt

# package each line into a little object with properties Key and Val
$data = $lines |%{ $key,$val = $_.Split('='); new-object psobject -prop @{Key = $key; Val = $val} }

# group the objects by key, only keep groups with more than 1 element
$duplicates = $data | group Key |?{$_.Count -gt 1}

# print out each key and the different values it has been given
$duplicates |%{ "--- [$($_.Name)] ---"; $_.Group | select -expand Val } 
```

结果：

```
--- [foo.bar] ---
Some random text is stored here
Lazy maintainers make me angry
--- [bar.foo] ---
Hello World!
Hello World! 
```

`Out-File`如果您想将其存储在日志中，您可以将其传输到。

# sql-server - 如何获取表“sys.all_objects”中对象的模式名称？

> ID：12200500
> 
> 赞同：3
> 
> 时间：2012-08-30T15:34:46.990
> 
> 标签：sql-server

如何获取表“sys.all_objects”中对象的模式名称？

当我知道架构是 dbo 时，使用 OBJECT_SCHEMA_NAME 函数会返回“sys”...

```
select OBJECT_SCHEMA_NAME(o.schema_id),* from sys.all_objects o 
```

我不想使用其他视图，但如有必要，我可以加入其他表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:40:00.337

使用“object_id”而不是“schema_id”

`select OBJECT_SCHEMA_NAME(o.object_id),* from sys.all_objects o`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:42:26.253

您是在谈论系统对象`sp_helptext`吗？您可以使用多种格式调用`sp_helptext`和其他系统对象，这些是为您翻译的（主要是出于向后兼容性的原因）：

```
EXEC sp_helptext 'sp_helptext';
EXEC dbo.sp_helptext 'sp_helptext';
EXEC sys.sp_helptext 'sp_helptext';

SELECT * FROM sysobjects;
SELECT * FROM dbo.sysobjects;
SELECT * FROM sys.sysobjects; 
```

但是对象只能属于一个模式。在这种情况下，`sys`即使它也回答`dbo`。

如果您有显示为 的用户对象`sys`，请告诉我们它们是什么。如果你只是想追踪用户对象，也许你命名的东西`dbo.foo`也*存在*于`sys`模式下。如果您不想返回系统对象，我可能会建议`sys.objects`您这样做。`sys.all_objects`

编辑：

正如雷指出的那样，您正在传递`schema_id`给函数。[文档显示](http://msdn.microsoft.com/en-us/library/bb326599.aspx)您需要通过`object_id`，而不是`schema_id`. 因此，请执行以下任一操作：

```
SELECT OBJECT_SCHEMA_NAME(o.[object_id]),* FROM sys.all_objects o;

-- or

SELECT SCHEMA_NAME(o.[schema_id]),* FROM sys.all_objects o; 
```

就个人而言，我更喜欢加入，例如：

```
SELECT s.name, o.* FROM sys.all_objects AS o;
  INNER JOIN sys.schemas AS s
  ON o.[schema_id] = s.[schema_id]; 
```

为什么？因为这个查询可以跨数据库工作，而当从不同的数据库调用时，一些元数据函数将返回 NULL 或更糟的是返回错误的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:36:45.130

试试这个：

```
select OBJECT_NAME(o.object_id),* from sys.all_objects o 
```

* * *

您还可以选择列`name`：

```
select o.name,* from sys.all_objects o 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-22T19:58:11.820

这有效

选择 SCHEMA_NAME(o.schema_id),* from sys.all_objects o

但如果你想要我的自动脚本版本

插入@tt（字符串）选择不同的'GRANT execute ON SCHEMA :: '+SCHEMA_NAME(oo.schema_id)+' TO role_execute_all_sp' from sys.all_objects oo where SCHEMA_NAME(oo.schema_id) not in ('INFORMATION_SCHEMA','sys ')

# c++ - 抗锯齿问题

> ID：12200502
> 
> 赞同：1
> 
> 时间：2012-08-30T15:35:02.893
> 
> 标签：c++, directx, antialiasing

启用全场景抗锯齿后，我在渲染到纹理时会遇到一些麻烦。

这是正在发生的事情的图像（渲染图像有一些边缘）。 [http://i.imgur.com/VcFNn.png](http://i.imgur.com/VcFNn.png)

当 AA 关闭时——这一切都没有发生，一切正常。

为什么我会遇到这些麻烦，当 AA 开启时渲染到纹理的正确方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T17:16:12.377

您应该做的第一件事是确保您的游戏能够运行全场景抗锯齿（即假设您有一张现成的显卡来完成这项工作）。这样做的方法是这样做：

```
/*
* The code below assumes that pD3D is a valid pointer 
*   to a IDirect3D9 interface.
*/

if( SUCCEEDED(pD3D->CheckDeviceMultiSampleType( D3DADAPTER_DEFAULT, 
                    D3DDEVTYPE_HAL , D3DFMT_R8G8B8, FALSE, 
                    D3DMULTISAMPLE_2_SAMPLES, NULL ) ) )
// Full-scene antialiasing is supported. Enable it here. 
```

如果设备支持它，那么您所要做的就是设置多重采样的参数：

```
/*
* The example below assumes that pD3D is a valid pointer 
* to a IDirect3D9 interface, d3dDevice is a pointer to a 
* IDirect3DDevice9 interface, and hWnd is a valid handle
* to a window.
*/

D3DPRESENT_PARAMETER d3dPP
ZeroMemory( &d3dPP, sizeof( d3dPP ) );
d3dPP.Windowed        = FALSE
d3dPP.SwapEffect      = D3DSWAPEFFECT_DISCARD;
d3dPP.MultiSampleType = D3DMULTISAMPLE_2_SAMPLES;
pD3D->CreateDevice(D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, hWnd,
                    D3DCREATE_SOFTWARE_VERTEXPROCESSING,
                    &d3dpp, &d3dDevice) 
```

希望这可以帮助！

# regex - 根据值将一个表的列拆分为两列

> ID：12200504
> 
> 赞同：0
> 
> 时间：2012-08-30T15:35:03.337
> 
> 标签：regex, database-design, excel, vba

我有一张有**这么多行**的表。它的结构如下图：

![在此处输入图像描述](../Images/75e8a429f161b71177c8ac1b7f1014b0.png)

如您所见，我在 A 列中的名称之间有“或”、“与”。我如何将这些列分成两部分？在这种情况下，第一列将有 David、Tylor、Fred、Jessi、Roland，第二列有 Peter、Mark、Alfered、Hovard 和 DAvid。

注意：请注意第 2 行和第 5 行。在这些行中，我有 2 个“或”或两个“与”。

**编辑**：我更喜欢在 Excel 中执行此操作

我试过的

作为一种可能的解决方案，我在 vba 中有这个功能。

```
Function udfRegEx(CellLocation As Range, RegPattern As String)

Dim RegEx As Object, RegMatchCollection As Object, RegMatch As Object
Dim OutPutStr As String
Dim i As Integer

i = ActiveWorkbook.Worksheets(ActiveWorksheet.Name).UsedRange.rows.Count
    Set RegEx = CreateObject("vbscript.regexp")
    With RegEx
        .Global = True
        .Pattern = RegPattern
    End With

        OutPutStr = ""
        Set RegMatchCollection = RegEx.Execute(CellLocation.Value)
        For Each RegMatch In RegMatchCollection
            OutPutStr = OutPutStr & RegMatch
        Next
        udfRegEx = OutPutStr

    Set RegMatchCollection = Nothing
    Set RegEx = Nothing
    Set Myrange = Nothing

End Function 
```

此函数使用正则表达式。但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:14:51.680

正如我提到的，您不需要 VBA。Excel 公式也可以满足您的需求。

**我的假设**

1.  Col A 有数据
2.  您想要 Col B 和 Col C 中的输出

将此公式粘贴到单元格 B1 中并将其复制下来

`=IF(ISERROR(SEARCH(" or ",A1,1))=TRUE,IF(ISERROR(SEARCH(" and ",A1,1))=TRUE,"",LEFT(A1,SEARCH(" and ",A1,1))),LEFT(A1,SEARCH(" or ",A1,1)))`

这在单元格 C1 中并将其复制下来

`=IF(ISERROR(SEARCH(" or ",A1,1))=TRUE,IF(ISERROR(SEARCH(" and ",A1,1))=TRUE,"",MID(A1,SEARCH(" and ",A1,1)+5,LEN(A1)-SEARCH(" and ",A1,1))),MID(A1,SEARCH(" or ",A1,1)+4,LEN(A1)-SEARCH(" or ",A1,1)))`

**快照**

![在此处输入图像描述](../Images/cacee978b46f4fc08194659fbf99f2a6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:44:06.197

```
(\w)+(( or | and ){0,1}(\w)+)* 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:44:35.990

它不是编码解决方案，但由于您没有要求代码（并且因为在这种情况下没有必要），只需对单词“and”和“or”进行查找/替换以用一些分隔符替换它们（例如替换他们用逗号）。然后在 excel 中，您可以选择数据，并使用 excel 的“文本到列”功能（在 excel 2007 中的数据选项卡上）将它们分成不同的列。

# symfony - 角色界面和管理角色

> ID：12200507
> 
> 赞同：1
> 
> 时间：2012-08-30T15:35:31.337
> 
> 标签：symfony, symfony-2.1

我有简单的 UserInterface 实体：

```
function getRoles()
{
    return $this->roles->toArray();
} 
```

并且与角色实体接口具有多对多关系

```
/**
* @ORM\ManyToMany(targetEntity="Role", inversedBy="users", cascade={"persist"})
*/
protected $roles; 
```

当我尝试使用表单类型管理用户角色时

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('roles');
} 
```

Symfony 返回一个错误：

> 给定“Doctrine\Common\Collections\Collection”、“array”类型的预期参数

我知道错误出现在返回数组的实体 User 的 getRoles 方法中，但我也知道 getRoles 是接口的方法，必须返回一个数组！

有人有好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T15:47:46.250

您有两个 getRoles 函数：

*   一个是 UserInterface 接口的函数，它返回角色列表
*   另一个是 $roles 属性的吸气剂

由于两个函数不能同名，而且它们不能是同一个函数，因为它们需要返回不同的类型，并且由于第一个函数需要遵循接口，我建议您更改第二个函数的名称。由于这需要反映属性的名称，因此您应该更改此名称。

因此，您需要执行以下操作：

```
/**
 * @ORM\ManyToMany(targetEntity="Role", inversedBy="users", cascade={"persist"})
 */
protected $userRoles;

/* interface */

function getRoles()
{
    return $this->userRoles->toArray();
}

/*getter*/

function getUserRoles() {
    return $this->userRoles;
} 
```

接着

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('userRoles');
} 
```

# api - 如何使用 Eventbrite 的 API 将活动的“状态”属性设置为“直播”？

> ID：12200511
> 
> 赞同：1
> 
> 时间：2012-08-30T15:35:40.027
> 
> 标签：api, eventbrite

我正在我的应用程序中进行 Eventbrite 集成。我正在尝试创建事件并使其生效。我找到了事件创建 API，但它不包括任何关于如何使事件发生的信息。

如何使用 Eventbrite 的 API 将活动的“状态”属性设置为“直播”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:55:08.967

如果您使用[Eventbrite API 客户端](http://developer.eventbrite.com/doc/libraries/)之一，您应该能够执行以下操作：

```
eb_client.event_update({id: event_id, status: 'live'}); 
```

我建议尝试使用[event_update API 调用](http://developer.eventbrite.com/doc/events/event_update/)的交互式文档页面来了解更多信息。

开发者站点使用我们可用的[OAuth2.0](http://developer.eventbrite.com/doc/authentication/oauth2/)授权服务来访问您的事件，允许您检查您的 API 请求 URL 和响应数据。

在您上线之前，请确保您的活动有可用的[门票](http://developer.eventbrite.com/doc/tickets/)，并且您已尽可能分配[场地](http://developer.eventbrite.com/doc/venues/)和[组织者资料。](http://developer.eventbrite.com/doc/organizers/)

# java - 如何将字符串拆分为多个部分？

> ID：12200514
> 
> 赞同：7
> 
> 时间：2012-08-30T15:35:46.927
> 
> 标签：java, arrays, string, arraylist, split

我有一个由空格分隔的几个单词的字符串，例如“firstword second third”和一个ArrayList。我想将字符串分成几部分，并将“部分”字符串添加到 ArrayList。

例如，“firstword second third”可以拆分为三个单独的字符串，因此 ArrayList 将有 3 个元素；"1 2 3 4" 可以拆分为 4 个字符串，在 ArrayList 的 4 个元素中。请看下面的代码：

```
public void separateAndAdd(String notseparated) {
    for(int i=0;i<canBeSepartedinto(notseparated);i++{
    //what should i put here in order to split the string via spaces?
        thearray.add(separatedstring);
    }
}

public int canBeSeparatedinto(String string)
    //what do i put here to find out the amount of spaces inside the string? 
    return ....
} 
```

如果您不明白我的意思，请发表评论，或者我应该修复这篇文章中的一些错误。谢谢你的时间！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T15:36:39.710

您可以使用以下方法在空格处拆分字符串[`split()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)：

```
String[] parts = inputString.split(" "); 
```

然后遍历数组并将各个部分（如果`!"".equals(parts[i]`）添加到列表中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T15:42:13.253

如果要在一个空间上拆分，可以使用`.split(" ");`. 如果要连续拆分所有空格，请使用`.split(" +");`.

考虑以下示例：

```
class SplitTest {
    public static void main(String...args) {
        String s = "This is a  test"; // note two spaces between 'a' and 'test'
        String[] a = s.split(" ");
        String[] b = s.split(" +");
        System.out.println("a: " + a.length);
        for(int i = 0; i < a.length; i++) {
            System.out.println("i " + a[i]);
        }
        System.out.println("b: " + b.length);
        for(int i = 0; i < b.length; i++) {
            System.out.println("i " + b[i]);
        }
    }
} 
```

如果您担心非标准空格，可以使用`"\\s+"`代替`" +"`，因为`"\\s"`将捕获任何空白，而不仅仅是“空格字符”。

因此，您的单独和添加方法变为：

```
void separateAndAdd(String raw) {
    String[] tokens = raw.split("\\s+");
    theArray.ensureCapacity(theArray.size() + tokens.length); // prevent unnecessary resizes
    for(String s : tokens) {
        theArray.add(s);
    }

} 
```

这是一个更完整的示例 - 请注意，`separateAndAdd`我在测试期间发现的方法有一个小的修改。

```
import java.util.*;
class SplitTest {
    public static void main(String...args) {
        SplitTest st = new SplitTest();
        st.separateAndAdd("This is a test");
        st.separateAndAdd("of the emergency");
        st.separateAndAdd("");
        st.separateAndAdd("broadcast system.");

        System.out.println(st);
    }

    ArrayList<String> theArray = new ArrayList<String>();

    void separateAndAdd(String raw) {
        String[] tokens = raw.split("\\s+");
        theArray.ensureCapacity(theArray.size() + tokens.length); // prevent unnecessary resizes
        for(String s : tokens) {
            if(!s.isEmpty()) theArray.add(s);
        }
    }

    public String toString() {
        StringBuilder sb = new StringBuilder();
        for(String s : theArray)
            sb.append(s).append(" ");
        return sb.toString().trim();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T16:15:30.767

我建议使用

> apache.commons.lang.StringUtils 库。

它是最简单的，并且涵盖了您可以用最少的代码拆分字符串的所有不同条件。

这是拆分方法的参考： [拆分方法](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#split%28java.lang.String%29)

您还可以在同一链接上参考可用于拆分方法的其他选项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T15:37:34.583

做这个：

```
thearray = new ArrayList<String>(Arrays.asList(notseparated.split(" "))); 
```

或者如果`thearray`已经实例化

```
thearray.addAll(Arrays.asList(notseparated.split(" "))); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-14T06:39:08.507

如果您想将字符串拆分为不同的部分，例如在这里，我将向您展示如何在***14-03-2016***日、月和年中拆分此字符串。

```
 String[] parts = myDate.split("-");
           day=parts[0];
           month=parts[1];
           year=parts[2]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-30T15:43:45.960

你可以用`.split()`试试这个

```
String[] words= inputString.split("\\s"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-21T05:27:36.170

试试这个：字符串到 2 部分：

```
public String[] get(String s){
    int l = s.length();
    int t = l / 2;
    String first = "";
    String sec = "";
    for(int i =0; i<l; i++){
        if(i < t){
            first += s.charAt(i);
        }else{
            sec += s.charAt(i);
        }
    }
    String[] result = {first, sec};
    return result;
} 
```

例子：

```
String s = "HelloWorld";
String[] res = get(s);
System.out.println(res[0]+" "+res[1]) 
```

输出：

```
Hello World 
```

# version-control - 您如何从 Jenkins 中的特定 TFS 2008 变更集构建？

> ID：12200517
> 
> 赞同：1
> 
> 时间：2012-08-30T15:35:57.863
> 
> 标签：version-control, jenkins, build-automation

我正在尝试在 Jenkins 中创建一个手动构建，它将从 TFS 构建一个特定的代码变更集，以部署到测试/生产环境中。

目前我只能在 Jenkins 中使用 TFS 将所有内容从 TFS 中提取到最新的变更集。

我正在使用 TFS 插件版本 1.20 运行 Jenkins 版本 1.471

有没有人遇到过这个问题，你知道如何解决吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:10:04.603

缺少此功能，但根据此 Jira 问题的评论似乎正在进行中：

[TFS 支持获取标签](https://issues.jenkins-ci.org/browse/JENKINS-3002)

所以，不是特定的变更集，但对我来说标签就足够了，因为它们可以随时应用。

# yii - CActiveRecord 和“试图获取非对象的属性”错误

> ID：12200521
> 
> 赞同：0
> 
> 时间：2012-08-30T15:36:10.497
> 
> 标签：yii

在带有 CGridView 的 Yii 框架中，我需要从 CActiveRecord 读取一个值

CGridView 中的列定义用于列：

```
'columns'=>array(
        ....
        array(
            'name'=>'rel_CustomerCampain.event_comment',
            'header'=>'Commenti Camp.',
            'value'=>'print_r($data->rel_CustomerCampain,false)'
        ),
..... 
```

我有这个对象 $data->rel_CustomerCampain 并且我需要在“_attributes:CActiveRecord:private”下的 event_comment 中有值： ******* *IneedOfThisValue* ******

当我尝试 'value'=>'$data->rel_CustomerCampain->event_comment'

我有这个错误： **“试图获取非对象的属性”**

有人知道吗？提前致谢....

```
[0] => customerCampain Object
        (
            [_md:CActiveRecord:private] => CActiveRecordMetaData Object
                (
                    [tableSchema] => CMysqlTableSchema Object
                        (
                            [schemaName] => 
                            [name] => tbl_customer_campain
                            [rawName] => `tbl_customer_campain`
                            [primaryKey] => id
                            [sequenceName] => 
                            [foreignKeys] => Array
                                (
                                    [id_campain] => Array
                                        (
                                            [0] => tbl_campain
                                            [1] => id
                                        )

                                    [id_customer] => Array
                                        (
                                            [0] => tbl_customer
                                            [1] => id
                                        )

                                )

                            [columns] => Array
                                (
                                    [id] => CMysqlColumnSchema Object
                                        (
                                            [name] => id
                                            [rawName] => `id`
                                            [allowNull] => 
                                            [dbType] => int(10) unsigned
                                            [type] => string
                                            [defaultValue] => 
                                            [size] => 10
                                            [precision] => 10
                                            [scale] => 
                                            [isPrimaryKey] => 1
                                            [isForeignKey] => 
                                            [autoIncrement] => 1
                                            [_e:CComponent:private] => 
                                            [_m:CComponent:private] => 
                                        )

                                    [id_campain] => CMysqlColumnSchema Object
                                        (
                                            [name] => id_campain
                                            [rawName] => `id_campain`
                                            [allowNull] => 
                                            [dbType] => int(10) unsigned
                                            [type] => string
                                            [defaultValue] => 
                                            [size] => 10
                                            [precision] => 10
                                            [scale] => 
                                            [isPrimaryKey] => 
                                            [isForeignKey] => 1
                                            [autoIncrement] => 
                                            [_e:CComponent:private] => 
                                            [_m:CComponent:private] => 
                                        )

                                    [id_customer] => CMysqlColumnSchema Object
                                        (
                                            [name] => id_customer
                                            [rawName] => `id_customer`
                                            [allowNull] => 
                                            [dbType] => int(10) unsigned
                                            [type] => string
                                            [defaultValue] => 
                                            [size] => 10
                                            [precision] => 10
                                            [scale] => 
                                            [isPrimaryKey] => 
                                            [isForeignKey] => 1
                                            [autoIncrement] => 
                                            [_e:CComponent:private] => 
                                            [_m:CComponent:private] => 
                                        )

                                    [event_datetime] => CMysqlColumnSchema Object
                                        (
                                            [name] => event_datetime
                                            [rawName] => `event_datetime`
                                            [allowNull] => 1
                                            [dbType] => datetime
                                            [type] => string
                                            [defaultValue] => 
                                            [size] => 
                                            [precision] => 
                                            [scale] => 
                                            [isPrimaryKey] => 
                                            [isForeignKey] => 
                                            [autoIncrement] => 
                                            [_e:CComponent:private] => 
                                            [_m:CComponent:private] => 
                                        )

                                    [event_type] => CMysqlColumnSchema Object
                                        (
                                            [name] => event_type
                                            [rawName] => `event_type`
                                            [allowNull] => 1
                                            [dbType] => varchar(200)
                                            [type] => string
                                            [defaultValue] => 
                                            [size] => 200
                                            [precision] => 200
                                            [scale] => 
                                            [isPrimaryKey] => 
                                            [isForeignKey] => 
                                            [autoIncrement] => 
                                            [_e:CComponent:private] => 
                                            [_m:CComponent:private] => 
                                        )

                                    [event_status] => CMysqlColumnSchema Object
                                        (
                                            [name] => event_status
                                            [rawName] => `event_status`
                                            [allowNull] => 1
                                            [dbType] => varchar(200)
                                            [type] => string
                                            [defaultValue] => 
                                            [size] => 200
                                            [precision] => 200
                                            [scale] => 
                                            [isPrimaryKey] => 
                                            [isForeignKey] => 
                                            [autoIncrement] => 
                                            [_e:CComponent:private] => 
                                            [_m:CComponent:private] => 
                                        )

                                    [event_comment] => CMysqlColumnSchema Object
                                        (
                                            [name] => event_comment
                                            [rawName] => `event_comment`
                                            [allowNull] => 1
                                            [dbType] => text
                                            [type] => string
                                            [defaultValue] => 
                                            [size] => 
                                            [precision] => 
                                            [scale] => 
                                            [isPrimaryKey] => 
                                            [isForeignKey] => 
                                            [autoIncrement] => 
                                            [_e:CComponent:private] => 
                                            [_m:CComponent:private] => 
                                        )

                                )

                            [_e:CComponent:private] => 
                            [_m:CComponent:private] => 
                        )

                    [columns] => Array
                        (
                            [id] => CMysqlColumnSchema Object
                                (
                                    [name] => id
                                    [rawName] => `id`
                                    [allowNull] => 
                                    [dbType] => int(10) unsigned
                                    [type] => string
                                    [defaultValue] => 
                                    [size] => 10
                                    [precision] => 10
                                    [scale] => 
                                    [isPrimaryKey] => 1
                                    [isForeignKey] => 
                                    [autoIncrement] => 1
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                            [id_campain] => CMysqlColumnSchema Object
                                (
                                    [name] => id_campain
                                    [rawName] => `id_campain`
                                    [allowNull] => 
                                    [dbType] => int(10) unsigned
                                    [type] => string
                                    [defaultValue] => 
                                    [size] => 10
                                    [precision] => 10
                                    [scale] => 
                                    [isPrimaryKey] => 
                                    [isForeignKey] => 1
                                    [autoIncrement] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                            [id_customer] => CMysqlColumnSchema Object
                                (
                                    [name] => id_customer
                                    [rawName] => `id_customer`
                                    [allowNull] => 
                                    [dbType] => int(10) unsigned
                                    [type] => string
                                    [defaultValue] => 
                                    [size] => 10
                                    [precision] => 10
                                    [scale] => 
                                    [isPrimaryKey] => 
                                    [isForeignKey] => 1
                                    [autoIncrement] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                            [event_datetime] => CMysqlColumnSchema Object
                                (
                                    [name] => event_datetime
                                    [rawName] => `event_datetime`
                                    [allowNull] => 1
                                    [dbType] => datetime
                                    [type] => string
                                    [defaultValue] => 
                                    [size] => 
                                    [precision] => 
                                    [scale] => 
                                    [isPrimaryKey] => 
                                    [isForeignKey] => 
                                    [autoIncrement] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                            [event_type] => CMysqlColumnSchema Object
                                (
                                    [name] => event_type
                                    [rawName] => `event_type`
                                    [allowNull] => 1
                                    [dbType] => varchar(200)
                                    [type] => string
                                    [defaultValue] => 
                                    [size] => 200
                                    [precision] => 200
                                    [scale] => 
                                    [isPrimaryKey] => 
                                    [isForeignKey] => 
                                    [autoIncrement] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                            [event_status] => CMysqlColumnSchema Object
                                (
                                    [name] => event_status
                                    [rawName] => `event_status`
                                    [allowNull] => 1
                                    [dbType] => varchar(200)
                                    [type] => string
                                    [defaultValue] => 
                                    [size] => 200
                                    [precision] => 200
                                    [scale] => 
                                    [isPrimaryKey] => 
                                    [isForeignKey] => 
                                    [autoIncrement] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                            [event_comment] => CMysqlColumnSchema Object
                                (
                                    [name] => event_comment
                                    [rawName] => `event_comment`
                                    [allowNull] => 1
                                    [dbType] => text
                                    [type] => string
                                    [defaultValue] => 
                                    [size] => 
                                    [precision] => 
                                    [scale] => 
                                    [isPrimaryKey] => 
                                    [isForeignKey] => 
                                    [autoIncrement] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                        )

                    [relations] => Array
                        (
                            [relCustomer] => CBelongsToRelation Object
                                (
                                    [joinType] => LEFT OUTER JOIN
                                    [on] => 
                                    [alias] => 
                                    [with] => Array
                                        (
                                        )

                                    [together] => 
                                    [scopes] => 
                                    [name] => relCustomer
                                    [className] => customer
                                    [foreignKey] => id_customer
                                    [select] => *
                                    [condition] => 
                                    [params] => Array
                                        (
                                        )

                                    [group] => 
                                    [join] => 
                                    [having] => 
                                    [order] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                            [idCampain] => CBelongsToRelation Object
                                (
                                    [joinType] => LEFT OUTER JOIN
                                    [on] => 
                                    [alias] => 
                                    [with] => Array
                                        (
                                        )

                                    [together] => 
                                    [scopes] => 
                                    [name] => idCampain
                                    [className] => TblCampain
                                    [foreignKey] => id_campain
                                    [select] => *
                                    [condition] => 
                                    [params] => Array
                                        (
                                        )

                                    [group] => 
                                    [join] => 
                                    [having] => 
                                    [order] => 
                                    [_e:CComponent:private] => 
                                    [_m:CComponent:private] => 
                                )

                        )

                    [attributeDefaults] => Array
                        (
                        )

                    [_model:CActiveRecordMetaData:private] => customerCampain Object
                        (
                            [_md:CActiveRecord:private] => CActiveRecordMetaData Object
 *RECURSION*
                            [_new:CActiveRecord:private] => 
                            [_attributes:CActiveRecord:private] => Array
                                (
                                )

                            [_related:CActiveRecord:private] => Array
                                (
                                )

                            [_c:CActiveRecord:private] => 
                            [_pk:CActiveRecord:private] => 
                            [_alias:CActiveRecord:private] => t
                            [_errors:CModel:private] => Array
                                (
                                )

                            [_validators:CModel:private] => 
                            [_scenario:CModel:private] => 
                            [_e:CComponent:private] => 
                            [_m:CComponent:private] => 
                        )

                )

            [_new:CActiveRecord:private] => 
            [_attributes:CActiveRecord:private] => Array
                (
                    [id] => 2155
                    [id_campain] => 4
                    [id_customer] => 109
                    [event_datetime] => 
                    [event_type] => 
                    [event_status] => 
                    [event_comment] => ******IneedOfThisValue*****
                )

            [_related:CActiveRecord:private] => Array
                (
                )

            [_c:CActiveRecord:private] => 
            [_pk:CActiveRecord:private] => 2155
            [_alias:CActiveRecord:private] => t
            [_errors:CModel:private] => Array
                (
                )

            [_validators:CModel:private] => 
            [_scenario:CModel:private] => update
            [_e:CComponent:private] => 
            [_m:CComponent:private] => 
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:15:43.183

正如我所怀疑的¹，您当前的模型，即您正在为其显示 gridview的模型，与*CustomerCampain*模型有`HAS_MANY`关系。这意味着是一**组***CustomerCampain*对象，也可以从您的 print_r 输出中看到：*`$data->rel_CustomerCampain`*

 ****```
[0] => customerCampain Object
     (
      ...
     ) 
```

所以而不是：

```
'value'=>'$data->rel_CustomerCampain->event_comment' 
```

你所要做的：

```
'value'=>'$data->rel_CustomerCampain[arrayIndex]->event_comment'
// here arrayIndex will have to be the index of the campain you are interested in
'value'=>'$data->rel_CustomerCampain[0]->event_comment' // 0 index for the first campain 
```

* * *

(1)：见问题的第一[条评论](https://stackoverflow.com/questions/12200521/cactiverecord-and-trying-to-get-property-of-non-object-error#comment16341485_12200521)****

# c - 如何让这个 c 宏工作？

> ID：12200522
> 
> 赞同：1
> 
> 时间：2012-08-30T15:36:14.007
> 
> 标签：c

为什么使用 on 和 off 宏会产生问题。我是使用 c 宏的新手。宏声明是否正确或代码是否存在其他问题。请帮忙 ？？

```
#include<stdio.h>
#include<stdint.h>

#define ONE 1;             //  OR BY   1 [ 0 0 0 0 0 0 0 1 ] TO insert 1 at LSB position             
#define TWO_FIVE_FOUR 254; // AND BY 254 [ 1 1 1 1 1 1 1 0 ] TO insert 0 at LSB position

#define on(x) (x|ONE)
#define off(x) (x & TWO_FIVE_FOUR)

int main()
{
    uint8_t a=53;

    printf("\nValue of byte a : %d",a );

    printf("\nValue of byte b : %d",on(a)); //Error

    printf("\nValue of byte c : %d",off(a)); //Error

    getchar();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T15:37:48.593

从宏定义中删除分号

```
#define ONE 1              //  OR BY   1 [ 0 0 0 0 0 0 0 1 ] TO insert 1 at LSB position             
#define TWO_FIVE_FOUR 254  // AND BY 254 [ 1 1 1 1 1 1 1 0 ] TO insert 0 at LSB position 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T15:41:30.833

`-E`在使用开关预处理宏后，您始终可以检查 gcc 如何查看您的代码：

```
gcc -E mycode.c 
```

这是输出：

```
printf("\nValue of byte a : %d",a );

printf("\nValue of byte b : %d",(a|1;););

printf("\nValue of byte c : %d",(a & 254;);); 
```

很明显，`;`s 是错误的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T15:43:37.580

啊，:)

#define 是预处理器指令，而不是 C 语句

如果您包括 ; 最后，预处理器会将其粘贴在代码中间。

您编写的代码是这样翻译的：

```
int main()
{
    uint8_t a=53;

    printf("\nValue of byte a : %d",a );

    printf("\nValue of byte b : %d",(a|1;););

    printf("\nValue of byte c : %d",(a & 254;););

    getchar();

    return 0;
} 
```

只需从宏定义中删除分号，就可以了。

干杯，J。

# php - 在 PHP 和 XML 的 getElementsByTagName() 中使用标签变量？

> ID：12200526
> 
> 赞同：0
> 
> 时间：2012-08-30T15:36:36.267
> 
> 标签：php, xml, getelementsbytagname, xmldom

看我的PHP：

```
file = "routingConfig.xml";
global $doc;
$doc = new DOMDocument();
$doc->load( $file );

function traverseXML($ElTag, $attr = null, $arrayNum = 'all'){
    $tag = $doc->getElementsByTagName($ElTag);
    $arr = array();

    foreach($tag as $el){
        $arr[] = $el->getAttribute($attr);
    }
    if ($arrayNum == 'all'){
        return $arr;
    }else if(is_int($arrayNum)){
        return $arr[$arrayNum];
    }else{
        return "Invalid $arrayNum value: ". $arrayNum;
    }; 
}

echo traverseXML("Route", "type", 2); 
```

XML 是：

```
<Routes>
  <Route type="source"></Route>
  <Route></Route>
<Routes> 
```

返回的错误是：

`Fatal error: Call to a member function getElementsByTagName() on a non-object`

我不知道该怎么做？

**编辑：**这是正在使用的实际代码。我最初将它剥离了一点，以使其更易于阅读，但我认为我的问题与使用该功能有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:10:25.160

该`$doc`变量未在您的函数内部定义。你有两个选择：

1.  `$doc`作为首选的函数参数之一传递。

2.  写`global $doc;`在函数的顶部……开发人员通常会尽量避免使用全局变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:10:33.477

您的问题是该`global $doc;`语句在函数*之外*，因此该变量`$doc`未在函数*内部*定义。

这将解决它：

```
// ...
function traverseXML($ElTag, $attr = null, $arrayNum = 'all') {
  global $doc;
// ... 
```

……*但是*

**全局变量是个坏消息。**它们通常表明设计不佳。

真的，您应该`$doc`作为参数传入，如下所示：

```
function traverseXML($doc, $ElTag, $attr = null, $arrayNum = 'all'){
    $tag = $doc->getElementsByTagName($ElTag);
    $arr = array();
    foreach($tag as $el){
        $arr[] = $el->getAttribute($attr);
    }
    if ($arrayNum == 'all'){
        return $arr;
    }else if(is_int($arrayNum)){
        return $arr[$arrayNum];
    }else{
        return "Invalid $arrayNum value: ". $arrayNum;
    }; 

}

$file = "routingConfig.xml";

$doc = new DOMDocument();
$doc->load( $file );

echo traverseXML($doc, "Route", "type", 2); 
```

尽管您可能会考虑是否需要该功能 - 如果您不在应用程序的其他任何地方使用它，您不妨这样做：

```
$file = "routingConfig.xml";

$ElTag = "Route";
$attr = "type";
$arrayNum = 2;

$doc = new DOMDocument();
$doc->load( $file );

$tag = $doc->getElementsByTagName($ElTag);
$arr = array();
foreach($tag as $el){
    $arr[] = $el->getAttribute($attr);
}
if ($arrayNum == 'all'){
    echo $arr;
}else if(is_int($arrayNum)){
    echo $arr[$arrayNum];
}else{
    echo "Invalid $arrayNum value: ". $arrayNum;
}; 
```

# python - 如何从coverage.py中排除文件？

> ID：12200528
> 
> 赞同：11
> 
> 时间：2012-08-30T15:36:42.870
> 
> 标签：python, unit-testing, code-coverage, nose, coverage.py

我使用`nosetest`的`coverage.py`插件。是否有可能从覆盖率报告中排除整个文件或文件夹？我的用例是在我的项目文件夹中有一个外部库，显然我的测试套件没有涵盖。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2021-04-07T14:37:39.307

如果要排除代码块，请使用`# pragma: no cover`注释。

一些例子：

```
def foo(self, param): # pragma: no cover <--
    """ Exclude an entire function """
    # None of this will be included in coverage

def bar(self, param):
    """ Exclude a branch of code """
    if param:
        # This part is included in code coverage
        do_this()
    else: # pragma: no cover <--
        # Not included in coverage
        other_thing() 
```

更多在[文档](https://coverage.readthedocs.io/en/coverage-4.3.3/excluding.html)中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-24T21:22:55.947

[是的，他们在docs](https://coverage.readthedocs.io/en/coverage-5.3/source.html#source)中有相当广泛的支持。

> 运行代码时，coverage run 命令将默认测量所有代码，除非它是 Python 标准库的一部分。
> 
> 您可以使用 --source 命令行开关或 [run] 源配置值指定要测量的源。该值是目录或包名称的列表。如果指定，则仅测量这些目录或包中的源。指定源选项还可以使coverage.py 报告未执行的文件，因为它可以在源树中搜索根本没有测量的文件。只考虑可导入的文件（位于树根的文件，或在具有*_init* _.py 文件的目录中的文件），并且名称中带有不寻常标点符号的文件将被跳过（假定它们是由文本编写的暂存文件编辑）。
> 
> 您可以使用 --include 和 --omit 开关（或 [run] include 和 [run] omit 配置值）进一步微调 coverage.py 的注意力。--include 是文件名模式的列表。如果指定，则仅测量与这些模式匹配的文件。--omit 也是文件名模式的列表，指定不测量的文件。如果同时指定了 include 和 omit，则首先将文件集减少为仅与包含模式匹配的文件，然后从集中删除与省略模式匹配的所有文件。
> 
> 包含和省略文件名模式遵循典型的 shell 语法：* 匹配任意数量的字符和 ? 匹配单个字符。以通配符开头的模式按原样使用，其他模式相对于当前目录进行解释。
> 
> 源值、包含值和省略值共同确定要测量的源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-05T13:39:23.647

另一种解决方案是将要排除的文件或文件夹放在不是包的目录中（即其中没有`__init__`文件）。覆盖范围将不会覆盖它。

[文档](https://coverage.readthedocs.io/en/coverage-5.3/source.html#execution)说：

> 只会考虑可导入的文件（位于树根目录或包含文件的目录中的`__init__.py`文件）。

# compilation - 如何使用 OpenCOBOL 创建可执行文件？

> ID：12200530
> 
> 赞同：0
> 
> 时间：2012-08-30T15:36:45.273
> 
> 标签：compilation, cross-platform, executable, cobol, gnucobol

完成一个 COBOL 程序后，如何将其编译成可以在其他 PC 上运行的可执行文件？我正在通过 cygwin 使用 OpenCOBOL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:53:23.627

从OpenCOBOL的[用户手册](http://www.opencobol.org/modules/bwiki/index.php?UserManual)中查看此[入门页面：](http://www.opencobol.org/modules/bwiki/index.php?cmd=read&page=UserManual/1#content_1_1)

但万一链接断开，只需执行以下操作：

```
$ cobc -x hello.cob
$ ./hello 
```

`cobc`是编译器。`hello.cob`是源文件。输出只是`hello`可以通过调用运行的文件`./hello`。该`-x`选项是构建可执行文件所必需的。

然而，与所有编译程序一样，它是为机器所编译的。它可以在具有类似架构的机器上工作，但除非您使用Python 或 Java 等[解释性语言，否则您无法实现真正​​的跨平台能力。](http://en.wikipedia.org/wiki/Interpreted_language)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:10:12.330

如果您使用 Cygwin 进行编译，则目标计算机还需要 Cygwin，或者特别是 cygwin 动态库以及 OpenCOBOL 运行时。

很多时候，你也可以在 MinGW 下编译，这减少了依赖，但也减少了可用的 POSIX 功能。

最简单的路径，在目标机器上安装 OpenCOBOL 和 Cygwin，一切顺利，否则您需要生成包含 PATH 设置的所有依赖项和说明的发布包。

# c# - 在 NHibernate 映射层中使用复杂的 where 子句

> ID：12200531
> 
> 赞同：4
> 
> 时间：2012-08-30T15:36:45.737
> 
> 标签：c#, sql, nhibernate, nhibernate-mapping

我之前在映射层中使用了 where 子句，以防止某些记录以可能的最低级别进入我的应用程序。（主要是为了防止不得不重写很多行代码来过滤掉不需要的记录）

这些很简单，一列查询，就像这样

`this.Where("Invisible = 0");`

但是，出现了需要使用`exists`sql 查询的情况。

`exists (select ep_.Id from [Warehouse].[dbo].EventPart ep_ where Id = ep_.EventId and ep_.DataType = 4`

在上述情况下，我通常会`Event`用一个短名称来引用父表，即，`event_.Id`但是由于 Nhibernate 会动态生成这些短名称，所以不可能知道它会是什么。

所以我尝试使用 just `Id`, 从上面`ep_ where Id = ep_.EventId`

运行代码时，由于动态短名称，EventPart 表短名称`ep_`有另一个短名称前缀，`event0_.ep_`其中`event0_`指父表。

这会导致 SQL 错误，因为 . 介于两者`event0_`之间`ep_`

所以在我的`EventMap`我有以下

`this.Where("(exists (select ep_.Id from [isnapshot.Warehouse].[dbo].EventPart ep_ where Id = ep_.EventId and ep_.DataType = 4)");`

但是当它生成时它会创建这个

`select cast(count(*) as INT) as col_0_0_
from [isnapshot.Warehouse].[dbo].Event event0_
where (exists (select ep_.Id from [isnapshot.Warehouse].[dbo].EventPart event0_.ep_ where event0_.Id = ep_.EventId and ep_.DataType = 4)`

它已正确添加`event0_`到`Id`

是否构建了映射层 where 子句来处理这个问题，如果是，我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:50:49.070

尝试将方括号放在别名周围，如下所示：

```
exists (select ep_.Id from [Warehouse].[dbo].EventPart [ep_] where Id = ep_.EventId and ep_.DataType = 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T22:14:44.380

在定义 ep_ 别名时尝试使用“as”关键字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:49:46.313

NHibernate.SqlCommand.Template 类有一个修改 Where 子句的方法 (RenderWhereStringTemplate)。查看代码，我认为问题在于它认为 ep_ 是一个标识符（基本上是映射类的一个属性），所以它用表的前缀作为前缀。确定它是否是标识符的代码非常简单——它基本上检查它是否被引用，或者它是否以 az 开头并且不包含 .

我认为最简单的解决方案是将别名从 ep_ 更改为 _ep - 我通常使用 2 _ 来确保它不会与 NHibernate 生成的前缀冲突。

# ruby-on-rails - LinkedIn API 返回额外/不正确的登录提示

> ID：12200534
> 
> 赞同：0
> 
> 时间：2012-08-30T15:37:00.170
> 
> 标签：ruby-on-rails, omniauth, linkedin

我有一个运行omniauth-linkedin gem 和linkedin gem（本质上是一个API 包装器）的Rails 应用程序。当用户登录时，他们会收到一个主要的登录提示，向他们显示正确的范围（完整的个人资料和电子邮件地址），如下所示：

![在此处输入图像描述](../Images/df9e1bfaebd1cd6fd1557be6e72ed936.png)

但是，在他们登录后，他们会收到另一个不应该出现的登录提示，并且忽略了初始范围请求。它告诉他们 LinkedIN 只是请求他们的 PROFILE OVERVIEW，这是不正确的：

![在此处输入图像描述](../Images/cd4a1c72125c26a66385db18f403f948.png)

问题一定出在我的 auth_controller 上，我认为这与在其中一个身份验证阶段创建的 url 有关（绝对是在用户输入他们的 LinkedIn 身份验证凭据之后）。这是我的 auth_controller：

```
require 'linkedin'

class AuthController < ApplicationController

  def auth
    client = LinkedIn::Client.new(ENV['LINKEDIN_KEY'], ENV['LINKEDIN_SECRET'])
    request_token = client.request_token(:oauth_callback => "http://#{request.host_with_port}/callback")
    session[:rtoken] = request_token.token
    session[:rsecret] = request_token.secret
    redirect_to client.request_token.authorize_url
  end

  def callback
    client = LinkedIn::Client.new(ENV['LINKEDIN_KEY'], ENV['LINKEDIN_SECRET'])
    if session[:atoken].nil?
      pin = params[:oauth_verifier]
      atoken, asecret = client.authorize_from_request(session[:rtoken], session[:rsecret], pin)
      session[:atoken] = atoken
      session[:asecret] = asecret
      @user = current_user
      @user.uid = client.profile(:fields => ["id"]).id
      flash.now[:success] = 'Signed in with LinkedIn.'
    else
      client.authorize_from_access(session[:atoken], session[:asecret])
      @user.uid = client.profile(:fields => ["id"]).id
      flash.now[:success] = 'Signed in with LinkedIn.'
    end
    @user = current_user
    @user.save
    redirect_to current_user
  end

end 
```

以防万一，这是我的 omniauth.rb 文件，其中说明了我为我的应用程序请求的范围：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :linkedin, ENV['LINKEDIN_KEY'], ENV['LINKEDIN_SECRET'], 
  :scope => 'r_fullprofile r_emailaddress', :fields => ['id', 'email-address', 'first-name', 'last-name', 'headline', 'industry', 'picture-url', 'public-profile-url', 'location', 'positions', 'educations']
end 
```

无法弄清楚如何摆脱来自 LinkedIn 的第二个不必要和误导性的提示，并希望得到任何指导！

谢谢你。

# ios - IOS 如何制作视图覆盖键盘

> ID：12200537
> 
> 赞同：0
> 
> 时间：2012-08-30T15:37:05.350
> 
> 标签：ios, uiview, uiviewcontroller, keyboard

我遇到一个问题：

我有一个像这样的视图控制器。 ![在此处输入图像描述](../Images/daaf3bbdc453618b613ab58f08b5fc6b.png)

为了在键盘出现时使工具栏向上，我将 self.view 向上移动。

```
[self.view setFrame:CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y + keyboardFrame.size.height * (up ? -1 : 1), self.view.frame.size.width, self.view.frame.size.height)]; 
```

现在我想单击工具栏中的左键，并出现框架与此键盘相同的视图。

但是我在哪里可以添加这个视图？如果将子视图添加到 self.view，它将与键盘顶部的 self.view 一起向上移动，而不是覆盖。我是IOS的初学者，我对此一无所知，并且已经搜索过，但对此一无所知。

另一个问题，如果底部的工具栏，我也想点击它的左键来显示视图（动画和框架都和键盘一样），我该怎么办？

你能帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:02:11.710

我是对的，你想用键盘上下连接的键盘上方弹出栏吗？

然后你必须注册键盘显示和隐藏通知，并根据通知和键盘显示和隐藏速度上下动画视图。

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(keyboardWillShow:) 
                                             name:UIKeyboardWillShowNotification 
                                           object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(keyboardWillHide:) 
                                             name:UIKeyboardWillHideNotification 
                                           object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWasShown:)
                                             name:UIKeyboardDidShowNotification object:nil]; 
```

现在你必须实现所有的选择器方法：

```
//Code from Brett Schumann
-(void) keyboardWillShow:(NSNotification *)note{
    // get keyboard size and loctaion
    CGRect keyboardBounds;
    [[note.userInfo valueForKey:UIKeyboardFrameEndUserInfoKey] getValue: &keyboardBounds];
    NSNumber *duration = [note.userInfo objectForKey:UIKeyboardAnimationDurationUserInfoKey];
    NSNumber *curve = [note.userInfo objectForKey:UIKeyboardAnimationCurveUserInfoKey];

    // Need to translate the bounds to account for rotation.
    keyboardBounds = [self.view convertRect:keyboardBounds toView:nil];

    // get a rect for the textView frame
    CGRect containerFrame = containerView.frame;
    containerFrame.origin.y = self.view.bounds.size.height - (keyboardBounds.size.height + containerFrame.size.height);
    // animations settings
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:[duration doubleValue]];
    [UIView setAnimationCurve:[curve intValue]];

    // set views with new info
    containerView.frame = containerFrame;

    // commit animations
    [UIView commitAnimations];

    [self showSendButton];
}

-(void) keyboardWillHide:(NSNotification *)note{
    NSNumber *duration = [note.userInfo objectForKey:UIKeyboardAnimationDurationUserInfoKey];
    NSNumber *curve = [note.userInfo objectForKey:UIKeyboardAnimationCurveUserInfoKey];

    // get a rect for the textView frame
    CGRect containerFrame = containerView.frame;
    containerFrame.origin.y = self.view.bounds.size.height - containerFrame.size.height;

    // animations settings
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:[duration doubleValue]];
    [UIView setAnimationCurve:[curve intValue]];

    // set views with new info
    containerView.frame = containerFrame;

    // commit animations
    [UIView commitAnimations];

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0, 0, containerView.frame.size.height-46.0f+20.0f, 0);
    _table.contentInset = contentInsets;
    _table.scrollIndicatorInsets = contentInsets;

    //display button based on facebook login status
    if ([facebookService.facebook isSessionValid]) {
        [commentButton makeButtonLogoutButton];
        textView.editable = YES;
    } else {
        [commentButton makeButtonLoginButton];
        textView.editable = NO;
    }
}

- (void)keyboardWasShown:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height+20.0f, 0.0);
    _table.contentInset = contentInsets;
    _table.scrollIndicatorInsets = contentInsets;
} 
```

用您自己的视图直接替换键盘顶部的给定视图。这个视图应该是一个包含所有按钮和东西的单一视图。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:50:39.337

首先，为什么要覆盖键盘？这样做似乎不是一个好主意。而且我认为这根本不可能。对于第二个问题的答案，您应该查看`UIView`文档：

```
[UIView animateWithDuration:0.3 animations:^{
    // place your view wherever you want
    CGRect frame = myView.frame;
    frame.y = self.view.frame.size.height - frame.size.height;
    myView.frame = frame;
}]; 
```

# android - 适用于各种设备的 Android 图像

> ID：12200538
> 
> 赞同：0
> 
> 时间：2012-08-30T15:37:08.643
> 
> 标签：android, android-layout

我对 Android Layouts 有疑问。我已阅读[Layouts](http://developer.android.com/guide/topics/ui/declaring-layout.html)的文档。我的问题是，在开发时让我们说图像是否放置在名为

```
 drawable-hdpi
 drawable-ldpi
 drawable-mdpi
 drawable-xhdpi 
```

drawable-ldpi 是指屏幕较小的手机吗，drawable-xhdpi 是指标签，drawable-mdpi 是中型屏幕手机。

如果没有，我需要能够放入所有类型的设备中，命名为电话、标签

我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:41:08.797

通常，较大的屏幕具有较高的 DPI，但并非总是如此。如果您试图区分手机和平板电脑屏幕，密度不是正确的方法。使用以下，

*   `drawable`: 电话
*   `drawable-sw600dp`: 7" 平板电脑
*   `drawable-sw720dp`: 10" 平板电脑

或者，您可以使用屏幕尺寸：`small`, `medium`, `large`, `xlarge`. 例如，`drawable-large`。从文档中，

*   `xlarge`屏幕至少为 960dp x 720dp
*   `large`屏幕至少为 640dp x 480dp
*   `normal`屏幕至少为 470dp x 320dp
*   `small`屏幕至少为 426dp x 320dp

> [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:39:45.477

谷歌搜索`Android xhdpi`提供了有关如何使用这些的 Android 资源：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

DPI 表示每英寸有多少个点。一些小型手机可以容纳很多点，这使它们具有很高的 DPI。您应该为不同的分辨率提供不同尺寸的图像。Google 建议`3:4:6:8`以 l、m、h 和 xh DPI 的比例创建图像。

# php - 从现在 x 天后从数据库中选择过去的日期

> ID：12200539
> 
> 赞同：2
> 
> 时间：2012-08-30T15:37:09.637
> 
> 标签：php, mysql

考虑下表`daterange`

```
_date        trading_day
------------------------
2011-08-01   1
2011-07-31   0
2011-07-30   0
2011-07-29   1
2011-07-28   1
2011-07-27   1
2011-07-26   1
2011-07-25   1
2011-07-24   0
2011-07-23   0
2011-07-22   1
2011-07-21   1
2011-07-20   1
2011-07-19   1
2011-07-18   1
2011-07-17   0 
```

我需要一个返回给定_date 前几天`_date`的查询。`x`倒数时，`_days`with`trading_day = 0`应该被忽略。几个例子：

```
input                    | output
-------------------------+------------
1 day  before 2011-07-19 | 2011-07-18
2 days before 2011-08-01 | 2011-07-28 (trading_day = 0 don't count)
3 days before 2011-07-29 | 2001-07-26 
```

第一个很简单：

```
SELECT _date 
FROM daterange 
WHERE trading_day = 0 AND _date < '2011-07-19' LIMIT 1 
```

但我不知道如何查询其他示例。你？我更喜欢一种适用于所有情况的解决方案，因此我可以将天数向后设置为 php.ini 中的变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:43:20.153

查询 1

```
SELECT `_date`
FROM `daterange` 
WHERE `trading_day` = '1' AND `_date` <= '2011-07-19' 
ORDER BY `_date` DESC 
LIMIT 1 
OFFSET 1; 
```

查询 2

```
SELECT `_date` 
FROM `daterange` 
WHERE `trading_day` = '1' AND `_date` <= '2011-08-01' 
ORDER BY `_date` DESC 
LIMIT 1 
OFFSET 2; 
```

查询 3

```
SELECT `_date`
FROM `daterange` 
WHERE `trading_day` = '1' AND `_date` <= '2011-07-29' 
ORDER BY `_date` DESC 
LIMIT 1 
OFFSET 3; 
```

准备好的语句（PDO 示例）

```
$stmt = $dbh->prepare("SELECT `_date`
    FROM `daterange` 
    WHERE `trading_day` = '1' AND `_date` <= :given_date
    ORDER BY `_date` DESC 
    LIMIT 1 
    OFFSET :days_before");
$stmt->bindParam(':given_date', $given_date);
$stmt->bindParam(':days_before', $days_before);
$stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:42:39.140

```
SELECT DATE(_date - INTERVAL trading_day DAY) FROM daterange; 
```

当交易日为 0 时，此查询将被忽略，并按原样返回日期。如果您想排除没有交易日的日期，那么您需要：

```
SELECT DATE(_date - INTERVAL trading_day DAY) FROM daterange WHERE trading_day!=0; 
```

如果您的日期字段已经是格式 2012-01-01，则此处不需要 DATE()。如果您的日期字段是时间戳 (2012-01-01 10:01:17) DATE() 将只返回日期部分，因此它就像 (2012-01-01)。换句话说，根据您提供的内容，这也同样适用于您：

```
SELECT _date - INTERVAL trading_day DAY FROM daterange; 
```

并相应地

```
SELECT _date - INTERVAL trading_day DAY FROM daterange WHERE trading_day!=0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:46:02.760

您的第一个示例现在只是偶然起作用:) 您需要对结果集应用一个顺序，以确保您检索到 2011-07-19 之前的最大日期，而不仅仅是一个任意日期。

```
SELECT _date
FROM daterange
WHERE trading_day <> 0 AND _date < '2011-07-19'
ORDER BY _date DESC
LIMIT 1 
```

如果您想要的不是给定日期前的第一天，而是其他一天，那么也将 OFFSET 应用于您的查询。

这个将为您提供＃3所需的东西：

```
SELECT _date
FROM daterange
WHERE trading_day <> 0 AND _date < '2011-07-29'
ORDER BY _date DESC

LIMIT 1
OFFSET 2 
```

指示 MySQL 跳过本`OFFSET 2`应返回的前两个结果，并从第三个结果开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T15:59:47.707

我对您的问题并不完全清楚 - 但您似乎想选择上一个交易日期，以及那是多少天前。我不确定您是否要对表中的所有日期或任何单个日期执行此操作。

我假设它适用于表中的所有日期，因为否则它是一个非常简单的查询。

```
SELECT 
dr._date as the_date, 
d2._date as previous_trading_date, 
DATEDIFF(dr._date, d2._date) days_ago

FROM daterange dr
JOIN (
    SELECT _date FROM daterange
    WHERE trading_day > 0
    ORDER BY _date DESC
) d2 ON d2._date < dr._date

GROUP BY dr._date
ORDER BY dr._date DESC 
```

该查询所做的是从 daterange 中选择每个日期，然后运行一个子查询来选择每个日期减去非交易日的日期，然后按降序对它们进行排序（最近的在前）。它将每个日期连接到它之前的每个日期，但是我们然后`daterange._date`按条款）。然后，我们使用该`DATEDIFF()`函数计算日期和前一个交易日期之间的天数。

* * *

因此，如果您想选择一个比`$x`给定日期 ( `$date`) 早几天 ( ) 的前一个日期，并忽略`trading_day`值为 的日期`0`，您可以这样做：

```
SELECT _date

FROM daterange

WHERE _date < '{$date}'
AND trading_day > 0

ORDER BY _date DESC
LIMIT 1
OFFSET {$x - 1} 
```

该`OFFSET`条款允许您跳过`{$x - 1}`与您的条款匹配的第一天`WHERE`，这应该会到达您想要的那一天。这个查询虽然做了一些假设。`daterange`主要是你每天都有一个（而且只有一个）行。如果你不这样做，那么你最终会得到一些意想不到的结果。

但是考虑一下之后，您可以执行以下查询：

```
SELECT _date

FROM daterange

WHERE _date <= DATE_SUB('2011-08-01', INTERVAL {$x} DAY)
AND trading_day > 0

ORDER BY _date DESC
LIMIT 1 
```

此查询执行日期减法，因此您将返回`{$x}`几天前的日期，但通过添加`trading_day > 0`子句，它将删除任何不是交易日的日期，按日期降序排列结果，然后选择第一个- 那应该是你想要的日期。试试看。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T15:50:56.217

```
Select temp._date 
FROM (Select _date FROM daterange WHERE trading_day<>0 AND trading_day < $date ORDER BY _date) as temp
ORDER BY _date LIMIT $days_before; 
```

并且只获得第一条记录。

您还可以将 ORDER BY 更改为 DESC 以及封闭选择中的 where 子句（如果它在将来）。

# ios - iOS facebook SDK 3 > 获取签名请求

> ID：12200541
> 
> 赞同：1
> 
> 时间：2012-08-30T15:37:16.647
> 
> 标签：ios, facebook, sdk

我尝试通过网络服务获取签名的请求以登录用户，但我只能访问 FBSession 上的 accessToken。

我看到这个链接 [Facebook Signed Request for iOS (HMAC SHA256)](https://stackoverflow.com/questions/10812140/facebook-signed-request-for-ios-hmac-sha256) 展示了如何转换 signed_request 但没有展示如何获取它。

需要帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:46:54.390

如果我理解正确，您希望您的应用程序登录，然后调用需要再次检查用户凭据的服务器。我使用[本](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/)教程进行身份验证。然后，当我调用服务器时，我将 accessToken 属性作为参数发送，以检查服务器上的用户凭据。您可以像这样获取令牌值：

```
FBSession.activeSession.accessToken 
```

然后，在服务器端，您可以将访问令牌设置为您从应用程序获得的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T23:50:46.473

我编译了一个 gist，它生成一个签名请求，然后您可以使用它来验证服务器上的用户，而无需查询图形 API。

你可以在这里找到它：[https ://gist.github.com/3962188](https://gist.github.com/3962188)

你可以在这里找到我为它编译的原始问题：[Facebook iOS SDK to return a signed request object on login](https://stackoverflow.com/questions/7874091/facebook-ios-sdk-to-return-a-signed-request-object-upon-login)

请注意，大部分代码只是对现有开源代码的编译，但我还没有在任何地方看到任何像这样的完全有效的实现。

# javascript - 在 Node.JS 中，如何从单独的 .js 文件返回整个对象？

> ID：12200542
> 
> 赞同：3
> 
> 时间：2012-08-30T15:37:18.703
> 
> 标签：javascript, json, node.js

我是 Node.js 的新手，并试图弄清楚如何从一个单独的文件中请求一个对象（而不仅仅是请求一个函数），但我尝试的一切- `exports`，`module-exports`等等 - 都失败了。

因此，例如，如果我有`foo.js`：

```
 var methods = {
                   Foobar:{
                            getFoo: function(){return "foo!!";},
                            getBar: function(){return "bar!!";}
                   }
                  };
module.exports = methods; 
```

现在我想在`foo.js`from的对象中调用一个函数`index.js`：

```
var m = require('./foo');  
function fooMain(){
  return m.Foobar.getFoo();
}; 
```

我该怎么做呢？我已经尝试了各种组合，`exports`但`module-exports`它们似乎只有在我调用不属于对象的离散函数时才有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T15:46:25.770

你说你试过了`exports`，但你的代码没有显示出来。您希望从模块外部可见的任何内容都必须分配给（或以其他方式引用）`module.exports`。在您的情况下，您已经有一个对象，您可以将其分配给`module.exports`：

```
var methods = {
    ...
};

// You must export the methods explicitly
module.exports = methods; 
```

`module.exports`不是魔法，它是一个普通的物体，你可以这样对待它。这意味着您可以将您的方法直接分配给它，如下所示：

```
module.exports.Foobar = {};
module.exports.Foobar.getFoo = function() { ... };
... 
```

或者，您可能知道，您可以用一个函数替换它：

```
module.exports = function() { return "It's ALWAYS over 9000!!!!"; }; 
```

只有在导出之后，您才能在另一个模块中使用*任何东西。*

# javascript - 覆盖 twitter bootstrap Textbox Glow and Shadows

> ID：12200544
> 
> 赞同：90
> 
> 时间：2012-08-30T15:37:25.310
> 
> 标签：javascript, jquery, html, css, twitter-bootstrap

我想删除文本框和边框的蓝色辉光，但我不知道如何覆盖任何 js 或它的 css，请查看[这里](http://jsfiddle.net/fadykamal/pE5mQ/62/)

**编辑 1**

我想这样做是因为我正在使用 jquery 插件[Tag-it](http://aehlke.github.com/tag-it/)并且我也在使用 twitter bootstrap，该插件使用隐藏的 textField 来添加标签，但是当我使用 twitter bootstrap 时，它显示为一个带有发光内部的文本框有点奇怪的文本框

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-08-30T15:44:20.113

```
.simplebox {
  outline: none;
  border: none !important;
  -webkit-box-shadow: none !important;
  -moz-box-shadow: none !important;
  box-shadow: none !important;
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-16T20:32:37.047

您还可以覆盖默认的 Bootstrap 设置以使用您自己的颜色

```
textarea:focus,
input[type="text"]:focus,
input[type="password"]:focus,
input[type="datetime"]:focus,
input[type="datetime-local"]:focus,
input[type="date"]:focus,
input[type="month"]:focus,
input[type="time"]:focus,
input[type="week"]:focus,
input[type="number"]:focus,
input[type="email"]:focus,
input[type="url"]:focus,
input[type="search"]:focus,
input[type="tel"]:focus,
input[type="color"]:focus,
.uneditable-input:focus {
  border-color: rgba(82, 168, 236, 0.8);
  outline: 0;
  outline: thin dotted \9;
  /* IE6-9 */

  -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
  -moz-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
  box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-30T15:49:38.917

```
input.simplebox:focus {
  border: solid 1px #ccc;
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  transition: none;
  -moz-transition: none;
  -webkit-transition: none;
} 
```

设置引导不专注的风格

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-10-27T01:12:40.510

如果您认为您无法处理 css 类，那么只需将样式添加到文本字段

```
<input type="text" style="outline:none; box-shadow:none;"> 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-05-06T14:34:29.660

在做了一些挖掘之后，我认为他们在最新的引导程序中改变了它。下面的代码对我有用，它不是简单的框，我使用的表单控件导致了问题。

```
input.form-control,input.form-control:focus {
    border:none;
    box-shadow: none;
   -webkit-box-shadow: none;
   -moz-box-shadow: none;
   -moz-transition: none;
   -webkit-transition: none;
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-09-01T01:18:20.330

转到[Customize Bootstrap](http://getbootstrap.com/customize/)，查找 @input-border-focus，输入您想要的颜色代码，向下滚动并单击“编译和下载”。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-08-30T15:40:50.607

这将删除边框和焦点蓝色阴影。

```
input.simplebox,input.simplebox:focus {
  border:none;
  box-shadow: none;
  -webkit-box-shadow: none;
  -moz-box-shadow: none;
  -moz-transition: none;
  -webkit-transition: none;
} 
```

[http://jsfiddle.net/pE5mQ/64/](http://jsfiddle.net/pE5mQ/64/)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-12-04T09:55:23.387

在 bootstrap 3 上，ios 上有一个小的顶部显示，可以用这个删除：

```
input[type="text"], input[type="email"], input[type="search"], input[type="password"] {
    -webkit-appearance: caret;
    -moz-appearance: caret; /* mobile firefox too! */
} 
```

从[这里得到](http://davidwalsh.name/input-shadows-ipad)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-11-03T16:13:29.510

此时不需要供应商前缀，除非您支持旧版浏览器，并且您可以通过仅引用所有输入而不是每个单独的类型来简化选择器。

```
input:focus,
textarea:focus,
select:focus {
  outline: 0;
  box-shadow: none;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-01T06:56:27.783

```
.form-control:focus {
  box-shadow: 0 0 0 0.2rem rgba(103, 250, 34, 0.25);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-01-12T14:02:56.560

到目前为止，没有一个答案可以帮助我解决这个问题。为我解决的问题是

```
/*Shadow after focus - Overwrites bootstrap5 style for btn classes*/
.btn-check:focus + .btn-primary, 
.btn-primary:focus {
    box-shadow: 0 0 7px 7px rgba(4,220,93,255);
}
/*Shadow while clicking (Animation) - Overwrites bootstrap5 style for btn classes*/
.btn-check:active + .btn-primary:focus, 
.btn-check:checked + .btn-primary:focus, 
.btn-primary.active:focus, 
.btn-primary:active:focus, 
.show > .btn-primary.dropdown-toggle:focus {
    box-shadow: 0 0 0 .25rem rgba(10, 102, 37, 0.493);
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-12-31T13:01:03.203

HTML

```
<input type="text" class="form-control shadow-none"> 
```

CSS

```
input:focus{
    border: 1px solid #ccc
} 
```

# facebook - 使用一个人的 Facebook 帐户登录到 Spring 驱动的网站

> ID：12200546
> 
> 赞同：-2
> 
> 时间：2012-08-30T15:37:30.667
> 
> 标签：facebook, spring, login, spring-social

我希望我网站的用户能够**使用他们的 Facebook 帐户**登录我的网站。我的网站将由**Spring 框架**提供支持。

Spring Social 可以帮助我还是我需要创建一个 Facebook 应用程序？

欢迎任何一般性指导、建议或指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:54:01.763

接受的答案在技术上是正确的，即 Facebook 不是 OpenID 提供商。但是，OpenID 并不是实现此目的的唯一方法。

Spring Social 的 ProviderSignInController 可用于执行“使用 {provider} 登录”身份验证，其中 {provider} 可以是任何 OAuth 保护的 API，包括 Facebook。有关如何完成此操作的示例，请参阅 Spring Social Showcase。

# algorithm - 最小婚姻可能算法

> ID：12200554
> 
> 赞同：2
> 
> 时间：2012-08-30T15:37:51.150
> 
> 标签：algorithm, graph-theory

有一些男性 M1, M2, .... Mn，一些女性被赋予 W1, W2, W3, .....Wm。并且还给出了一个二维矩阵，它讲述了他喜欢的男人的兴趣。计算与所有男人和女人结婚所需的婚姻数量。

`constraint:`一个男人可以和多个女人结婚，一个女人可以和多个男人结婚。

`Approach that I think:` 我认为这个问题可以用二分法解决，但我很困惑是什么情况下引发了这个问题。请指导解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:25:20.883

您想要最小的边缘覆盖，这是一个多项式时间问题。您可以使用 Hopcroft–Karp 算法找到最大匹配，然后从每个未连接的点到其任何可能的配对点绘制一条边。

见：[http ://en.wikipedia.org/wiki/Edge_cover](http://en.wikipedia.org/wiki/Edge_cover)

# jquery - jquery inArray 总是返回 false，从 jquery.get() 创建的数组

> ID：12200558
> 
> 赞同：0
> 
> 时间：2012-08-30T15:38:01.620
> 
> 标签：jquery, arrays, image, get

我正在获取 div 内的所有图像。

```
var favImages = $('#divPlacesILove img').get(); 
```

我正在检查 tagImage 元素是否在数组内部。

这总是返回-1，而不应该返回。

```
alert($.inArray($(tagImage).attr('src'), favImages)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:40:26.250

```
$('#divPlacesILove img').get() 
```

这将返回一个 DOM 元素数组。

```
$.inArray($(tagImage).attr('src'), favImages)) 
```

您正在寻找 DOM 元素数组中的字符串，所以它什么也找不到。

你为什么在这里使用`inArray`？如果您想查看 jQuery 对象是否包含元素，请使用`.is`：

```
$('#divPlacesILove img').is(tagImage); // true 
```

或者`.filter`：

```
$('#divPlacesILove img').filter(function(){
    return this === tagImage; // or $(this).prop('src') === $(tagImage).prop('src')
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:44:42.993

您可能正在寻找`.map()`：

```
var favImages = $('#divPlacesILove img').map(function() {
    return this.src;
}).get(); 
```

现在`favImages`将是一个`src`属性数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:42:26.753

数组中的内容是 DOM 元素，您正在与 href 进行比较！

你可以试试这个，如果你坚持使用相同的功能集..

```
var favImages = $('#divPlacesILove img').get();
alert($.inArray($(tagImage)[0], favImages)); 
```

现在`favImages`是图像数组，并且`$(tagImage)[0]`是您的标记图像..

# opencv - cv::Orb 中的错误？

> ID：12200560
> 
> 赞同：1
> 
> 时间：2012-08-30T15:38:03.700
> 
> 标签：opencv

我最近在 opencv 的[ORB](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html)描述符中发现了一些非常奇怪的行为。

```
cv::Mat grey; //greyscale image
std::vector<cv::KeyPoint> keypoints;
cv::Mat descriptors;
cv::ORB detector;
detector(grey,cv::Mat(),keypoints,descriptors); 
```

如果给定的图像不包含潜在的关键点（例如黑色图像）并出现错误，则上述代码始终崩溃

```
OpenCV Error: Assertion failed (m.dims >= 2) in Mat, file /Users/user/slave/ios_framework/src/opencv/modules/core/src/matrix.cpp, line 268 
```

我发现要解决问题，我可以执行以下操作

```
cv::Mat grey;
std::vector<cv::KeyPoint> keypoints;
cv::Mat descriptors;
cv::ORB detector;
detector(grey,cv::Mat(),keypoints);
if(keypoints.size() > 0)
{
    detector(grey,cv::Mat(),keypoints,descriptors,true);
} 
```

它首先检测关键点，然后在检测到任何关键点时生成它们的描述符。我在 iOS 上使用 opencv2 作为 .framework。

这是 OpenCV 中的错误吗？如果没有，我做错了什么？如果是这样，是否有修复它的任何版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:19:19.070

我刚刚运行了这段代码

```
cv::Mat grey = cv::Mat::zeros(100, 100, CV_8UC1);
std::vector<cv::KeyPoint> keypoints;
cv::Mat descriptors;
cv::ORB detector;
detector(grey,cv::Mat(),keypoints,descriptors); 
```

使用 OpenCV 2.4.1 没有问题。

您是否调试了代码以查看断言失败的确切位置？

# ruby-on-rails-3 - 更改设计闪存键

> ID：12200564
> 
> 赞同：1
> 
> 时间：2012-08-30T15:38:11.653
> 
> 标签：ruby-on-rails-3, devise

`[:notice]`我正在使用设计 gem，并希望将闪存键从自定义更改为`[:alert]`自定义。我的应用程序的其余部分正在使用 和 之类的`[:success]`键`[:warning]`。

有什么办法可以把钥匙换成`notice`别的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:58:54.240

从那些管理设计的人那里听说这不是一个选择。答案是使用适当的闪光键。

# javascript - 编辑后无法用 Javascript 填充文本框

> ID：12200565
> 
> 赞同：0
> 
> 时间：2012-08-30T15:38:16.767
> 
> 标签：javascript, drop-down-menu, textbox

我有一个简单的下拉框，我成功地使用 Javascript 在选择下拉项时自动填充文本框。

一旦我编辑任何文本框的自动填充文本，或使用“清除”按钮擦除文本框，下拉列表不再替换填充文本框。

用户更改文本框后，如何继续使用下拉框？

[JSFiddle 版本](http://jsfiddle.net/dmccall/kchRh/400/)

**HTML 代码：**

```
<select id="dropdown" onchange="preset();">
    <option value="">Select a person:</option>
    <option value="Abe" >Abe</option>
    <option value="Bob" >Bob</option>
    <option value="Cal" >Cal</option>
    <option value="Dan" >Dan</option>
</select>

<input type=Submit value="Clear" onclick="document.getElementById('mytext').value='';">

<textarea id="mytext"></textarea> 
```

**Javascript代码：**

```
function preset() {
    document.getElementById("mytext").innerHTML=document.getElementById("dropdown").value
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:40:11.450

你`innerHTML`在一个地方使用，`value`在另一个地方使用。在两者中使用`value`都可以修复它。

[演示](http://jsfiddle.net/amaan/kchRh/402/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:41:34.157

将提交按钮更新为：

```
<input type=Submit value="Clear" onclick="document.getElementById('mytext').innerHTML='';"> 
```

# ipython - 可以在 ipython 笔记本中使用 vpython 吗？

> ID：12200567
> 
> 赞同：3
> 
> 时间：2012-08-30T15:38:21.400
> 
> 标签：ipython, vpython

每当我在 ipython 中使用 vpython 时，内核都会死掉。有什么解决办法吗？我不知道该怎么办。（我的操作系统是ubuntu 12.04 64位，浏览器是firefox。）

# ios - 应用商店部署后的错误，无法在 Ad Hoc 部署中重现

> ID：12200568
> 
> 赞同：1
> 
> 时间：2012-08-30T15:38:23.343
> 
> 标签：ios, debugging, nskeyedarchiver, nscoding, ad-hoc-distribution

我的应用程序涉及用户保存我使用 NSCoding/NSKeyedArchiver 存储的数据。我在应用程序的第一次运行时向用户提供示例数据对象。

**预期的行为发生在常规测试期间以及通过临时部署。不幸的是，当应用程序通过应用商店下载时，会发生一个重大错误。**

可能还有哪些其他环境考虑因素，以便我可以在常规测试中重现（然后修复）该问题？

**预期行为：**

除了当前的数据对象之外，新用户还可以添加/编辑数据对象。（经典的 CRUD 场景）。

**实际行为：**

如果用户的第一个操作是*保存*一个新对象，则所有先前加载的示例对象都会消失（难以捉摸的错误）。但是，如果用户的第一个操作是*编辑*，则所有对象都按预期保留，用户可以添加其他对象而不会出现问题。

谢谢您的帮助。

**编辑**

在我最近的测试中，我将*构建配置*切换为在“运行”方案中发布。

[http://i.imgur.com/XNyV6.png](http://i.imgur.com/XNyV6.png)

*App Delegate，正确初始化应用程序*

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    
    self.dataArray = nil;
    self.dataArray = [AppDelegate getArray];
    if (self.dataArray == nil) {
        self.dataArray = [[NSMutableArray alloc] init];
    }

    //First run of the app
    if (dataArray.count == 0) {
        //Add sample data to array
        //Save array
        NSString *path = [AppDelegate getDocPath];
        [NSKeyedArchiver archiveRootObject:self.dataArray toFile:path];
    }
}

+(NSString *) getDocPath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
    NSString *documentsPath = [paths objectAtIndex:0];
    NSString *tempDocPath = [documentsPath stringByAppendingPathComponent:@"FilePath.dat"];
    return tempDocPath; 
}

+(NSMutableArray *)getArray {
    return [[NSKeyedUnarchiver unarchiveObjectWithFile:[AppDelegate getDocPath]] mutableCopy];
} 
```

*对象创建，如果尚未编辑数据，则会删除预加载的数据*

```
-(void)viewDidLoad {
    tempArray = nil;
    tempArray = [NSKeyedUnarchiver unarchiveObjectWithFile:[AppDelegate getDocPath]];
    if (tempArray == nil) {
        tempArray = [[NSMutableArray alloc] init];  
    }   
}

-(void)saveObject {
    [tempArray addObject:createdData];
    [tempArray sortUsingSelector:@selector(compare:)];
    NSString *path = [AppDelegate getDocPath];
    [NSKeyedArchiver archiveRootObject:tempArray toFile:path];
    AppDelegate *dg = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    dg.dataArray = tempArray;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:47:14.710

我不确定如何解决您当前的问题（不查看代码），但您可以在未来避免它：

确保您提交给应用商店的构建是您已进行 QA 的临时构建，但使用应用商店配置文件签名。

Two advantages: 1) You should be able to repro the same bug on the adhoc and appstore build 2) dSym for both these are the same. So, you dont have to wait to get the AppStore crash logs before you can dig in and see what's happening.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:46:54.363

我想在保存新对象时，您不会将其附加到现有数据中。您可能正在覆盖先前创建的文件。您应该访问前一个文件并将新数据附加到前一个文件中。共享代码将有助于指出您哪里出错了。

**编辑：**替换以下代码并检查它是否仍然显示相同的行为

```
-(void)viewDidLoad {
    tempArray = nil;
    tempArray = [NSKeyedUnarchiver unarchiveObjectWithFile:[AppDelegate getDocPath]mutableCopy];
    if (tempArray == nil) {
        NSLog(@"tempArray is nil"); //if tempArray doesn't get initialized by the file contents  
        tempArray = [[NSMutableArray alloc] init];

    }   
} 
```

# java - TitleAreaDilaog - 标题区域 / SWT

> ID：12200573
> 
> 赞同：0
> 
> 时间：2012-08-30T15:38:44.603
> 
> 标签：java, jface

有没有办法修改标题区域的外观。您能否在底部添加一些像水平线一样的东西，以便更好地将标题区域与对话框的其余部分分开。如果我想添加图像或放置标准以外的文本

```
public void create() {
  super.create();
  setTitle("The Base Dialog Class");
  setMessage("Hello World");
} 
```

是否有可能使标题区域看起来您喜欢而不是标准方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:53:38.320

您可以使用 更改标题区域图像，使用 更改[`setTitleAreaImage(Image image)`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/dialogs/TitleAreaDialog.html#setTitleImage%28org.eclipse.swt.graphics.Image%29)颜色[`setTitleAreaColor(RGB color)`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/dialogs/TitleAreaDialog.html#setTitleAreaColor%28org.eclipse.swt.graphics.RGB%29)。

此外，您可以通过 向用户提供反馈[`setErrorMessage(String message)`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/dialogs/TitleAreaDialog.html#setErrorMessage%28java.lang.String%29)。

AFAIK，您无能为力...

# asp.net-mvc - 不显眼的 Javascript - 和 Ajax 请求

> ID：12200574
> 
> 赞同：0
> 
> 时间：2012-08-30T15:38:44.580
> 
> 标签：asp.net-mvc, validation, razor, unobtrusive-javascript

我这里有一个简单的例子。基本上是一个表单，提交时将通过 ajax 请求重新加载自己。问题是当这种情况发生时，不显眼的 javascript 不再起作用。我假设我可以在我从 ajax 调用返回的 html 中添加验证和不显眼的文件，但是必须有一种更简单的方法来重新连接验证器，不是吗？

请注意，我正在劫持我的提交按钮，以便执行 AJAX 请求，该请求将替换 dom 中的表单，来自 ajax 请求返回的 html。

**模型：**

```
 public class Foo
    {
        public int Bar { get; set; }
    } 
```

**控制器：**

```
public class FooController : Controller
{

    public ActionResult Index()
    {
        return View(new Foo{});
    }

    [HttpPost]
    public ActionResult Form(Foo model)
    {
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(Foo model)
    {
        return View();
    }

} 
```

**索引.cshtml**

```
@model PartialPostBackValidation.Models.Foo

@{
    ViewBag.Title = "Index";
}

<h2>@Html.ActionLink("Index", "Index")</h2>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<script>
    $(function () {
        $("body").on("click", ".ajax-submit", function () {
            var form = $(this).parents("form");
            $.post(
                form.attr("action"),
                form.serialize(),
                function (html) {
                    form.replaceWith(html);
                }
            );
            return false;
        });
    });
</script>

@{Html.RenderPartial("Form");} 
```

**表单.cshtml**

```
@model PartialPostBackValidation.Models.Foo

@{
    ViewBag.Title = "Index";
    Layout = null;
}

@using (Html.BeginForm("Form", "Foo")) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Foo</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Bar)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.Bar)
            @Html.ValidationMessageFor(model => model.Bar)
        </div>
        <p>
            <input type="submit" value="Create" class="ajax-submit" />
        </p>
    </fieldset>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:56:37.790

要使验证正常工作，您只需在动态加载内容后在表单上重新启用它：

```
$('#form-id').removeData('validator');
$('#form-id').removeData('unobtrusiveValidation');
$.validator.unobtrusive.parse('#form-id');   <<<<<< Just having this could be enough but some people complain that without removingData first it doesn’t always work. 
```

ps 当然你需要在你的`@using (Html.BeginForm("Form", "Foo"))`

# c - 为什么使用 qsort 函数的这段代码在 C 中不起作用？

> ID：12200576
> 
> 赞同：1
> 
> 时间：2012-08-30T15:38:54.597
> 
> 标签：c, pointers, struct, qsort

排序部分：

```
 order = (struct order_s **) calloc(pm->len - q, sizeof(struct order_s*));

      for (i = 0; i < window_pos; ++i) {
              order[i] = (struct order_s *) malloc(sizeof(struct order_s));
              order[i]->pos = i;
              order[i]->good = good[i];
      }
      for (i = window_pos + q; i < pm->len; ++i)
      {
              order[i-q] = (struct order_s *) malloc(sizeof(struct order_s));
              order[i-q]->pos = i;
              order[i-q]->good = good[i];
      }
     qsort(order, pm->len - q, sizeof(struct order_s *), compare); 
```

比较功能：

```
int compare (const void * a, const void * b)
{
        if ((((const struct order_s *)a)->good - ((const struct order_s *)b)->good) > 0)
                return 1;
        else
                return -1;
} 
```

结构：

```
struct order_s {
  int pos;
  double good;
}; 
```

价值：

```
(gdb) p pm->len
$35 = 20
(gdb) p window_pos 
$36 = 1
(gdb) p q
$37 = 5 
```

在 qsort() 之前：

```
(gdb) p *order[0]
$2 = {pos = 0, good = 1.3238653863672125}
(gdb) p *order[1]
$3 = {pos = 6, good = 0.96180564211148134}
(gdb) p *order[2]
$4 = {pos = 7, good = 1.0684181637005736}
(gdb) p *order[3]
$5 = {pos = 8, good = 0.92113662370476379} 
```

在 qsort() 之后：

```
(gdb) n
(gdb) p *order[0]
$6 = {pos = 0, good = 1.3238653863672125}
(gdb) p *order[1]
$7 = {pos = 6, good = 0.96180564211148134}
(gdb) p *order[2]
$8 = {pos = 7, good = 1.0684181637005736}
(gdb) p *order[3]
$9 = {pos = 8, good = 0.92113662370476379} 
```

在`qsort`函数之后，结构数组没有正确排序，稍后会引发段错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:45:24.663

`compare()`函数参数是*指向*数组元素的指针。在这种情况下，数组的元素是`struct order*`，这意味着参数`compare()`是`struct order**`，而不是`struct order*`。

改成：

```
int compare (const void * a, const void * b)
{
    const struct order_s** aa = a;
    const struct order_s** bb = b;

    /* Can two 'order_s' instances never be equal ? */
    if ( (*aa)->good - (*bb)->good) > 0) return 1;
    else  return -1;
} 
```

来自 C99 标准第*7.20.5.2 节的 qsort 函数*：

> 数组的内容根据 compar 指向的比较函数按升序排序，该函数**使用两个指向被比较对象的参数调用。**如果认为第一个参数分别小于、等于或大于第二个参数，则该函数应返回一个小于、等于或大于零的整数。

# android - 文字转语音管理器不起作用

> ID：12200577
> 
> 赞同：0
> 
> 时间：2012-08-30T15:39:04.690
> 
> 标签：android, voice, speech, text-to-speech

我创建了一些 TTS 管理器，因为我想`someTTsObject.speak("some string")`在其他类中使用。这是我的经理类：

```
public class TtsManager
{
private TextToSpeech myTTS;
private Context context;

public TtsManager(Context baseContext)
{
    this.context = baseContext;
    initOrInstallTts();
}

public void initOrInstallTts()
{
    myTTS = new TextToSpeech(context, new OnInitListener() 
    {               
        public void onInit(int status) 
        {
            if (status == TextToSpeech.SUCCESS)
            {
                myTTS.setLanguage(Locale.US);
            }
            else
                installTts();
        }
    });
}

private void installTts()
{
    Intent installIntent = new Intent();
    installIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    installIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
    context.startActivity(installIntent);
}

public void speak(String text)
{       
        myTTS.speak(text, TextToSpeech.QUEUE_FLUSH, null);
}

} 
```

这是我的主要课程，我想在其中使用它：

```
public class main extends Activity {
TtsManager tts;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tts = new TtsManager(this);
        tts.speak("Welcome in my app");

    }
} 
```

当我运行编译时，我在 LogCat 上看到：

```
08-30 17:25:52.531: I/TTS received:(2782): Welcome in my app 
```

但我没有听到任何文字。我在虚拟机和手机上测试过。

为什么这不起作用？干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:48:47.700

好的，问题是您没有等到系统的回调告诉您 TTS 已初始化。在使用 SUCCESS 值调用 onInit 之前，您不能调用 speak。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T03:08:22.810

问题是你在没有初始化 tts 引擎的情况下调用了 speak 函数......添加 **tts.initOrInstallTts();** 在 **tts = new TtsManager(this);**

喜欢：

```
public class main extends Activity {
    TtsManager tts;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    tts = new TtsManager(this);
    tts.initOrInstallTts();
    tts.speak("Welcome in my app");

    }
} 
```

# python - NumPy：同时 max() 和 min() 的函数

> ID：12200580
> 
> 赞同：143
> 
> 时间：2012-08-30T15:39:23.090
> 
> 标签：python, numpy

[numpy.amax()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.amax.html#numpy.amax)将在数组中找到最大值，并且[numpy.amin()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.amin.html)对最小值执行相同的操作。如果我想同时找到最大值和最小值，我必须调用这两个函数，这需要两次传递（非常大的）数组，这似乎很慢。

numpy API 中是否有一个函数可以仅通过一次数据即可找到最大值和最小值？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2015-04-03T17:15:03.353

> numpy API 中是否有一个函数可以仅通过一次数据即可找到最大值和最小值？

没有。在撰写本文时，还没有这样的功能。（是的，如果有*这样*的函数，它的性能将*明显*优于在大数组上调用`numpy.amin()`和连续。）`numpy.amax()`

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-08-30T15:44:12.120

~~我不认为两次传递数组是一个问题。~~ 考虑以下伪代码：

```
minval = array[0]
maxval = array[0]
for i in array:
    if i < minval:
       minval = i
    if i > maxval:
       maxval = i 
```

虽然这里只有 1 个循环，但仍有 2 个检查。（而不是有 2 个循环，每个循环 1 个检查）。实际上，您唯一节省的就是 1 个循环的开销。如果数组真的像你说的那样大，那么与实际循环的工作负载相比，这个开销很小。（请注意，这都是在 C 中实现的，因此循环或多或少是免费的）。

* * *

**编辑**对你们中的 4 位投了赞成票并对我有信心的人感到抱歉。你绝对可以优化它。

这是一些 fortran 代码，可以通过以下方式编译成 python 模块`f2py`（也许`Cython`大师可以过来并将其与优化的 C 版本进行比较......）：

```
subroutine minmax1(a,n,amin,amax)
  implicit none
  !f2py intent(hidden) :: n
  !f2py intent(out) :: amin,amax
  !f2py intent(in) :: a
  integer n
  real a(n),amin,amax
  integer i

  amin = a(1)
  amax = a(1)
  do i=2, n
     if(a(i) > amax)then
        amax = a(i)
     elseif(a(i) < amin) then
        amin = a(i)
     endif
  enddo
end subroutine minmax1

subroutine minmax2(a,n,amin,amax)
  implicit none
  !f2py intent(hidden) :: n
  !f2py intent(out) :: amin,amax
  !f2py intent(in) :: a
  integer n
  real a(n),amin,amax
  amin = minval(a)
  amax = maxval(a)
end subroutine minmax2 
```

通过以下方式编译它：

```
f2py -m untitled -c fortran_code.f90 
```

现在我们可以测试它了：

```
import timeit

size = 100000
repeat = 10000

print timeit.timeit(
    'np.min(a); np.max(a)',
    setup='import numpy as np; a = np.arange(%d, dtype=np.float32)' % size,
    number=repeat), " # numpy min/max"

print timeit.timeit(
    'untitled.minmax1(a)',
    setup='import numpy as np; import untitled; a = np.arange(%d, dtype=np.float32)' % size,
    number=repeat), '# minmax1'

print timeit.timeit(
    'untitled.minmax2(a)',
    setup='import numpy as np; import untitled; a = np.arange(%d, dtype=np.float32)' % size,
    number=repeat), '# minmax2' 
```

结果对我来说有点惊人：

```
8.61869883537 # numpy min/max
1.60417699814 # minmax1
2.30169081688 # minmax2 
```

我不得不说，我并不完全理解它。比较只是`np.min`与`minmax1`并且`minmax2`仍然是一场失败的战斗，所以这不仅仅是一个记忆问题......

*注释*- 将大小增加 1 倍，将`10**a`重复次数减少 1 倍`10**a`（保持问题大小不变）确实会改变性能，但并不是以一种看似一致的方式，这表明内存性能和函数调用开销之间存在一些相互作用Python。即使`min`在 fortran 中比较一个简单的实现，也能比 numpy 高出大约 2 倍……

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2015-11-25T14:30:55.330

您可以使用[Numba](http://numba.pydata.org/)，这是一个使用 LLVM 的 NumPy 感知动态 Python 编译器。结果实现非常简单明了：

```
import numpy
import numba

@numba.jit
def minmax(x):
    maximum = x[0]
    minimum = x[0]
    for i in x[1:]:
        if i > maximum:
            maximum = i
        elif i < minimum:
            minimum = i
    return (minimum, maximum)

numpy.random.seed(1)
x = numpy.random.rand(1000000)
print(minmax(x) == (x.min(), x.max())) 
```

它也应该比 Numpy 的`min() & max()`实现更快。所有这些都无需编写一行 C/Fortran 代码。

做你自己的性能测试，因为它总是依赖于你的架构、你的数据、你的包版本......

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2012-08-30T15:45:27.897

如果对您有用的话，有一个用于查找 (max-min) 的函数，称为[numpy.ptp ：](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ptp.html)

```
>>> import numpy
>>> x = numpy.array([1,2,3,4,5,6])
>>> x.ptp()
5 
```

但我认为没有办法通过一次遍历找到最小值和最大值。

**编辑：** [ptp 只是在后台调用 min 和 max](https://github.com/numpy/numpy/blob/cf9f1907b99d06291ab16ad4d2105a871f56f7d9/numpy/ma/core.py#L5515-L5546)

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2020-01-03T23:28:43.540

考虑到以下方法，只是为了获得一些关于人们可以预期的数字的想法：

```
import numpy as np

def extrema_np(arr):
    return np.max(arr), np.min(arr) 
```

```
import numba as nb

@nb.jit(nopython=True)
def extrema_loop_nb(arr):
    n = arr.size
    max_val = min_val = arr[0]
    for i in range(1, n):
        item = arr[i]
        if item > max_val:
            max_val = item
        elif item < min_val:
            min_val = item
    return max_val, min_val 
```

```
import numba as nb

@nb.jit(nopython=True)
def extrema_while_nb(arr):
    n = arr.size
    odd = n % 2
    if not odd:
        n -= 1
    max_val = min_val = arr[0]
    i = 1
    while i < n:
        x = arr[i]
        y = arr[i + 1]
        if x > y:
            x, y = y, x
        min_val = min(x, min_val)
        max_val = max(y, max_val)
        i += 2
    if not odd:
        x = arr[n]
        min_val = min(x, min_val)
        max_val = max(x, max_val)
    return max_val, min_val 
```

```
%%cython -c-O3 -c-march=native -a
#cython: language_level=3, boundscheck=False, wraparound=False, initializedcheck=False, cdivision=True, infer_types=True

import numpy as np

cdef void _extrema_loop_cy(
        long[:] arr,
        size_t n,
        long[:] result):
    cdef size_t i
    cdef long item, max_val, min_val
    max_val = arr[0]
    min_val = arr[0]
    for i in range(1, n):
        item = arr[i]
        if item > max_val:
            max_val = item
        elif item < min_val:
            min_val = item
    result[0] = max_val
    result[1] = min_val

def extrema_loop_cy(arr):
    result = np.zeros(2, dtype=arr.dtype)
    _extrema_loop_cy(arr, arr.size, result)
    return result[0], result[1] 
```

```
%%cython -c-O3 -c-march=native -a
#cython: language_level=3, boundscheck=False, wraparound=False, initializedcheck=False, cdivision=True, infer_types=True

import numpy as np

cdef void _extrema_while_cy(
        long[:] arr,
        size_t n,
        long[:] result):
    cdef size_t i, odd
    cdef long x, y, max_val, min_val
    max_val = arr[0]
    min_val = arr[0]
    odd = n % 2
    if not odd:
        n -= 1
    max_val = min_val = arr[0]
    i = 1
    while i < n:
        x = arr[i]
        y = arr[i + 1]
        if x > y:
            x, y = y, x
        min_val = min(x, min_val)
        max_val = max(y, max_val)
        i += 2
    if not odd:
        x = arr[n]
        min_val = min(x, min_val)
        max_val = max(x, max_val)
    result[0] = max_val
    result[1] = min_val

def extrema_while_cy(arr):
    result = np.zeros(2, dtype=arr.dtype)
    _extrema_while_cy(arr, arr.size, result)
    return result[0], result[1] 
```

（这些方法与[此处](https://stackoverflow.com/a/33919126/5218354)`extrema_loop_*()`提出的方法相似，而方法基于[此处](https://stackoverflow.com/a/41733144/5218354)的代码）`extrema_while_*()`

以下时间安排：

[![BM](../Images/f9dcf80807954b049ef9542af288d5fa.png)](https://i.stack.imgur.com/3rWX5.png)

表示`extrema_while_*()`最快的，`extrema_while_nb()`最快的。在任何情况下，`extrema_loop_nb()`and`extrema_loop_cy()`解决方案也确实优于 NumPy-only 方法（单独使用`np.max()`和`np.min()`）。

最后，请注意，这些都不像`np.min()`/那样灵活`np.max()`（在 n-dim 支持、`axis`参数等方面）。

[（此处](https://colab.research.google.com/drive/1OH_G2hmSgS_NAMMwCafVSi9y1mIMoxd-)提供完整代码）

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2017-01-19T03:20:54.673

通常，您可以通过一次处理两个元素并仅将较小的元素与临时最小值进行比较，将较大的元素与临时最大值进行比较，从而减少 minmax 算法的比较量。与幼稚的方法相比，平均而言，只需要 3/4 的比较。

这可以用 c 或 fortran（或任何其他低级语言）实现，并且在性能方面几乎是无与伦比的。我正在使用[numba](/questions/tagged/numba "显示标记为“numba”的问题")来说明原理并获得一个非常快速、独立于 dtype 的实现：

```
import numba as nb
import numpy as np

@nb.njit
def minmax(array):
    # Ravel the array and return early if it's empty
    array = array.ravel()
    length = array.size
    if not length:
        return

    # We want to process two elements at once so we need
    # an even sized array, but we preprocess the first and
    # start with the second element, so we want it "odd"
    odd = length % 2
    if not odd:
        length -= 1

    # Initialize min and max with the first item
    minimum = maximum = array[0]

    i = 1
    while i < length:
        # Get the next two items and swap them if necessary
        x = array[i]
        y = array[i+1]
        if x > y:
            x, y = y, x
        # Compare the min with the smaller one and the max
        # with the bigger one
        minimum = min(x, minimum)
        maximum = max(y, maximum)
        i += 2

    # If we had an even sized array we need to compare the
    # one remaining item too.
    if not odd:
        x = array[length]
        minimum = min(x, minimum)
        maximum = max(x, maximum)

    return minimum, maximum 
```

它肯定比[Peque](https://stackoverflow.com/a/33919126/5393381)提出的幼稚方法更快：

```
arr = np.random.random(3000000)
assert minmax(arr) == minmax_peque(arr)  # warmup and making sure they are identical 
%timeit minmax(arr)            # 100 loops, best of 3: 2.1 ms per loop
%timeit minmax_peque(arr)      # 100 loops, best of 3: 2.75 ms per loop 
```

正如预期的那样，新的 minmax 实现只需要天真的实现所用时间的大约 3/4 ( `2.1 / 2.75 = 0.7636363636363637`)

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2018-06-15T13:18:37.837

没有人提到[numpy.percentile](https://docs.scipy.org/doc/numpy/reference/generated/numpy.percentile.html)，所以我想我会的。如果您要求`[0, 100]`百分位数，它将为您提供一个包含两个元素的数组，即最小值（第 0 个百分位）和最大值（第 100 个百分位）。

但是，它不能满足 OP 的目的：它并不分别比 min 和 max 快。这可能是由于一些允许非极端百分位数的机器（一个更难的问题，*应该*需要更长的时间）。

```
In [1]: import numpy

In [2]: a = numpy.random.normal(0, 1, 1000000)

In [3]: %%timeit
   ...: lo, hi = numpy.amin(a), numpy.amax(a)
   ...: 
100 loops, best of 3: 4.08 ms per loop

In [4]: %%timeit
   ...: lo, hi = numpy.percentile(a, [0, 100])
   ...: 
100 loops, best of 3: 17.2 ms per loop

In [5]: numpy.__version__
Out[5]: '1.14.4' 
```

Numpy 的未来版本可能会在特殊情况下跳过正常的百分位数计算（如果仅`[0, 100]`需要）。在不向接口添加任何内容的情况下，有一种方法可以在一次调用中向 Numpy 询问最小值和最大值（与接受的答案中所说的相反），但是库的标准实现并没有利用这种情况来实现它值得。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2013-11-13T13:19:20.077

这是一个旧线程，但无论如何，如果有人再次看到这个......

同时查找最小值和最大值时，可以减少比较次数。如果您正在比较的是浮点数（我猜是这样），这可能会为您节省一些时间，尽管不是计算复杂性。

而不是（Python代码）：

```
_max = ar[0]
_min=  ar[0]
for ii in xrange(len(ar)):
    if _max > ar[ii]: _max = ar[ii]
    if _min < ar[ii]: _min = ar[ii] 
```

您可以先比较数组中的两个相邻值，然后仅将较小的值与当前最小值进行比较，将较大的值与当前最大值进行比较：

```
## for an even-sized array
_max = ar[0]
_min = ar[0]
for ii in xrange(0, len(ar), 2)):  ## iterate over every other value in the array
    f1 = ar[ii]
    f2 = ar[ii+1]
    if (f1 < f2):
        if f1 < _min: _min = f1
        if f2 > _max: _max = f2
    else:
        if f2 < _min: _min = f2
        if f1 > _max: _max = f1 
```

这里的代码是用 Python 编写的，显然为了提高速度，您可以使用 C 或 Fortran 或 Cython，但这样每次迭代进行 3 次比较，使用 len(ar)/2 次迭代，给出 3/2 * len(ar) 比较。与此相反，以“显而易见的方式”进行比较，每次迭代进行两次比较，导致 2*len(ar) 比较。为您节省 25% 的比较时间。

也许有一天有人会发现这很有用。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-06-03T17:35:06.480

乍一看，*似乎*可以解决问题：[`numpy.histogram`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.histogram.html#numpy.histogram)

 *```
count, (amin, amax) = numpy.histogram(a, bins=1) 
```

...但是如果您查看该函数的[源代码](https://github.com/numpy/numpy/blob/v1.8.1/numpy/lib/function_base.py#L175)`a.min()`，它只是独立调用，`a.max()`因此无法避免此问题中解决的性能问题。:-(

同样，[`scipy.ndimage.measurements.extrema`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.measurements.extrema.html#scipy.ndimage.measurements.extrema)看起来是一种可能性，但它也只是简单地调用`a.min()`和`a.max()`独立。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-09-21T19:43:36.020

无论如何，这对我来说是值得的，所以我会在这里为可能感兴趣的人提出最困难和最不优雅的解决方案。我的解决方案是在 C++ 中实现一个多线程的 min-max in one pass 算法，并使用它来创建一个 Python 扩展模块。这项工作需要一些开销来学习如何使用 Python 和 NumPy C/C++ API，在这里我将展示代码并为希望走这条路的人提供一些小的解释和参考。

# 多线程最小值/最大值

这里没有什么太有趣的了。数组被分成大小的块`length / workers`。为 a 中的每个块计算 min/max `future`，然后扫描全局 min/max。

```
 // mt_np.cc
    //
    // multi-threaded min/max algorithm

    #include <algorithm>
    #include <future>
    #include <vector>

    namespace mt_np {

    /*
     * Get {min,max} in interval [begin,end)
     */
    template <typename T> std::pair<T, T> min_max(T *begin, T *end) {
      T min{*begin};
      T max{*begin};
      while (++begin < end) {
        if (*begin < min) {
          min = *begin;
          continue;
        } else if (*begin > max) {
          max = *begin;
        }
      }
      return {min, max};
    }

    /*
     * get {min,max} in interval [begin,end) using #workers for concurrency
     */
    template <typename T>
    std::pair<T, T> min_max_mt(T *begin, T *end, int workers) {
      const long int chunk_size = std::max((end - begin) / workers, 1l);
      std::vector<std::future<std::pair<T, T>>> min_maxes;
      // fire up the workers
      while (begin < end) {
        T *next = std::min(end, begin + chunk_size);
        min_maxes.push_back(std::async(min_max<T>, begin, next));
        begin = next;
      }
      // retrieve the results
      auto min_max_it = min_maxes.begin();
      auto v{min_max_it->get()};
      T min{v.first};
      T max{v.second};
      while (++min_max_it != min_maxes.end()) {
        v = min_max_it->get();
        min = std::min(min, v.first);
        max = std::max(max, v.second);
      }
      return {min, max};
    }
    }; // namespace mt_np 
```

# Python 扩展模块

这就是事情开始变得丑陋的地方......在Python中使用C++代码的一种方法是实现一个扩展模块。该模块可以使用`distutils.core`标准模块构建和安装。Python 文档中涵盖了这方面的完整描述：[https](https://docs.python.org/3/extending/extending.html) ://docs.python.org/3/extending/extending.html 。 **注意：**当然还有其他方法可以获得类似的结果，引用[https://docs.python.org/3/extending/index.html#extending-index](https://docs.python.org/3/extending/index.html#extending-index)：

> 本指南仅涵盖作为此版本 CPython 的一部分提供的用于创建扩展的基本工具。Cython、cffi、SWIG 和 Numba 等第三方工具提供了更简单和更复杂的方法来为 Python 创建 C 和 C++ 扩展。

从本质上讲，这条路线可能更具学术性而非实用性。话虽如此，我接下来要做的是，非常接近教程，创建一个模块文件。这本质上是 distutils 知道如何处理您的代码并从中创建 Python 模块的样板。*在做任何这些之前，创建一个 Python虚拟环境*可能是明智的，这样您就不会污染您的系统包（请参阅[https://docs.python.org/3/library/venv.html#module-venv](https://docs.python.org/3/library/venv.html#module-venv)）。

这是模块文件：

```
// mt_np_forpy.cc
//
// C++ module implementation for multi-threaded min/max for np

#define NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION

#include <python3.6/numpy/arrayobject.h>

#include "mt_np.h"

#include <cstdint>
#include <iostream>

using namespace std;

/*
 * check:
 *  shape
 *  stride
 *  data_type
 *  byteorder
 *  alignment
 */
static bool check_array(PyArrayObject *arr) {
  if (PyArray_NDIM(arr) != 1) {
    PyErr_SetString(PyExc_RuntimeError, "Wrong shape, require (1,n)");
    return false;
  }
  if (PyArray_STRIDES(arr)[0] != 8) {
    PyErr_SetString(PyExc_RuntimeError, "Expected stride of 8");
    return false;
  }
  PyArray_Descr *descr = PyArray_DESCR(arr);
  if (descr->type != NPY_LONGLTR && descr->type != NPY_DOUBLELTR) {
    PyErr_SetString(PyExc_RuntimeError, "Wrong type, require l or d");
    return false;
  }
  if (descr->byteorder != '=') {
    PyErr_SetString(PyExc_RuntimeError, "Expected native byteorder");
    return false;
  }
  if (descr->alignment != 8) {
    cerr << "alignment: " << descr->alignment << endl;
    PyErr_SetString(PyExc_RuntimeError, "Require proper alignement");
    return false;
  }
  return true;
}

template <typename T>
static PyObject *mt_np_minmax_dispatch(PyArrayObject *arr) {
  npy_intp size = PyArray_SHAPE(arr)[0];
  T *begin = (T *)PyArray_DATA(arr);
  auto minmax =
      mt_np::min_max_mt(begin, begin + size, thread::hardware_concurrency());
  return Py_BuildValue("(L,L)", minmax.first, minmax.second);
}

static PyObject *mt_np_minmax(PyObject *self, PyObject *args) {
  PyArrayObject *arr;
  if (!PyArg_ParseTuple(args, "O", &arr))
    return NULL;
  if (!check_array(arr))
    return NULL;
  switch (PyArray_DESCR(arr)->type) {
  case NPY_LONGLTR: {
    return mt_np_minmax_dispatch<int64_t>(arr);
  } break;
  case NPY_DOUBLELTR: {
    return mt_np_minmax_dispatch<double>(arr);
  } break;
  default: {
    PyErr_SetString(PyExc_RuntimeError, "Unknown error");
    return NULL;
  }
  }
}

static PyObject *get_concurrency(PyObject *self, PyObject *args) {
  return Py_BuildValue("I", thread::hardware_concurrency());
}

static PyMethodDef mt_np_Methods[] = {
    {"mt_np_minmax", mt_np_minmax, METH_VARARGS, "multi-threaded np min/max"},
    {"get_concurrency", get_concurrency, METH_VARARGS,
     "retrieve thread::hardware_concurrency()"},
    {NULL, NULL, 0, NULL} /* sentinel */
};

static struct PyModuleDef mt_np_module = {PyModuleDef_HEAD_INIT, "mt_np", NULL,
                                          -1, mt_np_Methods};

PyMODINIT_FUNC PyInit_mt_np() { return PyModule_Create(&mt_np_module); } 
```

在此文件中，大量使用了 Python 和 NumPy API，有关更多信息，请参阅：[https](https://docs.python.org/3/c-api/arg.html#c.PyArg_ParseTuple) : //docs.python.org/3/c-api/arg.html#c.PyArg_ParseTuple 和 NumPy ：[https](https://docs.scipy.org/doc/numpy/reference/c-api.array.html) ://docs.scipy.org/doc/numpy/reference/c-api.array.html 。

# 安装模块

接下来要做的是利用 distutils 安装模块。这需要一个安装文件：

```
# setup.py

from distutils.core import setup,Extension

module = Extension('mt_np', sources = ['mt_np_module.cc'])

setup (name = 'mt_np', 
       version = '1.0', 
       description = 'multi-threaded min/max for np arrays',
       ext_modules = [module]) 
```

要最终安装模块，`python3 setup.py install`请从您的虚拟环境中执行。

# 测试模块

最后，我们可以测试一下 C++ 实现是否真的优于 NumPy 的幼稚使用。为此，这是一个简单的测试脚本：

```
# timing.py
# compare numpy min/max vs multi-threaded min/max

import numpy as np
import mt_np
import timeit

def normal_min_max(X):
  return (np.min(X),np.max(X))

print(mt_np.get_concurrency())

for ssize in np.logspace(3,8,6):
  size = int(ssize)
  print('********************')
  print('sample size:', size)
  print('********************')
  samples = np.random.normal(0,50,(2,size))
  for sample in samples:
    print('np:', timeit.timeit('normal_min_max(sample)',
                 globals=globals(),number=10))
    print('mt:', timeit.timeit('mt_np.mt_np_minmax(sample)',
                 globals=globals(),number=10)) 
```

以下是我做这一切的结果：

```
8  
********************  
sample size: 1000  
********************  
np: 0.00012079699808964506  
mt: 0.002468645994667895  
np: 0.00011947099847020581  
mt: 0.0020772050047526136  
********************  
sample size: 10000  
********************  
np: 0.00024697799381101504  
mt: 0.002037393998762127  
np: 0.0002713389985729009  
mt: 0.0020942929986631498  
********************  
sample size: 100000  
********************  
np: 0.0007130410012905486  
mt: 0.0019842900001094677  
np: 0.0007540129954577424  
mt: 0.0029724110063398257  
********************  
sample size: 1000000  
********************  
np: 0.0094779249993735  
mt: 0.007134920000680722  
np: 0.009129883001151029  
mt: 0.012836456997320056  
********************  
sample size: 10000000  
********************  
np: 0.09471094200125663  
mt: 0.0453535050037317  
np: 0.09436299200024223  
mt: 0.04188535599678289  
********************  
sample size: 100000000  
********************  
np: 0.9537652180006262  
mt: 0.3957935369980987  
np: 0.9624398809974082  
mt: 0.4019058070043684 
```

这些远没有线程中的结果显示的那么令人鼓舞，结果表明速度提高了大约 3.5 倍，并且没有包含多线程。我取得的结果在某种程度上是合理的，我预计线程的开销将占主导地位，直到数组变得非常大，此时性能提升将开始接近`std::thread::hardware_concurrency`x 增加。

# 结论

对某些 NumPy 代码的应用程序特定优化肯定有空间，特别是在多线程方面。我不清楚这是否值得努力，但它确实似乎是一个很好的练习（或其他东西）。我认为也许学习一些像 Cython 这样的“第三方工具”可能会更好地利用时间，但谁知道呢。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-08-28T12:37:34.667

受[先前答案](https://stackoverflow.com/a/33919126/632242)的启发，我编写了 numba 实现，从二维数组返回轴 = 0 的 minmax。它比调用 numpy min/max 快约 5 倍。也许有人会发现它很有用。

```
from numba import jit

@jit
def minmax(x):
    """Return minimum and maximum from 2D array for axis=0."""    
    m, n = len(x), len(x[0])
    mi, ma = np.empty(n), np.empty(n)
    mi[:] = ma[:] = x[0]
    for i in range(1, m):
        for j in range(n):
            if x[i, j]>ma[j]: ma[j] = x[i, j]
            elif x[i, j]<mi[j]: mi[j] = x[i, j]
    return mi, ma

x = np.random.normal(size=(256, 11))
mi, ma = minmax(x)

np.all(mi == x.min(axis=0)), np.all(ma == x.max(axis=0))
# (True, True)

%timeit x.min(axis=0), x.max(axis=0) 
# 15.9 µs ± 9.4 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
%timeit minmax(x) 
# 2.62 µs ± 31.3 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-11-26T14:11:26.893

我想出的最短方法是：

```
mn, mx = np.sort(ar)[[0, -1]] 
```

但是由于它对数组进行排序，所以它不是最有效的。

另一个简短的方法是：

```
mn, mx = np.percentile(ar, [0, 100]) 
```

这应该更有效，但是计算结果，并返回一个浮点数。*

# c++ - Windows 服务保持在启动状态

> ID：12200582
> 
> 赞同：2
> 
> 时间：2012-08-30T15:39:34.570
> 
> 标签：c++, windows, user-interface

我有一个用 CPP 编写的 Windows 服务，我手动启动它。该服务启动得很好并且工作正常。然而，我们最近在 Windows 服务 GUI 中注意到该服务显示为正在启动状态。检查事件查看器后，它清楚地显示服务已进入运行状态。

有人在这上面有金块吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:41:42.783

这个问题原来是一个下落不明的调用 SCM 来启动服务。删除该行，问题就消失了。

# ruby-on-rails-3 - Resque：异常和堆栈跟踪

> ID：12200587
> 
> 赞同：3
> 
> 时间：2012-08-30T15:39:56.763
> 
> 标签：ruby-on-rails-3, debugging, resque, jrubyonrails

我有一个 JRuby/Rails 应用程序，它包含一个用于处理 HTTP 请求的 Web 服务器、一个 MySQL 数据库和一个用于处理排队作业的 Resque 工作程序。当我处于开发模式并且 Web 应用程序中的某些内容引发异常时，我会在浏览器中获得很好的跟踪，显示引发的异常、引发异常的行、相关数据和堆栈回溯。

然而，当抛出异常的代码在 Resque 工作者中执行时，我什么也得不到，即使我知道代码抛出了异常。我可以调试的唯一方法是抛出打印语句并找出在 Resque 工作人员抛出异常并崩溃之前调用最后一个打印语句的位置。

有没有办法让 Resque 工作人员吐出异常日志并将堆栈回溯到日志文件中（在它崩溃之前），这样我就可以看到发生了什么？

编辑 - （感谢@Viren 的想法） - 我不想用开始/救援块乱扔我的应用程序代码。我将把开始/救援代码放在某个地方，以确保记录异常回溯，但我不知道把它放在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-19T10:08:24.413

您可以将 Resque 记录器设置为使用 Rails 记录器。对于完整的堆栈跟踪，您可能希望将其设置为`DEBUG`level，这会打印出大量信息。你把它放在`initializers/resque.rb`：

```
Resque.logger = Rails.logger
Resque.logger.level = Logger::DEBUG 
```

还有[resque-backtrace](https://github.com/orgsync/resque-backtrace) gem，虽然它有一个缺点，它会覆盖 Resque 中的后端，所以现在没有作业会进入错误队列。

# sql - SQL 错误 - 字段可能引用多个表

> ID：12200589
> 
> 赞同：0
> 
> 时间：2012-08-30T15:40:07.113
> 
> 标签：sql, compiler-errors, ms-access-2010

我不明白为什么我收到错误

***“指定字段 qb2.WellworkOIL 可以引用 SQL 语句中 FROM 子句中列出的多个表”***

根据下面的查询

```
SELECT 
    qb1.CompanyName, 
    qb1.AssetName, 
    qb1.Year, 
    IIf(qb1.PrimaryProductionType='Oil', 
        qb2.WellworkOIL, 
        IIF(qb1.PrimaryProductionType='Gas', 
            qb3.WellworkGAS, 
            qb4.WellworkOilGas)) AS Selected
FROM 
    (
        (
            PEBaseQueryConditions AS qb1 
            INNER JOIN PE_Field_WellworkOIL AS qb2 
            ON (qb1.Year=qb2.Year) AND (qb1.AssetName=qb2.AssetName)
        ) 
        INNER JOIN PE_Field_WellworkGAS AS qb3 
        ON (qb1.Year=qb3.Year) AND (qb1.AssetName=qb3.AssetName)
    ) 
    INNER JOIN PE_Field_WellworkOILGAS AS qb4 
    ON (qb1.Year=qb4.Year) AND (qb1.AssetName=qb4.AssetName)
GROUP BY 
    qb1.CompanyName, 
    qb1.AssetName, 
    qb1.Year, 
    qb1.PrimaryProductionType,
    qb2.WellworkOIL, 
    qb3.WellworkGAS, 
    qb4.WellworkOilGas; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:47:35.853

没有时间尝试这个（如果这不起作用，请道歉）但我之前没有见过别名语法（我认为你不需要“AS”） - 试试这个；

```
SELECT qb1.CompanyName, qb1.AssetName, qb1.Year, 
       IIf(qb1.PrimaryProductionType='Oil', qb2.WellworkOIL, 
             IIF(qb1.PrimaryProductionType='Gas', qb3.WellworkGAS, 
                           qb4.WellworkOilGas)) AS Selected

FROM PEBaseQueryConditions qb1 
INNER JOIN PE_Field_WellworkOIL qb2 ON (qb1.Year=qb2.Year AND qb1.AssetName=qb2.AssetName)
INNER JOIN PE_Field_WellworkGAS qb3 ON (qb1.Year=qb3.Year AND qb1.AssetName=qb3.AssetName) 
INNER JOIN PE_Field_WellworkOILGAS qb4 ON (qb1.Year=qb4.Year AND qb1.AssetName=qb4.AssetName) 
```

此外，根据 Jon Woo 的建议，如果您不使用聚合函数（例如 COUNT、SUM ...），则不需要“分组依据”

编辑：你也可以失去一些括号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:44:59.797

我认为摆脱你的`GROUP BY`条款可以消除这个问题。您没有使用聚合函数，因此不需要 group by。

```
SELECT 
    qb1.CompanyName, 
    qb1.AssetName, 
    qb1.Year, 
    IIf(qb1.PrimaryProductionType='Oil', 
        qb2.WellworkOIL, 
        IIF(qb1.PrimaryProductionType='Gas', 
            qb3.WellworkGAS, 
            qb4.WellworkOilGas)) AS Selected
FROM    PEBaseQueryConditions AS qb1 
            INNER JOIN PE_Field_WellworkOIL AS qb2 
                 ON (qb1.Year=qb2.Year) AND (qb1.AssetName=qb2.AssetName)
            INNER JOIN PE_Field_WellworkGAS AS qb3 
                 ON (qb1.Year=qb3.Year) AND (qb1.AssetName=qb3.AssetName)
            INNER JOIN PE_Field_WellworkOILGAS AS qb4 
                 ON (qb1.Year=qb4.Year) AND (qb1.AssetName=qb4.AssetName) 
```

# java - 动态解析 API 的实现

> ID：12200592
> 
> 赞同：1
> 
> 时间：2012-08-30T15:40:11.490
> 
> 标签：java

我们有一个系统，我们想在一个单独的 jar 中使用我们的接口实现。场景是客户使用我们的工作并提供他们自己的实现来覆盖默认实现。

问题是将实际实现类绑定/连接到我们的系统中的最佳方法是什么？

一种方法是让弹簧连接依赖项。它目前不是一个选项，因为所有客户端都没有使用 spring。

研究了一些选项，例如使用反射解析接口实现类。对这个解决方案不太满意。

另一个不错的旧选项是在其中一个属性中配置类名并让客户端配置它。这看起来不错的样子。

但是如果可以的话，想找到一些优雅的选择。

还有任何想法 SLF4J / EL 如何自动解决它们的实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:43:51.100

我建议您使用[SPI (Service Provider Interface)](http://docs.oracle.com/javase/6/docs/api/java/util/spi/package-summary.html)。它需要创建枚举特定服务的所有可用实现的文件。这可能很烦人。幸运的是，您可以使用这个为您工作的开源库：[http ://code.google.com/p/spi/](http://code.google.com/p/spi/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:23:29.480

也许您正在寻找[Reflections库。](http://code.google.com/p/reflections/)

> Reflections 扫描您的类路径，索引元数据，允许您在运行时查询它，并且可以为项目中的许多模块保存和收集该信息。
> 
> 使用反射，您可以查询元数据，例如：
> 
> *   获取某种类型的所有子类型
> *   获取所有带有一些注释的类型/方法/字段，没有注释参数匹配
> *   获取匹配正则表达式的所有资源

# cross-compiling - cross-NG GCC 4.6.3 配置失败：无法找到可用的 PPL（当它存在时）

> ID：12200594
> 
> 赞同：0
> 
> 时间：2012-08-30T15:40:15.850
> 
> 标签：cross-compiling

我正在尝试为 ARM 和 i586 架构构建跨 NG。`ct-ng build`尝试编译 GCC 时失败。我已经安装了 PPL 1.0-1 版。还尝试了 0.11.2-2 版本。我不明白为什么 GCC 的配置脚本找不到 PPL，而 PPL 已经在那里了......

所有相同的结果：

```
...
[CFG  ]    checking for the correct version of gmp.h... yes
[CFG  ]    checking for the correct version of mpfr.h... yes
[CFG  ]    checking for the correct version of mpc.h... yes
[CFG  ]    checking for the correct version of the gmp/mpfr/mpc libraries... yes
[CFG  ]    checking for PWL_handle_timeout in -lpwl... yes
[CFG  ]    checking for version 0.11 (revision 0 or later) of PPL... no
[ERROR]    configure: error: Unable to find a usable PPL.  See config.log for details.
[ERROR]  
[ERROR]  >>
[ERROR]  >>  Build failed in step 'Installing pass-1 core C compiler'
[ERROR]  >>        called in step '(top-level)'
[ERROR]  >>
[ERROR]  >>  Error happened in: CT_DoExecLog[scripts/functions@172]
[ERROR]  >>        called from: do_cc_core_backend[scripts/build/cc/gcc.sh@343]
[ERROR]  >>        called from: do_cc_core_pass_1[scripts/build/cc/gcc.sh@88]
[ERROR]  >>        called from: main[scripts/crosstool-NG.sh@598]
[ERROR]  >>
[ERROR]  >>  For more info on this error, look at the file: 'build.log'
[ERROR]  >>  There is a list of known issues, some with workarounds, in:
[ERROR]  >>      'docs/B - Known issues.txt'
[ERROR]  
[ERROR]  (elapsed: 7:27.12) 
```

万一这很重要，我的盒子：

```
uname -m x86_64
distro: archlinux
gcc -v: gcc version 4.7.1 20120721 (prerelease) (GCC) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T20:46:57.143

Crosstool-NG[自行下载并构建其依赖](http://sourceware.org/ml/crossgcc/2012-07/msg00044.html)项。在 ct-ng menuconfig 中，有这样的注释：

```
 │ │    ()  Extra addons                                                 │ │  
  │ │          *** WARNING !!!                                            │ │  
  │ │          ***   For glibc >= 2.8, it can happen that the tarballs    │ │  
  │ │          ***   for the addons are not available for download.       │ │  
  │ │          ***   If that happens, bad luck... Try a previous version  │ │  
  │ │          ***   or try again later... :-( 
```

可能下载服务器暂时关闭或您的网络连接中断。“稍后再试” ？

要尝试的另一件事是在 Companion 库下的 ct-ng menuconfig 中选择不同版本的 PPL。就我而言，我选择了 gcc 和 crosstool 不支持的其他版本的组合。尝试使用库存通用 arm-unknown-linux-gnueabi 配置而不进行修改。这对我有用。

# c++ - Allegro 5 加载字体时崩溃

> ID：12200595
> 
> 赞同：1
> 
> 时间：2012-08-30T15:40:16.977
> 
> 标签：c++, allegro5

我最近开始使用 Allegro 5，并尝试加载字体。这是我的代码：

```
#include <allegro5/allegro.h>
#include <allegro5/allegro_font.h>
#include <allegro5/allegro_ttf.h>
#include <allegro5/allegro_native_dialog.h>

int main()
{
    al_init_font_addon();
    al_init_ttf_addon();
    ALLEGRO_DISPLAY *display = NULL;
    if(!al_init())
    {
        al_show_native_message_box(NULL, NULL, NULL, "Error", NULL, NULL);
        return -1;
    }
    display = al_create_display(800, 800);
    ALLEGRO_FONT *font1 = al_load_font("arial.ttf", 12, 0);

    if(!font1)
    {
        al_show_native_message_box(NULL, NULL, NULL, "Error 3", NULL, NULL);
        return -3;
    }
    al_clear_to_color(al_map_rgb(0, 0, 0));
    al_draw_text(font1, al_map_rgb(255, 0, 255), 50, 50, ALLEGRO_ALIGN_CENTRE, "Hello font size: 12");
    al_flip_display();

    al_rest(3.0);
    al_destroy_font(font1);
    al_destroy_display(display);
    return 0;
} 
```

然而，在运行代码时，它返回 -3，这意味着加载字体时出错。我究竟做错了什么？我正在使用带有 Windows XP SP 3 mingw 编译器的 Codeblocks IDE。我究竟做错了什么？

编辑：我通过将 ttf 文件添加到我的项目目录来修复它。投票关闭

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:26:01.037

你有两个问题，一个是你已经发现的。另一个是您在调用`al_init()`.

您应该阅读[此故障排除指南](http://wiki.allegro.cc/index.php?title=Loading_Resources_(Troubleshooting))，以了解如何以跨平台的方式从相关位置正确加载资源。

# cocoa - 可可：一条奇怪的视线

> ID：12200600
> 
> 赞同：0
> 
> 时间：2012-08-30T15:40:30.830
> 
> 标签：cocoa

我在拆分视图中实现了源列表和自定义视图，如下所示：

![在此处输入图像描述](../Images/cbcc32a8be959d1002ad28e660bff4d5.png)

但是来自苹果的演示在 sourceview 的顶部没有一行： ![在此处输入图像描述](../Images/f06374013fcdfdf767b3639bb77452b1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:51:40.643

选择大纲视图的封闭滚动视图。将其“边框类型”设置为无（虚线，控件上的左侧按钮）。

# asp.net-mvc-3 - MVC 4 SIMpleMembership 与 LDAP

> ID：12200616
> 
> 赞同：6
> 
> 时间：2012-08-30T15:41:10.280
> 
> 标签：asp.net-mvc-3, ldap, asp.net-membership, asp.net-mvc-4

我正在尝试使用 simpleMembership，但将其连接到我们的 LDAP。我没有在网上看到任何关于这样做的信息，只有 SQL。有谁知道这是否可能并且可以引导我走向正确的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T23:14:03.713

我认为您需要创建一个继承自 ExtendedMembershipProvider 的类并编写 LDAP 实现。没有内置的 LDAP 支持。

[有关SimpleMembership 如何在 ASP.NET MVC 4 中工作的更多信息，](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)请参阅这篇文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:51:26.240

我不确定，但 ActiveDirectoryMembershipProvider 可能能够配置为连接到不同的 LDAP 提供程序。您在之前的回复中提到您正在使用 Active Directory，因此它甚至可能不是问题。

[http://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider.aspx)

# excel - MouseMove - 什么是反向事件？

> ID：12200618
> 
> 赞同：2
> 
> 时间：2012-08-30T15:41:22.677
> 
> 标签：excel, vba

```
Private Sub framePDF_MouseMove(ByVal... )
framePDF.BackColor = &H80000012& 
```

因此，框架的颜色正在发生变化。
我找不到返回颜色的事件 - 当光标远离框架时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:22:18.803

在用户窗体上？Userform 还有一个 MouseMove 事件，当您在 Frame 中时该事件不会触发。

```
Private Sub Frame1_MouseMove(ByVal ...)

    Me.Frame1.BackColor = vbRed

End Sub

Private Sub UserForm_MouseMove(ByVal ...)

    Me.Frame1.BackColor = vbWhite

End Sub 
```

当你超过它时会将框架变为红色，当你不在时将变为白色。这些事件不断触发，因此请明智地使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:49:37.873

在 vba 和 VB6 中没有 MouseLeave 事件。

实现这一点的最佳方法是在鼠标进入框架时启动计时器。

然后在计时器代码中检查鼠标指针是否仍在框架的范围内。如果不改变颜色并停止计时器

将此代码放在一个模块中：

```
Public Declare Function GetCursorPos Lib "user32" (lpPoint As _
   POINTAPI) As Long

Public Type POINTAPI
        x As Long
        y As Long
End Type 
```

在您的表单上创建一个计时器，设置`interval =10` `Enbaled = False`

然后代码看起来像这样：

```
Private Sub frameTest_MouseMove(Button As Integer, Shift As Integer, x As Single, y As Single)
    frameTest.BackColor = vbRed
    tmrMouseLeave.Enabled = True
End Sub

Private Sub tmrMouseLeave_Timer()
    Dim pt As POINTAPI
    Call GetCursorPos(pt)
    Dim xValue As Long, yValue As Long
    xValue = pt.x * Screen.TwipsPerPixelX
    yValue = pt.y * Screen.TwipsPerPixelY

    If (xValue > (Me.Left + frameTest.Left)) And _
       (xValue < (Me.Left + frameTest.Left + frameTest.width)) And _
       (yValue > (Me.Top + frameTest.Top)) And _
       (yValue < (Me.Top + frameTest.Top + frameTest.height)) Then
        'we are still inside the frame
    Else
        'mouse is outside the frame
        frameTest.BackColor = vbBlue
        tmrMouseLeave.Enabled = False
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-25T19:50:18.630

更简单的方法：在 MouseMove 事件中，针对控件的宽度和高度（减去边距，例如 5）测试 X 和 Y 参数 - 如果鼠标在边距中，则将其视为“鼠标移出”并相应地更改控件的颜色. 不需要并发按钮、z 顺序操作、框架等。

# java - 对管理员隐藏私钥等

> ID：12200619
> 
> 赞同：2
> 
> 时间：2012-08-30T15:41:23.433
> 
> 标签：java, security, jakarta-ee, weblogic, administration

目前我参与开发一个基于 Java EE（更准确地说是 WebLogic 服务器）的系统，我想知道如何保护一些私有数据免受管理员的侵害。例如，系统的某些部分将遗留系统的凭据以纯文本形式存储在部署描述符中，这很糟糕，因为部署者可以读取应用程序配置文件（`ejb-jar.xml`例如）并窃取强大帐户的用户名和密码。我想关闭这个安全漏洞，但不知道如何。

现在我对保护这种数据感兴趣：

1.  登录
2.  密码
3.  用于对称加密的私钥

从[这里](http://kingsfleet.blogspot.com/2008/12/storing-password-somewhere-safe.html)我发现我可以使用 JCEKS 密钥库来保护此类信息，但我不明白如何使用它。我的应用程序仍应包含 kestore 密码和访问它的密钥密码。因此，depoyer 可以窃取密钥库和密钥的密码，找到我的安全存储并窃取凭证。显然，我可以撤销`read`部署者帐户的权限，但随后他可以反编译我的应用程序并开发他自己的类似应用程序（或编辑我的应用程序），只需将安全数据打印到某个文件或通过电子邮件发送......现在我我卡住了……

谁能给我一些可以解释如何保护系统免受管理员攻击的链接？Weblogic 相关链接将是可取的。我完全理解不可能保护所有管理员，应该有一些`security administrator`人负责密钥库管理等，但我想保护所有敏感数据免受其他人的侵害。

**结果**

jtahlborn和*slim*的答案都是正确的，但*slims的**答案*更有趣。我认为在我的情况下，只接受签名的应用程序安装在服务器上是合适的。这个决定可以解决管理员对应用程序进行修改的问题。管理员将拥有来自密钥库和所有密钥的密码，但他们根本无权访问密钥库文件。只有特殊的安全管理员 ('rw') 和服务器 ('r') 才能访问密钥库文件。因此，每个人都将拥有密钥，但没有人（安全管理员除外）可以访问该盒子。

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T16:02:20.340

除非您在应用程序启动时输入登录凭据，否则无法解决此问题（假设管理员无法访问应用程序内存，这可能不是一个安全的假设）。 *任何*涉及密钥与应用程序位于同一位置的解决方案都将导致管理员（具有应用程序文件系统访问权限）能够访问应用程序可访问的任何敏感数据。这类似于 DRM 问题（您不能给某人一个上锁的盒子*和钥匙*，并期望他们无法打开盒子）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T16:18:07.683

我认为这个问题的核心在于“管理员”的定义。

您说过您对确实有权访问密钥存储的“安全管理员”感到满意。

传统上，UNIX 类型将“admin”视为“root”用户——有权访问机器上所有内容的人。Root 几乎可以做任何事情，包括偷看和戳应用程序内存，或读取/写入原始磁盘地址。如果服务器可以获得私钥，那么 root 也可以。

如果您想定义一个具有更有限访问权限的“管理员”角色，那么可以，您可以在此类用户存在的地方设置一些东西。他们需要比服务器应用程序本身拥有更少的权限，因为应用程序至少可以做一件“管理员”不能做的事情（获取私钥）。

这样的用户也可能无法安装该应用程序（因为如果可以，他们可以创建并安装一个公开私钥的应用程序版本）。因此，您的“管理员”无法部署使用私钥的组件。但是，他们可能会部署一个在该容器内运行的模块（只要容器不能为该模块提供私钥）。

但是，它不仅仅是您要保护的密钥。真正的“秘密”是使用密钥加密的数据。所以我们仍然对上面的方法有问题。如果模块可以读取加密数据，那么与模块具有相同权限的“管理员”也可以。这包括任何可以安装该模块的人。

您可以调查对模块进行签名的方法，以便“管理员”无法创建自己的版本。

然而，有一点是，启用不可信管理员所需的措施比简单地使用可信管理员变得更加昂贵（在时间和精力方面）。

所以，你需要列出你所谓的“管理员”可以做的事情。根据这些事情是什么，很可能允许非 root 用户执行这些事情。在 UNIX 上，您可以使用 sudo 之类的工具来允许非 root 用户执行启动/停止服务器、读取日志、清理日志等操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T16:34:04.173

可以将身份验证与应用程序的其余部分分开。

例如，如果您通过 TLS 安全套接字与遗留系统通信，您可以编写一个小的单独应用程序，该应用程序接受来自应用程序的未加密连接，然后与遗留系统建立安全、经过身份验证的连接，并在应用程序和遗留系统。本质上，它是一个身份验证代理。然后，应用程序将不需要这些密钥。您可以以无权读取包含密钥的文件的用户身份安装和操作该应用程序，但该应用程序仍然可以与旧系统通信。

当然，现在您遇到了如何向代理验证应用程序的问题。您可能会觉得机器足够安全，您根本不需要这样做——只要代理只侦听环回接口即可。如果没有，如果您可以改用 unix 域套接字，那么您可以使用文件系统权限控制访问：您可以以某个特定组中的某个用户身份运行应用程序，然后将对该套接字的访问限制为该组的成员。Java 在标准库中没有 unix 域套接字支持，但您可以使用[junixsocket](http://code.google.com/p/junixsocket/)或[JUDS](https://github.com/mcfunley/juds)添加它。**

# jquery - Jqgrid - 对行级数据进行分组

> ID：12200621
> 
> 赞同：15
> 
> 时间：2012-08-30T15:41:32.807
> 
> 标签：jquery, jqgrid

使用jqgrid，是否可以将行级数据分组为附加图像中的？基本上我想将特定行的数据从某些列开始拆分为多行..

例子

![在此处输入图像描述](../Images/cc7d5033c1232b1b2c919df6e7df132e.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-06T06:17:01.783

我建议您使用在某些单元格上`cellattr`设置`rowspan`属性或设置`style="display:none"`隐藏另一个不需要的单元格。`colspan`这个想法与来自[答案](https://stackoverflow.com/a/5625959/315935)的想法相同。

结果，您可以创建以下网格（参见[演示](http://www.ok-soft-gmbh.com/jqGrid/RowSpan1.htm)）

![在此处输入图像描述](../Images/9d20392c2b0b20c53cb3f09c63107e49.png)

或另一个（参见[另一个演示](http://www.ok-soft-gmbh.com/jqGrid/RowSpan2.htm)）

![在此处输入图像描述](../Images/d525b45386a0f6da4aea4e120ebcfa03.png)

网格的问题在于另一个 jqGrid 功能，如排序、分页、悬停和选择。一些功能可以通过额外的努力实现，但另一种更难实现。

我在演示中使用的代码如下：

```
var mydata = [
        { id: "1", country: "USA", state: "Texas",      city: "Houston",       attraction: "NASA",               zip: "77058", attr: {country: {rowspan: "5"},    state: {rowspan: "5"}} },
        { id: "2", country: "USA", state: "Texas",      city: "Austin",        attraction: "6th street",         zip: "78704", attr: {country: {display: "none"}, state: {display: "none"}} },
        { id: "3", country: "USA", state: "Texas",      city: "Arlinton",      attraction: "Cowboys Stadium",    zip: "76011", attr: {country: {display: "none"}, state: {display: "none"}} },
        { id: "4", country: "USA", state: "Texas",      city: "Plano",         attraction: "XYZ place",          zip: "54643", attr: {country: {display: "none"}, state: {display: "none"}} },
        { id: "5", country: "USA", state: "Texas",      city: "Dallas",        attraction: "Reunion tower",      zip: "12323", attr: {country: {display: "none"}, state: {display: "none"}} },
        { id: "6", country: "USA", state: "California", city: "Los Angeles",   attraction: "Hollywood",          zip: "65456", attr: {country: {rowspan: "4"},    state: {rowspan: "4"}} },
        { id: "7", country: "USA", state: "California", city: "San Francisco", attraction: "Golden Gate bridge", zip: "94129", attr: {country: {display: "none"}, state: {display: "none"}} },
        { id: "8", country: "USA", state: "California", city: "San Diego",     attraction: "See world",          zip: "56653", attr: {country: {display: "none"}, state: {display: "none"}} },
        { id: "9", country: "USA", state: "California", city: "Anaheim",       attraction: "Disneyworld",        zip: "92802", attr: {country: {display: "none"}, state: {display: "none"}} }
    ],
    arrtSetting = function (rowId, val, rawObject, cm) {
        var attr = rawObject.attr[cm.name], result;
        if (attr.rowspan) {
            result = ' rowspan=' + '"' + attr.rowspan + '"';
        } else if (attr.display) {
            result = ' style="display:' + attr.display + '"';
        }
        return result;
    };

$("#list").jqGrid({
    datatype: 'local',
    data: mydata,
    colNames: ['Country', 'State', 'City', 'Attraction', 'Zip code'],
    colModel: [
        { name: 'country', width: 70, align: 'center', cellattr: arrtSetting },
        { name: 'state', width: 80, align: 'center', cellattr: arrtSetting },
        { name: 'city', width: 90 },
        { name: 'attraction', width: 120 },
        { name: 'zip', index: 'tax', width: 60, align: 'right' }
    ],
    cmTemplate: {sortable: false},
    rowNum: 100,
    gridview: true,
    hoverrows: false,
    autoencode: true,
    ignoreCase: true,
    viewrecords: true,
    height: '100%',
    caption: 'Grid with rowSpan attributes',
    beforeSelectRow: function () {
        return false;
    }
}); 
```

我在上面的代码中使用了`attr`与输入数据一起放置的附加属性。这只是一个例子。我想让`cellattr`功能的实现更简单。您可以使用相同的想法并以`cellattr`任何其他格式放置所需的信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T09:18:31.633

这是我对 JSON 数据的解决方案：

```
var prevCellVal = { cellId: undefined, value: undefined };

$("#list").jqGrid({
    url: 'your WS url'
    datatype: 'json',
    mtype: "POST",
    ajaxGridOptions: {
        contentType: "application/json"
    },
    colNames: ['Country', 'State', 'City', 'Attraction', 'Zip code'],
    colModel: [
        { name: 'country', width: 70, align: 'center', 
            cellattr: function (rowId, val, rawObject, cm, rdata) {
                        var result;

                        if (prevCellVal.value == val) {
                            result = ' style="display: none" rowspanid="' + prevCellVal.cellId + '"';
                        }
                        else {
                            var cellId = this.id + '_row_' + rowId + '_' + cm.name;

                            result = ' rowspan="1" id="' + cellId + '"';
                            prevCellVal = { cellId: cellId, value: val };
                        }

                        return result;
                    }
        },
        { name: 'state', width: 80, align: 'center' },
        { name: 'city', width: 90 },
        { name: 'attraction', width: 120 },
        { name: 'zip', index: 'tax', width: 60, align: 'right' }
    ],
    cmTemplate: {sortable: false},
    rowNum: 100,
    gridview: true,
    hoverrows: false,
    autoencode: true,
    ignoreCase: true,
    viewrecords: true,
    height: '100%',
    caption: 'Grid with rowSpan attributes',
    beforeSelectRow: function () {
        return false;
    },
    gridComplete: function () {
        var grid = this;

        $('td[rowspan="1"]', grid).each(function () {
            var spans = $('td[rowspanid="' + this.id + '"]', grid).length + 1;

            if (spans > 1) {
                $(this).attr('rowspan', spans);
            }
        });
    }
}); 
```

此示例适用于单列，但只需进行少量更正，它也可用于多列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:48:58.407

Hey there "pistipanko"

I have made a change in your solution, i think it worked better.

```
cellattr: function(rowId, val, rawObject, cm, rdata) {
                        var result;
                        var cellId = this.id + '_row_' + rawObject[3] + grid.getGridParam('page');

                        if (prevCellVal.cellId == cellId) {
                            result = ' style="display: none"';
                        }
                        else {
                            result = ' rowspan="' + rawObject[6] + '"';
                            prevCellVal = { cellId: cellId, value: rawObject[3] };
                        }

                        return result;
                    } 
```

I am making the grouping with the value of another collumn that's why the `rawObject[3]` And i am using a rowspan value returned from the application in the `rawObject[6]`

Works great.

Hope it helps :)

# ruby-on-rails - 将 splat 和哈希传递给方法？

> ID：12200625
> 
> 赞同：1
> 
> 时间：2012-08-30T15:41:37.020
> 
> 标签：ruby-on-rails, ruby-enterprise-edition

**解决方案**

在 1.8 上，我无法直接使用接受的答案，但它帮助我找到了以下内容：

```
def stylesheet_include(*sources)
  if /^3\.[1-2]/ =~ Rails.version && sources.last.is_a?(Hash)
    sources.last.delete :cache
  end
  stylesheet_link_tag *sources
end 
```

**原始问题**

使用修改后的 stylesheet_link_tag 帮助器以根据 rails 版本正确传递内容，因为此地图可能会作为 Rails 3.1.x 中的引擎加载。到目前为止，这是我的代码，以及我想做的事情：

```
def stylesheet_include(*sources)
  options = sources.extract_options!.stringify_keys
  if /^3\.[1-2]/ =~ Rails.version
    options.delete "cache"
  end
  stylesheet_link_tag *sources, options
end 
```

问题是，当我在源变量上调用 * 时，我无法传递第二个参数。我也不能只通过`sources, options`，因为 link_tag 方法需要几个参数，而不是数组。如果它接收到一个数组，那么您将获得如下路径：`css/reset/css/main.css`

任何人都对我如何让它发挥作用有想法。更糟糕的情况是我不能将选项传递给它，但我宁愿避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:02:41.323

实际上，如果您使用的是 Ruby 1.9，您确实可以在其他参数之前使用 splats。像这样：

```
def stylesheet_include(*sources, options)
  options = sources.extract_options!.stringify_keys
  if /^3\.[1-2]/ =~ Rails.version
    options.delete "cache"
  end
  stylesheet_link_tag *sources, options
end 
```

当然，问题是您传递给此方法的最后一件事将始终变为`options`，即使它不是哈希也是如此。而且您不能为`options`任何一个分配默认值，因为这种行为会相当模糊。因此，如果您始终确保至少传递一个空哈希作为`stylesheet_include`.

如果这对您不起作用，请尝试将 splat 作为参数并查看 splat 的最后一个成员是否是散列：如果是，那是您的选项，如果不是，则您的选项为空。

# c# - web.config中的自定义错误页面，错误信息会丢失吗？

> ID：12200626
> 
> 赞同：0
> 
> 时间：2012-08-30T15:41:36.987
> 
> 标签：c#, asp.net, error-handling

如果我的 web.config 有：

```
<customErrors mode="Off" defaultRedirect="CustomErrorPage.aspx">
      <error statusCode="401" redirect="~/CustomErrorPage.aspx?statusCode=401" />
      <error statusCode="403" redirect="~/CustomErrorPage.aspx?statusCode=403" />
      <error statusCode="404" redirect="~/CustomErrorPage.aspx?statusCode=404" />
      ...
</customErrors> 
```

现在在我的 CustomErrorPage.aspx 中，当没有自定义错误页面并将其输出到浏览器时，如何获取类似于我看到黄屏错误页面的堆栈跟踪信息？

**或者，因为这是重定向到 customerrorpage.aspx，此时错误是否基本上丢失并且我无法访问异常信息？**

这是一个具有复杂虚拟目录等的遗留应用程序，因此我现在可以轻松删除其中一个错误库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:45:59.967

根据此 SO 帖子（http://stackoverflow.com/questions/343014/asp-net-custom-error-page-server-getlasterror-is-null），如果您运行的是 .Net 3.5 SP1，则可以使用该`redirectMode`属性在你的`customErrors`元素上。

有关 redirectMode 的更多信息：http: [//msdn.microsoft.com/en-us/library/system.web.configuration.customerrorssection.redirectmode (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.customerrorssection.redirectmode(v=vs.90).aspx)

完成此操作后，您将可以从 Server.GetLastError() 访问错误：http: [//msdn.microsoft.com/en-us/library/system.web.httpserverutility.getlasterror.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.getlasterror.aspx)

编辑：您将使用该`ResponseRewrite`模式`redirectMode`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:52:18.303

它丢失了。您甚至不在同一个请求中，因为它是通过重定向完成的。

最后一点本身就很糟糕（将某人重定向到错误页面有什么意义？），但它会影响你。但是，`redirectMode="ResponseRewrite"`添加到`customErrors`元素后，就解决了这个问题，也意味着它`Server.GetLastError()`会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:44:32.010

您可以在服务器上的某个文件中记录错误（您需要在 Global.asax.cs 中添加 Application_Error 事件处理程序），或者在 webconfig 中删除此行以获取黄屏异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T15:46:38.060

在您的 global.asax 中，您可以捕获错误并将其保存以在错误页面中检索。

您重写`Application_Error`以捕获错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T15:49:51.210

异常不会丢失。您可以调用[`Server.GetLastError()`](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.getlasterror.aspx)以获取最后抛出的异常。

由于它返回一个`Exception`对象，您可以简单地调用`StackTrace`来获取完整的堆栈跟踪。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-30T15:49:54.737

使用 GetLastError，它允许您（奇怪的是）获取发生的最后一个错误。

[http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.getlasterror.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.getlasterror.aspx)

# css - 针对特定的 LI CSS

> ID：12200627
> 
> 赞同：1
> 
> 时间：2012-08-30T15:41:41.293
> 
> 标签：css

我是 CSS 新手，但正在学习。我试图弄清楚如何设置一个只能针对某些`<li>`字段的特定类。这是我尝试过的，但它不起作用，请您提供任何建议来帮助我吗？

`<li>`我正在尝试为我的网站创建一个菜单栏，并且我有来自父菜单的css 。但我也希望能够创建一个特定的 css`<li>`来调用，例如：

```
<li class="nodropdown">bla... bla...</> 
```

这是我尝试做的，但我不知道如何正确创建类。我知道这真的很糟糕，但我是新手并且正在尝试。谢谢！！

```
#menu li #nodropdown {
    float:left;
    display:block;
    text-align:center;
    position:relative;
    padding: 4px 5px 4px 5px;
    margin-right:30px;
    margin-top:7px;
    border:none;
}

#menu li:hover #nodropdown {
    border: 1px solid #777777;
}

#menu li a #nodropdown {
    font-family:Arial, Helvetica, sans-serif;
    font-size:12px; 
    color: #EEEEEE;
    display:block;
    outline:0;
    text-decoration:none;
}

#menu li:hover a #nodropdown {
    color:#161616;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:43:56.287

类总是以 a 开头`.`，只有 ID 以 '#' 开头。

所以是：`#menu li.nodropdown`

注意 li 和 之间没有空格。因为上课直接上li。

编辑：我建议通读本教程：[http ://www.w3schools.com/css/default.asp](http://www.w3schools.com/css/default.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:44:43.817

不确定这是否说明了显而易见的问题，但您在 HTML 中指定了一个类，在 CSS 中指定了一个 ID（使用 #）

# html - Web Worker 插件访问

> ID：12200629
> 
> 赞同：1
> 
> 时间：2012-08-30T15:41:49.867
> 
> 标签：html, plugins, web-worker

有没有办法从网络工作者实例创建或以某种方式访问​​浏览器插件？我想要做的是能够从网络工作者访问 Dymo 标签插件，但网络工作者可访问的导航器对象没有插件属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T22:54:09.577

所有插件都通过对象或嵌入标签实例化。这些是使用文档创建的，网络工作者对此一无所知。据我所知，没有办法在网络工作者中使用插件。

# objective-c - 如何在 [self dismissModalViewControllerAnimated:YES] 之后调用 viewDidLoad；

> ID：12200630
> 
> 赞同：1
> 
> 时间：2012-08-30T15:41:59.033
> 
> 标签：objective-c, ios, xcode, segue, viewdidload

好的。如果您有两个 viewController 并且从第一个到第二个执行模态 Segue，则使用 [self dismissModalViewControllerAnimated:YES]; 将其关闭。它似乎不记得 viewDidLoad。我有一个主页（viewController），然后是一个选项页面，我希望在您更改选项时更新主页。当我刚刚做了两个模态序列（一个向前，一个向后）时，这很有效，但这似乎是非结构化的，并且可能导致大型项目中的代码混乱。

我听说过 push segues。他们有更好的吗？

谢谢。我很感激任何帮助:)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T15:43:00.693

那是因为 UIViewController 已经加载到内存中。但是，您可以使用[viewDidAppear:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)。

或者，您可以使推送视图控制器成为推送视图控制器的代表，并在推送控制器退出屏幕时通知它更新。

后一种方法的好处是不需要重新运行整个`viewDidAppear:`. 例如，如果您只更新表格行，为什么要重新渲染整个内容？

**编辑：**只是为了你，这里是一个使用代表的简单例子：

```
#import <Foundation/Foundation.h>

// this would be in your ModalView Controller's .h
@class ModalView;

@protocol ModalViewDelegate

- (void)modalViewSaveButtonWasTapped:(ModalView *)modalView;

@end

@interface ModalView : NSObject

@property (nonatomic, retain) id delegate;

@end

// this is in your ModalView Controller's .m
@implementation ModalView

@synthesize delegate;

- (void)didTapSaveButton
{
    NSLog(@"Saving data, alerting delegate, maybe");

    if( self.delegate && [self.delegate respondsToSelector:@selector(modalViewSaveButtonWasTapped:)])
    {
        NSLog(@"Indeed alerting delegate");

        [self.delegate modalViewSaveButtonWasTapped:self];
    }
}

@end

// this would be your pushing View Controller's .h
@interface ViewController : NSObject <ModalViewDelegate>

- (void)prepareForSegue;

@end;

// this would be your pushing View Controller's .m
@implementation ViewController

- (void)prepareForSegue
{
    ModalView *v = [[ModalView alloc] init];

    // note we tell the pushed view that the pushing view is the delegate
    v.delegate = self;

    // push it

    // this would be called by the UI
    [v didTapSaveButton];
}

- (void)modalViewSaveButtonWasTapped:(ModalView *)modalView
{
    NSLog(@"In the delegate method");
}

@end

int main(int argc, char *argv[]) {
    @autoreleasepool {

        ViewController *v = [[ViewController alloc] init];

        [v prepareForSegue];
    }
} 
```

输出：

```
2012-08-30 10:55:42.061 Untitled[2239:707] Saving data, alerting delegate, maybe
2012-08-30 10:55:42.064 Untitled[2239:707] Indeed alerting delegate
2012-08-30 10:55:42.064 Untitled[2239:707] In the delegate method 
```

*示例在 OS X 的[CodeRunner](http://krillapps.com/coderunner/)中运行，我与其零隶属关系。*

# xml - xsl 获取命名元素的值

> ID：12200632
> 
> 赞同：-2
> 
> 时间：2012-08-30T15:42:11.733
> 
> 标签：xml, xslt

我是 xsl 的新手，所以这可能是一个非常简单的问题。

我有一个如下所示的 xml 文件，使用 xsl 如何获取每个不同元素的值。我一直在尝试使用 for-each & value-of 但似乎无法获取元素值，而是继续获取​​元素名称。

![在此处输入图像描述](../Images/b3a566fdfcf6e630b439d8280be87082.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:54:53.563

首先，该 XML 格式不正确，因此请发布您尝试转换的 XML。向我们展示您尝试过的 XSLT 也是值得的，因此我们可以帮助您纠正它。

同时，这可能会有所帮助

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <xsl:for-each select="./elem">
            Value:<xsl:value-of select="."/><br/>
            NameAttribute:<xsl:value-of select="@name"/><br/>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

# windows - 支持跨不同文件夹层次结构的单个 SVN 存储库

> ID：12200646
> 
> 赞同：3
> 
> 时间：2012-08-30T15:43:02.947
> 
> 标签：windows, svn, tortoisesvn

因此，我有一个项目将遍布我的文件系统的文件和文件夹联系在一起。从逻辑上讲，所有这些文件都属于单个项目，因此属于单个 SVN 存储库，但我无法将它们组合到单个文件夹层次结构中，因为所涉及的程序都经过硬编码以将其源代码保存到特定目录。

我认为我不是第一个处理这种情况的人，所以我希望我忽略了一个简单的解决方案。我考虑了四种方法，但它们都有缺点；有没有我没有考虑过的另一种方法，或者除此之外，任何人都可以长期提供对最佳方法的见解吗？

以下是我考虑的方法：

1.  签出每个系统文件夹中 SVN 存储库的相应子文件夹。在技​​术上可能是最简单的，但我不喜欢很多单独的提交成为构成可能是单个“逻辑”提交的必要条件。与更新相同。
2.  将 SVN 结帐保存在一个位置，并使用程序同步 SVN 层次结构和系统文件夹。使 SVN 的使用更简单一些，但它是更多的移动部分。如果有人以错误的方向同步，覆盖未提交的工作也很容易。
3.  单个 SVN 结帐，使用连接/符号链接到系统文件夹。根据我的尝试和一些网络搜索，目前这在技术上似乎是不可能的。它也感觉有点脆弱。
4.  我也许可以采取相反的方式并更改硬编码的程序文件夹，以便它们成为我的 SVN 结帐的子文件夹的符号链接/连接。这似乎仍然有点脆弱：软件更新可能会取代符号链接，或者一个或多个程序可能也不喜欢符号链接。

请注意，将使用此存储库的一些人不是开发人员，所以我想让他们尽可能简单。另请注意，这是一个 Windows 环境，我们通常使用 TortoiseSVN。Git/mercurial/etc 不是一个选项，公司政策要求 SVN 配合我们的发布流程。

采用“可能可行的最简单的事情”的方法，#1 似乎是要走的路。但也许（希望？）我缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:27:08.333

由于没有人对此进行权衡，我只想说我最终选择了 1 号门。这个“解决方案”对于新手来说是最容易理解的，没有任何微妙的东西会破坏并造成伤害或混乱。多次提交可能会有点烦人，但我在实践中发现我们通常一次只更新/提交一个或两个位置。

还值得注意的是，一些 IDE 可以抽象出这个问题。如果您的 IDE 支持从不同位置提取文件的项目或解决方案，那么 SVN 插件很可能也支持它。例如，Visual Studio + AnkhSVN 可以处理它——Ankh 将简单地将您的“单个”提交拆分为多个对 SVN 的实际提交。并不真正适用于我的场景，但也许它会帮助其他人。

# iphone - libsqlite3.0.dylib 错过了吗？

> ID：12200647
> 
> 赞同：0
> 
> 时间：2012-08-30T15:43:07.050
> 
> 标签：iphone, objective-c, xcode4.3

我想在我的 iPhone 应用程序中使用 sqlite，但我首先阅读了我要做的是添加框架，但它似乎不存在于我的 Mac 中。

正如我所读到的，它位于 /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhone02.0.sdk/usr/lib/

但没有，我用 finder 寻找它，但它没有找到该文件（在 Developer 文件夹中，它只是一个 Application 文件夹）。

我应该安装一些东西吗？

我正在使用 Xcode4.3

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:59:29.943

您无需安装任何东西，这确实已包含在 iOS SDK 中。

这是一个简短的 YouTube 视频，向您展示如何在 Xcode 4 中添加框架：[http ://www.youtube.com/watch?v=v-4TDlcsZRo](http://www.youtube.com/watch?v=v-4TDlcsZRo)

希望这可以帮助

# php - 基于 php 的游戏 - 城堡布局

> ID：12200650
> 
> 赞同：0
> 
> 时间：2012-08-30T15:43:25.060
> 
> 标签：php

我正在制作一个基于 PHP 的 RPG，城市建设游戏。我的想法是为城堡布局创建一个 9X9 网格，中心 3X3 是内城堡，单击该部分后，他们将看到内城堡的 6X6 网格。玩家还将能够获得外部网格的瓷砖，将它们变成内部城堡。每个瓷砖都可以建造。考虑到可伸缩性，在数据库中表示这一点的最佳方式是什么？

到目前为止，我提出的唯一方法是一个包含 (idcastle, Y, X) 的 3 列表，其中 X 是 18 个数字的字符串。我会使用 substr 来查看该瓷砖上是否有建筑物。但是，我认为如果有很多城堡（因为每个城堡需要 18 行），我会遇到可扩展性问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:09:42.130

这取决于您如何查询数据库。我建议动态地制作你的 id，所以它是 castleid_x_y_z 那样你只查询主键，使它非常快。

再加上使用 redis 之类的东西来处理它，因为它通常只受网络速度的限制。如果您有太多城堡，您只会将人们推到第二个服务器。您甚至无需担心扩展，因为您不会将 1 个城堡拆分为两台服务器

# facebook - Yii facebook 登录按钮和检查会话

> ID：12200651
> 
> 赞同：0
> 
> 时间：2012-08-30T15:43:28.720
> 
> 标签：facebook, yii, yii-extensions

我正在尝试使用 Yii 扩展 yii-facebook-opengraph 进行登录。我安装登录小部件没有问题。

我有两个问题：

*   第一：登录后弹出关闭。我不知道如何重定向到登录页面（弹出关闭并留在同一页面）。我想在会话中保存 userId。

**解决：编辑：SFacebook.php 方法 initJs **。****

 **```
 if ($this->async) {
            $init = "window.fbAsyncInit = function(){{$init};

            // whenever the user logs in, we tell our login service
            FB.Event.subscribe('auth.login', function() {
                window.location = ' " . Yii::app()->baseUrl."xxxREDIRECT-URLxxx". "';
            });
            };

            (function(d){
             var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
             js = d.createElement('script'); js.id = id; js.async = true;
             js.src = '{$script}';
             d.getElementsByTagName('head')[0].appendChild(js);
            }(document));";
        } 
```

*   二：在页面内我调用了 facebook api。如果用户关闭 facebook 会话，当我尝试调用 facebook api 时，我有一个错误，
    所以我想在每个页面上检查用户是否登录，这样：

    ```
     try{

            $userId = Yii::app()->session['userId']; 

            if (($userId=="") || ($userId==0)){

                try{

                    $user = Yii::app()->facebook->api('/me');
                    Yii::app()->session['userId'] = $user['id'];
                    Yii::app()->session['userName'] = $user['name'];

                    return true;

                }catch (Exception $e) {
                    $this->redirect(array('Admin/Index')); //LOGIN PAGE
                }

            }else{

                return true;   

            }

        }catch (Exception $e) {

            $this->redirect(array('Admin/Index')); //LOGIN PAGE

        } 
    ```**

# python - 检查空值列表

> ID：12200652
> 
> 赞同：5
> 
> 时间：2012-08-30T15:43:32.983
> 
> 标签：python, empty-list

检查列表是否仅包含空值（不是列表是否为空，而是空元素列表）的最有效方法是什么？我在 for 循环中使用著名的 pythonic 隐式布尔方法：

```
def checkEmpty(lst):
    for element in lst:
        if element:
            return False
            break
    else:
        return True 
```

周围有更好的吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-30T15:45:42.277

```
if not any(lst):
    # ... 
```

应该管用。 如果传递的可迭代对象的任何元素评估为 ，则`any()`返回。相当于：`True``True`

```
def my_any(iterable):
    for i in iterable:
        if i:
            return True
    return False 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T15:45:29.607

```
len([i for i in lst if i]) == 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T15:47:41.137

使用`all`：

```
 if all(item is not None for i in list):
      return True
    else:
      return False 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T15:45:41.950

```
>>> l = ['', '', '', '']
>>> bool([_ for _ in l if _])
False
>>> l = ['', '', '', '', 1]
>>> bool([_ for _ in l if _])
True 
```

# iphone - 使用 UICRouteAnnotation 为注解添加字幕

> ID：12200653
> 
> 赞同：0
> 
> 时间：2012-08-30T15:43:32.523
> 
> 标签：iphone, objective-c, map

```
UICRouteAnnotation *startAnnotation = [[UICRouteAnnotation alloc] initWithCoordinate [[routePoints objectAtIndex:0] coordinate]
title:@"Origin"
subtitle:@"Subtitle Here"
annotationType:UICRouteAnnotationTypeStart]; 
```

我正在尝试为此注释添加副标题，但对 UICRouteAnnotation 没有太多经验，也无法找到太多关于它的文档。通过例外添加“字幕：”。

我错过了什么？为什么这样做时字幕不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:29:46.657

我没有意识到 UICRouteAnnotation 需要修改以接受字幕。这是我为 UICRouteAnnotation 更新的 h 和 m 文件。进行以下更改解决了我的问题，因此我在问题中发布的代码可以按预期工作。

感谢安娜为我指明了正确的方向。

.h 文件

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

typedef enum UICRouteAnnotationType {
    UICRouteAnnotationTypeStart,
    UICRouteAnnotationTypeEnd,
    UICRouteAnnotationTypeWayPoint,
} UICRouteAnnotationType;

@interface UICRouteAnnotation : NSObject<MKAnnotation> {
    CLLocationCoordinate2D coordinate;
    NSString *title;
    NSString *subtitle;
    UICRouteAnnotationType annotationType;
}

@property (nonatomic) CLLocationCoordinate2D coordinate;
@property (nonatomic, readonly, copy) NSString *title;
@property (nonatomic, readonly, copy) NSString *subtitle;
@property (nonatomic) UICRouteAnnotationType annotationType;

- (id)initWithCoordinate:(CLLocationCoordinate2D)coord 
                   title:(NSString *)aTitle 
                   subtitle:(NSString *)aSubTitle 
          annotationType:(UICRouteAnnotationType)type;

@end 
```

.m 文件

```
#import "UICRouteAnnotation.h"

@implementation UICRouteAnnotation

@synthesize coordinate;
@synthesize title;
@synthesize subtitle;
@synthesize annotationType;

- (id)initWithCoordinate:(CLLocationCoordinate2D)coord 
                   title:(NSString *)aTitle 
                subtitle:(NSString *)aSubTitle
          annotationType:(UICRouteAnnotationType)type {
    self = [super init];
    if (self != nil) {
        coordinate = coord;
        title = [aTitle retain];
        subtitle = [aSubTitle retain];
        annotationType = type;
    }
    return self;
}

- (void)dealloc {
    [title release];
    [subtitle release];
    [super dealloc];
}

@end 
```

# c# - 限制密码输入错误3次的用户

> ID：12200659
> 
> 赞同：1
> 
> 时间：2012-08-30T15:43:43.367
> 
> 标签：c#, jquery, asp.net, c#-4.0, c#-3.0

我有一个登录页面，用户可以输入用户名和密码我隐藏具有文本框内容的 div 我知道我的方法非常糟糕，但我没有更好的解决方案。当用户输入错误超过3 次？我想用没有客户端的 c# 代码和 jquery 来完成这项工作。

```
 $.ajax(
  {
      type: "POST",
      url: "loginpg.aspx/loginmtd",
      data: JSON.stringify({
          username: username,

          password: password

      }),
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      async: true,
      cache: false,
      success: function (ret) {
          if (ret.d != "" && hasError == false) {
               $(".error").hide();
               hasError = true;
               $('#result').after('<span class="error"> welcome  ' + ret.d + '</span>');

          } else if (hasError == false) {
               $(".error").hide();

               hasError = true;
               if (failcount < 3) {

                    $('#result').after('<span class="error">password is wrong' + ret.d + '</span>'); 
                    ret = "";
                    failcount += 1;
               } else {
                    $(".hid").hide(1000);

               }
           }
       },
       error: function (x, e) {
           hasError = true;
           $('#result').after(x.responseText);
       }
  }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T15:49:45.090

尽管在技术上可以在 3 次尝试失败后停止用户，但正如 jeschafe 所说，一旦刷新浏览器或打开新窗口，他们就可以再试一次。该块需要发生在服务器端，而不是使用 jquery 的客户端。

另一方面，这意味着您的用户名和密码数据也在客户端？我相信这也有额外的安全风险。

# c# - 最基本的 void 方法是否比返回值的方法更快/更少开销？

> ID：12200662
> 
> 赞同：3
> 
> 时间：2012-08-30T15:43:46.043
> 
> 标签：c#, .net, cil, il

我在 SO 或 Internet 上都找不到类似的问题/答案，并且与这个问题一样无用，也许这是我在阅读 MSIL 时想到的一个问题。我很想了解 IL 操作执行在我的场景中是如何工作的，即使这不是一个实际问题，我也没有人要问。

**前提：**

请记住，MSIL 命令和函数的执行分三个步骤完成：

1.  将命令操作数或函数参数压入堆栈。
2.  执行 MSIL 命令或调用函数。命令或函数从堆栈中弹出其操作数（参数）并将结果压入堆栈结果（返回值）。
3.  从堆栈中读取结果。

步骤 1 和 3 是可选的。例如，void 函数不会将返回值压入堆栈。

我知道这是一种方法的作用，它决定了需要多少“处理能力”，但为了我的好奇心，让我们考虑这两种非常基本的方法：

第一种方法：

```
void Method1()
{
  var result = 1+1;
} 
```

第二种方法：

```
int Method2()
{
  var result = 1+1;
  return result;
} 
```

**问题：**

因为 void 方法不推送返回值（或者是否存在隐式返回），这是否意味着与第二种方法相比，它在执行时需要更少的开销？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T16:03:06.533

但是请记住，MSIL 不会被执行，甚至不会被解释。MSIL 是编译代码的表达式，因为它将在虚拟机上执行。但是 JIT 编译器将 MSIL 转换为机器代码（x86 等）。x86 与基于堆栈的虚拟机有着根本的不同。

在最基本的层面上，函数在寄存器中返回值。假设寄存器足够大。让我们坚持使用 64 位值（引用、长整数、双精度和更小的值类型）。这些可以在 RAX 寄存器中返回。在您的简单示例中，为这两个函数生成的机器代码没有区别。也就是说，`Method1`将是：

```
mov rax, 1
inc rax
ret 
```

（而且，是的，我知道智能编译器会崩溃`1+1`到`2`. 假设那里有内存访问，好吗？）

`Method2`将是相同的，因为要返回的值已经在 RAX 寄存器中。

因此，当您使用 64 位或更小的数量时，返回值的方法和不返回值的方法之间的差异通常会有所不同，如果有的话，仅在加载返回值到正确的寄存器。这通常是一条`mov`指令。这将取决于事情完成的顺序，以及编译器和 JITer 优化事情的程度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T16:02:37.080

所有事情都是平等的，做某事会比不做某事慢。

但请注意，第一种方法的实现将变成：

```
void Method1()
{
} 
```

内联后，它甚至没有被调用（如果这是另一个对象上的实例方法，那么调用很可能被字段的读取所取代，因为优化无法停止，`NullReferenceException()`如果调用它应该抛出null。如果它是静态的，从同一个对象调用，或者编译器确定该对象不能为null，那么甚至不是。零代码。

同时，第二种方法将变为：

```
int Method2()
{
  return 2;
} 
```

内联后，使用该值的调用将从例如：

```
x = Method2(); 
```

到：

```
x = 2; 
```

如果不使用该值，则甚至不使用该值；它将与第一个完全相同。

这种事情的发生意味着即使在没有内联调用的情况下，诸如是否返回某些东西之类的微小差异大部分都会丢失，因为甚至不会针对更大的因素产生噪音，并且也可能违反直觉（通过影响是否以某种模糊的方式采用某些优化路径）。示例：产生了值，通过将其放入寄存器中“返回”它，但也许在计算时它仍然存在，也许它的下一次使用直接在那里工作；因此“归还”它的成本为零。

# grails - Grails 中 GSP 中的 if 语句

> ID：12200663
> 
> 赞同：18
> 
> 时间：2012-08-30T15:43:47.970
> 
> 标签：grails

我在控制器中调用索引方法

```
def index() {
    childInstance = Child.get(params.id)

    if(childInstance){
        System.out.println("CHILD" + childInstance.firstname)

        def messages = currentUserTimeline()
            [profileMessages: messages,childInstance:childInstance]
    } else {
        def messages = currentUserTimeline()
            [profileMessages: messages]

        System.out.println("ALL")
    }
} 
```

在我的 gsp 页面中

```
${childInstance.firstname} 
```

如果我通过一个 childInstance 这很好，但如果我不通过一个空指针我得到一个 500 有没有办法我可以在 gsp 中做一个 if 语句所以我可以做到这一点

```
if(childInstance){
   ${childInstance.firstname}
} else {
   All
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-30T16:00:38.923

您可以使用`g:if`,`g:elseif`和`g:else`:

```
<g:if test="${name == 'roberto'}">
    Hello Roberto!
</g:if>
<g:elseif test="${name == 'olga'}">
    Hello Olga!
</g:elseif>
<g:else>
    Hello unknown person!
</g:else> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T19:28:10.353

`<g:if>`比使用安全取消引用运算符更简洁的解决方案`?`

```
${childInstance?.firstName} 
```

如果不为空，将显示名字，如果`childInstance`为空，则不显示任何内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T15:46:43.077

```
<g:if test="${ childInstance }">
    ${ childInstance.firstName }
</g:if> 
```

# c - (Asterisk PBX) 如何从 features.conf 中的星号 agi 控制用 C 编写的程序

> ID：12200670
> 
> 赞同：0
> 
> 时间：2012-08-30T15:44:06.423
> 
> 标签：c, dynamic, asterisk, pipeline, agi

如何从 features.conf 中的星号 AGI 应用程序控制用 C 编写的程序？我想通过按电话上的键（dtmf-tones）来控制我的程序。我正在阅读有关使用管道传递标准 I/O 的信息。我的第一个想法是：

```
$ Asterisk | c_program 
```

然后在 AGI 脚本中通过`printf()`

第二个想法是使用：

```
$ printf parameter_a >> file 
```

写入文件，然后让我的 c 程序读取文件并将内容评估为参数。

有没有人尝试过或有过类似任务/问题的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:11:17.350

没有办法像你展示的那样。

可能的解决方案：

1) 使用 system() 运行带有参数的程序。您可以在有或没有 AGI 的情况下做到这一点。

2）使用linux管道（特殊文件）

3) 以 AGI/EAGI 脚本启动您的程序，您的程序必须能够正常运行，请参阅[CAGI](http://sourceforge.net/projects/cagi/)

4）使用数据库表（任务）和星号实时将记录放入其中。

最正确的是 3) 如果你的程序不是恶魔，2,4 如果你的程序是恶魔。

你也可以在拨号方案中使用

# devise - Mongoid3 + FactoryGirl 不兼容？

> ID：12200675
> 
> 赞同：1
> 
> 时间：2012-08-30T15:44:19.653
> 
> 标签：devise, factory-bot, mongoid3

我刚刚升级到 Mongoid3，我得到了很多这些错误：

```
TypeError:
   can't convert String into Integer 
```

问题总是当我尝试构建一个属于另一个模型的模型并分配引用模型时：

```
@entry = FactoryGirl.create(:entry_image, user_id: @user.id, day: 18, month: 6) 
```

它似乎是“user_id：@user.id”部分。我试过了：

```
@entry = FactoryGirl.build(:entry_image, day: 18, month: 6)
@entry.user = @user
@entry.save 
```

每次都是同样的错误。

这是工厂文件：

```
 FactoryGirl.define do
    factory :user do
      name 'Test User'
      email 'example@example.com'
      password 'please'
      password_confirmation 'please'
      pin '1234'
      default_time_zone 'America/New_York'
    end
  ... 
```

我正在使用设计，这是我们运行的控制器宏：

```
 module ControllerMacros

  def login_user
    before(:each) do
      @request.env["devise.mapping"] = Devise.mappings[:user]
      @user = FactoryGirl.create(:user)
      #user.confirm! # or set a confirmed_at inside the factory. Only necessary if you are using the confirmable module
      sign_in @user
    end
  end

  end 
```

这是完整的堆栈跟踪：

```
> 1.9.3p194 :016 > user = User.all[0]
 => #<User _id: 503e9c807adf9d6551000001, _type: nil, email: "joe@email.com", encrypted_password: "$5a$10$Mt1kx/TtbDma4gVtcTLdLeeP6tcSiF2AJkjeJmv73/U5OWF.M34v.", remember_created_at: 2012-08-29 23:30:17 UTC, sign_in_count: 3, current_sign_in_at: 2012-08-29 23:30:17 UTC, last_sign_in_at: 2012-08-29 22:49:57 UTC, current_sign_in_ip: "127.0.0.1", last_sign_in_ip: "127.0.0.1", s3_access_key: #<Moped::BSON::Binary type=:generic length=24>, s3_secret_key: #<Moped::BSON::Binary type=:generic length=48>, pin: nil, default_time_zone: "America/New_York", name: "Joe Smith"> 
1.9.3p194 :017 > e = FactoryGirl.create(("entry_image").to_s, user_id: user.id, items: [ FactoryGirl.build(:image, user_id: user.id) ])
TypeError: can't convert String into Integer
    from /Users/lee/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/set.rb:185:in `include?'
    from /Users/lee/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/set.rb:185:in `include?'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.5/lib/mongoid/callbacks.rb:140:in `block (3 levels) in cascadable_children'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.5/lib/mongoid/callbacks.rb:139:in `each'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.5/lib/mongoid/callbacks.rb:139:in `block (2 levels) in cascadable_children'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.5/lib/mongoid/relations/accessors.rb:103:in `without_autobuild'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.5/lib/mongoid/callbacks.rb:133:in `block in cascadable_children'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.5/lib/mongoid/callbacks.rb:131:in `each_pair'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.5/lib/mongoid/callbacks.rb:131:in `cascadable_children'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.5/lib/mongoid/callbacks.rb:95:in `run_callbacks'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.0/lib/active_model/validations/callbacks.rb:53:in `run_validations!'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.0/lib/active_model/validations.rb:179:in `valid?'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.5/lib/mongoid/validations.rb:78:in `valid?'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.0/lib/active_model/validations.rb:187:in `invalid?'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.5/lib/mongoid/persistence/insertion.rb:22:in `prepare'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/mongoid-3.0.5/lib/mongoid/persistence/operations/insert.rb:26:in `persist'
... 4 levels...
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/factory_girl-4.0.0/lib/factory_girl/evaluation.rb:15:in `[]'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/factory_girl-4.0.0/lib/factory_girl/evaluation.rb:15:in `create'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/factory_girl-4.0.0/lib/factory_girl/strategy/create.rb:12:in `block in result'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/factory_girl-4.0.0/lib/factory_girl/strategy/create.rb:9:in `tap'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/factory_girl-4.0.0/lib/factory_girl/strategy/create.rb:9:in `result'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/factory_girl-4.0.0/lib/factory_girl/factory.rb:42:in `run'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/factory_girl-4.0.0/lib/factory_girl/factory_runner.rb:23:in `block in run'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/factory_girl-4.0.0/lib/factory_girl/factory_runner.rb:22:in `run'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/factory_girl-4.0.0/lib/factory_girl/strategy_syntax_method_registrar.rb:19:in `block in define_singular_strategy_method'
    from (irb):17
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.0/lib/rails/commands/console.rb:47:in `start'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.0/lib/rails/commands/console.rb:8:in `start'
    from /Users/lee/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.0/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

# ruby-on-rails - 使用 Ruby / Rails 生成高级 PDF

> ID：12200682
> 
> 赞同：2
> 
> 时间：2012-08-30T15:44:45.413
> 
> 标签：ruby-on-rails, ruby, pdf, pdf-generation

我们有一个用 PHP 编写的文档管理系统，它使用[mPDF](http://www.mpdf1.com/mpdf/)生成相当复杂的 PDF。我们越来越喜欢它，而 mPDF 让我们能够：

*   使用 HTML/CSS 设置页面样式
*   制作 200 多页文档
*   支持整个文档中交替的纵向/横向页面
*   自动生成多级 PDF 书签
*   将第 3 方 PDF 导入文档

我们希望在 Ruby on Rails 上编写新版本的系统，为此我们需要一个 Ruby PDF Generation 替代方案。我们检查了**Prawn**、**PDFKit**、**Wicked PDF**和**Prince XML**，但是阅读他们的文档（通常只有一页），我不确定它们是否与 mPDF 一样功能齐全。他们似乎更倾向于“易于使用”而不是功能。

是否有与 mPDF 一样先进的 Ruby PDF 生成器，或者应该保持基于 PHP 的 PDF 生成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:09:31.840

mPDF 似乎是一个使用可移植 PDF 库和 html2pdf 转换器的复合工具。

很难将它们与您提到的库/工具进行比较。PrinceXML 应该类似于 html2pdf，但你也可以使用 wkhtml2pdf (PDFKit, WicketPDF)，它使用 webkit 并且是免费的。

将它们与将在 PHP 中转换为 FPDF 的虾相结合，应该可以满足您的一切需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:53:54.203

您可能想查看[Docmosis](http://www.docmosis.com)，它在示例代码中有一个 Ruby 示例，用于与他们的文档引擎对话。模板功能非常好，我已经看到它生成大型文档。我认为它不能拼接/导入 PDF，因此您必须将它与另一个可以进行组合的库一起使用。

请注意，我与生产 Docmosis 的公司合作。

# vbscript - 在 VBScript 中以当前用户身份运行 Outlook.EXE

> ID：12200685
> 
> 赞同：0
> 
> 时间：2012-08-30T15:45:07.487
> 
> 标签：vbscript, outlook.application

我问这个同事，只是为了确定它是否可能。

他有一个在系统帐户下运行的 vbscript 文件。部分脚本包含打开 Outlook 的调用，如下所示：

```
strCommand = WshShell.Run (Chr(34) & "C:\Program Files\Microsoft Office\Office14\Outlook.exe" & chr(34)) 
```

这可以按预期运行 Outlook，但他想要的只是该调用在登录用户的帐户下运行。

这可能吗？

谢谢马丁
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:18:34.527

No you can't, because you'll then need the password of the logged on user. Plus you'll need to find out what the logged on user's account is in the first place (although that is relatively easy).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:31:58.333

You can do this by using the [runas](http://en.wikipedia.org/wiki/Runas) command.

# .net - WCF net.TCP 自托管在 azure 模拟器 - Windows 7

> ID：12200686
> 
> 赞同：0
> 
> 时间：2012-08-30T15:45:11.183
> 
> 标签：.net, wcf, azure, net.tcp, self-hosting

我正在使用 Net.tcp Binding 开发 WCF 服务。该服务托管在辅助角色的 Run 方法上。

当部署到我的 Azure 帐户时，它可以正常工作，但在运行时会引发异常：

> 由于目标机器主动拒绝，无法建立连接

有时当我更改端口号时，它可以正常工作几次，但随后它再次拒绝连接，我不得不再次更改端口号......

我在windows防火墙中做了例外，也关闭了防火墙，但它不起作用。

这可能是对 Windows 7 的一些限制吗？任何帮助表示赞赏。谢谢

编辑：我正在添加客户端和服务器代码以进行澄清。

服务配置：

```
using (ServiceHost host = new ServiceHost(typeof(XMPPService)))
{
    string ip = RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["tcpinput"].IPEndpoint.Address.ToString();
    int tcpport = RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["tcpinput"].IPEndpoint.Port;
    int mexport = RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["mexinput"].IPEndpoint.Port;
    ServiceMetadataBehavior metadatabehavior = new ServiceMetadataBehavior();
    host.Description.Behaviors.Add(metadatabehavior);

    ServiceDebugBehavior behavior = host.Description.Behaviors.Find<ServiceDebugBehavior>();
    ServiceThrottlingBehavior tho = new ServiceThrottlingBehavior();
    tho.MaxConcurrentCalls = 10000;
    tho.MaxConcurrentInstances = 1000;
    tho.MaxConcurrentSessions = 1000;
    host.Description.Behaviors.Add(tho);

    if (behavior == null)
    {
        host.Description.Behaviors.Add(new ServiceDebugBehavior() { IncludeExceptionDetailInFaults = true });
    }
    else
    {
        if (!behavior.IncludeExceptionDetailInFaults)
        {
            behavior.IncludeExceptionDetailInFaults = true;
        }
    }

    Binding mexBinding = MetadataExchangeBindings.CreateMexTcpBinding();

    string mexlistenurl = string.Format("net.tcp://{0}:{1}/XMPPServiceMetaDataEndpoint", ip, mexport);
    string mexendpointurl = string.Format("net.tcp://{0}:{1}/XMPPServiceMetaDataEndpoint", ip, mexport);
    host.AddServiceEndpoint(typeof(IMetadataExchange), mexBinding, mexendpointurl, new Uri(mexlistenurl));
    NetTcpBinding tcpBinding = new NetTcpBinding(SecurityMode.None);
    tcpBinding.CloseTimeout = TimeSpan.FromMinutes(2);

    tcpBinding.ReceiveTimeout = TimeSpan.FromDays(23);
    tcpBinding.OpenTimeout = TimeSpan.FromMinutes(3);
    tcpBinding.SendTimeout = TimeSpan.FromMinutes(1);
    tcpBinding.PortSharingEnabled = true;
    tcpBinding.MaxConnections = 10000;
    tcpBinding.MaxConnections = 100;
    // tcpBinding.ListenBacklog = 1000000;
    tcpBinding.ReliableSession.InactivityTimeout = TimeSpan.FromSeconds(90);
    tcpBinding.ReliableSession.Enabled = true;

    // Add the endpoint for MyService
    string listenurl = string.Format("net.tcp://{0}:{1}/ServiceEndpoint", ip, tcpport);
    string endpointurl = string.Format("net.tcp://{0}:{1}/ServiceEndpoint", ip, tcpport);
    host.AddServiceEndpoint(typeof(IXMPPService), tcpBinding, endpointurl, new Uri(listenurl));

    host.Open();

    Thread.Sleep(Timeout.Infinite);
} 
```

客户：

```
AppService()  //private constructor
{
    client = new ServiceRef.ServiceClient();
} 
```

服务电话：

```
bool isAvailable = false;

try
{
    isAvailable=client.IsAvailable(_ixo.IMBot.IMEmail, _ixo.Operator.IMClients.First().IMEmail);
}
catch
{
    if (client.InnerChannel.State == System.ServiceModel.CommunicationState.Faulted)
    {
        client.InnerChannel.Abort();
        client = new ServiceRef.ServiceClient();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:50:14.143

“我发现了发生了什么：分配给工作角色的 IP 是动态的。有时是 127.255.0.0，有时是 127.255.0.1”

我想你犯了和我一样的错误。看这里：

[Azure Compute Emulator：是否可以控制单个实例的 IP？](https://stackoverflow.com/questions/11967902/azure-compute-emulator-is-it-possible-to-control-the-ip-of-individual-instances)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T22:41:21.067

由于您的问题是零星的并且更改端口可以工作一段时间，因此 net.tcp 端口共享可能会与服务发生冲突。因此，由于您在本地使用基于 net.tcp 的 WCF 应用程序（在 Web 或 Worker 角色中），因此请确保启用 net.tcp 端口共享服务以有效运行。

同样在您的服务启动代码中，您可以正确设置绑定到基本 IP 地址和端口，如下所示：

```
NetTcpBinding binding = new NetTcpBinding();
binding.PortSharingEnabled = true;
// Setup other binding properties here.

// Service_NAME is the Serice Name in this project
ServiceHost host = new ServiceHost(typeof(Service_NAME)); 

//Endpoint1 is the End point name you have setup in your Windows Azure Role property
string serviceIP = RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["Endpoint1"].IPEndpoint.Address.ToString();
string servicePort = RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["Endpoint1"].IPEndpoint.Port.ToString();
// 
string address = String.Format("net.tcp://{0}:{1}/SERVICE_METHOD*", serviceIP, servicePort);
host.AddServiceEndpoint(typeof(YOUR_SERVICE_TYPE), binding, address);
host.Open(); 
```

# c# - 在代码中找不到要加载的 ResourceDictionary

> ID：12200689
> 
> 赞同：0
> 
> 时间：2012-08-30T15:45:14.990
> 
> 标签：c#, wpf, uri, resourcedictionary

我正在尝试将 ResourceDictionary 对象加载到代码中，以便在尝试绑定之前检查它是否包含某个值，但由于某种原因它找不到资源。这可能是一些基本的东西，即有错误的构建操作或 URI，但有人能指出我正确的方向吗？

.cs 文件和 Images.xaml 资源字典都在同一个文件夹和命名空间中

这是失败的代码

```
ResourceDictionary resourceDictionary = new ResourceDictionary();
resourceDictionary.Source = new Uri("Images.xaml", UriKind.Relative); 
```

知道我做错了什么吗？收到错误信息

{“找不到资源‘images.xaml’。”}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:47:41.243

XAML 解析器可能会在转换 URI 时添加[`application`权限](http://msdn.microsoft.com/en-us/library/aa970069.aspx)，在代码中您可能需要自己添加。构建操作应该只是 的默认值`ResourceDictionaries`，不管它是什么。

# python - Python Pandas 如何将 groupby 操作结果分配回父数据框中的列？

> ID：12200693
> 
> 赞同：104
> 
> 时间：2012-08-30T15:45:26.410
> 
> 标签：python, group-by, dataframe, pandas

我在 IPython 中有以下数据框，其中每一行都是一只股票：

```
In [261]: bdata
Out[261]:
<class 'pandas.core.frame.DataFrame'>
Int64Index: 21210 entries, 0 to 21209
Data columns:
BloombergTicker      21206  non-null values
Company              21210  non-null values
Country              21210  non-null values
MarketCap            21210  non-null values
PriceReturn          21210  non-null values
SEDOL                21210  non-null values
yearmonth            21210  non-null values
dtypes: float64(2), int64(1), object(4) 
```

我想应用一个 groupby 操作来计算“年月”列中每个日期的所有事物的上限加权平均回报。

这按预期工作：

```
In [262]: bdata.groupby("yearmonth").apply(lambda x: (x["PriceReturn"]*x["MarketCap"]/x["MarketCap"].sum()).sum())
Out[262]:
yearmonth
201204      -0.109444
201205      -0.290546 
```

但随后我想将这些值“广播”回原始数据框中的索引，并将它们保存为日期匹配的常量列。

```
In [263]: dateGrps = bdata.groupby("yearmonth")

In [264]: dateGrps["MarketReturn"] = dateGrps.apply(lambda x: (x["PriceReturn"]*x["MarketCap"]/x["MarketCap"].sum()).sum())
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
/mnt/bos-devrnd04/usr6/home/espears/ws/Research/Projects/python-util/src/util/<ipython-input-264-4a68c8782426> in <module>()
----> 1 dateGrps["MarketReturn"] = dateGrps.apply(lambda x: (x["PriceReturn"]*x["MarketCap"]/x["MarketCap"].sum()).sum())

TypeError: 'DataFrameGroupBy' object does not support item assignment 
```

我意识到这个幼稚的任务不应该奏效。但是，将 groupby 操作的结果分配到父数据帧上的新列中的“正确”Pandas 习语是什么？

最后，我想要一个名为“MarketReturn”的列，而不是所有具有与 groupby 操作输出匹配的日期的索引的重复常量值。

实现此目的的一种方法如下：

```
marketRetsByDate  = dateGrps.apply(lambda x: (x["PriceReturn"]*x["MarketCap"]/x["MarketCap"].sum()).sum())

bdata["MarketReturn"] = np.repeat(np.NaN, len(bdata))

for elem in marketRetsByDate.index.values:
    bdata["MarketReturn"][bdata["yearmonth"]==elem] = marketRetsByDate.ix[elem] 
```

但这是缓慢、糟糕且不符合 Python 标准的。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-08-30T16:47:17.243

```
In [97]: df = pandas.DataFrame({'month': np.random.randint(0,11, 100), 'A': np.random.randn(100), 'B': np.random.randn(100)})

In [98]: df.join(df.groupby('month')['A'].sum(), on='month', rsuffix='_r')
Out[98]:
           A         B  month       A_r
0  -0.040710  0.182269      0 -0.331816
1  -0.004867  0.642243      1  2.448232
2  -0.162191  0.442338      4  2.045909
3  -0.979875  1.367018      5 -2.736399
4  -1.126198  0.338946      5 -2.736399
5  -0.992209 -1.343258      1  2.448232
6  -1.450310  0.021290      0 -0.331816
7  -0.675345 -1.359915      9  2.722156 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-09-08T17:33:00.997

虽然我仍在探索`apply`连接给出的片段的所有非常聪明的方法，但这是在 groupby 操作之后在父级中添加新列的另一种方法。

```
In [236]: df
Out[236]: 
  yearmonth    return
0    201202  0.922132
1    201202  0.220270
2    201202  0.228856
3    201203  0.277170
4    201203  0.747347

In [237]: def add_mkt_return(grp):
   .....:     grp['mkt_return'] = grp['return'].sum()
   .....:     return grp
   .....: 

In [238]: df.groupby('yearmonth').apply(add_mkt_return)
Out[238]: 
  yearmonth    return  mkt_return
0    201202  0.922132    1.371258
1    201202  0.220270    1.371258
2    201202  0.228856    1.371258
3    201203  0.277170    1.024516
4    201203  0.747347    1.024516 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2016-08-19T00:08:08.797

作为使用 groupby() 时的一般规则，如果您使用 .transform() 函数，pandas 将返回一个与原始长度相同的表。当您使用 .sum() 或 .first() 等其他函数时，pandas 将返回一个表，其中每一行都是一个组。

我不确定这如何与 apply 一起工作，但使用 transform 实现复杂的 lambda 函数可能相当棘手，因此我发现最有用的策略是创建我需要的变量，将它们放在原始数据集中，然后在那里执行我的操作。

如果我了解您首先要正确执行的操作，则可以计算每个组的总市值：

```
bdata['group_MarketCap'] = bdata.groupby('yearmonth')['MarketCap'].transform('sum') 
```

这将在您的原始数据中添加一个名为“group_MarketCap”的列，其中包含每个组的市值总和。然后你可以直接计算加权值：

```
bdata['weighted_P'] = bdata['PriceReturn'] * (bdata['MarketCap']/bdata['group_MarketCap']) 
```

最后，您将使用相同的变换函数计算每个组的加权平均值：

```
bdata['MarketReturn'] = bdata.groupby('yearmonth')['weighted_P'].transform('sum') 
```

我倾向于以这种方式构建我的变量。有时您可以将所有内容放在一个命令中，但这并不总是与 groupby() 一起使用，因为大多数时候 pandas 需要实例化新对象才能在整个数据集范围内对其进行操作（即，您不能如果两列尚不存在，则将两列加在一起）。

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-09-08T22:35:52.577

我可以建议`transform`方法（而不是聚合）吗？如果您在原始示例中使用它，它应该做您想做的事情（广播）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-12T11:57:45.797

我没有找到分配给原始数据框的方法。所以我只是存储组的结果并将它们连接起来。然后我们通过索引对连接的数据帧进行排序，得到原始顺序作为输入数据帧。这是一个示例代码：

```
In [10]: df = pd.DataFrame({'month': np.random.randint(0,11, 100), 'A': np.random.randn(100), 'B': np.random.randn(100)})

In [11]: df.head()
Out[11]:
   month         A         B
0      4 -0.029106 -0.904648
1      2 -2.724073  0.492751
2      7  0.732403  0.689530
3      2  0.487685 -1.017337
4      1  1.160858 -0.025232

In [12]: res = []

In [13]: for month, group in df.groupby('month'):
    ...:     new_df = pd.DataFrame({
    ...:         'A^2+B': group.A ** 2 + group.B,
    ...:         'A+B^2': group.A + group.B**2
    ...:     })
    ...:     res.append(new_df)
    ...:

In [14]: res = pd.concat(res).sort_index()

In [15]: res.head()
Out[15]:
      A^2+B     A+B^2
0 -0.903801  0.789282
1  7.913327 -2.481270
2  1.225944  1.207855
3 -0.779501  1.522660
4  1.322360  1.161495 
```

这种方法非常快速且可扩展。您可以在这里派生任何特征。

> ***注意：***如果数据框太大，`concat`可能会导致您的 MMO 错误。

# sql - SQL 将一行拆分为四行

> ID：12200697
> 
> 赞同：0
> 
> 时间：2012-08-30T15:45:31.067
> 
> 标签：sql

我有一个包含七列的 SQL 数据库，如下所示

```
version1; 1993; name; 233; 254; 291; 244
version1; 1994; name; 333; 354; 391; 344 
```

最后四列代表季度值，我想每行挑出一个值，所以每行提取到四行。此外，我想添加一个值（跟踪提供的季度的列）。希望上面的两个数据行报告为

```
version1; 1993; 1; name, 233
version1; 1993; 2; name; 254
version1; 1993; 3; name; 291
version1; 1993; 4; name; 244
version1; 1994; 1; name, 333
version1; 1994; 2; name; 354
version1; 1994; 3; name; 391
version1; 1994; 4; name; 344 
```

有什么简单的方法可以做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:00:42.970

您可以为此使用 a`UNION ALL`或 an `UNPIVOT`。`UNPIVOT`并非在所有 RDBMS 上都可用。

`UNION ALL`（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/85b81/1)）：

```
select col1, col2, col3, 1 quarter, col4
from yourtable
union all
select col1, col2, col3, 2 quarter, col5
from yourtable
union all
select col1, col2, col3, 3 quarter, col6
from yourtable
union all
select col1, col2, col3, 4 quarter, col7
from yourtable 
```

`UNPIVOT`（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/85b81/6)）：

```
select col1, col2, col3, 
  cast(replace(field, 'col', '') as int) - 3 quarter, 
value
from 
(
  select col1, col2, col3, col4, col5, col6, col7

  from yourtable
) u
unpivot
(
  value 
  for field in (col4, col5, col6, col7)
)u 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:50:30.657

这将为您提供所需格式的输出：

```
SELECT version, year, 1 as 'quarter', name, quarter1_value 
FROM myTable

UNION

SELECT version, year, 2 as 'quarter', name, quarter2_value 
FROM myTable

UNION

SELECT version, year, 3 as 'quarter', name, quarter3_value 
FROM myTable

UNION

SELECT version, year, 4 as 'quarter', name, quarter4_value 
FROM myTable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:56:26.730

您可以使用它`UNION`来达到您想要的结果。这适用于 MySQL 和 SQL Server。你可以`UNION`这样使用：

```
SELECT * FROM
(
SELECT version, year, 1 as 'quarter', name, quarter1_value FROM tt
UNION
SELECT version, year, 2 as 'quarter', name, quarter2_value FROM tt
UNION
SELECT version, year, 3 as 'quarter', name, quarter3_value FROM tt
UNION
SELECT version, year, 4 as 'quarter', name, quarter4_value FROM tt
) a
Order by Year, QUARTER 
```

# [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!2/709fc/4)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T15:50:04.117

```
SELECT version, year, name, '1', quarter_1 FROM table

UNION

SELECT version, year, name, '2', quarter_2 FROM table

UNION

... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T15:52:25.923

您可以对包含四个季度的表进行交叉连接，然后使用 case 语句选择适当的季度：

```
SELECT
  ORIG_TABLE.VERSION,
  ORIG_TABLE.YEAR,
  QUARTER_NAMES.Q_NAME,
  ORIG_TABLE.NAME,
  CASE QUARTER_NAMES.Q_NAME
    WHEN 1 
      THEN ORIG_TABLE.Q1_VALUE
    WHEN 2
      THEN ORIG_TABLE.Q2_VALUE
    WHEN 3
      THEN ORIG_TABLE.Q3_VALUE
    WHEN 4
      THEN ORIG_TABLE.Q4_VALUE
 END Q_VALUE
FROM
  ORIG_TABLE
    CROSS JOIN 
    (
       SELECT 1 Q_NAME
       UNION SELECT 2 Q_NAME
       UNION SELECT 3 Q_NAME
       UNION SELECT 4 Q_NAME
    ) QUARTER_NAMES 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T15:53:10.647

您可以创建一个 sql 视图。使用 sql split 函数，它根据索引返回一行。您可以从链接[http://geekswithblogs.net/AngelEyes/archive/2007/04/12/111504.aspx获得一些帮助](http://geekswithblogs.net/AngelEyes/archive/2007/04/12/111504.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-30T15:57:57.620

没有提供 DBMS，所以我将抛出几个特定于 SQL-Server 的数据库以防万一。

```
-- SAMPLE DATA
DECLARE @T TABLE (Version VARCHAR(15), Year INT, Name VARCHAR(5), Col1 INT, Col2 INT, Col3 INT, Col4 INT)
INSERT @T VALUES
    ('version1', 1993, 'name', 233, 254, 291, 244),
    ('version1', 1994, 'name', 333, 354, 391, 344)

-- CROSS APPLY VALUES
SELECT  Version, Year, RowNum, Name, Value
FROM    @T
        CROSS APPLY 
        (   VALUES 
                (Col1, 1), 
                (Col2, 2), 
                (Col3, 3), 
                (Col4, 4)
        ) t (Value, RowNum)

-- UNPIVOT
SELECT  Version, Year, REPLACE(RowNum, 'Col', '') [RowNum], Name, Value
FROM    @T
        UNPIVOT
        (   Value
            FOR RowNum IN ([Col1], [Col2], [Col3], [Col4])
        ) upvt 
```

# assembly - 是否可以使用 SSE 和 SSE2 制作 128 位宽的整数？

> ID：12200698
> 
> 赞同：11
> 
> 时间：2012-08-30T15:45:41.167
> 
> 标签：assembly, sse, sse2

我希望进一步了解 SSE2 的功能，并想知道是否可以制作一个支持加法、减法、异或和乘法的 128 位宽整数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-07T13:20:12.773

SIMD 旨在同时处理多个小值，因此不会有任何结转到更高的单元，您必须手动执行此操作。在 SSE2 中没有进位标志，但您可以像这样轻松`carry = sum < a`计算`carry = sum < b`进[位](https://stackoverflow.com/a/10571998/995714)。更糟糕的是，SSE2 也没有 64 位比较，因此您必须使用类似[这里的解决方法](https://stackoverflow.com/a/10225458/995714)

这是基于上述想法的未经测试、未经优化的 C 代码：

```
inline bool lessthan(__m128i a, __m128i b){
    a = _mm_xor_si128(a, _mm_set1_epi32(0x80000000));
    b = _mm_xor_si128(b, _mm_set1_epi32(0x80000000));
    __m128i t = _mm_cmplt_epi32(a, b);
    __m128i u = _mm_cmpgt_epi32(a, b);
    __m128i z = _mm_or_si128(t, _mm_shuffle_epi32(t, 177));
    z = _mm_andnot_si128(_mm_shuffle_epi32(u, 245),z);
    return _mm_cvtsi128_si32(z) & 1;
}

inline __m128i addi128(__m128i a, __m128i b)
{
    __m128i sum = _mm_add_epi64(a, b);
    __m128i mask = _mm_set1_epi64(0x8000000000000000);    
    if (lessthan(_mm_xor_si128(mask, sum), _mm_xor_si128(mask, a)))
    {
        __m128i ONE = _mm_setr_epi64(0, 1);
        sum = _mm_add_epi64(sum, ONE);
    }

    return sum;
} 
```

如您所见，代码需要更多指令，即使经过优化，它仍可能比 x86_64 中的简单 2 ADD/ADC 对（或 x86 中的 4 条指令）长得多

* * *

但是，如果您要**并行添加多个 128 位整数，** SSE2 会有所帮助。但是，您需要正确排列值的高位和低位部分，以便我们可以一次添加所有低位部分，一次添加所有高位部分

也可以看看

*   [实用的 BigNum AVX/SSE 可能吗？](https://stackoverflow.com/q/27923192/995714)
*   [长整数例程可以从 SSE 中受益吗？](https://stackoverflow.com/q/8866973/995714)

# javascript - 使用 jQuery 方法扩展 Zepto.js？滚动顶部（）

> ID：12200702
> 
> 赞同：4
> 
> 时间：2012-08-30T15:45:51.963
> 
> 标签：javascript, jquery, extend, zepto

我在当前项目中使用 Zepto.js。Zepto 不支持`scrollTop()`jQuery 在其中的方法。

是否可以扩展 Zepto 以使其也可以使用`scrollTop()`？

**更新：**我想要的只是创建我自己的小而简单的“动画滚动”功能，就像我以前在 jQuery 中使用的那样。[请参阅此处](http://jsfiddle.net/DVDLM)的工作示例。`scrollTop()`但是，如果没有Zepto.js 中可用的功能，我不知道如何使相同的功能工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T16:18:18.187

`scrollTop`使用 Zepto 的`.animate`方法无法设置动画，因为它使用 CSS 过渡。

尝试这样的事情：http: [//jsfiddle.net/DVDLM/5/](http://jsfiddle.net/DVDLM/5/)

```
function scroll(scrollTo, time) {
    var scrollFrom = parseInt(document.body.scrollTop),
        i = 0,
        runEvery = 5; // run every 5ms

    scrollTo = parseInt(scrollTo);
    time /= runEvery;

    var interval = setInterval(function () {
        i++;

        document.body.scrollTop = (scrollTo - scrollFrom) / time * i + scrollFrom;

        if (i >= time) {
            clearInterval(interval);
        }
    }, runEvery);
}

$('#trigger').click(function () {
    scroll('600px', 500);
}); 
```

编辑：我添加了一个`runEvery`变量，它指定间隔应该多久运行一次。此值越低，动画越流畅，但可能会影响性能。

EDIT2：我想我误读了这个问题。以下是新问题的答案：

```
$.zepto.scrollTop = function (pixels) {
    this[0].scrollTop = pixels;
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-01T16:00:14.773

不想让没人工作，所以这是 [从 jQuery 移植到 Zepto的简短答案](http://blog.pamelafox.org/2011/11/porting-from-jquery-to-zepto.html#zeptogist)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:56:59.723

使用 DOM 原生 scrollTop 属性：

$('#el')[0].scrollTop = 0;

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T10:18:22.503

```
(function ($) {

    ['width', 'height'].forEach(function(dimension) {
        var offset, Dimension = dimension.replace(/./, function(m) { return m[0].toUpperCase() });
        $.fn['outer' + Dimension] = function(margin) {
            var elem = this;
            if (elem) {
                var size = elem[dimension]();
                var sides = {'width': ['left', 'right'], 'height': ['top', 'bottom']};
                sides[dimension].forEach(function(side) {
                    if (margin) size += parseInt(elem.css('margin-' + side), 10);
                });
                return size;
            }
            else {
                return null;
            }
        };
    });

    ["Left", "Top"].forEach(function(name, i) {
        var method = "scroll" + name;

        function isWindow( obj ) {
            return obj && typeof obj === "object" && "setInterval" in obj;
        }

        function getWindow( elem ) {
            return isWindow( elem ) ? elem : elem.nodeType === 9 ? elem.defaultView || elem.parentWindow : false;
        }

        $.fn[method] = function( val ) {
            var elem, win;
            if (val === undefined) {
                elem = this[0];
                if (!elem) {
                    return null;
                }
                win = getWindow(elem);
                // Return the scroll offset
                return win ? ("pageXOffset" in win) ? win[i ? "pageYOffset" : "pageXOffset"] :
                    win.document.documentElement[method] ||
                    win.document.body[method] :
                    elem[method];
            }

            // Set the scroll offset
            this.each(function() {
                win = getWindow(this);
                if (win) {
                    var xCoord = !i ? val : $(win).scrollLeft();
                    var yCoord = i ? val : $(win).scrollTop();
                    win.scrollTo(xCoord, yCoord);
                }
                else {
                    this[method] = val;
                }
            });
        }
    });

})(Zepto); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T20:46:55.303

答案很简单，Zepto 不使用超时样式动画，它使用 css3，所以这里是滚动功能的基本实现：

HTML：动画滚动 Hello You ​</p>

CSS：#page { 高度：5000px; 位置：相对；} #element { 位置：绝对；顶部：600px }

JS：

```
function scroll(selector, animate, viewOffset) {
    $('body').scrollToBottom (600, '800');
}

$('#trigger').click(function(e) {
   e.preventDefault();
   scroll( $('#element'), true, 30 );
});
$.fn.scrollToBottom = function(scrollHeight ,duration) {
    var $el = this;
    var el  = $el[0];
    var startPosition = el.scrollTop;
    var delta = scrollHeight  - startPosition;

    var startTime = Date.now();

    function scroll() {
        var fraction = Math.min(1, (Date.now() - startTime) / duration);

        el.scrollTop = delta * fraction + startPosition;

        if(fraction < 1) {
            setTimeout(scroll, 10);
        }
    }
    scroll();
};
​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-13T02:46:43.373

请注意，Zeptos 1.0 版现在支持 scrollTop()。请参阅文档：http: [//zeptojs.com/#scrollTop](http://zeptojs.com/#scrollTop)

# tinymce - TinyMCE 添加行 区域

> ID：12200703
> 
> 赞同：1
> 
> 时间：2012-08-30T15:45:55.817
> 
> 标签：tinymce

我在 GAE 应用程序（python）中使用带有 codehighlighting 插件的 TinyMCE 编辑器当我保存我的表单 TinyMCE 时，在 [pre] 区域中添加一行。如果我返回编辑并保存表单，TinyMCE 会将新的空白行添加到块中。示例： 第一个：

```
def getTags(cls):
  tag = Tag()
  return ProcessTag.getTags() 
```

第二次：

```
def getTags(cls):

  tag = Tag()

  return ProcessTag.getTags() 
```

第三次：

```
def getTags(cls):

  tag = Tag()

  return ProcessTag.getTags() 
```

我该如何解决？

# javascript - 使用 jquery 添加的图像未在 webkit 浏览器中显示

> ID：12200706
> 
> 赞同：4
> 
> 时间：2012-08-30T15:46:00.013
> 
> 标签：javascript, jquery, html, webkit

我用 jquery 创建了一个图像节点，并希望将其显示为原始版本之上的更大版本。
复制的图像不会显示在 Chrome 和 Safari 中，但可以在 Internet Explorer 和 Firefox 中显示。控制台不报告错误。检查器显示具有所有正确 css 属性的克隆图像元素，但为元素提供 0 x 0 像素大小。

我没有看到任何暗示 0x0 大小的 CSS 规则。

这是说明情况的屏幕截图 ![检查员的情况说明](../Images/8f92391ae9ed0b694b63fa53e41c82fd.png) （[http://i.stack.imgur.com/AhiPf.png](https://i.stack.imgur.com/AhiPf.png)）

这是演示行为的链接，请尝试使用 firefox 和 chrome 单击图像： [download.toastlab.ch/segtest](http://download.toastlab.ch/segtest)

* * *

编辑：

创建元素的 Javascript 代码：

```
$('.streamcontent').on('click', 'img.clickable', function () {
    var img = new Image();
    img.src = $(this).attr('src');
    var w = img.width,
        h = img.height;
    img = $(img).addClass('bigger');

    var tw = $(this).width();
    var th = $(this).height();

    var pos = $(this).position();
    var center = {
        top: pos.top + th / 2,
        left: pos.left + tw / 2
    };

    img.css({
        position: 'absolute',
        top: pos.top,
        left: pos.left,
        width: tw,
        height: th,
        opacity: 0
    }).animate({
        top: center.top - h / 2,
        left: center.left - w / 2,
        height: h,
        width: w,
        opacity: 1
    }, 300, function () {
        $('body').one('click', function () {
            img.animate({
                top: pos.top,
                left: pos.left,
                width: tw,
                height: th,
                opacity: 0
            }, function () {
                img.remove();
            });
        });
    });
    $(this).parent().append(img);

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:18:31.273

找到了。

有一个 CSS 规则指定了最大尺寸（使用`max-width`and `max-height`），我需要覆盖该规则以允许更大的图像......更大。

为此，我用一个高得离谱的值（999999999px）覆盖了最大宽度和高度。似乎该值使“webkit 渲染器图像大小计算”*崩溃*，使图像大小为 0 x 0。将值设置为 9999px 解决了问题

我不知道这是否符合 webkit 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:11:30.853

在你的 JS 代码中

```
$('.streamcontent').on('click', 'img.clickable', function() {
    var img = new Image();
    img.src = $(this).attr('src');
    var w = img.width, h = img.height;
    img = $(img).addClass('bigger');
    ... 
```

我认为你必须改变

```
var w = img.width, h = img.height; 
```

经过

```
var w = img.width(), h = img.height(); 
```

因为宽度和高度是对象图像中的函数，但我不确定。

# xcode - Cocos2d 过渡的星状收缩效果

> ID：12200709
> 
> 赞同：1
> 
> 时间：2012-08-30T15:46:03.757
> 
> 标签：xcode, cocos2d-iphone

我正在 cocos2d 中开发一个游戏，在其中我使用了一些过渡效果来替换场景，例如`[[CCDirector sharedDirector] replaceScene:[CCTransitionCrossFade transitionWithDuration:0.5 scene:[MyScene node]]];`.

但在一个阶段，我想展示一个像[这个例子](http://screencast.com/t/EB9Zq2wtis)一样的过渡效果。那是一些类似星星的缩小效果来代替场景。我尝试了许多过渡效果，但没有一个与我上面提到的效果相匹配。是否有默认的过渡效果来实现这一点，还是我需要自定义它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:01:55.977

我想，你可以简单地使用白色纹理，中间有透明的星星。然后只需缩放它以显示/隐藏您的场景。

# c++ - 如何追捕内存泄漏 valgrind 说不存在？

> ID：12200714
> 
> 赞同：8
> 
> 时间：2012-08-30T15:46:18.703
> 
> 标签：c++, memory-leaks, valgrind, memory-leak-detector

我有一个程序，它接受来自套接字的数据，进行一些质量控制并对其进行其他条件调整，然后将其写入命名管道。我在上面运行了 valgrind 并修复了所有最初存在的内存泄漏。然后，我在一个系统上创建了一个“演示”环境，其中运行了 32 个该程序的实例，每个实例都被提供独特的数据，并且每个都输出到它自己的管道。我们对其进行了测试，一切看起来都很好。然后我尝试通过将数据发送速率提高到荒谬的速率来对其进行压力测试，一开始事情看起来还不错……但是我的程序一直在消耗越来越多的内存，直到我没有剩余资源为止。

我转向 valgrind 并运行完全相同的设置，除了每个程序在 valgrind 中运行时使用泄漏检查 = full。发生了一些奇怪的事情。首先，内存确实泄漏了，但只是到了每个程序都消耗了我 0.9% 的内存的程度（以前最大的内存占用了我 6% 的内存）。随着 valgrind 的运行，程序的 CPU 成本猛增，我现在处于 100% cpu 且平均负载很大，因此可能缺乏可用 CPU 导致程序运行缓慢，以至于泄漏需要很长时间才能显现. 当我尝试停止这些程序时，valgrind 没有显示直接内存泄漏，它显示了一些潜在的内存泄漏，但我检查了它们，我认为它们中的任何一个都不代表真正的内存泄漏；除此之外，当程序消耗超过 100 MB 时，可能的内存泄漏仅显示为几千字节。valgrind 报告的可达（非泄漏）内存也在 KB 范围内，因此 valgrind 似乎认为我的程序正在消耗 Top 所说的它们正在使用的内存的一小部分。

我已经进行了一些其他测试并得到了奇怪的结果。一个程序，即使以我原来的内存泄漏检测速度的三倍运行，似乎从来没有消耗超过 0.9% 的内存，两个程序分别泄漏了 1.9% 和 1.3% 的内存，但没有更多，就好像泄漏的内存量及其泄漏率在某种程度上取决于我的程序一次运行的实例数；这是没有意义的，每个实例都应该 100% 独立于其他实例。

我还发现，如果我运行 32 个实例而只有一个实例在 valgrind 中运行，则 valgrinded 实例（如果我说是的话，那就是一个词！）会泄漏内存，但速度比在 valgrind 之外运行的实例要慢。valgrind 实例仍然会说我没有直接泄漏，并且报告的内存消耗比 Top 显示的要少得多。

对于可能导致此结果的原因，以及为什么 valgrind 拒绝了解内存泄漏，我感到很困惑。我认为它可能是一个外部库，但我并没有真正使用任何外部库；只是基本的 C++ 函数/对象。我还认为可能是写入输出管道的数据快速导致缓冲区无限增长，但是 1）应该有一个这样的缓冲区可以增长的上限，以及 2）一旦内存泄漏，如果我删除数据输入速率为零，内存保持消耗，而不是慢慢下降到合理的数量。

谁能给我一个提示我应该从这里看哪里？我完全不知道为什么内存会这样。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:27:31.590

您应该首先寻找软泄漏。当一些静态或单例逐渐增加一些缓冲区或容器并将垃圾收集到其中时，就会发生这种情况。从技术上讲，它不是泄漏，但它的影响同样糟糕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T23:00:33.127

这听起来像是我最近遇到的一个问题。

如果您的程序接受数据并在内部没有任何限制地对其进行缓冲，那么它的读取和缓冲速度可能比输出数据的速度要快。在这种情况下，内存使用将继续无限制地增加。

您运行的程序实例越多，每个实例的运行速度就越慢，缓冲区增加的速度就越快。

这可能是也可能不是您的问题，但如果没有更多信息，这是我能做的最好的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T21:11:03.090

我可以建议您尝试一下 MemoryScape 吗？这个工具在内存泄漏检测方面做得很好。它不是免费的，但考虑到所花费的时间和精力，值得一试。

# python-2.7 - 检查 500 错误以绕过

> ID：12200715
> 
> 赞同：0
> 
> 时间：2012-08-30T15:46:19.397
> 
> 标签：python-2.7, web-scraping, scrapy, scrapyd

我使用 Scrapy 框架来抓取数据。如果遇到 500 错误，我的爬虫将被中断。所以我需要在解析网页内容之前检查一个可用的链接。
有什么方法可以解决我的问题吗？
非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:52:54.363

**如果 url 存在，**您可以使用 urllib 的 getcode() 方法来检查它：

```
import urllib
import sys

webFile = urllib.urlopen('http://www.some.url/some/file')
returnCode = webFile.getCode()

if returnCode == 500:
  sys.exit()

# in other case do something. 
```

# coldfusion - 在 ColdFusion 的每个页面请求中包含所有 UDF 的安全性或性能风险是什么？

> ID：12200727
> 
> 赞同：0
> 
> 时间：2012-08-30T15:47:05.597
> 
> 标签：coldfusion, cfc

我目前有我的模型和控制器cfc，通过代理组件扩展了一个cfc，它具有我的所有功能。这使得所有这些 UDF 在应用程序中随处可用。这样做是否存在安全或性能风险？我以面向对象的方式使用我的模型。像这样包含这些函数也使它们成为每个对象的一部分。具体来说，在单个页面请求中创建大量对象时会导致性能问题吗？

我在这个框架中使用 CF 9 和 10。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:59:15.743

我认为这与其说是安全/性能问题，不如说是……“坏”问题。;) CF，尤其是在 9 和 10，有非常快的表现，尤其是在第一击之后。我记得做了一些测试，包括 1000 个左右的 UDF，在最初的命中之后，它几乎是瞬时的。话虽如此，仅仅因为你*可以*做到并不意味着你*应该*这样做。Application.cfc 专门用于管理您的应用程序及其行为方式。您的模型/服务/控制器 CFC 不应*扩展*它们。扩展的正常规则是“A 是否通过了 B 的‘Is A’测试？” 并且您的 CFC 绝对不是“Is A”Application.cfc 类型。

我建议改为为您的实用程序函数创建一个 CFC。哎呀，称之为util.cfc。然后，如果您的模型或其他 CFC 需要这些功能，请通过 setter 将它们注入（像 ColdSpring 这样的东西可以使这更容易）。

# javascript - 带有通配符的姓氏 Reg 表达式

> ID：12200732
> 
> 赞同：1
> 
> 时间：2012-08-30T15:47:28.977
> 
> 标签：javascript, regex

我正在尝试使用允许字符、撇号、连字符和通配符（* 和？）的 reg 表达式验证文本框。

我发现`^[\p{L} \.'\-]+$`哪个应该允许字符、撇号和连字符。我还需要添加什么来接受通配符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:10:49.633

正则表达式验证：

```
[A-Za-z'\-*?]+ 
```

在方括号内？和 * 不是特殊字符。

如果您需要匹配整个字符串，请执行

```
^[A-Za-z'\-*?]+$ 
```

# vb.net - 为什么在使用 Range.AddComment 时出现 HRESULT 0x800A03EC 异常

> ID：12200742
> 
> 赞同：0
> 
> 时间：2012-08-30T15:47:50.077
> 
> 标签：vb.net, excel, runtime-error

我似乎无法在 Range.AddComment 的上下文中找到有关此错误的问题

我正在使用遍历选定行并向每个单元格添加注释的代码。有时它会在已经包含评论的单元格中写评论。我不确定我是否收到此错误，因为我在已包含评论的单元格上使用 .AddComment，或者是否出于与我的范围相关的其他原因。

```
 If IsDBNull(pobjComment) Then
                mwksSheet.Range(strExcelCol(pintCol) & (pintRow + 1)).AddComment(Nothing)
 Else
                mwksSheet.Range(strExcelCol(pintCol) & (pintRow + 1)).AddComment(pobjComment)
 End If 
```

pobjComment 是一个通用对象；在我使用它的情况下，我将一个来自 DataColumn 的扩展属性的字符串值传递给它。

当 pobjComment 实际上是某些东西时会发生错误。如果问题是在其他评论上添加评论..那么我想知道是否应该先尝试删除任何现有评论，或者在尝试添加之前检查值是否相同...

# jquery - 当 CSS 不是一个选项时使用 jQuery 进行媒体查询

> ID：12200750
> 
> 赞同：4
> 
> 时间：2012-08-30T15:48:09.043
> 
> 标签：jquery, css, resize, window, media-queries

**编辑：**

我为此做了一个 JSFiddle ......但我认为它不能正常工作，因为 (window).resize(); 我没怎么玩过 JSFiddle，所以我觉得我做错了。

[http://jsfiddle.net/beefchimi/uhw3D/25/](http://jsfiddle.net/beefchimi/uhw3D/25/)

如果有人可以帮助解决这个问题，我将**不胜感激**。

* * *

所以我一直在努力寻找用 jQuery 重现 CSS 媒体查询的绝对最佳方法。我几乎只使用 CSS 媒体查询，但我现在正在处理一个问题，我需要能够动态计算一个值并将其应用于窗口调整大小的元素。

使用下面的代码，我可以在每 1 个像素增量处检查窗口宽度。首先，我想知道这是否具有良好的性能，是否有办法只在我们从断点移动到断点（480 / 768 / 1024）而不是沿途的每个像素时执行函数。

**然而，我的问题是：**

我正在检查当前布局中有多少元素的 CSS 属性为 left: 0; 然后我将元素的数量乘以 240px 并将其应用为容器的高度值。

低于 720 像素，此元素的高度需要为“自动”。这工作正常。但是，如果我从 320 像素开始上升，并且遇到了第一个断点（720 像素），我就会将正确的高度应用到我的容器上，但是一旦我到达高于该值的断点（960 像素），高度就永远不会更新。我想知道我做错了什么导致无法计算和应用新值。

```
$(document).ready(function() {

    function checkWidth() {

        var windowSize = $(window).width();
        var elementCount = $('#casestudy-content article').filter(function() { return $(this).position().left === 0 }).length;

        if ( windowSize >= 720 && windowSize <= 959 ) {

            console.log("Greater than 720 and less than 960");

            console.log(elementCount);

            $('#casestudy-content').css('height', elementCount * 240 + 'px');

        }

        else if ( windowSize >= 960 && windowSize <= 1199 ) {

            console.log("Greater than 960 and less than 1200");

            console.log(elementCount);

            $('#casestudy-content').css('height', elementCount * 240 + 'px');

        }

        else if ( windowSize >= 1200 ) {

            console.log("Greater than or equal to 1200");

            console.log(elementCount);

            $('#casestudy-content').css('height', elementCount * 240 + 'px');

        }

        else {

            $('#casestudy-content').css('height', 'auto');

        }

    }

    // Execute on load
    checkWidth();

    // Bind event listener
    $(window).resize(checkWidth);

}); 
```

任何帮助将不胜感激。

**编辑**

所以我发现，如果我删除这些元素上的 CSS 过渡，我的功能就可以完美运行。

有趣的是，我的 console.log(elementCount) 在我到达断点的那一刻报告了正确的值，所以我认为这应该意味着我不必担心转换时间，但显然如此。我怎样才能延迟这个功能，以便我可以保持过渡？如果我的转换需要 0.2 秒，我需要延迟我的函数触发这么多。对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T19:58:37.450

**（当我们从断点移动到断点时执行函数）**

在您当前所在的断点处保存到变量中：

```
var breakpoint;
function checkWidth() {
{...}
if ( windowSize >= 720 && windowSize <= 959 && breakpoint != 720) {
        breakpoint = 720;
} else if ( windowSize >= 960 && windowSize <= 1199 && breakpoint != 960) {
        breakpoint = 960;
} etc.. 
```

[http://jsfiddle.net/uhw3D/47/](http://jsfiddle.net/uhw3D/47/)

**（但是一旦我在上面的断点（960px），高度永远不会更新）**

当然，`section`当窗口大小大于 500 像素时高度不会改变，因为只有 3 行（100 像素 x 3 = 300 像素高度），并且最大宽度`section`始终为 500 像素。（每行 5 个盒子），你有 14 个盒子。*做计算。*

**（我怎么能去延迟这个功能）**

我不知道你为什么需要这个，但你可以使用`setTimeout()`

你可以这样做：

```
$(window).resize(function() {
    setTimeout(checkWidth, 200); // 1000 milliseconds = 1 second
 }); 
```

在窗口调整大小时，该功能将在 0.2 秒后触发

我希望我确实理解你的意思，否则请解释更多你想要做什么。

# imagemagick - Imagemagick 从每个边缘切掉 30 像素（可变宽度和高度）

> ID：12200763
> 
> 赞同：3
> 
> 时间：2012-08-30T15:49:17.393
> 
> 标签：imagemagick, imagick

我需要从每边切掉 30 像素（左上右下）。我也试过了`crop`，`-chop 30x30`但这似乎只在一方面起作用；

```
convert -verbose -density 150 -trim pdfs/test/test.pdf -quality 80  -chop 30x30 images/agents/test/temp/test.jpg 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:51:34.160

如果它在维度的两侧都是偶数，那么你想要的命令是[`-shave`](http://www.imagemagick.org/Usage/crop/#shave)

```
convert -verbose -density 150 -trim pdfs/test/test.pdf -quality 80 -shave 30x30 images/agents/test/temp/test.jpg 
```

# expressionengine - 通过 http 和 https 访问 ExpressionEngine

> ID：12200765
> 
> 赞同：2
> 
> 时间：2012-08-30T15:49:21.320
> 
> 标签：expressionengine

我们有一个通过 http 和 https 访问的 ExpressionEngine 站点。我们的用户在通过 https 访问时会收到来自 IE 的安全警告，因为某些资产的访问不安全（在这种情况下，此处引用了 CSS 和图像）。

当设置“常规配置 -> 站点根目录的 URL”包含 http:// 协议标识符时会发生这种情况（该字段为空白，仅设置为站点域 [example.com]，或设置为没有协议[//example.com/]，我们遇到其他问题，所以这些不是真正的选择）。当然，有问题的 URL 是在模板中使用 {path=} 或 {stylesheet=} 生成的。

有没有一种通过与页面相同的协议交付所有资产的好方法？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:17:34.000

这是因为 EE 变量默认不会检测或使用 https，所以您必须在代码中设置它们。最简单的方法是使用附加组件：

[http://devot-ee.com/add-ons/https-support](http://devot-ee.com/add-ons/https-support)

[http://devot-ee.com/add-ons/dm-force-ssl](http://devot-ee.com/add-ons/dm-force-ssl)

[http://devot-ee.com/add-ons/force-ssl](http://devot-ee.com/add-ons/force-ssl)（商业）

（没有特别的顺序）我没有使用任何这些，所以不能推荐一个特定的，因为我使用我自己的插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T03:56:54.777

您可以使用 PHP 检测协议并在`system/expressionengine/config/config.php`文件中动态设置它。我使用这样的东西：

```
$protocol = (isset($_SERVER["HTTPS"]) && $_SERVER["HTTPS"] == "on") ? "https://" : "http://";
$base_url = $protocol . $_SERVER['HTTP_HOST'];

$config['base_url'] = $base_url . "/"; 
```

您可以在`config.php`. 但是`$config['site_url']`是什么影响`{path=""}`和`{stylesheet}`标签的输出。

有关详细信息，请参阅[NSM 的 Config Bootstrap 文件](http://ee-garage.com/nsm-config-bootstrap)或文章[为多个服务器配置 ExpressionEngine](http://old.kennwilson.com/2007/11/configuring-expression-engine-for-multiple-servers)。对于您可以设置的所有路径`config.php`，请参阅[EE2 Config Overrides](http://expressionengine.com/wiki/EE_2_Config_Overrides)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T02:16:36.630

是否需要包含根 URL？很多时候，我会将站点的根 URL 设置为“/”。

另一种选择是手动包含这些资产（不使用路径或样式助手）。

如果 URL 是真实的，它将自动继承当前协议。

# python - 用于检查（负）数组索引有效性的 Pythonic 习惯用法

> ID：12200769
> 
> 赞同：1
> 
> 时间：2012-08-30T15:49:28.513
> 
> 标签：python

我的函数将字符串拆分为行，检查第 index 行，并返回两个值之一。这是一个简化版本：

```
def f(text, index):
   rows = text.split('\n')
   row = rows[index] # <-- IndexError thrown here.
   if row_meets_some_condition:
      return "Yes"
   else:
      return "No" 
```

调用者有时会传递一个负值`index`（当他想使用基于文件结尾的索引时），这工作正常，除非`text`行太少，在这种情况下我会得到`IndexError`一个`row = rows[index]`。

除了捕获错误之外，是否有一种惯用的方法来检查是否`index`是合法索引？`rows`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T15:52:23.663

在 Python 中捕捉 an`IndexError`是非常惯用的。如果您无法预见您的输入有多少行，您可以`rows`在访问列表之前检查长度，或者只捕获`IndexError`. 那我会选择第二个选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T15:52:17.637

捕捉`IndexError`是惯用的方式。如果这对你来说很难看，你可以把它分解成一个单独的函数。

```
def validIndex(container, index):
     try:
         container[index]
     except IndexError:
         return False
     else:
         return True 
```

当然，另一种方法是`if`声明：

```
if index < 0 and index < -len(rows):
     # invalid index 
```

最后一种选择是让索引操作失败并 raise `IndexError`，将确保索引有效（或处理错误）的责任交给调用者。如果调用者传递给你一段文本和一个行索引，那么如果他们传递了一个无效的索引就得到一个异常是完全合理的。

# java - 防止java中的浮点错误

> ID：12200773
> 
> 赞同：1
> 
> 时间：2012-08-30T15:49:43.400
> 
> 标签：java, android, opengl-es, floating-point

随着游戏中渲染的帧数增加超过一定限度，以下类型的矩阵变换不会获得单位矩阵：

```
Matrix.setIdentity(ModelMatrix);
Matrix.translate(ModelMatrix, xmov,ymov,0);
Matrix.translate(ModelMatrix, -xmov,-ymov,0); 
```

有一些小值被添加到列中（因为 java 中的浮点错误），并且在矩阵中逐渐变大（不再是身份）并导致奇怪的翻译。下面是代码：

```
 ...// _ModelMatrixNozzle is set as identity matrix like all other 4x4 matrices in my app in onSurfaceChanged method
    ...// this code is part of update() method, called by onDrawFrame() in renderer thread
    GLES20Renderer._uNozzleCentreMatrix[0] = GLES20Renderer._ModelMatrixNozzle[0] * GLES20Renderer._uNozzleCentre[0] + GLES20Renderer._ModelMatrixNozzle[4] * GLES20Renderer._uNozzleCentre[1] + GLES20Renderer._ModelMatrixNozzle[8] * GLES20Renderer._uNozzleCentre[2] + GLES20Renderer._ModelMatrixNozzle[12] * GLES20Renderer._uNozzleCentre[3];
    GLES20Renderer._uNozzleCentreMatrix[1] = GLES20Renderer._ModelMatrixNozzle[1] * GLES20Renderer._uNozzleCentre[0] + GLES20Renderer._ModelMatrixNozzle[5] * GLES20Renderer._uNozzleCentre[1] + GLES20Renderer._ModelMatrixNozzle[9] * GLES20Renderer._uNozzleCentre[2] + GLES20Renderer._ModelMatrixNozzle[13] * GLES20Renderer._uNozzleCentre[3];
    GLES20Renderer._uNozzleCentreMatrix[2] = 0;
    GLES20Renderer._uNozzleCentreMatrix[3] = 1;
    if(Math.abs(ds) > 0) {
        /*transformations will be added here if the errors are solved*/
    } else {
        if(GLES20Renderer._zAngle >= 360) {
            GLES20Renderer._zAngle = GLES20Renderer._zAngle - 360;
        }
        if(GLES20Renderer._zAngle <= -360) {
            GLES20Renderer._zAngle = GLES20Renderer._zAngle + 360;
        }
        Matrix.translateM(GLES20Renderer._ModelMatrixNozzle, 0, GLES20Renderer._uNozzleCentreMatrix[0], GLES20Renderer._uNozzleCentreMatrix[1], 0);
        Matrix.rotateM(GLES20Renderer._ModelMatrixNozzle, 0, GLES20Renderer._zAngle, 0, 0, 1);
        //Matrix.rotateM(GLES20Renderer._ModelMatrixNozzle, 0, -GLES20Renderer._lastZAngle, 0, 0, 1);
        Matrix.translateM(GLES20Renderer._ModelMatrixNozzle, 0, -GLES20Renderer._uNozzleCentreMatrix[0], -GLES20Renderer._uNozzleCentreMatrix[1], 0);
    } 
```

下载apk：**[http ://www.pixdip.com/opengles/rotation/floating.apk](http://www.pixdip.com/opengles/rotation/floating.apk)**

虽然这是`not required`，但完整的代码在这里：**[Drift in rotation about z-axis](https://stackoverflow.com/questions/12196614/drift-in-rotation-about-z-axis)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:50:05.233

```
Matrix.setIdentity(ModelMatrix);
Matrix.translate(ModelMatrix, xmov,ymov,0);
Matrix.translate(ModelMatrix, -xmov,-ymov,0); 
```

由于矩阵堆栈，总会产生浮点错误。

我最终删除它的方法是使用单独的矩阵进行此类关键转换：

```
private static float[] _TMatrix = new float[16];
private static float[] _ModelMatrix = new float[16];
Matrix.setIdentity(Renderer._ModelMatrix);
Matrix.setIdentity(Renderer._TMatrix);
Matrix.translate(Renderer._ModelMatrix, xmov,ymov,0);
Matrix.translate(Renderer._TMatrix, -xmov,-ymov,0);
Matrix.multiply(Renderer._ModelMatrix, Renderer._TMatrix, Renderer._ModelMatrix);
// will result in an identity model matrix, without any floating point errors 
```

# css - 如何正确选择这些元素？

> ID：12200776
> 
> 赞同：1
> 
> 时间：2012-08-30T15:49:47.673
> 
> 标签：css, css-selectors

```
<div id="main-content">
  <div>
    <div>target me
         <div>don't target me</div>
    </div>
  </div>
  <div>
    <div>target me too
         <div>don't target me</div>
    </div>
  </div>
</div> 
```

我试过这个：

```
#main-content div>div {

} 
```

但这也针对 div 说“不要针对我”我不想针对那些 div。

当然，我们可以使用 Id 或类，但重点是为所有人声明一个通用规则。

请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T15:53:34.603

只需稍微改进选择器以强制执行层次结构：`#main-content > div > div`

[http://jsfiddle.net/zXaLU/](http://jsfiddle.net/zXaLU/)

需要注意的是，在使用结构选择器时，最好引用非泛型标签。

示例：`#main-content > NAV > UL`比更有意义`#main-content > DIV > DIV`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:52:03.690

如果您希望样式仅应用于两个 div 的外部，则需要使用两个样式定义。第一个为目标 div 设置样式，第二个为不作为目标的内部 div 设置样式：

```
#main-content div>div {
  /* set some styles */
}
#main-content div>div>div {
  /* reset the styles defined before */
} 
```

一般来说，内部 div（非目标）继承其父 div 的所有样式，因此为了使该效果无效，您必须再次显式重置所有这些样式。

**编辑**

毕竟评论：如果“定位”不包括通常的 CSS 继承，蒂姆梅多拉的答案更合适。我的回答也试图解释继承。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:54:24.470

> [dooes one] 如何正确选择 [the specified] 元素？

“正确”的方法是为您要选择的项目提供一个指示其状态的类：

```
<div id="main-content">
  <div>
    <div class="someclass">target me
         <div>don't target me</div>
    </div>
  </div>
  <div>
    <div class="someclass">target me too
         <div>don't target me</div>
    </div>
  </div>
</div> 
```

...然后您可以简单地使用`class`选择器：

```
.someclass {
    ...styles...
} 
```

但是如果您无法修改标记，您仍然可以使用[子选择器](http://www.w3.org/TR/CSS2/selector.html#child-selectors)链：

```
#main-content > div > div {
    ...styles...
} 
```

# jakarta-ee - 根据 SESSIONID 停止用户登录

> ID：12200778
> 
> 赞同：-1
> 
> 时间：2012-08-30T15:49:52.193
> 
> 标签：jakarta-ee, servlets

> **可能重复：**
> [如何在会话中存储数据，以便它也适用于同时登录](https://stackoverflow.com/questions/12199198/how-to-store-data-in-session-so-that-it-works-for-simultaneous-log-ins-also)

我在会话中存储信息，我可以为单个用户检索相同的信息。当用户 2 从同一台机器上的同一浏览器（例如 chrome）登录时，问题就开始了。第二个登录用户，覆盖第一个用户的会话信息。

因为浏览器是创建相同的 sessionid 。

所以请告诉我停止用户 2 登录的最佳方法是什么，如果他带有相同的 SessionID？

意味着我的问题是我们可以根据 SessionID 停止用户吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:59:59.220

请提供有关您正在使用的技术的更多详细信息……例如应用程序服务器，应用程序的框架。

仅供参考，浏览器选项卡共享会话数据，因此两个使用同一浏览器从同一台机器登录到应用程序的用户只有在使用两个不同的浏览器窗口而不是两个不同的选项卡时才能拥有单独的会话 ID。

需要更多细节才能给出进一步的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:41:57.563

这是可以做到的，但需要你付出很多努力。要走的路是重写 URL。

示例：请求来自 www.yoursite.com/（请注意 URL 上没有任何参数）。然后您返回一个带有自生成 id 的 URL，例如 www.yoursite.com?id=abcd 。请注意，在这里您将 id 链接到实际请求。从现在开始，对于网站的任何请求，您都应该重写这个相同的 id。

如果第二个请求来自另一个选项卡，到 www.yoursite.com，那么您将创建另一个不同的 id，依此类推。

IMO，您不应该这样做，因为您破坏了 Web 服务器中构建的整个会话管理理念。我认为您应该考虑其他选项来解决您的问题。

您可以在此处阅读类似的文章[How to different sessions in browser-tabs?](https://stackoverflow.com/questions/368653/how-to-differ-sessions-in-browser-tabs)

# tcl - TCL：通过 SHELL 环境变量检查文件是否存在

> ID：12200786
> 
> 赞同：3
> 
> 时间：2012-08-30T15:50:25.053
> 
> 标签：tcl

我有一个 shell 环境变量`PATH_TO_DIR`，我想在 TCL 脚本中检查该文件是否`$PATH_TO_DIR/target.txt`存在。

我目前的解决方案是：

```
catch {exec /usr/local/bin/tcsh -c "echo  $PATH_TO_DIR/target.txt" } result

if {![file exists $result]} {
  puts "ERROR: the file $result is not exists"
} 
```

我敢肯定有一种更优雅的方式。
如何仅使用 TCL 命令解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:15:00.057

```
set path_to_dir $::env(PATH_TO_DIR)
set file_name [file join $path_to_dir "target.txt"]
set native_file_name [file nativename $file_name]
if {![file exists $native_file_name]} {
  puts "ERROR: the file $native_file_name does not exist"
} 
```

# java - Android Book 类似于 Effective Java (Joshua Bloch)

> ID：12200789
> 
> 赞同：4
> 
> 时间：2012-08-30T15:50:39.073
> 
> 标签：java, android

你知道一本类似于 Effective Java 但主要集中在 Android 环境的书吗？

我的意思是，android 中有很多编程资源，java 也有，但我在想的是一种编译。一个很好的例子：Effective Java book 是 Java 语言最佳实践的汇编。

毫无疑问，Effective Java 中建议的几乎所有 Java 编程学科都适用于 Android 应用程序开发，因为应用程序都是 Java 语言。但我正在寻找的是一本不仅集中在 Java 语言而且还集中在 Android 环境的书。例如，在 Android 中管理单例的最佳方法是什么，什么时候应该使用单例，什么时候不使用，另一个是管理活动、滑动、手势管理 - 如果您正在为 Android 环境开发应用程序，我认为这些会有所不同至; 如果您正在创建 Web 应用程序或桌面应用程序。

# javascript - SVG在转换时在Firefox中消失

> ID：12200790
> 
> 赞同：3
> 
> 时间：2012-08-30T15:50:40.527
> 
> 标签：javascript, svg, cross-browser, transform, d3.js

在 Safari 中一切都很好，在 Firefox 中，svg 的大小不正确，当我转换它时，它就消失了。我正在运行 Safari Mac 5.1.7 和 Firefox Mac 15.0。

代码是用 d3 创建的，但我刚刚提供了 html。

现在你看到了： [http ://bl.ocks.org/3531350](http://bl.ocks.org/3531350)

现在你不这样做了：http: [//bl.ocks.org/3531267](http://bl.ocks.org/3531267)（已编辑，现在可以使用）

我想我在某个地方犯了一个愚蠢的错误，但我就是看不到它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:59:48.707

如果我将 100% 的高度和宽度属性添加到外部 svg 元素，我可以在灰色区域的底部看到 svg。如果您使用嵌入在 html 中的 svg，它们确实需要在那里。我怀疑 Safari 在某些时候需要嵌入式 svg 的宽度/高度。

# ruby-on-rails - Ruby On Rails 和挑战 API

> ID：12200793
> 
> 赞同：1
> 
> 时间：2012-08-30T15:50:52.480
> 
> 标签：ruby-on-rails, ruby, tournament

我很新，但了解 Ruby on Rails 的概念。我正在努力让锦标赛开始并运行。我在 Gem 文件中添加了 gem 作为依赖项；但是，我不确定在哪里添加我的用户名和 API 密钥。这是 API - [https://bitbucket.org/corneldm/challonge-api/wiki/Home](https://bitbucket.org/corneldm/challonge-api/wiki/Home) - 在视图“Challonge::Tournament.find(:all)”中显示过滤后的列表怎么样。我不确定如何连接预配置的 ActiveResource 类。有没有人体验过 Challonge API for Ruby？或者我可以使用的另一个支架系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:05:18.983

config/initializers 中的文件将是放置该配置信息的常规位置，可能在 challone.rb 中，因此很清楚正在初始化什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:35:04.603

如果您有特定于环境的用户名和 API 密钥，那么您可以考虑 /environments/.rb

# maven-3 - maven参数tomcat7插件

> ID：12200801
> 
> 赞同：0
> 
> 时间：2012-08-30T15:51:14.850
> 
> 标签：maven-3

我希望能够使用 maven 运行以下命令

```
mvn tomcat7:deploy 
```

我还想按指定添加更新参数

[http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/tomcat7-maven-plugin/deploy-mojo.html](http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/tomcat7-maven-plugin/deploy-mojo.html)

如何将 update true 添加到命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:38:08.730

在配置元素内部：

```
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <version>2.0-SNAPSHOT</version>
    <configuration>
         <update>true</update>
         <url>http://www.mydomain.com:1234/mymanager</url>
    </configuration>
</plugin> 
```

[http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/tomcat7-maven-plugin/usage.html](http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/tomcat7-maven-plugin/usage.html)

# android - 网页出现在 ipad 屏幕的一半

> ID：12200802
> 
> 赞同：1
> 
> 时间：2012-08-30T15:51:14.867
> 
> 标签：android, css, ipad, twitter-bootstrap, responsive-design

我最近的一部作品在 ipad 上有一些非常奇怪的错误。我没有自己的，所以我的客户为我拍了一些截图。我完全没有想法。

该网站是使用 Twitter Bootstrap 构建的。您可以在这里找到它以及所有代码：

[http://www.webalys.com/](http://www.webalys.com/)

以下是截图：

[https://www.box.com/s/f45c618996c65006266a](https://www.box.com/s/f45c618996c65006266a)

在其中两个图像上，站点在横向模式下仅出现在屏幕的一半上。然后，如果它不这样做，那么两边都有很大的余量（我认为它来自我们使用的固定布局）。

我用视口元标记玩了很多，但没有运气。无论我做什么，在 ipad 或 iphon 或 android 手机上看起来都很糟糕。我添加了视口元标记以避免将所有文本压缩在一列中以适应移动显示。

其中最奇怪的是，如果它是从谷歌搜索加载的，网站会在一侧加载，而搜索仍然在另一侧。

我不确定我是否设法解释得足够清楚。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:34:44.300

最后我删除了元“视口”标签，一切正常。网站加载时没有更改任何内容，并且侧面的填充物消失了。

我最好的猜测是，当一个人想要在较小的屏幕上保留桌面外观而不是进行响应式设计时，这是不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:52:45.033

您没有包含 bootstrap.responsive.css 文件，否则它不会调整大小。

[http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css](http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css)

# android - Horizo ntalScrollView vs 图库

> ID：12200811
> 
> 赞同：1
> 
> 时间：2012-08-30T15:51:36.750
> 
> 标签：android, gallery, horizontalscrollview

我看到画廊小部件已被弃用，因为它不能重用视图。我研究过他们会建议将水平滚动视图作为替代方案。由于水平滚动视图也不重用视图，有什么区别吗？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:42:32.620

Gallery 类在 API 级别 16 中已弃用，因此不再受支持。

所以你必须使用 Horizo​​ntalScrollView 或 ViewPager。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:53:28.667

没有太大区别，只是你可以通过水平滚动使相同的东西更容易

# c - 使用 1990 年 1 月 1 日作为纪元日期将天数转换为 C 中的日期

> ID：12200820
> 
> 赞同：4
> 
> 时间：2012-08-30T15:52:12.140
> 
> 标签：c, epoch

我有一个变量，它表示自 1990 年 1 月 1 日以来的天数。有人知道我该怎么做吗？我正在使用 MCS 8051，所以我不能使用任何脚本、标准库函数或内存分配（malloc 或 calloc）。这也不是家庭作业。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:45:48.427

我给你一个提示：

```
$ date --date 'jan 1 1990' +%s
631148400 
```

这是 1990 年 1 月 1 日的“纪元日期”；以 Unix 纪元以来的秒数表示。请注意，这只对 POSIX 系统有效。

* * *

现在，您已经明确表示没有可用的标准库函数，您可能希望使用预先计算的纪元时间作为开始并添加`days * 86400`到它。

可悲的是，我猜您将没有足够大的整数类型来处理该算术。自从：

```
log(633826800, 2) = approx. 29.23951342 
```

您至少需要 32 位类型来保存 Unix 纪元本身的值。

例如，如果您有 32 位`uint32_t`类型，您可以：

```
uint32_t days_to_epoch_date(int days)
{
    uint32_t ret = 631148400L; /* value for Jan 1 1990 */
    ret += 86400 * days;
    return ret;
} 
```

如果您需要使用不同的纪元或比例，则值会有所不同，但方法将保持不变。好吧，只要时间度量是线性的。

* * *

*以下示例对于新信息不再正确，但我将其保留，以防任何能够使用标准库的人都能找到它。*

为了使代码可移植，您首先要在 a 中组装纪元日期`struct tm`：

```
#include <time.h>

time_t epoch_time_to_time_t(unsigned int days_since_epoch)
{
    struct tm t = {0};

    t.tm_mday = 1;
    t.tm_mon = 0; /* Jan */
    t.tm_year = 90; /* since 1900 */
    t.tm_isdst = -1;

    /* ... */
} 
```

然后，如 *7.23.2.3 所允许的`mktime`函数：

> 2 […] 结构的`tm_wday`和`tm_yday`组件的原始值被忽略，其他组件的原始值不限于上述范围。

…将天数添加到`struct tm`, 并用于`mktime()`获得最终`time_t`:

```
time_t epoch_time_to_time_t(unsigned int days_since_epoch)
{
    /* ... */

    t.tm_mday += days_since_epoch;

    return mktime(&t);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:34:49.790

There is a book that collects a huge amount of date and time calculation details and algorithms, that is almost certainly worth checking out. It is supported by source code in standard C (probably C89, certainly not newer).

[Standard C Date/Time Library: Programming the World's Calendars and Clocks](http://amzn.com/0879304960) by Lance Latham, CMP, 1998, ISBN 978-0879304966.

If you needed to start from scratch with date arithmetic, this would be a great resource if only because calenders are full of special cases that are easy to miss.

# android - 滚动视图高度

> ID：12200825
> 
> 赞同：0
> 
> 时间：2012-08-30T15:52:18.137
> 
> 标签：android, scrollview

我的布局包含页眉、滚动视图中的内容和页脚。页眉和页脚的位置应该是固定的，但是当我启动应用程序时，页脚是不可见的，我只能滚动到内容的底部，仅此而已。我怎样才能使它仍然可以向下滚动到内容的底部，但我的页脚始终可见？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#2E2E2E"
    android:orientation="vertical" >

    <FrameLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:background="#CC0000"
        android:orientation="horizontal" >
         <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="10dp">

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/internet_group_chat" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="NG Online"
            android:textStyle="bold"
            android:layout_marginLeft="5dp"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:layout_gravity="center"/>

    </LinearLayout>
    </FrameLayout>
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="1dp"
        android:background="#990000"
        android:orientation="horizontal" >
        <Button
            android:id="@+id/mBtnNaslovnica"
            style="@style/button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Naslovnica" />

        <Button
            android:id="@+id/mBtnVjesti"
            style="@style/button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Vjesti" />

        <Button
            android:id="@+id/mBtnVideo"
            style="@style/button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Video" />

        <Button
            android:id="@+id/mBtnFoto"
            style="@style/button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="2.33"
            android:text="Fotogalerija" />
    </LinearLayout>
    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical">
            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical">
                <LinearLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:paddingTop="5dp"
                    android:paddingBottom="5dp"
                    android:background="#000000"
                    android:orientation="vertical">
                    <TextView
                        android:id="@+id/cur_news_title"
                        android:layout_width="300dp"
                        android:layout_height="wrap_content"
                        android:text="Large Text"
                        android:textSize="20dp"
                        android:layout_marginTop="5dp"
                        android:layout_marginLeft="5dp"
                        android:textAppearance="?android:attr/textAppearanceLarge" />  
                </LinearLayout>
                <FrameLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical">
                    <ImageView
                        android:id="@+id/cur_news_img"
                        android:scaleType="fitXY"
                        android:layout_width="fill_parent"
                        android:layout_height="200dp"
                        android:src="@drawable/rihanna" />
                    <LinearLayout
                        xmlns:android="http://schemas.android.com/apk/res/android"
                        android:layout_width="fill_parent"
                        android:layout_height="30dp"
                        android:background="#B3000000"
                        android:orientation="vertical">
                        <LinearLayout
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:layout_marginTop="2dp" >                    
                            <TextView
                                android:id="@+id/cur_news_atuhor"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginLeft="5dp"
                                android:text="Small Text"
                                android:textAppearance="?android:attr/textAppearanceSmall" />
                            <TextView
                                android:id="@+id/cur_news_time"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginLeft="5dp"
                                android:text="Small Text"
                                android:textAppearance="?android:attr/textAppearanceSmall" />
                        </LinearLayout>
                        <LinearLayout
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="fill_parent"
                            android:layout_height="1dp"
                            android:background="#CC0000"
                            android:layout_marginTop="7dp" />
                        <LinearLayout
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content">
                            <LinearLayout
                                xmlns:android="http://schemas.android.com/apk/res/android"
                                android:layout_width="fill_parent"
                                android:layout_marginTop="10dp"
                                android:layout_height="1dp"
                                android:background="#CC0000" />
                        </LinearLayout>
                    </LinearLayout>
                </FrameLayout>
            </LinearLayout>
            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:background="#F5F5F5">
                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Više o"
                    android:layout_marginTop="5dp"
                    android:layout_marginLeft="5dp"
                    android:textColor="#333333"
                    android:textStyle="bold"
                    android:textSize="25dp"
                    android:textAppearance="?android:attr/textAppearanceMedium" />
                <LinearLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:layout_width="fill_parent"
                    android:layout_marginTop="5dp"
                    android:layout_height="1dp"
                    android:layout_marginLeft="5dp"
                    android:layout_marginRight="5dp"
                    android:background="#333333" />
                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="5dp"
                    android:layout_marginLeft="5dp"
                    android:text=" dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamcodolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamcodolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamcodolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamcodolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamcodolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamcodolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamcodolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco "
                    android:textColor="#666666"
                    android:textAppearance="?android:attr/textAppearanceSmall" />
            </LinearLayout>
            </LinearLayout>
   </ScrollView> 
            <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="2dp"
            android:background="#CC0000" />
        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="40dp"
            android:background="#4D000000"
            android:orientation="vertical" >
        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingRight="4dp"
            android:background="#CC0000"
            android:orientation="vertical" >
            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="AKTUALNO"
                android:textSize="10dp"
                android:layout_marginLeft="4dp"
                android:textStyle="bold"
                android:textColor="#FFFFFF"
                android:textAppearance="?android:attr/textAppearanceSmall" />
        </LinearLayout>
            <TextView 
            android:id="@+id/scroller"
            android:singleLine="true"
            android:ellipsize="marquee"
            android:focusable="true"
            android:focusableInTouchMode="true"
            android:marqueeRepeatLimit ="marquee_forever"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#FFFFFF"
            android:text="09:50 Lorem ipsum dolor sit amet, consectetur adipisicing elit | 09:59 Lorem ipsum dolor sit amet, consectetur adipisicing elit | 10:10 Lorem ipsum dolor sit amet, consectetur adipisicing elit | 10:20 Lorem ipsum dolor sit amet, consectetur adipisicing elit | 10:34 Lorem ipsum dolor sit amet, consectetur adipisicing elit"
            android:layout_marginLeft="4dp"
            android:layout_marginTop="0dp"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            />

    </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:54:29.190

您应该`layout_weight`为 ScrollView 使用 a ，这样它就不会占用所有剩余空间：

```
 <ScrollView
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T16:00:58.953

添加`android:layout_weight`到`ScrollView`

# excel - 跳出 While...Wend 循环

> ID：12200834
> 
> 赞同：120
> 
> 时间：2012-08-30T15:52:50.570
> 
> 标签：excel, vba, while-loop

我正在使用 VBA 的 While...Wend 循环。

```
Dim count as Integer

While True
    count=count+1

    If count = 10 Then
        ''What should be the statement to break the While...Wend loop? 
        ''Break or Exit While not working
    EndIf
Wend 
```

我不想使用像 `While count<=10...Wend 这样的条件

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-08-30T15:58:22.020

A `While`/`Wend`循环只能通过退出`GOTO`外部块（`Exit sub`/`function`或另一个可退出循环）提前退出

改为`Do`循环：

```
Do While True
    count = count + 1

    If count = 10 Then
        Exit Do
    End If
Loop 
```

或者循环一定次数：

```
for count = 1 to 10
   msgbox count
next 
```

（`Exit For`可以在上面使用提前退出）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-03T08:51:06.917

另一种选择是将标志变量设置为 a `Boolean`，然后根据您的标准更改该值。

```
Dim count as Integer 
Dim flag as Boolean

flag = True

While flag
    count = count + 1 

    If count = 10 Then
        'Set the flag to false         '
        flag = false
    End If 
Wend 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-18T20:16:00.510

最好的方法是在你的语句中使用一个`And`子句`While`

```
Dim count as Integer
count =0
While True And count <= 10
    count=count+1
    Debug.Print(count)
Wend 
```

# java - 软引用与弱引用

> ID：12200835
> 
> 赞同：2
> 
> 时间：2012-08-30T15:52:51.227
> 
> 标签：java, garbage-collection, finalizer

我有一个关于Java 中`SoftReference`s的问题。`WeakReference`

我所知道的是：

GC 使用算法来决定是否回收一个软可达对象，但总是回收一个弱可达对象。

这是否意味着 GC 永远不会在`finalize()`上运行该方法`WeakReferences`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:58:28.460

根据[垃圾收集的真相](http://java.sun.com/docs/books/performance/1st_edition/html/JPAppGC.fm.html)

> 如果一个类定义了一个终结器，那么该类的任何实例都必须在释放之前调用终结器。这意味着释放会因包含终结器而延迟。

基于此，我的理解是，无论周/软，如果定义了 finalize，它将被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:02:40.853

我不遵循您的推理，但肯定总是调用终结器。一旦一个对象变成可终结的，所有对它的软/弱引用都将被清除。因此，可以像`null` **在**最终确定之前一样观察到 refs。

# c# - 以编程方式获取当前列的宽度和高度？

> ID：12200838
> 
> 赞同：2
> 
> 时间：2012-08-30T15:53:03.477
> 
> 标签：c#, wpf, xaml, grid

我正在尝试在 UserControl 中以编程方式获取网格的宽度和高度。

这是我的`XAML`网格：

```
<Grid Name="BallGrid" Background="DarkBlue" Height="auto" Width="auto">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
</Grid> 
```

但是这两个：

```
double width = BallGrid.ColumnDefinitions[0].ActualWidth;
double height = BallGrid.RowDefinitions[0].ActualHeight; 
```

返回 0,

还有这些

```
double width = BallGrid.ColumnDefinitions[0].Width.Value;
double height = BallGrid.RowDefinitions[0].Height.Value; 
```

返回两个返回 1。

我想知道实际宽度，最好使用与边距大小相同的单位。如何以编程方式获取这些值？

在 ProgessChanged 方法中查询列值，该方法由 BackgroundWorker 每 50 毫秒调用一次，这可能会有所不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:27:50.500

通常你使用`ActualWidth`/ `Height`，这里这些属性有点懒惰：

> 添加或删除行或列时，所有 ColumnDefinition 元素的[ActualWidth](http://msdn.microsoft.com/en-us/library/system.windows.controls.rowdefinition.aspx)[和](http://msdn.microsoft.com/en-us/library/system.windows.controls.columndefinition.actualwidth.aspx)所有[RowDefinition](http://msdn.microsoft.com/en-us/library/system.windows.controls.columndefinition.aspx)元素的**ActualHeight**都变为零，直到调用[Measure 。](http://msdn.microsoft.com/en-us/library/system.windows.uielement.measure.aspx)

因此，您可能可以`Measure`手动调用或尝试等待它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:06:35.733

它们在源初始化后有效。您可以覆盖`OnSourceInitialized`以了解何时发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:02:38.077

尝试`BallGrid.RenderSize.Height`并`BallGrid.RenderSize.Width`

# wpf - 更改 selectedItem 时 ComboBox 的属性

> ID：12200841
> 
> 赞同：0
> 
> 时间：2012-08-30T15:53:15.310
> 
> 标签：wpf, xaml, combobox

我想用 ComboBox 做一些非常简单的事情。更改所选项目时，我需要调用命令。但我不记得在 Xaml 中使用的关键字。我想要这样的东西：

```
<ComboBox ItemsSource="{Binding Path=MyVar}" xxx="PersoCommand"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:18:34.050

没有命令，只是一个事件，[`SelectionChanged`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectionchanged.aspx). 如果您想要执行命令，例如可以使用`Interactivity`Blend SDK，它具有`EventTriggers`和`InvokeCommandActions`.

# php - 帖子页面上的相关文章

> ID：12200850
> 
> 赞同：0
> 
> 时间：2012-08-30T15:53:48.290
> 
> 标签：php

```
<?php
mysql_select_db($database_XXX, $XXX);
$result= mysql_query("SELECT COUNT(*) FROM news"); 
$total = mysql_result($result, 0, 0); 

// create a random number 
mt_srand((double)microtime()*1000000); 
$number = mt_rand()%$total; 

// get a random entry 
$result= mysql_query("SELECT * FROM news LIMIT $number, 5");
$row = mysql_fetch_array($result); 
?> 
```

这是我正在使用的 PHP 代码，它从我想要的表中提取随机数据，但我似乎无法弄清楚如何让它不显示它所在的当前帖子。我需要在 if 语句中加入吗？如果我这样做，它会去哪里以及如何实现它。我唯一能做的就是使用 if 语句来检查页面上的 post_id 是否与发布的 post_id 匹配。但我对此很陌生，我唯一能想到的是。if(!$row['post_id'] == $_GET['id']) { } 我不知道之后该怎么做。另外，如果有人知道如何或可以帮助我指出正确的方向，那就太好了。谢谢。

这是这里的全部内容的更新。它仍然显示已经发布的帖子。希望这可以帮助。这是页面的 php 代码。

```
<?php
mysql_select_db($database_xxx, $xxx);
$result= mysql_query("SELECT COUNT(*) FROM news"); 
$total = mysql_result($result, 0, 0); 

// create a random number 
mt_srand((double)microtime()*1000000); 
$number = mt_rand()%$total; 

// get a random entry 
$result= mysql_query(sprintf("SELECT * FROM news WHERE post_id <> %d LIMIT %d, 3", $post->post_id, $number)); 
$row = mysql_fetch_array($result); 
?>

<?php
if (! isset($_GET['id']) || (int) $_GET['id'] === 0 ) {
echo "Incorrect input, aborting"; 
exit;  
} 
mysql_select_db($database_xxx, $xxx);
$sql = "SELECT * FROM news WHERE post_id = " . $_GET['id'];
// a line of debug to make sure things are as expected

$query = MYSQL_QUERY($sql);
// query your table for a match with post_id
if (mysql_num_rows($query) == "1")
// if a record is found, show the info 
{ 
$fetch = mysql_fetch_array($query); // set $fetch to have the values from the table
} else { 
echo "No match in database found."; // if no match is found, display this error 
} 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:02:31.843

假设代码在您查看主要产品的页面上：

```
$result= mysql_query(sprintf("SELECT * FROM news WHERE id <> %d LIMIT %d, 5", $post->id, $number)); 
```

此外，您不应该再使用`mysql_*`函数，因为它们已被弃用；结帐[PDO](http://php.net/book.pdo.php)

# wpf - 如何在 XAML 中设置 ComboBox DataContext？

> ID：12200853
> 
> 赞同：2
> 
> 时间：2012-08-30T15:53:57.133
> 
> 标签：wpf, xaml, data-binding, combobox

我正在尝试理解 Binding，所以我想出了一个非常简单的程序来尝试和测试它。

我的 MainWindow 中有以下元素：

```
<ComboBox Name="comboBox1" ItemsSource="{Binding}" /> 
```

在我的代码中，我有以下可观察的集合：

```
public ObservableCollection<string> ComboItems = new ObservableCollection<string>(); 
```

我可以在运行时的任何时候以这种方式成功添加项目：

```
comboBox1.DataContext = ComboItems;
ComboItems.Clea();
ComboItems.Add("Item"); 
```

我的问题是，如何在 XAML 中设置 DataContext 以便不必在代码中执行它？可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T15:56:34.193

常见的是：

```
<Window DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <ComboBox ItemsSource="{Binding ComboItems}" .../> 
```

但是通常您想将另一个对象实例注入为`DataContext`，例如查看 MVVM 模式。WPF 中的属性是[继承](http://msdn.microsoft.com/en-us/library/ms753197.aspx)的，因此`ComboBox`具有 的`DataContext`，`Window`它可以在任何级别被覆盖。

注意：要使绑定起作用`ComboItems`，必须是公共属性，而不是字段。

感兴趣的资源：

*   [数据绑定概述](http://msdn.microsoft.com/en-us/library/ms752347.aspx)
*   [数据模板概述](http://msdn.microsoft.com/en-us/library/ms742521.aspx)
*   [依赖属性概述](http://msdn.microsoft.com/en-us/library/ms752914.aspx)

# jquery - 使用 jQuery isotope 按排序顺序不断旋转元素

> ID：12200856
> 
> 赞同：0
> 
> 时间：2012-08-30T15:54:06.067
> 
> 标签：jquery, animation, jquery-isotope

我想知道是否有办法让同位素中的元素保持旋转。[用动画将第一个元素移动到最后一个位置并不断重复这个过程]类似于有组织的洗牌。

**这是一个同位素和必要的默认过滤器设置的小提琴：http: [//jsfiddle.net/boriskourt/Czavf/1/](http://jsfiddle.net/boriskourt/Czavf/1/)**

[注意，可以随时添加新元素或删除旧元素]

我正在使用水平砌体，一切都只会在一条线上。

提前致谢！

# c# - MSBuild 将 MSDEPLOYAGENTSERVICE 附加到我的 URL 的末尾

> ID：12200857
> 
> 赞同：0
> 
> 时间：2012-08-30T15:54:18.727
> 
> 标签：c#, tfs, msbuild

我正在尝试在 TFS 中配置构建以部署到我们的测试框以进行持续集成。我遇到的问题是 TFS 想要将 附加`MSDEPLOYAGENTSERVICE`到我的 URL 的末尾，这导致部署返回套接字错误：

```
 Retrying the sync because a socket error (10054) occurred.   Retrying operation 'Serialization' on object sitemanifest (sourcePath). 
```

这是我的 MSBuild 参数：

```
/p:DeployOnBuild=True 
/p:DeployTarget=MSDeployPublish 
/p:MsDeployServiceUrl=[ip address]:8172/MsDeploy.axd 
/p:MSDeployPublishMethod=RemoteAgent 
/p:CreatePackageOnPublish=True 
```

该服务器是带有 IIS 7.5 的 Windows Server 2008 R2 64 位服务器。我们使用 Visual Studio 2010 的发布功能使用上面的 Url 部署到测试框没有问题。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:03:52.493

您无需`MsDeploy.axd`在`MsDeployServiceUrl`. 另外，我看到您没有`DeployIisAppPath`设置值。您应该将其设置为您在 IIS 中的网站名称。

下面是我们的一个 CI 构建的示例。

```
/p:DeployOnBuild=True
/p:DeployTarget=MsDeployPublish
/p:CreatePackageOnPublish=True
/p:MSDeployPublishMethod=RemoteAgent
/p:MSDeployServiceUrl=http://[YOUR WEBSERVER URL]
/p:DeployIisAppPath="NAME-OF-WEBSITE-IN-IIS" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T16:17:30.620

经过几天的大量搜索，我发现了这个问题。

```
/p:DeployOnBuild=True 
/p:DeployTarget=MSDeployPublish 
/p:MsDeployServiceUrl=[ip address]/MsDeploy.axd 
/p:MSDeployPublishMethod=WMSVC 
/p:CreatePackageOnPublish=True 
/p:DeployIisAppPath=[name of website in iis]
/p:AllowUntrustedCertificate=True 
```

事实证明，发布方法是罪魁祸首。RemoteAgent 无法正确解释部署，这就是它无法序列化的原因。WMSVC 是发布方法的适当设置。

# php - 在多对多表关系中查找最小和最大的链接值

> ID：12200858
> 
> 赞同：0
> 
> 时间：2012-08-30T15:54:20.443
> 
> 标签：php, mysql

我正在构建一个合唱管理数据库，需要创建一个特定的查询。（PHP 中的 MySQL 编程。）

我有一张歌手表和一张活动表，它们具有由名册表管理的多对多关系。每个花名册记录链接到一个 SingerID 和一个 EventID。我想创建一个表单的浏览表：

问题是一些歌手可能没有相关的事件。

有没有办法在单个 MySQL 查询中执行此操作，或者我需要编写一个查询来列出我所有的歌手，然后编写第二个查询来列出每个歌手的所有事件，然后检查第二个查询以提取第一条和最后一条记录（假设我按日期对最后一个查询进行排序）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:00:12.390

以不需要存在的方式使用 LEFT JOIN

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:02:50.153

我也觉得Mike的做法，Query应该是这样的

```
SELECT * FROM singer
LEFT OUTER JOIN roster ON singer.id =roster.singerid
INNER JOIN event ON event.id=roster.eventid
ORDER BY singer.name,singer.date 
```

# jquery - 响应式 jQuery 每对等高

> ID：12200859
> 
> 赞同：1
> 
> 时间：2012-08-30T15:54:21.270
> 
> 标签：jquery, responsive-design, equal-heights

我有这个标记：

```
<div class="wrapper">
    <article>A</article>
    <article>B</article>
    <article>C</article>
    <article>D</article>
    <article>E</article>
    <article>F</article>
    <article>G</article>
    <article>H</article>
</div> 
```

它是浮动的并形成一个两列的列表。由于其内容，每篇**文章都有可变的高度。**

我想要的是每对应该具有相同的高度，这取决于两者中哪一个具有最高的高度。我发现了**equalHeights**插件的变体，但它们都强制所有元素的高度相等。我只需要每对都具有相同的高度，而不是所有元素。这是可能的还是有任何现有的插件呢？

注意：无法更改**文章**标记，因为它是由 CMS 输出的。

我的预期输出：

```
|-------|---------|
|   A   |    B    |
|-------|---------|
|       |         |
|   C   |    D    |
|       |         |
|       |         |
|       |         |
|-------|---------|
|       |         |
|   E   |    F    |
|       |         |
|-------|---------| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:38:26.520

这里有一些代码将高度设置为最大高度，按列数分割文章块，而不是任何其他结构方法。

**演示：http: [//jsfiddle.net/bgWaw/](http://jsfiddle.net/bgWaw/)**

```
var articles = $('.wrapper article');

var columns = 2;

var cIndex = 0;
while (cIndex < articles.size()) {
    var cMaxHeight = 0;
    for (cColumn = 0; cColumn < columns; cColumn++) {
        var cArticle = articles.eq(cIndex + cColumn);
        if (cArticle.size() > 0) {
            cMaxHeight = (cArticle.height() > cMaxHeight ? cArticle.height() : cMaxHeight);
        }
    }

    articles.slice(cIndex, cIndex + columns).height(cMaxHeight);

    cIndex += columns;
} 
```

如果需要，这可以很容易地转换为插件。只需使其成为`$.fn`对象中的函数并使用`this`而不是文章并将列作为参数传递给函数。

**jQuery 插件版本演示：http: [//jsfiddle.net/bgWaw/2/](http://jsfiddle.net/bgWaw/2/)**

```
$.fn.maxSliceHeight = function(columns) {
    var cIndex = 0;
    while (cIndex < this.size()) {
        var cMaxHeight = 0;
        for (cColumn = 0; cColumn < columns; cColumn++) {
            var cElem = this.eq(cIndex + cColumn);
            if (cElem.size() > 0) {
                cMaxHeight = (cElem.height() > cMaxHeight ? cElem.height() : cMaxHeight);
            }
        }

        this.slice(cIndex, cIndex + columns).height(cMaxHeight);

        cIndex += columns;
    }

    return this;
} 
```

**示例调用：**

```
$('.wrapper article').maxSliceHeight(2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:59:11.453

与我的评论相反，您可以使用另一种方法：

将该标记转换为行：

```
<div class="row">
    <article>A</article>
    <article>B</article>
</div>
<div class="row">
    <article>C</article>
    <article>D</article>
</div>
<div class="row">
    <article>E</article>
    <article>F</article>
</div> 
```

再次浮动`<article>`元素，但确保每个`.row`div`clear: both`在 CSS 中都有。

这样，每个“行”都将具有相同的高度，其中包含最高的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:15:55.597

如果你真的想要两列，那么按 div 分隔是一个很好的解决方案，但我假设如果浏览器足够宽，你可能想要更改为三列。你看过同位素吗？ [http://isotope.metafizzy.co/](http://isotope.metafizzy.co/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T05:52:32.970

我在不更改标记的情况下找到了解决方案：http: [//css-tricks.com/equal-height-blocks-in-rows/](http://css-tricks.com/equal-height-blocks-in-rows/)

# tsql - tsql -group by by max datetime in rows

> ID：12200864
> 
> 赞同：4
> 
> 时间：2012-08-30T15:54:35.513
> 
> 标签：tsql

我有一张表，它的数据如下所示：

```
 id         name       date
 ---------  ---------  ----------
 1          a          2012-08-30 10:36:27.393
 1          b          2012-08-30 14:36:27.393
 2          c          2012-08-30 13:36:27.393
 2          d          2012-08-30 16:36:27.393 
```

我用这个查询检索最大日期时间：

```
SELECT id,Max(date) as mymaxdate
FROM table1
group by id 
```

这个查询给了我这样的两行：

```
1     2012-08-30 14:36:27.393
2     2012-08-30 16:36:27.393 
```

这是正确的，但我怎样才能改变它来检索这个结果？

```
1   b  2012-08-30 14:36:27.393
2   d  2012-08-30 16:36:27.393 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T16:32:23.377

对于 SQL Server 2005+

```
WITH cteMaxDate AS (
    SELECT id, name, date, 
           ROW_NUMBER() OVER(PARTITION BY id ORDER BY date DESC) AS RowNum
        FROM table1
)
SELECT id, name, date
    FROM cteMaxDate
    WHERE RowNum = 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:30:13.923

选项之一：

```
select 
    t1.id
    ,t1.name
    ,t1.date 
from 
    table1 t1
    inner join (
        SELECT id,Max(date) as mymaxdate
        FROM table1
        group by id
    ) mt1
        on t1.id = mt1.id
        and t1.date = mt1.mymaxdate 
```

# java - 允许电子邮件交互 - Java 服务器

> ID：12200865
> 
> 赞同：0
> 
> 时间：2012-08-30T15:54:39.653
> 
> 标签：java, dns, email, mail-server

首先，这是一个广泛的问题，我相信它也部分属于 Serverfault，所以请耐心等待。我在这里尝试谷歌搜索和搜索，但只找到了这个问题的一部分，而不是它的全部想法。开始：

我的问题是：

我正在编写一个 Web 应用程序，而我的服务器是 Java。我想添加一个功能，让我的用户可以通过电子邮件进行一些他们已经可以在界面上进行的可能交互。对于这一部分，我相信设置一个邮件服务器（任何服务器建议？），并从我的 Java 应用程序（Tomcat）连接到邮件服务器并通过 POP3 或其他方式阅读电子邮件（任何 API 建议？）。

棘手的部分是我不想为此目的使用单个电子邮件地址。例如，我希望如果我的用户 Joe 想在我的应用程序中创建一个对象，那么他会发送一封电子邮件到 joe@create.mydomain.com，如果他想删除一个对象，他会发送到 joe@删除.mydomain.com。当然，可能的操作是先前已知且有限的（因为为此我不得不与 DNS 混为一谈）。这只是一个示例，很可能我必须“标记”电子邮件地址的左侧部分（@ 之前），否则任何用户都可以创建和删除其他用户的对象（因为电子邮件是半匿名的）。

更棘手的部分是我已经在 mydomain.com 上运行了一个电子邮件服务器，用于处理公司电子邮件。如何使来自操作词（“子域”？）的所有电子邮件都进入我的“应用程序电子邮件服务器”，而那些没有操作词的电子邮件进入我的“公司电子邮件服务器”？

我想就是这样！

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:01:38.450

由于您已经在使用 Java，听起来[Apache James](http://james.apache.org/)可能很适合您。

它允许您创建[匹配器](http://james.apache.org/server/2.3.1/custom_matcher.html)和[邮件](http://james.apache.org/mailet/api/index.html)，它们根据您定义的标准（可能是基于地址的发件人/收件人匹配、主题行等）挑选和处理电子邮件。该过程可以将记录插入数据库，调用 Web 服务，以及您想用 Java 编写的任何内容。

# javascript - 再次渲染整个模板或使用jquery修改一些值会更好吗？

> ID：12200871
> 
> 赞同：1
> 
> 时间：2012-08-30T15:55:08.053
> 
> 标签：javascript, android, jquery, iphone, backbone.js

让我们以下面的模板为例：

```
<div class="picture">
    <img src="<%= model.get("url") %>"></img>
    <p class="author"><%= model.get("author") %></p>
    <p class="date"><%= model.get("date") %></p>
    <div class="likers"><%= some logic that outputs a nice list of people that have liked this picture %></div>
    <button class="like-button <%= model.get("is_liked") ? 'active' : '' %>"><%= model.get("is_liked") ? 'You liked this picture' : 'Click here to like this picture' %></button>
</div> 
```

假设我使用 Backbone 渲染该模板并单击like-button触发以下功能：

选项 A：

```
var me = "Peeter";
var model; //refrence to the model 

var likers = model.get("likers");

model.get("is_liked") ? likers.remove(me) : likers.add(me); //Add/remove me
model.set({
    "is_liked" : !model.get("is_liked"), //Toggle state
    likers : likers
}); 

var $button = $(".like-button")
var $likers = $(".likers");

$button.toggleClass("active");
$button.hasClass("active") ? $button.text('You liked this picture') ? $button.text('Click here to like this picture');

$likers.text(/* copy/paste the logic that's in the  template to render the list of likers*/); 
```

选项 B：

```
var me = "Peeter";
var model; //refrence to the model 
var template; //refrence to the template declared at the top of this question

var likers = model.get("likers");

model.get("is_liked") ? likers.remove(me) : likers.add(me); //Add/remove me
model.set({
    "is_liked" : !model.get("is_liked"), //Toggle state
    likers : likers
}); 

template.render(); 
```

您会推荐哪种方法？为什么？另外请考虑移动浏览器，在移动设备上重新渲染整个模板（如果模板有点大）是否太慢了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:07:35.637

这是一个一般无法回答的问题，针对您的特定用例进行一些分析肯定会有所帮助。

但作为一般性答案，我认为您必须回顾以下几点：

1.  模板的大小以及使用数据处理它的时间
2.  绑定到视图的事件数。越多，每次重新渲染时需要绑定和解除绑定的次数就越多
3.  您的渲染功能以及您如何将其设置为重大影响。

更多详情，请查看以下链接：

*   [http://ianstormtaylor.com/break-apart-your-backbonejs-render-methods/](http://ianstormtaylor.com/break-apart-your-backbonejs-render-methods/)
*   [http://ianstormtaylor.com/assigning-backbone-subviews-made-even-cleaner/](http://ianstormtaylor.com/assigning-backbone-subviews-made-even-cleaner/)
*   [http://ianstormtaylor.com/rendering-views-in-backbonejs-isnt-always-simple/](http://ianstormtaylor.com/rendering-views-in-backbonejs-isnt-always-simple/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:04:00.107

我更喜欢通过 JQuery 进行更新。即使在 600 MHz 的 Android 上，JQuery 的小更新也相当快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:53:24.043

您可以尝试使用[Backbone ModelBinder](https://github.com/theironcook/Backbone.ModelBinder)将您的 UI 元素绑定到您的模型。在不重新渲染整个模板的情况下更新小的 UI 部分是最好的等待。

# maven - 如何创建默认情况下不在子模块上运行的 Mojo（如 -N 标志）

> ID：12200873
> 
> 赞同：2
> 
> 时间：2012-08-30T15:55:12.063
> 
> 标签：maven, maven-3, maven-plugin, archetypes

我编写了一个仅设计为在父模块上运行的 Maven 插件。它基本上是一个定制的原型插件，有一些附加步骤，因此它是从命令行运行的，而不是生命周期的一部分。

目前在子模块上运行时失败；它在执行命令的父模块上成功（我关心的位），但是当它然后迭代子模块时失败。现在我能想到的一种解决方法是`-N`标志 - 这解决了问题。问题是这个插件将由许多不同的人从命令行运行，我希望它尽可能简单。

我已经查看了[此](http://maven.apache.org/developers/mojo-api-specification.html#The_Descriptor_and_Annotations)页面并尝试了可能的嫌疑人；`@inheritByDefault=false`但这没有什么区别。

有什么建议么？

我想我可以在插件代码中检查*项目*对象是否至少有一个模块，如果有，则执行，否则跳过……虽然看起来不太好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:43:22.443

我通常通过将 maven 会话中的执行根目录与模块的基目录进行比较来解决这个问题：

```
public class ReactorRootRunnerMojo extends AbstractMojo {

  /**
   * @parameter expression="${session}"
   */
  private MavenSession session; 

  public void execute() throws MojoExecutionException, MojoFailureException {
    if (!isReactorRootProject()) {
        return;
    }
    // your code
  }

  private boolean isReactorRootProject() throws MojoExecutionException {
    try {
      String executionRootPath = new File(session.getExecutionRootDirectory()).getCanonicalFile().getAbsolutePath();
      String basedirPath = basedir.getCanonicalFile().getAbsolutePath();
      return executionRootPath.equals(basedirPath);
    } catch (IOException e) {
      throw new MojoExecutionException(e);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-26T14:47:51.773

您可以简单地检查 reactor 的当前项目是否与顶级项目相同并相应地继续：

```
 /**
   * @parameter expression="${session}"
   */
  private MavenSession session; 

    @Override
    public void execute() throws MojoExecutionException, MojoFailureException {
        if (!session.getCurrentProject().equals(session.getTopLevelProject())) {
            return;
        }
        // Now do stuff on the top-level project only
    } 
```

# php - PHP获取没有扩展名的当前页面名称？

> ID：12200877
> 
> 赞同：3
> 
> 时间：2012-08-30T15:55:14.180
> 
> 标签：php

我想将当前页面文件名显示为页面标题，但没有扩展名。如果可能，第一个字符应该大写。这可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T16:06:39.370

每个人都喜欢单行：

```
ucfirst(pathinfo($_SERVER['PHP_SELF'], PATHINFO_FILENAME)) 
```

从文件名中去除路径和扩展名的第二个参数`pathinfo()`(PHP >= 5.2)

顺便说一句，我使用`$_SERVER['PHP_SELF']`而不是`__FILE__`因为否则如果代码从另一个文件运行它会中断;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:59:32.173

如果你想从`script.php`到`Script`，是的：

```
// pathinfo give info about given file and returns it into an associative array:
$info = pathinfo( __FILE__ );

// the filename key holds file name without extension nor parent path:
$title = ucwords( $info['filename'] ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T16:01:17.947

对于第一个字母需要大写，使用`ucfirst()`. 那就是大写优先字符函数。您也可以`ucwords()`用于大写单词。

要获得文件名减去扩展名，请使用[`pathinfo()`funciton](http://www.php.net/manual/en/function.pathinfo.php)。

```
$path_parts = pathinfo(__FILE__);

echo ucfirst($path_parts['filename']); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T15:58:54.493

是的，您可以这样做，但您可能需要对空格进行一些额外的解析。但是，这是最简单的方法，并且直接按照您的指示进行。

```
echo '<title>';
echo ucwords(str_replace('.php', '', __FILE__));
echo '</title>'; 
```

我在这里所做的是获取**FILE**常量，它是正在执行的文件的名称。找到 .php 扩展名并将其替换为空白（假设“.php”不会出现在文件名中的其他任何位置）。

函数 ucwords() 将由空格分隔的子字符串的首字母大写。

如果您想进一步解析空格，则需要识别文件名的格式并相应地进行字符串替换/正则表达式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T15:59:27.817

是的，有可能：

```
<?php
$page = basename($_SERVER['PHP_SELF']); // Get script filename without any path information
$page = str_replace( array( '.php', '.htm', '.html' ), '', $page ); // Remove extensions
$page = str_replace( array('-', '_'), ' ', $page); // Change underscores/hyphens to spaces
$page = ucwords( $page ); // uppercase first letter of every word

echo "This title is: $page"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T16:30:00.587

您有 3 个脚本：nav.php containerpage.php 和 footer.php。

在 nav.php 中，输入：

```
<title><?php
if (isset($subtitle)) {echo "$subtitle";}
else {echo "some other title";}
?>
</title> 
```

在 container.php 中，输入：

```
<?php $subtitle = ucwords(str_replace('.php', '', __FILE__)); ?> 
```

该行之后包括您的 nav.php 脚本：

```
<?php include("nav.php"); ?> 
```

根据您的站点结构，这可能会或可能不会起作用，但这就是我在其他时候解决此问题的方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-10T00:17:07.743

我知道这个问题已有 6 年历史，但我只是想提供另一种获取文件名的方法。

```
$_SERVER['SCRIPT_FILENAME'] 
```

或者

```
$_SERVER['SCRIPT_NAME'] 
```

查看SERVER 全局上的[PHP 文档。](http://php.net/manual/en/reserved.variables.server.php)

# lua - Lua - 如何将字符串写入编辑器或浏览器窗口

> ID：12200878
> 
> 赞同：0
> 
> 时间：2012-08-30T15:55:15.583
> 
> 标签：lua

我有一个用 wxLua 用 Lua 编写的应用程序。在此应用程序运行时，我希望能够将（大）字符串发送到外部程序，以便用户可以查看字符串、搜索字符串等。

这个外部程序可以是notepad、notepad++等，甚至是浏览器窗口，只要用户可以查看和搜索文本即可。

我可以使用打开编辑器

本地句柄 = io.popen("notepad", "w") -- 例如

但是之后

句柄：写（myString）

在编辑器中不显示任何内容。如果我已经运行了记事本++，它甚至不会打开一个新窗口。

我可以使用启动浏览器

wx.wxLaunchDefaultBrowser ("http://stackoverflow.com")

但我不知道如何将 (100-200kb) 字符串传递给浏览器窗口。

非常感谢任何帮助，谢谢！跺脚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:03:18.297

打印出文本或 HTML 文件，然后在浏览器中打开它，`wx.wxLaunchDefaultBrowser ("file://path/to/file")`或使用[`os.execute`](http://www.lua.org/manual/5.1/manual.html#pdf-os.execute)以相同文件作为参数运行外部编辑器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:07:43.537

请参阅 Oleg 的帖子以获得最佳解决方案，IMO。

另一种解决方案是将您的文本放在剪贴板上，以便用户可以将其粘贴到他们喜欢的任何地方。

至于将文本注入到已经打开的应用程序中，这是非常重要的，并且超出了您可以使用 wxLua 执行的范围。您需要使用 COM 接口或使用 Win32 API 调用或同样繁琐且通常特定于应用程序的东西来遍历应用程序的控制结构。

# android - FLAG_KEEP_SCREEN_ON 无法正常工作

> ID：12200881
> 
> 赞同：2
> 
> 时间：2012-08-30T15:55:25.803
> 
> 标签：android

我的 Eclipse 中有 2 个应用程序，它们都调用了该方法

```
 getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

但是一个工作正常，另一个根本不工作（一段时间后屏幕仍然会完全变暗，并出现锁定屏幕）。我使用的代码完全相同，我很沮丧为什么它不能在第二个应用程序上运行。有人知道这是怎么发生的吗？

这是我的第二个应用程序的代码：

```
private void DimScreen()   //isDim is false initially
{
    Log.i(TAG, "isDim"+String.valueOf(isDim));
    SharedPreferences pref = getSharedPreferences(null, 0);
    String enableDim = pref.getString("enableDimScreen", "true"); //default preference is true(to dim screen)
    Log.i(TAG, "inside Dimscreen(), enableDim="+enableDim);
    if(enableDim.equals("true")&&!isDim)    //if the user want to dim the screen
    {
        Toast.makeText(StartActivity.this, "Dimming screen in 5 seconds, press Stop button to turn on the screen", Toast.LENGTH_SHORT).show();
        handler.postDelayed(r, 5000);
    }
    else {
        if(!isDim)  //if the user doesn't want to dim the screen
        {
            getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
            isDim =true;
            Log.i(TAG, "inside Dimscreen() else");
        }
    }

}
private Handler handler= new Handler();
    Runnable r = new Runnable()
    {
        public void run()
        {
            getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
            WindowManager.LayoutParams lp = getWindow().getAttributes();
            lp.screenBrightness=0.01f;
            getWindow().setAttributes(lp);  
            isDim =true;
            Log.i(TAG, "isDim "+String.valueOf(isDim));
        }
    }; 
```

编辑：我在我想在我的第二个应用程序上变暗的活动上运行镀铬仪表和进度条。

# python - 使用 Python 缓存 Flickr 图像

> ID：12200885
> 
> 赞同：0
> 
> 时间：2012-08-30T15:55:36.330
> 
> 标签：python, caching, flickr

我的 Web 应用程序显示来自 Flickr 集的照片。我正在使用[Python Flickr API](http://www.stuvel.eu/flickrapi)来收集有关我的照片的信息。我可以轻松缓存 Flickr API 调用；但是，我不确定在本地缓存**图像的最佳方法是什么。**是否有现成的解决方案，还是我需要自己构建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:39:39.407

Python Flickr API 库中没有实现这样的缓存。它也不总是被允许做这样的事情，因为你会从 Flickr 服务器复制图像，然后从你自己的网站上分发它们。如果图像被标记为“保留所有权利”，则您无权这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:53:26.113

如果您在 Web 应用程序中使用 django，请尝试[https://github.com/sorl/sorl-thumbnail](https://github.com/sorl/sorl-thumbnail)

# neo4j - Neo4j Cypher 1.8 版：关系标识符的可能错误

> ID：12200889
> 
> 赞同：4
> 
> 时间：2012-08-30T15:55:55.700
> 
> 标签：neo4j, cypher

[http://console.neo4j.org/r/yx62bk](http://console.neo4j.org/r/yx62bk)

在上图中，查询

```
start n=node(7,8,9) 
match n-[objectScore:score]->o-[:object_of_destination]->d<-[:destination_score]-n, 
o-[:instance_of]->ot, o-[:date]->oDate, d-[:date]->dDate where ot.name='HOTEL'  
return n, o, objectScore,  d; 
```

将 o 返回为空。

更改查询以删除关系标识符 - objectScore

```
start n=node(7,8,9) 
match n-[:score]->o-[:object_of_destination]->d<-[:destination_score]-n,
o-[:instance_of]->ot, o-[:date]->oDate, d-[:date]->dDate where ot.name='HOTEL'  
return n, o, objectScore,  d; 
```

并且输出正确返回 o 节点。

对于我的场景，我需要它们。不知道该怎么做？对此有任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:32:55.047

很好的发现。我们在 github 上跟踪 Cypher 问题，所以我在那里打开了一个关于它的问题：[https ://github.com/neo4j/community/issues/837](https://github.com/neo4j/community/issues/837)

非常感谢您的报告！

编辑：我发现了问题。具有讽刺意味的是，一个简单的解决方法是引入可选关系。问题出在 Cypher 可以使用的匹配器之一中，并且通过将模式的一部分标记为可选，您可以强制 Cypher 使用不同的匹配器。如果你想

因此，将您的 MATCH 更改为：

```
match n-[objectScore:score]->o-[:object_of_destination]->d<-[:destination_score]-n, 
      o-[:instance_of]->ot, 
      o-[:date]->oDate, 
      d-[?:date]->dDate 
```

一个真正的解决方案正在进行中。

# android - 长整数的 Java 异常无效 int

> ID：12200890
> 
> 赞同：0
> 
> 时间：2012-08-30T15:56:00.013
> 
> 标签：android, math, computation

我目前正在开发一个进行长时间计算的数学应用程序。每当我输入一个包含超过 9 位数字的整数时，我都会收到 java.lang.NumberFormatException: Invalid int: "..." 错误（其中 ... 被一个非常长的数字替换）。当我输入小于或等于 9 位的整数时，应用程序运行良好。我需要输出是一个整数（即没有小数位）。不太清楚为什么会发生错误。

导致问题的代码位是：

```
Intent intent = getIntent();
String message = intent.getStringExtra(MainActivity.NUMBER);
int inp = Integer.parseInt(message); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:57:57.320

an 的最大值为`int`2 ^(31) -1，即 2,147,483,647。如果您尝试解析比此更大的数字，则会引发异常。

如果您需要处理更大的数字，请使用`long`通常更大的范围（最多 2 ^(63) -1）或`BigInteger`任意大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:58:56.207

Java 的*int*数据类型仅限于 -2,147,483,648 到 2,147,483,647（含）的值。如果您想要更大的“整数”值，我建议使用*long*数据类型。

# sql-server-2008-r2 - 在大桌子上表现出色

> ID：12200891
> 
> 赞同：0
> 
> 时间：2012-08-30T15:56:01.720
> 
> 标签：sql-server-2008-r2

假设我有一个包含重复列的表，例如

```
Column1
---------
    a
    a
    a
    a
    b
    a
    c
    d
    e
    ... so on 
```

也许它有数十万行。然后说，我需要从该列中提取不同的值。`SELECT`我可以在with中轻松做到这一点`DISTINCT`，但我想知道性能？

我还可以给 Column1 中的每个项目一个 id，然后创建一个由 Column1 引用的新表（以便更适当地规范化它）。但是，这增加了插入的复杂性，并增加`joins`了其他可能的查询。

有什么方法可以只索引列中的不同值，还是规范化是唯一的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:06:00.597

column1 上的索引将大大加快不同的处理，但如果您愿意在插入/更新/删除期间交换一些空间和一些（短）时间，则可以诉诸[物化视图](http://msdn.microsoft.com/en-us/library/ms191432.aspx)。这是索引视图，您可以将其视为按照视图定义生成和维护的动态表。

```
create view view1
with schemabinding
as
   select column1, 
          count_big(*) cnt
     from theTable
    group by column1
-- create unique clustered index ix_view1 on view1(column1) 
```

（不要忘记执行注释创建索引命令。我通常这样做，以便视图定义包含索引定义，提醒我在需要更改视图时应用它。）

当你想使用它时，一定要添加[noexpand 提示](http://msdn.microsoft.com/en-us/library/ms187373.aspx)来强制使用物化数据（这部分对我来说仍然很神秘 - 作为性能增强创建的东西默认情况下没有打开，而是在现场激活）。

```
select *
  from view1 (noexpand) 
```

# vb.net - 无法使用已与其底层 RCW 分离的 Infopath COM 对象

> ID：12200894
> 
> 赞同：0
> 
> 时间：2012-08-30T15:56:11.080
> 
> 标签：vb.net, interop, com-interop, infopath, infragistics

我遇到了一个问题，我似乎无法在互联网上的任何地方找到答案。我有一个在 Windows 窗体内托管 Infopath.FormControl 的应用程序。每个 InfoPath 表单都有 5 个必须显示的视图，并且使用 Infragistics UI v11.1 控件，我们在应用程序的单独选项卡上拥有每个视图。

该应用程序能够显示您正确选择的前四个视图，无论您选择什么顺序（例如 1、5、4、2 或 1、2、3、4），但在第四个之后一，它总是会出现错误“已经与其底层RCW分离的COM对象无法使用”。

```
Private Sub utForm_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles utForm.Click

    lastTabClicked = Me.utForm.SelectedTab.Text
    Me.OHeader1.Focus()
    ' If Me.formIsReadOnly Then
    If Me.fcInfoPath Is Nothing Or wasPrinted Then
        If Not Me.utForm.SelectedTab Is Nothing Then
            processReadOnlyTabChange(Me.utForm.SelectedTab.Text)
            Exit Sub
        End If
    End If

    'This is the line of code that will get the exception, but by the time we get
    'here, the COM object has already been released.
    Me.fcInfoPath.XmlForm.CurrentView.ForceUpdate()

    'Failed Ideas to stop the Com object from separating from it's wrapper (RCW)
    'Dim test As IntPtr = Marshal.GetIUnknownForObject(Me.fcInfoPath)
    'Marshal.AddRef(test)
    'GC.SuppressFinalize(Me.fcInfoPath)
    'SyncLock fcInfoPath for duration of event

    If Not Me.utForm.SelectedTab Is Nothing Then
        processTabChange(Me.utForm.SelectedTab.Key)
    End If
End Sub 
```

我已经深入研究了代码，它从不调用 Marshal.ReleaseComObject 或任何处置方法。我还在 FormControl 对象上执行了 GC.SuppressFinalize，并在更新视图的代码周围添加了一个 SyncLock，以防出现线程问题。作为最后的努力，我什至手动添加了数百个对 COM 对象的引用，因为 COM 对象应该仅在删除最后一个引用后才被释放。这些事情都没有任何影响。总是在第四次视图更改之后，它会出现该错误，并且遵循每一行代码让我无处可去。它总是在设置第四个视图和点击上述事件之间的某个时候丢失 COM 对象。据我所知，在此期间没有执行任何代码，因此我陷入了这个问题。

编辑：我还应该补充一点，这是一个从 .Net 2 升级到 .Net 4 的应用程序，之前它使用 InfoPath 2007 时运行良好。现在，它使用的是 InfoPath 2010 x64（我没有选择办公室版本），我认为 64 位版本的 InfoPath 可能存在一些可能导致此问题的问题。

编辑 2：这不是 64 位版本的问题。我切换了我的 Office 版本并使用 Office 2010 x86 重新编译，但仍然遇到与以前相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T18:49:53.673

我不熟悉 InfoPath 的 COM 接口，但在我从 .Net 使用的所有其他 COM 应用程序（Office 对象，如 Excel、Word 等）中，该错误：

`"COM object that has been separated from its underlying RCW cannot be used."`

始终意味着应用程序对象已退出，通常是因为它在其托管的 VBA 引擎中引发了未处理的错误。

AFAIK，您无法使用 .Net 代码/调用阻止应用程序对象退出。如果你有的话，我会检查你的代码隐藏。

* * *

实际上再次查看您的代码：

```
If Me.fcInfoPath Is Nothing Or wasPrinted Then
    ...
End If

'This is the line of code that will get the exception, but by the time we get
'here, the COM object has already been released.
Me.fcInfoPath.XmlForm.CurrentView.ForceUpdate()

    ... 
```

`Me.fcInforPath Is Nothing ..`很可能，甚至在您进行测试之前，该应用程序就已经退出了。在处理 .net/COM 包装器时，这是一个令人讨厌的问题，即使 COM 对象早已不复存在，.Net 包装器对象仍然存在，因此它通过了这些“什么都没有”测试，然后只有在您实际尝试使用时才会失败它。

# ruby-on-rails - tinymce 预插件按钮看起来已禁用

> ID：12200895
> 
> 赞同：2
> 
> 时间：2012-08-30T15:56:15.393
> 
> 标签：ruby-on-rails, tinymce, pre

我在我的 rails 3.2 应用程序中使用 tinymce。我在配置中的 tinymce.yml 中添加了 pre 作为插件。但是 UI 上显示的用于添加代码段的按钮看起来已禁用。为什么？我的页面上根本没有 javascript 或 css 错误。

# wordpress - Wordpress/Apache - 图像文件名中带有 unicode 字符的 404 错误

> ID：12200901
> 
> 赞同：7
> 
> 时间：2012-08-30T15:56:32.547
> 
> 标签：wordpress, apache, unicode

我们最近将一个网站移到了新服务器上，并且遇到了一个奇怪的问题，即一些上传的文件名中包含 unicode 字符的图像给我们一个 404 错误。

通过 ssh/FTP，我们可以看到文件肯定在那里。

例如：

[http://sjofasting.no/project/adnoy](http://sjofasting.no/project/adnoy)

所有图像都不起作用：

代码：

```
<img class='image-display' title='' src='http://sjofasting.no/wp/wp-content/uploads/2012/03/ådnøy_1_2.jpg' width='685' height='484'/> 
```

SSH：

> -rw-r--r-- 1 xxxxxxxx xxxxxxxx 836813 8 月 3 日 16:12 ådnøy_1_2.jpg

同样奇怪的是，如果您导航到该目录，您甚至可以单击图像并且它可以工作：

[http://sjofasting.no/wp/wp-content/uploads/2012/03/](http://sjofasting.no/wp/wp-content/uploads/2012/03/)

单击“ådnøy_1_2.jpg”，它就可以工作了。

不知何故，wordpress正在生成

> [http://sjofasting.no/wp/wp-content/uploads/2012/03](http://sjofasting.no/wp/wp-content/uploads/2012/03) /ådnøy_1_2.jpg

并从直接文件夹浏览中复制正在生成

> [http://sjofasting.no/wp/wp-content/uploads/2012/03/a%CC%8Adn%C3%B8y_1_2.jpg](http://sjofasting.no/wp/wp-content/uploads/2012/03/a%CC%8Adn%C3%B8y_1_2.jpg)

到底是怎么回事？？

* * *

编辑：

如果我从 wordpress 源中复制图像 url，我会得到：

[http://sjofasting.no/wp/wp-content/uploads/2011/11/Bore-Strand-Hotellg%C3%A5rd-12.jpg](http://sjofasting.no/wp/wp-content/uploads/2011/11/Bore-Strand-Hotellg%C3%A5rd-12.jpg)

从 apache 浏览器复制时，我得到：

[http://sjofasting.no/wp/wp-content/uploads/2011/11/Bore-Strand-Hotellga%cc%8ard-12.jpg](http://sjofasting.no/wp/wp-content/uploads/2011/11/Bore-Strand-Hotellga%cc%8ard-12.jpg)

造成这种差异的原因是：%C3%A5 和 %cc%8

??

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T22:23:48.790

Unicode 规范化。

`0xC3` `0xA5`是 U+00E5 a-with-ring 的 UTF-8 编码。

`0xCC` `0x8A`是 U+030A 组合环的 UTF-8 编码。

U+0035 是写 a 环的组合（范式 C）方式；一个`a`字母后跟 U+030A 是分解（Normal Form D）的写法。`å`vs `å` - 它们看起来应该相同，尽管它们可能会因字体渲染而略有不同。

现在通常情况下，您拥有哪一个并不重要，因为明智的文件系统不会影响它们。如果你保存一个名为`[char U+00E5].txt`( `å.txt`) 的文件，它在 Windows 和 Linux 下仍然是那个名称。

另一方面，Mac 是疯狂的。文件系统更喜欢 Normal Form D，因为您传递给它的任何组合字符都会转换为分解字符。如果你将一个文件放入被调用`[char U+00E5].txt`并立即列出目录，你会发现你实际上有一个名为`a[char U+030A].txt`. 您仍然*可以*像在 Mac 上一样访问该文件，`[char U+00E5].txt`因为它会在查找之前将该输入转换为 Normal Form D，但是您*无法*恢复与您输入的字符序列术语相同的文件名：这是一种有损转换。

因此，如果您将文件保存在 Mac 上，然后传输到文件系统`[char U+00E5].txt`并在其中`a[char U+030A].txt`引用不同的文件，您将获得断开的链接。

更新页面以指向 URL 的 Normal Form D 版本，或从不会严重破坏 Unicode 字符的文件系统重新上传文件。

思考不同，导致奇怪的互操作性问题。

# java - 为什么摆动布局管理器自下而上工作？

> ID：12200902
> 
> 赞同：2
> 
> 时间：2012-08-30T15:56:32.847
> 
> 标签：java, swing, layout

在[http://docs.oracle.com/javase/tutorial/uiswing/layout/howLayoutWorks.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/howLayoutWorks.html)我们可以阅读：

“最终结果是，为了确定容器的最佳大小，系统确定容器层次结构底部的容器大小。这些大小然后渗透到容器层次结构中，最终确定容器的总大小。”

此注释与特定布局管理器无关，但似乎适用于通用布局机制。

如果一位经验丰富的 Java/Swing 程序员能够解释为什么这种方法比自上而下的方法更好，我将不胜感激。

在自上而下的方法中，顶级容器会告诉它的组件： - 嘿组件，你有 WxH 像素来布局自己！- 然后这些组件最终会告诉他们自己的组件做同样的事情。根据可用空间，每个组件将决定如何将其子组件布局到层次结构中。最终，一些组件可能会决定在空间不足的情况下不自行绘制。

这种方法在我看来（对于程序员）更容易理解和维护。

有人知道自上而下工作的替代布局管理器吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:10:58.063

我认为你应该再读一遍那句话

> 最终结果是，为了确定容器的最佳大小，系统确定容器层次结构底部的容器大小。然后这些大小会渗透到容器层次结构中，最终确定容器的总大小。

这谈到了容器的*最佳*尺寸。这当然是由所有子组件的最佳尺寸决定的，因此最好从下到上计算。

当您`pack`在`JFrame`.

然而，最终子组件确实只能占用父组件允许的空间。这就是`LayoutManager`发挥作用的地方：您在父级上设置布局管理器，它将告诉子级他们的位置和大小（通常考虑诸如子组件指示的首选大小之类的事情）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:03:04.210

布局管理器之所以如此工作，是因为他们必须弄清楚他们管理的容器及其子容器的大小。做到这一点的最好方法是尽可能深入并通过再次返回（自下而上）开始计算其大小。如果一个容器有其他容器作为子容器，则这是递归完成的。

例如：

*   我们有一个JPanel j1
*   在 j1 中有一个 JButton
*   j1 在另一个面板 j2 内

现在计算 j2 大小的最好方法是一直到 jbutton 。它计算出 JButton 的大小是 50 x 50 像素。这意味着 j1 的大小是 50 x 50 加上它包含的任何孩子。假设它的大小为 200 x 200。在这种情况下，j2 知道它的孩子是 200 x 200，并在计算其大小时考虑到这一点。最后它达到 500 x 500 的大小（对于 j2）。

# sql-server - Amazon RDS SQL Server 使数据库联机

> ID：12200907
> 
> 赞同：21
> 
> 时间：2012-08-30T15:57:08.397
> 
> 标签：sql-server, amazon-rds

使用 Management Studio 成功使数据库实例脱机后，我尝试使用 Management Studio 和执行以下脚本使同一个数据库重新联机。

```
ALTER DATABASE [dbname] SET ONLINE 
```

这会导致以下错误

> 用户无权更改数据库“dbname”，数据库不存在，或数据库未处于允许访问检查的状态。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-30T15:57:08.397

事实证明，在 RDS 上，您可以使用上面的标准 SQL 脚本使实例脱机，但 Amazon 要求您执行存储过程才能使其恢复联机；

```
EXEC rdsadmin.dbo.rds_set_database_online dbname 
```

请参阅此处了解更多信息[http://docs.amazonwebservices.com/AmazonRDS/latest/UserGuide/Appendix.SQLServer.CommonDBATasks.html](http://docs.amazonwebservices.com/AmazonRDS/latest/UserGuide/Appendix.SQLServer.CommonDBATasks.html)

# sql-server - 我可以在不升级 SQL Server 的情况下将 Reporting Services 2008 升级到 Reporting Service 2008 R2

> ID：12200910
> 
> 赞同：2
> 
> 时间：2012-08-30T15:57:21.713
> 
> 标签：sql-server, reporting-services, sql-server-2008-r2, ssrs-2008

我需要将我们的 RS 2008 服务器升级到 RS 2008 R2。但是，我无法升级它当前使用的 SQL Server，因为 SQL Server 在我们的服务器场上，而我们在场上没有权限。

是否可以在不升级 SQL Server 2008 的情况下升级到 2008 R2？在升级之前我需要考虑什么特别的事情？另外，这将是稳定的配置吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T20:15:50.550

经过更多搜索：答案是肯定的：

[安装 Reporting Services 2008 R2](http://download.microsoft.com/download/6/1/6/616FF1A6-9269-4A0B-83F8-D9024AA39FA5/SQLServerReportingServicesGuide.pdf)

第33页提到

在此过程中我注意到的另一件事是执行安装的帐户需要在您正在安装 RS 的服务器上具有本地管理员，并且在安装期间需要是场服务器上的系统管理员。在我们的案例中，我们请求了临时系统管理员，并在安装成功后将其撤消。

# asp.net - VS2012 母版页不呈现对样式表声明的更改

> ID：12200912
> 
> 赞同：0
> 
> 时间：2012-08-30T15:57:26.457
> 
> 标签：asp.net, visual-studio-2012

我正在尝试使用 asp.net 4.0 和 VS 2012 制作一个 Web 应用程序，由于某种原因，如果它们不在文件夹中，我的样式表声明是该站点的第一个版本的库存。现在它们位于文件夹中，声明仍在呈现并推送到浏览器，如下所示：

```
 <link href="global.css" rel="stylesheet" type="text/css" /> 
```

而它们应该是（并且在 VS 内部）：

```
 <link href="style/global.css" rel="stylesheet" type="text/css" /> 
```

我真的不知道发生了什么，我做错了什么吗？我已经构建、重建和清理了解决方案，并按下了刷新按钮（IE9、Firefox 和 chrome 中的按钮、f5、控件 f5）五十次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:33:26.070

我有一个类似的问题。这是一个浏览器缓存问题。在 IE 中转到工具 | 互联网选项 | 常规选项卡。单击浏览历史记录“设置”。将其设置为“检查存储页面的新版本”到“每次访问该页面”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:46:10.107

这可能是由于浏览器中的缓存。我在开发网站时所做的是禁用浏览器缓存。然后每次它都会加载修改后的文件。

在 Google chrome 中，您可以在测试更改时使用隐身窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-22T11:51:40.627

就在我认为我会重新启动之前，我尝试重命名样式表。这为我解决了。似乎确实是一些缓存问题。

# sql - 聚合查询返回多条记录

> ID：12200913
> 
> 赞同：1
> 
> 时间：2012-08-30T15:57:29.720
> 
> 标签：sql, tsql, aggregation

我有下表（*简化*）：

```
RecordID       bigint         IDENTITY
ItemID         bigint
ConfigID       varchar
Status         varchar
StatusDate     date 
```

**样本数据**：

```
001  04  1E  10    2007-08-14 13:57:54
002  04  1E  12    2007-08-21 16:10:21
003  04  1D  10    2007-09-27 17:14:13
004  04  1D  43    2011-01-10 13:44:50
005  04  1B  50    2008-06-20 09:09:51
006  05  1A  17    2007-12-18 14:04:56
007  05  1A  11    2007-10-17 08:23:52
008  05  1A  12    2007-10-19 12:54:18
009  05  1B  12    2007-11-02 09:23:54
010  05  1B  40    2010-06-17 09:34:33
011  07  1A  12    2007-11-19 14:48:06
012  07  1A  12    2007-11-19 15:02:48
013  07  1B  40    2011-01-10 14:36:16
014  08  1B  10    2009-05-22 11:14:42
015  08  1B  12    2007-11-20 17:02:44
016  08  1A  12    2007-12-12 16:11:57
017  08  1A  10    2009-11-12 11:12:45
018  08  1C  35    2011-01-10 18:30:10
019  08  1D  12    2009-10-14 14:34:47
020  08  1D  10    2009-10-14 14:35:09 
```

这就是我的问题：

我需要能够让最终用户查询此数据以返回记录，这些记录将显示 itemid 和 config 的每个唯一组合的最新状态和 statusdate。因此，使用上面的示例，我想返回与以下内容匹配的记录集：

```
002  04  1E  12    2007-08-21 16:10:21
004  04  1D  43    2011-01-10 13:44:50
005  04  1B  50    2008-06-20 09:09:51
006  05  1A  17    2007-12-18 14:04:56
010  05  1B  40    2010-06-17 09:34:33
012  07  1A  12    2007-11-19 15:02:48
013  07  1B  40    2011-01-10 14:36:16
017  08  1A  10    2009-11-12 11:12:45
018  08  1C  35    2011-01-10 18:30:10
020  08  1D  10    2009-10-14 14:35:09 
```

简而言之：我需要能够返回每个项目配置的最新状态和状态日期。

在这方面的任何帮助将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:02:01.120

您可以`GROUP BY`在子查询中执行该子句。尝试，

```
SELECT  a.*
FROM    yourtable a 
        INNER JOIN
        (
            SELECT      ItemID, ConfigID, MAX([StatusDate]) maxStat
            FROM        yourtable
            GROUP BY    ItemID,ConfigID
        ) b on a.configID = b.configID AND
                a.[statusDate] = b.MaxStat AND
                a.ItemID = b.ItemID
Order by RecordID 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!3/f210a/10)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T16:05:13.013

```
SELECT
    RecordID,
    ItemID,
    ConfigID,
    Status,
    StatusDate
FROM
    (SELECT
        RecordID,
        ItemID,
        ConfigID,
        Status,
        StatusDate,
        ROW_NUMBER() OVER(PARTITION BY ItemId,ConfigID ORDER BY StatusDate DESC) As StatusOrder
    FROM
        MyTable) Statuses
WHERE
    StatusOrder= 1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T16:11:20.017

在 SQL Server 2005+ 中，您可以为此使用 CTE：

```
;with cte as
(
  select recordid,
    itemid,
    configid,
    status,
    statusdate,
    row_number() over(partition by itemid, configid
                        order by statusdate desc) rn
  from yourtable
)
select *
from cte
where rn = 1
order by recordid 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/f210a/1)

# c# - 使用 ODBC 通过 ASP.NET 连接到 MySql

> ID：12200917
> 
> 赞同：0
> 
> 时间：2012-08-30T15:57:44.157
> 
> 标签：c#, asp.net

请帮我解决这个问题。

我正在尝试使用 ASP.Net 连接到 MySql。我正在使用此代码执行此操作：

```
using System.Data;
using System.Data.Odbc;
//......
DataSet Mysql_ds = new DataSet();
OdbcConnection Mysql_con;

string Mysql_conStr = "Driver={MySQL ODBC 4.1         Driver};Server=SERVERNAME;Database=DBNAME;uid=USER;pwd=PASS";

Mysql_con = new OdbcConnection(Mysql_conStr);
Mysql_con.Open(); 
//.... 
```

当我在 C#、WindowsFrom 应用程序中使用此代码时，此代码运行良好，但是当我在 ASP.NET 中使用此代码并将其上传到我的服务器时，当我转到我的网站地址时，我收到此错误：

**异常详细信息：** System.Data.Odbc.OdbcException：错误 [IM002] [Microsoft][ODBC 驱动程序管理器] 未找到数据源名称且未指定默认驱动程序

错误行在最后一行（ Mysql_con.open() ）。

我进行了很多搜索并做了一些尝试，但还没有解决:(我应该如何解决这个问题！或者有没有更好的方法来创建 mysql 连接！？

以下是有关安装在服务器站点上的 MySql 的一些信息：

localhost：服务器版本：4.1.22-community-nt 协议版本：10 服务器：localhost via TCP/IP 用户：USER@127.0.0.1

phpMyAdmin - 2.10.1：MySQL 客户端版本：5.0.45 使用的 PHP 扩展：mysql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:04:51.250

你调整你的数据源，你的服务器名称

```
string Mysql_conStr = "Driver={MySQL ODBC 4.1 Driver};
                       Server=/*ReplaceYourValue*/; //<-- Ajust the value
                       Database=DBNAME;uid=USER;pwd=PASS"; 
```

# c# - 可以将 CoreDispatcher 传递给 Singleton 以在 UI 线程上自动引发事件吗？

> ID：12200920
> 
> 赞同：0
> 
> 时间：2012-08-30T15:57:52.310
> 
> 标签：c#, .net, microsoft-metro, windows-runtime

我有一个 Singleton 类 LocationManager，它处理我的 Windows Metro 应用程序中的所有地理位置。

因为来自 Geolocator 对象的 .PositionChanged 事件通常在后台线程上引发，所以我想将我的类传递给 CoreDispatcher 的引用，以便它可以在 UI 线程上自动引发自己的事件。例如：

```
public class LocationManager
{
    // Events
    public event EventHandler<LocationUpdatedEventArgs> LocationUpdated = delegate { };

    // Private members
    Geolocator gl = null;
    CoreDispatcher dispatcher = null;

    public void StartUpdating(CoreDispatcher dispatcher)
    {
        this.dispatcher = dispatcher;

        gl = new Geolocator();
        gl.PositionChanged += gl_PositionChanged;
    }

    async void gl_PositionChanged(Geolocator sender, PositionChangedEventArgs args)
    {
        // Ensure this class's event is raised on UI thread
        await dispatcher.RunAsync(CoreDispatcherPriority.Normal,  () => 
            {
                LocationUpdated(this,  new LocationUpdatedEventArgs(args.Position));
            }
        );   
    } 
```

我想知道我是否应该将 dispatcher.RunAsync 的东西放在我的每个监听 UI 对象中（即 MainPage.xaml.cs）——但这种方法似乎可以节省代码的重复。这种方法有什么缺点吗？例如，对调度程序的引用是否会变得陈旧或无效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:26:09.280

就个人而言，我避免将`Dispatcher`（或类似的）对象放置在 UI 层之上的任何层中。`SynchronizationContext`更好。

在您的情况下，我将采用使用[Dataflow](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx)的方法（可以使用[Rx](http://msdn.microsoft.com/en-us/data/gg577609.aspx)完成非常相似的事情）：

```
public class LocationManager
{
  // Events
  public event EventHandler<LocationUpdatedEventArgs> LocationUpdated = delegate { };

  // Private members
  Geolocator gl = null;
  ActionBlock<PositionChangedEventArgs> block = null;

  public void StartUpdating()
  {
    // Set up the block to raise our event on the UI thread.
    block = new ActionBlock<PositionChangedEventArgs>(
        args =>
        {
          LocationUpdated(this, new LocationUpdatedEventArgs(args.Position));
        },
        new ExecutionDataflowBlockOptions
        {
          TaskScheduler = TaskScheduler.FromCurrentSynchronizationContext(),
        });

    // Start the Geolocator, sending updates to the block.
    gl = new Geolocator();
    gl.PositionChanged += (sender, args) =>
    {
      block.Post(args);
    };
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:29:08.620

你考虑过[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)吗？

您所描述的听起来像是发布者 - 订阅者关系。当发布者有东西要发布时，所有订阅者都会收到该发布。您的发布者不必是单例的，但它可以是。这有帮助吗？

# html - Outlook 2010 调整标题图像的大小。使固定？

> ID：12200921
> 
> 赞同：2
> 
> 时间：2012-08-30T15:57:53.093
> 
> 标签：html, image, resize, outlook

我正在编写一个 HTML 电子邮件通讯模板。我已经在所有可能的浏览器和电子邮件主机中对其进行了测试，一切看起来都很棒。当它进入 Outlook 2010 时，它在预览模式下看起来很棒。但是当您双击并进入完整模式时，它会获取标题图像并将其放大到大于表格宽度。

我已经阅读了一些，他们建议将图像重新保存为 96dpi 图像而不是 72dpi。仍然没有帮助！！！！我已经多次阅读我的代码，但我仍然找不到修复程序。

任何帮助都会很棒！

我的代码如下。有人可以校对它并让我知道我是否做错了什么以及是否有修复

干杯

```
 <table border="0" cellpadding="10" cellspacing="0" width="599px" id="templatePreheader">
      <tr>
        <td valign="top" class="preheaderContent" style="border-collapse: collapse;">
          <table border="0" cellpadding="0" cellspacing="0" width="100%">
            <tr>
              <td valign="top" style="border-collapse: collapse;height:15px;">

              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>

    <table border="0" cellpadding="0" cellspacing="0" width="599px" id="templateContainer" style="border-top-width: 0; border-right-width: 0; border-bottom-width: 0; border-left-width: 0; background-color: #FFFFFF;" bgcolor="#FFFFFF">
      <tr>
        <td align="center" valign="top" style="border-collapse: collapse;">
          <table border="0" cellpadding="0" cellspacing="0" width="599" id="templateImage">
            <tr>
              <td valign="top" style="border-collapse: collapse;width:599px;">
                <img src="http://s3.amazonaws.com/S1MPLE/system/layouts/David%27s%20Designs/chefCode/top2.jpg" style="max-width: 599px; height: 100%; outline: none; text-decoration: none; border-top-width: 0; border-right-width: 0; border-bottom-width: 0; border-left-width: 0;" alt="Image">
              </td>
            </tr>
          </table>
        </td>
      </tr>
     </table>

      <table border="0" cellpadding="0" cellspacing="0" width="599px" id="templateContainer" style="border-top-width: 0; border-right-width: 0; border-bottom-width: 0; border-left-width: 0; background-color: #FFFFFF;" bgcolor="#FFFFFF">
      <tr>
        <td align="center" valign="top" style="border-collapse: collapse;">
          <table border="0" cellpadding="0" cellspacing="0" width="599" style="background-color: #FFFFFF;" bgcolor="#FFFFFF">
            <tr>
              <td valign="top"  align="left" style="border-collapse: collapse;padding-bottom:10px;padding-top:10px;font-family: Arial, Helvetica, sans-serif;font-size:14px;color:#ff0000;padding-right:20px;padding-left:20px;">
              This message is from Simple and Cheney Brothers.
              </td>
            </tr>
            <tr>
              <td valign="top"  align="left" style="border-collapse: collapse;padding-bottom:10px;padding-top:10px;font-family: Arial, Helvetica, sans-serif;font-size:20px;color:#1b4456;padding-right:20px;padding-left:20px;"">
              Dear {{ offer.employee.first_name }}, 
              </td>
            </tr>
            <tr>
              <td valign="top" align="left" style="border-collapse: collapse;padding-bottom:10px;padding-top:0px;font-family: Arial, Helvetica, sans-serif;font-size:12px;color:#000000;line-height:18px;padding-right:20px;padding-left:20px;"">
             {{ deal.details|capfirst|linebreaksbr }}  
              </td>
            </tr>
             <tr>
              <td valign="top" align="left" style="border-collapse: collapse;padding-bottom:10px;padding-top:20px;font-family: Arial, Helvetica, sans-serif;font-size:20px;color:#000000;line-height:18px;padding-right:20px;padding-left:20px;"">
              Sign Up & Save
              </td>
            </tr>
            <tr>
              <td valign="top" align="left" style="border-collapse: collapse;padding-bottom:10px;padding-top:5px;font-family: Arial, Helvetica, sans-serif;font-size:12px;color:#000000;line-height:18px;padding-right:20px;padding-left:20px;"">
              Go to: <a href="http://www.simplebrs.com/" style="font-family: Arial, Helvetica, sans-serif;font-size:12px;color:#1b4456;line-height:18px;"> www.simplebrs.com</a>
              </td>
            </tr>
          </table>
        </td>
      </tr>
     </table>

     <table border="0" cellpadding="0" cellspacing="0" width="599px" id="templateContainer" style="border-top-width: 0; border-right-width: 0; border-bottom-width: 0; border-left-width: 0; background-color: #FFFFFF;" bgcolor="#FFFFFF">
      <tr>
        <td align="center" valign="top" style="border-collapse: collapse;">
          <table border="0" cellpadding="0" cellspacing="0" width="599">
          <tr>
              <td valign="top" align="left" style="border-collapse: collapse;padding-bottom:5px;padding-top:5px;font-family: Arial, Helvetica, sans-serif;font-size:12px;color:#1b4456;line-height:18px;padding-right:20px;padding-left:20px;"">
              username: <span style="color:#000000;">{{ offer.employee.email }}</span>
              </td>
              <td valign="top" align="right" style="border-collapse: collapse;padding-bottom:5px;padding-top:5px;font-family: Arial, Helvetica, sans-serif;font-size:12px;color:#1b4456;line-height:18px;padding-right:20px;padding-left:10px;"">
              call toll free: <span style="color:#000000;">1-877-302-0560</span>
              </td>
          </tr>
          <tr>
             <td valign="top" align="left" style="border-collapse: collapse;padding-bottom:25px;padding-top:0px;font-family: Arial, Helvetica, sans-serif;font-size:12px;color:#1b4456;line-height:18px;padding-right:20px;padding-left:20px;"">
              password: <span style="color:#000000;">getdeals</span>
              </td>
              <td valign="top" align="right" style="border-collapse: collapse;padding-bottom:25px;padding-top:0px;font-family: Arial, Helvetica, sans-serif;font-size:12px;color:#1b4456;line-height:18px;padding-right:20px;padding-left:20px;"">
              call toll free: <span style="color:#000000;"> <a href="mailto:help@simpledealsnow.com" style="font-family: Arial, Helvetica, sans-serif;font-size:12px;color:#1b4456;line-height:18px;">help@simpledealsnow.com</a></span>
              </td>
          </tr>
          </table>
        </td>
      </tr>
     </table>

     <table border="0" cellpadding="0" cellspacing="0" width="599px" id="templateContainer" style="border-top-width: 0; border-right-width: 0; border-bottom-width: 0; border-left-width: 0; background-color: #FFFFFF;" bgcolor="#FFFFFF">
      <tr>
        <td align="center" valign="top" style="border-collapse: collapse;">
          <table border="0" cellpadding="0" cellspacing="0" width="599" id="templateImage">
            <tr>
              <td valign="top" style="border-collapse: collapse;width:599px;">
                <img src="http://s3.amazonaws.com/S1MPLE/system/layouts/David%27s%20Designs/chefCode/bottom2.jpg" style=width: 599px; height: 77px; line-height: 100%; outline: none; text-decoration: none; border-top-width: 0; border-right-width: 0; border-bottom-width: 0; border-left-width: 0;width:599px;" alt="Image">
              </td>
            </tr>
          </table>
        </td>
      </tr>
     </table>

     <table border="0" cellpadding="0" cellspacing="0" width="599px" id="templatePreheader">
      <tr>
        <td valign="top" class="preheaderContent" style="border-collapse: collapse;">
          <table border="0" cellpadding="0" cellspacing="0" width="100%">
            <tr>
              <td valign="top" style="border-collapse: collapse;height:15px;">

              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>

  </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T20:14:56.497

我遇到过同样的问题。我通过确切的目标向我们办公室的几个用户发送了一封 html 电子邮件，其中只有 1 个用户遇到了上述问题。

实际导致该问题的原因是那台机器上的 DPI 设置设置为 125%。我让他们把它改回 100%（默认），这样就解决了这个问题。因此，本质上，与代码或图像大小/dpi 无关

这是在 Windows 7 中更改 dpi 设置的链接。

[http://www.dummies.com/how-to/content/change-your-monitors-dots-per-inch-dpi-setting.html](http://www.dummies.com/how-to/content/change-your-monitors-dots-per-inch-dpi-setting.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:36:09.197

好的，我更详细地查看了您的代码。你有一堆关于 HTML 的验证问题。

我没有说出了什么问题，而是清理了代码并将其重新发布在下面。我希望这对你有用。

有引号，最后有一个额外的。我还更改了您的一些 ID="" 属性（只是在它们的末尾添加了数字）。ID 属性应该是不同的（标准协议）。

```
<table border="0" cellpadding="10" cellspacing="0" width="599px" id="templatePreheader1">
  <tr>
    <td valign="top" class="preheaderContent" style="border-collapse: collapse;">
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td valign="top" style="border-collapse: collapse;height:15px;">

          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>

<table border="0" cellpadding="0" cellspacing="0" width="599px" id="templateContainer1" style="border-top-width: 0; border-right-width: 0; border-bottom-width: 0; border-left-width: 0; background-color: #FFFFFF;" bgcolor="#FFFFFF">
  <tr>
    <td align="center" valign="top" style="border-collapse: collapse;">
      <table border="0" cellpadding="0" cellspacing="0" width="599" id="templateImage2">
        <tr>
          <td valign="top" style="border-collapse: collapse;width:599px;">
            <img src="http://s3.amazonaws.com/S1MPLE/system/layouts/David%27s%20Designs/chefCode/top2.jpg" style="max-width: 599px; height: 100%; outline: none; text-decoration: none; border-top-width: 0; border-right-width: 0; border-bottom-width: 0; border-left-width: 0;" alt="Image">
          </td>
        </tr>
      </table>
    </td>
  </tr>
 </table>

  <table border="0" cellpadding="0" cellspacing="0" width="599px" id="templateContainer2" style="border-top-width: 0; border-right-width: 0; border-bottom-width: 0; border-left-width: 0; background-color: #FFFFFF;" bgcolor="#FFFFFF">
  <tr>
    <td align="center" valign="top" style="border-collapse: collapse;">
      <table border="0" cellpadding="0" cellspacing="0" width="599" style="background-color: #FFFFFF;" bgcolor="#FFFFFF">
        <tr>
          <td valign="top"  align="left" style="border-collapse: collapse;padding-bottom:10px;padding-top:10px;font-family: Arial, Helvetica, sans-serif;font-size:14px;color:#ff0000;padding-right:20px;padding-left:20px;">
          This message is from Simple and Cheney Brothers.
          </td>
        </tr>
        <tr>
          <td valign="top"  align="left" style="border-collapse: collapse;padding-bottom:10px;padding-top:10px;font-family: Arial, Helvetica, sans-serif;font-size:20px;color:#1b4456;padding-right:20px;padding-left:20px;">
          Dear {{ offer.employee.first_name }}, 
          </td>
        </tr>
        <tr>
          <td valign="top" align="left" style="border-collapse: collapse;padding-bottom:10px;padding-top:0px;font-family: Arial, Helvetica, sans-serif;font-size:12px;color:#000000;line-height:18px;padding-right:20px;padding-left:20px;">
         {{ deal.details|capfirst|linebreaksbr }}  
          </td>
        </tr>
         <tr>
          <td valign="top" align="left" style="border-collapse: collapse;padding-bottom:10px;padding-top:20px;font-family: Arial, Helvetica, sans-serif;font-size:20px;color:#000000;line-height:18px;padding-right:20px;padding-left:20px;">
          Sign Up & Save
          </td>
        </tr>
        <tr>
          <td valign="top" align="left" style="border-collapse: collapse;padding-bottom:10px;padding-top:5px;font-family: Arial, Helvetica, sans-serif;font-size:12px;color:#000000;line-height:18px;padding-right:20px;padding-left:20px;">
          Go to: <a href="http://www.simplebrs.com/" style="font-family: Arial, Helvetica, sans-serif;font-size:12px;color:#1b4456;line-height:18px;"> www.simplebrs.com</a>
          </td>
        </tr>
      </table>
    </td>
  </tr>
 </table>

 <table border="0" cellpadding="0" cellspacing="0" width="599px" id="templateContainer3" style="border-top-width: 0; border-right-width: 0; border-bottom-width: 0; border-left-width: 0; background-color: #FFFFFF;" bgcolor="#FFFFFF">
  <tr>
    <td align="center" valign="top" style="border-collapse: collapse;">
      <table border="0" cellpadding="0" cellspacing="0" width="599">
          <tr>
              <td valign="top" align="left" style="border-collapse: collapse;padding-bottom:5px;padding-top:5px;font-family: Arial, Helvetica, sans-serif;font-size:12px;color:#1b4456;line-height:18px;padding-right:20px;padding-left:20px;">
              username: <span style="color:#000000;">{{ offer.employee.email }}</span>
              </td>
              <td valign="top" align="right" style="border-collapse: collapse;padding-bottom:5px;padding-top:5px;font-family: Arial, Helvetica, sans-serif;font-size:12px;color:#1b4456;line-height:18px;padding-right:20px;padding-left:10px;">
              call toll free: <span style="color:#000000;">1-877-302-0560</span>
              </td>
          </tr>
          <tr>
             <td valign="top" align="left" style="border-collapse: collapse;padding-bottom:25px;padding-top:0px;font-family: Arial, Helvetica, sans-serif;font-size:12px;color:#1b4456;line-height:18px;padding-right:20px;padding-left:20px;">
              password: <span style="color:#000000;">getdeals</span>
              </td>
              <td valign="top" align="right" style="border-collapse: collapse;padding-bottom:25px;padding-top:0px;font-family: Arial, Helvetica, sans-serif;font-size:12px;color:#1b4456;line-height:18px;padding-right:20px;padding-left:20px;">
              call toll free: <span style="color:#000000;"> <a href="mailto:help@simpledealsnow.com" style="font-family: Arial, Helvetica, sans-serif;font-size:12px;color:#1b4456;line-height:18px;">help@simpledealsnow.com</a></span>
              </td>
          </tr>
      </table>
    </td>
  </tr>
 </table>

 <table border="0" cellpadding="0" cellspacing="0" width="599px" id="templateContainer4" style="border-top-width: 0; border-right-width: 0; border-bottom-width: 0; border-left-width: 0; background-color: #FFFFFF;" bgcolor="#FFFFFF">
  <tr>
    <td align="center" valign="top" style="border-collapse: collapse;">
      <table border="0" cellpadding="0" cellspacing="0" width="599" id="templateImage1">
        <tr>
          <td valign="top" style="border-collapse: collapse;width:599px;">
            <img src="http://s3.amazonaws.com/S1MPLE/system/layouts/David%27s%20Designs/chefCode/bottom2.jpg" style="width: 599px; height: 77px; line-height: 100%; outline: none; text-decoration: none; border-top-width: 0; border-right-width: 0; border-bottom-width: 0; border-left-width: 0;width:599px;" alt="Image">
          </td>
        </tr>
      </table>
    </td>
  </tr>
 </table>

 <table border="0" cellpadding="0" cellspacing="0" width="599px" id="templatePreheader2">
  <tr>
    <td valign="top" class="preheaderContent" style="border-collapse: collapse;">
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td valign="top" style="border-collapse: collapse;height:15px;">

          </td>
        </tr>
      </table>
    </td>
  </tr>
</table> 
```

# android - 吐司不会从屏幕上消失

> ID：12200925
> 
> 赞同：1
> 
> 时间：2012-08-30T15:58:02.417
> 
> 标签：android, toast

我使用 GPS 线的简单 android 应用程序有问题。

我的MyLocationListener类实现了LocationListener，还有一个静态方法调用：

```
 String strText ="My current location is: " + "Latitude = " +  location.getLatitude() + " Longitude= " + location.getLongitude();
    Toast.makeText(GpsModule.cont, strText, Toast.LENGTH_SHORT).show(); 
```

问题在于显示此字符串。它出现了，永远不会结束。当我按下主菜单的后退按钮时，即使我关闭应用程序，它也会不断出现。有什么线索吗？我该如何解决这个问题？

Gps模块类：

```
public class GpsModule extends Activity {

public static Context cont;
//public static WebView position;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gps);
    cont = getApplicationContext();
    //position = new WebView(cont);

    //position = (WebView) findViewById(R.layout.gps);
    //position.getSettings().setJavaScriptEnabled(true);

    LocationManager locManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    LocationListener locListener = new MyLocationListener();
    locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);
} 
```

MyLocationListener 类：

```
@SuppressLint("ShowToast") 
```

公共类 MyLocationListener 实现 LocationListener{

```
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
    location.getLatitude();
    location.getLongitude();

    String strText ="My current location is: " + "Latitude = " +  location.getLatitude() + " Longitude= " + location.getLongitude();
    Toast.makeText(GpsModule.cont, strText, Toast.LENGTH_SHORT).show();

}

public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub
    Toast.makeText(GpsModule.cont, "GPS disabled", Toast.LENGTH_SHORT).show();
}

public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub
    Toast.makeText(GpsModule.cont, "GPS enabled", Toast.LENGTH_SHORT).show();
}

public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:19:35.050

我认为，您将代码添加到位置检测功能中并且`LocationListener`处于活动状态。这意味着当 GPS 检测到新位置时会调用您的 Toast。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T16:40:51.560

请阅读方法[LocationManager.requestLocationUpdates()](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29)的文档。

特别是参数：

```
 minTime     minimum time interval between location updates, in milliseconds. 
```

每 10 秒尝试 10'000 的值。在生产中，您应该考虑的价值超过分钟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T16:05:44.990

看起来您的位置侦听器处于活动状态并反复被调用。你在移动你的设备吗？LocationListener 在位置改变时被调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T16:34:21.423

试试这个，

1.

```
Toast.makeText(getBaseContext(), strText, Toast.LENGTH_SHORT).show(); 
```

2.

```
@Override 
public void onPause() {
    super.onPause();
    locationManager.removeUpdates(locationListener);
} 
```

3.

```
@Override
    public void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                Length, long, locationListener);
    } 
```

length 和 long 应该大于 0。

# java - Java 图形库，带有在绘制对象上捕获鼠标事件的方法

> ID：12200927
> 
> 赞同：1
> 
> 时间：2012-08-30T15:58:11.627
> 
> 标签：java, graphics, mouseevent

我正在寻找一个可以绘制线条和形状（2d）以及能够捕获绘制对象上的鼠标事件的 java 库。我还需要能够放大和缩小绘制的对象。

我可能会要求很多，但任何接近的东西都会为我节省一些重新发明轮子的时间。

PS 如果库将形状渲染为对象会更好。

谢谢大家的期待。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:29:09.350

简单的答案是： [LWJGL](http://lwjgl.org)。在那里，您可以访问 OpenGL、OpenCL 和 OpenAL 库。

# c++ - Boost Asio 收到未知号码？

> ID：12200933
> 
> 赞同：0
> 
> 时间：2012-08-30T15:58:43.780
> 
> 标签：c++, http, boost, boost-asio

我写了一个 Http/Rest 客户端。

主要问题是我在请求的数据中收到了一些未知数字。我真的不知道他们从哪里来。。

```
e0b
<html>
<head>
[...]
</body>
</html>
0 
```

您会在末尾看到**e0b**和**0**。例如，在大 xml 文件中，我得到了这样的东西：

```
<sometag id="somei
2000
d"><child>
...
</child></some
2000
tag> 
```

这是我无法重现的。

我的代码：

```
 // read the response status code
  boost::asio::streambuf httpStreamBufferResponse;
  boost::asio::read_until(httpSocket, httpStreamBufferResponse, "\r\n");

  // check status code and validate
  istream httpResponseIStream(&httpStreamBufferResponse);

  // temp var for version
  string sHttpVersion;
  httpResponseIStream >> sHttpVersion;

  // temp var for status code
  unsigned int uiStatusCode;
  httpResponseIStream >> uiStatusCode;

  // fetch status message and switch it
  string sStatusMessage;
  getline(httpResponseIStream, sStatusMessage);
  if(!httpResponseIStream || sHttpVersion.substr(0, 5) != "HTTP/"){
    new Note(eNotesType(ERROR), "Request Interrupt", "Invalid Request Response");
    Log::write("ERROR: Request Interrupt: Invalid Request Response");
  }
  // != 200 even means that something is not OK
  if(uiStatusCode != 200){
    this -> sHttpStatusCode = uiStatusCode;
    new Note(eNotesType(WARNING), "Request Response " 
      + boost::lexical_cast<string>(uiStatusCode), httpErrorToString.at(uiStatusCode));
    Log::write("WARNING: Request Response " 
      + boost::lexical_cast<string>(uiStatusCode) + ": " + httpErrorToString.at(uiStatusCode));
  }

  // Read the response headers, which are terminated by a blank line.
  boost::asio::read_until(httpSocket, httpStreamBufferResponse, "\r\n\r\n");

  // Process the response header
  stringstream responseSStream;
  string responseSHeader;
  while (getline( httpResponseIStream, responseSHeader ) && responseSHeader != "\r" ) {
    responseSStream << responseSHeader;
  }
  // store header in member variable
  this -> sHttpResponseHeader = sHttpVersion + " " + boost::lexical_cast<string>(uiStatusCode) + " " 
    + httpErrorToString.at(uiStatusCode) + "\n" + responseSStream.str();

  // read until EOF and writing data to output as we go.
  ostringstream responseOSStream;
  while(boost::asio::read(httpSocket, httpStreamBufferResponse, boost::asio::transfer_at_least(1), error)){
    responseOSStream << &httpStreamBufferResponse;
  }

  // store content in member variable
  this -> sHttpResponseContent = responseOSStream.str();

  // if there is no EOF
  if(error != boost::asio::error::eof){ 
    new Note(eNotesType(ERROR), "Request Interrupt", "Invalid Response End");
    Log::write("ERROR: Request Interrupt: Invalid  Response End");    
  }

// catch not known exceptions properly
} catch (exception& e){
  string exceptionMessage = e.what();
  new Note(eNotesType(ERROR), "Exception", exceptionMessage);
  Log::write("ERROR: Exception: " + exceptionMessage);    
}

// log http standby
Log::write("http status: standby"); 
```

如果有人知道这是从哪里来的，那将是非常高兴的......？**！**

我的神经紧张了。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:02:34.617

您的代码声称符合 HTTP/1.1，但实际上并不符合 HTTP/1.1 的要求。要么不声称符合 HTTP/1.1，要么确保您的代码执行标准要求客户端必须执行的所有操作。

> 所有 HTTP/1.1 应用程序必须能够接收和解码“分块”传输编码，并且必须忽略他们不理解的块扩展扩展。-- [HTTP/1.1 规范，第 3.6.1 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.6.1)

# php - 将 URL 中的值传递给 Joomla 2.5 中的包装 URL

> ID：12200934
> 
> 赞同：0
> 
> 时间：2012-08-30T15:58:46.510
> 
> 标签：php, joomla2.5

我正在尝试将 URL 中的值发送到 Joomla (2.5)

链接：[http ://www.mysite.com/index.php/our-listings/index.php?address=1234](http://www.mysite.com/index.php/our-listings/index.php?address=1234)

该链接指向 Iframe Wrapper 中的 php 脚本。

我希望将`$address`值传递给脚本。我尝试使用未传递数据的 POST 和 GET。

在网上的研究中，我看到了这个：`$address = JRequest::getVar('address');`

但是这段代码去哪里了？

我在 iframed 脚本中尝试过，但我得到：

> 致命错误：未找到“JRequest”类 - 因为脚本不知道它在 Joomla 中，我猜。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:00:41.543

在 Joomla 2.5 中编辑 components/com_wrapper/views/wrapper/view.html.php 而不是 wrapper.php

寻找`$url = $params->def('url', '');`

然后在其后添加以下内容（如 Abid 的链接中所述）

```
foreach ($_GET as $key => $value) {
  if ($key<>"option" && $key<>"Itemid") {
    $url.=(strpos($url,"?")) ? "&" : "?";
    $url.="$key=$value";
  }
} 
```

# deployment - 组织文件和目录组以进行部署

> ID：12200937
> 
> 赞同：0
> 
> 时间：2012-08-30T15:58:55.133
> 
> 标签：deployment, version-control, organization

我们的系统可能包含 30-40 个不同的应用程序，这些应用程序需要脚本和资源才能运行。这些资源出现在整个文件系统中。我们通常一次只部署一个应用程序。一些资源是共享的，因为我们是从开发系统中部署的，所以我们通常不想每次都推送所有内容。

是否有人有提示或是否有工具可以帮助为每个应用程序创建有组织的文件组以进行部署？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:01:03.043

结帐配置管理解决方案，例如[puppet](http://puppetlabs.com/)和[chef](http://www.opscode.com/chef/)。

# sql - 为另一个表中的值为空值创建检查约束

> ID：12200945
> 
> 赞同：2
> 
> 时间：2012-08-30T15:59:06.283
> 
> 标签：sql, sql-server-2000, referential-integrity

我有两个表，A 和 B。结构如下所示：

```
CREATE TABLE A (
    w int NOT NULL,
    x int NOT NULL,
    y int NOT NULL,
    CONSTRAINT PK_A PRIMARY KEY (w, x, y)
)

CREATE TABLE B (
    w int NOT NULL,
    y int NULL,
    z int NOT NULL
) 
```

我想确保在表 B 中输入的任何一组值，w 和 y 在表 A 中。如果表 B 中的 y 值为空，我只想确保 w 在表 A 中。

一些示例数据、插入和预期结果：

```
Table A
w  x  y
----------
1  1  1
1  1  2
1  2  1
1  3  2
2  1  1

INSERT INTO B (w, y, z) VALUES (1, 1, 3) -- good
INSERT INTO B (w, y, z) VALUES (1, NULL, 3) -- good
INSERT INTO B (w, y, z) VALUES (1, 1, 4) -- good
INSERT INTO B (w, y, z) VALUES (2, NULL, 3) -- good
INSERT INTO B (w, y, z) VALUES (1, 3, 1) -- fail
INSERT INTO B (w, y, z) VALUES (3, NULL, 1) -- fail 
```

这有什么办法吗？如果它发挥作用，我正在使用 SQL Server 2000。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:44:26.093

不幸的是，您不能在 和 上使用外键约束`B.w`，`B.y`因为它们会引用 上的非唯一列`A`。但是您可以通过触发器添加此检查：

```
create trigger check_w on B for insert, update
as
if not exists(select * from A join inserted on A.w = inserted.w) 
begin
  raiserror('W not in A!', 1, 1)
  rollback transaction
end

GO

create trigger check_y on B for insert, update
as
if 
(select y from inserted) is not null and 
not exists(select * from A join inserted on A.y = inserted.y) 
begin
  raiserror('Y not null and not in A!', 1, 1)
  rollback transaction
end

GO 
```

您绝对可以将这两个触发器合二为一。

另请注意，您需要在 A 上触发`delete`操作。如果 B 上有匹配的行，您要么阻止删除，要么执行级联删除操作。

# php - PHP 如何禁用 com_dotnet？

> ID：12200947
> 
> 赞同：3
> 
> 时间：2012-08-30T15:59:09.907
> 
> 标签：php, .net

简单的问题，我希望。在 php 中，如何禁用 com_dotnet。它出现在 phpinfo(); 我在 Windows 7 Enterprise 上通过 Zend/Apache 运行 PHP 版本 5.3.14。在 php.ini 文件中，我看到 com.allow_dcom = true 的项目，但它已被注释掉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:41:14.370

PHP 过去有一个错误，即无法将[COM 扩展构建为共享扩展。](http://www.php.net/manual/en/book.com.php)最近已修复此问题。问题是：[错误 #62146 com_dotnet cannot be build shared](https://bugs.php.net/bug.php?id=62146)。

因此，如果您安装 PHP 5.3.15，您可以通过不加载 .dll 扩展文件来禁用它。这也在[COM 安装](http://www.php.net/manual/en/com.installation.php)的用户评论中进行了概述。

```
[COM_DOT_NET]
extension=php_com_dot_net.dll 
```

如果您无法升级 PHP，那么您将看到错误并且您无法禁用扩展。

# php - 因为我更新了我的 Symfony2 项目。每个字段都成为“必填”

> ID：12200952
> 
> 赞同：0
> 
> 时间：2012-08-30T15:59:28.343
> 
> 标签：php, symfony, symfony-2.1

我找到了解决我的问题的一个小方法。这是在formType的字段中放置一个`'required' => false`, 。但在此之前，没有它就可以工作......所以我问。如果有问题还是正常？

昨天，我升级了我的 Sf2.1 项目`composer.phar`

```
$ php ../composer.phar update 
```

现在我正在使用这个 composer.json

```
{
    // ...
    "require": {
        "symfony/symfony": "2.1.*",
        // ...
    },
    "scripts": {
        // ...
    },
    "config": {
        "bin-dir": "bin"
    },
    "minimum-stability": "dev",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    },
    "repositories": [
        // ...
    ]
} 
```

例如在我的实体文件中：

```
/**
 * @var date $deliveryDate
 * 
 * @ORM\Column(name="deliveryDate", type="date", nullable=true)
 */
private $deliveryDate; 
```

然后在我的 FormType

```
 ->add('deliveryDate', 'date', array(
            'widget' => 'single_text',
            'label' => 'Date de livraison',
            'input' => 'datetime',
( solution: 'required' => false, )
            'format' => 'dd/MM/yyyy',
            'attr' => array('class' => 'datepicker'),
         )) 
```

正如您所了解的，问题不在于数据库部分，而在于 FormPart。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:39:54.023

Symfony 2.1 默认调用 HTML5 所需的功能。您必须在您希望成为可选的每个字段上将 required 设置为 false。

# c++ - 在有向循环图中查找所有可能的路径

> ID：12200953
> 
> 赞同：4
> 
> 时间：2012-08-30T15:59:28.373
> 
> 标签：c++, c, data-structures, graph

我想在有向循环图中找到所有可能的路径。我编写了一个程序来执行此操作，但我注意到如果节点数超过 40 或 50 个，它就会开始花费无限时间。

**从理论上讲， N**个节点的有向循环图可能有多少条路径。它像阶乘（**N**）还是什么？你能给我猜一下下面这个有 119 个节点的例子吗？当然，我只会遍历一次循环，因此您可以忽略循环路径。

[图形图像](http://i.stack.imgur.com/pRACm.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:08:12.487

让我们采用图表中显示的这种常见模式：

```
A ---> B
|     /|
|    / v
|   /  C
|  /   |
| /    |
vv    /
D <--- 
```

请原谅 ASCII 艺术。所以你在这里有三个路径：`A -> D`、`A -> B -> D`和`A -> B -> C -> D`。

现在说你有完全相同的数字从`D`另一个节点发出`G`：

```
D ---> E
|     /|
|    / v
|   /  F
|  /   |
| /    |
vv    /
G <--- 
```

您有与以前相同的三个类似路径：`D -> G`、`D -> E -> G`和`D -> E -> F -> G`。

`A`现在，从到有多少​​条路径`G`？

要从`A`到`G`，你必须从`A`到`D`。您可以通过以下三种方式之一执行此操作。然后你必须从`D`到`G`。您可以通过以下三种方式之一执行此操作。这两个选择（`A`to`D`和`D`to `G`）是相互独立的。因此，您有`3`* `3`=从到`9`的可能路径。`A``G`

如果您不断重复该图，则将可能路径的数量乘以`3`每次重复。所以用三个数字，27条路径；四个数字，81条路径；等等

这就是指数增长。换句话说：如果你想提高效率，你必须找到另一种方法来做你正在做的事情。

编辑：粗略估计：只计算这些数字，甚至不看中间的复杂混乱，我得到`3 * 3 * 3 * 3 * (2^8) * (4^8) * 3 * 3 * 2 * 3`=**`73383542784`**可能的路径，只通过那些简单的节点。

编辑：你似乎在做代码分析。在不确切知道您想要做什么的情况下，我建议您将沿着*必须*到达的那些节点（例如节点`A`、`D`和`G`在我的示例图中）收集的任何信息整合起来。*然后进行搜索，直到您到达必须*到达的下一个节点，并在那里收集您的信息。这将防止指数爆炸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:03:52.483

您可以尝试以下方法：

*   在图表中查找属于每条路径的节点。为此，请按顺序从图中删除节点。每个节点，如果删除，就不可能找到路径，就是这样一个节点。你的图表应该有很多。
*   我无法证明这一点，但应该可以找到这些节点出现在每条路径中的顺序。
*   将图拆分为由两个连续强制节点和它们之间的所有节点组成的块
*   计算每个块的路径数
*   计算所有路径计数的乘积以获得完整计数。记得使用类似 GMP 的东西来避免数字溢出

# php - 从相关记录中获取数据

> ID：12200958
> 
> 赞同：0
> 
> 时间：2012-08-30T15:59:44.193
> 
> 标签：php, database-design, yii

当使用外部 id 将不同表中的数据链接在一起时，我经常会编写不优雅的代码来获取我需要的信息。这是一个例子：

假设我有一个表 Message，其中包含以下字段：

```
id, touserId, fromuserId, title, message 
```

touserId 和 fromuserId 分别指的是发送和接收消息的 User 对象的 id。

假设我想显示发送给特定用户的所有消息。在我看来，我最终会写出这样的东西——我知道这很糟糕！

```
<?
$messages=Message::model()->findAllByAttributes(array("touserId"=>Yii::app()->user->userid));
foreach ($messages as $message) {   
$fromuser=User::model()->findAllByAttributes(array("id"=>$message->fromId));
?>
<div>
<h4><?=$message->title;?></h4>
<p>From: <?=$fromuser->name'?>
<p><?$message->body;?></p>
</div>
<?
}
?> 
```

有没有更优雅的方式来访问相关记录中的信息（在这种情况下是发送消息的用户的姓名？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:33:22.247

在您的消息模型中，您可以这样做：

```
public function relations() {
    return array(
        'name' => array(self::HAS_ONE, 'User', 'fromuserId')
    )
} 
```

或者，您可以修改模型以包含 JOIN，以便获取用户名。

# java - SWT: make a mouse event propagate through stacked composites

> ID：12200967
> 
> 赞同：3
> 
> 时间：2012-08-30T16:00:07.817
> 
> 标签：java, events, swt, mouseevent, composite

This sounds easy, but I couldn't find a clue.

I have two `Composite`s, one (small) above the other (big), absolutely positioned. When I click on the above `Composite`, I need it to be *transparent* to the event, because it should be caught by the below `Composite`.

The only possible solution I came up with is associating the same `MouseListener` to both the `Composite`s and add logic to discriminate. But I would be much easier if the below `Composite` could receive the event as it was originated on it.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:28:10.760

Typically the event is associated with the source of event, i.e. widget. You cannot substitute one widget onto another widget. If you want that another widget receive that event, you should make that event occurred there. This could be done if you create the event manually and do either widget's `notifyListeners` or display's `post` that event.

# python - 如何在 celery 中实现 on_revoked 事件

> ID：12200972
> 
> 赞同：0
> 
> 时间：2012-08-30T16:00:25.883
> 
> 标签：python, celery

我有一个经常重试的任务，如果它在重试状态下被撤销，我想要一种方法来清理它。似乎有几个选项可以做到这一点，我想知道最可接受/最干净的会是什么。到目前为止，这是我的想法：

1.  拾取已撤销任务并调用 on_revoked 的自定义相机
2.  知道在被撤销的任务上处理 on_revoked 的自定义事件消费者
3.  使用 AbortableTasks 并使用 abort 而不是 revoke（我真的很想避免这种情况）

我还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T11:29:56.840

用作`AbortableTask`模板并根据您的规范创建一个`RevokableTask`类。

# ajax - 对于全球站点性能而言，许多小型 ajax 请求或大型 ajax 请求更好？

> ID：12200973
> 
> 赞同：24
> 
> 时间：2012-08-30T16:00:30.137
> 
> 标签：ajax, json, performance, wordpress, networking

我有一个带有 ajax 搜索字段的 wordpress 网站，它返回一个帖子列表，只有标题、网址、日期和类别。

我想对结果进行分页，以便每次最多显示 10 个结果。

我的疑问是：每次翻页时发出不同的请求还是只发出一个请求来获取所有帖子然后通过javascript管理分页（响应是我的JSON）是好的吗？

发出更频繁的小请求，响应轻的还是大的更好？

我想在网站生命之初，第一个解决方案是最好的解决方案。随着站点的增长，我不确定可扩展性。

你怎么看？

更新：我收到了几个非常好的答案，解决了更多用户界面方面的问题。

Hwr 我希望您更多地关注性能的观点。我的网站在共享服务器上，但我们预计流量会快速增长，因为该网站将获得国际曝光。我担心 wordpress 将无法应对来自 ajax 请求的增加的开销。

所以回到这个问题，对于服务器总负载，许多小请求，只加载请求的结果页面还是一个包含所有结果的大页面，哪个更好？

考虑到不是所有的用户我想都会检查所有的结果页面我想第一个......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-30T16:52:38.170

正确答案是：“视情况而定”。

如果您正在处理已知数量（每页 10 个结果，10 页结果），并且您希望所有这些都尽快提供给用户，那么我建议在 500 毫秒内下载块（10 或 20）计时器或类似的东西。

然后您可以异步填充额外的后页，并相应地更新“总页数”控件。

从那里，您的用户可以立即获得结果，并且能够在 2 秒左右的时间内在所有数据之间来回切换。

如果您有一个网站需要立即访问所有数据，并且需要显示 40 个结果，那么请使用大转储。

如果您有一个无限滚动的网站，那么您会想要获取几个页面长度。对于 Twitter 之类的东西，我可能会预先计算容器的平均高度，而不是屏幕高度。然后我会下载 3 或 4 个屏幕长度的推文。从那里，当用户滚动到他们的第二个或第三个屏幕（或分别为第三个或第四个）时，我会下载下一批。

所以我的事件可能会附加到一个 onscroll 上，它会检查它是否被允许运行（如果它自上次运行以来至少 16 毫秒，——显然，我们仍在滚动），然后它会检查它在哪里，就它与底部的接近程度而言，考虑到屏幕高度，以及最后一批 ( `screen_bottom >= latest_batch.height * 0.75`) 或类似的总高度。screen_bottom 将与 last_batch 相关，因为如果用户向上滚动，高于前一个批次，screen_bottom 将完全是一个负数。

...或将它们标准化，以便您只处理百分比。

这足以让您感觉数据始终在您身边。您不想在开始时等待一个巨大的块加载，但您也不想在尝试移动时等待加载小块。

因此，根据您正在做的事情以及您希望用户如何使用您的数据，找出快乐的媒介是什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T16:33:50.237

有两个因素在此决定中起作用：用户如何与您的网站互动（例如，他们查看了多少结果以及他们如何查询）以及“平均搜索结果”有多大。如果您有数千个帖子和通用搜索词，那么如果您走“大一”之路，您可能会获得非常大的结果集。如果您的用户倾向于在此进行大量浏览，那么如果您在每个页面加载时都发出请求，这将导致大量请求。

没有通用答案，这在很大程度上取决于您的应用程序和用户的搜索模式。一般来说，我会做最简单的事情来完成这项工作，但还要监控用户交互（例如查询和结果大小的记录）、站点性能（例如通过 Google Analytics 加载时间）和服务器负载（例如通过 munin ) 在您的页面上。如果您遇到问题，您仍然可以从此时开始优化您的应用程序 - 到那时您将对您的用户和您的应用程序有更好的了解。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T13:10:24.850

嗯，首先。如果您的 AJAX 正在创建与普通页面加载相同的帖子查询，则可以模拟页面加载。即，查询一堆帖子（比如一个有很多帖子的页面），将它们的所有数据发送到您的 JS，并让它处理分页。

当然，您不能一次发送所有帖子，因此您必须处理有多少页面可用。因此，我认为最好一次只查询一页的帖子。请记住，正常的 WP 行为是进行一个返回帖子 ID 的查询，然后为页面中的每个帖子查询整个帖子。

如果您想优化您的网站，请安装缓存插件。它将在 HD 中缓存所有数据库查询，然后使用这些文件而不是再次进行相同的查询。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-21T17:52:50.957

我是[asjst](https://github.com/enexusde/async-js-template)的创建者，发现下载速度要快得多，但由于设备的上传速度，资源的请求速度很慢。

## 大上传不好

[![红色是上传蓝色是下载](../Images/dbcd2c37cfba6ea8b11a02c360788796.png)](https://i.stack.imgur.com/E7wvB.png)

正如您在上面的屏幕截图中看到的那样，您上传了很多字节，下载了几个字节。

通常下载比上传快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-20T20:36:19.650

我遇到了类似的情况。我无权访问服务器，必须从 Excel 以 .xlsb 格式保存 Sharepoint 上的文件（我能获得的最小文件大小）。我使用自定义二进制 ajaxTransport 将它们作为 arrayBuffers 带回，然后使用 threadsJS 处理各个线程上的缓冲区以通过 SheetsJS 获取可用的 JSON 数据，然后将它们合并到单个 JSON 数据数组中。

根据我的测试，一个大文件需要 41 秒才能完成处理，4 个小文件需要 28 秒，8 个更小的文件需要大约 20 秒，然后 16 个更小的文件仍然需要大约 20 秒......

因此，随着文件变小，回报会逐渐减少，因为 AJAX 请求数量的增加抵消了更快的文件处理时间。老实说，我没有看到使用线程或不使用线程之间的实际速度增加，可能是因为 AJAX 调用的异步性质允许在调用开始和结束之间进行处理，或者可能是因为我没有做的足够多，可以看到很大的不同，但是线程版本允许我的页面加载器在数据加载时不会冻结，所以我想这是一个加号。

# javascript - jQuery 在 IE7 中的表格后插入表格对象

> ID：12200976
> 
> 赞同：-2
> 
> 时间：2012-08-30T16:00:37.283
> 
> 标签：javascript, jquery

# 也许我没有清楚地解释我的问题，如果您认为我的问题没有必要，请至少告诉我在哪里可以看到类似的解决方案！在我看来，应该解决 IE7 的可比性问题。

我对如何通过 jQuery 在 IE7 中的现有表（class='a'）之后插入表对象（class='b'）有疑问（在 IE8 或 Chrome 中一切看起来都很好）。谁能给我一些关于以下代码的建议？

```
// This is the existing table
<table class='a' align="center">
<tr><th><label for="id_S">Number of modeled stages:</label></th><td><select name="S" id="id_S">
<option value="">Please choose</option>
<option value="2">2</option>
<option value="3">3</option>
</select></td></tr>
</table>   //I would like to insert a table class='b' right after this </table> tag

<script>
$(document).ready(function() {

$('<table class="b" border="0" align="center"><tr><th width="5">Matrix:</th></tr></table>').appendTo('.a'); //this works in IE8 but not in IE7

})
</script>

// The following code works in IE7, but it messed up the layout

<script>
$(document).ready(function() {

$('<table class="leslie" border="0" align="center"><tr><th width="5">Matrix:</th></tr></table>').appendTo('.a td:last');    //this works in IE7, once I changed it to tr:last, it does not work again.

})
</script> 
```

# 更新

我尝试了一个更简单的案例。在 IE7 中，我可以看到警报消息，但看不到添加的表格行。似乎 IE7 无法显示额外的 HTML 表格，但可以处理 JavaScript 代码。

```
<script>
$('<table class="b" border="0" align="center"><tr><th width="5">Lesile Matrix:</th></tr></table>').appendTo('.a');    
alert('s')
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:03:23.197

尝试这个：

```
$('<table class="leslie" border="0" align="center"><tr><th width="5">Matrix:</th></tr></table>').insertAfter('.table'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:24:14.227

你的代码不对。首先，您没有具有“表”类的元素。所以这就是 appendTo 不起作用的原因。它有一个“a”类。然后对于 appendTo，您尝试添加的表不以“ `</table>`”结尾。此外，我接受了 Abe 的建议并将 appendTo 更改为 insertAfter。

在此处查看您的固定代码：http: [//jsfiddle.net/YUCDf/1/](http://jsfiddle.net/YUCDf/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:55:09.393

你试过这样吗？只是将整个标记存储在一个字符串中并附加到一个？

```
var x = '<table class="b" border="0" align="center"><tr><th width="5">Lesile Matrix:</th></tr></table>';
$('.a').append(x); 
```

[http://jsfiddle.net/nVFa5/](http://jsfiddle.net/nVFa5/)

# c# - 为 TeeChart Pocket 设置 EdgeStyle 会引发 NullReferenceException

> ID：12200980
> 
> 赞同：0
> 
> 时间：2012-08-30T16:00:53.857
> 
> 标签：c#, compact-framework, teechart, windows-embedded-compact

我正在使用在 .NET 3.5 上运行的 TeeChart Pocket。目标应用程序正在运行带有 .NET 3.5 的 Windows CE 6.0。我制作了一个绘制饼图的小型表单应用程序，但是当我添加边缘样式时，我得到了一个`NullReferenceException`.

产生此异常的最小代码（无设计器代码）如下所示：

```
public class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        var series = new Pie();
        series.FillSampleValues(6);

        series.BevelPercent = 20;
        series.EdgeStyle = EdgeStyles.Curved;

        var chart = new TChart();
        chart.Series.Add(series);

        this.Controls.Add(chart);
    }
} 
```

以下程序也会引发此异常：

```
chart.Series.Add(series);
series.FillSampleValues(6);

series.BevelPercent = 20;
series.EdgeStyle = EdgeStyles.Curved;

chart.Location = new Point(0, 0);
chart.Width = this.Width;
chart.Height = this.Height;

this.Controls.Add(chart); 
```

为什么我得到一个`NullReferenceException`？如果我取消注释设置 的行`EdgeStyle`，则不会引发异常。这是完整的堆栈跟踪：

```
System.NullReferenceException was unhandled
  Message="NullReferenceException"
  StackTrace:
       at System.Drawing.Graphics.FillPolygon(Brush brush, Point[] points)
       at Steema.TeeChart.Drawing.Graphics3DGdiPlus.Polygon(PointDouble[] p)
       at Steema.TeeChart.Drawing.Graphics3D.Pie3D.DrawPoints()
       at Steema.TeeChart.Drawing.Graphics3D.Pie3D.DoTopGradient(Int32 zDepth)
       at Steema.TeeChart.Drawing.Graphics3D.Pie3D.DoCurvedGradient(Int32 zDepth)
       at Steema.TeeChart.Drawing.Graphics3D.Pie3D.DrawLighting(EdgeStyles edgeStyle)
       at Steema.TeeChart.Drawing.Graphics3D.Pie3D.Pie(Int32 xCenter, Int32 yCenter, Int32 xRadius, Int32 yRadius, Int32 z0, Int32 z1, Double startAngle, Double endAngle, Boolean darkSides, Boolean drawSides, Int32 donutPercent, Int32 bevelPercent, EdgeStyles edgeStyle)
       at Steema.TeeChart.Drawing.Graphics3D.Pie(Int32 xCenter, Int32 yCenter, Int32 xRadius, Int32 yRadius, Int32 z0, Int32 z1, Double startAngle, Double endAngle, Boolean darkSides, Boolean drawSides, Int32 donutPercent, Int32 bevelPercent, EdgeStyles edgeStyle)
       at Steema.TeeChart.Drawing.Graphics3D.Pie(Int32 xCenter, Int32 yCenter, Int32 xOffset, Int32 yOffset, Int32 xRadius, Int32 yRadius, Int32 z0, Int32 z1, Double startAngle, Double endAngle, Boolean darkSides, Boolean drawSides, Int32 donutPercent, Int32 bevelPercent, EdgeStyles edgeStyle)
       at Steema.TeeChart.Styles.Pie.DrawPie(Graphics3D g, Int32 valueIndex)
       at Steema.TeeChart.Styles.Pie.DrawPie(Int32 valueIndex)
       at Steema.TeeChart.Styles.Pie.DrawValue(Int32 valueIndex)
       at Steema.TeeChart.Styles.Pie.Draw()
       at Steema.TeeChart.Styles.Series.DrawSeries()
       at Steema.TeeChart.Chart.DrawAllSeries(Graphics3D g)
       at Steema.TeeChart.Chart.InternalDraw(Graphics g, Boolean noTools)
       at Steema.TeeChart.Chart.InternalDraw(Graphics g)
       at Steema.TeeChart.Pocket.TChart.Draw(Graphics g)
       at Steema.TeeChart.Pocket.TChart.OnPaint(PaintEventArgs e)
       at System.Windows.Forms.Control.WnProc(WM wm, Int32 wParam, Int32 lParam)
       at System.Windows.Forms.Control._InternalWnProc(WM wm, Int32 wParam, Int32 lParam)
       at Microsoft.AGL.Forms.WL.Update(IntPtr hwnThis)
       at System.Windows.Forms.Control.Update()
       at System.Windows.Forms.Control.Refresh()
       at Steema.TeeChart.Pocket.TChart.OnResize(EventArgs e)
       at System.Windows.Forms.Control.WnProc(WM wm, Int32 wParam, Int32 lParam)
       at System.Windows.Forms.Control._InternalWnProc(WM wm, Int32 wParam, Int32 lParam)
       at Microsoft.AGL.Forms.EVL.EnterMainLoop(IntPtr hwnMain)
       at System.Windows.Forms.Application.Run(Form fm)
       at Demo.Form1.Main()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:25:30.390

由于 .net 紧凑框架中没有 GradientBrush，恐怕 TeeChart .NET 的 PocketPC 版本也不支持渐变。这也意味着 EdgeStyle 在 Compact Framework 中也不起作用。但是，当您尝试设置它时，您发现的异常不应该出现。我刚刚为下一个维护版本更正了它。

# javascript - 从 Jquery 数据表中的超链接单击检索行元素数据

> ID：12200984
> 
> 赞同：2
> 
> 时间：2012-08-30T16:01:04.000
> 
> 标签：javascript, jquery, datatables

我是 Jquery 数据表的新手。我设法创建了一个表格并在其中添加了一些元素。这就是[**我所拥有的**](http://jsfiddle.net/Ey666/10/)。

我想在我的表中的超链接上触发鼠标单击事件并检索特定行的数据表中的数据。比如被点击的超链接所在行的“blockid”。我该怎么做？

请指教。谢谢！

```
$(function () {
 $('#tbl_datablocks').dataTable( {
      "aoColumns": [
          { "sTitle": "blockid","sName": "blockid"},
          { "sTitle": "Name" },
          { "sTitle": "Created Time" },
          { "sTitle": "Updated Time", "sClass": "center" },
          { "sTitle": "Updated Time", "sClass": "center" }
          ]    } );

$('#tbl_datablocks').dataTable().fnAddData(["id1","data1","data2","data3","<a href='#' class='retrievedata' onclick='retrievedata(this)'>Read</a>"]);
$('#tbl_datablocks').dataTable().fnAddData(["id2","data1","data2","data3","<a href='#' class='retrievedata' onclick='retrievedata(this)'>Read</a>"]);
});   

function retrievedata(which)
{
    alert($(which).parents("tr"));
}
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:05:19.093

您是否考虑过使用数据属性？创建锚点`<a>`时，添加`data-blockid`具有正确值的属性。当 jQuery 注册点击事件时，可以`$(this).data("blockid")`用来获取值。

这是一个[更新的示例](http://jsfiddle.net/QZKCu/)

# jquery - 使用新值更新 Google 仪表

> ID：12200987
> 
> 赞同：0
> 
> 时间：2012-08-30T16:01:18.063
> 
> 标签：jquery, google-visualization

下面的脚本显示了一个谷歌仪表。

我有一个 15 秒发生的 jQuery get 语句。

```
setInterval( updateGui, 1000);
$.get("update.php",function (data){updateGages()},"json"); 
```

我想用一些脚本替换 updateGages() 来更新仪表。

有什么想法吗？

```
<html>
  <head>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type='text/javascript'>
      google.load('visualization', '1', {packages:['gauge']});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Memory', 80],
          ['CPU', 55],
          ['Network', 68]
        ]);

        var options = {
          width: 400, height: 120,
          redFrom: 90, redTo: 100,
          yellowFrom:75, yellowTo: 90,
          minorTicks: 5
        };

        var chart = new google.visualization.Gauge(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id='chart_div'></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:23:06.613

更新数据表，调用重绘`chart.draw()`。我没有看到您评论中提到的任何闪烁。

[http://jsfiddle.net/7fmKx/](http://jsfiddle.net/7fmKx/)

# c# - 从 .NET 到 VB6 的自定义对象数组

> ID：12200988
> 
> 赞同：0
> 
> 时间：2012-08-30T16:01:21.363
> 
> 标签：c#, .net, vb6, com-interop

我用 C# 编写了一个小型库。

在这个库中有两个类是`ComVisible`.

第一个具有提供自定义对象数组的方法（在第二个类中声明）。

我用一个小的 c# 应用程序测试了这个库，一切正常。然后我做同样的事情VB6。当我调用我之前描述的方法时会出现问题。我收到类型不匹配错误。

这是 BV6 代码：

```
 Private Sub Command1_Click()
       Dim Flussi As FMDriver.FMDriver  
       Set Flussi = New FMDriver.FMDriver
       [...]
       Dim temp() As FMDriver.FM
       temp = Flussi.GetElabData(station, codpar, data, tabella, nfunz, tiponfunz)
       [...] 
```

这是自定义类`FM`

```
[ComVisible(true)]
public partial class FM
{
    public FM() { }

    [ComVisible(true)]
    public double Value { get; set; }

    [ComVisible(true)]
    public double IDisp { get; set; } 
} 
```

任何的想法？如果从响应中我只提取一个元素，它就可以工作。

编辑：

另一个奇怪的事情...

```
Dim pippo As FM
Set pippo = CreateObject("fmdriver.fm")
pippo.Value = 100
pippo.IDisp = 43    
pippo = Flussi.GetElabData( [..cut..] )(4) 
```

在数组的第 4 个位置返回`Pippo.Value`正确的值，但值没有改变，它保持不变，而不是获取新值。`GetElabData``Pippo.IDisp``43`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:44:24.980

In the end I created all my beautifull methods that returns custom obj (for .NET apps) and a couple of methods, dedicated to VB6, with the `[ComVisible(true)]` tag, that returns more siple arrays of values (part of the result of the other methods). So I think that returning custom Obj to VB6 it's not very reliable and sometimes it doesn't work at all.

# windows-8 - System.UriFormatException 在 WinRT 中消失了，但 Uri 没有

> ID：12200989
> 
> 赞同：1
> 
> 时间：2012-08-30T16:01:23.363
> 
> 标签：windows-8

试图在 WinRT 中围绕 Uri 类型构建捕获机制。

因此，如果 Uri 无效，我想捕获该类型的 UriFormatException，但它似乎不包含在 WinRT .NET 配置文件中。

我没有反射它。

线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:13:38.980

您现在必须捕获 FormatException。

[http://msdn.microsoft.com/en-us/library/windows/apps/br230302.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br230302.aspx)

# java - 3D 程序和 2D 程序之间的性能差异

> ID：12200991
> 
> 赞同：1
> 
> 时间：2012-08-30T16:01:25.457
> 
> 标签：java, performance

我编写了一个将太阳能电池板放置在 3D 建筑物上的程序，但作为捷径，在为每个面放置面板时，我将其视为一个平面，因此它变成了一个 2D 问题。

我的问题是：我能够根据所花费的时间来衡量我的程序的性能，但是有没有办法通过将其转换为 2D 问题而不是仅以 3D 进行计算来量化节省的时间？

当然，除非我重写程序并仅在 3D 中进行计算以进行性能比较，否则无法获得确切的数字，但是有没有人参考或了解通过在一个维度上工作可能会带来多少改进（如果有的话）较少的？

任何建议/提示/讨论将不胜感激。

# cuda - CUDA 运行时 API 错误 30：重复内核调用

> ID：12200994
> 
> 赞同：3
> 
> 时间：2012-08-30T16:01:39.107
> 
> 标签：cuda

我最近开始学习 CUDA，我偶然发现了一个我无法理解的非常奇怪的行为。

我的代码本质上计算了一个简单 atomicAdd 内核的平均执行时间。为此，我在循环中调用内核以获得更好的平均值。我将设备内存分配和副本包含在循环中，因为我想将其包含在我的执行时间估计中。问题是，如果循环的运行次数过多，程序通常会失败并出现 Runtime API 错误 30。

我怀疑我的内存访问可能有问题，所以我在程序上运行 memcheck 无济于事。显然没有内存错误。此外，如果只运行内核几次，就没有问题，这似乎也表明内核并不是问题所在。只有连续调用太频繁才会有问题。

我的代码框架如下：

```
for(int i = 0; i < runs; i++)
{

    //////////////////////////////////
    // Copy memory from Host to Device
    //////////////////////////////////

    cutilSafeCallNoSync( cudaMemcpy(dev_waveforms, waveforms, num_wf * wf_length *  sizeof(float), 
                        cudaMemcpyHostToDevice) );
    cutilSafeCallNoSync( cudaMemcpy(dev_delays, delays, num_wf * sizeof(int), 
                        cudaMemcpyHostToDevice) );

    ////////////////////////
    // Kernel Call
    ////////////////////////

    kernel_wrapper<float>(dev_waveforms, dev_focused, dev_delays, 
                    wf_length, num_wf, threads, blocks, kernel); 

    //copy back to host memory.
    cutilSafeCallNoSync( cudaMemcpy(focused, dev_focused, J * wf_length * sizeof(float), 
        cudaMemcpyDeviceToHost) );

} 
```

同样，这仅在运行足够大时才会失败。还有其他一些奇怪的事情发生了，但我现在就暂且不说。

哦，我正在使用 Visual Studio 2010 在 Windows 7 上进行开发。我的 GPU 还充当我的视频卡，我担心这可能会产生奇怪的效果。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T04:45:35.527

Windows 7 驱动程序可以将多个命令批处理到单个提交中，以规避 WDDM 增加的驱动程序开销（与 WDDM 之前的驱动程序相比，例如 Win XP）。出于这个原因，即使单个内核没有超过看门狗，在这样的循环中运行也可能。您可以调用`cudaDeviceSynchronize()`@RogerDahl 建议尝试解决它（可能只有每 N 次迭代）。

或者在 Linux 上运行。

**编辑：** 运行时错误 30 是一个未知错误。如果这是看门狗定时器超时，我预计会出现`cudaErrorLaunchTimeout`（错误 6）。由于您没有提供完整的代码，因此很难说是什么导致了错误。我怀疑您的内核代码中存在错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T16:53:59.340

我遇到了同样的错误，发现我的内核实际上超出了我分配的内存。由于您将缓冲区加倍并看到问题消失，我希望您可能会遇到同样的问题。

我的问题是我的数学中的一个错误，以确定要启动多少线程和块。我发射的区块数量是我预期的八倍。在我的内核中，确定给定线程应该处理哪个元素的数学运算导致访问我的数组之外的方式。

确保检查每个线程正在使用数组的哪些元素，以防止执行将访问/修改数组外内存的线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:56:39.030

对于其他来此帖子寻找答案的人，为什么您会收到错误 30 消息：

如果您不小心将 CPU 变量作为 GPU**设备**函数的参数之一，也会出现此错误。这对我来说是这个问题的最常见原因。在多次意外地将变量的 cpu 副本作为参数放置之后，您会想，但是......

确保设备函数的所有参数： myDeviceFunciont<<<1,N>>>(argument1, argument2, argument3)

是 GPU 变量（即：您在 cudaMalloc 和 cudaMemcpy 中用于在 GPU 上分配内存的变量）

# php - 正则表达式的奇怪问题

> ID：12200996
> 
> 赞同：0
> 
> 时间：2012-08-30T16:01:51.633
> 
> 标签：php, regex, preg-match

我有一个正则表达式：

```
~(?P<opening>{(?P<inverse>[!])?block:(?P<name>[a-z0-9\s_-]+)(:(?P<function>[a-z0-9\s_-]+)([\s]?\((?P<params>[^)]*)\))?)?})(?P<contents>[^{]*(?:\{(?!/?block:[a-z0-9\s_-]+\})[^{]*)*)(?P<closing>{/block:(?P=name)})~is 
```

尝试匹配以下内容：

```
<ul>{block:menu}
    <li><a href="{var:link}">{var:title}</a>
{/block:menu}</ul> 
```

哪个工作正常，但是当引入块标记的第三部分时，例如：`{block:menu:thirdbit}`它无法匹配它，但是如果你砍掉正则表达式的末尾以将其修剪到以下它*确实*匹配暗示模式是好的但是还有其他问题：

`(?P<opening>{(?P<inverse>[!])?block:(?P<name>[a-z0-9\s_-]+)(:(?P<function>[a-z0-9\s_-]+)([\s]?\((?P<params>[^)]*)\))?)?})`

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:12:09.480

只是一个想法：将所有`{block:menu}`和类似的元素转换为它们自己命名空间中的 XML 元素。然后，您可以使用 xpath 并完成工作。您甚至应该能够即时执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:55:55.933

首先正如蒂姆正确指出的那样 - 用正则表达式解析 HTML 是不明智的。

第二：如前所述，问题中的正则表达式是*不可读*的。我冒昧地重新格式化它。这是一个工作脚本，其中包含完全相同的正则表达式的注释*可读版本：*

```
<?php // test.php Rev:20120830_1300
$re = '%
    # Match a non-nested "{block:name:func(params)}...{/block:name}" structure.
    (?P<opening>                      # $1: == $opening: BLOCK start tag.
      {                               # BLOCK tag opening literal "{"
      (?P<inverse>[!])?               # $2: == $inverse: Optional "!" negation.
      block:                          # Opening BLOCK tag ident.
      (?P<name>[a-z0-9\s_-]+)         # $3: == $name: BLOCK element name.
      (                               # $4: Optional BLOCK function.
        :                             # Function name preceded with ":".
        (?P<function>[a-z0-9\s_-]+)   # $function: Function name.
        (                             # $5: Optional function parameters.
          [\s]?                       # Allow one whitespace before (params).
          \(                          # Literal "(" params opening char.
          (?P<params>[^)]*)           # $6: == $params: function parameters.
          \)                          # Literal ")" params closing char.
        )?                            # End $5: Optional function parameters.
      )?                              # End $4: Optional BLOCK function.
      }                               # BLOCK tag closing literal "}"
    )                                 # End $1: == $opening: BLOCK start tag.
    (?P<contents>                     # $contents: BLOCK element contents.
      [^{]*                           # {normal) Zero or more non-"{"
      (?:                             # Begin {(special normal*)*} construct.
        \{                            # {special} Allow a "{" but only if it is
        (?!/?block:[a-z0-9\s_-]+\})   # not a BLOCK tag opening literal "{".
        [^{]*                         # More {normal}
      )*                              # Finish "Unrolling-the-Loop" (See: MRE3).
    )                                 # End $contents: BLOCK element contents.
    (?P<closing>                      # $closing: BLOCK element end tag.
      {                               # BLOCK tag opening literal "{"
      /block:                         # Closing BLOCK tag ident.
      (?P=name)                       # Close name must match open name.
      }                               # BLOCK tag closing literal "}"
    )                                 # End $closing: BLOCK element end tag.
    %six';

$text = file_get_contents('testdata.html');
if (preg_match($re, $text, $matches)) print_r($matches);
else echo("no match!");
?> 
```

请注意，额外的缩进和注释允许人们真正理解正则表达式试图做什么。我的测试表明正则表达式没有任何问题，并且它可以像宣传的那样工作。它甚至实现了 Jeffrey Friedl 先进的*“Unrolling-the-Loop”*效率技术，所以写这篇文章的人有一些真正的正则表达式技巧。

例如，鉴于以下数据取自原始问题：

```
<ul>{block:menu}
    <li><a href="{var:link}">{var:title}</a>
{/block:menu}</ul> 
```

这是脚本的（正确）输出：

```
'''
Array
(
    [0] => {block:menu}
    <li><a href="{var:link}">{var:title}</a>
{/block:menu}
    [opening] => {block:menu}
    [1] => {block:menu}
    [inverse] =>
    [2] =>
    [name] => menu
    [3] => menu
    [4] =>
    [function] =>
    [5] =>
    [6] =>
    [params] =>
    [7] =>
    [contents] =>
    <li><a href="{var:link}">{var:title}</a>

    [8] =>
    <li><a href="{var:link}">{var:title}</a>

    [closing] => {/block:menu}
    [9] => {/block:menu}
)
''' 
```

当可选`function`并且`params`包含在测试数据中时，它也可以工作。

也就是说，我对问题/正则表达式有一些问题：

*   正则表达式混合命名和编号的捕获组。
*   `{`and是元字符，`}`应该转义（尽管 PCRE 能够正确确定在这种情况下它们应该按字面意思解释）。
*   目前尚不清楚用户将如何使用可选捕获的组。
*   目前尚不清楚 OP 使用此正则表达式有什么问题。

# google-app-engine - 如何从 GAE 的 blobstore 下载具有原始文件名的文件？

> ID：12200997
> 
> 赞同：4
> 
> 时间：2012-08-30T16:01:50.697
> 
> 标签：google-app-engine, http-headers, filenames, blobstore

将文件上传到 blobstore 后，它会将其重命名为“s9QmBqJPuiVzWbySYvHVRg==”。如果您导航到其“/serve” URL 来下载文件，下载的文件将被命名为这个乱七八糟的字母。

有没有办法让下载的文件在上传时保留其原始文件名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T17:10:52.143

当使用`BlobUploadHandler` 原始文件名上传文件时，将作为名称属性存储在新创建的`BlobInfo`实体中。

在 blob 服务处理程序中，您可以指定应将 blob 作为下载附件返回，并且您可以指定应使用什么名称保存它

```
from google.appengine.ext import webapp
import urllib

class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
  def get(self, blob_info_key=None):
    blob_info_key = str(urllib.unquote(blob_info_key))
    blob_info = retrieve_blob_info(blob_info_key)
    self.send_blob(blob_info, save_as=blob_info.filename)

blob_app = webapp.WSGIApplication([
  ('/_s/blob/([^/]+)', blob.ServeHandler),
], debug=config.DEBUG) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:55:39.417

在 GAE 管理[控制台](https://appengine.google.com/)的 BLOB 查看器部分，当您查看单个 BLOB 时，查看器的右下方有一个下载按钮，如下面的屏幕截图所示。

![在此处输入图像描述](../Images/4b28a7d2fef49a6ca1db0282cf7896b7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-12T23:47:48.917

您引用的代码是 BlobInfo 实体的键，但原始文件名存储为属性。

如果您想要一种通过文件名下载文件的简单方法，您可以使用我用于我的 ServeHandler 的代码，它可以满足我的需要，通过文件名而不是 blobstore 键下载文件：

```
class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
  def get(self, resource):
    blobs = blobstore.BlobInfo.gql("WHERE filename = '%s'" %(urllib.unquote(resource)))
    if blobs.count(1) > 0:
        blob_info = blobstore.BlobInfo.get(blobs[0].key())
        self.send_blob(blob_info,save_as=True) 
```

# android - 启动画面不会转换到我的主菜单屏幕

> ID：12200998
> 
> 赞同：0
> 
> 时间：2012-08-30T16:01:57.187
> 
> 标签：android, android-activity, transition, splash-screen

我目前正在开发一个应该从启动屏幕过渡到主菜单屏幕的应用程序。我已经完成了编码，但似乎没有这样做。任何人都可以找出下面的代码有什么问题吗？

**闪屏活动：**

```
public class MainActivity extends Activity {

public static final String GAME_PREFERENCES = "GamePrefs";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    // fade in animation
    TextView logo1 = (TextView)findViewById(R.id.TextViewTopTitle);
    Animation fade1 = AnimationUtils.loadAnimation(this, R.anim.fade_in);
    logo1.startAnimation(fade1);

    // custom animation
    Animation spining = AnimationUtils.loadAnimation(this, R.anim.custom_anim);
    LayoutAnimationController controller = new LayoutAnimationController(spining);
    TableLayout table = (TableLayout)findViewById(R.id.TableLayout01);
    for(int i=0; i < table.getChildCount(); i++)
    {
        TableRow row = (TableRow) table.getChildAt(i);
        row.setLayoutAnimation(controller);
    }

    startAnimations();

    // saving game preferences
    SharedPreferences settings = getSharedPreferences(GAME_PREFERENCES, MODE_PRIVATE);
    SharedPreferences.Editor prefEditor = settings.edit();
    prefEditor.putString("UserName", "JaneDoe");
    prefEditor.putInt("UserAge", 22);
    prefEditor.commit();
}

private void startAnimations() {
    // Transition from Splash screen to Main Menu screen
    Animation fade2 = AnimationUtils.loadAnimation(this, R.anim.fade_in2);
    fade2.setAnimationListener(new AnimationListener() {
        public void onAnimationEnd(Animation animation)
        {
            startActivity(new Intent(MainActivity.this,QuizMenuActivity.class));
            MainActivity.this.finish();
        }
        public void onAnimationStart(Animation animation)
        {
            //Nothing
        }
        public void onAnimationRepeat(Animation animation)
        {
            //Nothing
        }
    });
} 
```

**主菜单活动：**

```
public class QuizMenuActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.menu);
    }
} 
```

我的布局已经完成。关于这里有什么问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:08:23.127

也许 AnimationListener 永远不会被触发？如果您只想显示 Splash 屏幕然后离开.. 尝试将以下内容添加到您的 Splash 活动的 onCreate 中如何：

```
Thread timer = new Thread() {           
    public void run() {             
        try {                   
            sleep(5000); // Sets delay before splash appears        
        } catch (InterruptedException e) {
            e.printStackTrace();                
        } finally {
            Intent main = new Intent(Splash.this, MainMenu.class);
            startActivity(main);    
            finish();
        }       
   };   
   timer.start(); 
```

它会休眠 5 秒，然后进入 MainMenu。

**编辑**

我认为您的 AnimationListener 永远不会被调用，因此请尝试`fade2.startNow()`在此处添加：

```
private void startAnimations() {
    // Transition from Splash screen to Main Menu screen
    Animation fade2 = AnimationUtils.loadAnimation(this, R.anim.fade_in2);
    fade2.setAnimationListener(new AnimationListener() {
    public void onAnimationEnd(Animation animation)
    {
        startActivity(new Intent(MainActivity.this,QuizMenuActivity.class));
        MainActivity.this.finish();
    }
    public void onAnimationStart(Animation animation)
    {
        //Nothing
    }
    public void onAnimationRepeat(Animation animation)
    {
        //Nothing
    }
});
fade2.startNow();
} 
```

有关如何使用`Animation.startNow()`或的更多信息`Animation.start()`：

[animation.start() or animation.startNow() does not start the animation immediately](https://stackoverflow.com/questions/3604048/animation-start-or-animation-startnow-does-not-start-the-animation-immediate)