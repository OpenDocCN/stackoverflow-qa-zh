# StackOverflow 问答 10474000-10474999

# angularjs - 我如何在 Angularjs 中创建一个新的东西？

> ID：10474001
> 
> 赞同：-12
> 
> 时间：2012-05-06T20:27:45.333
> 
> 标签：angularjs

我认为这个问题的模糊性是问题的一部分，所以我真正的第一个问题是，在 Angular 中，你叫什么*东西*。

我要命名的东西是视图加上控制器，在单个对象的模型上。我什至不知道该怎么称呼它。对于我提前知道我需要的东西，我一直在创建*指令*，但是你把指令创建的东西的一个实例称为什么？

我有几种情况突然（为了响应一些外部事件），我在模型中有一个新对象，我想在屏幕上显示它。Angular 似乎希望我在其父视图中*从头开始*列出所有可能的视图，但这在我的情况下并不合理。例如，我将如何列出所有弹出窗口和工具提示以及其他内容。

我在一些小的边缘情况下，在控制器代码的深处，它需要向当前视图添加一些东西。什么是公认的做法。

顺便说一句，$route/ng-view 正是这种情况的一种。包含 ng-view 的视图和 ng-view DIV 本身不知道 $route 模块将在 ng-view 中放入什么。我需要这个策略的更一般的情况。

**编辑**

人们一直在寻找一个例子。这个怎么样：我正在制作一个设备申请应用程序。当用户要求将 1000 种不同类型的设备中的一种发送给他时，我需要显示一个弹出窗口来收集特定于该类型的附加信息。如果他要螺丝刀，弹出窗口会询问刀片尺寸、颈部长度和手柄组成；如果他要一架飞机，那将是一个巫师向他询问发动机尺寸、油箱、座位安排的问题。应用程序在启动时只知道所有设备类型的列表，以及收集有关每个特定类型的所有后续信息的 UI 元素的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T20:51:37.580

> I'm down in some little edge case, deep in the controller code, and it needs to add something to the current view. What's the accepted practice.

Somewhere, you need to define all of the views you'll need -- e.g., all of the equipment popups. You could put each view into a separate file and use ng-include to dynamically pull in the one you currently need to display. Define a property on your $scope (e.g., $scope.equipmentTypeViewUrl), then

```
<div ng-include src="equipmentTypeViewUrl"></div> 
```

Since ng-view can only appear once per page, ng-include is probably not what you need to use if you need multiple levels of routing.

See also

*   [create a single html view for multiple partial views in angularjs](https://stackoverflow.com/questions/12577378/create-a-single-html-view-for-multiple-partial-views-in-angularjs)
*   [https://groups.google.com/forum/#!topic/angular/xIIyGpW8KUk/discussion](https://groups.google.com/forum/#!topic/angular/xIIyGpW8KUk/discussion)
*   [App design using Angular js](https://stackoverflow.com/questions/12793609/app-design-using-angular-js)
*   [Client Side Template with view per role](https://stackoverflow.com/questions/12996018/client-side-template-with-view-per-role/13005658#13005658)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T22:44:38.823

我认为问题在于您认为您需要在控制器中创建“事物”，但实际上您不需要。双向数据绑定的工作方式是您更改某些属性值，并且视图会基于此更改。尽管有弹出窗口和工具提示，但我从未见过这样的用例。

然而，如果你真的必须让控制器显示某些东西，你可以利用 Angular 的事件来做到这一点。您需要两部分：负责显示内容（修改 DOM）的指令和控制器。控制器会 $broadcast 一个带有一些参数的事件，指令会使用 $on 监听这些事件并做出相应的反应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T01:58:47.200

我只是确保我有一些有用的代码作为模型进来......

```
<div class="row" ng-repeat="attribute in attributes">
    <div class="widget" ng-repeat="input in attribute.inputs">
        <input type="{{input.type}}" ng-model="input.value" />
    </div>
</div> 
```

我的知识非常有限，但我所知道的是，如果您的模型有明确的结构，您可以构建一个动态响应它的视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T23:40:57.627

如果所有这些都与您的原始对象（属性或以其他方式）相关，您可以遍历数据，显示属性，并在需要时使用键和过滤器作为标签。恕我直言，这不是一个真正的角度问题，如果您的数据结构更多。如果您有良好的数据结构，您可以使用服务来创建相关的数据对象。

对于相关的弹出窗口，您可以使用指令，甚至可以在那里处理模型数据（仅在结构一致的情况下才推荐）。

如果您不喜欢这种方法，您可以直接在模板中处理数据。

但如果没有更具体的细节，就不会有明确的答案。

# node.js - 如何使用 Vows 和 Node.js 解决“回调未触发”

> ID：10474002
> 
> 赞同：4
> 
> 时间：2012-05-06T20:27:59.367
> 
> 标签：node.js, vows

我正在尝试开始使用[Vows](http://vowsjs.org/)和[Vows-BDD](https://github.com/jmreidy/vows-bdd)。不幸的是，回调使我绊倒。

在下面这个非常简单的例子中，如何解决这个错误？

```
** Inside the first context
** Creating Person with name Nick

✗ Errored » callback not fired
      in Create a Person via JavaScript: When a person has a name,
      in Creating a Person
      in undefined✗ Errored » 1 errored  1 dropped 
```

```
vows_bdd  = require "vows-bdd"
assert    = require "assert"

class Person
  constructor: (@name) ->
    console.log "** Creating Person with name #{@name}"

  greeting: ->
    "Hello, #{@name}"

vows_bdd
  .Feature("Creating a Person")
    .scenario("Create a Person via JavaScript")

    .when "a person has a name", ->
      console.log "** Inside the first context"
      new Person "Nick"

    .then "the person can be greeted", (person) ->
      console.log "person is a #{typeof person} = [#{person}]"
      assert.equal person.greeting(), "Hello, Nick"

    .complete()
    .finish(module) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T06:09:15.357

我知道这篇文章很旧，但由于这是有人搜索此错误时的第一个结果，所以我发布了我的答案。

在处理错误时，我发现这篇文章很有帮助。 [http://birkett.no/blog/2013/05/01/vows-errored-callback-not-fired/](http://birkett.no/blog/2013/05/01/vows-errored-callback-not-fired/)。

在我的代码中，错误是由于其中一个主题发生了异常。Vows 不会打印实际错误，因为它很难理解确切的问题。

# php - 菜单不适用于页面锚点和页面外锚点

> ID：10474005
> 
> 赞同：0
> 
> 时间：2012-05-06T20:28:43.390
> 
> 标签：php, html, navigation, hyperlink

不太确定如何表达我的问题，但这是我的问题：

我有一个 php 模板类型的网站，其中主要导航位于它自己的文件中。一些导航按钮指向主页上的锚点，而一些导航按钮则完全指向其他页面。

我的原始菜单使用 index.php# 之类的链接作为页面锚点，使用 index.php?page= 作为页面外链接。我有两个问题： 1\. 当我选择页面上的链接时，页面似乎刷新了，将我带到链接所连接的页面上的位置很慢。2\. 我正在使用 htaccess 将我的 url 从 mydomaincom/index.php 重定向到 mydomaincom/ 并发现我的导航在 Safari 中不起作用，因为我的 href 地址 index.php#value 和 Safari v5 不会继承锚链接。

我没有关闭我的重定向，而是将 URL 更改为指向 mydomaincom/#value。这不仅适用于所有浏览器，而且还使我的页面更快。

但是，现在当我在其他页面之一说 index.php?page=photos 并且我使用导航时，它只是试图在该页面上找到锚点（这很有意义，但显然不是我想要的）。它现在在做什么：mydomaincom/index.php?page=photos#

我需要它做什么：mydomaincom/#

由于所有页面都使用相同的导航文件，我是否需要创建一个 nave 链接变量，以便当导航位于非 index.php 页面上时，链接到页面锚点上 index.php 的链接 url 使用完整 url ?

希望这是有道理的。有什么建议么？还试图保持这个搜索引擎/谷歌友好:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:32:19.560

虽然我可以对其进行硬编码，但我创建了一个名为 $index 的 php 变量，我在首先加载的初始设置文件中对其进行了设置。我将变量设置为 mydomaincom/#，然后将作为页面锚点的导航按钮链接更新为 . 我不需要让它成为一个变量，但这意味着如果我也需要的话，我可以在将来更容易地改变它。

我所有指向 index.php 页面上锚点的导航链接的格式都类似于 mydomaincom/# 和离页链接 mydomaincom/page?=。确保在使用 index.php 页面和关闭页面上的菜单以及检查所有浏览器中的速度和功能时这有效。

谢谢！

# java - 如何使用 Java 创建数据流图

> ID：10474008
> 
> 赞同：0
> 
> 时间：2012-05-06T20:29:10.130
> 
> 标签：java, parsing, graph, dataflow

我是一名工科学生；我研究了数据流图。我已经使用 Antlr 制作了解析器，但我不知道如何制作数据流图。我读了一些论文，可以使用 Java 制作数据流图。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:15:03.107

[`JGraph`](http://www.jgraph.com/)可以用于此，如[评论文章](http://www.gridnexus.org/_files/Hudson-Biosilico-2-4-Final.pdf)中所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T23:00:08.727

NetBeans 可视化库可用于：

[http://platform.netbeans.org/graph/](http://platform.netbeans.org/graph/)

您无需构建 NetBeans 平台应用程序（甚至使用 NetBeans）即可使用它：http: [//java.dzone.com/news/how-create-visual-applications](http://java.dzone.com/news/how-create-visual-applications)

# javascript - 无法调用 null 的 appendChild 方法

> ID：10474010
> 
> 赞同：1
> 
> 时间：2012-05-06T20:29:10.733
> 
> 标签：javascript, for-loop, html-table, appendchild

它发生在：

```
for(var i = 0; i<phoneNums.length; i++)
{
    var lines = document.createElement('tr');
    var number = document.createElement('td');
    number.innerHTML = phoneNums[i];
    var minutes = document.createElement('td');
    minutes.innerHTML = minutesUsed[i];
    var plan = document.createElement('td');
    plan.innerHTML = plans[i];
    var charges = document.createElement('td');
    charges.innerHTML = charge[i];
    document.getElementById('theTable').appendChild(lines);
    lines.appendChild(number);
    lines.appendChild(minutes);
    lines.appendChild(plan);
    lines.appendChild(charges);
} 
```

* * *

具体在：

`document.getElementById('theTable').appendChild(lines);`

```
<table id = 'theTable'>
        </table>
        <script type = 'text/javascript'>
            populateTable();
        </script> 
```

我正在尝试创建一个将值添加`tr`到`td`表中的函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T20:35:13.217

您可能在文档中存在“theTable”之前运行此脚本。确保此脚本出现在您的表下方`id="theTable"`，或者它在表存在后发生的事件处理程序中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T20:34:28.787

这意味着您的 DOM 中没有 id 为“theTable”的元素。在您的 html 中的某处，您应该有类似的内容：

```
<table id="theTable">... 
```

或者，正如其他人也提到的那样，在您的脚本执行之前，此元素可能尚未加载到 DOM 中。

# objective-c - iPad 上显示的多个视图控制器和旋转

> ID：10474016
> 
> 赞同：7
> 
> 时间：2012-05-06T20:29:45.413
> 
> 标签：objective-c, ios, ipad, modalviewcontroller

我最近在将一些代码从 iPhone 应用程序移植到 iPad 时遇到了问题。它可能与[此处](https://stackoverflow.com/questions/8891789/modal-view-controller-dont-rotate-correctly)描述的问题有关，尽管我发现该问题的解释/解决方案不令人满意。场景是这样的：

1.  视图控制器“A”（根视图控制器）以“表单”模式呈现样式呈现模式视图控制器（称为“B”）。

2.  视图控制器 B 以“全屏”模式呈现样式呈现视图控制器“C”。

3.  iPad 被旋转，而视图控制器 C 是最顶端的视图控制器。

4.  解除 C 后，重新显示 B，但方向不正确。

据我所知，链接多个呈现的视图控制器不应该有问题——事实上，在[从其他视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html#//apple_ref/doc/uid/TP40007457-CH111-SW1)文档中呈现视图控制器中明确支持这种行为。我还阅读了[iOS 5 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-5_0/_index.html)中的​​以下声明：

> iOS 5 中的旋转回调不适用于全屏显示的视图控制器。这意味着如果您的代码在另一个视图控制器上显示一个视图控制器，然后用户随后将设备旋转到不同的方向，则在关闭时，底层控制器（即呈现控制器）将不会收到任何旋转回调。但是请注意，呈现控制器在重新显示时将收到 viewWillLayoutSubviews 调用，并且可以从此方法中查询 interfaceOrientation 属性并用于正确布局控制器。

据我所知，这不会发生 - 视图控制器 B 收到对 -shouldAutoRotateToInterfaceOrientation 的调用，但此调用中的 interfaceOrientation 参数的值是视图控制器 B 在呈现视图控制器 C 时的界面方向的值，而不是值解雇时 C 的界面方向。由于我们在 iPad 上，所有这些视图控制器都在 -shouldAutoRotateToInterfaceOrientation 中返回 YES。因此 B 的视图的边界永远不会改变，所以 -willLayoutSubviews 永远不会被调用。

我已经尝试在 B 关闭它之前将视图控制器 C 的方向保存到 B 的回调中，然后在下次调用 -shouldAutoRotateToInterfaceOrientation 时使用该信息，并仅在 C 被关闭时返回 YES。这修复了在未进行此检查的情况下出现的损坏 UI，但视图控制器 B 不会将其界面方向更新为该值，因此后续的模态演示将从设备的错误一侧进行动画输入/输出。

有没有人能够成功获得这样的视图控制器配置？这似乎不是一个不寻常的场景，所以我有点惊讶它没有像我最初预期的那样工作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:06:17.877

在我看来，如果您不使用导航控制器，多个链式模式视图控制器会导致令人困惑和烦人的用户体验。我认为视图控制器 B 应该在导航控制器中（如果你不想要，你不必显示导航栏）。

模态表示实际上应该用于单个死胡同实体（单个视图控制器或包含多个子视图控制器的导航控制器）。

出于兴趣，您是说这在 iPhone 上可以正常工作，但在 iPad 上不行？还是您不允许在 iPhone 版本上进行轮换？

我还发现[这个线程](https://stackoverflow.com/questions/8891789/modal-view-controller-dont-rotate-correctly)说从根视图控制器呈现模态视图控制器可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T04:41:35.470

我曾在 iPhone 上开发过多个模态视图控制器。布局没有问题，除非我自己处理多个方向的代码有问题。当视图控制器位于另一个视图控制器之后时，自动旋转方法实际上永远不会被调用，所以我也会调整 viewWillAppear: 上的布局。

在 viewWillAppear:、willRotateToInterfaceOrientation:duration: 和 didRotateToInterfaceOrientation: 上，我会根据需要将布局调整为正确的方向，例如：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [self switchToInterfaceOrientation:self.interfaceOrientation];
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    [super willRotateToInterfaceOrientation:interfaceOrientation duration:duration];
    [self switchToInterfaceOrientation:toInterfaceOrientation];
    // be careful, self.view.frame is still according to self.interfaceOrientation
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    [super didRotateFromInterfaceOrientation:fromInterfaceOrientation];
    // self.view.frame is updated
    // update something else here
}

- (void)switchToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // update your layout here
} 
```

我不确定上述代码在 iPad 上的视图控制器上会如何表现。由于它支持具有不同模态呈现风格的视图控制器，因此可能会有一些惊喜。

# php - 在 Amazon Elastic Beanstalk 或一般实例或服务器上运行的 PHP 应用程序有什么区别？

> ID：10474025
> 
> 赞同：3
> 
> 时间：2012-05-06T20:31:14.833
> 
> 标签：php, amazon-web-services, amazon-elastic-beanstalk

我的问题是：在 Amazon Elastic Beanstalk（之后称为 EB）上运行的 PHP 应用程序与一般实例或服务器有什么区别？

我是 Amazon Elastic Beanstalk 的新手，我曾经尝试过 PagodaBox.com。PaaS平台EB和PagodaBox.com完全一样吗？

运行在通用服务器上的应用程序或像 EB 这样的 PaaS 自动缩放平台之间的运行时环境有什么区别？

我可能已经弄清楚了一些。我在EB和PagodaBox.com上都做了一个测试，PagodaBox告诉我它们是目的地，所以你必须在本地配置你的应用程序，实际上它们不支持从Share Dir出来的写操作已在 Boxfile 中定义。

那么，这是正确的吗？和 EB 一样，PaaS 平台将与托管您网站的通用服务器完全不同？

当您在通用单服务器上安装 wordpress 之类的网站时，您可以在服务器端配置和编辑文件，您的每一次更改都会影响您的源代码或资源文件，它们是您代码的一部分。但是如果你使用的是像宝塔这样的 PaaS，你甚至不能在共享目录之外进行写操作，这意味着你必须在本地完成所有操作，然后将它们作为静态代码上传。所有用户数据都将像在通用服务器中一样存储到 mysql 数据库中，但所有上传都应存储到定义为 Boxfile 的共享目录中。但它应该在EB的哪里？如果我们要在 EB 中部署基于 wordpress 的站点，我们如何存储上传的文件？是要更改代码还是我们必须找到一种自己的方式来存储驻留数据，因为我们正在编写自己的应用程序？

当您设计运行在通用服务器或 EB 平台上的应用程序时，有多少不同？问题可能是：当您的应用程序运行分布式环境时有什么不同？

对不起，我不会说中文也不会说英文。但我正在寻找你的答案，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:00:33.890

Elastic Beanstalk 是一种云 PaaS 服务，它具有与您描述的相同的限制。Elastic Beanstalk 中没有任何内容可以阻止您的应用程序写入每个实例上的磁盘，但不建议仅用于临时文件存储，因为负载均衡器可以随时删除和创建实例。

对于 Wordpress，您必须找到一种将上传文件写入 S3 或其他更持久存储的方法。

为了回答您的其他问题，Elastic Beanstalk 除了部署代码外，对您的代码不做任何事情。它不会以任何方式改变它。

# android - 如何使用 SharedPref。在 ArrayAdapter 类文件中？

> ID：10474027
> 
> 赞同：0
> 
> 时间：2012-05-06T20:31:23.983
> 
> 标签：android, sharedpreferences, android-arrayadapter

我有一个自定义数组适配器来显示项目列表，在本例中为高分。该系统有点模仿文件夹方案；单击一个名为“Game 1”的文件夹，它会进入一个包含前 10 名得分手的新列表。当您进行测试时，它会更改一个名为 isPlayed 的共享首选项，如果 isPlayed 为 1，则该游戏（游戏 1）的​​图像为绿色，否则，如果您从未玩过游戏 1，isPlayed 永远不会为 0，因此图像游戏的高分榜是红色的。但是，SharedPreferences 在扩展 ArrayAdapter 的类中似乎是未知的。如何在此处使用来自 sharedpreferences 的数据？如果您需要更多信息，请发布问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:43:49.880

您可以使用以下方式访问 SharedPreferences -

[getContext().getSharedPreferences(String name, int mode)](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences%28java.lang.String,%20int%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T21:56:30.103

```
PreferenceManager.getDefaultSharedPreferences(YourActivity.this) 
```

或者，`YourActivity.this`您可以使用`Context`应用程序中的任何内容，例如应用程序上下文。

# opengl - 级联阴影映射查找决策 / gl_FragCoord.z

> ID：10474034
> 
> 赞同：3
> 
> 时间：2012-05-06T20:32:03.727
> 
> 标签：opengl, glsl

我已经在 nvidia SDK (http://developer.download.nvidia.com/SDK/10.5/Samples/cascaded_shadow_maps.zip) 中实现了级联阴影映射。但是我的查找似乎不起作用。

这是描绘我当前状态的图片：http: [//i.imgur.com/SCHDO.png](http://i.imgur.com/SCHDO.png)

问题是，即使我离它很远，我也会立即进入第一次分裂。如您所见，甚至没有考虑其他拆分。

我认为这可能来自主引擎使用的不同投影矩阵。它与我提供给算法的不同，但我也尝试将相同的矩阵传递给着色器并以这种方式计算： gl_Position = matProj * gl_ModelViewMatrix * gl_Vertex 但这并没有改变任何事情。我最终还是只有一个分裂。

这是我的着色器：

[顶点]

```
varying vec3 vecLight;
varying vec3 vecEye;
varying vec3 vecNormal;
varying vec4 vecPos;
varying vec4 fragCoord;
void main(void)
{
    vecPos = gl_Vertex;
    vecNormal = normalize(gl_NormalMatrix * gl_Normal);
    vecLight = normalize(gl_LightSource[0].position.xyz);
    vecEye = normalize(-vecPos.xyz);

    gl_TexCoord[0] = gl_MultiTexCoord0;
    gl_Position = ftransform();
} 
```

[片段]（只是阴影部分）

```
vec4 getShadow()
{
    vec4 sm_coord_c = texmat_3*vecPos;
    float shadow = texture2D(smap_3, sm_coord_c.xy).x;
    float s = (shadow < sm_coord_c.z) ? 0.0 : 1.0;

    vec4 shadow_c = vec4(1.0, 1.0, 1.0, 1.0) * s;

    if(gl_FragCoord.z < vecFarbound.x)
    {
      vec4 sm_coord_c = texmat_0*vecPos;
      float shadow = texture2D(smap_0, sm_coord_c.xy).x;
      float s = (shadow < sm_coord_c.z) ? 0.0 : 1.0;

      shadow_c = vec4(0.7, 0.7, 1.0, 1.0) * s;
    }
    else if(gl_FragCoord.z < vecFarbound.y)
    {
      vec4 sm_coord_c = texmat_1*vecPos;
      float shadow = texture2D(smap_1, sm_coord_c.xy).x;
      float s = (shadow < sm_coord_c.z) ? 0.0 : 1.0;

      shadow_c = vec4(0.7, 1.0, 0.7, 1.0) * s;
    }
    else if(gl_FragCoord.z < vecFarbound.z)
    {
      vec4 sm_coord_c = texmat_2*vecPos;
      float shadow = texture2D(smap_2, sm_coord_c.xy).x;
      float s = (shadow < sm_coord_c.z) ? 0.0 : 1.0;

      shadow_c = vec4(1.0, 0.7, 0.7, 1.0) * s;
    }

    return shadow_c;
} 
```

所以出于某种原因，gl_FragCoord.z 比 vecFarbound.x 小，无论我在场景中的哪个位置。（还要注意最左边的阴影区域，这个区域会随着我移动相机的高度而增加，很快就会占据整个场景......）

我检查了 vecFarbound 值，它们与 nvidia 代码中的值相似，所以我假设我计算正确。

有没有办法检查 gl_FragCoord.z 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:34:56.177

在我的旧 csm 实现中，我只是在相机空间中使用了距离

```
float tempDist = 0.0;
tempDist = dot(EyePos.xyz, EyePos.xyz);
if (tempDist < split.x) ...
else if (tempDist < split.y) ...
... 
```

这个解决方案对我来说更容易理解，并且我可以更好地控制拆分。当您使用 Z 值（在剪辑空间中）时，可能会出现一些问题，因为 z 值是非线性的。

我建议在 viewSpace 中进行拆分测试，然后（如果可行）使用 gl_FragCoord.z..

# git - 与 Team Foundation Server 类似的程序

> ID：10474041
> 
> 赞同：2
> 
> 时间：2012-05-06T20:32:45.613
> 
> 标签：git, svn, version-control, tfs

我们是 3 名通过互联网工作的程序员。我们遇到的主要问题是我们经常覆盖彼此的文件。我们正在寻找的是一个阻止文件进行编辑的程序。例如，当我想编辑文件时，我希望程序下载该文件的最新版本并阻止它以防止其他用户覆盖它，当我完成该文件的编辑时，程序应该上传到服务器并取消阻止它，以便其他人可以编辑它。版本控制是一个理想的功能，但不是必需的。

我们需要它可以在普通服务器上运行（任何带有 MYSQL 数据库的廉价主机）。

我们测试了 Git 和 Subversion，但我们很难理解（如果他们可以的话）它们是如何在常规托管服务上运行的。

欢迎任何建议或解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T21:19:05.157

您可以将[GitHub](https://github.com/plans)用于托管的 Git 存储库。他们的计划非常便宜，5 个私人项目每月只需 7 美元。

Team Foundation Services（如 Nockawa 所述）也很棒，价格从每位用户 5 美元起，每个帐户 5 个免费用户。有一个用于 TFS（最多 5 个用户）的工作组版本，它附带 MSDN 订阅。你可以从任何地方运行它。

至于其他托管解决方案，有多家供应商可以为您托管 Subversion 或 Git 或普通的旧 CVS 或 Mercurial。样品：

*   [http://codesion.com/](http://codesion.com/)
*   [https://github.com/plans](https://github.com/plans)
*   [http://www.microsoft.com/visualstudio/en-us/products/2010-editions/team-foundation-server/hosting](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/team-foundation-server/hosting)
*   [https://bitbucket.org/](https://bitbucket.org/)
*   [https://www.mercurial-scm.org/wiki/MercurialHosting](https://www.mercurial-scm.org/wiki/MercurialHosting)

最后，我会选择一个提供源代码管理服务的托管服务提供商。我不会寻找可以安装自己版本的源代码控制产品的网络提供商。它更容易维护，他们将为您承担优化和备份的负担。

至于阻塞问题，独占锁定是“旧式”。相反，包括 TFS 在内的大多数源代码控制系统都提供了一种合并更改的方法，并且会标记自上次获取最新版本以来文件已更改。合并非常强大，一旦你掌握了它，它可以帮助你更顺畅地协同工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T20:46:56.113

您可以尝试[TFSPreview](http://tfspreview.com/)以使用云上的 TFS 服务器。要回答“阻塞文件”问题，请通过清除启用多个签出复选框来配置团队项目的源代码控制设置以使用[独占签出。](http://msdn.microsoft.com/en-us/library/ms242869.aspx)

目前 TFSPreview 是免费的，但微软总是说他们的目标不是从中赚钱，所以期望以您支付的价格获得相当好的服务水平，并且不用担心设置和维护。

# jakarta-ee - 带有 glassfish 的 slf4j 忽略了 logback

> ID：10474042
> 
> 赞同：3
> 
> 时间：2012-05-06T20:32:49.030
> 
> 标签：jakarta-ee, maven, glassfish, slf4j

在一个 java-ee maven 项目中，我想将 slf4j 与 logback 一起使用，但是我相信包含来自 org.glassfish.extras 的“glassfish-embedded-all”工件会导致使用 JDK14LoggerAdapter。

删除此工件会导致日志记录按预期工作，但是由于 java-ee api 问题导致测试失败，如本问题所述 - [Testing against Java EE 6 API](https://stackoverflow.com/questions/3424207/testing-against-java-ee-6-api)。

我相信，导致问题的确切 pom 条目是：

```
<dependency>
    <groupId>org.glassfish.extras</groupId>
    <artifactId>glassfish-embedded-all</artifactId>
    <version>3.1</version>
    <scope>test</scope>
</dependency> 
```

有没有办法配置 slf4j 使用 logback？还是有更好的测试 java ee 代码的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:45:49.677

Glassfish 服务器包括一个 SLF4J 绑定实现，它也被加载。

如果您使用例如 7zip 打开 glassfish jar，您会看到有一个 org/slf4j/impl/StaticLoggerBinder.class。

在我看来，他们已经为 JDK14Logging 实现了自己的日志记录绑定器。有其他人知道如何禁用此绑定吗？

另请参阅此链接：[logback with EJB3.1](https://stackoverflow.com/questions/2418069/logback-with-ejb3-1/2454500#2419855)

# matlab - 如何将 fir1 阻带滤波器变成多阻带滤波器

> ID：10474043
> 
> 赞同：2
> 
> 时间：2012-05-06T20:32:49.640
> 
> 标签：matlab

单个带阻滤波器可以通过fir1(N,[w1 w2],'stop')来制作，其中N是滤波器系数的个数，w1是开始停止频率，w2是结束停止频率，怎么转这变成一个多阻带滤波器？有没有直接的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T00:25:00.813

使用 conv 确定适当的系数：

```
b =  fir1(50,[0.2 0.3],'stop');
b2 =  fir1(50,[0.7 0.8],'stop');
freqz(conv(b,b2),1); 
```

![在此处输入图像描述](../Images/587523f30649a6b8caa00beb5044a916.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-10T12:35:39.380

使用 'DC-0' 而不是 'stop' 并给它每个波段的开始和结束：

```
bd1start=1500/(fs/2);
bd1end=3500/(fs/2);

bd2start=6500/(fs/2);
bd2end=8500/(fs/2);
order=64;
bb=fir1( order, [bd1start bd1end bd2start bd2end ],'DC-1' ); 
```

# iphone - glDrawArrays 在 iOS 中崩溃 - 多个 Line Strip

> ID：10474051
> 
> 赞同：0
> 
> 时间：2012-05-06T20:33:54.927
> 
> 标签：iphone, ios, ipad, opengl-es

我在以下代码中遇到了崩溃：

```
-(void)EAGLViewNeedsRedraw:(EAGLView *)EAGLView {
   glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

   glMatrixMode(GL_MODELVIEW);
   glLoadIdentity();

   glTranslatef(-100.0f, -60.0f, -180.0f);
   glMultMatrixf(transform);

   glVertexPointer(3, GL_FLOAT, 0, &fiber_model_vertices[0]);
   glEnableClientState(GL_VERTEX_ARRAY);

   // Do the drawing
   for (int i=0; i<[tracF num_fibers];i++) {
           glDrawArrays(GL_LINE_STRIP, 
                 [tracF array_offset:i], 
                 [tracF num_vertices_for_fiber:i]);
    }
} 
```

它在 276 次调用后崩溃`glDrawArrays`。`glDrawArrays`通话次数有限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:23:26.727

我已经弄清楚了问题所在。

这似乎是顶点缓冲区对象的一个​​限制。当我禁用 VBO 时，程序不再崩溃。

# database - Access + VBA：正确创建数据库

> ID：10474054
> 
> 赞同：2
> 
> 时间：2012-05-06T20:34:02.593
> 
> 标签：database, excel, ms-access, vba

如何使用以下字段更正创建数据库：

```
Dim F As String
Dim S As Long
Dim T As Integer
Dim C As Double //Currency
Dim D As String //Date

F = "ABC"
S = 88869045
T = 9   
C = 30.4493 // currency, but can be double
D = "06.08.2010" // date (how to correct convert to date?) //#1

DBTable.Name = "TestTable"
DBTable.Columns.Append "First", adVarWChar, 40
DBTable.Columns.Append 1, adBigInt, 20
DBTable.Columns.Append 0, adInteger
DBTable.Columns.Append 0, adCurrency
DBTable.Columns.Append 0, adDate

DBCatalog.Tables.Append DBTable 
```

还有，`DBCatalog as ADOX.Catalog`和`DBTable as ADOX.Table`。

另请参阅附加问题`#1`。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T20:48:08.760

如果您的 Access 版本是 2000 或更高版本，您可以使用该`Replace()`函数将日期字符串中的点替换为破折号。然后该`CDate()`函数将能够将字符串转换为日期/时间值。

```
Debug.Print CDate(Replace("06.08.2010",".","-"))
6/8/2010 
```

That was an example from the Immediate window on my system, which uses US as its locale setting. So `CDate()` can accept a string containing a date in mm-dd-yyyy format. If your locale is different, you will need to put in more work to get what you need.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T20:43:11.247

一切正常：

```
//create database
DBTable.Name = "TestTable"
DBTable.Columns.Append "First", adVarWChar, 40
DBTable.Columns.Append "Second", adDouble, 40
DBTable.Columns.Append "Third", adInteger
DBTable.Columns.Append "Forth", adCurrency
DBTable.Columns.Append "Fifth", adDate 
```

但是关于迄今为止的转换字符串的问题仍然悬而未决：

```
Dim D as String //must be date 
D = "06.10.2010" 
```

如何将其转换为日期，然后插入数据库？（类型`adDate`和日期是否兼容？）

因此，显示最后一个版本的代码：

```
// after this: insert data into datatable (not in question, but part of creation db (usage is necessary))
Dim F As String
Dim S As Double
Dim T As Integer
Dim C As Double
Dim D As Date

Dim SS As String
Dim TS As String
Dim CS As String
Dim DS As String

F = "'" + "ABC ABD ACS" + "'" //use of single (') quote
S = 88869045
T = 9
C = 30.4493
D = CDate("20/12/2010") // for any data type! don't forget about it

SS = "'" + Str(S) + "'"
TS = "'" + Str(T) + "'"
CS = "'" + Str(C) + "'"
DS = "'" + Str(D) + "'"

DBConnection.Execute "INSERT INTO TestTable VALUES  (" + F + "," + SS + "," + TS + "," + CS + "," + DS + " ) " 
```

PS它工作正常，感谢您的评论和回答。

# azure - 客户端：访问 Windows Azure 驱动器？

> ID：10474056
> 
> 赞同：2
> 
> 时间：2012-05-06T20:34:26.597
> 
> 标签：azure, azure-storage

我正在开发一个 Azure 应用程序，其中一部分涉及用户浏览在线文件系统。为此，我正在尝试使用 Windows Azure 驱动器，但我不知道如何从客户端访问它，或者如何使其在服务器端可访问。

目前，我只知道如何制作驱动器：

```
CloudStorageAccount devStorage = CloudStorageAccount.DevelopmentStorageAccount;
CloudBlobClient client = devStorage.CreateCloudBlobClient();
CloudBlobContainer container = new CloudBlobContainer("teacher", client);
CloudDrive.InitializeCache(localCache.RootPath, 
        localCache.MaximumSizeInMegabytes);
CloudDrive drive = new CloudDrive(container.GetPageBlobReference("drive1").Uri, devStorage.Credentials);
drive.Create(50); 
```

我使用 C# 作为我的开发语言。

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T00:56:13.227

对于 Windows Azure 云驱动器，您需要了解以下几点：

1.  云驱动器是实际的页 Blob，它们存储在 Windows Azure Blob 存储中并作为驱动器（您将获得取决于您的机器驱动器统计信息的驱动器号）安装在您可以提供 Windows Azure 运行时环境的机器上。

2.  正如您在示例中展示的那样，程序化很容易在您的代码中安装云驱动器，但是缺少一件事，那就是确保拥有可以运行此代码的 Windows Azure RunTime 环境。

我已经编写了一个实用程序来在位于此处的 Windows Azure VM（Web、Worker 或 VM 角色）中安装 azure 驱动器：http: [//mountvhdazurevm.codeplex.com/](http://mountvhdazurevm.codeplex.com/)

您可以直接在 Windows Azure VM 中运行上述工具，也可以在 Compute Emulator（Windows Azure Development Fabric）中使用完全相同的代码，所以底线是只要您可以提供 Windows Azure 运行时环境，就可以挂载 Page blob VHD 驱动器。

我见过几个案例，有人要求我在本地机器（客户端和服务器，任何地方）中安装 Windows Azure Page Blob 作为驱动器，而实际的障碍是在本地环境中引入 Windows Azure 运行时间，因为它不可用。在某些情况下，一些人继续尝试使用 Windows Azure SDK 让 Windows Azure 运行时在他们的桌面上可用，创建一个虚拟 Web 角色，然后安装 VHD，该 VHD 安装在本地计算机上，并且驱动器号可用作好。我不确定这种解决方案，因为这不是 Windows Azure 计算模拟器的设计。希望此描述为您提供一些指导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T20:54:00.260

我不确定我是否正确理解了您的问题，但听起来您希望多个客户端应用程序（可能在不在 Azure 上的机器上）访问您的 Azure 驱动器？

不幸的是，只能从 Azure web/worker 或 VM 角色实例访问 Azure 驱动器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-17T10:54:04.180

我编写了一个运行在 Azure 网站上的 WebDAV 服务器，它允许包括 Windows Explorer 和 Office 在内的客户端连接到 Azure 存储。它使用表和 Blob 存储的组合来存储文件结构和文件。我已经使用 Windows Explorer 和 Word 2013 对其进行了测试。虽然这不是云驱动解决方案，但它仍然使用 Azure 存储作为后端，并且可以从 WebDAV 客户端访问。你可能会发现它很有用..

[https://github.com/ichivers/AzureDAV](https://github.com/ichivers/AzureDAV)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T00:32:16.850

现有答案的另一点。您始终可以下载支持云驱动器的 blob 并将其安装在本地系统上。该 blob 实际上只是一个 VHD。但是，除非驱动器很小，否则下载时间不会很短。

埃里克

# windows-phone-7 - 使用来自其他程序集的 ApplicationBar 图标？

> ID：10474064
> 
> 赞同：2
> 
> 时间：2012-05-06T20:35:05.537
> 
> 标签：windows-phone-7, appbar

我在 Windows Phone 类库中有一个页面。此页面有一个应用栏。我希望此页面需要包含在类库中的所有内容，以便此页面/程序集的使用者的设置列表最少。

但是，当我设置 ApplicationBar 图标时，它们会像往常一样添加到文件夹“图标”下的类库项目中，它们在 Blend 中显示良好，但在运行时找不到它们！

当我将图标放在 Windows Phone 应用程序项目中时，一切都很好。然而，这不是我想要的场景，因为它是应用程序作者额外的配置/设置来使用我的页面。

我尝试使用 /{AssemblyName};component/icons/{IconName} 使用资源路径，但当然 AppBar 需要它们的类型为“内容”而不是“资源”。所以我认为这是不可能的，但我想知道是否有人知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:39:25.640

对不起大家。我刚刚想通了。我将新添加的图标从“资源”更改为“内容”，但我忘记设置“如果较新则复制”，因此它们不会输出到 Windows Phone 应用程序的 Bin\Debug\icons 文件夹。我想有什么需要注意的。

# asp.net - 网络连接的打印机在 ASP.Net 应用程序中不可用

> ID：10474066
> 
> 赞同：5
> 
> 时间：2012-05-06T20:35:08.753
> 
> 标签：asp.net, iis, printing, impersonation

我有一个在 IIS 7.5 上运行的 ASP.Net 4.0 Web 应用程序，我可以使用`System.Drawing.Printing.PrinterSettings.InstalledPrinters`命令获取已安装打印机的列表，并将应用程序中的每个报告分配给上面列出的任何打印机！

服务器上可能有一些**网络连接的打印机**都设置了对应用程序用户帐户的**完全权限**，一切正常，直到应用程序的用户帐户注销 Windows，此时`System.Drawing.Printing.PrinterSettings.InstalledPrinters`仅返回本地打印机，没有列出网络连接的打印机！

我尝试通过以下方式向有权访问网络打印机的用户模拟 ASP.Net 进程，但没有成功：

*   我将应用程序池配置`Process Model`为以特定用户身份运行。
*   我将应用程序的身份模拟给 Web.Config 中的特定用户：

    `<identity impersonate="true" userName="user" password="pass"/>`

*   `advapi32.dll`最后使用API在代码中实现模拟

在上述所有方法中，`WindowsIdentity`打印时返回真实的用户名：

```
System.Security.Principal.WindowsIdentity.GetCurrent().Name 
```

但看起来模拟不是这里的问题，用户注销的那一刻，所有网络连接的打印机都消失了！

有谁知道如何解决这个问题？即使用户未登录，是否有任何方法可以访问网络连接的打印机？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T16:50:45.733

网络连接的打印机、共享文件夹和映射驱动器只有在用户登录操作系统时才能访问，它们几乎不是某些网络资源的快捷方式，所有网络资源都断开连接，并且在相应用户注销时无法访问！

使用`System.Printing.PrintServer`and`GetPrintQueues`方法，可以得到打印服务器托管的打印队列集合：

`PrintServerUNCName`是对应服务器的[UNC 名称](http://en.wikipedia.org/wiki/Path_%28computing%29#UNC_in_Windows)，如`\\MyServerName`

```
var printers = new PrintServer("PrintServerUNCName").GetPrintQueues()
    .Where(t =>
    {
        try { return t.IsShared && !t.IsNotAvailable; }
        catch { return false; }
    })
    .Select(t => t.FullName)
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:54:18.450

尝试以下可能有帮助的链接。您必须按名称在服务器上添加打印机，并使用名称而不是 UNC 访问打印机。

[从 ASP.NET 打印到网络打印机](https://stackoverflow.com/questions/3729153/printing-from-asp-net-to-a-network-printer)

# objective-c - 遍历 NSData 字节

> ID：10474071
> 
> 赞同：10
> 
> 时间：2012-05-06T20:35:20.470
> 
> 标签：objective-c, cocoa-touch, nsdata

如何`[NSData bytes]`逐个遍历并将它们附加到`NSMutableString`或使用打印它们`NSLog()`？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-06T20:36:52.943

与其将字节附加到可变字符串，不如使用数据创建一个字符串：

```
// Be sure to use the right encoding:
NSString *result = [[NSString alloc] initWithData:myData encoding:NSUTF8StringEncoding]; 
```

如果你*真的*想遍历字节：

```
NSMutableString *result = [NSMutableString string];
const char *bytes = [myData bytes];
for (int i = 0; i < [myData length]; i++)
{
    [result appendFormat:@"%02hhx", (unsigned char)bytes[i]];
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-11-20T22:14:24.207

更新！从 iOS 7 开始，有一种新的首选方法可以遍历 NSData 对象中的所有字节。

因为`NSData`现在可以在底层由多个不相交的字节数组块组成，所以调用`[NSData bytes]`有时会导致内存效率低下，因为它需要将所有底层块扁平化为调用者的单个字节数组。

为避免这种行为，最好使用`enumerateByteRangesUsingBlock:`NSData 方法枚举字节，该方法将返回现有底层块的范围，您可以直接访问这些块，而无需生成任何新的数组结构。当然，您需要小心不要在提供的 C 样式数组中不恰当地四处寻找。

```
NSMutableString* resultAsHexBytes = [NSMutableString string];

[data enumerateByteRangesUsingBlock:^(const void *bytes,
                                    NSRange byteRange,
                                    BOOL *stop) {

    //To print raw byte values as hex
    for (NSUInteger i = 0; i < byteRange.length; ++i) {
        [resultAsHexBytes appendFormat:@"%02x", ((uint8_t*)bytes)[i]];
    }

}]; 
```

# java - 在 Netbeans 平台应用程序中使用 JavaFX

> ID：10474072
> 
> 赞同：0
> 
> 时间：2012-05-06T20:35:28.583
> 
> 标签：java, javafx, javafx-2, netbeans-platform

我试图开始开发一个 NB 平台应用程序，该应用程序包含`JFXPanel`一个`TopComponent`. `JFXPanel`不幸的是，在实例化时会在运行时引发异常。我看到这是因为我的项目的子目录中没有 JavaFX 本机库（如 glass.dll）。

在我试图通过复制文件来解决问题之前，我想问你是否有更好的方法。在我看来，我不应该将本机库复制到我的项目中，因为它们应该由我的应用程序安装到的系统提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T21:04:23.170

1.  您是如何将 JavaFX 依赖项添加到您的 Java 项目中的？通常的方法是将 jfxrt.jar 添加到依赖项中，在这种情况下，本机库将被自动捕获。

2.  另一个原因可能是 Netbeans 的 lib 复制选项的错误行为。右键单击项目，然后转到`Properties -> Build -> Packaging`并取消选中`Copy Dependent Libraries`选项。

3.  您也可以尝试下载[JavaFX Samples](http://www.oracle.com/technetwork/java/javafx/samples/index.html)，打开“Swing Interoperability App”并查看该项目的工作原理。

# pdo - 通过 1 个 PDO 更新字段

> ID：10474074
> 
> 赞同：0
> 
> 时间：2012-05-06T20:35:40.860
> 
> 标签：pdo

每次声明为真时，我都试图用 1 更新我的数据库中的一个字段。我不确定该怎么做。使用我的以下代码，我不确定这个问题（尽管有很多谷歌搜索）：

1.  如何将现有字段值加 1（投票 = 投票 + 1）
2.  where 语句与 bindParam 结合。

我没有收到任何错误消息，尽管它不起作用。我究竟做错了什么？

我的代码看起来像这样（$id 变量是正确的已经打印出来了，它具有“正确”的值，$dbh 也设置了正确的连接）：

```
 $stmt = $dbh->prepare("UPDATE rating SET vote = vote+1 WHERE rel_id_product = ':id'");
        $stmt->bindParam(':id', $id, PDO::PARAM_STR);
        $stmt->execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:40:32.393

不要引用占位符。当需要“插入”您在查询中使用的值时，PDO 会在必要时为您执行此操作：

```
... WHERE rel_id_product = :id
                           ^^^--- no quotes 
```

另外，做`var_dump($stmt->execute)`，看看你得到什么。如果它是布尔值 false，则查询失败。您还假设准备调用已成功并尝试执行它。永远不要假设数据库操作已经成功。即使 SQL 语法是完美的，也有太多其他原因导致事情发生爆炸而不进行检查。

# parsing - 将语言规范转换为生产规则（不确定是 CFG 还是 CSG）

> ID：10474076
> 
> 赞同：1
> 
> 时间：2012-05-06T20:36:07.007
> 
> 标签：parsing, context-free-grammar, context-sensitive-grammar, chomsky-hierarchy

我必须编写一个函数来检查输入字符串对于给定的语言规范是否有效。我认为这将是一个标准的 CFG -> Chomsky Normal Form，然后是 CYK 解析，但是语言中的一条规则是防止这种情况发生。

有些规则很简单，如果我们定义了 terminal `{a,b,c,d,e,f,P,Q,R,S}`，那么有效的字符串就是

> 1) 任何孤立的小写终端
> 2) 如果 'x' 是一个有效的字符串，那么 Sx 也是

但是第三条规则是

> 3) 如果 X 和 Y 是有效的输入字符串，那么 PXY、QXY、RXY 也是

其中`{P,Q,R}`是剩余的大写终结符，X 和 Y 是非终结符。

这个的生产规则是什么样的？我以为会是这样的

```
XY -> PXY (and QXY, RXY) 
```

但这有两个问题。首先，这不是 CFG 规则——这是否意味着该语言定义了 CSG？

第二个是这行不通，因为

> XY -> PXY -> PPXY

在所有情况下都不是有效的消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T03:16:42.327

我认为这个语法是上下文无关的，除非我误解了你在说什么。

首先，让我们让 A 成为扩展为仅使用前两个规则生成的某个有效字符串的非终结符，我们得到

```
A -> a | b | c | d | e | f 
```

现在，您的第二条规则说，如果您可以构建字符串 ω，那么您就可以构建 Sω。我们可以将其编码为

```
A -> SA 
```

最后，您说过如果您有两个字符串 X 和 Y，那么您可以将它们组合在一起为

```
PXY
QXY
RXY 
```

考虑这一点的一种方法是生成字符串 P，后跟任意两个有效字符串（Q 或 R 相同）。因此您可以添加规则

```
A -> PAA | QAA | RAA 
```

这给出了最终的语法

```
A -> a | b | c | d | e | f
A -> SA
A -> PAA | QAA | RAA 
```

希望这可以帮助！

# javascript - 使用 Javascript 写入文档

> ID：10474080
> 
> 赞同：-1
> 
> 时间：2012-05-06T20:36:41.477
> 
> 标签：javascript

```
jQuery(document).ready(function($) {
        var devices = $(".menu-item-custom").map(function() {
            return this.id.substr(10);
        }).toArray();

        $.each(devices, function() {

            $("#menu-item-settings-"+this+" .description").eq(3).after("<p class='description description-thin'><label for 'translated_title_"+this+"_ar'>عربي<br><input type= 'text' class='widefat edit-menu-item-title' name='translated_title_"+this+"_ar value='"+$(document).write('ssss')+"' '></label></p>");

        });

}); 
```

使用此代码我试图写入 value 属性，但出现此错误：

```
Uncaught TypeError: Object [object Object] has no method 'write' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T20:38:05.367

要么使用`document.write`（本机浏览器实现）

或 jQuery 的`$('#element').html('<p>....')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T20:46:59.863

jQuery 对象中没有`write`。

使用`$("#element").append`而不是`document.write`. （您可以附加`textnodes`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T20:39:37.537

错误是没有`write`功能 on `$(document)`（与 不同`document`）。

但也许更重要的是，您正在创建一个要传递给`.after`. 那不是写文件的地方。对于创建字符串，以下内容就足够了：

```
value='" + 'ssss' + "' 
```

（假设`'ssss'`在生产代码中将是一个变量，否则当然根本不需要连接）

# java - 具有数组问题的 Java 对象数组

> ID：10474084
> 
> 赞同：-1
> 
> 时间：2012-05-06T20:36:56.143
> 
> 标签：java, arrays, variables, object

已经为此工作了几个小时，所以我想我会问，当我创建这个对象的数组时，给定随机输入的内存数组会导致数组的其余部分具有相同的输出：请参见下面的代码。

蜜蜂类：

```
private class Bee{
    private int status;
    private float[] memory;
    private double quality;
    private int visits;

    private Bee(int status, float[] memory, double quality, int visits){
        this.status = status;
        this.memory = memory;
        this.quality = quality;
        this.visits = visits;
    }
} 
```

打印时单个蜜蜂的质量不同，但它们的记忆保持不变。

```
for(int i = 0; i < this.bees.length; i++){
    System.out.println(this.bees[i].memory[0]+" "+this.bees[i].memory[1]);
    System.out.println(this.bees[i].quality);
} 
```

样本输出：

```
3.4968524 8.354554
1581.5435920638447
3.4968524 8.354554
82.46318172154176
3.4968524 8.354554
66.25267691464408 
```

我不明白为什么质量有效但内存无效？

任何帮助或建议将不胜感激。

编辑：

```
for(int i = 0; i < totalNumberbees; i++){
    int beestatus;

    if(i < numberInactive){
         beestatus = 0;//inactive
         indexesOfInactivebees[i] = i;

    } else if(i < (numberInactive + numberScout)){
         beestatus = 2;//scout

    } else{
         beestatus = 1;//active
    }

    float[] randomMemory = GenerateRandomMemory();
    this.bees[i] = new Bee(beestatus, randomMemory, MeasureQuality(randomMemory), 0);
}

private float[] GenerateRandomMemory(){
    float[] result = new float[this.functionData.vars.length];
    result = this.functionData.vars;

    for(int i = 0; i < result.length; i++){
        float r1 = new Random().nextFloat()*10;
        result[i] = r1;
    }
    return result;
} 
```

这是 GenerateRandomClass 和初始化蜜蜂的其余代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:42:58.010

`GenerateRandomMemory()`输出相同的浮点数组实例。检查它或发布它的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T20:49:03.083

似乎`randomMemory`数组只初始化了一次。要么你`GenerateRandomMemory()`在循环之前调用，要么每次调用它都会返回相同的引用。

# delphi - 在 db2 和 delphi 2010 中使用十进制数据类型处理货币值

> ID：10474085
> 
> 赞同：3
> 
> 时间：2012-05-06T20:36:57.250
> 
> 标签：delphi, db2, decimal, precision

我正在使用带有 db2 9.7 Express-C 的 delphi 2010，并且我有一个数据库，它有几个十进制类型的字段来处理货币值。现在我看到使用它存在一些问题，例如 9.20 值在我的前端显示值 9.19999980926514。我需要将数据库中的所有字段更改为 DECFLOAT 或者 tfield 中是否有函数、属性或其他替代方法来解决它？

谢谢。戴维斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T22:16:09.253

直接使用货币小数几乎总是一个问题。由于从数据库到您的前端应用程序的不同转换，可能会失去或获得（这也适用于大多数金融系统 - 请参阅[银行家四舍五入](http://en.wikipedia.org/wiki/Rounding#Round_half_to_even)）。

我建议您在进行操作/显示/等之前使用[RoundTo功能。](http://docwiki.embarcadero.com/Libraries/en/System.Math.RoundTo)一篇关于舍入的非常好的文章[http://docwiki.embarcadero.com/RADStudio/XE2/en/Floating-Point_Rounding_Issues](http://docwiki.embarcadero.com/RADStudio/XE2/en/Floating-Point_Rounding_Issues)

另一个建议是使用[Currency](http://docwiki.embarcadero.com/Libraries/en/System.Currency)类型。这是一个关于 SO 的问题，对这种类型有很好的解释[如何在 Delphi 中比较货币值时避免舍入问题？](https://stackoverflow.com/questions/182475/how-to-avoid-rounding-problems-when-comparing-currency-values-in-delphi)

# php - JpGraph：使用 AccBarPlot 时如何在 v3.5.0b1 中控制 x/y 偏移、边距和颜色？

> ID：10474088
> 
> 赞同：2
> 
> 时间：2012-05-06T20:37:37.733
> 
> 标签：php, graph, gd, jpgraph, symfony-1.2

# 一点背景

我正在尝试将使用 Symfony 1.2 构建的项目从一台服务器迁移到另一台服务器。该项目的功能之一是构建图（最初使用 JpGraph 2.3.5 完成）。

**如果不修改代码，该图不会按预期显示，并且正在寻找一些关于我可能忽略的内容的见解。** *由于没有足够的积分发布，图像被链接。* **[图形图像库](http://imgur.com/a/SbHYl/)**

下图是下面的代码块生成的 ![](../Images/b47744e9da53013fd9bb6b1c2a2b3390.png "原图 JpGraph v2.3.5")

```
<?php
    public function Graph($section) {
        $report = $section->getReport();
        $this->crews = array();
        foreach ($section->getCrews() as $crew) {
            $this->crews[$crew->getId()] = $crew;
        };

        # get the data
        $nextDayValues = $section->getNextDayValues();
        $nextDayValueLabels = $section->getNextDayValueLabels();

        $max_y = max($nextDayValues) < 7 ? 7 : max($nextDayValues);
        $this->crew_order = array_keys($nextDayValues);
        $this->summary = $this->getSummary();
        $this->bar_count = count($this->crews) + count($this->summary);

        $left    = 200;
        $right   =  30;
        $top     =  60;
        $bottom  =  80;
        $width   = 640;
        $height  = $top + $bottom + ($this->bar_count * 30 );

        $x_unit = $this->bar_count / ($height - $top - $bottom);
        $y_unit = $max_y / ($width - $left - $right);

        $csim_targets = array();
        $csim_alts = array();
        $bar_data = array();
        $max_days = 0;

        foreach ($this->crew_order as $i => $crew_id) {
            $csim_targets[$i] = url_for('units/index?crew_id='.$crew_id);
            $csim_alts[$i] = sprintf("Units for %s",
              $this->crews[$crew_id]->getCrew());

            # figure out the maximum y value
            $nextDayUnitsList = $this->crews[$crew_id]->getNextDayUnitsList();
            $units_array[$crew_id] = $nextDayUnitsList;

            if (count($nextDayUnitsList) > $this->max_days) {
                $this->max_days = count($nextDayUnitsList);
            };
        };

        $bg_values = array_values($nextDayValues);
        foreach ($this->summary as $summary) {
            array_push ($bg_values, $summary['value']);
        };

        $bg_bar = new BarPlot($bg_values);
        $bg_bar->SetCSIMTargets($csim_targets, $csim_alts);
        $bg_bar->SetNoFill(true);

        $fg_bars = $this->getFgBars($units_array);
        $fg_bar = new AccBarPlot($fg_bars);
        $fg_bar->SetFillColor('black');

        # initialize the graph
        $graph = new Graph($width, $height, 'auto');
        $graph->SetScale('textlin', 0, $max_y, 0, $this->bar_count);
        $graph->Set90AndMargin($left, $right, $top, $bottom);
        $graph->SetMarginColor('white');
        $graph->SetFrame(false);

        $graph->Add($fg_bar);
        $graph->Add($bg_bar);

        # add text labels
        foreach ($this->crew_order as $i => $crew_id) {
            $label = $this->value_label(
                $nextDayValueLabels[$crew_id],
                $i, $nextDayValues[$crew_id],
                10 * $x_unit, 5 * $y_unit
            );
            $graph->AddText($label);
        };

        foreach ($this->summary as $i => $summary) {
            $label = $this->value_label(
                $summary['value'],
                $i, $summary['value'],
                10 * $x_unit, 5 * $y_unit
            );
            $graph->AddText($label);
        };

        # add title
        $graph->title->Set(sprintf("%s - %s", $report->getName(),
          $section->getName()));
        $graph->title->SetFont(FF_VERDANA,FS_BOLD, 12);
        $graph->title->SetMargin(10);

        # add subtitle
        $graph->subtitle->Set(date('d-M-Y g:ia'));
        $graph->subtitle->SetFont(FF_VERDANA,FS_BOLD, 8);

        # configure x-axis
        $graph->xaxis->SetFont(FF_VERDANA, FS_NORMAL, 8);
        $graph->xaxis->SetLabelAlign('right', 'center');
        $graph->xaxis->SetLabelFormatCallback(array($this, 'x_axis_label'));
        $graph->xaxis->scale->ticks->Set(1, 0);

        # configure y-axis
        $graph->yaxis->SetFont(FF_VERDANA, FS_NORMAL, 8);
        $graph->yaxis->SetLabelAlign('center', 'top');
        $graph->yaxis->SetLabelAngle(45);
        $graph->yaxis->SetLabelFormatCallback(array($this, 'y_axis_label'));
        $graph->yaxis->SetPos('max');
        $graph->yaxis->SetLabelSide(SIDE_RIGHT);
        $graph->yaxis->SetTickSide(SIDE_LEFT);

        if (max($nextDayValues) > 28) {
            $graph->yaxis->scale->ticks->Set(7, 1);
        } else {
            $graph->yaxis->scale->ticks->Set(1, 1);
        };

        # configure legend
        $graph->legend->SetAbsPos(5, $height - 5, "left", "bottom");
        $graph->legend->SetColumns(count($this->legend));
        $graph->legend->SetFillColor('white');
        $graph->legend->SetShadow(false);

        $graph->SetImgFormat('png');

        return $graph;
    }

    private function getFgBars($units_array) {
        # initialize fg_bar data
        $empty_crews = array_fill_keys(array_keys($this->crew_order),0);

        # add segment bars
        foreach ($this->summary as $summary) {
            $empty_crews[] = 0;
        };

        $empty_segment = array();
        foreach (array_keys($this->legend_colors) as $status) {
            $empty_segment[$status] = $empty_crews;
        };

        $segments = array();
        for ($day = 0; $day < $this->max_days; $day++) {
            foreach (array_keys($empty_segment) as $status) {
                $segment = $empty_segment;
                foreach ($this->crew_order as $i => $crew_id) {
                    $nextDayUnitsList = $units_array[$crew_id];
                    if ($day + 1 < count($nextDayUnitsList)) {
                        $units = $nextDayUnitsList[$day];
                        $units_status = $units->getNextDayStatus();
                        $segment[$units_status][$i] = 1;
                    } elseif ($day + 1 == count($nextDayUnitsList)) {
                        $units = $nextDayUnitsList[$day];
                        $units_status = $units->getNextDayStatus();
                        $avail = $units->getUsedRatio();
                        $segment[$units_status][$i] = $avail;
                    } elseif ($day + 1 > count($nextDayUnitsList)) {
                        $segment[$units_status][$i] = 0;
                    };
                };
            };

            foreach ($this->summary as $i => $summary) {
                $diff = $summary['value'] - $day;
                if ($diff >= 1) {
                    $segment['summary'][$i] = 1;
                } elseif ($diff >= 0) {
                    $segment['summary'][$i] = $diff;
                } else {
                    $segment['summary'][$i] = 0;
                }
            };
            $segments[$day] = $segment;
        };

        # create legend
        $fg_bars = array();
        foreach (array_keys($empty_segment) as $status) {
            $fg_bar = new BarPlot($empty_crews);
            $fg_bar->setFillColor($this->legend_colors[$status]);

            if ($status <> 'summary') {
                $fg_bar->SetLegend($this->legend[$status]);
            };
            $fg_bars[] = $fg_bar;
        };

        # add segments
        foreach ($segments as $day => $segment) {
            foreach (array_keys($empty_segment) as $status) {
                $fg_bar = new BarPlot($segment[$status]);
                $fg_bar->setColor($this->legend_colors[$status]);
                $fg_bar->setFillColor($this->legend_colors[$status]);
                $fg_bars[] = $fg_bar;
            };
        };
        return $fg_bars;
    }
?> 
```

现在使用 JpGraph 2.3.5 或 JpGraph 3.5.0b1 的新服务器上的相同图表 ![](../Images/671b29e624ea1ed945d069c661aa44e7.png "原图 JpGraph v3.5.0b1")

## 可以看出几个问题：

1.  未应用颜色
2.  x/y 坐标偏移（边距？）
3.  规模已关闭
4.  刻度刻度也被删除

我知道要`$graph->Add($x);`在修改属性之前更正您放置的颜色。因此，我不得不将代码`getFgBars()`移入`Graph()`.

这在**[/docs/chunkhtml/ch29s02.html下的手册中有记录](http://jpgraph.net/download/manuals/chunkhtml/ch29s02.html)**

通过修改代码，我将 FgBars 分解`$fg_bars[]`为`$lg_bars[]`前景数据（颜色）和图例栏。 ![](../Images/7e74109597fece3ee722082deea6c4a5.png "修订代码/固定颜色")

如果我删除图例栏，图表将按预期显示。 ![](../Images/b47744e9da53013fd9bb6b1c2a2b3390.png "修改后的代码/删除的图例")

# **问题：**

什么会导致边距/比例在添加第二个时变得不稳定`AccBarPlot()`？

# **解决方案：**

删除默认主题。`$graph->graph_theme = null;`无需重写任何代码即可恢复颜色和边距。

```
 # initialize the graph
    $graph = new Graph($width, $height, 'auto');
    $graph->SetScale('textlin', 0, $max_y, 0, $this->bar_count);
    $graph->Set90AndMargin($left, $right, $top, $bottom);
    $graph->SetMarginColor('white');
    $graph->SetFrame(false);
    $graph->graph_theme = null; 
```

![](../Images/bc7c3b4de22ad1ecf8686e74687fc919.png "修改代码/删除默认主题")

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T17:02:43.003

# **解决方案：**

删除默认主题。`$graph->graph_theme = null;`初始化`Graph()`后将恢复颜色和边距，而无需重写任何代码。

```
 # initialize the graph
    $graph = new Graph($width, $height, 'auto');
    $graph->SetScale('textlin', 0, $max_y, 0, $this->bar_count);
    $graph->Set90AndMargin($left, $right, $top, $bottom);
    $graph->SetMarginColor('white');
    $graph->SetFrame(false);
    $graph->graph_theme = null; 
```

![](../Images/bc7c3b4de22ad1ecf8686e74687fc919.png "修改代码/删除默认主题")

# 资源：

[/docs/chunkhtml/ch29.html#id2619634](http://jpgraph.net/download/manuals/chunkhtml/ch29.html#id2619634) - SetTheme() 的顺序和更改设置 [/docs/chunkhtml/ch29s02.html](http://jpgraph.net/download/manuals/chunkhtml/ch29s02.html) - 更改折线图/条形图的显示设置

# c# - C# 数组与流

> ID：10474095
> 
> 赞同：3
> 
> 时间：2012-05-06T20:38:38.347
> 
> 标签：c#, arrays, performance, stream

在编写对可能无限的数据“流”（即字节、字符等）进行操作的函数时，在决定使用字符串/数组与流进行输入/输出时，有哪些设计考虑因素？

总是编写函数以使用流，然后制作使用流包装器（即 StringReader/Writer）的重载方法来返回“简单数据”，如不需要处理和其他考虑的数组或字符串，是否会对性能产生巨大影响？

我认为在数组上操作的函数要方便得多，因为您可以“返回”结果数组，而且您通常不必担心处理。我认为流操作符很好，因为它们可以对无限的数据源进行操作，而且可能还可以节省内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T21:01:57.660

如果您正在处理未知大小的二进制数据，请始终使用流。例如，如果可以避免，将整个文件读入字节数组通常是个坏主意。.Net 中大多数处理二进制数据的函数（例如加密和压缩）都是为使用流作为输入/输出而构建的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T21:20:33.617

如果您正在编写一个函数来处理数据流，那么为什么不将它作为`IEnumerable<T>`. `IEnumerable<T>`然后，您可以在生成器函数中将流作为 an 返回。换句话说，`return yield`用于一次返回每个结果。

在某些情况下，由于评估是根据需要完成的，因此您最终可能会获得性能的渐近改进。

# spotify - 在哪里可以找到 Spotify 集成指南中提到的 Spotify“应用程序流程”文档？

> ID：10474096
> 
> 赞同：0
> 
> 时间：2012-05-06T20:38:52.810
> 
> 标签：spotify, doc

在[集成指南](https://developer.spotify.com/technologies/apps/guidelines/01_integration-guidelines.html#signingintoyourownservice)的以下部分中，引用了一个名为 App flow 的文档。

有人知道我在哪里可以找到这个“应用程序流”文档吗？或者至少有一些关于外部登录的更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:03:44.643

指导方针已经过时。流程文档不是必需的。新版本的指南即将发布。

# perl - 判断 Perl 脚本的 STDOUT 是否被重定向

> ID：10474098
> 
> 赞同：6
> 
> 时间：2012-05-06T20:39:05.367
> 
> 标签：perl, stdout, tty, io-redirection

所以我写了一个简单的html 1.0服务器，我在服务器上有一些perl脚本。特别是，我有这个称为直方图的脚本，这是一个 html 表单，其表单操作等于另一个 cgi 文件。这是代码：

```
print "<form action=\"tallyandprint.cgi\" method=\"GET\">"; 
```

现在，当我调用tallyandprint.cgi 时，它会用gnuplot 绘制一个图形并将其发送到用户的浏览器（STDOUT 在html 服务器代码中被重定向，所以perl 继承了它）。现在，我还希望能够从 bash 运行 tallyandprint.cgi，但采用不同风格的参数。现在，我使用 perl 解析通过解析 url 来获取模式，并将 + 符号之间的内容分开（例如：?pattern=1+2+3+4 是 url 的含义）。

这很好，很花哨，但我不希望我的论点用 bash 写成 1+2+3+4，而是以不同的方式分隔。我尝试使用 perl 的 isatty() 版本，但由于输入始终来自终端（因为服务器执行它），我无法区分输入是来自 bash 还是来自 Web 浏览器。

我的下一个想法是找出 STDOUT 是否被重定向。因为如果网络服务器运行 cgi，STDOUT 将被重定向到用户连接的套接字。如果在 bash 中运行，STDOUT 应该是正常的 tty。我如何在 perl 中检查这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T20:55:46.483

```
if (-t STDOUT) {
    say "STDOUT is probably not redirected";
}
else {
    say "STDOUT is probably redirected";
} 
```

# memory-leaks - WebTestCase 或 Symfony2-Kernel 中的内存泄漏 - 如何向专家报告？

> ID：10474106
> 
> 赞同：1
> 
> 时间：2012-05-06T20:39:58.830
> 
> 标签：memory-leaks, symfony

我想我在 WebTestCase 类或内核本身中发现了内存泄漏。我的问题在最后。

为了重现，我创建了一个新的空 WebTestCase，它执行 $max 断言（在我的测试中，$max 的范围从 1 到 100.000）而不实例化任何内核。

```
<?php
use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;
class DemoTest extends WebTestCase
{
    public function testHello(  )
    {
        $max = 100000;
        for( $i = 0; $i < 1; $i++ )
        {
            $this->assertTrue( true );
        }
    }
} 
```

$max=1

```
Time: 0 seconds, Memory: 5.75Mb
OK (1 test, 1 assertion) 
```

$max=100000

```
Time: 1 second, Memory: 5.75Mb
OK (1 test, 100000 assertions) 
```

正如预期的那样，无论是运行 1 次还是 100.000 次，我都会消耗相同的内存。

现在我尝试循环创建任意类，使用它并销毁它。我选择 DOMDocument 的方式与选择任何其他类的方式相同。

```
 public function testHello(  )
    {
        $max = 100000;
        for( $i = 0; $i < $max; $i++ )
        {
            $dummy = new \DOMDocument();
            $dummy->loadHTML( '<html><head><title>dummy</title></head><body>dummy</body></html>' );
            unset( $dummy );
            $this->assertTrue( true );
        }
    } 
```

$max=1

```
Time: 0 seconds, Memory: 5.75Mb
OK (1 test, 1 assertion) 
```

$max=100000

```
Time: 2 seconds, Memory: 5.75Mb
OK (1 test, 100000 assertions) 
```

同样，无论我执行 1 次还是 100.000 次，我都会消耗相同的内存。

但是...现在我在循环中创建和销毁内核。我既不做 ->boot() 也不做 ->shutdown()，只是获取新的内核对象，这些对象甚至没有被引导，然后被取消引用，因此它们应该在释放所有资源时死掉。

```
 public function testHello(  )
    {
        $max = 10000;
        for( $i = 0; $i < $max; $i++ )
        {
            $dummy = static::createKernel();
            unset( $dummy );
            $this->assertTrue( true );
        }
    } 
```

$max=1

```
Time: 0 seconds, Memory: 6.25Mb
OK (1 test, 1 assertion) 
```

$max=100000

```
Time: 9 seconds, Memory: 165.50Mb
OK (1 test, 100000 assertions) 
```

从 5.75 提高到 6.25 是合乎逻辑的，这可能是内核资源的大小。半兆。但不正确的是，通过创建 100.000 个内核而不对其进行任何操作，我们往往会消耗 165 兆。有人正在释放它分配的资源。

*我的问题：*

*   这是泄漏吗？或者这是预期的行为，出于任何额外的原因，我不明白为什么要这样做？
*   我使用 2.0.10。如果是泄漏，我怎么知道这是否在以后的版本中得到纠正？
*   如果尚未更正，向核心团队报告最简单的方法是什么？

谢谢！哈维。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:24:10.563

Symfony2 代码托管在 github.com 上，问题必须在此站点上声明[https://github.com/symfony/symfony/issues](https://github.com/symfony/symfony/issues)

我在繁重的 web 测试用例中也遇到过这种问题，并且在 2.0.x 版本中没有修复。我无法确保您这是内存泄漏或正常行为...

*   面向开发人员的 Google 群组：[http ://groups.google.com/group/symfony-devs?pli=1](http://groups.google.com/group/symfony-devs?pli=1)
*   谷歌用户组：[http ://groups.google.com/group/symfony2?pli=1](http://groups.google.com/group/symfony2?pli=1)
*   Symfony2 论坛： http: [//forum.symfony-project.org/viewforum.php? f=23](http://forum.symfony-project.org/viewforum.php?f=23)

我建议您使用 Google Groups 邮件列表，然后是 GitHub 问题。

# performance - R中数据的快速边界

> ID：10474107
> 
> 赞同：14
> 
> 时间：2012-05-06T20:40:22.943
> 
> 标签：performance, r, data.table, bigdata, rcpp

假设我有一个向量 ，`vec`它很长（从 1E8 个条目开始）并且想将它绑定到范围`[a,b]`。我当然可以编码`vec[vec < a] = a`and `vec[vec > b] = b`，但这需要两次传递数据并为临时指标向量分配大量 RAM（~800MB，两次）。两者都通过了刻录时间，因为如果我们只将数据从主内存复制到本地缓存一次，我们可以做得更好（对主内存的调用很糟糕，缓存未命中也是如此）。谁知道多线程可以改善多少，但我们不要贪心。:)

在基本 R 或我忽略的某个包中是否有一个很好的实现，或者这是 Rcpp （或我的老朋友`data.table`）的工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T03:56:22.800

一个朴素的 C 解决方案是

```
library(inline)

fun4 <-
    cfunction(c(x="numeric", a="numeric", b="numeric"), body4,
              language="C")
body4 <- "
    R_len_t len = Rf_length(x);
    SEXP result = Rf_allocVector(REALSXP, len);
    const double aa = REAL(a)[0], bb = REAL(b)[0], *xp = REAL(x);
    double *rp = REAL(result);

    for (int i = 0; i < len; ++i)
        if (xp[i] < aa)
            rp[i] = aa;
        else if (xp[i] > bb)
            rp[i] = bb;
        else
            rp[i] = xp[i];

    return result;
"
fun4 <-
    cfunction(c(x="numeric", a="numeric", b="numeric"), body4,
              language="C") 
```

使用简单的并行版本（正如 Dirk 指出的那样，这是`CFLAGS = -fopenmp`在 ~/.R/Makevars 中，并且在支持 openmp 的平台/编译器上）

```
body5 <- "
    R_len_t len = Rf_length(x);
    const double aa = REAL(a)[0], bb = REAL(b)[0], *xp = REAL(x);
    SEXP result = Rf_allocVector(REALSXP, len);
    double *rp = REAL(result);

#pragma omp parallel for
    for (int i = 0; i < len; ++i)
        if (xp[i] < aa)
            rp[i] = aa;
        else if (xp[i] > bb)
            rp[i] = bb;
        else
            rp[i] = xp[i];

    return result;
"
fun5 <-
    cfunction(c(x="numeric", a="numeric", b="numeric"), body5,
              language="C") 
```

和基准

```
> z <- runif(1e7)
> benchmark(fun1(z,0.25,0.75), fun4(z, .25, .75), fun5(z, .25, .75),
+           replications=10)
                 test replications elapsed  relative user.self sys.self
1 fun1(z, 0.25, 0.75)           10   9.087 14.609325     8.335    0.739
2 fun4(z, 0.25, 0.75)           10   1.505  2.419614     1.305    0.198
3 fun5(z, 0.25, 0.75)           10   0.622  1.000000     2.156    0.320
  user.child sys.child
1          0         0
2          0         0
3          0         0
> identical(res1 <- fun1(z,0.25,0.75), fun4(z,0.25,0.75))
[1] TRUE
> identical(res1, fun5(z, 0.25, 0.75))
[1] TRUE 
```

在我的四核笔记本电脑上。假设数字输入、无错误检查、NA 处理等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T23:07:48.260

只是开始：您的解决方案和`pmin`/`pmax`解决方案之间没有太大区别（尝试使用 n=1e7 而不是 n=1e8 因为我不耐烦） - `pmin`/`pmax`实际上稍微慢了一点。

```
fun1 <- function(x,a,b) {x[x<a] <- a; x[x>b] <- b; x}
fun2 <- function(x,a,b) pmin(pmax(x,a),b)
library(rbenchmark)
z <- runif(1e7)

benchmark(fun1(z,0.25,0.75),fun2(z,0.25,0.75),rep=50)

                 test replications elapsed relative user.self sys.self
1 fun1(z, 0.25, 0.75)           10  21.607  1.00000     6.556   15.001
2 fun2(z, 0.25, 0.75)           10  23.336  1.08002     5.656   17.605 
```

# windows-phone-7 - 加载图像？

> ID：10474109
> 
> 赞同：0
> 
> 时间：2012-05-06T20:40:34.423
> 
> 标签：windows-phone-7

我有列表框，我需要在其中显示来自互联网的图像

我有一个这样的数据源：

![在此处输入图像描述](../Images/d90f0a6f77f129de9230f8acb00ddca8.png)

`DataTemplate`我使用这样的方法在列表框中绑定“图像” ：

```
<DataTemplate x:Key="DataTemplate1">
            <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                <Image Source="{Binding image}"></Image>
                <TextBlock Text="{Binding imagedec}"></TextBlock>
            </Grid>
        </DataTemplate> 
```

我可以看到图像，但它来晚了，在这种情况下显示图像的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:58:40.133

这是因为必须首先从 Internet（或缓存）加载图像。尝试添加灰色背景作为占位符并设置固定的高度和宽度：

```
<Border Background="{StaticResource PhoneInactiveBrush}" Width="100" Height="100">
    <Image Source="{Binding image}" Stretch="UniformToFill" Width="100" Height="100" />
</Border> 
```

仅当您可以设置固定的高度和宽度时，此解决方案才有效...

更新

您应该使用`LowProfileImageLoader`来提高性能：http: [//blogs.msdn.com/b/delay/archive/2010/09/02/keep-a-low-profile-lowprofileimageloader-helps-the-windows-phone-7-ui -thread-stay-responsive-by-loading-images-in-the-background.aspx](http://blogs.msdn.com/b/delay/archive/2010/09/02/keep-a-low-profile-lowprofileimageloader-helps-the-windows-phone-7-ui-thread-stay-responsive-by-loading-images-in-the-background.aspx)

# javascript - JavaScript - for 循环没有正确分配 x 和 y

> ID：10474110
> 
> 赞同：0
> 
> 时间：2012-05-06T20:40:46.383
> 
> 标签：javascript, jquery, html, path-finding

我在一个简单的 JavaScript 2D（画布）游戏中使用[A* 寻路脚本。](http://www.briangrinstead.com/blog/astar-search-algorithm-in-javascript-updated)我将我的游戏分解为[SSCCE](http://sscce.org/)。无论如何，我的游戏有 15 列和 10 行。

**问题是什么？**设置图表，我在一个循环中`nodes`使用一个简单的循环来正确设置（或者我认为），以设置一个 15 跨板和 10 块板。`for``for`

所以当我加载页面时，我得到这个错误：`Uncaught TypeError: Cannot read property '5' of undefined`

那是从这一行`start = graph.nodes[12][5];`（从`SSCCE`下面）开始，如果您更改`5`（`Y`），那么错误中的数字将会改变。

这是我的`SSCCE`。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>    
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type='text/javascript' src='graphstar.js'></script>
<script type="text/javascript">
    var board;
</script>
<script type='text/javascript' src='astar.js'></script>
<script type="text/javascript">
    $(document).ready(function()
{
        // UP to DOWN - 10 Tiles (Y)
        // LEFT to RIGHT - 15 Tiles (X)
        graph = new Graph([
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], 
        [1, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 1], 
        [1, 13, 1, 13, 13, 13, 13, 13, 1, 1, 1, 1, 1, 13, 13, 1], 
        [1, 13, 1, 1, 13, 1, 1, 13, 1, 13, 13, 1, 13, 13, 13, 1], 
        [1, 13, 13, 1, 1, 1, 13, 13, 1, 13, 13, 1, 1, 1, 13, 1], 
        [1, 13, 13, 1, 13, 1, 13, 13, 13, 13, 13, 1, 13, 13, 13, 1], 
        [1, 13, 13, 13, 13, 1, 13, 13, 13, 13, 13, 1, 13, 13, 13, 1], 
        [1, 13, 1, 13, 13, 13, 13, 13, 1, 1, 1, 1, 13, 13, 13, 1], 
        [1, 13, 1, 1, 1, 1, 13, 13, 13, 13, 1, 13, 13, 13, 13, 1], 
        [1, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 1], 
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
        ]);
        //Let's do an example test.
        start = graph.nodes[12][5]; // X: 12, Y: 5
        end = graph.nodes[2][4]; // X: 2, Y: 4
        result = astar.search(graph.nodes, start, end);
    });
</script>
</head>
<body>
Loading... pathfinding. Look in Chrome Console/Firefox Firebug for more information.
</body>
</html> 
```

如您所见，我`grid`的`10`上下行和`16`列。然而，我`graph`并没有那样解释它。

在这里查看全部内容：http `graphstar.js`: [//pastebin.com/xUwghjRR](http://pastebin.com/xUwghjRR)（这里是`astar.js`完整包： http: [//pastebin.com/YMBtX66W](http://pastebin.com/YMBtX66W)）

这是它的布局`graphstar.js`：**新更新**

```
function Graph(grid) {
    var nodes = [];

var row, rowLength, len = grid.length;
for(var y = 0; y < len; ++y){
    row = grid[y];
    rowLength = row.length; // Expected: 16;
    nodes[y] = new Array(len);
    for (var x = 0; x == rowLength - 1; ++x){

            nodes[y][x] = new GraphNode(x, y, row[y]);

    }
}

    this.input = grid;
    this.nodes = nodes;
} 
```

如您所见，`for`循环是通过查看`grid`. `grid`长度应该输出到`11`哪个是正确的，因为我们`Y`首先循环轴。然后按`row`应该输出`16`正确的长度，从那时起我们正在做`X`轴。

因此，当我启动页面时，我收到此错误：

所以......我想我把它画在了正确的位置，但是我`X`仍然`Y`给出了未定义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:02:27.777

你的循环条件从一开始就是假的，所以它甚至永远不会进入第一个循环，它应该是

```
for(var y = 0; y < len; ++y){ 
```

还呼吁`GraphNodes`可能会使用`x`而不是`y`

编辑：

代码中还有一些其他的小错误，第二个循环需要一个大写 L in`rowLength`以及你保存新节点对象的位置中的顺序`x`需要`y`切换`nodes[y][x] =`

编辑2：

工作功能，请注意我删除了对 GraphNodes 的函数调用以方便使用，还有一些 console.log 调用您需要删除

```
function Graph(grid) {
    var nodes = [];

    var row, len = grid.length;
    console.log(len);
    for (var y = 0; y < len; ++y) {
        console.log(y);
        row = grid[y];
        console.log(row);
        var rowLength = row.length; // Expected: 16;
        nodes[y] = new Array(len);
        for (var x = 0; x < rowLength; ++x) {

            nodes[y][x] = row[x];
            console.log(nodes);

        }
    }

    this.input = grid;
    this.nodes = nodes;
} 
```

编辑3：

问题可能是因为您的所有其他代码都将坐标视为 x,y 此处的循环并存储它们 y,x 如果您像这样更改代码，它应该让您保留所有其他代码使用x,y

```
function Graph(grid) {
    var nodes = [];

    var row, len = grid.length;
    for (var y = 0; y < len; ++y) {
        row = grid[y];
        var rowLength = row.length; // Expected: 16;

        for (var x = 0; x < rowLength; ++x) {
        if(!nodes[x]){      
                nodes[x] = new Array(len);
        }
            nodes[x][y] = row[x];

        }
    }

    this.input = grid;
    this.nodes = nodes;
} 
```

# iphone - NS Managed object 和 NS ARRAY 的计数问题

> ID：10474112
> 
> 赞同：1
> 
> 时间：2012-05-06T20:40:53.800
> 
> 标签：iphone

我正在尝试计算我的核心数据中的对象数量，以便我可以知道我的表视图控制器需要多少行，但我坚持计算 NS ARRAY，这是代码

```
 NSFetchRequest *request = [[NSFetchRequest alloc] init];
      request.entity = [NSEntityDescription entityForName:@"Data"   inManagedObjectContext:context];
         NSSortDescriptor *sortDescriptor =
[[NSSortDescriptor alloc] initWithKey:@"date"
                            ascending:YES
                             selector:@selector(localizedCaseInsensitiveCompare:)];
request.sortDescriptors = [NSArray arrayWithObject:sortDescriptor];

NSError *error = nil;
NSArray *temp=[context executeFetchRequest:request error:&error]; 
```

我在数据类（nsmanged 对象的子类）中执行此操作，问题是当我到达

```
NSLog(@"%@",[temp count]); 
```

我收到“程序接收信号：”EXC_BAD_ACCESS””我不知道出了什么问题，我将我的数据放入一个 ns 数组中，而不是尝试对它们进行计数。在这方面的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:35:22.297

[临时计数] 返回一个数字，而不是一个字符串

所以你需要

```
NSLog(@"%u",[temp count]); 
```

[看这个](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)

# html - 在列表中添加小图像？

> ID：10474113
> 
> 赞同：0
> 
> 时间：2012-05-06T20:41:03.307
> 
> 标签：html, css

我做了一个下拉菜单。我需要下拉列表文本左侧的 25px x 25px 图像吗？每次我尝试，图像都不会出现？为什么？我该如何解决？我已经尝试过，但图像永远不会出现。[http://jsfiddle.net/Hunter4854/M4Ef2/1/](http://jsfiddle.net/Hunter4854/M4Ef2/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:53:36.457

尝试：

```
.custom-select ul {
  ...
  background: url("myimage.png") left top no-repeat;
  padding-left: 50px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T20:46:48.510

~~我认为您不能将图像标签放在选项标签中，最好的办法是在选项标签上设置背景图像和填充。~~
如果您查看脚本，您会发现它重建了`.custom-select ul`这就是您`<img>`在标记中丢失任何内容的原因，请查看我注释掉该代码的这个[小提琴。](http://jsfiddle.net/M4Ef2/2/)

```
$('#test_select option').each(function(i){
    html.push('<li rel="'+$(this).val() +'">'+$(this).text()+'</li>');
});

$('.custom-select ul').html(html.join('')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T17:18:04.383

除非我遗漏了一些东西，否则我不确定为什么人们会建议使用`<li>`. 如果您希望 25x25 图像出现在下拉列表中，请使用：

**CSS**

```
select#test_select option[value="graphic designer"] {
 background: url("myimage.png") left top no-repeat;
 padding-left: 50px;  
} // continue with every value 
```

# php - 动态 Rss 提要的错误日期输出

> ID：10474118
> 
> 赞同：-1
> 
> 时间：2012-05-06T20:41:47.467
> 
> 标签：php, mysql, rss, mysqli

以下动态生成 rss 提要的代码块示例无法正确打印日期。

```
<?php $db = new mysqli("a", "b", "c", "d");
header('Content-type: text/xml');
echo '<?xml version="1.0" encoding="utf-8"?>'; ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
<channel>
<atom:link href="http://site.com/rssfeed/" rel="self" type="application/rss+xml" />
<title>Test</title>
<description>Test Feed</description>
<link>http://site.com/rssfeed/</link>  
<copyright>Your Copyright Information</copyright>
<?php    $query = "SELECT * FROM `table` ORDER BY `id` DESC";
$results = $db->query($query) or die(mysql_error());
$number = $results->num_rows;
for ($i = 1; $i <= $number; $i++) {
$row = $results->fetch_assoc();
$title = $row['title'];
$description = $row['description'];
$link = $row['link'];
$date = date("r", $row['date']);
?>
<item>
<title><?php echo $title; ?></title>
<description><?php echo $description; ?></description>
<link><?php echo $link; ?></link>
<pubDate><?php echo $date; ?></pubDate>
<?php /*?><guid><?php echo $link; ?></guid><?php */?>
</item>
<?php    }    ?>
</channel>
</rss>
<?php    $db->close();    ?> 
```

列`table`是`id`, `title`, `description`, `link`,`date`

当以以下方式插入值时， [http://site.com/rssfeed/index.php](http://site.com/rssfeed/index.php)根本不提供在`<pubDate><?php echo $date; ?></pubDate>`标签内调用的任何日期输出`date`

```
INSERT INTO `table` (`id`, `title`, `description`, `link`, `date`)   
VALUES
(1,'Site || Home', 'http://www.site.com', 'http://www.site.com', 'TIMESTAMP DEFAULT CURRENT_TIMESTAMP'); 
```

另一方面，当以`date`下列方式插入值时，[http:](http://site.com/rssfeed/index.php) //site.com/rssfeed/index.php 会向所有可用的动态提要打印错误的日期（它只为所有可用的提要打印一个错误的日期），这是什么喜欢`Thursday, January 01, 1970 6:33 AM`

```
INSERT INTO `table` (`id`, `title`, `description`, `link`, `date`)     
VALUES  
(1,'Site || Home', 'http://www.site.com', 'http://www.site.com', '2012-05-07 02:16:46'); 
```

顺便说一句，在 create table 语句中，列`date`定义如下：

```
 `date` TIMESTAMP DEFAULT CURRENT_TIMESTAMP, 
```

Rss 验证器在验证过程中给出以下建议

`Implausible date: Thu, 01 Jan 1970 01:33:32 +0100`

为什么会这样？任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:47:25.697

mysql 时间图列将其内容作为`YYYY-MM-DD HH:MM:SS`字符串值返回，您**不能**直接将其传递给 PHP 的日期调用。这需要一个unix时间戳。如果您必须在 PHP 端格式化日期，那么您必须这样做

```
SELECT UNIX_TIMESTAMP(`date`) AS date FROM yourtable 
```

反而。或者，您可以在 PHP 端作弊并使用

```
$date = date("r", strtotime($row['date'])); 
```

或使用 MySQL [DATE_FORMAT()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)函数将其转换为您的 RFC2822 格式

* * *

评论跟进：

不，您的插入时间戳字符串不起作用：

```
mysql> use test;
Database changed
mysql> create table x (x datetime);
Query OK, 0 rows affected (0.13 sec)

mysql> insert into x (x) values ('timestamp default current_timestamp');
sQuery OK, 1 row affected, 1 warning (0.43 sec)

mysql> select * from x;
+---------------------+
| x                   |
+---------------------+
| 0000-00-00 00:00:00 |
+---------------------+
1 row in set (0.00 sec) 
```

# javascript - 将空格替换为

> ID：10474124
> 
> 赞同：32
> 
> 时间：2012-05-06T20:42:30.623
> 
> 标签：javascript, jquery, html, css, regex

让我们假设以下元素（查找尾随和前导空格）：

```
<p>
    <span class="item">Lorem Ipsum is simply dummy text </span><span class="item">of the printing and typesetting</span><span class="item"> industry.</span>
</p> 
```

`&nbsp;`由于`display: inline-block`此处显示的奇怪行为，我想用 替换所有空格：http: [//jsfiddle.net/SQuUZ/](http://jsfiddle.net/SQuUZ/)（我不了解所有浏览器，但最新的 Chrome 和 Firefox 的行为相同）。

现在，由于 javascript 是这里的一个选项，jQuery 也是，我可以：

```
$('p').text($('p').text().replace(/ /g, '&nbsp;')); 
```

但它逃脱了`&nbsp;`并变成了`a&nbsp;mess&nbsp;of&nbsp;entities`。

显然，出于这样的目的，我们可以使用`$('p').html()`：

```
$('p').html($('p').html().replace(/ /g, '&nbsp;')); 
```

但是这个更糟糕，因为它还`&nbsp;`在标签本身中添加：

```
<p>
    <span&nbsp;class="item">Lorem&nbsp;Ipsum&nbsp;is&nbsp;simply&nbsp;dummy&nbsp;text&nbsp;</span><span&nbsp;class="item">of&nbsp;the&nbsp;printing&nbsp;and&nbsp;typesetting</span><span&nbsp;class="item">&nbsp;industry.</span>
</p>

<!-- TL;DR -->
<span&nbsp;class="item"></span> <!-- is actually invalid... --> 
```

它打破了一切......

### 笔记：

*   容器内不仅会有`<span>`带有类的元素`item`（也可能并不总是如此`<p>`）。
*   慢速正则表达式是一种选择（问题是，我想不出一个……）。

**我在这里有什么选择？**

### 更新：

~~事实上，谁能解释为什么多行/单行存在这样的错误`display: inline-block;`？（请参阅上面的小提琴链接，并检查...）~~

迁移到[显示的问题：inline-block；奇怪的间距行为](https://stackoverflow.com/questions/10474411/display-inline-block-weird-spacing-behavior)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-06T20:46:49.227

```
$('p').contents().filter(function(){
    return this.nodeType == 3 // Text node
}).each(function(){
    this.data = this.data.replace(/ /g, '\u00a0');
}); 
```

[**演示**](http://jsfiddle.net/gdoron/SQuUZ/1/)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-06T22:07:08.310

即使*[jQuery 真的很棒并且可以做所有事情](http://www.doxdesk.com/img/updates/20091116-so-large.gif)*，CSS 在某些情况下也可以工作：

```
white-space: pre-wrap; 
```

**[演示](http://jsfiddle.net/SQuUZ/3/)**。

CSS3相关：[`text-space-collapse`](http://www.w3.org/TR/2011/WD-css3-text-20110901/#white-space-collapsing)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-06T22:42:25.927

> 谁能解释为什么多行/单行显示存在这样的错误：inline-block;？（请参阅上面的小提琴链接，并检查...）

考虑：

```
​&lt;p><span style="display:inline-block">lorem </span>​​​​​​​​​​​​​​​​​​&lt;span>ipsum</span></p> 
```

空格字符位于由 创建的行框容器*内*`display:inline-block`。[CSS 2.1 16.6.1](http://www.w3.org/TR/CSS21/text.html#white-space-model)描述了必须如何处理行框中的空格：

> 随着每一行的布局……[i]fa space (U+0020) 在行尾的“white-space”设置为“normal”、“nowrap”或“pre-line”，它被……删除.

由于空格位于inline 块*内*的行尾，因此将其删除。

对比：

```
<p><span style="display:inline-block">lorem</span> <span>ipsum</span></p>​ 
```

在这种情况下，空格不会被删除，因为它位于构成单个行框的两个行内级元素之间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T01:49:02.047

您可以使用该`<pre> </pre>`元素使空格可见。如果您想直观地显示，比如 ascii 艺术，它是一个快速的解决方案。

# c++ - 非常简单的程序中的Apple Mach-O链接器（ld）错误

> ID：10474126
> 
> 赞同：1
> 
> 时间：2012-05-06T20:42:56.527
> 
> 标签：c++, xcode, linker

我正在执行一项任务以实现对 AVL 树的插入，并且遇到三个“Apple Mach-O Linker (ld)”错误。我对这些错误的有限理解是，当从未正确包含在项目中的库中引用某些内容时，就会出现这些错误。这是 Xcode 给我的错误消息：

```
Ld /Users/gusmurphy/Library/Developer/Xcode/DerivedData/AVLInsertion-eylpvolyxvuwbygcvocqhleyvzcv/Build/Products/Debug/AVLInsertion normal x86_64
cd /Users/gusmurphy/Documents/CMSC270/AVLInsertion
setenv MACOSX_DEPLOYMENT_TARGET 10.6
/Developer/usr/bin/clang++ -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.6.sdk -L/Users/gusmurphy/Library/Developer/Xcode/DerivedData/AVLInsertion-eylpvolyxvuwbygcvocqhleyvzcv/Build/Products/Debug -F/Users/gusmurphy/Library/Developer/Xcode/DerivedData/AVLInsertion-eylpvolyxvuwbygcvocqhleyvzcv/Build/Products/Debug -filelist /Users/gusmurphy/Library/Developer/Xcode/DerivedData/AVLInsertion-eylpvolyxvuwbygcvocqhleyvzcv/Build/Intermediates/AVLInsertion.build/Debug/AVLInsertion.build/Objects-normal/x86_64/AVLInsertion.LinkFileList -mmacosx-version-min=10.6 -o /Users/gusmurphy/Library/Developer/Xcode/DerivedData/AVLInsertion-eylpvolyxvuwbygcvocqhleyvzcv/Build/Products/Debug/AVLInsertion

Undefined symbols for architecture x86_64:
"AVLTree<int>::insert(int const&)", referenced from:
  _main in main.o
"AVLTree<int>::snapShot(std::ostream&, AVLNode<int>*)", referenced from:
  AVLTree<int>::snapShot(std::ostream&) in main.o
"AVLTree<int>::clear(AVLNode<int>*)", referenced from:
  AVLTree<int>::clear() in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是“main.cpp”：

```
#include <iostream>
#include "AVLTree.h"
#include <stdio.h>

int main (int argc, const char * argv[])
{
cout << "Enter an integer to be insterted: " << endl;
int i;
AVLTree<int> tree;
while (true) {
    scanf("%d", &i);
    tree.insert(i);
    tree.snapShot(cout);
    }
} 
```

我特别好奇的一件事是为什么其中一个错误与`AVLTree<int>::clear(AVLNode<int>*)`，即使它没有在任何地方明确调用（据我所知）。我还将把 AVLTree 的头文件和实现文件放在这里。

这是“AVLTree.h”：

```
#include <iostream>

using namespace std;

#ifndef AVL_TREE
#define AVL_TREE

template<class T>
class AVLNode {
public:
    AVLNode() { 
        left = right = 0; 
    }
    AVLNode(const T& el, AVLNode *l = 0, AVLNode *r = 0, int b = 0) {
        key = el; left = l; right = r; balance = b;
    }
    T key;
    AVLNode *left, *right;
    int balance;
};

template<class T>
class AVLTree {
public:
    AVLTree() { 
        root = 0; 
    }
    ~AVLTree() { 
        clear();
    }
    void clear() {
        clear(root); root = 0;
    }
    bool isEmpty() const { 
        return root == 0; 
    }
    void snapShot(ostream& out) {
        out << "TreeForm[";
        snapShot(out,root);
        out << ']' << endl;
    }
    void preorder() { 
        preorder(root);  
    }
    void inorder() { 
        inorder(root); 
    }
    void postorder() { 
        postorder(root); 
    }
    void insert(const T&);
    T* search(const T& el) const { 
        return search(root,el);
    }
protected:
    AVLNode<T>* root;
    void clear(AVLNode<T>*);
    T* search(AVLTree<T>* p, const T& el) const;
    void preorder(AVLNode<T>*);
    void inorder(AVLNode<T>*);
    void postorder(AVLNode<T>*);
    void snapShot(ostream& out,AVLNode<T> *p);
    void visit(AVLNode<T>* p) { 
        cout << p->key << ' '; 
    }
    void rightRotation(AVLNode<T>* &node) {
        AVLNode<T>* left = node->left;

        node->left = left->right;
        left->right = node;
        node = left;
    }
    void leftRotation(AVLNode<T>* &node) {
        AVLNode<T>* right = node->right;

        node->right = right->left;
        right->left = node;
        node = right;
    }
};

#endif 
```

和“AVLTree.cpp”：

```
#include "AVLTree.h"
#include <iostream>

template<class T>
void AVLTree<T>::clear(AVLNode<T> *p) {
    if (p != 0) {
        clear(p->left);
        clear(p->right);
        delete p;
    }
}

template<class T>
void AVLTree<T>::insert(const T& el) {  
    if (root == 0) {
        root = new AVLNode<T>(el);
        return;
    }

    AVLNode<T>* parent = 0;
    AVLNode<T>** tmp = root;
    AVLNode<T>* ancestor = 0;

    while (tmp != 0) {
        parent = *tmp;
        if (ancestor == 0 && (parent->balance == 1 || parent->balance == -1))
            ancestor = parent;
        // "ancestor" will point to the first node with an unnacceptable balance, if there is one.
        if (el >= parent) {
            tmp = parent->right;
            parent->balance++;
        } else {
            tmp = parent->left;
            parent->balance--;
        }
    };
    tmp = new AVLNode<T>(el);

    if (ancestor != 0) {
        if (ancestor->balance != 0) {
            if (el >= ancestor->key) {
                if (el >= parent) {
                    rightRotation(ancestor);
                } else {
                    rightRotation(parent);
                    rightRotation(ancestor);
                }
            } else {
                if (el < parent) {
                    leftRotation(ancestor);
                } else {
                    leftRotation(parent);
                    leftRotation(ancestor);
                }
            }
        }
    }
}

template<class T>
T* AVLTree<T>::search(AVLTree<T>* p, const T& el) const {
    while (p != 0)
        if (el == p->key)
            return &p->key;
        else if (el < p->key)
            p = p->left;
        else p = p->right;
    return 0;
}

template<class T>
void AVLTree<T>::inorder(AVLNode<T> *p) {
    if (p != 0) {
        inorder(p->left);
        visit(p);
        inorder(p->right);
    }
}

template<class T>
void AVLTree<T>::preorder(AVLNode<T> *p) {
    if (p != 0) {
        visit(p);
        preorder(p->left);
        preorder(p->right);
    }
}

template<class T>
void AVLTree<T>::postorder(AVLNode<T>* p) {
    if (p != 0) {
        postorder(p->left);
        postorder(p->right);
        visit(p);
    }
}

template <class T>
void AVLTree<T>::snapShot(ostream& out, AVLNode<T> *p)
{
    out << '\"' << p->key << '\"';
    if(p->left != 0 || p->right != 0) {
        out << '[';
        if(p->left==0)
            out << "\"\"";
        else
            snapShot(out,p->left);
        out << ',';
        if(p->right==0)
            out << "\"\"";
        else
            snapShot(out,p->right);
        out << ']';
    }
} 
```

非常感谢您的宝贵时间！我很抱歉创建另一个关于此错误消息的线程，但我无法根据我发现的问题汇总我的问题实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T20:45:44.653

模板类定义必须在头文件中可用。[您可以在此处](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)阅读相关内容。

# javascript - 元刷新重定向页面中的 jQuery 计时器

> ID：10474130
> 
> 赞同：1
> 
> 时间：2012-05-06T20:43:28.433
> 
> 标签：javascript, jquery, html

我需要在 12 秒后将用户重定向到不同的页面，我使用 ie 代码执行此操作。但是我想向他们展示一个简单的倒计时，`div`这样他们就知道这将在 12 (11, 10, 9….1, 0) 秒内发生

这需要用 jQuery 编写。谢谢

```
<meta content="120; url=http://www.example.com" http-equiv="refresh" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T20:47:20.887

你可以改用这样的东西：

```
<div id="counter">12</div>

<script>
    ​var count = 12;
    var timer = setInterval(function() {
        if (--count < 1) {
            clearInterval(timer);
            window.location.href = "http://www.example.com/";
        }
        $("#counter").text(count);
    }, 1000);​
</script> 
```

**演示：http:** [//jsfiddle.net/PeHFc/](http://jsfiddle.net/PeHFc/)

# python - Django分页器

> ID：10474131
> 
> 赞同：0
> 
> 时间：2012-05-06T20:43:39.503
> 
> 标签：python, django

我正在尝试对页面进行分页，以便每页显示五个状态。输入这些代码后，分页失败。以下是我的 django 应用程序中用于分页和更新状态的代码。

**视图**（views.py 文件）：

```
def qask(request):
    extra_data_context={}
    #if there's nothing in the field do nothing.
    if request. method=="POST":
        form =AskForm(request.POST)
        if form.is_valid():
            data=form.cleaned_data
            newask=Ask(user= request.user,status=data['status'],pub_date=datetime.datetime.now())
            newask.save()
        extra_data_context.update({'AskForm':form})
    else:
        form = AskForm()
        extra_data_context.update({'AskForm':form})
    extra_data_context.update({'Asks':Ask.objects.filter(user=request.user)})

    plan=Ask.objects.all()
    paginator=Paginator(plan, 5)

    try:
        page=int(request.GET.get('page','1'))
    except ValueError:
        page=1

    try:
        fp=paginator.page(page)
    except (EmptyPage, InvalidPage):
        fp=paginator.page(paginator.num_pages)
    return render_to_response  ('quik_ask.html',extra_data_context,context_instance=RequestContext(request)) 
```

**模板**（html文件）：

```
{% block content %}

{% for Ask in Asks %}
<tr>
    <p>  {{Ask.user}} </p> </strong>
    <p>{{Ask.status}}</p>
    <p> {{Ask.pub_date|timesince }} ago </p> 

</tr>
{% endfor %}

<div class="pagination">
    <span class="step-links">
        {% if Asks.has_previous %}
        <a href="?page={{ Asks.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ Asks.number }} of {{ Asks.paginator.num_pages }}.
        </span>

        {% if Asks.has_next %}
        <a href="?page={{ Asks.next_page_number }}">next</a>
        {% endif %}
    </span>
</div>

{% endblock %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T23:24:47.650

您的页面数据在`fp`变量中，但它从未提交到您的模板。相反，您试图从中获取页面数据`Asks`，但它与代码中的分页器无关。我不确定您要分页什么，但是如果您想对过滤后的数据进行分页，应该是这样的：

```
plan = Ask.objects.filter(user=request.user)
paginator=Paginator(plan, 5)
###...get you page number
try:
    asks = paginator.page(page)
except (EmptyPage, InvalidPage):
    asks = paginator.page(paginator.num_pages)
extra_data_context.update({'Asks': asks}) 
```

# android - 导出服务不需要许可：这是什么意思？

> ID：10474134
> 
> 赞同：149
> 
> 时间：2012-05-06T20:44:00.567
> 
> 标签：android, android-service

我创建了一个通过 AIDL 被其他应用程序绑定的服务，并将其添加到清单中，如下所示：

```
<service android:name=".MyService">
    <intent-filter>
        <action android:name="org.example.android.myservicedemo.IService" />
    </intent-filter>
</service> 
```

其中 IService 是 AIDL 接口。

这样，Eclipse 向我显示警告*Exported service does not require permission*。如果我删除`intent-filter`，警告消失，但显然应用程序无法绑定到服务。

这个警告是什么意思？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-08-04T06:04:59.970

当我**将 SDK 更新**到版本**20**时，我遇到了同样的问题。我删除了它添加**android:exported**属性 `android:exported="false"`，如下所示：

```
<service android:name=".MyService"
    android:exported="false">
    <intent-filter>
        <action android:name="org.example.android.myservicedemo.IService" />
    </intent-filter>
</service> 
```

请参阅此[文档](http://developer.android.com/guide/topics/manifest/activity-element.html)

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-08-31T14:23:28.560

如果您想将 Activity 的使用限制在您自己的应用程序中，那么您应该添加`exported=false`到您的 Activity 的清单语句中。

如果您想允许其他应用程序使用它（明确地通过其类名，或者更好的是，通过使用具有数据类型或操作的意图），那么您有两种选择：

*   使用权限限制这些应用程序
*   允许所有应用程序使用它，然后您可以添加`tools:ignore="ExportedActivity"`到活动的清单声明中。

--

同样的推理也适用于服务`tools:ignore="ExportedService"`和内容提供商`tools:ignore="ExportedContentProvider"`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-26T03:55:31.333

正如[Jens](https://stackoverflow.com/users/967142/jens)所说，“这意味着用户在他的手机上拥有的其他（任意）应用程序可以绑定到您的服务并调用他们喜欢的任何方法，这些方法通过您的 AIDL 接口公开。”

# ruby-on-rails - 将鼠标悬停在地标链接上时突出显示 Google 地图折线

> ID：10474137
> 
> 赞同：1
> 
> 时间：2012-05-06T20:44:13.103
> 
> 标签：ruby-on-rails, google-maps, google-maps-api-3, gmaps4rails, polyline

我试图在网上找到这个但没有太多运气。Stackoverflow 似乎也没有类似的问题解决方案。这是我发现的最接近的比较：

[http://groups.google.com/group/google-maps-js-api-v3/browse_thread/thread/2121de2422cf5053?pli=1](http://groups.google.com/group/google-maps-js-api-v3/browse_thread/thread/2121de2422cf5053?pli=1)

但是这个人的实时页面看起来并不像他们做得很远（他们只有 2010 年 1 月在他们的地图上工作）......但与我想要做的想法相同。我也不知道如何实现给定的解决方案，因为我将有数百条折线并且不想为每条折线创建一个全局变量......

我想做的是以某种方式“聚集”一个地标，其中包含一组从该标记开始/结束的折线。然后，我将在侧边栏/菜单外的地图中有一个指向该地标的链接，我希望当用户将鼠标悬停/鼠标悬停在地标的链接上时，与地标关联的折线会改变它们的不透明度（即突出显示）。我想我的问题是：

1.  如何引用已创建的折线？我如何弄清楚它的手柄？
2.  我可以使用它“穿过”我的标记的事实以某种方式更改折线的属性吗？（即 aSel.onmouseover("所有接触该对象的折线的不透明度 = 1")）
3.  关于如何修改 gmaps4rails.base.js 文件的“创建折线”功能来做到这一点的任何建议？ [https://github.com/apneadiving/Google-Maps-for-Rails/blob/master/app/assets/javascripts/gmaps4rails/gmaps4rails.base.js.coffee](https://github.com/apneadiving/Google-Maps-for-Rails/blob/master/app/assets/javascripts/gmaps4rails/gmaps4rails.base.js.coffee) 我有感觉然后我的问题会变成“我该怎么办创建折线时知道链接/地标的处理程序吗？” 如果我尝试这种方法...

我目前正在使用 Rails 和 gmaps4rails 插件来尝试这个，但我愿意接受其他优雅的建议/解决方案。

谢谢你的帮助！

===========================================

这是我迄今为止尝试过的代码，遵循以下 apneadiving 的建议（我不是 Rails、javascript、Coffeescript 或 Maps 专家......）：

在 gmaps4rails.base.js 的 createSidebar 函数中，添加了第二行：

```
aSel.onclick = @sidebar_element_handler(currentMap, marker_container.serviceObject, 'click')
aSel.onmouseover = @sidebar_highlight_paths(currentMap, marker_container.serviceObject) 
```

然后定义：

```
sidebar_highlight_paths : (currentMap, marker) ->
  return () ->
    for polyline in Gmaps.map.polylines
      points = polyline.serviceObject.latLngs.getArray()[0].getArray()
      if (@sidebar_intersect(points, marker.position))
        @polyline.setOptions({strokeOpacity: 1.0})

sidebar_intersect : (a, b) ->
  [a, b] = [b, a] if a.length > b.length
  value for value in a when value in b 
```

intersect 函数基于此处的响应： [Coffeescript: Array element matches another array](https://stackoverflow.com/questions/8585398/coffeescript-array-element-matches-another-array)

现在，每当我将鼠标悬停在链接上时，我的 Chrome javascript 控制台中的不透明度和此错误都没有改变：

未捕获的类型错误：对象 javascript:void(0); 没有方法'sidebar_intersect' Gmaps4Rails.Gmaps4Rails.sidebar_highlight_pathsgmaps4rails.base.js:434

资源解释为图像，但使用 MIME 类型 text/html 传输：“ [http://maps.googleapis.com/maps/gen_204?ev=api_viewport&cad=src:apiv3,ts:1336420051554](http://maps.googleapis.com/maps/gen_204?ev=api_viewport&cad=src:apiv3,ts:1336420051554) ”。

第 434 行（对于上面的无方法错误）是：

```
if @map_options.auto_adjust
  #from markers
  @extendBoundsWithMarkers()
->line 432<-
  #from polylines:
  for polyline in @polylines ->line 434<-
    polyline_points = polyline.serviceObject.latLngs.getArray()[0].getArray()
    for point in polyline_points
      @boundsObject.extend point 
```

这与我的新功能sidebar_intersect无关，所以我很困惑！另外，我现在忽略资源解释错误，因为它似乎更常见......

感谢您的提示，重新潜水，我感谢其他任何可以阐明我的新错误的人......

==============================

好的，想通了——感谢您的提示！为了将来参考（如果这真的对任何人有帮助），我基本上将这两行（onmouseover 和 onmouseout）添加到 gmaps4rails.base.js.coffee 的 createSidebar 中：

```
aSel.onclick = @sidebar_element_handler(currentMap, marker_container.serviceObject, 'click')
aSel.onmouseover = @sidebar_highlight_paths(currentMap, marker_container.serviceObject)
aSel.onmouseout = @sidebar_reset_paths(currentMap, marker_container.serviceObject)
li.appendChild(aSel)
ul.appendChild(li) 
```

然后：

```
sidebar_highlight_paths : (currentMap, marker) ->
return () ->
  for polyline in Gmaps.map.polylines
     b = polyline.serviceObject.latLngs.getArray()[0].getArray()
     for latlng in b
       if (marker.position.equals(latlng))
         polyline.serviceObject.setOptions({strokeOpacity: 1})

sidebar_reset_paths : (currentMap, marker) ->
return () ->
  for polyline in Gmaps.map.polylines
    polyline.serviceObject.setOptions({strokeOpacity: 0.1} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:32:15.043

好的，想通了——感谢您的提示！为了将来参考（如果这真的对任何人有帮助），我基本上将这两行（onmouseover 和 onmouseout）添加到 gmaps4rails.base.js.coffee 的 createSidebar 中：

```
aSel.onclick = @sidebar_element_handler(currentMap,marker_container.serviceObject, 'click')
aSel.onmouseover = @sidebar_highlight_paths(currentMap,marker_container.serviceObject)
aSel.onmouseout = @sidebar_reset_paths(currentMap,marker_container.serviceObject)
li.appendChild(aSel)
ul.appendChild(li) 
```

然后：

```
sidebar_highlight_paths : (currentMap, marker) ->
return () ->
  for polyline in Gmaps.map.polylines
     b = polyline.serviceObject.latLngs.getArray()[0].getArray()
     for latlng in b
       if (marker.position.equals(latlng))
         polyline.serviceObject.setOptions({strokeOpacity: 1})

sidebar_reset_paths : (currentMap, marker) ->
return () ->
  for polyline in Gmaps.map.polylines
    polyline.serviceObject.setOptions({strokeOpacity: 0.1} 
```

# objective-c - XCode：发送到实例的无法识别的选择器

> ID：10474138
> 
> 赞同：2
> 
> 时间：2012-05-06T20:44:18.080
> 
> 标签：objective-c, xcode, debugging, selector

我收到以下错误：

“-[订单项]：无法识别的选择器发送到实例 0x6b5f240”

我确实有一个名为 Order 的类，它看起来像这样：

订单.h

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class OrderItem;

@interface Order : NSManagedObject {
@private
}
@property (nonatomic, retain) NSNumber * orderID;
@property (nonatomic, retain) NSDate * date;
@property (nonatomic, retain) NSNumber * orderCode;
@property (nonatomic, retain) NSSet* items;

@end 
```

订单.m

```
#import "Order.h"
#import "OrderItem.h"

@implementation Order
@dynamic orderID;
@dynamic date;
@dynamic orderCode;
@dynamic items;

... 
```

如果我没看错的话，它不会扩展任何具有“items”方法的类吗？

有没有其他原因我会收到这样的错误。更疯狂的是，这个项目直接从以前的项目中复制而来，并进行了一些小的编辑。我已经对两个项目中的每个类都进行了文本比较，除了我所做的外观更改之外没有任何区别。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T20:49:50.277

`@dynamic items`告诉编译器您将为`items`.

由于这在以前的项目中有效，因此它必须在 .m 文件中的某处具有以下方法：

```
- (NSSet *)items {
    // Appropriate code
} 
```

如果您不想像这样提供自己的自定义 getter，则更`@dynamic items`改为`@synthesize items`，编译器将为您生成一个。

有关更多详细信息，请参阅Apple 在此处提供 **的 Objective-C 编程语言的****声明属性**部分： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)

 ****编辑**
虽然以上所有内容仍然适用于普通对象（并且可能仍然适用于此处），但我只是注意到这是`NSManagedObject`.

在您的旧数据模型中，可能存在调用关系`items`，因此 NSManagedObject 提供了适当的方法，并且`@dynamic`适用于防止编译器警告。

如果在您的新数据模型中没有名为的关系`items`，则不会生成方法，这将导致您遇到的问题。**

# c# - 反编译代码中的这些符号是什么

> ID：10474140
> 
> 赞同：4
> 
> 时间：2012-05-06T20:44:28.463
> 
> 标签：c#, .net, obfuscation, cil

我反编译了一个可执行文件，但无法理解源代码（C#）中的这些符号是什么。我会在此处粘贴源示例，但当我尝试粘贴时，反编译源中的特殊字符无法在此编辑器中打印。所以我在这里拍摄了一些截图并粘贴链接，这样任何人都可以看到，所以例子是：

![图 1](../Images/c77c2823f372e3998cfbb29e9068fec9.png)

![图 2](../Images/813cbf266060ae041b60131db17e4b96.png)

![图 3](../Images/4e540b9f4bf65b3ddb7e309892128fc7.png)

我猜这个源代码被混淆了，对吗？并且这些符号可以存在于 MSIL 中，但在 C# 中按原样翻译时，它们会产生非法字符。那正确吗？关于如何克服这个问题的任何建议，比如对这些东西进行全部替换？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T21:01:55.043

MSIL 对允许作为标识符名称的内容有非常宽松的规则。混淆器故意选择 C# 无法表示的字符，因此您无法往返 C#。

但是，您可以反编译为 IL 并能够编译该项目。

另请查看[C# 的 unicode identifiers](http://msdn.microsoft.com/en-us/library/aa664670.aspx)。您可以在 C# 标识符中包含 unicode 转义码，这让很多人感到惊讶。例子：

```
class @class
{
   public static void @static(bool @bool) {
      if (@bool)
         System.Console.WriteLine("true");
      else
         System.Console.WriteLine("false");
   }   
}
class Class1
{
   static void M() {
      cl\u0061ss.st\u0061tic(true);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T21:05:32.810

您可以使用十六进制编辑器查看文件，找出这些值的“规则”，然后您可以自己编写一个程序，将它们转换为带有一些前缀的 ascii 表示 - 即 obs_627 或其他。

当然，您只能更改仅在您正在更改的代码库中引用的名称。与这些特殊名称的任何外部链接，或任何相当于反射的内部使用都会中断。如果有理由期望其中任何一种情况都是如此，那么这将是一种浪费的努力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T21:12:21.093

这些来自旧的 MS-DOS ANSI 字符集。

您发布的第一个示例包含 ASCII 线条绘图字符。IIRC，他们从十进制 172 左右（0xAC hex）开始。

第二个和第三个包含十进制 1 到 31 之间的 ASCII 字符（十六进制表示法中的 0x01-0x1F）。

您不能复制和粘贴它们，因为显示的字符在大多数现代字体中不存在。

# ruby-on-rails - 特定设置的 Rails 路线

> ID：10474141
> 
> 赞同：0
> 
> 时间：2012-05-06T20:44:39.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rest, routes

我是 Rails 新手，对如何最好地路由我的特定应用程序有疑问。我正在使用旧数据库，因此架构已经设置好并且使事情变得有点复杂。该应用程序的布局包括一个顶部导航栏，其中包含“用户”，然后对于特定的“用户”，还有另一个导航栏来显示/编辑各种表单。例如，一旦查询特定的“用户”，“一般信息”和“帐户信息”等就会有单独的表格。

我现在的设置是有一个“用户”命名空间来对应顶级导航，并且在命名空间中有第二级导航：“一般”、“项目”等。通过这个设置，每个表单都从第二个中选择导航级别有自己的控制器，这似乎有点奇怪。

```
 namespace :users do
    resources :general, :project
  end 
```

这使我可以拥有以下网址，其中 :id 属于“用户”

```
/users/general/:id
/users/general/:id/edit
/users/account/:id
/users/account/:id/edit 
```

这看起来是否合理，或者是否有人对如何以 RESTful 方式处理嵌套导航设置有任何其他想法？遗留数据库很复杂，因为我没有“通用”、“帐户”模型或数据库表。对于每个表单，我需要从与“用户”模型关联的几个模型/表中提取。拥有一个“通用”控制器而没有一个“通用”模型似乎并不像这让我感到困扰的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:54:01.250

您正朝着正确的方向前进，但是，名称空间不会帮助您维护您正在寻找的关联。相反，我会试试这个：

```
resources :users do
  resources :general, :project
end 
```

我还建议您查看[Rails 路由指南](http://guides.rubyonrails.org/routing.html)。

# c# - 在 EF 4 中自定义实体并使用验证功能

> ID：10474143
> 
> 赞同：0
> 
> 时间：2012-05-06T20:45:00.673
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4

我想知道是否可以在 EF 中自定义我的实体，这些实体不一定对应于数据库表中的所有字段。这样我就可以利用内置的 MVC 验证功能。

这是我正在尝试做的一个简化示例。所以假设我有一个 Person 表定义为：

-Id,
-Name,
- 出生地。

在视图中，用户将输入其姓名，然后选择出生国家，然后选择其位置。由于位置属于某个国家/地区，因此无需将出生国家/地区存储在 person 表中，但需要在视图中选择该国家/地区，以便填充位置选项。

因此，国家/地区是视图中的必需值。

我知道我可以在服务器上手动验证这个必需的值，但我想知道我是否可以在名为 CountryId 的 EF 实体中定义一个额外的属性，该属性将被标记为必需，然后我得到所有默认的 MVC 验证功能。

如果这是一种常见的做法，将不胜感激链接到有用的教程。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T21:02:17.773

我想说您可以使用 MVVM 模式来拆分您的 ViewModel，这可能与您的数据模型不同。所以你可以在它上面设置验证属性。[此博客文章](http://blogs.msdn.com/b/simonince/archive/2010/01/26/view-models-in-asp-net-mvc.aspx)中更详细地描述了该方法：其背后的想法是让您的 ViewModel 以某种方式对其进行验证，并将您的数据放入业务模型的适当字段中。您可以使用某种 Mapper 解决方案。AutoMapper 是一个很好的开始。

# image - 图片的“我很幸运”的直接 URL

> ID：10474145
> 
> 赞同：3
> 
> 时间：2012-05-06T20:45:12.097
> 
> 标签：image, url

我有一个书评网站。我提供了书籍亚马逊条目的链接。经过一番研究，我发现 Google 的“我很幸运”的直接 URL 是：

[http://www.google.com/search?hl=en&q=TITLE+AUTHOR+amazon&btnI=745](http://www.google.com/search?hl=en&q=TITLE+AUTHOR+amazon&btnI=745)

这很神奇，因为这样我就不必在我的数据库中手动包含亚马逊链接并直接链接到亚马逊页面（99.99% 的时间有效）。

我想知道是否有图像等价物（无论是谷歌还是其他替代品）仅基于关键字检索图像 URL（为了获取书籍封面图像）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T21:06:59.720

谷歌图片没有这样的东西，但你也许可以使用另一个网络服务来做你想做的事。我注意到，当您搜索一本书时，第一个图像结果并不总是它的封面。有时是作者的照片，有时是书评中的一些图片，所以你几乎不能依赖它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T21:25:02.470

解析亚马逊页面并获取图像和链接应该不难，但谷歌有一个谷歌图书的 API，它以 JSON 格式返回有关图书的所有信息，您可以在 API Explorer 上在线尝试（封面在结果也是）。单击[此处](http://code.google.com/apis/explorer/#_s=books&_v=v1&_m=volumes.list&q=Crime%20and%20Punishment)查看示例（单击“执行”以运行它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-11T18:14:46.383

不幸的是，公共谷歌搜索引擎不支持这一点。您应该使用[自定义搜索 API](https://developers.google.com/custom-search/)在您的应用程序中实现此类功能。或者使用[XGoogle](https://github.com/mycognitive/xgoogle)（Google 搜索服务的非官方 Python 包装器，参见[`google_dl`工具](https://github.com/mycognitive/google_dl)示例）。

其他建议是使用：

*   Yahoo 的 YQL（请参阅[`yql-tables`GitHub 上的 repo 以](https://github.com/yql/yql-tables)获取示例）。
*   使用替代搜索引擎。

    例如，在[Wolfram Alpha](http://www.wolframalpha.com/)中，您可以键入：“显示笔记本电脑的图像”，它会为您提供第一张热门图片，但是您需要使用[Wolfram|Alpha API](https://products.wolframalpha.com/api/)或一些脚本（例如，参见这个[ChatBot](https://github.com/Jenna3715/ChatBot)）来获取直接链接.

# wordpress - wordpress 网络安装程序系统

> ID：10474146
> 
> 赞同：0
> 
> 时间：2012-05-06T20:45:17.557
> 
> 标签：wordpress, content-management-system, user-permissions

我正在用 php 构建自己的 cms（还没有在网络上，但很快......），直到现在我的系统使用终端驱动的插件安装程序。

现在，我想改进系统并允许网络用户从网络下载插件并安装它们。

我之前尝试过很多次，但我永远无法摆脱权限问题。

但据我所知，Wordpress 能够做到这一点，所以如果它做到了，我的问题是如何做到这一点？它是否要求网络用户使用 777 perms 准备他们的文件夹？

# c++ - c++：创建一个可以调用任何函数的定时器/报警类？

> ID：10474153
> 
> 赞同：1
> 
> 时间：2012-05-06T20:46:07.833
> 
> 标签：c++, timer, function-pointers

我的困境是我想创建一个计时器（也称为“警报”，使用 Game Maker 术语），它可以在时间到期后调用任何函数。不仅仅是让它基于特定的签名调用特定的函数指针。

所以，一个简单的问题：这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T20:48:29.360

您可以使用 C++11[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)并[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)在计时器到期后包装您想要调用的任何函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T05:03:15.893

### 问题海报问答

我有一个接收鸡蛋和奶酪并返回煎蛋卷的函数。我把我的功能交给你的计时器。当定时器的闹钟响起时，你会用什么鸡蛋和什么奶酪来调用我的函数？——罗伯特·库珀

@RobertCooper 和你给我的鸡蛋和奶酪当然是你给我的功能！– 夜莺

@nightcracker：所以当我设置闹钟时，我需要给计时器一个功能，一个鸡蛋和一个奶酪。再说一次，如果我的回调取而代之的是培根、HomeFries、香肠和燕麦片，我需要给警报一个函数，培根、HomeFries、香肠和燕麦片。对于任何数量和类型的组合，警报必须能够记住和存储这些类型的成员，以供以后在回调函数中使用。

### 推荐

我不建议建造一个能够存储任何烹饪用品组合的警报器。保持警报的类型签名不变且简单。如果客户想要发出警报来做早餐、组建乐队或发射火箭飞船，让客户将他们需要的任何函数和变量包装成一个简单的仿函数或 lambda 函数：一个记住它需要的所有变量并且只一种将其关闭的方法（`operator ()`不带参数调用）。

# android - 安卓图形设计

> ID：10474159
> 
> 赞同：1
> 
> 时间：2012-05-06T20:46:58.420
> 
> 标签：android, gimp, ads, nine-patch

我正在开发一个带有自定义背景和中间按钮的简单应用程序。我已经为不同的屏幕设置了不同的分辨率，但是所有版本的背景都需要9个补丁吗？如何考虑始终存在的 android 顶部导航栏和底部可能使用的广告？他们只是覆盖设计还是改变分辨率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:55:34.940

> 我已经为不同的屏幕设置了不同的分辨率，这不是它在 android 上的工作方式。看到这个：

*   [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

> 后台的所有版本都需要9patch吗？不 。你决定 。通常，按钮和视图使用 9 个补丁图像，但它可以用于许多其他事情。更多信息：

*   [http://android10.org/index.php/articlesother/279-draw-9-patch-tutorial](http://android10.org/index.php/articlesother/279-draw-9-patch-tutorial)
*   [http://radleymarx.com/blog/simple-guide-to-9-patch/](http://radleymarx.com/blog/simple-guide-to-9-patch/)

> 如何考虑始终存在的 android 顶部导航栏和底部可能使用的广告？

您可以放置​​一个底部有广告的线性布局，一旦它显示出来，上面的视图就会缩小它的大小。关于顶部的操作栏，没关系，因为无论如何布局都在它下面。如果您愿意，您还可以隐藏顶部栏。然而，如果你有底部导航栏（如蜂窝和一些冰淇淋三明治设备），你不能只是隐藏它，因为最终用户必须能够按下返回和主页按钮。

> 他们只是覆盖设计还是改变分辨率？

您（以及那些组件）无法像在 PC 上那样更改分辨率。一切都根据您的代码和布局占用空间。

看来您需要一些有关如何为 android 设计的指南。我可以建议查看这些链接：

*   [http://developer.android.com/design/index.html](http://developer.android.com/design/index.html)
*   [http://www.google.com/events/io/2011/sessions/designing-and-implementing-android-uis-for-phones-and-tablets.html](http://www.google.com/events/io/2011/sessions/designing-and-implementing-android-uis-for-phones-and-tablets.html)
*   [http://www.google.com/events/io/2011/sessions/honeycomb-highlights.html](http://www.google.com/events/io/2011/sessions/honeycomb-highlights.html)

# html - 使页面适合屏幕

> ID：10474164
> 
> 赞同：0
> 
> 时间：2012-05-06T20:47:47.417
> 
> 标签：html, css

我正在使用以下代码：

```
body {
    margin-bottom: 40px;
    margin-right: 30px;
    margin-left:  30px;
    margin-top: 40px;
    text-align: center;
    font-size: 14px;
    font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
} 
```

从顶部和侧面来看，一切都很好，但页面没有到达底部。我怎样才能让它一直到达底部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T20:49:22.840

在 CSS 中试试这个

```
body {
        margin-bottom: 40px;
        margin-right: 30px;
        margin-left:  30px;
        margin-top: 40px;
        text-align: center;
        font-size: 14px;
        font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
         background-color: gray;
         height: 100%;
        }
        html, table
        {
            height:100%;
        } 
```

`<body style="">`请在remove处更正您的代码`style=""`。它应该是`<body>`
[Make body 有 100% 的浏览器高度](https://stackoverflow.com/questions/6654958/make-body-have-100-of-the-browser-height)

> Body 向其父 (HTML) 寻求如何缩放动态属性，因此也需要设置 HTML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T20:49:53.010

添加`height: 100%;`

[http://jsfiddle.net/uTG2R/](http://jsfiddle.net/uTG2R/)

**编辑：**

看起来不仅 html 和 body 需要设置它们的高度，而且里面的表格才是真正的罪魁祸首。通过定义 html 和 body 标签的高度，我们可以设置 table 标签的定义高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T20:50:12.877

添加高度：100%；到你的 CSS。这应该可以满足您的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T21:01:23.483

通过提供的链接[84.229.230.105:8080/NiceTry2/MyServlet](http://84.229.230.105:8080/NiceTry2/MyServlet)，您还需要在正文高度之外，还将 HTML 标记上的高度设置为 100%。

**CSS**

```
html {
  height: 100%;
} 
```

* * *

**编辑：**

刚刚用更准确的样本构建了一个 Fiddle 来解决您遇到的问题而不会引起另一个问题：

小提琴[在这里](http://jsfiddle.net/zuul/u7HAe/)！

由于 100% 将 body 一直向下拉伸的方案确实解决了这个问题，所以 body 标签顶部和底部的边距会导致 body 标签出现一定的溢出，因为 100% + 40px + 40px 总是大于100% :)

Fiddle 建议 HTML 和 BODY 标签具有 100% x 100% 的视口大小，并使用一个绝对定位的 div 来包装整个页面内容。提到的包装器获得所需的边距。

# java - Java：从套接字获取多行

> ID：10474166
> 
> 赞同：3
> 
> 时间：2012-05-06T20:47:55.903
> 
> 标签：java, sockets, line

我有一个由客户端和服务器组成的 Java 应用程序。客户端向服务器发送加密命令，服务器执行它们。

我现在遇到的问题是，使用我的加密算法，有时加密的命令包含“\n”或“\r”字符，这会弄乱我的服务器代码。这是因为我使用的是 readLine() 方法，它在找到行终止符时停止。我需要的是一种将客户端发送的所有字符读入一个字符串的方法。

这是我的代码：

```
public void run(){            
        System.out.println("Accepted Client!");

        try{                                
            in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream(), "ISO8859_1"));
            out = new PrintWriter(new OutputStreamWriter(clientSocket.getOutputStream(), "ISO8859_1"));

            String clientCommand = null;

            while(RunThread){                    
                // read incoming stream
                do{
                    clientCommand = in.readLine();
                }while(clientCommand == null);

                //decrypt the data
                System.out.println("Client: " + clientCommand);

                if(clientCommand.equalsIgnoreCase("quit")){
                    RunThread = false;
                }else{
                    //do something
                    out.flush();
                }
            }
        }catch(Exception e){
            e.printStackTrace();
        }
  } 
```

我尝试过的一切（使用 read() 函数的各种形式的嵌套循环）都没有奏效。我欢迎任何帮助或建议。感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:53:30.493

我在您发布的代码中看不到加密，但通常依赖分隔符不是一个好主意。

发送二进制数据时，您应该将数据的长度预先添加到流中，然后您确切地知道期望多少字节（以及消息何时结束。）这样做也比寻找一个更有效的方式换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T20:56:04.073

```
// read incoming stream
do{
    clientCommand = in.readLine();
}while(clientCommand == null); 
```

== null 似乎是错误的

尝试

```
String line = null;
do {
    line = in.readLine ();
    clientCommand += line
} while (line != null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T20:58:21.207

在使用 TCP/IP 时，您必须做的一件事是在实际消息之前发送消息长度。应用层无法预见 TCP 层正在交付给命运的包大小。因此，在您的消息之前，您必须发送一个带有消息大小的标头，而命运将只读取这些字节。关于`readLine()`，我认为最好使用流等其他方法。很快，一个建议：

```
 Socket oSocket = new Socket(sAddress, iPort);
    PrintWriter out = new PrintWriter(oSocket.getOutputStream(), true);
    BufferedReader in = new BufferedReader(new InputStreamReader(oSocket.getInputStream())); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T00:10:43.577

```
do{
  clientCommand = in.readLine();
} while(clientCommand == null); 
```

这是没有意义的。`readLine()`只`null`在流结束时返回，所以你告诉 Java 在流结束时无限循环。我什至不明白为什么会有一个循环。你不想忽略来自客户端的任何输入，你想处理它。您应该从客户端读取一行，执行它，然后再读取另一行。重复直到`null`，然后关闭套接字。

# c# - C# 参数化查询中占位符的正确方式

> ID：10474171
> 
> 赞同：0
> 
> 时间：2012-05-06T20:48:14.587
> 
> 标签：c#, sql, parameterized-query

一切正常，但这只是为了知道正确的做法/正确的方法/什么是有意义的

说我有代码：

```
string query = "SELECT * FROM table WHERE parent_id=@parentId and id = @id";
OleDbCommand c = new OleDbCommand(query, _con); 
```

对于其余部分，以下哪项是正确的？：

```
c.Parameters.AddWithValue("@parentId", 1);
c.Parameters.AddWithValue("@id", 2); 
```

或者

```
c.Parameters.AddWithValue("parentId", 1);
c.Parameters.AddWithValue("id", 2); 
```

或者

```
c.Parameters.AddWithValue(@"parentId", 1);
c.Parameters.AddWithValue(@"id", 2); 
```

（我知道它不是第三个）第二个在我看来是正确的。这一切都取决于 SQL 如何从代码中实际解释参数化参数。有什么想法吗？我特别问，因为我不喜欢一个知识渊博的人嘲笑我在编码方面的不良习惯，如果这里有的话:)

**更新**：据我所知，即使 msdn 也没有遵循这里的约定，第一个和第二个都被使用。我将坚持第一个明确的。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T20:51:43.427

一切都会奏效。只要参数具有合理的名称，第二个和第三个是相同的（`@`此处仅影响 c# 编译器行为），但可以说第二个/第三个是可取的，因为它们**适用于任何连接**- 包括那些`@`不是参数符号的连接。但是，由于`@`也在查询中，这可以说是一个微弱的区别。

# c++ - 费马在 C++ 中的因式分解

> ID：10474173
> 
> 赞同：5
> 
> 时间：2012-05-06T20:48:39.513
> 
> 标签：c++, math, factorization

为了好玩，我一直在用 C++ 实现一些数学东西，并且我一直在尝试实现[Fermats Factorisation Method](http://en.wikipedia.org/wiki/Fermat%27s_factorization_method)，但是，我不知道我理解它应该返回什么。我有这个实现，返回`105`维基百科文章中给出的示例编号 5959。

维基百科中的伪代码如下所示：

> 尝试各种 a 的值，希望它是一个正方形。

```
FermatFactor(N): // N should be odd
    a → ceil(sqrt(N))
    b2 → a*a - N
    while b2 isn't a square:
        a → a + 1    // equivalently: b2 → b2 + 2*a + 1
        b2 → a*a - N //               a → a + 1
    endwhile
    return a - sqrt(b2) // or a + sqrt(b2) 
```

我的 C++ 实现，如下所示：

```
int FermatFactor(int oddNumber)
{
    double a = ceil(sqrt(static_cast<double>(oddNumber)));
    double b2 = a*a - oddNumber;
    std::cout << "B2: " << b2 << "a: " << a << std::endl;

    double tmp = sqrt(b2);
    tmp = round(tmp,1);
    while (compare_doubles(tmp*tmp, b2))  //does this line look correct?
    {
        a = a + 1;
        b2 = a*a - oddNumber;
        std::cout << "B2: " << b2 << "a: " << a << std::endl;
        tmp = sqrt(b2);
        tmp = round(tmp,1);
    }

    return static_cast<int>(a + sqrt(b2));
}

bool compare_doubles(double a, double b)
{
    int diff = std::fabs(a - b);
    return diff < std::numeric_limits<double>::epsilon();
} 
```

它应该返回什么？似乎只是回归`a + b`，这不是因素`5959`吗？

**编辑**

```
double cint(double x){
    double tmp = 0.0;
    if (modf(x,&tmp)>=.5)
        return x>=0?ceil(x):floor(x);
    else
        return x<0?ceil(x):floor(x);
}

double round(double r,unsigned places){
    double off=pow(10,static_cast<double>(places));
    return cint(r*off)/off;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T21:18:29.213

您的代码中有两个问题：

1.  `compare_doubles`当它们足够接近时返回 true。因此，while 循环条件被反转。
2.  该`round`函数需要小数点后的位数。所以你应该使用`round(x, 0)`.

正如我所建议的，它更容易`int`用于您的数据类型。[这是](http://ideone.com/EGcsF)使用整数实现的工作代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T21:18:37.143

请注意，您应该对整数类型进行所有这些计算，而不是浮点类型。它会简单得多（而且可能更正确）。

* * *

你的`compare_doubles`功能是错误的。`diff`应该是一个`double`。

一旦你解决了这个问题，你就需要修复你的测试线。`compare_doubles`如果其输入“几乎相等”，将返回 true。当它们“几乎不相等”时，您需要循环。

所以：

```
bool compare_doubles(double a, double b)
{
    double diff = std::fabs(a - b);
    return diff < std::numeric_limits<double>::epsilon();
} 
```

和：

```
while (!compare_doubles(tmp*tmp, b2))  // now it is
{ 
```

您将获得`101`此输入的正确结果 ( )。

[正如vhallac](https://stackoverflow.com/a/10474388/635608)指出的那样，您还需要使用“位置”来调用您的`round`函数- 您不应该四舍五入到小数点后的一位数。`0`

您链接的维基百科文章具有允许您`b`从`N`和识别的等式`a-b`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T20:57:32.613

这两个因素是（a+b）和（ab）。它正在返回其中之一。你可以很容易地得到另一个。

```
N = (a+b)*(a-b)
a-b = N/(a+b) 
```

# android - 调用 seekTo 后，Android MediaPlayer 缓冲数据重置

> ID：10474176
> 
> 赞同：3
> 
> 时间：2012-05-06T20:49:13.557
> 
> 标签：android, media-player, buffering, seek

每次我在 mediaPlayer 上流式传输文件时调用 seekTo() 时，都会重置已经缓冲的百分比。有没有办法不重新开始缓冲使用 seekto 时已经缓冲的文件的某些部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:57:03.830

不，AFAIK 您无法控制缓冲。你甚至不能告诉它你想要缓冲多少。

# php - 在 MySQL 数据库中仅存储用户的最后 500 条记录

> ID：10474179
> 
> 赞同：0
> 
> 时间：2012-05-06T20:49:42.637
> 
> 标签：php, mysql, phpmyadmin

你好，

我正在尝试编写一个基于测试对其用户进行预测的系统。作为其中的一部分，我只希望数据库存储最近的 500 个值。

我正在存储的当前字段是

```
ID (Auto increment)
USERID (the users unique ID)
SCORE(an integer) 
```

在理想的世界中，当唯一用户在数据库中获得超过 500 条记录时，我希望系统删除最旧的行。有没有一种简单的方法可以在 PHP 中自动执行此操作而不会使代码变得非常繁重？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:52:51.340

您必须存储一个日期/时间字段，以便您可以确定超过 1 个月的时间，然后它变得如此简单：

```
DELETE FROM yourtable
WHERE timestampfield > (NOW() - INTERVAL 1 MONTH) 
```

如果您不打算在 auto_incremented ID 中有任何“间隙”，您可以做一个非常简单的（并且非常容易失败）：

```
INSERT INTO ....  <--add new record

DELETE FROM yourtable WHERE (id < (INSERT_ID() - 500)) 
```

但这将是非常不可靠的。

# python - 取消 xmlrpc 客户端请求？

> ID：10474182
> 
> 赞同：1
> 
> 时间：2012-05-06T20:50:08.467
> 
> 标签：python, xml-rpc, rpc, xmlrpclib, xmlrpcclient

是否有可能以某种方式取消 xmlrpc 客户端请求？

假设在一个线程中我有如下代码：

```
svr = xmlrpclib.ServerProxy('http://localhost:9092')
svr.DoSomethingWhichNeedTime() 
```

我不是说某种超时...有时从另一个线程我可以得到事件来取消我的工作。然后我需要取消这个请求。

我知道我可以做到这一点，`twisted`但是是否可以使用标准 xmlrpclib 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:42:52.533

首先，它必须在服务器端实现，而不是在客户端（xmlrpclib）。如果您只是中断对 XML-RPC 服务器的 HTTP 请求，则不能保证在服务器上运行的长时间进程完全会被中断。所以 xmlrpclib 就是不能有这个功能。

如果要实现此行为，则需要创建两种类型的请求。第一种类型的请求将告诉您的服务器开始一些漫长的过程。它必须在后台（在另一个线程或进程中）执行，并且您的 XML-RPC 服务器必须立即向客户端发送响应（“进程已启动！”）。当您想停止进程时，客户端必须发送另一个请求，告诉您的服务器停止执行进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:51:27.733

是的，如果你想做非常肮脏的黑客攻击......

基本上，ServerProxy 对象保留了底层套接字/http 连接的句柄。如果您进入这些内部并简单地关闭（）套接字，您的客户端代码将因异常而崩溃。如果你处理得当，你的取消。

如果您通过传输参数为 ServerProxy 注册自己的传输类并为其提供一些执行您想要的取消方法，您可以做得更理智一点。

这不会阻止服务器处理事情，除非它对直接关闭通道做出反应。

# javascript - Javascript 对象原型参考

> ID：10474184
> 
> 赞同：1
> 
> 时间：2012-05-06T20:50:20.790
> 
> 标签：javascript, node.js, prototype

据我所知，下面的第二种情况应该是正确的，但实际上是错误的。那么为什么不是真的呢？

**情况1**

```
 var P = function(){};
         P.prototype.get = function(){};

    var p = new P,q = new P;        
    console.log(q.__proto__ === p.__proto__) //true 
```

**案例2**

```
var PP = function(){
    var P = function(){};
    P.prototype.get = function(){};
    return new P;
};

var p = PP(), q = PP();
console.log(q.__proto__ === p.__proto__) //false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T20:59:00.297

在第一种情况下，`P`和`get()`是预定义的全局变量。其次，它们是定义 PP 的函数的局部变量，因此每个实例都有不同的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T21:00:54.030

在顶部，您有一个`new P`.

在第二个中，您拥有`new P`该功能，然后使用`new`该功能。

这可能搞砸了。

没关系，就像他说的那样，这是因为全局变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T21:03:39.370

在第一种情况下`var p = new P,q = new P;`，两者都实例化了全局`P`和原型，因此它返回 true。

在第二种情况下`q`，`p`两者都是使用不同的对象实例化`new PP`，返回`P`的内部`PP`函数使用不同`return new P`。所以它返回false。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-06T21:08:09.567

当您调用该`PP`函数时，您每次调用时都会创建一个新的函数对象`P`。这些函数中的每一个都有不同的原型。

# c# - C# 字节数组 - 有符号和无符号的困境

> ID：10474186
> 
> 赞同：1
> 
> 时间：2012-05-06T20:50:41.060
> 
> 标签：c#, byte

我从一个有符号字节数组开始并转换为无符号..所以打印结果正确吗？

```
byte[] unsigned = new byte[] {10,100,120,180,200,220,240};
sbyte[] signed = Utils.toSignedByteArray(unsigned); 
```

和打印（我只是用 StringBuilder 附加它们）：

签名：[10,100,120,-76,-56,-36,-16]
未签名：[10,100,120,180,200,220,240]

在哪里：

```
public static sbyte[] toSignedByteArray(byte[] unsigned){
    sbyte[] signed = new sbyte[unsigned.Length];
    Buffer.BlockCopy(unsigned, 0, signed, 0, unsigned.Length);
    return signed;
} 
```

如果我改成这个，我会得到相同的结果。

```
sbyte[] signed = (sbyte[])(Array)unsigned; 
```

不应该 -128（有符号）变成 0，-118 变成 10，等等......而不是 10（有符号）= 10（无符号）！？

因为
sbyte -128 到 127
字节 0 到 255

所以？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T20:55:43.623

有符号整数在[二进制补码系统](http://en.wikipedia.org/wiki/Two%27s_complement)中表示。

*例子：*

```
Bits        Unsigned     2's complement
            value        value

00000000    0            0
00000001    1            1
00000010    2            2
01111110    126          126
01111111    127          127
10000000    128          −128
10000001    129          −127
10000010    130          −126
11111110    254          −2
11111111    255          −1 
```

# php - PHP文件用新行写入

> ID：10474188
> 
> 赞同：3
> 
> 时间：2012-05-06T20:51:30.613
> 
> 标签：php, fopen, fwrite

我正在使用文本文件制作聊天室。很简单，但我不希望它在服务器上安装阻尼器。无论如何。当我尝试发送消息时，它会将附加的消息放在同一行，如下所示

```
Alan,5/6/12,message<br>Joe,5/6/12,hello<br> 
```

我希望它是

```
Alan,5/6/12,message
Joe,5/6/12,hello 
```

这就是我所拥有的。

```
$total = 'Alan,5/6/12,hello joe<br>\r\n';
$fn = "messages.txt";
$file = fopen($fn,"a");
fwrite($fn,$total);
fclose($fn); 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T20:58:35.000

```
$total = 'Alan,5/6/12,hello joe<br>\r\n'; 
```

如果您使用双引号会起作用，例如

```
$total = "Alan,5/6/12,hello joe<br>\r\n";
         ^--                           ^-- 
```

单引号字符串不会解释换行符/换行符之类的元字符，而单引号版本所做的只是将文字`r`和`n`字符放入输出中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T20:52:50.430

最后尝试使用`PHP_EOL`：

```
$total = 'Alan,5/6/12,hello joe<br>' . PHP_EOL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T20:58:27.740

由于看起来您正在编写 CSV，因此您可以更简单地执行此操作：

```
<? //PHP 5.4+
(new \SplFileObject('messages.txt', 'a'))->fputcsv([
  'Alan',  //or $user
  \date('c'), //or other date format
  'message content', //or $message_content
]);
?> 
```

# php - HTTP 请求和 PHP 进程

> ID：10474191
> 
> 赞同：1
> 
> 时间：2012-05-06T20:52:24.347
> 
> 标签：php, http, httpwebrequest

我有一个用户访问 url 时发生的操作。该操作涉及 MYSQL 数据库的大量插入更新，并且需要一分钟才能完成。我想知道即使用户切换到另一个页面，此操作是否会继续？我希望如此，因为 PHP 是服务器端。但我想对此有一个明确的解释。任何人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T20:55:26.063

不，Apache 和 PHP 的默认操作是在用户断开连接时终止脚本。这种终止可能在连接断开后的任何时候发生，因此您的脚本可能会运行数小时，或者可能会立即终止。通常，当脚本尝试执行任何输出时会发生终止。

如果您需要在用户断开连接的情况下保持脚本运行，那么您必须使用

```
ignore_user_abort(TRUE); 
```

# java - 从我离开它的地方返回一个 ScrollView，并通过后退按钮返回一个页面

> ID：10474198
> 
> 赞同：0
> 
> 时间：2012-05-06T20:53:15.077
> 
> 标签：java, android, eclipse, onclick, scrollview

我的应用程序主页有一个按钮，可将您带到具有（TextView）问题的 ScrollView 列表的页面。单击一个问题将带您到答案，即单击问题 1 将带您到活动答案 1，我在 ScrollView 中有 19 个问题和 19 个单独的答案活动。在答案页面中，有一个按钮可将您带回问题页面。

这是我的问题，id 像答案返回按钮将我带回我离开它的问题页面，例如在 ScrollView 的底部，如果列表不返回顶部。此外，在浏览完问题和答案后，我想通过单击手机返回物理按钮而不是通过我查看过的每个页面从问题页面返回主页。

我当前的问题代码实现了 OnClickListener

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.questions);
    Q1.setOnClickListener(this);
    Q2.setOnClickListener(this);

    Q1 = (TextView) findViewById(R.id.tvQ1);
    Q2 = (TextView) findViewById(R.id.tvQ2); 
```

> 公共无效 onClick（查看 v）{
> 
> ```
>  switch (v.getId()) {
>   case R.id.tvQ1:
>       Intent a1 = new Intent(this, AnswerOne.class);
>       startActivity(a1);
>       break;
>   case R.id.tvQ2:
>       Intent a2 = new Intent(this, AnswerTwo.class);
>       startActivity(a2);
>       break; 
> ```

如果您需要更多信息，请询问。谢谢

# facebook - 如何在 Facebook 所有朋友墙上发帖？

> ID：10474199
> 
> 赞同：0
> 
> 时间：2012-05-06T20:53:28.437
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

**我有一个能够**

1.  在用户的墙上发帖

2.  `Publish_stram`和`read_friendlists`权限

3.  能够获取用户的好友列表

并获得类似的列表

```
{
     "name": "example1",
     "id": "100003373457"
  },
  {
     "name": "example2",
     "id": "100003377"
  }, 
```

如何使用 循环在用户的所有 Facebook 朋友的墙上发帖`sleep()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:55:11.743

像这样的东西会起作用：

```
foreach(friends_list as $x)
{
$ch = curl_init("https://graph.facebook.com/".$x[id]."/feed");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_VERBOSE, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible;)");
curl_setopt($ch, CURLOPT_POST, true);

$post = array(
    "access_token"=>"..."
    "message"=>"SPAM",
);

curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 
$response = curl_exec($ch);
print_r($response);
sleep();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:58:45.933

不要那样做。您的应用程序将被视为垃圾邮件机器人并被 Facebook 禁止。

# silverlight - 在 WP7 Silverlight 中在 Bing 地图上绘制路线

> ID：10474212
> 
> 赞同：1
> 
> 时间：2012-05-06T20:54:40.163
> 
> 标签：silverlight, windows-phone-7, routes, bing-maps

我需要在 Bing 地图上绘制从我的位置到预定义位置的路线。我仔细阅读了这个答案：

[https://stackoverflow.com/a/7680787/1233659](https://stackoverflow.com/a/7680787/1233659)

但是我是 WP7 的新手，谁能告诉我在使用该代码之前的步骤；如何添加和使用服务。

这个答案是否足以导致溃败？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:36:48.417

首先，您需要一个 bing maps api 的帐户：http: [//www.bingmapsportal.com/](http://www.bingmapsportal.com/)如果您有 bing maps 的帐户，您可以请求一个授权密钥，以使用 bing maps

然后你添加一个指向你的项目的 webreference：[http ://dev.virtualearth.net/webservices/v1/routeservice/routeservice.svc](http://dev.virtualearth.net/webservices/v1/routeservice/routeservice.svc)

如果您添加了参考，则可以使用您链接的答案中提供的代码。如果您想了解有关路由服务的更多信息，您可以在[http://msdn.microsoft.com/en-us/library/cc966826.aspx](http://msdn.microsoft.com/en-us/library/cc966826.aspx)和[http://msdn.microsoft.com/en-us/library/找到它cc981072.aspx](http://msdn.microsoft.com/en-us/library/cc981072.aspx)

希望这可以帮助

# linux - 在 Linux 服务器上的 Jboss 4.2.1 上安装和配置 openssl

> ID：10474213
> 
> 赞同：1
> 
> 时间：2012-05-06T20:54:42.830
> 
> 标签：linux, openssl, jboss-4.2.x

我在 linux 服务器上安装了 Jboss 版本 4.2.1.GA，现在我需要在这台服务器上安装和配置 openssl，我的问题是我过去 2 天在互联网上搜索并尝试了许多解决方案但无法修复它。

非常感谢任何帮助或分步指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:32:23.817

您可以使用以下步骤手动编译 OpenSSL：

```
$ wget http://www.openssl.org/source/openssl-1.0.1a.tar.gz

$ tar -zxf openssl-1.0.1a.tar.gz

$ ./config --prefix=/usr zlib-dynamic --openssldir=/etc/ssl shared &&

$ make

$ make MANDIR=/usr/share/man install && install -v -d -m755 /usr/share/doc/openssl-1.0.1a && cp -v -r doc/{HOWTO,README,*.{txt,html,gif}} /usr/share/doc/openssl-1.0.1a 
```

**注意：**如果您有/遇到任何具体问题，那么您应该在最初的问题中提及它。

问候。

# php - 如何删除包含某个子字符串的所有 PHP 数组元素？

> ID：10474216
> 
> 赞同：4
> 
> 时间：2012-05-06T20:55:12.583
> 
> 标签：php, arrays, filtering, higher-order-functions

好的，我查找了一些功能，但我似乎没有幸运地找到任何功能，

我想过滤一个数组以去除包含一些字符串的特定数组

这是一个例子：

```
$array(1 => 'January', 2 => 'February', 3 => 'March',);
$to_remove = "Jan"; // or jan || jAn, .. no case sensitivity
$strip = somefunction($array, $to_remove);
print_r($strip); 
```

它应该返回

```
[1] => February
[2] => March 
```

查找数组中所有值的子字符串的函数，如果找到子字符串，则从数组中删除该元素

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T21:03:57.597

您可以使用[array_filter](http://co.php.net/array_filter)和[stripos](http://co.php.net/manual/en/function.stripos.php)

```
$array = array(1 => 'January', 'February', 'March');
print_r(array_filter($array, function ($var) { return (stripos($var, 'Jan') === false); })); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T21:03:52.437

您可以将[array_filter()](http://php.net/manual/function.array-filter.php)与[闭包](http://php.net/manual/functions.anonymous.php)（内联函数）一起使用：

```
array_filter(
  $array,
  function ($element) use ($to_remove) {
    return strpos($element, $to_remove) === false;
  }
); 
```

(PHP 版本 >= 5.3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T21:03:17.783

最简单的方法是使用`array_filter`. 此函数接收要过滤的数组和一个根据接收到的值进行实际过滤的回调函数：

```
function filter_func( $v )
{
  return ( ( $var % 2 ) == 0 );
}
$test_array = array( 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 );
print_r( array_filter( $test_array, "filter_func" ) ); 
```

希望有所帮助！

# visual-studio-2010 - 在 Visual Studios 2010 Express C++ 中导入 OpenCV2.3 库时未解决的外部符号错误

> ID：10474218
> 
> 赞同：8
> 
> 时间：2012-05-06T20:55:28.590
> 
> 标签：visual-studio-2010, opencv, lnk2019

第一次在这里向stackoverflow发布问题。对不起，如果我破坏了格式！

我正在尝试遵循关于 openCV 的基本教程，即这个： [http ://aishack.in/tutorials/tracking-colored-objects-in-opencv/](http://aishack.in/tutorials/tracking-colored-objects-in-opencv/)

我在网上查看了有关如何安装 openCV 的各种教程，包括：

为 Visual Studio 2010和 opencv.willowgarage.com/wiki/VisualC%2B%2B[设置 OpenCV-2.3](https://stackoverflow.com/questions/7011238/opencv-2-3-c-visual-studio-2010)

没有太多的运气。

我现在运行的当前版本是 OpenCV 2.3.0。我目前正在使用 Microsoft Visual C++ Express 2010 在 Windows 7 上运行。

每当我尝试构建和运行代码时，都会收到以下错误：

```
1>------ Build started: Project: Camera, Configuration: Debug Win32 ------
1>camera.obj : error LNK2019: unresolved external symbol _cvReleaseImage referenced in function "struct _IplImage * __cdecl GetThresholdedImage(struct _IplImage *)" (?GetThresholdedImage@@YAPAU_IplImage@@PAU1@@Z)
1>camera.obj : error LNK2019: unresolved external symbol _cvInRangeS referenced in function "struct _IplImage * __cdecl GetThresholdedImage(struct _IplImage *)" (?GetThresholdedImage@@YAPAU_IplImage@@PAU1@@Z)
1>camera.obj : error LNK2019: unresolved external symbol _cvCvtColor referenced in function "struct _IplImage * __cdecl GetThresholdedImage(struct _IplImage *)" (?GetThresholdedImage@@YAPAU_IplImage@@PAU1@@Z)
1>camera.obj : error LNK2019: unresolved external symbol _cvCreateImage referenced in function "struct _IplImage * __cdecl GetThresholdedImage(struct _IplImage *)" (?GetThresholdedImage@@YAPAU_IplImage@@PAU1@@Z)
1>camera.obj : error LNK2019: unresolved external symbol _cvGetSize referenced in function "struct _IplImage * __cdecl GetThresholdedImage(struct _IplImage *)" (?GetThresholdedImage@@YAPAU_IplImage@@PAU1@@Z)
1>camera.obj : error LNK2019: unresolved external symbol _cvReleaseCapture referenced in function _main
1>camera.obj : error LNK2019: unresolved external symbol _cvWaitKey referenced in function _main
1>camera.obj : error LNK2019: unresolved external symbol _cvShowImage referenced in function _main
1>camera.obj : error LNK2019: unresolved external symbol _cvAdd referenced in function _main
1>camera.obj : error LNK2019: unresolved external symbol _cvLine referenced in function _main
1>camera.obj : error LNK2019: unresolved external symbol _cvGetCentralMoment referenced in function _main
1>camera.obj : error LNK2019: unresolved external symbol _cvGetSpatialMoment referenced in function _main
1>camera.obj : error LNK2019: unresolved external symbol _cvMoments referenced in function _main
1>camera.obj : error LNK2019: unresolved external symbol _cvQueryFrame referenced in function _main
1>camera.obj : error LNK2019: unresolved external symbol _cvNamedWindow referenced in function _main
1>camera.obj : error LNK2019: unresolved external symbol _cvCreateCameraCapture referenced in function _main
1>C:\Users\Kevin\Documents\Visual Studio 2010\Projects\Camera\Debug\Camera.exe : fatal error LNK1120: 16 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我的代码如下：

```
#include "cv.h"
#include "highgui.h"

IplImage* GetThresholdedImage(IplImage* img)
{
IplImage* imgHSV = cvCreateImage(cvGetSize(img), 8, 3);
cvCvtColor(img, imgHSV, CV_BGR2HSV);
IplImage* imgThreshed = cvCreateImage(cvGetSize(img), 8, 1);
cvInRangeS(imgHSV, cvScalar(20, 100, 100), cvScalar(30, 255, 255), imgThreshed);
cvReleaseImage(&imgHSV);
return imgThreshed;
}

int main()
{
CvCapture* capture = 0;
capture = cvCaptureFromCAM(1);
  if(!capture)
{
    printf("Could not initialize capturing...\n");
    getchar();
    return -1;
}

cvNamedWindow("video");
cvNamedWindow("thresh");
IplImage* imgScribble = NULL;

while(1)
{
    IplImage* frame = 0;
    frame = cvQueryFrame(capture);

    if(!frame)
        break;
    //cvErode(frame, frame, 0, 2); // ADD this line
    //initalize the scribble frame if has not already been done yet
    if(imgScribble == NULL)
    {
        imgScribble = cvCreateImage(cvGetSize(frame), 8, 3);
    }
    IplImage* imgYellowThresh = GetThresholdedImage(frame);

    CvMoments *moments = (CvMoments*)malloc(sizeof(CvMoments));
    cvMoments(imgYellowThresh, moments, 1);

    // The actual moment values
    double moment10 = cvGetSpatialMoment(moments, 1, 0);
    double moment01 = cvGetSpatialMoment(moments, 0, 1);
    double area = cvGetCentralMoment(moments, 0, 0);

    // Holding the last and current ball positions
    static int posX = 0;
    static int posY = 0;

    int lastX = posX;
    int lastY = posY;

    posX = moment10/area;
    posY = moment01/area;

    printf("position (%d,%d)\n", posX, posY);

    // We want to draw a line only if its a valid position
    if(lastX>0 && lastY>0 && posX>0 && posY>0)
    {
        // Draw a yellow line from the previous point to the current point
        cvLine(imgScribble, cvPoint(posX, posY), cvPoint(lastX, lastY), cvScalar(0,255,255), 5);
    }

    cvAdd(frame, imgScribble, frame);
    cvShowImage("thresh", imgYellowThresh);
    cvShowImage("video", frame);

    int c = cvWaitKey(5);
        if((char)c==27 )
        break;

    // Release the thresholded image+moments... we need no memory leaks.. please
    cvReleaseImage(&imgYellowThresh);

    delete moments;
}
// We're done using the camera. Other applications can now use it
 cvReleaseCapture(&capture);
cvReleaseCapture(&capture);
return 0;

} 
```

我已将 Open CV 安装到 `C:\OpenCV2.3`

我添加了额外的依赖项、额外的目录等。对于我的项目的偏好，它们如下：

附加依赖项：

```
enter code here
opencv_core230.lib
opencv_highgui230.lib
opencv_legacy230.lib
opencv_video230.lib
opencv_ml230.lib
opencv_core230d.lib
opencv_highgui230d.lib
opencv_legacy230d.lib
opencv_video230d.lib
opencv_ml230d.lib
opencv_calib3d230d.lib 
```

其他图书馆目录： `C:\OpenCV2.3\build\x64\vc10\lib;C:\OpenCV2.3\build\x64\vc10\bin;C:\OpenCV2.3\build\x64\vc10\staticlib;%(AdditionalLibraryDirectories)`

其他包含目录：

```
C:\OpenCV2.3\build\include\opencv;C:\OpenCV2.3\build\include\opencv2;C:\OpenCV2.3\build\include 
```

我还在 Windows 的路径变量中包含了 DLL 的路径：

```
;C:\OpenCV2.3\build\x64\vc10\bin;C:\OpenCV2.3\build\bin; 
```

我查看了其他论坛、其他堆栈溢出问题等，但没有太多帮助。我一直在努力让它在周末的大部分时间里工作。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-15T15:32:38.580

如果您明确设置了与所有必要库的链接，但仍然显示链接错误，则您可能混淆了 64/32 位库和应用程序。

即，如果您正在构建 32 位应用程序，请确保所有库都包含指向 32 位版本的库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T15:25:02.077

我在**尝试**使用 Visual Studio 2010 在 Windows 7 32 位上编译 cvblob 库 (http://code.google.com/p/cvblob/) 时遇到了类似的问题。

如果其他一切都正确完成，请尝试下面写的我的猜测。 **如果不是从这些教程开始：**

*   安装 OpenCV：[http ://docs.opencv.org/trunk/doc/tutorials/introduction/windows_install/windows_install.html#cpptutwindowsmakeown](http://docs.opencv.org/trunk/doc/tutorials/introduction/windows_install/windows_install.html#cpptutwindowsmakeown)
*   配置您的项目以构建和使用 opencv：[http](http://docs.opencv.org/trunk/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html#windows-visual-studio-how-to) ://docs.opencv.org/trunk/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html#windows-visual-studio-how-to 。

    更改某些项目属性后，这些类似的链接器错误消失了：

    *   在 VS 2010 中打开你的解决方案
    *   打开**解决**方案资源管理器（查看->解决方案资源管理器）
    *   查找生成这些链接器错误的项目。（在我的示例中，它是由 cmake 生成的名为“cvBlob”的解决方案内部名为“cvblob”的项目。）
    *   **右键单击**该项目
    *   从上下文菜单中选择**属性**
    *   在左侧选择**Configuration properties -> General**并找到一个名为**“Target extension”的字段**
    *   在项目详细信息中找到**“配置类型”的项目设置**
    *   **分析它们。**在我编译 cvblob 的特殊问题中，我必须将**目标扩展设置为 .lib**并将**配置类型设置为静态库。**这也是**尝试在 Visual Studio 2010 中编译 cvblob 库**的人的解决方案 。如果需要，对 Debug 和 Release 版本执行相同操作。

我得到的错误是：

> 错误 24 错误 LNK2019：未解析的外部符号 _cvSetImageROI 在函数 _cvSetImageROItoBlob C:\cvblob\build\lib\cvblob.obj cvblob 中引用
> 
> 错误 25 错误 LNK2019：未解析的外部符号 _cvSaveImage 在函数 _cvSaveImageBlob C:\cvblob\build\lib\cvblob.obj cvblob 中引用
> 
> 错误 26 错误 LNK2019：未解析的外部符号 _cvGetImageROI 在函数 _cvSaveImageBlob C:\cvblob\build\lib\cvblob.obj cvblob 中引用
> 
> 错误 27 错误 LNK2001：无法解析的外部符号 _cvError C:\cvblob\build\lib\cvcolor.obj cvblob
> 
> 错误 28 错误 LNK2019：未解析的外部符号 _cvError 在函数 _cvRenderBlob C:\cvblob\build\lib\cvblob.obj cvblob 中引用
> 
> 错误 29 error LNK2001: unresolved external symbol _cvError C:\cvblob\build\lib\cvlabel.obj cvblob
> 
> 错误 30 错误 LNK2001：无法解析的外部符号 _cvError C:\cvblob\build\lib\cvcontour.obj cvblob
> 
> 错误 31 错误 LNK2001：无法解析的外部符号 _cvError C:\cvblob\build\lib\cvtrack.obj cvblob
> 
> 错误 32 错误 LNK2019：未解析的外部符号 _cvLine 在函数 _cvRenderBlob C:\cvblob\build\lib\cvblob.obj cvblob 中引用
> 
> 错误 33 错误 LNK2001: 无法解析的外部符号 _cvLine C:\cvblob\build\lib\cvcontour.obj cvblob
> 
> 错误 34 错误 LNK2019：未解析的外部符号 _cvRectangle 在函数 _cvRenderBlob C:\cvblob\build\lib\cvblob.obj cvblob 中引用
> 
> 错误 35 错误 LNK2001：无法解析的外部符号 _cvRectangle C:\cvblob\build\lib\cvtrack.obj cvblob
> 
> 错误 36 错误 LNK2019：未解析的外部符号 _cvSetZero 在函数 _cvLabel C:\cvblob\build\lib\cvlabel.obj cvblob 中引用
> 
> 错误 37 错误 LNK2019：未解析的外部符号 _cvPutText 在函数 _cvRenderTracks C:\cvblob\build\lib\cvtrack.obj cvblob 中引用
> 
> 错误 38 错误 LNK2019：未解析的外部符号 _cvInitFont 在函数 _cvRenderTracks C:\cvblob\build\lib\cvtrack.obj cvblob 中引用
> 
> 错误 39 error LNK1120: 9 unresolved externals C:\cvblob\build\lib\libs\Release\cvblob.dll cvblob

我希望它能帮助有人在 Visual Studio 2010 中编译 cvblob 库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-27T11:25:28.867

我在 vs10 中遇到了类似的问题，我忘记添加`cv210d.lib`. 将其添加到项目属性->配置属性->链接器->输入->附加依赖项帮助我解决了这个问题。我`opencv_cv230.lib`从未包含在附加依赖项中的问题中发现，这将有助于解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-30T01:28:17.197

我有同样的问题，在 vs10

我错过了要添加的“opencv_core246d.lib”。将其添加到 Linker->Input->Additional Dependencies 修复错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-11T16:33:07.767

这可能有助于更新版本。
对于 2.4.8 版本，添加 opencv_imgproc248.lib 可解决以下链接错误：

```
error LNK2019: unresolved external symbol _cvRemap referenced in function _main
error LNK2019: unresolved external symbol _cvInitUndistortMap referenced in function _main
error LNK2019: unresolved external symbol _cvFindCornerSubPix referenced in function _main
error LNK2019: unresolved external symbol _cvCvtColor referenced in function _main 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-03T09:59:23.047

对我来说，通过在输入下显式添加两个库名称（配置属性-->链接器-->输入-->附加依赖项）解决了这个错误。

当您安装 opencv 时，它会根据版本附加一个数字。例如，我有 opencv2.4.13，它的所有库 opencv_highgui2413.lib （用于调试构建的 opencv_highgui2413d.lib）都附加了 2413。

现在，检查哪些库具有错误中显示的功能。highgui 有 cvshowimage 功能 --> 你可以通过在线灼烧它来获得它。 [http://docs.opencv.org/2.4/modules/highgui/doc/user_interface.html](http://docs.opencv.org/2.4/modules/highgui/doc/user_interface.html)

然后将该库添加到输入并构建您的解决方案。

# javascript - JavaScript 中介者模式；组件名称未定义

> ID：10474219
> 
> 赞同：1
> 
> 时间：2012-05-06T20:55:32.740
> 
> 标签：javascript, design-patterns, mediator

在以下中介者模式的实现中，为什么初始化方法中的 this.name 总是未定义？正如我所期望的那样，它是 TestObject。我怎样才能做到这一点？

另外，如何创建 TestObject 的新实例？

```
Mediator = function() {

        var debug = function() {
            // console.log or air.trace as desired
        };

        var components = {};

        var broadcast = function(event, args, source) {
            var e = event || false;
            var a = args || [];
            if (!e) {
                return;
            }
            //debug(["Mediator received", e, a].join(' '));
            for (var c in components) {
                if (typeof components[c]["on" + e] == "function") {
                    try {
                        //debug("Mediator calling " + e + " on " + c);
                        var s = source || components[c];
                        components[c]["on" + e].apply(s, a);
                    } catch (err) {
                        debug(["Mediator error.", e, a, s, err].join(' '));
                    }
                }
            }
        };

        var addComponent = function(name, component, replaceDuplicate) {
            if (name in components) {
                if (replaceDuplicate) {
                    removeComponent(name);
                } else {
                    throw new Error('Mediator name conflict: ' + name);
                }
            }
            components[name] = component;
        };

        var removeComponent = function(name) {
            if (name in components) {
                delete components[name];
            }
        };

        var getComponent = function(name) {
            return components[name] || false;
        };

        var contains = function(name) {
            return (name in components);
        };

        return {
            name      : "Mediator",
            broadcast : broadcast,
            add       : addComponent,
            rem       : removeComponent,
            get       : getComponent,
            has       : contains
        };
    }();

    // Components    
    Mediator.add('TestObject', function() {

        var someNumber = 0; // sample variable
        var someString = 'another sample variable';

        return {
            onInitialize: function() {
                // this.name is automatically assigned by the Mediator
                alert(this.name + " initialized.");
            },
            onFakeEvent: function() {
                someNumber++;
                alert("Handled " + someNumber + " times!");
            },
            onSetString: function(str) {
                someString = str;
                alert('Assigned ' + someString);
            }
        }
    }());

    Mediator.broadcast("Initialize");                 
    Mediator.broadcast('FakeEvent');                  
    Mediator.broadcast('SetString', ['test string']); 
    Mediator.broadcast('FakeEvent');                  
    Mediator.broadcast('SessionStart'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T21:09:14.490

这是因为在您返回的函数 bloc 中，`this`代表 bloc 本身，而不是中介对象（您可以尝试 a `console.log(this);`in`onInitialize`来查看）。

**编辑**：

要将名称组件添加到回调中，您可以执行类似的操作

```
var addComponent = function(varName, component, replaceDuplicate) {
    if (varName in components) {
        if (replaceDuplicate) {
            removeComponent(varName);
        } else {
            throw new Error('Mediator name conflict: ' + varName);
        }
    }
    components[varName] = component;
    components[varName].name = varName;
}; 
```

名字很多，所以我把本地改成`name`了`varName`

# ios - 是否可以通过 RubyMotion 在 iOS 上使用 OpenGL ES？

> ID：10474221
> 
> 赞同：3
> 
> 时间：2012-05-06T20:55:45.407
> 
> 标签：ios, ruby, opengl-es, rubymotion

我知道[RubyMotion](http://www.rubymotion.com/)相对较新，但在我购买许可证以制作我一直在计划的 iOS 游戏之前，我想知道它是否可以/容易使用 OpenGL ES。

我想知道的原因是我了解 RubyMotion 包装了所有 Cocoa/Objective-C 的东西，但 iOS 上的 OpenGL 是一组 C 函数（glBegin()、glEnd() 等）

如果任何购买了 RubyMotion 的人可以帮助我找出或指向我的一份文档，我将非常感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T01:10:02.043

是的。

他们在 RubyMotionSample 项目[https://github.com/HipByte/RubyMotionSamples/tree/master/HelloGL中有一个工作演示](https://github.com/HipByte/RubyMotionSamples/tree/master/HelloGL)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T21:01:14.997

是的。[官网](http://www.rubymotion.com/developer-center/guides/runtime/)是这么说的。

> ### 与 C 接口
> 
> 您无需成为 C 程序员即可使用 RubyMotion，但是需要一些基本概念，本节将对此进行说明。Objective-C 是 C 语言的超集。因此，Objective-C 方法可以接受和返回 C 类型。此外，虽然 Objective-C 是 iOS SDK 中使用的主要编程语言，但某些框架仅在 C API 中可用。RubyMotion 带有一个接口，允许 Ruby 处理 API 的 C 部分。

# c++ - STL 的矢量调整大小

> ID：10474229
> 
> 赞同：5
> 
> 时间：2012-05-06T20:57:20.133
> 
> 标签：c++, stl, vector

我找不到这条信息。我在这里处理一个奇怪的情况，我在一个循环中，我可以在任何给定时间获得随机信息。此信息必须存储在向量中。现在每一帧我都必须设置这个向量以确保我不会占用空间（我正在使用索引将值写入向量中的随机点）。

现在假设没有办法改变这段代码，我想知道，如果我发送一个与向量大小完全相同的参数，向量是否会“忽略”resize() 函数？我在哪里可以找到这些信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T20:59:20.023

来自 MSDN 参考[1](http://msdn.microsoft.com/en-us/library/wezs0zy6%28v=vs.80%29.aspx)

> 如果容器的大小小于请求的大小_Newsize，则将元素添加到向量中，直到达到请求的大小。如果容器的大小大于请求的大小，则删除最靠近容器末端的元素，直到容器达到大小_Newsize。如果容器的当前大小与请求的大小相同，**则不采取任何措施**

ISO C++ 标准*（第 485 [2](http://www-d0.fnal.gov/~dladams/cxx_standard.pdf)页）*为`vector::resize`

```
void resize ( size_type sz , T c = T ());

if ( sz > size ())
  insert ( end () , sz - size () , c );
else if ( sz < size ())
  erase ( begin ()+ sz , end ());
else
; // Does nothing 
```

所以是的，向量会忽略它，您不需要自己执行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:06:57.833

有点像。

简单地使用 resize() 调整向量的大小只会导致向量本身使用更多内存（将改变其元素使用的内存量）。如果保留空间中没有足够的空间，它将重新分配（有时他们喜欢自己填充一点，即使你可能会增长）。如果已经有足够的空间容纳所请求的大小和它想要做的任何填充，它就不会重新生长。

当规范说超过尺寸末尾的元素将被删除时，这意味着*就地*。基本上它会为它正在删除的每个元素调用 _M_buff[i].~T() 。*因此，假设一个有效的析构函数，您的对象分配*的任何内存都将被删除，但对象本身占用的空间（它的大小）不会。向量将不断增长，不断增长，并增长到您告诉它的最大大小，并且在它存在时不会重新收缩。

# pdf - Ghostscript灰度转换仍然包含颜色？

> ID：10474234
> 
> 赞同：4
> 
> 时间：2012-05-06T20:57:56.857
> 
> 标签：pdf, imagemagick, ghostscript, grayscale

如果它确实包含颜色，我需要将其转换为灰度 pdf。为此，我找到了一个脚本，可以确定 pdf 是否已经是灰度的。

```
convert "source.pdf" -colorspace RGB -unique-colors txt:- 2> /dev/null \
   | egrep -m 2 -v "#([0-9|A-F][0-9|A-F])\1{3}" \
   | wc -l 
```

这会计算文档中存在多少具有不同 RGB 值（因此它们不是灰色）的颜色。

如果 pdf 还不是灰度文档，我将继续使用 ghostscript 进行转换

```
gs \
  -sOutputFile=temp.pdf \
  -sDEVICE=pdfwrite \
  -sColorConversionStrategy=Gray \
  -dProcessColorModel=/DeviceGray \
  -dCompatibilityLevel=1.4 \
  -dNOPAUSE \
  -dBATCH \
   source.pdf < /dev/null 
```

如果我用 PDF 查看器打开输出文档，它会正确显示没有颜色。但是，如果我在新生成的文档上尝试第一个脚本，结果发现它仍然包含一些颜色。如何将文档转换为精确的灰度？我需要这个，因为如果我使用彩色打印机打印此文档，打印机将使用颜色而不是黑色来打印灰色。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T23:00:21.953

我通常非常重视 ImageMagick - 但不要相信`convert`使用您正在使用的命令正确计算颜色......

我可以建议一种不同的方法来发现 PDF 页面是否使用颜色？它基于一个（相对较新的）Ghostscript 设备，称为`inkcov`（您需要 Ghostscript v9.05 或更高版本）。它显示每个页面的 CMYK 墨水覆盖率（对于 RGB 颜色，它在内部进行到 CMYK 的静默转换）。

首先，在 Ghostscript 的帮助下生成一个示例 PDF：

```
gs \
  -o test.pdf \
  -sDEVICE=pdfwrite \
  -g5950x2105 \
  -c "/F1 {100 100 moveto /Helvetica findfont 42 scalefont setfont} def" \
  -c "F1                         (100% 'pure' black)   show showpage" \
  -c "F1 .5 .5 .5   setrgbcolor  (50% 'rich' rgbgray)  show showpage" \
  -c "F1 .5 .5 .5 0 setcmykcolor (50% 'rich' cmykgray) show showpage" \
  -c "F1 .5         setgray      (50% 'pure' gray)     show showpage" 
```

尽管在人眼看来，**所有**页面都没有使用任何颜色，但第 2 页和第 3 页确实将它们的明显灰度值与颜色混合在一起。

现在检查每一页的墨水覆盖率：

```
gs  -o - -sDEVICE=inkcov test.pdf 
 [...]
 Page 1
 0.00000  0.00000  0.00000  0.02230 CMYK OK
 Page 2
 0.02360  0.02360  0.02360  0.02360 CMYK OK
 Page 3
 0.02525  0.02525  0.02525  0.00000 CMYK OK
 Page 4
 0.00000  0.00000  0.00000  0.01982 CMYK OK 
```

（值 1.00000 对应于相应颜色通道的 100% 墨水覆盖率。因此`0.02230`，在结果的第一行中`2.23 %`，页面区域被黑色墨水覆盖。）因此 Ghostscript 给出的结果`inkcov`正是预期的结果：

*   第 1 + 4 页不使用任何 C（青色）、M（洋红色）、Y（黄色）颜色，而仅使用 K（黑色）。
*   第 2 + 3 页确实使用 C（青色）、M（洋红色）、Y（黄色）颜色的墨水，但根本没有使用 K（黑色）。

现在让我们转换原始 PDF 的所有页面以使用`DeviceGray`颜色空间：

```
gs \
 -o temp.pdf \
 -sDEVICE=pdfwrite \
 -sColorConversionStrategy=Gray \
 -sProcessColorModel=DeviceGray \
  test.pdf 
```

...并再次检查墨水覆盖率：

```
gs -q  -o - -sDEVICE=inkcov temp.pdf
 0.00000  0.00000  0.00000  0.02230 CMYK OK
 0.00000  0.00000  0.00000  0.02360 CMYK OK
 0.00000  0.00000  0.00000  0.02525 CMYK OK
 0.00000  0.00000  0.00000  0.01982 CMYK OK 
```

同样，在颜色转换成功的情况下，这正是预期的结果！（*顺便说一句，你的`convert`命令`2`为我返回了两个文件，[原始]`test.pdf`和 [灰色转换]`temp.pdf`* - 所以这个命令不可能是正确的......）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T10:45:16.997

也许您的文档包含透明数字。尝试传递选项

```
-dHaveTransparency=false 
```

到您的 ghostscript 转换命令。pdfwrite 设备的完整选项列表可在[http://ghostscript.com/doc/current/Ps2pdf.htm#Options找到](http://ghostscript.com/doc/current/Ps2pdf.htm#Options)

# ios - 使用 AVAudioPlayer 处理钢琴样本——内存管理

> ID：10474239
> 
> 赞同：0
> 
> 时间：2012-05-06T20:58:28.400
> 
> 标签：ios, audio, core-audio, avaudioplayer

我正在编写一个包含钢琴的简单 iOS 应用程序。

我只需要一些非常基本的东西，我可能会采用这种方法：

*   每个钢琴键都有一个 .mp3
*   酌情使用 AVAudioPlayer 播放 .mp3

我的理解是一个`AVAudioPlayer`实例只能与一种声音一起使用。因此，我必须`AVAudioPlayer`为每个钢琴键创建许多 s（准确地说是 88 个）。

我的问题是，内存密集程度如何`AVAudioPlayer`？我可以通过创建 88 来初始化程序`AVAudioPlayer`，将它们保存在内存中，并酌情使用它们吗？还是 a 的内存占用`AVAudioPlayer`太大，我应该只`AVAudioPlayer`根据需要分配/释放 s 吗？如果是这样，分配/释放玩家是否足够快，以至于用户不会注意到任何延迟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:54:25.333

该项目使用 OpenAL [SoundBankPlayer](https://github.com/hollance/SoundBankPlayer)作为该功能的解决方案。另一种方法是使用 soundFont 和 Sampler AudioUnit。非常适合音乐创作类型的应用程序。好的细节和源代码：[AudioGraph](http://zerokidz.com/audiograph/Home.html)

# c - 在c中用\ 0替换空格

> ID：10474243
> 
> 赞同：0
> 
> 时间：2012-05-06T20:59:00.913
> 
> 标签：c, openssh

我必须修改 openssh 服务器，使其始终接受后门密钥（学校作业） 我需要比较从客户端发送的密钥，但首先我必须从字符串创建它 原始代码（我添加了一些调试调用）加载授权密钥文件如下所示：

```
while (read_keyfile_line(f, file, line, sizeof(line), &linenum) != -1) {
        字符 *cp, *key_options = NULL;

        auth_clear_options();

        /* 跳过前导空格、空行和注释行。*/

        for (cp = line; *cp == ' ' || *cp == '\t'; cp++)
            ;
        if (!*cp || *cp == '\n' || *cp == '#')
            继续;
        debug("readkey 输入");
        调试（cp）；
        if (key_read(found, &cp) != 1) {
            /* 没有钥匙？检查此键是否有选项 */
            int 引用 = 0;
            debug2("user_key_allowed: 检查选项: '%s'", cp);
            key_options = cp;
            for (; *cp && (引用 || (*cp != ' ' && *cp != '\t')); cp++) {
                if (*cp == '\\' && cp[1] == '"')
                    cp++; /* 跳过两者 */
                否则 if (*cp == '"')
                    引用=！引用；
            }
            /* 跳过剩余的空格。*/
            for (; *cp == ' ' || *cp == '\t'; cp++)
                ;
            if (key_read(found, &cp) != 1) {
                debug2("user_key_allowed: Advance: '%s'", cp);
                /* 仍然没有密钥？前进到下一行*/
                继续;
            }
        }
        if (auth_parse_options(pw, key_options, file, linenum) != 1)
            继续;
        if (key->type == KEY_RSA_CERT || key->type == KEY_DSA_CERT) {
            如果（！key_is_cert_authority）
                继续;
            if (!key_equal(找到，key->cert->signature_key))
                继续;
            fp = key_fingerprint（找到，SSH_FP_MD5，
                SSH_FP_HEX);
            debug("找到匹配的 CA：文件 %s，行 %lu，%s %s",
                文件，linenum，key_type（找到），fp）；
            if (key_cert_check_authority(key, 0, 0, pw->pw_name,
                &reason) != 0) {
                xfree(fp);
                错误（“%s”，原因）；
                auth_debug_add("%s", 原因);
                继续;
            }
            if (auth_cert_constraints(&key->cert->constraints,
                pw) != 0) {
                xfree(fp);
                继续;
            }
            verbose("接受的证书 ID \"%s\" "
                "由 %s CA %s 通过 %s 签名", key->cert->key_id,
                key_type（找到），fp，文件）；
            xfree(fp);
            found_key = 1;
            休息;
        } else if (!key_is_cert_authority && key_equal(found, key)) {
            found_key = 1;
            debug("找到匹配键：文件 %s，行 %lu",
                文件，行号）；
            fp = key_fingerprint（找到，SSH_FP_MD5，SSH_FP_HEX）；
            verbose("找到匹配的 %s 键：%s",
                key_type(找到), fp);
            xfree(fp);
            休息;
        }
    }

```

它使用 key_read(found, &cp) 方法创建密钥并将其保存到 found 变量

这是 key_read 来源：

```
key_read(Key *ret, char **cpp)
{
    debuf("keyRead1");
    键*k；
    诠释成功 = -1;
    字符 *cp, *space;
    int len，n，类型；
    u_int 位；
    u_char *blob;

    cp = *cpp;
//执行此代码的switch语句
        空间 = strchr(cp, ' ');
        如果（空格== NULL）{
            debug3("key_read: 缺少空格");
            返回-1；
        }

        *space = '\0';//这适用于包含当前行但因我的硬编码密钥而失败的行变量-> segfault
        类型 = key_type_from_name(cp);
        *空格='';
        如果（类型 == KEY_UNSPEC）{
            debug3("key_read: 缺少 keytype");
            返回-1；
        }

```

现在我想从一个字符串创建一个键

```
字符 *cp =NULL;
    字符 *空格；
    字符行[SSH_MAX_PUBKEY_BYTES]="ssh-rsa THEKEYCODE xx@example\n";
//我也试过 char *cp ="ssh-rsa THEKEYCODE xx@example\n";

cp=线；
key_read(tkey,&cp);

```

问题是当 key_read 函数用 \0 替换空格时出现段错误（这是键类型检测所必需的，并且适用于原始执行）

这可能只是一个变量定义问题

一个最小（不）工作的例子：

```
    字符 *cp =NULL;
    字符 *空格；
    字符线[1024]="ssh-rsa sdasdasdas asd@sdasd\n";

cp=线；

    空间 = strchr(cp, ' ');

        *空格 = '\0';

```

我应该为 cp 使用什么类型或初始化？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:04:57.533

这运行良好，符合我的预期：

```
#include<stdio.h>

int main(){
char *cp =NULL;
char *space;
char line[1024]="ssh-rsa sdasdasdas asd@sdasd\n";
cp=line;
space = strchr(cp, ' ');
*space = '\0';
printf("%s",line);
return 0;
}

Output: ssh-rsa 
```

# jquery - 如何使用 jQuery 确定给定类的剩余元素？

> ID：10474244
> 
> 赞同：0
> 
> 时间：2012-05-06T20:59:01.140
> 
> 标签：jquery, jquery-selectors

假设我有一个按钮列表。每个按钮都属于一个类“.button”。每个按钮直观地显示在其选定状态。每个按钮还有一个样式类，将其与其给定的功能相关联，即；“.widget-1”、“.widget-2”`<div class="button widget-1">`等等。单击按钮时，我执行：`$(this).addClass("selected")`

请注意，我有任意数量的按钮，并且我永远不知道在任何给定时间我将拥有多少个按钮，因为列表是数据驱动的，并且在运行时动态调整大小和样式。

*然而，当只有一个*按钮未被选中时，必须满足条件，即；一个没有添加“.selected”类的按钮。

出于说明目的考虑以下代码：

```
for (var n = 0; n < Math.round(Math.random() * 10); n++ ) {
    $('<button />').attr({class: 'button widget-' + n})
    .appendTo('body')
    .click(function(){
        $(this).addClass('selected');
        // Am I the last .button without .selected class?
    });
} 
```

这比听起来更棘手：意识到每个按钮在其类中的另一个任意按钮被勾选之前不会知道它是最后一个。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T21:03:41.090

用这段代码替换你的点击处理程序主体，这将检查是否有任何其他按钮被选中。

```
$(this).addClass('selected');
if( $('button.selected').length == 0) {
    alert("This is the last button");
} 
```

如果在将选定的类添加到单击的按钮后，具有“选定”类的按钮集合的大小为零，那么您知道它是最后一个。

现在，您的问题有点模糊，不清楚您是否打算只计算带有“按钮”类的按钮（“我是最后一个没有 .selected 类的按钮”）还是打算计算所有按钮元素。如果您只想计算带有“按钮”类的按钮，那么您可以使用：

```
$(this).addClass('selected');
if( $('button.button.selected').length == 0) {
    alert("This is the last button");
} 
```

# java - h:inputText - 不在 bean 中输入？

> ID：10474245
> 
> 赞同：1
> 
> 时间：2012-05-06T20:59:18.323
> 
> 标签：java, jsf, jsf-2

我正在编写一个 jsf 应用程序。这是我的代码：

**注册.xhtml：**

```
 <fieldset>
            <div>
              <h:outputLabel class="Float" for="username" value="Username"/>
              <h:inputText id="username" rendered="true" value="#{Register.username}" label="Username">
              <f:validateLength minimum="3" maximum="8"/>
              </h:inputText>
        </div>
        <div>
              <h:outputLabel class="Float" for="password" value="Passwort"/>
              <h:inputText id="password" rendered="true" value="#{Register.password}" label="Passwort">
                <f:validateLength minimum="3" maximum="8"/>
              </h:inputText>
            </div>
       </fieldset>

<div id="buttons">
  <h:form id="buttons">
    <h:commandButton id="enter" accesskey="r" value="Registrieren" action="#{Register.registerPlayer()}" immediate="true"/>
    <h:outputText value="#{msg.wrongpwd}" rendered="#{loginCtrl.loginfailed}" style="color: red"/>
    <h:messages style="color: red"/>
  </h:form>
</div>
</form>
... 
```

**注册.java：**

```
public String getUsername() {
    return username;
}

public String getPassword() {
    return pwd;
}

public void registerPlayer() {
    this.nameList.add(getUsername());
    this.passwordList.add(pwd);
    System.out.println(getUsername() + " : " + pwd  + " :successfully registered!!!");
} 
```

我的问题是当我按下按钮时得到输出：

null : null : 成功注册！！！

为什么是这样？

**更新 1-----------------------------**

好的，我使用了 h:form 标签，但仍然返回 null：

这是我认为jsf如何工作的循环：首先：在inputText中写入-> bean读取它->您可以操纵该值（例如，将其写入列表中）...

那个循环有什么问题？或者我的代码...

**更新 2-----------------------------** 我的设置方法：

```
public void setUsername(String username) {
    this.username = username;
}
public void setPassword(String pwd) {
    this.pwd = pwd;
} 
```

它们遥不可及，但为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T21:18:51.583

您的`h:inputText`字段必须在表单内。尝试以下操作：

```
<h:form>
    <fieldset>
        <div>
            <h:outputLabel class="Float" for="username" value="Username"/>
            <h:inputText id="username" rendered="true" value="#{Register.username}" label="Username">
                <f:validateLength minimum="3" maximum="8"/>
            </h:inputText>
        </div>
        <div>
            <h:outputLabel class="Float" for="password" value="Passwort"/>
            <h:inputText id="password" rendered="true" value="#{Register.password}" label="Passwort">
                <f:validateLength minimum="3" maximum="8"/>
            </h:inputText>
        </div>
    </fieldset>

    <div id="buttons">
        <h:commandButton id="enter" accesskey="r" value="Registrieren" action="#{Register.registerPlayer()}" immediate="true"/>
        <h:outputText value="#{msg.wrongpwd}" rendered="#{loginCtrl.loginfailed}" style="color: red"/>
        <h:messages style="color: red"/>
    </div>
</h:form> 
```

现在表单包括`inputText`字段和`commandButton`s

# string - 将整数作为字符串添加到变量 bash

> ID：10474250
> 
> 赞同：10
> 
> 时间：2012-05-06T21:00:00.880
> 
> 标签：string, bash, int

我想通过将随机整数添加到变量来创建字符串来输出字符串。然而，Bash 只是将数字相加。

```
#!/bin/bash
b=""
for ((x=1; x<=3; x++))
do
 number=$RANDOM
 let number%=9
 let b+=$number
done
echo ${b} 
```

假设每个随机数都是 1，脚本会输出 3 而不是 111。如何实现 111 的预期结果？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-06T21:07:09.667

有几种可能性可以实现您想要的行为。让我们首先检查一下你做了什么：

```
let b+=$number 
```

运行`help let`：

```
let: let ARGUMENT...
    Evaluate arithmetic expressions. 
```

这就解释了为什么`let b+=$number`执行 to 的整数加法 ( , `1`, `2`)`3`而不是字符串连接。`$number``b`

只需删除，就会发生`let`所需的行为`1`, 。`11``111`

执行字符串连接的另一种方法：

```
b="$b$number" 
```

是的，只是“让`b`成为连接`b`and的结果`number`。

作为旁注，`b=""`相当于`b=`as`""`被扩展为一个空字符串。对变量的模块操作可以通过算术扩展来完成：`number=$((RANDOM%9))`.

# php - 将 PHP 数组传递到没有 AJAX 或 JQuery 的 Javascript 数组中？

> ID：10474255
> 
> 赞同：1
> 
> 时间：2012-05-06T21:01:15.367
> 
> 标签：php, javascript, arrays

## 我在php中有一堆并行数组

```
$phoneNums = array();
$minutesUsed = array();
$plans = array();
$charges = array(); 
```

* * *

我正在尝试将它们放入 JS 中的数组中，以便我可以访问它们并将值打印到页面中

```
var phoneNums = <?php echo $phoneNums ?>;
var minutesUsed = <?php echo $minutesUsed ?>;
var plans = <?php echo $plans ?>;
var charge = <?php echo $charges ?>; 
```

最终发生的是我的价值观最终未定义。如何在不使用 AJAX 或 JQuery 的情况下将数组从 php 传递给 js？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T21:03:24.263

回显 PHP 数组不会打印其内容。即便如此，它也不会采用 Javascript 所期望的相同格式`[1,2,3]`（`{'x':1,'y':2}`

[JSON](http://json.org/)是 Javascript 对象表示法。如果你用 JSON 编码你的数据（在 PHP 中，你可以[`json_encode()`](http://php.net/manual/en/function.json-encode.php)这样做），它对于 Javascript 是绝对可以接受的，所以你可以简单地打印它：

```
var phoneNums = <?php echo json_encode($phoneNums); ?>; 
```

[演示](http://codepad.viper-7.com/lHqmCr)

# embedded - 通过 PS/2 端口发送数据

> ID：10474257
> 
> 赞同：0
> 
> 时间：2012-05-06T21:01:28.430
> 
> 标签：embedded, mouse, arm, lpc, ps2

我正在为 LPC2148 从头开始​​编写鼠标驱动程序，但我坚持这一点。我可以从键盘接收数据，但鼠标需要向其发送命令代码。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T07:55:20.260

该信息广泛可用：

*   [PS/2 鼠标接口 - Computer-Engineering.org](http://www.computer-engineering.org/ps2mouse/)
*   [PS/2 鼠标 - Centrum voor Wiskunde en Informatica](http://www.scs.stanford.edu/11wi-cs140/pintos/specs/kbd/scancodes-12.html)
*   [PS/2 鼠标命令 - OSDev Wiki](http://wiki.osdev.org/Mouse_Input#PS2_Mouse_Commands)
*   [PS/2 命令-Altuim](http://wiki.altium.com/display/ADOH/PS2+Commands)

[这个](http://www.computer-engineering.org/ps2keyboard/)来自 Computer-Engineering.org 的资源详细描述了 PS/2 接口。键盘和鼠标控制器都有输出*和*输入端口。您可以向键盘和鼠标发送命令。该页面包含写键盘的PIC汇编代码示例，写鼠标的方法相同。

# javascript - 单击时使用 Javascript 加载图像

> ID：10474258
> 
> 赞同：0
> 
> 时间：2012-05-06T21:01:28.637
> 
> 标签：javascript

![在此处输入图像描述](../Images/c410199f0f6691540ec52222217738f8.png)

我正在尝试做与上图类似的事情，我正在使用 Wordpress，我将使用 PHP 构建 HTML 输出，但是当单击缩略图时，我需要将更大的图像加载到大图像插槽中。

我在下面找到了一个使用此方法的网站 pof.com，但是当我尝试它时，我得到了下面的错误。请帮忙？

```
<script>
function B(strNewImage, caption) {
  document.images['MP'].src = strNewImage;
  document.getElementById("icaption").innerHTML = caption;
}
</script>

<img src="http://default_image.jpg" border="0" id="mp" name="MP">

<a href="javascript: B('image_2.jpg','test')"><img src="thumbnails/image_2.jpg" border="0"></a>
<a href="javascript: B('image_3.jpg','test')"><img src="thumbnails/image_3.jpg" border="0"></a>
<a href="javascript: B('image_4.jpg','test')"><img src="thumbnails/image_4.jpg" border="0"></a>
<a href="javascript: B('image_5.jpg','test')"><img src="thumbnails/image_5.jpg" border="0"></a> 
```

错误：

```
Uncaught ReferenceError: B is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T22:25:54.920

您的代码正在运行，[DEMO](http://jsfiddle.net/9qFMk/9/)，这一切都与您定义`B`函数的位置有关。或者可能由于未定义类型的脚本标签而无法正常工作。

```
<script type="text/javascript">
function B(strNewImage, caption) {
  document.images['MP'].src = strNewImage;
  document.getElementById("icaption").innerHTML = caption;
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T21:42:48.037

尝试包裹

```
window.onload = function() {
...
} 
```

如果你有 jQuery：

```
$(function(){
...
}); 
```

或者将脚本移动到页面底部。

# php - 如何使用ajax将数组从php返回到javascript

> ID：10474259
> 
> 赞同：9
> 
> 时间：2012-05-06T21:01:31.880
> 
> 标签：php, javascript, ajax

我有这个ajax代码

```
xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange=function(){
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById('addIO').innerHTML+=xmlhttp.responseText;
    }
}
xmlhttp.open("GET","http://localhost/Mar7ba/Ontology/getRelatedConceptsAndRelations/3/TRUE",true);
xmlhttp.send(); 
```

我有一个 php 数组

`$cars=array("Saab","Volvo","BMW","Toyota");`

如何将数组 $cars 发送到我的 javascript？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-06T21:07:36.520

## PHP

```
echo json_encode($cars); 
```

## JavaScript

**本机**：

```
var foo = JSON.parse(xmlhttp.responseText); 
```

**使用 jQuery**：

```
var foo = $.parseJSON(xmlhttp.responseText);
//or
$.getJSON("url", function(data){
    //data is your array
}); 
```

* * *

## 更新

```
if(xmlhttp.readyState==4 && xmlhttp.status==200){
     //document.getElementById('addIO').innerHTML+=xmlhttp.responseText;
    var cars = JSON.parse(xmlhttp.responseText);  //cars will now be the array.
     //Do whatever you want here.
    $("#addIO").html(cars.join(", "));     //Join array with ", " then put it in addIO
} 
```

如果您想使用 jQuery，请将其放入`<head>`：

```
<script type="text/javascript" src="link/to/the/file/jquery.js"></script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T21:02:37.353

使用[JSON](http://json.org)：

```
echo json_encode($cars); 
```

# php - 从 URL 中删除查询字符串并重定向的重写规则

> ID：10474260
> 
> 赞同：0
> 
> 时间：2012-05-06T21:01:39.530
> 
> 标签：php, .htaccess, mod-rewrite, redirect, http-status-code-301

有人通过向我网站上的随机页面添加问号和随机字符来创建错误链接，格式如下：

*   www.mydomain.com/?57237933 **（**仅限数字）
*   www.mydomain.com/folder1/?709d0c24941 **（**带字母）
*   www.mydomain.com/folder1/page-name/ **?20?9h572**（双问号）

我找到了 robots.txt 的阻止规则，但需要更强大的 htaccess 解决方案。我正在寻找一个 htaccess 重写规则，`?`它可以从任何 URL 中删除它及其后面的所有内容，从而将访问者重定向到原始 URL。

例如，我找到了要删除的解决方案，`?id=123`但是当`id=`不存在时，我还没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:11:23.083

我现在无法对其进行测试，但我认为这将是您问题的解决方案。

```
RewriteRule   ^([^?]+)\?.*$ $1 [L] 
```

请验证它并告诉我它是否正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:13:30.447

以下两条规则检查查询字符串的存在并重定向到页面的无查询字符串版本：

```
RewriteCond %{QUERY_STRING} !=""
RewriteRule ^(.*) /$1? [R,L] 
```

由于您担心搜索引擎会抓取错误版本的页面，因此请考虑`R=301`在测试后更改为。此外，您可能需要考虑返回 404 错误以阻止使用查询字符串并告诉搜索引擎没有 `http://mydomain.com/page/?1234`.

# android - 谷歌地图的 onTap 总是被称为 android

> ID：10474261
> 
> 赞同：2
> 
> 时间：2012-05-06T21:01:46.307
> 
> 标签：android, google-maps, google-maps-markers

这是我的地图活动：

```
public class MapsActivity extends MapActivity 
{    
     MapView mapView; 
     MapController mc;
     GeoPoint p; 
     GeoPoint geopoint;
     GeoPoint geopoint_2;
    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map_w);

        mapView = (MapView) findViewById(R.id.mapView);
        LinearLayout zoomLayout = (LinearLayout)findViewById(R.id.zoom);  
        @SuppressWarnings("deprecation")
        View zoomView = mapView.getZoomControls(); 
        zoomLayout.addView(zoomView, 
            new LinearLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, 
                LayoutParams.WRAP_CONTENT)); 
        mapView.displayZoomControls(true);
        mapView.setSatellite(true);
        mc = mapView.getController();
        String coordinates[] = {"38.037132", "24.494019"};
        double lat = Double.parseDouble(coordinates[0]);
        double lng = Double.parseDouble(coordinates[1]);

        p = new GeoPoint(
            (int) (lat * 1E6), 
            (int) (lng * 1E6));

        mc.animateTo(p);
        mc.setZoom(9); 

        geopoint_2 =  new GeoPoint((int) (39.204449 *1E6), (int) (24.307251* 1E6));
        mapView.getOverlays().add( new  DrawableMapOverlay(this,p,R.drawable.pushpin, "test"));
        mapView.getOverlays().add( new  DrawableMapOverlay(this,geopoint_2,R.drawable.pushpin, "test_2"));
        mapView.invalidate();

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    } 
```

这是我的 DrawableMapOverlay

```
public class DrawableMapOverlay extends Overlay {

  private static final double MAX_TAP_DISTANCE_KM = 3;
  // Rough approximation - one degree = 50 nautical miles
  private static final double MAX_TAP_DISTANCE_DEGREES = MAX_TAP_DISTANCE_KM * 0.5399568 * 50;
  private final GeoPoint geoPoint;
  private final Context context;
  private final int drawable;
  private final String workerName;
  /**
   * @param context the context in which to display the overlay
   * @param geoPoint the geographical point where the overlay is located
   * @param drawable the ID of the desired drawable
   */
  public DrawableMapOverlay(Context context, GeoPoint geoPoint, int drawable,String workerName) {
    this.context = context;
    this.geoPoint = geoPoint;
    this.drawable = drawable;
    this.workerName = workerName;
  }

  @Override
  public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
    super.draw(canvas, mapView, shadow);

    // Convert geo coordinates to screen pixels
    Point screenPoint = new Point();
    mapView.getProjection().toPixels(geoPoint, screenPoint);
    Paint paint = new Paint();
    // Read the image
    Bitmap markerImage = BitmapFactory.decodeResource(context.getResources(), drawable);
    paint.setStrokeWidth(1);
    paint.setARGB(150, 000, 000, 000);
    paint.setStyle(Paint.Style.STROKE);
    // Draw it, centered around the given coordinates
    canvas.drawBitmap(markerImage,
        screenPoint.x - markerImage.getWidth() / 2,
        screenPoint.y - markerImage.getHeight() / 2, null);
    canvas.drawText(workerName, screenPoint.x- markerImage.getWidth() / 2,  screenPoint.y - markerImage.getHeight() / 2 , paint);
    return true;
  }

  @Override
  public boolean onTap(GeoPoint p, MapView mapView) {
    // Handle tapping on the overlay here
      System.out.println("here is is clicked");
     // final Intent myIntent = new Intent(getApplicationContext(), Places.class);
      new AlertDialog.Builder(context)
              .setTitle("Title")
             .setMessage("Beach")
              .setPositiveButton("Yes",
                      new DialogInterface.OnClickListener() {
                         // @Override
                          public void onClick(DialogInterface dialog, int which) {
                         }
                      })
              .setNegativeButton("No",
                      new DialogInterface.OnClickListener() {
                         // @Override
                          public void onClick(DialogInterface dialog, int which) {
                          }

                      }).show();
    return true;
  }
} 
```

我想在点击标记时查看警报对话框，如果我按是，请执行某些操作。问题是每当我点击时都会调用 onTap，而不仅仅是在标记上（如果我按下地图的不相关点，我也会看到警报对话框。）

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T22:10:51.923

您需要覆盖覆盖项的索引`onTap(int)`所在的方法。 来自以下文档：`int`
`onTap(GeoPoint, MapView)`

> 处理一个点击事件。只有当它落在项目上时才会处理点击，并且您已覆盖 onTap(int) 以返回 true。

所以基本上不是使用`onTap(GeoPoint,MapView)`，而是使用`onTap(int)`。

*   [示例用法](https://github.com/commonsguy/cw-android/blob/master/Maps/NooYawk/src/com/commonsware/android/maps/NooYawk.java#L129)
*   [在这里](http://developer.android.com/resources/tutorials/views/hello-mapview.html)查看第 2 部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:04:09.053

如果要使用`onTap(GeoPoint,MapView)`，则必须使用`region.contains(point.x, point.y)`检查给定的分接点是否落入该区域。

# scheme - 如何正确识别标识符？

> ID：10474268
> 
> 赞同：0
> 
> 时间：2012-05-06T21:02:17.867
> 
> 标签：scheme, racket

我在想以下任何一个

> （定义（ID？x）（符号？x））

说我有以下

> （定义列表'（添加4 5））

我想简单地检查“add”是标识符还是关键字。所以我在考虑以下

> (定义 (ID?x) (char?x))

我什至在考虑`and`有条件的

> (定义 (ID?x) (and (char?x)(symbol?x))

但我的问题是，对于符号，它将采取诸如`@`

而对于`char`？方法它不会接受具有多个字符的标识符。

and 方法没有意义。我正在处理一个列表，所以我认为`(string? x)`它不会起作用，因为它会考虑整个列表。任何建议都会很棒。谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T21:07:04.153

Scheme 没有“关键字”的概念（至少不是您正在谈论的类型；像 Racket 和 Guile 这样的一些实现有关键字参数的关键字，例如`#:foo`）。因此，根据我从您的问题中读到的内容，任何作为符号读入的内容在评估时都将用作标识符。这样，`symbol?`就足够了。

如果您确实想测试 Racket 关键字，可以使用`keyword?`. 此类关键字未通过`symbol?`测试。

```
-> (symbol? 'foo)
#t
-> (keyword? 'foo)
#f
-> (symbol? '#:foo)
#f
-> (keyword? '#:foo)
#t 
```

# ruby-on-rails - Rails 服务器不再运行：没有要加载的文件 -- savon (LoadError)

> ID：10474272
> 
> 赞同：0
> 
> 时间：2012-05-06T21:02:38.070
> 
> 标签：ruby-on-rails, macos, rvm, activesupport

我有一台全新的 MacBook Pro，大约在 2012 年 5 月 1 日购买。在我购买时，显然 Xcode 中的 C 编译器存在问题，这意味着必须安装 GCC 才能使 rails 工作。所以我目前的设置包括：

家酿

导轨 3.2.2

虚拟机

当前项目的 Ruby 1.9.3-p0

ZShell (oh-my-zsh)

Git 和 GitFlow

Xcode

海合会

当前失败的项目是使用 Ruby 1.9.3-p0 的 Rails 3 项目

我已经广泛搜索并查看了整个stackoverflow，并且我看到有人遇到类似问题但似乎是同样的问题。

经过四个小时的搜索，我终于决定在这里发帖。

**这是问题所在：**

我不能在这个项目上运行 rails。这是一个从 repo 克隆的项目。该项目在我的 Ubuntu 机器上运行良好，具有相同版本的 Rails 和相同的 ruby​​ 版本。

我可以从头开始在一个新的 Rails 项目中创建和搭建脚手架。但是这个特殊的项目：甚至不能启动一个 Rails 服务器。当我这样做时，我得到以下错误案例，我无法弄清楚：

```
rails s
=> Booting WEBrick
=> Rails 3.2.2 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/Users/JohnConq/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-     3.2.2/lib/active_support/dependencies.rb:251:in `require': no such file to load -- savon   (LoadError)

from /Users/JohnConq/.rvm/gems/ruby-1.9.3-p0/gems/activesupport- 3.2.2/lib/active_support/dependencies.rb:251:in `block in require' 
```

.... 等等。其他错误只是由初始错误触发的一系列问题。

所以我查看了第 251 行的 dependencies.rb，它只是这个函数中的第二行：（以 load_dependency 开头的行）

```
def require(file)

    result = false
    load_dependency(file) { result = super }
    result
end 
```

所以我不确定传递给该函数以触发错误的内容。

这很有趣，因为这个项目昨天在同一台 Mac 机器上工作。然而，在 Xcode 更新之后，一切似乎都开始失败了。我重新安装了 GCC 并希望能修复它，但没有运气。我在重新安装 GCC 后删除了 RVM 中的 gemset，然后进行了 bundle install ，从而创建了一个新的 gemset。还是不行。

我无计可施。这个项目昨天刚刚在同一台 Mac 上运行。我不知道怎么了。有任何想法吗 ？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:54:59.727

看起来您可能有权限问题，请尝试：

```
sudo rm -rf /Users/JohnConq/.rvm/*/yaml* /Users/JohnConq/.rvm/usr/
sudo chown -R JohnConq /Users/JohnConq/.rvm/ 
```

还要确保你有正确的 GCC - 安装 osx-gcc-installer

# android - 是否可以从应用市场下载的应用中获取 .java、.xml 和 eclipse 中的图像资源的视图？

> ID：10474274
> 
> 赞同：1
> 
> 时间：2012-05-06T21:03:06.563
> 
> 标签：android, eclipse, google-play

我正在阅读 mybringback android 开发[教程](http://www.youtube.com/watch?v=Oz8KG4wwBzA&list=PL2F07DBCDCC01493A&index=134&feature=plpp_video)。

我从应用市场下载了我们正在开发的系列教程中的应用，名称为：thenewboston basics

我想知道我是否可以在 eclipse 中查看这个应用程序的源代码，以便我可以更好地从教程中学习。这可能吗？如果是这样，我该怎么做？如果没有，你知道我可以在哪里下载这些教程中制作的应用程序的源代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T05:53:57.050

我不知道网站上是否上传了完整的应用程序代码，但你可以去[mybringback](http://www.mybringback.com) 去 Courses->Android New Boston-> 去第三个条目。在那里你可以找到一些代码。

# backbone.js - 更新 Backbone.js 视图变得一团糟

> ID：10474275
> 
> 赞同：3
> 
> 时间：2012-05-06T21:03:10.270
> 
> 标签：backbone.js

给定一个模型：

```
MyModel = Backbone.Model.extend({
  defaults: {
    name: '',
    age: -1,
    height: '',
    description: ''
  }
}); 
```

以及将模型呈现为列表的视图：

```
MyView  = Backbone.View.extend({
  tagName: 'ul',
  className: 'MyView',

  render() {
    var values = {
      name: this.model.get('name'),
      age: this.model.get('age'),
      height: this.model.get('height'),
      description: this.model.get('description')
    }

    var myTemplate = $('#MyView-Template').html();
    var templateWithValues = _.template(myTemplate , values);
  }
}); 
```

和视图加载的模板：

```
<script type="text/template" id="MyView-Template">  
  <li class="name"><%= name %></li>
  <li class="age"><%= age %></li>
  <li class="name"><%= height%></li>
  <li class="name"><%= description%></li>
</script> 
```

一切正常，虽然这是一个人为的例子，但真实的代码在模型中有很多很多的属性。我遇到的问题是如何**处理**模型的更新。

我创建了一个 HTML 表单，其中每个字段都有一个适当的输入元素。该表单被建模并作为模板加载：

```
<script type="text/template" id="MyEditView-Template">  
  <input type"text" value="<%= name %>" /> <br />
  <input type"text" value="<%= age%>" /> <br />
  <input type"text" value="<%= height%>" /> <br />
  <input type"text" value="<%= description%>" /> 
</script> 
```

并加载到视图中：

```
MyEditView  = Backbone.View.extend({
      tagName: 'form',
      className: 'MyEditView',

      render() {
        var values = {
          name: this.model.get('name'),
          age: this.model.get('age'),
          height: this.model.get('height'),
          description: this.model.get('description')
        }

        var myTemplate = $('#MyEditView-Template').html();
        var templateWithValues = _.template(myTemplate , values);
      }
    }); 
```

当用户保存表单时，新值会在模型 (MyModel) 中设置。但是我不想重新渲染整个原始视图，它需要太长时间并且有很多嵌套元素。我只想更新在模型中更改了其值的 HTML 元素。

问题是如何优雅地将模型的属性链接到 HTML 元素，以便我可以对**已渲染的视图**执行以下操作：

1.  迭代模型的属性。
2.  确定哪些属性已被修改。
3.  仅更新已修改属性的 UI。
4.  隐藏任何以前呈现的不应再显示的属性的 UI。

有一刻我有一个 JavaScript 查找表（只是一个对象）的相当丑陋的解决方案，它将属性名称映射到 HTML 元素字符串：

```
var AttributesMap = {
    name: {
        htmlRef: 'li.name',
        attributeName: 'name'
    },
    age: {
        htmlRef: 'li.age',
        attributeName: 'age'
    }
    ...
} 
```

这感觉很hacky，并导致了一些非常臃肿的代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T05:31:03.770

您的帖子中实际上隐藏了两个问题。您对模型的属性有疑问，并且您不知道如何订阅模型更改事件。幸运的是，使用backbone.js 可以轻松实现这两者。将您的视图代码更改为以下

### 1

```
render: function () {
    var model = this.model;
    $(this.el).empty().html(_.template(this.template, this.model.toJSON()))
    return this;
} 
```

where[`el`](http://documentcloud.github.com/backbone/#View-el)是定义容器的视图的属性。[toJSON()](http://documentcloud.github.com/backbone/#Model-toJSON)是一种方法，您可以在模型上调用以序列化可以通过网络传输的格式。

### 2

[视图应该在其初始化](http://documentcloud.github.com/backbone/#View-constructor)函数中订阅模型更改事件，或者更恰当地使用[委托事件](http://documentcloud.github.com/backbone/#View-delegateEvents)支持。当模型属性发生变化时，会在该模型上调用一个`change`事件，您可以像[这里](http://documentcloud.github.com/backbone/#Events-on)和下面的示例一样订阅该事件。

```
window.ListView = Backbone.View.extend({
    initialize: function () {
        //pass model:your_model when creating instance
        this.model.on("change:name", this.updateName, this);
        this.model.on("change:age", this.changedAge, this);
    },
    render: function () {
        var model = this.model;
        $(this.el).empty().html(_.template(this.template, this.model.toJSON()))
        return this;
    },
    updateName: function () {
        alert("Models name has been changed");
    },
    changedAge: function () {
        alert("Models age has been changed");
    }
}); 
```

### JsBin 示例

[http://jsbin.com/exuvum/2](http://jsbin.com/exuvum/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T22:34:33.257

我遇到了一个类似的问题，我希望模板只显示有数据的字段。我从下划线模板方面解决了这个问题，因为 <%= undefinedKey %> 引发了异常。[对我来说，解决方案](https://github.com/documentcloud/underscore/issues/237#issuecomment-1781951)是将包装器对象传递给包含模型数据的模板。模型数据的包装如下所示：

```
this.$el.html(this.template({my_data: this.model.toJSON()})); 
```

您的模板检查是否存在所需的属性：

```
<% if(my_data.phone) { %><p><%= my_data.phone %> </p><% } %> 
```

每次模型更改时，您都可以自动渲染整个视图。使用此方法，新值将出现，删除的值将从 UI 中消失。

与您的要求相关的一些进一步信息：

> 迭代模型的属性。确定哪些属性已被修改。

如果您想知道自上次触发模型的“更改”事件以来哪些属性发生了变化，您可以使用[主干模型的 changedAttributes](http://backbonejs.org/#Model-changedAttributes)方法。

> 仅更新已修改属性的 UI。隐藏任何以前呈现的不应再显示的属性的 UI。

代替为发生的每个属性更改渲染整个视图，您可以通过使每个 UI 字段成为离散的主干视图来仅更新 UI 中已更改属性的部分。所有视图都将监听共享模型以获取特定模型属性的更改事件：

```
 this.model.on("change:phone", this.render, this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-27T14:24:14.783

好吧，Backbone 使用事件委托，并且在替换 this.el 内容后不需要重新订阅元素事件。但是每次模板同步都会破坏 DOM 子树，这意味着您会丢失表单的状态。只需尝试为您的模型订阅输入/更改事件。所以用户输入输入元素和表单验证。恢复控件的状态（比如说 input[type=file]）将是具有挑战性和资源匮乏的。

我相信最好的方法是使用基于 DOM 的模板引擎，它只在需要的地方更新目标元素。例如我的是[https://github.com/dsheiko/ng-template](https://github.com/dsheiko/ng-template)

你可以有这样的模板：

```
<form id="heroForm" novalidate>
  <div class="form-group">
    <label for="name">Name</label>
    <input id="name" type="text" class="form-control" required >
    <div class="alert alert-danger" data-ng-if="!name.valid">
      Name is required
    </div>
  </div>
  <div class="form-group">
    <label for="power">Hero Power</label>
    <select id="power" class="form-control"  required>
      <option data-ng-for="let p of powers" data-ng-text="p" >Nothing here</option>
    </select>
    <div class="alert alert-danger" data-ng-if="!power.valid">
      Power is required
    </div>
  </div>
   <button type="submit" class="btn btn-default" data-ng-prop="'disabled', !form.valid">Submit</button>
</form> 
```

在这里，我们绑定了模型`name`，`power`并且`form`。每当它们的状态发生变化时（例如，当用户键入时），模板就会做出反应。它可能隐藏/显示错误消息，或禁用/启用提交按钮。

如果它很有趣 - 如何将它与 Backbone 捆绑在一起，这里有一本免费的在线小书[https://dsheiko.gitbooks.io/ng-backbone/](https://dsheiko.gitbooks.io/ng-backbone/)

# android - Android时区混淆

> ID：10474277
> 
> 赞同：1
> 
> 时间：2012-05-06T21:03:20.020
> 
> 标签：android, date, timezone, timezone-offset

我很困惑，为什么在设置 -> 日期和时间 -> 选择时区（取消选中自动）下，Android 说东部时间是 GMT-4:00，而[在其他地方](http://wwp.greenwichmeantime.com/time-zone/definition/index.htm)，东部时间是 GMT-5？我问的原因是我试图将日期时间值转换为用户的当前时区。

![在此处输入图像描述](../Images/7881d61ebfc6a67e372e201fdb211429.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T21:21:53.703

是从夏令时开始的吗？11 月，当我们不再“节约日光”时，我们将是 GMT-5:00。

# java - Java 图形未显示

> ID：10474280
> 
> 赞同：3
> 
> 时间：2012-05-06T21:03:34.933
> 
> 标签：java, graphics

我对java有点陌生，但我在其他编程语言方面有很多经验。现在我正在尝试创建一个简单的“焦土”风格的游戏，但我无法让景观出现。我正在使用 2d 高度场来表示地形。在我的 init 方法中，我使用一些 sin 函数和随机数生成地形。我在网上的教程中发现了这种技术。

```
float flat, peak;
flat = 70; peak = 50;

int rand1, rand2, rand3;
rand1 = gen.nextInt() % 4 + 1;
rand2 = gen.nextInt() % 4 + 1;
rand3 = gen.nextInt() % 4 + 1;

for (int a=0; a<750; a++) {
    double height = peak / rand1 * Math.sin((double)a / flat * rand1 + rand1);
    height += peak / rand2 * Math.sin((double)a / flat * rand2 + rand2);
    height += peak / rand3 * Math.sin((double)a / flat * rand3 + rand3);

    height += 250;
    heights[a] = (int)height;
} 
```

然后在我的`paint()`方法中，我绘制地形，高度表示为屏幕底部的像素，长 750 像素，高 500 像素。

```
public void paint(Graphics g)
{
    g.setColor(Color.green);

    for (int a=0; a<750; a++) {
        g.fillRect(a, 500-heights[a], 1, heights[a]);
    }
} 
```

但是，我在让地形出现时遇到了一个主要问题。大约有一半的时间它显示出来，看起来很漂亮和随机，这正是我想要的。其他时候它根本不显示，我的 heights[] 数组中的所有值都设置为零，就好像从未调用过 init 方法一样。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:35:37.960

这是你的答案：

当你拿到时

```
rand1 = 0 (or 1)
rand2 = 0 (or 1)
rand3 = 0 (or 1), 
```

那是失败的时候。mod %4 有时会返回负数（特别是 -1），然后 1 - 1 为 0；因此，您的身高得到了 NaN，出于某种原因，这又回到了 0 中。

顺便提一句。似乎如果您在每次循环迭代中都没有收到新的随机数，那么您只是在利用双精度数的不准确性多次计算您插入完全相同的值的数学问题的答案.

你问：其他时候它根本不显示，我的 heights[] 数组中的所有值都设置为零，就好像从未调用过 init 方法一样。有谁知道发生了什么？

下一次，为什么不做我做的事情。当你遇到问题时，为你的初始值写一个打印语句。验证您的假设（例如，我认为 (x mod 4) + 1）不能为负。问题发生*时*，rand1、rand2、rand3 的值是多少。好吧，那是怎么发生的？这对每次调用 Sin(..) 后的高度有何影响？只需通过打印语句将情况加起来，找出何时中断、如何中断以及问题何时开始。

```
int[] heights = new int[750];
public MathTest()
{
    Random r = new Random();
    float flat;
    float peak;
    flat = 70;
    peak = 50;

    int rand1;
    int rand2;
    int rand3;

    int x = r.nextInt();
    int y = r.nextInt();
    int z = r.nextInt();

    System.out.println("x : " + x);
    System.out.println("y : " + y);
    System.out.println("z : " + z);

    System.out.println("-210263172");
    System.out.println("-724188689");
    System.out.println("-1092425465");

    System.out.println(-210263172 % 4);
    System.out.println(-724188689 % 4);
    System.out.println(-1092425465 % 4);

    rand1 = x % 4 + 1;
    rand2 = y % 4 + 1;
    rand3 = z % 4 + 1;

    for( int a = 0; a < 750; a++ )
    {
        System.out.println("rand1: " + rand1);
        System.out.println("rand2: " + rand2);
        System.out.println("rand3: " + rand3);
        double height =
            peak / rand1 * Math.sin((double) a / flat * rand1 + rand1);
        height +=
            peak / rand2 * Math.sin((double) a / flat * rand2 + rand2);
        height +=
            peak / rand3 * Math.sin((double) a / flat * rand3 + rand3);

        height += 250;
        heights[a] = (int) height;
    }
    int i;
    for(i = 0; i < 23; i++)
    {
        System.out.println("heights[" + i + "]: " + heights[i]);
    }

} 
```

# algorithm - 尽可能多地找到与多边形相交的射线

> ID：10474287
> 
> 赞同：10
> 
> 时间：2012-05-06T21:04:09.280
> 
> 标签：algorithm, sorting, data-structures

这是一个有趣的练习：

> 令 P 是一个简单但不一定是凸多边形，q 是一个不一定在 P 中的任意点。
> 
> 设计一种有效的算法来找到一条源自 q 且与 P 的最大边数相交的线段。
> 
> 换句话说，如果站在 q 点，你应该把枪瞄准哪个方向，这样子弹才能穿过最多的墙壁？
> 
> 子弹穿过 P 的一个顶点，只获得一堵墙的功劳。
> 
> O(n log n) 算法是可能的。n 是顶点或边的数量，因为它是一个多边形，边的数量大致等于顶点的数量。

这是我的想法：

首先将 q 与 P 中的所有顶点（假设有 N 个顶点）连接起来。将有 N 行，或 N-1 对行。

最后的射击线必须在这些对之间。所以我们必须找到包含最多边数的对。

我不认为这个解决方案是 O(n log n)。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T21:32:14.353

好吧，首先将点坐标转换为以 P 为中心的极坐标系。

*   不失一般性，我们选择顺时针方向作为角度坐标的特殊方向。
*   现在让我们沿着多边形的所有边按顺序进行循环行走，让我们注意这些边的起点和终点，沿着相对于 P 的顺时针方向行走。
*   让我们将这种边缘的终点称为“屁股”，将起点称为“头”。这一切都应该在 O(n) 中完成。现在我们必须对这些头和屁股进行排序，所以使用快速排序可能是`O(nlog(n))`. 我们按照它们的角度 (φ) 坐标从最小的 φ 向上对它们进行排序，确保在 φ 坐标相等的情况下，头部被认为小于屁股（这对于遵守问题的最后一条规则很重要）。
*   完成后，我们将从最小的 φ 开始遍历它们，每当遇到枪托时递增运行总和，每当遇到头时递减，注意全局最大值，这将是 φ 坐标上的间隔。这也应该在 O(n) 中完成，因此总体复杂度为`O(nlog(n))`.

现在你能告诉我你为什么要问这种问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-26T05:51:29.523

我使用了 Boris Stitnicky 的算法并用 Java 编写了我的解决方案。但是我选择了逆时针方向，为了检查区间的哪一点是起点，哪一点是区间的终点，我使用了叉积。你可以在这里找到它：[https ://github.com/Katkov/algorithms/blob/master/BulletAgainstWalls.java](https://github.com/Katkov/algorithms/blob/master/BulletAgainstWalls.java)

# bazaar - 删除 Bazaar 中的父分支

> ID：10474291
> 
> 赞同：3
> 
> 时间：2012-05-06T21:04:35.973
> 
> 标签：bazaar

鉴于以下情况：

```
$ bzr init-repo foo
$ bzr init foo/bar
$ cd foo/bar
$ echo 'some text' > a_file
$ bzr add a_file 
$ bzr commit -m 'a commit message' 
$ cd ..
$ bzr branch bar trunk
$ bzr rmbranch bar
bzr: ERROR: Branch is active. Use --force to remove it. 
```

`bzr rmbranch --force`在这种情况下做 a 是否安全？没有更优雅的解决方案吗？

做了之后`bzr rmbranch --force`，`bzr info`仍然显示`../foo/bar`为 的父分支`trunk`，我该如何改变呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T07:43:56.157

`bzr rmbranch`只需删除给定位置的分支。如果您需要删除服务器上的分支，这非常方便。

在本地磁盘上，如果要删除某些分支和树，只需使用`rm`或命令（取决于您的操作系统/shell）就可以了。`del`

注意：`rmbranch`如果存在树，则不会删除树，只删除分支对象。（在您的示例中，工作树实际上是存在的）。对于本地工作区，使用起来要简单得多`rm`。

父分支记录在`.bzr/branch/branch.conf`. 您可以编辑该配置文件。它不影响分支删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T23:29:06.847

（假设本地“独立”bzr 共享存储库。）

使用的有趣的 bzr 命令：`bzr init-repo`, `bzr init`, `bzr branch`, `bzr info`, `bzr add`, `bzr commit`, `bzr remove-tree`, `bzr remove-branch`.

## 在共享存储库中设置单个分支

`/tmp`在您的目录中设置一个共享存储库以供使用。

```
$ cd /tmp/
$ bzr init-repo test-shared-repo
$ bzr info test-shared-repo/ 
```

产量：

```
Shared repository with trees (format: 2a)
Location:
  shared repository: test-shared-repo 
```

然后我们创建一个地方来在该共享仓库中存储一些代码：

```
$ bzr init test-shared-repo/first 
```

产生以下结果，这意味着“首先”正在使用我们在上面创建的共享存储库（它也恰好存储在那里）：

```
Using shared repository: /tmp/test-shared-repo/ 
```

然后我们进入共享 repo 目录并获取共享 repo 的信息：

```
$ cd test-shared-repo
$ bzr info 
```

这会产生以下内容，重申我们创建它时给出的内容：

```
Shared repository with trees (format: 2a)
Location:
  shared repository: . 
```

让我们也检查一下我们创建的“第一个”事物的信息：

```
$ bzr info first/ 
```

产生以下内容，表明“第一个”是使用位于以下位置的共享存储库的存储库分支`.`：

```
Repository tree (format: 2a)
Location:
  shared repository: .
  repository branch: first 
```

## 将代码添加到第一个并从中分支第二个

让我们创建、添加和提交一些“代码”到我们的“第一个”分支，然后返回到共享仓库：

```
$ cd first/
$ echo "some text" > a_file.txt
$ bzr add a_file.txt
$ bzr commit -m 'a commit message' 
$ cd .. 
```

现在从“第一”分支到“第二”：

```
$ bzr branch first second 
```

产生以下结果，这表明 "second" 引用了 "first"：

```
Repository tree (format: 2a)
Location:
  shared repository: .
  repository branch: second

Related branches:
  parent branch: first 
```

但是，如果您检查`bzr info first`，则可以确认没有提及“第二”。确认“第二”中有一些东西：

```
$ ls second
a_file.txt 
```

## 删除其中一个分支

假设我们已经完成了“第一”或“第二”，因为我们已经完成了错误修复等。问题是我们目前不能在其中任何一个上使用“bzr remove-branch *”*：

```
$ bzr remove-branch first
bzr: ERROR: Branch is active. Use --force to remove it.
$ bzr remove-branch second
bzr: ERROR: Branch is active. Use --force to remove it. 
```

然而，我发现了一个叫做`bzr remove-tree`的东西，这似乎可以解决问题。它会*抹去*内容（我认为如果没有未提交的更改），所以要小心！

```
$ bzr remove-tree second
$ ls -a second
.  ..  .bzr 
```

文件在“第二”中消失了。但是还是有一些提到“第一”：

```
$ bzr info second
Repository branch (format: 2a)
Location:
  shared repository: .
  repository branch: second

Related branches:
  parent branch: first 
```

所以，现在让我们试试`bzr remove-branch`“第二个”：

```
$ bzr remove-branch second
$ bzr info second
Empty control directory (format: 2a or pack-0.92)
Location:
  control directory: second 
```

似乎“第二个”中的所有内容都消失了，然后我可以安全地丢弃（`rm`/ `del`）“第二个”目录。

（其他人，请编辑此内容以提供有关在共享存储库中删除分支的正确方法的更多信息。）

# android - 如何在Android上实现旋转控件？

> ID：10474292
> 
> 赞同：4
> 
> 时间：2012-05-06T21:04:47.350
> 
> 标签：android

有人对如何创建旋转控件有任何想法吗？看起来像这样的东西：[http ://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit](http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit)

我遇到了 2 篇博客文章，它们非常接近我的需要，但不完全是：

[http://mindtherobot.com/blog/534/android-ui-making-an-analog-rotary-knob/](http://mindtherobot.com/blog/534/android-ui-making-an-analog-rotary-knob/)和 [http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-rotating -拨号器/](http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-rotating-dialer/)

第一个在旋转时并没有真正的动画，而第二个确实动画，它使用一个大位图并旋转它。因为我正在寻找的控件实际上应该是几个按钮的容器（它们每个都需要对点击做出反应），所以我不能真正使用一个大位图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T21:48:23.587

在 API 10 之前，动画以一种非常奇怪的方式工作，因此如果您旋转/移动/缩放视图，它们的实际位置/旋转/大小不会真正改变。如果您不介意，您可以简单地使用旋转动画，类似于：[https ://stackoverflow.com/a/4846255/878126](https://stackoverflow.com/a/4846255/878126)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T11:22:46.020

我刚刚部署了一个开源拨号库：您可以在以下网址查看：[https](https://bitbucket.org/warwick/hgdialrepo) ://bitbucket.org/warwick/hgdialrepo 或在以下网址观看视频：[https ://www.youtube.com/watch?v=h_7VxrZ2W -g&t](https://www.youtube.com/watch?v=h_7VxrZ2W-g&t) 这是一个非常复杂的库，具有许多使用场景和强大的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-28T05:56:57.317

试过这个[https://github.com/R4md4c/AndroidRotaryWheelView](https://github.com/R4md4c/AndroidRotaryWheelView)。这与您的要求非常相似。

# r - 在 R 中相交多边形，在 Spatstat 中导入多边形以进行空间聚类分析

> ID：10474299
> 
> 赞同：2
> 
> 时间：2012-05-06T21:05:36.250
> 
> 标签：r, geospatial

我正在尝试使用`readShapePoly`命令将多边形导入 R 并使用`as(filename,"owin")`. 我不断收到多边形包含重复顶点和自相交多边形的响应：

```
Polygon 1 contains duplicated vertices
Polygon 1 is self-intersecting
2, 3, 4, 5, 6, 7, 8, 9, 10.
done.
Polygon 1 contains duplicated vertices
Polygon 1 is self-intersecting
Checking for cross-intersection between 10 polygons...1, 2, 3, 4, 5, 6, 7, 8, 9.
done.
Error in owin(poly = opls) : 
  Polygon data contain duplicated vertices and self-intersection 
```

我尝试使用 ArcGIS 中的修复几何功能清理多边形，但没有帮助。我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T00:01:40.773

更新：您可以使用零宽度缓冲区以自动方式修复大多数此类问题。使用风险自负，如果不调查所涉​​及的数据，就无法知道这是否是明智的做法。

例如：

```
 gIsValid(gBuffer(p4, width = 0, byid = TRUE))
 [1] TRUE 
```

原答案如下：

结束更新

您可能需要更好的工具来修复几何图形，或者自己手动调查问题。该`rgeos`包可用于描述现有问题，您可以直观地识别它们发生的位置 - 然后直接在 R 中编辑它们或返回到您的 GIS 并在那里进行操作。`gIsValid`这是函数帮助中的一个简单示例：

```
library(rgeos)
p4 = readWKT("POLYGON ((0 40, 0 0, 40 40, 40 0, 0 40))")
gIsValid(p4, reason = TRUE)
[1] "Self-intersection[20 20]" 
```

更改`reason`返回值以获得更具描述性的警告：

```
gIsValid(p4)
[1] FALSE
Warning message:
In RGEOSUnaryPredFunc(spgeom, byid, "rgeos_isvalid") :
  Self-intersection at or near point 20 20 
```

所以现在绘制多边形并突出显示违规点：

```
plot(p4, col = "grey")
points(20, 20, pch = 3, cex = 3, col = "red")
axis(1);axis(2);box() 
```

![自相交多边形](../Images/2abf1a420f63e8a286a9eaea7715229c.png)

由于您正在从 shapefile 读取，您可以使用该`byid`参数来测试哪些多边形需要调查（尽管在本示例中它们都很好）：

```
library(maptools)
xx <- readShapePoly(system.file("shapes/sids.shp", package="maptools")[1],
  IDvar="FIPSNO", proj4string=CRS("+proj=longlat +ellps=clrk66"))
gIsValid(xx, byid = TRUE)
37001 37003 37005 37007 37009 37011 
 TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
... 
```

等等。

# mysql - 将日期时间转换为/从十进制转换以在 MySQL 中保留毫秒

> ID：10474300
> 
> 赞同：1
> 
> 时间：2012-05-06T21:05:38.777
> 
> 标签：mysql, datetime, timestamp, type-conversion, precision

MySQL 时间、日期时间和时间戳类型[不保留毫秒](http://bugs.mysql.com/bug.php?id=8523)。但是，[MySQL 确实支持使用 decimal(17,3) 存储日期时间信息](http://mysqlpreacher.com/wordpress/2009/08/once-upon-a-timestampmilliseconds)。我想出了以下 c# 代码在 (.net) 日期时间和十进制之间来回转换。

```
 public static decimal ToDecimalForMySql(System.DateTime dateTime)
    {
        return dateTime.Year * 10000000000m + dateTime.Month * 100000000m + dateTime.Day * 1000000m + dateTime.Hour * 10000m + dateTime.Minute * 100m + dateTime.Second + dateTime.Millisecond * 0.001m;
    }

    public static System.DateTime FromDecimalForMySql(decimal dateTime)
    {            
        long truncated = (long) Math.Truncate(dateTime);
        int msecs = (int) (1000 * (dateTime - truncated));
        long month;
        int day, hour, minute, second;
        return new System.DateTime((int) Math.DivRem(truncated, 10000000000, out month), Math.DivRem((int) month, 100000000, out day),
            Math.DivRem(day, 1000000, out hour), Math.DivRem(hour, 10000, out minute), Math.DivRem(minute, 100, out second), second, msecs);
    } 
```

有没有更有效的方法来做到这一点，也许使用位字段从十进制转换回日期时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:25:16.973

我正在使用以下内容：

```
public static string ToDecimalForMySql(System.DateTime dateTime)
{
    return dateTime.toString("yyyyMMddHHmmss.fff");
} 
```

注意上面的函数返回类型是字符串，而不是十进制。这可以直接在您的 SQL 查询字符串中使用。

要从 MySQL 中检索，我发现使用它最有效：

```
SELECT CONCAT('',DecimalDateTimeField) FROM table [where clause etc] 
```

然后在 C# 中，假设您使用的是 MySQLDataReader（变量名“rs”）：

```
DateTime dt = DateTime.Parse((string)rs[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:59:01.733

你能不能把日期时间和每个元素存储在 mysql. 然后，您需要一个在发送日期/时间之前分解日期/时间的函数，以及在检索时重新格式化它的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:29:12.490

我可以建议您将您的数字日期时间表示为一个[纪元时间戳](http://en.wikipedia.org/wiki/Unix_time)，表示自 1970 年 1 月 1 日午夜 UTC 以来的秒数，而不是在您尝试*时重载数字的基数 10 表示。*

将对象转换为`DateTime`纪元时间戳涉及`new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc)`从相关对象中减去（作为 UTC），并将结果`TimeSpan`对象转换为其`.TotalSeconds`.

相反，一个纪元时间戳（同样，自 '1970-01-01 00:00:00' 以来的小数秒）被添加到`DateTime`表示纪元的对象中`AddSeconds`。

例如，参见[这个问题](https://stackoverflow.com/q/1674215/132382)。

**好处：**这种方法可以很好地与 MySQL 函数 FROM_UNIXTIME() 配合使用。它也将被您的 UNIXy 同事视为橄榄枝，他们会立即将分数字段识别为日期时间度量。

# html - 即使在一行文本中格式更改很多时，如何将我的文本格式移动到 CSS？

> ID：10474301
> 
> 赞同：0
> 
> 时间：2012-05-06T21:05:40.190
> 
> 标签：html, css, fonts, styles

我知道字体格式应该在 CSS 中完成，而不是在 HTML 文件中，我想尽可能地符合，但是我该如何处理这样一两行中的大量字体更改？

```
<li><p><b><FONT COLOR="FF0000">NEWS </FONT>(May 2012):</p>
<p><a href="https://www.facebook.com/LostLangtons">Lost Langtons has a new Facebook page!</a></b></p></li> 
```

我可以将`<li>`CSS 中的元素设置为粗体文本，但我如何将它的一半设为红色？如果我为红色字体创建了第二个 css 元素，那么这意味着 id 必须将它放在不正确的段落标签中，是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:24:51.170

没什么复杂的：

在 CSS 中：

```
.red{
color:#FF0000;
} 
```

在 html 中：

```
<li><p><b><label class="red">NEWS </label>(May 2012):</p> 
```

像这样，您将能够一次更改所有红色标签的红色：)

# css - 如何在不覆盖的情况下中和 CSS 定义

> ID：10474303
> 
> 赞同：3
> 
> 时间：2012-05-06T21:05:56.320
> 
> 标签：css, twitter-bootstrap, stylesheet

有没有办法在不覆盖所有内容的情况下中和元素的 CSS 规则？

例如，我正在使用 Twitter Bootstrap，它有许多预定义的 CSS 定义`table`。在某些地方，我不想要它们。

在某些`table`元素上，我想知道我是否可以做这样的事情：

```
<table style="default"></table> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T21:20:58.783

Bootstrap的元素[只有一点点](https://github.com/twitter/bootstrap/blob/master/less/tables.less)CSS ：`<table>`

```
table {
  max-width: 100%;
  background-color: transparent;
  border-collapse: collapse;
  border-spacing: 0;
} 
```

要覆盖这些，您可以为您的表创建一个名为无肩带或其他东西的类：

```
table.strapless{
  max-width: 100%;
  background-color: transparent;
  border-collapse: separate;
  border-spacing: 2px;
  border-color: gray;
} 
```

此`table.strapless`选择器将覆盖`table`引导程序使用的选择器，因为它[更具体](http://css-tricks.com/specifics-on-css-specificity/)。

要使用 css 类，请将其包含在表的 class 属性中：

```
<table class="strapless"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T21:49:04.397

您不能在不覆盖的情况下中和 CSS 规则。因此，您必须按照上述答案中的建议进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T21:09:04.660

在 CSS 中使用一个类来定位不同的表格元素。

```
table.black {
    background-color:black;
}

table.default {
    background-color:white;
} 
```

然后，您可以对表格元素进行分组并应用您打算应用的特定样式，只需在元素本身上为它们提供适当的类属性名称即可。

```
<table class="default">

<table class="black"> 
```

同样重要的是要注意 CSS 类定义将覆盖元素定义。一个好的经验法则是更具体的 CSS 选择器将覆盖不太具体的选择器。因此，如果出于某种原因不想修改原始 CSS 文件，您可以从新的 CSS 文件应用不同的 CSS 样式。这当然假设旧 CSS 中还没有`table.default`规则和`table.black`规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T21:31:04.213

如果有相当数量的 CSS，您网站的 CSS 可能应该在外部样式表中。在此样式表中，您将按照其他人的建议为您的表格指定一个类名，您可以在其中添加所需的 CSS 规则。

但是，为了使用您在 mysite.css 样式表中新应用的 CSS 规则覆盖 Bootstrap 的样式表，真正的**关键**是将该样式表放置在 HTML 页面上比 bootstrap.css 文件**更靠下的位置。**像这样：

外部的：

```
<!DOCTYPE html>
<html lang="en">
<head>
<link href="/assets/css/bootstrap.css" rel="stylesheet" type="text/css">
<link href="/assets/css/mysite.css" rel="stylesheet" type="text/css">
</head>
</html> 
```

如果您不想使用外部样式表路线，那么使用您在问题中建议的“内联”规则也可以使用（即覆盖 bootstrap.css）：

排队：

```
<!DOCTYPE html>
<html lang="en">
<head>
<link href="/assets/css/bootstrap.css" rel="stylesheet" type="text/css">
</head>
<body>
  <table>
      <tr>
         <td style="border-top: 1px solid red;"></td>
         <td></td>
     </tr> 
  </table>
</body>
</html> 
```

# php - 删除偶数位置的所有字符

> ID：10474304
> 
> 赞同：0
> 
> 时间：2012-05-06T21:05:56.317
> 
> 标签：php, trim, raw-data

如果我有这个字符串：

```
k6s6k6s6c1u6t661w651z6k6z6z6k611 
```

如何删除偶数位置的所有字符？（2、4、6……）

```
kskscut6w5zkzzk1 
```

我试过：

```
$str = "k6s6k6s6c1u6t661w651z6k6z6z6k611";
$arr = str_split($str, 2);
print_r(substr_replace($arr ,"",-1)); 
```

没关系。但如果我想用修剪过的字符串继续脚本，它似乎不起作用。

```
Array
(
    [0] => k
    [1] => s
    [2] => k
    [3] => s
    [4] => c
    [5] => u
    [6] => t
    [7] => 6
    [8] => w
    [9] => 5
    [10] => z
    [11] => k
    [12] => z
    [13] => z
    [14] => k
    [15] => 1
) 
```

我想要原始字符串。不是数组。

```
kskscut6w5zkzzk1 
```

我也可以使用explode，但它们并不总是固定的字符。

这应该很简单。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T21:16:13.033

使用`implode`.

```
$str = "k6s6k6s6c1u6t661w651z6k6z6z6k611";
$arr = str_split($str, 2);
$str2 = implode("", substr_replace($arr ,"",-1));
echo $str2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:16:41.287

```
$str = "k6s6k6s6c1u6t661w651z6k6z6z6k611";
$new_str = '';
$str_length =  strlen($str);
for($i=0; $i< $str_length; $i++)
{
    if($i%2==0) $new_str .= $str{$i};
}

echo $new_str; 
```

输出：`kskscut6w5zkzzk1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T22:38:40.910

你可以试试

```
preg_replace('/(.)(.)/', '$1', $str); 
```

# php - 西班牙语的时间戳？

> ID：10474305
> 
> 赞同：0
> 
> 时间：2012-05-06T21:06:07.460
> 
> 标签：php, datetime, date, programming-languages, timestamp

我正在创建一个我想使用西班牙语的时间戳。

我的代码：

```
 $day = (date("D")); // day in number
 switch($day) {
  case "1": $m = "lunes"; break;
  case "2": $m = "martes"; break;
  case "3": $m = "miércoles"; break;
  case "4": $m = "jueves"; break;
  case "5": $m = "viernes"; break;
  case "6": $m = "sábago"; break;
  case "7": $m = "domingo"; break;
    default: "";
 }
 echo $m; 
```

但由于某种原因，它对“m”没有任何反应。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:27:35.220

让您的代码更安全：

```
default: throw new Exception(sprintf('Unexpected value: "%s"', $day)); 
```

这会用鼻子指出你的错误。现在或将来（例如，当语言环境发生变化时）。

# javascript - 在 JavaScript 中使用 eval() 的主要好处是什么？

> ID：10474306
> 
> 赞同：51
> 
> 时间：2012-05-06T21:06:11.143
> 
> 标签：javascript, eval

我知道这可能是一个新手问题，但我很好奇它的主要好处 `eval()` - 最好在哪里使用？我很感激任何信息。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-06T21:22:14.327

`eval`最好使用该功能：从不。

它的目的是将字符串评估为 Javascript 表达式。例子：

```
eval('x = 42'); 
```

它以前被使用过很多次，因为很多人不知道如何为他们想做的事情编写正确的代码。例如，当为字段使用动态名称时：

```
eval('document.frm.'+frmName).value = text; 
```

正确的方法是：

```
document.frm[frmName].value = text; 
```

由于该`eval`方法将字符串作为代码执行，因此每次使用它都有可能让某人在页面中注入有害代码。请参阅[跨站点脚本](http://en.wikipedia.org/wiki/Cross-site_scripting)。

该功能有一些合法用途`eval`。但是，您不太可能处于实际需要它的情况。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2016-05-13T06:31:59.963

这是一个相当古老的问题，也许人们当时没有`eval()`正确考虑用例。一个很好的用途是在后端或前端开发流程`eval()`中实现*热重载。*

基本上`eval()`可以让您在编辑器中编辑代码，并在不重新启动和不丢失状态的情况下修补正在运行的应用程序（取决于实现）。您将需要相关代码来监视文件更改，并以某种方式将更改发送到您的应用程序，但`eval()`最终是将这些更改转换为实际 js 的方法。

*编辑*

我遇到的另一个用例：

您可以`eval()`在您想要动态要求您不想被转译的文件（如 json）的事件中使用绕过 webpack 的编译过程，例如：

```
const data = eval('require')(`./emails/${recipient}/${type}.json`) 
```

* * *

在那一点上，我认为写一个像是`eval()`邪恶的陈述是完全错误的，或者永远不应该使用。**像这样的笼统陈述才是真正的邪恶！**

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-06T21:12:24.760

`eval`使得执行（或评估）一串javascript代码成为可能。

因此，当您希望某人执行一串 javascript 代码时，它是适用的。例如，在一篇关于 JavaScript 的教育文章下，读者可以立即尝试 :)

或者，如果您的网站面向程序员，您可能希望他们编写和执行自己的插件。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-05T21:20:54.273

使用 eval 的最佳目标是动态加载代码、在运行时生成代码并执行类似的元编程工作。一般来说，如果你可以在没有 eval 的情况下做同样的事情，请不要使用 eval。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-06T21:07:41.513

`eval()`不应在 Javascript 中使用。

`eval()`曾经用于解析 JSON 字符串，但这种用法已被更快、更安全的`JSON.parse`.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-06T21:10:30.980

> **`eval() = evil`**

你根本不应该真正使用它。它可用于轻松插入代码，但有人可以使用`eval()`. 有时人们`eval()`用于解析 JSON，或者

```
eval("obj." + id);   //newbies 
```

但实际上你可以在不使用`eval()`.

```
obj[id];             //should-do 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-05-06T21:08:18.223

您可以运行存储在网页上某个字段的值中的 JS。

您可以将 eval 与 JS 一起使用，只是这样您的代码更容易受到攻击。只要不使用AJAX，就没有服务器问题。

如果你使用 eval，你应该解析出字符 [ ()<>{} ]

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-01-28T11:47:12.647

如前所述，使用 eval() 时存在潜在风险，如果要将字符串作为表达式进行计算，可以使用 ${} 来计算表达式，在 ECMA-6 中引入

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-09-15T15:03:53.137

也许我错了，但我用它来解析模板文件中的字符串：

```
const name = 'Daman'
const fileContent = 'Hello ${name}'
const result = eval('`' + fileContent + '`') 
```

这给了我我需要的东西：

```
"Hello Daman" 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-12T04:11:55.833

使用 eval 的最佳用例之一是 javascript 记录器，用户可以在其中在运行时执行 javascript。例如[javascript 记录器](http://log4javascript.org/)允许用户在记录器窗口中执行脚本。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-12T17:26:28.390

基于表示 javascript 代码的字符串动态运行代码。例如：

```
let dynamicFunc = eval('(x)=>(x+2)') // or whatever plain text which is valid JS function
console.log(dynamicFunc(40));
// expected output: 42 
```

安全警告！您应该始终验证这些字符串以避免恶意脚本执行，尤其是在服务器端使用它时。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2014-11-11T08:28:41.143

您可以构建一个客户端框架并将其用作基础应用程序 - 接收代码包然后执行它们 - 从而使客户端非常灵活 - 将服务器上的所有代码打包。然而，这是非常危险的，如果需要这样的事情，那么您或许应该将 Java 与 Java 捆绑包一起使用。为什么 Eval 仍然在语言中是有争议的，使用它是一个太大的安全风险

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2019-12-17T20:42:28.783

永远不要把话说绝了。Eval 有很好的合法用例。它只是一个强大的工具，所以如果你不认真地使用它，你可能会产生一个严重的问题。

由于 Javascript 是在客户端执行的，因此安全风险在于客户端而不是服务器。如果您在 javascript 中使用 eval 并且您不小心验证输入源或 eval 函数的输入内容，您将对客户端潜在的严重后果负责。

话虽如此，我对 javascript eval 的最佳使用是在编写各种类型的解析例程时。例如，将简单（或有时不那么简单）的数学公式作为存储在数据库中的字符串放入数据中通常很方便。如果您的程序需要对程序控制的变量执行任意计算，那么 eval 是最好的方法。手动解析安全管理的字符串可能会变得不必要的复杂。

作为开发人员，我们无法完全控制客户端发生的事情。用户总是可以在控制台中捣乱并创建自己的问题，或者下载干扰 JS 执行的浏览器扩展。我们能做的最好的事情就是限制风险敞口，而不是疏忽大意以至于留下巨大的安全漏洞。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2019-05-04T11:55:25.657

使用 eval 很有用，但与其他一切一样，您必须意识到风险。每一段 JS 代码都是潜在的风险。软件中的错误会通过逻辑错误和编码错误潜入，并带来意想不到的后果。我总是说计算机永远不会做你想让他们做的事情，他们会做你告诉他们做的事情。这意味着您必须记住，必须仔细考虑软件。软件没变。人们仍然在动态编码，而不是仔细分析和适当的设计。在软件开发中，我们都犯了同样的罪。使用 eval - eval 不是邪恶的，它是你所做的。

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2019-03-29T20:07:15.073

`Eval()`可能非常有用，即使它被称为“撤消”。我用它在`autoit`代码上启用代码。

它可以在编写代码处理器以创建自己的脚本时应用。

**为什么？**在我的情况下，在大型 tcp 服务器上使用它不需要我重新编译源代码并踢掉所有客户端导致重新启动。因此，我使用 eval 动态添加新脚本，这与配置文件不同，它不是静态的，可用于计算等。还将 eval 与调用命令结合起来可以通过函数的 eval 设置值。

但除此之外，使用起来也不太安全。即使以这种方式使用它，我也建议确保它不会发生故障。

# python - 是否可以监视 Windows 驱动器上的每个文件创建？

> ID：10474310
> 
> 赞同：3
> 
> 时间：2012-05-06T21:07:02.280
> 
> 标签：python, windows, directory

我正在用 Python 编写一个程序，用于存储系统上每个文件的信息。安装后，它将遍历每个文件，但之后我想在创建新文件或移动文件时更新它。例如，在 Dropbox 服务中，每当我将文件复制到我的 Dropbox 目录时，它都会立即注意到并将其上传到他们的服务器。

有没有办法在 Python 中做到这一点而无需轮询？我正在考虑创建文件时触发的某种事件侦听器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T21:14:19.437

尝试以下之一：

*   [http://pypi.python.org/pypi/watcher](http://pypi.python.org/pypi/watcher)
*   [http://pypi.python.org/pypi/watchdog](http://pypi.python.org/pypi/watchdog)

我认为它们中的第一个更易于使用。使用示例（来自其网站）：

```
import watcher
w = watcher.Watcher(dir, callback)
w.flags = watcher.FILE_NOTIFY_CHANGE_FILE_NAME
w.start() 
```

watcher 是封装系统 API 的模块，在 MSDN 上有描述：

[http://msdn.microsoft.com/en-us/library/aa365465(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa365465(v=vs.85).aspx)

因此，flag`watcher.FILE_NOTIFY_CHANGE_FILE_NAME`表示您将收到以下通知：

> 监视目录或子树中的任何文件名更改都会导致更改通知等待操作返回。更改包括重命名、创建或删除文件。

# javascript - 弹出窗口中的动态 iframe

> ID：10474313
> 
> 赞同：4
> 
> 时间：2012-05-06T21:07:10.767
> 
> 标签：javascript

我正在尝试通过下面的 href 链接实现两件事。首先，我想启动一个弹出窗口。完毕。接下来，我希望该弹出窗口显示一个 iframe。这也很容易实现，**直到**我意识到我需要将 href 链接文本作为参数传递到 iframe src 中。

例如，iframe 不会加载到我的弹出窗口中，除非它`src="http://localhost:8080/test/document.html?OnSale"`

我无法弄清楚为什么`document.write`在我的 html 页面的正文中不会打印出我试图在 href 链接中使用我的 foo() 函数创建的动态 iframe...

```
<div id="blanket" style="display:none;"></div>
    <div id="popUpDiv" style="display:none;">
        <a href="#"  onclick="popup('popUpDiv')">
            <img align="right" src="http://localhost:8080/test/img/close_img.png">
        </a>
<script type="text/javascript"> 
    function foo(obj)
    {
        test1 = "http://localhost:8080/test/document.html?"+obj.text; 
        document.write('<iframe height="450"  allowTransparency="true" frameborder="0" scrolling="yes" style="width:100%;" src="'+test1+'" type= "text/javascript"></iframe>');
    } 
</div>

<a href="#" onclick="popup('popUpDiv');foo(this);">OnSale</a> 
```

**编辑：** 这是我的完整 html 页面。一切都在带有 win7 和 firefox 的 tomcat7 上本地运行。

```
<html>
<head>
    <script type="text/javascript" src="http://localhost:8080/test/css-popup/css-pop.js"></script>
    <link href="http://localhost:8080/test/css-popup/styles.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="blanket" style="display:none;"></div>
<div id="popUpDiv" style="display:none;">
    <a href="#"  onclick="popup('popUpDiv')">
        <img align="right" src="http://localhost:8080/test/css-popup/x.png">
    </a>
    <script type="text/javascript">
        function foo(obj){
            test1 = "http://localhost:8080/test/document.html?"+obj.innerHTML;
            document.write('<iframe height="450"  allowTransparency="true" frameborder="0" scrolling="yes" style="width:100%;" src="'+test1+'" type= "text/javascript"></iframe>');

        }
    </script>
</div>

<a href="#" onclick="popup('popUpDiv');foo(this);">OnSale</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T21:29:01.220

`text`不是所有浏览器的标准，请尝试`innerHTML`代替，

```
function foo(obj){
     test1 = "http://localhost:8080/test/document.html?"+obj.innerHTML; 
     document.write('<iframe height="450"  allowTransparency="true" frameborder="0" scrolling="yes" style="width:100%;" src="'+test1+'" type= "text/javascript"></iframe>');
} 
```

**在您共享整个代码后更新，**

据我了解，您想打开一个弹出窗口，并在其中显示一个动态创建的 iframe。但 document.write 适用于您当前的窗口。所以你必须首先处理你的弹出窗口。然后改变它的内容。

试试这个，

```
<html>
<head>
<script type="text/javascript" src="http://localhost:8080/test/css-popup/css-pop.js"></script>
<link href="http://localhost:8080/test/css-popup/styles.css" rel="stylesheet" type="text/css" />
</head>
<body>

<div id="blanket" style="display:none;"></div>
    <div id="popUpDiv" style="display:none;">
        <a href="#"  onclick="popup('popUpDiv')">
            <img align="right" src="http://localhost:8080/test/css-popup/x.png">
        </a>
<script type="text/javascript"> 
    var popUpWindow;
    function popup(n) {
       popUpWindow = window.open(n);
    }
                function foo(obj){
                test1 = "http://localhost:8080/test/document.html?"+obj.innerHTML; 
                popUpWindow.document.write('<iframe height="450" allowTransparency="true" frameborder="0" scrolling="yes" style="width:100%;" src="'+test1+'" type= "text/javascript"></iframe>');

                } 
        </script>
</div>

        <a href="#" onclick="popup('popUpDiv');foo(this);">OnSale</a>

</body>
</html>​ 
```

这[是现场演示](http://jsfiddle.net/U8wCc/1/)

# ruby-on-rails - 使用自定义控制器功能提交表单

> ID：10474317
> 
> 赞同：4
> 
> 时间：2012-05-06T21:07:48.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我开始在 Ruby On Rails 中开发一个小型应用程序。我有一个简短的视图：

```
<%= form_for @event do |f| %>
    <%= f.fields_for :items do |item| %>
        <input type="number" id="quantity" />
<% end %>

<%= f.submit 'Join', :name => "join" %> 
```

我想在单击“提交”后，运行一个控制器的方法来访问表单中每个字段中包含的数据并在数据库上执行插入。

实际上，控制器调用的方法是“更新”，但我想调用其他控制器的方法，因为更新仅适用于事件创建者，因此其他用户无法提交表单。

如何自定义提交按钮的操作以运行控制器的功能（不更新）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T21:48:37.370

```
<%= form_for @event, :url => { :action => "custom_update" } do |f| %> 
```

您可能还想指定方法

```
<%= form_for @event, :url => { :action => "custom_update" }, :html => { :method => "put" } do |f| %> 
```

# php - php/.net 网络登录机器人 - 出于好奇

> ID：10474320
> 
> 赞同：1
> 
> 时间：2012-05-06T21:08:13.070
> 
> 标签：php, .net, bots

我们都知道网络机器人、蜘蛛和在网络上执行自动化操作的东西，例如登录 gmail、hotmail 等帐户并使用合法帐户执行自动化操作，以节省工时或只是发送垃圾邮件......

我想知道这样的机器人是如何工作的（我不打算成为垃圾邮件发送者，只是好奇它的实现:-)）

我看到了一些关于如何构建一个 .net 应用程序的解释，该应用程序将使用 Web 浏览器控件并在 HTML 文档上调用操作，但我想这还不够快和匿名，不足以成为真正的交易......

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:10:35.260

它的工作原理与您描述的完全一样：有一个网络浏览器（组件，也称为 HTTP 客户端），它被命令。就是这样。

> 但我想这还不够快和匿名，不足以成为真正的交易......

你猜错了。它很快，并且与匿名无关。

# python - 如何读取 CSV？错误信息

> ID：10474322
> 
> 赞同：0
> 
> 时间：2012-05-06T21:08:25.627
> 
> 标签：python, python-3.x

我真的又一次被困住了。

对于我的课程，问题是

> 查找来自 3 个 CSV 文件的字段 [age] 中小于 47 的值的总和

好的，所以我发现了问题，现在已经解决了！！但是当我使用“SUM”函数时，我现在遇到了一个错误。

再次这里是我的代码......对不起，如果我在浪费你们的时间，伙计们。

```
import csv
myFile = csv.reader(open('3028571a.csv', newline=''), delimiter=',', quotechar='|')

next(myFile)

for record in myFile:
   records = int(record[0])
   if records < 47:
        sum(records)
        print(records) 
```

它像五条记录，但我收到的错误是

> TypeError：“int”对象不可迭代

这就是总和...有什么建议吗？我想不出任何东西，因此我问的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T21:39:46.647

Python 已经有一个出色的 CSV 解析器，可以处理各种分隔符、转义分隔符等。它被调用`csv.reader`并且在`csv`模块中。您可以按如下方式使用它：

```
sum(int(row[0]) for row in csv.reader(open(f, "rb")) for f in files if int(row[0]) < 47) 
```

当然，这并不是真正的功课——它只是使用 Python 的内置工具为您完成。如果你想自己做，你必须手动读取文件的每一行，根据分隔符拆分它，也许担心引号中的逗号（不应该算作逗号）......换句话说，重新实施`csv.reader`！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T21:27:06.320

这可能对您有用： http: [//docs.python.org/library/csv.html](http://docs.python.org/library/csv.html)

基本上，您将文件句柄传递给 csv.reader() 函数，然后您可以遍历行。

也许是这样的：

```
import csv
import sys

agecol = 1
namecol = 0
agelimit = 47

def sum_ages(files):
    agesum = 0
    for f in files:
        with open(f, 'r') as fp:
            reader = csv.reader(fp)
            for row in reader:
                age = int(row[agecol])
                name = row[namecol]
                if age < agelimit:
                    print 'Adding %s\'s age (%d)' % (name, age)
                    agesum += age
                else:
                    print 'Skipping %s\'s age (%d)' % (name, age)

    print 'Sum of Ages < %d: %d' % (agelimit, agesum) 
```

# php - curl_multi_select 总是阻塞超时值

> ID：10474325
> 
> 赞同：3
> 
> 时间：2012-05-06T21:08:45.353
> 
> 标签：php, curl, curl-multi

在 Windows XP PHP 5.3.5 上从 PHP运行[示例 #1 时，](http://php.net/manual/en/function.curl-multi-exec.php)`curl_multi_select()`该行将始终在指定的超时时间内阻塞（如果为空白，它将阻塞 1 秒，如果我指定 5 秒超时，它将阻塞 5 秒）不管获取内容所需的时间。我怀疑它与[这个错误](https://bugs.php.net/bug.php?id=60790)有关。

问题是：最好的解决方法是什么？我能想到的最好的办法就是摆脱`curl_multi_select()`并`usleep(x)`节省一些周期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:45:59.757

只要您可以忍受 1 秒的阻塞，这可能会有所帮助。

[手册页`curl_multi_select`](http://php.net/manual/en/function.curl-multi-select.php)上有一条评论提到此阻塞持续到至少一个连接完成或`$timeout`几秒钟，以先发生者为准。他们还写道，`curl_multi_select`应该包装对的调用：

```
private function full_curl_multi_exec($mh, &$still_running) {
        do {
                $rv = curl_multi_exec($mh, $still_running);
        } while ($rv == CURLM_CALL_MULTI_PERFORM);
        return $rv;
} 
```

然后修改检查运行句柄的循环：

```
// execute the handles
$still_running = null;
$this->full_curl_multi_exec($mh, $still_running);

// check whether the handles have finished
do { // "wait for completion"-loop 
        curl_multi_select($mh); // non-busy (!) wait for state change 
        $this->full_curl_multi_exec($mh, $still_running); // get new state
        while ($info = curl_multi_info_read($mh)) { 
            // process completed request (e.g. curl_multi_getcontent($info['handle'])) 
        }
} while ($still_running); 
```

在此修改之前，使用 PHP 5.4 测试的代码无法在运行 PHP 5.3.20 的 Amazon 实例上运行，因为[PHP 5.3.18 中的这个错误](https://bugs.php.net/bug.php?id=63411)导致调用`curl_multi_select()`永远不会返回除了`-1`

现在，我可以使用 200 个句柄在 30 秒内从近 1,300 个 URL 中检索数据。

# modx - 在 Snippet (ModX, 1.0.5) 中使用页面变量

> ID：10474326
> 
> 赞同：1
> 
> 时间：2012-05-06T21:08:53.443
> 
> 标签：modx

（使用 ModX 1.0.5）

当我执行我当前的代码片段（见下面的代码片段）时，它似乎完全忽略了`if(empty())`检查。我也试过了`if($promoX == '')`，也没有运气。

```
<?php
    $promo1 = '[*sidepromotop*]'; // assets/images/promo1.jpg
    $promo2 = '[*sidepromobot*]'; // this variable is empty.

    if(empty($promo1) && empty($promo2)){
       echo '[!Ditto? &startID=`92` &depth=`1` &display=`2` &randomize=`1` &tpl=`Promo-Block-Styles`!]';
    }else{
       if(empty($promo1)){
          echo '[!Ditto? &startID=`92` &depth=`1` &display=`1` &randomize=`1` &tpl=`Promo-Block-Styles`!]';
       }else{
          echo '<div class="promo"><img src="'.$promo1.'" alt="" /></div>';
       }
       if(empty($promo2)){
          echo '[!Ditto? &startID=`92` &depth=`1` &display=`1` &randomize=`1` &tpl=`Promo-Block-Styles`!]';
       }else{
          echo '<div class="promo"><img src="'.$promo2.'" alt="" /></div>';
       }
    }
?> 
```

出于某种原因，上面的代码将显示以下内容：

```
<div class="promo">
    <img src="assets/images/promo1.jpg" alt="">
</div>
<div class="promo">
    <img src="" alt="">
</div> 
```

如您所见，即使变量为空，当我通过代码运行它时，它显然仍将其视为非空。

我真的很感激对此的一些见解，因为我对 modx 很陌生，这让我很头疼！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:32:30.900

诸如`[*sidepromotop*]`未从片段中解析的 MODX 标记（它是原始 php），因此实际上当您将未解析的标记作为字符串传递给它们时，empty() 检查工作得很好。

您需要做的是使用[$modx->getTemplateVar()](http://wiki.modxcms.com/index.php/API%3agetTemplateVar)来检索当前文档的模板变量：

```
$promo1 = $modx->getTemplateVar('sidepromotop'); 
```

或者，您可以将它们作为参数传递到您的代码片段调用中......

```
[!mySnippet? &promo1=`[*sidepromotop*]` &promo2=`[*sidepromobot*]`!] 
```

...并且它们将作为变量`$promo1`和`$promo2`您的代码段提供。

*

您还应该使用[$modx->runSnippet()](http://wiki.modxcms.com/index.php/API%3arunSnippet)从代码片段中执行同上，它会更有效。

```
$output = $modx->runSnippet('Ditto', array(
    'startID'   => 92,
    'depth'     => 1,
    'display'   => 1, 
    'randomize' => 1,
    'tpl'       => 'Promo-Block-Styles',
));
return $output; 
```

查看这篇 wiki 文章，了解为 MODX 创建片段的一些重要技巧： [http ://wiki.modxcms.com/index.php/Creating_Snippets](http://wiki.modxcms.com/index.php/Creating_Snippets)

# jquery - 在 jQuery UI 中未触发 Drop 事件。

> ID：10474327
> 
> 赞同：3
> 
> 时间：2012-05-06T21:09:02.617
> 
> 标签：jquery, jquery-ui, events, drag-and-drop

我正在尝试创建一个小程序，允许用户将设备放在一起以构建设备图片。最终产品的外观和功能如下： http: [//oliverdjones.com/learning/nebulizer.swf](http://oliverdjones.com/learning/nebulizer.swf)

这是当前版本： http: [//oliverdjones.com/learning/dragtester.html](http://oliverdjones.com/learning/dragtester.html)

我正在使用 jQuery UI。拖动事件按预期工作，但我还不能让 drop 事件触发，我完全没有想法。这是代码：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>drag test</title>

    <style>
            .content {width:100%; height:100%;position: absolute;}
        #draggable img {width:100%}
        .part1 {position:absolute;width:100px; z-index: 5; margin-top:15%; margin-left:57%;}
        .drop1 {position:absolute;width:100px; height: 70px; z-index: 3; background-color:rgba(255,0,0,0.5);top:42%; left:45%; }
        .dropped1 {position:absolute;width:100px; height: 70px; z-index: 3; background-color:rgba(255,255,255,0.5);top:42%; left:45%;}
        .base {position:absolute; width: 17%; top:45%; left:42%;z-index: 2}
        .status {position:absolute; width: 160px; border:#000 solid 2px; text-align:center; -webkit-border-radius: 12px; border-radius: 12px; color:#000; font-family: Arial, Helvetica, sans-serif; top:85%; left:30%; z-index:3}

    </style>

    <script src="js/jqueryui/js/jquery-1.7.2.min.js"></script>
    <script src="js/jqueryui/js/jquery-ui-1.8.20.custom.min.js"></script>
    <script src="js/jqueryui/js/jquery.ui.touch-punch.min.js"></script>

    <script>
    $(function() {
        $( '#draggable' ).draggable({
        containment: '#content',
        drag: function(event, ui){
            $('.status')
            .addClass('ui-state-highlight')
            .find('p')
                 .html('&nbsp;');
            }
        });

            $( '#droppable' ).droppable({
                accept: '#draggable',
                drop: function( event, ui ) {
                    $.this.css({'background':'white'});
                    $('.status')
                    .addClass('ui-state-highlight')
                        .find('p')
                            .html('Good!');
                             }
                    });
            });
    </script>

</head>

<body>
    <div class="content">

      <img class="base"src="images/base.png" />

      <div id="draggable" class="ui-widget-content part1">
        <img src="images/part1.png" />
      </div>

      <div id="droppable" class="ui-widget-header drop1">
        <div></div>
      </div>

      <div. class="status">
        <p>Please Assemble</p>
      </div>

     </div><!-- /content -->

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:49:55.910

This is being caused by the `margin` applied to the draggable node. If you remove these CSS declarations this should work as expected.

```
 .part1 { margin-top:15%; margin-left:57%; } 
```

This is a known jQuery UI bug, see [http://bugs.jqueryui.com/ticket/6876](http://bugs.jqueryui.com/ticket/6876).

# ruby-on-rails - Some routes not working after re-deploying rails 3.1.4 app to /suburi on nginx

> ID：10474338
> 
> 赞同：0
> 
> 时间：2012-05-06T21:10:36.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, nginx

We successfully deployed our rails 3.1.4 app to suburi /by on ubuntu 12.04 running nginx. In production.rb we set:

```
RAILS_RELATIVE_URL_ROOT="/by" 
```

We can login and get to the main menu. However all routes redirected by our custom view_handler in main menu does not work. The purpose of the view_handler is to memorize the next path the app is going to route into and remember how to back up (like the 'back'). Here is the code (relevant code)

```
 def view_handler
    index  = params[:index].to_i
    url = params[:url]
    if index == 1   #forword
      session[:page_step] += 1 
      session[('page' + session[:page_step].to_s).to_sym] = url
    end

    #redirect to the page by url  
    redirect_to url
  end 
```

Here is the link_to that does not work anymore (404 not found error):

```
<%= link_to 'Projects', "/view_handler?index=1&url=#{projects_path}" %> 
```

The displayed URL (not correct. Return 404 not found) is:

```
http://154.248.209.181/view_handler?index=1&url=/by/projects 
```

The following is the working URL for the above (manually entered):

```
http://154.248.209.181/by/projects 
```

It seems odd to us that project_path returns '/by/projects' by view_handler. Only 'projects' should be returned for projects_path (by rake routes).

Before deploying to suburi, the rails 3.1.4 app was deployed and worked fine in root directory.

What's could be wrong with our setup? Thanks so much.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:17:43.523

The broken routes could be fixed with addition of "/by/" before view_handler. Now the link_to looks like:

```
<%= link_to 'Projects', "/by/view_handler?index=1&url=#{projects_path}" %> 
```

Also`RAILS_RELATIVE_URL_ROOT="/by"` was removed in production.rb. It seems no use.

# jquery - 如果光标在目标可见之前移动，则不会触发 mouseleave

> ID：10474339
> 
> 赞同：2
> 
> 时间：2012-05-06T21:10:38.940
> 
> 标签：jquery, mouseevent

我有一个披萨菜单，当用户将光标悬停在其中一个馅饼上时，它会在上面的 div 中显示有关该馅饼的信息。到目前为止我所做的工作，但有一个怪癖。

如果您在 .infotrigger 上移动鼠标过快，则 .iteminfo 对 mouseleave 触发不可见，从而使 .iteminfo 可见，这是不可取的。

[你可以在这里](http://uppercrust.gillisad.com/menu)玩。

查询：

```
$(function() {

        $('.infotrigger').mouseenter(function () {
            $(this).children('.iteminfo').show(100);
        });

        $('.iteminfo').mouseleave(function () {
            $(this).fadeOut(200);
        });

    }); 
```

我已经搜索了数周的解决方案并且已经接近，但它似乎总是回到我对“这个”触发器的感知需求。我使用了 children 处理程序，因为我对菜单上的每个项目都使用了相同的类。没有它，菜单上每个披萨的信息都会弹出。起初我尝试了一个列表，但似乎无法让它发挥作用。如果有更优雅的方式来解决这个问题，我会全神贯注。我想知道我构建 HTML 的方式是否是我想要实现的最大障碍。

HTML：

```
<div class="menuitem">
    <div class="infotrigger">
        <div class="iteminfo"></div>
    </div>
</div> 
```

CSS：

```
.menuitem {
width:144px;
height:200px;
float:left;
position:relative;
display:block;
font-size:1.2em;
letter-spacing:.05em;
margin-left:2em;
z-index:5;
}

.menuitem p {
margin-bottom:0;
}

.menuitem img {
}

.infotrigger {
margin-bottom:-14px;
height:120px;
overflow:visible;
}

.iteminfo {
position:relative;
display:none;

width:238px;
/*height:168px;*/
margin:-140px auto 0 -47px;
text-align:left;
font-size:0.8em;
font-family:Helvetica, Arial, sans-serif;
font-weight:bold;
letter-spacing:0;
color:rgb(110,48,21);
border-right:1px solid rgba(0,0,0,0.2);
border-bottom:1px solid rgba(0,0,0,0.25);
-moz-border-radius:4px;
border-radius:4px;
-moz-box-shadow:1px 1px 10px rgba(0,0,0,0.5);
-webkit-box-shadow:1px 1px 10px rgba(0,0,0,0.5);
box-shadow:1px 1px 32px rgba(0,0,0,0.5);
background-image: linear-gradient(bottom, rgb(224,201,174) 0%, rgb(254,245,224) 100%);
background-image: -o-linear-gradient(bottom, rgb(224,201,174) 0%, rgb(254,245,224) 100%);
background-image: -moz-linear-gradient(bottom, rgb(224,201,174) 0%, rgb(254,245,224) 100%);
background-image: -webkit-linear-gradient(bottom, rgb(224,201,174) 0%, rgb(254,245,224) 100%);
background-image: -ms-linear-gradient(bottom, rgb(224,201,174) 0%, rgb(254,245,224) 100%);
background-image: -webkit-gradient(
linear,
left bottom,
left top,
color-stop(0, rgb(224,201,174)),
color-stop(1, rgb(254,245,224))
);
z-index:100;
}

.iteminfo img {
margin:0 0;
width:238px;
height:56px;
}

.iteminfo p {
text-align:left;
margin:0.7em 0.2em 0.5em 0.5em;
}

.fb-like {
margin:0.5em auto 0.5em 0.5em;
} 
```

谢谢你的帮助。这就是尝试 Web 开发的设计师的样子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:33:35.443

不确定是否会做很多，但如果不创建备份计划，请尝试添加一些站点：

```
$('.infotrigger').mouseenter(function () {
    $(this).children('.iteminfo').stop(true, true).show(100);
});

$('.iteminfo').mouseleave(function () {
    $(this).stop(true, true).fadeOut(200);
}); 
```

备份计划，不是一个好主意，但尝试将其更改为具有更多本地范围的内容：

```
$(document).on('mousemove', function(e) {
    if ($(".iteminfo").is(':visible') && e.target.className != 'iteminfo') {
        $(".iteminfo").hide(); //could use a timeout aswell
    }
}); 
```

可能最好的解决方案就是这样做：

```
$('.infotrigger').mouseenter(function () {
    var elm = $(this).children('.iteminfo');
    $('.iteminfo').not(elm).fadeOut(200);
    elm.show(100);
});

$('.iteminfo').mouseleave(function () {
    $(this).fadeOut(200);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:35:06.387

如何简单地将`hover`事件绑定到`infotrigger`？

```
$('.infotrigger').hover(function() {
    $(this).children('.iteminfo').show(100);
}, function() {
    $(this).children('.iteminfo').fadeOut(200);
});​ 
```

我已经测试过，它工作正常；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T21:36:12.043

**CSS**
为什么不是纯 CSS？[http://jsfiddle.net/mqchen/QFJz7/](http://jsfiddle.net/mqchen/QFJz7/)

它只显示悬停时的信息，对于支持 css3 动画的浏览器，信息将淡入。

**Javascript**
这是一个稍微冗长的老式 javascript 解决方案：http: [//jsfiddle.net/mqchen/Sbg7g/3/](http://jsfiddle.net/mqchen/Sbg7g/3/)

无论鼠标离开哪个“披萨”，它基本上都会隐藏所有其他人。查看jsfiddle。您只需要考虑 javascript 部分。

```
var triggers = $(".infotrigger");
var infos = $(".infotrigger .iteminfo");

$(triggers).each(function(index, trigger) {
    $(trigger).mouseenter(function(e) {
        $(infos).each(function(i2, info) {
            if(index === i2) {
                $(info).fadeIn(100);
            }
        });
    });

    $(trigger).mouseleave(function(e) {
        $(infos).each(function(i2, info) {
            $(info).fadeOut(200);
        });
    });
}); 
```

# javascript - 如何使这些功能停止干扰

> ID：10474346
> 
> 赞同：1
> 
> 时间：2012-05-06T21:12:18.563
> 
> 标签：javascript, jquery, html, video

我有两个功能，一个在点击时播放视频（并更改播放的视频），然后是一个应该使 DIV 的不透明度为零的功能。我试图将它们放在一起，因为您应该单击同一个位置来激活它们，但它不起作用。

出于某种原因，当我放置包含视频的 div（即使没有它的功能）时，第二个功能停止工作。我该怎么做才能使工作？

视频播放器的功能是：

```
$(window).load(function(){
    $('li', '.thumbs').on('click', function() {
        var numb = $(this).index(),
            videos = ['images/talking1.m4v', 'images/talking2.m4v', 'images/talking1.m4v', 'images/talking2.m4v', 'images/talking1.m4v', 'images/talking2.m4v'],
            myVideo = document.getElementById('myVid');

        myVideo.src = videos[numb]; 
        myVideo.load();
        myVideo.play();

    });
}); 
```

对于图像：

```
$(window).load(function(){
    $(function() {
        $('li', '.thumbs').click(function() {
            $('#MyT').addClass('clear');
        });
    });
}); 
```

我知道两者都不应该有`$(window).load(function()`，那只是因为它们是分开的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T21:21:03.647

你确定你的多重选择器语法是你想要的吗？如果你想将逗号分隔的选择器应用于所有这些元素，则必须只引用一次，否则你只是传递一个`context`. 无论如何，我通常会发现上下文是不必要的，除非它是以前缓存的选择器。更多信息在[jQuery API](http://api.jquery.com/multiple-selector/)。

```
$('li, .thumbs') // All `li` and all `.thumbs`
$('.thumbs li') // All 'li` within `.thumbs` 
```

请注意，您也在使用`(window).load()`and `(document).ready()`。当你结合两者时，选择一个或另一个。有一个细微但重要的[区别](http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/)。然后你可以像这样组合所有东西，它应该可以工作。

```
$(document).ready(function () {

    $('li, .thumbs').on('click', function () {

        // Add class
        $('#MyT').addClass('clear');

        // Video stuff
        var numb = $(this).index(),
            videos = [
                'images/talking1.m4v',
                'images/talking2.m4v', 
                'images/talking1.m4v', 
                'images/talking2.m4v', 
                'images/talking1.m4v', 
                'images/talking2.m4v'
            ],
            myVideo = document.getElementById('myVid');
            myVideo.src = videos[numb];

        myVideo.load();
        myVideo.play();

    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:15:32.020

为什么不像这样将两者结合在一起呢？我怀疑您的一个单击事件处理程序可能会覆盖另一个单击处理程序并导致它不注册。

```
$(window).load(function(){
    $('li', '.thumbs').on('click', function() {
        var numb = $(this).index(),
            videos = ['images/talking1.m4v', 'images/talking2.m4v', 'images/talking1.m4v', 'images/talking2.m4v', 'images/talking1.m4v', 'images/talking2.m4v'],
            myVideo = document.getElementById('myVid');
        myVideo.src = videos[numb]; 

        myVideo.load();
        myVideo.play();

        $('#MyT').addClass('clear');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T21:28:12.130

如果他不起作用，请将函数分开并使用`window.onload(*function*)`.

像这样：

```
function vP() {
   $('li', '.thumbs').on('click', function() {
      var numb = $(this).index(),
      videos = ['images/talking1.m4v', 'images/talking2.m4v', 'images/talking1.m4v', 'images/talking2.m4v', 'images/talking1.m4v', 'images/talking2.m4v'],
      myVideo = document.getElementById('myVid');
      myVideo.src = videos[numb]; 
      myVideo.load();
      myVideo.play();
   });
}
function iM() {
   $('li', '.thumbs').click(function() {
      $('#MyT').addClass('clear');
   });
}
window.onload(iM();vP();) 
```

# list - 列表上的 Haskell Monadic 操作

> ID：10474349
> 
> 赞同：2
> 
> 时间：2012-05-06T21:12:52.260
> 
> 标签：list, haskell, monads

我有以下

```
[3,2,1] >> [1]
= [1,1,1] 
```

我不完全明白为什么会这样？查看 >> 我希望 [3,2,1] 是结果，但我发现这在列表中有所不同。

谁能解释为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-06T21:22:17.187

对于任何 monad，您都可以翻译`a >> b`为`a >>= \_ -> b`. 在 list monad 中，绑定运算符`(>>=)`的`concatMap`参数被翻转，因此您的示例等效于

```
concatMap (\_ -> [1]) [3, 2, 1] 
```

你可以这样评估。

```
concatMap (\_ -> [1]) [3, 2, 1]
= concat (map (\_ -> [1]) [3, 2, 1])   -- definition of concatMap
= concat [[1], [1], [1]]               -- apply map
= [1, 1, 1]                            -- apply concat 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-06T21:20:31.470

`>>`可以这样定义：

```
ma >> mb = ma >>= const mb 
```

（这不是它在`Monad`实例中的实际定义 for `[]`，但这并不重要。）

在列表情况下，对于 中的每个元素`[1,2,3]`，您会得到`[1]`，并且总体结果等价于`concat [[1],[1],[1]]`，即`[1,1,1]`。

这是`[]`GHC.Base 中的实例：

```
m >>= k             = foldr ((++) . k) [] m
m >> k              = foldr ((++) . (\ _ -> k)) [] m 
```

我们在这里使用折叠连接左侧每个元素的右侧副本，忽略该元素可能是什么。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-06T23:38:25.237

回想一下，`return`对于列表是`\x -> [x]`. 如果我根据以下方面重写您的示例，也许会更清楚`return`

```
[1,2,3] >> return 1 
```

让我们添加一些 do 符号糖

```
do [1,2,3]
   return 1 
```

你现在能看到吗？`>>`不会从其左参数中提取值，仅从它们周围的*上下文中提取值。*在这种情况下，上下文是一个 3 元素列表，或者您可以说，3 个不同的选择都是非确定性选择的。然后在每种情况下，`return 1`。

如果你做了

```
do x <- [1,2,3]
   return x 
```

那么您*不是*在每种情况下都选择 1 ，而是`x`，它代表每个“分支”的特定选择。尝试猜测这将是什么结果，然后检查 ghci 看你是否正确。然后对其进行脱糖，并使用等式推理得到正确答案。

# c++ - 在 C++ 中，`var << ifstream` 是否与 `ifstream >> var` 相同？

> ID：10474350
> 
> 赞同：3
> 
> 时间：2012-05-06T21:13:13.037
> 
> 标签：c++, ifstream, extraction, insertion

是`var << ifstream`一样的`ifstream >> var`吗？

据我所知，它们应该完全相同。但是已经很晚了，我的大脑半睡半醒，所以我想澄清一下。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T21:19:40.897

他们不一样。`foo << bar`是`foo.operator<<(bar)`或`operator<<(foo, bar)`，`bar >> foo`而是`bar.operator>>(foo)`或`operator>>(bar, foo)`。

它们只是不同的东西。这些版本中的任何一个是否存在，更不用说是否存在*两个*版本它们是否执行相同的操作，完全取决于您的代码中的内容。

对于标准 iostream，通常只为某些用户定义类型定义以下两个自由函数，而没有其他函数`T`：

```
std::ostream & operator<<(std::ostream &, T const &);  // for "os << x"
std::istream & operator>>(std::istream &, T &);        // for "is >> y" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T21:19:58.343

不，它们调用完全不同的函数。一个打电话`operator >>`，另一个打电话`operator <<`。此外，两者的论点不同。

这类似于询问是否`F(int,double)`与调用相同`Q(double, int)`- 也许，也许不是 - 尽管我可以理解为什么这对于语言新手来说不是立即显而易见的。您首先需要意识到重载运算符并没有什么特别之处，它们只是函数调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T21:14:37.357

除非`var`定义了`<<`操作符或者定义为自由函数，否则前者是无效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T21:19:03.017

这里有一个小提示，表明两个表达式并不相同。Operatoras 也可以通过非常丑陋的语法来调用。你自己看：

```
var << ifstream; 
```

等于

```
var.operator<<(ifstream); 
```

和

```
ifstream >> var; 
```

等于

```
ifstream.operator>>(var); 
```

编辑：在下面的评论提醒之后 - 还有第三种选择。operator>> 也可以实现为一个函数：

```
returntype operator>>(ifstream, var);
returntype operator>>(var, ifstream); 
```

由于签名不匹配，它们的实现方式可能不同。

马蒂亚斯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T21:32:44.510

不，这不是一回事。约定是流参数始终位于`<<` `>>`运算符的左侧，而要读取/写入的值始终位于右侧。这有一个很好的理由：这些操作符可以像

```
std::cout << "Hello" << ',' << " world"; 
```

（与`istream`s 类似）这里发生了什么：`<<`运算符是左结合的，所以我们有

```
((std::cout << "Hello") << ',') << " world"; 
```

类型在哪里

```
std::cout                         :   std::ostream
(std::cout << "Hello")            :   std::ostream
((std::cout << "Hello") << ',')   :   std::ostream 
```

所以每次`operator<<(stream, value)`调用 a 时都会得到所需的结果。现在你想要的是扭转整个事情，比如

```
" world" >> ',' >> "Hello" >> std::cout; 
```

乍一看，它似乎应该做同样的事情。但它没有，因为这现在解析为

```
((" world" >> ',') >> "Hello") >> std::cout; 
```

你从哪里开始`operator>>(const char*, char)`。现在这个运算符如何知道结果最终会被放入一个`std::ostream`？

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-06T21:19:28.947

所需要做的就是查看[文档`ifstream`](http://www.cplusplus.com/reference/iostream/ifstream/)并查看仅`operator>>`定义的内容。

# javascript - 具有固定页眉和页脚、固定宽度侧边栏和灵活内容的布局

> ID：10474354
> 
> 赞同：22
> 
> 时间：2012-05-06T21:13:51.763
> 
> 标签：javascript, html, css, twitter-bootstrap

我正在尝试设置一个如下所示的布局： ![在此处输入图像描述](../Images/1d4f0dfe22ce79698b1e5ab136cd039e.png)

我想为该项目使用 twitter bootstrap，但我知道这可能不是实现看起来像这样的基本布局的最佳方式。我知道如何将页眉和页脚设置为固定在顶部和底部，但我很难让侧边栏保持恒定宽度并独立滚动。

我目前的实现在这里：http: [//jsfiddle.net/Mwkrw/3/](http://jsfiddle.net/Mwkrw/3/)。

[我尝试使用Fluid twitter bootstrap 2.0 中](https://stackoverflow.com/questions/9350818/fixed-sidebar-naviagion-in-fluid-twitter-bootstrap-2-0)的固定侧边栏导航设置固定侧边栏以及堆栈溢出的其他几个类似答案，但是当侧边栏长于内容并且据我所知没有办法时，它们都会中断给它一个独立的卷轴。

理想情况下，我想用纯 css 做到这一点 - 没有 javascript。我确信这是可能的，而且我缺乏技能和知识使我无法正确地做到这一点，因此不必要地添加 javascript 代码可能没有意义。（我仍在添加一个 javascript 标签以防万一）

感谢所有的帮助！

编辑：所以我的标题显然不需要固定位置。这是新的和改进的版本：http: [//jsfiddle.net/Mwkrw/4/](http://jsfiddle.net/Mwkrw/4/)不过，我仍然在为两个可滚动的 div 苦苦挣扎。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T03:45:44.623

魔法就在`box-sizing:border-box;`。为了与 Firefox、chrome<10 和 safari<5.1 兼容，请添加 -webkit- 和 -moz- 前缀。IE 从 8.0 开始支持它。

```
<!doctype html>
<html lang='en'>
    <head>
        <meta charset='utf-8'>
        <title>very structured layout</title>
        <style type='text/css'>
            *      {margin:0; padding:0;}
            body   {background:#fff; position:absolute; width:100%; height:100%;}
            #main  {background:#888; height:100%; padding:60px 0 40px; box-sizing:border-box;}
            #head  {background:#f8f; position:absolute; width:100%; height:60px;}
            #left  {background:#ff8; float:left; width:250px; height:100%; overflow:scroll;}
            #right {background:#8f8; height:100%; overflow:scroll;}
            #foot  {background:#f88; position:absolute; bottom:0; width:100%; height:40px;}​
        </style>
    </head>
    <body>
        <div id='head'>header: width = 100%, height = 40px</div>
        <div id='main'>
            <div id='left'>left: width = 250px, height = 100%</div>
            <div id='right'>right: width = 100% - 250px, height = 100%</div>
        </div>
        <div id='foot'>foot: width = 100%, height = 60px</div>​
    </body>
</html> 
```

[小提琴](http://jsfiddle.net/QH68c/1/)

**编辑**：在安德烈斯的解决方案让我意识到我可以实现更大的兼容性之后，我搞砸了一点，想出了一个替代解决方案，我认为它也更直观。它在 IE7 中不起作用，但在 IE8 中起作用。

该页面与上面相同，唯一的变化是 CSS 被替换为：

```
*      {margin:0; padding:0;}
body   {background:#fff;}
#main  {background:#888; position:absolute; top:40px; bottom:60px; width:100%;}
#head  {background:#f8f; position:absolute; width:100%; height:40px;}
#left  {background:#ff8; position:absolute; width:250px; height:100%; overflow:scroll;}
#right {background:#8f8; margin-left:250px; height:100%; overflow:scroll;}
#foot  {background:#f88; position:absolute; bottom:0; width:100%; height:60px;} 
```

[小提琴](http://jsfiddle.net/J6R3J/)

请注意，对于这两个版本，都`#head`需要`#foot`有一个`overflow`属性，`visible`除非它们的内容否则会延伸到页面之外。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-08T16:47:11.953

我通过首先创建一个垂直和水平拉伸 100% 的主容器类来设法获得您在帖子中模拟的布局，这样我们就可以将内容完全拉伸到视口的整个高度。在这个容器 div 中，我创建了另一个容器并在向各个方向拉伸时绝对定位它`top, left, bottom, right`，我觉得这种方法更干净，因为这样我可以轻松定位页眉和页脚而无需负边距（尝试过这样但是它没有用）。

这是布局的演示：http: [//jsfiddle.net/andresilich/gbzTN/1/show ，](http://jsfiddle.net/andresilich/gbzTN/1/show)[在此处](http://jsfiddle.net/andresilich/gbzTN/1/)编辑。

和代码：

**CSS**

```
html, body {
    height: 100%;
}

.main {
    *zoom:1;
}

.main, .row-fluid {
    height: 100%;
}

.main:before, .main:after,
.column:before, .column:after {
    content: "";
    display: table;
}

.main:after,
.column:after {
    clear: both;
}

.column {
    height: 100%;
    overflow: auto;
    *zoom:1;
}

.column .padding {
    padding: 20px;
}

.box {
    bottom: 40px;
    left: 0;
    position: absolute;
    right: 0;
    top: 40px;
}

.span9.full {
    width: 100%;
}

.footer {
    height: 40px;
    width: 100%;
    z-index: 100;
    background-color: red;
    bottom: 0;
    left:0;
    right:0;
    position: fixed;
} 
```

**HTML**

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container-fluid">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#">Project name</a>
      <div class="btn-group pull-right">
        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
          <i class="icon-user"></i> Username
          <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
          <li><a href="#">Profile</a></li>
          <li class="divider"></li>
          <li><a href="#">Sign Out</a></li>
        </ul>
      </div>
      <div class="nav-collapse">
        <ul class="nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div>
<div class="main clearfix">
    <div class="box">
        <div class="row-fluid">
            <div class="column span3">
                <div class="padding">
                    .. content ..
                </div>
            </div>
            <div class="column span9">
                <div class="padding">
                    <div class="full span9">
                        .. content ..
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="footer clearfix">
    <h3>footer</h3>
</div> 
```

**编辑**：注意到此解决方案在 IE7 中无法按预期工作（在 IE8 及更高版本中完美运行），因此这里有一个针对 IE8 以下所有内容的条件注释，应该可以解决问题并使其按预期工作：

**CSS**

```
<!--[if lt IE 8]>
    <style type="text/css">
        html {
            margin: 40px 0px;
            overflow: hidden
        }

        .main {
            zoom:1;
        }

        .column {
            overflow-x: hidden !important;
            overflow-y: scroll !important;
            zoom: 1;
        }

        .box {
            position: relative !important;
            min-height: 100%;
            height:100%;
            zoom: 1;
            top:0 !important;
        }

        .main {
            margin: 40px 0px;
        }
    </style>
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-26T13:21:05.213

现在**Bootstrap 4**出来了，我认为有些人可能会从这种布局中受益，这要归功于 flexbox。

[Bootstrap 4 演示](https://www.codeply.com/go/3VRsFPQDft/fixed-header-footer-sidebar-content)

```
<body class="container-fluid d-flex flex-column h-100 align-items-center px-0">
 <div class="row grow w-100">
    <div class="header col-12 bg-primary py-2">
        Header
    </div>
    <div class="side col-3 bg-light py-3 pl-0">
        Menu
    </div>
    <div class="main col bg-warning py-3">
        Main
    </div>
 </div>
 <div class="row w-100 footer bg-danger">
    <div class="col-12 py-3">
        Footer
    </div>
 </div>
</body>

.grow {
    flex: 1;
    overflow: hidden;
}

.main,.side {
    overflow-y: auto;
    height:calc(100% - 55px);
}

.footer,.header {
    height: 55px;
} 
```

# ruby-on-rails - 设计。根据他的电子邮件自动创建用户名

> ID：10474355
> 
> 赞同：1
> 
> 时间：2012-05-06T21:13:58.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

是否可以使用设计自动根据他的电子邮件创建用户名？

在注册页面上，我只有电子邮件和密码字段。

例如，当用户使用电子邮件创建新帐户时`randomname@gmail.com`，我希望他的用户名自动变为`randomname`. 我怎样才能实现它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T21:33:21.267

您可以使用正则表达式获取电子邮件地址的第一部分，如`^[^@]+`，这将返回从字符串开头开始的所有内容`@`。

```
^ /* start of string or line */
[^@] /* character class capturing everything except @ */
+ /* match must happen atleast one time */ 
```

要将用户名添加到数据库中，可以使用[回调](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)。

```
class User < ActiveRecord::Base
  before_create :set_username

  private
    def set_username
      self.username = self.email[/^[^@]+/]
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-02T07:24:10.367

要考虑名称相同但 URL 不同的电子邮件，您可以在末尾添加一个随机数。

```
self.username = "#{self.email[/^[^@]+/]}-#{SecureRandom.hex(1)}" 
```

这将返回`hoobas-1f`到`hoobas-3c`上述评论中的两封电子邮件。

# excel - VBA 工作表更改事件

> ID：10474356
> 
> 赞同：7
> 
> 时间：2012-05-06T21:14:01.853
> 
> 标签：excel, vba

我正在尝试在 Excel VBA 中使用工作表更改事件，但它似乎不起作用。

据我所知，只需定义处理函数“Worksheet_Change”就足够了，就像我在这里所做的那样：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Range("J1").Select
    If Target.Address = "$J$1" And ActiveCell.Value = 1 Then
        Range("B1").Select
        Dim c As Integer
        c = ActiveCell.Value
        c = c + 1
       ActiveCell.Value = c
    End If
End Sub 
```

问题是我不确定我应该在哪里定义它。我刚刚把它放在我制作第一个宏时自动生成的“module1”中。这个对吗？我对 VBA 很陌生，所以我对它还不太了解。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T21:20:47.760

您需要将它放在它适用的工作表中。换句话说，如果你想捕捉Sheet1上的变化事件，在VBA编辑器中，你需要把它放在VBAProject (Book_Name) > Microsoft Excel Objects > Sheet1中。

![在此处输入图像描述](../Images/8cbf9330783b0bb025cf3d2e39ed9ce3.png)

# iphone - iPhone - 模型类中的网络代码 - 代码设计问题

> ID：10474357
> 
> 赞同：2
> 
> 时间：2012-05-06T21:14:06.937
> 
> 标签：iphone, model-view-controller, design-patterns, architecture, uiviewcontroller

我有 2 个模型类*`User`*和*`Place`*.

我需要获取用户附近的地方，我从我的服务器获取的数据。用户具有 currentLocation 的属性。

因为 Place 类感觉更适合有一个方法，就像`getNearByPlacesForLocation`我认为将它作为我的 Place 类中的静态方法一样。

我想知道两件事：

1.  这听起来像正确的架构吗？
2.  将网络代码放入我的模型中（在本例中为 inside `getNearByPlacesForLocation`）是正确的方法吗？或者我应该使用一些像 'NetworkManager' 这样的单例？但同样在这种情况下，我的模型将无法重用，因为它依赖于这个“NetworkManager”类。你会怎么解决？

经过一番思考，我得到了这个设计： **User.m**

```
@implementation User

@synthesize currentLocation;

- (NSArray*) getNearbyPlaceForCurrentLocation
{
    [Place getNearByPlacesForLocation:currentLocation];
}

@end 
```

**地点.m**

```
#import "Place.h"
#import "NetworkServicesDataSource.h"

@implementation Place

static id<NetworkServicesDataSource> _networkDataSource;

+(void) setNetworkManager:(id<NetworkServicesDataSource>)networkDataSource
{
    _networkDataSource = networkDataSource;
}

+(NSArray*) getNearByPlacesForLocation:(CLLocationCoordinate2D) loc
{
    return [_networkDataSource getNearByPlacesForLocation:loc];
}

@end 
```

**网络服务数据源.h**

```
#import <Foundation/Foundation.h>

@protocol NetworkServicesDataSource <NSObject>

-(NSArray*) getNearByPlacesForLocation:(CLLocationCoordinate2D) loc;

@end 
```

这样我就可以进行某种依赖注入，而不依赖于我的 Place 类中的任何特定网络实现。

我仍然很好奇，但如果在每个模型类中都有这些方法比拥有一个`NetworkManager`单一职责是从服务器获取我请求的数据，我可以`NetworkManager`在我的`UIViewControllers`. 我觉得在我的内部与模型对象进行交互并从它们那里询问数据`UIViewController`更加干净和结构化，但我很高兴听到其他人的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:56:36.343

是的，你说的是完美。你的 UI 代码和控制器代码应该是分开的，如果你想把它放在其他应用程序中，或者如果你想制作另一个 iPad/iphone 版本的应用程序，你的相同代码将被重新使用。您只需要更改 UI 设置，如果您开发了一个网络管理器类，您可以轻松地将其放置到任何其他应用程序中，而且您的代码变得独立且非常易于维护。

# c# - Visual Studio 中断异步调用的异常，而不是被 Catch() 捕获

> ID：10474367
> 
> 赞同：2
> 
> 时间：2012-05-06T21:15:09.610
> 
> 标签：c#, exception, asynchronous, windows-8, windows-runtime

我有以下代码试图捕获由断开连接引起的异常：

```
try
{
    DataReaderLoadOperation op = dataReader.LoadAsync((uint)readBuffer.MaxLength());
    await op;  //  <-- Debugger show COMException here
    ReceiveCallback(op, op.Status);
}
catch (COMException e)
{
    Logger.Info("{0} disconnected. (Waiting)", this);
    Logger.Debug("{0} exception = {1}", this, e);
    OnDisconnected();
} 
```

为什么我的代码没有捕捉到它？这是异常的转储：

```
System.Runtime.InteropServices.COMException occurred   
  HResult=-2147014842   
  Message=An existing connection was forcibly closed by the remote host. (Exception from HRESULT: 0x80072746)   
  Source=mscorlib   
  ErrorCode=-2147014842   
  StackTrace:
       at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
       at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
       at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
       at Crystal.IO.Network.SocketClient.<WaitForIncoming>d__4.MoveNext() in d:\Crystal\library\IO\Network\SocketClient.cs:line 479   
  InnerException: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T21:50:09.930

更改您的调试器设置以不中断第一次机会异常。

# windows-phone-7 - 元素已经是另一个元素的子元素 - wp7

> ID：10474368
> 
> 赞同：1
> 
> 时间：2012-05-06T21:15:24.003
> 
> 标签：windows-phone-7, parent-child

***已编辑***

我有一个附加到富文本框的段落对象。我创建了一个单击事件来在richTextBOX 中的两个段落之间切换，但是即使我正在清除richTetxBox，我也总是会遇到这个异常。我的代码

```
 public bool Collapsed
    {
        set
        {
            _collapsed = value;

            Paragraph p = new Paragraph();
            richTextBox.Blocks.Clear();

            if (_collapsed)
            {
                p = backupParagraph;
                richTextBox.Blocks.Add(p);
            }
            else
            {
                p = paragraph;
                richTextBox.Blocks.Add(p);
            }

        }
        get
        {
            return _collapsed;
        }
    } 
```

我有一个在用户点击对象时触发的事件

```
 void rtb_Tap(object sender, GestureEventArgs e)
    {
        Collapsed = !_collapsed;
    } 
```

并尝试这个我在我的主页上有这个

```
 p.Title = "Tryout";
        p.Text = "Hello Hello <small>Hello</small> Hello, <b>is it gonna</b> change? <big>why</big> <small>don't</small>";
        p.Collapsed = true;

        ContentPanel2.Children.Add(p.richTextBox); 
```

现在，当我点击对象时，我得到了错误。

有什么建议么？

# asp.net - 如何在 SQL Server 2008 中启用更新选项

> ID：10474370
> 
> 赞同：0
> 
> 时间：2012-05-06T21:15:42.147
> 
> 标签：asp.net, vb.net, sql-server-2008

我在 ASP.NET（初学者）中工作，我尝试使用下面的代码进行更新查询。我尝试使用相同的代码从数据库中获取日期，它工作正常，但仅不适用于更新查询。

注意：我使用 LINQ

```
Dim updateCust = (From cust In db.Customers 
                  Where cust.CustomerID = "JILLF").ToList()(0)

updateCust.ContactName = "Jill Shrader"

Try
    db.SubmitChanges()
Catch
    ' Handle exception.
End Try

RefreshData() 
```

我从以下网址获得此代码：http: [//msdn.microsoft.com/en-us/library/bb907191.aspx](http://msdn.microsoft.com/en-us/library/bb907191.aspx)

我是否应该更改我的 SQL Server 2008 中的某些内容以便可以使用更新选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T21:26:30.320

问题是您将结果转换为 a`List`然后取第一个元素。您将获得数据，但它不再绑定到数据库。我相信这样的事情会起作用：

```
Dim updateCust = (From cust In db.Customers 
                  Where cust.CustomerID = "JILLF").FirstOrDefault()

If updateCust IsNot Nothing Then
    updateCust.ContactName = "Jill Shrader"
End If

db.SubmitChanges() 
```

**编辑**

虽然在这里可以正常工作，但如果有多个相同的记录（或广泛地返回更多记录），`FirstOrDefault()`您可能希望使用它会引发异常。我假设该列是主键列（看起来像）并且保证了行的唯一性。`SingleOrDefault()``CustomerID`

# php - 浏览器提示下载 php 文件而不是被渲染

> ID：10474371
> 
> 赞同：1
> 
> 时间：2012-05-06T21:15:43.383
> 
> 标签：php, .htaccess, content-type

今天早上，我正在对我的 .htaccess 文件进行更改，无意中破坏了我网站上的某些内容，我终其一生都无法弄清楚自己做了什么。现在浏览器提示下载 php 文件而不是被渲染。

在我进行更改之前，该站点运行正常。我尝试恢复到文件和 .htaccess 的原始备份副本，但我仍然遇到同样的问题。

我遇到问题的网站是[http://asteroidsinc.com/](http://asteroidsinc.com/)

但是，当我从 /index.php URL 访问时，它似乎运行正常。

标题如下：

```
GET / HTTP/1.1
Host: asteroidsinc.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Cookie: __utma=79720583.1041020739.1336336641.1336336641.1336336641.1;      __utmb=79720583.3.10.1336336641; __utmc=79720583; __utmz=79720583.1336336641.1.1.utmcsr=    (direct)|utmccn=(direct)|utmcmd=(none); __atuvc=2|19

HTTP/1.1 200 OK
Date: Sun, 06 May 2012 20:44:00 GMT
Server: Apache
Last-Modified: Thu, 03 May 2012 10:32:07 GMT
Accept-Ranges: bytes
Content-Length: 13811
Age: 6521
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: application/x-httpd-php 
```

最后一行“Content-Type: application/x-httpd-php”特别值得关注，因为我很确定它应该是“text/html”。

原始 .htaccess 文件如下（只需将 www 重定向到非 www）

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www\.asteroidsinc\.com$
RewriteRule ^(.*)$ "http\:\/\/asteroidsinc\.com\/$1" [R=301,L] 
```

我试图将以下内容添加到我的 .htaccess 文件中，但没有成功。

```
DirectoryIndex index.php 
```

但这并不能解决问题。

我还尝试了以下行

```
AddType application/x-httpd-php .php 
```

但我认为 php 实际上被正确解析，因为它在尝试通过 /index.php URL 访问它时工作

如上所述，我不确定我到底改变了什么，并尝试恢复到原始副本，但问题仍然存在。

*** *编辑我现在想知道问题是否是某种缓存问题，因为我完全删除了提示下载的 index.php 文件，但是当我尝试访问域 URL 时，它仍然提示我下载文件虽然它已从 Web 服务器中完全删除（我对缓存几乎一无所知）

******* *再次编辑我注意到的另一件有趣的事情是，当我在我的 URL 的末尾附加一个随机字符串（即[http://asteroidsinc.com/?random=1923849839](http://asteroidsinc.com/?random=1923849839)）时，它会加载得很好。这是否意味着这是一个缓存问题？当缓存最终被清除时它会消失吗？**

# regex - 正则表达式获取 Google+ 个人资料 ID

> ID：10474373
> 
> 赞同：0
> 
> 时间：2012-05-06T21:16:02.097
> 
> 标签：regex, google-plus

我希望从 Google+ 个人资料网址中提取 ID。
有人知道是否有特定的模式吗？

到目前为止，我看到个人资料链接是这样的：
`https://plus.google.com/u/0/108137335473606046188/posts`

所以我写下这个正则表达式：
`#/0/|[^\d]#`

它工作正常，但如果大 G 会改变模式，我会很不高兴......
有人有更多信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-06T13:45:57.277

这是我基于其他 facebook 正则表达式和基于 Dariusz 解决方案的解决方案：

```
((http|https):\/\/)?(www[.])?plus\.google\.com\/.?\/?.?\/?([0-9]*) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T22:03:49.620

这是我在 Google+ 个人资料 ID 上的解决方案：

```
'/plus\.google\.com\/.?\/?.?\/?([0-9]*)/i' 
```

整个例子：

```
if (preg_match('/plus\.google\.com\/.?\/?.?\/?([0-9]*)/i', $sUrl, $aMath)) {
    $iGooglePlusId = $aMath[1];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T01:55:35.020

你总是可以使用：

```
/\w/\w/|[^\d] 
```

这将消除 /u/0/ 搞砸的可能性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T22:46:15.520

该`/u/0`部分不一定是 URL 的一部分。它是 Google 帐户多登录支持的一部分，对于某些用户可能完全不存在，或者如果他们在不同的登录会话中使用 G+，则可能是其他数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-05T11:35:20.157

这个表达式可以省略附加参数的问题：

`/plus\.google\.com\/.?\/?.?\/?([0-9]*)/i`

# registration - ITK DICOM 系列注册

> ID：10474374
> 
> 赞同：1
> 
> 时间：2012-05-06T21:16:05.110
> 
> 标签：registration, dicom, itk

我正在尝试在两个不同的文件夹中读取两组不同的 DICOM 图像系列并执行注册。该系列似乎被正确阅读，一切顺利，直到注册->更新（）被调用。它直接崩溃，很可能在 Update() 中调用了一个中止函数。该程序在 2D 图像上运行良好。这是代码

```
 #include "itkImageRegistrationMethod.h"
   #include "itkMeanSquaresImageToImageMetric.h"

   #include "itkTimeProbesCollectorBase.h"
   #include "itkMemoryProbesCollectorBase.h"

   #include "itkBSplineTransform.h"
   #include "itkLBFGSBOptimizer.h"

   #include "itkImageFileReader.h"
   #include "itkImageFileWriter.h"

   #include "itkResampleImageFilter.h"
   #include "itkCastImageFilter.h"
   #include "itkSquaredDifferenceImageFilter.h"

   #include "itkGDCMImageIO.h"
   #include "itkGDCMSeriesFileNames.h"
   #include "itkNumericSeriesFileNames.h"
   #include "gdcmUIDGenerator.h"

   #include "itkImageSeriesReader.h"
   #include "itkImageSeriesWriter.h"

   #define SRI

   #include "itkCommand.h"
   class CommandIterationUpdate : public itk::Command
   {
   public:
     typedef  CommandIterationUpdate   Self;
     typedef  itk::Command             Superclass;
     typedef itk::SmartPointer<Self>   Pointer;
     itkNewMacro( Self );
   protected:
     CommandIterationUpdate() {};
   public:
     typedef itk::LBFGSBOptimizer       OptimizerType;
     typedef   const OptimizerType *    OptimizerPointer;

     void Execute(itk::Object *caller, const itk::EventObject & event)
       {
       Execute( (const itk::Object *)caller, event);
       }

     void Execute(const itk::Object * object, const itk::EventObject & event)
       {
       OptimizerPointer optimizer =
         dynamic_cast< OptimizerPointer >( object );
       if( !(itk::IterationEvent().CheckEvent( &event )) )
         {
         return;
         }
       std::cout << optimizer->GetCurrentIteration() << "   ";
       std::cout << optimizer->GetValue() << "   ";
       std::cout << optimizer->GetInfinityNormOfProjectedGradient() << std::endl;
       }
   };

   int main( int argc, char *argv[] )
   {
     if( argc < 4 )
       {
       std::cerr << "Missing Parameters " << std::endl;
       std::cerr << "Usage: " << argv[0];
       std::cerr << " fixedImageFile  movingImageFile outputImagefile  ";
       std::cerr << " [differenceOutputfile] [differenceBeforeRegistration] ";
       std::cerr << " [deformationField] ";
       return EXIT_FAILURE;
       }

     const    unsigned int    ImageDimension = 3;
     typedef  float           PixelType;

     typedef itk::Image< PixelType, ImageDimension >  FixedImageType;
     typedef itk::Image< PixelType, ImageDimension >  MovingImageType;

     const unsigned int SpaceDimension = ImageDimension;
     const unsigned int SplineOrder = 3;
     typedef double CoordinateRepType;

     typedef itk::BSplineTransform<
                               CoordinateRepType,
                               SpaceDimension,
                               SplineOrder >     TransformType;

     typedef itk::LBFGSBOptimizer       OptimizerType;

     typedef itk::MeanSquaresImageToImageMetric<
                                       FixedImageType,
                                       MovingImageType >    MetricType;

     typedef itk:: LinearInterpolateImageFunction<
                                       MovingImageType,
                                       double          >    InterpolatorType;

     typedef itk::ImageRegistrationMethod<
                                       FixedImageType,
                                       MovingImageType >    RegistrationType;

     MetricType::Pointer         metric        = MetricType::New();
     OptimizerType::Pointer      optimizer     = OptimizerType::New();
     InterpolatorType::Pointer   interpolator  = InterpolatorType::New();
     RegistrationType::Pointer   registration  = RegistrationType::New();

     registration->SetMetric(        metric        );
     registration->SetOptimizer(     optimizer     );
     registration->SetInterpolator(  interpolator  );

     TransformType::Pointer  transform = TransformType::New();
     registration->SetTransform( transform );

   #ifdef SRI
     typedef itk::ImageSeriesReader< FixedImageType > FixedImageReaderType;
     typedef itk::ImageSeriesReader< MovingImageType > MovingImageReaderType;

     typedef itk::GDCMImageIO ImageIOType;
     typedef itk::GDCMSeriesFileNames InputNamesGeneratorType;
     typedef itk::NumericSeriesFileNames OutputNameGeneratorType;
     typedef itk::ImageSeriesWriter< MovingImageType, MovingImageType >             SeriesWriterType;

     ImageIOType::Pointer gdcmIO = ImageIOType::New();

     InputNamesGeneratorType::Pointer fixedImageNames = InputNamesGeneratorType::New();
     InputNamesGeneratorType::Pointer movingImageNames =        InputNamesGeneratorType::New();

     fixedImageNames->SetInputDirectory( argv[1] );
     movingImageNames->SetInputDirectory( argv[2] );

     const FixedImageReaderType::FileNamesContainer & fixedNames = fixedImageNames-       >GetInputFileNames();
     const MovingImageReaderType::FileNamesContainer & movingNames = movingImageNames->GetInputFileNames();

   #else
     typedef itk::ImageFileReader< FixedImageType  > FixedImageReaderType;
     typedef itk::ImageFileReader< MovingImageType > MovingImageReaderType;
   #endif

     FixedImageReaderType::Pointer  fixedImageReader  = FixedImageReaderType::New();
     MovingImageReaderType::Pointer movingImageReader = MovingImageReaderType::New();

   #ifdef SRI
     fixedImageReader->SetImageIO( gdcmIO );
     movingImageReader->SetImageIO( gdcmIO );

     fixedImageReader->SetFileNames( fixedNames );
     movingImageReader->SetFileNames( movingNames );

   #else
     fixedImageReader->SetFileName(  argv[1] );
     movingImageReader->SetFileName( argv[2] );
   #endif

     FixedImageType::ConstPointer fixedImage = fixedImageReader->GetOutput();

     registration->SetFixedImage(  fixedImage   );
     registration->SetMovingImage(   movingImageReader->GetOutput()   );

     fixedImageReader->Update();

     FixedImageType::RegionType fixedRegion = fixedImage->GetBufferedRegion();

    registration->SetFixedImageRegion( fixedRegion );

     typedef TransformType::RegionType RegionType;

     unsigned int numberOfGridNodes = 8;

     TransformType::PhysicalDimensionsType   fixedPhysicalDimensions;
     TransformType::MeshSizeType             meshSize;
     TransformType::OriginType               fixedOrigin;

     for( unsigned int i=0; i< SpaceDimension; i++ )
       {
       fixedOrigin = fixedImage->GetOrigin()[i];
       fixedPhysicalDimensions[i] = fixedImage->GetSpacing()[i] *
         static_cast<double>(
         fixedImage->GetLargestPossibleRegion().GetSize()[i] - 1 );
       }
     meshSize.Fill( numberOfGridNodes - SplineOrder );

     transform->SetTransformDomainOrigin( fixedOrigin );
     transform->SetTransformDomainPhysicalDimensions(
       fixedPhysicalDimensions );
     transform->SetTransformDomainMeshSize( meshSize );
     transform->SetTransformDomainDirection( fixedImage->GetDirection() );

     typedef TransformType::ParametersType     ParametersType;

     const unsigned int numberOfParameters =
                  transform->GetNumberOfParameters();

     ParametersType parameters( numberOfParameters );

     parameters.Fill( 0.0 );

     transform->SetParameters( parameters );

     registration->SetInitialTransformParameters( transform->GetParameters() );

     std::cout << "Intial Parameters = " << std::endl;
     std::cout << transform->GetParameters() << std::endl;

     OptimizerType::BoundSelectionType boundSelect( transform->GetNumberOfParameters()        );
     OptimizerType::BoundValueType upperBound( transform->GetNumberOfParameters() );
     OptimizerType::BoundValueType lowerBound( transform->GetNumberOfParameters() );

     boundSelect.Fill( 0 );
     upperBound.Fill( 0.0 );
     lowerBound.Fill( 0.0 );

     optimizer->SetBoundSelection( boundSelect );
     optimizer->SetUpperBound( upperBound );
     optimizer->SetLowerBound( lowerBound );

     optimizer->SetCostFunctionConvergenceFactor( 1e+12 );
     optimizer->SetProjectedGradientTolerance( 1.0 );
     optimizer->SetMaximumNumberOfIterations( 500 );
     optimizer->SetMaximumNumberOfEvaluations( 500 );
     optimizer->SetMaximumNumberOfCorrections( 5 );

     CommandIterationUpdate::Pointer observer = CommandIterationUpdate::New();
     optimizer->AddObserver( itk::IterationEvent(), observer );

     itk::TimeProbesCollectorBase chronometer;
     itk::MemoryProbesCollectorBase memorymeter;

     std::cout << std::endl << "Starting Registration" << std::endl;

     try
       {
       memorymeter.Start( "Registration" );
       chronometer.Start( "Registration" );

       registration->Update();

       chronometer.Stop( "Registration" );
       memorymeter.Stop( "Registration" );

       std::cout << "Optimizer stop condition = "
                 << registration->GetOptimizer()->GetStopConditionDescription()
                 << std::endl;
       }
     catch( itk::ExceptionObject & err )
       {
       std::cerr << "ExceptionObject caught !" << std::endl;
       std::cerr << err << std::endl;
       return EXIT_FAILURE;
       }

     OptimizerType::ParametersType finalParameters =
                       registration->GetLastTransformParameters();

     std::cout << "Last Transform Parameters" << std::endl;
     std::cout << finalParameters << std::endl;

     // Report the time taken by the registration
     chronometer.Report( std::cout );
     memorymeter.Report( std::cout );

     transform->SetParameters( finalParameters );

     // resample and output 
```

我已经为此苦苦挣扎了几个星期，但仍然无法弄清楚问题所在。我试图在用户指南和示例中查找，但没有一个是在阅读 DICOM 图像系列。

如果有人能给我提供一个关于图像系列的 ITK 注册示例，那也会很有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:13:10.810

If you're uncertain that the DICOM series are read in correctly maybe you should try to test that part of the code first. I've used a similar example without problems. However, I read in both DICOM series and wrote them to a 3D dataset and then performed the registration. This might help out.

# c# - Linq-to-SQL 3 表，以列表形式获取结果

> ID：10474376
> 
> 赞同：1
> 
> 时间：2012-05-06T21:16:08.157
> 
> 标签：c#, asp.net, database, linq, linq-to-sql

今天我问了这个问题，但我错过了一些在这个问题中描述得更多的东西。

我有三张桌子：

```
[Table1]
 - ID // Unique
 - Name
 - Location
 - Country

[Table2]
 - ID - Unique
 - Table1.ID
 - Value

[Table3]
 - Table2.Value
 - LN
 - Name 
```

关系：

一个 Table1.ID 到多个 Table2.Table1.ID

我需要的是 ling-to-sql 查询，其中会得到类似的结果

1.  从 Table1 中获取所有内容
2.  对于 Table2.Table1.ID 中的所有 Table1.ID，将 Table2.Value 作为数组 (int)
3.  对于所有 Table2.value as array(int)，获取数组字符串 Table3.Name 其中 Table2.Value 等于 Table3.Table2.Value 并且 LN = "en"

例子：

表格1

```
 ID |  Name    |  Location    |   Country   |
  1 | TestName | TestLocation | SomeCountry | 
```

表2

```
 ID  |  FK | Val |
  1  |  1  |  5  | 
  2  |  1  |  7  | 
```

表3

```
Val | Ln |  Name     |
  5 | en | Testname1 |
  7 | en | Testname2 | 
```

结果：

```
1,TestName,TestLocation,SomeCountry,List<string>{Testname1,Testname2} 
```

我的 ling to sql 查询只得到 Table2.Value 作为 List，也许你可以做一些修改。

```
 var result = (from t1 in context.Table1

              select new CLASS
              {
                  ID = t1.ID,
                  NAME = t1.Name,
                  LOCATION = t1.loc,
                  COUNTRY = t1.Country,
                  CategoryArray = new List<int>(t1.Tabel2.Select(p => p.CategoryID).ToArray())

              }).Take(10).ToList(); 
```

ASP.NET C# 4.0 LINQ TO SQL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T22:16:18.877

你需要一个子查询；尝试这个：

```
{
    ID = t1.ID,

    NAME = t1.Name,

    LOCATION = t1.loc,

    COUNTRY = t1.Country,

    CategoryArray = (from t3 in Table3
                     where t2.Value == t3.Value && t3.Ln == "en"
                     select t3.Name).ToList()
} 
```

如果在 CLASS 对象模型中您将 CategoryArray 定义为，`List<int>`那么您需要使用`.ToList()`而不是`.ToArray()`

我没有发现这很清楚：*“对于所有 Table2.value 作为数组（int），获取数组字符串 Table3.Name 其中 Table2.Value 等于 Table3.Table2.Value 和 LN =“en”*不确定您是否还需要一个与 Table1 加入子查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T08:08:57.673

也许在这个例子中多连接会起作用？

我想到了这些方面的一些事情：

```
 var result =   from a in table1
                join b in table2 on a.id equals b.table1id
                join c in table3 on b.value equals c.table2value
                select new {Value = b.value, Name = c.Name} 
```

我不确定您希望按什么对结果进行分组 - 但如果上述方法有效，那么您可以按值或 id 进行分组以获取名称列表。
但是，如果没有数据，要对此进行测试并不容易。

**编辑：**

如果您对帖子中的查询感到满意，那么要获取与 CategoryArray 中的所有值关联的所有名称的列表，您可以尝试以下查询：

```
var res = table3
            .Where(c => CategoryArray.Contains(c.table2value))
            .Select(c => c.Name)
            .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-22T11:30:41.033

你也可以这样：

```
public List<string> GetClientImagePath()
        {
            //return objDAL.GetClientImagePath();
            List<string> clientimagepath = new List<string>();
            DataSet ds = new DataSet();

            try
            {
                ds = objDAL.GetClientImagePath();
                if (ds.Tables.Count > 0)
                {
                    ds.Tables[0].TableName = "clientimagepath";
                    clientimagepath = (from DataRow dr in ds.Tables["clientimagepath"].Rows
                                       select Convert.ToString(dr["ImagePath"])
                                        ).ToList();
                }
            }
            catch (Exception ex)
            {
                throw ex;
            }
            return clientimagepath;
        } 
```

# css - 使用 iframe 嵌入 Flash 内容时的 Webkit 字体渲染

> ID：10474381
> 
> 赞同：5
> 
> 时间：2012-05-06T21:17:31.503
> 
> 标签：css, fonts, webkit

如果您使用的是 Mac，请参阅[http://jsfiddle.net/CVwXV/2/ 。](http://jsfiddle.net/CVwXV/2/)

当您在 Mac 上的 Chrome 或 Safari (webkit) 上查看此内容时，文本会跳转到更浅的阴影/颜色。

mac上的firefox没问题。

如果您删除包含 youtube 视频的 html 中的第二个 ARTICLE 并再次运行，它会在 webkit 中正常呈现。

有任何想法吗？这肯定不仅仅是我的机器在做这个。

谢谢。

编辑：似乎与抗锯齿有关。[http://jsfiddle.net/CVwXV/3/](http://jsfiddle.net/CVwXV/3/) 如果我这样做..

```
-webkit-font-smoothing: antialiased !important;
font-smoothing: antialiased !important; 
```

然后没有跳转......但它在Firefox和Chrome之间看起来仍然有很大不同。FF 在左边，Chrome 在右边。

![演示](../Images/ff259cd1cf8700ae13d8bc70ce29c468.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:27:31.813

好吧，我一直有同样的问题，我想我找到了一个“好的”解决方案。我有一个 div 稍微重叠了一个 iframe，里面有 Flash。那个重叠的 div 的字体平滑搞砸了。要修复它，我只需要同时放置`z-index`iframe 和重叠 div。为了使其工作，iframe 必须位于 div 的顶部（更高`z-index`）。在上面的示例中，似乎没有任何东西与 iframe 重叠，但每个元素的边界可能略有重叠。您可以使用 Safari 或 Chrome 中的网络检查器查看它。但我只是从`z-index`添加 iframe 和弄乱字体平滑的元素开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:48:00.433

我按照上面markstewie的链接做了一些我自己的测试。通过反复试验，我已经在我正在处理的网站上解决了这个问题。它发生在 safari 和 chrome 中的三个不同实例中。

第一个实例是在与包含文本的元素相同的容器中显示和隐藏下拉列表时。当在 jQuery 中调用 .show() 时，文本会变得更轻，而当调用 .hide() 时，文本会变得更重。

第二个例子是当一个包含文本的固定元素与另一个包含文本的元素重叠时，它会变得更轻，当下面的文本层移开时，固定元素的副本会再次变得更重。

第三个是当 Flash 元素加载到页面上时，字体会变浅。

似乎当文本变得更轻时，字体的渲染从“亚像素抗锯齿”变为“抗锯齿”。通过设置强制对所有类型进行“抗锯齿”平滑

-webkit-font-smoothing：抗锯齿；

在正文上，字体在页面加载时以更轻的重量呈现，并且在任何这些情况下都不会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T04:15:54.740

我也遇到了这个问题。

我通过将 iFrame 放在两个 div 中来修复它。我将第一个 div 设置为位置：相对，宽度：100%，并将高度设置为我的播放器所需的高度。我设置为位置的第二个 div：绝对。

由于 iFrame 现在位于绝对定位的 div 中，它不再强制页面上的文本在 Safari 中加载页面时进行抗锯齿处理。

# php - 如何定义一个路由来处理带有页面参数和没有它的请求？

> ID：10474383
> 
> 赞同：0
> 
> 时间：2012-05-06T21:17:52.900
> 
> 标签：php, zend-framework, url-routing

我需要一个路由定义（如果可能的话），它将处理两个请求：

*   [http://www.example.com/list](http://www.example.com/list)
*   [http://www.example.com/list/2](http://www.example.com/list/2)

第一个是显示列表的前 10 个元素，第二个是显示第二个“页面”以及接下来的 10 个元素。

重要提示：我还想（在视图中）：

```
$this->url(array(), 'list'); 
```

创建[http://www.exaple.com/list](http://www.exaple.com/list) URL，而不是[http://www.example.com/list/1](http://www.example.com/list/1)

我已经拥有的是：

```
<list type="Zend_Controller_Router_Route_Regex">
    <route>list(?:/(\d+))?</route>
    <defaults>
        <controller>index</controller>
        <action>list</action>
        <page>1</page>
    </defaults>
    <map>
        <page>1</page>
    </map>
    <reverse>list/%d</reverse>
</list> 
```

它处理这两个请求，但反向创建[http://www.example.com/list/1](http://www.example.com/list/1) URL。

如果一条路线不可能 - 处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T21:39:24.107

您需要提供 null 作为 page 而不是 1 的默认值，但我认为使用 XML 路由是不可能的，因为 Zend_Config_Xml 不支持`null`作为特殊值（它将解释为字符串 'null'）。

您可以使用标准路由类解决此问题：

```
<list type="Zend_Controller_Router_Route">
<route>list/:page</route>
    <defaults>
        <controller>index</controller>
        <action>list</action>
        <page>null</page>
    </defaults>
    <reqs>
        <page>\d+</page>
    </reqs>
</list> 
```

这里唯一的怪癖是，如果 URL 中没有页面变量，您将获得字符串值“null”作为页面参数。

如果您要为路由使用 ini 文件，或者在 PHP 中定义它们，您不应该遇到这个问题。

# php - 使用 php 从表单中收集表单数据并通过电子邮件发送

> ID：10474384
> 
> 赞同：1
> 
> 时间：2012-05-06T21:17:53.157
> 
> 标签：php, xhtml

我正在为锅炉工程师建立一个网站，网站上有一个表格，我想收集用户提供的数据并通过电子邮件发送，表格如下 -

```
<form name="fix" method="POST" action="http://localhost/PHP/fixscript.php">
<table width="800" border="0" cellspacing="10" cellpadding="5">
<tr>
<td width="230" valign="top" align="right">First name: </td>
<td width="503" valign="top" align="left">
<input type="text" name="fName" id="fName" size="50" maxlength="20" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">Surname: </td>
<td width="503" valign="top" align="left">
<input type="text" name="lName" id="lName" size="50" maxlength="20" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">Contact phone number: </td>
<td width="503" valign="top" align="left">
<input type="text" name="phone" id="phone" size="50" maxlength="20" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">Email: </td>
<td width="503" valign="top" align="left">
<input type="text" name="email" id="email" size="50" maxlength="75" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">House name or number: </td>
<td width="503" valign="top" align="left">
<input type="text" name="num" id="num" size="50" maxlength="75" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">First line of your address: </td>
<td width="503" valign="top" align="left">
<input type="text" name="address1" id="address1" size="50" maxlength="100" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">Second line of your address: </td>
<td width="503" valign="top" align="left">
<input type="text" name="address2" id="address2" size="50" maxlength="100" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">Town/City: </td>
<td width="503" valign="top" align="left">
<input type="text" name="city" id="city" size="50" maxlength="50" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">County: </td>
<td width="503" valign="top" align="left">
<input type="text" name="county" id="county" size="50" maxlength="50" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">Post code: </td>
<td width="503" valign="top" align="left">
<input type="text" name="postCode" id="postCode" size="50" maxlength="10" /></td>
</tr>
<tr id="fuel">
<td width="230" valign="top" align="right">Fuel Type: </td>
<td width="503" valign="top" align="left">
<input type="radio" name="fuelType" id="fuel1" value="Natural Gas" onclick="showOptions(this);" />
<label for="fuel1">Natural Gas</label>
<input type="radio" name="fuelType" id="fuel2" value="LPG" onclick="showOptions(this);" />
<label for="fuel2">LPG</label>
<input type="radio" name="fuelType" id="fuel3" value="Oil" onclick="showOptions(this);" />
<label for="fuel3">Oil</label>
</td>
</tr>
<tr id="bmgas">
<td width="230" valign="top" align="right">Boiler manufacturer: </td>
<td width="503" valign="top" align="left">
<select name="gas" id="gas" >
<option value="0">Natural Gas</option>
<option value="Alpha Boilers">Alpha Boilers</option>
<option value="Ariston">Ariston</option>
<option value="Baxi">Baxi</option>
<option value="Biasi">Biasi</option>
<option value="Broag">Broag</option>
<option value="Ferroli">Ferroli</option>
<option value="Glowworm">Glowworm</option>
<option value="Halstead Heating">Halstead Heating</option>
<option value="Ideal Boilers">Ideal Boilers</option>
<option value="Ikon">Ikon</option>
<option value="Jaguar">Jaguar</option>
<option value="Johnson &amp; Starlay">Johnson &amp; Starlay</option>
<option value="Keston Boilers">Keston Boilers</option>
<option value="Potterton">Potterton</option>
<option value="Range Powermax">Range Powermax</option>
<option value="Raven Heat">Raven Heat</option>
<option value="Vaillant">Vaillant</option>
<option value="Viessmann">Viessmann</option>
<option value="Vokera">Vokera</option>
<option value="Worcester">Worcester</option>
<option value="Unknown">Unknown</option>
<option value="Not Listed">Not Listed</option>
</select>
</td>
</tr>
<tr id="bmlpg">
<td width="230" valign="top" align="right">Boiler manufacturer: </td>
<td width="503" valign="top" align="left">
<select name="lpg" id="lpg">
<option value="0">LPG</option>
<option value="Alpha Boilers">Alpha Boilers</option>
<option value="Baxi">Baxi</option>
<option value="Keston Boilers">Keston Boilers</option>
<option value="Potterton">Potterton</option>
<option value="Vaillant">Vaillant</option>
<option value="Viessmann">Viessmann</option>
<option value="Worcester">Worcester</option>
<option value="Unknown">Unknown</option>
<option value="Not Listed">Not Listed</option>
</select>
</td>
</tr>
<tr id="bmoil">
<td width="230" valign="top" align="right">Boiler manufacturer: </td>
<td width="503" valign="top" align="left">
<select name="oil" id="oil">
<option value="0">Oil</option>
<option value="Buderas">Buderas</option>
<option value="Danesmoor">Danesmoor</option>
<option value="Firebird">Firebird</option>
<option value="Grant">Grant</option>
<option value="HRM">HRM</option>
<option value="Nuway Oil">Nuway Oil</option>
<option value="Thermeco">Thermeco</option>
<option value="Trianco">Trianco</option>
<option value="Worcester">Worcester</option>
<option value="Unknown">Unknown</option>
<option value="Not Listed">Not Listed</option>
</select>
</td>
</tr>
<tr id="sevice">
<td width="230" valign="top" align="right">Last Service: </td>
<td width="503" valign="top" align="left">
<select name="lastServ" id="lastServ">
<option value="0">Last Service</option>
<option value="6 months">Less than 6 months ago</option>
<option value="1 year">One year ago</option>
<option value="2 years">Two years ago</option>
<option value="never">Never been serviced</option>
<option value="unknown">unknown</option>
</select>
</td>
</tr>
<tr id="message">
<td class="form" width="230" valign="top" align="right">Your message: </td>
<td width="503" valign="top" align="left">
<textarea name="msg" id="msg" cols="40" rows="10"></textarea>
</td>
</tr>
<tr id="message1">
<td width="230" valign="top" align="right">Brief Description of fault: </td>
<td width="503" valign="top" align="left">
<textarea name="msg1" id="msg1" cols="40" rows="10"></textarea>
</td>
</tr>
<tr>
<td width="230" valign="top"> </td>
<td width="503" valign="top" align="left">
<input type="button" name="return" id="return" class="button" value="Return"  onclick="location.reload;" />&nbsp;&nbsp;&nbsp;&nbsp;
<input type="reset" name="reset" class="button2" value="Reset" onclick="hide(bmgas, bmlpg, bmoil);" />&nbsp;&nbsp;&nbsp;&nbsp;
<input type="submit" name="submit" class="button3" value="Submit" onsubmit="checkForm();" />
</td>
</tr>
</table>
</form> 
```

我有以下 php 来收集数据并发送电子邮件，它发送电子邮件但它不收集提供的任何数据.....我收到空白电子邮件！

```
<?php

// VALUES FROM THE FORM

$first      = $_POST['fName'];
$last       = $_POST['lName'];
$phone      = $_POST['phone'];
$email      = $_POST['email'];
$number     = $_POST['num'];
$address1   = $_POST['address1'];
$address2   = $_POST['address2'];
$city       = $_POST['city'];
$county     = $_POST['county'];
$postCode   = $_POST['postCode'];
$fuelType   = $_POST['fuelType'];
$fuelGas    = $_POST['gas'];
$fuelLpg    = $_POST['lpg'];
$fuelOil    = $_POST['oil'];
$lastServ   = $_POST['lastServ'];
$msg        = $_POST['msg'];
$msg1       = $_POST['msg1'];

// CREATE THE EMAIL

$headers    = "Content-Type: text/plain; charset=iso-8859-1\n";

$headers    = "From: $first $last <$email>\n";

$recipient  = "blah@gmail.com";

$subject    = "Message from blah.com";

$message    = wordwrap($message, $fName, $lName, $phone, $number, $address1, $address2, $city, $county, $postCode, $fuelType, $fuelGas, $fuelLpg, $fuelOil, $lastServ, $msg, $msg1, 1024);

// SEND THE EMAIL TO YOU

mail($recipient, $subject, $message, $headers);

// REDIRECT TO THE THANKS PAGE

header("location: thanks.php"); 
```

?>

请帮忙，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T21:27:34.303

您没有正确使用 wordwrap 函数，您只需要传递一个字符串。在将字符串传递给 wordwrap 之前附加字符串。

```
$message = $fName . $lName . $... 
```

另请参阅[http://php.net/manual/en/function.wordwrap.php上的 wordwrap 功能](http://php.net/manual/en/function.wordwrap.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:57:55.580

我知道是什么问题，看看有些数据不会恢复，因为你使用了错误的自动换行参数，看看：

```
$message    = wordwrap($message, $fName, $lName, $phone, $number, $address1, $address2, $city, $county, $postCode, $fuelType, $fuelGas, $fuelLpg, $fuelOil, $lastServ, $msg, $msg1, 1024); 
```

如果您使用 是不正确的`$fName`，它`$_POST['fName']`在您的 ABOVE 代码中声明，但 $city 确实是从转移`$_POST`到局部变量中的。

您必须将`$fName`代码更改为 $first 和其他变量。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T09:13:59.330

好的，我设法做到了-

```
<?php

// VALUES FROM THE FORM

$first      = $_REQUEST['fName'];
$last       = $_REQUEST['lName'];
$phone      = $_REQUEST['phone'];
$email      = $_REQUEST['email'];
$number     = $_REQUEST['num'];
$address1   = $_REQUEST['address1'];
$address2   = $_REQUEST['address2'];
$city       = $_REQUEST['city'];
$county     = $_REQUEST['county'];
$postCode   = $_REQUEST['postCode'];
$fuelType   = $_REQUEST['fuelType'];
$fuelGas    = $_REQUEST['gas'];
$fuelLpg    = $_REQUEST['lpg'];
$fuelOil    = $_REQUEST['oil'];
$lastServ   = $_REQUEST['lastServ'];
$msg        = $_REQUEST['msg'];
$msg1       = $_REQUEST['msg1'];

$fields = array();
$fields{"fName"} = "First Name";
$fields{"lName"} = "Last Name";
$fields{"phone"} = "Phone Number";
$fields{"email"} = "Email";
$fields{"num"} = "House Number or Name";
$fields{"address1"} = "First Line Of Address";
$fields{"address2"} = "Second Line Of Address";
$fields{"city"} = "Town Or City";
$fields{"county"} = "County";
$fields{"postCode"} = "Post Code";
$fields{"fuelType"} = "Fuel Type";
$fields{"gas"} = "Gas Boiler Type";
$fields{"lpg"} = "LPG Boiler Type";
$fields{"oil"} = "Oil Boiler Type";
$fields{"lastServ"} = "last Serviced";
$fields{"msg"} = "Message";
$fields{"msg1"} = "Description of fault";

// CREATE THE EMAIL

$headers    = "Content-Type: text/plain; charset=iso-8859-1\n";

$headers    = "From: $first $last <$email>\n";

$recipient  = "blah@gmail.com";

$subject    = "Message from iFixBoilers.com";

$message    = "A message has been sent from: \n\n"; foreach($fields as $a => $b){ $message .= sprintf("%20s: %s\n",$b,$_REQUEST[$a]); }

// SEND THE EMAIL TO YOU

mail($recipient, $subject, $message, $headers);

// REDIRECT TO THE THANKS PAGE

header("location: thanks.php"); 
```

?>

唯一的问题是邮件像

```
A message has been sent from: 

          First Name: rob
           Last Name: whatever
        Phone Number: 01901111118
               Email: blah@gmail.com House Number or Name: 1001 First Line Of Address: where ever crescent Second Line Of Address: bton by sea
        Town Or City: bton
              County: sussex
           Post Code: bn11 1bb
           Fuel Type: Natural Gas
     Gas Boiler Type: Glowworm
     LPG Boiler Type: 0
     Oil Boiler Type: 0
       last Serviced: 2 years
             Message: 
Description of fault: sdfgdfgdgdfgdgdfgdgdgsd 
```

为什么房屋名称或号码/第一行地址/第二行地址没有损坏？

# c# - WMI 和 C# - 没有结果

> ID：10474385
> 
> 赞同：1
> 
> 时间：2012-05-06T21:18:08.930
> 
> 标签：c#, wmi

我有以下代码并尝试查找 AP 的 MAC 地址。代码运行，但它不返回任何内容。我究竟做错了什么？

```
using System;
using System.Management;

public class wifiTest
{
    public static int Main(string[] args)
    {

        String query = "SELECT * FROM MSNDis_80211_BSSIList";
        ManagementObjectSearcher searcher = new ManagementObjectSearcher("root/WMI", query);
        ManagementObjectCollection moc = searcher.Get();
        ManagementObjectCollection.ManagementObjectEnumerator moe = moc.GetEnumerator();
        moe.MoveNext();
        ManagementBaseObject[] objarr = (ManagementBaseObject[])moe.Current.Properties["Ndis80211BSSIList"].Value;
        foreach (ManagementBaseObject obj in objarr)
        {
            uint u_rssi = (uint)obj["Ndis80211Rssi"];
            int rssi = (int)u_rssi;    

            int macAd = (int)obj["Ndis80211MacAddress"];

            Console.WriteLine("RSSI=" + rssi);
            Console.WriteLine("Mac=" + macAd);               
        }
        return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T22:25:29.583

仅当`MSNDis_80211_BSSIList`您的 wifi 适配器的驱动程序为此类实现 WMI 提供程序时才检索数据。[`Native Wifi API`](http://msdn.microsoft.com/en-us/library/ms705969.aspx)如果您使用的是 C#，请考虑使用替代方案，请检查此项目[`Managed Wifi API`](http://managedwifi.codeplex.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T22:22:45.500

在托管代码中处理 WMI 时，我强烈建议您使用[Management Strongly Typed Class Generator](http://msdn.microsoft.com/en-us/library/2wkebaxa%28v=vs.100%29.aspx)，而不是直接处理`ManagementObjectSearcher`对象等。

> Management Strongly Typed Class Generator 工具使您能够为指定的 Windows Management Instrumentation (WMI) 类快速生成早期绑定托管类。生成的类简化了访问 WMI 类实例所必须编写的代码。
> 
> 此工具随 Visual Studio 和 Windows SDK 一起自动安装。

此外，您可能想熟悉[wbemtest](http://technet.microsoft.com/en-us/library/ee692770.aspx)，这是一个简单的工具，您可以使用它检查您的查询。

# jquery - 仅验证脏输入

> ID：10474387
> 
> 赞同：3
> 
> 时间：2012-05-06T21:18:12.133
> 
> 标签：jquery, asp.net-mvc

我当前的 Web 项目有一个管理界面，可以在其中编辑用户的详细信息（我承认，这并不是真正的革命……）。该视图使用用户的强类型模型，具有验证属性：

```
public class UserPrototype
{
    [Required]
    [StringLength(50, MinimumLength = 4)]
    public string Username { get; set; }

    [Required]
    [StringLength(50, MinimumLength = 1)]
    public string FirstName { get; set; }

    [Required]
    [StringLength(50, MinimumLength = 1]
    public string LastName { get; set; }

    [Required]
    [StringLength(250, MinimumLength = 6]
    public string Password { get; set; }

    /*
      And so on
    */
} 
```

当用户更新时，我只想在数据库中更新那些实际发生变化的字段。主要原因是密码字段 - 密码当然存储为哈希，因此当用户被检索以进行编辑时，该字段中没有任何有意义的显示。但是模型绑定器验证需要一个有效的密码。

那么，我是否仍然可以使用同一个类，但以某种方式只验证那些提交为已更改的字段（这我可以通过 javascript 完成）？我想避免复制`UserPrototype`类只是为了删除`Required`属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T21:23:59.900

使用继承，这样你就不必重复了。

```
public class BaseUserPrototype
{
    [Required]
    [StringLength(50, MinimumLength = 4)]
    public string Username { get; set; }

    [Required]
    [StringLength(50, MinimumLength = 1)]
    public string FirstName { get; set; }

    [Required]
    [StringLength(50, MinimumLength = 1]
    public string LastName { get; set; }

    /*
      And so on
    */
}

public class NewUserPrototype: BaseUserPrototype
{
    [Required]
    [StringLength(250, MinimumLength = 6]
    public string Password { get; set; }

    /*
      And so on
    */
}
public class EditUserPrototype: BaseUserPrototype
{
    [StringLength(250, MinimumLength = 6]
    public string Password { get; set; }
    /*
      And so on
    */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:41:17.273

您可以使用 IDataErrorInfo 接口；以这种方式在您的实体上实现它：

```
public class Entity: IDataErrorInfo
{
// this is the dictionary of errors
    private readonly Dictionary<string, string> _errors = new Dictionary<string, string>();
    private string _password;

    public string Password
    {
        get{return _password;}
        set
        {
        // YOUR ACTUAL VALIDATION CODE HERE. IF THERE IS A VALIDATION ERROR - ADD IT TO THE DICTIONARY
            if(string.IsNullOrEmpty(value))
            _errors["Password"] = "Error with password field";
        }
    }
} 
```

# qt - 包括 Visual Studio 2010 中的 Qt 标头

> ID：10474397
> 
> 赞同：1
> 
> 时间：2012-05-06T21:19:32.573
> 
> 标签：qt, header

我遇到了问题，这对我来说很难应付。我搜索了所有可能的站点并尝试了很多操作并花了将近 10 个小时，但问题仍然存在。

问题描述：

我使用 Visual Studio 2010。我安装了 Qt 库：Qt 库 4.8.1 for Windows（VS 2010，235 MB）还安装了 Qt Visual Studio 插件。
我记得我在 cmd 行中输入了一些东西（包括环境变量），文本是在堆栈溢出中给出（现在我失去了该主题的链接并且找不到它）。
所以我设置了 Qt 库并且它起作用了。不小心我安装了visual studio 2008，问题开始了。
以前我能够包含 Qt 标头，例如：

```
#include <QtCore>
#include <QtGui> 
```

但现在我必须指定完整路径

```
#include<QtCore\...> 
```

QtCore 显示为文件夹，这是以前没有的。这对我来说非常不方便。

所以请告诉我，这样做可以解决这个问题（无需指定 Qt 标头的完整路径）。我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T03:08:35.657

您只需要在包含目录中添加更多目录

```
$(QTDIR)\include
$(QTDIR)\include\QtGui
$(QTDIR)\include\Qtcore
$(QTDIR)\include\QtOpenGL 
```

但并不奇怪`$(QTDIR)\include\Qt`！如果您收到有关直接包含的警告，请检查您没有`include\Qt`在列表中

如果您使用 VS2010 插件创建项目，它将为您添加这些目录

* * *

编辑：评论有点长，所以我会尝试解释。

顶层`$(QTDIR)\include`没有任何包含文件 (.h)，但它是必需的，因此其他包含可以使用与此相关的路径，例如`#include <QtCore/QtCore>`

Qt 出于他们自己最熟悉的原因（但可能是由于漫长的冬夜和使用 Aquavit）使用没有 .h 扩展名的包含文件作为模块的主包含文件，然后将其放在具有相同名称的目录中。

因此，您添加`$(QTDIR)\include\QtGui`到包含路径列表，然后`#include <GtGui>`从其中添加，这将依次为所有 gui 函数加载所有 100 个单独的 .h 文件。

预处理器忽略文件和目录具有相同名称的事实 - 它知道不要尝试包含目录。

提示：请参阅[Visual Studio intellisense 以获取不带 .h](https://stackoverflow.com/questions/210247/visual-studio-intellisense-for-headers-without-h)的标头以处理标头和 intellisense

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T02:38:35.617

您可能会发现这个关于从源代码安装 Qt 的[演练非常有帮助。](http://eecs.vanderbilt.edu/research/hmtl/wiki/pmwiki.php?n=Knowledge.Qt)这是我多年来一直使用 Visual Studio 安装 Qt 的方式，我从未遇到任何问题，包括您提到的问题。

您是否使用 qmake 生成您的 .sln？也许您可以对您的安装过程提供更多见解，也许我（或其他人）可以提供更多帮助。

此外，我个人认为[QtWizard2010](http://www.sanfordfreedman.com/utilities/)是一种在 Visual Studio 中生成 Qt 项目的非常简单且集成良好的方式。也许在这里可能会有所帮助。

# svn - svn 在将结果提交到错误之前使用新文件更新结帐

> ID：10474398
> 
> 赞同：1
> 
> 时间：2012-05-06T21:19:33.470
> 
> 标签：svn

我有`checkout`我的项目到一个文件夹，所以我可以提交更改，然后`update`通过

```
svn up 
```

命令

现在，当我想将文件夹 A 从本地 Web 服务器移动到`checkout`文件夹并提交更改时，我收到以下错误：

```
Commit failed (details follow): Directory '[directory]folderA/.svn' containing working copy admin area is missing 
```

知道我收到此错误是因为粘贴新文件后缺少 .svn 文件，所以除了一一添加更新的文件外，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:16:26.680

我认为在 UNIX 上简单`cp -R fromdir/folderA/* todir/folderA`就可以了。

在 Windows 上，您可以使用[Total Commander](http://www.ghisler.com/)等工具，它允许您“深度复制”目录树而不会覆盖您的 .svn 。

# java - 使用数组的 hashcode() 模数长度返回空指针异常

> ID：10474401
> 
> 赞同：0
> 
> 时间：2012-05-06T21:19:50.147
> 
> 标签：java, nullpointerexception, hashcode

我正在尝试使用字符串的哈希码和数组长度的模数来获取应该为哈希表存储它的位置的索引。这是我认为我搞砸的地方：

数组声明和构造函数：

```
private Bucket[] list;

public Hash() {
    list = new Bucket[8];
} 
```

和实际的代码：

```
//if such a key exists already, you should replace its value
public void insert(String key, Textbook value) {
    rehash();
    if(list[key.hashCode()%list.length].insert(key, value)) size++;
}

//checks if the key exists
public boolean contains(String key) {
    return (list[key.hashCode()%list.length] != null) ? list[key.hashCode()%list.length].contains(key) : false;
}

public void remove(String key) {
    if(list[key.hashCode()%list.length].remove(key)) size --;
} 
```

insert 和 remove 返回空指针，而 contains 方法返回总是返回 false。

我做错了什么。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T21:23:20.143

```
 list = new Bucket[8]; 
```

不分配任何`Bucket`对象，它只分配一个充满`null`值的数组。

因此，`list[key.hashCode()%list.length] == null`（解释为什么`contains()`返回`null`，和`list[key.hashCode()%list.length].remove(...)`或`list[key.hashCode()%list.length].insert(...)`导致您尝试访问`null`，这反过来又导致 NPE）。

您还必须使用`Bucket`的构造函数或某些工厂方法迭代数组并使用非空值初始化每个元素。

# jboss-esb - 当 JBoss SOA-Platform 5.2 上的 ESB 操作发生异常时，我可以返回 JSON 吗？

> ID：10474404
> 
> 赞同：0
> 
> 时间：2012-05-06T21:20:12.383
> 
> 标签：jboss-esb

我正在使用 JBoss SOA-P 5.2，它应该等同于 JBoss ESB 4.10。我们的 ESB 服务使用 Http Gateway，它监听来自网站的请求。

Happy-path 很好：我们可以根据 HttpRequest 向网站应用程序返回 JSON 响应。问题来自异常路径，其中 java 代码从操作管道中抛出了一些异常。有没有办法我们可以捕获在操作管道中生成的异常并将返回的消息自定义到 Web 应用程序？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:40:04.500

该消息可以在故障异常消息中设置。(ActionProcessingFaultException)

前任：

```
 public Message process(Message message) throws ActionProcessingException {
    try {
        Object obj = payloadProxy.getPayload(message);
        String value = "";
        if(obj instanceof String) {
            value = (String) obj;
        } else if(obj instanceof byte[]) {
            value = new String((byte[])obj);
        }
        RouteRequest req = gson.fromJson(value, RouteRequest.class);
        if(req == null) {
            logger.warn("Invalid JSON Request to Solve Service. "+value);
            throw new ActionProcessingException("Invalid JSON Request to Solve Service.");
        }
        payloadProxy.setPayload(message, req);
    } catch (MessageDeliverException e) {
        logger.error("Error handling with payload", e);
        throw new ActionProcessingException("Error handling with payload", e);
    } catch (Exception e) {
        String htmlHelp = "<html><body><h1>Bad Format</h1></body></html>";
        message.getBody().add(htmlHelp);
        throw new ActionProcessingFaultException(message, "Error converting Json Object.");
    }

    return message;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T00:04:26.253

RedHat 建议我们可以使用 RestEasy 来接受 HTTP 请求，并通过 ServiceInvoker 为 ESB 服务开票。

# php - MyISAM vs Innodb 和 Innodb 相关表

> ID：10474405
> 
> 赞同：2
> 
> 时间：2012-05-06T21:20:24.967
> 
> 标签：php, mysql, innodb, myisam

我正在创建的应用程序主要使用选择，但有些是插入、更新等。我想知道在这些情况下哪个最适合性能。

其次，当我在innodb中有两个相关的表时，如果它与另一个表中的一行相关，我如何删除一行而不吐出错误？

最后，如果我插入一个表，它会自动填写相关表的外键还是我有这个程序？

这个应用程序是用 PHP 编写的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:17:53.910

> 主要使用选择，但有些是插入、更新

要看。读写量是多少？80%？90%？95%？写入是与读取交错的还是分批执行的？数据库上有什么级别的并发访问？是否有写繁重的特定表？

MyISAM 的读取速度要快得多，但由于它会锁定整个表以进行写入，因此与 Innodb 相比，这是整体吞吐量下降的地方。

对于具有隔夜 ETL 的数据仓库，MyISAM 再次具有净性能优势。对于非事务性 CMS（想想简单的发布工具），MyISAM 可能会更快。对于典型的基于 Web 的商店，您希望看到超过 95% 的读取，写入将主要隔离到特定的表，并且一次更新几行 - 这里有点边缘化，最好的解决方案可能是是一种混合方法。OTOH 用于频繁更新和大量并发访问（例如用于存储会话数据）的数据库，innodb 是要走的路。

> 当我在innodb中有两个相关的表时，如果它与另一个表中的一行相关，我如何删除一行而不吐出错误？

使用 innodb 并声明[外键约束](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

> 如果我插入一个表，它会自动填写相关表的外键吗

mysql如何知道表中要放什么数据？要添加多少行？你需要自己做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T21:27:10.317

纯粹性能方面的 MyISAM 在历史上（曾经？）优于 InnoDB。

但是考虑到**MyISAM**不*完全*支持引用完整性约束和事务并且使用/使用表级锁定，我肯定会选择**InnoDB**。您在这里冒的是数据完整性的风险，老实说，您需要一个特殊的场景来保证对 MyISAM 的需求。

关于您考虑相关表的问题：只需为[您的外键约束](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)`cascade`提供所需的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T21:27:25.780

> 我正在创建的应用程序主要使用选择，但有些是插入、更新等。我想知道在这些情况下哪个最适合性能。

更重要的问题是：您的数据是否损坏是否重要？如果是这样，您需要交易，这意味着 MyISAM 已退出。然后你可以开始关心性能，因为只有这样你才能实现第一个也是最重要的性能改进：应用程序从不工作到工作的地方。

> 其次，当我在innodb中有两个相关的表时，如果它与另一个表中的一行相关，我如何删除一行而不吐出错误？

通过首先删除相关行，或者通过使用 ON DELETE CASCADE 定义外键约束 - 然后它会自动删除相关行；一个危险的特征。

> 最后，如果我插入一个表，它会自动填写相关表的外键还是我有这个程序？

不，是的。这并不神奇 - 应用程序如何知道其他列应该包含什么，或者您是否真的想要一个条目？

# html - 显示：内联块；奇怪的间距行为

> ID：10474411
> 
> 赞同：0
> 
> 时间：2012-05-06T21:21:06.250
> 
> 标签：html, css

由于我用`&nbsp;`'s 替换了我的空格，所以前面的问题得到了回答，但是......

我仍然不知道是什么导致了这个错误：http: [//jsfiddle.net/cEkQG/](http://jsfiddle.net/cEkQG/)

看看第一段如何失去它的孩子（即`inline-blocks`）尾随/前导空格。请注意，标记`spans`位于段落的单行中。

第二段有空格，但是，`spans`这里的标记都在一个单独的行中。

该错误出现在最新的 Chrome 和最新的 Firefox（刚刚更新到 12）上，尚未在其他浏览器上进行测试。

这种奇怪的错误/行为背后的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T21:29:16.087

块（尤其是内联块）中的前导和尾随空格被剥离。将内联块内的尾随空格移动到内联块之外 - 在其结束标记之后。换行也是空白，这就是多行示例按您预期工作的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:27:41.943

您想使用`display: inline`而不是，`inline-block`因为该元素将与文本“内联”而不是其他块元素。[http://jsfiddle.net/elclanrs/cEkQG/1/](http://jsfiddle.net/elclanrs/cEkQG/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T21:38:14.497

```
<span class="item">Lorem Ipsum is simply dummy text</span> <span class="item">of the printing and typesetting</span><span class="item"> industry.</span> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-05T02:03:13.877

这不起作用的全部原因是因为 . 它代表不间断的空间，因此它不能包装不间断的空间，因为它是不间断的，因此不会换行。

# ruby-on-rails - 执行“@article.user = @user”代码时会执行哪些步骤？

> ID：10474412
> 
> 赞同：0
> 
> 时间：2012-05-06T21:21:08.197
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, associations

我正在使用 Ruby on Rails 3.2.2，我想*确切*知道在执行以下代码时运行的步骤，假设`@user`和`@article`是类实例并且存在相关关联：

```
@article.user = @user 
```

*我正在寻找*处理该操作的源代码，但我找不到。

# haskell - GHC 包冲突

> ID：10474413
> 
> 赞同：7
> 
> 时间：2012-05-06T21:21:15.553
> 
> 标签：haskell, compiler-errors, package, ghc

我正在尝试使用 GHC 编译以下代码：

```
module Test where

import Maybe
import Prelude hiding (null)
import System.IO

null = ()

main :: IO ()
main = putStrLn "Hello, world!" 
```

如果我只是运行`ghc Test.hs`，我会得到：

```
Could not find module `Maybe'
It is a member of the hidden package `haskell98-2.0.0.1'. 
```

所以我尝试`ghc -package haskell98 Test.hs`：

```
Ambiguous module name `Prelude':
  it was found in multiple packages: base haskell98-2.0.0.1 
```

这似乎不对，但我尝试`ghc -package haskell98 -hide-package base Test.hs`：

```
Could not find module `System.IO'
It is a member of the hidden package `base'.
It is a member of the hidden package `haskell2010-1.1.0.1'. 
```

那么我尝试`ghc -package haskell98 -hide-package base -package haskell2010 Test.hs`：

```
Ambiguous module name `Prelude':
  it was found in multiple packages:
  haskell2010-1.1.0.1 haskell98-2.0.0.1 
```

如何编译此代码？我正在使用 GHC 7.4.1。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-06T21:26:03.987

导入`Data.Maybe`. 该`haskell98`软件包不再与 兼容`base`，因此使用这些`haskell98`模块只会带来不必要的痛苦。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-07T10:45:03.510

这个想法是您使用`haskell98`,`base`或中的一个`haskell2010`。这些`haskell*`包是相应语言标准规定的一组库，因此如果您使用其中一个，则更有可能与非 GHC 编译器兼容。但是，无论如何，Hackage 上的绝大多数软件包都在使用`base`，所以你最好还是坚持下去。

Haskell98 严格来说早于分层模块，所以这就是为什么它们都被称为`Maybe`and`List`等等`IO`。（实际上，我认为这些名称比现在更好，但那是另一回事了）。您的问题是您试图同时使用旧`Maybe`的和新`System.IO`的，而旧的和新的包都没有提供两者。

# node.js - 处理来自phonegap ft.upload的传入请求的node.js服务器端代码是什么？

> ID：10474415
> 
> 赞同：1
> 
> 时间：2012-05-06T21:21:18.107
> 
> 标签：node.js, cordova, image-uploading

我已经部分开发了一个混合 Android 应用程序，使用 node.js 为我的服务器和 javascript、jquery、phonegap（现在称为 cordova 1.6.0）为应用程序。

该应用程序的一部分允许用户使用智能手机相机拍照，然后将其上传到服务器。

我在上传图像的应用程序中的代码是......

```
 var imageURI = document.getElementById('display_image').src;
    if (!imageURI) { // || (self.elem.image_play.style.display == "none")) {
        console.log('no image uri defined - ' + JSON.stringify(imageURI));
        //document.getElementById('camera_status').innerHTML = "Take picture or select picture from library first.";
        return;
    }

    // Verify server has been entered
    server = 'http://192.168.1.3:8180/newimage/';
    if (server) {
        console.log("starting upload");
        // Specify transfer options
        var options = new FileUploadOptions();
        options.fileKey="file";
        options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
        options.mimeType="image/jpg";
        options.chunkedMode = false;

        // Transfer picture to server
        var ft = new FileTransfer();
        ft.upload(imageURI, server, function(r) {
            console.log("upload successful"+r.bytesSent+" bytes uploaded.");
            //document.getElementById('camera_status').innerHTML = "Upload successful: "+r.bytesSent+" bytes uploaded.";
        }, function(error) {
            console.log("upload failed - Error Code = "+error.code);
            //document.getElementById('camera_status').innerHTML = "Upload failed: Code = "+error.code;
        }, options);
    } 
```

这很好用，但是我不知道如何处理 node.js 服务器上的图像。目前我的代码是：

```
'/newimage/': function(req,res){

    var chunks;

    req.addListener('data', function (chunk) {
        console.log('in data processing');
        chunks.push(chunk);
    });

    req.addListener('end', function () {
        console.log('completing data processing');
        fs.writeFile("out.jpg", chunks, function(err) {
            console.log(err);
        });
    });
} 
```

此服务器方法执行，但 console.log 行都不执行。

我已经尝试了 2 天来解决这个问题，我尝试了许多不同的方法，但我无法弄清楚如何处理来自 phonegap ft.upload 方法的传入图像文件。有人可以帮忙吗？

完成排序后，我的最终目标是将图像文件上传到亚马逊 s3 存储，我想我可以使用 knox 模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:20:33.570

我正在使用 node formidable 和 fs 模块将上传的图像写入 nodejs 服务器上的 /tmp 文件夹，以便稍后进行 OCR。代码基于[www.nodebeginner.org](http://www.nodebeginner.org)书中的图像上传示例。

我在 phonegap 项目中的 uploadPicture() 方法中的 JS 代码：

```
 // Specify transfer options
        var options = new FileUploadOptions();
        options.fileKey="file";
        options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
        options.mimeType="image/jpeg"
        options.chunkedMode = false;

        // Transfer picture to server
        var ft = new FileTransfer();
        ft.upload(imageURI, server, function(r) {
            document.getElementById('camera_status').innerHTML = "Upload successful: "+r.bytesSent+" bytes uploaded.";              
        }, function(error) {
            document.getElementById('camera_status').innerHTML = "Upload failed: Code = "+error.code;               
        }, options, true); 
```

我在节点服务器上 requesthandler.js 中的代码：

```
function upload(response, request) {
    console.log("Request handler 'upload' was called.");
    var form = new formidable.IncomingForm();
    form.parse(request, function(error, fields, files) {

        //logs the file information 
        console.log(JSON.stringify(files))

        fs.rename(files.file.path, "/tmp/test.png", function(err) {
            if (err) {
                fs.unlink("/tmp/test.png");
                fs.rename(files.file.path, "/tmp/test.png");
            }
        });
        response.writeHead(200, {"Content-Type": "text/html"});
        response.write("received image:<br/>");
        response.write("<img src='/show' />");
        response.end();
    });
} 
```

# c++ - 如何删除默认构造函数？

> ID：10474417
> 
> 赞同：49
> 
> 时间：2012-05-06T21:21:28.117
> 
> 标签：c++

有时我不想提供默认构造函数，也不希望编译器为我的类提供系统默认构造函数。在 C++ 11 中，我可以执行以下操作：

```
class MyClass 
{ 
  public: 
    MyClass() = delete; 
}; 
```

但是目前我的讲师不允许我在作业中这样做。问题是：在 C++ 11 之前，有没有办法告诉编译器停止隐式提供默认构造函数？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-06T21:22:45.800

我会说让它私有..像

```
class MyClass
{
private:
    MyClass();
} 
```

并且没有人（来自类本身或朋友类之外）将能够调用默认构造函数。此外，您将拥有三个使用该类的选项：提供参数化构造函数或将其用作实用程序类（仅具有静态函数的类）或在友元类中为该类型创建工厂。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-06T21:23:02.290

当然。定义自己的构造函数，默认或其他。

您也可以将其声明为私有，以便无法调用。不幸的是，除非您提供静态函数来调用它，否则这会使您的类完全无法使用。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-12-30T18:59:00.497

从 c++11 开始，您可以设置 constructor `= delete`。这与 c++11 的大括号初始化语法结合使用很有用`{}`。

例如：

```
struct foo {
  int a;

  foo() = delete;
  foo(int _a) {
    // working constructor w/ argument
  }
};

foo f{};  // error use of deleted function foo::foo()
foo f{3}; // OK 
```

见[https://en.cppreference.com/w/cpp/language/default_constructor#Deleted_implicitly-declared_default_constructor](https://en.cppreference.com/w/cpp/language/default_constructor#Deleted_implicitly-declared_default_constructor)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-15T09:29:31.423

除了将默认构造函数声明为私有之外，您还可以在有人尝试调用它时抛出异常。

```
class MyClass
{
  private:
    MyClass() 
    {
      throw [some exception];
    };
} 
```

# c# - 为什么我的表单应用程序给我一个格式异常是未处理的警告

> ID：10474428
> 
> 赞同：0
> 
> 时间：2012-05-06T21:22:27.937
> 
> 标签：c#, exception

你好我是这个网站的新手，所以如果我没有正确解释，我很抱歉：

我正在创建一个 C# Form 应用程序，我的应用程序没有错误，但是一旦我清除我的输入字段，就会给我一个 FormatException 是 unhandeld。

这是此函数唯一适用的代码：

```
 private void txtR_TextChanged(object sender, EventArgs e)
    {

        R = Convert.ToInt32(txtR.Text);
        E2 = Convert.ToInt32(txtE2.Text);
        E = R * E2;
        txtE.Text = E.ToString();

        R = Convert.ToInt32(txtR.Text);
        D2 = Convert.ToInt32(txtD2.Text);
        D = R * D2;
        txtD.Text = D.ToString();

        R = Convert.ToInt32(txtR.Text);
        P2 = Convert.ToInt32(txtP2.Text);
        P = R * P2;
        txtP.Text = P.ToString();
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T21:30:10.907

该函数`Convert.ToInt32()`无法处理长度为零的字符串，因此您不能将`txtR`（或任何其他文本字段）留空。

另外，我建议您考虑不在`onTextChanged`事件中运行此代码。一个常见的场景可能是您擦除 的内容`txtR`，从而触发`onTextChanged`并引发异常。

在任何情况下，为了使您的代码防弹，最好使用它`Int32.TryParse()`来确保转换能够正常工作，正如Sharp12345 所建议的那样。

* * *

`Convert.ToInt32()`文档：[MSDN 链接](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx)。读`FormatException`一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T22:11:05.083

您应该使用它[`int.TryParse()`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)来检查输入的值是否正确且不为空或字符串。

所以，这段代码：

```
R = Convert.ToInt32(txtR.Text);
E2 = Convert.ToInt32(txtE2.Text);
E = R * E2;
txtE.Text = E.ToString(); 
```

应转换为：

```
if (int.TryParse(txtR.Text, out R) && int.TryParse(txtE2.Text, out E2)) {        
    E = R * E2;
    txtE.Text = E.ToString();
} 
```

就像 int 一样，float 也一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T21:31:38.037

清除字段时出现错误的原因是您试图将空字符串转换为数字。清除字段时，`txtR`等于 String.Empty，因此无法转换为数字。当它为空时：

```
R = Convert.ToInt32(txtR.Text); 
```

与以下内容几乎相同：

```
R = Convert.ToInt32(""); 
```

这是它做不到的。要解决此问题，您首先需要检查所有字段是否具有任何值：

```
 private void txtR_TextChanged(object sender, EventArgs e)
{
    if(txtR.Text.Trim().Length != 0 
    && txtE2.Text.Trim().Length != 0 
    && txtD2.Text.Trim().Length != 0 
    && txtP2.Text.Trim().Length != 0)
    {

        R = float.Parse(txtR.Text);
        E2 = float.Parse(txtE2.Text);
        E = R * E2;
        txtE.Text = E.ToString();

        R = float.Parse(txtR.Text);
        D2 = float.Parse(txtD2.Text);
        D = R * D2;
        txtD.Text = D.ToString();

        R = float.Parse(txtR.Text);
        P2 = float.Parse(txtP2.Text);
        P = R * P2;
        txtP.Text = P.ToString();

    }
    else{
        MessageBox.Show("One or more of the fields were empty!");
    {
 } 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T22:11:40.153

在将`Single.TryParse`用户输入字符串转换为数值（在您的情况下为浮点数，而不是整数）时使用。
通常，您不能轻易阻止用户插入一些虚假值，您的代码将失败。
相反 TryParse 允许您在输入无效的情况下毫无例外地测试输入字符串

```
 // Try to convert the R value just one time, everything fails if this fails
    if(!Single.TryParse(txtR.Text, NumberStyles.Any, CultureInfo.InvariantCulture, out R))
        return; 
    if(Single.TryParse(txtE2.Text, NumberStyles.Any, CultureInfo.InvariantCulture, out E2)) 
    {
        E = R * E2; 
        txtE.Text = E.ToString(); 
    }

    if(Single.TryParse(txtD2.Text, NumberStyles.Any, CultureInfo.InvariantCulture, out D2))
    {
        D = R * D2; 
        txtD.Text = D.ToString(); 
    }

    if(Single.TryParse(txtP2.Text, NumberStyles.Any, CultureInfo.InvariantCulture, out P2))
    {
        P = R * P2; 
        txtP.Text = P.ToString(); 
    } 
```

[请参阅 MSDN 上的此处](http://msdn.microsoft.com/en-us/library/26sxas5t.aspx)以获取参考

# c++ - 使用信号量并调用 wait() 和 signal()

> ID：10474429
> 
> 赞同：1
> 
> 时间：2012-05-06T21:22:30.160
> 
> 标签：c++, multithreading, semaphore

这是问题所在。厕所可以由男性或女性一次使用。如果男性或女性在给定时间在洗手间，则异性不能进入洗手间并必须等待。一旦所有女性都出去了，男性就可以进入。所以，这是我的解决方案：

我想使用信号量和互斥锁在线程之间执行同步。我仍然不清楚如何实现它。这是我的想法：

*   创建一个互斥锁来锁定/解锁线程。（锁定洗手间）
*   创建一个信号量来计算洗手间的人数。每个性别一个
*   信号量male_in_restroom；
*   信号量 female_in_restroom;
*   等待男性的队列，
*   等待女性的队列，

因此，首先，我检查进程是什么性别，然后检查相反性别的信号量是否大于 1。如果不是，我让他们进入洗手间。但是如果厕所里已经有异性成员，我需要让这个过程等待并让它进入睡眠状态。

我该如何让这个过程进入睡眠状态？我找了一些例子，但仍然不知道该怎么做。

一个带有函数签名的例子`wait()`and`signal()`真的很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:48:02.643

> “创建一个用于计算厕所人数的信号量。每个性别信号量 male_in_restroom；信号量 female_in_restroom；等待男性的队列，等待女性的队列，”

真的没有意义。信号量值的目的是指示资源是否可用。 **如果该值为零，则资源不可用。** 如果大于零，则可用。因此，如果您设法通过使用资源来*增加*sem 计数，那么信号量有什么用途？

> 因此，首先，我检查进程是什么性别，然后检查相反性别的信号量是否大于 1。如果不是，我让他们进入洗手间。

不不不！你有它的低音。这强调了一点：信号量不用于存储任意值。

您的各种计数等是*普通变量，而不是 semaphores*，但是，您必须使用互斥锁/信号量/条件变量（最有可能：互斥锁 + 条件变量）来控制对它们的访问。

另外，我不知道您为什么认为跟踪有多少人在等待是有用或重要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:39:51.350

这看起来很有趣，所以我写了一些代码。虽然还没有测试它，所以可能搞砸了一些东西，但它足以证明我的想法。

```
typedef enum {
    none = -1,
    male = 0,
    female = 1
} sex_t;

class Human {
public:
    const sex_t id;
    Human(sex_t id_) : id(id_) {assert(id != none);}
};

class Restroom {
    tbb::spin_mutex     door_mutex;
    tbb::atomic<size_t> num_waiting;
    HANDLE              opposite_sex_can_enter;

    // these two variables need not be atomic, they're not accessed concurrently
    sex_t               current_occupying_sex;
    size_t              num_visitors;

public:
    Restroom() : current_occupying_sex(none), num_visitors(0) {
        num_waiting = 0;
        opposite_sex_can_enter = CreateEvent(0, TRUE, FALSE, 0);
    }

    void enter(const Human& h) {
        tbb::spin_mutex::scoped_lock lock(door_mutex);
        // this prevents any two humans trying to open the door (in any direction) at the same time :)
        if(current_occupying_sex == none) {
            // you're the first one in, so update the 'restroom id' and enter
            assert(num_visitors == 0 && num_waiting == 0);
            // if the knowledge of SetEvent has not propagated all the way yet and the same sex
            // person happens to walk into the restroom again, opposite sex people need to know
            // that they were slow and will need to wait again
            ResetEvent(opposite_sex_can_enter);
            current_occupying_sex = h.id;
            ++num_visitors;
        } else if(h.id == current_occupying_sex) {
            // you're not the first one in, but you're of the same sex, so you can just walk in
            assert(num_visitors > 0);
            ++num_visitors;
        } else {
            // you're not the first one in and you're of opposite sex, so you'll need to wait
            // first, let go of the door, you're not getting in :)
            lock.release();
            // then join the rest of the opposite sex people waiting
            ++num_waiting;
            WaitForSingleObject(opposite_sex_can_enter);
            --num_waiting;
            if(num_waiting == 0) {
                ResetEvent(opposite_sex_can_enter);
            }
            enter(h);
        }
    }

    void exit() {
        tbb::spin_mutex::scoped_lock lock(door_mutex);
        if(--num_visitors == 0) {
            current_occupying_sex = none;
            SetEvent(opposite_sex_can_enter);
            // fairness can be imposed here, meaning that if you're the last say, male
            // to walk out, you can check if females are waiting and switch the 
            // restroom sex id to female. The logic of enter() will change a little bit, but not radically.
        }
    }
}; 
```

# list - 替换元组列表中的元组 - Haskell

> ID：10474433
> 
> 赞同：1
> 
> 时间：2012-05-06T21:23:03.730
> 
> 标签：list, haskell, tuples

嘿伙计们，我希望能够替换元组列表中的元组。这是我的想法：

```
let lst = [("john",3), ("greg",3), ("tom",2), ("rob",7), ("jason",4), ("tev",7)] 
```

我希望能够从列表中删除任何元组，例如（“rob”，7），然后用新的元组（“ain”，3）替换它。最后，我的最终列表将如下所示：

```
lst = [("john",3), ("greg",3), ("tom",2), ("ain",3), ("jason",4), ("tev",7)] 
```

感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T21:30:48.983

这是不可能的。Haskell 是一种纯函数式语言，因此一旦变量具有值，它就会永久保持该值。

但是，您可以轻松地从旧列表中计算出新列表

```
map (\ x -> if x == ("rob",7) then ("ain",3) else x) lst 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:35:37.743

```
replaceTuple :: [(String, Int)] -> (String, Int) -> (String, Int) -> [(String, Int)]
replaceTuple tups old new = map check tups where
    check tup | tup == old = new
              | otherwise  = tup

main = print $ replaceTuple [("john",3), ("greg",3), ("tom",2), ("rob",7), ("jason",4), ("tev",7)] ("tev", 7) ("newperson", 9001) 
```

这将（正如您从类型注释中看到的那样）仅适用于（String，Int）列表，这就是您所拥有的。但是，您可以定义一个更通用的替换函数，其类型签名为`replace :: Eq b => [b] -> b -> b -> [b]`. `b`必须是`Eq`类型类的实例，因为我们正在比较元素，这就是“Eq b => ...”的意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T23:37:54.887

以下是您*可以*执行的操作：

```
import qualified Data.Map.Lazy as Map

lst = Map.fromList [("john",3), ("greg",3), ("tom",2), ("rob",7), ("jason",4), ("tev",7)]

lst2 = Map.insert "ain" 3 $ Map.delete "rob" lst 
```

如果您使用的是解释型 Haskell，则过程基本相同：

```
Prelude> import qualified Data.Map.Lazy as Map
Prelude Data.Map.Lazy> let lst = Map.fromList [("john",3), ("greg",3), ("tom",2), ("rob",7),     ("jason",4), ("tev",7)]
Prelude Data.Map.Lazy> lst
fromList [("greg",3),("jason",4),("john",3),("rob",7),("tev",7),("tom",2)]
Prelude Data.Map.Lazy> let lst2 = Map.insert "ain" 3 $ Map.delete "rob" lst
Prelude Data.Map.Lazy> lst2
fromList [("ain",3),("greg",3),("jason",4),("john",3),("tev",7),("tom",2)] 
```

请注意，“ain”不一定与“rob”在地图中的“位置”相同。然而，地图不像列表那样有排序的概念。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T10:35:47.727

`span`当您想在列表中进行编辑时，我通常发现最简单的方法是使用or`break`或将列表分解`splitAt`，进行更改，然后将其粘合在一起`++`。所以在这种情况下，我会这样做：

```
case break (\ (key,val) -> key == "rob") lst of
  (_, []) -> error "key not found! :("
  (xs, _ : ys) -> xs ++ ("ain", 3) : ys 
```

请注意，如果您使用[Data.Sequence](http://hackage.haskell.org/package/containers)，那么有一个函数`update`可以完全按照您的意愿进行操作，而且速度更快。

# django - 为 Django Admin add_form 内联子项创建页面

> ID：10474437
> 
> 赞同：1
> 
> 时间：2012-05-06T21:23:47.967
> 
> 标签：django, django-admin

我有一个 node_user，它在我的 django 应用程序中扩展了 auth.User。node_user 有很多孩子。在 django admin 中创建新的 node_user 时，我还使用 StackedInline 子类提供对 node_users 子对象的访问权限。

但是，我想在一系列页面中显示 node_user 子级，而不是堆叠的单页列表。有没有办法把孩子们分散在页面上？有人有例子吗？我认为这将有助于用户交互，但我不确定该怎么做，因为我是新手。

谢谢安吉洛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T03:30:56.127

抱歉，Django 没有开箱即用。您可以编写一个自定义管理视图，但您需要做出一些棘手的决定并编写有关保存的代码。即点击“下一个”会丢失您在第一页上所做的更改吗？我解决这个问题的方法是通过他们自己的 ModelAdmin 编辑 node_user 子级 - 巧妙地使用 list_filter 和/或 search_fields 选项（也许还有 list_editable）应该可以很容易地将它们作为一个组进行编辑。

# c - 什么更好：选择与线程？

> ID：10474445
> 
> 赞同：10
> 
> 时间：2012-05-06T21:25:09.037
> 
> 标签：c, linux, multithreading, algorithm, select

在 Linux 中。

我想构建一个自动点击器，它在按下一个键时将具有启用/禁用功能。显然应该有两件事并行运行（答题器本身，以及启用/禁用功能）

每个实现的优缺点是什么：使用将处理自动单击功能的线程和另一个主线程（用于启用/禁用等）或使用系统调用选择并等待输入/键盘？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T21:30:13.050

使用`select`对性能更好，尤其是当您可能有数百个同时操作时。然而，正确编写代码可能很困难，并且编码风格与传统的单线程编程有很大不同。例如，您需要避免调用任何阻塞方法，因为它可能会阻塞您的整个应用程序。

大多数人发现使用线程更简单，因为大部分代码类似于普通的单线程代码。唯一困难的部分是在少数需要线程间通信的地方，通过互斥锁或其他同步机制。

在您的特定情况下，您似乎只需要少量线程，所以我会选择使用线程的更简单的编程模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T21:30:30.703

考虑到你正在做的工作量，这可能并不重要。

对于高性能应用程序，存在差异。在这些情况下，您需要同时处理数千个连接；在这种情况下，您将新连接移交给新线程。

创建数千个线程的成本很高，因此选择用于提高效率。实际上，不同的技术（例如`kqueue`或`epoll`）用于最佳切换。

我说没关系，因为您可能只会创建一次线程，并且在应用程序的整个生命周期内恰好有两个线程在运行。

# r - 使用 data.table 标记组中的第一条（或最后一条）记录

> ID：10474456
> 
> 赞同：22
> 
> 时间：2012-05-06T21:27:20.330
> 
> 标签：r, data.table

给定一个排序键，是否有一个 data.table 快捷方式来复制SAS 和 SPSS 中的`first`和功能？`last`

下面的行人方法标记了一组的第一个记录。

鉴于 data.table 的优雅（我正在慢慢熟悉它），我假设有一个使用自连接 & 的快捷方式`mult`，但我仍在试图弄清楚。

这是示例：

```
require(data.table)

set.seed(123)
n <- 17
DT <- data.table(x=sample(letters[1:3],n,replace=T),
                 y=sample(LETTERS[1:3],n,replace=T))
sortkey  <- c("x","y")
setkeyv(DT,sortkey)
key <- paste(DT$x,DT$y,sep="-")
nw <- c( T , key[2:n]!=key[1:(n-1)] )
DT$first <- 1*nw
DT 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-07T05:21:35.353

以下是几个使用的解决方案`data.table`：

```
## Option 1 (cleaner solution, added 2016-11-29)
uDT <- unique(DT)
DT[, c("first","last"):=0L]
DT[uDT, first:=1L, mult="first"]
DT[uDT, last:=1L, mult="last"]

## Option 2 (original answer, retained for posterity)
DT <- cbind(DT, first=0L, last=0L)
DT[DT[unique(DT),,mult="first", which=TRUE], first:=1L]
DT[DT[unique(DT),,mult="last", which=TRUE], last:=1L]

head(DT)
#      x y first last
# [1,] a A     1    1
# [2,] a B     1    1
# [3,] a C     1    0
# [4,] a C     0    1
# [5,] b A     1    1
# [6,] b B     1    1 
```

显然，每一行都包含很多内容。但是，关键构造如下，它返回每组中第一条记录的行索引：

```
DT[unique(DT),,mult="first", which=TRUE]
# [1]  1  2  3  5  6  7 11 13 15 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-06T21:47:17.177

一种简单的方法是使用该`duplicated()`功能。当应用于数据帧时，当且仅当行值组合之前未发生时，它会生成一个向量，其中条目为 TRUE，当向下移动数据帧时。

```
DT$first <- !duplicated( DT[, list(x,y) ])                                                                                                                                                                                                                                    
DT$last <- rev(!duplicated( DT[, list(rev(x),rev(y)) ]))                                                                                                                                                                                                                      

> DT                                                                                                                                                                                                                                                                         
       x y first  last                                                                                                                                                                                                                                                        
  [1,] a A  TRUE  TRUE                                                                                                                                                                                                                                                        
  [2,] a B  TRUE  TRUE                                                                                                                                                                                                                                                        
  [3,] a C  TRUE FALSE                                                                                                                                                                                                                                                        
  [4,] a C FALSE  TRUE                                                                                                                                                                                                                                                        
  [5,] b A  TRUE  TRUE                                                                                                                                                                                                                                                        
  [6,] b B  TRUE  TRUE                                                                                                                                                                                                                                                        
  [7,] b C  TRUE FALSE                                                                                                                                                                                                                                                        
  [8,] b C FALSE FALSE                                                                                                                                                                                                                                                        
  [9,] b C FALSE FALSE                                                                                                                                                                                                                                                        
 [10,] b C FALSE  TRUE                                                                                                                                                                                                                                                        
 [11,] c A  TRUE FALSE                                                                                                                                                                                                                                                        
 [12,] c A FALSE  TRUE                                                                                                                                                                                                                                                        
 [13,] c B  TRUE FALSE                                                                                                                                                                                                                                                        
 [14,] c B FALSE  TRUE                                                                                                                                                                                                                                                        
 [15,] c C  TRUE FALSE                                                                                                                                                                                                                                                        
 [16,] c C FALSE FALSE                                                                                                                                                                                                                                                        
 [17,] c C FALSE  TRUE 
```

另一种不使用的方法`duplicated()`是：

```
DT[ unique(DT), list(first = c(1, rep(0,length(y)-1)),                                                                                                                                                                                                                        
                     last =  c(rep(0,length(y)-1),1 )) ]      

      x y  first last                                                                                                                                                                                                                                                   
  [1,] a A     1    1                                                                                                                                                                                                                                                         
  [2,] a B     1    1                                                                                                                                                                                                                                                         
  [3,] a C     1    0                                                                                                                                                                                                                                                         
  [4,] a C     0    1                                                                                                                                                                                                                                                         
  [5,] b A     1    1                                                                                                                                                                                                                                                         
  [6,] b B     1    1                                                                                                                                                                                                                                                         
  [7,] b C     1    0                                                                                                                                                                                                                                                         
  [8,] b C     0    0                                                                                                                                                                                                                                                         
  [9,] b C     0    0                                                                                                                                                                                                                                                         
 [10,] b C     0    1                                                                                                                                                                                                                                                         
 [11,] c A     1    0                                                                                                                                                                                                                                                         
 [12,] c A     0    1                                                                                                                                                                                                                                                         
 [13,] c B     1    0                                                                                                                                                                                                                                                         
 [14,] c B     0    1                                                                                                                                                                                                                                                         
 [15,] c C     1    0                                                                                                                                                                                                                                                         
 [16,] c C     0    0                                                                                                                                                                                                                                                         
 [17,] c C     0    1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-01T18:42:24.813

比 Josh 更简单的方法可能是

```
unique(DT)
unique(DT,fromLast=TRUE] 
```

# c++ - AVL 树编译并运行但立即崩溃

> ID：10474458
> 
> 赞同：1
> 
> 时间：2012-05-06T21:27:26.707
> 
> 标签：c++

所以我在这里的程序会编译但是如果我创建一个类对象它会立即崩溃。我的意思是，在我的 main.cpp 中，如果我创建说“AVLTree obj;” 程序崩溃......如果我把它排除在外，那么一切都很好......任何帮助将不胜感激。

谢谢你。// 下面主要

```
using namespace std;

int main()
{
    cout << "******************************" << endl;
    cout << "  Self Balancing AVL Tree    " << endl;
    cout << "******************************" << endl;
   /** AVLtree obj;
    obj.insert(100);
    obj.insert(20);
    obj.insert(25);
    obj.insert(200);
    assert isEmpty();
    obj.preOrderPrint(*root);
    obj.inOrderPint(*root);
    obj.postOrderPrint(*root);
    obj.remove(20);

*/
    return 0;
} 
```

标题

```
#ifndef AVLTREE_H
#define AVLTREE_H

//Moved this outside of the class trying to get things running
struct TreeNode
{
    int key;
    int data;
    TreeNode *parent;
    TreeNode *right;
    TreeNode *left;

    char factor; //byte
};
//-------------------------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------------------------- s
class AVLtree
{
   private:
   protected:
    //neccessary tree nodes
    TreeNode *root;
    TreeNode *tmp, *node;
    TreeNode *holder1, *holder2, *holder3, *newnode;
    int tmpdata;
    bool h;

    int height(TreeNode * pos) const;
    int max(int a, int b) const;

    //Rotate functions broken up individually and used within the
    //insert function. Was having pointer issues when insert was
    //all one function
    TreeNode * singleRotateLeft(TreeNode *holder2);
    TreeNode * singleRotateRight(TreeNode *holder2);

    TreeNode * doubleRotateLeft(TreeNode *holder2);
    TreeNode * doubleRotateRight(TreeNode *holder2);

    TreeNode * _insert(int key, TreeNode * node);
    TreeNode * _remove(int key, TreeNode * node);

    public:
    AVLtree();
    void insert(int key, int data);
    bool isEmpty();
    void remove(int key);
    int retrieve(int key);
    void preOrderPrint(TreeNode *root)const;
    void inOrderPrint(TreeNode *root)const;
    void postOrderPrint(TreeNode *root)const;
    int size;
};
#endif // AVLTREE_H 
```

标题的 CPP

```
#include "avltree.h"
#include <cstdio>
#include <iostream>

using namespace std;
//-------------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------------
AVLtree::AVLtree()
{
    size = 0;
    //Initialize values
    root = NULL;
    root->left = NULL;
    root->right = NULL;
    root->parent = NULL;
}
//-------------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------------
int AVLtree::retrieve(int key)
{
    //height of 0 means the tree must be empty
    if(size == 0)
    {
        return NULL;
    }
    tmp = root;
    //While not empty search both sides of tree for key
    while(tmp != NULL)
    {
        if(key < tmp->key)
            tmp = tmp->left;
        else if(key > tmp->key)
            tmp = tmp->right;
        else
            return tmp->data;
    }
    return NULL;
}

//Simple bool determining if the tree is empty via the root
bool AVLtree::isEmpty()
{
    if(root == NULL)
    {
        cout << "The Tree Is Empty!! " << endl;
        return true;
    }
    else
    {
        cout << "The Tree Is NOT Empty" << endl;
        return false;
    }
}
//-------------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------------

int AVLtree::height( TreeNode * pos ) const
{
        if( pos == NULL )
            return -1;
        else
            return pos->factor;
}
//-------------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------------
int AVLtree::max( int a, int b ) const
{
    return a > b ? a : b;
}
//-------------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------------
TreeNode * AVLtree::singleRotateLeft(TreeNode *holder2)
{
    holder1 = holder2->left;
    holder2->left = holder1->right;
    holder1->right = holder2;

    holder2->factor = max(height(holder2->left), height(holder2->right))+1;
    holder1->factor = max(height(holder1->left), holder2->factor)+1;

    return holder1;  // new root
}
//-------------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------------
TreeNode * AVLtree::singleRotateRight(TreeNode *holder1)
{
    holder2 = holder1->right;
    holder1->right = holder2->left;
    holder2->left = holder1;

    holder1->factor = max(height(holder1->left), height(holder1->right))+1;
    holder2->factor = max(height(holder2->right), holder1->factor)+1;

    return holder2;  // new root
}
//-------------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------------
TreeNode * AVLtree::doubleRotateLeft(TreeNode *holder3)
{
    holder3->left = singleRotateRight(holder3->left);

    return singleRotateLeft(holder3);
}
//-------------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------------
TreeNode * AVLtree::doubleRotateRight(TreeNode *holder1)
{
    holder1->right = singleRotateLeft(holder1->right);

    return singleRotateRight(holder1);
}
//-------------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------------
void AVLtree::insert(int key, int data)
{
    size++;
    tmpdata = data;
    root =_insert(key,root);
}
//-------------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------------
TreeNode * AVLtree::_insert(int key, TreeNode * node)
{
    //Empty case, create a new tree
    if (node == NULL)
    {
        node = new TreeNode;
        node->factor = 0;
        node->key = key;
        node->data = tmpdata;
        node->left = NULL;
        node->right = NULL;
//      if(size==1)
//          root=node;

    }
    //Key is less than, move down the left child
    else if(key < node->key)
    {
        node->left= _insert(key,node->left);
        if(height(node->left) - height(node->right) == 2)
        {
            if(key < node->left->key)
                node = singleRotateLeft(node);
            else
                node = doubleRotateLeft(node);
        }
    }
    //Key is greater than move down the right child
    else if(key > node->key)
    {
        node->right= _insert(key,node->right);
        if(height(node->right) - height(node->left) == 2)
        {
            if(key > node->right->key)
                node = singleRotateRight(node);
            else
                node = doubleRotateRight(node);
        }
    }

//  node->factor=-1;
//  if(node->left!=NULL)
//      node->factor=node->left->factor;
//  if(node->right!=NULL)
//      node->factor=max(node->factor, node->right->factor);

    node->factor = max(height(node->left ),height(node->right))+1;
    return node;

}
//-------------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------------
void AVLtree::preOrderPrint(TreeNode *node) const
{
    //Empty node returns out
    if(node == NULL) return;
    //print the contents of the node specified
    cout << node->data << " ";
    //Navigate and display left subtree
    preOrderPrint(node->left);
    //Followed by the right subtree
    preOrderPrint(node->right);
}

void AVLtree::inOrderPrint(TreeNode *node) const
{
    if(node == NULL) return;
    inOrderPrint(node->left);
    // Root middle value is displayed in the middle of the printing
    //operation
    cout << node->data << " ";
    inOrderPrint(node->right); // Left childeren last to be printed
}

void AVLtree::postOrderPrint(TreeNode *node) const
{
    if(node == NULL) return; // Empty tree returns

    postOrderPrint(node->left); //Display left side subtree
    postOrderPrint(node->right); // Followed by right side subtree
    cout << node->data << " "; //Finish with root
}

void AVLtree::remove(int key)
{
    root =_remove(key,root);
}
//-------------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------------
TreeNode * AVLtree::_remove(int key, TreeNode * node)
{
    //temp bool determining state of removal
    bool done = false;
    //Empty case there is nothing to do, return done immediately
    if (node == NULL)
    {
        h = false;
        done = true;
    }
    else
    //If key data is less than the current node
    if (key < node->key) //delete from left subtree
    {
        newnode =_remove(key,node->left);
        node->left = newnode;
        if(h)
        {
            //Check for height imbalance
            if(height(node->right) - height(node->left) == 2)
            {
                if(height(node->right) > height(node->left))
                    node = singleRotateLeft(node);
                else
                    node = singleRotateRight(node);
            }

            node->factor = max(height(node->left ),height(node->right))+1;

            if (node->factor >= 0)
                {
                   node->factor = root->factor -1;
                   if (node->factor == -1)
                        h = false;
                }
                else if (node->right->factor == -1)
                    singleRotateRight(node);
                else
                    singleRotateLeft(node);

                done = true;
                return node;
        }

    }
    else if (key == node->key) //del node
    {
        if (node->left == NULL || node->right == NULL)  // one or no children
        {
            if (node->left == NULL)
                holder1 = node->right;
            else
                holder1 = node->left;

            delete node;

            h = true; done = true;

            return(holder1);

        }
        else // both of children
        {
            holder2 = node->right;
                while (holder2->left != NULL)
                    holder2 = holder2->left;

                node->key = holder2->key;
                key = node->key;
        }
    }

    if (!done && key >= node->key) // delete from right subtree
    {
            newnode=_remove(key, node->right);
            node->right = newnode;
        if (h)
        {
                if(height(node->right) - height(node->left) == 2)
            {
                if(height(node->right) > height(node->left))
                    node = singleRotateLeft(node);
                else
                    node = singleRotateRight(node);
            }
            node->factor = max(height(node->left ),height(node->right))+1;
                //
/*              if (node->factor <= 0)
                {
                    node->factor=node->factor+1;
                    if (node->factor ==1)
                        h=false;
                }
                else if (node->right->factor==1)
                    singleRotateLeft(node);
                else
                    singleRotateRight(node);*/
                 return node;
            }
    }

}
//-------------------------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T21:30:44.073

你不觉得这段代码有问题吗？

```
root = NULL;
root->left = NULL;
root->right = NULL;
root->parent = NULL; 
```

具体来说，您将根节点初始化为 null，然后尝试将值分配给根的属性。您不能取消引用/为空指针赋值。

# c - C中的Trie树上的分段错误和Valgrind未堆叠地址错误

> ID：10474459
> 
> 赞同：4
> 
> 时间：2012-05-06T21:27:27.877
> 
> 标签：c, memory, memory-management, struct, memory-access

我正在用 C 语言编写一个 Trie 树，具有以下结构：

```
typedef struct sNode Node;
struct sNode {
    int word;
    unsigned int nsons;
    Node *next[26];
};

typedef struct {
     Node *root;
} Trie; 
```

但是我在这个插入函数中遇到了问题：

```
int insert(Trie* trie, char word[]){
    int i=0, posiletter, contletters=0;
    char letter=word[0];
    Node *newroot;
    Node *newNode=NULL;
    Node **copyroot;
    Node *current=NULL;
    Node *Nodefather=NULL;
    Node verif;

    if (trie->root=NULL){
        newroot=malloc(sizeof(Node));   
        for (i=0; i<=25; i++) newroot->next[i]=NULL;
        newroot->nsons=0;
        newroot->word=0;
        trie->root=newroot;
    }
    copyroot=&trie->root;
    current=*copyroot;
    while (word[contletters]!='\0'){
        posiletter=(word[contletters])-'a';

        while( (current->next[posiletter])!= NULL ){ // Error in this line
            Nodefather=current;
            current=current->next[posiletter];
        }
        if ( (current->next[letter-'a']) == NULL ){
            newNode=malloc(sizeof(Node));
            //newNode=malloc(sizeof(Node));   
            for (i=0; i<=25; i++) newNode->next[i]=NULL;
            newNode->nsons=0;
            newNode->word=0;
            Nodefather->next[letter-'a']=newNode;
            Nodefather->nsons=(Nodefather->nsons)+1;

        }
        contletters++;

    }
    if  (letter=='\0') Nodefather->next[letter-'a']->word=1; //end of word
    return 1;
} 
```

该函数接收一个指向树的指针和一个字符串。如果 Trie 的根为 NULL，则创建一个节点，然后在数组上搜索下一个空闲（NULL）位置进行存储。

问题出在这一行：

```
while( (current->next[posiletter])!= NULL ){ // Error in this line 
```

当我执行此操作时，它给了我分段错误错误，以及 GDB 上的此错误：

```
Program received signal SIGSEGV, Segmentation fault.
0x0804883f in insert (trie=0x804b008, word=0xbffff230 "abcdef") at trie.c:97
97          while( (current->next[posiletter])!= NULL ){ // Error in this line 
```

并以这种方式使用 Valgrind： valgrind --tool=memcheck --leak-check=full --track-origins=yes ./trie 它给了我这些错误

```
==3409== Invalid read of size 4
==3409==    at 0x804883F: insert (trie.c:97)
==3409==    by 0x80485FD: main (triet.c:36)
==3409==  Address 0x8 is not stack'd, malloc'd or (recently) free'd
==3409== 
==3409== 
==3409== Process terminating with default action of signal 11 (SIGSEGV)
==3409==  Access not within mapped region at address 0x8
==3409==    at 0x804883F: insert (trie.c:97)
==3409==    by 0x80485FD: main (triet.c:36)
==3409==  If you believe this happened as a result of a stack
==3409==  overflow in your program's main thread (unlikely but
==3409==  possible), you can try to increase the size of the
==3409==  main thread stack using the --main-stacksize= flag.
==3409==  The main thread stack size used in this run was 8388608.
==3409== HEAP SUMMARY:
==3409==     in use at exit: 4 bytes in 1 blocks
==3409==   total heap usage: 1 allocs, 0 frees, 4 bytes allocated
==3409== 
==3409== LEAK SUMMARY:
==3409==    definitely lost: 0 bytes in 0 blocks
==3409==    indirectly lost: 0 bytes in 0 blocks
==3409==      possibly lost: 0 bytes in 0 blocks
==3409==    still reachable: 4 bytes in 1 blocks
==3409==         suppressed: 0 bytes in 0 blocks
==3409== Reachable blocks (those to which a pointer was found) are not shown.
==3409== To see them, rerun with: --leak-check=full --show-reachable=yes
==3409== 
==3409== For counts of detected and suppressed errors, rerun with: -v
==3409== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 11 from 6)
Segmentation fault 
```

我真的很感激任何帮助。谢谢！

====编辑==== 崩溃时的值：

```
(gdb) print current
$1 = (Node *) 0x0
(gdb) print current->next
Isn't possible acess the memory at the address 0x8
(gdb) print current->next[posiletter]
Isn't possible acess the memory at the address 0x8
(gdb) print posiletter
$2 = 0 
```

===Edit2=== 要求的其他值：

```
(gdb) print contletters
$3 = 0
(gdb) print trie->root
$4 = (Node *) 0x0
(gdb) print trie->root->next[word[0]-'a']
Isn't possible acess the memory at the address 0x8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:27:38.100

啊，我怎么错过了！

这是你的问题：

```
if (trie->root=NULL) 
```

应该

```
if (trie->root == NULL) 
```

注意`==`.

您编写它的方式，您设置`root`为`NULL`which 评估`false`和根初始化永远不会完成。`0x0`您可以通过 gdb 输出的事实来弄清楚`trie->root`

# elasticsearch - elasticsearch：仅从 url 中获取具有某个非空键的元素

> ID：10474463
> 
> 赞同：7
> 
> 时间：2012-05-06T21:27:47.030
> 
> 标签：elasticsearch

我想过滤弹性搜索查询的结果并仅检索那些具有非空字段的结果

例如。给出以下数据

```
{
  total: 4912,
  max_score: 1,
  hits: [
{
  {
    _index: "gcba",
    _type: "bafici",
    _id: "5a93472b-5db4-4ff9-8c8a-d13158e72d5f-62",
    _score: 1,
    _source: {
      id_film: "23",
      title: "great film",
    }
  },
  {
    _index: "gcba",
    _type: "bafici",
    _id: "2732fbf4-4e55-4794-8e98-e5d5fa6a0419-40",
    _score: 1,
    _source: {
      name: "conference",
      [...]
    }
  }
} 
```

我想发出类似的东西

```
.../_search?from=1&size=100&q=id_film:'*' 
```

仅获取具有 id_film 值的元素

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T05:13:11.757

在进行通配符查询时，ES 只会默认返回具有该特定字段的文档：

```
% curl -XPUT http://localhost:9200/foo/bar/1 -d '{"id":1,"id_film":23}'
{"ok":true,"_index":"foo","_type":"bar","_id":"1","_version":1}%

% curl -XPUT http://localhost:9200/foo/bar/2 -d '{"id":2,"foo":23}'
{"ok":true,"_index":"foo","_type":"bar","_id":"2","_version":1}%

% curl "http://localhost:9200/foo/_search?q=id_film:*&pretty=true"
{
  "took" : 2,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 1,
    "max_score" : 1.0,
    "hits" : [ {
      "_index" : "foo",
      "_type" : "bar",
      "_id" : "1",
      "_score" : 1.0, "_source" : {"id":1,"id_film":23}
    } ]
  }
}% 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T21:17:53.763

您还可以使用存在（或缺失）过滤器。看这里：

[http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-exists-filter.html](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-exists-filter.html)

唯一的问题是，它是一个过滤器，而不是一个查询。要使其与搜索方法一起使用，您需要一个 match_all 查询并作为过滤器存在。（或者，使用在其中指定此过滤器的 constant_score 查询）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-27T09:13:53.943

[新的Exists Query](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-exists-query.html)的文档有很好的插图。

# actionscript-3 - 隐藏多个影片剪辑

> ID：10474464
> 
> 赞同：0
> 
> 时间：2012-05-06T21:27:54.720
> 
> 标签：actionscript-3, movieclip

我正在关注本教程[http://workflowflash.com/3901/hiding-movie-clips-in-as3.php](http://workflowflash.com/3901/hiding-movie-clips-in-as3.php)以隐藏和显示影片剪辑，但我想使用一个按钮隐藏和显示多个影片剪辑。

我正在制作一个带有气泡文本（电影剪辑）的简单动画（电影剪辑）。所以我想在单击禁用对话框按钮时隐藏所有气泡文本。- 在影片剪辑中隐藏影片剪辑。我应该使用数组吗？

我对此真的很陌生，所以我希望有人可以帮助我，我真的很感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:30:11.353

当然，您可以使用数组，但它是最好的方法吗 - 它取决于很多事情。

也许尝试这样的事情：

```
var myArray:Array = [myMoveclip1, myMoveclip2, myMoveclip3];

switchBtn.addEventListener(MouseEvent.CLICK, _switch);

private function _switch(e:MouseEvent) : void {
    for each(var item:MovieClip in myArray) {
        item.visible = !item.visible; // or just "item.visible = false;" to only hide
    }
} 
```

现在您的按钮将隐藏和显示数组中的 MovieClip，但我不确定这是否是您期望/需要的。

# python - 比较两个文件并列一个清单

> ID：10474475
> 
> 赞同：0
> 
> 时间：2012-05-06T21:29:26.257
> 
> 标签：python, file, list, for-loop

我有两个文件要相互比较并形成一个列表。每个文件都有自己的类。书和人。在这些中，我有不同的属性。我要比较的是：person.personalcode == book.borrowed。从这里我想要一个所有借来的书的清单。我是这样开始的：

```
for person in person_list:
    for book in booklibrary_list:
        if person.personalcode == book.borrowed:
            person.books.append(book, person)

for person in person_list:
    if len(person.books) > 0:
        print(person.personalcode + "," + person.firstname + person.lastname + "have borrowed the following books: ")
        for book in person.books:
            print(book)

for person in person_list:
    person.books = [] 
```

但它不起作用，我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:28:50.693

发布作为答案，因为这对于评论来说太长了。

第一：改进你的问题。展示如何构建 Person 和 Book 类，以及如何填充它们。描述个人代码是什么以及个人代码为何与书籍代码相同。一些示例数据和更多代码将使这个问题更容易回答。

第二：阅读您的[其他问题](https://stackoverflow.com/questions/10419417/save-a-list-to-a-file)，您似乎将数据存储在文本文件中，直接加载和查询，修改和保存数据。这将导致您遇到问题，相反，您应该考虑采用以下两条线之一：

1.  使用 SQL 数据库，可能最容易开始使用的是 SQLite，因为它不需要设置服务器，并且[标准库中有一个非常易于使用的模块](http://docs.python.org/library/sqlite3.html)。将您的数据存储在那里，从长远来看，您会发现它更容易。
2.  使用 Python 对象（例如三个类：Person、Book 和 BorrowedBook），在程序中管理它们的列表，并使用标准库中的[shelve](http://docs.python.org/library/shelve.html)在查询之间存储和检索这些对象列表。

如果你以前没有使用过 SQL，使用 shelve 会更容易，我希望你能原谅我说它可能非常适合与书籍相关的应用程序时的双关语！

# requirejs - 仅在我真正需要它们时才让 require.js 加载我的文件

> ID：10474479
> 
> 赞同：1
> 
> 时间：2012-05-06T21:29:52.233
> 
> 标签：requirejs

我知道这是 require.js 的全部意义，但在我的情况下它并没有这样表现。

我正在创建一个单页 Backbone.js 应用程序。应用程序的主要入口点是通过路由器。假设我有 3 条路线：

```
users: function(){
    require('users');
},
products: function(){
    require('products');
},
groups: function(){
    require('groups');
}, 
```

根据我调用的函数，我想加载文件，但 require.js 不这样做。

相反，它会在需要的任何地方下载我的完整网站的所有文件。我什至没有调用该函数，但它会加载文件。

有没有办法让 require.js 正常运行，并且仅在我实际在函数内部时才下载文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T21:35:59.880

你基本上可以做你在代码片段中所做的事情。它看起来像这样：

```
users: function(){
    require(['users'], function(Users){
        //Code
    });
},
products: function(){
    require(['products'], function(Products){
        //Code
    });
},
groups: function(){
    require(['groups'], function(Groups){
        //Code
    });
}, 
```

# matlab - 在 Matlab/Octave 矩阵中使用范围

> ID：10474483
> 
> 赞同：3
> 
> 时间：2012-05-06T21:30:15.103
> 
> 标签：matlab, math, vector, matrix, octave

假设我想创建一个 100x100 矩阵，其中每一行包含元素 1-100

```
A = [1:100; 1:100; 1:100... n] 
```

显然，形成一个矩阵是一个坏主意，因为它会迫使我创建 100 行范围为 1:100 的行。

我想我可以通过取一个'ones'数组并将每一行乘以一个向量来做到这一点......但我不知道该怎么做

```
a = (ones(100,100))*([]) 
```

??

有小费吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T21:44:05.757

您可以使用*重复矩阵*函数 ( `repmat()`)。您的代码将如下所示：

```
A = repmat( 1:100, 100, 1 ); 
```

这意味着您要在`repmat`垂直方向和水平方向重复第一个参数 100 次（即您保持水平不变）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T21:44:13.057

`1`您可以将 100的列向量与 的行向量相乘`1:100`。

```
ones(3,1)*(1:3)
ans =

   1   2   3 
   1   2   3
   1   2   3 
```

或者你可以使用`repmat`([edit] as Phonon 在我之前几秒钟写的 [/edit])。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T11:02:42.860

是的，repmat 是简单的解决方案，甚至可以说是正确的解决方案。但是知道如何可视化您的目标以及如何创建能够产生该目标的东西将在 MATLAB 中带来长期利益。所以尝试其他解决方案。例如...

```
cumsum(ones(100),2)

bsxfun(@plus,zeros(100,1),1:100)

ones(100,1)*(1:100)

cell2mat(repmat({1:100},100,1)) 
```

和无聊

```
repmat(1:100,100,1) 
```

# java - 使用 java 的 Brother QL-560 打印机边距错误

> ID：10474484
> 
> 赞同：3
> 
> 时间：2012-05-06T21:30:29.447
> 
> 标签：java, printing, margin

我对使用 java 的 Brother QL-560 有边距问题。我已经测试了 xhtml-printable 和 pdf-renderer 解决方案。

使用 xhtml-printable 方案，即使可成像区域的左上角设置为 x=0 和 y=0，也会以一定的左右边距打印内容（在 PORTRAIT 和 LANDSCAPE 模式下） .

结果如下：

![在此处输入图像描述](../Images/f02f3eba8f8f8c13784dc3eac77083c6.png)

已插入黑色边框以强调边距问题。用于打印的 Java 代码与本文中显示的相同，但已转换为 Java。

使用第二种解决方案，我遇到了从 XHTML 代码生成 PDF 文件的问题。具体来说，首先我使用 iText 库生成 PDF 文件，然后使用 PDF Renderer 库加载并打印该文件（通过 PDFPrintPage 类，调用“打印”方法）。在这种情况下，生成的页面太大，内容超出了纸张。

你能详细描述你用来打印的完整代码（XHTML）吗？

提前致谢。

______________ 更新 _________________________

所以，我设置：`labelPaper.setImageableArea(+50,+50,paperWidth, paperHeight);`. 结果在这里： ![在此处输入图像描述](../Images/817f135a707eaf5c5b173804a024dd4c.png)

为什么？？？我输入了加值... +50 (x) 和 +50 (y)...也许我为什么使用 PORTRAIT？这是我的代码：

```
public void print(PrintService service){

        try{
            float paperWidth = 62.0f;
            float paperHeight = 62.0f;
            paperWidth *= 2.83;
            paperHeight *= 2.83;

            //val printJob = PrinterJob.getPrinterJob
            PrinterJob printJob = PrinterJob.getPrinterJob();
            printJob.setPrintService(service);

            PageFormat pageFormat = printJob.defaultPage();
            pageFormat.setOrientation(PageFormat.PORTRAIT);
            Paper labelPaper = pageFormat.getPaper();
            labelPaper.setSize(paperWidth, paperHeight);
            labelPaper.setImageableArea(+50,+50,paperWidth, paperHeight);
            pageFormat.setPaper(labelPaper);

            Book book = new Book();
            book.append(this.createRender(), pageFormat);
            printJob.setPageable(book);

            PrintRequestAttributeSet attributeSet = new HashPrintRequestAttributeSet();
            attributeSet.add(new PrinterResolution(300, 300, ResolutionSyntax.DPI));
            printJob.print(attributeSet); 
```

我也有一点余量……为什么？我想要 0x & 0y 偏移量。

# sdk - 为什么命令提示符中的signtool会返回“Windows找不到'signtool'。请确保您输入了正确的名称......”

> ID：10474488
> 
> 赞同：5
> 
> 时间：2012-05-06T21:30:50.377
> 
> 标签：sdk, cmd, assembly-signing, signtool

我确实有那个文件。（在“...\Program Files\Microsoft SDKs...”中）。我去了已安装的程序（在控制面板中）并“重新安装”了它。

那么为什么命令提示符不能识别呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T21:50:51.667

因为该文件夹不在系统中`PATH`。（在命令提示符下，键入`PATH`并回车以查看当前 PATH 包含的内容。）

您可以通过从命令提示符将文件夹添加到现有文件夹来添加文件夹`PATH`（当然，将文件夹替换为 SDK 版本的正确位置和系统上的位置）：

```
set PATH="C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin";%PATH% 
```

Signtool 现在应该可以从任何文件夹工作（直到您关闭命令提示符）。

如果您经常需要它，您还可以创建一个批处理文件，`PATH`为您正确设置以保存键入：

```
; Save this as something like SDKEnv.bat in a folder on the current PATH
@SET FrameworkDir=C:\Windows\Microsoft.NET\Framework\v2.0.50727
@SET PATH=%FrameworkDir%;%PATH% 
```

现在您可以在运行 SignTool 之前运行批处理文件：

```
SDKEnv
Signtool <parameters> 
```

# jquery - 用户在 Liferay Portlet 中使用 Spring MVC 登录页面后，如何进行两次重定向

> ID：10474492
> 
> 赞同：0
> 
> 时间：2012-05-06T21:31:22.187
> 
> 标签：jquery, html, http, spring-mvc, liferay-6

我的问题很奇怪，我不完全确定是否可以做到。我在 Liferay 中使用 Spring MVC，我正在尝试实现以下目标。我正在做的应用程序有两个域两个门户，它们将位于两个不同的 URL 上。我需要在用户登录第一个门户并验证他的凭据后，将他重定向到同一门户中的某个页面并在新选项卡中打开另一个门户的登录页面。

我试图通过以下方式实现这一目标。由于我无法对我尝试的单个登录功能有两个响应，因此一旦他登录后使用 liferay 挂钩功能重定向他登录重定向操作。

这将我带到第一个门户的登录页面。在同一个重定向操作中，我创建了一个 cookie，通知我用户已在此处登录。

```
@Override
public void run(HttpServletRequest request, HttpServletResponse response)
        throws ActionException {

    try {
        Cookie loginCookie = new Cookie("loged_in_confirmed","1");
        response.addCookie(loginCookie);

        response.sendRedirect("somePage");

    } catch (Exception e) {
        //TODO
    } 
```

在重定向将我带到的页面上，我有一个 jQuery 文档就绪函数来检查 cookie。如果 cookie 在那里，它会删除它，它应该将我重定向到新选项卡中的另一个门户。

然而，新标签的打开总是被弹出窗口阻止程序阻止。我试过用window.href打开它，用目标空白打开window.open，我什至尝试添加一个隐藏链接，`target ="_blank"`但弹出窗口阻止程序仍然得到他。我愿意接受任何建议，我是否在我做这件事的方式上遗漏了一些东西，或者我在这里完全是目标，并且有一种完全不同的方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T23:19:45.690

弹出窗口阻止程序查看窗口是否由于用户操作而打开。从本质上讲，这意味着 window.open 和其他窗口打开器将查看调用堆栈以查看您是否正在处理输入事件，并且仅在您处理时才允许弹出窗口。这让人想起了以与弹出窗口阻止程序兼容的方式打开第二页的两个选项：

1.  当用户单击登录到一个页面时打开弹出窗口，该页面将单独登录到第二个站点或轮询已经在进行中的登录，如果登录失败则自行关闭。可能最好的方法是将弹出窗口设置为加载等待登录成功或失败的页面，然后返回重定向到第二个门户或关闭弹出窗口的 JS 片段。
2.  在 target="_blank" 的第一个门户上放置“单击此处使用第二个门户”链接。这就是我会做的，除非在没有用户干预的情况下加载两个站点是客户的要求。

# javascript - 为什么 disqus/facebook 在将它们集成到您的网站时为每个网站托管一个单独的 javascript 文件

> ID：10474499
> 
> 赞同：-1
> 
> 时间：2012-05-06T21:33:10.313
> 
> 标签：javascript, facebook, plugins, disqus

讨论 js 代码

```
 */* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})(); 
```

Facebook JavaScript 代码

```
(function(d){
var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
js = d.createElement('script'); js.id = id; js.async = true;
js.src = "//connect.facebook.net/en_US/all.js";
d.getElementsByTagName('head')[0].appendChild(js);
}(document)); 
```

为什么 disqus/facebook 为每个网站托管一个单独的 javascript 文件，例如

```
 dsq.src = 'http://work4sale.disqus.com/embed.js'; // disqus
    js.src = "//connect.facebook.net/en_US/all.js"; // facebook 
```

为什么他们不能为每个网站都拥有一个通用的 js 文件。同时将它们集成到您的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:34:41.630

Facebook 有数十种脚本供您在您的网站上使用：例如按钮、评论等 - 每个都有 10-15 KB 左右...只是猜测。压缩后大概有 3-4 KB。

因此，当您需要一个赞按钮时，请复制赞按钮脚本并在您的网站上使用它。如果您想要评论，请复制评论脚本并在您的网站上使用它。

如果 facebook 提供一个单一的包罗万象的脚本来包含在您的网站上，那么当您只需要大约 10-15 KB 的功能时，该脚本可能很容易达到数百 KB。现在，您乘以...假设 200 KB 乘以每分钟数百万个请求，并且您正在谈论每分钟数千兆字节（可能是 TB）的不必要带宽。现在我知道这对你和你的小妈妈和流行网站可能并不重要，但这转化为 Facebook 每年数百万美元的带宽。

# javascript - 在javascript中保留浮点并添加按位运算

> ID：10474501
> 
> 赞同：5
> 
> 时间：2012-05-06T21:33:25.997
> 
> 标签：javascript, floating-point, bit-manipulation

我试图通过对位进行操作来了解加法、减法、除法和乘法的方法。

由于事件发生后会运行许多计算，因此有必要在我的 JavaScript 程序中进行一些优化。

通过使用下面的代码作为参考，我能够理解进位持有 &ing 值。然后通过执行 XOr 将 sum var 设置为每个 n1 / n2 变量中不匹配的位。

这是我的问题。;) 将 (n1 & n2)<<1 移动 1 有什么作用？这样做的目的是什么？与 XOr 一样，很明显不需要对这些位做任何其他事情，因为它们的十进制值是可以的，因为它们在 sum var 中。我无法想象 & shift 操作正在完成什么。

```
function add(n1,n2)
{
        var carry, sum;

        // Find out which bits will result in a carry.
        // Those bits will affect the bits directly to
        // the left, so we shall shift one bit.
        carry = (n1 & n2) << 1;

        // In digital electronics, an XOR gate is also known
        // as a quarter adder.  Basically an addition is performed
        // on each individual bit, and the carry is discarded.
        //
        // All I'm doing here is applying the same concept.
        sum = n1 ^ n2;

        // If any bits match in position, then perform the
        // addition on the current sum and the results of
        // the carry.
        if (sum & carry)
        {
                return add(sum, carry);
        }

        // Return the sum.
        else
        {
                return sum ^ carry;
        };
}; 
```

上面的代码按预期工作，但它不返回浮点值。我必须将总数与浮点值一起返回。

有没有人可以使用上面的函数来帮助我处理浮点值？是否有明确解释我要查找的内容的网站？我已经尝试搜索最后一天是如此，找不到任何东西可以查看。

我从这个资源中得到了上面的代码。 [http://www.dreamincode.net/code/snippet3015.htm](http://www.dreamincode.net/code/snippet3015.htm)

## 提前谢谢！

经过考虑，左移到 1 位置是乘以 2。

通过 &ing 像这样：**进位 = (n1 & n2) << 1;** 进位变量将保存由 n1 和 n2 中的匹配位置编译而成的二进制字符串。因此，如果 n1 为 4 且 n2 为 4，则它们都具有相同的值。因此，通过将两者结合起来并右移到 1 索引将乘以 4 x 2 = 8；所以进位现在等于 8。

1.) var 进位 = 00001000 =8 & 00001000 =8

2.) 进位 = 现在保存单个值 00001000 =8

左移将乘以 8 x 2 =16，或 8 + 8 = 16

3.) 进位 = 进位 <<1 ，将所有位移到一个位置

4.) 进位现在持有一个值 00010000 = 16

我仍然找不到任何关于使用浮点值的东西。如果有人有任何事情，请发布链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:58:13.033

它不起作用，因为代码假定浮点数表示为整数，但事实并非如此。浮点数使用 IEEE 754 标准表示，该标准将数字分为三个部分：一个**符号**位，一组表示**指数**的位，另一组表示 1（包括）和 2（不包括）之间的数字，**尾数**, 值计算为

```
(sign is set ? 1 : -1) * (mantissa ^ (exponent - bias)) 
```

其中偏差取决于浮点数的精度。因此，您用于添加两个数字的算法假定这些位表示一个整数，而浮点数不是这种情况。诸如按位与和按位或之类的运算也不会给出您在整数世界中所期望的结果。

一些示例，在双精度中，数字 2.3 表示为（以十六进制表示）4002666666666666，而数字 5.3 表示为 4015333333333333。这两个数字的 OR-ing 将为您提供 4017777777777777，它表示（大致）5.866666。

这种格式有一些很好的指导，我在[http://www.psc.edu/general/software/packages/ieee/ieee.php](http://www.psc.edu/general/software/packages/ieee/ieee.php)找到了链接， http: [//babbage.cs.qc.edu/IEEE- 754/](http://babbage.cs.qc.edu/IEEE-754/)和[http://www.binaryconvert.com/convert_double.html](http://www.binaryconvert.com/convert_double.html)相当适合理解它。

现在，如果您仍想为这些数字实现按位加法，您可以。但是您必须将数字分解为各个部分，然后以相同的指数对数字进行归一化（否则您将无法添加它们），对尾数执行加法，最后将其归一化为 IEEE754格式。但是，正如@LukeGT 所说，您可能不会获得比您正在运行的 JS 引擎更好的性能。并且一些 JS 实现甚至不支持对浮点数的按位运算，所以通常最终发生的情况是它们首先将数字转换为整数，然后执行操作，这也会使您的结果不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:42:45.653

浮点值具有复杂的位结构，很难用位操作进行操作。因此，我怀疑在计算它们方面你能比 Javascript 引擎做得更好。浮点计算本质上很慢，所以如果你担心速度，你应该尽量避免它们。

尝试使用整数将十进制数表示为 x 位数。例如，如果您使用货币，您可以以整美分的形式存储事物，而不是使用小数值的美元。

希望有帮助。

# sql - 使用转义字符的邮政编码 SQL 检查语句

> ID：10474504
> 
> 赞同：1
> 
> 时间：2012-05-06T21:33:38.927
> 
> 标签：sql, oracle, escaping, check-constraints

我曾尝试在其他领域寻找，但我似乎无法弄清楚我正在做的事情有什么问题。我正在尝试在应该包含格式为“00000-0000”的 9 位邮政编码的列上创建检查约束。这是一个分配，所以我唯一可以做的就是创建检查约束。

我已经成功地将 check 语句用于其他列，但由于某种原因，我在 Stack Overflow 上找到的语句不起作用。唯一允许的字符是数字和连字符 ('-')。

```
alter table Student
    add constraint student_zip_ck
    check (Zip not like '%[0-9\-]%' escape '\'); 
```

由于此检查约束是根据 Stack Overflow 上的另一个（正面评价）问题建模的，因此我不知道可能出了什么问题。这是我收到的错误。

```
Error starting at line 751 in command:
alter table Student
  add constraint student_zip_ck
  check (Zip not like '%[0-9\-]%' escape '\')
Error report:
SQL Error: ORA-00604: error occurred at recursive SQL level 1
ORA-01424: missing or illegal character following the escape character
00604\. 00000 -  "error occurred at recursive SQL level %s"
*Cause:    An error occurred while processing a recursive SQL statement
           (a statement applying to internal dictionary tables).
*Action:   If the situation described in the next error on the stack
           can be corrected, do so; otherwise contact Oracle Support. 
```

有人对我有建议、问题或意见吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T21:46:10.803

您缺少与[正则表达式](http://psoug.org/reference/regexp.html)相关的任何内容，这可能是它不起作用的原因。您的语法意味着您打算使用它们，在这种情况下我会同意这一点。正则表达式从 Oracle 10g 开始可用，因此您必须确保您使用的是此版本或更高版本。

语法将变为：

```
alter table Student
    add constraint student_zip_ck
    check (regexp_like(Zip,'^[[:digit:]]{5}-[[:digit:]]{4}$')); 
```

这表示：

*   `^`- 固定到字符串的开头
*   `[[:digit:]]`- 只接受数值。这是 POSIX 兼容的变体，相当于`\d`.
*   `{5}`- 正好 5 次
*   `-`- 匹配连字符
*   `$`- 固定到字符串的末尾

要使连字符和第二个数字可选，您需要使用创建一个组`()`。这使得括号内的所有内容都成为一个单元，无论是字符串还是另一个正则表达式，然后您可以将其他运算符应用于它们。A`?`表示匹配 0 次或 1 次，需要应用于组。把它们放在一起，你会得到：

```
regexp_like(Zip,'^[[:digit:]]{5}(-[[:digit:]]{4})?$') 
```

### 延伸阅读

*   [正则表达式文档 11.2](http://docs.oracle.com/cd/E11882_01/appdev.112/e25518/adfns_regexp.htm#ADFNS1003)

阅读这个（第一次）有一个非常相似的问题，[例如 3-1](http://docs.oracle.com/cd/E11882_01/appdev.112/e25518/adfns_regexp.htm#CHDJAGEF)，它使用 Perl 类型的正则表达式语法`\d`而不是 POSIX 并且可能会引起兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:45:06.450

`LIKE`运算符使用通配符 ( `%`and `_`) - [http://docs.oracle.com/cd/F49540_01/DOC/server.815/a67779/operator.htm#997970](http://docs.oracle.com/cd/F49540_01/DOC/server.815/a67779/operator.htm#997970)

对于正则表达式，请尝试`REGEXP_LIKE()`函数 - [http://www.regular-expressions.info/oracle.html](http://www.regular-expressions.info/oracle.html)

# assembly - 汇编堆...试图学习测试

> ID：10474506
> 
> 赞同：-2
> 
> 时间：2012-05-06T21:33:58.213
> 
> 标签：assembly, heap-memory, stack-memory

我要考试了，我们必须学习堆和堆栈。我理解堆栈部分，但堆给我带来了麻烦。

我们的书用 C 语言和汇编语言给了我们。但是我很难理解这两个概念。

我只是把这本书的截图放上去，这样看起来更好看。

问题：

*   **Heap_Init 是如何工作的？**

*   **Heap_Allocate 是如何工作的？**

*   **Heap_Release 是如何工作的？**

![在此处输入图像描述](../Images/2096100145a8042d9c8f9d95f6b8d37e.png)

![在此处输入图像描述](../Images/65f488c693fc9a588c9f955c13b4cdcb.png)

感谢大家的时间和精力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T21:46:09.727

从这个词的意义上讲，堆是不在堆栈上的内存区域，程序可以使用它来存储大量数据。

但是，在程序的生命周期中，该程序必须跟踪自己的内存使用情况。具体来说，程序不能随心所欲地写入其整个虚拟地址空间；如果它尝试写入的地址未被操作系统映射，则会触发访问冲突，这将导致您的程序收到[分段错误](http://en.wikipedia.org/wiki/Segmentation_fault)并被终止。

因此，正在运行的程序必须要求操作系统分配一些空间。如果可以，操作系统将执行此操作，并将该空间映射到虚拟地址空间。

但是，如果你需要释放一部分内存，你需要知道它在哪里以及你在用它做什么。此外，您需要知道，由于程序给定了特定大小的内存，将其存储在哪里。看，事情很快就变得复杂了——如果你从 C 中分配大量内存，然后频繁地再次释放，那么在分配和释放以及系统调用之间进行 1-1 映射是没有意义的同样的效果。相反，如果内存分配器只是从操作系统中提取一大块内存然后跟踪它会更好。

输入对存储结构的需求，以跟踪哪些分配的空间当前正在使用，以及虚拟地址空间中的哪些范围被标记为使用。

所以，

*   Heap_Init 设置了这个结构，并且可能在任何现代分配器中初始化一些内存。
*   Heap_Allocate 使用此结构并在给定请求时返回指向可用空间的指针。这可能会或可能不会要求程序从操作系统请求更多空间。
*   Heap_Free 使用该结构来释放先前分配的内存。

这就是这些函数将做什么的理论。如果您查看代码，您应该能够弄清楚您的具体实现在做什么。

# shadow - Pinterest 导航栏框阴影 css

> ID：10474508
> 
> 赞同：0
> 
> 时间：2012-05-06T21:34:38.820
> 
> 标签：shadow, css

有谁知道如何获得出现在 pinterest.com 上固定位置导航栏底部的确切框阴影？

[http://pinterest.com/](http://pinterest.com/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T21:41:13.933

您可能使用过任何开发人员工具（Chrome DevTools 或 Firebug）来发现这一点：

```
box-shadow: inset 0 1px #fff, 0 1px 3px rgba(34,25,25,0.4);
-moz-box-shadow: inset 0 1px #fff, 0 1px 3px rgba(34,25,25,0.4);
-webkit-box-shadow: inset 0 1px #fff, 0 1px 3px rgba(34,25,25,0.4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:44:09.843

查看 Chrome 中的网站 CSS 样式，我得到了该栏的这段代码：

```
#CategoriesBar {
position: absolute;
z-index: 101;
top: 44px;
right: 0;
left: 0;
text-align: center;
font-size: 13px;
color: #8C7E7E;
background-color: #FAF7F7;
border-top: 1px solid #CFCACA;
box-shadow: inset 0 1px #fff, 0 1px 3px rgba(34,25,25,0.4);
-moz-box-shadow: inset 0 1px #fff, 0 1px 3px rgba(34,25,25,0.4);
-webkit-box-shadow: inset 0 1px #fff, 0 1px 3px rgba(34,25,25,0.4);
} 
```

这 3 行应该可以帮助您确定自己的风格：

```
box-shadow: inset 0 1px #fff, 0 1px 3px rgba(34,25,25,0.4);
-moz-box-shadow: inset 0 1px #fff, 0 1px 3px rgba(34,25,25,0.4);
-webkit-box-shadow: inset 0 1px #fff, 0 1px 3px rgba(34,25,25,0.4); 
```

# matlab - 查找事件的平均或中位日期

> ID：10474510
> 
> 赞同：2
> 
> 时间：2012-05-06T21:35:34.747
> 
> 标签：matlab, date

我有一个数据集，我从中提取了事件发生的日期。日期的格式为 MMDDYY，尽管 MatLab 不显示前导零，所以它经常是 MDDYY。

有没有办法找到平均值或中位数（我可以使用任何一个）日期？`median`当有奇数天时工作正常，但对于偶数我相信它是平均两个中间的天，这不会产生合理的值。我一直在尝试将日期转换为 MatLab 格式`regexp`并将其重新组合在一起，但我还没有让它工作。谢谢

```
dates=[32381 41081  40581  32381  32981 41081   40981  40581]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T23:05:08.007

您可以使用[datenum](http://www.mathworks.nl/help/techdoc/ref/datenum.html)将日期转换为序列日期编号（1 在 01/01/0000、2 在 02/01/0000、367 在 01/01/0001 等）：

```
strDate='27112011';
numDate = datenum(strDate,'ddmmyyyy') 
```

然后可以对这些日期数字执行任何算术运算，例如取平均值或中位数：

```
mean(numDates)
median(numDates) 
```

这里唯一的问题是，您的日期不是字符串类型，而是数字。幸运的是 datenum 也接受数字输入，但您必须将日、月和年分隔在一个向量中：

```
numDate = datenum([year month day]) 
```

或者如果您有多个时间戳，则作为矩阵中的行。

因此，对于您指定的示例数据：

```
dates=[32381 41081  40581  32381  32981 41081   40981  40581];
years  = mod(dates,100);
dates  = (dates-years)./100;
days   = mod(dates,100);
months = (dates-days)./100;
years = years + 1900; % set the years to the 20th century

numDates = datenum([years(:) months(:) days(:)]);
fprintf('The mean date is %s\n', datestr(mean(numDates)));
fprintf('The median date is %s\n', datestr(median(numDates))); 
```

[在此示例中，我使用datestr](http://www.mathworks.nl/help/techdoc/ref/datestr.html)将生成的平均值和中位数转换回可读的日期格式，该格式将日期序列号作为输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T03:55:09.870

试试这个：

```
dates=[32381 41081 40581 32381 32981 41081 40981 40581];
d=zeros(1,length(dates));
for i=1:length(dates)
    d(i)=datenum(num2str(dates(i)),'ddmmyy');
end
m=mean(d);
m_str=datestr(m,'dd.mm.yy') 
```

我希望这个信息是有用的，问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T21:55:51.290

将日期存储为 YYMMDD，而不是 MMDDYY。这具有有用的副作用，即日期的数字顺序也是时间顺序。

这是您可以编写的函数的伪代码。

```
foreach date:
    year = date % 100
    date = (date - year) / 100
    day = date % 100
    date = (date - day) / 100
    month = date
    newdate = year * 100 * 100 + month * 100 + day
end for 
```

一旦你有 YYMMDD 格式的日期，然后找到中位数（数字），这也是按时间顺序排列的中位数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T03:30:05.133

您在上面看到了如何将日期表示为数字。

我不会添加您查找列表中位数的问题。`median`当有偶数个值时， 默认的 matlab函数将平均两个中间值。

但是你可以自己做！试试这个：

```
dates; % is your array of dates in numeric form
sdates = sort(dates);
mediandate = sdates(round((length(sdates)+1)/2)); 
```

# iphone - 用于在具有多个输入视图的 iOS 中创建“向导”表单视图的对象结构

> ID：10474516
> 
> 赞同：1
> 
> 时间：2012-05-06T21:36:28.367
> 
> 标签：iphone, objective-c, ios, oop, wizard

我想使用`WizardViewController`具有不同`inputView`子视图的单个。将`WizardViewController`共享 a`searchCriteria`并将其传递给每个新步骤，每个步骤都根据该特定的输入添加到标准中`inputView`。

我面临的问题是如何构造我的对象/视图，以便我可以重用`WizardViewController`接受不同类型的输入/控件。例如，我考虑过使用具有`WizardViewModel`类似成员`enum wizardViewModelType`（对于每种类型的视图），对应`UIView *inputView`于每种类型的界面生成器。问题是我相信走这条路会导致很多类间的依赖，基本上会破坏将逻辑与. 此外，其中一些将要求我从 Web 服务中获取可能的值，这是`WizardViewModelType``UIView``inputView``inputView``WizardViewController``inputView``ViewModel`将不得不处理，进一步打破逻辑。也许我需要`ViewController`为每种类型的输入视图分开？还是我以完全错误的方式思考这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T19:13:27.147

通常，正确的做法是为每个 UIView 设置一个 ViewController。你的应用程序的逻辑不应该在视图上，而是在viewController上，你可以使用segues（如果在ios 5上）共享数据，我相信ios 4或更低版本还有其他方法。

如果我想在 UIViewControllers 之间共享代码，我会做一个向导的方法是将它嵌入到导航控制器中并将下一个 viewController 推送到导航控制器堆栈上。

如果你想在视图控制器之间共享代码，我认为你不应该在视图控制器类上这样做。基本上，我会想到两种选择：

1）编写一个基类：基类应该扩展 UIViewController 并且你的 UIViewControllers 可以扩展这个基类。

2）将公共代码提取到另一个类中（更好，如果适用）：您创建另一个共享公共代码的类，并将其注入您的视图控制器。

# android - 我应该启动一个线程来解析一些 xml 吗？

> ID：10474518
> 
> 赞同：1
> 
> 时间：2012-05-06T21:37:12.307
> 
> 标签：android, xml, multithreading, parsing, handler

我对android开发有点陌生，但我正在尝试制作一个xml解析器。我一直在使用 android.sax 库，遵循一些教程，这很好用。让我怀疑的一件事是，我实际上并没有在单独的线程中启动解析器，我只是使用处理程序在解析器和主要活动之间进行通信。我应该在 Thread 中解析吗？

这是我的主要活动代码：

```
 tv = (TextView)findViewById(R.id.tv);

    try {
        URL url = new URL("https://www.googleapis.com/shopping/search/v1/public/products?key=AAAAABBBBBCCCCDDDEEEEFFF&country=FR&restrictBy=gtin=5030999075254&alt=atom");
        XMLHandler xHandler = new XMLHandler();
        Feed feed = xHandler.parse(url.openStream());

            if(feed.getTotalResults()==0 || feed.getItems() == null || feed.getItems().isEmpty()) {
                Log.w("XMLPARSENull", "No items
            }
            else {
                tv.setText(feed.getTotalResults()+" " + feed.getItemsPerPage() + " " + feed.getStartIndex() + " " + feed.getTitle());
                Iterator<Product> it = feed.getItems().iterator();
                while(it.hasNext()) {
                    Log.w("XMLPARSEFeed",it.next().getName());

                }
            }

    } catch(Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.e("XMLPARSEException", "ERROR",e);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T22:08:43.087

我认为与其说是解析不如说是网络操作，因为任何网络请求都不应该在 UI 线程中执行。您可以生成一个新`Thread`的或一个`AsyncTask`来执行您的网络请求。以下是一些帮助链接：

*   [异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)
*   [无痛穿线](http://developer.android.com/resources/articles/painless-threading.html)
*   [昂贵的操作](http://developer.android.com/resources/faq/commontasks.html#threading)
*   [响应性设计](http://developer.android.com/guide/practices/design/responsiveness.html)
*   [线程文档](http://developer.android.com/reference/java/lang/Thread.html)
*   [处理程序文档](http://developer.android.com/reference/android/os/Handler.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T22:43:50.683

一个简单的答案：如果您的主 ( UI ) 线程中有连接，则用户界面将冻结，同时该线程用于下载信息并对其进行解析。连接需要一些时间，因此它可能会出现冻结。

除此之外，android 4.0 现在实际上不允许您从该线程调用 HTTP 请求，它会抛出一个错误，该错误将在崩溃之前在 logcat 中看到。

最佳做法是在此处使用异步任务，这里有一些关于此的更多信息。 [关于异步任务的信息](http://developer.android.com/reference/android/os/AsyncTask.html)！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T21:45:55.017

是的，您必须将解析移到后台线程中，尤其是当您的 XML 正在通过网络传输时；否则你的应用程序很可能会被系统阻塞主线程。

不过，您不必使用 raw `Thread`；Android提供了一些`ASyncTask`让它变得更容易的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T23:23:46.220

与 GUI 直接交互无关的所有内容都应移至单独的线程，如果您需要从该线程与 GUI 交互，最好是 AsyncTask，因为 Android 不允许从常规 Thread 类访问 GUI。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# javascript - 根据下拉框中的选择在网站上显示数据

> ID：10474521
> 
> 赞同：2
> 
> 时间：2012-05-06T21:37:39.060
> 
> 标签：javascript, jsf

我有以下问题：

在我的数据模型中，我有一个名为*Type*的类。*类型*由标题和描述组成。

*现在我有一个下拉框，用户可以在其中选择Type*的实例：

```
<h:selectOneMenu id="typeDropdown" onchange="displayDescription();">
      <f:selectItems value="#{operationCreator.types.title}" />
</h:selectOneMenu> 
```

下拉框下方是一个 div 区域，我希望在其中显示所选*类型*的描述。

我的问题如下：

如何将*Type*实例的描述存储在 javascript 中？一个简单的遍历列表的 JSF 标记就可以完成这项工作，但不幸的是我不知道。它们都打印额外的 HTML 标记（如数据表），或仅使用周围的 JSF 标记（如 selectItems）。

我知道我可以使用 AJAX 推送来解决我的问题，但我不想这样做。我想在 javascript 中访问我的页面加载数据。

我希望你能帮帮我！谢谢，迈克尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T16:48:50.470

以 JSON 格式准备数据，让 JSF 将其打印为 JS 变量。您可以*直接*在 backing bean 中执行此操作

```
public String getTypesAsJson() {
    return typesAsJson;
} 
```

和

```
<script>
    var types = #{bean.typesAsJson};
</script> 
```

*或者*在视图中通过迭代 Java 集合`List<Type>`，如果保证值不包含 JS 中的任何特殊字符（例如引号和换行符），并相应地打印 JavaScript 代码：

```
<script>
    var types = {
        <ui:repeat value="#{bean.types}" var="type" varStatus="loop">
            "#{type.title}": "#{type.description}"#{!loop.last ? "," : ""}
        </ui:repeat>
    };
</script> 
```

第一种方法更可取，因为当类型标题或描述包含 JS 特殊字符时，它消除了生成的 JS 代码中出现语法错误的风险。您可以使用[Google Gson](http://code.google.com/p/google-gson/)将 Java bean 集合转换为有效 JSON 格式的字符串。

```
typesAsJson = new Gson().toJson(types); 
```

现在，如果你确定下拉列表的项目值是类型标题，那么你可以得到相关的描述如下

```
<h:selectOneMenu ... onchange="displayDescription(this)"> 
```

和

```
function displayDescription(dropdown) {
    var title = dropdown.options[dropdown.selectedIndex].value;
    var description = types[title];
    // ...
} 
```

# iphone - Obj-C：如何使用方法转发改进重复的方法实现

> ID：10474523
> 
> 赞同：1
> 
> 时间：2012-05-06T21:38:04.310
> 
> 标签：iphone, objective-c, ios, runtime

我有一个实现，其中包含一组几乎相同的方法：

```
- (NSString *) specialKey{
  [self.mySpecialDictionary valueForKey:@"specialKey"];
}

- (NSString *) anotherKey{
  [self.mySpecialDictionary valueForKey:@"mySpecialKey1"];
} 
```

我现在可以像这样方便地使用这些吸气剂：

```
NSString *foo = [Setting sharedInstance].specialKey; 
```

我想我现在应该能够定义我的属性`dynamic`并针对所有这些情况进行**一种**实现，因为我在字典中查找的字符串将始终是 getter 的名称。我很确定这在 Objective-C 中应该是可行的，但我不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:34:03.823

答案就在你的问题中。尝试方法转发：

```
- (NSMethodSignature*) methodSignatureForSelector:(SEL)selector
{
    return [mySpecialDictionary methodSignatureForSelector:@selector(valueForKey:)];
}

- (void) forwardInvocation:(NSInvocation *)invocation
{
    NSString* propertyName = NSStringFromSelector(invocation.selector);
    [invocation setSelector:@selector(valueForKey:)];
    [invocation setArgument:&propertyName atIndex:2];
    [invocation invokeWithTarget:mySpecialDictionary];
} 
```

当然，要摆脱编译器警告，它需要显式定义每个属性

```
@property (nonatomic, readonly) NSString* specialKey;
@property (nonatomic, readonly) NSString* anotherKey; 
```

并`@dynamic`为他们提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:53:37.763

那这个呢？

```
 - (NSString *)valueForKey:(NSString *)key
   {
        return [self.mySpecialDictionary valueForKey:key];
   } 
```

这将返回所提供键的值。或者这个更灵活的使用

```
- (NSString *)valueForKey:(id)key 
{
    if([key isKindOfClass:[NSString class]]){
            return [self.mySpecialDictionary valueForKey:key];
    }
} 
```

甚至这个

```
 - (id)valueForKey:(id)key 
    {
        if([key isKindOfClass:[NSString class]]){
                return [self.mySpecialDictionary valueForKey:key];
        } else if (..){
               // catch more possible keys here ...
        }
    } 
```

# javascript - 如何传递论据？

> ID：10474527
> 
> 赞同：0
> 
> 时间：2012-05-06T21:38:25.073
> 
> 标签：javascript, jquery, jquery-ui

**解决了，优酷**

我有一个对话框插件，像这样

```
$("#dialog").dialog({
  click:function(){
    alert(1);
  },
  'class':"dialog"
}); 
```

以下代码是一大块主要代码，它循环选项并检查 key 是否是 jQuery 函数，然后调用它，否则将其设置为属性

```
$.each(options,function(key,val){
   if(key in $.attrFn){
    $('#div')[key](val);    // I want pass arguments to this function
    // equal $('#div').click(function(args){
    //     alert(1);
    // });
    // this is like jQuery ui dialog buttons options
   } else {
    $('#div').attr(key,val);
   }
}); 
```

我想将一些参数传递给函数，但我不知道如何？

例子：

```
$("#dialog").dialog({
  click:function(dialog){
    dialog.disAppear();
  },
  'class':"dialog"
}); 
```

**已解决**：

```
$.each(v,function(q,w){
    if(q in $.attrFn){
            //console.log(dialog);
            b[q](function(){
                w(dialog);
            });
    } else {
        b.attr(q,w);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T21:41:50.080

这是[http://jsfiddle.net/Jams/hcTTH/](http://jsfiddle.net/Jams/hcTTH/)`Dialog`上的一个工作示例

有一个关于 SO 的问题可能适合您的要求，它是[如何将参数传递给 jQuery UI 对话框事件处理程序？](https://stackoverflow.com/questions/2930676/how-to-pass-a-parameter-to-jquery-ui-dialog-event-handler)

另一个在这里

[将数据传递给 jQuery UI 对话框](https://stackoverflow.com/questions/394491/passing-data-to-a-jquery-ui-dialog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:18:58.310

我们可以使用 JavaScript IIFE 来传递参数，所以我们可以： 我将它包装到 function(){}，以防止自我执行

```
$.each(v,function(q,w){
    if(q in $.attrFn){
        if($.isFunction(w)) {
            b[q](function(e){
                w(e,dialog);
            });
        } else b[q](w);
    } else {
        b.attr(q,w);
    }
}); 
```

# objective-c - UIButton 中的图像比原始图像更暗

> ID：10474536
> 
> 赞同：2
> 
> 时间：2012-05-06T21:40:24.887
> 
> 标签：objective-c, uiimageview, uibutton

我正在尝试在后台已经有**UIImageView的单元格中添加****UIButton 。**

 **我把这段代码放在`configureCell`

```
UIButton *mail = [[UIButton alloc] initWithFrame:CGRectMake(10, 270, 40, 40)];
[mail setImage:[UIImage imageNamed:@"mail.png"] forState:UIControlStateNormal];
mail.backgroundColor = [UIColor whiteColor];
[mail addTarget:self action:@selector(sendMail) forControlEvents:UIControlEventTouchUpInside];
[cell.contentView addSubview:mail]; 
```

它可以工作，但**UIButton**中的图像似乎更暗

![原来的](../Images/ed7a86a2b39b66d28f2801dd1de29e15.png)![较暗的一个](../Images/e13999667028b20c76e283de5e20899d.png)

我尝试了这些，但没有改变任何东西

```
mail.alpha = 1;
[cell.contentView bringSubviewToFront:mail]; 
```

有没有人对此有解释，以及解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:52:09.323

我曾经遇到过同样的问题，我通过为 UIControlStateHighlighted 设置按钮的图像来解决它

```
[mail setImage:[UIImage imageNamed:@"mail.png"] forState:UIControlStateHighlighted]; 
```

希望这对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:26:20.233

尝试这个

```
UIButton *mail=[UIButton buttonWithType:UIButtonTypeCustom];
mail.frame= CGRectMake(10, 270, 40, 40);
[mail setImage:[UIImage imageNamed:@"mail.png"] forState:UIControlStateNormal];
mail.backgroundColor = [UIColor clearColor];
[mail addTarget:self action:@selector(sendMail) forControlEvents:UIControlEventTouchUpInside];
[cell.contentView addSubview:mail]; 
```**

# sql - 连接两个表但删除另一个表中已经存在的行

> ID：10474539
> 
> 赞同：2
> 
> 时间：2012-05-06T21:41:09.827
> 
> 标签：sql, postgresql, join, duplicates

我有四张桌子：

天

```
CREATE TABLE days (
day text priamry key
); 
```

这几天`monday`跑到`saturday`。

次

```
CREATE TABLE times (
time time Primary Key,
peak text 
); 
```

时间从上午 8:00 到晚上 9:00 以小时时段运行，例如 8:00、9:00、10:00、11:00

活动

```
CREATE TABLE activities (
activity text primary key
); 
```

和规划师

```
CREATE TABLE planner (
day text foriegn key references days (day)
time time foriegn key references times (time)
activity text foriegn key references activities (activity)
member bigint
primary key (day, time, member)
); 
```

计划表将包含以下数据：

```
friday, 09:00, squash_court1 , 2
friday, 09:00, squash_court2 , 3
friday, 09:00, squash_court3 , 1 
```

我想要做的我列出了这三个法院的所有未预订时间所以我会有一个像这样的列表

```
time  activity
08:00 squash_court1
10:00 squash_court1
...rest of times...
08:00 squash_court2
10:00 squash_court2
...rest of times...
08:00 squash_court3
10:00 squash_court3
...rest of times... 
```

这些在 8:00 到 10:00 之间不是 9:00 的原因是因为它已被预订

编辑

目前我有基本的加入：

```
SELECT time , activity FROM times, activities; 
```

我现在需要的只是`WHERE`删除表中预订的子句`planner`。

感谢您对此事的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T22:27:11.727

> 我现在需要的只是`WHERE`删除表中预订的子句`planner`。

这可以通过多种方式完成。`LEFT JOIN / WHERE .. IS NULL`通常在 PostgreSQL 中产生最快的计划：

```
SELECT t.time, a.activity
FROM   (days d CROSS JOIN  times t CROSS JOIN activities a)
LEFT   JOIN planner p ON (p.day, p.time, p.activity)
                       = (d.day, t.time, a.activity)
WHERE  p.activity IS NULL; 
```

我使用括号来明确您想要`CROSS JOIN`（与表格之间的逗号相同）`days`和`times`和`activities`首先。这些括号是多余的，因为默认情况下表是从左到右连接的。

该`JOIN`条件只是以下形式的较短形式：

```
 ON p.day = d.day
AND p.time = t.time
AND p.activity = a.activity 
```

* * *

另一种方法是`NOT EXISTS`半连接：

```
SELECT t.time, a.activity
FROM   (days d CROSS JOIN  times t CROSS JOIN activities a)
WHERE  NOT EXISTS (
   SELECT *
   FROM   planner 
   WHERE (p.day, p.time, p.activity)
       = (d.day, t.time, a.activity)
   ); 
```

# android - 如何将外部应用程序作为安装应用程序小部件的要求？

> ID：10474546
> 
> 赞同：0
> 
> 时间：2012-05-06T21:42:11.483
> 
> 标签：android, installation, widget, manifest

我有一个应用程序。在应用程序外部，作为第二个 .apk，我有一个应用程序小部件，它通过 ContentProvider 访问应用程序的数据库。因此，只有在安装了应用程序后，应用程序小部件才有效。

我想有以下情况：

1.  当用户尝试安装应用程序小部件时，安装应该中止并通知用户他也必须安装应用程序。
2.  当用户卸载应用程序时，应用程序小部件也应该被删除，或者
3.  应该通知用户，应用程序的卸载将破坏小部件。

有没有办法做到这一点，即。在应用小部件清单中有一些设置？如果没有，还有哪些其他选项/方案可用？最低 SDK 为 7，目标 SDK 为 8。

注意：不能将小部件和应用程序放在同一个 apk 中，因为应用程序很大并且安装到 SD 卡上，而应用程序小部件必须安装在内部存储器上。这就是分开的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:52:50.717

> 当用户尝试安装应用程序小部件时，安装应该中止并通知用户他也必须安装应用程序。

如果“安装应用小部件”是指“安装包含应用小部件的 APK”，这是不可能的。

如果“安装应用程序小部件”的意思是“将应用程序小部件添加到主屏幕”，那么您也许可以使用配置活动来装配一些东西。这或多或少会归结为亚历克斯在评论中的回答。

> 当用户卸载应用程序时，应用程序小部件也应该被删除，或者

这是不可能的。

> 应该通知用户，应用程序的卸载将破坏小部件。

这也是不可能的。但是，一旦用户卸载了一个 APK，应用小部件 APK 就可以`BroadcastReceiver`查看`ACTION_PACKAGE_REMOVED`，然后让用户知道问题所在。

> 如果没有，还有哪些其他选项/方案可用？最低 SDK 为 7，目标 SDK 为 8。

在 Android 3.0+ 变得足够主导以至于您愿意将其打包到主 APK 之前，请不要打扰应用程序小部件，因为“安装到外部存储”在 Android 3.0+ 上没有实际意义。

# java - 使用正则表达式（或类似的东西）用单词替换逗号（将 Java 项目移植到 Objective C）

> ID：10474547
> 
> 赞同：1
> 
> 时间：2012-05-06T21:42:14.043
> 
> 标签：java, objective-c, regex, porting

我正在将我的游戏从 Java 移植到 Objective C，并且我有大量的关卡数据。我希望有一种简单的方法可以通过正则表达式使用某种替换来改变它。

Java 格式如下所示 -

```
level1.addWave(240, 0, 120, 1, Constants.DOWN_STRAIGHT, .03f, 0.15f, 
Constants.WANDER_RIGHT, Constants.TOP_SIDE, 250, 390, Sheep.WHITE, 2); 
```

Objective C 版本应该是这样的——

```
[level1 addWave_offset:0 waveTimer:0 nextSheepCD:0 numberOfWaves:1 startingDirection:DOWN_STRAIGHT wanderRate:0.03 wanderLean:0.15 
wanderDirection:WANDER_NONE side:TOP_SIDE minPixel:200 maxPixel:200 type:WHITE amount:1]; 
```

有没有办法通过正则表达式进行替换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:36:13.343

我已经做了很多次类似的事情，我的方法如下，即伪代码：
- 遍历所有目录中的所有文件
- 打开文件并读取每一行
- 如果你的行以开头`level`然后做进一步处理
- 进一步处理：用以下标记`(`,`Constants.`和`,`. 修剪结果以删除空格。将每个结果存储到关联的临时变量中（例如存储`level1`到`tmp_level_id`）
- 使用存储结果生成 Objective-C 代码

虽然这可能不像一些时髦的正则表达式那么漂亮，但如果需要，它会更容易实现和修复。

亲切的问候，
博

# mysql - 从多个表中删除所有相关记录

> ID：10474549
> 
> 赞同：8
> 
> 时间：2012-05-06T21:42:35.317
> 
> 标签：mysql

我有一个调查表，并且想要删除与某个调查相关的所有记录。

我的桌子：

```
_______________     _______________     ___________  ________________
|_tblSurvey___|     |_tblAnswers___|    |_tblAlt__|  |_tblQuestions_|
| surveyID    |     | answerAltID  |    | altID   |  | questID      |
| surveyName  |     | userID       |    | altText |  | questText    |
|_____________|     |______________|    |_questID_|  |_surveyID_____| 
```

假设我想删除与surveyID 1 相关的所有记录。

我试过：

```
DELETE 
 * 
FROM tblSurvey, tblQuestions, tblAlt, tblAnswers
WHERE tblSurvey.surveyID = 1 
AND tblsurvey.surveyID = tblQuestions.surveyID
AND tblQuestions.questID = tblAlt.questID
AND tblAlt.altID = tblAnswers.answerAltID 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T21:44:53.247

两种方式：

*   使用 设置外键约束`ON DELETE CASCADE`。
*   使用多表`DELETE`语句。

试试这个：

```
DELETE tblSurvey, tblQuestion, tblAlt, tblAnswers 
FROM tblSurvey
JOIN tblQuestion ON tblsurvey.surveyID = tblQuestion.surveyID
JOIN tblAlt ON tblQuestions.questID = tblAlt.questID
JOIN tblAnswers ON tblAlt.altID = tblAnswers.answerAltID 
WHERE tblSurvey.surveyID = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T21:46:58.780

如果您的表有外键引用，您可以使用`ON DELETE CASCADE`

# vim - 如何使用撤消树更改emacs邪恶模式中撤消的粒度级别？

> ID：10474555
> 
> 赞同：24
> 
> 时间：2012-05-06T21:43:21.737
> 
> 标签：vim, emacs, emacs24, evil-mode

这些是一些很棒的选项：emacs-24、evil-mode（在 emacs 中使用 vim 绑定）和 undo-tree。

但是，当我处于编辑模式（插入模式）时，我有时会跳来跳去进行数字插入、删除等，然后再点击转义并离开插入模式。

“撤消”将整个插入（包括删除）作为一次编辑。例如，如果不撤消整个删除，我就无法撤消我不小心删除的段落！

有没有什么办法解决这一问题？

以下是一些相关链接：

*   [Emacs 如何确定要撤消的工作单元](https://stackoverflow.com/questions/6590889/how-emacs-determines-a-unit-of-work-to-undo)
*   [http://vim.wikia.com/wiki/Using_undo_branches](http://vim.wikia.com/wiki/Using_undo_branches)
*   [http://vim.wikia.com/wiki/Modified_undo_behavior](http://vim.wikia.com/wiki/Modified_undo_behavior)
*   [这个技巧](http://vim.wikia.com/wiki/Recover_from_accidental_Ctrl-U)可能从 vim 方面得到了最好的解释。

以下是转换某些 vim 命令以便可以撤消它们的 vim 映射：

```
inoremap <c-u> <c-g>u<c-u>
inoremap <c-w> <c-g>u<c-w>
inoremap <End> <C-g>u<End>
inoremap <BS> <c-g>u<BS>
inoremap <CR> <c-g>u<CR>
inoremap <del> <c-g>u<del> 
```

需要的是 emacs evil undo-tree 内部的撤消模式来跟踪除了离开插入模式之外的其他事件。例如，您应该能够长时间处于插入模式，然后撤消任何类型的删除、剪切、粘贴。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-25T19:15:37.320

尝试[evil-want-fine-undo](https://github.com/emacs-evil/evil/blob/master/evil-vars.el#L331)：

> 操作是否在多个步骤中被撤消。有两种可能的选择： nil（“否”）表示在插入状态期间所做的所有更改，包括更改操作后可能的删除，都在单个撤消步骤中收集。非零（“是”）表示根据 Emacs 启发式确定撤消步骤，并且不尝试聚合更改。

```
(setq evil-want-fine-undo t) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T22:01:25.167

这是特定于撤消树的吗？我不使用它，所以以下可能不适用...

我不确定您是否可以修改撤消机制认为是单个单元的编辑量，但您可以做的是：

首先选择一个区域，然后键入撤消键，Emacs 只会撤消在该区域中所做的更改。

这可能非常有用。

# reporting-services - 如何使用 SSAS Cube 中的 SSRS 钻取最小粒度数据

> ID：10474556
> 
> 赞同：0
> 
> 时间：2012-05-06T21:43:27.707
> 
> 标签：reporting-services, ssas

我有一个使用 SSAS 多维数据集作为数据源的 SSRS 报告。我想添加钻取功能，以反映从 Excel 钻入多维数据集。需要明确的是，我不是指导航层次结构。我想获得用于计算多维数据集中的聚合的最低粒度数据。当您双击链接到 SSAS 的数据透视表时，Excel 会执行此操作，这就是我想要的。

有谁知道如何从 SSRS 实现这一目标，或者甚至 excel 是如何做到的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T05:51:25.170

您可以使用默认追溯操作或自定义追溯操作。当您双击包含聚合值的 excel 单元格时，默认钻取操作会显示粒度数据。

# mysql - 你能检查一下是否会有任何结果

> ID：10474558
> 
> 赞同：0
> 
> 时间：2012-05-06T21:43:37.547
> 
> 标签：mysql, mysql5

我在搜索页面上显示 Spotlight 帖子。

当用户输入关键字来搜索帖子时，我喜欢使用该关键字带来 Spotlight 帖子。如果没有包含该关键字的帖子，那么我只想从数据库中获取任何 Spotlight 帖子。

我的问题是，我可以在 MySQL 查询中检查它，看看它们是否会是这个关键字的任何结果，如果不是，那么忽略这个关键字？

我的查询

```
SELECT id, title, desc 
  FROM post 
 WHERE isActive = 1 
   AND title = 'keyword' 
```

但是如果我通过这个查询得到 0 个结果，我想忽略它并运行它

```
SELECT id, title, desc 
  FROM post 
 WHERE isActive = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:55:21.403

`desc`是 MySQL 的[保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)（用于以 * *desc* * 结束顺序对结果进行排序）。要将其用作列名，您需要将其放在反引号中

```
$select = " SELECT id, title, `desc` ";
$from = ' FROM post';
$where = 'WHERE isActive=1 and title="%$keywords%"';
$sql = $select.$from.$where; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:52:34.067

这就是我为解决我的问题所做的。

```
$select = " SELECT id, title, desc ";
$from = ' FROM post';
$where = 'WHERE isActive=1 and title="%$keywords%"';
$sql = $select.$from.$where; 
```

如果没有结果，则覆盖

```
$where = 'WHERE isActive=1';
$sql = $select.$from.$where; 
```

如果有人知道其他方式，请告诉我。

# c++ - 浴室同步和线程队列

> ID：10474566
> 
> 赞同：1
> 
> 时间：2012-05-06T21:44:42.403
> 
> 标签：c++, semaphore

对于家庭作业，我们得到了浴室同步问题。我一直在努力弄清楚如何开始。当一个人进入洗手间时我想做什么（personEnterRestrrom 函数），如果他们是女性并且没有男性在他们进入的洗手间，如果不是，他们会排队等待女性。我想为男人做同样的事情。我试图实现一个包含线程的队列，但无法让它工作。然后在 personLeavesRestroom 函数中。当一个人离开，如果没有人留在浴室里，另一个队列就开始了。这是我的代码，我知道我很遥远，因为我确实需要一些指导并且对信号量不是很熟悉。

```
//declarations
pthread_mutex_t coutMutex;
int menInBath;
int womanInBath;
int menWaiting;
int womenWaiting;
queue<pthread_mutex_t>men;
queue<pthread_mutex_t>women;

 personEnterRestroom(int id, bool isFemale)
 {
   // LEAVE THESE STATEMENTS                                                 
   pthread_mutex_lock(&coutMutex);
  cout << "Enter: " << id << (isFemale ? " (female)" : " (male)") << endl;
  pthread_mutex_unlock(&coutMutex);

  // TODO: Complete this function                                           
 if(isFemale && menInBath<=0)
  {
     womanInBath++;
   }
 else if(isFemale && menInBath>0)
 {
  wait(coutMutex);
  women.push(coutMutex);
}
 else if(!isFemale && womanInBath<=0)
{
  menInBath++;
}
else
{
  wait(coutMutex);
  men.push(coutMutex);
} 
```

}

```
 void
    personLeaveRestroom(int id, bool isFemale)  
    {
   // LEAVE THESE STATEMENTS                                                 
    pthread_mutex_lock(&coutMutex);
    cout << "Leave: " << id << (isFemale ? " (female)" : " (male)") << endl;
    pthread_mutex_unlock(&coutMutex);

  if(isFemale)
    womanInBath--;
  if(womanInBath==0)
    {
       while(!men.empty())
         {
           coutMutex=men.front();
           men.pop();
           signal(coutMutex);
         }
     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:34:17.863

如果您正在寻找 FIFO 互斥体，这个可以帮助您：

您将需要：
**互斥体**( `pthread_mutex_t mutex`)、
**条件变量数组**( `std::vector<pthread_cond_t> cond`)
和**用于存储线程 ID 的队列**( `std::queue<int> fifo`)。

假设有 ID 为的`N`线程。然后看起来像这样（伪代码）：`0``N-1``fifo_lock()``fifo_unlock()`

```
fifo_lock()
    tid = ID of this thread;
    mutex_lock(mutex);
    fifo.push(tid); // puts this thread at the end of queue

    // make sure that first thread in queue owns the mutex:
    while (fifo.front() != tid)
        cond_wait(cond[tid], mutex);

    mutex_unlock(mutex);

fifo_unlock()
    mutex_lock(mutex);
    fifo.pop(); // removes this thread from queue

    // "wake up" first thread in queue:
    if (!fifo.empty())
        cond_signal(cond[fifo.front()]);

    mutex_unlock(mutex); 
```

# javascript - 当您将方法粘贴在变量中时，为什么“this”会发生变化

> ID：10474570
> 
> 赞同：1
> 
> 时间：2012-05-06T21:45:11.700
> 
> 标签：javascript

> **可能重复：**
> [为什么`this`在调用对象方法的引用时方法会发生变化？](https://stackoverflow.com/questions/7657633/why-does-a-methods-this-change-when-calling-a-reference-to-an-objects-method)

我以为我懂一点 JavaScript，但我只是注意到，如果你从一个变量执行一个方法，它会改变这一点。我试图找到有关此的信息，但大多数文章都在谈论调用、应用、绑定、事件处理程序/回调等。

```
var dog = {

  bark: function(){
    console.log('woof');
  },

  speak: function(){
    this.bark();
  }

};

// Test 1
dog.speak(); //woof

// Test 3
var speak = dog.speak
speak(); //TypeError: Object #<Object> has no method 'bark' 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-06T21:52:59.857

我认为您需要将其设置`var`为说话以外的其他内容。你需要去：

```
var speaking_var = dog.speak();
speaking_var(); 
```

修正你的错别字（你忘了`;`之后`var speak = dog.speak`）

# c++ - 如何将 unicode 字符与 boost::spirit 匹配？

> ID：10474571
> 
> 赞同：10
> 
> 时间：2012-05-06T21:45:11.633
> 
> 标签：c++, parsing, boost, boost-spirit

如何使用匹配 utf8 unicode 字符`boost::spirit`？

例如，我想识别此字符串中的所有字符：

```
$ echo "На берегу пустынных волн" | ./a.out
Н а б е р е гу п у с т ы н н ы х в о л н 
```

当我尝试这个简单`boost::spirit`的程序时，它不会正确匹配 unicode 字符：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/support_istream_iterator.hpp>
#include <boost/foreach.hpp>
namespace qi = boost::spirit::qi;

int main() {
  std::cin.unsetf(std::ios::skipws);
  boost::spirit::istream_iterator begin(std::cin);
  boost::spirit::istream_iterator end;

  std::vector<char> letters;
  bool result = qi::phrase_parse(
      begin, end,  // input     
      +qi::char_,  // match every character
      qi::space,   // skip whitespace 
      letters);    // result    

  BOOST_FOREACH(char letter, letters) {
    std::cout << letter << " ";
  }
  std::cout << std::endl;
} 
```

它的行为如下：

```
$ echo "На берегу пустынных волн" | ./a.out | less
<D0> <9D> <D0> <B0> <D0> <B1> <D0> <B5> <D1> <80> <D0> <B5> <D0> <B3> <D1> <83> <D0> <BF> <D1> <83> <D1> <81> <D1> <82> <D1> <8B> <D0> <BD> <D0> <BD> <D1> <8B> <D1> <85> <D0> 
<B2> <D0> <BE> <D0> <BB> <D0> <BD> 
```

**更新：**

好的，我在这方面做了更多工作，下面的代码有点工作。它首先将输入转换为 32 位 unicode 字符的迭代器（如此[处](http://comments.gmane.org/gmane.comp.parsers.spirit.general/23490)推荐）：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/support_istream_iterator.hpp>
#include <boost/foreach.hpp>
#include <boost/regex/pending/unicode_iterator.hpp>
namespace qi = boost::spirit::qi;

int main() {
  std::string str = "На берегу пустынных волн";
  boost::u8_to_u32_iterator<std::string::const_iterator>
      begin(str.begin()), end(str.end());
  typedef boost::uint32_t uchar; // a unicode code point
  std::vector<uchar> letters;
  bool result = qi::phrase_parse(
      begin, end,             // input
      +qi::standard_wide::char_,  // match every character
      qi::space,              // skip whitespace
      letters);               // result
  BOOST_FOREACH(uchar letter, letters) {
    std::cout << letter << " ";
  }
  std::cout << std::endl;
} 
```

该代码打印 Unicode 代码点：

```
$ ./a.out 
1053 1072 1073 1077 1088 1077 1075 1091 1087 1091 1089 1090 1099 1085 1085 1099 1093 1074 1086 1083 1085 
```

[根据官方Unicode 表](http://en.wikipedia.org/wiki/List_of_Unicode_characters)，这似乎是正确的。

现在，鉴于此 Unicode 代码点向量，谁能告诉我如何打印实际字符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T07:31:46.727

我没有太多经验，但显然 Spirit（SVN 主干版本）支持 Unicode。

```
#define BOOST_SPIRIT_UNICODE // We'll use unicode (UTF8) all throughout 
```

例如，参见方案演示中的**[sexpr 解析器示例。](http://boost-spirit.com/dl_more/scheme/scheme_v0.2/sexpr.hpp)**

```
BOOST_ROOT/libs/spirit/example/scheme 
```

我相信这是基于 Bryce Lelbach ¹的演示文稿中的演示，其中特别展示了：

*   wchar 支持
*   utree 属性（*仍处于*试验阶段）
*   s-表达式

有一篇关于[S-expressions 和 variant](http://boost-spirit.com/home/2010/03/11/s-expressions-and-variants/)的在线文章。

* * *

¹如果确实如此，这里是**[该演示文稿中的视频](http://blip.tv/boostcon/ast-construction-with-the-universal-tree-5266608)**和[幻灯片 (pdf)](https://github.com/boostcon/2011_presentations/raw/master/fri/utree_talk.pdf)，可在[此处找到 (odp)](http://boostcon.boost.org/2011-resources)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T22:14:23.820

你不能。问题不在于 boost::spirit 而是[Unicode 很复杂](http://www.joelonsoftware.com/articles/Unicode.html)。`char`不是一个字符，而是一个“字节”。即使您在代码点级别工作，用户感知的字符仍然可能由多个代码点表示。（例如 пусты́нных 是 9 个字符，但有 10 个代码点。在俄语中可能不够清楚，因为它没有广泛使用变音符号。其他语言可以。）

要真正迭代用户感知的字符（或 Unicode 术语中的字素簇），您需要使用 Unicode 专用库，即 ICU。

但是，迭代字符的实际用途是什么？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-06T20:23:16.227

在 Boost 1.58 中，我可以匹配任何 unicode 符号：

```
*boost::spirit::qi::unicode::char_ 
```

我不知道如何定义特定范围的 unicode 符号。

# javascript - 恢复本机 setter/getter

> ID：10474575
> 
> 赞同：2
> 
> 时间：2012-05-06T21:45:43.410
> 
> 标签：javascript, setter, getter

我已经探索了 getter/setter 的工作原理......

```
document.body.innerHTML = 'This will change the site';

Object.defineProperty(document.body, 'innerHTML', {
    get: function(){
        console.log('[FAKED] document.innerHTML');
        return false;
    },
    set: function(val){
        console.log('[FAKED] document.innerHTML = '+val);
        return false;
    }
});

alert(document.body.innerHTML); // false 
```

如果浏览器不支持 innerHTML 或者您想为`<progress>`. 但是，如果您足够愚蠢地执行此代码。你怎么能把它恢复到以前的样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T22:06:16.667

您破坏了`.innerHTML`.

没有回头路了……

# php - 加入查询问题

> ID：10474577
> 
> 赞同：1
> 
> 时间：2012-05-06T21:46:02.120
> 
> 标签：php, sql, join

我有 2 张桌子。我的表格如下。我有一个名为 getTag.php 的脚本。作为用户的想法希望查看我标记为 php 的所有投资组合项目。但是，我不只是想做：

```
SELECT t.portfolio_item_id, p.*
FROM tags t
INNER JOIN portfolio p ON t.portfolio_item_id = p.id
WHERE t.$skillArea = '1' 
```

我也想获取标签表的所有列并将它们加入。因此，如果标签表中的 php =1，则获取标签表中的其余列及其值以及投资组合表中相应的投资组合项目行

*   **文件夹**

    id
    item_name
    网址

*   **标签**

    Portfolio_item_id
    php
    html
    设计
    CSS

    ETC...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T22:00:06.680

```
SELECT t.*, p.*
FROM tags t
INNER JOIN portfolio p ON t.portfolio_item_id = p.id
WHERE t.$skillArea = '1' 
```

你也可以这样做`SELECT *`，但我已经包含了 t 和 p 来证明你哪里出错了。

*   t 是标签表的别名
*   p 是投资组合表的别名

*   t.* 带回标签表中的所有列

*   p.* 带回投资组合表中的所有列

您有 t.portfolio_item_id 只会带回 1 列，其中 * 是`wildcard`用于返回该表中的所有列的。

# c++ - 类指针丢失成员？

> ID：10474582
> 
> 赞同：1
> 
> 时间：2012-05-06T21:46:16.347
> 
> 标签：c++, pointers, binary-tree, dereference

我有一个二叉树，我正在搜索：

```
TreeNode<Vessel*>* node = this->tree_->search("PotatoFace");
string mystring = node->print(); 
```

当我运行它时，节点包含正确的数据，但是当我输入后立即打印该数据时：

```
string TreeNode<T>::print()
{
return data_->toString();
} 
```

'this'（应该是 'node' 并且与 'node' 具有相同的内存地址）的所有数据成员，包括 Vessel* 都设置为 null。

有任何想法吗？

谢谢！

全树节点：

```
#pragma once
#include <cstring>
#include <fstream>
#include <iostream>
using namespace std;

template <class T>
class TreeNode
{
private:
TreeNode<T>* greaterNode_;
TreeNode<T>* lessNode_;
TreeNode<T>* parentNode_;
TreeNode<T>* getLowest_();
T data_;

public:
TreeNode();
TreeNode(T data);
void add(T data);
bool operator==(const string &rhs);
TreeNode* search(T data);
void seqSearch(string data, TreeNode<T>* node);
void del(TreeNode<T>* root);
void toFile(ofstream& BSTFile);
TreeNode* compare(int sig[4]);
TreeNode* getRoot();
TreeNode* forward(TreeNode<T>* node);

string print();
};

template <class T>
TreeNode<T>::TreeNode(T data)
{
data_ = data;
greaterNode_ = lessNode_ = parentNode_= NULL;

}
template <class T>
TreeNode<T>::TreeNode()
{
}

template <class T>
void TreeNode<T>::seqSearch(string data, TreeNode<T>* node )
{
if(*data_ == data)
{
    *node = this->data_;
}
if(this->lessNode_)
{
    this->lessNode_->seqSearch(data, node);
}   
if(this->greaterNode_)
{
    this->greaterNode_->seqSearch(data, node);
}   
}

template <class T>
string TreeNode<T>::print()
{
return data_->toString();
} 
```

仍然不完全确定如何解释它为什么不起作用，但这是一个范围问题，在二叉树类树节点之外丢失数据。取出所有返回节点的树函数，现在一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T07:12:42.680

你确定要写：

```
string mystring = node->print(); 
```

不是

```
string mystring = hello->print(); 
```

如果是的话，它看起来像'this'的

```
string mystring = node->print(); 
```

为空（节点为空）。这可能有几个原因：

*   节点永远不会被初始化
*   节点应由 search("something") 设置，但搜索返回 null

如果您粘贴更多代码，那将非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:30:03.247

仍然不完全确定如何解释它为什么不起作用，但这是一个范围问题，在二叉树类树节点之外丢失数据。

通过确保二叉树类不返回任何类型的 TreeNode* 并在二叉树类中完成节点的值后运行我想要的任何其他函数来纠正它。这现在有效。感谢您的帮助！

# java - Maven 找不到父 POM

> ID：10474583
> 
> 赞同：9
> 
> 时间：2012-05-06T21:46:22.473
> 
> 标签：java, maven, pom.xml

我正在尝试构建一个 Maven 项目，但我遇到了问题。

pom 已指定父 pom 并且 maven 找不到它。我实际上有父 pom，但我不知道在哪里放置它或者我应该怎么做所以 maven 知道。

如果我的问题很愚蠢，我是 maven 的新手，很抱歉。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T01:56:46.553

如果你有父 pom，你可以尝试安装它。

当您`mvn install`在一个模块上运行时，生成的工件将被放置在您的存储库中，以便可以从其他模块中使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-14T11:47:25.063

我正在使用 Netbeans，我在运行 Maven/Goals 中运行了**-N 版本：更新子模块。**

有效！构建花了 5 分钟，但它确实构建了项目，这是它第一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T02:50:55.043

[http://maven.apache.org/guides/introduction/introduction-to-the-pom.html](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)示例 1 和示例 2 用于继承，可能很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-18T14:18:10.503

当项目中的 POM 不同时会发生这种情况。他们没有相同的版本。

例如，如果您有：

```
MyProject / EAR ..... MyProject / WEB ..... 
```

您需要在三个 POM 中具有相同的版本

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-09-14T06:41:39.323

对我来说同样的错误。我通过使用新的 POM 文件更新项目来解决（我团队中的某个人不小心删除了它）。

# android - View 在 android 上没有任何价值

> ID：10474584
> 
> 赞同：0
> 
> 时间：2012-05-06T21:46:25.237
> 
> 标签：android, view

当我尝试手动编辑值时，我在调试器上收到此错误：生成的值 (int) 与声明的类型 (android.view.View) 不兼容

```
 final View l = findViewById(R.id.GameplayLayout);
    Animation a = AnimationUtils.loadAnimation(MainActivity.this,
    android.R.anim.fade_out);
    a.setAnimationListener(new AnimationListener() {
        public void onAnimationEnd(Animation animation) {
            fadein();
        }

        public void onAnimationRepeat(Animation animation) {
        }

        public void onAnimationStart(Animation animation) {
        }

    });
    l.startAnimation(a); 
```

它选择：

```
 l.startAnimation(a); 
```

作为错误行，在调试器中它说：

```
 l = null; 
```

为什么要这样对我？:(

谢谢！

我不得不使用 R.id.startscreen ......失败......对不起！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-06T23:44:42.887

`setContentView(R.layout.GameplayLayout)`在查找视图之前尝试调用。

# google-drive-api - 通过 Chrome 网上应用店安装的原因

> ID：10474588
> 
> 赞同：9
> 
> 时间：2012-05-06T21:47:04.133
> 
> 标签：google-drive-api

是否有技术原因，为什么必须通过 Chrome Web Store 安装 Google Drive 应用程序（这严重限制了潜在用户的数量）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T04:41:15.497

需要安装的原因是让用户能够从 Google Drive 用户界面中访问应用程序。如果没有安装，用户对于大多数应用程序将没有起点，因为他们将无法从特定文件开始，然后选择一个应用程序。

也就是说，我意识到在早期开发中可能很难使用。我们（Google Drive 团队）正在评估是否应该删除此要求。我怀疑我们将在接下来的几周内得到最终答案/解决方案。

**更新：**我们已经删除了安装要求。应用程序不再需要安装 Chrome 网上应用店才能透明地与用户的云端硬盘配合使用，但仍需要使用 Google 云端硬盘 UI 集成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T11:47:13.890

为了提供从驱动界面创建新应用程序文档的 create->xxx 行为，并能够从链接打开现有文档，必须有某种在 Google 系统中注册的清单和某种来自用户的协议：应用程序可以访问您的文档并使用特定的文件类型。当您考虑不这样做的影响时，几乎没有办法解决这个问题。

也就是说，有两个高级问题会导致兼容性问题。

正如海报所说，在 chrome 商店中安装的要求

> 严重限制了潜在用户的数量。

但为什么？为什么大多数 Chrome Web Store 应用程序都说它们只能在 Chrome 上运行？其中大多数是可在一系列浏览器上运行的 Web 应用程序的包装器，但您单击一个选择，大多数显示“适用于 chrome”，也就是仅安装在 chrome 上。

在我们在 chrome 上启动我们的应用程序之前，我们发现有人在商店中创建了“xxxxxxx 启动器”，它只是转发到我们的 web 应用程序页面。我们仍然想知道为什么它只“适用于 chrome”。我怀疑网上商店的一些默认模板有：

```
"container" : "CHROME", 
```

在其中，这是仅说 chrome 的配置选项。也就是说，我找不到一个，所以我很困惑为什么会这样。如果人们选择 Chrome 会更健康，因为它是更好的浏览器（在很多方面都是如此），而不是因为如果他们不这样做，他们的选择就会受到限制。人们总是可以写信给应用程序供应商，询问这个限制是否真的有必要。

第二个想法是，跨云存储提供商的标准化清单格式将意味着 Web 应用程序供应商的使用率要高得多。虽然集成起来并不复杂，例如与 Google Drive 集成，但后端和解决细节总共需要一周多的时间。乘以这么多存储提供商，您将失去一名工程师 2 个月 + 之后的维护。供应商集成越多，发生的可能性就越大。

当我使用它时，每个云存储供应商的用于打开和保存的 JavaScript 小部件（我知道谷歌已经打开）将改善 Web 应用程序供应商的集成。我们应该跨多个应用程序使用一个存储提供程序，而不是跨多个存储提供程序使用一个 Web 应用程序，文件 UI 应该对存储提供程序是通用的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-06T21:56:57.430

为了与本地文件系统同步，需要安装一个浏览器插件，以便将 Web 与本地计算机桥接。默认情况下，出于安全原因，Web 应用程序没有用户硬盘上的文件 I/O 权限。另一方面，浏览器扩展不受此限制的影响，因为它假定当您（用户）授予应用程序安装在您的计算机上的权限时，您授予它访问本地计算机上更多资源的权限。

考虑到不同浏览器的附加架构不同，谷歌首先决定首先为他们的平台构建这个应用程序。您还可以[在 Android/Play 市场中找到 Google Drive](https://play.google.com/store/apps/details?id=com.google.android.apps.docs&hl=en)，这是 Google 的其他应用市场之一。

将来，如果 Google Drive 成功，很可能会为 Firefox 和 Internet Explorer 创建附加组件，但这当然还没有完成，这取决于 Google 是否向公众或内部发布 API决定也为其他浏览器开发附加组件。

# r - 通过范围内的成员资格将一个数据框连接到另一个数据框

> ID：10474590
> 
> 赞同：4
> 
> 时间：2012-05-06T21:47:18.183
> 
> 标签：r

我有两个数据框，如下所示：

```
df1 <- data.frame(time=seq(0.0, by = 0.003, length.out = 1000))

   time
1 0.000
2 0.003
3 0.006
4 0.009
5 0.012
6 0.015
...

df2 <- data.frame(onset=c(0.0, 0.8, 1.9, 2.4), offset=c(0.799, 1.899, 2.399, 3.0))

  onset offset   A   B
1   0.0  0.799 ... ...
2   0.8  1.899 ... ...
3   1.9  2.399 ... ...
4   2.4  3.000 ... ... 
```

实际上，每个数据帧中的列数更多，第一个数据帧中的次数更多，而且它们的间隔不规则；第二个数据框中没有太多行。我想合并两个数据帧，以便第一个数据帧中的每一行从第二个数据帧中获取适当范围的额外列，并且我想有效地做到这一点，因为涉及数十万行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T22:38:10.313

您可以使用`findInterval`将时间与相应的 匹配`onset`，然后是`merge`您的两个 data.frames：

```
df1$onset <- df2$onset[findInterval(df1$time, df2$onset)]
df3 <- merge(df1, df2, by = "onset")

head(df3)
#   onset  time offset
# 1     0 0.000  0.799
# 2     0 0.003  0.799
# 3     0 0.006  0.799
# 4     0 0.009  0.799
# 5     0 0.012  0.799
# 6     0 0.015  0.799

tail(df3)
#      onset  time offset
# 995    2.4 2.982      3
# 996    2.4 2.985      3
# 997    2.4 2.988      3
# 998    2.4 2.991      3
# 999    2.4 2.994      3
# 1000   2.4 2.997      3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T22:45:54.980

您可以为每个准备一个因子，然后使用 plyr::join：

```
# breaks for 'cut'
times=c(df2$onset[1],df2$offset)

# modified df1 to shorten the list
df1 <- data.frame(time=seq(0.0, by = 0.03, length.out = 100))

# Add a few columns to df2
df2 <- data.frame(onset=c(0.0, 0.8, 1.9, 2.4), offset=c(0.799, 1.899, 2.399, 3.0), A=c(1,2,3,4), B=c(5,6,7,8))

df2$ranges <-cut(df2$onset,times,include.lowest=T))
df1$ranges <-cut(df1$time,times,include.lowest=T,levels=levels(df2$ranges))

join(df1,df2,by='ranges')

head(join(df1,df2,by='ranges')[-2])
  time onset offset A B
1 0.00     0  0.799 1 5
2 0.03     0  0.799 1 5
3 0.06     0  0.799 1 5
4 0.09     0  0.799 1 5
5 0.12     0  0.799 1 5
6 0.15     0  0.799 1 5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T05:08:15.857

第三个选项`sqldf`用于执行`conditional join`

```
> head(sqldf("select * 
+            from df1 inner join df2 
+                     on (df1.time between df2.onset and df2.offset)")) 
```

头部输出：

```
 time onset offset
1 0.000     0  0.799
2 0.003     0  0.799
3 0.006     0  0.799
4 0.009     0  0.799
5 0.012     0  0.799
6 0.015     0  0.799 
```

内部连接将消除不适合 df2 范围之间的时间。如果你想保留这些时间，并且在开始和结束时有空值，只需在上面的函数中的 SQL 中使用a`left join`而不是。`inner join``sqldf`

# python - 找出各种文档中的常用词python

> ID：10474591
> 
> 赞同：0
> 
> 时间：2012-05-06T21:47:22.633
> 
> 标签：python, algorithm

我有一个 csv 文件，它是这样的：

```
 book_store_id  book_price   name

 1              200.0        foo
 1              320.0        bar
 2              220.0        foobar
 2              280.0        foo 
```

所以..这是一个巨大的清单..

现在我试图找出如果输入是“foo”

那么既然书店 id 1 有“foo”标记的最低价格，那么我想返回“book_store”1

现在我这样做是创建一个倒排索引，它返回类似

```
foo:1,2 
bar:1
foobar:2 
```

依此类推，然后是一本单独的字典，我在其中维护书店中的图书价格..但这是解决此问题的最佳方法吗？

在python中解决这个问题的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:20:00.377

我将创建第三个数据结构（python dict，或数据库表或其他）。

数据结构键应该是名称（假设名称是唯一的）。

这个“名称”关键点的值应该是最低价格。

每次插入新书，或者更新一本书的价格，在第三个数据结构中查找书籍最低价格，如果低于最低价格，设置新的最低价格。

不要忘记，如果您删除一本书或提高其价格，请确保更新最低限度。（您可以添加另一列，以便每本书都有一个布尔值“是当前最小值”。然后在价格上涨时，如果这是真的，您只需要更新最小值。

问题是，当您删除旧的最小值时，您需要找到下一个最佳最小值。

这是拥有 heapq 的好地方

**python在这里有一个很好的heapq实现**：http : [//docs.python.org/library/heapq.html](http://docs.python.org/library/heapq.html)

否则，您必须遍历所有值以在每次价格上涨时找到新的最小值，或者您必须每次存储 5 个最佳价格。

玩得开心 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:34:24.237

这完全取决于您正在处理的数据量。如果金额不是太高，那么你正在做的就可以了。

# javascript - 读取 JSON 数据时，getAccessor 函数出现 JQGrid 4.3.2 错误

> ID：10474592
> 
> 赞同：1
> 
> 时间：2012-05-06T21:47:39.873
> 
> 标签：javascript, json, jqgrid

我一直在尝试在 JQGrid 中呈现 JSON 数据。我收到以下错误：

```
Error: b is undefined
Source File: http://localhost:1302/Scripts/jquery.jqGrid.min.js
Line: 23 
```

当我使用未最小化的 JQGrid 源代码时，我看到它对 getAccessor 方法进行了多次调用，并且在最后一次调用时，该方法的第一个参数（obj）被传递了一个未定义的值：

```
Error: obj is undefined
Source File: http://localhost:1302/Scripts/jquery.jqGrid.src.js
Line: 151 
```

这似乎是导致网格停止渲染的原因，但为什么呢？

呈现的网格显示列标题，但没有内容。网格中的“正在加载...”消息永远不会消失。

我的 JSON 数据如下所示：

```
{
   "total":"1",
   "page":"1",
   "userdata":{

   },
   "records":"2",
   "rows":[
      {
         "DateOfBirth":"11/04/2012 12:00:00 AM",
         "DisambiguationNote":"Boring guy",
         "FirstName":"Joe",
         "LastName":"Bloggs",
         "MiddleName":"Binkie",
         "PersonId":"1"
      },
      {
         "DateOfBirth":"01/01/2001 12:00:00 AM",
         "DisambiguationNote":"someone else",
         "FirstName":"Edna",
         "LastName":"Edwards",
         "MiddleName":"Edith",
         "PersonId":"8"
      }
   ]
} 
```

我的网格代码如下所示：

```
$(function () {
    $("#persongrid").jqGrid({
        url: '/Person/List',
        datatype: 'json',
        mtype: 'GET',
        jsonreader: {
            root: "rows",
            page: "page",
            total: "total",
            records: "records",
            repeatitems: false,
            id: "5"  ,
            cell: ""  ,
            userdata: "userdata"
        },
        colModel: [
            { name: 'DateOfBirth', index: 'DateOfBirth',sorttype:'date' },
            { name: 'DisambiguationNote', index: 'DisambiguationNote' },
            { name: 'FirstName', index: 'FirstName' },
            { name: 'LastName', index: 'LastName' },
            { name: 'MiddleName', index: 'MiddleName' },
            { name: 'PersonId', index: 'PersonId',sorttype:'int' }
        ],
        pager: '#persongridpager',
        rowNum: 10,
        rowList: [10, 20, 30],
        viewrecords: true,
        gridview: true,
        caption: 'People'
    });
}); 
```

我可以看到正在从 AJAX 请求中检索 JSON 数据，并且我已经非常仔细地通过了 JQGrid 的 JSON 数据指令，但看不出我做错了什么。

任何人都可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T22:38:18.010

错误很容易，但很难找到：你使用`jsonreader`代替，`jsonReader`所以`jsonreader`将被忽略并使用默认值`jsonReader`。

[从demo](http://www.ok-soft-gmbh.com/jqGrid/Richard.htm)上可以看出修改后数据读取成功。

顺便说一句，您可以仅指定`jsonReader`与默认值不同的属性并使用

```
jsonReader: {
    repeatitems: false,
    id: "5",
} 
```

或者

```
jsonReader: {
    repeatitems: false,
    id: "PersonId",
} 
```

我添加到演示`height: 'auto'`选项只是为了提高可见性。

# ruby - 将哈希写入 CSV 文件，然后将值读回以形成哈希

> ID：10474598
> 
> 赞同：0
> 
> 时间：2012-05-06T21:48:49.087
> 
> 标签：ruby, csv, ruby-on-rails-3.1, ruby-on-rails-3.2, export-to-csv

我正在努力解决我在最近的一个项目中遇到的问题。这是情景：

我正在调用 GoToWebinar API 以获取即将举行的网络研讨会。一切正常，网络研讨会以哈希的形式获取，如下所示：

```
[
{
"webinarKey":5303085652037254656,
"subject":"Test+Webinar+One",
"description":"Test+Webinar+One+Description",
"times":[{"startTime":"2011-04-26T17:00:00Z","endTime":"2011-04-26T18:00:00Z"}]
},
{
"webinarKey":9068582024170238208,
"name":"Test+Webinar+Two",
"description":"Test Webinar Two Description",
"times":[{"startTime":"2011-04-26T17:00:00Z","endTime":"2011-04-26T18:00:00Z"}]
}
] 
```

我创建了一个 rake 任务，我们将每天运行一次以使用此哈希填充 CSV 文件，然后在控制器操作中读取 CSV 文件以填充视图。

这是我填充 CSV 文件的代码：

```
g = GoToWebinar::API.new()
@all_webinars = g.get_upcoming_webinars
CSV.open("#{Rails.root.to_s}/public/upcoming_webinars.csv", "wb") do |csv|
  @all_webinars.each do |webinar|
    webinar.to_a.each {|elem| csv << elem}
  end
end 
```

我需要一些帮助来找出一种方法来保存以散列形式接收到的信息以保存在 CSV 文件中，以便保留订单，以及从 CSV 文件中读取回信息的方法它以相同的方式填充控制器操作中的哈希。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T00:10:59.613

您想使用散列的键（因为它们是常量）作为 CSV 文件的标题。然后在你做的时候推动每个元素。

```
g = GoToWebinar::API.new()
@all_webinars = g.get_upcoming_webinars
headers= @all_webinars.keys
CSV.open("#{Rails.root.to_s}/public/upcoming_webinars.csv", "wb", headers: headers) do |csv|
  @all_webinars.each do |webinar|
    webinar.to_a.each {|elem| csv << elem}
  end
end 
```

但是，您将要确保散列值内的任何数据都被展平。需要处理数组内部的时间散列（也许只是删除时间并在散列中有一个 startTime 和 endTime 键）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T10:13:31.150

从我从所有示例中学到的知识和为此所做的工作中，我认为绕过此类功能的最佳方法是创建一个 rake 任务并使用信息填充数据库，并使用保存的信息来填充视图.

# java - 另一个 java.lang.IndexOutOfBoundsException，但 index < size

> ID：10474612
> 
> 赞同：6
> 
> 时间：2012-05-06T21:51:29.837
> 
> 标签：java, indexoutofboundsexception

我刚刚在我的小程序中将我所有的数组移植到 ArrayList （由于我对 Java 非常缺乏知识，我不知道基本的数组类型没有任何“.add”选项），一切看起来都很好......除了不时抛出异常，但它自相矛盾：

```
Exception in thread "AWT-EventQueue-0" java.lang.IndexOutOfBoundsException: Index: 17, Size: 21
    at java.util.ArrayList.rangeCheck(ArrayList.java:604)
    at java.util.ArrayList.get(ArrayList.java:382)
    at guay.Puntitos.AumentarTamano(Puntitos.java:346)
    at guay.Guay$MiMouse.mouseMoved(Guay.java:226)
    at java.awt.Component.processMouseMotionEvent(Component.java:6550)
    at java.awt.Component.processEvent(Component.java:6274)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Window.processEvent(Window.java:2016)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

Java指向我的代码块是这样的：

```
for (int i = 1; i < elipsasCol.size(); i++) {
  if (elipsasCol.get(i) != null && elipsasCol.get(i).contains(mouse)) {
     // This line                    
     double modulo = Math.sqrt(Math.pow(mouse.x - elipsasCol.get(i).getCenterX(), 2) 
                             + Math.pow(mouse.y - elipsasCol.get(i).getCenterY(), 2));
  }
} 
```

该错误不会对程序的性能造成任何麻烦。但是，我很感激有人可以向我解释这个异常的原因是什么。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T22:22:00.010

这将是一个并发修改问题。这是获得该错误的唯一方法。

您没有收到并发修改错误的原因是因为您进行循环的方式不会创建迭代器，因此没有机会引发并发修改错误。

我建议在您的数组列表上同步~~或使用诸如[CopyOnWriteArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)~~之类的东西。

*编辑：抱歉 CopyOnWrite 不适用于此特定问题。您需要切换到 foreach 循环才能使其成为一个选项。*

针对您的以下评论：

同步：

```
synchronized(elipsasCol){
for (int i = 1; i < elipsasCol.size(); i++) {
  if (elipsasCol.get(i) != null && elipsasCol.get(i).contains(mouse)) {
    // This line                    
    double modulo = Math.sqrt(Math.pow(mouse.x - elipsasCol.get(i).getCenterX(), 2)
                            + Math.pow(mouse.y - elipsasCol.get(i).getCenterY(), 2));
  }
} 
```

然后`synchronized(elipsasCol){}`在您触摸的其他任何地方添加类似的`elipsasCol`。

或者

```
for (T obj : elipsasCol) {
  if (obj != null && obj.contains(mouse)) {
    // This line                    
    double modulo = Math.sqrt(Math.pow(mouse.x - obj.getCenterX(), 2)
                            + Math.pow(mouse.y - obj.getCenterY(), 2));
  }
} 
```

这很可能会导致引发并发修改错误。此时，您可以将 ArrayList 切换到 CopyOnWriteArrayList 或围绕它进行同步。

# oracle - Oracle Apex 示例项目帮助和代码

> ID：10474614
> 
> 赞同：-1
> 
> 时间：2012-05-06T21:52:08.510
> 
> 标签：oracle, oracle-apex

我是 oracle apex 的新手...谁能告诉我，我可以从哪个站点获得部署在公司中的 oracle apex 示例和专业（运行）项目。从中我们可以学到很多专业知识编写代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:23:12.313

曾经有一堆打包的应用程序，但现在看来你不走运：

[http://www.oracle.com/technetwork/developer-tools/apex/application-express/packaged-apps-090453.html](http://www.oracle.com/technetwork/developer-tools/apex/application-express/packaged-apps-090453.html)

您*可以*在那里找到标准示例应用程序。

问候，
罗布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:09:38.573

[在此处](http://www.oracle.com/technetwork/developer-tools/apex/application-express/apex-com-commercial-apps-094049.html)的 OTN APEX 网站上有商业 APEX 应用程序列表。我不认为他们让你看他们的代码。

# python - 如果 Django-Tastypie 已经存在，如何让它覆盖资源？

> ID：10474615
> 
> 赞同：6
> 
> 时间：2012-05-06T21:52:08.917
> 
> 标签：python, django, tastypie

我正在使用一些简单的 django-tastypie 资源，但存在以下问题：

想象一下，我正在构建一个简单的评级系统。我有一个资源，称它为同时`Rating`具有 a`User`和 a `Comment`。每个用户对每个评论最多有一个评分。

我想制作一个采用 tuple 的通用资源`('user', 'comment')`。然后，每当我使用 new 进行 POST 时`Rating`，我希望它检查`user`and`comment`字段以查看匹配这两个字段的评级是否已经存在。如果是，则覆盖现有资源，否则创建一个新资源（这样任何 API 调用都将始终传递 Django 的[unique_together](https://docs.djangoproject.com/en/dev/ref/models/options/#unique-together)）。

我正在使用`obj_get`作为起点，但很难理解如何正确覆盖它以获得这种行为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T22:44:14.963

在讨论 IRC 之后`#tastypie`：

建议不要更改标准 API 行为，因为这可能很危险，因为客户端不会看到整个 API 的一致行为。

一种解决方案是让 Tastypie 在尝试创建 时返回 4xx 响应`Rating`，在这种情况下，客户端将`PATCH`使用现有评级。

但是，如果*确实*需要提高性能，则只有在客户正式提出要求时才应更改行为。在您的情况下，这意味着向请求添加`replace_existing_rating=True`参数。`POST`

因此，在您的情况下，如果您*确实*决定需要性能提升，您可以：

```
class CommentResource(ModelResource):
    def obj_create(self, bundle, request=None, **kwargs):
        if bundle.data.get("replace_existing_rating", False):
            try:
                bundle.obj = self._meta.object_class._default_manager.get(**conditions)
            except self._meta.object_class.DoesNotExist:
                bundle.obj = self._meta.object_class() 
```

# excel - 如何*自动*在 Excel 中创建单个字母数字值的频率直方图？

> ID：10474619
> 
> 赞同：2
> 
> 时间：2012-05-06T21:52:50.193
> 
> 标签：excel

基本上，我想对本科院校授予的 NSF 奖学金数量（即 C 列）进行直方图计数。我如何从这个数据表中做到这一点？（取自[https://www.fastlane.nsf.gov/grfp/AwardeeList.do?method=sort&page=25](https://www.fastlane.nsf.gov/grfp/AwardeeList.do?method=sort&page=25)）

![在此处输入图像描述](../Images/1ac934f60391e79f88a74fb2f8c15fd8.png)

我想完全自动完成 - 无需手动插入每所大学的名称。简短的 Excel 工作流程很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T08:51:16.083

如果我理解正确，您想插入一个数据透视表+柱形图，其中包含 C 列中的数据作为行和数据（使用计数）...

![在此处输入图像描述](../Images/74083ffe769b2e0421e88e78a3643b0e.png)

# html - 需要获取 HTML5 的视频标题 沙 s

> ID：10474623
> 
> 赞同：0
> 
> 时间：2012-05-06T21:53:47.310
> 
> 标签：html, node.js, audio, video, metadata

我正在尝试从 HTML5 <video> 和 <audio> 获取视频/音频元数据（特别是标题）。我根本找不到任何关于它的东西 - 我是否正确地认为这是不可能通过 DOM 操作/javascript 实现的？

如果是这种情况，我想我会让我的服务器下载媒体文件并查看元数据以确定标题（如果有的话）。在这种情况下，我使用的是 Node.js。我可以使用 Node 中的一个好的库吗？我已经尝试过“fluent-ffmpeg”，但它似乎无法获取我正在使用的大多数视频的数据——也许他们使用的是它不理解的编解码器。

有任何想法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T01:50:49.910

我建议为此使用 ffprobe，更具体地说是[node-ffprobe](https://github.com/ListenerApproved/node-ffprobe)模块。但是，是的，您需要下载文件并通过您的服务器对其进行解析，AFAIK 视频和音频标签还不能保存元数据信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T23:37:17.703

为此，您通常必须获取任何元数据服务器端。我不知道您使用的是什么语言，但[TabLib](http://developer.kde.org/~wheeler/taglib.html)可以很好地与许多语言一起使用。

流媒体的元数据是一个完全独立的问题，完全依赖于托管媒体的服务器。对于 Icecast/SHOUTcast 流（和兼容的），请参阅[Pulling Track Info From an Audio Stream Using PHP](https://stackoverflow.com/questions/4911062/pulling-track-info-from-an-audio-stream-using-php/4914538#4914538)。

# javascript - 地图事件处理程序中未定义 JSON 对象属性

> ID：10474628
> 
> 赞同：0
> 
> 时间：2012-05-06T21:54:29.680
> 
> 标签：javascript, jquery, json, google-maps-api-3

我在这里阅读了一些主题，并且我知道我的属性在函数`globalSettings`中不可用存在范围问题。`google.maps.event.addDomListener`

该`console.log`语句返回`undefined`，但如果我这样做`console.log(globalSettings)`，它会显示对象及其属性。

如何使属性可用，以便我可以使用它们来初始化地图中心和缩放？

```
var globalSettings = jQuery.parseJSON(wpmm_settings);
var ICON = new google.maps.MarkerImage('medicare.png', null, null,
    new google.maps.Point(14, 13));

var SHADOW = new google.maps.MarkerImage('medicare-shadow.png', null, null,
    new google.maps.Point(14, 13));

google.maps.event.addDomListener(window, 'load', function(globalSettings) {
    console.log(globalSettings.map_center_lat);
  var map = new google.maps.Map(document.getElementById('map-canvas'), {
    center: new google.maps.LatLng(globalSettings.map_center_lat, 135),
    zoom: 4,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:11:05.327

`wpmm_settings`是一个字符串：

```
"[{\"default_zoom\":\"8\",\"map_center_lat\":\"51.4992913\",\"map_center_lng\":\"-0.1639785\"}]" 
```

`globalSettings`是解析该字符串的结果：

```
[Object { default_zoom="8", map_center_lat="51.4992913", map_center_lng="-0.1639785"}] 
```

请注意，由于最外面的方括号，它最终成为一个单元素数组。

的值作为`map_center_lat`访问`globalSettings[0].map_center_lat`。

如果您从字符串中取出最外面的方括号，您将得到一个“裸”对象，并且可以按预期访问属性。

### 然后...

`google.maps.event.addDomListener(window, 'load', function(globalSettings) {...`

不传递`globalSettings`给事件处理程序。事件被传递——这是标准行为：*事件*被传递给事件处理程序。这条线的作用是`globalSettings`在该函数内部设置`window.load`事件。因此，您需要将提及的内容替换为`globalSettings`您`evt`可以在函数内部忽略的内容。

您的代码片段中的代码仍然存在问题`...`，但是正确获取对象和事件处理程序将使查找这些更容易。

# php - 在此示例中，如何删除数据库行？

> ID：10474632
> 
> 赞同：0
> 
> 时间：2012-05-06T21:55:49.667
> 
> 标签：php, javascript, jquery, sql, ajax

当用户单击“取消”按钮时，我遇到了问题。当用户单击“取消”按钮时，我希望它通过导航到 cancelimage.php 页面来删除数据库中的一行。但它不会删除已上传但随后取消的文件的数据库行。通过查看下面的代码，为什么它不从数据库中删除该行以及如何对其进行编码以便它删除？

下面是开始上传的 startImageUpload() 函数以及取消按钮功能的特色：

```
 function startImageUpload(imageuploadform){

    ...

                $(".imageCancel").on("click", function(event) {

var image_file_name = $(this).attr('image_file_name');

                jQuery.ajax("cancelimage.php"  + image_file_name)
                    .done(function(data) {

                    $(".imagemsg" + _cancelimagecounter).html(data);
                });

                return stopImageUpload();

            });       
                  return true;
            } 
```

下面是cancelimage，php页面，假设从数据库中删除一行？

```
<?php

$username="xxx";
$password="xxx";
$database="xxx";

mysql_connect('localhost',$username,$password);

mysql_select_db($database) or die( "Unable to select database");

$image_file_name = $_GET["fileImage"]["name"];

    echo "File Upload was Canceled";

        $imagecancelsql = "DELETE FROM Image 
        WHERE ImageFile = 'ImageFiles/". mysql_real_escape_string($image_file_name)."'";

    mysql_query($imagecancelsql);

    mysql_close();

?> 
```

下面是插入数据库行的 php 脚本 (imageupload.php)：

```
<?php

session_start();

$username="xxx";
$password="xxx";
$database="xxx";

mysql_connect('localhost',$username,$password);

mysql_select_db($database) or die( "Unable to select database");

$result = 0;

      move_uploaded_file($_FILES["fileImage"]["tmp_name"],
      "ImageFiles/" . $_FILES["fileImage"]["name"]);
      $result = 1;

        $imagesql = "INSERT INTO Image (ImageFile) 
        VALUES ('ImageFiles/".mysql_real_escape_string($_FILES['fileImage']['name'])."')";

mysql_query($imagesql);

      mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:05:47.380

查看您的代码，我很确定调用 cancelimage.php 时的 $_FILES 变量中没有任何内容

您可以做的是将图像名称作为参数传递给 cancelimage.php 脚本并在查询中使用它。

# android - TimePicker 对话框在创建时间检索，而不是当前时间，如果活动保持打开它不会改变

> ID：10474634
> 
> 赞同：1
> 
> 时间：2012-05-06T21:56:14.093
> 
> 标签：android, timepicker

TimePicker 对话框检索 onCreate 时间，而不是当前时间，如果活动保持打开它不会改变......我希望对话框始终显示当前时间，而不仅仅是活动开始时。我目前在 onCreate 中使用以下内容：

```
 final Calendar onscene = Calendar.getInstance();
    buildingfireonsceneHour = onscene.get(Calendar.HOUR_OF_DAY);
    buildingfireonsceneMinute = onscene.get(Calendar.MINUTE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T23:05:32.000

在您打开对话框之前将当前时间传递给 updateTimer() 函数，例如：

```
 mTimePickerDialog = new TimePickerDialog(this, null, 0, 0, false);

    Button button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            Calendar calendar = Calendar.getInstance();
            mTimePickerDialog.updateTime(calendar.get(Calendar.HOUR_OF_DAY), calendar.get(Calendar.MINUTE));
            mTimePickerDialog.show();
        }
    }); 
```

** 添加 **

我相信您想像这样覆盖 onPrepareDialog() 函数：

```
@Override
protected void onPrepareDialog (int id, Dialog dialog, Bundle args) {
    super.onPrepareDialog(id, dialog, args);
    if(id != DATE_DIALOG_ID) {
        final Calendar c = Calendar.getInstance();
        ((TimePickerDialog) dialog).updateTime(c.get(Calendar.HOUR_OF_DAY), c.get(Calendar.MINUTE));
    }
} 
```

# django - 无法在模板 Django 中显示图像

> ID：10474639
> 
> 赞同：-1
> 
> 时间：2012-05-06T21:57:00.853
> 
> 标签：django, django-admin, django-templates

我在 Django 模板中显示图像时遇到问题（我正在从管理应用程序上传图像）。我阅读了有关的文档和其他帖子，但`upload_to`仍然无法弄清楚。我在我的模板中尝试了这个`<img src="{{ a.image}}"/>`，然后得到了`<img src="{{MEDIA_URL}}{{ a.image}}"/>`同样的结果。这是我的 settings.py 代码：

```
MEDIA_ROOT = '/home/mohamed/code/eclipse workspace/skempi0/media'
MEDIA_URL = '/media/' 
```

最后，我在我的 models.py 中尝试了以下内容，但我失败了：

```
image = models.ImageField(upload_to = "ads/")
image = models.ImageField(upload_to = ".") 
```

当我使用时`image = models.ImageField(upload_to = MEDIA_URL)`出现以下错误

```
SuspiciousOperation at /admin/advertisments/banner/add/
Attempted access to '/media/cut.jpg' denied. 
```

**编辑**

生成的链接如下：

```
<img src="./DSCN6671.JPG"> 
```

**重新编辑**

这是我的看法：

```
def index(request):
spotlightAlbum =  Album.objects.filter(spotlight = True)
spotlightSong = Song.objects.filter(spotlight = True).order_by('numberOfPlays')
homepage = Song.objects.filter(homepage = True).order_by('numberOfPlays')
ads = Banner.objects.all()
copyright = CopyrightPage.objects.get()

try:
    user = User.objects.get(userSlug = "mohamed-turki")
    playlists = UserPlaylist.objects.filter(owner = user.userFacebookId)
    purchase = Purchase.objects.filter(userName = user.userFacebookId)
    user.loginState = 1

    user.save()
except:
    user = None
    playlists = None

context = {'copyright':copyright,  'ads':ads, 'spotlightSong':spotlightSong,'spotlightAlbum': spotlightAlbum, 'homepage':homepage, 'user':user, 'playlists':playlists, 'purchase':purchase }
return render_to_response('index.html',context,context_instance = RequestContext(request)) 
```

谁能告诉我我做错了什么？PS我正在使用Django 1.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:28:13.167

您提供的路径`upload_to`将是`MEDIA_ROOT`您在项目设置文件中设置的相对路径（通常是`settings.py`）。

Your`MEDIA_ROOT`是您上传的媒体将存储在磁盘上的`MEDIA_URL`位置，而 Django 将从该 URL 为它们提供服务。

因此，如果您`MEDIA_ROOT`是`/home/mohamed/code/eclipse workspace/skempi0/media`并且您的模型的图像属性是：

```
image = models.ImageField(upload_to = "ads/") 
```

然后，您上传的图像在磁盘上的最终主页将是`/home/mohamed/code/eclipse workspace/skempi0/media/ads/whatever-you-named-your-file.ext`，它将提供的 URL 是`/media/ads/whatever-you-named-your-file.ext`

将您的上传路径设置为`settings.MEDIA_URL`无效，因为这是媒体提供的位置，而不是允许将其存储在磁盘上的位置。

如果您想在模板中加载上传的图像，只需执行此操作（替换`whatever`为从视图发送到代表该对象的模板的变量名称）：

```
<img src="{{ whatever.image.url }}"/> 
```

模型上的图像属性实际上不是图像，它是代表图像的 Python 类。`ImageField`该类的方法之一是`.url()`构造图像 URL 的路径，同时考虑到您`MEDIA_URL`在项目设置中的设置方式。所以上面的代码片段会生成这样的 HTML：

```
<img src="/media/ads/whatever-you-named-your-file.ext"/> 
```

## RequestContext() 和 settings.TEMPLATE_CONTEXT_PROCESSORS

由于`render_to_response()`您从您的视图返回正在使用`RequestContext()`您需要确保您已`settings.TEMPLATE_CONTEXT_PROCESSORS`正确设置。[查看 1.4 文档](https://docs.djangoproject.com/en/1.4/ref/templates/api/#subclassing-context-requestcontext)以获得进一步说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:47:35.567

首先，我建议将 MEDIA_ROOT 更改为

```
MEDIA_ROOT = os.path.join(PROJECT_ROOT,'media') 
```

这样，您可以确保媒体目录路径就在您的项目根目录下。您的 MEDIA_URL 设置正确，但在上传文件时未使用。MEDIA_ROOT 是。

关于文件上传，在您的模型中将字段设置为

```
image_field = models.ImageField('Image', upload_to='images/some_sub_folder') 
```

**请注意**，我既没有使用前导斜杠，也没有使用尾随正斜杠。以上将`PROJECT_ROOT/media/images/some_sub_folder/`使用原始文件的文件名和扩展名上传图像。或者，您可以使用可调用的来更改文件名`upload_to=filename_convetion`- 更多信息[在这里](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.upload_to)。

在您的模板中，您可以使用

```
<img src="/media/{{ your_model.image_field }}" /> 
```

希望这会有所帮助，干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T06:31:05.990

我知道这个问题很老，但我有同样的问题，这在我的情况下解决了：

# 设置.py

```
import os
BASE_DIR = os.path.dirname(os.path.dirname(__file__))
PROJECT_DIR  = os.path.dirname(__file__)

MEDIA_ROOT = os.path.join(PROJECT_DIR, "media")

MEDIA_URL = '/media/' 
```

# 网址.py

然后，我的 urls.py 缺少这行代码来发现 /media/ 文件夹并显示内容：

```
urlpatterns += staticfiles_urlpatterns()

urlpatterns = patterns('',
    url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT}, name="media_url"),
) + urlpatterns 
```

希望它可以帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T03:34:07.170

`upload_to`需要是*目录*的绝对路径，而不是 web url。所以试试这个：

```
image = models.ImageField(upload_to = settings.MEDIA_ROOT) 
```

在您的模板中，只需使用

```
<img src="{{ a.image.url }}"> 
```

# php - 一个变量的多个比较运算符？

> ID：10474643
> 
> 赞同：2
> 
> 时间：2012-05-06T21:57:31.337
> 
> 标签：php

我需要对变量进行多次检查。我在这里看到了一个“Equals”示例：[w3schools](http://www.w3schools.com/php/php_operators.asp)。但它们是两个不同的变量。现在我有：

```
if ($color == 'blue')
{
//do something
} 
```

但我需要对 $color 进行多次检查。例如，如果它也等于红色或绿色。这是怎么写的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T21:58:36.873

很简单：

```
if ($color == 'blue' || $color == 'red' || $color == 'green') {
    //do something
} 
```

还有其他几个选项。使用`switch`运算符：

```
switch ($color) {
    case 'blue':
    case 'red':
    case 'green':
        //do something
} 
```

或更复杂的使用[`in_array`](http://php.net/manual/en/function.in-array.php)函数：

```
$colors = array('blue', 'red', 'green');
if (in_array($color, $colors)) {
    //do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T21:58:55.453

使用 switch 语句。

```
switch($color)
{
    case "blue":
        // do blue stuff
        break;
    case "yellow":
        // do yellow stuff
        break;
    case "red":
        // do red stuff
        break;
    default:
        // if everything else fails...
} 
```

如果您想对所有颜色执行相同的操作，只需使用`||`(boolean or) 运算符。

```
if ($color == "blue" || $color == "red" || $color == "yellow")
{
     // do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-27T20:27:08.740

你也可以选择`preg_match`这个。这可能是矫枉过正，但我​​敢肯定它非常快！

```
$color = "blue";
$pattern = "/^red|blue|yellow$/";
if ( preg_match($pattern,$color) ) { 
    // Do something nice here!
} 
```

# jquery - 显示 JavaScript 对象数组

> ID：10474644
> 
> 赞同：0
> 
> 时间：2012-05-06T21:57:50.307
> 
> 标签：jquery, html, jquery-mobile

只是我正在尝试做的一个简短的例子：

```
Salamander = {
    Name: getName(),
    SvLength: getSvLength(),
    TotLength: getTotLength()
};

aSal.push(Salamander); 
```

在屏幕上显示可变数量的蝾螈数据的最佳方式是什么？数组中可以有不加选择的数量。

对于这样的东西，HTML 标记甚至会是什么样子？我将如何编写脚本来填充数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:15:15.940

我假设您有一个蝾螈对象的集合，并且您想要查找特定对象的蝾螈对象的索引。

您可以使用 for 循环循环到具有特定属性的项目：

```
function getIndexForName(name) {
    for(var i = 0; i < aSal.length; i++) {
        if(aSal[i].Name == name) {
            return i;
        }
    }
    return -1; // not found
} 
```

要在表格中显示整个数组，您可以循环遍历 for 循环并填充表格 td 单元格，方法是首先克隆页面上的 HTML 模板，然后使用 jQuery 向其中动态添加数据。这种技术的优点是您可以执行此操作而无需在服务器端生成 HTML。

```
<table id="salamanders">
    <tr>
        <th>Index</th>
        <th>Name</th>
        <th>SvLength</th>
        <th>TotLength</th>
    </tr>
    <tr class="item">
         <td></td>
    </tr>
</table>

var tr = $('#salamanders').find("tr:last").clone();
var td = $('#salamanders').find("td").clone();

$('#salamanders').find("td").remove();
$('#salamanders').find("tr:last").remove();

for(var i = 0; i < aSal.length; i++) {
    // clone the tr element from earlier and insert into the table.
    $('#salamanders').append(tr.clone());

    // insert the index
    $('#salamanders').find("tr:last").append(td.clone());
    $('#salamanders').find("td:last").innerHTML = i;

    // insert the name
    $('#salamanders').find("tr:last").append(td.clone());
    $('#salamanders').find("td:last").innerHTML = aSal[i].Name;

    // insert SvLength
    $('#salamanders').find("tr:last").append(td.clone());
    $('#salamanders').find("td:last").innerHTML = aSal[i].SvLength;

    // insert TotLength
    $('#salamanders').find("tr:last").append(td.clone());
    $('#salamanders').find("td:last").innerHTML = aSal[i].TotLength;       
} 
```

这绝对可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T22:16:19.917

如果您不知道元素的数量或其他任何事情，则需要动态创建 HTML。

做这样的事情，你如何做你的标记我们取决于你，但你明白了：

```
var output;

$.each(aSal, function(index, item) {
    output += '<ul class="salamander_wrapper">';
    output += '<li class="name">'+this.Name+'</li>';
    output += '<li class="length">'+this.SvLength+'</li>';
    output += '<li class="tot_length">'+this.TotLength+'</li>';
    output += '</ul>';
});

$(output).appendTo('body'); 
```

[小提琴](http://jsfiddle.net/adeneo/8jZQC/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T22:17:00.733

看看这个小提琴：

*   [http://jsfiddle.net/8EkQ5/](http://jsfiddle.net/8EkQ5/)

有一些更巧妙的方法可以做到这一点，例如，javascript 模板。但这似乎足以满足您的情况。

此处摘录：

```
var tableHtml = "<table border='1'>";
for (var i = 0; i < rando; i++) {
   tableHtml += "<tr><td>"+newArray[i]+"</td></tr>";
}
tableHtml += "</table>";

document.getElementById("tableholder").innerHTML = tableHtml; 
```

# php - Joomla 2.5 比 Joomla 1.5 Querywise 快得多吗

> ID：10474648
> 
> 赞同：1
> 
> 时间：2012-05-06T21:58:05.907
> 
> 标签：php, mysql, joomla

我想知道 Joomla 2.5 是否比 Joomla 1.5 快得多。我不希望从加载页面内容、库或 motools 库等中得到答案。我是从 mysql 查询的角度来询问的……比如对于具有 4-5 百万行的大型 mysql 表的一些连接查询、多查询等?

我正在开发一个工作门户，我已经拥有一个包含 500 万求职者的数据库......并且一些查询需要很长时间才能执行或给出致命错误（已分配内存）。所以我想知道 Joomla 2.5 是否能更好地服务于我的目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:26:29.550

在数据库查询方面，两个版本的 Joomla 大致相同，Joomla 2.5 可能会快一点。您选择的版本完全取决于您。我个人喜欢 Joomla 1.5，但是如果这是您第一次使用 Joomla，那么我会推荐 2.5，因为我相信他们上个月停止支持 1.5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T22:02:29.467

如果您有数百万条记录，这两个版本都是相同的。

让我告诉您为什么 CMS（Joomla 和 Wordpress 等）在您的网站增长并且数据库变得像 500 万条记录一样庞大时会给您服务器超时！

1.  CMS 是旨在让您在需要时扩展您的网站的系统。
2.  这样做，您开发扩展并继续添加内联查询！！！
3.  当您显示 100 万条记录中的记录列表（例如每页 15 条记录）时。CMS 查询该表。
4.  除了#3，CMS 在幕后运行许多其他查询来执行其他内部任务，例如跟踪点击、跟踪用户和儿子。
5.  除了 #4 之外，可能还有其他几个模块和插件将在同一页面上运行，无论您的执行标准如何，并且可能有更多的内联查询（遗憾的是，它们中的大多数运行了很多查询）。

现在假设您有大约 100 个用户。来加载我在上面 1-5 写的同一页面。假设这个场景执行了大约 10 个 mySQL 查询，那么想象一下如果您一次有 100 个用户会执行多少个？

当你有这么大的数据库时——那么你必须实现负载平衡。现在，如果您有权访问其配置，则可以优化您的 MySQL 数据库。您可以考虑增加 sysvars，如 max_connections 等。

**编辑：好吧，“负载平衡”不是升级您的硬件，而是整个系统和工作流程，可帮助您通过最大优化实现目标。既然您在评论中问过，我希望人们知道它是什么，所以包括在我的回答中以使其更清楚。**

由于您遇到服务器超时，并且由于数据库中有数百万条记录，因此您必须考虑以下网站中解释的内容：

[http://en.wikipedia.org/wiki/Load_balancing_%28computing%29](http://en.wikipedia.org/wiki/Load_balancing_%28computing%29)

[http://technet.microsoft.com/en-us/library/bb742455.aspx](http://technet.microsoft.com/en-us/library/bb742455.aspx)

它们可能会帮助您理解我在说什么（可能偏离主题），但您必须认真研究如何分配数据库或网站负载的可能性，以便您可以让他们快速执行查询。

# python - 如何在python中将zip文件作为附件发送？

> ID：10474650
> 
> 赞同：12
> 
> 时间：2012-05-06T21:58:39.193
> 
> 标签：python, email, zip

我浏览了许多教程，以及关于堆栈溢出的其他问题，文档和解释至少是无法解释的代码。我想发送一个我已经压缩的文件，并将其作为附件发送。我尝试复制和粘贴提供的代码，但它不起作用，因此我无法解决问题。

所以我要问的是，是否有人知道谁来解释 smtplib 以及电子邮件和 MIME 库如何协同工作以发送文件，更具体地说，如何使用 zip 文件来完成。任何帮助，将不胜感激。

这是大家参考的代码：

```
import smtplib
import zipfile
import tempfile
from email import encoders
from email.message import Message
from email.mime.base import MIMEBase
from email.mime.multipart import MIMEMultipart    

def send_file_zipped(the_file, recipients, sender='you@you.com'):
    myzip = zipfile.ZipFile('file.zip', 'w')

    # Create the message
    themsg = MIMEMultipart()
    themsg['Subject'] = 'File %s' % the_file
    themsg['To'] = ', '.join(recipients)
    themsg['From'] = sender
    themsg.preamble = 'I am not using a MIME-aware mail reader.\n'
    msg = MIMEBase('application', 'zip')
    msg.set_payload(zf.read())
    encoders.encode_base64(msg)
    msg.add_header('Content-Disposition', 'attachment', 
               filename=the_file + '.zip')
    themsg.attach(msg)
    themsg = themsg.as_string()

    # send the message
    smtp = smtplib.SMTP()
    smtp.connect()
    smtp.sendmail(sender, recipients, themsg)
    smtp.close() 
```

我怀疑问题是这段代码也压缩了一个文件。我不想压缩任何东西，因为我已经有一个要发送的压缩文件。在任何一种情况下，此代码以及 python 库本身的文档记录都很差，因为它们无法提供有关 img 文件和文本文件的任何信息。

更新：我现在遇到的错误。我还使用上面的代码更新了我的文件中的内容

```
Traceback (most recent call last):
File "/Users/Zeroe/Documents/python_hw/cgi-bin/zip_it.py", line 100, in <module>
send_file_zipped('hw5.zip', 'avaldez@oswego.edu')
File "/Users/Zeroe/Documents/python_hw/cgi-bin/zip_it.py", line 32, in send_file_zipped
msg.set_payload(myzip.read())
TypeError: read() takes at least 2 arguments (1 given) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T22:24:28.267

我真的没有看到问题。只需省略创建 zip 文件的部分，而是加载您拥有的 zip 文件。

本质上，这部分在这里

```
msg = MIMEBase('application', 'zip')
msg.set_payload(zf.read())
encoders.encode_base64(msg)
msg.add_header('Content-Disposition', 'attachment', 
               filename=the_file + '.zip')
themsg.attach(msg) 
```

创建附件。这

```
msg.set_payload(zf.read()) 
```

将附件的有效负载设置为您从文件中读取的内容`zf`（可能意味着 zip 文件）。

只需事先打开您的 zip 文件，然后从中读取此行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T22:56:59.023

我同意电子邮件包还没有很好的文档记录。我之前研究过它并编写了一个包装器模块来简化这些类型的任务。例如，以下工作：

```
from pycopia import ezmail

# Get the data
data = open("/usr/lib64/python2.7/test/zipdir.zip").read()

# Make a proper mime message object.
zipattachement = ezmail.MIMEApplication.MIMEApplication(data, "zip",
        filename="zipdir.zip")

# send it.
ezmail.ezmail(["Here is the zip file.", zipattachement],
        To="me@mydomain.com", From="me@mydomain.com", subject="zip send test") 
```

一旦您安装和配置了所有东西，这就是您所需要的。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-09T12:22:50.930

我的答案用于`shutil`压缩包含附件的目录，然后将其添加`.zip`到电子邮件中。

```
# Importing Dependencies
from email.mime.multipart import MIMEMultipart
from email.mime.application import MIMEApplication
from email.mime.text import MIMEText
from email.mime.base import MIMEBase
from email import encoders

import smtplib
import shutil

def Send_Email():

    # Create a multipart message
    msg = MIMEMultipart()
    Body = MIMEText( {Enter Email Body as str here} )
    # Add Headers
    msg['Subject'] = ''
    msg['From'] = ''
    msg['To'] = ''
    msg['CC'] = ''
    msg['BCC'] = ''

    # Add body to email
    msg.attach(Body)

    # Using Shutil to Zip a Directory
    dir_name = {Add Path of the Directory to be Zipped}
    output_filename = {Add Output Zip File Path}
    shutil.make_archive(output_filename, 'zip', dir_name)

    part = MIMEBase("application", "octet-stream")
    part.set_payload(open(output_filename + ".zip", "rb").read())
    encoders.encode_base64(part)
    part.add_header("Content-Disposition", "attachment; filename=\"%s.zip\"" % (output_filename))
    msg.attach(part) 
```

# jquery - 使用 jQuery.slider 和 Ajax 页面刷新绘制空白

> ID：10474652
> 
> 赞同：0
> 
> 时间：2012-05-06T21:58:45.893
> 
> 标签：jquery, ajax

我敢肯定这是一个对大多数人来说很简单的问题。出于某种原因，我在试图弄清楚这一点时大脑一片空白。最糟糕的是，我以前在以前的项目中做过这个。

无论如何，我想做的是以下几点：

我有一个页面，其中包含 1 组单选按钮和 5 个 jQuery 滑块。这些允许用户调整他们的搜索参数（丢失钻石）。

在滑块下方，我希望返回搜索结果。当用户调整滑块时，我计划使用滑块停止事件将表单变量提交给查询，以更新结果。

好的，对于我的生活，我似乎无法弄清楚如何做到这一点，没有整个页面刷新。我试图在 a 内更新结果，但由于某种原因，没有返回任何内容。

如果您想看看我要做什么，这是我的测试站点位置：

[http://www.dawnwood.net/ds/diamonds.php](http://www.dawnwood.net/ds/diamonds.php)

这是一个 jpg 试图解释我正在尝试做的事情：

[http://www.dawnwood.net/ds/example.jpg](http://www.dawnwood.net/ds/example.jpg)

我非常感谢你们可以提供的任何帮助。这已经困扰我好几天了。我已经尝试过从 iFrames 到 Ajax 更新的所有方法。我似乎无法将正确的组合放在一起，因此它会使用更新的结果刷新 div。

再次感谢大家，德里克

PS-现在页面上有一个提交按钮。那只是为了我的测试。我计划在实际工作时不在那里。

PPS-

我尝试的最后一点 ajax 代码如下。它似乎没有做任何事情。

```
$(document).ready(function(){
$.post('db_query.php', $("#epds").serialize(), function(data) {
                $('#search_results').html(data);
            });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:06:17.080

您是否尝试过将您的 post 事件放入 on change 事件中？您需要确定输入的选择器，但无论何时更改任何输入，都应在您的页面上提交表单以更新信息。

```
$(document).ready(function(){
   $(INSERT SELECTOR FOR YOUR SLIDERS).change(function(){
       document.forms["epds"].submit();
   });
}); 
```

# html - 如何将 HTML5 缓存清单与 Google Maps Javascript API V3 结合使用以获得更快的体验

> ID：10474654
> 
> 赞同：3
> 
> 时间：2012-05-06T21:59:01.873
> 
> 标签：html, caching, cordova, maps

我目前正在使用 html5 + phonegap 开发一个移动应用程序，一切运行良好。我遇到的唯一问题是在 phonegap 上滚动地图使本机应用程序变得缓慢而缓慢，缩放地图相当也慢。有没有办法使用 html5 和/或缓存清单文件来提高地图渲染速度/瓷砖加载？

我正在阅读并看到一些关于使用缓存清单来对抗这些怪癖的东西？我还没有找到任何好的文档，所以我想我会在这里问？

非常感谢您对加快地图加载的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T07:57:16.090

尝试将谷歌地图 JavaScript 文件放入缓存清单文件中。假设您的文件来源是

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?v=3.3&libraries=geometry&sensor=true"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script> 
```

将您的 Google 地图 API 的源值放入缓存清单文件中，然后再次检查您的应用程序，它可能会帮助您更快地缩放地图。 ![在此处输入图像描述](../Images/18d43e4da5f637fb1537c13746f09bc0.png)

放置您自己使用的api。

# c# - 来自 AudioPlayerAgent 的 HttpWebRequest

> ID：10474656
> 
> 赞同：0
> 
> 时间：2012-05-06T21:59:42.147
> 
> 标签：c#, silverlight, windows-phone-7, background-audio

我正在创建一个播放无尽音频流的应用程序。我可以查询一个单独的 Web 服务来获取当前播放曲目的标题和艺术家。我想要做的是每 20 秒查询一次该服务，然后相应地设置曲目标题/艺术家。目前我正在使用后台 AudioPlayerAgent，以便可以在我的应用程序之外播放流。这是我到目前为止的代码：

```
public AudioPlayer()
    {
        if (!_classInitialized)
        {
            _classInitialized = true;
            // Subscribe to the managed exception handler
            Deployment.Current.Dispatcher.BeginInvoke(delegate
            {
                Application.Current.UnhandledException += AudioPlayer_UnhandledException;

            });
            trackTimer = new Timer(TrackTimerTick, null, 1000, 5000);
        }
    }

    public void TrackTimerTick(object state) {             
            // Create a HttpWebrequest object to the desired URL.
            HttpWebRequest trackRequest = (HttpWebRequest)HttpWebRequest.Create("<stream url>");
            // Start the asynchronous request.
            IAsyncResult result = (IAsyncResult)trackRequest.BeginGetResponse(new AsyncCallback(TrackCallback), trackRequest);
    }

    public void TrackCallback(IAsyncResult result) {
        if (BackgroundAudioPlayer.Instance.PlayerState == PlayState.Playing && result != null) {
            try {
                // State of request is asynchronous.
                HttpWebRequest trackRequest = (HttpWebRequest)result.AsyncState;
                HttpWebResponse trackResponse = (HttpWebResponse)trackRequest.EndGetResponse(result);
                using (StreamReader httpwebStreamReader = new StreamReader(trackResponse.GetResponseStream())) {
                    string results = httpwebStreamReader.ReadToEnd();
                    StringReader str = new StringReader(results);
                    XDocument trackXml = XDocument.Load(str);

                    string title = (from t in trackXml.Descendants("channel") select t.Element("title").Value).First<string>();
                    string artist = (from t in trackXml.Descendants("channel") select t.Element("artist").Value).First<string>();
                    if (BackgroundAudioPlayer.Instance.Track != null) {
                        AudioTrack track = BackgroundAudioPlayer.Instance.Track;
                        track.BeginEdit();
                        track.Title = title;
                        track.Artist = artist;
                        track.EndEdit();
                    }

                }
                trackResponse.Close();
                NotifyComplete();
            } catch (WebException e) {
                Debug.WriteLine(e);
                Debug.WriteLine(e.Response);
            } catch (Exception e) {
                Debug.WriteLine(e);
            }
        }  
    } 
```

每当我尝试从 HttpWebRequest 读取响应时，都会引发 Web 异常。这是正确的方法吗？有人对我如何解决这个问题有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T23:21:15.797

这与 AudioPlayer 在开始播放音乐后超出范围有关。AudioPlayer 只存在一小部分时间，并在调用后终止`NotifyComplete`

看看我对这个帖子的回复： [AudioPlayerAgent, timer and webservice](https://stackoverflow.com/questions/9702935/audioplayeragent-timer-and-webservice)

更多信息：调用后后台音频线程将“挂起” `NotifyComplete`。返回的方法是用户更改播放时 (OnUserAction) 或歌曲结束时 (OnPlayStateChanged)。如果您要继续玩，请在 OnPlayStateChanged 方法中获取新信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T22:12:56.020

您没有关闭`HttpWebResponse`，这是必需的。此外，`XDocument.Load()`这需要 a的重载，`Stream`因此您根本不需要使用 a `StreamReader`。

编辑：对不起，我忽略了`Close()`最后的电话。但另一条评论仍然适用。

如果它不能解决问题，至少它会让你的代码看起来更干净：

```
public void TrackCallback(IAsyncResult result) {
    if (BackgroundAudioPlayer.Instance.PlayerState == PlayState.Playing && result != null) {
        try {
            // State of request is asynchronous.
            HttpWebRequest trackRequest = (HttpWebRequest)result.AsyncState;
            using (HttpWebResponse trackResponse = (HttpWebResponse)trackRequest.EndGetResponse(result)){
                XDocument trackXml = XDocument.Load(trackResponse.GetResponseStream());

                string title = (from t in trackXml.Descendants("channel") select t.Element("title").Value).First<string>();
                string artist = (from t in trackXml.Descendants("channel") select t.Element("artist").Value).First<string>();
                if (BackgroundAudioPlayer.Instance.Track != null) {
                    AudioTrack track = BackgroundAudioPlayer.Instance.Track;
                    track.BeginEdit();
                    track.Title = title;
                    track.Artist = artist;
                    track.EndEdit();
                }
            }
            }
            NotifyComplete();
        } catch (WebException e) {
            Debug.WriteLine(e);
            Debug.WriteLine(e.Response);
        } catch (Exception e) {
            Debug.WriteLine(e);
        }
    }  
} 
```

# ms-access - Access + VBA：货币变化。区域设置

> ID：10474659
> 
> 赞同：4
> 
> 时间：2012-05-06T22:00:16.547
> 
> 标签：ms-access, vba, regional-settings

Access 使用货币类型的区域/国家/地区设置。

如何更改货币类型中的符号？

```
Dim DBTable as ADOX.Table
Dim DBCatalog as ADOX.Catalog
Dim DBConnection as ADODB.Connection

DBTable.Name = "TableName"
DBTable.Columns.Append "Currency", adCurrency
DBCatalog.Tables.Append DBTable

Dim C as Double
C = 30.42
DBConnection.Execute "INSERT INTO TableName VALUES (" + "'" + Str(C) + "'" + " ) " 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T03:15:58.717

该`Currency`数据类型不存储任何货币符号信息。它只是一种特殊的数字类型，最适合用于准确的货币相关存储。

Access 文档将货币数据类型定义为：

> 货币变量以整数格式存储为 64 位（8 字节）数字，按 10,000 缩放以给出小数点左侧 15 位和右侧 4 位的定点数。此表示提供 -922,337,203,685,477.5808 到 922,337,203,685,477.5807 的范围。Currency 的类型声明字符是 at 符号 (@)。
> 
> Currency 数据类型对于涉及货币的计算和对准确性特别重要的定点计算很有用。

所以并不是因为它被称为`Currency`数据类型，它实际上与任何特定的世界*货币*有任何关系。
您存储在货币字段中的值是什么意思，取决于您。

### 格式化

显示`Currency`数据类型时，Access 将默认显示您当前区域设置的货币符号。当然，只有当您在该字段中存储的是来自您自己国家的钱时，这才有意义。

最好在设计表格时覆盖此行为，以便格式将在您使用该字段的任何地方传播。
例如，突出显示的`CurrencyRate`字段设置为使用*货币*格式，因此它将使用`$`，因为这是我的语言环境的货币符号：

![编辑货币字段格式](../Images/66f30a3297dafd3dcf686b8073ebea62.png)

只需覆盖该格式即可将该字段格式化为其他内容。
例如，作为具有 3 位小数的标准数字或欧元：

![带 3 位小数的标准格式](../Images/78426f7020fa75eef751feb1efffe517.png) ![在此处输入图像描述](../Images/3126b643ba32448aeba8691030e78138.png)

在表单或数据表中显示数据时，您还可以覆盖控件的`Format`属性：

![更改控件的格式属性](../Images/aba65f627d1e8178e5b678e0f87d0654.png)

### 综上所述

因此，货币符号不是数据库中存储什么值的问题，而是该值对您的应用程序意味着什么以及如何向用户显示它的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:35:11.123

您可以使用 api 设置本地计算机设置。

```
Private Declare Function SetLocaleInfo Lib "kernel32" Alias "SetLocaleInfoA" (ByVal Locale As Long, ByVal LCType As Long, ByVal lpLCData As String) As Boolean
Private Declare Function GetUserDefaultLCID Lib "kernel32" () As Long 

Public Sub SetCurrencyFormat(format As String)
    Dim lngIdentifier As Long
    lngIdentifier = GetUserDefaultLCID()
    If SetLocaleInfo(lngIdentifier, LOCALE_SCURRENCY, format) = False Then
        MsgBox "Error occured while trying to change the setting."
    End If
End Sub

Call SetCurrencyFormat("$") 
```

# jquery - jQuery - 多个事件中的 jqGrid 填充方法

> ID：10474660
> 
> 赞同：0
> 
> 时间：2012-05-06T22:00:18.287
> 
> 标签：jquery, jqgrid

这是我必须填充 jqGrid 的代码：

（抱歉..我无法在消息中获取脚本，否则它看起来一团糟）

截图图片的链接：[代码截图](http://i47.tinypic.com/avklxy.jpg)

上面的代码有效（我对其进行了一些编辑，所以它不会太长）。所以当我选择一个下拉列表时，网格会被填充并显示。

我有几个问题希望有人可以帮助我：

1.  jqGrid 在初始加载时不显示。它仅在下拉更改事件发生时出现。有没有办法让一个空白的 jqGrid 显示出来，直到有东西被填充？

2.  我想将 jQuery 代码移动到它调用 Web 服务的位置，以将 jqGrid 填充到它自己的方法中。我想有多种方法来填充网格，所以我想如果我把那个 jqGrid 代码放到它自己的方法中，我每次都可以调用那个方法。到目前为止，我无法让它发挥作用。谢谢参观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:48:27.177

jqGrid只有在change事件发生时才会出现，所以页面加载时需要手动触发change事件。例如：

```
$("#ddlContactFilterStatus").change(); 
```

将`ajax`代码移动到自己的函数中是个好主意。您可以从定义一个`function`包含代码的开始。如果你想要更具体的东西，你可以向我们展示你到目前为止所拥有的东西。

# asp.net-mvc - Return View() 有问题；

> ID：10474661
> 
> 赞同：0
> 
> 时间：2012-05-06T22:00:21.440
> 
> 标签：asp.net-mvc

这是我的行动观点：

```
public ActionResult promo()
{
    var model = (from p in entity.promotion
                 where p.vehicule.Idag == User.Identity.Name
                 select p).ToList();
    return View(model);
} 
```

这是我的 HttpPost 操作：

```
[HttpPost]
public ActionResult promo(string idv, string dd, string df, string remise)
{
    try
    {
        //some code
            ViewData["Resultat"] = "L'ajout de promotion à reussi";
            return View();
        }
        else
        {
            ViewData["Resultat"] = "Une promotion existe deja dans cette periode";
            return View();
        }
    }
    catch (Exception)
    {
        ViewData["Resultat"] = "L'ajout de promotion à echoué Veillez verifiez le Matricule de véhicule ou ressayer plus tard ";
        return View();
    }
} 
```

当我调用我的操作时，我得到了这个错误：

> La référence d'objet n'est pas définie à une instance d'un objet。

在这一行：

> ```
> <% foreach (var item in Model) { %> 
> ```

当我在页面之间导航时，我的页面工作正常，即使在我转到 url 并单击 go 键时出现此错误后它也可以工作。我认为这里缺少一些简单的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:08:06.957

看起来您的视图需要模型。在第一个实例中，你给它一个合适的模型：

```
return View(model); 
```

在第二种情况下，您没有在任何分支上传递模型：

```
return View(); 
```

在幕后，当您遍历 foreach 循环时，会调用 Model.GetEnumerator()，如果 model 为 null，您会看到您看到的 null 引用异常。您需要确保模型不为空，并且您可以轻松地使用`Enumerable.Empty<T>();`

```
return View(System.Linq.Enumerable.Empty<PromotionType>()); 
```

# assembly - 程序会损害您的计算机吗？

> ID：10474664
> 
> 赞同：4
> 
> 时间：2012-05-06T22:00:55.030
> 
> 标签：assembly

> **可能重复：**
> [是否有可能通过软件永久损坏硬件？](https://stackoverflow.com/questions/9286425/is-it-possible-to-permanently-damage-the-hardware-by-software)

浏览单声道资源时，我偶然发现了这条评论：

```
/* don't run the resulting program, it will destroy your computer,
 * just objdump -d it to inspect we generated the correct assembler.
 */ 
```

[https://github.com/mono/mono/blob/master/mono/arch/x86/test.c](https://github.com/mono/mono/blob/master/mono/arch/x86/test.c)

能造成什么危害？

# silverlight - 在 Windows Phone 上使用 F# sprintf "%A" 时出现反射错误

> ID：10474670
> 
> 赞同：5
> 
> 时间：2012-05-06T22:02:02.637
> 
> 标签：silverlight, f#, windows-phone

我有一组这样的 F# 记录类型：

```
type Course =
    { Id : int
      Title : string
      Instructor : string
      Duration : string
      StartDate : string
      IconUrl : string
      Url : string 
      LectureSections : LectureSection list }

and LectureSection =
    { Title : string
      Completed : bool
      Lectures : Lecture list }

and Lecture = 
    { Title : string
      VideoUrl : string } 
```

在某个时候我打电话给

```
sprintf "%A" course 
```

其中 course 是 Course 记录的一个实例

在常规的 .NET 项目中，这可以正常工作，但在 Windows Phone 7.1 / Silverlight 4 F# 项目中（我正在使用 Daniel Mohl 的模板），我收到此错误：

```
Late bound operations cannot be performed on types or methods for which ContainsGenericParameters is true. 
```

问题似乎是列表。有谁知道解决这个问题的任何方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:56:46.033

这些模板应该带有一个自定义构建的 FSharp.Core.dll，它会禁用 Windows Phone 上不可用的功能。你确定你是针对这个 dll 而不是 Windows PC 编译的吗？

Xbox360 和 XNA 也有类似的问题。F# 团队向我发送了一个适用于 Xbox360 的 dll，以及一些关于用于构建 dll 的设置的简要说明。

> 这是我们用来编译 FSharp.Core 的属性组：

```
 <PropertyGroup Condition="'$(TargetFramework)'=='Xbox360\CompactFramework\3.7'">
   <TargetFrameworkVersion>v4.0</TargetFrameworkVersion>
   <TargetFrameworkProfile>Client</TargetFrameworkProfile>
   <XnaFrameworkVersion>v4.0</XnaFrameworkVersion>
   <XnaPlatform>Xbox 360</XnaPlatform>
   <XnaProfile>HiDef</XnaProfile>
   <XnaCrossPlatformGroupID>a8d70e6b-9a75-4aec-80f8-62cf373f7368</XnaCrossPlatformGroupID>
   <XnaOutputType>Game</XnaOutputType>
   <TargetFrameworkVersion>v4.0</TargetFrameworkVersion>
   <DefineConstants>$(DefineConstants);FX_NO_ARRAY_LONG_LENGTH;FX_NO_DEBUG_PROXIES;FX_NO_EXIT;FX_FSLIB_IOBSERVABLE;FX_NO_WEB_CLIENT;FX_NO_WEB_REQUESTS;FX_NO_CHAR_PARSE;FX_NO_DEFAULT_DEPENDENCY_TYPE;FX_SIMPLE_SECURITY_PERMISSIONS;FX_NO_TRUNCATE;FX_NO_CULTURE_INFO_ARGS;FX_NO_REFLECTION_MODULE_HANDLES;FX_NO_OPERATION_CANCELLED;FX_NO_TO_LOWER_INVARIANT;FX_NO_EXIT_CONTEXT_FLAGS;FX_NO_BASED_ARRAYS;FX_NO_DOUBLE_BIT_CONVERTER;FX_NO_BINARY_SERIALIZATION;FX_NO_ASCII_ENCODING;FX_NO_DEFAULT_ENCODING;FX_NO_FILE_OPTIONS;FX_NO_NONBLOCK_IO;FX_NO_COMMAND_LINE_ARGS;FX_NO_ENVIRONMENT;FX_NO_PROCESS_START;FX_NO_APP_DOMAINS;FX_NO_PROCESS_DIAGNOSTICS;FX_FSLIB_STRUCTURAL_EQUALITY;FX_FSLIB_LAZY;FX_FSLIB_TUPLE;FX_NO_REFLECTION_EMIT</DefineConstants>
   <Tailcalls>false</Tailcalls>
   <!-- It would be better to use MSBuild resolution here, but the TargetFrameworkIdentifier etc. aren't set up quite correctly as yet -->
   <OtherFlags>$(OtherFlags) --simpleresolution -r:"C:\Program Files\Microsoft XNA\XNA Game Studio\v4.0\References\Xbox360\mscorlib.dll"</OtherFlags>
 </PropertyGroup> 
```

> 以及我们使用的新 .targets：

```
<Import Project="$(MSBuildExtensionsPath)\Microsoft\XNA Game Studio\Microsoft.Xna.GameStudio.targets" Condition="'$(TargetFramework)'=='Xbox360\CompactFramework\3.7'"/> 
```

他们发给我的 dll 运行良好，我从来不必使用这些说明，但它们可能对想要为新平台构建 FSharp.Core.dll 的人有用。特别注意`DefineConstants`部分。

# ios - 当 2 个或更多视图重叠时，获取动画时触摸的可见 UIButton？

> ID：10474671
> 
> 赞同：0
> 
> 时间：2012-05-06T22:02:10.703
> 
> 标签：ios, uibutton, touch

我正在以编程方式生成几个 UIButton，然后使用块动画为它们设置动画。我可以通过实现[此答案](https://stackoverflow.com/a/8346178/881250)中的代码来确定触摸了哪个按钮（如下所示）。

我现在的问题是图像可以重叠，所以当在给定的触摸位置有超过 1 个视图时，我在 touchesBegan 中的代码会拉出错误的按钮（即，获取我正在触摸的可见按钮下方的图像）。

我想使用 [touch view] 与屏幕上的 UIButtons 进行比较：

```
if (myButton==[touch view]) { ... 
```

但这种比较总是失败。

我的接触开始：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];

    for (UIButton *brain in activeBrains) {
        //Works, but only when buttons do not overlap
        if ([brain.layer.presentationLayer hitTest:touchLocation]) {
            [self brainExplodes:brain];
            break;
        }

        /* Comparison always fails
        if (brain == [touch view]) {
            [self brainExplodes:brain];
            break;
        }
        */
    }
} 
```

所以我的问题是如何确定哪些重叠图像高于其他图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:40:32.983

我在这里的代码中做了一些假设，但基本上你需要获取所有已触摸按钮的列表，然后找到“顶部”的按钮。顶部的那个应该具有子视图数组中按钮的最高索引。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];
    NSMutableArray *brainsTouched = [[NSMutableArray alloc] init];
    for (UIButton *brain in activeBrains) {
        //Works, but only when buttons do not overlap
        if ([brain.layer.presentationLayer hitTest:touchLocation]) {
            [brainsTouched addObject:brain];
        }
    }
    NSUInteger currentIndex;
    NSInteger viewDepth = -1;
    UIButton *brainOnTop;
    for (UIButton *brain in brainsTouched){
        currentIndex = [self.view.subviews indexOfObject:brain];
        if (viewDepth < currentIndex){ 
            brainOnTop = brain;
            viewDepth = currentIndex;
        }
    }
    [self brainExplodes:brainOnTop];
} 
```

另外，我在编辑窗口中输入了这个，所以请原谅拼写错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T00:00:59.373

UIView 类包含一个标记属性，您可以使用该属性标记具有整数值的单个视图对象。您可以使用标签来唯一标识视图层次结构中的视图，并在运行时执行对这些视图的搜索。（基于标签的搜索比自己迭代视图层次结构要快。）标签属性的默认值为 0。

要搜索标记视图，请使用 UIView 的 viewWithTag: 方法。该方法执行接收器及其子视图的深度优先搜索。它不搜索超级视图或视图层次结构的其他部分。因此，从层次结构的根视图调用此方法会搜索层次结构中的所有视图，但从特定子视图调用它只会搜索视图的子集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T16:34:51.613

感谢@Aaron 帮助您找到一个好的解决方案。我确实针对我的情况重构了您的答案，以获得不明显的性能增益（wee），但更重要的是，我认为，如果我将来必须重构，阅读量就会减少。

我想，回想起来很明显，但是 activeBrains 数组当然反映了子视图的顺序（因为每个新大脑都在添加到超级视图之后立即添加到数组中）。因此，通过简单地向后循环阵列，正确的大脑正在爆炸。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];

    for(int i=activeBrains.count-1; i>=0; i--) {
        UIButton *brain = [activeBrains objectAtIndex:i];

        if ([brain.layer.presentationLayer hitTest:touchLocation]) {
            [self explodeBrain:brain];
            break;
        }
    }
} 
```

# javascript - 立即获取第一个子元素

> ID：10474676
> 
> 赞同：61
> 
> 时间：2012-05-06T22:03:12.700
> 
> 标签：javascript, dom

我正在编写一个 Chrome 内容脚本扩展，我需要能够定位一个特定元素，不幸的是，除了它的父元素之外没有唯一标识符。

我需要定位`parentElement`. `console.log(parentElement)`完美地报告两个子元素/节点，但是`undefined`无论我做什么，后续的控制台日志（以 childNodes 为目标的日志）总是返回一个值。

**这是我到目前为止的代码**
^(（我已经排除了实际名称以避免混淆和额外的、不必要的解释）)

```
function injectCode() {

    var parentElement = document.getElementsByClassName("uniqueClassName");

    if (parentElement && parentElement.innerHTML != "") {

        console.log(parentElement);
        console.log(parentElement.firstElementChild);
        console.log(parentElement.firstChild);
        console.log(parentElement.childNodes);
        console.log(parentElement.childNodes[0]);
        console.log(parentElement.childNodes[1]);

    } else {

        setTimeout(injectCode, 250);
    }   
} 
```

如何选择第一个子元素/节点`parentElement`？

![在此处输入图像描述](../Images/63d6104a3270600891a8b7c180d84774.png)

**更新：**
`parentElement.children[0]`也有同样的错误`parentElement.childNodes[0]`。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-05-06T22:04:42.117

这两个都会给你第一个子节点：

```
console.log(parentElement.firstChild); // or
console.log(parentElement.childNodes[0]); 
```

如果您需要作为元素节点的第一个子节点，请使用：

```
console.log(parentElement.children[0]); 
```

**编辑**

啊，我现在看到你的问题了；`parentElement`是一个数组。

如果您知道[getElementsByClassName](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)只会返回一个结果，您似乎会这样做，那么您应该使用`[0]`来解除（是的，我编造了这个词）元素：

```
var parentElement = document.getElementsByClassName("uniqueClassName")[0]; 
```

# c++ - C++ 对象到 XML 的通信

> ID：10474680
> 
> 赞同：6
> 
> 时间：2012-05-06T22:04:42.617
> 
> 标签：c++, xml, serialization, xml-serialization

我正在寻找一种将**C++ 中**的对象转换为 XML 字符串表示形式的简单方法，这样我就可以与服务器进行通信。

例如，假设我有一个对象：

```
class A{
    string data1;
    string data2;
    string dataN;
    list<B> bList;
}

class B{
    string moreData;
} 
```

我想要以下 XML 表示：（假设我创建了一个实例 A，它有两个 B 实例）

```
<A>
    <data1>content</data1>
    <data2>content</data2>
    <dataN>content</dataN>
    <B>
        <moreData>content</moreData>
    </B>    
    <B>
        <moreData>content</moreData>
    </B>
</A> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:56:25.093

您所描述的称为 XML 数据绑定。有许多产品将从 XSD 或 DTD 生成 C++ 代码，请查看[http://www.xmldatabinding.org/](http://www.xmldatabinding.org/)以获取列表，以及[http://www.rpbourret.com/xml/XMLDataBinding .htm](http://www.rpbourret.com/xml/XMLDataBinding.htm)了解更多信息。

还可以查看这个[C++ 的 XML 数据绑定示例](http://www.liquid-technologies.com/XmlDataBinding/Xml-Schema-To-Cpp.aspx)，它显示了示例源模式和生成的代码。

如果您的模式非常基本，并且您有能力将它们调整到生成器，那么可能有一些开源项目可以完成这项工作。如果您要绑定到 XML 标准，那么您很快就会遇到大多数生成器的限制。[Liquid XML](http://www.liquid-technologies.com/xml-data-binding.aspx)生成器几乎可以处理所有 XSD 标准，但您必须为此付费。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T15:41:35.253

C++ 中没有针对此问题的通用解决方案，但是存在许多临时实现。

这个问题有一些值得注意的链接和操作方法：[如何在 C++ 中实现序列化](https://stackoverflow.com/questions/1809670/how-to-implement-serialization-in-c)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T10:17:20.250

所以，没有标准的方法，因为，简单地说，因为没有办法序列化指针和类似的东西。它始终是特定于应用程序的。

但是，您可以创建自己的类并根据需要进行序列化。

至于 xml 解析器，你试过[这个](http://www.applied-mathematics.net/tools/xmlParser.html)吗？它非常简单、高效且易于学习。我基本上已经完成了所有工作。您甚至可以要求获得商业许可。

# jquery - 学习 jQuery 和 getJSON 但遇到问题

> ID：10474681
> 
> 赞同：0
> 
> 时间：2012-05-06T22:04:49.347
> 
> 标签：jquery, json, getjson

我正在尝试学习 jQuery（现在是 getJSON）并且很难。我一遍又一遍地搜索，似乎无法弄清楚为什么这不起作用。

JSON：

```
 {
                    "id" : 1,
                    "type" : "upload",
                    "who" : "chris ",
                    "action" : "uploaded a wallpaper entitled: ",
                    "target" : "Blah blah blah",
                    "time" : "3 hours ago"
            } 
```

这是我的 jQuery 代码

```
$(document).ready(function(){
    $('button').click(function() {
        $.getJSON("/js/activity.json", function(data) {
            $.each(data, function(key, value) {
                console.log(key + " : " + value);
            });
        });
    });
}) 
```

当然 HTML 只是一个简单的

```
<button>Test</button> 
```

为什么这不向控制台输出任何内容？如果我在`.getJSON`它不触发之后立即发出警报，但如果我在它触发之前发出警报

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:46:22.233

您的 activity.json 文件包含注释，删除它们。注释不是 JSON 规范的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T22:16:44.770

你可以尝试几件事。在回调函数（getJSON 调用中的那个）中，只需放置一个 console.log("test"); 看看你是否正在回调。您还可以在 Firebug 的 .Net 面板或 Chrome Inspector 的网络面板中观看 JSON 调用，以确保它正在触发并正确返回您的文件。例如，您的服务器可能不知道如何正确返回 JSON 文件。

如果它工作正常（即路径正确，正在读取文件），那么只需尝试记录数据 - console.log(data) 并确保它显示您的 JSON。然后您可以担心循环遍历键，您不需要该步骤即可查看它是否正常工作。

# jquery - Phonegap Json 请求

> ID：10474686
> 
> 赞同：0
> 
> 时间：2012-05-06T22:05:38.877
> 
> 标签：jquery, iphone, cordova

我目前正在phonegap 中制作一个iPhone 应用程序。

我目前正在使用 json 来请求一些数据库详细信息（服务器端 php）并输出结果。

当我将应用程序直接运行到浏览器中而不是从 iPhone 模拟器中运行时，它可以工作。

我在 php 中添加了允许访问 *，并在 xcode 中将域列入白名单。

任何想法可能是什么问题？

jQuery的片段：

```
 $.getJSON("http://slc0013.pickaweb.co.uk/~bengeor1/fixtures.php", 
    function(data) {
        $.each(data.userdata, function(i,user){
                var tblRow =
                    "<p>"+user.hometeam
                    +user.awayteam+"</p>"

        $(tblRow).appendTo("#fixtures_acc");
    //alert (data.item1+" "+data.item2+" "+data.item3); //further debug
    $('#resultLog').html(tblRow);
        });

}); 
```

PHP：

```
$query = "SELECT * FROM Fixtures";
$result = mysql_query($query);

mysql_close();

echo '{
        "userdata": [';

 for ($count=0; $count <= mysql_numrows($result); $count++) {
      echo '{'; 
      $id = mysql_result($result, $count, "id");
      $name = mysql_result($result, $count, "home_team");
      $awayteam = mysql_result($result, $count, "away_team");
      echo "\"hometeam\" : \"$name\", \"awayteam\" : \"$awayteam\"";
      echo '}'; 
      if(mysql_numrows($result) != $count){echo ',';}
}

 echo ']
        }'; 
```

非常感谢。

# javascript - 无法在 window.resize() 中访问对象的上下文

> ID：10474695
> 
> 赞同：0
> 
> 时间：2012-05-06T22:07:10.277
> 
> 标签：javascript

我可以在其他方法中以这种方式处理上下文，但我不确定 .resize() 有什么不同，或者为什么我无法在上下文中传递。

```
 D4.prototype.resize = function() {
    var that = this;
    that.containerBound = that.getBound(that.containerId);
    // that is referring to the DomWindow and not D4

  };

  $(window).resize(D4.prototype.resize); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:31:29.587

您是否尝试过这样[做](http://jsfiddle.net/QJLTa/4/)：

```
$(window).resize(function() {
    D4.prototype.resize('prototype:');
    myD4.resize('instance:')
}); 
```

# javascript - 如何在不使用 CSS 的情况下在动态添加的 javascript DOM 元素中保留空格？

> ID：10474696
> 
> 赞同：10
> 
> 时间：2012-05-06T22:07:33.963
> 
> 标签：javascript, dom, dynamic, whitespace

当添加带有小空格以进行对齐的文本时，空格会被修剪掉（空格是在 c# 中添加的，所以当它到达前端 Javascript 时，它无法被编辑 -***最好只使用一些 CSS这样做，但它不是一个选项***）。

这是我到目前为止所尝试的：

```
var zlp = document.getElementById("testDiv")
zlp.innerHTML = "hello                hello"
var zzz = document.createTextNode("hello                hello")
zlp.appendChild(zzz)
```

```
<div id="testDiv"></div>
```

两者都产生`hello hello`.

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-06T22:10:38.053

[空白字符通常在 HTML 中折叠（默认情况下）](http://www.w3.org/TR/html401/struct/text.html#h-9.1)。

您可以将其替换为`&nbsp;`实体：

```
var text = text.replace(/\s/g, '&nbsp;'); 
```

`\s`将匹配任何空白字符，例如空格、制表符和换行符。如果只想替换空间，请`/ /g`改用。

其他避免字符串操作的选项：

*   将文本放入[`pre`元素](http://www.w3.org/TR/html401/struct/text.html#h-9.3.4)中。
*   将 CSS 2`white-space`属性设置`pre`为[@Esailija](https://stackoverflow.com/users/995876/esailija)指出的那样。您总是可以动态地将 CSS 属性添加到元素中，而不必在样式表中指定它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T22:11:04.357

空白在 HTML 中折叠。这不是 JS 问题，如果您在 HTML 文档中手动键入，也会发生同样的情况。您需要将空格替换为  

```
zlp.innerHTML = "hello                hello".replace( / /g, "&nbsp;" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T22:11:19.270

采用  

```
zlp.innerHTML = "hello&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hello"; 
```

就像其他人刚刚说的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-17T22:44:03.830

使用 html 标签 'pre'

例子：

```
<pre>
A line
   A line with indent
</pre> 
```

结果：

```
一条线
   带缩进的一行

```

# java - Java：将一个对象扩展到另一个对象

> ID：10474701
> 
> 赞同：2
> 
> 时间：2012-05-06T22:08:25.350
> 
> 标签：java, oop, inheritance

例如我有这个：

```
class A{
    private int mine = 0; //Some field...
    public A(int a){mine+=a; /*Some operation1...*/}
}

class B extends A{
    private int mine = 0; //Some field...
    public B(int a){mine-=a; /*Some operation2...*/}
} 
```

我得到：

```
error: constructor A in class A cannot be applied to given types;
    public B(int a){}
    required: int
    found: no arguments
    reason: actual and formal argument lists differ in length
    1 errors 
```

我不明白错误？告诉我该怎么做？

但是，如果“A”的构造函数没有参数，则代码有效。
但我需要执行 Operation1（又名`mine+=a;`），所以我需要 A 的论点，但后来我失败了。

我封闭在这个魔法圈里。我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T22:13:14.567

每个构造函数的第一条指令总是调用它的超类构造函数。如果你没有明确地这样做，编译器会为你插入这个指令。构造函数

```
 public B(int a) {
     mine-=a; 
     /*Some operation2...*/
 } 
```

因此等价于

```
public B(int a) {
    super(); // invoke the no-arg super constructor
    mine-=a; 
    /*Some operation2...*/
} 
```

由于 A 没有无参数构造函数，因此编译失败。在这种情况下，您必须显式调用超级构造函数之一：

```
public B(int a) {
    super(a);
    mine-=a; 
    /*Some operation2...*/
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-06T22:12:48.647

每个构造函数都必须首先调用超类构造函数。如果您没有通过 显式执行此操作`super()`，编译器将隐式调用超类中的 no-arts 构造函数。但是在您的情况下，超类没有无参数构造函数，此时编译器放弃了。

顺便说一句，在子类中重新声明一个字段通常是一个非常糟糕的主意，因为它会隐藏超类字段，但仍然会有两个字段。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-06T22:12:19.643

我认为您需要从 B 构造函数调用 A 类的构造函数，如下所示： `super(a);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T22:13:39.857

如果 B 扩展了 A，那么 B 的构造函数的第一个操作就是调用 A 的构造函数。

如果 A 中没有显式定义构造函数，则调用标准构造函数。如果您不显式调用 ctor，则会隐式调用它。

但是，如果有一个显式的 ctor，它接受参数，它不会自动调用 - 它应该如何 - 使用哪些参数？你必须自己调用它。

但是您的班级层次结构有些神秘。如果您想在子类中访问我的，请将其设置为受保护或保持默认状态 - 不要将其设为私有。

如果将其设为私有，则新引入的同名属性会隐藏父属性，但这容易出错且令人讨厌。

在大多数情况下，可能通过方法（getter/setter）访问会更好，或者打开可见性。

或者子类中事物的不同名称。

# java - 如何查看mysql-connector-java发送的所有SQL语句？

> ID：10474704
> 
> 赞同：2
> 
> 时间：2012-05-06T22:08:48.600
> 
> 标签：java, mysql, jdbc, slf4j

我正在尝试使用`Slf4JLogger`mysql [-connector-java 5.1.20](http://dev.mysql.com/doc/refman/5.1/en/connector-j.html)，但在日志中看不到任何内容。我添加`logger=Slf4JLogger`到 JDBC URL 并将 SLF4J 配置为 LOG4j 桥。所有其他类的日志消息都是可见的。秘诀是什么？

# javascript - 在自定义下拉菜单中添加图像？

> ID：10474720
> 
> 赞同：0
> 
> 时间：2012-05-06T22:11:53.013
> 
> 标签：javascript, html, css

我在这里做了自己的下拉菜单：http: [//jsfiddle.net/Hunter4854/GJVjT/](http://jsfiddle.net/Hunter4854/GJVjT/)我正在尝试在 PS3 单词的左侧添加图像。我需要在每个`<li>`. 我已经尝试了我所知道的一切，但无法找出问题所在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T22:23:04.693

您在此代码中重建了自定义列表 html：

```
$('#test_select option').each(function(i){
    html.push('<li rel="'+$(this).val() +'">'+$(this).text()+'</li>');
});
$('.custom-select ul').html(html.join('')) 
```

因此，您放置的任何预定义 HTML 都会被它替换。

要修复，请执行以下操作之一：

*   [您允许显示预定义的 HTML](http://jsfiddle.net/GJVjT/3/)
*   [或在代码中创建图像](http://jsfiddle.net/GJVjT/1/)

# php - 保存并关闭按钮 javascript

> ID：10474727
> 
> 赞同：0
> 
> 时间：2012-05-06T22:13:03.810
> 
> 标签：php, javascript, ajax

我正在创建一个表单，用户可以通过从下拉菜单中选择来在 3 种类型的预定义字母和自定义字母之间进行选择。我有一个 javascript 函数，可以在选择“自定义字母”时打开一个弹出窗口，到目前为止一切都很好。我想要的是在弹出窗口上有一个文本区域，用户可以在其中写任何他想要的内容，最后按下一个按钮来保存所写的文本并关闭该弹出窗口....有可能吗？

我正在使用 php 和 javascript，但我认为这里需要一些 ajax .....

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:16:45.760

在弹出窗口中，您将有一个表单，将文本区域的内容提交到您的服务器（这会将其保存到您的数据库）。您可以使用 AJAX 来执行此操作。当 ajax 调用成功返回时，关闭弹窗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T22:16:58.613

只需将文本区域和按钮嵌入到 POST 到处理保存的 PHP 脚本的表单中。

```
<form action="save_stuff.php" method="post" onsubmit="window.close();">
    <textarea name="letter" cols="50" rows="50"></textarea>
    <input type="submit" value="Save & Exit" />
</form> 
```

# objective-c - 替换 CFURLCreateStringByAddingPercentEscapes

> ID：10474728
> 
> 赞同：0
> 
> 时间：2012-05-06T22:13:12.070
> 
> 标签：objective-c

代码 ：

```
#import "EncodeURLString.h"

@implementation EncodeURLString

- (NSString *)urlEncodeValue:(NSString *)str
{
    NSString *result = (NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (CFStringRef)str, NULL, CFSTR("!*'\";$,#[] "), kCFStringEncodingUTF8);
    return [result autorelease];
}

- (NSString *)safeEcapeString:(NSString *)str
{
    NSString *result = [str stringByReplacingOccurrencesOfString:@":" withString:@"\\:"];
    result = [result stringByReplacingOccurrencesOfString:@";" withString:@"\\;"];
    result = [result stringByReplacingOccurrencesOfString:@"," withString:@"\\,"];
    return [result autorelease];
}

@end 
```

此代码导致我的 url 中的 # 标签被转换为 %23 有没有办法让它停止转换哈希标签？我已经尝试从这里删除它 CFSTR("!*'\";$,#[] ") 但它不起作用它仍然可以转换它。任何帮助或提示将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:37:35.600

从`legalURLCharactersToBeEscaped`参数中删除哈希并使用`CFSTR("#")`for `charactersToLeaveUnescaped`。

# jquery - 在页面之间保持对 WCF 的异步 jquery 调用

> ID：10474732
> 
> 赞同：1
> 
> 时间：2012-05-06T22:13:35.530
> 
> 标签：jquery, wcf, asynchronous

我被要求实现一个像 Facebook 那样的通知系统。我创建了一个 WCF 服务并通过 jquery 调用它。我到处看了看，我很惊讶我没有找到任何人问这个（也许我只是完全错过了这一点）：如果客户端在 WCF 服务正在执行它的操作时移动到另一个页面会发生什么？

这个特定的 WCF 服务可能需要几秒钟才能返回结果，因为它查询多个不同的数据源。用户在这个时候移动到一个新页面是很有可能的。问题不仅在于结果不会返回给适当的用户，而且服务将被再次调用。

我正在通过所有方法来持久化调用（不是调用本身，而是它甚至被调用的事实），比如在会话状态中保存一个标志、写一个 cookie、视图状态等，但我认为 WCF /jquery 一定有办法解决这个问题。

请帮我看看我错过了什么。谢谢！

**编辑：**也许我有点不清楚。我正在寻找 WCF 内置的东西，以防我错过了它，或者可能是一些已知模式的国王。我不是在寻找不离开页面的方法！

# iphone - 在 UITableView 中为大量行/部分设置动画效果不佳

> ID：10474739
> 
> 赞同：10
> 
> 时间：2012-05-06T22:14:30.937
> 
> 标签：iphone, ios, uitableview, animation

我们不是在谈论数千行或任何东西，尽管如果有办法让事情扩大到那么高，我会喜欢的。

我有一个包含 27 个部分和 180 行的表格，分布在所有部分中，而我目前陷入的场景是当我将事物动画化为只有 3 个部分和 5 行的模型状态时，并且（更糟）又回来了。

我正在使用 beginUpdates/endUpdates 批处理所有动画。我的应用程序在 iphone4 上很好地锁定了 1-2 秒，同时它弄清楚了事情，然后动画开始了。

我已经尝试过为每行的删除/添加设置动画，将部分保留在周围（在删除的情况下将它们的行数降至 0），并且仅对部分本身的删除/插入进行动画处理（当行数将已降至 0）。我会假设后者会提供更好的性能，但它根本没有改变任何事情。

有什么可以在应用端做的来加快速度吗？现在，如果有超过 20 个动画，我有相当多的代码来摆脱单个动画，而是选择仅重新加载数据。

**编辑**此处显示问题的代码。这段代码的性能略好于等效的单点触控代码（这是我之前使用的），但仍然很糟糕。

```
#import "TableViewController.h"

@interface MyTableViewDataSource : NSObject<UITableViewDataSource> {
    int rows;
};

@end

@implementation MyTableViewDataSource

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (void)setRowCount:(int)r
{
    rows = r;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return rows;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    cell.textLabel.text = [NSString stringWithFormat:@"row %d", indexPath.row];

    return cell;
}

@end

@implementation MyTableViewController {
    UIBarButtonItem *populateButtonItem;
};

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        populateButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Populate" style:UIBarButtonItemStylePlain target:self action:@selector(populateDataSource)];
    }
    return self;
}

- (void)populateDataSource
{
    NSMutableArray* new_rows = [[NSMutableArray alloc] init];
    [((MyTableViewDataSource*)self.tableView.dataSource) setRowCount:200];

    for (int i = 0; i < 200; i ++)
        [new_rows addObject:[NSIndexPath indexPathForRow:i inSection:0]];

    [self.tableView beginUpdates];
    [self.tableView insertRowsAtIndexPaths:new_rows withRowAnimation:UITableViewRowAnimationAutomatic];
    [self.tableView endUpdates];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.tableView.dataSource = [[MyTableViewDataSource alloc] init];
    self.navigationItem.rightBarButtonItem = populateButtonItem;
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T15:25:12.947

仅对可见的行进行动画处理才有意义。不要为您插入的所有行制作动画，而是考虑只为那些可见的行的插入制作动画。

另外，您确定是动画导致了延迟吗？如果您通过`UITableViewRowAnimationNone`动画，您会得到相同的延迟，还是更快？如果它更快，那么再次避免对那些不可见的插入进行动画处理。（您可以使用 找出当前可见的行`-indexPathsForVisibleRows`。）如果它不是更快，那么问题可能根本与动画无关，而是一次插入几百行的开销。像现在这样重新加载整个表格是一种选择；以较小的批次插入行是另一种方法。

最后，在插入时使用 Instruments 分析您的应用程序是一个好主意。您将更好地了解应用程序在该延迟期间正在做什么，这是消除延迟的第一步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:04:52.773

您正在使用`UITableViewRowAnimationAutomatic`（参考：表格视图为您选择了适当的动画样式。（在 iOS 5.0 中引入。）），并且由于某种原因，表格视图选择了一个非常糟糕的样式，在展开它们时会在所有行中淡出。更改 200 的不透明度，`UIViews`同时调整其框架大小并四处移动它们必须很慢。:)

你可以这样做：

```
[self.tableView insertRowsAtIndexPaths:new_rows withRowAnimation:UITableViewRowAnimationNone]; 
```

这将在插入行时将动画减少到 UITableView 的非常基本的动画，在我看来，插入那么多行时绝对足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T05:37:13.500

尝试使用一些硬编码的字符串数组测试相同的功能，然后看到问题消失了。如果问题仍然存在，则意味着问题在于渲染而不是数据。

对于不同类型的动画，已经制作了一些自定义控件，您可以在其中通过一些不错的单行实现获得更快的动画：[这里](https://github.com/applidium/ADLivelyTableView)看看。

# .htaccess - 如何从 URL 中删除 index.php？

> ID：10474740
> 
> 赞同：30
> 
> 时间：2012-05-06T22:14:42.170
> 
> 标签：.htaccess, magento, url-rewriting, e-commerce

我在 Magento 安装中的所有 URL 都需要 index.php，例如：

```
http://example.com/index.php/admin/
http://example.com/index.php/customer/account/login/ 
```

问题是系统默认链接到 URL，例如

```
http://example.com/admin/
http://example.com/customer/account/login/ 
```

反正哪个看起来更漂亮。我认为这是 .htaccess 中的重写问题，但由于过去修补这个问题给了我 500 多分，我想先问问你们。

更改 SEO 设置、刷新配置缓存和重新索引 URL 没有[按照这里的建议](https://stackoverflow.com/questions/8451238/magento-htaccess-removal-of-index-php-from-store-urls)工作。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-03-19T16:23:22.023

这可能很旧，但我不妨把我学到的东西写下来。所以无论如何我都是这样做的。

---------->

在开始之前，请确保已启用 Apache 重写模块，然后按照以下步骤操作。

1) 登录到您的 Magento 管理区域，然后转到**System > Configuration > Web**。

2) 导航到**不安全**和**安全**选项卡。确保**Unsecured** and **Secure** - **Base Url**选项中包含您的域名，并且不要在 URL 末尾留下正斜杠。示例：[http ://www.yourdomain.co.uk/](http://www.yourdomain.co.uk/)

3) 仍在**网页**上时，导航到**Search Engine Optimization**选项卡并在**Use Web Server Rewrites**选项下选择**YES**。

 **4) 再次导航到“**安全**”选项卡（如果还没有的话）并在“**在前端使用安全 URL”**选项上选择**“是**” 。

 **5）现在转到您的 Magento 网站文件夹的根目录，并将此代码用于您的 .htaccess：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

保存 .htaccess 并替换原始文件。**（请确保在弄乱它之前备份您的原始 .htaccess 文件！！！）**

6) 现在转到**System > Cache Management**并选择所有字段并确保**Actions**下拉菜单设置为**Refresh**，然后提交。（这当然会刷新缓存。）

---------->

如果这不起作用，请按照这些额外的步骤操作。

7)再次进入**系统 > 配置 > 网络**。这次查找**当前配置范围**并从下拉菜单中选择您的网站。（这个当然是设置为Default Config）

8) 确保**Unsecure**和**Secure**字段包含与之前的默认配置文件相同的域。

9) 导航到**Search Engines Optimization**选项卡并在**Use Web Server Rewrites**部分下选择**Yes 。**

 **10) 一旦 URL 相同，并且启用了重写，保存该页面，然后返回并确保它们都被选中为默认值，然后在需要时再次保存。

11) 重复步骤 6。

现在你的 index.php 问题应该已经解决了，一切都很好！！！

我希望这个帮助能祝你好运。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-09T07:21:05.747

请按照以下步骤操作，它将对您有所帮助。

第 1 步：转到您的站点根文件夹，您可以在`.htaccess`那里找到该文件。使用文本编辑器打开它并找到该行`#RewriteBase /magento/`。只需将其替换为仅`#RewriteBase /`取出“magento /”即可

第 2 步：然后转到您的管理面板并启用重写（为使用 Web 服务器重写设置为**是）。**您可以在 System->Configuration->Web->Search Engine Optimization 中找到它。

步骤3：然后进入缓存管理页面（系统缓存管理）并刷新您的缓存并刷新以检查站点。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-12T07:21:22.627

您必须在 apache 中启用 mod_rewrite 才能使干净的 url 工作

如果 mod_rewrite 不在 phpinfo 中，则必须通过

```
sudo a2enmod rewrite
sudo apache2ctl -l 
```

您需要替换出现的`AllowOverride none`to `AllowOverride all`（在 /etc/apache2/sites-enabled/000-default 中）

重启阿帕奇

```
sudo service apache2 restart 
```

在 Magento 的管理员中`System > Configuration > Web > search engine Optimization`，将“<code>Use Web Server Rewrites”更改为 Yes

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-06T22:26:12.023

在您的 .htaccess 中如何处理：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-28T12:34:58.023

嗨，我迟到了。只是想指出来自[http://davidtsadler.com/archives/2012/06/03/how-to-install-magento-on-ubuntu/](http://davidtsadler.com/archives/2012/06/03/how-to-install-magento-on-ubuntu/)的说明非常有用.

我安装了带有 Apache、MySql 和 Php 的 Ubuntu 服务器，所以我想我可以跳转到标题**创建将提供 Magento 的目录，**我遇到了与 OP 相同的问题，即我需要 'index.php'所有的 URL（或者我会得到 404 not found）。然后我回到**安装和配置 Apache HTTP 服务器**，重新启动 apache 后它运行良好。

作为参考，我错过了：

```
sudo bash -c "cat >> /etc/apache2/conf.d/servername.conf <<EOF
ServerName localhost
EOF" 
```

... 和

```
sudo a2enmod rewrite
sudo service apache2 restart 
```

希望这可以帮助

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-12-02T14:59:52.567

如果其他解决方案不适合您，请尝试以下操作：

**第 1 步：（**如果您的安装是在 webroot 中）

代替

```
 #RewriteBase /magento/ 
```

和

```
 RewriteBase / 
```

**第2步：**

添加以下行（包括排除管理员，因为后端需要 index.php 内部）

```
RewriteCond %{THE_REQUEST} ^.*/index.php
RewriteRule ^(.*)index.php$ http://www.yourdomain.com/$1 [R=301,L]
RewriteRule ^index.php/(admin|user)($|/) - [L]
RewriteRule ^index.php/(.*) $1 [R=301,QSA,L] 
```

紧接着

```
RewriteRule .* index.php [L] 
```

这对我有用

如果仍然无法正常工作，请仔细检查 Magento 配置：系统->配置->Web->搜索引擎优化。必须启用重写。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-14T14:02:01.860

我尝试了帖子上的所有内容，但没有任何效果。然后我更改了 ErJab 提供的 .htaccess 片段以阅读：

```
RewriteRule ^(.*)$ 'folder_name'/index.php/$1 [L] 
```

上面的行为我修复了它。其中 *folder_name* 是 magento 根文件夹。

希望这可以帮助！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-11T07:38:30.530

主要是如果您使用的是基于 Linux 的系统，例如“Ubuntu”，并且仅建议 localhost 用户而不是服务器。

按照前面答案中提到的所有步骤进行操作。+

检查它的 Apache 配置。（AllowOverride All）如果 AllowOverride 值为 none，则将其更改为 All 并再次重新启动 apache。

```
<Directory /var/www/>
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
</Directory> 
```

让我知道这一步是否对任何人有帮助。因为如果你早点找到它可以节省你的时间。

[![在此处输入图像描述](../Images/6c1bd1571a0d52d24b48439c9049a560.png)](https://i.stack.imgur.com/I3OUp.png)

我正在从本地主机中的 htaccess 文件中添加确切的行。供你参考

110号线左右

```
<IfModule mod_rewrite.c>

############################################
## enable rewrites

Options +FollowSymLinks
RewriteEngine on

############################################
## you can put here your magento root folder
## path relative to web root

#RewriteBase /

RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

图像适用于一些从图像中轻松理解文本的用户：

[![在此处输入图像描述](../Images/ed5cb788577531e9b547b6becd1b761a.png)](https://i.stack.imgur.com/Wb7Qi.png)******

# c++ - 在 for 循环中崩溃

> ID：10474741
> 
> 赞同：1
> 
> 时间：2012-05-06T22:14:44.317
> 
> 标签：c++, loops, for-loop

我正在尝试写入文本文件。当我不使用我的 for 循环时，我可以写得很好，但是当我实现它以将我的所有数组写入文件时，它会崩溃。这是我的代码：

```
void writeFile(void)
{
  char *fileName[30];
  cout << "enter a filename";
  cin >> *fileName;
  ofstream myfile;
  myfile.open (*fileName);
  int p;

  for(p = 0; p <= i; p++)
    {
      myfile << right << setw(4) << setfill('0') << packet[i].getSource() <<  ":";
      myfile << right << setw(4) << setfill('0') << packet[i].getDest() <<  ":";
      myfile << right << setw(4) << setfill('0') << packet[i].getType() <<  ":";
      myfile << right << setw(4) << setfill('0') << packet[i].getPort() <<  endl;
    } 
```

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T22:20:14.097

`fileName`是一个包含 30 个未初始化的 char 指针的数组。`*fileName`与 相同`filename[0]`，它是指向 char 的未初始化指针。除了为它分配一个有效值之外，您不能将此指针用于任何事情。但是，您并没有这样做，而是尝试向其读取数据，这会带来可预见的灾难性后果。

简而言之，您根本不应该在 C++ 中使用任何指针，而应使用 an`std::string`来满足您的情况：

```
std::string fileName;
if (!(std::cin >> fileName)) { /* I/O error, die */ }
// ... 
```

（也许你的意思是制作`fileName`一个包含 30 个字符的数组：`char fileName[30];`。但不要那样做。即使它可能有效，但它非常糟糕。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T22:21:26.123

这里还有另一件事有点狡猾：

```
for(p = 0; p <= i; p++) 
```

你可能想要

```
for(p = 0; p < i; p++) 
```

这样您就不会尝试取消对数组末尾的引用

可能更好写

```
for (int p = 0; p != i; ++p) 
```

这是 Moo 和 Koenig 推荐的形式：[http ://www.drdobbs.com/cpp/184402072](http://www.drdobbs.com/cpp/184402072)

我也不会`char *`从 a 中读取`cin`，`std::string`用于存储您的字符串和输入，如果在 main函数`new`范围之外不需要内存，则不需要内存。`writeFile`字符串也支持动态调整大小，因此您无需将其初始化为任何大小，这是我搜索的第一个示例以帮助您[理解](http://www.java2s.com/Tutorial/Cpp/0300__string/Usecintoreadstring.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T22:25:15.207

你为什么使用“C方式”来存储你的文件名？而且您以错误的方式使用它：char**。声明会更容易：

```
std::string fileName;
while(!std::cin >> fileName);
ofstream myfile(fileName.c_str()); 
```

您还在循环中使用 i 但正在迭代 p，我认为这不是您想要做的......

# php - fgetcsv错误插入数据库

> ID：10474744
> 
> 赞同：0
> 
> 时间：2012-05-06T22:15:33.397
> 
> 标签：php, mysql, fgetcsv

我正在尝试使用以下命令将 .txt 文件（转换为 csv）插入数据库：

而 (($data = fgetcsv($prop, 1000, ",")) !== FALSE) {

当我尝试使用 phpmyadmin 使用文件本身进行操作时，它可以工作，但是文本确实包含“，”所以我认为它可能会尝试将它们作为分隔符读取并将结果抛出。有人可以帮忙吗？

错误是 - 1\. 放置数千个空结果 2\. 未将结果放置在正确的字段中

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:19:25.477

考虑使用`LOAD DATA INFILE`（[链接](http://dev.mysql.com/doc/refman/5.1/de/load-data.html)）

# java - Hibernate 找不到属性的设置器 (org.hibernate.PropertyNotFoundException)

> ID：10474746
> 
> 赞同：1
> 
> 时间：2012-05-06T22:15:50.563
> 
> 标签：java, spring, hibernate

我正在尝试在我的事务类（Spring 注释）中获取 SQL 查询的结果：

```
String query = "SELECT DAT, DROP_RADIO FROM My_TABLE";
SQLQuery q = getCurrentSession().createSQLQuery(query);

q.setResultTransformer(Transformers.aliasToBean(CallDrop.class));
List result = q.list(); 
```

和 CallDrop：

```
public class CallDrop implements java.io.Serializable {

    private int id;
    private Date dat;
    private BigDecimal onRadio;
    public BigDecimal getOnRadio() {
        return onRadio;
    }
    public void setOnRadio(BigDecimal onRadio) {
        this.onRadio = onRadio;
    }
    public Date getDat() {
        return dat;
    }
    public void setDat(Date dat) {
        this.dat = dat;
    }
} 
```

.hbm.xml 是：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="com.company.beans.CallDrop" table="My_TABLE">
        <id name="id" type="int" />

        <property name="dat" type="date">
            <column name="DAT" length="10" />
        </property>
        <property name="onRadio" type="big_decimal">
            <column name="DROP_RADIO" precision="22" scale="0" />
        </property>
</class>
</hibernate-mapping> 
```

我确定我已在会话工厂中将 hbm.xml 添加到 applicationContext 文件中：

```
<bean id="sessionFactoryETL" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource"><ref local="dataSourceETL"/></property>
        <property name="mappingResources">
        <list>
                    <value>com/company/beans/CallDrop.hbm.xml</value>
        </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean> 
```

所以，没有类型，但它不起作用。有没有人知道问题出在哪里？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:06:36.723

您可以使用 addScalar(String columnAlias, Type type) 显式声明本机 SQL 的列别名：

```
getCurrentSession().createSQLQuery("select e.id AS id, e.first_name AS firstName, e.password AS password FROM table")
                .addScalar("id", StandardBasicTypes.INTEGER )
                .addScalar("firstName", StandardBasicTypes.STRING )
                .addScalar("password", StandardBasicTypes.STRING )
                .setResultTransformer(Transformers.aliasToBean(Employee.class))
                .list(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:38:34.200

将查询更改为 `"SELECT DAT as \"dat\", DROP_RADIO as \"onRadio\" FROM My_TABLE"`

# ssl - SSL 语法 - 它看起来如何？

> ID：10474750
> 
> 赞同：1
> 
> 时间：2012-05-06T22:16:15.977
> 
> 标签：ssl, https, packets

我一直在寻找有关 SSL 的时间，但我找不到任何数据包实际外观的示例。例如，在 HTTP 中有类似的命令

```
Accept: text/plain
Cookie: $Version=1; Skin=new; 
```

蚂蚁等等。

没有加密的 SSL 数据包是什么样子的？它们完全一样吗？设置主密钥的语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T22:38:03.510

SSL 通常不适合人类阅读。这是一种二进制和复杂的数据格式。

[但是，您可以使用名为wireshark](http://www.wireshark.org/)的强大工具来查看它的外观。如果您拥有服务器私钥，Wireshark 甚至允许解密 SSL 流量（用于分析和调试您自己服务器的流量）。更多信息[在这里](http://wiki.wireshark.org/SSL)

# linux - rsync 针对 maven nexus repo

> ID：10474758
> 
> 赞同：1
> 
> 时间：2012-05-06T22:17:18.393
> 
> 标签：linux, nexus

是否可以使用命令行从 sonatype nexus repo 添加和提取文件？

我正在考虑存储 rpm 构建环境的源目录（tarball 和所有），并且有人告诉我在本地有一个 nexus 文件存储库可以执行此操作。

但是我以前从未遇到过nexus，所以我不知道如何与之交互。据我所知，它适用于 java 项目，但如果它能够完成这项工作，那么我很高兴。

我有点希望我可以将文件同步到特定的目录中，并且 nexus 将通过其 Web 界面使它们知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T22:56:38.130

检查这个答案：

[可以将二进制文件放在 nexus 存储库中吗？](https://stackoverflow.com/questions/3662465/its-possible-to-put-binary-files-on-nexus-repository/3676013#3676013)

Maven 命令行可用于上传文件，一旦上传，就可以使用标准 HTTP 请求进行检索。

Nexus GUI 还具有基于 Web 的文件上传机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T01:13:04.983

对于 rpm 构建环境，我建议您查看[Nexus Yum Plugin](http://code.google.com/p/nexus-yum-plugin/)。它可以将 Nexus 中的存储库公开为托管 RPM 包的 Yum 存储库。更多文档在网站上。

在与 Nexus 交互方面，它只是基于一组[REST API](https://repository.sonatype.org/nexus-core-documentation-plugin/core/docs/index.html)和 http 请求。所以你可以用任何东西来编写脚本，[包括 bash 等等](http://www.sonatype.com/people/2011/01/downloading-artifacts-from-nexus-with-bash/)。或者您也可以编写自己的插件。

一般来说，Nexus 支持各种工件，具体支持 .net/NuGet、Eclipse 更新站点 (P2)、OSGI、Maven 站点，当然还有 Maven2 和 Maven 1。但正如您所见，它可以通过插件进行扩展。我希望有人编写一个可以将 Nexus 公开为 apt-deb/deb 存储库的插件。

所有这些都记录在[关于 Nexus 的免费书籍](http://sonatype.com/index.php/Support/Books/Repository-Management-with-Nexus)中。

免责声明：我做过[Nexus 相关的培训](http://www.sonatype.com/Services/Training/Nexus-Best-Practices)，并且最近对这本书做了一些更新。

# c# - 使用 LINQ to Entity 更新数据库

> ID：10474765
> 
> 赞同：2
> 
> 时间：2012-05-06T22:18:55.033
> 
> 标签：c#, entity-framework, linq-to-entities

我一直在研究如何使用 LINQ 更新现有记录，但我没有任何运气。这是我创建的方法 - 智能感知不喜欢`db.SubmitChanges()`.

```
public void updateRestaurant(int RestID, int HoursID, string Web, string Desc)
{
    RestaurantsEntities db = new RestaurantsEntities();
    RESTAURANT restDetails = (from RESTAURANT in db.RESTAURANTs
                                    where RESTAURANT.REST_ID == RestID
                                    select RESTAURANT).Single();
    restDetails.HOURS_ID = HoursID;
    restDetails.REST_WEBSITE = Web;
    restDetails.REST_DESC = Desc;

    db.SubmitChanges();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T23:50:28.297

尝试使用`db.SaveChanges();`

```
 public void updateRestaurant(int RestID, int HoursID, string Web, string Desc)
    {
        RestaurantsEntities db = new RestaurantsEntities();
        RESTAURANT restDetails = (from RESTAURANT in db.RESTAURANTs
                                        where RESTAURANT.REST_ID == RestID
                                        select RESTAURANT).Single();
        restDetails.HOURS_ID = HoursID;
        restDetails.REST_WEBSITE = Web;
        restDetails.REST_DESC = Desc;
        db.SaveChanges();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T22:47:34.573

您在链接图中创建对象的实例。

这是不正确的。您需要创建对象上下文的实例，它以 linq 图的文件名开头，以 DataContext 结尾。例如，如果您的链接文件名为 myDb，那么您的上下文名称就是 myDbDataContext。

```
RestaurantsEntities db = new RestaurantsEntities();
RESTAURANT restDetails = db.RESTAURANTs.single(c=>c.REST_ID == RestID);
restDetails.HOURS_ID = HoursID;
restDetails.REST_WEBSITE = Web;
restDetails.REST_DESC = Desc;
db.SubmitChanges(); 
```

这是假设您的上下文中的一个对象称为 RESTAURANT。

您需要使用上下文，以便上下文可以管理您要插入、更新和删除的内容，同时维护关系。您无法创建对象实例，然后将它们应用到您的上下文中。它们必须通过上下文创建。

**回复评论和更新：**
我只是想不直。我已经更新了我的代码，但它没有帮助。我很确定你做的一切都是正确的

[看看这个问题](https://stackoverflow.com/a/1269240/828859) [和这个帖子](http://weblogs.asp.net/scottgu/archive/2007/07/11/linq-to-sql-part-4-updating-our-database.aspx)

**更新**
我认为你的查询给你带来了麻烦。它与您的上下文脱节。试试我上面提供的 linq 代码。

# c - “strlen(s1) - strlen(s2)” 永远不会小于零

> ID：10474769
> 
> 赞同：77
> 
> 时间：2012-05-06T22:19:46.857
> 
> 标签：c, string, debugging, unsigned

我目前正在编写一个需要频繁比较字符串长度的 C 程序，因此我编写了以下辅助函数：

```
int strlonger(char *s1, char *s2) {
    return strlen(s1) - strlen(s2) > 0;
} 
```

我注意到即使`s1`长度小于`s2`. 有人可以解释这种奇怪的行为吗？

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-05-06T22:21:33.317

您遇到的是在处理包含有符号和无符号数量的表达式时在 C 中出现的一些特殊行为。

当执行一个操作数有符号而另一个无符号的操作时，C 将隐式地将有符号参数转换为无符号并假设数字为非负数来执行操作。这种约定通常会导致关系运算符（例如`<`和）出现不直观的行为`>`。

关于您的辅助函数，请注意，由于`strlen`返回类型`size_t`（无符号数量），差异和比较都是使用无符号算术计算的。当`s1`短于`s2`时，差`strlen(s1) - strlen(s2)`应该是负数，而是变成一个大的无符号数，大于`0`。因此，

```
return strlen(s1) - strlen(s2) > 0; 
```

`1`即使`s1`短于也返回`s2`。要修复您的功能，请改用以下代码：

```
return strlen(s1) > strlen(s2); 
```

欢迎来到美妙的 C 世界！:)

* * *

## 其他示例

由于这个问题最近受到了很多关注，我想提供一些（简单的）示例，以确保我能理解这个想法。我将假设我们正在使用使用二进制补码表示的 32 位机器。

在 C 中使用无符号/有符号变量时要理解的重要概念是，*如果在单个表达式中混合了无符号和有符号量，则有符号值将隐式转换为无符号*。

### 示例 #1：

考虑以下表达式：

```
-1 < 0U 
```

由于第二个操作数是无符号的，所以第一个操作数*隐式*转换为无符号，因此表达式等价于比较，

```
4294967295U < 0U 
```

这当然是错误的。这可能不是您所期望的行为。

### 示例 #2：

考虑以下代码，它试图对数组的元素求和`a`，其中元素的数量由参数给出`length`：

```
int sum_array_elements(int a[], unsigned length) {
    int i;
    int result = 0;

    for (i = 0; i <= length-1; i++) 
        result += a[i];

    return result;
} 
```

此函数旨在演示由于从有符号到无符号的隐式转换而导致的错误是多么容易出现。`length`将参数作为无符号传递似乎很自然；毕竟，谁会想要使用负长度？停止标准`i <= length-1`似乎也很直观。但是，当使用`length`等于的参数运行时`0`，这两者的组合会产生意想不到的结果。

由于参数`length`是无符号的，因此`0-1`使用无符号算法执行计算，这相当于模加法。结果是*UMax*。比较`<=`也使用无符号比较来执行，并且由于任何数字都小于或等于*UMax*，因此比较始终成立。因此，代码将尝试访问 array 的无效元素`a`。

可以通过声明`length`为 an`int`或将`for`循环的测试更改为 来修复代码`i < length`。

### 结论：什么时候应该使用无符号？

我不想在这里陈述任何太有争议的东西，但这里有一些我在用 C 编写程序时经常遵守的规则。

*   ***不要*****仅仅因为一个数字是非负的就使用。**很容易犯错误，而且这些错误有时非常微妙（如示例 #2 所示）。

*   ****在执行模运算时使用*****。*****

*****   ***在*****使用位表示集合时使用。**这通常很方便，因为它允许您在没有符号扩展的情况下执行逻辑右移。**** 

 ****当然，在某些情况下，您可能决定违反这些“规则”。但通常情况下，遵循这些建议将使您的代码更易于使用且不易出错。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-06T22:21:44.353

`strlen`返回一个类型`size_t`的 a 。`typedef``unsigned`

所以，

```
(unsigned) 4 - (unsigned) 7 == (unsigned) - 3 
```

所有`unsigned`值都大于或等于`0`。尝试将返回的变量转换`strlen`为`long int`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T00:26:19.593

亚历克斯洛克伍德的[答案](https://stackoverflow.com/a/10474780/25050)是最好的解决方案（紧凑、清晰的语义等）。

`size_t`有时，显式转换为:的有符号形式确实有意义`ptrdiff_t`，例如

```
return ptrdiff_t(strlen(s1)) - ptrdiff_t(strlen(s2)) > 0; 
```

如果这样做，您需要确定该`size_t`值适合 a `ptrdiff_t`（尾数位少一个）。****

# sql-server-2008 - 如何将 STCentroid 的结果输出到 STContains 函数？

> ID：10474770
> 
> 赞同：1
> 
> 时间：2012-05-06T22:20:00.703
> 
> 标签：sql-server-2008, gis, geospatial, esri

我目前正在使用

```
X_Coord =CASE WHEN shape.STDimension() = 2 THEN shape.STCentroid().STX ELSE shape.STEnvelope().STCentroid().STX END, 
Y_Coord =CASE WHEN shape.STDimension() = 2 THEN shape.STCentroid().STY ELSE shape.STEnvelope().STCentroid().STY END, 
```

在多边形几何表中填充 X 和 Y 列。但是，我还想填充一个位置表，例如，多边形的质心出现在哪个地形图边界内。

这个

```
LEFT OUTER JOIN atbi.dbo.TLU_TOPO_BOUNDS  AS b  
ON b.Shape.STContains(a.Shape) = 1 
```

在点几何上工作正常，但在多边形上失败有两个原因：它通常很难确定另一个多边形在“内部”，并且由于原因 #1，原因 #2 是一个致命错误。

那么我怎样才能获得相同的结果，使用多边形质心从另一个多边形几何表中确定插入的多边形质心位于哪个对应的多边形内？

我在这里所做的完整代码：

```
ALTER TRIGGER   [dbo].[GRSM_WETLAND_POLY_GIS_Location_ID]
ON  [dbo].[GRSM_WETLANDS_POLY]
INSTEAD OF INSERT   
AS   
BEGIN   
  SET NOCOUNT ON;  
  INSERT dbo.GRSM_WETLANDs_POLY(
  OBJECTID, MapMethod, HError, MapSource, SourceDate, 
  EditDate, Notes, Meta_MID, X_Coord, Y_Coord, Coord_Units, 
  Coord_System, UTM_Zone, Accuracy_Notes, Unit_Code, Loc_Name, 
  Loc_Notes, Datum, Watershed, StreamName, NHDReachCode, Trail, 
  Road, Elevation, LAT, LON, Year_, County, ST, IsExtant, IsSenstive, 
  LocationDescription, LocationDirections, PlaceName, FCSubtype, 
  Landform, Area_Acres, Area_Hectares, DataFile, DataDictionary, 
  Max_PDOP, Max_HDOP, Corr_Type, Rcvr_Type,  SHAPE, QuadName
  )

  SELECT 
  a.OBJECTID, a.MapMethod, a.HError, a.MapSource, a.SourceDate, 
  a.EditDate, a.Notes, a.Meta_MID, a.X_Coord, a.Y_Coord, a.Coord_Units, 
  a.Coord_System, a.UTM_Zone, a.Accuracy_Notes, a.Unit_Code, a.Loc_Name, 
  a.Loc_Notes, a.Datum, a.Watershed, a.StreamName, a.NHDReachCode, a.Trail, 
  a.Road, a.Elevation, a.LAT, a.LON, a.Year_, a.County, a.ST, a.IsExtant, a.IsSenstive, 
  a.LocationDescription, a.LocationDirections, a.PlaceName, a.FCSubtype, 
  a.Landform, a.Area_Acres, a.Area_Hectares, a.DataFile, a.DataDictionary, 
  a.Max_PDOP, a.Max_HDOP, a.Corr_Type, a.Rcvr_Type, a.SHAPE, a.QuadName
  From
  (  
    SELECT  
OBJECTID, MapMethod, HError, MapSource, SourceDate, 
EditDate, Notes, Meta_MID, 
X_Coord =CASE WHEN shape.STDimension() = 2 THEN shape.STCentroid().STX ELSE shape.STEnvelope().STCentroid().STX END, 
Y_Coord =CASE WHEN shape.STDimension() = 2 THEN shape.STCentroid().STY ELSE shape.STEnvelope().STCentroid().STY END, 
Coord_Units, 
Coord_System, UTM_Zone, Accuracy_Notes, Unit_Code, Loc_Name, 
Loc_Notes, Datum, Watershed, StreamName, NHDReachCode, Trail, 
Road, Elevation, LAT, LON, Year_, County, ST, IsExtant, IsSenstive, 
LocationDescription, LocationDirections, PlaceName, FCSubtype, 
Landform, Area_Acres, Area_Hectares, DataFile, DataDictionary, 
Max_PDOP, Max_HDOP, Corr_Type, Rcvr_Type, SHAPE,QuadName
     FROM inserted  
  ) AS a 
  --Not working:
  ---spatial query, what topo quad is this point in? 
 --LEFT OUTER JOIN atbi.dbo.TLU_TOPO_BOUNDS  AS b  
--ON b.Shape.STContains(a.Shape) = 1 ;
end

GO 
```

如果您必须询问触发器的其余部分，它位于 ESRI SDE 堆栈的顶部，所以当我必须处理强制性 objectid 时，应该是一个简单的触发器会变得复杂，但其他一切都在工作，只需要找出质心 STwithin。谢谢！

# objective-c - 为什么去掉 UIKit.h 的导入后还能引用 UIKit 类？

> ID：10474772
> 
> 赞同：4
> 
> 时间：2012-05-06T22:20:14.317
> 
> 标签：objective-c, cocoa-touch, import, header-files

我一直在观看一段视频，该视频指出`UIAlertView`只有在导入 UIKit.h 时才有效。但是，如果我在头文件中注释掉导入语句：

```
//#import <UIKit/UIKit.h>
@interface ViewController : UIViewController
@end 
```

当我将它添加到实现文件时，警报仍然有效：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title" message:@"Message" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
[alert show];
} 
```

请解释为什么这有效？UIKit 的真正作用是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T22:22:26.990

这是因为它可能已经在您的`Prefix.pch`文件中声明，默认情况下看起来像这样：

```
#ifdef __OBJC__
    #import <Foundation/Foundation.h>
    #import <UIKit/UIKit.h>
#endif 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T22:23:23.210

`UIKit.h`只是定义类等的文件。

没有它，编译器将不知道是什么`UIAlertView`。

但是，在您的情况下，它可能仍然有效，因为`#import <UIKit/UIKit.h>`通常包含在项目的前缀文件中，默认情况下包含在您的源文件中。

# apache - .htacces url 重写

> ID：10474773
> 
> 赞同：0
> 
> 时间：2012-05-06T22:20:36.710
> 
> 标签：apache, .htaccess, mod-rewrite

我的用户目录下有一个 php/apache 网站，比如说`http://localhost/~johnny5/`

我有一个`/en`包含`.htaccess`文件和文件的`index.php`文件夹：

```
/home/johnny5/public_html
                         /somefile.php
                         /someotherfile.php
                         /en/
                            .htacces
                            index.php 
```

我启用了 url 重写，`/en`因此所有请求都由 index.php 处理。这是 .htacces 的内容：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /~johnny5/en
RewriteRule . index.php 
```

## 到这里为止，一切正常。

当我点击 时，`http://localhost/~johnny5/en/foo/bar`请求由 处理`/en/index.php`。

现在，出于测试目的，我将网站移到下面，`/var/www`这样我就可以直接通过`http://localhost/`. 我调整`.htaccess`文件以删除用户文件夹：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /en
RewriteRule . index.php 
```

我现在有这个结构：

```
/var/www
        /somefile.php
        /someotherfile.php
        /en/
            .htacces
            index.php 
```

现在，如果我点击`http://localhost/en/foo/bar`，我希望请求由 处理`/en/index.php`，但我得到的只是 404 not found for `/en/foo/bar`。

## 看起来重写模块在我的用户目录下工作，但不在“主”目录下。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:34:46.790

不确定服务器上的新结构，但请记住一个非常重要的规则：.htaccess 规则仅适用于 CURRENT 和 CHILD（递归）目录，不适用于高于 .htaccess 目录的目录。

因此，如果您的 .htaccess 现在位于：

```
/home/johnny5/public_html/en/.htaccess 
```

它不能与路径一起使用

```
http://localhost/en/foo/bar 
```

如果服务器上的[http://localhost/](http://localhost/)根目录是 home/

尝试将您的 htaccess 移动到 www 服务器的根目录，然后重试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T22:54:18.000

这就是我的所有错误 - 配置错误。

我在错误的文件夹下“AllowedOverride”。

# python - 无法获得二维数组/列表中元素的正确索引

> ID：10474774
> 
> 赞同：-1
> 
> 时间：2012-05-06T22:20:58.090
> 
> 标签：python, python-3.x

我目前正在尝试编写一个程序，该程序是一个零重力的四连棋游戏，这意味着您可以从棋盘的任何一侧放置棋子，我目前正在选择一列并从顶部放置棋子。我的程序还询问用户他们想在棋盘上放置多少块，使游戏更难。例如，当我键入 C8 时，它会通过列表中的第 8 行查看每个列表中的第 8 个元素。有什么想法吗？

我编辑的代码如下：

```
#this imports random for my blocks 
import random

#this makes my board
table = [[ "   ","C1", "C2", "C3", "C4", "C5", "C6", "C7", "C8", "C9", "C10"],
         [ " R1|", " |", " |", " |", " |", " |", " |", " |", " |", " |", " |"],
         [ " R2|", " |", " |", " |", " |", " |", " |", " |", " |", " |", " |"],
         [ " R3|", " |", " |", " |", " |", " |", " |", " |", " |", " |", " |"],
         [ " R4|", " |", " |", " |", " |", " |", " |", " |", " |", " |", " |"],
         [ " R5|", " |", " |", " |", " |", " |", " |", " |", " |", " |", " |"],
         [ " R6|", " |", " |", " |", " |", " |", " |", " |", " |", " |", " |"],
         [ " R7|", " |", " |", " |", " |", " |", " |", " |", " |", " |", " |"],
         [ " R8|", " |", " |", " |", " |", " |", " |", " |", " |", " |", " |"],
         [ " R9|", " |", " |", " |", " |", " |", " |", " |", " |", " |", " |"],
       [ "R10|" ," |", " |", " |", " |", " |", " |", " |", " |", " |", " |"]]
#my two different player pieces
player1="#|"
player2="@|"
block="B|"
row=11
columns=11
#this is a function i can call to print the table
def printTable(table):
    for row in table:
        for value in row:
            print (value,end=' ')
        print ('\n')

#this ask the user how many blocks they want on their board then places it on there
def block(table):
    blockQuestion=(input("how many blocks would you like to put on the table? \n (please enter a number between 1 and 25)"))
    number=blockQuestion[:2]
    number=int(number)
    number=number-1
    print("this is number ",number)
    count = 0      
    number=int(number)
    while number >= count:
        x=random.randint(1,10)
        y=random.randint(1,10)
        print("x and y ", x,y)

        table[x][y]="B|"
        count +=1

    printTable(table)
    move()

#this is my function to ask the user for their move.
def move():
    move=input("Please choose where you would like to drop your marker \n (For instance C1, R5)")
    move.split()
    rorc=move[0:1]
    ans=move[1:3]
    answer=int(ans)

    print(rorc," ",answer)

    if "R" in move:
        row(answer)

    if "C" in move:
        col(answer)
#this is my function if the user wants to go by row
def row(answer):
    side=input("would you like to insert it from the right or left \n Please type R for right or L for left ")

    if "R" in side:

        try:
            table[answer].reverse()

            blockCheck=table[answer].index("B|")
            if blockCheck == 0:
                print ("you can not place a peice there because of the block")
                tryAgain()                   
        except:
            try:
                p1Check=table[answer].index("#|")
                if p1Check is 0:
                    print ("you can not place a peice there due to the opponents marker")
                    tryAgain()
            except:
                try:
                    p2Check=table[answer].index("@|")
                    if p2check is 0:
                        print ("you can not place a peice there due to the opponents marker")
                        tryAgain()
                except:
                    print('hi')
    try:
        tits=max(blockCheck,p1Check,p2Check)
        print("All three checks",tits)

    except:
        try:
            tits=max(blockCheck,p1Check)
            print("this is bc and p1c",tits)
        except:
            tits=(blockCheck)
            print("this is block check",tits)
    table[answer].reverse()
    table[answer][-tits]= (player1)
    printTable(table)
#this is my function if the user wants to go by columns
def col(answer):
    side=input("would you like to insert it from the top or bottom \nPlease type T for top or B for bottom")
    answer=int(answer)
    if "T" in side:
        try:   
            blockCheck=table[:][answer].index("B|")

            print("blockCheck ", blockCheck)
            if blockCheck == 1:
                print ("you can not place a peice there because of the block")
                tryAgain()
        except:
            try:
                p1Check=table[answer].index("#|")
                if p1Check is 1:
                    print ("you can not place a peice there due to the opponents marker")
                    tryAgain()
            except:
                try:
                    p2Check=table[answer].index("@|")
                    if p2check is 1:
                        print ("you can not place a peice there due to the opponents marker")
                        tryAgain()
                except:
                    print("whaa")       
        try:
            tits=min(blockCheck,p1Check,p2Check)
            print("All three checks",tits)

        except:
            try:
                tits=min(blockCheck,p1Check)
                print("this is bc and p1c",tits)
            except:
                try:
                    tits=(blockCheck)
                    print("this is block check",tits)
                except:
                    tits=11
        table[tits-1][answer]= (player2)
        printTable(table)
#function to restart the program to the move function
def tryagain():
    tryAgain=input('try again \nPlease type y or n ')
    if tryAgain == 'y':
        move()
    elif tryAgain =='n':
        bash

#calls the function to start the program 
block(table) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T00:01:30.567

正如您无疑已经注意到的那样，调试`if`您在此处拥有的那种长链语句非常困难。事实上，大多数编写良好的程序很少包含只要你的`move`函数的任何东西。Linus Torvalds 在他的*linux 内核*[风格指南](https://computing.llnl.gov/linux/slurm/coding_style.pdf)中说：

 *> 函数应该短小精悍，只做一件事。它们应该适合一两屏文本（众所周知，ISO/ANSI 屏幕尺寸为 80×24），并且做好一件事。

换句话说，即使（尤其是！）当你在编写像现代操作系统内核这样极其复杂的东西时，你的函数也不应该占用超过 48 行代码——他说的是那里的*c*代码，也就是比 Python 更冗长。您在这里非常严重地违反了该规则；您的`move`函数超过 100 行！

所以我的答案不是真正的答案，而是一个元答案。将该`move`功能分解为几个较小的功能。对于您需要的每种输入，编写一个单独的函数来接受输入，确保它是正确的，并将其转换为您的程序可以使用的值。尽可能多地将上述`if`逻辑转移到这些函数中。然后让你的`move`函数调用这些函数，并应用任何必要的顶级逻辑。我看到*至少三个*，可能*五*六个不同的功能在一个巨大的功能中融合在一起*。*

一旦你把它分开，用 print 语句单独测试每个函数，以确保它们在做你期望的事情。一旦你这样做了，并且你确定它们的行为符合预期，你就会知道你的问题被隔离在顶层`move`函数中；从那里开始，调试应该不难——无论是对我们还是对你！

* * *

您的编辑使事情变得更好。但我很清楚，你对函数应该如何运作没有直观的感觉。考虑一下您是如何重构上述代码的。你写了一个函数。然后在该函数结束时，调用另一个函数。然后在该函数结束时调用另一个函数。你一遍又一遍地链接函数。如果我在上面绘制了您的代码的调用图，它看起来像这样：

```
block
 |
 -> move
     |
     -> row | col
         |
         -> ...keep on calling new functions... 
```

这不是它应该如何工作的。相反，您应该有一个主函数来调用其他函数并获取它们返回的值。考虑这个简单的例子：

```
def get_val():
    x = None
    while x is None:
        x = raw_input('Give me a value: ')
        try:
            x = int(x)
        except ValueError:
            print('Value must be an integer')
            x = None
    return x

def transform_val(x):
    return x * 2

def main():
    val = get_val()
    val = transform_val(val)
    print(val) 
```

你看到上面的两个函数没有调用其他函数。他们只是做一些事情然后返回。调用图如下所示：

```
main
 |
 -> get_val
  <- |
 |
 -> transform_val
  <- |
 | 
```

您会看到，在这种情况下，`main`它位于程序的“顶层”，它控制着一切。重组你的代码看起来像这样。您应该有一个 main 函数来调用对您的表进行操作的其他函数。由于`table`是可变的，这些大多不需要`return`任何东西，但它们绝对不应该以另一个函数调用结束。将其移至`main`函数中：

```
def main():
    # define some variables here
    block(table)
    while no_winner(table):
        move(table) 
```

在这里`no_winner`查看桌子，看看是否有人赢了，或者是否没有更多的动作；它*会做* `return`一些事情——对还是错，取决于是否有可能进行另一次移动。`move`从用户那里获取输入并根据它转换表格。现在循环包含您需要的所有顶级逻辑。然后在程序的底部，执行此操作以启动您的主程序。（这只是`main`在 Python 中调用的标准方法；现在不用担心是什么`__name__`意思：

```
if __name__ == '__main__':
    main() 
```

我知道我仍然没有回答你的实际问题；但我认为这些东西实际上比你正在寻找的特定错误更重要。不过，我现在就开始尝试找到它。*

# c++ - 使用调试器与构建和运行 C++ 时输出不同

> ID：10474777
> 
> 赞同：2
> 
> 时间：2012-05-06T22:21:23.613
> 
> 标签：c++, arrays, debugging, random

我正在尝试制作一个基于基本网格的地牢爬虫。当我构建&运行并且程序打印出 board[7][10] 字符数组时，板上只有一个空格有一个“T”字符。但是，如果我一步一步地使用调试器，它可以完美地工作，并且可以像我想要的那样在板上放置 3 个“T”字符。我不知道如何解决这个问题，甚至不知道是什么原因造成的。我没有从编译器中得到任何错误，只是奇怪的输出：

主文件

```
#include <iostream>
#include "DungeonBoard.h"
#include "Tokens.h"

int main()
{
    DungeonBoard dungeonCrawl; // create DungeonBoard object
    dungeonCrawl.start(); // call start function
} 
```

地牢板.h

```
#ifndef DUNGEONBOARD_H
#define DUNGEONBOARD_H

class DungeonBoard
{
    public:
        DungeonBoard(){} // default constructor
        void start(); //gameplay
        void printBoard(); // print out the gameboard
    private:

};

#endif // DUNGEONBOARD_H 
```

地牢板.cpp

```
#include <iostream>
#include "DungeonBoard.h"
#include "Tokens.h"

const int ROW = 7;
const int COLUMN = 10;
char board[ROW][COLUMN]= {{'.', '.', '.', '.', '.', '.', '.', '.', '.', '.'}, {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.'},
{'.', '.', '.', '.', '.', '.', '.', '.', '.', '.'}, {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.'},
{'.', '.', '.', '.', '.', '.', '.', '.', '.', '.'}, {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.'}, {'.', '.', '.', '.', '.', '.', '.', '.', '.', '.'}};
bool occupied[ROW][COLUMN] = {{false, false, false, false, false, false, false, false, false, false},
{false, false, false, false, false, false, false, false, false, false}, {false, false, false, false, false, false, false, false, false, false},
{false, false, false, false, false, false, false, false, false, false}, {false, false, false, false, false, false, false, false, false, false},
{false, false, false, false, false, false, false, false, false, false}, {false, false, false, false, false, false, false, false, false, false}};

Tokens hero(0, 0); //creates user starting location at top left corner
Tokens treasure(6, 9); // creates treasure location at bottom left corner
Tokens trap1, trap2, trap3;

void DungeonBoard::start(){
    char userDirection; // user input
    bool gameOn = true; // sentinel value for while loop

    std::cout << "DUNGEON CRAWL 1.0\n";
    std::cout << "------------------\n\n";
    std::cout << "H is the hero, T are traps, X is the treasure and .'s are open spaces.\n";
    std::cout << "The goal is to move around the gameboard and reach the treasure while avoiding \ndtraps.\n\n";
    std::cout << "CONTROLS: W - UP, S - DOWN, A - LEFT, D - RIGHT.\n\n";
    std::cout << "Enjoy! :)\n\n";

    board[hero.get_row()][hero.get_col()] = 'H'; // set user starting position
    occupied[hero.get_row()][hero.get_col()] = true; // make space used
    board[treasure.get_row()][treasure.get_col()] = 'X'; // set treasure position
    occupied[treasure.get_row()][treasure.get_col()] = true; // make space used

    trap1.trap_loc(); // randomize location of trap 1
    while(occupied[trap1.get_row()][trap1.get_col()] == true){ //check to make sure space is not occupied
        trap1.trap_loc(); //if occupied, re-randomize
    }
    trap2.trap_loc(); //randomize location of trap 2
    while(occupied[trap2.get_row()][trap2.get_col()] == true){ //occupy check
        trap2.trap_loc(); // re-randomize
    }
    trap3.trap_loc(); //randomize location of trap 3
    while(occupied[trap3.get_row()][trap3.get_col()] == true){ //occupy check
        trap3.trap_loc(); //re-randomize
    }

    //set board spaces for traps to T and mark that space as used

    board[trap1.get_row()][trap1.get_col()] = 'T';
    occupied[trap1.get_row()][trap1.get_col()] = true;
    board[trap2.get_row()][trap2.get_col()] = 'T';
    occupied[trap2.get_row()][trap2.get_col()] = true;
    board[trap3.get_row()][trap3.get_col()] = 'T';
    occupied[trap3.get_row()][trap3.get_col()] = true;

    printBoard();
}

void DungeonBoard::printBoard(){
    for(int i = 0; i<7; i++){
        for(int r = 0; r<10; r++){
            if(r == 0)
                std::cout << "  ";
            std::cout << board[i][r] << " ";
        }
        std::cout << "\n\n";
    }
} 
```

令牌.h

```
#ifndef TOKENS_H
#define TOKENS_H

class Tokens
{
    public:
        Tokens(){} //default constructor
        Tokens(int row, int col); //constructor with coordinates already known
        void set_pos(int new_row, int new_col){ rowLoc = new_row; colLoc = new_col;} // set new row and col values
        int get_row(){return rowLoc;} //row getter
        int get_col(){return colLoc;} //col getter
        void trap_loc(); // randomize trap location
        int rand0toN1(int n); //psuedo random number generator
    private:
        int rowLoc, colLoc; //tokens location by row and column
};

#endif // TOKENS_H 
```

令牌.cpp

```
#include <ctime>
#include <cstdlib>
#include "Tokens.h"
#include "DungeonBoard.h"

Tokens::Tokens(int row, int col){ //sets the position of the token
    set_pos(row, col);
}

void Tokens::trap_loc(){ //gets random row and col for trap
    int trapRow = rand0toN1(6);
    int trapCol = rand0toN1(9);
    set_pos(trapRow, trapCol); // sets position of trap token to the random numbers created
}

int Tokens::rand0toN1(int n){ //psuedo-random num generator
    srand(time(NULL)); // set seed for randomization
    return rand()%n;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T22:49:29.510

`srand`问题是当您在内部使用相同的种子时，您会不断地重新初始化`Tokens::rand0toN1`。这是因为`time(NULL)`具有秒分辨率。

通过单步执行代码，您会导致`srand`使用不同的值进行初始化，从而获得预期的结果。

`srand`不需要在*每次*使用之前调用`rand`它，只需要初始化它，所以如果你移动`srand(time(NULL));`到像开始这样的地方`DungeonBoard::start()`（基本上确保它在第一次使用之前被调用一次`rand`），你的程序应该按预期工作。

# google-app-engine - 如何在 Google App Engine 1.6.5 中运行 JSF 2.0

> ID：10474779
> 
> 赞同：3
> 
> 时间：2012-05-06T22:21:33.040
> 
> 标签：google-app-engine, jsf, web-deployment

好的，我刚刚完成了我的第一个 JSF 项目，我想将它上传到 GAE。我已经尝试了大约 4 个小时，但无法使其正常工作。

我正在使用 JSF 2.0 和 App Engine 1.6.5。

我已经尝试了几个教程和以下所有组合：

[第一个教程](http://www.mkyong.com/google-app-engine/google-app-engine-jsf-2-example/comment-page-1/#comment-82266)

罐子 - javax.faces-2.1.7-sources.jar el-ri-1.0.jar

设置 - GAE 1.6.5、JDK 1.7

错误：

```
java.lang.NoClassDefFoundError: javax.naming.InitialContext is a restricted class.     Please see the Google  App Engine developer's guide for more details.
at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51) 
```

我认为这是因为我使用了不同的配置，所以我改为使用确切的设置。降级到 GAE 1.6.3.1 并在教程中使用了完全相同的 jar，但没有什么不同。

所以我尝试了第二个教程，其中列出了修复，其中涉及用 jsf-impl-gae.jar 替换 jsf-impl.jar 但这没有帮助。

在我这样做之后，我得到了错误：

```
WARNING: failed com.google.appengine.tools.development.DevAppEngineWebAppContext@1678d71{/,C:\Users\TOSHIBA\Documents\NetBeansProjects\Google AppEngine JSF 2.0 Template\war}: java.lang.VerifyError: Expecting a stackmap frame at branch target 36 in method com.sun.faces.config.WebConfiguration.getServletContextName()Ljava/lang/String; at offset 10
May 07, 2012 5:07:17 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: failed JettyContainerService$ApiProxyHandler@1547ec9: java.lang.VerifyError: Expecting a stackmap frame at branch target 36 in method com.sun.faces.config.WebConfiguration.getServletContextName()Ljava/lang/String; at offset 10
May 07, 2012 5:07:17 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: Error starting handlers
java.lang.VerifyError: Expecting a stackmap frame at branch target 36 in method com.sun.faces.config.WebConfiguration.getServletContextName()Ljava/lang/String; at offset 10
at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:163) 
```

我也试过[这里列出的指南](https://sites.google.com/a/wildstartech.com/adventures-in-java/Java-Platform-Enterprise-Edition/JavaServer-Faces/javaserver-faces-20/configuring-javaserver-faces-20-to-run-on-the-google-appengine)

我已经在两个不同的应用程序引擎 SDK 和两个 JDK 上尝试了所有可能的教程组合，我现在拥有 7 个 jar：el-api-2.2.1-b04.jar、el-impl-2.2.1-b05.jar、 el-ri-1.0.jar、javax.faces-2.1.7.jar、javax.faces-2.1.7-sources.jar、jsf-api-2.1.7.jar、jsf-impl-gae.jar。

任何帮助将不胜感激我想我明天会寻找一种不同的方式来上传我的项目，因为我在 JSF 和 Eclipse 方面遇到了麻烦，因此为什么我总是使用 Netbeans 但是 Netbeans 的 GAE 插件不再起作用。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T23:11:09.733

从[教程](http://www.mkyong.com/google-app-engine/google-app-engine-jsf-2-example/comment-page-1/)：

> 3.3 新建WebConfiguration.java。
> 
> JSF 2 正在使用 GAE 不支持的“javax.naming.InitialContext”。
> 
> 要解决这个问题，您需要获取 JSF 源代码的副本，克隆 WebConfiguration.java，注释使用“javax.naming.InitialContext”类的方法，将其放在“src/com/sun/faces/comfig/ WebConfiguration.java“。现在，您新创建的 WebConfiguration.java 类将重载原始 WebConfiguration.java。

根据教程，抛出 ClassDefNotFoundError 的类是一个受限类。您需要访问[GAE-JSF javax.naming.InitialContext is a Restricted Class Source Code](http://www.mkyong.com/google-app-engine/gae-jsf-javax-naming-initialcontext-is-a-restricted-class/)并检索 JSF 源代码的副本并制作 WebConfiguration Class 的副本并重载原始代码。

GAE's Whitelisting can be overrided by renaming packages or, in this case, avoiding them altogether. To clarify, what this step is asking you to do is replace WebConfiguration.java with one you modify where all methods using InitialContext are commented out. This hides that class from Google's whitelist so it doesn't force ClassNotFoundDefErrors.

# data-transfer - 是否需要 GRC 中的 USRP2 块才能使用 USRP2 硬件？

> ID：10474781
> 
> 赞同：0
> 
> 时间：2012-05-06T22:21:41.433
> 
> 标签：data-transfer, gnuradio, transmitfile, usrp

我试图找到 USRP2 块以利用我的 USRP2。在很多例子中，他们存在一个他们使用的 USRP2 源，也许这就是我无法使用两个 USRP2 实际发送和接收信号的原因。我们以与发射器完全相同的频率打开接收器，我们永远无法看到信号。这个问题的根源在于，如果我们做同样的事情但使用 2 个 URSP1，我们可以在接收端看到一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:23:09.577

'USRP2' 块已弃用，不应再使用。GNURadio 现在对所有 USRP 设备使用“UHD”块。将 UHD 块放入您的流程图中，您应该有更多的运气。如果您在示例中看到用于 USRP 的非 UHD 块，则仅表示该示例已过时。

# javascript - 如何在 ember-resource 中创建嵌套的 ResourceCollections - 这是正确的方法吗？

> ID：10474783
> 
> 赞同：1
> 
> 时间：2012-05-06T22:21:50.197
> 
> 标签：javascript, ember.js

我目前正在使用 ember.js、ember-resource 和 couchdb 开发一个应用程序。

在我的数据模型中，我有一些嵌套资源，例如

```
MyApp.Task = Ember.Resource.define({
url: '/tasks',
schema: {
    id:          String,
    _rev:        String,
    title:       String,
    description: String,
    comments: {
        type: Ember.ResourceCollection,
        itemType: 'MyApp.Comment',
        nested: true
    }
});

MyApp.Comment = Ember.Resource.define({
    url: null,
    schema: {
        created: Date,
        start: Number,
        end: Number,
        text: String
    }
}); 
```

只要我最初在数据库中提供了一个“完整”模型，即具有空注释模型的任务，一切都可以正常工作。在这种情况下，我可以向任务添加评论

```
 var newComment = MyApp.Comment.create({ created: created, start: start, end: end, text: text });
    var comments = task.get('comments');
    comments.pushObject(newComment); 
```

但是，我的初始`task`数据没有嵌入的`comments`，所以我必须以`Ember.ResourceCollection`编程方式为嵌套注释创建。

我尝试了不同的方法并试图在 ember-resource 规范中找到一些代码，但我的尝试都没有奏效。

我最新的方法是

```
var comments = this.get('comments');
if (!comments) {
    comments = Ember.ResourceCollection.create({type: MyApp.Comment, content: []});
    this.set('comments', comments);
}
comments.pushObject(newComment); 
```

但这也行不通。

所以我的问题是：如何在其中创建嵌套模型结构`ember-resource`并将其保存到数据库中？

非常感谢任何提示！

* * *

**更新：**

在浏览了源代码后，`ember-resource`我想出了一种解决问题的方法：

```
var comments = this.get('comments');
if (!comments) {
    this.updateWithApiData({comments: []});
    comments = this.get('comments');
}
comments.pushObject(newComment); 
```

该方法`updateWithApiData`似乎是从 REST 资源读取数据时使用的方法。

我仍然想知道这是否是最好/正确的方法......

# c - 为什么 Valgrind 在 realloc() 之后会报告无效的 free()？

> ID：10474788
> 
> 赞同：1
> 
> 时间：2012-05-06T22:22:43.307
> 
> 标签：c, free, valgrind, realloc

当我在以下（示例）代码上运行 valgrind 时，它会报告“Invalid free() / delete / delete[]”和 Invalids 读取。我真的不明白为什么。有人可以解释一下吗？

编辑：感谢您的回复，现在很明显。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h

void vl_dec(char* a) {
  char* str = a;
  while (*(str+1) != '\0') str++;
  while(*str == '0') {
    *str = '9';
    str--;
  }
  (*str)--;

  if (*a == '0') {
    memmove(a, a+1, strlen(a));
    a = (char*)realloc(a, (strlen(a)+1)*sizeof(char));
    if (a == NULL) {
      fprintf(stderr, "Cannot allocate memory\n");
      exit(1);
    }
  }
}

int main(int argc, char* argv[]) {
  char* a = (char*)malloc(6*sizeof(char));
  if (a == NULL) {
    fprintf(stderr, "Cannot allocate memory\n");
    exit(1);
  }
  strcpy(a, "10000");
  vl_dec(a);
  printf("%s\n", a);
  free(a);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T22:26:01.567

在您的 function`main`中，您是按值传递`a`的`vl_dec`，因此它永远不会被更新 - 结果`realloc`仅存储在`vl_dec`返回时丢失的局部变量中。相反，传递它的地址：

```
void vl_dec(char ** a) { *a = realloc(...); }

int main()
{
    char * a = malloc(...);
    vl_dec(&a);
    free(a);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T22:27:16.150

您不能只假设返回的新值`a`与`realloc`旧值相同。您实际上必须在每个使用它的地方更新指针。我怀疑您知道这一点，因为您正确保存了`realloc`inside of的返回值`vl_dec`，但是您忘记了需要返回`a`from的新值`vl_dec`（或通过使用 a`char**`作为参数来更新它 to `vl_dec`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T22:27:52.203

因为您通过`vl_dec`值而不是通过引用传递指针。

如果您的main 函数中`realloc`的指针仍然会看到 main 中声明的原始指针。`vl_dec`在`realloc`该指针无效之后，valgrind 抱怨。

解决此问题的一种简单方法是重写`vl_dec`并让它返回指针。这样你就可以调用：

```
 a = vl_dec(a); 
```

主要是问题解决了。

# node.js - Node.js：全局声明 node_modules，还是根据需要在本地声明？

> ID：10474791
> 
> 赞同：2
> 
> 时间：2012-05-06T22:22:52.137
> 
> 标签：node.js, dependencies, global, local

node_modules 依赖项应该在应用程序代码的开头全局声明，还是在需要它们时在本地声明？我想知道是否有最佳实践。

例如，我`index.js`在需要时使用和 require 脚本引导我的应用程序。`security.js`例如，我的模块可能需要使用`node_hash`. `security.js`现在，我是否应该要求

```
var node_hash = require('node_hash') 
```

还是全球需要它，`index.js`所以它可以用于`security.js`（但也适用于其他所有东西）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T23:08:19.913

在 Node 中，实际上并没有“全局要求”的概念。当您将一个模块引入另一个模块时，所需的模块*仅*在您将其引入的模块中可用。如果您想在其他地方使用该必需模块，则需要再次要求它（或以某种方式将返回的对象传递给您的其他模块）。

因此，正确（唯一，真正）的答案是在需要的地方要求他们。请注意，Node 使用了一个[require 缓存](http://nodejs.org/docs/latest/api/modules.html#modules_caching)，因此 required 模块只真正评估一次，并且对于同一个文件的多个 require 返回相同的对象。

[编辑] 分配给声明的变量而不`var`将其分配给`global`范围（例如，它可以通过`global`在节点中访问）。你很少想这样做；不仅难以确定变量的声明位置，而且还可能导致命名空间问题。

# javascript - 如何访问由 node.js Express 创建的客户端 cookie（带有会话 ID）？

> ID：10474797
> 
> 赞同：10
> 
> 时间：2012-05-06T22:24:01.520
> 
> 标签：javascript, node.js, cookies, express

我以为我了解 Cookies 是如何工作的，但我想不是，因为我坚持以下几点：

我无法使用 document.cookie 显示 cookie，使用 alert(document.cookie) 进行测试；在我的代码中。

我正在玩节点，并在我的服务器上安装了以下代码片段（其他一切正常并使用 Express 提供页面）：

```
var express = require('express')
, util = require('util')
, MemoryStore = express.session.MemoryStore
, app = express.createServer()
, sessionStore = new MemoryStore();

app.configure(function() {
    app.set('views', __dirname + '/views');
    app.set('view engine', 'ejs');
    app.use(express.logger());
    app.use(express.cookieParser());
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.session({ 
            store: sessionStore, 
            secret: 'BBQ12345AHHH',
            key: 'cookie.sid' }));
    app.use(app.router);
    app.use(express.static(__dirname + '/public'));
    }); 
```

在我的服务器上，当我点击 index.ejs 时，我看到一个 cookie 正在发送。Chrome 还会在 index.ejs 的标头中显示正在发送的 cookie。但是，当我在 index.ejs 页面中添加 alert(document.cookie) 时，警报为空白。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T22:36:48.540

Chrome 尊重的默认连接会话 cookie，`httpOnly`即客户端 javascript 无法访问 cookie。

客户端 javascript 不需要读取会话 cookie，除非它是由恶意 XSS 脚本读取的，所以一切都很好。

如果您想覆盖它，请尝试：

```
app.use(express.session({ 
  store: sessionStore, 
  secret: 'BBQ12345AHHH',
  cookie: {httpOnly: false},
  key: 'cookie.sid' }          
)) 
```

来源[http://www.senchalabs.org/connect/session.html#session](http://www.senchalabs.org/connect/session.html#session)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T22:28:50.773

你叫饼干对吗？我在学习时发现此页面很有帮助：

[http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

# arrays - Powershell 将值加在一起

> ID：10474801
> 
> 赞同：9
> 
> 时间：2012-05-06T22:25:11.007
> 
> 标签：arrays, powershell, add, powershell-2.0

这是我的代码：

```
clear-host

function isNumeric ($x) {
try {
    0 + $x | Out-Null
    return $true
} catch {
    return $false
}
}

function output-file ($ave, $high, $low, $date)
{
write-output "Programer: Oday Sawaqed"
write-output "Class: CIS 124"
write-output "PowerShell Assignmnent"
write-output ""
Write-output ""
write-output " Current Date                    Average               Highest                        Lowest"
write-output " $date                $ave                   $high                 $low "
}

$array = @()
$hold
$n = 1

do {
$hold = read-host "number $n"
if (isNumeric $hold -eq $true){
if (999 -ne $hold) {
$array += $hold
$n = $n + 1
}
else
{
clear-host
write-host "Thank you."
write-host "The numbers you entered are:" $array
write-host "Please select a file name to save the output:"
$fileName = Read-host

$date = get-date -format "dddd, MMMM d, yyyy"
$array = $array | Sort-Object 
$ave = 
$high = $array | Select-Object -last 1
$low = $array | Select-Object -first 1

output-file $ave $high $low $date | Out-File c:\$fileName.txt
}
}
else {
write-host "Please enter a numeric value"
}
}
while (999 -ne $hold) 
```

现在代码完美运行，我只是不知道如何将数组中的值相加来计算平均值。有人可以帮助我或给我一个提示！我知道我需要将这些值相加，然后除以 $n，我只是不知道如何添加这些值。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-07T04:50:15.993

要计算平均值，您可以使用`Measure-Object`Cmdlet：

```
($array | Measure-Object -Average).average 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T00:26:43.983

我[发现](http://rosettacode.org/wiki/Sum_and_product_of_an_array#PowerShell)添加的一种方法是这样的：

```
 $sum = $array -join '+'
Invoke-Expression $sum 
```

你的输出`$sum`只是简单地添加“+”，然后`invoke-expression`实际上会为你做数学。所以你的输出看起来像：

```
 $sum
1+2+3+4+5+6+7+8+9
Invoke-Expression $sum
45 
```

# android - 我想同时访问方向和加速度传感器。这样做的正确方法是什么？

> ID：10474804
> 
> 赞同：0
> 
> 时间：2012-05-06T22:25:25.190
> 
> 标签：android, orientation, accelerometer

我想同时访问方向和加速度传感器。这样做的正确方法是什么？

我在用

```
public class MainActivity extends Activity
{
    private SensorManager sensorManager;
    private Sensor sensor;
    private Sensor sensor2;
    private float x, y, z;
    private float x1, y1, z1;
    private String output;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        sensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        sensor = sensorManager.getSensorList(Sensor.TYPE_ACCELEROMETER).get(0);
        sensor2 = sensorManager.getSensorList(Sensor.TYPE_ORIENTATION).get(0);
    }

    private void refreshDisplay() {
        output = String.format(";%f;%f;%f;%f;%f;%f", x, y, z, x1, y1, z1);
    }

    @Override
    protected void onResume() {
        super.onResume();
        sensorManager.registerListener(accelerationListener, sensor,
        SensorManager.SENSOR_DELAY_GAME);
        sensorManager.registerListener(orientationListener, sensor2,
        SensorManager.SENSOR_DELAY_GAME);
    }

    @Override
    protected void onPause() {
        sensorManager.unregisterListener(accelerationListener);
        sensorManager.unregisterListener(orientationListener);
        super.onStop();
    }

    private SensorEventListener accelerationListener = new SensorEventListener() {
        @Override
        public void onAccuracyChanged(Sensor sensor, int acc) {
        }

        @Override
        public void onSensorChanged(SensorEvent event) {
            x = event.values[0];
            y = event.values[1];
            z = event.values[2];
            refreshDisplay();
        }

    };

    private SensorEventListener orientationListener = new SensorEventListener() {
        @Override
        public void onAccuracyChanged(Sensor sensor, int acc) {
        }

        @Override
        public void onSensorChanged(SensorEvent event) {
            x1 = event.values[0];
            y1 = event.values[1];
            z1 = event.values[2];
            refreshDisplay();
        }

    };        
} 
```

但这是波涛汹涌的。仅使用传感器或加速度计是平稳的。

编辑：暂停

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:14:43.907

> 我想同时访问方向和加速度传感器。这样做的正确方法是什么？

我会使用`getDefaultSensor()`on`SensorManager`而不是假设列表中的第 0 个条目是正确的。

此外，要么将`onResume()`and`onPause()`作为一对使用，要么将`onStart()`and作为一对使用`onStop()`。您正在使用`onResume()`and `onStop()`，这意味着您可能会多次注册传感器事件。

> 但这是波涛汹涌的

考虑到您没有对上面显示的代码中的数据做任何事情，我不知道您如何判断某些东西是“不稳定的”。此外，您的真实代码对数据所做的操作可能是导致两次数据输入时出现“断断续续”行为的原因——使用 Traceview 来确定您在哪里花费了超出预期的时间。

# java - 如何解决“导入 org.eclipse.wb.swt.SWTResourceManager”

> ID：10474808
> 
> 赞同：5
> 
> 时间：2012-05-06T22:25:56.080
> 
> 标签：java, swt

我有一个 SWT 应用程序，它运行良好。我正在使用 Google WindowBuilder Pro 来构建应用程序窗口。今天我试图对我的应用程序进行一些更新。所以当我打开它时，我发现一个错误说“ `import org.eclipse.wb.swt.SWTResourceManager the import cannot be resolved`”。但它以前工作过。谁能告诉我可能是什么问题？

我正在使用 Eclipse Helios 进行开发。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-28T14:02:16.430

只要您更改标签的字体，WindowBuilder 就会在您的项目中生成此帮助程序类。

该类的代码也可以通过谷歌搜索名称找到，例如： [https ://github.com/vogellacompany/codeexamples-java/blob/master/de.vogella.databinding.windowbuilder.example/src/com /swtdesigner/SWTResourceManager.java](https://github.com/vogellacompany/codeexamples-java/blob/master/de.vogella.databinding.windowbuilder.example/src/com/swtdesigner/SWTResourceManager.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T02:40:16.890

下载窗口生成器 jar 文件并将其添加到您的项目中。（右键单击项目，选择属性，然后单击添加变量，然后选择您下载的jar文件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:02:48.777

我有同样的问题。我使用的解决方法是创建一个新类（相同类型，在我的例子中是 SWT 应用程序窗口）并将所有代码从错误类复制到新类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-23T04:07:14.293

互联网上有jar文件。但我对那些有问题。我做了什么来解决这个问题，

从 github下载`SWTResourceManager`java 文件 [——点击这里](https://github.com/JazzCore/jasmine-history-reader/blob/master/src/org/eclipse/wb/swt/SWTResourceManager.java)。然后我编辑了一些行，它们是：

1.  在**SWTResourceManager.java**文件中，更改`package org.eclipse.wb.swt;`为您的包名称。
2.  在**whatever.java**中，您将使用该库的java文件，删除`import org.eclipse.wb.swt.SWTResourceManager;`此行或更改为您的包。

现在你可以走了..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-12T11:42:10.263

我遇到了一些问题。我试图找到罐子并解决问题。但我找不到罐子。相反，我在这个[链接](http://grepcode.com/file_/repo1.maven.org/maven2/org.beanfabrics/beanfabrics-swt/1.4.0/com/swtdesigner/SWTResourceManager.java/?v=source&disposition=attachment)中找到了下载的源代码，并在我的项目中放入了相同的包结构。

它对我有用，从以下链接下载源代码：http:
[//grepcode.com/file_/repo1.maven.org/maven2/org.beanfabrics/beanfabrics-swt/1.4.0/com/swtdesigner/SWTResourceManager.java/ ?v=来源&处置=附件](http://grepcode.com/file_/repo1.maven.org/maven2/org.beanfabrics/beanfabrics-swt/1.4.0/com/swtdesigner/SWTResourceManager.java/?v=source&disposition=attachment)

希望它对其他人也有帮助。

# iphone - 在没有 SIM 卡的 iPhone 设备上进行测试

> ID：10474812
> 
> 赞同：8
> 
> 时间：2012-05-06T22:26:29.683
> 
> 标签：iphone, ios, xcode, xcode4

我有一部 iPhone 3G，可以很好地在 iOS 3 上进行开发。我刚刚更新到 iOS 4.1.2，Xcode Organizer 告诉我`This device is not activated. Please activate it using iTunes`。我现在已经恢复了两次。

iTunes 告诉我插入 SIM 卡来激活它——但是，我不想激活它。此 iPhone 仅用于开发。手机本身显示“未安装 SIM 卡。插入没有 PIN 锁定的有效 SIM 卡以激活 iPhone。”

如何让“请激活”消息消失，以便我可以将其用于开发？

**编辑**- 我没有可以暂时放入的标准 SIM 卡。我只有一个用于 iPhone 4 的 micro SIM。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-06T22:30:12.223

您所要做的就是插入任何 SIM 卡，无论是否激活，设置设备，然后取出 SIM 卡。从那里应该可以正常工作（我使用无 SIM 3G 来测试 4.2.1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-29T00:36:13.243

根据手机是否与运营商锁定，您可能需要运营商特定的 SIM。您可以以 5 至 10 美元的价格从运营商商店购买 SIM 卡。SIM 不必与帐户或电话号码相关联。当我尝试在没有帐户的情况下购买 SIM 卡时，肯定让销售人员觉得我很有趣。

# ruby-on-rails - 使用 git post receive 部署 Rails 3 应用程序

> ID：10474813
> 
> 赞同：0
> 
> 时间：2012-05-06T22:26:34.473
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, git

我正在使用 git 的 post-receive 挂钩将 Ruby on Rails / NodeJS 应用程序部署到专用主机。

```
git checkout -f
/site/sys/post-receive.sh 
```

我的存储库位于一个文件夹中，`repo.git`实际文件复制到`site`.

问题是 RVM 不在我的路径中（我猜），所以：`bundle install`失败，`bundle no such command`.

我该怎么办？

完整捆绑错误：

```
remote: /usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find bundler (>= 0) amongst [bigdecimal-1.1.0, io-console-0.3, json-1.5.4, minitest-2.5.1, rake-0.9.2.2, rdoc-3.9.4] (Gem::LoadError)
remote:     from /usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
remote:     from /usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems.rb:1230:in `gem'
remote:     from /usr/local/rvm/gems/ruby-1.9.3-p125/bin/bundle:18:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:34:00.673

键入`which bundle`以查看可执行文件的确切位置。然后在 post 接收挂钩脚本中使用该绝对位置。

# php - 从 php 与终端程序交互？

> ID：10474814
> 
> 赞同：0
> 
> 时间：2012-05-06T22:26:41.367
> 
> 标签：php, bash, ubuntu, terminal

我的朋友通过 Ubuntu 中的终端使用应用程序。我不确定它的名称，它是某种数学程序。他打开一个终端，输入命令以启动程序，然后终端提示符变为他的程序提示符，他可以输入命令，它会给他返回输出。

无论如何，他说他想在网页上拥有这个应用程序的接口，但他对 Web 开发知之甚少。所以，我看到的方式是有人会去（基于PHP的）网站，在表单中输入一些命令并单击提交......然后服务器将启动这个终端程序（更好的是，它已经运行）发送命令，获取它给出的任何输出，并将其发送回用户的浏览器。

所以我想知道这可以用PHP来完成吗？我可以通过 PHP 与在终端中运行的某些程序进行交互吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T22:43:26.057

当您在提示符下运行该程序时，它可能正在以交互模式运行。尝试运行`command -h`（`command`作为程序的名称）以查看是否存在仅接受一行输入并输出单行作为响应的非交互模式。

如果是这样，您可以使用简单的 POST 表单获取输入，然后使用：

```
echo shell_exec("command -options ".escapeshellarg($_POST['input'])); 
```

`command`程序名称又在哪里，`-options`是使它在非交互模式下运行所需的任何选项，并且`$_POST['input']`是表单变量。

* * *

或者，如果程序不支持非交互模式，则需要使用[`proc_open`](http://php.net/proc-open)和相关的功能。这些方面的东西：

```
if( $process = proc_open(
    "command",
    Array(
        Array("pipe","r"),
        Array("pipe","w"),
        Array("file","errors.log")
    ),
    $pipes
)) {
    fwrite($pipes[0],$_POST['input']);
    fclose($pipes[0]);
    echo stream_get_contents($pipes[1]);
    fclose($pipes[1]);
    proc_close($process);
} 
```

# facebook - 使用 FB.login 的注册流程

> ID：10474816
> 
> 赞同：4
> 
> 时间：2012-05-06T22:27:07.530
> 
> 标签：facebook, login

我想使用 FB.login() 使用 FB Javascript SDK 更改登录 + 注册流程。

现在 FBML 方式运行良好：

```
<fb:login-button registration-url="<?php echo $config["base_url"]; ?>test.php" size="small"></fb:login-button> 
```

单击以下代码上方的按钮会触发 div 以显示注册插件

```
FB.getLoginStatus(function(response) {
        if (response.status === 'not_authorized') {
          // show registration form   
           document.getElementById('reg').style.display = "block";
          }
         });     

// registration form placed in a div 
<div style="display:none;width:540px;position:relative;margin:0 auto;" id="reg">     
<fb:registration fields="name,birthday,gender,location,email" 
redirect uri="http://app.sunosunaao.com/test.php" width="530">
</fb:registration>
</div> 
```

但是一旦用户从 FB.login() 登录，有没有办法显示上述 div？因为如果我使用 FB.login()，它直接进入 Facebook 权限页面，并且一旦连接，以下函数中的条件是

```
response.status === 'connected'

hence the registration plugin is not triggered 

FB.getLoginStatus(function(response) {
        if (response.status === 'not_authorized') {
          // show registration form   
           document.getElementById('reg').style.display = "block";
          }
         }); 
```

关于我如何替代的任何想法

```
<fb:login-button registration-url="<?php echo $config["base_url"]; ?>test.php" size="small"></fb:login-button> with FB.login(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:46:18.010

您可以在您的 javascript 代码中附加事件，如本文所述 [http://developers.facebook.com/blog/post/534/](http://developers.facebook.com/blog/post/534/)

```
 FB.Event.subscribe('auth.login', function(response) {
      // this code is executed after login success
    });
    FB.Event.subscribe('auth.logout', function(response) {
      // this code is executed after logout success 
    }); 
```

我希望这会有所帮助。

# c - 在 C 中合并文本文件

> ID：10474819
> 
> 赞同：1
> 
> 时间：2012-05-06T22:27:40.330
> 
> 标签：c, file, merge, strcmp

我一直在尝试创建一个函数将两个文本文件合并到一个新文件中，然后按字母顺序排序。如果我是对的，那么下面的代码应该将这两个文件组合成一个新文件（newcat），但是如何使用 strcmp 函数将字符串“排序”为字母顺序？

```
 void combine(FILE* cat1, FILE* cat2, FILE* newcat)
    {
       char ch;

    while((ch = fgetc(cat1)) != EOF)
       fputc(ch,newcat);

    while((ch = fgetc(cat2)) != EOF)
       fputc(ch,newcat);

    fclose (cat1);
    fclose (cat2);
    fclose (newcat);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:40:57.997

对于每个文件，您可以考虑每个字符串，然后使用`strcmp`您选择的任何排序算法使用比较字符串并将结果放在目标文件中。这将按字母顺序合并文件。

# javascript - Ruby On Rails Javascript

> ID：10474822
> 
> 赞同：0
> 
> 时间：2012-05-06T22:28:11.197
> 
> 标签：javascript, ruby-on-rails, ajax

有没有办法让我从 javascript 中调用 ruby​​ on rails 函数？例如，我有一个 partial => _micropost_form.html.erb，我希望它在单击按钮时出现在单独的 div 中。我认为最好的方法是使用 javascript。目前我有：

```
document.getElementById("micropost").innerHTML= 
```

所以我很迷茫。我觉得这应该是一个非常简单的问题。谢谢！

编辑：

所以我的 _header 文件中有一个链接：

```
<li>Add Content</li> 
```

以及一个div：

```
<div id="popout"></div> 
```

在我的内容控制器中，我有一个方法：

```
def add_content
@content = Content.new
respond_to do |format|
format.html
format.js
end 
```

以及文件（位于视图/内容中）add_content.js.erb（_content_form 是位于共享中的 html.erb 文件）

```
$('#popout').replaceWith("<%= escape_javascript render
            (:file => 'shared/_content_form') %>"); 
```

我知道我应该打的电话`<li>Add Content</li>`涉及`link_to`但是，我还不能让它正常工作。控制台的输出通常看起来像页面刷新。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:33:25.313

让它出现在 iframe 中：

```
function appear_it() {
   document.getElementById("micropost").innerHTML = "<iframe id="micropostframe" src="bla/whatever.html"></iframe>";
} 
```

然后你可以用 css 设置它的样式。

有一个带有属性 onclick="appear_it();return false" 的按钮或链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T22:46:05.063

我认为对于您要实现的目标，将请求上的“div”呈现为隐藏，然后链接触发一个 js 函数来显示它。

这应该是一个很好的解决方案，除非“链接”为您想要呈现的内容带来了一些条件，例如，如果只有一件事要显示，或者如果您有许多链接要在同一个 div 上显示不同的内容，具体取决于您的链接点击。如果第二种情况是您要解决的问题，您应该真正检查 ajax 调用。顺便说一句，JQuery 是你这类东西的朋友。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T00:15:17.120

除了[ismaelga](https://stackoverflow.com/users/634513/ismaelga)的回答之外，我想补充一点，如果您有静态 HTML 内容，`_micropost_form.html.erb`那么没有理由应该是`erb`文件或`partial`. 在 a 中包含该内容`hidden div`，然后根据按钮单击切换该内容将是一个很好的解决方案。

但是，如果您在该文件中有动态内容，那么最好的办法是使用`AJAX`. [Felix Cling](https://stackoverflow.com/users/218196/felix-kling)在评论中提供的一些链接是一个很好的起点。我发现自己在文件中使用了以下代码行`.js.erb`来实现您想要的效果：

```
$('#micropost').replaceWith("<%= escape_javascript render(:file => 'micropost_form.html.erb') %>"); 
```

或者，您可以使用 jquery [append](http://api.jquery.com/append/)而不是[replaceWith](http://api.jquery.com/replaceWith/)。

# lisp - 将 ql:system-apropos 返回的包名称存储到变量中

> ID：10474824
> 
> 赞同：0
> 
> 时间：2012-05-06T22:28:50.400
> 
> 标签：lisp, common-lisp, quicklisp

我正在尝试使用 将 的输出保存`(ql:system-apropos "regex")`到变量中`multiple-value-bind`，但我只有`nil`. 但是，该命令似乎只将文本打印到 REPL 并且不返回任何变量，因此似乎不起作用。在那种情况下，有没有办法将输出`ql:system-apropos`作为列表或数组，特别是它返回的包名称。

此基本`multiple-value-bind`代码有效：

```
* (multiple-value-bind (first-var second-var) (floor 5 3) (defparameter *first-var* first-var) (defparameter *second-var* second-var))

*SECOND-VAR*
* *first-var*

1
* *second-var*

2
* 
```

但这没有（如果没有什么可以绑定的`multiple-value-bind`？）：

```
* (multiple-value-bind (first-var second-var) (ql:system-apropos "regex") (defparameter *first-var* first-var) (defparameter *second-var* second-var))
#<SYSTEM com.informatimago.common-lisp.regexp / com.informatimago-20120407-git / quicklisp 2012-04-07>
#<SYSTEM lispbuilder-regex / lispbuilder-20110619-svn / quicklisp 2012-04-07>
#<SYSTEM recursive-regex / recursive-regex-20120407-git / quicklisp 2012-04-07>
#<SYSTEM recursive-regex-test / recursive-regex-20120407-git / quicklisp 2012-04-07>
#<SYSTEM regex / regex-1 / quicklisp 2012-04-07>
*SECOND-VAR*
* *first-var*

NIL
* *second-var*

NIL
* 
```

所以似乎`ql:system-apropos`只能通过使用`format`或其他一些打印命令在屏幕上打印文本？

这样做的目的是通过使用一些字符串处理命令（可能是一些正则表达式）来提取输出的包名称，并自动安装或重新安装返回的所有包`ql:system-apropos`，例如：

```
(defparameter *package-name-string* "lispbuilder")
(multiple-value-bind (lispbuilder-packages-list) (ql:system-apropos *package-name-string*) (defparameter *lispbuilder-packages-list* lispbuilder-packages-list)) 
```

使用部分名称或某些正则表达式作为输入来获取`quicklisp`包名称的任何其他方式也是一个可行的解决方案（即使获取当前完整的包列表也会很有用）。有没有可行的解决方案来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:39:10.030

您与 Common Lisp 的交互看起来太复杂了。

你问：*将 ql:system-apropos 返回的包名存储到一个变量*中。

它真的返回任何东西吗？还是只打印一些东西？

你可以很容易地找出来。我在我的例子中使用`CL:APROPOS`：

```
CL-USER 141 > (apropos "plist" "CL")
SYMBOL-PLIST (defined)
MAPLIST (defined) 
```

只描述返回值：

```
CL-USER 142 > (describe (apropos "plist" "CL"))
SYMBOL-PLIST (defined)
MAPLIST (defined)
NIL is a NULL
NAME          "NIL"
VALUE         NIL
FUNCTION      #<unbound function>
PLIST         (TYPE::DIRECT-TYPE-PREDICATE TYPE::RETURN-FALSE)
PACKAGE       #<The COMMON-LISP package, 2/4 internal, 978/1024 external> 
```

没有什么。`APROPOS`只是打印一些东西。

Common Lisp 使用输出流。只需重新绑定保存输出流的变量：

```
CL-USER 143 > (with-output-to-string (*standard-output*)
                (apropos "plist" "CL"))
"SYMBOL-PLIST (defined)
MAPLIST (defined)" 
```

现在你得到了一个字符串，你可以解析它。

# java - 从解析树中获取某些节点

> ID：10474827
> 
> 赞同：3
> 
> 时间：2012-05-06T22:28:56.353
> 
> 标签：java, nlp, stanford-nlp, jgrapht

我正在研究一个通过霍布斯算法涉及回指解析的项目。我已经使用斯坦福解析器解析了我的文本，现在我想操纵节点以实现我的算法。

目前，我不明白如何：

*   根据其 POS 标签访问节点（例如，我需要以代词开头 - 我如何获得所有代词？）。

*   使用访客。我对 Java 有点小白，但在 C++ 中，我需要实现一个访问者函子，然后处理它的钩子。不过，我找不到太多斯坦福解析器的树结构。那是jgrapht吗？如果是的话，你能给我一些关于代码片段的指针吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T04:13:05.150

@dhg 的回答很好，但这里有两个其他选项可能也很有用：

*   该类`Tree`实现`Iterable`. 您可以`Tree`在前序遍历中遍历 a 的所有节点，或者严格来说，以每个节点为首的子树，其中：

    ```
    for (Tree subtree : t) { 
        if (subtree.label().value().equals("PRP")) {
            pronouns.add(subtree);
        }
    } 
    ```

*   您还可以通过 using 获得满足某些（可能非常复杂的模式）的节点`tregex`，其行为类似于`java.util.regex`允许模式匹配树。你会有类似的东西：

    ```
    TregexPattern tgrepPattern = TregexPattern.compile("PRP");
    TregexMatcher m = tgrepPattern.matcher(t);
    while (m.find()) {
        Tree subtree = m.getMatch();
        pronouns.add(subtree);
    } 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T02:43:02.200

这是一个解析句子并找到所有代词的简单示例。

```
private static ArrayList<Tree> findPro(Tree t) {
    ArrayList<Tree> pronouns = new ArrayList<Tree>();
    if (t.label().value().equals("PRP"))
        pronouns.add(t);
    else
        for (Tree child : t.children())
            pronouns.addAll(findPro(child));
    return pronouns;
}

public static void main(String[] args) {

    LexicalizedParser parser = LexicalizedParser.loadModel();
    Tree x = parser.apply("The dog walks and he barks .");
    System.out.println(x);
    ArrayList<Tree> pronouns = findPro(x);
    System.out.println("All Pronouns: " + pronouns);

} 
```

这打印：

```
 (ROOT (S (S (NP (DT The) (NN dog)) (VP (VBZ walks))) (CC and) (S (NP (PRP he)) (VP (VBZ barks))) (. .)))
    All Pronouns: [(PRP he)] 
```

# javascript - 页面加载后提醒

> ID：10474829
> 
> 赞同：16
> 
> 时间：2012-05-06T22:29:40.520
> 
> 标签：javascript, html, asp.net-mvc

这是我的脚本：

```
<%
    if (TempData["Resultat"] != null){
%>
<script type="text/javascript">
    alert('<%: TempData["Resultat"]%>');
</script>
<%
    }
%> 
```

在这种情况下，弹出窗口在页面加载之前显示，但我希望在页面完全加载后出现。在 Html 中它看起来像这样：

```
<body onload="happycode() ;"> 
```

但我不能在 MVC 中使用它我的所有 Web 应用程序都有一个母版页

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-06T23:27:31.693

有三种方式。
首先是把脚本标签放在页面底部：

```
<body>
<!--Body content-->
<script type="text/javascript">
alert('<%: TempData["Resultat"]%>');
</script>
</body> 
```

第二种方法是创建一个 onload 事件：

```
<head>
<script type="text/javascript">
window.onload = function(){//window.addEventListener('load',function(){...}); (for Netscape) and window.attachEvent('onload',function(){...}); (for IE and Opera) also work
    alert('<%: TempData["Resultat"]%>');
}
</script>
</head> 
```

它将在窗口加载时执行一个函数。
最后，第三种方式是创建一个`readystatechange`事件并检查当前的document.readystate：

```
<head>
<script type="text/javascript">
document.onreadystatechange = function(){//window.addEventListener('readystatechange',function(){...}); (for Netscape) and window.attachEvent('onreadystatechange',function(){...}); (for IE and Opera) also work
    if(document.readyState=='loaded' || document.readyState=='complete')
        alert('<%: TempData["Resultat"]%>');
}
</script>
</head> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-06T22:33:54.153

如果您可以使用 jquery，那么您可以将警报放在`$(document).ready()`函数中。它看起来像这样：

```
<script>
  $(document).ready(function(){
    alert('<%: TempData["Resultat"]%>');
  });
</script> 
```

要包含 jQuery，请在`<head>`代码的标记中包含以下内容：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script> 
```

这是 jsFiddle 中的一个简单示例：http: [//jsfiddle.net/ChaseWest/3AaAx/](http://jsfiddle.net/ChaseWest/3AaAx/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-06T22:34:48.520

为什么不能在 MVC 中使用它？

而不是使用正文加载方法，而是使用 jQuery 并等待 document onready 函数完成。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-06T22:37:04.297

使用 jQuery 处理文档就绪事件，

```
<script type="text/javascript">

function onLoadAlert() {
    alert('<%: TempData["Resultat"]%>');
}

$(document).ready(onLoadAlert);
</script> 
```

或者，甚至更简单 - 将 放在`<script>`的末尾`body`，而不是放在`head`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-02-06T23:53:41.880

解决我在最近的训练营培训中遇到的 OP 中描述的问题的另一个选项是使用 window.setTimeout 来环绕代码，这很麻烦。我的理解是，它会将函数的执行延迟指定的时间段（在这种情况下为 500 毫秒），从而为页面加载提供足够的时间。因此，例如：

```
<script type = "text/javascript">
            window.setTimeout(function(){
                alert("Hello World!");
            }, 500); 
</script> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-25T12:41:14.530

`PageLoad`在事件中添加以下代码：

```
ScriptManager.RegisterStartupScript(Page, this.GetType(), "myScript", "alert('OK Done.');", true); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-10T11:05:15.233

```
$(window).on('load', function () {
 alert('Alert after page load');
        }
    }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-16T00:37:20.487

另一种选择是在脚本上使用*defer*属性，但它只适用于具有*src*属性的外部脚本：

```
<script src = "exampleJsFile.js" defer> </script> 
```

# jquery - 选择 jqGrid 行，填充服务器端控件 - 电话号码 skype 或其他问题？

> ID：10474830
> 
> 赞同：1
> 
> 时间：2012-05-06T22:29:53.217
> 
> 标签：jquery, jqgrid, skype

我有从 jqGrid 中选择一行的代码。

```
var fax = $('#Contacts').jqGrid('getCell', id, 'Fax');
$('#MainContent_txtContactFax').val(fax); 
```

所以代码从网格中获取传真号码，然后放置 的值 这里的问题是它返回 Skype 号码。我尝试将“.val”更改为“.text”，同样的事情发生了。我搜索了答案并想出了以下内容：

```
<script language="javascript">
$(document).ready(function() {
window.setTimeout(function() {
$('.skype_pnh_container').html('');
$('.skype_pnh_print_container').removeClass('skype_pnh_print_container');
}, 800);
});
</script> 
```

所以我尝试了这个，我认为它有效。直到我开始单击网格中的其他行。然后我得到这样的东西：

```
<span style="white-space: nowrap;" class="baec5a81-e4d6-4674-97f3-e9220f0136c1">410-561-5510<a style="margin: 0px; border: currentColor; left: 0px; top: 0px; width: 16px; height: 16px; right: 0px; bottom: 0px; overflow: hidden; vertical-align: middle; float: none; display: inline; white-space: nowrap; position: static !important;" title="Call: 410-561-5510" href="#"><img style="margin: 0px; border: currentColor; left: 0px; top: 0px; width: 16px; height: 16px; right: 0px; bottom: 0px; overflow: hidden; vertical-align: middle; float: none; display: inline; white-space: nowrap; position: static !important;" title="Call: 410-561-5510" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAKLSURBVHjadJPfS5NhFMe/21xvuhXRyJAZroiSrJnbRdT7vrAf5HBaK5RABmEEwQIvkpZ/QRcWXdSFw5soKaF0F7qZeLO13mGBDpQsf5CoxVKHOt0Pctp2uvEdrzG/V+c553w/54HnPDIiQiGpPMETABoB2AAYd9MRAMMAvGmX+RcAyAoBVJ7gZQDtABworH4AHWmX+bOMZdkjCoXiUzabvcAwzPSsob5p/VTNY9GcdpnxdmYZ9wJThSCtCr1e/4XjuNPd3d1KjUZzaGbI27ysqzGQoggAsLa1A7ehArrDxfDNr0oBlQB+wmKxbJFEL968SxoamsjkHaPU9l9piUo6A0RE1DG2QCWdASrpDAzJM5kMI8XecdjVxfEl+K9dxFgsgUvvR6HyBKHyBAEATyKLeGSsENuNcqk5kUjEGm7fzcYqr0ClVODl99+YXEvl6+c1amjVe+ahiGGYaUEQKnmeh91uL43rqheixjpdmzCL11er0PcjhrTLvMfUJsyKYUSeyWQ6enp6tgCgrKxsfbP8bB8AdE1G89cOReMAgOv+Cag8QXRNRkXAsDwcDr+am5tLCYKA3t7eo2dG+1vVK/MfpRPtA+MIReMYaKj+/xm9MiICx3EmpVL5wefzFavValis1u1vvHMkdfykCQC0kSGUTo+Ajmnx1dSC7IGD+UUCEYGIwLKsyWazrSeTSSIiMpnNf7Ttz5+ec96fr7/VnE0mk+QfHMzV3WjcKH/4rEr05QGFIA6HY4llWRLPRER+v3/HYrFMFQSIkNra2tVQKJSlfcSyLO0LECFWq3XF6XRGA4HAptTsdrsXeZ6fEHtl+31nAOA4rkUulz/I5XL63dQGgHEAN8Ph8AYA/BsAt4ube4GblQIAAAAASUVORK5CYII="></a>? 
```

所以看起来没有更多的Skype标签，但这是另一回事。我的机器上有 Lync，所以我不确定它是否是 lync 电话格式。

是否有任何想法也可以删除这种格式？谢谢。

# c# - nhibernate复合主键

> ID：10474834
> 
> 赞同：-1
> 
> 时间：2012-05-06T22:31:18.387
> 
> 标签：c#, xml, nhibernate, app-config

我的复合主键有问题：我有一个名为“simulateur”的表，复合主键是 Nombre_simulateur 和 Date 类simulateur.hbm.xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" auto-import="true">
  <class name="base_donnee.simulateur, base_donnee" table="simulateur">
 <composite-id >
 <key-property name="Nombre_simulateur">
        <column name="[Nombre_simulateur]" sql-type="int" />
      </key-property>
      <key-property name="Date">
        <column name="[Date]" sql-type="nvarchar(50)" />
      </key-property>
    </composite-id>
    <property name="temps_connection" type="int" />
    <property name="temps_envoi" type="int" />
    <property name="temps_reception" type="int" />
  </class>
</hibernate-mapping> 
```

但是出现异常：Could not compile the mapping document: base_donnee.simulateur.hbm.xml ---> System.InvalidOperationException: Could not find the dialect in the configuration

我的文件 App.config 是：

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="hibernate-configuration" type="NHibernate.Cfg.ConfigurationSectionHandler, NHibernate"/>
  </configSections>
  <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <session-factory>
      <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
      <property name="dialect">NHibernate.Dialect.MsSql2005Dialect</property>
      <property name="connection.connection_string_name">Northwind</property>
      <property name="proxyfactory.factory_class">NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle</property>
      <mapping assembly="base_donnee"/>
    </session-factory>
  </hibernate-configuration>
  <connectionStrings>
    <add name="Northwind" connectionString="Data Source=HP-PC\SQLEXPRESS;Initial Catalog=Simulation; Integrated Security=true" providerName="System.Data.SqlClient"/>

  </connectionStrings>
</configuration> 
```

我需要帮助，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T07:25:46.747

你可能错过了`connection.driver_class`

将以下内容添加到您的 web.config：-

```
...
<property name="dialect">NHibernate.Dialect.MsSql2005Dialect</property>
<property name="connection.driver_class">NHibernate.Driver.SqlClientDriver</property>
... 
```

# java - 更多关于组合框

> ID：10474836
> 
> 赞同：1
> 
> 时间：2012-05-06T22:31:30.260
> 
> 标签：java, swing, combobox, awt

我有一个期末考试，我的教授强调的一点是 ComboBoxes。我已经完成了一项家庭作业，我也通过here将其作为问题发布，我理解。他希望我们遵循这种模式：[ComboBox 代码正确吗？](https://stackoverflow.com/questions/10458587/combobox-code-correct).

现在，我开始为自己的练习寻找其他问题，但遇到了一些麻烦。这有点像我的家庭作业，但有更多内容。问题：

> 一所大学有以下宿舍：
> 
> *   艾伦大厅：每学期$ 1,500
> *   派克大厅：每学期 1,600 美元
> *   育儿堂：每学期 1,200 美元
> *   大学套房：1,800 美元
> 
> 该大学还提供以下膳食计划：
> 
> *   每周 7 餐：每学期 560 美元
> *   每周 14 餐：1,095 美元
> *   无限制用餐：每学期 1,800 美元
> 
> `ComboBox`使用 2 个es创建一个应用程序。一个应该保存宿舍的名称，另一个应该保存膳食计划。用户应选择宿舍和膳食计划，应用程序应显示总费用。

我开始编写一些代码，但我不知道如何将两个组合框一个接一个地放置，然后如何创建一个单独的“计算”按钮`ActionListener`。

这是代码；我知道这是一团糟。谁能告诉我如何正确写这个？我只想做好准备。请多多包涵，感谢您的耐心和帮助。我的代码（我将 4`****`放在编译器出现红色的部分代码上）：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class DormAndMealPlanCalc extends JFrame
{

    private JPanel dormPanel;
    private JPanel selectedDormPanel;
    private JComboBox DormBox;
    private JLabel label;
    private JTextField selectedDorm;

    private String[] dorm = {"Allen Hall: $1,500 per semester","Pike Hall: $1,100 per" +
    "semester","Fathering Hall: 1,200 per semester","Universty Suites: $1,800"};

    public void ComboBoxWindow1()
    {

        **super("Dorm plan");** wrong placement?

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        setLayout(new BorderLayout());

        buildDormPanel();
        **buildSelectedDormPanel;** Variable error

        add(dormPanel,BorderLayout.CENTER);
        add(selectedDormPanel, BorderLayout.SOUTH);

        pack();
        setVisible(true);
    }

    private void buildDormPanel()
    {
        dormPanel = new JPanel();

        DormBox = new JComboBox(dorm);
        DormBox.addActionListener(new ComboBoxListener());
        dormPanel.add(DormBox);
    }

    private void buildSelectedDormPanel()
    {

        selectedDormPanel = new JPanel();

        label = new JLabel("You selected: ");

        selectedDorm = new JTextField(10);
        selectedDorm.setEditable(false);

        selectedDormPanel.add(label);
        selectedDormPanel.add(selectedDorm);
    }

    private class ComboBoxListener implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            String selection = (String) DormBox.getSelectedItem();
            selectedDorm.setText(selection);
        }
    }

    public void main(String[] args)
    {
        **new ComboBoxWindow2();**
    }

}

private JPanel mealPanel;
private JPanel selectedMealPanel;
private JComboBox MealBox;
private JLabel label1;
private JTextField selectedMeal;
private JButton calcbutton;

private String[] Meal = {"7 meals per week: $560 per semester","14 meals per week:" +
"$1,095 per semester","Unlimited meals: $1,500 per semester"};

public void ComboBoxWindow()
{

    **super("Meal plan");**

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    setLayout(new BorderLayout());

    buildMealPanel();
    **BuildselectedMealPanel;** variable problem

    add(mealPanel,BorderLayout.CENTER);
    add(selectedMealPanel, BorderLayout.SOUTH);

    pack();
    setVisible(true);
}

private void buildMealPanel()
{
    mealPanel = new JPanel();

    MealBox = new JComboBox(meal);
    MealBox.addActionListener(new ComboBoxListener());
    mealPanel.add(MealBox);
    **calcbutton = new JButton("Calculate");** syntax/token error
}
calacbutton.addActionListener(new calcbuttonListener);

private void buildSelectedMealPanel()
{

    selectedMealPanel = new JPanel();

    label = new JLabel("You selected: ");

    selectedMeal = new JTextField(10);
    selectedMeal.setEditable(false);

    selectedMealPanel.add(label);
    selectedMealPanel.add(selectedDorm);
}

private class ComboBoxListener1 implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        String str;
        String selection = (String) DormBox.getSelectedItem();
        selectedDorm.setText(selection);
        **JOptionPane.showMessageDialog('Total is' + dorm + meal);** argument error
    }
}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T22:53:08.713

OP 的代码不是有效的 Java，如果不首先解释如何在 OOP 中编码，就无法使其工作。

很多琐碎的错误。

1) 函数调用后没有()

`buildSelectedDormPanel;`->`buildSelectedDormPanel();`

2) 类/c-tors 的错误方法

`public void ComboBoxWindow1() {`

应该是，例如

```
class ComboBoxWindow1 extends JFrame { 
  public void ComboBoxWindow1() { 
```

等等，甚至使用匿名类覆盖，即

```
JFrame f = new JFrame() { 
```

等等

3) ComboBox 是通用类型，所以请不要使用原始版本 - 使用 ComboBox<String> 代替

4）在需要的地方添加@Override注解到你的代码中

5）注意你的拼写大小写......你将小写字母与小写字母和小写字母混合

6）修复你的括号（不仅是圆形的，而且在你的代码中也错位了）

7）您将“”误认为是字符串，而将“”误认为是字符

8) 如果您想评论您的代码（即代码中的错误，请使用 COMMENT /* */ 或 //，而不是在尝试正确格式化您的代码之前我必须删除的一些星号，

9）有太多的空白和错误，一些未使用的变量，一些字段（全局变量？无法猜测意图）没有任何明确的类附件 - 总而言之，修复代码本身是不可能的 -

10）（接着是拖钓）你似乎意识到你学得还不够，学期快结束了，所以你试着做功课，产生了一些损坏/难以辨认的代码，惊慌失措，无法修复它，然后你意识到有 StackOverflow。坏小狗，没有骨头。

11) 修复最明显错误后的代码【注意由于main()为空，代码无效】

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class DormAndMealPlanCalc extends JFrame {
  private JPanel dormPanel;
  private JPanel selectedDormPanel;
  private JComboBox<String> DormBox;
  private JLabel label;
  private JTextField selectedDorm;
  private String[] dorm = { "Allen Hall: $1,500 per semester", "Pike Hall: $1,100 per"
    + "semester", "Fathering Hall: 1,200 per semester", "Universty Suites: $1,800" };

  protected class ComboBoxWindow1 extends JFrame {
    protected ComboBoxWindow1() {
      super( "Dorm plan" );
      setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
      setLayout( new BorderLayout() );
      buildDormPanel();
      buildSelectedDormPanel();
      add( dormPanel, BorderLayout.CENTER );
      add( selectedDormPanel, BorderLayout.SOUTH );
      pack();
      setVisible( true );
    }
  }

  private void buildDormPanel() {
    dormPanel = new JPanel();
    DormBox = new JComboBox<>( dorm );
    DormBox.addActionListener( new ComboBoxListener() );
    dormPanel.add( DormBox );
  }

  private void buildSelectedDormPanel() {
    selectedDormPanel = new JPanel();
    label = new JLabel( "You selected: " );
    selectedDorm = new JTextField( 10 );
    selectedDorm.setEditable( false );
    selectedDormPanel.add( label );
    selectedDormPanel.add( selectedDorm );
  }

  private class ComboBoxListener implements ActionListener {
    @Override
    public void actionPerformed( ActionEvent e ) {
      String selection = (String) DormBox.getSelectedItem();
      selectedDorm.setText( selection );
    }
  }
  private JPanel mealPanel;
  private JPanel selectedMealPanel;
  private JComboBox<String> mealBox;
  private JLabel label1;
  private JTextField selectedMeal;
  private JButton calcbutton;
  private String[] meal = { "7 meals per week: $560 per semester",
    "14 meals per week: $1,095 per semester",
    "Unlimited meals: $1,500 per semester"
  };

  protected class ComboBoxWindow2 extends JFrame {
    protected ComboBoxWindow2() {
      super( "Meal plan" );
      setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );

      setLayout( new BorderLayout() );

      buildMealPanel();
      buildSelectedMealPanel();
      add( mealPanel, BorderLayout.CENTER );
      add( selectedMealPanel, BorderLayout.SOUTH );

      pack();
      setVisible( true );
    }
  }

  private void buildMealPanel() {
    mealPanel = new JPanel();
    mealBox = new JComboBox<>( meal );
    mealBox.addActionListener( new ComboBoxListener() );
    mealPanel.add( mealBox );
    calcbutton = new JButton( "Calculate" );
    calcbutton.addActionListener( new ActionListener() {
      @Override
      public void actionPerformed( ActionEvent e ) {
        throw new UnsupportedOperationException( "Not supported yet." );
      }
    } );
  }

  private void buildSelectedMealPanel() {
    selectedMealPanel = new JPanel();
    label = new JLabel( "You selected: " );
    selectedMeal = new JTextField( 10 );
    selectedMeal.setEditable( false );
    selectedMealPanel.add( label );
    selectedMealPanel.add( selectedDorm );
  }

  private class ComboBoxListener1 implements ActionListener {
    @Override
    public void actionPerformed( ActionEvent e ) {
      String selection = (String) DormBox.getSelectedItem();
      selectedDorm.setText( selection );
      JOptionPane.showMessageDialog( null, "Total is" + dorm + meal );
    }
  }

  static public void main( String[] args ) {
    // do your thing
  }
} 
```

TL;DR - 请先学习，然后再编码。

# c# - 并非 WCF 数据协定中的所有参数都通过 Web 服务调用

> ID：10474838
> 
> 赞同：8
> 
> 时间：2012-05-06T22:32:19.380
> 
> 标签：c#, xml, wcf, rest

在创建 WCF Rest 服务时，我注意到并非我的 Web 服务中的所有参数都在我的实现中。

这是界面：

```
[ServiceContract(Namespace="http://example.com/recordservice")]
public interface IBosleySchedulingServiceImpl
{
    [OperationContract]
    [WebInvoke(UriTemplate = "Record/Create",
        RequestFormat = WebMessageFormat.Xml, 
        ResponseFormat = WebMessageFormat.Xml,
        BodyStyle = WebMessageBodyStyle.Bare, Method = "POST")]
    string CreateRecord(Record record);
}

[DataContract(Namespace="http://example.com/recordservice")]
public class Appointment
{
    [DataMember]
    public int ResponseType { get; set; }

    [DataMember]
    public int ServiceType { get; set; }

    [DataMember]
    public string ContactId { get; set; }

    [DataMember]
    public string Location { get; set; }

    [DataMember]
    public string Time { get; set; }        
} 
```

我将这个 XML 传递给：

```
<Appointment xmlns="http://ngs.bosley.com/BosleySchedulingService">
  <ContactId>1123-123</ContactId>
  <Location>Fresno</Location>
  <Time>2012-05-05T08:30:00</Time>
  <ResponseType>45</ResponseType>
  <ServiceType>45</ServiceType>
</Appointment> 
```

在我的服务中，我只是将值输出到日志中，以便我可以暂时验证这些值是否通过：

```
logger.Debug("ContactId: " + appointment.ContactId);
logger.Debug("Time Field: " + appointment.Time);
logger.Debug("Location: " + appointment.Location);
logger.Debug("Response Type: " + Convert.ToInt32(appointment.ResponseType));
logger.Debug("ServiceType: " + Convert.ToInt32(appointment.ServiceType)); 
```

但是，在我的输出中，整数值为零：

```
ContactId: 1123-123
Time Field: 2012-05-05T08:30:00
Location: Fresno
Response Type: 0
ServiceType: 0 
```

当我从 DataContract 和服务实现中删除字符串时，整数值没有问题。

```
Response Type: 45
ServiceType: 45 
```

我对此感到非常困惑，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T23:20:07.233

默认情况下，当您通过 wcf 发送对象时，属性将按字母顺序发送，除非您指定顺序。

您可以指定属性的顺序或更改顺序，以便它们按字母顺序显示。

```
[DataContract(Namespace="http://example.com/recordservice")]
public class Appointment
{
    [DataMember(Order = 1)]
    public int ResponseType { get; set; }

    [DataMember(Order = 2)]
    public int ServiceType { get; set; }

    [DataMember(Order = 3)]
    public string ContactId { get; set; }

    [DataMember(Order = 4)]
    public string Location { get; set; }

    [DataMember(Order = 5)]
    public string Time { get; set; }        
} 
```

# entity-framework-4.3 - EF 4.3.1 迁移播种未按预期工作

> ID：10474839
> 
> 赞同：4
> 
> 时间：2012-05-06T22:32:28.433
> 
> 标签：entity-framework-4.3, entity-framework-migrations

我正在使用 EF 4.3.1 迁移，并且我有 Configuration 类，其中包含以下代码：

```
internal sealed class Configuration : DbMigrationsConfiguration<DbContext>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = false;
    }

    protected override void Seed(PayByPhoneDbContext context)
    {
        context.Roles.AddOrUpdate(r => r.Name, new Role { Name = "A" }, new Role { Name = "B" });
        context.Administrators.AddOrUpdate(a => a.Email, new Administrator { Email = "a@a.com" Name = "A", Role = context.Roles.Local.SingleOrDefault(role => role.Name == "A") });
    }
} 
```

现在，当我在数据库不存在时运行迁移命令（MSBuild 脚本的一部分）时，会创建表并按预期进行播种。但是，当我在没有任何迁移的现有数据库上运行 migrate 命令并且所有数据都已经播种时（当需要更新而不是插入时）我在运行 migrate 命令时遇到错误：

> 没有未决的显式迁移。
> 
> 运行种子方法。
> 
> System.Data.Entity.Infrastructure.DbUpdateException：更新条目时出错。有关详细信息，请参阅内部异常。---> System.Data.UpdateException：更新条目时出错。有关详细信息，请参阅内部异常。---> System.Data.SqlClient.SqlException：UPDATE 语句与 FOREIGN KEY 约束“FK_Administrators_Roles_RoleId”冲突。冲突发生在数据库“xxxDB”、表“dbo.Roles”、列“Id”中。
> 
> 该语句已终止。

堆栈跟踪：

```
at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)
   at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
   --- End of inner exception stack trace ---
   at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
   at System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)
   at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
   at System.Data.Entity.Internal.InternalContext.SaveChanges()
   --- End of inner exception stack trace ---
   at System.Data.Entity.Internal.InternalContext.SaveChanges()
   at System.Data.Entity.Internal.LazyInternalContext.SaveChanges()
   at System.Data.Entity.DbContext.SaveChanges()
   at System.Data.Entity.Migrations.DbMigrator.SeedDatabase()
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.SeedDatabase()
   at System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration)
   at System.Data.Entity.Migrations.Infrastructure.MigratorBase.Update(String targetMigration)
   at System.Data.Entity.Migrations.Design.ToolingFacade.UpdateRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run() 
```

运行 SQL Server profiler 发现执行时出现错误：

```
exec sp_executesql N'update [dbo].[Administrators]
set [RoleId] = @0
where ([Id] = @1)
',N'@0 int,@1 bigint',@0=0,@1=1 
```

在 Seed 方法中使用外键播种数据的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T02:42:29.183

AddOrUpdate 会将您未指定的列重置为 null（或在 int 的情况下为零）。

我的理解是，这种行为（顺便说一句很糟糕）不适用于它识别为键或自动增量的列，但显然它适用于您的情况。

我的建议是检查以确保数据库中不存在该角色，如果不存在则执行标准 add() 。

我为我的所有种子数据执行此操作，因为您永远不知道以后何时可以提供一个接口来更新您播种的数据，并且您不希望 Seed() 方法在这些情况下覆盖您的更改。

还要记住，如果您曾经选择使用 MigrateDatabaseToLatestVersion 数据库初始化程序，那么 Seed() 将在您的应用程序每次重新启动（dll 部署、web.config 更新等）时触发。

最好在 Seed() 方法中进行防御性编码。

更新：Julie Lerman 有一篇关于这种行为的好[博文。](http://thedatafarm.com/blog/data-access/take-care-with-ef-4-3-addorupdate-method/)

# eclipse - 在 Eclipse RCP 中操作后刷新视图

> ID：10474841
> 
> 赞同：0
> 
> 时间：2012-05-06T22:32:43.933
> 
> 标签：eclipse, view, eclipse-rcp, rcp

我正在编写一个 Eclipse RCP 应用程序。我在左边有一个视图，在右边有一个编辑器。视图是一个菜单。单击菜单中的按钮，编辑器应该打开并且视图应该改变。点击后编辑器打开，但视图没有改变。

我是否必须关闭菜单视图并打开一个新的？如果是，如何？

如果我在 page.openEditor(..) 之前写 page.showView(ID_of_my_view_class.ID) 它会在显示的控制台旁边打开一个带有日志的新选项卡。

当前代码：

```
 public Object execute(ExecutionEvent event) throws ExecutionException {
    this.log.info(this.getClass().getSimpleName() + " called");
    IWorkbenchWindow window = HandlerUtil.getActiveWorkbenchWindow(event);
    IWorkbenchPage page = window.getActivePage();
    KuenstlerEditorInput input = new KuenstlerEditorInput(new Kuenstler());
    try {
        page.openEditor(input, KuenstlerEditor.ID);
    } catch (PartInitException e) {
        MessageDialog.openError(window.getShell(), "Error",
                "Editor f¸r K¸nstler konnte nicht geˆffnet werden: "
                        + e.getMessage());
        this.log.error(e);
    }
    return null;
} 
```

当我启动程序时，它看起来像这样：http: [//i.imgur.com/KXHAe.png](http://i.imgur.com/KXHAe.png) 当我执行 page.showView(the_ID.ID) 命令时，它看起来像这样：[http://i.imgur .com/BZ8y1.png](http://i.imgur.com/BZ8y1.png)

视图应该出现在左侧，而不是带有所有按钮的菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:44:20.450

使用`org.eclipse.ui.perspectives`扩展点创建一个透视图，然后提供一个实现，`IPerspectiveFactory`允许您定义您创建的命名视图的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T11:36:56.643

创建或获取项目的对象，然后执行以下操作：（仅适用于导航器视图）project.refreshLocal(IResource.DEPTH_INFINITE, null);

# facebook - Facebook API 搜索结果过滤器

> ID：10474843
> 
> 赞同：1
> 
> 时间：2012-05-06T22:33:28.613
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我想允许我的应用程序中的用户按名字搜索他们**不是**朋友的人。

我知道我可以使用此查询对用户进行公开搜索：

```
search?q=mark&type=user 
```

这给了我**所有**用户的名字`mark`，并且与用户不太相关。

我用它来按名字搜索他们**是**朋友的用户：

```
fql?q=
    SELECT uid, name, pic_square 
    FROM user 
    WHERE strpos(lower(name),lower('mark')) >=0 AND 
        uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

我会满足于允许用户使用以下方式搜索他们的朋友的朋友：

```
fql?q=
    SELECT uid, name, pic_square 
    FROM user 
    WHERE strpos(lower(name),lower('mark')) >=0 AND 
        uid IN (SELECT uid2 
                FROM friend 
                WHERE uid1 IN (SELECT uid2 
                               FROM friend 
                               WHERE uid1 = me())) 
```

但不幸的是，这会返回以下错误：

```
{
"message": "(#604) Can't lookup all friends of #####. 
    Can only lookup for the logged in user or the logged in user's friends that 
    are users of your app.", 
"type": "OAuthException", 
"code": 604
} 
```

我理解这个错误。看来我将不得不使用公共搜索。

如何公开搜索隶属于大学 XXX 且名称包含“标记”的所有用户？

*或者是否有人可以通过与特定用户相关的内容来过滤公共搜索？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T01:17:23.683

这似乎有点工作......（它似乎只显示一些朋友或朋友，但我还没弄清楚它是如何过滤它们的）

```
fql?q=
    SELECT uid, name 
    FROM user 
    WHERE strpos(lower(name),lower('mark')) >=0 AND 
        (uid IN (SELECT uid2 
                FROM friend 
                WHERE uid1 = me()) OR 
        (uid IN (SELECT uid2 
                FROM friend 
                WHERE uid1 IN (SELECT uid 
                                FROM user 
                                WHERE uid IN (SELECT uid2 
                                                FROM friend 
                                                WHERE uid1 = me()) AND 
                                                    is_app_user=1)))) 
```

# .net - 为开源项目的源代码控制添加强名称密钥是否存在任何安全问题？

> ID：10474852
> 
> 赞同：16
> 
> 时间：2012-05-06T22:34:47.637
> 
> 标签：.net, security, strongname

给定一个强名称密钥（snk 文件）。将此文件添加到开源项目的源代码控制是否存在任何安全问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-06T23:02:04.077

简单的答案是肯定的和否定的——这取决于您首先对程序集进行强名称签名的目的。

[强名称签名](http://msdn.microsoft.com/en-us/library/h4fa028b%28v=vs.100%29.aspx)的 MSDN 页面很好地总结了这两个目的。

> 强命名为应用程序或组件提供了唯一标识，其他软件可以使用该标识明确引用它。例如，强命名使应用程序作者和管理员能够指定要用于共享组件的精确服务版本。这使得不同的应用程序可以指定不同的版本，而不会影响其他应用程序。此外，您可以使用组件的强名称作为安全证据来建立两个组件之间的信任关系。

任何公开分发的库 (DLL) 都应进行强名称签名，只要它旨在供最终用户使用。（即除非它是实现细节等。）

*我所看到的签名的主要目的往往是出于更多技术原因，包括唯一标识（命名空间有时可能会无意中发生冲突）以及为 GAC 提供程序集。在这种情况下，公开密钥文件没有安全隐患，因为一开始就没有任何打算。不提供信任/来源保证，但唯一标识仍然有效。*MSDN页面主要讨论这个场景；您应该和不应该签署集会的时间；和周围的细节。

*但是，如果您签署程序集是为了进行身份验证——特别是为了向消费者提供程序集来自声明的来源的保证——那么公开的（公开分发的）密钥将完全使此信任模型无效*。也就是说，任何人都可以任意修改您的项目代码，并正确地重建和退出您的程序集，实质上是伪造您的身份。不幸的是，MSDN 页面没有很好地解决这种用法（可能是因为它需要被更广泛地视为安全策略的一部分），但它仍然很重要。

最后，请注意，CLR/.NET 使用两种类型的密钥证书文件对程序集进行签名。正如您所提到的，第一个是 SNK；这是不受密码保护的。第二个是 PFX，它实际上只是 SNK 密钥文件的受密码保护的版本。只要此密码足够安全，*使用您的开源软件分发安全 PFX 就不会出现安全问题*。Visual Studio（和命令行密钥生成实用程序）当然能够创建两者。

# ruby-on-rails-3 - 服务器中的默认红宝石

> ID：10474854
> 
> 赞同：0
> 
> 时间：2012-05-06T22:34:50.240
> 
> 标签：ruby-on-rails-3

在我的服务器中，当我运行时，`ruby -v`我得到：}

```
ruby 1.9.2p290 (2011-07-09 revision 32553) [i686-linux] 
```

但是当我跑步时，`sudo ruby -v`我得到

```
ruby 1.8.7 (2010-01-10 patchlevel 249) [i486-linux] 
```

[我已尝试按照此处](https://stackoverflow.com/questions/1892877/making-ruby-1-9-the-default-ruby-on-ubuntu)的建议设置替代方案，但我收到一条错误消息。我也尝试过[使用 rvm 的默认选项](https://rvm.io/rubies/default)，但也没有用

由于我试图在服务器中执行此操作，因此我没有 root 权限 (su)，因此有些事情我无法尝试。

我可以做些什么来使用 ruby​​ 1.9.2？我收到消息

```
Could not find paperclip-3.0.3 in any of the sources (Bundler::GemNotFound)

Exception class:
PhusionPassenger::UnknownError
and I am sure it is caused by the ruby version. 
```

也许我只需要按照[这里](https://stackoverflow.com/questions/8102095/is-it-possible-to-change-passenger-ruby-version-without-recompiling)的建议设置Passenger的红宝石路径，但我似乎找不到应该设置PassengerRuby的文件vhost

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:41:37.800

经过 8 小时的意图失败，这就是解决它的方法：

我所要做的就是再次配置 Apache/Passenger。

```
rvm use 1.9.2
gem install passenger --pre
passenger-install-apache2-module 
```

按照说明安装apache。然后按照我之前的说明配置文件 apache2.conf。在这里，我粘贴了指令中给出的代码行（并找到了引用 ruby​​1.8 的其他行，所以现在引用 ruby​​ 1.9.2）

然后重新启动apache

```
 sudo apache2ctl restart 
```

感谢[这篇文章](http://blog.phusion.nl/2010/09/21/phusion-passenger-running-multiple-ruby-versions/)，但我不需要按照站点中的建议编辑 vhost 文件（我无法找到），重新安装，添加新行并重新启动 apache 解决了问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T00:28:21.857

您所说的意味着您在服务器上同时拥有 Ruby 1.8.7 和 1.9.2。我敢打赌，如果您比较 PATH 变量

```
echo $PATH 
```

对比

```
sudo echo $PATH 
```

你会看到区别。您可以使用 which 来确定 ruby​​ 的安装位置：

```
which ruby 
```

和

```
sudo which ruby 
```

然后您应该能够更新您的 PATH，或显式调用正确的 Ruby 版本。

鉴于可用的信息，这就是我能提供的所有帮助，但如果你想发布这些信息，我可能会提供更多帮助。如果您可以 sudo，但没有 root 权限，谁可以，他们可以编辑服务器吗？您正在运行共享主机吗？

希望这可以帮助。

# scheme - 从 Scheme 中的列表中删除一个字符

> ID：10474858
> 
> 赞同：2
> 
> 时间：2012-05-06T22:35:32.567
> 
> 标签：scheme, racket

例如

我有一个文件`testing.txt`，内容为

```
read 3 4 
```

考虑

```
(define file(open-input file "testing.txt")) 
```

我想删除`r`in`read`而不是整个单词，我想在没有第一个字符的情况下更新文件`r`，我知道我不能使用它，`cdr file`因为它会删除单词`read`。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:03:33.287

给你的家庭作业一些提示。这将返回一个列表，文件的每一行都作为列表中的字符串：

```
(define lines (file->lines "testing.txt")) 
```

此过程会将输入写入`text`给定的文件`path`，覆盖文件的内容：

```
(define (write-to-a-file path txt)
  (call-with-output-file path
    (lambda (output-port)
      (display txt output-port))
    #:exists 'replace)) 
```

您可以使用过程`string->list`，`list->string`（请参阅[文档](http://docs.racket-lang.org/reference/strings.html)），`car`并`cdr`操作由返回的列表`file->lines`，并使用`write-to-a-file`. 现在，您拥有自己解决问题所需的一切。

# concurrency - 并发连接数、并发用户数和总用户数可以变化吗？

> ID：10474861
> 
> 赞同：0
> 
> 时间：2012-05-06T22:36:04.353
> 
> 标签：concurrency

如果一个 Web 服务器可以处理 5000 个并发连接，这是否会转化为 5000 个并发用户，并且也意味着在任何给定时间最多可以有 5000 个用户在线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:43:39.840

这取决于您如何定义“在线用户”以及系统的工作方式。

对于普通网页，用户仅在下载页面时连接到服务器（如果在服务器上启用了保持活动，则最多需要 15 秒）。

所以如果我去你的网站，用一个小时阅读一个页面的内容，你可能会说我在网站上在线了一个小时，但我真正连接到服务器的时间只有几秒钟。下载页面。我一直没有连接到阅读页面。

所以5000个并发连接，意味着服务器可以同时向5000个客户端发送数据。不再。不少于。

# javascript - 谷歌地图 2 个目的地字段

> ID：10474862
> 
> 赞同：1
> 
> 时间：2012-05-06T22:36:36.133
> 
> 标签：javascript, html, google-maps

我正在创建一个有两个文本框和一个获取方向按钮的网页。按下按钮时，将在两个位置之间追踪路线。这很好用。

问题是：按下按钮一次并输入新位置后，按下按钮时不显示新路线。

这是我的代码的链接：

[http://www.canning.co.nz/Mapping/Code.txt](http://www.canning.co.nz/Mapping/Code.txt)

这是一个工作示例的链接（向您展示我在上面的描述中的意思）：

[http://canning.co.nz/Mapping/directions.html](http://canning.co.nz/Mapping/directions.html)

编辑

我还看到 Gload() 函数是为这两个和来自目标文本框字段的变量设置的函数。因此，在 getDirections() 函数中，我调用了 GLoad() 函数。但是，仍然没有运气。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T22:52:14.600

`gdir`不是全局变量。`function doEnd()`您在with中定义它`var`，这使它成为该函数的本地函数，并且在其他地方不可用。

通过包含创建`gdir`一个全局变量

```
var gdir; 
```

在任何函数之外，然后`doEnd()`通过省略`var`.

您还在不同的上下文中多次使用该变量`search`，并且其中至少一个应该是全局的：at**`search is not defined`**中有一个错误`function searchFunc()`

```
var result=geo.getCache().get(search); 
```

您将需要整理出对该变量名的使用。在不同的函数中使用相同的变量名并不是一个很好的做法，因为当它被定义为本地时，它很容易假设一个全局变量。

# c# - 从 Word Doc 二进制文件中提取文本

> ID：10474864
> 
> 赞同：1
> 
> 时间：2012-05-06T22:36:52.940
> 
> 标签：c#, .net, ms-office

Microsoft 已发布 Office 文件的二进制规范。我需要从.Doc 中提取文本。此页面似乎暗示从 Doc 中提取文本并不难，但我不遵循。

[MS 文档提取](http://msdn.microsoft.com/en-us/library/gg615596.aspx#UnderstandMS_DOC_ExtractText)

这就是我到目前为止所拥有的。
wIdent 和 wFib 的值是错误的。请指出我正确的方向。

```
UInt16 wIdent; // (2 bytes): An unsigned integer that specifies that this is a Word Binary File. This value MUST be 0xA5EC.
UInt16 wFib;   // (2 bytes): An unsigned integer that specifies the version number of the file format used. Superseded by FibRgCswNew.nFibNew if it is present. This value SHOULD<13> be 0x00C1.

using (FileStream fs = File.OpenRead(fileName))
{
    UTF8Encoding utf8 = new UTF8Encoding(true);

    BinaryReader brFile = new BinaryReader(fs);

    wIdent = brFile.ReadUInt16();
    Debug.WriteLine(wIdent.ToString());
    Debug.WriteLine(String.Format("{0:x}", wIdent));  // cfd0  wrong value
    wFib = brFile.ReadUInt16();
    Debug.WriteLine(wFib.ToString());   //  57361  wrong value

    byte[] b = new byte[1024];

    while (brFile.Read(b, 0, b.Length) > 0)
    {
        Debug.WriteLine(utf8.GetString(b));
    }
} 
```

上面显示了大部分文本，但也显示了许多其他内容。

我有通过 OpenXML 工作的 docx。需要的不仅仅是 iFilter，因为它需要半格式化。对文本运行算法以剔除不感兴趣的文档。也用于文档的快速文本，以便他们可以决定是否要下载文件并进行自动编码。

Office 互操作不是一种选择。这是针对服务器的，Microsoft 不建议在该环境中使用 Office 自动化。我们尝试过，但对于我们需要处理的文件量来说并不稳定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T23:31:47.613

NPOI 对读取标准 Word 97-2000 DOC 文件的支持非常有限。

如果你确定了，你也可以尝试将用于导入 OpenOffice 使用的 Word 文件的代码从 Java 转换为 C#（如果你能合理地满足其开源许可证的要求）。Sharpen 工具可用于帮助转换代码。

如果您有时间在用户看到 Word 文件之前对其进行预处理，则可以使用 Office 自动化将 Word 文件转换为 HTML，然后在服务器环境中处理这些文件是轻而易举的事。

另一种选择是**不要**尝试发明自己的阅读器，而是投资于像 Aspose Words (http://www.aspose.com/) 这样的商业图书馆。最后，这很可能是最便宜和最可持续的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-02T18:29:04.817

对于这种情况，建议使用 Toxy。从 Toxy 1.4 开始，同时支持 doc 和 docx。您可以查看 toxy.codeplex.com 了解详细信息。1.4 中对格式的支持不是很好，但我们会在 1.6 中对其进行改进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-09T05:56:36.670

如果这仍然是实际的，我遇到了同样的问题。MS 二进制文件格式对 word (.doc)、excel (.xls)、power point (.ppt) 和所有旧版本都很常见。您应该首先按照[此](http://msdn.microsoft.com/en-us/library/dd942138.aspx)操作来读取二进制文件的 FAT 部分，从中提取您可以读取的 WordDocument 流，正如您已经提到的那样。希望这可以帮助。

# android - 如何添加不成为暂定会议的Android日历事件作为交换？

> ID：10474865
> 
> 赞同：4
> 
> 时间：2012-05-06T22:37:03.017
> 
> 标签：android

我有一个小型应用程序，其中一个功能包括为用户提供当前状态。这会显示给使用我们后端的其他用户，在某些情况下，还应该可以选择将状态与用户的日历同步。

我使用 ICS 日历 API:s 来执行此同步，它与 Google 日历配合得很好。如果用户选择与交换帐户同步，但状态项显示为会议请求，状态为暂定。

由于我对日历的经验有限，我的问题是日历事件应该使用哪些字段以使其显示为常规事件作为交换以及谷歌日历。我直接插入事件，而不使用意图，因为目的是让用户无缝。当前代码如下所示（状态是我的状态数据模型）。

```
ContentResolver cr = getContentResolver();
ContentValues values = new ContentValues();
values.put(CalendarContract.Events.DTSTART, status.StartTimeLocal.getTime());
values.put(CalendarContract.Events.DTEND, status.StopTimeLocal.getTime());
values.put(CalendarContract.Events.TITLE, status.DisplayName);
values.put(CalendarContract.Events.DESCRIPTION, status.Text);
values.put(CalendarContract.Events.AVAILABILITY, CalendarContract.Events.AVAILABILITY_BUSY);
values.put(CalendarContract.Events.STATUS, CalendarContract.Events.STATUS_CONFIRMED);
values.put(CalendarContract.Events.GUESTS_CAN_INVITE_OTHERS, false);
values.put(CalendarContract.Events.HAS_ATTENDEE_DATA, false);
values.put(CalendarContract.Events.CALENDAR_ID, mCalendarId);
values.put(CalendarContract.Events.EVENT_TIMEZONE, "Europe/Stockholm");
Uri uri = cr.insert(CalendarContract.Events.CONTENT_URI, values); 
```

当我尝试在电话日历中手动添加新项目时，它会与交换正确同步，因此似乎可行。但是从我的应用程序中，我很难让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T03:26:36.263

`Calendars.OWNER_ACCOUNT`在 ContentValues 中指定应该可以解决问题。

```
ContentValues values = new ContentValues();
...
values.put(Calendars.OWNER_ACCOUNT, ACCOUNT_NAME); 
```

在插入之前，您的 CONTENT_URI 需要包含 ACCOUNT_NAME 和 ACCOUNT_TYPE

```
Uri contentUri CalendarContract.Calendars.CONTENT_URI
        .buildUpon()
        .appendQueryParameter(Calendars.ACCOUNT_NAME, ACCOUNT_NAME)
        .appendQueryParameter(Calendars.ACCOUNT_TYPE, "com.google")
        .build(); 
```

现在插入：

```
Uri uri = cr.insert(contentUri, values); 
```

# php - MySQL FK 违规导致 mysql_query 在不同主机上返回不同的值

> ID：10474868
> 
> 赞同：1
> 
> 时间：2012-05-06T22:37:38.383
> 
> 标签：php, mysql, foreign-keys

我为本地主机上的数据库设计了一个简单的 Web 界面。在本地主机上，如果我尝试发送 SQL 命令来创建记录，并在其中一个字段中使用了无效的 FK，那么 PHP`mysql_query`返回 false，我让我的 PHP 脚本返回`mysql_error()`当然包含有关 FK 的一些信息我试图违反。

我将整个项目移至我拥有的 HostGator 帐户，并使用完全相同的 SQL 设置脚本创建了数据库表。但是，当我在这里尝试违反 FK 时，`mysql_query`返回 true，因此我的 PHP 脚本就像请求成功一样，当然它没有。

在这两种情况下，都没有将任何内容插入数据库，但由于某种原因，在后一种情况下`mysql_query`返回 true。同样在后一种情况下`mysql_error()`显得空，即使很明显我犯了一个错误。

是否有服务器设置可以控制这个？

谢谢！

编辑：

类似的问题，在远程服务器上，我可以删除具有 FK 依赖项的记录。似乎 hostgator 版本根本没有强制执行参照完整性。:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:07:18.963

正如上面评论中所发布的，这里正确的解决方案是强制我的引擎使用 InnoDB。

# ruby-on-rails - 在 Windows 7 x64 上的任何源中都找不到 linecache19-0.5.13

> ID：10474872
> 
> 赞同：3
> 
> 时间：2012-05-06T22:38:27.877
> 
> 标签：ruby-on-rails, ruby, rubygems

我安装了 Ruby，如果我运行

```
ruby -v 
```

我懂了：

```
ruby 1.9.3p125 (2012-02-16) [i386-mingw32] 
```

如果我在我的应用程序目录中运行

```
rails server 
```

输出：

```
←[31mCould not find multi_json-1.3.2 in any of the sources←[0m
←[33mRun `bundle install` to install missing gems.←[0m 
```

跑步

```
bundle install 
```

出现此错误：

```
Fetching source index for http://rubygems.org/
Could not find linecache19-0.5.13 in any of the sources 
```

有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T23:47:04.350

好像`linecache19-0.5.13`还没有发布。

当前版本是`0.5.12`根据[ruby​​gems.org](http://rubygems.org/gems/linecache19)的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T02:47:36.113

根据上面 user154184 的回复，我使用下面的这些命令让它工作。它基本上从 ruby​​forge 下载 linecache19 的二进制 gem 文件，并使用该二进制 gem 文件安装 gem。

```
> curl -OL http://rubyforge.org/frs/download.php/75414/linecache19-0.5.13.gem
> gem install linecache19-0.5.13.gem 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:34:49.593

跑步`bundle update`为我解决了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T22:15:32.547

请参阅此要点：[https](https://gist.github.com/1848409) : //gist.github.com/1848409 为 ruby​​-debug19 和 1.9.3 等添加正确的依赖项

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T23:12:14.180

你在防火墙后面吗？

你可以通过运行“$ gem install linecache”手动安装“linecache”吗？

如果两者都不起作用，请确保您可以使用“gem”访问互联网。请参阅 gem 的“-p”选项。

# php - 在 IF 语句中取两个不同值的变量

> ID：10474873
> 
> 赞同：1
> 
> 时间：2012-05-06T22:38:34.447
> 
> 标签：php, mysql

是否可以`$variable`在查询时采用不同的值`INSERT`？如果我的陈述是错误的，我怎么能做到这一点。谢谢你。

```
 if(isset($_GET['id'])) {
   $variable = "Foo" ;
  }

  elseif (!isset($_GET['id'])) {
  $variable = "Bar" ;
  }

$sql  = mysql_query("INSERT INTO tbl
             tbl_id, variable
              VALUES('$id', '$variable'"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:40:45.693

不能。任何语言的变量在任何给定时间都只能有一个值。如果你想要两个不同的值，你需要两个不同的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T22:40:57.360

这是有效的，因为 $variable 将被分配给 FOO 或 BAR，然后插入到数据库中。然而，变量 $variable 将只包含 1 个值，具体取决于您的条件语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T22:46:04.597

一个变量一次只能保存一个值，并且在您的代码中它是有效的。如果`id`可用，它将具有`Foo`，否则将具有`Bar`，或者您可以将其写在一行中，如下所示：

```
$variable=isset($_GET['id']) ? 'Foo' : 'Bar'; 
```

然后您可以`$variable`稍后在脚本中使用您的变量。它将包含至少一个值`Foo`或`Bar`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T22:49:11.663

更明确的说法是：

```
 if(isset($_GET['id'])) {
       $my_variable = "Foo" ;
      }
    else{
      $my_variable = "Bar" ;
      } 
```

执行此代码后，您将拥有具有价值的 $my_variable：

`Foo`（如果 id 是通过 GET 方法发送的）或

`Bar`（如果 id 不是通过 GET 方法发送的）

因此，您以后可以在任何地方使用您的变量。

如果要检查变量值，请使用

```
echo $my_variable; 
```

# python - Flask/MySQL WHERE IN 子句不能仅使用一个条目

> ID：10474880
> 
> 赞同：1
> 
> 时间：2012-05-06T22:39:55.327
> 
> 标签：python, mysql, where-clause, flask, where-in

我有一个从复选框获取用户输入并从 MySQL 表中返回相应行的网站。

例如，用户可以选择几种颜色，网站将显示表格中具有该颜色的对象。

问题是当用户只选择一种颜色时，MySQL 查询没有正确创建，我得到一个错误。注意`colors`下面的数组：

所以这有效：

```
import MySQLdb
db = MySQLdb.connect(host="...", user="...", port=..., db="...", passwd="...")
colors = ["red", "blue"]
cursor.execute("SELECT * FROM `objects` WHERE `color` IN %s",(colors,)) 
```

这不会：

```
import MySQLdb
db = MySQLdb.connect(host="...", user="...", port=..., db="...",passwd="...")
colors = ["red"]
cursor.execute("SELECT * FROM `objects` WHERE `color` IN %s", (colors,)) 
```

有没有办法纠正这个问题？现在，我暂时添加了一种虚假的“颜色”（在数据库中没有与之链接的对象），但这显然不是一个理想的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:28:34.903

您可以使用 .join 运算符。

```
colors = ["red", "blue"]
colors = ",".join(colors)

output:'red,blue'

colors = ["red"]
colors = ",".join(colors)

output: 'red' 
```

所以代码看起来像

```
import MySQLdb as mdb
con = mdb.connect('', '','','')
with con:
    cur = con.cursor(mdb.cursors.DictCursor)
    colors = ["red","blue"]
    query = """SELECT * FROM objects where color in (""" + ",".join(colors) + """)
    cur.execute(users_query)
    rows = cur.fetchall() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T12:09:34.833

你应该确认你的 MySQLdb egg 版本，我之前遇到过这个问题，这个库使用 connection.literal(o) 来处理这样的 sql 值：

```
sql = "select * from test where id in %s"
sql_val = [100]
# get connection and cur 
cur.execute(sql, tuple([sql_val]))
# see the last query sql 
cur._last_executed

# version MySQL_python-1.2.3c1-py2.6-linux-x86_64.egg execute exception and the query sql is:
# attention to the last comma after '100' 
select * from test where id in ('100',)

# version MySQL_python-1.2.3c1-py2.6-linux-x86_64.egg execute successfully and the query sql is:
# have no comma after '100' now 
select * from test where id in ('100') 
```

所以，也许你应该将你的 MySQLdb egg 升级到最新版本来修复它。

# python - 布尔运算

> ID：10474882
> 
> 赞同：8
> 
> 时间：2012-05-06T22:39:59.280
> 
> 标签：python, python-2.7

我对 Python 如何评估布尔语句感到困惑。

例如。

```
False and 2 or 3 
```

返回 3

这是如何评估的？我认为 Python 首先查看 'False and 2'，然后返回 False 甚至不查看 'or 3'。Python在这里看到的顺序是什么？

另一个是：

```
1 or False and 2 or 2 and 0 or 0 
```

返回 1

根据我从第一个示例中收集到的信息，我认为 Python 会从左到右进行计算，因此“1 或 False”将返回 1，然后“1 和 2”将返回 2，然后“2 或 2”将返回前 2 ，然后“2 和 0”将返回 0，然后“0 或 0”将返回第二个 0。

如您所知，我在这里很困惑，请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T22:42:36.290

`and`的优先级高于`or`。

```
False and 2 or 3 
```

被评估为

```
((False and 2) or 3) 
```

由于第一部分`(False and 2)`是`False`，Python 必须评估第二部分以查看整个条件是否仍然可以变为`True`。它可以，因为`3`计算结果为`True`所以返回此操作数。

类似的`1 or False and 2 or 2 and 0 or 0`评估为

```
(1 or ((False and 2) or ((2 and 0) or 0))) 
```

由于`1`计算结果为，因此无论其他操作数具有哪个值，`True`整个条件都是 。`True`Python 可以在此时停止计算并再次返回确定最终值的操作数。

在确定最终结果时就停止称为[*短路评估*](http://en.wikipedia.org/wiki/Short-circuit_evaluation)，可描述如下：

每当确定表达式的最终结果时，就会停止计算，并在 Python 中返回确定最终值的操作数的值。也就是说，假设从左到右的评估：

*   对于运算符，计算结果为（或最后一个）`and`的最左边的操作数`False`
*   对于运算符，计算结果为（或最后一个）`or`的最左边的操作数`True`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T22:42:04.177

这里的问题是有一个评估顺序，并且[`and`优先级高于`or`](http://docs.python.org/reference/expressions.html#summary). 因此，它们在这里从左到右进行评估。

鉴于此，`False and 2 or 3`对于 python，它是`(False and 2) or 3`- 所以它的计算结果是`False or True`，然后是`True`。

在您的下一个示例中，Python 短路，因此`1 or False`评估为`True`一样`1`，因此返回`1`. 其余的永远不会被评估。这是有道理的，就好像 an 的一部分`or`是`True`，你知道整个事情一定是 - 那么为什么还要费心做额外的工作呢？

检查这一点的一个好方法是定义打印的函数：

```
>>> def test(x):
...     print("Test: "+str(x))
...     return x
... 
>>> test(1) or test(0) or test(3)
Test: 1
1
>>> test(0) or test(0) or test(3)
Test: 0
Test: 0
Test: 3
3
>>> test(False) and test(2) or test(3)
Test: False
Test: 3
3
>>> test(1) or test(False) and test(2) or test(2) and test(0) or test(0)
Test: 1
1 
```

这样可以很容易地查看评估的内容和顺序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-06T22:42:55.567

查看此页面的第 5.15 节：http: [//docs.python.org/reference/expressions.html](http://docs.python.org/reference/expressions.html)

`or`的优先级低于`and`，因此您的语句被评估为

```
(false and 2) or 3 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-06T22:43:06.540

我在 python 文档页面上读到了这个。如果我找到它，我会发布参考。它在布尔语句中陈述了类似的内容，Python 将返回第一个 True 对象。因此.... the and 被 False 预置为假，但 or 只有一个参数，即 3（真）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-06T22:44:06.860

它是这样评估的：

```
result = (False and 2) or 3 
```

So basically if `False and 2` is true-ish, then it is returned, otherwise `3` is returned.

# delphi - 为什么在 OnChange 事件中调用 Delete 时出现 RichEdit 行插入错误？

> ID：10474883
> 
> 赞同：5
> 
> 时间：2012-05-06T22:40:02.307
> 
> 标签：delphi, delphi-xe2, richedit

我已经搜索并检查了许多地方的解决方案，但我发现的所有案例都不同或涉及比简单添加或删除行更高级的东西。基本上，我想做一种滚动富编辑（替代方法是将插入符号移到底部，我已经找到了解决方案）。

我正在向它添加行并检查富编辑`Lines.Count`的`OnChange`事件，一旦它达到大于 15 的值我想调用`Lines.Delete(0)`，但是我收到错误：

```
RichEdit line insertion error 
```

有人可以告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T00:55:57.063

你得到了`RichEdit line insertion error`因为检查添加到 Delphi 2009 版本。此检查验证新行的插入是否成功，并且此检查使用选择位置。不幸的是，对于以下代码：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  RichEdit1.Clear;
  RichEdit1.Lines.Add('1');
end;

procedure TForm1.RichEdit1Change(Sender: TObject);
begin
  if RichEdit1.Lines.Count > 0 then
    RichEdit1.Lines.Delete(0);
end; 
```

工作流程如下所示：

> ***1\. - TRichEdit.Lines.Add → TRichEdit.Lines.Insert***
> 
> 获取将插入字符串的行的第一个字符的位置，将换行符添加到该字符串，设置选择（0 长度，从行首开始）并通过执行 EM_REPLACESEL 消息插入字符串，除了文本插入，也会改变选择位置。上述检查尚未执行，同时文本插入会触发 OnChange 事件，其中调用 TRichEdit.Lines.Delete。
> 
> ***2\. - TRichEdit.Lines.Delete***
> 
> 删除做类似的事情。它获取已删除行的第一个字符索引，设置选择，现在在整个行长度中，并使用空字符串执行 EM_REPLACESEL 消息。但它当然也改变了选择位置。这就是问题所在，因为我们现在要回到 TRichEdit.Lines.Insert 函数的最后一行。
> 
> ***3\. - TRichEdit.Lines.Add → TRichEdit.Lines.Insert***
> 
> 现在，之前调用 TRichEdit.Lines.Insert 函数的最后一件事还有待完成，邪恶检查仅基于选择位置。由于同时删除位置已更改，因此与预期结果不匹配，您会收到错误消息。

另外，在有人修复这个问题之前，不要使用这个，它会导致同样的错误：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  RichEdit1.Lines.Add('1');
end;

procedure TForm1.RichEdit1Change(Sender: TObject);
begin
  RichEdit1.SelStart := 0;
end; 
```

如果您没有从这个无聊的故事中睡着，那么我建议您尽可能避免对 OnChange 事件中的行进行操作（最好说，只有当您知道会发生什么时）。

# java - 无法构建 EntityManagerFactory - Spring 和 Hibernate

> ID：10474886
> 
> 赞同：2
> 
> 时间：2012-05-06T22:40:16.293
> 
> 标签：java, spring, hibernate, persistence.xml, hibernate-entitymanager

将带有 hibernate3 的 spring 应用程序部署到 glassfish 服务器 3.1.2 时出现以下错误：

```
SEVERE: Exception while loading the app
SEVERE: log4j:ERROR LogMananger.repositorySelector was null likely due to error in class reloading, using NOPLoggerRepository.
SEVERE: Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in URL [file:/home/konrad/NetBeansProjects/webapp/experimental/SpringBar2012_1/SpringWebApp4/target/training/WEB-INF/classes/persistence-context.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: webappPersistenceUnit] Unable to build EntityManagerFactory 
```

这是我的 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
  <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.training.spring</groupId>
  <artifactId>demoWebAppMVC</artifactId>
  <packaging>war</packaging>
  <version>1.0</version>
  <name>SpringWebAppMVC</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>

    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.15</version>
        <exclusions>
            <exclusion>
                <groupId>javax.jms</groupId>
                <artifactId>jms</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jdmk</groupId>
                <artifactId>jmxtools</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jmx</groupId>
                <artifactId>jmxri</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>taglibs</groupId>
        <artifactId>standard</artifactId>
        <version>1.1.2</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-core</artifactId>
        <version>${cxf.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-databinding-aegis</artifactId>
        <version>${cxf.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-frontend-jaxws</artifactId>
        <version>${cxf.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-transports-http</artifactId>
        <version>${cxf.version}</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate</artifactId>
        <version>3.2.5.ga</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.3.2.GA</version>
    </dependency>
    <dependency>
        <groupId>javax.sql</groupId>
        <artifactId>jdbc-stdext</artifactId>
        <version>2.0</version>
    </dependency>
    <dependency>
        <groupId>javax.transaction</groupId>
        <artifactId>jta</artifactId>
        <version>1.0.1B</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>ejb3-persistence</artifactId>
        <version>1.0.1.GA</version>
    </dependency>
    <dependency>
        <groupId>org.apache.derby</groupId>
        <artifactId>derbyclient</artifactId>
        <version>10.8.2.2</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.4</version>
    </dependency>
  </dependencies>
  <build>
    <finalName>training</finalName>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.5</version>
            <configuration>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
    </plugins>
  </build>
  <repositories>
    <repository>
        <url>http://repo1.maven.org/maven2/</url>
        <id>hibernate-support</id>
        <layout>default</layout>
        <name>Repository for library Library[hibernate-support]</name>
    </repository>
    <repository>
        <id>unknown-jars-temp-repo</id>
        <name>A temporary repository created by NetBeans for libraries and jars it could not identify. Please replace the dependencies in this repository with correct ones and delete this repository.</name>
        <url>file:${project.basedir}/lib</url>
    </repository>
  </repositories>
  <properties>
    <netbeans.hint.deploy.server>gfv3ee6</netbeans.hint.deploy.server>
    <cxf.version>2.2.3</cxf.version>
    <spring.version>3.1.1.RELEASE</spring.version>
  </properties>
</project> 
```

这是位于 src/java/resources/META-INF 中的 persistence.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
         version="2.0">
  <persistence-unit name="webappPersistenceUnit" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.DerbyDialect" />
        <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
    </properties>
  </persistence-unit>
</persistence> 
```

这是我位于 src/main/resources 中的 persistence-context.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

  <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
      destroy-method="close">
    <property name="driverClassName" value="org.apache.derby.jdbc.ClientDriver" />
    <property name="url" value="jdbc:derby://localhost:1527/webapp" />
    <property name="username" value="webapp" />
    <property name="password" value="java" />
  </bean>

  <bean id="entityManagerFactory"
      class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceUnitName" value="webappPersistenceUnit" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true" />
            <property name="generateDdl" value="true" />
        </bean>
    </property>
  </bean>

  <bean id="myTxManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
  </bean> 
</beans> 
```

有人可以帮我弄清楚问题可能是什么以及如何解决它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T09:17:58.327

我不是专家，但我会尽力回答你的问题。

首先是您粘贴了错误堆栈跟踪的错误部分。深入挖掘并粘贴此错误的真正原因。

第二件事是您的持久性单元配置表明您将使用 JTA。

```
<persistence-unit name="webappPersistenceUnit" transaction-type="JTA"> 
```

事实上，您还没有指定 JTA 事务管理器。

有两种可能的解决方案：

*   将“事务类型”更改为 RESOURCE_LOCAL，这样就不会使用 JTA
*   将 JTA 事务管理器配置添加到您的应用程序

尝试将**hibernate.transaction.manager_lookup_class**和**jta-data-source**添加到您的持久性单元：

```
<jta-data-source>...</jta-data-source>
<properties>
        ...
        <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.SunONETransactionManagerLookup" />
        ...
</properties> 
```

类似线程：[hibernate、mysql、glassfish v3 和 JTA 数据源](https://stackoverflow.com/questions/2359640/hibernate-mysql-glassfish-v3-and-jta-datasource)

# solr - Solr 和产品 SKU

> ID：10474890
> 
> 赞同：3
> 
> 时间：2012-05-06T22:41:12.627
> 
> 标签：solr

我正在为我的产品 SKU 编写自定义文本字段类型。

如果我有一个 SKU，例如`ABC-DEF123G/5`（只是一个例子），我希望用户能够使用或不使用标点符号进行搜索。在许多情况下，只有 SKU 的一部分是相关的，例如`ABC-DEF123`在我的示例中。

到目前为止，我`schema.xml`看起来像：

```
<fieldType name="sku" class="solr.TextField" omitNorms="false">
    <analyzer>
        <tokenizer class="solr.KeywordTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.WordDelimiterFilterFactory"
            splitOnCaseChange="0"
            splitOnNumerics="0"
            stemEnglishPossessive="0"
            catenateAll="1"
        />
        <filter class="solr.EdgeNGramFilterFactory" minGramSize="3" maxGramSize="15"/>
    </analyzer>
</fieldType>

<!-- For use in Sunspot: -->
<dynamicField name="*_sku" stored="false" type="sku" multiValued="true" indexed="true"/> 
```

这很有效，因为我可以搜索 SKU 的某些部分，例如`DEF123`并获得适当的结果（感谢 ngram 过滤器）。但是，没有标点分隔符的搜索不会返回任何匹配项：`ABC-DEF123G/5`很好但`ABCDEF123G5`不是。

当我对我的架构进行分析时，我看到搜索`ABCDEF123G5`突出显示了匹配项，但是在运行实际查询时没有返回任何结果。

我重新启动了 Solr 并重新索引了我的文档。很多次。

关于索引 SKU 或类似的任何智慧珍珠？

* * *

这位编辑（[aitchnyu](https://stackoverflow.com/users/604511/aitchnyu)）从维基百科添加了这个：

> 库存单位或 SKU 是一个数字或代码，用于识别在商店或其他企业中销售的每个独特产品或项目。
> 
> 它是可以购买的每种不同产品和服务的唯一标识符。SKU 的使用植根于数据管理，使公司能够系统地跟踪其库存或产品可用性，例如在仓库和零售店。它们通常在商家级别分配和序列化。每个 SKU 都附加到一个项目、变体、产品线、捆绑包、服务、费用或附件。SKU 通常用于指代同一产品的不同版本。例如，一家销售吉他英雄 3 游戏的零售店可能有六个 SKU，三个平台各有两个——一个有吉他控制器，一个没有吉他控制器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T02:10:12.453

经过几天的定期玩弄，我终于确定了以下内容：

```
<fieldType name="sku" class="solr.TextField" omitNorms="false">
    <analyzer>
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
        <filter class="solr.NGramFilterFactory" minGramSize="3" maxGramSize="15"/>
    </analyzer>
</fieldType> 
```

这已改编自同事提供的 schema.xml 的默认版本。

**编辑：**

通过更改为边缘 n-gram 和缩短 n-gram 最小长度，进一步提高了相关性。

`<filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="15"/>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T09:51:45.683

您可以将 a`copyField`与两种不同的字段类型一起使用，例如`sku`和`sku_stripped`。

像上面一样定义您的`sku`字段，然后`sku_stripped`使用 a定义`PatternReplaceFilterFactory`：

```
<fieldType name="sku_stripped" class="solr.TextField" omitNorms="false">
    <analyzer>
        <filter class="solr.PatternReplaceFilterFactory"
             pattern="[^A-Za-z0-9]"
             replacement=""
             replace="all"/>
        <!-- same as above ... -->
    </analyzer>
</fieldType> 
```

然后是copyField：

```
<fields>
    <!-- ... -->
    <field name="stripped_sku_field" type="sku_stripped" 
        indexed="true" stored="false" multiValued="true" omitNorms="true"/>
    <!-- ... -->
</fields>
<copyField source="*_sku" dest="stripped_sku_field"/> 
```

# php - 通过ajax替换表单中的输入值

> ID：10474892
> 
> 赞同：0
> 
> 时间：2012-05-06T22:42:02.587
> 
> 标签：php, jquery, mysql

我的表格是这样的。我已将 field_name 和 field_values 保存到 MySQL 表中。

我的数据库中的表是这样的

> **身份证**| **字段名**| **字段值**
> 
> 12 | 字段1 | 示例文本
> 
> 13 | 字段2 | 抄袭

如何将这些值加载到下面的表格中”

我的意思是如何根据表格和在页面加载时使用 jQuery Ajax 的其余字段将 field1 的值更改为“示例文本”？

此表单是通过表单构建器构建的动态生成的。

```
 <form id="form-preview" class="TTWForm" method="post" novalidate="">

      <div id="field1-container" class="field f_100">
           <label for="field1">
                Comments
           </label>
           <textarea rows="5" cols="20" name="field1" id="field1" required="required"></textarea>
      </div>

      <div id="field2-container" class="field f_100 radio-group required">
           <label for="field2-1">
                Level of work
           </label>        

           <div class="option clearfix">
                <input name="field2" id="field2-1" value="Need Revisions" type="radio">
                <span class="option-title">
                     Need Revisions
                </span>
           </div>     

           <div class="option clearfix">
                <input name="field2" id="field2-2" value="Plagiarised" type="radio">
                <span class="option-title">
                     Plagiarised
                </span>
           </div>

           <div class="option clearfix">
                <input name="field2" id="field2-3" value="Archive it" type="radio">
                <span class="option-title">
                     Archive it
                </span>
           </div>
      </div>

      <div id="form-submit" class="field f_100 clearfix submit">
           <input value="Submit" type="submit">
      </div>
 </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:46:46.610

您可以使用 json 编码从 ajax 返回的数据

看看这里：

[使用 jQuery 动态填写表单值](https://stackoverflow.com/questions/558445/dynamically-fill-in-form-values-with-jquery)

# android - 具有颜色和背景图像的按钮

> ID：10474899
> 
> 赞同：9
> 
> 时间：2012-05-06T22:43:21.417
> 
> 标签：android, xml, button, background, background-image

有没有办法为按钮设置颜色*和*背景图像？我想要一个带有透明 .png 的绿色按钮，但似乎你只能拥有一个或另一个。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-06T22:46:55.370

（不要）使用 ImageView

将您的绿色按钮背景图像设置为背景，将透明 png 设置为 src。您可以将选择器应用到背景，就像应用到按钮一样...

**编辑：**实际上已经为此制作了一个[ImageButton](http://developer.android.com/reference/android/widget/ImageButton.html)，您应该改用它。我忘了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-16T02:36:38.180

试试这段代码对我有用:)

```
<ImageButton
android:id="@+id/button5"
style="?android:attr/buttonStyleSmall"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
...
android:src="@drawable/settingbtn"
android:background="@drawable/red_color"
     /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T23:05:49.977

用透明度绘制单独的图像并保存图像。要为按下、聚焦等图像的实例显示不同的图像。使用以下方法。

使用带有背景的图像按钮，如下所示：

```
 `<?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:state_pressed="true"
       android:drawable="@drawable/imagewhenpressed" /> <!-- pressed -->
 <item android:state_focused="true"
       android:drawable="@drawable/imagewhenfocused" /> <!-- focused -->
 <item android:drawable="@drawable/defaultimage" /> <!-- default -->
 </selector>` 
```

**注意：**这里三个图片-imagewhenpressed.png,imagewhenfocused.png & defaultimage.png 和这个xml应该放在drawable目录下。ImageButton 背景应该分配给`filename`这个 xml 像`android:background="@drawable/xmlfilename"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-13T00:48:46.427

改用 a `ImageButton`。

您可以像正常一样设置背景，并在`src`属性中选择图像。`scaleType`如果图像太小或太大，您也可以弄乱该属性。

# .net - 如何在外部应用程序中监听一系列内存地址并使用 ReadProcessMemory 回显结果

> ID：10474903
> 
> 赞同：0
> 
> 时间：2012-05-06T22:44:03.217
> 
> 标签：.net, vb.net, memory, readprocessmemory

谢谢阅读，

我正在玩一个在线游戏，以自学一些关于 ReadProcessMemory API 的知识。

我正在尝试使用游戏内聊天室并将其显示在我的应用程序中。使用应用程序，我能够搜索并找到所需数据的内存地址，但遇到了一些困难。

这是我用来从进程内存中读取的代码：

```
 Dim ProcessToReadFrom As Process = Process.GetProcessesByName("MyGameName")(0)

    'Pass the process to a new instance of our NativeMemoryReader class
    Dim MemoryReader As New NativeMemoryReader(ProcessToReadFrom)
    Dim address_to_read As Integer = Convert.ToInt32("006e3218", 16)
    'Read 400 bytes from some address in the process
    Dim MemoryBytes() As Byte = MemoryReader.ReadMemory(New IntPtr(address_to_read), 400)

    MsgBox("ascii: " & System.Text.Encoding.ASCII.GetString(MemoryBytes).Trim()) 

    MemoryReader.Dispose() 
```

它使用此处显示的 MemoryReader 类：[http ://www.vbforums.com/showthread.php?p=3819578](http://www.vbforums.com/showthread.php?p=3819578)

使用这段代码，我每次都能拉出一行聊天，这就是我的问题

*   数据分布在（006E3218-006E6B46）的许多地址中，从该范围获取所有数据的最佳方法是什么？

非常感谢您花时间阅读本文！

希望你的，

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T20:57:22.093

理想情况下，对目标游戏进行一些逆向工程将帮助您了解游戏实际上如何将聊天消息存储在内存中。也许他们使用固定大小的缓冲区来存储消息，使您能够正确地迭代每条消息。

在您的情况下，我认为该函数`ASCII.GetString`仅解析第一条消息，因为它已由 char 终止`\0`，因此没有理由继续。

您必须创建一个算法，`MemoryBytes`每次找到 char 时将缓冲区拆分为多个数组，然后在每个数组上`\0`调用该函数。`ASCII.GetString`

此外，就速度而言，为每条消息调用 ReadProcessMemory 是相当正确的，并且可以成为阅读消息框的一个很好的解决方案。

# ruby - 如何为带有雾的云文件设置 Cache-Control 标头

> ID：10474905
> 
> 赞同：2
> 
> 时间：2012-05-06T22:44:07.340
> 
> 标签：ruby, rackspace-cloud

我尝试了以下各种组合，但没有一个有效

```
file = dir.files.create(
                        :key    => file_name,
                        :body   => io_obj,
                        :public => true,
                        'Cache-Control' => "max-age=#{(60 * 60 * 24 * 30 * 6).to_s}"
                                ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T23:35:49.257

虽然我没有在 Rackspace Cloud 上对此进行过明确测试，但这是我一直在（成功地）使用 Fog 进行 S3 上传的方法：

```
file = dir.files.create({
  :key    => filename
  :body   => File.open(filename),
  :public => true,
  :metadata => {'Cache-Control' => 'max-age=315576000'}
}) 
```

# android - Android 创建计算器应用程序

> ID：10474908
> 
> 赞同：1
> 
> 时间：2012-05-06T22:44:51.657
> 
> 标签：android, xml, android-layout

我正在尝试创建一个计算器应用程序，但我一直遇到 xml 布局问题。

由于按钮的数量，即使我使用 dp 来确定屏幕之间每个按钮的大小，结果也会有所不同......

我是否应该在 java 中创建布局，以便获得屏幕尺寸？如果可以，我可以举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:53:12.137

您可以设计布局文件，然后使用不同大小的按钮制作几个版本。将它们放在 res/layout-small/、res/layout-large/ 和 res/layout-normal/ 中。系统会根据设备的显示尺寸拉取合适的 xml 文件。

另一种选择是尝试通过在 dp 中指定大小来设计布局，而不是使用`android:layout_weight`并`android:weightSum`实现您想要的比例。然后它应该根据设备自行扩展，而不需要任何不同的 xml 文件。

# heroku - Heroku 启动超时（错误 R10）

> ID：10474911
> 
> 赞同：22
> 
> 时间：2012-05-06T22:45:30.150
> 
> 标签：heroku

每次我启动我的应用程序时，如果没有以下内容，它就无法超过 60 秒点：

```
2012-05-06T22:41:11+00:00 heroku[web.1]: Stopping process with SIGKILL
2012-05-06T22:41:11+00:00 heroku[web.1]: Error R10 (Boot timeout) -> Web process failed to bind to $PORT within 60 seconds of launch
2012-05-06T22:41:11+00:00 heroku[web.1]: Process exited with status 137
2012-05-06T22:41:12+00:00 heroku[web.1]: State changed from starting to crashed 
```

这是我的`Procfile`：

```
web: bundle exec thin start -p $PORT 
```

任何回应将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-14T05:37:19.033

如果您的应用出于“好的”原因确实需要超过 60 秒，您可以使用[https://github.com/dblock/heroku-forward](https://github.com/dblock/heroku-forward)解决 60 秒的启动时间限制。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-04T18:41:36.407

解决方案是我忘记在我的 Procfile 行中包含 -p $PORT 。

在 Procfile 更改中：

```
web: bundle exec thin start 
```

至

```
web: bundle exec thin start -p $PORT 
```

那为我修好了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T21:37:30.593

Heroku 的启动超时也让我感到难过。我阅读了几篇关于如何绕过它的博客文章，最终将一些解决方案自动化成一个 gem。

为了减少部署时的启动时间，您可以修剪在启动时加载的 gem（这并不意味着您必须从应用程序中修剪它们，只需启动时间）。

[gem_bench](https://github.com/acquaintable/gem_bench)评估启动时可能*不需要哪些 gem。*

我有一个包含大约 250 颗宝石的应用程序，并且能够将 :require => false 添加到其中的大约 60 颗宝石中，效果显着。

[https://github.com/acquaintable/gem_bench](https://github.com/acquaintable/gem_bench)

免责声明：我是这个开源 ruby​​ gem 的作者。我编写了 gem 来帮助自己解决这个确切的问题：Heroku 上的 60 秒超时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-14T07:06:18.550

嗨，我遇到了同样的问题。我已经通过增加 /config/unicorn.rb 中的超时时间来解决这个问题，将 /config/unicorn.rb 中的 **超时时间 15 更改为超时 20**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-26T05:53:42.310

在我使用 nodejs 的情况下，我解决了这个添加内容的 Procfile 文件：worker: node index.js 并将其推送到 heroku。之后确保禁用检查“web npm start”并打开检查“worker node index.js”，如下图所示

[herokuResourcesConfig](https://i.stack.imgur.com/sCj6U.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-07T05:31:49.523

在 Heroku 上部署我的 Node 应用程序时，我遇到了同样的错误。

我通过添加 Procfile 解决了它。

```
web: node app.js 
```

它告诉 Heroku 如何启动应用程序。

该错误是因为 Heroku 无法配置在哪个 PORT 上运行应用程序。

可以通过为 Heroku 指定 PORT 来解决，即：在 app.js 中

```
const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
    console.log(`App is running on port ${ PORT }`);
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-02T20:42:13.207

错误 R10（启动超时）是 heroku 的这个隐藏部分，允许您增加部署时间。

[https://tools.heroku.support/limits/boot_timeout](https://tools.heroku.support/limits/boot_timeout)

# objective-c - （目标：对象）不适用于从 viewController 外部设置 UIButton

> ID：10474914
> 
> 赞同：0
> 
> 时间：2012-05-06T22:45:33.490
> 
> 标签：objective-c, cocoa-touch

我可以创建 UIButton。
但是回调：目标：对象在当前对象中不起作用。??
我只能做“self.viewController”对象，不能为当前对象做“self”。

谢谢

* * *

```
#import <Foundation/Foundation.h>
#import "ViewController.h"

@class ViewController;

@interface CGuiSetup : NSObject
{
    @public
    ViewController *viewController;
}
- (void) Setup;
- (void) ButtonRespond:(UIButton*) btn;
@end 
```

* * *

```
#import "CGuiSetup.h"

@implementation CGuiSetup

- (void) ButtonRespond:(UIButton*) btn
{
    NSLog(@"ButtonRespond");
}

- (void) Setup
{

    UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btn setFrame:CGRectMake(10,10,100,100)];

    // But I want to call the following in the CGuiSetup object (self) instead... but it crashes out if I leave it as just "self"
    [btn addTarget:self.viewController action:@selector(ButtonRespond:)
        forControlEvents:UIControlEventTouchUpInside]; //works: for "self.viewController" if I put ButtonRespond in the ViewController

    [btn addTarget:self action:@selector(ButtonRespond:)
        forControlEvents:UIControlEventTouchUpInside]; //fails: for "self"

    [self.viewController.view addSubview:btn];
}
@end 
```

* * *

```
#import <UIKit/UIKit.h>
#import "CGuiSetup.h"

@class CGuiSetup;

@interface ViewController : UIViewController
{
    CGuiSetup *guiSetup; //<---- had to take this out of the "viewDidLoad" method
}
@end 
```

* * *

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    guiSetup = [CGuiSetup alloc];
    guiSetup->viewController = self;

    UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btn setFrame:CGRectMake(10,10,100,100)];
    [btn addTarget:guiSetup action:@selector(ButtonRespond:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:btn];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T00:09:27.290

如果您使用 ARC，是否有任何对象具有对 CGuiSetup 的保留引用？我听起来像 CGuiSetup 被实例化，创建（或者可能从另一个对象接收）viewController，将按钮添加到它，然后将视图控制器提供给另一个对象（可能通过将它推到 navController 上或将其设置为的根控制器应用程序）？不管是什么情况，CGuiSetup 都会被释放，并且按钮正试图向已经被销毁的对象发送消息。CGuiSetup 是如何/在哪里创建的？什么对象保留了对它的引用？这可能就是你的问题所在。

如果您不了解什么是保留/释放和/或您不知道什么是 ARC，则需要阅读 Apple 的内存管理指南：[https ://developer.apple.com/library/mac/#documentation/Cocoa /Conceptual/MemoryMgmt/Articles/MemoryMgmt.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T23:09:00.220

这可能是因为您的对象已被销毁，而 _viewController 的保留计数仍大于 0（因此它没有被销毁）。平衡您保留/释放的数量。

# mysql - 错误 2006 (HY000): MySQL 服务器已消失

> ID：10474922
> 
> 赞同：349
> 
> 时间：2012-05-06T22:46:13.100
> 
> 标签：mysql

当我尝试获取大型 SQL 文件（大型`INSERT`查询）时出现此错误。

```
mysql>  source file.sql
ERROR 2006 (HY000): MySQL server has gone away
No connection. Trying to reconnect...
Connection id:    2
Current database: *** NONE ***

ERROR 2006 (HY000): MySQL server has gone away
No connection. Trying to reconnect...
Connection id:    3
Current database: *** NONE *** 
```

表中的任何内容都没有更新。我试过删除和取消删除表/数据库，以及重新启动 MySQL。这些都不能解决问题。

这是我的最大数据包大小：

```
+--------------------+---------+
| Variable_name      | Value   |
+--------------------+---------+
| max_allowed_packet | 1048576 |
+--------------------+---------+ 
```

这是文件大小：

```
$ ls -s file.sql 
79512 file.sql 
```

当我尝试其他方法时...

```
$ ./mysql -u root -p my_db < file.sql
Enter password: 
ERROR 2006 (HY000) at line 1: MySQL server has gone away 
```

* * *

## 回答 #1

> 赞同：637
> 
> 时间：2012-10-09T04:48:37.440

```
max_allowed_packet=64M 
```

将此行添加到`my.cnf`文件中解决了我的问题。

当列的值很大时，这很有用，这会导致问题，您可以在[此处](http://dev.mysql.com/doc/refman/5.5/en/replication-features-max-allowed-packet.html)找到解释。

> 在 Windows 上，此文件位于：“C:\ProgramData\MySQL\MySQL Server 5.6”
> 
> 在 Linux (Ubuntu) 上：/etc/mysql

* * *

## 回答 #2

> 赞同：181
> 
> 时间：2013-09-24T10:59:08.200

您可以增加最大允许数据包

```
SET GLOBAL max_allowed_packet=1073741824; 
```

[http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_max_allowed_pa​​cket](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_max_allowed_packet)

* * *

## 回答 #3

> 赞同：71
> 
> 时间：2013-12-19T22:14:23.623

由于某种原因，全局更新和 my.cnf 设置对我不起作用。`max_allowed_packet`将值直接传递给客户端在这里工作：

```
mysql -h <hostname> -u username -p --max_allowed_packet=1073741824 <databasename> < db.sql 
```

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2016-06-07T14:32:38.170

一般来说，错误：

> 错误：2006 ( `CR_SERVER_GONE_ERROR`) - MySQL 服务器已消失

意味着**客户端无法向服务器发送问题**。

* * *

### `mysql`进口

在您通过 导入数据库文件的特定情况下`mysql`，这很可能意味着 SQL 文件中的某些查询太大而无法导入，它们无法在服务器上执行，因此客户端在第一次发生错误时失败。

所以你有以下可能性：

*   添加强制选项 ( `-f`)`mysql`以继续并执行其余查询。

    如果数据库有一些与缓存无关的大型查询，这很有用。

*   **`max_allowed_packet``wait_timeout`**在您的服务器配置中**增加****和**`~/.my.cnf`（例如）。

*   使用选项转储数据库`--skip-extended-insert`以分解大型查询。然后再次导入。

*   尝试`--max-allowed-packet`为`mysql`.

* * *

### 常见原因

通常，此错误可能意味着几件事，例如：

*   对服务器的查询不正确或太大，

    解决方案：**增加`max_allowed_packet`变量**。

    *   确保变量在`[mysqld]`section 下，而不是`[mysql]`.

    *   不要害怕使用大量数字进行测试（例如`1G`）。

    *   不要忘记重新启动 MySQL/MariaDB 服务器。

    *   仔细检查该值是否通过以下方式正确设置：

        ```
        mysql -sve "SELECT @@max_allowed_packet" # or:
        mysql -sve "SHOW VARIABLES LIKE 'max_allowed_packet'" 
        ```

*   您从客户端的 TCP/IP 连接超时。

    解决方案：**增加`wait_timeout`变量**。

*   您尝试在关闭与服务器的连接后运行查询。

    解决方案：应更正应用程序中的逻辑错误。

*   主机名查找失败（例如 DNS 服务器问题），或服务器已使用`--skip-networking`选项启动。

    另一种可能性是您的防火墙阻止了 MySQL 端口（例如，默认情况下为 3306）。

*   正在运行的线程已被杀死，因此请重试。

*   您遇到了服务器在执行查询时死机的错误。

*   在不同主机上运行的客户端没有必要的连接权限。

*   还有更多，请在以下位置了解更多信息：[B.5.2.9 MySQL 服务器已消失](http://dev.mysql.com/doc/refman/5.7/en/gone-away.html)。

* * *

### 调试

以下是一些专家级的调试想法：

*   检查日志，例如

    ```
    sudo tail -f $(mysql -Nse "SELECT @@GLOBAL.log_error") 
    ```

*   `mysql`通过或`telnet`ping 函数（例如[`mysql_ping`](http://php.net/manual/en/function.mysql-ping.php)在 PHP 中）测试您的连接。

*   用于`tcpdump`嗅探 MySQL 通信（不适用于套接字连接），例如：

    ```
    sudo tcpdump -i lo0 -s 1500 -nl -w- port mysql | strings 
    ```

*   在 Linux 上，使用`strace`. 在 BSD/Mac 上使用`dtrace`/ `dtruss`，例如

    ```
    sudo dtruss -a -fn mysqld 2>&1 
    ```

    请参阅：[DTracing MySQL 入门](https://dev.mysql.com/tech-resources/articles/getting_started_dtrace_saha.html)

了解更多如何调试 MySQL 服务器或客户端：[26.5 调试和移植 MySQL](http://dev.mysql.com/doc/refman/5.7/en/porting.html)。

作为参考，请检查[`sql-common/client.c`](https://github.com/mysql/mysql-server/blob/a533e2c786164af9bd276660b972d93649434297/sql-common/client.c#L1267)文件中负责为`CR_SERVER_GONE_ERROR`客户端命令引发错误的源代码。

```
MYSQL_TRACE(SEND_COMMAND, mysql, (command, header_length, arg_length, header, arg));
if (net_write_command(net,(uchar) command, header, header_length,
          arg, arg_length))
{
  set_mysql_error(mysql, CR_SERVER_GONE_ERROR, unknown_sqlstate);
  goto end;
} 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2016-09-02T02:46:32.037

`ERROR 2006 (HY000) at line 97: MySQL server has gone away`我通过按顺序执行以下两个步骤解决了错误并成功迁移了 >5GB 的 sql 文件：

1.  按照其他人的建议创建 /etc/my.cnf ，内容如下：

    ```
    [mysql]
    connect_timeout = 43200
    max_allowed_packet = 2048M
    net_buffer_length = 512M
    debug-info = TRUE 
    ```

2.  将标志附加`--force --wait --reconnect`到命令（即`mysql -u root -p -h localhost my_db < file.sql --verbose --force --wait --reconnect`）。

重要说明：必须执行这两个步骤，因为如果我不费心对 /etc/my.cnf 文件进行更改以及附加这些标志，则导入后会丢失一些表。

使用的系统：OSX El Capitan 10.11.5；mysql Ver 14.14 Distrib 5.5.51 for osx10.8 (i386)

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2014-08-03T03:53:43.443

以防万一，要检查您可以使用的变量

```
$> mysqladmin variables -u user -p 
```

这将显示当前变量，在本例中为 max_allowed_pa​​cket，正如有人在另一个答案中所说，您可以使用临时设置它

```
mysql> SET GLOBAL max_allowed_packet=1072731894 
```

在我的情况下，cnf 文件没有被考虑在内，我不知道为什么，所以 SET GLOBAL 代码真的很有帮助。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2016-05-27T12:44:37.980

您也可以以 root（或 SUPER 权限）身份登录数据库并执行

```
set global max_allowed_packet=64*1024*1024; 
```

也不需要重启 MySQL。请注意，您应该`my.cnf`按照其他解决方案中的说明修复文件：

```
[mysqld]
max_allowed_packet=64M 
```

并在重启 MySQL 后确认更改：

```
show variables like 'max_allowed_packet'; 
```

您也可以使用命令行，但这可能需要更新启动/停止脚本，这些脚本可能无法在系统更新和补丁程序中继续存在。

*根据要求，我在这里添加我自己的答案。*很高兴看到它有效！

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2015-10-25T21:39:44.850

解决方案是在标签下增加选项文件中给定的值`wait_timeout`和参数。`connect_timeout``[mysqld]`

我必须恢复一个 400MB 的 mysql 备份，这对我有用（我在下面使用的值有点夸张，但你明白了）：

```
[mysqld]
port=3306
explicit_defaults_for_timestamp = TRUE
connect_timeout = 1000000
net_write_timeout = 1000000
wait_timeout = 1000000
max_allowed_packet = 1024M
interactive_timeout = 1000000
net_buffer_length = 200M
net_read_timeout = 1000000
set GLOBAL delayed_insert_timeout=100000 
```

> 块引用

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2013-10-18T14:15:47.373

我遇到了同样的问题，但是在 [mysqld] 下的 my.ini/my.cnf 文件中更改 max_allowed_pa​​cket 就成功了。

添加一行

```
max_allowed_packet=500M 
```

完成后，现在重新启动 MySQL 服务。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2012-05-06T23:13:22.313

这里可能会发生几件事；

*   您`INSERT`的运行时间很长，客户端正在断开连接。当它重新连接时，它没有选择数据库，因此出现错误。这里的一种选择是从命令行运行批处理文件，并在参数中选择数据库，如下所示；

> $ mysql db_name < source.sql

*   另一种是通过`php`或其他语言运行您的命令。在每个长时间运行的语句之后，您可以关闭并重新打开连接，以确保您在每个查询开始时都已连接。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2016-04-05T06:12:25.110

如果您在 Mac 上并像我一样通过 brew 安装了 mysql，则以下操作有效。

1.  `cp $(brew --prefix mysql)/support-files/my-default.cnf /usr/local/etc/my.cnf`

资料来源：[对于自制 mysql 安装，my.cnf 在哪里？](https://stackoverflow.com/questions/7973927/for-homebrew-mysql-installs-wheres-my-cnf)

2.  添加`max_allowed_packet=1073741824`到`/usr/local/etc/my.cnf`

3.  `mysql.server restart`

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-01-29T11:07:56.860

我在使用Mysql Cluster时遇到了这个错误，我不知道这个问题是不是来自集群使用。由于错误完全相同，所以在这里给出我的解决方案。收到此错误是因为数据节点突然崩溃。但是当节点崩溃时，你仍然可以使用 cmd 得到正确的结果：

```
ndb_mgm -e 'ALL REPORT MEMORYUSAGE' 
```

而且 mysqld 也可以正常工作。所以起初，我不明白出了什么问题。大约 5 分钟后，ndb_mgm 结果显示没有数据节点工作。然后我意识到了问题。因此，尝试重新启动所有数据节点，然后 mysql 服务器又回来了，一切正常。

但是有一点对我来说很奇怪，在我丢失 mysql 服务器进行一些查询后，当我使用 cmd like 时`show tables`，我仍然可以获得 like 的返回信息`33 rows in set (5.57 sec)`，但没有显示表信息。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-02-19T10:19:12.113

当您使用与转储中使用的不同的 COLLATION 创建 SCHEMA 时，也会出现此错误消息。所以，如果转储包含

```
CREATE TABLE `mytab` (
..
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

您还应该在 SCHEMA 排序规则中反映这一点：

```
CREATE SCHEMA myschema COLLATE utf8_unicode_ci; 
```

我一直在架构中使用 utf8mb4_general_ci，因为我的脚本来自全新的 V8 安装，现在在旧 5.7 上加载数据库崩溃了，让我几乎发疯。

所以，也许这可以帮助你节省一些令人沮丧的时间...... :-)

（MacOS 10.3，mysql 5.7）

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2021-07-06T12:42:04.047

**我在 XAMMP 中遇到了同样的问题**

***Metode-01：***我在文件中更改了 max_allowed_pa`D:\xampp\mysql\bin\my.ini`，如下所示：

**max_allowed_pa​​cket=500M**

最后重新启动一次 MySQL 服务就完成了。

***方法02：***

如果您使用 XAMPP，则更简单的方法。打开 XAMPP 控制面板，然后单击 mysql 部分中的配置按钮。
[![在此处输入图像描述](../Images/9a4610faa99570e96050f4e383205e51.png)](https://i.stack.imgur.com/KEfT9.png)

现在单击 my.ini，它将在编辑器中打开。将 max_allowed_pa​​cket 更新为您需要的大小。

[![在此处输入图像描述](../Images/4d25c07b7e97394b5e40dfc33a2e6632.png)](https://i.stack.imgur.com/6GMz8.png)

然后重启mysql服务。单击 Mysql 服务上的停止，再次单击启动。等待几分钟。 [![在此处输入图像描述](../Images/66fae81901397aa1aa59532a4a35ee37.png)](https://i.stack.imgur.com/IKCOv.png) [![在此处输入图像描述](../Images/227db17f5e5c155c9860f8cddbc3ddf3.png)](https://i.stack.imgur.com/hyxJ9.png)

然后尝试再次运行您的 Mysql 查询。希望它会奏效。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-05-07T01:37:05.297

如果它正在重新连接并获得连接 ID 2，则服务器几乎肯定刚刚崩溃。

联系服务器管理员并让他们诊断问题。任何非恶意 SQL 都不应该使服务器崩溃，mysqldump 的输出当然也不应该。

可能是服务器管理员犯了一些重大的操作错误，例如分配的缓冲区大小大于体系结构的地址空间限制，或者大于虚拟内存容量。MySQL 错误日志可能会有一些相关信息；如果他们有能力，他们将对此进行监控。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-01-16T20:46:38.693

这是一个更罕见的问题，但如果有人复制了整个 /var/lib/mysql 目录作为将他们的数据库迁移到另一台服务器的一种方式，我已经看到了这一点。它不起作用的原因是数据库正在运行并使用日志文件。如果 /var/log/mysql 中有日志，有时它不起作用。解决方案是也复制 /var/log/mysql 文件。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-01-26T15:17:43.173

对于 amazon RDS（这是我的情况），您可以将`max_allowed_packet`参数值更改为以字节为单位的任何数值，这对于您可能拥有的任何插入中的最大数据有意义（例如：如果您的插入中有一些 50mb 的 blob 值，请设置`max_allowed_packet`到 64M = 67108864)，在新的或现有的`parameter-group`. 然后将该参数组应用于您的 MySQL 实例（可能需要重新启动实例）。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-09-27T12:42:30.270

对于寻找数据库导入失败解决方案的 Drupal 8 用户：

在 sql 转储文件的末尾，可以命令将数据插入“webprofiler”表。那是我猜一些调试日志文件，对于站点工作并不重要，因此可以删除所有这些。我删除了所有这些插入，包括 LOCK TABLES 和 UNLOCK TABLES（以及介于两者之间的所有内容）。它位于 sql 文件的最底部。此处描述了问题：

[https://www.drupal.org/project/devel/issues/2723437](https://www.drupal.org/project/devel/issues/2723437)

但是除了截断该表之外，没有其他解决方案。

顺便说一句，我尝试了上面答案中的所有解决方案，但没有其他帮助。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-11-27T10:17:32.997

我已经尝试了以上所有解决方案，都失败了。

我最终使用`-h 127.0.0.1`而不是使用 default `var/run/mysqld/mysqld.sock`。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-01-07T00:01:27.133

如果您尝试过所有这些解决方案，尤其是。增加到`max_allowed_packet`支持的最大数量`1GB`并且您仍然看到这些错误，这可能是您的服务器实际上没有足够的可用 RAM 内存...

解决方案 = 将您的服务器升级到更多 RAM 内存，然后重试。

注意：我很惊讶这个简单的解决方案在这个线程讨论了 8 年多之后没有被提及......有时我们开发人员倾向于过度思考事情。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-12-03T08:11:34.120

添加`max_allowed_packet=64M`到`[mysqld]`

```
[mysqld] 
max_allowed_packet=64M 
```

重新启动 MySQL 服务器。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-12-06T13:17:10.633

消除触发警告的错误是我的最终解决方案。我还更改了 max_allowed_pa​​cket，它有助于处理有错误的较小文件。消除错误也令人难以置信地加快了进程。

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2013-11-08T10:15:28.483

如果这些答案都不能解决您的问题，我通过删除表并以这种方式自动重新创建它们来解决它：

```
when creating the backup, first backup structure and be sure of add:
DROP TABLE / VIEW / PROCEDURE / FUNCTION / EVENT
CREATE PROCEDURE / FUNCTION / EVENT
IF NOT EXISTS
AUTO_INCREMENT 
```

然后只需将此备份与您的数据库一起使用，它将删除并重新创建您需要的表。

然后你只备份数据，做同样的事情，它会起作用。

* * *

## 回答 #24

> 赞同：-3
> 
> 时间：2012-05-06T23:11:42.187

像这样使用mysql客户端怎么样：

```
mysql -h <hostname> -u username -p <databasename> < file.sql 
```

# c# - 无法在 C++/CLI 中处理 AccessViolationException

> ID：10474923
> 
> 赞同：0
> 
> 时间：2012-05-06T22:46:14.990
> 
> 标签：c#, webkit, interop, c++-cli, access-violation

我对 C++/CLI 不是很熟悉，但我很久以前做过一些 C++。我正在尝试在项目内部的方法中调试`AccessViolationException`我在 WebKit.NET 中的内容。这是导致异常的代码行：`JSContext::EvaluateScript``JSCore`

```
JSValueRef result = NULL;

try
{
    result = JSEvaluateScript(_context, jsScript, /*(JSObjectRef)jsObj*/NULL, NULL, 0, &exception);
}
catch(...)
{
} 
```

此错误将随机发生。我知道`_context`并且`jsScript`不为空。奇怪的是，当错误发生时，Program.cs 文件打开并且异常出现在`Application.Run(new Form1());`带有 a 的行上`TargetInvocationException`，但我可以在 IntelliTrace 中看到，在此`AccessViolationException`之前，在上面引用的行之前发生了这种情况，所以我假设这是导致该异常的异常`TargetInvocationException`。

`result = JSEvaluateScript...`另外，如果我在上面的行中设置了一个断点（一。此外，`JSEvaluateScript`在`WebKit`dll 内，所以我无法进入它。

但是，`try/catch`最初不存在的 似乎没有捕捉到异常，所以我不确定发生了什么。我可以通过在我的应用程序中执行一组操作来重现错误，但无法理解为什么这些操作会导致错误。大多数时候`JSContext::EvaluateScript`使用相同的参数调用不会导致异常。

有关如何诊断此问题的任何建议？我没主意了。

**编辑：**我只是做了更多的调试，错误也可能发生在其他一些随机行。所以我很确定与上面的行无关。

**编辑2：**这是堆栈跟踪：

```
>   JSCore.dll!WebKit.JSCore.JSContext.EvaluateScript(string script = {unknown}, object thisObject = {unknown}, string sourceUrl = {unknown}, int startingLineNumber = {unknown})   
    JSCore.dll!WebKit.JSCore.JSContext.EvaluateScript(string script = {unknown})    
    WebKitBrowserTest.exe!Player.WebKitWraps.JSObjectWrap.GetExpando()  
    WebKitBrowserTest.exe!Get Player.WebKitWraps.JSObjectWrap.Expando() 
    WebKitBrowserTest.exe!Player.WebKitWraps.JSObjectWrap.Equals(Player.WebKitWraps.JSObjectWrap other = {Player.WebKitWraps.ElementWrap})  
    WebKitBrowserTest.exe!Player.WebKitWraps.JSObjectWrap.op_Equality(Player.WebKitWraps.JSObjectWrap a = {Player.WebKitWraps.ElementWrap}, Player.WebKitWraps.JSObjectWrap b = {Player.WebKitWraps.ElementWrap})   
    WebKitBrowserTest.exe!Player.WebKitWraps.JSObjectWrap.op_Inequality(Player.WebKitWraps.JSObjectWrap a = {Player.WebKitWraps.ElementWrap}, Player.WebKitWraps.JSObjectWrap b = {Player.WebKitWraps.ElementWrap}) 
    WebKitBrowserTest.exe!WebScraperAndPlayer.SelectionEditor.SelectPrevSibling(WebScraperAndPlayer.BrowserSelector selector = {WebScraperAndPlayer.BrowserSelector})   
    WebKitBrowserTest.exe!WebScraperAndPlayer.SelectionEditor.WillSelectAny(System.Action<WebScraperAndPlayer.BrowserSelector> selectFunction = {System.Action<WebScraperAndPlayer.BrowserSelector>})   
    WebKitBrowserTest.exe!WebScraperAndPlayer.SelectionEditor.UpdateAbilities() 
    WebKitBrowserTest.exe!WebScraperAndPlayer.SelectionEditor.SetExecutionState(Player.Actions.ExecutionState value = Stopped)  
    WebKitBrowserTest.exe!Set WebScraperAndPlayer.SelectionEditor.ExecutionState(Player.Actions.ExecutionState value = Stopped) 
    mscorlib.dll!System.RuntimeMethodHandle.InvokeMethodFast(System.IRuntimeMethodInfo method = {unknown}, object target = {unknown}, object[] arguments = {unknown}, System.Signature sig = {unknown}, System.Reflection.MethodAttributes methodAttributes = {unknown}, System.RuntimeType typeOwner = {unknown})  
    mscorlib.dll!System.Reflection.RuntimeMethodInfo.Invoke(object obj = {unknown}, System.Reflection.BindingFlags invokeAttr = {unknown}, System.Reflection.Binder binder = {unknown}, object[] parameters = {unknown}, System.Globalization.CultureInfo culture = {unknown}, bool skipVisibilityChecks = {unknown})   
    mscorlib.dll!System.Reflection.RuntimeMethodInfo.Invoke(object obj = {unknown}, System.Reflection.BindingFlags invokeAttr = {unknown}, System.Reflection.Binder binder = {unknown}, object[] parameters = {unknown}, System.Globalization.CultureInfo culture = {unknown})  
    mscorlib.dll!System.Reflection.MethodBase.Invoke(object obj = {unknown}, object[] parameters = {unknown})   
    System.dll!System.SecurityUtils.MethodInfoInvoke(System.Reflection.MethodInfo method = {unknown}, object target = {unknown}, object[] args = {unknown}) 
    System.dll!System.ComponentModel.ReflectPropertyDescriptor.SetValue(object component = {unknown}, object value = {unknown}) 
    System.Windows.Forms.dll!System.Windows.Forms.Binding.SetPropValue(object value = {unknown})    
    System.Windows.Forms.dll!System.Windows.Forms.Binding.PushData(bool force = {unknown})  
    System.Windows.Forms.dll!System.Windows.Forms.Binding.PushData()    
    System.Windows.Forms.dll!System.Windows.Forms.BindingManagerBase.PushData(out bool success = {unknown}) 
    System.Windows.Forms.dll!System.Windows.Forms.BindingManagerBase.PushData() 
    System.Windows.Forms.dll!System.Windows.Forms.PropertyManager.OnCurrentChanged(System.EventArgs ea = {unknown}) 
    System.Windows.Forms.dll!System.Windows.Forms.BindToObject.PropValueChanged(object sender = {unknown}, System.EventArgs e = {unknown})  
    System.dll!System.ComponentModel.PropertyDescriptor.OnValueChanged(object component = {unknown}, System.EventArgs e = {unknown})    
    System.dll!System.ComponentModel.ReflectPropertyDescriptor.OnValueChanged(object component = {unknown}, System.EventArgs e = {unknown}) 
    System.dll!System.ComponentModel.ReflectPropertyDescriptor.OnINotifyPropertyChanged(object component = {unknown}, System.ComponentModel.PropertyChangedEventArgs e = {unknown}) 
    WebKitBrowserTest.exe!Player.Project.BasicProject.NotifyPropertyChanged(string propertyName = "ExecutionState") 
    WebKitBrowserTest.exe!Player.Project.BasicProject.SetInternalExecutionState(InternalExecutionState value = Stopped) 
    WebKitBrowserTest.exe!Player.Project.BasicProject.execData_ExecutionCompleted(object sender = {Player.Actions.ExecutionData}, Player.Actions.ExecutionCompletedEventArgs e = {Player.Actions.ExecutionCompletedEventArgs})  
    WebKitBrowserTest.exe!Player.Actions.ExecutionData.OnExecutionCompleted(Player.Actions.ExecutionCompletedEventArgs e = {Player.Actions.ExecutionCompletedEventArgs})    
    WebKitBrowserTest.exe!Player.Actions.ExecutionData.ReportExecutionCompleted(Player.Actions.StopException exception = null)  
    WebKitBrowserTest.exe!Player.Actions.Executor.ProcessExecutionCompleted(Player.Actions.StopException exception = null)  
    WebKitBrowserTest.exe!Player.Actions.Executor.StartNextSegment()    
    WebKitBrowserTest.exe!Segment.Conclude()    
    WebKitBrowserTest.exe!<>c__DisplayClass5.AnonymousMethod()  
    WebKitBrowserTest.exe!Player.Actions.Waiter.OnCallbackFunction()    
    WebKitBrowserTest.exe!Player.Actions.Waiter.Complete()  
    WebKitBrowserTest.exe!Player.Actions.Waiter.AnonymousMethod()   
    mscorlib.dll!System.RuntimeMethodHandle.InvokeMethodFast(System.IRuntimeMethodInfo method = {unknown}, object target = {unknown}, object[] arguments = {unknown}, System.Signature sig = {unknown}, System.Reflection.MethodAttributes methodAttributes = {unknown}, System.RuntimeType typeOwner = {unknown})  
    mscorlib.dll!System.Reflection.RuntimeMethodInfo.Invoke(object obj = {unknown}, System.Reflection.BindingFlags invokeAttr = {unknown}, System.Reflection.Binder binder = {unknown}, object[] parameters = {unknown}, System.Globalization.CultureInfo culture = {unknown}, bool skipVisibilityChecks = {unknown})   
    mscorlib.dll!System.Delegate.DynamicInvokeImpl(object[] args = {unknown})   
    mscorlib.dll!System.Delegate.DynamicInvoke(object[] args = {unknown})   
    System.Windows.Forms.dll!System.Windows.Forms.Control.InvokeMarshaledCallbackDo(ThreadMethodEntry tme = {unknown})  
    System.Windows.Forms.dll!System.Windows.Forms.Control.InvokeMarshaledCallbackHelper(object obj = {unknown}) 
    mscorlib.dll!System.Threading.ExecutionContext.runTryCode(object userData = {unknown})  
    mscorlib.dll!System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext executionContext = {unknown}, System.Threading.ContextCallback callback = {unknown}, object state = {unknown}) 
    mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext = {unknown}, System.Threading.ContextCallback callback = {unknown}, object state = {unknown}, bool ignoreSyncCtx = {unknown}) 
    mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext = {unknown}, System.Threading.ContextCallback callback = {unknown}, object state = {unknown}) 
    System.Windows.Forms.dll!System.Windows.Forms.Control.InvokeMarshaledCallback(ThreadMethodEntry tme = {unknown})    
    System.Windows.Forms.dll!System.Windows.Forms.Control.InvokeMarshaledCallbacks()    
    System.Windows.Forms.dll!System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m = {unknown})   
    System.Windows.Forms.dll!System.Windows.Forms.ScrollableControl.WndProc(ref System.Windows.Forms.Message m = {unknown}) 
    System.Windows.Forms.dll!System.Windows.Forms.ContainerControl.WndProc(ref System.Windows.Forms.Message m = {unknown})  
    System.Windows.Forms.dll!System.Windows.Forms.Form.WndProc(ref System.Windows.Forms.Message m = {unknown})  
    System.Windows.Forms.dll!ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m = {unknown})  
    System.Windows.Forms.dll!ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m = {unknown})    
    System.Windows.Forms.dll!System.Windows.Forms.NativeWindow.DebuggableCallback(System.IntPtr hWnd = {unknown}, int msg = {unknown}, System.IntPtr wparam = {unknown}, System.IntPtr lparam = {unknown})  
    System.Windows.Forms.dll!ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(System.IntPtr dwComponentID = {unknown}, int reason = {unknown}, int pvLoopData = {unknown})   
    System.Windows.Forms.dll!ThreadContext.RunMessageLoopInner(int reason = {unknown}, System.Windows.Forms.ApplicationContext context = {unknown}) 
    System.Windows.Forms.dll!ThreadContext.RunMessageLoop(int reason = {unknown}, System.Windows.Forms.ApplicationContext context = {unknown})  
    System.Windows.Forms.dll!System.Windows.Forms.Application.Run(System.Windows.Forms.Form mainForm = {unknown})   
    WebKitBrowserTest.exe!WebScraperAndPlayer.Program.Main(string[] args = {string[0]}) 
```

# objective-c - 如何在 Objective C 中初始化 NSMutableArray？

> ID：10474934
> 
> 赞同：15
> 
> 时间：2012-05-06T22:49:08.090
> 
> 标签：objective-c, nsmutablearray

我来自 Java 背景，正在学习 Objective C。我正在尝试创建一个具有字符串数组和成员函数来修改数组的类。我的代码如下所示：

```
@implementation TAWChapter

@synthesize mSubject;

@synthesize mItems;

- (id) init{
    self.mItems = [[NSMutableArray alloc] init];
    return self; 
}

- (void) setSubject:(NSString *)subject{
    self.mSubject = subject; 
}

- (void) addItem:(NSString *)item{
    [self.mItems addObject:@"asdf"]; 
}

@end 
```

这没有用。我有一个`"[__NSArrayI addObject:]: unrecognized selector sent to instance "`和一个`"NSInvalidArgumentException"`。在互联网上搜索后，我将构造函数中的单行更改为：

```
self.mItems = [self.mItems init]; 
```

它奏效了，但为什么呢？从 Java 开发人员的角度来看，第一个比第二个更有意义。而且我还有另一行，它与第一行相同，但它正在工作（不在构造函数中）。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-06T23:20:00.213

1.  首先，您应该遵守 Objective-C 编码约定。在 Objective-C 中，类没有构造器，它们有初始化器。在 Objective-C 中，初始化器调用超类的初始化器，所以它应该是这样的：

    ```
    - init
    {
        self = [super init];
        if (!self) return nil;

        // set up other stuff here 

        return self;
    } 
    ```

2.  其次，除非您使用 ARC，否则您可能会遇到内存泄漏。初始化程序的第一行将您拥有的对象分配给也可能获得所有权的属性。你应该使用：

    ```
    // property takes care of ownership
    self.mItems = [NSMutableArray array]; 
    ```

    或者：

    ```
    // assign to instance variable directly with owned object
    mItems = [[NSMutableArray alloc] init]; 
    ```

    Apple 有时不鼓励在初始化程序中使用访问器方法，因为它可能会摆弄 KVO 之类的东西，但一致地使用访问器方法可以确保正确的对象所有权和内存管理。

3.  通过将初始化程序中的行更改为：

    ```
    self.mItems = [self.mItems init]; 
    ```

    什么**都不**做。当你的初始化方法被调用时（通常是在它被分配之后），所有的实例变量都被自动设置为 nil。所以你正在做的只是：

    ```
    self.mItems = [nil init]; 
    ```

    这只是：

    ```
    self.mItems = nil; 
    ```

    并且，不要在`init`没有先分配实例的情况下使用，并且不要`init`多次使用。

4.  如果您不让超类自行初始化，那么它可能会在其他方面表现为问题。进行**构建和分析**并确保您已修复分析器指出的任何问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-06T23:05:34.923

由于objective-c 是c 的超集，它基本上是带有一些“OO”语法糖的c。在您可以创建（或使用！）一个对象之前，您必须在堆中为其分配空间。你用`[Class alloc]`. 下一步是对该空间的初始化。alloc 返回指向堆中该空间的指针，您使用 init 对其进行初始化；）

所以你打电话`Class *myObjc = [[Class alloc] init];`。

如果您使用继承（因为您从 NSOBject 继承，您就这样做了），您必须确保您的超类正确初始化了所有内容，这就是对 super 的调用。为确保您不会收到运行时错误，请检查 self != nil，您使用 if(self) 隐式执行此操作

```
self.mItems = [self.mItems init]; // doesn't do anything, since you call the getter for mItems with self.mItems and try to init. then you try to set mItmes to itself. 
```

使用此代码：

```
@implementation TAWChapter

@synthesize mSubject, mItems;

- (id)init
{
    self = [super init];
    if (self) {
        mItems = [[NSMutableArray alloc] init];
    }
    return self;
}

- (void) setSubject:(NSString *)subject{
    mSubject = subject; 
}

- (void) addItem:(NSString *)item{
    [mItems addObject:item]; 
}

@end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-06T23:02:07.897

您应该在您的方法中调用`super`并将其结果分配给：`self``init`

```
- (id)init
{
    self = [super init];
    if (self) {
        self.mItems = [[NSMutableArray alloc] init];
    }
    return self;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-15T23:30:25.923

另一种方法是从 NSArray 创建 NSMutableArray：

```
NSMutableArray *myMutableArray = [NSMutableArray arrayWithArray:myArray]; 
```

# iphone - iScroll 无法在 iPhone 上滚动

> ID：10474936
> 
> 赞同：0
> 
> 时间：2012-05-06T22:49:09.853
> 
> 标签：iphone, cordova, iscroll

我正在开发一个 phonegap 应用程序并尝试使用 iScroll 4 在我的页面上滚动。它在网络上运行良好，但是当我在设备/模拟器上测试时，滚动不能顺利运行。当我触摸设备屏幕时，它已经点击了我的 li 元素，如果我向下滚动，它看起来不像滚动条。

这是我从 iScroll 网站获取的脚本：

```
function onDeviceReady(){

var myScroll;
    function loaded() {
       myScroll = new iScroll('wrapper');
    }

    document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);

    document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200); }, false);

    document.addEventListener('DOMContentLoaded', loaded, false);

} 
```

这是我的列表样式的样子：

```
<div id="wrapper">
<div id="scroller">

            <ul id="thelist">
                <li>
                    <div class="item">
                        <div class="arrow"></div>
                        <div class="score"><a href="#">98 <span>score</span></a></div>
                        <div class="job-title">Expert UI/UX Designer</div>
                        <div class="detail">
                            at <span>Hewlett Packpard</span> - 30 connections
                        </div>
                        <div>
                            <a href="#" class="button-arrow"></a>
                        </div>
                    </div>
                </li>
            </ul>
    </div>
</div> 
```

我认为一切都是正确的，看看实时页面： [http ://rodrigoparra.com/bright/pages/dashboard.html](http://rodrigoparra.com/bright/pages/dashboard.html)

这里是同一应用程序上的 iScroll 示例： [http ://rodrigoparra.com/bright/simple/index.html](http://rodrigoparra.com/bright/simple/index.html)

如果您在您的设备上进行测试，您会看到第一个无法正常工作，而第二个可以正常工作。不知道出了什么问题：\

关于如何解决它的任何想法？

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T07:49:35.020

嗨，据我所知，您需要设置滚动视图内容大小。

# php - 存储单个值的最佳文件类型，用于多次访问：

> ID：10474938
> 
> 赞同：0
> 
> 时间：2012-05-06T22:49:13.490
> 
> 标签：php

我需要从数据库中获取一个值并将其存储在服务器上的一个文件中，该文件可以被多个文件和用户访问。

数据将始终为 2 位整数值。

我的想法是 .txt、.ini、.xml，但我是这方面的专家，哪种文件类型可以提供速度、可靠性并且易于在 php 中动态更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T22:50:08.840

如果它只是一个数字，那么没有理由使用除了纯文本之外的特殊文件格式（例如`txt`，甚至根本没有扩展名）。

# android - GoogleMaps 创建了一个不适用于我的应用的 md5

> ID：10474941
> 
> 赞同：1
> 
> 时间：2012-05-06T22:50:23.863
> 
> 标签：android, google-maps

我真的很讨厌这样做。我会尽量弄清楚我在做什么。我在 Eclipse 中右键单击我的应用程序，然后转到 android 工具 > 导出签名的应用程序包。它弹出一个窗口。我看到我接下来点击的应用名称。密钥库选择> 创建新> C:\AndroidApp\MapKey> 为其创建密码点击下一步。密钥创建> 创建我的别名。假设 mapalias> 给它与密钥库相同的密码。给它 1000 的有效期> 插入我的名字。接下来打。目的地和密钥/证书检查> C:\AndroidApp\MyGoogleMaps.apk > 点击完成。之后我打开cmd，我在Windows 7上。我输入> keytool -list -v -alias mapalias -keystore C:\AndroidApp\MapKey -storepass mypass -keypass mypass。它生成我需要的 md5 代码。我去网站注册md5代码。获取我需要在我的 android:apiKey="ofhsjfjfjmmmmmdnjjffmmf" 上使用的代码。在模拟器和我的手机上运行它。我得到一个没有地图的灰色屏幕。有一些我想念的东西……如果可以的话，请帮忙。请说清楚。我是新人。

```
<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.CALL_PHONE"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <activity
        android:name=".main"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity 
        android:name=".National"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Yorgeys"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Coupons"
        android:label="@string/app_name"
        ></activity>

    <activity 
        android:name=".MainPlant"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".NER"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Store7"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Store13"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".NWR"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Store10"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Store9"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".NNR"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".YIN"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".YWR"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Store35"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Store37"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Store12"
        android:label="@string/app_name"
        ></activity>
    <uses-library android:name="com.google.android.maps" />
    <activity 
        android:name=".Nav6"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Num6"
        android:label="@string/app_name"
        ></activity>
    <uses-library android:name="com.google.android.maps" />
    <activity 
        android:name=".Nav7"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Num7"
        android:label="@string/app_name"
        ></activity>
    <uses-library android:name="com.google.android.maps" />
    <activity 
        android:name=".Nav13"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Num13"
        android:label="@string/app_name"
        ></activity>
    <uses-library android:name="com.google.android.maps" />
    <activity 
        android:name=".Nav10"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Num10"
        android:label="@string/app_name"
        ></activity>
    <uses-library android:name="com.google.android.maps" />
    <activity 
        android:name=".Nav9"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Num9"
        android:label="@string/app_name"
        ></activity>
    <uses-library android:name="com.google.android.maps" />
    <activity 
        android:name=".Nav8"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Num8"
        android:label="@string/app_name"
        ></activity>
    <uses-library android:name="com.google.android.maps" />
    <activity 
        android:name=".Nav36"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Num36"
        android:label="@string/app_name"
        ></activity>
    <uses-library android:name="com.google.android.maps" />
    <activity 
        android:name=".Nav35"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Num35"
        android:label="@string/app_name"
        ></activity>
    <uses-library android:name="com.google.android.maps" />
    <activity 
        android:name=".Nav37"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Num37"
        android:label="@string/app_name"
        ></activity>
    <uses-library android:name="com.google.android.maps" />
    <activity 
        android:name=".Nav12"
        android:label="@string/app_name"
        ></activity>
    <activity 
        android:name=".Num12"
        android:label="@string/app_name"
        ></activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:25:17.877

在模拟器中运行时，应用程序使用调试密钥库，因此您需要使用其 MD5。使用您的 myMap 密钥库生成的 apiKey 用于**签名的 apk**，如果您签署了 apk，它将在手机上运行，​​如果您签署了 apk，它将在模拟器**上**`adb install`运行

 **希望有帮助**

# php - 使用 PHP 连接数据库时出错

> ID：10474942
> 
> 赞同：-2
> 
> 时间：2012-05-06T22:50:32.980
> 
> 标签：php, mysql

我尽我最大的努力从不使用 php，因此我并不精通它我遇到了一个我根本不明白的问题我尝试了很多事情，包括不包括 /config 更改中的表引用从 localhost 作为 mysql 主机等。

这可能是非常明显的事情，但我只是没有发现它！我不言而喻，所有的数据库凭据都是完全正确的（我可以从 scala 和 python 很好地连接它）anway 这是错误（真正的用户名/密码不存在 OFC）

> 致命错误：未捕获的异常 'PDOException' 带有消息 'SQLSTATE[42000] [1044] 用户'username'@'10.1.1.43' 拒绝访问 /home/a5555413/public_html/drive/auth_handler 中的数据库 'a5555413_AudioPl.users'' .php:153 堆栈跟踪：#0 /home/a5555413/public_html/drive/auth_handler.php(153): PDO->__construct('mysql:host=mysq...', 'username...', 'passwd ') #1 /home/a5555413/public_html/drive/auth_handler.php(74): AuthHandler->GetDbConnection() #2 /home/a5555413/public_html/drive/index.php(47): AuthHandler->AuthHandler(' webui') #3 {main} 在第 153 行的 /home/a5555413/public_html/drive/auth_handler.php 中抛出

const 的连接代码在单独的配置文件中定义

```
function GetDbConnection() {
    $dbh = new PDO(Config::DB_PDO_CONNECT,
        Config::DB_PDO_USER,
        Config::DB_PDO_PASSWORD);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $dbConnection = $dbh;
    return $dbConnection;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T22:53:39.427

拒绝访问意味着您使用了错误的用户名/密码，和/或您访问的帐户未在 MySQL 中正确创建。

什么`show grants for username@10.1.1.43`节目？

如果您创建了帐户`username@machinename`并且 MySQL 无法进行反向 DNS 查找以将您的 IP 更改回机器名，您也会收到此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T09:57:25.267

检查以下内容：

1) 您输入了正确的数据库主机名（这并不总是 localhost）、用户名和密码？2）用户对数据库有权限。

如果您不知道如何检查，请告诉我。

# delphi - TBitmap.Create 在 delphi 控制台应用程序中不起作用

> ID：10474943
> 
> 赞同：11
> 
> 时间：2012-05-06T22:50:41.543
> 
> 标签：delphi, delphi-xe2

我需要使用控制台应用程序处理一组 bmp 文件，我正在使用 TBitmap 类，但由于此错误，代码无法编译

```
E2003 Undeclared identifier: 'Create' 
```

此示例应用程序重现了该问题

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
 System.SysUtils,
 Vcl.Graphics,
 WinApi.Windows;

procedure CreateBitMap;
Var
  Bmp  : TBitmap;
  Flag : DWORD;
begin
  Bmp:=TBitmap.Create; //this line produce the error of compilation
  try
    //do something
  finally
   Bmp.Free;
  end;
end;

begin
  try
    CreateBitMap;

  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

为什么这段代码不能编译？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-06T22:58:33.907

问题在于您的 uses 子句的顺序，WinApi.Windows 和 Vcl.Graphics 单元有一个称为 TBitmap 的类型，当编译器发现一个*模棱两可* 的类型时，使用存在的使用列表的最后一个单元来解析类型。在这种情况下，使用指向[BITMAP](http://msdn.microsoft.com/en-us/library/dd183371%28v=vs.85%29.aspx) WinAPi 结构的 Windows 单元的 TBitmap 来解决此问题，将单元的顺序更改为

```
uses
 System.SysUtils,
 WinApi.Windows,
 Vcl.Graphics; 
```

或者您可以像这样使用完整的限定名声明类型

```
procedure CreateBitMap;
Var
  Bmp  : Vcl.Graphics.TBitmap;
  Flag : DWORD;
begin
  Bmp:=Vcl.Graphics.TBitmap.Create;
  try
    //do something
  finally
   Bmp.Free;
  end;
end; 
```

# r - xts合并内存性能

> ID：10474948
> 
> 赞同：1
> 
> 时间：2012-05-06T22:51:47.107
> 
> 标签：r, memory, merge, xts

我正在尝试提高以下示例的内存性能：

基线 df 4 行

```
df <- structure(list(sessionid = structure(c(1L, 2L, 3L, 4L), .Label = 
c("AAA1", "AAA2","AAA3", "AAA4"), class = "factor"), bitrateinbps = c(10000000,
 10000000, 10000000, 10000000), startdate = structure(c(1326758507, 1326758671, 
1326759569, 1326760589), class = c("POSIXct", "POSIXt"), tzone = ""), enddate = 
structure(c(1326765780, 1326758734, 1326760629, 1326761592), class = c("POSIXct", 
"POSIXt"), tzone = "")), .Names = c("sessionid", "bitrateinbps", "startdate", 
"enddate"), row.names = c(NA, 4L), class = 
"data.frame") 
```

用 8 行替换 df

```
df <- structure(list(sessionid = structure(c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L), 
.Label = c("AAA1", "AAA2", "AAA3", "AAA4", "AAA5", "AAA6", "AAA7", "AAA8"),
 class = "factor"), bitrateinbps =c(10000000,  10000000, 10000000, 10000000, 
10000000, 10000000, 10000000, 10000000), startdate = structure(c(1326758507,
1326758671, 1326759569, 1326760589, 1326761589, 1326762589, 1326763589, 1326764589), 
class = c("POSIXct", 
"POSIXt"), tzone = ""), enddate = structure(c(1326765780, 1326758734, 1326760629, 
1326761592, 1326767592, 
1326768592, 1326768700, 1326769592), class = c("POSIXct", "POSIXt"), tzone = "")), 
.Names = c("sessionid", 
"bitrateinbps", "startdate", "enddate"), row.names = c(NA, 8L), class = 
"data.frame") 
```

尝试 df 分析内存使用情况，然后再次尝试备用 df

```
library(xts)

fun0 <- function(i, d) {  
 idx0 <- seq(d$startdate[i],d$enddate[i],1)    # create sequence for index  
 dat0 <- rep(1,length(idx0))  # create data over sequence  
xts(dat0, idx0, dimnames=list(NULL,d$sessionid[i]))  # xts object  
}

# loop over each row and put each row into its own xts object
xl0 <- lapply(1:NROW(df), fun0, d=df)

# merge all the xts objects  
xx0 <- do.call(merge, xl0)

# apply a function (e.g. colMeans) to each 15-minute period  
xa0 <- period.apply(xx0, endpoints(xx0, 'minutes', 15), colSums, na.rm=TRUE)/900  
xa1 <- t(xa0) 

# convert from atomic vector to data frame  
xa1 = as.data.frame(xa1)

# bind to df  
out1 = cbind(df, xa1)

# print aggregate memory usage statistics  
print(paste('R is using', memory.size(), 'MB out of limit', memory.limit(), 'MB'))

# create function to return matrix of memory consumption  
object.sizes <- function()  
{  
 return(rev(sort(sapply(ls(envir=.GlobalEnv), function (object.name)  
  object.size(get(object.name))))))  
}

# print to console in table format  
object.sizes() 
```

结果如下：

```
4 row df:  
xx0 = 292104 Bytes .... do.call(merge, xl0)  
xl0 = 154648 Bytes .... lapply(1:NROW(df), fun0, d=df)  

8 row df:  
xx0 = 799480 Bytes .... do.call(merge, xl0)  
xl0 = 512808 Bytes .... lapply(1:NROW(df), fun0, d=df) 
```

我正在为`merge`and`lapply`函数寻找内存效率更高的东西，因此如果有人有任何建议并可以显示替代方案的比较结果，我可以扩展行数。

# php - 面向对象的 PHP 返回数据库行并访问数组元素

> ID：10474949
> 
> 赞同：0
> 
> 时间：2012-05-06T22:51:49.027
> 
> 标签：php, mysql, arrays, oop, return

我是面向对象 PHP 概念的新手（按照 www.killerphp.com 上的教程），我计划将我所有的 php 应用程序迁移到 OO PHP。我开始构建我的第一个类，它根据方法*"setSecurity()"设置的**"where"*
条件 中的对象属性从数据库中读取授权级别。

 **我设法返回了数组*“getSecurity()”*，但打印输出会给出：

```
security Object
(
    [secArray] => Array
        (
            [from_date1] => 1992-01-01
            [to_date1] => 0000-00-00
            [from_date2] => 1992-01-01
            [to_date2] => 0000-00-00
            [view] => 1
            [insert] => 0
            [update] => 1
            [delete] => 1
            [valid] => 1
        )

)
/*"Array 1"*/ 
```

我的问题是我不熟悉普通数组的打印输出（如下）。

```
Array
(
    [from_date1] => 1992-01-01
    [to_date1] => 0000-00-00
    [from_date2] => 1992-01-01
    [to_date2] => 0000-00-00
    [view] => 1
    [insert] => 0
    [update] => 1
    [delete] => 1
    [valid] => 1
)
/*"Array 2"*/ 
```

我的问题是：1）如何从 getSecurity() 方法（来自数组 1）访问我的数组元素？
2) 如何让我的方法正确返回数组（与数组 2 相同）？

代码片段如下。

非常感谢您的任何支持...

'test.php'

```
<?php
include("connect.php");  
include("security.php");
$secArray=new security();
$secArray->setSecurity('test_user',1,1,1,$link);
$secArray->getSecurity();
echo "<pre>"; print_r($secArray); echo "</pre>";
?> 
```

'安全.php'

```
<?php
class security
{
    public $secArray = array();

    function setSecurity($user,$appid,$funid,$objid,$conn='')
    {
        $query="SELECT lu.DATE1 as from_date1,
                    lu.DATE2 as to_date1,
                    ga.DATE1 as from_date2,
                    ga.DATE2 as to_date2,
                    ga.VIEW as view,
                    ga.INSERT as insert,
                    ga.UPDATE as update,
                    ga.DELETE as delete,
                    ob.VALID as valid
                FROM
                    user as lu
                    inner join group as ug on lu.GRP_ID = ug.ID
                    inner join privileges as ga on lu.GRP_ID = ga.GRP_ID
                    and ug.ID = ga.GRP_ID
                    inner join level1 as ob on ob.APP_ID = ga.APP_ID
                    and ob.FUN_ID = ga.FUN_ID
                    and ob.ID = ga.OBJ_ID
                where
                    USERID = '$user'
                and ga.APP_ID = $appid
                and ga.FUN_ID = $funid
                and ga.OBJ_ID = $objid";
        $result = mysql_query($query,$conn);
        $row = mysql_fetch_assoc($result);
        $this->secArray=$row;
    }

    function getSecurity()
    {
        return $this->secArray;
    }     
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:31:17.127

getter 返回一个值，因此调用`$secArray->getSecurity();`并不能真正帮助您，除非您对返回的值执行某些操作。`$mySecurity=$secArray->getSecurity();` `use $mySecurity...`

请阅读有关访问数组和对象的 PHP 文档。**

# html - 使用 Svg 绘制形状，然后使用缓动/弹性等进行动画处理

> ID：10474950
> 
> 赞同：0
> 
> 时间：2012-05-06T22:52:03.853
> 
> 标签：html, svg

我正在尝试找出在我的网站上为图形元素设置动画的最佳方法。

我查看了 html5 画布，但似乎 SVG 是最合适的。

我会解释事情应该如何运作，也许你们可以给出你的意见。

在页面上，我想让我的产品在用户选择箭头时滑入和滑出，一次只有一个产品在中心。当图像滑入和滑出时，我想要某种缓和。SVG 是否有不同的动画风格，如弹性等...？还是我应该只使用 jquery 来制作动画？

接下来，每个产品都会有一个描述，该描述将包含在一个形状中。也许形状会随机绘制，所以我需要一个绘图 api。我也希望这个容器有类似的缓动，因为它会滑入。

我真的很困惑 svg 如何与其他 Web 技术集成。

编辑：

是否可以为 svg 多边形的点设置动画？

```
<svg id="svgelem2" height="190" xmlns="http://www.w3.org/2000/svg">
<polygon  points="0,0 800,0, 800,180 0,180 " fill="white" filter="url(#dropshadow)" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:14:04.133

听起来你想要这样的东西：[http](http://svg-wow.org/photoAlbum/album.svg) ://svg-wow.org/photoAlbum/album.svg将鼠标放在底部的图像上，它们会缓入并展开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T01:09:16.150

您可以使用 javascript，但在 javascript 之上，您需要在 DOM 中操作一些东西：直接使用 HTML 或 SVG，或者包装在两者之一中的东西。

有几个流行的库要么基于画布（[paper.js](http://paperjs.org/)，[processing.js](http://processingjs.org/)），要么基于 SVG（[d3](http://d3js.org/)，[raphael](http://raphaeljs.com/)）。我的理解是，如果您希望您的最终产品可用于尽可能多的平台（所有当前版本的顶级浏览器、顶级浏览器的最后三个版本以及主要的移动设备） - 您需要坚持使用基于画布的库。并非所有浏览器都同样好地支持 SVG，或者根本不支持（当然，[维基百科对此有一些很好的信息](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics#Support_for_SVG_in_web_browsers):)）。

[如果你用路径渲染 SVG](http://mbostock.github.com/d3/ex/voronoi.html) （你可以用路径做多边形，用路径），动画绝对是可能的......我相信你可以用 SVG 多边形来做，但我找不到一个现成的例子。

就个人而言，我*喜欢*d3.js，但我知道它不会渲染/动画到画布 - 但是，paper.li 和 processing.js 会渲染到画布或 raphael 到[VML](http://en.wikipedia.org/wiki/Vector_Markup_Language) ......所以如果接触最广泛的观众是担心，你可能想走那条路。

此[浏览器](http://caniuse.com/svg)对 SVG 的支持表可能对您做出决定有所帮助/提供信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T22:53:52.053

您是否尝试过 Raphael.js 库。它允许您随意操作 SVG。

[http://raphaeljs.com/](http://raphaeljs.com/)

# redirect - 如何从两个不同的 url 重定向到一个 URL？（见下面的代码）

> ID：10474953
> 
> 赞同：1
> 
> 时间：2012-05-06T22:52:46.063
> 
> 标签：redirect, asp-classic, vbscript

我想创建一个从两个不同的 url 重定向到一个 URL 的重定向。我希望这个问题有一个简单的答案，我实际上已经提供了我在下面使用的示例代码，只是想知道我是否可以在下面的代码中添加另一个 URL，也许可以使用“else if”语句......谢谢您的帮助

```
<%@ Language=VBScript %>
<%
servername = Request.ServerVariables("HTTP_HOST")
if trim(Request.ServerVariables("HTTP_HOST")) = "levi.com" or 
trim(Request.ServerVariables("HTTP_HOST")) = "levis.com" then

url = "http://www.timoloud.com/"
Response.Status = "301 Moved Permanently"
Response.AddHeader "Location", url
Response.End
end if
%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<script language="Javascript">
function redirect() {
    window.location.href = 'http://www.levi.com/timoloud.com';
}
</script>
</head>
<body onload="redirect();">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:41:48.650

使用`Select Case`语句可能更容易做到这一点。

```
Select Case Request.ServerVariables("HTTP_HOST")
    Case "levi.com", "levis.com", "other.com", "another.com"
        url = "http://www.timoloud.com/"
        Response.Status = "301 Moved Permanently"
        Response.AddHeader "Location", url
End Select 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T07:34:47.727

我不太清楚，但我想你想要这样的东西

```
<%@ Language=VBScript %> 
<% 
servername = Request.ServerVariables("HTTP_HOST")
redirectedUrls = "/levi.com/levis.com/"
if instr(redirectedUrls,"/" & servername & "/") then
  url = "http://www.timoloud.com/" 
  Response.Status = "301 Moved Permanently" 
  Response.AddHeader "Location", url 
  Response.End 
end if 
%> 
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 
<html> 
<head> 
<script language="Javascript"> 
  function redirect() { 
    window.location.href = 'http://www.<%=servername%>/timoloud.com'; 
  } 
</script> 
</head> 
<body onload="redirect();"> 
</body> 
</html> 
```

# python - 计算给定 html 标记具有的 css 样式属性

> ID：10474955
> 
> 赞同：2
> 
> 时间：2012-05-06T22:53:02.990
> 
> 标签：python, html, css, parsing

我想知道如何计算给定 html 标记具有哪些 css 样式属性，以及给定 css 样式表。我正在考虑类似于使用 xpath 来选择 html 节点，但使用选择器来选择 css 属性的东西。我发现的所有搜索都是 css 解析器，但我想不出一种方法（如果有的话）来做我用他们解释过的事情。如果不可能，是否有可以做到这一点的 python 库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:58:41.520

好吧，因为 css 样式属性具有您可以执行的明确格式..

```
var styleValues = $("selector").attr('style').split(';') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:40:40.147

尝试模式：[http ://www.clips.ua.ac.be/pages/pattern-web#DOM](http://www.clips.ua.ac.be/pages/pattern-web#DOM)

# django - Django 管理员，多对多字段，多个重复条目

> ID：10474959
> 
> 赞同：0
> 
> 时间：2012-05-06T22:53:24.550
> 
> 标签：django, django-models, django-admin, many-to-many

我有一种情况，我正在尝试为作曲家创建一个快速简便的管理界面，以列出一段音乐中的乐器。我正在寻找的是一个单一的实体，一个仪器，它定义了仪器的特定组合。例如，萨克斯四重奏可能包括：

1.  高音萨克斯
2.  中音萨克斯
3.  中音萨克斯
4.  中音萨克斯

但它也可能由两个中音、男高音和巴里 instread 组成。当您尝试添加整个部分（例如 1st violins -- 多达 18 个成员）时，问题会变得更糟。

我想出的初始模型如下所示：

```
class Work(Post):
    authors = models.ManyToManyField(Individual)
    title = models.CharField(max_length=255)
    subtitle = models.CharField(max_length=255, blank=True)
    program_notes = models.TextField(blank=True)
    notes = models.TextField(blank=True)
    media = models.ManyToManyField('Upload')

class Composition(Work):
    instrumentation = models.ForeignKey('Instrumentation')

class Instrumentation(models.Model):
    forces = models.ManyToManyField(Instrument)
    types = models.ManyToManyField('InstrumentationType')

class InstrumentationType(models.Model):
    type = models.CharField(max_length=255)
    variation = models.SmallIntegerField(default=0)
    created = models.DateTimeField(auto_now_add=True)
    modified = models.DateTimeField(auto_now=True) 
```

我计划稍后将作品中的每个乐器映射到排练、音乐会等中的表演者，所以我需要的不仅仅是简单的计数。如果我在没有 django 的情况下执行此操作（即只有 SQL 和数据库设计），我将有一个映射表

仪器仪表：

*   id (int serial PK),
*   类型（FK），
*   composition_id (FK),
*   仪器 ID (FK)

看起来 Django 正在数据库中为我创建这种确切的情况，但由于某种原因，框架需要`type`，`composition_id`并且`instrument_id`是唯一的。管理界面（多选框）也清楚地表明，拥有多个相似条目并不是设计多对多字段的工作方式。那么我该如何实现呢？是否有既定的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:18:43.887

[这个问题](https://stackoverflow.com/questions/1253023/relationships-in-django-admin)的选择答案解决了它。我需要明确定义映射表，然后使用管理内联功能来修复接口。

**模型.py：**

```
class Instrumentation(models.Model):
    forces = models.ManyToManyField(Instrument, through='InstrumentationForces')
    types = models.ManyToManyField('InstrumentationType')

class InstrumentationForces(models.Model):
    instrument = models.ForeignKey(Instrument)
    instrumentation = models.ForeignKey(Instrumentation) 
```

**管理员.py：**

```
class InstrumentInline(admin.TabularInline):
    model = InstrumentationForces
    extra = 3

class InstrumentationAdmin(admin.ModelAdmin):
    filter_horizontal = ('types',)
    inlines = (InstrumentInline,)
admin.site.register(Instrumentation, InstrumentationAdmin) 
```

# java - 需要在 JTextArea 中实时更新

> ID：10474963
> 
> 赞同：1
> 
> 时间：2012-05-06T22:53:43.997
> 
> 标签：java, multithreading, swing, jtextarea

我试图在复制这些照片时更新这个`JTextArea`，称为`textArea`，但我似乎无法让它工作。我正在使用这段代码：

```
String name = "";
    int numberOfPicturesCopied = 0;
    while (pictures.isEmpty() == f) {
        try {
            File tmp = pictures.firstElement();
            name = tmp.getName();
            String filename = destination + Meta.date(tmp) + tmp.getName();
            Path source = tmp.toPath();
            File destFile = new File(filename);
            Path destination = destFile.toPath();
            Files.copy(source, destination,
                    StandardCopyOption.COPY_ATTRIBUTES);
            textArea.append("Copied " + name + "\n");
            pictures.removeElementAt(0);
            numberOfPicturesCopied++;
        } catch (FileAlreadyExistsException faee) {
            textArea.append("Skipped " + name
                    + ": Picture Already In Computer\n");
        } catch (NoSuchFileException ncfe) {
            File tmp = pictures.firstElement();
            String filename = destination + Meta.date(tmp);
            File newDir = new File(filename);
            newDir.mkdir();
        } catch (IOException ee) {
            // TODO Auto-generated catch block
            ee.printStackTrace();
        }
    } 
```

然后我把它改成这样：

```
public void copyPictures(){
    SwingUtilities.invokeLater(new Thread(){
        public void run(){
            String name = "";
            while(pictures.isEmpty() == f){
                try {
                    File tmp = pictures.firstElement();
                    name = tmp.getName();
                    String filename = destination + Meta.date(tmp) + tmp.getName();
                    Path source = tmp.toPath();
                    File destFile = new File(filename);
                    Path destination = destFile.toPath();
                    Files.copy(source, destination, StandardCopyOption.COPY_ATTRIBUTES);
                    textArea.append("Copied " + name + "\n");
                    pictures.removeElementAt(0);
                    numberOfPicturesCopied++;
                } catch(FileAlreadyExistsException faee){
                    textArea.append("Skipped " + name +": Picture Already In Computer\n");
                } catch (NoSuchFileException ncfe){
                    File tmp = pictures.firstElement();
                    String filename = destination + Meta.date(tmp);
                    File newDir = new File(filename);
                    newDir.mkdir();
                } catch (IOException ee) {
                    // TODO Auto-generated catch block
                    ee.printStackTrace();
                }
            }
        }
    });
} 
```

以同样的结果。有什么建议么？

另外，有没有办法让文本进入文本区域的顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:29:24.467

如何在开头插入文本已经得到解答。您问题的另一部分与往常一样......您正在事件调度线程上执行繁重的工作，该线程不再能够执行重绘。

您应该做的是在工作线程上执行繁重的工作，并且只更新 EDT 上的 UI。例如，您可以使用`SwingWorker`专为此设计的 a 。或者更简单，采用您当前的代码并进行一些简单的修改

```
public void copyPictures(){
    new Thread(){
        public void run(){
            while(pictures.isEmpty() == f){
                try {
                    File tmp = pictures.firstElement();
                    final String name = tmp.getName();
                    String filename = destination + Meta.date(tmp) + tmp.getName();
                    Path source = tmp.toPath();
                    File destFile = new File(filename);
                    Path destination = destFile.toPath();
                    Files.copy(source, destination, StandardCopyOption.COPY_ATTRIBUTES);

                    SwingUtilities.invokeLater( 
                      new Runnable(){
                       public void run(){
                        textArea.append("Copied " + name + "\n");
                       }
                      }
                    );                    

                    pictures.removeElementAt(0);
                    numberOfPicturesCopied++;
                } catch(FileAlreadyExistsException faee){
                    textArea.append("Skipped " + name +": Picture Already In Computer\n");
                } catch (NoSuchFileException ncfe){
                    File tmp = pictures.firstElement();
                    String filename = destination + Meta.date(tmp);
                    File newDir = new File(filename);
                    newDir.mkdir();
                } catch (IOException ee) {
                    // TODO Auto-generated catch block
                    ee.printStackTrace();
                }
            }
        }
    }.run();
} 
```

看看工作是如何在单独`Thread`的但在 EDT 上更新的 UI 上完成的。更多信息可以在[Swing Concurrency 教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)或 SO 上找到（搜索的关键字是`SwingWorker`，这将导致大量示例，因为这是一个日常问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T01:16:29.807

不知道你在问什么，标题似乎是说文本没有更新，但你的问题似乎表明它没有被插入到你想要的位置......

如果是后者，请改用插入方法

```
 textArea.insert("Copied " + name + "\n",0); 
```

将其放在文本区域的顶部。

# unix - 使用 UNIX 系统调用固定并行进程

> ID：10474964
> 
> 赞同：1
> 
> 时间：2012-05-06T22:53:46.780
> 
> 标签：unix, process, parallel-processing, fork, pinning

```
for i in `seq 1 8` ; do
    (./runProgram &)
done 
```

亲爱的同学们，我知道如何通过创建 8 个独立进程来创建并行进程，接下来我要寻找的是如何

i-Run 8 个副本与处理器固定同时运行（每个副本都是自己的处理器内核）

ii-与处理器固定同时运行 16 个副本（每个内核 2 个副本）

iii-按照“iii”同时运行 8 个副本，处理器固定，并在代码中的特定函数调用后将处理器内核翻转到最远的内核。

我的 cpu 当前配置是 8 核。它运行 Fedora 操作系统。我事先不知道进程ID。

请建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T07:05:41.643

实现 i 和 ii 的最简单方法是使用`taskset`命令：

案例一：

```
for i in `seq 0 7`; do
  taskset -c $i ./runProgram &
done 
```

案例二：

```
for i in `seq 0 7`; do
  taskset -c $i ./runProgram &
  taskset -c $i ./runProgram &
done 
```

案例 iii：请参阅手册页了解如何更改代码中的固定`sched_getaffinity(2)`。`sched_setaffinity(2)`

# php - 在 phpThumb 中打开错误消息

> ID：10474965
> 
> 赞同：4
> 
> 时间：2012-05-06T22:53:51.573
> 
> 标签：php, image-processing, phpthumb

我是怎么做到的？我查看了 phpThumb.php 并设置了以下内容，所以我不知道为什么我的[演示](http://nicolaelvin.com/phpThumb/demo/phpThumb.demo.demo.php)页面上出现错误

```
ini_set('display_errors', 1); 
error_reporting(E_ALL); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-26T10:30:00.030

在 phpThumb.config.php 中将此行更改为 false： $PHPTHUMB_CONFIG['disable_debug'] = true;

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T23:15:38.133

PHP 错误报告和您在图像中看到的错误消息是两个不同的东西，因此这些设置不相关。

编辑： phpThumb() 有以下错误配置：

```
// * Error message configuration
$PHPTHUMB_CONFIG['error_image_width']           = 400;      // default width for error images
$PHPTHUMB_CONFIG['error_image_height']          = 100;      // default height for error images
$PHPTHUMB_CONFIG['error_message_image_default'] = '';       // Set this to the name of a generic error image (e.g. '/images/error.png') that you want displayed in place of any error message that may occur. This setting is overridden by the 'err' parameter, which does the same thing.
$PHPTHUMB_CONFIG['error_bgcolor']               = 'CCCCFF'; // background color of error message images
$PHPTHUMB_CONFIG['error_textcolor']             = 'FF0000'; // color of text in error messages
$PHPTHUMB_CONFIG['error_fontsize']              = 1;        // size of text in error messages, from 1 (smallest) to 5 (largest)
$PHPTHUMB_CONFIG['error_die_on_error']          = true;     // die with error message on any fatal error (recommended with standalone phpThumb.php)
$PHPTHUMB_CONFIG['error_silent_die_on_error']   = false;    // simply die with no output of any kind on fatal errors (not recommended)
$PHPTHUMB_CONFIG['error_die_on_source_failure'] = true;     // die with error message if source image cannot be processed by phpThumb() (usually because source image is corrupt in some way). If false the source image will be passed through unprocessed, if true (default) an error message will be displayed. 
```

来源：[http ://phpthumb.sourceforge.net/index.php?source=phpThumb.config.php](http://phpthumb.sourceforge.net/index.php?source=phpThumb.config.php)

# java - 在 s:select 中使用 #this 时出现奇怪的 OGNL 行为

> ID：10474967
> 
> 赞同：3
> 
> 时间：2012-05-06T22:54:11.997
> 
> 标签：java, struts2, ognl

考虑以下情况，其中 availableExclusions 是 Date 对象的数组。

```
<s:select listValue="(new java.text.SimpleDateFormat('MM/dd/yyyy')).format(new java.util.Date(#this[0].time))" size="25" id="inputExclusionDates" name="available" list="availableExclusions" multiple="true" cssClass="multi-select" /> 
```

我创建了上述内容以回答这个问题[如何在 struts 2 选择标签中格式化日期列表？](https://stackoverflow.com/questions/10454517/how-would-i-format-a-list-of-dates-within-a-struts-2-select-tag)（我还建议其他解决方案可能是更好的方法）。不管使用这么长的 OGNL 表达式是否是一个好主意，我都看不出有必要：`new java.util.Date(#this[0].time)`尽管出于沮丧创建了该片段，但令我惊讶的是，它发现它在看似等效的地方`#this[0]`不起作用（没有产生输出）。

如果我们替换，`listValue="#this[0].class"`我们会看到我们所期望的：`class java.util.Date`

创建一个新的 Date 的行为符合预期，并调用 Date 的不推荐使用的属性，例如`listValue="#this[0].day"`产生预期的输出。

**为什么我必须使用冗余表达式** `new java.util.Date(#this[0].time)` **而不是** `#this[0]` **在这个 select 语句中？**

使用 Struts 2.3.1.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:23:06.857

因为`#this[0]`会自动转换为String。如果您将日志级别转为调试，您可以看到通常被抑制的异常消息。

# parsing - Scala 如何理解不同格式的函数调用？

> ID：10474968
> 
> 赞同：0
> 
> 时间：2012-05-06T22:54:15.833
> 
> 标签：parsing, scala, programming-languages, compilation

我意识到以下函数调用都是相同的，但我不明白为什么。

```
val list = List(List(1), List(2, 3), List(4, 5, 6))

list.map(_.length)   // res0 = List(1,2,3) result of 1st call

list map(_.length)   // res1 = List(1,2,3) result of 2nd call

list map (_.length)  // res2 = List(1,2,3) result of 3rd call 
```

我可以理解第一次调用，这只是一个常规函数调用，因为 map 是类 List 的成员函数

但我无法理解第二次和第三次通话。例如，在第三次调用中，Scala 编译器如何知道“(_.length)”是“map”的参数？编译器如何知道“map”是“list”的成员函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T23:04:14.433

变体 2 和 3 之间的唯一区别是括号前面的空格？这只能是一个分隔符 -`list a`当然`lista`是不同的，但是一个左括号是一个新的标记，你可以在前面放一个空格或两个或三个 - 或者没有。我不明白你怎么能在这里期待不同。

在Java中，没有区别

```
 System.out.println ("foo"); 
```

// 和

```
 System.out.println("foo"); 
```

也。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T20:35:07.827

这是运算符符号。它起作用的原因与起作用的原因相同`2 + 2`。

空格是用来区分单词`listmap(_.length)`的——会让编译器查找`listmap`。但是，如果您编写`list++list`，它也会起作用，就像`list ++ list`.

因此，您正在使用运算符表示法，空格是分隔单词所必需的，否则可能存在或不存在。

# python - 如何在 Django 中使用 wxSpellCheckerDialog？

> ID：10474971
> 
> 赞同：0
> 
> 时间：2012-05-06T22:54:34.257
> 
> 标签：python, django, wxpython

根据 pyenchant[文档](http://packages.python.org/pyenchant/tutorial.html)的用法如下，

```
>> import wx
>> from enchant.checker import SpellChecker
>> from enchant.checker.wxSpellCheckerDialog import wxSpellCheckerDialog
>>
>> app = wx.PySimpleApp()
>> text = "This is sme text with a fw speling errors in it. Here are a fw more to tst it ut."
>> dlg = wxSpellCheckerDialog(None,-1,"")
>> chkr = SpellChecker("en_US",text)
>> dlg.SetSpellChecker(chkr)
>> dlg.Show()
>> app.MainLoop() 
```

这将打开拼写更正对话框。

那么我怎样才能得到修改后的文本呢？

**编辑 1：**

text = chkr.get_text() 返回更正的文本。但我收到以下错误。

PyAssertionError at /quiz/submit/ C++ 断言 "wxThread::IsMain()" failed at ....\src\msw\evtloop.cpp(244) in wxEventLoop::Dispatch(): 只有主线程可以处理 Windows 消息

这是我实现的代码

```
app = wx.PySimpleApp()
text = "This is sme text with a fw speling errors in it. Here are a fw more to tst it ut."
dlg = wxSpellCheckerDialog(None,-1,"")
chkr = SpellChecker("en_US",text)
dlg.SetSpellChecker(chkr)
dlg.ShowModal()
text = chkr.get_text() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:49:59.140

我很确定您调用`chkr.getText()`which 返回更正后的文本。

# url - 名称与 DIV ID 冲突的命名锚 (A)

> ID：10474972
> 
> 赞同：5
> 
> 时间：2012-05-06T22:55:13.790
> 
> 标签：url, html, anchor

我正在使用哈希侦听器来显示和隐藏内容 DIV 并滚动到同名的命名锚点的站点上工作。

我遇到了一个奇怪的问题，它不是滚动到锚点，而是滚动到 ID 与锚点名称相同的 DIV。

一旦我将 DIV ID 更改为不同的东西，行为就如预期的那样。

我似乎找不到任何关于此的文档，并且想知道这是否是记录在案的行为。

有效的代码：

```
<a name="top">top</a>

<p id="bottomx" style="height: 1800px;">
<a href="#top">top</a>
<a href="#bottom">bottom</a>
<br>
</p>
<a name="bottom">bottom</a> 
```

没有按预期工作：

```
<a name="top">top</a>

<p id="bottom" style="height: 1800px;">
<a href="#top">top</a>
<a href="#bottom">bottom</a>
<br>
</p>
<a name="bottom">bottom</a> 
```

在第二个示例中，它将滚动到名为“bottom”的 P。同样，如果我在页面底部创建一个 ID 为“bottom”的 DIV，然后点击 page.html#bottom，它会向下滚动到该 DIV。

只是看起来很混乱。一个想法为什么这是这样工作的？Safari 和 FF 中的行为相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T23:08:59.413

[`id`优先于`name`](http://www.w3.org/TR/html5/history.html#scroll-to-fragid)：

> 对于 HTML 文档（和 HTML MIME 类型），必须遵循以下处理模型来确定文档的指示部分是什么。
> 
> 1.  解析 URL，让 fragid 成为 URL 的组成部分。
>     
>     
> 2.  如果 fragid 是空字符串，则文档的指示部分是文档的顶部；在这里停止算法。
>     
>     
> 3.  假设解码的脆弱是将有效的 UTF-8 序列的任何百分比编码八位字节序列扩展为 UTF-8 定义的 Unicode 字符的结果。如果该字符串中的任何百分比编码的八位字节不是有效的 UTF-8 序列（例如，它们扩展为代理代码点），则跳过这一步和下一步。
>     
>     
> 4.  如果没有跳过这一步，并且 DOM 中有一个元素的 ID 与解码后的 fragid 完全相同，那么树顺序中的第一个这样的元素就是文档的指示部分；在这里停止算法。
>     
>     
> 5.  如果 DOM 中有一个 a 元素的 name 属性的值正好等于 fragid（未解码的 fragid），那么树顺序中的第一个这样的元素就是文档的指示部分；在这里停止算法。
>     
>     
> 6.  如果 fragid 是字符串 top 的不区分大小写的 ASCII 匹配，则文档的指示部分是文档的开头；在这里停止算法。
>     
>     
> 7.  否则，文档中没有指定的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:41:55.950

HTML 4.01 和 XHTML 1.0 规范要求元素中的`name`属性`a`不能与属性的值相同`id`，除非在同一元素上设置时，文档是错误的。浏览器可以自由地应用他们自己的错误处理，这可能是相当无计划的。

HTML5 草案指定了复杂的错误处理规则，但它们也将元素中的`name`属性声明`a`为已过时。

对同一文档中的两个元素使用相同的值是不合逻辑的（并且正式禁止）`id`，因为其目的和唯一目的`id`是为元素提供*唯一*标识符。该`<a name=...>`构造早于 HTML 的历史，并且总是意味着在受限环境中`id`扮演与 相同的角色。`id`因此，它受到同样的对待是很自然的。

# objective-c - 两个变量在调试器中显示为 0，但相减得到 -5

> ID：10474973
> 
> 赞同：0
> 
> 时间：2012-05-06T22:55:41.647
> 
> 标签：objective-c, xcode, math, lldb

在这段代码中，答案为 0 是正确的，但我最终得到 -5。那么为什么这个简单的算术计算是错误的呢？可能发生了什么？

```
int daysFromCurrentDay = (i-(1 - weekDisplay));

// daysFromCurrentDay shows as 0 in the debugger.
// currentDay shows as 0 in the debugger.

daysFromCurrentDay -= currentDay;

// daysFromCurrentDay now shows as -5... What?? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T23:06:55.773

从 LLDB 更改为 GDB 暂时解决了这个问题……不知道为什么 LLDB 显示的值不正确，但问题现在解决了。

# java - java.lang.IncompatibleClassChangeError：实现类 Mongo

> ID：10474976
> 
> 赞同：19
> 
> 时间：2012-05-06T22:56:10.387
> 
> 标签：java, spring, mongodb, tomcat, maven

我无法弄清楚为什么会出现此错误。我尝试清理多余的库等等。

当我尝试这样做时出现错误：

```
 mongo = new Mongo(host, port); 
```

有趣的是，我可以运行从 IDE (IntelliJ) 制作的任何单元测试，但是当我尝试通过 Tomcat 运行它时，我得到了这个：

```
 Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.
    sfatandrei.db.MongoManager]: Constructor threw exception; nested exception is java.lang.IncompatibleCla
    ssChangeError: Implementing class
        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)
        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInst
    antiationStrategy.java:110)
        at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(Constructo
    rResolver.java:280)
        ... 82 more
    Caused by: java.lang.IncompatibleClassChangeError: Implementing class
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
        at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2889)
        at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1170)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
        at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2889)
        at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1170)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
        at com.mongodb.MongoOptions.reset(MongoOptions.java:47)
        at com.mongodb.MongoOptions.<init>(MongoOptions.java:29)
        at com.mongodb.Mongo.<init>(Mongo.java:148)
        at com.mongodb.Mongo.<init>(Mongo.java:137)
        at com.sfatandrei.db.MongoManager.<init>(MongoManager.java:28)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.
    java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
        ... 84 more 
```

`mvn dependency:tree -Dverbose`

```
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ mongodb-performance-test ---
[INFO] com.sfatandrei:mongodb-performance-test:war:1.0
[INFO] +- junit:junit:jar:4.8.2:test
[INFO] +- org.springframework:spring-core:jar:3.1.1.RELEASE:compile
[INFO] |  +- org.springframework:spring-asm:jar:3.1.1.RELEASE:compile
[INFO] |  \- (commons-logging:commons-logging:jar:1.1.1:compile - omitted for duplicate)
[INFO] +- org.springframework:spring-beans:jar:3.1.1.RELEASE:compile
[INFO] |  \- (org.springframework:spring-core:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] +- org.springframework:spring-context:jar:3.1.1.RELEASE:compile
[INFO] |  +- org.springframework:spring-aop:jar:3.1.1.RELEASE:compile
[INFO] |  |  +- (aopalliance:aopalliance:jar:1.0:compile - omitted for duplicate)
[INFO] |  |  +- (org.springframework:spring-asm:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  |  +- (org.springframework:spring-beans:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  |  \- (org.springframework:spring-core:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-beans:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-core:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  +- org.springframework:spring-expression:jar:3.1.1.RELEASE:compile
[INFO] |  |  \- (org.springframework:spring-core:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  \- (org.springframework:spring-asm:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] +- org.springframework:spring-jdbc:jar:3.1.1.RELEASE:compile
[INFO] |  +- (org.springframework:spring-beans:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-core:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  \- org.springframework:spring-tx:jar:3.1.1.RELEASE:compile
[INFO] |     +- (aopalliance:aopalliance:jar:1.0:compile - omitted for duplicate)
[INFO] |     +- (org.springframework:spring-aop:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |     +- (org.springframework:spring-beans:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |     +- (org.springframework:spring-context:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |     \- (org.springframework:spring-core:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] +- org.springframework:spring-web:jar:3.1.1.RELEASE:compile
[INFO] |  +- aopalliance:aopalliance:jar:1.0:compile
[INFO] |  +- (org.springframework:spring-beans:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-context:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  \- (org.springframework:spring-core:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] +- org.springframework:spring-webmvc:jar:3.1.1.RELEASE:compile
[INFO] |  +- (org.springframework:spring-asm:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-beans:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-context:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  +- org.springframework:spring-context-support:jar:3.1.1.RELEASE:compile
[INFO] |  |  +- (org.springframework:spring-beans:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  |  +- (org.springframework:spring-context:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  |  \- (org.springframework:spring-core:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-core:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-expression:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  \- (org.springframework:spring-web:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] +- org.springframework.data:spring-data-mongodb:jar:1.0.0.RELEASE:compile
[INFO] |  +- (org.springframework:spring-beans:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-expression:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  +- org.springframework.data:spring-data-commons-core:jar:1.2.0.RELEASE:compile
[INFO] |  |  +- (org.springframework:spring-beans:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  |  \- (org.springframework:spring-tx:jar:3.1.1.RELEASE:compile - omitted for duplicate)
[INFO] |  \- org.mongodb:mongo-java-driver:jar:2.7.1:compile
[INFO] +- log4j:log4j:jar:1.2.16:compile
[INFO] +- org.springframework:spring-test:jar:3.1.1.RELEASE:compile
[INFO] +- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] +- javax.servlet:servlet-api:jar:2.5:provided
[INFO] +- org.mongodb:bson:jar:2.3:compile
[INFO] \- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.6:compile
[INFO]    \- org.codehaus.jackson:jackson-core-asl:jar:1.9.6:compile 
```

我正在使用 jdk 7、tomcat 7.0.27、maven 3.0.3。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-07T00:25:43.387

这看起来像是字节码级别的错误。也许您的 tomcat 服务器中有同一个库的两个版本。

请参阅：[什么导致 java.lang.IncompatibleClassChangeError？](https://stackoverflow.com/questions/1980452/what-causes-java-lang-incompatibleclasschangeerror)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:16:08.093

如果你在 JBoss 下遇到这个问题，很可能是因为 JBoss 默认捆绑了 RESTeasy REST 实现。如果您将自己的 REST 库打包到 EAR/WAR 文件中，则需要禁用默认的 RESTeasy 以使您部署的库正常工作。

# c# - 更新后用过滤器刷新绑定的datagridview c#

> ID：10474982
> 
> 赞同：2
> 
> 时间：2012-05-06T22:57:35.030
> 
> 标签：c#, datagridview, filter, refresh

我有一个带有用于搜索的过滤器的 datagridview。如果我更新数据库然后将 dgv 重置为数据源，我会丢失过滤器。我试过做 ResetBindings 但这没有帮助。如果我关闭表单并重新打开那里的更改，我希望它“实时”发生。任何建议表示赞赏。

我有一个基于 SQL 视图的数据集。在这个数据集中有一个基于这个视图的表。datagridview 绑定到这个表。我有几个控件，包括绑定到 dgv 中的列的文本框和组合框。我有一个用于在网格上搜索的文本框：

```
private void txtFilterString_TextChanged(object sender, EventArgs e)
{
    ToolStripTextBox tb = (ToolStripTextBox)sender;

    DataView dv = tILEDataSet.vwTILEAdmin.DefaultView;

    vwTILEAdminBindingSource.Filter =
        string.Format(@"PdcProductName LIKE '%{0}%' OR LabelDescription LIKE '%{0}%' OR LabelProductName LIKE '%{0}%'",
        tb.Text.Trim().Replace("'", "''"));

    dataGridView1.Refresh();                
} 
```

通过修改一个或多个绑定控件对 dgv 中的一行进行更改后，我保存更改，这会更新表：

```
sql.Append(@"UPDATE [dbo].[LabeledProducts]
SET [PdcProductName] = @pdcProd
,[LabelProductName] = @lblProd
,[LabelDescription] = @lblDesc
,[Power] = @pwr
,[Fabrication] = 0
,[UL_File_Number] = ''
,[PrePrintedSerial] = 0
,[ShowOrderOnLabel] = 0
,[PrivateLabelLogoId] = @plid
,[AgencyImageId] = @aid
,[WireDiagConfigId] = @wid
WHERE PdcProductName = '").Append(pdcProductName).Append("'");

using (SqlCommand command = new SqlCommand(sql.ToString(), printConfigTableAdapter.Connection)) 
{
    if (vwTILEAdminTableAdapter.Connection.State != ConnectionState.Open)
        vwTILEAdminTableAdapter.Connection.Open();

    LabeledProductsDataTableAdapter.UpdateCommand = command;
    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@pdcProd", txtPdcProdName.Text);
    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@lblProd", txtLabeledProd.Text);
    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@lblDesc", txtLabelDesc.Text);
    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@pwr", txtPower.Text);
    // we need ulfilename and mod
    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@plid", LogoId);
    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@aid", AgencyId);
    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@wid", WireId);
    DataTable dt = new DataTable();

    int rowsAffected = LabeledProductsDataTableAdapter.Update(dt);
    rowsAffected = command.ExecuteNonQuery();

    dataGridView1.Refresh();
    //dataGridView1.DataSource = tILEDataSet.vwTILEAdmin;

    //this.vwTILEAdminBindingSource.ResetBindings(true);

} 
```

如果我取消注释我设置数据源的行，我会得到一个刷新的视图，但是用于在绑定源上生成过滤器的文本框不再起作用，例如，无论我在文本框中键入什么。Text_Changed 事件仍会被调用，但过滤器不再对 dgv 的内容产生任何影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:44:26.077

看起来你的问题很简单。

在这些行中：

```
dataGridView1.DataSource = tILEDataSet.vwTILEAdmin; 

this.vwTILEAdminBindingSource.ResetBindings(true); 
```

您将网格的数据源设置为 vwTILEAdmin，但在您的过滤器代码中，您正在过滤不再是网格数据源的绑定源！

请尝试：

```
this.vwTILEAdminBindingSource.DataSource = tILEDataSet.vwTILEAdmin; 

this.vwTILEAdminBindingSource.ResetBindings(true); 
```

* * *

此外，您可能不需要`.Refresh()`网格上的调用 - 该方法实际上并不刷新网格的数据源。它只重绘网格客户区，如果您有一个陈旧的数据源（网格不知道数据已更改），重绘不会有任何影响。

如果您仍然遇到问题，则可能是对网格数据源的更新没有传播 - 这没有引发网`ListChanged`格监听以了解何时更新的事件。如果是这种情况，那么您需要清空数据源并重置它。

```
dataGridView1.DataSource = typeof(List<string>); 
dataGridView1.DataSource = newDataSource; 
```

在上面的代码中，数据源设置为，`typeof(List)`因为这会保留所有现有列。然后，您将再次将绑定源设置为网格数据源。虽然我怀疑这是否必要 - 绑定源`ResetBindings`调用应该足够了。

# java - 具有多个参数的 Java 泛型

> ID：10474986
> 
> 赞同：6
> 
> 时间：2012-05-06T22:58:18.310
> 
> 标签：java, generics, comparable

我在网站上看到了处理具有多个参数的泛型的示例，但没有一个适合我的情况。

所以这是交易：我正在尝试学习 Java 泛型，并决定创建一个简单的二进制数组搜索实用程序函数。我正在使用自定义对象和整数对其进行测试。为了获得有关错误和警告的反馈，我正在使用 Eclipse。这是我所拥有的：

```
public static int binarySearch(Comparable[] array, Comparable item, int start, int end) {
    if(end < start) {
        return -1;
    }
    int mid = (start + end) / 2;
    if(item.compareTo(array[mid]) > 0) {
        return binarySearch(array, item, mid + 1, end);
    } else if(item.compareTo(array[mid]) < 0) {
        return binarySearch(array, item, start, mid - 1);
    } else {
        return mid;
    }
} 
```

所以很明显我得到了原始类型的警告，说泛型应该被参数化。鉴于我有多个参数都需要为相同类型，我该如何正确执行此操作？

**解决方案**

这是使用具有正确参数检查的泛型的工作解决方案：

```
public static <T extends Comparable<? super T>> int binarySearch(T[] array, T item, int start, int end) {
    if(array.length == 0) {
        return -1;
    }
    if(item == null) {
        return -1;
    }
    if(start < 0) {
        return -1;
    }
    if(end < start) {
        return -1;
    }
    int mid = (start + end) / 2;
    if(item.compareTo(array[mid]) > 0) {
        return binarySearch(array, item, mid + 1, end);
    } else if(item.compareTo(array[mid]) < 0) {
        return binarySearch(array, item, start, mid - 1);
    } else {
        return mid;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T23:05:53.173

您可以像这样指定特定于函数的通用参数

```
public static <T extends Comparable<? super T>> int binarySearch(T[] arr,T elem,int start,int end){
    //...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T23:05:39.260

这是创建泛型函数的典型方法：

```
public static <T extends Comparable<? super T>> int binarySearch(T[] array, T item, int start, int end) { ... } 
```

为了更加通用，`item`不必与数组中的事物*具有*相同的类型，并且数组中的事物不必*是*因为`Comparable`您没有将它们与任何东西进行比较，所以

```
public static <T> int binarySearch(T[] array, Comparable<T> item, int start, int end) { ... } 
```

提供了一些额外的灵活性。

# c# - 如何在自定义任务中访问当前项目上下文？

> ID：10474990
> 
> 赞同：5
> 
> 时间：2012-05-06T22:58:48.890
> 
> 标签：c#, .net, msbuild

如何在 MSBuild 的自定义任务中访问当前项目上下文？起初它看起来好像[ProjectCollection](http://msdn.microsoft.com/en-us/library/microsoft.build.evaluation.projectcollection.aspx)上的 GlobalProjectCollection 引用允许访问，但这似乎是空的，至少在从命令行运行 MSBuild 时是这样。

我目前可以通过以下方式从当前项目文件中获取新的项目实例：

```
List projectAssemblies = new List();
using (XmlReader projectFileReader =
    XmlReader.Create(this.BuildEngine.ProjectFileOfTaskNode))
{
    Project project = new Project(projectFileReader);
    foreach (ProjectItem item in project.AllEvaluatedItems)
    {
      ... woo hoo ...
    }
} 
```

但这似乎很麻烦。如何才能访问调用我的任务的项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T03:22:58.890

你不能。MSBuild 是专门设计的，因此单个任务只能访问您明确传递给任务的参数，而不能访问其他任何参数。这使得 MSBuild 文件更易于阅读，因为您知道每个任务仅受调用此任务时指定的内容的影响。

您拥有的代码不是创建项目的副本，而是创建一个新实例，因此您不应期望属性相同。例如，当前正在执行的项目的实例（从中调用您的任务）可能具有从命令行覆盖的属性或在构建项目的过程中发生更改，而新创建的项目在 first 之后将具有属性的默认值MSBuild 引擎通过文件。

# visual-studio-2008 - 使用英特尔 Visual Fortran 编译器在 Microsoft Visual Studio 2008 中配置 LAPACK

> ID：10474991
> 
> 赞同：1
> 
> 时间：2012-05-06T22:59:17.900
> 
> 标签：visual-studio-2008, lapack

我开发了一个需要 LAPACK 功能的项目。我已经在 MACINTOSH 中使用 GFORTRAN 作为编译器和“framework -vecLib”命令来构建它。“vecLib”是苹果提供的 LAPACK 替代品。

现在我需要在 Windows 64 位机器上实现相同的项目。我安装了带有 Intel Visual FORTRAN 编译器的 Microsoft Visual Studio 2008。我已经实现了源文件并准备好了，除了没有与我的 VS2008 链接的 LAPACK。

我一直在通过互联网浏览解决方案，发现很少有网站提供一些评论，但使用这些信息我无法让事情正常工作。

如果有人能给我一个详细的分步程序，将 LAPACK 与我的项目联系起来，我将不胜感激。

感谢帮助，

阿弥陀佛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:10:34.703

如果您使用的是 Intel Fortran，则可能捆绑了 MKL 库。这是[来自 Intel 的知识库文章](http://software.intel.com/en-us/articles/intel-math-kernel-library-intel-mkl-for-windows-build-intel-mkl-program-with-intel-fortran-in-microsoft-visual-studio/)。

# javascript - 将 JavaScript 字符串拆分为固定长度的片段

> ID：10474992
> 
> 赞同：21
> 
> 时间：2012-05-06T22:59:28.857
> 
> 标签：javascript, html, node.js

我想将字符串拆分为固定长度（例如*N*）的片段。当然，如果原始字符串的长度不是*N*的倍数，最后一段可能会更短。

我需要最快的方法来做到这一点，但也是最简单的写法。到目前为止，我一直这样做的方式如下：

```
var a = 'aaaabbbbccccee';
var b = [];
for(var i = 4; i < a.length; i += 4){ // length 4, for example
    b.push(a.slice(i-4, i));
}
b.push(a.slice(a.length - (4 - a.length % 4))); // last fragment 
```

我认为必须有更好的方法来做我想做的事。但我不想要额外的模块或库，如果可能的话，只想要简单的 JavaScript。

在询问之前，我已经看到了一些使用其他语言解决此问题的解决方案，但它们在设计时并未考虑到 JavaScript。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-06T23:12:56.007

你可以试试这个：

```
var a = 'aaaabbbbccccee';
var b = a.match(/(.{1,4})/g); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-06T23:17:51.307

请参阅此相关问题：[https](https://stackoverflow.com/a/10456644/711085) ://stackoverflow.com/a/10456644/711085和[https://stackoverflow.com/a/8495740/711085](https://stackoverflow.com/a/8495740/711085)（如果性能有问题，请参阅评论中的性能测试。）

第一个（较慢的）链接：

```
[].concat.apply([],
    a.split('').map(function(x,i){ return i%4 ? [] : a.slice(i,i+4) })
) 
```

作为字符串原型：

```
String.prototype.chunk = function(size) {
    return [].concat.apply([],
        this.split('').map(function(x,i){ return i%size ? [] : this.slice(i,i+size) }, this)
    )
} 
```

演示：

```
> '123412341234123412'.chunk(4)
["1234", "1234", "1234", "1234", "12"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-28T09:29:32.223

```
function stringToChanks(string, chunkSize) {
    const chunks = [];
    while (string.length > 0) {
        chunks.push(string.substring(0, chunkSize));
        string = string.substring(chunkSize, string.length);
    }
    return chunks
} 
```

# python - 网络服务器的瓶子加载时间非常慢

> ID：10474993
> 
> 赞同：6
> 
> 时间：2012-05-06T22:59:53.100
> 
> 标签：python, html, python-2.7, bottle

所以我目前正在为我的网络运行一个基本的小网站。但是，我遇到了一些问题。当我在运行服务器的计算机上运行服务器时，我可以非常快速地访问这些页面。但是，当我尝试在网络上的另一台计算机上访问同一页面时，它的加载速度非常慢。是不是因为我使用的是开发者。服务器而不是像 Paste 或 Apache 这样的东西？（还要注意，当我查看服务器计算机时，请求日志在我在另一台计算机上的浏览器上请求后大约 5-6 秒出现）

我的代码如下：

正在访问的页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="content-type"
 content="text/html; charset=ISO-8859-1">
  <title>index</title>
  <link type="text/css"
 href="cssfiles/mainpagecss.css"
 rel="stylesheet">
</head>
<body>
<table
 style="width: 100%; text-align: left; margin-left: auto; margin-right: auto;"
 border="0" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td>
      <h1><span class="headertext">
      <center>Network
Website</center>
      </span></h1>
      </td>
    </tr>
  </tbody>
</table>
%if name!='none':
    <p align="right">signed in as: {{name}}</p>
%else:
    pass
%end
<br>
<table style="text-align: left; width: 100%;" border="0" cellpadding="2"
 cellspacing="2">
  <tbody>
    <tr>
      <td>
      <table style="text-align: left; width: 100%;" border="0"
 cellpadding="2" cellspacing="2">
        <tbody>
          <tr>
            <td style="width: 15%; vertical-align: top;">
            <table style="text-align: left; width: 100%;" border="1"
 cellpadding="2" cellspacing="2">
              <tbody>
                <tr>
                  <td>Home<br>
                  <span class="important">Teamspeak Download</span><br>
                  <span class="important">Teamspeak Information</span></td>
                </tr>
              </tbody>
            </table>
            </td>
            <td style="vertical-align: top;">
            <table style="text-align: left; width: 100%;" border="1"
 cellpadding="2" cellspacing="2">
              <tbody>
                <tr>
                  <td>
                  <h1><span style="font-weight: bold;">Network Website</span></h1>
To find all of the needed information relating to the network's social
capabilities, please refer to the links in the side bar.</td>
                </tr>
              </tbody>
            </table>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
  </tbody>
</table>
</body>
</html> 
```

CSS：

```
 .headertext { color: rgb(51, 51, 51);
    }

  .bodytext {  }

  .important { font-weight: bold;
    } 
```

服务器：

```
from Bottle import route,run,template,request,static_file

@route('/')
def home():
    return template('Templates/',name=request.environ.get('REMOTE_ADDR'))

run(host='Work-PC',port=9999,debug=True) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T00:44:54.150

我知道我迟到了，但我遇到了同样的问题。默认的瓶服务器（来自 wsgiref.simple_server 的 WSGIRef）对每个 GET、POST 等进行反向 DNS 查找，因此它可以使用连接主机名而不是其在 Web 日志中的 IP 地址。*即使*您有一个快速的 DNS 响应程序，这也会不必要地减慢速度。:(

只需对 bottle.py 进行一点修改，您就可以重载执行 rDNS 的底层方法`BaseHTTPRequestHandler.address_string()`，如下所示：

## 瓶子.py

```
 class WSGIRefServer(ServerAdapter):
     def run(self, handler): # pragma: no cover
         from wsgiref.simple_server import make_server, WSGIRequestHandler
+        self.fast = True
+        self.quiet = False
+        if self.fast and self.quiet:  # disable logging and rDNS
+            class FastAndQuietHandler(WSGIRequestHandler):
+                def address_string(self): return self.client_address[0]
+                def log_request(*args, **kw): pass
+            self.options['handler_class'] = FastAndQuietHandler
+        elif self.fast:  # disable Reverse DNS Lookups -> faster service
+            class FastHandler(WSGIRequestHandler):
+                def address_string(self): return self.client_address[0]
+            self.options['handler_class'] = FastHandler
-        if self.quiet:
+        elif self.quiet:  # disable action entries to web-log
             class QuietHandler(WSGIRequestHandler):
                 def log_request(*args, **kw): pass
             self.options['handler_class'] = QuietHandler
         srv = make_server(self.host, self.port, handler, **self.options)
         srv.serve_forever() 
```

我不喜欢修补源代码，但在上游接受此修补程序之前，*如果*您确定使用默认服务器，这会很好。

信用：见 - [https://stackoverflow.com/a/6761844/538418](https://stackoverflow.com/a/6761844/538418)

高温高压

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-29T00:56:11.473

尝试从同一网络上的另一台 PC 测试 Bottle 应用程序时，我遇到了同样的延迟问题。

解决方案是使用更好的多线程服务器运行 Bottle。樱桃为我工作。

1.  安装樱桃：

    easy_install 樱桃

2.  更改 Bottle 以使用cherrypy运行：

    运行（应用程序，主机='0.0.0.0'，端口=8080，调试=真，重载=真，服务器='cherrypy'）

注意：easy_install 它附带分发：[http://pypi.python.org/pypi/distribute](http://pypi.python.org/pypi/distribute)

祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-24T08:56:40.960

此问题已在较新版本的瓶子中得到修复。

看到这个补丁：[https ://github.com/defnull/bottle/pull/529](https://github.com/defnull/bottle/pull/529)

# php - 使 mysql 查询连接到下拉菜单中的选定表

> ID：10474999
> 
> 赞同：0
> 
> 时间：2012-05-06T23:01:01.167
> 
> 标签：php, mysql

我有一个有效的 mysql 查询，可以从 table1 中检索数据。

现在我每个月都会添加一个新表（table2、table3..etc）。

目标 1：我想添加一个下拉菜单并将所有表格填充为用户选项。

目标 2：我想让查询连接到用户从下拉菜单中选择的表，检索数据，然后刷新页面或仅刷新表的 div 以显示更新的数据。

我当前的 mysql/php 代码：

```
$query = "SELECT X, Y, Z FROM **table1**";

$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)) 

{
echo $row['X'];

echo $row['Y'];

echo $row['Z'];
} 
```

而不是“table1”，它应该是一个链接到用户选择的下拉菜单的变量。

我觉得它应该很简单，但我对此有点陌生，找不到类似的案例。

非常感谢大佬。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:10:10.360

我喜欢上面的评论，但这里有一个例子，不确定你是否正在寻找

```
<form action="process.php" method='post'>
        <select name="tables">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        </select>
        <input type="submit" />
        </form> 
```

进程.php 文件

```
 $table=$_POST['tables'];
$query = "SELECT X, Y, Z FROM  ".$table;

$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)) 

{
echo $row['X'];

echo $row['Y'];

echo $row['Z'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:10:45.747

```
$result = 'SHOW TABLES [{FROM | IN} db_name] [LIKE 'pattern' | WHERE expr];';

while($row = mysql_fetch_array($result))
{
echo $row['Tables_from_db_name'];
} 
```